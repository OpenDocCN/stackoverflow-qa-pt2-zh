# StackOverflow 问答 13849000-13849999

# macos - 如何在运行 Adob e AIR 应用程序时隐藏 Mac OSX 菜单栏？

> ID：13849000
> 
> 赞同：2
> 
> 时间：2012-12-12T21:30:54.637
> 
> 标签：macos, actionscript-3, air, fullscreen, multiple-monitors

我需要在 2 台显示器上运行 Adob​​e AIR 应用程序，而全屏模式无法做到这一点。我想知道是否有办法隐藏 OSX（Mountain Lion）菜单栏。我可以跨 2 个显示器跨越一个无铬 AIR 窗口，但 OSX 菜单栏始终位于顶部。

有人发帖说他们可以通过使用另一个应用程序（在[这篇文章](https://stackoverflow.com/questions/7174986/adobe-air-is-it-possible-to-create-a-full-screen-app-to-fill-multiple-monitors)中）隐藏 OSX 菜单栏，但到目前为止我还没有找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T04:04:30.057

听起来他们正在使用本机应用程序来删除 UI 元素。

我建议您考虑通过 ANE 进行此操作。如果您找到了本机代码，我很乐意为您将其包装到 ANE 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:55:36.883

我发现了一个可以隐藏 Mountain Lion 上的 OSX 菜单栏的应用程序，适用于 AIR 应用程序和几乎任何其他应用程序。

该应用程序是[MenuAndDockless](http://www.macupdate.com/app/mac/36314/menuanddockless)

指示：

1.  下载应用程序，**先安装 SIMBL loader**（应用程序下载附带），然后安装 MenuAndDockless 应用程序。
2.  启动 AIR 应用程序或任何其他类型的应用程序（如果它已经在运行，则需要重新启动它）。转到 MenuAndDockless 设置（菜单 > 窗口 > 设置 > 设置...）
3.  设置所需的设置并重新启动您的应用程序。

这是 MenuAndDockless 应用程序的详细手册：http: [//myownapp.com/manuals/mad_manual/](http://myownapp.com/manuals/mad_manual/)

# iphone - 需要 TableViewCell 在被触摸时闪烁

> ID：13849007
> 
> 赞同：1
> 
> 时间：2012-12-12T21:31:11.033
> 
> 标签：iphone, ios, cocoa-touch

我有一个 TableViewCell，当它被点击时我想闪烁（即快速突出显示几次）。

到目前为止，我已经使用计时器实现了此功能，如下所示：

```
-(void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
      NSTimer *blinkTimer = [[NSTimer scheduledTimerWithTimeInterval:.05 target:self selector:@selector(toggleHighlightedMenuCell) userInfo:nil repeats:YES] retain];
      self.blinkTimer = blinkTimer;
      [blinkTimer release];
} 

-(void) toggleHighlightedMenuCell
{
    if (self.highlightedMenuCell.isHighlighted)
    {
        self.highlightedMenuCell.highlighted = NO;
    }
    else 
    {
        self.highlightedMenuCell.highlighted = YES;        
    }

    self.blinkTimerCounter++;

    if (self.blinkTimerCounter == 2)
    {
        self.blinkTimerCounter = 0;
        [self.blinkTimer invalidate];

        //execute some code
    }
} 
```

`//execute some code`问题在于它似乎在完成闪烁之前开始执行该部分中的代码。谁能想到更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:31:51.740

我认为您的时间间隔太短而无法有效查看。我不认为“执行一些代码”实际上是在执行，直到闪烁结束，它只是看起来像它。也不需要执行保留和释放语句或将计时器分配给变量。运行循环保留计时器，并在它失效时释放它。选择器的名称后应该有一个冒号，因为计时器将自身作为参数传递。所以代码可以稍微简化为：

```
-(void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
       [NSTimer scheduledTimerWithTimeInterval:.1 target:self selector:@selector(toggleHighlightedMenuCell:) userInfo:nil repeats:YES];
} 

-(void) toggleHighlightedMenuCell:(NSTimer *) aTimer
{
    if (self.highlightedMenuCell.isHighlighted)
    {
        self.highlightedMenuCell.highlighted = NO;
    }
    else 
    {
        self.highlightedMenuCell.highlighted = YES;        
    }

    self.blinkTimerCounter++;

    if (self.blinkTimerCounter == 2)
    {
        self.blinkTimerCounter = 0;
        [aTimer invalidate];

        //execute some code
    }
} 
```

我假设您已经在其他地方初始化了 blinkTimerCounter。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T23:33:39.517

最终将一些 UIView 动画链接在一起，它最终完美地工作：

```
-(void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
            [UIView animateWithDuration:.05 delay:0 options:0 animations:
            ^{
                self.highlightedMenuCell.highlighted = !self.highlightedMenuCell.highlighted;
             }
             completion:^(BOOL finished)
             {
                [UIView animateWithDuration:.05 delay:0 options:0 animations:
               ^{
                   self.highlightedMenuCell.highlighted = !self.highlightedMenuCell.highlighted;
                }
                completion:^(BOOL finished)
                {
                    if ([self.menuViewDelegate respondsToSelector:@selector(menuView:didSelectMenuItem:viaTouchType:)])
                    {
                        [self.menuViewDelegate menuView:self didSelectMenuItem:self.highlightedMenuCell.menuItem viaTouchType:TouchTypeTouchUpInside];
                    }
                }];
            }];
} 
```

# asp.net - 从asp.net 4中的资源文件中获取文本

> ID：13849015
> 
> 赞同：3
> 
> 时间：2012-12-12T21:31:34.353
> 
> 标签：asp.net, localization, resource-file

我有一个包含标签的 asp.net 网页，现在我想从 localresource 文件中获取标签的文本属性，我在文件夹`.resx`下有一个文件，其中包含我正在使用的文件`App_LocalResources`中的名称`UserNameLabel.Text`和值像这样控制`User Name``aspx``Label`

`<asp:Label ID="UserNameLabel" runat="server" resourcekey="UserNameLabel"></asp:Label>`

但我无法获取标签上的文本，谁能告诉我从资源文件中添加文本属性的正确方法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T22:11:34.670

首先，您需要在 Web 项目中创建适当的结构。在这种情况下，我将使用 Default.aspx：

![在此处输入图像描述](../Images/1f014aa071360fcefab5575fab4d60b2.png)

请注意，我已将 Default.aspx.resx 文件放在 App_LocalResources 中。

接下来在 Default.aspx.resx 中输入新项目，如下所示：

![在此处输入图像描述](../Images/4c334735814bc39b27ed0cfc7ca255f9.png)

重要的是您需要设置 Text 属性（UserNameLabel.Text）

最后是aspx代码：

```
<asp:Label ID="UserNameLabel" runat="server" meta:resourcekey="UserNameLabel"></asp:Label> 
```

我使用 meta:resourcekey 链接到适当的资源键。

# sql-server-2008-r2 - 列总和到列值的左连接表

> ID：13849017
> 
> 赞同：1
> 
> 时间：2012-12-12T21:31:44.137
> 
> 标签：sql-server-2008-r2, cursor, while-loop, left-join, common-table-expression

我有两张桌子；SamplesTbl 包含骑自行车每 5 秒的样本，以及包含规定的阶段和骑自行车的其他值的 RxTbl：

SamplesTbl ( SamplesID int SessionNum int StageNum int RunTime int )

RxTbl (RxID int RxNum int RxStageNum int RxRunTime int)

在某些情况下（不是全部），规定的自行车骑行被分成比规定更多的阶段（5 个阶段变成 20 个阶段）。目前，我使用游标和临时表将这 20 个阶段映射回 5 个规定阶段，基于从样本表中获取的阶段数等于规定的运行时间。

例如，第 1 阶段规定为 5 分钟，但实际锻炼数据将包含等于 5 分钟的第 1 阶段至第 5 阶段（1-4：65 秒，5：40 秒），第 2 阶段规定为 3 分钟，但实际锻炼数据将包含阶段 6 到 8，等于 3 分钟（1-2：65 秒，3：50 秒）等。

有没有办法在不使用游标和/或临时表的情况下检索结果集？

# asp.net - 需要测试部署在服务器上的 asp.net web 处理程序的示例

> ID：13849025
> 
> 赞同：1
> 
> 时间：2012-12-12T21:32:17.053
> 
> 标签：asp.net, web, httphandler

我已经修改了 asp.net web 处理程序并将其部署在服务器上。

该处理程序使用静态 XML 文件在我的本地计算机上工作得更好，但在部署时会出现 IIS 500 错误。

是否有我可以用来修改我的代码以针对实时数据馈送运行的示例？

这是我对静态文件使用的：

WebRequest 请求 = null; WebResponse rsp = null; 尝试 { 字符串 uri = "https://mytestSite.com/Test_Handler.ashx";

```
 req = WebRequest.Create(uri);
            req.Method = "POST";        // Post method
            req.ContentType = "text/xml";     // content type

            // Wrap the request stream with a text-based writer
            StreamWriter writer = new StreamWriter(req.GetRequestStream());

            // Write the XML text into the stream
                            //StreamReader reader = new StreamReader(Server.MapPath("~/20121129-0121-1.xml"));

            -- Would this line capture the stream ????????
            StreamReader reader = new StreamReader(req.GetRequestStream());

           string ret = reader.ReadToEnd();
           reader.Close();

            writer.WriteLine(ret);
            writer.Close();

            // Send the data to the webserver
            rsp = req.GetResponse();         //Calls the handler code
            StreamReader sr = new StreamReader(rsp.GetResponseStream());
            string responseString = sr.ReadToEnd();
            sr.Close(); 
```

# javascript - jQuery .val() 工作，但内容随后不显示

> ID：13849026
> 
> 赞同：0
> 
> 时间：2012-12-12T21:32:18.927
> 
> 标签：javascript, jquery, asp.net

我有一个从数据库返回数据的方法，然后以 html 列表标签的形式创建一个字符串

```
options.Append("<li value=\"" + reader["CIStatusID"].ToString() + "\"><a href=\"#\" class=\"filterOption checkable\">");
options.Append(reader["Status"].ToString() + "</a></li>"); 
```

然后在我的javascript中，我将它分配给一个名为“filterType”的ul标签

```
<div id="gearOptionsViewCaseFiles" style="display: none;">
    <ul>
        <li><a href="#">Filter by Status</a>
            <ul id="filterType">
            </ul>
        </li>
    </ul>
</div> 
```

这就是我使用动态生成的列表项填充我的 ul 标记的方式：

```
success: function (data) {
    $('#filterType').val('<li value="0" class="filterOption checkable checked"><a href="#">All<img class="checkedimage" src="Images/tick.png" width="12" height="12"></a></li>' + data);
} 
```

在调试器中，“filterType”的值是生成的列表项，但在网站上，列表永远不会出现。如果将生成的 html 项分配给“filterType”ul 标记，我似乎无法弄清楚为什么它不显示

**编辑：** li 项目添加到 ul 时的样子：

```
<li value="0" class="filterOption checkable checked"><a href="#">All<img class="checkedimage" src="Images/tick.png" width="12" height="12"></a></li> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T21:34:15.480

```
$('#filterType').val() 
```

应该

```
$('#filterType').html() 
```

`.val()`用于表单元素。**ul**不是表单元素..所以不起作用`.val()`..

采用`.html()`

```
var html = '<li value="0" class="filterOption checkable checked"><a '  
            + 'href="#">All<img class="checkedimage" src="Images/tick.png" '  
            + ' width="12" height="12"></a></li>' + data;

$('#filterType').html(html);

OR 

document.getElementById('filterType').innerHTML = html; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T21:34:16.320

`.val`只能用于表单元素，AFAIK。尝试`.html`改用，如下所示：

```
$('#filterType').html('<li value="0" class="filterOption checkable checked"><a href="#">All<img class="checkedimage" src="Images/tick.png" width="12" height="12"></a></li>' + data); 
```

您可以使用`.val()`的情况如下：

HTML：

```
<input type="text" id="textbox" /> 
```

jQuery：

```
$("#textbox").val("foo"); // Assigns foo to the value of the textbox 
```

基本上，`.val()`将`value`属性添加到选定元素，这将修改表单元素的值，但对其他元素不做任何事情。

**注意**：`.val()`与`.value`JavaScript 不同，它也`.val()`适用于 textareas，`.innerText()`而是自动使用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-12T21:34:33.180

改为使用`.html`。不是`.val`

该`.val()`方法主要用于获取/设置输入、选择和文本区域等表单元素的值

# mysql - Rails 3.2.3 mysql 错误“max_prepared_stmt_count”

> ID：13849027
> 
> 赞同：4
> 
> 时间：2012-12-12T21:32:22.887
> 
> 标签：mysql, ruby-on-rails-3.2

我正在`Rails 3.2.3`使用 mysql 数据库服务器的虚拟主机上运行使用 apache2/passenger 部署的应用程序。在大量流量访问该网站后，我收到此错误：

```
ActiveRecord::StatementInvalid (Mysql::Error: Can't create more than 
max_prepared_stmt_count statements (current value: 16382) 
```

我认为这与流量有关，但如果是这样，我必须找到解决方法。以前有人遇到过这个错误吗？我不知道如何阻止它。

这是我在mysql中看到的：

mysql> 显示全局状态，如“com_stmt%”；

| Com_stmt_close | 1720319 | com_stmt_execute | 2094137 |

| Com_stmt_fetch | 0 |

| Com_stmt_prepare | 1768924 |

| Com_stmt_reprepare | 0 |

| Com_stmt_reset | 0 |

| Com_stmt_send_long_data | 0 |

+--------------+----------+

我正在运行 resque gem。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:38:53.377

很可能是针对数据库打开准备好的语句而不是关闭它们。

要检查这一点，请尝试查询：

```
show global status like ‘com_stmt%’; 
```

Com_stmt_prepare 和 Com_stmt_close 之间的非常大的差异将表明某些东西使准备好的语句保持打开状态。Com_stmt_close = 0 当然会特别有说服力。

* * *

有可能，由于两者之间的差异相对较小，您实际上确实需要一次打开许多语句，尽管我仍然认为您更有可能在某处泄漏它们（错误/边缘情况处理，是典型的例子人们经常忘记关闭资源的地方）。

您可以通过以下方式增加允许的语句数：

```
set global max_prepared_stmt_count=<some_larger number>; 
```

这应该让事情再次发生。小心过高的限制，因为这会使您容易受到 DoS 攻击。

之后，我会对其进行监控，看看是否有更多准备好的语句随着时间的推移而积累。

如果你：

```
set global general_log = 'ON'; 
```

一般日志将记录`Prepare`语句。寻找任何没有匹配的关闭，以帮助找到任何此类问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T06:48:31.273

好的，我在这里暂时权衡一个答案。我使用 femtoRgon 的提示检查状态。然后我将这两行添加到我的 database.yml 文件中

```
 pool: 30
  prepared_statements: false 
```

我重新启动了mysql。现在让应用程序运行一段时间后，我看到了这个：

```
mysql> show global status like 'com_stmt%';

| Com_stmt_close          | 189017 |

| Com_stmt_execute        | 189017 |

| Com_stmt_fetch          | 0      |

| Com_stmt_prepare        | 189017 |

| Com_stmt_reprepare      | 0      |

| Com_stmt_reset          | 0      |

| Com_stmt_send_long_data | 0      | 
```

任何地方都没有差异......加上我曾经看到这个：

```
Ecard Load (0.1ms)  SELECT `ecards`.* FROM `ecards` WHERE `ecards`.`id` = ? LIMIT 1  [["id", "34"]] 
```

我现在看到这个：

```
Ecard Load (0.4ms)  SELECT `ecards`.* FROM `ecards` WHERE `ecards`.`id` = 34 LIMIT 1 
```

我认为这表明我不再使用准备语句？希望有任何想法-我想我将不得不继续监视以了解情况如何...

# sharepoint - PowerShell 将安全 AD 帐户添加到 SharePoint 组

> ID：13849029
> 
> 赞同：0
> 
> 时间：2012-12-12T21:32:31.343
> 
> 标签：sharepoint, powershell

我对 Powershell 脚本非常陌生，并且已经起草了一个脚本，旨在将 AD 安全组添加到 SharePoint Admin 组中。该脚本应该遍历我的 web 应用程序中的所有网站集，并将安全组添加到预先存在的 SharePoint 组中：

```
###########Add Content Team as member of Admin Group 

Add-PSSnapin Microsoft.SharePoint.PowerShell
$webApp = Get-SPWebApplication [http://mysite]

function CT{
    param( [string]$siteColl, $itemID, $GroupAdmin )  

        try
        {                   

            new-SPUser -UserAlias "UK\g-content-team" -Web $siteColl -Group $GroupAdmin

           # StatusMessageUpdate $itemID "Add CT into Admin group"

        } 
        catch
        {
            #StatusMessageUpdate $itemID "Fail Add User to Owner Group"
            StatusUpdate $itemID "Error"
            $global:isError = "1"
        }  
}

 CT $site $itemID $adminGroup    

$web.Dispose() 
```

我已注释掉状态消息更新，因为这会产生错误。没有它，就没有错误，但它不会将该组添加到我的任何站点中。我知道有一大块代码丢失了——我只需要一些帮助来让代码循环。非常感谢任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:55:45.420

```
 if($spgroup){
        $spuser = $spweb.EnsureUser("$domain\$adgroupname")
        if($spuser){
            $spgroup.AddUser($spuser)
            $spgroup.Update()
        }
    } 
```

# magento - 如果有 2 个变量，如何过滤

> ID：13849030
> 
> 赞同：1
> 
> 时间：2012-12-12T21:32:45.197
> 
> 标签：magento, filter, attributes

如果 attribute_set 为 1 且 attributeText 为零，我想显示一些数据

AttributeSetId = 10 Attribute = myattribute，包含：零、一、强制

```
<?php if ($_product->getAttributeSetId() == "10"): && ($_product->getAttributeText('myattribute') == "Zero"):?> 

My data

<?php endif; ?> 
```

怎么了？

任何帮助表示赞赏。

自己解决：

```
<?php if ($_product->getAttributeSetId() == "10" && $_product->getAttributeText('myattribute') == "Zero"):?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:40:40.950

只是一些错位的括号。

```
<?php 
if ($_product->getAttributeSetId() == "10" && 
    $_product->getAttributeText('myattribute') == "Zero")  {
?>
My data
<?php } ?> 
```

我更喜欢使用大括号，但如果您愿意，可以使用 if/endif。

# python - 使用 Sphinx 自动记录 Python 3

> ID：13849031
> 
> 赞同：3
> 
> 时间：2012-12-12T21:32:52.810
> 
> 标签：python, python-sphinx

运行 sphinx 时出现以下错误：

```
"invalid syntax (DaPL.py, line 79)", please check your spelling and sys.path 
```

但是文件运行得很好。该行是：

```
print("Warning: A value for", k, "was not specified. It will be inferred.",
    file=sys.stderr) 
```

我该如何解决这个问题？

**编辑**：

我在一个模块中添加了另一个有效的打印行，该模块正确地自动记录并得到了同样的错误：

```
print('one', 'two', 'three', file=sys.stderr) 
```

当我删除时`file=sys.stderr`，我不再收到错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T18:58:50.313

安装 sphinx 时，`easy_install`我需要指定`easy_install3`. 这使得`python3`默认解释器。

```
easy_install3 sphinx 
```

# javascript - 在 JavaScript 中执行每秒更新的计时器的有效方法

> ID：13849038
> 
> 赞同：1
> 
> 时间：2012-12-12T21:33:43.337
> 
> 标签：javascript

我的任务是制作一个进度条和一个进程持续时间计时器。所以，我没有三思而后行：

```
<div class="mainInfo">
    <div id="timer"><span id="elapsedText">0:00</span>/<span id="durationText">3:00</span></div>
    <div id="progressBar"><div id="progress" style="width:0;"></div></div>
</div>​ 
```

和 JS：

```
var time = 1000;
var duration = 180;

var $progress = $("#progress");
var $elapsedText = $("#elapsedText");

updateTime();

function updateTime() {
    var elapsed = time / 1000;
    $elapsedText.text(Math.floor(elapsed / 60) + ":" + Math.floor(elapsed % 60));
    $progress.css('width', (elapsed * 100 / duration) + "%");
    time = time + 1000;
    setTimeout("updateTime()", 1000);
}​ 
```

时间实际上是从另一个变量中检索的——这个用于演示（为了说明我实际上有以毫秒为单位的值）。

它有效（不仅在我的 PC 上），而且仍然有效，但是当这个周期运行时，procmon 在浏览器（chrome，ff）进程上显示 CPU 峰值 - 30-40% 而不是常规的 0.5%。

有没有更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T21:36:15.590

有一个标准函数：[SetInterval(function, delay_in_ms)](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)。

它以毫秒为间隔调用一个函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T21:37:16.447

代替

```
setTimeout("updateTime()", 1000); 
```

采用

```
setTimeout(updateTime, 1000); 
```

您每秒都在调用编译器这一事实确实会损害性能。将字符串传递给`setTimeout`基本上是`eval`在`setTimeout`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T21:41:49.120

有一个默认值，那就是`setInterval`.

请注意，作为第一个参数传递的函数`setInterval`始终在全局范围内执行。

第二，进度条通常与昂贵的流程一起创建。您仅将其用于显示目的并强制延迟，我认为这并不是特别有用，但如果您喜欢这种布局，我想您可以选择它。

您通常使用它的方式是：

```
executeFirstPotentiallyExpensiveProcess();// this is a call to a big function.
// then update the value of the progress bar in percentage style.
executeSecondPotentiallyExpensiveFunction()// this is the second part of your process.
// then again update..
// repeat until you have 100%.
// Basically, you logically divide the expenses of your various executions
// into numerable bits, preferably equal to one another for your convenience,
// but you chunk your loading process or whatever type of process and increment
// the progress after each chunk is complete. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T21:35:39.427

尝试使用函数 setInterval。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-12T21:39:46.357

你对 jQuery 的使用让我感到不安……

```
var time = 1000;
var duration = 180;

var $progress = document.getElementById("progress");
var $elapsedText = document.getElementById("elapsedText");

var beginTimestamp = new Date().getTime();

updateTime();
setInterval(updateTime,1000);

function updateTime() {
    var now = new Date().getTime();
    var elapsed = now-beginTimeStamp + time;
    $elapsedText.firstChild.nodeValue = Math.floor(elapsed / 60) + ":" + Math.floor(elapsed % 60);
    $progress.style.width = (elapsed * 100 / duration) + "%";
}​ 
```

也许没有 jQuery，您的浏览器可能会运行得更好；）

# eclipse - 上传/下载 Servlet 服务器

> ID：13849041
> 
> 赞同：0
> 
> 时间：2012-12-12T21:33:58.613
> 
> 标签：eclipse, jsp, servlets, upload, download

如果这可能是与其他人有些相似的问题，我深表歉意，但我还没有找到我正在寻找的答案，而且我有点着急。我已按照[此处](http://www.codejava.net/java-ee/servlet/eclipse-file-upload-servlet-with-apache-common-file-upload)看到的教程创建文件上传 servlet。

但我需要创建一个，您也可以从中下载和删除。（通过使用第一次上传时给出的文件特定密钥）。虽然我还在疯狂地搜索谷歌并试图围绕一些（非常不同的）教程来思考，但这里有没有人可以帮助像我这样的菜鸟将上述教程中的 servlet 修改为我可以理解/合作吗？（我以前从未使用过 JSP 和 Servlet :()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:35:30.673

I managed to finish the server to my needs. I used [this](http://www.java-forums.org/blogs/servlet/667-how-write-servlet-uploads-file-server.html) tutorial for uploads; and [this](http://www.java-forums.org/blogs/servlet/668-how-write-servlet-sends-file-user-download.html) tutorial for downloads. Based on what I learned from the two I managed to create a class for deleting data files from the server:

```
import java.io.DataInputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;

import javax.servlet.ServletContext;
import javax.servlet.ServletException;
import javax.servlet.ServletOutputStream;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class DeleteServlet extends javax.servlet.http.HttpServlet implements
    javax.servlet.Servlet {
static final long serialVersionUID = 1L;
private static final int BUFSIZE = 4096;
private String filePath;
private String filename;

public void init() {
    // the file data.xls is under web application folder
    log(" filepath = "+filePath);
} 

protected void doGet(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException {
    filename = request.getParameter("filename");
    System.out.println("filename = "+filename);
    filePath = getServletContext().getRealPath("") +      File.separator+"data"+File.separator + filename;
    File file = new File(filePath);
    file.delete();
    getServletContext().getRequestDispatcher("/deleted.jsp").forward(request, response);
}
} 
```

Next is my upload.jsp file:

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"         "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>File Upload</title>
</head>
<body>
Upload----------------------------------------------------------------------------------
<form method="post" action="UploadServlet" enctype="multipart/form-data">
Select file to upload:
<input type="file" name="dataFile" id="fileChooser"/><br/><br/>
<input type="submit" value="Upload" />
</form>
Download--------------------------------------------------------------------------------    --------------
<form action="DownloadServlet" method="get">
    File Name: <input type="text" name="filename"/>
<input type="submit" value="Download" />
<a href="DownloadServlet"></a>
</form>
Delete----------------------------------------------------------------------------------    ------------
<form action="DeleteServlet" method="get">
    File Name: <input type="text" name="filename"/>
<input type="submit" value="Delete" />
<a href="DownloadServlet"></a>
</form> 
```

And finally my web.xml (that might have some leftover code from other server attempts, but it works fine):

```
<web-app id="WebApp_ID" version="2.4"
    xmlns="http://java.sun.com/xml/ns/j2ee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee         http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
    <display-name>CodeWeb</display-name>
    <servlet>
    <description></description>
    <display-name>UploadServlet</display-name>
    <servlet-name>UploadServlet</servlet-name>
    <servlet-class>com.upload.UploadServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>UploadServlet</servlet-name>
    <url-pattern>/UploadServlet</url-pattern>
</servlet-mapping>
<welcome-file-list>
    <welcome-file>upload.jsp</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
</welcome-file-list>

<servlet>
<description></description>
<display-name>DownloadServlet</display-name>
<servlet-name>DownloadServlet</servlet-name>
<servlet-class>com.upload.DownloadServlet</servlet-class>
</servlet>
<servlet-mapping>
<servlet-name>DownloadServlet</servlet-name>
<url-pattern>/DownloadServlet</url-pattern>
</servlet-mapping>

<servlet>
<description></description>
<display-name>DeleteServlet</display-name>
<servlet-name>DeleteServlet</servlet-name>
<servlet-class>com.upload.DeleteServlet</servlet-class>
</servlet>
<servlet-mapping>
<servlet-name>DeleteServlet</servlet-name>
<url-pattern>/DeleteServlet</url-pattern>
</servlet-mapping>

</web-app> 
```

Hope this helps someone.

# c# - 优化 Windows 服务以发送 HTTP 请求

> ID：13849042
> 
> 赞同：1
> 
> 时间：2012-12-12T21:34:03.077
> 
> 标签：c#, multithreading, optimization, windows-services, threadpool

我正在编写的应用程序发送存储在数据库中的 SMS 消息。对于这一部分，我正在编写一个 Windows 服务，它将通过选择的数据库，然后将等待消息作为 HTTP 请求发送。

因为应用程序正在发送 SMS，所以速度很重要。现在，我每秒只收到大约 15 个请求。现在，应用程序创建`SMSMessages`它们，然后将它们放入同步队列中。我使用多线程从该队列中一次运行 20 个线程。

我注意到如果我运行了太多线程，那么应用程序实际上会减慢每秒发送的消息数。

我想弄清楚是否有比我发送请求更快的方法。有没有更好的方法来组织我的线程，或者我应该使用线程池或异步请求来优化应用程序？

主要代码在这里：

```
 Queue Messages = new Queue();
            DataRow[] Rows = dtSMSCombined.Select(); //Created from a datatable
            foreach (DataRow Row in Rows)
            {
                ... //Get information from the row.

                SMSMessage oSMS = new SMSMessage(Keyword, Number, Message, MessageID);
                Messages.Enqueue(oSMS);
            }

            Queue SyncedMessages = Queue.Synchronized(Messages);
            var tasks = new Task[20];

            for (int i = 0; i < 20; i++)
            {
                tasks[i] = Task.Factory.StartNew(() =>
                    { //each thread will pull out new items from the queue as they finish
                        while (SyncedMessages.Count > 0)
                        {
                            Response = new XDocument();
                            SMSMessage oSMS = (SMSMessage)SyncedMessages.Dequeue();

                            if (oSMS.GetMessage() != null && oSMS.GetMessage() != string.Empty)
                            {
                                Response = oSMS.SendSMS();
                            }
                            string ResponseCode = (string)Response.Descendants("response").First();
                            if (ResponseCode == "ok")
                            {
                                oSMS.sResponseCode = ResponseCode;
                                oSMS.dCompleted = DateTime.Now;
                            }
                            else { }

                            oSMS.DTInsert();
                        }
                    });
            }

            while (tasks.Any(t => !t.IsCompleted)) { } 
```

这是类中的`SendSMS()`方法`SMSMessage`：

```
 public XDocument SendSMS()
    {
        XML = "<message id=\""+ lMessageID +"\"><partnerpassword>" + PartnerPassword + "</partnerpassword><content>" + sMessage + "</content></message>";
        URL = "http://sloocetech.net:****/spi-war/spi/" + PartnerID + "/" + sRecipient + "/" + Keyword + "/messages/mt";
        HttpWebRequest Request = (HttpWebRequest)WebRequest.Create(URL);
        Request.Proxy = null;

        RequestBytes = System.Text.Encoding.ASCII.GetBytes(XML);
        Request.Method = "POST";
        Request.ContentType = "text/xml;charset=utf-8";
        Request.ContentLength = RequestBytes.Length;
        RequestStream = Request.GetRequestStream();
        RequestStream.Write(RequestBytes, 0, RequestBytes.Length);
        RequestStream.Close();

        HttpWebResponse Resp = (HttpWebResponse)Request.GetResponse();
        oReader = new StreamReader(Resp.GetResponseStream(), System.Text.Encoding.Default);
        string backstr = oReader.ReadToEnd();

        oReader.Close();
        Resp.Close();

        Doc = XDocument.Parse(backstr);
        return Doc;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:06:21.633

The kind of busy-waiting that you are doing is really burning a lot of CPU.

```
while (tasks.Any(t => !t.IsCompleted)) { } 
```

Actually, I don't understand how your code runs at all without exceptions because you check the count and then deque. But multiple threads might find the count to be one and all try to dequeue. All but one of them would be failing.

I think you should start to learn the basics of multi-threading now before you proceed. Any concrete advice would probably not help much because the code is so ridden with bugs (there are others than the two I mentioned). Try to find a good tutorial on "fork join parallelism with .net" and find out what features are provided by the TPL.

It is important to understand how multiple threads can cooperate safely and not trample over each others data.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T22:01:28.323

如果你重复使用

```
HttpWebRequest Request = (HttpWebRequest)WebRequest.Create(URL); 
```

目的？

连接参数在调用之间不会改变。您认为将其设为静态字段可能是个好主意吗？

**[编辑]**

例如，您定义`Request`为静态字段：

```
static HttpWebRequest Request = (HttpWebRequest)WebRequest.Create("http://www.google.com"); 
```

或者，甚至是 `Request 对象的字典：

```
static Dictionary<string,HttpWebRequest> Requests = new Dictionary<string,HttpWebRequest>(); 
```

然后，在您的`SendSMS()`方法中：

```
public XDocument SendSMS()
{
    XML = "<message id=\"" + lMessageID + "\"><partnerpassword>" + PartnerPassword + "</partnerpassword><content>" + sMessage + "</content></message>";
    URL = "http://sloocetech.net:****/spi-war/spi/" + PartnerID + "/" + sRecipient + "/" + Keyword + "/messages/mt";

    //check if the request object exists
    if (!Requests.Keys.Contains(sRecipient))
        Requests.Add((HttpWebRequest)WebRequest.Create(URL));

    //get the existing request from the dictionary
    Requests = Requests[sRecipient];

    //configure the request
    Request.Proxy = null;
    RequestBytes = System.Text.Encoding.ASCII.GetBytes(XML);
    Request.Method = "POST";
    Request.ContentType = "text/xml;charset=utf-8";
    Request.ContentLength = RequestBytes.Length;
    RequestStream = Request.
    RequestStream.Write(RequestBytes, 0, RequestBytes.Length);
    RequestStream.Close();

    using (System.IO.Stream RequestStream = Request.GetRequestStream())
    {
        using (WebResponse response = Request.GetResponse())
        {
            using (oReader = new StreamReader(Resp.GetResponseStream(), System.Text.Encoding.Default))
            {
                string backstr = oReader.ReadToEnd();
                Doc = XDocument.Parse(backstr);
            }
        }
    }

    return Doc;
} 
```

**[编辑]**

也许您还应该使用以下静态字段玩一点：

```
System.Net.ServicePointManager.DefaultConnectionLimit = 20; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T22:42:56.737

而不是`Queue`使用例如 a的用法`ConcurrentQueue`- 有关详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/dd287108.aspx)。它是一个线程安全的实现，并且大部分是无锁的，因此非常快......

# c++ - Windows Qt 二进制安装程序是否支持开箱即用的 DBus？

> ID：13849047
> 
> 赞同：0
> 
> 时间：2012-12-12T21:34:19.350
> 
> 标签：c++, windows, qt, ipc, dbus

**Windows Qt 二进制安装程序是否支持开箱即用的 DBus？**

具体来说：

*   版本 4.x
*   版本 4.7.x
*   版本 4.8.x

注意：版本 5.x 仍在积极开发中，因此我不会将 5.x 作为此问题的一部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T21:59:11.400

**所有 4.x 版本的 Windows Qt 二进制安装程序都不支持开箱即用的 DBus。**

专门针对问题中要求的版本：

*   [“仅 Unix”4.7.x](http://qt-project.org/doc/qt-4.7/modules.html)
*   [“仅 Unix”4.8.x](http://qt-project.org/doc/qt-4.8/modules.html)
*   所有其他 4.x 版本也是“仅 Unix”

转到此处以获取有关 Qt 5.x 的 DBus 支持[QtDbus 5.x 支持](https://qt-project.org/doc/qt-5/qtdbus-module.html)的信息。5.x 仍在开发中，所以我会留下一个链接，而不是复制那里写的内容。

* * *

奖金：

从历史上看，DBus 过去不能在 Windows 上运行，这就是 QtDbus 模块不适用于 Windows 的原因。最近[，Windows 版本的 DBus 正在运行并受到支持](http://www.freedesktop.org/wiki/Software/dbus#Windows_port)。不幸的是，Qt 没有更新他们的 4.x Windows Qt 二进制安装程序以反映 DBus 现在在 Windows 上运行。

长话短说，现在 Windows DBus 工作了，[您可以自己编译 Qt 并访问 Windows 上的 QtDbus 模块](http://www.lothlorien.com/kf6gpe/?p=141)。我自己还没有这样做。

# java - 在 Eclipse 中看不到失败跟踪的所有堆栈跟踪

> ID：13849049
> 
> 赞同：1
> 
> 时间：2012-12-12T21:34:20.053
> 
> 标签：java, eclipse, junit

> **可能重复：**
> [如何在 Eclipse 上显示完整的堆栈跟踪？](https://stackoverflow.com/questions/7597797/how-to-show-full-stack-trace-on-eclipse)

我尝试调试的 TestRunner 设置出错。将 Eclipse 与 JUnit 一起使用，我需要查看整个堆栈跟踪。事实证明，如果不能看到异常，就不可能找到问题。

```
java.lang.ExceptionInInitializerError
at org.mockito.internal.exceptions.stacktrace.ConditionalStackTraceFilter.<init>(ConditionalStackTraceFilter.java:17)
at org.mockito.exceptions.base.MockitoException.filterStackTrace(MockitoException.java:30)
at org.mockito.exceptions.base.MockitoException.<init>(MockitoException.java:19) 
```

...

```
org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:29)
at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)
at org.junit.internal.requests.ClassRequest.getRunner(ClassRequest.java:24)
at org.junit.internal.requests.FilterRequest.getRunner(FilterRequest.java:33)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.<init>(JUnit4TestReference.java:33)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestMethodReference.<init>(JUnit4TestMethodReference.java:25)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.createTest(JUnit4TestLoader.java:54)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.loadTests(JUnit4TestLoader.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:452)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

**我怎样才能看到更多的57？**

```
Caused by: java.lang.NullPointerException
at org.mockito.internal.exceptions.stacktrace.StackTraceFilter.<clinit>(StackTraceFilter.java:21)
... 57 more 
```

# java - 欧拉计划 #119 加快速度

> ID：13849059
> 
> 赞同：4
> 
> 时间：2012-12-12T21:34:44.440
> 
> 标签：java, performance

尝试解决 Project Euler 问题 119：

> 数字 512 很有趣，因为它等于其数字之和的某个幂：5 + 1 + 2 = 8，并且 8^3 = 512。具有此属性的数字的另一个示例是 614656 = 28^4。
> 
> 我们将定义 an 为该序列的第 n 项，并坚持一个数字必须包含至少两位数字才能有和。
> 
> 给定 a2 = 512 和 a10 = 614656。
> 
> 找到a30。

**问题：**有没有比只检查每个数字直到找到 a30 更有效的方法来找到答案？

* * *

**我的代码**

```
 int currentNum = 0;
    long value = 0;
    for (long a = 11; currentNum != 30; a++){ //maybe a++ is inefficient
        int test = Util.sumDigits(a);
        if (isPower(a, test)) {
            currentNum++;
            value = a;
            System.out.println(value + ":" + currentNum);
        }
    }
    System.out.println(value); 
```

isPower 检查 a 是否是检验的幂。Util.sumDigits：

```
 public static int sumDigits(long n){
        int sum = 0;
        String s = "" + n;
        while (!s.equals("")){
            sum += Integer.parseInt("" + s.charAt(0));
            s = s.substring(1);
        }
        return sum;
    } 
```

程序已经运行了大约 30 分钟（可能会溢出）。输出（到目前为止）：

81:1

512:2

2401:3

4913:4

5832:5

17576:6

19683:7

234256:8

390625:9

614656:10

1679616:11

17210368:12

34012224:13

52521875:14

60466176:15

205962976:16

612220032:17

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T22:35:11.710

解决方案是一个 15 位数字。祝你好运，将求和优化到足以使其运行得足够快以检查每个数字。

把问题转过来。数字的和是一个比较小的数（最大9×数字的位数），幂也会比较低（即使很小的数也不需要很大的幂就可以提升到15位数） .

因此，遍历总和和幂，计算总数（您可以在内部循环中使用乘法保持运行总数，甚至不需要幂计算），然后将其数字相加以查看它是否与您的循环变量匹配。

这些数字不会按顺序排列，因此请计算超出您需要的数量并对结果进行排序。

应该在大约一秒钟内运行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T21:57:13.517

关于那个数字总和......这里有一些确凿的事实：

```
 0% Scenario{vm=java, trial=0, benchmark=NaiveDigitSum} 542.90 ns; σ=11.00 ns @ 10 trials
50% Scenario{vm=java, trial=0, benchmark=BetterDigitSum} 42.13 ns; σ=1.42 ns @ 10 trials

     benchmark    ns linear runtime
 NaiveDigitSum 542.9 ==============================
BetterDigitSum  42.1 == 
```

测试代码：

```
import com.google.caliper.Runner;
import com.google.caliper.SimpleBenchmark;

public class Performance extends SimpleBenchmark {
  public void timeNaiveDigitSum(int reps) {
    for (int r = 0; r < reps; r++) sumDigits(r + 1_000_000);
  }
  public void timeBetterDigitSum(int reps) {
    for (int r = 0; r < reps; r++) sumDigitsBetter(r + 1_000_000);
  }
  public static int sumDigits(long n){
    int sum = 0;
    String s = "" + n;
    while (!s.equals("")){
        sum += Integer.parseInt("" + s.charAt(0));
        s = s.substring(1);
    }
    return sum;
  }
  static int sumDigitsBetter(long n) {
    int sum = 0;
    for (; n != 0; sum += n % 10, n /= 10);
    return sum;
  }
  public static void main(String... args) {
    Runner.main(Performance.class, args);
  }
} 
```

（剧透解决方案已删除，可通过编辑历史获得）

# lucene - 是否可以在 Lucene 中添加包含多个值的自定义搜索字段？

> ID：13849063
> 
> 赞同：0
> 
> 时间：2012-12-12T21:35:20.260
> 
> 标签：lucene

根据此页面：

[http://lucene.apache.org/core/old_versioned_docs/versions/2_9_1/queryparsersyntax.html](http://lucene.apache.org/core/old_versioned_docs/versions/2_9_1/queryparsersyntax.html)

你可以做类似的搜索

标题：“正确的方式”和文字：去

我想添加一个新字段“testfield”，其中包含多个值，如 {A、B、C、E}。

所以我可以得到一个搜索结果 #1 是“testfield” = {A,B,C,E} 另一个搜索结果 #2 是“testfield” = {C,E,D,F}。

我的目标是能够进行如下搜索：

测试字段：“C”和测试字段：“E”

在这种情况下，它应该返回搜索结果#1 和#2。

但是，如果我这样做：

测试字段：“A”或测试字段：“B”

那么我应该只得到搜索结果#1。

如何添加一个新的 lucene 字段来完成我上面描述的简单查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:45:45.410

多次添加该字段，例如...

```
document.Add(new Field("testfield", "A"));
document.Add(new Field("testfield", "B"));
document.Add(new Field("testfield", "C")); 
```

# cakephp - CakePHP 2 散列随时间变化？

> ID：13849064
> 
> 赞同：0
> 
> 时间：2012-12-12T21:35:22.850
> 
> 标签：cakephp, authentication, hash

我正在制作一个需要依赖另一个现有应用程序来获取其登录信息的 CakePHP 2.2.3 应用程序。用户名/密码组合存在于另一个数据库/服务器上，我已经设置了我的 CakePHP 应用程序以在他们第一次登录我的界面时创建新用户。这是过程：

1.  用户首次登录，提供用户名和密码。CakePHP 用户记录还不存在
2.  系统检查另一端是否存在具有相同（已清理）用户名的用户
3.  如果用户确实存在，那么我们获取密码并比较密码以查看它们是否匹配。
4.  如果密码匹配，则对提供的内容进行哈希处理并保存用户记录
5.  登录新创建的用户

这为我们解决了一些问题，主要是有多个地方供用户登录以执行某些操作。

我的问题似乎是 CakePHP 在对密码进行哈希处理时获得的值似乎会随着时间而改变。因此，它不是使用密码登录用户，而是在他们登录的每一天创建一个新的用户记录。我遇到了一个问题，昨天我无法使用特定用户登录......所以我检查了login() 操作被视为密码的哈希值。

特定用户的密码是“roads”

昨天，哈希是：**988042d7f4e62760238d895472ecaf1844094f9f**

今天，当我哈希道路时，我得到：**a8318e7bbe8ee5efc59f53b4ede4d80dc0495c6d**

我真的不知道从哪里开始寻找为什么会发生这种情况。为了使我的开发向前发展，我所能做的就是更改我要登录的用户记录的密码的哈希值。这是我做这个的第二天。config/core.php 中的安全哈希或盐值有什么我可能做错的吗？

我愿意：

1.  弄清楚为什么哈希会发生变化
2.  更改 Auth 组件以使用其他数据库登录用户

但我不确定从哪里开始

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T23:47:07.253

我不能告诉你问题是什么，但我可以告诉你去哪里找。CakePHP 中的 AuthComponent 使用 Security 类来进行密码散列。

```
public static function password($password) {
    return Security::hash($password, null, true);
} 
```

这告诉 Security 类使用默认算法对您的密码进行哈希处理，并使用在 Security.salt 中配置的 salt。如果 Security.salt 的值在任一应用程序中不同，则哈希将不匹配。

第二种可能性是，在创建用户记录时，您没有使用与 AuthComponent 相同的 Security::hash 设置。检查您没有指定不同的算法或提供盐。

第三种可能性是一个应用程序缺少散列算法。例如，如果 sha1 在您的登录应用程序上可用，但在您的数据库应用程序上不可用，则哈希将不匹配。数据库应用程序将回退到 sha256，登录应用程序将使用 sha1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-09T21:03:39.257

如果您在 crud 样式的更新功能中执行某些杂技，则可能会发生这种情况。基本上，可能发生的情况是您将密码保存了两次。您的模型中可能有一些代码，例如：

```
public function beforeSave($options = array()) {
    if(isset($this->data[$this->alias]['password'])) {
    $this->data[$this->alias]['password'] = AuthComponent::password($this->data[$this->alias]['password']);
    }
return true;
} 
```

作为安全预防措施，这保证了附加到模型的任何密码数据在发送到数据库之前都会经过哈希处理。但是，如果您在更新函数中调用 $this->MyModel->read(null, $someId) 之类的东西，您将在模型上设置整个记录数据 - 包括之前的哈希密码 - 和您的代码将尽职尽责地再次对其进行哈希处理，这显然不是您想要的。所以是的，在这种情况下，你会得到哈希漂移。

# c# - 正则表达式匹配

> ID：13849067
> 
> 赞同：5
> 
> 时间：2012-12-12T21:35:44.050
> 
> 标签：c#, regex

我怎样才能`|ADT^A05|`摆脱

> “MSH|^~\&|PHTADT09|ABC|DADIST00|ABC|20120425152829|rcalini1|ADT^A05|20429208851634|P|2.1|560”

我试过这个但没有工作

```
"|([A-Z]{3})^([A-Z]{1})([0-9]{2})|" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T21:38:30.720

当有分隔符时，我认为你不需要正则表达式`|`

```
var adt = text.Split('|')[8]; 
```

看[HL7](http://www.interfaceware.com/manual/ParsingHL7_SettingUpVmd.html)格式的定义

> 消息中的每个段都被划分为组合或字段，字段由竖线字符（'|'）分隔

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T21:39:56.583

您需要转义`|`and `^`，因为它们是正则表达式中的特殊字符。

```
@"\|([A-Z]{3})\^([A-Z]{1})([0-9]{2})\|" 
```

或者，如果您不喜欢逐字文字：

```
"\\|([A-Z]{3})\\^([A-Z]{1})([0-9]{2})\\|" 
```

请注意，逐字文字（`@`在开头引号之前使用）使正则表达式更具可读性（并且更便携——现在您可以将该正则表达式复制/粘贴到其他地方）。除非您有充分的理由不这样做，否则您应该始终将逐字文字与正则表达式字符串一起使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T21:37:49.610

在某些字符之前放置反斜杠：`|`和`^`.

```
\|([A-Z]{3})\^([A-Z]{1})([0-9]{2})\| 
```

编辑：我最喜欢的网站 - [http://regexpal.com/](http://regexpal.com/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T22:03:07.257

如果您可以访问 BizTalk，Microsoft 有[用于 HL7](http://www.microsoft.com/biztalk/en/us/accelerator-hl7.aspx)的加速器，可以将您的消息分解为 XML。否则，我会选择**LB**的答案并直接拆分字符串。

# dart - 如何使用 Dart Web UI 设置按钮的 disabled 属性？

> ID：13849068
> 
> 赞同：2
> 
> 时间：2012-12-12T21:35:44.837
> 
> 标签：dart, dart-webui

有没有办法根据我的视图模型的状态禁用按钮？

在 AngularJS 中：

```
 <button class="btn" ng-click="Search()" ng-hide="canRefresh()" ng-disabled="query.trim().length == 0">
      <i class="icon-search"></i> Search</button> 
```

我如何使用 Dart 的 Web UI 包做到这一点？

（感谢 John Saturnus 提出的问题）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T21:36:36.800

是的 - 我们做到了，直接在“禁用”属性中使用绑定可以满足您的需求。所以你可以写：

```
<button .... disabled="{{length == 0}}"> ... </button> 
```

请注意，这仅在您使用数据绑定时有效，使用 'disabled="false"' 仍将显示按钮处于禁用状态。您可以在此处阅读有关“布尔属性”的讨论中的一些其他详细信息：[http ://www.dartlang.org/articles/dart-web-components/spec.html#binding-in-attributes](http://www.dartlang.org/articles/dart-web-components/spec.html#binding-in-attributes)

（感谢 Siggi Cherem 的答案）

# python - 无法导入设置 wsgi Django

> ID：13849072
> 
> 赞同：2
> 
> 时间：2012-12-12T21:35:58.800
> 
> 标签：python, django

我无法让 wsgi 在我的生产服务器上工作。运行 Django 1.4

这是我的错误。

**ImportError：无法导入设置“Hera.settings”（它在 sys.path 上吗？）：没有名为 Hera.settings 的模块**

我的文件项目位于 /srv/project/Hara/。我的文件系统示例如下...

```
 /srv/project/Hara/
      - manage.py

    /srv/project/Hara/Hara
      - settings.py
      - urls.py

    /srv/project/Hara/web
      - models
      - admin.py
      - views.py

/srv/project/Hara/apache
   - django.wsgi 
```

django.wsgi

```
import os
import sys
sys.path.append('/home/ubuntu/project/Hera')
sys.path.append('/home/ubuntu/project/Hera/Hera')
print >> sys.stderr, sys.path
os.environ['DJANGO_SETTINGS_MODULE'] = 'Hera.settings'

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T21:53:37.153

我认为您没有在 django.wsgi 中附加实际目录

```
sys.path.append('/home/ubuntu/project/Hera')
sys.path.append('/home/ubuntu/project/Hera/Hera') 
```

这些不再适用于您的生产现场

`/srv/project/Hera`更好的是获得与文件相关的路径，例如：

`os.path.join(os.path.abspath(os.path.dirname(__file__)), '..')`

这样，无论您的代码位于何处，它都将始终获得

# android - 一些 json 字段没有被 json 对象解析

> ID：13849074
> 
> 赞同：0
> 
> 时间：2012-12-12T21:36:04.187
> 
> 标签：android, tastypie

我能够收到来自美味派休息服务的 json 响应。我现在遇到的问题是从 json 对象中获取单个值。这是问题所在

```
a={"pincode":"7593836483048364830843","id":"5","resource_uri":"\/api\/oncredit\/prepaid\/5\/","amount_charged":"200","used":false,"network_type":"AIRTEL","user":"\/api\/oncredit\/user\/1\/"}

public void getJSONValue(String a){
    JSONSTRING = a;
    try { 
        JSONObject obj = new JSONObject(JSONSTRING);
        String pincode = obj.getString("pincode");
        String amount_charged = obj.getString("amount_charged"); 

    } catch (JSONException e) { 
        e.printStackTrace(); 
    } 
} 
```

我现在面临的问题是在调试时，pincode 的值与使用的 resource_url 一起设置为 null。我不知道为什么它被设置为空

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T23:13:34.213

尝试

```
String pincode=(String)obj.get("pincode"); 
```

# django - AttributeError：“...”对象没有属性“***_set”

> ID：13849075
> 
> 赞同：7
> 
> 时间：2012-12-12T21:36:06.810
> 
> 标签：django, django-models, django-views

我有

```
class Question(models.Model):
    created_by = models.ForeignKey(User)
    question = models.CharField(max_length=150)
    def __unicode__(self):
        return self.question

class Answer(models.Model):
    rel = models.ForeignKey(Question)
    answer = models.CharField(max_length=150)
    def __unicode__(self):
        return self.answer 
```

如果我这样做

```
answer1 = "xyz"
tmp = Question.objects.get(pk=1)
tmp.answer_set.create(answer=answer1) 
```

我明白了

AttributeError：“问题”对象没有属性“答案集”

怎么了？

编辑：

或者我接下来可以做些什么来解决这个问题......或者有没有其他选择？

更新：

主/模型.py：

```
from django import forms
from django.db import models
from django.contrib.auth.models import User

class LoginForm(forms.Form):
    username = forms.CharField(label='', widget=forms.TextInput(attrs={"placeholder":"Username"}), max_length=200)
    password = forms.CharField(label='', widget=forms.PasswordInput(render_value=False, attrs={"placeholder":"Password"}))

class SurveyForm(forms.Form):
    question = forms.CharField(label='Question', widget=forms.Textarea(attrs={"placeholder":"Type your question", "rows":6, "cols":45}), max_length=150)
    answer1 = forms.CharField(label='Answer 1', widget=forms.Textarea(attrs={"placeholder":"Type an answer option", "rows":6, "cols":45}), max_length=150)
    answer2 = forms.CharField(label='Answer 2', widget=forms.Textarea(attrs={"placeholder":"Type an answer option", "rows":6, "cols":45}), max_length=150)
    answer3 = forms.CharField(label='Answer 3', widget=forms.Textarea(attrs={"placeholder":"Type an answer option", "rows":6, "cols":45}), max_length=150)
    answer4 = forms.CharField(label='Answer 4', widget=forms.Textarea(attrs={"placeholder":"Type an answer option", "rows":6, "cols":45}), max_length=150)

class Survey(models.Model):
    created_by = models.ForeignKey(User)
    question = models.CharField(max_length=150)
    def __unicode__(self):
        return self.question

class SurveyAnswer(models.Model):
rel = models.ForeignKey(Survey)
answer = models.CharField(max_length=150)
def __unicode__(self):
    return self.answer 
```

回溯（最近一次通话最后）：

```
File "/usr/lib/python2.6/dist-packages/django/core/handlers/base.py", line 111, in get_response
response = callback(request, *callback_args, **callback_kwargs)

File "/var/www/first/main/views.py", line 94, in NewSurvey
tmp.answer_set.create(answer=answer1)

AttributeError: 'Survey' object has no attribute 'answer_set'

<WSGIRequest
path:/new_survey/,
GET:<QueryDict: {}>,
POST:<QueryDict: {u'question': [u'xfgj'], u'answer4': [u'yfgn'], u'answer1': [u'ysfjmn'], u'answer3': [u'gfy'], u'answer2': [u'fygmn'], u'csrfmiddlewaretoken': [u'Z1GreYtKoCyMYpACbbz8yfqS72nKo0m8']}>,
COOKIES:{'csrftoken': 'Z1GreYtKoCyMYpACbbz8yfqS72nKo0m8',
'sessionid': 'cx07qf3add3c741c6f7f26b5fa5c105e'},
META:{'CONTENT_LENGTH': '120',
'CONTENT_TYPE': 'application/x-www-form-urlencoded',
'CSRF_COOKIE': 'Z0GreYtKpCyMYpAUnnq8yfBt72nKo0m8',
'DOCUMENT_ROOT': '/etc/apache2/htdocs',
'GATEWAY_INTERFACE': 'CGI/1.1',
'HTTP_ACCEPT': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
'HTTP_ACCEPT_ENCODING': 'gzip, deflate',
'HTTP_ACCEPT_LANGUAGE': 'de-de,de;q=0.8,en-us;q=0.5,en;q=0.3',
'HTTP_CONNECTION': 'keep-alive',
'HTTP_COOKIE': 'csrftoken=Z0SreYtKpDvWYpACbbz5yfBt72nKo0m8;sessionid=cf07bf3add25741c6f7f26b5fa5c105e',
'HTTP_DNT': '1',
'HTTP_HOST': 'domain.tld',
'HTTP_REFERER': 'http://domain.tld/new_survey/',
'HTTP_USER_AGENT': 'Mozilla/5.0 (X11; Linux i686; rv:10.0.7) Gecko/20100101 Firefox/10.0.7 Iceweasel/10.0.7',
'PATH_INFO': u'/new_survey/',
'PATH_TRANSLATED': '/var/www/first/wsgi/new_survey/',
'QUERY_STRING': '',
'REMOTE_ADDR': '00.000.000.000',
'REMOTE_PORT': '00000',
'REQUEST_METHOD': 'POST',
'REQUEST_URI': '/new_survey/',
'SCRIPT_FILENAME': '/var/www/first/wsgi',
'SCRIPT_NAME': u'',
'SERVER_ADDR': '00.000.000.000',
'SERVER_ADMIN': '[no address given]',
'SERVER_NAME': 'domain.tld',
'SERVER_PORT': '80',
'SERVER_PROTOCOL': 'HTTP/1.1',
'SERVER_SIGNATURE': '<address>Apache/2.2.16 (Debian) Server at domain.tld Port 80</address>\n',
'SERVER_SOFTWARE': 'Apache/2.2.16 (Debian)',
'mod_wsgi.application_group': 'domain.tld|',
'mod_wsgi.callable_object': 'application',
'mod_wsgi.handler_script': '',
'mod_wsgi.input_chunked': '0',
'mod_wsgi.listener_host': '',
'mod_wsgi.listener_port': '80',
'mod_wsgi.process_group': '',
'mod_wsgi.request_handler': 'wsgi-script',
'mod_wsgi.script_reloading': '1',
'mod_wsgi.version': (3, 3),
'wsgi.errors': <mod_wsgi.Log object at 0xba725480>,
'wsgi.file_wrapper': <built-in method file_wrapper of mod_wsgi.Adapter object at 0xba717d58>,
'wsgi.input': <mod_wsgi.Input object at 0xba719c78>,
'wsgi.multiprocess': True,
'wsgi.multithread': False,
'wsgi.run_once': False,
'wsgi.url_scheme': 'http',
'wsgi.version': (1, 1)}> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T22:01:54.133

经过测试，似乎工作正常。如果您的 Answer 类引用了正确的 Question 类，我建议您检查导入

```
>>> from demo.models import *
>>> q = Question.objects.create(created_by=User.objects.get(id=1), question='test')
>>> q
<Question: test>
>>> q.answer_set.create(answer='test answer')
<Answer: test answer>
>>> 
```

更新：

你的反向调用是错误的。您需要使用小型大写字母调用模型名称并将 _set 附加到它。除非，您在关系中有一个 related_name 参数：

```
tmp.surveryanswer_set.create(...) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-06-10T09:51:02.473

请注意，如果型号名称由多个单词组成，则需要将其写在一起，不要下划线。例如`Enterprise`模型有很多`ContactPerson`模型

```
enterprise.contactperson_set 
```

并不是

```
enterprise.contact_person_set 
```

这就是我的情况出错的原因。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-11T13:55:06.367

这也是初学者的条件

`b = Book.objects.all()` 这是返回书籍列表，所以 不起作用 `**b.writer_set.all()**`

`**Use b = Book.objects.get(id=90)**` //用这个只获取一个对象然后尝试
`**b.writer_set.all()**`

# ios - 以异步方式从 UIViewController 调用方法 presentViewController

> ID：13849081
> 
> 赞同：1
> 
> 时间：2012-12-12T21:36:35.637
> 
> 标签：ios, uiviewcontroller, uiimagepickercontroller

是否有任何机制以`presentViewController`异步方式调用方法？

```
UIImagePickerController *imagePicker = [[UIImagePickerController alloc]init];
imagePicker.delegate = self;
imagePicker.sourceType  = UIImagePickerControllerSourceTypeCamera;
imagePicker.mediaTypes = @[(NSString *) kUTTypeImage];
imagePicker.allowsEditing = NO;
[self.viewController presentViewController:imagePicker animated:YES completion:nil]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:38:29.147

不，这是设计同步的。但是您可能会启动另一个线程，并在那里进行同步调用。但我不会那样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:40:43.393

UI方法必须在主线程上运行，所以不能异步调用

# compiler-errors - 交叉编译 vlc Linux (Ubuntu 12.04) 64 到 win 64 时出错

> ID：13849083
> 
> 赞同：0
> 
> 时间：2012-12-12T21:36:37.287
> 
> 标签：compiler-errors, mingw, vlc, cross-compiling

我按照官方视频局域网维基[的程序进行了几次尝试](http://wiki.videolan.org/Win32Compile)

使用主机：x86_64-w64-mingw32

早些时候，配置脚本为 libgcrypt 提供错误，但禁用它会成功配置。

编译失败，因为它没有找到 `__ms_vsnprintf'。

以下是示例编译错误日志。

```
../vlc-2.0.4cross/contrib/x86_64-w64-mingw32/lib/libvpx.a(onyx_if.c.o):(.text+0x36): undefined reference to `__ms_vsnprintf'
../vlc-2.0.4cross/contrib/x86_64-w64-mingw32/lib/libvpx.a(bitstream.c.o):(.text+0x36): undefined reference to `__ms_vsnprintf'
../vlc-2.0.4cross/contrib/x86_64-w64-mingw32/lib/libvpx.a(ethreading.c.o):(.text+0x36): undefined reference to `__ms_vsnprintf'
../vlc-2.0.4cross/contrib/x86_64-w64-mingw32/lib/libvpx.a(boolhuff.c.o):(.text+0x36): undefined reference to `__ms_vsnprintf'
../vlc-2.0.4cross/contrib/x86_64-w64-mingw32/lib/libvpx.a(encodemv.c.o):(.text+0x336): undefined reference to `__ms_vsnprintf' 
```

我似乎无法解决这个错误。已经尝试禁用相关组件，例如

> --disable-libcddb --disable-cdda

在配置脚本中。但同样的错误出现在另一个地方。真的很感激任何指示。

**更新：** VLC 论坛指出 qt4 需要重新编译，我成功地做到了。还尝试了 win64 和 win32 目标。但结果与上面的编译错误相同。我已经尝试过 vlc 源版本 2.0.4 和 2.0.5。打算从 git 2.1.0 和 qt 4.8.3 开始尝试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T04:26:54.880

我终于发现了几个问题，其中主要是需要 mingw-x64 版本 3（在撰写本文时是实验包）。它在 debian 或 ubuntu 资源上不可用，因此需要直接从源下载或安装[包。](http://packages.debian.org/experimental/mingw-w64-i686-dev)

以下说明[在](http://forum.videolan.org/viewtopic.php?f=14&t=106846)ubuntu 12.04 和 mint 12 上都对我有用，但如果您希望将最终的 windows 包生成为安装程序，则需要来自 git repo 的 vlc 代码（至少 2.1.0 版）。在撰写本文时，vlc 2.0.4 和 2.0.5 tar 球在生成安装程序时都存在一些问题。

请参阅vlc dev 邮件列表中的以下[线程](http://mailman.videolan.org/pipermail/vlc-devel/2012-December/091031.html)

# javascript - 需要添加 2 个文本框，以便用户可以输入并添加到数组

> ID：13849084
> 
> 赞同：0
> 
> 时间：2012-12-12T21:36:37.010
> 
> 标签：javascript, html, arrays, button, textbox

好的，所以我有 2 个数组，我必须在 html javascript 中添加一个 gui，这将允许用户输入一个新的国家和人口，并有一个按钮可以将新元素添加到数组中。我怎样才能做到这一点？

```
<head>
<title></title>
<script type="text/javascript">

    var countries = new Array();
    countries[0] = "Nigeria";
    countries[1] = "Irag";
    countries[2] = "Philippines";
    countries[3] = "Indonesia";
    countries[4] = "Egypt";
    countries[5] = "Russia";
    countries[6] = "Vietnam";
    countries[7] = "Ethiopia";
    countries[8] = "Mexico";

    var population = new Array();
    population[0] = "166,629,000";
    population[1] = "33,330,000";
    population[2] = "92,337,000";
    population[3] = "237,641,000";
    population[4] = "82,940,000";
    population[5] = "143,300,000";
    population[6] = "87,840,000";
    population[7] = "84,320,000";
    population[8] = "112,336,000";

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:46:49.570

这应该可以解决问题：

```
//Easier way to define and populate an array
var countries =
[
    "Nigeria",
    "Iraq",
    "Philippines",
    //And so on
];

//Same for population

//Function to add the new data
function addData()
{
    //push() adds an element at the end of an array
    countries.push(document.getElementById("myCountry").value);
    population.push(document.getElementById("myPopulation").value);
}

//Add the click event
document.getElementById("myButton").onclick = addData; 
```

# javascript - 阿贾克斯/javascript；getSomethingWithAjax() 方法的替代品是什么

> ID：13849090
> 
> 赞同：-1
> 
> 时间：2012-12-12T21:36:55.313
> 
> 标签：javascript, ajax, jsp

使用 getSomethingWithAjax 发送的数据有浏览器限制，我想知道如果我想发布大数据，用什么代替 getSomethingWithAjax()？这是我的代码：此代码在 textarea 中打开一个文本文件并允许用户输入或删除字符，在发送大约 2800 个字符时有限制。

```
 <%
 if(request.getParameter("thetext") != null) {
     File savedHere = new File(request.getParameter("filepath"));
     FileOutputStream out2 = new FileOutputStream(savedHere);
     PrintStream p = new PrintStream(out2);

     try {
        boolean gotError = false;

        if(request.getParameter("revert").equals("1")) {
        System.out.println("In revert");
        p.print(request.getParameter("thetextRev").replace("\r",""));
        gotError = p.checkError();
        p.close();
    } else {
        System.out.println("NOT in   revert\n"+request.getParameter("thetext"));
        p.print(request.getParameter("thetext").replace("\r",""));
        gotError = p.checkError();
        p.close();
    }

    if(request.getParameter("revert").equals("0")) {
        if(!gotError) {
            out.println("File was successfully modified");
        } else {
            out.println("Error while writing the file");
        }
    }
}
     catch(Exception ex) {
      System.out.println("Exception while trying to write out to file");
      out.println("There was an error while writing file");
    }
 }

 String filename = "";
 java.lang.StringBuffer myStuff = new java.lang.StringBuffer(100000);

 if(request.getParameter("STEP")!=null
    && request.getParameter("secret")!=null
    && !request.getParameter("secret").equals("yes")) {

   filename = request.getParameter("autoFiles");
   File chosenFile = new File(filename);
   DataInputStream dis = new DataInputStream(new FileInputStream (chosenFile));
   String data = null;

    while((data = dis.readLine()) != null) {   
    myStuff.append(data+"\n");
    }

    //this is just to check capacity and current length of file
    out.println("Capacity is:"+ myStuff.capacity()+ "characeter count is" +  
    myStuff.length());
  %>

  <br>

  <form method="POST" class="example" action="/jsp/EditText.jsp" id=form2>
  <input type=hidden name=filepath value="<%=filename%>">
  <input type=hidden name=revert id=revert value="0">
  <input type=hidden name=textarea value=true>
  <br>
  <center>
  <textarea class="form-textarea resizable" id="textarea" style="width:90%;height:27em;

  font-family:courier;font-size:14;"
    name="thetext"><%=myStuff.toString()%></textarea>

   <div style="display:none;">
    <textarea id="textareaRev" style="width:90%;height:27em; font-family:courier;font- 

    size:14;"name="thetextRev"><%=myStuff.toString()%></textarea>
  </div>

  <br><br>

  <input type=button name=submit value="Save Changes"
   onClick="if(runOnSubmit(){ 
   getSomethingWithAjax('EditText.jsp'+
   getAllFormElementsAndMakeIntoURI(true),'','hereIsTheMainHeaderSpan',false,false);}">

    <input type=button name=submitRev value="Cancel/Exit"
    onClick="toggleTextRevert(); 

    getSomethingWithAjax('EditText.jsp','','hereIsTheMainHeaderSpan')">
  <%
  } else {
  //initial part here, not relevant 

  /*
  this part sorts a list of files located in a specific directory in a   
  dropdown menu Auto files is the generated files from the dropdown menu
  */

  }
  %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:00:29.523

假设您正在寻找一种独立于浏览器的 Ajax 方法，我在一段时间前制定的一个示例如下所示。

这对函数负责处理 JavaScript 同步 post 请求。关键在于 jsxml_open_request 函数。它查看浏览器的 JavaScript 支持中可用的内容并实例化请求对象。

第三个函数未显示，该函数是“parse_returned_xml”。它将处理从站点传回的 XML 消息以及对已发布请求的“答复”。

```
// -----------------------------------------------------------------------------
// This function will handle the mechanics of posting a synchronous XMLHttpRequest 
// and will return a result array. It uses a helper function "jsxml_open_request".
//  Return array is:
//
//     [ status, errMsg, xmlData ]
//
// If there is no error, 'errMsg' is null. Status values are:
//
//     -1  = Failed early in XMLHttpRequest init
//      0  = Failed after XMLHttpRequest init
//      1  = Success, xmlData is populated
//
// -----------------------------------------------------------------------------
function jsxml_process_post_request(postVarList, postTargetPage)
{
    var xmlParser = false;
    var gobjDatabaseDom = null;
    var xmlData = null;
    var xmlParseStep = 0;
    var requestObject = null;
    var i = 0;
    var postKey = '';
    var postValue = '';

    oRetArray = jsxml_open_request(postVarList, postTargetPage);
    if (oRetArray[0] != 1) {
       return( new Array(oRetArray[0], oRetArray[1], null) );
    }
    parameters = oRetArray[2];
    requestObject = oRetArray[3];

    requestObject.send(parameters);
    if (requestObject.status != 200) {
       return( new Array(0, requestObject.statusText, null) );
    }

    xmlRetArray = parse_returned_xml(postVarList, requestObject.responseText);
    if (xmlRetArray[0] != 1) {
       return( new Array(xmlRetArray[0], xmlRetArray[1], null) );
    }

    return( new Array(1, null, xmlRetArray[2]) );
}

function jsxml_open_request(postVarList, postTargetPage)
{
    var requestObject = null;
    var i = 0;
    var postKey = '';
    var postValue = '';

    // Browser select code.
    if(window.XMLHttpRequest) // branch for native XMLHttpRequest object
    {
       try {
         requestObject = new XMLHttpRequest();
       } catch(e) {
         requestObject = null;
       }
    } 
    else if(window.ActiveXObject) // branch for IE/Windows ActiveX version
    {
       try {
         requestObject = new ActiveXObject("Msxml2.XMLHTTP");
       } 
       catch(e) 
       {
         try {
           requestObject = new ActiveXObject("Microsoft.XMLHTTP");
         } 
         catch(e) {
           requestObject = null;
         }
       }
    }

    if (requestObject == null) {
       return( new Array(-1, 'Could not do new on XMLHttpRequest.', null, null) );
    }

    // Assemble the paramter list
    parameters = '';
    for(i = 0; i < postVarList.length; i++)
    {
       postKey = postVarList[i][0];
       postValue = postVarList[i][1];

       if (parameters.length == 0) {
          parameters = postKey + '=' + postValue;
       }
       else {
          parameters = parameters + '&' + postKey + '=' + postValue;
       }
    }

    // Prepare the post request.
    requestObject.open("POST", postTargetPage, false);
    requestObject.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
    requestObject.setRequestHeader('Accept', 'text/plain');
    return( new Array(1, 'Success.', parameters, requestObject) );
} 
```

# windows-8 - 如何在用户开始输入 Windows 8 应用程序（html 和 js）时显示搜索魅力

> ID：13849092
> 
> 赞同：1
> 
> 时间：2012-12-12T21:37:02.763
> 
> 标签：windows-8, microsoft-metro, winjs

使用 JS 和 Html 构建 Win8 应用程序。当我的应用程序打开时，如何在用户开始输入时立即显示搜索超级按钮？`default.js`我在之前有以下代码`app.addEventListener("activated", function (args) {`：

```
var searchPane = Windows.ApplicationModel.Search.SearchPane.getForCurrentView();
var showOnKeyboardInput = searchPane.showOnKeyboardInput;
searchPane.showOnKeyboardInput = showOnKeyboardInput; 
```

当我尝试这样做并在应用程序打开时开始输入时，什么也没有发生。我是否需要我拥有的每个 js 文件上的那个片段？我有一个 home.js 和一个 detail.js（多页应用程序）。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:18:24.807

这将检索设置值：

```
var showOnKeyboardInput = searchPane.showOnKeyboardInput; 
```

这会将相同的值重新分配给设置：

```
searchPane.showOnKeyboardInput = showOnKeyboardInput; 
```

所以没有任何变化是正常的。尝试：

```
searchPane.showOnKeyboardInput = true; 
```

# jquery - 使用航点 jQuery 淡入标题导航

> ID：13849096
> 
> 赞同：1
> 
> 时间：2012-12-12T21:37:20.040
> 
> 标签：jquery, jquery-waypoints

警告：jQuery 初学者...

我试图让我的标题淡入淡出，这取决于我正在处理的这个[视差网站中滚动的位置。](http://egelect.com/2013)我遇到的问题是我无法弄清楚如何让它轻松进入/退出。

我正在使用[Stellar jQuery 插件 + 航点](http://webdesign.tutsplus.com/tutorials/complete-websites/create-a-parallax-scrolling-website-using-stellar-js/)的组合来制作这个新网站。

在加载时，我添加了放置 opacity: 0 的“隐藏”。

这是导航的片段：

```
<header class="navContainer">
<nav>
    <ul class="navigation">
        <li class="logoMenu" data-slide="1"><a><img id="logoEGmenu" src="images/eg-logo-menu.png" alt="Logo des Entreprises d'électricité EG ltée"></a></li>
        <li class="text" data-slide="2"><a>Accueil</a></li>
        <li class="text" data-slide="3"><a>Services</a></li>
        <li class="text" data-slide="4"><a>Maître électricien</a></li>
        <li class="text" data-slide="5"><a>Projets</a></li>
        <li class="text" data-slide="6"><a>LEED</a></li>
        <li class="text" data-slide="7"><a>Notre mission</a></li>
        <li class="text" data-slide="8"><a>Nos experts</a></li>
        <li class="text" data-slide="9"><a>Contact</a></li>
    </ul>
</nav>
<div id="logoBG">&nbsp;</div>
<div id="navBG">&nbsp;</div>
<div id="noiseBG">&nbsp;</div> 
```

这是 .js 的一个片段：

```
 // Fade in Nav
$('.navContainer').addClass('hidden');
$.waypoints.settings.scrollThrottle = 25;
$('.navContainer').waypoint(function(event, direction) {
    $('.navContainer').toggleClass('hidden', direction === "up");

}, {
    offset: '-100%'
}); 
```

谢谢您的帮助！

# oracle - 表单运行时参数

> ID：13849097
> 
> 赞同：0
> 
> 时间：2012-12-12T21:37:26.670
> 
> 标签：oracle

我正在使用 Oracle Forms Builder 6i。每次我使用“运行表单->客户端/服务器”运行表单时，我都会收到用户/密码提示。有什么方法可以设置它，所以我不必输入该凭据？

感谢您的帮助:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T05:10:19.287

您可以将自己的代码放入`ON-LOGON`触发器中，以便为您登录：

```
LOGON('USER','PASSWORD' || '@' || 'SID'); 
```

[http://www.orafaq.com/wiki/Forms_FAQ#Can_one_bypass_the_Oracle_login_screen.3F](http://www.orafaq.com/wiki/Forms_FAQ#Can_one_bypass_the_Oracle_login_screen.3F)

这样做的好处是您的用户不需要知道数据库帐户密码。但是，这确实意味着您现在必须弄清楚如何安全地验证您的用户（例如使用自定义验证）。

# javascript - Javascript 代码在 IE8 中不起作用

> ID：13849100
> 
> 赞同：1
> 
> 时间：2012-12-12T21:37:29.363
> 
> 标签：javascript, jquery

我是使用 javascript 的新手，这是有人放入 C# ASP.Net 网站的代码，它应该从输入的邮政编码中获取城市和州。它在 IE9、Chrome、Firefox 中运行良好，但在 IE8 中失败。我不知道为什么。这是javascript，我希望有些东西对某人来说很突出。我还包括了使用它的标记。我不知道它在哪里失败，我得到 Pcodefail 结果并显示“* 无法找到邮政编码”。

```
<script type="application/javascript">
    $(document).ready(function () {
        $('#Pcodefail').hide();
    });
</script>

<script type="application/javascript">
    $(document).ready(function () {
        $('[id$=uxPostalCode]').focus(function () {
            var city = $('[id$=uxCityState]');
            city.val('');
        });

        $('[id$=uxPostalCode]').blur(function () {
            var city = $('[id$=uxCityState]');
            var oCity = $('[id$=uxCity]');
            var oState = $('[id$=uxState]');
            $.getJSON("http://www.geonames.org/postalCodeLookupJSON?&country=US&callback=?", { postalcode: this.value }, function (response) {
                //$.getJSON("http://api.geonames.org/findNearbyPostalCodesJSON?postalcode=?&country=US&radius=10&username=demo", { postalcode: this.value }, function(response) {
                if (!city.val() && response && response.postalcodes.length && response.postalcodes[0].placeName) {
                    city.val(response.postalcodes[0].placeName + ', ' + response.postalcodes[0].adminCode1);
                    oCity.val(response.postalcodes[0].placeName);
                    oState.val(response.postalcodes[0].adminCode1);
                    $('#Pcodefail').hide();
                }
                else {
                    $('#Pcodefail').toggle();
                }
            });
        });
    });
</script> 
```

**HTML**

```
<div class="base-container-controls-100pct">
    <div class="base-container-controls-20pct">
        <div class="label-sm">Postal Code<span style="color: #ff0000; vertical-align: top">*</span>&nbsp;</div>
    </div>
    <div class="base-container-controls-50pct">
        <asp:TextBox ID="uxPostalCode" CssClass="textbox-sm" Text="" TabIndex="7" runat="server" MaxLength="11"></asp:TextBox>
        <asp:RequiredFieldValidator ID="uxreqValZip" runat="server" ErrorMessage="Postal Code" Font-Bold="False" Text="*" ValidationGroup="one" ControlToValidate="uxPostalCode"></asp:RequiredFieldValidator>
        <div id="Pcodefail" style="color: Red">* Unable to find Postal Code</div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T21:59:41.900

我不是 100% 确定，但是在粗略检查代码后，首先突出的是 tag `<script type="application/javascript">`。我相当肯定它应该是`<script type="text/javascript">`。IE 对 JS 标签非常挑剔。

# analytics - piwik 日志导入无效的日志行

> ID：13849104
> 
> 赞同：2
> 
> 时间：2012-12-12T21:37:48.473
> 
> 标签：analytics, matomo, log-analysis

我是 piwik 的新手，正在尝试导入一堆日志。我需要有关日志格式正则表达式的帮助。日志中的示例行是：

> "1.1.1.1" 2.2.2.2 - myuser [09/Dec/2012:04:03:29 -0500] "GET /signon.html HTTP/1.1" 304 "http://www.example.com/example" " Mozilla/5.0 (Windows NT 6.1; WOW64; rv:9.0.1) Gecko/20100101 Firefox/9.0.1"

我的日志格式正则表达式如下所示：

```
--log-format-regex='\\\\"(?P<ip>\\\\S+)\\\\" \\\\S+ \\\\S+ \\\\S+ \\\\[(?P<date>.*?) (?P<timezone>.*?)\\\\] \\\\"\\\\S+ (?P<path>.*?) \\\\S+\\\\" (?P<status>\\\\S+) (?P<length>\\\\S+) \\\\"(?P<referrer>.*?)\\\\" \\\\"(?P<user_agent>.*?)\\\\"' 
```

我一直在收到所有“忽略的请求”和“无效的日志行”。例如：

## 日志导入摘要

```
0 requests imported successfully
0 requests were downloads
236252 requests ignored:
    236252 invalid log lines
    0 requests done by bots, search engines, ...
    0 HTTP errors
    0 HTTP redirects
    0 requests to static resources (css, js, ...)
    0 requests did not match any known site
    0 requests did not match any requested hostname 
```

如何修复日志格式正则表达式？

蒂亚丹

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-04T00:47:08.407

使用`piwik`(resp. `matomo`) 导入的日志进行导入时，您可以发出`--debug`两次该选项，这将产生无效行。

这是一个显示它的脚本示例（但这是我首选的日志格式）

```
python /opt/piwik.git/misc/log-analytics/import_logs.py \
    --debug --debug \
    --url=$piwik_site \
    --log-format-regex='(?P<host>\S+) (?P<ip>\S+) \S+ \[(?P<date>.*?) (?P<timezone>.*?)\] "\S+ (?P<path>.*?) \S+" (?P<status>\d+) (?P<length>\d+) "(?P<referrer>.*?)"$'
    --add-sites-new-hosts \
    --enable-http-errors \
    --enable-http-redirects \
    --enable-static \
    --strip-query-string \
    --show-progress \
    --show-progress-delay 2 \
    --recorders $cpu \
    "$1" 
```

$1 是我从中导入的文件的名称（我的 Apache、Nginx 和 Lighttpd boxen 都使用相同的格式）。

输出将有几行如下所示：

```
2013-09-03 19:42:34,145: [DEBUG] Invalid line detected (line did not match): edoceo.com 10.0.0.1 - [03/Sep/2013:16:41:03 -0700] "GET / HTTP/1.1" 301 - "-" "Some Bad Robot v0.1" 
```

这些向您展示什么是无效的，并提供有关如何调整/调整您的正则表达式的线索。

我在[http://edoceo.com/howto/piwik#import有一些设置的详细信息](http://edoceo.com/howto/piwik#import)

# javascript - 是否可以跟踪用户访问远程站点的时间范围？

> ID：13849106
> 
> 赞同：1
> 
> 时间：2012-12-12T21:37:52.500
> 
> 标签：javascript, tracking

假设我有自己的网站、自己的数据库，并且我想将 javascript 片段提供给其他网站（如谷歌分析类型的交易）。我如何能够跟踪访问者在这些网站上花费的金额？谷歌分析是如何做到的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T23:26:04.170

在您的 javascript 中，您可以为客户端提供如下内容：

```
 var timeLog = {
        start: null,
        end: null,
        init: function(){
            this.start = new Date().getTime();
        },
        sendResults: function(){
            this.end = new Date().getTime();
            var jData = { "client": "some-access-string", "start": this.start, "end": this.end };

            var client = new XMLHttpRequest();
            client.open("POST", "http://yoursite.com/youre-processing-script.php");
            client.setRequestHeader("Content-Type", "text/plain;charset=UTF-8");
            client.send(JSON.stringify(jData));
        }
    };

    window.onbeforeunload = function() {
        timeLog.sendResults();
    };

    timeLog.init(); 
```

onload 你需要调用 timeLog.init();

onbeforeunload 调用 timeLog.sendResults();

您的 php 脚本需要评估 post 并根据传递的客户端令牌记录结果。因此，当有人订阅您的服务时，您会为他们提供一个 ID。这是上面 http 请求的“客户端”部分。从那里你应该有足够的基本统计数据。

请记住，这是一个粗略的指南。这里的目的是给你一个关于如何做的想法，而不一定要编写一个正常运行的脚本。由于您正在谈论分析，因此您可能需要考虑或不想包括数千种不同的事物。数学因您的需要而异。

我不知道你的技能水平如何，所以我不想假设你需要在整个过程中得到指导。出于这个原因，我假设您可以处理 php 部分，包括数据库操作和一般评估。

# php - 基于先前查询数组结果的 MySQL PHP 查询

> ID：13849107
> 
> 赞同：0
> 
> 时间：2012-12-12T21:38:00.970
> 
> 标签：php, mysql

使用 PHP 我正在查询一个 MYSQL 数据库并返回 4 个结果。这些结果代表 4 行的 ID。

我现在想运行另一个 PHP 查询，该查询将为每个行 ID 标识一个名为 Counter 的字段，并将其递增 1。使用数组和循环似乎很简单，但我不确定如何在 PHP 中解决这个问题。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T21:41:19.670

一次完成：

```
UPDATE counter SET counter = counter + 1 
WHERE id IN ( ...your...select...query); 
```

或者可能没有子查询，我不知道您的起始查询或数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T21:41:37.237

为此，您使用[更新](http://dev.mysql.com/doc/refman/5.5/en/update.html)

```
update mytable
set counter = counter + 1
where id = 15 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T21:42:15.433

假设 $ids 包含您的 ID。

```
$ids[] = 0; //to exclude the case when $ids is empty
mysql_query("UPDATE table SET Counter = Counter + 1 WHERE ID IN (" . implode(',', $ids) . ")"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-12T21:43:43.163

它可以在单个查询中完成：

```
UPDATE table_name SET Counter = Counter + 1 WHERE id IN (your sub query ) 
```

# clearcase - cleartool 输出是否已本地化？

> ID：13849109
> 
> 赞同：1
> 
> 时间：2012-12-12T21:38:04.267
> 
> 标签：clearcase, cleartool

根据我在[上一个问题](https://stackoverflow.com/questions/13812257/reference-for-properties-that-can-be-passed-to-fmt)中的发现，我现在尝试解析输出`lstype -l`以确定给定元素类型的超类型和类型管理器。

我最初的想法是逐行处理输出并查找以 开头的第一行`supertype:`，然后取该行的剩余部分。

但是，这只有在`cleartool`始终以英语输出时才有效。我正在编写的代码可以在日文 ClearCase 环境中使用，我担心日文版本的 ClearCase 可能会输出不同于`cleartool`. 这是一个有效的问题，还是将`cleartool`始终以英语输出？

示例输出：

```
cleartool> lstype -l eltype:utf8_file@\vobFoo  
element type "utf8_file"  
 2012-12-03T19:08:24-06:00 by [username].None@CLEARCASE-VM  
  "Predefined element type used to represent a UTF8 file."
  owner: [computer]\[username]
  group: [computer]\None
  scope: this VOB (ordinary type)
  type manager: utf8_file_delta
  supertype: file
  meta-type of element: file element 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:56:51.257

`cleartool`**除了日语之外，**它本身没有本地化（我已经在许多不同的语言上设置了 LANG - 但日语 - 从未见过不同的输出）。

`xcleartool`（Unix 的 GUI 界面）如“[关于 en_US.UTF-8 LANG 变量及其对 xclearcase 的影响](http://www-01.ibm.com/support/docview.wss?uid=swg21205626)”所示，或“ [UNIX 系统和 Linux 上的 Rational ClearCase](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.books.cc_ms_platforms_guide.doc/clearcase_on_unix.htm) ”详细信息。

请参阅“[多语言环境中支持的 IBM Rational ClearCase 配置](http://publib.boulder.ibm.com/infocenter/cchelp/v8r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ms_install.doc/topics/c_supp_cc_cfgs_mult_langs.htm)”：

> **理性的 ClearCase**
> 
> *   运行英语或日语操作系统的 VOB 服务器可以支持：
>     
>     *   充当视图服务器主机并运行英语操作系统的英语客户端
>     *   充当视图服务器主机并运行日本操作系统的日本客户端
> *   运行英语或日语操作系统的 VOB 和视图服务器可以支持：
>     *   运行英语操作系统的英语客户端
>     *   运行日本操作系统的日本客户
> 
> 只有 CCRC GUI 支持更多语言，即“Group-1”：
> 
> *   巴西葡萄牙语
> *   法语
> *   德语
> *   意大利语
> *   日本人
> *   韩国人
> *   简体中文
> *   西班牙语
> *   繁体中文

因此，如“[设置日语选项](http://publib.boulder.ibm.com/infocenter/cchelp/v8r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cczose.doc/topics/t_cce_japan.htm)”中所述：

> 在 Windows 系统上，设置以下任一组环境变量：
> 在以下环境变量中：

*   **`C:\Program Files\IBM\RationalSDLC\ClearCase\bin\resdll`**是**日文消息目录所在的位置**，
*   `%L`是您为 设置的环境变量`LANG`，即**`ja_JP`**和
*   `%N`是日语消息目录，即**`bccMsg.cat`**.

> 使用`%%L`and`%%N`在批处理文件中执行 set 命令，而不是`%L`and `%N`。

```
set LANG=ja_JP
set NLSPATH=C:\Program Files\IBM\RationalSDLC\ClearCase\bin\resdll\%L\%N;%NLSPATH%
set RCC_CATALOG=C:\Program Files\IBM\RationalSDLC\ClearCase\bin\resdll\ja_JP\bccMsg.cat 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T21:50:41.867

我发现[这个页面](http://www-01.ibm.com/support/docview.wss?uid=swg21404250)似乎暗示它没有本地化。报价：

```
シンボリック・リンクを検索し、出力します。

UNIX と Linux:

2 種類の方法が存在します。

1\. cleartool find -all -type l -exec '/usr/atria/bin/cleartool describe $CLEARCASE_PN'

例:
% cleartool find -all -type l -exec '/usr/atria/bin/cleartool describe $CLEARCASE_PN' 
symbolic link "/vobs/french/ctlink_import" -> import 
created 25-Feb-03.12:34:39 by Joe_USER (joeuser.syb@lemur) 
Protection: 
User : joeuser : rwx 
Group: syb : rwx 
Other: : rwx 
symbolic link "/vobs/french/slink_import" -> import 
created 16-Apr-03.14:02:17 by Joe_USER (joeuser.syb @lemur) 
Protection: 
User : joeuser : rwx 
Group: syb : rwx 
Other: : rwx 
```

两个建议：

1.  在日本环境中测试它！没有什么可以替代这个！;-)
2.  如有必要，使用`LANG`环境变量强制使用某种语言。例如，您可以运行`LANG=en_US cleartool`或`LANG=C cleartool`.

# printing - 在 C# 上使用默认打印机打印活动报告

> ID：13849110
> 
> 赞同：0
> 
> 时间：2012-12-12T21:38:20.970
> 
> 标签：printing, activereports

我正在尝试打印一个活动的报告文档，但它需要直接打印，而不显示打印机窗口，而是直接在默认打印机上打印。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T20:39:58.423

The Document object's print method has an overload which allows passing in true/false for "show print dialog" and "show progress dialog". From [the documentation](http://helpcentral.componentone.com/NetHelp/ActiveReports6/ActiveReports.Document~DataDynamics.ActiveReports.Document.Document~Print%28Boolean,Boolean,Boolean%29.html) the signature is below:

```
public bool Print( 
   bool showPrintDialog,
   bool showPrintProgressDialog,
   bool usePrintingThread
) 
```

You might call it on a report that as follows:

```
 var myReport = new SalesActiveReport();
 myReport.Run();
 myReport.Document.Print(false, false, false); 
```

# tinymce - 在当前位置插入文本 TINYMCE IE9

> ID：13849115
> 
> 赞同：4
> 
> 时间：2012-12-12T21:38:46.430
> 
> 标签：tinymce, internet-explorer-9

如何在当前位置将文本插入到 tinyMce 编辑器中。它在 Chrome、FF、Safari 中完美运行，但在 IE 中它总是从 textarea 的顶部开始。我目前执行以下操作：

```
tinyMCE.execCommand('mceInsertContent',false, 'blabla this is tekst'); 
```

我尝试了重点，其他命令，没有任何效果:(。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-20T09:53:34.667

感谢您的帮助，但没有任何效果。我找到了自己的解决方案，我觉得有必要分享这个，因为我只发现了过时的解决方案，它不起作用:(。

解决方案：

在您的 TinyMCE 初始化中添加以下代码：

```
 tinyMCE.init({
// General options
        elements: elementid,
        setup: function (ed) {
            ed.onKeyUp.add(function (ed, e) {
                actualCaretPositionBookmark = tinyMCE.activeEditor.selection.getBookmark();
            });
            ed.onClick.add(function (ed, e) {
                actualCaretPositionBookmark = tinyMCE.activeEditor.selection.getBookmark();
            }); 
        } 
```

其中“actualCaretPositionBookmark”是javascript中的一个全局变量，您的所有javascript代码都可以访问它

然后，当您想通过 javascript 将文本添加到 TinyMCE 编辑器时，添加以下代码：

```
 if (tinymce.isIE) {
                tinyMCE.activeEditor.selection.moveToBookmark(actualCaretPositionBookmark);
                tinyMCE.execCommand('mceInsertContent',false, 'My new text'); 

            }else {
                tinyMCE.execCommand('insertHTML',false, 'My new text'); 
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T11:06:08.517

您可以使用这种方法来解决您的问题。初始化 tinymce 时，将 setup 参数设置为以下（内部`tinyMCE.init({...})`

```
...
theme: "advanced",   // example param
plugins = 'code',    // example param
setup : function(ed) {
    ed.onInit.add(function(ed, evt) {

        var dom = ed.dom;
        var doc = ed.getDoc();

        tinymce.dom.Event.add(doc, 'blur', function(e) {
            // onBlur you save your caret position
            actual_caret_position_bookmark = tinymce.get('your_editor_id').selection.getBookmark(2, true);
        });
    });
},
cleanup: true,      // example param
... 
```

现在，您需要在使用 mceInsertContent 命令插入新内容之前重置 tinymce 插入符号位置：

```
tinymce.get('your_editor_id').selection.moveToBookmark(actual_caret_position_bookmark); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-10T07:01:29.567

如果您在同一页面中有多个编辑器，您可以试试这个

```
tinymce.get('content_id').execCommand('mceInsertContent', false, 'content to be inserted');
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T05:34:45.413

这是一个[DEMO](http://fiddle.tinymce.com/22caab/5)在 IE9 中打开此链接

将光标放在文本区域中的所需位置，然后单击 tinyMCE 第三行中的最后一个图标（红色十字）。

希望能帮助到你！！:)

根据您的评论，单击tinymce 编辑器外部的按钮（单击我）。再次检查[演示](http://fiddle.tinymce.com/22caab/7)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T14:23:13.783

I have the same issue some while ago, I have a plugin using a modal popup and also use the same method described above. :

```
tinyMCE.execCommand('mceInsertContent',false, 'blabla this is tekst'); 
```

In IE9 the text is inserted in the top. The problem with playing with the caret is that, in my case, certain strange things happened (The backspace delete breaks), so I checked the code for the smileys plugin embedded inside the tinyMCE distribution that I'm using. the solution I found was to use the TinyMCEPopup object instead, like this:

```
tinyMCEPopup.execCommand('mceInsertContent', false, 'blabla this is tekst'); 
```

Regards.

# linux - 有没有办法将 time 命令的输出通过管道传输到日志文件中？

> ID：13849116
> 
> 赞同：2
> 
> 时间：2012-12-12T21:38:45.990
> 
> 标签：linux, bash, shell, unix, command-line

我想通过管道输出`time`命令的输出，而不是测量时间的作业的输出。我试过了

```
 /usr/bin/time -v java RandomTest > time.log 
```

但这会将`java RandomTest`' 的输出重定向到 time.log

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T22:34:53.643

这个有点棘手，但您可以按如下方式进行：

```
{ time java RandomTest ; } 2> time.log 
```

这样时间的结果进入`time.log`，而`stdout`从`java RandomTest`留在你的`tty`。

首先尝试：

```
{ time ls ; } 2> tmp.txt 

cat tmp.txt 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T21:43:39.390

至少在最近的 Linux 发行版中， time 命令支持以下`-o FILE`选项：

```
/usr/bin/time -v -o time.log java RandomTest 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T21:40:05.943

您也可以重定向标准错误，例如使用`>&`in`bash`或`zsh`

（这`>&`与`2>&1`将 stderr 重定向到 stdout 相同）

# vector - 带有布尔值的 all_to_all 提升 mpi

> ID：13849118
> 
> 赞同：0
> 
> 时间：2012-12-12T21:38:49.467
> 
> 标签：vector, boolean, boost-mpi

我正在尝试使用 bool 向量进行全部操作，但出现编译器错误：

```
vector<bool> particles_crossed_send(world.size(),false);
vector<bool> particles_crossed_recv;
mpi::all_to_all(world,particles_crossed_send,particles_crossed_recv); 
```

编译器抱怨最后 2 个参数（向量）“必须是左值或函数指示符”。

不知道为什么我会遇到这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:19:33.033

我相信这与 boost::mpi 中的底层调用有关。由于 boost mpi 使用旧版本的 MPI 标准，因此 bool 不被视为 MPI 数据类型。为了我的目的，我只是将它切换为 char 并且效果很好。

# jquery - 在按钮单击时清空 li 的文本

> ID：13849120
> 
> 赞同：0
> 
> 时间：2012-12-12T21:38:56.210
> 
> 标签：jquery, dom

生成的输出如下： HTML

```
<div id="resultCancel" class="error" style="display: block;">
    <a class="close">X</a>
    <ul style="">
        <li for="ProductId" generated="true" class="error" style="">Please Enter License Key</li>
    </ul>
</div> 
```

当您单击 a.close 时，我需要清空 li 的内容（在有人杀死我之前，我们使用的是旧代码库，这就是我使用 .live 功能的原因）

```
$('a.close').live('click',function(){
   $(this).parent().fadeOut("fast");
   $(this).closest//.next//.sibling('ul').addClass('foo');
}); 
```

通过使用最接近的，我可以向上 DOM 树，我需要向下。.next 和 .sibling 没有效果....如果重要的话 div#resultCancel 是由 jQuery 验证插件触发的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:41:11.803

您可以使用`.next()`

```
$this.next('ul').find('li.error').addClass('foo').html('Text Changed!!') 
```

使用`.on()`而不是`.live()`后者已被**弃用**..

```
$('a.close').on('click',function(){
   var $this = $(this);
   //$this.parent().fadeOut("fast");
   $this.next('ul').find('li.error').addClass('foo').html('Text Changed!!')
}); 
```

你也需要`not change the text`原样`hiding the parent div`。

**[检查小提琴](http://jsfiddle.net/sushanth009/bK6X8/)**

对于**动态元素委托事件**

```
$('body').on('click','a.close',function(){  // jQuery > 1.7.0

$('body').delegate('a.close' ,'click',function(){  // jQuery < 1.7.0 
```

# java - SequenceEntityModifier 中的 onUpdate

> ID：13849126
> 
> 赞同：1
> 
> 时间：2012-12-12T21:39:16.393
> 
> 标签：java, android, andengine

我一直在查看这个文档：

[http://andengine-doc.googlecode.com/hg/org/anddev/andengine/entity/modifier/SequenceEntityModifier.html](http://andengine-doc.googlecode.com/hg/org/anddev/andengine/entity/modifier/SequenceEntityModifier.html)

它表明有一个 onUpdate，但是当我尝试使用它时，我看到了这个错误：

> 从未在本地使用 new SequenceEntityModifier(){} 类型的 onUpdate(float) 方法

我是Java新手，这是我的代码：

```
 SequenceEntityModifier modifier = new SequenceEntityModifier(myMovemod) {

        @Override
        protected void onModifierFinished(IEntity pItem) {
            // animation finished
            super.onModifierFinished(pItem);
        }

        protected float onUpdate(float pSecondsElapsed) {

            return pSecondsElapsed;

        }

    }; 
```

当我向它添加“@Override”时，我得到一个错误，而eclipse的唯一解决方案是删除@override，我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:49:38.683

根据您原始问题中的 javadoc，我认为该方法应如下所示：

```
public float onUpdate(float pSecondsElapsed, IEntity pItem)
{
    return pSecondsElapsed;
} 
```

否则，您不会覆盖现有方法 - 您正在创建一个新方法。

也`onModifierFinished`应该公开。

# mod-rewrite - mod_rewrite $10 价值限制，如何克服？

> ID：13849127
> 
> 赞同：0
> 
> 时间：2012-12-12T21:39:19.390
> 
> 标签：mod-rewrite

我有一个超过 10 个值的 ReWrite 规则。我知道 mod 重写仅限于 9，我已经看到了 1 或 2 个使用 RewriteCond 的解决方案，但无法让它为我工作。

我通过网络生成器生成了重写规则，因为我不完全了解如何正确编写规则。

这是我的重写规则：

```
RewriteRule ^([^-]*)-([^-]*)-([^-]*)-([^-]*)-([^-]*)-([^-]*)-([^-]*)-([^-]*)-([^-]*)-([^-]*)-([^-]*)-([^-]*)-([^-]*)-([^-]*)\.html$ /search_properties.php?search=$1&country=$2&search_home_type=$3&search_home_town=$4&search_home_area=$5&search_rent_sale=$6&price_min=$7&price_max=$8&bedrooms=$9&bathrooms=$10&furnished=$11&search_agent=$12&order_by=$13 [L] 
```

知道如何克服 10 美元的限制吗？非常欢迎任何帮助或提示！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T12:12:22.127

您可以将规则拆分为 2 个规则。像这样的东西：

```
RewriteRule ^([^-]*)-([^-]*)-([^-]*)-([^-]*)-([^-]*)-([^-]*)-([^-]*)-([^-]*)-([^-]*-[^-]*-[^-]*-[^-]*-[^-]*-[^-]*)\.html$ ineedmorevariables-$9?search=$1&country=$2&search_home_type=$3&search_home_town=$4&search_home_area=$5&search_rent_sale=$6&price_min=$7&price_max=$8
RewriteRule ^ineedmorevariables-([^-]*)-([^-]*)-([^-]*)-([^-]*)-([^-]*)-([^-]*) search_properties.php?bedrooms=$1&bathrooms=$2&furnished=$3&search_agent=$4&order_by=$5&somethingelse=$6 [L,QSA] 
```

不过我还没有测试过。所有这些括号都让我发疯了。

PS。我看到最后一个参数 ( `$14`) 从未使用过。

# magento - Internet Explorer 8 - Magento 和 Simple 可配置产品错误的产品和价格未更新

> ID：13849128
> 
> 赞同：1
> 
> 时间：2012-12-12T21:39:22.563
> 
> 标签：magento, internet-explorer-8, magento-1.5, configurable-product

我们在 Magento 1.6.0 中使用 Magento Simple Configurable products 扩展来获取可配置产品页面上子产品的价格。即简单产品的价格应该用于每种产品组合，而不是使用可配置产品价格+/- a % 或金额。

但是，使用 Internet Explorer 8，当您从下拉列表中选择一个选项时，价格会更新为“0.00 英镑”。如果您然后将此产品添加到购物车，它会以最低商品的价格添加，而不是您选择的简单产品的正确价格。到目前为止，已经通过谷歌搜索和 github 没有运气。

[通过删除“_clone”名称尝试了https://github.com/organicinternet/magento-configurable-simple/issues/14](https://github.com/organicinternet/magento-configurable-simple/issues/14)上的解决方案建议，但这所做的只是将显示页面上的价格固定在最低价格适用于所有浏览器，但在立即购买提交时将相同的产品添加到购物车（即错误的产品适用于 IE8，适用于所有其他浏览器）。

发生这种情况的一个例子是[http://www.atlantisrugs.com/modern-chinese-arctic-rug-19](http://www.atlantisrugs.com/modern-chinese-arctic-rug-19) - 感谢任何/所有帮助！

# asp.net-mvc-3 - 针对这种情况的理想（视图）模型设计

> ID：13849130
> 
> 赞同：1
> 
> 时间：2012-12-12T21:39:27.130
> 
> 标签：asp.net-mvc-3, linq

我正在尝试将我的大脑围绕视图模型以及何时适合使用它们。我想解释一下在这种情况下该怎么做：

模型：

```
public class Person
{
    public string firstName {set;get;}
    public string lastName {set;get;}
    public string City {set;get;}
    .... other junk
} 
```

控制器：

```
IEnumerable<Person> model = db.Person
.Where(r => r.City == city)
.Select(r => new Person{ 
    firstName = r.firstName,
    lastName = r.lastName,
    something = r.something}); 
```

现在假设我的页面允许用户选择`city`他想要过滤的内容。此外，我只想显示`firstName`and `lastName`。现在是使用视图模型的时候吗？以前我会做这样的事情。

视图模型：

```
public class PersonViewModel
{
    public string firstName {set;get;}
    public string lastName {set;get;}
    public string cityChoice {set;get;}
    public IEnumerable<SelectListItem> cityList {set;get;}
} 
```

我已经意识到，由于我的查询将返回一个 type `IEnumerable<Person>`，那么对于查询返回的每一行我都会有一个`cityList`。更好的视图模型是什么？我的下一个想法是让一切都成为`IEnumerable`：

```
public class PersonViewModel
{
    public IEnumerable<string> firstName {set;get;}
    public IEnumerable<string> lastName {set;get;}
    public IEnumerable<string> cityChoice {set;get;}
    public IEnumerable<SelectListItem> cityList {set;get;}
} 
```

这似乎根本不是一个明智的选择。它只是看起来很乱，实现也看起来很痛苦。

简而言之，将最少的数据从控制器传递到视图的最佳方法是`List<SelectListItem>`什么？我已经看到了通过`viewbag`或传递列表的实现，`viewdata`但这似乎是垫练习。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:46:13.587

我会做两个视图模型 - 一个用于视图，一个用于数据：

```
public class CitySelectionVM {
  public string SelectedCity {set;get;}
  public IEnumerable<SelectListItem> CityList {set;get;}
  public IEnumerable<PersonVM> PersonList {set;get;}
} 
```

此外，人员特定数据的第二个视图模型：

```
public class PersonVM
{
  public string FirstName {set;get;}
  public string LastName {set;get;}
} 
```

# objective-c - 在 UITextField 中输入数字后，如何让小键盘消失？

> ID：13849134
> 
> 赞同：0
> 
> 时间：2012-12-12T21:39:46.867
> 
> 标签：objective-c, ios, keyboard, uitextfield

我正在尝试制作一个应用程序，该应用程序允许我记录直到某个数字的数字，然后将它们添加为 Science Fair 评审应用程序的计算器。我有所有的数字，但我不能让小键盘消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:45:32.893

只需调用

```
[self.view endEditing:YES]; 
```

在`UIViewController`托管您`UITextField`的 s 上。这将使他们辞去第一响应者的职务，从而解雇您的小键盘。

# php - 为什么当我添加博客条目时，日期在我的页面和数据库中显示为全零 - 为什么会这样？

> ID：13849136
> 
> 赞同：0
> 
> 时间：2012-12-12T21:39:53.417
> 
> 标签：php, phpmyadmin, blogs

我的数据库中还有一个日期字段，其日期数据类型未设置为 null

这是我的观点——我应该在这里添加一些额外的东西吗？

```
 foreach($blogs AS $viewData)
  {
$id = $viewData->id;
$title = $viewData->title;
$body = $viewData->body;
$username = $viewData->username;
$date = $viewData->date;

?>

   <b> <?=$title?></b>
    <p><?=$body?></p>

      <p>posted by:<?=$username?></p>
      <p>date: <?=$date?></p>

<hr> 
```

这是我插入数据库的模型中的函数...

```
 public function insert_entry()
{
    $this->title = $this->input->post('title');
        $this->body = $this->input->post('text');
        $this->username = $this->session->userdata('username'); 
        $this->date = time();// is there something I should change here?

        $this->db->insert('blogs', $this);

     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:02:28.057

how do you insert into your blogs table? show query

you should use something like this to have proper values in 'date' field:

```
mysql_query("INSERT INTO blogs(title,body,username,date) VALUES('$title','$body','$username',NOW())"); 
```

or if you want to set manual timestamp do something like this:

```
mysql_query("INSERT INTO blogs(title,body,username,date) VALUES('$title','$body','$username','".date("Y-m-d H:i:s", $your_timestamp)."')"); 
```

this is the way to insert proper date/datetime values

# excel - 用于大型 Excel 电子表格的 OLAP

> ID：13849139
> 
> 赞同：0
> 
> 时间：2012-12-12T21:40:02.807
> 
> 标签：excel, spreadsheet, olap

我遇到了一个巨大的 Excel 电子表格问题。它有大约 30 万行，需要用所有数据制作一个数据透视表（不可能分割）。如您所想，处理需要数小时。我尝试使用相同的结果进行访问。

我需要让它更快，这是我最好的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:09:33.697

尝试[PowerPivot](http://www.microsoft.com/en-us/bi/powerpivot.aspx)。它是 Excel 2010 的免费插件，非常适合在 Excel 中处理大数据。

这是一本关于 Powerpivot的不错的[书。](https://rads.stackoverflow.com/amzn/click/com/0789743159)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:49:35.563

我不是 MS Access 的粉丝，但这实际上是它可以很好地完成工作的时候之一，前提是您不需要数据透视表中的多个值。

只需按原样导入电子表格并运行交叉表查询。

# iphone - 从已知数据集中随机抽样

> ID：13849148
> 
> 赞同：-1
> 
> 时间：2012-12-12T21:40:32.470
> 
> 标签：iphone

我正在尝试从已知数据集（n=35）中随机选择 6 个样本 10,000 次。我觉得这是一个基本的代码，但我找不到它。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T23:55:52.003

在 iOS 中，您可以这样做：

```
#include <stdlib.h>

- (id)randomElement:(NSArray *)array {

    NSInteger index = arc4random() % array.count;
    return [array objectAtIndex:index];
} 
```

arc4random 承诺伪随机数的均匀分布。这也可以做成数组删除参数的类别方法。

# .net - C# MVC3 授权当前登录用户对活动目录组

> ID：13849152
> 
> 赞同：0
> 
> 时间：2012-12-12T21:40:47.003
> 
> 标签：.net

我有一个正在处理的应用程序的 MVC3 前端。我可以使用 [Authorize(Roles=@"MYDOMAIN\MYGROUP")] 成功阻止或授予对活动目录组的访问权限。在我进行身份验证之前，我可以在网页上提取并显示域\用户名，这样我就知道它正在查看用户，并且完全希望看到用于对用户进行身份验证的信息。但是，出乎意料的是，我收到了一个登录提示，要求我重新验证我当前登录的用户。一旦我重新对用户进行身份验证，它就可以在网站上正常工作。最终，如果它无法确定谁登录了，我确实希望它要求身份验证。我确信以前有人问过这个问题，但我没有找到任何东西；我想我不确定要准确搜索的术语是什么......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:28:49.700

实际上，您所针对的应用程序并不重要，它与 Windows 身份验证有关，因此您需要尝试检查配置。

参考 [http://www.codeproject.com/Articles/94612/Windows-Authentication](http://www.codeproject.com/Articles/94612/Windows-Authentication)

更多详情 [http://www.codeproject.com/Articles/98950/ASP-NET-authentication-and-authorization](http://www.codeproject.com/Articles/98950/ASP-NET-authentication-and-authorization)

# ssis - 在数据流任务之前确定 Excel 电子表格格式

> ID：13849162
> 
> 赞同：0
> 
> 时间：2012-12-12T21:41:12.337
> 
> 标签：ssis

我正在开发一个 SSIS 包，它使用 for each 循环遍历目录中的 excel 文件和导入它们的数据流任务。

我遇到的问题是与我一起工作的项目经理并不认为用户会始终遵循该结构。因此，如果一个文件在文件夹中，并且包尝试导入它，但电子表格缺少列或它生成的额外列，当然会出错。即使我将任务设置为不使包失败；该包确实失败了，然后其他文件没有被导入。

所以，我想知道确定电子表格格式不正确或阻止错误导致包执行失败的最简单方法是什么？采取上述步骤后，我将使用文件复制任务将文件移动到“失败”文件夹。然后继续处理电子表格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T23:00:39.050

我有一个与您的类似的 SSIS 包设置，除了它遍历 Microsoft Project 文件列表并将记录导入数据库。在 Foreach 循环容器中，它首先执行检查以查看文件是否存在。我将 FileName 的字符串变量和布尔变量 bolFileExists 传递给脚本。我知道您也在寻求验证文件格式是否正确，并且我猜测您可能能够应用类似于以下脚本任务代码的内容：

```
 public void Main()
    {
        if (File.Exists(Dts.Variables["FileName"].Value.ToString()) )
        {
            Dts.Variables["bolFileExists"].Value = true;
        }
        else
        {
            Dts.Variables["bolFileExists"].Value = false;
        }
    } 
```

以此为导向将有两条路径。第一个将应用表达式“@bolFileExists==True”，然后执行导入过程。另一个将应用表达式“@bolFileExists==False”并跳过该文件并允许处理以下文件。在我的表驱动的 SSIS 包中，对于这两个选项，导入状态是在列出正在导入的文件的表中定义的。我有近 40 个文件被导入，这使我可以运行查询以确定是否遗漏了任何文件，并在流程完成后发送的自动电子邮件中应用该查询。

至于不正确的格式，我的第一个建议是为用户提供一个模板，以便他们遵循其中一个工作表中的说明。之后，您可以尝试应用一个临时表或 SQL 来收集感兴趣的工作表中包含的列的列表或计数。您在此处采用的方法取决于所提取信息的复杂性。同样在我的 SSIS 包中，数据在导入后仍然可以关闭。在这种情况下，我首先将导入到一个临时登台表中，在该表中执行检查，然后使用 MERGE 将符合感兴趣标准的内容规范化到最终目标表中。

如果您有任何问题，请告诉我。希望这有助于解决部分问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T15:06:55.617

如果您正在谈论验证列的准确性等，您可以有一个脚本任务来打开 excel 文件并查看每一列以验证内容是否正确。这可以使用 OpenXML 或 InterOp.Office 参考来完成。

如果您在谈论 excel 版本，您可以有一个查看文件扩展名的脚本任务（尽管如果他们重命名文件，这真的无济于事）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T07:09:07.857

有 35 篇关于 SO 的文章引用了底层数据库架构： [https ://stackoverflow.com/search?q=GetOleDbSchemaTable](https://stackoverflow.com/search?q=GetOleDbSchemaTable)

尝试使用模式检测步骤来丰富 Kosh 的脚本，在该步骤中，您将使用与 XLS 文件的底层连接作为 OleDB 源。提取字段列表后，您可以验证所有必要字段是否以正确的顺序出现。

# ruby-on-rails - Best_in_place 标签槽

> ID：13849166
> 
> 赞同：3
> 
> 时间：2012-12-12T21:41:15.927
> 
> 标签：ruby-on-rails, best-in-place

我正在使用 best_in_place gem，所以我可以在我的索引视图中编辑多个学生。

但问题是可用性很差。我必须单击，输入信息，输入/单击并再次单击以编辑其他信息。

这是我可以按 Tab 键通过字段的一种方式吗？

这是索引的代码：

```
<% @students.each do |student| %>
   <tr>
   <td><%= link_to .name, edit_student_path(student) %></td>
   <td><%= best_in_place student, :oral %></td>
   <td><%= best_in_place student, :writing %></td>
   <td><%= best_in_place student, :participation %></td>
   <td><%= best_in_place student, :grammar %></td>
   <td><%= best_in_place student, :presence, type: :select, collection: [["Present", "Present"], ["Absent", "Absent"], ["", "-"]] %></td>
   </tr>
<% end %> 
```

我发现了这个：[https ://github.com/bernat/best_in_place/tree/master/lib/best_in_place](https://github.com/bernat/best_in_place/tree/master/lib/best_in_place)

行。这就是我现在得到的，但仍然无法正常工作：/有什么想法吗？

指数：

```
 <td><%= best_in_place allan, :oral, :html_attrs => {:tabindex => 10} %></td>
 <td><%= best_in_place allan, :writing, :html_attrs => {:tabindex => 11} %></td> 
```

用户.js.coffee

```
jQuery ->
$('.best_in_place').best_in_place()

$ ->
  $('span.best_in_place').focus ->
   el = $(this)
   el.click()
   el.find(el.data('type')).attr('tabindex', el.attr('tabindex')) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T23:27:34.417

我认为您可以像这样使用`tabindex`HTML 属性和`focus`事件进行一些修改：

```
 <td><%= best_in_place student, :oral, :html_attrs => {:tabindex => 10} %></td>
   <td><%= best_in_place student, :writing, :html_attrs => {:tabindex => 11} %></td>
   <td><%= best_in_place student, :participation, :html_attrs => {:tabindex => 12} %></td>
   <td><%= best_in_place student, :grammar, :html_attrs => {:tabindex => 13} %></td>
   <td><%= best_in_place student, :presence, type: :select, collection: [["Present", "Present"], ["Absent", "Absent"], ["", "-"]], :html_attrs => {:tabindex => 14} %></td> 
```

而这个 JS

```
$(function() {
  $('span.best_in_place[data-html-attrs]').each(function() {
    var attrs, el;
    el = $(this);
    attrs = el.data('html-attrs');
    if (attrs && attrs['tabindex']) {
      el.attr('tabindex', attrs['tabindex']);
    }
  }).focus(function() {
    var el;
    el = $(this);
    el.click();
  });
}); 
```

JS 代码的最后一行是搜索 BIP 表单的元素类型并分配，`tabindex`因此保持制表符的顺序。

**更新**：上述 JS 的 CoffeeScript 版本

```
$ ->
  $('span.best_in_place[data-html-attrs]').each ->
    el = $(this)
    attrs = el.data('html-attrs')
    el.attr('tabindex', attrs['tabindex']) if attrs and attrs['tabindex']
  .focus ->
    el = $(this)
    el.click() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-09T20:50:35.960

BIP 改变了它们的命名结构。它们还包括一些 tabindex 支持。

通过宝石 github：

> HTML 选项：
> 
> 如果您提供的选项不是明确的 best_in_place 选项，则在创建 best_in_place 跨度时将通过该选项。
> 
> 因此，例如，如果您想将 HTML 选项卡索引添加到 best_in_place 跨度，只需将其添加到您的方法调用中：
> 
> `<%= best_in_place @user, :name, tabindex: "1" %>`

但是，我没有让这个开箱即用（或根本没有）。我最终改变了上面的 Ahmad 的 JS 解决方案以符合新的命名结构。尽管通过`:select`字段切换仍然是一个问题，但它工作得很好。

```
$(function() {
  $('span.best_in_place[data-bip-html-attrs]').each(function() {
    var attrs, el;
    el = $(this);
    attrs = el.data('bip-html-attrs');
    if (attrs && attrs['tabindex']) {
      el.attr('tabindex', attrs['tabindex']);
    }
  }).focus(function() {
    var el;
    el = $(this);
    el.click();
  });
}); 
```

JS 不是我的强项。如果有人对通过`:select`下拉列表进行选项卡有任何建议，请回复！谢谢

# c# - 我如何匹配除了两个字符之外的所有内容？

> ID：13849182
> 
> 赞同：1
> 
> 时间：2012-12-12T21:42:30.493
> 
> 标签：c#, regex

我需要匹配双花括号之间的所有字符，但我需要能够在一个大字符串中找到多个匹配项。

我一直在使用这个 RegEx 测试器，因为我在 C# 中这样做：http: [//derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx](http://derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx) 另外，我有“ SingleLine”因为我想要而被选中。匹配\n

这是我正在匹配的字符串的示例：

```
<div class="nest-1-2">
    <dl>
    <dt>Type:</dt>
    <dd>{{(Entity)Field Name.separator(, ) > [:Name:]}}</dd>
    <dt>At:</dt>
    <dd>{{(Entity)Field Name > [:Name:]}}</dd>
    <dt>Team:</dt>
    <dd>{{(Entity)Field Name.separator(, ) > [:First Name:] [:Last Name:]}}</dd>
    </dl>
</div> 
```

这是我正在使用的正则表达式：

```
\{\{(?<field>[^>]*)?[ > ]?(?<looptemplate>[^\}\}].*)?\}\} 
```

我遇到的问题是我希望所有内容都匹配到下一个 }} 的所有文本，这是匹配最后一个而不是下一个。所以我得到了 1 场比赛，这是从第一场`{{`到最后一场比赛，`}}`我尝试使用负面展望，`(?!\}\})`但这似乎对我不起作用。不幸的是，`[^\}\}]`不匹配两个花括号，它只匹配一个。

我不是一个正则表达式的菜鸟，但这个真的让我很着迷。我已经四处寻找答案，所以现在我希望有人可以帮助我。

我真的很感谢专家的任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T21:56:50.997

一些东西：

1.  您正在使用`?`包含`*`. 意思是“ `*`0次或多次”，所以基本上内容已经是可选的。使用`?`不会做任何事情。

    ```
    \{\{(?<field>[^>]*)[ > ]?(?<looptemplate>[^\}\}].*)\}\} 
    ```

2.  `[ > ]`匹配**1 个**字符。空格或`>`. 您可能的意思是`(?: > )`（匹配`" > "`（忽略引号，否则 SO 不会呈现空格）并将其组合在一起。

    ```
    \{\{(?<field>[^>]*)(?: > )?(?<looptemplate>[^\}\}].*)\}\} 
    ```

3.  `[^\}\}]`是一样的`[^\}]`。否定字符类不适用于字符串，它们仅适用于内部的每个单独字符，因此多次编写一个不会改变任何内容。我想这就是为什么你尝试了消极的前瞻。这是正确的，但您需要检查重复的每个字符的条件。否则，您只检查一次，即您的`looptemplate`不是以 开头，`\}\}`但随后您以 . 开火`.*`。因此，将分组`.`和前瞻放在一起：

    ```
    \{\{(?<field>[^>]*)(?: > )?(?<looptemplate>(?:(?!\}\}).)*)\}\} 
    ```

4.  你`(?: > )`是可选的，所以如果你有一些`{{...}}`不包含它的部分（只有`field`部分你会遇到与以前相同的问题，只是这次使用`[^>]`. 在这里也包括前瞻：

    ```
    \{\{(?<field>(?:(?!\}})[^>])*)(?: > )?(?<looptemplate>(?:(?!\}\}).)*)\}\} 
    ```

顺便说一句，使用否定字符类或前瞻的替代方法是使用不贪婪的重复。如果您可以使用否定字符类，那通常是可取的，因为它同样具有可读性，但通常比 ungreedy 修饰符更有效，因为它不需要回溯。在您的情况下，您必须使用前瞻（因为您不想跳过两个连续字符的模式，而不仅仅是一个字符）。在这种情况下，前瞻可能会抵消避免回溯带来的性能提升，而且前瞻通常不太可读。所以你可能只想在这里进行不贪婪的重复（在重复量词后面加上`?`）：

```
\{\{(?<field>(?:(?!\}})[^>])*)(?: > )?(?<looptemplate>.*?)\}\} 
```

请注意，您不能使用不贪婪的重复，`field`因为，`(?: > )`是可选的。这将导致为`field`空和其他所有内容（包括可能`" > "`与 匹配`looptemplate`。**除非**您将 与`>`一起包含到可选组中`looptemplate`：

```
\{\{(?<field>[^>]*?)(?: > (?<looptemplate>.*?))?\}\} 
```

最后一点。这只是一个口味问题，但让我向您介绍另一种形式的逃避。许多元字符在字符类中时不是元字符（只有、 和`]`仍然`-`是）。因此，您可以将元字符包装在字符类中以对其进行转义：`^``\`

```
[{][{](?<field>[^>]*?)(?: > (?<looptemplate>.*?))?[}][}] 
```

正如我所说，这只是一个建议，但对于大多数字符，我发现这比使用反斜杠更具可读性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T22:02:59.517

> 另外，我检查了“SingleLine”，因为我想要 . 匹配\n

如果您取消勾选“单行”，它将起作用。所以很明显你`.`是问题所在。一个简单的解决方案是使用`.*?`而不是`.*`尽可能多地非贪婪地选择它（而不是尽可能地贪婪地选择）。另一种解决方案是用`.`更具体的东西代替，比如负面的前瞻，因为你可能不想匹配`{{`它内部的另一个（甚至`}}`）。但在这种情况下，非贪婪的解决方案要容易得多。

您可能还应该更改字段字符类的乘数，这样它就不会匹配已经是循环模板一部分的内容。

另请注意，这`[ > ]`是一个将选择空格或`>`. 所以它不会选择`" > "`. 如果你想这样，只需去掉括号：

```
\{\{(?<field>[^>]*?)? > (?<looptemplate>[^}].*?)?\}\} 
```

在您的情况下，由于您可能希望将 looptemplate 的东西设为可选，您可能希望这样做，但使用非捕获组：

```
\{\{(?<field>[^>]*?)?(?: > (?<looptemplate>[^}].*?))?\}\} 
```

还有最后一点；如果您希望`.`匹配换行符，最好在必要时提供一个示例。

（好的，另一个注意事项，正如 m.buettner 在他的回答中正确提到的那样，字符类只需要提及每个字符一次；此外，您不需要在字符类中转义大括号，所以这一切都简化为`[^}]`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T21:54:58.177

那这个呢：

```
\{\{.*?\}\} 
```

`.*?`类似于`.*`但采用惰性匹配，而不是贪婪。这意味着它会停止匹配，并尝试尽快继续匹配正则表达式的其余部分，而不是贪婪匹配，它会在继续使用正则表达式的其余部分之前尝试尽可能多的消耗。

因此，适用于：“{{this}} and that}}”

`\{\{.*?\}\}`匹配“{{this}}”

和

`\{\{.*\}\}`匹配“{{this}} and that}}”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T21:57:10.940

编辑开始：

好的，所以我更改了文本文件....

```
<div class="nest-1-2">
    <dl>
    <dt>Type:</dt>
    <dd>{{(Entity)Field Name.separator(, ) > [:Name:]
    foo came up
    boo is here too}}</dd>
    <dt>At:</dt>
    <dd>{{(Entity)Field Name > [:Name:]}}</dd>
    <dt>Team:</dt>
    <dd>{{(Entity)Field Name.separator(, ) > [:First Name:] [:Last Name:]}}</dd>
    </dl>
</div> 
```

然后我在 Regex 新构造函数中添加了一个参数......具有讽刺意味的是，该选项是“SingleLine”

```
System.Text.RegularExpressions.Regex Y = new System.Text.RegularExpressions.Regex("{{(.*?)\\}}", System.Text.RegularExpressions.RegexOptions.Singleline); 
```

编辑结束………………

我将您的示例字符串复制并粘贴到一个平面文本文件中以进行测试....

```
namespace a
{
    class Program
    {
        static void Main(string[] args)
        {
            string X = System.IO.File.ReadAllText("C:\\Users\\rnirnberger\\Documents\\a.txt");
            System.Text.RegularExpressions.Regex Y = new System.Text.RegularExpressions.Regex("{{(.*?)\\}}");
            System.Text.RegularExpressions.MatchCollection Z = Y.Matches(X);
            foreach (System.Text.RegularExpressions.Match match in Z)
            {
                Console.WriteLine(match.Value);

                //If you want to strip out the double-braces
                //↓↓↓↓

                //Console.WriteLine(match.Value.Replace("{{", "").Replace("}}", ""));
            }
        }
    } 
```

# ios - 基本 iOS 代码行说明

> ID：13849183
> 
> 赞同：4
> 
> 时间：2012-12-12T21:42:33.503
> 
> 标签：ios

我正在处理的[教程定义了以下方法。](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/SecondiOSAppTutorial/DesigningDataModel/DesigningDataModel.html#//apple_ref/doc/uid/TP40011318-CH3-SW2)

```
- (void)addBirdSightingWithSighting:(BirdSighting *)sighting {
    [self.masterBirdSightingList addObject:sighting];
} 
```

本教程对此进行了如下描述：

> 此方法通过向该方法发送用户输入的名称和位置以及今天的日期来创建和初始化一个新`BirdSighting`对象。`initWithName:location:date:`然后，该方法将新`BirdSighting`对象添加到数组中。

类上有一个`initWithName:location:date:`方法，`BirdSighting`它是我的数据模型。上述方法被添加到数据控制器中，它只是将`BirdSighting`对象添加到`masterBirdSightingList`可变数组中。

我不明白的是，教程说当我看不到这个时，`BirdSighting`对象被发送到方法？`initWithName:location:date:`

*   这是因为方法参数`*`中的吗？`(BirdSighting *)`我知道这`*`是一个指向对象的指针，但它会创建一个新对象并调用其默认的 init 方法吗？仅仅因为我添加了`initWithName:location:date`类`BirdSighting`，它会自动成为我的默认`init`方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:47:46.360

那里没有魔法。你是对的。该行代码不会创建或初始化 BirdSighting 对象。

**添加：**

您可能比许多人更早地发现，Apple 代码和文档都不是完美的。有时他们甚至有严重的问题。当你遇到不和谐时，最好相信你的直觉并做一些你自己的测试。

# java - 在 JFrame 上绘画而不扩展

> ID：13849184
> 
> 赞同：3
> 
> 时间：2012-12-12T21:42:56.360
> 
> 标签：java, swing, jframe, awt

我的应用程序不是面向 JFrame 的，它只使用一个用于输出。我只需要能够告诉它在这里画一个矩形，现在清除屏幕，几百次。为此，我在 main 中编写了以下代码，据我了解，它应该将整个 JFrame 清除为漂亮的蓝色背景色。

```
JFrame frame = new JFrame("Maze Master Premium Super-Deluxe V199.39");
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
int resolution = 20;
int frameWidth = horiz * resolution;
int frameHeight = vert * resolution;
frame.setMinimumSize(new Dimension(frameWidth, frameHeight));
frame.setSize(frameWidth, frameHeight);
frame.pack();
frame.setVisible(true);
frame.toFront();

Graphics g = frame.getGraphics();
g.setPaintMode();
g.setColor(Color.BLUE);
//Clear background
g.fillRect(0, 0, frameWidth, frameHeight);
frame.update(g); 
```

但是当我运行它时，JFrame 会以其默认的浅灰色背景颜色显示。我必须让我的类扩展 JFrame，还是使用 frame.update(g) 就足够了，而我只是遇到了其他问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T22:27:46.060

从您的问题来看，很难准确掌握您要达到的目标。你只是想改变框架的背景颜色或执行一些自定义绘画？？？

这`Graphics g = frame.getGraphics()`从来都不是一个好主意。除了`getGraphics`can return可能之外`null`，Java 中的图形是无状态的，这意味着您用来绘制的图形上下文可能会在绘制周期之间发生变化，您永远不应该依赖或维护对它的引用。

除了是错误的方法之外，a`JFrame`还包含许多组件，这些组件被渲染在它上面，所以即使这个方法有效，你也不会看到任何区别，因为框架实际上被其他组件覆盖（`JRootPane`并且它的内容窗格）

定制涂装应采用其中一种`Component`涂装方法进行。

以下示例使用多种技术来更改和更新框架的内容。

![在此处输入图像描述](../Images/e42dc2d50835aa4fd6a0d53ef5a18833.png)

首先，它用我们自己的组件替换了内容窗格。这始终是必需的，但因为我在框架上执行自定义绘画，所以这是最简单的。我本可以简单地将其添加`PaintPane`到框架中以获得类似的结果。

其次，我`setBackground`用来改变我的组件的背景。

第三，我重写`paintComponent`以便在我的组件上执行自定义绘制。

```
public class SimplePaint01 {

    public static void main(String[] args) {
        new SimplePaint01();
    }

    public SimplePaint01() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.setContentPane(new PaintPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class PaintPane extends JPanel {

        private int angle = 0;
        private Rectangle shape = new Rectangle(0, 0, 100, 100);

        public PaintPane() {
            setBackground(Color.RED);
            Timer timer = new Timer(16, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    angle += 5;
                    repaint();
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.start();
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();

            int x = ((getWidth() - shape.width) / 2);
            int y = ((getHeight() - shape.height) / 2);

            shape.x = x;
            shape.y = y;

            g2d.setColor(Color.BLUE);
            g2d.setTransform(AffineTransform.getRotateInstance(Math.toRadians(angle), x + (shape.width / 2), y + (shape.height / 2)));
            g2d.fill(shape);

            g2d.dispose();
        }

    }

} 
```

# javascript - 将物体沿直线从 A 点匀速移动到 B 点

> ID：13849185
> 
> 赞同：5
> 
> 时间：2012-12-12T21:42:57.060
> 
> 标签：javascript, canvas, trigonometry

**我知道这已经被问过几次了，但是我找不到真正有效的答案。有一个类似的，但速度会根据行驶的距离而变化。**

所以我的问题是我试图让一个物体（在这种情况下是一个玩家）以恒定的速度从 A 点到 B 点移动一条很长的直线。这是通过单击播放器并拖动到我希望他走到的位置来完成的，因此它可以在任何方向和任何距离上。

我有一些代码几乎可以工作，但玩家总是会稍微偏离路线，更何况他行进的距离越长。这是该代码：

```
window.addEventListener('mouseup', function(e) {
    selectedPlayer.moveX = e.pageX;
    selectedPlayer.moveY = e.pageY;
    movePlayer(selectedPlayer);
});

function movePlayer(player) {

    var xDistance = player.moveX - player.x;
    var yDistance = player.moveY - player.y;
    var travelDistance = Math.sqrt((xDistance * xDistance) + (yDistance * yDistance));
    var timeToTravel = travelDistance; //This may seem pointless, but I will add a speed variable later
    var playerAngle = Math.atan2(yDistance, xDistance) * (180 / Math.PI);
    var xRatio = Math.atan2(xDistance, travelDistance);
    var yRatio = Math.atan2(yDistance, travelDistance);

    //This function is called in another part of code that repeats it 60 times a second
    walkPlayer = function() {

        setTimeout(function(){
            player.x = player.moveX;
            player.y = player.moveY;
            selectedPlayer = undefined;
            walkPlayer = undefined;
        }, timeToTravel * 20)

        player.angle = playerAngle;
        player.x += xRatio;
        player.y += yRatio;
    };
} 
```

我希望这是有道理的，我只需要包含相关的代码部分。我认为我的问题可能在于 xRatio 和 yRatio 部分，但我无法弄清楚；我完全被难住了。

编辑：我想添加 playerAngle 使玩家面向拖动的方向，并且该部分工作正常。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T21:45:35.273

**[现场演示](http://jsfiddle.net/loktar/CajbL/)**

以下是获得所需工作所需的基础知识，

```
var tx = targetX - x,
    ty = targetY - y,
    dist = Math.sqrt(tx*tx+ty*ty),
    rad = Math.atan2(ty,tx),
    angle = rad/Math.PI * 180;;

    velX = (tx/dist)*thrust;
    velY = (ty/dist)*thrust;

player.x += velX
player.y += velY 
```

这是我不久前做的一个演示，听起来像您正在寻找的东西，我添加了单击功能，以便根据您的问题更改目标。

```
window.addEventListener('mouseup', function(e) {
    targetX  = e.pageX;
    targetY = e.pageY;
});

var ctx = document.getElementById("canvas").getContext("2d"),
    x = 300,
    y = 0,
    targetX = Math.random()*300,
    targetY = Math.random()*300,
    velX = 0,
    velY = 0,
    thrust = 5;

function draw(){   
    var tx = targetX - x,
        ty = targetY - y,
        dist = Math.sqrt(tx*tx+ty*ty),
        rad = Math.atan2(ty,tx),
        angle = rad/Math.PI * 180;;

    velX = (tx/dist)*thrust;
    velY = (ty/dist)*thrust;

    // stop the box if its too close so it doesn't just rotate and bounce
    if(dist > 1){
      x += velX;
      y += velY;
    }

    ctx.fillStyle = "#fff";
    ctx.clearRect(0,0,400,400);
    ctx.beginPath();
    ctx.rect(x, y, 10, 10);
    ctx.closePath();
    ctx.fill();

    ctx.fillStyle = "#ff0";
    ctx.beginPath();
    ctx.rect(targetX, targetY, 10, 10);
    ctx.closePath();
    ctx.fill();

    setTimeout(function(){draw()}, 30);   
}

draw(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T22:02:21.027

您的问题似乎是角度，`xRatio`而`yRatio`不是矢量坐标。这应该有效：

```
document.addEventListener('mouseup', function(e) {
    movePlayer(selectedPlayer, {x:e.pageX, y:e.pageY});
});

function movePlayer(player, target) {
    var start = {
            x: player.x,
            y: player.y,
            t: Date.now()
        },
        distance = Math.sqrt(distance.x*distance.x + distance.y*distance.y),
        time = distance; //This may seem pointless, but I will add a speed variable later
        difference = {
            x: target.x - player.x,
            y: target.y - player.y,
            t: time
        };

    player.angle = Math.atan2(distance.y, distance.x) * (180 / Math.PI);

    //This function is called in another part of code that repeats it 60 times a second
    walkPlayer = function(curTime) { // we need timing information here: Date.now()
        var elapsed = curTime - start.t,
            ratio = elapsed / difference.t;
        player.x = start.x + difference.x * ratio;
        player.y = start.y + difference.y * ratio;
        if (ratio >= 1) {
            player.x = target.x;
            player.y = target.y;
            // end calling of walkPlayer
        }
    };
} 
```

# sql - Oracle/Sybase SQL - 根据以前的记录获取价值（不是简单的 LAG）

> ID：13849192
> 
> 赞同：2
> 
> 时间：2012-12-12T21:43:26.690
> 
> 标签：sql, oracle, lag

我的数据组织如下：

```
Invoice_Id  Invoice_Line  Kit_Flag  Part_Number
----------  ------------  --------  -----------
AB12345               1    K        KT-1234A
AB12345               2    C        1234567
AB12345               3    C        1234568
AB12345               4    C        1234569
AB12345               5    C        1234560
AB12345               6    K        KT-1234C
AB12345               7    C        1234561
AB12345               8    C        1234562
AB12345               9    K        KT-1234Q
AB12345              10    C        5678901
AB12345              11    C        1234561
AB12345              12    C        1234562 
```

我试图在单个 Invoice_Id（K = Parent，C = Child）中从 Kit_Flag 为“K”的最后一行获取后续行的 Part_Number 值。为简单起见，我在此处仅列出了一个发票 ID。

因此，对于上面的数据，结果将如下所示：

```
Invoice_Id  Invoice_Line  Kit_Flag  Part_Number Parent_Part
----------  ------------  --------  ----------- ------------
AB12345               1    K        KT-1234A    KT-1234A
AB12345               2    C        1234567     KT-1234A
AB12345               3    C        1234568     KT-1234A
AB12345               4    C        1234569     KT-1234A
AB12345               5    C        1234560     KT-1234A
AB12345               6    K        KT-1234C    KT-1234C
AB12345               7    C        1234561     KT-1234C
AB12345               8    C        1234562     KT-1234C
AB12345               9    K        KT-1234Q    KT-1234Q
AB12345              10    C        5678901     KT-1234Q
AB12345              11    C        1234561     KT-1234Q
AB12345              12    C        1234562     KT-1234Q 
```

在 Excel 中，这可以通过“=If(C2="K",C3,D2)" 之类的方式实现，这实际上是我们暂时必须解决的问题，但我正在尝试将其自动化。

该表在 Oracle 9i 和 Sybase 上都有，但 Sybase 实例没有分析功能。

我不认为这会起作用（而且它没有），但从概念上讲，它显示了我正在尝试做的事情：

```
select
  t.Invoice_Id, t.Invoice_Line, t.Kit_Flag, t.Part_Number,
  case
    when Kit_Flag = 'K' then Part_Number
    else lag(Parent_Part, 1) over (partition by Invoice_Id order by Invoice_Line)
  end as Parent_Part
from Invoice_Data t 
```

欢迎任何建议和/或指导。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T21:52:22.827

一种方法是使用嵌套排名函数。首先，为所有获得一个值的事物分配一个常量值（使用`max() over`），然后将其用作分区。

```
select t.Invoice_Id, t.Invoice_Line, t.Kit_Flag, t.Part_Number,
       max(KitPart) over (partition by invoice_id, KitNum) as Parent_Part
from (select t.*,
             sum(isKit) over (partition by InvoiceId order by InvoiceLine) as KitNum
      from (select t.Invoice_Id, t.Invoice_Line, t.Kit_Flag, t.Part_Number,
                   (case when Kit_Flag = 'K' then 1 else 0 end) as IsKit,
                   (case when Kit_Flag = 'K' then Part_Number end) as KitPart
            from Invoice_Data t
           ) t
     ) t 
```

# map - 是否可以在 Ada 中实例化具有标记记录类型的 Map 容器以使用多态性？

> ID：13849205
> 
> 赞同：2
> 
> 时间：2012-12-12T21:44:00.347
> 
> 标签：map, polymorphism, containers, ada

我想要一个包含标记记录类型的地图容器，所以我编写了这个程序，但 GNAT 编译器没有编译它：

```
type http_response is tagged private;
package map_package is new Ada.Containers.Ordered_Maps
    (Key_Type => Unbounded_String,
     Element_Type => http_response); 
```

我也有那些编译错误：

```
http.ads:47:04: instantiation error at a-coorma.ads:199
http.ads:47:04: premature use of type with private component
http.ads:47:105: premature use of private type 
```

实际上，我想使用多态性，因为我的地图将包含其他从 http_response 类型继承的标记记录类型。

如何更正此代码？

如果我像这样更正代码：

```
package map_package is new Ada.Containers.Ordered_Maps
    (Key_Type => Unbounded_String,
     Element_Type => http_response'Class); 
```

我得到这种错误：

```
http.ads:47:04: instantiation error at a-coorma.ads:195
http.ads:47:04: class-wide subtype with unknown discriminants in component declaration
http.ads:47:04: instantiation error at a-coorma.ads:199
http.ads:47:04: premature use of type with private component
http.ads:47:118: premature use of type with private component 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T02:14:45.070

正如[*3.3 对象和命名数字*](http://www.adaic.org/resources/add_content/standards/05rm/html/RM-3-3.html#I1428)中提到的，“一个类范围的子类型被定义为具有未知的判别式，因此是一个不确定的子类型。” 取而代之的是[`Ada.Containers.Ordered_Maps`](http://www.adaic.org/resources/add_content/standards/05rm/html/RM-A-18-6.html)，您可以实例化[`Ada.Containers.Indefinite_Ordered_Maps`](http://www.adaic.org/resources/add_content/standards/05rm/html/RM-A-18-13.html).

# wordpress - wordpress 自定义预置模板

> ID：13849206
> 
> 赞同：1
> 
> 时间：2012-12-12T21:44:09.887
> 
> 标签：wordpress, templates

我想创建一个具有预先固定 css 的页面模板。假设我将其命名为 page-sevencol.php 然后我知道内容将具有固定的宽度和特定的样式等等。我的页面有不同的布局，这就是我需要创建这些模板的原因。

可能吗？如果是这样怎么办？我查看了 wp 法典，似乎没有答案。请花一点时间来帮助我。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T21:54:56.030

您似乎只需要一组有限的模板。问题是：你想自动应用它们吗？基本上，有两种技术可以将模板应用于 WordPress 中的页面（或帖子或自定义帖子等）。 **第一种方法：**使用模板命名约定将模板自动应用于同名的页面（或帖子）。在这种情况下，您创建一个页面 page-mynewpage.php，该模板将自动应用于您的名为 /mynewpage/ 的页面。
**第二种方法：**通过创建一个页面（比如：template1.php）并在页面顶部将其声明为带有注释的模板来创建模板：

```
/**
 * Template Name: Template1
*
*/ 
```

现在可以在 WordPress 管理员中选择此模板以应用于任何页面：

![WordPress 管理中的模板下拉菜单](../Images/30630c90511894b4185af79d29a48274.png)

因此，如果**A)**您只需要一组有限的模板 & **B)**可以在管理员中按页面选择它们，那么这就是您的解决方案。您只需要根据需要创建尽可能多的页面模板，不要忘记包含将它们声明为模板并每次使用不同名称的注释。

如果您需要动态应用模板，那么我们需要有关用于选择每个模板的逻辑的更多信息...

**编辑：**就是这样，亚伯（只需阅读您的评论）。您的页面主要由 4 个元素生成：header.php、sidebar.php、footer.php 和另一个用于生成内容的页面，但此页面会根据您在站点中的位置而有所不同。如果您在一个页面上，默认情况下它将是 page.php。如果您正在阅读帖子，WordPress 将默认使用 single.php。

要应用所有不同的模板，只需在主题文件夹中打开 page.php。以另一个名称保存它，例如 page-template7cols.php。像我刚才解释的那样插入评论，这样下次您创建新页面时，此模板将显示在您的管理员中。以您想要的方式调整它（更改 HTML / PHP 并因此调整页面内容的显示方式）。对其他 9 个模板执行相同操作。

然后，每次创建新页面时，只需从下拉列表中选择正确的模板开始（请参阅之前的屏幕截图）。例如，每当您对 page-template7cols.php 进行更改时，更改将反映在您为其选择此模板的所有页面上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T22:31:36.710

```
/**
  Template Name: Template1
 */
  <?php get_header(); ?>
   <div class="content-wrap sevencol clearfix">
<div class="row clearfix">

    <div class="content">
        <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
         <h1><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h1>

              <?php the_content(); ?>

               <?php endwhile; endif; ?>
                     </div>
    <?php get_sidebar(); ?>
      <?php get_footer(); ?> 
```

# css - Twitter 引导字形图标未加载

> ID：13849209
> 
> 赞同：5
> 
> 时间：2012-12-12T21:44:26.847
> 
> 标签：css, twitter-bootstrap

这是一个如此愚蠢的问题，但无论如何我们都在这里。这是我的基本结构

```
/Content/twitter/bootstrap.css
/img/glyphicons-halflings.png 
```

所以 Content 和 img 都在我的根目录中，所以要从我的 bootstrap.css 文件中引用字形图像，我有这样的：

```
background-image: url("../../img/glyphicons-halflings.png"); 
```

有没有出现？

是否有一个 .js 文件我需要检查以确保它在正确的目录中查找？

哦，这是我试图渲染图像的片段：

```
 <td>
                @if (item.Something == true)
                {
                    <i class="icon-ok"></i>
                }
                else
                {
                    <i class="icon-remove"></i>
                }
            </td> 
```

**更新**

这个问题有很多观点，所以我想我会分享我的两分钱。请注意，由于发布问题 BS 3.0 现已发布，因此结构可能不同和/或不相关，尚未查看。但是，如果您来到这里，请记住这是 3.0 之前的 Bootstrap。

我已经开始做的一件事是让我不必搞砸任何事情，就是将整个引导文件夹带入项目，而不仅仅是 css/js/img 文件夹。我通常将它放在我的根脚本文件夹中，其结构如下：

```
/scripts
     /libs
          /boostrap <-- the unzipped folder you get when downloading
              /js
              /css
              /img 
```

这可能会打破一些约定，因为“脚本”文件夹实际上应该只保存脚本。我证明它是合理的，因为我将脚本文件夹用于脚本（惊喜！）和第三方库（因此是 libs 文件夹）。你得到的大多数第三方组件至少有 js 和 css 文件，我只是懒得手动分离它们，因为一些库（如引导程序）依赖于其他文件的位置。

无论如何，我的两分钱，如果您想更改文件位置，请查看下面的答案。所有很棒的提示，谢谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T05:55:29.500

您当前的代码在技术上应该可以工作，并且不需要任何*js*文件..

`background-image: url("../../img/glyphicons-halflings.png");`对于像这样的目录结构来说非常好

```
/Content/twitter/bootstrap.css
/img/glyphicons-halflings.png 
```

您可以尝试下面的代码以确保一切正常..

```
<td><i class="icon-ok"></i></td> 
```

如果这也失败了，请仔细检查*glyphicons-halflings.png*是否存在于您所说的路径中以及足够的权限..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-15T17:48:41.480

我今天遇到了同样的问题，这让我很困惑。正如 Rishi 上面所说，它应该可以工作，但它没有。我三重检查了我的目录结构。然后最终我意识到它根本没有击中我的 glyphicons 文件。我删除了这条有问题的 css 行：

```
<link href="css/font-awesome.min.css" rel="stylesheet"> <!-- remove me --> 
```

一切都很好！

请记住，如果您要包含 font-awesome，那么它将查找字体文件而不是 glyphicons 文件。所以要么添加适当的字体，要么只使用普通的旧引导程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T21:51:41.100

尝试这个

`background-image: url("/img/glyphicons-halflings.png");`

我将路径从相对路径更改为绝对路径。通过在路径的开头添加斜杠，它从您网站的根目录开始。

让我知道这是否适合你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T22:47:01.800

我遇到了同样的问题，它与您的字形图标的来源或位置无关。这是一个种族问题。不幸的是，我无法告诉你它在表格中表现得这样的原因......但我知道在我的 dataTables 中发生了这种情况，我的解决方法是在页面和表格加载后通过附加 html 添加字形图标。它并不完美，但它有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-12T13:48:47.507

1.  从 img 文件夹复制 glyphicons-halflings.png 和 glyphicons-halflings-white.png。
2.  在 css 文件夹中创建一个名为“img”的子文件夹。
3.  将 glyphicons-halflings.png 和 glyphicons-halflings-white.png 粘贴到 css->img 文件夹中。
4.  打开您的引导样式表，例如让我们在文本编辑器中说 bootstrap.css。
5.  查找 (Ctrl+F) “图标”。6.你会找到课程。

    ```
    [class^="icon-"],
    [class*=" icon-"] {
    display: inline-block;
    width: 14px;
    height: 14px;
    margin-top: 1px;
    *margin-right: .3em;
    line-height: 14px;
    vertical-align: text-top;
    background-image: url("../img/glyphicons-halflings.png");
    background-position: 14px 14px;
    background-repeat: no-repeat;
    } 
    ```

6.  将背景图片网址更改为

    ```
    background-image: url("img/glyphicons-halflings.png"); 
    ```

7.  找到“glyphicons-halflings-white.png”
8.  也改变它的路径。还有宾果游戏！你在上面。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-05T06:08:04.983

仅当字体文件夹中有以下文件时，才会加载字形图标。 `glyphicons-halflings-regular.eot`, `glyphicons-halflings-regular.svg`,`glyphicons-halflings-regular.ttf`和`glyphicons-halflings-regular.woff`.

下载引导程序的`theme template`或`carousel template`，您会在那里找到这些文件。

要知道将这些文件放在您的网络文件夹中的什么位置，只需运行[Link Checker](http://linkchecker.sourceforge.net/)或[Xenu 的链接侦探](http://home.snafu.de/tilman/xenulink.html)，它就会告诉您放置这些文件的位置。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-18T22:58:32.620

这可能是一个旧帖子，但我希望它可以帮助其他人寻找这个问题的答案。

我下载的文件包含一个**下划线**，但 CSS 正在寻找一个在字形和半身人之间有**破折号的文件。**更改其中一个并确保将其上传到服务器上的正确文件夹。

# java - JAX-RS/Jersey 响应 406 没有实体，但 RFC 2616 推荐一个

> ID：13849210
> 
> 赞同：2
> 
> 时间：2012-12-12T21:44:28.517
> 
> 标签：java, http-headers, jersey, jax-rs, rfc

我正在使用 Jersey 从事 Java Web 服务。我想了解如何处理以下问题：

显然，[JAX-RS (JSR 311)](http://download.oracle.com/otn-pub/jcp/jaxrs-1.1-mrel-eval-oth-JSpec/jax_rs-1_1-mrel-spec.pdf?AuthParam=1355345006_d62ab40be00174f091ae132f0b4d724f)对于每个状态为 406 的情况，都说响应没有实体。例如，在 3.7.2 请求匹配部分中，标识将处理请求的方法：

> 至少有一种可接受的响应实体主体媒体类型是受支持的输出数据格式（参见第 3.5 节）。如果没有方法支持可接受的响应实体主体媒体类型之一，则实现必须生成带有不可接受的响应（HTTP 406 状态）且没有实体的 WebApplicationException。必须按照 3.3.4 节中的描述处理异常。

然而，RFC 2616 推荐了另一件事：

> 10.4.7 406 不可接受
> 
> 请求标识的资源只能根据请求中发送的接受头生成具有不可接受的内容特征的响应实体。
> 
> 除非它是一个 HEAD 请求，否则响应应该包含一个实体，该实体包含一个可用实体特征和位置的列表，用户或用户代理可以从中选择最合适的一个。实体格式由 Content-Type 标头字段中给出的媒体类型指定。根据用户代理的格式和能力，可以自动选择最合适的选项。但是，本规范没有为这种自动选择定义任何标准。
> 
> ```
>  Note: HTTP/1.1 servers are allowed to return responses which are
>   not acceptable according to the accept headers sent in the
>   request. In some cases, this may even be preferable to sending a
>   406 response. User agents are encouraged to inspect the headers of
>   an incoming response to determine if it is acceptable. 
> ```

那么，我应该为 Jersey 做什么，包括一个包含 406 场景中可用实体特征列表的实体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-22T17:11:43.387

回答我自己的问题......我在 Jersey 项目中打开一张票来解决这个问题。Jersey 社区迅速回答我说 Java Spec to Webservice 已经错了。应该在 JAX 项目（Java Spec to Web Services）中打开一个新的票据，以便在未来的 Jersey 中实现正确的行为。

[https://java.net/jira/browse/JAX_RS_SPEC-363](https://java.net/jira/browse/JAX_RS_SPEC-363)

但是，检查 JAX 项目可以找到 63 个未分配的票证 (100%)。

[https://java.net/jira/browse/JAX_RS_SPEC/fixforversion/14716](https://java.net/jira/browse/JAX_RS_SPEC/fixforversion/14716)

“所以呢？”

这个 Jira 的最后一次活动是在 2013 年 11 月。最后一次开票是在 2013 年 5 月。第一次是在 2009 年 1 月。在不久的将来，这个问题几乎不会有任何变化。

# java - 什么是未经检查的强制转换警告以及在这种情况下 java 期望做什么

> ID：13849211
> 
> 赞同：2
> 
> 时间：2012-12-12T21:44:29.007
> 
> 标签：java, xml-rpc

我是`C/C++`程序员，也是java新手。我有以下代码（XML RPC 服务器/客户端应用程序的一部分），当遵守`-Xlint`选项时，我收到警告。

*代码：*

```
XmlRpcClientConfigImpl config = new XmlRpcClientConfigImpl();
config.setServerURL(new URL("http://localhost:8081"));
config.setEnabledForExceptions(true);
config.setEnabledForExtensions(true);
XmlRpcClient client = new XmlRpcClient();
client.setConfig(config);
Object[] params = new Object[0];
//execute returns java.lang.Object . getProcInfo has return type ArrayList<ProcInfo> 
ArrayList<ProcInfo> list = (ArrayList<ProcInfo>)client.execute(config,"test.getProcInfo", params); 
```

*警告：*

`warning: [unchecked] unchecked cast`

我不明白的是为什么首先会有警告。为什么当我将它转换为我从其他函数返回的同一个对象时需要检查它，让我们说即使有需要，编译器本身也不能进行这种检查。

我该如何解决这个警告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T21:45:50.613

未经检查的强制转换警告意味着，您正在尝试从原始类型强制转换为泛型类型。

您的`execute`方法返回 Object，但您正在转换为`ArrayList<ProcInfo>`泛型类型，因此编译器警告您执行的返回类型不是您所期望的。

有两种方法可以克服这个警告（我知道）：

1）添加`@SuppressWarnings` [注释](http://docs.oracle.com/javase/tutorial/java/javaOO/annotations.html)

2) 从 ArrayList 中删除泛型。

这些方法将消除编译器错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T22:16:36.150

unchecked cast 警告意味着由于Java 的类型擦除（泛型类型参数在运行时不存在，因此在转换时无法检查），即使转换成功，也不知道该类型是否与声明的泛型类型真正匹配。

为了消除这种情况，而不是强制转换`ArrayList<ProcInfo>`为：

```
List<?> list = (List<?>)client.execute(config,"test.getProcInfo", params); 
```

这表示类型“具有某些元素类型的某些列表实现”。然后，在访问列表的元素时，将它们转换为`ProcInfo`：

```
for(Object element : list){
  final ProcInfo info = (ProcInfo) element;
  // do something with info
} 
```

两个演员都不会引起警告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T21:50:17.260

如果您只想忽略警告并确定它是安全的，请在给出错误的行上方写上@SuppressWarnings("unchecked")。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T21:54:51.537

`execute()`方法返回类型是，但您将`Object`其转换为更具体的类型`ArrayList<ProcInfo>`。编译器警告您，方法签名不能保证它实际上是要转换的类型的对象。

如果您确信实现将返回您期望的类型，您可以通过将此注释添加到进行强制转换的方法来告诉编译器不要发出警告：

```
@SuppressWarnings("unchecked") 
```

# symfony - 表单中的实体字段数组类型

> ID：13849213
> 
> 赞同：0
> 
> 时间：2012-12-12T21:44:30.403
> 
> 标签：symfony

我有一个实体

```
class Icon
{
...

     /**
     * @var array $padding
     *
     * @ORM\Column(name="padding", type="array")
     */
    private $padding;

    /**
     * Set padding
     *
     * @param array $padding
     * @return Icon
     */
    public function setPadding($padding)
    {
        $this->padding = $padding;
        return $this;
    }

    /**
     * Get padding
     *
     * @return array
     */
    public function getPadding()
    {
        return $this->padding;
    }

...
} 
```

, 一个图标形式

```
<?php

namespace Acme\ExBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class IconPaddingType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('padding', new PaddingType())
        ;
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'Acme\ExBundle\Entity\Icon'
        ));
    }

    public function getName()
    {
        return 'icontype';
    }
} 
```

和一个填充形式

```
<?php

namespace Acme\ExBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class PaddingType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('top', 'integer', array('data' => 0))
            ->add('right', 'integer', array('data' => 0))
            ->add('bottom', 'integer', array('data' => 0))
            ->add('left', 'integer', array('data' => 0))
        ;
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
    }

    public function getName()
    {
        return 'paddingtype';
    }
} 
```

如果我创建或更新图标`IconType`

并填充填充，图标按我的预期保存。

但在此之后，当我再次编辑图标时，

`PaddingForm`不使用`icon.padding`值

填充表单（顶部、左侧、右侧、底部再次为“0”）。

你如何`PaddingForm`用`icon.padding`值填充嵌入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:29:50.983

我认为这`data`会覆盖构建表单时传递的数据。

我建议将`0`实体中的值设置为默认值（直接在属性中或在 中）并从表单中`__construct`删除这些属性。`data`

```
class IconPadding{
    ....
    public function __construct(){
        $this->left = $this->rigth = $this->bottom = $this->top = 0;
    }
    ...
} 
```

# php - 它不会在成功消息中输出所有变量

> ID：13849214
> 
> 赞同：0
> 
> 时间：2012-12-12T21:44:31.123
> 
> 标签：php, mysqli

下面我有一个成功工作的 mysqli 查询；

```
$courseid = (isset($_POST['courses'])) ? $_POST['courses'] : ''; 
$moduleid = (isset($_POST['moduleid'])) ? $_POST['moduleid'] : '';  
$moduleno = (isset($_POST['moduleno'])) ? $_POST['moduleno'] : '';  
$modulename = (isset($_POST['modulename'])) ? $_POST['modulename'] : '';

$query = "SELECT cm.CourseId, CourseNo, CourseName, cm.ModuleId 
FROM  Course c 
INNER JOIN Course_Module cm 
ON
c.CourseId = cm.CourseId
JOIN Module m
ON
cm.ModuleId = m.ModuleId
WHERE cm.CourseId = ? AND cm.ModuleId = ?";
// prepare query
$stmt=$mysqli->prepare($query);
// You only need to call bind_param once
$stmt->bind_param("ii", $courseid, $moduleid);
// execute query
$stmt->execute(); 
// get result and assign variables (prefix with db)
$stmt->bind_result($dbCourseId, $dbCourseNo, $dbCourseName, $dbModuleId);
//get number of rows
$stmt->store_result();
$numrows = $stmt->num_rows(); 
```

我遇到的问题是在我的成功消息中。它能够输出`$moduleno`and`$modulename`变量，但它不会在成功消息中输出`$dbCourseNo`and变量。`$dbCourseName`为什么是这样？

```
if ($numrows == 1){

echo "<span style='color: green'>The following Module has been added into Course:" . $dbCourseNo . " - " . $dbCourseName . ":<br/>" . $moduleno . " - " . $modulename . "</span>";

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T00:49:38.457

您实际上从未获取过结果，并且我怀疑确实显示的变量在先前的操作中已经过时。

```
$stmt->execute(); 
// get result and assign variables (prefix with db)
$stmt->bind_result($dbCourseId, $dbCourseNo, $dbCourseName, $dbModuleId);

// Can't remember, but you may need to call store_result() before bind_result() ??
// maybe not...
$stmt->store_result();
$numrows = $stmt->num_rows();
// Fetch the row...
$stmt->fetch();
// Now your variables are populated. 
```

# php - WAMP上的登录系统

> ID：13849215
> 
> 赞同：0
> 
> 时间：2012-12-12T21:44:34.427
> 
> 标签：php, session

我将以前在不同网站上运行的一堆网站文件转移到 WAMP，一切正常，但现在由于我将其转移到 WAMP，一些登录 php 的东西根本不起作用。`session_destroy()`东西都不行，我也试过`session_unset()`。我在 WAMP 上遇到的另一件事是`unset($_SESSION);`. 似乎它甚至没有工作。你能帮忙的话，我会很高兴。

这是注销脚本

```
<?php 
session_start();
session_destroy();
header('Location:login.php');
?> 
```

这是登录脚本的一部分（会话注册部分）

```
// Register $myusername, $mypassword and redirect to file "login_success.php"
session_start('myusername');
session_start('mypassword');
$_SESSION['F_name'] = $row['First Name'];
$_SESSION['L_name'] = $row['Last Name'];
$_SESSION['Email'] = $row['Email'];
$_SESSION['Password'] = $row['_password'];
$_SESSION['id'] = $row['id']; 
```

我对该怎么做感到困惑。我尝试了一些事情，有些事情有些奏效，但是所有这些代码都曾经在不同的服务器上工作，而且都是相同的文件和所有内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:51:43.913

我找到了答案。是的，我的原始代码有点糟糕，所以我回到了默认文件，答案很简单。我发现我只需要调用会话，然后像这样设置变量：

```
session_start();
$_SESSION[SomeName'] = $SomeValue; 
```

当我想检查它是否已设置时

```
if(!isset($_SESSION['SomeName'])){} 
```

这对我来说很完美，也感谢大家的帮助。

# forms - 使用单个表单字段更新视图列

> ID：13849218
> 
> 赞同：1
> 
> 时间：2012-12-12T21:44:47.120
> 
> 标签：forms, views

感谢对此查询的任何有用答案。

我有一个 Apex 应用程序 (4.x)，我有一个视图： `PRICE_MODEL_CRA_V`

在视图中，我有以下适用的列：

```
COUNTRY
GRADE
SALARY 
```

在表格中，我有以下字段

```
:P16_COUNTRY (DROPDOWN)
:P16_GRADE (DROPDOWN)
:P16_SALARY (Number) 
```

在我的应用程序中，我有一个带有更新按钮的表单。我只是想让 Apex 更新视图中 salaray 列中的所有行，其中国家和等级匹配。

我有以下更新按钮的代码：

```
UPDATE PRICE_MODEL_CRA_V
SET SALARY = :P16_SALARY
WHERE COUNTRY = :P16_COUNTRY
AND GRADE = :P16_GRADE 
```

我在条件类型中选择的选项是：

项目/列表达式的值不为空（因为列中有值）

还尝试了 SQL 表达式，它不喜欢..说没有表达式。

如果有人可以提供帮助，再次感谢:)

# xcode - xcode 目标构建中的扫描构建链接器错误失败，但在 xcodebuild 中正确链接

> ID：13849221
> 
> 赞同：1
> 
> 时间：2012-12-12T21:45:02.823
> 
> 标签：xcode, xcode4, jenkins, continuous-integration, scan-build

所以我在使用 scan-build 构建 xcode 项目时遇到链接器错误

对于我正常的 xcodebuild 命令，我使用以下命令

> xcodebuild -target LibCoreMobileGHUnit -configuration Debug -sdk iphonesimulator5.0 clean build

它对链接器阶段使用以下选项

```
"/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ld"
-demangle
-dynamic
-arch i386
-all_load
-ios_simulator_version_min 5.0.0
-syslibroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk
-ObjC
-o /Users/ops/workspace/MobileFramework_Test_IOS_Client/LibCoreMobile/build/Debug-iphonesimulator/LibCoreMobileGHUnit.app/LibCoreMobileGHUnit
-lcrt1.o
-L/Users/ops/workspace/MobileFramework_Test_IOS_Client/LibCoreMobile/build/Debug-iphonesimulator
-filelist /Users/ops/workspace/MobileFramework_Test_IOS_Client/LibCoreMobile/build/LibCoreMobile.build/Debug-iphonesimulator/LibCoreMobileGHUnit.build/Objects-normal/i386/LibCoreMobileGHUnit.LinkFileList
-objc_abi_version 2
-no_implicit_dylibs
-lz
-framework QuartzCore
-framework UIKit
-framework Foundation
-framework CoreGraphics
-framework GHUnitIOS
-force_load /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/arc/libarclite_iphonesimulator.a
-framework Foundation
-lobjc
-lc++ /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/clang/4.1/lib/darwin/libclang_rt.profile_ios.a
-lSystem /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/clang/4.1/lib/darwin/libclang_rt.ios.a
-F/Users/ops/workspace/MobileFramework_Test_IOS_Client/LibCoreMobile/build/Debug-iphonesimulator
-F/Applications/Xcode.app/Contents/Developer/Library/Frameworks
-F/Users/ops/workspace/MobileFramework_Test_IOS_Client/LibCoreMobile/LibCoreMobileGHUnit
-F/Users/ops/workspace/MobileFramework_Test_IOS_Client/LibCoreMobile/ExternalFrameworks 
```

这是成功的

但是当我运行以下

```
scan-build -k -v -v -o ../clangScanBuildReports xcodebuild -target LibCoreMobileGHUnit -configuration Debug -sdk iphonesimulator5.0 clean build 
```

它与以下选项链接：

```
"/usr/llvm-gcc-4.2/libexec/gcc/i686-apple-darwin11/4.2.1/ld"
-dynamic
-arch i386
-all_load
-ios_simulator_version_min 5.0.0
-syslibroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk
-ObjC
-o /Users/ops/workspace/MobileFramework_Test_IOS_Client/LibCoreMobile/build/Debug-iphonesimulator/LibCoreMobileGHUnit.app/LibCoreMobileGHUnit
-lcrt1.o
-L/Users/ops/workspace/MobileFramework_Test_IOS_Client/LibCoreMobile/build/Debug-iphonesimulator
-filelist /Users/ops/workspace/MobileFramework_Test_IOS_Client/LibCoreMobile/build/LibCoreMobile.build/Debug-iphonesimulator/LibCoreMobileGHUnit.build/Objects-normal/i386/LibCoreMobileGHUnit.LinkFileList
-objc_abi_version 2
-no_implicit_dylibs
-lz
-framework QuartzCore
-framework UIKit
-framework Foundation
-framework CoreGraphics
-framework GHUnitIOS
-force_load /Users/ops/tools/checker-269/lib/arc/libarclite_iphonesimulator.a
-framework Foundation
-lobjc
-lc++
-lSystem
-F/Users/ops/workspace/MobileFramework_Test_IOS_Client/LibCoreMobile/build/Debug-iphonesimulator
-F/Applications/Xcode.app/Contents/Developer/Library/Frameworks
-F/Users/ops/workspace/MobileFramework_Test_IOS_Client/LibCoreMobile/LibCoreMobileGHUnit
-F/Users/ops/workspace/MobileFramework_Test_IOS_Client/LibCoreMobile/ExternalFrameworks 
```

所以这里有一些东西在运行 scan-build 时有所不同，它似乎使用了不同的链接器 **/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ld vs /usr/llvm- gcc-4.2/libexec/gcc/i686-apple-darwin11/4.2.1/ld**

在普通的 xcodebuild 中它有一个额外的选项 -demangle 并且在 scan-build 中它缺少两个 libclang 库

```
-lc++ /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/clang/4.1/lib/darwin/libclang_rt.profile_ios.a
-lSystem /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/clang/4.1/lib/darwin/libclang_rt.ios.a 
```

有谁知道我如何强制将库包含在“扫描构建”执行的链接器标志中。

# wcf - WinRT - 使用 WCF 服务

> ID：13849222
> 
> 赞同：1
> 
> 时间：2012-12-12T21:45:12.693
> 
> 标签：wcf, windows-runtime, named-pipes

我有一个 Windows 服务，它充当从外部源接收的数据的传播者。此 Windows 服务`ServiceHost`使用`NetNamedPipeBinding()`. `ServiceContract`还定义了`CallbackContract`

还有一个客户端 DLL 组件，它使用服务器并将解析的数据作为事件冒泡。收到来自服务器的回调后，数据会冒泡。

该代码适用于桌面应用程序，但是当我尝试在 WinRT 应用程序中引用客户端 DLL 时，我收到以下错误：

`The pipe name could not be obtained for the pipe URI: Access is denied. (5, 0x5)`

我认为这是因为 WinRT（据我所知）缺乏对命名管道的支持。

如何在 WinRT 中使用此类服务​​？我可以根据任何要求更改 WCF 端，但它必须作为 Windows 服务托管（它有非 WinRT 消费者）。通信总是发生在同一台机器内，轮询是最后的手段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-11T06:11:14.070

使用 HttpClient 类..这是唯一简单的解决方法，并且也可以。

```
var httpClient = new HttpClient();
httpClient.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("text/xml"));
httpClient.DefaultRequestHeaders.Add("SOAPAction", "http://ws.cdyne.com/WeatherWS/GetCityWeatherByZIP");
var soapXml = "<?xml version=\"1.0\" encoding=\"utf-8\"?><soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\"><soap:Body><GetCityWeatherByZIP xmlns=\"http://ws.cdyne.com/WeatherWS/\"><ZIP>23454</ZIP></GetCityWeatherByZIP></soap:Body></soap:Envelope>";
var response = httpClient.PostAsync("http://wsf.cdyne.com/WeatherWS/Weather.asmx", new StringContent(soapXml, Encoding.UTF8, "text/xml")).Result;
var content = response.Content.ReadAsStringAsync().Result; 
```

尝试这个？我希望这就是你要找的东西 - [https://quirkd.wordpress.com/2015/01/24/shorts-sumption-a-wcf-asmx-web-service-in-winrt/](https://quirkd.wordpress.com/2015/01/24/shorts-consuming-a-wcf-asmx-web-service-in-winrt/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:50:33.900

首先您需要切换到`basicHttpBinding`，因为不支持 net.namedpipe。

实际支持的是 BasicHttpBinding、NetTcpBinding、NetHttpBinding

其次，在 WinRT 中，有一个策略可以防止您通过网络堆栈访问*localhost 。*

要克服此安全策略，您需要为您的应用添加 LoopbackExempt。

```
CheckNetIsolation.exe LoopbackExempt -s 
```

请参阅 MSDN 上的详细信息：http: [//msdn.microsoft.com/en-us/library/windows/apps/Hh780593.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/Hh780593.aspx)

对于双工方式，任一 POLLING 都是一个选项（仅在应用程序聚焦时才有效）。

或使用推送通知：http: [//blogs.msdn.com/b/jimoneil/archive/2012/10/15/windows-8-notifications-push-notifications.aspx](http://blogs.msdn.com/b/jimoneil/archive/2012/10/15/windows-8-notifications-push-notifications.aspx)

# breeze - 并发检查/数据类型

> ID：13849230
> 
> 赞同：0
> 
> 时间：2012-12-12T21:45:51.463
> 
> 标签：breeze

在微风.debug.js 中：

```
function updateConcurrencyProperty(entity, property) {

...

else if (property.datatype === DataType.Binary) {
            // best guess - that this is a timestamp column and is computed on the server during save 
            // - so no need to set it here.
            return;
        } else {
            // this just leaves DataTypes of Boolean, String and Byte - none of which should be the
            // type for a concurrency column.
            // NOTE: thought about just returning here but would rather be safe for now. 
            throw new Error("Unable to update the value of concurrency property before saving: " + property.name);
        } 
```

我的模型上有时间戳。为什么不建议这样做？ASP.Net 上的 EF 教程使用时间戳。您会推荐什么作为 Concurrencycheck 列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:02:29.720

Not sure where we say it's not recommended; the only issue is that its not terribly portable across databases, SQLServer 'timestamp' columns are not actually time based, ... but they should still work as concurrency columns with breeze. If not, its likely a bug.

For more info: [datetime or timestamp](https://stackoverflow.com/questions/5989539/when-to-use-datetime-or-timestamp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T08:16:37.617

有一个涉及 SQL Server Timestamp 列的错误，现已在 v 0.76.4 中修复。...谢谢你找到这个，萨沙。

# python - 如果字符串可以由某些字符组成？

> ID：13849231
> 
> 赞同：0
> 
> 时间：2012-12-12T21:45:56.010
> 
> 标签：python

我想确定是否可以仅使用列表中的字符创建字符串。例如，

```
>>>acceptableChars = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i']
>>>print isAcceptable("abc")
True
>>>print isAcceptable("xyz")
False 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T21:49:57.977

制作一组`acceptableChars`：

```
>>> acceptableChars = set('abcdefghi') 
```

现在我们可以让 isAcceptable 检查其参数中的任何字符是否不`acceptableChars`使用集合减法：

```
>>> def isAcceptable(s):
    return set(s) <= acceptableChars
>>> isAcceptable("abc")
True
>>> isAcceptable("xyz")
False 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T22:07:10.677

Since your actual use case is:

> I'm using this to check if something is a hash (0-9, a-f), so any number of duplicates would be acceptable

How about this:

```
intvalue = int(possiblehash, 16) 
```

If this succeeds, that means it was a valid hex string—and you have the value, in case you need it. If it raises an exception, it wasn't a valid hex string. So:

```
try:
   intvalue = int(possiblehash, 16)
except Exception as e:
   print("That's not a hex string! Python says " + str(e)) 
```

If you want to use a different means to convert the hex string into some appropriate form instead of an integer, the exact same idea will apply:

```
try:
    binvalue = binascii.unhexlify(possiblehash)
except Exception as e:
   print("That's not a hex string! Python says " + str(e)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T21:49:59.370

```
def isAcceptable(text, acceptableChars=set("abcdefghi")):
    return all(char in acceptableChars for char in text) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T21:52:26.683

我能想到的最简单的方法：检查是否`yourString.strip('all your acceptable chars')`返回一个空白字符串。

```
def isAcceptable(text, acceptable='abcdefghi'):
    return text.strip(acceptable) == '' 
```

如果`strip`return `''`，那么其中唯一的字符也在`text`其中`acceptable`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T21:50:07.973

一种可能性是只循环字符串：

```
def isAcceptable(s):
    for c in s:
        if not isAcceptableChar(c):
            return False
    return True 
```

`isAcceptableChar`如何编写函数应该很明显。

当然，如果你对 Python 有更多了解，你可能会写：

```
def isAcceptable(s):
    return all(isAcceptableChar(c) for c in s) 
```

如果你对集合论有所了解，你可能会想出一个更高效、更简单的实现。

但首先要让基本的工作正常，然后考虑如何改进它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-12T21:50:21.497

```
In [52]: all(c in acceptableChars and acceptableChars.count(c)==want.count(c) for c in want)
Out[52]: True

In [53]: acceptableChars = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i']

In [54]: want = 'abc'

In [55]: all(c in acceptableChars and acceptableChars.count(c)==want.count(c) for c in want)
Out[55]: True

In [56]: want = 'xyz'

In [57]: all(c in acceptableChars and acceptableChars.count(c)==want.count(c) for c in want)
Out[57]: False 
```

但是，以下是执行此操作的更好方法：

```
def isAcceptable(text, chars):
    store = collections.Counter(chars)
    for char in text:
        if char not in store or not store[char]:
            return False
        store[char] -= 1
    return True 
```

# javascript - 使我的帐单和运输字段匹配

> ID：13849233
> 
> 赞同：0
> 
> 时间：2012-12-12T21:46:09.367
> 
> 标签：javascript

我想让我的账单字段自动匹配我的运输字段。我可以使它与文本值一起使用，但我不能自动填充无线电按钮。我正在使用此代码： http: [//jsfiddle.net/aDNH7/](http://jsfiddle.net/aDNH7/)我想将其保留在 Javascript 中。

```
<script>
function FillBilling(f) {
  if(f.billingtoo.checked == true) {
    f.billingname.value = f.shippingname.value;
    f.billingcity.value = f.shippingcity.value;
  }
    if(f.billingtoo.checked == false) {
    f.billingname.value = '';
    f.billingcity.value = '';
  }
}
</script>
<td bgcolor="eeeeee">
<b>Mailing Address</b>
<br><br>
<form>
Name:
<input type="text" name="shippingname">
<br>
City:
<input type="text" name="shippingcity"> 
```

/> 检查
/> 储蓄

```
<br>
<input type="checkbox" onclick="FillBilling(this.form)" name="billingtoo">
<em>Check this box if Billing Address and Mailing Address are the same.</em>
<p>
<b>Billing Address</b>
<br><br>
Name:
<input type="text" name="billingname">
<br>
City:
<input type="text" name="billingcity"> 
```

/> 检查
/> 储蓄

​</p>

```
BUT, I want to add this to the form for both the BILLING and SHIPPING. And then I want the SHIPPING one to match up with the BILLING one if I check the box.

<!-- <td colspan="2"><p>
  <label>
    <input type="radio" name="acct" value="checking" id="acct_0" <?php if ($user_info['acct'] == "checking"){ echo "checked='checked'"; }?>/>
    Checking</label>
  <br />
  <label>
    <input type="radio" name="acct" value="savings" id="acct_1" <?php if ($user_info['acct'] == "savings"){ echo "checked='checked'"; }?>/>
    Savings</label>
  <br />
</p>
</td>--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:53:28.490

Javascript：

```
document.getElementById("acct_0").setAttribute("checked", "checked"); 
```

[Jsfiddle在这里](http://jsfiddle.net/aDNH7/7/)

# asp-classic - 如何在经典asp中删除字符串中的字符直到某个点？

> ID：13849235
> 
> 赞同：0
> 
> 时间：2012-12-12T21:46:20.373
> 
> 标签：asp-classic, vbscript

我有一个字符串，它在任何时候都可能包含也可能不包含一个或多个 / 字符。我希望能够基于此字符串创建一个新字符串。新字符串将包括原始字符串中最后一个 / 之后的每个字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:53:10.497

听起来您想要来自 URL 的文件名。无论如何，它是相同的功能。关键是使用 InStrRev 函数找到第一个 / 字符，但从右边开始。这是功能：

```
Function GetFilename(URL)
   Dim I
   I = InStrRev(URL, "/")
   If I > 0 Then
      GetFilename = Mid(URL, I + 1)
   Else
      GetFilename = URL
   End If
End Function 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T07:30:52.950

把它分成几部分，得到最后一部分：

```
a = split("my/string/thing", "/")
wscript.echo a(ubound(a)) 
```

注意：字符串为空时不安全。

# php - PHP & SQL Server - 字段名称被截断

> ID：13849236
> 
> 赞同：24
> 
> 时间：2012-12-12T21:46:25.010
> 
> 标签：php, sql-server, sql-server-2008-r2, odbc

以下是相关代码：

```
function connect(){
    // DB credentials and info defined here....
    $connection = odbc_connect("DRIVER={SQL Server Native Client 11.0}; Server=$server; Database=$db;", $loginname, $loginpass);
    return $connection;
}

function odbc_fetch_results($stmt, &$results) {
    $numrows = odbc_num_rows($stmt);
    $row = odbc_fetch_array($stmt);
    print_r($row); // Prints: Array ( [MEASUREMENT_UNI] => kg)
    if($row){
         $results = array ($row);
         while( $row = odbc_fetch_array($stmt)){
            array_push($results, $row);
         }
    }
    return $numrows;
}

$sql = "select * from measurements where ID=$id";
$stmt = executeSQL($conn,$sql);
$nrows = odbc_fetch_results($stmt, $results);
odbc_free_result($stmt);
print_r($result[0]); // Prints: Array ( [0] => Array ( [MEASUREMENT_UNI] => kg) ) 
```

结果应该包含一个名为的列`MEASUREMENT_UNIT`（当我做一个`print_r`我可以验证时）被截断`MEASUREMENT_UNI`为只有 15 个字符。最后一个字母`T`被剪掉了。

我还尝试了使用SQL Server 数据库上的*不同*表和*不同*列的查询作为测试，以确保我正在使用的特定表或列没有任何奇怪的设置。我验证了不同的表/列会发生同样的事情：当我运行上面的选择查询时，列名被截断为最多 15 个字符。

我还尝试了一个选择，它指定了字段名称，`select MEASUREMENT_UNIT from from measurements where ID=$id`而不是，`select *`但这也不能解决问题。

我在这里看到了其他类似的帖子，但它们似乎都表明我应该能够获得至少 30 个字符，而不是我看到的 15 个字符的限制。

为什么列名被截断为 15 个字符？

**编辑**：连接到 MySQL 服务器数据库似乎没有导致同样的问题。MySQL 表中的 DB 列名没有被截断，这让我相信这不是 ODBC 插件的问题。

```
$connection = odbc_connect("DRIVER={MySQL};Server=$server; Database=$db;", $loginname, $loginpass);
$sql = "select * from measurements where ID=$id";
$stmt = executeSQL($conn,$sql);
$nrows = odbc_fetch_results($stmt, $results);
odbc_free_result($stmt);
print_r($result[0]); // Prints CORRECTLY: Array ( [0] => Array ( [MEASUREMENT_UNIT] => kg) ) 
```

请注意，上述两个代码部分都在同一服务器上的同一文件中使用相同的 PHP + ODBC 安装进行了测试。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-19T04:09:47.000

显然问题出在 ODBC 上。PHP 中有一个错误，其中列名被截断为 31 个字符，解决此问题的唯一方法是重新编译 PHP，更改`name`in的数组长度`/ext/odbc/php_odbc_includes.h`（通常为 32，但显然在您的情况下为 16），但这并未证明要么安全，要么不安全。转到[此处](https://bugs.php.net/bug.php?id=44003)和[此处](https://bugs.php.net/bug.php?id=30043)以查看有关此的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-30T04:56:27.963

问题肯定出在 Microsoft ODBC 驱动程序版本 11 上，并且已在[ODBC Driver 13 Preview for SQL Server](https://msdn.microsoft.com/en-us/library/hh568451(v=sql.1).aspx)中得到修复。

我发现这是因为我的开发机器运行 ubuntu 14.04 并安装了驱动程序 13 预览版工作正常，但是当我部署到运行 RHEL 7 和驱动程序 11 的生产服务器时，由于列名被截断为 15 个字符，各种破坏随之而来。

Microsoft 的文档对 Linux 的支持乏善可陈，所以如果您正在运行 ubuntu，那么这里是安装它的[要点](https://gist.github.com/admonkey/347c85fd4b5d45ac109a)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T15:07:37.693

永久的解决方案是按照 PHP 错误线程中的建议重新编译您的 PHP，或者尝试更新到较新的 PHP 版本。

您可以通过有选择地将选择中的列重命名为较短的列来解决此问题：

```
$sql = "SELECT measurement_unit AS measure_unit, * FROM measurements WHERE ID=$id";
// now in your array you will have new index called "measure_unit" 
```

# php - 对另一列不同的另一列的值求和

> ID：13849238
> 
> 赞同：3
> 
> 时间：2012-12-12T21:46:45.177
> 
> 标签：php, mysql, sum, distinct

嗨 StackOverFlow 成员

> 报告 = 表名。

**数据库**

```
CREATE TABLE `reports` (
  `id` int(11) NOT NULL auto_increment,
  `report_day_name` varchar(20) NOT NULL,
  `report_day` varchar(20) NOT NULL,
  `report_month` varchar(20) NOT NULL,
  `report_year` varchar(20) NOT NULL,
  `report_result_number` varchar(20) NOT NULL,
  `report_result_text` varchar(20) NOT NULL,
  `report_since` varchar(20) NOT NULL,
  `report_date` varchar(20) NOT NULL,
  `catid` int(11) NOT NULL,
  `subjectid` int(11) NOT NULL,
  `userid` int(11) NOT NULL,
  `groupid` int(11) NOT NULL,
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=78 ;

INSERT INTO `reports` VALUES (73, 'day', '14', '1', '1434 h', '5', 'rate', '1234567890', '1434-1-14', 1, 132, 33, 35);
INSERT INTO `reports` VALUES (74, 'day', '12', '2', '1435 h', '4', 'rate', '1234567890', '1434-2-12', 2, 136, 36, 35);
INSERT INTO `reports` VALUES (75, 'day', '14', '1', '1434 h', '2', 'rate', '1354488730', '1434-1-14', 1, 132, 33, 35);
INSERT INTO `reports` VALUES (76, 'day', '12', '2', '1435 h', '4', 'rate', '1354488730', '1434-2-12', 2, 137, 36, 35);
INSERT INTO `reports` VALUES (77, 'day', '12', '2', '1435 h', '1', 'rate', '1354488730', '1434-2-12', 2, 134, 33, 35); 
```

这是数据库表：

```
id  report_result_number    subjectid   userid
73  5                       132         33
74  4                       136         36
75  2                       132         33
76  4                       137         36
77  1                       134         33 
```

我想要`SUM(reports.report_result_number) where (reports.subjectid) is DISTINCT`

当我运行这段代码时..

```
选择
  users.user_id, users.user_name, users.user_country, SUM(reports.report_result_number) AS AllTotal, COUNT(DISTINCT reports.subjectid) AS TotalSubjects
从
  用户
  INNER JOIN 报告 users.user_id = reports.userid
通过...分组
  users.user_id
  订购方式
  全部 DESC 限制 4

```

它返回 AllTotal

```
user_id user_name   user_country    AllTotal    TotalSubjects
36       name         country        8 (correct)        2
33        name        country        8 (not correct)    2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:08:04.617

这个问题有几种解释。

~~如果您想要的是 `result_report_number`仅当给定的 subjectid 和 userid 只有一行时才包含在 SUM 聚合中的值（如果相同的 subjectid 有多行，您希望排除所有的 report_result_number那些行...~~

然后这样的事情会起作用：

```
SELECT u.user_id
     , u.user_name
     , u.user_country
     , SUM(s.report_result_number) AS AllTotal
     , COUNT(DISTINCT r.subjectid) AS TotalSubjects
  FROM users u
  JOIN reports r
    ON r.userid = u.user_id
  JOIN ( SELECT d.userid
              , d.subjectid
              , d.report_result_number
           FROM reports d
          GROUP
             BY d.userid
              , d.subjectid
         HAVING COUNT(1) = 1
       ) s
    ON s.userid = r.userid
 GROUP
    BY u.user_id
 ORDER
    BY AllTotal DESC
 LIMIT 4 
```

 ~~* * *

这只是对请求的结果集的一种（奇怪的）解释。样本数据和预期结果集将大大有助于阐明规范。

* * *

对于您添加到问题中的数据，此查询应该返回，例如

```
36 fee fi   8  2 
33 foo bar  1  2 
```

用户 33 有两行的 subjectid 值为 132，因此这些行的 report_result_number 从 SUM 中排除。subjectid 有两个不同的值（132 和 134），因此我们返回 :distinct: count of 2。

* * *

~~如果您要求 SUM 仅在给定用户的 subjectid 没有重复值的情况下返回值...~~

 ~~```
SELECT u.user_id
     , u.user_name
     , u.user_country
     , IF(COUNT(DISTINCT r.subjectid) = COUNT(r.subjectid)
         ,SUM(r.report_result_number)
         ,NULL
       ) AS AllTotal
     , COUNT(DISTINCT r.subjectid) AS TotalSubjects
  FROM users u
  JOIN reports r
    ON r.userid = u.user_id
 GROUP
    BY u.user_id
 ORDER
    BY AllTotal DESC
 LIMIT 4 
```~~  ~~哈桑说......“如果有重复的值 [of subjectid for a given userid]，请获取其中一个”

只需从别名为`s`. 这将返回一行的 report_result_number 的值。（从哪个“匹配”行返回值将是任意的：

```
SELECT u.user_id
     , u.user_name
     , u.user_country
     , SUM(r.report_result_number) AS AllTotal
     , COUNT(DISTINCT r.subjectid) AS TotalSubjects
  FROM users u
  JOIN ( SELECT d.userid
              , d.subjectid
              , d.report_result_number
           FROM reports d
          GROUP
             BY d.userid
              , d.subjectid
       ) r
    ON r.userid = u.user_id
 GROUP
    BY u.user_id
 ORDER
    BY AllTotal DESC
 LIMIT 4 
```

要使结果集可重复，始终获得最低或最高值，您可以添加一个聚合函数来指定要返回的值。

代替...

```
 , d.report_result_number 
```

和...

```
 , MAX(d.report_result_number)  AS report_result_number 
```

使用 MAX() 聚合，这将返回：

```
36 fee fi   8  2
33 foo bar  6  2 
```

（对于subjectid = 132 userid = 33，查询将获得'5'的值，并且对于相同的subjectid，将省略'2'的值。）没有MAX聚合，查询可以有效（并且任意）返回一个' 3'代替'6'。（它可以包括“5”或“2”，并省略另一个。）

# [SQL小提琴在这里](http://sqlfiddle.com/#!2/4911b/1)

# [SQL Fiddle 包括此处的 MAX 聚合](http://sqlfiddle.com/#!2/4911b/3)

* * *

**问：**我如何在您的代码中使用 (where report_month = 'number')？

**A：**在内联视图中，在 FROM 子句之后，GROUP BY 子句之前添加 WHERE 子句。替换这个：

```
 FROM reports d
      GROUP 
```

与例如

```
 FROM reports d
      WHERE d.report_month = 'number'
      GROUP 
```

只有满足指定谓词的行才会被返回。~~~~

# backbone.js - 删除el时如何渲染视图？

> ID：13849240
> 
> 赞同：0
> 
> 时间：2012-12-12T21:46:55.183
> 
> 标签：backbone.js

在第一次请求期间加载视图时，将根据需要将集合添加到视图中：

```
 showMainpage: function() {
      console.log('show mainpage');
      var sidebar = new SidebarView();

      $("#maincontent").html(new SimpleItemsView().render().el);
    }, 
```

使用 SimpleItemsView：

```
 var SimpleItemsView = Backbone.View.extend({
    el: $("#overview"),
    tagName: "tbody", 
```

但是，当 DOM 发生变化，#maincontent 部分发生变化时，#overview 元素就无法再解析了，见：

![概览消失](../Images/9154ef889c434ea3a0f92fe16e7f4312.png)

如何重新渲染#overview 部分？该项目也在这里：[https ://github.com/mulderp/backbone-require-test/blob/master/public/js/app.js#L31](https://github.com/mulderp/backbone-require-test/blob/master/public/js/app.js#L31)

# node.js - 为什么护照不适用于 cookieSession()？

> ID：13849241
> 
> 赞同：2
> 
> 时间：2012-12-12T21:46:57.257
> 
> 标签：node.js

我正在处理 facebook 授权，发现护照不适用于 cookieSession() 仅与 session() 一起使用。在第一种情况下 req.user 总是未定义的。有可能让它工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:44:31.953

你还能用最新版本的 Express 重现这个吗？我已经看到了另一份关于此的报告，但这是不久前的事了，所以我怀疑这是 Connect 中的一个错误，此后已得到解决。

如果您可以在早期版本上重现它，那是什么版本？

谢谢！

# search - H2数据库整理：选择什么？

> ID：13849244
> 
> 赞同：4
> 
> 时间：2012-12-12T21:47:10.220
> 
> 标签：search, sql-order-by, collation, h2

经过大量阅读和实验后，似乎我想要 PRIMARY 强度进行搜索，但 TERTIARY 或 IDENTICAL 进行排序。**主要问题：这可以通过 H2（或任何其他数据库）实现吗？**

第二个问题：我是这里唯一的一个，还是你们中的任何人也喜欢上述组合？一些确认将有助于我的理智。

背景：似乎排序规则只能在创建数据库时一开始就设置。所以我想确保选择正确的。我主要考虑这些用例（目前）：

1.  用户可以开始输入以过滤表的搜索字段：这里 PRIMARY 似乎是最合适的，以避免丢失任何结果（用户习惯于谷歌......）。虽然，如果能够让用户选择启用二级或三级排序规则来进行更精确的搜索，那就太好了。

2.  排序：当用户单击表列对内容进行排序时，TERTIARY/IDENTICAL 排序似乎是合适的。这就是我从日常经验中习惯的。

我在这里阅读了官方的 H2 文档：[http](http://www.h2database.com/html/commands.html#set_collation) ://www.h2database.com/html/commands.html#set_collat​​ion 。在这里：[http](http://www.h2database.com/html/datatypes.html#varchar_ignorecase_type) ://www.h2database.com/html/datatypes.html#varchar_ignorecase_type 更多相关信息： [排序规则和本地语言关系](https://stackoverflow.com/questions/3739989/collation-strength-and-local-language-relation)

测试 sql（来自[https://groups.google.com/forum/?fromgroups=#!topic/h2-database/lBksrrcuGdY](https://groups.google.com/forum/?fromgroups=#!topic/h2-database/lBksrrcuGdY)）：

```
drop all objects;
set collation english STRENGTH PRIMARY;
create table test(name varchar);
insert into test values ('À'), ('Ä'), ('Â'), ('A'), ('à'), ('ä'), ('â'), ('a'), ('àa'), ('äa'), ('âa'), ('aa'), ('B'), ('b');
select * from test where name like 'a' order by name;
select * from test order by name; 
```

![在此处输入图像描述](../Images/8294963a544396e8a1ac31d6b07eab9f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-19T10:58:55.323

如果您想对单个数据有两种行为，您必须：

*   将数据拆分为两列，
*   或使用两个运算符集。

出于您的目的，通常存储原始数据的“规范”表示，以便搜索规范形式，然后排序/显示原始数据。可能您应该使用一些“文本搜索引擎”，例如[Apache Lucene](http://lucene.apache.org/core/)。

对于纯 H2 解决方案，您可以将[H2 别名](http://www.h2database.com/html/grammar.html#create_alias)与[计算列](http://www.h2database.com/html/features.html#computed_columns)或查询条件一起使用。第一个解决方案允许索引来加快您的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-10T10:32:32.160

差不多 8 年后，我基于一些艰苦的学习提出了自己的建议：

**根本不使用排序规则**（H2 数据库的默认设置）。

理由：使用排序规则会产生一些*非常*意想不到的结果和错误。

## 陷阱：独特的约束

到目前为止，我在日常业务中看到的最常见的唯一约束是强制唯一（名字，姓氏）。通常情况下，应忽略大小写（防止同时使用“thomas müller”和“Thomas Müller”），但不能忽略变音符号（允许同时使用“Thomas Müller”和“Thomas Muller”）。

使用排序规则强度`SECONDARY`设置来实现这一点可能很诱人（不区分大小写但区分变音符号）。不。**改为使用`VARCHAR_IGNORECASE`**列。

```
{
  // NOT recommended: using SECONDARY collation
  Statement s = DriverManager.getConnection("jdbc:h2:mem:", "test", "test").createStatement();
  s.execute("SET COLLATION ENGLISH STRENGTH SECONDARY");
  s.execute("CREATE TABLE test ( name VARCHAR )");
  s.execute("ALTER  TABLE test ADD CONSTRAINT unique_name UNIQUE(name)");
  s.execute("INSERT INTO  test (name) VALUES ('Müller')");
  s.execute("INSERT INTO  test (name) VALUES ('Muller')");
  // s.execute("INSERT INTO  test (name) VALUES ('muller')" /* will fail */);
}
{
  // recommended: no collation, using VARCHAR_IGNORECASE instead of VARCHAR column
  Statement s = DriverManager.getConnection("jdbc:h2:mem:", "test", "test").createStatement();
  s.execute("CREATE TABLE test ( name VARCHAR_IGNORECASE )");
  s.execute("ALTER  TABLE test ADD CONSTRAINT unique_name UNIQUE(name)");
  s.execute("INSERT INTO  test (name) VALUES ('Müller')");
  s.execute("INSERT INTO  test (name) VALUES ('Muller')");
  // s.execute("INSERT INTO test (name) VALUES ('muller')" /* will fail */);
} 
```

## 陷阱：搜索/WHERE 子句

建议：没有排序规则的默认行为很好，并且行为符合预期。要进行更模糊的搜索，请使用您自己的代码搜索或类似 Lucene 的库。

`SECONDARY`即使大小写不同，排序规则强度也会匹配。使用 时您不会期望这种行为`SELECT WHERE name = '...'`，因为您会忘记所有关于排序规则的设置。

```
{
  Statement s = DriverManager.getConnection("jdbc:h2:mem:", "test", "test").createStatement();
  s.execute("SET COLLATION ENGLISH STRENGTH SECONDARY");
  s.execute("CREATE TABLE test ( name VARCHAR )");
  s.execute("INSERT INTO  test (name) VALUES ('Thomas Müller')");
  ResultSet rs = s.executeQuery("SELECT count(*) FROM test WHERE name = 'Thomas müller'" /* different case */);
  rs.next();
  /* prints 1 (!) */ System.out.println(rs.getLong(1));
} 
```

`PRIMARY`即使 SPACES 不同，排序规则强度也会匹配。您会相信英语主要排序规则会忽略空格吗？看看这个金块：[https ://stackoverflow.com/a/16567963/1124509](https://stackoverflow.com/a/16567963/1124509)

```
{      
  Statement s = DriverManager.getConnection("jdbc:h2:mem:", "test", "test").createStatement();
  s.execute("SET COLLATION ENGLISH STRENGTH PRIMARY");
  s.execute("CREATE TABLE test ( name VARCHAR )");
  s.execute("INSERT INTO  test (name) VALUES ('Thomas Müller')");
  ResultSet rs = s.executeQuery("SELECT count(*) FROM test WHERE name = 'ThomasMüller'" /* no space! */);
  rs.next();
  /* prints 1 (!) */ System.out.println(rs.getLong(1));
} 
```

## 排序 / ORDER BY 子句

没有排序规则的默认排序在实际场景中并不是很有用，因为它会根据严格的字符串比较进行排序。通过首先从数据库加载数据，然后使用代码对其进行排序/排序来解决这个问题。

就个人而言，我主要使用英语主要力量整理器来解决[空格问题](https://stackoverflow.com/a/16567963/1124509)。即使对于非英文文本列也能正常工作。

但是您可能还需要使用自定义比较器来满足更困难的要求，例如自然或直观的排序顺序，例如[Windows 资源管理器](https://stackoverflow.com/questions/23205020/java-sort-strings-like-windows-explorer/23249000)或[语义版本控制](https://semver.org/)等排序。

```
{
  Statement s = DriverManager.getConnection("jdbc:h2:mem:", "test", "test").createStatement();
  s.execute("CREATE TABLE test ( name VARCHAR )");
  s.execute("INSERT INTO  test (name) VALUES ('é6')");
  s.execute("INSERT INTO  test (name) VALUES ('e5')");
  s.execute("INSERT INTO  test (name) VALUES ('E4')");
  s.execute("INSERT INTO  test (name) VALUES ('ä3')");
  s.execute("INSERT INTO  test (name) VALUES ('a2')");
  s.execute("INSERT INTO  test (name) VALUES ('A1')");
  ResultSet rs = s.executeQuery("SELECT name FROM test ORDER BY name");
  List<String> names = new ArrayList<>();
  while(rs.next()) {
    names.add(rs.getString(1));
  }
  // not very useful strict String.compareTo() result: [A1, E4, a2, e5, ä3, é6]
  System.out.print(names);

  String rules = ((RuleBasedCollator) Collator.getInstance(new Locale("en", "US"))).getRules();
  Collator collator = new RuleBasedCollator(rules.replaceAll("<'\u005f'", "<' '<'\u005f'"));
  collator.setStrength(Collator.PRIMARY);
  names.sort((a, b) -> collator.compare(a, b));
  // as humans usually expect it in a name list / table: [A1, a2, ä3, E4, e5, é6]
  System.out.print(names);
} 
```

## 如何检查您的 H2 数据库是否使用排序规则？

查看设置表。如果未设置排序规则，则表中将没有条目。

[![整理](../Images/7a77290bda849907c3b43d0ca5e95dd7.png)](https://i.stack.imgur.com/BDUaq.png)

# wordpress - wordpress - 获取与分类 slug 相关的所有术语

> ID：13849246
> 
> 赞同：0
> 
> 时间：2012-12-12T21:47:18.010
> 
> 标签：wordpress, taxonomy, custom-post-type

我有一个标准页面的工作页面**。**我还有一个自定义帖子类型设置为**jobs**。还有一个名为**Job Categories**的工作分类法，我添加了一个 test one call **test-category**。

我想做的是在工作**页面上**，获取与任何**工作**职位类型相关的所有类别（作为标题列出），然后在列出这些职位的标题下。

我正在努力实现的是获得与职位类型工作相关的所有工作类别。

有谁知道如何实现这一目标？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:05:27.280

在 wp_list_categories() 函数上查看 WordPress Codex 页面的这一部分：

[http://codex.wordpress.org/Template_Tags/wp_list_categories#Display_Terms_in_a_custom_taxonomy](http://codex.wordpress.org/Template_Tags/wp_list_categories#Display_Terms_in_a_custom_taxonomy)

您应该能够使用以下内容列出 Job Categories 分类中的所有内容：

```
<?php

$args = array(
  'taxonomy'     => 'job_categories',
  'orderby'      => 'name',
  'hierarchical' => 1
);

wp_list_categories($args);

?> 
```

# c++ - 反转字符串c ++时出现访问冲突错误

> ID：13849250
> 
> 赞同：0
> 
> 时间：2012-12-12T21:47:41.080
> 
> 标签：c++, char

> **可能重复：**
> [为什么在写入字符串时会出现分段错误？](https://stackoverflow.com/questions/164194/why-do-i-get-a-segmentation-fault-when-writing-to-a-string)

以下简单函数应将字符数组反转到位。

```
void reverse(char* str)
{
    char* last = str;

    // find end of the string
    while(*last) {
        ++last;
    }

    // swap characters until the pointers meet in the middle
    while(str < last)
    {
        --last; 
        char temp = *str;
        *str = *last;
        *last = temp;
        ++str;
    }
}

int main()
{
    char* a= "Hello";
    reverse(a);
    return 0;
} 
```

代码编译。但它会引发有关访问冲突的运行时错误。根据调试器，罪魁祸首是以下行：

```
char temp = *str; 
```

任何想法为什么会发生？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T21:48:31.800

```
char* a= "Hello"; 
```

指针`a`指向字符串文字。根据标准，尝试修改字符串文字会导致未定义的行为。在您的实现中，分段错误表明编译器选择将字符串文字放在不可修改的内存中。

声明`a`为可修改的字符串。例如，像这样：

```
char a[] = "Hello"; 
```

# eclipse - Hadoop 的 WordCount 从命令行运行，但不是从 Eclipse

> ID：13849255
> 
> 赞同：3
> 
> 时间：2012-12-12T21:47:53.697
> 
> 标签：eclipse, hadoop, mapreduce

在过去的几天里，我测试了多个版本的 Hadoop（1.0.1、1.0.2、1.1.4）。在每种情况下，我都可以使用以下命令行轻松运行 WordCount 程序：

```
hadoop  jar  hadoop-examples-1.1.1.jar  wordcount  /input   output 
```

由于上述命令执行成功，那么我假设我的 Hadoop 配置是正确的。但是，当我尝试使用来自 Eclipse 的完全相同的输入运行程序时，我会收到每个版本的以下错误消息。 **谁能告诉我为什么它不能从 Eclipse 运行？**

```
Dec 12, 2012 2:19:41 PM org.apache.hadoop.util.NativeCodeLoader <clinit>
WARNING: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
Dec 12, 2012 2:19:41 PM org.apache.hadoop.mapred.JobClient copyAndConfigureFiles
WARNING: No job jar file set.  User classes may not be found. See JobConf(Class) or JobConf#setJar(String).
****file:/tmp/wordcount/in
Dec 12, 2012 2:19:42 PM org.apache.hadoop.mapred.JobClient$2 run
INFO: Cleaning up the staging area file:/tmp/hadoop-root/mapred/staging/root-41981592/.staging/job_local_0001
Dec 12, 2012 2:19:42 PM org.apache.hadoop.security.UserGroupInformation doAs
SEVERE: PriviledgedActionException as:root cause:org.apache.hadoop.mapreduce.lib.input.InvalidInputException: Input path does not exist: file:/input
Exception in thread "main" org.apache.hadoop.mapreduce.lib.input.InvalidInputException: Input path does not exist: file:/input
    at org.apache.hadoop.mapreduce.lib.input.FileInputFormat.listStatus(FileInputFormat.java:235)
    at org.apache.hadoop.mapreduce.lib.input.FileInputFormat.getSplits(FileInputFormat.java:252)
    at org.apache.hadoop.mapred.JobClient.writeNewSplits(JobClient.java:962)
    at org.apache.hadoop.mapred.JobClient.writeSplits(JobClient.java:979)
    at org.apache.hadoop.mapred.JobClient.access$600(JobClient.java:174)
    at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:897)
    at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:850)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:415)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1093)
    at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:850)
    at org.apache.hadoop.mapreduce.Job.submit(Job.java:500)
    at org.apache.hadoop.mapreduce.Job.waitForCompletion(Job.java:530)
    at com.igalia.wordcount.WordCount.run(WordCount.java:94)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
    at com.igalia.wordcount.App.main(App.java:28) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T10:38:49.070

通过您的 Configuration abject 在您的工作中添加以下两行：

```
Configuration.addResource(new Path("path-to-your-core-site.xml file"));
Configuration.addResource(new Path("path-to-your-hdfs-site.xml file")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-19T11:26:04.037

对于 Windows 7 上的 hadoop-2.2.0，我添加了以下行并解决了问题（注意：我的 Hadoop 主页是：C:\MyWork\MyProjects\Hadoop\hadoop-2.2.0）

配置 conf = new Configuration();

conf.addResource(new Path("C:\MyWork\MyProjects\Hadoop\hadoop-2.2.0\etc\hadoop\core-site.xml"));

conf.addResource(new Path("C:\MyWork\MyProjects\Hadoop\hadoop-2.2.0\etc\hadoop\hdfs-site.xml"));

# php - 数据库表已填充，不显示

> ID：13849258
> 
> 赞同：0
> 
> 时间：2012-12-12T21:47:57.447
> 
> 标签：php, mysql, database

我的公司最近将一个 php 网站移到了新服务器上。我更新了对数据库等的所有链接和引用。问题是在新位置数据库被识别，当 php 页面执行 sql 查询时，结果似乎找到但未显示。

例如，如果您以管理员身份登录并单击“人员”，它应该会列出该站点的所有成员。但是，当您以管理员身份登录并单击“人员”时，它会显示 6 页空白行（旧站点工作正常）。我错过了一些简单的东西吗？为什么它可以读取信息但不能正确显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T23:33:41.213

几件事要尝试/考虑：

1.  打开“显示错误”
2.  提高报告层级，注意注意事项。
3.  检查不同版本的 PHP
4.  具体来说，如果 PHP 版本不同，请查找 MySQL 函数/方法的差异。这可能会影响迭代您的响应的代码部分。

我的直觉说问题出在迭代你的结果的那一行。由于它似乎迭代了正确的次数，但数据不存在，我怀疑你得到了很好的结果，但没有正确获取它们。如果涉及较新版本的 PHP，这是可行的。

# perforce - 我可以在 perforce 中重新合并上一次合并中的一个文件吗？

> ID：13849259
> 
> 赞同：0
> 
> 时间：2012-12-12T21:48:00.067
> 
> 标签：perforce

我将一堆文件从一个项目合并到另一个项目中。结果发现其中一个文件（VC++ .rc）文件没有正确合并，因此甚至无法在 IDE 中打开它。我只想重新合并这个单个文件，其余的保持原样。这可能吗？

我确实在目标项目中的文件上尝试过“回滚”，但尚未签入。比我尝试重新合并/集成这个文件，但它并没有真正起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:58:10.350

Perforce 在他们的知识库中有一些建议：http: [//kb.perforce.com/article/517](http://kb.perforce.com/article/517)

本质上，您可能需要做的是将 .rc 文件“更新”到合并失败之前的修订版（可能使用回滚），然后重新集成该文件。如果它咕哝着关于已经被集成的东西，你应该能够使用 p4 集成的“强制”标志 (-f)。

# facebook - Facebook Wall 帖子流附件

> ID：13849260
> 
> 赞同：1
> 
> 时间：2012-12-12T21:48:03.063
> 
> 标签：facebook, post, stream

你看过 Foursquare 的那些 Facebook 墙贴吗？它显示了用户签到的区域的地图。最重要的是，有一个覆盖层，上面有签到的标题、描述和该位置的三张照片，每张都包含一个到 Foursquare 的链接。他们如何做到这一点？

我知道如何使用 Javascript SDK 将图片发布到用户的墙上，但是如何创建这些更具交互性的片段呢？我查看了[https://developers.facebook.com/docs/guides/attachments/](https://developers.facebook.com/docs/guides/attachments/)但找不到更多关于此的信息。这些附件是 Foursquare 使用的吗？

# winforms - Infragistics UltraGrid (9.2) 重新创建数据源后的波段复制

> ID：13849262
> 
> 赞同：1
> 
> 时间：2012-12-12T21:48:10.627
> 
> 标签：winforms, dataset, infragistics, duplication, ultrawingrid

我正在努力找出 UltraGrid Bands 机制的奇怪行为。以下代码包含重新创建问题所需的一切。

我正在创建一个数据集并用两个数据表填充它。然后我将 DataSet 分配为 BindingSource 对象的 DataSource。该 BindingSource 对象设置为 UltraGrid.DataSource。

下面的代码将有助于完全理解启动单个 PrepareData() 方法后发生的情况。网格显示 3 个记录，第一个可展开以显示 DataRelation 引用的第二个 Band。您可以通过注释掉第二个电话来检查。

```
 public partial class Form1 : Form {
    BindingSource bs = new BindingSource();
    DataSet ds = new DataSet();

    public Form1() {
        InitializeComponent();
        DoLayout();
        Bind();
        PrepareData();
        PrepareData();
    }

    private void DoLayout() {
        ultraGrid1.DisplayLayout.Override.ExpansionIndicator = Infragistics.Win.UltraWinGrid.ShowExpansionIndicator.CheckOnDisplay;
    }

    private void Bind() {
        bs.DataSource = ds;
        ultraGrid1.DataSource = bs;
    }

    private void PrepareData() {
        // you need to keep watching the ultraGrid1.DisplayLayout.Bands.All property
        // all the time - normally it contains one entry,
        // the default {NewDataSet} entry
        bs.SuspendBinding();
        ds.Relations.Clear();
        ds.Clear();
        ds.Tables.Clear();
        // when the above code will run for the second time, you can see that
        // Bands.All property will claim to have the standard {NewDataSet} entry
        // again. Seems like everything is working well

        DataTable dt = new DataTable("TABLE1");
        dt.Columns.Add("col1");
        dt.Columns.Add("col2");
        dt.Columns.Add("col3");

        dt.Rows.Add("1", "1", "1");
        dt.Rows.Add("2", "2", "2");
        dt.Rows.Add("3", "3", "3");

        // after adding the datatable to the dataset, we can see that there was
        // a change made to the DisplayLayout.Band.All list of the ultraGrid1
        // {NewDataSet} will change to {TABLE1}
        //
        // now watch the behavior when the method is run for the second time
        ds.Tables.Add(dt);
        // after the second run, you can see the first problem in the Bands.All entries

        dt = new DataTable("TABLE2");
        dt.Columns.Add("scol1");
        dt.Columns.Add("scol2");

        dt.Rows.Add("s1", "1");
        dt.Rows.Add("s2", "1");
        dt.Rows.Add("s3", "1");

        // the Bands.All property still will say there is only one element in it
        // but not anymore once the code is executed for the second time
        ds.Tables.Add(dt); // for the second code run - here is the second problem
        // now the first time we add that relation, you can see that
        // a new entry exists in the Bands.All property of the ultraGrid1: {T1T2}
        dt.ParentRelations.Add("T1T2", ds.Tables["TABLE1"].Columns["col1"], dt.Columns["scol2"], false);
        // after the second run of the code, here you can see the third problem

        bs.ResumeBinding();
    }

} 
```

现在，如果您再次运行 PrepareData() 方法，网格就会变得混乱。我实际上找到了导致问题的原因，因此上面代码中的大量注释，但我无法弄清楚为什么会发生这种情况。因此，无论调用多少次方法，我都希望网格的行为完全相同。

有谁知道这可能是什么原因？

我已经尝试清空数据源，并重新分配它们；厌倦了改变调用方法的顺序；甚至尝试调用 BandsCollection 对象的非公共方法，如“ClearAllButBandZero”和“Clear”，但都无济于事。

我在 Infragistics DevCenter 的知识库中找到了一篇文章： [http](http://devcenter.infragistics.com/Support/KnowledgeBaseArticle.Aspx?ArticleID=1751) ://devcenter.infragistics.com/Support/KnowledgeBaseArticle.Aspx?ArticleID=1751 但这对我没有帮助。每次重新构建 DataSet 时，UltraGrid.DisplayLayout.Bands 集合都会变得越来越乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:50:15.517

无需使用 BindingSource 将数据集添加为 UltraGrid 中的数据源。您可以将数据集直接分配为网格的数据源。看看下面的代码：

```
public partial class Form1 : Form
{
    DataSet ds = new DataSet();

    public Form1()
    {
        InitializeComponent();
        DoLayout();
        PrepareData();
        PrepareData();
    }

    private void DoLayout()
    {
        ultraGrid1.DisplayLayout.Override.ExpansionIndicator = Infragistics.Win.UltraWinGrid.ShowExpansionIndicator.CheckOnDisplay;
    }

    private void Bind()
    {
        ultraGrid1.DataSource = ds;
    }

    private void PrepareData()
    {
        ds = null;
        ds = new DataSet();

        DataTable dt = new DataTable("TABLE1");
        dt.Columns.Add("col1");
        dt.Columns.Add("col2");
        dt.Columns.Add("col3");

        dt.Rows.Add("1", "1", "1");
        dt.Rows.Add("2", "2", "2");
        dt.Rows.Add("3", "3", "3");

        ds.Tables.Add(dt);

        dt = new DataTable("TABLE2");
        dt.Columns.Add("scol1");
        dt.Columns.Add("scol2");

        dt.Rows.Add("s1", "1");
        dt.Rows.Add("s2", "1");
        dt.Rows.Add("s3", "1");

        ds.Tables.Add(dt); 
        dt.ParentRelations.Add("T1T2", ds.Tables["TABLE1"].Columns["col1"], dt.Columns["scol2"], false);

        Bind();
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T16:18:17.287

我找到了导致这种行为的原因。这是 .NET Framework 中的一个错误。BindingSource 类上有一个私有字段：

```
private Dictionary<string, BindingSource> relatedBindingSources; 
```

问题是，一旦您将 null 分配给您的 BindingSource.DataSource，Dictionary 将保持不变。然后你分配新的数据源，在其中添加一个关系，字典就会增长。并且永不停止。

我对这个问题的解决方案是创建一个简单的方法，这将确保我删除了所有可能的关系：

```
 private void ClearRelatedBindingSources(BindingSource bindingSource) {
        System.Reflection.FieldInfo fi = bindingSource.GetType().GetField("relatedBindingSources", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance);
        Dictionary<string, BindingSource> relatedBsDict = fi.GetValue(bindingSource) as Dictionary<string, BindingSource>;
        if (relatedBsDict != null) {
            relatedBsDict.Clear();
        }
    } 
```

所有要做的就是在将 BindingSource.DataSource 属性设为空后调用该方法。这基本上解决了我的网格中波段复制的问题。

非常感谢萨纳西斯，感谢我在正确的地方开始挖掘；）

# postgresql - liquibase：从 2 个数据库生成变更集

> ID：13849265
> 
> 赞同：1
> 
> 时间：2012-12-12T21:48:26.327
> 
> 标签：postgresql, diff, versioning, liquibase

如何使用 liquibase 比较“原始”数据库和“更新”数据库以从差异（postgresql）中生成变更集？

我检查了文档并意识到没有列出这样的功能。所以也许我需要看看其他工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T16:09:31.657

我没有找到任何输出至少相对较好的差异的工具。有一些工具正在生成差异文件，但输出是不可接受的。

您可能想从 liquibase 博客中阅读这篇文章。 [数据库差异的问题](http://blog.liquibase.org/2007/06/the-problem-with-database-diffs.html)

# jquery - jQuery Mobile 更改视口参数

> ID：13849267
> 
> 赞同：3
> 
> 时间：2012-12-12T21:48:28.637
> 
> 标签：jquery, jquery-mobile, viewport

在我的移动网站中，我将视口元标记设置为：

```
<meta content="width=device-width,initial-scale=1,maximum-scale=5,user-scalable=yes" name="viewport"> 
```

当我在浏览器（任何浏览器、任何设备）中查看页面源时，我看到“内容”参数已更改为：

```
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,user-scalable=yes,maximum-scale=1, user-scalable=no"/> 
```

请注意“内容”中的附加参数。JQM 似乎在运行时添加了“maximum-scale=1，user-scalable=no”值。有人知道如何让 JQM 停止这种烦恼吗？其效果是根本无法捏/缩放网站。

更新：我在 jQuery 论坛的帖子中发现了以下代码的变体，它基本上将视口的“内容”参数重置为应有的值：

```
<script>
var fixedPageMeta = "width=device-width,initial-scale=1,maximum-scale=5,user-scalable=yes";
jQuery('[data-role=page]').live('pagebeforeshow', function () {
    jQuery('#viewportMeta').attr("content", fixedPageMeta); 
});
</script> 
```

我可以看到页面源中的“内容”参数现在是正确的，但是仍然不能捏/缩放。有人有什么建议吗？

# groovy - 在soapUI中，如何将多个属性值从groovy脚本传输到包含属性的属性列表？

> ID：13849273
> 
> 赞同：3
> 
> 时间：2012-12-12T21:48:48.493
> 
> 标签：groovy, soapui

我正在熟悉 groovy（对于soapUI）并且遇到了一个障碍，试图弄清楚如何将一些属性值转移到属性列表中。尝试了财产转移步骤，但没有帮助。我有点想通了，我需要使用*'setPropertyValue'*和*'context.expand'*开始。只是还不能把这些点联系起来。

```
def myTestCase = context.testCase

File tempFile_first = new File("C:/Users/ethomas1/Desktop/my_Input_File_first.txt"
List lines_first = tempFile_first.readLines()

File tempFile_second = new File("C:/Users/ethomas1/Desktop/my_Input_File_Second.txt")
List lines_second = tempFile_second.readLines()

def x = Math.random()*10       // multiplying random with 10 so the resulting value would be <= 10.
i = String.valueOf(x).getAt(0)
i = i.toInteger()

myTestCase.setPropertyValue("num1", lines_first[i])
myTestCase.setPropertyValue("num3", lines_first[i])
myTestCase.setPropertyValue("num2", lines_second[i])
myTestCase.setPropertyValue("num4", lines_second[i])

num1 = context.expand( '${#TestCase#num1}' )
num2 = context.expand( '${#TestCase#num2}' )
num3 = context.expand( '${#TestCase#num3}' )
num4 = context.expand( '${#TestCase#num4}' )

log.info ("num1 is " + num1 + ", num2 is " + num2 + ", num3 is " + num3 + ", num4 is " + num4) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T07:23:12.590

您可以使用 .properties 文件在任何级别将所有属性拉到一起，否则您必须像上面写的那样编写 groovy。testRunner.testCase.testSuite.setPropertyValue("PropName","Value");

# scala - 在 scala 中以参数方式保存闭包的数据结构

> ID：13849274
> 
> 赞同：2
> 
> 时间：2012-12-12T21:48:53.913
> 
> 标签：scala, types, closures, bounds, parametric-polymorphism

我正在 Scala 中实现一个 GUI 事件系统。我有类似的东西：

```
case class EventObject
case class KeyEventObject extends EventObject
case class MouseEventObject extends EventObject 
```

我想将事件侦听器闭包存储在（多）映射中，如下所示：

```
var eventListeners = new MultiMap[EventDescriptor, (EventObject => Unit)]; 
```

我的问题是，有没有办法重写它，以便存储闭包的函数签名可以是 EventObject 或任何子类？类似于以下内容：

```
var eventListeners = new MultiMap[EventDescriptor, [A <: EventObject](A => Unit)] 
```

这样我就可以在定义侦听器函数时知道子类型：

```
eventListeners.put(KEY_EVENT, (e:KeyEventObject) => { ... })
eventListeners.put(MOUSE_EVENT, (e:MouseEventObject) => { ... }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T02:04:02.963

并不是很多事情是不可能的。例如，您可以使用类型类执行以下操作：

```
class HMultiMap {
  import scala.collection.mutable.{ Buffer, HashMap }

  type Mapping[K, V]

  private[this] val underlying = new HashMap[Any, Buffer[Any]]

  def apply[K, V](key: K)(implicit ev: Mapping[K, V]) =
    underlying.getOrElse(key, Buffer.empty).toList.asInstanceOf[List[V]]

  def add[K, V](key: K)(v: V)(implicit ev: Mapping[K, V]) = {
    underlying.getOrElseUpdate(key, Buffer.empty) += v
    this
  }
} 
```

现在：

```
sealed trait EventObject
case class KeyEventObject(c: Char) extends EventObject
case class MouseEventObject(x: Int, y: Int) extends EventObject

sealed trait EventDescriptor
case object KEY_EVENT extends EventDescriptor
case object MOUSE_EVENT extends EventDescriptor

class EventMap extends HMultiMap {
  class Mapping[K, V]

  object Mapping {
    implicit object k extends Mapping[KEY_EVENT.type, KeyEventObject => Unit]
    implicit object m extends Mapping[MOUSE_EVENT.type, MouseEventObject => Unit]
  }
} 
```

这有点乱，但用法更漂亮：

```
val eventListeners = new EventMap

eventListeners.add(KEY_EVENT)((e: KeyEventObject) => println(e.c))
eventListeners.add(MOUSE_EVENT)((e: MouseEventObject) => println("X: " + e.x))
eventListeners.add(KEY_EVENT)((e: KeyEventObject) => println(e.c + " again")) 
```

我们可以确认我们可以挑选出各种事件处理程序：

```
scala> eventListeners(KEY_EVENT).size
res3: Int = 2 
```

我们可以假装触发一个事件并为其运行所有处理程序：

```
scala> eventListeners(KEY_EVENT).foreach(_(KeyEventObject('a')))
a
a again 
```

而且这一切都是非常安全的，因为没有适当的证据，没有任何东西可以进入底层的松散类型的地图。例如，如果我们试图从 to 添加一个函数，我们会得到一个编译时`String`错误`Unit`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T22:06:32.680

不可能。

假设你有这样的`Map`：

```
val f = eventListeners(key).head 
```

你会如何调用这个函数`f`？带有类型的参数`EventObject`？你不能。可能是`KeyEventObject => Unit`。带有类型的参数`KeyEventObject`？你不能。可能是`MouseEventObject => Unit`。

您可以每次使用`PartialFunction[EventObject, Unit]`和检查，但这是一种丑陋的方式。`isDefinedAt`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T22:06:49.047

**编辑**

似乎不可能。在 Scala-2.10 中也禁止逐个继承

...

也许通过使用一些特定的特征并声明事件对象类密封并扩展该特征？

```
val eventListeners = new MultiMap[EventDescriptor, ((_ >: EventTrait) => Unit)] 
```

从`List`来源：

```
:+[B >: A, That](elem: B)(implicit bf: CanBuildFrom[List[A], B, That]): That 
```

`That`- 是一种特定类型，它可以通过隐式构建器从您的 EventTrait 构建，每个事件类型都有一个构建器。而不是`elem: B`尝试使用 classOf[B]。创建将`MultiMap`使用不同的 classOf 访问您的 get 方法：

```
def getMouseEvent(ed: EventDescriptor) = multimap.entrySet.filter(
(a, b) => a == ed ).map((a, b) => (a, convertTo(ClassOf[MouseEvent], b)).
filter((a, b) => b != null) 
```

`convertTo`如果无法将事件转换为适当的类型，则返回 null

丑陋。

# java - rmi 注册表绑定问题

> ID：13849277
> 
> 赞同：3
> 
> 时间：2012-12-12T21:49:07.410
> 
> 标签：java, rmi, distribution, distributed-system, rmiregistry

我在 IP：192.168.133.2 的虚拟机（运行 Windows XP）上运行 RMI Regitry，并尝试使用以下代码绑定 RMI 服务器（在不同的 vm XP IP：192.168.133.3 上运行）：

```
Naming.rebind("//192.168.133.2/rmi.2", new RMI()); 
```

在哪里

```
public class RMI extends UnicastRemoteObject 
```

但我得到了这个例外：

```
 java.rmi.AccessException: Registry.Registry.rebind disallowed; origin /192.168.133.3 is non-local host 
```

我认为 RMI Registry 不接受任何不在同一台 RMI Registry 运行机器上运行的 rmi 服务器。

但是如何让这个注册表接受我的 rmi 服务器呢？

ps：我使用 JBuilder X 作为 IDE。

> 我正在尝试实现一个移动代理，它将在一些 rmi 服务器上运行以对它们进行一些工作并将结果返回到起始站，以便 RMI 服务器实现托管该代理的环境以完成其工作并将其发送到下一个它将通过注册表找到的站点

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T09:47:14.883

> 尝试绑定 RMI 服务器（在不同的 vm XP IP 上运行：192.168.133.3）

停在那儿。你不能那样做。您只能将 RMI 服务器绑定到与执行绑定的代理在同一主机中运行的注册表。

请注意，这并不*一定*意味着与远程对象本身在同一主机上运行。例如，客户端可以查找远程注册表并将检索到的存根绑定到本地注册表中。但是您不能将任何东西绑定到远程注册表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T22:22:56.630

RMI 不提供任何类型的“联合”或分布式命名服务。

RMI 的结构允许您在服务器上运行 RMI 注册表。它托管可以通过网络访问的服务，但是这些服务在该服务器上本地运行。

所提供的服务必须在服务器上启动 - 并“重新绑定” - 而不是在任何客户端系统上。仅限本地地址。

然后，您的客户应该联系该服务器......

# ruby - 在 ruby 中处理大型 CSV 文件（20G）

> ID：13849280
> 
> 赞同：6
> 
> 时间：2012-12-12T21:49:13.680
> 
> 标签：ruby, parsing, csv

我正在处理一个小问题，并会就如何解决它提出一些建议：给定一个列数和行数未知的 csv 文件，输出一个包含值的列列表以及每个值重复的次数。不使用任何库。

如果文件很小，这应该不是问题，但是当它是几个 Gig 时，我得到 NoMemoryError: failed to allocate memory。有没有办法创建哈希并从磁盘读取而不是将文件加载到内存？你可以在 perl 中使用绑定的哈希来做到这一点

编辑： IO#foreach 会将文件加载到内存中吗？File.open(filename).each 怎么样？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-12T22:46:31.133

一次读取一行文件，同时丢弃每一行：

```
open("big.csv") do |csv|
  csv.each_line do |line|
    values = line.split(",")
    # process the values
  end
end 
```

使用此方法，您永远不会耗尽内存。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-12T22:22:35.287

您是否一次阅读整个文件？逐行读取它，即使用`ruby -pe`,`ruby -ne`或`$stdin.each`应该通过已处理的垃圾收集行来减少内存使用量。

```
data = {}
$stdin.each do |line|
  # Process line, store results in the data hash.
end 
```

将其另存为`script.rb`并将巨大的 CSV 文件通过管道传输到此脚本的标准输入中：

```
ruby script.rb < data.csv 
```

如果您不想从标准输入中读取内容，我们需要进行一些小改动。

```
data = {}
File.open("data.csv").each do |line|
  # Process line, store results in the data hash.
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-11T10:21:07.957

供将来参考，在这种情况下，您要使用`CSV.foreach('big_file.csv', headers: true) do |row|`

这将以最小的内存占用从 IO 对象中逐行读取文件（无论文件大小如何，都应低于 1MB）。

# gwt - 有没有办法注释 AutoBean 属性，使其不会被序列化/反序列化？

> ID：13849281
> 
> 赞同：2
> 
> 时间：2012-12-12T21:49:18.603
> 
> 标签：gwt, autobean

我有一个具有仅 UI 需要的属性的 autobean。我相信您可以清除值并且`AutoBeanCodex`不会序列化该属性，但这等同于序列化所需的额外步骤。

我希望有一些类似于注释的`Editor` `@Ignore`注释。例如：

```
public interface Foo {
    ...
    @Ignore
    String getUiOnlyProperty();
} 
```

那么，除了在序列化时将值清空，还有其他方法可以防止 autobean 属性被序列化吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:52:06.983

Autobeans 旨在成为 JSON/XML/任何格式的 Java 皮肤——它们并不是真正设计用于保存其他数据。也就是说，有几个想法几乎可以用开箱即用的工具回答您的问题，或者可能会激发一些其他想法来解决您的问题。

您应该能够通过省略 setter 来构建只读属性。这不是您所要求的，但仍然可能很方便。

沿着这些思路，`@PropertyName`注释的 JavaDoc 似乎暗示了这个可能的特性：

```
/**
 * An annotation that allows inferred property names to be overridden.
 * <p>
 * This annotation is asymmetric, applying it to a getter will not affect the
 * setter. The asymmetry allows existing users of an interface to read old
 * {@link AutoBeanCodex} messages, but write new ones.
 */ 
```

阅读旧消息但编写新消息似乎可能更接近您所追求的，并且仍然允许您使用看起来像 bean 的东西。

真正的答案似乎是`AutoBean.setTag`and`getTag`方法：

```
/**
 * A tag is an arbitrary piece of external metadata to be associated with the
 * wrapped value.
 * 
 * @param tagName the tag name
 * @param value the wrapped value
 * @see #getTag(String)
 */
void setTag(String tagName, Object value); 
```

...

```
/**
 * Retrieve a tag value that was previously provided to
 * {@link #setTag(String, Object)}.
 * 
 * @param tagName the tag name
 * @return the tag value
 * @see #setTag(String, Object)
 */
<Q> Q getTag(String tagName); 
```

从这些方法的实现中可以看出`AbstractAutoBean`，它们将数据存储在与通过网络发送的完全不同的对象中。不利的一面是，您需要获取底层 AutoBean 对象（请参阅`com.google.web.bindery.autobean.shared.AutoBeanUtils.getAutoBean(U)`了解执行此操作的一种方法）才能调用这些方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-28T21:59:02.300

解码为父接口的子类/接口在解码时不会爆炸，从而允许货物在编组步骤之前一起传递。我对下面实际代码的直接测试按预期执行。

```
 public interface ReplicateOptions {
    /**
     * Create target database if it does not exist. Only for server replications.
     */
    Boolean getCreateTarget();

    void setCreateTarget(Boolean create_target); 

  //baggage to pass along
  interface ReplicateCall<T> extends ReplicateOptions   {

      /**
       * If true starts subscribing to future changes in the source database and continue replicating them.
       */
      AsyncCallback<T> getContinuous();

      void setContinuous(AsyncCallback<T> continuous); 

}
} 
```

# ios - iOS UIScrollView 性能

> ID：13849284
> 
> 赞同：3
> 
> 时间：2012-12-12T21:49:26.357
> 
> 标签：ios, performance, uiscrollview, uibutton, uiimage

我正在尝试提高我的`UIScrollView`. 我有很多`UIButtons`（可能有数百个）：每个按钮都有一个**png**图像设置为背景。

如果我尝试在整个滚动出现时加载它，则需要花费太多时间。在网上搜索，我找到了一种优化它的方法（在滚动时加载和卸载页面*）*，但是每次我必须加载新页面时滚动都会有一点停顿。

你有什么建议让它平滑滚动吗？

您可以在下面找到我的代码。

```
- (void)scrollViewDidScroll:(UIScrollView *)tmpScrollView {
    CGPoint offset = tmpScrollView.contentOffset;
    //322 is the height of 2*2 buttons (a page for me)
    int currentPage=(int)(offset.y / 322.0f);
    if(lastContentOffset>offset.y){
        pageToRemove = currentPage+3;
        pageToAdd = currentPage-3;
    }
    else{
        pageToRemove = currentPage-3;
        pageToAdd = currentPage+3;
    }
    //remove the buttons outside the range of the visible pages
    if(pageToRemove>=0 && pageToRemove<=numberOfPages && currentPage<=numberOfPages){
        for (UIView *view in scrollView.subviews)
        {
            if ([view isKindOfClass:[UIButton class]]){
                if(lastContentOffset<offset.y && view.frame.origin.y<pageToRemove*322){
                    [view removeFromSuperview];
                }
                else if(lastContentOffset>offset.y && view.frame.origin.y>pageToRemove*322){
                    [view removeFromSuperview];
                }
            }
        }
    }
    if(((lastContentOffset<offset.y && lastPageToAdd+1==pageToAdd) || (lastContentOffset>offset.y && lastPageToAdd-1==pageToAdd)) && pageToAdd>=0 && pageToAdd<=numberOfPages){
        int tmpPage=0;
        if((lastContentOffset<offset.y && lastPageToAdd+1==pageToAdd)){
            tmpPage=pageToAdd-1;
        }
        else{
            tmpPage=pageToAdd;
        }
        //the images are inside the application folder
        NSString *docDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
        for(int i=0;i<4;i++){
            UIButton* addButton=[[UIButton alloc] init];
            addButton.layer.cornerRadius=10.0;
            if(i + (tmpPage*4)<[imagesCatalogList count]){
                UIImage* image=[UIImage imageWithContentsOfFile:[NSString stringWithFormat: @"%@/%@",docDir,[imagesCatalogList objectAtIndex:i + (tmpPage*4)]]];
                if(image.size.width>image.size.height){
                    image=[image scaleToSize:CGSizeMake(image.size.width/(image.size.height/200), 200.0)];
                    CGImageRef ref = CGImageCreateWithImageInRect(image.CGImage, CGRectMake((image.size.width-159.5)/2,(image.size.height-159.5)/2, 159.5, 159.5));
                    image = [UIImage imageWithCGImage:ref];
                }
                else if(image.size.width<image.size.height){
                    image=[image scaleToSize:CGSizeMake(200.0, image.size.height/(image.size.width/200))];
                    CGImageRef ref = CGImageCreateWithImageInRect(image.CGImage, CGRectMake((image.size.width-159.5)/2, (image.size.height-159.5)/2, 159.5, 159.5));
                    image = [UIImage imageWithCGImage:ref];
                }
                else{
                    image=[image scaleToSize:CGSizeMake(159.5, 159.5)];
                }

                [addButton setBackgroundImage:image forState:UIControlStateNormal];
                image=nil;
                addButton.frame=CGRectMake(width, height, 159.5, 159.5);
                NSLog(@"width %i height %i", width, height);
                addButton.tag=i + (tmpPage*4);
                [addButton addTarget:self action:@selector(modifyImage:) forControlEvents:UIControlEventTouchUpInside];
                [tmpScrollView addSubview:addButton];
                addButton=nil;
                photos++;
            }
        }
    }
    lastPageToAdd=pageToAdd;
    lastContentOffset=offset.y;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T22:18:49.720

这里有一些建议：

**1）**首先，了解`scrollViewDidScroll:`随着用户滚动，它将被连续调用。不只是*每页*一次。所以，我会确保你有逻辑来确保你的加载所涉及的实际工作每页只触发**一次。**

通常，我会保留一个类*ivar*，例如`int lastPage`. 然后，正如`scrollViewDidScroll:`所谓的，我计算新的*当前页面*。只有当它与 ivar 不同时，我才会触发加载。当然，那么您需要将动态计算的索引（`currentPage`在您的代码中）保存在您的 ivar 中。

**2）**另一件事是我尽量不做`scrollViewDidScroll:`方法中的所有密集工作。我只在那里**触发**它。

因此，例如，如果您将发布的大部分代码放入一个名为 的方法中`loadAndReleasePages`，那么您可以在该`scrollViewDidScroll:`方法中执行此操作，该方法将执行推迟到`scrollViewDidScroll:`完成后：

```
- (void)scrollViewDidScroll:(UIScrollView *)tmpScrollView {
    CGPoint offset = tmpScrollView.contentOffset;
    //322 is the height of 2*2 buttons (a page for me)
    int currentPage = (int)(offset.y / 322.0f);

    if (currentPage != lastPage) {
        lastPage = currentPage;
        // we've changed pages, so load and release new content ...
        // defer execution to keep scrolling responsive
        [self performSelector: @selector(loadAndReleasePages) withObject: nil afterDelay:0];
    }
} 
```

这是我从早期 iOS 版本开始使用的代码，因此您当然也可以将`performSelector:`调用替换为异步 GCD 方法调用。关键是不要**在**滚动视图委托回调中执行此操作。

**3)**最后，您可能希望尝试使用稍微不同的算法来计算滚动视图何时实际滚动到您想要加载和释放内容的程度。您目前使用：

```
int currentPage=(int)(offset.y / 322.0f); 
```

这将根据操作员的方式产生整数页码`/`，以及`float`to `int`cast 的工作方式。那可能没问题。但是，您可能会发现您需要一个稍微不同的算法，以在稍微不同的点触发加载。例如，您可能希望在页面从一个页面滚动到下一个页面时恰好滚动 50% 时触发内容加载。或者您可能只想在您几乎完全离开第一页（可能是 90%）时才触发它。

我相信我编写的一个滚动密集型应用程序确实需要我在加载大量资源时调整页面滚动的精确时刻。因此，我使用了一个稍微不同的舍入函数来确定当前页面何时发生了变化。

你也可以玩弄它。

**编辑：**在查看您的代码多一点之后，我还看到您正在做的*工作*是加载和缩放图像。这实际上也是一个后台线程的候选者。您可以`UIImage`从文件系统加载，并在后台线程上进行缩放，然后使用 GCD 最终设置按钮的背景图像（加载的图像）并在 UI 线程上将其框架更改回。

`UIImage`自 iOS 4.0 起，在后台线程中使用是安全的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T22:43:59.117

**在您进行概要分析之前，请勿触摸一行代码。**Xcode 包含用于此目的的优秀工具。

1.  首先，在 Xcode 中，确保您构建的是真实设备，而不是模拟器

2.  在 Xcode 中，从 Product 菜单中选择 Profile

3.  仪器打开后，选择核心动画仪器

4.  在您的应用中，在您要配置的滚动视图中滚动

您将在顶部看到实时 FPS，在底部，您将看到基于总运行时间的所有函数和方法调用的细分。开始向下钻取最高次数，直到您在自己的代码中找到方法。点击 Command + E 以查看右侧的面板，它将显示您单击的每个函数和方法调用的完整堆栈跟踪。

现在您所要做的就是消除或优化对最“昂贵”的函数和方法的调用，并验证您的更高 FPS。

这样一来，您就不会浪费时间盲目优化，也不会进行对性能没有实际影响的更改。

* * *

我的回答确实是提高滚动视图和表格视图性能的更通用的方法。为了解决您的一些特殊问题，我强烈建议您观看有关高级滚动视图使用的 WWDC 视频：[https ://developer.apple.com/videos/wwdc/2011/includes/advanced-scrollview-techniques.html#advanced-scrollview -技术](https://developer.apple.com/videos/wwdc/2011/includes/advanced-scrollview-techniques.html#advanced-scrollview-techniques)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T22:51:27.853

可能会影响您的表现的行是：

addButton.layer.cornerRadius=10.0;

为什么？原来cornerRadius 的表现太糟糕了！把它拿出来......保证巨大的加速。

编辑：这个答案很清楚地总结了你应该做什么。

[https://stackoverflow.com/a/6254531/537213](https://stackoverflow.com/a/6254531/537213)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-25T06:01:41.517

我最常见的解决方案是栅格化视图：

```
_backgroundView.layer.shouldRasterize = YES;
_backgroundView.layer.rasterizationScale = [[UIScreen mainScreen] scale]; 
```

但它并非在所有情况下都有效.. 试试吧

# jquery - Internet Explorer 中的 AJAX 请求表单 - reCaptcha 导致表单字段在提交时被重置

> ID：13849287
> 
> 赞同：2
> 
> 时间：2012-12-12T21:49:36.623
> 
> 标签：jquery, ajax, internet-explorer, recaptcha

经过大量调试和隔离问题后，我意识到我在请求表单中放置的 reCaptcha 导致字段被重置。

使用 AJAX，我将表单数据发送到 PHP 文件以进行验证和电子邮件提交。当您提交有错误的表单时（假设您忘记填写某些内容），它会将您滚动到页面顶部，其中 $.post() 函数返回错误。

在所有其他浏览器中，这可以完美运行。在 Internet Explorer 中，一旦提交请求并返回错误，*所有表单字段都会重置。*

```
 // jQuery used to submit form
 $("#support-form").validate({
    submitHandler: function(form) {
      $(".submit").attr("value", "Sending...");
      $.post('/process-support.php', $("#support-form").serialize(), function(data) {
       $('.results').html(data);
       Recaptcha.reload();
      });
    }
}); 
```

然后，当我从 HTML 中删除验证码时，Internet Explorer 开始正确处理错误和表单字段。

有没有其他人遇到过这样的 reCaptcha / Internet Explorer 错误？

# asp.net - 获取外键的值

> ID：13849293
> 
> 赞同：0
> 
> 时间：2012-12-12T21:49:52.480
> 
> 标签：asp.net, asp.net-mvc, razor, ado.net

嗨，有没有一种简单的方法来获取外键的值，而无需编写 sql 查询。

我在我的 mssql 数据库 (ADO.NET) 的帮助下生成了代码。这是一个澄清的例子

订单表：

```
id customer_fk
1  100
2  105 
```

客户表：

```
id   name
100  Walter
105  White 
```

看法：

```
@model ...order
...
@customer_fk 
```

@customer_fk 提供例如。“100”而不是“沃尔特”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:27:29.523

不确定您是否需要使用 ADO.NET，但要完成您想要的，无需编写 sql，您需要使用某种 ORM，例如 EntityFramework。

您将需要编写生成 SQL 的 LINQ，并且由于 EF 将了解两个表之间的关系，因此您将可以访问客户表中的“名称”属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T00:27:21.817

Linq to SQL 可能是一个不错的选择，因为您使用的是 MS SQL。只需将 DataContext 项添加到您的项目中，然后从您的服务器拖放表。然后你应该能够写出类似的东西：

```
public ActionResult Order(int orderId)
{
    using (MyDataContext context = new MyDataContext())
    { 
        var loadOptions = new LoadOptions();
        loadOptions.LoadWith<order>(o => o.customer);
        context.LoadOptions = loadOptions;
        var theOrder = context.orders.Where(order => order.id == orderId).FirstOrDefault();
        return View(theOrder);
    }
} 
```

但如果您已经在使用 ADO.Net，也许只需编写查询？这并不难：

```
SELECT order.*, customer.name
FROM order INNER JOIN customer ON order.customer_fd = customer.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T00:54:42.367

如果您在实体框架（或其他类似的 ORM）中执行此操作，则可以编写一个连接到外键表的 LINQ 查询：

```
var customerOrders = 
  from o in context.Orders
  join c in context.Customers on o.customer_fk equals c.ID
  select new { OrderID = o.ID, CustomerName = c.Name }; 
```

# android - Android：在 OSM MapView (OSMDroid) 上绘制多边形

> ID：13849307
> 
> 赞同：1
> 
> 时间：2012-12-12T21:50:34.087
> 
> 标签：android, polygon, osmdroid, openstreetmap

是否可以在 OSMDroid 的 mapview 上绘制多边形？它应该使用 Mapview 轻松扩展，所以我不想使用画布。有什么建议吗？我有自己的 MapOverlay（扩展 org.osmdroid.views.overlay.Overlay），但无法将我的多边形放在上面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:40:55.077

如果您的类正在扩展 org.osmdroid.views.overlay.Overlay，您必须修改 draw 方法，使其看起来像下面的代码：

```
@Override
protected void draw(final Canvas canvas, final MapView mapView, final boolean shadow) {

       if (shadow) {
               return;
       }

       if (this.mPoints.size() < 2) {

        //Do nothing                    
        return;
       }

       final Projection pj = mapView.getProjection();

       // precompute new points to the intermediate projection.
       final int size = this.mPoints.size();

       while (this.mPointsPrecomputed < size) {
               final Point pt = this.mPoints.get(this.mPointsPrecomputed);
               pj.toMapPixelsProjected(pt.x, pt.y, pt);

               this.mPointsPrecomputed++;
       }

       Point screenPoint0 = null; // points on screen
       Point screenPoint1 = null;
       Point projectedPoint0; // points from the points list
       Point projectedPoint1;

       // clipping rectangle in the intermediate projection, to avoid performing projection.
       final Rect clipBounds = pj.fromPixelsToProjected(pj.getScreenRect());

       mPath.rewind();
       mPath.setFillType(Path.FillType.EVEN_ODD);
       projectedPoint0 = this.mPoints.get(size - 1);
       mLineBounds.set(projectedPoint0.x, projectedPoint0.y, projectedPoint0.x, projectedPoint0.y);

       for (int i = size - 2; i >= 0; i--) {
               // compute next points
               projectedPoint1 = this.mPoints.get(i);
               mLineBounds.union(projectedPoint1.x, projectedPoint1.y);

               if (!Rect.intersects(clipBounds, mLineBounds)) {
                       // skip this line, move to next point
                       projectedPoint0 = projectedPoint1;
                       screenPoint0 = null;
                       continue;
               }

               // the starting point may be not calculated, because previous segment was out of clip
               // bounds
               if (screenPoint0 == null) {
                       screenPoint0 = pj.toMapPixelsTranslated(projectedPoint0, this.mTempPoint1);
                       mPath.moveTo(screenPoint0.x, screenPoint0.y);
               }

               screenPoint1 = pj.toMapPixelsTranslated(projectedPoint1, this.mTempPoint2);

               // skip this point, too close to previous point
               if (Math.abs(screenPoint1.x - screenPoint0.x) + Math.abs(screenPoint1.y - screenPoint0.y) <= 1) {
                       continue;
               }

               mPath.lineTo(screenPoint1.x, screenPoint1.y);

               // update starting point to next position
               projectedPoint0 = projectedPoint1;
               screenPoint0.x = screenPoint1.x;
               screenPoint0.y = screenPoint1.y;
               mLineBounds.set(projectedPoint0.x, projectedPoint0.y, projectedPoint0.x, projectedPoint0.y);

       }

       mPath.close();
       canvas.drawPath(mPath, this.mPaint);

} 
```

# iphone - Monotouch：PopToViewController 然后按下一个会导致 iPod/iPhone 上的视图发生冲突

> ID：13849310
> 
> 赞同：1
> 
> 时间：2012-12-12T21:50:43.800
> 
> 标签：iphone, ios, xamarin.ios, monotouch.dialog

我需要一次弹出 3 个控制器，所以我使用`PopToViewController`导航控制器中的方法，然后将一个新控制器推入其中。它导致视图重叠。两个控制器，它被弹出的和被推送的都是`DialogViewControllers`. 此外，这只发生在 iPod/iPhone 上，在 iPad 上它可以正常工作。

代码很简单：

```
NavigationController.PopToViewController(NavigationController.ViewControllers[NavigationController.ViewControllers.Count() - 1 - numberOfViews], animated);
NavigationController.PushViewController(viewController); 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T09:29:32.363

而不是同时弹出和推送，您可能应该只替换堆栈

```
UIViewControllers[] newStack = new UIViewController[NavigationController.ViewControllers.Count()-numberOfViews+1];
for (int i = 0; i < NavigationController.ViewControllers.Count()-numberOfViews; i++)
{
    newStack[i] = NavigationController.ViewControllers[i];
}
newStack[NavigationController.ViewControllers.Count()-numberOfViews] = viewController;
NavigationController.SetViewControllers(newStack, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:02:10.120

通过将 iPhone 的动画参数设置为 false 解决了该问题。

```
NavigationController.PopToViewController(NavigationController.ViewControllers[NavigationController.ViewControllers.Count() - 1 - numberOfViews], false); 
```

# annotations - Matplotlib：用任意形状注释图

> ID：13849313
> 
> 赞同：1
> 
> 时间：2012-12-12T21:51:04.503
> 
> 标签：annotations, matplotlib

嗨，我希望能够将任意形状添加到 xy 图。这是一个例子：

![在此处输入图像描述](../Images/1b72001ad7a142c9ff06f8a032da0e20.png)

正如您在上图中所看到的，有一条包含箭头和圆柱体的水平注释线。最终我希望能够传递一个字符列表 [None, "a","a","a",None,"c","c","c", None, etc...]并在绘图下方或 x 轴上添加该注释。

有人可以建议一种方法来做到这一点，或者如果可能的话，请发表评论。此外，如果添加箭头/圆柱体太难，只需添加不同颜色的简单矩形即可。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T00:33:49.380

确实可以在 maplotlib 轴对象中添加您描述的形状。见这个例子： http: [//matplotlib.org/examples/shapes_and_collections/artist_reference.html](http://matplotlib.org/examples/shapes_and_collections/artist_reference.html)

所以你需要做两件事：

1.  使用`ax.get_xlim()`and`np.linspace(xmin, xmax, num_shapes)`计算出每个艺术家的 x 坐标
2.  编写一个函数来添加示例中所示的形状，其中轴对象、艺术家类型和 xy 坐标作为参数。

# ruby - rbenv 和乘客 - 不能从非 root 用户帐户（sudo 组）安装

> ID：13849314
> 
> 赞同：6
> 
> 时间：2012-12-12T21:51:17.520
> 
> 标签：ruby, ruby-on-rails-3, passenger, rbenv

我只是想在 Ubuntu 12.04 上设置我的第一台 Rails 服务器。我安装了 rbenv（作为用户：`deployer`使用组 sudo 和管理员）。现在尝试根据他们的文档安装乘客。

我运行`passenger-install-nginx-module`它开始但然后我得到

```
Please specify a prefix directory [/opt/nginx]: 

--------------------------------------------

Permission problems

This installer must be able to write to the following directory:

/opt/nginx

But it can't do that, because you're running the installer as deployer. 
```

好的，然后我运行`sudo passenger-install-nginx-module`，然后获取`sudo: passenger-install-nginx-module: command not found`.

这是否意味着我必须通过以 root 身份登录来安装它，为 root 用户安装整个 rbenv 然后安装乘客？我阅读的每个教程都是从非 root 用户帐户运行的：/，它对我不起作用。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-12T22:37:20.237

正如我在评论中所写，您必须`passenger-install-nginx-module`使用完整路径以 root 身份运行，因为它不在`$PATH`bash 的 var 中。要找出路径，请运行`which passenger-install-nginx-module`

# magento - Magento 安装中的 PHP 文件重复？

> ID：13849316
> 
> 赞同：2
> 
> 时间：2012-12-12T21:51:38.037
> 
> 标签：magento, magento-1.7

一个客户的 Magento 网站在 Magento Connect 的顶部有奇怪的字符：

![在此处输入图像描述](../Images/82b0cb488e5baae401a236c4a719ea7d.png)

我们尝试安装插件并收到以下错误：

![Magento 安装错误](../Images/98b54b0f530aa148997da87332b53355.png)

事实证明，问题出在`lib/Mage/Connect`. 例如，有`Remote.php`但也有`._Remote.php`。[这个论坛帖子](http://www.magentocommerce.com/boards/viewthread/266146/)是我们发现细节的方式。

（删除重复文件更正了问题）。

我想知道 - 以前有没有其他人在 Magento 中遇到过这个重复的 PHP 文件问题？知道原因是什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:43:42.540

这些文件很可能是 OS X 的 HFS+ 文件系统的元数据文件。如果您对细节感兴趣，请参阅Apple Stack Exchange 上的[整个线程](https://apple.stackexchange.com/questions/14980/why-are-dot-underscore-files-created-and-how-can-i-avoid-them)以获得一些好的起点。

过于简单化了，当您在 OS X 上创建 tar 存档时，这些文件与“真实”文件一起包含。这允许 Macintosh 特定的元数据在转换为不是专门为 Mac 创建的文件格式中幸存下来。如果您在 Mac 上解压文件，则保留元数据。如果您在非 Mac 上解压文件，`._`则会在需要元数据时生成文件。

我的猜测是，在某些时候，有人`tar`编辑了这些文件以将它们从他们的 Mac 移动到生产服务器，这带来了这些`._`文件。您可以通过运行来避免这种情况

```
export COPYFILE_DISABLE=true 
```

从终端复制文件之前。详情[请看这里](https://superuser.com/questions/61185/why-do-i-get-files-like-foo-in-my-tarball-on-os-x)。

（很奇怪的是，PHP 会尝试包含这些文件而不是正确的文件——你是否调试得足够远，知道为什么/通过它连接在做什么？）

# java - 当我阅读图像时，我第一次尝试 Java 游戏时以 7 fps 结束？

> ID：13849320
> 
> 赞同：1
> 
> 时间：2012-12-12T21:51:48.550
> 
> 标签：java, javax.imageio, frame-rate

最近我一直在尝试利用我在 CS 课上获得的知识来构建一个小游戏（2d，没什么大不了的）。在阅读了这些与图形相关的类的文档大约 2 周后，我最终遇到了这种情况：我有一个正在运行的系统，它以每秒 60 次游戏逻辑更新/60 帧的速度运行（这个系统运行得非常好：D）。作为第一个小测试，我想让图像在屏幕上移动。这就是代码（部分是我的，部分来自一些教程）：

```
import java.awt.BorderLayout;
import java.awt.Canvas;
import java.awt.Color;

import java.awt.Font;
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.Dimension;
import java.awt.Graphics;

import java.awt.image.BufferStrategy;
import java.awt.image.BufferedImage;
import java.io.File;
import java.net.URL;

import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;

public class Game extends Canvas implements Runnable{
private static final long serialVersionUID = 1L;

public static final String NAME= "PokeCraft PRE-ALPHA";
public static final int HEIGHT=720;
public static final int WIDTH=HEIGHT*16/9;
public static final int SCALE=1;

private int fps=0;
private int tps=0;

private boolean running;
private int tickCount;
public void start(){
    running = true;
    new Thread(this).start();
}

public void stop(){
    running = false;

}

public void render(){
    BufferStrategy bufferStrategy =getBufferStrategy();
    if(bufferStrategy==null){
        this.createBufferStrategy(3);
        return;
    }

    /* render function */

      Graphics g = (Graphics) bufferStrategy.getDrawGraphics();
      g.clearRect(0, 0, super.getWidth(), super.getHeight());

      Image img = null;
      try{
          String imgPath = "data/MF.png";
          img = ImageIO.read(getClass().getResourceAsStream(imgPath));

      } catch(Exception e){
          System.out.println(e);
      }

        g.drawImage(img, tickCount, 0, null);
        Font font = new Font("Verdana",0,11);
        g.setFont(font);
        g.setColor(Color.RED);
        g.drawString(NAME+" / "+fps+" fps, "+tps+"tps", 5, 15);
      g.dispose();
      bufferStrategy.show();
}

public void run() {
    long lastTime= System.nanoTime();
    double unprocessed = 0;
    double nsPerTick = 1000000000.0/60.0;
    int frames = 0;
    int ticks = 0;
    long lastTimer1 = System.currentTimeMillis();

    while(running){
        long now = System.nanoTime();
        unprocessed += (now-lastTime)/nsPerTick;
        lastTime= now;
        boolean shouldRender= false;
        while(unprocessed >= 1){
            ticks++;
            tick();
            unprocessed -= 1;
            shouldRender = true;
        }
        if(shouldRender){
        frames++;
        render();
        }

        if(System.currentTimeMillis()-lastTimer1 > 1000){

            lastTimer1 += 1000;
            System.out.println(ticks+" ticks, "+frames + " fps");
            fps=frames;
            tps=ticks;
            ticks = 0;
            frames = 0;
        }
    }
}

public void tick(){
    tickCount++;
}

public static void main(String[] args){
    Game game= new Game();
    game.setPreferredSize(new Dimension(WIDTH*SCALE, HEIGHT*SCALE));
    game.setMinimumSize(new Dimension(WIDTH*SCALE, HEIGHT*SCALE));
    game.setMaximumSize(new Dimension(WIDTH*SCALE, HEIGHT*SCALE));

    JFrame frame = new JFrame(Game.NAME);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setLayout(new BorderLayout());
    frame.add(game);
    frame.pack();
    frame.setResizable(true);
    frame.setLocationRelativeTo(null);
    frame.setVisible(true);

    game.start();
    }
} 
```

ImageIO.read(...) 真的很难达到性能（根据 VisualVM，它需要 ~200 毫秒/运行）。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T21:54:42.003

读取图像本质上是一项昂贵的操作。

因此，您应该在开始游戏时读取*一次*图像，并将其保存在内存中以供以后访问。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T21:58:37.653

避免在每次渲染时加载图像。使其成为类变量并仅加载一次。像这样：

```
import java.awt.BorderLayout;
import java.awt.Canvas;
import java.awt.Color;

import java.awt.Font;
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.Dimension;
import java.awt.Graphics;

import java.awt.image.BufferStrategy;
import java.awt.image.BufferedImage;
import java.io.File;
import java.net.URL;

import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;

public class Game extends Canvas implements Runnable {
    private static final long serialVersionUID = 1L;

    public static final String NAME = "PokeCraft PRE-ALPHA";
    public static final int HEIGHT = 720;
    public static final int WIDTH = HEIGHT * 16 / 9;
    public static final int SCALE = 1;

    private int fps = 0;
    private int tps = 0;
    private Image img = null;

    private boolean running;
    private int tickCount;

    public void start() {
        running = true;
        new Thread(this).start();
    }

    public void stop() {
        running = false;

    }

    public void render() {
        BufferStrategy bufferStrategy = getBufferStrategy();
        if (bufferStrategy == null) {
            this.createBufferStrategy(3);
            return;
        }

        /* render function */

        Graphics g = (Graphics) bufferStrategy.getDrawGraphics();
        g.clearRect(0, 0, super.getWidth(), super.getHeight());

        if (img == null) {
            try {
                String imgPath = "data/MF.png";
                img = ImageIO.read(getClass().getResourceAsStream(imgPath));
            } catch (Exception e) {
                System.out.println(e);
            }
        }

        g.drawImage(img, tickCount, 0, null);
        Font font = new Font("Verdana", 0, 11);
        g.setFont(font);
        g.setColor(Color.RED);
        g.drawString(NAME + " / " + fps + " fps, " + tps + "tps", 5, 15);
        g.dispose();
        bufferStrategy.show();
    }

    public void run() {
        long lastTime = System.nanoTime();
        double unprocessed = 0;
        double nsPerTick = 1000000000.0 / 60.0;
        int frames = 0;
        int ticks = 0;
        long lastTimer1 = System.currentTimeMillis();

        while (running) {
            long now = System.nanoTime();
            unprocessed += (now - lastTime) / nsPerTick;
            lastTime = now;
            boolean shouldRender = false;
            while (unprocessed >= 1) {
                ticks++;
                tick();
                unprocessed -= 1;
                shouldRender = true;
            }
            if (shouldRender) {
                frames++;
                render();
            }

            if (System.currentTimeMillis() - lastTimer1 > 1000) {

                lastTimer1 += 1000;
                System.out.println(ticks + " ticks, " + frames + " fps");
                fps = frames;
                tps = ticks;
                ticks = 0;
                frames = 0;
            }
        }
    }

    public void tick() {
        tickCount++;
    }

    public static void main(String[] args) {
        Game game = new Game();
        game.setPreferredSize(new Dimension(WIDTH * SCALE, HEIGHT * SCALE));
        game.setMinimumSize(new Dimension(WIDTH * SCALE, HEIGHT * SCALE));
        game.setMaximumSize(new Dimension(WIDTH * SCALE, HEIGHT * SCALE));

        JFrame frame = new JFrame(Game.NAME);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLayout(new BorderLayout());
        frame.add(game);
        frame.pack();
        frame.setResizable(true);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);

        game.start();
    }
} 
```

字体也是如此，尽管这可能不会像加载图像那样影响性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T22:06:27.453

Disk operations are incredibly slow, and there's no need to access the file each loop, which is what you're currently doing. Make your img variable a class variable and instantiate it before entering the while(running) loop in your run() method.

# java - 找到每个控制器的新选项

> ID：13849322
> 
> 赞同：1
> 
> 时间：2012-12-12T21:51:52.933
> 
> 标签：java, arrays, jcombobox, jinput

> **可能重复：**
> [JComboBox 的值](https://stackoverflow.com/questions/9650151/values-of-jcombobox)

我有这样的代码：

```
import net.java.games.input.Controller;
import net.java.games.input.Controller.Type;
import net.java.games.input.ControllerEnvironment;

public class ControllerFinder
{
    public static void main(String[] args)
    {
        try
        {
            ControllerEnvironment ce = ControllerEnvironment.getDefaultEnvironment();
            Controller[] cs = ce.getControllers();
            for (int i = 0; i < cs.length; i++)
            {
                String name = cs[i].getName();
                Type type = cs[i].getType();
            }
        }
        catch (Exception exc)
        {
            System.err.println("No controller found");
        }
    }
} 
```

我如何制作一个具有 JComboBox 并在

```
String[] {"...", "..."}; 
```

找到每个设备的 JComboBox 的数组？谢谢！PS我正在使用JInput。

# wpf - WPF StackPanel 的拉伸

> ID：13849325
> 
> 赞同：0
> 
> 时间：2012-12-12T21:52:03.613
> 
> 标签：wpf, button, user-controls, wpf-controls, stackpanel

我正在玩 WPF，我正在尝试创建一个`ImageButton`控件。我创建了一个`UserControl`如下：

```
<UserControl
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         mc:Ignorable="d" 
         x:Class="WpfPractise.Controls.ImageButton"
         Height="auto" Width="auto" x:Name="ImageButtonControl">
<Button>
    <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch">
        <Image Source="{Binding Image, ElementName=ImageButtonControl}"
               Width="16" Height="16"
           Margin="5,0,0,0" VerticalAlignment="Center"/>
        <TextBlock Text="{Binding Text, ElementName=ImageButtonControl}"
           Margin="5,0,0,0" VerticalAlignment="Center"/>
    </StackPanel>
</Button> 
```

这工作正常，除了 StackPanel 不会拉伸以填充宽度或高度！我已经在它的位置尝试了一个网格，但无济于事。有什么想法我哪里出错了吗？

例子：

![例子](../Images/3763d9f6cc9615e45e8d65abc73c571d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T22:21:14.343

如果要将`Button`内容左对齐，则必须设置`HorizontalContentAlignment`按钮的

```
 <Button HorizontalContentAlignment="Left" VerticalContentAlignment="Center">
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch">
            <Image Source="{Binding Image, ElementName=ImageButtonControl}"
           Width="16" Height="16"
       Margin="5,0,0,0" VerticalAlignment="Center"/>
            <TextBlock Text="{Binding Text, ElementName=ImageButtonControl}"
       Margin="5,0,0,0" VerticalAlignment="Center"/>
        </StackPanel>
    </Button> 
```

# javascript - 使用 jQuery 获取带有溢出图像的视口大小时遇到 问题

> ID：13849327
> 
> 赞同：0
> 
> 时间：2012-12-12T21:52:12.597
> 
> 标签：javascript, jquery, css, dom, viewport

我已经被这个烦人的错误困住了几个小时了。我需要获取浏览器窗口的视口（具体来说，只是浏览器中可见区域的高度）。环顾四周，我发现jQuery可以做到这一点：

```
$(window).height() 
```

当我第一次加载页面时，这个值是准确的，但是对于我正在处理的网站，如果我调整浏览器窗口的大小，`$(window).height()`现在将成为整个文档的高度（包括不可见部分。[我简化了我的网站，以便它演示我遇到的](http://rwell.org/albums/)问题。确保图像溢出页面以演示我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:14:46.787

明确指定 doctype 修复它

```
<!DOCTYPE html> 
```

# java - scrollView 中的磁效应

> ID：13849333
> 
> 赞同：2
> 
> 时间：2012-12-12T21:52:31.550
> 
> 标签：java, android, scrollview

我在（垂直）ScrollView 中显示一系列图像。这个想法是它类似于某种拇指轮。我想让 scrollView 以一定的间隔“停止”或“点击”，就像它通过磁效应“捕获”最近的位置一样。您可以在图片库中多次看到这种磁性捕获效果。

此滚动视图是否有任何特定属性可以启用此效果？可能不是，因为我对此进行了深入的搜索。但你永远不知道...

如果没有，是否可以在 Java 代码中实现它？

或任何其他提示 - 也许不使用 ScrollView？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:14:47.567

查看[RealViewSwitcher](http://marcreichelt.blogspot.com/2010/09/android-use-realviewswitcher-to-switch.html)。经过一些修改后，它应该可以按照您想要的方式工作

# php - 路径问题 HTML

> ID：13849334
> 
> 赞同：0
> 
> 时间：2012-12-12T21:52:33.690
> 
> 标签：php, html, xcode, web

我正在创建自己的网站，但我遇到了一些路径问题。

当我引用路径时，我的脚本不会加载。我只是在我的存储库下创建了一个名为“js”的文件夹，并正在尝试以下代码：

```
<script src="js/startup.js"></script> 
```

但是脚本不会加载。

我还编写了一些 PHP 脚本并使用了 include，它似乎在那里工作得很好。有小费吗？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:58:18.727

当包含浏览器的资源时，路径是相对于 web 根目录的，但是当包含 php 文件时，它是相对于当前文件的。

```
/project
  /webRoot
    -index.php
    /js
      -startup.js
  /lib
    -some.php 
```

鉴于这种结构，您的脚本标签将起作用，即使包含在`some.php`. 在 index.php 中，您需要

```
include(dirname(__FILE__).'/../lib/some.php'); 
```

# wpf - WPF Adorner 出现在鼠标悬停动画上 - 最好的模式是什么？

> ID：13849335
> 
> 赞同：2
> 
> 时间：2012-12-12T21:52:47.647
> 
> 标签：wpf, adorner

**Adorner是在****Image**的**一部分**上定义的。所需的行为如下：

 **1.  当鼠标悬停在图像区域（包括装饰器区域）上时，会出现装饰器。
2.  当鼠标离开图像和装饰器区域时，装饰器消失。
3.  装饰器的出现和消失是通过淡入/淡出动画来实现的。
4.  点击 Adorner 区域必须引发事件 AdornerClicked
5.  单击装饰器未隐藏的图像上的区域，必须提升 ImageClicked。

**一个天真的实现**

在图像的 MouseEnter 和 MouseLeave 事件的 Adorner 不透明度上附加动画，并为每个事件附加 Click 事件。然而，当鼠标直接位于装饰器上方时，这会导致装饰器消失（因为在下图中触发了 MouseLeave），违反了要求 1。

对简单实现的一个可能的修改是在 Adorner 上设置 IsHitTestVisible=false。但是，装饰器没有捕获任何点击，这违反了要求 4。

**满足要求的正确模式是什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-05T12:03:12.673

一个有点老的问题，但我刚刚遇到了同样的问题，找不到答案，所以这就是我想出的。

所以问题是控件及其装饰器重叠并且将装饰器设置为可见会触发装饰控件上的 MouseLeave，因为它现在被装饰器覆盖。

解决方案是对装饰控件及其装饰器上的每个 MouseEnter 和 MouseLeave 做出反应，并手动进行命中测试。如果它们中的任何一个被击中，那么装饰器应该是可见的，否则会折叠。

因此，您需要能够从装饰控件中获取装饰器，反之亦然。从装饰器获取装饰控件没有问题（使用 AdornedElement 属性），但框架（AFAIK）不提供控件的装饰器，因此我使用字典将我的控件映射到其装饰器列表。

这是我的 Panel 派生类中的代码（包含并排列我的控件及其装饰器）：

```
private readonly Dictionary<Control, List<Adorner>> _controlToAdornersMap;

...

private void CreateMyControl()
{
    var control = new MyControl();
    control.MouseEnter += OnMyControlMouseEnterOrLeave;
    control.MouseLeave += OnMyControlMouseEnterOrLeave;
    Children.Add(control);
    AddAdorners(control);
}

private void AddAdorners(Control control)
{
    var myAdorner = new MyAdorner(control);
    myAdorner.MouseEnter += OnMyAdornerMouseEnterOrLeave;
    myAdorner.MouseLeave += OnMyAdornerMouseEnterOrLeave;

    var adornerLayer = AdornerLayer.GetAdornerLayer(control);
    adornerLayer.Add(myAdorner);

    _controlToAdornersMap[control] = new List<Adorner> {myAdorner};
}

private void OnMyControlMouseEnterOrLeave(object sender, MouseEventArgs e)
{
    HitTestAndSetAdornersVisibility((MyControl)sender, e);
}

private void OnMyAdornerMouseEnterOrLeave(object sender, MouseEventArgs e)
{
    var adorner = (Adorner)sender;
    HitTestAndSetAdornersVisibility((MyControl)adorner.AdornedElement, e);
}

private void HitTestAndSetAdornersVisibility(MyControl control, MouseEventArgs e)
{
    var adorners = _controlToAdornersMap[control];
    var hitTestSubjects = new List<UIElement> { control }.Concat(adorners);
    var hit = hitTestSubjects.Any(i => VisualTreeHelper.HitTest(i, e.GetPosition(i)) != null);

    SetAdornersVisibility(adorners, hit ? Visibility.Visible : Visibility.Collapsed);
}

private static void SetAdornersVisibility(IEnumerable<Adorner> adorners, Visibility visibility)
{
    if (adorners != null)
        foreach (var adorner in adorners)
            adorner.Visibility = visibility;
} 
```**

# dart - 是否有通过代理解决 pub 依赖项的解决方法？

> ID：13849336
> 
> 赞同：3
> 
> 时间：2012-12-12T21:52:53.767
> 
> 标签：dart, dart-pub

我正在尝试使用[https://github.com/dart-lang/web-ui-code-lab](https://github.com/dart-lang/web-ui-code-lab)进行 dart 开发。如果我按照 pdf 并打开 step05，然后尝试运行 chat_server.dart，我会收到此错误（我的路径中没有空格，以防相关）：

```
dart --enable-checked-mode bin/chat_server.dart

Unable to open file: path/to/web-ui-code-lab-master/step05/bin/packages/dart_chat/file_logger.dart'file:///path/to/dart/web-ui-code-lab-master/step05/bin/chat_server.dart': Error: line 5 pos 1: library handler failed
import 'package:dart_chat/file_logger.dart' as log;
^ 
```

我认为这意味着缺少一些依赖项，但我无法运行 pub install 因为我在公司 http 代理后面：

```
Running pub install ...
Pub install failed, [1] Resolving dependencies...
Timed out trying to find package "web_ui 0.2.8+6" at http://pub.dartlang.org. 
```

因此，我开始寻找 pub 依赖解析的临时解决方法。我尝试更改 pubspec.yaml 以通过 git:// 协议而不是 http （如果不通过代理将无法解决）：

```
name: dart_chat
description: This is a chat app written in Dart using the Dart Web UI package

dependencies:
  web_ui:
    git: git://github.com/dart-lang/web-ui.git 
```

我使用 pub install 比以前走得更远，所以我认为它成功通过了 git 协议并试图解决 web_ui 的依赖关系，但不幸的是，这样做对 web_ui 的日志记录依赖关系失败（看起来它仍在通过 http://） ：

```
Running pub install ...
Pub install failed, [1] Resolving dependencies...
Timed out trying to find package "logging 0.2.7" at http://pub.dartlang.org. 
```

看起来我也无法更改 yaml 以使用 sdk 的日志记录依赖项：

```
logging:
    sdk: logging 
```

因为那是与 web_ui 不兼容的来源：

```
Pub install failed, [1] Resolving dependencies...
Incompatible dependencies on 'logging':
- 'dart_chat' depends on it from source 'sdk'
- 'web_ui' depends on it from source 'hosted' 
```

有没有其他方法可以使用当前的开发工具解决这个代理问题？我可以以某种方式镜像 pub.dartlang.org 吗？或者镜像每个依赖项的 git 存储库？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T23:38:15.070

你说你用的是Mac。如果是笔记本电脑，为什么不在家尝试一下呢？我会将此问题通知 pub 的作者，看看他是否有任何建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T22:46:34.283

目前还没有办法在 Dart 编辑器中设置代理，你可以在[这个 issue 上加注星标](http://code.google.com/p/dart/issues/detail?id=5455)来检查它什么时候可用。

我找到了在代理后面运行 Pub 安装/更新的解决方法：在 Windows 中，您可以访问“[环境变量](http://www.itechtalk.com/thread3595.html)”并添加一个以`HTTP_PROXY`该值 命名的变量

```
https://USER:PASSWORD@my.proxy.adress:PORT 
```

# algorithm - 使用基于主要点的度数获取一些点位置

> ID：13849340
> 
> 赞同：1
> 
> 时间：2012-12-12T21:53:11.207
> 
> 标签：algorithm, trigonometry

有什么方法可以让 P2 的位置 (x, y) 知道 P1 的位置 (30, 30) 以及它们之间的度数？

**编辑**
是的，我知道中心位置，并且 P1 将始终位于其上方。
角度可以从 0º 到 360º。

![例子](../Images/28f33dcf5d1657f4309d5052b347ffa4.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T22:04:45.763

考虑到它的角度（从顶部而不是右侧）和圆的半径，您实际上只是想在圆上找到一个点。

```
X = center.X + r * cos(90 - angle)  
Y = center.Y + r * sin(90 - angle) 
```

您可能需要转换为弧度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T22:11:21.733

```
assume : 0<a:angle<90 ,c(x,y):center ,r:radius:distance between c & p1 
```

b=弧(cos((xp1-xcenter)/r)))

> xp2 = xcenter + r * (cos(ba)) ,
> yp2 = ycenter + r * (sin(ba))

如果 b=90 和 xp1,yp1=30 ：

> xp2 = r * cos(90-a) + 30 = r * sin(a) + 30
> 
> yp2 = 30 - r * sin(90-a) = 30 - r * cos(a)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T21:55:46.530

是的，如果您知道圆的直径（或半径）（或等效地，圆心的位置）。

如果你这样做了，那么你可以向后工作到圆的中心，然后使用 sin() 和 cos() 来找到 P2 的位置（当然还有其他方法——这只是一种明显的可能性）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T22:02:07.147

只需将 P1 围绕圆心旋转给定角度即可。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T22:06:12.243

它是一个等腰三角形。在那个三角形中，你知道两个点和所有的角度。只需找到第三点这是答案：[如何计算三角形（2D）中第三点的坐标，知道 2 点坐标，所有长度和所有角度](https://stackoverflow.com/questions/11052720/how-to-calculate-coordinates-of-third-point-in-a-triangle-2d-knowing-2-points)

# android - Android Market 自动获取买家邮件进行身份验证

> ID：13849341
> 
> 赞同：0
> 
> 时间：2012-12-12T21:53:14.080
> 
> 标签：android, google-play

我目前正在制作一款针对 android 的多平台游戏。我希望能够在有人购买我的应用程序以将他添加到我的数据库中的“可激活邮件”时收到通知，以让他在同一个数据库中创建一个帐户。所以我需要谷歌以任何方式自动向我发送买家的邮件。我已经阅读了一些关于 Notification API 的信息，但它似乎不适用于 Android 市场。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:15:44.387

AccountManager 应该有所帮助： [如何获取 Android 设备的主电子邮件地址](https://stackoverflow.com/questions/2112965/how-to-get-the-android-devices-primary-e-mail-address)

需要一些额外的权限，并且可以有多个 android 帐户，因此您应该要求用户选择一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T03:54:35.380

您可以使用 Google checkout API 来获得购买通知。IIRC，它包含有关用户的一些信息，包括电子邮件地址。它仅在美国（也许还有英国）可用，所以如果您在另一个国家/地区，您就不走运了。在 Checkout 控制台中查找“商家密钥”，如果可以找到，则可以使用 API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T22:02:53.167

AFAIK There exists no API to do what you want.

Your best bet is just adding whatever notification you need to send to the first run of your application. That way after someone buys it and runs it the first time it will send a notification to your server or wherever you need it to go.

# objective-c - 更改非标准窗口的大小（Adobe CS6、MonoDevelop 等）

> ID：13849343
> 
> 赞同：0
> 
> 时间：2012-12-12T21:53:15.827
> 
> 标签：objective-c, macos, accessibility, nswindow, nsrect

我正在开发一个应用程序，它可以更改窗口的大小并使用 Accessibility API 为用户移动它们。不过，我遇到了所谓的“自定义”窗口的问题：

当我设置值时，像 Adob​​e CS6 这样的非标准窗口不会最大化或改变位置——`NSAccessibilitySizeAttribute`实际上没有任何反应。它在所有其他窗口上都可以正常工作。

有什么解决方法吗？有什么我应该特别看的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T02:26:35.310

如果内存正常，Adobe 会使用大量自定义 UI 小部件。您可以查看 Adob​​e 的文档来为他们的应用程序编写脚本，或联系 Adob​​e。

# php - PHP 获取本地机器时间（windows 或 linux）

> ID：13849344
> 
> 赞同：2
> 
> 时间：2012-12-12T21:53:15.140
> 
> 标签：php, date, datetime, timezone

我正在编写一个人们将运行的 php 机器人，该机器人需要准确的时间才能正常运行。我目前使用的时间戳功能如下：

```
//return string of a timestamp
private function timestamp()
{
    $date = date_create();
    return "(" . $date->format('H:i:s') . ")";
} 
```

现在，我知道有一个设置时区的功能

[http://php.net/manual/en/function.date-timezone-set.php](http://php.net/manual/en/function.date-timezone-set.php)

我的问题是我将有用户，即使不是对 PHP 了解甚少的用户来设置时区。我不能依赖他们设置自己的时区，因为它会让人头疼，因为格式和拼写错误，至少，如果我们可以通过数字而不是位置来设置时区，例如我的时区是 -6...

```
date_default_timezone_set("-6"); 
```

我发现有人试图创建一个函数来设置本地机器的时间，但他们的函数要么过时，要么不起作用。

是否有一种功能或另一种强大的方法来获取 php 5.0+ 的 linux 和 windows 机器的本地时间。

再次感谢你的帮助。

编辑：甚至 localtime() 返回错误的时间......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:22:10.967

您可以使用[支持的时区，也可以使用](http://php.net/manual/en/timezones.php)[其他时](http://php.net/manual/en/timezones.others.php)区设置一个，例如

```
date_default_timezone_set('Etc/GMT' . '-6'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-02T11:30:06.517

您可以通过下面的 Javascript 获取当前当地时间。

```
 <script>

        // For 24 hours    

        var ct = new Date();
        var hr = ct.getHours();
        var mt = ct.getMinutes();
        if (mt < 10) {
            mt = "0" + mt;
        }
        document.write("<b>" + hr + ":" + mt + " " + "</b>");    

        // For 12 hours (AM / PM)

        var ct = new Date();
        var hr = ct.getHours();
        var mt = ct.getMinutes();

        var ampm = "AM";

        if (hr >= 12) {
            ampm = "PM";
            hr = hr - 12;
        }
        if (hr == 0) {
            hr = 12;
        }
        if (mt < 10) {
            mt = "0" + mt;
        }

        document.write("<b>" + hr + ":" + mt + " " + ampm + "</b>");

   </script> 
```

# sql-server - 将现有数据库复制到新数据库

> ID：13849345
> 
> 赞同：0
> 
> 时间：2012-12-12T21:53:17.260
> 
> 标签：sql-server, copy, database-restore

我试图找出在现有数据库上复制...参考数据库的“最佳”或常用方法。

基本上，我将教一些 CIS 专业的一些 MVC4(C#)/EF 并希望提供一个数据库来进行 DB 的第一次开发。

我预计需要的是一个轻松恢复数据的过程，以防他们搞砸了。

我真的想找出最少的资源密集型选项来做到这一点。因为它只是在我演示这个时关闭了我的家庭服务器，并且不希望它大量消耗资源，因为它是一个相对低功率的盒子（AMD 3core/4gig/raid1）。我通常不在那里运行 SQL Server，通常只是用它来修补不同的服务器技术。如果重要的话，我现在正在运行 Server 2012。

解决方案可能是......

*   批处理文件偶尔运行
*   Powershell 脚本（我需要这方面的指导，因为我在 Powershell 中从来没有做过很多事情）
*   SQL 管理工作室
*   C# 程序
*   （实际上任何可在 Server 2012 上运行的东西）

我在这里找到了几篇关于备份和恢复的帖子，但不知道这是否是我所拥有的场景的理想选择。

**编辑：** 我希望解决方案是我可以安排的东西，一旦设置好就可以放手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T00:43:52.557

最简单的，也可能是 CPU 密集度最低的将是一个普通的备份/恢复数据库——快速、简单和无痛。

很容易找到将为您执行此操作的脚本，并且一旦您有了脚本，就很容易安排它通过您选择的调度程序运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T22:06:01.737

您是否尝试过使用复制数据库向导？

[http://msdn.microsoft.com/en-us/library/ms188664.aspx](http://msdn.microsoft.com/en-us/library/ms188664.aspx)

您可以使用其他一些自动化工具，但这应该是一个好的开始。

# performance - java应用性能分析

> ID：13849350
> 
> 赞同：0
> 
> 时间：2012-12-12T21:53:51.550
> 
> 标签：performance

我想对我的应用程序进行性能测量，并希望能够为特定模块配置统计信息（为特定模块启用并为某些模块禁用），我想测量内存使用情况、线程、平均带宽等..

任何人都可以建议一些东西，我是新手。我认为 Visual VM 很好，但它不支持配置不同的模块。

Perf4j 或 Admin4j 在这里工作吗？有人用过这些吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T05:02:06.683

有点晚了，但可能这就是你要找的东西：Java Management Extensions (JMX) API

[http://docs.oracle.com/javase/6/docs/technotes/guides/jmx/](http://docs.oracle.com/javase/6/docs/technotes/guides/jmx/)

# r - 展平ggplot2中的alpha通道

> ID：13849351
> 
> 赞同：7
> 
> 时间：2012-12-12T21:54:03.730
> 
> 标签：r, ggplot2, alpha

ggplot2 的一些对象（函数）支持 alpha 通道。

[http://docs.ggplot2.org/current/geom_point.html](http://docs.ggplot2.org/current/geom_point.html)

这是一个不错的功能，但 pdf 和 png 文件中的透明颜色通常是各种麻烦的来源。

如何使用 alpha 选项并获得扁平化的 pdf 输出文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-17T02:32:56.340

I had ongoing problems with a large Latex doc created with knitr + ggplot that was perfectly readable on my mac but was unopenable for Windows users. After numerous attempts at optimizing and flattening the pdf, I finally isolated the issue to a single alpha-heavy plot. In my case, switching from pdf to png output made the difference (though, based on your question, it sounds like pngs may not solve your problem).

If you are using knitr, you can automatically create a png version by setting the global (or chunk-specific) image output option dev to "png" instead of the default of "pdf". Depending on the plot, this can shrink the size & complexity of an alpha-heavy ggplot significantly. I've had a 10x reduction in plot file size from ~700KB to ~70KB (some simpler plots may actually increase in size, though).

The trade-off is there is likely to be some loss of resolution for the plots. For circulating a draft by email or for certain types of plots this may be fine. If the loss of resolution is too great, consider adjusting the dpi of the output (though, of course, this will increase the file size but may still work better in cross-platform settings).

To set the global image output to "png" you could use code like this:

```
 library(knitr)
    opts_chunk$set(dev="png", dpi=200) 
```

To set the output to "png" within a specific chunk (e.g., just the plot that is alpha-heavy), use the `dev="png"` option. The example below generates a regular, non-alpha heavy plot. With knitr + Latex, the `include=FALSE` option will prevent a pdf version from automatically being included (I'm not sure if this is necessary for RMarkdown).

```
 <<myplot, dev="png", dpi=200, include=FALSE>> 
    library(ggplot2)
    x <- 1:1000
    y <- 2*x + rnorm(1000, 0, 100)
    df <- data.frame(x,y)  
    ggplot(df, aes(x=x, y=y)) + geom_point(alpha=.3)
    @ 
```

The above code will generate a file called myplot.png which, in Latex, can then easily be included in the document with an includegraphics command nested in a figure environment.

```
 \begin{figure}[h!]
    \centering
    \scalebox{.5}{\includegraphics{myplot.png}}
    \caption{Some caption \label{fig:myplot}} 
    \end{figure} 
```

Another resource that might be helpful is this blog post hosted at R Bloggers:

[Fast-track publishing using knitr: exporting images for sharing and press](http://www.r-bloggers.com/fast-track-publishing-using-knitr-exporting-images-for-sharing-and-press-part-iii/)

Also, see the Plots section of [knitr options](http://yihui.name/knitr/options).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-31T13:11:23.520

为了避免在 LaTex 中出现类似图形的问题，我使用 R 生成 png 文件。在那里你可以使用该`type = c("cairo", "cairo-png", ...)`选项，对我来说，“windows”在那里工作得很好。之后，我使用 imagemagick 将其转换为 jpg 并将此 jpg 包含在我的 LaTeX 文件中，pdfLaTeX 结果然后是扁平化的 pdf 输出。

# visual-studio-2010 - 当两个实体脱离上下文时，为什么我无法在它们之间创建关系？

> ID：13849358
> 
> 赞同：0
> 
> 时间：2012-12-12T21:54:53.297
> 
> 标签：visual-studio-2010, c#-4.0, entity-framework-4, entity-relationship

我在 VS2010 中创建了一个 EDM 模型。`Permissions`并且`Roles`是我模型中的实体，具有多对多关系。我正在尝试在每个集合中的两个条目之间添加关系。

![在此处输入图像描述](../Images/2ce25c04eaca8fe36914d22b8dd2912f.png)

此代码有效：

```
private static void AttemptToLink() {
    using (var context = new UserAuthEntities()) {
        p = context.Permissions.Include("Roles").First();
        r = context.Roles.First();
        p.Roles.Add(r);
        context.SaveChanges();
    }
} 
```

但是下面的代码没有。有人可以告诉我我做错了什么吗？

```
internal class Program {
    private static Permission p;
    private static Role r;

    private static void Main(string[] args) {
        LoadEntities();
        LinkEntities();
        SaveEntities();
        Pause();
    }

    private static void LoadEntities() {
        using (var context = new UserAuthEntities()) {
            p = context.Permissions.Include("Roles").First();
            r = context.Roles.Include("Permissions").First();
        }
    }

    private static void LinkEntities() {
        p.Roles.Add(r);
    }

    private static void SaveEntities() {
        using (var context = new UserAuthEntities()) {
            context.Attach(p);
            context.Attach(r);
            int count = context.SaveChanges();
            Console.WriteLine(String.Format("Saved {0}.", count));
        }
    }

    private static void Pause() {
        Console.Write("Press enter...");
        Console.Read();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T01:29:10.447

[这个问题](https://stackoverflow.com/questions/824330/should-entity-framework-context-be-put-into-using-statement)有一个关于上下文是否需要保留在 using 语句中的答案。

# jquery - 取消选中不属于特定类别的复选框

> ID：13849361
> 
> 赞同：0
> 
> 时间：2012-12-12T21:54:55.817
> 
> 标签：jquery, asp.net

我正在尝试使用一组多选复选框，但其中一个选项可以是“N/A”。如果选中此项，我希望所有其他人（没有输入-na 类）都未选中。此外，如果选中了非 NA 复选框，我希望取消选中 NA 复选框。

我尝试了以下方法，但其他复选框没有发生任何事情：

```
<script type="text/javascript">
$(document).ready(function () {
    $("input[type=checkbox].input-na").change(function (event) {
        if ($(this).prop("checked")) {
            $('input[type=checkbox]').not('.input-na').prop('checked', false);
        }
    });

    $("input[type=checkbox]").not(".input-na").change(function (event) {
        if ($(this).prop("checked")) {
            $("input[type=checkbox].input-na").prop("checked", false);
        }
    });
}); 
```

它通过“if ($(this).prop("checked"))”进入这两个领域，我已经通过发出警报确认了这一点，所以这是取消选中的实际代码不起作用。

编辑：这是标记：

```
<fieldset data-role="controlgroup">

    <input type="hidden" name="Questions[0].ResponseOptions[0].key" value="1" />
    <input type="hidden" name="Questions[0].ResponseOptions[0].value.ResponseNum" value="1" />
    <input type="hidden" name="Questions[0].ResponseOptions[0].value.Text" value="Self service gas, paid at the pump" />
    <input type="hidden" name="Questions[0].ResponseOptions[0].value.IsNA" value="False" />

    <input type="checkbox" name="Questions[0].Responses" id="Question_040179122124101173157046112086076030096242133244_1" value="1" 

    />
    <label for="Question_040179122124101173157046112086076030096242133244_1">Self service gas, paid at the pump</label>

    <input type="hidden" name="Questions[0].ResponseOptions[1].key" value="2" />
    <input type="hidden" name="Questions[0].ResponseOptions[1].value.ResponseNum" value="2" />
    <input type="hidden" name="Questions[0].ResponseOptions[1].value.Text" value="Self service gas, paid inside at the kiosk or convenience store" />
    <input type="hidden" name="Questions[0].ResponseOptions[1].value.IsNA" value="False" />

    <input type="checkbox" name="Questions[0].Responses" id="Question_040179122124101173157046112086076030096242133244_2" value="2" 

    />
    <label for="Question_040179122124101173157046112086076030096242133244_2">Self service gas, paid inside at the kiosk or convenience store</label>

    <input type="hidden" name="Questions[0].ResponseOptions[2].key" value="3" />
    <input type="hidden" name="Questions[0].ResponseOptions[2].value.ResponseNum" value="3" />
    <input type="hidden" name="Questions[0].ResponseOptions[2].value.Text" value="Full service provided by attendant" />
    <input type="hidden" name="Questions[0].ResponseOptions[2].value.IsNA" value="False" />

    <input type="checkbox" name="Questions[0].Responses" id="Question_040179122124101173157046112086076030096242133244_3" value="3" 

    />
    <label for="Question_040179122124101173157046112086076030096242133244_3">Full service provided by attendant</label>

    <input type="hidden" name="Questions[0].ResponseOptions[3].key" value="4" />
    <input type="hidden" name="Questions[0].ResponseOptions[3].value.ResponseNum" value="4" />
    <input type="hidden" name="Questions[0].ResponseOptions[3].value.Text" value="Convenience store purchase (not including gas or diesel)" />
    <input type="hidden" name="Questions[0].ResponseOptions[3].value.IsNA" value="False" />

    <input type="checkbox" name="Questions[0].Responses" id="Question_040179122124101173157046112086076030096242133244_4" value="4" 

    />
    <label for="Question_040179122124101173157046112086076030096242133244_4">Convenience store purchase (not including gas or diesel)</label>

    <input type="hidden" name="Questions[0].ResponseOptions[4].key" value="5" />
    <input type="hidden" name="Questions[0].ResponseOptions[4].value.ResponseNum" value="5" />
    <input type="hidden" name="Questions[0].ResponseOptions[4].value.Text" value="Car wash" />
    <input type="hidden" name="Questions[0].ResponseOptions[4].value.IsNA" value="False" />

    <input type="checkbox" name="Questions[0].Responses" id="Question_040179122124101173157046112086076030096242133244_5" value="5" 

    />
    <label for="Question_040179122124101173157046112086076030096242133244_5">Car wash</label>

    <input type="hidden" name="Questions[0].ResponseOptions[5].key" value="6" />
    <input type="hidden" name="Questions[0].ResponseOptions[5].value.ResponseNum" value="6" />
    <input type="hidden" name="Questions[0].ResponseOptions[5].value.Text" value="Washrooms" />
    <input type="hidden" name="Questions[0].ResponseOptions[5].value.IsNA" value="False" />

    <input type="checkbox" name="Questions[0].Responses" id="Question_040179122124101173157046112086076030096242133244_6" value="6" 

    />
    <label for="Question_040179122124101173157046112086076030096242133244_6">Washrooms</label>

    <input type="hidden" name="Questions[0].ResponseOptions[6].key" value="7" />
    <input type="hidden" name="Questions[0].ResponseOptions[6].value.ResponseNum" value="7" />
    <input type="hidden" name="Questions[0].ResponseOptions[6].value.Text" value="None of the above" />
    <input type="hidden" name="Questions[0].ResponseOptions[6].value.IsNA" value="True" />

    <input type="checkbox" name="Questions[0].Responses" id="Question_040179122124101173157046112086076030096242133244_7" value="7" 

                                                                                                        class = "input-na"

    />
    <label for="Question_040179122124101173157046112086076030096242133244_7">None of the above</label> 
```

# elmah - ELMAH - 是否可以记录错误以及通过代码手动发送电子邮件？

> ID：13849367
> 
> 赞同：0
> 
> 时间：2012-12-12T21:55:30.207
> 
> 标签：elmah

我知道 Elmah 可以用来手动记录错误，就像可以使用 log4net 一样。但是，是否可以像处理未处理的异常一样同时记录捕​​获的异常以及通过电子邮件发送异常。

谢谢你的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:10:00.810

这个问题的答案是肯定的。

```
Elmah.ErrorSignal.FromCurrentContext().Raise(new Exception("logs it to ELMAH as well as it sends an email")); 
```

# vim - Vim 可以显示两个空格进行缩进，同时在文件中保留四个空格吗？

> ID：13849368
> 
> 赞同：14
> 
> 时间：2012-12-12T21:55:35.940
> 
> 标签：vim, indentation

我想为别人的项目工作，他使用 4 个空格进行缩进。我使用 2，我的屏幕不够大，无法舒适地使用 4 个空格进行编辑。

我可以将 Vim 配置为显示 2 个空格用于缩进，但将 4 个空格写入文件吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T03:45:14.277

^([这与这里](https://stackoverflow.com/questions/14514336/gvim-show-4-spaces-but-save-2-spaces-tabs)所问的相反。)

是的你可以！如果你有“隐藏”选项，你可以试试这个。

```
:syntax match spaces /  / conceal cchar= "Don't forget the space after cchar!
:set concealcursor=nvi
:set conceallevel=1 
```

以下是这些命令的作用：

*   将2个空格的替换字符设置为1个空格
*   在普通、可视和插入模式下隐藏光标下的文本
*   启用隐藏一个字符的文本

您仍然必须设置您的`tabstop`,`softtabstop`和`shiftwidth`to `4`，但它*看起来*和*感觉*就是这样`2`！但是，当您编写文件时，它确实是`4`.

如果你想关闭隐藏，你可以做以下两件事之一：

1.  删除隐藏规则`:syntax clear spaces`或
2.  允许隐藏的文本在光标下展开`:set concealcursor=`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T07:36:38.417

该帮助有一个关于不同选项卡宽度的类似用例的示例，请参阅`:help retab-example`。

将其调整为将空间减半/加倍：

```
:autocmd BufReadPost,BufWritePost  * %substitute/^\( \+\)\1/\1/e
:autocmd BufWritePre               * %substitute/^ \+/&&/e 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T22:17:08.113

如果他使用真正的空格而不是制表符（听起来像），不，您不能让 vim 在有 4 个空格的情况下显示 2 个空格。但是，您可以告诉 vim 使用以下命令将所有 4 个空格组替换为制表符字符，然后将它们显示为 2 个空格。

```
:set tabstop=4 ! display a tab as 4 columns
:set shiftwidth=4
:set noexpandtab
:gg=G   ! convert the whole file to tabs
:set tabstop=2 !display a tab as 2 columns
:set shiftwidth=2 
```

当你准备好提交你的作品时，

```
:set tabstop=4
:set shiftwidth=4
:set expandtab
:%retab 
```

应该把它转换回来。

# css - 防止浮动元素环绕（改为显示滚动条）

> ID：13849371
> 
> 赞同：3
> 
> 时间：2012-12-12T21:55:49.950
> 
> 标签：css, scroll, css-float, overflow

如何使 div 标签的元素不环绕，而是延伸到页面上的可用空间之外？

例如，我有：

```
<div class="container">
<div class="row">
    <div class="child">1</div>
    <div class="child">2</div>
    ...
    <div class="child">19</div>
    <div class="child">20</div>
</div>
<div class="row">
    <div class="child">1</div>
    <div class="child">2</div>
    ...
    <div class="child">19</div>
    <div class="child">20</div>
</div>
</div>​ 
```

CSS：

```
.container{
    overflow: scroll;
    width: 100%;
}
.row {
    clear: both;
} 
```

实际输出：

![在此处输入图像描述](../Images/fc8a7db5856dc22b473f148a05ceea31.png)

期望的输出：

![在此处输入图像描述](../Images/4fdd2244dc033435ce1921d7cc6bbf05.png)

[http://jsfiddle.net/kcW6w/](http://jsfiddle.net/kcW6w/)

我希望容器元素为 100% 宽，但有一个滚动条，这样每一行就不会环绕。

我发现如果我为`.row`元素设置一个大的、任意的宽度，它就可以正常工作。除了设置任意宽度之外，还有其他方法可以做到这一点吗？我不喜欢使用硬编码的宽度，因为宽度会动态变化。

```
.row {
    clear: both;
    width: 2000px;
} 
```

[http://jsfiddle.net/kcW6w/1/](http://jsfiddle.net/kcW6w/1/)

我还注意到 Safari 上的滚动条有些不一致，可能是因为我设置了任意值。

Mac OS X 上 Chrome 中的滚动条不一致（一直向右滚动）：

![在此处输入图像描述](../Images/1332e3e9e6e1d604bea52e946cfaa038.png)

Safari 甚至不显示滚动条。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:05:36.820

You can try this - [**DEMO**](http://jsfiddle.net/kcW6w/3/)

***CSS***

```
.container {
    overflow: scroll;
}

.row {
    white-space: nowrap;
    font-size: 0;
}

.child {
    font-size: 16px;
    width: 60px;
    height: 60px;
    border: 1px solid black;
    background-color: #ccc;
    display: inline-block;
} 
```

# python - Python "IndexError: 列表索引超出范围" | 目标：读取 1 个 excel 文件并将数据附加到第 2 个 excel 文件

> ID：13849372
> 
> 赞同：2
> 
> 时间：2012-12-12T21:55:53.363
> 
> 标签：python, excel, xlrd, xlwt

该脚本的目标是从每天从 cron 作业生成的 excel 文件中获取数据，并将该数据附加到“主”excel 文件的底部。

这是我现在的位置：

```
# Find the most recent excel file created by the cron job & open it.

localtime = time.localtime(time.time())
yy = localtime.tm_year
mm = localtime.tm_mon
dd = localtime.tm_mday

file_name = 'daily_' + str(yy) + '_' + str(mm) + '_' + str(dd-1) + '.xls'
file_loc = '/Users/' + file_name
new_sheet = open_workbook(file_loc, on_demand=True).sheet_by_index(0)

# Grab all the data from the recent cron job file starting at row 2 to avoid
# including headers.

for row in range(1, new_sheet.nrows):
    values = []
    for col in range(new_sheet.ncols):
        values.append(new_sheet.cell(row,col).value)
"""
The above loop structures the list 'values[]' in a way that the print
statement of value looks like the below output; which matches the formatting of 
master_file.xlsx:

        2341511  Sports 12112 Dog   324.92
        71611    Other  18192 Cat   128.17
        ...
"""

# Find the excel master file & open it.

sheet = open_workbook('master_file.xlsx').sheet_by_index(0)

# Find the first row that is empty.
new_row = sheet.nrows + 1

# Append the values[] list to the master file starting at row(new_row) and save
# the db file.

for row_num, row in enumerate(values, new_row):
    for col_num, col in enumerate(row):
        sheet.row(row_num).write(col_num, col)

sheet.save('master_file.xlsx') 
```

我的回溯错误是：

```
File "daily.py", line 45, in <module>
    sheet.row(row_num).write(col_num, col)
  File "/Users/code/env/lib/python2.7/site-packages/xlrd/sheet.py", line 462, in row
    for colx in xrange(len(self._cell_values[rowx]))
IndexError: list index out of range 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:21:52.907

代码的直觉是，您实际上并没有在迭代之前向工作表添加一行。

xlrd 看起来实际上并没有修改现有工作表的方法。查看此 SO 帖子，这可能会有所帮助...

[如何使用 xlrd 将新列和行添加到 .xls 文件](https://stackoverflow.com/questions/10763690/how-to-add-new-column-and-row-to-xls-file-using-xlrd)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T22:00:04.773

你的意思是有，`col(new_row)`而不是`col`，如：

```
for row_num, row in enumerate(values, col(new_row)):
    for col_num, col(new_row) in enumerate(row):
        sheet.row(row_num).write(col_num, col(new_row)) 
```

?

# c++ - CMakeLists 不会包含 Boost 标头

> ID：13849373
> 
> 赞同：0
> 
> 时间：2012-12-12T21:56:03.997
> 
> 标签：c++, ubuntu, boost, cmake

我正在尝试编译一个需要 Boost 的 CPP 库。我在Ubuntu下。

在我的一个文件中，我包含了一个 boost 标头

```
#include <boost/function.hpp> 
```

这是`CMakeLists.txt`

```
set(EXECUTABLE_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/bin)
set(LIBRARY_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/lib)

find_package(Boost COMPONENTS filesystem system serialization REQUIRED)

set(CAN_MASTER_INCLUDE_DIR include)

include_directories( ${Boost_INCLUDE_DIR}   
    ${CAN_MASTER_INCLUDE_DIR} 
    ${CAN_MASTER_INCLUDE_DIR}/boost #this is not the boost I'm talking about
    ${CAN_MASTER_INCLUDE_DIR}/timers_rtpreempt
    ${CAN_MASTER_INCLUDE_DIR}/timers_unix
    ${CAN_MASTER_INCLUDE_DIR}/timers_xeno
    ${CAN_MASTER_INCLUDE_DIR}/unix

)
LINK_DIRECTORIES($ENV{HOME}/Projects/canmaster/bin)

set(CAN_FESTIVAL_CPP drivers/unix/unix.c
    drivers/timers_xeno/timers_xeno.c
)

add_library(canfestival ${CAN_FESTIVAL_CPP}) 
```

当我尝试编译`cd buil && cmake .. && make VERBOSE=1`时，它返回以下错误：

```
/usr/bin/cmake -H/home/luca/ArmIkarus/canmaster -B/home/luca/ArmIkarus/canmaster/build_cmake --check-build-system CMakeFiles/Makefile.cmake 0
/usr/bin/cmake -E cmake_progress_start /home/luca/ArmIkarus/canmaster/build_cmake/CMakeFiles /home/luca/ArmIkarus/canmaster/build_cmake/CMakeFiles/progress.marks
make -f CMakeFiles/Makefile2 all
make[1]: Entering directory `/home/luca/ArmIkarus/canmaster/build_cmake'
make -f CMakeFiles/canfestival.dir/build.make CMakeFiles/canfestival.dir/depend
make[2]: Entering directory `/home/luca/ArmIkarus/canmaster/build_cmake'
cd /home/luca/ArmIkarus/canmaster/build_cmake && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/luca/ArmIkarus/canmaster /home/luca/ArmIkarus/canmaster /home/luca/ArmIkarus/canmaster/build_cmake /home/luca/ArmIkarus/canmaster/build_cmake /home/luca/ArmIkarus/canmaster/build_cmake/CMakeFiles/canfestival.dir/DependInfo.cmake --color=
Dependee "/home/luca/ArmIkarus/canmaster/build_cmake/CMakeFiles/CMakeDirectoryInformation.cmake" is newer than depender "/home/luca/ArmIkarus/canmaster/build_cmake/CMakeFiles/canfestival.dir/depend.internal".
Scanning dependencies of target canfestival
make[2]: Leaving directory `/home/luca/ArmIkarus/canmaster/build_cmake'
make -f CMakeFiles/canfestival.dir/build.make CMakeFiles/canfestival.dir/build
make[2]: Entering directory `/home/luca/ArmIkarus/canmaster/build_cmake'
/usr/bin/cmake -E cmake_progress_report /home/luca/ArmIkarus/canmaster/build_cmake/CMakeFiles 1
[ 10%] Building C object CMakeFiles/canfestival.dir/drivers/unix/unix.o
/usr/bin/gcc   -I/home/luca/ArmIkarus/canmaster/include -I/home/luca/ArmIkarus/canmaster/include/boost -I/home/luca/ArmIkarus/canmaster/include/timers_rtpreempt -I/home/luca/ArmIkarus/canmaster/include/timers_unix -I/home/luca/ArmIkarus/canmaster/include/timers_xeno -I/home/luca/ArmIkarus/canmaster/include/unix    -o CMakeFiles/canfestival.dir/drivers/unix/unix.o   -c /home/luca/ArmIkarus/canmaster/drivers/unix/unix.c
In file included from /home/luca/ArmIkarus/canmaster/include/can.h:28:0,
                 from /home/luca/ArmIkarus/canmaster/include/canDispatch.h:23,
                 from /home/luca/ArmIkarus/canmaster/drivers/unix/unix.c:36:
/usr/include/boost/function.hpp:13:57: fatal error: functional: No such file or directory
compilation terminated.
make[2]: *** [CMakeFiles/canfestival.dir/drivers/unix/unix.o] Error 1
make[2]: Leaving directory `/home/luca/ArmIkarus/canmaster/build_cmake'
make[1]: *** [CMakeFiles/canfestival.dir/all] Error 2
make[1]: Leaving directory `/home/luca/ArmIkarus/canmaster/build_cmake'
make: *** [all] Error 2 
```

似乎不包括提升路径。如果我尝试`${Boost_INCLUDE_DIR}`在`/usr/include`.`CMakeLists.txt`

我该如何解决？

编辑

这是 boost 调试的结果：

```
luca@luca-vmware:~/ArmIkarus/canmaster/build_cmake$ cmake -DBoost_DEBUG=ON ..
-- The C compiler identification is GNU
-- The CXX compiler identification is GNU
-- Check for working C compiler: /usr/bin/gcc
-- Check for working C compiler: /usr/bin/gcc -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/c++
-- Check for working CXX compiler: /usr/bin/c++ -- works
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:525 ] Boost not in cache
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:528 ] _boost_TEST_VERSIONS = 1.48.0;1.48;1.47.0;1.47;1.46.1;1.46.0;1.46;1.45.0;1.45;1.44.0;1.44;1.43.0;1.43;1.42.0;1.42;1.41.0;1.41;1.40.0;1.40;1.39.0;1.39;1.38.0;1.38;1.37.0;1.37;1.36.1;1.36.0;1.36;1.35.1;1.35.0;1.35;1.34.1;1.34.0;1.34;1.33.1;1.33.0;1.33
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:530 ] Boost_USE_MULTITHREADED = TRUE
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:532 ] Boost_USE_STATIC_LIBS = 
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:534 ] Boost_USE_STATIC_RUNTIME = 
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:536 ] Boost_ADDITIONAL_VERSIONS = 
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:538 ] Boost_NO_SYSTEM_PATHS = 
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:606 ] Declared as CMake or Environmental Variables:
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:608 ]   BOOST_ROOT = 
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:610 ]   BOOST_INCLUDEDIR = 
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:612 ]   BOOST_LIBRARYDIR = 
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:614 ] _boost_TEST_VERSIONS = 1.48.0;1.48;1.47.0;1.47;1.46.1;1.46.0;1.46;1.45.0;1.45;1.44.0;1.44;1.43.0;1.43;1.42.0;1.42;1.41.0;1.41;1.40.0;1.40;1.39.0;1.39;1.38.0;1.38;1.37.0;1.37;1.36.1;1.36.0;1.36;1.35.1;1.35.0;1.35;1.34.1;1.34.0;1.34;1.33.1;1.33.0;1.33
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:667 ] Include debugging info:
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:669 ]   _boost_INCLUDE_SEARCH_DIRS = C:/boost/include;C:/boost;/boost/include;/boost;/sw/local/include
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:671 ]   _boost_PATH_SUFFIXES = boost-1_48_0;boost_1_48_0;boost-1_48;boost_1_48;boost-1_47_0;boost_1_47_0;boost-1_47;boost_1_47;boost-1_46_1;boost_1_46_1;boost-1_46_0;boost_1_46_0;boost-1_46;boost_1_46;boost-1_45_0;boost_1_45_0;boost-1_45;boost_1_45;boost-1_44_0;boost_1_44_0;boost-1_44;boost_1_44;boost-1_43_0;boost_1_43_0;boost-1_43;boost_1_43;boost-1_42_0;boost_1_42_0;boost-1_42;boost_1_42;boost-1_41_0;boost_1_41_0;boost-1_41;boost_1_41;boost-1_40_0;boost_1_40_0;boost-1_40;boost_1_40;boost-1_39_0;boost_1_39_0;boost-1_39;boost_1_39;boost-1_38_0;boost_1_38_0;boost-1_38;boost_1_38;boost-1_37_0;boost_1_37_0;boost-1_37;boost_1_37;boost-1_36_1;boost_1_36_1;boost-1_36_0;boost_1_36_0;boost-1_36;boost_1_36;boost-1_35_1;boost_1_35_1;boost-1_35_0;boost_1_35_0;boost-1_35;boost_1_35;boost-1_34_1;boost_1_34_1;boost-1_34_0;boost_1_34_0;boost-1_34;boost_1_34;boost-1_33_1;boost_1_33_1;boost-1_33_0;boost_1_33_0;boost-1_33;boost_1_33
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:696 ] location of version.hpp: /usr/include/boost/version.hpp
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:715 ] version.hpp reveals boost 1.46.1
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:808 ] guessed _boost_COMPILER = -gcc46
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:818 ] _boost_MULTITHREADED = -mt
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:861 ] _boost_RELEASE_ABI_TAG = -
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:863 ] _boost_DEBUG_ABI_TAG = -d
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:906 ] _boost_LIBRARY_SEARCH_DIRS = /usr/include/lib;/usr/include/../lib;/usr/include/stage/lib;C:/boost/lib;C:/boost;/boost/boost_1_46_1/lib;/boost/boost_1_46/lib;/boost/lib;/boost;/sw/local/lib
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:977 ] Searching for FILESYSTEM_LIBRARY_RELEASE: boost_filesystem-gcc46-mt-1_46_1;boost_filesystem-gcc46-mt;boost_filesystem-mt-1_46_1;boost_filesystem-mt;boost_filesystem
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:1009 ] Searching for FILESYSTEM_LIBRARY_DEBUG: boost_filesystem-gcc46-mt-d-1_46_1;boost_filesystem-gcc46-mt-d;boost_filesystem-mt-d-1_46_1;boost_filesystem-mt-d;boost_filesystem-mt;boost_filesystem
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:977 ] Searching for SYSTEM_LIBRARY_RELEASE: boost_system-gcc46-mt-1_46_1;boost_system-gcc46-mt;boost_system-mt-1_46_1;boost_system-mt;boost_system
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:1009 ] Searching for SYSTEM_LIBRARY_DEBUG: boost_system-gcc46-mt-d-1_46_1;boost_system-gcc46-mt-d;boost_system-mt-d-1_46_1;boost_system-mt-d;boost_system-mt;boost_system
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:977 ] Searching for SERIALIZATION_LIBRARY_RELEASE: boost_serialization-gcc46-mt-1_46_1;boost_serialization-gcc46-mt;boost_serialization-mt-1_46_1;boost_serialization-mt;boost_serialization
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:1009 ] Searching for SERIALIZATION_LIBRARY_DEBUG: boost_serialization-gcc46-mt-d-1_46_1;boost_serialization-gcc46-mt-d;boost_serialization-mt-d-1_46_1;boost_serialization-mt-d;boost_serialization-mt;boost_serialization
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:1119 ] Boost_FOUND = TRUE
-- Boost version: 1.46.1
-- Found the following Boost libraries:
--   filesystem
--   system
--   serialization
-- Configuring done
-- Generating done
-- Build files have been written to: /home/luca/ArmIkarus/canmaster/build_cmake
luca@luca-vmware:~/ArmIkarus/canmaster/build_cmake$ make
Scanning dependencies of target canfestival
[ 10%] Building C object CMakeFiles/canfestival.dir/drivers/unix/unix.o
In file included from /home/luca/ArmIkarus/canmaster/include/can.h:28:0,
                 from /home/luca/ArmIkarus/canmaster/include/canDispatch.h:23,
                 from /home/luca/ArmIkarus/canmaster/drivers/unix/unix.c:36:
/usr/include/boost/function.hpp:13:57: fatal error: functional: No such file or directory
compilation terminated.
make[2]: *** [CMakeFiles/canfestival.dir/drivers/unix/unix.o] Error 1
make[1]: *** [CMakeFiles/canfestival.dir/all] Error 2
make: *** [all] Error 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:00:35.867

试试这个，根据需要调整设置和版本：

```
set(Boost_USE_STATIC_LIBS        ON) 
set(Boost_USE_MULTITHREADED      ON)
set(Boost_USE_STATIC_RUNTIME    OFF)
find_package( Boost 1.52.0 COMPONENTS date_time filesystem system )
if(Boost_FOUND)
  include_directories(${Boost_INCLUDE_DIRS})
  target_link_libraries(canfestival ${Boost_LIBRARIES})
endif() 
```

编辑：

我之前忽略了它，但鉴于您的源文件是 .c 而不是 .cpp cmake 正在（正确地）将您的库编译为 C 对象，正如您在调试输出中看到的那样：

```
[ 10%] Building C object CMakeFiles/canfestival.dir/drivers/unix/unix.o 
```

相比于：

```
[  2%] Building CXX object src/CMakeFiles/smolder.dir/os/linux/main.cpp.o 
```

Boost 是一个 C++ 库，所以您看到的错误是因为它不理解 function.hpp 头文件结构，特别是第一个包含：

致命错误：功能：没有此类文件或目录编译终止。

```
#include<functional> 
```

是[function.hpp中的第一行](http://www.boost.org/doc/libs/1_46_1/boost/function.hpp)

编辑以供将来参考：我最初的建议是将源文件更改为 .cpp ，但这可以通过以下方式强制执行：

```
project(FOOBAR CXX) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T13:41:20.737

你打错字了。是`include_directories(${Boost_INCLUDE_DIRS})`，不是`include_directories(${Boost_INCLUDE_DIR})`。复数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T13:37:34.460

您的文件具有 CMake 识别为`C`源代码的扩展名。您需要使用强制 CMake 将您的项目编译为 C++ 项目

```
project(FOO CXX) 
```

一般来说，您应该为您的文件添加更多 cplusplus-y 扩展名，例如：`cc`或`cpp`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T21:35:51.950

可以按照 pmr 的描述解决该问题：

> 您的文件具有 CMake 识别为 C 源代码的扩展名。您需要使用强制 CMake 将您的项目编译为 C++ 项目

`project(FOO CXX)`

> 一般来说，您应该为您的文件添加更多 cplusplus-y 扩展名，例如：cc 或 cpp。

# c++ - 错误未定义引用`BP::Device::Create(std::string const&)'

> ID：13849377
> 
> 赞同：0
> 
> 时间：2012-12-12T21:56:19.603
> 
> 标签：c++, linux, windows

我有一个 file.cpp，我正在从 Windows 移植到 linux。我已经更改了所有特定的标头和函数，但仍然出现此错误。这是我的代码。

```
#define _CRT_SECURE_CPP_OVERLOAD_STANDARD_NAMES 1
#define _CRT_SECURE_NO_DEPRECATE 1

#include <stdio.h>
#include <curses.h>
#include <termios.h>
#include <term.h>
#include <unistd.h>

#include "BioPlux.h"

#define BUF_SIZ 1000

static struct termios initial_settings, new_settings;
static int peek_character = -1;

int kbhit();

int kbhit()
{
    char ch;
    int nread;

    if(peek_character != -1)
        return 1;
    new_settings.c_cc[VMIN]=0;
    tcsetattr(0, TCSANOW, &new_settings);
    nread = read(0,&ch,1);
    new_settings.c_cc[VMIN]=1;
    tcsetattr(0, TCSANOW, &new_settings);

    if(nread == 1) {
        peek_character = ch;
        return 1;
    }
    return 0;
}

int main()
{
   BP::Device::Frame frames[BUF_SIZ];

   FILE *f = fopen("teste.txt", "w");

   BP::Device *dev = NULL;

   try
   {
      // decomment next block to search for bioPlux devices
      /*
      std::vector<std::string> devs;
      BP::Device::FindDevices(devs);
      fprintf(f, "FindDevices: %d\n", devs.size());
      for(int i=0; i < devs.size(); i++)
          fprintf(f, "%s\n", devs[i].c_str());
      */

      dev = BP::Device::Create("00:07:80:40:DD:D8");  // put here the MAC address of your device

      std::string str;
      dev->GetDescription(str);
      printf("Description: %s\n", str.c_str());
      fprintf(f, "# Description: %s\n", str.c_str());

      dev->SetDOut(true); // put the digital output at HIGH - useless

      dev->BeginAcq(); // 1000 Hz, 12 bits, 6/8 channels
      //dev->BeginAcq(1000, 0x01, 12); // 1000 Hz, 12 bits, channel 1 only

      //for(int k = 0; k < 10; k++) // total 10 seconds
      while(!kbhit())
      {
         dev->GetFrames(BUF_SIZ, frames); // block for 1 sec
         putchar('*');
         for(int i=0; i < BUF_SIZ; i++) // while the data to file
         {
            fprintf(f, "%i", frames[i].seq);
            for(int j = 0; j < 8; j++)
               fprintf(f, "\t%i", frames[i].an_in[j]);
            fputc('\n', f);
         }
      }      

      dev->EndAcq();
   } // end try

   catch (BP::Err err)
   {
      char const *typ;
      switch(err.GetType())
      {
      case BP::Err::TYP_ERROR:
         typ = "Error";
         break;
      case BP::Err::TYP_NOTIFICATION:
         typ = "Notification";
         break;
      }
      printf("Error: %d Type: %s - %s\n", err.code, typ, err.GetDescription());
   }

   if (dev) delete dev;
    fclose(f);
   return 0;
} 
```

这是包含以下标题的 file.cpp。该类在此处定义。

```
#include <vector>
#include <string>
#include <inttypes.h>

typedef unsigned char    BYTE;
typedef unsigned short   WORD;

#ifndef _BIOPLUXHEADER_
#define _BIOPLUXHEADER_

namespace BP
{
   class Device
   {
   public:
      struct Frame
      {
         BYTE  seq;
         bool  dig_in;
         WORD  an_in[8];
      };

      static void    FindDevices(std::vector<std::string> &devs);
      static Device* Create(const std::string &port);

      virtual void   GetDescription(std::string &str)=0;
      virtual void   BeginAcq(void)=0;
      virtual void   BeginAcq(int freq, BYTE chmask, BYTE nbits)=0;
      virtual void   GetFrames(int nframes, Frame *frames)=0;
      virtual void   SetDOut(bool dout)=0;
      virtual void   EndAcq(void)=0;
      virtual        ~Device() {}
   };

   class Err
   {
   public:
      enum Code {
         // Notifications
           //BT_AUTHENTICATION,
           BT_ADDRESS = 1,
           BT_ADAPTER_NOT_FOUND,
           BT_DEVICE_NOT_FOUND,
           CONTACTING_DEVICE,
           PORT_COULD_NOT_BE_OPENED,
         // Errors
           PORT_INITIALIZATION,
           //FIRMWARE_NOT_SUPPORTED,
           DEVICE_NOT_IDLE,
           DEVICE_NOT_IN_ACQUISITION_MODE,
           PORT_COULD_NOT_BE_CLOSED,
           BT_DEVICE_NOT_PAIRED,
         INVALID_PARAMETER,
         FUNCTION_NOT_SUPPORTED
      } code;

      enum Type {
         TYP_ERROR,
         TYP_NOTIFICATION
      };

      Err(Code c) : code(c) {}
      Type        GetType(void);
      const char* GetDescription(void);
   };
}

#endif 
```

这是编译尝试的输出：

```
samuelpedro@ubuntu:~/Desktop/bioPlux API/C++$ g++ -o bttest_simple bttest_simple.cpp -lbluetooth BioPlux.lib
/tmp/cccJUI8I.o: In function `main':
bttest_simple.cpp:(.text+0xf8): undefined reference to `BP::Device::Create(std::string const&)'
bttest_simple.cpp:(.text+0x426): undefined reference to `BP::Err::GetType()'
bttest_simple.cpp:(.text+0x459): undefined reference to `BP::Err::GetDescription()'
collect2: error: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:00:36.317

您的定义`class BP::Device`包含一个名为 的方法的声明`Create()`，但没有它的代码，因此它必须在某个源文件中的某个地方定义。您的 Windows 版本是否包含带有定义的源文件？因为您的链接显然不包含该文件（如果存在）。如果您使用的是 Visual Studio，则必须将该文件添加到您的项目中，或者添加一个包含它的库。

# algorithm - 不相交集数据结构和二叉树？

> ID：13849381
> 
> 赞同：1
> 
> 时间：2012-12-12T21:56:53.563
> 
> 标签：algorithm, data-structures, binary-tree, disjoint-sets, binomial-heap

有人可以解释什么是不相交集数据结构吗？或者将我链接到解释它的 YouTube 视频或文章。

几分钟前我搜索了它，我得到的只是一些数学课，其中涉及一个看起来像维恩图的图像。也许就是这样，但我不确定，所以任何帮助表示赞赏。

顺便说一句，当我被问到“如何使用二叉树来表示二叉树队列中的每个二叉树”时，这是指您必须相互堆叠的二叉树吗？就像 B1 与 B1 连接成为 B2，然后两个 B2 成为 B3，依此类推。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T22:09:37.010

不相交集数据结构是用于表示[集合 S 的一个分区的](http://en.wikipedia.org/wiki/Partition_of_a_set)数据结构。您从一组元素 S 开始，每个元素都属于它自己的组。例如：

```
{1} {2} {3} {4} {5} {6} 
```

对不相交集数据结构的一种操作是**联合**操作，它将包含给定元素的两个集合组合在一起。例如，将 1 和 2 合并在一起会返回分区

```
{1, 2} {3} {4} {5} {6} 
```

结合在一起 3 和 5 产生

```
{1, 2}, {3, 5}, {4}, {6} 
```

现在，将 1 和 3 联合在一起会产生分区

```
{1, 2, 3, 5}, {4}, {6} 
```

**查找**操作告诉您给定元素属于哪个集合。通常，这是通过 find 返回它所属元素的代表元素来完成的。通常这样做是为了

```
find(x) == find(y)  if and only if  x and y are in the same set. 
```

例如，find(1) 可能返回 2，因此 find(2) = 2、find(3) = 2、find(5) = 2。

不相交集数据结构通常用作 Kruskal 最小生成树算法中的子程序，因为它们提供了一种非常快速的方法来检查图中的两个节点是否已连接，并且可以简单地标记两个连接组件中的所有节点都已连接到当添加一条边时。使用具有联合排序和路径压缩的不相交集森林实现，可以在 O(n α(n)) 时间内完成对不相交集森林的 n 次操作，其中 α(n) 是**[反](http://en.wikipedia.org/wiki/Disjoint-set_data_structure#Disjoint-set_forests)**[*阿克曼函数*](http://en.wikipedia.org/wiki/Ackermann_function#Inverse)，一个增长如此缓慢的函数，它实际上是一个常数（对于任何小于宇宙大小的输入，它最多为四个。）

* * *

至于二叉树和二叉树：我认为您要问的是如何使用二叉树来表示二叉树，它们是多路树，最多有两个孩子。并非所有二叉树都是二叉树，因此必须使用合适的编码。

一种方法是使用称为[**左子右兄弟**](http://en.wikipedia.org/wiki/Left-child_right-sibling_binary_tree)表示的东西。根据以下设置，这将多路树表示为二叉树：

*   每个节点的**左**子节点指向该节点的第一个子节点。
*   每个节点的**右**子节点指向它的下一个兄弟节点（同一层中具有相同父节点的节点）。

例如，给定这个二叉树：

```
 a
   / | \
  b  c  d
 /|  |
e f  g
  |
  h 
```

左孩子右兄弟表示将是

```
 a
                /
               b
            /    \
           e      c
            \    / \
             f  g   d
            /
           h 
```

顺便说一句 - 如果你在二叉树上这样做，你最终会得到一个二叉树的表示形式，称为**半序半树**，它是具有以下属性的二叉树：

*   树中的每个节点都大于或等于（或小于或等于，取决于这是最小堆还是最大堆）其左子树中的每个节点。
*   根节点没有右孩子。

这些定义源于二叉树是堆排序的，然后转换为左子右兄弟表示。使用这种表示，链接到二叉树的速度非常快。我将把它作为练习留给读者。:-)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T22:18:27.913

我在大学学到的不相交的集合围绕三个基本功能展开。

```
make_set(x) - makes a new disjoint contains only the element x
find_set(x) - gives you the set that contains element x
union(x,y) - unions the sets that contain x and y 
```

他们提到的实现是使用链表。也就是说，每个集合都有一个代表创建该集合的元素。( `make_set(x)`) 然后用`unions(x,y)`， 的结束指针`x`移动到指向`y`。`Union`并且`make_set`很快，但这对于`find_set`（实际上是O（最大集））来说非常慢

更好的实现使用了两种称为*路径压缩*的方法，它作为一个元素通过`union`和/或传递`find_set`，它使它指向集合的代表

另一个是*union-by-rank*，它为每个集合保持一个排名，给出集合的最大“深度”。联合时，如果每组的等级相同，则将等级增加一位，并更改一位代表指向另一位。如果它们不同，则将较小的集合更改为指向较大的代表，并且等级保持不变。this 的这个渐近上界非常接近函数的使用次数。

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T22:01:55.640

[不相交集](http://en.wikipedia.org/wiki/Disjoint-set_data_structure)基本上是一个联合查找数据结构。

您最初有一组`n`节点，并且您对它**`find(node)`**进行**`union(node1,node2)`**了操作。

*   `union(node1,node2)`正在将节点“组合”在一组中
*   `find(node)`正在寻找`node`（例如，通过给出根，如稍后解释）的规范表示

例如，您最初拥有`{1},{2},{3},{4},{5}`，并且您这样做：

```
union(1,2)
union(3,4) 
```

然后你最终拥有`{1,2},{3,4},{5}`.
这也意味着在这一点上`find(1) == find(2)`（它是同一套！）

如果你稍后`union(2,3)`- 它将导致包含 2 的*集合与包含 3 的**集合*合并，你最终会得到`{1,2,3,4},{5}`

**关于视频请求**：[伯克利的这次讲座](http://www.youtube.com/watch?v=wSPAjGfDl7Q)似乎很好地涵盖了这些材料。

* * *

关于二叉树 - 这是一种实现方式，每个“根”都有其儿子，但树实际上是“颠倒的”，而不是从父亲到儿子的指针，而是从儿子到父亲的指针。
这样，每个节点的规范表示是该节点通向的根，这确保了如果我们在`a`and `b`- then上进行联合`find(a) = find(b)`，因为它们具有相同的根。

我希望它能给你一些关于这个 DS 是什么的线索。
祝你好运！

# asp.net-mvc - 在没有回发控制的情况下保留一些价值的最安全方法是什么

> ID：13849383
> 
> 赞同：2
> 
> 时间：2012-12-12T21:57:07.657
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, asp.net-mvc-4

我有一个模型：

```
 public class Attribute
 {
    public int Id { get; set; }
    public string Key { get; set; }
    public string Value{ get; set; }
 } 
```

假设我的视图将显示`@model IEnumerable<MyCustomer.ViewModels.Attribute>`，我想`EditorFor`为我的键和值创建一个，但我只想在回发后保留我的 ID，而不将其放入回发控件中。我怎样才能做到这一点？我知道我可以把它放在一个隐藏的地方，但一个隐藏的可以修改，我不确定这是最安全的事情。我正在向我的视图传递一个新的 [] 属性，并且需要预设 Id

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:10:40.777

以下帖子通过为隐藏字段创建值的安全哈希来提供解决该问题的方法。

该帖子还链接到一篇文章，其中包含 SecuredValueHtmlHelper 的源代码，这听起来正是您所需要的。

[防止更改隐藏字段](https://stackoverflow.com/questions/2840221/prevent-change-of-hidden-field)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T22:00:39.673

> 我怎样才能做到这一点？

HTML 的工作方式没有奇迹。无论您在 HTML 表单中输入什么内容，您都可以在回发时返回。无论你省略什么，你都会松懈。

所以你有几种可能性：

*   将值存储在 ASP.NET Session 变量中，以便以后检索。
*   使用回发时发送的 Key 和 Value 属性来查询您的数据存储区和 Id（这仅在 Key/Value 对是唯一的并且在您的数据存储区中具有相应的 Id 属性时才有效）。
*   将 Id 属性的值存储在可以在回发时检索的加密 cookie 中。您可以使用这些`FormsAuthentication.Encrypt/Decrypt`方法。

# mysql - 选择 4 个组并按时间字段排序

> ID：13849393
> 
> 赞同：0
> 
> 时间：2012-12-12T21:57:47.777
> 
> 标签：mysql, sql

我有一个包含高中足球比赛分数的小型数据库，用户可以在其中输入分数。

我需要找出每个季度末的最终得分是多少

鉴于数据，我对如何做到这一点有点困惑：

成绩表

```
create table FINAL_score

    ( scoreID varchar2(10) primary key,

    gameID varchar2(5) REFERENCES FINAL_game(gameID),

    userID varchar2(5) REFERENCES FINAL_user(userID),

    curtime timestamp,

    qtr number(1),

    hscore number(2) not null,

    ascore number(2) not null);

insert into FINAL_score values ('s001', 'g001', 'u001', '10-DEC-12 02:10:00', 1, 7, 3);

insert into FINAL_score values ('s002', 'g001', 'u002', '10-DEC-12 02:12:00', 1, 7, 3);

insert into FINAL_score values ('s003', 'g001', 'u001', '10-DEC-12 02:15:00', 1, 7, 10);

insert into FINAL_score values ('s004', 'g001', 'u002', '10-DEC-12 02:28:00', 2, 14, 13);

insert into FINAL_score values ('s005', 'g001', 'u001', '10-DEC-12 02:30:00', 2, 14, 16);

insert into FINAL_score values ('s006', 'g001', 'u001', '10-DEC-12 02:55:00', 3, 14, 19);

insert into FINAL_score values ('s007', 'g001', 'u002', '10-DEC-12 02:57:00', 3, 14, 16);

insert into FINAL_score values ('s008', 'g001', 'u001', '10-DEC-12 03:15:00', 4, 17, 26);

insert into FINAL_score values ('s009', 'g001', 'u002', '10-DEC-12 03:30:00', 4, 20, 29); 
```

我想我需要使用子查询，但我只是不知道如何实现它

```
select hscore, ascore
from FINAL_score
where (....) 
```

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:09:10.003

获取每场比赛发送的最后一条记录，执行以下操作：

```
select hscore, ascore
from (select * from FINAL_score 
      order by curtime desc) x
group by gameId; 
```

对于特定游戏，在其中添加 where 子句：

```
select hscore, ascore
from (select * from FINAL_score 
      where gameId = ?
      order by curtime desc) x
group by gameId; 
```

请注意，这是一个 mysql-only 解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T22:18:49.557

分数实际上是在整个游戏中单调递增的（只会上升，不会下降）。因此，您可以采取捷径并执行以下操作：

```
select gameid, qtr, max(hscore), max(ascore)
from final_score
group by gameid 
```

# php - 在 MySQL 中为用户排名列表找到最佳匹配

> ID：13849395
> 
> 赞同：1
> 
> 时间：2012-12-12T21:57:53.423
> 
> 标签：php, mysql, algorithm

我将把它分成两部分：

1.  我有一个用户列出了他想要的产品“功能”。要求用户从 1-10 对这些特征进行排名。我还有一张摆满产品的桌子。这些产品中的每一个都有不同的功能。有些产品将具有 1-10 的所有功能，但有些产品只有其中的几个。我想确定哪个产品与用户的排名最匹配，并为用户提供一个有序的结果集，最好的匹配在前，最差的匹配在后。

2.  上述查询实际上只是用户正在做的事情的一部分。用户还提供其他搜索标准（例如产品类别、价格等）以及特征排名。因此，我希望功能匹配仅适用于通过这组过滤器的产品。我将如何结合这些？

我发现了一些类似的问题[this](https://stackoverflow.com/questions/13468467/best-match-using-mysql-and-php)和[this](https://stackoverflow.com/questions/11630031/find-the-closest-match-of-a-list-in-a-list-containing-lists)，但它们还不够接近，我无法弄清楚如何将这些解决方案应用于我的情况。

涉及的表如下所示：

产品（ID，产品）

特征（id，特征）

product_features (id, product_id, feature_id)

并且用户将通过这样的数组提交他的搜索（其中键实际上是特征 ID，排名是值）：

```
[users_features] => Array
    (
        [1] => Array
            (
                [rank] => 9
            )

        [2] => Array
            (
                [rank] => 1
            )

        [3] => Array
            (
                [rank] => 3
            ) 
```

（现在这将是一个 10 项数组，但将来可能会改变）

```
 ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:17:08.037

我不能完全使用 SQL 来让它工作，但一个简单的 PHP 解决方案将类似于以下（未经测试）：

```
//Array of $productId => list of feature ids
$products;
$userFeatures;
$scores = array();
//For every product work out a score based on features and user ranking.
foreach($products as $productId => $prodFeatures){
    $score = 0;
    foreach($prodFeatures as $feature){
        //Could also perhaps penalise products lacking features.
        $score += $userFeatures[$feature]["rank"];
    }
    $scores[$productId] = $score;
}
arsort($scores);
echo "Best match is ".$scores[0]; 
```

显然这有点粗糙和准备好，但希望它有所帮助。

编辑：这假设 10 的排名是最好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T22:22:21.387

一种解决方案是将 1 除以用户等级。例如 1/R。然后总结所有可能性并按后代顺序对列表进行排序。1/R 也是不从列表中选择该产品的机会。当您需要对值进行归一化或使值的总和等于 1 时，您需要将该值乘以这些值的所有 reziprokes 的总和。例如 r1=30 和 r2=15。1/(1/30 + 1/15) = 10，所以 P1 = 10 * 1/30 = 1/3 和 P2 = 10 * 1/15 = 2/3。当您将值标准化时，这也意味着具有较少属性的产品也不太可能。

# python - POI 将数据从 csv 移动到 xls

> ID：13849399
> 
> 赞同：1
> 
> 时间：2012-12-12T21:58:23.953
> 
> 标签：python, csv, apache-poi, jython, xls

我对 Python 比较陌生，目前我正在努力完成我目前正在研究的这个小部分。高级：使用 POI 和 Jython 将 2 列数据从 .csv 文件移动到 .xls。低级：从 .csv 文件中仅读取两列数据。读取数据后，我将第二行中的数据组织到不同的数组中。例如

```
Name    Status              arrayGreen = ['a, Green'], ['aa, Green']
 a      Green               arrayRed = ['b, Red'], ['bb, Red']
 b      Red       TO =>     arrayOrange = ['c, Orange'], ['cc, Orange']
 c      Orange              arrayYellow = ['d, Yellow'], ['dd, Yellow']
 d      Yellow
 aa     Green
 bb     Red
 cc     Orange
 dd     Yellow 
```

一旦我将该数据读入数组，我就想从数组数据中删除“，”，因为我现在按数组将它们分组以供以后使用。所以现在数据在数组中看起来像这样：

```
arrayGreen = ['a'], ['aa']
arrayRed = ['b'], ['bb']
arrayOrange = ['c'], ['cc']
arrayYellow = ['d'], ['dd'] 
```

现在我想开始使用 apache POI 来使用数组中的数据并将它们写入 .xls 我知道如何设置一些格式并使用 POI 从 .xls 读取数据，但这就是我坚持的地方。

到目前为止，这是我的代码：

```
file = open('CSVItems.csv', 'r')

for line in file.readlines():
    content = [value for value in line.split()]

    arrayGreen = [x for x in content if 'Green' in x]
    arrayRed = [x for x in content if 'Red' in x]
    arrayOrange = [x for x in content if 'Orange' in x]
    arrayYellow = [x for x in content if 'Yellow' in x]

    if arrayGreen:
        arrayGreen = [x.replace(',Green', '') for x in arrayGreen]
        print arrayGreen
    elif arrayRed:
        arrayRed= [x.replace(',Red', '') for x in arrayRed]
        print arrayRed
    elif arrayOrange:
        arrayOrange= [x.replace(',Orange', '') for x in arrayOrange]
        print arrayOrange
    elif arrayYellow:
        arrayYellow= [x.replace(',Yellow', '') for x in arrayYellow]
        print arrayYellow

   Console:
   ['a']
   ['b']
   ['c']
   ['d']
   ['aa']
   ['bb']
   ['cc']
   ['dd'] 
```

如何使用 Jython 在 POI 中将每个 arrayGreen、arrayRed、arrayOrange、arrayYellow 写入其自己的列。

最终 result.xls 看起来像这样：

```
Green    Red    Orange     Yellow
  a       b        c          d       
  aa      bb       cc         dd 
```

谢谢。

# javascript - 多次传参数给匿名函数，全部完成后提供回调

> ID：13849410
> 
> 赞同：1
> 
> 时间：2012-12-12T21:59:10.677
> 
> 标签：javascript, closures

我想创建一个包含 1 个或多个函数的 JS 数组，每个函数都有自己的参数（在闭包中提供），然后调用所有这些函数，并在调用所有函数时进行回调。

根据[这个问题的答案](https://stackoverflow.com/questions/4967261/js-pass-parameters-as-variables-to-an-anonymous-function-and-invoke-it-later)，我可以创建 1 个带有所需参数的函数：

```
var f = (function(value) {
    return function(){myFunction(value);};
}(k)); 
```

我想拥有其中的几个函数，全部调用它们，并在全部调用后提供回调。

**[这是一个尝试执行此操作的 JSFiddle](http://jsfiddle.net/benjaminsmith/TgYxn/)**，但不能按我想要的方式工作（它从不调用我的 3 个函数）。

**[这个 JSFiddle](http://jsfiddle.net/benjaminsmith/4cYwp/)**，使用 jQuery.Deferred 对象（它调用我的 3 个函数太快了）。

我希望 consle.log() 输出的方式是：

```
do something first
f1 done variable one
f2 done variable two
f3 done variable three
all functions have completed
callback has been called 
```

我错过了什么？我该如何解决这个问题？

**编辑：**将调用未知数量的函数（从整个应用程序中任意设置），这就是我将它们推送到数组的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:14:15.597

检查构造函数部分下的[延迟文档：](http://api.jquery.com/category/deferred-object/)

> jQuery.Deferred 可以传递一个可选函数，该函数在构造函数返回之前被调用，并将构造的延迟对象作为 this 对象和函数的第一个参数传递。

也就是说，只要将函数传递给`Deferred`构造函数，它们就会运行。因此，解决该问题的一种可能方法是

1.  make `f1`, `f2`,`f3`常规函数，接受`dfd`参数并解析它
2.  `Deferred`仅当您准备好运行它们时才 将它们包装起来。

[这个 Fiddle](http://jsfiddle.net/qbFeN/2/)会产生你预期的输出。

```
var v1 = 'variable one';

// array of functions to be called
var functions = [];

function callFunctions(callback) {
    var deferreds = functions.map(function(x) {
        return $.Deferred(x);
    });
    $.when.apply(null, deferreds).done(function(){
        console.log('all functions have completed');
        if( callback && typeof(callback)==='function' ) callback();
    });
}

var f1 = (function(value) {
    return function(dfd) {
        console.log('f1 done',value);
        dfd.resolve();
    }
})(v1);

// this should be the first thing logged
console.log('do something');

functions.push(f1);

callFunctions(function() {
    console.log('callback has been called');
});​ 
```

# php - PHP Header Location - 移动到锚点而不重新加载

> ID：13849413
> 
> 赞同：1
> 
> 时间：2012-12-12T21:59:27.900
> 
> 标签：php, redirect, header, location, anchor

我试图想出一种无需重新加载即可导航到同一页面内的 HTML 锚点的方法。现在我只是在使用：

```
header("Location: #anchor_name"); 
```

问题在于它会重新加载页面。如果可以的话，我真的很想避免使用 JavaScript，但我不知道是否还有其他方法？

谢谢！

PS - 我知道我需要在重定向中使用完整的 URI - 为了简单起见，这里只是缩写。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:01:37.160

你可以使用js：

```
 function scrollToAnchor_name(anchorName) {
     location.hash = "#" + anchorName;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T22:02:07.690

在 html 中，使用`<a href="#anchor_name">Click me</a>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T22:12:25.897

PHP 是一种服务器端技术。因此，必须对页面进行的任何更改，无论是在内容方面还是确定哪个部分是可见的，都只能通过再次寻址服务器来实现。就其本身而言（意思是：没有客户端脚本的帮助，例如 ajax 调用），这将始终强制重新加载页面。在不重新加载的情况下执行此操作的唯一方法是使用客户端脚本，然后需要 JavaScript（如本页其他帖子中所述）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T22:15:33.393

如果您的网站中包含 jQuery，这里有一些我经常用于此目的的流畅代码：

```
function goToByScroll(id){
  $('html,body').animate({scrollTop: $("#"+id).offset().top},'slow');
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-20T03:02:31.280

您可以使页面的 href 包含锚点，例如“ `submit.php#form_top`”，并根据提交情况使用 PHP 输出该锚点或不输出该锚点。所以第一次访问页面时，不会有`form_top`锚点，只是从页面顶部显示，但对于后续调用（发布表单），它会跳转到锚点。

缺点是带有始终可见的锚点的丑陋 URL，如果您在没有锚点的情况下调用 url，它将不起作用（需要放置锚点并在需要时保留以供后续调用）。

# ruby - Lambda 行为

> ID：13849414
> 
> 赞同：6
> 
> 时间：2012-12-12T21:59:34.277
> 
> 标签：ruby, lambda

我很难理解是什么使以下行为成为可能（取自红宝石镐书）：

```
def power_proc_generator
  value = 1
  lambda {value += value}
end

power_proc = power_proc_generator

3.times {puts power_proc.call} # => 2,4,8
3.times {puts power_proc_generator.call()} # => 2,2,2 
```

我看不到“power_proc”对象如何允许值继续加倍，因为我假设（似乎错误地）每次调用都会将值重新分配给 1。

我的问题是为什么 "3.times {puts power_proc.call}" 结果是 "2,4,8" 而不是 "2,2,2" ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T22:14:21.620

`power_proc_generator`返回一个 lambda，它使用（并修改）周围范围内的变量值。这被称为闭包——返回的函数“关闭”`value`变量的值。因此，每次调用返回的函数时，它都会乘以`value`2。重要的部分是`value`在调用之间保持不变`power_proc.call`，因此您正在修改现有变量。

`power_proc_generator`另外，要详细说明打印和`power_proc.call`--`power_proc_generator`每次调用时都会返回一个新函数之间的区别，这就是为什么您永远看不到`value`被增加的原因。`power_proc.call`另一方面，继续多次调用同一个函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T22:22:31.527

power_proc_generator 返回一个 lambda，其中包含一个包含变量“value”的闭包。因此，该变量从一个 power_proc.call 到下一个。

# jquery-mobile - jquerymobile 和 android 后退按钮

> ID：13849418
> 
> 赞同：2
> 
> 时间：2012-12-12T21:59:55.697
> 
> 标签：jquery-mobile

我想知道是否有办法知道用户何时按下android中的“后退”按钮，以及他在哪个页面上这样做？

我问是因为我想控制用户页面的顺序。现在我通过在每个页面的标题中添加一个“后退”按钮来做到这一点，但是如果用户在 android 智能手机中按下“后退”按钮，我无法控制页面流顺序。

例如，如果用户在第一页按下后退按钮，他会立即退出应用程序，如果他真的想退出，我无法提醒他。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:15:28.983

你试过'beforeunload'吗？

```
$(window).on('beforeunload', function(){
    ...
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-30T21:27:06.753

在 ondeviceready 之后，首先使用 Phonegap 后退按钮监听器放置一个通用事件：

```
document.addEventListener("backbutton", yourCallbackFunction, false); 
```

在 yourCallBackFunction 中，您可以评估页面 ID，`$.mobile.activePage.attr('id')`以便您知道当前页面并相应地跳转。

# jsf-2 - 操作 h:commandButton «无法找到匹配的导航案例»

> ID：13849419
> 
> 赞同：0
> 
> 时间：2012-12-12T21:59:56.360
> 
> 标签：jsf-2

我有这些 JSF 文件：

*索引隐式.xhtml*：

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core">
<h:head>
    <title>Working with implicit and explicit conversion</title>
</h:head>
<h:body>
    <h:outputText value="Insert your age:"/><br />
    <h:form id="AgeForm">
        <h:inputText id="userAgeID" required="true" value="#{userBean.userAge}">
        </h:inputText>
        <h:message showSummary="true" showDetail="false" for="userAgeID"
                   style="color: red; text-decoration:overline"/>
        <br />
        <h:commandButton id="submit" action="response-implicit?faces-redirect=true" value="Submit Age"/>
    </h:form>
</h:body> 
```

和*response-implicit.xhtml*：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html">
<h:head>
    <title>Working with implicit and explicit conversion</title>
</h:head>
<h:body>
    <h:outputText value="Inserted age: "/>
    <h:outputText value="#{userBean.userAge}"/>
</h:body>
</html> 
```

接下来，我执行*index-implicit.xhtml*，输入一个 Age，当我点击 commandButton ( *Submit Age* ) 时，此消息出现两次：

`Unable to find matching navigation case with from-view-id '/age-conversion/index-implicit.xhtml' for action 'response-implicit?faces-redirect=true' with outcome 'response-implicit?faces-redirect=true'`

因此，我创建了另一个文件*response.xhtml （与**response-implicit.xhtml*具有相同的内容），并在*index-implicit.xhtml*中更改了***action="response?faces-redirect=true"***并且它可以正常工作。

 *关于这个问题的一些想法？为什么 request 与 response.xhtml 一起工作？

提前致谢！

PS：

附加信息。：

*   我已将 PrimeFaces 和 ICEfaces 包含在 Web 应用程序项目 (NetBeans) 中
*   我正在使用 GlassFish 3 应用服务器*

# c++ - 捕获类函数抛出的异常

> ID：13849431
> 
> 赞同：-1
> 
> 时间：2012-12-12T22:00:41.917
> 
> 标签：c++, exception-handling

我正在尝试在我创建的当前没有错误检查的锻炼跟踪器程序中实现异常处理。我有一个`Exlist`处理链表一系列函数的类，我想在添加异常处理时添加一些重要的函数：

*   将列表更新为文本文件
*   按日期排序列表
*   编辑锻炼（使用键搜索列表）
*   删除锻炼（使用键搜索列表删除）
*   添加锻炼

我将如何从类内的函数中抛出异常并将它们捕获 int `main()`。我知道在同一个块中处理简单的异常，但我似乎无法想出一个解决方案来解决这个问题。我的理想情况是

```
//in int main, when the user selects add
try
{
    WorkoutList.addEx();
} 
//other code...
//catch at end of loop and display error
catch(string error)
{
    cout << "Error in: addEx..." << error << endl;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:33:58.133

您应该创建一个继承自 Exception 的异常类。例如，如果你想在添加错误值时抛出它，你可以这样做：

```
#include <stdexcept>
class WrongValueException : public std::runtime_error
{
    public:
        WrongValueException(string mess): std::runtime_error(mess) {}
}; 
```

然后，在`addEx()`函数中，抛出它

```
//SomeCode
if(value.isWrong()){
    throw WrongValueException("Wrong Value");
} else {
    //add
} 
```

并主要抓住它：

```
int main(){
    //SomeCode
    try
    {
         WorkoutList.addEx();
    } 
    //other code...
    //catch at end of loop and display error
    catch(WrongValueException const& ex)
    {
        std::cerr << "WrongValueException: " << ex.what() << std::endl;
    }
    catch(std::exception const& ex)
    {
        std::cerr << "std::exception: " << ex.what() << std::endl;
        throw;
    }
    catch(...)
    {
        std::cerr << "Unknown Exception: " << ex.what() << std::endl;
        throw;
    } 
```

抛出的异常会从你抛出的任何地方冒泡，直到它被捕获。如果它没有被捕获，程序将完成（可能不会展开堆栈（因此即使您重新抛出，最好总是在 main 中捕获异常（强制堆栈展开））。

# c++ - 如何更改 Google protobuf 中的缓冲区限制？

> ID：13849434
> 
> 赞同：11
> 
> 时间：2012-12-12T22:01:09.813
> 
> 标签：c++, protocol-buffers

当我尝试解析大消息时，我收到此警告和错误。我知道默认限制超过 64MB。我现在正在使用 message.ParseFromIstream。有谁知道可以访问 CodedInputStream 对象来调用 SetTotalBytesLimit 函数？或任何其他方式来解决这个问题？

> 读取危险的大协议消息。如果消息大于 67108864 字节，则出于安全原因将停止解析。要增加限制（或禁用这些警告），请参阅 google/protobuf/io/coded_stream.h 中的 CodedInputStream::SetTotalBytesLimit()。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-12T22:31:17.850

正确的解决方法：您应该尝试限制 protobuf 消息的大小。请参阅： [https ://developers.google.com/protocol-buffers/docs/techniques#streaming](https://developers.google.com/protocol-buffers/docs/techniques#streaming)

又快又脏（不推荐阅读）的做法：在protobuf库源码的文件coded_stream.h中，修改and的值`kDefaultTotalBytesLimit`，`kDefaultTotalBytesWarningThreshold`重新编译，重新安装。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-12T22:17:32.797

只需阅读错误已经告诉您的函数的文档，就可以回答这个问题：

> 提示：如果您正在阅读本文是因为您的程序正在打印有关危险的大协议消息的警告，那么您可能会对下一步做什么感到困惑。最好的选择是更改您的设计，以便不需要过大的消息。例如，尝试将文件格式设计为包含许多小消息而不是单个大消息。如果这是不可行的，您将需要增加限制。但是，您的代码可能永远不会构造可以设置限制的 CodedInputStream。您可能通过调用 Message::ParseFromString() 之类的方法来解析消息。在这种情况下，您将需要更改您的代码以构造某种 ZeroCopyInputStream（例如 ArrayInputStream），围绕它构造一个 CodedInputStream，然后改为调用 Message::ParseFromCodedStream()。然后你可以调整限制。是的，这是更多的工作，但你正在做一些不寻常的事情。

[来源](https://developers.google.com/protocol-buffers/docs/reference/cpp/google.protobuf.io.coded_stream#CodedInputStream.SetTotalBytesLimit.details)

此外，遵循建议的第一部分并重新设计应用程序可能是一个非常好的主意。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-02-03T09:00:54.813

下面是来自代码( )[的注释，](https://github.com/google/protobuf/blob/8f67b165f0a949219fafc48c533be3fbf53497b7/src/google/protobuf/io/coded_stream.h#L340)`google/protobuf/io/coded_stream.h`它为那些想知道他们所谈论的安全原因的人设置消息限制。就我而言，我无法修改我的应用程序的工作方式，因此我必须更改此限制。

这个线程很老了，但是最近深度学习受到了关注，并且库 Caffe 使用了 Protobuf，所以也许更多的人会偶然发现这个。我必须用 Caffe 做神经网络的东西，即使是最小的批量，整个网络也占用了很多内存。

```
 // Total Bytes Limit -----------------------------------------------
  // To prevent malicious users from sending excessively large messages
  // and causing integer overflows or memory exhaustion, CodedInputStream
  // imposes a hard limit on the total number of bytes it will read.

  // Sets the maximum number of bytes that this CodedInputStream will read
  // before refusing to continue.  To prevent integer overflows in the
  // protocol buffers implementation, as well as to prevent servers from
  // allocating enormous amounts of memory to hold parsed messages, the
  // maximum message length should be limited to the shortest length that
  // will not harm usability.  The theoretical shortest message that could
  // cause integer overflows is 512MB.  The default limit is 64MB.  Apps
  // should set shorter limits if possible.  If warning_threshold is not -1,
  // a warning will be printed to stderr after warning_threshold bytes are
  // read.  For backwards compatibility all negative values get squashed to -1,
  // as other negative values might have special internal meanings.
  // An error will always be printed to stderr if the limit is reached.
  //
  // This is unrelated to PushLimit()/PopLimit().
  //
  // Hint:  If you are reading this because your program is printing a
  //   warning about dangerously large protocol messages, you may be
  //   confused about what to do next.  The best option is to change your
  //   design such that excessively large messages are not necessary.
  //   For example, try to design file formats to consist of many small
  //   messages rather than a single large one.  If this is infeasible,
  //   you will need to increase the limit.  Chances are, though, that
  //   your code never constructs a CodedInputStream on which the limit
  //   can be set.  You probably parse messages by calling things like
  //   Message::ParseFromString().  In this case, you will need to change
  //   your code to instead construct some sort of ZeroCopyInputStream
  //   (e.g. an ArrayInputStream), construct a CodedInputStream around
  //   that, then call Message::ParseFromCodedStream() instead.  Then
  //   you can adjust the limit.  Yes, it's more work, but you're doing
  //   something unusual. 
```

# jquery - 当可折叠为真时，Applet 在 jQuery 选项卡中再次加载

> ID：13849439
> 
> 赞同：2
> 
> 时间：2012-12-12T22:01:40.997
> 
> 标签：jquery, html

我在 jQuery 选项卡中添加了 IRC 聊天小程序。并且在切换标签时，Applet 会在除 Firefox 之外的所有浏览器中再次加载。

我使用的代码：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script type="text/javascript" src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<script type="text/javascript" src="jquery.ui.widget.min.js"></script>
<script type="text/javascript" src="jquery.ui.mouse.min.js"></script>
<script type="text/javascript" src="jquery.ui.sortable.min.js"></script>
<script type="text/javascript" src="jquery.ui.tabs.min.js"></script>
<script type="text/javascript">
$(document).ready(function()
{
   var xOpts =
   {
      event: 'click',
      collapsible: true
   };
   $("#x").tabs(xOpts);
});
</script>
</head>
<body>
<div id="x" style="position:absolute;left:0px;right:0px;top:0px;width:100%;height:100%;z-index:auto;">
<ul>
<li><a href="#x-chat"><span>Chat</span></a></li>
<li><a href="#x-rules"><span>Pravila</span></a></li>
<li><a href="#x-test"><span>Test</span></a></li>
</ul>
<div style="height:93%;overflow:auto;padding:0;" id="x-chat">
<div id="lightIRC" style="height:100%; width:100%; text-align:center;">
  <p><a href="http://www.adobe.com/go/getflashplayer"><img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" /></a></p>
 </div>
 <script type="text/javascript">
    swfobject.embedSWF("/virtual/x-serv.us/htdocs/chat/lightIRC.swf", "lightIRC", "100%", "100%", "10.0.0", "/virtual/x-serv.us/htdocs/chat/expressInstall.swf", params);
 </script>
</div>
<div style="height:100%;overflow:auto;padding:0;" id="x-rules">
<div id="wb_Text1">
<span style="color:#FF0000;font-family:Arial;font-size:19px;"><strong>P</strong></span><span style="color:#000000;font-family:Arial;font-size:19px;"><strong>ravilnik &amp; Uslovi </strong></span><span style="color:#FF0000;font-family:Arial;font-size:19px;"><strong>X</strong></span><span style="color:#000000;font-family:Arial;font-size:19px;"><strong>-Serv Mreže</strong></span><span style="color:#000000;font-family:Arial;font-size:13px;"><br><br>Korišćenjem </span><span style="color:#FF0000;font-family:Aria
l;font-size:13px;"><strong>X</strong></span><span style="color:#000000;font-family:Arial;font-size:13px;">-Serv mreže obavezujete se na poštovanje navedenih pravila i uslova. Administracija mreže zadržava puno pravo da u bilo kom momentu bez obrazloženja diskonektuje korisnika i zabrani mu pristup mreži kao i linkovanom serveru. <br>Na mrežu ulazite na sopstvenu odgovornost i rizik. IRC </span><span style="color:#FF0000;font-family:Arial;font-size:13px;"><strong>X</strong></span><span style="color:#000000;
font-family:Arial;font-size:13px;">-Serv mreža ne snosi nikakvu odgovornost za bilo kakvu informaciju poslatu od strane korisnika, osim u slučaju administracije mreže. <br>Na korisniku je apsolutna odgovornost da izoluje softver ili informaciju, izvrši antikontaminaciju i preduzme potrebne korake kako bi sprečio softver ili informaciju da mu, ukoliko su zaraženi ili inficirani, oštete informaciju ili sistem. <br></span><span style="color:#FF0000;font-family:Arial;font-size:13px;"><strong>X</strong></span><span style="color:#000000;font-family:Arial;font-size:13px;">-Serv mreža ne daje nikakve garancije po pitanju podobnosti informacije isporučene ili primljene na mreži, ili njom, za bilo koju svrhu, niti po pitanju njene autentičnosti, zakonitosti,punovažnosti, tačnosti, ispravnosti, pouzdanosti, kvaliteta,postojanosti, kompletnosti ili aktuelnosti. <br>Svaku takvu informaciju u potpunosti obezbeđuju i za nju odgovaraju korisnici mreže.<br><br></span><span style="color:#FF0000;font-family:Arial;font-size:13
px;"><strong>1.</strong></span><span style="color:#000000;font-family:Arial;font-size:13px;"> Striktno se zabranjuju Troll servisi:<br>&nbsp;&nbsp; Spam, Flad, Proksi, Phishing,<br>&nbsp;&nbsp; Botnet, Klonovi, DDOS, Scam.<br>&nbsp;&nbsp; Kao i sve ostale nelegalne stvari<br>&nbsp;&nbsp; koje su kaznjive zakonom o <br>&nbsp;&nbsp; &quot;visoko tehnoloshkom kriminalu&quot; Republike Srbije.<br>&nbsp;&nbsp; Svi logovi šalju se nadleznim organima na proveru.<br></span><span style="color:#FF0000;font-family:Arial;font-size:13px;"><strong>2.</strong></span><span style="color:#000000;font-family:Arial;font-size:13px;"> Zloupotreba i širenje ličnih podataka korisnika.<br></span><span style="color:#FF0000;font-family:Arial;font-size:13px;"><strong>3\. </strong></span><span style="color:#000000;font-family:Arial;font-size:13px;">IRC Trojanci, Skripte i Linkovi za kradju ličnih podataka.<br></span><span style="color:#FF0000;font-family:Arial;font-size:13px;"><strong>4.</strong></span><span style="color:#000000;font-family:Arial;font-size:13px;"> Širenje bilo kakve pornografije,vrbovanje maloletnih lica.<br></span><span style="color:#FF0000;font-family:Arial;font-size:13px;"><strong>5\. </strong></span><span style="color:#000000;font-family:Arial;font-size:13px;">Dozvoljeno na privatnom kanalu:<br>&nbsp;&nbsp; Jedan EggDrop, Bouncer (psyBNC, ZNC, SBNC)<br>&nbsp;&nbsp; Dva localhost klona sa 1 ip adrese,<br>&nbsp;&nbsp; Sve iznad ovoga bice na K ili G liniji.<br></span><span style="color:#FF0000;font-family:Arial;font-size:13px;"><strong>6.</strong></span><span style="color:#000000;font-family:Arial;font-size:13px;"> Bezpotrebno zadržavanje na kanalu #Help.<br></span><span style="color:#FF0000;font-family:Arial;font-size:13px;"><strong>7.</strong></span><span style="color:#000000;font-family:Arial;font-size:13px;"> Uznemiravanje &amp; prozivanje:<br>&nbsp;&nbsp; nacionalno, versko i seksualno<br>&nbsp;&nbsp; fizičkoj ili psihičkoj bolesti (nedostatku ili anomaliji).<br><br></span><span style="color:#FF0000;font-family:Arial;font-size:13px;"><strong>Važno:</strong></span><span style="color:#000000;font-family:Arial;font-size:13px;"><br>Ako ste uznemiravani sa nekim od zabranjenih pravila<br>možete nam se obratiti kanalu #help.<br>ili koristiti komandu za ignorisanje:<br>/ignore nick ili /ignore *!*@host.<br>Takođe možete sebi dodati posebne modove:<br>-&gt; +D (primer: /mode Nick +D)<br>- zaključava vaš pvt i privatna obaveštenja svim korisnicima.<br>-&gt; +R (primer: /mode Nick +R)<br>- zaključava vaš pvt samo neregistrovan
im korisnicima.</span>
</div>
</div>
<div style="height:510px;overflow:auto;padding:0;" id="x-test"> 
```

你可以在这里看到我的 DEMO -=> [http://x-serv.us/index2.html](http://x-serv.us/index2.html)

TNX 帮助 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T10:54:08.723

您可以尝试将其放在选项卡之外，然后在不需要时使用单击功能将其移出页面。然后，当您需要它时，只需将其移动到页面上您想要的位置，例如绝对定位。我不知道这是否是一个好习惯，但它适用于谷歌地图。

# datasource - WSO2 作为 JDNI 查找

> ID：13849443
> 
> 赞同：1
> 
> 时间：2012-12-12T22:02:01.613
> 
> 标签：datasource, jndi, wso2, wso2carbon

在 WSO2 AS 5.0.1 中，我部署了一个应该使用数据源的 webapp。我可以在 tomcat-server.xml 或 WAR 中的任何其他位置配置数据源，但是是否可以通过 JNDI 使用在 Carbon 管理控制台中配置的数据源？

采取的步骤：

1.  在 Management Console 中配置数据源，将其导出为 JNDI 为 jdbc/platform

2.  META-INF/context.xml 中的 ResourceLink 链接全局资源：

    < ResourceLink name="jdbc/platform" global="jdbc/platform" type="javax.sql.DataSource" />

3.  引用 web.xml 中的资源

    <resource-ref> <res-ref-name>jdbc/platform <res-type>javax.sql.DataSource <res-auth>Application

但是，尝试查找 jdbc/platform 或 java:comp/env/jdbc/platform 不会解析为对象。带有如下消息的查找文件：名称 [java:jdbc/platform] 未绑定在此上下文中。找不到 [java:jdbc]。或者，当使用 comp/env 作为前缀时，它会抱怨“comp”不可用。

WSO2 Carbon是否支持这种配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T10:02:26.847

目前不支持此功能，请参阅[https://wso2.org/jira/browse/CARBON-13908](https://wso2.org/jira/browse/CARBON-13908)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:29:14.717

此功能将适用于计划很快发布的 AS 5.1.0 版本。

# css - CSS：水平 UL：使其居中

> ID：13849446
> 
> 赞同：1
> 
> 时间：2012-12-12T22:02:07.433
> 
> 标签：css, menu, html-lists, center

我正在尝试制作一个水平菜单/列表。它混合了独立的按钮和以各自的形式包装的按钮。

通过大量的黑客攻击，我得到了所有按钮，在表单中而不是在表单中水平对齐。

但是，我无法将整个内容集中在页面上。

有人可以向我指出我没有看到什么吗？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
    <link rel="shortcut icon" href="http://localhost:7001/nsd/images/favicon.ico">
    <style type = "text/css">
        #horizontal_li_menu
        {
            margin:0 auto;
            text-align:center;
            border: 1px solid green;
            width:750px;
            list-style-type: none;
            text-decoration: none;
            padding:0 auto;
        }

        #horizontal_li_menu li 
        { 
            display: inline;
            float:left;
            padding-right: 10px;

         }

    </style>

</head>

    <body>

<ul id = "horizontal_li_menu">
    <li>
        <input value="Update" onclick="location.href='#'" name="button" type="button"/>
    </li>

    <li>
        <form name="formExportVECI" method="post" action="exportveci">
            <input name="person_id" value="661774" type="hidden">
            <input name="submitExport" value="Export To Microsoft Excel" type="submit">
        </form>

    </li>  
    <li>
        <form id="ufdh" name="formImportVECI" action="importveci" method="post" enctype="multipart/form-data">
                <input name="person_id" value="661774" type="hidden">
                <input value="Import From Microsoft Excel" path="Upload" type="submit">
                <input id="fileData" name="fileData" value="" type="file">
        </form>
    </li>

    <li>
        <input value="Search/Home" onclick="location.href='search'" name="buttonHome" type="button"/>
    </li>
    </ul>

</body></html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T23:44:32.817

### 在页面或其他元素中*水平*居中块元素

利用

```
 #element_id{margin: 0 auto;} 

```

这将使元素围绕其容器居中。

### 因此，要在页面上*水平*居中列表

将上述样式应用于**ul**，而不是**li**。
**BTW，除非id为****horizo** ​​ntal_li_menu_container的div有额外的内容，否则是多余的；没有它，**ul**将完美运行。
如果这不起作用，请检查以下内容：

1.  求该ul 中所有 li 的**宽度**、**填充****和边距之和**
*****   确保总和等于**ul的宽度***   确保容器 div 没有指定宽度，或者它已经在页面上居中****

****如果所有这些都是正确的，那么上述样式将起作用。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T22:38:20.717

根据您的CSS：

`#horizontal_li_menu_container ul`并`horizontal_li_menu_container_ul`选择相同的元素。我不确定你是否意识到这一点。

此外，当使用浮动时，您需要**清除它们**。****

# java - NullPointerException - Java - WCF 之上的 Web 服务客户端（使用 WS-Security）

> ID：13849451
> 
> 赞同：1
> 
> 时间：2012-12-12T22:02:21.950
> 
> 标签：java, web-services, ws-security

我正在使用 wsHttpBinding 构建 WCF 服务。（使用 WS-Security 和消息级别安全性）

现在我想为它构建一个 JAVA 客户端，使用..

*   地铁
*   网豆

到目前为止一切正常。我已经从 WSDL 创建了 Java 客户端。

现在每当我调用客户端代理时，我都会收到以下错误：

```
java.lang.NullPointerException
         at
 com.sun.xml.ws.security.impl.policyconv.BindingProcessor.requireSC(BindingProcessor.java:330)
         at
 com.sun.xml.ws.security.impl.policyconv.BindingProcessor.addPrimaryTargets(BindingProcessor.java:310)
         at
 com.sun.xml.ws.security.impl.policyconv.SymmetricBindingProcessor.process(SymmetricBindingProcessor.java:154)
         at
 com.sun.xml.ws.security.impl.policyconv.XWSSPolicyGenerator.process(XWSSPolicyGenerator.java:200)
         at
 com.sun.xml.ws.security.impl.policyconv.XWSSPolicyGenerator.process(XWSSPolicyGenerator.java:157)
         at
 com.sun.xml.wss.jaxws.impl.SecurityTubeBase.constructPolicyHolder(SecurityTubeBase.java:1233)
         at
 com.sun.xml.wss.jaxws.impl.SecurityClientTube.addIncomingProtocolPolicy(SecurityClientTube.java:683)
         at
 com.sun.xml.wss.jaxws.impl.SecurityTubeBase.buildProtocolPolicy(SecurityTubeBase.java:1206)
         at
 com.sun.xml.wss.jaxws.impl.SecurityTubeBase.collectPolicies(SecurityTubeBase.java:735)
         at
 com.sun.xml.wss.jaxws.impl.SecurityTubeBase.<init>(SecurityTubeBase.java:288)
         at
 com.sun.xml.wss.jaxws.impl.SecurityClientTube.<init>(SecurityClientTube.java:144)
         at
 com.sun.xml.wss.provider.wsit.SecurityTubeFactory.createTube(SecurityTubeFactory.java:227)
         at 
 com.sun.xml.ws.assembler.TubeCreator.createTube(TubeCreator.java:77)
         at
 com.sun.xml.ws.assembler.TubelineAssemblerFactoryImpl$MetroTubelineAssembler.createClient(TubelineAssemblerFactoryImpl.java:121)
         at com.sun.xml.ws.client.Stub.createPipeline(Stub.java:224)
         at com.sun.xml.ws.client.Stub.<init>(Stub.java:201)
         at com.sun.xml.ws.client.Stub.<init>(Stub.java:174)
         at com.sun.xml.ws.client.sei.SEIStub.<init>(SEIStub.java:81)
         at
 com.sun.xml.ws.client.WSServiceDelegate.createEndpointIFBaseProxy(WSServiceDelegate.java:602)
         at
 com.sun.xml.ws.client.WSServiceDelegate.getPort(WSServiceDelegate.java:344)
         at
 com.sun.xml.ws.client.WSServiceDelegate.getPort(WSServiceDelegate.java:326)
         at
 com.sun.xml.ws.client.WSServiceDelegate.getPort(WSServiceDelegate.java:308)
         at javax.xml.ws.Service.getPort(Service.java:134) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-15T18:34:51.117

从 Metro 2.0 升级到 Metro 2.3 有很大帮助，至少你会看到一个有意义的例外，在我的情况下，我的 JRE 安装中没有加密算法，我必须安装 Bouncy Castle 加密库（[http ://bit.ly/8JWAF](http://bit.ly/8JWAF)）。

**编辑：**这是一篇关于将 jax-ws 客户端与 WCF 服务通信的文章，希望对您有所帮助：[使用服务器证书将 Jax-ws 客户端与 WCF 服务通信](https://github.com/JeyDotC/articles/blob/master/Comunicating%20Jax-ws%20client%20with%20WCF%20service%20with%20server%20sertificate.md)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-12T22:43:30.967

`BindingProcessor.java`在 line 处设置断点`330`。我记得你用 F6 '跨过'。

如果您是 .NET 专家，那么这意味着您有一些基本的编程知识。每个程序员都应该知道如何调试程序。

[在此处](http://www.cs.uga.edu/~shoulami/sp2009/cs1301/tutorial/NetBeansDebuggerTutorial/NetBeansDebuggerTutorial.htm)阅读有关 NetBeans 调试的更多信息，并调试您的代码以查看该`requireSC`方法的参数未初始化的位置。

# c++ - 领域特定语言工具 Visual Studio 2012 输出 C++？

> ID：13849457
> 
> 赞同：0
> 
> 时间：2012-12-12T22:02:51.177
> 
> 标签：c++, windows, visual-studio-2012, dsl, windows-7-x64

我是 DSL 新手。我有 Windows 7 和 Visual Studio 2012。我已经安装了可视化和建模 SDK [http://msdn.microsoft.com/en-us/library/bb126259.aspx](http://msdn.microsoft.com/en-us/library/bb126259.aspx)

目前，这是输出 C# 代码。我想知道是否有什么办法可以将代码输出为 C++？有人做过吗？我必须使用其他工具吗？或加载项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:30:15.213

您可以执行以下操作之一：

1.  将代码从 C# 转换为 C++/CLI（[参见此处](https://stackoverflow.com/questions/12411349/converting-some-c-sharp-code-to-managed-or-c-cli-code)），

2.  如果您的目标是从 C++ 调用代码，则可以在非托管代码和托管代码之间构建 C++/CLI 桥梁。

# xml - XPath 一个命名空间不同的架构

> ID：13849463
> 
> 赞同：0
> 
> 时间：2012-12-12T22:03:05.710
> 
> 标签：xml, xpath, namespaces

当一个命名空间有不同的架构时，当我想从 xml 文件中选择带有 xpath 的项目时，我遇到了问题。

给出的是这个有效的 xml 文件：

```
<getDataAction xmlns="http://example.org/ns1">
   <getData xmlns:f4k1="http://example.org/ns2" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
      <f4k1:place xmlns:f5k1="http://example.org/ns3">
         <f4k1:city i:type="f5k1:Country" xmlns:f5k1="http://example.org/ns4">
           <f5k1:notice>Notice</f5k1:notice>
         </f4k1:city>
         <f4k1:testvillage i:nil="true">
           <f4k1:data xmlns:f5k1="http://example.org/ns5">
             <f5k1:address xmlns:d7k1="http://example.org/ns6">
               <f5k1:important>no</f5k1:important>
             </f5k1:address>
           </f4k1:data>
         </f4k1:testvillage>
      </f4k1:place>
  </getData>
</getDataAction> 
```

我要选择

```
<f5k1:notice>Notice</f5k1:notice> 
```

所以我用这个`xpath-query //f5k1:notice`，但它不起作用。如果我将 ns5 命名空间（第 8 行）更改为 ns4（如第 4 行），它将起作用。

你能告诉我为什么这会起作用以及我必须做些什么才能在不更改 XML 的情况下让它工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T02:04:41.257

XPath 表达式`//f5k1:notice`计算为一组元素，其本地名称为`notice`，其名称空间名称为环境绑定到的任何名称空间`f5k1`。由于您没有指定要使用什么环境来评估此 XPath 表达式，因此无法准确说明出了什么问题，但最简单的解释是，在您的环境中，`f5k1`未绑定到`http://example.org/ns4`.

最好的解决方法：了解如何将前缀绑定到您正在使用的系统中的命名空间。

最简单的解决方法： `//*[local-name="notice" and namespace-name="http://example.org/ns4"]`.

# javascript - Javascript 将选择器的文本内容分配给表单输入值

> ID：13849475
> 
> 赞同：1
> 
> 时间：2012-12-12T22:04:07.560
> 
> 标签：javascript, forms

$('#Price') 显示这个值：“$123,000”。我想将此值分配给“123000”形式的表单文本输入字段。这是我的代码：

```
var numberString = $('#Price').text();
var removeSpace = numberString.replace(" ", "");  
var removeDollarSign = removeSpace.slice(1);
var resultValue = + removeDollarSign.replace(/,/g, ''); 
myForm['inputname'].value = resultValue; 
```

我得到 NaN 结果。我还尝试使用 Number() 函数将 resultValue 转换为数字，但这没有帮助。我的问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:07:36.293

```
var resultValue = + removeDollarSign.replace(/,/g, ''); 
```

应该：

```
var resultValue =  removeDollarSign.replace(/,/g, ''); 
```

你没有连接，你只是分配给一个新的变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T22:07:36.387

尝试

```
myForm['inputname'].value = $('#Price').text().replace(/,|\s|\$/g, ""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T22:08:00.010

在这里，您应该删除加号

```
 // Wrong
 var resultValue = + removeDollarSign.replace(/,/g, ''); 
  // correct
 var resultValue = removeDollarSign.replace(/,/g, ''); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T22:09:50.067

您可以使用（删除所有非数字）来简化它：

```
myForm['inputname'].value = $('#Price').text().split('.')[0].replace(/[^\d]/g, '') 
```

# python - regex match saving

> ID：13849483
> 
> 赞同：0
> 
> 时间：2012-12-12T22:05:09.147
> 
> 标签：python, regex

I have the following regex, how do I save the value of `\1` into another variable?

```
image_id = A8064ABAAAGAAT120108.1
version = re.sub(r'^.*?(\d+\D*)(\..*)', r'\1T\2', image_id) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:13:32.863

You'd better match the regex in the string:

```
pattern = re.compile('.*?(\d+\D*)(\..*)')
k = pattern.search(image_id)
saved_value = k.groups()[0] # this will give you the value 
                            # of the fist matched group
                            # as a string 
```

# postgresql - PostgreSQL 组成复杂的查询字符串

> ID：13849486
> 
> 赞同：0
> 
> 时间：2012-12-12T22:05:24.063
> 
> 标签：postgresql

我正在使用带有 VB.NET/ODBC 的 PostgreSQL，并且必须构造一个有点复杂的查询字符串。
这是简化版：

> SELECT dtbl_id, idx, name, meas, code, year FROM mytable WHERE name ILIKE 'nemo%' <-edited AND (dtbl_id BETWEEN 1 AND 9999)
> OR (dtbl_id BETWEEN 15000 AND 19999) ORDER BY name

我也尝试：

> AND (dtbl_id BETWEEN 1 AND 9999)
> AND (dtbl_id BETWEEN 15000 AND 19999) 按名称排序

我尝试获取以“nemo”开头的名称，但前提是它们的索引介于 1 和 9999 之间，索引介于 15000 和 19999 之间。在这两种情况下，我都没有得到想要的结果（如果有的话）。

我的查询有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:11:26.917

尝试：

```
SELECT dtbl_id, idx, name, meas, code, year 
FROM mytable 
WHERE name ILIKE '%nemo'
AND ((dtbl_id BETWEEN 1 AND 9999)
     OR (dtbl_id BETWEEN 15000 AND 19999))
ORDER BY name 
```

详情[在这里](http://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-PRECEDENCE)。

错误-`OR`然后具有较低的优先级`AND`。因此，您的第一个`WHERE`子句如下所示：

```
WHERE (name ILIKE '%nemo'  AND dtbl_id BETWEEN 1 AND 9999)
   OR (dtbl_id BETWEEN 15000 AND 19999) 
```

另一个错误（正如 Edmund 指出的那样） - 获取以you need**开头**的名称。`nemo``ILIKE 'nemo%'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T22:14:42.980

主要问题是“以 nemo 开头”最好使用条件获得`name ILIKE 'nemo%'`——注意`%`通配符在末尾。将其放在开头搜索*以 nemo 结尾*的名称！

第二个问题是`OR`和`AND`运算符的优先级，正如 Igor 所指出的那样。如他所示，在后两个子句周围加上括号。

# excel - excel vba根据点值更改数据点的条形图颜色

> ID：13849488
> 
> 赞同：6
> 
> 时间：2012-12-12T22:05:34.610
> 
> 标签：excel, vba, charts, points

* * *

我有一些图表，其中 X 值是文本，Y 值是数字。如果条的 Y 值小于零，我想将每个条着色为红色，如果大于或等于零，则将其着色为绿色。另外，如果条的 X 值为“NET CHANGE”，我需要条为黄色。我在这里按照以前的 StackOverflow 线程中的说明进行操作：[根据类别标签使用 VBA 更改条形颜色](https://stackoverflow.com/questions/9486186/changing-bar-colors-using-vba-based-on-category-label)。

我收到运行时错误 451 Property let procedure not defined 并且 property get procedure 没有返回对象。

我的代码如下：

```
For chartIterator = 1 To ActiveSheet.ChartObjects.count

    For pointIterator = 1 To ActiveWorkbook.Sheets("Sheet1").ChartObjects(chartIterator).Chart.SeriesCollection(1).Points.count
        If ActiveWorkbook.Sheets("Sheet1").ChartObjects(chartIterator).Chart.SeriesCollection(1).Values(pointIterator) >= 0 Then
            ActiveWorkbook.Sheets("Sheet1").ChartObjects(chartIterator).Chart.SeriesCollection(1).Points(pointIterator).Interior.Color = _
                RGB(146, 208, 80)
        Else
            ActiveWorkbook.Sheets("Due To Chart").ChartObjects(chartIterator).Chart.SeriesCollection(1).Points(pointIterator).Interior.Color = _
                RGB(255, 0, 0)
        End If
    Next pointIterator

Next chartIterator 
```

错误出现在 IF 语句中。我还尝试了 .Points(pointIterator).Value，它得到了“未为此对象定义的属性或方法”错误。

对我做错了什么有任何想法吗？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T21:23:47.933

您在使用 SeriesCollection(1).Values 时遇到了麻烦，您将其视为可以迭代的数组。相反，这是一个返回 SeriesCollection 中点的值的函数。

需要将函数的结果分配给数组变量，然后遍历数组以测试数组中的值是大于还是小于零。然后，您可以将颜色分配给图表点。

这段代码应该可以解决问题：

```
 Sub color_chart()

    Dim chartIterator As Integer, pointIterator As Integer, _
        seriesArray() As Variant

    For chartIterator = 1 To ActiveSheet.ChartObjects.Count
        seriesArray =  ActiveWorkbook.Sheets("Sheet1").ChartObjects(chartIterator). _
                       chart.SeriesCollection(1).Values

        For pointIterator = 1 To UBound(seriesArray)             

           If seriesArray(pointIterator) >= 0 Then
               ActiveWorkbook.Sheets("Sheet1").ChartObjects(chartIterator). _  
               chart.SeriesCollection(1).Points(pointIterator).Interior.Color = _
               RGB(146, 208, 80)
           Else
               ActiveWorkbook.Sheets("Sheet1").ChartObjects(chartIterator). _
               chart.SeriesCollection(1).Points(pointIterator).Interior.Color = _
               RGB(255, 0, 0)
           End If

        Next pointIterator

    Next chartIterator

    End Sub 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T03:25:43.140

这是一个不需要 VBA 的替代方案，并且随着公式的更新而动态工作。查看本教程中的“条件格式条形图”示例：

[Excel 图表中的条件格式](http://peltiertech.com/WordPress/conditional-formatting-of-excel-charts/)

# php - Allowed memory size exhausted but memory_get_peak_usage says otherwise

> ID：13849492
> 
> 赞同：3
> 
> 时间：2012-12-12T22:05:53.680
> 
> 标签：php, memory-limit, question2answer

On my server I have the following error:

> Allowed memory size of 268435456 bytes exhausted

This happens in a loop (a foreach one) and when I'm checking the memory usage in the loop with

```
memory_get_peak_usage(); 
```

I obtain `7254128` which is far from the `268435456` exhausted!

I checked at multiple places and the memory usage is not increasing wildly so I really don't know where the problem is!

The same script is working just fine on my local computer where I setted the memory limit to only `16M` in my `php.ini` file

Here is the code causing the problem, but i think it won't be really usefull, it's from a plugin of question2answer open source plateform:

```
foreach ($badges as $slug => $info) {
    $badge_name=qa_badge_name($slug);
    if(!qa_opt('badge_'.$slug.'_name')) 
            qa_opt('badge_'.$slug.'_name',$badge_name);
    $name = qa_opt('badge_'.$slug.'_name');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:52:43.517

我强烈怀疑您的问题是由于标准 MySQL 连接器库中的“错误功能”造成的。当从数据库中获取包含“long blob”或“long text”字段的行时。MySQL 库不是分配数据所需的确切大小，而是尝试分配存储行可能需要的最大大小。即 4 GB 的内存。

解决此问题的最简单方法是切换到使用没有此“功能”的 MySQL ND 连接器

[用于 SQL 查询的 PHP 大量内存使用](https://stackoverflow.com/questions/11913818/php-massive-memory-usage-for-sql-query?lq=1)

[67108864 字节的允许内存大小已用尽](https://stackoverflow.com/questions/11915415/allowed-memory-size-of-67108864-bytes-exhausted)

> 我正在使用 memory_get_peak_usage(); 检查循环中的内存使用情况；我得到的 7254128 远非 268435456 用尽！

那是对的。内存分配失败，因此峰值内存使用量永远不会显示使用中的巨大分配。

顺便说一句，您应该能够将错误消息跟踪到生成失败的内存分配错误的确切代码行。如果它不是源自 SQL 提取，那么答案可能是错误的。

# python - 关于数据库设计基础的问题

> ID：13849497
> 
> 赞同：3
> 
> 时间：2012-12-12T22:06:07.397
> 
> 标签：python, sql, database, sqlite

我正在尝试使用 Sqlite3 来处理这些 SQL 内容。我有几个关于这个话题的问题。

数据库是否遵循基本结构？我很好奇我是否会将我的数据库建模为就像一个巨大的字典一样。

### 我正在考虑的问题：

如果我想要一个可以提取任何城市的邮政编码或其他一般信息的程序，我正在考虑一种嵌套表的结构。即：

```
Countries Table:
+----+--------+--------+---------+
| US | Canada | Mexico |  Etc... |
+----+--------+--------+---------+
  |
  |
  |
  |
  | States Table:
  +---------+----------+---------+--------+
  | Alabama | Arkansas | Georgia | Etc... |
  +---------+----------+---------+--------+
                  |
                  |
                  |
                  |
                  | Cities Table:
                +-----------+---------+--------+---------+
                | Alexander | Bauxite | Benton | Etc ... |
                +-----------+---------+--------+---------+
                                           |
                                           |
                     +-----+------------+---------+------+--------------------+                    
                     | Key | population | zipcode | size | other random stuff |
                     +-----+------------+---------+------+--------------------+ 
```

但是嵌套太多了吗..？这是一个糟糕的设计吗？最重要的东西，`countries`表格并没有真正做太多，我有点在我的脑海里有这样的想法，你应该能够使用数据库轻松地完成非常复杂的事情。如果我按照我的设计去做，在我最终得到我想要的东西之前，我似乎会遍历一堆东西。所以，我只是好奇我是否错误地处理了整个事情。

有谁知道使用数据库的基础知识的好入门？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:18:45.510

关系数据库基于[实体关系模型](http://en.wikipedia.org/wiki/Entity%E2%80%93relationship_model#Further_reading)。如果您想掌握 RDBSM 背后的概念，请考虑先熟悉该理论。具体而言，关系方案（表、列、通过外键的关系......）是 ERM 的一个（或那个）应用程序。

另一个要搜索的关键字是`Normalization`. 标准化有不同的“等级”和从一个等级转换为另一个等级的规则，该主题与您关于表结构的问题直接相关。一个普遍的答案是，这取决于。一般来说，规范化有助于保持数据的一致性——但完全规范化的表结构可能会导致性能损失（例如，经常使用查询的许多连接）。

我建议先进行更严格的标准化，然后检查性能。选择性非规范化**可能**有助于提高性能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T22:19:33.877

有许多范式（1NF、2NF、3NF、BCNF...）。更高的形式=更好的粒度（没有太多的冗余，更好的关系......）。

可能是一个小细节。你有国家和州。但是恕我直言，美国是世界上的具体案例（其他类似案例并不多）。可能是表州，城市就足够了（+大洲）。

设计依赖于目的（在某些情况下，较低的 NF 应该更有效，取决于许多因素 - 记录数、目的等）。你必须问几个问题。这个数据库的目的是什么？表城市是否足够，或者我也想使用村庄，所以应该是表城市？等等。但是你的设计几乎是好的；）

# c# - 函数传入的Type的返回值

> ID：13849500
> 
> 赞同：1
> 
> 时间：2012-12-12T22:06:19.973
> 
> 标签：c#, types, random

我正在用 C# 编写一个随机值生成器，这个通用函数应该返回 , , 的值，具体`Type` `Bool`取决于传递的类型。所以，我可以将作为方法参数传递，但是我应该如何定义返回类型呢？`Int64``Int32``Double``System.Type`

例如

`GetRandomValueByType(TypeCode.Boolean)` <--- 返回布尔值 `GetRandomValueByType(TypeCode.Double)` <--- 返回双 `GetRandomValueByType(TypeCode.Int32)` 精度 <--- 返回 Int32

等等等等。

谢谢！

- - - - - - - - - - - - - -编辑 - - - - - - - - - - - ----------

这是我使用的代码：

```
if (ta.IsPrimitive || Type.GetTypeCode(ta) == TypeCode.String)
{
    Random rnd = new Random();
    var buffer = new byte[sizeof(Int64)];
    rnd.NextBytes(buffer);
    switch (Type.GetTypeCode(ta))
    {
        case TypeCode.Boolean:
            oArr[ctr] = (rnd.Next(100) % 2 == 0);
            break;
        case TypeCode.Byte:
            oArr[ctr] = buffer[0];
            break;
        case TypeCode.SByte:
            oArr[ctr] = (sbyte)buffer[0];
            break;
        case TypeCode.Char:
            oArr[ctr] = Convert.ToInt32(Math.Floor(26 * rnd.NextDouble() + 65));
            break;
        case TypeCode.Decimal:
            oArr[ctr] = NextDecimal(rnd);
            break;
        case TypeCode.Double:
            oArr[ctr] = rnd.NextDouble() * rnd.Next(Int32.MaxValue);
            break;
        case TypeCode.Single:
            var buf = new byte[sizeof(Single)];
            rnd.NextBytes(buf);
            oArr[ctr] = BitConverter.ToSingle(buffer, 0);
            break;
        case TypeCode.Int32:
            oArr[ctr] = rnd.Next(Int32.MinValue, Int32.MaxValue);
            break;
        case TypeCode.UInt32:
            oArr[ctr] = rnd.Next(Int32.MaxValue) + (rnd.Next(100) % 2) * rnd.Next(Int32.MaxValue);
            break;
        case TypeCode.Int64:
            oArr[ctr] = BitConverter.ToInt64(buffer, 0);
            break;
        case TypeCode.UInt64:
            oArr[ctr] = BitConverter.ToUInt64(buffer, 0);
            break;
        case TypeCode.Int16:
            oArr[ctr] = rnd.Next(Int16.MaxValue);
            break;
        case TypeCode.UInt16:
            oArr[ctr] = rnd.Next(Int16.MaxValue) + (rnd.Next(100) % 2) * rnd.Next(Int16.MaxValue);
            break;
        case TypeCode.String:
            oArr[ctr] = RandomString(rnd.Next(100));
            break;
        default:
            oArr[ctr] = 0;
            break;
    }
}
else
{
    oArr[ctr] = getInstance(dllFile, ta.Name);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T22:08:28.187

泛型在这里可能很方便-您可以执行以下操作：

```
T GetRandomValueByType<T>() where T : IConvertible
{
   // Compute random...
   return Convert.ChangeType(randomValue, typeof(T));
} 
```

这将通过以下方式调用：

```
double value = GetRandomValueByType<double>(); 
```

但是，这并不完全安全（使用也不安全`System.Type`），因为您仍然可以传递一个已实现`IConvertible`但不合适的类型。

* * *

鉴于您的评论，我建议您只使用单独的方法：

```
bool GetRandomBoolean() { // ...
double GetRandomDouble() { // ...
int GetRandomInt() { // ... 
```

如果您已经要打开类型并进行特定的实现，这将提供一种更清洁、更安全的方式来处理它。通过使用单独的方法，您消除了传递错误类型的可能性，并简化了 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T22:08:27.500

您需要使这些方法通用：

```
T GetRandomValueByType<T>()
{
    ...
}

GetRandomValueByType<Boolean>();
GetRandomValueByType<Double>();
GetRandomValueByType<Int32>(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T22:10:34.607

你是一个通用的实现：

```
 public class Generic
    {
      public static T GetRandomValueByType<T>(T parameter)
      {
        switch(typeof(T))
        {
            case System.Int32:
                Random r = new Random();
                return (T)r.Next();
            case System.Guid:
                return (T)Guid.NewGuid();
            // other cases here...
}
      }
    } 
```

并使用这样的东西：

```
var value = Generic.GetRandomValueByType<bool>(); 
```

您还可以使用`Random`类提供一些随机值，作为样本。

# soap - 如果客户端请求“en”，但我只有特定国家/地区的语言环境，我该如何解决要使用的语言环境？

> ID：13849502
> 
> 赞同：1
> 
> 时间：2012-12-12T22:06:21.030
> 
> 标签：soap, localization, culture

我正在使用包含本地化词汇文件的 SOAP 集成标准。基本上，任何文本字段都可以包含一个语言/国家代码。

```
<RoleName>
    <lang>en</lang>
    <text>Administrator</text>
</RoleName> 
```

我们的一个合作伙伴只向我们发送“en”，但是随标准分发的默认词汇文件仅包括“en-US”、“en-CA”和“en-GB”。

我的直觉是我应该拒绝他们的请求，因为他们没有发送规范定义的可接受的语言代码，但他们坚持认为我们应该能够解析“en”，因为它是有效的代码并且我们有英语可用的词汇。

我是不是基于这个？最佳做法是什么？如果我们使用自己的默认值或其他方式拥有它，是否期望给定一个通用语言代码，我们应该自动解析为更具体的国家代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T09:59:03.137

该平台通常具有映射到每个中性文化的默认特定文化。例如，如果您使用的是 .NET，如果您传递“en”，[CultureInfo.CreateSpecificCulture](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.createspecificculture.aspx)将为您提供“en-US”的 CultureInfo。换句话说，“en-US”是平台为“en”建立的默认值（“fr-FR”为“fr”，“es-ES”为“es”等）。

我相信在大多数情况下，如果您获得中性文化，让系统选择默认的特定文化是可以接受的。但是，如果文化对您的组件至关重要并且您更喜欢严格，那么您也可以要求您的文化标识符不能是中性文化，正如您所建议的那样。

# python - 在用户输入处创建变量

> ID：13849503
> 
> 赞同：0
> 
> 时间：2012-12-12T22:06:23.157
> 
> 标签：python

有没有办法在用户输入后创建变量？多个，而不是。例如，我正在编写一个简单的小程序来记录您在一本书中的哪一页，但我希望它记录用户需要的尽可能多的书籍。因此，例如，程序会询问用户他们想要为多少本书记录书签。如果用户输入 5，它将创建 5 个随机命名的变量，并能够在以后读取它们。我应该可以自己编写所有内容，但我需要知道，有没有办法从用户输入创建变量，如果有，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T22:11:52.463

虽然你有正确的想法，但它是错误的实施。`list`改为尝试：

```
newlist = []
for i in range(pages):
    newlist.append(<variable>) 
```

然后通过以下方式访问它们：

```
newlist[slot] 
```

* * *

编辑：正如评论者所建议的，您也可以使用 a `dict`。它们很有用。

```
mydict = {}
books = input().split(", ")
for book in books:
    mydict[book] = <variable> 
```

这个简短的程序将让您以以下形式输入书籍

```
cool book, to kill a mockingbird, book of evil 
```

然后像这样使用它：

```
mydict['to kill a mockingbird'] 
```

访问您的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T22:12:52.293

s = raw_input('--> ') --> 10

然后一个简单的 for 循环 s 次将循环 10 次。创建一个数组或字典来保存其中的输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T22:13:30.977

是的，有办法做到这一点，见下文。许多人会争辩说你不应该这样做，通常是有正当理由的。

```
globals()['variable'] = 42
print variable 
```

# linux - 带有可选参数的 .NET mono MVC3 路由约束

> ID：13849508
> 
> 赞同：0
> 
> 时间：2012-12-12T22:06:31.203
> 
> 标签：linux, asp.net-mvc-3, routing, mono

我有在 linux 上运行在 mono 下的 MVC3 应用程序。我有这条路线：

```
 routes.MapRoute(
        "search",
        @"search/{term}",
        new {
            controller = MVC.Mobile.Name,
            action = MVC.Mobile.Actions.ActionNames.Search,
            term = UrlParameter.Optional
        },
        new {
            term = @"^[0-9]*$"
        }
    ); 
```

当我显示术语参数（例如/search/123）或不显示（例如/search）时，这在windows中都可以正常工作。现在问题出现在我将它部署到 linux 上后：它返回 404 用于没有术语的路由（例如 /search）并且适用于术语（例如 /search/123）。

我最终将这条路线分成了两条：

```
 routes.MapRoute(
            "search-empty",
            @"search",
            new {
                controller = MVC.Mobile.Name,
                action = MVC.Mobile.Actions.ActionNames.Search
            }
        );

        routes.MapRoute(
            "search",
            @"search/{term}",
            new {
                controller = MVC.Mobile.Name,
                action = MVC.Mobile.Actions.ActionNames.Search
            },
            new {
                term = @"^[0-9]*$"
            }
        ); 
```

此外，我尝试使用 reg exp 并使用默认值而不是可选参数定义术语，但没有任何成功。有谁知道为什么它在windows上运行而不在linux上运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:26:12.510

问题出现在`System.Web.Routing.Route.ProcessConstraint()`方法中。

Mono 仅在值（作为字符串）不为空或不为空时评估正则表达式。如果您在没有任何参数的情况下访问路由，则该值是一个`UrlParameter`实例（即`UrlParameter.Optional`），并且 this as string 为空。因此，表达式永远不会被评估。

要解决这个问题，您可以实现自己的 Route 对象并以不同的方式处理那里的事情。[更多关于这在我的博客文章](http://www.counity.at/blog/2012/mvc-routing-constraints-mono/)中。

这是导致该行为的单声道实现[。](https://github.com/mono/mono/blob/master/mcs/class/System.Web.Routing/System.Web.Routing/Route.cs)看`ProcessConstraintInternal()`方法。`MatchConstraintRegex()`仅当参数值不为 null 或为空时才调用。

# layout - Creating button listeners for multiple Layouts .xml - Android

> ID：13849513
> 
> 赞同：1
> 
> 时间：2012-12-12T22:06:46.760
> 
> 标签：layout, main, listeners

This is my NetABC java file in my project. Here I define multiple listeners for buttons in my main.xml layout. Everyone of those listeners work fine.

When I push the StatusButton (defined few scrolls down), it takes me to my second layout: status.xml. In status.xml I have a few buttons. I would like to create listeners for them in NetABC.java aswell. Here's the problem: Whenever I make listeners in NetABC.java for buttons in main.xml, everthing works perfectly well. The second I create a listener for a button which is not residing in main.xml layout, but insted, let's say status.xml layout I get an error when trying to simulate on AVD.

The last listener is an example of a button not residing in main.xml but in status.xml. It's suppose to work as a back button, which takes me back from status.xml to main.xml. I define it the same way as any other button listener I have defined. By using the R.id.button etc.

Any chance anyone would know why a listener defined for a button not in main.xml creates an error? Any help much appreciated.

```
package com.netabc;

import com.netabc.R;

import android.app.Activity;
import android.os.Bundle;
import android.content.DialogInterface;
import android.widget.Button;
import android.app.AlertDialog;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.View.OnKeyListener;
import android.widget.EditText;
import android.widget.TextView;
import android.net.wifi.WifiConfiguration;
import android.net.wifi.WifiInfo;
import android.net.wifi.WifiManager;

public class NetABC extends Activity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

            //TextView myTextView = (TextView) findViewById(    .IPText1);
            //myTextView.setText(ip);

            // Sett Klikk Lytter SSID Knapp
            Button SSIDButton = (Button) findViewById(R.id.SSIDButton);
            SSIDButton.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {

                }        
            });

            // Sett Klikk Lytter IP Knapp
            Button IPButton = (Button) findViewById(R.id.IPButton);
            IPButton.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {

                }        
            });

            // Sett Klikk Lytter Subnetmaske Knapp
            Button SubnetmaskeButton = (Button) findViewById(R.id.SubnetmaskeButton);
            SubnetmaskeButton.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {

                }        
            });

            // Sett Klikk Lytter Default Gateway Knapp
            Button DefaultGatewayButton = (Button) findViewById(R.id.DefaultGatewayButton);
            DefaultGatewayButton.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {

                }        
            });

            // Sett Klikk Lytter Nettverk Status Knapp
            Button StatusButton = (Button) findViewById(R.id.Nettverk_StatusButton);
            StatusButton.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    setContentView(R.layout.status);
                }        
            });

            // Sett Klikk Lytter Nettverk Ekstra Knapp
            Button EkstraButton = (Button) findViewById(R.id.Nettverk_EkstraButton);
            EkstraButton.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    setContentView(R.layout.ekstra);
                }        
            });

            //Sett Klikk Lytter Back Knapp
            Button BackButton1 = (Button) findViewById(R.id.Signal_StyrkeButton);
            BackButton1.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    setContentView(R.layout.main);
                }        
            }); 

    };
} 
```

# node.js - “无法通过键查找会话：connect.sid” - session.socket.io

> ID：13849517
> 
> 赞同：5
> 
> 时间：2012-12-12T22:07:32.987
> 
> 标签：node.js, express, socket.io

我对 NodeJS 开发很陌生。我在我的 express 应用程序中使用[session.socket.io](https://github.com/functioncallback/session.socket.io)插件，但是当我在*sessionSockets.on* *('connection', . ..*

这是整个`app.js`：

```
var http = require('http'),
    connect = require('express/node_modules/connect'),
    express = require('express'),
    app = express();

var cookieParser = express.cookieParser('Your secret key here'),
    sessionStore = new connect.middleware.session.MemoryStore();

app.configure(function() {
    app.set('port', process.env.PORT || 3000);
    app.use(express.logger('dev'));
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(cookieParser);
    app.use(express.session({
        store: sessionStore
    }));
    app.use(app.router);

});

var server = http.createServer(app),
    io = require('socket.io').listen(server);

var SessionSockets = require('session.socket.io'),
    sessionSockets = new SessionSockets(io, sessionStore, cookieParser);

app.configure('development', function() {
    app.use(express.errorHandler());
});

app.get('/', function(req, res) {
    res.end("Welcome to the API server");
});

sessionSockets.on('connection', function(err, socket, session) {

    console.log('-----------------------');
    console.log(err.error);
    console.log('-----------------------');

    socket.emit('welcome', {
        msg: 'You\'re now listening to the api.'

    });

});

server.listen(app.get('port'), function() {
    console.log("Express server listening on port " + app.get('port'));
}); 
```

客户端：

```
<!DOCTYPE html>

<head>   
    <meta charset="utf-8">    
    <title>Express+SocketIO testing</title> 
</head>

<body>

    <div id="responses">   
        <h2>API responses:</h2>   
        <ul></ul>
    </div>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>    
    <script src="http://localhost:3000/socket.io/socket.io.js"></script>

    <script>

        $(document).ready(function() {

            var socket = io.connect('//localhost:3000');

            // Welcome message    
            socket.on('welcome', function(data) {    
                var li = '<li>Server said: ' + data.msg + '</li>';    
                $('#responses ul').append(li);    
            });
        });

    </script> 
</body>
</html> 
```

包.json

```
{
  "name": "application-name",
  "version": "0.0.1",
  "private": true,
  "scripts": {
    "start": "node app"
  },
  "dependencies": {
    "express": "3.0.3",
    "socket.io":"*",
    "session.socket.io":"*"
  }
} 
```

欢迎任何帮助或提示。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-26T12:24:32.333

这帮助我解决了这个问题：[https ://github.com/wcamarao/session.socket.io/issues/35](https://github.com/wcamarao/session.socket.io/issues/35)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T22:14:00.347

许多人都遇到了同样的错误，[根据 Github 上的评论](https://github.com/functioncallback/session.socket.io/issues/9#issuecomment-13044749)，有一个非常简单的解决方案。这只是浏览 127.0.0.1 与 localhost 的问题。

我希望这也能解决你的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T14:41:36.247

当我使用 Java socket.io 客户端时，这发生在我身上，因为 Java 无法访问 node.js 会话。

所以，我决定最好不要使用 session.socket.io 插件。一个更通用的解决方案，可以与各种客户端一起工作，是：将会话数据（或会话 ID）发送到客户端，可能通过在客户端代码中插入 Javascript 片段；然后让客户端将会话 ID 发送回服务器。

# algorithm - 这种算法是否有一个通用名称，类似于running-sum-like算法？

> ID：13849520
> 
> 赞同：0
> 
> 时间：2012-12-12T22:07:39.297
> 
> 标签：algorithm, naming

我正在寻找以下算法/算法技巧的通用名称。

```
xs = [0, 1, 0, 0, 1, 0, 1, 1, 0, 0, 0, 1]

ys = [xs[0]]
for i in range(1, len(xs)):
  if xs[i] == 1:
    ys.append(ys[i - 1] + 1)
  else:
    ys.append(ys[i - 1])

print ys
# prints: [0, 1, 1, 1, 2, 2, 3, 4, 4, 4, 4, 5] 
```

也就是说，累积在 中的某个索引处看到的 1 的数量`xs`。另外，有没有更简洁的方法来做到这一点？欢迎 Scala、Python 和 Haskell 回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:58:32.613

在 Haskell 中，这可以写得更简洁，它被命名为 a `scan`（更准确地说是左扫描，因为它累积了左折叠的中间结果），

```
scanl1 (\y x -> y + if x == 1 then 1 else 0) xs 
```

而且，对于运行总和，甚至更好，

```
scanl1 (+) xs 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T22:14:28.560

我不这么认为，对一个值进行累积总和太基本了。让代码保持原样，这是可以理解的。

# vba - 获取字符串的第 n 行

> ID：13849522
> 
> 赞同：1
> 
> 时间：2012-12-12T22:08:01.587
> 
> 标签：vba, excel

我有以下字符串：

```
BAXH14#cote href="nego_cotes_in_en.php?symbol=BAX&amp;instrument=BAXH14#cote">14 MAR</A></TD>
<TD>98.620</TD>
<TD>98.630</TD>
<TD>98.620</TD>
<TD>0</TD>
<TD>33,568</TD>
<TD>6,071</TD>< 
```

我想检索 98.620 中的第三行。这个字符串中的数字每天都会改变，所以任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T23:06:08.097

如果它是一个字符串而不是您正在解析或跨多行的文件，最直接的方法是使用以下内容。假设字符串在 Sheet1 的 Range("A1") 中。

```
Dim dataSplit() As String
Dim returnData As String

dataSplit = Split(Sheet1.Range("A1").Value2, "</TD>")

returnData = Right$(dataSplit(2), Len(dataSplit(2)) - 5) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T22:39:06.460

使用 Mid (string, start, length) 和 find (what, where, startpos) 您可以跳过两个换行符 - char (10) 并将长度设置为第二个和第三个换行符位置之间的差异，如下所示：-

```
=MID(A1,FIND(CHAR(10),A1,FIND(CHAR(10),A1,1)+1),FIND(CHAR(10),A1,FIND(CHAR(10),A1,FIND(CHAR(10),A1,1)+1)+1)-FIND(CHAR(10),A1,FIND(CHAR(10),A1,1)+1)) 
```

假设 A1 包含您的字符串。如果您需要将其视为行尾标记，则将所有字符（10）替换为“”。

优雅的？当然不是！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T22:52:37.300

假设您使用的是 VBA，这可以解决问题 - 只需将 str 设置为您的字符串

```
Sub test()
Dim str As String
Dim n As Integer

n = 3

str = "testData<TD>98.620</TD><TD>98.630</TD><TD>98.620</TD><TD>0</TD><TD>33,568</TD><TD>6,071</TD>"
subSTR = str
For i = 1 To n
    If Not (InStr(1, subSTR, "<TD>") = 0) Then
        subSTR = Right(subSTR, Len(subSTR) - InStr(1, subSTR, "<TD>") - 3)
    Else
        subSTR = ""
        Exit Sub
    End If
Next i

finalStr = Left(subSTR, InStr(1, subSTR, "</TD>") - 1)

End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T23:17:56.293

[一种简单的方法是使用Split](http://msdn.microsoft.com/en-US/library/6x627e5f%28v=vs.80%29.aspx)函数将字符串分解为数组。这需要一个字符串并在调试窗口中打印第三项。像这样...

```
Sub split_td()
    Dim values() As String
    Dim sourceString As String
    Dim result As String

    ' get your source data here
    sourceString = "<td>1</td><td>2</td><td>3 - pick me!</td><td>4</td>"

    'break it into an array of strings
    values = Split(sourceString, "<td>")

    'tidy up the end tag
    result = Replace(values(3), "</td>", "")

    Debug.Print values(3)
End Sub 
```

如果您不介意工作表中的额外列，那么您可以执行以下操作...

```
A------------------------     B----------------------------------------------------------

                              <td>1</td><td>2</td><td>3 - pick me!</td><td>4</td>
=SEARCH("<td>", B$1)    
=SEARCH("</td>",B$1)        =SUBSTITUTE(SUBSTITUTE(MID(B$1,A2,A3-A2),"/",""),"<td>","")
=SEARCH("</td>",B$1,A3+1)       =SUBSTITUTE(SUBSTITUTE(MID(B$1,A3,A4-A3),"/",""),"<td>","")
=SEARCH("</td>",B$1,A4+1)       =SUBSTITUTE(SUBSTITUTE(MID(B$1,A4,A5-A4),"/",""),"<td>","")
(etc) 
```

然后将文本操作的点放在 A 列中，并在 B 列中进行提取。

# jquery - 使用 jquery .hide() 时修复页脚

> ID：13849524
> 
> 赞同：0
> 
> 时间：2012-12-12T22:08:05.457
> 
> 标签：jquery, html, css

JsFiddle：

[http://jsfiddle.net/7y6n5/2/](http://jsfiddle.net/7y6n5/2/)

当一个人单击链接（底部的“损坏”图像）时，内容 div 应该刷新并显示新内容。但是您会看到页脚发生了什么：它随着动画一起上下移动。我需要将其固定到位。我将如何实现这一目标？

`Position: fixed;`或者`absolute;`似乎不适用于页脚类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:56:24.147

这在示例中有效

```
.footer {
    background: #000;
    margin: 0;
    padding: 0;
    text-align: center;
    font-size: 11px;
    margin-top: 5px;
    color: #505050;
    position :fixed;
    bottom:0;
    left:0;
    right:0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T23:37:18.147

我必须将您`.content`的 div 包装在一个`container`div 中，并将您的 div`.navbar`和`.footer`div 都包装在一个`footercontainer`div 中。

**CSS**：

添加`position: relative;`到`.main`以及将页脚 CSS 更改为：

```
.footer {
    padding: 0;
    font-size: 11px;
    margin: 5px 0;
    text-align: center;
    color: #505050;
} 
```

最后为两个新的容器 div 添加 CSS：

```
#container {
    padding-bottom: 30px;  /* padding for the footer */
}

#footercontainer {
   position:absolute;
   bottom:0;
   width:100%;
   height:30px;   /* Height of the footer */
} 
```

[​在这里摆弄](http://jsfiddle.net/mccannf/8hgkN/2/)。

# knockout.js - KnockoutJs "with" 和自定义 bindingHandlers

> ID：13849525
> 
> 赞同：3
> 
> 时间：2012-12-12T22:08:15.380
> 
> 标签：knockout.js

我的模型看起来像这样

```
var model function(json) {
    var self = this;

    self.Editing = ko.observable();
    self.Edit = function(item) {
        item.beginEdit();
        self.Editing(item);
    }
    self.Save = function(item) {
       item().commit();
       self.Editing(null);
    }
    self.Cancel = function(item) {
       item().rollback();
       self.Editing(null);
    }

    ko.mapping.fromJS(json, {}, this);
} 
```

我也有一些 jquery-ui 的自定义绑定

```
ko.bindingHandlers.jqDialog = {
init: function (element, valueAccessor, allBindingsAccessor, viewModel) {
    var options = $.extend(
             {}, 
             allBindingsAccessor().dialogOptions, 
             { autoOpen: false, modal: true, width: 'auto' });

    ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
        $(element).dialog("destroy");
    });

    $(element)
        .dialog(options)
        .children('form:first')
        .ajaxForm({ configure ajax call });
},
update: function (element, valueAccessor, allBindingsAccessor, viewModel) {
    var value = ko.utils.unwrapObservable(valueAccessor());
    if (value === null) {
        $(element).dialog('close');
    }
    else {
        var title = $(element).data('title') + ' - ' + value.Title;
        $(element).dialog('option', 'title', title).dialog('open');
    }
}
}; 
```

最后是我的模板

```
...standard binding that works...
...foreach template binding that works...
<div data-bind="with: Editing, jqDialog: Editing" data-title="Edit">
  <form method="put" action="/api/Item" data-bind="submit: $parent.Save">
    <input type="hidden" name="Id" data-bind="value: Id" />
    <div>
      <label>Enter the Value</label>
      <input name="thevalue" data-bind="value: thevalue" />
    </div>
    <input type="submit" value="Save" data-bind="jqButton: {}" />
    <a href="#" data-bind="click: $parent.Cancel, jqButton: {}">Cancel</a>
  </form>
</div> 
```

**问题：**使用绑定`data-bind="with: Editing, jqDialog: Editing"`会出现对话框，但缺少输入和按钮。它基本上是一个带有正确标题的空对话框。

如果我更改对`data-bind="with: Editing"`数据的绑定是否正确绑定到标记，但我会松开对话框。我假设问题出在 的处理程序中`jqDialog`，但我不确定使这项工作缺少什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T02:14:36.450

我的猜测是这会起作用（请参阅我在评论中可能的解释）：

```
<!--ko with: Editing-->
  <div data-bind="jqDialog: $data" data-title="Edit">
    ...
  </div>
<!--/ko--> 
```

# ember.js - 未捕获的错误：在 rootState.loaded.updated.uncommitted 状态下尝试处理事件“loadedData”

> ID：13849526
> 
> 赞同：4
> 
> 时间：2012-12-12T22:08:17.893
> 
> 标签：ember.js, ember-data

我正在使用 ember-data 从 REST API 获取数据并创建了一个模型 App.Category。在“索引”状态下，我以这种方式获取数据：

```
App.Category.find({type: 1}); 
```

这很好用。但是，每当我转换到新状态并调用时：

```
App.Category.find({type: 2}); 
```

但是，我收到此错误：

```
Uncaught Error: Attempted to handle event `loadedData` on <App.Category:ember424:1> while in state rootState.loaded.updated.uncommitted. Called with {} 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T19:03:38.650

我最近遇到了这个问题，根本原因是我做了一些愚蠢的事情，比如没有渲染更新模型的 JSON 表示。

这是我在更新时从 rails 控制器渲染的示例：

`format.json { head status: :ok }`

这是我修复它的方法：

`format.json { render json: @thing, status: :ok }`

# c# - EF5 Codefirst 从 XML 文件播种

> ID：13849532
> 
> 赞同：0
> 
> 时间：2012-12-12T22:08:37.810
> 
> 标签：c#, xml, entity-framework, ef-code-first, connection-string

我目前正在使用 EF5 连接到 SQL Server 2012 Express，并且已经到了可以使用大量可重复种子数据进行测试的阶段。我已经有一个（自创，来自另一个项目）工具，只需稍作调整即可输出大量 XML 种子数据。

真正好的是，在我的 C# Seed 函数中，只需将连接字符串传递给我的 DbContext 类，以使其能够使用我用于模型的相同 POCO 类从 XML 文件中导入所有数据。然后我可以简单地将所有数据复制到我的标准 DbContext（无参数初始化，连接到 SQL Server）。

我可以处理复制数据并将其输出到 SQL Server，但是甚至可以指定一个连接字符串以这种方式从 XML 文件中导入种子数据吗？

# javascript - 动态 getter 和 setter - 一种可能性

> ID：13849533
> 
> 赞同：6
> 
> 时间：2012-12-12T22:08:42.517
> 
> 标签：javascript, metaprogramming, undefined, getter-setter

我正在尝试解决最近想到的一个问题。假设我们想要并且知道如何在 javascript 中使用动态 getter 和 setter，更像是 php (__get, __set) 中的那些。但是由于 javascript 没有包罗万象的属性，我们唯一能做的就是提供可能的键列表并迭代以仅在这些键上添加 getter 和 setter，并希望不会有其他键出现。

但问题远未解决。因此，我想到的下一个方法是对 and 使用讨厌的 hack `try`，`catch`因此任何时候在对象中未定义名称以将其`catch`用作吸气剂（至少）然后恢复代码，这很难而且可能毫无意义做。但是从这里出现了我的第二个问题，在这样的用途中：

```
console.log(g.someundefinedproperty); 
```

结果将是对`console.log`显示的调用`undefined`，没有任何异常被抛出。然后我想到了：如果我使用原始的`window.undefined`getter 和 setter 怎么办，毕竟每次我搞砸并拼错单词或其他东西时都必须调用它。

所以我尝试了

```
Object.defineProperty(window, 'undefined', {
    get : function ()
    {
         // functional code, including getting the caller and figuring out
         // where we are, and what we have to do... easy :D

         console.log('works');
    },
    set : function ()
    {
         // some couple more fine hacks here
         console.log('this too');
    }
}); 
```

但不幸的`undefined`是 window 的属性是`configurable : false`. 尝试的其他黑客攻击是克隆`window`对象，除了`undefined`和内部`window`属性。并在新对象上定义新的`undefined`（请注意讽刺）然后`window = mybetterwindow`;

由于这没有引起任何问题，我寄予厚望，但系统又一次让我失望`window`，因为设计无法覆盖。我猜测它有自己的吸气剂，它会根据原型中的原型重新实例化自己，`window.prototype`甚至更好`Window.prototype`（注意大写）。

作为我在这个实验中的最后一步，我重新定义`undefined`了这个原型命中运行。无济于事，没有任何改变......我尝试创建一个`new Window()`，但`Window`不是构造函数，失败！

由于我的想法已经用完了，我发现自己在这里写这篇请求帮助。如果您有任何想法如何解决动态 getter 和 setter 问题，（`the existencial problem of life, universe and everything else`），以一种不会以任何方式修改...我使用对象的方式（作为奖励，它不在中`need to break`）或语法，我恳求你说话或永远保持沉默:)。`hole``fabric of time and space`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T22:32:06.177

> 但不幸的是 window 的未定义属性是`configurable: false`

这仅在[EcmaScript 5.1](http://es5.github.com/#x15.1.1.3)之后才成立。以前，它是可覆盖的。

> 如果我使用原始的`window.undefined`getter 和 setter 会怎样，毕竟每次我搞砸并拼错单词或其他东西时都必须调用它。

不，那是行不通的。[*未定义*值](http://es5.github.com/#x8.1)和全局变量“未定义”之间存在差异。每次遇到*未定义*的值（例如 in `typeof (void 0)`）时，不会评估该变量，仅当您显式使用它时（例如 in `g.someprop === undefined`）。

> 任何想法如何解决动态 getter 和 setter 问题？

只有一个解决方案：[`Proxies`](http://wiki.ecmascript.org/doku.php?id=harmony:proxies). 不幸的是，它只是一个和谐草案，目前仅[在 Firefox 的 Javascript 1.8.5 中支持](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Proxy)。

另请参阅[是否有与 __noSuchMethod__ 特性等效的属性，或者在 JS 中实现它的方法？](https://stackoverflow.com/questions/2266789/is-there-an-equivalent-of-the-nosuchmethod-feature-for-properties-or-a-way/3757676#3757676),[检测何时将新属性添加到 Javascript 对象？](https://stackoverflow.com/q/2775384/1048572)或[如何检测何时将属性添加到 JavaScript 对象？](https://stackoverflow.com/q/12678517/1048572)它实现了一个轮询解决方案（通过检查更改`setInterval`）。

对于一个干净的解决方案，您当前必须使用一个显式的 getter 函数，该函数传递属性名称 ( `g.get("someundefinedproperty")`)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T22:33:04.947

您要完成的工作（任何未定义属性的全局 getter）超出了跨浏览器 JavaScript 的范围。

最接近的功能将用于`__defineGetter__`向所有对象添加特定属性：

```
var o = Object.prototype;
o.__defineGetter__("testo", function() { return "yo in testo"; });
alert({}.testo);
alert((new Date()).testo); 
```

[​http://jsfiddle.net/NLCvs/2/](http://jsfiddle.net/NLCvs/2/)

如果您可以提前预测可能未定义的属性的名称，这可能会很有用。即便如此，为所有对象添加一个*可能*未定义的属性的访问器也是一种非常笨拙和糟糕的形式。

更好的选择是在可能访问未定义的属性时重构代码：

```
function getter(o, n) {
 return typeof o[n] == 'undefined' ? 'some default value' : o[n];
}
var obj = { hello: 'world' };
alert(getter(obj, 'hello'));
alert(getter(obj, 'an_undefined_property')); 
```

一个更好的选择是使用 mixin 来设置您需要访问的任何默认属性，例如通过[`jQuery.extend`](http://api.jquery.com/jquery.extend/)

```
var defaults = {
 required: 'this property is required'
};
var my_object = {
 something_else: 'this is something else'
};
var o = jQuery.extend({}, defaults, my_object);

// o.required === 'this property is required'
// o.something_else === 'this is something else' 
```

# navigation - 如何在不导航 GWT MVP 的情况下更新 URL 中的状态

> ID：13849535
> 
> 赞同：0
> 
> 时间：2012-12-12T22:08:48.447
> 
> 标签：navigation, reload, page-refresh, gwt-mvp

我是 GWT 初学者。

我想为使用 MVP 开发的 GWT 应用程序添加书签。

我有一种状态，用户可以通过在页面上选择搜索条件来缩小搜索结果的范围。如果用户选择任何条件，搜索结果将通过 AJAX 获取并显示在页面上。

现在我想给它加书签。

这里的问题是 URL 不包含选择的搜索条件。

我想要在不刷新/重新加载页面的情况下更新 URL。

谁能帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:49:59.010

您可以使用活动和地点设计模式：

[https://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces](https://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces)

它允许使用该特定位置所需的任何参数为应用程序中的任何位置添加书签。例如，您的 URL 可能如下所示：

myApp.com/#SEARCH:user=123&key=xyz

您的搜索活动将读取此令牌并根据需要对其进行处理，而无需重新加载页面。您还可以在不重新加载页面的情况下“创建”这些 URL。

# unix - logrotate 是复制当前文件还是重命名当前文件

> ID：13849541
> 
> 赞同：1
> 
> 时间：2012-12-12T22:09:22.653
> 
> 标签：unix, operating-system, logrotate, log-rotation

我在网上阅读了几篇文章，但我仍然不明白 logrotate 是如何工作的。

我的配置文件如下：

```
/var/log/usage.log  {
  rotate 10
  daily
  size 1G

  missingok
  notifempty
  sharedscripts
  postrotate
    /usr/local/bin/cond_pkill.sh -s HUP /var/run/production.pid java
  endscript
} 
```

我注意到每当 logrotate 启动时，我的主要服务性能都会下降一点。我试图找出原因。

我现在能想到两件事。

一种是 logrotate 实际上复制文件而不是重命名它们。这是真的？我知道 logrotate config 有一个名为 copy 的选项。如果我不设置该选项，logrotate 是否仍会复制文件？我的文件很大，每个> 2G。

另一件事是 HUP 信号导致我的服务性能下降。我会跟进的。

谢谢，杰瑞

# c# - RavenDb 检查索引是否存在

> ID：13849542
> 
> 赞同：8
> 
> 时间：2012-12-12T22:09:23.273
> 
> 标签：c#, indexing, ravendb

如何检查索引是否存在？- 打电话之前：

```
IndexCreation.CreateIndexes(typeof(MyIndexClass).Assembly, documentStore); 
```

我见过的所有示例（包括示例项目中的示例）每次启动客户端时都会重新创建索引，这似乎不正确。

还有一般的策略是什么？似乎有正常的 CRUD 操作，然后有管理命令，例如上面的索引。人们是否只是创建一个控制台应用程序来执行管理员并与主应用程序分开部署/运行它？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-12T22:22:07.897

您不必检查是否存在。服务器将自动比较您发送的索引定义并检查它是否已经存在。如果存在具有相同名称和定义的一个，则将其单独放置。如果存在同名但定义已更改，则删除旧的并创建新的。

通常人们会在应用程序启动时在同一个应用程序中创建索引。对于可能在 global.asax 中的 Web 应用程序，以及对于控制台/桌面应用程序，它只是启动代码的第一部分。

但有时这是不可能的，例如，如果您有许多不同的数据库，就像多租户应用程序经常做的那样。在这些情况下，您将在创建每个租户数据库时创建索引，并且在推出版本升级时可能需要更新或创建更多索引。

另外，我应该提到您可以通过几种不同的方式创建索引。

```
// scans the assembly for all indexes and creates them
IndexCreation.CreateIndexes(assembly, documentStore);

// scans a MEF catalog for all indexes and creates them
IndexCreation.CreateIndexes(catalog, documentStore);

// puts a single index the HARD way
documentStore.DatabaseCommands.PutIndex(...);

// puts a single index the easy way
documentStore.ExecuteIndex(new YourIndexCreationTask()); 
```

还有一些其他的，但你明白了。

并且为了彻底，如果你真的想检查索引是否存在，你可以使用*：*

```
documentStore.DatabaseCommands.GetIndex("YourIndex") != null 
```

但这只会按名称检查，而不是按定义检查。而你不需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-05T06:14:32.417

对主要和隐含问题的当代答案（RavenDB v4.x）将是：

**如何检查索引是否存在？**

无法检查特定索引，但您可以获得所有索引的列表（参见[官方文档](https://ravendb.net/docs/article-page/latest/csharp/client-api/operations/maintenance/indexes/get-indexes)），如下所示

```
IndexDefinition[] indexes = store.Maintenance.Send(new GetIndexesOperation(0, 100)); 
```

**如何迁移数据库？**

是的，您可以在每次启动应用程序时运行索引创建。它适用于一个小型应用程序，如果不需要更改，它会很快（参见[官方文档](https://ravendb.net/docs/article-page/latest/csharp/indexes/creating-and-deploying#using-assembly-scanner)）：

```
IndexCreation.CreateIndexes(typeof(YourClass).Assembly, _store); 
```

However, for a bigger app I'd encourage to create a migration procedure (either a separate tool or just another endpoint in the app) where you handle:

*   Errors in indexes (e.g. see a [story of LINQ gotchas](https://alex-klaus.com/ravendb-pain-and-joy/)). Index errors may happen and some records can fall out of the query results if they fail to be indexed. Get notified on index errors ASAP. See "[How to Get Index Errors](https://ravendb.net/docs/article-page/latest/csharp/client-api/operations/maintenance/indexes/get-indexes)" in the docs.
*   Have migration procedure in place. Many DB modifications may require to execute a migration script, which subsequently requires DB versioning, ensuring you're running correct version, etc. Check out [RavenMigrations](https://github.com/migrating-ravens/RavenMigrations) NuGet package for that.

# c - 如何在c中动态分配结构数组？

> ID：13849544
> 
> 赞同：1
> 
> 时间：2012-12-12T22:09:24.610
> 
> 标签：c, file, memory-management, struct, linked-list

我想实现一个简单的单词计数程序，它将打开一个文本文件，该文件作为命令行参数提供，然后计算单词数、非字母单词数（例如：1998、2-3 等on) 该文本文件中的句子和段落。假设两个空格之间的字符数组算作一个单词，非字母单词由数字、连字符等组成。每个句子都以“.”结尾。（点）字符，而段落用换行符分隔。我将使用一个结构来保存每个段落的字数、非字母字数、句子数和起始行，如下所示：

```
 struct {
      int word;
      int sentence;
      int nonAlpha;
      int startingLine;
      struct Paragraph*next;       
    }Paragraph; 
```

我决定为此使用链表。那么我应该迭代并了解将使用多少段落并初始化链接列表，链接它们，或者如果从文件中读取新段落并且需要存储在结构中，则继续分配？

```
 Paragraph->next=(struct Paragraph*) calloc(1,sizeof(struct Paragraph)); 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:13:53.573

> 如何在不提供 SIZE 的情况下动态分配它？

你不能在不知道大小的情况下分配一个连续的数组。

我会给你几个选择：

1.  `malloc`使用并复制到大块中预分配。如果您在读取文件时用完大小，请`realloc`使用更大的块。

2.  先数文件的字数，`malloc`就这么多，然后再读文件。

3.  使用链表结构。`malloc`每个单词都有一个指向下一个单词的指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T22:10:54.310

```
struct Paragraph *dynamicParagraph = malloc(SIZE * sizeof(Paragraph)); 
```

而且由于在 C/C++ 中数组和指针基本上是一回事，所以您可以将其用作数组：

```
Paragraph specificParagraph = dynamicParagraph[index]; //Assuming index < SIZE and > 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T22:57:24.540

根据您的描述，您希望`struct`每段一个实例。因此，每次遇到换行符时，您都想开始一个新的段落计数。

首先动态分配初始数量的`Paragraph`对象（足以涵盖大多数情况），然后根据需要扩展该块：

```
#define INITIAL_SIZE ... // some initial value, say 5 or 10
...
size_t numParas = 0;     // keep track of the array size
size_t parasRead = 0;    // keep track of the paragraphs read
...
struct Paragraph *paras = malloc(sizeof *paras * INITIAL_SIZE);
if (paras)
{
  numParas = INITIAL_SIZE;
}
else
{
   perror("Could not allocate initial memory...exiting");
   exit(-1);
}

... // open the file and read input

while (more_data)
{
  int c = fgetc(input);

  // update the various fields of paras[parasRead]
  // based on the value of current_character

  if (c == '\n')
  {
    // ready to start a new paragraph.  If we've reached the end
    // of the paras array and don't have a new slot available,
    // extend the array by doubling its size
    if (parasRead + 1 == numParas)
    {
      struct Paragraph *tmp = realloc(paras, sizeof *paras * (numParas * 2));
      if (tmp)
      {
        paras = tmp;
        numParas *= 2;
      }
      else
      {
        perror("Could not extend the paras array...exiting");
        free(paras);
        exit(-1);
      }
    }
    parasRead++;
    moreData = (c != EOF);
  }
}

// display results
...
free(paras); 
```

这至少应该让你开始。`realloc`如果无法扩展缓冲区，您将不得不决定该怎么做。在上面的示例代码中，我将其视为致命错误并立即退出，但您可以尝试将缓冲区扩展较小的量（而不是加倍，将其增加 1.5 倍，如果失败则增加 1.25 倍，等等） . 您可以决定退出循环并展示您的结果。或者完全不同的东西。

可能还有更好的组织方式；最好将数组管理代码分离到一个单独的函数中。但这应该让您了解所需的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T13:32:38.190

使用链表代替数组。在这种情况下，您只需要在需要时分配新成员。

# javascript - 单击时使图像开始出现在画布上

> ID：13849547
> 
> 赞同：0
> 
> 时间：2012-12-12T22:09:36.623
> 
> 标签：javascript, image, canvas, onclick

基本上我已经让我的代码工作了，当页面加载时，图像开始在画布上一个接一个地显示，但是我希望图像在鼠标单击时开始显示，你能告诉我怎么做这个？

```
<script>

window.onload = function() {

var canvas=document.getElementById("myCanvas").addEventListener("mousedown",    function() // Selects the canvas element
var context=canvas.getContext("2d"); 

var img1 =new Image() //creates a variable for a new image
var img2 =new Image() //creates a variable for a new image
var img3 =new Image() //creates a variable for a new image
var img4 =new Image() //creates a variable for a new image

img1.src = "canvasimg1.png" // Gets image
img2.src = "canvasimg2.png" // Gets image
img3.src = "canvasimg3.png" // Gets image
img4.src = "canvasimg4.png" // Gets image

setTimeout(                                             // Settimeout - execute the passed function after the amount of milliseconds
    function() { context.drawImage(img1,23,20); }       // Function to be executed
, 1000);                                                // Amount of milliseconds to delay for

setTimeout(                                             // Settimeout - execute the passed function after the amount of milliseconds
    function() { context.drawImage(img2, 23, 60); }     // Function to be executed
, 6000);                                                // Amount of milliseconds to delay for

setTimeout(                                             // Settimeout - execute the passed function after the amount of milliseconds
    function() { context.drawImage(img3, 25, 120); }    // Function to be executed
, 11000);                                               // Amount of milliseconds to delay for

setTimeout(                                             // Settimeout - execute the passed function after the amount of milliseconds
    function() { context.drawImage(img4, 150, 180); }   // Function to be executed
, 16000);                                               // Amount of milliseconds to delay for
}

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:36:37.527

如果您需要在单击画布时开始显示图像，则将四个 setTimeout 函数放在另一个函数中，并且仅在单击画布时才调用此函数！

```
 <canvas id="exemple" width="200" height="200" onclick="showImage()">

function showImage(){
    setTimout.....
     ....
   } 
```

# html - tr 的 CSS 与 jsfiddle 一起使用，在 html 文件中不起作用，td 和 table 起作用

> ID：13849549
> 
> 赞同：0
> 
> 时间：2012-12-12T22:09:42.160
> 
> 标签：html, css

我正在尝试格式化表格。在 Chrome 和 Firefox 中，当我将文件加载到浏览器中时，TR 的样式似乎被忽略了。我只是想为该行添加一个边框。使用表格和 TD 的样式。

如果我在小提琴中使用源代码，它就可以工作。

对于将样式提取到单独的 css 文件的价值没有帮助。

这是小提琴的链接。[http://jsfiddle.net/kdubs/6Ppf4/](http://jsfiddle.net/kdubs/6Ppf4/)

```
<!DOCTYPE html>
<html>

<style type="text/css">

table
{
border: 5px solid red;
}

tr
{
border: 3px solid green;
}

td
{
border: 1px solid blue;
}

</style>

<body>

<div>
<table>
<tbody>

<tr>
<td>
one
</td>
<td>
two
</td>
</tr>

<tr>
<td>
three
</td>
<td>
four
</td>
</tr>

<tr>
<td>
five
</td>
<td>
six
</td>
</tr>

</tbody>
</table>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:15:37.603

如果您在没有规范化的情况下在 JSFiddle 中运行它，它也不起作用 -[不起作用](http://jsfiddle.net/6Ppf4/1/)

要修复它添加`border-collapse: collapse;`到您的表 -[**演示**](http://jsfiddle.net/6Ppf4/2/)

# php - 查询以获取帖子以及用户是否为帖子投票

> ID：13849550
> 
> 赞同：0
> 
> 时间：2012-12-12T22:09:41.540
> 
> 标签：php, mysql, sql

我很难描述这一点，而且很可能我让这变得比应该的更困难......

基本上，我有一个充满图钉/帖子的页面，用户可以对它们投赞成票或反对票。在一个查询中，我想获得一个 pin 列表，但还要加入两个表以查看用户是否对它们投了赞成票或反对票。

表结构：

```
pins table

|  id  |       title       |
+------+-------------------+
    1         Post 1
    2         Post 2
    3         Post 3
    4         Post 4

user_upvotes table

|  id  |  user_id  |  pin_id  |
+------+-----------+----------+
   1         1           2
   2         2           1
   3         2           3
   4         2           1

user_downvotes table

|  id  |  user_id  |  pin_id  |
+------+-----------+----------+
   1         2           2
   2         1           1
   3         1           3
   4         1           1 
```

这是我尝试过的查询，但最终复制了页面上的图钉。

```
SELECT pins.id AS pin_id, title, user_upvotes.id AS upvote, user_downvotes.id AS downvote
FROM pins
LEFT JOIN user_upvotes ON user_upvotes.pin_id = pins.id AND user_upvotes.user_id = 2
LEFT JOIN user_downvotes ON user_downvotes.pin_id = pins.id AND user_downvotes.user_id = 2 
```

这导致（注意 pin_id 1 重复两次）：

```
| pin_id |       title       |  upvote  |  downvote  |
|   1    |       Post 1      |  (NULL)  |      2     |
|   1    |       Post 1      |  (NULL)  |      4     |
|   2    |       Post 2      |     1    |    (NULL)  |
|   3    |       Post 3      |  (NULL)  |      3     |
|   4    |       Post 4      |  (NULL)  |    (NULL)  | 
```

从这一点开始，我只检查该值是否为 NULL，如果不是，我附加一个 css 类以指示它已被赞成或反对。

本质上，我想要上面的结果，只是没有复制引脚。如果您有更好的方法，请随时告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:13:27.297

添加分组依据

```
SELECT pins.id AS pin_id, title, user_upvotes.id AS upvote, user_downvotes.id AS downvote
FROM pins
LEFT JOIN user_upvotes ON user_upvotes.pin_id = pins.id AND user_upvotes.user_id = 2
LEFT JOIN user_downvotes ON user_downvotes.pin_id = pins.id AND user_downvotes.user_id = 2
GROUP BY pin_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T22:20:58.363

这可能意味着用户对同一个 pin 投了两次赞成票或反对票。由于您在结果中包含投票的 ID，因此您将不同的投票作为单独的记录获得。

我认为您要么想要计数，要么根本想要防止双重投票。计数如下：

```
SELECT 
  pins.id AS pin_id, 
  title, 
  COUNT(user_upvotes.id) AS upvotes, 
  COUNT(user_downvotes.id) AS downvotes
FROM pins
LEFT JOIN user_upvotes ON user_upvotes.pin_id = pins.id AND user_upvotes.user_id = 2
LEFT JOIN user_downvotes ON user_downvotes.pin_id = pins.id AND user_downvotes.user_id = 2
GROUP BY 
  pins.id 
```

现在您可以显示计数，或者仅将其显示为是或否，具体取决于它是否 > 0。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-12T22:14:22.337

这不会有帮助吗？

```
 SELECT pins.id AS pin_id, title, user_upvotes.id AS upvote, user_downvotes.id AS downvote
 FROM pins
 LEFT JOIN user_upvotes ON user_upvotes.pin_id = pins.id AND user_upvotes.user_id = 2
 LEFT JOIN user_downvotes ON user_downvotes.pin_id = pins.id AND user_downvotes.user_id = 2
 **GROUP BY pins.id** 
```

# javascript - JavaScript 动画在客户端的 IE 9 上冻结，但不是我的。为什么？

> ID：13849556
> 
> 赞同：5
> 
> 时间：2012-12-12T22:10:09.340
> 
> 标签：javascript, internet-explorer, internet-explorer-9

我刚刚为客户编写了一张全 HTML/CSS/JS 的圣诞贺卡。我已经在所有主要浏览器（Safari、Chrome、Firefox、IE9/10）下的多个站点上对其进行了测试。

在客户端机器上，在他办公室的所有机器上，在 IE9（版本 9.0.8112，与我的相同）下，动画中断，整个事情都冻结了。在我测试过动画的所有机器上，一切都完美无缺。

在所有其他浏览器下，在我的电台和他的电台上，一切都可以完美运行。

我无法重现他在机器上的体验，这让我很难调试。此外，他的机器大多是高端站，并且都在运行最新的更新。我唯一能看到他的机器和我的机器不同的是他都是“PC”，我通过 iMac 和 MacBook Pro 上的 BootCamp 运行 Windows 7。

由于我无法重现该问题，因此我不知道从哪里开始寻找。我们在他的机器上看到的是完全冻结的屏幕。所有动画都停止了，在冻结发生后我们不能点击任何东西。冻结总是同时发生。在设定的时刻会发生“故障”（显示一系列快速变化的图像），并且屏幕在第一个之后完全冻结。

这是卡片的链接：http: [//grouperegiscote.com/noel-2012/](http://grouperegiscote.com/noel-2012/)

我可以从哪里开始寻找任何想法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T21:16:58.527

嗯.. 根据[http://caniuse.com/#feat=css-animation](http://caniuse.com/#feat=css-animation) IE9 不支持动画。也许你有支持 IE10 的 IE9（打开）？

# asp.net-mvc - mscorlib.dll 中发生的“System.InvalidCastException”类型的第一次机会异常对象无法从 DBNull 转换为其他类型

> ID：13849557
> 
> 赞同：2
> 
> 时间：2012-12-12T22:10:20.450
> 
> 标签：asp.net-mvc, jqgrid, dbnull

大家好，我正在使用存储过程从 sql server 读取数据，当数据库中有空数据时，一切看起来都是异常的，我无法将 DBNull 转换为其他类型。我正在使用 .net MVC3 以下是我的代码：

```
public static List<XYZFactorsModel> SelectGridItems(string sidx, string sord, int page, int rows, String rid, String process, String detail_table, String jobGroup, String date)

    {

       const string spName = "dbo.p___GetXYZMonitorJobDetails";
        List<XYZFactorsModel> XYZFactorDetailGridCollection;

        string connectionString = ConfigurationManager.ConnectionStrings["AdvItemsContext"].ConnectionString;
        if (string.IsNullOrEmpty(connectionString))
            return null;
        using (SqlConnection sqlConnection = new SqlConnection(connectionString))
        {
            SqlCommand sqlCommand = new SqlCommand(spName, sqlConnection);
            sqlCommand.CommandType = CommandType.StoredProcedure;
            //sqlCommand.Parameters.Add("@jobDate", SqlDbType.VarChar);
            sqlCommand.Parameters.Add("@jobGroup", SqlDbType.VarChar);
            sqlCommand.Parameters.Add("@jobName", SqlDbType.VarChar);
            sqlCommand.Parameters.Add("@detailTable", SqlDbType.VarChar);
            sqlCommand.Parameters.Add("@filterBatchControl", SqlDbType.VarChar);
            sqlCommand.Parameters.Add("@filterDate", SqlDbType.VarChar);
            sqlCommand.Parameters.Add("@filterTime", SqlDbType.VarChar);

            //sqlCommand.Parameters["@jobDate"].Value = date2;
            sqlCommand.Parameters["@jobGroup"].Value = jobGroup;
            sqlCommand.Parameters["@jobName"].Value = process;
            sqlCommand.Parameters["@detailTable"].Value = detail_table;
            sqlCommand.Parameters["@filterBatchControl"].Value = rid;
            sqlCommand.Parameters["@filterDate"].Value = date;
            sqlCommand.Parameters["@filterTime"].Value =date;

            sqlConnection.Open();
            XYZFactorDetailGridCollection = FillGridEntity(sqlCommand);
        }
        return XYZFactorDetailGridCollection;
    }

    private static List<XYZFactorsModel> FillGridEntity(SqlCommand sqlCommand)
    {
        List<MBSFactorsModel> thegrid = new List<MBSFactorsModel>();
        using (SqlDataReader sqlDataReader = sqlCommand.ExecuteReader())
        {
            while (sqlDataReader.Read())
            {
               try
                {

                    //if(sqlDataReader["last_factor"] != System.DBNull.Value)
                   //{
                   //    
                   //    thegrid.Add(new XYZFactorsModel
                   //    {
                   //        last_factor = Convert.ToDateTime(sqlDataReader["last_factor"])
                   //    });
                   //}
                   //else
                   //{
                   //    System.Diagnostics.Debug.WriteLine("null value was found in last factor field");
                  // }

                    thegrid.Add(new XYZFactorsModel
                    {
                        abc = sqlDataReader["abc"].ToString(),
                        abc2 = sqlDataReader["abc2"].ToString(),
                        abc3 = sqlDataReader["abc3"].ToString(),
                        abc4 = sqlDataReader["abc4"].ToString(),
                        abc5 = Convert.ToDecimal(sqlDataReader["abc5"]),
                 last_factor = Convert.ToDateTime(sqlDataReader["last_factor"]),

                    });

                }
                catch (Exception ex)
                {

                    System.Diagnostics.Debug.WriteLine(ex.Message);
                }

            }
        }
        return thegrid;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:54:42.707

刚刚将所有数据类型转换为字符串，现在它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T22:12:11.610

在分配给不可为空的类型之前，您需要检查 SqlDataReader.IsDBNull。如果返回*true*，您需要决定如何初始化不可为空的变量。毕竟，像*int*和*decimal*这样的东西不能分配给它们一个*空值。*

> 获取一个值，该值指示列是否包含不存在或缺失的值。

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.isdbnull.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.isdbnull.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T22:12:34.217

您没有显示变量的声明，但我怀疑问题出在将数据拉出`sqlDataReader`实例的行中：

```
last_factor = Convert.ToDateTime(sqlDataReader["last_factor"]) 
```

如果`last_factor`声明为`DateTime last_factor;`，并且该列为空，则`Convert`调用将失败。[`IsDbNull`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.isdbnull%28v=vs.100%29.aspx)在进行此转换之前，您需要检查是否为真。

如果空值合适，我建议在此处使用可空类型：

```
DateTime? last_factor = sqlDataReader.IsDbNull(columnNumber) ? (DateTime?)null : sqlDataReader.GetDateTime(columnNumber); 
```

# javascript - 三个选择框交互产生一个结果 - HTML、JavaScript 或 jQuery

> ID：13849558
> 
> 赞同：0
> 
> 时间：2012-12-12T22:10:27.300
> 
> 标签：javascript, jquery, selection

我有三个选择框：

```
<select id="one">
    <option value="default">Select Product</option>
    <option value="value-a1">string1</option>
    <option value="value-a2">string2</option>
    <option value="value-a3">string3</option>
</select>

<select id="two">
    <option value="default">Select Version</option>
    <option value="value-b4">string4</option>
    <option value="value-b5">string5</option>
    <option value="value-b6">string6</option>
</select>

<select id="three">
    <option value="default">Select Architecture</option>
    <option value="value-c6">string7</option>
    <option value="value-c7">string8</option>
    <option value="value-c8">string9</option>
</select> 
```

根据用户为这三个框选择的内容，我想下载这样的文件，例如：

`mysite.com/download/value-a1_value-b2_value-c3`

基本上，该文件是一个安装程序，可以是特定产品、特定版本和体系结构（以 EXE 为例；也有 DMG 和 ZIP）：

`mysite.com/download/product-a_version-b_arch-64.exe`

我知道我的方法可能不是最好的，所以我愿意接受建议，但如果我能让这种方法发挥作用，那就太好了。

对于 JavaScript，我在想这样的事情：

```
function download_file(version_id, os_id, arch_id) {

    if (product_id == 'default' && version_id == 'default' && 
        arch_id == 'default') {
        return;
    }

    else if (product_id != 'default') {
        window.location = 'mysite.com/download/Install_' +
            product_id + '_' + version_id + '_' + arch_id + '.exe';
    }
} 
```

我想我的主要问题是如何选择在三个选择框中选择的选择值。我试图将三个选择框的结果粘合在一起，并从中确定一条路径。

**笔记**

实际上，我的选择框比我实际写的要多，但原理是一样的。使用下面的答案，我能够使文件正确。感谢所有的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:17:25.260

给你的`<select>`盒子上课：

```
<select id="one" class="installer-option">
    ... 
```

现在，您可以使用`map()`将选定的选项提取到数组中：

```
var options = $('.select').map(function() { return $(this).val(); }); 
```

您可以使用以下方法测试是否选择了任何默认选项`inArray`：

```
if ($.inArray('default', options) != -1) {
    // There's a default option
} 
```

从那里，您可以`join`将字符串一起放入您的最终 URL：

```
var file = options.join('_') + '.exe'; 
```

**演示：http: [//jsfiddle.net/A2q47/3/](http://jsfiddle.net/A2q47/3/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T22:17:40.767

[你可以使用 jQuery 的.map()](http://api.jquery.com/jQuery.map/)函数来做这样的事情

```
// check if all three select has a value selected besides default - return false if any are default
if ($('select').filter(function() {
    return this.value == 'default';
}).length > 0) {
   return false;
}

// using jQuery's map function - get the values - turn into array - join with '_'
var newString = $('select').map(function(i, v) {
    return v.value;
}).get().join('_');
console.log(newString); 
```

[http://jsfiddle.net/4PCfE/](http://jsfiddle.net/4PCfE/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T22:25:52.670

[***jsFiddle 演示***](http://jsfiddle.net/y2NXd/)

```
​$(function() {
    var downloadButton = $( selector-for-your-button );

    $(downloadButton).click(function() {

        download_file( $('#one').val(), $('#two').val(),
                      $('#three').val());

    });
});

function download_file(product_id, version_id, arch_id) {

    // if any of them is default, cancel (use or ||)
    if (product_id == 'default' || version_id == 'default' || 
        arch_id == 'default') {
            alert("choose stuff!");
        return;
    }

    else if (product_id != 'default') {
        //window.location = 'mysite.com/download/Install_' +
        //    product_id + '_' + version_id + '_' + arch_id + '.exe';
        console.log(product_id + '_' + version_id + '_' + arch_id + '.exe');
    }
}
​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T22:35:59.763

```
var product_id=document.getElementById("one").value;
var version_id=document.getElementById("two").value;
var arch_id=document.getElementById("three").value; 
```

像这样的东西应该可以工作[http://jsfiddle.net/9a8YH/4/](http://jsfiddle.net/9a8YH/4/)

# asp.net - KnockoutJs - 从 ViewModel 的视图中获取更新的值

> ID：13849562
> 
> 赞同：0
> 
> 时间：2012-12-12T22:10:42.657
> 
> 标签：asp.net, knockout.js

我是 KnockoutJs 的新手，我正在尝试将它与 .ascx 中的 ASP.net 网络表单一起使用。

[提琴手](http://jsfiddle.net/s7wJ9/)

风景

```
<table border="1" cellpadding="0" cellspacing="0">
<tr>
    <td>
        <input type="button" data-bind="click: addNewRow" style="-moz-border-bottom-colors: blue" value="Add More Lines" />
        <input type="button" data-bind="click: addToCart" style="-moz-border-bottom-colors: blue" value="Add Items to Cart" />
    </td>
</tr>
<tr>
    <th>Product Number</th>
    <th>Description</th>
    <th>Quantity</th>
</tr>
<tbody data-bind="foreach: quickEntries">
    <tr>
        <td>
            <input data-bind="text: $data.ItemPartNumb(), onkeyup: showValue" class="ItemPartNum" height="100" width="500" /> 
        </td>
        <td>
            <input data-bind="text: $data.ItemDescription()" class="ItemDescr" height="100" width="500" />
        </td>
        <td>
            <input data-bind="text: $data.ItemQuanties()" class="ItemQuan" height="100" width="500" />
        </td>
    </tr>
</tbody> 
```

视图模型

```
<script type="text/javascript">

var QuickEntry = function (_itemPartNumb, _itemDescription, _itemQuanities) {
    this.ItemPartNumb = ko.observable(_itemPartNumb);
    this.ItemDescription = ko.observable(_itemDescription);
    this.ItemQuanties = ko.observable(_itemQuanities);
};

function QuickEntriesViewModel() {

    var self = this;
    self.quickEntries = ko.observableArray([]);

    for (var i = 0; i < 10; i++) {
        self.quickEntries.push(new QuickEntry('Bob','Jack','Steve'));            
    }

    self.addNewRow = function() {
        self.quickEntries.push(new QuickEntry());
    };

    self.showValue = function(quickEntry) {
        alert(quickEntry.ItemPartNumb); //Nothing show
    };

    self.addToCart = function () {
        //Error here. How do i access the obserablearray?
        alert(self.quickEntries.length);
    };

};

//This is where you bind the ViewModel
ko.applyBindings(new QuickEntriesViewModel()); 
```

网页将以 10 个空 QuickEntry 开始，用户可以添加更多行。它为我创建了一个有 10 个空行的表。用户在表格中输入一些信息后，例如项目部件号、描述...等。我将获取这些信息并调用 web api POST 方法。当我尝试访问 quickEntries observablesarray 时。我什么都没有/未定义，当我尝试 onkeyup 时。没有弹出窗口向我显示新值。

绑定到可观察对象的元素不是会自动更新其值吗？更改值后，如何在 ViewModel 中获取可观察的数组值？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T06:44:41.837

```
self.quickEntries() 
```

将返回底层数组及其所有光荣数据

# ravendb - 为什么要在 raven db 中创建自定义索引？

> ID：13849565
> 
> 赞同：3
> 
> 时间：2012-12-12T22:11:06.937
> 
> 标签：ravendb

我已经开始使用 RavenDb，我注意到 RavenDb 服务器会根据我的查询创建自定义索引。如果我多次使用相同的索引（执行相同的查询），那么该索引将被永久创建。

我的问题是，如果 Raven 足够聪明地为我创建这些索引，我为什么要从 ny 代码创建自定义索引？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T22:38:10.453

Raven 可以做的很多事情不能用简单的 linq 查询来表达。例如，Map/Reduce、Multimap、Transformation、自定义分析等等。

此外，Joachim 的观点是正确的——第一个表达需要新动态索引的查询的用户将受到打击。要么他们不会取回合理数量的数据，要么如果您明确地等待非陈旧的结果，他们可能会等待很长时间。

动态查询非常适合快速原型制作，但在某些时候，您应该回顾实际构建的内容并考虑为这些操作创建静态索引。

# ios4 - 找不到 CLLocationManager startUpdatingLocation

> ID：13849566
> 
> 赞同：2
> 
> 时间：2012-12-12T22:11:15.720
> 
> 标签：ios4, core-location, cllocationmanager

我一直在尝试向我的应用程序添加一个功能来获取位置并将变量放入 mysql 数据库中。我添加了 CoreLocation.framework 并`<CoreLocation/CoreLocation.h>`在标题中导入。我尝试了不同的代码，但我总是会遇到类似的错误，例如下面评论的错误。框架是否可能没有正确链接？

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:   (NSDictionary *)launchOptions                              
{ 
 CLLocationManager = self; // Expected identifier or '('
 [self startUpdatingLocation:nil]; // instance method '-startUpdatingLocation' not found
}

-(void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation{
 CLLocationManager *locationManager = [[CLLocationManager alloc] release];
//initializing 'CLLocationManager *' with an expression of incompatible type 'void'
[locationManager startUpdatingLocation:nil];
//do stuff with the coordinates
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T07:10:23.467

请找到您的代码的更正。它应该工作。之后，您的代码应该实现 CLLocationManagerDelegate 方法来获取位置信息。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:   (NSDictionary *)launchOptions                              
{ 
CLLocationManager *locationManager = [[CLLocationManager alloc] init];
 locationManager.delegate = self;
[locationManager startUpdatingLocation:nil];}

-(void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation{

 CLLocationManager *locationManager = [[CLLocationManager alloc] init];
 locationManager.delegate = self;
[locationManager startUpdatingLocation:nil];

//do stuff with the coordinates
} 
```

# javascript - IE10 在动态 Glimpse 脚本中引发 JSON 语法错误

> ID：13849569
> 
> 赞同：0
> 
> 时间：2012-12-12T22:11:27.463
> 
> 标签：javascript, asp.net-mvc, json, internet-explorer, glimpse

瞥见真棒。这对我的 MVC 工作有很大帮助。

我[为 Windows 7 Release Preview 安装了 IE10](http://windows.microsoft.com/en-US/internet-explorer/ie-10-release-preview)并立即被激怒，忘记了微软肯定会强制升级而不是并行安装。

现在我在动态生成的 Glimpse 脚本中遇到语法错误...*但仅在 IE10 中且仅在特定视图*中。

**这是来自HTTP 请求**的片段：

```
GET http://localhost:8200/Glimpse.axd?v=0.87&r=data.js&id=6573e2d4-c1c6-4591-ae89-db544b76bbc4 HTTP/1.1
Accept: application/javascript, */*;q=0.8
Referer: http://localhost:8200/employee 
```

**罪魁祸首是以下JSON 对象**中的单个字符位置：

```
[2,"Index","","False","RazorViewEngine","False","True",{"ViewData":{"CurrentEmployee":"System.Data.Entity.DynamicProxies.Employee_2BC4A98778F94213FB61E04B65C365B27A9391A342794A2ED101A9B4EB30B553"},"Model":{"ModelType":"System.Data.Entity.Infrastructure.DbQuery<Wims.Web.Models.Employee>","Value":},"TempData":null},"selected"] 
```

**注意**：“CurrentEmployee”是`(Employee)ViewBag.CurrentEmployee`我从负责身份验证/授权的基本控制器管道传输的动态。

报告的**语法错误**是 JSON 配对冒号与其在模型的“值”属性上的右花括号之间的字符索引：

```
"Value":}, 
```

如果我理解 JSON 是正确的，这实际上是一个语法错误，即使这个动态对象为空，JSON 也应该这样形成：`{"Value":""}`

* * *

## 问题：

`CurrentEmployee`不为空，并且页面继续呈现 - 那么交易是什么？为什么 IE10 是唯一可以加入的浏览器？是否导致脚本错误？它是唯一注意到的吗？Glimpse 不处理 IE10 吗？

有人有答案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T23:48:54.383

目前在 NuGet 上作为预发布包提供的 Glimpse 1.0 候选版本应该可以解决这个问题。

我建议升级，如果您仍然遇到此问题，请[在 GitHub 上的 Glimpse 问题跟踪器](https://github.com/glimpse/glimpse/issues?direction=desc&sort=created&state=open)中提交错误。

# c++ - 红黑树 - 旋转方法实现 - C++

> ID：13849570
> 
> 赞同：0
> 
> 时间：2012-12-12T22:11:30.240
> 
> 标签：c++, data-structures, red-black-tree, tree-balancing

我在 C++ 中实现了一个红黑树，但是我的旋转方法有问题。插入方法工作得很好，没有任何平衡，但是一旦我尝试旋转，我的树就会丢失信息。我的猜测是我没有以正确的方式设置指向节点的指针，但我不太明白这里到底出了什么问题。

这是我的向右旋转方法：

```
void RedBlackTree::rotateRight(RedBlackNode *localRoot) {
cout << "rotateRight - local root " << localRoot->data << endl;
RedBlackNode *temp = localRoot->left;
localRoot->left = temp->right;
temp->right = localRoot;
localRoot = temp;
} 
```

正在发生的事情的一个例子是我插入 c、b 和 a。树最初看起来像这样：

```
 c
   /
  b
 /
a 
```

旋转后，树只会打印出根节点，c。

关于可能发生的事情的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T22:16:28.377

根据代码段很难判断，但`localRoot`它是一个本地指针，它的更改在您离开函数的那一刻就被遗忘了。如果你想在调用函数的上下文中改变它，你要么想要传递它，`RedBlackNode*&`要么应该返回值作为结果。

# vba - 从 msgbox 到报告的 VBA 变量

> ID：13849574
> 
> 赞同：0
> 
> 时间：2012-12-12T22:11:48.527
> 
> 标签：vba, variables, report, msgbox

我有一个运行多个 Sql 查询的宏。这些查询之一是根据在宏内的 msgbox 中输入的日期运行的（仅生成输入日期之后的公司）。

宏在表中运行时是否可以将输入的值放入 msgbox 中？（我的最终目标是将值放在报告上，以表明显示的值在以下日期之后：变量）

下面是我的代码：

```
Sub insertmsgboxvar()
Dim msgboxdate As Date
msgboxdate = InputBox("Enter a date. Accounts created AFTER the date will be returned.")
DoCmd.RunSQL "SELECT " & msgboxdate & " Into tblreqaccts ;"
End Sub 
```

出于某种原因，当我运行它时，它会创建表（以前不存在）创建一个名为 Expr1000 的列，并输入一个数值 5.96421471172962E-03。我已经尝试将其更改为日期格式，并且我得到了 1899 年的日期。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T23:00:31.290

你当然可以。下面接受一个输入框并将其分配给一个变量。然后将其保存在 Sheet1 的 Range("A1") 中：

```
Dim formDate As Date

formDate = Application.InputBox("Input Date", "Date")

Sheet1.Range("A1").Value = formDate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T00:05:27.627

这是您可能从 VBA 运行的基本 SQL 查询：

```
SELECT C1,C2,C3 
FROM YourTable 
WHERE DateField > yourmsgboxvalue 
```

你也可以这样做：

```
SELECT yourmsgboxvalue as C23, C1,C2,C3 
FROM YourTable 
WHERE DateField > yourmsgboxvalue 
```

因此，现在您在实际结果集中的消息框中输入了值。然后你只需要弄清楚如何在你的标题中显示一次。这对于所有开箱即用的报告工具来说都是微不足道的，如果您有定制开发的报告工具应该很容易。

我们需要对您的代码进行更多解释以提供帮助。

# ruby-on-rails - Rails redirect_to 在其他文件夹中

> ID：13849581
> 
> 赞同：0
> 
> 时间：2012-12-12T22:12:13.220
> 
> 标签：ruby-on-rails, ruby, routing

我在其他目录（admin/）中有一些操作，但我如何重定向到 vin_questions 路径，它位于管理控制器中？现在它给了我错误

```
Template is missing 
```

我的代码

```
def create
    @va = VinAnswer.new(params[:vin_answer])
    @va.vin_question_id  = params[:vin_question_id]
    @va.save
    render :layout => 'admin'
    redirect_to  admin_vin_questions_path
  end 
```

和部分路线（耙路线）

```
 admin_vin_questions GET    /admin/vin_questions(.:format)                                            admin/vin_questions#index
                                POST   /admin/vin_questions(.:format)                                            admin/vin_questions#create
         new_admin_vin_question GET    /admin/vin_questions/new(.:format)                                        admin/vin_questions#new
        edit_admin_vin_question GET    /admin/vin_questions/:id/edit(.:format)                                   admin/vin_questions#edit
             admin_vin_question GET    /admin/vin_questions/:id(.:format)                                        admin/vin_questions#show
                                PUT    /admin/vin_questions/:id(.:format)                                        admin/vin_questions#update
                                DELETE /admin/vin_questions/:id(.:format)                                        admin/vin_questions#destroy 
```

但怎么了？如何重定向到/admin/vin_questions？

> **更新**

```
Template is missing

Missing template admin/vin_answers/create, application/create with {:locale=>[:ru], :formats=>[:html], :handlers=>[:erb, :builder, :coffee, :haml]}. Searched in: * "/media/_Projects/Oleg/app/views" * "/home/pavel/.rvm/gems/ruby-1.9.3-p194/gems/kaminari-0.14.1/app/views" * "/home/pavel/.rvm/gems/ruby-1.9.3-p194/gems/devise-2.1.2/app/views" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:22:38.837

我会在控制器中做这样的事情

```
class YourController < ApplicationController

layout :resolve_layout

your actions

private

def resolve_layout
  case action_name
  when "index"
    "layoutxxx"
  when "show"
    "layoutzzz"
  when "create"
       "admin"
  else
    "application"
  end
end 
```

并从您的创建控制器中删除此行

```
render :layout => 'admin' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T22:25:37.213

尝试：

```
def create
  @va = VinAnswer.new(params[:vin_answer])
  @va.vin_question_id  = params[:vin_question_id]
  if @va.save
    redirect_to  admin_vin_questions_path # redirect if saved.
  else
    render :layout => 'admin'  # stay here.
  end
end 
```

如果没有，则在 vin_questions 控制器中设置布局。

# c - 向调用 exec() 的分叉进程发送信号

> ID：13849582
> 
> 赞同：1
> 
> 时间：2012-12-12T22:12:14.460
> 
> 标签：c, shell, unix, signals, exec

我有一个简单的 C 程序，它分叉一个进程并调用 exec 来运行如下命令：

```
#include<stdio.h>
#include<signal.h>
#include<unistd.h>
#include<sys/types.h>

int fork_process(int sleep_interval) {
   char cmd[30];

   pid_t pid = fork();       
   if (pid > 0) {
       return pid;
   }
   else if (pid < 0) {
        printf("At parent. Couldn't create a child process!\n");
        return pid;
   }
   else { 
        sprintf(cmd, "sleep %d; %s", sleep_interval, "gzip a > a.gz");
        execlp("sh", "sh", "-c", cmd, (char *) 0);
   }
}

int main () {
   pid_t pid = fork_process(400);

   sleep (10);
   kill(pid, SIGTERM);

   return 1;
} 
```

当我运行这个程序时，我注意到`sh`内部派生了一个进程来运行`sleep 400`：

```
$ps x
  1428 pts/80   S+     0:00 ./kill_prog
  1429 pts/80   S+      0:00 sh -c sleep 400; gzip a > a.gz
  1430 pts/80   S+      0:00 sleep 400 
```

现在，当`SIGTERM`信号在程序中通过其 pid（`1429`此处）发送到子进程时，我注意到子进程终止但不是正在执行的进程`sleep 400`（pid `1430`）。换句话说，执行的进程`sleep 400`在完成之前会变成僵尸。

如何发送终止信号，以便将信号传播到子进程中派生的进程？我尝试在`kill`as中使用进程组 ID，`kill(-1*pid, SIGTERM)`但无济于事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T16:24:01.953

我终于想出了解决上述问题的方法。这是两个小的变化。

在分叉一个孩子后，我在父母中添加这样做：

```
pid_t pid = fork();   
if (pid > 0) {
   // Make child process the leader of its own process group. This allows
   // signals to also be delivered to processes forked by the child process.
   setpgid(childpid, 0); 
   return pid;
} 
```

最后，将信号发送到整个进程组：

```
// Send signal to process group of child which is denoted by -ve value of child pid.
// This is done to ensure delivery of signal to processes forked within the child. 
kill((-1*pid), SIGTERM); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T22:20:35.863

真的很简单：只需在进程中添加一个 SIGTERM 信号处理程序：

*   [http://rackerhacker.com/2010/03/18/sigterm-vs-sigkill/](http://rackerhacker.com/2010/03/18/sigterm-vs-sigkill/)

# ios - 问题理解链接器错误。缺少图书馆？

> ID：13849585
> 
> 赞同：0
> 
> 时间：2012-12-12T22:12:36.093
> 
> 标签：ios, xcode, compilation, linker, clang

我正在做一个 2 年前的项目。这个想法是将它移植到 iPad Mini 和 iPhone 5。但我什至无法在 Xcode 4.5.2 上编译它，我猜它与它所针对的旧 iOS 有关。有人可以帮我理解这个错误信息吗？

> ld /Users/luisharo/Library/Developer/Xcode/DerivedData/HomeBroker-dzpamgfducpqanemuwqzgjkjwoka/Build/Products/Debug-iphonesimulator/HomeBroker.app/HomeBroker normal i386 cd /Users/luisharo/Mobiik/GBM/gbm-homebroker-iphone/HomeBroker setenv IPHONEOS_DEPLOYMENT_TARGET 5.1 setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/ bin:/usr/sbin:/sbin" /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/ iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0。sdk -L/Users/luisharo/Library/Developer/Xcode/DerivedData/HomeBroker-dzpamgfducpqanemuwqzgjkjwoka/Build/Products/Debug-iphonesimulator -F/Users/luisharo/Library/Developer/Xcode/DerivedData/HomeBroker-dzpamgfducpqanemuwqzgjkjwoka/Build/Products/ Debug-iphonesimulator -F/Users/luisharo/Mobiik/GBM/gbm-homebroker-iphone/HomeBroker -filelist /Users/luisharo/Library/Developer/Xcode/DerivedData/HomeBroker-dzpamgfducpqanemuwqzgjkjwoka/Build/Intermediates/HomeBroker.build/Debug- iphonesimulator/HomeBroker.build/Objects-normal/i386/HomeBroker.LinkFileList -Xlinker -objc_abi_version -Xlinker 2 -lgcov -fobjc-link-runtime -fprofile-arcs -ftest-coverage -Xlinker -no_implicit_dylibs -mios-simulator-version-min =5。1 -framework MessageUI -framework AudioToolbox -framework SystemConfiguration -framework UIKit -framework Foundation -framework CoreGraphics -framework CoreData -framework QuartzCore -lxml2 -o /Users/luisharo/Library/Developer/Xcode/DerivedData/HomeBroker-dzpamgfducpqanemuwqzgjkjwoka/Build/Products/ Debug-iphonesimulator/HomeBroker.app/HomeBroker
> 
> ld：找不到-lgcov clang的库：错误：链接器命令失败，退出代码为1（使用-v查看调用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:40:39.993

根据错误信息：

> ld：找不到-lgcov clang的库：错误：链接器命令失败，退出代码为1（使用-v查看调用）

可能有两个问题：

1.  你没有 gcov 库
2.  您的 gcov 库与之前的位置不同

如果您根本没有 gcov 库，请安装它。

如果您有 gcov 库，请确保链接器可以看到它，请使用：

```
-Lpath/to/libgcov 
```

# vim - 仅当前面的单词未列入黑名单时，如何在 Vim 的行尾添加字符

> ID：13849586
> 
> 赞同：1
> 
> 时间：2012-12-12T22:12:39.903
> 
> 标签：vim, editor, customization

因此，在 JavaScript 中，我会编写如下内容：

`foo (function () {});`

注意分号。在 Vim 中，如何在我键入`(`. 它的行为类似于：

`foo(`或者`foo (`然后 Vim 自动完成`)`并创建`foo ()`. 我也自动希望它在末尾放置一个分号，`foo ();`并将光标放在它通常位于`foo(|)`.

如果前面的单词是，我不希望它添加 tho：`while|if|else|else if|for|switch|function`因为您不会在这些单词的末尾添加分号。基本上，保留字列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T07:27:16.730

从您的问题中不清楚您是否已经在使用*自动关闭*`)`插件之一，该插件会在您键入后自动插入匹配`(`项，但您添加的用例`;`只是该算法的一个小扩展。

[这个 Vim Tips Wiki 页面](http://vim.wikia.com/wiki/Automatically_append_closing_characters)概述了自动关闭是如何实现的，它有一个实现这个的插件列表。我会检查这些；也许其中一个已经提供了您的扩展，或者至少您可以尝试扩展其中一个以满足您的需求。

就个人而言，我不喜欢该领域过多的自动化。即使有巧妙的规则，自动插入也不能 100% 正确，而且我发现这些情况造成的分心比不必键入简单字符（如`;`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T23:28:15.317

您可以使用包含排除单词的正则表达式执行搜索/替换命令。因此，仅当行/模式没有任何不需要的单词时才会执行搜索。我不知道如何构建这个正则表达式，但也许这个链接会帮助你： [Regular Expression to exclude set of Keywords](https://stackoverflow.com/questions/116819/regular-expression-to-exclude-set-of-keywords)

# wordpress - Wordpress：自定义帖子类型过滤、排序和搜索

> ID：13849587
> 
> 赞同：1
> 
> 时间：2012-12-12T22:12:47.630
> 
> 标签：wordpress, filter, custom-post-type

我正在使用自定义帖子类型在页面上显示一些信息。

[Wordpress 自定义帖子类型在现有页面上显示自定义帖子类型列表](https://stackoverflow.com/questions/13519888/wordpress-custom-post-type-displaying-list-of-custom-post-type-on-existing-page)

有没有办法为数据添加过滤、排序和搜索功能？

我已经设法让分页工作“domain.com/page/2”

```
 $the_query = new WP_Query(array('post_type' => 'custom_post_type', 'posts_per_page' => 25, 'paged' => $paged, 'orderby'=>'title', 'order' => 'ASC')); 
```

我正在使用 jquery DataTable ( [http://datatables.net/](http://datatables.net/) ) 来添加排序、分页和搜索，但是当您在 1000 多条记录上使用 Datatable 时，它​​变得非常缓慢，有时它会显示有关内存不足的 php 错误。这始终是一个临时解决方案，直到我想出一种使用 Wordpress 正确完成它的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:55:35.567

您提到了一个 jQuery 工具来对数据进行排序，但这对于来自数据库的数据来说不是一个好主意。jQuery 排序工具旨在使表格更具可读性，并帮助用户处理已经显示在页面上的数据。使用数据库，这个想法更多的是只获取所需的数据，而不是获取页面中的所有内容，然后对元素进行排序或过滤以将它们从视图中删除（但仍然在页面中，这意味着它更重，下载时间更长，更难处理等）。您已经设法为您的自定义帖子类型实现分页，这很好。现在只需包含一个搜索表单。默认的 WordPress 搜索表单 (searchform.php) 如下所示：

```
 <form role="search" method="get" id="searchform" action="<?php echo home_url( '/' ); ?>">
                <div><label class="screen-reader-text" for="s">Search for:</label>
                    <input type="text" value="" name="s" id="s" />
                    <input type="submit" id="searchsubmit" value="Search" />
                </div>
            </form> 
```

您只需要在其中添加一小行即可将搜索限制为您的自定义帖子类型：

```
 <input type="hidden" name="post_type" value="name_of_your_post_type" /> 
```

所以它会是这样的：

```
 <form role="search" method="get" id="searchform" action="<?php echo home_url( '/' ); ?>">
                <div><label class="screen-reader-text" for="s">Search for:</label>
                    <input type="text" value="" name="s" id="s" />
                    <input type="submit" id="searchsubmit" value="Search" />
                    <input type="hidden" name="post_type" value="name_of_your_post_type" />
                </div>
            </form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T07:06:13.747

谢谢barakadam，我还没有尝试搜索，但我能够弄清楚order和orderby

我使用 $_GET 来获取 order 和 orderby 的值并将这些变量传递给

# html - CSS - divs定位/阴影影响其他

> ID：13849593
> 
> 赞同：0
> 
> 时间：2012-12-12T22:13:17.807
> 
> 标签：html, css

当我想在 css 中实现这一点时遇到问题：

*   背景中的图像 - 没关系（好的，它在 jsfiddle 中不可见）
*   一个 div 在后台创建类似阴影的东西 - 没关系
*   其他一切都足够尖锐。所以 tose 元素不能受到任何阴影属性的影响。- 有问题

“Shadow div”已修复属性显示，并且它不是站点上任何其他元素的父级！我不知道，为什么这个 opacity 属性会影响同一位置的其他元素？

简短的 HTML 代码：

```
<body>
    <div id="background"></div> 
    <div id="bodyBackground"></div>
    <div id="body">elements here looks darker</div>
</body> 
```

[JsFiddle 链接](http://jsfiddle.net/xkvrF/2/) [更短的 JsFiddle](http://jsfiddle.net/xkvrF/5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:17:35.807

那是因为你在`content`.

```
#content {
    display: inline-block;
    margin-top: 45px;
    margin-left: 160px;
    padding-bottom: 30px;
    color: white;
    opacity:0.4;  <--- right here 
    filter:alpha(opacity=40); <--- and here 
} 
```

# php - Protecting against html injection

> ID：13849596
> 
> 赞同：0
> 
> 时间：2012-12-12T22:13:28.117
> 
> 标签：php, html, code-injection, htmlspecialchars, html-injections

So I know that you can do `$words = htmlspecialchars($_POST['name']);` in php to escape the special characters and prevent some html injection.

But I'm having trouble actually implementing it into my php code. I was reading that you have to use it before you display whatever it is you're displaying to the viewer of the site but I'm lost as to how to do this. I am a bit of a beginner with php.

So i was able to do the sql injection part but here's the part of the code where I am stuck at, as I described above.

I am trying to prevent html injection for title blog and tag

```
$result= mysql_query("SELECT * FROM Bpost");

echo '<div class = "blog" align = "center">';
    while($row = mysql_fetch_array($result))
        {

        echo "<div class = 'tname'>";
        echo $row['title']; 
        echo '</div>';

        echo '<div class = "bpost">';
        echo $row['blog'];
        echo '</div>';

        echo '<div class = "tag">';
        echo $row['tags'];
        echo '</div>';
        echo '</br>';

        }
echo '</div>'; 
```

If you need sample code from my other stuff let me know. To me this seem like this was enough.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:14:55.033

Just change `echo $row['title'];` to `echo htmlspecialchars($row['title']);` (and repeat for all the other user-generated data) and you're set.

# php - 考虑到使用 php 逻辑（少量），对于 MVC 概念是否合理？

> ID：13849599
> 
> 赞同：0
> 
> 时间：2012-12-12T22:13:33.673
> 
> 标签：php, model-view-controller

我读过 MVC 模式，整个 php 逻辑必须在模型中，但是当我们遇到这样的情况时：从模型传递`mysqli_result`对象到视图，并且在视图中我们需要检查某个列（mysql 表列）的值并根据这个值，即我们认为*：*

```
while ($row = $my_mysqli_result_object->fetch_assoc()) {
    if ($row['some_column'] == "1") {
        // print something
    }
    else if ($row['some_column'] == "2") {
        // print something other
    }
    else if ($row['some_column'] == "3") {
        // print something other
    }
    // ....
    // ....
} 
```

如您所见，在视图中是 php 逻辑（逻辑很少，但存在）。

我的问题是：考虑到这种 php 逻辑，通常用于 MVC 概念？或者这不是 MVC 的正确方法，在这种情况下必须做其他事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T09:48:56.653

### 关于 MVC 的一些一般信息

MVC 设计模式的每个部分都有特定的角色。它是通过引入两种分离来完成的（由[关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns)原理引入的概念）：

*   *系统内的模型层* ^([*[1]*](https://stackoverflow.com/a/5864000/727208))和*表示层*将领域业务规则与可视化表示隔离开来
*   *表示层内的控制器*和*视图*确保 UI 生成和用户输入彼此独立

实际上，当您查看正确设计的*模型层*时，它还融合了针对不同任务的不同结构：应用程序逻辑、域逻辑或存储逻辑。

### 什么是意见？

有一个常见的误解，主要是由试图模仿它的 Rails ^([*[2]粉丝和框架长期存在的。*](https://stackoverflow.com/a/11984678/727208))**View 不是一个愚蠢的模板**。

在 MVC 的现代解释中，当应用于 Web 时，视图是包含大部分 UI 逻辑的实例。是的，逻辑。View 应该从模型层获取信息，并根据它获得的数据决定生成什么响应以及它需要哪些模板来组装该响应。

数据的*`how`*获取是区分 MVC 启发模式（如 Model2 MVC、MVVM 和 MVP）的主要因素之一。

## ..现在实际上是关于原始问题：

编码。你展示的应该分开，因为它有两个不同的目标：从存储中检索信息和对输出做出决策。该`fetch_assoc()`位应该进入*模型层*（很可能在某些[*数据映射器*](http://martinfowler.com/eaaCatalog/dataMapper.html)实例中。并且您的`switch( $someColumn )`语句应该移动到视图实例。

> [作为一个无关紧要的说明，这个例子让我想到，你实际上是在处理那里的一些`status`专栏。在这种情况下，最好放弃`if/else`with 并使用`$status = $listOfOption[ $someColumn ]`, where `$listOfOptions = [0 => 'error', 1 => 'pending', 2 => 'unconfirmed', 3 => 'complete'];`... 或类似的东西]

您的视图应该决定如何表示该列以及必须将什么值绑定到模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T22:18:02.267

在 MVC 模式中，所有逻辑都在控制器中，而不是在模型中。

该模型通常只携带数据。它可以验证数据的正确性（这是委托给模型的唯一详细说明）。

视图可以做很少的阐述——即它可以有一点点逻辑内部——但前提是它与表示方面有关。

回答你的问题：这个剂量的 php 逻辑是绝对正常和可以接受的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T22:20:18.387

您可以将该函数放入 PHP 模型类中，并使用 1 行代码在视图中调用它。

MyModelClass.php

```
class MyModelClass {

    public static function getData($someColumn)
        //Do Query and get result
        $data_array = null;
        while ($row = $my_mysqli_result_object->fetch_assoc()) {
            if ($someColumn == "1") {
                    // print something
            }
            else if ($someColumn == "2") {
                // print something other
            }
            else if ($someColumn == "3") {
                // print something other
            }
            // ....
            // .... BUILD DATASET ARRAY
            // ....
         }
         return $data_array;
     }
} 
```

# java - Java Image Resize BufferedImage 不绘制

> ID：13849603
> 
> 赞同：1
> 
> 时间：2012-12-12T22:13:50.423
> 
> 标签：java, graphics

我正在尝试调整图像的大小，将其保存为 BufferedImage。如果我不缩放图像，我可以正常工作。

使用以下代码，传入文件名并将其转换为 BufferedImage 这工作正常使用`g.drawImage(img, x, y, null);`where img is the BufferedImage

```
public Sprite(String filename){
    ImageIcon imgIcon = new ImageIcon(filename);
    int width = imgIcon.getIconWidth();
    int height = imgIcon.getIconHeight();
    BufferedImage bimg = new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);
    Graphics bg = bimg.getGraphics();
    bg.drawImage(imgIcon.getImage(), 0, 0, null);
    bg.dispose();
    this.sprite = bimg;
} 
```

下面的方法在这里不起作用，它需要一个文件名和一个调整大小的宽度。`g.drawImage(img, x, y, null);`它调整它的大小，然后将其转换为 BufferedImage，但在 img 是 BufferedImage 的情况下再次使用它不起作用。

```
public Sprite(String filename, int width){
    ImageIcon imgIcon = new ImageIcon(filename);
    Image img = imgIcon.getImage();
    float h = (float)img.getHeight(null);
    float w = (float)img.getWidth(null);
    int height = (int)(h * (width / w));
    Image imgScaled = img.getScaledInstance(width, height, Image.SCALE_SMOOTH);

    BufferedImage bimg = new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);
    Graphics bg = bimg.getGraphics();
    bg.drawImage(imgScaled, 0, 0, null);
    bg.dispose();
    this.sprite = bimg;
} 
```

所以我的问题是，为什么第二个块不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:28:15.577

检查：

```
Image imgScaled = img.getScaledInstance(width, height, Image.SCALE_SMOOTH); 
```

如果是`null`或`imgScaled`不是，对我来说，你有一个`null`。

忘记是哪种情况了，但是有一种情况，当图片加载是阻塞的，其他是非阻塞的方法，这意味着API函数将返回并且图像还没有加载。通常需要使用观察者。就像我说的我忘了那是什么时候，但我遇到了那些情况！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T22:43:52.403

你有一个四舍五入的问题...

Java 将根据您提供的值返回除法结果...

例如...

```
int width = 100;
int w = 5;
int result = width / w
// result = 0, but it should be 0.5 
```

Java 进行了内部转换，将值转换回`int`，这只是截断十进制值。

相反，您需要鼓励 Java 将结果作为十进制值返回......

```
int result = width / (float)w
// result = 0.5 
```

所以，你的规模计算`int height = (int)(h * (width / w))`实际上正在返回`0`

我会使用更多的计算方式

```
int height = Math.round((h * (width / (float)w))) 
```

对不起，我不太记得所有这些的“技术”喋喋不休，但这是这个想法的一般笑话；）

**更新**

`ImageIcon`使用后台线程实际加载图像像素，但在调用构造函数后立即返回。这意味着图像数据可能在未来一段时间内不可用。

改为使用`ImageIO.read(new File(filename))`。这将阻塞，直到图像数据被读取并返回 a `BufferedImage`，这更容易处理。

# python - 使用 qsub 提交连续且独立的作业的速度有多快？

> ID：13849604
> 
> 赞同：4
> 
> 时间：2012-12-12T22:13:50.017
> 
> 标签：python, cluster-computing, pbs, qsub, torque

这个问题与[pbs job no output when busy](https://stackoverflow.com/questions/13804373/pbs-job-no-output-when-busy)相关。即当 PBS/Torque 处于“忙碌”状态时，我提交的一些作业没有输出。我想当许多作业一个接一个地提交时会更忙，而且碰巧的是，在以这种方式提交的作业中，我经常得到一些不产生任何输出的作业。

这里有一些代码。

假设我有一个名为“x_analysis.py”的 python 脚本，它将包含一些数据的文件作为其输入，并分析存储在文件中的数据：

```
./x_analyse.py data_1.pkl 
```

现在，假设我需要： (1) 准备 N 个这样的数据文件：data_1.pkl, data_2.pkl, ..., data_N.pkl (2) 对每个文件进行“x_analysis.py”处理，并写入结果到他们每个人的文件。(3) 由于不同数据文件的分析都是相互独立的，所以我打算使用 PBS/Torque 并行运行它们以节省时间。（我认为这本质上是一个“令人尴尬的并行问题”。）

我有这个 python 脚本来执行上述操作：

```
import os
import sys
import time

N = 100

for k in range(1, N+1):
    datafilename = 'data_%d' % k
    file = open(datafilename + '.pkl', 'wb')
    #Prepare data set k, and save it in the file
    file.close()

    jobname = 'analysis_%d' % k
    file = open(jobname + '.sub', 'w')
    file.writelines( [ '#!/bin/bash\n',
                       '#PBS -N %s\n' % jobname,
                       '#PBS -o %s\n' % (jobname + '.out'),
                       '#PBS -q compute\n' ,
                       '#PBS -j oe\n' ,
                       '#PBS -l nodes=1:ppn=1\n' ,
                       '#PBS -l walltime=5:00:00\n' ,
                       'cd $PBS_O_WORKDIR\n' ,
                       '\n' ,
                       './x_analyse.py %s\n' % (datafilename + '.pkl') ] ) 
    file.close()

    os.system('qsub %s' % (jobname + '.sub')) 

    time.sleep(2.) 
```

该脚本准备一组要分析的数据，将其保存到一个文件中，写入一个 pbs 提交文件来分析这组数据，提交作业以执行此操作，然后继续对下一组数据再次执行相同操作， 等等。

事实上，当脚本运行时，作业 ID 列表会在作业提交时打印到标准输出。'ls' 表示有 N 个 .sub 文件和 N 个 .pkl 数据文件。“qstat”显示所有作业都在运行，状态为“R”，然后已完成，状态为“C”。但是，之后，'ls' 显示 .out 输出文件少于 N 个，“x_analysis.py”生成的结果文件少于 N 个。实际上，一些工作没有产出。如果我要清除所有内容，然后重新运行上述脚本，我会得到相同的行为，一些作业（但不必与上次相同）不会产生任何输出。

有人建议，通过增加提交连续作业之间的等待时间，情况会有所改善。

```
time.sleep(10.) #or some other waiting time 
```

但我觉得这不是最令人满意的，因为我尝试了 0.1s、0.5s、1.0s、2.0s、3.0s，但都没有真正的帮助。有人告诉我，50s 的等待时间似乎很好，但如果我必须提交 100 个工作，等待时间将是大约 5000s，这似乎非常长。

我尝试通过提交作业数组来减少使用“qsub”的次数。我会像以前一样准备所有的数据文件，但只有一个提交文件，“analysis_all.sub”：

```
#!/bin/bash                                                                                                                                                    
#PBS -N analyse                                                                                                                            
#PBS -o analyse.out                                                                                                                        
#PBS -q compute                                                                                                                                                
#PBS -j oe                                                                                                                                                     
#PBS -l nodes=1:ppn=1                                                                                                                                          
#PBS -l walltime=5:00:00                                                                                                                                       
cd $PBS_O_WORKDIR

./x_analyse.py data_$PBS_ARRAYID.pkl 
```

然后提交

```
qsub -t 1-100 analyse_all.sub 
```

但即便如此，一些工作仍然不会产生产出。

这是个常见的问题吗？我做的不对吗？在工作提交之间等待是最好的解决方案吗？我可以做些什么来改善这一点吗？

提前感谢您的帮助。

编辑1：

我使用的是 Torque 2.4.7 版和 Maui 3.3 版。

此外，假设作业 ID 为 1184430.mgt1 的作业不产生任何输出，而作业 ID 为 1184431.mgt1 的作业按预期产生输出，当我在这些上使用“tracejob”时，我得到以下信息：

```
[batman@gotham tmp]$tracejob 1184430.mgt1
/var/spool/torque/server_priv/accounting/20121213: Permission denied
/var/spool/torque/mom_logs/20121213: No such file or directory
/var/spool/torque/sched_logs/20121213: No such file or directory

Job: 1184430.mgt1

12/13/2012 13:53:13  S    enqueuing into compute, state 1 hop 1
12/13/2012 13:53:13  S    Job Queued at request of batman@mgt1, owner = batman@mgt1, job name = analysis_1, queue = compute
12/13/2012 13:53:13  S    Job Run at request of root@mgt1
12/13/2012 13:53:13  S    Not sending email: User does not want mail of this type.
12/13/2012 13:54:48  S    Not sending email: User does not want mail of this type.
12/13/2012 13:54:48  S    Exit_status=135 resources_used.cput=00:00:00  resources_used.mem=15596kb resources_used.vmem=150200kb resources_used.walltime=00:01:35
12/13/2012 13:54:53  S    Post job file processing error
12/13/2012 13:54:53  S    Email 'o' to batman@mgt1 failed: Child process '/usr/lib/sendmail -f adm batman@mgt1' returned 67 (errno 10:No child processes)
[batman@gotham tmp]$tracejob 1184431.mgt1
/var/spool/torque/server_priv/accounting/20121213: Permission denied
/var/spool/torque/mom_logs/20121213: No such file or directory
/var/spool/torque/sched_logs/20121213: No such file or directory

Job: 1184431.mgt1

12/13/2012 13:53:13  S    enqueuing into compute, state 1 hop 1
12/13/2012 13:53:13  S    Job Queued at request of batman@mgt1, owner = batman@mgt1, job name = analysis_2, queue = compute
12/13/2012 13:53:13  S    Job Run at request of root@mgt1
12/13/2012 13:53:13  S    Not sending email: User does not want mail of this type.
12/13/2012 13:53:31  S    Not sending email: User does not want mail of this type.
12/13/2012 13:53:31  S    Exit_status=0 resources_used.cput=00:00:16 resources_used.mem=19804kb resources_used.vmem=154364kb resources_used.walltime=00:00:18 
```

编辑 2：对于不产生输出的作业，“qstat -f”返回以下内容：

```
[batman@gotham tmp]$qstat -f 1184673.mgt1
Job Id: 1184673.mgt1   
Job_Name = analysis_7
Job_Owner = batman@mgt1
resources_used.cput = 00:00:16
resources_used.mem = 17572kb
resources_used.vmem = 152020kb
resources_used.walltime = 00:01:36
job_state = C
queue = compute
server = mgt1
Checkpoint = u
ctime = Fri Dec 14 14:00:31 2012
Error_Path = mgt1:/gpfs1/batman/tmp/analysis_7.e1184673
exec_host = node26/0
Hold_Types = n
Join_Path = oe
Keep_Files = n
Mail_Points = a
mtime = Fri Dec 14 14:02:07 2012
Output_Path = mgt1.gotham.cis.XXXX.edu:/gpfs1/batman/tmp/analysis_7.out
Priority = 0
qtime = Fri Dec 14 14:00:31 2012
Rerunable = True
Resource_List.nodect = 1
Resource_List.nodes = 1:ppn=1
Resource_List.walltime = 05:00:00
session_id = 9397
Variable_List = PBS_O_HOME=/gpfs1/batman,PBS_O_LANG=en_US.UTF-8, PBS_O_LOGNAME=batman,
    PBS_O_PATH=/gpfs1/batman/bin:/usr/mpi/gcc/openmpi-1.4/bin:/gpfs1/batman/workhere/instal
    ls/mygnuplot-4.4.4/bin/:/gpfs2/condor-7.4.4/bin:/gpfs2/condor-7.4.4/sb
    in:/usr/lib64/openmpi/1.4-gcc/bin:/usr/kerberos/bin:/usr/local/bin:/bi
    n:/usr/bin:/opt/moab/bin:/opt/moab/sbin:/opt/xcat/bin:/opt/xcat/sbin,
    PBS_O_MAIL=/var/spool/mail/batman,PBS_O_SHELL=/bin/bash,
    PBS_SERVER=mgt1,PBS_O_WORKDIR=/gpfs1/batman/tmp,
    PBS_O_QUEUE=compute,PBS_O_HOST=mgt1
sched_hint = Post job file processing error; job 1184673.mgt1 on host node
    26/0Unknown resource type  REJHOST=node26 MSG=invalid home directory '
    /gpfs1/batman' specified, errno=116 (Stale NFS file handle)
etime = Fri Dec 14 14:00:31 2012
exit_status = 135  
submit_args = analysis_7.sub
start_time = Fri Dec 14 14:00:31 2012
Walltime.Remaining = 1790
start_count = 1
fault_tolerant = False
comp_time = Fri Dec 14 14:02:07 2012 
```

与产生输出的工作相比：

```
[batman@gotham tmp]$qstat -f 1184687.mgt1
Job Id: 1184687.mgt1
Job_Name = analysis_1
Job_Owner = batman@mgt1
resources_used.cput = 00:00:16
resources_used.mem = 19652kb
resources_used.vmem = 162356kb
resources_used.walltime = 00:02:38
job_state = C
queue = compute
server = mgt1
Checkpoint = u
ctime = Fri Dec 14 14:40:46 2012
Error_Path = mgt1:/gpfs1/batman/tmp/analysis_1.e118468
    7
exec_host = ionode2/0
Hold_Types = n
Join_Path = oe
Keep_Files = n
Mail_Points = a
mtime = Fri Dec 14 14:43:24 2012
Output_Path = mgt1.gotham.cis.XXXX.edu:/gpfs1/batman/tmp/analysis_1.out
Priority = 0
qtime = Fri Dec 14 14:40:46 2012
Rerunable = True   
Resource_List.nodect = 1
Resource_List.nodes = 1:ppn=1
Resource_List.walltime = 05:00:00
session_id = 28039 
Variable_List = PBS_O_HOME=/gpfs1/batman,PBS_O_LANG=en_US.UTF-8,
    PBS_O_LOGNAME=batman,
    PBS_O_PATH=/gpfs1/batman/bin:/usr/mpi/gcc/openmpi-1.4/bin:/gpfs1/batman/workhere/instal
    ls/mygnuplot-4.4.4/bin/:/gpfs2/condor-7.4.4/bin:/gpfs2/condor-7.4.4/sb
    in:/usr/lib64/openmpi/1.4-gcc/bin:/usr/kerberos/bin:/usr/local/bin:/bi
    n:/usr/bin:/opt/moab/bin:/opt/moab/sbin:/opt/xcat/bin:/opt/xcat/sbin,
    PBS_O_MAIL=/var/spool/mail/batman,PBS_O_SHELL=/bin/bash,
    PBS_SERVER=mgt1,PBS_O_WORKDIR=/gpfs1/batman/tmp,
    PBS_O_QUEUE=compute,PBS_O_HOST=mgt1
etime = Fri Dec 14 14:40:46 2012
exit_status = 0
submit_args = analysis_1.sub
start_time = Fri Dec 14 14:40:47 2012
Walltime.Remaining = 1784
start_count = 1 
```

似乎一个的退出状态是 0 而另一个不是。

编辑3：

从上面的“qstat -f”输出来看，问题似乎与后期作业文件处理中的“过时 NFS 文件句柄”有关。通过提交数百个测试作业，我已经能够识别出许多产生失败作业的节点。通过`ssh`查看这些，我可以在 中找到丢失的 PBS 输出文件`/var/spool/torque/spool`，我还可以在其中看到属于其他用户的输出文件。这些有问题的节点的一件奇怪的事情是，如果它们是唯一选择使用的节点，那么作业在它们上运行良好。只有当它们与其他节点混合时才会出现问题。

由于我不知道如何修复后期作业处理“过时的 NFS 文件句柄”，因此我通过向它们提交“虚拟”作业来避开这些节点

```
echo sleep 60 | qsub -lnodes=badnode1:ppn=2+badnode2:ppn=2 
```

在提交实际工作之前。现在所有作业都按预期产生输出，无需等待连续提交。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T12:39:27.427

`tracejob`我在失败的作业的输出中看到了两个问题。

首先是`Exit_status=135`. 此退出状态不是 Torque 错误代码，而是脚本返回的退出状态，即`x_analyse.py`. `sys.exit()`Python 对函数的使用没有约定，`135`代码的来源可能在脚本中使用的模块之一中。

第二个问题是后期作业文件处理失败。这可能表示节点配置错误。

从现在开始，我猜。由于成功的作业大约需要 00:00:16，因此延迟 50 秒后，您的所有作业可能都会降落到第一个可用节点上，这可能是真的。使用较小的延迟，您会涉及更多节点，最终会遇到配置错误的节点或在单个节点上同时执行两个脚本。我会修改提交脚本添加一行

```
 'echo $PBS_JOBID :: $PBS_O_HOST >> debug.log', 
```

到生成`.sub`文件的python脚本。如果我正确理解您的设置，这会将执行主机的名称添加到 debug.log 中，该名称将驻留在通用文件系统中。

然后，您（或 Torque 管理员）可能希望`spool`在故障节点的 MOM 目录中查找未处理的输出文件，以获取一些信息以进行进一步诊断。

# facebook - 使用 Javascript SDK 提要对话框发布的帖子很小且被截断；不匹配预览

> ID：13849609
> 
> 赞同：7
> 
> 时间：2012-12-12T22:14:09.677
> 
> 标签：facebook, facebook-javascript-sdk, feed, preview, truncated

我正在尝试更新我的`stream.publish`代码以使用 javascript SDK 中的提要对话框，但生成的 facebook 帖子又小又丑。更烦人的是，facebook 上的帖子与我网站上的预览不匹配。

这是我的代码：

```
function facebook_publish_feed_story() {
  var publish = {
      method: 'feed',
      link: 'http://www.wikipedia.org/',
      picture: 'http://upload.wikimedia.org/wikipedia/commons/6/63/Wikipedia-logo.png',
      name: 'Name of the link',
      caption: "A caption that's kind of long like this I'm going to write some more words"
      description: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas vitae augue sed urna fermentum vulputate. Nunc porttitor vestibulum vestibulum. Aliquam eget feugiat lectus. Duis ullamcorper sollicitudin nisi sit amet congue.'
    };

  FB.ui(publish, function(response) {
    //do something with response
  });
} 
```

这是带有帖子预览的 javascript 弹出窗口。这篇文章对我来说看起来很好而且很棒：

![X](../Images/1f837f59386077030043f6e4a6013459.png)

这是它发布到 Facebook 后的样子。请注意，它位于深色背景的表格中，并且描述被完全截断，甚至没有“...”或“阅读更多”

![X](../Images/ffbd157695d7061b53dc3d953f26f190.png)

如果这是“就是这样”，那很好，我会放弃，但如果有任何方法可以修复此代码，或者使用不同的 SDK 调用来制作更具吸引力和信息量的帖子，那不是吗？只是对每个人都更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T17:17:58.603

同样在这里，帖子被截断。我注意到这个问题最近开始了。我的“解决方案”是将文本放在标题值而不是描述中。似乎标题可以包含比描述更多的字符。

# cuda - 在 CUDA 5 中对全局设备内存进行自动越界检查？

> ID：13849610
> 
> 赞同：1
> 
> 时间：2012-12-12T22:14:12.243
> 
> 标签：cuda, indexoutofboundsexception

我最近安装了 CUDA 5（如果重要的话，我正在使用 Visual Studio 2010 Express）。当我尝试对内核中的全局内存设备阵列执行越界读取访问时，CUDA 现在给我一个错误（错误 30 '未知错误'）。我想知道这种看似自动的越界错误检查是否是 CUDA 5 的新增功能。我不记得在早期版本中看到过它。

另外，有没有办法关闭这个自动越界错误检查？启用此功能会迫使我向内核添加额外的条件逻辑（而在此之前我不会使用越界结果）。

谢谢，

亚伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T00:28:24.390

这是一个设备异常，它不是来自软件。它之前没有崩溃的唯一原因是纯粹的运气（并且可能是旧的编译器）。您不能依赖编译器的行为（例如，即使使用旧的编译器，您可能已经看到不同优化级别的不同行为）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T00:10:33.013

考虑到我的经验，越界错误检查也在较旧的 CUDA 版本中，但它的行为并不十分严格。当某些线程超出分配数组的边界时，启动具有更多线程和更大分配数组的内核比启动具有更小数组的较小内核更容易导致内核崩溃。

我想这个检查是由 CUDA 运行时系统完成的，没有办法关闭它。同意@Roger Dahl 的观点，如果有这样的方法可以关闭这种检查，那么写越界肯定不会是“好的”。

# c# - 如何仅向特定订阅者 ServiceModelEx 发布？

> ID：13849616
> 
> 赞同：0
> 
> 时间：2012-12-12T22:14:31.643
> 
> 标签：c#, wcf, publish-subscribe, servicemodelex

好的，所以我正在改变我的服务向客户推送通知的方式。现在 ServiceModelEx 的工作方式是，如果任何客户端订阅了一个事件，它会向所有订阅的用户发送消息，无论该消息是否是给他们的。在客户端，我确定消息是否适合他们。正如您可以想象的那样，这会产生大量的网络流量，尤其是当您只需要发送到某些客户端时。

现在我正在使用`TransientSubscriptions`.

我尝试调试代码，但我唯一能说的是每个订阅者都存储为某种类型的 Generic `CallbackChannel`。

每个 TransientSubscriber 都是这样定义的。

```
T subscriber = OperationContext.Current.GetCallbackChannel<T>(); 
```

当它添加一个 TransientSubscriber 时，它会执行此操作。

```
static void AddTransient(T subscriber, string eventOperation) {
    lock (typeof(SubscriptionManager<T>)) {
        List<T> list = m_TransientStore[eventOperation];
        if (list.Contains(subscriber)) {
            return;
        }
        list.Add(subscriber);
    }
} 
```

如果有更好的方法，那么我愿意接受建议。我只想向 1 个客户而不是所有客户发送通知。

这里还有一篇关于 ServiceModelEx的[msdn文章。](http://msdn.microsoft.com/en-us/magazine/cc163537.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T04:04:48.717

好的，这就是我所做的。我添加了另一个通用类，但这个类包含一个用户 ID 和通用 CallbackChannel。

```
public class Subscriber<T> {
    private int _UserID;
    private T _Subscription;

    public int UserID {
        get { return _UserID; }
        set { _UserID = value; }
    }
    public T Subscription {
        get { return _Subscription; }
        set { _Subscription = value; }
    }
} 
```

然后，我将 ServiceModelEx 中持有 T 的每个参数切换为 hold `Subscriber<T>`。之后，我创建了一个新的`FireEvent`调用`FireUserEvent`，然后通过`GetTransientList`方法将 UserID 向下传递，我还创建了新的方法来传递 UserID。这样它只返回`Subscriber<T>`所述用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-26T06:27:22.543

您不这样做（Juval 明确建议您不要这样做）。发布/订阅的全部目的是事件发送给所有订阅者。你永远不应该过滤谁得到它们。它们是没有业务逻辑的实用程序。一旦开始添加过滤，您就有可能陷入将易变业务逻辑耦合到实用程序中的兔子洞。

如果有客户端应该获得某些事件，为什么他们订阅它们？也许您将太多事件类型捆绑到一个发布/订阅合同中。您可以通过将事件拆分为多个合约来解决此问题，尽管在使用 ServiceModelEx pub/sub 时，这将需要您使用多个 pub/sub 服务。您可以通过使用 Action="*" 根据此示例创建消息路由 pub/sub 来解决此问题：http: [//blogs.microsoft.co.il/sasha/2008/03/15/wcf-router-and-publishsubscribe -示例实现/](http://blogs.microsoft.co.il/sasha/2008/03/15/wcf-router-and-publishsubscribe-sample-implementation/)

或者，如果您想将事件返回给特定的调用者，您应该使用不同的机制。[例如，ServiceModelEx 还提供了一种叫做响应服务的东西，在http://idesign.net/downloads](http://idesign.net/downloads)上搜索“响应服务” 。

# python-3.x - 在python中创建从a到b的整数列表

> ID：13849618
> 
> 赞同：6
> 
> 时间：2012-12-12T22:14:38.560
> 
> 标签：python-3.x

创建从 a（含）到 b（含）的整数列表。示例： `integers(2,5)`返回`[2, 3, 4, 5]`.

我知道这可能很容易，但我似乎无法得到任何工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T22:34:37.473

```
>>> def integers(a, b):
         return list(range(a, b+1))
>>> integers(2, 5)
[2, 3, 4, 5] 
```

解释您自己的解决方案：

> 你能向我解释一下为什么在某些程序中你必须包含`[i]`，而有些只是`i`
> 
> ```
> def integers(a,b):
>    list = []
>    for i in range(a, b+1):
>        list = list + [i] 
> ```

`i`指数字本身；`[i]`是一个包含一个元素的列表，`i`. 当`+`对列表使用运算符时，Python 可以连接两个列表`[1, 2] + [3, 4]`，`[1, 2, 3, 4]`. 但是，不可能仅将单个元素（或在这种情况下为数字）添加到现有列表中。尝试这样做会导致`TypeError`.

您可以做的不是连接一个元素列表，而是使用具有相同名称的方法简单地附加元素：

```
list.append(i) 
```

最后一点，您不应该命名您的变量`list`（`dict`或`str`等），因为这将在本地覆盖对内置函数/类型的引用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T22:47:56.693

列表[推导](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)在这里最有意义。它很简洁，不涉及不必要地附加到列表中（在你的最后）。

```
def integers(a, b):
    return [i for i in range(a, b+1)] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-16T18:14:40.670

使用 np.arange。例子

```
 i=np.arange(1,9) 
```

这将导致

```
 array([ 1,  2,  3,  4,  5,  6,  7,  8]) 
```

数组比 python 中的列表更好

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T22:35:12.207

这个问题很简单；我不想只告诉你答案，因为你可以查到。查看内置函数的文档`range()`。由于您使用的是 Python 3.x，因此您需要`range()`通过调用`list()`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-04T19:50:25.843

非常紧凑，仅使用 Python 标准库：

```
i=range(6)[2:] 
```

创建一个包含从 0 到 6 的 6 个成员的列表，并选择索引为 2 到末尾的成员。

```
print(i)
[2, 3, 4, 5] 
```

要选择不同的范围，请尝试：

```
i=range(6)[2:4]

print(i)
[2, 3] 
```

# multithreading - 在 Perl 线程之间共享一个活动的 IO::Socket::SSL 套接字

> ID：13849620
> 
> 赞同：1
> 
> 时间：2012-12-12T22:14:45.437
> 
> 标签：multithreading, perl, sockets, ssl

我希望`IO::Socket::SSL`跨 Perl 线程（5.10.1 及更高版本）共享/传递一个对象。

我在一个线程中接受 SSL 连接——它已经打开并且正在使用 SSL——然后将它交给其他已经在运行的工作线程。该`IO::Socket::SSL`对象不可共享，因为它基于符号/全局；`shared_clone()`等失败。

我想获取可共享的 SSL 上下文和文件号，然后用于`new_from_fd()`在工作线程中重新创建套接字。例如，监听器会做（这里为了简单起见省略了错误检查等）：

```
...
my $sock = $listener->accept();             # Grab the next SSL connection
$sock->peek(...);                           # Peek to see what to do with it...
my $ssl  = $sock->_get_ssl_object();        # Get internal SSL handle
my $ctx  = Net::SSLeay::get_SSL_CTX($ssl);  # Get context
... 
```

以上为我提供了上下文，它看起来只是一个标量。在工作线程中，我使用此上下文和文件号，然后执行以下操作：

```
my $reborn = IO::Socket::SSL->new_from_fd ($fd,
    PeerAddr      => $ADDR,
    Blocking      => 0,
    ...other non-SSL options...
    SSL_reuse_ctx => $ctx,
); 
```

我也尝试过 just`IO::Socket::SSL->new()`和 and 的变`fdopen()`体`open()`。`SSL.pm`它们在模块（第 1343 行，`isa`调用）内以一种指示上下文值应该是一个`IO::Socket::SSL`或`IO::Socket::SSL::SSL_Context`对象的方式爆炸。

我还没有找到有效的咒语。如何获取要传递的有效上下文对象，`IO::Socket::SSL->new_from_fd()`以便我可以在新线程中重新实例化原始套接字？而且，这甚至会奏效吗？想法？

# javascript - 检查变量是否存在。[诡异的]

> ID：13849623
> 
> 赞同：0
> 
> 时间：2012-12-12T22:14:54.400
> 
> 标签：javascript

我在这里遇到了一个奇怪的问题。

我正在尝试检查变量是否存在

我有

```
for(var i=0; i<6; i++{
  if(results[(i+1)].test){
    results[(i+1)].test=i + 'test';
  }
} 
```

我知道 results(6).test 是未定义的，我需要添加额外的索引来检查变量是否存在。我不断收到控制台错误说

```
Uncaught TypeError: Cannot read property 'test' of undefined 
```

我想`if(results[(i+1)].test)`检查变量是否对我存在

我也试过

```
if(typeof results[(i+1)].test !='undefined'){
 results[(i+1)].test=i + 'test'
} 
```

但仍然出现错误。我该如何解决？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T22:16:54.870

您正在检查 foo.test 是否未定义，但您的问题是 foo 本身（在本例中`results[i + 1]`）未定义。

您需要先检查一下，例如：

```
if (typeof results[i+1] != "undefined") {
    // do stuff with results[i+1].test, or results[i+1].whatever
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T22:17:38.397

您需要先将 results(6) 指定为对象，然后才能检查 .test 是否存在。就像你说的 results(6) 是未定义的，这意味着当你尝试调用 results(6).test 时，你会得到你描述的错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T22:18:31.233

您没有检查结果数组的内容。

你应该做这个：

```
if(typeof results[(i+1)] !== 'undefined'){
 results[(i+1)].test=i + 'test'
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T22:18:43.590

结果[(i+1)] 定义了吗？

```
if(results[(i+1)] && results[(i+1)].test){
  results[(i+1)].test=i + 'test';
} 
```

# configuration - FUELPHP - 更改“公共”文件夹的名称

> ID：13849625
> 
> 赞同：0
> 
> 时间：2012-12-12T22:14:55.923
> 
> 标签：configuration, directory, public, fuelphp

在我的公用文件夹中称为“public_html”，所以我想知道如何配置燃料以使用“public_html”而不是“public”

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:49:15.607

您只需要将`public`文件夹重命名为`public_html`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T22:50:19.927

您不需要做任何特别的事情，只需将`public`文件夹重命名为`public_html`.

该`public`文件夹的内容包括框架的其余组件，而不是相反。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T02:55:28.563

您的网络服务器 docroot 是否指向 public_html ？

Fuel 没有对公共目录做任何特别的事情，它只是接收初始 http 请求的地方。

# javascript - 像常规地图 API 热图一样自定义融合表热图？

> ID：13849626
> 
> 赞同：1
> 
> 时间：2012-12-12T22:15:03.663
> 
> 标签：javascript, google-maps, google-api, google-fusion-tables

我将 Maps Javascript API 与 Fusion Tables 结合起来制作热图。问题是，当放大到一个非常高的级别时，热图看起来非常稀疏。

我想用 Maps API 中的常规非融合热图修改 maxIntensity 和 radius 的方式。是否可以修改这些参数，您会在代码中的什么位置进行修改？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T00:33:49.543

不，您不能像 Google Maps API 中的热图图层那样自定义 Fusion Tables 热图图层。

以下是一些用于从 Fusion Table 中获取数据并调用热图图层的示例代码： [https ://googledrive.com/host/0B5KVZ6J1ohN_Q3ZqVkFGSGZ2cEE/heatmaps%20code/](https://googledrive.com/host/0B5KVZ6J1ohN_Q3ZqVkFGSGZ2cEE/heatmaps%20code/)

-丽贝卡

# python - 如何使用 Gstreamer 制作故障视频？

> ID：13849627
> 
> 赞同：1
> 
> 时间：2012-12-12T22:15:13.900
> 
> 标签：python, gstreamer

这是一个奇怪的问题，我知道。

我现在正在做一个艺术项目，我们很失望，当我们随意搜索文件时，我们看不到任何压缩伪影。源文件主要是 mp4 和 avi 文件的混合。应用程序将需要在文件之间跳转并随机寻找时间轴中的不同偏移量。

我应该只构建自定义管道并将缓冲区调整到零吗？有没有办法告诉 decodebin2 直接寻找并忽略关键帧？

我对非 gstreamer 选项持开放态度，但我更愿意坚持使用 python。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:57:30.417

最简单的方法是在流中引入错误。随机位/突发错误会导致不可预知的毛刺！如果您愿意修改诸如身份之类的插件，请将其插入解码器之前并将其更改为以一定概率插入随机错误。根据您的喜好更改概率。如果您可以避免破坏帧的标题，但您可能会遇到更奇特的故障。

更简单的解决方案。把你的文件..随机插入一个程序读取它们并写入新版本的错误。将这些版本提供给您的程序。

第一种方法是动态随机效果和后来的方法静态效果[再次运行时文件将给出相同的工件] :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T08:36:45.477

使用较低比特率重新压缩时，您会看到更多伪像。虽然这将是一个普遍的事情，与寻求无关。进行准确的查找只会导致更多的 CPU 负载，因为 gst 仍会查找关键帧并尽可能快地解码，直到它到达准确的位置。在视频会议中，您可能会在切换视图时看到伪影，因为对于其他会议参与者的小预览，通常会有低带宽流，当切换到大时，它看起来很糟糕一段时间，直到发送者切换到更高比特率。

# excel - 插入新行时将公式复制到下一行

> ID：13849629
> 
> 赞同：20
> 
> 时间：2012-12-12T22:15:15.133
> 
> 标签：excel

我有一排，其中有使用同一行值的公式。下一行是空的，只是背景颜色不同。

现在，如果我插入一个新行（通过右键单击空行并“插入”），我会得到一个没有背景颜色的新行（这是我想要的），但该行也不包含任何公式：创建新行时，如何让 Excel 变得更智能并从上一行复制公式？

还有一条信息：插入新行时复制数据验证信息（即下拉列表）。

谢谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-13T10:28:51.123

将包含数据和公式的区域设为表格：

![在此处输入图像描述](../Images/0c2a8deaff6a95e4ac9537b908d366e1.png)

然后在下一行中添加新信息将复制该表中的所有公式以用于新行。数据验证也将应用于新行，就像对整列一样。这确实是 Excel 对您的数据更加智能。

无需 VBA...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-06T21:16:54.890

关于在表中复制行，我发现的另一件事是需要激活您正在处理的工作表。如果您有一个包含多个工作表的工作簿，则需要保存从中调用宏的工作表，然后使用表格激活工作表。完成后，您可以重新激活原始工作表。

您可以使用 Application.ScreenUpdating = False 确保用户看不到您正在宏内切换工作表。

如果您没有激活工作表，则副本似乎无法正常工作，即某些东西似乎可以工作，而其他东西则不能？？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T22:32:47.607

您需要插入新行，然后从源行复制到新插入的行。Excel 允许您粘贴特殊的公式。所以在 Excel 中：

*   插入新行
*   复制源行
*   选择新创建的目标行，右键粘贴特殊
*   粘贴为公式

VBA 如果需要，以 Rows("1:1") 为源，Rows("2:2") 为目标：

```
Rows("2:2").Insert Shift:=xlDown, CopyOrigin:=xlFormatFromLeftOrAbove
Rows("2:2").Clear

Rows("1:1").Copy
Rows("2:2").PasteSpecial Paste:=xlPasteFormulas, Operation:=xlNone 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-22T01:28:12.713

Private Sub Worksheet_Change(ByVal Target As Range)

```
'data starts on row 3 which has the formulas
'the sheet is protected - input cells not locked - formula cells locked
'this routine is triggered on change of any cell on the worksheet so first check if
' it's a cell that we're interested in - and the row doesn't already have formulas
If Target.Column = 3 And Target.Row > 3 _
And Range("M" & Target.Row).Formula = "" Then

    On Error GoTo ERROR_OCCURRED

    'unprotect the sheet - otherwise can't copy and paste
    ActiveSheet.Unprotect
    'disable events - this prevents this routine from triggering again when
    'copy and paste below changes the cell values
    Application.EnableEvents = False

    'copy col D (with validation list) from row above to new row (not locked)
    Range("D" & Target.Row - 1).Copy
    Range("D" & Target.Row).PasteSpecial

    'copy col M to P (with formulas) from row above to new row
    Range("M" & Target.Row - 1 & ":P" & Target.Row - 1).Copy
    Range("M" & Target.Row).PasteSpecial 
```

'确保重新启用（或不发生）错误事件并重新保护工作表

发生了错误：

```
 If Err.Number <> 0 Then
        MsgBox "An error occurred. Formulas may not have been copied." & vbCrLf & vbCrLf & _
            Err.Number & " - " & Err.Description
    End If

    're-enable events
    Application.EnableEvents = True
    're-protect the sheet
    ActiveSheet.Protect

    'put focus back on the next cell after routine was triggered
    Range("D" & Target.Row).Select

End If 
```

结束子

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-25T17:07:23.633

如果您的工作表有很多行都包含公式，到目前为止，最简单的方法是复制没有数据的行（但它确实包含公式），然后在您所在行的下方/上方“插入复制的单元格”想补充。公式仍然存在。在紧要关头，可以使用包含数据的行。粘贴后清除或覆盖即可。

# ruby-on-rails-3 - 超级简单的身份验证 railscast

> ID：13849630
> 
> 赞同：1
> 
> 时间：2012-12-12T22:15:21.853
> 
> 标签：ruby-on-rails-3

我正在关注超级简单身份验证的 rails cast [http://railscasts.com/episodes/21-super-simple-authentication](http://railscasts.com/episodes/21-super-simple-authentication) 我正在使用 rails 3 所以我正在更改路由和控制器的名称与用户的会话真的是所有的变化。

我遇到了一个问题，在截屏视频中它在 new.html.erb 文件中具有以下内容。

```
<div class="content">
    <p>
        <% form_tag user_path do %>
            Password: <%= text_field_tag :password %>
        <%end%>
    </p>
</div> 
```

当我尝试这个时，我得到一个错误`http://localhost:3000/login`

> 没有路由匹配 {:action=>"show", :controller=>"user"}

当我使用 rake 查找路线时，我得到了这个。

```
 user_index GET    /user(.:format)               user#index
                  POST   /user(.:format)               user#create
         new_user GET    /user/new(.:format)           user#new
        edit_user GET    /user/:id/edit(.:format)      user#edit
             user GET    /user/:id(.:format)           user#show
                  PUT    /user/:id(.:format)           user#update
                  DELETE /user/:id(.:format)           user#destroy
            login        /login(.:format)              user#new
           logout        /logout(.:format)             user#destroy 
```

在我的路线文件中，我有这个。

```
 resources :user 
  match 'login' => 'user#new'
  match 'logout' => 'user#destroy' 
```

所以我不知道屏幕投射文件如何与 <% form_tag user_path do %> 行一起使用，如果我将其更改为**new_user_path**那么它会将我带到 new.html.erb 页面。但是现在 Password: <%= text_field_tag :password %> 字段没有显示在页面上。我在这里做错了什么。

**更新：**

因此，我创建了一个名为会话的控制器，而不是我的用户控制器，它应该没有区别，但基于 SHUMAcupcake 评论我做错了，我决定删除我的用户控制器并创建一个称为会话的控制器，就像截屏一样。正如我所怀疑的那样，同样的问题也会发生。现在唯一的区别是我的所有路线都被命名为会话而不是预期的用户。

是的，我已经重新启动了我的应用程序，但仍然是同样的问题。请查看我的 rake routes 输出，您可以看到 user_path 将转到 show 操作，而不是它应该去的地方，根据截屏视频，它打算去创建操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T22:04:44.377

您需要做的是在路径变量中使用复数，并将 form_tag 方法的结果写入 HTML，如下所示：

```
<%= form_tag users_path do %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T22:41:36.540

尝试这个：

```
map.login 'login', :controller => 'users', :action => 'new' 
map.logout 'logout', :controller => 'users', :action => 'destroy' 
```

并检查您的用户映射中是否有显示视图，并检查您的用户控制器中是否有显示方法。

在 users_controller.rb 中是这样的：

```
def show
   #some code
end 
```

# objective-c - NSFetchedResultsController 部分按对象数量

> ID：13849631
> 
> 赞同：0
> 
> 时间：2012-12-12T22:15:24.067
> 
> 标签：objective-c, cocoa-touch, core-data, nsfetchedresultscontroller

我`NSFetchedResultsController`在一个部分中有大约 30 个对象。由于设置的方式，我无法在所述对象上设置唯一的部分名称（我有一个网格视图，其中行和列由数据源给出，用户可以删除任何单元格）。

有没有办法强制`NSFetchedResultsController`每部分返回 5 个对象？

# iphone - 在形状内绘制水平线性渐变

> ID：13849634
> 
> 赞同：0
> 
> 时间：2012-12-12T22:15:32.653
> 
> 标签：iphone, ipad, core-graphics

我有以下代码根据给定的角度绘制三角形。
如何用线性（水平）渐变填充这个形状？

```
- (void)drawRect:(CGRect)rect
{
    CGContextRef context = UIGraphicsGetCurrentContext();

    // Create Lines
    CGPoint startPt = CGPointMake(self.frame.size.width / 2.0, self.frame.size.height);

    CGContextSetLineWidth(context, width_);
    CGContextMoveToPoint(context, self.center.x, self.center.y);
    CGPoint addLines[] =
    {
        startPt,
        CGPointMake(radius_ * cos(angle_) + startPt.x, radius_ * sin(angle_) + startPt.y),
        CGPointMake(radius_ * cos(angle_) + startPt.x, startPt.y),
        startPt
    };

    CGContextAddLines(context, addLines, sizeof(addLines)/sizeof(addLines[0]));
    CGContextStrokePath(context);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T18:36:52.740

将形状用作剪切路径，然后用渐变填充形状的边界框。在那之后抚摸它。

# php - 如何在 COLUMN-VALUE 的表中选择上一行/下一行

> ID：13849636
> 
> 赞同：0
> 
> 时间：2012-12-12T22:15:32.687
> 
> 标签：php, html, mysql

我有一个 SQL 数据库，表名：视频，我在其中存储视频。此表中的相关列是：id、the`category_id`和`video_id`。

id，是一个唯一的id，每一个视频不管哪个类别都有不同的id，同样的id不可能不管类别。

`category_id`也是唯一的，并且每个都被分配到一个类别，例如，Funny 是 1 。

对于此`video_id`列，可能有多个具有相同值的行。例如，如果一个视频托管在 YouTube 上，而完全相同的视频托管在 Vimeo 上。然后我们有镜子。真的，你在想什么？好吧，数据库只将嵌入代码存储到视频中，由页面调用。

出现视频的客户端页面仅通过分配的 id 来回忆他们的视频；比方说： - 有人打开有趣的类别。然后客户端查看：from tablename videos where `category_id`is 1\. - 所以假设有一个名为“Funny Fails”的视频，有两个镜像 YouTube 和 Vimeo，所以两行都有不同的 id，但相同`video_id`。YouTube 的 Funny Fails 镜像由于某种原因得到了 id 1，而 Vimeo 得到了 id 2（为简单起见），当然这两个视频都有`video_id`1 并且在`category_id`1 内。

客户端 .php 只是查找 id，例如：`/category_detail.php?id=1`或`/videopage.php?id=1`.

现在您很可能了解数据库以及客户端如何从数据库中检索信息。

我们要做的只是在客户端的页面中添加两个选项。这些是上一个视频和下一个视频。

假设我们正在浏览 ID `video_id`110、123 里面`category_id`1 它没有镜像。

如果我们按 Previous Video 它应该寻找：`video_id`122 inside `category_id`1 和动态部分，id 本身。此 ID 也是构成页面的链接的一部分，例如，这与后面的 id 相同`.php?id=XXX`。

我一直在挣扎，我知道解决方案要简单得多，但不知何故我无法做到。

还应该有一个 Next Video 选项，它显然会`video_id`在同一个 124 中寻找`category_id`，无论是否有镜子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:44:24.067

以前的：

```
 SELECT * FROM videos WHERE category_id = 1 AND video_id < 123 
  ORDER BY video_id DESC LIMIT 1; 
```

下一个：

```
 SELECT * FROM videos WHERE category_id = 1 AND video_id > 123 
  ORDER BY video_id ASC LIMIT 1; 
```

正如比尔正确所说，您可以`UNION`使用它们，因此您只需查询一次。

# php - session_destroy() 根本不工作

> ID：13849639
> 
> 赞同：2
> 
> 时间：2012-12-12T22:15:44.077
> 
> 标签：php, session, login, wamp

> **可能重复：**
> [WAMP 上的登录系统](https://stackoverflow.com/questions/13849215/login-system-on-wamp)

我最近将我的网站文件从另一台服务器切换到 WAMP 服务器上的本地主机。在另一台服务器上一切正常，但在这台服务器上，所有登录 php 会话代码都搞砸了。]

例如：

```
<?php 
session_start();
session_destroy();
header('Location:login.php');
?> 
```

那是注销代码，它曾经在另一台服务器上工作正常，但现在，它甚至没有破坏会话变量。我知道是因为，一旦我点击注销，它应该不会让我回到登录页面，但它只是停留在同一页面，因为它位于登录页面的顶部......

```
if(!session_start('mypassword')){
    /*If No session registered go here*/
} else {
    header("location:login_success.php");
} 
```

它仍然说会话已注册，即使在我注销后也是如此。请帮助，我是新手，非常感谢您的帮助，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:28:24.293

永远不要在会话中输入密码！要创建会话：

```
 //start session (must)
 session_start();

 // set session 
 $_SESSION['sessionname'] = 'value';

 // unset session by name
 unset($_SESSION['sessionname']);

 // unset all
 session_destroy(); 
```

# php - PHP 弄乱了字母 ä、ö、ü 等

> ID：13849640
> 
> 赞同：2
> 
> 时间：2012-12-12T22:15:51.210
> 
> 标签：php, mysql

> **可能重复：**
> [一直到 UTF-8](https://stackoverflow.com/questions/279170/utf-8-all-the-way-through)

所以我将一些数据保存在 mysql 数据库中，并用“元音变音”存储在那里。当我谈到变音符号时，我指的是这些德语字母：ö、ä、ü 及其大写的挂件。

所以现在我通过 PHP 执行查询，如下所示：

```
$query = "SELECT * FROM tcms_references WHERE id =".$row->id;
$erg = mysql_query($query);
$rowt = mysql_fetch_object($erg);
foreach($row as $x) {
echo $x
} 
```

现在，我的数据库中没有保存像“Baumfällung”这样的德语单词。PHP 查询被执行并在屏幕上显示为“BaumfÃ¤llung”。

我的问题：我在哪里可以将 UFT-8 设置为 PHP 中的标准？有什么功能什么的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T22:21:11.897

您需要将mysql连接设置为utf8

```
mysql_query ('SET NAMES UTF8;');
mysql_query ('SET COLLATION_CONNECTION=utf8_general_ci;');
mysql_client_encoding($conn);// where $conn is your connection 
```

将页面另存为 utf8 并将其放在页面头部

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T22:21:52.313

尝试将mysql表设置为utf8，否则使用

```
 echo utf8_encode($x); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T22:19:31.100

这可能不是 PHP 问题。您应该检查数据库中使用的字符排序规则是否与您用来收集这些特殊字符的字符排序规则相匹配。如果这些不匹配，则数据库无法保存您请求的正确值。

# c# - 在 Windows Azure VPS 上对高 I/O 应用程序进行负载平衡

> ID：13849642
> 
> 赞同：1
> 
> 时间：2012-12-12T22:16:14.450
> 
> 标签：c#, azure, load-balancing

我目前正在尝试掌握整个云计算，并且我已经在 Stackoverflow 上阅读了很多类似的问题。

我正在尝试构建的将是一个高 I/O 存储服务。它将通过 FTP 检索很多（我们一直在谈论 50 - 100 Mbit/sec）的数据，然后将对收到的一些数据进行一些后处理。

该应用程序目前是用 C# 编写的，用于部署在 Windows Azure VPS 上。我正在做自己的简单 FTP 服务器，以实现最高级别的控制和安全性（例如我自己的身份验证过程）。这不是问题，因为我已经非常熟练地使用套接字服务器和高性能 .NET 应用程序。

但是始终作为单个实例运行。一直以来，它都是为了提高在某些 VPS 服务器上运行的单个 Windows 服务/控制台应用程序的性能。

不过这次我必须面对事实。无论该 VM 将变得多大，如果数据要增加（它由客户生成，因此更多的客户 = 更多的数据！），数据会迅速淹没服务器的 I/O 容量。

那么，您将如何在云中进行负载平衡呢？我已经阅读了有关“云工作者”的“云服务”等内容，但我认为它变得如此**复杂**，而且当我要使用一项服务的存储时，定价似乎如此模糊，数据库来自另一个和第三种服务的工作，同时考虑带宽和其他东西。我真的很想在我知道并且有信心与之合作的环境中保持简单。所以VPS就是这样。

但是我应该如何做负载平衡呢？这是我第一次，我知道这是一个雄心勃勃的项目，但我真的只是想学习！

总结一下：负载平衡在 Windows Azure VPS 上运行的用 C# 编写的自定义 FTP 应用程序。应用程序/服务的每个实例都应该可以访问相同的存储和数据库。不需要实例间通信。

所以把你得到的一切都扔给我，我会努力跟上的。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T15:50:35.790

## 角色

您似乎对角色是什么感到有些困惑，所以让我先暂时搁置一下。角色基本上是 VM 的模板，它定义了代码和配置。这有点像 Puppet 或 Chef 脚本。有几种类型的角色。

*   **VM 角色**是您可以获得的最“裸机”。你给 Azure 一个 VM 映像，他们会为你启动它。您负责其中的一切，包括操作系统更新和维护。这与 Amazon EC2 所做的相差不远。
*   **工人角色**不是裸机。它们离 Windows 服务不远。您上传的是代码和配置包，而不是整个 VM 映像。Azure 设置了一个普通的 Windows Server 操作系统，将你的代码复制到它，并调用一个入口点。从那里你可以做任何你想做的事 - 接受连接，启动新线程或进程等。微软负责操作系统级别的补丁，他们可能会重新映像你的虚拟机以随时执行，所以你不想永久将数据存储在驱动器上。
*   **Web 角色**基本上是一个辅助角色，但 Azure 还安装 IIS 并配置您请求的任何 IIS 站点和虚拟应用程序。

## 负载均衡

在简单的情况下（例如，Web 服务），Azure 将在您的机器之间自动对传入请求进行负载平衡。它应该同样适用于涉及来自互联网的请求的任何服务。我认为使用 FTP PASV 模式可能会更复杂，但我不是该主题的专家。Azure 上有一个[用于 FTP 的开源项目](http://ftp2azure.codeplex.com/)，以及[有关该主题的博客文章](http://blog.maartenballiauw.be/post/2010/03/15/Using-FTP-to-access-Windows-Azure-Blob-Storage.aspx)。也许他们的方法可以应用于您的自定义 FTP 软件。

根据您所说，我认为您可以为您的 FTP 服务器使用 Worker Role。在您的 WorkerRole.cs 文件中，您只需启动您的 FTP 代码，然后就可以离开了。您还可以生成线程或进程，让每个 VM 兼作图像处理器。如果您愿意，您可以在 VM 角色中完成所有这些工作，这只是需要您完成更多工作的问题。

## 贮存

这是 Blob 存储的教科书用例。上传的文件肯定应该去那里。听起来不同的计费模式让您有些困惑，但 Blob 存储非常便宜。您可以查看[Azure 定价计算器](https://www.windowsazure.com/en-us/pricing/calculator/?scenario=full)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T22:19:16.350

使用 IIS 应用程序请求路由 (ARR) 设置 webrole。

# c# - ODBCDataReader.Read() 性能问题

> ID：13849645
> 
> 赞同：0
> 
> 时间：2012-12-12T22:16:23.827
> 
> 标签：c#, .net, odbc

我有一个使用 ODBCDataReader 从数据库中读取数据的应用程序。该`ODBCDataReader rdr = com.ExecuteReader()`行执行得非常快，但是 rdr.Read() 的第一次迭代需要非常长的时间（15 秒或更长时间）来处理。每次连续迭代都快得多（不到一秒。）

返回的行数相对较少（<100），但每行大约有 170 列。

我很困惑为什么这只发生在第一次通过 .Read() 命令时。基本上，我将数据从一个数据库移植到另一个数据库，并为数据读取器返回的每条记录构建一个插入查询。当数据读取器第一次读取时，是否在幕后做了一些事情，有没有办法解决这个问题？此导入应该只需要一两分钟，并且由于这个问题需要几个小时！相关代码如下，但可能无助于解决此问题：

```
 OdbcDataReader odbcRdr = odbcCom.ExecuteReader();
    while (odbcRdr.Read())
    {
         //Process the record and insert into the new database.
    } 
```

正如我所说，一旦它通过了 odbcRdr.Read() 的第一次迭代，代码就会在不到一秒的时间内飞行并插入所有记录。

# parallel-processing - 并行化 - 为什么睡眠只暂停一次？

> ID：13849649
> 
> 赞同：0
> 
> 时间：2012-12-12T22:16:30.000
> 
> 标签：parallel-processing, go, goroutine

为什么只等待第一个 goroutine

`func Sleep(d Duration)`
[http://golang.org/pkg/time](http://golang.org/pkg/time)
“睡眠暂停当前的 goroutine 持续时间 d。”

但其余的直接执行。我认为导致渠道`c chan string`，但我不了解两者之间的行为。

[我的示例 GoPlayground](http://play.golang.org/p/S1y-4YMESY)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T23:14:33.827

你所有的 goroutine 都是同时运行的，所以它们都同时休眠 4 秒，因此它们都同时结束。

你这样称呼他们。这`go`意味着所有`getHostName`功能一次运行。

```
for i := 0; i < max; i++ {
    go getHostName(haveHost, ipadresse_3, i)
} 
```

这意味着所有的睡眠同时发生

```
func getHostName(h chan string, ipAdresse string, n int) {

    //Here!!!
    time.Sleep(4 * time.Second)
    ip := ipAdresse + strconv.Itoa(n)

    //ip, ok := net.LookupAddr(ip)

    if false {
        h <- ip + " - "
    } else {
        h <- "error" + strconv.Itoa(n)  
    }
} 
```

所以他们都在同一时间完成。

# javascript - 来自 CDN 的 Javascript 资产下载进度

> ID：13849651
> 
> 赞同：0
> 
> 时间：2012-12-12T22:16:41.427
> 
> 标签：javascript, cdn

我有一个需要大量资源（音频/图像/视频）的基于 Web 的应用程序。以前我一直在同一台服务器上托管所有内容，并使用[PreloadJS](http://www.createjs.com/#!/PreloadJS)获取所有资源并下载它们（同时显示一个不错的进度条）。

我现在正在迁移到内容交付网络 (CDN) 来托管所有这些资产，但需要将基本 Web 应用程序保留在我的服务器上。

所以我打开了我的应用程序`webapp.com`和所有资源`cdn.webapp.com`- 我的问题是如何从另一个域加载所有这些资源并同时查看进度？是否有处理此问题的库，或者我是否需要编写一些代码来订阅`onload()`每个资产的功能，并且只有在下载所有内容后才能继续？

（由于跨域 ajax 请求，我无法再使用 PreloadJS 下载所有内容）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:35:09.513

最后（因为没有人来拯救我）我通过这样做实现了它：

图像/资产已打开`cdn.webapp.com`并像往常一样包含在页面的 HTML 中。然后 Javascript 将运行并将这些图像所在的 div 设置为没有高度。这仍然允许加载图像，但不会在页面上呈现它们。

然后我找到了一个 JS 库（[https://github.com/desandro/imagesloaded](https://github.com/desandro/imagesloaded)）来注册这些图像的回调，以便在图像完全下载时通知我。

# html - 如何在 CSS 渲染中解释 HTML 多个类名？W3C 对此有何评论？

> ID：13849655
> 
> 赞同：2
> 
> 时间：2012-12-12T22:17:00.783
> 
> 标签：html, css

关于 HTML*类*属性分配了两个或多个类名，即

```
<tag class="a b">....</tag> 
```

我可以使用不同的浏览器对其进行测试——参见[http://jsfiddle.net/PP9yf/1/](http://jsfiddle.net/PP9yf/1/)上的测试或[这个问题/答案](https://stackoverflow.com/a/3066365/287948) ——并推断出一个常识规则：

> *`class="a"`如果已定义则使用，或者如果`class="b"`已定义则使用，或者如果两者都定义则*使用两者……并且，当同时使用两者时，如果它们分配相同的属性，*则最后一个 CSS 定义会覆盖其他 CSS 定义*。

因此，我们可以解释例如`class="a b"`必须与 相同`class="b a"`。

**但这是W3C官方的解释吗？**

W3C 标准哪里有说这个规则的？

* * *

PS：我从[另一个问题](https://stackoverflow.com/q/13808846/287948)开始，但我的动机是软件开发。我需要这个规范的答案来开发类似于[emogrifier](http://www.pelagodesign.com/sidecar/emogrifier/)等的软件。

示例：[CssToInlineStyles](https://github.com/tijsverkoyen/CssToInlineStyles)需要此更正...但只需要“更正”如果有 W3C 标准并且说软件错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T22:26:54.607

您的发现是正确的，*它们*是 W3C 官方规范。

元素本身的两个类具有相同的“起源”。此外，选择器具有相同的“权重”。由于这些规则和其他规则不能确定哪种样式具有优先权，因此样式表的顺序决定了否决规则。

请参阅[级联样式表，级别 1，第 3.2 段](http://www.w3.org/TR/REC-CSS1/#cascading-order)，了解指定此内容的规则。3.2.1 到 3.2.4 不区分这两种风格中的任何一种。占优势的是 3.2.5。

我将在这里引用规则，尽管您可能需要阅读文档以将它们置于上下文中。

> 冲突规则是 CSS 机制固有的。要找到元素/属性组合的值，必须遵循以下算法：
> 
> 1.  查找适用于相关元素/属性的所有声明。如果选择器与相关元素匹配，则应用声明。如果没有声明适用，则使用继承的值。如果没有继承值（'HTML' 元素和不继承的属性就是这种情况），则使用初始值。
> 2.  按显式权重对声明进行排序：标记为“！important”的声明比未标记（正常）声明的权重更大。
> 3.  按来源排序：作者的样式表会覆盖读者的样式表，而读者的样式表会覆盖 UA 的默认值。导入的样式表与从中导入的样式表具有相同的来源。
> 4.  按选择器的特异性排序：更具体的选择器将覆盖更通用的选择器。要找到特异性，请计算选择器中的 ID 属性数 (a)、选择器中的 CLASS 属性数 (b) 以及选择器中的标签名称数 (c)。连接三个数字（在具有大基数的数字系统中）给出了特异性。
> 5.  按指定顺序排序：如果两个规则具有相同的权重，则指定的后者获胜。导入样式表中的规则被认为在样式表本身的任何规则之前。

## 总结

我们可以翻译W3C CSS1 rule 3.2 itens中的常识规则itens，

*   «*如果已定义，则使用 class="a"，如果已定义，则使用 class="b"，如果两者都已定义，则使用 BOTH* » 等同于 3.2.1，«**如果选择器与相关元素匹配，则应用声明**» .

*   «*最后一个 CSS 定义覆盖了其他的*»等同于 3.2.5 ，«**后者指定获胜**»。

新标准没有改变：CSS2、CSS2.1 和 CSS3 使用相同的规则。

# javascript - 通过javascript将onsubmit添加到表单

> ID：13849659
> 
> 赞同：5
> 
> 时间：2012-12-12T22:17:08.177
> 
> 标签：javascript, google-analytics, dom-events, chargify

**您将如何仅通过 Javascript 将 OnSubmit 属性插入表单？**

我对javascript很陌生，所以如果您能够提供详细的示例代码，那将是最有帮助的！

**情况如下：**我通过 Chargify（一个支付平台）使用托管注册页面来处理我的应用程序的信用卡，然后将用户发送回我自己的感谢/确认页面。

由于更改域（我的域 -> Chargify.com -> 我的域），通过谷歌分析跟踪整个渠道非常难以捉摸，因为信用卡页面由 Chargify 在他们自己的域上托管。

**我快接近了：**我已经能够进行跨域跟踪（chargify.com 页面已登录 Google Analytics），并且可以通过将以下 onclick 属性添加到我的注册链接来从我的域链接到 chargify：

```
onclick="_gaq.push(['_link', 'http://my-domain.chargify.com/subscriptions/new']); return false;" 
```

但是，我不能在回来的路上做同样的事情（Chargify -> 确认页面），因为我无法访问 Chargify 托管的支付页面代码，并且因为用户是通过表单提交而不是通过表单提交到我的确认页面的正常链接。

**部分解决方案（需要您的帮助才能完成）：** Chargify 允许为其托管页面提供多种选项，其中之一是添加自定义 javascript，这些 javascript 将插入到 `</body>`标签中的 `<script>`标签之前。

我在 Google Analytics 文档中找到了一些关于如何链接页面的资源，并将以下内容添加到 Chargify 表单标签可能会起作用：（ `onsubmit="_gaq.push(['_linkByPost', this]);"` 来源：[https ://developers.google.com/analytics/devguides/collection/gajs/methods/ gaJSApiDomainDirectory#_gat.GA_Tracker_._linkByPost](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiDomainDirectory#_gat.GA_Tracker_._linkByPost) )

form 标签目前没有 onsubmit 属性，只是这样： `<form action="/my_product/subscriptions" class="new_submission" id="hosted_payment_form" method="post">`

**有没有办法使用 Javascript 简单地将这个属性附加到表单标签？** 如果您能够提供我应该在 `<script>`标签内插入什么代码的详细示例，那将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T22:42:56.063

```
window.onload = function() {
    var form = document.getElementById('hosted_payment_form');
    form.onsubmit = function() {
        _gaq.push(['_linkByPost', this]);
    }
} 
```

我相信上面的例子与你需要的相似。我们使用 document.getElementById 来获取对您的表单的引用。然后将 onsubmit 属性设置为您希望在提交表单之前执行的代码。如果在呈现页面之前执行此 JavaScript，请记住将其放在窗口 onload 事件中，以确保构建表单。

# c# - “文件”不包含“删除”的定义

> ID：13849669
> 
> 赞同：1
> 
> 时间：2012-12-12T22:17:34.683
> 
> 标签：c#, asp.net, file, delete-file

我刚开始学习 ASP.NET。我正在使用 VWD 2010 Express 并尝试通过 GridView 中的删除按钮删除文件。

查看此处和其他地方的示例，一种方法似乎与此类似：

```
using System.IO;

public void GridView1_RowDeleting(object sender, GridViewDeleteEventArgs e)
{
    GridViewRow row = (GridViewRow)GridView1.Rows[e.RowIndex];
    string filePath = row.Cells[3].Text;
    File.Delete(filePath);        
} 
```

如果这是一个愚蠢的菜鸟问题，我深表歉意，但我被困在最后一行，出现错误： `'File' does not contain a definition for 'Delete'`

我希望这是足以让某人指出我哪里出错的信息，但如果需要可以发布更多代码。

-EDIT- 为清楚起见添加了解决方案资源管理器图像：

![在此处输入图像描述](../Images/16a1492bafba236b19375bef39e329ac.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T22:32:39.663

好吧，这似乎`File`意味着其他的*东西*`System.IO.File`。您可以通过以下方式使其明确：

```
global::System.IO.File.Delete(filePath); 
```

...但是您应该真正弄清楚*没有*`File`它意味着什么。

 *如果您只是书写`File`并将鼠标悬停在它上面，您应该能够获得更多信息。也许是同名的房产？

一旦你发现问题出在哪里，你就可以决定是否重命名它，或者使用上述方法使其完全明确。*

# apache - 使用映射忽略大小写的 RewriteMap

> ID：13849673
> 
> 赞同：1
> 
> 时间：2012-12-12T22:17:45.453
> 
> 标签：apache, mod-rewrite

当前的 vhost_config.conf 具有有效的映射和重写规则，如下所示。

```
1: RewriteMap vanityURL txt: vanity_map.txt
2: RewriteCond ${vaintyURL:$1|not-found} ^(.+)$
3: RewriteCond %1 ~^not-found$
4: RewriteRule ^/(.*) /${vanityURL:$1|/$1} [L] 
```

我需要做的是让映射的 URLS 忽略大小写。

你会说的第一件事是“添加`[NC]`”，你认为这是正确的，但它没有任何效果。

我已经看到有关将所有映射都输入为小写的问题，但这并不能解决有人输入`/BlackFriday`或`/BlaCKFridAY`（无论出于何种原因可能被迫做这样的事情）的问题。

我遇到的问题是使用诸如

```
 RewriteRule ^/(.*) /${vanityURL:$1|/$1} [L, NC] 
```

没有影响。

我是否需要`[NC]`在其中一种条件或地图声明中更早地使用标志？

为什么第 4 行的“忽略大小写”标志不起作用？还有什么我想念的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T18:25:05.687

这在这里有效：

列出 'o 网址`list.txt`

```
 test1 POMPOM
 test2 pompom
 test3 PomPom 
```

apache主机配置：

```
RewriteEngine On
RewriteMap lc int:tolower
RewriteMap test txt:/var/www/list.txt
RewriteRule /(.*)$ /${test:${lc:$1}|$1} [R=301] 
```

（外部重定向，因此在此测试中更容易观察到）

这表示：

```
example.com/TEST1 
example.com/test1
example.com/TeSt1 
```

...全部重定向到`example.com/POMPOM`

```
example.com/TEST2 
example.com/test2
example.com/TeSt2 
```

...全部重定向到`example.com/pompom`

...因此保留了替换的情况，

# c# - ReferenceError：getMessage 未定义

> ID：13849676
> 
> 赞同：0
> 
> 时间：2012-12-12T22:17:50.050
> 
> 标签：c#, jquery, asp.net, ajax, web-services

我正在构建一个类似于 facebook 的消息传递区域，并且我正在使用带有 jquery 的 ajax 和 asmx Web 服务来将 html 提供给客户端。我的 li click 事件在使用 c# 在页面加载时首次加载内容时起作用，但是当 ajax 运行并刷新来自 Web 服务的内容时，li 事件不再起作用。

这是从 Web 服务返回的 html 示例

```
<ol class="messagesrow" id="messages">
<li id="2345">
<div>Test Element</div>
</li>
</ol> 
```

Web 服务标记

```
[WebMethod]
public string GetMessagesByObject(string id, string objectid, string userid, string timezone)
{
    string output = string.Empty;

    try
    {
        StringBuilder str = new StringBuilder();

        DataSet results = results from store procedure

        str.Append("<ol class=\"messagesrow\" id=\"messages\">");
        for (int i = 0; i < results.Tables[0].Rows.Count; i++)
        {
            DataRow row = results.Tables[0].Rows[i];

            DateTime date = Convert.ToDateTime(row["CreateDate"].ToString()).AddHours(Convert.ToDouble(timezone));

            if (!TDG.Common.CheckStringForEmpty(row["ParentMessageID"].ToString()))
            {
                str.Append("<li id=\"" + row["ParentMessageID"].ToString() + "\">");
            }
            else
            {
                str.Append("<li id=\"" + row["MessageID"].ToString() + "\">");
            }

            str.Append("<div style=\"width:100%; cursor:pointer;\">");

            str.Append("<div style=\"float:left; width:25%;\">");
            if (!TDG.Common.CheckStringForEmpty(row["ImageID"].ToString()))
            {
                str.Append("<img src=\"/Resources/getThumbnailImage.ashx?w=48&h=48&id=" + row["ImageID"].ToString() + "\" alt=\"View Profile\" />");
            }
            else
            {
                str.Append("<img src=\"/images/noProfileImage.gif\" alt=\"View Profile\" />");
            }
            str.Append("</div>");

            str.Append("<div style=\"float:left; width:75%; padding-top:4px;\">");
            str.Append("<strong>" + row["WholeName"].ToString() + "</strong>");
            str.Append("<br />");
            if (row["BodyMessage"].ToString().Length < 35)
            {
                str.Append("<span class=\"smallText\">" + row["BodyMessage"].ToString() + "</span>");
            }
            else
            {
                str.Append("<span class=\"smallText\">" + row["BodyMessage"].ToString().Substring(0, 35) + "</span>");
            }
            str.Append("<br /><span class=\"smallGreyText\">" + String.Format("{0:g}", date) + "</span>");
            str.Append("</div>");

            str.Append("</div>");
            str.Append("</li>");
        }
        str.Append("</ol>");

        output = str.ToString();
    }
    catch (Exception ex)
    {
        throw ex;
    }

    return output;
} 
```

jQuery 标记

```
$(document).ready(function () {        

    $("ol#messages li").click(function () {
        var id = $(this).attr("id");

        getMessage(id);
    });
});

function getMessage(id) {

        var timezone = $('#<%= hdfTimezone.ClientID %>').val()
        var userid = $('#<%= hdfUserID.ClientID %>').val()

        $.ajax({
            type: "POST",
            async: false,
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            url: "/Resources/MessageWebService.asmx/GetMessage",
            data: "{'id':'" + id + "','timezone':'" + timezone + "','userid':'" + userid + "' }",
            success: function (data) { 
                $('#<%= hdfMessageID.ClientID %>').val(id);
                $('#<%= ltlMessages.ClientID %>').html(data.d);
            },
            error: function (data) {
                showError(data.responseText);
            }
        });

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:36:06.203

由于您的列表项是动态的，因此您应该将事件委托给 ol.

```
$(document).ready(function () {        

    $("#messages").delegate("li","click",function () {
        getMessage(this.id);
    });

}); 
```

您得到的错误不`ReferenceError: getMessage not defined`应该发生在给定的代码中。

# php - PHP：随机数组，所以没有一个值像对应的那样

> ID：13849677
> 
> 赞同：2
> 
> 时间：2012-12-12T22:17:49.473
> 
> 标签：php, arrays, shuffle

有一个带有名称的数组，例如：

$donalds_nephews = array('Huey', 'Dewey', 'Louie');

```
array
(
    [0] => Huey
    [1] => Dewey
    [2] => Louie
) 
```

我想对这个数组进行洗牌，但要确保原始数组的任何值都没有与洗牌后的值相同的键。

```
$donalds_nephews_shuffled = shuffle($donalds_nephews); 
```

这可能导致 6 种可能的排列：

1.  **休伊**、杜威、路易
2.  **休伊**、路易、杜威
3.  杜威、路易、休伊
4.  杜威、休伊、**路易**
5.  路易、**杜威**、休伊
6.  路易、休伊、杜威

第一、第二、第四和第五不得是结果。

最好的方法是什么？这是给秘密圣诞老人的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T22:28:37.290

对原始数组进行洗牌，然后对其进行复制并将所有条目移动一次，然后将两者重新匹配以获得匹配项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T22:53:00.457

只是因为我的秘密圣诞老人需要这个:)

```
<?php

    function compareArrays($original, $shuffled){   
        for($i = 0; $i < count($original); $i++ ){
            if($original[$i] == $shuffled[$i]){
                return false;
            }
        }
        return true;
    }

    $donalds_nephews = array('Huey', 'Dewey', 'Louie','Igor','Stephan');

    //avoid loops
    for($j = 0; $j < 50; $j++){
        $shuffled = $donalds_nephews;
        shuffle($shuffled);
        $good = compareArrays($donalds_nephews, $shuffled);

        if($good) break;
    }

    if($good){
        echo "here we go!\n";
        foreach($shuffled as $k => $v){
            echo "$k => $v \n";
        }
    }
    else { 
        echo "try again \n";
    }

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T22:41:00.797

> 这是给秘密圣诞老人的。

然后从更好的算法开始。目前，您似乎在推断关键是当前的给予者，而价值是当前的接收者（反之亦然）。这需要额外的检查（以及可能的重新洗牌），以确保没有人最终给自己送礼物。

但是，如果您只是将其视为一个有序的姓名列表，这样每个条目都会提供给列表中的下一个人：

```
$victims=array('Huey', 'Dewey', 'Louie');
shuffle($victims);
$giver='';
foreach($victims as $receiver) {
  if ($giver) print "$giver gives to $receiver\n";
  $giver=$receiver;
}
$receiver=array_shift($victims);
print "$giver gives to $receiver\n"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T22:33:23.307

不要试图将所有这些都放在一个函数中，从而使事情变得复杂。

这是你的伪代码：

```
$givers  = array( 'Huey', 'Dewey', 'Louie' );
$getters = $givers;

foreach ( $givers as $giver ) {
    do {
        pick a random $getter from $getters;
    } until $getter <> $giver;
    delete $getter from $getters;
    print "$giver gives to $getter\n";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-01T22:51:54.980

这是一个老问题，但你问的是最好的方法，那么这个怎么样？

```
function santaYates($array) {
    $returnArray = array_values($array); // Cause we need a clean numeric array
    $secure = false;
    for($i = count($returnArray) - 1; $i > 0; $i--) {
        $r = mt_rand(0, $i-1); //subtract 1 from $i to force a new place.
        $tmp = $returnArray[$i];
        $returnArray[$i] = $returnArray[$r];
        $returnArray[$r] = $tmp;
    }

    return $returnArray;
} 
```

[它的工作原理与Fisher-Yates shuffle](https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)非常相似。

只有一点点不同：我们允许使用相同的密钥，所以每个条目都会得到一个新的位置（因为我们在执行随机化步骤时从 $i 中减去 1）。

[工作演示](http://sandbox.onlinephpfunctions.com/code/7c7c115b6f4a87e3367ff2eb9ade07d00495155e)

# php - 我对这个基于 crypt() 的 bcrypt 身份验证做错了什么？

> ID：13849681
> 
> 赞同：2
> 
> 时间：2012-12-12T22:18:01.583
> 
> 标签：php, bcrypt, crypt

我已经从 SO 上的一堆非常有用的答案中逐字逐句地抄写了这段代码，所以我无法理解出了什么问题。

首先，这是我创建用户帐户的功能：

```
function BFcrypt($password,$cost)
{
    $chars='./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
    $salt=sprintf('$2a$%02d$',$cost);
    for($i=0;$i<22;$i++) $salt.=$chars[rand(0,63)];
    return array(
            'salt'=>$salt,
            'hash'=>crypt($password,$salt)
            );
} 
```

然后，当用户登录时：

```
case 'login':
    $login  =$_POST['login'];
    $pwd    =$_POST['pwd'];
    $sql    ="SELECT * FROM `users` WHERE `users`.`login`='$login' LIMIT 1;";
    if($query = mysql_query($sql)){
            $row=mysql_fetch_assoc($query);
            print_r($_POST);
            print_r($row);
            $hash = $row['password'];
            if(crypt($pwd,$hash)==$hash){
                echo"SUCCESS";
            }else{
                echo"FAILURE";

            }
    } 
```

登录功能似乎总是失败。我已将其设置为显示 $pwd、$hash 和 crypt($pwd,$hash)，并且由于某种原因，crypt($pwd,$hash) 似乎永远不会 == $hash。

这是示例用户的数据库中的一行（我现在正在记录盐，尽管我知道它应该包含在哈希中：

```
'id'=>'680',
'login'=>'argh',
'password'=>'$2a$10$BWZAX7wrwQp5iyK4kh6VLunqy82eiXg7GaDs6mJLqdgT5s2qiUqYW',
'salt'=>'$2a$10$BWZAX7wrwQp5iyK4kh6VL5',
'first'=>'argh',
'last'=>'argh',
'zip'=>'00000',
'email'=>'argh',
'date updated'=>'2012-12-12 16:05:29' 
```

我相信当我调用 crypt($pwd,$hash) 时，它会截断 $hash，只留下原来的 22 个字符的盐（加前缀），因此只要 $pwd 是相同的。我清楚地看到这里有一个问题，我正在记录的盐比最终附加到散列的盐长一个字符，但它是河豚的合适长度，无论如何，让它短一个字符不会'似乎没有帮助。

我无法弄清楚我在这里做错了什么。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T08:52:42.347

根据您自己的盐值和密码，`'argh'`我运行了一个小测试脚本：

```
$hash = crypt('argh', '$2a$10$BWZAX7wrwQp5iyK4kh6VL5');
// $2a$10$BWZAX7wrwQp5iyK4kh6VLuIzJHihvZTdfpRXNkTPVKkTiGfLDl1RO

var_dump(crypt('argh', $hash) == $hash);
// bool(true) 
```

问题似乎不在您显示的代码中。

您可以检查您的数据库字段宽度以存储密码哈希，该哈希值应至少为 60 宽。当你在做的时候，修复你的 SQL 注入漏洞（最好使用准备好的语句）。

# android - Android sqlite IN 语句查询

> ID：13849682
> 
> 赞同：1
> 
> 时间：2012-12-12T22:18:06.303
> 
> 标签：android, sqlite, android-sqlite

嗨，我是 sqlite 的新手，我在使用 IN (?) 语句时遇到问题

我的查询是

```
where = SQLDB.KEY_POINT_BOX_ID_COLUMN + " IN (?) ";
whereArgs2 = {myStrings} // myStrings = [1,2]
Cursor cursor2 = db.query(SQLDB.DATABASE_TABLE_POINT,
            result_columns, where, whereArgs2, null, null,
            null); 
```

此查询不返回任何内容，但如果我将上面的 where 语句更改为

```
where = SQLDB.KEY_POINT_BOX_ID_COLUMN + " = 1 "; 
```

我得到结果

如何正确使用 IN(?)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T23:17:40.260

我最终没有使用 whereArgs 而只是使用了这个语句

```
where = SQLDB.KEY_POINT_BOX_ID_COLUMN + " IN ("+idValues+") "; // idValues = '1','2' 
```

# javascript - 从 HTML 中的表创建 JavaScript 中的数组

> ID：13849684
> 
> 赞同：0
> 
> 时间：2012-12-12T22:18:18.460
> 
> 标签：javascript, html-table

我正在创建一个简单的购物车原型，并希望创建一个 JavaScript 数组，该数组将获取每个表格行的数量，将其乘以价格，并在最后一列中显示总数。数量值是用户输入数量的一种形式。我还想在总计中包含一个表格行。我有这两个功能，但我想知道如何使一个功能适用于整个表格：

```
<script type="application/javascript">
 function total()
 {
var qty = document.forms["qty"]["amount"].value;
var sum1 = qty * 5.99;
document.getElementById("total1").innerHTML="$" + sum1;
 }
</script>

<script type="application/javascript">
 function total2()
 {
var qty2 = document.forms["qty2"]["amount2"].value;
var sum2 = qty2 * 105.99;
document.getElementById("total2").innerHTML="$" + sum2;
 }
</script> 
```

桌子

```
<table id="cart">
<tr>
<th><b>Quantity</b></th>
<th><b>Item</b></th>
<th>Price</b></th>
<th><b>Total</b></th>          
</tr> 
<tr>
<td><form name="qty"><input type="number" name="amount" size="1" value="1" onchange="total1()"/></form></td>
<td>Product 1</td>
<td>$5.99</td>
<td id="total1"></td>
</tr>
<tr>
<td><form name="qty2"><input type="number" name="amount2" size="1" value="1" onchange="total1()"/></form></td>
<td>Product 2</td>
<td>$105.99</td>
<td id="total2"></td>
</tr>
<tr>
<td><b>Grand Total<b></td>
<td id="grand"></td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T23:31:22.537

Remove the inline `onchange` event from both `number` type inputs and paste following code inside `head` tags between `script` tags

```
(function grandTotal()
{
    var cart=document.getElementById('cart'),
    forms=cart.getElementsByTagName('form'), total=0;
    for(var i=0;i<forms.length;i++)
    {
        var amount=forms[i].getElementsByTagName('input')[0];
        var qty=amount.value;
        var tr=forms[i].parentNode.parentNode;
        var price=tr.getElementsByTagName('td')[2].innerHTML.substr(1);
        total+=parseFloat(qty)*parseFloat(price);
        amount.onchange=grandTotal;
    }
    document.getElementById('grand').innerHTML=total.toFixed(2);
})(); 
```

[**Example Here**](http://jsbin.com/esogav/1).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T22:41:41.183

您可以为每个表设置一个 id 并将其传递给函数：

```
<script type="application/javascript">
function total(i, value)
{
    var qty = document.forms["qty" + i]["amount" + i].value;
    var sum1 = qty * value;
    document.getElementById("total" + i).innerHTML="$" + sum1;
}
</script> 
```

因此，在 onChange 调用 total('1', '5.99') 和 total('2', '105.99')。

使用 JQuery 更容易使用 'this' + 选择器

# java - HashMap 用于调用方法 - 最小化 If Else 语句

> ID：13849686
> 
> 赞同：2
> 
> 时间：2012-12-12T22:18:21.053
> 
> 标签：java, hashmap, if-statement

我不知道如何绕过它。

需要帮助的细节请

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:24:57.213

您首先创建一个`Map<String, Shape>`，其中包含所有可能的命令作为键，以及相应的形状作为值：

```
Map<String, Shape> shapesByCommand = new HashMap<String, Shape>();
shapesByCommand.put("circle", new Circle());
shapesByCommand.put("sun", new Sun());
... 
```

然后，当您收到命令时，您会获得相应的形状并使其可见：

```
Shape shape = shapesByCommand.get(commands[0]);
if (shape != null && "visible".equals(commands[1])) {
    makeVisible(shape);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T22:43:48.867

我认为 JB Nizet 的回答可能会对您有所帮助，尤其是对于您问题的第一部分。但是，如果您正在寻求问题第二部分的通用解决方案，即如何根据要在 a 中查找的字符串调用函数`HashMap`，那么您可能想要做的是将[函数对象](http://en.wikipedia.org/wiki/Function_object#In_Java)存储在 that 中`HashMap`，并且然后在查找后调用该函数对象（您也可能会发现[此讨论](https://stackoverflow.com/questions/2599698/function-object-in-java)很有帮助）。

这是一个示例（使用字符串而不是形状）：

```
public interface Action {
    abstract void run(String s);
}

public static void main(String[] args) {
    HashMap<String, Action> actions = new HashMap<String, Action>();
    actions.put("visible", new Action() {
        public void run(String s) {
            System.out.println("Running 'visible' on: " + s);
        }
    });
    String input[];
    input = new String[2];
    input[0] = "sun";
    input[1] = "visible";
    actions.get(input[1]).run(input[0]);
} 
```

输出： `Running 'visible' on: sun`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T22:23:29.897

我不会在`HashMap`这里使用 a，我会使用 an`EnumMap`

然后，在您的代码中`enum`，您可以将所有实现作为各种`enum`子类的方法。

```
public enum Actions {
  visible, move, resize;

  public doAction(Shape s) {
    switch(this) {
      case visible:
        // handle command
        break;
      case move:
        // etc.
  }
}

public enum ShapeEnum {
  circle, sun, square;
} 
```

然后，在您的代码中，您可以执行以下操作：

```
 try {
   Actions a = Actions.valueOf(command);
   Shapes s = Shapes.valueOf(shape);

   a.doCommand(myEnumMap.get(s));
 } catch (IllegalArgumentException e) {
   // not a command, handle it
 } 
```

# sql-server - Crystal Reports 动态级联参数

> ID：13849689
> 
> 赞同：1
> 
> 时间：2012-12-12T22:18:26.040
> 
> 标签：sql-server, crystal-reports

我有一个水晶报告，它使用具有约 8 个可选标准级别的动态参数：

```
Company,    
Country,
Zone,
Division,
State,
Region,
Area,
City,
Center 
```

我想要一个级联的每个项目的列表，但也有 ALL 作为每个项目的选项。我还希望能够将一些顶层设置为 ALL，然后可以选择中间的那些，然后再次转到 ALL。例如，我不想选择公司、国家、地区或部门，而是选择州和地区，然后将地区、城市和中心全部返回。

我的表有大约 2000 条记录，我最初的解决方案是在我执行以下操作的地方构建它：

```
SELECT DISTINCT
    Company,
    Country,
    Zone,
    Division,
    State,
    Region,
    Area,
    City,
    Center
FROM myTable 

UNION ALL
SELECT
    Company = 'All',
    Country = 'All',
    Zone = 'All',
    Division = 'All',
    State = 'All',
    Region = 'All',
    Area = 'All',
    City = 'All',
    Center = 'All'

UNION ALL
SELECT DISTINCT
    Company = 'All',
    Country,
    Zone = 'All',
    Division = 'All',
    State = 'All',
    Region = 'All',
    Area = 'All',
    City = 'All',
    Center = 'All'
FROM myTable 
```

使用我能想到的几乎所有组合。这不仅看起来令人费解，而且会导致返回大量数据，并且似乎会遗漏一些东西。

我主要关心的是除了没有被更高级别的选择过滤的选项之外，所有选项都可以选择。

如果没有 40-50 UNION ALL 语句来说明我需要的一切，有没有办法做到这一点？

谢谢您的帮助。

# javascript - Youtube 播放器 Internet Explorer 故障

> ID：13849692
> 
> 赞同：0
> 
> 时间：2012-12-12T22:18:31.783
> 
> 标签：javascript, internet-explorer, cross-browser, youtube-api, youtube-javascript-api

在[演示](http://www.olmasigereken.com/demo2/)中，我正在尝试开发一个无铬的 Youtube 播放器。[该](http://www.olmasigereken.com/demo2/)链接上的控制链接在 Firefox 和 Chrome 上运行良好，但在 Internet Explorer 上不起作用。我该如何解决这个问题？我认为问题与身份证有关，但也许我很困惑，因为我尝试过的任何事情都不能解决我的问题。

```
 var ytplayer_playlist = [ ];
  var ytplayer_playitem = 0;
  swfobject.addLoadEvent( ytplayer_render_player );
  swfobject.addLoadEvent( ytplayer_render_playlist );
  function ytplayer_render_player( )
  {
     swfobject.embedSWF
    (
      'http://www.youtube.com/apiplayer?video_id='+ ytplayer_playlist[ ytplayer_playitem ] + '&enablejsapi=1&autoplay=1&loop=1&version=3&rel=0&fs=1&playerapiid=ytplayer',
      'ytplayer',
      '400',
      '225',
      '10',
      null,
      null,
      {
        allowScriptAccess: 'always',
        allowFullScreen: 'true'
      },
      {
        id: 'ytplayer'
      }
    );

  }
  function ytplayer_render_playlist( )
  {
    for ( var i = 0; i < ytplayer_playlist.length; i++ )
    {
      var img = document.createElement( "img" );
      img.src = "http://img.youtube.com/vi/" + ytplayer_playlist[ i ] + "/default.jpg";
      var a = document.createElement( "a" );
      a.href = "#ytplayer";
      //
      // Thanks to some nice people who answered this question:
      // http://stackoverflow.com/questions/1552941/variables-in-anonymous-functions-can-someone-explain-the-following
      //
      a.onclick = (
        function( j )
        {
          return function( )
          {
            ytplayer_playitem = j;
            ytplayer_playlazy( 1000 );
          };
        }
      )( i );
      a.appendChild( img );
      document.getElementById( "ytplayer_div2" ).appendChild( a );
    }
  }
  function ytplayer_playlazy( delay )
  {
    //
    // Thanks to the anonymous person posted this tip:
    // http://www.tipstrs.com/tip/1084/Static-variables-in-Javascript
    //
    if ( typeof ytplayer_playlazy.timeoutid != 'undefined' )
    {
      window.clearTimeout( ytplayer_playlazy.timeoutid );
    }
    ytplayer_playlazy.timeoutid = window.setTimeout( ytplayer_play, delay );
  }
  function ytplayer_play( )
  {
    var o = document.getElementById( 'ytplayer' );
    if ( o )
    {
      o.loadVideoById( ytplayer_playlist[ ytplayer_playitem ] );
    }
  }
  //
  // Ready Handler (this function is called automatically by YouTube JavaScript Player when it is ready)
  // * Sets up handler for other events
  //
  function onYouTubePlayerReady( playerid )
  {
    var o = document.getElementById( 'ytplayer' );
    if ( o )
    {
      o.addEventListener( "onStateChange", "ytplayerOnStateChange" );
      o.addEventListener( "onError", "ytplayerOnError" );
    }
  }
  //
  // State Change Handler
  // * Sets up the video index variable
  // * Calls the lazy play function
  //
  function ytplayerOnStateChange( state )
  {
    if ( state == 0 )
    {
      ytplayer_playitem += 1;
      ytplayer_playitem %= ytplayer_playlist.length;
      ytplayer_playlazy( 1000 );
    }
  }
  //
  // Error Handler
  // * Sets up the video index variable
  // * Calls the lazy play function
  //
  function ytplayerOnError( error )
  {
    if ( error )
    {
      ytplayer_playitem += 1;
      ytplayer_playitem %= ytplayer_playlist.length;
      ytplayer_playlazy( 1000 );
    }
  }
  //
  // Add items to the playlist one-by-one
  //
  ytplayer_playlist.push( 'tGvHNNOLnCk' );
  ytplayer_playlist.push( '_-8IufkbuD0' );
  ytplayer_playlist.push( 'wvsboPUjrGc' );
  ytplayer_playlist.push( '8To-6VIJZRE' );
  ytplayer_playlist.push( '8pdkEJ0nFBg' );

function play() {

  if (ytplayer) {

    ytplayer.playVideo();

  }

}

function pause() {

  if (ytplayer) {

    ytplayer.pauseVideo();

  }

}

function stop() {

  if (ytplayer) {

    ytplayer.stopVideo();

  }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T22:56:02.297

替换这些调用（调用对象`ytplayer`）：

```
ytplayer.pauseVideo();
ytplayer.playVideo();
// ... 
```

具有以下内容：

```
document.getElementById('ytplayer').pauseVideo();
// ... 
```

Internet Explorer 将`ytplayer`对象视为 HTMLCollection： ![在此处输入图像描述](../Images/b7e97bab685daf49966f217e8a6916dd.png)

通过明确选择元素，您可以调用该函数。

# objective-c - Objective-c 和大型动画图像

> ID：13849693
> 
> 赞同：0
> 
> 时间：2012-12-12T22:18:40.303
> 
> 标签：objective-c, performance, uiimageview, uiimage

到目前为止，我正在使用 UIImageView 和 UIImages 数组，这些 UIImages 一个接一个地显示。

此示例中的相同链接：

```
NSArray *myImages = [NSArray arrayWithObjects:
                     [UIImage imageNamed:@"instruction_1"],
                     [UIImage imageNamed:@"instruction_2"],
                     [UIImage imageNamed:@"instruction_3"],
                     [UIImage imageNamed:@"instruction_2"],
                     [UIImage imageNamed:@"instruction_1"]
                     ,nil];

UIImageView *butta = [[UIImageView alloc] initWithFrame:frame];
butta.animationImages = myImages;
butta.animationDuration = 1;
butta.animationRepeatCount = 0;
butta.alpha = 0;
[butta startAnimating]; 
```

但问题是这个解决方案一直有效，直到图像很小......但在我的情况下，它们中的大多数都与设备最大分辨率相同（横向视网膜 ipad 超过 2000 宽度和 1500 高度）......并且它具有 alpha 通道（ .png) ...导致性能不佳，尤其是在速度较慢的设备上（即使在 iPad 3 上）...

你知道有什么好的选择吗？我尝试了 .svg 图形，但效果更差。

我该如何优化它？

在此先感谢您的帮助，问候大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T23:07:53.810

我以前使用过[AVAnimator](http://www.modejong.com/AVAnimator/)并取得了巨大的成功。我有一个类似的问题，我必须将非常大的图像制作成电影。它有一点学习曲线，但我相信他有很多例子，我只是适应了我的使用。

# text - Drupal 7 以编程方式替换视图中的字段

> ID：13849694
> 
> 赞同：0
> 
> 时间：2012-12-12T22:18:41.860
> 
> 标签：text, replace, drupal, view

我对 Drupal 7 和 Views API 有疑问。

我正在编写一个替换视图中特定文本的模块。基本上我想要做的是扫描视图（或页面）中的文本。假设视图有 [特殊按钮] 将替换为

```
l(t('button'),'mypage',array('query',array('page'=>$node->nid))); 
```

管他呢。请理解这是伪代码。

我看了一下`hook_view()`，`hook_node_view()`（[http://api.drupal.org/api/drupal/modules%21node%21node.api.php/function/hook_node_view/7](http://api.drupal.org/api/drupal/modules%21node%21node.api.php/function/hook_node_view/7)），它们似乎都不适合我。

我也看过[http://drupal.org/node/1510828](http://drupal.org/node/1510828)但这似乎对我没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:27:01.333

您是否尝试在 field/s 上选择“重写该字段的输出”？或者[Views PHP](http://drupal.org/project/views_php)应该能够做你想做的事。

# security - 如何防止 Node.js / Express 提供我的应用程序的源代码？

> ID：13849703
> 
> 赞同：12
> 
> 时间：2012-12-12T22:19:16.523
> 
> 标签：security, node.js, express

我从没想过这会是 Node.js 和 Express 的问题，但一时兴起，我决定在浏览器中输入我的 Node.js Express 项目中的一个源文件的位置——例如：

[http://www.mywebsite.com/mynodejsapp/app.js](http://www.mywebsite.com/mynodejsapp/app.js)

令我***极度恐惧***的是，我的应用程序的源代码立即弹出，所有人都可以看到。

**所以，除此之外：我如何在 Node.js / Express 中停止它？**

我的设置代码非常简单：

```
var app = express();
app.configure(function() {
    app.use(express.static('/home/prod/server/app/public'));
});
app.listen(8888); 
```

澄清一下，这就是我的文件夹结构：

`/home/prod/server/`
`/home/prod/server/app.js`
`/home/prod/server/public/`

*用于*公共访问的各种文件都位于`/public`. 我所有的服务器源代码`/server/`都位于 .

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T22:24:54.717

从您发布的内容来看，您输入的 URL 确实闻起来像是由例如 Apache/nginx/... 提供的，并且您确实将节点应用程序放在了文档根目录中。在这种（以及任何类似的）案例中，答案很简单：

您**永远不会**将任何源代码文件放在文档根目录或其他 HTTP 可访问文件夹中。在您的情况下，`/home/prod/server/app/public`应仅包含客户端内容（HTML、CSS、图形、（缩小的）客户端 JS），并且 nginx 不应在此文件夹上方有任何内容作为其文档根目录。

# forms - Symfony2 FOSUserBundle 覆盖表单：无法加载类型错误

> ID：13849704
> 
> 赞同：0
> 
> 时间：2012-12-12T22:19:25.950
> 
> 标签：forms, symfony, overriding

我试图覆盖 FOSUserBundle 的唯一原因是我可以在构建表单时放置一个默认值，这样我就不会在加载表单时收到不适当的验证消息......

我正在关注[文档](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/overriding_forms.md)。我已经投入`Etienne/UserBundle/Form/Type/RegistrationFormType.php`

```
 <?php

     namespace Etienne\UserBundle\Form\Type;

     use Symfony\Component\Form\BaseType;
     use Symfony\Component\Form\FormBuilderInterface;
     use Symfony\Component\OptionsResolver\OptionsResolverInterface;
     use FOS\UserBundle\Form\Type\RegistrationFormType as BaseType;

     class RegistrationFormType extends BaseType
   {

public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder

        ->add('username', null, array('label' => 'form.username', 'translation_domain' => 'FOSUserBundle'))
        ->add('email', 'email', array('label' => 'form.email', 'translation_domain' => 'FOSUserBundle'))
        ->add('plainPassword', 'repeated', array(
            'type' => 'password',
            'options' => array('translation_domain' => 'FOSUserBundle'),
            'first_options' => array('label' => 'form.password'),
            'second_options' => array('label' => 'form.password_confirmation'),
            'invalid_message' => 'fos_user.password.mismatch',
        ))
    ;
}

public function setDefaultOptions(OptionsResolverInterface $resolver)
{
    $resolver->setDefaults(array(
        'data_class' => $this->class,
        'intention'  => 'registration',
    ));
   }

public function getName()
{
    return 'etienne_user_registration';
}
} 
```

`Etienne/UserBundle/Resources/config/services.yml`：

```
 services:
     etienne_user.registration.form.type:
        class: Etienne\UserBundle\Form\Type\RegistrationFormType
        arguments: [%fos_user.model.user.class%]
        tags:
        - { name: form.type, alias: etienne_user_registration } 
```

并在`app/config`：

```
 FOS_User
    registration:
         form:
             type: etienne_user_registration 
```

我收到此错误消息：

> /var/www/projet_etienne_auth/vendor/symfony/symfony/src/Symfony/Component/Form/FormRegistry.php 在第 95 行

```
 if (!$type) {
            throw new FormException(sprintf('Could not load type "%s"', $name));
        }
        $this->resolveAndAddType($type); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T16:00:20.213

问题是我的依赖注入文件夹中没有 EtienneUserExtension.php 文件（不正确的捆绑安装），因此无法加载 services.xml

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T23:34:24.537

在这段代码中，您首先`BaseType`从 Symfony 的组件中导入类，然后为from`Form`定义具有相同名称的别名。`RegistrationFormType``FOS`

```
 use Symfony\Component\Form\BaseType;
 use Symfony\Component\Form\FormBuilderInterface;
 use Symfony\Component\OptionsResolver\OptionsResolverInterface;
 use FOS\UserBundle\Form\Type\RegistrationFormType as BaseType; 
```

只需删除此声明（您不需要它），一切都会好起来的：

```
use Symfony\Component\Form\BaseType; 
```

# c# - 使用 WCF 托管的 xml 序列化对象，在对象上使用 XmlSerializer 时如何更改 xml 节点的顺序

> ID：13849705
> 
> 赞同：2
> 
> 时间：2012-12-12T22:19:28.003
> 
> 标签：c#, .net, xml-serialization

如果我有这样的对象：

```
[XmlRoot("Person")]
public class Person
{
   [XmlElement("LastName")]
   public string Last {get;set;}

   [XmlElement("FirstName")]
   public string First {get;set;}

   [XmlElement("Banners")]
   public List<Banner> Banners {get;set;}
}

[XmlType("Banner")]
public class Banner
{
    [XmlElement("Title")]
    public string Title {get;set;}

    [XmlElement("Location")]
    public string Location {get;set;}
} 
```

在本地序列化时，结果看起来还可以

```
<Person>
   <LastName/>
   <FirstName/>
   <Banners>
       <Banner>
          <Title/>
          <Location/>
       </Banner>
    </Banners>
 </Person> 
```

但是，如果创建一个库并从 WCF IIS 服务托管它，并且我想从客户端应用程序中使用它，当我访问 Person 对象时，用我的参数填充它，然后将其序列化为一个 xml 字符串，我得到这个：

```
<Person>
   <Banners>
       <Banner>
          <Location/>
          <Title/>
       </Banner>
    </Banners>
   <FirstName/>
   <LastName/>
</Person> 
```

所有节点都按字母顺序显示，在根之后的每个级别。我已经尝试在 XmlElement 属性中使用 Order 关键字，但它没有明显地看到它。

现在，如果我在本地使用该对象并对其进行序列化，那么它会遵循 Order 关键字。我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:24:26.023

XmlSerializer 是强制性的吗？

WCF 默认使用 DataContractSerializer。

所以我会切换到那个。

该属性是`DataMember`- 而不是`XmlElement`.

使用 DataMember，您可以添加一个订单值，该值将由 DataContract 序列化程序兑现。

```
[DataMember(Order = 0)]
public string FirstName { get; set; }
[DataMember(Order = 1)]
public string LastName { get; set; }
[DataMember(Order = 2)]
public string Email { get; set; }
[DataMember(Order = 3)]
public string Password { get; set; } 
```

# objective-c - 有什么方法可以获取在 Objective C 中被点击的对象？

> ID：13849707
> 
> 赞同：1
> 
> 时间：2012-12-12T22:19:30.617
> 
> 标签：objective-c, ios, cocoa-touch

我已经阅读了[响应者链](http://developer.apple.com/library/ios/#documentation/general/conceptual/Devpedia-CocoaApp/Responder.html#//apple_ref/doc/uid/TP40009071-CH1-SW1)上的苹果文档并且需要知道：我如何 NSLog 被点击的对象？

假设我有一个非常复杂的视图控制器，其中包含多个视图对象，当我点击一个对象（UIButton 或其他任何东西......）时，有没有办法知道被点击的特定对象？文档给出了很好的概述，但没有明确覆盖的方法。

**编辑**：情况是在测试我没有编写的不同应用程序。我需要一种快速的方法来确定被点击的对象（因为许多应用程序都有自定义控件/对象，看起来像一件事，但实际上是另一件事）。我希望有一些方法可以在触摸事件被发送到 UIAppication 时拦截它，然后 NSLog 它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T23:05:07.703

你可以覆盖`-[UIApplication sendAction:to:from:forEvent]`做你想做的事：

```
@implementation MyApplicationSubclass

- (BOOL)sendAction:(SEL)action to:(id)target from:(id)sender forEvent:(UIEvent *)event
{
    NSLog(@"Sending action %@ from sender %@ to target %@ for event %@", NSStringFromSelector(action), sender, target, event);
    return [super sendAction:action to:target from:sender forEvent:event];
}

@end 
```

把它放在 UIApplication 的自定义子类中。然后，在 main.m 中，将调用更改为`UIApplicationMain()`以便使用您的自定义子类：

```
int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, NSStringFromClass([MyApplicationSubclass class]), NSStringFromClass([AppDelegate class]));
    }
} 
```

请注意，这仅适用于 UIControl 子类，它们使用此机制将其操作发送到其目标。如果您想查看通过应用程序的所有触摸事件，请`-[UIApplication sendEvent:]`改为覆盖。在这种情况下，由您决定哪个对象*将*接收触摸。您可以通过调用`-hitTest:`主视图/窗口来做到这一点，但请记住，这会确定触摸落在哪个视图上，而不一定是哪个视图处理它（例如，视图可以将事件转发给其他对象）。像这样的东西：

```
@implementation MyApplicationSubclass

- (void)sendEvent:(UIEvent *)event
{
    UIWindow *window = [self keyWindow];
    NSSet *touches = [event touchesForWindow:window];
    for (UITouch *touch in touches) {
        UIView *touchedView = [window hitTest:[touch locationInView:window] withEvent:event];
        NSLog(@"Touch %@ received in view %@ for event %@", touch, touchedView, event);
    }

    [super sendEvent:event];
}

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T22:23:57.320

对于按钮，动作方法通常具有该参数，

```
- (void)action:(id)sender { 
```

这里 sender 代表按钮。您可以将其用作，

```
 UIButton *button = (UIButton *)sender;
   button.hidden = YES;//use the properties of button now 
```

您还可以使用[UITouch 委托](http://developer.apple.com/library/ios/documentation/uikit/reference/UIResponder_Class/Reference/Reference.html#//apple_ref/occ/instm/UIResponder/touchesBegan%3awithEvent%3a)方法进行检查。

例如：-

```
 -(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
       UITouch *myTouch = [[event allTouches] anyObject];// or UITouch *touch = [touches anyObject];

       CGPoint point = [myTouch locationInView:myViewToCheck];
       if (CGRectContainsPoint(myViewToCheck.bounds, point) ) {
           //Touch detected on myViewToCheck.
       } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T22:48:49.183

你有没有机会看看[https://github.com/domesticcatsoftware/DCIntrospect](https://github.com/domesticcatsoftware/DCIntrospect)。

直接来自 github：Introspect 是用于 iOS 的小型工具集，可帮助调试使用 UIKit 构建的用户界面。

它有一个可能有用的日志记录组件？

# jquery - jQuery：选择器在同一属性上使用“逻辑与”

> ID：13849711
> 
> 赞同：2
> 
> 时间：2012-12-12T22:19:55.510
> 
> 标签：jquery, jquery-selectors

有这样的东西：

```
<div>
    <a href="http://a.site.org/a_link.html"></a>
    <a href="http://a.site.org/file_name.rdf"></a>
    <a href="http://a.site.org/file_features_name.rdf"></a>
    <a href="http://a.site.org/file_features2_name.rdf"></a>
</div> 
```

如何仅获取`href`属性以`rdf`AND 不包含结尾的那些链接`features`？

我知道我可以使用：

```
$('a[href$=".rdf"]') 
```

获取所有 .rdf 文件。任何的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T22:23:10.247

我会用这个：

```
$('a[href$=".rdf"]').not('[href*=features]') 
```

也可以写成一个选择器：

```
$('a[href$=".rdf"]:not([href*=features])') 
```

但我认为它的可读性较差。

一如既往地*为人类而不是为机器编写代码*。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T22:22:40.810

在选择器上添加`:not(..)`：

```
$('a[href$=".rdf"]:not([href*="features"])') 
```

# count - 如何显示访客人数？

> ID：13849719
> 
> 赞同：0
> 
> 时间：2012-12-12T22:20:38.943
> 
> 标签：count

我在网络服务器上上传了一个应用程序。我想显示访问过我的应用程序链接的访问者总数。任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:27:42.860

检查此代码，它使用 cookie 检查，您可以更新参数，例如访问者被视为唯一的时间：

[http://discussion.accuwebhost.com/how-tos/479-how-write-simple-php-hit-counter-displays-number-visits-your-website.html](http://discussion.accuwebhost.com/how-tos/479-how-write-simple-php-hit-counter-displays-number-visits-your-website.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T04:04:35.780

> 如果要显示来自服务器数据表的访问者。使用 php
> 
> $con=mysql_connect("localhost", "username", "password"); if (!$con)
> { die('无法连接：' . mysql_error()); } echo "连接到 MySQL
> "; mysql_select_db("adil") 或死(mysql_error()); echo "连接到数据库";
> 
> $result = mysql_query("SELECT * FROM test"); 回声“”；while($row = mysql_fetch_array($result)) { echo "" 。$row['访客'] 。“”。“”。$row['col2'] 。""; // 回声 "
> "; } 回声“”；mysql_close($con);

# haskell - 优化 Haskell 中最长的 Collat z 链

> ID：13849721
> 
> 赞同：2
> 
> 时间：2012-12-12T22:21:04.270
> 
> 标签：haskell, collatz

我一直在做项目欧拉问题来学习 Haskell。

我在路上遇到了一些障碍，但设法解决了问题 14。问题是，低于 1 000 000 的起始数字会产生最长的 Collat​​z 链（链开始后数字允许超过 100 万）。

我尝试了几种解决方案，但都没有奏效。我想做一个反转。从 1 开始并在数字超过 100 万时终止，但这显然行不通，因为条款可能会超过 100 万。

我尝试过记忆普通算法，但同样，数字太大，无法记忆。

我读过最明显的解决方案应该可以解决这个问题，但由于某种原因，我的解决方案需要 10 多秒才能达到 20 000 的最大值。更不用说 100 万了。

这是我目前正在使用的代码：

```
reg_collatz 1 = 1
reg_collatz n
        | even n        = 1 + reg_collatz (n `div` 2)
        | otherwise     = 1 + reg_collatz (n * 3 + 1)

solution = foldl1 (\a n -> max a (reg_collatz n)) [1..20000] 
```

非常欢迎任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T23:37:12.313

答案很简单：不要记住超过 100 万的数字，而要记住低于 100 万的数字。

```
module Main where

import qualified Data.Map as M
import Data.List
import Data.Ord

main = print $ fst $ maximumBy (comparing snd) $ M.toList ansMap

ansMap :: M.Map Integer Int
ansMap = M.fromAscList [(i, collatz i) | i <- [1..1000000]]
  where collatz 1 = 0
        collatz x = if x' <= 1000000 then 1 + ansMap M.! x'
                                     else 1 + collatz x'
          where x' = if even x then x `div` 2 else x*3 + 1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-10T05:57:33.313

这已经很晚了，但我想我还是会为了未来的读者的利益而发布（我想 OP 早就解决了这个问题）。

**TL;DR：** 我想我们可能想使用这个`Data.Vector`包来解决这个问题（以及类似类型的问题）。

更长的版本：

根据 Haskell 文档，a `Map`(from `Data.Map`) 具有 O(log N) 访问时间，而 a `Vector`(from `Data.Vector`) 具有 O(1) 访问时间；我们可以在下面的结果中看到差异：向量实现的运行速度快了约 3 倍。（两者都比具有 O(N) 访问时间的列表好得多。）

下面包括几个基准。测试故意不一个接一个地运行，以防止任何基于缓存的优化。

几点观察：

*   最大的绝对改进（来自原始帖子中的代码）是由于添加了类型签名；在没有被明确告知数据是 type 的情况下`Int`，Haskell 的类型系统推断数据是 type 的`Integer`（obv 更大更慢）

*   `foldl1'`有点违反直觉，但结果在和之间几乎无法区分`foldl1`。（我仔细检查了代码并运行了几次以确保。）

*   `Vector`并且`Array`（并且，在一定程度上，`Map`）允许主要作为记忆的结果进行体面的改进。（请注意，OP 的解决方案可能比在给定列表的 O(N) 访问时间的情况下尝试使用记忆化的基于列表的解决方案要快得多。）

以下是几个基准测试（全部使用 编译`O2`）：

```
 Probably want to look
                                                         at these numbers        
                                                                |             
                                                                V         
Data.Vector                     0.35s user 0.10s system 97% cpu 0.468 total
Data.Array (Haskell.org)        0.31s user 0.21s system 98% cpu 0.530 total
Data.Map (above answer)         1.31s user 0.46s system 99% cpu 1.772 total
Control.Parallel (Haskell.org)  1.75s user 0.05s system 99% cpu 1.799 total
OP (`Int` type sigs + foldl')   3.60s user 0.06s system 99% cpu 3.674 total
OP (`Int` type sigs)            3.53s user 0.16s system 99% cpu 3.709 total
OP (verbatim)                   3.36s user 4.77s system 99% cpu 8.146 total 
```

Haskell.org 的数据来源：[https ://www.haskell.org/haskellwiki/Euler_problems/11_to_20#Problem_14](https://www.haskell.org/haskellwiki/Euler_problems/11_to_20#Problem_14)

* * *

`Data.Vector`用于生成上述结果的实现：

```
import Data.Vector ( Vector, fromList, maxIndex, (!) )

main :: IO ()
main = putStrLn $ show $ largestCollatz 1000000

largestCollatz :: Int -> Int
largestCollatz n = maxIndex vector
  where 
    vector :: Vector Int               
    vector = fromList $ 0 : 1 : [collatz x x 0 | x <- [2..n]]

    collatz m i c =
      case i < m of
        True  -> c + vector ! i
        False -> let j = if even i then i `div` 2 else 3*i + 1
                 in collatz m j (c+1) 
```

# port - VHDL：使用 inout 端口是不好的做法吗？

> ID：13849725
> 
> 赞同：7
> 
> 时间：2012-12-12T22:21:13.207
> 
> 标签：port, vhdl

我有一个程序，我按照以下方式使用 inout 端口：

```
port : inout unsigned(9 downto 0);
...
if port > 10 then
   port <= port + 1
end if; 
```

我正在使用 inout 端口，所以我可以**读取输出**（**以实现反馈**）。

要么是我和老师有误会，要么**老师强烈反对使用 inout 端口**。

*我习惯了高级编程，所以写这样的代码对我来说并不奇怪。我知道在 FPGA 上没有太多带有 inout 端口的电路，但我不经常使用它，而且为了获得我想要的功能，将 inout 端口拆分为输入和输出只是违反我的感觉，不同的方式。*

我会很高兴您**对使用 inout 端口的第二个意见**。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-12T22:42:49.830

如果您正在实现双向端口，那么当然 inout 是正确的选择！

但是要读取您输出到端口的值，您的老师是对的；这是非常糟糕的做法。（如果其他东西也在驱动该端口，您将看到解析的值而不是您想要的值）。

这就是“缓冲”端口的用途。

不幸的是，对于缓冲端口存在很多奇怪的偏见，并且一些工具在您使用它们时会发出不必要的警告（尽管它们通常可以很好地实现它们！）并且有一些不必要的奇怪规则将缓冲端口连接到外部模块中的端口。

我不记得确切的细节，但我相信缓冲端口不能直接连接到下一级的输出端口——尽管 VHDL-2002 和更新版本删除了这个规则。尽管“缓冲”端口现在更容易使用，但仍有一些人不愿意使用它们。

由于这一切，最常见的解决方案是使用一个内部信号，例如`port_int`，您可以读取它，并使用一个简单的赋值语句将其复制到实际端口。

因此，VHDL-2008 取消了禁止读取被驱动到“输出”端口的值的限制，使得“输出”端口与“缓冲”端口无法区分。

我的偏好：使用缓冲端口。

如果有某种原因阻止了这一点（比如代码风格指南或当地主流意见），那么 (a) 如果您的工具支持 VHDL-2008，则使用“输出”端口或 (b) 使用内部信号。

# paypal - 贝宝 - 一个支付过程来阐明

> ID：13849727
> 
> 赞同：0
> 
> 时间：2012-12-12T22:21:14.903
> 
> 标签：paypal

我刚刚开始在一个网站上处理贝宝付款的项目，这在当且仅当用户返回该网站时才会发送电子邮件通知的意义上无法正常工作。事实是我没有编码，我什至不知道它使用什么样的 api。我阅读了对我来说非常模糊的文档（它知道需要通过 get 请求方法从站点发送一个令牌，但我真的不确定）。我从代码中了解到，在下文中，op=dodons uri 用于管理 paypal 的响应并向用户发送电子邮件通知。关于我想从中获取付款处理方式的页面，我只能告诉您以下内容：

```
<form action="{$payPalURL}" method="post" class="payPalForm" id="frmpp">
              <input type="hidden" name="cmd" value="_donations" id="typedon"/>
              <input type="hidden" name="item_name" value="Donation" />
              <input type="hidden" name="business" value="{$myPayPalEmail}" />
              <input type="hidden" name="notify_url" value="{$url}/index.php?op=dodons&donation=1&tid={$randomID}&payment=1" />             
              <input type="hidden" name="return" value="{$url}index.php?page=campaign&op=dodons&campaign_id={$campaign->getId()}&don=ok" />           
              <input type="hidden" name="rm" value="2" />
              <input type="hidden" name="no_note" value="1" />
              <input type="hidden" name="cbt" value="Continue" />
              <input type="hidden" name="no_shipping" value="1" />
              <input type="hidden" name="lc" value="US" />
              <input type="hidden" name="currency_code" value="EUR" />
              <input type="hidden" name="txn_id" value="{$randomID}" />
              <input type="hidden" name="tid" value="{$randomID}" />
              {if $logged_user != null}
              <input type="hidden" name="a_id" value="{$logged_user->getId()}" />

</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T04:10:20.790

看起来您正在结合使用[Payments Standard](https://www.x.com/developers/paypal/development-and-integration-guides#wps)和[Payment Data Transfer (PDT)](https://www.paypal.com/pdt)。

PDT 仅在用户返回无法保证的站点时才有效，即使启用了自动返回也是如此。

相反，请使用[即时付款通知 (IPN)](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_admin_IPNIntro)。这是将所有交易数据发送到服务器上的侦听器脚本的简单 POST，无论用户是否返回您的站点，都会发生这种情况。它与结帐流程完全分开。

# c++ - C++/OpenGL，将随机字符绘制到屏幕上

> ID：13849728
> 
> 赞同：0
> 
> 时间：2012-12-12T22:21:24.897
> 
> 标签：c++, xcode, macos, opengl

**（使用 C++、OpenGL/GLUT、Xcode、OSX）**

我正在寻求将随机字符绘制到屏幕上的帮助。我把任务分成两部分......

(1) 我可以使用以下命令随机选择一个 UPPER_CASE 字母：

```
 int launchCode1_random = rand() % 26;
    char c1 = (char)(launchCode1_random+65);
    cout << c1 << "\n"; 
```

(2) 我可以使用以下方法在 OpenGL 中绘制字符串：

```
 string launchCode1 = "thing";
    void * fontlaunchCode1 = GLUT_BITMAP_9_BY_15;
    for (string::iterator i = launchCode1.begin(); i != launchCode1.end(); ++i)
    {
        char c = *i;
        glutBitmapCharacter(fontlaunchCode1, c);
    } 
```

...但是，我想在上面的步骤 2 中写的是：

```
 string launchCode1 = c1; 
```

这样做时，我收到以下错误：“没有从 'char' 到 'string' 的可行转换。从表面上看，这对我来说很有意义。但我不完全理解为什么或如何。如果有替代解决方法我没有看到，我很想听听你对这个问题的看法。

编辑.....

在 Pubby 的帮助下，这是最终的工作代码：

```
 int launchCode1_random = rand() % 26;
    char c1 = (char)(launchCode1_random+65);
    cout << c1 << "\n";

    string launchCode1 (1, c1);
    void * fontlaunchCode1 = GLUT_BITMAP_9_BY_15;
    for (string::iterator i = launchCode1.begin(); i != launchCode1.end(); ++i)
    {
        char c = *i;
        glutBitmapCharacter(fontlaunchCode1, c);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:31:24.470

如果你想`std::string`从一个字符构造一个，你可以这样做：

```
string launchCode1(1, c1); 
```

使用此构造函数：

```
string( size_type count, 
        CharT ch, 
        const Allocator& alloc = Allocator() ); 
```

[http://en.cppreference.com/w/cpp/string/basic_string/basic_string](http://en.cppreference.com/w/cpp/string/basic_string/basic_string)

我不完全明白你在做什么。`std::string`如果你想要的只是一个角色，为什么还要费心呢？只需这样做：

```
int launchCode1_random = rand() % 26;
char c = (char)(launchCode1_random+65);
glutBitmapCharacter(fontlaunchCode1, c); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T22:36:40.910

这与您的问题无关，但仍然很高兴知道：您需要这行代码：

```
srand ( time(NULL) ); 
```

在这一切之前

```
int launchCode1_random = rand() % 26;
char c1 = (char)(launchCode1_random+65);
cout << c1 << "\n"; 
```

否则，您将一遍又一遍地得到相同的随机字符。

# javascript - 最佳 HTML Canvas JavaScript 库/包装器

> ID：13849731
> 
> 赞同：3
> 
> 时间：2012-12-12T22:21:35.530
> 
> 标签：javascript, html, canvas

我正在寻找为 RAD 提供以下高级功能的 HTML Canvas 元素的 JavaScript 库或包装器。

1.  拖动绘图
2.  调整绘图大小
3.  创建绘图网格（用圆形、矩形、线条、路径、图像一起绘制）
4.  可以在 Canvas 上绘制任何 Photoshop 绘图（我将先用 Photoshop 绘制东西，然后再到 Canvas 上）

我认为这可以完成这项工作。期待有史以来最好的图书馆！

**更新**

如果 ExtJS 能做到这一点，那就太好了！我不太喜欢 ExtJS 绘图引擎，所以不确定它是否可以做到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:23:41.453

看看[KineticJS](http://kineticjs.com/)。它消除了画布编程的所有麻烦。

# ruby - 如何从 Rake 中的系统命令打印到标准输出？

> ID：13849732
> 
> 赞同：1
> 
> 时间：2012-12-12T22:21:39.453
> 
> 标签：ruby, rake, ruby-mocha

我有以下`Rakefile`

```
desc "Runs tests"
namespace :test do
    task :api do
        `mocha`
    end
end 
```

当我运行该命令`rake test:api`时，我不会像运行该命令那样得到很好的点输出`mocha`。

如何在 rake 任务中实时打印命令的输出？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T22:31:36.480

你可以只`put`输出：

```
puts `mocha` 
```

反引号 ` 正在调用命令*mocha*并返回命令的输出。

您还可以使用`%x{}`：

```
puts %x{mocha} 
```

或者你使用`system`：

```
system('mocha') 
```

或者您将输出存储在变量中以供以后使用：

```
output = `mocha`
puts output 
```

# php - jQuery & Phonegap

> ID：13849736
> 
> 赞同：0
> 
> 时间：2012-12-12T22:21:53.610
> 
> 标签：php, jquery, cordova

试图通过 jquery 与 phonegap 连接到我的 PHP 代码来从我的 Mysql 数据库中获取一些信息以显示出来。

但是，当我加载页面时（无论是在我的手机上还是在我的 PC 上）它会完全空白..

这是我的 jquery 代码，它位于 <./body.> 标签之前的 phonegap 构建中，我包括最新的 jquery：

```
<script type="text/javascript">
$(document).ready(function(){
    var output = $('#output');

    $.ajax({
        url: 'http://feedmysound.com/app/json.php',
        dataType: 'jsonp',
        jsonp: 'jsoncallback',
        timeout: 5000,
        success: function(data, status){
            $.each(data, function(i,item){
                var landmark = '<h1>'+item.title+'</h1>'
                + '<p>'+item.postin+'<br>'
                + item.user+'</p>';

                output.append(landmark);
            });
        },
        error: function(){
            output.text('There was an error loading the data.');
        }
    });
   });
 </script> 
```

这是 json.php 上的 php：

```
<?php 
$con = mysqli_connect("localhost", "xxxxxx","xxxxxx", "xxxxxx");
if (!$con)
{
 die('Could not connect: ' . mysqli_error($con));
}

$result= mysqli_query($con, "SELECT * FROM xxxxx WHERE postin = 'main' ORDER BY datetime DESC")or die(mysqli_error($con));

$records = array();

while($row = mysqli_fetch_assoc($result))
{

$records[] = $row;
}   

echo $_GET['jsoncallback'] . '(' . json_encode($records) . ');';
?> 
```

有谁知道怎么了？

这是小提琴..不确定这是否可能在这里但[http://jsfiddle.net/h4dmF/9/](http://jsfiddle.net/h4dmF/9/)

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T23:27:45.663

您的 json.php 数据 URL 在浏览器中加载正常，因此 MySQL 连接没有问题。

我不确定您的应用程序，但小提琴至少被错误地包裹在 SCRIPT 标签中。这是一个工作示例：

[http://jsfiddle.net/hansvedo/h4dmF/10](http://jsfiddle.net/hansvedo/h4dmF/10)

```
<div id="output"></div>​
<script type="text/javascript">
$(document).ready(function(){ 
```

由于应用程序正在从远程域加载数据，您可能需要使用 $.jsonp 而不是 $.ajax： [http ://samcroft.co.uk/2010/loading-data-into-a-phonegap-app/](http://samcroft.co.uk/2010/loading-data-into-a-phonegap-app/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T23:29:56.127

“*我不确定您的应用程序，但小提琴至少被错误地包裹在 SCRIPT 标记中。这是一个工作示例：[jsfiddle](http://jsfiddle.net/hansvedo/h4dmF/10)* ” – **hansvedo**

在评论中修复它！感谢所有试图帮助/思考问题的人！

```
$(document).ready(function() {
    var output = $('#output');

    $.ajax({
        url: 'http://feedmysound.com/app/json.php',
        dataType: 'jsonp',
        jsonp: 'jsoncallback',
        timeout: 5000,
        success: function(data, status) {
            $.each(data, function(i, item) {
                var landmark = '<h1>' + item.title + '</h1>' + '<p>' + item.postin + '<br>' + item.user + '</p>';

                output.append(landmark);
            });
        },
        error: function() {
            output.text('There was an error loading the data.');
        }
    });
}); 
```

# sql-server - 我可以使用事务日志恢复到上次完整备份之前的日期吗？

> ID：13849737
> 
> 赞同：2
> 
> 时间：2012-12-12T22:21:59.677
> 
> 标签：sql-server

我有一个海量的事务日志备份，过去几天我有一个完整的数据库备份。如果我从完整备份恢复较早的日期，我可以使用事务日志备份*向前*恢复，但我想知道是否可以在我选择从完整日期备份的日期*之前实际恢复。*

更具体地说，假设事务日志包含 12/01 -> 12/12（今天），最早的完整备份是 12/07，我想恢复到 12/02 的某个点。这可能吗?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:26:48.930

看起来应该是（技术上）。但该产品不提供这种选择。

也许第三方产品可以提供帮助。有些人可以阅读和解释日志。他们可以从日志中恢复数据。不过，不确定他们是否需要基本完整备份。

# html - 尽管绝对定位，但在 webkit 浏览器中调整窗口大小时元素位置会发生变化

> ID：13849739
> 
> 赞同：0
> 
> 时间：2012-12-12T22:22:07.377
> 
> 标签：html, css, webkit, position, css-position

我有一个元素位于网站上的图像之上。图像在所有浏览器中的正确位置加载到窗口中，并重新定位到除了 webkit（特别是 Safari 和 Chrome）之外的所有浏览器中它所属的位置。在 webkit 浏览器中，当您尝试调整窗口大小时，它会重新定位图像下方的元素并设置其相对于图像的边距。

这是我的html：

```
<body>

<div class="header-image">
  <img id="headerimg" src="images/header.jpg" alt="" />
  <img id="link-header" src="images/link-header.png" alt="" />
</div>

</body> 
```

这是CSS：

```
body { max-width:1236px; margin:0 auto; position:relative; }
.header-image { width:100%; height:auto; max-width:1236px; margin:0 auto; position:relative; }
#headerimg { width:100%; max-width:1236px; height:auto; }
#link-header { position:absolute; right:0; margin-right:10%; margin-top:275px; } 
```

就像我说的，所有其他浏览器都可以很好地调整大小。我遇到这个问题的只有 webkit。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-30T15:10:28.960

它绝对与图像无关，因为我没有使用任何图像，并且在 1159 像素以上的 Chome 以及 1209 像素以上的苹果 safari 上也经历了同样奇怪的大小、定位和居中行为，但在苹果上，行为略有不同。1235px 和 1250px 之间的大小是不同的奇怪。我意识到这不是一个很好的诊断帖子，但它和我目前所拥有的一样好。如果/当我发现更多，我会发布更多。这是在调整大小后在 winXP 机器上测试的。几个小时以来我一直在摸不着头脑，所以你绝对不是一个人。

在您的情况下，如果可以，将大小设置为 1200px 以下，应该可以解决。对不起，我没有更多的帮助。

# chef-infra - 数据包加密在 Chef 服务器上加密，但如何加密本地副本？

> ID：13849741
> 
> 赞同：11
> 
> 时间：2012-12-12T22:22:15.637
> 
> 标签：chef-infra

我在私有 git 存储库中有完整的 Chef 配置集角色、食谱、数据包等。

我看到我可以使用 --secret-file 选项在数据包上传到 Chef 服务器时对其进行加密。

但我也想将那些加密的数据包存储在 git 存储库中。

唯一想到的是在本地创建一个纯文本 json 文件，将其上传到 Chef 并加密，然后从 Chef 网页获取加密的 JSON 并将其粘贴到我的存储库副本中。

有没有其他人解决过这个问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-13T15:50:53.743

我的主厨工作目录中有以下 bash（称为 encrypted-databag.sh）：

```
#!/bin/bash -e

knife data bag $1 $2 $3 --secret-file ~/.chef/encrypted_data_bag_secret
if [ "$1" == "edit" ] ; then
    knife data bag show $2 $3 -Fj > "./data_bags/$2/$3.json"
fi 
```

每次我向我展示加密的数据包时，它都可以节省我的打字时间。当我编辑它时，它会自动更新/保存到存储库中。

**更新于 30.08.2013**

上述脚本的缺点是您直接在 chef-server 上编辑数据包。但是，当您仍在编写一些食谱并且尚未上传它时，就会出现问题，但数据包已经存在并且被旧版本的食谱使用。这样，当 chef-client 在某个节点上运行时，可能会导致一些错误。

所以我正在考虑在本地编辑加密数据包，没有厨师服务器，然后将新版本的它与新版本的食谱一起上传（测试通过后）。所以这是我现在用来编辑加密数据包的*rake任务。*

```
namespace 'databag' do
  desc 'Edit encrypted databag item.'
  task :edit, [:databag, :item, :secret_file] do |t, args|
    args.with_defaults :secret_file => "#{ENV['HOME']}/.chef/encrypted_data_bag_secret"
    secret = Chef::EncryptedDataBagItem.load_secret args.secret_file
    item_file = "data_bags/#{args.databag}/#{args.item}.json"
    tmp_item_file = "/tmp/#{args.databag}_#{args.item}.json"
    begin
      #decrypt data bag into tmp file
      raw_hash = Chef::JSONCompat.from_json IO.read item_file
      databag_item = Chef::EncryptedDataBagItem.new raw_hash, secret
      IO.write tmp_item_file, Chef::JSONCompat.to_json_pretty( databag_item.to_hash )
      #edit tmp file
      sh "#{ENV['EDITOR']} #{tmp_item_file}"
      #encrypt tmp file data bag into original file
      raw_hash = Chef::JSONCompat.from_json IO.read tmp_item_file
      databag_item = Chef::EncryptedDataBagItem.encrypt_data_bag_item raw_hash, secret
      IO.write item_file, Chef::JSONCompat.to_json_pretty( databag_item )
    ensure
      ::File.delete tmp_item_file #ensure tmp file deleted.
    end
  end
end 
```

现在编辑我使用的加密数据包：

```
rake databag:edit[my_databag,item_in_databag] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-22T06:08:59.590

我从@draco-ater 中进一步举了这个例子，因为我发现自己想在食谱目录中通过执行类似 ../encrypted_data_bag 之类的操作来编辑数据包，所以我缩短了名称并使用了一些额外的 bash 魔法来查找实际目录，即使它是符号链接的（可以从文件系统中的任何位置调用）。因为我不是唯一一个处理数据包的人，所以我希望能够随时显示数据包的内容，以防其他人更新了项目并且仍然将数据推送到存储库中（以防他们忘记添加它） . 如果从服务器中删除数据，我还希望从存储库中删除数据，以使其更加一致。所以我想出了这个脚本。请记住，我的 encrypted_data_bag_secret 位于 /etc/chef/encrypted_data_bag_secret 下，

```
#!/bin/bash -e
SECRETFILE="/etc/chef/encrypted_data_bag_secret"
SOURCE="${BASH_SOURCE[0]}"
while [ -h "$SOURCE" ] ; do SOURCE="$(readlink "$SOURCE")"; done
appDir="$( cd -P "$( dirname "$SOURCE" )/" && pwd )"
cd $appDir
if [ "$1" != "edit" ] && [ "$1" != "create" ] && [ "$1" != "delete" ] && [ "$1" != "show" ]
then
        echo "Bad arguments!"
        echo "First argument is what you want to do on the databag (show|edit|create|delete)"
        echo "Second argument is the databag"
        echo "Third argument is the item inside the databag"
        echo ""
        echo "Example: ./dbag edit aws main"
        echo ""
        echo "You used ($1) as the action to perform on ($2)/($3)"
        exit 1
else
        if [ "$1" == "delete" ]; then
                knife data bag $1 $2 $3
                if [ -z "$3" ]; then
                        rm -rf data_bags/$2
                else
                        rm -f data_bags/$2/$3.json
                fi
        else
                mkdir -p $appDir/data_bags/$2
                knife data bag $1 $2 $3 --secret-file $SECRETFILE
                knife data bag show $2 $3 -Fj > "./data_bags/$2/$3.json"
        fi
fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-24T17:08:31.990

实现此目的的另一种方法是使用刀插件：

刀备份[https://github.com/mdxp/knife-backup](https://github.com/mdxp/knife-backup)

```
knife backup export data_bags 
```

刀要领 [https://github.com/jkeiser/knife-essentials](https://github.com/jkeiser/knife-essentials)

```
knife download data_bags 
```

# android - 网络提供商停止提供更新

> ID：13849748
> 
> 赞同：2
> 
> 时间：2012-12-12T22:22:45.910
> 
> 标签：android, location, listener, location-provider

我注意到很少（每隔几天），我的应用程序停止接收新的位置更新。

位置侦听器已向网络和 GPS 提供商注册。GPS 提供商已关闭，因此任何位置更新都来自网络提供商。每隔几天左右，我就会注意到这个位置很旧而且没有更新。从我的调试日志中，我可以看到位置侦听器正在向位置管理器注册，但没有找到新位置。onLocationChanged() 没有被调用。

奇怪的是，谷歌地图获取新的网络位置没有问题。在应用程序上重新启动/重新安装/清除数据并不能解决问题。唯一能解决的就是重启手机。

这发生在 3 个不同的设备上（2 个 ICS，1 个 JB）。

[类似的问题，但在这里](https://stackoverflow.com/questions/13594932/network-provider-not-providing-updated-locations)措辞不是很好。

# macos - Mac OS X socks 代理环境变量

> ID：13849760
> 
> 赞同：0
> 
> 时间：2012-12-12T22:24:10.130
> 
> 标签：macos, command-line, proxy, environment-variables

我知道可以通过网络应用程序设置 socks 代理服务器，并且有一个特定于 Mac 的实用程序可以设置它，但如果可能的话，我更喜欢将 socks 代理服务器设置为环境变量。有谁知道合适的`export`设置？

如果有人想知道这对于 http 代理是可能的，例如，`export http_proxy=http://my-proxy-server:1080/`被 JVM 拾取为`http.proxyPort=1080`和`http.proxyHost=my-proxy-server`. 当作为 Mac 系统级别设置传递时，socks 代理被视为`socksProxyHost=my-socks-proxy-server`但我无法确定等效的环境变量名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T18:10:40.117

我找不到要设置的适当环境变量，但找到了替代解决方案。添加这个`bash_profile`对我有用

```
export _JAVA_OPTIONS="-Dhttp.proxyHost=my-proxy-server -Dhttp.proxyPort=1080 -DsocksProxyHost=my-socks-server" 
```

# eclipse - 尝试在 QNX Momentics IDE（Eclipse IDE）中创建新项目时出错

> ID：13849763
> 
> 赞同：2
> 
> 时间：2012-12-12T22:24:27.120
> 
> 标签：eclipse, ide, qnx, blackberry-cascades

我正在尝试在 QNX Momentics IDE 中创建一个新的 Blackberry Cascades C++ 项目，我以前能够这样做，但现在当我尝试这样做时，我收到一个错误消息对话框，上面写着“com. qnx.tools.bbt.appdescriptor.Configuration.getId()java/lang/String"

我关闭了计算机上的所有内容，然后重新启动它，然后再次尝试，但仍然出现该错误。

我之前能够创建新项目。

这在我尝试重命名项目后开始发生，但出现另一个错误弹出窗口，提示“资源‘MyProject’与文件系统不同步”，我重新启动了 QNX Momentics IDE，所以我不知道是不是这样有什么关系。

我什至尝试在我已经创建了许多其他 Blackberry Cascades 项目的工作区中创建一个新的 Blackberry Cascades 项目，但我遇到了同样的错误。这是怎么回事？我怎样才能解决这个问题？我需要重新安装 QNX Momentics IDE 吗？还是有其他方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:43:19.757

最好卸载以前的 NDK，然后安装 BlackBerry Gold NDK。这个问题是由非常旧的 IDE 插件试图相互交互引起的。请在运行更新之前完整安装 GOLD。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T08:07:47.780

我也有同样的经历。我试图卸载它，然后重新安装 NDK。目前，它可以工作，但问题可能会在未来持续存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T21:50:49.900

从旧版本更新到新的 Gold SDK 后，我遇到了同样的问题。卸载然后重新安装对我有用。

# sql - PL/SQL 异常？

> ID：13849764
> 
> 赞同：1
> 
> 时间：2012-12-12T22:24:47.930
> 
> 标签：sql, oracle, exception, exception-handling

我有以下例外：

```
EXCEPTION
WHEN DateOverlapException THEN
      raise_application_error (-20001,'Dates are overlapping'); 
WHEN DateOrderException THEN
      raise_application_error (-20002,'Date order error has occured');
END; 
```

如果我删除第二个异常，它会很好地运行脚本，但是有了它，它就不会运行脚本。只是说发生了编译错误。不知道问题是什么。有人知道吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T16:23:47.777

请张贴整个区块以获得快速答案。

可能您没有在您的声明部分声明 DateOrderException 异常。

```
declare
...
...
DateOrderException  exception;

begin
.....
....
EXCEPTION
WHEN DateOverlapException THEN
raise_application_error (-20001,'Dates are overlapping'); 
WHEN DateOrderException THEN
raise_application_error (-20002,'Date order error has occured');
END; 
```

# recursion - 递归函数和内存栈有什么关系？

> ID：13849766
> 
> 赞同：4
> 
> 时间：2012-12-12T22:24:52.357
> 
> 标签：recursion, stack

递归函数和内存堆栈之间是否存在直接关系，更多解释请考虑该代码：

```
public static int triangle(int n) {
    System.out.println(“Entering: n = ” + n);
    if (n == 1) {
        System.out.println(“Returning 1”);
        return 1;
    } else {
        int temp = n + triangle(n - 1);
        System.out.println(“Returning“ + temp);
        return temp;
    }
}​ 
```

在此示例中，值 2,3,4,5 将存储在哪里，直到函数返回？请注意，它们将在 LIFO(LastInFirstOut) 中返回，这些是处理内存堆栈的递归的特殊情况，还是它们总是一起出现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T22:44:05.420

是的，递归函数和内存堆栈之间存在直接关系，因为某些具有上限的函数会因为达到堆栈大小限制而使您的程序崩溃，并且函数将覆盖您的部分程序代码（这就是我们所说的堆栈溢出）。

R：递归

一：迭代

```
first call:
 R  |  I
|_|   |_|

second call:
 R  |  I
|_|   |_|
|_|

third call:
 R  |  I
|_|   |_|
|_|
|_|
.
.
.
n call :
 R  |  I
|_|   |_|
|_|
|_|
.
.
.
|_| 
```

我希望这是有道理的，因为迭代调用函数一旦完成就会被推入堆栈，它会从堆栈中退出，下一次调用将加载一个类似的函数，另一方面，递归函数会加载到堆栈中并调用自身并重新加载每次调用的堆栈，然后当达到停止条件时它们开始关闭（LIFO 最后一个调用第一个出）。

所以现在具体到您的问题，当满足停止条件时，您所说的 n 值将保存在内存中，然后最后一个函数将显示 n，然后退出以将手交给刚刚调用它的函数，这将还显示它自己的 n 值，并且将重复相同的事情，直到调用第一个函数，但是迭代函数将显示计数器 n 的值（仅使用一个变量，我们正在更改其值）。

下面是一篇关于stackoverflow的好文章，

> 非常深或无限递归主要文章：无限递归堆栈溢出的最常见原因是过深或无限递归。像 Scheme 这样实现尾调用优化的语言，允许特定排序的无限递归——尾递归——在没有堆栈溢出的情况下发生。这是因为尾递归调用不占用额外的堆栈空间。

[http://en.wikipedia.org/wiki/Stack_overflow](http://en.wikipedia.org/wiki/Stack_overflow)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T23:01:54.883

假设这是一个 C++ 类方法，对 triangle(n) 的调用会将数据推送到堆栈，如下所示：

*   `function code`
*   `int *returnAddress`
*   `int n`

在函数返回之前不会分配返回值。[RS Shaw在此处为](http://upload.wikimedia.org/wikipedia/commons/thumb/d/d3/Call_stack_layout.svg/200px-Call_stack_layout.svg.png)[调用堆栈维基百科页面](http://en.wikipedia.org/wiki/Call_stack) 提供了一个很好的图像示例。

每次递归时，此数据都会被推送到调用堆栈的顶部，因此最后一次调用 triangle(n) 的代码将位于顶部。存储的值`*returnAddress`是内存中结果需要去的地方，以便展开递归。

换句话说，结果本身（例如：三角形（1）为 1，三角形（2）为 3）最终在`function code`堆栈的某个位置，而不是在内存中的特定命名位置。如果您运行调试器，您应该能够通过在函数代码中`returnAddress`放置断点来跟踪您的位置。`triangle`

顺便说一句，这不是递归的特殊情况。这是经典的教科书案例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T22:31:08.133

临时变量 n 将在堆栈上，调用 n-1 的参数和返回地址都将在堆栈上。这些都在同一个堆栈上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T22:45:38.683

正如 QuentinQK 解释的那样，局部变量 n 将消耗堆栈空间以及函数的返回地址，并且 - 在短时间内 - 返回值和所有移交给递归函数的参数都会消耗堆栈空间。这发生在每个递归级别。因此，这取决于您的递归将进行多深（此函数调用自身的频率）最终将需要多少堆栈以及它是否会爆裂。

出于这个原因，必须有 sim final 条件。在你的例子中，它是这个`if (n==1)' condition where the recursion is stopped when that value is reached. It only works along with the`n-1`in the parameter list of the recursive call of`三角形`。

但你真正想知道什么？

# android - 安卓。如何通过发送意图设置壁纸

> ID：13849776
> 
> 赞同：3
> 
> 时间：2012-12-12T22:25:44.437
> 
> 标签：android, android-intent, wallpaper

我想调用活动，用户可以在其中选择图片区域并将其设置为壁纸

我有一些问题。我的代码是：

```
Intent shareIntent = new Intent();
shareIntent.setAction(Intent.ACTION_ATTACH_DATA);
Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.background);
shareIntent.putExtra(Intent.EXTRA_STREAM, bitmap);
shareIntent.setType("image/jpeg");
startActivity(shareIntent); 
```

但是当我选择设置为墙纸时，图库停止工作（Android 2.3），或者（Android 4.0）“设置为”菜单不显示。

Android 2.3 LogCat（com.cooliris.media 包中的此错误）：

```
12-13 16:20:27.509: E/AndroidRuntime(14414): FATAL EXCEPTION: main
12-13 16:20:27.509: E/AndroidRuntime(14414): java.lang.NullPointerException
12-13 16:20:27.509: E/AndroidRuntime(14414):    at android.app.ActivityThread.handleStopActivity(ActivityThread.java:2593)
12-13 16:20:27.509: E/AndroidRuntime(14414):    at android.app.ActivityThread.access$1800(ActivityThread.java:123)
12-13 16:20:27.509: E/AndroidRuntime(14414):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:953)
12-13 16:20:27.509: E/AndroidRuntime(14414):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-13 16:20:27.509: E/AndroidRuntime(14414):    at android.os.Looper.loop(Looper.java:130)
12-13 16:20:27.509: E/AndroidRuntime(14414):    at android.app.ActivityThread.main(ActivityThread.java:3835)
12-13 16:20:27.509: E/AndroidRuntime(14414):    at java.lang.reflect.Method.invokeNative(Native Method)
12-13 16:20:27.509: E/AndroidRuntime(14414):    at java.lang.reflect.Method.invoke(Method.java:507)
12-13 16:20:27.509: E/AndroidRuntime(14414):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
12-13 16:20:27.509: E/AndroidRuntime(14414):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
12-13 16:20:27.509: E/AndroidRuntime(14414):    at dalvik.system.NativeStart.main(Native Method)
12-13 16:20:27.529: W/ActivityManager(225):   Force finishing activity com.cooliris.media/.Photographs 
```

安卓 4.0 LogCat

```
12-13 11:26:44.722: E/JavaBinder(12822): !!! FAILED BINDER TRANSACTION !!! 
```

对不起，我的英语不好。

# sql - SQL 健身房，每个地区的工人较少

> ID：13849781
> 
> 赞同：1
> 
> 时间：2012-12-12T22:26:07.757
> 
> 标签：sql, count, max, minimum

我正在努力寻找如何对本地数据库上的一组表进行特定查询。

```
CREATE TABLE Gym (
eid INT PRIMARY KEY,
name VARCHAR(127) UNIQUE,
district VARCHAR(127),
area INT);

CREATE TABLE Trainer (
id INT PRIMARY KEY,
name VARCHAR(127),
birth_year INT,
year_credentials_expiry INT
);

CREATE TABLE Works (
eid INT,
id INT,
since INT,
FOREIGN KEY (eid) REFERENCES Gym (eid),
FOREIGN KEY (id) REFERENCES Trainer (id),
PRIMARY KEY (eid,id)); 
```

问题如下：我有几个健身房，在某些情况下，两个或多个健身房位于同一地区。我怎么知道，按地区，哪个健身房的教练少？我唯一设法得到的是每个健身房的教练数量。考虑到这一点，我只能得到所有地区训练师最少的健身房……

注意：我不允许使用子查询（在 SELECT 中选择；在 FROM 中选择）

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:41:19.267

如果您可以在`where`or`having`子句中有子查询，那么您可以通过这种方式处理它。

首先查看按地区计算培训师人数的查询。

现在，编写一个查询（使用它作为子查询）来计算一个地区健身房中培训师的最少数量。

接下来，获取您的第一个查询，添加一个有子句，并按地区和培训师人数将其与第二个相关联。

这确实在子查询中使用了子查询，但它在`having`子句中。我不是为您编写查询，因为您需要自己学习如何执行此操作。

顺便说一句，如果您有窗口/分析功能，可能还有其他解决方案。

# c++ - 简单算术运算（VBA 与 C++）之间运行时间差异的主要原因是什么？

> ID：13849795
> 
> 赞同：1
> 
> 时间：2012-12-12T22:27:50.567
> 
> 标签：c++, performance, vba

这个 C++ 程序需要 20 到 25 秒才能在我相对较慢的计算机上运行：

```
#include <iostream>

int main()
{
int i;
double test = 456;

for (i = 0; i < 900000000; i++) {
    test = (test / 0.99999999);
}
    std::cout << "The value of test is " << test <<".\n";
    return 0;
} 
```

这个 excel vba 宏需要 37 到 40 秒才能在我相对较慢的计算机上运行：

```
Sub Macro1()
Dim i As Long
Dim test As Double
test = 456

For i = 0 To 900000000
    test = (test / 0.99999999)
Next i

Cells(1, 1).Value = test
End Sub 
```

这种差异是典型的（C++ 与非编译语言）吗？造成这种时间差异的主要因素是什么？编译 C++ 的事实是最重要的因素吗？谢谢。

信息：

对于 C++，我使用 Code::Blocks 和 GCC

对于 VBA，我使用 Excel 2010。

对于 Code::Blocks，它的控制台中有一个内置计时器。

对于 excel，我使用了 iPhone 秒表（感觉不像使用 CHighResTimer [http://www.ozgrid.com/forum/showthread.php?t=56900](http://www.ozgrid.com/forum/showthread.php?t=56900)）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T22:39:15.977

您的基准已关闭，边距应该更大。

例如，在我的计算机上，C++ 代码需要 7.46 秒（未经优化编译，使用 Unix`time`工具计时）；相比之下，VBA 代码需要 46 秒。这是一个更现实的余量（但我不会对更大的余量感到惊讶——传统的、非优化的解释器通常至少慢十倍）。

一方面，VBA 首先必须读入代码并逐行解释或将其转换为中间表示。尽管如此，这种中间代码表示仍然是*解释*的，而不是直接由 CPU 运行（或者您是否计算了 C++ 中的编译时间？）。¹

此外，VB(A) 在这段代码中做了很多 C++ 中没有的冗余内容：例如，每个整数加法（在`For`循环变量的增量中隐含在代码中）都被防止溢出。本质上，这个 VB 代码

```
i = i + 1 
```

转换为以下伪中间代码：

```
if i + 1 overflows then
    raise an overflow error
end if
i = i + 1 
```

…对于*每个*整数运算。这会消耗相当多的运行时间。数组（或此处：单元格）访问操作也是如此。

* * *

¹我*认为VBA 使用称为**P 代码*的中间表示，而不是逐行代码解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T22:34:54.860

区别很常见，最大的区别是C++是编译的。我很惊讶差异没有大几个数量级。大多数性能基准测试显示 C/C++ 比脚本语言快 10 倍以上。你是如何编译 C++ 代码的？我敢打赌，如果以最高级别的优化编译，它会在 5-10 秒内运行。如果你还没有，你应该用一个`-O3`标志编译并计时。

我对 VBA 了解不多，但如果您正在编译具有完全优化的 C++，我认为 VBA 更有可能通过即时编译器运行，然后在 CLR 上执行与 VB.NET 相同的操作。您在那里展示的性能更像是 VC++ 与 VB.NET，而不是 VC++ 与任何脚本语言。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T22:35:54.837

我不相信VBA中的代码行是一遍又一遍地解释的，必须有一些缓存，否则这个因素会比1：2大得多。

可能有很多差异。自然，从高级语言到 CPU 指令的转换在不同语言之间是不同的。C++ 编译器针对性能进行了优化，以满足广泛的应用程序，这在 Office 产品中可能并不那么重要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-24T08:57:25.673

我想用外行的话想象一下VB是如何构建的，在它下面是利用以前用C++开发的东西。所以，不管你如何分割它，在大多数情况下，VB 所做的一切都有一个隐藏的 C++“中间人”，所以某些事情本质上会被做两次，例如那些内置的错误保护、interps 等。

我还发现 VBA 作为标准项目或使用 AutoCAD VBA 内置在进程内 DLL 中的相同功能存在差异，但没有计时性能差异，但我可以看到进程内运行速度更快，因为在 VBA 中运行速度也会比从外部 VB 连接到 AutoCAD。似乎在 VBA 中为您分配可用内存，而 VB 正在使用自己的进程，我不知道，但这是一个可以提高速度的地方。

# visual-studio-2010 - ClickOnce 为每个 DLL 部署多个文件夹

> ID：13849800
> 
> 赞同：0
> 
> 时间：2012-12-12T22:28:51.813
> 
> 标签：visual-studio-2010, dll, clickonce

每次我部署 ClickOnce 应用程序时，它都会创建一堆目录，其中包含一个 dll。

它甚至不使用它们，我不确定如何禁用它们的创建。

[实际目录 http://imageshack.us/a/img818/6347/folderstructure.png](http://imageshack.us/a/img818/6347/folderstructure.png)

每次我打开它们时，里面只有一个 dll。

[实际目录 http://imageshack.us/a/img15/6027/directoryb.png](http://imageshack.us/a/img15/6027/directoryb.png)

这是实际的工作目录。我可以手动删除其他文件夹，但我不确定我需要做什么来确保 clickonce 部署不会创建其他目录。

[实际目录 http://imageshack.us/a/img11/573/actualdirectory.png](http://imageshack.us/a/img11/573/actualdirectory.png)

关于如何禁用 Clickonce 安装程序以不创建其他目录的任何想法？

谢谢，

拉夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T23:26:48.227

我能够通过浏览每个项目并修改程序集信息来清除列表，使其未启用 com 并填写所有字段。出去。

希望这将帮助其他可能发现类似问题的人。

# file - 当 {REQUEST_FILENAME} 是现有目录或文件时，如何使 mod_rewrite 静默重定向并将参数传递给索引

> ID：13849806
> 
> 赞同：1
> 
> 时间：2012-12-12T22:29:30.087
> 
> 标签：file, mod-rewrite, redirect, directory

概要：

localhost/root/admin 是我希望 /root/admin 转到 /root/index.php?url=admin 而不更改地址栏中的 url的现有文件夹。

**唯一**的例外是请求的文件是图像

这是我为 localhost/root 中的 .htaccess 文件编写的内容，以尝试执行所有这些操作：

```
RewriteEngine On
RewriteBase /root/

RewriteCond %{REQUEST_URI} !index\.php$
RewriteCond %{REQUEST_URI} !(.*\.(png|jpg|gif))$ [NC]
RewriteRule (.*) index.php?url=$1 [QSA,L] 
```

而是将 localhost/root/admin 重定向到 localhost/root/index.php 并将地址栏中的 url 更改为 localhost/root/admin/?url=admin。

如果我在“admin”上添加一个斜杠（/），它不会这样做。

我知道，在我的 mac 笔记本电脑上，这个 mod_rewrite 代码完全符合它的意思，但只有在“站点”文件夹而不是 localhost htdocs 文件夹中运行它时。

关于我能做些什么来解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:09:57.363

我认为您只是缺少“PT”标志以防止实际重定向。PT（直通）意味着 Apache 重定向内部提供的资源，但浏览器看到的是相同的 URL。（有关详细信息，请参阅 Apache wiki：[http](http://wiki.apache.org/httpd/RewriteFlags/PT) ://wiki.apache.org/httpd/RewriteFlags/PT ）

```
RewriteEngine On
RewriteBase /root/

RewriteCond %{REQUEST_URI} !index\.php$
RewriteCond %{REQUEST_URI} !(.*\.(png|jpg|gif))$ [NC]
RewriteRule (.*) index.php?url=$1 [PT,QSA,L] 
```

请注意，唯一的变化是添加了标志。我在我的服务器上对此进行了测试，并看到了我认为你想要的行为。

# php - PHP Mysql如何使字段获得相同的自动增量ID值

> ID：13849811
> 
> 赞同：0
> 
> 时间：2012-12-12T22:29:52.263
> 
> 标签：php, mysql

> **可能重复：**
> [MySQL 触发器将字段更新为 id 的值](https://stackoverflow.com/questions/1211792/mysql-trigger-to-update-a-field-to-the-value-of-id)

请我有一个包含三个字段的表：

```
Id (auto increment)
GroupById
Text 
```

我希望在插入新行时：如果我将字段 groupById 留空，则默认情况下它必须获得与字段 ID 相同的值。

请问你有什么想法吗？提前致谢。

编辑：我的代码：

```
mysql_query("INSERT INTO group SET GroupById = (must get the current Id), Text = 'bla bla bla' "); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T23:37:27.843

触发器怎么样：

```
DELIMITER $$
CREATE TRIGGER trg_yourtable
BEFORE INSERT ON yourtable
FOR EACH ROW
BEGIN
  IF NEW.GroupById IS NULL THEN
    SET NEW.GroupById = (
        SELECT AUTO_INCREMENT 
        FROM information_schema.TABLES 
        WHERE TABLE_SCHEMA = DATABASE() 
            AND TABLE_NAME = 'yourtable'
    );
  END IF;
END $$ 
```

我不确定这是多么安全......或者当您从一个查询中插入多行时会发生什么，或者当两个连接尝试同时插入时......但它有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T00:08:26.537

这个简单的 SQL 应该做你想做的事：

```
INSERT INTO myTable (GroupById, Text) VALUES (NULL, 'your text');
SET @lastID = LAST_INSERT_ID();
UPDATE myTable SET GroupById = @lastID WHERE Id = @lastID; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T23:55:11.333

使用存储过程

1.  获取 MAX id
2.  添加 1 并将其添加到两行中

您可以在单个事务中获得所需的结果。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T01:18:17.803

使用此[功能](http://php.net/manual/en/function.mysql-insert-id.php#83550)| 经过测试

使用示例：

```
function get_current_insert_id($table)
{
    $q = "SELECT LAST_INSERT_ID() FROM $table"; 
    return mysql_num_rows(mysql_query($q)) + 1;
}

$txt = "text";
$groupID = '';

if ( empty($groupID) ) { $groupID = get_current_insert_id(test);  } 

$query = mysql_query("INSERT INTO test VALUES ('', '$groupID', '$txt') "); 

if ( $query ) { echo 'Saved using ID:' . $groupID; } else { echo 'Oh noes!' . $query; } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T22:46:19.807

看起来您可能需要运行 2 个查询：

1.  `insert into 'table' ('GroupById', 'Text') VALUES ('{group id}', '{sometext}')`
2.  `update 'table' set GroupById = id where GroupById = null`- 它可能是 0 而不是 null，具体取决于您在 db 中插入的内容。

你总是可以通过索引、限制、顺序来优化它。

# apache - apache重定向/重写引擎

> ID：13849812
> 
> 赞同：2
> 
> 时间：2012-12-12T22:29:56.767
> 
> 标签：apache, mod-rewrite, redirect, url-rewriting, apache2

以下可能吗？

1.  用户请求 url`http://example1.com/example.php`并且 apache 打开`http:// example1.com/example.php?id=1`

2.  用户请求 url`http://example2.com/example.php`并且 apache 打开`http:// example2.com/example.php?id=2`

但是用户不应该在他的浏览器地址栏中看到 id（用户应该只看到`http://example1.com/example.php`or `http://example2.com/example.php`）。

您可以说该 id 对用户是不可见的，但已转移到`example.php`.

我该如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T08:08:59.933

这是正确的解决方案吗？

```
RewriteEngine On
RewriteRule ^/example.php http://example1.com/example.php$1 [P]
ProxyPassReverse /example.php?id=1 http:// example1.com/example.php

RewriteEngine On
RewriteRule ^/example.php http://example2.com/example.php$1 [P]
ProxyPassReverse /example.php?id=2 http:// example2.com/example.php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T16:01:36.497

你必须了解几个概念。一旦服务器收到用户请求的 url，他可以做几件事

*   从 url 获取请求的路径并在不修改的情况下使用它。这是默认解决方案
*   将请求的路径映射到任何其他物理路径，这可以通过 Alias、AliasMatch 或 RewriteRules 完成。
*   将请求的路径映射到另一个网站，同时隐藏请求另一个网站的事实。那是代理解决方案，thta mod_proxy 或 mod_rewrite 可以处理（但你不需要）
*   使用重定向指令或 mod_rewrite（瑞士刀）将用户重定向到另一条路径，向他发送一个要使用的新 url，进行另一个客户端/服务器往返。但你不需要那个。

因此，您希望仅在服务器端重新映射请求的路径。

假设我们将使用 mod rewrite 来制作这个映射。如果您检查[RewriteRule 中可用的所有标签](http://httpd.apache.org/docs/current/en/rewrite/flags.html)（[此处为摘要](http://httpd.apache.org/docs/current/en/mod/mod_rewrite.html#rewriterule)），有趣的是：

> **passthrough|PT ：**强制将生成的 URI 传递回 URL 映射引擎，以处理其他 URI 到文件名的转换器，例如 Alias 或 Redirect。
> 
> **qsappend|QSA：**将来自原始请求 URL 的任何查询字符串附加到在重写目标中创建的任何查询字符串
> 
> **last|L：**立即停止重写过程，不再应用任何规则。特别注意每个目录和 .htaccess 上下文的注意事项（另请参见 END 标志）
> 
> **nocase|NC：**使模式比较不区分大小写。

**PT**标志的详细信息表明：

> 默认情况下，RewriteRule 中的目标（或替换字符串）假定为文件路径。

好吧，这对你来说可能已经足够了。但是使用 PT 是一件好事，如果您有其他 apache 配置元素，您应该尝试让它们在 mod_rewrite 作业之后应用。

所以...假设您可能需要处理一些查询字符串参数，并且此 id 参数基于请求中的域名，并且只有 example.php 脚本需要此行为；你应该从这样的规则开始你的研究（未经测试）：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^example1.com$ [nocase]
RewriteRule ^example\.php$ example.php?id=1 [passthrough,qsappend,last]
RewriteCond %{HTTP_HOST} ^example2.com$ [nocase]
RewriteRule ^example\.php$ example.php?id=2 [passthrough,qsappend,last] 
```

# javascript - jQuery：延迟 mouseenter 事件（下拉菜单）

> ID：13849813
> 
> 赞同：1
> 
> 时间：2012-12-12T22:29:58.757
> 
> 标签：javascript, jquery, delay, mouseenter

我正在研究这个小提琴：http: [//jsfiddle.net/8n2TQ/9/](http://jsfiddle.net/8n2TQ/9/)

它由一个翻转按钮组成，该按钮下拉菜单，如下所示：

```
$('#one').mouseenter(function() {

    //Slide down

}); 
```

该事件在悬停时立即发生，但我想稍微延迟一下以防止意外悬停触发事件。我尝试使用计时器（请参阅[http://jsfiddle.net/8n2TQ/13/](http://jsfiddle.net/8n2TQ/13/)），但这似乎并没有执行“//向上滑动”下的所有事件。我想我在这里遗漏了一些东西，我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T22:32:52.680

[https://github.com/briancherne/jquery-hoverIntent](https://github.com/briancherne/jquery-hoverIntent)

有一个插件可以很好地工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T22:38:54.273

你问如何处理函数。插件页面上有一个示例

```
var config = {    
     over: makeTall, // function = onMouseOver callback (REQUIRED)    
     timeout: 500, // number = milliseconds delay before onMouseOut    
     out: makeShort // function = onMouseOut callback (REQUIRED)    
};

$("#demo3 li").hoverIntent( config ) 
```

# javascript - 如何使用 d3.js 轴功能绘制指数函数 y=ab^x

> ID：13849818
> 
> 赞同：8
> 
> 时间：2012-12-12T22:30:23.873
> 
> 标签：javascript, math, d3.js

我正在尝试使用 d3.js (javascript) 库绘制指数函数 (y=ab^x)。我了解如何自己绘制轴。我只需要画出实际线条的魔法。我已经看到了对线性和二次方程的描述，但没有更多的自定义。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-13T10:05:37.950

我认为您需要自己构建数据。对于指数函数，您可以生成数据：

```
var data = [],
    n = 100,
    a = 1,
    b = 2;

for (var k = 0; k < 100; k++) {
    data.push({x: 0.01 * k, y: a * Math.pow(b, 0.01 * k)});
} 
```

然后，使用标准代码生成折线图，例如，参见[http://bl.ocks.org/3883245](http://bl.ocks.org/3883245)。

# windows-phone - 是否可以使用后退按钮在 PivotItems 之间移动？

> ID：13849825
> 
> 赞同：1
> 
> 时间：2012-12-12T22:31:08.837
> 
> 标签：windows-phone, windows-phone-8

当用户单击列表中的项目时，我的应用程序的一部分会自动切换 PivotItems。我想允许用户在此操作后按下后退按钮以切换回原始 PivotItem。这怎么可能实现？如果我的理解是正确的，那么普通的 BackStack 只能用于页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T23:19:06.620

您可以覆盖该`[OnBackKeyPress()](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.controls.phoneapplicationpage.onbackkeypress%28v=vs.105%29.aspx)`功能并设置`e.Cancel`为`true`取消后退键按下（并导航到不同的 PivotItem 或其他）。

但是：根据[认证要求](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh184840%28v=vs.105%29.aspx)：

> 5.2.4.1 – 后退按钮：前几页
> 
> 按下后退按钮必须将应用程序返回到上一页或返回到后堆栈中的任何前一页。

所以我不建议做这样的事情——它不仅可能无法通过认证，而且可能会让人们感到困惑。

# vba - VBA将列存储在另一个工作表中

> ID：13849826
> 
> 赞同：-1
> 
> 时间：2012-12-12T22:31:12.513
> 
> 标签：vba

我正在尝试将列值（通过 rand() 函数创建）复制到另一张表以进行特定数量的迭代。例如，对于 10 次迭代，重新计算列 10 次并将每个实例之后的值存储在另一个工作表中，从而产生 10 列。我知道我应该使用粘贴值并使用偏移函数创建一个循环，但我不确定如何执行此操作。

谢谢，

山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T17:08:05.283

子 store_sim_cf()

对于 i = 1 到 250

将 rowOffset 暗淡为 Double

rowOffset = IIf(Sheet7.Range("A12") = vbNullString, 0, Sheet7.Range("A12").Columns.Count)

Sheet1.Range("GK15:GK372").Copy Sheet7.Range("A12").Offset(, rowOffset + i - 1).PasteSpecial Paste:=xlPasteValues

下一个

结束子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T22:43:53.017

这会将 Sheet1 的 A 列中的数据复制到 Sheet2 中的列，从 A 列开始并正常工作：

```
Dim rowOffset As Double

rowOffset = IIf(Sheet2.Range("A1") = vbNullString, 0, Sheet2.Range("A1").CurrentRegion.Columns.Count)

Sheet1.Range("A1").CurrentRegion.Copy Sheet2.Range("A1").Offset(, rowOffset) 
```

# javascript - 从不同 JS 文件中的另一个函数调用 JavaScript 函数

> ID：13849828
> 
> 赞同：1
> 
> 时间：2012-12-12T22:31:18.207
> 
> 标签：javascript

我有一个显示 HTML5 画布的网页。当网页加载时，会调用以下 JavaScript 函数：

```
window.onload = function(){
    var sources = {};
        sources[0] = document.getElementById("building").src,
        sources[1] = document.getElementById("chair").src,
        sources[2] = document.getElementById("drink").src,
        sources[3] = document.getElementById("food").src,
        sources[4] = document.getElementById("fridge").src,
        sources[5] = document.getElementById("land").src,
        sources[6] = document.getElementById("money").src,
        sources[7] = document.getElementById("oven").src,
        sources[8] = document.getElementById("table").src,
        sources[9] = document.getElementById("van").src,

        sources[10] = document.getElementById("burger").src,
        sources[11] = document.getElementById("chips").src,
        sources[12] = document.getElementById("drink").src,
        sources[13] = document.getElementById("franchiseFee").src,
        sources[14] = document.getElementById("wages").src,

        sources[15] = document.getElementById("admin").src,
        sources[16] = document.getElementById("cleaners").src,
        sources[17] = document.getElementById("electricity").src,
        sources[18] = document.getElementById("insurance").src,
        sources[19] = document.getElementById("manager").src,
        sources[20] = document.getElementById("rates").src,
        sources[21] = document.getElementById("training").src,
        sources[22] = document.getElementById("water").src,

        sources[23] = document.getElementById("burger").src,
        sources[24] = document.getElementById("chips").src,
        sources[25] = document.getElementById("drink").src,

        sources[26] = document.getElementById("creditors").src,
        sources[27] = document.getElementById("electricity").src,
        sources[28] = document.getElementById("food").src,
        sources[29] = document.getElementById("hirePurchase").src,
        sources[30] = document.getElementById("loan").src,
        sources[31] = document.getElementById("overdraft").src,
        sources[32] = document.getElementById("payeTax").src,
        sources[33] = document.getElementById("tax").src

    loadImages(sources, drawImage);
    drawGameElements();
    drawDescriptionBoxes();
}; 
```

该函数将 HTML 的隐藏部分中的一些图像加载到 JavaScript 中，并通过在“sources”数组中的每个图像上调用“drawImage()”函数将它们绘制到画布上。然后它调用'drawGameelements();' 函数，它在画布上绘制了更多东西，最后，我想调用“drawDescriptionBoxes()”函数。

但是，此函数与其余代码位于单独的 JS 文件中，当我在浏览器中查看页面时，尽管调用了“loadImages()”和“drawGameElements()”，并绘制了它们应该在画布上，我在控制台中收到错误消息：

> ReferenceError：未定义drawDescriptionBoxes

我认为这意味着我没有正确引用该函数，因为它与我调用它的文件不在同一个文件中。

我想知道如何从另一个文件中调用此函数？会不会是这样的：`filename.js.drawDescriptionBoxes`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:44:20.583

`drawDescriptionBoxes`函数未定义的原因实际上有两种可能性。

**1）超出范围**

在 JavaScript 中，变量存在于某种范围内。这可能是全球性的，例如：

```
<script>
var foo = 123; //foo can be referenced anywhere, it's global!
</script> 
```

或者在另一个代码块中：

```
function myFunc()
{
   var bar = function () //bar can only be accessed within myFunc
   {

   };
};

//bar() here is undefined 
```

您的`drawDescriptionBoxes`函数可能不在全局范围内。

**2) 代码运行时尚未定义**

你也有可能有这样的代码：

*文件 1*

```
<script>
   var result = someFunc(123);
</script> 
```

*文件 2*

```
<script>
   function someFunc(x)
   {
      return x * 2;
   }
</script> 
```

如果在文件 1 之后包含文件 2，*则*`someFunc`在运行文件 1 时还不存在。您可以通过在文档完全加载后使用事件处理程序运行所有内容来解决此*问题*。如果`var result = someFunc(123);`在 onload 事件中运行，则无论在哪个文件`someFunc`中定义它都可以正常工作。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T22:44:19.477

if`drawDescriptionBoxes`定义为全局函数，例如

```
function drawDescriptionBoxes() {
} 
```

那么没有找到它的事实意味着包含它的javascript文件没有加载。展示如何在 html 中包含此文件以及如何定义该函数。

# ios - Monotouch：在正在旋转的设备上使用 DialogController 根元素与 TableView 相结合

> ID：13849838
> 
> 赞同：0
> 
> 时间：2012-12-12T22:31:54.510
> 
> 标签：ios, xamarin.ios, monotouch.dialog

我需要根据条件显示不同的信息。我有时需要带有部分的根元素，而在其他情况下，我需要填充数据的表格视图。当我初始化 Root 元素甚至是空的，然后在设备旋转时创建一个 tableview 时，我在顶部有 Root 元素和来自 tableview 的数据。如何保留表格视图以保持领先？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:58:39.980

我刚刚解决了在视图控制器中覆盖 DidRotate 方法的问题：

```
public overridevoid DidRotate (UIInterfaceOrientation fromInterfaceOrientation)
{
    // Stop event execution in order not to redraw some UI elements incorrectly
} 
```

# module - 仿函数的继承

> ID：13849840
> 
> 赞同：2
> 
> 时间：2012-12-12T22:32:13.637
> 
> 标签：module, ocaml, signature

请原谅我的冗长示例：

```
module type MONAD = sig
  type ('r, 'a) t
  val return : 'a -> ('r, 'a) t
  val bind : ('r, 'a) t -> ('a -> ('r, 'b) t) -> ('r, 'b) t
end

module MonadOps (Monad : MONAD) = struct
  include Monad
  type ('r, 'a) monad = ('r, 'a) t
  let run x = x
  let return = Monad.return
  let bind = Monad.bind
  let (>>=) a b = bind a b
  let rec foldM f a = function
    | [] -> return a
    | x::xs -> f a x >>= fun a' -> foldM f a' xs
  let whenM p s = if p then s else return ()
  let lift f m = perform x <-- m; return (f x)
  let join m = perform x <-- m; x
  let (>=>) f g = fun x -> f x >>= g
end

module Monad = (MonadOps : functor (M : MONAD) -> sig
  type ('a, 'b) monad
  val run : ('a, 'b) monad -> ('a, 'b) M.t
  val return : 'a -> ('b, 'a) monad
  val bind : ('a, 'b) monad -> ('b -> ('a, 'c) monad) -> ('a, 'c) monad
  val ( >>= ) :
    ('a, 'b) monad -> ('b -> ('a, 'c) monad) -> ('a, 'c) monad
  val foldM :
    ('a -> 'b -> ('c, 'a) monad) -> 'a -> 'b list -> ('c, 'a) monad
  val whenM : bool -> ('a, unit) monad -> ('a, unit) monad
  val lift : ('a -> 'b) -> ('c, 'a) monad -> ('c, 'b) monad
  val join : ('a, ('a, 'b) monad) monad -> ('a, 'b) monad
  val ( >=> ) :
    ('a -> ('b, 'c) monad) ->
    ('c -> ('b, 'd) monad) -> 'a -> ('b, 'd) monad
end)

module type MONAD_PLUS = sig
  include MONAD
  val mzero : ('r, 'a) t
  val mplus : ('r, 'a) t -> ('r, 'a) t -> ('r, 'a) t
end

module MonadPlusOps (MonadPlus : MONAD_PLUS) = struct
  include MonadOps (MonadPlus)
  let mzero = MonadPlus.mzero
  let mplus = MonadPlus.mplus
  let fail = mzero
  let (++) a b = mplus a b
  let guard p = if p then return () else fail
end 
```

有没有一种`MonadPlus`类似于`Monad`没有过多签名代码重复的方法？沿着（错误的解决方案）：

```
module MonadPlus = (MonadPlusOps : functor (M : MONAD_PLUS) -> sig
  include module type of MonadPlusOps (M)
    with type ('a, 'b) t := ('a, 'b) MonadPlusOps (M).monad
end) 
```

或（不进行类型检查）：

```
module MonadPlus = (MonadPlusOps : functor (M : MONAD_PLUS) -> sig
  include module type of Monad(M)
  val mzero : ('a, 'b) monad
  (* ... *)
end) 
```

**编辑：**更新——更好的最终解决方案

```
module type MONAD = sig
  type ('s, 'a) t
  val return : 'a -> ('s, 'a) t
  val bind : ('s, 'a) t -> ('a -> ('s, 'b) t) -> ('s, 'b) t
end

module type MONAD_OPS = sig
  type ('s, 'a) monad
  include MONAD with type ('s, 'a) t := ('s, 'a) monad
  val ( >>= ) :
    ('s, 'a) monad -> ('a -> ('s, 'b) monad) -> ('s, 'b) monad
  val foldM :
    ('a -> 'b -> ('s, 'a) monad) -> 'a -> 'b list -> ('s, 'a) monad
  val whenM : bool -> ('s, unit) monad -> ('s, unit) monad
  val lift : ('a -> 'b) -> ('s, 'a) monad -> ('s, 'b) monad
  val join : ('s, ('s, 'a) monad) monad -> ('s, 'a) monad
  val ( >=> ) :
    ('a -> ('s, 'b) monad) ->
    ('b -> ('s, 'c) monad) -> 'a -> ('s, 'c) monad
end

module MonadOps (M : MONAD) = struct
  open M
  type ('s, 'a) monad = ('s, 'a) t
  let run x = x
  let (>>=) a b = bind a b
  let rec foldM f a = function
    | [] -> return a
    | x::xs -> f a x >>= fun a' -> foldM f a' xs
  let whenM p s = if p then s else return ()
  let lift f m = perform x <-- m; return (f x)
  let join m = perform x <-- m; x
  let (>=>) f g = fun x -> f x >>= g
end

module Monad (M : MONAD) =
sig
  include MONAD_OPS
  val run : ('s, 'a) monad -> ('s, 'a) M.t
end = struct
  include M
  include MonadOps(M)
end

module type MONAD_PLUS = sig
  include MONAD
  val mzero : ('s, 'a) t
  val mplus : ('s, 'a) t -> ('s, 'a) t -> ('s, 'a) t
end

module type MONAD_PLUS_OPS = sig
  include MONAD_OPS
  val mzero : ('s, 'a) monad
  val mplus : ('s, 'a) monad -> ('s, 'a) monad -> ('s, 'a) monad
  val fail : ('s, 'a) monad
  val (++) : ('s, 'a) monad -> ('s, 'a) monad -> ('s, 'a) monad
  val guard : bool -> ('s, unit) monad
end

module MonadPlus (M : MONAD_PLUS) :
sig
  include MONAD_PLUS_OPS
  val run : ('s, 'a) monad -> ('s, 'a) M.t
end = struct
  include M
  include MonadOps(M)
  let fail = mzero
  let (++) a b = mplus a b
  let guard p = if p then return () else fail
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T23:16:14.193

我不完全确定您要达到的目标，但我可能会尝试将其分解如下：

```
module type MONAD =
sig
  type ('r, 'a) t
  val return : 'a -> ('r, 'a) t
  val bind : ('r, 'a) t -> ('a -> ('r, 'b) t) -> ('r, 'b) t
end

module type MONAD_OPS =
sig
  type ('a, 'b) monad
  val run : ('a, 'b) monad -> ('a, 'b) monad
  val (>>=) : ('a, 'b) monad -> ('b -> ('a, 'c) monad) -> ('a, 'c) monad
  (* ... *)
end

module MonadOps (Monad : MONAD) : 
sig
  include MONAD with type ('a ,'b) t := ('a, 'b) Monad.t
  include MONAD_OPS with type ('a ,'b) monad = ('a, 'b) Monad.t
end =
struct
  include Monad
  type ('r, 'a) monad = ('r, 'a) t
  let run x = x
  let (>>=) = bind
  let rec foldM f a = function
    | [] -> return a
    | x::xs -> f a x >>= fun a' -> foldM f a' xs
  (* ... *)
end

module type MONAD_PLUS = sig
  include MONAD
  val mzero : ('r, 'a) t
  val mplus : ('r, 'a) t -> ('r, 'a) t -> ('r, 'a) t
end

module type MONAD_PLUS_OPS =
sig
  include MONAD_OPS
  val fail : ('r, 'a) monad
  val (++) : ('r, 'a) monad -> ('r, 'a) monad -> ('r, 'a) monad
  (* ... *)
end

module MonadPlusOps (MonadPlus : MONAD_PLUS) :
sig
  include MONAD_PLUS with type ('a ,'b) t := ('a, 'b) Monad.t
  include MONAD_PLUS_OPS with type ('a ,'b) monad = ('a, 'b) Monad.t
end =
struct
  include MonadPlus
  include MonadOps (MonadPlus)
  let fail = mzero
  let (++) = mplus
  (* ... *)
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T10:22:06.017

作为对 Andreas 回答的补充，我希望表明您可以使用函子来生成签名。我没有完全按照你想要的类型抽象的确切级别的讨论，所以这个代码将与 Andreas 的版本进行比较。

```
module MonadSig = struct
  module type S = sig
    type ('r, 'a) t
    val return : 'a -> ('r, 'a) t
    val bind : ('r, 'a) t -> ('a -> ('r, 'b) t) -> ('r, 'b) t
  end
end

module MonadOpsSig (M : MonadSig.S) = struct
  module type S = sig
    type ('a, 'b) monad = ('a, 'b) M.t
    val run : ('a, 'b) monad -> ('a, 'b) monad
    val (>>=) : ('a, 'b) monad -> ('b -> ('a, 'c) monad) -> ('a, 'c) monad
    (* ... *)
  end
end

module MonadOps (M : MonadSig.S) : MonadOpsSig(M).S = struct
  open M
  type ('r, 'a) monad = ('r, 'a) t
  let run x = x
  let (>>=) = bind
  let rec foldM f a = function
    | [] -> return a
    | x::xs -> f a x >>= fun a' -> foldM f a' xs
  (* ... *)
end

module MonadPlusSig = struct
  module type S = sig
    include MonadSig.S
    val mzero : ('r, 'a) t
    val mplus : ('r, 'a) t -> ('r, 'a) t -> ('r, 'a) t
  end
end

module MonadPlusOpsSig (Monad : MonadPlusSig.S) = struct
  module type S = sig
    include MonadOpsSig(Monad).S
    val fail : ('r, 'a) monad
    val (++) : ('r, 'a) monad -> ('r, 'a) monad -> ('r, 'a) monad
    (* ... *)
  end
end

module MonadPlusOps (M : MonadPlusSig.S) : MonadPlusOpsSig(M).S = struct
  include MonadOps(M)
  open M
  let fail = mzero
  let (++) = mplus
  (* ... *)
end 
```

这个想法是为了提供一个参数化的签名，你可以将这个签名嵌入到一个参数化的仿函数中（我称之为“仿函数样式”），或者将参数定义为抽象的（但它们实际上是输入而不是输出），并且在使用现场，将它们与实际参数等同起来（我称之为“混合风格”）。我并不是说上面的代码比 Andreas 的代码更好，事实上我可能更愿意使用他的版本，但是比较它们很有趣。

# javascript - 如何使用 ajax 刷新并保留表单数据

> ID：13849843
> 
> 赞同：2
> 
> 时间：2012-12-12T22:32:34.513
> 
> 标签：javascript, php, jquery, forms

我正在制作一个现场讨论表格。该页面从 MySQL 加载线程，并通过 AJAX 每 4 秒刷新一次。在每个线程的最后一条评论之后，有一个用于评论的文本输入（非常类似于 Facebook）。

一切正常，除了当用户在输入中写入并且页面刷新时，消息消失了。安全和隐私是这个项目的主要目标，这就是我不想使用 cookie 的原因。我尝试了很多解决方案，并搜索了几个小时的解决方案，但似乎没有任何效果。

1.  `$_post`每次刷新页面时是否有可能的解决方案？
2.  如果缓存输入的值并从本地存储中检索它们`$_session`，任何人都可以提出更具体的方法吗？即：将听众放在哪里:)
3.  如果输入的值与“”不同，我尝试制作一个防止重新加载页面的功能，但即使这对我也不起作用。

这是我的刷新代码：

```
<script type="text/javascript">
    var PHP = "msgboard.php";  

    function updateShouts(){
        $('#msgboard').load(PHP);       
    }

    window.setInterval( "updateShouts()", 4000 );
</script> 
```

这是主要的 PHP 函数：

```
while($row = mysql_fetch_array($resultados)) { 

    echo '<div class="post">
            <div class="user"><b>'.$row["user"].'</b></div>';
    echo '  <div class="txt">'.$row["msg1"].'</div>
          </div>';

        $sql2="SELECT * FROM table WHERE masterid = '".$row['id']."'ORDER BY id ASC";
        $resultados2 = mysql_query($sql2);
        while($row2 = mysql_fetch_array($resultados2)) { 
            echo '<div class="comment">
                    <div class="txt"><b>'.$row2['user'].'</b>';
            echo '  '.$row2['msg1'].'</div>
                  </div>';
        }

    echo '<div class="commentform">
            <form action="board.php" method="post">
            <input type="text" size="75" name="message" id="message1">
            <input type="hidden" name="masterid" value="'.$row['id'].'">
            <input type="submit" name="Submit" value="Enviar"></form>
        </div>' ;
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:36:05.570

也许您应该研究有状态的 HTTP 连接。因此，每当有新消息添加到服务器端的板上时，都会通知所有客户端。这样，您不必不必要地刷新页面。HTML5 支持的 Web Sockets 使之成为可能。以下是我遇到的一些您可能会觉得有用的链接：

[使用 HTML5 Web Sockets Wikipedia Page on WebSocket](http://en.wikipedia.org/wiki/WebSocket)[创建与 PHP 服务器的双向连接](http://www.htmlgoodies.com/html5/other/create-a-bi-directional-connection-to-a-php-server-using-html5-websockets.html#fbid=qLQjT72VMdP)

[socketo.me](http://socketo.me/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T00:00:55.097

正如@aziz 在评论中指出的那样，如果您只想更新评论，您只需要更新页面的那一部分。

**第 1 步：将容器添加到评论中，以便您可以将更新定位到该容器**

您会注意到代码中现在有一个新的 div`<div id="comments_contaner">`将包含所有注释。

此外，当您输出 HTML 时，`<?= $variable ?>`如果您需要在 HTML 中放置 PHP 变量，只需关闭 PHP 标记并使用它会更容易/更易读。

**msgboard.php：**

```
<?
while($post = mysql_fetch_array($resultados))
{
?>
    <div class="post">
        <div class="user"><b><?= $post["user"]?></b></div>
        <div class="txt"><?= $post["msg1"]?></div>
    </div>
    <div id="comments_contaner">
<?
    // This code can be ommited as you can just call updateShouts() upon page load to fetch the comments
    $comments = mysql_query("SELECT * FROM table WHERE masterid = '{$post['id']}' ORDER BY id ASC");
    while($comment = mysql_fetch_array($comments))
    {
?>
        <div class="comment">
            <div class="txt"><b><?= $comment['user'] ?></b> <?= $comment['msg1'] ?></div>
        </div>
<?
    }
?>
    </div>
    <div class="commentform">
        <form action="board.php" method="post">
            <input type="text" size="75" name="message" id="message1">
            <input type="hidden" name="masterid" value="<?= $post['id'] ?>">
            <input type="submit" name="Submit" value="Enviar">
        </form>
    </div>
<?
}
?> 
```

**第 2 步：创建一个 PHP 函数来更新评论**

这个函数只会输出评论，它需要`masterid`作为参数知道要输出哪些评论。

**更新评论.php：**

```
<?
    $masterid = $_GET['masterid']
    $comments = mysql_query("SELECT * FROM table WHERE masterid = '{$masterid}' ORDER BY id ASC");
    while($comment = mysql_fetch_array($comments))
    {
?>
        <div class="comment">
            <div class="txt"><b><?= $comment['user'] ?></b> <?= $comment['msg1'] ?></div>
        </div>
<?
    }
?> 
```

**第 3 步：在针对容器 div 的脚本中调用 PHP 更新函数**

您需要`$row['id']`在 URL 中作为参数传递

```
<script type="text/javascript">
    var PHP = "updateComments.php?masterid=<?= $post['id']?>";  

    function updateShouts(){
        $('#comments_contaner').load(PHP);       
    }

    window.setInterval( "updateShouts()", 4000 );
</script> 
```

**PD：**我没有测试过这段代码，它只是向你展示主要思想。

**编辑：**更正变量名称并添加注释。

# c++ - 关于代码的一些优化（计算向量的等级）？

> ID：13849845
> 
> 赞同：0
> 
> 时间：2012-12-12T22:32:41.370
> 
> 标签：c++, c, sorting, optimization

以下代码是计算向量的绑定秩的函数（性能关键）：

```
//The function here is to compute tied-ranks: answers.com/topic/tied-rank
mergeSort(x,inds,ci);
//mergeSort(): to sort vector x of length ci, also returns keys (inds) of x.

int tj=0;
double xi=x[0];

for (int j = 1; j < ci; ++j)
{
    if (x[j] > xi)
    {
        double rankvalue = 0.5 * (j - 1 + tj);

        for (int k = tj; k < j; ++k)
        {
            ranks[inds[k]] = rankvalue;
        };

        tj = j;
        xi = x[j];
    };      
};

double rankvalue = 0.5 * (ci - 1 + tj);

for (int k = tj; k < ci; ++k)
{
    ranks[inds[k]] = rankvalue;
}; 
```

问题是，假定的性能瓶颈 mergeSort()，即 O(NlogN) 比代码的其他部分（即 O(N)）快几倍，这表明其他部分还有很大的改进空间代码，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:40:35.700

该算法似乎具有二次行为：如果`x[0]`是序列中的最大值，则保持`tj`内部迭代。您的意思是使用and吗？`0``ci``x[inds[0]]``x[inds[j]]`

# php - PHP：弹出显示应用服务器超时

> ID：13849847
> 
> 赞同：2
> 
> 时间：2012-12-12T22:32:50.580
> 
> 标签：php, session-timeout

我有一个用 codeIgniter 编写的 PHP 应用程序。从客户那里收到一些关于应用程序超时的投诉。他们的会话在两个小时不活动后超时，他们似乎不记得了。

有没有办法，如果有，如何在用户会话超时时显示弹出消息？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T22:36:26.247

`PHP`无法自行显示弹出窗口，但您可能会`JavaScript`查询会话状态并在会话过期时显示弹出窗口，或者更好的是，计算会话打开以来的时间并提前让用户知道他的会话即将超时

如果您想更改会话的持续时间，请在您的`config.php`

```
$config['sess_expiration']      = 7200; 
```

7200 是 120 分钟 * 60 秒。如果将其更改为`0`，会话将不会过期。

要添加警告，最简单的方法可能是添加`JavaScript`类似于

```
setTimeout(function(){alert("Your session will expire in 5 minutes")},6900000); // 6900 seconds (115 minutes) * 1000 milliseconds 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T22:43:52.190

你可以这样做：

*   使用计时器的 Javascript 函数（并在一段时间后显示弹出窗口）
*   在 PHP 中使用您设置的计时器`$_SESSION`并计算时间戳的差异（当用户被重定向到登录页面时，传递一条消息“您的会话已超时”）
*   使用元等效标记的硬超时/页面重定向到会话超时页面。

您甚至可以为不同的用户组提供不同的超时时间......

一个使用 PHP 的示例，它将他们注销，告诉他们并在他们重新登录后重定向：

```
// get time now
   $now = time();

// Set session period
   $autologout = '7200';

if (isset($_SESSION["TimeOut"]))
{   
    if ($now > $_SESSION["TimeOut"])
    {
    // Unregister session and set message
        session_unregister("authenticatedUser");
        session_register("loginMessage");
        $loginMessage = "Your session has timed out";

    // Capture request URL and store in a cookie so that they 
    // are logged back into the page they were requesting
        $requestURL = $_SERVER[REQUEST_URI];
        setcookie("requestURL",$requestURL,"0",'/','',FALSE,TRUE);

    // Redirect back to login page
        header("Location: " . $loginScript);
        exit;
    } else {
        $_SESSION['TimeOut'] = ($now + $autologout);
    }
} else {
        $_SESSION['TimeOut'] = ($now + $autologout);
} 
```

这假定您的系统会话超时时间更长或以其他方式设置。它也不是为 codeIgnitor 编写的，但希望有助于理解可以做些什么来减轻会话到期的打击。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T22:38:37.050

可能您的会话 maxlifetime 是 2 小时。您可以使用以下命令对其进行编辑：（将 8 替换为以小时为单位的最大生命周期）。

```
 ini_set(’session.gc_maxlifetime’, 8*60*60); 
```

# c# - 在 WPF GUI 类中处理串行线程事件

> ID：13849850
> 
> 赞同：1
> 
> 时间：2012-12-12T22:33:20.040
> 
> 标签：c#, wpf, events, .net-4.0, serial-port

我有一个串口类，我想通过我的 GUI 控制发送/接收，并根据从串口（或其他事件）接收数据来更新 GUI。所以两个相关的类是串行类和主窗口类。

我有下面的代码可以编译，但是当我尝试运行时出现异常。

```
public class MySerThread
{
    public SerialPort serport;
    public event SerialDataReceivedEventHandler newSerData;

    public MySerThread()
    {
        serport = new SerialPort("COM1", 115200);
        serport.Open();
        serport.DataReceived += DataReceivedHandler;
    }

    public void DataReceivedHandler(object s, SerialDataReceivedEventArgs e)
    {
        byte[] data = new byte[serport.BytesToRead];
        serport.Read(data, 0, data.Length);

        // here's where I think I'm going wrong?
        if(newSerData != null)
            newSerData(s,e);
    }
} 
```

然后在我的 GUI 类中......

```
public partial class MainWindow : Window
{
    MySerThread myPort;

    public MainWindow()
    {
        // Exception triggers here
        myPort.newSerData += DisplaySerDataHandler;
    }

    private void DisplaySerDataHandler(object sender, SerialDataReceivedEventArgs e)
    {
        this.ReceivedCallback(e);
    }

    private void ReceivedCallback(SerialDataReceivedEventArgs e)
    {
        if(this.someTextBlock.Dispatcher.CheckAccess())
        {
            this.UpdateTextBlock(e);
        }
        else
        {
            this.someTextBlock.Dispatcher.BeginInvoke(new Action<SerialDataReceivedEventArgs>(this.UpdateTextBlock), e);
        }
    }

    private void UpdateTextBlock(SerialDataReceivedEventArgs e)
    {
        someTextBlock.Text = "got new data";
    }
} 
```

那么，我在这里做错了什么？做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T23:06:18.003

如果不创建实例，您将无法访问 myPort。

```
MySerThread myPort = new MySerThread(); 
```

# java - 添加更多对象时，Java Runtime.freeMemory() 返回奇怪的结果

> ID：13849851
> 
> 赞同：0
> 
> 时间：2012-12-12T22:33:21.280
> 
> 标签：java, memory-management, garbage-collection

不管出于什么原因，我想看看我可以创建和填充多少个对象`LinkedList`。我曾经`Runtime.getRuntime().freeMemory()`在我的 JVM 中获得可用内存的近似值。我写了这个：

```
public static void main(String[] arg) {
    Scanner kb = new Scanner(System.in);
    List<Long> mem = new LinkedList<Long>();
    while (true) {
        System.out.println("Max memory: " + Runtime.getRuntime().maxMemory() + ". Available memory: " + Runtime.getRuntime().freeMemory() + " bytes. Press enter to use more.");
        String s = kb.nextLine();
        if (s.equals("m"))
        for (int i = 0; i < 1000000; i++) {
            mem.add(new Long(Long.MAX_VALUE));
        }
    }
} 
```

如果我输入`m`，应用程序会向列表中添加一百万个`Long`对象。你会认为对象越多（我们有引用，所以不能被 gc'ed），可用内存就越少。运行代码：

```
Max memory: 1897725952\. Available memory: 127257696 bytes.
m
Max memory: 1897725952\. Available memory: 108426520 bytes.
m
Max memory: 1897725952\. Available memory: 139873296 bytes.
m
Max memory: 1897725952\. Available memory: 210632232 bytes.
m
Max memory: 1897725952\. Available memory: 137268792 bytes.
m
Max memory: 1897725952\. Available memory: 239504784 bytes.
m
Max memory: 1897725952\. Available memory: 169507792 bytes.
m
Max memory: 1897725952\. Available memory: 259686128 bytes.
m
Max memory: 1897725952\. Available memory: 189293488 bytes.
m
Max memory: 1897725952\. Available memory: 387686544 bytes. 
```

可用内存波动。这是怎么发生的？GC 是否正在清理其他东西（堆上还有哪些其他东西需要真正清理？），该`freeMemory()`方法是否返回了一个离我们很远的近似值？我错过了什么还是我疯了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T23:09:05.473

随着您消耗更多内存，堆会增长。请注意，`freeMemory()`报告相对于当前堆大小的使用情况，可能会增长。检查`totalMemory()`而不是`maxMemory()`. 如果我没记错的话。

或者您是在问正在分配的哪些内容可能会被垃圾收集？

*   `Random`你在循环中分配
*   在从 OS 流中读取、解析为字符、然后解析为行的过程中分配的对象
*   可能在调用期间分配了一些东西来检查空闲内存本身

# maven - maven 程序集提取错误的依赖项

> ID：13849854
> 
> 赞同：9
> 
> 时间：2012-12-12T22:33:34.317
> 
> 标签：maven, maven-3, maven-assembly-plugin

当我使用程序集插件时，我得到了一个意外版本的依赖项（1.5.8），但没有其他地方。在我的 pom 中，我有：

```
 <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>1.6.0</version>
    </dependency> 
```

当我运行`dependency:tree`or`dependency:list`时，我看到了正确的版本并且只有正确的版本。当我签入 Eclipse 时，我只看到正确的版本。

在我的 assembly.xml 我有：

```
<dependencySets>
    <dependencySet>
        <outputDirectory>lib</outputDirectory>
    </dependencySet>
</dependencySets> 
```

在生成的 zip 中，我得到 slf4j-log4j12-1.5.8.jar。不知道这是从哪里来的。有什么帮助吗？

使用 Maven 3.0.4。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-13T14:59:26.247

这是由于“错误”的程序集插件版本 (2.2-beta-5)。我的 pom.xml 没有指定插件版本。当我将其明确标记为 2.4（或您阅读本文时的最新版本！）时，插件提取了正确的依赖项。

经验教训 - 如果您在构建中收到以下警告：

```
[WARNING] 'build.plugins.plugin.version' for org.apache.maven.plugins:maven-whatever-plugin is missing
It is highly recommended to fix these problems because they threaten the stability of your build. 
```

.. 修理它！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T00:06:45.057

1.  您可以尝试从您的 maven 存储库中删除错误的 JAR (slf4j-log4j12-1.5.8.jar) 并在那里添加正确的 JAR (slf4j-log4j12-1.6.0.jar)。`--offline`然后使用开关运行您的构建。在 maven 尝试获取错误 JAR 的那一刻，构建将失败，并且 maven 将向您展示它试图从什么传递依赖中获取它。然后你用这个将它从传递依赖中排除：

    ```
    <exclusions>
      <exclusion>
        <artifactId>slf4j-api</artifactId>
        <groupId>slf4j-log4j12</groupId>
      </exclusion>
    </exclusions> 
    ```

2.  检查您获得的 JAR 是否具有正确的 groupId。~~有些人会出于愚蠢和邪恶~~的特殊目的创建常见 JAR 的副本，这可能会使 maven 感到困惑。特别是，检查您是否没有得到`org.jboss.resteasy:slf4j-log4j12`替代。您可以使用 maven-enforcer-plugin 禁止不需要的依赖项，如下所示：

    ```
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-enforcer-plugin</artifactId>
      <version>1.0</version>
      <executions>
        <execution>
          <id>enforce-banned-dependencies</id>
          <goals>
             <goal>enforce</goal>
          </goals>
          <configuration>
            <rules>
              <bannedDependencies>
                <excludes>
                  <exclude>org.slf4j:slf4j-log4j12:1.5.8</exclude> <!-- Wrong version, dude! -->
                  <exclude>commons-logging:*</exclude> <!-- Worst, stupidest, lamest logging framework ever! -->
                  <exclude>org.jboss.resteasy:slf4j-simple</exclude> <!-- Evil JAR duplication. -->
                  <exclude>org.jboss.resteasy:slf4j-api</exclude> <!-- Evil JAR duplication. -->
                  <exclude>org.jboss.resteasy:slf4j-log4j12</exclude> <!-- Evil JAR duplication. -->
                  <exclude>org.jboss.resteasy:jackson-core-asl</exclude> <!-- Evil JAR duplication. -->
                  <exclude>org.jboss.resteasy:jackson-mapper-asl</exclude> <!-- Evil JAR duplication. -->
                  <exclude>org.jboss.resteasy:jackson-core-lgpl</exclude> <!-- Evil JAR duplication. -->
                  <exclude>org.jboss.resteasy:jackson-mapper-lgpl</exclude> <!-- Evil JAR duplication. -->
                  <exclude>org.codehaus.jackson:jackson-core-lgpl</exclude> <!-- Two distinct packages for the exact same thing always creates conflicts. We want the ASL one. -->
                  <exclude>org.codehaus.jackson:jackson-mapper-lgpl</exclude> <!-- Two distinct packages for the exact same thing always creates conflicts. We want the ASL one. -->
                  <exclude>velocity-tools:velocity-tools</exclude> <!-- Was renamed. -->
                  <exclude>velocity:velocity</exclude> <!-- Was renamed. -->
                  <exclude>struts:struts</exclude> <!-- Was renamed. -->
                  <exclude>javassist:javassist</exclude> <!-- Was renamed. -->
                  <exclude>axis:*</exclude> <!-- Was renamed to org.apache.axis:* and wsdl4j:wsdl4j . -->
                  <exclude>commons-beanutils:commons-beanutils-core</exclude> <!-- Redundant package. -->
                  <exclude>xpp3:xpp3_min</exclude> <!-- Redundant package. -->
                  <exclude>xml-apis:xml-apis:2.0.0</exclude> <!-- Bad package, for some strange reason 2.0.x is inferior to 1.4.x. -->
                  <exclude>xml-apis:xml-apis:2.0.2</exclude> <!-- Bad package, for some strange reason 2.0.x is inferior to 1.4.x. -->
                  <exclude>quartz:quartz</exclude> <!-- Was renamed. -->
                </excludes>
              </bannedDependencies>
            </rules>
          </configuration>
        </execution>
      </executions>
    </plugin> 
    ```

# php - 如何使用一个查询计算多个表中的行数

> ID：13849859
> 
> 赞同：0
> 
> 时间：2012-12-12T22:34:09.340
> 
> 标签：php, mysqli

我的数据库包含有关特定项目的信息。每个项目由多个部分组成，每个部分都有一个或多个照片库。我想知道我是否可以仅使用一个查询来计算与任何给定项目相关的项目部分、画廊和照片的数量。目前系统中有 1 个项目，包含 3 个部分、5 个画廊和 302 张照片。

这个查询（感谢来自 SO 的许多人）可以很好地计算每个项目的零件数量，目前是 3：

```
// count number of parts per project
$conn = dbConnect('query');
$galNumb = "SELECT COUNT(*) FROM pj_parts WHERE pj_id = ?";
$stmt = $conn->prepare($galNumb);
$stmt->bind_param('i', $project);
$stmt->bind_result($galTotal);
$stmt->execute();
$stmt->store_result();
$stmt->fetch(); 
```

可以将其更改为不仅计算零件数量（pj_part），而且还计算各自表格中画廊和照片的数量？我正在尝试简化我的查询并了解有关使我的代码高效的更多信息。任何帮助将不胜感激。

更新：

我不确定如何在这里进行表格结构格式化，但这里是纯文本：

```
pj_parts
pj_part_id (primary key)
pj_id (project number)
pj_part (part number within project)

pj_part_galleries
pj_gallery_id (primary key)
pj_id (project number)
pj_part (part number within project)
pj_gallery (gallery number)

pj_photos
pj_photo_id (primary key)
pj_id (project number)
pj_part (part number within project)
pj_gallery_number 
```

我希望这会有所帮助，如果没有，请告诉我如何重新格式化它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:39:50.590

如果你使用 UNION

```
SELECT 'pj_parts' as tablename, COUNT(*) as c 
    FROM pj_parts WHERE something=something
UNION 
SELECT 'pj_galleries' as tablename, COUNT(*) as c 
    FROM some_other_table WHERE something=something
UNION 
SELECT 'pj_photos' as tablename, COUNT(*) as c 
    FROM some_other_other_table WHERE something=something 
```

你会得到这个

```
tablename         |   c
------------------+--------
pj_parts          |  3
pj_galleries      |  5
pj_photos         |  302 
```

您可以遍历它以填充数组或其他任何内容（问题未指定）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T22:40:05.650

怎么样：

```
SELECT 
COUNT(DISTINCT p.pj_part_id) AS parts,
COUNT(DISTINCT g.pj_gallery_id) AS galleries,
COUNT(DISTINCT ph.pj_photo_id) AS photos,
 FROM 
pj_parts p
LEFT JOIN pj_part_galleries g ON (g.pj_part = p.pj_part_id)
LEFT JOIN pj_part_photos ph ON (ph.pj_part = p.pj_part_id)
WHERE p.pj_id = ? 
```

您必须添加正确的表/列名称。

编辑：如果使用 mysqli，您可以执行以下操作来绑定：替换：

```
$stmt->bind_result($galTotal); 
```

和：

```
$stmt->bind_result($partsTotal,$galleriesCount,$photosCount); 
```

注意：这里我将 $galTotal 更改为 $partsTotal。

Edit2：更新为使用列/表名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T22:40:07.053

猜测你的结构，但像这样？

```
SELECT 
    COUNT(DISTINCT p.part_id) parts ,
    COUNT(DISTINCT g.gal_id) galleries ,
    COUNT(DISTINCT ps.pic_id) photos
FROM pj_parts p
    LEFT JOIN {galleries} g on p.part_id = g.part_id
    LEFT JOIN {photos} ps on g.gal_id = ps.gal_id
WHERE p.pj_id = ? 
```

# git - 连接到远程存储库的 Git 和 .ssh 问题

> ID：13849860
> 
> 赞同：0
> 
> 时间：2012-12-12T22:34:11.943
> 
> 标签：git, ssh

我正在尝试使用 Git 连接到大学远程存储库。我已将大学生成的私钥放在主目录下的 .ssh 文件夹中。但是，当我尝试连接到大学服务器时，系统会要求我输入密码。有谁知道这是什么原因？私钥是否有任何命名限制？当被要求输入密码时，我必须指向 RSA 吗？非常欢迎任何建议

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:38:19.660

公钥应该命名为 authorized_keys 并放在 /home/username/.ssh 目录中。

它还需要只读文件权限，例如：

```
chmod 400 .ssh/authorized_keys 
```

应该这样做。

# objective-c - Segue 可见后 BarButtonItem 更改

> ID：13849861
> 
> 赞同：0
> 
> 时间：2012-12-12T22:34:12.147
> 
> 标签：objective-c, ios, uibarbuttonitem, segue

我有一个带有导航控制器的应用程序，它对另一个视图控制器进行 segue，然后检查 viewDidLoad 中是否存在对象（可能存在也可能不存在）。然后，如果对象存在，它会更新 barButtonItem 的名称。问题是我可以看到按钮在发生 segue 时扩展以适应新名称。

如何在加载视图之前更改此按钮，以便看不到此跳跃按钮效果？不应该在 viewDidAppear 之后才能看到在 viewDidLoad 中所做的更改吗？

# vba - Excel VBA function unintentionally calls another function in module

> ID：13849862
> 
> 赞同：0
> 
> 时间：2012-12-12T22:34:29.843
> 
> 标签：vba, excel

This is probably a quick fix, but I am new to VBA and I'm somewhat confused. I have a module:

```
Function classify (r As Range)
Debug.Print("Text")
End Function

Function foo(r As Range)
Debug.Print(r.Count)
End Function 
```

There is working code before and after the module.

If, in a cell in excel, I write `=foo(A1)` and then press enter, I get the following output:

```
 1 
Text 
```

Why? How did foo call classify? Moreover, if I just call '=classify(A1)', I get

```
Text
Text 
```

Has classify somehow been set to always get called? Any help is greatly appreciated

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T23:35:52.890

The only way that I could reproduce your issue was with the following scenario:

```
Cell A1:
=foo(A1)

Cell A2:
=classify(A1) 
```

When updating cell A1 I get

```
1
Text 
```

I think this is due to the fact that Cell A2 has a reference to A1 so by updating A1 I also call the formula in A2 as it is referencing A1.

Assuming your formula that you are entering is in A1 I would trace dependents to see where the other formula is.

# .net - NUnit GUI 偶尔会在我们的桌面应用程序中抛出 System.AccessViolationException

> ID：13849865
> 
> 赞同：2
> 
> 时间：2012-12-12T22:34:43.183
> 
> 标签：.net, unit-testing, user-interface, nunit, devforce

（我打开了这个新问题，因为这是关于桌面应用程序，它不是 ASP.NET 或 ASP.NET MVC，而且我们不使用 MVCContrib，这种现象不是特定于 .NET 版本的。）但是我们使用 NUnit 和 Moq 和一个一堆东​​西，比如 Unity、IdeaBlade、DevExpress、Crystal Reports 只是提到其中的一些。症状：仅使用 nUnit GUI，并且无法预测。有时它不会出现，但是当发生某些事情时，很多测试都会失败，例如：

`CompanyName.Shared.Services.Test.UnitTests.ApplicationServicesTest.CanLogin_WhenLoginFails_ReturnsFalse: System.AccessViolationException : Attempted to read or write protected memory. This is often an indication that other memory is corrupt.`

如果系统进入这种状态，即使我关闭 nUnit GUI 并再次打开它也无济于事。唯一有帮助的是*重新启动*机器（！！！o_O）。

这可能是 nUnit GUI 本身的一些错误吗？我只是说，因为我们有 8500 多个测试，这构成了一个*巨大*的树视图内容！如果所有测试都运行，nUnit 会消耗 2+ GB RAM，并消耗大量句柄（我说的是 Windows 原生句柄“资源”）。

我尝试了 NUnit 2.5.3 和 2.6.2，它们都受到了影响。很长一段时间我们的解决方案是VS2008，现在是VS2012。它似乎也不依赖于 .NET 版本。

# c# - 登录成功后如何在URL中添加用户的用户名/ID？

> ID：13849870
> 
> 赞同：0
> 
> 时间：2012-12-12T22:35:09.977
> 
> 标签：c#, asp.net

在我的 Web 应用程序中，我希望页面 URL 通过他的用户名/ID 指向当前用户

所以当我更改用户名时，浏览器会将我移动到另一个用户名页面。

例如像这样：www.XYZcom/Member.aspx?userID="012345"

我想这样做是因为我有一个搜索方法，当我点击生成的超链接时，该链接会将我返回到我自己的个人资料，而不是我点击的用户名。

我正在使用 c# 和 ASP.NET。

我希望我的问题很清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:42:08.117

```
HttpContext.Current.Request.QueryString.Add() 
```

在您的文件中包含 System.Data 并使用 HttpContext 获取和设置 url 的参数。

您说您使用的是 c#，所以这是在文件或控制器的代码中使用 C# 的示例。您也可以使用 java 脚本在客户端上完成此操作，但我将等待您对尝试附加到 url 的位置的响应。

# qt - Qt 创建者 4.8.4。windows 7 - 64位安装

> ID：13849872
> 
> 赞同：3
> 
> 时间：2012-12-12T22:35:13.003
> 
> 标签：qt, windows-7, installation

我在使用 QT 时遇到了一些困难，我需要在学校学习一些 GUI 应用程序。

我最近做了这些步骤：

1)使用默认设置`mingw-get-inst-20120426.exe`从[SourceForge](http://sourceforge.net/projects/mingw/files/Installer/mingw-get-inst/)安装到 C:\MinGW\。

2) Qt 库 4.8.4 for Windows (minGW 4.4, 317 MB) 从[QT Project](http://qt-project.org/downloads)安装到 C:\Qt\ 默认设置。这里发生错误：

```
 !!!There is a problem with your MinQW instalation
    !!!g++ not found in c:\MinGW\bin\
    !!!Do you still want to continue? Yes 
```

我检查了 c:\MinGW\bin\ 没有这样的文件

3) Qt Creator 2.6.0 for Windows (51 MB)也从[QT](http://qt-project.org/downloads)安装到 C:\Qt\gtcreator-2.6.0 默认设置

4) 运行 QT IDE

5) 打开项目或创建新项目。这里出现另一个错误

```
!!!No valid kits fond. 
```

Qt Creator 使用无效的套件 Desktop 来解析项目。

6）打开Options->Build & Run->Kits（但我不知道应该如何设置Kits以及在哪里找到它们）。

7）你能帮我吗，如何设置Qt版本（Options->Buid&Run->Qt Version）？我在哪里可以找到 qmake.exe？

我也没有找到如何创建 GUI 应用程序。新文件或项目中没有这样的选项...

感谢帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T16:24:06.850

这很棘手；）

预编译的 Qt (MinGW) 只有 win32（不是 win64）。

预编译的 Qt 是使用 MinGW-g++ 4.4 编译的，不能与其他版本一起使用。

你必须下载*这个*： http: [//get.qt.nokia.com/misc/MinGW-gcc440_1.zip](http://get.qt.nokia.com/misc/MinGW-gcc440_1.zip)

//// 编辑：使用这个版本的 MinGW，gdb*将无法*工作（它不支持 python）。尽管 QtSDK 已被废弃（您不会在 qt-project.org 上找到它），但我强烈建议下载此在线安装程序，并且在选择组件期间仅标记 MinGW。它将带有名为“pythongdb”的文件夹。

[http://www.developer.nokia.com/info/sw.nokia.com/id/da8df288-e615-443d-be5c-00c8a72435f8/Qt_SDK.html](http://www.developer.nokia.com/info/sw.nokia.com/id/da8df288-e615-443d-be5c-00c8a72435f8/Qt_SDK.html) （您可能需要注册。它是免费的。）////

通过 g++.exe 添加“编译器”

通过 qmake.exe 添加“Qt 版本”。

使用上面配置的编译器和 Qt 版本添加“工具包”。您可以尝试将调试器从 CDB 更改为 GDB。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T23:32:06.640

When you installed mingw, did you select the C++ compiler? It is not selected by default but you need it. Re-run the wizard and select that.

The kit is not valid because the C++ compiler cannot be found: try to install it first. If you still cannot setup this read the manual: [http://doc-snapshot.qt-project.org/qtcreator-2.6/creator-targets.html](http://doc-snapshot.qt-project.org/qtcreator-2.6/creator-targets.html). It is very complete.

qmake.exe is in *qt_directory*/bin/qmake.exe.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-17T18:04:19.250

试试这个：

[http://sourceforge.net/projects/mingw-w64/](http://sourceforge.net/projects/mingw-w64/)（由于 sourceforge.net 上的 mingw-w64 项目正在迁移到 mingw-w64.org，我建议使用[mingw-w64.org](http://mingw-w64.org)）

这个对我有用。

# javascript - 在 java 类响应之前触发 Ajax 成功函数

> ID：13849875
> 
> 赞同：1
> 
> 时间：2012-12-12T22:35:37.433
> 
> 标签：javascript, jquery, ajax, twitter-bootstrap

我正在使用 ajax 创建一个登录函数，并且遇到一个问题，即在获得 ajax 响应之前成功函数 (SuccessLogin) 会触发。我正在将代码作为 Eclipse 中的 google Web 应用程序运行，并且在调试 java 类文件时可以看到，在调试器捕获类文件中的断点之前，javascript 会针对类的成功响应为 false 发出警报。我现在只写了几个月的代码，所以我确信这是我的一个愚蠢的小错误。

```
$(document).ready(function() {

    sessionChecker()

    // sign in 
    $('#signInForm').click(function () {        
        $().button('loading') 
           var email = $('#user_username').val();   
           sessionStorage.email = $('#user_username').val();       
           var password= $('#user_password').val();

           var SignInRequest = {
                type: "UserLoginRequest",
                email: email,
                password: password
           }

           var data= JSON.stringify(SignInRequest);

           //disabled all the text fields
           $('.text').attr('disabled','true');

           //start the ajax
           $.ajax({

               url: "/resources/user/login", 

               type: "POST",

               data: data,     

               cache: false,

               success: successLogin(data)
           });       

       });

    //if submit button is clicked
   $('#Register').click(function () {        
        $().button('loading') 
        var email = $('#email').val();       

        if ($('#InputPassword').val()== $('#ConfirmPassword').val()) {
            var password= $('input[id=InputPassword]').val();
        } else {alert("Passwords do not match"); 
            return ;}
        var UserRegistrationRequest = {
                type: "UserRegistrationRequest",
                email: email,
                password: password
        }

        var data= JSON.stringify(UserRegistrationRequest);

        //disabled all the text fields
        $('.text').attr('disabled','true');

        //start the ajax
        $.ajax({

            url: "/resources/user/register", 

            type: "POST",

            data: data,     

            cache: false,

            success: function (data) {              

                if (data.success==true) {                  
                    //hide the form
                    $('form').fadeOut('slow');                 
                    //show the success message
                    $('.done').fadeIn('slow');
                } else alert('data.errorReason');               
            }       
        });

        return false;
    });
}); 

function successLogin (data){
       if (data.success) {                 
            sessionStorage.userID= data.userID
            var userID = data.userID
            sessionChecker(userID);
        } else alert(data.errorReason); 
       }

//session check
function sessionChecker(uid) {
    if (sessionStorage.userID!= null){
        var userID = sessionStorage.userID
    };

    if (userID != null){

        $('#user').append(userID)
        $('#fat-menu_1').fadeOut('slow')                
        $('#fat-menu_2').append(sessionStorage.email).fadeIn('slow') };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:44:44.390

您需要将您的成功包装在一个匿名函数中，以便它在 AJAX 调用的范围内执行，而不是内联（立即）执行：

```
success: function() { successLogin(data) } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T23:00:14.883

`success: successLogin(data)`

函数调用和函数定义是有区别的：

*   函数定义使用`function`关键字并包含函数体`{...}`
*   函数调用将括号（参数列表）附加到函数名称并实际调用函数以返回值

如果您为该属性分配一个函数调用，它将返回一个值，该值将被存储。为避免这种情况，如果您的函数不带任何参数，您可以使用函数名称，或者如果您的函数确实带参数，请将您的函数调用嵌入到另一个函数的定义中：

*   无参数：`success: successLogin`
*   有参数：`success: function() { successLogin(data); }`

# c++ - C++ 将输入与文本文件中的数据匹配，如果匹配则仅显示该数据

> ID：13849876
> 
> 赞同：0
> 
> 时间：2012-12-12T22:35:38.703
> 
> 标签：c++, visual-studio-2010, visual-c++

我对以下部分有疑问。此特定部分应执行以下操作：列出所选讲师教授的所有模块

我正在努力将用户的输入与文本文件中的数据进行部分匹配，并且只显示所选讲师教授的模块列表。

我有一个名为：Taught.txt 的文本文件，文本文件的内容如下：

```
IS1S01  AW 
IS1S02  MG 
SE2S552 BM 
CS2S504 BM 
CS3S08  SL 
MS3S28  DJ
CS1S03  EM 
BE1S01  SJ 
BE2S01  SH 
SS1S02  AB 
SE1S02  AW 
```

下面的部分是我到目前为止所做的代码。

```
void listofmodulebylecturer()
{
    std::string Lecturer;
    std::string Module;

    // Display message asking for the user input
    std::cout << "\nList all modules taught by selected lecturers." << std::endl;
    std::cout << "Enter your preferred lecturers." << std::endl;

    // Read in from the user input
    std::cin >> Lecturer;

    // Read from text file and Display list of modules taught by the selected lecturer

    std::ifstream infile;

    // infile.open("Lecturer");
    infile.open("Taught.txt");

    if (!infile)
    {
        std::cout << "List is empty" << std::endl;
    }
    else
    {
        std::cout << "\nList of Modules:" << std::endl;

        while(!infile.eof())
        {
            getline(infile,Module);

            std::cout << Module << std::endl;
        }

        std::cout << "End of list\n" << std::endl;
    }

    infile.close();         // close the text file  
    system ("PAUSE");
} 
```

我正在考虑使用

```
if (........)
{
}
else 
```

我想知道这是否可以工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:44:13.977

使用`infile.eof()`不能可靠地用于您想要使用它的目的。如果第二个单词与预期匹配，您应该阅读两个单词并打印第一个单词。读这些词看起来像这样：

```
for (std::string module, teacher; infile >> module >> teacher; ) {
    // check if the teacher is the correct one and, if so, print the module
} 
```

...而且，是的，一个`if`声明适用于此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T22:54:17.140

由于每一行只包含两个字符串，我不会使用`getline()`，但这个：

```
std::string course, teacher;

while (infile) {
    infile >> course >> teacher;
    if (infile) { // strings read correctly
        if (teacher == Lecturere) {
         ...
        }
    }
} 
```

# sql - 在 SQL 查询中创建日期时间列

> ID：13849878
> 
> 赞同：0
> 
> 时间：2012-12-12T22:35:52.457
> 
> 标签：sql, sql-server-2000

我正在写一份显示响应时间的报告。请求可以随时进入，但在下午 5:30 和上午 7:30 之前完成的任何请求都应默认为上午 7:30 作为请求时间

```
SELECT 
   Meeting_Invites.Invite_ID, ResponseDateTime, 
   REPLACE(CONVERT(varchar(5), ResponseDateTime, 108), ':', '') AS Time,
   CASE 
      WHEN REPLACE(CONVERT(varchar(5), ResponseDateTime, 108), ':', '') > 1730 OR 
           REPLACE(CONVERT(varchar(5), ResponseDateTime, 108), ':', '') < 0730 
      THEN 1 
      ELSE 0 
   END AS NextDay, 
   CASE 
      WHEN REPLACE(CONVERT(varchar(5), ResponseDateTime, 108), ':', '') > 1730 
        THEN 'Next Day' 
      WHEN REPLACE(CONVERT(varchar(5), ResponseDateTime, 108), ':', '') < 0730 
        THEN 'Same Day' 
      ELSE '' 
   END AS DateType
FROM 
   Meeting_Invites 
WHERE 
   ResponseDateTime BETWEEN {ts '2012-11-01 00:00:00'} AND {ts '2012-12-15 23:59:59'}
ORDER BY 
   Time 
```

这会产生以下结果。有没有办法创建一个与我的`CreatedDate`专栏相匹配的日期？

```
ID      Date                            Time    DateType CreatedDate
--------------------------------------------------------------------------------
84613   2012-12-06 07:29:02.823 0729    1   Same Day 2012-12-06 07:30:00
84079   2012-11-11 07:47:39.947 0747    0            (Use Date column)
84048   2012-11-05 08:13:50.423 0813    0            (Use Date column)
84372   2012-11-19 08:14:23.820 0814    0            (Use Date column)
84163   2012-11-13 20:43:19.760 2043    1   Next Day 2012-11-14 07:30:00
83527   2012-11-09 21:19:52.917 2119    1   Next Day 2012-11-10 07:30:00
84374   2012-11-26 21:35:21.887 2135    1   Next Day 2012-11-17 07:30:00
82518   2012-11-08 21:59:11.413 2159    1   Next Day 2012-11-09 07:30:00 
```

我正在使用 ColdFusion 创建报告，因此我可以在运行报告时构建逻辑，但不希望这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T23:20:10.553

```
SELECT Meeting_Invites.Invite_ID, ResponseDateTime, REPLACE(CONVERT(varchar(5), ResponseDateTime, 108), ':', '') AS Time
, CASE WHEN REPLACE(CONVERT(varchar(5), ResponseDateTime, 108), ':', '') > 1730 OR REPLACE(CONVERT(varchar(5), ResponseDateTime, 108), ':', '') < 0730 THEN 1 ELSE 0 END AS NextDay
, CASE WHEN REPLACE(CONVERT(varchar(5), ResponseDateTime, 108), ':', '') > 1730 THEN 'Next Day' WHEN REPLACE(CONVERT(varchar(5), ResponseDateTime, 108), ':', '') < 0730 THEN 'Same Day' ELSE '' END AS DateType
, CASE WHEN REPLACE(CONVERT(varchar(5), ResponseDateTime, 108), ':', '') > 1730 THEN
            DATEADD(dd, 1, CONVERT(DATETIME(CONVERT(VARCHAR(10), ResponseDateTime, 121) + ' 07:30:00', 121)))
       WHEN REPLACE(CONVERT(varchar(5), ResponseDateTime, 108), ':', '') < 0730 THEN 
            CONVERT(DATETIME(CONVERT(VARCHAR(10), ResponseDateTime, 121) + ' 07:30:00', 121))
       ELSE ResponseDateTime END AS CreatedDate
FROM Meeting_Invites 
WHERE ResponseDateTime BETWEEN {ts '2012-11-01 00:00:00'} AND {ts '2012-12-15     23:59:59'}
ORDER BY Time 
```

# php - PHP 回显显示 - 缺少信息

> ID：13849880
> 
> 赞同：0
> 
> 时间：2012-12-12T22:35:58.407
> 
> 标签：php, echo

我正在尝试修复我的 .php 文件，但我发现了一些问题..

我需要使用 echo 或 print 函数从我的脚本接收到输出，但 echo 结果显示为不完整。

这是我的 .php ：

```
<?php
set_include_path(get_include_path() . PATH_SEPARATOR . 'phpseclib');

require_once "PHPTelnet.php";

$SUBSCRIBER = $_POST["SUBSCRIBER"];

$COUNT = $_POST["COUNT"];

if ($SUBSCRIBER == "HOME")

{
        echo "It's HOME<br>";

        if ($COUNT=="ACTIVE_FLOW")

        {

        echo "Value is ACTIVE_FLOW";

        $script = "exec cf2:/scripts/active_flow_count.cfg";

        }
}

echo "<pre>";

echo "<pre>"; 
```

我的回声输出是：

```
It's HOME
Value is ACTIVE_FLOW
exec cf2:/scripts/active_flow_count.cfg 

=====================================================
Application-Assurance flow record search, Version 1.0
Search Start Time:     "12/12/2012 22:23:08" (UTC)
 Search Criteria:
  group[:partition]:   1:1
  aa-sub:              1/1/1:302 (sap)
  protocol name:       none specified
  application name:    none specified
  app-group name:      none specified
  flow-status:         active
  start-flowId:        none specified
  classified:          none specified
  server-ip:           none specified
  server-port:         none specified
  client-ip:           none specified
  bytes-tx:            none specified
  flow-duration:       none specified
  max-count:           none specified
  search-type:         default
=====================================================
FlowId  Init  Src-ip                                  Dst-ip                                  Ip-prot     Src-prt Dst-prt Protocol               Application            Pkts-tx    Bytes-tx             Pkts-disc  Bytes-disc Time-ofp(UTC)         Time-olp(UTC)        
2107678 no    200.141.223.79                          10.101.75.199                           tcp         57238   1356    "ftp_data"             "FTP"                  687100     1026970850           0          0          "12/12/2012 21:00:46" "12/12/2012 22:23:09" 
```

它应该包含比这更多的行。

当他们看到这个“12/12/2012 22:23:09”双引号时，是否有可能回显停止？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:55:19.277

如果你的意思是当这个确切的日期和时间出现在你可以做的某个地方时回显“停止”这个词

```
if(preg_match("/\b\"12\/12\/2012 22:23:09\"\b/i")==true)
{
    echo "stop"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T23:08:19.127

您没有显示脚本的重要部分。您需要做的是在显示之前处理输出，这意味着将其加载到字符串中，而不是直接使用 echo() 处理它，或者使用输出缓冲区来捕获 echo() 处理的内容。然后你想找到 "12/12/2012 22:23:09" 的位置并使用 substr 来获取它和它之前的字符串的内容。请注意，下面的代码最好使用正则表达式来查找位置，但这是一个展示它如何工作的示例。

它会是这样的：

```
<?php

//....

ob_start();
if ($SUBSCRIBER == "HOME")

{
        echo "It's HOME<br>";

        if ($COUNT=="ACTIVE_FLOW")

        {

        echo "Value is ACTIVE_FLOW";

        $script = "exec cf2:/scripts/active_flow_count.cfg";

        }
}
$out = ob_get_contents();
ob_end_clean();

// Should use requex but this will work
// Find the pos of "Start Time:" then add 22 for the chars in '"xx/xx/xxxx xx:xx:xx"'
$pos = strpos($out, "Start Time:")+22;
echo substr($out, 0, $pos);

//....

?> 
```

# c# - 具有额外字段的模型

> ID：13849882
> 
> 赞同：1
> 
> 时间：2012-12-12T22:36:04.523
> 
> 标签：c#, asp.net-mvc, entity-framework

假设我有一个包含一大堆字段的表和一个为其生成的 EF 实体。假设我想为这个实体显示一个编辑表单，但是有一个不直接映射到表的额外字段。

所以我创建了一个模型类，它继承了我的实体类和我的字段。到现在为止还挺好。

问题是现在我必须在返回视图时将实体对象中的每个字段复制到模型对象，而在保存数据时则相反。当然有更清洁的方法来做到这一点？

具体示例是用户管理表单，额外字段是密码和确认密码字段，它们存储在 Membership 表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:40:10.963

最好将用于在 UI 等应用程序层之间进行通信的数据传输对象与连接到存储的原始实体分开。是的，您需要来回复制字段，但有一些工具可以帮助您完成此任务，例如[AutoMapper](http://automapper.org/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T22:57:55.787

您可以制作 EF 实体`partial`（我认为它们通常是默认的），然后将该字段添加到一个单独的文件中，该文件也具有`partial class`该类的一个。这不像伊利亚的回答那样好，但很容易。

# java - 用 Sqoop 导出 Hive 表，有些行没有分隔

> ID：13849890
> 
> 赞同：1
> 
> 时间：2012-12-12T22:36:23.973
> 
> 标签：java, hadoop, hive, amazon-emr, sqoop

我有一个使用 Hive 生成​​的表（在 Amazon Elastic MapReduce JobFlow 上）。我可以看到数据位于`hdfs:///mnt/hive_081/warehouse/[table name]`.

我已经将 Sqoop 包装在一个 jar 中（没有更改任何内容），并将其上传到主节点进行测试。

我这样运行我的 sqoop jar：

```
/usr/lib/jvm/java-6-sun/bin/java -cp /home/hadoop/conf:/usr/lib/jvm/java-6-sun/lib/tools.jar:/home/hadoop:/home/hadoop/hadoop-tools-1.0.3.jar:/home/hadoop/hadoop-tools.jar:/home/hadoop/hadoop-core-1.0.3.jar:/home/hadoop/hadoop-core.jar:/home/hadoop/lib/*:/home/hadoop/lib/jetty-ext/* -Xmx1000m -Dhadoop.log.dir=/mnt/var/log/hadoop/steps/6 -Dhadoop.log.file=syslog -Dhadoop.home.dir=/home/hadoop -Dhadoop.id.str=hadoop -Dhadoop.root.logger=INFO,DRFA -Djava.io.tmpdir=/mnt/var/lib/hadoop/steps/6/tmp -Djava.library.path=/home/hadoop/native/Linux-i386-32 org.apache.hadoop.util.RunJar /home/hadoop/fsa/anet-dw-sqoop-0.0.1-SNAPSHOT.jar $ARGS 
```

其中 $ARGS 是（省略了敏感的 mysql 标志）：

```
--export-dir hdfs:///mnt/hive_081/warehouse/[table name] --input-null-non-string '\\\N' --direct --input-null-string '\\\N' --username root --input-fields-terminated-by '\0x009' --driver com.mysql.jdbc.Driver --table [table name] 
```

我正在对我模拟的十行数据进行测试。没有空值。每一行都是唯一的，在所有列中重复相同的数字。当我执行命令时，我得到很多

```
java.lang.NumberFormatException: For input string: "231 231     231     231     231     231     231     231     231     231     231     231     231     231     231     231     231      231     231     231     231     231     -25     231     -25     -25     231     231     -25" 
```

我每次都会收到相同的四行（共 10 行）的此消息（忽略负值，这些是 TINYINT 的列，不适合该数字）。

您可以看到行中前两个值之间的空间要小得多。这是我的问题吗？什么会导致这个？仅供参考，如果我将数据文件从 HDFS 复制到本地 FS，并指向它，我不会收到此消息 - 而且数据也没有到达其目的地：/。无论如何，我正在尝试自动化多步骤过程，因此我希望能够直接对 HDFS 数据进行操作，而无需复制任何内容。

非常感谢任何建议！

**更新**：当我使用逗号作为分隔符时也会发生这种情况。观察到相同的四行。当我将 Hive 表限制为仅一行（而不是先前测试中的错误行之一）时，会发生相同的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T18:42:01.470

在 sqoop-export 的参数中，--input-fields-terminated-by 值必须不带引号。这有效：

--input-fields-terminated-by \t

# c - 在 C 中取消引用

> ID：13849899
> 
> 赞同：9
> 
> 时间：2012-12-12T22:36:57.970
> 
> 标签：c, pointers, c99, c89

我刚开始学习C，所以请善待。从我到目前为止所读到的关于指针的内容中：

```
int * test1; //this is a pointer which is basically an address to the process 
             //memory and usually has the size of 2 bytes (not necessarily, I know)
float test2; //this is an actual value and usually has the size of 4 bytes,
             //being of float type
test2 = 3.0; //this assigns 3 to `test2` 
```

现在，我不完全理解的是：

```
*test1 = 3; //does this assign 3 at the address 
            //specified by `pointerValue`?
test1 = 3;  //this says that the pointer is basically pointing 
            //at the 3rd byte in process memory, 
            //which is somehow useless, since anything could be there
&test1; //this I really don't get, 
        //is it the pointer to the pointer? 
        //Meaning, the address at which the pointer address is kept?
        //Is it of any use? 
```

相似地：

```
*test2; //does this has any sense?
&test2; //is this the address at which the 'test2' value is found? 
        //If so, it's a pointer, which means that you can have pointers pointing 
        //both to the heap address space and stack address space. 
        //I ask because I've always been confused by people who speak about 
        //pointers only in the heap context. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T22:44:26.320

好问题。

你的第一个块是正确的。指针是保存某些数据地址的变量。该指针的类型告诉代码如何解释该指针所持有的地址的内容。

构造：

```
*test1 = 3 
```

称为指针的延迟。这意味着，您可以访问指针指向的地址并像普通变量一样对其进行读写。笔记：

```
int *test;
/*
 *    test is a pointer to an int - (int *)
 *   *test behaves like an int - (int)
 *
 * So you can thing of (*test) as a pesudo-variable which has the type 'int' 
 */ 
```

以上只是我使用的助记器。

您很少为指针分配数值......也许如果您正在为具有一些“众所周知”内存地址的特定环境进行开发，但在您的水平上，我不会担心太多那。

使用

```
*test2 
```

最终会导致错误。你会试图尊重不是指针的东西，所以你可能会遇到某种系统错误，因为谁知道它指向哪里。

`&test1`并且`&test2`确实是指向`test1`和的指针`test2`。

指向指针的指针非常有用，搜索[指向指针的指针](https://www.google.com/webhp?sourceid=chrome-instant&ie=UTF-8ion=1&#hl=en&sugexp=les%3B&gs_nf=3&gs_rn=0&gs_ri=hp&gs_mss=pointer%20to%20const%20data&tok=E1-x8K21GePY3sU1D6Bxvg&cp=20&gs_id=g&xhr=t&q=pointer+to+a+pointer&pf=p&tbo=d&output=search&sclient=psy-ab&oq=pointer+to+a+pointer&gs_l=&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&bvm=bv.1355272958,d.aWM&fp=f5fe22852b21d77a&bpcl=39942515&biw=1855&bih=968)将引导您找到一些比我更好的资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T23:09:42.437

看起来你的第一部分是正确的。

`*`一个偶然的想法：关于该标志的放置位置有各种约定。我更喜欢我的变量名，就像`int *test1`其他人喜欢`int* test1`. 我不确定让它漂浮在中间有多普遍。

另一个偶然的想法：`test2 = 3.0`将浮点数 3 分配给`test2`. 使用 可以达到相同的目的`test2=3`，在这种情况下，3 会从整数隐式转换为浮点数。您选择的约定在清晰度方面可能更安全，但并非绝对必要。

非偶然事件

`*test1=3`确实将 3 分配给`test`.

`test1=3`是一条有意义的线，但我认为它毫无意义。我们不知道内存位置 3 是什么，是否可以安全地触摸它，或者即使我们被允许触摸它。

这就是为什么使用类似的东西很方便

```
int var=3;
int *pointy=&var;
*pointy=4;
//Now var==4. 
```

该命令`&var`返回 的内存位置`var`并将其存储在其中，`pointy`以便我们以后可以使用`*pointy`.

但我也可以这样做：

```
int var[]={1,2,3};
int *pointy=&var;
int *offset=2;
*(pointy+offset)=4;
//Now var[2]==4. 
```

这就是你可能合法地看到类似的东西`test1=3`：指针可以像数字一样被添加和减去，所以你可以像这样存储偏移量。

`&test1`是指向指针的指针，但这对我来说听起来有点令人困惑。它实际上`test1`是存储值的内存地址。并且`test1`恰好将另一个变量的地址作为其值存储。一旦您开始以这种方式考虑指针（内存中的地址，存储在那里的值），它们就会变得更容易使用......或者至少我是这么认为的。

我不知道`*test2`本身是否具有“意义”。原则上，它可能有一个用途，我们可以想象该`*`命令将把 的值`test2`放在内存中的某个位置，并将返回它找到的值。但是由于您定义`test2`为浮点数，因此很难预测我们最终会在内存中的哪个位置，设置`test2=3`不会将我们移动到任何东西的第三个位置（查看 IEEE754 规范以了解原因）。但如果编译器允许这样的事情，我会感到惊讶。

让我们看另一个简单的例子：

```
int var=3;
int pointy1=&var;
int pointy2=&pointy1;
*pointy1=4;  //Now var==4
**pointy2=5; //Now var==5 
```

所以你看到你可以像这样将指针链接在一起，你想要多少就行。如果您有一个指针数组，其中填充了您从动态内存创建的许多结构的地址，并且这些结构包含指向动态分配的事物本身的指针，则可能会出现这种情况。当需要使用指向指针的指针时，您可能会知道。现在，不要太担心它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T23:52:05.140

首先让我们添加一些混淆：“指针”这个词既可以指代具有指针类型的变量（或对象），也可以指代具有指针类型的*表达式*。在大多数情况下，当人们谈论“指针”时，他们指的是指针变量。

指针可以（**必须**）指向一个**事物**（标准术语中的“对象”）。它只能指向**正确**的事物；指向 int 的指针不*应该*指向浮点对象。指针也可以为 NULL；在那种情况下，没有什么可以指出的。

指针类型也是类型，指针对象也是对象。所以可以构造一个指向指针的指针：指向指针的指针只是存储指针对象的地址。

指针**不能**是什么：

*   它不能指向一个值：`p = &4;`是不可能的。4 是一个文字值，它不存储在对象中，因此没有地址。
*   表达式也是如此：`p = &(1+4);`不可能，因为表达式“1+4”没有位置。
*   返回值`p = &sin(pi);`也是不可能的；返回值不是对象，因此没有地址。
*   标记为“寄存器”（现在几乎不同）的变量不能有地址。
*   您不能获取位域的地址，主要是因为它们可能小于字符（或具有更精细的粒度），因此不同的位掩码可能具有相同的地址。

上述骨架有一些“例外”（空指针、强制转换、指向数组对象之外的一个元素），但*为清楚起见，*这些应该被视为改进/修正，恕我直言。

# javascript - 通过 Angular 资源服务读取 JSON

> ID：13849902
> 
> 赞同：25
> 
> 时间：2012-12-12T22:37:14.973
> 
> 标签：javascript, json, angularjs

如何使用`angular-resources.js`通过服务读取 JSON 文件？

我正在开发一个非常基本的 Angular 应用程序以用于测试目的，并且现在正试图从 JSON 文件中读取数据。我将此代码放在服务中，以便在移动基于服务器的数据存储时更轻松地将其换出。

我的`App`和`App.controller`声明如下：

```
'use strict';

// create module for custom directives
var App = angular.module('App', ['jsonService']);

// controller business logic
App.controller('AppCtrl', function AppCtrl($scope, JsonService) {
    console.log("marker 1");

    if (!$scope.jsonData) {
        console.log("marker 2");
        JsonService.getData(function (d) {
            console.log(d);
            $scope.jsonData = d;
            $scope.records = d.length;
        });
    } else {
        console.log("I have data already... " + $scope.jsonData);
    }

    console.log($scope.jsonData);
}); 
```

目前，我`JsonService`的定义如下：

```
'use strict';

angular.module('jsonService', ['ngResource'])
.factory('JsonService', function($resource, $filter) {
    // define the remote service using Angular's $resource module
    var service = $resource('/data/ProcessModeling-Resources.json', {});

    var JsonService = {
        // calls $resource.query() to retrieve the remote data.
        getData : function getData(callback) {
            console.log("marker 3");
            service.query(function (data) {
                console.log("marker 4");
            });
        }
    };

    return JsonService;
}); 
```

我得到的控制台输出如下：

```
marker 1 app.js:8
marker 2 app.js:11
marker 3 services.js:13
undefined app.js:21
TypeError: Object #<Resource> has no method 'push'
    at copy (http://127.0.0.1:8000/lib/angular.js:556:21)
    at new Resource (http://127.0.0.1:8000/lib/angular-resource.js:330:9)
    at http://127.0.0.1:8000/lib/angular-resource.js:386:32
    at forEach (http://127.0.0.1:8000/lib/angular.js:117:20)
    at http://127.0.0.1:8000/lib/angular-resource.js:385:19
    at wrappedCallback (http://127.0.0.1:8000/lib/angular.js:6650:59)
    at http://127.0.0.1:8000/lib/angular.js:6687:26
    at Object.Scope.$eval (http://127.0.0.1:8000/lib/angular.js:7840:28)
    at Object.Scope.$digest (http://127.0.0.1:8000/lib/angular.js:7707:25)
    at Object.Scope.$apply (http://127.0.0.1:8000/lib/angular.js:7926:24) angular.js:5582 
```

当我尝试调用 my 时收到错误消息`service.query(function (data) { }`（如果我理解正确的话）应该将我的 JSON 文件拉入。

我一直在使用[AngularJS Cats App](http://ericterpstra.com/apps/jsCats/ngCatsHOM/)作为提取数据的示例。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-12T23:46:55.397

我会遵循@pkozlowski 的建议并确保响应是一个数组。无论如何，这是一个从 JSON 文件加载数据的示例，类似于您在评论中描述的内容。它使用**ngResource**并可以帮助你把东西放在一起：[http ://plnkr.co/edit/Ofq7Md8udEnIhAPF1NgL?p=preview](http://plnkr.co/edit/Ofq7Md8udEnIhAPF1NgL?p=preview)

服务

```
angular.module('jsonService', ['ngResource'])
.factory('JsonService', function($resource) {
  return $resource('cats.json',{ }, {
    getData: {method:'GET', isArray: false}
  });
}); 
```

注意`isArray`设置为`false`。

您的应用和控制器

```
var app = angular.module('app', ['jsonService']);

app.controller('ctrl', function($scope, JsonService){
  JsonService.getData(function(data){
    $scope.name = data.name;
    $scope.children = data.children;
  });
}); 
```

`getData`实际上不需要，因为**Resource**类为您提供了一些有用的便利方法，例如`get`，您可以这样做

```
angular.module('jsonService', ['ngResource'])
.factory('JsonService', function($resource) {
  return $resource('cats.json');
});

app.controller('ctrl', function($scope, JsonService){
  JsonService.get(function(data){
    $scope.name = data.name;
    $scope.children = data.children;
  });
}); 
```

# javascript - 运算符优先级和关联性与 Math.Floor(Math.Random())

> ID：13849906
> 
> 赞同：0
> 
> 时间：2012-12-12T22:37:25.463
> 
> 标签：javascript

我了解代码的工作原理，就其给出的结果而言。首先，它获取一个随机数，其次，使用 Math.floor() 将 Math.Random 的结果四舍五入。因此，它在代码中从右向左移动。

```
Math.floor(Math.Random * num); 
```

在此 [url](http://www.javascriptkit.com/jsref/precedence_operators.shtml)的 JavaScript 参考中，如下图所示 ![网址](../Images/8d45e26fc483c6b11f9874161ea40423.png)

它说，对于点和括号，关联性是“从左到右”。但是，根据我上面摘录的代码，我会说它是“从右到左”。请解释

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T22:45:31.073

运算符的[关联性](http://en.wikipedia.org/wiki/Operator_associativity)与它们的执行顺序无关，而与它们的解析方式无关。

关联性“从左到右”意味着`a.b.c === (a.b).c !== a.(b.c)`.

当你有一个函数调用时，当然首先评估参数（至少在像 JS 这样的非惰性语言中） - 这也在规范中[定义](http://es5.github.com/#x11.2.3)。

这里发生的是：

*   `Math.floor(Math.Random * num);`根据运算符优先级和关联性的规则，被解析为[AST](http://en.wikipedia.org/wiki/Abstract_syntax_tree)：

```
-\ invocation
 +-\ function: member operator
 | +-- base: variable "Math"
 | +-- property: "floor"
 +-\ arguments list
   +-\ first: Multiplication
     +-\ left operand: member operator
     | +-- base: variable "Math"
     | +-- property: "Random"
     +-- right operand: variable "num" 
```

*   评估时，它发生自上而下。调用首先评估其函数，在`Math`and上调用成员运算符`floor`。当 this 评估为有效函数时，它会继续评估参数。乘法将首先获取其左操作数，从成员运算符 on and获得*undefined*；然后它获取变量的值。这导致，现在将调用 floor-function ，再次返回。`Math``Random``num``NaN``NaN`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T22:40:20.950

一个函数的参数没有被解析就不能被调用。这不是运算符优先级（而是执行顺序）的问题。函数调用是左关联的原因是为了使例如以下调用正常工作：

```
foo.bar.baz() 
```

由于运算符是左关联的，这等于

```
((foo.bar).baz)() 
```

这等于原始代码。如果它是右关联的，您将获得以下信息：

```
foo.(bar.(baz()) 
```

这显然会做一些完全不同的事情，这很可能根本不起作用。

顺便说一句，函数调用的优先级与成员运算符不同。有关此主题的更好参考，请参阅[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Operator_Precedence)，而不是您在问题中链接的参考。

# python - 搜索txt文件中的数据

> ID：13849909
> 
> 赞同：1
> 
> 时间：2012-12-12T22:37:44.993
> 
> 标签：python

我正在自学 python 并想学习如何搜索文本文件。例如，我有一个长长的全名和地址列表，并且希望能够输入名字，然后打印与该名称对应的详细信息。解决此问题的最佳方法是什么？谢谢！

我拥有的数据位于 .txt 文件中的列中，如下所示：

```
Doe, John        London
Doe, Jane        Paris 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:44:54.123

如果您设计了数据格式，那么固定宽度的列就不是一个很好的格式。但如果你被他们困住，他们很容易处理。

首先，您要解析数据：

```
addressbook = []
with open('addressbook.txt', 'r') as f:
    for line in f:
        name, city = line[:17], line[17:]
        last, first = name.split(',')
        addressbook.append((first, last, city)) 
```

但是现在，您希望能够按名字进行搜索。你可以这样做，但是对于一个巨大的地址簿来说可能会很慢，而且代码不会很直接：

```
def printDetails(addressbook, firstname):
    for (first, last, city) in addressbook:
        if first == firstname:
            print fist, last, city 
```

如果我们不只是使用元组列表，而是使用字典，将名字映射到另一个字段怎么办？

```
addressbook = {}
with open('addressbook.txt', 'r') as f:
    for line in f:
        name, city = line[:17], line[17:]
        last, first = name.split(',')
        addressbook[first]=((last, city)) 
```

但这不好——每个新的“John”都会删除任何以前的“John”。所以我们真正想要的是一个字典，将名字映射到元组*列表*：

```
addressbook = collections.defaultdict(list)

with open('addressbook.txt', 'r') as f:
    for line in f:
        name, city = line[:17], line[17:]
        last, first = name.split(',')
        addressbook[first].append((last, city)) 
```

现在，如果我想查看该名字的详细信息：

```
def printDetails(addressbook, firstname):
    for (last, city) in addressbook[firstname]:
        print firstname, last, city 
```

无论您采用哪种方式，都有一些明显的地方可以改进这一点。例如，您可能会注意到某些字段的开头或结尾有多余的空格。你将如何摆脱那些？如果你调用`printDetails`“Joe”而没有“Joe”，你将一无所获；也许一个很好的错误信息会更好。但是，一旦您掌握了基础知识，您以后可以随时添加更多内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T22:45:25.307

我会明智地使用该`split`命令。当然，这取决于您的文件的分隔方式，但您的示例显示分隔数据字段的字符是空格。

对于文件中的每一行，执行以下操作：

```
last, first, city = [data.strip(',') for data in line.split(' ') if data] 
```

然后根据这些属性进行比较。

*显然，如果您的数据字段中有空格，这将中断，因此在您采用这样的简单方法之前，请确保不是这种情况。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T22:43:15.760

你可以做这样简单的事情：

```
name = raw_input('Type in a first name: ')  # name to search for

with open('x.txt', 'r') as f:  # 'r' means we only intend to read
    for s in f:
        if s.split()[1] == name:  # s.split()[1] will return the first name
            print s
            break  # end the loop once we've found a match
    else:
        print 'Name not found.'  # this will be executed if no match is found 
```

```
输入名字：*简*
能源部，简巴黎

```

* * *

**相关文件**

*   [读取和写入文件](http://docs.python.org/2/tutorial/inputoutput.html#reading-and-writing-files)
*   [`open`](http://docs.python.org/2/library/functions.html#open)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T22:45:45.900

要在 python 中读取文本文件，您可以执行以下操作：

```
f = open('yourtextfile.txt')
for line in f:
    //The for-loop will loop thru the whole file line by line
    //Now you can do what you want to the line, in your example
    //You want to extract the first and last name and the city 
```

# javascript - 为什么我的实际宽度小于指定的 CSS 宽度？

> ID：13849910
> 
> 赞同：1
> 
> 时间：2012-12-12T22:37:50.720
> 
> 标签：javascript, jquery, html, css

我有一个 html 表，我对其进行了改进以允许排序、可调整大小/可移动的列和固定的标题行。固定标题导致标题单元格及其相应的内容单元格断开连接，因此调整大小`<th>`不会调整该`<td>'s`列中的大小。作为一种解决方法，我添加了一些代码来在调整大小`<td>`时手动更改相关元素内容的宽度`<th>`。在大多数情况下它似乎工作正常，但有时列宽仍然不能完全对齐。我在其中一个打嗝期间使用 chrome 开发工具检查了 html，虽然 和 上的样式`width`相同，但*实际*宽度（由 $(elt).width() 返回）比指定宽度小 3px为了`<th>``<td>`*`<th>`. 有谁知道这可能是什么原因？*

 ***编辑：**我意识到这只发生在我调整列大小以使表格的总宽度大于父 div 时。内容单元格溢出并允许我水平滚动，但`<thead>`保持其固定宽度并调整一些`<th>`较小的元素以进行补偿。

CSS：

```
.blotter {
    overflow-y: hidden;
    overflow-x: auto;
    position: relative;
    border-left: solid thin silver;
}

.blotter-table {
    table-layout: fixed;
    margin-bottom: -1px;
}

tbody {
    height: 400px;
    max-height: 400px; 
    overflow: auto;
}

thead>tr,tbody {
    display: block;
}

td>div {
    overflow: hidden;
} 
```

标记：

```
<div class="blotter">
    <table class="table table-bordered table-hover table-condensed blotter-table">
        <thead>
            <tr>
                <th id="tradeaggregation_numTrades" draggable="true" style="width: 422px; cursor: pointer; opacity: 1;"># Trades<img src="resources/img/down_arrow.png" class="pull-right" id="imgSort" style="opacity: 1; cursor: e-resize;"></th>
                <th id="tradeaggregation_listValues" draggable="true" style="width: 305px; cursor: pointer; opacity: 1;">List Values</th>
                <th id="tradeaggregation_mgmtId" draggable="true" style="width: 66px; opacity: 1; cursor: e-resize;">mgmtId</th>
                <th id="tradeaggregation_sizeSum" draggable="true" style="width: 78px; cursor: pointer; opacity: 1;">Size Sum</th>      
            </tr>
        </thead>
        <tbody>         
            <tr id="tradeaggregation0">             
                    <td><div id="tradeaggregation0_0" style="overflow: hidden; width: 422px;">8,113</div></td>              
                    <td><div id="tradeaggregation0_1" style="overflow: hidden; width: 305px;">4RAJA-SUN null </div></td>                    
                    <td><div id="tradeaggregation0_2" style="overflow: hidden; width: 66px;">10,831,124,369</div></td>                  
                    <td><div id="tradeaggregation0_3" style="overflow: hidden; width: 78px;">19,048,548</div></td>                  
            </tr>
        </tbody>
    </table>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T17:52:41.610

让我首先准确地澄清我正在寻找的行为。我需要一个表格，允许垂直滚动 tbody 溢出，同时有一个固定的标题。此外，列可以调整大小，如果列的总大小导致表变得比父容器宽，溢出应该是水平滚动的，而不是调整列宽以保持在其父宽度限制内。话虽如此，我使用上面的标记/css 完成了它，但我使用 javascript 显式增加了`table`调整列大小时的宽度，使得列的总宽度现在大于查看区域。

```
var cols = this.$el.find("tbody>tr:first td");
var newWidth = 1;
for ( var i = 0; i < cols.length; i++) {
    newWidth += $(cols[i])[0].offsetWidth;
}
var minWidth = $(this.$el.find(".blotter")[0]).width(); // parent div
if (newWidth < minWidth) newWidth = minWidth;
this.$el.find("table").width(newWidth); 
```*

# xaml - 带有标题和项目模板列的 Windows 8 XAML ListView 应具有相同的动态宽度

> ID：13849912
> 
> 赞同：5
> 
> 时间：2012-12-12T22:38:00.553
> 
> 标签：xaml, listview, windows-8, itemtemplate

我正在使用带有 Itemtemplate 和 Headertemplate 的 Listview。两个模板都包含 6 列。如果我为模板设置一个固定的列宽，一切都很好——如图一所示。
但我想将项目的宽度设置为“自动” - 但后来我得到图 2 ......

如何处理？是否可以使用 c# 设置标题列宽度？- 或任何其他解决方案？

图1：

![http://i.stack.imgur.com/8Ew3g.png](../Images/dc267ef96072007ee0f898cbe6ca5677.png)

图 2：

![http://i.stack.imgur.com/mPX4U.png](../Images/f05b27729c5cc3fa097dbcaa98480c2e.png)

代码列表视图：

```
<ListView x:Name="DayanalyseListView" 
                      HorizontalAlignment="Center" 
                      VerticalAlignment="Top" 
                      ItemTemplate="{StaticResource DataTemplate}" 
                      HeaderTemplate="{StaticResource HeaderTemplate}">
            </ListView> 
```

标题模板：

```
<DataTemplate  x:Key="HeaderTemplate" >
        <Grid Height="36" Background="DarkGray" >
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="95"/>
                <ColumnDefinition Width="85"/>
                <ColumnDefinition Width="85"/>
                <ColumnDefinition Width="85"/>
                <ColumnDefinition Width="85"/>
                <ColumnDefinition Width="*" MinWidth="900"/>
            </Grid.ColumnDefinitions>
            <TextBlock x:Uid="DayProject" TextWrapping="Wrap" Text="Project" Grid.Column="0" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="7,2,0,0" Style="{StaticResource BodyTextStyle}" />
            <TextBlock x:Uid="DayTask" TextWrapping="Wrap" Text="Task" Grid.Column="1" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="7,2,0,0" Style="{StaticResource BodyTextStyle}" />
            <TextBlock x:Uid="DayFrom" TextWrapping="Wrap" Text="From" Grid.Column="2" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="7,2,0,0" Style="{StaticResource BodyTextStyle}" />
            <TextBlock x:Uid="DayTill" TextWrapping="Wrap" Text="Till" Grid.Column="3" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="7,2,0,0" Style="{StaticResource BodyTextStyle}" />
            <TextBlock x:Uid="DaySum" TextWrapping="Wrap" Text="Sum"  Grid.Column="4" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="7,2,0,0" Style="{StaticResource BodyTextStyle}" />
            <TextBlock x:Uid="DayNote" TextWrapping="Wrap" Text="Note"  Grid.Column="5" VerticalAlignment="Top" HorizontalAlignment="Left"  Margin="7,2,0,0" Style="{StaticResource BodyTextStyle}" />
        </Grid>
    </DataTemplate> 
```

项目模板：

```
<DataTemplate x:Key="DataTemplate">
        <Grid d:DesignHeight="50" Margin="0,5,0,0" >
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="95"/>
                <ColumnDefinition Width="85"/>
                <ColumnDefinition Width="85"/>
                <ColumnDefinition Width="85"/>
                <ColumnDefinition Width="85"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <TextBlock HorizontalAlignment="Left" TextWrapping="NoWrap" Text="{Binding ProjectName}" VerticalAlignment="Center" Margin="5,0,0,0" Style="{StaticResource ItemTextStyle_sf}" Grid.Column="0" ToolTipService.ToolTip="{Binding ProjectName}"/>
            <TextBlock HorizontalAlignment="Left" TextWrapping="NoWrap" Text="{Binding TaskName}" VerticalAlignment="Center" Margin="5,0,0,0" Style="{StaticResource ItemTextStyle_sf}" Grid.Column="1" ToolTipService.ToolTip="{Binding TaskName}"/>
            <TextBlock HorizontalAlignment="Left" TextWrapping="NoWrap" Text="{Binding StartTimeString}" VerticalAlignment="Center" Margin="5,0,0,0" Style="{StaticResource ItemTextStyle_sf}"  Grid.Column="2"/>
            <TextBlock HorizontalAlignment="Left" TextWrapping="NoWrap" Text="{Binding StopTimeString}" VerticalAlignment="Center" Margin="5,0,0,0" Style="{StaticResource ItemTextStyle_sf}"  Grid.Column="3"/>
            <TextBlock HorizontalAlignment="Left" TextWrapping="NoWrap" Text="{Binding Sum}" VerticalAlignment="Center" Margin="5,0,0,0" Style="{StaticResource ItemTextStyle_sf}"  Grid.Column="4"/>
            <TextBlock HorizontalAlignment="Left" TextWrapping="NoWrap" Text="{Binding Note}" VerticalAlignment="Center" Margin="5,0,0,0" Style="{StaticResource ItemTextStyle_sf}"  ToolTipService.ToolTip="{Binding Note}" Grid.Column="5"/>
        </Grid>
     </DataTemplate> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T23:08:00.553

以下在我的情况下非常有效：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition />
    </Grid.RowDefinitions>
    <Grid x:Name="ListViewHeaders" >
        <Grid.ColumnDefinitions>
            <ColumnDefinition  />
            <ColumnDefinition  />
            <ColumnDefinition  />
            <ColumnDefinition  />
            <ColumnDefinition  />
        </Grid.ColumnDefinitions>
        <TextBlock Grid.Column="0" Text="Title Col 1" />
        <TextBlock Grid.Column="1" Text="Title Col 2" />
        <TextBlock Grid.Column="2" Text="Title Col 3" />
        <TextBlock Grid.Column="3" Text="Title Col 4" />
        <TextBlock Grid.Column="4" Text="Title Col 5" />
    </Grid>
    <ListView x:Name="myTable" Grid.Row="1" ItemsSource="{Binding SomeCollection}" >
        <ListView.ItemTemplate>
            <DataTemplate>
                <Grid Width="{Binding ElementName=myTable, Path=ActualWidth}" >
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition  />
                        <ColumnDefinition  />
                        <ColumnDefinition  />
                        <ColumnDefinition  />
                        <ColumnDefinition  />
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Column="0" Text="{Binding ItemProperty1}" />
                    <TextBlock Grid.Column="1" Text="{Binding ItemProperty2}" />
                    <TextBlock Grid.Column="2" Text="{Binding ItemProperty3}" />
                    <TextBlock Grid.Column="3" Text="{Binding ItemProperty4}" />
                    <TextBlock Grid.Column="4" Text="{Binding ItemProperty5}" />
                </Grid>
            </DataTemplate>
        </ListView.ItemTemplate>
    </ListView>
</Grid> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-22T19:15:00.463

ListView 不像 DataGrid 那样运行。ListView 只理解行，不理解列。您可以像使用 Grid 一样模拟列，但要了解的重要一点是项目和标题是两个完全独立的 UI 元素。

这意味着项目中列的大小很难改变标题中列的大小。即使您要命名它们，它们也是模板的一部分，因此名称不会有任何用处（请记住，将创建多个项目）。

我建议您保持固定宽度、使用 * 宽度或使用实际的 DataGrid 控件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-02T13:58:29.510

以下对我有用。关键是将 Horizo​​ntalContentAlignment 属性设置为 Stretch。

```
<ListView Grid.Row="6" Name="lvMembersSearchResults" Background="LightGray" ItemClick="lvMembersSearchResults_ItemClick" IsItemClickEnabled="True" Margin="5,5,5,5">
            <ListView.ItemContainerStyle>
                <Style TargetType="ListViewItem">
                    <Setter Property="HorizontalContentAlignment"  Value="Stretch"></Setter>
                </Style>
            </ListView.ItemContainerStyle>
            <ListView.Header>
                <Style TargetType="ListViewHeaderItem">
                    <Setter Property="HorizontalContentAlignment" Value="Stretch"></Setter>
                </Style>
            </ListView.Header>
            <ListView.HeaderTemplate>
                <DataTemplate>
                    <Grid Height="30" Background="DarkGray">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="70"/>
                            <ColumnDefinition Width="50"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock x:Uid="tbRank" TextWrapping="Wrap" Text="Rank" Grid.Column="0" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="7,2,0,0" FontWeight="ExtraBold" FontSize="18" />
                        <TextBlock x:Uid="tbName" TextWrapping="Wrap" Text="Name" Grid.Column="1" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="7,2,0,0"  FontWeight="ExtraBold" FontSize="18" />
                        <TextBlock x:Uid="tbTaxId" TextWrapping="Wrap" Text="Tax ID" Grid.Column="2" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="7,2,0,0" FontWeight="ExtraBold" FontSize="18" />
                        <TextBlock x:Uid="tbCommand" TextWrapping="Wrap" Text="Cmd" Grid.Column="3" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="7,2,0,0" FontWeight="ExtraBold" FontSize="18" />
                    </Grid>
                </DataTemplate>
            </ListView.HeaderTemplate>
            <ListView.ItemTemplate>
                <DataTemplate>
                    <Grid Height="30" Background="DarkBlue">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="70"/>
                            <ColumnDefinition Width="50"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock TextWrapping="NoWrap"  Text="{Binding Rank}" Grid.Column="0" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="7,2,0,0" FontWeight="Bold"  FontSize="18"  />
                        <TextBlock TextWrapping="NoWrap" Text="{Binding Name}" Grid.Column="1" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="7,2,0,0" FontWeight="Bold"  FontSize="18"/>
                        <TextBlock TextWrapping="NoWrap" Text="{Binding TaxId}" Grid.Column="2" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="7,2,0,0" FontWeight="Bold"  FontSize="18"/>
                        <TextBlock TextWrapping="NoWrap" Text="{Binding Command}" Grid.Column="3" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="7,2,0,0" FontWeight="Bold"  FontSize="18"/>
                    </Grid>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-04T12:19:57.533

添加 UserControl 对我有用。

```
<ListView x:Name="listView" ItemsSource="{Binding SomeCollection}" >
   <ListView.ItemTemplate>
       <DataTemplate>
           <UserControl Width="{Binding ElementName=listView, Path=ActualWidth}">
               <Grid> 
                 ....
                </Grid>
            </UserControl>
       </DataTemplate>
   </ListView.ItemTemplate>
</ListView>` 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-17T22:27:59.703

要将项目拉伸到完整的 ListView 宽度，请尝试以下操作：

```
<ListView>
    <ListView.ItemContainerStyle>
        <Style TargetType="ListViewItem">
            <Setter Property="HorizontalContentAlignment" Value="Stretch" />
        </Style>
    </ListView.ItemContainerStyle>
    <ListView.ItemTemplate>
        <DataTemplate>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="80" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0" Text="{Binding Number}" />
                <TextBlock Grid.Column="1" Text="{Binding Text}" />
            </Grid>
        </DataTemplate>
    </ListView.ItemTemplate>
</ListView> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-20T07:02:42.770

您可以尝试使用计算每列宽度的属性创建自己的 UserControl，并在模板中绑定到此属性。可能是这个帮助。

# c++ - C++ 中的正则表达式（正则表达式）错误：“在抛出 'std::regex_error' 实例后调用终止 what(): regex_error Aborted (core dumped)

> ID：13849913
> 
> 赞同：0
> 
> 时间：2012-12-12T22:38:03.120
> 
> 标签：c++, regex, c++11

> **可能重复：**
> [gcc4.7 对正则表达式有问题吗？](https://stackoverflow.com/questions/12530406/is-gcc4-7-buggy-about-regular-expressions)

我用 "g++ test.cpp -std=gnu++0x" 编译下面的代码。编译成功，但是当我运行 ./a.out 时，它会出现这样的错误，我不明白为什么会这样。我的操作系统是 Mint。

错误：“在抛出 'std::regex_error' what() 实例后调用终止：regex_error Aborted (core dumped)”

```
Code:
// regex_match example
#include <iostream>
#include <string>
#include <regex>

using namespace std;

int main ()
{
  string s ("this subject has a submarine as a subsequence");
  regex e("sub[a-z]");   // matches words beginning by "sub"
  smatch m;

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T22:39:34.370

代码看起来不错。GCC 的正则表达式实现是不可用的。不要浪费你的时间。

# php - 获取用户列表时 SonataUserBundle 错误

> ID：13849918
> 
> 赞同：1
> 
> 时间：2012-12-12T22:38:34.430
> 
> 标签：php, symfony, symfony-2.1, fosuserbundle, sonata-admin

我已经安装了一个 SonataAdminBundle、一个 SonataUserBundle、FOSUserBundle 和我自己的扩展 FOSUserBundle 的包。

mysite/admin/dashboard 看起来不错，但是当我尝试获取用户列表（mysite/admin/sonata/user/user/list）时，我收到此错误：

> 类 Application\Sonata\UserBundle\Entity\User 不存在

为什么？我必须做什么？

**升级版：**

好的，现在我发现了这个问题，但现在我还有另一个问题。

> 找不到“GET /admin/sonata/user/user/list”的路由

为什么这种溃败不存在？这些路由应该放在哪里，为什么在基本的 SonataUserBundle 安装中没有这些路由？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-10-23T07:58:33.297

我的名声很差，因此我还不能添加评论。回复 Hast 的评论：

> 清除。但是，如果我的 FOSUserBundle 由我自己的用户条目、表单类型和处理程序扩展呢？在这种情况下它不起作用

感谢[扩展 Sonata User Bundle 并添加新字段](https://stackoverflow.com/questions/15621993/extending-sonata-user-bundle-and-adding-new-fields)

将此添加到您的配置中：

```
sonata_user:
    class:
        user: Acme\UserBundle\Entity\User
        group: Acme\UserBundle\Entity\Group 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T18:56:51.780

您是否按照SonataUserBundle[安装章节中的所有步骤进行操作？](http://sonata-project.org/bundles/user/master/doc/reference/installation.html)也许您错过了添加用户管理路由的步骤 2.3.2。

# android - 自定义 Android-Keyboard-Keys

> ID：13849925
> 
> 赞同：1
> 
> 时间：2012-12-12T22:39:10.430
> 
> 标签：android, keyboard, key, label

我正在寻找定制我的键盘键的可能性。在下图中，您可以看到我想要达到的结果：

[键盘键结果](http://img811.imageshack.us/img811/6307/buttontt.png)

可选：当我多次点击一个键时，keyPreview 应该逐步浏览该键的字符列表（很高兴拥有）。

问题：如果我使用一个键的标签属性，标签的文本只出现在一个键的中心。但我需要将其放在`A`左上角、中上角`B`等）。我也尝试了 keyIcon-Attribute，但是当我多次点击按钮时，keyPreview 只显示了**keyIcon**，而不是每个字符。

目前我正在使用`<Keyboard ..><Row ..><Key /></Row></Keyboard>`-XML 来“设计”我的键盘，而不是使用 LinearLayout 或类似的布局。也许我需要切换到LinearLayout？

有任何想法吗？

# android - Android 在 AsyncTask 中发出 http 请求并发布一个数组

> ID：13849929
> 
> 赞同：0
> 
> 时间：2012-12-12T22:39:28.440
> 
> 标签：android, android-asynctask, hashmap

看似简单的问题，但在网上找不到明显的答案。

在这个链接上，有一个关于从 android 应用程序中将简单的名称值对发布到文件的教程。[http://www.androidsnippets.com/executing-a-http-post-request-with-httpclient](http://www.androidsnippets.com/executing-a-http-post-request-with-httpclient)

我想要做的是发布可以在接收端（php脚本）作为数组访问的“东西”。

在 PHP 中，我想收到：

$_POST['array']=array("key"=>"value","key2"=>"value2");

作为 android 开发的新手，也许有人可以详细说明在 Java 中创建类似的东西，然后如何发送它 - setEntity 似乎只接受名称值对......

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T23:04:42.930

您应该在 Android 应用程序和 PHP 服务器中都使用 JSON Wrapper。

在 PHP 中，您应该使用`json_decode()`，例如：`$thingFromPost = json_decode($data)`.

在 Java 中，有很多方法可以创建 JSONArray。一个基本的例子是：

```
List<String> list = new ArrayList<String>();
list.add("foo");
list.add("bar");
JSONArray jsonArray = new JSONArray(list); 
```

之后，您只需将带有 HttpPost 的数组发送到您的服务器。

```
StringEntity stringEntity = new StringEntity(jsonArray.toString());
stringEntity.setContentEncoding(new BasicHeader(HTTP.CONTENT_ENCODING, "UTF-8"));
stringEntity.setContentType(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));

HttpPost post = new HttpPost(url);          
post.setEntity(stringEntity);
post.setHeader(new BasicHeader(HTTP.CONTENT_TYPE, "application/json")); 
```

如果您需要有关如何在 Android 中使用 JSON 发出请求的详细教程，请点击[此](http://www.vogella.com/articles/AndroidJSON/article.html)链接。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T00:21:48.733

如果您希望 POST 的整个原始正文成为字符串化数组（仅此而已），我相信您应该使用 StringEntity 而不是 UrlEncodedFormEntity。

所以这：

```
String s = "asdf"; // replace this with your JSON string
StringEntity stringEntity = new StringEntity(s);
httpPost.setEntity(stringEntity); 
```

我不熟悉 PHP，但从概念上讲，在接收端你会做类似 json.parse(request.full_body) 的事情。请注意，这（request.full_body 或等效项）与获取 POST 表单的单个值（如 request['input_field1'] ）的常见模式非常不同。

但是，阅读您的问题，我并不完全确定这种 full_body 方法是您想要的。在我看来，您想通过表单变量“数组”访问数据，正如您在此处指出的那样：

$_POST['array']=array("key"=>"value","key2"=>"value2");

Note that you are not working with the entire POST body here, rather instead you are fetching the value of a single form variable called 'array' (I think, I don't really know PHP). If this is the case, then you *should* use NameValuePairs like something below:

```
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
nameValuePairs.add(new BasicNameValuePair("array", yourJSONArrayAsString)); 
```

This will post the array as a value associated with the form variable 'array' I believe.

# assembly - 了解 bset 和 bclr

> ID：13849931
> 
> 赞同：2
> 
> 时间：2012-12-12T22:39:44.973
> 
> 标签：assembly, bit-manipulation, 68hc12

我遇到了我的教授制作的一个例子，这让我质疑我对`bset`和`bclr`汇编命令的理解。

如果我这样做：

```
bset BITS,80 
```

我是在两者之间执行 AND 还是 OR 操作？我的参考指南说这样`bset`做：

```
M <= M + mask 
```

是`+`OR 还是 AND 运算符？`bclr`是相同的命令，但使用掩码的补码执行操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:49:25.170

位设置和清除分别意味着 ORing 和 ANDing，按位。BSET 应该做 OR，而 BCLR 应该有效地做 AND。

可能是 BCLR 只是简单地用你给它的位向量做 AND，或者 BCLR 用位向量的补码做 AND（我的猜测），这取决于指令集的设计者有多好。

# arrays - 计算磁盘和主存之间的页面传输

> ID：13849933
> 
> 赞同：0
> 
> 时间：2012-12-12T22:39:59.270
> 
> 标签：arrays, paging, virtual-memory

```
for I := 1 to 1024 do
    for J := 1 to 1024 do
        A[J,I] := A[J,I] * B[I,J] 
```

对于给定的代码，我想根据以下假设计算在磁盘和主内存之间传输了多少页：

*   页面大小 = 512 字
*   主内存中不能超过 256 页
*   LRU 替换策略
*   所有二维数组大小 (1:1024,1:1024)
*   每个数组元素占 1 个字
*   二维数组以行优先顺序映射到主存中

我得到了解决方案，我的问题源于：

> A[J,I] := A[J,I] * B[I,J]
> 
> 写A := 读A * 读B
> 
> 请注意，每个 J 循环有 2 次传输更改，而每个 I 循环仅更改 1 次传输。
> 
> 1024 * (8 + 1024 * (1 + 1)) = 2105344 次转移
> 
> 所以每次我们使用它时都会读取 B 的整行，因此我们将整行计算为已传输（8 页）。但是由于我们在传输时只读取了每个 A 行的一部分（1 个值），所以每次只抓取 1 页。

所以我想弄清楚的是，我们如何获得每次读取 B 时传输 8 页但每次读取和写入 A 时仅传输 1 个页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T12:32:01.837

我对你感到困惑并不感到惊讶，因为我当然是。

部分混淆来自于将数组标记为 1:1024。我不能那样想，我将它们重新标记为 0:1023。

我采用“行主要顺序”表示 A[0,0] 与 A[0,511] 位于同一磁盘块中。下一个块是 A[0,512] 到 A[0,1023]。然后 A[1,0] 到 A[1,511]... 和 B 的排列相同。

当内部循环首先执行时，系统将获取包含 A[0,0] 的块，然后是 B[0,0]。随着 J 的增加，所引用的 A 的每个元素都将来自一个单独的磁盘块。A[1,0] 与 A[0,0] 位于不同的块中。但是只有每个被引用的第 512 个 B 元素将来自不同的块；B[0,0] 与 B[0,511] 位于同一块中。因此，对于内部循环的一次完整迭代，1024 次计算，将从 A 获取 1024 次块，从 A 写入 1024 次脏块，从 B 获取 2 次块。总共 2050 次访问。我不明白为什么您的答案说将从 B 提取 8 次。如果 B 未在 512 字边界上对齐，则每个周期将从 B 提取 3 次；但不是 8。

对于外部循环中的每个 I 值，都会发生相同的模式。假设 B 是 512 字对齐的，这使得读取和写入的总块数为 2050*1024 = 2099200。

我完全准备好让别人指出我明显的大器晚成——他们通常会这样做——但你得到的解释对我来说似乎是错误的。

# c# - 如何使用 XmlWriter 动态创建分层树？

> ID：13849935
> 
> 赞同：0
> 
> 时间：2012-12-12T22:40:05.473
> 
> 标签：c#, xml, xml-parsing, xmlwriter

我需要写入`Stream`一些 XML 内容类型的内存流。（不是文件）
我想知道如何使用`XmlWriter`或其他已知类来创建 xml 分层树，让我们说一些递归函数。

我希望能够编写其他父母标签等的子 xml 标签。

我在以下链接中看到了类似的内容，但不确定这是不是这样，这些是硬编码示例。
[http://msdn.microsoft.com/en-us/library/bb387089.aspx](http://msdn.microsoft.com/en-us/library/bb387089.aspx)

# c# - 可以从属性中获取值吗？

> ID：13849948
> 
> 赞同：0
> 
> 时间：2012-12-12T22:41:08.460
> 
> 标签：c#, attributes, custom-attributes, filehelpers

我正在使用文件助手，我把我放在班级的首位 `[DelimitedRecord("|")]`

我想检查该值是否为“|” 如果没有，那么我想抛出一个异常..

```
public void WriteResults<T>(IList<T> resultsToWrite, string path, string fileName) where T: class
        {      
            var attr =  (DelimitedRecordAttribute)Attribute.GetCustomAttribute(typeof(T), typeof(DelimitedRecordAttribute));

            if (attr.HasValue("|")) // has value does not exist.
            {
                FileHelperEngine<T> engine = new FileHelperEngine<T>();
                engine.HeaderText = String.Join("|", typeof(T).GetFields().Select(x => x.Name));

                string fullPath = String.Format(@"{0}\{1}-{2}.csv", path, fileName, DateTime.Now.ToString("yyyy-MM-dd"));

                engine.WriteFile(fullPath, resultsToWrite);
            }

        } 
```

我可以用什么来检查该属性是否在具有该值的类上？

**编辑**

这就是我认为可用的属性

![可用属性](../Images/1d8dc7b2f5f1393da892a80dfeaf702c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T22:43:20.187

您可以检索这样的实例`DelimitedRecordAttribute`：

```
// t is an instance of the class decorated with your DelimitedRecordAttribute
DelimitedRecordAttribute myAttribute =
        (DelimitedRecordAttribute) 
        Attribute.GetCustomAttribute(t, typeof (DelimitedRecordAttribute)); 
```

如果`DelimitedRecordAttribute`公开了获取参数的方法（它应该），您可以通过该方法（通常是属性）访问值，例如：

```
var delimiter = myAttribute.Delimiter 
```

[http://msdn.microsoft.com/en-us/library/71s1zwct.aspx](http://msdn.microsoft.com/en-us/library/71s1zwct.aspx)

**更新**

由于您的情况似乎没有公共属性，因此您可以使用反射来枚举非公共字段并查看是否可以找到包含该值的字段，例如

```
FieldInfo[] fields = myType.GetFields(
                     BindingFlags.NonPublic | 
                     BindingFlags.Instance);

foreach (FieldInfo fi in fields)
{
    // Check if fi.GetValue() returns the value you are looking for
} 
```

**更新 2**

如果此属性来自 filehelpers.sourceforge.net，则您所追求的字段是

```
internal string Separator; 
```

该类的完整源代码是

```
[AttributeUsage(AttributeTargets.Class)]
public sealed class DelimitedRecordAttribute : TypedRecordAttribute
{
    internal string Separator;

/// <summary>Indicates that this class represents a delimited record. </summary>
    /// <param name="delimiter">The separator string used to split the fields of the record.</param>
    public DelimitedRecordAttribute(string delimiter)
    {
        if (Separator != String.Empty)
            this.Separator = delimiter;
        else
            throw new ArgumentException("sep debe ser <> \"\"");
    }

} 
```

**更新 3**

像这样获取分隔符字段：

```
FieldInfo sepField = myTypeA.GetField("Separator", 
                        BindingFlags.NonPublic | BindingFlags.Instance);

string separator = (string)sepField.GetValue(); 
```

# php - jQuery和对象数组

> ID：13849949
> 
> 赞同：0
> 
> 时间：2012-12-12T22:41:14.137
> 
> 标签：php, javascript, jquery, ajax, json

```
 $(document).ready(function () {

    output = "";

    $.ajax({

        url: 'getevents.php',

        data: { ufirstname: 'ufirstname' },

        type: 'post',

        success: function (output) {

            alert(output);

            var date = new Date();
            var d = date.getDate();
            var m = date.getMonth();
            var y = date.getFullYear();

            $('#calendar').fullCalendar({
            header: {
            left: 'prev,next today',
            center: 'title',
            right: 'month,basicWeek,basicDay'
            },
            editable: true,
            events: output
            });
        }
    });

}); 
```

我有这样的代码，如果我从警报框中逐字复制文本并替换

```
events: output 
```

和

```
events: [{ id: 1, title: 'Birthday', start: new Date(1355011200*1000), end: new Date(1355011200*1000), allDay: true, url: 'http://www.yahoo.com/'},{ id: 2, title: 'Birthday Hangover', start: new Date(1355097600*1000), end: new Date(1355097600*1000), allDay: false, url: 'http://www.yahoo.com'},{ id: 3, title: 'Sepotomus Maximus Christmas', start: new Date(1356393600*1000), end: new Date(1356393600*1000), allDay: false, url: 'http://www.yahoo.com/'},] 
```

一切正常。我能做些什么来解决这个问题？我虽然使用`events: output`会将文本放置在该位置，但它似乎不起作用。

提前感谢大家的任何评论或回答！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T22:47:00.320

由于您没有给我们太多信息，我将在黑暗中拍摄并说浏览器正在将 json 解释为文本。所以在 ajax 调用中添加一个`dataType`属性，以便 jQuery 可以将返回解析为 json。

```
$.ajax({

    url: 'getevents.php',
    data: { ufirstname: 'ufirstname' },
    type: 'post',
    dataType: 'json' 
    ...... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T22:47:11.820

如果您在警报框中获取该字符串。您需要使用[JSON.parse()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)将字符串解析为 javascript 对象

改变

```
events: output 
```

至

```
events: JSON.parse(output) 
```

根据[文档](http://arshaw.com/fullcalendar/docs/event_data/Event_Source_Object/)

> “事件源”是为 FullCalendar 提供有关事件的数据的任何东西。它可以是一个简单的数组、您定义的事件生成函数、json 提要的 URL 或 Google 日历提要。
> 
> 从 1.5 版开始，事件对象可以有与之关联的“选项”。但是，在您开始指定选项之前，您必须编写一个扩展形式的事件对象。它必须是具有属性的传统 JavaScript 对象。

此外，您的 json 字符串末尾还有一个额外的逗号

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-12T23:09:46.577

```
 $year = date('Y');
$month = date('m');

echo json_encode(array(

    array(
        'id' => 111,
        'title' => "Event1",
        'start' => "$year-$month-10",
        'url' => "http://yahoo.com/"
    ),

    array(
        'id' => 222,
        'title' => "Event2",
        'start' => "$year-$month-20",
        'end' => "$year-$month-22",
        'url' => "http://yahoo.com/"
    )

)); 
```

该程序实际上想要这种非常特殊的 json_encode 格式，否则它不起作用。我只是通过阅读所有这些回复才知道这一点。

# visual-studio-2012 - vs2012中存储的数据库路径在哪里？

> ID：13849952
> 
> 赞同：-1
> 
> 时间：2012-12-12T22:41:32.827
> 
> 标签：visual-studio-2012

我的机器上安装了 SQL Server 2008 R2 和 SQL 2012。我希望 VS 2012 使用 SQL Server 2008 R2，但由于某种原因它使用 SQL Server 2012。VS2012 中是否有任何设置可以用来指定我想要使用的数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T04:09:08.470

在配置文件中尝试连接字符串。

# vb.net - 允许某些运行时异常失败的原因可能是什么？

> ID：13849956
> 
> 赞同：1
> 
> 时间：2012-12-12T22:41:43.590
> 
> 标签：vb.net, initialization, declaration

例如，可以通过在`s`声明时进行实例化来避免在以下情况下可能出现的运行时空异常。例如，`Dim s as String = ""`我们是否有理由允许运行时异常的可能性？`s`也许它没有意义`""`？这不是一个家庭作业问题。我只是好奇。

```
Public Function X() As String 
    Dim s as String 
    Dim sMethod As String = X 
    Try 
        Dim vowels() As String = {"a", "e", "i", "o", "u"}
        For Each vowel As String In vowels
            s = "0"
        Next
    Catch ex As Exception 
        Throw System.Exception(ex)
    End Try
    Return s 
End Function 
```

*   编辑抛出异常

Visual Studio 似乎足够聪明，可以告诉我们“运行时可能会导致空引用异常”。这意味着一些有能力的专业开发人员忽略了这个警告。这让我觉得这一定是有原因的。开发人员已经继续前进，所以我不能问他们。这可能是我无法理解的基本问题。如果你愿意，请帮助我理解这一点。（我不可能是唯一对此感到疑惑的人。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T02:33:04.627

假设您没有初始化`String`变量。还有一些处理。最后，您希望获得一个确定的值，您可以通过`Return`语句返回该值。如果由于某种原因您忘记考虑可能的执行路径，VS 会警告您可能的空引用异常。然后你可能会想：“哦，是的，我怎么忘记了？”

例如，您有一个`Function`将 a`Integer`转换为单词的 a（实际用途有限，因此仅出于演示目的考虑）：

```
Function ConvertIntToWord(a As Integer) As String
  Dim retString As String
  If a = 0
    retString = "Zero  "
  ElseIf a = 1
    retString = "One  " 
  End If
  Return retString
End Function 
```

在以上几行中，您很不幸忘记了`Else`路径。然后假设您想对结果字符串进行进一步处理：

```
ConvertIntToWord(5).TrimEnd 
```

将 5 作为参数传递，此时您将收到异常。如果您改为听 VS，您会注意到一个警告 -下划线`retString`。`Return retString`因此，您可以在不运行代码的情况下解决此问题。

现在假设您初始化`Dim retString As String = ""`. 您将不再看到警告，并且必须调试您的程序才能解决此问题。根据程序的复杂性，它可能需要更多的努力。

底线 - 在编译时发现问题总是比在运行时更好。

**编辑：**忘记初始化变量可能是故意的，例如为什么使用[TryGetValue](http://msdn.microsoft.com/en-us/library/bb347013.aspx)。`is passed uninitialized`根据文档，对于此方法， value 。但是，VS 不知道这一点，因此它将继续显示警告，直到您将其明确分配给`Nothing`：

```
Dim retString As String = Nothing 
```

所以这是告诉 VS 的一种方式，是的，你知道它是未初始化的，但对于这个特定的场景，它是故意的。

# entity-framework - 使用相关表为实体数据库播种

> ID：13849957
> 
> 赞同：0
> 
> 时间：2012-12-12T22:41:52.467
> 
> 标签：entity-framework, ef-code-first, entity-framework-migrations

我通读了我能找到的其他答案，但没有一个对我有帮助。我对 .NET、Entity、C# 等还是很陌生。所以我希望你能原谅我。我正在尝试创建一个“种子”文件，当我尝试单独为所有表播种时，当它是一个相关表时，我得到了错误。我不仅要查看子表，还要查看孙子表（希望这是有道理的）。例如，由于我发现了一个帖子，这就是我现在正在尝试的：

```
context.Projects.AddOrUpdate(i => i.ProjectID, 
     new Project
     {
        ProjectID = 1,
        Title = "Project 1",
        ProjectDoc = new List<ProjectDoc>
            {
                new ProjectDoc { 
                     ProjectDocID = 1, ProjectID = 1, Content = "Doc Content", DocTitle = "Chapter 1", 
                        Comment = new List<Comment> 
                        {
                             new Comment { ProjectDocID = 1, CommentID = 1, Text = "Comment text" }
                        }
                     }
                  }
             }
        ); 
```

我的问题是：

```
 Comment = **new** List<Comment> 
```

该“新”导致错误：无法隐式转换类型'System.Collections.Generic.List ....

我试图用谷歌搜索，但我不明白我发现的行话。帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T09:11:00.390

虽然它与您的问题没有直接关系，但您不应该将`AddOrUpdate`其用于对象图。该方法的内部逻辑不检查相关对象，因此您可以解决您的问题并使其工作，但只有 Add 部分将起作用。当您添加、更新或删除时`ProjectDoc`，`Comment`该`Seed`方法将无法识别更改。它只`Project`直接识别实例的变化。

# python - 如何在当前范围内动态执行函数并将其添加为调用函数的属性？

> ID：13849960
> 
> 赞同：0
> 
> 时间：2012-12-12T22:42:13.087
> 
> 标签：python, namespaces, code-generation, exec, abstract-syntax-tree

我有一些这样的代码：

```
def f1():
  <some stuff here>
.
.
.

@mylib.codegen
def f2(args):
  f1()
  <some more stuff here> 
```

mylib.py ：

```
def codegen(fn):
  src = inspect.getsource(fn)
  original_ast = ast.parse(src)
  new_ast = transform_ast(original_ast)
  code_obj = compile(new_ast, '<auto-generated>', 'exec')
  myscope = {}
  exec code_obj in myscope
  fn.generated_fn = myscope['name']   # Where name is the binding created by execing code_obj 
```

总而言之，`mylib.codegen`是一个装饰器，它解析 f 的代码，基于 ast of 创建另一个函数的 ast `f`，执行生成函数的代码以获取可调用函数并将可调用函数设置为 的属性`f`。这意味着当`f2`第一次导入时，`f2`动态获取另一个函数作为其自身的属性。

生成的函数也需要调用`f1`，但`f1`在`myscope`. 如果 Python 以某种方式允许内联，并且我内联了 的代码`mylib.codegen`，那么一切都会好起来的，但我认为 Python 不允许内联代码。如何设置以便在调用者函数的命名空间中执行生成的代码对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T07:16:06.683

`fn.func_globals`包含给定函数的全局命名空间；您需要它能够执行转换和重新编译的代码对象：

```
myscope = {}
myscope.update(fn.func_globals) 
```

不要`fn.func_globals`直接使用；您不想覆盖该命名空间中的项目。

# guid - Breeze：如何为客户端上的新实体创建 GUID 键？

> ID：13849962
> 
> 赞同：11
> 
> 时间：2012-12-12T22:42:33.543
> 
> 标签：guid, breeze

使用 Breeze，在创建实体时填充 GUID 键的最简单方法是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-12T23:40:46.413

我假设您的实体已配置为客户端负责为新实体设置 Guid 键。这是 Entity Framework Code First 实体的 Guid 键的默认值；就好像关键的财产被装饰了`[DatabaseGenerated(DatabaseGeneratedOption.None)]`

显而易见的方法是在创建实体之后并将其添加到管理器之前设置密钥，例如：

```
函数 createFoo() {
    var foo = fooType.createEntity();
    foo.id(breeze.core.getUuid()); // 敲除实现
    manager.addEntity(foo);
}

```

这可能就是您所需要的。

另一方面，您可能会发现您在许多地方创建了新的*Foos*，并且由于某些奇怪的原因您无法使用该`createFoo`功能。您当然不想重复该代码。

您可以使用 id-setting 行为扩展`Foo`实体类型，之后您可以编写：

```
函数 createFoo() {
    var foo = fooType.createEntity(); // foo.id 为你设置
    manager.addEntity(foo);
}

```

有两种方法需要考虑 - 自定义构造函数和类型初始化器；两者都在“[扩展实体](http://www.breezejs.com/documentation/extending-entities)”中进行了描述

***构造函数***

您可以在自定义构造函数中初始化密钥。Breeze 在您创建实体和实现查询的实体时都会调用构造函数。Breeze 在具体化时会替换初始键值。

这是一个假设 Knockout 模型库的示例。

```
函数 Foo() {
    foo.id(breeze.core.getUuid()); // 使用 KO
}

// 获取 MetadataStore 的一种方法
var store = manager.metadataStore;
// 使用 Foo 类型注册 ctor
store.registerEntityTypeCtor("Foo", Foo);

```

很简单。唯一的缺点是 Breeze 每次创建实体时都会生成一个 Guid，无论是创建一个新实体还是从查询中实现一个实体。在物化过程中浪费了精力，但那又怎样？好吧，我想这*可能会*成为一个性能问题，尽管在我测量之前我不会这么认为。

***初始化器***

假设您测量并且重复的 Guid 生成是一个严重的问题（*真的*吗？）。您可以改为在类型初始化程序中设置键，并且仅在创建新实体时调用 Guid 生成器。

*在实体被创建或从查询中具体化之后*，在将该实体返回到应用程序之前，Breeze 调用类型初始化器。显然，您不想覆盖数据库中的具体化键，因此您将在分配它之前测试键值以确保它不是真实的（即确保您正在修复创建的实体）。这是一个例子。

```
函数 fooInitializer(foo) {
    var emptyGuid = "00000000-0000-0000-0000-000000000000";
    if (foo.id() !=== emptyGuid) {
        foo.id(breeze.core.getUuid());
    }
}

var store = manager.metadataStore;
// 注册初始化器；此示例中没有 ctor
store.registerEntityTypeCtor("Foo", function(){}, fooInitializer);

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-09T17:28:15.307

假设您在所有实体上都有一个 Guid 代理键，就像我们在我们的案例中一样，您可以编写一个 createInstance 工厂，它以非常通用的方法执行以下操作：

```
function createInstance(breezeEntityManager, typeName) {
    var keyProperty = breezeEntityManager.metadataStore.getEntityType(typeName, false).dataProperties.filter(function (p) {
        return p.isPartOfKey;
    })[0];
    var config = {};
    config[keyProperty.name] = breeze.core.getUuid();
    return breezeEntityManager.createEntity(typeName, config);
} 
```

这样，您就不必为所有实体创建初始化程序。

# c++ - chroot 替代线程

> ID：13849964
> 
> 赞同：3
> 
> 时间：2012-12-12T22:42:48.827
> 
> 标签：c++, permissions, pthreads, boost-thread, chroot

我知道从技术上讲，您无法对线程进行 chroot，但我正在寻找功能性替代方案，以限制线程中现有任务集的权限数量。

编辑：这适用于 Linux 环境，但是与 Windows 相关的技术也很有用（即使它们没有 *NIX 等效项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-03-31T16:59:02.497

Linux 上的线程和进程之间几乎没有区别。使用带标志和不带标志的`clone`系统调用，以便新线程不与调用线程共享其根目录/当前目录/umask。或者，您可以在事后使用系统调用。现在可以正常使用了，不会影响进程中的其他线程。`CLONE_THREAD``CLONE_FS``unshare``CLONE_FS``chroot`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T23:47:40.717

使用Win32 API 中的[模拟函数](http://winapi.freetechsecrets.com/win32/WIN32Impersonation.htm)为 Windows 中的线程设置权限是微不足道的。

我不是 GNU/Linux 系统编程方面的专家，因此可能存在允许修改每个线程 UID 的扩展，但据我所知，Unix 系统具有每个进程的安全性，而不是 Windows 中的每个线程。

这是因为历史上 Unix 使用进程进行并行处理（fork），而 Windows 使用线程（CreateThread），并且（从历史上看？）在 Unix 中创建新进程的速度与在 Windows 中创建新线程的速度相当。

我给你的问题+1，因为粗略的谷歌搜索似乎表明限制权限的首选方法是通过安全性将不同的任务分叉给进程，并使用[setuid](http://www.cs.berkeley.edu/~daw/papers/setuid-usenix02.pdf)设置权限，然后可以选择 chroot 它们。

我想听听是否还有其他选择，因为如上所述，这个用例在 Windows 中实现起来相当简单。

# javascript - Javascript：可以将包含换行符“\n”的字符串用作属性名称吗？

> ID：13849968
> 
> 赞同：2
> 
> 时间：2012-12-12T22:43:04.493
> 
> 标签：javascript

很清楚为什么我不想这样做。但在这件事上我别无选择。

浏览器能处理这个吗？

Chrome似乎没问题：

```
> var x = {};
> x['a\nb'] = 1;
1
> x
Object
a b: 1
__proto__: Object
> Object.keys(x)
["a
b"] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T22:46:48.190

是的。浏览器应该能够处理。您只需要使用括号符号来访问该属性。

# html5-video - MediaElement.js 不加载字幕

> ID：13849969
> 
> 赞同：1
> 
> 时间：2012-12-12T22:43:06.570
> 
> 标签：html5-video, mediaelement.js, subtitle

我正在尝试将 MediaElement.js 用于带有字幕的嵌入式播放器，但它只是说“英语（加载）”并且实际上并没有显示字幕。

我正在使用[预制的轨道演示](http://www.flcbranson.org/johndyer-mediaelement-2.9.5-32-g98263df/demo/mediaelementplayer-track.html)，它甚至不起作用。

我创建了[另一个](http://www.flcbranson.org/mediaelementjs.html)使用 MediaElement.js 主页中的代码的页面，但它也不起作用。

有趣的是，MediaElement.js[轨道演示页面](http://www.mediaelementjs.com/examples/?name=translation)确实正确显示了英文字幕，但没有进行代码所说的翻译。

我的 Web 服务器是否需要为 .srt 和 .vtt 设置 mime 类型？该文档没有说明任何内容（提到了视频 MIME 类型）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T09:55:21.563

[这里](https://github.com/johndyer/mediaelement/issues/250)提到 jQuery 版本可能是问题所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-23T14:09:22.467

我最近遇到了同样的问题，发现当一个人忘记在节点上设置`srclang`属性时会发生这种情况。`track`

确保添加它（在这种情况下：荷兰语字幕）：

```
<track id="subtitles" kind="subtitles" label="Ondertitels" src="mysubs.srt" srclang="nl"></track> 
```

# actionscript-3 - 用 mockolate 模拟 FileReference.data？

> ID：13849970
> 
> 赞同：1
> 
> 时间：2012-12-12T22:43:09.813
> 
> 标签：actionscript-3, apache-flex, unit-testing, flexunit, mockolate

我正在尝试在我正在处理的 flex 项目中模拟 FileReference。

删除一些属性，例如名称和大小可以正常工作，但数据只是拒绝工作。这是说明问题的代码：

```
[Test]
public function FileReferenceMockTest():void {
    var frMock:FileReference = nice(FileReference);
    var bytes:ByteArray = new ByteArray();
    stub(frMock).getter("data").returns(bytes);
    stub(frMock).getter("name").returns("filename");
    assertThat(frMock.name, equalTo("filename")); // works
    assertThat(frMock.data, sameInstance(bytes)); // Fails and says that frMock.data is null
} 
```

如果我设置断点并在调试器中检查 frMock，它看起来像这样：

```
frMock
    [inherited]
        data = null
    creationDate = null
    creator = null
    modificationDate = null
    name = "filename"
    __proxy__ = InterceptorProxyListener
    ... 
```

如您所见，模拟对数据的处理方式不同。

几个小时以来，我一直在努力解决这个问题，并且真的可以使用一些帮助来解决这个问题。

更新：
代码在作为 Flex 库项目或 Flex 项目 (Air) 运行时工作。当代码在浏览器插件中运行时，它会失败。检查库项目中的调试器还显示数据属性未嵌套在 [Inherited] 内，而是与其他属性处于同一级别。

更新：
我在使用 URLLoader 时遇到了同样的问题，但这次正好相反。只有在浏览器插件中运行测试时，才能模拟 URLLoader。
由于我正在创建一个类来处理本地和远程文件加载，使用 FileReference 或 URLLoader，取决于输入，我有效地阻止了对这个类进行完全的单元测试。:(

# python - 如何使 .py Python 文件在浏览器中实际执行？

> ID：13849974
> 
> 赞同：1
> 
> 时间：2012-12-12T22:43:18.503
> 
> 标签：python

我曾尝试疯狂地在网上搜索，但无济于事。PHP 就像将文件命名为 .php 并编写 PHP 一样简单。我知道人们说 Python 就这么简单，但我没有找到任何有用的设置指南。我只想通过 WAMP 或其他替代方法在我的计算机上练习 Python。我在 Windows Vista 上。

我无法让 .py 文件正确执行。实际文字：

```
print("Hello!") 
```

看起来就像那样，而不是`"Hello!"`。我不知道该怎么做才能让它在我的浏览器中真正工作。

任何帮助或指向指南将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:54:19.810

您的服务器应该处理 Python 代码。看看框架`Django`。至于服务器，我可以建议你`http://webfaction.com`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T22:49:59.157

PHP 不在浏览器中执行。它在服务器端执行，然后由 Web 服务器将输出发送到浏览器。

如果您想要一种使用 Python 处理 Web 请求的简单方法，请查看 web.py ( [http://webpy.org](http://webpy.org/) )。

# osgi - 在没有 OSGi 服务的 Eclipse RCP 中共享视图模型对象

> ID：13849977
> 
> 赞同：0
> 
> 时间：2012-12-12T22:43:41.187
> 
> 标签：osgi, eclipse-rcp, datacontext

在 Eclipse RCP 应用程序中共享轻量级视图模型或数据上下文对象的最佳实践是什么，因为我无法控制视图创建？对于这种轻量级的事情，我宁愿不使用 OSGi 服务或静态变量。

假设我有一个 MapView，它将在其构造函数中创建其 MapViewController 的实例。

```
public class MapView extends ViewPart  {

    public static final String ID = "myapp.mapview";

    MapViewController controller = null;        

    public MapView() {      

          LegendContainer legends = new LegendContainer();
          MapViewModel viewModel = new MapViewModel();
          controller = new MapViewController(null, legends, viewModel);         
    }

    @Override
    public void createPartControl(Composite parent) {
           // create main map 

        }
} 
```

`MapViewModel`有一个名为 Legends 的属性，需要通过`TableOfContentsView`( ) 访问，如果创建为in的子级`TocView`，这很简单`TocView``MapView``MapView.createPartControl()`

```
@Override
public void createPartControl(Composite parent) {
    // pass model to child here when creating it
} 
```

如果我想在透视图中作为独立视图存在`TocView`，`MapView`添加到平台中，`MapPerspective.createInitialLayout`如下所示：

```
public class MapPerspective implements IPerspectiveFactory {

@Override
    public void createInitialLayout(IPageLayout layout) {           

        String editorArea = layout.getEditorArea();             
        layout.setEditorAreaVisible(false);        

        IFolderLayout main = layout.createFolder("right", IPageLayout.RIGHT, 0.2f, editorArea); 
        IFolderLayout top = layout.createFolder("top", IPageLayout.TOP, 0.5f, editorArea); 
        IFolderLayout bottom = layout.createFolder("bottom", IPageLayout.BOTTOM, 0.5f, editorArea); 

        // how do I share stuff???              
        main.addView(MapView.ID);              
        layout.getViewLayout(MapView.ID).setCloseable(false);

        top.addView(TableOfContentsView.ID);
        layout.getViewLayout(TableOfContentsView.ID).setCloseable(false);

        bottom.addView(PropertiesView.ID);
        layout.getViewLayout(PropertiesView.ID).setCloseable(false); 
```

如何传递需要共享的视图模型或数据上下文？

# java - Java中的字符文字？

> ID：13849986
> 
> 赞同：9
> 
> 时间：2012-12-12T22:44:06.183
> 
> 标签：java

所以我刚开始阅读“Java In A Nutshell”，在第一章中它指出：

“要在 Java 程序中包含字符文字，只需将其放在单引号之间”即

```
char c = 'A'; 
```

这到底是做什么的^？我认为 char 只接受 0 - 65,535 的值。我不明白您如何将“A”分配给它？

您还可以将“B”分配给 int?

```
int a = 'B' 
```

'a' 的输出是 66。在哪里/为什么要使用上述 ^ 操作？

如果这是一个愚蠢的问题，我深表歉意。

我的整个人生都是一个谎言。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T22:45:16.030

`char`实际上是一个整数类型。它存储相关字符的 16 位 Unicode 整数值。

您可以查看[http://asciitable.com](http://asciitable.com)之类的内容，以查看不同字符的不同值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T22:50:21.683

如果您查看 ASCII 图表，字符“A”的值是 41 十六进制或 65 十进制。使用`'`字符将单个字符括起来使其成为字符文字。使用双引号 ( `"`) 将使其成为字符串文字。

分配`char someChar = 'A';`与说完全一样`char someChar = 65;`。

至于为什么，请考虑您是否只是想查看 String 是否包含十进制数（并且您没有方便的函数来执行此操作）。你可以使用类似的东西：

```
bool isDecimal = true;
for (int i = 0; i < decString.length(); i++) {
    char theChar = decString.charAt(i);
    if (theChar < '0' || theChar > '9') {
        isDecimal = false;
        break;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T22:57:51.280

在 Java 中，字符文字表示 UTF-16（字符编码模式）代码单元。您从 UTF-16 得到的是整数值（以及它们在内存中保存的方式）与相应字符（单位代码的图形表示）之间的映射。

您可以将字符括在单引号中 - 这样您就不需要记住您使用的字符的 UTF-16 值。您仍然可以从字符类型中获取整数值并将 if 例如放入 int 类型（但通常不是简而言之，它们都使用 16 位，但短值从 -32768 到 32767，char 值从 0 到 65535 左右） .

# python - Django 多对多访问两个模型

> ID：13849998
> 
> 赞同：0
> 
> 时间：2012-12-12T22:44:47.000
> 
> 标签：python, django, django-models, many-to-many, django-views

我正在寻找使用 Django 构建一个小型“Twitter 风格”网站来处理事情，并决定尝试允许多个用户编辑每个帖子（最终基于权限）。现在我正在努力访问每个用户的帖子。下面是我的模型、视图和模板的代码，它为所有用户显示“这里没有帖子”。我希望能够显示用户拥有但似乎没有到达任何地方的所有帖子：

模型.py

```
from django.db import models

class User(models.Model):
    username = models.CharField(max_length = 200)
    email = models.EmailField(max_length = 75)
    password = models.CharField(max_length = 64)
    created_date = models.DateTimeField('date created')

    def __unicode__(self):
        return self.username

    class Meta:
        ordering = ('created_date',)

class Post(models.Model):
    users = models.ManyToManyField(User)
    title = models.CharField(max_length = 300)
    post = models.TextField()
    posted_date = models.DateTimeField('date created')
    votes = models.IntegerField()

    def __unicode__(self):
        return self.title

    class Meta:
        ordering = ('posted_date',) 
```

视图.py

```
from django.shortcuts import render, get_object_or_404
from django.http import HttpResponse

from users.models import User, Post

def index(request):
    latest_user_list = User.objects.order_by('username')[:5]
    context = {'latest_user_list': latest_user_list}
    return render(request, 'users/index.html', context)

def detail(request, user_id):
    user = get_object_or_404(User, pk=user_id)
    post_list = Post.objects.filter(id == user.id)  
    return render(request, 'users/detail.html', {'user': user, 'post': post_list}) 
```

网址.py

```
from django.conf.urls import patterns, url

from users import views

urlpatterns = patterns('',
    url(r'^$', views.index, name='index'),
    url(r'^(?P<user_id>\d+)/$', views.detail, name='detail'),
) 
```

（模板）-detail.html

```
<h1>{{ user.username }}</h1>
{% if post_list %}
    <ul>
    {% for post in post_list%}
        <li>{{ post.title }}</li>
    {% endfor %}
    </ul>
{% else %}
    <p> There aint no posts here </p>
{% endif %} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:48:21.067

您传递给模板的变量称为`post`not `post_list`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T01:22:48.787

更改视图中列表对象的名称。

```
def detail(request, user_id):
    user = get_object_or_404(User, pk=user_id)
    post_list = Post.objects.filter(id == user.id)  
    return render(request, 'users/detail.html', {'user': user, 'post_list': post_list}) 
```

# c# - 禁用 JavaScript 时将 ViewModel - View 传递给控制器

> ID：13849999
> 
> 赞同：0
> 
> 时间：2012-12-12T22:44:50.247
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, viewmodel

我很难在没有 JavaScript 的情况下开发功能......

我有一个 ViewModel ：

```
public class AccountRegisterViewModel
{
    #region Properties
    public User User { get; set; }
    public ExternalAccounts ExtAccounts { get; set; }
    public LocalPassword Password { get; set; }
    public Company CompanyARegister { get; set; }
    public Company CompanyBRegister { get; set; }
    public bool SameCompanies { get; set; }
    public int NbCompanies { get; set; }
    ...
 } 
```

在视图中，我有一个带有复选框的链接，用于将第一家公司与第二家公司复制但我不知道如何传递此视图模型（视图到控制器）以保留我的数据并返回与公司副本相同的视图。

我试试这个，鉴于：

```
 @Html.ActionLink("Click", "CopyCompanies","Account", new { model = Model })             
    @Html.CheckBoxFor(model => model.SameCompanies) 
```

在控制器中：

```
 [AllowAnonymous]
    public ActionResult CopyCompanies(AccountRegisterViewModel model)
    {

        ...
        if (model.SameCompanies)
        {
           // copie
        }else //clear
        ...
        return View("Step2Register", model);
     } 
```

任何的想法 ？？感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:53:50.293

如果 CopyCompanies 操作方法需要 AccountRegisterViewModel 对象，那么您将需要提供它。不幸的是，您将无法使用创建链接时遵循的方法来提供价值。

您的两个选择是在 AccountRegisterViewModel 中为每个属性设置一个隐藏字段，然后让模型绑定创建对象，但即使这样也不理想，因为 viewModel 由复杂的对象组成，因此您将隐藏太多字段。

您的第二个选项（我认为这是一种更好的方法）是传递某种与 CopyCompany 可以用来查找所需值的 AccountRegisterViewModel 相对应的 Id。