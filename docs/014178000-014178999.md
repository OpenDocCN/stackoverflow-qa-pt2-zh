# StackOverflow 问答 14178000-14178999

# jquery - jquery可排序占位符的延迟显示

> ID：14178000
> 
> 赞同：-1
> 
> 时间：2013-01-06T00:28:59.223
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我有一个使用 jqueryUI 可排序的可排序表，并且排序有 sildeUp 和 down 延迟，因此看起来很流畅。

但我也有带有虚线边框样式的占位符元素，因此用户知道元素将被删除的位置。

问题是在拖动一个元素时，虚线占位符的高度一直被动画化，它看起来真的很丑。

基本上我希望虚线元素是不可见的，直到有足够的空间，然后显示它。现在它从 0 高度动画到全高度。一旦有足够的空间放置它，如果它以全高出现会更好。

我怎么能延迟它？我正在使用 css() 设置边框，但不知道如何让它等待。

这是我的代码

[http://jsbin.com/ucopun/122/edit](http://jsbin.com/ucopun/122/edit)

```
$("#myTable tbody").sortable({
    helper: fixhelper,
    revert: 300,
    placeholder: 'ui-placeholder',
        'start': function (event, ui) {
          ui.placeholder.html('<td class="uisort" colspan="3"></td>').slideUp(200);
          ui.placeholder.children("td").css({'border': 'dashed 2px black'});
        },
        change: function (e,ui){
      $(ui.placeholder).hide().slideDown(200);
    }

  });
  $("#myTable tbody").on('sortstart',  function(event, ui) {
    $("td").css({'background-color': '#313131'});
 $(ui.item).children("td").css({'background-color': '#fff'});
  });
  $("#myTable tbody").on('mouseup',  function(event, ui) {
 $("td").css({'background-color': '#fff'});
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:50:18.837

你需要减少动画时间，这样它就不会看起来“丑陋”。

尝试将您的 slideUp 和 slideDown 动画时间减少到“1”。

让我知道这是否适合你。

# ruby-on-rails - 如何检查表中的任何 ActiveRecord 中是否存在字符串？

> ID：14178002
> 
> 赞同：1
> 
> 时间：2013-01-06T00:29:37.613
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, heroku, full-text-search

这需要全文搜索还是可以使用方法？

我有一张中文句子表，我想找到所有包含字符串的记录。

例如：

```
irb(main):007:0> Hint.all
  Hint Load (0.7ms)  SELECT "hints".* FROM "hints" 
[
    [0] #<Hint:0x007fb99c9d1900> {
                :id => 107,
          :sentence => "你叫什么名字？",
              :user => nil,
           :learned => nil,
        :created_at => Sat, 05 Jan 2013 21:04:06 UTC +00:00,
        :updated_at => Sat, 05 Jan 2013 21:04:06 UTC +00:00
    },
    [1] #<Hint:0x007fb99f2acc30> {
                :id => 108,
          :sentence => "当时有约翰做他们的助手。",
              :user => nil,
           :learned => nil,
        :created_at => Sat, 05 Jan 2013 21:04:23 UTC +00:00,
        :updated_at => Sat, 05 Jan 2013 21:04:23 UTC +00:00
    },
    [2] #<Hint:0x007fb99f2ac618> {
                :id => 109,
          :sentence => "马可和家人可能过着舒适的生活，因为他们在城里有自己的房子，家里有仆人。",
              :user => nil,
           :learned => nil,
        :created_at => Sat, 05 Jan 2013 21:19:43 UTC +00:00,
        :updated_at => Sat, 05 Jan 2013 21:19:43 UTC +00:00
    }
] 
```

我想搜索“名字”，它会返回表中包含该字符串的记录`sentence`列表。在这种情况下，它将在 [0] 中找到匹配项。

（如果需要全文搜索，能不能推荐一些能用中文和heroku，尽可能接近免费的东西？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T01:02:33.017

你能做这样的事情还是我错过了一些关于 unicode 符号的东西？

```
Hint.where("sentence LIKE '%名字%'") 
```

# php - 注册用户的电子邮件激活

> ID：14178003
> 
> 赞同：0
> 
> 时间：2013-01-06T00:29:47.990
> 
> 标签：php, email

我有一个使用 php 创建的网站，并由 dreamhost 托管，我希望我的注册用户收到一封激活电子邮件，该电子邮件将包含以下地址以供单击或输入网址：

```
http://[website]/activate.php?email=" . $register_data['email'] . "&email_code=" . $register_data['email_code'] . " 
```

当网站上线时，我注册了一个用户并且成功了，但是我没有收到任何电子邮件。但是，当我在上面的链接中输入新注册用户的正确电子邮件和 email_code 时，我的激活成功。所以我的问题是如何设置电子邮件功能以在网站处于活动状态且不在本地主机上运行时发送激活电子邮件？

# javascript - 请问我可以使用 CSS 方向来定位元素的滚动条吗？

> ID：14178009
> 
> 赞同：1
> 
> 时间：2013-01-06T00:30:31.153
> 
> 标签：javascript, html, css, scrollbar

我正在开发一个涉及 JavaScript 滚动条重新样式化解决方案的 Web 界面，该解决方案试图将浏览器的默认滚动条隐藏在 HTML/CSS 替换之后，同时保留对浏览器默认滚动行为的支持，这是许多流行的 JS 滚动条插件所缺乏的功能。我使用这种方法遇到的唯一问题是，一些浏览器坚持在插件创建的滚动条之上显示默认滚动条，完全破坏了所需的美感。

为了解决这个问题，我尝试将包含滚动条的元素包装在一个 div 中，`overflow: hidden;`并使用 JS 来检测默认滚动条的宽度并定位它所控制的元素，使其落在父 div 的剪切边界之外。但是，正如你们中的许多人可能知道的那样，跨越元素底部或右侧边界的内容`overflow: hidden`可能会在鼠标拖动操作期间意外滚动到视图中，例如课程跨过隐藏父元素的底部或剪切边界的文本选择（即：向右拖动将使默认滚动条重新显示）。

但幸运的是，在这种情况下，当内容超出顶部或左侧边界时，不会发生这种行为。知道了这一点，我正在考虑继续使用上面概述的方法，但是设置滚动元素的样式，`direction: rtl`使其滚动条从右向左翻转，并超出隐藏元素的边界，然后应用于`direction: ltr`包含其所有内容的子元素否定所有实际内容的方向变化。

到目前为止，这种技术在我进行的每一次测试中都产生了预期的结果。但是，我想知道这个解决方案是否好得令人难以置信，并且我忽略了一个致命的可访问性和/或与滚动条放置的 CSS 方向的兼容性问题，这应该会阻止我使用这种方法。

TL;DR：**使用 CSS 方向属性来控制元素滚动条的位置是个坏主意吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T00:36:54.197

就属性的正确使用而言，这是一个坏主意。`direction: rtl`正确用于使用替代字符编码（例如阿拉伯语、希伯来语等）翻转文本的阅读方向。尝试找到解决此问题的另一种方法。试着看看前面提到的一些流行的 JS 滚动条插件的来源，看看它们是如何做到的。

# python - 在 Python 类中传递变量

> ID：14178010
> 
> 赞同：1
> 
> 时间：2013-01-06T00:30:34.373
> 
> 标签：python

我有以下课程。但是当试图将变量 x 传递给 re.match 时，它似乎无法正常工作，因为我输入的任何输入都返回“无效”

```
class validate:
    def __init__(self, input_value):
        self.input_value = input_value
    def macaddress(self, oui):
        self.oui = oui
        #oui = 0, input deemed valid if it matches {OUI:DEVICE ID}.
        #oui = 1, input deemed valid if it matches {OUI}. 
        if self.oui == 0:
            x = 5
        elif self.oui == 1:
            x = 2   
        if re.match("[0-9a-fA-F]{2}([.-: ][0-9a-fA-F]{2}){x}$", self.input_value):
            return "valid"
        else:
            return "invalid" 
```

我应该以其他方式传递 var x 吗？

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T00:31:59.937

以这种方式插入`x`字符串（使用[字符串格式化](http://docs.python.org/2/library/stdtypes.html#string-formatting)）：

蟒蛇<2.7：

```
if re.match("[0-9a-fA-F]{2}([.-: ][0-9a-fA-F]{2}){%d}$" % x, self.input_value): 
```

但是，如果您使用 python 3[格式化](http://docs.python.org/3.3/library/stdtypes.html#str.format)方式，您的正则表达式会干扰。
使用串联可能更干净（但更慢）。

*没有串联：*

```
if re.match("[0-9a-fA-F]\{2\}([.-: ][0-9a-fA-F]\{2\}){0}$".format(x), self.input_value): 
```

*连接：*

```
if re.match("[0-9a-fA-F]{2}([.-: ][0-9a-fA-F]{2})" + x + "$", self.input_value): 
```

**注意：如果无法进行隐式类型转换，则会失败。**

如果你只是把字符串放在`{x}`中间，除非应用了字符串格式，否则 Python 实际上不会对它做任何事情。

# jquery - 在 Firefox 上遇到 HTML5 音频问题

> ID：14178013
> 
> 赞同：0
> 
> 时间：2013-01-06T00:31:01.447
> 
> 标签：jquery, html, google-chrome, firefox, ogg

提前感谢您花时间阅读我的问题。

我正在构建一个将 HTML5 音频与 jQuery 集成的应用程序。在 Chrome 上，它可以播放！在 Firefox 上，它没有..

我有 .mp3 和 .ogg 文件，并编写了音频标签，如下所示：

```
<audio id="drop-sound">
    <source src="music/water-droplet-1.mp3" type="audio/mp3" />
    <source src="music/water-droplet-1.ogg" type="audio/ogg" />
</audio> 
```

我的 jQuery 然后按如下方式播放：

```
//drop sound
var audioDrop = $('#drop-sound')[0];

//play drop
audioDrop.play(); 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T01:28:43.610

我有一些想法可以帮助您解决问题。

第一个是将音频标签更改为如下所示。

```
<audio id="drop-sound">
  <source src="music/water-droplet-1.ogg" type="audio/ogg" />
  <source src="music/water-droplet-1.mp3" type="audio/mpeg" />
    Your browser does not support the audio element.
</audio> 
```

使用类型`audio/mpeg`而不是`audio/mp3`

第二个是将javascript更改为

```
document.getElementById('drop-sound').play(); 
```

这比设置变量然后告诉它播放要快。

最后一件事是检查您的服务器是否发送了正确的 MIME 类型。这是一个解释这一点的[教程。](http://html5doctor.com/html5-audio-the-state-of-play/)

# opencv - 如何在 OpenCV 中显示由三个矩阵表示的图像

> ID：14178015
> 
> 赞同：0
> 
> 时间：2013-01-06T00:31:21.707
> 
> 标签：opencv

我有 3 个双精度格式的矩阵 (RGB)，所以我只需要 OpenCV 版本的 matlab [cat](http://matlab.izmiran.ru/help/techdoc/ref/cat.html)函数来显示图像。如果您有任何来源或参考，请发布，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T01:23:38.373

有[`merge()`](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html#merge)这样的任务。我假设您在以下示例代码中使用 C++，但此函数也可用于 C 和 Python（请参阅文档）。

```
// Suppose you have 3 matrices (instances of class cv::Mat)
// named channelR, channelG and channelB that hold your data
std::vector<cv::Mat> channels;
channels.push_back(channelR);
channels.push_back(channelG);
channels.push_back(channelB);

cv::Mat outputImage;
merge(channels, outputImage); 
```

# objective-c - UITableView 的 NSMutableArrays 或 NSArrays 的动态嵌套

> ID：14178017
> 
> 赞同：1
> 
> 时间：2013-01-06T00:31:31.067
> 
> 标签：objective-c, ios, uitableview, nsmutablearray, nsarray

我将逐步解释我的问题：

1.  我有一个 NSArray，里面有 NSDictionaries。
2.  每个 NSDictionary 都有一个 NSDate 和一个 NSNumber（2 个键/2 个值）。
3.  我想用动态部分和每部分的动态行填充 UITableView
4.  UITableView 的每个部分必须按时间顺序按周（使用 NSCalendar）。
5.  每行必须在每个部分（按周）下按天按时间顺序排列。

现在，我已经使用 NSCalendar 来找出每个 Dictionary 进入哪一周，并且我已经设法通过这段代码动态找出我在哪些部分（周）中有多少行（天/消息）：

```
NSCalendar *calendar = [NSCalendar currentCalendar];
    NSDateComponents *dateComponents = [calendar components:NSWeekCalendarUnit fromDate:[NSDate date]];
    NSMutableArray *tempArray = [NSMutableArray  new];
    NSNumber *weekNumber; int countDictionary = 0;

    if (!_sectionsDetailed)
        _sectionsDetailed = [NSMutableArray new];
    if (!_sections)
        _sections = [NSMutableArray new];
    if (!_sectionsDictionary)
        _sectionsDictionary = [NSMutableDictionary new];

    for (NSDictionary *dictionary in _historyArray)
    {
        ++countDictionary;
        dateComponents = [calendar components:NSWeekCalendarUnit fromDate:[dictionary objectForKey:@"messageDate"]];
        weekNumber = [NSNumber numberWithInteger:[dateComponents week]];

        [_sectionsDetailed addObject:weekNumber];

        DLog(@"DICTIONARY NUMBER: %i - WEEK NUMBER: %@", countDictionary, weekNumber);
    } 
```

从那我有以下输出（我有 4 个部分（周）的 9 条消息（行/天））：

```
DICTIONARY NUMBER: 1 - WEEK NUMBER: 5
DICTIONARY NUMBER: 2 - WEEK NUMBER: 5
DICTIONARY NUMBER: 3 - WEEK NUMBER: 5 
DICTIONARY NUMBER: 4 - WEEK NUMBER: 3
DICTIONARY NUMBER: 5 - WEEK NUMBER: 3
DICTIONARY NUMBER: 6 - WEEK NUMBER: 2
DICTIONARY NUMBER: 7 - WEEK NUMBER: 2
DICTIONARY NUMBER: 8 - WEEK NUMBER: 1
DICTIONARY NUMBER: 9 - WEEK NUMBER: 1 
```

然后，只有一周的一个实例，我使用[NSBag](https://github.com/erica/NSBag)计算部分（周） ：

```
NSBag *arrayCounter = [NSBag bag];

for (id section in _sectionsDetailed)
{
    [arrayCounter add:section];
}
for (id uniqueSection in arrayCounter.objects)
{
    [tempArray addObject:uniqueSection];
    [_sectionsDictionary setObject:[NSNumber numberWithInteger:[arrayCounter occurrencesOf:uniqueSection]] forKey:uniqueSection];
    DLog(@"WEEK:%@, MESSAGES/WEEK:%i", uniqueSection, [arrayCounter occurrencesOf:uniqueSection]);
} 
```

计数的输出是：

```
WEEK:5, MESSAGES/WEEK:3
WEEK:3, MESSAGES/WEEK:2
WEEK:1, MESSAGES/WEEK:2
WEEK:2, MESSAGES/WEEK:2 
```

**我的问题是：由于我需要填充 UITableView 的部分和行，我如何创建一个嵌套的 NSArray 或 NSMutableArray 来包含这样的方案：**

```
completeArray:
             > Week 1 (section 1) [ARRAY]:
                                  > Message 1 (row 1 / day 1 in week 1/section1) [DICT]
                                  > Message 2 (row 2 / day 2 in week 1/section1) [DICT]
             > Week 2 (section 2) [ARRAY]:
                                  > Message 1 (row 1 / day 1 in week 2/section2) [DICT]
                                  > Message 2 (row 2 / day 2 in week 2/section2) [DICT]
and so on...     .
                 .
                 . 
```

我尝试使用以下代码获得所需的结果：

```
 for (id section in _sections)
    {
        for (id dictionary in _historyArray)
        {
            dateComponents = [calendar components:NSWeekCalendarUnit fromDate:[dictionary objectForKey:@"messageDate"]];
            weekNumber = [NSNumber numberWithInteger:[dateComponents week]];
            if (section == weekNumber)
            {
              DLog(@"Section %@ - Dict %@",section, dictionary);
            }
        }
    } 
```

但是我一直在寻找一个解决方案来检查哪一行转到哪个部分....

上面的输出是这样的：

```
Section 5 - Dict {
    messageDate = "2013-02-01 11:06:41 +0000";
    messageNumber = 50;
}
Section 5 - Dict {
    messageDate = "2013-02-01 11:06:40 +0000";
    messageNumber = 1;
}
Section 5 - Dict {
    messageDate = "2013-02-01 11:06:39 +0000";
    messageNumber = 52;
}
Section 3 - Dict {
    messageDate = "2013-01-18 09:18:47 +0000";
    messageNumber = 88;
}
Section 3 - Dict {
    messageDate = "2013-01-18 09:18:46 +0000";
    messageNumber = 58;
}
Section 2 - Dict {
    messageDate = "2013-01-11 09:18:24 +0000";
    messageNumber = 45;
}
 Section 2 - Dict {
    messageDate = "2013-01-11 09:18:06 +0000";
    messageNumber = 35;
}
Section 1 - Dict {
    messageDate = "2013-01-04 09:17:40 +0000";
    messageNumber = 30;
}
Section 1 - Dict {
    messageDate = "2013-01-04 08:16:40 +0000";
    messageNumber = 53;
} 
```

如果可以的话，请帮助我。我将非常感谢您的帮助！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T02:14:06.220

好的，所以您现在拥有数据结构的方式使您想要做的事情几乎不可能。事实上，这里有很多更简单的方法来做这些事情。

因此，不要将所有这些字典（如果我们很挑剔，真的应该将其制成一个消息类）保存在一个数组中，而是尝试按照键为“Week #”和值是数组的行创建一个 NSDictionary消息（或在本例中为字典）。

然后填充 TableView，numberOfSections = [[aDictionary allKeys] count]... 然后枚举这些部分。每个部分的 numberOfRows = [[aDictionary objectForKey: aSection] count]，这将为您提供一周的消息数组，然后您可以在数组上枚举。（希望这一点得到了理解……对不起，我很草率）

您遇到的问题是可以通过使用正确类型的数据结构轻松避免的问题，TableView 是一个二维数组，您试图单独填充它的每个元素，而不是匹配刚刚制作的数据结构很头疼，你可能知道哈哈

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T21:43:14.700

抱歉回答晚了（我没有时间），我想出了以下解决方案：感谢杰里米的帮助！这是在你的帮助下完成的。

```
- (void) archiveRecord
{
    NSDate *currentDate = [NSDate date];
    NSNumber *currentMessageNumber = [NSNumber numberWithInt:_generatedNumber];

    NSDictionary *currentMessageDictionary = [[NSDictionary alloc] initWithObjectsAndKeys:currentMessageNumber,@"messageNumber", currentDate,@"messageDate", nil];    
    NSCalendar *calendar = [NSCalendar currentCalendar];
    NSDateComponents *currentMessageDateComponents;
    NSDateComponents *historyMessageDateComponents;
    currentWeekNumber = 0;
    historyWeekNumber = 0;

    currentMessageDateComponents = [calendar components:NSWeekCalendarUnit fromDate:currentDate];
    currentWeekNumber = [currentMessageDateComponents week];

    if (historyExists)
    {
      for (NSMutableArray *sectionArray in [_messageHistory objectAtIndex:0])
      {
          DLog(@"SECTIONARRAY: %@", sectionArray);
          DLog(@"DICTIONARY NUMBER: %@", [sectionArray valueForKey:@"messageNumber"]);
          historyMessageDateComponents = [calendar components:NSWeekCalendarUnit fromDate:[sectionArray valueForKey:@"messageDate"]];
          historyWeekNumber = [historyMessageDateComponents week];

          if (historyWeekNumber == currentWeekNumber)
          {
              DLog(@"ADD MESSAGE TO CURRENT WEEK");
              [[_messageHistory objectAtIndex:0] insertObject:currentMessageDictionary atIndex:0];
              break;
          }
          else
          {
              DLog(@"NEW SECTION NEEDED: CREATE NEW SECTION AND ADD MESSAGE");
              [_messageHistory insertObject:[NSMutableArray arrayWithObjects:currentMessageDictionary, nil] atIndex:0];
              break;
          }
       }
    }
    else
    {
        DLog(@"CREATE NEW SECTION AND ADD MESSAGE");
        [_messageHistory addObject:[NSMutableArray arrayWithObjects:currentMessageDictionary, nil]];
    }
    DLog(@"CURRENT HISTORY: %@", _messageHistory);
    [self performSelector:@selector(writeRecordToFile)];
} 
```

# java - Java，Android：导出时找不到活动异常

> ID：14178022
> 
> 赞同：0
> 
> 时间：2013-01-06T00:31:48.810
> 
> 标签：java, android, exception, android-activity

我正在用java为android创建这个游戏。它的工作原理应该是这样，但是当我将其导出并将其发送给其他人时，它会给出未找到异常的活动，有人知道为什么吗？

这是我的主要课程：

```
public class Main extends Activity implements Constants
{
    private GameView mGameView;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

        mGameView = new GameView(this, getAssets());
        setContentView(mGameView);

        ActivityManager am = ((ActivityManager)getSystemService(Activity.ACTIVITY_SERVICE));
        mGameView.setMemoryLimit(am.getMemoryClass());
    }
} 
```

这是清单：

```
<?xml version="1.0" encoding="UTF-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.testcompany.testgame" android:versionCode="1"
    android:versionName="1.0">

    <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="15" />

    <application android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" android:theme="@style/AppTheme"
        android:largeHeap="true">
        <activity android:name=".Main" android:label="@string/title_activity_main"
            android:screenOrientation="landscape">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T03:06:49.553

确保您没有不正确地使用 Proguard，这可能会导致 Activity 类被混淆，从而无法找到。为此，请确保您的`proguard.cfg`文件包含：

```
-keep public class * extends android.app.Activity 
```

~~检查您的`Main`活动是否位于`com.testcompany.testgame`包中（即`package`Main.java 顶部的声明）。如果您使用的是子包，则需要将其包含在您的 AndroidManifest.xml 文件中。~~

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T14:28:43.847

从 Project--> Properties-->Java builder Path-->android 依赖项中取消选中 Android Dependencies

# java - 不兼容的类型（布尔值/字符串）

> ID：14178024
> 
> 赞同：0
> 
> 时间：2013-01-06T00:32:05.943
> 
> 标签：java

我正在尝试检查我的输入是否是辅音。但是它在下面的行告诉我它们是不兼容的类型（布尔值与字符串）

```
if (medeklinkerGeraden = medeklinkers [r]) { 
```

^

```
public String medeklinkerRaden ()  {
    String medeklinkerGeraden = "";
    boolean bevatMedeklinker = false;
    System.out.println("U mag een medeklinker gokken!");
    medeklinkerGeraden = Input.readString();
    String [] medeklinkers = {"b", "c", "d", "f", "g", "h", "j", "k", "l", "m", "n", "p", "q", "r", "s", "t", "v", "w", "x", "z"};
    do {
        for (int r = 0; r < medeklinkers.length; r++)
            if (medeklinkerGeraden = medeklinkers [r]) {
                bevatMedeklinker = true;
            }

    }
    while (! bevatMedeklinker);

    return medeklinkerGeraden;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T00:34:21.540

像这样重构：

```
 if (medeklinkers[r].equals(medeklinkerGeraden)) {
            bevatMedeklinker = true;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T00:34:15.893

您必须使用 `==`而不是`=`

```
 if (medeklinkerGeraden == medeklinkers [r]) 
```

# javascript - 按下 Jquery 选项卡时使用“this”触发函数

> ID：14178025
> 
> 赞同：0
> 
> 时间：2013-01-06T00:32:20.133
> 
> 标签：javascript, jquery, function, tabs

我通过传入 viewName 参数来动态创建 Jquery 选项卡。我试图弄清楚如何使用`this`基于`id`动态创建的选项卡来触发另一个函数。

这是创建选项卡并`ID`动态为其分配名称的函数。

```
function SetImportedView(viewName, scriptValue) {
/* put the values we received in parameters into create view tabs*/
$('<li id="' + viewName + '">' + '<a href="' + '#tabs-1' + '"</a>' + viewName +    '</li>').insertBefore('#new');
} 
```

我需要触发另一个特定于`ID`所单击选项卡的功能。

像这样的东西：

```
$(this.tab).click(function() {
 doSomething
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T00:38:05.593

这是怎么回事

```
function SetImportedView(viewName, scriptValue) {
    /* put the values we received in parameters into create view tabs*/
    $('<li id="' + viewName + '">' + '<a href="' + '#tabs-1' + '"</a>' + viewName +    '</li>')
        .on( 'click', 'a' function( ev ) {
            // link in li clicked
         } )
        .insertBefore('#new');
} 
```

### 编辑

好吧，你的意思是这样的？！？！

```
$( 'li' ).on( 'click', 'a', function( ev ) {
    var tabID = $( this ).parent().attr('id');

    // do something here with your tabID
} ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T00:38:43.393

只需在您的“a”标签上放置一个 onclick，它就会呈现如下：

```
<a href="javascript:void(0);" onclick="return myFunction();">TAB #1</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T01:14:39.933

解决了...

```
$('#tabs ul li a').click(function() {
        console.log($(this).attr('id'));
    }); 
```

# sed - 带有变量和行号限制的 Sed

> ID：14178026
> 
> 赞同：1
> 
> 时间：2013-01-06T00:32:30.617
> 
> 标签：sed

我有以下文件：

```
<CamcorderProfiles cameraId="0">

    <EncoderProfile quality="720p" fileFormat="mp4" duration="30">
        <Video codec="h264"
               bitRate="8000000"
               width="1280"
               height="720"
               frameRate="30" />
        <Audio codec="aac"
               bitRate="96000"
               sampleRate="48000"
               channels="1" />
    </EncoderProfile>

    <EncoderProfile quality="1080p" fileFormat="mp4" duration="30">
        <Video codec="h264"
               bitRate="12000000"
               width="1920"
               height="1080"
               frameRate="30" />
        <Audio codec="aac"
               bitRate="96000"
               sampleRate="48000"
               channels="1" />
    </EncoderProfile>

</CamcorderProfiles>

<CamcorderProfiles cameraId="1">

    <EncoderProfile quality="720p" fileFormat="mp4" duration="30">
        <Video codec="h264"
               bitRate="8000000"
               width="1280"
               height="720"
               frameRate="30" />
        <Audio codec="aac"
               bitRate="96000"
               sampleRate="48000"
               channels="1" />
    </EncoderProfile>

    <EncoderProfile quality="1080p" fileFormat="mp4" duration="30">
        <Video codec="h264"
               bitRate="12000000"
               width="1920"
               height="1080"
               frameRate="30" />
        <Audio codec="aac"
               bitRate="96000"
               sampleRate="48000"
               channels="1" />
    </EncoderProfile>

</CamcorderProfiles> 
```

这是我的代码：

```
camerastart=$(sed -n '{/<CamcorderProfiles cameraId="0">/=}' $file)
cameraend=$(sed -n $camerastart',$ {/<\/CamcorderProfiles>/=}' $file)

camera1080pstart=$(sed -n $camerastart','$cameraend' {/<EncoderProfile quality="1080p" fileFormat="mp4" duration="30">/=}' $file) 
```

当我打印变量时，除了camera1080p_start之外，我得到了正确的行号，它出现了空白。

```
camerastart = 3
cameraend = 29
camera1080pstart = 
```

如果我将代码的第一行更改为`cameraId="1"`，那么我确实会得到适合这种情况的结果。

```
camerastart = 31
cameraend = 57
camera1080pstart = 45 
```

如果我更改代码以便硬编码前两个变量，我会得到正确的`17`camera1080pstart 输出。

```
camerastart="3"
cameraend="29"

camera1080pstart=$(sed -n $camerastart','$cameraend' {/<EncoderProfile quality="1080p" fileFormat="mp4" duration="30">/=}' $file) 
```

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T04:15:59.467

将第二个命令更改为：

```
cameraend=$(sed -n $camerastart',$ {/<\/CamcorderProfiles>/=}' $file | head -1) 
```

因为它返回多个行号。但是，这可能不是解决这个特定问题的最佳方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T01:08:09.840

这是一个脚本，它将查找并打印您要更改的行：

$猫tst.awk

```
BEGIN{ FS = "\"" }
/<CamcorderProfiles cameraId=/ { cameraId = $2 }
/<EncoderProfile quality=/     { quality  = $2 }
/bitRate="12000000"/ {
   if ( (cameraId == "0") && (quality == "1080p") ) {
      print NR, "this is the line I want to change:"
      print
   }
}
$ awk -f tst.awk file
17 this is the line I want to change:
               bitRate="12000000" 
```

如果您需要能够使用不同的 cameraId 和/或质量和/或任何其他值来调用它，那么这是一个微不足道的调整。

如果您告诉我们您想以何种方式更改脚本找到的行，那也很简单。

编辑：根据下面的 OP 评论更新脚本。

```
$ cat tst.awk
BEGIN{ FS = "\"" }
/<CamcorderProfiles cameraId=/ { cameraId = $2 }
/<EncoderProfile quality=/     { quality  = $2 }
/bitRate="12000000"/ {
   if ( (cameraId == "0") && (quality == "1080p") ) {
      sub(/12000000/,"20000000")
   }
}
{ print }

$ awk -f tst.awk file > tmpfile

$ diff file tmpfile
17c17
<                bitRate="12000000"
---
>                bitRate="20000000" 
```

如果要更新原始文件，只需将其运行为：

```
awk -f tst.awk file > tmpfile && mv tmpfile file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T23:14:29.070

对我有用的解决方案是：

```
camerastart=$(sed -n '{/<CamcorderProfiles cameraId="0">/=}' $file | head -1)
cameraend=$(sed -n $camerastart',$ {/<\/CamcorderProfiles>/=}' $file | head -1)

camera1080pstart=$(sed -n $camerastart','$cameraend' {/<EncoderProfile quality="1080p" fileFormat="mp4" duration="30">/=}' $file | head -1) 
```

# arrays - java - 如何查看一个字符串数组是否包含与另一个字符串数组相同的字符串

> ID：14178030
> 
> 赞同：0
> 
> 时间：2013-01-06T00:33:18.980
> 
> 标签：arrays

我试图检查数组 arr2 是否以相同的顺序包含在 arr1 中，而没有 java utils。arr2 可以包含在 arr1 中的任何位置。

```
 contains({"1", "2", "3"}, {"1", "2"}) → true
    contains({"1", "2", "3"}, {"2", "3"}) → true
    contains({"1", "2", "3"}, {"2", "1"}) → false 
```

这是我迄今为止尝试过的

```
 public boolean contains(String[] arr1, String[] arr2)
    {
    if(arr2.length>arr1.length)
    return false;

    for(int i =0; i < arr1.length; i++)
    {
    if(arr1[i] == arr2[0])
     return true;
    if(arr1 [i+1]!= arr2[0+i])
      return false;
    }
    return false;
    } 
```

# ruby - 我怎样才能使这个金字塔更尖？

> ID：14178032
> 
> 赞同：3
> 
> 时间：2013-01-06T00:33:44.020
> 
> 标签：ruby

此 ruby​​ 代码生成一个金字塔：

```
w = 20
1.upto(w) { |i| puts ">"+" "*(w-i)+"."*i*2+" "*(w-i)+"<" } 
```

像这样：

```
>                   ..                   <
>                  ....                  <
>                 ......                 <
>                ........                <
>               ..........               <
>              ............              <
>             ..............             <
>            ................            <
>           ..................           <
>          ....................          <
>         ......................         <
>        ........................        <
>       ..........................       <
>      ............................      <
>     ..............................     <
>    ................................    <
>   ..................................   <
>  ....................................  <
> ...................................... <
>........................................< 
```

我想让金字塔在顶部有一个点而不是两个（目前是因为`"."*i*2`使它对称）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T00:37:15.370

```
w=20; 1.upto(w) { |i| puts ">"+" "*(w-i)+"."*(i*2-1)+" "*(w-i)+"<" } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T00:40:12.550

您使用的是固定宽度的字体，因此无法在当前金字塔上方获得一个句点。您需要使用奇数个点而不是偶数：

```
w = 20
1.upto(w) do |i|
  spaces = " " * (w-i)
  dots   = "." * (i*2 - 1) # Use one fewer dot per line, starting with one dot
  puts ">" + spaces + dots + spaces + "<"
end 
```

这会产生：

```
>                   .                   <
>                  ...                  <
>                 .....                 <
>                .......                <
>               .........               <
>              ...........              <
>             .............             <
>            ...............            <
>           .................           <
>          ...................          <
>         .....................         <
>        .......................        <
>       .........................       <
>      ...........................      <
>     .............................     <
>    ...............................    <
>   .................................   <
>  ...................................  <
> ..................................... <
>.......................................< 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T05:13:53.190

使用`times`会使它更干净。此外，还有`center`简化事情的方法：

```
20.times{|i| puts ">#{("."*(i*2+1)).center(39)}<"} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T02:41:09.557

```
S, W = ' ', 20; 1.upto(W) {|i| n = W - i; puts ">#{S*n + '.' * (2*i - 1) + S*n}<"} 
```

# php - 如何发送 PHP 变量并使用 Jquery 检索它们（无回显）？

> ID：14178037
> 
> 赞同：-2
> 
> 时间：2013-01-06T00:34:01.683
> 
> 标签：php, jquery

我正在构建一个搜索功能来检索谷歌地图的 XML 数据。

除此之外，我想显示实际找到了多少结果。

我想过在实际文档中做一个回显，但这可能会弄乱我的标记数据。成功调用后，我将如何获取 PHP 变量并在 Jquery 中检索它？

如果我的 PHP 看起来像这样：

```
$result = mysql_query($query);
if (!$result) {
  die('Invalid query: ' . mysql_error());
}
$num_rows = mysql_num_rows($result); 
```

像这样的Jquery：

```
 $.ajax({
        type: "POST",
        url: "MapSearchxml.php",
        data: {
            dataFromDate: FromDate,
            //lalala
            dataHasPatio: HasPatio
        },
        beforeSend: function (html) { // this happens before actual call
            $("#results").html('Please Wait');
            $("#searchresults").show();
            $(".phpFromDate").html(FromDate);
        },
        success: function (data, status, jqXHR) {

        //Success?
        },
        dataType: 'xml'
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T00:38:43.857

只是为您尝试一个 JSON 示例，这有 echo 但您可以用它做复杂的事情吗？

不知道这是否是你的追求？我知道您不想对每个变量进行回显，如果使用 JSON，您也不会。

```
<?php
$simple = 'simple string';
$complex = array('more', 'complex', 'object', array('foo', 'bar'));
?>
<script type="text/javascript">
var simple = '<?php echo $simple; ?>';
var complex = <?php echo json_encode($complex); ?>;
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T00:40:12.517

你看，AJAX 获得成功的是一个 html 代码。如果你 AJAX 一个完整的 html 页面，你会得到它，以 . 开头`<html>`和结尾`</html>`。您可以在返回的 html 数据上做一个特殊的标记，比如`[sepcial_info : 'INFO']` 或其他东西，然后过滤它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T00:44:47.873

好的，我需要一点来破译你的问题，可能我还是错了，让我们试试：

根据您的想法，您尝试做的事情在技术上是不可能的。简而言之：如果您执行一个 Ajax 请求，您将返回一个响应。调用该`success`函数的那一刻，您的 PHP 脚本就已经消失了。所以你只能传递一个返回值。

但是，您可以做的是，将该返回值设置为嵌套的，例如包含两个部分：

1.  您已经返回的 XML 文档
2.  伯爵

这可能是你的解决方案。如果您问如何，我会将计数作为命名空间值添加到 XML 中，然后使用 javascript 处理它。

由于您没有在此处显示任何代码，因此我无法为您的案例提供一个简单的示例（我将其作为您未来问题的指针）。[`DOMDocument`](http://php.net/DOMDocument)添加命名空间元素，就像在 PHP 中使用属性一样非常简单。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-06T00:46:39.923

可能会发现在 php 中创建数组并发送 JSON 更容易。在客户端很容易循环响应对象/数组

```
$output=array('status'=>'', 'results'=>array());
$result = mysql_query($query);
if (!$result) {
  die('Invalid query: ' . mysql_error());
}
$num_rows = mysql_num_rows($result);

if( $num_rows){ 
  $output['status']='ok';
  /* push row data to $output['results'][]; in while loop*/
}else{
  $output['status']= 'No results';
}

echo json_encode( $output); 
```

然后在 jQuery 中：

```
success:function( data){
  if (data.status != 'No results' ){
      /* count array length*/
      var count= data.results.length;
      /* loop over data.results array*/
  }
}

/* change dataType to "json"*/ 
```

我忘了`count`并在jQuery中添加了它......还可以将`count`属性添加到`$output`php数组并用于`$num_rows`填充

# android - 如何有条件地为 Android 应用程序使用供应商特定的 API？

> ID：14178049
> 
> 赞同：6
> 
> 时间：2013-01-06T00:36:44.560
> 
> 标签：android, api, amazon, ouya

借助提供特定于市场的 API 的 Android 应用商店，我如何构建一个有条件地使用特定于供应商的库的 Android 应用程序？例如，亚马逊提供了他们自己的应用内购买和“GameCircle”API。Google 拥有自己的 Licensing API，而现在欧亚将拥有自己的 IAP 和硬件控制器 API。

随着这些供应商特定 SDK 的激增，维护我的 Android 游戏的多个单独版本变得越来越困难。我想知道如何构建我的项目，以便我的代码可以在运行时检查各种 API 并在可用时使用它们。就像是

```
if (amazon api is available)
  // Do some amazon-specific stuff 
```

在构建时，我将链接所有库，然后将相同的通用应用程序上传到每个商店。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T01:09:57.957

我目前正在使用这个。

```
private boolean isAmazonInstall()
{
    PackageManager pm = getPackageManager();
    String installationSource = pm.getInstallerPackageName(getPackageName());
    if (installationSource != null && installationSource.startsWith("com.amazon"))
    {
                    return true;
    }
            return false;
} 
```

据称，对于亚马逊安装，getInstallerPackageName 的返回值为“com.amazon.venezia”。对于从 Google Play 安装的应用程序，结果是“com.android.vending”（尽管它曾经是“com.google.android.feedback”。手动 APK 安装返回 null。

我还没有找到官方确认这种方法是有效的。但是我还没有找到更好的方法。

# boost - 无法将 boost 正则表达式链接到 mingw

> ID：14178050
> 
> 赞同：0
> 
> 时间：2013-01-06T00:36:49.577
> 
> 标签：boost, mingw, static-linking

我的mingw编译器：http: [//sourceforge.net/projects/mingwbuilds/files/host-windows/releases/4.7.2/32-bit/threads-posix/sjlj/x32-4.7.2-release-posix-sjlj- rev6.7z](http://sourceforge.net/projects/mingwbuilds/files/host-windows/releases/4.7.2/32-bit/threads-posix/sjlj/x32-4.7.2-release-posix-sjlj-rev6.7z)

提升：http: [//sourceforge.net/projects/boost/files/boost/1.52.0/boost_1_52_0.7z](http://sourceforge.net/projects/boost/files/boost/1.52.0/boost_1_52_0.7z)

（都在 D：驱动器上）

代码：

```
#include <boost\regex.hpp>
int main() {
  boost::regex reg("[a-z]+");
} 
```

命令行：

```
SET PATH=%PATH%;D:\mingw\bin;D:\mingw\include
g++ -I "d:\mingw\include" -I "d:\boost" -Os -s -o test.exe test.cpp -std=c++11 -static -L "D:\boost\stage\lib" -lboost_regex 
```

目录中`d:\boost\stage\lib`有`libboost_regex-mgw47-mt-1_52.a`.

并且该过程返回：

```
d:/mingw/bin/../lib/gcc/i686-w64-mingw32/4.7.2/../../../../i686-w64-mingw32/bin/ld.exe: cannot find -lboost_regex
collect2.exe: error: ld returned 1 exit status 
```

如果我输入 *.a 文件的确切名称，结果是`cannot find -llibboost_regex-mgw47-mt-1_52.a`

甚至整条路径`-ld:\boost\stage\lib\libboost_regex-mgw47-mt-1_52.a`都行不通。无论我放在后面什么`-l`都有相同的效果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T07:08:55.160

正如您[在此处](http://www.network-theory.co.uk/docs/gccintro/gccintro_17.html)看到的，您必须使用其中一个（`-l`后跟删除 lib 前缀和扩展名 .a 的库的名称）：

```
g++ -I "d:\mingw\include" -I "d:\boost" -Os -s -o test.exe test.cpp -std=c++11 -static -L "D:\boost\stage\lib" -lboost_regex-mgw47-mt-1_52 
```

或（不使用的库的完整路径`-l`）：

```
g++ -I "d:\mingw\include" -I "d:\boost" -Os -s -o test.exe test.cpp -std=c++11 -static D:/boost/stage/lib/libboost_regex-mgw47-mt-1_52.a 
```

PS：我个人做的一件事是使用`--layout=tagged`. 这使得库的名称更易于管理（在这种情况下`libboost_regex-mt.a`）。

# html - SVG，溢出（滚动）似乎不适用于移动设备，标签

> ID：14178054
> 
> 赞同：3
> 
> 时间：2013-01-06T00:37:06.023
> 
> 标签：html, svg

我正在编写的 HTML (SVG) 解决方案中使用了以下标签，

```
<div class="divSVG" id="divSVG">
<svg id="mySVG" width="1600" height="1200" overflow="scroll"></svg> 
</div> 
```

它在带有滚动条的 PC（Chrome、IE、Netscape 等）上很好地显示——因为我的绘图超出了浏览器的边界（divSVG 宽度 = 100%）。但是在我的手机和 Nexus 选项卡（都使用 Chrome，Androide 4.2）上尝试相同的滚动条没有出现，我无法垂直或水平滚动来查看图纸的极端情况。

关于可能是什么问题的任何想法 - 认为 Chrome 可以在相同的设备上工作？提前感谢您提供支持。

# c# - 如何使用 OAuth2 访问令牌 (.NET) 通过 API 上传 Youtube 视频？

> ID：14178056
> 
> 赞同：1
> 
> 时间：2013-01-06T00:37:15.413
> 
> 标签：c#, .net, api, upload, youtube

我是一位经验丰富的 .NET 开发人员，我正在制作一个只需要使用 2 个或 3 个帐户的视频上传器应用程序。使用 1 个帐户作为我的测试用例，我已经使用它授权了我的应用程序，取回了我的授权密钥，我现在有了一个访问 + 刷新令牌。

到了这个阶段，我现在意识到我不知道如何使用我的访问令牌上传视频（我知道在回答这个问题时我可能需要刷新它） - 有人可以帮忙吗？我找不到任何有关使用 Youtube .NET 客户端库（例如 YouTubeRequestSettings、YouTubeRequest 等）执行此操作的文档 - 非常感谢所有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T14:04:23.943

我最终通过反复试验弄清楚了这一点 - 脱节的 Youtube API 文档确实没有帮助！

AuthSub 已被弃用，如果您遇到获取 OAuth2 密钥的麻烦（文档中对此进行了很好的描述），您可以使用它上传视频。

为此，只需使用 access_token 代替 'YoutubeRequestSettings' 对象中的 authsub 键 - 如下例所示：

```
string myDeveloperKey = "Your developer key here";
string myOAuthKey = "The OAuth key for the target user's account here";

YouTubeRequestSettings settings = new YouTubeRequestSettings("My Uploader App Name", myDeveloperKey, myOAuthKey); // The documentation for this method implies it only accepts an authSub key - it works if you pass your OAuth key

YouTubeRequest request = new YouTubeRequest(settings);

Video newVideo = new Video();

newVideo.Title = "Test Video - ignore me";
newVideo.Tags.Add(new MediaCategory("Autos", YouTubeNameTable.CategorySchema));
newVideo.Keywords = "test 1 , test 2";

newVideo.Description = "test 3 test 4";
newVideo.YouTubeEntry.Private = false;

newVideo.Tags.Add(new MediaCategory("tag 1, tag 2", YouTubeNameTable.DeveloperTagSchema));
newVideo.Private = true; // Make this video private as it's a test

newVideo.YouTubeEntry.Location = new GeoRssWhere(37, -122);

newVideo.YouTubeEntry.MediaSource = new MediaFileSource(@"C:\MyTestVideo.mov", "video/quicktime");

Video createdVideo = request.Upload(newVideo); 
```

# python - 使用正则表达式查找字符串的一部分

> ID：14178063
> 
> 赞同：0
> 
> 时间：2013-01-06T00:38:28.533
> 
> 标签：python, regex, python-3.x

我是 Python 的新手，并不真正了解正则表达式。我有一些字符串，例如：

```
a = "Tom Hanks XYZ doesn't really matter"
b = "Julia Roberts XYZ don't worry be happy"
c = "Morgan Freeman XYZ all the best" 
```

在每个字符串的中间有单词 XYZ 和一些文本。我需要正则表达式来找到并匹配这部分，更准确地说：从 XYZ 到字符串的结尾。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T04:35:23.270

除非通过正则表达式有特定要求，否则非正则表达式解决方案在这里可以正常工作。有两种可能的方法可以解决这个问题

1.给定

```
a = "Tom Hanks XYZ doesn't really matter" 
```

用分隔符对字符串进行分区，前面有一个空格

```
''.join(a.partition(" XYZ")[1:])[1:] 
```

请注意，如果分隔符字符串不存在，这将返回一个空字符串。

2.

```
a[a.index(" XYZ") + 1:] 
```

`ValueError: substring not found`如果找不到字符串，这将引发异常

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T00:39:45.107

使用以下表达式

```
(XYZ.*) 
```

它的作用是在看到字母“XYZ”并匹配零次或多次以外的任何内容时开始捕获。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T00:39:47.970

```
m = re.search("(XYZ.*)", a) 
```

如果要显示字符串的那一部分：

```
print m.groups()[0] 
```

# emacs - Mx shell 中 vt100 / ansi-color 转义的非临时方式

> ID：14178064
> 
> 赞同：3
> 
> 时间：2013-01-06T00:38:42.567
> 
> 标签：emacs, terminal, ansi-colors

我`M-x shell`运行一个程序，试图产生漂亮的颜色输出。但我得到：

```
？- 真的。
^[[1m真的。^[[0米

```

这显然不是 EMACS 的错误，因为它将环境变量 TERM 设置为哑。只是我调用的程序忽略了这些信息。

我知道`ansi-color-for-comint-mode-on`哪个以临时方式解决了这个问题：环境变量 TERM 仍然是愚蠢的。也就是说，相应地解释这个变量的程序根本不会使用转义。

是否有一种不那么特别的方法，设置 TERM 或类似的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T16:09:29.893

如果 Mx ansi-color-for-comint-mode-on 做到了，定制 ansi-color-for-comint-mode 应该是你所需要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T18:08:41.483

您可以使用`M-x ansi-term`而不是其他 shell（`M-x shell`和`M-x term`）`M-x eshell`。Ansi-term 旨在使用现成的 ansi 颜色。甚至更好的是，我建议您使用[multi-term](http://www.emacswiki.org/MultiTerm)（您可以[在此处](http://emacs-fu.blogspot.com/2010/06/console-apps-in-emacs-with-multi-term.html)和[此处](http://paralambda.org/2012/07/02/using-gnu-emacs-as-a-terminal-emulator/)阅读更多信息），它基本上支持 ansi-term 的所有功能以及在终端之间轻松切换并定义哪些键盘快捷键发送到终端以及 Emacs 捕获和解释的终端。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T14:09:31.507

也许，根据下面的例子：

```
(setenv "DISPLAY" ":0")

(setenv "PATH" (concat "/home/an_user/bin:"
                (getenv "PATH"))) 
```

你可以试试：

```
(setenv "TERM" ....) 
```

或者这不是你的想法？

# seconds - 现在.getMilliseconds();

> ID：14178066
> 
> 赞同：-2
> 
> 时间：2013-01-06T00:38:43.327
> 
> 标签：seconds

这是一组代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"> 

<html xmlns="www.w3.org/1999/xhtml" xml:lang="en">

<title>Lots of Time</title>
<body>
<h1>Times</h1>
<script "type/javascript">
now = new Date();
localtime = now.toString();
utctime = now.toGMTString();
hours = now.getHours();
mins = now.getMinutes();
secs = now.getSeconds();
milli = now.getMilliseconds();
document.write("<h2>Local time:</h2> " + localtime + "<br/>");
document.write("<h2>UTC time</h2> " + utctime);
document.write("<h1>");
document.write(hours + ":" + mins + ":" + secs + ":" milli);
document.write("</h1>");
document.write("<h1>");
document.write(hours + ":" + mins + ":" + secs + ":" milli);
document.write("</h1>");
</script>

</body>
</html> 
```

一切正常，直到我添加了 getMilliseconds();

任何帮助将非常感激。真诚的，艾琳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T00:42:17.737

添加一个加号，使其看起来像：

```
document.write(hours + ":" + mins + ":" + secs + ":" + milli); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T00:42:35.190

改变

```
document.write（小时+“：”+分钟+“：”+秒+“：”毫）；

```

至

```
document.write（小时+“：”+分钟+“：”+秒+“：”+毫秒）；

```

# node.js - node.js 中的 SHA256-CRYPT / SHA512-CRYPT

> ID：14178068
> 
> 赞同：1
> 
> 时间：2013-01-06T00:38:55.537
> 
> 标签：node.js, sha256, crypt, sha512

我使用 dovecot 作为我的邮件传输代理，我的目标是使用我的系统支持的[最强密码方案：](http://wiki2.dovecot.org/Authentication/PasswordSchemes) **SHA512-CRYPT**或**SHA256-CRYPT**（BLF-CRYPT 不起作用）。

对于我自己编写的 web 界面，我在 node.js 中寻找一个函数或库来散列密码（使用 SHA***-CRYPT）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-05T20:12:50.560

您可以考虑检查：[https](https://github.com/mvo5/sha512crypt-node) ://github.com/mvo5/sha512crypt-node ，其中包含 JS 中 sha512crypt 的实现。它非常新，但通过了 glibc 参考实现中的测试向量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-06T06:43:52.650

查看[我的 shacrypt 分支](https://github.com/vlasky/shacrypt)——一个支持 SHA-256 crypt 和 SHA-512 crypt 密码散列的 Node.js 插件。

我将其扩展到：

*   支持异步操作，计算在 Node.js 的 libuv 线程池中进行，不会阻塞事件循环。

*   允许在 Windows 下构建模块

您需要在系统上安装 C++ 构建工具才能成功安装该软件包。如果您在 Windows 下运行，您可以下载[Microsoft 的 Build Tools for Visual Studio 2017](https://www.visualstudio.com/downloads/#build-tools-for-visual-studio-2017)。

链接： [https ://github.com/vlasky/shacrypt](https://github.com/vlasky/shacrypt)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-06T00:41:13.490

你看过这个页面吗： [cryto.createHash sha512 with hexDigest input type](https://stackoverflow.com/questions/7956695/cryto-createhash-sha512-with-hexdigest-input-type)

您可以使用 crypto.createHash 函数，但为什么要使用 SHA512？你确定你的网站需要它吗？

# python - wxPython：如何使用 wx.sizer 类之一指定特定列的宽度？

> ID：14178070
> 
> 赞同：2
> 
> 时间：2013-01-06T00:39:34.577
> 
> 标签：python, wxpython

我正在尝试设置这样的东西：![在此处输入图像描述](../Images/70207d2c7bd245f6c53468b296022469.png)

但是，我在弄清楚它时遇到了很多麻烦。我制作了这个通用函数以将对象列表包装在 a`wx.gridsizer`中，然后将其添加到 a`wx.StaticBoxSizer`以获取所有内容的边框。然后它将`staticBox`sizer 返回到 main 以添加到主垂直 boxsizer。

```
def buildHorizontalSizer(self, objects, label=None):
    if label:
        box = wx.StaticBox(self.panel, -1, label)
        # for i in dir(box):
        #   print i
        sizer = wx.StaticBoxSizer(box, wx.HORIZONTAL)
    else:
        sizer = wx.BoxSizer(wx.HORIZONTAL)

    grid = wx.GridBagSizer(hgap=3, vgap=0)
    for i in range(len(objects)):
        if i==0:
            grid.Add(objects[i], flag=wx.ALIGN_RIGHT)
        else:
            grid.Add(objects[i], flag=wx.ALIGN_LEFT)
    sizer.Add(grid)
    return sizer 
```

在每个字段中，从左到右，有一个 StaticText、TextCtrl，然后是一个 Button。

如何配置单元格以使它们具有不同的宽度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T01:18:11.630

采用

```
objects[i].SetMinSize((width,height)) 
```

应该做你想做的......你可能还需要打电话

```
objects[i].SetSize((width,height)) 
```

在将其添加到 sizer 之前

# php - 如何在 php 中生成 64 位密钥

> ID：14178072
> 
> 赞同：-1
> 
> 时间：2013-01-06T00:39:45.980
> 
> 标签：php, facebook, unique-key

我一直在尝试使用 php 中的随机数生成器来为我正在构建的网站上的照片结构生成密钥。我最近才知道 Facebook 和 Instagram 都适合 64 位的照片 ID。

Facebook 工程笔记 -：**http** ://www.facebook.com/note.php?note_id= 76191543919 Instagram 工程笔记 -：http: **//instagram-engineering.tumblr.com/post/10853187575/sharding-ids-at-instagram**

只是想知道这些人是如何做到这一点的，并适应各个方面，如用户 ID、不同位的时间戳，总共得出 64 位。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T02:24:10.443

试试看这个：

[64位密钥](https://stackoverflow.com/q/7243552/1880925)

现在只需用当前时间戳替换随机计数器。

# javascript - 根据单选按钮动态更新选择

> ID：14178075
> 
> 赞同：0
> 
> 时间：2013-01-06T00:39:56.680
> 
> 标签：javascript, jquery, html, forms, radio-button

我试图根据选中的单选按钮来动态更新我的选择列表。

我有 3 个文件：

男权重.html：

```
<option value="blank"></option> 
<option value="Pluma -64.0 kg">Pluma -64.0 kg</option>
<option value="Pena -70.0 kg">Pena -70.0 kg</option>
<option value="Leve - 76.0 kg">Leve - 76.0 kg</option>
<option value="Médio -82.3 kg">Médio -82.3 kg</option>
<option value="Meio-Pesado -88.3 kg">Meio-Pesado -88.3 kg</option>      
<option value="Pesado -94.3 kg">Pesado -94.3 kg</option>        
<option value="Super Pesado -100.5 kg">Super Pesado -100.5 kg</option>      
<option value="Pesadíssimo +100.5 kg">Pesadíssimo +100.5 kg</option> 
```

女性重量.html：

```
<option value="blank"></option> 
<option value="Rooster -48.5 kg">Rooster -48.5 kg</option>
<option value="Super Feather -53.5 kg">Super Feather -53.5 kg</option>
<option value="Feather -58.5 kg">Feather -58.5 kg</option>
<option value="Light - 64.0 kg">Light - 64.0 kg</option>
<option value="Middle -69.0 kg">Middle -69.0 kg</option>
<option value="Medium Heavy -74.0 kg">Medium Heavy -74.0 kg</option>        
<option value="Heavy -79.3 kg">Heavy -79.3 kg</option>      
<option value="Super Heavy -84.3 kg">Super Heavy -84.3 kg</option>      
<option value="S. Super Heavy +84.3 kg">S. Super Heavy +84.3 kg</option> 
```

新用户.php：

```
 <tr>
    <td><b>K&oslash;n:</b></td>

    <td><input type="radio" name="Mand" value="Mand" id="male" onclick="update()">Mand
    <input type="radio" name="Kvinde" value="Kvinde" id="female" onclick="update()">Kvinde</td>
    </tr>

    <tr>
    <td><b>V&aelig;gt:</b></td>
    <td><select id="weight" name="vægt" id="selectv">               
    <script language="text/javascript" src="http://code.jquery.com/jquery-latest.pack.js">

        function update() {

            if (document.getElementById('male').checked) {
                $("#weight").load("maleweight.html");
            }

            else if (document.getElementById('female').checked) {
                $("#weight").load("femaleweight.html");
            }
        }

    </script>
    </select></td>
    </tr> 
```

我有两个问题：

1.  单选按钮似乎坏了，我可以同时选择两个，我不能“取消选中”它们。- 也许是因为脚本无法正常工作？
2.  当我单击任一单选按钮时，选择列表不会更新。

我试过了：

*   包括（只是命名文件前：maleweight.php）。
*   Javascript（无法使其工作）。
*   .get 而不是加载。
*   试过 .checked == true
*   尝试了 SO 上列出的不同解决方案（不完全相同）。

它们都不适合我。我错过了什么？

提前致谢！

最好的问候，卡斯帕

编辑：

一切都在下降的页面：http: [//www.casperwmn.dk/tiljonas/nyprofil.php](http://www.casperwmn.dk/tiljonas/nyprofil.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T00:48:06.993

我发现您的代码存在一些明显的问题。

1.  如果您想确保只能选择其中一个，您应该为两个单选按钮使用相同的名称。
2.  您不应该将 JavaScript 放在您的选择元素中。一旦第一个`.load()`方法完成，它将删除整个 JavaScript，因为它替换了您的选择元素的内容。我也相当确定这样做是无效的 HTML（一个`<select>`元素只能将`<option>`元素作为子元素）。
3.  您不能同时加载外部 JavaScript 文件并使用相同的`<script>`标签编写自己的 JavaScript，您必须有两个单独`<script>`的标签 - 一个用于加载 jQuery 源代码，一个用于编写您自己的 JavaScript。
4.  您的`<select>`元素有两个 ID 属性，这不是有效的 HTML。删除其中一个，并使用您保留的一个作为 JavaScript 中的选择器。
5.  `<script language="text/javascript" src="http://code.jquery.com/jquery-latest.pack.js">` 不是加载 JavaScript 的正确方法。而不是`language="text/javascript"`应该是`type="text/javascript"`，但您也可以一起摆脱该属性，因为 JavaScript 是该`<script>`元素的默认语言。

既然您使用 jQuery 来加载内容，为什么不将它用于完整的解决方案呢？如果您将单选按钮的名称更改为`gender`，并将值更改为男/女，并删除内联 onlick 属性。然后你可以用一小块 jQuery 来完成这一切。

```
$(function() {
   $("input[name='gender']").on("click", function() {
        var gender = $(this).val();
        $("#weight").load(gender + "weight.html");
   });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T00:49:06.537

> 单选按钮似乎坏了，我可以同时选择两个，我不能“取消选中”它们。- 也许是因为脚本无法正常工作？

您必须为它们分配相同的`name`属性。这会将它们放在同一组中，因此不能同时选择它们。

> 当我单击任一单选按钮时，选择列表不会更新。

将脚本块移动到`<head>`.

此外，您不能将 js 放在具有属性的`<script>`标签内。`src`您必须使用新`<script>`标签。

而且，你`<select>`有 2`id`秒。虽然不碍事，但不建议这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T00:45:22.607

将 jquery 包含和您的脚本分开，并将您的脚本移动到 head 标记中：

```
<script language="text/javascript" src="http://code.jquery.com/jquery-latest.pack.js">     </script>
<script>
    function update() {

        if (document.getElementById('male').checked) {
            $("#weight").load("maleweight.html");
        }

        else if (document.getElementById('female').checked) {
            $("#weight").load("femaleweight.html");
        }
    }

</script> 
```

标签的名称属性应该相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T00:47:32.497

根据 w3schools：

> 当用户单击一个单选按钮时，它会变为选中状态，而所有其他同名的单选按钮将变为未选中状态。

您应该更改单选按钮名称属性，使它们具有相同的名称。

# regex - 如何编写这样的正则表达式

> ID：14178089
> 
> 赞同：0
> 
> 时间：2013-01-06T00:41:53.587
> 
> 标签：regex, pseudocode

以下数据需要正则表达式：

```
#file "scripts\generate.c";;
void Generate()

adsasd
asdasdas
asdasd
#file "a.c";;
void asdad()
asdasd
asdasd 
```

它将像这样返回文件和代码：

```
Array(
    [0] => scripts\generate.c
    [1] => 
            void Generate()

            adsasd
            asdasdas
            asdasd
) 
```

...和同样的`#file "a.c";;`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T00:53:42.223

您的第一次尝试几乎是正确的。只需更改`((?!#file .*).)*`并`((?:(?!#file).)*)`添加修饰符`g`即可获取所有事件。

它应该看起来比这样：`/#file "([^"]*)";;((?:(?!#file).)*)/gims`

在这里测试：[http ://www.regex101.com/r/cC5tK5](http://www.regex101.com/r/cC5tK5)

# c# - Windows 8 XAML 对象和快照视图

> ID：14178093
> 
> 赞同：3
> 
> 时间：2013-01-06T00:42:28.877
> 
> 标签：c#, xaml, windows-8, microsoft-metro, winrt-xaml

所以我制作了一个应用程序并设置了布局，使其在纵向模式下看起来不错。对于快照视图，我创建了一个 ListView，其中包含相同对象的不同实例。此 ListView 最初是折叠的，然后当它更改为 snapped 时，listview 变得可见并且纵向模式对象变得折叠。

这很好用，但是由于它们是两组不同的对象，因此会破坏用户体验。如果他们以纵向模式在框中输入文本，然后切换到快照视图，他们的所有文本都会消失（因为他们将其放在现在折叠的文本框中）。

问题是是否可以仅更改元素的位置/大小，以便它们是位于不同位置的相同对象，具体取决于我们是否处于捕捉模式？

希望这很清楚。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-06T03:08:13.293

是的，事实上，该功能是类的内置功能`LayoutAwarePage`，这是您在项目中添加基本页面（相对于空白页面）时获得的[页面类型。](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.page.aspx)如果您从 Grid 或 Split App 模板开始，所提供的页面同样会扩展`LayoutAwarePage`.

这些页面有一些样板 XAML，它们利用[VisualStateManager](http://msdn.microsoft.com/en-us/library/system.windows.visualstatemanager%28v=VS.95%29.aspx)并为各种应用程序布局定义状态。您可以做的是为全横向模式设计布局，然后使用“[设备”窗口](http://msdn.microsoft.com/en-us/library/windows/apps/jj215600.aspx#Step_3__Adapt_the_page_layout_to_different_orientations_and_views)记录对对齐、填充和纵向的布局（位置、颜色等）的更改。

例如，这是一个简单的横向模式 UI：

![在此处输入图像描述](../Images/fc2df65234a433907e8886c5a00a4dd3.png)

然后通过将*Visual 状态*切换为**Snapped**并打开*Enable State Recording*，我对布局进行了更改：

![在此处输入图像描述](../Images/cf87aa5ca97bd2622c4d226f041039eb.png)

在运行时，应用程序在这两种状态下都如下所示。不需要任何代码——这一切都是通过`LayoutAwarePage`随着应用程序方向的变化在 VisualStates 之间切换来处理的。

![在此处输入图像描述](../Images/24da8cce8769f55d9ad700be6cdc7e09.png)

![在此处输入图像描述](../Images/6b2ae6af94f26eb0a7b4c1281377b8ee.png)

# html - 顶部菜单栏在我的 Wordpress 网站中不起作用

> ID：14178094
> 
> 赞同：0
> 
> 时间：2013-01-06T00:42:32.633
> 
> 标签：html, wordpress, header

我的站点中有两个 meny=u 栏。第一个顶部菜单第二个主菜单。顶部菜单栏在我的站点中不起作用。我从菜单输入但不起作用。我使用hostme主题。我的网站[http://www.dewdropzone.asia](http://www.dewdropzone.asia)。我的顶部菜单栏标题代码。请参阅此主题演示以了解哪些顶部菜单栏未显示我的网站。[点击这里](http://themeforest.net/item/hostme-premium-hosting-business-wordpress-theme/full_screen_preview/164563)

```
<?php if(get_option("topblackmenu") == "true") { ?>
    <div class="topmenu">
        <div class="inner">
        <!-- .top_menu -->
        <?php if (has_nav_menu( 'top-menu' ) ) { wp_menu_functon(); }?>
        </div>
    </div>
    <!-- .top_menu -->
<?php } ?>

    <div class="clear"></div>
    <div id="header">   
    <div class="inner">

            <!-- logo -->
            <div class="logo">
            <?php if($s_logo){ ?>
            <a href="<?php echo get_option('home'); ?>" title="<?php bloginfo('name'); ?>">
            <img src="<?php echo $s_logo; ?>" alt="<?php bloginfo('name'); ?>" />
            </a>
            <?php } else { ?>
            <a href="<?php echo get_option('home'); ?>" title="<?php bloginfo('name'); ?>">
            <img src="<?php bloginfo('template_url'); ?>/images/logo.png" alt="<?php bloginfo('name'); ?>" />   
            </a>
            <?php } ?>
            </div>
            <!-- logo -->

            <div class="sec-menu">
            <?php if (has_nav_menu( 'primary-menu' ) ) { wp_primary_menu_functon(); }
            else{
                echo('<ul class="nav"><li>'.__('Go to WP-admin Appearance Menus and assign menu location', 'hostme_front').'</li></ul>'); 
            } ?>
            </div>
            <!-- topmenu -->

            </div>
</div><!-- topbar -->
<div class="clear"></div> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-06T01:14:17.283

很抱歉添加答案，但我看不到在问题中发表评论的选项。我错过了什么吗？

您是否通过仪表板中的外观>菜单创建导航？确保选择您创建的菜单作为“标题菜单”。

# javascript - 显示一周中的特定日期 UI 日期选择器

> ID：14178099
> 
> 赞同：3
> 
> 时间：2013-01-06T00:43:28.447
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-datepicker

我想在 jQuery UI 日期选择器上禁用某些日子，例如每个星期一或每个星期二或每个星期一、星期四、星期五等。

我尝试了很多没有结果的代码。任何人都可以帮助我！

我当前的代码如下：

```
<script type="text/javascript">
$(function() {

    var $hiddenInput = $('#travelDate');
    $('#datepicker').datepicker({dateFormat: 'yy-mm-dd'});

    $("#datepicker").datepicker("option", "minDate", 2);

    $('#datepicker').datepicker({
        inline: true
    });

    // this code not working for my example
    $("#datepicker").datepicker({
        beforeShowDay: function(date) {
            var day = date.getDay();
            return [(day != 1 && day != 2), ''];
        }
    });

    $(document).on("change", "#datepicker", function () {
        $hiddenInput.val($(this).val());
    })

});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T01:13:22.910

您不止一次初始化日期选择器。这导致了问题。将您的选项合并到一个选项对象中，一切正常：

```
$("#datepicker").datepicker({
    inline: true,
    minDate: 2,
    dateFormat: 'yy-mm-dd',
    beforeShowDay: function (date) {
      var day = date.getDay();
      return [(day != 1 && day != 2), ''];
    }
}); 
```

**示例：http:** [//jsfiddle.net/WP29E/54/](http://jsfiddle.net/WP29E/54/)

# python - 取 Python 函数并生成所有导数

> ID：14178101
> 
> 赞同：3
> 
> 时间：2013-01-06T00:43:48.147
> 
> 标签：python, lambda, python-2.7, scipy, sympy

我有一个带有可变数量参数的python函数：

```
F(x1, x2, ... , xN) 
```

我想针对每个参数自动生成表示 F 的导数的 N 个函数。

```
F'_1 = dF/dx1
F'_2 = dF/dx2
...
F'_N = dF/dxN 
```

例如，我可以同时给出 F(x1) = sin(x1) 和 F(x1, x2) = sin(x1) * cos(x2) 并自动获得所有导数。

* * *

Edit2：如果函数 F 是 2 个变量（固定数量的参数），我可以使用

```
 def f(x,y):
      return  sin(x)*cos(y)

   from sympy import *
   x, y = symbols('x y')
   f_1 = lambdify((x,y), f(x,y).diff(x)) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T01:19:54.740

诀窍是用来`inspect.getargspec`获取函数的所有参数的名称。之后，这是一个简单的列表推导：

```
import inspect
from sympy import *

def get_derivatives(func):
    arg_symbols = symbols(inspect.getargspec(func).args)
    sym_func = func(*arg_symbols)

    return [lambdify(arg_symbols, sym_func.diff(a)) for a in arg_symbols] 
```

例如：

```
def f(x, y):
    return sin(x)*cos(y)

all_derivatives = get_derivatives(f) 
```

# php - 将用户存储为对象是否有意义？

> ID：14178104
> 
> 赞同：0
> 
> 时间：2013-01-06T00:44:07.253
> 
> 标签：php, mysql, oop, login

这个问题可能听起来很奇怪，但我的一个项目有一个简单的基于会话的小型登录系统（PHP+MySQL），我想知道将用户存储在对象中是否有意义。我可以想象这样的情况，这样做可能有用，但是......我真的不知道。如果是微博系统，这有什么不同吗？

我认为可以`User`定义一个类，从 MySQL 表中加载属性，并且它可以具有类似`getUserName()`or`logOut()`或的方法/函数`addPost()`。

我问自己这个问题的首要原因是，我对如何将对象传递给会话一无所知，而且所有这些面向对象的东西对我来说也有点新鲜。我不完全确定什么时候考虑 OOP 什么时候不考虑。

如果你能给我一些关于这个话题的建议，或者任何有用的东西，那将是非常有帮助的。谢谢！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T02:00:40.047

由于 PHP 5.3/5.4 中的对象没有显着的开销，我建议您以面向对象的风格为所有内容编写代码，除了在键盘中的简单实验。

至于身份验证系统，我将其分为两部分：

*   [域对象](http://c2.com/cgi/wiki?DomainObject)，包含所有用户验证逻辑
*   [数据映射器](http://martinfowler.com/eaaCatalog/dataMapper.html)，可以将`User`实例保存到数据库

这是一个简单的 API 示例，您可以尝试将其用作代码的基础：

```
$user = new User;
$mapper = new UserMapper( $pdo );

$user->setName( $_POST['username'] );
$mapper->fetch( $user ); 

if ( $user->isAvailable() && $user->matchPassword( $_POST['password'] ))
{
    $user->setLastLogin( time() );
    // here you put interaction with session
}
else
{
    $user->addFailedAttempt();
    if ( $user->getAttempts() >= 5 )
    {
        $user->setStatus( User::STATUS_LOCKED );
    }
}

$mapper->store( $user ); 
```

您必须了解 OOP 的目标是代码的可维护性和可读性。我假设您可以在没有看到每个方法的确切实现的情况下弄清楚该代码中发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T00:51:00.280

使用类将使您的代码更具可读性并且更容易更改/修改/升级。它还将减少代码大小。但是您也可以在没有类或 OOP 的情况下在 php 文件中定义 dos 函数，只需函数并在每次需要时包含它们。如果您使用类，则在函数之间传递整个 Web 应用程序中的数据会更容易，整个用户对象将作为一个对象。类对性能完全没有影响。这就是我现在要说的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T00:51:38.200

首先回答您的问题：我只会存储在数据库中查找用户所需的那些信息。如果您可以通过数据库加载它，您还可以在每个请求中实例化一个新的用户对象，我认为这更好，因为数据可能会更改，如果用户数据更改，您必须更新数据库和会话。因此，从数据库加载您的用户并在每个请求上创建一个实例。

第二：看一下某种 orm（对象-关系-映射系统），如学说 2 或类似的。这些系统完全按照您对用户对象的要求进行操作。

# ios6 - 另一个 NSDateFormatter 问题

> ID：14178110
> 
> 赞同：0
> 
> 时间：2013-01-06T00:45:59.133
> 
> 标签：ios6, nsdate, nsdateformatter

浏览了文档后，似乎以下情况应该有效，但结果始终为零。（这适用于 iOS sdk 6）

```
NSString *releaseDate = @"2012-10-22T00:00:00-07:00";
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
NSDate *date = nil;

[dateFormatter setDateFormat:@"yyyy-MM-ddTHH:mm:ss-ZZZZZ"];
date = [dateFormatter dateFromString:releaseDate];

NSLog(@"Result date: %@", date); // Logs "(null)" 
```

有什么见解吗？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T01:36:36.520

Ok. A bit of re-reading of the docs revealed my misunderstandings:

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
NSString *releaseDate = @"2012-10-22T00:00:00-07:00";
NSDate *date = nil;

[dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ssZZZZZ"];
date = [dateFormatter dateFromString:releaseDate];

NSLog(@"Result date: %@", date);
NSLog(@"Result string: %@", [dateFormatter stringFromDate:date]); 
```

The "T" had to be enclosed in apostrophes and the "ZZZZZ" for time zone already accounts for the "-" so it had to be removed.

Now it works as expected.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T01:06:38.777

你试试这个怎么样。如果您的日期字符串像我猜测的那样未本地化，即使 Apple 也建议您可以使用以下内容：

```
struct tm tmDate;
const char *formatString = "%Y-%m-%dT%H:%M:%S%z";

strptime_l(releaseDate, formatString, & tmDate, NULL);
date = [NSDate dateWithTimeIntervalSince1970: mktime(& tmDate)];

NSLog(@"Result date: %@", date); 
```

不过，您的发布日期必须是 C 字符串，如，`const char *releaseDate = "2012-10-22T00:00:00-07:00";`您也可以从`UTF8String`.`NSString`

# c++ - C++ 奇怪的变量问题

> ID：14178111
> 
> 赞同：1
> 
> 时间：2013-01-06T00:46:21.517
> 
> 标签：c++, int

我正在使用以下代码来计算和显示 C++ 数学游戏的最终分数。

```
int score = (correctNumber / 3) * 100;
cout << score; 
```

变量“correctNumber”始终是介于 0 和 3 之间的值。但是，除非“correctNumber”=3，否则变量“score”始终等于“0”。当“correctNumber”等于 3 时，“score”等于 100。

说“correctNumber”等于 2。那么“score”不应该是 67 吗？这是 int 变量类型无法计算小数点的问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-06T00:48:05.103

您正在以整数形式进行数学运算，因此 1 / 3 为 0。

尝试：

```
int score = (100 * correctNumber) / 3 
```

如果你想四舍五入：

```
int score = (100 * correctNumber + 1) / 3 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-06T00:54:41.083

根据您的描述，我假设`correctNumber`是。`int`发生的是**整数截断**。当您将 an`int`除以 an`int`时，结果总是向下舍入：

```
1/3 = 0.3333 = 0 as an integer
2/3 = 0.6667 = 0 as an integer
3/3 = 1.0000 = 1 as an integer 
```

解决此问题的简单方法是先将其相乘：

```
int score = correctNumber * 100 / 3; 
```

但是，这仍然为 2 留下 66，而不是 67。`std::round`从 C++11 开始，一种清晰而简单的处理方法（以及许多其他舍入情况，尽管舍入样式不可配置）是：

```
int score = std::round(currentNumber * 100\. / 3); 
```

在示例中，点中的点`100.`构成`100`a `double`（与 相同`100.0`），因此运算的结果将是您想要的浮点值，而不是作为浮点值传入的预截断值。这意味着您最终会得到 66.66666...`std::round`而不是 66。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-06T00:58:23.093

你的猜测是正确的。`int`不能存储实数。

但是你可以先乘，然后除，比如

```
score = correctNumber * 100 / 3; 
```

score 将有 0、33、66、100，具体取决于`correctNumber`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-06T00:50:48.150

问题是它`(correctNumber / 3)`是一个整数，所以你不能得到 0.666 或任何分数乘以 100，我相信这是你想要的。

你可以尝试强迫它是`float`这样的：

```
int score = ((float)correctNumber / 3) * 100; 
```

然而，这会给你 66 而不是 67，因为它不会四舍五入。您可以为此使用 C99 `round()`。

```
int score = round(((float)correctNumber / 3) * 100); 
```

更新：

你也可以使用`+ 0.5`to round ，像这样：

```
int score = (correctNumber / 3.0f) * 100.0f + 0.5f; 
```

# java - Java Slick2D 和 lwjgl

> ID：14178112
> 
> 赞同：0
> 
> 时间：2013-01-06T00:46:21.817
> 
> 标签：java, lwjgl, slick2d

我尝试编写启动屏幕来测试游戏。当我尝试运行此代码时，我遇到了一些错误。我正在寻找一些关于任何具体但未学过的信息，此外，有人提到我没有图形驱动程序，但我有图形驱动程序:)

包 JaAdrian.MyGame；

```
import org.newdawn.slick.AppGameContainer;
import org.newdawn.slick.BasicGame;
import org.newdawn.slick.GameContainer;
import org.newdawn.slick.Graphics;
import org.newdawn.slick.SlickException;

public class Main extends BasicGame {

    public static final String NAME = "SampleTest";

    public Main() {
        super(NAME);
    }

    public void render(GameContainer gc, Graphics g){

    }

    @Override
    public void init(GameContainer gc) throws SlickException {

    }

    @Override
    public void update(GameContainer gc, int g) throws SlickException {

    }

    public static void main(String[] args){
        try {
            AppGameContainer app = new AppGameContainer(new Main());

            app.setDisplayMode(800, 600, false); //true == fullscreen
            app.setTargetFrameRate(60);
            app.setAlwaysRender(true);
            app.setUpdateOnlyWhenVisible(false);
            app.start();

        } catch (SlickException e) {
            e.printStackTrace();
        }
    }

} 
```

当我尝试测试它时出现错误：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: no lwjgl in java.library.path
    at java.lang.ClassLoader.loadLibrary(Unknown Source)
    at java.lang.Runtime.loadLibrary0(Unknown Source)
    at java.lang.System.loadLibrary(Unknown Source)
    at org.lwjgl.Sys$1.run(Sys.java:73)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.lwjgl.Sys.doLoadLibrary(Sys.java:66)
    at org.lwjgl.Sys.loadLibrary(Sys.java:95)
    at org.lwjgl.Sys.<clinit>(Sys.java:112)
    at org.lwjgl.opengl.Display.<clinit>(Display.java:132)
    at org.newdawn.slick.AppGameContainer$1.run(AppGameContainer.java:37)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.newdawn.slick.AppGameContainer.<clinit>(AppGameContainer.java:34)
    at JaAdrian.MyGame.Main.main(Main.java:35) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T01:50:22.110

lwjgl 库不在 java.library.path 中。lwjgl 通过 JNI 将 java 桥接到 openGL 库，因此您需要让 JVM 可以找到库（.so 或 .dll 取决于环境）以便加载它。

[http://www.lwjgl.org/wiki/index.php?title=Downloading_and_Setting_Up_LWJGL](http://www.lwjgl.org/wiki/index.php?title=Downloading_and_Setting_Up_LWJGL)

“这是因为本机部分设置不正确。将 -Djava.library.path=path/to/dir 添加到命令行或作为 IDE 中的 VM 选项，以便 lwjgl 能够找到包含本机文件的文件夹。”

# sql - 字符串的 ASP.NET 查询参数部分

> ID：14178113
> 
> 赞同：0
> 
> 时间：2013-01-06T00:46:34.297
> 
> 标签：sql, visual-studio-2010, parameters

我是 Visual Studio 和 ASP.NET 的新手。

我在 VS 查询生成器中有以下代码： `SELECT [Column1], [Column2], Column3 FROM [Table] WHERE (Column3 = ?)`

问题是这仅显示整个字段满足 WHERE 子句的结果。我还需要参数只是字段一部分的结果。在 Access 中对给定值进行了类似的操作：`*value*`. 请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T01:03:32.907

由于您已经提到了*参数*这个词，因此最好使用它[`Sql-Parameters`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx)来避免[**sql-injection**](http://msdn.microsoft.com/en-us/library/ms161953%28v=sql.105%29.aspx)和转换问题。

```
string sql = @"
             SELECT 
                [Column1], [Column2], Column3 
             FROM 
                [Table] 
             WHERE 
                (Column3 LIKE @searchPattern)";
using(var con = new SqlConnection(connectionString))
using(var cmd = new SqlCommand(sql, con))
{
    cmd.Parameters.AddWithValue("@searchPattern", string.Format("%{0}%", str));
    con.Open();
    using(var reader = cmd.ExecuteReader())
    {
        while(reader.Read())
        {
            string col1 = reader.GetString(0); // for example etc....
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T00:54:17.247

尝试：

```
WHERE (Column3 like '%' + ? + '%') 
```

# javascript - 在Javascript中将ID添加到按钮

> ID：14178128
> 
> 赞同：1
> 
> 时间：2013-01-06T00:48:18.713
> 
> 标签：javascript, jquery, python, html, spynner

我目前正在尝试找到一种使用 javascript 注入将 ID 添加到 html 按钮的方法。html 很简单，如下所示：

```
<button type="submit" class="submit btn primary-btn" tabindex="4">Sign in</button> 
```

现在，如您所见，它没有 ID 或名称，因此在 Python 中使用 spynner 有点难以找到。我可以注入什么 javascript 来为这个脚本添加一个 ID？是否会让 javascript 搜索整个字符串，然后用添加的 ID 替换整个字符串？或者有更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T02:25:20.293

为了确保 html 的完整性，我建议：

```
$('.submit.btn.primary-btn').eq(0).attr('id', 'foobar'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T00:52:21.773

```
$(".submit.btn.primary-btn").attr("id", "foobar"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T02:25:51.300

如果您真的想确保只影响该元素，请执行以下操作：

```
$('button[tabindex="4"]').attr('id', 'value'); 
```

顺便说一句，在运行时添加 ID 没有多大意义：如果可以引用元素，则不再需要该属性。

# java - 比较游戏中的 Java 数组

> ID：14178132
> 
> 赞同：0
> 
> 时间：2013-01-06T00:49:53.073
> 
> 标签：java, arrays

我想知道是否有人可以帮助我，我有一个游戏，计算机生成一个随机的 4 位代码，每个数字的范围是 0-5。然后用户猜测这段代码，计算机返回一个数组，我打印出一个字符串。数组应该包含一个 6 代表猜测中的每个数字，即正确位置的正确数字，一个 7 代表猜测中的每个正确数字但位置错误的数字，最后一个 5 代表任何完全不正确的数字.

例如，如果代码是：0143
而用户的猜测是：0451
，那么数组应该是：6775

这是因为 0 完全正确，1 和 4 在代码中，但被猜错了，而 5 完全不正确。此外，每个数字都在数组的单独部分中。

这是我到目前为止所拥有的：

```
for (int i = 0; i < 4; i++) { 
    if (combo[i] == guess[i]) { 
        Pegs[peg] = 6; 
        peg++; 
    } 
} 

for (int i = 0; i < 4; i++) { 
    for (int x = 0; x < 4; x++) { 
        if (guess[i] == combo[x] && guess[i] != combo[i]) { 
            Pegs[peg] = 7; 
            peg++; 
        } 
    } 
} 

for (int i = 0; i < 4; i++) { 
    if (Pegs[i] == 0) { 
        Pegs[i] = 5; 
    } 
} 
```

数组guess 存储用户的猜测，数组combo 是正确的代码，Pegs[] 是存储比较数组的位置，int peg 只是说明在数组中存储值的位置。这样做的问题是它并不总是将数组正确地返回到它要做的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T00:57:18.417

要比较数组，您只需要第一个循环，并且仅当同一位置的数字不相等时才应执行内部循环：

```
for(int i = 0; i < 4; i++) {
    Pegs[i]=5;
    if(combo[i] == guess[i]) {
        Pegs[i] = 6;
        guess[i]= -1;
    }
}

for(int i = 0; i < 4; i++) {
    for (int j = 0; j < 4; j++) {
        if(combo[i] == guess[j]) {
            Pegs[i]=7;
            guess[j]= -1;
            break;
        }
    }
}
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T01:30:55.577

使用其他方法，如果您遇到以下情况，您将遇到麻烦

```
int[] combot = new int[] {0, 1, 1, 3};
int[] guess  = new int[] {0, 4, 5, 1}; 
```

因为你会得到一个不正确的`[6, 7, 7, 5]`而不是正确的，`[6, 7, 5, 5]`因为你会`1`用双倍计算你最后的猜测。

通过使用~~两个标志数组，一个用于完全匹配，一个用于错误猜测~~单个标志数组，您可以获得更好和准确的结果：

**已**编辑**** 我将其还原，因为我发现对于`combo = [0, 1, 1, 3]`and `guess = [3, 0, 1, 5]`，它给出了不正确的响应。

```
public int[] computeGuess(int[] combo, int[] guess) {
    int[] result = new int[4];

    Arrays.fill(result, 5);  // incorrect values for all!

    boolean[] exactMatches = new boolean[4];  // all initially set to false
    boolean[] misplaced    = new boolean[4];

    for (int i = 0; i < 4; i++) {
        if (combo[i] == guess[i]) {
            exactMatches[i] = true;
            misplaced[i] = false;  // make sure we don't use this as misplaced
        } else {
            for (int j = 0; j < 4; j++) {
                if (i != j && combo[i] == guess[j] && !exactMatches[j] && !misplaced[j]) {
                    misplaced[j] = true;
                    break;
                }
            }   
        }
    }

    int i = 0;
    for (boolean b : exactMatches) {
        if (b) {
            result[i++] = 6;
        }
    }
    for (boolean b : misplaced) {
        if (b) {
            result[i++] = 7;
        }
    }

    return result;
} 
```

# django - 如何更改模板中的 Django 变量

> ID：14178134
> 
> 赞同：0
> 
> 时间：2013-01-06T00:49:53.743
> 
> 标签：django, templates, variables, tags

我需要从我的模板中更改 Django 变量。例如，我有一个名为的变量`{{ fof_list.3.view_count}}`，每次单击特定按钮时，我都需要增加此变量，例如：

```
{{ fof_list.3.view_count}} += 1; 
```

那可能吗？如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T00:51:53.930

模板语言不会让你这样做。您需要设置一个 ajax 请求，该请求在每次按下按钮时触发并增加视图计数。

这是您如何将所有内容连接起来的示例（完全未经测试）

HTML：

```
<a href="#" id="increase-count-link">Increment View Count</a> 
```

查询：

```
$('#increase-count-linkn').click(function() {
    $.ajax('/list/5/incrementcount/');
}); 
```

看法：

```
def incrementcount(request, list_id):
    list = List.objects.get(id=list_id)
    list.view_count += 1
    list.save()

    return http.HttpResponse('View count incremented successfully') 
```

# php - 如何使用 Mongo DB 和正则表达式为每个找到的值返回一个结果？

> ID：14178145
> 
> 赞同：0
> 
> 时间：2013-01-06T00:51:10.267
> 
> 标签：php, json, mongodb

假设我有汽车收藏。我希望能够使用正则表达式搜索并找到我收藏中的汽车所拥有的不同品牌。

我知道

```
db.collection.find( { make: { $regex: 'chev', $options: 'i' } } ); 
```

将返回所有具有最接近（相同）匹配make的文档，然后是第二个最接近（相同）匹配make，然后是第三个等等。

如何构建查询，以便一旦正则表达式查询与 make 匹配，它就不会返回任何具有相同 make 的文档？

例如，我有以下文件：

```
{_id:1,make:"chevrolet"}
{_id:2,make:"chevrolet"} 
{_id:3,make:"Chevrolet"} 
{_id:4,make:"chevy"}
{_id:5,make:"chevy"} 
```

我将如何查询集合以使其返回（大写不重要）：

```
{_id:1,make:"chevrolet"}
{_id:4,make:"chevy"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T00:56:42.123

在 2.2 的聚合框架中你可以做一个组：

```
$db->col->aggregate(array(
    array('$match' => array('make' => new MongoRegex('/chev/i'))),
    array('$group' => array('_id' => '$make'))
)); 
```

`_id`由于在分组时从集合中返回并没有多大意义，这实际上会返回：

```
{_id: 'chevy'},
{_id: 'chevrolet'} 
```

# delphi - 使用 JvTabBarXPPainter 修改 JvTabBar

> ID：14178151
> 
> 赞同：2
> 
> 时间：2013-01-06T00:52:10.240
> 
> 标签：delphi, components, jvcl

我试图修改 JvTabBar 的属性，但它不起作用。我将 JvTabBarXPPainter 分配给 JvTabBar，但它只更改了“FixedTabSize”属性。其他都不能改变。我感兴趣的是改变背景颜色和字体。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T09:28:39.470

您可以使用 TJvModernTabBarPainter 并将其分配给 JvTabBar。它允许您修改所有属性。XP-Painter 使用主题 API 进行绘制，除非您在系统范围内更改 XP 主题样式，否则您无法更改其颜色。

# macos - 使用自动布局在两个对象之间居中一个对象

> ID：14178156
> 
> 赞同：4
> 
> 时间：2013-01-06T00:52:56.873
> 
> 标签：macos, cocoa, autolayout, interface-builder

我正在使用 Interface Builder 布置一个计算器，但我遇到了一些按钮布局问题。

我有 3 列数字按钮，类似于大多数计算器，我可以毫无问题地放置左列和右列，因为 Xcode 的自动布局功能将它们捕捉到距离左侧窗口边缘正确的距离和右侧的操作员按钮；但是，没有自动帮助将中间的按钮列居中在这两者之间。

我可以很好地观察它，但我真的更喜欢让一切都完美对齐。有没有办法让按钮在其他两个这样的 UI 对象之间居中？这是布局的图片：

![计算器布局](../Images/60682408136f846da7cd9a689cc5e515.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-06T01:52:16.733

您可以将所有按钮放置在自己的视图中。将视图放置在您想要按钮的位置。然后您可以将左侧按钮对齐到视图的左侧，将右侧按钮对齐到视图的右侧，最后将中间按钮居中。然后相应地调整您的视图。我做了一些非常相似的事情。希望这可以帮助。

# java - 如何总结while循环中的结果，而centain输入将结束while循环？

> ID：14178159
> 
> 赞同：0
> 
> 时间：2013-01-06T00:53:42.567
> 
> 标签：java, while-loop, sum

我在java中有一个情况；

我想请用户输入一些数字并获得这些数字的总数。但是，如果用户输入负数，它将结束循环；

目前我有一个如下的while循环；

```
 double sum = 0;
    double Input = 0;
    System.out.println("Please enter the numbers (negative to end)")
    System.out.println("Enter a number");
    Scanner kdb = new Scanner(System.in);
          Input = kdb.nextDouble();
    while (Input > 0)
    {
        System.out.println("Enter an income");
        Input = kdb.nextDouble();
        sum = Input;
    } 
```

然而，它并没有完成这项工作。如果用户输入 40、60、50 和 -1 正确的结果应该是 150；我的循环结果为 109。

请帮忙！

非常感谢！杰基

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T00:56:04.383

```
double sum = 0;
double Input = 0;
System.out.println("Please enter the numbers (negative to end)")
System.out.println("Enter a number");
Scanner kdb = new Scanner(System.in);
Input = kdb.nextDouble();
while (Input > 0)
{
    sum += Input;
    System.out.println("Enter an income");
    Input = kdb.nextDouble();
} 
```

我建议变量名不要以大写字母开头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T01:02:40.387

这应该工作！

```
 double sum = 0;
    double Input = 0;
    boolean Adding= true;
    System.out.println("Please enter the numbers (negative to end)");

    Scanner kdb = new Scanner(System.in);
    while(Adding == true)
    {
        System.out.print("Enter a number: ");
        Input = kdb.nextDouble();
        if(Input > 0)
        {
            sum+= Input;
        }
        else
            Adding = false;

    }
    System.out.println("Your sum is: " + sum); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T01:03:35.527

第一个输入值被第二个输入值覆盖，因为总和仅在循环结束时完成。

```
**double sum = 0;
double Input = 0;
System.out.println("Please enter the numbers (negative to end)");
System.out.println("Enter a number");
Scanner kdb = new Scanner(System.in);
      Input = kdb.nextDouble();
while (Input>0)
{
    sum+= Input;
    System.out.println("Enter an income");
    Input = kdb.nextDouble();

}
System.out.println(sum);
}** 
```

输出是：

```
Please enter the numbers (negative to end) 
```

输入数字 40 输入收入 50 输入收入 60 输入收入 -1 150.0

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T00:57:03.537

在执行 sum += Input 之前，您应该检查 Input > 0。

# c - 随身携带 C 编译器

> ID：14178162
> 
> 赞同：-2
> 
> 时间：2013-01-06T00:54:16.450
> 
> 标签：c, mobile

我知道有可编程的计算器，但是否有任何计算器大小（可能更大）的设备可以编译 C 代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T01:04:01.057

你没听说过[树莓派](http://www.raspberrypi.org/)吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T01:57:49.060

几乎任何具有大小适中的处理器（32 位）和 gcc 支持的操作系统的东西都可以编译 [此处列出](http://gcc.gnu.org/install/specific.html)的 C/C++ 等。棘手的部分是：

1.  您需要足够的存储空间才能拥有足够的库等以使其物有所值。（在某些情况下，RAM 也可能是一个问题，尤其是当您尝试编译大段代码时）。
2.  将代码放到设备上——如果你只是复制文件，那没什么大不了的，但如果你需要真正输入代码，你将需要一个键盘和一个屏幕。

我个人更喜欢使用设备通过互联网登录我的桌面。只要你能说服机器运行`ssh`或`putty`（它应该可以在很多事情上运行——我可以在我微弱的 Android 手机上运行——Windows 手机、iphone 和诺基亚/塞班手机的版本也可以做到）。现在，无论您身在何处，您都可以在台式机上编译代码...

# c++ - 如何分离分层数据和GUI？

> ID：14178164
> 
> 赞同：3
> 
> 时间：2013-01-06T00:54:28.430
> 
> 标签：c++

听说数据和GUI分开比较好。例如，我有一些数据。它是分层的，具有抽象基类和具体类型的派生类，例如

```
class Data {};
class ConcreteDataA : public Data {};
class ConcreteDataB : public Data {}; 
```

我也有它的分层 GUI（例如对话框）

```
class DataDialog {};
class ConcreteDataADialog : public DataDialog {};
class ConcreteDataBDilaog : public DataDialog {}; 
```

我想从数据对象创建一个数据对话框对象。如果数据对象是ConcreteDataA，则创建ConcreteDataADialog，如果是B，则创建B对话框。有一种简单的方法可以通过在类 Data 中添加一个虚函数来做到这一点，例如

```
virtual DataDialog* CreateDialog() 
```

但是如果我在数据类中添加这个函数。它似乎违反了数据/GUI分离原则。第二种方式是构建一个全局的CreateDialog函数，根据数据对象的dynamic_cast类型创建对话框。这种方式对许多 maual ifs 也不利。还有其他实现方式吗？还是在实践中，第一种方式也可以？非常感谢！

我的一位朋友告诉我使用反射。我认为这应该有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T00:58:36.217

看来您正在寻找一个[Abstract Factory](http://en.wikipedia.org/wiki/Abstract_factory_pattern)。

抽象工厂是一种设计模式，其中可以根据参数创建不同类型的对象。所以在这个例子中，工厂将根据数据的类型创建一个`ConcreteDataADialog`或一个。`ConcreteDataBDilaog`

代码草图：

```
class DialogFactory {
public:
    virtual Dialog* createDialog() = 0;
};

class ADialogFactory : public DialogFactory {
public:
    Dialog* createDialog() {
        return new ADialog();
    }
};

class BDialogFactory : public DialogFactory {
public:
    Dialog* createDialog() {
        return new BDialog();
    }
};

class Application {

    Dialog* createSpecificDialog(Data data) {
        if (data.isA()) {
            return new ADialogFactory().createDialog();
        } else {
            return new BDialogFactory().createDialog();
        }
} 
```

# math - 2 具有相同端点的线段

> ID：14178165
> 
> 赞同：1
> 
> 时间：2013-01-06T00:54:31.970
> 
> 标签：math

我有一个关于 2 条线段的问题。假设我们有 2 个线段，其原点和长度分别为：(P0, L0) 和 (P1, L1)。我需要找到它们何时可以在同一点结束。线段位于 3D 空间中的任何位置。

我能想到的一种方法是：假设这个公共端点是T，点是A和B。那么对于以A和B为原点的线段，A，B和T必须形成一个三角形。向量 AT 的长度 = L0，向量 BT 的长度 = L1。但是由于线段的方向是未知的，所以可能有很多可能性。假设我们为线段 AT 选择一个特定方向作为 (i,j,k) - 1st octant。所以现在我们可以从 T 在空间的任何地方移动，但只能移动距离 L1 才能找到 BT。

这是我不确定如何前进的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T01:28:12.553

`P0`当且仅当 和 之间的距离`P1`小于或等于 时，线段才能在同一点结束`L0 + L1`。在此距离等于`L0 + L1`线段的特殊情况下，它们在空间中具有相同的方向并位于同一条线上。

考虑这一点的一种方法是询问两个球体是否围绕`P0`并`P1`具有半径`L0`并`L1`相交或至少相互接触。交点（触摸）的圆（点）是您的线段可以具有相同端点的地方。

# asp.net - 为什么不删除 Server 和 X-Powered-By 标头？

> ID：14178168
> 
> 赞同：6
> 
> 时间：2013-01-06T00:54:51.783
> 
> 标签：asp.net, iis, web-config, http-headers, global-asax

我的 ASP.NET 4.5 应用程序正在部署到共享主机，因此我无权访问 IIS 设置。要删除`X-Powered-By`标题，我指定`web.config`：

```
<system.webServer>
  <httpProtocol>
    <customHeaders>
      <remove name="X-Powered-By" />
    </customHeaders>
  </httpProtocol>
</system.webServer> 
```

并删除`Server`标题，我指定`Global.asax`：

```
protected void Application_PreSendRequestHeaders(object sender, EventArgs e) {
  HttpContext.Current.Response.Headers.Remove("Server");
} 
```

但是，响应仍然包含两个标头：

```
Cache-Control:private
Content-Encoding:deflate
Content-Length:672
Content-Type:text/html; charset=utf-8
Date:Sun, 06 Jan 2013 00:41:20 GMT
Server:Microsoft-IIS/7.5
X-Powered-By:ARR/2.5
X-Powered-By:ASP.NET 
```

我怎样才能删除它们？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-14T12:44:22.480

我不知道为什么你`X-Powered-By`没有被删除，但是今年早些时候的一个 Windows 更新补丁使得`Application_PreSendRequestHeaders`修复不再`Server:`为我们删除标题。

[我们必须使用IIS URL Rewrite Module 2](http://www.iis.net/learn/extensions/url-rewrite-module/using-url-rewrite-module-20)向我们的`system.webServer`块（在 Web.config 中）添加一个部分：

```
<rewrite>
    <outboundRules>
        <rule name="Remove RESPONSE_Server">
            <match serverVariable="RESPONSE_Server" pattern=".+"/>
            <action type="Rewrite" value=""/>
        </rule>
    </outboundRules>
</rewrite> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-01T17:53:16.833

`X-Powered-By:ASP.NET`通常通过简单的 web.config 配置删除：

```
<configuration>
  <system.webServer>
    <httpProtocol>
      <customHeaders>
        <remove name="X-Powered-By" />
... 
```

一个`ARR`不受此配置影响，它必须通过 IIS 管理器、IIS 根目录上的编辑器配置（不在站点上）删除：转到`system.webServer/proxy`节点并设置`arrResponseHeader`为`false`. 在 之后`IISReset`，它被考虑在内。
我在[这里](https://forums.iis.net/post/2019758.aspx)找到了这个，除了这篇文章是关于旧的 IIS 6.0 配置方式的。

因此，对于您的情况，如果无法访问 IIS 设置，您将不得不要求服务器所有者调整他的配置。或者尝试使用[Url Rewrite 解决方案](https://stackoverflow.com/a/16543511/1178314)，但当然要使用`HTTP_X_Powered_By`服务器变量。它充其量只会空白标题，我还没有检查它是否适用于 ARR 案例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T01:42:33.203

如果您使用 IIS 7 将 Global.asax 中的[DisableMvcResponseHeader](http://msdn.microsoft.com/en-us/library/system.web.mvc.mvchandler.disablemvcresponseheader%28v=vs.108%29.aspx)属性设置为 true，则应删除“X-Powered-By”标头

```
protected void Application_Start()
{
    MvcHandler.DisableMvcResponseHeader = true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-07T05:31:07.977

大多数情况下，服务器 IIS 不允许我们删除服务器标签。您可以尝试以下代码来实现您的目标。添加 Global.asax

```
protected void Application_PreSendRequestHeaders()
{
    Response.Headers.Remove("X-AspNet-Version");
     HttpContext.Current.Response.Headers.Set("Server", "");
 } 
```

此代码将删除您的“X-AspNet-Version”并将服务器值设置为空白。

# javascript - 使用greasemonkey在iframe加载上执行函数

> ID：14178170
> 
> 赞同：3
> 
> 时间：2013-01-06T00:55:04.517
> 
> 标签：javascript, jquery, iframe, greasemonkey

我正在制作一个供个人使用的greasemonkey 脚本，但是当iframe 完成加载时，我需要它来执行一个函数。我尝试使用 2 个单独的脚本，其中一个在 iframe 中加载并执行该函数，但该函数未定义，因为为了安全目的，greasemonkey 中的函数位于它们自己的环境中。

无论如何从父级的greasemonkey中存在的iframe内部执行一个函数？

iframe 父级的 Greasemonkey 代码：

```
frame2 = '[name="MainFrame"]';
function appendtoiframe2(){
    $(frame2).contentWindow.$('body').append('<div id="insecuremode_enable" style="position:fixed;bottom:0;background:#fff;">This div is now visible</div>');
}); 
```

iframe 内网站的 Greasemonkey 代码：

```
window.onload = function() {
    parent.appendtoiframe2();
} 
```

谢谢你。

编辑：我意识到这样做可能很愚蠢，而不是让脚本直接在站点中运行。但我只希望在站点位于 iframe 中时执行此操作，但并不总是在 iframe 中。我还试图能够从 iframe 中控制父级内部的元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T01:06:25.233

您可以将事件处理程序绑定到`iframe`load 。*（假设域相同，否则没有脚本访问 iframe）*

从页面的主要部分：

```
$(function(){
     $('iframe[name="MainFrame"]').load(function(){
          $(this).contents().find('body').append('<div>.....</div>')
      });
}); 
```

API 参考：[http ://api.jquery.com/load-event/](http://api.jquery.com/load-event/)

# php - 使用 php 和我的家庭服务器写入文件时遇到问题

> ID：14178173
> 
> 赞同：0
> 
> 时间：2013-01-06T00:56:13.840
> 
> 标签：php, apache, webserver, debian, lamp

所以，我有这个简单的小 php 脚本。它可以正常运行和编译，并且在我编写它的机器上按照我想要的方式工作。我在运行 Debian 6.0.6、32 位的个人家庭网络服务器上运行它。它是带有 php 的 apache。而且我知道 php 正在服务器上运行。

```
 <?php
    $hitsfile = "hits.txt";                                                 #name of file
    $filehandle = fopen($hitsfile, 'r') or die ("Couldn't read file.");     #Opens file, 'hitsfile' to be read.
    $hits = fread($filehandle, 5);                                          #reads file to the introduced variable, 'hits'
    fclose($filehandle);                                                    #closes file
    $hits++;                                                                #increments the variable that it read.
    $filehandle = fopen($hitsfile, 'w') or die ("Couldn't write to file."); #opens file to be read. 
    fwrite($filehandle, $hits);                                             #writes the hits variable to file.
    fclose($filehandle);                                                    #closes file.
    echo $hits;                                                             #outputs the hits variable.
    ?> 
```

当我通过网络浏览器从服务器访问文件时，我得到“无法写入文件”。错误。那么，它会正确打开文件并读取它。当它打开它进行写入时，它会失败。我假设这是权限或其他方面的某种问题。我对如何解决这个问题有点茫然。有任何想法吗？协助将不胜感激！我已经google了几天了，我无法解决这个问题。我是一个 php 'noob'，我对运行基于 linux 的网络服务器非常陌生，但是，嘿，你必须以某种方式学习。:*l

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T01:02:32.243

试图检查文件的权限？Linux 文件系统有一个非常严格的权限系统。在终端上写：

```
ls -la /path/to/my/file.txt 
```

这将为您提供对左列的权限。请阅读[这篇文章](http://en.wikipedia.org/wiki/File_system_permissions#Traditional_Unix_permissions)以确保，并检查 Apache 是否具有文件的“写入”权限。如果没有，请使用[chmod](http://ss64.com/bash/chmod.html)命令授予 Apache 对该文件的访问权限（或[chown](http://ss64.com/bash/chown.html)命令，将此文件的所有者更改为 apache，如果此文件的所有者具有写入权限）。

# c# - MonoDevelop 模拟器

> ID：14178179
> 
> 赞同：2
> 
> 时间：2013-01-06T00:56:53.373
> 
> 标签：c#, android, ide, emulation, monodevelop

我正在为 Android 使用 MonoDevelop，并且对模拟器有疑问。

出于某种奇怪的原因，我尝试使用模拟器的一半时间，它不起作用。模拟器启动，进入登录屏幕，IDE 仍然显示模拟器处于脱机状态。

其他时候，它需要两到三遍才能正常工作。

为什么是这样？更重要的是，我怎样才能让它每次都第一次工作？

# php - 使用 php 从图像中获取第一个像素

> ID：14178182
> 
> 赞同：3
> 
> 时间：2013-01-06T00:57:05.550
> 
> 标签：php

我正在尝试获取图像的第一个像素。最好是左上角或右上角的一个像素。我看到了这个问题，它与我的问题最接近：[获取图像颜色](https://stackoverflow.com/questions/1746530/get-image-color)

但是，答案仅向您展示如何获得平均颜色。我不想获得平均颜色，我想从任何一侧获得第一个像素！有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T01:02:57.677

试试这个，它得到左上角像素 (0,0) 的颜色：

```
<?php
    $im = imagecreatefrompng("image.png");
    $rgb = imagecolorat($im, 0, 0);

    $colors = imagecolorsforindex($im, $rgb);

    var_dump($colors);
?> 
```

更多信息： http: [//php.net/manual/en/function.imagecolorat.php](http://php.net/manual/en/function.imagecolorat.php)

# sinatra - 如何将数据映射器定义放入外部文件

> ID：14178183
> 
> 赞同：0
> 
> 时间：2013-01-06T00:57:08.793
> 
> 标签：sinatra, datamapper

我正在一个经典的 Sinatra 应用程序中使用 datamapper，我的文件变得越来越大，难以管理和排除故障。我想知道是否可以将我的数据映射器模型定义放入一个文件中，将处理算法放入另一个文件中，然后将它们都放入我的主 index.rb 中。我只使用 sinatra 一个月左右，但它们必须是一种以经典方式将您的应用程序模块化为更小的可维护文件的方法。对？

这是我正在尝试做的事情的要点：

1.  加载 sinatra 应用程序 (index.rb)。
2.  该应用程序加载数据映射器定义 (defineDB.rb)。
3.  该应用程序加载 CRUD 算法 (proceesDB.rb)。

因此，如果收到 put 请求：

```
put '/protected/person/:id' do
   @p = Person.first(:id => params[:id])
   p.update(
     #update table row 
   )
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:29:45.500

这只是基本的 Ruby，所以你可以使用[`require`](http://apidock.com/ruby/Kernel/require)or [`require_relative`](http://apidock.com/ruby/Kernel/require_relative)。

文件的确切组织取决于您，但这是我的偏好：

```
|- app.rb  # This merely require_relative's all the other ruby-files, see below.
|- README.md
|- rackup.ru
|- lib/
|   |- env.rb #contains settings and environment variables and such.
|   |- 
|- models/
|   |- person.rb # Defines datamapper fields, helper and validators for Person.
|- controllers/
|   |- person_controller.rb # Defines `put '/protected/person/:id' do` and other routing.
\- views/
    |- layout.haml
    \- person_show.haml 
```

再次，这取决于你。我强烈建议不要过早地组织过度。例如，控制器可以被省略，只要它们适合 app.rb。一旦它们从那里长出来并且您希望将它们分开，然后才引入控制器文件夹。

`app.rb`将是一个不需要所有库的文件：

```
require "sinatra"
require "datamapper"

Dir.glob(File.join("{lib,models,controllers}", "*.rb")).each{|f| require File.realpath(f)} 
```

这将直接加载 lib、模型和控制器下的所有文件。但是您可能需要更多地控制文件的加载时间和方式；在这种情况下，要求它们每行一个是更好的选择。

我建议不要将 Datamapper 定义全部放在一个文件中。将它们分组为模型可能会更好：Person 获得一个文件，其中包含 Person 的所有定义和 crud 操作。这样 Person 是孤立和自包含的，而不是分布在两个文件中。

# php - php和mysql按时发送用户注销

> ID：14178184
> 
> 赞同：0
> 
> 时间：2013-01-06T00:57:09.697
> 
> 标签：php, mysql

当用户登录时，他们的在线状态设置为 1，当他们注销时将其设置回 0，我试图做到这一点，以便在网站上闲置一段时间后，他们将被发送到 logout.php，所以我设置了一个字段在我的用户表中作为 last_activity 作为时间戳。并将此代码作为包含在每个页面上。

```
<?php
if (!isset($_SESSION['last_activity'])) {
    // initiate value
    $_SESSION['last_activity'] = time();
}
if (time() - $_SESSION['last_activity'] > 500) {
    // last activity is longer then certain amount of time
    header('Location: logout.php');
} else {
    // update last activity timestamp
    $_SESSION['last_activity'] = time();
}
?> 
```

但是现在，正如我所拥有的，last_activity 字段仅在用户帐户上的某些内容被更新时才会更新，而且在用户没有注销并且我不知道为什么的一定时间之后。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T01:05:28.480

从不[活动 15 分钟后自动注销](http://www.dynamicdrive.com/forums/showthread.php?25939-Automatic-Logout-after-15-minutes-of-inactive)：

```
<?php
session_start();
$timeout = 10; // Set timeout minutes
$logout_redirect_url = "index.php"; // Set logout URL

$timeout = $timeout * 60; // Converts minutes to seconds
if (isset($_SESSION['start_time'])) {
    $elapsed_time = time() - $_SESSION['start_time'];
    if ($elapsed_time >= $timeout) {
        session_destroy();
        header("Location: $logout_redirect_url");
    }
}
$_SESSION['start_time'] = time();
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T01:16:19.293

您的代码就在文件的顶部，您必须使用 session_start() 开始会话

# javascript - 在散点图高图的工具提示中滚动鼠标时禁用缩放

> ID：14178191
> 
> 赞同：0
> 
> 时间：2013-01-06T00:58:18.017
> 
> 标签：javascript, highcharts

我的页面中有一个散点图高图，它呈现得非常好。问题是当我在工具提示区域内滚动鼠标时，图表缩放功能正在执行。我需要禁用这个。但我不想完全禁用图表的缩放，因为要求规定它需要放大图表，以便在有重叠点时查看点信息。请问有什么帮助吗？或者有人知道如何使用 javascript 手动查找 zoomtype 属性？我尝试使用萤火虫找到它，但无济于事。

//代码示例

```
var data = [
  [1, 1],
  [2, 2],
  [3, 3],
  [4, 4]
];
var chartingOptions = {
  chart: {
    renderTo: 'container',
    zoomType: 'xy'
  },
  tooltip: {
    useHTML: true,
    shared:false,
    formatter: function() { return '<div style="height:100px;width:200px;overflow:auto"><table><tr><td>sdsd</td></tr><tr><td>sdsd</td></tr><tr><td>sdsd</td></tr><tr><td>sdsd</td></tr><tr><td>sdsd</td></tr><tr><td>sdsd</td></tr><tr><td>sdsd</td></tr></table>'}
  },
  series: [{
    type: 'scatter',
    name: 'serie',
    data: data
  }]
};

chartingOptions = $.extend({}, jugalsLib.getBasicChartOptions(), chartingOptions);
var chart = new Highcharts.Chart(chartingOptions);
var $tooltip = $(chart.tooltip.label.element);
$tooltip.mouseup(function (e) {
  chart.tracker.selectionMarker = chart.tracker.selectionMarker.destroy();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T09:04:29.943

您可以在工具提示元素上处理 mouseup 事件并在此处理程序中销毁缩放选择元素。Highcharts 使用这个选择元素来决定是否需要缩放。这将欺骗 highcharts 相信没有选择任何内容。

# 代码

```
var $tooltip = $(chart.tooltip.label.element);
$tooltip.mouseup(function (e) {
  chart.tracker.selectionMarker = chart.tracker.selectionMarker.destroy();
}); 
```

这可能会有一些副作用，例如，如果您实际上正在缩放并且您的缩放选择恰好在工具提示上结束，则它不会缩放。这可能是可以接受的，如果不是，您也可以找到一种解决方法，方法是在上述处理程序中进行更多检查，以查看它是否实际缩放或类似的东西。

# 演示

**[在工具提示中处理鼠标事件 | Highchart & Highstock @ jsFiddle](http://jsfiddle.net/jugal/A6aJW/)**

//代码示例

```
var data = [
  [1, 1],
  [2, 2],
  [3, 3],
  [4, 4]
];
var chartingOptions = {
  chart: {
    renderTo: 'container',
    zoomType: 'xy'
  },
  tooltip: {
    useHTML: true,
    shared:false,
    formatter: function() { return '<div style="height:100px;width:200px;overflow:auto"><table><tr><td>sdsd</td></tr><tr><td>sdsd</td></tr><tr><td>sdsd</td></tr><tr><td>sdsd</td></tr><tr><td>sdsd</td></tr><tr><td>sdsd</td></tr><tr><td>sdsd</td></tr></table>'}
  },
  series: [{
    type: 'scatter',
    name: 'serie',
    data: data
  }]
};

chartingOptions = $.extend({}, jugalsLib.getBasicChartOptions(), chartingOptions);
var chart = new Highcharts.Chart(chartingOptions);
var $tooltip = $(chart.tooltip.label.element);
$tooltip.mouseup(function (e) {
  chart.tracker.selectionMarker = chart.tracker.selectionMarker.destroy();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T05:53:49.103

我解决了这个。我只是`mousedown="event.cancelBubble=true"`在 div 元素中添加一个事件，它就可以工作了！

# windows-8 - 用于 Win 8 应用程序 (WinJS) 的 Facebook 点赞按钮

> ID：14178192
> 
> 赞同：0
> 
> 时间：2013-01-06T00:58:20.823
> 
> 标签：windows-8, facebook-like, winjs

如何在 Winjs 应用程序中添加点赞按钮和评论框？

上面的默认代码无法正常工作。当我点赞时，API 会打开另一个浏览器：

```
<iframe src="https://www.facebook.com/plugins/like.php?href=YOUR_URL"
scrolling="no" frameborder="0"
style="border:none; width:450px; height:80px"></iframe> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T09:46:54.717

您不能在 Windows 8 中使用此按钮。您可以使用 SDK，但不支持点赞页面。

这里有示例：[Web 身份验证代理示例](http://code.msdn.microsoft.com/windowsapps/Web-Authentication-d0485122)

# python - Python pandas，多行的绘图选项

> ID：14178194
> 
> 赞同：41
> 
> 时间：2013-01-06T00:58:33.553
> 
> 标签：python, plot, pandas

我想从熊猫数据框中绘制多条线并为每条线设置不同的选项。我想做类似的事情

```
testdataframe=pd.DataFrame(np.arange(12).reshape(4,3))
testdataframe.plot(style=['s-','o-','^-'],color=['b','r','y'],linewidth=[2,1,1]) 
```

这将引发一些错误消息：

*   线宽不能用列表调用

*   在样式中，在列表中定义颜色时，我不能使用“s”和“o”或任何其他字母符号

还有一些我觉得很奇怪的东西

*   当我在上面的代码中添加另一个绘图命令时，`testdataframe[0].plot()`它将在同一个绘图中绘制这条线，如果我添加命令`testdataframe[[0,1]].plot()`，它将创建一个新绘图

*   如果我愿意的话`testdataframe[0].plot(style=['s-','o-','^-'],color=['b','r','y'])`，可以使用样式列表，但不能使用颜色列表

希望有人能帮忙，谢谢。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-01-06T06:35:53.407

你这么近！

您可以在样式列表中指定颜色：

```
import numpy as np
import matplotlib.pyplot as plt
import pandas as pd

testdataframe = pd.DataFrame(np.arange(12).reshape(4,3), columns=['A', 'B', 'C'])
styles = ['bs-','ro-','y^-']
linewidths = [2, 1, 4]
fig, ax = plt.subplots()
for col, style, lw in zip(testdataframe.columns, styles, linewidths):
    testdataframe[col].plot(style=style, lw=lw, ax=ax) 
```

另请注意，该`plot`方法可以接受一个`matplotlib.axes`对象，因此您可以像这样进行多次调用（如果您愿意）：

```
import numpy as np
import matplotlib.pyplot as plt
import pandas as pd

testdataframe1 = pd.DataFrame(np.arange(12).reshape(4,3), columns=['A', 'B', 'C'])
testdataframe2 = pd.DataFrame(np.random.normal(size=(4,3)), columns=['D', 'E', 'F'])
styles1 = ['bs-','ro-','y^-']
styles2 = ['rs-','go-','b^-']
fig, ax = plt.subplots()
testdataframe1.plot(style=styles1, ax=ax)
testdataframe2.plot(style=styles2, ax=ax) 
```

在这种情况下不太实用，但这个概念可能会在以后派上用场。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2017-03-16T04:47:11.257

所以我认为答案在于在同一个参数中传递颜色和样式。以下示例适用于 pandas 0.19.2：

```
testdataframe=pd.DataFrame(np.arange(12).reshape(4,3))
testdataframe.plot(style=['r*-','bo-','y^-'], linewidth=2.0) 
```

不幸的是，似乎不可能将多个线宽作为输入传递给 matplotlib。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2017-03-15T21:13:06.400

考虑数据框`testdataframe`

```
testdataframe = pd.DataFrame(np.arange(12).reshape(4,3))

print(testdataframe)

   0   1   2
0  0   1   2
1  3   4   5
2  6   7   8
3  9  10  11 
```

您可以组合`styles`成一个字符串列表，`styles`如下所述。我还将定义线宽`lws`

```
styles=['bs-', 'ro-', 'y^-']
lws = [2, 1, 1] 
```

我们可以使用将列表传递给参数的`plot`方法。请注意，我们也可以传递字典（可能还有其他东西）。`testdataframe``styles``style`

然而，线宽不是那么容易处理的。我首先捕获`AxesSubplot`对象并遍历设置线条宽度的线条属性。

```
ax = testdataframe.plot(style=styles)
for i, l in enumerate(ax.lines):
    plt.setp(l, linewidth=lws[i]) 
```

[![在此处输入图像描述](../Images/e4f856f71925df4ddbbd8b0d4e46d52d.png)](https://i.stack.imgur.com/EDa7W.png)

# java - TChart 表头如何居中？

> ID：14178200
> 
> 赞同：0
> 
> 时间：2013-01-06T00:59:18.797
> 
> 标签：java, android, teechart

我有一个`TChart`如下图。我正在尝试将标题文本居中，但没有成功。

```
chart.getHeader().setAlignment(StringAlignment.CENTER); 
```

![中心逻辑错误？](../Images/de3ac09420751c8a2eb53bffa712fe95.png)

这在我看来并不集中。如何将它集中在表面而不是左右轴上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T15:00:03.207

您始终可以手动对齐标题。这里有一个例子：

```
tChart1.getAspect().setView3D(false);

Bar bar1 = new Bar(tChart1.getChart());
bar1.fillSampleValues();

tChart1.getPanel().setMarginUnits(PanelMarginUnits.PIXELS);
tChart1.getPanel().setMarginTop(30);

tChart1.getHeader().setCustomPosition(true);
tChart1.getHeader().setTop(7);    
int width = tChart1.getGraphics3D().textWidth(tChart1.getHeader().getText());
tChart1.getHeader().setLeft(getWindowManager().getDefaultDisplay().getWidth()/2 - width/2); 
```

# python - 包含奇怪对象数组的 Python 对象

> ID：14178203
> 
> 赞同：13
> 
> 时间：2013-01-06T01:00:01.983
> 
> 标签：python, class, object

> **可能重复： Python** [Python OOP 和列表](https://stackoverflow.com/questions/2878499/python-oop-and-lists)
> [中的静态类变量](https://stackoverflow.com/questions/68645/static-class-variables-in-python)

只是想知道我是否可以得到一些帮助。

我正在使用 python，并且遇到了一个我正在处理的小程序似乎无法解决的障碍。这是我的问题（使用一个非常简单且不相关的示例）：我有一个类：

```
class dog:
    name = ''
    friends = [] 
```

我从中制作了几个对象：

```
fido = dog()
rex = dog() 
```

这就是我卡住的地方。我不知道为什么会这样，我还没有弄清楚。我假设我对某事的理解是有缺陷的，任何解释都会很好。所以这是我的问题，如果我将一个对象附加到另一个对象（看起来应该可以正常工作）：

```
fido.friends.append(rex) 
```

……事情搞砸了。正如你在这里看到的：

```
>>> fido.friends.append(rex)
>>> fido.friends
[<__main__.dog instance at 0x0241BAA8>]
>>> rex.friends
[<__main__.dog instance at 0x0241BAA8>]
>>> 
```

这对我来说毫无意义。不应该只有 fido.friends 里面有东西吗？即使我制作了一个新对象：

```
rover = dog() 
```

它有一个 dog 实例，我们可以看到它是我们的“rex”对象。

```
>>> rex.name = "rex"
>>> fido.friends[0].name
'rex'
>>> rex.friends[0].name
'rex'
>>> rover.friends[0].name
'rex'
>>> 
```

这只是没有意义，我希望得到一些帮助。我搜索了一段时间试图找到一个解释，但没有。抱歉，如果我错过了类似的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-06T01:09:48.043

如果每只狗都应该有*自己*的朋友列表，则必须使用*实例*属性：

```
class Dog(object):

    family = 'Canidae' # use class attributes for things all instances share 

    def __init__(self, name):
        """ constructor, called when a new dog is instantiated """
        self.name = name
        self.friends = []

    def __repr__(self):
        return '<Dog %s, friends: %s>' % (self.name, self.friends)

fido = Dog('fido')
rex = Dog('rex')

fido.friends.append(rex)
print(fido) # <Dog fido, friends: [<Dog rex, friends: []>]> 
```

您使用的是[类属性](http://docs.python.org/2/tutorial/classes.html#class-objects)（值在实例之间共享）。更多关于这个：

*   [http://www.diveintopython.net/object_orient_framework/class_attributes.html](http://www.diveintopython.net/object_oriented_framework/class_attributes.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T01:02:57.687

在类内部声明的变量，不附加到实例，是python 中的[静态](http://en.wikipedia.org/wiki/Static_variable)变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T01:05:52.533

为避免这种情况，请将变量声明放在`__init__`函数中，如下所示：

```
class Dog:
    def __init__(self):
        self.name = ''
        self.friends = [] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-06T01:07:00.137

实现您想要做的事情的正确方法是使用该`__init__`方法：

```
>>> class dog:
       def __init__(self):
           self.f = []

>>> a = dog()
>>> b = dog()
>>> a.f.append(b)
>>> a.f
[<__main__.dog instance at 0x02DA6F08>]
>>> c = dog()
>>> c.f
[] 
```

# html - 如何使用 css 在文本的每一侧添加相等的间隙？

> ID：14178204
> 
> 赞同：1
> 
> 时间：2013-01-06T01:00:10.230
> 
> 标签：html, css, text, center

我想从这个[http://i.imgur.com/XesXy.png](http://i.imgur.com/XesXy.png)更改为这个[http://prntscr.com/o9hfh](http://prntscr.com/o9hfh) 如何在两侧添加额外的间隙并将文本更多地挤压在一起？基本上我想在不使用 text-align:center 的情况下将文本居中，因为我更喜欢 text-align:left，但如果我离开，文本将不再位于中心。

HTML

```
<body> <!-- start of the body-->
            <ul class="sidemenu">
                <li><a href="">About Us</a></li>
                <li><a href="">Contact Us</a></li>
                <li><a href="">FAQ</a></li>
                <li><a href="">How To Order</a></li>
                <li><a href="">Term And Agreement</a></li>
                <li><a href="">Shipping Information</a></li>
            </ul>
            <div id="about-us">

            <p><h2>About Us</h2>Lorem ipsum .<br />

Morbi in libero quis quam consequat malesuada..</p>
            </div>

            </body> 
```

CSS：

```
#about-us {
margin: 10px auto;
background-color:#FFF;
height:800px;
width:710px;
left:125px;
position: relative;
padding:0em 0em;

}

#about-us p {
text-align:left;
padding-top: 20px;

}

body {
position:relative;
}

.sidemenu{
position:absolute;
background-color: #fff;
width:240px;
height:780px;
margin-top: 10px;
list-style:none;
text-align:left;
padding-top: 20px;

}

.sidemenu li a{
color:#222222;
padding: 0em 1em;
line-height: 2em; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T01:06:29.543

也许试试`padding`

```
 #about-us p {
   padding: 0 2% (or px, ems if you prefer);
 } 
```

或者，您可以`margin`以相同的方式使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T01:07:16.690

使用左右填充。

像这样的东西：

```
#about-us p {
padding: 20px 20px 0  20px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T01:27:22.617

只需将填充添加到 #about_us 框，同时相应地对其宽度和高度进行切片：

```
#about_us {
           padding:20px 40px;
          } 
```

并为 p 标签配置行高：

```
#about_us p {
       line-height:40px;
      } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T01:05:30.783

您可以在段落上使用填充来实现更多的侧面间距：

```
#about-us p {
    padding: 0 40px;
} 
```

请注意，这是以下的[简写](http://www.w3schools.com/css/css_padding.asp)：

```
#about-us p {
    padding-left: 40px;
    padding-right: 40px;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-06T01:10:05.640

将文本挤在一起使用

```
line-height:15px 
```

并简单地使用边距或填充来安排

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-25T09:44:21.407

不要将您的 h2-tags（或任何标题标签）放在 p-tag 内。

在 div#about-us 上添加一些填充

# mysql - 带有当天比较的sql查询

> ID：14178207
> 
> 赞同：0
> 
> 时间：2013-01-06T01:01:09.627
> 
> 标签：mysql, sql

我有一个带有 due_date 字段的 mysql 表，它只是一个整数值。

```
dealID   |  due_day
1        |   15
2        |   25
3        |   10
4        |    9
5        |   31
6        |   20 
```

我想查询此表以仅显示到期日之前 14 天的数据。例如，今天是 01/05/13，如果我查询这个表，它应该只显示 dealID 1、3 和 9。我应该如何处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T01:18:32.323

您可以简单地使用[DATE_SUB](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-sub)从当前日期减去天数，然后[使用 DAYOFMONTH](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_dayofmonth)来获得这一天。

您可以使用上述函数创建查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T01:31:23.867

所以根据user1951544的回答，这就是我想出的。

```
 SELECT due_day
    FROM deals
    WHERE (due_day - DAYOFMONTH( NOW( ) ) ) <=14 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T10:59:05.167

询问：

**[SQLFIDDLE示例](http://sqlfiddle.com/#!2/8b794/7)**

```
SELECT 
dealID, 
due_day
FROM Table1
WHERE due_day  < 14 + DAYOFMONTH( NOW( ) ) 
```

结果：

```
| DEALID | DUE_DAY |
--------------------
|      1 |      15 |
|      3 |      10 |
|      4 |       9 | 
```

# .net - 线程本地 如果连接丢失怎么办？

> ID：14178224
> 
> 赞同：0
> 
> 时间：2013-01-06T01:03:43.953
> 
> 标签：.net

我有一个相当理论的问题`ThreadLocal<T>`，由于周围世界偶尔发生的事件，例如连接丢失，我的 T 可能会变得无法使用。关于如何重置 ThreadLocal 值的任何想法，相对于对象变得不可用的线程，而不重置整个`ThreadLocal<T>`对象？

顺便一提

*   我的上下文是 ASP.NET MVC，我做了类似的事情`ThreadLocal<DatabaseConnection>`（在我的情况下有充分的理由这样做）

*   因此，让用户查看“砰！您的程序出错，因为编写此程序的开发人员是脑死亡僵尸”之类的异常的解决方案不是一种选择......

祝您玩得开心，并提前感谢您。

**编辑：**想象一个 Web 服务器，它有一个由 8 个线程组成的池，每分钟处理 512 个客户端请求，我使用上述解决方案将打开的连接数量限制为每分钟 8 个连接，而不是在同一时期内创建 512 个时间...

**编辑：**这是与我的问题相关的来源，我问自己一个问题“如果在某个特定线程中与数据库的连接丢失怎么办”我将如何在 ThreadLocal 中重新创建和重新设置它：

**公共类 EloqueraThreadLocalInstanceFactory**

```
public class EloqueraThreadLocalInstanceFactory
{
    Property<DB> database;

    private DB CreateInstance()
    {
        var db = new DB(ConnectionString);

        try
        {
            db.OpenDatabase(DatabaseName);
        }
        catch (FileNotFoundException)
        {
            db.CreateDatabase(DatabaseName);
            db.OpenDatabase(DatabaseName);
        }

        return db;
    }

    public EloqueraThreadLocalInstanceFactory(String connectionString, String databaseName, params Action<DB>[] initializers)
    {
        DatabaseName = databaseName;
        ConnectionString = connectionString;

        database = new ThreadLocalPropertyValue<DB>(CreateInstance, initializers);
    }

    public String DatabaseName { get; private set; }
    public String ConnectionString { get; private set; }

    public DB GetInstance()
    {
        return database;
    }
} 
```

**公共类属性 { ... }**

```
public class Property<T>
{
    private PropertyValue<T> propertyValue;

    protected virtual void OnAfterSet()
    {
        if (AfterSet != null)
        {
            AfterSet(this, null);
        }
    }
    protected virtual void OnBeforeGet(EventArgs<T> eventArgs)
    {
        if (BeforeGet != null)
        {
            BeforeGet(this, eventArgs);
        }
    }
    protected virtual void OnBeforeSet(CancellableEventArgs<PropertyValue<T>> e)
    {
        if (BeforeSet != null)
        {
            BeforeSet(this, e);
        }
    }

    public Property()
    {

    }
    public Property(PropertyValue<T> propertyValue)
    {
        this.propertyValue = propertyValue;
    }

    public void Reset()
    {
        propertyValue = null;
    }

    // IsSet is required to be implemented via method to prevent it from being serialized
    public Boolean IsSet() 
    {
        return propertyValue != null;
    }

    // Value property is required for serialization purposes
    public T Value
    {
        get { return Get(); }
        set { Set(new StaticPropertyValue<T>(value)); }
    }

    protected void SetRaw(PropertyValue<T> propertyValue)
    {
        this.propertyValue = propertyValue;
    }

    protected virtual T Get()
    {
        var eventArgs = new EventArgs<T>(propertyValue.GetPropertyValueInternal());

        OnBeforeGet(eventArgs);

        return eventArgs.Value;
    }
    protected virtual void Set(PropertyValue<T> propertyValue)
    {
        var eventArgs = new CancellableEventArgs<PropertyValue<T>>(propertyValue);

        OnBeforeSet(eventArgs);

        this.propertyValue = propertyValue;

        if (!eventArgs.Cancel)
        {
            SetRaw(propertyValue);

            OnAfterSet();
        }
    }

    public event EventHandler AfterSet;
    public event EventHandler<EventArgs<T>> BeforeGet;
    public event EventHandler<CancellableEventArgs<PropertyValue<T>>> BeforeSet;

    public static implicit operator T(Property<T> property)
    {
        return property == null ? default(T) : property.Get();
    }

    public static implicit operator Property<T>(T value)
    {
        return new Property<T>(new StaticPropertyValue<T>(value));
    }
    public static implicit operator Property<T>(Func<T> value)
    {
        return new Property<T>(new LazyPropertyValue<T>(value));
    }
    public static implicit operator Property<T>(PropertyValue<T> value)
    {
        return new Property<T>(value);
    }
    public static implicit operator PropertyValue<T>(Property<T> property)
    {
        return property.propertyValue;
    }

    /***************************************************************************************************/

    public static Property<T> operator <=(Property<T> property, Func<T> propertyValue)
    {
        if (property != null)
        {
            property.Set(new LazyPropertyValue<T>(propertyValue));
        }
        else
        {
            return new Property<T>(new LazyPropertyValue<T>(propertyValue));
        }

        return property;
    }
    public static Property<T> operator >=(Property<T> property, Func<T> propertyValue)
    {
        property.Set(new LazyPropertyValue<T>(propertyValue));

        return property;
    }

    public static Property<T> operator <=(Property<T> property, PropertyValue<T> propertyValue)
    {
        if (property != null)
        {
            property.Set(propertyValue);
        }
        else
        {
            return new Property<T>(propertyValue);
        }

        return property;
    }
    public static Property<T> operator >=(Property<T> property, PropertyValue<T> propertyValue)
    {
        property.Set(propertyValue);

        return property;
    }

    public static Property<T> operator <=(Property<T> property, LazyPropertyValue<T> propertyValue)
    {
        if (property != null)
        {
            property.Set(propertyValue);
        }
        else
        {
            return new Property<T>(propertyValue);
        }

        return property;
    }
    public static Property<T> operator >=(Property<T> property, LazyPropertyValue<T> propertyValue)
    {
        property.Set(propertyValue);

        return property;
    }

    public static Property<T> operator <=(Property<T> property, StaticPropertyValue<T> propertyValue)
    {
        if (property != null)
        {
            property.Set(propertyValue);
        }
        else
        {
            return new Property<T>(propertyValue);
        }

        return property;
    }
    public static Property<T> operator >=(Property<T> property, StaticPropertyValue<T> propertyValue)
    {
        property.Set(propertyValue);

        return property;
    }

    /***************************************************************************************************/

    public static Property<T> operator <(Property<T> property, Func<T> propertyValue)
    {
        if (property != null)
        {
            property.SetRaw(new LazyPropertyValue<T>(propertyValue));
        }
        else
        {
            return new Property<T>(new LazyPropertyValue<T>(propertyValue));
        }

        return property;
    }
    public static Property<T> operator >(Property<T> property, Func<T> propertyValue)
    {
        property.SetRaw(new LazyPropertyValue<T>(propertyValue));

        return property;
    }

    public static Property<T> operator <(Property<T> property, PropertyValue<T> propertyValue)
    {
        if (property != null)
        {
            property.SetRaw(propertyValue);
        }
        else
        {
            return new Property<T>(propertyValue);
        }

        return property;
    }
    public static Property<T> operator >(Property<T> property, PropertyValue<T> propertyValue)
    {
        property.SetRaw(propertyValue);

        return property;
    }

    public static Property<T> operator <(Property<T> property, LazyPropertyValue<T> propertyValue)
    {
        if (property != null)
        {
            property.SetRaw(propertyValue);
        }
        else
        {
            return new Property<T>(propertyValue);
        }

        return property;
    }
    public static Property<T> operator >(Property<T> property, LazyPropertyValue<T> propertyValue)
    {
        property.SetRaw(propertyValue);

        return property;
    }

    public static Property<T> operator <(Property<T> property, StaticPropertyValue<T> propertyValue)
    {
        if (property != null)
        {
            property.SetRaw(propertyValue);
        }
        else
        {
            return new Property<T>(propertyValue);
        }

        return property;
    }
    public static Property<T> operator >(Property<T> property, StaticPropertyValue<T> propertyValue)
    {
        property.SetRaw(propertyValue);

        return property;
    }

}

public abstract class PropertyValue<T>
{
    protected abstract T GetPropertyValue();

    internal T GetPropertyValueInternal()
    {
        return GetPropertyValue();
    }
}

public class InitializablePropertyValue<T> : PropertyValue<T>
{
    private Func<T> func;
    private Action<T>[] initializers;

    public InitializablePropertyValue(Func<T> func, params Action<T>[] initializers)
    {
        if (func == null) throw new ArgumentNullException("func");
        if (initializers == null) throw new ArgumentNullException("initializers");

        this.func = func;
        this.initializers = initializers;
    }

    protected override T GetPropertyValue()
    {
        var result = func();

        foreach (var initializer in initializers)
        {
            initializer(result);
        }

        return result;
    }
}

public class StaticPropertyValue<T> : PropertyValue<T>
{
    private T value;

    public StaticPropertyValue(T value)
    {
        this.value = value;
    }

    protected override T GetPropertyValue()
    {
        return value;
    }

    public static implicit operator StaticPropertyValue<T>(T value)
    {
        return new StaticPropertyValue<T>(value);
    }
}

public class LazyPropertyValue<T> : InitializablePropertyValue<T>
{
    private Lazy<T> lazy;

    public LazyPropertyValue(Func<T> valueFactory)
        : base(valueFactory)
    {
        this.lazy = new Lazy<T>(base.GetPropertyValue, false);
    }
    public LazyPropertyValue(Func<T> valueFactory, Boolean isThreadSafe)
        : base(valueFactory)
    {
        this.lazy = new Lazy<T>(base.GetPropertyValue, isThreadSafe);
    }
    public LazyPropertyValue(Func<T> valueFactory, LazyThreadSafetyMode mode)
        : base(valueFactory)
    {
        this.lazy = new Lazy<T>(base.GetPropertyValue, mode);
    }

    public LazyPropertyValue(Func<T> valueFactory, params Action<T>[] initializers)
        : base(valueFactory, initializers)
    {
        this.lazy = new Lazy<T>(base.GetPropertyValue, false);
    }
    public LazyPropertyValue(Func<T> valueFactory, Boolean isThreadSafe, params Action<T>[] initializers)
        : base(valueFactory, initializers)
    {
        this.lazy = new Lazy<T>(base.GetPropertyValue, isThreadSafe);
    }
    public LazyPropertyValue(Func<T> valueFactory, LazyThreadSafetyMode mode, params Action<T>[] initializers)
        : base(valueFactory, initializers)
    {
        this.lazy = new Lazy<T>(base.GetPropertyValue, mode);
    }

    public Boolean IsInitialized
    {
        get { return lazy.IsValueCreated; }
    }

    protected override T GetPropertyValue()
    {
        return lazy.Value;
    }

    public static implicit operator LazyPropertyValue<T>(Func<T> value)
    {
        return new LazyPropertyValue<T>(value);
    }
}

public class ThreadLocalPropertyValue<T> : InitializablePropertyValue<T>
{
    ThreadLocal<T> threadLocal;

    public ThreadLocalPropertyValue(Func<T> func, params Action<T>[] initializers)
        : base(func, initializers)
    {
        this.threadLocal = new ThreadLocal<T>(base.GetPropertyValue);
    }

    protected override T GetPropertyValue()
    {
        return threadLocal.Value;
    }
}

public class DynamicPropertyValue<T> : PropertyValue<T>
{
    Func<T> func;

    public DynamicPropertyValue(Func<T> func)
    {
        this.func = func;
    }

    protected override T GetPropertyValue()
    {
        return func();
    }
} 
```

# c - 结构中的成员可以初始化为一个值吗？

> ID：14178225
> 
> 赞同：4
> 
> 时间：2013-01-06T01:03:47.087
> 
> 标签：c, struct, initialization

我只是想知道在结构中声明和定义的变量是否可以初始化为某个值，并计划使用函数指针来模仿 OOP 中的类。

示例代码：

```
typedef struct{
int x;
int (*manipulateX)(int) = &manipulateX;
}x = {0};

void main()
{
    getch();
}

int manipulateX(int x)
{
    x = x + 1;
return x;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-06T01:07:53.380

从 C99 开始，您可以使用[*指定的初始化程序*](http://gcc.gnu.org/onlinedocs/gcc-3.4.5/gcc/Designated-Inits.html)将结构的字段设置为值，如下所示：

```
struct MyStruct {
    int x;
    float f;
};

void test() {
    struct MyStruct s = {.x=123, .f=456.789};
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T01:09:08.510

```
StructName s; // receives no initialization
StructName s = {x,y}; // value initializes all members 

struct Child { StructName s; };
Child c; // receives no initialization
Child c = {x,y}; // value initializes all members

For Example :

struct Child{

int c;
int d;

}

Child childstruct ={10,20}; 
```

那么 childstruct.c 将是 10，而 childstruct.d 将是 20。

[http://publib.boulder.ibm.com/infocenter/comphelp/v7v91/index.jsp?topic=%2Fcom.ibm.vacpp7a.doc%2Flanguage%2Fref%2Fclrc03strin.htm](http://publib.boulder.ibm.com/infocenter/comphelp/v7v91/index.jsp?topic=%2Fcom.ibm.vacpp7a.doc%2Flanguage%2Fref%2Fclrc03strin.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T16:56:49.113

在对内存有些紧张的嵌入式系统进行编程时，我使用的一种方法是使用一些宏来定义结构类型并定义其初始值。定义看起来像：

```
#define CREATE_FOO_STRUCT \
  X(int age, 34) Y \
  X(int height, 65) Y \
  X(char const * favoritecolor,"blue") Y \
  X(int some_things[5],ARR5(1,2,3,4,5)) 
```

需要该`ARR5`宏来允许将该数组的初始化值作为单个参数传递；另一种方法是将最后一行写为`X(int some_things[5],{1 COMMA 2 COMMA 3 COMMA 4 COMMA5})`. 给定一个像上面这样的宏，可以定义`X`和返回扩展为第一个项目和分号，在这种情况下将定义结构，然后重新定义和返回第二个项目和一个逗号，在这种情况下将定义一个默认实例。太糟糕了，我不知道有什么方法可以避免最后一行与其他行不同（如果每一行*但第一*行之前有最后一行，则最后一行可以匹配其他行`Y``X``Y``typedef {CREATE_FOO_STRUCT} FOO;``FOO``X``Y``X``Y``const FOO default_FOO = {CREATE_FOO_STRUCT};`*`X`, 如果最后一行后面跟着`//this line must be left blank`一行。*

 *在我实现上述结构的特定处理器上，`default_FOO`以这种方式定义将消耗零 RAM，并消耗等于`default_FOO`. 使用常规赋值语句加载具有默认值的静态实例的函数`FOO`将消耗 ROM 中的每个非零字节的四个字节`default_FOO`，并且还需要有一个可以使用的静态实例。接受 a`FOO*`并使用默认值加载指向的实例的 C 语言函数将占用大量代码（每个分配都必须单独计算要存储的数据的地址）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-06T13:20:45.660

在 C 中初始化结构模板内的结构成员是**非法的，并且是****不允许**的.. 因为结构模板不拥有自己的任何内存，并且结构的所有成员只有在与一种结构类型的变量，因为现在它们被分配了一个内存，它们可以被初始化..但不是在与变量关联之前：例如

```
 struct tag_name
    { 
    int x;
    int y;
    }; 
```

上面的 struct 模板不包含内存空间.. 除非有一个变量与它相关联：

```
 struct tag_name variable1; 
```

现在 struct 类型的变量`variable1`将被分配一个足够大的内存来保存两个 int 值（for`variable1.x`和`variable1\. y`），现在只有你可以初始化成员 x 和 y ，例如：

```
 variable1.x=10;
    variable1.y=20; 
```

因此以下内容将是非法的

```
 struct tag_name
    { 
    int x=10;
    int y=20;
    }; 
```*

# android - setSystemUiVisibility(SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION) 不起作用

> ID：14178237
> 
> 赞同：12
> 
> 时间：2013-01-06T01:06:07.077
> 
> 标签：android, android-layout, android-fullscreen

我一直在与 setSystemUiVisibility() 斗争，试图隐藏软导航按钮一段时间（对于视频播放器）。它似乎不像宣传的那样工作。这是我的代码，在可见的`FrameLayout`.

```
void setNavVisibility(boolean visible)
{
    int newVis = SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN;
    if (!visible)
    {
        newVis |= SYSTEM_UI_FLAG_LOW_PROFILE | SYSTEM_UI_FLAG_HIDE_NAVIGATION;
    }
    setSystemUiVisibility(newVis);
} 
```

对 SDK 示例稍作修改：

```
 void setNavVisibility(boolean visible) {
        int newVis = SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN
                | SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION
                | SYSTEM_UI_FLAG_LAYOUT_STABLE;
        if (!visible) {
            newVis |= SYSTEM_UI_FLAG_LOW_PROFILE | SYSTEM_UI_FLAG_FULLSCREEN
                    | SYSTEM_UI_FLAG_HIDE_NAVIGATION;
        } 
```

调用时也不做任何事情。当我从不同的地方打电话给他们时，我取得了一些成功`View`，但文档没有提到`View`你打电话的地方有什么影响？我认为这里的文档（出乎意料）有些缺乏。有谁知道到底发生了什么？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-06T16:16:17.747

嗯，显然我[重复了我自己的问题！](https://stackoverflow.com/questions/13887278/system-ui-flag-layout-hide-navigation-has-no-effect)但无论如何我找到了答案：在阅读了源代码之后——这通常是在 Android 领域找到问题的唯一方法——我发现了以下未记录的事实：

**setSystemUiVisibility() 仅在您调用它的视图可见时才有效！**

更重要的是：调用 setSystemUiVisibility() 的视图必须*保持*可见，导航栏才能保持隐藏状态。感谢您记录这些家伙，真的很棒。

这是相关代码，在`View.java`.

```
void performCollectViewAttributes(AttachInfo attachInfo, int visibility) {
    if ((visibility & VISIBILITY_MASK) == VISIBLE) {
        if ((mViewFlags & KEEP_SCREEN_ON) == KEEP_SCREEN_ON) {
            attachInfo.mKeepScreenOn = true;
        }
        attachInfo.mSystemUiVisibility |= mSystemUiVisibility;
        ListenerInfo li = mListenerInfo;
        if (li != null && li.mOnSystemUiVisibilityChangeListener != null) {
            attachInfo.mHasSystemUiListeners = true;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-10-21T07:30:59.180

我使用 setOnSystemUiVisibilityChangeListener() 使这种全屏模式对我有用，包括隐藏导航栏。

```
@Override
protected void onResume() {
    if (Build.VERSION.SDK_INT >= 16) {
        getWindow().getDecorView().setOnSystemUiVisibilityChangeListener(
                new OnSystemUiVisibilityChangeListener() {
                    @Override
                    public void onSystemUiVisibilityChange(int visibility) {
                        if ((visibility & View.SYSTEM_UI_FLAG_FULLSCREEN) == 0) {
                            getActionBar().show();
                        } else {
                            int mUIFlag = View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN
                                    | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION
                                    | View.SYSTEM_UI_FLAG_LAYOUT_STABLE
                                    | View.SYSTEM_UI_FLAG_LOW_PROFILE
                                    | View.SYSTEM_UI_FLAG_FULLSCREEN
                                    | View.SYSTEM_UI_FLAG_HIDE_NAVIGATION;
                            getWindow().getDecorView()
                                    .setSystemUiVisibility(mUIFlag);
                            getActionBar().hide();
                        }
                    }
                });
    }

    super.onResume();
} 
```

似乎android仅在侦听器内部触发 setSystemUiVisibility() 。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-02-07T10:37:17.597

我实现了这个如下但是我在底部得到一个空白（见截图）

```
@Override
public void onWindowFocusChanged(boolean hasFocus) {
    super.onWindowFocusChanged(hasFocus);
    if (hasFocus) {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT) {
            getWindow().getDecorView().setSystemUiVisibility(
                    View.SYSTEM_UI_FLAG_LAYOUT_STABLE
                            | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION
                            | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN
                            | View.SYSTEM_UI_FLAG_LOW_PROFILE
                            | View.SYSTEM_UI_FLAG_HIDE_NAVIGATION // hide nav bar
                            | View.SYSTEM_UI_FLAG_FULLSCREEN // hide status bar
                            | View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY
            );
        }
    }
} 
```

[![在此处输入图像描述](../Images/8dec63a40a20a5a0c6bb72796d4cfca8.png)](https://i.stack.imgur.com/HTETz.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-06T01:11:36.900

您确定没有进行用户交互吗？即模拟导致控件立即重新出现的触摸？

从[文档](http://developer.android.com/reference/android/view/View.html#SYSTEM_UI_FLAG_HIDE_NAVIGATION)：

> `SYSTEM_UI_FLAG_HIDE_NAVIGATION`：有一个限制：因为导航控件非常重要，最少的用户交互会导致它们立即重新出现。发生这种情况时，这两个标志和`SYSTEM_UI_FLAG_FULLSCREEN`将自动清除，以便两个元素同时重新出现。

附带说明一下，即使使用 JB 中的股票视频播放器，我也注意到在某些情况下视图无法调整大小的问题。我认为这是（或曾经是）一个错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-18T02:06:49.883

我发现如果用户与设备交互，那么导航栏就会返回。立即在处理程序方法中设置标志是`OnSystemUiVisibilityChangeListener`行不通的。如果您在一秒钟延迟后更改它们，它将起作用。

```
protected static final int requiredDecorViewFlags = View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN
        | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION
        | View.SYSTEM_UI_FLAG_LAYOUT_STABLE
        | View.SYSTEM_UI_FLAG_LOW_PROFILE
        | View.SYSTEM_UI_FLAG_FULLSCREEN
        | View.SYSTEM_UI_FLAG_HIDE_NAVIGATION;

protected void listenToUiVisibilityChange() {
    Window window = getWindow();
    if(window == null) {
        return;
    }
    final View view = window.getDecorView();
    if(view == null) {
        return;
    }
    view.setOnSystemUiVisibilityChangeListener(
        new View.OnSystemUiVisibilityChangeListener() {
            @Override
            public void onSystemUiVisibilityChange(int visibility) {
                Handler handler = new Handler(
                    getMainLooper()
                );
                handler.postDelayed(
                    new Runnable() {
                        @Override
                        public void run() {
                            Window activityWindow = getWindow();
                            if(activityWindow == null) {
                                return;
                            }
                            View decorView = activityWindow.getDecorView();
                            if(decorView == null) {
                                return;
                            }
                            decorView.setSystemUiVisibility(requiredDecorViewFlags);
                       }
                   },
                   1000
               );
           }
       }
    );
}

@Override
protected void onResume() {
    super.onResume();
    listenToUiVisibilityChange();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-17T12:20:32.133

```
//do it by the following method hide it the status bar in sdk < 19 and for 
// greater u can do by providing the by the following i am doing here for both

      public void FullScreencall() {
    if (Build.VERSION.SDK_INT < 19) {
        getWindow().getDecorView().setSystemUiVisibility(8);
     }
    else {
        getWindow().getDecorView().setSystemUiVisibility
     (InputDeviceCompat.SOURCE_TOUCHSCREEN);
     }
   } 
```

# string - 什么是获取字符串中使用的字母列表的好方法或有效方法

> ID：14178243
> 
> 赞同：1
> 
> 时间：2013-01-06T01:06:42.010
> 
> 标签：string, common-lisp

### 简而言之，如何从 Common Lisp 中的字符串中获取不重复的字母列表？

例如：

```
"common"
-> ("c" "o" "m" "n") or in characters, (#\c #\o #\m #\n)
I'd care less about the order and type, if it is in string or character.

"overflow" -> (o v e r f l w)
"tomtomtom" -> (t o m)
   etc... 
```

我的想法是收集原始*字符串的第一个**字母*，然后使用该函数；

 *```
(remove letter string) 
```

收集现在的第一个*字母*，*删除字母字符串*并将其附加到之前已经收集的字母中。这听起来像递归，但如果递归调用会丢失之前收集的 *letter*s 列表，对吗？我也怀疑是否有任何内置功能。

此外，我不想使用*set*或其中的任何一个，因为我想完全以函数式风格来做这件事。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T02:59:03.530

```
CL-USER> (remove-duplicates (coerce "common" 'list))
(#\c #\m #\o #\n) 
```

或者你甚至可以简单地这样做：

```
CL-USER> (remove-duplicates "common")
"comn" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T07:45:09.360

如果您可以对您正在处理的文本做出一些假设，那么可能会有更好的可能性来做到这一点。例如，如果您只处理英文文本*，*那么您可以实现一个非常简单的哈希函数（基本上，使用 128 个元素长的位向量），这样您甚至不需要使用哈希表（即更复杂的结构）。下面的代码说明了这个想法。

```
(defun string-alphabet (input)
  (loop with cache =
       (coerce (make-array 128
                           :element-type 'bit
                           :initial-element 0) 'bit-vector)
     with result = (list input)
     with head = result
     for char across input
     for code = (char-code char) do
       (when (= (aref cache code) 0)
         (setf (aref cache code) 1
               (cdr head) (list char)
               head (cdr head)))
     finally (return (cdr result))))

(string-alphabet "overflow")
;; (#\o #\v #\e #\r #\f #\l #\w) 
```

强制转换`bit-vector`并不是很重要，但它更容易调试（打印形式更紧凑），并且某些实现实际上可能会优化它以仅包含平台需要表示这么多位的这么多整数，即在128 位长度，在 64 位平台上，它可以短至 2 或 3 个整数长。

或者，你也可以这样做，使用整数：

```
(defun string-alphabet (input)
  (loop with cache = (ash 1 128)
     with result = (list input)
     with head = result
     for char across input
     for code = (char-code char) do
       (unless (logbitp code cache)
         (setf cache (logior cache (ash 1 code))
               (cdr head) (list char)
               head (cdr head)))
     finally (return (cdr result)))) 
```

但在这种情况下，在最坏的情况下，您将创建 128 个大整数，毕竟这并不昂贵，但位向量可能会做得更好。但是，这可能会给您一个提示，例如，当您可以假设只使用英文字母时（在这种情况下，可以使用比机器记忆字更短的整数）。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2013-01-06T01:30:08.180

这里有一些 Haskell 中的代码，因为我对 Lisp 不太熟悉，但由于它们都是功能性的，我认为翻译它不会有问题：

```
doit :: String -> String

doit [] = []
doit (x:xs) = [x] ++ doit (filter (\y -> x /= y) xs) 
```

那么它有什么作用呢？你有一个字符串，如果它是一个空字符串（在 Haskell [] == "" 中），你返回一个`empty`字符串。否则，取第一个`element`并将其连接到对`tail`字符串的递归，但`filter`排除那些元素，即 == `first element`。

这个函数`filter`只是一个特定的语法糖`map-function`，在 Lisp 中称为`remove-if`你可以在这里重读：[lisp filter out results from list not matching predicate](https://stackoverflow.com/questions/2234860/lisp-filter-out-results-from-list-not-matching-predicate)*

# cocoa - 在 Finder 中显示在 10.8 中不起作用

> ID：14178244
> 
> 赞同：6
> 
> 时间：2013-01-06T01:06:51.100
> 
> 标签：cocoa, nsworkspace

这适用于 10.7，但不适用于 10.8。我如何让它在山狮中工作？

```
-(IBAction)showTargetInFinder:(id)sender
{

     NSString *linkPath = [targetField stringValue];
     NSWorkspace *ws = [NSWorkspace sharedWorkspace];
     [ws selectFile:linkPath inFileViewerRootedAtPath:nil];

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-06T01:14:10.570

请改用此代码：

```
NSURL *fileURL = your file URL;
NSArray *fileURLs = [NSArray arrayWithObjects:fileURL, nil];
[[NSWorkspace sharedWorkspace] activateFileViewerSelectingURLs:fileURLs]; 
```

这适用于 10.6+。如果您想在 Finder 上显示和选择多个文件，只需将更多文件添加`NSURLs`到数组中即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-18T14:54:21.070

从完整性检查的角度来看：如果运行进行`[[NSWorkspace sharedWorkspace] activateFileViewerSelectingURLs:@[ fileURL ]]`调用的进程的用户没有读取/查看权限，`fileURL`则该方法将显示为“不起作用”。

要确定这是否是您的问题（从 OS X 10.10.3 开始），请检查您的控制台是否有如下日志：

```
6/18/15 10:34:46.195 AM NameOfApp[42753]: AppleEvents failed to encode extension for /var/folders/zz/zyxvpxvq6csfxvn_n0000000000000/T/xxxxxxxxxxx/yyyy.zzz, err=Permission denied/13 
```

# assembly - 单通道 z80 汇编器（源代码或可在 Windows 上使用）

> ID：14178253
> 
> 赞同：0
> 
> 时间：2013-01-06T01:08:42.943
> 
> 标签：assembly, z80

我最近接触了 Z80 系统，并且一直在为调试器编写反汇编程序（推入从 Z80y 内存中提取的指令）。我可以得到指令，但是在组装 ASM 时会出现问题，我发现大多数汇编程序要么不能正确理解整套指令，要么会混淆某些指令，这意味着无法正确转换回 ASM。我今天问你们的是，如果你们有一个真正有效的（来源会更好）。我还希望它有一个单通道选项，因为否则它不可能（几乎）。

最后一件事是要知道是否有人有完整的测试指令集，因为目前我只有一个 8080 列表，这意味着我无法测试扩展指令。

非常感谢任何链接/文件，Andy A

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:57:07.943

Z88[开发套件](http://www.z88dk.org/forum/)还包含一个汇编程序 (z80asm) 以及一个 C 编译器。

不过，它是一个两遍汇编器。我认为单程方法没有用。您将如何将 JP 组装到稍后在单程中定义的标签？！

z88dk 工具链似乎非常便携。我目前正在尝试将其移植到基于 Zilog eZ80 的平台本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T04:20:42.190

我用于 Z-80 编程项目的汇编器是 zmac。

我已经为 Windows 构建了自己的版本，并带有一些扩展：

[http://members.shaw.ca/gp2000/zmac.html](http://members.shaw.ca/gp2000/zmac.html)

Google 搜索“z80 zmac”可以帮助您找到原始源代码。

它不是一个单程汇编器，但我认为它就足够了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-26T22:33:45.017

这是官方最新的 Z80 手册：[http](http://www.zilog.com/manage_directlink.php?filepath=docs/z80/um0080) ://www.zilog.com/manage_directlink.php?filepath=docs/z80/um0080 。

它包括指令集架构的完整描述。

# xaml - Windows 8 XAML 多语言翻译

> ID：14178258
> 
> 赞同：1
> 
> 时间：2013-01-06T01:09:29.960
> 
> 标签：xaml, windows-8, microsoft-metro, windows-runtime, winrt-xaml

我使用多语言工具包翻译了我的应用程序，并一直在使用伪语言对其进行测试。它适用于我在代码 (C#) 中翻译的字符串，但我不知道如何制作它，以便自动翻译 XAML 中的标记。

我一直在使用[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh965329.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh965329.aspx)作为教程，但我无法弄清楚。我也在谷歌上搜索过，但仍然没有运气。

例如，我创建了一个“水印”文本框（继承自该文本框`TextBox`，默认情况下会在其中显示一些文本，用户没有输入任何文本并且该项目没有焦点。XAML 看起来像这样（我将通用定位内容替换为'...'）：

```
<local:WatermarkTextbox x:Name="TitleTextBox" Watermark="MainPage_EnterATitle" ... Style="{StaticResource TextBoxStyle1}" /> 
```

如您所见，它正在设置一个名为`Watermark`“标签”的属性，该属性是使用多语言工具翻译的资源名称的“标签”。我不知道如何让它自动翻译。

另一个例子是使用底部应用栏按钮：

```
<Button x:Name="bottomAppBar_unpinFromStartButton" AutomationProperties.Name="MainPage_UnpinFromStart" Style="{StaticResource UnPinAppBarButtonStyle}" Click="bottomAppBar_unpinFromStartButton_Click"/> 
```

我可以在上面的链接中看到它说：

```
MediumButton.[using:Windows.UI.Xaml.Automation]AutomationProperties.Name 
```

但我不太确定这意味着什么。

即使有一个按钮，这似乎是最简单的翻译我无法让它工作。XAML 是：

```
<Button x:Name="RemovePhotoButton" x:Uid="MainPage_RemovePhoto" Content="" HorizontalAlignment="Center" Margin="222,0,974,78" Grid.Row="1" VerticalAlignment="Bottom" Width="170" Height="45"/> 
```

但是当在应用程序中运行或在设计中查看时，按钮保持空白，上面没有文字。

资源设置如下：

![在此处输入图像描述](../Images/e99a5f2b744c66e7b2360ad78a29a2b3.png)

它正在很好地填写翻译文件：

![在此处输入图像描述](../Images/156c08cb035b9d52b87a329bbadf3e17.png)

我可以使用上面链接中的代码在 C# 中翻译它，只是不使用 XAML。

只是想知道是否有人可以帮助我或指出正确的方向来解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:26:35.020

首先，我认为您的资源名称中缺少的是您要设置的属性。虽然我自己从未使用过它，但我会这样理解：

您的 xml 需要更改为

```
<local:WatermarkTextbox x:Name="TitleTextBox" x:Uid="MainPage_EnterATitle" Watermark="" ... Style="{StaticResource TextBoxStyle1}" /> 
```

您的资源需要一个带有密钥的条目

```
MainPage_EnterATitle.Watermark 
```

关于与

> MediumButton.[使用：Windows.UI.Xaml.Automation]AutomationProperties.Name

这仅在引用的属性是附加属性时使用。就像您的 Watermark 属性将附加而不是控件的一部分一样。但在你的情况下它并不重要。

# c++ - C++11：正确的 std::array 初始化？

> ID：14178264
> 
> 赞同：76
> 
> 时间：2013-01-06T01:10:32.190
> 
> 标签：c++, arrays, c++11, initialization, c++14

如果我按如下方式初始化 std::array，编译器会给我一个关于缺少大括号的警告

```
std::array<int, 4> a = {1, 2, 3, 4}; 
```

这解决了问题：

```
std::array<int, 4> a = {{1, 2, 3, 4}}; 
```

这是警告信息：

```
missing braces around initializer for 'std::array<int, 4u>::value_type [4] {aka int [4]}' [-Wmissing-braces] 
```

这只是我的 gcc 版本中的一个错误，还是故意这样做的？如果是这样，为什么？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-01-06T01:13:34.603

这是的裸实现`std::array`：

```
template<typename T, std::size_t N>
struct array {
    T __array_impl[N];
}; 
```

它是一个聚合结构，其唯一数据成员是传统数组，因此内部`{}`用于初始化内部数组。

在聚合初始化的某些情况下允许大括号省略（但通常不推荐），因此在这种情况下只能使用一个大括号。请参见此处：[数组的 C++ 向量](https://stackoverflow.com/questions/6041459/c-vector-of-arrays)

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2013-01-06T01:17:20.883

根据[cppreference](http://en.cppreference.com/w/cpp/container/array)。`=`仅当省略时才需要双括号。

```
// construction uses aggregate initialization
std::array<int, 3> a1{ {1,2,3} };    // double-braces required
std::array<int, 3> a2 = {1, 2, 3}; // except after =
std::array<std::string, 2> a3 = { {std::string("a"), "b"} }; 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2020-04-22T17:24:27.553

**C++17`std::array`类模板参数推导（CTAD）**

这个[新的 C++17 特性](https://en.cppreference.com/w/cpp/language/class_template_argument_deduction)被[标准库使用](https://en.cppreference.com/w/cpp/container/array/deduction_guides)，现在允许我们省略模板类型，以便以下工作：

主文件

```
#include <array>

int main() {
    std::array a{1, 2, 3};
} 
```

代替`std::array<int, 3> a{1, 2, 3};`

经测试：

```
g++ -ggdb3 -O0 -std=c++17 -Wall -Wextra -pedantic -o main.out main.cpp 
```

`-std=c++14`例如，如果我们设置，它无法编译：

```
error: missing template arguments before ‘a’ 
```

另请参阅：[推断 std::array 大小？](https://stackoverflow.com/questions/39933567/deduce-stdarray-size)

在 Ubuntu 18.04、GCC 7.5.0 上测试。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-07-28T03:16:04.703

CWG 1270 之前的 C++11 中需要双括号（修订后的 C++11 和 C++14 及更高版本中不需要）：

```
// construction uses aggregate initialization
std::array<int, 3> a1{ {1, 2, 3} }; // double-braces required in C++11 prior to the CWG 1270 revision
                                    // (not needed in C++11 after the revision and in C++14 and beyond)
std::array<int, 3> a2 = {1, 2, 3};  // never required after = 
```

[标准::数组引用](https://en.cppreference.com/w/cpp/container/array)

# objective-c - 如何监听 cocos2d-x 鼠标和键盘事件？

> ID：14178265
> 
> 赞同：1
> 
> 时间：2013-01-06T01:10:44.073
> 
> 标签：objective-c, keyboard, mouse, cocos2d-x

我正在运行他们示例的 proj.mac 版本（随 cocos2d-x 文件一起提供）。

我看到 Mac 版本有 EAGLView.mm，它有：

```
- (void)mouseMoved:(NSEvent *)theEvent
{
  DISPATCH_EVENT(theEvent, _cmd);
} 
```

我确保在 AppController.mm 中启用鼠标移动事件：

```
[window setAcceptsMouseMovedEvents:YES]; 
```

我可以看到它在那里，但我想要找出的是如何让我的自定义**CCLayer** “注册/监听”鼠标和键盘事件。

cocos2d-x 论坛提到他们的**TestCase文件夹中有一个****KeyboardTest**，但我只能找到一个**KeypadTest**，它的作用不大。还有一些例子提到**了 CCKeyboardDispatcher**，这是无处可寻的。

 ******提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:29:19.647

我想他们可能在谈论这个补丁：[https ://github.com/cocos2d/cocos2d-x/pull/1849/commits](https://github.com/cocos2d/cocos2d-x/pull/1849/commits)

它还没有进入主线。如果您直接应用它，您会遇到一些补丁拒绝，您需要手动将新的 CCKeyboard* 文件添加到您的 XCode 项目（构建阶段）。

我只是推动了我所做的更改以使其编译（并让 KeyboardTest 在示例目录中运行）：

[https://github.com/therealdpk/cocos2d-x/](https://github.com/therealdpk/cocos2d-x/)

然而，大部分作品都不是我创作的。我也不知道我是否能够保持这个状态，所以最好将它作为一个起点。******

# merge - Stata 合并改变了我的价值观？

> ID：14178267
> 
> 赞同：3
> 
> 时间：2013-01-06T01:11:10.237
> 
> 标签：merge, stata

我觉得我在这里遗漏了一些非常基本的东西......
我正在尝试合并 Stata、FranceSQ.dta 和 FranceHQ.dta 中的两个数据集。它们都有一个我创建的名为“uid”的变量，用于唯一标识观察结果。

```
use FranceSQ, clear
merge 1:1 uid using FranceHQ, gen(_merge) keep(match) 
```

现在让我感到困惑的是，它告诉我 uid 并不能唯一地识别我的观察结果。我意识到发生的事情是，当我打开 FranceSQ 时，一切正常，当我查看我的 uid 变量时，我有以下值......

```
25010201
25010202
25010203
... 
```

但是一旦我尝试运行合并，它就会改变我所有的值，所以我看到......

```
2.50101e+10
2.50101e+10
2.50101e+10
... 
```

任何帮助将不胜感激......我确信有一个简单的答案，但它目前正在躲避我。

***********编辑******* *****
所以尼克的建议很有帮助，谢谢！这就是我做错了，所以我想知道是否有人可以指出为什么它不起作用。*****

 *****1）我通过连接两个数值变量在每个数据集中创建了 uid 变量，这将 uid 变量转换为字符串。
2）我在整个数据集上运行了 destring（因为有很多不正确的转换变量），这将 uid 变成了一个 double。
3）然后我将 uid 重铸为字符串。正是由于这个原因，我无法进行初始合并。我注意到它将我的所有观察结果更改为数据集中的最后一个值。
4) 仅仅因为我在调整，我将 uid 变量重铸为双精度，并且得到了相同的结果。

现在我终于通过重新开始而不是首先将 uid 变量重新转换为字符串来让它工作，但我仍然不知道为什么我以前的努力没有奏效，或者合并命令实际上是如何决定的改变我的价值观。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T09:53:49.630

很可能，这是一个精度问题。长整数需要保存在`long`或`double`数据类型中。您可能需要`recast`在`merge`.

您应该通过查看两个数据集中`describe`是否`uid`具有相同数据类型的结果来检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T17:16:48.853

1.  要检查您的变量是否真正识别观察结果，请键入`isid uid`。无论如何， Stata`uid`在执行时会抱怨 if is not a unique identifier `merge`，但这本身就是一个有用的检查。如果`uid`在两个文件中都通过了检查，它仍然应该在合并文件中这样做；它必须在至少一个源文件中失败才能在合并文件中失败。
2.  除了尼克考克斯关于[数据类型](http://stata.com/help.cgi?data%20types)的回答之外，问题可能只是格式化。键入`describe uid`以找出当前格式是什么，并可能`format uid %12.0f`摆脱科学记数法。
3.  我认为 Stata 在需要时将变量提升为更准确的格式，例如当您`replace`使用具有非整数值的整数值变量时；`merge`当您在一个数据集中说出`byte`值并且合并`float`来自另一个数据集中的同一变量的值时，也会发生同样的事情。
4.  中的缺失值`uid`可能是 Stata 认为该变量不能正常工作的原因。在之前和之后也检查这些`merge`（请参阅`help data types`上面关于每种类型的有效范围的引用）。*****

# ios - ios 6将整数分配给tableview中的多个单元格

> ID：14178269
> 
> 赞同：0
> 
> 时间：2013-01-06T01:11:20.557
> 
> 标签：ios, integer, tableview, cells

我有一个表格，我想在其中为每个单击的单元格分配一个整数。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath

UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];

Information *detailViewController = [storyboard instantiateViewControllerWithIdentifier:@"Information1"]; 
```

这将检查单元格文本是否等于“player1”并为其分配一个整数，并将标题传递给下一个视图控制器。

```
if([[playersearch objectAtIndex:indexPath.row]isEqual:@"John"]){

    detailViewController.infoInt=0;

    [detailViewController setTitle:[playersearch objectAtIndex:indexPath.row]];

}

if([[playersearch objectAtIndex:indexPath.row]isEqual:@"Mark"]){

    detailViewController.infoInt=1;

    [detailViewController setTitle:[playersearch objectAtIndex:indexPath.row]];

}

if([[playersearch objectAtIndex:indexPath.row]isEqual:@"Fred"]){

    detailViewController.infoInt=2;

    [detailViewController setTitle:[playersearch objectAtIndex:indexPath.row]];

}

if([[playersearch objectAtIndex:indexPath.row]isEqual:@"Matt"]){

    detailViewController.infoInt=3;

    [detailViewController setTitle:[playersearch objectAtIndex:indexPath.row]];

}

if([[filteredSearch objectAtIndex:indexPath.row]isEqual:@"Javier"]){

    detailViewController.infoInt=3;

    [detailViewController setTitle:@"player 4"];

}

if([[playersearch objectAtIndex:indexPath.row]isEqual:@"Andreas"]){

    detailViewController.infoInt=4;

    [detailViewController setTitle:[playersearch objectAtIndex:indexPath.row]];

}

if([[playersearch objectAtIndex:indexPath.row]isEqual:@"Lionel"]){

    detailViewController.infoInt=5;

    [detailViewController setTitle:[playersearch objectAtIndex:indexPath.row]];

}

[self.navigationController pushViewController:detailViewController animated:YES]; 
```

对于我的应用程序，这必须完成大约 200 次，我想知道是否有一种方法可以简化我的代码。顺便说一句，我有一个包含所有玩家姓名的财产清单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T05:09:55.010

从您的数组创建一个字典数组会更有效，因此它看起来像这样：

```
({@"player":@"John", @"num":@0},{@"player":@"Mark", @"num":@1},{@"player":@"Fred", @"num":@3}, etc} 
```

然后你只需要 2 行而不需要 if 语句：

```
 detailViewController.infoInt= playersearch[indexPath.row][@"num"];
   [detailViewController setTitle:playersearch[indexPath.row][@"player"]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T15:37:22.460

如果分配的整数等于单元格索引。你为什么不这样做：

```
[detailViewController setInfoInt:indexPath.row];
[detailViewController setTitle:[playersearch objectAtIndex:indexPath.row]];
[self.navigationController pushViewController:detailViewController animated:YES]; 
```

# ruby - 红宝石中的 $~ 是什么

> ID：14178273
> 
> 赞同：1
> 
> 时间：2013-01-06T01:12:08.890
> 
> 标签：ruby, octopress

我刚刚开始接触 ruby​​ 并且很难弄清楚 $~ 在这行代码中代表什么（来自 Octopress 源）：

```
@img = attributes.reduce({}) { |img, attr| img[attr] = $~[attr].strip if $~[attr]; img } 
```

更新：它可以是 last-accessed object/array 的简写吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T01:16:14.440

当前范围内最后一个正则表达式的 MatchData。

[http://ruby.wikia.com/wiki/Special_variable#List_of_special_variables](http://ruby.wikia.com/wiki/Special_variable#List_of_special_variables)

# javascript - 如何使用javascript根据字符数拆分字符串

> ID：14178275
> 
> 赞同：0
> 
> 时间：2013-01-06T01:12:12.160
> 
> 标签：javascript

我正在尝试将一个字符串拆分为不同的块，然后将其放在 div 中。这是我的代码：

```
var simple = '<?php echo $hallo; ?>';     
var $div = $('#mybook');

if ($div.text().length > 50) {
    var limit = simple.lenght = 10;
    $(simple.split(limit)).each(function() {
        $('#mybook').append('<div>'+this+'</div>')
    });
} 
```

谢谢，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T01:19:38.507

这样的事情应该做的工作：

```
<script type="text/javascript">
var simple = '<?php echo $hallo; ?>';
var $div = $('#mybook');
if($div.text().length > 50) {
    var limit = simple.lenght = 10;
    var regex = new RegExp('.{1,'+limit+'}','g')
    $(simple.match(regex)).each(function(key,val){
        $('#mybook').append('<div>'+val+'</div>')
    })
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T01:22:30.077

只是用正则表达式分割你的字符串，而不是`split`

```
$(simple.match('/.{'+limit+'}|.{,'+(limit-1)+'}$/g')).each(function() {

    $('#mybook').append('<div>'+this+'</div>')

}); 
```

# scala - IntelliJ，分析 Scala 代码

> ID：14178277
> 
> 赞同：2
> 
> 时间：2013-01-06T01:12:28.783
> 
> 标签：scala, intellij-idea, static-analysis

当我`IntelliJ`用来分析（`Analyze->Inspect code`）我的`Java`代码时，恰好有一个未使用的方法，它们被标记。同样的行为似乎不会发生在`Scala`.

例如，`IntelliJ`发现没有问题

```
 object Main {

       def main(args: Array[String]) {
       }

       private def max(a: Int, b: Int) = {   // <---- unused
         if (a > b) a else b
       }
    } 
```

![在此处输入图像描述](../Images/5e81d47ee4d87119f2b88e2e99197681.png)

我可以以某种方式启用此（和其他）检查吗？请问我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T01:21:06.173

我认为 IntelliJ 不将其设置为未使用是合适的，因为该`max`方法被定义为公共方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T01:34:34.030

据我所知，IDEA 的 Scala 插件没有检查未使用的方法（甚至是私有方法）。

对于 Java，IDEA 有“未使用的声明”：

> 此检查报告指定检查范围内未使用或无法从入口点访问的类、方法或字段。

不幸的是，Scala 唯一相关的检查是“未使用的符号”。

我能找到的唯一相关问题是[SCL-3121](http://youtrack.jetbrains.com/issue/SCL-3121)。您可以在问题跟踪器上添加功能请求以突出显示未使用的方法。

# objective-c - MapKit 注释引脚

> ID：14178279
> 
> 赞同：2
> 
> 时间：2013-01-06T01:12:57.300
> 
> 标签：objective-c, ios, mkmapview, mapkit, mkannotation

> **可能重复：**
> [如何在 MKMapView 上捕获点击手势](https://stackoverflow.com/questions/4317810/how-to-capture-tap-gesture-on-mkmapview)

我正在构建一个`MKMapView`应用程序，但我有一个疑问！为了`Annotation Point`在地图上放一个，用户必须在地图上按住手指几秒钟，有人知道怎么做吗？之后，他将能够添加信息。

希望任何人都可以帮助我！

谢谢，新年快乐！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:28:24.497

您只需添加一个`UITapGestureRecognizer` 到您的`UIView`和目标操作，添加代码到 drop `annotation`！对@Pfitz 评论的编辑“它不是“可能的”-“它与[如何在 MKMapView 上捕获点击手势](https://stackoverflow.com/questions/4317810/how-to-capture-tap-gesture-on-mkmapview)完全相同”

尝试那里发布的明确答案！问候

# oauth-2.0 - Google OAuth2 返回“invalid_grant” - 签署 JWT 问题

> ID：14178280
> 
> 赞同：4
> 
> 时间：2013-01-06T01:12:58.823
> 
> 标签：oauth-2.0, google-oauth

我有一个 OAuth2 java 客户端（用于服务器到服务器应用程序），它试图创建一个 JWT，然后使用私钥（来自 Google API 控制台）进行签名 - 按照这些页面[https://developers.google.com/accounts/文档/OAuth2ServiceAccount](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)。但是，谷歌 OAuth2 不断返回“无效授权”。

这是客户端代码：

```
 import java.io.BufferedInputStream;
    import java.io.File;
    import java.io.FileInputStream;
    import java.io.IOException;

    import java.security.InvalidKeyException;
    import java.security.KeyFactory;
    import java.security.KeyStore;
    import java.security.KeyStoreException;
    import java.security.NoSuchAlgorithmException;
    import java.security.PrivateKey;
    import java.security.Signature;
    import java.security.SignatureException;
    import java.security.UnrecoverableKeyException;
    import java.security.cert.CertificateException;
    import java.security.interfaces.RSAPrivateKey;
    import java.security.spec.InvalidKeySpecException;
    import java.security.spec.PKCS8EncodedKeySpec;

    import java.text.MessageFormat;

    import org.apache.commons.codec.binary.Base64;

    public class WebToken
    {  
      private String iss;
      private String prn;
      private String scope;
      private String aud;
      private long exp;
      private long iat;
      private String keystoreLoc;
      private String keyAlias;
      private String password;

      public WebToken(String iss, String prn, String scope, String aud, long exp, long iat, String p12file, String keyAlias, String password)
      {
        super();
        this.iss = iss;
        this.prn = prn;
        this.scope = scope;
        this.aud = aud;
        this.exp = exp;
        this.iat = iat;
        this.keystoreLoc = p12file;
        this.keyAlias = keyAlias;
        this.password = password;
      }

      public static String encodeBase64(byte[] rawData)
      {
        byte[] data = Base64.encodeBase64(rawData);

        return new String(data);
      }

      public String getToken()
        throws Exception
      {
        String header = "{\"alg\":\"RS256\",\"typ\":\"JWT\"}";
        //String header = "{\"alg\":\"RS256\"}";
        String claimTemplate = "'{'\"iss\": \"{0}\", \"prn\": \"{1}\", \"scope\": \"{2}\", \"aud\": \"{3}\", \"exp\": {4}, \"iat\": {5}'}'";

        StringBuffer token = new StringBuffer();

        //Encode the JWT Header and add it to our string to sign
        token.append(encodeBase64(header.getBytes("UTF-8")));

        //Separate with a period
        token.append(".");

        //Create the JWT Claims Object
        String[] claimArray = new String[6];
        claimArray[0] = this.iss;
        claimArray[1] = this.prn;
        claimArray[2] = this.scope;
        claimArray[3] = this.aud;
        claimArray[4] = "" + this.exp;
        claimArray[5] = "" + this.iat;

        MessageFormat claims = new MessageFormat(claimTemplate);
        String payload = claims.format(claimArray);
        print(payload);

        //Add the encoded claims object
        token.append(encodeBase64(payload.getBytes("UTF-8")));

        //Load the private key
        PrivateKey privateKey = getPrivateKey(keystoreLoc, password);
        byte[] sig = signData(token.toString().getBytes("UTF-8"), privateKey);
        String signedPayload = encodeBase64(sig);

        //Separate with a period
        token.append(".");

        //Add the encoded signature
        token.append(signedPayload);

        return token.toString();
      }

      private PrivateKey getPrivateKey(String keyFile, String password)
        throws KeyStoreException, IOException, NoSuchAlgorithmException, CertificateException, UnrecoverableKeyException
      {
        KeyStore keystore = KeyStore.getInstance("PKCS12");
        keystore.load(new FileInputStream(keyFile), password.toCharArray());
        PrivateKey privateKey = (PrivateKey) keystore.getKey(keyAlias, password.toCharArray());

        return privateKey;
      }

      public byte[] signData(byte[] data, PrivateKey privateKey)
        throws InvalidKeyException, SignatureException, NoSuchAlgorithmException
      {
        Signature signature = Signature.getInstance("SHA256withRSA");
        signature.initSign(privateKey);
        signature.update(data);
        return signature.sign();
      }

      public static void print(String msg)
      {
        System.out.println(msg);
      }

      public static void main(String[] args)
        throws Exception
      {
        String iss = "????????@developer.gserviceaccount.com";
        String prn = "xxx@gmail.com";
        String scope = "https://www.googleapis.com/auth/urlshortener";
        String aud = "https://accounts.google.com/o/oauth2/token";
        long iat =  System.currentTimeMillis()/1000 - 60;
        long exp =  iat + 3600;
        String keystoreLoc = "D:\\OAuth2\\google_sURL\\pkey1.p12";
        String keyAlias = "privatekey";
        String pwd = "notasecret";

        WebToken jwt = new WebToken(iss, prn, scope, aud, exp, iat, keystoreLoc, keyAlias, pwd);
        String token = jwt.getToken();
        print(token);
        // urn:ietf:params:oauth:grant-type:jwt-bearer
        print("curl -vSs -X POST -d \"grant_type=urn%3Aietf%3Aparams%3Aoauth%3Agrant-type%3Ajwt-bearer&assertion=" + token + 
              "\" -k https://accounts.google.com/o/oauth2/token");
      }
} 
```

然后使用 curl 获取访问令牌： curl -k -vSs -X POST -d "grant_type=urn%3Aietf%3Aparams%3Aoauth%3Agrant-type%3Ajwt-bearer&assertion=" [https://accounts.google.com/o/ oauth2/令牌](https://accounts.google.com/o/oauth2/token)

```
 < HTTP/1.1 400 Bad Request
    < Cache-Control: no-cache, no-store, max-age=0, must-revalidate
    < Pragma: no-cache
    < Expires: Fri, 01 Jan 1990 00:00:00 GMT
    < Date: Sun, 06 Jan 2013 01:02:21 GMT
    < Content-Type: application/json
    < X-Content-Type-Options: nosniff
    < X-Frame-Options: SAMEORIGIN
    < X-XSS-Protection: 1; mode=block
    < Server: GSE
    < Transfer-Encoding: chunked
    <
    {
      "error" : "invalid_grant"
    } 
```

知道出了什么问题吗？

==============================

最后我自己发现了问题：

1）在 JWT 中，不要设置“prn”（但您可能需要根据要求）

2）使用“@developer.gserviceaccount.com”作为“iss”

这是更新的代码：

```
 import java.io.FileInputStream;
    import java.io.IOException;

    import java.security.InvalidKeyException;
    import java.security.KeyStore;
    import java.security.KeyStoreException;
    import java.security.NoSuchAlgorithmException;
    import java.security.PrivateKey;
    import java.security.Signature;
    import java.security.SignatureException;
    import java.security.UnrecoverableKeyException;
    import java.security.cert.CertificateException;

    import java.text.MessageFormat;

    import org.apache.commons.codec.binary.Base64;

    public class WebToken
    {  
      private String iss;
      private String scope;
      private String aud;
      private long exp;
      private long iat;
      private String keystoreLoc;
      private String keyAlias;
      private String password;

      public WebToken(String iss, String scope, String aud, long exp, long iat, String p12file, String keyAlias, String password)
      {
        super();
        this.iss = iss;
        this.scope = scope;
        this.aud = aud;
        this.exp = exp;
        this.iat = iat;
        this.keystoreLoc = p12file;
        this.keyAlias = keyAlias;
        this.password = password;
      }

      /**
       * Performs base64-encoding of input bytes.
       *
       * @param rawData * Array of bytes to be encoded.
       * @return * The base64 encoded string representation of rawData.
       */
      public static String encodeBase64(byte[] rawData)
      {
        String data = Base64.encodeBase64URLSafeString(rawData);

        return data;
      }

      public String getToken()
        throws Exception
      {
        String header = "{\"alg\":\"RS256\",\"typ\":\"JWT\"}";
        String claimTemplate = "'{'\"iss\": \"{0}\", \"scope\": \"{1}\", \"aud\": \"{2}\", \"exp\": {3}, \"iat\": {4}'}'";
        StringBuffer token = new StringBuffer();

        //Encode the JWT Header and add it to our string to sign
        token.append(encodeBase64(header.getBytes("UTF-8")));

        //Separate with a period
        token.append(".");

        //Create the JWT Claims Object
        String[] claimArray = new String[6];
        claimArray[0] = this.iss;
        claimArray[1] = this.scope;
        claimArray[2] = this.aud;
        claimArray[3] = "" + this.exp;
        claimArray[4] = "" + this.iat;

        MessageFormat claims = new MessageFormat(claimTemplate);
        String payload = claims.format(claimArray);
        print(payload);

        //Add the encoded claims object
        token.append(encodeBase64(payload.getBytes("UTF-8")));

        //Load the private key
        PrivateKey privateKey = getPrivateKey(keystoreLoc, password);
        byte[] sig = signData(token.toString().getBytes("UTF-8"), privateKey);

        String signedPayload = encodeBase64(sig);

        //Separate with a period
        token.append(".");

        //Add the encoded signature
        token.append(signedPayload);

        return token.toString();
      }

      private PrivateKey getPrivateKey(String keyFile, String password)
        throws KeyStoreException, IOException, NoSuchAlgorithmException, CertificateException, UnrecoverableKeyException
      {
        KeyStore keystore = KeyStore.getInstance("PKCS12");
        keystore.load(new FileInputStream(keyFile), password.toCharArray());
        PrivateKey privateKey = (PrivateKey) keystore.getKey(keyAlias, password.toCharArray());

        return privateKey;
      }

      public byte[] signData(byte[] data, PrivateKey privateKey)
        throws InvalidKeyException, SignatureException, NoSuchAlgorithmException
      {
        Signature signature = Signature.getInstance("SHA256withRSA");
        signature.initSign(privateKey);
        signature.update(data);
        return signature.sign();
      }

      public static void print(String msg)
      {
        System.out.println(msg);
      }

      public static void main(String[] args)
        throws Exception
      {
        String iss = "<client id email>@developer.gserviceaccount.com";
        String scope = "https://www.googleapis.com/auth/urlshortener";
        String aud = "https://accounts.google.com/o/oauth2/token";
        long iat =  (System.currentTimeMillis()/1000)-60;
        long exp =  iat + 3600;
        String keystoreLoc = "<privatekey>.p12";
        String keyAlias = "privatekey";
        String pwd = "notasecret";

        WebToken jwt = new WebToken(iss, scope, aud, exp, iat, keystoreLoc, keyAlias, pwd);
        String token = jwt.getToken();
        print(token);
        print("\\curl\\curl -vSs -X POST -H \"Content-Type: application/x-www-form-urlencoded\"" + 
              " -d \"grant_type=urn%3Aietf%3Aparams%3Aoauth%3Agrant-type%3Ajwt-bearer&assertion=" + token +    
              "\" -k https://accounts.google.com/o/oauth2/token");
      }
    } 
```

# asp.net - IIS - 添加网站：HTTP 错误 401.3 - 未经授权的访问

> ID：14178287
> 
> 赞同：0
> 
> 时间：2013-01-06T01:13:55.997
> 
> 标签：asp.net, iis, iis-7

我在我的 IIS 管理器上添加了一个网站，并在 Binding 部分为其分配了端口 90。当我尝试在浏览器上访问它时，我收到以下错误

```
HTTP Error 401.3 - Unauthorized
You do not have permission to view this directory or page because of the access control    list (ACL) configuration or encryption settings for this resource on the Web server. 
```

我已经向`IIS_IUSRS`web.config 文件、包含文件的文件夹以及 IIS 管理器上的站点添加了一个新用户，并为其授予了所有权限。

但是，此错误不会消失。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T01:17:18.703

在您的应用文件夹中授予对**网络服务帐户的访问权限**

# c++ - C ++使用指针反转字符串中单词的顺序

> ID：14178294
> 
> 赞同：0
> 
> 时间：2013-01-06T01:14:55.747
> 
> 标签：c++, string, pointers, reverse

这是我尝试输入，然后以相反的顺序产生单词的输出。注意：我只能使用指针。

```
 Input: What is your name? 
    Output: name? your is What 
```

我查看了此处发布的其他解决方案，并试图尽可能多地实施它们，但我一直遇到问题。目前它只显示该行的第一个字母。我将不胜感激任何帮助解决它！

```
#include <iostream>
using namespace std;

#include <cstring>

int main( )
{
    char input[255] = {' '};
    char *head, *tail;
    char temp; 
    int i = 0; 

    cin >> input;

    head = input;
    tail = input;

    while(*tail!='\0')
    {
        tail++;
    }

    while (tail <= head){
        temp = *head;
        *head=*tail;
        *tail=temp;

        *head++;
        *tail--;
    }

    cout << input;
    cout << endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T01:47:57.817

尝试这个。没有任何参考 STL。

```
#include <iostream>
#include <cstring>
using namespace std;
int main(int argc, char **argv)
{
    char input[255];
    char *head; // head of a word.
    char *tail; // tail of a word.
    cin.getline(input, 255); // read a whole line.
    tail = input + strlen(input) - 1; // if you can use <cstring>?
    while (tail >= input) {
        if (*tail == 0 || *tail == ' ') {
            tail--; // move to the tail of a word.
        } else {
            tail[1] = 0;
            head = tail;
            while (head >= input) {
                if (head == input || *(head - 1) == ' ') {
                    cout << head << " "; // output a word.
                    tail = head - 1; // seek the next word.
                    break;
                }
                head--; // move to the head of a word.
            }
        }
    }
    cout << endl;
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T01:18:58.587

像这样的伪代码怎么样：

```
read_input_into_string();
trim_leading_and_trailing_whitespace();
convert_multiple_whitespace_in_string_to_single_space();

for (char* current_string_ptr = find_end_of_string();
     current_string_ptr > start_of_input;
     current_string_ptr--)
{
    if (*current_string_ptr == ' ')
    {
        // +1 because `current_string_ptr` is at the space,
        // and we want to print the word without leading spaces
        std::cout << (current_string_ptr + 1) << ' ';

        // Terminate string at the space
        *current_string_ptr = '\0';
    }
} 
```

它不完整（即不会打印输入中的第一个单词），但我将其作为练习留给读者。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-15T09:15:24.297

低级：

```
void reverseStr(const char* str, char* szBuffer)
{
    int j = strlen(str) - 1, i = j, k = 0;
    if(j < 0)
        return;
    while(j >= 0){
        if(j-1 < 0 || *(str+j-1) == ' '){
            strncpy(szBuffer+k, str+j, i-j+1);
            szBuffer[k+i-j+1] = ' ';
            k += i-j+2;
            i = j-2;
            j -= 2;
        }
        else{
            --j;
        }
    }
    szBuffer[k-1] = '\0';
}

int main(int argc, char** argv)
{
    const char* str = "this is a string?";

    char szBuffer[256];
    reverseStr(str, szBuffer);

    std::cout << szBuffer;

} 
```

# javascript - Javascript 和 AJAX 的问题 - 选择表单的事件侦听器在更改时不起作用？

> ID：14178296
> 
> 赞同：1
> 
> 时间：2013-01-06T01:15:02.563
> 
> 标签：javascript, ajax, forms, xmlhttprequest, addeventlistener

我对javascript相当陌生，我正在构建一个基本网站，有人可以通过一个小型汽车数据库搜索该网站，当用户选择搜索条件时，它会更新搜索结果。

我试图通过在我的 html 中创建一个带有多个选择（CODE 1）的表单，以及带有用于选择的事件侦听器的 javascript 和通过 PHP 文件搜索数据库（CODE 2）的 ajax 来做到这一点。

代码 1 - HTML

```
<div class="intro">
        <p>Enter your search criteria:</p>

            <div id="formbox">
                <form>
                    <!-- MAKE SELECTION -->
                    <select name="make" id="selectmake">
                    <option value="test">Car Make:</option>
                    <option value="Aston Martin">Aston Martin</option>
                    <option value="Ford">Ford</option>
                    <option value="Lotus">Lotus</option>
                    <option value="Vauxhall">Vauxhall</option>
                    </select>&emsp;

                    <!-- MODEL SELECTION -->
                    <select name="model" id="selectmodel">
                    <option value="">Car Model:</option>
                    <option value="DB9 Coupe">DB9 Coupe</option>
                    <option value="Vanquish">Vanquish</option>
                    <option value="Fiesta Hatchback">Fiesta Hatchback</option>
                    <option value="Focus Hatchback">Focus Hatchback</option>
                    <option value="Mondeo Estate">Mondeo Estate</option>
                    <option value="Elise">Elise</option>
                    <option value="Exige">Exige</option>
                    <option value="Astra Hatchback">Astra Hatchback</option>
                    <option value="Corsa D">Corsa D</option>
                    <option value="Frontera 4x4">Frontera 4x4</option>
                    </select>&emsp;

                    <!-- YEAR SELECTION -->
                    <select name="year" id="selectyear">
                    <option value="">Car Year:</option>
                    <option value="1998">1998</option>
                    <option value="2000">2000</option>
                    <option value="2001">2001</option>
                    <option value="2004">2004</option>
                    <option value="2007">2007</option>
                    <option value="2009">2009</option>
                    <option value="2010">2010</option>
                    </select>&emsp;

                    <!-- CC SELECTION -->
                    <select name="cc" id="selectcc">
                    <option value="">Car CC:</option>
                    <option value="1250">1250</option>
                    <option value="1400">1400</option>
                    <option value="1600">1600</option>
                    <option value="1800">1800</option>
                    <option value="2000">2000</option>
                    <option value="3200">3200</option>
                    <option value="5900">5900</option>
                    <option value="6000">6000</option>
                    </select>&emsp;

                    <!-- COLOUR SELECTION -->
                    <select name="colour" id="selectcolour">
                    <option value="">Car Colour:</option>
                    <option value="Black">Black</option>
                    <option value="Blue">Blue</option>
                    <option value="Red">Red</option>
                    <option value="Silver">Silver</option>
                    </select>&emsp;

                    <!-- RESET SELECTIONS -->
                    <input type="reset" />
                </form>
            </div>
        </div>

        <!-- SEARCH RESULTS -->
        <div id="results">
            Your results will be displayed here
        </div> 
```

代码 2 - JAVASCRIPT 文件

```
function initialise() {
//assign selection fields to variables
var i=0;
var make=document.getElementById("selectmake");
make.addEventListener('change', setmake(this.value), false);
var model=document.getElementById("selectmodel");
model.addEventListener('change', setmodel(this.value), false);
var year=document.getElementById("selectyear");
year.addEventListener('change', setyear(this.value), false);
var cc=document.getElementById("selectcc");
cc.addEventListener('change', setcc(this.value), false);
var colour=document.getElementById("selectcolour");
colour.addEventListener('change', setcolour(this.value), false);

//assign results area to a variable
var results=document.getElementById("results");

//setting search criteria to return all results by default
var makesearch="make=make";
var modelsearch="model=model";
var yearsearch="year=year";
var ccsearch="cc=cc";
var coloursearch="colour=colour";
results.innerHTML="initiate works";

//function to set the search to search make if set to an existent value
function setmake (makevar) {
    i=i+1;
    results.innerHTML=i;
    if (makevar.length>0) {
        makesearch="make='"+makevar+"'";
        results.innerHTML="EVENTIFFUNCTIONworks";
        constructsearch();
    }
}

function constructsearch() {
    var searchstring="WHERE "+makesearch+" AND "+modelsearch+" AND "+yearsearch+" AND "+ccsearch+" AND "+coloursearch;
    results.innerHTML="construct works";
    sendsearch(searchstring);
}
}

//function to update search results
function sendsearch(searchstring) {
//update search results with an XMLHttpRequest
if (window.XMLHttpRequest) {
  // code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
}
else {
  // code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}

xmlhttp.onreadystatechange=function() {
  if (xmlhttp.readyState==4 && xmlhttp.status==200) {
    document.getElementById("results").innerHTML="XMLworks";
    //xmlhttp.responseText;
  }
}

xmlhttp.open("GET","results.php?search="+searchstring,true);
xmlhttp.send();
}

window.onload=initialise; 
```

变量 'i' 已创建，它的所有用途都是用于测试......我原来的工作是这样的，当页面加载时，结果 div 将显示 'i' 变量，但是当在“制作”选择框中进行了新的选择。

由于某种原因，我的代码现在根本无法工作，甚至不会显示“启动工作”

任何帮助都非常感谢，并提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T01:38:02.567

`addEventListener`将函数作为第二个参数，因为您没有传递函数，而是调用函数。您可以使用匿名函数表达式来包装您在调用`addEventListener`. 对于你们中的每个人，请`addEventListener`执行以下操作

```
make.addEventListener('change', function(){
    setmake(this.value)
}, false); 
```

# c++ - 添加从 CDT 构建所需的库

> ID：14178299
> 
> 赞同：0
> 
> 时间：2013-01-06T01:15:16.330
> 
> 标签：c++, linux, eclipse-cdt

在我正在处理的项目中，我依赖于程序运行所必需的几个外部库。在我的本地机器上，它们可以在 usr/local/lib 中找到，一切都像一个魅力。

现在，当我构建我的版本时，我希望将这些库添加到构建中（我想最终得到我的可执行文件和所有必要的库）并配置它，这样当我从命令行运行程序时，它知道库是在库中。

我可以在本地机器上手动添加此文件夹中的所有库并配置我的项目，以便它可以在此处找到库，但是，即使使用变量，它仍然会插入本地路径，因此在其他机器上使用它不起作用。或者有没有办法从项目路径开始？

这可能使用 CDT 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T01:35:11.120

如果您使用项目文件夹的相对路径，那应该是完全可移植的，只要其他机器可以运行这样的库。例如，如果您的项目位于 中`/home/Fristi/project`，您可以将所有静态库复制到`./libs`（实际上指向`/home/Fristi/project/libs`并添加`./libs`到您的 makefile 或 CDT 配置中。

# javascript - 获取匿名函数名

> ID：14178305
> 
> 赞同：4
> 
> 时间：2013-01-06T01:16:35.500
> 
> 标签：javascript, function, variables, anonymous-function, names

在此示例中，如何从函数中获取变量名称：

```
// it should return A
var A = function(){ console.log(this.name); } 
```

有这样的事情吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-06T01:24:25.540

该函数是匿名的；它没有名字。但是，您可以为其命名：

`var A = function a() {};`

然后可以通过以下方式访问其名称[`Function.name`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/name)：

```
var A = function a() {};
A.name
> 'a' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-04T09:14:52.797

我知道这是一个旧线程，但仍在搜索结果中。所以仅供参考：

一个解决方案可能只是使用堆栈跟踪。

```
var stack = new Error().stack; 
```

使用修剪和拆分来获得所需的值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-06T01:19:04.440

不，Javascript 中没有类似的东西。该函数是匿名的，因此它没有名称，并且您想要的是模棱两可的，因为该函数可以很容易地拥有任意数量的变量来引用它，例如：

```
var a, b, c, d;
a = b = function(){ console.log(this.name); };
c = b;
d = c;
a = b = 5;
// a and b no longer refer to the function, but c and d both do 
```

你真正想要完成的是什么？我确信还有另一种方法可以实现它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-11T02:40:44.373

在 Chrome 和 Firefox 的最新版本中可能如下所示。我只推荐这个用于调试目的（例如非生产中的 javascript 跟踪）

```
var myNameInChrome = /.*Object\.(.*)\s\(/.exec(new Error().stack)[0];
var myNameInFF = new Error().stack.split("@")[0]; 
```

# jquery - 屏幕调整大小后启用样式表？无法在 IE 和 Chrome 中运行

> ID：14178308
> 
> 赞同：1
> 
> 时间：2013-01-06T01:17:37.880
> 
> 标签：jquery

```
var $ = jQuery.noConflict();
$(document).ready(function() {
if ((screen.width>=1024)) {
$('link[title=theme800]')[0].disabled=true;
$('link[title=theme]')[0].disabled=false;
}
if ((screen.width<1024)) {
$('link[title=theme]')[0].disabled=true;
$('link[title=theme800]')[0].disabled=false;
}
}); 
```

我的html页面：

```
<link title = "theme" rel="stylesheet" type="text/css" media="all" href="theme.css" />
<link title = "theme800" rel="stylesheet" type="text/css" media="all" href="theme800.css" /> 
```

好的，我正在以不同的屏幕尺寸测试我的网站。出于某种原因，当我处于“<1024”模式时，第二个样式表（theme800）没有在 IE 和 Chrome 中加载，它适用于 Firefox。我确实给了一切标题和一切。同样，它在 Firefox 中有效，但在其他浏览器中无效。如何让它在其他浏览器中工作？帮助！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T01:29:33.113

根据您的情况使用 css 媒体查询可能会好得多

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T01:50:00.900

由于[CSS 媒体查询](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)尚未得到广泛支持，您还可以考虑动态加载样式表。基于[此示例](http://www.javascriptkit.com/javatutors/loadjavascriptcss.shtml)，您可以尝试：

```
<script type="text/javascript">
    function load_stylesheet(file_name) {
         // Create the stylesheet
        var css_file = document.createElement('link');
        css_file.setAttribute('rel', 'stylesheet');
        css_file.setAttribute('type', 'text/css');
        css_file.setAttribute('href', file_name);
         // Append the stylesheet to the document
        document.getElementsByTagName('head')[0].appendChild(css_file);
    }

    if (screen.width >= 1024) {
        load_stylesheet('theme.css');
    } else {
        load_stylesheet('theme800.css');
    }
</script> 
```

请注意，这不是故意使用 jQuery 完成的，因此可以尽快加载样式表，而无需等待 jQuery 先加载。否则，用户可能会出现明显的延迟，在此期间内容会显得空洞且没有样式。

# visual-studio - 从自定义项目模板执行 PowerShell 脚本

> ID：14178312
> 
> 赞同：3
> 
> 时间：2013-01-06T01:18:45.790
> 
> 标签：visual-studio, powershell, visual-studio-2012, nuget, project-template

我目前正在创建一个项目模板，我想知道在创建项目后是否可以执行 PowerShell 脚本（类似于 NuGet 包中的**install.ps1**）。

[在不实施我自己的IWizard](http://msdn.microsoft.com/en-us/library/ms233750.aspx)的情况下有机会做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T19:53:15.367

好的......我尝试了很多东西，但最后我最终使用了自定义 IWizard。

```
public class InitScriptWizard : IWizard
{
    public void RunStarted(
        object automationObject,
        Dictionary<string, string> replacementsDictionary,
        WizardRunKind runKind,
        object[] customParams)
    { }

    public void ProjectFinishedGenerating(Project project)
    {
        var script =
            project.ProjectItems.FindProjectItem(
                item => item.Name.Equals("init.ps1"));

        if (script == null)
        {
            return;
        }

        var process =
            System.Diagnostics.Process.Start(
                "powershell",
                string.Concat(
                    "-NoProfile -ExecutionPolicy Unrestricted -File \"",
                    script.FileNames[0],
                    "\""));

        //if (process != null)
        //{
        //    process.WaitForExit();
        //}

        //script.Delete();
    }

    public void ProjectItemFinishedGenerating(ProjectItem projectItem)
    { }

    public bool ShouldAddProjectItem(string filePath)
    {
        return true;
    }

    public void BeforeOpeningFile(ProjectItem projectItem)
    { }

    public void RunFinished()
    { }
} 
```

# php - PHP - 创建 MySQL 数据库和用户 - 代码不起作用

> ID：14178315
> 
> 赞同：0
> 
> 时间：2013-01-06T01:19:05.470
> 
> 标签：php, mysql

我正在开发一个不适合多租户的应用程序。所以我的计划是为每个客户帐户创建不同的 MySQL 数据库和用户。我遇到了问题，如果您能看到我的代码有什么问题，那就太好了 - 我没有收到任何错误，但**没有添加数据库/用户**。

```
$dsn = "mysql:host=localhost";
$pdo = new PDO($dsn,"REMOVED","REMOVED"); // I removed the login.

$username = 'testing';
$password = 'password';
$dbname   = 'test_table'; 

//Creation of user
$STH = $pdo->prepare("CREATE USER `:username` @'%' IDENTIFIED BY `:password`;");
$STH->execute(array(':username' => $username, ':password' => $password));

//Creation of database "new_db"
$STH = $pdo->prepare("CREATE DATABASE `:dbname`;");
$STH->execute(array(':dbname' => $dbname));

//Adding all privileges on our newly created database
 $STH = $pdo->prepare("GRANT ALL PRIVILEGES on `:dbname`.* TO `:username`@'%';");
 $STH->execute(array(':dbname' => $dbname,':username' => $username)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T01:35:09.287

我注意到你说你正在使用 cPanel。检查 phpMyAdmin 以查看您是否可以创建用户。如果选项卡可用，那么您的代码应该可以按预期工作。如果您没有看到，那么您可以在 phpMyAdmin config.inc.php 文件中检查您的配置选项。我不确定问题是否出在 cPanel 或 phpMyAdmin 上。至于您的代码，它在 Windows 上运行的 XAMPP 上 100% 运行，因此问题出在其他地方。对不起，我无法给出明确的答案！

# actionscript-3 - 在应用层连接IP，Adobe Air

> ID：14178316
> 
> 赞同：-1
> 
> 时间：2013-01-06T01:19:30.970
> 
> 标签：actionscript-3, flash, http, networking, air

我正在做一个关于“通过智能手机通过 wifi 控制嵌入式系统”的项目，

我在adobe Air上开发了我的应用程序，并在PIC微控制器上构建了我的系统以接受应用层（Http）上的连接，IP地址为192.168.20.60:80（从Web浏览器浏览时响应）。

我没有使用套接字通过端口 80 进行连接，而是使用 urlloader 读取 HTML 页面 (urlrequest("x.com"))。但是当我尝试连接到ip地址时出现IOexception，代码如下：

```
var PicPage:URLLoader=new URLLoader();
PicPage.load(new URLRequest("192.168.20.60")); //worked using DNS
lgn.addEventListener(Event.COMPLETE,ff);
    function ff(e:Event):void{
        var s:String=e.target.data;
        trace(s);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T09:56:42.633

正如 Pixel Elephant 所说，您需要在尝试联系的 IP 前加上 http://。不过，您不需要指定端口 80。

试试下面的代码：

```
var PicPage:URLLoader = new URLLoader();
PicPage.addEventListener(Event.COMPLETE, onLoaded);
PicPage.addEventListener(IOErrorEvent.IO_ERROR, onError);

PicPage.load(new URLRequest("http://192.168.20.60/"));

protected function onLoaded(e:Event):void {
    var s:String = e.target.data;
    trace(s)    
}
protected function onError(e:Event):void {
    // Handle the error in any way you'd like
} 
```

我自己多次使用过这段代码（及其变体），它对我很有帮助。

# c# - 重新连接到断开连接的 Excel COM 互操作实例

> ID：14178326
> 
> 赞同：1
> 
> 时间：2013-01-06T01:21:11.280
> 
> 标签：c#, excel, office-interop

我有一个使用 Excel COM 互操作将数据导出到 Excel 的第 3 方应用程序。他们的程序中有一个错误导致它在使 Excel 实例可见之前失败。但是，根据显示的堆栈跟踪，从发生异常的位置开始，我需要的信息已经写入 Excel 工作表。

有没有办法使用`Microsoft.Office.Interop.Excel`命名空间连接到**现有的**excel 实例而不是生成它自己的？或者有没有其他方法可以使孤立的 Excel 实例可见，以便我可以保存它完成的内容？

* * *

请注意，EXCEL.exe 在程序关闭后仍然在任务管理器中可见，因此在应用程序断开连接后实例仍然处于活动状态并运行。

* * *

**更多详细信息**：该程序正在做的是从它自己的（专有）数据库中导出报告，但是由于某种原因，数据库中的某些记录格式不正确，并导致`Integer Overflow`在生成报告时发生错误。查看堆栈跟踪，似乎这个整数溢出正在发生，同时它在报告末尾生成摘要。

对于我的用途，我不需要只需要报告中的行项目的摘要，所以我希望看到它到目前为止所做的工作，但`EXCEL.exe`它正在与之通信的实例是不可见的。

如果我在不同的日期范围内运行报告，则报告生成良好，只是一天中的一条记录会导致这组特定的输入导致它失败。

与应用程序提供商的支持合同已过期，管理层对更新它不感兴趣，因为我们正在切换到新供应商（这就是生成报告的原因，用作数据源数据转换）。所以我的任务是“修复它”，以便可以移动数据。

* * *

**最终更新**：我问这个问题的原因已经解决了。我能够通过程序本身浏览每条记录，我发现其中一个字段设置为 16274176.00 的记录（正常值在 100 中（不要问我为什么看起来是浮点数会导致`Integer Overflow`错误))，一旦我将其更改为 0.00，报告打印得很好。但是，我仍然想知道我的原始问题是否有答案，因为我认为这将是我工具箱中的一个有用工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T10:28:20.090

关于您的原始问题，我认为它实际上可能与此处提出的问题重复：[Get instance of Excel application with C# by Handle](https://stackoverflow.com/questions/1118735/get-instance-of-excel-application-with-c-sharp-by-handle)

给出的几个答案指向这篇博文：以编程方式[启动 Office 应用程序](http://blogs.msdn.com/b/andreww/archive/2008/11/30/starting-or-connecting-to-office-apps.aspx)，它为您提供了如何从托管代码连接到已经运行的 Office 应用程序的选项板。

博客文章以及给出的答案还包含示例代码来说明如何做到这一点。

# php - 如何从子类访问父变量

> ID：14178329
> 
> 赞同：0
> 
> 时间：2013-01-06T01:21:55.427
> 
> 标签：php, oop, class

我有两个类，一个是父类，另一个是扩展类，我需要在扩展类中使用主变量。例如

```
class parentClass
{
    $this->value = null
    function __construct()
    {
        echo "im parent" ;
    }

}
class childClass extends parentClass
{

    function sayIt()
    {
        var_dump($this->value);
    }
}

$p = new parentClass ; 
$p->value = 500 ; 

$c = new childClass ; 
$c->sayIt(); // this output null ! i want it to output 500 , how i can do that 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T01:24:19.530

这不是[继承](http://php.net/manual/en/language.oop5.inheritance.php)的工作方式。`childClass`不会自动连接到父类，它只是从它继承它只是从父类`parentClass`继承所有公共和受保护的变量/方法。它没有连接到父实例。

如果您希望它输出 500，则必须以某种方式将其分配给子类实例：

```
$c = new childClass ; 
$c->value = 500;
$c->sayIt() 
```

如果您需要在所有类和实例之间共享一个变量，您可以使用一个[`static`](http://php.net/manual/en/language.oop5.static.php)变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T01:30:12.517

***糟糕 糟糕 糟糕 代码严格用于教育目的，我建议你买一本关于面向对象编程基本原则的书***

使您的变量静态将使其可以通过子类访问

```
class parentClass {
    public static $value = null;

    function __construct() {
        echo "patent called";
    }
}
class childClass extends parentClass {

    function sayIt() {
        var_dump(self::$value);
    }
}

$p = new parentClass();
parentClass::$value = 500;

$c = new childClass();
$c->sayIt(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T01:24:55.407

您对类结构和引用感到困惑。

`$p`是父类的一个实例。

`$c`是子类的一个实例。

他们不分享他们的数据。

# python - Python ftplib 文件 open() 类型错误

> ID：14178332
> 
> 赞同：0
> 
> 时间：2013-01-06T01:22:38.167
> 
> 标签：python, ftp, typeerror, ftplib

我正在尝试使用 ftplib 将文件上传到带有 python 的 ftp 服务器。

这就是我所拥有的：

```
def ftp(cmd):

    cmd = cmd.split(' ')
    try: cmd[3]
    except: return 'host user password file (ftpdir)'
    try: session = ftplib.FTP(cmd[0],cmd[1],cmd[2])
    except: return 'wrong credentials/host'
    try: file = open(cmd[3], 'rb')
    except: return 'unable to reach file'
    try: cmd[4]
    except: pass
    else: 
        if cmd[4] !='':
            ftplib.FTP.cwd(ftpdir)
    name = file.split('\\')[-1]
    session.storbinary('STOR ' + name, file)     # send the file
    file.close()                                    # close file and FTP
    session.quit() 
```

我以“主机用户密码文件 ftpdir”的形式给函数一个命令，其中不需要 ftpdir。我得到的错误是这个：

```
Traceback (most recent call last):

  ...some lines of referring...

  File "C:\somedir\somefile.py", line 155, in ftp
    file = open(cmd[3],'rb')
TypeError: open() takes exactly 1 argument (2 given) 
```

如果我尝试使用给定的'cmd'作为python shell中的条目的命令“file = open（cmd [3]，'rb'）”它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T13:59:53.047

这个问题现在得到了解答。问题是我定义了另一个函数 open(arg) ，它只接受一个参数。更改该函数的名称后，一切正常。

感谢所有阅读本文的人的时间。

# javascript - 尝试使用钛应用加速器的 Titanium.UI.currentWindow 时未定义钛

> ID：14178333
> 
> 赞同：0
> 
> 时间：2013-01-06T01:22:50.950
> 
> 标签：javascript, html, titanium

当我在设备上运行应用程序时，我没有收到任何错误（完全没有发生任何事情），因为没有调试控制台，但是当我在浏览器中运行应用程序时，我得到“Titanium is not defined”

我需要包含一个 js 文件吗？

我从这里得到了相机代码：http: [//www.mindfiresolutions.com/Capture-Image-with-device-camera-in-IPhoneAndroid-application-using-Titanium-1912.php](http://www.mindfiresolutions.com/Capture-Image-with-device-camera-in-IPhoneAndroid-application-using-Titanium-1912.php)

我从 webview 的 html 文件中调用它。

我从头开始创建了一个新项目，我得到了同样的错误。这太令人沮丧了：

在 html 中：

```
<!doctype html>
<html lang="en">
    <head>

        <meta name="viewport" content="width=device-width;initial-scale=1.0 maximum-scale=1.0; user scalable=0;">

        <title>Notes</title>

        <script language="JavaScript" type="text/javascript">
            function play(locid) {
                Ti.App.fireEvent('play', {
                    locid : locid
                });
            }
        </script>

    </head>
    <body>

        <a id="Home" onclick ="play(125)" title = "" > hello </a>

    </body>

</html> 
```

在 app.js 中：

```
Ti.App.addEventListener('play', function(e) 
{ 
    alert(e.locid);

}); 
```

Uncaught ReferenceError: Ti 没有在 HTML 文件中定义！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T04:35:40.570

该代码有许多因素阻止它作为独立的 app.js 工作。我想解决它带来的几个问题，然后我将直接解决 app.js，这样您就可以继续前进了。

首先，“Ti.UI.currentWindow”是您在以下情况下获取对窗口的引用的方式：

在文件“app.js”中，您有：

```
var win = Ti.UI.createWindow({
    url: 'win.js'
});
win.open(); 
```

在“win.js”中，你有：

```
var win = Ti.UI.currentWindow;
win.add(Ti.UI.createLabel({
    text: 'Hello, world!', textAlign: 'center',
    color: '#000'
})); 
```

但是，这样构建您的应用程序不再是推荐的方法。如果您是从新开始，那就从 Alloy 开始吧。[http://docs.appcelerator.com/titanium/3.0/#!/guide/Alloy_Quick_Start](http://docs.appcelerator.com/titanium/3.0/#!/guide/Alloy_Quick_Start)

如果您真正关心的只是让示例正常工作，那么下面是更新后的代码：

```
//Define the current window
var myWin = Ti.UI.createWindow({
    backgroundColor: 'white'
});

//Define the button to activate camera
var cameraBtn = Ti.UI.createButton({
    title: 'Click to activate Camera',
    top: 10 //Set the button position on the screen
});

cameraBtn.addEventListener('click', function () {

    //Activate camera
    Ti.Media.showCamera({
        success: function (event) {

            //Holds the captured image
            var capturedImg = event.media;

            // Condition to check the selected media
            if (event.mediaType == Ti.Media.MEDIA_TYPE_PHOTO) {

                //Define an image view with captured image
                var imgView = Ti.UI.createImageView({
                    left: 10,
                    width: 250,
                    height: 250,
                    image: capturedImg   //Set captured image
                });

                //Add the image to window for displaying
                myWin.add(imgView);
            }
        },
        cancel: function () {
            //While cancellation of the process
        },
        error: function (error) {
            // If any error occurs during the process

        }
    });
});

myWin.add(cameraBtn);
myWin.open(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T14:12:32.413

在 WebView HTML 代码中使用“Titanium”而不是“Ti”。

# drupal - Drupal - 在页面内容类型中更改上传图像的位置

> ID：14178334
> 
> 赞同：1
> 
> 时间：2013-01-06T01:22:57.980
> 
> 标签：drupal, drupal-7

我在标准 Drupal 安装附带的基本页面内容类型中添加了一个图像上传字段。如果用户上传图片，我希望它作为横幅自动显示在页面顶部。问题是，图像只是添加到我页面的主要内容下方，标题为“**页面图像：”**

如何更改页面布局以便图像显示在我想要的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:14:43.167

首先，您必须从 admin/structure/types/manage/page/display 中隐藏图像字段，这是内容类型的管理显示页面。您可以通过在图像字段的格式列中选择“隐藏”选项来执行此操作。当您查看节点时，这将隐藏您的图像字段。

要在横幅区域显示图像字段，您可以创建块类型视图以仅显示基本页面内容类型的图像字段并将此块定位到横幅区域。这将在基本页面内容中显示所有图像。要仅显示当前查看的内容图像，您必须通过以下步骤应用上下文过滤器：

*   在编辑视图页面中单击上下文过滤器中的添加按钮并选择内容：Nid 选项并单击应用。
*   然后从“当过滤器值不可用”中选择“提供默认值”，在“类型”字段中选择“来自 URL 的内容 ID”选项并单击应用。

现在，如果您查看基本页面内容，图像将显示在横幅区域中，而不是与节点内容一起显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T01:29:08.977

如果我对您的理解正确，有几种方法可以解决这个问题。第一，使用您的图像创建您的基本页面内容，然后创建一个引用该图像或一组图像（如幻灯片）的视图，并将这些图像放置在页面的“横幅”区域中。您需要在视图中添加一个过滤器以仅接受页面内容类型。

希望这可以帮助。

# python - theano 定义重复调用另一个函数的函数？

> ID：14178339
> 
> 赞同：3
> 
> 时间：2013-01-06T01:24:08.887
> 
> 标签：python, machine-learning, theano

我的训练功能：

```
def fit(self, X, y):
    batch_size = 20

    index = T.lscalar()  # index to a [mini]batch
    updates = {}

    return theano.function(
        inputs=[index], outputs=self.cost, updates=updates,
        givens={
            self.sym_X: X[index * batch_size:(index + 1) * batch_size],
            self.sym_y: y[index * batch_size:(index + 1) * batch_size]}) 
```

然后从其他地方：

```
fn = obj.fit(X, y)
for i in range(10):
    fn(i) 
```

所以我希望这个看起来像

```
fn = obj.fit(X, y)
fn() 
```

我真的不知道如何开始，因为 theano 对我来说仍然很令人费解。我能够做到这一点，但循环非常具有挑战性。

我有一个模糊的概念，如果我可以将 theano.function 转换为 theano.scan，然后在其周围放置一个外部 theano.function - 那可能会起作用。然而，theano.scan 对我来说仍然很神奇（尽管我尽了最大的努力）。

我怎样才能将小批量的循环合并到一个函数调用中？

更新：

我以为我拥有它！我懂了：

```
def fit(self, X, y):
    batch_size = 20
    n_batches = 5

    index = theano.shared(0)

    ## index to a [mini]batch
    updates = {
        index: index + batch_size
    }

    return theano.function(
        inputs=[], outputs=[self.cost] * n_batches, updates=updates,
        givens={
            index: 0,
            self.sym_X: X[index * batch_size:(index + 1) * batch_size],
            self.sym_y: y[index * batch_size:(index + 1) * batch_size]}) 
```

但不幸的是，似乎因为我使用索引来计算给定的批次，我也不能更新它：

```
Traceback (most recent call last):
  File "skdeeplearn/classifiers/test/test_classifiers.py", line 79, in test_logistic_sgd
    fn = clf.fit(self.shared_X, self.shared_y)
  File "skdeeplearn/classifiers/logistic_sgd.py", line 139, in fit
    self.sym_y: y[index * batch_size:(index + 1) * batch_size]})
  File "/Users/aelaguiz/workspace/pyvotune/venv/lib/python2.7/site-    packages/theano/compile/function.py", line 206, in function
    profile=profile)
  File "/Users/aelaguiz/workspace/pyvotune/venv/lib/python2.7/site-packages/theano/compile/pfunc.py", line 461, in pfunc
    no_default_updates=no_default_updates)
  File "/Users/aelaguiz/workspace/pyvotune/venv/lib/python2.7/site-packages/theano/compile/pfunc.py", line 162, in rebuild_collect_shared
    "to be replaced by %s." % (v_orig, v_repl))
AssertionError: When using 'givens' or 'replace' with several (old_v, new_v) replacement pairs, you can not have a new_v variable depend on an old_v one. For instance, givens = {a:b, b:(a+1)} is not allowed. Here, the old_v <TensorType(int64, scalar)> is used to compute other new_v's, but it is scheduled to be replaced by <TensorType(int64, scalar)>. 
```

* * *

更新 2：

```
def fit(self, X, y):
    batch_size = 20
    n_batches = 5

    index = theano.shared(0)

    ## index to a [mini]batch
    updates = {
        index: index + batch_size
    }

    return theano.function(
        inputs=[], outputs=[self.cost] * n_batches, updates=updates,
        givens={
            self.sym_X: X[index * batch_size:(index + 1) * batch_size],
            self.sym_y: y[index * batch_size:(index + 1) * batch_size]}) 
```

这实际上运行，但它的输出很奇怪：

```
[array(0.6931471824645996, dtype=float32), array(0.6931471824645996, dtype=float32), array(0.6931471824645996, dtype=float32), array(0.6931471824645996, dtype=float32), array(0.6931471824645996, dtype=float32)] 
```

每次我运行它时，我都会得到相同的输出，即使 X & y 每次运行都被初始化为随机值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-01T02:15:08.277

我认识的每个人都在 python 中对 minibatch 进行循环。这可以通过扫描来完成，但是您在这里的所有尝试都没有使用扫描。所以他们没有工作是正常的。您需要在某处调用扫描函数才能使用它（或其更高级别的接口，如地图）。事实上，在你的情况下，我认为你可以使用`theano.scan(fn, theano.tensor.arange(N))`.

由于代码片段不完整，我无法在这篇文章中回答您的所有问题，但这里有一些信息：

```
return theano.function(
    inputs=[], outputs=[self.cost] * n_batches, 
```

这里：`[self.cost] * n_batches`是纯python代码。这将创建一个`n_batches`元素列表，其中每个元素都是`self.cos`t。因此，如果`n_batches`是 3，您将拥有`outputs=[self.cost, self.cost, self.cost]`. 这就是为什么您多次输出相同的值的原因。

我无法告诉您为什么您总是添加相同的答案，因为我需要未提供的信息。

# ruby-on-rails-3 - 使用 devise 和 rails 3 查找在线用户

> ID：14178346
> 
> 赞同：1
> 
> 时间：2013-01-06T01:25:03.427
> 
> 标签：ruby-on-rails-3, devise

我在我的 rails 3.2 应用程序中使用设计作为一种很好的身份验证方式，我尝试了几种获取在线用户的方法，我需要知道我是否可以使用我的应用程序上的会话来获取所有在线用户

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T01:41:43.040

谷歌和 stackoverflow 是你的朋友：

这似乎是一个宝石，并且被问了很多。

[在 Rails 中使用 Devise 的“谁在线”](https://stackoverflow.com/questions/5504130/whos-online-using-devise-in-rails)

# php - 如何设置 JS 客户端来执行远程 API 请求？

> ID：14178347
> 
> 赞同：0
> 
> 时间：2013-01-06T01:25:15.790
> 
> 标签：php, javascript, ajax

我想要实现的目标：
为了能够在客户端域中嵌入以下代码，假设 client.com 调用 apidomain.com。apidomain 上的 client.js 脚本对也托管在 apidomain.com 上的 PHP 文件 app.php 进行 ajax 调用。进行调用后，将应用选项，PHP 文件以嵌入在客户端页面上的数据进行响应。
`<script type="text/javascript" src="http://apidomain.com/client.js"> var api_key = 'key'; var opts = true; </script>`

我有 JS 和 PHP 设置，但是每次 client.js 向 app.php 发出请求时，它都会返回空白，即使发布数据通过。这个问题与跨域ajax请求有关吗？正确的设置是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T01:32:10.180

您应该使用这种称为 JSONP 的[技术。](http://en.wikipedia.org/wiki/JSONP)所以简单地说：

1.  使用您想从 app.php 获取的参数创建 someFunction 函数（在 client.com 域中）
2.  通过在 src 属性和回调参数 (/app.php?myvar=hello&callback=someFunction) 中创建带有特定参数的脚本标签来发送 get 请求
3.  在您的 app.php 中，您创建 javascript 代码并回显它，如下所示： someFunction(/* here you put your parameters);

因此，当您从 app.php 加载脚本时，它会使用您在 app.php 中创建的参数调用 someFunction('example param1', 'example param2')

# r - 将R中矩阵的所有零转换为NA

> ID：14178350
> 
> 赞同：0
> 
> 时间：2013-01-06T01:25:32.930
> 
> 标签：r, matrix

> **可能重复：**
> [将所有 0 值替换为 R 中的 NA](https://stackoverflow.com/questions/11036989/replace-all-0-values-to-na-in-r)

离开这个[问题](https://stackoverflow.com/questions/8161836/how-do-i-replace-na-values-with-zeros-in-r)。R中是否有类似的功能，例如`x[is.na(x)] <- 0`它将矩阵中的每个零更改为NA？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-06T01:27:31.613

你可以这样做：

```
x[x == 0] <- NA 
```

例如：

```
x = matrix(rep(0:1, 50), nrow=10)
x[x == 0] <- NA
print(x)
#      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
# [1,]   NA   NA   NA   NA   NA   NA   NA   NA   NA    NA
# [2,]    1    1    1    1    1    1    1    1    1     1
# [3,]   NA   NA   NA   NA   NA   NA   NA   NA   NA    NA
# [4,]    1    1    1    1    1    1    1    1    1     1
# [5,]   NA   NA   NA   NA   NA   NA   NA   NA   NA    NA
# [6,]    1    1    1    1    1    1    1    1    1     1
# [7,]   NA   NA   NA   NA   NA   NA   NA   NA   NA    NA
# [8,]    1    1    1    1    1    1    1    1    1     1
# [9,]   NA   NA   NA   NA   NA   NA   NA   NA   NA    NA
#[10,]    1    1    1    1    1    1    1    1    1     1 
```

# php - php页面中的Echo Restful API

> ID：14178351
> 
> 赞同：1
> 
> 时间：2013-01-06T01:26:36.420
> 
> 标签：php, api, curl, epg

我需要绝望的帮助来获取特定频道播放的当前电视节目。我想使用这个 API [http://www.webtelevideo.com/api/](http://www.webtelevideo.com/api/)来获取程序名称。我发现这个页面抓取了所有意大利电视频道的所有节目，但我只想显示指定频道当前播放的节目。因此，没有国家数据、语言、评级等……只有在查看网页时正在播放的电视节目的名称。我试着去[http://www.webtelevideo.com/api/getSchedule.php?channel_id=350](http://www.webtelevideo.com/api/getSchedule.php?channel_id=350) （例如）但我只想让当前程序出现，只有一个字符串。我知道在网上和 stackoverflow 上有很多关于 API 和 cURL 的帖子，但我是这类东西的菜鸟，我真的需要你的帮助。非常感谢提前

```
<?php $guide = get_post_meta($post->ID, '_wpb_in_onda', true); ?>

<?php
function GetChanels()
{
    return json_decode(file_get_contents("http://www.webtelevideo.com/api/getSchedule.php"),true);
}
function GetProgramsOnChanel($ChanName)
{
    foreach(GetChanels() as $Chanel)
    {
        {
            return $Chanel["Program"];
        }
    }
    return Array("name"=>"none");
}
function GetCurrentProgramOnChanel($ChanName)
{
    foreach(GetProgramsOnChanel($ChanName) as $Program)
    {
        $Title = $Program["title"];
        $start = strtotime($Program["ProgramSchedule"]["start"]);
        $end = strtotime($Program["ProgramSchedule"]["stop"]);
        $Current = ($start < strtotime("now +1 hour") and strtotime("now +1 hour") < $end); 
        if($Current)
        {
            return $Program;
        }
    }
    return Array("title"=>"none");
}

foreach(GetChanels() as $Chan)
$CurrentProgram = GetCurrentProgramOnChanel(" . $guide . ");
echo "Ora è in onda: " . $CurrentProgram["title"] . ". ";
echo "Termina alle: " . $CurrentProgram["ProgramSchedule"]["stop"] . " (ora italiana) <br>";
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T02:13:20.700

以下 php 为您提供来自 api 的数据。您可以更改它以适合您的需求 =)

```
<?php
    function GetChanels()
    {
        return json_decode(file_get_contents("http://www.webtelevideo.com/api/getSchedule.php"),true);
    }
    function GetProgramsOnChanel($ChanName)
    {
        foreach(GetChanels() as $Chanel)
        {
            if($Chanel["name"] == $ChanName)
            {
                return $Chanel["Program"];
            }
        }
        return Array("name"=>"none");
    }
    function GetCurrentProgramOnChanel($ChanName)
    {
        foreach(GetProgramsOnChanel($ChanName) as $Program)
        {
            $Title = $Program["title"];
            $start = strtotime($Program["ProgramSchedule"]["start"]);
            $end = strtotime($Program["ProgramSchedule"]["stop"]);
            $Current = ($start < strtotime("now +1 hour") and strtotime("now +1 hour") < $end); // + 1 hour is for timezone adjustment
            if($Current)
            {
                return $Program;
            }
        }
        return Array("title"=>"none");
    }

    function GetNextProgramOnChanel($ChanName)
    {
        $HitCurrent = false;
        foreach(GetProgramsOnChanel($ChanName) as $Program)
        {
            if($HitCurrent)
            {
                return $Program;
            }
            $Title = $Program["title"];
            $start = strtotime($Program["ProgramSchedule"]["start"]);
            $end = strtotime($Program["ProgramSchedule"]["stop"]);
            $Current = ($start < strtotime("now +1 hour") and strtotime("now +1 hour") < $end); // + 1 hour is for timezone adjustment
            if($Current)
            {
                $HitCurrent = true;
            }
        }
        return Array("title"=>"none");
    }
    /*
    foreach(GetChanels() as $Chan)
    {
        $Program = GetCurrentProgramOnChanel($Chan["name"]);
        echo "The current program in:  " . $Chan["name"] . "  is : " . $Program["title"] . "<br>";
    }
    */

    $guide = get_post_meta($post->ID, '_wpb_in_onda', true);
    $CurrentProgram = GetCurrentProgramOnChanel($guide);
    echo "Ora è in onda: " . $CurrentProgram["title"] . ". ";
    echo "Termina alle: " . $CurrentProgram["ProgramSchedule"]["stop"] . " (ora italiana) <br>";
?> 
```

# javascript - 如何通过 Ajax 向 Struts2 动作类发送请求参数

> ID：14178356
> 
> 赞同：0
> 
> 时间：2013-01-06T01:28:04.770
> 
> 标签：javascript, ajax, jsp, struts2

我有一个由以下文件组成的 Struts2 Web 应用程序：

`member.jsp`：

```
<script type="text/javascript">    
    String str1 = "aaa";
    String str2 = "bbb";

    xmlhttp.open("GET", "http://localhost:8080/project/editprofile.action", true);
    xmlhttp.send(null); 
</script> 
```

`struts.xml`：

```
<action name="editprofile" method="editProfile" class="controller.ControllerSln">
    <result name="success" type="stream">
        <param name="contentType">text/html</param>
        <param name="inputName">inputStream</param>
    </result>
</action> 
```

`ControllerSln.java`：

```
public String editProfile() throws UnsupportedEncodingException {
    return SUCCESS;
} 
```

我想通过 Ajax 将字符串“aaa”和“bbb”发送到`controller.ControllerSln#editProfile()`方法。我怎样才能实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T02:20:06.660

您的 ControllerSln 具有称为 str1 和 str2 的字符串属性。此外，它们的 getter 和 setter 必须由 eclipse 自动创建。之后，您的操作必须是这样的：**http://localhost:8080/project/editprofile.action?str1="+str1+"&str2="+str2;** 当您的操作开始时，struts 将匹配参数，因为它们的名称是同样..您可以在 editProfile() 方法上看到 print str1 和 str2 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T03:41:00.553

如果是simle javascript，请给出完整的javascript ajax调用代码

```
<script type="text/javascript">
        function updateProfile()
        {
            var xmlhttp;
            if (window.XMLHttpRequest)
            {
                xmlhttp=new XMLHttpRequest();
            }
            else
            {// code for IE6, IE5
                xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
            }
            if (typeof xmlhttp == "undefined")
            {
                ContentDiv.innerHTML="<h1>XMLHttp cannot be created!</h1>";
            }

            else{

                var str1 = "aaa";
                var str2 = "bbb";

                var str='?str1='+str1+'&str2='+str2;
                var query='editProfile'+str;
//str1 and str2 should be there at Controller.ControllerSln to fetch data from ajax 
                xmlhttp.open("GET",query,true);
                xmlhttp.onreadystatechange=function()
                {
                    if (xmlhttp.readyState==4 && xmlhttp.status==200)
                    {
                        document.getElementById("UpdatedProfile").innerHTML=xmlhttp.responseText;
                        //UpdatedProfile  div where u want to display result of ajax
                    }
                }

                xmlhttp.send();
            }
        } 
```

}

# image - 使用 Anorm (Scala/PlayFramework 2) 在 Postgres 中保存/加载图像

> ID：14178361
> 
> 赞同：5
> 
> 时间：2013-01-06T01:28:39.137
> 
> 标签：image, postgresql, scala, playframework-2.0, anorm

我想我正在正确地将图像保存到 Postgres，但是在尝试加载图像时会得到意想不到的结果。我真的不知道错误是在保存还是加载中。

这是我保存图像的异常代码：

```
def storeBadgeImage(badgeHandle: String, imgFile: File) = {
   val cmd = """
        |update badge
        |set img={imgBytes}
        |where handle = {badgeHandle}
  """
  var fis = new FileInputStream(imgFile)
  var imgBytes: Array[Byte] = Resource.fromInputStream(fis).byteArray
  // at this point I see the image in my browser if I return the imgBytes in the HTTP response, so I'm good so far.
  DB.withConnection { implicit c =>
  {
    try {
      SQL(cmd stripMargin).on("badgeHandle" -> badgeHandle, "imgBytes" -> imgBytes).executeUpdate() match {
        case 0 => "update failed for badge " + badgeHandle + ", image " + imgFile.getCanonicalPath
        case _ => "Update Successful"
      }
    } catch {
      case e: SQLException => e.toString()
    }
  }
} 
```

}

...我得到“更新成功”，所以我认为保存正在工作（我可能是错的）。这是我加载图像的代码：

```
def fetchBadgeImage(badgeHandle: String) = {
    val cmd = """
        |select img from badge
        |where handle = {badgeHandle}
  """
  DB.withConnection { implicit c =>
    SQL(cmd stripMargin).on("badgeHandle" -> badgeHandle)().map {
      case Row(image: Array[Byte]) => {
        "image = " + image
      }
      case Row(Some(unknown: Any)) => {
        println(unknown + " unknown type is " + unknown.getClass.getName)  //[B@11be1c6 unknown type is [B
        "unknown"
      }
  }
} 
```

}

...而不是像希望的那样进入“Row（image：Array [Byte]）”案例，而是进入“Row（Some（unknown：Any））”案例。我的 println 输出“[B@11be1c6 未知类型是 [B”

我不知道 [B 是什么类型，或者我可能哪里出错了......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T12:39:16.487

它是 Java 中的一个字节数组（byte[]）。> “我不知道什么类型 [B”。

在这种情况下你也可以写`match { case Row(Some(image: Array[Byte])) => }`，这可能会更好。

或者您可以按如下方式执行此操作。

```
val results: Stream[Array[Byte]] = SQL(cmd stripMargin)
  .on("badgeHandle" -> "name")().map { row => row[Array[Byte]]("img") } 
```

...糟糕，出现以下编译错误。

```
<console>:43: error: could not find implicit value for parameter c: anorm.Column[Array[Byte]]
          val res: Stream[Array[Byte]] = SQL(cmd stripMargin).on("badgeHandle" -> "name")().map { row => row[Array[Byte]]("img") } 
```

不幸的是，`scala.Array`默认情况下不支持。如果你模仿其他类型的方式，它是有效的。

```
implicit def rowToByteArray: Column[Array[Byte]] = {
  Column.nonNull[Array[Byte]] { (value, meta) =>
    val MetaDataItem(qualified, nullable, clazz) = meta
    value match {
      case bytes: Array[Byte] => Right(bytes)
      case _ => Left(TypeDoesNotMatch("..."))
    }
  }
}
val results: Stream[Array[Byte]] = SQL(cmd stripMargin)
  .on("badgeHandle" -> "name")().map { row => row[Array[Byte]]("img") } 
```

[https://github.com/playframework/Play20/blob/master/framework/src/anorm/src/main/scala/anorm/Anorm.scala](https://github.com/playframework/Play20/blob/master/framework/src/anorm/src/main/scala/anorm/Anorm.scala)

# python - ValueError: list.remove(x): x not in list ~ Pygame (Python)

> ID：14178363
> 
> 赞同：-1
> 
> 时间：2013-01-06T01:28:56.520
> 
> 标签：python, indexing, range, pygame, blit

我正在尝试在 Pygame 中编写一个抄袭“Brick Breaker”游戏。但我目前被卡住了，不知道该怎么做。

（等等等等，更清楚地解释场景，等等等等，清晰，清晰的场景）

（我需要更多随机文本，以便发布所有这些代码）

这是所有代码，（是的，全部）：

```
import pygame, sys, time, random
from pygame.locals import *
pygame.init()
fpsclock = pygame.time.Clock()

WINDOWWIDTH = 450
WINDOWHEIGHT = 650
mainwindow = pygame.display.set_mode((WINDOWWIDTH, WINDOWHEIGHT), 0, 32)
pygame.display.set_caption('Luzion - Brick Breaker')

paddle = pygame.image.load('Brick Breaker - Paddle.png')
paddlerect = paddle.get_rect()
paddlerect.topleft = (190, 575)

ball = pygame.image.load ('ball.png')
ballrect = ball.get_rect()
ballrect.topleft = (195, 565)

cooltext = pygame.image.load('cooltext1.png')
cooltextrect = cooltext.get_rect()
cooltextrect.topleft = (0, 0)

BLACK = (0, 0, 0)
WHITE = (255, 255, 255)
RED = (255, 0, 0)
GREEN = (0, 128, 0)
BLUE = (0, 0, 255)
LIME = (0, 255, 0)
TEXTCOLOR = WHITE

font = pygame.font.SysFont(None, 48)

def displaytext(text, font, surface, x, y):
    text = font.render(text, 1, TEXTCOLOR)
    textrect = text.get_rect()
    textrect.topleft = (x, y)
    surface.blit(text, textrect)

def waitforplayer():
    while True:
        for event in pygame.event.get():
            if event.type == QUIT:
                pygame.quit()
                sys.exit()
            if event.type == KEYDOWN:
                if event.key == K_ESCAPE:
                    pygame.quit()
                    sys.exit()
                return

moveleft = False
moveright = False
SPEED = 7

bmoveup = bmovedown = bmoveleft = bmoveright = False
BALLSPEED = 8

mainwindow.blit(cooltext, cooltextrect)
pygame.display.update()
time.sleep(1)

displaytext('Level 1', font, mainwindow, 150, 100)
pygame.display.update()
time.sleep(1)

displaytext('Press any key to begin...', font, mainwindow, 22, 200)
pygame.display.update()
waitforplayer()

while True:

    rb = pygame.image.load('redblock.png')
    rbrect = rb.get_rect()
    rbrect.topleft = (0, 0)

    rb1 = rb
    rb1rect = rb1.get_rect()
    rb1rect.topleft = (40, 0)

    level1blocks = [rb, rb1]
    level1rects = [rbrect, rb1rect]

    number = random.randint(0, 1)

    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()
            sys.exit()
        if event.type == KEYDOWN:
            if event.key == ord('a') or event.key == K_LEFT:
                moveleft = True
                moveright = False
            if event.key == ord('d') or event.key == K_RIGHT:
                moveleft = False
                moveright = True
            if event.key == ord('g'):
                bmoveup = True
                if number == 1:
                    bmoveleft = True
                else:
                    bmoveright = True
        if event.type == KEYUP:
            if event.key == ord('a') or event.key == K_LEFT:
                moveleft = False
            if event.key == ord('d') or event.key == K_RIGHT:
                moveright = False

    if moveleft and paddlerect.left > 0:
        paddlerect.left -= SPEED
    if moveright and paddlerect.right < WINDOWWIDTH:
        paddlerect.right += SPEED

    if bmovedown and ballrect.bottom < WINDOWHEIGHT:
        ballrect.top += BALLSPEED
    if bmoveup and ballrect.top > 0:
        ballrect.top -= BALLSPEED
    if bmoveleft and ballrect.left > 0:
        ballrect.left -= BALLSPEED
    if bmoveright and ballrect.right < WINDOWWIDTH:
        ballrect.right += BALLSPEED

    if ballrect.top <= 0:
        bmovedown = not bmovedown
        bmoveup = not bmoveup
    if ballrect.left <= 0:
        bmoveleft = not bmoveleft
        bmoveright = not bmoveright
    if ballrect.right >= WINDOWWIDTH:
        bmoveleft = not bmoveleft
        bmoveright = not bmoveright
    if ballrect.bottom >= WINDOWHEIGHT:
        bmovedown = not bmovedown
        bmoveup = not bmoveup

    mainwindow.fill(WHITE)
    mainwindow.blit(paddle, paddlerect)
    mainwindow.blit(ball, ballrect)

    for x in range(len(level1blocks)):
        mainwindow.blit(level1blocks[x], level1rects[x])

    for x in level1rects:
        if ballrect.colliderect(x):
            level1rects.remove([x])
            level1blocks.remove([x])

    if ballrect.colliderect(paddlerect):
        bmovedown = not bmovedown
        bmoveup = not bmoveup
        bmoveleft = not bmoveleft
        bmoveright = not bmoveright

    pygame.display.update()
    fpsclock.tick(35) 
```

这是我的错误：

```
 Traceback (most recent call last):
  File "C:/Python32/Luzion - Brick Breaker", line 144, in <module>
    level1rects.remove([x])
ValueError: list.remove(x): x not in list 
```

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T01:43:45.850

正如您在评论中提到的，两个 for 循环都在一个更大的 while 循环内。这意味着当线

```
level1rects.remove(x) 
```

发生时，它将减小大小`level1rects`并导致`level1rects[x]`（何时`x`为 1）引发异常。

解决此问题的最佳方法是将 for 循环更改为以下内容：

```
for b in level1blocks:
     mainwindow.blit(b, b.get_rect())

for x in level1blocks[:]:
    if ballrect.colliderect(x.get_rect()):
        level1blocks.remove(x) 
```

这消除了需要`level1rects`- 它导致了太多问题，因为您从矩形列表中删除了项目，而没有从块列表中删除相应的块。将第一个循环更改为`for b in level1blocks:`即使块消失也允许代码工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-06T01:36:12.637

在 level1blocks 和 level1rects 列表上执行 print 或 pprint，其中一个没有足够的成员用于 range(2) 迭代器，它将尝试访问每个列表的第一个（索引 0）和第二个（索引 1）成员。

# html - 使用 HTML5 表单验证时抛弃 JS 后备？

> ID：14178367
> 
> 赞同：0
> 
> 时间：2013-01-06T01:29:34.997
> 
> 标签：html, forms, validation, contact-form

如果放弃 JavaScript 回退，有哪些重要的考虑因素？

对于 HTML5 表单验证用于简单的 3 字段联系表单的情况：

*   姓名
*   电子邮件
*   信息

还假设 HTML5 验证**与良好的后端验证**（例如 PHP）相结合以防止安全威胁。

虽然从代码的角度来看，后备[仍然被认为](http://www.wufoo.com/html5/)是一种好的做法，但这也有用户体验方面的考虑，因为在所有现代浏览器中，只有[移动浏览器缺乏对 HTML5 表单验证](http://caniuse.com/form-validation)的支持——这将取决于联系的目的表单和网站，但如果某些字段未经验证，它可能会或可能不会成为问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T01:49:54.803

您不应该放弃 Javascript 后备以进行表单验证。

IE10 作为稳定版本仅在 Windows 8 上可用。它在 Windows 7 上仍处于 beta 状态（目前还没有决定 MS 是否会将其作为 7 的自动更新推出）并且很可能**永远不会**在 Vista 和其中XP仍占有相当大的市场份额。所以 Internet Explorer 8 和 9 不太可能这么快就消失了。

另外，不要低估移动市场。iPad 和基于 Android 的平板电脑仍然越来越重要。

# wolfram-mathematica - Mathematica 代码来绘制这个微分方程的图形？

> ID：14178369
> 
> 赞同：1
> 
> 时间：2013-01-06T01:29:41.877
> 
> 标签：wolfram-mathematica

有谁知道将跟踪下图的 Mathematica 代码？

这是该图的方程，具有常数系数的二阶线性微分方程：

![在此处输入图像描述](../Images/bb1b20f2b246477d7177b5dea1c1eaf3.png)

下面是这个等式所描绘的图表：

![在此处输入图像描述](../Images/12b568869abcf0dab89b2e29b1c4cfaa.png)

引用《时间序列分析和示例预测》一书：

> ... 其中 δ(t ) 是一个脉冲 (delta) 函数，它像豌豆弹一样，在时间 t = 0 迫使钟摆远离其平衡，a 是豌豆冲击的大小。很容易想象，这个二阶微分方程所描绘的曲线是时间的阻尼正弦函数，尽管如果摩擦或粘度足够大，（过阻尼）钟摆可能会沿着指数曲线逐渐停止而不会交叉中心线。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T02:13:52.560

```
eq = m z''[t] + c z'[t] + k z[t] == a DiracDelta[t];
parms = {m -> 1, c -> .1, k -> 1, a -> 1};
sol = First@DSolve[{eq /. parms, z[0] == 1, z'[0] == 0}, z[t], t];
Plot[z[t] /. sol, {t, 0, 70}, PlotRange -> All, Frame -> True, 
 FrameLabel -> {{z[t], None}, {Row[{t, " (sec)"}], eq}}, 
 GridLines -> Automatic] 
```

![数学图形](../Images/3c476f0cfddabb7e65d3dee7afd66d64.png)

请注意，对于零初始条件，另一种选择是使用 Mathematica 中的控制系统函数，如下所示

```
parms = {m -> 10, c -> 1.2, k -> 4.3, a -> 1};
tf = TransferFunctionModel[a/(m s^2 + c s + k) /. parms, s]
sol = OutputResponse[tf, DiracDelta[t], t];

Plot[sol, {t, 0, 60}, PlotRange -> All, Frame -> True, 
 FrameLabel -> {{z[t], None}, {Row[{t, " (sec)"}], eq}}, 
 GridLines -> Automatic] 
```

![数学图形](../Images/72118a65c002ce14a4ac1d8941b104f4.png)

**更新**

严格来说，`DSolve`上面的结果并不是这个问题的手工推导可以找到的。正确的解决方案应该如下

（也请参阅[此](https://mathematica.stackexchange.com/questions/17410/how-to-correctly-use-dsolve-when-the-force-is-an-impulse-dirac-delta-and-initi)内容以供参考）

正确的解析解由下式给出

![数学图形](../Images/5c3824ae8d7bd9351ef4d97ef2928258.png)

[我在这里](http://12000.org/my_notes/dynamics_cheat_sheet/index.htm)（第一章）针对这个问题和类似情况得出了这个结论。

使用上述解决方案，正确的响应将如下所示：

```
parms = {m -> 1, c -> .1, k -> 1, a -> 1};
w = Sqrt[k/m];
z = c/(2 m w);
wd = w Sqrt[1 - z^2];
analytical = 
  Exp[-z w t] (u0 Cos[wd t] + (v0 + (u0 z w))/wd Sin[wd t] + 
     a/(m wd) Sin[wd t]);
analytical /. parms /. {u0 -> 1, v0 -> 0}

 (* E^(-0.05 t) (Cos[0.998749 t] + 1.05131 Sin[0.998749 t]) *) 
```

绘制它：

```
Plot[analytical /. parms /. {u0 -> 1, v0 -> 0}, {t, 0, 70}, 
 PlotRange -> All, Frame -> True, 
 FrameLabel -> {{y[t], None}, {Row[{t, " (sec)"}], 
    "analytical solution"}}, GridLines -> Automatic, ImageSize -> 300] 
```

![数学图形](../Images/e8c8b7c5cad84110edf4523881c0c6c5.png)

如果您将上面的图与上面显示的第一个图进行比较，`DSolve`您可以看到 附近的差异`t=0`。

# objective-c - 像 iTunes 11 一样绘制 NSTableView 交替行

> ID：14178370
> 
> 赞同：9
> 
> 时间：2013-01-06T01:29:54.717
> 
> 标签：objective-c, macos, cocoa, nstableview

**我知道关于更改交替行颜色还有其他问题。这很容易，这不是我想做的。**

我想在基于视图的 NSTableView 中绘制自定义的交替颜色行，这些行看起来像 iTunes 11 中的那些（行的顶部和底部有轻微的边框，如此截图所示）：

![iTunes 11 截图](../Images/dee32d921243ee80b4382e8501637f55.png)

### 笔记：

我知道我可以继承 NSTableRowView 并在那里进行自定义绘图。但是，这不是一个可接受的答案，因为自定义行将仅用于表中有数据的行。换句话说，如果表格只有 5 行，那 5 行将使用我的自定义 NSTableRowView 类，但表格其余部分（为空）中剩余的“行”将使用标准的交替颜色。在这种情况下，前 5 行将显示挡板，其余的不会。不好。

那么，我如何破解 NSTableView 来为填充行和空行绘制这些样式的交替行？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-06T21:34:44.857

正如您所说，那个“小边框”实际上可以很容易地通过我们的一点作弊来完成。因为，如果你仔细观察，每个单元格的顶部都是比深色交替行略浅的蓝色，每个单元格的底部都是深灰色，你可以继承 NSTableView，然后重写`- (void)drawRow:(NSInteger)row clipRect:(NSRect)clipRect`：

```
- (void)drawRow:(NSInteger)row clipRect:(NSRect)clipRect
{
    //Use the drawing code from http://stackoverflow.com/a/5101923/945847, but change the colors to
    //look like iTunes's alternating rows.
    NSRect cellBounds = [self rectOfRow:row];
    NSColor *color = (row % 2) ? [NSColor colorWithCalibratedWhite:0.975 alpha:1.000] : [NSColor colorWithCalibratedRed:0.932 green:0.946 blue:0.960 alpha:1.000];
    [color setFill];
    NSRectFill(cellBounds);

    /* Slightly dark gray color */
    [[NSColor colorWithCalibratedWhite:0.912 alpha:1.000] set];
    /* Get the current graphics context */
    CGContextRef currentContext = [[NSGraphicsContext currentContext]graphicsPort];
    /*Draw a one pixel line of the slightly lighter blue color */
    CGContextSetLineWidth(currentContext,1.0f);
    /* Start the line at the top of our cell*/
    CGContextMoveToPoint(currentContext,0.0f, NSMaxY(cellBounds));
    /* End the line at the edge of our tableview, for multi-columns, this will actually be overkill*/
    CGContextAddLineToPoint(currentContext,NSMaxX(cellBounds), NSMaxY(cellBounds));
    /* Use the context's current color to draw the line */
    CGContextStrokePath(currentContext);

    /* Slightly lighter blue color */
    [[NSColor colorWithCalibratedRed:0.961 green:0.970 blue:0.985 alpha:1.000] set];
    CGContextSetLineWidth(currentContext,1.0f);
    CGContextMoveToPoint(currentContext,0.0f,1.0f);
    CGContextAddLineToPoint(currentContext,NSMaxX(self.bounds), 1.0f);
    CGContextStrokePath(currentContext);

    [super drawRow:row clipRect:clipRect];
} 
```

当在一个快速的小表格视图中完成时，它看起来像这样： ![漂亮的边框！](../Images/7e135f48012aa89b25c52fecf181748c.png)

但是tableview的顶部和底部怎么办呢？毕竟，它们要么是丑陋的白色，要么是默认的交替行颜色。好吧，正如 Apple 所揭示的（在一个名为“有趣的是，[基于 View Based NSTableView, Basic To Advanced](https://developer.apple.com/videos/wwdc/2011/) ”的演讲中），您可以覆盖`-(void)drawBackgroundInClipRect:(NSRect)clipRect`并做一些数学运算来绘制 tableview 的背景，就像额外的行一样。一个快速的实现看起来像这样：

```
-(void)drawBackgroundInClipRect:(NSRect)clipRect
{
    // The super class implementation obviously does something more
    // than just drawing the striped background, because
    // if you leave this out it looks funny
    [super drawBackgroundInClipRect:clipRect];

    CGFloat   yStart   = 0;
    NSInteger rowIndex = -1;

    if (clipRect.origin.y < 0) {
        while (yStart > NSMinY(clipRect)) {
            CGFloat yRowTop = yStart - self.rowHeight;

            NSRect rowFrame = NSMakeRect(0, yRowTop, clipRect.size.width, self.rowHeight);
            NSUInteger colorIndex = rowIndex % self.colors.count;
            NSColor *color = [self.colors objectAtIndex:colorIndex];
            [color set];
            NSRectFill(rowFrame);

            /* Slightly dark gray color */
            [[NSColor colorWithCalibratedWhite:0.912 alpha:1.000] set];
            /* Get the current graphics context */
            CGContextRef currentContext = [[NSGraphicsContext currentContext]graphicsPort];
            /*Draw a one pixel line of the slightly lighter blue color */
            CGContextSetLineWidth(currentContext,1.0f);
            /* Start the line at the top of our cell*/
            CGContextMoveToPoint(currentContext,0.0f, yRowTop + self.rowHeight - 1);
            /* End the line at the edge of our tableview, for multi-columns, this will actually be overkill*/
            CGContextAddLineToPoint(currentContext,NSMaxX(clipRect), yRowTop + self.rowHeight - 1);
            /* Use the context's current color to draw the line */
            CGContextStrokePath(currentContext);

            /* Slightly lighter blue color */
            [[NSColor colorWithCalibratedRed:0.961 green:0.970 blue:0.985 alpha:1.000] set];
            CGContextSetLineWidth(currentContext,1.0f);
            CGContextMoveToPoint(currentContext,0.0f,yRowTop);
            CGContextAddLineToPoint(currentContext,NSMaxX(clipRect), yRowTop);
            CGContextStrokePath(currentContext);

            yStart -= self.rowHeight;
            rowIndex--;
        }
    }
} 
```

但是，这会使 tableview 的底部留下同样丑陋的空白白色！因此，我们还必须覆盖`-(void)drawGridInClipRect:(NSRect)clipRect`. 另一个快速实现如下所示：

```
-(void)drawGridInClipRect:(NSRect)clipRect {
    [super drawGridInClipRect:clipRect];

    NSUInteger numberOfRows = self.numberOfRows;
    CGFloat yStart = 0;
    if (numberOfRows > 0) {
        yStart = NSMaxY([self rectOfRow:numberOfRows - 1]);
    }
    NSInteger rowIndex = numberOfRows + 1;

    while (yStart < NSMaxY(clipRect)) {
        CGFloat yRowTop = yStart - self.rowHeight;

        NSRect rowFrame = NSMakeRect(0, yRowTop, clipRect.size.width, self.rowHeight);
        NSUInteger colorIndex = rowIndex % self.colors.count;
        NSColor *color = [self.colors objectAtIndex:colorIndex];
        [color set];
        NSRectFill(rowFrame);

        /* Slightly dark gray color */
        [[NSColor colorWithCalibratedWhite:0.912 alpha:1.000] set];
        /* Get the current graphics context */
        CGContextRef currentContext = [[NSGraphicsContext currentContext]graphicsPort];
        /*Draw a one pixel line of the slightly lighter blue color */
        CGContextSetLineWidth(currentContext,1.0f);
        /* Start the line at the top of our cell*/
        CGContextMoveToPoint(currentContext,0.0f, yRowTop - self.rowHeight);
        /* End the line at the edge of our tableview, for multi-columns, this will actually be overkill*/
        CGContextAddLineToPoint(currentContext,NSMaxX(clipRect), yRowTop - self.rowHeight);
        /* Use the context's current color to draw the line */
        CGContextStrokePath(currentContext);

        /* Slightly lighter blue color */
        [[NSColor colorWithCalibratedRed:0.961 green:0.970 blue:0.985 alpha:1.000] set];
        CGContextSetLineWidth(currentContext,1.0f);
        CGContextMoveToPoint(currentContext,0.0f,yRowTop);
        CGContextAddLineToPoint(currentContext,NSMaxX(self.bounds), yRowTop);
        CGContextStrokePath(currentContext);

        yStart += self.rowHeight;
        rowIndex++;
    }
} 
```

当一切都说完了，我们在我们的剪辑视图的顶部和底部得到了漂亮的小假表视图单元格行，看起来有点像这样：

![在此处输入图像描述](../Images/01008273770f39fb59758ba0dd71f3fa.png)

完整的子类可以在[这里](https://gist.github.com/4470973)找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-21T02:12:27.683

您可以使用

`- (void)setUsesAlternatingRowBackgroundColors:(BOOL)useAlternatingRowColors`

用`useAlternatingRowColors`YES 指定背景的标准交替行颜色，用 NO 指定纯色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-02T07:06:20.257

我发现您可以在@CodaFi 解决方案`drawBackgroundInClipRect`的缺失子句中画出顶部和底部。`else`

所以这是 Swift 中的一种方法，假设您可以访问`backgroundColor`and `alternateBackgroundColor`：

```
override func drawBackground(inClipRect clipRect: NSRect) {

    // I didn't find leaving this out changed appearance at all unlike
    // CodaFi stated.
    super.drawBackground(inClipRect: clipRect)

    guard usesAlternatingRowBackgroundColors else { return }

    drawTopAlternatingBackground(inClipRect: clipRect)
    drawBottomAlternatingBackground(inClipRect: clipRect)
}

fileprivate func drawTopAlternatingBackground(inClipRect clipRect: NSRect) {

    guard clipRect.origin.y < 0 else { return }

    let backgroundColor = self.backgroundColor
    let alternateColor = self.alternateBackgroundColor

    let rectHeight = rowHeight + intercellSpacing.height
    let minY = NSMinY(clipRect)
    var row = 0

    while true {

        if row % 2 == 0 {
            backgroundColor.setFill()
        } else {
            alternateColor.setFill()
        }

        let rowRect = NSRect(
            x: 0,
            y: (rectHeight * CGFloat(row) - rectHeight),
            width: NSMaxX(clipRect),
            height: rectHeight)
        NSRectFill(rowRect)
        drawBezel(inRect: rowRect)

        if rowRect.origin.y < minY { break }

        row -= 1
    }
}

fileprivate func drawBottomAlternatingBackground(inClipRect clipRect: NSRect) {

    let backgroundColor = self.backgroundColor
    let alternateColor = self.alternateBackgroundColor

    let rectHeight = rowHeight + intercellSpacing.height
    let maxY = NSMaxY(clipRect)
    var row = rows(in: clipRect).location

    while true {

        if row % 2 == 1 {
            backgroundColor.setFill()
        } else {
            alternateColor.setFill()
        }

        let rowRect = NSRect(
            x: 0,
            y: (rectHeight * CGFloat(row)),
            width: NSMaxX(clipRect),
            height: rectHeight)
        NSRectFill(rowRect)
        drawBezel(inRect: rowRect)

        if rowRect.origin.y > maxY { break }

        row += 1
    }
}

func drawBezel(inRect rect: NSRect) {

    let topLine = NSRect(x: 0, y: NSMaxY(rect) - 1, width: NSWidth(rect), height: 1)
    NSColor(calibratedWhite: 0.912, alpha: 1).set()
    NSRectFill(topLine)

    let bottomLine = NSRect(x: 0, y: NSMinY(rect)   , width: NSWidth(rect), height: 1)
    NSColor(calibratedRed:0.961, green:0.970, blue:0.985, alpha:1).set()
    NSRectFill(bottomLine)
} 
```

如果您不绘制`NSTableRowView`子类：

```
override func drawRow(_ row: Int, clipRect: NSRect) {

    let rowRect = rect(ofRow: row)
    let color = row % 2 == 0 ? self.backgroundColor : self.alternateBackgroundColor
    color.setFill()
    NSRectFill(rowRect)
    drawBezel(inRect: rowRect)
} 
```

# javascript - 我可以像 onclick 一样使用 href 吗？

> ID：14178371
> 
> 赞同：1
> 
> 时间：2013-01-06T01:29:54.960
> 
> 标签：javascript

我只是想不出一种方法来使用 location.href 来表现得就像你在点击一个链接一样。我想要做的是获取变量，例如，

常规链接是这样的，并且工作正常：

```
<a href="images/someImage.jpg" title="My Image" rel="gb_page_center[249, 266]">Click Me</a> 
```

我正在尝试使用 href （或其他方法）调用函数来打开带有其他参数的图像，就像您要单击链接一样。

我希望我能正确解释这一点。

谢谢你的帮助。

**-更新-**

我终于在这里找到了我的解决方案[Displaying the Popup box generated by Greybox on page load(onLoad)](https://stackoverflow.com/questions/8702686/displaying-the-popup-box-generated-by-greybox-on-page-loadonload)

谢谢大家的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T01:37:50.493

回答：是的。

```
<a href="javascript:yourFunction(); return false;" title="My Image" rel="gb_page_center[249, 266]">Click Me</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T01:41:03.000

将 onclick 事件添加到您的链接。使用 JQuery，您当然可以将点击事件绑定到链接，并使用 .preventDefault() 阻止锚标记工作。代码也更简洁。

```
$(document).ready(function(){
  $('a').bind('click', function(e){
    e.preventDefault();
    //do whatever you wish to do
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T01:36:26.127

```
<a onclick="yourJSFunction();return false" href="images/someImage.jpg" title="My Image" rel="gb_page_center[249, 266]">Click Me</a> 
```

您只需`onclick`要向您的锚标记添加一个属性。
确保返回`false`，否则锚标记将像往常一样转到 URL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T01:42:26.940

`location.href`或`window.location.href`指浏览器的当前地址。如果您更改`location.href`浏览器的值，将使用该值作为它的地址。因此，如果您想以编程方式将浏览器导航到链接，您只需更改其值。

如果您只想要链接的点击处理程序，请不要使用 onclick 或 href，这只是不好的做法，请使用单独的脚本，像这样不显眼地执行此操作：

```
var button = document.getElementById('button');
button.onclick = function(){
     do_something();
} 
```

# c++ - QMake 在不必要时重新链接目标

> ID：14178378
> 
> 赞同：1
> 
> 时间：2013-01-06T01:31:02.407
> 
> 标签：c++, qt, build, target, qmake

QMake 在以下情况下重新链接目标是否正常：

```
qmake
make <- build = compile + link
make <- relink
make <- relink
...
make <- relink 
```

**注意：**我不会在这些连续`make`调用之间更改源代码。

**注意：**它不会从头开始重建它们，而是重新链接。

那么它是如何重新链接可执行文件、共享库和静态库的呢？对我来说它看起来像一个错误。

# jquery - 如何使用 jquery 删除输入元素并将每个克隆元素包装到 li 元素中？

> ID：14178379
> 
> 赞同：0
> 
> 时间：2013-01-06T01:31:08.837
> 
> 标签：jquery

使用以下 HTML 内容，

```
<div class="a_list"><iniput type="checkbox"><input/><p>Test Results from A column</p></div>
<div class="a_list"><iniput type="checkbox"><input/><p>Test Results from B column</p></div>
<div class="a_list"><iniput type="checkbox"><input/><p>Test Results from C column</p></div>
<di class="a_list"><iniput type="checkbox"><input/><p>Test Results from D column</p></div> 
```

试试这个并工作，但将所有检查的项目放入一个李（列表）

```
if($(".a_list input:checked").length)
{
    $(this).parent().clone().appendTo("#filterList ul").wrap("<li />");
} else {
    alert("Please make a selection");
} 
```

我想要以下输出

```
<ul id="#filterList">
    <li><p>Test Results from A column</p></li>
    <li><p>Test Results from B column</p></li>
    <li><p>Test Results from C column</p></li>
    <li><p>Test Results from D column</p></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T03:02:23.923

以下应该抓住每一个并且`appendTo`独立于另一个。

```
if($(".a_list input:checked").length)
{
  $(".a_list input:checked").each(function(){
     $(this).clone().appendTo("#filterList").wrap("<li\>");
  });
} else {
   alert("Please make a selection");
} 
```

# jquery - 全屏滚动背景图片

> ID：14178383
> 
> 赞同：0
> 
> 时间：2013-01-06T01:31:38.697
> 
> 标签：jquery, html, css, jquery-animate, fullscreen

我正在编写一个网站，我想要的是一系列滚动的背景图像。棘手的部分是我必须将背景图像设置为占据整个屏幕，而右侧和底部没有任何滚动条，而不会丢失纵横比。

（我用[这个](http://css-tricks.com/perfect-full-page-background-image/)数字来获得我想要的背景）

我的 HTML 如下所示：

```
<div class="bg">
    <div class="slider">
        <div class="slider1"><img src="background1.jpg" class="back"/></div>
        <div class="slider2"><img src="background2.jpg" class="back"/></div>
        <!-- <div class="slider3">slide3</div>
        <div class="slider4">slide4</div>
        <div class="slider5">slide5</div> -->
    </div>
</div><!--end bg-->
<div class="buttons">
<div class="left"><--</div>
<div class="right">-></div> 
</div> 
```

我的CSS：

```
.bg {
/* Set rules to fill background */
min-height: 100%;
min-width: 1024px;

/* Set up proportionate scaling */
width: 100%;
height: auto;

/* Set up positioning */
position: fixed;
top: 0;
left: 0;

overflow: hidden;
}

@media screen and (max-width: 1024px) { /* Specific to this particular image */
    .bg {
        left: 50%;
        margin-left: -512px;   /* 50% */
    }

}

img.back {
    /* Set rules to fill background */
    min-height: 100%;
    min-width: 1024px;

/* Set up proportionate scaling */
width: 100%;
height: auto;

/* Set up positioning */
position: fixed;
top: 0;
left: 0;

}

@media screen and (max-width: 1024px) { /* Specific to this particular image */
    img.back {
        left: 50%;
        margin-left: -512px;   /* 50% */
    }
}

.slider{
width: 200%;
position: relative;
}
.slider1, .slider2, .slider3, .slider4, .slider5{
width: 50%;
    float: left;
}

.buttons{
    position: absolute;
    top:200px;
    left: 200px;
    color: red;
    font-size: 50px;
} 
```

和我的jQuery：

```
$(document).ready(function(){
var total = 2
var current = 1
$(".left").click(function(){
    if(current<total){
    current --
    $(".slider").animate({left:"-=100%"})
    }
})
    $(".right").click(function(){
        if(current>1){
        current ++
        $(".slider").animate({left:"+=100%"})
    }
})

}) 
```

请让我知道我正在尝试做的事情是否可行！我认为我现在遇到的主要问题是 jquery 和百分比动画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T13:58:49.757

百分比的高度和宽度仅在其父级也具有一定的高度和宽度时才起作用。因此，每当您将高度/宽度作为百分比给出时，它都会搜索其父级是否具有高度属性的第一个天气，如果还有百分比，它会向上遍历 DOM，直到找到以像素为单位的高度/宽度（或其他比例）。

但在你的情况下，你不知道窗口的实际高度。因此，您可以计算窗口大小并将其分配给 div 高度作为像素，而不是给出高度属性。

这可能对你有用

**CSS**

```
.bg {
width:100%;
position:fixed;
overflow: hidden;
}

.slider{
position:absolute;
}

.slider1,slider2{
float:left;
}

img.back{
width:100%;
height:100%;
} 
```

**查询**

```
 function resizeBackGround(){
    var windowHeight=$(window).height();
    var windowWidth=$(window).width();

    $('.slider').css({
    width:(windowWidth*2)+'px', //take multiple according to number of background image you are using.
    height:windowHeight+'px'
    });
    $('.slider1,.slider2').css({
    width:windowWidth+'px',
    height:windowHeight+'px'
    });

    }

    $(document).ready(function(){
      resizeBackGround();
      $(window).resize(function(){
         resizeBackGround();
      });

}); 
```

之后您可以使用您的动画功能来切换背景图像。

# java - 替代 DISPLAY.getWidth()

> ID：14178385
> 
> 赞同：1
> 
> 时间：2013-01-06T01:31:50.957
> 
> 标签：java, android, deprecated

我知道该`Display`方法`getWidth()`自 API 13 以来已被弃用。我有以下代码行：

```
Display display = ((WindowManager) getContext().getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
int displayWidth = display.getWidth(); 
```

API 级别 13 及以上的替代方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-30T02:29:30.517

如果您不在活动中，请使用

```
context.getResources().getDisplayMetrics().heightPixels;
context.getResources().getDisplayMetrics().widthPixels; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-28T22:34:31.720

您正在寻找`getSize(Point outSize)`（根据[官方 android API 文档](http://developer.android.com/reference/android/view/Display.html#getHeight%28%29)）

希望这可以帮助！

# c# - 64位扫描内存？

> ID：14178387
> 
> 赞同：3
> 
> 时间：2013-01-06T01:32:37.457
> 
> 标签：c#, memory, 64-bit

不久前，我在 C# 中创建了一个内存扫描器，它将读取进程的内存并查找某些值（例如，整数 42 每次出现的位置）。从那以后，我重新审视了这个项目，并试图将其设计为在 64 位系统中工作。我遇到的问题是 64 位进程被授予高达 8TB 的虚拟内存（与 32 位系统上不起眼的 2-4GB 相比）！至少对于我的代码，不可能在任何合理的时间内扫描 0-8TB 范围内的每个地址。

我尝试在 Process.MainModule.BaseAddress 开始扫描，但我不知道在哪里停止阅读，而且我肯定缺少重要的值。如何缩小范围，以便扫描进程实际使用的范围？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T08:59:46.720

通过使用 VirtualQueryEx 库方法，我最终弄清楚了正在使用哪些内存部分或虚拟页面。我使用这个函数来创建我自己的“内存映射”并识别已使用和可访问的页面。Pinvoke 在这里有一个很好的例子来说明如何做到这一点：[PInvoke 文章](http://www.pinvoke.net/default.aspx/kernel32.virtualqueryex)

通过查看标记为 MEM_COMMIT 的虚拟内存部分并检查以确保权限不包括 PAGE_GUARD，我能够找到相关且可读的必要内存块。

# php - MySQL 如何将 FOUND_ROWS() 存储在 PHP 变量中

> ID：14178390
> 
> 赞同：3
> 
> 时间：2013-01-06T01:32:45.337
> 
> 标签：php, mysql, sql, wordpress

我试图在限制查询之前获取查询返回的总行数。我正在尝试使用[此处](https://stackoverflow.com/questions/2229218/what-is-mysql-version-of-rowcount)找到的建议，该建议使用：`SQL_CALC_FOUND_ROWS`然后`FOUND_ROWS()`在第二个查询中使用；

他们举了这个例子：

```
SELECT SQL_CALC_FOUND_ROWS something FROM your_table WHERE whatever;
SELECT FOUND_ROWS( ) ; 
```

我不知道如何将第二个值从`FOUND_ROWS()`PHP 变量中捕获。我在 Wordpress 中工作，所以我使用全局 $wpdb 来处理 MySQL 交互。这是我正在尝试的简化版本：

```
$rows = $wpdb->get_results( "SELECT SQL_CALC_FOUND_ROWS something FROM your_table WHERE whatever;" );
$count = $wpdb->get_results( "SELECT FOUND_ROWS();" ); 
```

第一个查询有效，但 $count 始终为空。如果我在 phpMyAdmin 中同时运行它们，则查询运行不会出错。

我也试过这个：

```
$rows = $wpdb->get_results( "SELECT SQL_CALC_FOUND_ROWS something FROM your_table WHERE whatever;
SET @count = FOUND_ROWS();" ); 
```

...但它完全失败了。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T01:55:13.863

如果这是 Wordpress，您可以为第二个语句做替代，否则您要求的是一个数组而不是数字：

```
$count = $wpdb->get_var('SELECT FOUND_ROWS()'); 
```

还要注意，由于过滤器，wordpress 的数据库类对任何查询的更改都是开放的，*并且*默认情况下会抑制错误，执行查询并从结果集中获取。

您应该启用尖叫以查看是否遇到特定错误。

*   `$wpdb->show_errors = true`自动显示错误，如果`WP_DEBUG`设置为`true`. （[参考](https://wordpress.stackexchange.com/q/16382/178)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-03T12:03:17.850

简单的。用这个：

```
SELECT FOUND_ROWS() as total; 
```

并在 PHP 中获取它：

```
echo $query[0]->total; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-16T16:15:18.273

试试这个：

```
SELECT count(1) AS rowcount
FROM table 
```

# ruby-on-rails - 自定义主页未显示在 Heroku 部署中

> ID：14178392
> 
> 赞同：1
> 
> 时间：2013-01-06T01:33:09.277
> 
> 标签：ruby-on-rails, heroku

我刚刚开始使用 rails，并且一直在将我的迷你应用程序部署到 heroku 作为练习。一切似乎都工作正常，除了主页。不管我做了什么，我仍然看到“欢迎加入，你正在使用 Ruby on Rails”页面。我已删除 public/index.html，并在 routes.rb 中包含以下行：

```
root to: 'static_pages#home' 
```

这在我自己的机器上运行良好，但是当我部署到 Heroku 时拒绝运行。知道会发生什么吗？

编辑：这是我的其余routes.rb，不确定是否有帮助：

```
SampleApp::Application.routes.draw do
  resources :users
  resources :sessions, only: [:new, :create, :destroy]
  resources :comments

  match '/signup',   to: 'users#new'
  match '/signin',   to: 'sessions#new'
  match '/signout',  to: 'sessions#destroy', via: :delete

  root to: 'static_pages#home'

  match '/about',   to: 'static_pages#about'
  match '/contact', to: 'static_pages#contact' 
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T02:52:59.197

通过执行删除 public/index.html 文件

```
git rm public/index.html
git add (any other files you want to the commit) #optional
git commit -m "removing public index"
git push heroku master 
```

因为，heroku 进行了基于 git 的部署 - 从本地删除将无济于事。

# octopress - 在 Octopress 中按页禁用旁白？

> ID：14178393
> 
> 赞同：4
> 
> 时间：2013-01-06T01:33:34.050
> 
> 标签：octopress

[在 Ocotopress 中隐藏边栏](https://stackoverflow.com/questions/10714990/hiding-asides-in-ocotopress)似乎表明如何在整个站点范围内执行此操作，但我希望能够仅让特定页面折叠侧边栏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-17T00:01:32.060

要在站点范围内折叠侧边栏，请添加`sidebar:collapse`到`_config.yml`. 要折叠特定帖子或页面的侧边栏，请将同一行添加到该帖子或页面的 YAML 标头。

# ruby-on-rails - 是否有一种 rails 方法可以遍历上传文件的每一行？"each_line" 是一种 IO 方法，但它不起作用

> ID：14178396
> 
> 赞同：2
> 
> 时间：2013-01-06T01:34:05.370
> 
> 标签：ruby-on-rails, file, upload, loops, params

我正在尝试上传一个 csv 文件，对其进行解析，然后为 S3 吐出一个文件，或者只是传递给查看。我使用 file_field_tag 上传 csv。我认为 file_field_tag 传递了一个作为 IO 子类的对象，并且将具有所有 ruby​​ IO 方法，例如“each_line”。我可以在对象（IO 类的方法）上调用“读取”，但不能调用“each_line”......那么如何遍历 file_field_tag 上传的每一行？

我的控制器的创建方法为：

```
@csv_file = params[:csv_file] 
```

我的显示视图引发了 no "each_line" 方法错误：

```
<% @csv_file.each_line do |line| %>
<%= line %>
<% end %> 
```

然而我可以使用

```
<%= @csv_file.read(100) %> 
```

我真的很困惑 file_field_tag 上传参数 [] 有什么方法......每个行，都不起作用......我似乎找不到我可以使用的列表。

**编辑** 我通过以下方式解决了这个问题：

```
@csv_file = params[:csv_file].read.to_s 
```

然后迭代：

```
<% @sp_file.each_line do |line| %>
<%= line %>
<% end %> 
```

**编辑2** 正在上传的文件在不包含逗号的行之后重复了标题（不要问）......所以我找到没有逗号的行并调用.gets（在我的rb脚本中独立于rails）。不幸的是，我收到了一个关于 gets 是我不能调用的私有方法的错误。这可以追溯到我最初的问题。文件不是 IO 的子类，具有 read_lines 和 get 等 IO 方法吗？

```
 @file_out = []
        @file_in.each_line do |line|
            case line
            when /^[^,]+$/
                @comp = line.to_s.strip
                comp_header = @file_in.gets.strip.split('')

                @file_out.push(@comp)
            end
        end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T02:38:39.123

当您发布 'file_field' 时，返回给控制器的参数有一些特殊的魔法。

即在你的情况下你可以这个

```
<%= "The following file was uploaded #{params[:csv_file].original_filename}" %>
<%= "It's content type was #{params[:csv_file].content_type}" %>
<%= "The content of the file is as follows: #{params[:csv_file].read}" %> 
```

所以这些是您可以在 params[:csv_file] 上调用的三种特殊方法，或者作为视图中成功的 'file_field_tag' 或 'f.file_field' 的结果发布的任何参数

请记住，这些是您可以对作为 file_field 的结果发布的参数进行的三个额外的特殊操作：

original_filename

内容类型

读

您已经清楚地知道如何进行读取，original_filename 和 content_type 将来可能会帮助您。

编辑

好的，所以你只有 read 方法，它将读取上传文件的内容。

```
contents = params[:csv_file].read 
```

所以现在 contents 是一个包含文件内容的字符串，但除了它是一个 csv 文件外，对该文件一无所知。我们知道 csv 用 '\r' 分隔（我想，我在解析 csv 方面做了很多工作，但我懒得去检查）

所以你可以这样做：

```
contents = params[:csv_file].read
contents.split("\r").each do |csvline|
  ???
end 
```

编辑 2

所以这是这篇文章的要点

当您将 file_field 发布到控制器时，与上传文件的内容有关的最常见的事情是将其“读取”到 ruby​​ 字符串中。上传内容的任何额外处理都必须在从“读取”返回的 ruby​​ 字符串上完成。

在这种特殊情况下，如果上传的文件始终是 CSV，您可以假设 CSV 并相应地开始解析它。如果您期望多种上传格式，则必须处理它，例如：

```
contents = params[:csv_file].read
case params[:csv_file].content_type
when 'txt/csv'
  contents.split("\r").each do |csvline| 
    ???
  end
when 'application/pdf'
  ???
end 
```

# ios - dispatch_async 和帧速率

> ID：14178397
> 
> 赞同：1
> 
> 时间：2013-01-06T01:34:22.687
> 
> 标签：ios, grand-central-dispatch, mbprogresshud

我正在尝试学习 GCD，所以我还没有完全掌握它是如何工作的。出于某种原因，在调用以下方法后，我的帧速率会永久下降。如果我不使用dispatch函数，只是在主循环上写数据，帧率一直停留在60，不知道为什么。

```
-(void)saveDataFile {

        _hud = [MBProgressHUD showHUDAddedTo:self.parentView animated:YES];
        _hud.labelText = NSLocalizedString(@"Saving data...", nil);

        dispatch_queue_t myQueue = dispatch_queue_create("myQueueName", NULL);

        dispatch_async(myQueue, ^(void) {

            @autoreleasepool {

                id data = [self.model getData];
                if (data != nil) {

                    NSString *filePath = @"myPath";
                    [data writeToFile:filePath atomically:YES];
                }

            }

            dispatch_async(dispatch_get_main_queue(), ^(void) {

                [_hud hide:YES];

            });

        });

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:56:52.973

解决了。我从这个问题关注了HUD的实现：[MBProgressHUD not show](https://stackoverflow.com/questions/5522079/mbprogresshud-not-showing)

基本上，我需要移除 HUD 而不是简单地隐藏它。否则，HUD 动画会继续，对我来说是不可见的，因此导致帧速率下降。

```
-(void)saveDataFile {

// create HUD and add to view
    MBProgressHUD *hud = [[MBProgressHUD alloc]initWithView:self.parentView];
    hud.labelText = NSLocalizedString(@"Saving data...", nil);
    hud.delegate = self;
    [self.parentView addSubview:hud];

// define block for saving data

        void (^saveData)() = ^() {

            @autoreleasepool {

                id data = [self.model getData];
                if (data != nil) {

                    NSString *filePath = @"myPath";
                    [data writeToFile:filePath atomically:YES];
                }

            }

}

// use HUD convenience method to run block on a background thread
[hud showAnimated:YES whileExecutingBlock:saveData];

    }

// remove hud when done!
//
- (void)hudWasHidden:(MBProgressHUD *)hud {

    [hud removeFromSuperview];
} 
```

# java - 猜测一个词（例如：**** *******）

> ID：14178406
> 
> 赞同：-3
> 
> 时间：2013-01-06T01:35:33.193
> 
> 标签：java

我正在尝试编写一段代码，允许我输入一个字母，然后检查该字母是否属于该单词。然后它应该显示只有正确字母可见的单词。

例子：

我需要猜的词：丛林书

如屏幕所示：`***** ****`

我猜的字母：j

屏幕显示：`j**** ****`

等等

到目前为止我得到了什么：

```
public void guessConsonent()  {
    String guessedConsonent = consonentInput(); 
    // returns a letter

    wordInStars = ""; 

    for (int s = 0; s < secretWord.length(); s++)
        if (secretWord.substring(s, s+1).equals(guessedConsonent)) {
            wordInStars += guessedConsonent;
        } else if (woordVanCat.substring(s, s+1).equals(" ")) {
            wordInStars += " ";
        } else {
            wordInStars += "*";
        }
    System.out.println(wordInStars);
} 
```

问题是即使它是正确的，它也不会在单词中添加辅音。我仍然只得到'**** **'*

 *问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T01:44:46.097

看来您正在[用 Java 编写刽子手克隆](http://www.daniweb.com/software-development/java/code/267048/hangman-source-code-java)。我没有看到的片段是：

```
if (wordVanCat.charAt(i) == a){
    woordSterRaden.setCharAt(i, a);
} else {
    woordSterRaden.setCharAt(i, '*');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T01:43:50.077

```
void guess() {
   Scanner cin = new Scanner(System.in);
   String yes = "Hello World";
   String g = "";
   for (int i = 0; i < yes.length(); ++i) g += '*';
   while (!yes.equals(g)) {
       String resp = cin.next();
       String temp = "";
       for (int i = 0; i < yes.length(); ++i) {
           if (g.charAt(i) == '*' && yes.charAt(i) == resp.charAt(0))
              temp += resp.charAt(0);
           else
              temp += g.charAt(i);
       }
       g = temp;
   }
} 
```*

# ios - 捕获、编码然后将视频从 iPhone 流式传输到服务器

> ID：14178412
> 
> 赞同：7
> 
> 时间：2013-01-06T01:37:10.433
> 
> 标签：ios, video, video-capture, video-encoding, video-recording

我有构建 iOS 应用程序的经验，但没有视频经验。我想构建一个将实时视频流式传输到服务器的 iPhone 应用程序。一旦在服务器上，我会将该视频实时传送给消费者。

我已经阅读了相当多的材料。有人可以告诉我以下是否正确并为我填空。

1.  要在 iPhone 上录制视频，我应该使用 AVFoundation 类。使用 AVCaptureSession 委托方法 captureOutput:didOutputSampleBuffer::fromConnection 时，我可以访问每一帧视频。现在我有了视频帧，我需要对帧进行编码

    *   我知道 Foundation 类仅通过 AVAssetWriter 提供 H264 编码，而不是通过轻松支持流式传输到 Web 服务器的类。因此，我只能将视频写入文件。
    *   我读过其他帖子说他们可以使用两个 AssetWritter 写入 10 秒块，然后 NSStream 将这 10 秒块写入服务器。有人可以解释如何编码使用两个 AVAssetWriters 一起工作来实现这一点。如果有人有代码，请分享。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-29T19:17:07.313

您是正确的，在 iPhone 上使用硬件编码器的唯一方法是使用 AVAssetWriter 类将编码的视频写入文件。不幸的是，在文件关闭之前， AVAssetWriter 不会将 moov 原子写入文件（解码编码的视频所必需的）。

因此，将编码视频流式传输到服务器的一种方法是将 10 秒的视频块写入文件，关闭它，然后将该文件发送到服务器。我已经读过这种方法可以在没有文件关闭和打开造成的播放间隙的情况下使用，尽管我自己没有尝试过。

[我在这里](http://www.gdcl.co.uk//2013/02/20/iOS-Video-Encoding.html)找到了另一种流式传输视频的方法。

此示例打开 2 个 AVAssetWriter。然后在第一帧它写入两个文件，但立即关闭其中一个文件，以便写入 moov atom。然后使用 moov atom 数据，第二个文件可以用作管道来获取编码的视频数据流。此示例仅适用于发送视频数据，但它的代码非常简洁易懂，帮助我弄清楚如何处理 iPhone 上的许多视频问题。

# django - 我想在单个服务器上部署更多 django 网站。带有虚拟主机的 apache 是我唯一的选择吗？

> ID：14178413
> 
> 赞同：-2
> 
> 时间：2013-01-06T01:37:18.983
> 
> 标签：django, apache, wsgi, gunicorn

我想在单个服务器上拥有多个 django 网站。我已经用 php 和 apache 的虚拟主机做到了这一点。

但是我如何用 django 做到这一点？

我可以使用 gunicorn 或其他 python wsgi 解决方案，还是必须使用 apache？

在这种情况下，apache和其他解决方案的优缺点是什么？

什么是警告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T01:42:36.630

要使用 apache 执行此操作，您可以`virtualhosts`像在 php 中一样使用多个我问了一个关于如何在 serverfault 上找到的问题[here](https://serverfault.com/questions/357804/apache2-mod-wsgi-django-named-virtual-servers)

# macos - Mac 功能故障

> ID：14178417
> 
> 赞同：0
> 
> 时间：2013-01-06T01:38:24.880
> 
> 标签：macos, cocoa, opengl

我正在尝试修复 MAC OS X 10.5 上一个非常有趣的崩溃。

这是代码：

```
CGLPixelFormatObj pixelFormatObj ;
GLint numPixelFormats ;
CGLPixelFormatAttribute attribs[] =
{
    kCGLPFAFullScreen,
    kCGLPFADisplayMask,
    (CGLPixelFormatAttribute) 0,    /* Display mask bit goes here */
    (CGLPixelFormatAttribute) 0
} ;

if ( display == kCGNullDirectDisplay )
    display = CGMainDisplayID();
attribs[2] = (CGLPixelFormatAttribute) CGDisplayIDToOpenGLDisplayMask(display);

/* Build a full-screen GL context */
CGError error = CGLChoosePixelFormat( attribs, &pixelFormatObj, &numPixelFormats );
if ( pixelFormatObj == NULL )    // No full screen context support
    return NULL; 
```

对 CGLChosePixelFormat() 的调用给出“CGNoError”，但“pixelFormatObj”为 NULL。

这段代码应该可以工作，因为我在网上看到了对它的引用以获取屏幕截图（参考[http://cocoadev.com/wiki/ScreenShotCode](http://cocoadev.com/wiki/ScreenShotCode)）。

在 XCode 中的调试器下查看，attribs[2] 变为“kCGLPFAAllRenderers”。

有人知道这可能发生的条件吗？以及如何克服这一点？

# mysql - MySQL左连接计数不起作用

> ID：14178418
> 
> 赞同：7
> 
> 时间：2013-01-06T01:38:43.607
> 
> 标签：mysql, select, count, left-join

我有 2 个表（成员，duty_sched） 我希望能够计算每个成员出现在 duty_sched 表中的次数。这是我经过几周搜索后得到的

```
SELECT 
members.fname, 
members.lname, 
(SELECT COUNT(duty_sched.id) FROM duty_sched
 WHERE 'duty_sched.mbr_id' = 'members.mbr_id') AS shifts 

FROM members
ORDER BY members.lname, members.fname 
```

我得到的输出全为零，我希望它向我展示的是：

改名鲍勃·史密斯 4 简·约翰逊 2

我能得到的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-06T01:44:46.013

删除单引号：`WHERE duty_sched.mbr_id = members.mbr_id)`

您还可以使用以下命令编写查询`LEFT JOIN`：

```
SELECT 
    m.fname, 
    m.lname, 
    COUNT(d.id) AS shifts 
FROM members AS m
  LEFT JOIN duty_sched AS d
    ON d.mbr_id = m.mbr_id
GROUP BY
    m.mbr_id                     -- the Primary Key of `members`
ORDER BY 
    m.lname, m.fname ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T01:46:55.807

你可以尝试类似的东西

```
SELECT 
members.fname, 
members.lname, 
count(*) FROM duty_sched JOIN members
WHERE duty_sched.mbr_id = members.mbr_id
Group by duty_sched.mbr_id
ORDER BY members.lname, members.fname 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T05:51:43.380

试试这个：

```
SELECT m.fname, m.lname, IFNULL(A.shifts, 0) shifts
FROM members m 
LEFT JOIN (SELECT mbr_id, COUNT(id) shifts 
           FROM duty_sched GROUP BY mbr_id)  A ON m.mbr_id = A.mbr_id 
ORDER BY m.lname, m.fname; 
```

# php - 实体的版本/跟踪单个属性

> ID：14178422
> 
> 赞同：0
> 
> 时间：2013-01-06T01:39:27.570
> 
> 标签：php, symfony, doctrine-orm

假设我正在使用一个名为 Person 的实体。人具有诸如身高、体重等属性，这些属性可以随着时间的推移而改变。

```
class Person
{
    private $id;
    private $weight;
    private $height;

    // etc...
} 
```

我希望用户能够返回并在某种形式的图表上查看随时间的变化。为每个单独的属性存储每个连续更改的最佳方法是什么？

我查看了 DoctrineExtension Loggable 接口，但它为整个对象创建了一个更改条目，因此您不能通过与对象无关的特定属性向后“浏览”，该属性已更改。

同样，使用 Loggable 恢复到以前的版本会导致您丢失所述版本和当前版本之间的任何更改（如预期的那样，但我希望能够删除特定条目）。

最好的方法是从 Person 到**“条目对象”**的经典**OneToMany/ManyToOne**关系，例如or （其中包含条目的值和时间戳），将最新的时间戳作为当前值？**`PersonHeightEntry``PersonWeightEntry`**

 **例子：

```
class Person
{
// @ORM\OneToMany(...)
private $weight_entries;
}

class PersonWeightEntry
{
    private $value;
    private $timestamp;

    // @ORM\ManyToOne(...)
    private $person;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:44:19.567

实际上，Loggable 接口可用于在数据库中存储对象的不同版本，同时将数据以另一种形式呈现给用户。例如，您可以从数据库中读取不同的高度并将它们呈现出来，而无需显示整个对象。

您还可以通过使用从该对象的旧版本获得的旧值覆盖实际对象的属性，来“恢复”仅对一个属性的更改。

将许多属性映射到 OneToMany 关系将导致数据库负载并使计算变得更重。

我会使用 Loggable 接口，将完整的对象存储在数据库中，然后根据您的需要更改应用程序中的表示。**

# c# - C#尝试键入强制转换数组值

> ID：14178426
> 
> 赞同：0
> 
> 时间：2013-01-06T01:39:40.687
> 
> 标签：c#, tryparse

在以下代码中尝试从数组字符串值转换 int 时；

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;

    namespace hourscount
    {
        class Program
        {
            static void Main(string[] args)
            {
                string delimiter = ":";
                string time1 = Console.ReadLine();
                string time2 = Console.ReadLine();

                if (time1 == null || time2 == null)
                {
                    Console.WriteLine("Program expects two values!");
                    Console.ReadLine();

                }
                else
                {
                    string[] time1var = time1.Split(new string[] {delimiter}, StringSplitOptions.None);
                    string[] time2var = time2.Split(new string[] { delimiter }, StringSplitOptions.None);
                    int time2Intvar1 = int.TryParse(time2var[0]);
                    int time1Intvar1 = int.TryParse(time1var[0]);
                    int time2Intvar2 = int.TryParse(time2var[1]);
                    int time1Intvar2 = int.TryParse(time1var[1]);
                    int realHours = (time2Intvar1 - time1Intvar1);
                    Console.ReadLine();
                }
            }

        }
    } 
```

我收到以下错误；错误 1 ​​方法“TryParse”没有重载需要 1 个参数

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T01:41:10.287

用它作为

```
int time2Intvar1;
bool isOK = int.TryParse(time2var[0],out time2Intvar1); 
```

有关更多信息，请参阅

[http://www.dotnetperls.com/int-tryparse](http://www.dotnetperls.com/int-tryparse)

[http://msdn.microsoft.com/en-us/library/f02979c7.aspx](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-06T01:43:27.630

您需要提供以下[`out`参数](http://msdn.microsoft.com/en-us/library/ee332485.aspx)[`int.TryParse`](http://msdn.microsoft.com/en-us/library/f02979c7.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-1)：

```
int time2Intvar1;
bool canBeParsed = int.TryParse(time2var[0], out time2Intvar1); 
```

之后初始化。

# php - Jquery，PHP点击后调用其他表单

> ID：14178427
> 
> 赞同：0
> 
> 时间：2013-01-06T01:40:29.600
> 
> 标签：php, javascript, jquery, forms

我只是在最后几天学习 javascript（几个月前开始使用 PHP）。

所以，我的代码是这样的：

**例如**

```
 http://controljuridico.com/video01/ 
```

我有三个文件。

1.  带有表单的 Html 文件。

2.  单击“enviar”（发送）按钮后具有功能的 javascript 文件。

3.  一个处理数据的php。

**HTML 文件 (index.html)**

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
       "http://www.w3.org/TR/html4/strict.dtd">

       <html xmlns="http://www.w3.org/1999/xhtml" lang="en">
        <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>index</title>
<link href="css/css.css" type="text/css" rel="stylesheet" media="screen" />
<script src="js/jquery.js" type="text/javascript" language="JavaScript"></script>
<script src="js/js.js" type="text/javascript" language="JavaScript"></script>
    </head>
      <body>
   <div id="content">
    <h1>Test.</h1>
    <h1>Step 1) choose city</h1>
    <br />
    <br />
    <label>test(*)</label>
    <hr />
    <br />
    <form name="form_data" id="form_data">

        <label>(*) City</label>
        <br />
        Medellin
        <input type="radio" name="ciudad" value="Medellin" />
        Manizales
        <input type="radio" name="ciudad" value="Manizales"/>
        Cali
        <input type="radio" name="ciudad" value="Cali"/>
        <br />
        <label>(*) Especialidad</label>
        <br />
        <input type="button"  value="Enviar" id="btn_enviar" /> 
        <br />
        <br />
        <label id="mensaje"></label>
    </form>
    <div id="resultado" ></div>
        </div>
               </body>
            </html> 
```

**js.js 文件**

```
 $(document).ready(function(){
   $('#btn_enviar').click(function(){

    if( validaRadio( 'ciudad','Ciudad' ) == false) return false;

    $.ajax({
        type:'POST',
        url :'upload.php',
        data: $('#form_data').serialize(),
        beforeSend : function(){
            $('#mensaje').html('Enviando datos...');
        },
        success: function (data){
                        $('#mensaje').html('Datos enviados  correctamente.');
                $('#resultado').html(data); 
        },
        complete: function(){
             $('#form_data').slideUp();
             $('#resultado').slideDown();

        }
    });

        }); 

          }); 
```

**PHP 文件 (upload.php)**

```
 <?php

  $sergu = $_POST['ciudad'];
   if ($_POST['ciudad'] == "Medellin") {
    ?>
    <label>Ciudad Ingresada:</label>
    <br />
    <label><?php echo $_POST['ciudad'] ?></label>
    <hr />
    <?php
    }else{
    echo "it is not medellin....";

   }
       ?> 
```

所以，这很好用但是。如果我想要这个怎么办：

单击“enviar”按钮后，该表单左侧还会显示另一个类似的表单。

我的意思是它就像选择步骤一样，如果您选择第一步，我需要另一个步骤，依此类推，我希望这另一个步骤只出现在前一个表单的左侧。

有可能的？如何？

在此先感谢您的帮助！对此，我真的非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T01:53:27.823

例如，您可以在页面首次通过 css 加载时隐藏“第二种形式”，如下所示：

```
<form id="second_form" style="display: none">... 
```

并且当您的成功功能触发时，您可以像这样删除 css：

```
success: function(){
  ...
  $('#second_form').show();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T01:57:33.320

简短的回答：是的。

在 jquery 中，有 .insertBefore()。实现您（某种）想要的一种简单方法是在 php 中回显新表单，而不是

```
$('#resultado').html(data); 
```

请执行下列操作：

```
$(data).insertBefore('#resultado'); 
```

这将在前一个表单**下**插入由 PHP 回显的新表单。当然你也必须删除

```
$('#form_data').slideUp(); 
```

否则，表格将被隐藏。

# c# - 如何在 Visual Studio 中从 C++/CLI 和 C# 调用 C++/CLI？

> ID：14178428
> 
> 赞同：1
> 
> 时间：2013-01-06T01:40:37.787
> 
> 标签：c#, c++, visual-studio, c++-cli

不久前我了解到 C++/CLI 是使用非托管 C++ 代码的方法。我能够弄清楚如何从 C++/CLI 项目中的 C++ 项目调用代码，而 C++ 代码位于静态库中。C++ 代码位于静态库中，C++/CLI 代码位于 Win32 应用程序中。

然后我想将 C++/CLI 项目转换为静态库（从现在起称为包装器）并创建另一个“消费者”项目（C++/CLI 或 C#）来调用包装器。这是我被困的地方。

在 C# 中，链接项目非常简单。您所需要的只是将消费者项目中的引用添加到库项目中。从 C++/CLI 或 C# 项目到 C++/CLI 项目，您如何做到这一点？

好的，这是主要问题。我的最终目标是能够使用 DLL 或静态库自由地从 C# 到 C++/CLI 到 C++，但我必须先解决我目前的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T02:09:03.940

在 C# 中，您不能添加对 C++/CLI 静态库 (.lib) 的引用，因为 .libs 是特定于 C++ 的。相反，您需要将 C++/CLI 项目创建为编译成 .NET 程序集（DLL）的**类库项目。**生成的 DLL 可以作为 C# 项目的引用添加。

还有一件事，我不建议使用 C++/CLI 为非托管 C++ 类创建包装器。在这些情况下，最好将类转换为 COM 类（使用 ATL）。由于 .NET 与 COM 向后和向前兼容，因此可以直接从 C# 使用 COM 类，而无需创建任何包装器。当您需要在同一个地方混合托管和非托管代码时，C++/CLI 非常有用，但是当您发现自己在创建包装器时，您应该考虑改用 COM。

# c++ - 使用具有实现接口的类的参数的方法声明接口

> ID：14178429
> 
> 赞同：0
> 
> 时间：2013-01-06T01:40:45.777
> 
> 标签：c++, interface, parameters

我想创建一个界面

```
Coordinate 
```

用方法

```
double distanceTo(Coordinate *otherCoord); 
```

但我希望实现接口的类实现它们各自版本的`distanceTo`.

如果例如`GeographicCoordinate`实现`Coordinate`，则应该强制实现该方法

```
double distanceTo(GeographicCoordinate *otherCoord); 
```

而不是

```
double distanceTo(Coordinate *otherCoord); 
```

C++ 中表达这一点的语法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T01:43:01.530

你需要[奇怪的重复模板模式（CRTP）](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)

```
template<typename DerivedType>
class Coordinate{

    double distanceTo(DerivedType *otherCoord) = 0;

};

class GeographicCoordinate: public Coordinate<GeographicCoordinate> 
```

然而，这会使每个基类对派生类都是唯一的，这可能是一个太大的成本（不能存储在容器等中）

或者，您可以这样做，这样`double distanceTo(Coordinate *otherCoord);`就足够了，通过使相关函数虚拟化，消除制作模板的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T02:11:22.410

虽然在某些情况下确实需要这样做，但解决此问题的典型方法是在基类中使用虚函数。

例如：

```
// Example of how to describe a coordinate position - could be many other ways. 
struct PosType { double x; double y };

class Coordinate
{
 public:
    double distanceTo(Coordinate *otherCoord)
    {
        PosType position = getPosition();
        PosType otherPos = otherCoord->getPosition();
        ... use position and otherpos to calculate distance. 
    }
    virtual PosType getPosition() = 0; 
};

class GeographicCoordinate
{
  public:
   PosType getPosition() { return pos; }    

  private: 
   PosType pos; 
}

class SomeOtherCoordinate
{
  public:
   PosType getPosition() 
   { 
      PosType myPos = ... // perform some calculation/transformation. 
      return myPos; 
   }    
} 
```

这样，您可以对任何其他坐标执行任何坐标计算，无论它是什么类型。

显然，可能存在这种解决方案不起作用的情况，但总的来说，我认为它应该起作用。

# javascript - Javascript：动态函数名称

> ID：14178430
> 
> 赞同：14
> 
> 时间：2013-01-06T01:40:45.900
> 
> 标签：javascript, function, dynamic

如何创建具有动态名称的函数？就像是：

```
function create_function(name){
   new Function(name, 'console.log("hello world")');
}
create_function('example');
example(); // --> 'hello world' 
```

该函数也应该是一个函数对象，所以我可以修改对象的原型。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-04-05T11:41:00.920

在过去的 3 个小时里，我一直在玩这个，最后使用 new Function 至少有点优雅，正如其他线程所建议的那样：

```
/**
 * JavaScript Rename Function
 * @author Nate Ferrero
 * @license Public Domain
 * @date Apr 5th, 2014
 */
var renameFunction = function (name, fn) {
    return (new Function("return function (call) { return function " + name +
        " () { return call(this, arguments) }; };")())(Function.apply.bind(fn));
};   

/**
 * Test Code
 */
var cls = renameFunction('Book', function (title) {
    this.title = title;
});

new cls('One Flew to Kill a Mockingbird'); 
```

如果您运行上述代码，您应该会在控制台中看到以下输出：

```
Book {title: "One Flew to Kill a Mockingbird"} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-06T01:43:21.013

```
window.example = function () { alert('hello world') }
example(); 
```

或者

```
name = 'example';
window[name] = function () { ... }
... 
```

或者

```
window[name] = new Function('alert("hello world")') 
```

# grails - 我的grails控制器发生了一件奇怪的事情，为什么？

> ID：14178434
> 
> 赞同：1
> 
> 时间：2013-01-06T01:41:15.153
> 
> 标签：grails, controller

我的环境：

```
java version "1.6.0_38"
Grails 2.1.1
grails create-app test
cd test<br>
grails create-controller com.test.Test 
```

中**没有特殊**`UrlMapping`配置。

`com.test.TestController`：

```
package com.test

class TestController {
    def getA(){
        def ret = []
        println "in getA"
        render ret
    }

    def index() { 
        println "in index"
        render view:"index"

    }
} 
```

grails-app/test/index.gsp：

```
<html>
 <body> hello  </body>
</html> 
```

当我尝试访问 [ `http://HOSTNAME/PRJNAME/test/index`]时
，我想会发生这种情况：
HTML:
<html> <body> hello </body> </html>

控制台：
在索引中

但是，事情不是那样的，实际上是这样的：
HTML:
[]<html> <body> hello </body> </html>

控制台： 在 getA
的索引中

为什么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T02:26:58.207

Grails 调用所有以“get”开头的方法来查找用作操作的闭包。由于语法`def foo = { ... }`将闭包定义为属性，Groovy 添加了 getter 和 setter ( `getFoo`and `setFoo`)，因此通过查找属性并调用 getter 检查返回类型是否为闭包来发现闭包。由于控制器（默认情况下）是原型范围的，它们是为每个请求创建的，每个公共 getter 方法都会为每个请求调用。

所以解决方法是不要用“get”启动动作方法。

# django - 有没有办法在 Django Admin 中一次删除多个项目？

> ID：14178437
> 
> 赞同：0
> 
> 时间：2013-01-06T01:41:44.857
> 
> 标签：django

也许我遗漏了一些东西，但似乎应该有一种方法可以在 Django 管理面板中一次删除多个项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T01:44:32.977

是的，您应该能够单击模型。在带有条目列表的[屏幕上](http://docs.celeryproject.org/en/2.2/_images/djangoceleryadmin2.jpg)，您可以选择要删除的条目的复选框。

在`action`下拉列表中选择删除。

# c# - 通过进程 ID 获取进程信息（窗口标题）

> ID：14178438
> 
> 赞同：0
> 
> 时间：2013-01-06T01:41:46.537
> 
> 标签：c#, windows-8, microsoft-metro

快速提问... Microsoft 删除了 Metro Apps 中对 Process 类的支持。如何获取已知进程 ID 的窗口标题？

我从字面上用谷歌搜索了整个互联网的答案，但没有成功：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T01:45:46.857

Microsoft 不支持 Windows 应用商店应用中的 Process 类。

与桌面应用程序不同，Windows 应用商店应用程序不应该具有这种访问权限。此外，如果您有 Windows RT 并且正在运行使用 Process 类的 Metro 应用程序，那么您将无法运行，因为 Windows RT 不运行桌面应用程序。

很抱歉让您失望，但如果您需要这样做，请创建一个桌面应用程序（不能在 Windows RT 上运行）。

PS 由于诉讼，它们现在被称为 Windows Store 应用程序（而不是 Metro）。

# ruby - How to tokenize a simple mixed string into either ints or symbols?

> ID：14178439
> 
> 赞同：1
> 
> 时间：2013-01-06T01:41:46.113
> 
> 标签：ruby, string, tokenize

Trying to convert a simple math string `"1 2 3 * + 4 5 - /"` to an array of integers and/or symbols like `[1, 2, 3, :*, :+, 4, 5, :-, :/]`.

Is there a more elegant (and extendable) solution than this?

```
def tokenize s
    arr = s.split(/ /)
    symbols = %w{ + - / * }
    arr.collect! do |c| 
        if symbols.include?(c)
            c.to_sym
        else
            c.to_i
        end
    end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T05:19:50.197

```
def tokenize(str)
  str.split.map! { |t| t[/\d/] ? t.to_i : t.to_sym }
end 
```

Instead of checking if the token is in a set of operations, you can just check if it contains a numeral digit (for your use case). So it's either an integer, or an operation.

Also note that `Array#collect!` and `Array#map!` are identical, and `String#split` by default splits on white space.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T02:26:50.157

How about...

```
h = Hash[*%w{+ - / *}.map { |x| [x, x.to_sym] }.flatten] 
```

And then,

```
arr.map { |c| h[c] || c.to_i } 
```

So together:

```
def tokenize s
    h = Hash[*%w{+ - / *}.map { |x| [x, x.to_sym] }.flatten]
    s.split.map { |c| h[c] || c.to_i }
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T05:01:48.987

```
def tokenize s
  s.scan(/(\d+)|(\S+)/)
  .map{|num, sym| num && num.to_i || sym.to_sym}
end 
```

# c++ - 类模板状态数据成员，而不是可以显式特化的实体

> ID：14178440
> 
> 赞同：11
> 
> 时间：2013-01-06T01:41:49.803
> 
> 标签：c++, templates, visual-c++, template-specialization, explicit-specialization

我在下面的代码中遇到错误：

```
template<typename T, bool B = is_fundamental<T>::value>
class class_name;

template<>
class class_name<string, false>{
public:
    static string const value;
};

template<>
string const class_name<string, false>::value = "Str";
// error: not an entity that can be explicitly specialized.（in VC++) 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-08T19:11:42.323

您在这里混合了两种不同的方法。第一个是@KerrekSB 建议的

```
template<typename T, bool B = is_fundamental<T>::value>
class class_name;

// NOTE: template<> is needed here because this is an explicit specialization of a class template
template<>
class class_name<string, false>{
public:
    static string const value;
};

// NOTE: no template<> here, because this is just a definition of an ordinary class member 
// (i.e. of the class class_name<string, false>)
string const class_name<string, false>::value = "Str"; 
```

或者，您可以完整地写出通用类模板并明确专门化静态成员`<string, false>`

```
template<typename T, bool B = is_fundamental<T>::value>
class class_name {
public:
    static string const value;
};

// NOTE: template<> is needed here because this is an explicit specialization of a class template member
template<>
string const class_name<string, false>::value = "Str"; 
```

# python - Flask 不在同一个视图中提供多个媒体文件

> ID：14178441
> 
> 赞同：0
> 
> 时间：2013-01-06T01:41:59.007
> 
> 标签：python, file, flask, media, protected

使用 Flask，我试图根据数据库的内容在同一视图中动态显示各种内容（文本、图片、视频、音频）。文本和图片不会引起任何问题，但是一旦我尝试显示多个媒体（视频或音频），视图就永远不会完全加载。

这些文件不在静态文件夹中。它们使用该`send_from_directory()`功能受到保护和服务。

`py`以下是主文件的摘录

```
# -*- coding: cp1252 -*-
from flask import Flask
from flask.ext.pymongo import PyMongo
from flask import render_template, session, flash, escape, redirect, request, url_for, send_from_directory, Response
from flask.ext.wtf import Form, TextField, TextAreaField, PasswordField, BooleanField, RadioField, SelectField
from flask.ext.wtf import Required, validators, FileField
from flask.ext.login import LoginManager, UserMixin, login_user, logout_user, current_user, login_required
from flaskext.uploads import UploadSet, configure_uploads, IMAGES, AUDIO, UploadNotAllowed
from datetime import datetime
from functools import wraps
import sys, os

app = Flask(__name__)
app.secret_key = 'xxxxxxxxxxxxxxxxxxxxxxx'
mongo = PyMongo(app)

app.jinja_env.globals['mongo'] = mongo

ospath = os.path.dirname(os.path.abspath(__file__))
fullpath = os.path.join(os.path.dirname(os.path.abspath(__file__)), 'files')
app.config['UPLOADED_THEFILES_DEST'] = fullpath

login_manager = LoginManager()
login_manager.setup_app(app)

thefiles = UploadSet('thefiles', IMAGES + AUDIO)
configure_uploads(app, (thefiles))

#-----skipping a lot of code 

@app.route('/unlock/<filename>')
def unlock(filename):
    return send_from_directory(app.config['UPLOADED_THEFILES_DEST'], filename)

@app.route('/showdraft')
@login_required
@requires_admin
def showdraft():
    curseur = mongo.db.news.find_one({'num':-1, 'author':session['username']})
    return render_template('showdraft.html', post=curseur) 
```

这是视图：

```
{% extends "layout.html" %}
{% block body %}
<div class=page>
<style type="text/css">
    pre {
        white-space: pre-wrap;
        font:15px arial,sans-serif;
    }   
    IMG.displayed {
            display: block;
            margin-left: auto;
            margin-right: auto 
    }   
</style>
<h1>{{post.title}}</h1> 

{% for field in post.compo %}
{% for key in field %}

    {% if "Text" in key and field[key]!="" %}
        <p><pre>{{field[key]}}</pre></p>
    {% elif "Image" in key and field[key]!="none" %}
        <p><img class="displayed" src="{{url_for('unlock', filename = field[key])}}" /></p>
    {% elif "Sound" in key and field[key]!="none" %}
        <p><audio  src="{{url_for('unlock', filename = field[key])}}" controls> </audio></p>
    {% elif "Video" in key and field[key]!="none" %}
        <p><video  src="{{url_for('unlock', filename = field[key])}}" width="320" height="240" type="video/ogg" controls></video></p>
    {% else %}
        <p><pre>{{field}}</pre></p>         
        <p><pre>{{field[key]}}</pre></p>
    {% endif %}
{% endfor %}
{% endfor %}

<br><br>By {{post.author}} - {{post.date}}<br>
<a href="{{ url_for('login') }}">Go back to homepage.</a>
</div>
{% endblock %} 
```

最后是数据库示例（mongodb）

```
{
  "author": "Myself",
  "compo": [
{
  "Image1": "none"
},
{
  "Text1": "First text !"
},
{
  "Image2": "APicture.jpg"
},
{
  "Text2": "Second text."
},
{
  "Image3": "SomePicture.jpg"
},
{
  "Video1": "SomeVideo.ogv"
},
{
  "Sound1": "SomeSong.ogg"
},
{
  "Sound2": "SomeOtherSong.ogg"
},
{
  "Link1": ""
}
  ],
  "date": "10\/01\/12 17:54:12",
  "num": -1,
  "title": "The Title"
} 
```

我做错了什么阻止视图加载？

# html - 输入“值”返回转义

> ID：14178446
> 
> 赞同：1
> 
> 时间：2013-01-06T01:42:49.643
> 
> 标签：html, forms, input, escaping, cgi

以下 HTML 输入：

```
<input type=checkbox name="_name" value="_value"> 
```

返回 CGI 脚本对`name`和`value`，`_value`字符串不包含其 HTML 转义序列。

* * *

**例子：**

如果`_value`是：

```
123 &amp; 456 
```

CGI 脚本只接收：

```
123 & 456 
```

而我需要接收非转义字符串。

* * *

有没有解决的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T02:03:04.227

`&amp;`是一个[html 实体](http://en.wikipedia.org/wiki/Character_entity_reference)`&`，并被浏览器解释为。

为了得到“&” 您需要将值设置为：

```
123 &amp;amp; 456 
```

# c - C程序在打印阵列上崩溃

> ID：14178447
> 
> 赞同：0
> 
> 时间：2013-01-06T01:42:52.550
> 
> 标签：c, arrays, printf

我目前正在学习 C，并且正在尝试构建一个简单的解释器。它需要一个字符和一个数字。下面的程序仅`'r'`用于 char。代表范围（自然数）和它后面的`'r'`数字指定范围的长度。

示例执行：

```
Enter:
      r 9
 0 1 2 3 4 5 6 7 8 
```

相反会发生什么：

```
Enter:
      r 9 
```

程序在这里崩溃了。所以我相信错误在于数组的打印。

有问题的代码在这里：

```
#include <stdio.h>
#include <stdlib.h>
int* range(int i) {
    int *a=(int*) malloc(i * sizeof(int));
    int j;
    for(j=0;j<i;j++)
        a[j]=j;
    return a;
}
void printArray(int a[], int length) {

    int i;
    printf("\n");
    for(i=0;i<length;i++)
        printf("%d  ", a[i]);

}

int main() {
    char c;
    int n = 1;
    while(n>=0){
        printf("\nEnter:\n\t");
        scanf("%c %d", c, n);
        if(c='r')
            printArray(range(n), n);
    }
    return 0;
} 
```

那么是什么导致程序崩溃呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T01:48:17.507

你对 scanf 的论点是错误的，你需要

```
scanf("%c %d",&c, &n); 
```

你的根本问题是你没有证据表明崩溃发生在哪里，因为它发生了，我敢打赌它在 scanf() 中。

我建议您采用两种调试技术：

一个）。在您的代码中添加打印语句，以便您知道发生了什么 b)。使用交互式调试器，这样您就可以单步执行并查看发生了什么。

# git - Git 三路合并与冲突菜鸟问题阅读本书

> ID：14178452
> 
> 赞同：0
> 
> 时间：2013-01-06T01:43:40.947
> 
> 标签：git, version-control, branch, git-branch, branching-and-merging

我刚开始学习 git 版本控制，我正面临这个问题。给定以下分支结构（取自免费[书籍](http://git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging)）：

![分支结构](../Images/ca63693e8e92e6bc600f0e77ad009eb3.png)

假设 C4/C5 提交更改了`index.html`文件的同一部分。

```
git checkout master
git merge iss53 
```

如果我理解正确，我需要手动解决冲突。这本书说了一些关于冲突文件的内容。这个冲突文件在哪里？以及如何，鉴于以下冲突：

```
<<<<<<< HEAD:index.html
<div id="footer">contact : email.support@github.com</div>
=======
<div id="footer">
  please contact us at support@github.com
</div>
>>>>>>> iss53:index.html 
```

我可以放弃 HEAD 的所有更改，仅将“iss53”分支的更改合并到“master”吗？如何编辑这些行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T02:09:50.913

冲突的行将在有冲突的文件中。因此，如果您的 index.html 文件有冲突，您可以在文本编辑器中打开它以获取上面的视图。

您需要删除不需要的行（和/或进行更改），然后保存文件。然后`git add index.html`和`git merge --continue`。

或者，考虑使用`git mergetool` [http://www.kernel.org/pub/software/scm/git/docs/git-mergetool.html](http://www.kernel.org/pub/software/scm/git/docs/git-mergetool.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T02:18:14.757

> 这本书说了一些关于冲突文件的内容。这个冲突文件在哪里？

没有“冲突文件”，只有文件，如果合并的父级都对无法自动合并的文件进行了更改，则它们可能会*发生冲突。*在这种情况下，您需要通过编辑文件或（见下文）通过检出文件的两个父版本之一来手动解决冲突。

> 以及如何...我可以丢弃 HEAD 中的所有更改，仅将“iss53”分支中的更改合并到“master”中？

在合并期间，您可以使用`git checkout --theirs index.html`丢弃更改并使用正在合并的版本。这样做之后，文件仍将被标记为冲突，您必须将`git add index.html`冲突标记为已解决。

# python - “traceback.print_exc()”之后是否需要“return False”？

> ID：14178457
> 
> 赞同：0
> 
> 时间：2013-01-06T01:44:27.557
> 
> 标签：python

**我的代码：**

```
try:
    self.cookie = Cookie.SimpleCookie(os.environ["HTTP_COOKIE"])
    tmpuid = self.cookie["uid"].value
    tmpsid = self.cookie["sid"].value
except Exception as e:
    if not str(e).startswith('No cookie set'):
        import traceback
        traceback.print_exc()
    return False 
```

**“traceback.print_exc()”之后是否需要“return False”？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T01:49:48.633

当然，异常只在`No cookie set`异常上停止。如果是任何其他异常，程序将`return False`而不是继续下一条语句

# java - 在 Java 纸牌游戏中处理鼠标输入

> ID：14178459
> 
> 赞同：-1
> 
> 时间：2013-01-06T01:44:32.997
> 
> 标签：java, model-view-controller

我一直在开发一个 Java 纸牌游戏应用程序，为了学习，我正在尝试正确实现 MVC 架构。目前，我已经为甲板、桌子和所有玩家实现了模型。我还为每个模型创建了查看器类，每个查看器在 JPanel 中显示其各自的模型。然后我有一个 GameViewer 类，它将所有查看器放入一个 JFrame 中。

我的顶级类调用 Main，它创建所有模型和查看器的实例。我现在正在尝试实现控制器，它将使用 ActionListener 类来查找来自用户的按钮点击并相应地修改查看器和模型。我对如何最好地做到这一点感到困惑。

我的游戏设计非常有序，游戏向用户显示一条消息，然后等待用户点击鼠标输入，然后继续，等等。因此，我想我会在一个Main 中的 while 循环，其中每次迭代代表游戏中的一轮，直到游戏结束。

问题是我只对用户在特定时间的一些输入感兴趣。例如，我可能会向用户显示一条消息并告诉他们单击“确定”按钮继续。在这一点上，我不在乎他们是否点击其中一张卡片，因为我只是在寻找点击 OK 按钮。在其他时候，我可能会要求用户选择一张卡片，在这种情况下，我正在等待他们点击一张卡片，而我对点击 OK 按钮不感兴趣。

我想在没有任何轮询的情况下实现这一点，但我不确定最好的方法。如果我到了等待用户输入的地步，我是否使用 wait() 方法让游戏线程进入睡眠状态，直到来自 ActionListener 的事件回调发送通知？

否则，在 Main 中使用顺序代码是不是错误的方法？我是否应该在 ActionListener 的事件回调中实现所有游戏逻辑？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T02:00:40.997

Swing 是一个事件驱动的环境，你无法控制这些事件何时发生，用户可能会点击程序的某些部分或按下某个键，你真的无法控制。

Swing 使用单线程（AKA The Event Dispatching Thread）或 EDT），Swing 用于将事件分派给感兴趣的各方以及绘制请求。阻止此线程的任何操作都将阻止 EDT 通知您的应用程序事件或绘制请求，这将使您的程序“挂起”

您不能将 GUI 视为控制台程序之类的东西，其中输入很容易控制，相反，您需要根据控件的状态以及需要的对话框来引导用户。

所以...永远不要创建阻塞 EDT 的循环，或者执行长时间运行或阻塞（例如 IO 操作）来阻塞该线程。

永远不要从除 EDT 之外的任何线程创建或修改任何 UI 组件。

您可能想通读

*   [使用 JFC/Swing 创建 GUI](http://docs.oracle.com/javase/tutorial/uiswing/)
*   [事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)
*   [Swing 中的并发性](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)
*   [如何制作对话框](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T02:19:47.343

> 我的顶级类调用 Main，它创建所有模型和查看器的实例。我现在正在尝试实现控制器，它将使用 ActionListener 类来查找来自用户的按钮点击并相应地修改查看器和模型。我对如何最好地做到这一点感到困惑。
> 
> 我的游戏设计非常有序，游戏向用户显示一条消息，然后等待用户点击鼠标输入，然后继续，等等。因此，我想我会在一个Main 中的 while 循环，其中每次迭代代表游戏中的一轮，直到游戏结束。

这很好，但我要做的是让您的游戏成为一个逐步游戏（我忘记了这个游戏的名称），在游戏循环中，您可以根据之前的状态和用户输入更改程序的状态。然后让你的程序的行为依赖于状态。要实现这一点，请考虑创建一个枚举来封装程序状态并使用[状态设计模式](http://en.wikipedia.org/wiki/State_pattern)来允许程序根据其状态改变行为。

> 问题是我只对用户在特定时间的一些输入感兴趣。例如，我可能会向用户显示一条消息并告诉他们单击“确定”按钮继续。在这一点上，我不在乎他们是否点击其中一张卡片，因为我只是在寻找点击 OK 按钮。在其他时候，我可能会要求用户选择一张卡片，在这种情况下，我正在等待他们点击一张卡片，而我对点击 OK 按钮不感兴趣。

这就是状态模式大放异彩的地方，因为有了它，您将允许用户点击他想要的任何地方，但您的程序只会根据程序的状态响应某些点击。

> 我想在没有任何轮询的情况下实现这一点，但我不确定最好的方法。如果我到了等待用户输入的地步，我是否使用 wait() 方法让游戏线程进入睡眠状态，直到来自 ActionListener 的事件回调发送通知？

正确 - 不要进行轮询，不要使用 wait() 或其他任何可能停止程序流程的东西。

# php - 从 MySQL 结果创建分层数组

> ID：14178466
> 
> 赞同：3
> 
> 时间：2013-01-06T01:45:23.533
> 
> 标签：php, mysql, arrays, loops

我已经看到了其他关于此的问题，但与我的情况不太一样。我在 MySQL 中有下表：

```
 term_id       name           slug                 taxonomy     parent
1             Entry Form     entry-form           format       0
2             Page           page                 format       3
3             Facebook       facebook             format       0
4             Entry Form     facebook-entry-form  format       3
5             Twitter        twitter              format       0
6             Single        single                format       2 
```

我有以下 OBJECT 查询：

```
$formats = $wpdb->get_results($wpdb->prepare("
    SELECT * FROM table t
    WHERE t.taxonomy = 'format'
")); 
```

我结束了以下数组：

```
Array ( [0] => stdClass Object ( [term_id] => 1 [name] => Entry Form [slug] => entry-form [taxonomy] => format [parent] => 0 ) [2] => stdClass Object ( [term_id] => 2 [name] => Page [slug] => page [taxonomy] => format [parent] => 3 ) [3] => stdClass Object ( [term_id] => 3 [name] => Facebook [slug] => facebook [taxonomy] => format [parent] => 0 ) [4] => stdClass Object ( [term_id] => 4 [name] => Entry Form [slug] => entry-form-facebook [taxonomy] => format [parent] => 3 ) [5] => stdClass Object ( [term_id] => 5 [name] => Twitter [slug] => twitter [taxonomy] => format [parent] => 0 ) [6] => stdClass Object ( [term_id] => 6 [name] => Single [slug] => single [taxonomy] => format [parent] => 2 ) ) 1 
```

以上所有内容都需要转换为输出的分层列表，如下所示：

```
Entry Form
Twitter
Facebook
 - Entry Form
 - Page
 -- Single 
```

因此，我需要将数组 $formats 转换为基于父字段的分层数组。0 的父项表示它是顶级项目。因此，由于 Single 的父节点为 2，因此它是 Page 的子节点，而 Page 的父节点又是 3，并且是 Facebook 的子节点。

谁能帮我把我的数组变成一个分层数组，然后告诉我如何循环输出它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T02:10:44.100

如果由于查询量而导致的性能不会成为问题，最简单的解决方案是，不是执行单个查询来填充数组，而是在分层树中的每个节点执行一个查询，添加一个“AND parent = $ id”，其中 $id 是当前节点的 term_id。就像是：

1.  做一个 SELECT WHERE .... AND parent = 0;
2.  对于 1 中的每个结果，$id = term_id，选择 WHERE ... AND parent = $id
3.  递归重复直到没有更多结果

如果性能是一个问题，您仍然可以将查询转储到您的数组并将相同的算法应用于数组，但如果您真的有这么多的容量，您很可能会遇到内存问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T02:11:09.867

您需要在从数据库中获取数据时将数据放入 assoc 数组中：

```
//$groups - result array

$groups = array();

//$record contains the assoc array of the current record
while($record = $result->fetchAssoc()) {
      if (!isset($groups[$record["parent"]]))
      {
            $groups[$record["parent"]] = array();
      }

      array_push($groups[$record["parent"]], $record);
} 
```

最后，您将获得一个以 parent 作为键的层次结构的 assoc 数组。然后递归遍历它，你会得到结果：

```
function print_recursively(&$groups, $parent_id, $dashes = '')
{
    if(isset($groups[$parent_id]))
    {
          foreach($groups[$parent_id] as $key => $value)
          {
                print $dashes . ' ' . $value["name"];
                print_recursively(&$groups, $value["term_id"], $dashes . '-');
          }
    }
} 
```

我没有测试这段代码，但算法是正确的。

# rabbitmq - 兔集群负载均衡，和HA有什么区别？

> ID：14178468
> 
> 赞同：1
> 
> 时间：2013-01-06T01:45:40.623
> 
> 标签：rabbitmq

我有一个三节点集群，但没有到可靠队列。我使用 puka for python 作为客户端。

对于 ec2 上的负载平衡，我使用 route53 并为私有 IP 地址分配相等的权重。所以..如果我有三个 ec2 实例，我有 3 个 route53 条目。

所以......我的问题是这为什么是集群？在 route53 上不集群的三个节点与在 route53 上集群的三个节点有什么区别？所有的兔子都是可读写的吗？

我的理解是，如果我想要 HA 和可靠队列，那么 rabbit 将成为主从，并且首先需要一个工作集群，然后才能将 custer 变成可靠队列。

我对如何最好地集群以及集群与 HA 之间的差异感到困惑。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-05T19:43:31.570

集群节点将具有同等权重的节点，即没有主节点和从节点，唯一的优点是当发布者将消息推送到位于其他节点上的某个队列时，消息将从一个节点遍历到另一个节点（通过 Erlang 的集群 VM 层）到到达其消费者/工人。

另一方面，在 HA 模式下，所有队列和交换（根据您指定的某些策略）将在所有节点上复制，此外，只有一个主节点和一个或多个从节点，其中主节点是最旧的现有节点，当它死亡时，第二旧的节点将接管并成为主节点。

让我知道这是否是您所期望的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-17T16:23:24.273

[这](http://insidethecpu.com/2014/11/17/load-balancing-a-rabbitmq-cluster/)是一篇文章，概述了 HA 和负载平衡技术，以及如何在 RabbitMQ 集群中有效地将两者结合起来。

# postgresql - 返回行的简单 PostgreSQL 函数

> ID：14178470
> 
> 赞同：15
> 
> 时间：2013-01-06T01:46:07.573
> 
> 标签：postgresql, function, stored-procedures, types

如何将简单的选择查询转换为`select * from customers`pg 中的存储过程/函数？

我是 Postgres 的新手，`create function customers() as returns table/setof`只是感觉不对，因此这里有问题。

我知道 procs 在 pg 领域被称为“函数”。因此~~`create procedure`~~不存在，我唯一的选择是创建视图或函数。问题是`create function x() returns setof y`返回一个以逗号分隔的值行，如果没有进一步处理就无法使用（至少这是我在 pgAdmin 和 Ruby/Sequel 中看到的）。

`create function x() returns table(...)`需要我嵌入我不想嵌入的行定义。

我确信这一切背后都有一个原因，但令我惊讶的是，最常见的用例就是这么棘手。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-06T04:02:34.737

未经测试，但应该是正确的：

```
CREATE OR REPLACE FUNCTION getcustomers() RETURNS SETOF customers AS $$
SELECT * FROM customers;
$$ LANGUAGE sql; 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-06T18:35:23.947

> 问题是“创建函数x（）返回setof y”返回一个paren'd逗号分隔的行值，如果没有进一步处理就不能使用

该函数返回一行。要分解为单独的列，请使用以下命令调用它：

```
SELECT * FROM getcustomers(); 
```

这是假设函数定义了正确的返回类型。看：

*   [如何从 PL/pgSQL 函数返回多行？](https://stackoverflow.com/questions/17244256/how-to-return-multiple-rows-from-pl-pgsql-function/17281457#17281457)

[手册`CREATE FUNCTION`](https://www.postgresql.org/docs/current/sql-createfunction.html)应该是一个很好的起点。示例部分涵盖了这个主题。

# google-maps - 如何为移动设备提供静态谷歌地图，但为桌面提供动态？

> ID：14178471
> 
> 赞同：0
> 
> 时间：2013-01-06T01:46:10.267
> 
> 标签：google-maps, google-maps-api-3, cross-browser, media-queries, progressive-enhancement

**有哪些方法可以在更宽的视口上隐藏[Google 的静态地图](https://developers.google.com/maps/documentation/staticmaps/)，同时显示动态的[Google JavaScript 地图](https://developers.google.com/maps/documentation/javascript/)？**

构建移动优先网站是很常见的，通过 CSS 媒体查询来增强更大的视口。

在地图方面，静态地图[可以说更适合移动用户体验](http://bradfrostweb.com/blog/post/adaptive-maps/)（智能手机也是如此）。但是您可能会决定，对于更大的视口（计算机显示器甚至平板电脑），交互式/动态地图可能更适合您的用户——这取决于网站的目的。

使用哪些标准来选择将两者结合起来的最佳方法很重要？应该注意什么？

我还没有找到一个确凿的答案，但这是我迄今为止的研究：

* * *

[一位作者](http://fragility.us/2010/09/fallback-content-and-google-maps-api-version-3/)在 2010 年建议 JavaScipt API 中内置了一个后备选项：

> 这里的基本前提是API将 `map_canvas`容器的内容替换为地图显示。那么，为什么不向该容器添加一些后备内容呢？

修改他的代码，我可以在里面插入一个图像，`div`这将成为支持 JS 的谷歌地图。在这种情况下，图像来自静态地图 V2：

```
<body onload="initialize()">
  <div id="map_canvas" style="width:100%; height:100%">
    <img src="http://maps.googleapis.com/maps/api/staticmap?center=Berkeley,CA&zoom=14&size=400x400&sensor=false">
  </div>
</body> 
```

然而，这并没有禁用智能手机上的 JavaScript 地图——只是为没有 JS 的设备提供了一个后备。

* * *

[另一位作者](http://24ways.org/2010/finding-your-way-with-static-maps/)（也是 2010 年）也建议使用单行 jQuery 来隐藏该图像——V3 的更新代码可能是：

```
$('#map_canvas img').remove(); 
```

但这也无助于在窄视口设备（智能手机）上禁用 Google 的 JS 地图。

* * *

这两个指南都是 2010 年的——可能使用的是谷歌地图的 V2？（我什至在 2009 年使用一些聪明的正则表达式遇到了[另一位作者的指南](http://www.supersonicfeet.com/article/progressively-enhanced-google-maps-for-your-website)，但他还没有更新到“新的做事方式 [V3]”。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T15:37:52.960

第二种方法（隐藏图像）绝对没用，地图加载时无论如何都会替换图像。

第一种方法看起来不错，您只需要在 initialize() 开始时设置一个条件，您可以在其中过滤“小型”设备并离开该功能。它可能看起来像这样：

```
if(Math.min(screen.width,screen.height)<768){
        return;
} 
```

# html - 我在寻找什么 CSS 术语（或页面元素）？

> ID：14178472
> 
> 赞同：-2
> 
> 时间：2013-01-06T01:46:21.930
> 
> 标签：html, css

我正在寻找一个在各种标题元素（h1、h2、h3）跨越具有背景的页面时使用的术语。

像这样的东西：

```
 _______________________________
|         PAGE HEADER           |
|_______________________________|
|                               |
|                               |
|                               |
|                               |
|                               |
|                               |
|                               |
|                               |
|                               | 
```

我曾经看到一个非常酷的教程，其中一个人使用 CSS 使它看起来像页面标题从页面中弹出（使用文本阴影和其他东西）。我找不到本教程，而且 Google 搜索让我感到沮丧，因为当您查找“页眉”时，您最终会看到有关 html`head`标记的文章。

这种横跨文章顶部的“横幅”是否有特定的术语？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T02:01:17.627

我只想称它为文章标题，我不相信有任何行话。我制作了一个快速代码笔供您查看。希望这能回答你的问题！它就像您想要的那样横跨页面顶部。我也包括了一个 3D 样式的文本。[http://codepen.io/atomicpages/pen/beJFx](http://codepen.io/atomicpages/pen/beJFx)，您可以在这里使用 CSS 轻松创建 3D 文本：[3D 文本](http://www.3dcsstext.com/)

# mysql - 使用 ssh 导入 .sql 文件

> ID：14178474
> 
> 赞同：1
> 
> 时间：2013-01-06T01:46:48.603
> 
> 标签：mysql, sql, import, ssh, phpmyadmin

我在网上阅读了许多关于如何使用 ssh 导入 sql 脚本的教程，`mysql –u [username] –p [database] < [file_name].sql`但这仅适用于单个数据库。我创建了我的本地主机（所有数据库）的 sql 文件，我使用 PhpMyAdmin 执行此操作并尝试使用导入代码但没有任何反应。

有没有单独的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T02:11:41.230

mysql -h localhost -u root -p -e "source d:\test.sql"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T01:54:36.120

只要您不指定`--one-database`arg，就没有什么可以阻止您在文件`USE <some-other-db>;`中根据需要添加语句。`.sql`

# bash - 为什么随机添加到 wget 输出？

> ID：14178477
> 
> 赞同：0
> 
> 时间：2013-01-06T01:47:03.333
> 
> 标签：bash, wget

我编写了一个脚本来通知我网站上的更改。我使用 wget 下载站点 html，然后将其与过去下载的站点进行比较。问题是它每隔几次就会检查该站点`<!--cached-->`是在添加`</html>`. 我试图将 --no-cache 添加到 wget 但这没有区别。

为什么`<!--cached-->`随机添加到 wget 输出？这是我可以采取的措施来防止这种情况发生吗，还是我应该重新考虑检查网站的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T02:07:20.430

Oracle 添加了与此类似的标签来指示可以从缓存中提供的动态页面，以避免重新生成页面。这可能表明内容与您之前的阅读内容没有变化。你可以把它过滤掉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-09T06:13:06.260

`--mirror`在递归检索中使用该选项时可能会发生这种情况。从文档：

> 打开适合镜像的选项。此选项打开递归和时间戳，设置无限递归深度并保留 FTP 目录列表。它目前相当于“-r -N -l inf --no-remove-listing”。

[对于这样的时间戳](https://www.gnu.org/software/wget/manual/wget.html#Time_002dStamping)示例，html 文件中每个打开 div 标记之后的第一个条目都带有注释“！--**缓存**-DDD, DD MMM YYY HH:MM:SS +4 digit offset-->”。

# ruby - Ruby 正则表达式匹配四项行

> ID：14178478
> 
> 赞同：-2
> 
> 时间：2013-01-06T01:47:30.930
> 
> 标签：ruby, regex

我正在使用 pdf-reader 阅读我的每月财务记录。我感兴趣的所有行都以描述开头，然后是日期 ##/##/#### 然后是两美元的金额 $#.## $#.## 。

像这样：

```
Gas Station            12/12/2012         $68.00             $485.00 
```

有时，这些数字会有括号 $(4.50) 表示退货或负金额。我希望所有符合此“模式”的行都作为每行 4 项列表返回。因此，我将整条线与未确定数量的空格相匹配，偶尔还会在价格上加上括号。

```
require 'pdf-reader'
reader = PDF.Reader.new("month.pdf")
reader.pages.each do |page|
  page.split("\n").each do |line|
  if line # MATCHING REGEX HERE
     #HANDLE 4 VALUES FROM REGEX
  end
end 
```

* * *

对于任何想了解我如何使用代码的人来说，这里是源代码[https://github.com/danielpclark/INGdirect_pdf_processor](https://github.com/danielpclark/INGdirect_pdf_processor)。随意在您自己的项目中使用它来处理银行数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T01:55:56.923

试试这个正则表达式：

```
(.*)\s+(\d{2}\/\d{2}\/\d{4})\s*(\(?\$\d+\.\d+\)?)\s+(\(?\$\d+\.\d+\)?) 
```

它将有 4 场比赛：

*   描述
*   日期
*   第一笔金额
*   第二个金额

这里是 Rubular：[http: //rubular.com/r/2mcrGZiAOe](http://rubular.com/r/2mcrGZiAOe)

您还可以使用命名匹配，因为它们更优雅（也是`x`多行正则表达式的修饰符）：

```
if line_match = line.match(/
    (?<description>.*)\s+
    (?<date>\d{2}\/\d{2}\/\d{4})\s*
    (?<amount_1>\(\$\d+\.\d+\)|\$\d+\.\d+)\s+
    (?<amount_2>\(\$\d+\.\d+\)|\$\d+\.\d+)/x)
  # now you can use: line_match[:date], line_match[:amount_1], etc. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T04:13:10.307

[`String.scan`](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-scan)是追求这样的数据的好方法：

```
string = 'This is some text
Gas Station   12/12/2012 $68.00   $485.00
This some more text
Reimbursement 01/01/2012 $(68.00) $(485.00)
'

string.scan(%r{^(.+?) \s+ (\d{1,2}/\d{1,2}/\d{4}) \s+ ([$()\d.]+) \s+ ([$()\d.]+) }x)
[
    [0] [
        [0] "Gas Station",
        [1] "12/12/2012",
        [2] "$68.00",
        [3] "$485.00"
    ],
    [1] [
        [0] "Reimbursement",
        [1] "01/01/2012",
        [2] "$(68.00)",
        [3] "$(485.00)"
    ]
] 
```

# ruby-on-rails - 如何在 rails 3.2 中自定义设计视图以仅包含注册表单中的某些元素

> ID：14178481
> 
> 赞同：1
> 
> 时间：2013-01-06T01:48:42.513
> 
> 标签：ruby-on-rails, devise

我是一名 Rails 新手，我已经开始编写一个网络应用程序。

我使用设计来设置用户注册并生成设计视图模板。

我在那里添加了自定义模型 - 用户名、名字、姓氏等。然后我将它们添加到 user.rb 等的 attr_accessor 中，并验证这些细节的存在

我想在成功工作的编辑注册表单中添加这些元素。

在注册页面上 - 代码仅要求输入电子邮件、密码、确认密码（设计为默认设置）。

如果我现在尝试注册为新用户（在所有这些步骤之后），我会收到一条错误消息，指出名字不能为空，姓氏不能为空等。

我如何从注册中排除这些，但在用户配置文件编辑中保持它们处于活动状态？

我希望我说得通。感谢您的提前帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T02:49:47.310

您可以进入您的视图 > 设计文件夹并创建一个注册文件夹（如果它不存在）并创建一个 new.html.erb 看看您在链接下找到的文件： [https ://github.com/plataformatec/devise /blob/master/app/views/devise/registrations/new.html.erb](https://github.com/plataformatec/devise/blob/master/app/views/devise/registrations/new.html.erb)

将其复制到您的新文件并根据需要对其进行自定义...它应该覆盖设计默认视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T10:02:03.423

If I understand correctly, during signup/registration you want to only ask for email and password, excluding the other User model attributes (first name, surname) from that form. However you also want to later have these other attributes validated when the user edits their profile.

So since you are validating for the presence of these extra attributes which are not provided when the signup form is submitted, the attempt to create a new user record simply fails to create at validation.

Try the **`:on => :update`** validation option to specify that certain fields should only be validated when later updated, rather than the default which is to validate any time a record is saved. Like this:

```
class User < ActiveRecord::Base
    validates :email, :presence => true
    validates :firstname, :presence => true, :on => :update
    validates :surname, :presence => true, :on => :update
    ...
end 
```

See [http://guides.rubyonrails.org/active_record_validations_callbacks.html#on](http://guides.rubyonrails.org/active_record_validations_callbacks.html#on)

# ruby-on-rails - 模型关联 Rails 中 nil:NilClass 的未定义方法“电子邮件”，不起作用

> ID：14178484
> 
> 赞同：1
> 
> 时间：2013-01-06T01:49:13.783
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我有一个问题，我把这个归因于我评论模型：

```
class Comment < ActiveRecord::Base
  attr_accessible :comment
  belongs_to :post
  belongs_to :user 
```

这在用户模型中

```
class User < ActiveRecord::Base
  attr_accessible :email, :password, :password_confirmation
  has_many :posts
  has_many :comments 
```

但这不起作用：

```
 <% post.comments.each do |comment|   %>
    <div id="comments" >
      <%= comment.user.email %>
           <%= comment.comment %>
    </div>
   <%end%> 
```

出现错误：

```
undefined method `email' for nil:NilClass 
```

请问有什么问题，在创建评论时我做出了属性，请看：

```
 @comment = @post.comments.create(params[:comment],:user_id => current_user.id) 
```

我如何解决这个错误，请-

我试试这个：

```
@comment = Comment.new(params[:comment])
@comment.user = current_user
@comment.post = @post
@comment.save
this

@comment = @post.comments.create(params[:comment].merge(:user_id => current_user.id)) 
```

还有这个：

```
@comment = @post.comments.build(params[:comment])
@comment.user = current_user
@comment.save 
```

不工作

同样的错误：

```
undefined method `email' for nil:NilClass
Extracted source (around line #48):

45: 
46:       <% post.comments.each do |comment|   %>
47:         <div id="comments" >
48:           <%= comment.user.email %>
49:                <%= comment.comment %>
50:         </div>
51:        <%end%> 
```

我不知道我的模型评论有什么问题：user_id

attr_accessible :comment,:user_id,:post_id

我的表格是这样的

```
 <div id="comment_form_<%= post.id %>" style="display: none;" >

      <%= form_for [post,post.comments.build], :remote => true,:class=>"comment" do |com| %>
          <%= com.text_area :comment %>
          <%= com.submit "aaa" %>

      <%end %> 
```

请帮助我，我不知道错误在哪里，数据库已正确迁移

更新：

有一个 before_filter 并且需要登录才能看到要评论的页面，所以有 current_user，我重置了 bd 并记录了新的评论，我测试了获取 comment.user_id 并获取用户的 ID，但方法是 comment.user。电子邮件不起作用，我将发布，评论模型是：

```
 attr_accessible :comment,:user_id,:post_id
  belongs_to :post
  belongs_to :user
  validates_presence_of :comment ,:on =>:create 
```

模型用户是：

```
 class User < ActiveRecord::Base
  attr_accessible :email, :password, :password_confirmation,:username
  has_many :posts
  has_many :comments

  attr_accessor :password
  before_save :encrypt_password

  validates_confirmation_of :password
  validates_presence_of :password, :on => :create
  validates_presence_of :email
  validates_uniqueness_of :email 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T12:44:36.043

可能使用`@post`而不是`post`在视图文件中会有所帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T02:25:39.507

您必须确定，在您保存**评论时 current_user***不为零*。**在您列出post.comments**时，没有用户没有评论。

 ****这就是你所要做的。如果它再次不起作用 - 向我们展示动作和模型的完整源代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T11:19:22.873

请检查它应该存储 user_id 的数据库注释表。如果@post.comments 的任何记录中没有 user_id，则会引发错误。可能是 user_id 列中的一个或多个记录不能为零。

采用`select * from comments where user_id is null;`****

# php - 如何从 PHP 中的另一个文件调用函数（require_once 并调用它，不起作用）

> ID：14178485
> 
> 赞同：0
> 
> 时间：2013-01-06T01:49:20.863
> 
> 标签：php

我在从另一个文件调用函数时遇到问题。我试过把它放在`require_once( $library_path .'Main/SystemUtility.class.php');`顶部而不是调用该函数，但它不起作用。函数名为 loadController，位于 SystemUtility.class.php 中。

```
<?php
    class Main {
        function Main() {
        }

        function getInstance() {
            static $instance = null;

            if (null === $instance) {
                $instance = new Main();
            }

            return $instance;
        }

        function dispatch($args = '') {
            $page = '';
            $params = '';
            $controller = 'index';
            $action = 'index';
            $count = 0;

            if ($args != '') {
                $page = $args;
            } else {
                if (isset( $_GET['page'] )) {
                    $page = $_GET['page'];
                } else {
                    if (!isset( $_GET['page'] )) {
                        $page = 'index/index';
                    }
                }
            }

            if ($page == 'index.php') {
                $page = '';
            }

            $params = explode( '/', $page );
            $count = count( $params );

            if (0 < $count) {
                if ($params[0] != '') {
                    $controller = $params[0];
                }
            }

            if (1 < $count) {
                if ($params[1] != '') {
                    $action = $params[1];
                }
            }

            $action = str_replace( '-', '_', $action );
            $controller = str_replace( '-', '_', $controller );
            $valueparams = array(  );
            $i = 0;

            while ($i < $count - 2) {
                $valueparams[$i] = $params[$i + 2];
                ++$i;
            }

            include('script.inc.php');
            require_once($library_path.'Main/NesoteController.class.php');
            loadController($controller.'Controller');
            $controllerInstance = createControllerInstance( $controller . 'Controller' );
            $actionexists = 1;
            $actionMethod = $action . 'Action';

            if (!method_exists( $controllerInstance, $actionMethod )) {
                $actionexists = 0;

                if (!file_exists( '' . $view_path . $controller . '/' . $action . '.tpl.html' )) {
                    $err_msg = '<br><strong>Error: </strong>Requested page was not found!';
                    $ini_error_status = ini_get( 'error_reporting' );

                    if ($ini_error_status != 0) {
                        $err_msg .= '' . '<br><strong>Details: </strong><strong>' . $action . '</strong> Action not found!';
                    }

                    loadErrorTemplate( $err_msg );
                    exit( 0 );
                }
            }
            if (strcasecmp( get_parent_class( $controllerInstance ), 'NesoteController' ) != 0) {
                $ini_error_status = ini_get( 'error_reporting' );

                if ($ini_error_status != 0) {
                    echo '' . '<br><strong>Error: ' . $controller . 'Controller</strong> should extend NesoteController.';
                }

                exit( 0 );
            }

            $shownoviewerror = 0;

            if (!file_exists( '' . $view_path . $controller . '/' . $action . '.tpl.html' )) {
                $shownoviewerror = 1;
                loadTemplate( '' . $view_path . $controller . '/' . $action . '.tpl.html', '' );
            } else {
                loadTemplate( '' . $view_path . $controller . '/' . $action . '.tpl.html' );
            }

            arguments( $valueparams );

            if ($actionexists != 0) {
                $actionMethod(  );
            }

            if ($shownoviewerror == 1) {
                $ini_error_status = ini_get( 'error_reporting' );

                if ($ini_error_status != 0) {
                    echo '' . '<br><strong>Error: </strong> View file for the ' . $action . ' action, <strong>' . $view_path . $controller . '/' . $action . '.tpl.html</strong> does not exist.';
                }

                exit( 0 );
            }

            includePage( $controllerInstance );
        }
    }

    require_once( 'script.inc.php' );
    require_once( $library_path .'Main/SystemUtility.class.php');
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T01:58:49.330

您必须创建一个实例`SystemUtility`并在其上调用您的方法。

代替：

```
 include('script.inc.php');
 require_once($library_path.'Main/NesoteController.class.php');
 loadController($controller.'Controller'); 
```

和：

```
 require_once($library_path.'Main/SystemUtility.class.php');
 $sysUtil = new SystemUtility();
 $sysUtil->loadController($controller.'Controller'); 
```

# iphone - （Obj-C）有没有办法一次分配我所有的 NSDecimalNumbers 以用于计算器风格应用程序的各个部分？

> ID：14178489
> 
> 赞同：0
> 
> 时间：2013-01-06T01:49:59.243
> 
> 标签：iphone, objective-c, xcode

我在我的应用程序中使用了大约 10 个左右的 NSDecimalNumber，但我很难找到一种方法来一次将它们全部分配给情节提要上的所有各种按钮使用。viewcontroller.h 的@interface 本来是逻辑位置，但它不会让我越过“NSDecimalNumber *one”。我应该怎么办？

另外，由于我需要在每个对象中简单地更改值（而不是删除和重新创建），我应该如何处理内存释放？

我对编程还是很陌生，所以尽量不要过于技术化。提前致谢！

@Kurt Revis 好吧，让我举个例子：在 viewcontroller.h 中，我们有 1 个出口和 2 个动作，连接到一个标签和 10 个按钮。我们还有 NSDecimalNumbers 屏幕和数字。

```
@interface viewcontroller:UIViewController{
IBOutlet UILabel *CalculatorScreen;
NSDecimalNumber *screen;
NSDecimalNumber *digit;}
- (IBAction)DigitPressed:(id)sender;
- (IBAction)OperatorPressed:(id)sender; 
```

当“DigitPressed”被点击时，NSDecimalNumber“屏幕”的计算方式如下：

```
- (IBAction)DigitPressed:(id)sender {    
screen= [[screen decimalNumberByMultiplyingBy: ten] decimalNumberByAdding:digit];} 
```

（其中“十”也是一个 NSDN。）但为了做到这一点（或者我认为），必须像这样分配“屏幕”：

```
screen=[NSDecimalNumber alloc]; 
```

所以现在我们得到了这个：

```
- (IBAction)DigitPressed:(id)sender {    
screen=[NSDecimalNumber alloc];
screen= [[screen decimalNumberByMultiplyingBy: ten] decimalNumberByAdding:digit];} 
```

- 但随后每次命中都会将其分配给一个新地址。同样，如果我尝试使用“OperatorPressed”部分中的数字，则必须独立分配它。

因此，我需要一种方法来分配内存一次，然后在我的 .m 文件的所有方法中一遍又一遍地使用该数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T04:59:16.330

我会通过并让这些东西工作。另外，我将更改您的某些名称的大小写以匹配典型的 Objective-C 实践——希望您不介意。

```
@interface ViewController : UIViewController {
    IBOutlet UILabel *calculatorScreen;
    NSDecimalNumber *screen;
}

- (IBAction)digitPressed:(id)sender;

@end 
```

您需要初始化`screen`为一个合理的起始值。因为你的类是一个视图控制器，所以这样做的好地方是`-viewDidLoad`.

```
- (void)viewDidLoad
{
    [super viewDidLoad]; // in case your superclass needs to do any work

    screen = [NSDecimalNumber zero];

    // also, make sure it shows up in the UI
    calculatorScreen.text = [screen stringValue]; // Convert from NSDecimalNumber to NSString, and pushes it into the label
} 
```

接下来是数字按钮。目前尚不清楚您是否希望有一种`digitPressed:`方法被所有 10 位按钮调用，或者它是否应该只用于其中一个按钮。首先，最简单的方法是为每个按钮单独操作。

这是“1”按钮的方法：

```
- (IBAction)digit1Pressed:(id)sender {
    // Create intermediate values
    NSDecimalNumber* one = [NSDecimalNumber decimalNumberWithMantissa:1 exponent:0 isNegative:NO];  // 1 * 10^0 = 1
    NSDecimalNumber* ten = [NSDecimalNumber decimalNumberWithMantissa:1 exponent:1 isNegative:NO];  // 1 * 10^1 = 10

    // Compute the new result
    NSDecimalNumber* result = [[screen decimalNumberByMultiplyingBy:ten] decimalNumberByAdding:one];

    // Put the result back in the screen
    screen = result;

    // and update the UI
    calculatorScreen.text = [screen stringValue];
} 
```

同样，“2”按钮将连接到此操作：

```
- (IBAction)digit2Pressed:(id)sender {
    NSDecimalNumber* two = [NSDecimalNumber decimalNumberWithMantissa:2 exponent:0 isNegative:NO];  // 1 * 10^0 = 1
    NSDecimalNumber* ten = [NSDecimalNumber decimalNumberWithMantissa:1 exponent:1 isNegative:NO];  // 1 * 10^1 = 10

    // take a shortcut and don't bother with the `result` variable
    screen = [[screen decimalNumberByMultiplyingBy:ten] decimalNumberByAdding:two];
    calculatorScreen.text = [screen stringValue];
} 
```

等等。请注意，我们不必在视图控制器中记住“一”、“二”和“十”——我们可以在需要它们时创建它们，并在使用完它们时释放它们。（是的，它的效率稍微低一些，但是这些对象又小又轻；你每秒可以创建数千个，但没人会注意到。）

您的下一个问题：拥有 10 个单独的“数字”动作不是很愚蠢吗？是的。您可以改为使用一个“digitPressed”操作来查看发件人，确定它是哪个按钮，然后做正确的事情。

区分哪个按钮是哪个按钮的简单方法：创建按钮时，将其设置`tag`为与其数字相同。您可以通过代码或在界面构建器中进行设置。然后，action 方法查找发送者的标签。

```
- (IBAction)digitPressed:(id)sender {
    NSDecimalNumber* digit = [NSDecimalNumber decimalNumberWithMantissa:[sender tag] exponent:0 isNegative:NO];  // digit * 10^0
    NSDecimalNumber* ten = [NSDecimalNumber decimalNumberWithMantissa:1 exponent:1 isNegative:NO];  // 1 * 10^1 = 10
    screen = [[screen decimalNumberByMultiplyingBy:ten] decimalNumberByAdding:digit];
    calculatorScreen.text = [screen stringValue];
} 
```

# php - PHP是连接而不是添加

> ID：14178496
> 
> 赞同：2
> 
> 时间：2013-01-06T01:51:39.967
> 
> 标签：php, concatenation

我遇到了这个问题，我的 PHP 代码是连接而不是添加

```
$offset=$_POST['offset']; //Get the offset
$searchLimit = 10;
$searchCount = count(sql) //For the purpose of this question, it returns the result count 
```

现在我想计算分页的“来自”显示，所以我这样做了

```
$from = ($offset*$searchLimit)+1; 
```

它工作正常时

> $偏移量 == 0

我得到了预期的结果，即 1。但是当

> $偏移量 == 1

它给了我 101。基本上它是连接 10 和 1 给我 101。我尝试了以下

```
$from = (int)($offset*$searchLimit)+1
$from = ((int)($offset)*$searchLimit)+1
$from = (((int)($offset)*$searchLimit)+1) 
```

我什至试过

```
$offset = (int)$_POST['offset']; 
```

但他们都给出了相同的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T01:56:21.510

你缺少一个`$`before `searchLimit`。结果，它被视为字符串。这会导致意外行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T01:57:53.490

您在 searchLimit 之前（可能在 sql 之前）错过了 $ 符号。-_-

# c# - WPF MVVM 在 ViewModel 中存储用户控件？一个大禁忌？

> ID：14178498
> 
> 赞同：2
> 
> 时间：2013-01-06T01:51:57.500
> 
> 标签：c#, wpf, mvvm

我试图在我的主窗口中托管一个用户控件，但我很难决定如何将它实现到我的视图模型中。

首先，我为用户控件创建了一个单独的视图模型，并使用数据模板将其映射到控件，然后再将其托管在`ContentControl`：

**数据模板：**

```
<DataTemplate DataType="{x:Type viewModels:TaskbarIconViewModel}">
    <tb:TaskbarIcon/>
</DataTemplate> 
```

**XAML：**

```
<ContentControl Content="{Binding TaskbarIconViewModel}"/> 
```

如果我要使用此设置，我将如何调用用户控件上的方法以及如何设置用户控件的属性，无论是在 XAML 中还是在视图模型中？

其次，我的想法是在视图模型中保留用户控件，然后`ContentControl`再次将其绑定到 a。这对我和 MVVM 来说似乎是错误的。这是正确的吗？在视图模型中保存控件是否可以接受？

**在视图模型中：**

```
public TaskbarIcon TaskbarIcon { get; set; } 
```

**XAML：**

```
<ContentControl Content="{Binding TaskbarIcon}"/> 
```

这里最好的做法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T02:10:54.870

在 ViewModel 中存储 UserControl：一个很大的禁忌？**YES**
ViewModel 不应该知道视图。

你在说的是[PRISM](http://compositewpf.codeplex.com/)的地区做什么，不要重新发明轮子；）

# css - 如何使用 CSS 关键帧显示部分精灵以创建动画？

> ID：14178499
> 
> 赞同：1
> 
> 时间：2013-01-06T01:52:10.160
> 
> 标签：css, sprite, css-animations

我的目标是较旧的 webkit 浏览器 QT Webkit，不幸的是它不支持更改关键帧中的背景图像。因此，我已经创建了结合所有 12 帧的精灵，现在正尝试以一定的间隔遍历每一帧以创建动画。但是我有一个水平精灵，当我尝试`background-position-x`在某个关键帧 % 处进行更改时，它会滑动。

雪碧：http: [//i.imgur.com/krQPw.png](http://i.imgur.com/krQPw.png)

示例： http: [//jsbin.com/amoxef/1](http://jsbin.com/amoxef/1)（我将动画持续时间设置得更长，以查看发生了什么。最初我希望将其设置为 1 秒以用于整个动画周期）。

我该如何让它“跳跃”而不是滑动到下一帧（精灵中的位置）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T02:46:08.103

您应该检查`steps()`CSS 关键帧中的选项。

这是一个我没有测试过的例子......只是一个使用的演示`steps()`......[更多细节在这里：使用 CSS 动画的步骤（）](https://hacks.mozilla.org/2011/09/taking-steps-with-css-animations/)。

```
#loader{
    border: 2px black solid;
    width: 800px;
    height: 480px;
    background: url('http://i.imgur.com/krQPw.png?1');
    background-position: 0px 0px;
    background-repeat: no-repeat;

    -webkit-animation: play .8s steps(10) infinite;
       -moz-animation: play .8s steps(10) infinite;
        -ms-animation: play .8s steps(10) infinite;
         -o-animation: play .8s steps(10) infinite;
            animation: play .8s steps(10) infinite;

}

@-webkit-keyframes play {
   from { background-position:    0px; }
     to { background-position: -8800px; }
}

@-moz-keyframes play {
   from { background-position:    0px; }
     to { background-position: -8800px; }
}

@-ms-keyframes play {
   from { background-position:    0px; }
     to { background-position: -8800px; }
}

@-o-keyframes play {
   from { background-position:    0px; }
     to { background-position: -8800px; }
}

@keyframes play {
   from { background-position:    0px; }
     to { background-position: -8800px; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T02:42:18.353

终于明白了：http: [//jsbin.com/amoxef/6](http://jsbin.com/amoxef/6)

我这样做是为了让它保持相同的位置，例如从 0% 到 7.999%，在 8% 时，它将改变`background-position`. 因此，由于实际的变化周期是如此之小，它看起来像是“跳转”到下一帧并一直停留到下一个定义的 % 帧。

# java - 主页意图启动 SettingsActivity 而不是 MainActivity？

> ID：14178503
> 
> 赞同：0
> 
> 时间：2013-01-06T01:53:17.433
> 
> 标签：java, android, eclipse

我正在 Eclipse 上开发一个 android 启动器，该包包含 MainActivity，它是启动器本身和 SettingsActivity。

我的问题是，如果我打开设置页面，转到其他地方，然后单击主页按钮，我会进入设置页面（而不是直接进入 MainActivity），就像它记得我已经打开了设置一样。

这是 AndroidManifest.xml 文件的摘录：

```
<!-- Launcher-->
<activity
    android:name=".launcher.MainActivity"
    android:exported="false"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.HOME" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity>
<!-- Settings -->
<activity
    android:name=".launcher.SettingsActivity"
    android:label="@string/launcher_settings_name"
    android:theme="@style/android:Theme.DeviceDefault" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

您可以看到 Launcher 响应 home 意图，而 SettingsActivity 响应来自启动器的自己的意图。

无论应用程序的最后一个活动是否是设置，我如何确保主页意图将用户直接带到启动器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T02:51:34.893

这是因为您已将设置活动设置为启动器。

试试这个，

```
<!-- Launcher-->
<activity
    android:name=".launcher.MainActivity"
    android:exported="false"
    android:label="@string/app_name" >
<intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.HOME" />
    <category android:name="android.intent.category.DEFAULT" />
    <category android:name="android.intent.category.LAUNCHER" />
</intent-filter>
</activity>
<!-- Settings -->
<activity
    android:name=".launcher.SettingsActivity"
    android:label="@string/launcher_settings_name"
    android:theme="@style/android:Theme.DeviceDefault" >
 <intent-filter>
    <action android:name="android.intent.action.MAIN" />
  </intent-filter>
</activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T03:47:27.860

我在另一个问题上得到了解决方案：

[使家庭意图带入特定的应用程序活动？](https://stackoverflow.com/questions/14190254/make-home-intent-take-to-specific-application-activity)

--

如果您尝试创建主屏幕替换，则该活动需要在清单中的标记中包含以下内容：

```
android:launchMode="singleInstance" 
```

这将确保该活动只存在一个实例，并且当该活动启动其他活动时，它们都将进入新任务，而不是主屏幕替换任务的一部分。

# google-app-engine - Google App Engine 数据存储中的高效 NoSQL 建模

> ID：14178507
> 
> 赞同：7
> 
> 时间：2013-01-06T01:53:30.643
> 
> 标签：google-app-engine, nosql, google-cloud-datastore, data-modeling

我正在 Google App Engine 上编写一个应用程序来帮助我更好地学习它。我将数据保存在数据存储区中。

该应用程序是类似于 StackOverflow 的模型：您有一个 Story 实体，其中包含一组 Comment 实体，而这些实体又可以被许多用户喜欢/讨厌。我现在建模的方式如下：

```
class Story {
    Comment[] comments;
    ...
}

class Comment {
    User[] likes;
    User[] hates;
    ...
} 
```

因此，当您加载给定故事时，您可以列出所有评论，以及每条评论的喜欢和讨厌的百分比。您还可以跟踪给定用户是否为评论投票。

我假设我可以延迟加载 Comment 实体中的所有实际用户，但即便如此，我还是觉得有更好的方法来做到这一点。

**这将如何处理一个有数百条评论的故事，每条评论都有数十万票？！**

**在 NoSQL 中对此类概念进行建模的常用方法是什么？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-06T03:53:50.687

可能的答案：

(1) 这将如何处理数百条评论？

您似乎已经通过建议您延迟加载 UI 中的评论来回答这个问题。我知道像 Mongo 和 CouchDB 这样的文档数据库可以让您选择在数据从数据库中出来时对其进行分页。诸如“限制”和“跳过”之类的东西。

数百条评论不应该太难存储，我不会想象它们在查询中会很慢。

（2）如何处理几十万票？

我认为最好的方法是简单地对此进行预处理。当用户对某事进行投票时，您可能会考虑进行两种操作：1）将评论的点赞数加一。2）在别处写下用户投票的记录。

第一步将非常快速和简单，它会立即向用户显示喜欢的总数。

第二个操作（存储用户所做的 - 他们喜欢/不喜欢的评论）可能会慢一些，但您可以轻松完成。

重要的是要记住，使用 NoSQL 我们不担心数据的规范化，所以冗余信息是可以的！

(3) 对这些概念建模的常用方法是什么？

就像我在 (2) 中提到的 - 根据我的经验 - 建模的一个好方法是快速增加项目并存储冗余信息。

在各种文档中多次存储数据特别有用，因为加入 Mongo 和 Couch 之类的东西*非常*困难。最好将该信息存储在需要它的实体旁边。

NoSQL 数据库的另一个质量是允许它们不一致。在查看用户喜欢/不喜欢的内容时，可以将评论的喜欢/不喜欢计数设为评论部分中的一个数字和*不同的数字。*

（关于您的模型的唯一可能令人恐惧的注意事项是拆分实体。请始终记住，如果您拆分事物 - 就像在传统 RDMS 中那样 - 您必须稍后加入它们！这对于 NoSQL 来说非常困难。）

# d3.js - 在家中重现 d3.js 示例的安全问题

> ID：14178509
> 
> 赞同：2
> 
> 时间：2013-01-06T01:54:10.647
> 
> 标签：d3.js, shapefile, map-projections

我正在尝试从 github gist（美国地图）[https://gist.github.com/4431123](https://gist.github.com/4431123)复制此示例 所需的文件“ [us.json](https://gist.github.com/raw/4090846/b8c888f35c42400a080ab03c31a7649e0b9bc9a8/us.json) ”我复制到我的主目录。

这个网站上[已经出现](https://stackoverflow.com/questions/14041388/plotting-topojson-file-with-d3-js-nyc-boroughs-and-census-tracts)了类似的问题。

```
<!-- language: lang-html -->
<!DOCTYPE html>
<meta charset="utf-8">
<style>

path {
  fill: none;
  stroke: steelblue;
}

</style>
<body>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="http://d3js.org/topojson.v0.min.js"></script>
<script>

var width = 960,
    height = 500;

var path = d3.geo.path();

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);
d3.json("us.json", function(error, us) {
  svg.append("path")
      .attr("d", topojson.object(us, us.objects.counties).geometries.map(function(d) {
        var bounds = path.bounds(d);
        return "M" + bounds[0]
            + "H" + bounds[1][0]
            + "V" + bounds[1][3]
            + "H" + bounds[0][0]
            + "Z";
      }).join(""));
});

</script> 
```

* * *

以下是我收到的错误消息：

> XMLHttpRequest 无法加载 file:///C:/Users/work/Documents/d3js/us.json。仅 HTTP 支持跨源请求。

所以我尝试使用网络。

> XMLHttpRequest 无法加载[https://gist.github.com/raw/4090846/b8c888f35c42400a080ab03c31a7649e0b9bc9a8/us.json](https://gist.github.com/raw/4090846/b8c888f35c42400a080ab03c31a7649e0b9bc9a8/us.json)。Access-Control-Allow-Origin 不允许 Origin null。

[搜索在StackOverflow](https://stackoverflow.com/questions/8456538/origin-null-is-not-allowed-by-access-control-allow-origin/8456586)上给了我这个问题，暗示这是 Chrome 试图从我自己身上拯救我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T07:10:55.967

您遇到了[相同的源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，它只允许使用相同的协议从一个页面对相同的主机和端口进行 AJAX 调用。为了解决这个问题，您可以使用 Python 在您正在使用的目录中运行 Web 服务器：

```
$ python -m SimpleHTTPServer 8080 
```

您现在可以`http://localhost:8080`在 Web 浏览器中访问您的页面，并且 AJAX 调用现在应该可以工作了。

# c++ - 没有复制构造的 std::sort

> ID：14178513
> 
> 赞同：9
> 
> 时间：2013-01-06T01:55:29.923
> 
> 标签：c++, sorting, standard-library

假设我有一个对象向量，其中：

*   复制构建和分配是昂贵的
*   两个对象的默认构造和交换很便宜。

这对于引用大数据的对象来说似乎是相当标准的——例如向量的向量。

**问题**：有没有办法使用`std::sort`或标准库中的其他排序例程对这个向量进行排序，这样就不会发生复制，而是使用交换？我正在寻找一个预`c++0x`解决方案（**没有移动语义**）。

重载`std::swap`似乎是第一次自然尝试，它确实有点帮助，但它只消除了一小部分复制。

**注意**：gcc 行为示例

为了 sort `100 81 64 49 36 25 16 9 4 1 0 1 4 9 16 25 36 49 64 81`，我的 gcc std::sort 调用了 19 个复制构造函数、92 个赋值和 6 个交换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T15:26:51.883

```
// C++03 solution won't work with arrays and some other custom containers.
// Mostly drop this block:
#include <type_traits>
#include <vector>
#include <algorithm>
#include <iostream>
namespace aux {
  using std::begin; using std::end;
  template<typename C> auto adl_begin( C&& c )->decltype( begin(c) );
  template<typename C> auto adl_end( C&& c )->decltype( end(c) );

  template<typename C>
  struct container_traits:
    std::iterator_traits< typename std::decay< decltype( aux::adl_begin( *(C*)nullptr ) ) >::type >
  {
    typedef typename std::decay< decltype( adl_begin( *(C*)nullptr ) ) >::type iterator_type;
  };
}

// C++03 solution won't work with arrays.  Inside std::less, use Container::value_type:
template<
  typename Container,
  typename Comparison = std::less<
    typename aux::container_traits<Container>::value_type
  >
>
void indirect_sort_then_swap( Container& c, Comparison&& comp = Comparison() ) {
  typedef aux::container_traits<Container> con_traits;
  typedef typename con_traits::value_type value_type;
  typedef typename con_traits::iterator_type iterator_type;
  std::vector< iterator_type > indirect;
  {
    // C++03 solution can use c.begin(), but will not work with arrays:
    using std::begin; using std::end;
    auto begin_ = begin(c);
    auto end_ = end(c);
    for( auto it = begin_; it != end_; ++it ) {
      indirect.push_back( it );
    }
  }
  // In C++03, write a functor class that does this:
  auto indirect_sort = [&comp]( iterator_type const& left, iterator_type const& right )->bool {
    return comp(*left, *right);
  };
  std::sort( indirect.begin(), indirect.end(), indirect_sort );
  // at this point, indirect is a vector with the contents of c sorted by iterator:
  // a hard part remains, namely to take this information and sort c with minimal swaps
  // That is hard.  I will instead create an easy approach, namely create an empty
  // copy of c full of empty elements, and directly swap the correct entry of c into
  // each slot, then I swap c with its copy.
  // the downside is that my container now needs to support push_back.  Oh well.
  Container c2;
  // C++03 solution cannot use auto here.  But we know the type of indirect:
  for (auto it = indirect.begin(); it != indirect.end(); ++it) {
    // See previous comment
    auto itv = *it;
    c2.push_back( value_type() );
    using std::swap;
    swap( *itv, c2.back() );
  }
  // by this point, the contents of c have been swap-moved to c2
  // swap them back:
  {
    using std::swap;
    swap( c, c2 );
  }
}

int main() {
   std::vector<int> foo;
   foo.push_back(7);
   foo.push_back(3);
   indirect_sort_then_swap(foo);
   for (auto i:foo) {
      std::cout << i << "\n";
   }
} 
```

something like the above is a viable approach. I wrote a bunch of it in C++11, but included comments on how to strip out the extra C++11 stuff (it actually simplifies the code in some cases, but removes the ability to handle some container-like things).

The basic idea is to sort a `vector` of `iterator`s into your original container. Then we create a temporary container, stuff trivial `value_type`s into it, `swap` those trivial `value_type`s with the correct data from the original container (as determined by the `vector` of sorted `iterator`s), then `swap` this temporary container for our original container.

There is lots of allocation, but hopefully of cheap stuff.

For this to work, the data you are sorting needs be trivial constructable. For this to be efficient, the data you are working with when trivially constructed needs to be cheap, and `swap` needs to be efficient.

I attempted to make this as ADL friendly as I can, because I find that to be good practice.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T10:26:07.270

[堆排序](https://en.wikipedia.org/wiki/Heap_sort)是一种仅交换排序，它是不稳定的（等价元素的顺序可能会在排序过程中发生变化）。我回答了[另一个类似的问题](https://stackoverflow.com/questions/14212701/stdsort-does-not-always-call-stdswap/14213028#14213028)，我自己实现了堆排序（[PasteBin](http://pastebin.com/5SVm6Tz9)），但你可能会发现更好、更灵活的实现。

结论是 g++`std::sort`对 20 个元素使用了 35 次复制、19 次赋值、10 次交换和 35 次删除（总共 99 次操作），我的堆排序使用了 62 次交换，仅此而已。

我刚刚遇到了一个稳定的排序，它只[在 stackoverflow 上](https://stackoverflow.com/questions/13791458/how-to-stable-sort-without-copying/)使用 swap 。我没有深入研究它。

# python - django 单元测试登录用户导致“重复条目”错误

> ID：14178517
> 
> 赞同：1
> 
> 时间：2013-01-06T01:56:56.797
> 
> 标签：python, django, django-unittest

我有以下测试

```
Class FriendsTest(TestCase):

    # always login user
    def setUp(self):
        self.user = User.objects.all().order_by('date_joined')[0]
        self.client.login(facebook_id = self.user.get_profile().facebook_id)

    def test_test(self):
        r = self.client.get(reverse('web.views.friends.main'))
        self.assertEqual(r.status_code, 200)

    def test_test2(self):
        r = self.client.get(reverse('web.views.friends.main'))
        self.assertTemplateUsed(r, 'web/friends.html')
        # and some test for GET data here. 
```

如果我只有一种测试方法（test_test），则测试有效。但是当我有多个方法（test_test2）时，我不断收到错误“IntegrityError：无法加载web.CustomProfile（pk = 1）：（1062，“密钥'id_user'的重复条目'1'”）“。

错误跟踪如下。我真的很感激任何帮助。

> .问题安装夹具'/Users/ruixia/public_html/x/project/web/fixtures/data.json'：追溯（最近一次通话）：
> 
> 文件“/Users/ruixia/virt_env/x/lib/python2.7/site-packages/django/core/management/commands/loaddata.py”，第 196 行，在句柄 obj.save(using=using)
> 
> 文件“/Users/ruixia/virt_env/x/lib/python2.7/site-packages/django/core/serializers/base.py”，第165行，保存models.Model.save_base(self.object, using=using ，原始=真）
> 
> 文件“/Users/ruixia/virt_env/x/lib/python2.7/site-packages/django/db/models/base.py”，第 551 行，在 save_base 结果 = manager._insert([self], fields=fields , return_id=update_pk, using=using, raw=raw)
> 
> _insert return insert_query(self.model, objs, fields, **夸格斯）
> 
> 文件“/Users/ruixia/virt_env/x/lib/python2.7/site-packages/django/db/models/query.py”，第 1576 行，在 insert_query return query.get_compiler(using=using).execute_sql(return_id )
> 
> 文件“/Users/ruixia/virt_env/x/lib/python2.7/site-packages/django/db/models/sql/compiler.py”，第910行，在execute_sql cursor.execute(sql, params)
> 
> 文件“/Users/ruixia/virt_env/x/lib/python2.7/site-packages/django/db/backends/mysql/base.py”，第 114 行，在执行中返回 self.cursor.execute(query, args)
> 
> 文件“/Users/ruixia/virt_env/x/lib/python2.7/site-packages/MySQLdb/cursors.py”，第201行，在执行self.errorhandler(self, exc, value)
> 
> 文件“/Users/ruixia/virt_env/x/lib/python2.7/site-packages/MySQLdb/connections.py”，第 36 行，在 defaulterrorhandler 中引发 errorclass，errorvalue IntegrityError: Could not load web.CustomProfile(pk=1) ：（1062，“重复条目'1'键'id_user'”）

# node.js - node.js，node-mongodb-native，DRY 连接？

> ID：14178525
> 
> 赞同：0
> 
> 时间：2013-01-06T01:57:57.523
> 
> 标签：node.js, node-mongodb-native

我目前在 ./routes 下的每个文件中都有以下代码。

```
var mongo = require('mongodb');
var config = require('../config/config');

var Server = mongo.Server,
    Db = mongo.Db,

var server = new Server(config.DatabaseConfig.host, config.DatabaseConfig.port, {auto_reconnect: true});
db = new Db('test', server);

db.open(function(err, db) {
    if(!err) {
        console.log("Connected to 'test' database");
        db.collection('testcollection', {safe:true}, function(err, collection) {
        });
    }
}); 
```

有没有办法让我在中心位置打开这个连接？每个对象在数据库中都有自己的集合是否被普遍接受？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T03:22:28.267

我在主应用程序入口点打开数据库一次，在建立数据库连接之前不要调用 app.listen。

`db.open(function(err) { if(!err) app.listen(3000); });`

# css - 几个小时，但仍然停留在下拉子菜单上 - 继承的 css 在父菜单下创建空框 - jfiddle incl

> ID：14178526
> 
> 赞同：0
> 
> 时间：2013-01-06T01:58:14.880
> 
> 标签：css

我现在尝试了几个小时来追踪如何摆脱出现在我的 CSS 菜单上的奇怪框。有两层子菜单。第二级子菜单位于我想要它在它的父菜单右侧的位置，但是一旦它出现 - 在悬停时 - 一个相同高度的框也会出现在父菜单下。这个奇怪的盒子也奇怪地偏移了。它只需要消失。有没有 CSS 大师？
非常感谢您的关注！！！

[jfiddle在这里](http://jsfiddle.net/dXn3P/)

```
#pagebody {
position: inherit !important;
width: 831px;}

#pagebody-inner {
position: inherit !important;
width: 100%;}

#alpha, #beta, #gamma, #delta {
display: block;
float: left;
min-height: 1px;
position: inherit !important;}

#centernav {
width: 831px;}

#dropnav {
background: none repeat scroll 0 0 #D2D3D5;
height: 40px;}

#dropnav ul {
margin: 0;
padding: 0;}

#dropnav ul ul {
display: none;}

#dropnav ul li {
border-right: 1px solid #FFFFFF;
float: left;
font-size: 14px;
list-style: none outside none;
margin-left: 0;
padding: 10px 20px 15px 19px;
position: relative;
text-align: left;
text-decoration: none;
z-index: 88888;}

#dropnav ul li:hover > ul {
display: block;}

#dropnav li a {
color: #000000;
text-decoration: none;}

#dropnav li a:hover {
color: #990000;
text-decoration: none;}

#dropnav li ul {
background-color: #D2D3D5;
display: none;
left: 0;
margin: 0;
padding: 0;
position: absolute;
top: 40px;
z-index: 99999;}

#dropnav li:hover ul {
display: none;
padding: 0;
width: 200px;}

#dropnav li li {
border-right: 0 solid #000000;
border-top: 1px dotted #FFFFFF;
display: list-item;
list-style: none outside none;
padding: 5px 0 5px 20px;
width: 180px;}

#dropnav li li a {
color: #000000;
text-decoration: none;}

#dropnav li li a:hover {
color: #990000;
text-decoration: none;}

li#main {
padding-top: 6px;}

#subnav li {
background-color: #A443A5;
height: 20px;}

#subnav2 li {
background-color: #A2A3A5;
left: 200px;
position: absolute;
top: -40px;
width: 280px !important;
z-index: 99999;
display: none;
height: 20px;
}

<div id="centernav">
  <div id="dropnav">
    <ul>
      <li id="main"> <a href="#">Home</a>
    <ul id="subnav">
      <li><a href="#">About this site</a></li>
    </ul>
 </li>

<li id="main"> <a href="#">Training Modules</a>
  <ul id="subnav">
      <li><a href="#">See Here: </a>
        <ul id="subnav2">
          <li><a href="#">1:</a></li>
          <li><a href="#">2:</a></li>
          <li><a href="#">3: </a></li>
          <li><a href="#">4: </a></li>
        </ul>
    </li>

    <li><a href="#">and here</a>
      <ul id="subnav2">
        <li><a href="#">what is up with</a></li>
        <li><a href="#">the box under </a></li>
        <li><a href="#">parent menu </a></li>
        <li><a href="#">to the left </a></li>
        <li><a href="#">-it mirrors </a></li>
        <li><a href="#">height of subnav </a></li>
        <li><a href="#"> and is positioned lower </a></li>
       </ul>
    </li>
  </ul>
</li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T02:41:11.260

好吧，似乎正在发生的事情是您`li`的 s 远离`UL`. （有问题的灰色框实际上是`UL`. 但是由于以下 CSS 代码，它们的位置远离其父级`UL`：

```
#subnav2 li {
    background-color: #A2A3A5;
    display: none;
    height: 20px;
    left: 200px;
    position: absolute;     /* <-- position absolute with the 200px left and -40px top causes list items to be positioned away from their parent UL */
    top: -40px;
    width: 280px !important;
    z-index: 99999;
} 
```

我会尝试删除该定位并`UL`改为定位。

FWIW 这是一个简单的 3 层 CSS 下拉菜单的示例：http: [//jsfiddle.net/kboucher/nrAPu/](http://jsfiddle.net/kboucher/nrAPu/)

# objective-c - 没有时 Xcode 会抛出随机错误

> ID：14178527
> 
> 赞同：4
> 
> 时间：2013-01-06T01:58:41.823
> 
> 标签：objective-c, xcode, compiler-errors

每*隔一段时间*，通常在我对我的代码进行了一些**试验和错误**之后，Xcode**会向我抛出随机错误，**即使我已经删除了以前不正确的代码片段，即使我已经将我的文件恢复到一个阶段上次完美运行的地方。换句话说，肯定**没有错误**，**但我的应用程序崩溃并且 Xcode 生成错误**。我还要补充一点，当我的 iPhone 没有连接到我的电脑时，应用程序运行得很好。

在**删除了过去确实导致错误**的所有内容之后，Xcode - 如上所述 - 反而将随机的东西指向不正确的东西，例如右括号，viewDidLoad，**好像在说：** *“嘿，我知道之前有一个错误，可以”虽然现在找不到它，但我知道它在某个地方，所以让我们崩溃并指向完全随机的东西，例如右括号”*。

我假设**旧项目文件正在**某处缓存（或类似），但我无法终生弄清楚在哪里或如何摆脱它们。我正在使用**Xcode 4.5.2**、**iPhone 5 iOS 6.0.2**、**OSX 10.8.2** fwiw。

## 到目前为止我已经尝试过：

1.  清理、构建、运行、清理、重建、重新运行。**[不用找了]**
2.  重新启动 X-code，从主屏幕移除图标，再次执行第 1 步**[无变化]**
3.  重启电脑**[无变化]**
4.  重新启动 iPhone 和模拟器并将模拟器重置为出厂设置**[无变化]**
5.  如此处所示从组织者中删除派生数据，并[在](https://stackoverflow.com/questions/12664937/xcode-highlighting-random-lines-and-calling-errors-when-there-isnt-any)[此处](http://developer.apple.com/library/mac/#recipes/xcode_help-projects_organizer/articles/about_projects_organizer.html)建议**[无变化]**
***   以上包括恢复我的整个 iPhone **[作品]***   创建一个新项目并重建 nib 文件并将过去的代码从旧项目复制到新的**[Works]****

 **是的，**备选方案 6 和 7 确实有效**，但我无法在每次发生这种情况时花费数小时将 iPhone 恢复到出厂设置或重新创建整个 Xcode 项目。唉，这几天确实经常发生。

还有其他**想法或建议吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T21:56:52.143

感谢 gmogames 指出以下为我完成工作的解决方案。

在**Xcode**中按：

```
Option + Shift + Command + K 
```**

# php - 如何使用 php date 函数来确定显示的内容？

> ID：14178529
> 
> 赞同：-1
> 
> 时间：2013-01-06T01:58:57.417
> 
> 标签：php, html, web

我正在开发一个简单的网站，该网站使用 php 中的日期函数来显示当前日期。我熟悉 HTML、CSS 和 Java。根据当前日期，我希望显示不同的信息，例如...

```
On <?php echo date('F jS'); ?> throughout history, the following events took place:
Event 1 in 1776
Event 2 in 1890
Event 3 in 1999 
```

我有一个信息列表，我只是不确定如何将 2 链接在一起。查看[http://www.history.com/this-day-in-history](http://www.history.com/this-day-in-history)以更好地了解我正在尝试做的事情。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T02:37:38.047

1.  创建一个名为**events的表**
2.  在**events**中，创建行 === id, monthandday, year, event
3.  使 PHP 选择：

    ```
    //connect to db
    $db = new PDO("mysql:host=$hostname;dbname=$dbname", $username, $password);

    //get day and month
    $curdate = date("m d");

    //select from database of events where matching month and day     
    $statement = $db->prepare("SELECT * FROM events WHERE monthandday = :md ");

    $statement->execute(array(':md' => $curdate));

    //echo out events that happened throughout history
    echo "On ."date('F jS') ."throughout history, the following events took place:";

    while($row = $statement->fetch()){

        echo $row['event'];
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T02:02:07.600

如果您尝试在 php 中格式化日期，请使用

[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

获得年份

回显日期（“Y”，$日期）；

# magento - 如何在 Magento 中扩展 Mage_Core_Model_App 类

> ID：14178530
> 
> 赞同：1
> 
> 时间：2013-01-06T01:59:17.933
> 
> 标签：magento, model, extends

有谁知道如何`Mage_Core_Model_App`在 Magento 中扩展课程？

我已经像这样设置了我的 config.xml

```
<?xml version="1.0"?>
 <config>
  <global>
    <models>
        <core>
           <rewrite>
                <app>My_Module_Model_App</app>
            </rewrite>
        </core>
    </models>
  </global>
</config> 
```

但 Magento 似乎没有加载它。

如果我将`App.php`文件复制到`app/code/local/Mage/Core/Model/App`目录中会好吗？

我不确定这种方式是否好，因为如果我是对的，我必须将整个代码复制到其中，而我只是做了一些小的修改。

有人有建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T02:40:56.127

您覆盖核心模型的 xml 代码看起来不错，并且通常可以工作。类 Mage_Core_Model_App 的问题在于它是在文件`new Mage_Core_Model_App()`中的方法中直接使用实例化的`public static function app()``app/Mage.php`

以 xml 方式重写核心模型只会影响使用 Mage::getModel('core/app') 等加载的类。

因此，不幸的是，在这种情况下，您唯一的选择实际上是将文件复制到您的应用程序/代码/本地文件结构并复制并粘贴整个代码，然后对其进行编辑。

不过，通常情况下，您的 xml 重写结构会完美运行，并且比复制整个类更可取。这个特殊的核心模型有些特别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T02:08:57.563

一个快速的谷歌搜索想出了[http://www.magentocommerce.com/wiki/doc/webservices-api/custom-api](http://www.magentocommerce.com/wiki/doc/webservices-api/custom-api)。我在我的本地 XAMPP 安装上试过这个。只需将要编辑的文件复制到 app/code/local 文件夹并保持相同的目录结构即可。我通过从 /app/code/core/Mage/Cms/Block/Page.php 复制文件来编辑 /app/code/local/Mage/Cms/Block/Page.php 并按预期工作。希望这可以帮助！

# ios - 关于如何显示用户评论列表的想法（UITableView vs UIScrollView vs ？）

> ID：14178533
> 
> 赞同：3
> 
> 时间：2013-01-06T02:00:20.107
> 
> 标签：ios, uitableview, uiscrollview

我曾经使用过`UICollectionView`，`UITableView`但以前从未使用`UIScrollView`过，我认为我应该使用它来显示来自数组的用户评论的（可能很长）垂直列表。

我正在考虑使用`UITableView`或`UIScrollView`但不确定哪个更好使用。我熟悉`UITableView`但不熟悉，`UIScrollView`所以我不知道如何在`UIScrollView`. 例如，我需要添加什么`UIScrollView`以使其显示一组用户评论？它是 Web 视图（我之前没有使用过 Web 视图）吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T02:06:50.053

`UITableView`如果您正在使用一组评论，使用（或）听起来合乎逻辑`UICollectionView`，否则，您需要自己管理视图创建和发布。`UITableView`实际上是一个`UIScrollView`实现，为您完成了视图管理。

UIScrollView 可能很难自己管理。这是一个空白画布，您可以在其中添加视图，但您希望一次拥有多少视图？一次加载所有评论毫无意义。因此，您需要一个可以跟踪滚动位置并动态加载和卸载必要和不必要的视图的系统，这正是表视图和集合视图所做的。

只要确保不要陷入`UITableView`陷阱`UIScrollView`。永远不推荐这样做，并且可能对内存管理造成危险（因为可以加载超过必要的视图或单元格，这取决于评论的数量，可能很多）。如果您当前正在使用滚动视图来显示您的视图，则可以将其转换为一个或多个视图，然后将它们设置为表格视图的顶部单元格，而注释将占用较低的单元格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T02:07:29.263

我会选择 UITableView，特别是如果评论数组很长。表支持单元重用，这将有助于减少内存占用。我的意思是，如果配置正确，只要一个单元格在向下滚动时离开屏幕顶部，它就会从底部出现新内容。

如果您想在事后添加到表格中，表格视图还可以轻松地为新行设置动画：

```
[<#(UITableView *)#> insertRowsAtIndexPaths:<#(NSArray *)#> withRowAnimation:<#(UITableViewRowAnimation)#>]; 
```

以及自动将特定单元格滚动到顶部、底部、中心等的操作。

```
[<#(UITableView *)#> scrollToRowAtIndexPath:<#(NSIndexPath *)#> atScrollPosition:<#(UITableViewScrollPosition)#> animated:<#(BOOL)#>]; 
```

[此外，如果您采用表格视图路线，那么在CocoaControls.com](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=chat)上有一些关于实现消息应用程序启发的气泡式聊天日志的项目。我相信所有这些项目都使用表格视图。

# java - 我可以使用 compareTo 对整数和双精度值进行排序吗？

> ID：14178539
> 
> 赞同：13
> 
> 时间：2013-01-06T02:01:07.200
> 
> 标签：java

我可以使用 compareTo 对整数和双精度值进行排序吗？我的系统给了我一个错误，我无法在原始类型 int 上调用 compareTo(int)。有任何想法吗？

代码：

```
public int compare(Object o1, Object o2) {  
Record o1C = (Record)o1;
Record o2C = (Record)o2;                
return o1C.getPrice().compareTo(o2C.getPrice());
}

class Record
    public class Record {
    String name;
    int price;    

    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }

    public int getPrice() {
        return price;
    }
    public void setPrice(int price) {
        this.price = price;
    }
} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-06T02:03:01.700

好吧，编译器是对的:) 你不能`compareTo`直接调用。但是，根据您使用的 Java 版本，您可以使用[`Integer.compare`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#compare%28int,%20int%29)（在 1.7 中引入）和[`Double.compare`](http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#compare%28double,%20double%29)（在 1.4 中引入）。

例如：

```
return Integer.compare(o1C.getPrice(), o2C.getPrice()); 
```

如果您不在 1.7 上并且仍想使用内置方法，则*可以*使用：

```
Integer price1 = o1C.getPrice();
Integer price2 = o2C.getPrice();
return price1.compareTo(price2); 
```

...但这将使用不必要的拳击。鉴于对大型集合进行排序可以执行很多比较，这并不理想。`compare`在您准备好使用 1.7 之前，可能值得自己重写。这很简单：

```
public static int compare(int x, int y) {
    return x < y ? -1
         : x > y ? 1
         : 0;
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-06T06:03:04.537

更改代码

```
int price; 
```

至

```
Integer price; 
```

因为原始类型如`int`不支持任何方法，如`compareTo()`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-06T03:06:44.023

在您当前的代码中；更简单的解决方案是改变这条线，一切都会好的：

```
return o1C.getPrice() - o2C.getPrice() ; 
```

这也可以很好地工作并且性能也很好，因为方法 compare() 只有以下要求，即。如果两个值相等则返回零；否则为正/负数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-12-13T10:06:11.563

第 1 步：按姓氏对列表进行排序（对于字符串值）

```
Collections.sort(peopleList, (p1, p2) -> 
                     p1.getLastName().compareTo(p2.getLastName())); 
```

第 2 步：打印列表中的所有元素

```
for (People ppl : peopleList) {
    System.out.print(ppl.getFirstName()+" - "+ppl.getLastName());
} 
```

第 1 步：按年龄排序列表（对于 int 值）

```
Collections.sort(peopleList, (p1, p2) -> p1.getAge() - (p2.getAge())); 
```

第 2 步：打印列表中的所有元素

```
for (People ppl : peopleList) {
    System.out.println(ppl.getAge());
} 
```

# android - 在 API 8 中使用加载器

> ID：14178550
> 
> 赞同：5
> 
> 时间：2013-01-06T02:03:01.053
> 
> 标签：android, api, loader

我正在学习 Lars Vogella 的教程：[http ://www.vogella.com/articles/AndroidSQLite/article.html#todo](http://www.vogella.com/articles/AndroidSQLite/article.html#todo)

但我希望它可以在 API 8 上运行。我让它在 API 11+ 上运行，并执行了以下操作以使其在 API 8 上运行。在 Android 工具中，我添加了一个支持库，并添加了以下导入：

```
import android.support.v4.app.ListFragment;
import android.support.v4.app.LoaderManager;
import android.support.v4.content.CursorLoader;
import android.support.v4.content.Loader;
import android.support.v4.widget.CursorAdapter;
import android.support.v4.widget.SimpleCursorAdapter; 
```

但是Eclipse仍然给我错误：

```
The method getLoaderManager() is undefined for the type TodosOverviewActivity 
```

在方法中：

```
private void fillData() {

    // Fields from the database (projection)
    // Must include the _id column for the adapter to work
    String[] from = new String[] { TodoTable.COLUMN_SUMMARY };
    // Fields on the UI to which we map
    int[] to = new int[] { R.id.label };

    getLoaderManager().initLoader(0, null, this);
    adapter = new SimpleCursorAdapter(this, R.layout.todo_row, null, from,
        to, 0);

    setListAdapter(adapter);
  } 
```

任何人都可以对这个错误有所了解吗？

* * *

我找到了以下“解决方案”，但我不确定如何在本教程中实现它，这是让 getSupportLoaderManager() 和 ListView 相关方法可用的解决方案吗？如果是这样，我该如何正确实现它？：

```
public class TodosOverviewActivity extends FragmentActivity {

public static class TodosOverviewListFragment extends ListFragment
        implements LoaderManager.LoaderCallbacks<Cursor> { 
```

* * *

总班级：

```
public class TodosOverviewActivity extends FragmentActivity implements
    LoaderManager.LoaderCallbacks<Cursor> {
  private static final int ACTIVITY_CREATE = 0;
  private static final int ACTIVITY_EDIT = 1;
  private static final int DELETE_ID = Menu.FIRST + 1;
  // private Cursor cursor;
  private SimpleCursorAdapter adapter;

/** Called when the activity is first created. */

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.todo_list);
    this.getListView().setDividerHeight(2);
    fillData();
    registerForContextMenu(getListView());
  }

  // Create the menu based on the XML defintion
  @Override
  public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.listmenu, menu);
    return true;
  }

  // Reaction to the menu selection
  @Override
  public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.insert:
      createTodo();
      return true;
    }
    return super.onOptionsItemSelected(item);
  }

  @Override
  public boolean onContextItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case DELETE_ID:
      AdapterContextMenuInfo info = (AdapterContextMenuInfo) item
          .getMenuInfo();
      Uri uri = Uri.parse(MyTodoContentProvider.CONTENT_URI + "/"
          + info.id);
      getContentResolver().delete(uri, null, null);
      fillData();
      return true;
    }
    return super.onContextItemSelected(item);
  }

  private void createTodo() {
    Intent i = new Intent(this, TodoDetailActivity.class);
    startActivityForResult(i, ACTIVITY_CREATE);
  }

  // Opens the second activity if an entry is clicked
  @Override
  protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    Intent i = new Intent(this, TodoDetailActivity.class);
    Uri todoUri = Uri.parse(MyTodoContentProvider.CONTENT_URI + "/" + id);
    i.putExtra(MyTodoContentProvider.CONTENT_ITEM_TYPE, todoUri);

    // Activity returns an result if called with startActivityForResult
    startActivityForResult(i, ACTIVITY_EDIT);
  }

  private void fillData() {

    // Fields from the database (projection)
    // Must include the _id column for the adapter to work
    String[] from = new String[] { TodoTable.COLUMN_SUMMARY };
    // Fields on the UI to which we map
    int[] to = new int[] { R.id.label };

    getSupportLoaderManager().initLoader(0, null, this);
    adapter = new SimpleCursorAdapter(this, R.layout.todo_row, null, from,
        to, 0);

    setListAdapter(adapter);
  }

  @Override
  public void onCreateContextMenu(ContextMenu menu, View v,
      ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);
    menu.add(0, DELETE_ID, 0, R.string.menu_delete);
  }

  // Creates a new loader after the initLoader () call
  @Override
  public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    String[] projection = { TodoTable.COLUMN_ID, TodoTable.COLUMN_SUMMARY };
    CursorLoader cursorLoader = new CursorLoader(this,
        MyTodoContentProvider.CONTENT_URI, projection, null, null, null);
    return cursorLoader;
  }

  @Override
  public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
    adapter.swapCursor(data);
  }

  @Override
  public void onLoaderReset(Loader<Cursor> loader) {
    // data is not available anymore, delete reference
    adapter.swapCursor(null);
  }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T02:15:47.440

问题是您正在扩展“ListActivity”而不是“ListFragment”。

如果您利用 ListFragment，您将可以从支持库访问 getLoaderManager()。

```
public class TodosOverviewActivity extends ListFragment {
  private void fillData() {
    getLoaderManager().initLoader(...);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T02:15:32.603

TodosOverviewActivity 应该扩展 FragmentActivity 并且你应该使用 getSupportLoaderManager()

# python - 使用 python 套接字连接到 raspberrypi 时出错

> ID：14178553
> 
> 赞同：5
> 
> 时间：2013-01-06T02:03:40.150
> 
> 标签：python, sockets, networking, raspberry-pi

我正在尝试通过网络连接到我的树莓派。我正在运行 python 作为 raspi 上的服务器。这是我从网上下载的简单服务器代码：

```
import socket

serversocket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
host = socket.gethostname()
port = 80
print (host)
print (port)
serversocket.bind((host, port))

serversocket.listen(5)
print ('server started and listening')
while 1:
    (clientsocket, address) = serversocket.accept()
    print ("connection found!")
    data = clientsocket.recv(1024).decode()
    print (data)
    clientsocket.send("data is sent".encode()) 
```

测试客户端代码：

```
import socket

s = socket.socket()
host = "192.168.1.247"
port = 80
s.connect((host,port))
s.send('randomData'.encode())
data = ''
data = s.recv(1024).decode()
print (data)
s.close 
```

我已经在其他计算机上对其进行了测试，并且这些都可以正常工作。当 raspi 是客户端并且另一台计算机是服务器时，它可以正常工作。但是，当 raspi 是 SERVER 而另一台计算机是客户端时，我总是会收到同样的错误：“无法建立连接，因为目标机器主动拒绝了它”

尝试使用 c# 连接：

```
TcpClient client = new TcpClient("192.168.1.247", 80) 
```

抛出错误：`"No connection could be made because the target machine actively refused it"`

注意： -raspi 作为客户端到 raspi 作为服务器工作正常。-我做了一些研究，似乎最常见的原因是防火墙或路由器坏了。--我不认为它是路由器，因为我可以对其他计算机进行粗暴的操作。——我使用的是 Raspbian “wheezy” Debian 发行版，我不认为它带有防火墙。

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T12:23:55.933

我认为问题在于您正在使用`socket.gethostname()`它将返回主机名而不是IP。很可能这意味着您的套接字将绑定到该主机名而不是 IP，这意味着 python 只会监听到`hostname`可能是的连接：raspberrypi

很可能您的机器不知道该主机名，因此您想改用它：

```
socket.gethostbyname(socket.gethostname()) 
```

它还在[文档中说](http://docs.python.org/2/library/socket.html)

要记住的是主机名和 IP 不是一回事。但是，您可以将主机名绑定到 /etc/hosts 文件中的 IP，如下所示：

`192.168.1.247 raspberrypi`

# android - 如何在 PhotoView 中加载 URL 图片

> ID：14178554
> 
> 赞同：1
> 
> 时间：2013-01-06T02:03:41.583
> 
> 标签：android, android-layout, github

我正在尝试使用带有封闭样本的 Chris Banes 的 PhotoView 库。我对 sample 进行了一些更改，以从 URL（在 Internet 上）加载图像，而不是从 drawable as sample 加载图像。这是代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main); 

    mImageView = (ImageView) findViewById(R.id.iv_photo);
    mCurrMatrixTv = (TextView) findViewById(R.id.tv_current_matrix);

    //here's the method to load URL image from URL
    new LoadImage().execute();
    mAttacher = new PhotoViewAttacher(mImageView);

}

private class LoadImage extends AsyncTask<Void, Void, Void> {

    @Override
    protected Void doInBackground(Void... params) {
        // Simulates a background job.

        try {
            mImageView.setImageDrawable(grabImageFromUrl(image_url));               
        } catch (Exception e) {
            e.getStackTrace().toString();
        }                   
        return null;
    }

}

private Drawable grabImageFromUrl(String url) throws Exception {
        return Drawable.createFromStream((InputStream)new URL(url).getContent(), "src");
        } 
```

问题是图像没有加载，只是返回一个空白页。当我尝试一些捏缩放动作时，奇怪的事情发生了，图像被加载并正常工作。有人有建议吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T10:09:49.280

尝试先将图像加载到位图中，然后将位图设置为 imageview。

位图的网址：

```
public static Bitmap getBitmapFromURL(String src) { try { URL url = new URL(src); HttpURLConnection connection = (HttpURLConnection) url.openConnection(); connection.setDoInput(true); connection.connect(); InputStream input = connection.getInputStream(); Bitmap myBitmap = BitmapFactory.decodeStream(input); return myBitmap; } catch (IOException e) { e.printStackTrace(); return null; } } 
```

然后使用 iv.setimagebitmap()

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-08T12:38:08.417

```
 private Bitmap bmp;
bmp = new Bitmap[1];

// to fetch the image
BitmapFactory.Options options = new BitmapFactory.Options();
options.inSampleSize = calculateInSampleSize(options, screenWidth, screenHeight);
options.inJustDecodeBounds = false;
final Bitmap bitmap = BitmapFactory.decodeStream((InputStream) new URL(url, new Rect(), options);

// to set the image
 Runnable action = new Runnable() {
   public void run() { bmp = bitmap
     }
  };
 runOnUiThread(action); 
```

现在你有了 bmp 格式的图像。拿走它并设置在您画廊的适配器中。

```
ImageView imageView = new ImageView(container.getContext());
PhotoViewAttacher attacher = new PhotoViewAttacher(imageView);
imageView.setImageBitmap(bmp);
attacher.update(); 
```

# jquery - Vimeo jQuery 事件回调

> ID：14178557
> 
> 赞同：1
> 
> 时间：2013-01-06T02:03:56.910
> 
> 标签：jquery, callback, vimeo

我试图让我的 Vimeo Embedded 播放器在视频播放完毕后调用一个函数。我无法调用回调函数......

```
$.getJSON('http://www.vimeo.com/api/oembed.json?url=' + encodeURIComponent('http://vimeo.com/7100569') + '&width=513&height=287&callback=?', function(data) {
    $('#mediaplayerHolder').html(data.html);
    $('iframe').each(function() {
        $f(this).addEvent('ready', function(player_id) {
            $f(player_id).addEvent('finish', function() {
                alert("finish");    
            });
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T05:04:28.347

我想通了......对于其他有同样问题的人来说，这是因为几件事。

1) 我没有

```
api=1 
```

在 JSON 字符串中。

2) 我需要 JSON 字符串和 iframe 中的 ID。

我把它全部放在一个调用视频的函数中：

```
function playVideo(ID,autoPlay,playNext) {
    $('#mediaplayerHolder').find("iframe").remove();

    $.getJSON('http://www.vimeo.com/api/oembed.json?url=' + encodeURIComponent('http://vimeo.com/' + ID) + '&title=0&byline=0&portrait=0&autoplay=' + autoPlay + '&width=513&height=287&api=1&player_id=mediaplayer&callback=?', function(data) {
        $(data.html).attr("ID","mediaplayer").appendTo('#mediaplayerHolder');

        var iframe = $("iframe")[0],
            player = $f(iframe);

        player.addEvent("ready", function() {
            player.addEvent("finish",function() {
                if (playNext) {
                    $(".occupied:not(#" + ID + "):first").find(".playBtn").click();
                    $("#" + ID).find(".removeBtn").click(); 
                }
            });
        });
    }); 
} 
```

# javascript - Javascript：如何将函数的原型附加到另一个函数？

> ID：14178559
> 
> 赞同：2
> 
> 时间：2013-01-06T02:04:18.753
> 
> 标签：javascript, merge, append, prototype

如何将函数的原型附加到另一个函数？就像是：

```
// Foo
function foo(){};
foo.prototype.a = 'hello';

// Bar
function bar(){}
bar.prototype.b = 'world';

// Append Foo's prototype to Bar
bar.appendPrototype(foo);

// Print
console.log(bar.prototype) // -> { a: 'hello', b: 'world' } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T02:10:37.327

您可以迭代源原型的道具并将每个道具添加到目标原型中。这假设 src 原型的属性是可以复制的简单属性（如函数或简单值，而不是对象本身），通常情况就是这样。如果要允许嵌套对象本身的原型属性，则需要克隆每个属性。通常这不是必需的，所以这里是更简单的版本：

```
bar.appendPrototype = function(src) {
    for (var prop in src.prototype) {
        this.prototype[prop] = src.prototype[prop];
    }
}

bar.appendPrototype(foo); 
```

原型只是对象，因此您可以将一个原型的属性复制到另一个原型。

* * *

**几年后更新。** 这种将方法从一个原型复制到另一个原型的一般概念创建了通常称为“mixin”的东西，您将一个类的方法混合到另一个类中，以便创建一个具有两个对象功能的新对象。这是一篇关于该主题的[有趣文章](https://javascript.info/mixins)，有助于解释。

在实现 mixins 时，现在可以`Object.assign()`在一个函数调用中将属性从一个对象复制到另一个对象，而不是编写自己的循环。

您甚至可以对以前使用 ES6`class`语法声明的类进行混入。

一个相当常见的 mixin 示例是您已经有一个类层次结构（因此您不能只继承），现在您希望叶类也是一个`eventEmitter`并具有该发射器的所有功能。您可以“混合” EventEmitter 对象，现在您之前声明的类也具有`EventEmitter`. 您需要采取的一项预防措施（与子类化时相同）是您需要确保两个对象实现之间没有实例属性名称冲突，因为混合代码和您的代码都将访问同一个核心实例对象。

上例中 mixin 的替代方法是向叶类实例数据添加一个单独的 EventEmitter 对象。就像在`this.emitter = new`EventEmitter() `. Then, to access the emitter, rather than`this.emit(...) `, you would do`this.emitter.emit(...)` 中一样。这也有效，但通常不方便或简洁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T02:24:18.630

这很容易做到。

```
function foo(){};
foo.prototype.a =2;

function bar(){
    foo.call(this,null);
}
bar.prototype.b=4;
console.log(bar.prototype); //{a:2,b:4} 
```

# javascript - Flot 不适用于 node.js

> ID：14178565
> 
> 赞同：2
> 
> 时间：2013-01-06T02:05:55.303
> 
> 标签：javascript, node.js, arduino, flot

我有一个 node.js 服务器脚本，它使用 Web 套接字从串行端口读取数据并在浏览器上显示数据。服务器脚本非常好，因为它可以在浏览器上正确显示实时数据。这也意味着 websocket 也可以正常工作。当我尝试使用 Flot 显示实时图表来可视化数据时，真正的问题就开始了。服务器抛出错误消息 - **调试 - 提供静态内容 /socket.io.js**

**这是我的服务器的代码：**

```
// It captures data from serial port and displays it in web page.
var http = require('http').createServer(handler);
var io = require('socket.io').listen(http);
var sys = require('sys');
var fs = require('fs');
var clients = [];
http.listen(8000);

var SerialPort  = require('serialport2').SerialPort;
var portName = 'COM10';
var sp = new SerialPort(); // instantiate the serial port.
sp.open(portName, { // portName is instatiated to be COM3, replace as necessary
       baudRate: 9600, // this is synced to what was set for the Arduino Code
      dataBits: 8, // this is the default for Arduino serial communication
      parity: 'none', // this is the default for Arduino serial communication
      stopBits: 1, // this is the default for Arduino serial communication
      flowControl: false // this is the default for Arduino serial communication
   });
function handler(request, response) {
        response.writeHead(200, {
        'Content-Type':'text/html'
    });
var rs = fs.createReadStream(__dirname + '/template2.htm');
sys.pump(rs, response);
};

var buffer ; //contains raw data
var dataStore = "" ; // To hold the string

io.sockets.on('connection', function(socket) {
var username;
clients.push(socket);
socket.emit('welcome', {'salutation':'TMP36 Sensor output!'});

sp.on('data', function (data) { // call back when data is received
    buffer = data.toString();
    // check for end character in buffer
    for(i=0; i<buffer.length; i++)
    {
        if(buffer[i] != "N")
        {
            //store it in data
            dataStore = dataStore + buffer[i];                  
        }  
        if(buffer[i] == "N")
         {
            //spit the data
            //console.log(dataStore);           
            //socket.emit('data', {'salutation':dataStore});    
            socket.emit('data', dataStore);    
            // //initialize data to null    
            dataStore = "";
         }
    }           
  });       
}); 
```

**下面是尝试使用 Flot 显示实时图表的客户端代码**

```
<!DOCTYPE html>
<html lang='en'>
<head>
        <title>Chat</title>
    <link type="text/css" href="/css/smoothness/jquery-ui-1.8.20.custom.css" rel="Stylesheet" />
        <script type='text/javascript'     
            src='http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js'></script>
    <script language="javascript" type="text/javascript" src="../3rdParty/flot/jquery.js"></script>
    <script language="javascript" type="text/javascript" src="../3rdParty/flot/jquery.flot.js"></script>
    <script src="//localhost:8000/socket.io/socket.io.js"></script>

    <script type="text/javascript"> 
    $(function () {         
        // Initialize Flot data points
        var totalPoints = 300;
        var res = [];
        function getInitData() {
            // zip the generated y values with the x values
            for (var i = 0; i < totalPoints; ++i){
                res.push([i, 0]);
            }
            return res;
        }

        // Options for Flot plot
        var options = {
            series: { shadowSize: 0 }, // drawing is faster without shadows
            yaxis: { min: 0, max: 100 },
            xaxis: { show: false }
        };
        var plot = $.plot($("#placeholder"), [ getInitData() ], options);

        // Update the JQuery UI Progress Bar
        $( "#progressbar" ).progressbar({
            value: 0
        });

        //var socket = io.connect();
        //var socket = io.connect('http://localhost:8000');
        //var socket = io.connect(document.location.href);
         var socket = io.connect('http://10.0.0.2:8000');

        //This block is executed when data is received from server
        socket.on('data', function(msg) {                   
            // Put sensor value to the 'sensor_value' span
            //var val = data.salutation;
            var val = msg;
            $('#sensor_value').html(val);

            // Push new value to Flot Plot
            res.push([totalPoints, val]); // push on the end side
            res.shift(); // remove first value to maintain 300 points
            // reinitialize the x axis data points to 0 to 299.
            for (i=0;i<totalPoints;i++) { res[i][0] = i; }

            // Redraw the plot
                plot.setData([ res ]);
                plot.draw();
                // Update JQuery UI progress bar.
                $( "#progressbar" ).progressbar({
                    value: val
                });
        });

    });
    </script>       
</head>
<body>
    <h1>Temperature Monitor</h1>
    <div role="main">
        Potentiometer Value: <span id="sensor_value"></span><br/>
    <div id="progressbar" style="width:600px;height:50px;"></div><br/>
    Graph:<br/>
        <div id="placeholder" style="width:600px;height:300px;"></div><br/>         
</body>
</html> 
```

谁能帮我弄清楚为什么 flot 在我的设置中不起作用？我也在同一台机器上运行服务器和客户端，即 Windows 7。

在 chrome 调试器中，我可以看到以下消息：

```
Resource interpreted as Script but transferred with MIME type text/html: "http://localhost:8000/3rdParty/flot/jquery.js". :8000/:6
Resource interpreted as Script but transferred with MIME type text/html: "http://localhost:8000/3rdParty/flot/jquery.flot.js". :8000/:6
Resource interpreted as Stylesheet but transferred with MIME type text/html: "http://localhost:8000/css/smoothness/jquery-ui-1.8.20.custom.css". localhost:5
Uncaught SyntaxError: Unexpected token < jquery.js:2
Uncaught SyntaxError: Unexpected token < jquery.flot.js:2
Uncaught TypeError: Object function (i,r){return new b.fn.init(i,r)} has no method 'plot' localhost:31 
```

任何帮助将不胜感激。

干杯！一个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T05:44:01.380

我只想发表评论，但我没有足够的代表。也许这会有所帮助，我不知道。

修改

```
<script src="//localhost:8000/socket.io/socket.io.js"></script> 
```

至：

```
<script src="http://localhost:8000/socket.io/socket.io.js"></script> 
```

为我摆脱了调试的东西......也在移动

```
var socket = io.connect('http://localhost:8000'); 
```

在函数下方似乎可以让控制台吐出更多的调试语句..

```
<script type="text/javascript"> 
$(function () {         
     var socket = io.connect('http://localhost:8000');
    // Initialize Flot data points
    var totalPoints = 300; 
```

# c# - 使用资源布局显示 TextView 文本

> ID：14178573
> 
> 赞同：0
> 
> 时间：2013-01-06T02:07:43.430
> 
> 标签：c#, android, layout, textview, monodevelop

我正在为 Android 使用 MonoDevelop，并且有一个关于在 TextView 中显示文本的问题。

这是我的代码：

```
 string stringNameDisplayText = "Test Name";
        string stringOwnerDisplayText = "Test Owner";
        string stringAddressDisplayText = "Test Address";
        string stringPhoneDetailsDisplayText = "0800 832 832";
        string stringWebDetailsDisplayText = "http://www.google.co.nz";
        string stringEmailDetailsDisplayText = "me@me.co.nz";
        string stringComentsDisplayText = "Test comments";

        var labelName = FindViewById<TextView> (Resource.Id.TextViewName);
        labelName.Text = stringNameDisplayText;

        var labelOwner = FindViewById<TextView> (Resource.Id.TextViewOwner);
        labelOwner.Text = stringOwnerDisplayText;

        var labelAddress = FindViewById<TextView> (Resource.Id.TextViewAddress);
        labelOwner.Text = stringAddressDisplayText; 
```

这是我的资源布局文件代码：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android" 
    android:orientation="vertical" 
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"> 

    <TextView android:id="@+id/TextViewName" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"
    android:paddingTop="20dip"/> 

    <TextView android:id="@+id/TextViewOwner" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"
    android:paddingTop="20dip"/> 

    <TextView android:id="@+id/TextViewAddress" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"
    android:paddingTop="20dip"/>    

    <TextView android:id="@+id/TextViewPhone"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:autoLink="phone"
    android:paddingTop="20dip"/>    

    <TextView android:id="@+id/TextViewWeb"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:autoLink="web"
    android:paddingTop="20dip"/> 

    <TextView android:id="@+id/TextViewEmail"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:autoLink="email"
    android:paddingTop="20dip"/>

    <TextView android:id="@+id/TextViewComments" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"/>

</LinearLayout> 
```

由于某种原因，我无法同时显示 stringOwnerDisplayText 和 stringAddressDisplayText。如果我注释掉 labelOwner 代码，则 stringAddressDisplayText 会正确显示，如果我注释掉 labelAddress，则 stringOwnerDisplayText 会正确显示。如果两者都没有注释掉，则只显示 stringNameDisplayText 和 stringAddressDisplayText，而不是 stringNameDisplayText、stringOwnerDisplayText 和 stringAddressDisplayText。

我可以请一些帮助以使其正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T02:51:19.650

那是因为您两次分配 labelOwner 吗？

试试这个 ：

```
var labelOwner = FindViewById<TextView> (Resource.Id.TextViewOwner);
    labelOwner.Text = stringOwnerDisplayText;

var labelAddress = FindViewById<TextView> (Resource.Id.TextViewAddress);
labelAddress.Text = stringAddressDisplayText; 
```

# php - CakePHP：如何为插入/更新自动设置关联的模型 ID？

> ID：14178575
> 
> 赞同：0
> 
> 时间：2013-01-06T02:08:48.917
> 
> 标签：php, cakephp, cakephp-model

晚上好！我对 CakePHP 的魔力有点困惑。其中一些是惊人的，但有一个棘手的问题让我感到困惑。我有一个用户模型和一个关联的 UserBasicInfo 模型：

```
 class User extends AppModel {
        public $name = 'User';
        public $hasOne = array(
            'UserBasicInfo' => array(
                'className' => 'UserBasicInfo',
                'dependent' => true
            )
        );

class UserBasicInfo extends AppModel {
    public $useTable = 'users_basic_info';
    public $belongsTo = array(
        'User' => array(
            'className'    => 'User',
            'foreignKey'   => 'id'
        )
    ); 
```

协会很好，它会自动加入等等。在进行插入时，如果它有记录，我将如何告诉 UserBasicInfo 模型它的 ID 是什么？它可能并不总是有记录，因为我不强迫用户添加此信息，而且我不喜欢添加充满空白数据的记录的想法。下面是我的 UserController 中的 edit_basic_information 方法：

```
 public function edit_basic_information($id = null) {
        $this->User->id = $this->Auth->user('id');

        $test = $this->User->read();

                    echo '<pre>';
            print_r($test);
            echo '</pre>';
        if (!$this->User->exists())
            throw new NotFoundException(__('Invalid user'));

        //if(empty($this->data))
//          $this->data = $this->User->findById($this->User->id);

        if ($this->request->is('post')) {
//          $success = false;
            $this->request->data['User']['id'] = $this->Auth->user('id');
//          $duplicate = $this->User->find('first', 
//              array(
//                  'conditions' => 
//                      array(
//                          'UserBasicInfo.user_id' => $this->Auth->user('id')
//                      )
//              )
//          );
            echo '<pre>';
            print_r($this->request->data);
            echo '</pre>';
//          if($duplicate) {
//              $success = $this->User->updateALL($this->request->data);
//          } else {
                $success = $this->User->saveALL($this->request->data, array('deep' => true));
//          }
            if ($success) {
                $this->Session->setFlash(__('The info has been saved'));
            } else {
                $this->Session->setFlash(__('The info could not be saved. Please, try again.'));
            }
        }
        $this->set('countries', $this->ChoicesCountries->find('list'));
    } 
```

正如你在上面看到的，我已经尝试了一些东西。凭借 Cake 所拥有的所有魔力，为重复检查执行额外的数据库调用之类的操作让我感觉自己做错了什么。此外， $this->data 在提交时会被覆盖 - 不过，这对于预先填充以前的答案很有用。虽然我也添加了一个隐藏的 id 字段，但我只需要添加验证，以确保 ID 与 Auth id 匹配。不是问题，但似乎确实有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T08:45:32.093

在阅读了更多 CakePHP 文档之后，我意识到这是一个有点愚蠢的问题。save/saveALL 方法只会关闭我给他们的请求数据，这些数据只有我在视图中指定的字段。它不会随意往request->data数组中添加数据。

我通过更改模型中的 primaryKey 解决了这个问题（不是问题的一部分，但是一旦我找出解决方案就会导致问题），然后添加

```
$this->request->data['UserBasicInfo']['user_id'] = $user['UserBasicInfo']['user_id']; 
```

到方法。

# mysql - 如何编写处理多个字段的外键约束

> ID：14178576
> 
> 赞同：1
> 
> 时间：2013-01-06T02:08:54.380
> 
> 标签：mysql, sql, database, foreign-keys

**问题**

`foreign keys`我想为表做的设置`Answer`是正确的想法吗？如何在处理多个字段的添加外键约束上编写 SQL？

**会话表：**

```
SessionId (PK) SessionName
1              AAA
2              AAB 
```

**问题表：**

```
QuestionId(PK)  SessionId(PK)  QuestionContent
1               1              What is 2+2?
2               1              What is 3+3?
1               2              What is 4+4?
2               2              What is 5+5? 
```

**答案表：**

```
AnswerId(auto, PK)  QuestionId(fk)  SessionId(fk)  Answer
1                   1               1              A
2                   1               1              D
3                   2               1              C
4                   2               1              A
5                   1               2              True
6                   2               2              A
7                   2               2              B 
```

现在我遇到的问题是`Answer`表的外键，我想知道哪个外键是正确的。

我所做的是向 中添加了一个外键，`SessionId`这意味着如果我单击一行`SessionId`，它与表`SessionId`中的匹配`Session`。

然后我想我会`QuestionId`在`Answer`表中提供一个外键链接到`Question`表。问题在于，如果在一行中单击 a `QuestionId`，那么它将显示`QuestionId`其中包含相同的所有行`QuestionId`。因此，如果我想查找此内容`Answer`：

```
AnswerId(auto, PK)  QuestionId(fk)  SessionId(fk)  Answer
1                   1               1              A 
```

当我点击上面的`QuestionId`外键时，它会在下面输出：

```
QuestionId(PK)  SessionId(PK)  QuestionContent
1               1              What is 2+2?
1               2              What is 4+4? 
```

答案不属于这两个问题，它只属于一个问题，但因为两者`QuestionId`相同，所以它显示两个问题。

所以我在想的是我想要一个外键约束，如果用户`QuestionId`连续点击，它会查找两者`QuestionId`，`SessionId`以便它知道答案所属的问题和会话（考试），以便它在下面输出：

```
QuestionId(PK)  SessionId(PK)  QuestionContent
1               1              What is 2+2? 
```

我的问题是我不知道如何编写处理两个字段的外键约束？外键的设置是否正确`SessionId`并`SessionId and QuestionId`一起正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T02:35:16.523

您可以使用以下语法为您的 Answers 表创建一个复合外键：

```
FOREIGN KEY (QuestionId, SessionId) REFERENCES Questions (QuestionId, SessionId) 
```

`SessionId`但是，考虑到您有一个使用该名称的列作为主键的 Sessions 表，您的 Questions 表列是复合主键的一部分似乎很奇怪。您可能应该考虑`Questions.SessionId`在 Sessions 表上创建一个外键，并且必须`QuestionId`是一个标准的单个主键。

如果您这样做，您会发现您的 Answers 表中不需要`SessionId`列。

这是您可能会执行的操作的示例：

```
-- Sessions table
SessionId (PK) | SessionName

-- Questions table
QuestionId (PK) | SessionId (FK) | QuestionContent

-- Answers table
AnswerId (PK) | QuestionId (FK) | Answer 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T02:32:58.463

你是对的，在你当前的模式中，你希望你的 Answer 表上有 2 个索引；1 在 SessionId 列上；和 1 在 SessionId 和 QuestionId 列上。这是一篇关于如何做到这一点的帖子：

[MySQL中的多列外键？](https://stackoverflow.com/questions/953035/multiple-column-foreign-key-in-mysql)

在旁注中，我可能会考虑将 QuestionId 也设为身份/自动。不确定您是否收到任何附加值，使其在每个会话中重置。可以帮助简化您所需的一些索引。

# java - 从字符串中删除字符：正则表达式或手动

> ID：14178580
> 
> 赞同：0
> 
> 时间：2013-01-06T02:09:16.813
> 
> 标签：java, regex, string

这将是从字符串中删除字符的更好方法（时间和空间）：

**方法1**：

```
String charsToRemove = "abc";
String myString = "abcdef";

myString = myString.replaceAll("["+charsToRemove+"]", ""); 
```

**方法2**：

```
// Initialized to charsToRemove
HashSet<Character> charsToRemoveSet = ...
Character[] myCharArray = myString.toCharArray();

int dst = 0;
for(int src=0; src<myCharArray.length; src++) {
    if(!charsToRemoveSet.contains(myCharArray[src]))
        myCharArray[dst++] = myCharArray[src];
}

myString = new String(myCharArray, 0, dst); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T02:12:14.920

从视觉上看，选项 1 更清晰。仅此一项就足以让我选择它。它也可能更快（尽管它取决于您输入的长度）。在选项二中，您正在设置第二个循环。~~`HashSet.contains()`运行自己的循环，增加第二个延迟。~~

对于短字符串，您可能不会注意到差异，但再一次，很难说出第二个发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T06:52:38.560

如果字符集是固定的，那么我会将选项 1 更改为

```
private static Pattern pattern = Pattern.compile("[abc]");

public String removeChars(String s) {
    return pattern.matcher(s).replaceAll("");
} 
```

String.replaceAll 看起来不错，但在内部它每次都调用 Pattern.compile。此外`"[" + charsToRemove + "]"`，这是一个性能杀手，在我们的例子中是可以避免的。

至于选项 2

```
Character[] myCharArray = myString.toCharArray(); 
```

不行，应该可以

```
char[] myCharArray = myString.toCharArray(); 
```

# c++ - Visual Studio 10 中的 GLFW 链接器错误

> ID：14178588
> 
> 赞同：0
> 
> 时间：2013-01-06T02:11:06.450
> 
> 标签：c++, visual-studio-2010, linker, linker-errors, glfw

我在 Visual Studio 10.0 上设置 GLFW 时遇到问题，我正在关注[这个人](http://www.gamedev.net/topic/316102-glfw-linking-problems/)的教程。但是我仍然遇到链接错误

```
1>GLFW.lib(window.obj) : error LNK2005: __glfwClearWindowHints already defined in window.obj
1>GLFW.lib(window.obj) : error LNK2005: __glfwClearInput already defined in window.obj
1>GLFW.lib(window.obj) : error LNK2005: __glfwInputKey already defined in window.obj
1>GLFW.lib(window.obj) : error LNK2005: __glfwInputChar already defined in window.obj
1>GLFW.lib(window.obj) : error LNK2005: __glfwInputMouseClick already defined in window.obj
1>GLFW.lib(window.obj) : error LNK2005: __glfwChooseFBConfig already defined in window.obj
1>GLFW.lib(window.obj) : error LNK2005: __glfwInputDeactivation already defined in window.obj
1>GLFW.lib(init.obj) : error LNK2005: __glfwInitialized already defined in init.obj
1>GLFW.lib(glext.obj) : error LNK2005: __glfwParseGLVersion already defined in glext.obj
1>GLFW.lib(glext.obj) : error LNK2005: __glfwStringInExtensionString already defined in glext.obj
1>GLFW.lib(glext.obj) : error LNK2005: __glfwRefreshContextParams already defined in glext.obj
1>MSVCRTD.lib(cinitexe.obj) : warning LNK4098: defaultlib 'msvcrt.lib' conflicts with use of other libs; use /NODEFAULTLIB:library 
```

我试过用谷歌搜索错误，但没有找到太多帮助。我在链接器设置中链接了 opengl32/lib 和 glu32.lib。我还为 include 和 lib 链接了适当的文件夹。我从 GLFW 站点下载并链接了 win32 二进制文件和原始 zip。

[代码](http://pastebin.com/KyVTWtFK)

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T02:58:50.473

该教程有点过时（2005 年 4 月 27 日发布）。您可能两次将一些源文件添加到两个不同的项目中，因此抱怨已经存在的符号定义。

似乎 GLFW 2.7.x 不包含用于自动构建您需要的一切的 MSVC makefile 脚本，但如果它可以选择切换到最新的 GLFW 3.0，您可以让您的生活更轻松，因为它们支持 cmake：

*   确保同时安装了[cmake](http://www.cmake.org/)和[git](http://msysgit.github.com/)。
*   从你的 Git Bash 运行`git clone git://glfw.git.sourceforge.net/gitroot/glfw/glfw glfw`
*   然后打开 Visual Studio 命令提示符并切换到新创建的 glfw 文件夹。创建一个新的子文件夹 ( `mkdir build`) 并切换到这个 ( `cd build`)。
*   现在运行`cmake -G "Visual Studio 10 Win64" ..`生成用于编译 GLFW 的项目文件。
*   打开该项目文件并编译您需要的所有内容（只需要 GLFW 子项目）

# java - 使用 ArrayList 是否比 Java 中的简单数组贵得多？

> ID：14178591
> 
> 赞同：1
> 
> 时间：2013-01-06T02:11:23.850
> 
> 标签：java

> **可能重复：**
> [Java 中的数组或列表。哪个更快？](https://stackoverflow.com/questions/716597/array-or-list-in-java-which-is-faster)

使用 ArrayList 是否比 Java 中的简单数组贵得多？我有很多 ArrayList，在某些地方我可以使用数组，我不确定我是否应该把它们全部替换掉​​。

具体来说，我可以想象 ArrayList 的 get 比使用数组的运算符 [] 更昂贵。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T02:14:21.727

它贵了一点点*。*如果您的数据不是固定大小的，并且您除了迭代它之外还做了其他任何事情，那么值得使用它来`ArrayList`增加可读性和简单性。

一个例外是原始类型，原始数组更有可能获胜。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T02:15:17.147

Donald Knuth 对优化做了以下两个陈述：

“我们应该忘记小的效率，比如大约 97% 的时间：过早的优化是万恶之源”（来自维基百科）

换句话说，除非您有一些基准表明您需要使用 Java 数组，否则请使用对您作为开发人员有利的那个；在我看来，这就是 ArrayList。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-06T02:15:27.403

一般来说，如果你需要做一些对时间非常敏感的事情，使用`ArrayList`vs`Object[]`不会成为你的瓶颈所在。数据库查询、网络通信、磁盘访问和未优化的阵列等将变得更糟。

由于`ArrayList`不同步，因此性能通常不会比 差很多`Object[]`，**特别是**如果您在添加元素之前指定大小。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-06T10:06:54.477

应用程序成本的很大一部分是其设计、开发和维护。相比之下，运行应用程序的成本通常要小得多，不值得担心。因此，当您考虑效率时，您应该考虑您的效率以及那些必须在您之后维护您的应用程序的人（假设您的应用程序很有用；）

假设您有应用程序，其中性能是一个问题。一个常见的错误是仅仅猜测性能问题在哪里并“优化”这些问题。这种方法的问题在于它通常

*   增加了复杂性
*   降低可维护性。
*   错过了最大的性能瓶颈
*   可以产生很小或没有差异，甚至可以使性能更差。（上一次有人尝试优化我编写的一些代码时慢了 50%；）

您需要做的是执行一些实际测试并测量超出您*特定可衡量业务需求*的性能瓶颈。

对关键瓶颈进行更改后，您需要重新测试系统以确保它确实有帮助。

# jquery-mobile - JQuery 移动表列不换行到垂直示例

> ID：14178593
> 
> 赞同：1
> 
> 时间：2013-01-06T02:11:49.933
> 
> 标签：jquery-mobile

我尝试使用 jQuery 移动表，但是当我减小浏览器的大小或在我的手机表列中打开它时，不会像示例那样扭曲到垂直。我复制了示例中的所有代码它仍然不起作用。

[例子](http://jquerymobile.com/branches/tables/docs/tables/movie-list.html)

**这是我的进口**

```
<link rel="stylesheet" href="css/jquery.mobile.structure-1.2.0.css"/>
<link rel="stylesheet" href="css/jquery.mobile-1.2.0.css"/>
<link rel="stylesheet" href="css/jqm-docs.css" />
<script src="js/jquery-1.8.3.js"></script>
<script src="js/jquery.mobile-1.2.0.min.js"></script>
<script src="js/jqm-docs.js"></script> 
```

我错过了什么。请帮忙谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T03:27:47.667

可能您已经知道这一点，但仍然值得一提的是，**响应式表**功能是未发布的 JQM 1.3 版的一部分。它甚至还不是测试版。因此，它可能足以用于探索和测试，但绝对不能用于生产。

话虽如此，您可能需要以下 js 和 css 文件：

```
table.js
table.reflow.js
table.columntoggle.js

jquery.mobile.table.css
jquery.mobile.table.reflow.css
jquery.mobile.table.columntoggle.css 
```

你可以从[GitHub 上查看它们](https://github.com/jquery/jquery-mobile)

# python - gmpy2的pip安装

> ID：14178594
> 
> 赞同：0
> 
> 时间：2013-01-06T02:12:04.397
> 
> 标签：python, pip, gmpy

当我使用pip安装gmpy2时，我总是得到1.16版本，即gmpy而不是gmpy2。

```
$ pip search gmpy
gmpy                      - GMP or MPIR interface to Python 2.4+ and 3.x
  INSTALLED: 1.16 (latest) 
```

有没有办法通过pip直接安装gmpy2？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T07:50:00.283

我已将 gmpy2 添加到[Python Package Index](http://pypi.python.org/pypi)。

gmpy2 需要 GMP 5.0 或更高版本、MPFR 3.1 或更高版本以及 MPC 1.0 或更高版本。如果您的操作系统不提供最新版本，您可能需要编译您自己的这些库版本。有关详细信息，请参阅[安装 GMPY2](http://code.google.com/p/gmpy/wiki/InstallingGmpy2)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T03:59:57.970

[gmpy2](http://code.google.com/p/gmpy/)现在处于测试阶段。我认为这就是为什么它在 pypi 中不可用的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T02:17:33.670

不，GMPY2 不在使用的[Python 包索引](http://pypi.python.org/pypi?%3aaction=search&term=gmpy&submit=search)中`pip`。只有 1.16 版是。似乎他们关于 Google Code 的文档可能是错误的。

# javascript - jquery 仅克隆元素的内容

> ID：14178597
> 
> 赞同：11
> 
> 时间：2013-01-06T02:13:11.920
> 
> 标签：javascript, jquery

jQuery中有没有办法克隆元素的内容？不是整个元素，只有内容（子元素）。

类似于`.html()`正在做的事情，但我也对克隆附加到内容的事件感兴趣。

我在看`.clone`，但似乎正在克隆整个元素。

谢谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-06T21:43:23.057

Doua Beri，参考[jQuery API 文档，`.clone()`](http://api.jquery.com/clone/)你会发现你想要的是`.clone(true,true)`. 这将制作一个元素（或元素集合）的深层副本，包括所有数据和事件绑定。

然后，您可以从两个选项中选择如何使用`.clone(true,true)`.

1.  单独克隆孩子以提供包含孩子克隆的 jQuery 集合。

    `var $childClones = $("#myElement").children().clone(true,true);`

2.  克隆外部元素以提供一个包含外部元素克隆的 jQuery 集合，该集合本身包含子元素的克隆。

    `var $clone = $("#myElement").clone(true,true);`

您采用哪种方法有点学术性。在这两种情况下，后代元素都可以集体或单独地被操作和/或插入到 DOM 中，尽管这样做的代码会略有不同。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-06T02:36:40.653

如果你喜欢深拷贝，只需克隆孩子：

`$('#footer-flair').children().clone()`

而不是将事件附加到特定元素，而是将事件附加到正在侦听子元素的容器元素，这样只要容器元素保持不变，即使您在容器内添加/删除一千个元素，您的事件也会触发。如果您不想让您的事件消失，您可以在 body 标签上执行此操作。

使用 'on' 方法来绑定事件，如下所示：

```
$('body').on('click', 'button.className',  function(){
  alert('button clicked');
}); 
```

# android - 查询实例表android日历API

> ID：14178598
> 
> 赞同：1
> 
> 时间：2013-01-06T02:13:13.507
> 
> 标签：android, calendar, android-4.0-ice-cream-sandwich

我正在尝试在 Android 日历 API 中查询 Instances 表。但是，我得到的异常是“无效列sync_data1”。

由于我作为同步适配器访问表，所以下面的 uri 是我使用的。

```
Uri instanceUri = CalendarContract.Instances.CONTENT_URI
.buildUpon()
.appendQueryParameter(CalendarContract.CALLER_IS_SYNCADAPTER, "true")
.appendQueryParameter(Calendars.ACCOUNT_NAME, ACCOUNT_NAME)
.appendQueryParameter(Calendars.ACCOUNT_TYPE, CalendarContract.ACCOUNT_TYPE_LOCAL)
.build() 
```

然后我使用下面的两行将开始和结束时间添加到 uri...

```
instanceUri=ContentUris.withAppendedId(instanceUri, start);
instanceUri=ContentUris.withAppendedId(instanceUri, end); 
```

我像这样运行查询......

```
Cursor cursor=cr.query(instanceUri,PROJECTION,selection,selectionArgs,Instances.BEGIN); 
```

在 PROJECTION 中，我希望检索的一些列是“Instances.SYNC_DATA1、Instances.SYNC_DATA2 和 Instances.SYNC_DATA3”。这些只能作为同步适配器访问，但这是我所做的，所以我不知道可能出了什么问题。

有任何想法吗？

谢谢。

# css - :first-letter 伪元素在 Firefox 中不起作用

> ID：14178605
> 
> 赞同：0
> 
> 时间：2013-01-06T02:14:32.810
> 
> 标签：css

无论我做什么，第一个字母伪元素在 Firefox 中都不起作用。它适用于 Chrome、Safari 和 Opera，但不适用于 Firefox。

这是一段CSS：

```
.dyk
{
    font-family: Myanmar Sangam MN;
    line-height: 100px;
    font-weight: 900;
    font-size: 20pt;
    width: 250px;
    position: relative;
    float: left;
}
.dyk:first-letter
{
    font-size: 60px;
} 
```

我尝试过的事情：

*   验证 html 和 CSS 文件
*   CSS 重置文件

我一遍又一遍地查看我的代码，但我不知道出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T02:22:34.667

似乎用户有类似的问题，也许这会有所启发！[::首字母伪元素在Firefox中不起作用](https://stackoverflow.com/questions/12753822/first-letter-pseudo-element-not-working-in-firefox)

在一个简单的例子中它可以工作，希望这会有所帮助：

```
<style type="text/css">
.dyk {
    font-family: Myanmar Sangam MN;
    line-height: 100px;
    font-weight: 900;
    font-size: 20pt;
    width: 250px;
    position: relative;
    float: left;
}
.dyk:first-letter { font-size: 60px; }
</style>
<div class="dyk">This is a test!</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-28T08:30:22.073

`:first-letter`在 CSS2 或`::first-letter`CSS3 中仅适用于块级元素，它不适用于内联元素。例如，如果您尝试在跨度中使用它，它将无法在 Firefox 中运行。您可以在此处了解有关其规范的更多信息[https://drafts.c​​sswg.org/css-pseudo-4/#first-letter-application](https://drafts.csswg.org/css-pseudo-4/#first-letter-application)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-15T19:53:02.117

您可以尝试`.dyk::first-letter`代替`.dyk:first-letter`.

W3Schools 示例就是这样做的。

# text - 从 .txt 文件中提取文本并以 .svg 显示

> ID：14178613
> 
> 赞同：1
> 
> 时间：2013-01-06T02:15:44.127
> 
> 标签：text, svg, href

我正在尝试使用 SVG 从 .txt 文件中提取一些文本并显示它。到目前为止，这是我的代码。

```
<svg width="10cm" height="3cm" viewBox="0 0 1000 300" version="1.1"
     xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">

  <text x="100" y="200" font-size="45" fill="red" >
    <tref xlink:href="sensors.txt"/>
  </text>

</svg> 
```

我不明白为什么它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T02:42:07.500

如果我没记错的话，您的代码与规范相对应。

看起来`tref`element 并不常见（至少在 Firefox 17 中没有）。在 Chrome 23 中，虽然它很好地呈现了规范中的示例，但它似乎不适用于外部文件中定义的文本（无论是纯文本文件还是外部 svg defs）。我尝试了绝对和相对链接并包括文件协议。

我想如果在服务器上，您将不得不使用诸如 PHP 之类的脚本语言插入文本，否则将非常困难。

有关规范中此元素的更多信息：http:
[//www.w3.org/TR/SVG/text.html#TRefElement](http://www.w3.org/TR/SVG/text.html#TRefElement)
[https://developer.mozilla.org/en-US/docs/SVG/Element/tref](https://developer.mozilla.org/en-US/docs/SVG/Element/tref)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T22:26:15.930

要修复非功能性`<tref>`元素，您可以在 SVG 末尾添加一个脚本，通过 Ajax 加载所需的文本文件：

```
<svg width="10cm" height="3cm" viewBox="0 0 1000 300" version="1.1"
     xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <text x="100" y="200" font-size="45" fill="red" >
    <tref xlink:href="sensors.txt"/>
  </text>
  <script type="text/javascript">
    var trefs = document.getElementsByTagName("tref");
    for (var i=0; trefs[i]; i++) {
      var xhr = new XMLHttpRequest();
      xhr.open("GET",trefs[i].getAttributeNS("http://www.w3.org/1999/xlink","href"),false);
      xhr.send("");
      trefs[i].parentNode.replaceChild(document.createTextNode(xhr.responseText),trefs[i]);
    }
  </script>
</svg> 
```

当然，这仅适用于引用文本文件，就像您一样。这可以在风格上进行改进，如果需要，还可以通过 ID 对文本的引用进行工作，例如`xlink:href="#textId'`.，甚至对于来自外部文件的引用 ID，例如`xlink:href="other.svg#textId"`.

我不确定是否可以明智地嗅探浏览器是否已经支持所有需要的方面，`<tref>`以便仅在必要时运行脚本。

# python - 将套接字从 python 发送到 Meteor (node.js)

> ID：14178615
> 
> 赞同：4
> 
> 时间：2013-01-06T02:16:02.470
> 
> 标签：python, node.js, websocket, meteor

我想将一个带有数据的套接字（只是一个像“23”这样的整数）从 python 发送到一个使用[Meteor](http://meteor.com/)编写的 Web 应用程序，Meteor是一个构建在 node.js 和其他库之上的 Web 框架。

在python方面，我有以下代码：

```
import serial, socket

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

s.connect(("localhost", 3000))
s.send ('something') 
```

在 Meteor 方面我需要做什么？这个python代码正确吗？这与 websocket 有什么不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T03:22:04.557

Meteor 使用 DDP 协议进行通信，因此您必须为 Python 编写一个 DDP 客户端，然后调用远程 Meteor 方法或订阅已发布的频道。

python DDP客户端的一些初步工作已经完成，但尚未完成，这里： [https ://github.com/meteor/meteor/blob/master/examples/unfinished/python-ddp-client/ddp-client.py](https://github.com/meteor/meteor/blob/master/examples/unfinished/python-ddp-client/ddp-client.py)

# intellij-idea - JetBrains phpStorm 不断重复实时模板，直到用户中止 (ESC)

> ID：14178617
> 
> 赞同：1
> 
> 时间：2013-01-06T02:16:38.017
> 
> 标签：intellij-idea, phpstorm, live-templates

考虑这些用于 php array() 的实时模板：

**模板-ari**

```
'$KEY1$'=>'$VAL1$', 
```

**模板-arr**

```
array(
$REPEAT$
)$ENDS$ 
```

我引入了一个变量 $REPEAT$。我想要的是不断重复另一个定义的模板，直到用户按下 ESC 键。

数组模板的每种用法可能有不同的编号。里面的物品。在一个地方我有 2 个和其他一些我有 10 个项目要写。

所以对于数组，它应该不断重复：'$KEY1$'=>'$VAL1$'，在 ENTER 键上按下 $VAL1$

如何使用变量表达式或自定义实现来做到这一点？

现在像这样使用它：

**模板-arr**

```
array(
'$KEY1$'=>'$VAL1$',
$ENDS$
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T13:48:32.007

PhpStorm 实时模板不支持这样的功能。实现此行为的唯一方法是编写自定义插件。

# netty - Netty 框架中的哪个类负责通过套接字地址发送和接收字节？

> ID：14178618
> 
> 赞同：0
> 
> 时间：2013-01-06T02:16:42.447
> 
> 标签：netty

刚开始在Netty Framework上做code walk，并试图找到这个框架的逻辑起点，请帮助。

JBOSS Netty 框架中的哪个类负责通过socket地址发送和接收字节，如何附加通道管道以带来异步I/O模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:59:45.183

对于 Netty 3.6，`AbstractNioSelector`（及其子类）和`AbstractNioChannelSink`（及其子类）是很好的起点。

对于 Netty 4，从类层次结构开始并向上爬`NioEventLoop`。`NioSocketChannel`

# android - Dropbox 会自动上传任何保存到外部 SD 卡的图像

> ID：14178622
> 
> 赞同：0
> 
> 时间：2013-01-06T02:17:07.313
> 
> 标签：android, image, dropbox

我正在将一些来自在线资源 (JPEG) 的图像保存到外部 SD 卡的目录下，例如：[外部 SD 卡]/appname/thumbnails/

我还有 DropBox 应用程序，它可以自动上传相机拍摄的照片，它正在上传我正在保存的所有图像，这不是我想要做的。

这是 Dropbox 应用程序的限制，还是有一些我没有遵循的约定导致这种情况发生？

编辑：为了澄清，我正在编写保存 JPEG 的程序，我试图找出我是否违反了导致另一个程序认为我拍了照片的约定。在查看了我的一些代码（其中一些是我从示例中复制和粘贴的）之后，我看到了这一行并认为它可能是罪魁祸首：

```
MediaStore.Images.Media.insertImage(getContentResolver(), filename.getAbsolutePath(), filename.getName(), filename.getName()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T03:15:37.207

首先这个问题不属于这个论坛。这是为了编程。请检查这个 - [StackApps](http://stackapps.com)

无论如何，解决您的困境的方法是这样的。

转到您的 Dropbox 设置，然后单击“关闭相机上传”。Dropbox 现在不会直接上传您的媒体内容。

# facebook - Facebook 网站网址

> ID：14178627
> 
> 赞同：-2
> 
> 时间：2013-01-06T02:19:24.870
> 
> 标签：facebook

我希望我的 facebook 应用程序的站点 URL 为[http://ronzohan.comze.com/redirect.php](http://ronzohan.comze.com/redirect.php)。但是 facebook 告诉我它不是一个有效的 URL。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T02:25:50.087

站点 url 需要指向该域上的域或路径，而不是特定文件。所以[http://ronzohan.comze.com/](http://ronzohan.comze.com/)会起作用，但[http://ronzohan.comze.com/file.php](http://ronzohan.comze.com/file.php)不会。

请记住，一旦用户授权了应用程序，您就可以`redirect_uri`在身份验证过程中将它们发送到[http://ronzohan.comze.com/redirect.php 。](http://ronzohan.comze.com/redirect.php)

# javascript - 使用 i18next 的异步语言选择器

> ID：14178629
> 
> 赞同：5
> 
> 时间：2013-01-06T02:19:32.930
> 
> 标签：javascript, jquery, i18next

我正在使用[http://jamuhl.github.com/i18next](http://jamuhl.github.com/i18next)来本地化一个静态网站。

我的初始化脚本是：

```
jQuery(function($) {
    var setLng = $.url().param('setLng');
    if (setLng)
    {
      language_complete = setLng.split("-");
    }
    else
    {
      language_complete = navigator.language.split("-");
    }
    language = (language_complete[0]);
    console.log("I speak (root): %s", language);

    i18n.init({ lng: language, debug: true }, function() {
        // save to use translation function as resources are fetched
        $(".tzm-i18n").i18n();
        $(".page-i18n").i18n();
        $(".menu-i18n").i18n();
        $(".user-i18n").i18n();
        $(".search-i18n").i18n();
        $(".footer-i18n").i18n();
    });
    // language selector
    var lngSld = false;
    $('.lng_trigger').click(function() { 
```

这是HTML：

```
 <div id="page" class="page-i18n">
    <!--${languages} Bread crumbs -->
      <p data-i18n="welcome.p1"></p>
      <p data-i18n="welcome.p2"></p>
  </div>
  <li id="set-lang"><!-- Language selector -->
    <select id="source">
        <option selected="selected" value="br">Brasil</option>
        <option value="fr">France</option>
        <option value="de">Germany</option>
        <option value="in">India</option>
        <option value="jp">Japan</option>
        <option value="rs">Serbia</option>
        <option value="uk">United Kingdom</option>
        <option value="us">United States</option>
    </select>
  </li> 
```

单击选项时设置语言的正确方法是什么，只需异步从文件`<select>`中提取值而无需重新加载整个页面？`<p data-i18n="welcome.p1"></p>``/locals/br/translations.json`

如果用户随后导航到其他页面，这将如何保持？我正在使用[https://github.com/allmarkedup/jQuery-URL-Parser](https://github.com/allmarkedup/jQuery-URL-Parser)但没有看到任何更改 uri 的函数，因此选择附加到 like `http://domain.tld/br/`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T11:34:30.107

我会将翻译函数放在一个单独的函数中（即），并在触发事件处理程序期间第一次和第二次`translatePage()`调用它。`init``click`

此外，i18next 带有 cookie 存储（用 初始化`useCookie: true`）；您可以使用它来存储您当前的语言并使用函数`$.i18n.setLng`检索它。`$.i18n.lng()`然后很容易重定向到每个 URI。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-25T01:52:12.067

manudurand 说的是对的。此外，您不需要重新加载页面，只需设置语言并再次翻译字符串，如下所示：

```
i18n.setLng('en-EN', function() { $('[data-i18n]').i18n(); }); 
```

但是，在您的情况下，而不是...

```
$('[data-i18n]').i18n(); 
```

... 这将是 ...

```
 $(".tzm-i18n").i18n();
    $(".page-i18n").i18n();
    $(".menu-i18n").i18n();
    $(".user-i18n").i18n();
    $(".search-i18n").i18n();
    $(".footer-i18n").i18n(); 
```

# sql - Wordpress 自定义函数 get_post_like_slug 不起作用？

> ID：14178631
> 
> 赞同：0
> 
> 时间：2013-01-06T02:19:59.520
> 
> 标签：sql, wordpress

我有一个自定义的**WP 3.5**函数，但我不知道为什么它不起作用......我确定错误在 SQL 查询中。该函数试图做的是从特定类别中获取帖子，其中帖子的 slug 以 $post_name 开头。

```
function get_post_like_slug($post_name) {
    global $wpdb;
    $page_name = substr($post_name, 0, -1).'%';
    $id = $wpdb->get_var( $wpdb->prepare("SELECT $wpdb->posts.ID FROM $wpdb->posts LEFT JOIN $wpdb->term_relationships ON($wpdb->posts.ID = $wpdb->term_relationships.object_id) WHERE ($wpdb->term_relationships.term_taxonomy_id = 5 AND $wpdb.post_name LIKE %s)", $post_name ));

    if ( $id )
        return ($id);

    return null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T01:47:03.827

我找到了解决办法！我所做的是在每个表名上添加“$wpdb->”并转义 % 字符 (%%)。下面的功能现在有效：

```
function get_post_like_slug($post_name) {
    global $wpdb;
    $post_name = substr($post_name, 0, -1);
    $id = $wpdb->get_var( $wpdb->prepare("SELECT ID FROM $wpdb->posts LEFT JOIN $wpdb->term_relationships ON $wpdb->posts.ID = $wpdb->term_relationships.object_id WHERE post_name LIKE %s AND $wpdb->term_relationships.term_taxonomy_id=5 LIMIT 1", $post_name.'%%' ));

    if ( $id )
        return ($id);
    return null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T02:53:50.303

在另一篇关于在 wordpress 中正确使用 like 语句的帖子中看到了这一点。

可能是这样的：

```
$id = $wpdb->get_var( $wpdb->prepare("SELECT $wpdb->posts.ID FROM
  $wpdb->posts LEFT JOIN $wpdb->term_relationships ON($wpdb->posts.ID =
  $wpdb->term_relationships.object_id) WHERE
  ($wpdb->term_relationships.term_taxonomy_id = 5 AND $wpdb.post_name
  LIKE %s)", '%' . like_escape($post_name) . '%' )); 
```

这是帖子的链接：[https ://wordpress.stackexchange.com/a/8847](https://wordpress.stackexchange.com/a/8847)

# c# - 如何更改组合框中的项目？

> ID：14178634
> 
> 赞同：2
> 
> 时间：2013-01-06T02:20:13.960
> 
> 标签：c#, combobox

我想让用户操作我放入组合框中的数据。问题是我想不出一种方法来将更改应用于组合框中的数据。关于如何实现这一目标的任何线索？

要添加一些上下文，我的组合框中的所有数据都是格式为 "SomeName|#" 的字符串。最后的数字由用户修改为他/她想要的任何值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T02:33:46.333

您是否尝试更改所选组合框项目中的文本？

```
 comboBox.Items[comboBox.SelectedIndex] = "SomeName|#"; 
```

至于更改数据，如果以上不是您想要的，请尝试以下操作：

```
// Get the selected the data from the combobox 
MyData data = comboBox.Items[comboBox.SelectedIndex] as MyData;
// Perform your operations
data.myData = "NewData";
// Add the modified data back
comboBox.Items[comboBox.SelectedIndex] = data; 
```

如果绑定到列表：

```
 // When adding new Data
    MyData newData = new MyData("Data1");
    comboBox1.Items.Add(newData);
    myDataList.Add(newData);

    // When modifying selected data
    MyData data = comboBox1.Items[comboBox1.SelectedIndex] as MyData;
    data.myData = "NewData";
    comboBox1.Items[comboBox1.SelectedIndex] = myDataList[comboBox1.SelectedIndex] = data; 
```

如果您想知道 MyData 是什么：

```
public class MyData
{
    public string myData;

    public MyData(string p)
    {
        myData = p;
    }

    public override string ToString()
    {
        return myData;
    }
} 
```

**编辑** 好的，如果您要绑定到数据源，则需要先解除绑定，假设数据源是 myDataList：

```
 // Get the selected data
        MyData data = myDataList[comboBox.SelectedIndex] as MyData;
        // Unbind
        comboBox.DataSource = null;

        // When adding new Data
        MyData newData = new MyData("NewData" + myDataList.Count());
        myDataList.Add(newData);

        // When modifying selected data
        data.myData = "ModifiedData";

        // Rebind
        comboBox.DataSource = myDataList; 
```

# c# - MVC 中的硬编码控制器、视图和操作名称是良好做法吗？

> ID：14178639
> 
> 赞同：9
> 
> 时间：2013-01-06T02:22:35.310
> 
> 标签：c#, .net, asp.net-mvc

查看 MVC 代码时，您经常会遇到如下代码片段：

```
return RedirectToAction("Index");

<li>@Html.ActionLink("Books", "Index", "Books")</li> 
```

其中控制器名称、控制器操作名称或视图名称以硬编码字符串的形式提供。这是一种常见的做法，但这是一种好的做法吗？毕竟，如果您重命名控制器，而忘记重命名许多引用之一，您将得到一个运行时错误，而不是更喜欢的编译时错误。

您可以通过将静态 Name 属性添加到 BaseController 来缓解该问题，然后使用如下代码（操作名称会稍微难以完成）。

```
<li>@Html.ActionLink("Books", "Index", BooksController.Name)</li> 
```

因此，这种硬编码应该被认为是一种较小的邪恶（而不是不使用 MVC）。还是人们开发了一些实践来解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T16:23:13.740

您正在寻找[T4MVC](http://t4mvc.codeplex.com/)，它生成字符串常量的强类型类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T03:10:35.893

我们本能地知道字符串字面量是一件坏事，因此您将“书籍”设为常量的本能通常是好的。这个想法是将字符串放在一个位置，所以当您需要将“Books”更改为“Products”时，您只需在一个位置进行更改。

但是，这样做会弄乱可以帮助您的工具。我刚刚使用 Resharper 将“HomeController”重命名为“BananaController”，它会自动更新`@Html.ActionLink(... "Home" ..)`对`@Html.ActionLink(... "Banana" ..)`

我不知道 VS 是否会在没有 Resharper 的情况下做到这一点。我被告知，VS 在重构方面每年都在变得更好，但我实际上并没有与没有 Resharper 的任何人一起工作......

# html - 如何将内容居中并将背景颜色扩展到页面的 100%？

> ID：14178641
> 
> 赞同：4
> 
> 时间：2013-01-06T02:23:15.463
> 
> 标签：html, css, colors, background

这种布局在网络上几乎无处不在，但似乎没有人提供任何关于它如何工作的信息。我需要将内容居中，并且**背景需要扩展页面的整个宽度**示例[http://www.fuerstlaw.com/](http://www.fuerstlaw.com/)（蓝色 bg 颜色扩展了整个宽度）。这是如何使用 CSS 完成的？我觉得这很简单，但就是想不通。

这是我的代码，因为我只是想至少让标题在此链接上工作到该站点的测试页面[http://gsringolaw.com/home](http://gsringolaw.com/home)

```
body {
    margin: 0;
    padding: 0;
}
#wrapper {
    width: 960px;
    margin: 0 auto;
}

#masthead {
    min-width: 100%;
    margin: 0px;
    padding: 0px;
    background-position: 0px 0px;
    background-color: #00304F;
    position: relative;
    z-index: 0;
}
#headertext {
    position: relative;
    width: 250px;
    height: 82px;
    font-family: Georgia, "Times New Roman", Times, serif;
    color: #FFFFFF;
    font-size: large;
    top: -41px;
    left: 704px;
}
#glow {
    height: 170px;
    background-image: url('images/glow.png');
    position: relative;
    background-repeat: no-repeat;
    background-position: center;
    top: -192px;
    left: -13px;
    width: 973px;
}

#logo {
    position: relative;
    background-image: url('images/gayleringo.png');
    background-repeat: no-repeat;
    width: 528px;
    height: 113px;
    top: 28px;
    left: 0px;
}

<div id="wrapper">
<div id="masthead" style="height: 171px">
    <div id="logo">
    </div>
    <div id="headertext" class="auto-style1">
        Louisiana: 504-975-0180<br />
        <br />
        Florida: 850-292-7059</div>
    <div id="glow">
    </div>
</div>
<div id="top_nav">
</div>
<div id="container">
    <div id="right_col">
    </div>
    <div id="page_content">
    </div>
</div>
<div id="footer">
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T04:17:54.980

要实现这一点，您需要一个包装器和包含内容的实际 div。

```
<div id="wrapper">
    <div id="content">
        Content
    </div>
</div> 
```

然后你为 the 设置一个背景，`#wrapper`并给它一个`width`和`margin: 0 auto`to`#content`以使其居中。

```
#wrapper {
    background: red;
}
#content {
    width: 960px;
    margin: 0 auto;
} 
```

外部 div，因为它的`display: block`，将扩展到页面宽度的 100%。然后内部 div 以固定宽度居中。所以实际上，背景不是来自内容本身，而是来自包装器。

我喜欢做的是给内部 div 一个类，`.inside`然后应用到我想要的任何 div。例如：

```
<div id="header">
    <div class="inside">
        Header
    </div>
</div>
<div id="main">
    <div class="inside">
        Main content
    </div>
</div>
<div id="footer">
    <div class="inside">
        Footer
    </div>
</div> 
```

你可以在这里看到一个例子：http: [//codepen.io/joe/pen/bxueF](http://codepen.io/joe/pen/bxueF)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T02:30:02.867

在您之外添加另一个`div`元素`#wrapper`并将其分配给`background-color`.

```
 <div id="full-width">
    <div id="wrapper">
       <div id="masthead" style="height: 171px">
          <div id="logo">
       </div>
          <div id="headertext" class="auto-style1">
             Louisiana: 504-975-0180
         <br>
         <br>
             Florida: 850-292-7059
          </div>
          <div id="glow">
          </div>
        </div>
     </div>
 </div>

 #full-width {
    width: 100%;
    background: #00304F;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T02:29:16.970

您作为示例的页面使用背景图像。如果你右击页面，Inspect Element，然后查看 Body，你会看到下面的样式被级联了：

```
body {
  ...,
  background-image: url(images/bg-body.gif);
  background-repeat: repeat-x;
  background-position: 0px 181px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T02:29:50.883

要么刊头有

```
width:auto 
```

并且在包装之外

或者包装器和标头广告有

```
width:auto 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-06T02:32:36.210

你可以试试。

```
 <div id="wrapper">
              <div id="banner">
                <div id="banner-inside">
                   <div id="content">content</div>
                </div>
              </div>
            </div>

           //css
           #wrapper{
             width:100%;
           }
           #banner{
             width:100%;
             background-color:blue;
           }
           #banner-inside{
             width:980px;
             margin:0 auto;
           }
           #content{ position:relative; top:0;} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-06T02:33:22.320

```
#content{
    width: 960px; //tells the div to be exactly 960px wide
    margin: 0 auto; //tells the content to be centered with 0 px to surrounding object
    background-color: red;
}

#background{
    width: 100%; //tells the outer div to be 100% of screen width
    background-color: blue;
} 
```

创建两个 div 的一个，其 id 内容位于名为 background 的内部。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-06T03:16:30.327

```
 body {height:100%;font-size:12px;}

body, body > section, body > header {width: 100%;margin:0; padding:0;}

.container {width:960px; margin:0 auto;}

header {
  background: #1234ff;
  margin-bottom:3em;}

header .container {
  background: #123456;
  padding: 0 1em;
  *zoom: 1;/* clear floats fix - fix for IE*/}
header .container:after { /* clear floats fix */
  content: ""; display: table;   clear: both; }
/* Logo */
header h1, header h1 a {
  background: url('/images/logo.png') no-repeat; /*set the url of your image and make sure it does repeat*/
  height:60px; /*set this to the height of your logo*/
  width: 175px; /*set this to the width of your logo*/}

/*Now we want to float the logo and the phone number sections so that the appear on the left and right*/
header h1  {float:left;}
header aside {float:right;}
/*make logo clickable, must set anchor to same size as its parent*/
header h1 a {
  display: block;}

header aside {
  background: #123456;
  color:white;
  padding:.5em 1em;
  text-align:right;}

header p {font-size:2em;line-height: .75em;} 
```

html

```
<body id="wrapper">
  <header>
     <div class="container">
       <!--use css to add image to h1--->
        <h1><a title="company name" rel="bookmark"></a></h1>
       <aside>
         <p>Louisiana: <a>504-975-0180</a></p>
         <p>Louisiana: <a>504-975-0180</a></p>
       </aside>
    </div>
  </header>
  <section>
    <div class="container" id="content">
      <p>

Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
      </p>
    </div>
  </section>

</body> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-06T02:34:15.440

您将需要您的彩色`DIV`宽度为 100%。在这个`DIV`地方你剩下的`DIV`和任何其他元素/图形与一组`width`和`margin`。`0 auto`

```
#masthead {
min-width: 100%;
margin: 0px;
padding: 0px;
background-position: 0px 0px;
background-color: #00304F;
position: relative;
z-index: 0;
}

#divInsideIt {
width:800px;
margin: 0 auto;
} 
```

# java - 使用 servlet 接收音频文件

> ID：14178645
> 
> 赞同：2
> 
> 时间：2013-01-06T02:23:52.927
> 
> 标签：java, php, apache-flex, servlets

简介：我有一个 Servlet，它接收我无法阅读的请求 (getContentType() = audio/x-wav)。我需要阅读此 wave 并将其保存在服务器端。

详细故事：我对 Flex、javascript、PHP 和 Python 一无所知，我想（从客户端“浏览器”）记录一个波形文件并将其发送到服务器以保存它（用于进一步的 ASR 处理）。

经过一番搜索，我找到了一个我已经使用过的名为 Wami-Recorder（使用 flex 和 java scrip）的库，但它没有给我任何 java 服务器端示例，它也缺少文档，所以我决定亲自动手让它工作。它包含一个服务器端 python 和 PHP 示例（我将列出 PHP 示例）：

```
<?php    
# Save the audio to a URL-accessible directory for playback.    
parse_str($_SERVER['QUERY_STRING'], $params);    
$name = isset($params['name']) ? $params['name'] : 'output.wav';    
$content = file_get_contents('php://input');    
$fh = fopen($name, 'w') or die("can't open file");    
fwrite($fh, $content);    
fclose($fh);    
?> 
```

最后一点是，我确信如果我创建了一个套接字服务器并将请求定向到它，我将能够轻松获取媒体，但我希望一切都由 Servlet 处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T17:27:35.440

基本上，Java servlet 等效于以下 PHP 行，这是代码中的关键行，

```
$content = file_get_contents('php://input'); 
```

是

```
InputStream input = request.getInputStream(); 
```

这基本上返回了唯一的 HTTP 请求正文。您可以将其写入任意`OutputStream`常用的 Java 方式。例如，一个`new FileOutputStream("/some.wav")`.

您应该只意识到 HTTP 请求正文只能被读取一次，并且当您调用任何`request.getParameterXxx()`方法时它会被隐式解析。因此，如果您也对请求 URI 查询字符串中的参数感兴趣，那么您应该改用

```
String queryString = request.getQueryString(); 
```

并自己进一步解析（即拆分`&`，然后拆分`=`，然后`URLDecode`是名称和值）。

# python - 有没有办法将整数转换为向上计数的整数列表？

> ID：14178649
> 
> 赞同：1
> 
> 时间：2013-01-06T02:24:36.410
> 
> 标签：python, django, django-pagination

只需说我在 Python 中有一个整数，例如：100。

我想将此整数转换为计数到此整数的列表，例如：[1,2,3,... 100]

最有效的方法是什么？

（如果您想知道我为什么要这样做，那是因为我要使用的 Django Paginate 库需要一个列表——如果有更优雅的方式来使用 Paginate 而无需这样做，请告诉我）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-06T02:25:24.333

[`range()`内置](http://docs.python.org/2.7/library/functions.html#range)的 Python完全符合您的要求。例如：

```
range(1, 101) 
```

请注意，`range()`从 开始计数`0`，这在计算机科学中是正常的，所以我们需要通过`1`，并且它一直计数到给定值，不包括 - 因此`101`这里计数到`100`。所以一般来说，你想`range(1, n+1)`从 数`1`到`n`。

另请注意，在 3.x 中，这会生成一个迭代器，而不是一个列表，因此如果您需要一个列表，那么您可以简单地`list()`将对`range()`. 也就是说 - 大多数时候可以使用迭代器而不是列表（它有很大的优势，因为迭代器可以延迟计算），在这种情况下，不需要创建列表（在 2.x 中，功能像 3.x 中的范围一样，可以使用[`xrange()`](http://docs.python.org/2/library/functions.html#xrange).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T03:07:31.740

Lattyware 给出的解决方案对于生成列表是正确的，但是如果您使用 Django 分页，您可以使用`paginator_instance.page_range`

[https://docs.djangoproject.com/en/dev/topics/pagination/#django.core.paginator.Paginator.page_range](https://docs.djangoproject.com/en/dev/topics/pagination/#django.core.paginator.Paginator.page_range)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T02:25:38.980

您可以使用范围或 xrange。xrange 更快，但返回一个迭代器。

```
>>>range(1,101)
[1, 2, 3, ... , 99, 100]

>>> xrange(1,101)
xrange(1, 101)

>>>list(xrange(1,101))
[1, 2, 3, ... , 99, 100] 
```

# iphone - ios - 根据设备方向加载pdf并跳转到页面

> ID：14178650
> 
> 赞同：0
> 
> 时间：2013-01-06T02:24:42.003
> 
> 标签：iphone, ios, ipad, pdf

情况是这样的——我的客户有一个 pdf 文档，有两个版本，纵向和横向布局。他希望我编写一个应用程序，该应用程序将根据设备方向加载 pdf，并且当方向更改时，将显示另一个相应的版本。

这是用例

*   以横向模式启动设备 - Landscape.pdf 已加载

*   设备将方向更改为纵向 - Portrait.pdf 已加载并显示

*   设备将方向更改为横向 - 显示 Landscape.pdf

这很容易做到，但真正的罪魁祸首是 pdf 文件有多个页面，当设备在显示其他页面时改变方向时，它需要直接跳转到该页面。

我的问题是这在 iOS 中是否可行？我可以加载 PDF 并直接跳转到特定页面吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T02:32:17.780

如果您使用 UIWebView 加载 PDF，并且有一个滚动视图，您可以指定位置。

# objective-c - 移除 UISearchBar 的内阴影

> ID：14178652
> 
> 赞同：2
> 
> 时间：2013-01-06T02:25:05.000
> 
> 标签：objective-c, ios, uisearchbar, uisearchdisplaycontroller

如何删除 UISearchBar 的内部阴影？

我试过`[[searchBar layer]setShadowOpacity:0]`了，但这似乎没有做任何事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T09:37:46.243

1.  创建具有所需外观的背景图像。例如， [单击此处](https://drive.google.com/drive/folders/0B9Ri89qqS5wiX2g3WTdfck1Ebjg?usp=sharing)查看我使用的两个带有端盖的可拉伸图像。

2.  使用以下 API：

    ```
    [self.searchBar setSearchFieldBackgroundImage:[UIImage imageNamed:@"search_field.png"] forState:UIControlStateNormal]; 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-14T02:54:02.397

```
 UITextField *textField = nil;

    for( UIView *subview in searchBar.subviews )
    { 
       if ([subview isKindOfClass:[UITextField class]]) {
            textField = (UITextField *)subview;
            textField.borderStyle = UITextBorderStyleNone;
            textField.layer.borderWidth = 1.f;
            textField.layer.borderColor = [UIColor lightGrayColor].CGColor;
            textField.layer.cornerRadius = 14.0f;
            textField.background = nil;
            textField.backgroundColor = [UIColor whiteColor];
        }
    } 
```

使用此代码可以删除 UISearchBar 的 Inner Shadow。试试吧。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-06T03:18:47.510

```
 for( UIView *subview in searchBar.subviews )
    {
        if( [subview isKindOfClass:NSClassFromString( @"UISearchBarBackground" )] )
        {
            //   you can set the textField backgroundColor clearColor like below.
            //  [subview setAlpha:0.0f];
            //  break;

            //   or you can set textField backgroundColor solid color like below
            UIView *aView = [[UIView alloc] initWithFrame:subview.bounds];
            aView.backgroundColor = [UIColor greenColor];
            [subview addSubview:aView];
            break;
        }
    } 
```

# android - Android -- 是否可以扭曲 TextView？

> ID：14178659
> 
> 赞同：4
> 
> 时间：2013-01-06T02:26:21.913
> 
> 标签：android, graphics

我想用弧形扭曲 TextView。我知道可以扭曲图像，但是可以扭曲 TextViews 吗？这样做有既定的模式吗？

我的另一个选择是在 Photoshop 中扭曲文本，将其保存为透明背景，并使用 ImageView，但客户希望在大约 10 个地方完成此操作，如果可以的话，我想避免额外的资源。

![扭曲的文字](../Images/22b858eb2ae69056623d23fd8f3e774a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T06:24:12.517

您需要使用 customView，覆盖 onDraw()，创建路径并使用 drawTextOnPath。

```
@Override onDraw(Canvas canvas){
    Path mPath = new Path();
    mPath.addCircle(x, y, 200, Path.Direction.CW);
    canvas.drawTextOnPath(textToDraw, mPath, textX, textY, paint);
} 
```

请看看[在圆形视图中绘制文本？](https://stackoverflow.com/questions/10150642/draw-text-in-circular-view)

[如何在 Android 中使用 TextView 显示圆形文本](https://stackoverflow.com/questions/13153201/how-to-show-circular-text-using-textview-in-android)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T02:45:43.090

Android 中的视图是矩形的，因此您必须使用 Canvas 和 Paint 来实现您的目标。查看 SDK 示例中的 API 演示。有一个名为[Graphics/Text Align](https://android.googlesource.com/platform/development/+/master/samples/ApiDemos/src/com/example/android/apis/graphics/TextAlign.java)的条目，它显示了沿弯曲路径绘制的文本。

# javascript - 通过 css/javascript 更改指定的样式？

> ID：14178662
> 
> 赞同：1
> 
> 时间：2013-01-06T02:26:56.470
> 
> 标签：javascript, css, selector

我知道这是一个老问题，类似的问题（已解决）更加复杂。但我已经尝试过，但我自己无法弄清楚。

我有

```
<div style="color:white; padding:10px">Text</div> 
```

我想将其颜色更改为红色：

```
div[style*="color:white"]{color:red}

$('div').filter(function() {
    return $(this).css('color') == 'white';
}).css("color", "red"); 
```

我尝试了css和javascript，有或没有空格，使用十六进制或RGB颜色代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T02:32:41.193

问题是它没有返回您所期望的。它实际上返回一个 RGB 字符串`rgb(255, 255, 255)`，而不是“白色”。改变它，你就是金子。

[示例 JSFiddle](http://jsfiddle.net/Sw73w/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T02:32:54.593

实际上`$(this).css('color')`返回`rgb(255, 255, 255)`，所以你可以使用

```
$('div').filter(function() {
    return $(this).css('color') == 'rgb(255, 255, 255)';
}).css("color", "red"); 
```

[**例子。**](http://jsfiddle.net/uXzJM/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T02:56:15.383

在 .css() 的 JQuery API 文档中，写了以下语句。

“不同的浏览器可能会返回逻辑上但文本上不相等的 CSS 颜色值，例如 #FFF、#ffffff 和 rgb(255,255,255)。”

所以，我认为简单`return $(this).css('color') == 'rgb(255, 255, 255)';`的将来也可能有一些问题。

在这里我建议使用 css 类来实现它，如下所示：

```
.white{color:white;}
.red{color:red;}

$('div').filter(function() {
    return $(this).hasClass('white');
}).removeClass('white').addClass('red'); 
```

以及为什么`div[style*="color:white"]{color:red}`不起作用，这是因为 inline css 在三种方式中具有最高优先级。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T02:31:40.023

你在那里做了一些非常时髦的事情，不应该那样使用过滤器功能。要选择一个 dom 元素并使用 jquery 更改其 css，请执行此操作`$('div').css({'color': 'red'});`

这是一个工作[示例](http://jsfiddle.net/kB53t/)

对于 jquery 的正确介绍，我推荐了[惊人的 Chris Coyer的这个视频](http://css-tricks.com/video-screencasts/20-introduction-to-jquery/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-06T02:31:55.380

内联 CSS 接管任何内部或外部样式表。如果您能够删除该特定元素上的内联 css 并用类似的东西替换它，`<div class="myElememt"></div>`那将是理想的。至于使用 jQuery，我通过使用不带过滤器的 CSS 方法对其进行了更改：

```
$('div').css('color', 'blue'); 
```

# python - 基于 python 3.x 列表中项目的条件 if 语句

> ID：14178666
> 
> 赞同：1
> 
> 时间：2013-01-06T02:28:09.150
> 
> 标签：python, list, python-3.x, conditional, call

如果不使用我们尚未“学习”的任何东西，我很难让这项任务发挥作用......

我必须有一个全局定义的变量，例如：

```
x = [80, 70, 65, 60, 50, 40, 45, 40, 35, 7, 0] 
```

给定这个全局变量，我需要用条件语句调用它的值来给出一个特定的结果。根据我们在课堂上的经历，我能想到的只有

```
x = [80, 70, 65, 60, 50, 40, 45, 40, 35, 7, 0]

if x >= 50:
    print("Good")
else:
    print("Bad") 
```

这根本行不通……但是我必须要做的是：

```
for x in [80, 70, 65, 60, 50, 40, 45, 40, 35, 7, 0]:
    if x >= 50:
        print("Good")
    else:
        print("Bad") 
```

显然，这对于赋值来说是不可接受的，因为全局变量没有按应有的方式定义。此外，分配处理海龟模块，海龟的特征将根据列表中的整数值而改变。

所以现在我已经在这里给出了一个与作业更直接相关的例子的答案。

```
import turtle

def drawBar(t, height):
    t.begin_fill()
    t.left(90)
    t.forward(height)
    t.write('  '+ str(height))
    t.right(90)
    t.forward(40)
    t.right(90)
    t.forward(height)
    t.left(90)
    t.end_fill()
    if height >= 50:
        t.fillcolor("blue")
    elif height < 50 and height >= 30:
        t.fillcolor("yellow")
    else:
        t.fillcolor("red")

xs = [80, 70, 65, 60, 50, 40, 45, 40, 70, 7, 0]

maxheight = max(xs)
numbars = len(xs)
border = 10

bob = turtle.Turtle()
bob.color("blue")
bob.pensize(3)

wn = turtle.Screen()
wn.bgcolor("lightgreen")
wn.setworldcoordinates(0-border,0-border,40*numbars+border,maxheight+border)

for a in xs:
    drawBar(bob, a)

wn.exitonclick() 
```

所以现在我已经到这里了，if 语句并不能准确地反映程序中每个条的高度，它似乎给出了几乎随机的颜色，但颜色总是组合在一起（它们不应该是）。我需要每个条根据其高度为某种颜色，例如高于 50 为蓝色，低于 50 但等于或超过 30 为黄色，其他一切为红色。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T02:29:37.757

```
for a in x:
    if a >= 50:
        print("Good")
    else:
        print("Bad") 
```

这是你想要的？

确保您的“a”变量实际上是一个整数：

```
>>> str(1)>=5
True 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T02:31:15.427

您可以直接在`for`循环中使用列表，如下所示：

```
for y in x:
    if y >= 50:
        print("Good")
    else:
        print("Bad") 
```

**更新 ：**

这是更新的`drawBar`功能。问题是，你必须设置`fillcolor`之前的绘图。

```
def drawBar(t, height):
    if height >= 50:
        t.fillcolor("blue")
    elif height < 50 and height >= 30:
        t.fillcolor("yellow")
    else:
        t.fillcolor("red")

    t.begin_fill()
    t.left(90)
    t.forward(height)
    t.write('  '+ str(height))
    t.right(90)
    t.forward(40)
    t.right(90)
    t.forward(height)
    t.left(90)
    t.end_fill() 
```

输出：

![在此处输入图像描述](../Images/4679f90d85420879a8b0e4cc1b192c5a.png)

# iphone - 视频播放失败 - [NSURL initFileURLWithPath:]: nil string parameter

> ID：14178667
> 
> 赞同：8
> 
> 时间：2013-01-06T02:28:20.493
> 
> 标签：iphone, ios, video, ios6

我很难理解为什么这不起作用：/每次我运行项目时，应用程序都会崩溃，给我一个 'NSInvalidArgumentException'，原因：' *** -[NSURL initFileURLWithPath:]: nil string parameter'

我遵循了一个教程（我对此很陌生），它对他有用，代码完全一样。任何人都可以解释发生了什么吗？

.h 文件

```
#import <UIKit/UIKit.h>
#import <MediaPlayer/MediaPlayer.h>
#import <QuartzCore/QuartzCore.h>

@interface FirstViewController : UIViewController {   
    MPMoviePlayerViewController *playerController;
}
-(IBAction)playVideo;
@end 
```

.m 文件

```
#import "FirstViewController.h"

@interface FirstViewController ()

@end

@implementation FirstViewController

{
    MPMoviePlayerController *mpc;

}

- (IBAction)playButton:(id)sender {

    NSString *stringPath = [[NSBundle mainBundle]pathForResource:@"intro" ofType:@"MP4"];
    NSURL *url = [NSURL fileURLWithPath:stringPath];

    if(url != nil){

    mpc = [[MPMoviePlayerController alloc]initWithContentURL:url];

    [mpc setMovieSourceType:MPMovieSourceTypeFile];

    [[self view]addSubview:mpc.view];

    [mpc setFullscreen:YES];

    [mpc play];

    }
    else{
        NSLog(@"URL not found");

    }
}
@end 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-06T04:08:40.943

所有这一切中唯一重要的部分是：

```
NSString *stringPath = [[NSBundle mainBundle] pathForResource:@"intro" ofType:@"MP4"];
NSURL *url = [NSURL fileURLWithPath:stringPath]; 
```

我假设异常是在第二行内引发的。这意味着它`stringPath`为零，如果文件`intro.MP4`实际上不在您的应用程序包中，就会发生这种情况。

检查：

*   该文件存在于您的源代码副本中

*   您的 Xcode 项目有对该文件的引用（如果它是红色的，则表示该文件实际上并不存在）

*   在 Xcode 的目标中，查看“Build Phases”并显示“Copy Bundle Resources”构建阶段。该文件应该存在。如果不是，请按 + 按钮并选择它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-08T04:35:08.650

库尔特的回答特别适合我

“在 Xcode 的目标中，查看“构建阶段”并显示“复制捆绑资源”构建阶段。该文件应该存在。如果不存在，请按 + 按钮并选择它。

我的电影文件丢失了。它以前一定在那里，因为它正在工作，然后它就停止了。

我本来会对库尔特的帖子发表评论，但不知道怎么做。我做了“赞成票”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-07T17:06:22.640

确保在 Copy Bundle Resources 中添加您尝试播放的音频文件。

1.  单击 Xcode 项目图标（左侧项目导航器中的第一个）
2.  点击目标
3.  点击构建阶段
4.  转到**复制捆绑资源**
5.  检查您的音频文件是否在列表中可用。
6.  如果未添加，请通过点击**+**图标添加它们
7.  构建并运行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-20T04:33:19.313

你的视频太长了。使用此代码，限制为 30 秒。您最好的选择是从 url 流式传输它。尝试播放短于 30 秒的视频，它会正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-20T00:49:22.293

除了这个答案[https://stackoverflow.com/a/14179186/3213411](https://stackoverflow.com/a/14179186/3213411)中提到的内容之外，您还需要确保您引用的文件在构建目标中具有成员资格。您可以在文件检查器中指定它。这个答案解释了如何[https://stackoverflow.com/a/5300901/3213411](https://stackoverflow.com/a/5300901/3213411)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-13T00:00:00.390

iOS 9.2、Xcode 7.2、ARC 已启用

我最近自己遇到了这个问题。绝对按照原始贡献者的建议去做。对我来说，问题在于文件的实际名称，见下文......

```
NSString *pathForPuzzlePieceHitSound = [[NSBundle mainBundle] pathForResource:@"puzzle_piece_hit" ofType:@"m4a"];
NSURL *urlForPuzzlePieceHitSound = [NSURL fileURLWithPath:pathForPuzzlePieceHitSound];

AudioServicesCreateSystemSoundID((__bridge CFURLRef)urlForPuzzlePieceHitSound, &idForPuzzlePieceHitSound); 
```

文件名：

```
@"puzzle_piece_hit" 
```

其中包含使用此特定方法命名文件时非法的字符。我想你可以处理它并解决这个问题，但重命名文件更容易。

在我重命名为：

```
@"puzzlePieceHit" 
```

一切正常。

希望这对某人有所帮助！干杯。

# jquery - Fancybox 2 作为链接只触发一次

> ID：14178669
> 
> 赞同：0
> 
> 时间：2013-01-06T02:28:42.313
> 
> 标签：jquery, fancybox-2

我有以下代码：

Javascript：

```
<script>
    $(document).ready(function () {
        $("a.attachbox").fancybox({
            fitToView: false,
            autoSize: true,
            closeClick: false,
            openEffect: 'none',
            closeEffect: 'none',
            minWidth: 750,
            helpers: {
                overlay: {
                    css: {
                        'background': 'rgba(153, 204, 255, .5)'
                    }
                }
            }
        });
    });
</script> 
```

HTML：

```
<h3>My Products</h3>
<a style="display: none;" class="attachbox fancybox.ajax" href="../site_vendor/add_products.php?page=addproducts"></a>
<div style="text-align:right; padding-top:5px; padding-right:5px;">
    <input class="button"  value="Add a Product" onclick='$("a.attachbox").trigger("click");' />
</div> 
```

我已经尝试了几个小时，但无法弄清楚为什么上面的链接只触发一次。花式框打开，一旦我关闭它，我就无法获得再次打开花式框的链接。一切都默默地失败，页面上没有任何反应，萤火虫也没有任何反应。我不确定它是fancybox 2 相关的还是jquery 相关的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T08:53:54.910

您的代码有效：

```
<input class="button"  value="Add a Product" onclick='$("a.attachbox").trigger("click");' />

$(document).ready(function () {
  $("a.attachbox").fancybox({
    fitToView: false,
    autoSize: true,
    closeClick: false,
    openEffect: 'none',
    closeEffect: 'none',
    minWidth: 750,
    helpers: {
      overlay: {
        css: {
          'background': 'rgba(153, 204, 255, .5)'
        }
      }
    }
  });
}); 
```

...见**[jsfiddle](http://jsfiddle.net/ESxCN/)**所以我不认为这是一个花式框或 jQuery 相关的问题。

我敢打赌，在您打开 ajax 页面后，不知何故会生成一个 js 错误（如果您使用 Firefox 中的 Web 开发人员工具栏，很容易发现），并且该错误会阻止 fancybox 再次工作。但这只是猜测，如果没有指向实际页面的链接，很难说。

# jquery - 如果类等于某物，则将属性添加到另一个 div

> ID：14178674
> 
> 赞同：0
> 
> 时间：2013-01-06T02:29:20.853
> 
> 标签：jquery, class, attributes, equals

我正在尝试编写一个函数来查找类名“blocknew”，然后添加到 imgframe div 的样式属性中。这甚至可能吗？

从这里开始：

```
<div class="block"><div class="imgframe" style="background:url(images/blah.jpg);"></div></div> 
```

对此：

```
<div class="blocknew"><div class="imgframe" style="background:url(images/new.jpg), url(images/blah.jpg);"></div></div> 
```

到目前为止我的功能：

```
$(function () { $('.blocknew').children('.imgframe').attr("style", "background:url(images/new.png),"); }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T02:44:38.987

经过多次讨论，这可能是OP的意思

```
$('.block .imgframe').each(function(){
    $(this).css('background', 'url(images/new.jpg),' + $(this).css('background'));
}); 
```

# php - 正则表达式与 2 个不同的字符串不匹配

> ID：14178677
> 
> 赞同：0
> 
> 时间：2013-01-06T02:30:00.943
> 
> 标签：php, regex

好的，这个正则表达式似乎与我正在测试它的 URL中的**action=admin不匹配。**但我也需要排除**action=dream**。如何将其添加到以下正则表达式...

```
'~\b((?!\?action=admin)[-a-zA-Z0-9+&@#/%?=\~_|!:,.;\[\]]*[-a-zA-Z0-9+&@#/%=\~_|\[\]]?)([^-a-zA-Z0-9+&@#/%=\~_|])~' 
```

试过以下...

```
'~\b((?!\?action=(admin|dream))[-a-zA-Z0-9+&@#/%?=\~_|!:,.;\[\]]*[-a-zA-Z0-9+&@#/%=\~_|\[\]]?)([^-a-zA-Z0-9+&@#/%=\~_|])~' 
```

但这会带来不好的结果......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T02:54:27.027

您的问题是您希望在`admin|dream`没有实际捕获价值的情况下拥有（这是您的第二个示例所做的）。为此，您要使用`(?: )`，如下所示：

```
(?!\?action=(?:admin|dream)) 
```

# java - 设置类实例时，我的 android 应用程序崩溃

> ID：14178679
> 
> 赞同：0
> 
> 时间：2013-01-06T02:30:31.120
> 
> 标签：java, android

我是android编程的新手。我正在开发一个可以很好地打开并且几乎可以按照我想要的方式工作的应用程序。但我有一个问题，我不知道如何解决它。这就是问题所在：我正在用一个值填充 EditText，并且在我的 java 代码中，这个值将初始化我创建的一个对象。但这永远不会发生，因为任何初始化对象的尝试都会使我的应用程序崩溃。我在其中输入值以初始化对象的 editText 是名为 spotText 的那个。有人可以帮忙吗？这是 XML 代码：

```
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#000000"
    android:orientation="vertical"
    tools:context=".MainActivity" >

<ScrollView    
android:id="@+id/scroll"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:scrollbars="none">

<HorizontalScrollView 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">

<TableLayout
    android:id="@+id/TheTable"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:stretchColumns="0,1,2,3,4,5,6,7,8,9,10,11,12" >        

 <TableRow
     android:id="@+id/tbRow1"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content" >

  <TextView
    android:id="@+id/spot"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingRight="10dp"
    android:text="@string/spot"
    android:textSize="10sp"
    android:gravity="center"
    android:textColor="@color/white" />

  <TextView
        android:id="@+id/div"               
        android:text="@string/div"
        android:gravity="center"
        android:textColor="@color/white"
        android:textSize="10sp" />      

    <TextView
        android:id="@+id/rate"
        android:text="@string/Rate"
        android:gravity="center"
        android:textColor="@color/white"
        android:textSize="10sp" />

    <CheckBox 
        android:id="@+id/smile"
        android:text="@string/UseSmile"             
        android:textColor="@color/white"
        android:textSize="10sp"/>

    <TextView
        android:id="@+id/ATM"
        android:text="@string/ATM"
        android:gravity="center"
        android:textColor="@color/white"
        android:textSize="10sp" />
</TableRow>

<TableRow
    android:id="@+id/tbRow2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <EditText
        android:id="@+id/spotText"
        android:hint="@string/Spot"
        android:gravity="center"      
        android:inputType="numberSigned"
        android:textColor="@color/white"
        android:textSize="10sp" />

    <EditText
        android:id="@+id/divRate"
        android:hint="@string/divRate"
        android:gravity="center"    
        android:inputType="numberDecimal"
        android:textColor="@color/white"
        android:textSize="10sp" />

    <EditText
        android:id="@+id/IR"
        android:hint="@string/IRate"
        android:gravity="center"    
        android:inputType="numberDecimal"
        android:textColor="@color/white"
        android:textSize="10sp" />
    <EditText
        android:id="@+id/ATMVOL"
        android:hint="@string/ATM"
        android:layout_column="4"
        android:gravity="center"    
        android:inputType="numberDecimal"
        android:textColor="@color/white"
        android:textSize="10sp" />

</TableRow>        

            <TableRow
                android:id="@+id/tbRow3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <TextView
                    android:id="@+id/product"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:paddingRight="10dp"
                    android:text="@string/product"
                    android:gravity="center"
                    android:textSize="10sp"
                    android:textColor="@color/white" />

                <TextView
                    android:id="@+id/strike"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:paddingRight="10dp"
                    android:text="@string/strike"
                    android:textSize="10sp"
                    android:gravity="center"
                    android:textColor="@color/white" />

                <TextView
                    android:id="@+id/maturity"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:paddingRight="10dp"
                    android:text="@string/maturity"
                    android:textSize="10sp"
                    android:gravity="center"
                    android:textColor="@color/white" />

                <TextView
                    android:id="@+id/vol"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:paddingRight="10dp"
                    android:textSize="10sp"
                    android:gravity="center"
                    android:text="@string/volatility"
                    android:textColor="@color/white" />

                <TextView
                    android:id="@+id/Qty"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:paddingRight="10dp"
                    android:textSize="10sp"
                    android:gravity="center"
                    android:text="@string/Quantity"
                    android:textColor="@color/white" />

                <TextView
                    android:id="@+id/price"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:paddingRight="15dp"
                    android:textSize="10sp"
                    android:gravity="center"
                    android:text="@string/price"
                    android:textColor="@color/white" />

                <TextView
                    android:id="@+id/delta"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:paddingRight="10dp"
                    android:text="@string/delta"
                    android:textSize="10sp"
                    android:gravity="center"
                    android:textColor="@color/white" />

                <TextView
                    android:id="@+id/gamma"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:paddingRight="10dp"
                    android:text="@string/gamma"
                    android:textSize="10sp"
                    android:gravity="center"
                    android:textColor="@color/white" />

                <TextView
                    android:id="@+id/theta"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:paddingRight="10dp"
                    android:text="@string/theta"
                    android:textSize="10sp"
                    android:gravity="center"
                    android:textColor="@color/white" />

                <TextView
                    android:id="@+id/vega"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:paddingRight="10dp"
                    android:text="@string/vega"
                    android:textSize="10sp"
                    android:gravity="center"
                    android:textColor="@color/white" />

                <TextView
                    android:id="@+id/vanna"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:paddingRight="10dp"
                    android:text="@string/vanna"
                    android:textSize="10sp"
                    android:gravity="center"
                    android:textColor="@color/white" />

                <TextView
                    android:id="@+id/vomma"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:paddingRight="10dp"
                    android:text="@string/vomma"
                    android:textSize="10sp"
                    android:gravity="center"
                    android:textColor="@color/white" />
            </TableRow>
            <TableRow
                android:id="@+id/tbRow4" >
                <Spinner 
                    android:id="@+id/spin1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:dropDownSelector="@string/Product"
                    android:prompt="@string/Product"
                    android:entries="@array/Array"
                    android:background="@color/SpinColor"
                    android:textSize="10sp"/>
                <EditText
                    android:id="@+id/K1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:hint="K"
                    android:gravity="center"
                    android:textSize="10sp"/>
                <EditText
                    android:id="@+id/T1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:hint="T"
                    android:gravity="center"
                    android:textSize="10sp"/>
                <EditText
                    android:id="@+id/Vol1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:hint="Vol"
                    android:gravity="center"
                    android:textSize="10sp"/>
                <EditText
                    android:id="@+id/Qty1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:hint="Qty"
                    android:gravity="center"
                    android:textSize="10sp"/>
                <TextView
                    android:id="@+id/Px1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:gravity="center"
                    android:textSize="10sp"/>           
                <TextView
                    android:id="@+id/delta1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:gravity="center"
                    android:textSize="10sp"/>
                <TextView
                    android:id="@+id/gamma1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:gravity="center"
                    android:textSize="10sp"/>
                <TextView
                    android:id="@+id/theta1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:gravity="center"
                    android:textSize="10sp"/>
                <TextView
                    android:id="@+id/vega1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:gravity="center"
                    android:textSize="10sp"/>
                <TextView
                    android:id="@+id/vanna1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:gravity="center"
                    android:textSize="10sp"/>
                <TextView
                    android:id="@+id/vomma1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:gravity="center"
                    android:textSize="10sp"/>
            </TableRow>

            <TableRow
                android:id="@+id/tbRow9">                
                 <Button 
                    android:id="@+id/delBtn"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:textSize="10sp"
                    android:text="@string/delete"/>
                <Button 
                    android:id="@+id/addBtn"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:textSize="10sp"
                    android:text="@string/Add"/>

            </TableRow>
        </TableLayout>

   </HorizontalScrollView>
</ScrollView> 
```

这是 MainActivity 类代码

```
 package com.example.lilpricer;

    import android.app.Activity;
    import android.os.Bundle;
    import android.text.Editable;
    import android.text.TextWatcher;
    import android.view.Menu;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;
    import android.widget.CheckBox;
    import android.widget.CompoundButton;
    import android.widget.CompoundButton.OnCheckedChangeListener;
    import android.widget.EditText;
    import android.widget.Spinner;
    import android.widget.TableRow;
    import android.widget.TextView;

    public class MainActivity extends Activity {

int nbRow = 1;

TableRow tb1 = null; TableRow tb2 = null; TableRow tb3 = null; TableRow tb4 = null;
TableRow tb5 = null; TableRow tb6 = null; TableRow tb7 = null; TableRow tb8 = null;
TableRow tb9 = null; 
TextView tvVol = null; TextView tvSpot;
EditText etSpot = null; EditText etDiv = null; EditText etIR = null; EditText etVol = null;
EditText etK1= null; EditText etK2= null; EditText etK3 = null; EditText etK4= null;
EditText etMat1= null; EditText etMat2= null; EditText etMat3 = null; EditText etMat4= null;
EditText etVol1= null; EditText etVol2= null; EditText etVol3 = null; EditText etVol4= null;
EditText etQty1= null; EditText etQty2= null; EditText etQty3 = null; EditText etQty4= null;
Spinner spin1 = null; Spinner spin2 = null; Spinner spin3 = null; Spinner spin4 = null;
Button Del = null; Button Add = null; Button Price = null;
CheckBox cbSmile = null;
Stock S=null; 
Future Fut1 = null; Future Fut2 = null; Future Fut3 = null; Future Fut4 = null;
Option Opt1 = null; Option Opt2 = null; Option Opt3 = null; Option Opt4 = null;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    setWidgetRef();

    tb5.setVisibility(View.INVISIBLE); tb6.setVisibility(View.INVISIBLE); tb7.setVisibility(View.INVISIBLE); 
    tvVol.setVisibility(View.INVISIBLE); etVol.setVisibility(View.INVISIBLE);       

    etSpot.addTextChangedListener(new TextWatcher() {
        double TheSpot= 0;          
        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            // TODO Auto-generated method stub
            TheSpot=Double.parseDouble(etSpot.getText().toString());                
            S.SetStock(TheSpot);
        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }

        @Override
        public void afterTextChanged(Editable s) {
            // TODO Auto-generated method stub

        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

private void setWidgetRef()
    {
        tb1 = (TableRow) findViewById(R.id.tbRow1); tb2 = (TableRow) findViewById(R.id.tbRow2);
        tb3 = (TableRow) findViewById(R.id.tbRow3); tb4 = (TableRow) findViewById(R.id.tbRow4);
        tb5 = (TableRow) findViewById(R.id.tbRow5); tb6 = (TableRow) findViewById(R.id.tbRow6);
        tb7 = (TableRow) findViewById(R.id.tbRow7); tb8 = (TableRow) findViewById(R.id.tbRow8);
        tb9 = (TableRow) findViewById(R.id.tbRow9); 

        etSpot = (EditText) findViewById(R.id.spotText); etDiv=(EditText) findViewById(R.id.divRate); 
        etIR= (EditText) findViewById(R.id.IR); etVol = (EditText) findViewById(R.id.ATMVOL);
        etK1= (EditText) findViewById(R.id.K1); etK2= (EditText) findViewById(R.id.K2);
        etK3= (EditText) findViewById(R.id.K3); etK4= (EditText) findViewById(R.id.K4);
        etMat1 = (EditText) findViewById(R.id.T1);etMat2 = (EditText) findViewById(R.id.T2); 
        etMat3 = (EditText) findViewById(R.id.T3);etMat4 = (EditText) findViewById(R.id.T4);
        etVol1 =(EditText) findViewById(R.id.Vol1);etVol2 =(EditText) findViewById(R.id.Vol2);
        etVol3 =(EditText) findViewById(R.id.Vol3);etVol4 =(EditText) findViewById(R.id.Vol4);
        etQty1=(EditText)  findViewById(R.id.Qty1); etQty2=(EditText)  findViewById(R.id.Qty2); 
        etQty3=(EditText)  findViewById(R.id.Qty3); etQty4=(EditText)  findViewById(R.id.Qty4);

        tvVol = (TextView) findViewById(R.id.ATM); tvSpot = (TextView) findViewById(R.id.spot);

        Del = (Button) findViewById(R.id.delBtn); Add = (Button) findViewById(R.id.addBtn);
        Price = (Button) findViewById(R.id.priceBtn);

        cbSmile = (CheckBox) findViewById(R.id.smile);

        spin1 = (Spinner) findViewById(R.id.spin1);spin2 = (Spinner) findViewById(R.id.spin2);
        spin3 = (Spinner) findViewById(R.id.spin3);spin4 = (Spinner) findViewById(R.id.spin4);
    }
    } 
```

这是我尝试初始化实例的类

```
 package com.example.lilpricer;

public class Stock {
private double S;   

Stock(double Price){
    S=Math.abs(Price);
}

Stock(){
    this.S=0;
}
public void SetStock(double price) {
    // TODO Auto-generated method stub
    S=Math.abs(price);
}
} 
```

这是应用程序崩溃时的logcat。如您所见，它似乎是 EditText 中的 NullPointerException，我在其中输入了初始化对象 Stock 的值，但我不明白为什么会出现这样的错误，因为我在 java 中定义了一个 EditText 并将它与 EditText 链接在我的 XML 页面中，与我的对象（此处命名为 S）相同，它已被定义为全局变量，因此它存在。我显然在这里遗漏了一些东西，但我只是看不到它是什么。非常感谢您的帮助。

```
01-06 02:06:24.770: E/AndroidRuntime(5721): FATAL EXCEPTION: main
01-06 02:06:24.770: E/AndroidRuntime(5721): java.lang.NullPointerException
01-06 02:06:24.770: E/AndroidRuntime(5721):     at com.example.lilpricer.MainActivity$1.onTextChanged(MainActivity.java:144)
01-06 02:06:24.770: E/AndroidRuntime(5721):     at android.widget.TextView.sendOnTextChanged(TextView.java:7092)
01-06 02:06:24.770: E/AndroidRuntime(5721):     at android.widget.TextView.handleTextChanged(TextView.java:7151)
01-06 02:06:24.770: E/AndroidRuntime(5721):     at android.widget.TextView$ChangeWatcher.onTextChanged(TextView.java:8794)
01-06 02:06:24.770: E/AndroidRuntime(5721):     at android.text.SpannableStringBuilder.sendTextChanged(SpannableStringBuilder.java:962)
01-06 02:06:24.770: E/AndroidRuntime(5721):     at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:496)
01-06 02:06:24.770: E/AndroidRuntime(5721):     at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:435)
01-06 02:06:24.770: E/AndroidRuntime(5721):     at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:30)
01-06 02:06:24.770: E/AndroidRuntime(5721):     at android.text.method.NumberKeyListener.onKeyDown(NumberKeyListener.java:121)
01-06 02:06:24.770: E/AndroidRuntime(5721):     at android.widget.TextView.doKeyDown(TextView.java:5246)
01-06 02:06:24.770: E/AndroidRuntime(5721):     at android.widget.TextView.onKeyDown(TextView.java:5065)
01-06 02:06:24.770: E/AndroidRuntime(5721):     at android.view.KeyEvent.dispatch(KeyEvent.java:2609)
01-06 02:06:24.770: E/AndroidRuntime(5721):     at android.view.View.dispatchKeyEvent(View.java:7198)
01-06 02:06:24.770: E/AndroidRuntime(5721):     at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1359)
01-06 02:06:24.770: E/AndroidRuntime(5721):     at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1359)
01-06 02:06:24.770: E/AndroidRuntime(5721):     at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1359)
01-06 02:06:24.770: E/AndroidRuntime(5721):     at android.widget.HorizontalScrollView.dispatchKeyEvent(HorizontalScrollView.java:332)
01-06 02:06:24.770: E/AndroidRuntime(5721):     at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1359)
01-06 02:06:24.770: E/AndroidRuntime(5721):     at android.widget.ScrollView.dispatchKeyEvent(ScrollView.java:353)
01-06 02:06:24.770: E/AndroidRuntime(5721):     at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1359)
01-06 02:06:24.770: E/AndroidRuntime(5721):     at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1359)
01-06 02:06:24.770: E/AndroidRuntime(5721):     at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1359)
01-06 02:06:24.770: E/AndroidRuntime(5721):     at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1359)
01-06 02:06:24.770: E/AndroidRuntime(5721):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchKeyEvent(PhoneWindow.java:1920)
01-06 02:06:24.770: E/AndroidRuntime(5721):     at com.android.internal.policy.impl.PhoneWindow.superDispatchKeyEvent(PhoneWindow.java:1395)
01-06 02:06:24.770: E/AndroidRuntime(5721):     at android.app.Activity.dispatchKeyEvent(Activity.java:2370)
01-06 02:06:24.770: E/AndroidRuntime(5721):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1847)
01-06 02:06:24.770: E/AndroidRuntime(5721):     at android.view.ViewRootImpl.deliverKeyEventPostIme(ViewRootImpl.java:3701)
01-06 02:06:24.770: E/AndroidRuntime(5721):     at android.view.ViewRootImpl.handleImeFinishedEvent(ViewRootImpl.java:3651)
01-06 02:06:24.770: E/AndroidRuntime(5721):     at android.view.ViewRootImpl$ViewRootHandler.handleMessage(ViewRootImpl.java:2818)
01-06 02:06:24.770: E/AndroidRuntime(5721):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-06 02:06:24.770: E/AndroidRuntime(5721):     at android.os.Looper.loop(Looper.java:137)
01-06 02:06:24.770: E/AndroidRuntime(5721):     at android.app.ActivityThread.main(ActivityThread.java:5039)
01-06 02:06:24.770: E/AndroidRuntime(5721):     at java.lang.reflect.Method.invokeNative(Native Method)
01-06 02:06:24.770: E/AndroidRuntime(5721):     at java.lang.reflect.Method.invoke(Method.java:511)
01-06 02:06:24.770: E/AndroidRuntime(5721):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-06 02:06:24.770: E/AndroidRuntime(5721):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-06 02:06:24.770: E/AndroidRuntime(5721):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T02:46:02.780

你从来没有实例化过这个类。在使用之前添加`S=new Stock()`或；`S=new Stock(price)``S`

# java - NullPointerException 与 BufferedImage 数组

> ID：14178680
> 
> 赞同：1
> 
> 时间：2013-01-06T02:30:43.223
> 
> 标签：java, arrays, nullpointerexception, bufferedimage, awt-eventqueue

我正在尝试拍摄图像并将其转换为在 GridLayout 中布置的图块，但收到运行时错误。

这是代码：

```
public class TileList extends JPanel {

private static final int width = 16;            //width of a tile
private static final int height = width;
private int col = 1;
private int row = 1;

private BufferedImage image;
File tilesetImage = new File("image.png");
BufferedImage tileset[];

public void loadAndSplitImage (File loadImage) {
    try{
        image = ImageIO.read(loadImage);
    }catch(Exception error) {
        System.out.println("Error: cannot read tileset image.");
    }// end try/catch
    col = image.getWidth()/width;
    row = image.getHeight()/height;
    BufferedImage tileset[] = new BufferedImage[col*row];
}// end loadAndSplitImage

public TileList() {
    loadAndSplitImage(tilesetImage);
    setLayout(new GridLayout(row,col,1,1));
    setBackground(Color.black);

    int x=0;
    int y=0;
    for (int i = 0; i < (col*row); i++) {
        JPanel panel = new JPanel();
        tileset[i] = new BufferedImage(width, height, image.getType());  //first error
        tileset[i] = image.getSubimage(x,y,x+width,y+height);
        panel.add(new JLabel(new ImageIcon(tileset[i])));
        add(panel);
        x+=width;
        y+=height;
    }// end for loop
}// end constructor

public static void createAndShowGui() {
    JFrame frame = new JFrame("TileList");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.getContentPane().add(new TileList());      //second error
    frame.pack();
    frame.setLocationRelativeTo(null);
    frame.setVisible(true);
}//end createAndShowGui

public static void main (String [] args) {
    SwingUtilities.invokeLater(new Runnable() {
        public void run () {
            createAndShowGui();           //third error
        }// end run
    });// end invokeLater
  }// end main
}// end class 
```

这是我收到的错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at TileList.<init>(TileList.java:55)
    at TileList.createAndShowGui(TileList.java:73)
    at TileList$1.run(TileList.java:82)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:721)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:682)
    at java.awt.EventQueue$3.run(EventQueue.java:680)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDo
main.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:691)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThre
ad.java:244)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.
java:163)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThre
ad.java:151)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)

    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)

    at java.awt.EventDispatchThread.run(EventDispatchThread.java:97) 
```

这个错误是什么意思，我是怎么写错代码的？

编辑：我按照 Hovercraft 的建议更改了我的代码，但是现在我有新的错误：

```
tileset[] = new BufferedImage[col*row];
       ^                           error: not a statement

tileset[] = new BufferedImage[col*row];
         ^                         error: ';' expected

tileset[] = new BufferedImage[col*row];
                             ^     error: not a statement 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T02:34:29.927

你的错误是你正在隐藏一个变量——当它已经在类中声明时，你在构造函数中重新声明了变量 tileSet。因此，类中声明的 tileSet 变量永远不会被初始化，因为只有局部变量，即在构造函数中声明的变量被初始化。

解决方案：只在类中声明一次tileSet。

因此，不要这样做：

```
public class TileList extends JPanel {

  //.... deleted for brevity

  BufferedImage tileset[];

  public void loadAndSplitImage (File loadImage) {
    try{
        image = ImageIO.read(loadImage);
    }catch(Exception error) {
        System.out.println("Error: cannot read tileset image.");
    }// end try/catch
    col = image.getWidth()/width;
    row = image.getHeight()/height;
    BufferedImage tileset[] = new BufferedImage[col*row]; // *** re-declaring variable!
  } 
```

而是这样做：

```
public class TileList extends JPanel {

  //.... deleted for brevity

  BufferedImage tileset[];

  public void loadAndSplitImage (File loadImage) {
    try{
        image = ImageIO.read(loadImage);
    }catch(Exception error) {
        System.out.println("Error: cannot read tileset image.");
    }// end try/catch
    col = image.getWidth()/width;
    row = image.getHeight()/height;

    // ************
    // BufferedImage tileset[] = new BufferedImage[col*row]; // *****
    tileset[] = new BufferedImage[col*row]; // **** note the difference? ****
  } 
```

请注意，比解决这个孤立问题更重要的是了解如何解决 NPE（NullPointerExceptions）。关键是检查抛出异常的行上的所有变量，检查哪些是空的，然后在尝试使用之前回头看看其中一个没有正确初始化。

# javascript - 带有关联的 Ember.js 数据

> ID：14178683
> 
> 赞同：0
> 
> 时间：2013-01-06T02:31:14.830
> 
> 标签：javascript, ember.js, ember-data

我正在尝试使用 ember.js 和 ember-data 的最新主分支。

这里有一些细节：

```
window.Links = Ember.Application.create();

Links.Store = DS.Store.extend({
  revision: 11,
  adapter: 'DS.RESTAdapter'
});

Links.List = DS.Model.extend({
  urls: DS.hasMany('Links.Url', { embedded: true })
});

Links.Url = DS.Model.extend({
  url: DS.attr('string'),
  list: DS.belongsTo('Links.List')
}); 
```

当我在控制台中执行以下操作时：

```
var list = Links.List.find("test"); 
```

API 返回以下内容：

```
{"list":{"id":"test","urls":[{"id":"44e5aa","url":"http://google.com"}]}} 
```

我可以：

```
list.get("id") // => "test"
list.urls // => undefined 
```

我似乎无法让这些协会发挥作用。难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T04:30:08.180

[我想我们很多人都在同一条船上 - 这与我今天早些时候发布的问题](https://stackoverflow.com/questions/14174921/embedded-hasmany-attribute-access-gives-typeerror-cannot-call-method-hasownpr)和[我引用](https://stackoverflow.com/questions/14170370/unable-to-get-hasmany-association)的问题非常相似。希望这意味着我们很快就会有一个修复或明确的答案！

按照 brg 的建议，您可能想尝试以下方法：

```
Links.Store.adapter.serializer.map('Links.List', {
   urls: {embedded: 'load'}
}); 
```

然后，您当然会删除您的内联嵌入式语句。它没有解决我的问题，但它可能在你的情况下。

[请注意，这里](https://github.com/emberjs/data/issues/504)记录的嵌入式 belongsTo 关联也存在问题。

# ruby-on-rails - 模型中可用的 Rails 会话令牌

> ID：14178684
> 
> 赞同：1
> 
> 时间：2013-01-06T02:31:31.803
> 
> 标签：ruby-on-rails, session, global-variables, session-variables, faraday

我有一个与 API 通信的无数据库 Rails 应用程序。

对于身份验证，我将用户凭据发送到 api 并在成功时接收会话令牌。随后，我发出的每个 api 请求都应包含该令牌。

api_request.rb：

```
class ApiRequest

  def initialize(relative_path,params={})
    params = _add_base_data params
    send_request relative_path, params
  end

  private
  def send_request(relative_path,params)
    conn = Faraday.new(:url => MyApp::Application.config.server) do |faraday|
      faraday.request  :url_encoded
      faraday.response :logger
      faraday.adapter  Faraday.default_adapter
    end

    encoded = conn.post relative_path,params
    @data = JSON.parse encoded.body
    @data
  end

  def _add_base_data params
    params[:session_token] = ?
    params
  end
end 
```

my_session.rb：

```
class MySession
   def login? email,pass
      params = { :email => email, :password => pass }
      resp = ApiRequest.new '/user/login', params 
      if resp.failed?
        false
      else
        @session[:token] = resp.data['session_token']
        true
      end
    end
end 
```

如何使会话令牌可用于每次调用的 ApiRequest 模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T02:40:31.260

将会话令牌作为参数传递给 the`ApiRequest`怎么样？然后，您可以将调用包装在一个简单的方法中，以便在您的控制器中使用：

```
# in base controller class
def api(resource, params)
  ApiRequest.new @session[:token], '/user/login', params 
end 
```

这样做的好处是会话参数保持在控制器级别，从而消除了在模型中保留状态信息的需要（可能不应该存在的地方）。

# java - Android aapt 工具无法正确生成 R.Java

> ID：14178694
> 
> 赞同：0
> 
> 时间：2013-01-06T02:33:06.843
> 
> 标签：java, android, eclipse, aapt

我是 Android 开发新手，我正在尝试使用 Eclipse/DDMS 和 . 问题是，aapt 工具似乎没有正确生成 R.java。R.java 的 ID 类中没有 myListView 和 myEditText。

主要.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="match_parent"
  android:layout_height="match_parent">
  <EditText
    android:id="@+id/myEditText"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:hint="@string/addItemHint"
    android:contentDescription="@string/addItemContentDescription"
  />
  <ListView
    android:id="@+id/myListView"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
  />
</LinearLayout> 
```

字符串.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
  <string name="app_name">ToDoList</string>
  <string name="addItemHint">New To Do Item</string>
  <string name="addItemContentDescription">New To Do z</string>
</resources> 
```

R.java：

```
/* AUTO-GENERATED FILE.  DO NOT MODIFY.
 *
 * This class was automatically generated by the
 * aapt tool from the resource data it found.  It
 * should not be modified by hand.
 */

package com.example.todolist;

    public final class R {
        public static final class attr {
        }
        public static final class drawable {
            public static final int ic_launcher=0x7f020000;
        }
        public static final class id {
            public static final int menu_settings=0x7f070000;

        }
        public static final class layout {
            public static final int main=0x7f030000;
        }
        public static final class menu {
            public static final int main=0x7f060000;
        }
        public static final class string {
            public static final int app_name=0x7f040000;
            public static final int hello_world=0x7f040001;
            public static final int menu_settings=0x7f040002;
        }
        public static final class style {
            /** 
            Base application theme, dependent on API level. This theme is replaced
            by AppBaseTheme from res/values-vXX/styles.xml on newer devices.

                Theme customizations available in newer API levels can go in
                res/values-vXX/styles.xml, while customizations related to
                backward-compatibility can go here.

            Base application theme for API 11+. This theme completely replaces
            AppBaseTheme from res/values/styles.xml on API 11+ devices.

     API 11 theme customizations can go here. 

            Base application theme for API 14+. This theme completely replaces
            AppBaseTheme from BOTH res/values/styles.xml and
            res/values-v11/styles.xml on API 14+ devices.

     API 14 theme customizations can go here. 
             */
            public static final int AppBaseTheme=0x7f050000;
            /**  Application theme. 
     All customizations that are NOT specific to a particular API-level can go here. 
             */
            public static final int AppTheme=0x7f050001;
        }
    } 
```

主.java：

```
package com.example.todolist;

import java.util.ArrayList;

import android.app.Activity;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.EditText;
import android.widget.ListView;

public class Main extends Activity {

  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Inflate your View
    setContentView(R.layout.main);

    // Get references to UI widgets
    ListView myListView = (ListView)findViewById(R.id.myListView);
    final EditText myEditText = (EditText)findViewById(R.id.myEditText);

    // Create the Array List of to do items
    final ArrayList<String> todoItems = new ArrayList<String>();

    // Create the Array Adapter to bind the array to the List View
    final ArrayAdapter<String> aa;

    aa = new ArrayAdapter<String>(this,
                                  android.R.layout.simple_list_item_1,
                                  todoItems);

    // Bind the Array Adapter to the List View
    myListView.setAdapter(aa);

    myEditText.setOnKeyListener(new View.OnKeyListener() {
      public boolean onKey(View v, int keyCode, KeyEvent event) { 
        if (event.getAction() == KeyEvent.ACTION_DOWN)
          if ((keyCode == KeyEvent.KEYCODE_DPAD_CENTER) ||
              (keyCode == KeyEvent.KEYCODE_ENTER)) {
            todoItems.add(0, myEditText.getText().toString());
            aa.notifyDataSetChanged();
            myEditText.setText("");
            return true;
          }
        return false;
      }
    });

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-30T16:02:09.010

@dman ...使用我下面的代码和文件运行得很好。添加了下图以显示成功执行:) ![在此处输入图像描述](../Images/98892e379603a400fd6795f59d33d600.png)

1.  strings.xml 您的文件似乎非常好。那里没有问题
2.  MainActivity.java 文件

    包 com.example.test1;

    导入 java.util.ArrayList；导入android.os.Bundle；导入android.app.Activity；导入android.view.KeyEvent；导入android.view.View；导入 android.widget.ArrayAdapter；导入 android.widget.EditText；导入 android.widget.ListView；

    公共类 MainActivity 扩展 Activity {

    ```
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Get references to UI widgets
        ListView myListView = (ListView)findViewById(R.id.myListView);
        final EditText myEditText = (EditText)findViewById(R.id.myEditText);

        // Create the Array List of to do items
        final ArrayList<String> todoItems = new ArrayList<String>();

        // Create the Array Adapter to bind the array to the List View
        final ArrayAdapter<String> aa;

        aa = new ArrayAdapter<String>(this,
                                      android.R.layout.simple_list_item_1,
                                      todoItems);

        // Bind the Array Adapter to the List View
        myListView.setAdapter(aa);

        myEditText.setOnKeyListener(new View.OnKeyListener() {
          public boolean onKey(View v, int keyCode, KeyEvent event) { 
            if (event.getAction() == KeyEvent.ACTION_DOWN)
              if ((keyCode == KeyEvent.KEYCODE_DPAD_CENTER) ||
                  (keyCode == KeyEvent.KEYCODE_ENTER)) {
                todoItems.add(0, myEditText.getText().toString());
                aa.notifyDataSetChanged();
                myEditText.setText("");
                return true;
              }
            return false;
          }

        });

      } 
    ```

    }

3.  资源/布局/activity_main.xml

4.  确保路径下没有任何文件：res/menu/...xml。默认情况下，系统在此文件夹中包含“main.xml”文件。如果存在，请删除那些我们不需要的东西。

# android - java.net.UnknownHostException：无法解析主机“google.com”

> ID：14178700
> 
> 赞同：2
> 
> 时间：2013-01-06T02:33:45.217
> 
> 标签：android, unknown-host

我在 Galaxy Tab (v1) 上运行我的应用程序。
我添加了

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

允许。

我正在使用以下代码检查网站是否在线：

```
public boolean checkIfSite(final String url) {
    Data.isUp = false;

    new Thread(new Runnable() {
        public void run() {
            try {
                Data.isUp = InetAddress.getByName("google.com").isReachable(25000);
            } catch (UnknownHostException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }).start();
    return Data.isUp;
} 
```

我运行它并抛出异常：

```
01-05 19:15:04.007: W/System.err(3303): java.net.UnknownHostException: Unable to resolve host "google.com": No address associated with hostname
01-05 19:15:04.007: W/System.err(3303):     at java.net.InetAddress.lookupHostByName(InetAddress.java:426)
01-05 19:15:04.007: W/System.err(3303):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
01-05 19:15:04.007: W/System.err(3303):     at java.net.InetAddress.getByName(InetAddress.java:295)
01-05 19:15:04.007: W/System.err(3303):     at com.sonyericsson.extras.liveview.plugins.sandbox.SandboxPluginService$2.run(SandboxPluginService.java:184)
01-05 19:15:04.007: W/System.err(3303):     at java.lang.Thread.run(Thread.java:856)
01-05 19:15:04.007: W/System.err(3303): Caused by: libcore.io.GaiException: getaddrinfo failed: EAI_NODATA (No address associated with hostname)
01-05 19:15:04.011: W/System.err(3303):     at libcore.io.Posix.getaddrinfo(Native Method)
01-05 19:15:04.011: W/System.err(3303):     at libcore.io.ForwardingOs.getaddrinfo(ForwardingOs.java:55)
01-05 19:15:04.011: W/System.err(3303):     at java.net.InetAddress.lookupHostByName(InetAddress.java:411)
01-05 19:15:04.011: W/System.err(3303):     ... 4 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-09T09:14:09.357

您是否尝试过使用[http://google.com](http://google.com)而不仅仅是 google.com？

正如@SLaks 所说，您的方法是错误的，因为您在启动线程后返回，需要使用回调（类似于您在 iOS 中对委托所做的操作）。

# ruby-on-rails-3 - 如何仅在生产中使用 Fog 和 CarrierWave

> ID：14178701
> 
> 赞同：14
> 
> 时间：2013-01-06T02:33:44.503
> 
> 标签：ruby-on-rails-3, heroku, amazon-s3, carrierwave, fog

我在 Rails 应用程序中使用 Heroku 和 S3。我只在生产模式下安装了雾 gem，因为我的本地计算机是一块垃圾。无论如何，这种方式工作得很好，并且已被证明是比拔头发在本地安装雾更好的解决方案，但现在我必须将 Uploader 文件切换为使用 localhost，然后将其切换回做出承诺。

能够在本地使用文件然后在生产模式下雾化而不需要手动来回切换会很好。有人对如何做到这一点有任何建议吗？

提前非常感谢。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-01-06T19:14:19.043

这很容易。您必须在配置文件中定义它。但不要在模型中定义存储，因为这会覆盖配置文件中的设置。

```
# sample config/initializers/carrierwave.rb
CarrierWave.configure do |config|

  if Rails.env.development? || Rails.env.test?
    config.storage = :file
  else
    config.fog_credentials = {
      :provider               => 'AWS',
      :aws_access_key_id      =>  'some_access_key_id',
      :aws_secret_access_key  => 'some_secret_key',
      :region                 => 'eu-west-1'
    }
    config.storage = :fog
    config.fog_directory = 'bucket_name'
  end
end 
```

# php - SSE（事件源）flush() PHP

> ID：14178703
> 
> 赞同：1
> 
> 时间：2013-01-06T02:33:57.640
> 
> 标签：php, output-buffering, server-sent-events

在家里，我正在尝试创建一个 SSE 端点以在网站上使用，真的。然后，我有保持请求打开的代码片段，显然是（`while( true )`）......然后，我回显了一些东西，然后在里面使用`ob_flush()`和`flush()`。

但是，在家里它可以正常工作，在远程主机上，没有。

本地主机定义。 `System: Linux localhost 3.6.10-2.fc17.x86_64 #1 SMP Tue Dec 11 18:07:34 UTC 2012 x86_64`

`Server API: Apache 2.0 Handler`

```
setting           local value        master value
output_buffering       0                 0
output_handler     no value           no value 
```

在服务器中......（远程） `Linux web521.xxx.net 3.2.2 #1 SMP Wed Feb 1 09:54:51 BRST 2012 x86_64`

`Server API FPM/FastCGI`

```
setting           local value        master value
output_buffering    no value    no value
output_handler  no value no value 
```

代码片段：

```
<?php

    while( true ) {
        // ...

        echo '...';
        ob_flush();
        flush();

        usleep( 50000 );

        // ...
    }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T00:12:34.403

我遇到了同样的问题，在这里找到了答案：[https ://stackoverflow.com/a/12301929/1314762](https://stackoverflow.com/a/12301929/1314762)

尝试使用`ob_end_flush()`除了`flush()`. 我对为什么没有很好的答案，但是当 ob_flush() 没有时，这对我有用。

举个例子（我借用了porneL关于使用connection_aborted()代替的很好的评论`while(true)`）：

```
while( !connection_aborted() ) {
    // ...

    echo '...';
    ob_end_flush();
    flush();

    usleep( 50000 );

    // ...
} 
```

# c# - 异步控制器给我带来了什么好处？

> ID：14178704
> 
> 赞同：3
> 
> 时间：2013-01-06T02:34:06.120
> 
> 标签：c#, asp.net-mvc, asynchronous

这两种动作方法有什么区别？

```
public ActionResult Index()
{
    var task = new ServiceClient().GetProductsAsync();

    return View(task.Result);
}

public async Task<ActionResult> Index()
{
    var task = new ServiceClient().GetProductsAsync();

    return View(await task);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T02:36:37.010

第一个将阻塞 ASP.Net 请求线程，直到您从数据库中获得结果。

第二个将立即释放 ASP.Net 线程，然后在结果进来时再抓取另一个。

因此，第二个更具可扩展性。

*请注意，此答案假定您正在调用的异步链已正确编写并以实际的异步套接字操作结束。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T02:54:42.150

> 第一个将阻塞 ASP.NET 请求线程，直到任务完成。
> 第二个会立即释放线程，等任务完成后再去抓另一个。

有什么好处？

线程实际上是一种非常昂贵的资源。它消耗操作系统资源，并且线程有一个堆栈，其中包含在到达您的方法之前调用的所有方法的所有变量。假设您的服务器足够强大，可以处理 100 个线程。您可以处理 100 个请求。假设处理每个请求需要 100 毫秒。这给你每秒 1000 个请求。

假设您的 GetProductAsync() 调用需要 100 毫秒中的 90 毫秒。数据库或服务占用大部分时间并不少见。使这些调用异步意味着您现在只需要每个线程 10 毫秒。突然之间，您可以在同一台服务器上支持每秒 10000 个请求。

因此，“异步控制器的优势”可能是每秒多出 10 倍的请求。

当然，这也完全取决于您的后端的可扩展性，但是当 .NET 为您完成所有艰苦的工作时，为什么还要引入瓶颈。它不仅仅是异步，还有更多的东西，而且一如既往地魔鬼在细节中。有很多资源可以提供帮助，例如[http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx)

# android - Android：如何创建这样的自定义 ListView？

> ID：14178708
> 
> 赞同：1
> 
> 时间：2013-01-06T02:34:42.897
> 
> 标签：android, listview, sdk, android-listview

**如何制作与此类似的自定义 ListView？**

![列表显示](../Images/a3925ec33a0336f3ad9df84a9cf06f61.png)

我想在**美国****密歇根州**等一些州拥有一个 ListView ，并且在选择后我想打开一个包含该州所有城市的新 ListView 。

有很多关于自定义 ListView 的教程，但我正在寻找与我想在这里做的类似的教程。我是 Android 编程新手，如果教程非常不同，我觉得很难将代码更改为我想要的。

**有人可以在这里给我看一个例子，或者把我链接到一个很有帮助的教程吗？**

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T02:56:10.427

您需要为 ListView 中的行定义自己的布局并在适配器中使用它。请按照本教程了解更多详细信息：[http ://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

# android - Android SQLite 数据库存储位置及其操作工具

> ID：14178709
> 
> 赞同：0
> 
> 时间：2013-01-06T02:34:52.513
> 
> 标签：android, android-sqlite

我正在开发一个将数据存储在 SQLite 数据库中的 Android 应用程序。我的问题是，当您使用模拟器时，该数据库文件存储在文件系统的什么位置？

我们可以使用一些工具修改那个数据库文件吗？如何 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T02:40:57.047

在 Eclipse 中，转到 DDMS 透视图，然后选择“文件资源管理器”选项卡。您的数据库将位于：/data/data//databases。

这是一个方便的 Eclipse 插件，用于查看数据库：[http](http://www.cellobject.net/Home.aspx) ://www.cellobject.net/Home.aspx 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T04:43:14.133

不需要安装任何其他软件的最简单方法是使用命令留置权工具`sqlite3`：

```
$ adb shell
root@android:/ # sqlite3 /data/data/<your-package-name>/databases/your.db
SQLite version 3.7.11 2012-03-20 11:35:50
Enter ".help" for instructions
Enter SQL statements terminated with a ";"
sqlite>
sqlite> select * from mytable; 
```

# android - Android：TextWatcher.onTextChanged 在绑定到 EditText 时触发

> ID：14178710
> 
> 赞同：0
> 
> 时间：2013-01-06T02:35:04.283
> 
> 标签：android, textwatcher

当我将 a 设置`TextWatcher`为`EditText`这样时：

```
editText1.addTextChangedListener(watcher); 
```

接口方法`onTextChanged`和被触发`afterTextChanged`，`beforeTextChanged`无论是否`EditText`包含文本。

我假设这些方法仅在绑定后的文本更改后调用。我可以防止这种行为吗？我是否犯了导致这种行为的逻辑错误？

谢谢

### 编辑：

我`setText()`以前`addTextChangedListener`。

调用栈：

```
DalvikVM[localhost:8600]    
Thread [<1> main] (Suspended)   
    <VM does not provide monitor information>   
    EditText(TextView).sendOnTextChanged(CharSequence, int, int, int) line: 7875    
    EditText(TextView).setText(CharSequence, TextView$BufferType, boolean, int) line: 3488  
    EditText(TextView).setText(CharSequence, TextView$BufferType) line: 3341    
    EditText.setText(CharSequence, TextView$BufferType) line: 90    
    EditText(TextView).setText(CharSequence) line: 3316 
    EditText(TextView).onRestoreInstanceState(Parcelable) line: 3216    
    EditText(View).dispatchRestoreInstanceState(SparseArray) line: 10079    
    ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T03:01:51.997

当您调用`addTextChangedListener(TextWatcher)`. 您可能只是`setText()`以编程方式调用或以其他方式修改文本。

* * *

这是源代码`android.widget.TextView.addTextChangedListener`：

```
public void addTextChangedListener(TextWatcher watcher) {
    if (mListeners == null) {
        mListeners = new ArrayList<TextWatcher>();
    }
    mListeners.add(watcher);
} 
```

# regex - Crawlspider SgmlLinkExtractor 允许参数

> ID：14178711
> 
> 赞同：0
> 
> 时间：2013-01-06T02:35:08.070
> 
> 标签：regex, scrapy

SgmlLinkExtractor 方法中的允许参数接受正则表达式字符串是否正确？

我正在尝试在地址中使用带有“/insertsomephrase/”的 html 链接，然后再使用带有“/insertsomeotherphrase/”的链接进行解析。如何在正则表达式中做到这一点？

我对正则表达式如何做到这一点感到困惑，因为正则表达式代码似乎作用于字符串而不是 html 元素。

谢谢你的帮助。

# select - 从 4 个表中选择列

> ID：14178726
> 
> 赞同：0
> 
> 时间：2013-01-06T02:37:26.907
> 
> 标签：select, sql-server-2012, multiple-columns

首先，我对 SQL 完全陌生，看过一些教程、视频，尝试搜索但没有找到我需要的东西。我知道它以前问过，但我找不到。

我需要找到的基本上是这样的

选择 Company.Name、Programmer.Name、Manager.Name、CEO.Name

其中 Company.City = Programmer.City = Manager.City = CEO.City

喜欢选择所有来自伦敦的人。

编辑：尝试仅使用 2 个表执行此操作，代码如下，但出现错误

无法绑定多部分标识符“Company.Name”。

```
SELECT Company.Name
    FROM Company Cm
    INNER JOIN Programmer Pg
        ON Cm.City = Pg.City
    WHERE Cm.City = 'London' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T02:41:47.930

尝试使用您分配的别名：

```
SELECT Cm.Name
    FROM Company as Cm
    INNER JOIN Programmer as Pg
        ON Cm.City = Pg.City
    WHERE Cm.City = 'London' 
```

您可以扩展模式：

```
select Cm.Name, Cm.Address,
  Pg.Name, Pg.Address,
  Mgr.Name, Mgr.Address
  from Company as Cm inner join
    Programmer as Pg on Pg.City = Cm.City inner join
    Manager as Mgr on Mgr.City = Cm.City
  where Cm.City = 'London' 
```

这将返回所有表都具有匹配数据的行，即`City`.

如果您希望在某些数据可能丢失的地方返回行，例如经理但没有程序员，那么您将使用`left outer join`代替`inner join`. 使用`outer join`在构造子句时需要小心，`where`以避免将连接从外部转换回内部。

```
select Cm.Name, Cm.Address,
  Pg.Name, Pg.Address,
  Mgr.Name, Mgr.Address
  from Company as Cm left outer join
    Programmer as Pg on Pg.City = Cm.City left outer join
    Manager as Mgr on Mgr.City = Cm.City
  where Cm.City = 'London' 
```

# php - 从javascript触发php文件

> ID：14178730
> 
> 赞同：0
> 
> 时间：2013-01-06T02:37:44.730
> 
> 标签：php, javascript

我有一个文件“data.php”，它处理传入的帖子、更新和从数据库读取。帖子每秒都会出现。

而且我有一个带有 js 脚本的文件“demo.php”，我的想法是我想以图表的形式呈现数据库中的数据。..所以它必须每秒钟左右更新一次。我该怎么做，我是否需要以某种方式触发 php 文件以获取新数据到 js 变量？

数据.php：

```
<?php
     include "k_connect.php";
     if(isset($_POST['value']))
     {

        $amp_f = number_format($_POST['value'], 2);
        $amp = explode('.', $amp_f);
        $d_tid = gmdate('Y-m-d H:i:s');

        $amp =str_replace(",","",$amp);
        $tid = explode(' ',$d_tid);
        $tid = str_replace(":","",$tid);

        mysql_query("UPDATE impdata SET amp=$amp[0]
        WHERE ID=1");
      }

      $tid_back=array();
      $amp_back = array();

      $x=0;
      $SQL = "SELECT * FROM impdata";
      $result = mysql_query($SQL);
      while ( $db_field = mysql_fetch_assoc($result) ) {
        $amp_back["amp"] = $db_field['amp'];
        $tid_back["tid"] = $db_field['tid'];    
        $amp_s =  $amp_s . json_encode($amp_back) . " ";
        $tid_s = $tid_s . json_encode($tid_back) . " ";
        $x++;
      } 
```

?>

演示.php：

```
 function graf() {
       var amp = <?php echo json_encode($amp_s); ?>;
       var power = amp.split(":");
       alert(power[1].match(/\d+/g));
       var req = new XMLHttpRequest();
       setTimeout(graf, 500);
  }
  graf(); 
```

我在 demo.php 中得到了正确的值（'power' 持有它），但只有一次，它不会更新，它只是相同的值，如果我按下 f5，我会得到一个新值。

我的想法是：'data.php' 每次有帖子时运行（每秒），然后更新 '$amp_s' 的值，这样我的 js 函数也会更新，因为它读取了 '$amp_s' 的值(setTimeout(graf, 500))。

我放的方式有什么问题吗？

我当然在 demo.php 中有这个：

```
include "k_connect.php";
include('data.php'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T03:59:17.023

一种方法是`data.php`像`demo.php`这样包含：

```
<?php
header('Content-type: application/javascript');

include('/path/to/data.php');
?>
function graf() {
   var amp = <?php echo json_encode($amp_s); ?>;
   var power = amp.split(":");
   alert(power[1].match(/\d+/g));
   var req = new XMLHttpRequest();
   setTimeout(graf, 500);
}
graf(); 
```

然后您可以像往常一样调用 javascript `<script type="text/javascript src="demo.php"></script>`。此外，根据是否`$amp_s`在函数中定义，您必须将其声明为全局变量。

# codeigniter - 使用 codeigniter 删除目录

> ID：14178731
> 
> 赞同：9
> 
> 时间：2013-01-06T02:38:04.473
> 
> 标签：codeigniter, directory

我是codeigniter的新手，所以请原谅我，我正在尝试让codeigniter删除一个基本文件夹（我不知道正确的术语是什么，它是我放置上传文件的文件夹，它位于我的根目录中代码点火器项目）。由于我是 codeigniter 的新手，所以我不知道如何在 codeigniter api 中使用 File Helper 参考。我希望有人可以帮助我。

此外，我尝试创建的删除功能还需要删除其所有内容，无论是否为空，文件夹都会被删除。我猜，它会使用递归类型的删除...我不太确定。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-06T02:58:49.110

[您可以使用delete_files](https://codeigniter.com/userguide2/helpers/file_helper.html)功能删除所有文件

```
$path=$this->config->base_url().'dir_name';
$this->load->helper("file"); // load the helper
delete_files($path, true); // delete all files/folders 
```

上面的代码将从给定路径中删除所有文件和文件夹，如果目录为空，则可以使用[rmdir](http://php.net/manual/en/function.rmdir.php)删除一个空目录，例如

```
rmdir($path); 
```

该文件夹应允许相关权限，这意味着文件/文件夹必须是可写的或由系统拥有才能被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-06T08:06:27.757

您可以使用“delete_files”功能来做到这一点：

```
$path = "the path that has files those will be deleted";
$this->load->helper("file"); // load codeigniter file helper
delete_files($path, true , false, 1); //  second and the last parameters are required, second parameter should be true and the last parameter should be greater than 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-20T14:03:22.420

```
// Delete Directory
public function delete_directory($folderName)
{
      $this->load->helper('file'); // Load codeigniter file helper

      $dir_path  = 'uploads/'.$folderName;  // For check folder exists
      $del_path  = './uploads/'.$folderName.'/'; // For Delete folder

      if(is_dir($dir_path))
      {
           delete_files($del_path, true); // Delete files into the folder
           rmdir($del_path); // Delete the folder

           return true;
      }
      return false;
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-29T08:02:27.013

```
$this->load->helper("file"); // load codeigniter file helper
delete_files('./path/to/directory/', TRUE); // Delete all files/folders in the dir 
```

如果要删除空文件夹（dir），请在上面两行之后添加以下行

```
rmdir('./path/to/directory'); 
```

# x3dom - 我在哪里可以找到更好的 x3dom 文档？

> ID：14178733
> 
> 赞同：1
> 
> 时间：2013-01-06T02:38:29.293
> 
> 标签：x3dom

我一直在网上搜索 x3dom 的文档，但我只能找到他们网站上的文档，不幸的是，这些文档并没有那么有用。我正在寻找可以解释所有元素的属性（特别是旋转、平移、不同颜色属性的渐变等）的东西。

或者，甚至可能是一个网站，其中包含有关如何使用 x3dom 进行基本和高级编程的教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T23:24:06.313

目前你必须在这里进入 github 上的实际源代码：

[https://github.com/x3dom/x3dom](https://github.com/x3dom/x3dom)

以及加入邮件列表，我尝试在那里和这里回答问题。

今天他们提到使用 sphinx 从源代码生成更好的文档，在那之前你必须自己做这些工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T02:55:49.740

X3DOM 基本上将 X3D 转换为 WebGL，因此您需要的是有关 X3D 的文档（又名 X3D 节点参考）。有很多关于 X3D 的文档。请记住，X3DOM 并不支持所有 X3D 节点。

此外，X3D 基本上是带有 XML 语法的 VRML。因此，如果您记住语法不同，您可以使用 VRML 文档。同样，有很多关于 VRML 的文档。

我最喜欢的 VRML 文档，用于我的 X3DOM 工作：

[http://www.lighthouse3d.com/vrml/tutorial/](http://www.lighthouse3d.com/vrml/tutorial/)

# android - 如何使具有嵌套对象的类 Parcelable

> ID：14178736
> 
> 赞同：40
> 
> 时间：2013-01-06T02:38:59.013
> 
> 标签：android, parcelable

我想让 A 类 Parcelable。

```
public class A {
    public String str;
    public ArrayList<B> list;
} 
```

到目前为止，这是我想出的。但是它会因 NullPointerException 而崩溃。问题是这两个语句：`dest.writeList(list);`& `in.readList(list, this.getClass().getClassLoader());`。我不知道从这里做什么:(

**A级**

```
public class A implements Parcelable {
    public String str;
    public ArrayList<B> list;

    @Override
    public int describeContents() {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {
        dest.writeString(str);
        dest.writeList(list);
    }

    private A(Parcel in) {
        str = in.readString();
        in.readList(list, this.getClass().getClassLoader());
    }

    public static final Parcelable.Creator<A> CREATOR
            = new Parcelable.Creator<A>() {
        public A createFromParcel(Parcel in) {
            return new A(in);
        }

        public A[] newArray(int size) {
            return new A[size];
        }
    };
} 
```

**B类**

```
public class B implements Parcelable {
    public String str;

    @Override
    public int describeContents() {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {
        dest.writeString(str);
    }

    private B(Parcel in) {
        str = in.readString();
    }

    public static final Parcelable.Creator<B> CREATOR
            = new Parcelable.Creator<B>() {
        public B createFromParcel(Parcel in) {
            return new B(in);
        }

        public B[] newArray(int size) {
            return new B[size];
        }
    };
} 
```

感谢您的时间。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-01-06T03:28:25.943

我终于想出了在 Google 中输入什么:)，并找到了这个[Android，如何在 Parcelable 类中正确使用 readTypedList 方法？](https://stackoverflow.com/questions/6774645/android-how-to-use-readtypedlist-method-correctly-in-a-parcelable-class)

解决方案是`read-/writeTypedList`改用。我还初始化了 arraylist 以避免任何进一步的 NullPointerException。

**A级**

```
public class A implements Parcelable {
    public String str;
    public ArrayList<B> list = new ArrayList<B>();

    @Override
    public int describeContents() {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {
        dest.writeString(str);
        dest.writeTypedList(list);
    }

    private A(Parcel in) {
        str = in.readString();
        in.readTypedList(list, B.CREATOR);
    }

    public static final Parcelable.Creator<A> CREATOR
            = new Parcelable.Creator<A>() {
        public A createFromParcel(Parcel in) {
            return new A(in);
        }

        public A[] newArray(int size) {
            return new A[size];
        }
    };
} 
```

**B类**

```
public class B implements Parcelable {
    public String str;

    @Override
    public int describeContents() {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {
        dest.writeString(str);
    }

    private B(Parcel in) {
        str = in.readString();
    }

    public static final Parcelable.Creator<B> CREATOR
            = new Parcelable.Creator<B>() {
        public B createFromParcel(Parcel in) {
            return new B(in);
        }

        public B[] newArray(int size) {
            return new B[size];
        }
    };
} 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2015-04-21T13:08:59.610

如果您的主要对象中**只有一个`Parcelable`对象**`Parcelable`，则不要像接受的答案案例那样列出。然后它将如下所示：

**A级**

```
public class A implements Parcelable {
    public String str;
    public B objectB;

    @Override
    public int describeContents() {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {
        //The parcelable object has to be the first one
        dest.writeParcelable(objectB, flags);
        dest.writeString(str);
    }

    private A(Parcel in) {
        this.objectB = in.readParcelable(B.class.getClassLoader());
        str = in.readString();
    }

    public static final Parcelable.Creator<A> CREATOR
            = new Parcelable.Creator<A>() {
        public A createFromParcel(Parcel in) {
            return new A(in);
        }

        public A[] newArray(int size) {
            return new A[size];
        }
    };
} 
```

**B类**

```
public class B implements Parcelable {
    public String str;

    @Override
    public int describeContents() {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {
        dest.writeString(str);
    }

    private B(Parcel in) {
        str = in.readString();
    }

    public static final Parcelable.Creator<B> CREATOR
            = new Parcelable.Creator<B>() {
        public B createFromParcel(Parcel in) {
            return new B(in);
        }

        public B[] newArray(int size) {
            return new B[size];
        }
    };
} 
```

**重要提示：** 请注意，您写入和读取`Parcelable`对象的顺序很重要。查看此[答案](https://stackoverflow.com/a/15764742/1364896)以获取更多详细信息

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-07-28T03:27:56.180

在写包裹

```
@Override
public void writeToParcel(Parcel parcel, int i) {
    parcel.writeString(name); //if String
    parcel.writeTypedList(assignedEmployees); //if List with custom class, eg. List<AssignedEmployee> assignedEmployees
    parcel.writeParcelable(checkin,i); //if custom class, eg. Checkin checkin;
    } 
```

在构造函数中读取它

```
 protected A(Parcel in) {
        name = in.readString();
        assignedEmployees = in.createTypedArrayList(AssignedEmployee.CREATOR);
        checkin = in.readParcelable(Checkin.class.getClassLoader());
    } 
```

其中AssignedEmployee，签入自定义类，它应该实现Parcelable。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-06T13:35:26.167

只需按 ALT+ENTER 并替换 Parcelable 它将实现所有必要的实现

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-30T19:47:12.003

您可以从首选项添加 Parcelable 代码生成器插件，从那里您可以通过执行以下操作创建 Parcelable 样板代码： - 右键单击​​模型中的类名 - 选择生成 - 选择 Parcelable

presto - 您的模型将使用必要的 Parcelable 样板代码进行更新。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-20T15:19:23.407

我有同样的问题，这是一个[通用版本](https://stackoverflow.com/a/47908946/6241054)

```
class Item<T : Parcelable> (val model: T, val index: Int ) : Parcelable {

    constructor(parcel: Parcel) :
        this(parcel.readParcelable(
          Item<T>::model.javaClass.classLoader),
          parcel.readInt()
        ) {}

    override fun writeToParcel(parcel: Parcel?, flag: Int) {
        parcel?.writeParcelable(model, 0)
        parcel?.writeInt(index)
    }

    override fun describeContents(): Int {
        return 0
    }

    companion object CREATOR : Parcelable.Creator<Item<Parcelable>> {
        override fun createFromParcel(parcel: Parcel): Item<Parcelable> {
            return Item(parcel)
        }

        override fun newArray(size: Int): Array<Item<Parcelable>?> {
            return arrayOfNulls(size)
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-25T05:50:19.970

不幸的是，我使用了`BarEntry`无法打包的第 3 方库中的类 ()。我通过传递s`Intent`数组`float`然后`BarEntry`在接收端重建我的对象来解决我的问题。

这是次优的，但如果有人有类似的情况，即无法创建可包裹对象，这可能是一个有用的过程。

# c# - 使用 LINQ 查询 XML 文件

> ID：14178738
> 
> 赞同：1
> 
> 时间：2013-01-06T02:39:15.660
> 
> 标签：c#, xml, linq

我有一个要使用 LINQ 查询的 XML 文件。我想为每条记录创建一个新行。这是我迄今为止尝试过但失败的方法。

```
<?xml version="1.0" encoding="utf-8"?>
<categories xmlns="urn:schemas-pi-meta:categories" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:schemas-pi-meta:categories Xsd/meta.xml.config.xsd">
<category name="history">
    <data>
      <value name="customer">2</value>
      <value name="truck">1</value>
    </data>
    <category name="record">
      <data>
        <value name="time">1/3/2013 2:22:41 PM</value>
        <value name="quantity">3</value>
        <value name="unit">barrels</value>
        <value name="cancelled">false</value>
        <value name="errored">false</value>
      </data>
    </category>
  </category> 
```

该文件较长，因此我已将其删除，但它会重复。

这是我试图做的：

```
 XElement root = XElement.Load("D:\\Linq XM\\history.xml.config");

 IEnumerable<XElement> address = from el in root.Elements("categories")
    where (string)el.Attribute("category") == "record"
    select el; 
```

我试图改变 Elements 的价值，认为我可能遗漏了一些东西，但不知何故，查询没有返回我的数据。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T02:44:38.293

据我所知，有四个问题。

第一个问题是您正在寻找根`categories`元素*下*的元素 - 当`categories`元素*是*根元素时。我怀疑你真的想寻找`category`元素而不是`categories`元素。

*第二个问题是*你试图找到一个名为`category`. `name`在我看来，您应该检查*名为*`category`.

第三个问题是具有`name`属性的类别`record`实际上根本不是直接子元素`categories`——它是*后代*，但不是直接子元素——所以你应该使用`Descendants`而不是`Elements`。

第四个问题是您没有指定命名空间。文件的这一部分：

```
<categories xmlns="urn:schemas-pi-meta:categories"  ... 
```

指定此元素和后代的默认命名空间是 URI `"urn:schemas-pi-meta:categories"`。因此，当您说出您要查找的内容时，您需要指定这一点。

把这些放在一起，你会得到：

```
XNamespace ns = "urn:schemas-pi-meta:categories";
var query = from el in root.Descendants(ns + "category")
            where (string) el.Attribute("name") == "record"
            select el; 
```

或者没有查询表达式（因为它比这里的价值更麻烦）：

```
XNamespace ns = "urn:schemas-pi-meta:categories";
var query = root.Descendants(ns + "category")
                .Where(el => (string) el.Attribute("name") == "record"); 
```

# uiviewcontroller - 如何在 iOS 应用中导航

> ID：14178740
> 
> 赞同：0
> 
> 时间：2013-01-06T02:39:20.737
> 
> 标签：uiviewcontroller

我试图在我的 iOS 项目中有一个简单的导航，但没有任何效果。我从几个小时开始就在尝试，我只是不明白为什么这么难（我在商店中有 Windows 8、Windows Phone 8 和 Android 应用程序）。

我有一个连接到我的类 MainMenu 的视图。在标头中，我参考了 mainmenu.h 的标头。我创建了一个基于 MainMenu 类的对象 MainMenuView。在 m-File 中，我初始化 MainMenuView：

```
MainMenuView = [[MainMenu alloc] init]; 
```

仅出于测试目的，我设置了一个标题，这是唯一有效的方法：

```
[MainMenuView.navigationItem setTitle:@"Main View"]; 
```

我尝试了很多不同的线路，但没有线路可以完成这项工作（只需显示 MainMenuView ...）

```
[window addSubview:[navController view]];
UINavigationController *newnav = [[UINavigationController alloc] initWithRootViewController:MainMenuView];
[self setNavController:newnav];
[window addSubview:[navController view]];
[self.navController pushViewController: MainMenuView animated:YES];
self.window.rootViewController = self.navController;
[self.window makeKeyAndVisible]; 
```

我将此添加到第一行，因为我在一些教程中阅读了它，但没有帮助：

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]]; 
```

所以，我只想使用 UINavigationController 显示我的 MainMenu。稍后，我想使用 UINavigationController 通过按特定按钮导航到特定视图...

这一行实际上会使我的应用程序崩溃：

```
[self.navController pushViewController: MainMenuView animated:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T14:45:33.730

我不得不使用带有标识符的实例化视图控制器，没有其他工作......但这没有写在任何文档或其他东西中，我在谷歌搜索数小时后找到了它...... :(

# git - 不记得原来的头了

> ID：14178742
> 
> 赞同：1
> 
> 时间：2013-01-06T02:39:41.167
> 
> 标签：git, head

在我执行了很多结帐操作之后，我不记得在这些结帐之前哪个是原始的 HEAD。我怎样才能找回HEAD？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T04:31:36.383

用于`git reflog`找出 HEAD 更改的原因和提交内容。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-06T04:12:39.337

git 存储库是一个提交树，其中一些标签附加到一些提交。这些标签是命名树的特定分支的一种方式。默认情况下，最初有两个标签`master`和`HEAD`. `master`指示树的主要分支，而“HEAD”是指示您当前在提交树中的哪个提交的标签。

`HEAD`话虽如此，当你在树上从一个提交`git checkout`移动到另一个提交时，它总是你在哪里。`HEAD`

据我所知，没有跟踪`HEAD`标签如何在树中移动。

但是，如果您想更清楚地看到您在整个树中的位置，该`git log`命令可以很好地向您显示 - 尽管可能需要一些研究才能知道哪些选项会显示您想要看到的内容。

下面是我经常使用的一些`git log`命令示例，也许它们会帮助您找到解决方法。每个都列出了来自父提交之上的子提交的提交

*   此列表列出了您当前所在分支上的所有提交，并用分支名称和左侧的图表进行了装饰，该图表显示了提交之间的相互关系。

    `git log --oneline --decorate=short --graph`

*   与上面相同，但显示连接到您所在位置的树中的所有提交。

    `git log --oneline --decorate=short --graph --all`

*   这是一个只显示那些已标记的提交

    `git log --oneline --decorate=short --simplify-by-decoration --graph --all`

还有另一种标签，`git tag`. `tag`可以创建A来标记出于某种原因对您很重要的提交。一旦你找到了你正在寻找的提交，考虑`tag`在它上面加上一个，这样你就可以很容易地再次找到它。

如果这不能帮助您找到解决方法，请发布有关您的特定问题的更多详细信息。

# ruby-on-rails - 在这台机器上可用的 gem 中找不到 gem 'jquery-rails (= 2.0.0) ruby '

> ID：14178744
> 
> 赞同：6
> 
> 时间：2013-01-06T02:39:56.387
> 
> 标签：ruby-on-rails, rubygems

所以在 GemFile 中，如果我将它保留为**gem 'query-rails'** 并安装包，它就可以工作。但是，如果我这样指定版本：

```
gem 'jquery-rails', '2.0.0' 
```

并且想要安装或更新捆绑包，它不起作用并在标题中显示错误。

我也做了一个

```
sudo gem install jquery-rails 
```

并再次尝试为 jQuery 提供一个版本，但仍然无法正常工作。

为什么？！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-06T02:53:59.820

没有可用的 v2.0.0 jquery-rails gem -[它被 yanked 了](http://rubygems.org/gems/jquery-rails/versions)。您应该尝试使用 2.0.1 或更高版本。通常，最好指定 '~>' 帮助程序以获取该次要版本的最新错误修复：

```
gem 'jquery-rails', '~> 2.0.0' 
```

这将安装 v2.0.3，它是 2.0.x 系列的最新版本。阅读[Ruby gem 依赖项中的波浪号大于 (~>) 是什么意思？](https://stackoverflow.com/questions/5170547/what-does-tilde-greater-than-mean-in-ruby-gem-dependencies)和[http://semver.org/](http://semver.org/)了解更多信息。

# search - 通过搜索未找到公共 Github 存储库

> ID：14178746
> 
> 赞同：1
> 
> 时间：2013-01-06T02:40:48.593
> 
> 标签：search, github, solr-query-syntax

使用以下搜索查询...

[https://github.com/search?q=repo%3AOpeningDesign%2FOpeningDesign+GET&p=1&ref=searchbar&type=Code&l=](https://github.com/search?q=repo%3AOpeningDesign%2FOpeningDesign+GET&p=1&ref=searchbar&type=Code&l=)

..在这个公共回购：[https ://github.com/OpeningDesign/OpeningDesign](https://github.com/OpeningDesign/OpeningDesign)

什么都没有出现。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T13:22:48.740

2013 年 1 月 24 日更新：来源“[全新代码搜索](https://github.com/blog/1381-a-whole-new-code-search)”

相同的查询[`repo:OpeningDesign/OpeningDesign GET`](https://github.com/search?q=repo:OpeningDesign/OpeningDesign%20GET&p=1&ref=searchbar&type=Code&l=)现在返回结果！

部署新搜索引擎时必须更新搜索索引（[elasticsearch.org](http://www.elasticsearch.org/community/)）

* * *

原始答案（2013 年 1 月 6 日）

考虑到：

*   ruby/ruby repo 上的任何请求都*有效*（如“[在 Github 项目中搜索代码](https://stackoverflow.com/questions/3616221/search-code-inside-a-github-project)”中所述）
*   任何请求[`OpeningDesign/OpeningDesign`](https://github.com/OpeningDesign/OpeningDesign)都不起作用，

这似乎是一个索引问题。

在他们最近的[文件服务器问题](https://github.com/blog/1364-downtime-last-saturday)之后，这可能是一个副作用。
正如 Iven 指出的那样，[GitHub 支持](https://github.com/contact)应该能够澄清这一点。

* * *

支持确实澄清了（2013 年 1 月 7 日）：

> **我们已经停止将新推送的代码添加到我们的代码搜索索引**中。
> 
> 代码量已经超出了我们当前的搜索索引，我们正在努力转向更具可扩展性的搜索架构。
> 我很抱歉给您带来不便。
> 我们无法估计这个新的搜索索引何时启动并运行，但当它准备好时，将会发布一篇博文（[GitHub 博客](https://github.com/blog)）

# php - PHP 中是否有应用程序范围变量功能？

> ID：14178755
> 
> 赞同：2
> 
> 时间：2013-01-06T02:42:10.187
> 
> 标签：php

我希望存储一个可供所有会话访问的变量，类似于 ASP 中的“应用程序对象”的想法。PHP是否支持此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T02:47:26.543

因为 PHP 的原始架构是基于 CGI 的，所以本质上没有。基于容器的 PHP 中可能有一些东西，但我不相信 API 中有任何东西。

话虽如此，它支持在 PHP 之外的进程中运行的全局缓存。

你想达到什么目的？一般来说，尝试将 ASP 代码直接翻译成 PHP 不会让你走得太远——从任何一种语言/平台转换到另一种语言/平台也是如此——你必须解放你的思想并学会思考你所在平台的方式学习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T02:46:06.617

听起来您想在页面请求之间存储一个变量，但不是按会话分组，而是对所有用户进行全局分组？

为什么不直接将其写入文件？

```
// Read
$variable = unserialize(file_get_contents('/path/to/applicationVariable.txt'));

// Write
file_put_contents('/path/to/applicationVariable.txt', serialize($variable)); 
```

（注意：当然，文件系统不是这些的最佳位置。数据库或缓存服务器可能更适合，这取决于它的用途。）

# c++ - DirectX 11 Sprite 2D 相机

> ID：14178758
> 
> 赞同：3
> 
> 时间：2013-01-06T02:43:13.580
> 
> 标签：c++, camera, directx, 2d, sprite

长期读者。第一次海报。我遇到了一个问题，已经破坏了几个小时的脑细胞，而且速度很快。所以我想我会把它推到这里，让一双新的眼睛看到它......

基本上我正在尝试使用 C++ 和 DirectX 11 创建一个 2D 游戏。我之前使用过 C# 和 XNA，并且我在 DirectX 中制作了一些 3D 的东西，但没有这么大。

我现在正在尝试使用基本的相机和基本的精灵批次在屏幕中央绘制一个精灵，但没有任何东西出现，我一生都无法弄清楚为什么。我会发布一些代码来给出一个想法。

这是我在相机类中设置所有矩阵的地方，它们保持这种状态（现在，稍后将更改为移动等）：

```
XMStoreFloat4x4(&m_world, XMMatrixIdentity());
XMStoreFloat4x4(&m_proj, XMMatrixOrthographicOffCenterLH(0.0f, width, height, 0.0f, 0.0f, 1.0f));

m_position = XMFLOAT3(width / 2, height / 2, 0);
m_look = XMFLOAT3(0, 0, 1);
m_up = XMFLOAT3(0, 1, 0);

XMVECTOR p = XMLoadFloat3(&m_position);
XMVECTOR l = XMLoadFloat3(&m_look);
XMVECTOR u = XMLoadFloat3(&m_up);

XMStoreFloat4x4(&m_view, XMMatrixLookToLH(p, l, u)); 
```

然后将其传递给精灵批处理开始方法，该方法将信息传递给着色器：

```
D3D11_MAPPED_SUBRESOURCE data;
ZeroMemory(&data, sizeof(data));
m_deviceContext->Map(m_cBuffer, 0, D3D11_MAP_WRITE_DISCARD, 0, &data);
ConstantBuffer* cb = (ConstantBuffer*)data.pData;

XMMATRIX w = XMLoadFloat4x4(&world);
XMMATRIX v = XMLoadFloat4x4(&view);
XMMATRIX p = XMLoadFloat4x4(&proj);

w = XMMatrixTranspose(w);
v = XMMatrixTranspose(v);
p = XMMatrixTranspose(p);

XMStoreFloat4x4(&world, w);
XMStoreFloat4x4(&view, v);
XMStoreFloat4x4(&proj, p);

cb->World = world;
cb->View = view;
cb->Proj = proj;

m_deviceContext->Unmap(m_cBuffer, 0); 
```

最后是着色器本身：

```
cbuffer ConstantBuffer : register(b0)
{
    float4x4 World;
    float4x4 View;
    float4x4 Proj;
};

SamplerState sam : register(s0);
Texture2D tex : register(t0);

struct VertexIn
{
    float3 Position : POSITION;
    float2 Texture : TEXCOORD;
    float4 Color : COLOR;
};

struct PixelIn
{
    float4 Position : SV_POSITION;
    float2 Texture : TEXCOORD;
    float4 Color : COLOR;
};

PixelIn VS(VertexIn vin)
{
    float4 position = float4(vin.Position, 1.0f);
    position = mul(position, World);
    position = mul(position, View);
    position = mul(position, Proj);

    PixelIn vout;
    vout.Position = position;
    vout.Texture = vin.Texture;
    vout.Color = vin.Color;

    return vout;
}

float4 PS(PixelIn pin) : SV_Target
{
    float4 textureColor = tex.Sample(sam, pin.Texture);

    return pin.Color * textureColor;   
} 
```

如您所见，非常简单的东西。但是根本没有任何东西被吸引到屏幕上。我已经尝试完全不打扰矩阵，省略世界矩阵，使用透视投影矩阵，使用查看而不是查看矩阵，通过 XMMatrixOrthographicLH 使用 (0, 0, 0) 作为中心并将精灵位置转换为屏幕空间。

我什至大大简化了精灵批次，将其限制为一次只能绘制一个精灵！

我正在使用一个不可变的索引缓冲区（0、1、2、0、2、3）和一个动态顶点缓冲区，其更新如下：

```
D3D11_MAPPED_SUBRESOURCE data;
ZeroMemory(&data, sizeof(data));
m_deviceContext->Map(m_vBuffer, 0, D3D11_MAP_WRITE_DISCARD, 0, &data);
Vertex* vertex = (Vertex*)data.pData;

for(UINT i = 0; i < sprite->Vertices.size(); ++i)
{
    vertex[i] = sprite->Vertices[i];
}

m_deviceContext->Unmap(m_vBuffer, 0);

m_deviceContext->DrawIndexed(6, 0, 0); 
```

我使用类似的方法来渲染 3D 模型。事实上，这更难，因为我有一个动态索引缓冲区和更多的常量缓冲区数据，而且着色器要复杂得多。

我认为这可能是数据在某处丢失的问题，但是这一切似乎都被传递并正确地传递到 DrawIndexed 方法调用。我已经仔细检查了缓冲区的创建和状态，目前将其设置为 CULL_NONE 只是为了确保它没有被剔除。

为了清楚起见，我将发布缓冲区创建和精灵创建：

```
HRESULT result = S_OK;

device->GetImmediateContext(&m_deviceContext);

D3D11_BUFFER_DESC cbd;
ZeroMemory(&cbd, sizeof(cbd));
cbd.ByteWidth = sizeof(ConstantBuffer);
cbd.Usage = D3D11_USAGE_DYNAMIC;
cbd.BindFlags = D3D11_BIND_CONSTANT_BUFFER;
cbd.CPUAccessFlags = D3D11_CPU_ACCESS_WRITE;
cbd.MiscFlags = 0;
cbd.StructureByteStride = 0;

result = device->CreateBuffer(&cbd, 0, &m_cBuffer);

if (FAILED(result))
{
    return 0;
}

vector<short> indices;
indices.push_back(0);
indices.push_back(1);
indices.push_back(2);
indices.push_back(0);
indices.push_back(2);
indices.push_back(3);

D3D11_SUBRESOURCE_DATA indexData;
ZeroMemory(&indexData, sizeof(indexData));
indexData.pSysMem = &indices;

D3D11_BUFFER_DESC ibd;
ZeroMemory(&ibd, sizeof(ibd));
ibd.ByteWidth = 6 * sizeof(short);
ibd.Usage = D3D11_USAGE_IMMUTABLE;
ibd.BindFlags = D3D11_BIND_INDEX_BUFFER;
ibd.CPUAccessFlags = 0;
ibd.MiscFlags = 0;
ibd.StructureByteStride = 0;

result = device->CreateBuffer(&ibd, &indexData, &m_iBuffer);

if (FAILED(result))
{
    return 0;
}

D3D11_BUFFER_DESC vbd;
ZeroMemory(&vbd, sizeof(vbd));
vbd.ByteWidth = 4 * sizeof(Vertex);
vbd.Usage = D3D11_USAGE_DYNAMIC;
vbd.BindFlags = D3D11_BIND_VERTEX_BUFFER;
vbd.CPUAccessFlags = D3D11_CPU_ACCESS_WRITE;
vbd.MiscFlags = 0;
vbd.StructureByteStride = 0;

result = device->CreateBuffer(&vbd, 0, &m_vBuffer);

if (FAILED(result))
{
    return 0;
}

return 1; 
```

雪碧：

```
ID3D11Resource* resource;
ZeroMemory(&resource, sizeof(resource));
texture->GetResource(&resource);

ID3D11Texture2D* tex = (ID3D11Texture2D*)resource;

D3D11_TEXTURE2D_DESC t;
ZeroMemory(&t, sizeof(t));
tex->GetDesc(&t);

Vertex v[4];
ZeroMemory(&v, sizeof(v));

v[0].Position = XMFLOAT3((float)destinationRectangle.value.left, (float)destinationRectangle.value.top, z);
v[1].Position = XMFLOAT3((float)destinationRectangle.value.right, (float)destinationRectangle.value.top, z);
v[2].Position = XMFLOAT3((float)destinationRectangle.value.right, (float)destinationRectangle.value.bottom, z);
v[3].Position = XMFLOAT3((float)destinationRectangle.value.left, (float)destinationRectangle.value.bottom, z);

v[0].Texture = XMFLOAT2((float)(sourceRectangle.value.left / t.Width), (float)(sourceRectangle.value.top / t.Height));
v[1].Texture = XMFLOAT2((float)(sourceRectangle.value.right / t.Width), (float)(sourceRectangle.value.top / t.Height));
v[2].Texture = XMFLOAT2((float)(sourceRectangle.value.right / t.Width), (float)(sourceRectangle.value.bottom / t.Height));
v[3].Texture = XMFLOAT2((float)(sourceRectangle.value.left / t.Width), (float)(sourceRectangle.value.bottom / t.Height));

v[0].Color = color;
v[1].Color = color;
v[2].Color = color;
v[3].Color = color;

Sprite* sprite = new Sprite();
sprite->Vertices.push_back(v[0]);
sprite->Vertices.push_back(v[1]);
sprite->Vertices.push_back(v[2]);
sprite->Vertices.push_back(v[3]);
sprite->Texture = texture;

m_sprites.push_back(sprite); 
```

我要疯了吗？我是不是很傻？还是有更简单的方法来做到这一点？谢谢。任何帮助表示赞赏！

还要指出，我正在绘制的精灵在 800x600 的屏幕上具有一个全白色的矩形（左 = 300，右 = 500，上 = 350，下 = 450）。纹理正在正确加载，我什至尝试在着色器中输出颜色只是为了确保没有运气。

哦，我尝试绘制的精灵的 Z 值设置为 0.5f，尽管我尝试将其设置为不同的值，但这是我期望使用它的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T01:07:36.467

多亏了 MJP，我在另一个网站上找到了答案。问题是这一行：

```
indexData.pSysMem = &indices; 
```

应该是这样的：

```
indexData.pSysMem = &indices[0]; 
```

显然，我发送的是指向整个向量而不是第一个实例的指针，所以索引缓冲区不知道我在做什么！

就像我说的，我刚刚从 XNA 编程开始了 DirectX 编程。;)

我希望这可以帮助处于类似位置的其他人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T10:14:16.133

您是否将 DepthStencil 配置为使用 2D？还可以尝试将负 Z 设置为相机位置，将其设置为 0

# java - 在 Java 中计算多元正态 CDF

> ID：14178759
> 
> 赞同：6
> 
> 时间：2013-01-06T02:43:28.283
> 
> 标签：java, math, statistics, distribution, numeric

有谁知道一个可靠、准确的库来计算 Java 中的多元正态 (MVN) CDF？我正在寻找类似[MATLAB 的 mvncdf 函数的](http://www.mathworks.com/help/stats/mvncdf.html)东西。我需要能够为最大 10 或更大的尺寸做到这一点。大多数统计/数学库没有这个功能。能够计算对数概率是一个加分项。

从[这篇文章](https://stackoverflow.com/questions/11109465/multivariate-normal-cdf-in-c-c-or-fortran)中，似乎没有提到其他一些语言的免费实现。虽然直接的 java 实现会动摇，但我会接受其他不需要许可证的语言（例如，不是 MATLAB 或 IMSL）的实现，并且可以以最小的开销从 Java 轻松调用。

[（这个问题是StackExchange math 上](https://math.stackexchange.com/questions/270745/compute-probability-of-a-particular-ordering-of-normal-random-variables)的一篇文章的衍生品，我试图计算正常随机变量排序的概率......如果您有兴趣尝试直接使用其他数学方法解决问题，请检查出来。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T22:23:01.227

在做了一些额外的研究之后，似乎以下是最合理的方法。

多元正态 CDF 计算起来并不简单（尤其是对于大维度），并且已经有几篇关于该主题的学术论文。Alan Genz 教授有一堆 Fortran-77 子程序，可以计算各种多元密度和 CDF，可在他的页面上找到：http: [//www.math.wsu.edu/faculty/genz/software/software.html](http://www.math.wsu.edu/faculty/genz/software/software.html)

正如您从其中的一些代码中看到的那样，用另一种语言重新实现并不是一件轻而易举的事情，这可能就是为什么除非有人付费才这样做的原因。很多数学/数值编程都是在研究层面在 Fortran 中完成的，所以这是大多数最好的代码所在的地方。

因此，为了获得最佳结果，最好直接使用 JNI 或 JNA 调用（本机编译的）Fortran 子例程。JNA 似乎是最容易实现的，遵循以下说明：[http](http://www.javaforge.com/wiki/66061) ://www.javaforge.com/wiki/66061 。使用它和其他一些参考资料，我实现了 Java-JNA-Fortran 链接，以便能够调用 MVNEXP（预期值）和 MVNDST（cdf）子例程。你可以在这里查看代码：

*   Java：[https ://github.com/mizzao/libmao/tree/master/src/main/java/net/andrewmao/probability](https://github.com/mizzao/libmao/tree/master/src/main/java/net/andrewmao/probability)
*   Fortran（修改）和 Makefile：[https ://github.com/mizzao/libmao/tree/master/src/main/fortran](https://github.com/mizzao/libmao/tree/master/src/main/fortran)

还要指出：对于一些二元分布和其他在公共数学中找不到的东西，确实存在本机 Java 代码；它改编自上面的来源：[http](http://www.iro.umontreal.ca/~simardr/ssj/indexe.html) ://www.iro.umontreal.ca/~simardr/ssj/indexe.html 。这是一个非常好的数学库，我直到现在才发现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-08T02:30:18.967

添加到 OP 的解决方案（例如：最好的选择是 fortran 代码，并且没有其他确定的接近），获得纯 java 库的一种方法是使用 f2j 编译器（fortran 到 java）[http://icl。 cs.utk.edu/f2j](http://icl.cs.utk.edu/f2j)

我发现它生成的代码非常可行（例如这个 minpack 库：[http](http://www1.fpl.fs.fed.us/optimization/LmderTest_f77.html) ://www1.fpl.fs.fed.us/optimization/LmderTest_f77.html ）。我记得的唯一烦恼是数组从“1”与“0”开始，但可以通过一个简单的包装函数轻松处理（如果你关心的话）。

@Andrew：如果你转换它，我会感兴趣的！

# ios - OSX：系统如何知道连接 iDevice 或 SD 卡时要打开的应用程序？

> ID：14178761
> 
> 赞同：1
> 
> 时间：2013-01-06T02:43:53.867
> 
> 标签：ios, macos, cocoa

我的第一个问题很简单：系统如何知道连接 iDevice 或 SD 卡时要打开哪个应用程序？

第二个问题：我如何访问它并在 Cocoa 应用程序中对其进行修改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T03:55:15.853

有一个称为 iTunes Helper 的进程在连接 iDevice 时启动 iTunes。没有可以编辑的应用列表。

对于 SD 卡，它使用首选项文件。您可以使用 NSUserDefaults 查看首选项文件的内容

```
defaults -currentHost read com.apple.ImageCapture2 
```

HotPlugActionArray 包含要启动的应用程序。

# ruby-on-rails-3.2 - Rails 3.2.10 资产未在生产中预编译

> ID：14178765
> 
> 赞同：0
> 
> 时间：2013-01-06T02:44:25.560
> 
> 标签：ruby-on-rails-3.2

我的 css 文件在开发中运行良好。

我的生产应用程序因 500 错误而失败。生产日志文件显示正在编译的 css 文件

```
Compiled screen/fluid/nav.css  (0ms)  (pid 16607) 
```

那么这个错误：

```
Started GET "/login" for 118.211.236.235 at 2013-01-06 01:29:10 +0000
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (9.5ms)
Completed 500 Internal Server Error in 112ms

ActionView::Template::Error (avetmiss.css isn't precompiled): 
```

该文件未在 application.css 中列出，但似乎无论如何都已编译。这是我的 application.css 文件：

```
/*
*= require_self
*= require_tree ./screen
*/ 
```

另一个问题是我的 application.html 文件中有打印 css，如下所示：

```
<%= stylesheet_link_tag 'application-print', :media => 'print' -%> 
```

这个文件根本没有被预编译。我是否需要将它放在 production.rb 中的预编译指令中，如下所示？该指令应该放在 production.rb 还是 application.rb 中？

```
config.assets.precompile += %w( application-print.css ) 
```

我是否需要在上面的预编译语句中添加不是控制器资产的每个 css 和 js 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T05:04:28.710

看起来这些文件未包含在部署的预编译步骤中。

假设 application-print.css 和 avetmiss.css 在 app/assets/stylesheets 中，请直接在 application.css 中使用它们

```
/*
*= require self
*= require tree ./screen
*= require avetmiss
*/ 
```

或者，如果你想在你的 app/assets/stylesheets 文件夹下包含所有 css 文件，那么在你的 application.css 中，只需：

```
/*
*= require self
*= require tree .
*/ 
```

[Rails 资产指南](http://guides.rubyonrails.org/asset_pipeline.html#in-production)对我很有帮助。

***编辑

对于您的打印 css - 我认为您确实需要一个预编译指令，因此它不会包含在 application.css

```
config.assets.precompile += %w( application-print.css ) 
```

# javascript - JavaScript中画布上的平滑keydown动画

> ID：14178769
> 
> 赞同：3
> 
> 时间：2013-01-06T02:45:18.457
> 
> 标签：javascript, animation, canvas, keydown, smooth

我对编程很陌生，我正在尝试创建一些代码，让我可以通过按箭头键在 Canvas 周围移动一个正方形。我可以让方块移动，但它的运动不是很顺畅。我让它一次移动 10 个像素的增量，所以我理解为什么它感觉有点生涩，因为在 10 帧差异的每个位置之间没有任何动画，但是让它以较小的增量移动让它很远太慢了。到目前为止我所做的如下：

```
window.onload = function init() {
    var canvas = document.getElementById("canvas");
    var ctx = canvas.getContext("2d");
    setInterval(gameLoop,50);
    window.addEventListener('keydown',whatKey,true);
}

avatarX = 400
avatarY = 300

function gameLoop() {
    var canvas = document.getElementById("canvas");
    var ctx = canvas.getContext("2d");
    canvas.width = 800
    canvas.height = 600
    ctx.fillRect(avatarX,avatarY,50,50);
}

function whatKey(e) {
    switch(e.keyCode) {
    case 37:
        avatarX = avatarX - 10;
        break;
    case 39:
        avatarX = avatarX + 10;
        break;
    case 40:
        avatarY = avatarY + 10;
        break;
    case 38:
        avatarY = avatarY - 10;
        break;
    }
} 
```

每次我按右箭头键时，我都希望方块以恒定的速率向那个方向平滑移动。提前感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-06T04:31:31.050

添加了一些东西，首先是`requestAnimationFrame` [这里解释的原因](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)。

然后我添加了一个`keyup`和`keydown`事件处理程序，这些将使用数组跟踪当前正在推送的键。如果数组中的键为真，则当前被推送，如果为假，则不是。此方法还允许您一次按住多个键。

然后我添加了根据按下的内容增加或减少的速度变量，以及一个`maxSpeed`变量，这样你就不会比某个速度更快。`maxSpeed`变量可以被删除，递增和递减也`velX`可以`velY`被删除，你只需要取消注释我留下的行。它在 10 点时似乎*太快*了，这就是我添加逐渐加速的原因。

**[现场演示](http://jsfiddle.net/loktar/DEaja/)**

上面看起来会很生涩，因为画布有点苦，所以框架用上下箭头滚动，使用全屏链接来全面测试运动。

**[全屏链接](http://jsfiddle.net/loktar/DEaja/embedded/result/)**

```
(function () {
  var requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
  window.requestAnimationFrame = requestAnimationFrame;
})();

window.onload = function init() {
  var canvas = document.getElementById("canvas");
  var ctx = canvas.getContext("2d");
  gameLoop();
}

window.addEventListener("keydown", function (e) {
  keys[e.keyCode] = true;
});
window.addEventListener("keyup", function (e) {
  keys[e.keyCode] = false;
});

var avatarX = 400,
  avatarY = 300,
  velX = 0,
  velY = 0,
  keys = [],
  maxSpeed = 10;

function gameLoop() {
  whatKey();
  var canvas = document.getElementById("canvas");
  var ctx = canvas.getContext("2d");
  canvas.width = 800;
  canvas.height = 600;

  avatarX += velX;
  avatarY += velY;

  ctx.fillRect(avatarX, avatarY, 50, 50);
  requestAnimationFrame(gameLoop);
}

function whatKey() {
  if (keys[37]) {
    //velX = -10;
    if (velX > -maxSpeed) {
      velX -= 0.5;
    }
  }

  if (keys[39]) {
    //velX = 10;
    if (velX < maxSpeed) {
      velX += 0.5;
    }
  }
  if (keys[40]) {
    //velY = 10;
    if (velY < maxSpeed) {
      velY += 0.5;
    }
  }
  if (keys[38]) {
    //velY = -10;
    if (velY > -maxSpeed) {
      velY -= 0.5;
    }
  }
} 
```

# ruby-on-rails - 使用 Mocha 进行模拟实际上如何允许您测试函数中的逻辑？

> ID：14178770
> 
> 赞同：3
> 
> 时间：2013-01-06T02:45:18.347
> 
> 标签：ruby-on-rails, ruby, unit-testing, ruby-mocha

我开始学习如何模拟事物，因为对于有 1000 多个测试的项目来说，使用 Factory Girl 并不是很实用。我不能每次测试都访问数据库，特别是如果我希望进行任何类型的自动化持续集成。

我的测试：

```
 it "should return an URL with the desired security protocol" do
        p = Proposal.new
        p.expects(:status).returns(Proposal::PUBLISHED) #this should be invoked by public_url?
        p.expects(:public_url).returns("https://something")
        p.expects(:public_url).with(true).returns("https://something")
        p.expects(:public_url).with(false).returns("http://something")
        assert p.public_url.index("https") != nil
        assert p.public_url(true).index("https") != nil
        assert p.public_url(false).index("https") == nil
    end 
```

上述测试的方法：

```
def public_url(https = true)
    url = ""
    if self.published?
        # attepmt to find sluggable id
        id = sluggable_id
        url = (https ? "#{ENV['SSL_PROTOCOL']}://" : "http://") + 
            self.account.full_domain + "/view/" + id.to_s
    end

    return url
end 

def published?
    return self.status > UNPUBLISHED
end 
```

但这是我在运行测试时得到的：

```
unsatisfied expectations:
- expected exactly once, not yet invoked: #<Proposal:0x7fbd07e82a30>.status(any_parameters) 
```

不应该`public_url`调用 invoke`status()`吗？

如果不是，那么如果我不得不打电话给`p.status`自己，那是不是`p.public_url()`完全无视我写的逻辑，并严格遵循我在中定义的内容`expects`？这对单元测试有什么帮助？也许我不明白嘲笑的目的。

* * *

更新：

根据@Philip 的建议，我将我的测试更改为这个，消除了对任何 ActiveRecord 恶作剧的需要：

```
 it "should return an URL with the desired security protocol" do
        p = Proposal.new
        p.expects(:id).returns(1)
        p.expects(:status).returns(Proposal::PUBLISHED)
        p.expects(:account).returns(Account.new.stubs(:localhost))

        assert p.public_url.starts_with("https")
        assert p.public_url(true).starts_with("https")
        assert !p.public_url(false).starts_with("https")
    end 
```

我想现在我的问题是，我如何使用一个固定装置（我已经命名`localhost`？）来存根一个帐户。我收到一个错误：`undefined method 'full_domain' for Mocha::Expectation:`但我的夹具定义如下：

```
localhost:
  id: 1
  name: My first account
  full_domain: test.domain.vhost 
```

我设置了固定装置，这样我就可以拥有常用模型的基础知识，以便在我的所有测试中轻松使用。每个测试的标准模型/关系（如果我是手动/与工厂女孩一起进行测试，没有嘲笑，将需要： `Account`，`Subscription`（has `Account`，`SubscriptionPlan`），，`SubscriptionPlan`（`User`属于`Account`），`AccountProperties`（has `Account`），然后是实际的对象我在测试on，属于an`Account`和a `User`on that `Account`，每次测试都有点多。哈哈

* * *

更新 2：

得到它的工作：

```
it "should return an URL with the desired security protocol" do
            p = Proposal.new({:status => Proposal::PUBLISHED})
            p.expects(:id).returns(1)
            p.expects(:account).returns(accounts(:localhost)).times(3)

            assert p.public_url.starts_with?("https")
            assert p.public_url(true).starts_with?("https")
            assert !p.public_url(false).starts_with?("https")
        end 
```

事实证明，您可以访问诸如`accounts`或之类的固定装置`users`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T02:58:46.370

我对它的理解是，您的`p.expects(:public_url)...`三行代码正在删除该方法并返回您告诉它返回的值。所以一旦你完成了，你的方法体就永远不会被调用......存根已经接管了。因此......既然你告诉它也期待一个电话`status`，那永远不会发生。

看看你的代码......我认为你想要存根的是`self.account.full_domain`并且可能`id.to_s`在这一行：

```
url = (https ? "#{ENV['SSL_PROTOCOL']}://" : "http://") + 
            self.account.full_domain + "/view/" + id.to_s 
```

这将跳过任何 AR 关系内容，但仍会在您的方法中执行其余条件。

另外..我会改变你的断言。下面的内容也将匹配非安全 URL，例如“http://https.com/blahblah”，这不是您真正想要的。其他的也可以通过，但也是出于无效的原因。

```
assert p.public_url(true).index("https") != nil 
```

所以也许是这样的：

```
assert p.public_url(true).starts_with("https://") true 
```

或者，获取结果并使用 URI 解析它，然后直接测试方案（可能是矫枉过正的想法）

# sharepoint-2007 - 权限 sharepoint 2007 和 infopath

> ID：14178777
> 
> 赞同：-1
> 
> 时间：2013-01-06T02:46:04.077
> 
> 标签：sharepoint-2007

我正在使用 sharepoint 2007 和 infopath 2007。我创建了一个位于文档库下的表单，您可以从站点操作访问该表单 -> 查看所有内容。

作为共享点管理员，我可以通过转到站点操作来查看页面 -> 单击查看所有可以单击进入目录的内容，然后进入具有“新”按钮（选项卡）的页面以调出表单被归档。

但是我的普通读/写权限用户一旦单击查看所有内容就无法看到目录，以便他们可以从“新”选项卡中获取表单并填写。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T09:46:58.537

您必须确保用户必须对表单所在的列表具有贡献权限。以便他们可以查看并填写表格。

# javascript - 我怎样才能让我的角色对角线移动？

> ID：14178782
> 
> 赞同：3
> 
> 时间：2013-01-06T02:46:44.813
> 
> 标签：javascript, html, math, animation, canvas

我正在尝试使用 HTML5 Canvas 和 Javascript 创建游戏，但在用鼠标单击画布后，我无法弄清楚如何（正确地）使角色沿对角线移动。我确实设法使角色沿对角线移动，但我无法设置速度，以便无论距离多远，它都会以相同的速度移动......你点击得越远，它移动得越快，你点击得越近，它移动得越慢。无论您单击何处，我都希望速度相同。

这是我到目前为止所拥有的：http: [//pastebin.com/hUJBiQHq](http://pastebin.com/hUJBiQHq)

如何在画布上沿对角线移动角色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T04:04:37.393

我实际上做了很多改变。我会试着检查每一个。

我做的第一件事是删除了很多`setTimout`电话。你真的不需要一个单独的移动*和*渲染。我还让它停止检查游戏是否在实际加载后加载。现在，一旦游戏加载完毕，它将开始渲染。

您还可以在`onclick`不需要的超时时间内完成您的事件。我把它移到了外面。更好的方法和未来阅读的主题将在`addEventListener` [这里很好地解释](https://stackoverflow.com/a/6348597/322395)

我在顶部添加的另一件事是 shim，因为[`requestAnimationFrame`](https://developer.mozilla.org/en-US/docs/DOM/window.requestAnimationFrame)使用它会更好`setTimeout`，如果您注意到它是否在不支持动画帧的浏览器上运行，它将在超时时回退。[使用它有很多好处这里解释](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)。

现在讨论手头的问题！

```
 var tx = newX - posX,
     ty = newY - posY, 
```

`tx`是目标 x和`ty`目标 y。它们是从玩家坐标中减去的鼠标坐标。然后你可以使用这些来执行距离检查，像这样，

```
dist = Math.sqrt(tx * tx + ty * ty); 
```

接下来我检查距离是否大于速度，如果是我们需要靠近我们的位置。

```
if (dist >= speed) { 
```

下一部分计算所需的速度。我们取目标 x 和目标 y，然后将它们除以距离，这将使用我们需要行进的像素数量才能到达目标。然后我们将这个数字乘以速度，得到每刻移动的距离。然后，您将这些速度添加到玩家位置以移动玩家（需要更好的解释......我在解释任何数学概念时都很糟糕：？）

```
 velX = (tx / dist) * speed;
    velY = (ty / dist) * speed;
    posX += velX;
    posY += velY; 
```

**[所有工作的现场演示](http://jsfiddle.net/loktar/mRhUH/)**

**完整代码**

```
(function () {
  var requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
  window.requestAnimationFrame = requestAnimationFrame;
})();

var canvas = document.getElementById('game');
var context = canvas.getContext('2d');

canvas.width = canvas.height = 500;

var gameReady = true;
var players = [];
var posX = 350;
var posY = 200;
var newX = 350;
var newY = 200;

// new vars needed for movement
var velX = 0;
var velY = 0;
var speed = 5;

function movePlayer() {

  var tx = newX - posX,
    ty = newY - posY,
    dist = Math.sqrt(tx * tx + ty * ty);

  if (dist >= speed) {
    velX = (tx / dist) * speed;
    velY = (ty / dist) * speed;
    posX += velX;
    posY += velY;
  }
}

function isGameReady() {
  if (gameReady) {
    drawCanvas();
  } else {
    setTimeout(isGameReady, 100);
  }
}

canvas.onmousedown = function (e) {
  newX = e.offsetX; // -33;
  newY = e.offsetY; // - 55.25;
}

function drawCanvas() {
  movePlayer();
  context.clearRect(0, 0, canvas.width, canvas.height);
  context.fillRect(posX, posY, 10, 10);
  requestAnimationFrame(drawCanvas);
}

isGameReady(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T03:16:16.850

您应该测量从起点到终点的距离，然后据此计算出移动的持续时间。

距离测量：

```
function lineDistance( point1, point2 )
{
  var xs = 0;
  var ys = 0;
  xs = point2.x - point1.x;
  xs = xs * xs;
  ys = point2.y - point1.y;
  ys = ys * ys;
  return Math.sqrt( xs + ys );
} 
```

动画的时间是结果*速度。试验`speed`价值，直到你得到你想要的。

# javascript - 过滤一组元素，如果他们有 ID 作为他们的属性

> ID：14178783
> 
> 赞同：1
> 
> 时间：2013-01-06T02:46:50.647
> 
> 标签：javascript, jquery

我有一个`class selector`将返回的内容`20 elements`。从中，只有`5 or 6`将其`id`作为自己的属性。

我感兴趣的领域只有那 5 或 6 个元素。

如何获取带有`ID`属性的元素？这可以包含任何输入、复选框、选择或任何表单元素。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T02:50:14.943

属性选择器就足够了：

```
$(".class-selector[id]") 
```

这将选择所有*具有*该`id`属性的元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T03:34:52.617

您可以使用下面的选择器来避免`id=""`选择。

```
$(":not([id='']).selector-class[id]") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T02:50:07.730

您可以使用 jQuery 属性选择器。

请参阅：[jQuery API](http://api.jquery.com/has-attribute-selector/)

# css - 使用 span 标签的图像下方带有文本的 CSS 超链接不起作用

> ID：14178786
> 
> 赞同：-1
> 
> 时间：2013-01-06T02:47:44.813
> 
> 标签：css, html

我正在创建带有超链接图像和文本的缩略图，并且应该显示鼠标悬停 div 内容，到目前为止，鼠标悬停工作正常，因为我不擅长 CSS。我无法使用 span 获取图像下方的文本。另请参阅 www.ge.com 页面右侧“查看更多故事”下的参考资料，我想在我的网站上复制它，请帮忙。

```
 <a href="" class="nav-holder-link">
                <img width="67" height="51" class="nav-header-image" src="images/img1.jpg" alt="" />
                <span class="nav-holder-text">moving</span>
                <div class="nav-holder-preview">
                    <img width="305" height="100" src="images/img1.jpg" alt="" />
                    <p style="position:absolute;top:55px;padding-left:10px;padding-right:10px">Powered by GE locomotives, the Juice Train is bringing Orange Juice to your breakfast table in one of the most efficient ways possible.</p>
                </div>
                </a>

                <a href="" class="nav-holder-link">
                <img width="67" height="51" class="nav-header-image" src="images/img2.jpg" alt=""/>
                <span class="nav-holder-text">Watch</span>
                <div class="nav-holder-preview">
                    <img width="305" height="100" src="images/img2.jpg" alt="" />
                    <p style="position:absolute;top:55px;padding-left:10px;padding-right:10px">Watch this time lapse as the Tropicana/CSX Juice Train, powered by two 4,400 HP GE </p>
                </div>
                </a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T12:40:58.523

您可以将链接放置在每个隐藏的 div 中......类似于......

```
<div style="width: 25%; float: left;">
  <a hef="link-to-somepage.aspx">
    <img width="67" height="51" class="nav-header-image" src="images/img2.jpg" alt="" onmouseover="ToggleInformationOn(4)" onmouseout="ToggleInformationOff()" /><br />
        <span class="nav-holder-text" onmouseover="ToggleInformationOn(1)" onmouseout="ToggleInformationOff()">Football</span>
  </a>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T04:03:47.980

你的意思是这样？？？

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
<script type="text/vbscript">
' <!--
Function ToggleInformationOn(Id)
    if Id = 1 then
        ToggleInformationOff()
        window.document.getElementById("info4image1").style.display = "block"
    elseif Id = 2 then
        ToggleInformationOff()
        window.document.getElementById("info4image2").style.display = "block"
    elseif Id = 3 then
        ToggleInformationOff()
        window.document.getElementById("info4image3").style.display = "block"
    elseif Id = 4 then
        ToggleInformationOff()
        window.document.getElementById("info4image4").style.display = "block"
    end if
End Function

Function ToggleInformationOff()
    window.document.getElementById("info4image1").style.display = "none"
    window.document.getElementById("info4image2").style.display = "none"
    window.document.getElementById("info4image3").style.display = "none"
    window.document.getElementById("info4image4").style.display = "none"
End Function
' -->
</script>
</head>
<body>
<form id="form1" runat="server">
<div>
    <div style="width: 305px;">
        <div style="width: 25%; float: left;">
            <img width="67" height="51" class="nav-header-image" src="images/img1.jpg" alt="" onmouseover="ToggleInformationOn(1)" onmouseout="ToggleInformationOff()" /><br />
            <span class="nav-holder-text" onmouseover="ToggleInformationOn(1)" onmouseout="ToggleInformationOff()">moving</span>
        </div>
        <div style="width: 25%; float: left;">
            <img width="67" height="51" class="nav-header-image" src="images/img2.jpg" alt="" onmouseover="ToggleInformationOn(2)" onmouseout="ToggleInformationOff()" /><br />
            <span class="nav-holder-text" onmouseover="ToggleInformationOn(1)" onmouseout="ToggleInformationOff()">Watch</span>
        </div>
        <div style="width: 25%; float: left;">
            <img width="67" height="51" class="nav-header-image" src="images/img1.jpg" alt="" onmouseover="ToggleInformationOn(3)" onmouseout="ToggleInformationOff()" /><br />
            <span class="nav-holder-text" onmouseover="ToggleInformationOn(1)" onmouseout="ToggleInformationOff()">Charley</span>
        </div>
        <div style="width: 25%; float: left;">
            <img width="67" height="51" class="nav-header-image" src="images/img2.jpg" alt="" onmouseover="ToggleInformationOn(4)" onmouseout="ToggleInformationOff()" /><br />
            <span class="nav-holder-text" onmouseover="ToggleInformationOn(1)" onmouseout="ToggleInformationOff()">Football</span>
        </div>
    </div>
    <div id="info4image1" class="nav-holder-preview"  style="position: absolute; width: 305px; top: 75px; padding-left: 10px; padding-right: 10px; display: none;">
        <img width="305" height="100" src="images/img1.jpg" alt="" />
        <p style="width: 305px">Powered by GE locomotives, the Juice Train is bringing Orange Juice to your breakfast table in one of the most efficient ways possible.</p>
    </div>
    <div id="info4image2" class="nav-holder-preview"  style="position: absolute; width: 305px; top: 75px; padding-left: 10px; padding-right: 10px; display: none;">
        <img width="305" height="100" src="images/img2.jpg" alt="" />
        <p style="width: 305px">Watch this time lapse as the Tropicana/CSX Juice Train, powered by two 4,400 HP GE </p>
    </div>
    <div id="info4image3" class="nav-holder-preview"  style="position: absolute; width: 305px; top: 75px; padding-left: 10px; padding-right: 10px; display: none;">
        <img width="305" height="100" src="images/img1.jpg" alt="" />
        <p style="width: 305px">Powered by willy wonka's choclate factory, blah blah blah.</p>
    </div>
    <div id="info4image4" class="nav-holder-preview"  style="position: absolute; width: 305px; top: 75px; padding-left: 10px; padding-right: 10px; display: none;">
        <img width="305" height="100" src="images/img2.jpg" alt="" />
        <p style="width: 305px">Watch manchester united play football then have a beer and think about how nice life is when you support a superb football team</p>
    </div>
</div>
</form>
</body>
</html> 
```

# c# - 将以下 XML 导出到数据表

> ID：14178788
> 
> 赞同：0
> 
> 时间：2013-01-06T02:47:58.903
> 
> 标签：c#, xml, datatable, httpwebrequest

我在 c# 中使用 HttpWebRequest 获取以下 XML 字符串。

**我的响应 XML**

```
<response>
    <accounts>
        <account>
            <city>Some City</city>
            <accountId>1234567</accountId>
            <companyName>My Company</companyName>
            <country>My Country</country>
            <email>myemail@yahoo.com</email>
            <enabled>1</enabled>
        </account>
        <account>
            <city>Some Other City</city>
            <accountId>0987654</accountId>
            <companyName>My Other Company</companyName>
            <country>My Country</country>
            <email>myotheremail@yahoo.com</email>
            <enabled>1</enabled>
        </account>
    </accounts>
    <total>2</total>
    <limit>20</limit>
    <offset>0</offset>
</response> 
```

我需要将 XML 导出到具有以下架构的数据表。

```
accountId | companyName      | city            | country    | email                  | enabled
1234567   | My Company       | Some City       | My Country | myemail@yahoo.com      | 1
0987654   | My Other Company | Some Other City | My Country | myotheremail@yahoo.com | 1 
```

这是我第一次使用 XML，我很困惑如何去做。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T03:15:21.490

```
// Forming a DataTable
dt = new DataTable("Accountdata"); // System.Data.DataTable
dt.Columns.Add("Account ID");
dt.Columns.Add("Company Name");
dt.Columns.Add("City");
dt.Columns.Add("Country");
dt.Columns.Add("Email");
dt.Columns.Add("Enabled");

// XML Part
string path = "accounts.xml";
XmlDocument XMLDoc = new XmlDocument(); // System.Xml.XmlDocument
XMLDoc.Load(path);
foreach (XmlNode AccData in XMLDoc.SelectNodes("/response/accounts/account"))
{
    if (AccData["accountId"] == null)
    {
        continue;
    }
    else
    {
        // Fill the DataTable line by line
        int AccountId = Convert.ToInt32(AccData["accountId"].InnerText);
        string CompanyName = AccData["companyName"].InnerText;
        string City = AccData["city"].InnerText;
        string Country = AccData["country"].InnerText;
        string Email = AccData["email"].InnerText;
        int Enabled = Convert.ToInt32(AccData["enabled"].InnerText);
        dt.Rows.Add(AccountId, CompanyName, City, Country, Email, Enabled);
    }
} 
```

应该给你你想要的。现在您有了自己的结构，可以进一步处理数据或将其保存到数据库中

重点使用的类：

*   [MSDN - XmlDocument 类 (System.Xml)](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)
*   [MSDN - 数据表类 (System.Data)](http://msdn.microsoft.com/en-us/library/system.data.datatable.aspx)

# iphone - 如何在本地保存 SKProduct 对象？

> ID：14178790
> 
> 赞同：4
> 
> 时间：2013-01-06T02:48:23.410
> 
> 标签：iphone, objective-c, ipad, cocoa-touch, in-app-purchase

我试图保存一个 SKProduct 对象并使用 NSKeyedArchiver 类对其进行归档，但它会生成一个错误为**-[SKProduct encodeWithCoder:]: unrecognized selector sent to instance**。

```
+ (void)saveProduct:(SKProduct *)product
{
     NSData *data = [NSKeyedArchiver archivedDataWithRootObject:product];
    [[NSUserDefaults standardUserDefaults] setValue:data forKey:PRODUCT];
    [[NSUserDefaults standardUserDefaults] synchronize];
} 
```

有没有办法保存 SKProduct 的实例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T02:55:21.423

您的 SKProduct 类需要符合 NSCoding 协议。

换句话说，您需要在您的 SKProduct 类中填写这两个方法。

*   (void)encodeWithCoder:(NSCoder *)aCoder;
*   (id)initWithCoder:(NSCoder *)aDecoder;

这将获取您的 SKProduct 类并将其分解，以便可以对其进行序列化和反序列化。

# c++ - C++内联模板策略函数

> ID：14178791
> 
> 赞同：0
> 
> 时间：2013-01-06T02:49:24.097
> 
> 标签：c++, templates

我是 C++ 模板的新手，所以请耐心等待。

我想做的是通过使用模板函数在我的类中实现某种策略模式。我认为这将内联策略。

我的理解是这可以通过仿函数来实现，但我不想引入新的类，我只想在我的类中内联策略函数。

可以说我有一堂课`Calculator`。

*计算器.h*

```
#ifndef CALCULATOR_H
#define CALCULATOR_H

class Calculator
{
    public:
        Calculator();
        virtual ~Calculator();
        typedef void (*Strategy)(int param1, int param2);

        void add(int param1, int param2);

        template<class T>
        void doStrategy(T strategy, int param1, int param2);
    protected:
    private:
};

#endif 
```

*计算器.cpp*

```
Calculator::Calculator()
{
    //ctor
}

Calculator::~Calculator()
{
    //dtor
}

void
Calculator::add(int param1, int param2)
{
    std::cout << "Sum " << param1+param2 << std::endl;
}

template<class T>
void
Calculator::doStrategy(T strategy, int param1, int param2)
{
    strategy(param1,param2);
} 
```

*主文件*

```
int main()
{
    Calculator calc = Calculator();

    calc.doStrategy<Calulator::Strategy>(calc.add,2,3);
    return 0;
} 
```

这失败了

```
error: no matching function for call to ‘Calculator::doStrategy(<unresolved overloaded function type>, int, int)’|
note: candidate is:|
note: template<class T> void Calculator::doStrategy(T, int, int)|
note:   template argument deduction/substitution failed:|
note:   cannot convert ‘calc.Calculator::add’ (type ‘&lt;unresolved overloaded function type>’) to type ‘void (*)(int, int)’| 
```

==稍后编辑==

*主文件*

```
typedef void (Calculator::*Strategy)(int, int);
int main()
{
    Calculator calc = Calculator();
    Strategy strategy = &Calculator::add;

    calc.doStrategy<Strategy>(strategy,2,3);
    return 0;
} 
```

仍然失败：

```
undefined reference to `void Calculator::doStrategy<void (Calculator::*)(int, int)>(void (Calculator::*)(int, int), int, int)' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T02:55:52.740

`void add(int param1, int param2)`不是静态方法，因此它是在对象的实例上调用的。

这意味着它不能强制转换`typedef void (*Strategy)(int param1, int param2)`为接受 2 个整数并且不返回任何内容的方法，因为前者`add`具有`this`隐藏在代码中但在现实中存在的隐式。实际上该方法的签名是`void (Calculator::*)(int,int)`. 只需将方法设置为`static`，它应该没问题。

我建议你在[这里](http://www.parashift.com/c++-faq/pointers-to-members.html)详细阅读*指向成员函数的指针是*如何工作的，但由于你使用的是 C++，我真的建议你利用仿函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T04:11:42.757

我的英语很短...只是保持代码...

在计算器.h

```
// this template function use only for calculator's method
// and method must have two arguments.
template<typename Method>
void doStrategy(Method strategy, int param1, int param2)
{
    // argument strategy MUST BE calculator's member function pointer,
    // member function pointer need object, not class
    (this->*strategy)(param1, param2);
} 
```

在 main.cpp

```
Calculator cal;

cal.doStrategy(&calculator::add, 2, 3); 
```

.. 更普遍...

在计算器.h

```
// this template function do not use only for calculator's method
// but method must have two arguments.
template<typename Class, typename Method>
void doStrategy(Class* pObject, Method strategy, int param1, int param2)
{
    // argument strategy MUST BE Class's member function pointer,
    // member function pointer need object, not class
    (pObject->*strategy)(param1, param2);
} 
```

在 main.cpp

```
// definition of another member function...
struct foo
{
    void bar(int param1, param2)
    {
        std::cout << "foo::bar " << param1 - param2 << std::endl;
    }
};

int main()
{
    Calculator cal;
    foo test;

    cal.doStrategy(&cal, &calculator::add, 2, 3);
    cal.doStrategy(&test, &foo::bar, 2, 3);

    foo* just_for_member_function = NULL;

    cal.doStrategy(just_for_member_function, &foo::bar, 5, 1); 

    return 0;
} 
```

更普遍？

嗯下次...

# c# - 如何检查 c# 中的鼠标左键是否按下 ctrl、alt？

> ID：14178800
> 
> 赞同：0
> 
> 时间：2013-01-06T02:50:10.403
> 
> 标签：c#

`Ctrl``Alt`如果在单击鼠标左键时按下，我想检查我的表单 。有什么方法可以检查吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T08:42:18.760

```
void window_MouseLeftButtonDown_1(object sender, MouseEventArgs e)
{
    if (Control.ModifierKeys == Keys.Control && Control.ModifierKeys == Keys.Alt)
    {
        //...
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-06T02:58:10.910

WPF：在 xaml 中将事件添加到您的窗口：

```
MouseLeftButtonDown="window_MouseLeftButtonDown_1" 
```

或在后面的代码中：

```
public MainWindow()
{
   InitializeComponent();

   this.MouseLeftButtonDown += window_MouseLeftButtonDown_1;
} 
```

然后您可以检查回调中的按键

```
private void window_MouseLeftButtonDown_1(object sender, MouseButtonEventArgs e)
{
   if (Keyboard.IsKeyDown(Key.LeftCtrl) && Keyboard.IsKeyDown(Key.LeftAlt))
   {
      // ...
   }
} 
```

# javascript - 按键时间长度

> ID：14178802
> 
> 赞同：0
> 
> 时间：2013-01-06T02:50:38.757
> 
> 标签：javascript

是否可以找出按下一个键的时间？我想在按下 ctrl 键一秒钟后调用一个函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T03:03:30.557

试试这个：

```
var timeout;

document.onkeydown = function() {
    if (!timeout) {
        timeout = window.setTimeout(function() {
            timeout = null;
            alert("pressed for a second");
        }, 1000);
    }
}

document.onkeyup = function() {
    window.clearTimeout(timeout);
} 
```

您只需添加检查是否是按下的 CTRL 键（当然在两个事件处理程序中。）

# php - 使用 PHP OOP 更新博客文章

> ID：14178805
> 
> 赞同：0
> 
> 时间：2013-01-06T02:51:42.563
> 
> 标签：php, sql, pdo, sql-update

我不明白为什么我的博客文章没有被编辑。我有一个类（'blog'），它的方法 update_post() 带有三个参数。这是我的代码（我跳过了连接和其他部分，因为我知道它们正在工作）：

```
<?php
class blog{
function update_post($id, $title, $contents) {
        try {
            $update = $this->db->prepare("UPDATE posts SET title = $title, contents = $contents WHERE id = $id");
            $update->execute();
        }
        catch (PDOException $e) {

        }
    }
}

$post = new blog;

if (isset($_GET['id'])) {
    if (isset($_POST['publish'])) { // If submit button is clicked
        $id = $_GET['id'];
        $title = $_POST['title'];
        $contents = $_POST['contents'];
        $post->update_post($id, $title, $contents);
    }
}
?> 
```

编辑：所以，看来我有多个错误。上面的原始代码来自两个文件，我的 class.blog.php 文件和带有 HTML 表单的页面（'edit_post.php'）。经过一些实验，我发现错误必须出在edit_post页面。我用“if (1 < 2)”替换了第二个“if 语句”，然后我的帖子被更新了。这是 edit_post 页面的大部分内容。

```
<?php
if (isset($_GET['id'])) {
    if (isset($_POST['publicera'])) {
        $id = $_GET['id'];
        $title = $_POST['title'];
        $contents = $_POST['contents'];
        $post->update_post($id, $title, $contents);
    }
?>
<form method="post" action="edit_post.php">
    Titel:<br /> 
    <input type="text" name="title" size="80" value="<?php $post->get_title($_GET['id']); ?>"><br />
    Inlägg:<br /><textarea name="contents" rows="20" cols="80"><?php $post->get_contents($_GET['id']); ?></textarea>
    <br /><input type="submit" name="publicera" value="Publicera!">
</form>

<?php
} else {
$post->show_post_list();
}
?> 
```

编辑#2：解决了！除了错误的 SQL 查询之外，我还需要将表单操作的值修改为`action="edit_post.php?id=<?php echo $_GET['id']; ?>"`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T03:19:47.520

您的查询失败，因为它在语法上无效。这是因为变量`$title, $contents, $id`作为不带引号的字符串直接传递到 PDO 准备语句中。您没有获得准备好的语句的任何安全优势，而且您的查询确实很容易受到 SQL 注入的攻击并且由于未引用变量而被*破坏。*

它应该使用正确绑定的参数：

```
function update_post($id, $title, $contents) {
    try {
        // Bind named parameters
        $update = $this->db->prepare("UPDATE posts SET title = :title, contents = :contents WHERE id = :id");
        // Pass the values in an array to execute()
        $update->execute(array(':title' => $title, ':contents' => $contents, ':id' => $id));
    }
    catch (PDOException $e) {
         // Or handle the error, assuming you have PDO setup in ERRMODE_EXCEPTION
         echo "Error in query!!!";
         print_r($this->db->errorInfo());
    }
} 
```

如果您的应用程序的其余部分也使用像原始错误查询这样的模式（尽管如果它们有效则正确引用），建议您更新它们以使用上述绑定参数。否则，我们必须假设它们也容易受到 SQL 注入的影响。

# javascript - 是否建议缓存仅在 Javascript 中使用两次的对象？

> ID：14178807
> 
> 赞同：2
> 
> 时间：2013-01-06T02:51:55.200
> 
> 标签：javascript, performance, caching

具体来说，是这段代码：

```
var style = el.style;
var x = style.left;
var y = style.top; 
```

比这个更有效：

```
var x = el.style.left;
var y = el.style.top; 
```

我最近和一位同事讨论过这个问题。第一个片段保存了一个 getter 调用，因为它缓存了样式对象，但它创建了一个对样式对象的引用并使用了一个变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T03:01:21.083

这没什么大不了的。

刚刚在jsperf上给你写了个测试看看……并驾齐驱，几乎没有区别（在我的机器上没有统计学上的显着差异）：

[http://jsperf.com/alias-vs-dot-lookup-speed](http://jsperf.com/alias-vs-dot-lookup-speed)

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T03:04:01.510

这个答案取决于你真正关心的问题：

1.  如果性能是您主要关心的问题，那么您必须在所有重要的浏览器中测量这两种情况并评估这些测量的结果。
2.  如果您只是在寻找一个好的经验法则来遵循，那么我认为只为这样的两种用途创建一个新变量可能不值得，除非它是一个高性能敏感的代码片段，在这种情况下规则# 1胜。
3.  如果您正在寻找代码简单性、紧凑性和速度之间的良好平衡，那么我会说要避免这种简单情况下的额外变量和额外的代码行。性能差异不会很大，所以为什么要增加复杂性和更多代码。
4.  如果您正在寻找正确性问题，那么这完全是个人意见，双方都可以争论。我会争辩＃3获胜。当没有其他因素驱动您的决定时，请尽量简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T03:04:27.700

我会将其归类为过早优化，除非您遇到某种性能问题，否则我不会担心您在此处采用哪种方法（尤其是对于像这样小的代码）。如果样式属性已经在内部被 DOM 缓存，我不会感到惊讶，因此每次访问它时甚至可能不会有任何额外的开销。

> 是否建议缓存仅在 JavaScript 中使用两次的对象

回答您的问题 - 如果在访问它时有很多开销，那么通常缓存是一个好主意，例如，它可能是在每次访问时创建的，或者导致对集合进行昂贵的查找。但是，如果它纯粹直接返回对象，那么我看不到任何好处。

如果您在获得精确答案之后，那么获得答案的唯一方法就是对两个版本进行实际基准测试。但是，对于您的特定代码，我会说任何性能差异都可以忽略不计。但是，引入另一个变量*会*为编译器增加不必要的开销（尽管很小）。

# php - 下拉菜单将 č,ć 字符替换为“？”

> ID：14178809
> 
> 赞同：-5
> 
> 时间：2013-01-06T02:52:27.043
> 
> 标签：php, drop-down-menu

这是一个问题，我的下拉菜单女巫正在给我一个来自我的 sql 数据库表的数据，但是像 č,ć 这样的宪章正在被“？”取代 为什么呢？我很困惑，在 php doc 中加密很好。有任何想法吗？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T02:59:22.363

如果您使用 Windows 编辑文件，您的字符集可能是[CP-1251](http://en.wikipedia.org/wiki/Windows-1251)。如果您发送 UTF-8 字符，它们将被损坏。

检查所有这些都使用`UTF-8`字符集：

1.  您的源文件（必须使用正确的字符集保存。根据您的编辑器，此功能可能不可用。使用可让您使用特定字符集保存的编辑器。）
2.  您的 HTTP 内容类型。例如 ：

    ```
    header('Content-type: text/html; charset=utf-8'); 
    ```

3.  您的 HTML 元属性（在您的`<head>`元素中）：

    ```
    <meta charset="UTF-8" /> 
    ```

    或（对于 HTML4）

    ```
    <meta http-equiv="Content-Type" Content="text/html; charset=utf-8"> 
    ```

****编辑****

如果您的问题来自您的数据库（在您的问题标签中没有指定哪一个，但我怀疑它是 MySQL），那么您还必须与[给定的 charset](http://akrabat.com/php/utf8-php-and-mysql/)[建立连接](https://stackoverflow.com/questions/4361459/php-pdo-charset-set-names)。执行此查询：

```
SET NAMES 'utf8' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T02:54:04.390

将内容编码 HTTP 标头设置为 UTF-8。

```
HTML 4.01: <meta http-equiv="content-type" content="text/html; charset=UTF-8">
HTML5: <meta charset="UTF-8"> 
```

# macos - 如何回到默认的clang？

> ID：14178813
> 
> 赞同：0
> 
> 时间：2013-01-06T02:53:11.273
> 
> 标签：macos, osx-lion, clang, xcode4.5, macports

我已经安装`clang_select`并使用`port select clang mp-clang-3.3`了一段时间，但现在安装版本似乎崩溃了。

因此，我想回到使用原始`/usr/bin/clang`命令。我怎样才能做到这一点？

我试过`sudo port select clang none`了，但没有用。（如果相关，我有 XCode 4.5。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T03:25:33.447

首先，确保您已经安装了`Command Line Tools`Xcode 4.5 ( `Xcode -> Preferences -> Downloads -> Components`) 的组件。这将确保有一个`/usr/bin/clang`安装。然后，要么使用该绝对路径，要么修改你的 shell `$PATH`，以便在你安装 MacPorts`/usr/bin`之前`/opt/local/bin`或任何地方出现，`clang`或者，如果你根本不打算使用 MacPorts `clang`，你可以使用`port uninstall clang`你安装的任何特定端口来删除它。

# mysql - MySQL 搜索特定术语的 X 行数

> ID：14178814
> 
> 赞同：1
> 
> 时间：2013-01-06T02:53:38.357
> 
> 标签：mysql, search, limit

我有一个超过 300 行的数据库。

由于各种原因，我只想一次搜索 21 行的特定术语和不同的起始索引点。

我在名为 的列中查询“禁止的广告” `search_terms`。

当我使用下面的查询时，它会搜索所有 300 行“禁止广告”，而不是仅搜索 21 行。

```
SELECT `rating_score`
FROM archived_videos
WHERE search_terms='banned commercials'
ORDER BY `rating_score` DESC
LIMIT 0,21 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T02:56:00.033

尝试使用这个

```
SELECT rating_score FROM archived_videos WHERE search_terms='banned commercials' ORDER BY rating_score DESC LIMIT 21 
```

将其限制为指定 21 会将结果限制为前 21

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T03:03:48.543

如果要搜索排名前 21 的评级行，可以使用子选择来执行此操作

```
SELECT t.`rating_score`
from (select *
      FROM archived_videos
      ORDER BY `rating_score` DESC
      LIMIT 0,21) t
WHERE t.search_terms='banned commercials' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T03:26:26.417

我从您的问题中得知您要搜索 21 行的块，而不是将结果集限制为 21 行。LIMIT 子句限制结果，而不是正在搜索的记录集。要限制记录，您需要在 where 子句中添加一些内容。这是什么取决于您的表格的内容。如果您有一个从 1 到 300 对行进行编号的序列列，您可以说“其中序列>= 1 和序列 < 21”，并根据需要调整数字。

另一种方法是添加一个 select 子句：

```
select iif (search_terms="banned", 1, 0) as flag
into temp_table
from archived_videos
limit 21

select * from temp_table where flag = 1 
```

您可以使用子选择将这两个选择组合为一个。

# javascript - 如何在页面加载和按钮的单击时根据数字隐藏 DIV？

> ID：14178820
> 
> 赞同：1
> 
> 时间：2013-01-06T02:54:05.983
> 
> 标签：javascript, jquery, html, css

我有一个生成数字的跨度，如果它为 0，我想隐藏/显示两个 div，如果它有其他任何东西，则相反。

首先它需要在页面加载时应用，然后在单击特定按钮时应用。

HTML：

```
<button class="button">Add to cart</button>
<span class="catInStock">0</span>

 <div id="slave">SOLD OUT</div>
 <div id="slave-1">Some form</div> 
```

代码：

```
var n = $("span.catInStock").text();

if (n == 0) {
     $("div#slave").hide();
     $("div#slave-1").show();
   } else {
     $("div#slave").show();
     $("div#slave-1").hide();
   }    

  $('.button').click(function () {
   if (n == 0) {
     $("div#slave").hide();
     $("div#slave-1").show();
   } else {
     $("div#slave").show();
     $("div#slave-1").hide();
   }
 }); 
```

我不认为运行两次是最好的选择，更苗条的东西会有意义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T03:02:04.020

可以`toggle()`与布尔参数一起使用来隐藏/显示

```
function displaySlaves( ){
     var n = $("span.catInStock").text();
     $("div#slave").toggle( n=='0');
     $("div#slave-1").hide( n !='0' );
}
/* page load*/
$(function(){  
   displaySlaves( );
   $('.button').click(displaySlaves)
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T03:59:40.993

```
$('.button').bind('load click', function () {
   if (n == 0) {
     $("div#slave").hide();
     $("div#slave-1").show();
   } else {
     $("div#slave").show();
     $("div#slave-1").hide();
   }
}); 
```

# core-data - 核心数据子表视图不刷新

> ID：14178824
> 
> 赞同：0
> 
> 时间：2013-01-06T02:54:50.197
> 
> 标签：core-data, nsfetchedresultscontroller, nsmanagedobjectcontext

我使用核心数据建立了一对多（成员）的关系。我可以成功添加和删除部队。

创建部队后，当我从表格视图中单击部队时，它会加载该部队成员的新表。我可以成功地将正确的部队添加到成员表中作为父级。使用 NSLog，我可以看到该成员已添加。但是，成员表不会重新加载，新成员不会保存，直到我返回并添加新部队。似乎上下文实际保存的唯一时间是添加新部队时。添加新部队时，所有添加的成员都会出现在其正确部队下。完全关闭并重新启动应用程序不会强制保存成员。

我尝试将这两个都添加到插入方法中：

```
[self.managedObjectContext save:nil];
[self.managedObjectContext refreshObject:newManagedObject mergeChanges:YES]; 
```

我已将此添加到 controllerDidChangeContent

```
 [self.managedObjectContext save:nil];
 [self.tableView reloadData];
 [[NSNotificationCenter defaultCenter] postNotificationName:@"ContextDidSave" object:self.managedObjectContext]; 
```

我已将此添加到 contextDidSave 方法中：

```
[self.managedObjectContext mergeChangesFromContextDidSaveNotification:notification]; 
```

我已将此添加到 viewWillAppear 方法中：

```
 [self.tableView reloadData]; 
```

这对于 viewDidLoad 方法：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(contextDidSave:)
                                             name:@"ContextDidSave" object:nil]; 
```

我确信有一些东西丢失或没有保存的原因。我也使用了所有的代表。

```
<NSFetchedResultsControllerDelegate, UINavigationControllerDelegate, UITableViewDelegate, UITableViewDataSource> 
```

我已经尝试了可以​​在 stackoverflow 中找到的所有示例或建议。我希望有人有新的建议。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T15:02:12.583

从我的评论

您是否为您设置了委托`NSFetchedResultsController`？

`fetchedController.delegate = self;`

# php - 如何在函数中使用常量参数，而不必在调用时从其他函数传递它

> ID：14178826
> 
> 赞同：0
> 
> 时间：2013-01-06T02:55:16.097
> 
> 标签：php, function, arguments

我有一个有 3 个参数的函数，一个总是相同的，即一个数据库连接。

```
function threeArgs($one,$two,$dbh){
       // some code here
} 
```

这是我要传递的常量参数。

```
$dbh = new PDO(..............); 
```

我正在尝试从另一个函数调用 threeArgs() 函数，但我只想传递 2 个参数而不是 3 个，例如：

```
threeArgs($one,$two); 
```

我可以说这一定很简单，或者我做错了，但我不确定我需要搜索什么术语。

**更新**

我已将 db 连接放在一个函数中，然后从 threeArgs() 函数中调用它。例如;

```
function dbconnection(){
     $dbh = //connect to dataase
    return $dbh;
 } 
```

这是我在threeArgs() 中添加的内容。

```
function threeArgs($one, $two){
    dbconnection();
} 
```

有一个更好的方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T02:59:59.723

[将其`global`](http://php.net/manual/en/language.variables.scope.php#example-99)存储在[变量](http://php.net/manual/en/language.variables.scope.php#example-99)中：

```
$dbh = new POD();

function threeArgs ( $one, $two ) {
     global $dbh;
     // use  $dbh here...
} 
```

* * *

如果你不喜欢使用`global`变量，你可以使用[一个来`static`代替](http://php.net/manual/en/language.variables.scope.php#example-103)：

```
function threeArgs ( $one, $two ) {
     static $dbh = NULL;
     if ( ! $dbh ) $dbh = new POD();
     // use  $dbh here...
} 
```

# java - 用于滑动拼图求解器的自动移动 JButton 的多线程

> ID：14178830
> 
> 赞同：0
> 
> 时间：2013-01-06T02:55:56.577
> 
> 标签：java, multithreading, swing, artificial-intelligence

我使用 java 创建了一个滑动拼图程序。然后，我继续实现滑动解谜程序。问题是当我点击“播放结果”按钮时，程序是自动滑动有效方块到目标状态，就像这个[n-puzzle-solver.appspot.com](http://n-puzzle-solver.appspot.com)一样。我使用带有二维数组的 JButton 创建了这个游戏（btnTiles[0][0]）。我可以用多线程实现它吗？如果可以，请教我一个示例或给我一个链接，用于自动移动 JButton 的多线程。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T03:29:12.610

您可以利用[此处](https://stackoverflow.com/a/3078354/230513)显示的方法，该方法在`javax.swing.Timer`. 该示例在每个间隔移动所有图块，但您可以只在`List`.

![图片](../Images/cb1cca45fbbf0769f3c0be86a6fe15e9.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-06T03:36:26.303

> 自动移动 JButtons。

错误的做法 - 不理会按钮，只需更改图标（用空白交换）

# ruby - Ruby 中的独立问号有什么作用？

> ID：14178831
> 
> 赞同：0
> 
> 时间：2013-01-06T02:55:57.803
> 
> 标签：ruby

> **可能重复：**
> [如何在 Ruby 中使用条件运算符 (? :)？](https://stackoverflow.com/questions/4252936/how-do-i-use-the-conditional-operator-in-ruby)

我正在自学 Ruby 并通过 RubyMonk 练习。我遇到了这段代码，这让我很困惑：

```
def calculate(*arguments)
  options = arguments[-1].is_a?(Hash) ? arguments.pop : {}
  options[:add] = true if options.empty?
  return add(*arguments) if options[:add]
  return subtract(*arguments) if options[:subtract]
end 
```

请注意，加法和减法是加/减其参数的现有函数，其长度可能会有所不同。

计算应该像这样工作

```
 calculate(1,2,3,4,5,add: true) => 10
 calculate(10,3,4, subtract: true) => 3 
```

我的问题是有人可以解释这条线发生了什么：

```
options = arguments[-1].is_a?(Hash) ? arguments.pop : {} 
```

也就是说，一个独立的问号到底有什么作用？另外，结肠有什么作用？

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T02:57:55.250

```
options = arguments[-1].is_a?(Hash) ? arguments.pop : {} 
```

是三元运算符语句的一部分。这是一种在单行上执行 if 条件的方法。

```
(condition) ? then : else. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T03:01:03.440

这是表达 if-then-else 的另一种方式。例如

```
options = arguments[-1].is_a?(Hash) ? arguments.pop : {} 
```

完全一样

```
if arguments[-1].is_a?(Hash)
  options = arguments.pop
else
  options = {}
end 
```

# java - 有没有办法在 Eclipse 中自动删除尾随空格？

> ID：14178839
> 
> 赞同：23
> 
> 时间：2013-01-06T02:57:05.107
> 
> 标签：java

有没有办法在 Eclipse 中自动删除尾随空格？

我看到 Source 中有很好的功能，例如正确缩进和格式。但他们不会删除尾随空格。

谢谢

PS：您还使用了哪些其他此类功能来使代码更好？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-06T03:00:32.113

至少它可以作为保存操作使用。（我在格式化程序选项下看不到它。）

转到窗口/首选项，Java/编辑器/保存操作。勾选“其他操作”并单击配置。在“代码组织”选项卡中，第一个选项是“删除尾随空格”。

请注意，这将从 Java 文件中删除*所有*尾随空格 - 而不仅仅是您接触过的那些。如果您正在与*不*删除尾随空格的人一起工作，那么就以后进行差异而言，这可能会很混乱。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-01-06T03:25:51.317

您可以通过使用带有“查找/替换”对话框的正则表达式轻松删除单个文件中的所有尾随空格。在“*查找：* ”框中输入**[ \t]+$并将“***替换为：* ”框留空。检查“*正则表达式*”选项，然后单击“*全部替换*”

 **** * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-07T12:36:24.260

还有来自[http://andrei.gmxhome.de/eclipse/](http://andrei.gmxhome.de/eclipse/)的插件“AnyEdit” 。此工具会在保存时删除每种文件类型中的空格。***

# api - Oauth 多租户：应该为每个用户或租户生成访问令牌吗？

> ID：14178840
> 
> 赞同：0
> 
> 时间：2013-01-06T02:57:07.327
> 
> 标签：api, oauth, access-token, oauth-provider

我们有一个在多租户方案上运行的平台。因此，我们在场景中将租户作为父级，将用户作为子级。我们正在使用 Oauth 身份验证方案在该平台上开发一个 Rest API（我们现在有 SOAP 服务）。

我很想知道我们将如何在第三方将开发的每个应用程序上生成访问令牌。是每个用户还是每个租户？我的意思是，如果 User2 在 Tenant1 上授予对 App-A 的访问权限，那么这是否意味着如果 User1 希望使用 App-A，那么授予访问权限对话框不会提示他？两个用户都居住在同一个租户上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T08:53:29.777

这取决于您的具体用例，但我会将其与输入的凭据联系起来。因此，如果用户 1 和用户 2 有不同的不同帐户，并且使用了自己的登录名/密码（或其他），那么他们应该有自己的访问令牌。原因是每个用户正在使用的应用程序实例最终都需要一个访问令牌 - 因此在您的示例中 User2 无论如何都必须经历 oAuth 舞蹈。

另一个更普遍的原因是，当您最终为不同的用户授予不同的权利时，它可以保护您的未来。

希望有帮助。

# javascript - 如何强制 Canvas 事件处理程序完成更新

> ID：14178841
> 
> 赞同：2
> 
> 时间：2013-01-06T02:57:21.617
> 
> 标签：javascript, html, event-handling, html5-canvas, kineticjs

我正在尝试使用 HTLM 5 Canvas KineticJS 构建一个包含列表的框。我想给盒子一个手柄来拖动它，我也希望能够拖动列表项。我已将其实现为 Kinetic.Group。下面我的精简示例中的列表项是小的 Kinetic.Text 对象。当我完成拖动对象时，我无法更新对象的属性。在 Chrome 或 Firefox 中运行它，当我拖动其中一个文本对象框并将其放下时，我的 dragend 事件处理程序将其从组中删除，因此它应该从屏幕上消失。相反，它一直可见，直到我将鼠标放在屏幕上的某个元素上，然后它才会消失。

我尝试添加其他事件处理程序，调用 drawhit 和 drawscene 函数，并使用模拟函数生成模拟鼠标点击。这些确实有一些效果，但我找不到任何组合可以在 dragend 处理程序结束时将所有内容保持在正确的状态。例如，在某些情况下，框的拖动手柄不起作用。在我的代码的其他版本中，也会出现类似的奇怪效果，所有这些似乎都需要额外的鼠标点击才能使对象完成更新。

我在 Canvas 源代码中查看了一些会强制重绘的功能，并在线搜索，但没有发现任何似乎用于该目的的功能。理想情况下，Canvas 会自动执行此操作，所以我怀疑我错过了一些明显的步骤。任何想法可能是什么？

这是我的javascript：

```
var stage = new Kinetic.Stage({
    container: 'container',
    width: 500,
    height: 200
});

var layer = new Kinetic.Layer();

var group = new Kinetic.Group({
    x: 50,
    y: 50
});

var box = new Kinetic.Polygon({
    points: [0, 20, 0, 100, 200, 100, 200, 0, 20, 0],
    stroke: 'blue',
    strokeWidth: 2
});
group.add(box);     

var handle = new Kinetic.Polygon({
    points: [0, 0, 0, 20, 20, 0],
    fill: 'blue',
    stroke: 'blue',
    strokeWidth: 2
});
group.add(handle);

handle.on('mouseover', function() {
    group.setDraggable(true);
    document.body.style.cursor = 'pointer';
    });

handle.on('mouseout', function() {
    group.setDraggable(false);
    document.body.style.cursor = 'default';
});     

var colors = ['red', 'orange', 'yellow'];
for(var n = 0; n < 3; n++) {
    (function() {
        var i = n;
        var item = new Kinetic.Text({
            x: 20 + i * 25,
            y: 20,
            width: 20,
            height: 10,
            fill: colors[i],
            draggable: true,
            id: i,
        });

        group.add(item);

        item.on('dragend', function() {
            console.log('item dragend');
            id = this.getId();
            var children = group.getChildren();
            var len = children.length;
            for(var i = 2; i < len; i++) {
                if (id == children[i].getId()) {
                    children.splice(i,1);
                    break;
                };
            }
        });
    })();
};

layer.add(group);
stage.add(layer); 
```

我使用这个 HTML 来运行它：

```
<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
    </style>
  </head>
  <body>
    <div id="container"></div>
      <script src="http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/v4.2.0/kinetic-v4.2.0.js"></script>    
    <script src="/Users/tsnichols/Documents/workspace/WebScheduler/listgroup.js"></script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:01:54.927

是的，stage.draw() 是最简单的解决方案，但如果你有多个图层并且使用一堆动画，你应该使用 layer.draw() 来绘制一个图层，以提高性能。

# matlab - Matlab矩阵乘法忽略nans？

> ID：14178843
> 
> 赞同：2
> 
> 时间：2013-01-06T02:57:52.513
> 
> 标签：matlab, matrix, nan

我有两个矩阵`A`，`B`我想将它们相乘，但它们包含`nan`s。

默认的乘法将`nan`结果的整个列放下，其中`nan`数据中甚至有一个。我想忽略它们，就像`nansum`/ `nanmean`etc 一样。换句话说，而不是计算

```
 sum( A(i,j) * B(j,k) ) 
```

我希望它使用`nansum`。

我想这可以通过替换`nan`为`0`，然后相乘来实现，但是这样做的`nansum`目的是避免这种情况，对吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T03:18:07.510

乘法导致`NaN`s 的原因是没有一种真正的方法可以处理它们。如果在您的情况下，它们应该被零替换，那么最容易编写

```
A(isnan(A)) = 0; 
```

在运行乘法之前。我建议不要重写矩阵乘法，因为您不会从自己的代码中获得与内置矩阵代数相似的性能。

`nansum`，特别是`nanmean`etc 是统计工具箱的功能，其中`NaN`s 不是简单地被零替换，而是实际上从计算中删除，因为在统计的上下文中，`NaN`用于指示丢失的数据点。那里没有`nanmult`，因为在统计学中，你不经常矩阵乘法，如果你这样做（例如在回归中），向量中缺少一个观察值通常意味着你会想要扔掉整个无论如何，行/列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-03T16:18:35.383

```
import numpy as np

#find the dimensions of your arrays
sza=a.shape
szb=b.shape

#calculate by using nested loops rows of 'a' times columns of 'b'
c=np.zeros(sza[0],szb[1])
for i in range(0, sza[0]):
  for k in range(0, szb[1]):
    c[i, k]=np.nansum(a[i, ]*b[:, k]) 
```

# java - ComponentAdapter 中 componentResized 方法的任何替代方法

> ID：14178850
> 
> 赞同：2
> 
> 时间：2013-01-06T02:58:54.703
> 
> 标签：java, swing, events, jframe, componentlistener

当我实现下面的代码时，仅当用户在调整框架大小后释放鼠标时才会调用该方法。我想要一个在用户调整框架大小时连续调用的方法。我能做些什么呢？

```
frame.addComponentListener(new ComponentAdapter() {
        public void componentResized(ComponentEvent comp) {
        System.out.println("Resized");
        }
      }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T03:16:14.000

```
//frame.addComponentListener(...
frame.getContentPane().addComponentListener(... 
```

# symfony - 多个子域请求一个 Symfony 应用程序。这行得通吗？

> ID：14178851
> 
> 赞同：1
> 
> 时间：2013-01-06T02:59:01.373
> 
> 标签：symfony

我有一个“这行得通吗？” 问题。

我正在构建一个多租户应用程序。将配置 DNS 和 Apache，以便多个子域指向该站点。

站点
1.example.com站点2.example.com 站点
3.example.com

ETC ...

我将使用 $request->getHost() 返回的值根据子域传递不同的内容。

对于大多数请求，我将从主机名派生和验证整数 site_id 值。这将在数​​据库查询中用于检索和交付适当的内容。

我还将使用 {% render url(route) %} 使用 twig 子模板，其中子模板路由的操作将根据主机提供自定义内容。它可能会呈现一个具有使用主机名构造的名称的唯一模板。

我希望用户能够在“站点”之间切换而无需再次登录。我可以将 PHP 会话 cookie 和 Symfony 的“记住我”cookie 的域设置为 .example.com（注意点）。

我已经用这个想法做了一些简单的测试，它似乎有效。有没有我忘记的问题或陷阱？我不想做没有真正支持的事情。我对缓存等事情有点紧张。Symfony 对我访问具有多个主机名的站点感到满意吗？

我启用了 Symfony 反向代理，尽管 app/cache/prod/http_cache 似乎总是为空，但它似乎仍然可以正常工作，所以我猜缓存并没有真正起作用。我猜那是一个不同的主题。我需要了解更多关于缓存的信息，但总的来说，Symfony 反向代理会对此感到满意吗？缓存是基于完整 URL 还是仅基于路由？

我知道有新的按主机名路由功能。我认为这对我没有用处，因为我希望无论主机如何都可以执行相同的操作方法。

我*想*我很好，但在我承诺之前，我真的很感激任何评论。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:51:11.610

我意识到这对你来说可能已经太晚了，但我想我还是会插话的。

简短的回答，我在生产中使用了一个与您基于 symfony2.1 描述的非常相似的网站，并且效果很好。

长答案，首先要注意：它还没有使用太多的 symfony2 缓存系统，所以正如你所描述的那样，那里可能存在陷阱。正如他们所说，计算机科学实际上只有两个难题；命名事物、缓存失效和一个错误。

您提到的各种子系统似乎都很明智，并且与我所做的类似。我会将所有与“我是 site1 还是 site2？”相关的代码集中到一个服务中，然后您可以将其传递给例如模板帮助程序或其他自定义服务。

设置防火墙。*将 .remember_me.cookie 和 framework.security.cookie_domain命名*为 .example.com 将允许您跨所有域无缝登录（同样重要的是，注销），例如对于那些被允许查看 site1 和 site2 的用户。这里的一个问题是，正确实现 cookie 安全性的浏览器将需要在您的域名中至少有一个点（不包括前导点）......所以如果您的开发机器是 localhost.localdomain 并且您正在尝试在 .localdomain 上设置 cookie ，你可能会有点摸不着头脑。（我对自己不知道这一点感到非常恼火。）

正如您所提到的，按主机名路由在这种情况下并不是很有用。尽管您可以想象将主机名作为参数传递给您的所有控制器操作，但如果您对每个请求都执行此操作，则这是反 DRY。最好创建一个 kernel.request 监听器。

其他随机提示：

```
$router->getContext()->setHost( 'site2.example.com' );
$url = $router->generate( 'homepage', array(), true ); 
```

将允许您生成指向其他子域的链接。

希望一切都对你有用！

# namespaces - Spring3命名空间错误

> ID：14178858
> 
> 赞同：0
> 
> 时间：2013-01-06T03:00:22.207
> 
> 标签：namespaces, spring-3

我是 Spring 3 的新手。我不知道如何在 Spring 中修复这个命名空间错误`security.xml`。实际上我想在 bean 周围添加配置文件代码，所以每当我添加

```
<beans:beans profile="dev"> 
```

在任何 bean 周围，它都会引发以下错误： **在此行找到多个注释：-cvc-complex-type.2.4.a：发现以元素“context：component-scan”开头的无效内容。'{"http://www.springframework.org/schema/beans":beans}' 之一是预期的。- 由 org.springframework.transaction.interceptor.TransactionInterceptor.invoke(org.aopalliance.intercept.MethodInvocation) 建议**

这是 .xml 的代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
                    http://www.springframework.org/schema/beans/spring-beans.xsd
                    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
                    http://www.springframework.org/schema/security 
                    http://www.springframework.org/schema/security/spring-security-3.1.xsd">

   <beans:beans profile="dev">  **( This is code that generates error)**
    <beans:bean id="loggerListener" class="org.springframework.security.authentication.event.LoggerListener"/>
    </beans:bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-15T18:36:03.710

如果我们在任何嵌套标签下方放置一个声明，我们将得到异常

看看这篇文章

[http://gordondickens.com/wordpress/2012/06/12/spring-3-1-environment-profiles/](http://gordondickens.com/wordpress/2012/06/12/spring-3-1-environment-profiles/)

还要确保 beans 节点是文件 [http://gordondickens.com/wordpress/2012/06/12/spring-3-1-environment-profiles/中的最后一个元素](http://gordondickens.com/wordpress/2012/06/12/spring-3-1-environment-profiles/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T07:36:13.280

用这个

```
<beans:beans xmlns="http://www.springframework.org/schema/security"
  xmlns:beans="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
           http://www.springframework.org/schema/security
           http://www.springframework.org/schema/security/spring-security-3.1xsd">

   <beans:beans profile="dev">  
    <beans:bean id="loggerListener" class="org.springframework.security.authentication.event.LoggerListener"/>
    </beans:bean>

</beans> 
```

# php - PHP 等待 cURL 的正确响应

> ID：14178859
> 
> 赞同：2
> 
> 时间：2013-01-06T03:00:24.777
> 
> 标签：php, curl, sleep

我不知道怎么做这个。有一个 XML Api 服务器，我正在使用 cURL 获取内容；它工作正常。现在我必须打电话给`creditCardPreprocessors`国家。它也有“进行中状态”，PHP 应该等到进程完成。我已经尝试过睡眠和其他方式，但我做不到。这是我尝试过的简化示例变体：

```
function process_state($xml){
  if($result = request($xml)){
  // It'll return NULL on bad state for example
    return $result;
  }
  sleep(3);
  process_state($xml);
} 
```

我知道，这可能是一个无限循环，但我尝试添加计数以在达到 5 时退出；它不会退出，服务器将挂起，几分钟内我将出现 500 个错误，并且该虚拟主机无法访问 Apache。

编辑：

另一个例子

```
$i = 0;
$card_state = false;

// We're gona assume now the request() turns back NULL if card state is processing TRUE if it's done

while(!$card_state && $i < 10){
    $i++;
    if($result = request('XML STUFF')){
        $card_state = $result;
        break;
    }
    sleep(2);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T03:13:42.960

您定义的递归方法可能会导致问题，具体取决于您从服务器返回的响应时间。我想你会想在这里使用一个while循环。它使请求保持序列化。

```
$returnable_responses = array('code1','code2','code3'); // the array of responses that you want the function to stop after receiving
$max_number_of_calls = 5; // or some number

$iterator = 0;
$result = NULL;
while(!in_array($result,$returnable_responses) && ($iterator < $max_number_of_calls)) {
    $result = request($xml);
    $iterator++; 
} 
```

# date - 批处理文件将具有相同字符串的文件移动到具有该字符串名称的另一个文件夹中

> ID：14178866
> 
> 赞同：-1
> 
> 时间：2013-01-06T03:01:18.060
> 
> 标签：date, batch-file, directory, filenames

我使用的是 Windows 7 企业版，过去 365 天每天大约有 20 个文件需要排序。

所有文件都在同一个目录中。每个文件名还包含文件的创建日期。日期采用格式`MM-DD-YYY`并从文件名的第 29 个字符开始。这些文件具有`.csv`扩展名。

我需要创建一个批处理文件，将所有具有相同日期的文件移动到它们自己的文件夹中，然后移动到我电脑上的另一个驱动器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T04:25:13.703

```
@echo off
setlocal EnableDelayedExpansion
for %%a in (*.csv) do (
   set fileName=%%~a
   set datePart=!fileName:~28,9!
   if not exist "D:\!datePart!" md "D:\!datePart!"
   move "%%a" "D:\!datePart!"
) 
```

此脚本提取每个文件名的日期部分，并将其用作要将文件移动到的文件夹的名称。如果文件夹不存在，则创建它，然后将文件移动到该文件夹​​。

如所写，脚本遍历*当前*目录`.csv`中的文件。这是由循环中的掩码指定的：. 您可以更改掩码以包含特定的处理路径，例如.*`for``*.csv``C:\path\to\*.csv`*

 *目标驱动器也被硬编码并假定为`D:`. 如果您需要使用不同的驱动器，请更改脚本的相应条目。

可以通过使用以下任一语法从命令提示符调用命令的内置帮助来获取此脚本中使用的每个命令的详细信息：

```
*command* /?
help *command* 
```*

# html - 相对路径在 apache2 Web 服务器上不起作用

> ID：14178868
> 
> 赞同：1
> 
> 时间：2013-01-06T03:01:27.853
> 
> 标签：html, apache, debian, relative-path

晚上好！

我对 Linux 和 Apache 还很陌生，但相对路径有问题。我在 Mac 上本地开发了我的网站，使用相对路径，一切正常。我的文件位于包含以下子文件夹的文件夹中：

> *   网站
> *   css
> *   图片

现在我正在尝试在运行 Debian 的 Linux 服务器上建立我的网站。几乎一切都很完美，我可以通过互联网访问我的 index.html。但显然，相对路径不起作用，因为我将图像、css 文件和其他站点放在上面的子文件夹中，我尝试使用相对路径访问它们，但实际上它们不起作用。当我尝试访问站点文件夹中的另一个站点（about.html）时，我收到了这个错误：

> 404 Not Found 在此服务器上未找到请求的 URL /sites/about.html。

例如，从我的 index.html 中，我尝试使用以下路径访问我的 css 文件：

```
../css/standard.css 
```

我还实现了外部路径，这些都正常工作。我真的很感激任何帮助或线索。非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T15:48:58.570

我认为错误在于路径：

如果 index.html 位于存储文件夹“站点、css 等”的文件夹中，则必须使用

```
css/standard.css 
```

代替

```
../css/standard.css 
```

# c++ - Native/CLI C++：如何从矢量转换 列出

> ID：14178873
> 
> 赞同：2
> 
> 时间：2013-01-06T03:03:03.110
> 
> 标签：c++, c++-cli, mixed-mode

我正在用 C++ 编写本机/CLI DLL。我最终会从 C# 代码（我更熟悉）调用 DLL，但我正在尝试使用 CLI 包装器来包装我的 Native C++ 类。

所以我的问题是，我将 std::vector 转换为 List 类的最佳方法是什么？

这些类大多很简单，最复杂的看起来像这样：

```
class SecurityPrincipal
{
public:
    wstring distinguishedName;
    SECURITYPRINCIPAL_NODE_TYPE NodeType;
    vector<LDAPAttribute> Attributes;
    vector<SecurityPrincipal> Nodes;
} 
```

老实说，我什至无法`vector<wstring>`进入 a `List<String>`。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T03:21:23.167

我不知道 C++ 中包含任何允许该级别转换的标准算法/函数。但是有什么理由`for`循环不起作用吗？以下为脑补。

```
typedef System::Collections::Generic::List<class1_cli> MyList;
typedef std::vector<class1_native> MyVector;

MyList^ NativeToManaged(MyVector& v) {
    MyList^ result = gcnew MyList();
    if (result != nullptr) {
        for (MyVector::iterator i = v.begin(); i != v.end(); ++i) {
            class1_native& nativeValue = *i;
            result.Add(gcnew class1_cli(nativeValue));
        }
    }
    return result;
} 
```

# java - 什么是显式构造函数访问修饰符？

> ID：14178875
> 
> 赞同：0
> 
> 时间：2013-01-06T03:03:45.217
> 
> 标签：java, constructor

假设有一个类 A。以下两个访问修饰符中哪一个是构造函数的默认访问修饰符？

```
public A()
{
    private A()
    {
         //some code....
    }

    protected A()
    {
         //some code....
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T03:05:32.820

它与函数和变量的修饰符的含义完全相同，只是现在它指的是谁可以构造类的实例。

`public`- 任何人都可以从代码中的任何位置调用构造函数。

`private`- 无法从类外部构造 - 通常用于控制谁可以使用静态成员工厂方法来实例化类。[在这里](https://stackoverflow.com/a/929045/1520364)找到的一个很好的应用示例

`protected`- 像`private`，但现在涉及继承 - 可以使用任何子类工厂方法，因为现在它们可以调用此构造函数。

正如@dasblinkenlight 提到的，如果您**不指定**任何修饰符，则它们*默认*为[package-private](https://stackoverflow.com/questions/4668922/arent-java-constructors-public-by-default)，这意味着它们仅对包内的类可见。

# java - 索引超出范围异常

> ID：14178881
> 
> 赞同：1
> 
> 时间：2013-01-06T03:04:33.113
> 
> 标签：java, android, oop, spinner

我正在尝试为 android 微调器实现自定义微调器样式。当我在微调器中选择一个项目时，它没有显示在微调器（所选项目）上时出现问题。我的代码中有几个问题。这是日志猫

```
01-06 08:21:38.254: E/AndroidRuntime(733): FATAL EXCEPTION: main
01-06 08:21:38.254: E/AndroidRuntime(733): java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0
01-06 08:21:38.254: E/AndroidRuntime(733):  at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
01-06 08:21:38.254: E/AndroidRuntime(733):  at java.util.ArrayList.get(ArrayList.java:304)
01-06 08:21:38.254: E/AndroidRuntime(733):  at com.xx.x.Page5SubActivity$MyAdapter.getCustomView(Page5SubActivity.java:487)
01-06 08:21:38.254: E/AndroidRuntime(733):  at com.xx.x.Page5SubActivity$MyAdapter.getView(Page5SubActivity.java:479)
01-06 08:21:38.254: E/AndroidRuntime(733):  at android.widget.AbsSpinner.onMeasure(AbsSpinner.java:192)
01-06 08:21:38.254: E/AndroidRuntime(733):  at android.widget.Spinner.onMeasure(Spinner.java:285)
01-06 08:21:38.254: E/AndroidRuntime(733):  at android.view.View.measure(View.java:12723)
01-06 08:21:38.254: E/AndroidRuntime(733):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
01-06 08:21:38.254: E/AndroidRuntime(733):  at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1369)
01-06 08:21:38.254: E/AndroidRuntime(733):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:660)
01-06 08:21:38.254: E/AndroidRuntime(733):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:553)
01-06 08:21:38.254: E/AndroidRuntime(733):  at android.view.View.measure(View.java:12723)
01-06 08:21:38.254: E/AndroidRuntime(733):  at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:594)
01-06 08:21:38.254: E/AndroidRuntime(733):  at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:376)
01-06 08:21:38.254: E/AndroidRuntime(733):  at android.view.View.measure(View.java:12723)
01-06 08:21:38.254: E/AndroidRuntime(733):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
01-06 08:21:38.254: E/AndroidRuntime(733):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
01-06 08:21:38.254: E/AndroidRuntime(733):  at android.view.View.measure(View.java:12723)
01-06 08:21:38.254: E/AndroidRuntime(733):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
01-06 08:21:38.254: E/AndroidRuntime(733):  at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1369)
01-06 08:21:38.254: E/AndroidRuntime(733):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:660)
01-06 08:21:38.254: E/AndroidRuntime(733):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:553)
01-06 08:21:38.254: E/AndroidRuntime(733):  at android.view.View.measure(View.java:12723)
01-06 08:21:38.254: E/AndroidRuntime(733):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
01-06 08:21:38.254: E/AndroidRuntime(733):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
01-06 08:21:38.254: E/AndroidRuntime(733):  at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2092)
01-06 08:21:38.254: E/AndroidRuntime(733):  at android.view.View.measure(View.java:12723)
01-06 08:21:38.254: E/AndroidRuntime(733):  at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1064)
01-06 08:21:38.254: E/AndroidRuntime(733):  at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
01-06 08:21:38.254: E/AndroidRuntime(733):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-06 08:21:38.254: E/AndroidRuntime(733):  at android.os.Looper.loop(Looper.java:137)
01-06 08:21:38.254: E/AndroidRuntime(733):  at android.app.ActivityThread.main(ActivityThread.java:4424)
01-06 08:21:38.254: E/AndroidRuntime(733):  at java.lang.reflect.Method.invokeNative(Native Method)
01-06 08:21:38.254: E/AndroidRuntime(733):  at java.lang.reflect.Method.invoke(Method.java:511)
01-06 08:21:38.254: E/AndroidRuntime(733):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-06 08:21:38.254: E/AndroidRuntime(733):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-06 08:21:38.254: E/AndroidRuntime(733):  at dalvik.system.NativeStart.main(Native Method) 
```

这是我用来定制微调器的类

```
public class MyAdapter extends ArrayAdapter<String>
    {
      private List<String> listString = new ArrayList<String>();

      public MyAdapter(Context context, int textViewResourceId, List<String> objects) {
        super(context, textViewResourceId, objects);

      //listString  = objects;
      }

      @Override
      public View getDropDownView(int position, View convertView,ViewGroup parent) {
            return getCustomView(position, convertView, parent);
      }

      @Override
      public View getView(int position, View convertView, ViewGroup parent) {
            return getCustomView(position, convertView, parent);
      }

      public View getCustomView(int position, View convertView, ViewGroup parent) {

       LayoutInflater inflater=getLayoutInflater();
       View row=inflater.inflate(R.layout.spinner, parent, false);
       TextView label=(TextView)row.findViewById(R.id.textView1);
       label.setText(listString.get(position)); 

       return row;

      }
    } 
```

当我评论这一行时，上面的错误开始了 `//listString = objects;` 我评论了它，因为它已经用超级方法初始化了。 `super(context, textViewResourceId, objects);`有人可以解释一下吗？在 OOP 中，我们使用 super 来初始化具有超类值的内容。那么为什么我需要重新初始化呢？或者我们不能对2个参数使用超级方法并`//listString = objects;`在上面的类中初始化吗？我知道我缺乏 OOP。有人可以解释一下吗？

第二个问题是当我删除评论时它开始起作用。但它没有显示我选择的项目。我已经写过项目选择事件。他们工作。我还需要做什么才能完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T03:12:02.280

`listString`不能被超类初始化。它是`MyAdapter`类的成员，而不是超类。

```
private List<String> listString = new ArrayList<String>(); 
```

在`get`调用的时候`listString`仍然是空的，因此异常。

# c++ - 在 C++ 中嵌入英特尔汇编合并排序代码（内联汇编）

> ID：14178882
> 
> 赞同：0
> 
> 时间：2013-01-06T03:04:43.223
> 
> 标签：c++, xcode, assembly, inline-assembly

我想将此合并排序代码（请参见下文）嵌入到我的 C++ 程序（也请参见下文）中，以便我可以在使用汇编的程序中进行合并排序。是的，我知道我可以在 C++ 中编写合并排序，但是我嵌入这个程序集是非常重要的。

合并排序代码：

```
%include "io.mac"

.DATA
MAX_SIZE EQU 25
%define ARR_LEN dword [n]

PROMPT_ENTER_ARR_LEN db "Enter size of your Array : ", 0
PROMPT_ENTER_ELEMENTS db    "Please enter elements of your array : ", 0
print_orig_array db "Original Array ", 0
print_final_array   db  "Sorted Array ", 0
print_space db " ",0
merge_sort_debug_str db "Merge Sort Params: EAX, ECX: ", 0
merge_sort_end_debug_str db "End Merge Sort", 0
merge_debug_str db "Merge Params: EAX, EBX, ECX, EDX, EDI: ", 0
copy_debug_str db "Copy Params: EAX, EBX, ECX: ", 0
temp_array_debug_str db "Temp array: ", 0
merge_copy_back_temp_debug_str db "Merge Copy back temp array: ", 0
.UDATA
;; Length of the array
n       resd 1
;; Array to be sorted
arr   resd MAX_SIZE
;; Temporary storage array
temp_arr resd MAX_SIZE
.CODE
.STARTUP

READ_ARR_LEN:
;; Read the length of the array
PutStr PROMPT_ENTER_ARR_LEN
nwln
GetLInt [n]     ; Size of input array
PutLInt [n]
nwln

GET_ARRAY:
;; Get values in arr from the user
mov   EAX, arr
mov   ECX, ARR_LEN
call  Read_Arr

;; Print the original array
mov   ECX, ARR_LEN
PutStr print_orig_array
call  Print_Arr

;; Run Merge Sort on the array
mov   EAX, arr
mov   EBX, temp_arr
mov   ECX, ARR_LEN
call  Merge_Sort

;; Print the final array
PutStr print_final_array
call  Print_Orig_Arr
.EXIT

Merge_Sort:
;; EAX - Array start
;; ECX - array length

;; Arrays of size 0 or 1 are already sorted
cmp   ECX, 2
jl    Trivial_Merge_Sort

;; Merge_Sort (first half)
;; Length of the first half
;; ECX /= 2
push  ECX
shr   ECX, 1
call  Merge_Sort
pop   ECX

;; Merge_Sort (second half)
push  EAX
push  EBX
push  ECX

;; Length of the second half
;; ECX = ECX - ECX/2
mov   EDX, ECX
shr   EDX, 1
sub   ECX, EDX
imul  EDX, 4
;; Start index of the second half
;; EAX = EAX + (ECX/2) * 4
add   EAX, EDX
push  EDX
call  Merge_Sort
pop   EDX

pop   ECX
pop   EBX
pop   EAX

pushad
;; Merge (first half, second half)
;; Length of first half = ECX/2
;; Length of second half = ECX - ECX/2
mov   EDX, ECX
shr   ECX, 1
sub   EDX, ECX

;; Start of second half = EAX + (ECX/2) * 4
mov   EBX, EAX
mov   EDI, ECX
imul  EDI, 4
add   EBX, EDI
;; Index of temp array = 0
sub   EDI, EDI
call  Merge
popad

;; Copy back the merged array from temp_arr to arr
call  Merge_Copy_Back_Temp

ret

Trivial_Merge_Sort:
;; In case of arrays of length 0 or 1
ret

Merge:
;; Merge two arrays contents.
;; The final merged array will be in temp_arr
;; Merging is done recursively.

;; Arguments:
;; EAX - First array's start
;; EBX - Second array's start
;; ECX - Length of first array
;; EDX - Length of second array
;; EDI - Index in temp array
pushad

;; Handle the cases where one array is empty
cmp   ECX, 0
jz    First_Array_Over
cmp   EDX, 0
jz    Second_Array_Over

;; Compare first elements of both the arrays
push  EDX
push  EDI
mov   EDX, [EAX]
mov   EDI, [EBX]
cmp   EDX, EDI
pop   EDI
pop   EDX

;; Pick which ever is the least and update that array
jl    Update_First_Array
jmp   Update_Second_Array

Update_First_Array:
;; min_elem = min (first elements of first array and second array)
;; Put min_elem into the temp array
push  dword [EAX]
pop   dword [temp_arr + EDI * 4]
add   EAX, 4
dec   ECX
inc   EDI

;; Recursively call Merge on the updated array and the
;; other array
call  Merge
popad
ret

Update_Second_Array:
;; min_elem = min (first elements of first array and second array)
;; Put min_elem into the temp array
push  dword [EBX]
pop   dword [temp_arr + EDI * 4]
add   EBX, 4
dec   EDX
inc   EDI

;; Recursively call Merge on the updated array and the
;; other array
call  Merge
popad
ret

Merge_Copy_Back_Temp:
;; Copy back the temp array into original array
;; Arguments:
;; EAX - original array address
;; ECX - original array length
pushad

;; For copying back, the destination array is EAX
mov   EBX, EAX
;; Now, the source array is temp_arr
mov   EAX, temp_arr
call  Copy_Array
popad
ret

Trivial_Merge:
;; Note: One array is empty means no need to merge.
popad
ret

First_Array_Over:
;; Copy the rest of the second array to the temp arr
;; because the first array is empty
pushad
mov   EAX, EBX
mov   ECX, EDX
mov   EBX, temp_arr
imul  EDI, 4
add   EBX, EDI
call  Copy_Array
popad
popad
ret

Second_Array_Over:
;; Copy the rest of the first array to the temp arr
;; because the second array is empty
pushad
mov   EBX, temp_arr
imul  EDI, 4
add   EBX, EDI
call  Copy_Array
popad
popad
ret

Copy_Array:
;; Copy array to destination array
;; EAX - Array start
;; EBX - Destination array
;; ECX - Array length

;; Trivial case
cmp   ECX, 0
jz    Copy_Empty_Array

push  ECX
sub   EDI, EDI
copy_loop:
;; Copy each element
push  dword [EAX + EDI * 4]
pop   dword [EBX + EDI * 4]
inc   EDI
loop  copy_loop

pop   ECX
ret

Copy_Empty_Array:
ret

Read_Arr:
;; EAX - array start
;; ECX - array length
PutStr PROMPT_ENTER_ELEMENTS
nwln
mov   ESI, EAX
sub   EDI, EDI
loop1:
;; Read each element
GetLInt [ESI + EDI * 4]
inc   EDI
loop  loop1
ret

Print_Temp_Arr:
;; Print contents of temp_arr (for debugging)
pushad
mov EAX, temp_arr
mov ECX, ARR_LEN
call Print_Arr
popad
ret

Print_Orig_Arr:
;; Print contents of arr (for debugging)
pushad
mov EAX, arr
mov ECX, ARR_LEN
call Print_Arr
popad
ret

Print_Arr:
;; Print contents of an array
;; EAX - Array start
;; ECX - array length
nwln
mov   ESI, EAX
sub   EDI, EDI
new_loop1:
PutLInt [ESI + EDI * 4]
PutStr print_space
inc   EDI
loop  new_loop1
nwln
ret 
```

C++ 代码：

```
#include <iostream>
#include <cmath>
#include <stdio.h>

using namespace std;

int main()
{
   //insert assembly code here
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T03:30:04.670

AT&T 语法 - [http://www.codeproject.com/Articles/15971/Using-Inline-Assembly-in-CC](http://www.codeproject.com/Articles/15971/Using-Inline-Assembly-in-C-C)

INTEL 语法 - [http://www.rohitab.com/discuss/topic/28661-inline-assembly-on-gcc-using-intel-syntax/](http://www.rohitab.com/discuss/topic/28661-inline-assembly-on-gcc-using-intel-syntax/) 和 [如何使用 Intel 语法内联汇编在 GCC 中设置变量？](https://stackoverflow.com/questions/5397677/gcc-intel-syntax-inline-assembly)

# jquery - 将项目添加到 observableArray 不会更新 jQuery 按钮单击上的视图

> ID：14178884
> 
> 赞同：5
> 
> 时间：2013-01-06T03:05:03.410
> 
> 标签：jquery, knockout.js

我正在尝试找出以下示例不起作用的原因。

observableArray 在被手动告知它已更改（使用 valueHasMutated() ）之前不会更新。

我认为 observables 的全部意义在于，当它改变时，视图会自动更新。

```
<button type='button' id='add'>add</button>
<button type='button' id='mutated'>force update</button>
<div id="short_tasks" data-bind="foreach: list">
  <div data-bind="text: title"></div>
</div> 
```

JS：

```
var ListTest = function () {

  this.list = ko.observableArray([{title: 'item1'}]);
}

var viewModel = new ListTest();
ko.applyBindings(viewModel);

$('#add').click(function () {
  viewModel.list().push({title: 'new item'});
});

$('#mutated').click(function() {
  viewModel.list.valueHasMutated();
}); 
```

jsFiddle：http: [//jsfiddle.net/InsaneWookie/HFgbR/](http://jsfiddle.net/InsaneWookie/HFgbR/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-06T03:47:35.207

您将希望`push`直接调用 observableArray，这会将您的项目推送到底层数组并通知任何订阅者。

```
viewModel.list.push({title: 'new item'}); 
```

# php - MySQL PHP 不会获取所有行

> ID：14178885
> 
> 赞同：0
> 
> 时间：2013-01-06T03:05:08.787
> 
> 标签：php, html, mysql, sql

在尝试对添加的“朋友”进行概述时，以下代码仅返回最后添加的朋友。

```
mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");
$sql="SELECT * FROM $tbl_name WHERE bruger1='$usrname' AND status='Godkendt'";
$result=mysql_query($sql);
while($rows=mysql_fetch_array($result)){
  $venner=$rows['bruger2'];
}
$tbl_name="brugere";
$sql="SELECT * FROM $tbl_name WHERE email LIKE '$venner%'";
$result=mysql_query($sql);
?>
<div id="searchcenter">
  <div id="searchtop"></div>
<?php
  while($rows=mysql_fetch_array($result)){
?>
  <a href="http://festbook.dk/profil/start.php?r=profil&id=<? echo $rows['id']; ?>" class="profilresult">
    <img src="<? echo $rows['profilbilled']; ?>">
    <p><b>Navn: </b><? echo $rows['navn']; ?></p>
    <p><b>Mail: </b><? echo $rows['email']; ?></p>
    <p><b>Hjem: </b><? echo $rows['adresse']; ?></p>
    <p><b>FacebookID: </b><? echo $rows['facebook']; ?></p>
  </a>
  <?php
    }
  ?>
  </div>
</div>
</body> 
```

我该怎么做才能使其正常工作？想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T03:15:09.327

我通过查询多个表来解决它......

```
$tbl_name="brugere";
$tbl_name2="venner";
$sql="SELECT * FROM $tbl_name, $tbl_name2 WHERE email=bruger2 AND status='Godkendt'";
$result=mysql_query($sql); 
```

无论如何感谢您的帮助！:D

# android - 媒体播放器无法正常工作

> ID：14178886
> 
> 赞同：1
> 
> 时间：2013-01-06T03:05:16.420
> 
> 标签：android, forceclose

我在尝试强制关闭我的应用程序时遇到问题。下面是我在单击按钮时播放声音的代码。任何人都可以向我解释如何避免我遇到的问题吗？

```
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.app.Activity;

public class Click extends Activity
 {
  MediaPlayer mp1;

  @Override
    public void onCreate(Bundle savedInstanceState)
     {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_click);

      mp1 = MediaPlayer.create(this, R.raw.sound1);
      final Button button1 = (Button) findViewById(R.id.button1);
      button1.setOnClickListener((OnClickListener) this);
    }

   public void onClick(View v) 
     {
      switch(v.getId()) 
       {
        case R.id.button1:
        mp1.start();
        break;
       }
     } 
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T03:10:59.433

您的第一个问题与您没有实现`OnClickListener`而是将您的`Click`类转换为`OnClickListener`.

修改您的代码如下：

首先是类声明：

```
public class Click extends Activity implements OnClickListener 
```

然后改变

```
 button1.setOnClickListener((OnClickListener) this); 
```

只是

```
button1.setOnClickListener(this); 
```

# haskell - 读者单子的目的是什么？

> ID：14178889
> 
> 赞同：141
> 
> 时间：2013-01-06T03:06:11.480
> 
> 标签：haskell, monads, reader-monad

阅读器单子是如此复杂，似乎无用。如果我没记错的话，在像 Java 或 C++ 这样的命令式语言中，对于 reader monad 没有等效的概念。

你能给我一个简单的例子并澄清一下吗？

* * *

## 回答 #1

> 赞同：198
> 
> 时间：2013-01-06T05:52:39.087

不要害怕！reader monad 实际上并没有那么复杂，并且具有真正易于使用的实用程序。

有两种接近 monad 的方法：我们可以问

1.  monad***是做***什么的？它配备了哪些操作？到底有什么好处呢？
2.  monad 是如何实现的？它从哪里产生？

从第一种方法来看，reader monad 是一些抽象类型

```
data Reader env a 
```

这样

```
-- Reader is a monad
instance Monad (Reader env)

-- and we have a function to get its environment
ask :: Reader env env

-- finally, we can run a Reader
runReader :: Reader env a -> env -> a 
```

那么我们如何使用它呢？好吧，reader monad 非常适合通过计算传递（隐式）配置信息。

任何时候你在计算中都有一个在不同点需要的“常数”，但实际上你希望能够使用不同的值执行相同的计算，那么你应该使用 reader monad。

Reader monads 也被用来做 OO 人所说的[依赖注入](https://en.wikipedia.org/wiki/Dependency_injection)。例如，[negamax](https://en.wikipedia.org/wiki/Negamax)算法经常（以高度优化的形式）用于计算两人游戏中的位置值。虽然算法本身并不关心你在玩什么游戏，但你需要能够确定游戏中的“下一个”位置是什么，并且你需要能够判断当前位置是否是胜利位置。

```
 import Control.Monad.Reader

 data GameState = NotOver | FirstPlayerWin | SecondPlayerWin | Tie

 data Game position
   = Game {
           getNext :: position -> [position],
           getState :: position -> GameState
          }

 getNext' :: position -> Reader (Game position) [position]
 getNext' position
   = do game <- ask
        return $ getNext game position

 getState' :: position -> Reader (Game position) GameState
 getState' position
   = do game <- ask
        return $ getState game position

 negamax :: Double -> position -> Reader (Game position) Double
 negamax color position
     = do state <- getState' position 
          case state of
             FirstPlayerWin -> return color
             SecondPlayerWin -> return $ negate color
             Tie -> return 0
             NotOver -> do possible <- getNext' position
                           values <- mapM ((liftM negate) . negamax (negate color)) possible
                           return $ maximum values 
```

这将适用于任何有限的、确定的、两人游戏。

即使对于不是真正依赖注入的事情，这种模式也很有用。假设您从事金融工作，您可能会设计一些复杂的逻辑来为资产定价（比如衍生品），这一切都很好，而且您可以在没有任何臭名昭著的单子的情况下做到这一点。但是，您修改程序以处理多种货币。您需要能够即时在货币之间进行转换。您的第一次尝试是定义一个顶级函数

```
type CurrencyDict = Map CurrencyName Dollars
currencyDict :: CurrencyDict 
```

获取现货价格。然后你可以在你的代码中调用这个字典......但是等等！那是行不通的！货币字典是不可变的，因此不仅在程序的生命周期内必须相同，而且从**编译**时开始！所以你会怎么做？好吧，一种选择是使用 Reader monad：

```
 computePrice :: Reader CurrencyDict Dollars
 computePrice
    = do currencyDict <- ask
      --insert computation here 
```

也许最经典的用例是实现解释器。但是，在我们看之前，我们需要介绍另一个函数

```
 local :: (env -> env) -> Reader env a -> Reader env a 
```

好的，所以 Haskell 和其他函数式语言都是基于[lambda 演算](https://en.wikipedia.org/wiki/Lambda_calculus)的。Lambda 演算的语法看起来像

```
 data Term = Apply Term Term | Lambda String Term | Var Term deriving (Show) 
```

我们想为这种语言编写一个评估器。为此，我们需要跟踪一个环境，它是与术语关联的绑定列表（实际上它将是闭包，因为我们想要进行静态范围界定）。

```
 newtype Env = Env ([(String, Closure)])
 type Closure = (Term, Env) 
```

完成后，我们应该得到一个值（或错误）：

```
 data Value = Lam String Closure | Failure String 
```

所以，让我们编写解释器：

```
interp' :: Term -> Reader Env Value
--when we have a lambda term, we can just return it
interp' (Lambda nv t)
   = do env <- ask
        return $ Lam nv (t, env)
--when we run into a value, we look it up in the environment
interp' (Var v)
   = do (Env env) <- ask
        case lookup (show v) env of
          -- if it is not in the environment we have a problem
          Nothing -> return . Failure $ "unbound variable: " ++ (show v)
          -- if it is in the environment, then we should interpret it
          Just (term, env) -> local (const env) $ interp' term
--the complicated case is an application
interp' (Apply t1 t2)
   = do v1 <- interp' t1
        case v1 of
           Failure s -> return (Failure s)
           Lam nv clos -> local (\(Env ls) -> Env ((nv, clos) : ls)) $ interp' t2
--I guess not that complicated! 
```

最后，我们可以通过传递一个简单的环境来使用它：

```
interp :: Term -> Value
interp term = runReader (interp' term) (Env []) 
```

就是这样。用于 lambda 演算的全功能解释器。

* * *

另一种思考方式是问：它是如何实现的？答案是 reader monad 实际上是所有 monad 中最简单、最优雅的一种。

```
newtype Reader env a = Reader {runReader :: env -> a} 
```

Reader 只是函数的一个花哨的名称！我们已经定义`runReader`了 API 的其他部分呢？好吧，every`Monad`也是一个`Functor`：

```
instance Functor (Reader env) where
   fmap f (Reader g) = Reader $ f . g 
```

现在，得到一个单子：

```
instance Monad (Reader env) where
   return x = Reader (\_ -> x)
   (Reader f) >>= g = Reader $ \x -> runReader (g (f x)) x 
```

这不是那么可怕。`ask`真的很简单：

```
ask = Reader $ \x -> x 
```

虽然`local`还不错：

```
local f (Reader g) = Reader $ \x -> runReader g (f x) 
```

好的，所以 reader monad 只是一个函数。为什么要有Reader？好问题。其实你不需要！

```
instance Functor ((->) env) where
  fmap = (.)

instance Monad ((->) env) where
  return = const
  f >>= g = \x -> g (f x) x 
```

这些甚至更简单。更重要的`ask`是`id`，`local`只是功能组合与功能的顺序切换！

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2013-01-08T01:00:45.887

我记得和你一样困惑，直到我自己发现 Reader monad 的变体*无处不在*。我是怎么发现的？因为我一直在编写代码，结果证明是它的微小变化。

例如，有一次我正在编写一些代码来处理*历史*值；随时间变化的值。一个非常简单的模型是从时间点到该时间点的值的函数：

```
import Control.Applicative

-- | A History with timeline type t and value type a.
newtype History t a = History { observe :: t -> a }

instance Functor (History t) where
    -- Apply a function to the contents of a historical value
    fmap f hist = History (f . observe hist)

instance Applicative (History t) where
    -- A "pure" History is one that has the same value at all points in time
    pure = History . const

    -- This applies a function that changes over time to a value that also 
    -- changes, by observing both at the same point in time.
    ff <*> fx = History $ \t -> (observe ff t) (observe fx t)

instance Monad (History t) where
    return = pure
    ma >>= f = History $ \t -> observe (f (observe ma t)) t 
```

该`Applicative`实例意味着，如果你有`employees :: History Day [Person]`并且`customers :: History Day [Person]`你可以这样做：

```
-- | For any given day, the list of employees followed by the customers
employeesAndCustomers :: History Day [Person]
employeesAndCustomers = (++) <$> employees <*> customers 
```

即，`Functor`允许`Applicative`我们调整常规的、非历史的函数来处理历史。

考虑到函数，最直观地理解 monad 实例`(>=>) :: Monad m => (a -> m b) -> (b -> m c) -> a -> m c`。类型`a -> History t b`函数是将 an 映射`a`到值历史的`b`函数；例如，您可以拥有`getSupervisor :: Person -> History Day Supervisor`和`getVP :: Supervisor -> History Day VP`。所以 Monad 的实例`History`是关于组合这样的函数；例如，`getSupervisor >=> getVP :: Person -> History Day VP`对于 any 来说，是获取他们所拥有的 s`Person`历史的函数。`VP`

好吧，这个**monad**`History`实际上与. 确实与（与 相同）相同。**`Reader``History t a``Reader t a``t -> a`**

 **另一个例子：我最近一直在 Haskell 中对[OLAP设计进行原型设计。](http://en.wikipedia.org/wiki/Online_analytical_processing)这里的一个想法是“超立方体”，它是从一组维度的交集到值的映射。我们重新来过吧：

```
newtype Hypercube intersection value = Hypercube { get :: intersection -> value } 
```

超立方体上的一个常见操作是将多位置标量函数应用于超立方体的对应点。我们可以通过为 定义一个`Applicative`实例来获得`Hypercube`：

```
instance Functor (Hypercube intersection) where
    fmap f cube = Hypercube (f . get cube)

instance Applicative (Hypercube intersection) where
    -- A "pure" Hypercube is one that has the same value at all intersections
    pure = Hypercube . const

    -- Apply each function in the @ff@ hypercube to its corresponding point 
    -- in @fx@.
    ff <*> fx = Hypercube $ \x -> (get ff x) (get fx x) 
```

我只是复制粘贴了`History`上面的代码并更改了名称。如您所知，`Hypercube`也只是`Reader`.

它会一直持续下去。`Reader`例如，当您应用此模型时，语言解释器也归结为：

*   表达式 = a`Reader`
*   自由变量 = 使用`ask`
*   评估环境=`Reader`执行环境。
*   绑定结构 =`local`

一个很好的类比是 a`Reader r a`代表一个`a`带有“洞”的“洞”，这会让你不知道`a`我们在说什么。`a`一旦你提供一个`r`填补漏洞，你只能得到一个实际的。有很多这样的事情。在上面的示例中，“历史”是在指定时间之前无法计算的值，超立方体是在指定交集之前无法计算的值，语言表达式是可以'在您提供变量值之前不会被计算。它还让您直观地了解为什么`Reader r a`与 相同`r -> a`，因为这样的功能在直觉上也是`a`缺少的`r`。

因此`Functor`,`Applicative`和`Monad`的 实例`Reader`是非常有用的概括，适用于您正在建模任何“`a`缺少”的东西`r`，并允许您将这些“不完整”对象视为完整的对象。

还有另一种说法：a`Reader r a`是消费`r`和生产的东西`a`，而`Functor`,`Applicative`和`Monad`实例是使用`Reader`s 的基本模式。 `Functor`= make a`Reader`修改另一个的输出`Reader`；`Applicative`= 将两个`Reader`s 连接到同一个输入并组合它们的输出；`Monad`= 检查 a 的结果`Reader`并用它来构造另一个`Reader`. `local`and`withReader`函数 = make a将`Reader`输入修改为 another `Reader`。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2013-01-08T21:56:09.737

在 Java 或 C++ 中，您可以毫无问题地从任何地方访问任何变量。当您的代码变为多线程时会出现问题。

在 Haskell 中，只有两种方法可以将值从一个函数传递到另一个函数：

*   您通过可调用函数的输入参数之一传递值。缺点是：1）您不能以这种方式传递所有变量 - 输入参数列表只会让您大吃一惊。2）在函数调用序列中：`fn1 -> fn2 -> fn3`，函数`fn2`可能不需要您传递`fn1`给的参数`fn3`。
*   您在某个 monad 的范围内传递值。缺点是：你必须深刻理解 Monad 的概念是什么。传递值只是您可以使用 Monad 的大量应用程序之一。实际上，Monad 的概念非常强大。如果您没有立即获得洞察力，请不要沮丧。继续尝试，并阅读不同的教程。您将获得的知识将得到回报。

Reader monad 只是传递您想要在函数之间共享的数据。函数可以读取该数据，但不能更改它。这就是 Reader monad 所做的一切。嗯，几乎所有。还有很多类似的功能`local`，但你第一次只能坚持`asks`。**

# openstack-nova - nova 能否在单个控制器上支持多个虚拟机管理程序？

> ID：14178890
> 
> 赞同：1
> 
> 时间：2013-01-06T03:06:22.837
> 
> 标签：openstack-nova

在`nova.conf`中，我们需要指定`computer_driver`为`kvm`或`xen`。这是否意味着一个 nova 控制器只能支持一种管理程序技术？我可以在同一个云中混合`kvm`和虚拟机吗？`xen`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T22:22:32.940

您可以混合管理程序，但在一个单元内的不同计算节点上。然后，您可以使用映像属性或调度程序提示来确保基于某些映像的虚拟机位于它们支持的虚拟机管理程序类型上，或者直接调度到虚拟机管理程序类型。

# python - 如何让歌曲在 WxPython MediaCtrl 中自动播放？

> ID：14178894
> 
> 赞同：4
> 
> 时间：2013-01-06T03:06:51.997
> 
> 标签：python, wxpython, media

我正在制作一个音乐播放器，一切顺利，除了当我点击下一个按钮时，它会加载下一首歌曲，但除非用户按下播放按钮，否则它不会播放。无论如何，只需点击下一个按钮就可以自动播放，而不必在之后按下播放按钮。我尝试将播放功能和加载功能绑定到按钮，但不起作用，我也尝试在我的加载功能中包含 mc.Play() ，但这也不起作用。

这是我的代码：

```
import wx
import wx.media
import os

class MainWindow(wx.Frame):

    def __init__(self,parent,id):
        wx.Frame.__init__(self,parent,id,'Music Player',size=(900,670),style=wx.MINIMIZE_BOX|wx.SYSTEM_MENU|wx.CAPTION|wx.CLOSE_BOX|wx.CLIP_CHILDREN)
        wx.Frame.CenterOnScreen(self)
        bg = wx.Image('bg.png', wx.BITMAP_TYPE_ANY).ConvertToBitmap()
        self.bitmap1 = wx.StaticBitmap(self, -1, bg, (0,0))
        panel = wx.Panel(self,style=wx.STAY_ON_TOP)

        ##MENU AND STATUS BAR
        self.status = self.CreateStatusBar()
        self.status.SetStatusText('Ready')
        menubar = wx.MenuBar()
        file_menu = wx.Menu()
        view_menu = wx.Menu()
        controls_menu = wx.Menu()
        help_menu = wx.Menu()

        #MENU ID'S
        ID_FILE_LOAD = 2
        ID_FILE_EXIT = 3

        ID_VIEW_SHOW_STATUSBAR = 4

        ID_CONTROLS_PLAY = 5
        ID_CONTROLS_PAUSE = 6
        ID_CONTROLS_STOP = 7

        ID_HELP_ABOUT = 8

        ##FILE MENU
        file_menu.Append(ID_FILE_LOAD, "&Load...\tCtrl+L", "This will let you choose a song to load")
        file_menu.AppendSeparator()
        file_menu.Append(ID_FILE_EXIT,"Exit","This will exit the program")

        ##VIEW MENU
        self.check_statusbar = view_menu.Append(ID_VIEW_SHOW_STATUSBAR,'Show Stat&usbar\tCtrl+U', "This will disable the statusbar", kind=wx.ITEM_CHECK)
        view_menu.Check(self.check_statusbar.GetId(), True)

        ##CONTROLS MENU
        controls_menu.Append(ID_CONTROLS_PLAY,"&Play\tEnter", "Play the selected song")
        controls_menu.Append(ID_CONTROLS_PAUSE,"&Pause\tSpace", "Pause the selected song")

        ##MENUBAR APPEND
        menubar.Append(file_menu,"File")
        menubar.Append(view_menu,"View")
        menubar.Append(controls_menu,"Controls")
        menubar.Append(help_menu,"Help")
        self.SetMenuBar(menubar)

        ##MENU ACTION BINDING
        self.Bind(wx.EVT_MENU, self.Load, None, 2)        
        self.Bind(wx.EVT_MENU, self.Close, None, 3)
        self.Bind(wx.EVT_MENU, self.ToggleStatusBar, self.check_statusbar)
        self.Bind(wx.EVT_MENU, self.Play, None, 5)
        self.Bind(wx.EVT_MENU, self.Pause, None, 6)
        self.Bind(wx.EVT_MENU, self.About, None, 8)

        ##FONTS
        font1 = wx.Font(14, wx.DEFAULT, wx.NORMAL, wx.BOLD)
        font2 = wx.Font(14, wx.DEFAULT, wx.NORMAL, wx.BOLD)

        try:
            self.mc = wx.media.MediaCtrl(self)
        except NotImplementedError:
            raise

        ##BUTTONS

        bttnprt = self.bitmap1

        loadButton = wx.Button(bttnprt, -1, "Load File...", pos=(308,435), size=(281,31))
        self.Bind(wx.EVT_BUTTON, self.Load, loadButton)

        playButton = wx.Button(bttnprt, -1, "Play", pos=(458,491), size=(57,57))
        self.Bind(wx.EVT_BUTTON, self.Play, playButton)

        pauseButton = wx.Button(bttnprt, -1, "Pause", pos=(383,491), size=(57,57))
        self.Bind(wx.EVT_BUTTON, self.Pause, pauseButton)

        volumeUpButton = wx.Button(bttnprt, -1, "Up", pos=(400,299), size=(95,52))
        self.Bind(wx.EVT_BUTTON, self.onSetVolumeUp, volumeUpButton)

        volumeDownButton = wx.Button(bttnprt, -1, "Down", pos=(400,363), size=(95,52))
        self.Bind(wx.EVT_BUTTON, self.onSetVolumeDown, volumeDownButton)

        backButton = wx.Button(bttnprt, -1, "Back", pos=(308,491), size=(57,57))
        self.Bind(wx.EVT_BUTTON, self.previousSong, backButton)

        nextButton = wx.Button(bttnprt, -1, "Next", pos=(533,491), size=(57,57))
        self.Bind(wx.EVT_BUTTON, self.nextSong, nextButton)

        self.volumeCtrl = wx.Slider(bttnprt, value=50, minValue=0, maxValue=100, style=wx.SL_VERTICAL|wx.SL_INVERSE, pos=(300,300))
#        self.volumeCtrl.Bind(wx.EVT_SLIDER, self.onSetVolume)
        self.volumeCtrl.Hide()

        songlist = os.listdir('songs')
        self.myListBox = listbox = wx.ListBox(bttnprt, -1, (301,80), (296,206), songlist, wx.LB_SINGLE)

        self.Bind(wx.EVT_LISTBOX, self.selLoadFile, listbox)

#        self.st_file = wx.StaticText(bttnprt, -1, "Blank", pos=(30,30))

        def newWin(self, event):
            self.new = NewWindow(parent=self, id=-1)
            self.new.Show()

    def Close(self, event):
        box=wx.MessageDialog(None, 'Are you sure you want to exit?', 'Exit program?', wx.YES_NO)
        answer=box.ShowModal()
        if answer==wx.ID_YES:
            self.Destroy()

    def About(self, event):
        self.new = AboutWindow(parent=self, id=-1)
        self.new.Show()

    def selLoadFile(self, event):
            my_selection = self.myListBox.GetStringSelection()
            file_path = os.path.join(os.getcwd(),"songs",my_selection)
            self.doLoadFile2(file_path)

    def Load(self, event):
        dlg = wx.FileDialog(self, "Choose a media file", "songs", "", "*.*", wx.OPEN)
        if dlg.ShowModal() == wx.ID_OK:
            path = dlg.GetPath()
            self.doLoadFile(path)
            dlg.Destroy() 

    def load2(self):
            my_selection = self.myListBox.GetStringSelection()
            file_path = os.path.join(os.getcwd(),"songs",my_selection)
            self.doLoadFile2(file_path)
            self.mc.Play()

    def doLoadFile(self, path):
        if not self.mc.Load(path):
            wx.MessageBox("Unable to load %s: Unsupported format?" % path, "ERROR", wx.ICON_ERROR | wx.OK)

        else:
            folder, filename = os.path.split(path)
            self.mc.SetBestFittingSize()
            self.mc.Play()

    def doLoadFile2(self, file_path):
        if not self.mc.Load(file_path):
            wx.MessageBox("Unable to load %s: Unsupported format?" % file_path, "ERROR", wx.ICON_ERROR | wx.OK)

        else:
            folder, filename = os.path.split(file_path)
            #self.st_file.SetLabel('%s' % filename)
            self.status.SetStatusText("Now Playing: " +'%s' % filename)
            self.mc.SetBestFittingSize()
            self.mc.Play()

    def Play(self, event):
        self.mc.Play()

    def Pause(self, event):
        self.mc.Pause()

    def onSetVolumeUp(self, event):

        self.currentVolume = self.volumeCtrl.GetValue()
        self.newVolumeAdd = self.currentVolume + 1.5
        self.volumeCtrl.SetValue(self.newVolumeAdd)

        self.mc.SetVolume(float(self.currentVolume) / 100)

    def onSetVolumeDown(self, event):
        self.currentVolume = self.volumeCtrl.GetValue()
        self.newVolumeSub = self.currentVolume - 1.5
        self.volumeCtrl.SetValue(self.newVolumeSub)

        self.mc.SetVolume(float(self.currentVolume) / 100)

    def previousSong(self, event):
        current = self.myListBox.GetSelection()
        new = current - 1
        self.myListBox.SetSelection(new)
        self.mc.Stop()
        self.load2()

    def nextSong(self, event):
        current = self.myListBox.GetSelection()
        new = current + 1
        self.myListBox.SetSelection(new)
        self.mc.Stop()
        self.load2()

    def ToggleStatusBar(self, e):
        if self.check_statusbar.IsChecked():
            self.status.Show()
            self.status.SetStatusText('Ready')
        else:
            self.status.Hide()

        ##RUN##

if __name__=='__main__':
        app=wx.PySimpleApp()
        frame=MainWindow(parent=None,id=-1)
        frame.Show()
        app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T04:22:41.967

如果这是 Windows，可能特别是 Win 7、64 位，你需要做两件事才能让它工作。

1.  正如 JF Sebastian 所提到的，您需要从绑定到 EVT_MEDIA_LOADED 事件的方法中调用 play。[文档](http://docs.wxwidgets.org/2.8/wx_wxmediactrl.html#wxmediactrlcreate)实际上提到了这一点。
2.  创建 MediaCtrl 时指定后端。我不确定为什么需要它，但在我这样做之前它对我不起作用。

因此，请尝试以下更改：

```
...
#change this existing line
self.mc = wx.media.MediaCtrl(self, szBackend=wx.media.MEDIABACKEND_WMP10)
...
# add this new line
self.Bind(wx.media.EVT_MEDIA_LOADED, self.song_is_loaded)
...
# add this new method
def song_is_loaded(self, event):
    self.mc.Play() 
```

您现在还可以删除所有 self.mc.Play() 调用，除了 Play() 函数本身中的调用（因为现在加载文件将导致它播放）。

我还注意到您已经定义了一堆 ID_XXX 常量，但是在绑定菜单按钮时只使用了数字。

# parsing - 如何在 Scala 中使用 StdLexical 类

> ID：14178895
> 
> 赞同：1
> 
> 时间：2013-01-06T03:06:59.383
> 
> 标签：parsing, scala

我一直在尝试使用`scala.util.parsing.combinator.lexical.StdLexical`，但我不知道该怎么做。我一直在尝试这样：

```
import scala.util.parsing.combinator.lexical.StdLexical

class Foo extends StdLexical {
  def main(args: Array[String]) {

    val input = """
    class Main {
      def main(args: Array[String]) {
        println("hello world")
      }
    }
    """
    val scanner = new Scanner(input)

    println(scanner.first)
  }
} 
```

它编译并运行，但没有打印任何内容。谁能给我一个使用这个类的简单例子？（最好我想一次在列表或类似列表中获取所有令牌）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T11:37:07.483

您没有得到任何输出，因为您使用`class`而不是`object`，因此您的代码永远不会执行。

要获取所有令牌，您必须手动获取它们：

```
def loop(s: Scanner, token: Seq[Token]): Seq[Token] =
  if (s.atEnd) token
  else loop(s.rest, token :+ s.first)

println(loop(new Scanner(input), Vector())) 
```

然而，`StdLexical`并没有标记完整的 Scala 语法。如果你需要这个，我建议使用[Scalariform](https://github.com/mdr/scalariform)及其[分词](https://github.com/mdr/scalariform/blob/master/scalariform/src/main/scala/scalariform/lexer/ScalaLexer.scala#L260)方法。

# ajax - 如何处理 .ajax 帖子中的 FileStream 返回类型？

> ID：14178898
> 
> 赞同：5
> 
> 时间：2013-01-06T03:08:03.627
> 
> 标签：ajax, asp.net-mvc, actionlink, actionresult

我通过以下代码发送 JSON 对象。**控制器以 CSV 格式返回值，应提供提示以打开或保存为 CSV 文件。我无法理解应该成功编写什么代码：函数（结果）**

导出链接

```
Html.ActionLink("Export", "", "", null, new { @onclick = "return exportData();"})

function exportData() {

var searchViewModel = getExLogSearchModelData();
var path = getAbsolutePath("ExclusionLog", "ExportData");
$.ajax({
    url: path,
    cache: false,
    contentType: 'application/json; charset=utf-8',
    dataType: 'html',
    type: 'POST',
    data: JSON.stringify(searchViewModel),
    success: function (result) {
    },
    error: function (error) {
        $("#voidcontainer").html("Error");
    }
}); 
```

}

控制器动作结果

```
 public ActionResult ExportData(ExclusionLogSearchViewModel postSearchViewModel)
    {
        try
        {
            IEnumerable<ExclusionLogViewModel> exclusionLogData = null;
            exclusionLogcData = this._workerService.GetExclusionLogData(postSearchViewModel);

            return CSVFile(exclusionLogMembershipSyncData.GetStream<ExclusionLogViewModel>(), "ExclusionLogTables.Csv");
        }
        catch (Exception ex)
        {
                throw ex;
        }
        return null;
    } 
```

你能建议如何做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T14:41:34.543

我遇到了同样的问题，但我没有找到下载文件的方法，`$.ajax`但我找到了一个提供类似行为的优秀 JavaScript 库：

[https://github.com/johnculviner/jquery.file 下载](https://github.com/johnculviner/jquery.fileDownload)

你只需要调用这样的东西：

```
$.fileDownload(path, {
    httpMethod: 'POST',
    data: JSON.stringify(searchViewModel),
    success: function (result) {
    },
    error: function (error) {
        $("#voidcontainer").html("Error");
    }
}); 
```

并记得在控制器中创建 cookie。里面有`src/Common`合适的动作过滤器可以为你做这件事。

# php - 我安装了多个 PHP：如何删除自定义安装的一个？

> ID：14178900
> 
> 赞同：-3
> 
> 时间：2013-01-06T03:08:19.137
> 
> 标签：php, apache

早在 11 月，我就为 5.4.9 版安装了自己的 PHP 设置。我以为我已经删除了它，但显然没有。12 月，我用`yum install php54`及其所有软件包重新安装了它。

现在我遇到了一个问题，CLI 似乎正在使用自定义 PHP 安装，而主站点正在使用 yum 安装。我希望 CLI 和站点都使用 yum 安装，现在是 5.4.10。

当我`php -v`在 CLI 中执行时，它显示 5.4.9，所以我知道它使用了错误的 PHP 安装。这会导致很多问题，因为自定义安装没有安装 mysqli，并且禁用了 ftp。

有谁知道我如何删除自定义安装并将 CLI 重新链接到新的 yum 安装？

我正在使用 CentOS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T03:15:44.770

您是如何安装“自定义”的？这是一个非常广泛的问题，但这里有一些一般性建议：

它安装在哪里？`which php`可以告诉你。您可以使用它来确定如何卸载它。例如，它可能在`/usr/local`或中`/opt`。

然后，编辑你的`$PATH`变量，把你想要的 PHP 放在你不想要的之前。至少，这将使您想要运行的 PHP 首先运行。

如果您编译了自定义 PHP，则可以使用类似`make uninstall`.

# extjs - 为什么我定义的 VTypes 会被触发 3 次？

> ID：14178904
> 
> 赞同：2
> 
> 时间：2013-01-06T03:10:47.060
> 
> 标签：extjs, extjs4

我想检查数据库中是否存在文本字段的内容，所以我定义了一个 VTypes：

```
Ext.apply( Ext.form.field.VTypes,{
sampleSetExist: function(val, field) {
    alert('triggered');
    var result;
    Ext.Ajax.request({
        url: 'sampleSetExist.action',
        params: {
                name:val
        },
        async:false,
        success: function(response){
            var res = response.responseText;
            var jsonObject = Ext.decode( res );
            if( jsonObject.exist == true )
                result = false;
            else 
                result = true;
        }
        });
        return result;
    }
}); 
```

和这样的文本字段：

```
{
    fieldLabel: 'Name',
    itemId: 'sampleSetName',
    name: 'ssi.name',
    allowBlank: false,
    validateOnBlur: true,
    validateOnChange: false,
    vtype: 'sampleSetExist',
    vtypeText: 'The name has exist!'
}
…… 
```

当textfield模糊时，验证器函数sampleSetExist会被触发3次。为什么会出现这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T20:24:04.943

正如另一个答案中提到的，`vtype`配置（以及`validator`函数）应该用于快速的本地同步验证（比如确保日期范围结束在日期范围开始之后）。

进行这种远程验证的更好方法是使用现场`change`事件来完成这项工作。您可以将 Ajax 请求保存到该字段并使用它来进行您自己的验证。这应该完成您在客户端尝试执行的操作，但请记住用户可以执行自己的表单提交。确保在提交的值到达您的服务器时重新验证它们。

除了下面的代码之外，您可能还需要在提交时进行额外的验证，以确保用户在验证请求完成之前没有尝试提交表单。

注意：这可能不是*最好*的方法，但它应该为您指明正确的方向。

```
// Field config
{
    fieldLabel: "Name",
    checkChangeBuffer: 500,  // How long to wait after last change event
    listeners: {
        change: MyApp.onNameFieldChange
    },
    // Rest of config here
}

// "MyApp" is whatever namespace you're using for this form
MyApp.onNameFieldChange = function(field, newValue) {
    var request = field.validationXhr;

    // Cancel any existing requests
    if (request) {
        Ext.Ajax.abort(request);
    }

    // Send your params for validation
    field.validationXhr = Ext.Ajax.request({
        url: "sampleSetExist.action",
        /* params, timeout, etc. */

        success: function(response) {
            var jsonResponse = Ext.decode(response.responseText);
            if (jsonResponse.exist) {
                // markInvalid only displays an error message. It doesn't actually
                // set the field state to invalid. Extra logic may be needed.
                field.markInvalid("The name " + newValue + " already exists!");
            }
            else {
                field.clearInvalid();
            }
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T19:26:45.873

您不必担心它会被调用 3 次。VType 不是为需要询问服务器的事情而设计的。这种验证应该在表单提交时执行。VType 假设返回 true 或 false，并且仅用于字段或记录验证。

# jquery - 从图像标题 atrib（播放列表）中提取多个属性

> ID：14178907
> 
> 赞同：0
> 
> 时间：2013-01-06T03:11:42.083
> 
> 标签：jquery, attributes, title, attr

**我有这个代码：（**正常）

```
<div class="thumbInnerContainer">
    <div class="thumbs">
       <img src="/uploads/2012/09/image1.jpeg" class="thumb_img" title="Image Title description 1"> 
    </div>

    <div class="thumbs">
       <img src="/uploads/2012/09/image2.jpeg" class="thumb_img" title="Image Title description 2"> 
    </div>

    <div class="thumbs">
       <img src="/uploads/2012/09/image3.jpeg" class="thumb_img" title="Image Title description 3"> 
    </div>
</div> 
```

**所以，我想从图像中提取 TITLE 属性**（参见下面的示例）

```
<div class="titles">Image description 1</div>
<div class="titles">Image description 2</div>
<div class="titles">Image description 3</div> 
```

我想使用 jQuery。我怎样才能做到这一点？

**请记住，这是多个图像。我找到了一个解决方案，但这只是一张图片而不是多重。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T03:13:55.077

这将遍历每个带有标题属性的图像，并将标题添加到 div 中`id` `titlesContainer`：

**Javascript**

```
$('img[title]').each(function() {
    $('#titlesContainer').append('<div class="titles">' + $(this).attr('title') + '</div>');
}); 
```

**HTML**

```
<div id="titlesContainer"></div> 
```

**[演示](http://jsbin.com/ulimer/1/edit/)**

# php - 执行 xmlhttprequest，然后直接到新的 url 位置

> ID：14178911
> 
> 赞同：0
> 
> 时间：2013-01-06T03:12:12.320
> 
> 标签：php, javascript, html, xml, ajax

我是这个 ajax 和 javascript 的新手。我想要的是首先弹出一个确认框，如果为真则执行xmlhttprequest。之后我想将用户重定向到一个新页面。这就是我所拥有的。

```
<script type="text/javascript">
function showUser(str)
{

var r=confirm("Delete this customer?");

    if (r==true) {

if (str=="")
{
document.getElementById("txtHint").innerHTML="";
return;
}
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
xmlhttp=new XMLHttpRequest();
}
else
{// code for IE6, IE5
xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange=function()
{
if (xmlhttp.readyState==4 && xmlhttp.status==200)
{
document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
}
}
xmlhttp.open("GET","sletkunde.php?q="+str,true);
xmlhttp.send();
}
}
</script>

<form onclick="showUser(id.value); return false;" >
<input type="hidden" value="<?echo $id;?>" name="id">
<input type="button" value="tryk" name="knap">
</form>
<br>
<div id="txtHint"><b>something here</b></div> 
```

这是 sletkunde.php

```
<?
$q=$_GET["q"];
$slet = mysql_query("DELETE FROM Kunder WHERE KundeID = '".$q."'");
echo "hey"; // Just to see if it works
?> 
```

确认框有效，mysql_query 有效，回显“嘿”；作品。但是，在所有这些之后（自动），我怎样才能让它重定向到 kunder.php。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T03:17:39.610

`location.href = "http://www.mysite.com/kunder.php"`在你的`onreadystatechange`函数中使用。

# pandas - 如何将布尔数据帧转换为 1 和 np.NaN 的数据帧？

> ID：14178913
> 
> 赞同：4
> 
> 时间：2013-01-06T03:12:22.660
> 
> 标签：pandas

我有一个填充了 True 和 False 值的数据框，我想从中获取一个数据框，其中 True 替换为 1，False 替换为 np.NaN。我试过使用dataframe.replace，但它给了一个充满True的数据框。有没有办法在不使用 for 循环和 if 的情况下做到这一点？

例如，这是我拥有的数据框，T 表示 True，F 表示 False（不是字符串 'T' 和 'F'；抱歉，无法弄清楚如何在 wiki 中格式化间隔良好的表格）：

2008-01-02 16:00:00 TTF
2008-01-03 16:00:00 TTT
2008-01-04 16:00:00 TTF
2008-01-07 16:00:00 TTT
2008-01-08 16 :00:00 TTF

这就是我想将其更改为：

2008-01-02 16:00:00 1 1 np.NaN
2008-01-03 16:00:00 1 1 1
2008-01-04 16:00:00 1 1 np.NaN
2008-01-07 16: 00:00 1 1 1
2008-01-08 16:00:00 1 1 np.NaN

这些是我尝试替换 True 和 False 的行，并得到一个填充了所有 True 值的数据框：

```
df.replace(to_replace=True, value=1, inplace=True, method=None)   
df.replace(to_replace=False, value=np.NAN, inplace=True, method=None) 
```

单独尝试时，仅第一行不会改变任何东西；第二行将所有值转换为 True。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-06T03:38:56.197

`applymap()`可用于将函数应用于 a 的每个元素`dataframe`

```
In [1]: df = DataFrame([[True, True, False],[False, False, True]]).T

In [2]: df
Out[2]:
       0      1
0   True  False
1   True  False
2  False   True

In [3]: df.applymap(lambda x: 1 if x else np.nan)
Out[3]:
    0   1
0   1 NaN
1   1 NaN
2 NaN   1 
```

您还可以使用`dict`：

```
In [4]: d = {True:1, False:np.nan}

In [5]: df.applymap(lambda x: d[x])
Out[5]:
    0   1
0   1 NaN
1   1 NaN
2 NaN   1 
```

从下面解决帝斯曼的评论。我误读了 OP 并假设日期时间是一个索引。如果它不是对我有用的索引：

```
In [6]: df.applymap(lambda x: d.get(x,x))
Out[6]:
    0   1                    2
0   1 NaN  2012-01-01 00:00:00
1 NaN   1  2012-01-01 00:00:00 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T16:43:29.560

尝试这个。`where`之所以有效，是因为默认情况下第一次使用`nan`会删除未找到的条目（例如，不是 == 'T' 的任何内容），然后第二次使用 1 替换未找到的条目

```
In [48]: df = pd.DataFrame([ 'T', 'T', 'T', 'F', 'F' ], columns=['value'],index=pd.date_range('20010101',periods=5))

In [49]: df
Out[49]: 
           value
2001-01-01     T
2001-01-02     T
2001-01-03     T
2001-01-04     F
2001-01-05     F

In [50]: df.where(df=='T').where(df!='T',1)
Out[50]: 
           value
2001-01-01     1
2001-01-02     1
2001-01-03     1
2001-01-04   NaN
2001-01-05   NaN 
```

# iphone - 从 viewController 的 viewDidAppear 方法调用位置

> ID：14178914
> 
> 赞同：0
> 
> 时间：2013-01-06T03:12:51.960
> 
> 标签：iphone, ios, locationmanager

我的应用程序在 appDelegate 中获取用户的位置，并在某些 viewController 的 viewDidAppear 方法中调用该位置。我的问题是第一次加载 viewController 时，没有足够的时间来获取用户的位置。

**这是我的 AppDelegate：**

```
- (NSString *)getUserCoordinates
{
NSString *userCoordinates = [NSString stringWithFormat:@"latitude: %f longitude: %f", 
locationManager.location.coordinate.latitude, locationManager.location.coordinate.longitude];
locationManager = [[CLLocationManager alloc] init];
locationManager.distanceFilter = kCLDistanceFilterNone; // whenever we move
locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters; // 100 m
[locationManager startUpdatingLocation];
return userCoordinates;
}

- (NSString *)getUserLatitude
{
NSString *userLatitude = [NSString stringWithFormat:@"%f", 
locationManager.location.coordinate.latitude];
return userLatitude;
}

- (NSString *)getUserLongitude
{
NSString *userLongitude = [NSString stringWithFormat:@"%f", 
locationManager.location.coordinate.longitude];
return userLongitude;
} 
```

**这是我用来从 viewControllers 调用位置的方法：**

```
- (void) viewDidAppear:(BOOL)animated
{
NSString *userLatitude =[(PDCAppDelegate *)[UIApplication sharedApplication].delegate 
getUserLatitude];

NSString *userLongitude =[(PDCAppDelegate *)[UIApplication sharedApplication].delegate 
getUserLongitude];
} 
```

有人对如何解决有任何想法吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T07:29:22.167

尝试在这里使用全局变量。它将随着您的位置更新而更新，并且您将一直更新位置坐标。

```
-(void)didUpdateLocation // location update method of CLLocation Manager class
{
// assign current ordinates values to global variables.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T07:22:08.137

不知道你为什么两次发布相同的问题......但请参阅我在您的另一篇文章中的回答，

[将 appDelegate 中 locationManager 的坐标传递给 viewController](https://stackoverflow.com/questions/14179651/pass-coordinates-from-locationmanager-in-appdelegate-to-viewcontroller)

简而言之，您需要实现 CoreLocation 的委托方法，因为找到新位置时会调用这些方法。在这些委托方法中，触发 NSNotification（ViewControllers 订阅）以获取新用户的位置。

# windows - 精确确定 Win32 中未使用的 ram

> ID：14178918
> 
> 赞同：-1
> 
> 时间：2013-01-06T03:13:49.930
> 
> 标签：windows, visual-c++, ram

我使用此例程将未使用的 ram 填充为零。它会在某些计算机上导致崩溃，并且粗略尺寸 = 尺寸 - （尺寸 /10）；有没有更准确的方法来确定用零填充的未使用 RAM 量？

```
DWORDLONG getTotalSystemMemory(){
    PROCESS_MEMORY_COUNTERS lMemInfo;
    BOOL success = GetProcessMemoryInfo(
        GetCurrentProcess(),
        &lMemInfo,
        sizeof(lMemInfo)
    ); 
    MEMORYSTATUSEX statex;
    statex.dwLength = sizeof(statex);
    GlobalMemoryStatusEx(&statex);
    wprintf(L"Mem: %d\n", lMemInfo.WorkingSetSize);
    return statex.ullAvailPhys - lMemInfo.WorkingSetSize;
}

void Zero(){
    int size =  getTotalSystemMemory();//-(1024*140000)
    size =  size - (size /10);
    //if(size>1073741824) size=1073741824; //2^32-1
    wprintf(L"Mem: %d\n", size);
    BYTE* ar = new BYTE[size];
    RtlSecureZeroMemory(ar,size);
    delete[] ar;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T13:05:05.387

这个程序不会做你认为它做的事情。事实上，它适得其反。幸运的是，这也是不必要的。

首先，该程序是不必要的 Windows 已经有一个线程完整的工作来清零空闲页面，无创意地称为*零页面线程*。[这篇博](http://blogs.msdn.com/b/tims/archive/2010/10/29/pdc10-mysteries-of-windows-memory-management-revealed-part-two.aspx)文详细介绍了它的工作原理。因此，用零填充空闲内存的方法是什么都不做，因为已经有人用零填充空闲内存。

其次，程序并没有像你想象的那样做，因为当应用程序分配内存时，内核会在将内存分配给应用程序之前确保内存已满零。（如果没有足够的预置零页面可用，内核将在此处将页面置零。）因此，写出零的程序只是在零上写零。

第三，该程序适得其反，因为它没有将自己限制在空闲的内存中。它正在清零可能很忙的一大块内存。这可能会迫使其他应用程序放弃其活动内存，以便将其提供给您。

该程序也适得其反，因为即使它只设法获取空闲内存，它也会在释放内存之前弄脏内存（通过写入零）。将脏页返回给内核会将它们放在“可用脏内存”列表中，这意味着零页线程必须再次将它们归零。（冗余，在这种情况下，但内核不会在清零之前检查释放的页面是否充满零。检查页面是否充满零与将其清零一样昂贵。）

目前尚不清楚您的程序的目的是什么。为什么空闲内存是否充满零很重要？

# c++ - 将 Windows 主题应用于具有 WS_BORDER 样式的自定义控件

> ID：14178925
> 
> 赞同：0
> 
> 时间：2013-01-06T03:14:46.903
> 
> 标签：c++, winapi, themes, createwindowex

我有一个使用 WS_BORDER 样式的 CreateWindowEx 创建的自定义控件。除了与对话框中的其他控件以不同颜色显示的边框外，一切正常。我控件的边框是黑色的，其他控件的边框是蓝色的。创建控件后，我尝试调用 EnableThemeDialogTexture(_dialogHandle, ETDT_ENABLE) 以及来自[http://www.patchou.com/projects/richedit/](http://www.patchou.com/projects/richedit/)的逻辑，但无济于事。我正在使用 C++ 和 Winapi。IE。没有 MFC，没有 .Net。非常感谢任何指导。

编辑：这是对我有用的逻辑：

```
HDC hdc = GetWindowDC(hwnd);
HTHEME themeHandle = OpenThemeData(hwnd, L"Edit");
if(themeHandle)
{
    int cxBorder = GetSystemMetrics(SM_CXBORDER);
    int cyBorder = GetSystemMetrics(SM_CYBORDER);
    RECT rc;
    GetClientRect(hwnd, &rc);                   
    OffsetRect(&rc, cxBorder, cyBorder);
    ExcludeClipRect(hdc, rc.left, rc.top, rc.right, rc.bottom);
    InflateRect(&rc, cxBorder, cyBorder);
    DrawThemeBackground(themeHandle, hdc, 0, 0, &rc, NULL);
    CloseThemeData(themeHandle);
 }

ReleaseDC(hwnd, hdc); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T04:44:43.437

您必须自己绘制边框，使用来自另一个控件（例如，列表视图或树视图控件）的主题。对于自定义子控件，绘制边框非常简单——只需处理 WM_NCPAINT 消息即可。绘制边框时的部件 ID 和状态 ID 都应为 0。

# javascript - 有没有更简单的方法来显示/隐藏鼠标操作中的元素？

> ID：14178930
> 
> 赞同：2
> 
> 时间：2013-01-06T03:15:25.327
> 
> 标签：javascript, jquery, live

我在这里有这段代码，我似乎一直在使用类似的东西：

```
$(".fieldv").live('mouseenter', function() {
    $(this).children('.edit-icon').show();
}).live('mouseleave', function() {
    $(this).children('.edit-icon').hide();
}); 
```

是否有一种更简单、更简洁的方式来显示/隐藏鼠标操作中的元素，无论是悬停还是单击元素？或者类似的东西...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T03:17:21.407

为什么使用 JavaScript？

默认情况下，您需要隐藏图标：

```
.fieldv .edit-icon { display: none; } 
```

然后这个 CSS 适用于悬停（并且仅适用于悬停）

```
.fieldv:hover .edit-icon { display: block; /* or inline, etc. */ } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T03:17:27.743

你可以试试这个：

```
 $(".fieldv").hover(function(){

              //mouseover

       ,function(){

              //mouseout
       }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T03:17:46.357

```
$(".fieldv").hover(function() {
        $(this).children('.edit-icon').show();
    }, function() {
        $(this).children('.edit-icon').hide();
 }); 
```

使用 $(".class").hover(function(){}, function(){});

# nginx - 有没有办法在 nginx 中解压客户端的请求体？

> ID：14178933
> 
> 赞同：5
> 
> 时间：2013-01-06T03:16:01.310
> 
> 标签：nginx, gzip

客户端gzips post body，我想要nginx先解压post body，然后将解压后的内容传递给后端web服务器。

我只能找到压缩对客户端的响应的方法。

有什么解决办法吗？先谢谢了！

# magento - Magento：使用自定义分隔符以编程方式从 csv 文件导入产品

> ID：14178936
> 
> 赞同：0
> 
> 时间：2013-01-06T03:16:22.673
> 
> 标签：magento

我创建了一个自定义模块来从 csv 文件导入产品，但我不知道如何指定自定义分隔符，例如“~”来代替列的默认分隔符“;”。

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T11:53:39.360

如果您已经编写了自定义模块，则可以通过在 fgetcsv 等适当的 PHP 方法中使用分隔符来指定任何分隔符。它是该方法中的参数 $delimiter。然后解析您的自定义格式并创建 Magento 需要的 csv 格式。我已经为导入做了这样的事情。如果您需要更深入的帮助，请分享代码。

# javascript - 如何使用 jQuery :contains(some text) 选择器，但只从“this is some text”中选择“some text”？

> ID：14178945
> 
> 赞同：1
> 
> 时间：2013-01-06T03:17:37.027
> 
> 标签：javascript, jquery

> **可能重复：**
> [在 jQuery 中查找文本字符串并将其设为粗体](https://stackoverflow.com/questions/9794851/find-text-string-in-jquery-and-make-it-bold)

如何使用 jQuery :contains(some text) 选择器，但只从“this is some text”中选择“some text”？

我有这样的事情：

```
<div class="search">this is some text</div> 
```

我目前正在使用这样的代码：

```
$("div.search:contains(some text)").css("text-decoration","underline"); 
```

但这强调了“这是一些文本”，我希望它只强调“一些文本”。

我怎样才能最简单地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T03:35:59.583

您必须使用正则表达式用自己的元素包装内部文本：

```
$('div.search:contains(some text)').html(function (i, v) {
    return v.replace('some text', '<span>some text</span>');
})
.find('span').css('text-decoration', 'underline'); 
```

仅当 中没有嵌套元素时才使用此选项`div.search`。如果有，那么这是一场完全不同的球赛。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T03:43:12.813

你可以拆开像 jQuery highlight 插件之类的东西来找出他们是如何做到的。或者您可以按原样使用插件，只需修改应用的 css 类以包含您的下划线而不是黄色背景颜色。

不一定回答这个问题，但如果你想要功能而不是学习......不要重新发明轮子。

[http://johannburkard.de/blog/programming/javascript/highlight-javascript-text-higlighting-jquery-plugin.html](http://johannburkard.de/blog/programming/javascript/highlight-javascript-text-higlighting-jquery-plugin.html)

# css - CSS3有选择地禁用悬停效果

> ID：14178952
> 
> 赞同：11
> 
> 时间：2013-01-06T03:18:43.347
> 
> 标签：css

我有一个包含多个项目的未编号列表 - 有些项目是“标题”，大多数项目是链接。

目前，我的列表中有以下 CSS：

```
#result-side-menu li:hover {
  background-color: rgba(0,0,0,0.15);
} 
```

我希望能够仅在标题列表项上禁用悬停，同时在所有其他项上保持悬停。到目前为止，我最好的（但仍然不成功）的尝试是这样做：

```
#result-side-menu.li-no-hover li:hover {
  background-color: none;
} 
```

然后将 应用于`class="li-no-hover"`标题列表项。

有没有办法实现我想要做的事情？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-06T03:28:50.523

如果您应用`class="li-no-hover"`到您`li`不想要悬停效果的元素，那么这就是您想要的 css：

```
#result-side-menu li.li-no-hover:hover {
    background-color: transparent;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-12-26T05:15:43.933

你可以试试这个：

```
#result-side-menu li.li-no-hover:hover {
  opacity:1;
} 
```

# mysql - MySQL 5.1.65 | 选择在哪里找不到我知道的东西

> ID：14178954
> 
> 赞同：1
> 
> 时间：2013-01-06T03:19:08.367
> 
> 标签：mysql, where

我正在尝试使用这个令人作呕的 MySQL (5.1.65) 版本，它要求所有内容都用引号引起来，并且对所有内容都非常严格。我正在尝试查找重复的条目，因此我正在尝试制作一个脚本，如果它返回用户提交的值，那么显然我们有一个重复项。那是在我的服务器上工作，不是这个。

这就是我想要执行的。这一切顺利，没有错误，

```
SELECT * FROM `keylist` WHERE 'key' = '7489asdf32749asdf8237492asdf49837249' 
```

问题是数据库中的 7489asdf32749asdf8237492asdf49837249 是 varchar ......它完全一样。但奇怪的是，如果我这样做

```
SELECT * FROM `keylist` WHERE key = '7489asdf32749asdf8237492asdf49837249' 
```

这不起作用，而如果我这样做是为了选择我的 ID，它会起作用。

我不知道我做错了什么，但是这个愚蠢的 MySQL 版本肯定没有帮助。

总体而言，我的问题是我正在尝试查找重复项，因此我执行了 WHERE key = 语句，并且其中的键在我知道它在其中时不返回任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T03:24:38.960

`key`是 MySQL 中的保留字 - [http://dev.mysql.com/doc/mysqld-version-reference/en/mysqld-version-reference-reservedwords-5-0.html](http://dev.mysql.com/doc/mysqld-version-reference/en/mysqld-version-reference-reservedwords-5-0.html)

您的第一个版本工作成为 backtics -`` ``对实际列名的强制解释。

# android - 如何重绘surfaceview android的一部分

> ID：14178955
> 
> 赞同：1
> 
> 时间：2013-01-06T03:19:12.627
> 
> 标签：android, surfaceview

我曾经`surfaceview`创建一个图表。该图随时间不断变化。

当我使用`postInvalidate`方法更新图形时，`surfaceview`会重绘但我不想重绘 xy 轴。我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T10:33:28.303

我相信您正在寻找的是 SurfaceHolder 类中的 lockCanvas(Rect dirty) 方法。

[http://developer.android.com/reference/android/view/SurfaceHolder.html](http://developer.android.com/reference/android/view/SurfaceHolder.html)

官方文档：

“就像 lockCanvas()，但允许指定脏矩形。必须写入该矩形内的每个像素；但是，脏矩形外的像素将在下一次调用 lockCanvas() 时保留。”

因此，您可以只更改图形内容，保留任何预先绘制的轴

# c++ - 可以在应用程序代码中复制数据库数据吗？

> ID：14178958
> 
> 赞同：2
> 
> 时间：2013-01-06T03:19:58.947
> 
> 标签：c++, database, sqlite

我正在使用 sqlite 数据库将结果存储在嵌入式 C++ 应用程序中。

我有一些单列表，我称之为“域”表，其他表中的列将它们作为外键引用。这些本质上是枚举类型的表，仅在初始化时更改一次。例如，一个存储状态数据类型的表：

```
CREATE TABLE status_domain (status TEXT PRIMARY KEY NOT NULL UNIQUE);
INSERT INTO status_domain VALUES ('pending');
INSERT INTO status_domain VALUES ('in_progress');
INSERT INTO status_domain VALUES ('error');
INSERT INTO status_domain VALUES ('complete');  
.
.
CREATE TABLE my_other_table (
    .
    .
    status  TEXT NOT NULL,     
    .
    .
    FOREIGN KEY (status) REFERENCES status_domain(status)
); 
```

域表的目的是利用 sqlite 的外键约束（参照完整性）。

写入这些表的 C++ 代码不知道架构。我想知道在 C++ 中复制这些表是否是糟糕的设计。例如：

```
enum StatusEnum { pending, in_progress, error, complete }; 
```

我看到四个选项：

1.  `my_other_table`在不知道我插入的状态值是否有效的情况下插入。如果状态值无效，这将在运行时失败。
2.  使用 C++ 枚举复制 ，`status_domain`以便编译器不会让我执行无效状态的插入。这违反了 DRY 原则，因为如果架构发生更改，我将不得不在这两个地方进行更改。
3.  报废`status_domain`表并让 C++ 枚举强制执行有效的数据类型。C++ 代码将是插入这些表的唯一位置，因此这似乎是合理的。然而，在模式中明确声明状态类型是很好的。
4.  使 sqlite 包装器代码更加了解数据库/模式。我认为这不值得付出努力。

我倾向于选项 2，但犹豫不决，因为它存储的东西可能会在两个不同的地方发生变化。

注意：还有一些（更长的）这样的表格我没有分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T04:34:13.100

您正在谈论维护数据库模式和过程语言代码之间的一致性的众所周知的问题。这个问题没有很好的解决方案。有几种方法，例如 Microsoft 的 EntityFramework。它们都不是完美的。

我建议您考虑以下解决方案：

1.  编写一段 C++ 代码，它将从枚举中生成 SQL 查询（C++ 中没有反射，但有一个选项可以检查`switch`语句中是否存在所有枚举成员）。一旦你改变了你的枚举，你应该重新创建你的 SQL 查询，它应该重建你的表并运行这个查询。

2.  编写 SQL 查询，该查询将生成一段 C++ 代码，其中包含表的新状态中的枚举。更改表后，您必须重新运行查询，然后重新编译 C++ 代码。

这些程序不是全自动的，但至少它们给出了一些可以遵循的策略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T05:05:10.313

根据您所展示的内容，我倾向于选项 3（废品`status_domain`）。作为参考，我看不到该表真正为您提供的内容（没有您尚未拥有的关联数据，您`my_other_table`需要用于连接或其他操作）。

在`my_other_table`你总是可以这样做：

```
status TEXT NOT NULL CHECK (status IN ('pending', 'in_progress', ...)) 
```

也没有必要为此目的使用字符串。C++`enum`值应该可以正常工作，并且也可以通过`CHECK`约束进行检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T05:16:08.603

那么，您似乎想要选择选项 2。我有点假设原因在于您无法共享的表格。在那种情况下，我会使用[GNU autogen](http://www.gnu.org/software/autogen/)并执行以下操作：

**状态.def**

```
自动生成定义状态；

状态 = { 数字 =“1”; 名称="待定"; };
状态 = { 数 =“2”；name="in_progress"; };
状态 = { 数字 =“3”; 名称="错误"; };
状态 = { 数字 =“4”; 名称=“完成”；};

```

**根.tpl**

```
[+ autogen5 模板
sql=%s.sql
h=%sh
(setenv "SHELL" "/bin/sh") +][+ CASE (后缀) +][+ == sql +]
CREATE TABLE status_domain (id INTEGER PRIMARY KEY, status TEXT NOT NULL UNIQUE);
[+ FOR status "\n" +]INSERT INTO status_domain VALUES ([+num+], '[+name+]');[+
ENDFOR+]
创建表 my_other_table (
     .
     .
    status_domain_id 整数，     
     .
     .
    外键 (status_domain_id) 参考 status_domain(id)
);
[+ == h +]枚举StatusDomainEnum {
[+ FOR 状态 ",\n" +] [+name+] = [+num+][+ENDFOR+]
};
[+ESAC+]

```

哪个输出：

**状态.h**

```
枚举状态域枚举 {
    待定 = 1，
    in_progress = 2,
    错误 = 3，
    完成 = 4
};

```

和

**状态.sql**

```
CREATE TABLE status_domain (id INTEGER PRIMARY KEY, status TEXT NOT NULL UNIQUE);
INSERT INTO status_domain VALUES (1, 'pending');
INSERT INTO status_domain VALUES (2, 'in_progress');
INSERT INTO status_domain VALUES (3, 'error');
INSERT INTO status_domain VALUES (4, 'complete');
创建表 my_other_table (
    .
    .
    status_domain_id 整数，     
    .
    .
    外键 (status_domain_id) 参考 status_domain(id)
);

```

# mysql - 在 MySQL 数据库中创建使用名称自动递增的列

> ID：14178959
> 
> 赞同：1
> 
> 时间：2013-01-06T03:20:11.380
> 
> 标签：mysql, database, auto-increment

我知道这似乎是一个奇怪的问题，但让我试着解释一下。我有一个名为“计划”的数据库表，其中第一列称为“用户名”，后面的列称为“问题 1”、“问题 2”等。我现在需要添加大约一百多个这样命名的列，但如果有一个 sql 语句会自动为我做这件事，那就太好了。

我知道这不是以最好的方式设置的，但是如果您有解决方案，请告诉我:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T03:27:01.847

没有任何 SQL 命令或功能可以自动执行此操作；确保您可以生成更改表语句并以编程方式添加列；但是，您的设计将存在严重缺陷。

您应该创建一个包含问题、user_id（或用户名，无论是 PK 是什么）的表来保存记录，而不是添加列。如果您需要通过编号（或 ID）识别问题，只需添加另一个名为 question_id 的列。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-06T03:25:21.443

将sql中的查询写入excel。将递增的数字分开。向下拖动直到 excel 第 100 行。很难解释，但我想你会弄明白的。您将有 100 个递增的添加列 sql 语句。复制粘贴在查询工具上运行。

# silverlight - RIA 服务验证，如果无效则不更新值

> ID：14178966
> 
> 赞同：2
> 
> 时间：2013-01-06T03:21:36.860
> 
> 标签：silverlight, validation, ria

在我的 Silverlight RIA 应用程序中，需要验证十进制属性。我尝试使用 RegularExpression 和 Range 来注释元数据中的属性，如下所示：

```
//[RegularExpression(@"^[1-9]\d*(\.\d+)?$", ErrorMessage = "Quantity has to be a positive numeric value")]      
[Range(typeof(decimal), "1", "1000",  ErrorMessage = "Quantity must be between {1} and {2}")] 
```

添加新实体时，两者都可以验证数字值，但如果我键入字母，两者都不会标记任何错误，但也不会更新属性。比如我先输入2，然后改成“test”，文本框上就没有错误信息了。保存实体时，属性值仍为 2。

这是预期的行为吗？如果是，我怎样才能将任何非数字条目标记为错误？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T15:48:20.117

我找到了原因。由于属性类型是十进制，当输入文本时，它会抛出异常并且永远不会到达“设置”，因此不会触发验证。在控件上设置“ValidatesOnExceptions=True”将显示默认错误消息“无效格式”。

# python - httpresponse 不呈现 html 页面

> ID：14178970
> 
> 赞同：0
> 
> 时间：2013-01-06T03:23:22.670
> 
> 标签：python, django

我是 Django 的新手，并使用应用程序创建了一个示例项目：

视图.py

```
from django.http import HttpResponse,Http404
from django.contrib.auth.models import User
from django.template import Context
from django.template.loader import get_template

def main_page(request):
  template = get_template('main_page.html')
  variables = Context({
    'head_title': u'Django Bookmarks',
    'page_title': u'Welcome to Django Bookmarks',
    'page_body': u'Where you can store and share bookmarks!'
  })
  output = template.render(variables)
  print 'output',output
  return HttpResponse(output) 
```

网址.py

```
from django.conf.urls.defaults import patterns, include, url
from bookmarks.views import *

urlpatterns = patterns('',
        (r'^$',main_page),
        (r'^user/(\w+)/$',user_page),
        #(r'login/$','django.contrib.auth.views.login')
) 
```

main_page.html

```
<html>
    <head>
        <title>{{head_title}}</h1>
    </head>
    <body>
        <h1>{{page_title}}</h1>
        <p>{{page_body}}</p>
    </body>
</html> 
```

当我打印输出变量时，我看到一切都很好，但是当我运行服务器并指向页面时，我看到一个空白页。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T03:32:50.670

您缺少结束标记`</title>` 您的模板应如下所示

```
<html>
    <head>
        <title>{{head_title}}</title>
    </head>
    <body>
        <h1>{{page_title}}</h1>
        <p>{{page_body}}</p>
    </body>
</html> 
```

# javascript - 表单字段到 URL

> ID：14178978
> 
> 赞同：0
> 
> 时间：2013-01-06T03:25:23.753
> 
> 标签：javascript, forms

我是这种东西的新手，如果这不可能或没有任何意义，我很抱歉。我正在制作一个应用程序，其中有人将用户名放入表单中，当他们按下输入时，弹出窗口会说单词，但我想要在他们按下确定后将用户名放入表单中----instagram://user?username - - 它说用户名就是我希望表单中的用户名去的地方，然后它将去那里。抱歉，如果这没有意义或不可能想知道它是否是

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T03:36:10.097

您想将表单操作设置为 GET。我相信这就是你想要问的。

```
<form action='[url submitting to]' method='GET'></form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T03:40:16.730

使用 jQuery，如果这是您正在使用的语言，您可以阻止提交并获取用户名字段并将其添加到 url 并加载此页面。

```
 //html
        <form>
           <input id="username">
        </form>

         //javascript 

         //the submit event is captured
         $('form').on('submit', function(e){

             //the event is passed in on the function and is used to prevent the 
             //default action so we can perform some further action
             e.preventDefault();

             //here we grab the value of the the #username text field
             var user = $('input#username').val();

             //here we are loading the instagram page based upon the user's textfield 
             window.location = 'instagram://user?' + user;
         }); 
```

这是你想要的？

# java - Java BCEL 注入/替换出错

> ID：14178980
> 
> 赞同：1
> 
> 时间：2013-01-06T03:25:38.980
> 
> 标签：java, minecraft, bcel

背景：我正在注入 Minecraft Launcher 以获取小程序（我已经完成了），但现在我希望通过我的类加载器加载 Minecraft 的文件。我找到了 GameUpdater.java（Minecraft 的游戏更新程序，也是客户端小程序的调度程序）的方法，并且在该方法下有一个名为“createApplet”的方法。

GameUpdater.java：

```
public Applet createApplet() throws ClassNotFoundException, InstantiationException, IllegalAccessException {
Class localClass = classLoader.loadClass("net.minecraft.client.MinecraftApplet");
return (Applet)localClass.newInstance();
} 
```

好的，很简单，将 classLoader.loadClass 替换为您自己的静态加载方法。所以，我尝试在我的类加载器中，这是我的转换代码：

```
for(Method method : generator.getMethods()) {
                    if(method.getName().equals("createApplet")) {
                        ConstantPoolGen cpg = generator.getConstantPool();
                        MethodGen methodGen = new MethodGen(method, generator.getClassName(), cpg);
                        Instruction instruction = null;
                        InstructionList instructionList = methodGen.getInstructionList();
                        InstructionHandle[] instructionHandles = instructionList.getInstructionHandles();
                        for(int i = 0; i < instructionHandles.length; i++) {
                            //System.out.println(instructionHandles[i].getInstruction());  //debug
                            if(instructionHandles[i].getInstruction() instanceof LDC) {
                                instruction = instructionHandles[i].getInstruction();
                                InstructionFactory instructionFactory = new InstructionFactory(generator, cpg);
                                InvokeInstruction classLoaderCall =
                                        instructionFactory.createInvoke(
                                        "MinecraftLauncher", "loadClass", Type.CLASS, new Type[]{Type.STRING},Constants.INVOKESTATIC);
                                instructionList.insert(instruction, classLoaderCall);
                                methodGen.setInstructionList(instructionList);
                                instructionList.setPositions();
                                methodGen.setMaxStack();
                                methodGen.setMaxLocals();
                                methodGen.removeLineNumbers();
                                generator.replaceMethod(method, methodGen.getMethod());
                                generator.getJavaClass().dump("gameupdater.class");
                            }
                        }
                    } 
```

然而，我倒在了我的脸上。这是更新后的 gameupdater.class（如您在上面看到的，我将其转储）

```
public Applet createApplet() throws ClassNotFoundException, InstantiationException, IllegalAccessException {
Class localClass = MinecraftLauncher.loadClass(classLoader).loadClass("net.minecraft.client.MinecraftApplet");
return (Applet)localClass.newInstance();
} 
```

这是 GameUpdater 中 createApplet 方法的字节码图片 ![字节码信息](../Images/24ff29403f01e4a4e10c8139154db77c.png)

现在，我不知道该怎么做。如果有人能指出我正确的方向，那就太棒了！同时，我将继续尝试并阅读 bcel 文档。

如果您对更多代码等有任何疑问，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T05:59:20.977

解决了。诀窍是在添加新的（您的静态方法替换加载函数）之后删除 InvokerVirtual（从指令列表中删除 OPCODE）。

例子

```
instructionList.insert(instruction, classLoaderCall);
instructionList.delete(instruction); 
```

# php - php - 无法将查询结果输出。（如果有输出）

> ID：14178981
> 
> 赞同：1
> 
> 时间：2013-01-06T03:25:43.580
> 
> 标签：php

该程序从用户那里获取一个变量$ask，该变量是一个感兴趣的类别，例如运动、电影等。然后检查数据库是否存在该类别，如果不存在则将其添加到数据库中。数据库内存，表 - “interestcategories”，目前只有 3 列 IID、Category 和 Comment。添加到数据库是可行的，但是如果它在数据库中，则打印出其中的内容是行不通的......

问题主要在于以下几行：

```
 while ($row = mysqli_fetch_assoc($result)) {
    printf ("%s (%s)\n", $row["Category"], $row["Comment"]);
   }
   /* free result set */
   mysqli_free_result($result); 
```

由于没有任何内容出现在屏幕上，甚至没有错误消息。应该只打印一行，因为该类别在表格中只出现一次。有任何想法吗？

```
 <?php
  error_reporting(E_ALL);
  $link = mysqli_connect("localhost", "root", "", "memory");
  /* check connection */
  if (mysqli_connect_errno()) {
  printf("Connect failed: %s\n", mysqli_connect_error());
  exit();
  }

function notAnInterest($ask, $link)
{
$query2 = "INSERT into interestcategories (Category, Comment)
        VALUES ('$ask', 'Added by user') ";

$result2 = mysqli_query($link, $query2);
echo "<pre>Debug: $query2</pre>\n";
if ( false===$result2 ) {
  printf("error: %s\n", mysqli_error($link)); 
  }
 echo 'added ' . $ask; 
 }

 if(isset($_POST['ask']) === true && empty($_POST['ask']) === false) {
 $ask = trim($_POST['ask']);
$query = "
SELECT  *
FROM    `interestcategories`
WHERE `interestcategories`.`Category` = '$ask' ";

if ($result = mysqli_query($link, $query)) {
if(($row = mysqli_fetch_assoc($result)) === null) {
notAnInterest($ask, $link);
}
 /* fetch associative array */
    printf('here1');
 while ($row = mysqli_fetch_assoc($result)) {
    printf('here2');
  //printf ("%s (%s)\n", $row["Category"], $row["Comment"]);
}

 /* free result set */
 mysqli_free_result($result);
}

}

 /* close connection */
  mysqli_close($link);

  ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T04:06:57.663

改变：

```
if ($result = mysqli_query($link, $query)) 
{
    if (($row = mysqli_fetch_assoc($result)) === null) 
    {
        notAnInterest($ask, $link);
    }

    /* fetch associative array */
    while ($row = mysqli_fetch_assoc($result)) 
    {
        printf ("%s (%s)\n", $row['Category'], $row['Comment']);
    }

    /* free result set */
    mysqli_free_result($result);
} 
```

到：

```
if ($result = mysqli_query($link, $query)) 
{
    if (0 == mysqli_num_rows($result)) 
    {
        notAnInterest($ask, $link);
    }
    else
    {
        /* fetch associative array */
        while ($row = mysqli_fetch_assoc($result)) 
        {
            printf ("%s (%s)\n", $row['Category'], $row['Comment']);
        }
    }

    /* free result set */
    mysqli_free_result($result);
} 
```

# php - 根据员工职务显示 HTML 表单

> ID：14178984
> 
> 赞同：0
> 
> 时间：2013-01-06T03:26:03.550
> 
> 标签：php, html, mysql

我有一个更新页面，我可以在其中检查员工的头衔，无论他是医生还是护士。如果员工是医生/护士，则会显示 HTML 表单，如果不是医生/护士，则只会显示患者信息，无法编辑。但是我的代码以某种方式跳过了我想显示表单的部分，即使我以医生/护士的身份登录也是如此。你能帮我解决这个问题吗......

```
<?php
$a=$_SESSION['employeeID'];
$title="SELECT title FROM employee WHERE employeeID = '$a'";

if($title == 'nurse' OR $title == 'doctor')
{

echo '<form method="post" id="customForm" action="add_assessment.php">
<table>
<input type="hidden" name="res_id" value="' . $_GET['res_id'] . '" />
<tr>
<td><label for="name"><font style="color:white">Symptoms</font><font style="color:gray"></font></label>
<input id="name" name="symptoms" type="text" /></td>
<td><label for="name"><font style="color:white">Respiratory Rate</font></label>
<input id="name" name="respiratoryRate" type="text" /></td>
<td><label for="name"><font style="color:white">Temperature</font> <font     style="color:gray"></font></label>
<input id="name" name="temperature" type="text" /></td>
</tr>
<tr>
<td><label for="name"><font style="color:white">Blood Pressure</font></label>
<input id="name" input name="bloodPressure" type="text" class="input2"/></td>
<td><label for="name"><font style="color:white">Pulse Rate</font></label>
<input id="name" input name="pulseRate" type="text" /></td>
</tr>
<tr>
<td><label for="name"><font style="color:white">Chief Complaint</font></label>
<input id="name" input name="complaint" type="text" class="input2"/></td>
</tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><input id="send" name="send" type="submit" value="Submit" /></td>
</tr>
</table>
</form>';
}
else 
{
$host="localhost"; 
$username="root"; 
$password=""; // password
$db_name="rhu"; // Database name
$tbl_name="assessment"; // Table name 
mysql_connect("$host", "$username", "$password");
mysql_select_db("$db_name");
$id = $_GET['res_id'];
$sql = mysql_query("SELECT * FROM assessment WHERE patientID='$id'");
while($row = mysql_fetch_array($sql))
{
echo "<p>ID: ".$id."</p>";
echo "<p>Assessment ID: ".$row['assessmentID']."</p>";
echo "<p>Symptoms: ".$row['symptoms']."</p>";
echo "<p>Respiratory Rate: ".$row['respiratoryRate']."</p>";
echo "<p>Temperature: ".$row['temperature']."</p>";
echo "<p>Blood Pressure: ".$row['bloodPressure']."</p>";
echo "<p>Pulse Rate: ".$row['pulseRate']."</p>";
echo "<p>Complaints: ".$row['complaint']."</p>";
echo "<p>Date: ".$row['date']."</p>";
echo "<br>";

}
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T03:34:37.230

在其当前状态下，您只需将字符串分配给变量`$title`。您*实际上*是在说那`$title`是字符串，`"SELECT title FROM employee WHERE employeeID = '$a'";`因此它正在跳过`if($title == 'nurse' OR $title == 'doctor')`.

你也没有执行 MySQL 查询，先试试这个

```
$a=$_SESSION['employeeID'];
$sql = mysql_query("SELECT title FROM employee WHERE employeeID = '"$a"'");
while($row = mysql_fetch_array($sql)){
  $title = $row['title'];
if($title == 'nurse' OR $title == 'doctor')
{
   echo.... 
```

您还应该注意，`mysql_*`它已被弃用，并将在未来作为解决方案逐步淘汰 PHP。为了使您的代码适应未来，请考虑使用`mysqli`或 PDO 事务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T03:30:37.097

你可以这样试试——

```
$sql = mysql_query("SELECT title FROM employee WHERE employeeID = '$a'");
while($row = mysql_fetch_array($sql)){
$title = $row['title'];

if($title == 'nurse' OR $title == 'doctor')
{ 
```

...继续编码

# c++ - 重载的构造函数全部显示，而不仅仅是目标构造函数

> ID：14178988
> 
> 赞同：0
> 
> 时间：2013-01-06T03:26:45.357
> 
> 标签：c++, oop, reference, constructor, constructor-overloading

为什么在 main 中的对象使用 Add() 函数后 Print() 函数没有正确更新？

```
int main()
{
   Rational myRational(3,5);
   myRational.Print(); //Displays 3/5 as expected
   myRational.Add(2);
   myRational.Print(); //Displays 3/5 instead of 13/5
   return 0;
}

//from Rational.cpp

//Overloaded constructors
Rational::Rational() :
    num(0),
    denom(1)
{
}
Rational::Rational(int n) :
    num(n),
    denom(1)
{
}

Rational::Rational(int n, int d) :
    num(n),
    denom(d)
{
}

Rational Rational::Add(const Rational& r1) const
{
    int numerat = num * r1.getDenominator() +
                 denom * r1.getNumerator();
    int denomin = denom * r1.getDenominator();

    return Rational(numerat, denomin);
} 

void Rational::Print()
{
    cout << num << "/" << denom <<endl;
} 
```

调试代码时，Add 函数按预期返回值 13 和 5，正确的构造函数也会返回。不幸的是，Print() 函数保留了原始分数而不是新值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T03:30:40.630

因为方法`Rational Rational::Add(const Rational& r1) const`，正如签名所暗示的以及它是如何实现的，它不会修改调用它的对象，而是创建一个新`Rational`实例并返回它。

尝试：

```
myRational.Print(); //Displays 3/5 as expected
myRational = myRational.Add(2);
myRational.Print(); //Displays 3/5 instead of 13/5 
```

**提示**：签名`const`末尾的事实意味着该方法不会修改调用它的实例的任何内容，这意味着此类方法永远不会修改`myRational`您调用它的实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T03:30:20.143

这个功能：

```
Rational Rational::Add(const Rational& r1) const 
```

将结果返回到调用范围。您没有将结果存储在任何地方。因此，您将获得`myRational`原始值。

尝试将值保存在对象中，然后打印。如果您也想保留原始内容`myRational`，请尝试以下操作：

```
int main()
{
       Rational myRational(3,5);
       myRational.Print(); //Displays 3/5 as expected
       Rational myRational2 = myRational.Add(2); //Result stored in new object
       myRational2.Print(); //Printed new object values
       return 0;
} 
```

# backbone.js - Backbone.js 使用 jsonp 更新集合

> ID：14178989
> 
> 赞同：1
> 
> 时间：2013-01-06T03:26:58.007
> 
> 标签：backbone.js, jsonp

当我第一次初始化一个集合时，我使用

```
this.fooCollection = new myCollection();
this.fooCollection.fetch({dataType: 'jsonp'}); 
```

这工作正常。但是当我稍后尝试在视图中更新此集合时，使用

```
this.fooCollection.fetch({dataType: 'jsonp'}); 
```

它根本不更新集合。它也不会调用“成功”回调。从 Firebug 中，我可以找到响应符合预期，但在 Firebug 的 NET 面板中，我找不到 JSON 选项卡。任何人都知道使用 jsonp 更新现有集合的正确方法是什么？

# iphone - 使用发电机

> ID：14178992
> 
> 赞同：0
> 
> 时间：2013-01-06T03:27:21.043
> 
> 标签：iphone, objective-c, ios, ipad, mogenerator

到目前为止，我一直在使用类别，但是随着一个新项目的开始，我环顾四周寻找新玩具，发现**了 mogenerator**。

我已经成功生成了 _entity 和实体文件，太好了。但现在呢？
我应该把我所有的代码都放在实体中吗？现在我不能使用 generate nsmo 子类，是否必须手动添加所有新属性？如何使用 _entity 中的附加方法，我必须导入 _entity 或实体文件还是两者都导入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T04:54:10.937

因此，对于遇到相同问题的任何人。

事情似乎出了问题，因为 Entity 类应该继承自 _Entity 类。我没有从任何指南中选择这个，但现在看起来很明显！然后，如果您愿意，Entity 类可以是一个空白实现。

# html - 所有邮件客户端都支持拉伸 1px 高度的图像吗？

> ID：14178996
> 
> 赞同：0
> 
> 时间：2013-01-06T03:28:19.690
> 
> 标签：html, css, email, html-email, newsletter

我遇到了每个开发人员在构建时事通讯时都会遇到的问题。设计师做了一些没有做的事情，客户喜欢它。这次也是这样。包含文本的白色盒子有一个漂亮的盒子阴影[http://puu.sh/1K98C](http://puu.sh/1K98C)

将其用作带有repeat-y的背景图像并不适用于所有客户端（例如outlook）但对我来说一个简单的解决方案是将其作为图像插入并让浏览器/客户端像这样拉伸它：

```
<td width="38" valign="top" >
  <img src="http://puu.sh/1K98C" width="38" style="height: 100%" />
</td> 
```

编辑：在 IE 中测试后，我看到 IE 不允许 % 拉伸图像。所以这不是一个解决方案。是否有其他解决方法来解决此问题？还是将这两个图像切成确切的长度是唯一的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T14:40:36.347

据我所知，解决此问题的唯一方法是将阴影图像高度设置为 px，该高度比文本略大。我知道这不是一个非常灵活的选择，特别是如果您有所见即所得或让客户编辑内容的东西（因为您无法猜测所需的高度）。

此外，在不同的电子邮件客户端中进行测试，以确保文本不会超出您设定的高度。我发现即使设置行高，一些电子邮件客户端 (Gmail) 也会比其他客户端更容易溢出文本。