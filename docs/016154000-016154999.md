# StackOverflow 问答 16154000-16154999

# ruby-on-rails - 是否可以通过给定的 url 在 Rails 中查找路线？

> ID：16154000
> 
> 赞同：2
> 
> 时间：2013-04-22T18:21:26.980
> 
> 标签：ruby-on-rails, routes, rake

有时，当定制一个大型的现有 Rails 平台（例如 Spree）时，能够通过 url 查找路线会很好。就像是：

```
rake routes URL=/preexisting/url 
```

这显然行不通，但是 Rails 中有类似的东西吗？我已经尝试查找 rake 路线的文档，但找不到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T18:26:44.780

If you're using a Unix-based OS (Linux/OSX) you can use [`grep`](https://en.wikipedia.org/wiki/Grep).

```
rake routes | grep /preexisting/url 
```

What this does is takes the output of `rake routes`, passes (or "pipes") it to `grep`, which then looks for lines matching "/preexisting/url".

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T18:42:40.493

有两种方法：

```
rake routes | grep 'preexisting\/url' 
```

或者，如果您安装了 pry-rails gem，您可以在 Rails 控制台中执行此操作：

```
show-routes -G '/preexisting/url' 
```

如果 URL 中包含 id 或其他参数，您可能希望将该部分留在搜索字符串之外。

我没用过，但我听说过一个叫做六分仪的 gem，它会在浏览器窗口中显示你的路线。这可能是查看它们的好方法，只需使用浏览器的页面搜索功能在其中查找 url。

# vsto - 如何摆脱自定义任务窗格的菜单栏？

> ID：16154005
> 
> 赞同：2
> 
> 时间：2013-04-22T18:21:39.563
> 
> 标签：vsto, add-in, ctp

![在此处输入图像描述](https://i.stack.imgur.com/slRIn.jpg)你好，

我为 Excel 构建了一个简单的自定义任务窗格，并且希望窗格内的用户控件顶部与列标题的顶部对齐，但顶部有一个丑陋的菜单栏阻止它这样做（图片附加；它是上面带有“MyCustomTaskPane”的栏）。有谁知道如何去做这件事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:36:04.223

转到 Form 的属性并将 FormBorderStyle 属性设置为 None。

顺便说一句，没有附加图像。

# sed - 用单引号替换所有双引号

> ID：16154007
> 
> 赞同：59
> 
> 时间：2013-04-22T18:21:47.203
> 
> 标签：sed

我正在尝试用单引号替换字符串中的所有双引号。这是我的表达：

```
echo "<a href=\"#\" id=\"resendActivationMailLink\">here</a>" | sed "s/\"/'/" 
```

不幸的是，只有第一个双引号被替换：S

```
<a href='#" id="resendActivationMailLink">here</a> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2013-04-22T18:23:01.867

您需要将`g`标志传递给`sed`：

```
sed "s/\"/'/g" 
```

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2013-04-22T18:30:35.493

You could use `tr` here, concise and less of quoting headache:

```
tr '"' "'" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-23T05:49:38.767

This might work for you:

```
sed -i "y/\"/'/" hello.txt 
```

`-i` option is used to edit in place on the file hello.txt.

# javascript - 如何在输入上创建两个按钮，例如 Tab（下一个焦点）按键和 Shift+Tab（上一个焦点）

> ID：16154008
> 
> 赞同：1
> 
> 时间：2013-04-22T18:21:47.770
> 
> 标签：javascript, jquery, html, css

在互联网上搜索 2 小时后找不到我想要的东西。

这是我的问题：如何创建一个类似于“Tab 键”和“Shift + tab 键”的按钮，它关注下一个输入文本或上一个和第一次按下将关注第一个输入。

像这样的东西：

```
<div class="inputs">
    <input type="text" tabindex="1"/>
    <input type="text" tabindex="2" />
    <input type="text" tabindex="3" />
    <input type="text" tabindex="4" />
    <button>Tab(Go next input to Focus)</button>
    <button>Shift + Tab (fo Previous input to focus)</button>
</div> 
```

抱歉我的问题和英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:38:10.413

如果您首先将`input`具有 的存储`focus`到 a中`var`，那么它真的很简单：

`**[LIVE DEMO](http://jsbin.com/akabac/3/edit)**`

```
var $curr;
$('.inputs input').on('focus',function(){
  $curr = $(this);
});
$('.prevTab, .nextTab').on('click', function( e ){
  $curr[ $(this).hasClass("nextTab") ? "next" : "prev" ]('input').focus();
}); 
```

* * *

更复杂的线实际上是

`$curr.prev('input').focus();`或者取决于使用简单的*三元运算符*逻辑`$curr.next('input').focus();`单击哪个按钮：

 *```
if .nextTab is clicked ["next"] will be used
if .prevTab is clicked ["prev"] will be used 
```

考虑到符号

```
$curr["next"]() is the same as $curr.next() method
$curr["prev"]() is the same as $curr.prev() method 
```

只是使用括号插入`dot`符号。

比我们只是确保`prev`or`next`元素实际上是一个`input`using：

```
 ('input').focus(); // and set the focus to it! 
```*

# java - 更改现有接口 api 方法以返回对象而不是 void 的最佳方法？

> ID：16154013
> 
> 赞同：2
> 
> 时间：2013-04-22T18:21:56.847
> 
> 标签：java, api, interface, refactoring

我有一个基于接口的现有设计，该接口公开了一个 API 方法，该方法当前返回 void。并且有许多不同的实现类实现了这个接口。但是，现在我想进行更改，以便这些实现中很少有返回对象。明显的解决方案似乎是：让所有实现都返回“对象”，并期望在不需要的地方忽略返回的值。但是对于这种重构是否有更清洁和更好的解决方案？

是否有任何可以在这里应用的设计模式可以使设计更好，以防我必须对所有现有实现进行更改，无论是否需要。

下图：

```
//the interface
public interface CommonInterface{
    public void commonMethod();   //this is where I want to change the return type 
                                      //to 'Object' for some of the implementations
}

//the factory
public CommonInterface getImplInstance() {

     CommonInterface implInstance = instance; //logic to return corresponding instance
     return implInstance;
    }

//the implementation (there are multiple implemenations like this)
public class Impl1 implements CommonInterface {
   public void commonMethod() {
     //some logic
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T18:23:57.420

一种选择是创建一个新接口 CommonInterface2，它实现了新方法。这需要对“少数这些实现”而不是“许多实现类”进行更改。

```
 public interface CommonInterface2 extends CommonInterface {
      public Object commonMethodAndReturn(); 
  } 
```

仅在返回对象的实现子集中实现此功能。

```
 public class OneOfTheFew implements CommonInterface2 { ... }
 public class OneOfTheMany implements CommonInterface { ... } 
```

仅在需要返回值的情况下测试新接口。

```
 public void foo( CommonInterface ci ) {
    if ( ci instanceof CommonInterface2 ) {
        CommonInterface2 ci2 = (CommonInterface2) ci;
        ...
    }
 } 
```

# android - 如何在android应用程序中更改主页按钮的执行结果

> ID：16154014
> 
> 赞同：0
> 
> 时间：2013-04-22T18:21:57.830
> 
> 标签：android, listener

我认为我的问题很难理解，但这里有一个简单的例子来理解我想要什么

上面这个方法是在生成新类扩展Activity时默认创建的，在android中点击Menu Button时可以显示菜单

```
public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        Log.i("---------------", "----------onCreateOptionsMenu--------------");
        return true;

    } 
```

我的目的是创建一个方法，如 onCreateOptionsMenu，但用于 Android 手机中的 Home Button

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T18:23:22.730

主页按钮不能被覆盖。唯一的选择是编写自定义主页启动器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T18:25:52.770

There is no way to intercept the home button on Android, unless you make your app the home screen. This is for security reasons, so that malicious apps cannot take over your device by overriding all the buttons that can exit. The home button is the one sure shot way to be able to leave any app.

If you want to handle the HOME button, implement a home screen.

[Override home and back button is case a boolean is true](https://stackoverflow.com/questions/10025660/override-home-and-back-button-is-case-a-boolean-is-true/10025904#10025904)

Check the above link and check the comments also. The approach in the link does not work on ICS.

Useful links

[Disable Home Button in Android ICS (4.0)](https://stackoverflow.com/questions/10077675/disable-home-button-in-android-ics-4-0)

[How can I disable Android 4.0 home button?](https://stackoverflow.com/questions/11394843/how-can-i-disable-android-4-0-home-button)

# xcode - 使用数组中的日期按日期对 UITableview 进行排序

> ID：16154017
> 
> 赞同：0
> 
> 时间：2013-04-22T18:22:05.427
> 
> 标签：xcode, json, uitableview, nsarray

我有一个包含以下信息的数组，从 JSON 中检索：

```
Contents of events: (
    "<CalendarModel> \n   [title]: Arsenal v Man Utd\n   [time]: (\n       \"<Time> \\n   [startTime]: 2013-04-28T17:00:00.000+02:...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Reading v QPR\n   [time]: (\n       \"<Time> \\n   [startTime]: 2013-04-28T14:30:00.000+02:...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Newcastle v Liverpool\n   [time]: (\n       \"<Time> \\n   [startTime]: 2013-04-27T18:30:00.000+02:...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: TBC\n   [time]: (\n       \"<Time> \\n   [startTime]: 2013-04-27T16:00:00.000+02:...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Man City v West Ham\n   [time]: (\n       \"<Time> \\n   [startTime]: 2013-04-27T13:45:00.000+02:...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Man Utd v Aston Villa\n   [time]: (\n       \"<Time> \\n   [startTime]: 2013-04-22T21:00:00.000+02:...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Liverpool v Chelsea\n   [time]: (\n       \"<Time> \\n   [startTime]: 2013-04-21T17:00:00.000+02:...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Spurs v Man City\n   [time]: (\n       \"<Time> \\n   [startTime]: 2013-04-21T14:30:00.000+02:...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Fulham v Arsenal\n   [time]: (\n       \"<Time> \\n   [startTime]: 2013-04-20T16:00:00.000+02:...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: West Ham v Man Utd\n   [time]: (\n       \"<Time> \\n   [startTime]: 2013-04-17T20:45:00.000+02:...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Arsenal v Everton\n   [time]: (\n       \"<Time> \\n   [startTime]: 2013-04-16T20:45:00.000+02:...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Chelsea v Man City\n   [time]: (\n       \"<Time> \\n   [startTime]: 2013-04-14T17:00:00.000+02:...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Stoke v Man Utd\n   [time]: (\n       \"<Time> \\n   [startTime]: 2013-04-14T15:00:00.000+02:...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Millwall v Wigan\n   [time]: (\n       \"<Time> \\n   [startTime]: 2013-04-13T18:15:00.000+02:...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Reading v Liverpool\n   [time]: (\n       \"<Time> \\n   [startTime]: 2013-04-13T16:00:00.000+02:...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: FC Basel v Spurs\n   [time]: (\n       \"<Time> \\n   [startTime]: 2013-04-11T21:05:00.000+02:...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Rubin Kazan v Chelsea\n   [time]: (\n       \"<Time> \\n   [startTime]: 2013-04-11T21:05:00.000+02:...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Juventus v Bayern Munich\n   [time]: (\n       \"<Time> \\n   [startTime]: 2013-04-10T20:45:00.000+02:...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Barcelona v Paris St Germain\n   [time]: (\n       \"<Time> \\n   [startTime]: 2013-04-10T20:45:00.000+02:...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Everton v Stoke\n   [time]: (\n       \"<Time> \\n   [startTime]: 2013-03-30T18:30:00.000+01:...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Swansea v Spurs\n   [time]: (\n       \"<Time> \\n   [startTime]: 2013-03-30T16:00:00.000+01:...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Sunderland v Man Utd\n   [time]: (\n       \"<Time> \\n   [startTime]: 2013-03-30T13:45:00.000+01:...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Ireland v Austria\n   [time]: (\n       \"<Time> \\n   [startTime]: 2013-03-26T20:45:00.000+01:...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Denmark v Bulgaria\n   [time]: (\n       \"<Time> \\n   [startTime]: 2013-03-26T20:15:00.000+01:...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Sweden v Ireland\n   [time]: (\n       \"<Time> \\n   [startTime]: 2013-03-22T19:45:00.000+01:...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Dennis McLaughlin\n   [time]: (\n       \"<Time> \\n   [startTime]: 2013-03-31T22:30:00.000+02:...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Lee Thomas\n   [time]: (\n       \"<Time> \\n   [startTime]: 2013-03-30T23:00:00.000+01:...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Lee Thomas\n   [time]: (\n       \"<Time> \\n   [startTime]: 2013-03-29T22:30:00.000+01:...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Lee Thomas\n   [time]: (\n       \"<Time> \\n   [startTime]: 2013-03-28T21:30:00.000+01:...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Lee Thomas\n   [time]: (\n       \"<Time> \\n   [startTime]: 2013-03-27T21:30:00.000+01:...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Pat Kelly\n   [time]: (\n       \"<Time> \\n   [startTime]: 2013-02-14\\n   [endTime]: 2...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Ray Weaver\n   [time]: (\n       \"<Time> \\n   [startTime]: 2013-01-31\\n   [endTime]: 2...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Take the Biscuit\n   [time]: (\n       \"<Time> \\n   [startTime]: 2013-01-24\\n   [endTime]: 2...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: The McLaughlin Clan\n   [time]: (\n       \"<Time> \\n   [startTime]: 2013-01-18\\n   [endTime]: 2...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Local Artist\n   [time]: (\n       \"<Time> \\n   [startTime]: 2013-01-17\\n   [endTime]: 2...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Richie Vargas\n   [time]: (\n       \"<Time> \\n   [startTime]: 2013-01-10\\n   [endTime]: 2...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Tom Valbak\n   [time]: (\n       \"<Time> \\n   [startTime]: 2012-12-28\\n   [endTime]: 2...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Tom Brakl\n   [time]: (\n       \"<Time> \\n   [startTime]: 2012-12-25\\n   [endTime]: 2...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Tom Brakl\n   [time]: (\n       \"<Time> \\n   [startTime]: 2012-12-23\\n   [endTime]: 2...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Dessie Higgins\n   [time]: (\n       \"<Time> \\n   [startTime]: 2012-12-20\\n   [endTime]: 2...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Pat Kelly\n   [time]: (\n       \"<Time> \\n   [startTime]: 2012-12-13\\n   [endTime]: 2...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Rich Vargas\n   [time]: (\n       \"<Time> \\n   [startTime]: 2012-12-06\\n   [endTime]: 2...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Lee Thomas\n   [time]: (\n       \"<Time> \\n   [startTime]: 2012-11-22\\n   [endTime]: 2...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: International Jam Session\n   [time]: (\n       \"<Time> \\n   [startTime]: 2012-09-03T21:00:00.000+02:...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Kevin McKernan\n   [time]: (\n       \"<Time> \\n   [startTime]: 2012-08-30\\n   [endTime]: 2...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Lee Thomas\n   [time]: (\n       \"<Time> \\n   [startTime]: 2012-08-09\\n   [endTime]: 2...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Ray Weaver\n   [time]: (\n       \"<Time> \\n   [startTime]: 2012-07-19\\n   [endTime]: 2...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Gray Hawthorn\n   [time]: (\n       \"<Time> \\n   [startTime]: 2012-07-05\\n   [endTime]: 2...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Jimmy Walsh\n   [time]: (\n       \"<Time> \\n   [startTime]: 2012-06-07\\n   [endTime]: 2...\n</CalendarModel>",
    "<CalendarModel> \n   [title]: Take The Biscuit\n   [time]: (\n       \"<Time> \\n   [startTime]: 2012-11-29\\n   [endTime]: 2...\n</CalendarModel>" 
```

我正在尝试使用 startTime（只有日期，而不是小时和分钟）作为 titleForHeaderInSection 创建表视图。包含事件的 NSMutableArray 称为 events

任何人都可以帮助我朝着正确的方向前进。就目前而言，我正在获取没有标题的数据，只有事件。我现在有以下内容，但我仍在测试。这至少会创建一个名为 Test 的标头

```
 #pragma mark - table methods
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return events.count;
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 1;
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {

    CalendarModel* event = events[section];

    NSString *dato = [[event.time objectAtIndex:0] startTime];
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    formatter.dateFormat = @"yyyy-MM-dd'T'HH:mm:ss.SSSzzz";
    NSDate *gmtDate = [formatter dateFromString: dato];
    formatter.dateFormat = @"dd-MM-yyyy";
    dato = [formatter stringFromDate:gmtDate];
    return dato;
}

-(UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    CalendarModel* event = events[indexPath.row];

    NSString *dato = [[event.time objectAtIndex:0] startTime];
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    formatter.dateFormat = @"yyyy-MM-dd'T'HH:mm:ss.SSSzzz";
    NSDate *gmtDate = [formatter dateFromString: dato];
    formatter.dateFormat = @"HH:mm";
    dato = [formatter stringFromDate:gmtDate];

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"SportCell" forIndexPath:indexPath];
    cell.textLabel.text = [NSString stringWithFormat:@"%@",
                           event.title
                           ];
    cell.detailTextLabel.text = dato;

    return cell;
} 
```

已经编辑了上面的代码。它现在可以工作了，但每次都显示相同的游戏。好像它总是拿第一个，并表明了这一点。我认为问题出在

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 1;
} 
```

方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:14:55.897

您的 json 数据在[http://json.parser.online.fr/中给了我错误](http://json.parser.online.fr/)

尝试这个 ：

```
 - (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {

         CalendarModel* event = events[section];  // i think CalendarModel is a class in which you store yor json data one by one.
         return event.Title;  // In event class you have to save title;
       //return [[events objectAtIndex: section] objectForKey: @"Title"];
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:52:54.213

**我认为您在属性Title**中使用了大写字母。在数组中它只是“标题”

试试下面的代码行。

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {

  return [[events objectAtIndex: section] objectForKey: @"title"];
} 
```

*   *如果它不起作用，你能告诉我们`CalendarModel`课程吗*

您的实现的一个主要问题是，您的标题将始终显示第一个标题作为标题，因为您只有一个部分

如果我是 rite 你需要像这样实现

```
#pragma mark - table methods
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return events.count;
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 1;
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {

    return [[events objectAtIndex: section] objectForKey: @"title"];
}

-(UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    CalendarModel* event = events[indexPath.section];

    NSString *dato = [[event.time objectAtIndex:0] startTime];
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    formatter.dateFormat = @"yyyy-MM-dd'T'HH:mm:ss.SSSzzz";
    //formatter.timeZone = [NSTimeZone timeZoneForSecondsFromGMT:3600];
    //formatter.calendar = [[NSCalendar alloc]initWithCalendarIdentifier:NSGregorianCalendar];
    //formatter.locale = [[NSLocale alloc]initWithLocaleIdentifier:@"en_GB"];
    NSDate *gmtDate = [formatter dateFromString: dato];
    formatter.dateFormat = @"dd-MM-yyyy HH:mm";
    dato = [formatter stringFromDate:gmtDate];

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"SportCell" forIndexPath:indexPath];
    cell.textLabel.text = [NSString stringWithFormat:@"%@",
                           event.title
                           ];
    cell.detailTextLabel.text = dato;

    return cell;
} 
```

# java - 基于 Hibernate 中的某些条件的两个日期列中的日期

> ID：16154021
> 
> 赞同：0
> 
> 时间：2013-04-22T18:22:27.023
> 
> 标签：java, sql, hibernate, timestamp

我有一个表，其中有两个表示日期的时间戳列，`effective`我`expiration`需要获取当前时间戳落在这两个日期列中的那些行。

这可以通过将条件放入 SQL 查询中来完成，如下所示
`effectiveDate <= current_timestamp and current_timestamp < expirationDate`。

`expirationDate`问题是如果不为空，则要满足上述条件。如果它为空，那么只会
`effectiveDate <= current_timestamp`被检查。

我猜这是一种动态 SQL。我在项目中使用 Hibernate。我可以使用任何标准 API 或 HQL 或 SQL 任何东西。

请让我知道如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:25:20.440

Your first version is not quite SQL. But what you want is something like:

```
where effectiveDate <= current_timestamp and
      (expirationDate is NULL or current_timestamp < expirationDate) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:56:49.147

您想要的 SQL 没有什么动态的。尝试这个：

```
Criteria c = sf.getCurrentSession().createCriteria(MyObject.class)
    .add(Restrictions.lt("effectiveDate",dateArgument))
    .add(Restrictions.or(
        Restrictions.isNull("expirationDate"),
        Restrictions.gt("expirationDate",dateArgument))); 
```

调用`c.list()`将返回每`MyObject`一个`effectiveDate`小于给定日期*并且*也有一个`expirationDate`大于`null`或大于给定日期的日期。

只要您不介意使用 Hibernate Criteria Queries，就应该给您想要的东西。

**注意**：根据您的具体要求随意交换`.lt(...)`和`.gt(...)`使用。`.le(...)``.ge(...)`

# ruby-on-rails-3 - 耙中止！'rake/rdoctask' 已过时

> ID：16154022
> 
> 赞同：1
> 
> 时间：2013-04-22T18:22:30.443
> 
> 标签：ruby-on-rails-3, rake

```
rake aborted!
ERROR: 'rake/rdoctask' is obsolete and no longer supported. Use 'rdoc/task' (available in RDoc 2.4.2+) instead. 
```

其他问题建议修改 RakeFile，但在 Rails 3.1.0 中，我的 rakefile 如下所示：

```
1 #!/usr/bin/env rake
2 # Add your own tasks in files placed in lib/tasks ending in .rake,
3 # for example lib/tasks/capistrano.rake, and they will automatically be avai    lable to Rake.
4 
5 require File.expand_path('../config/application', __FILE__)
6
7 Store::Application.load_tasks 
```

我不知道如何应用这个答案：[错误：'rake/rdoctask' 已过时，不再受支持。改用“rdoc/task”（在 RDoc 2.4.2+ 中可用）](https://stackoverflow.com/questions/14117114/error-rake-rdoctask-is-obsolete-and-no-longer-supported-use-rdoc-task-ava)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T00:26:23.197

抱歉，我错过了您不知道如何应用建议答案的链接和评论。该链接中投票最多的答案建议您打开`Rakefile`（位于您的 rails 项目的根目录中）并替换该行：

```
require 'rake/rdoctask' 
```

... 和：

```
require 'rdoc/task' 
```

试一试，看看它是否有效。如果没有，我们总是可以转向其他一些建议并逐步完成。

# mongodb - 从延迟成员的人为错误中恢复？

> ID：16154031
> 
> 赞同：2
> 
> 时间：2013-04-22T18:23:09.150
> 
> 标签：mongodb

根据[MongoDB 文档](http://docs.mongodb.org/manual/core/replication/#delayed-members)

> 延迟成员可能有助于从各种人为错误中恢复。此类错误可能包括无意中删除的数据库或拙劣的应用程序升级。

如何从此类错误中恢复？

我假设我：

1.  停止延迟的成员。
2.  `mongo dump --oplog`
3.  `mongorestore --oplogReplay`

我如何告诉 mongorestore 重播除违规操作之外的所有内容？

我的假设正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T03:54:35.693

查看以下问题的详细答案： [Modify and replay MongoDB oplog](https://stackoverflow.com/questions/15444920/modify-and-replay-mongodb-oplog/15451297#15451297)它与您的问题的答案完全相同。

# python - 在 Python 中捕获 KeyError

> ID：16154032
> 
> 赞同：47
> 
> 时间：2013-04-22T18:23:09.383
> 
> 标签：python, try-catch, except

如果我运行代码：

```
connection = manager.connect("I2Cx") 
```

程序崩溃并报告 KeyError，因为 I2Cx 不存在（应该是 I2C）。

但如果我这样做：

```
try:
    connection = manager.connect("I2Cx")
except Exception, e:
    print e 
```

它不会为 e 打印任何内容。我希望能够打印抛出的异常。如果我尝试用除以零操作来做同样的事情，它在两种情况下都会被正确捕获和报告。我在这里想念什么？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-04-22T18:32:35.570

如果它引发一个没有消息的 KeyError，那么它不会打印任何东西。如果你这样做...

```
try:
    connection = manager.connect("I2Cx")
except Exception as e:
    print repr(e) 
```

...您至少会获得异常类名称。

更好的选择是使用多个`except`块，并且只“捕获”您打算处理的异常......

```
try:
    connection = manager.connect("I2Cx")
except KeyError as e:
    print 'I got a KeyError - reason "%s"' % str(e)
except IndexError as e:
    print 'I got an IndexError - reason "%s"' % str(e) 
```

捕获所有异常是有正当理由的，但如果你这样做了，你几乎应该总是重新引发它们......

```
try:
    connection = manager.connect("I2Cx")
except KeyError as e:
    print 'I got a KeyError - reason "%s"' % str(e)
except:
    print 'I got another exception, but I should re-raise'
    raise 
```

...因为您可能不想处理`KeyboardInterrupt`用户按下 CTRL-C 或`SystemExit`-block`try`调用`sys.exit()`.

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2018-10-17T13:50:04.683

我正在使用 Python 3.6，并且在 Exception 和 e 之间使用逗号不起作用。我需要使用以下语法（仅供任何想知道的人使用）

```
try:
    connection = manager.connect("I2Cx")
except KeyError as e:
    print(e.message) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-22T18:25:46.237

You should consult the documentation of whatever library is throwing the exception, to see how to get an error message out of its exceptions.

Alternatively, a good way to debug this kind of thing is to say:

```
except Exception, e:
    print dir(e) 
```

to see what properties `e` has - you'll probably find it has a `message` property or similar.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-05T12:10:56.897

您也可以尝试使用[`get()`](https://docs.python.org/3/library/stdtypes.html#dict.get)，例如：

```
connection = manager.connect.get("I2Cx") 
```

`KeyError`如果密钥不存在，则不会引发 a 。

如果键不存在，您也可以使用第二个参数来指定默认值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-11T04:01:23.003

如果您不想只处理错误`NoneType`并使用`get()` 例如：

```
manager.connect.get("") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T18:32:29.177

我不认为python有一个陷阱:)

```
try:
    connection = manager.connect("I2Cx")
except Exception, e:
    print e 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-12-15T19:50:58.123

尝试 print(e.message) 这应该能够打印您的异常。

```
try:
    connection = manager.connect("I2Cx")
except Exception, e:
    print(e.message) 
```

# vim - 重新映射 vim 行尾键

> ID：16154034
> 
> 赞同：6
> 
> 时间：2013-04-22T18:23:12.620
> 
> 标签：vim, text-editor

在 mac 键盘中使用 vim 时最大的烦恼之一是缺少 Home 和 End 键。尽管在 vim 中有一种解决方法，即

```
$ for  End of line 
0 for Beginning of line (both in <Esc> mode) 
```

我觉得它不直观，因为 $ 位于键盘的左侧，将您带到最右边的文本行，而右侧的 0 将您带到行首。有没有办法用 9 表示行首和 0 表示行尾重新映射键？

我在 ~/.vimrc 中尝试了以下内容

```
inoremap <Esc>9 <Esc>0
inoremap <Esc>0 <Esc>$ 
```

但它似乎没有生效，旧的组合键仍然存在。帮帮我！也让我知道这样做的缺点（如果有的话）？谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-22T19:01:46.037

`inoremap`用于插入模式映射。您正在寻找的是`nnoremap`. 例如，你可以试试这个：

```
nnoremap 0 $
nnoremap 9 0
inoremap <C-A> <Home>
inoremap <C-E> <End> 
```

但是，我个人不会重新映射 9，因为您可能有一天会随机需要它（例如`9gg`or `9j`）。相反，我会选择`Q`, `K`,`U`或`S`因为它们几乎不被使用。

事实上，我可能会建议保持原样。`$`当您学习正则表达式时，实际上是非常直观的。它有点难打，但一般来说你不会那么需要它，因为你有很多命令，比如`D`map to `d$`. 当你不得不使用香草 vim 时，它也会更容易。

# mysql - MySQL - 如何加密密码

> ID：16154039
> 
> 赞同：0
> 
> 时间：2013-04-22T18:23:28.583
> 
> 标签：mysql, sql, authentication, encryption

我想知道如何编辑我的代码以加密用户密码。目前，用户填写一个 HTML 表单，该表单`customerRegister.php`在提交查询之前要经过一系列验证。

客户注册.php

```
registerUser($_POST['firstName'], $_POST['lastName'], $_POST['username'], $_POST['houseNo'], $_POST['StreetName'], $_POST['town'], $_POST['postCode'], $_POST['emailAddress'], $_POST['phoneNumber'], $_POST['password'], $_POST['conPassword'],$_POST['carRegistration'],$_POST['carMake'],$_POST['carModel'],$_POST['carYear'],$_POST['carEngineSize'],$_POST['carFuel']);

 function registerUser($firstName, $lastName, $username, $houseNo, $streetName, $town, $postCode, $emailAddress, $phoneNumber, $password, $conPassword, $registration, $carMake, $carModel, $carYear, $carEngineSize, $carFuel) {

      $registerQuery = new UserLoginQueries();

/********************************
SERIES OF VALIDATIONS
********************************/

$registerQuery->insertUser($firstName, $lastName, $username, $houseNo, $streetName, $town, $postCode, $emailAddress, $phoneNumber, $password); 
```

然后将这些详细信息传递给执行查询的 userLoginQueries.php。

用户登录查询.php

```
 public function insertUser($custFirstName, $custLastName, $username, $houseNo, $streetName, $town, $postCode, $email, $number, $pass) {
    $sth = $this->conn->prepare("INSERT INTO `customer`(`CustFirstName`, `CustLastName`, `HouseNo`, `StreetName`, `Town`, `PostCode`, `EmailAddress`, `PhoneNumber`, `Username`, `Password`) VALUES (?,?,?,?,?,?,?,?,?,?)");
    $sth->bindValue (1, $custFirstName);
    $sth->bindValue (2, $custLastName);
    $sth->bindValue (3, $houseNo);
    $sth->bindValue (4, $streetName);
    $sth->bindValue (5, $town);
    $sth->bindValue (6, $postCode);
    $sth->bindValue (7, $email);
    $sth->bindValue (8, $number);
    $sth->bindValue (9, $username);
    $sth->bindValue (10, $pass);
    $sth->execute(); 
  } 
```

当用户输入他们的登录信息时，将运行以下查询：

```
 public function queryLogin($username, $password) {
    $sth = $this->conn->prepare("SELECT * FROM customer WHERE Username = ? AND Password = ? AND UserType = 'Customer'");
    $sth->bindValue (1, $username);
    $sth->bindValue (2, $password);
    $sth->execute();
    $count = $sth->rowCount();
    return $count;
    } 
```

如何修改我的代码以加密用户密码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T18:27:45.823

您应该使用盐使用散列算法[http://en.wikipedia.org/wiki/Hash_function](http://en.wikipedia.org/wiki/Hash_function)（单向算法）存储您的密码，请参阅[http://en.wikipedia.org/wiki/Salt_(cryptography)](http://en.wikipedia.org/wiki/Salt_(cryptography))

造成这种情况的根本原因之一是，如果您的数据库遭到破坏，攻击者将不知道实际密码是什么。

一个简单的散列算法，是 sha-1。您可以在此处查看如何使用它[http://php.net/manual/en/function.sha1.php](http://php.net/manual/en/function.sha1.php)

**使用盐散列**

以下可能会有所帮助： -

```
$sth->bindValue (2, sha1($password . "random private stuff here as salt")); 
```

下次要验证密码时，只需将输入的密码和盐与实际值和盐进行比较即可。这将让您知道密码是否正确，而无需以明文形式保存用户密码。

**为什么要用盐？**

好吧，虽然通常一种方式的功能不能被逆转，但它们可以被蛮力强迫。这可能意味着即使您使用的是散列算法，某些密码也可能容易受到攻击。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T18:27:49.263

请看一下这个答案：[How do you use bcrypt for hashing passwords in PHP?](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php) ，您只需`$hash = $bcrypt->hash('password');` 在注册用户时调用 ，然后将密码的散列版本保存到数据库中。然后，您可以使用验证用户`$isGood = $bcrypt->verify('password', $hash);`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T18:40:05.593

这里要记住的重要一点是“加密”是*错误的词*。加密的能力意味着解密的能力，这对密码来说是一件坏事。你永远不应该**解密**密码。相反，您需要*散列*密码。散列使​​用复杂的数学问题将文本输入（例如密码）提炼成一个很长的数字。潜在数字越长，哈希可能越安全。这里重要的是哈希不能被反转。如果我的密码是“p4$$w0rd”，而生成的哈希是“12345”，则永远无法从“12345”中获取“p4$$w0rd”。为了对用户进行身份验证，当有人尝试登录时，您计算他们使用的密码的哈希值，然后将其与您存储的哈希值进行比较。您不会将密码存储在任何地方。曾经。是的，这确实意味着您永远不会为用户提供找回丢失密码的选项；你只允许他们*重置*它。

此外，哈希本身还不够好。事实证明，密码数据库本身一直受到威胁，黑客通常已经知道你的哈希值。黑客投入了大量资源来创建现成的密码输入表，这些表将产生给定的哈希值。因此，对于我的示例五“数字”哈希，他们将为从“00001”到“99999”的每个可能的哈希预先计算*一些东西。*它们的“12345”值可能与我的“p4$$w0rd”不匹配，但没关系：如果它产生相同的哈希值，那就足够了。黑客可以使用它来查看受感染的数据库并为每个用户发现一组有效的凭据。为此，还需要*加盐*您的密码在散列之前。当您对密码进行加盐时，您会在散列之前修改提交的字符串。在验证我的示例密码时，您将首先附加我的用户帐户的盐，而不是检查“p4$$w0rd”，然后对结果进行哈希处理。如果破解者知道我的散列并且能够在表中查找会产生我的散列的输入，那么这对他不再有帮助，因为您将以一种会破坏所有预先计算的散列结果的方式修改他的输入。这让他重新暴力猜测每一个密码。

同样重要的是要知道并非所有的散列算法都是平等的。一些散列算法，例如 md5，是专门为*快速*而创建的，因此您可以使用它们快速将较大的文本块与已知样本进行比较。这些算法*非常不*适合用于密码，因为黑客可以很快猜出许多可能的密码。您需要一个非常*慢*的散列算法，因此即使使用超快速或专用硬件，黑客也需要很长时间（可能是几个世纪）才能猜出真正的密码。最好的算法可以动态调整，随着时间的推移，硬件变得越来越快，算法变得越来越慢。这些算法的示例是“bcrypt”和“scrypt”。

最后，**最重要的教训**是根本不要尝试构建自己的身份验证系统。身份验证的问题在于，很容易构建一些*看似*有效的东西，但仍然存在一些微妙的缺陷，比如一年后你可能会发现六个月前你被黑客入侵了。该系统甚至可以通过许多编写良好的单元测试，但仍然存在这些细微的缺陷。您总是希望尽可能多地依赖可用于您的平台的预先编写的身份验证模块。这也是允许您通过 Facebook、Twitter、OpenID 等登录的身份验证方案变得越来越流行的原因。

# groovy - Gradle：强制自定义任务始终运行（无缓存）

> ID：16154042
> 
> 赞同：37
> 
> 时间：2013-04-22T18:23:44.293
> 
> 标签：groovy, build, gradle

我编写了一个自定义 Gradle 任务来处理路径可配置的文件系统上的一些依赖关系解析。我希望这种类型的任务始终运行。似乎虽然它们只运行一次，但我猜是因为输入似乎永远不会改变。

我知道使用`configurations { resolutionStrategy.cacheChangingModulesFor 0, 'seconds' }`有效地禁用缓存，但我只希望它适用于非常具体的任务。我也知道`--rerun-tasks`命令行提示符，这也很相似。两者都不是最好的解决方案，必须有一种方法可以在自定义任务定义中正确设置它。

以下是我当前的实现。我之前也有一个版本，其中前 3 个 def String 语句是 @Input 带注释的字符串声明。

```
class ResolveProjectArchiveDependency extends DefaultTask {
    def String archiveFilename = ""
    def String relativeArchivePath = ""
    def String dependencyScope = ""

    @OutputFile
    File outputFile

    @TaskAction
    void resolveArtifact() {
        def arcFile = project.file("dependencies/"+dependencyScope+"/"+archiveFilename)
        def newArcFile = ""

        if(project.hasProperty('environmentSeparated') && project.hasProperty('separatedDependencyRoot')){
            println "Properties set denoting the prerelease environment is separated"
            newArcFile = project.file(project.ext.separatedDependencyRoot+relativeArchivePath+archiveFilename)
        }   else {
            newArcFile = project.file('../../'+relativeArchivePath+archiveFilename)
        }

        if(!newArcFile.isFile()){
            println "Warn: Could not find the latest copy of " + archiveFilename + ".."

            if(!arcFile.isFile()) {
                println "Error: No version of " + archiveFilename + " can be found"
                throw new StopExecutionException(archiveFilename +" missing")
            }
        }

        if(!arcFile.isFile()) {
            println archiveFilename + " jar not in dependencies, pulling from archives"
        } else {
            println archiveFilename + " jar in dependencies. Checking for staleness"

            def oldHash = generateMD5(new File(arcFile.path))
            def newHash = generateMD5(new File(newArcFile.path))

            if(newHash.equals(oldHash)) {
                println "Hashes for the jars match. Not pulling in a copy"
                return
            }
        }

        //Copy the archive
        project.copy {
            println "Copying " + archiveFilename
            from newArcFile
            into "dependencies/"+dependencyScope
        }
    }

    def generateMD5(final file) {
       MessageDigest digest = MessageDigest.getInstance("MD5")
       file.withInputStream(){is->
       byte[] buffer = new byte[8192]
       int read = 0
          while( (read = is.read(buffer)) > 0) {
                 digest.update(buffer, 0, read);
             }
         }
       byte[] md5sum = digest.digest()
       BigInteger bigInt = new BigInteger(1, md5sum)
       return bigInt.toString(16)
    }
} 
```

这是任务使用的示例：

```
task handleManagementArchive (type: com.moremagic.ResolveProjectArchiveDependency) {
    archiveFilename = 'management.jar'
    relativeArchivePath = 'management/dist/'
    dependencyScope = 'compile/archive'
    outputFile = file('dependencies/'+dependencyScope+'/'+archiveFilename)
} 
```

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-04-22T19:11:47.530

`outputs.upToDateWhen { false }`您可以通过设置任务来实现这一点。

这可以在您的`build.gradle`文件中执行：

```
handleManagementArchive.outputs.upToDateWhen { false } 
```

也可以在自定义任务的构造函数中完成。

```
ResolveProjectArchiveDependency() {
    outputs.upToDateWhen { false }
} 
```

# asp.net-mvc - 更改 Telerik DateTimePicker 元素 ID，但保留名称

> ID：16154045
> 
> 赞同：0
> 
> 时间：2013-04-22T18:23:48.103
> 
> 标签：asp.net-mvc, razor, telerik

我有一个 ASP.NET MVC 页面，上面有多个表单，每个表单编辑同一类的不同实例。每个表单还包括一个 Telerik DateTimePicker 控件。我想要的是改变元素 ID，而不是元素名称。所以我有这样的事情：

```
string idString = string.Format("MyObject{0}", Model.ID)
@Html.Telerik().DatePickerFor(m => m.SomeDate).HtmlAttributes(new { id = idString + "-SomeDate" }) 
```

现在这几乎可以正常工作，除了在页面底部，Telerik 放入的自动生成的 Javascript 看起来像：

```
jQuery('#SomeDate').tDateTimePicker({
  format:'M/d/yyyy h:mm tt', 
  minValue:new Date(1899,11,31,0,0,0,0), 
  maxValue:new Date(2100,0,1,0,0,0,0), 
  startTimeValue:new Date(2013,3,22,0,0,0,0), 
  endTimeValue:new Date(2013,3,22,0,0,0,0), 
  interval:30, 
  selectedValue:new Date(2013,3,22,11,9,1,180)
}); 
```

请注意，我的`idString`值没有被输入。我可以尝试：

```
@Html.Telerik().DatePickerFor(m => m.SomeDate).Name(idString + "SomeDate") 
```

这使得自动生成的 Javascript 正确 ( `jQuery('#MyObject123-SomeDate')`) 但现在元素名称错误，因此`TryUpdateModel`失败。

我怎样才能让它工作？谢谢。

编辑：我使用以下 Javascript 破解了这个问题，但这是解决这个问题的一种笨拙的方法。

```
$(function () {
    window.setTimeout(function () {
        for (var i = 0; i < document.getElementsByTagName("input").length; i++) {
            var obj = document.getElementsByTagName("input")[i];
            if (obj.id.indexOf("SomeDate") == -1)
                continue;
            obj.name = "SomeDate";
        }
    }, 150)
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T20:12:37.067

解决方案是使用 Telerik 对象的`.InputHtmlAttributes`方法。

```
@Html.Telerik().DatePickerFor(m => m.SomeDate).InputHtmlAttributes(new { id = idString + "-SomeDate" }) 
```

# json - 解析 Json 以在 dojo 小部件中使用？

> ID：16154054
> 
> 赞同：0
> 
> 时间：2013-04-22T18:24:02.697
> 
> 标签：json, parsing, dojo, widget, digit

我是dojo和json的新手。我正在尝试查询服务器以获取 json 格式的数据并解析结果并在小部件中使用 html 模板进行显示。

为了测试它，我尝试了这个。

```
 require(["dojo/request", "dojo/dom", "dojo/dom-construct","dojo/_base/array", "my/widgets/", "dojo/domReady!"],
function(request, dom,domConst, arrayUtil, support){
// Load up our authors
request("js/my/data/sample.json", {
    handleAs: "json"
}).then(function(LinksMap){
        // Get a reference to our container

    arrayUtil.forEach(LinksMap, function(List){
        // Create our widget and place it

       console.debug(LinksMap);
        //var widget = new support(author).placeAt(authorContainer); 
```

不确定我是否做得对。有什么我想念的吗。我正在按照[此处](http://dojotoolkit.org/documentation/tutorials/1.8/recipes/custom_widget/)提供的示例进行操作并以此为基础。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:35:29.503

我认为从您对帖子的评论中您想将延迟处理功能修改为

```
request("js/my/data/sample.json", {
    handleAs: "json"
}).then(function(jsonResults){
    console.log(jsonResults.Result)
}); 
```

您发布的 json 是一个具有属性的对象`Result`。该`Result`属性包含一个对象数组。然后这些对象包含一个`LinksMap`包含另一个对象的属性。

# php - .ajax() 错误请求 400

> ID：16154056
> 
> 赞同：-1
> 
> 时间：2013-04-22T18:24:19.753
> 
> 标签：php, ajax, jquery

所以我在 WAMP 上构建了一个 Web 应用程序的代码（我第一次使用任何服务器的东西）和一个我们查看客户端数据库的测试数据库。在尝试实施时，我们遇到了很多麻烦。他们使用的是企业服务器（注意：我不知道我在说什么）和 MSSQL，我只是在 WAMP 和 MYSQL 上使用 localhost、root 和没有密码。我不知道如何帮助他们实施产品。它在我的计算机上运行良好，但对他们来说，当我让 AJAX 打印出错误文本时，它会显示错误请求 400。

ajax 请求

```
$.ajax({
        type: "GET",
        url: "getJobList.php",
        data: "hline="+lineLabel[currentLine],
        dataType: "json",
        success: function(data){
              //do successful stuff
        }
} 
```

.php 文件

```
<?php

include "config.php";

$con = mysql_connect($host);
$dbs = mysql_select_db($databaseName, $con);
//get the parameter from URL
$hline=$_GET["hline"];
if (empty($hline)){
    echo "1"; //default rate
}
else{
    $db=mysql_pconnect($host, $user, $pass);//connect to local database
    mysql_select_db($databaseName, $db);//select the database you want to use
    if (!$db){
        echo ("error connecting to database");              
    }
    else{
        //connection successful
        $sql = " SELECT partparameters.cspc,processingrate,setuptime,lotsize,duedate,duetime,homeline
        FROM jobs
        INNER JOIN partcoding 
        ON jobs.partnumber=partcoding.partnumber
        INNER JOIN partparameters
        ON partcoding.cspc=partparameters.cspc
        WHERE homeline = '$hline'
        ORDER BY duedate,duetime ASC";//sql string command
          $result=mysql_query($sql) or die (mysql_error());//execute SQL string command
          //result contains rows
          $arr = array();
          $num = 0;
          while($rows = mysql_fetch_array($result))
          {
            $array[$num] = $rows;
            $num++;
          }
          echo json_encode($array);
    }
}

?> 
```

配置文件

```
<?php
$host = "localhost";
$user = "root";
$pass = "";
$databaseName = "gmdata1";
?> 
```

有任何想法吗？提前致谢！

编辑：修复了我在发布时输入错误的括号。另外，如果我在 Chrome 上开发并且用户使用的是 Firefox 有所不同。我不认为它应该有所作为，因为它们呈现相同。

编辑2：

> 请求网址：

```
http://usmmcsa0wwt01/ProdSched/getJobList.php?hline=G%20%201 
```

> 请求方法：GET
> 
> 状态码：HTTP/1.0 400 错误请求
> 
> 请求标头 15:24:24.000

```
X-Requested-With:XMLHttpRequestUser-Agent:Mozilla/5.0 (Windows NT 6.1; rv:20.0) Gecko/20100101 Firefox/20.0Referer:http://usmmcsa0wwt01/ProdSched/index.phpHost:usmmcsa0wwt01Connection:keep-aliveCache-Control:max-age=0Accept-Language:en-US,en;q=0.5Accept-Encoding:gzip, deflateAccept:application/json, text/javascript, */*; q=0.01 
```

> 响应标头 Δ2ms
> 
> 服务器：CIMPLICITY-HttpSvr/1.0 日期：星期一，2013 年 4 月 22 日 19:24:24 GMT

这就是我在他们的 Firefox 控制台检查 HTTP 请求中得到的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:28:32.407

你的数据是错误的。要在 URL 中提取`$_GET["hline"]`您想要的（不推荐）或正确格式化数据。`hline="+lineLabel[currentLine]`

```
data: {"hline": lineLabel[currentLine]}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:26:04.020

Try this -

```
$.ajax({
        type: "GET",
        url: "getJobList.php",
        data: {"hline": lineLabel[currentLine]},
        dataType: "json",
        success: function(data){
              //do successful stuff
        }
} 
```

# hadoop - 失败：元数据错误：java.lang.RuntimeException：无法实例化 org.apache.hadoop.hive.metastore.HiveMetaStoreClient

> ID：16154060
> 
> 赞同：3
> 
> 时间：2013-04-22T18:24:29.373
> 
> 标签：hadoop, hql, hive, hdfs

当 HDFS 和 hive 实例正在运行时，我关闭了我的 HDFS 客户端。现在，当我重新登录 Hive 时，我无法执行任何 DDL 任务，例如“显示表”或“描述表名”等。它给了我如下错误

```
ERROR exec.Task (SessionState.java:printError(401)) - FAILED: Error in metadata: java.lang.RuntimeException: Unable to instantiate org.apache.hadoop.hive.metastore.HiveMetaStoreClient
org.apache.hadoop.hive.ql.metadata.HiveException: java.lang.RuntimeException: Unable to instantiate org.apache.hadoop.hive.metastore.HiveMetaStoreClient 
```

任何人都可以建议我需要做什么才能在不重新创建表的情况下实例化我的 metastore_db 吗？否则，我必须再次重复创建整个数据库/模式的工作。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-22T19:46:44.243

我已经解决了这个问题。这些是我遵循的步骤：

1.  转到 $HIVE_HOME/bin/metastore_db
2.  将 db.lck 复制到 db.lck1 和 dbex.lck 到 dbex.lck1
3.  从 db.lck 和 dbex.lck 中删除了锁定条目
4.  从 hive shell 以及所有正在运行的 HDFS 实例中注销
5.  重新登录 HDFS 和 hive shell。如果您运行 DDL 命令，它可能会再次给您“无法实例化 HiveMetaStoreClient 错误”
6.  现在将 db.lck1 复制回 db.lck 并将 dbex.lck1 复制回 dbex.lck
7.  从所有 hive shell 和 HDFS 实例中注销
8.  重新登录，你应该看到你的旧表

注意：步骤 5 可能看起来有点奇怪，因为即使在删除锁定条目之后，它仍然会给出 HiveMetaStoreClient 错误，但它对我有用。

优点：您不必重复重新创建整个数据库的工作。

希望这可以帮助面临同样错误的人。如果您觉得有用，请投票。提前谢谢

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-16T04:44:57.620

有人告诉我，如果我们的 hive 控制台没有正确终止，通常我们会得到这个异常。修复：

运行 jps 命令，查找“RunJar”进程并使用 kill -9 命令将其杀死

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-27T10:18:43.137

我遇到了同样的问题并通过启动 Metastore 服务解决了它。如果您的机器重新启动或出现故障，有时服务可能会停止。您可以通过运行以下命令来启动服务：

登录为`$HIVE_USER`

```
nohup hive --service metastore>$HIVE_LOG_DIR/hive.out 2>$HIVE_LOG_DIR/hive.log & 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-29T06:32:27.967

我在 hive 服务器上遇到了类似的问题，并按照以下步骤操作：
1\. 转到 $HIVE_HOME/bin/metastore_db
2\. 将 db.lck 复制到 db.lck1 并将 dbex.lck 复制到 dbex.lck1
3\. 从db.lck 和 dbex.lck
4\. 从 hive shell 重新登录。它正在工作
谢谢

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-28T22:10:33.033

请参阅：[在蜂巢中出现错误](https://stackoverflow.com/questions/14452861/getting-error-in-hive/18498974#18498974)

您是否已将包含元数据数据库的 JDBC 驱动程序的 jar 复制到 Hive 的 lib 目录中？

例如，如果您使用 MySQL 来保存元数据数据库，则需要复制

mysql-connector-java-5.1.22-bin.jar 到 $HIVE_HOME/lib。

这为我解决了同样的错误。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-04T09:08:19.943

例如，我使用 MySQL 来保存元数据数据库，我复制了

mysql-connector-java-5.1.22-bin.jar 到 $HIVE_HOME/lib 文件夹

我的错误已解决

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-21T07:05:59.407

I also was facing the same problem, and figured out that I had both hive-deafult.xml and hive-site.xml(created manually by me),

I moved my hive-site.xml to hive-site.xml-template(as I was not needed this file) then started hive, worked fine.

Cheers, Ajmal

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-10-12T08:43:41.493

我遇到了这个问题，就我而言，它是在从命令行运行`hive`命令时。

我在使用 kerberized hive 时通过运行[kinit命令解决了这个问题。](http://www.ibm.com/support/knowledgecenter/ssw_aix_72/com.ibm.aix.cmds3/kinit.htm)

```
kinit -kt <your keytab file location> <kerberos principal> 
```

# c# - 图像中的形状识别

> ID：16154062
> 
> 赞同：-4
> 
> 时间：2013-04-22T18:24:32.717
> 
> 标签：c#, .net, drawing, shape-recognition

我需要一个应用程序的帮助，我是编程初学者。所以我需要创建一个简单的应用程序来识别图像中的形状（矩形、三角形、线......）渲染它们。（对于有经验的程序员来说很容易：D）这里有类似的项目，但我是唯一一个不太了解的人：http: [//leakingmemory.wordpress.com/2012/03/17/shape-recognition-using- c-and-aforge/](http://leakingmemory.wordpress.com/2012/03/17/shape-recognition-using-c-and-aforge/)和[http://www.emgu.com/wiki/index.php/Shape_(Triangle,_Rectangle,_Circle,_Line)_Detection_in_CSharp](http://www.emgu.com/wiki/index.php/Shape_(Triangle,_Rectangle,_Circle,_Line)_Detection_in_CSharp) 非常感谢

编辑：你能告诉我如何描绘所有的多边形吗？不仅是三角形、圆形……还有所有形状？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T18:43:37.310

如果你真的想尝试这个，我建议你从[边缘检测](http://en.wikipedia.org/wiki/Edge_detection)开始。您链接的这两篇文章都从处理图像和寻找边缘开始。第一篇文章使用[Sobel 滤波器](http://en.wikipedia.org/wiki/Sobel_operator)，而第二篇文章使用[Canny 边缘检测](http://en.wikipedia.org/wiki/Canny_edge_detector)。一旦你对这个概念有了更好的理解，你就可以使用像 AForge 这样的库来为你做这件事。

下一步是编写用于检测从上一步中找到的连接边的顶点的逻辑。有了它，您可以检测三角形（3 个顶点）、正方形（4 个顶点）或任何其他任意多边形。

检测一个圆圈似乎会有点困难（第二篇文章希望通过删除任何不是圆圈的东西来“检测”一个圆圈）。如果你已经做到了这一点，我相信你可以做一些谷歌搜索并找到其他人用来检测圆圈的一些技术，你可以使用你现在拥有的代码作为实现它的起点.

祝你好运！

# sql - 检索具有空值的两列的计数

> ID：16154067
> 
> 赞同：0
> 
> 时间：2013-04-22T18:24:48.140
> 
> 标签：sql

我在一个表中有两列，我想要一个 SINGLE 查询：我需要每列的空值计数。据说，如果第一列包含空值，则第二列可能包含也可能不包含，反之亦然。

我是初学者，对此并没有太多想法可以尝试一下

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:28:39.853

```
Select column1,
(Select count(*) From table Where column = null),
(Select count(*) From table Where column2 = null)
From table 
```

如果要在单个查询中执行此操作，请使用子查询

# java - 可以修改示例以返回值吗？

> ID：16154070
> 
> 赞同：3
> 
> 时间：2013-04-22T18:24:54.940
> 
> 标签：java, clojure

鉴于 JNotify 的以下示例，我在理解*implements*时遇到了一些麻烦。`class Listner`实现 JNotifyListener 的方法—— `fileRenamed`、、`fileModified`等等——但将返回类型从 void 修改为 Integer是否是有效的 Java 语法？

我想在 JNotify 之上编写一个 Clojure 库，并在未来拥有 Clojure 代码块，直到 Listener 的方法之一返回。

```
 class Listener implements JNotifyListener {
    public void fileRenamed(int wd, String rootPath, String oldName,
        String newName) {
      print("renamed " + rootPath + " : " + oldName + " -> " + newName);
    }
    public void fileModified(int wd, String rootPath, String name) {
      print("modified " + rootPath + " : " + name);
    }
    public void fileDeleted(int wd, String rootPath, String name) {
      print("deleted " + rootPath + " : " + name);
    }
    public void fileCreated(int wd, String rootPath, String name) {
      print("created " + rootPath + " : " + name);
    }
    void print(String msg) {
      System.err.println(msg);
    }
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T19:20:24.437

回应 OP 的澄清评论：

对，这是观察者模式的一个简单示例：

```
public interface JNotifyListener {

    void fileRenamed(int wd, String rootPath, String oldName, String newName);

    void fileModified(int wd, String rootPath, String name);

    void fileDeleted(int wd, String rootPath, String name);

    void fileCreated(int wd, String rootPath, String name);
}

public enum Type {

    RENAMED,
    MODIFIED,
    DELETED,
    CREATED;
}

public class FileChangeEvent {

    final Type type;
    final int wd;
    final String rootPath;
    final String name;
    final String newName;

    public FileChangeEvent(Type type, int wd, String rootPath, String name, String newName) {
        this.type = type;
        this.wd = wd;
        this.rootPath = rootPath;
        this.name = name;
        this.newName = newName;
    }

    public FileChangeEvent(Type type, int wd, String rootPath, String name) {
        this(type, wd, rootPath, name, null);
    }

    public int getWd() {
        return wd;
    }

    public String getRootPath() {
        return rootPath;
    }

    public String getName() {
        return name;
    }

    public String getNewName() {
        return newName;
    }
}

public interface FileChangeEventListener {

    void notify(FileChangeEvent fileChangeEvent);
}

public class FileChangeEventNotifyer implements JNotifyListener {

    final Collection<FileChangeEventListener> listeners = new ConcurrentLinkedQueue<FileChangeEventListener>();

    @Override
    public void fileRenamed(int wd, String rootPath, String oldName, String newName) {
        notifyAll(new FileChangeEvent(Type.RENAMED, wd, rootPath, oldName, newName));
    }

    @Override
    public void fileModified(int wd, String rootPath, String name) {
        notifyAll(new FileChangeEvent(Type.MODIFIED, wd, rootPath, name));
    }

    @Override
    public void fileDeleted(int wd, String rootPath, String name) {
        notifyAll(new FileChangeEvent(Type.DELETED, wd, rootPath, name));
    }

    @Override
    public void fileCreated(int wd, String rootPath, String name) {
        notifyAll(new FileChangeEvent(Type.CREATED, wd, rootPath, name));
    }

    private void notifyAll(final FileChangeEvent changeEvent) {
        for (final FileChangeEventListener changeEventListener : listeners) {
            changeEventListener.notify(changeEvent);
        }
    }

    public void registerListener(final FileChangeEventListener eventListener) {
        listeners.add(eventListener);
    }

    public void unregisterListener(final FileChangeEventListener eventListener) {
        listeners.remove(eventListener);
    }
} 
```

您可以看到 a `class`only 需要实现`FileChangeEventListener`并将其兴趣注册到 main `FileChangeEventNotifyer`。然后它将`notify`使用事件调用其方法。

这里有几个常见的陷阱。一个是这个实现不使用`synchronized`，因此如果一个类在事件发生时被注册，它可能会错过一个通知。优点是这是非阻塞的。因此，由您决定是否最好使用非阻塞集合或阻塞集合。

此外，您要么需要确保所有已注册的侦听器事后都未注册，否则它们会堆积起来，最终可能导致内存泄漏。

我已经将它实现为一个单一`FileChangeEvent` 的`Type`- 显然你可以有一个父`FileChangeEvent`类，然后用类型的子类扩展它。同样，这取决于您的需求。

无论如何，这应该让你开始。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T18:30:28.213

No. The return value type in the signature of an implementation must match the return value type of the interface it implements either with an exact match or with an implementing/extending type.

* * *

Response to comment (not to original question)

```
interface I {
  A foo();
}
class A {}
class B extends A {}
class C implements I {
  public B foo() { return null; }
} 
```

The Java 6 Compiler accepts the code above, which implies the return value is covariant at override time, so the commenters are correct that the match need not be exact.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T20:08:23.473

在 Clojure 方面，考虑使用 promise/deliver 而不是 future。然后 Listener 中的方法可以交付给 Promise。 [http://clojuredocs.org/clojure_core/clojure.core/promise](http://clojuredocs.org/clojure_core/clojure.core/promise)

如果这是针对库的，最好传递一个函数而不是使用future 或promise。这将允许库的用户传入他们自己的闭包，而不必引入另一个线程更改。

# jquery - jquery 过滤脚本，如何隐藏不相关的标签

> ID：16154076
> 
> 赞同：1
> 
> 时间：2013-04-22T18:25:06.720
> 
> 标签：jquery

我刚刚尝试了 Filtrify jquery 脚本 - [http://luis-almeida.github.io/filtrify/](http://luis-almeida.github.io/filtrify/)

但是我有一个小问题很遗憾我无法解决。

我想从过滤器菜单中隐藏空/不相关的标签

例如，在这个演示中 - [http://luis-almeida.github.io/filtrify/movies.html](http://luis-almeida.github.io/filtrify/movies.html)如果我从“主要演员”过滤器中选择“Aaron Eckheart”，就会出现一部电影。

接下来，如果我打开“类型”过滤器，很多类型“冒险、动画、传记”此时与“Aaron Eckheart”无关。而且我认为隐藏它们会很棒，但我不知道该怎么做。

我在想如果标签计数为 0，我应该使用。`.addClass("ft-hidden")`我在查看 jquery 代码后尝试了一些简单的实验，但目前我只是不知道:(

你能建议如何做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:45:51.300

不熟悉这个库，但纯粹是通过控制台进行黑客攻击，你可能会在某个地方刺伤它，很可能是在它的`callback`（参见[http://luis-almeida.github.io/filtrify/query.html](http://luis-almeida.github.io/filtrify/query.html)）

```
$('.ft-label').parent()
    .find('li[data-count=0]').hide().end()
    .find(':not(li[data-count=0])').show().end(); 
```

作为一个简单的测试，请访问您提到的链接（[http://luis-almeida.github.io/filtrify/movies.html](http://luis-almeida.github.io/filtrify/movies.html)），在浏览器控制台中运行以下代码对原始演示代码进行打孔，看看是否结果就是你想要的

```
$(function() {
    $.filtrify("container", "placeHolder", {
        callback: function ( query, match, mismatch ) {
            $('.ft-label').parent()
                .find('li[data-count=0]').hide().end()
                .find(':not(li[data-count=0])').show().end();
        }
    });
}); 
```

# ruby-on-rails - Validate many-to-many association

> ID：16154087
> 
> 赞同：0
> 
> 时间：2013-04-22T18:25:44.380
> 
> 标签：ruby-on-rails, ruby-on-rails-3, many-to-many

posts 1--* post_tags *--1 tags

A post has many tags and a tag has many posts. They are related through the post_tags table.

```
post.rb
class Post < ActiveRecord::Base
  attr_accressible :tag_ids

  has_many :post_tags
  has_many :tags, :through => :post_tags
end

tag.rb
class Tag < ActiveRecord::Base
  has_many :post_tags
  has_many :posts, :through => :post_tags
end

post_tag.rb
class PostTag < ActiveRecord::Base
  belongs_to :post
  belongs_To :tag
end

posts_controller.rb
class PostsController < ApplicationController
  def new
    @post = Post.new
  end

  def create
    @post = Post.new(params[:post])
    @post.save ? redirect_to(:action => 'index') : render(:action => 'new')
  end
end 
```

The tags table is a catalog and I just want the user to select the appropriate ones for the post. So in my view I have a multiple select:

```
new.html.erb
post_form.collection_select(:tag_ids, @tags, nil, nil, {}, { :multiple => true }) 
```

This works but the problem is when I send invalid ids I get this error

```
ActiveRecord::RecordNotFound in Posts#create
Couldn't find all Tags with IDs (1, 200) (found 1 results, but was looking for 2) 
```

Tag with id 1 exists but tag with id 200 doesn't.

Any ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:05:17.967

有你的问题，当你发送一些无效的 tag_id 比如说 200 时，Rails 将首先搜索 ID 为 200 的标签是否真的存在。因此，解决此问题的最佳方法是使用 before 过滤器，以确保您获得正确或有效的 id。然后你可以简单地做一个任务，将 tag_ids 分配给帖子......你可以做这样的事情

```
before_filter :find_tags_from_ids

def find_tags_from_ids
  @tags = Tag.where(:id => params[:post][:tag_ids]
end

def create
  @post = Post.new(params[:post])
  @post.tags << @tags
  @post.save ? redirect_to(:action => 'index') : render(:action => 'new')
end 
```

这将解决您的问题，希望您这次不会遇到异常。

# xslt - xml:space='preserve' doesn't seem to get on with xsl:apply-templates select="node()"

> ID：16154092
> 
> 赞同：1
> 
> 时间：2013-04-22T18:26:05.693
> 
> 标签：xslt, attributes

Doing some work with xsl - first time I've done anything serious, and I've hit something which I can't explain. Easiest way to show it is with the identity transform:

This works:

```
<xsl:template match="@*|node()">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()"/>
  </xsl:copy>
</xsl:template> 
```

This doesn't (says "Unable to apply transformation on current source"):

```
<xsl:template match="@*|node()" xml:space='preserve'>
  <xsl:copy>
    <xsl:apply-templates select="@*|node()"/>
  </xsl:copy>
</xsl:template> 
```

This does:

```
<xsl:template match="@*|node()">
  <xsl:copy>
    <xsl:apply-templates select="@*"/>
    <xsl:apply-templates select="node()" xml:space='preserve'/>
  </xsl:copy>
</xsl:template> 
```

OK, I can see what's happening. But I don't understand why. Why does xml:space not want to play nicely with attributes? Just curious.

BTW, this is using the xsl translator that's built into Notepad++. Perhaps I shouldn't trust it?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T18:35:02.727

你想达到什么目的？`xml:space="preserve"`告诉使用 XML 的应用程序您希望保留`xml:space`作为属性的元素的后代的纯空格文本节点。在此示例中，您具有`xml:space`的属性`<xsl:apply-templates>`，但`<xsl:apply-templates>`没有纯空格文本节点后代，因此`xml:space`没有可能的效果。

我认为您想保留*输入 XML 文档*（而不是 XSLT 样式表）中的纯空格文本节点。在这种情况下，您需要`xml:space`在输入 XML 文档中，而不是在 XSLT 样式表中。样式表可以有`xsl:preserve-space-elements="*"`，但这已经是默认的了，除非你`xsl:strip-space-elements`设置了。

是的，我想知道 Notepad++ (libxml) 使用的 XSLT 处理器是否在做一些非法的事情。作为一个很好的诊断方法，试试像 Saxon 这样受人尊敬的处理器，看看是否有任何错误。

要么，要么`xml:space`从你的样式表中删除，因为即使处理器没有抛出错误，它也不会对你有任何好处。

# 建议：

只需使用

```
<xsl:output method="html" indent="yes"/> 
```

作为 的第一个孩子`<xsl:stylesheet>`。这`indent="yes"`将防止所有输出元素被挤在一行中，因此您可以读取结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:31:56.870

根据规范，不会为属性保留空格 - 它在此帖子中突出显示。[在 XSLT 中保留属性空白](https://stackoverflow.com/questions/260436/preserving-attribute-whitespace-in-xslt)

# ruby - Ruby do-block 和 RestClient

> ID：16154098
> 
> 赞同：0
> 
> 时间：2013-04-22T18:26:22.893
> 
> 标签：ruby

我是红宝石的新手。

我注意到如果我这样做（假设“请求”已定义）：

```
RestClient::Request.execute(request) do |response|
  print response
end 
```

然后响应为空。但如果我这样做

```
response = RestClient::Request.execute(request)
print response 
```

然后响应有一些东西。

第二个有效而第一个无效的原因是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T18:35:16.567

的[文档](http://www.ruby-doc.org/gems/docs/w/wgibbs-rest-client-1.0.5/RestClient/Request.html#method-c-execute)`RestClient::Request.execute`没有显示它需要一个块：

```
def self.execute(args)
        新的（参数）。执行
结尾

```

它只返回通过调用`execute`RestClient 的匿名实例返回的值。

# web-services - This code contains no errors while compiling but gives errors while running it.

> ID：16154100
> 
> 赞同：-2
> 
> 时间：2013-04-22T18:26:30.710
> 
> 标签：web-services, jsp

This code contains no errors while compiling but gives errors while running it. I am not able to run this code on **tomcat 7.0**. I started restarting it several times. Can you suggest me any ideas how to change the code so that it works?

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Insert title here</title>
  </head>
  <%@ page import="java.util.*" %>
    <body>
      <form action="MyWSserve" method="get">Enter Zip Code
        <br>
        <input type="text" name="zipcode"></input>
        <input type="submit" name="GO" value="GO"></input>
      </form>
      <% //Object obj=request.getAttribute("values"); 
      //if(obj instanceof ArrayList){ 
        //ArrayList<String>mylist = (ArrayList<String>)obj; }%>
      <% //Iterator<String>itr = mylist.iterator(); %>
      <% String[] strcode=(String[])request.getAttribute( "values"); %>
      <p>The Temperature in Centigrade <%=strcode[0] %><br></p>
      <p>The Temperature in Farenheit <%=s trcode[1] %><br></p>
      <p>The Pressure is <%=s trcode[2] %><br></p>
      <p>The weather Condition is <%=s trcode[3] %><br></p>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T03:12:19.437

尝试这个：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Insert title here</title>
  </head>
  <%@ page import="java.util.*" %>
    <body>
      <form action="MyWSserve" method="get">Enter Zip Code
        <br>
        <input type="text" name="zipcode"></input>
        <input type="submit" name="GO" value="GO"></input>
      </form>
      <% //Object obj=request.getAttribute("values"); 
      //if(obj instanceof ArrayList){ 
        //ArrayList<String>mylist = (ArrayList<String>)obj; }%>
      <% //Iterator<String>itr = mylist.iterator(); %>
      <% String[] strcode = request.getParameterValues("values"); %>
      <% if (strcode != null && strcode.length >= 4) { %>
      <p>The Temperature in Centigrade <%=strcode[0] %><br></p>
      <p>The Temperature in Farenheit <%= strcode[1] %><br></p>
      <p>The Pressure is <%= strcode[2] %><br></p>
      <p>The weather Condition is <%= strcode[3] %><br></p>
      <% } else { %>
      <p>Call this page using 4 parameters called "values":
      <a href="?values=1st&values=2nd&values=3rd&values=4th">?values=1st&values=2nd&values=3rd&values=4th</a>
      <% } %>
    </body>
</html> 
```

# android - Android - Maps v2 - 如何排列绘制的最后一个标记的 z 轴

> ID：16154103
> 
> 赞同：2
> 
> 时间：2013-04-22T18:26:43.587
> 
> 标签：android, map, z-axis

我已经在我正在构建的应用程序中组装了一个工具，该工具使用 android 上的 v2 版本的地图，当标记彼此非常接近时，它们将彼此重叠，这不是问题，但至少我希望发生什么用于绘制的最后一个标记出现在顶部。

有没有办法确保绘制的最后一个标记显示在其余标记的顶部，或者在显示紧密组合在一起的标记时，我是否受系统决策的支配。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T19:42:44.580

现在我刚刚结束使用

```
marker.showInfoWindow(); 
```

它为我提供了我想要的确切行为，即保持最后绘制的标记出现在屏幕上其他标记的最顶部。

在旁注中，它确实打开了信息窗口，但如果我真的想要，我可以设置一个自定义布局，并在特定条件下为信息窗口设置为空，但根据我的需要，窗口打开实际上效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-21T09:00:13.140

正如 James 已经写的那样，显示一个 InfoWindow 就可以了。

您可以使用自己的适配器“显示”不可见的 InfoWindow：

```
public class InfoWindowAdapter implements GoogleMap.InfoWindowAdapter{

private final View mWindow;

public InfoWindowAdapter(Activity activity) {
    mWindow = App.activity.getLayoutInflater().inflate(R.layout.custom_info_window,
            null);
}

@Override
public View getInfoContents(Marker mark) {
    return null;
}

@Override
public View getInfoWindow(Marker marker) {
    render(marker, mWindow);
    return mWindow;
}

private void render(Marker marker, View view) {
    //do nothing
} 
```

}

将此设置为地图：

```
map.setInfoWindowAdapter(new InfoWindowAdapter(activity)); 
```

并显示信息窗口：

```
 currentlySelectedMarker.setSnippet(" ");
 currentlySelectedMarker.setTitle(" ");
 currentlySelectedMarker.showInfoWindow(); 
```

setTitle 的调用很重要。否则 showInfoWindow() 将被忽略。

# nlp - 如何从一堆文本中提取完整实体（不是部分实体）

> ID：16154107
> 
> 赞同：0
> 
> 时间：2013-04-22T18:26:50.760
> 
> 标签：nlp

这可能是一个经典的 NLP 问题，但是如何在一堆推文中提取 FULL 实体？

例如，假设有一堆推文提到“波士顿”和“马拉松”，两者都在同一条推文中。我怎么知道我应该提取“波士顿马拉松”，而不仅仅是波士顿或马拉松？

同样，假设有很多推文提到“权力的游戏”。我怎么知道要提取的实体是《权力的游戏》，而不仅仅是《游戏》？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:46:43.900

另一件要尝试的事情可能是提取搭配。有关此方法的介绍，请参阅[以下文章。](http://tdunning.blogspot.com/2008/03/surprise-and-coincidence.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T11:05:06.627

大多数命名实体识别器使用所谓的 IOB（inside-outside-beginning）标记方案正是因为您要询问的场景。例如，句子

```
John saw Game of Thrones. 
```

应标记为

```
John/B-PERSON saw/O Game/B-MISC of/I-MISC Thrones/I-MISC. 
```

请注意“权力的游戏”的第二个和第三个标记是如何被标记为在一个命名实体内的，该实体从“游戏”开始。当然，不能保证您使用的标记器会产生这个精确的标记序列。

[您可以在NLTK book](http://nltk.googlecode.com/svn/trunk/doc/book/ch07.html)中阅读有关 IOB 的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-21T05:31:45.357

You can also try with DBpedia-Spotlight endpoint..

[http://spotlight.dbpedia.org/rest/spot/?text=](http://spotlight.dbpedia.org/rest/spot/?text=)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-30T13:29:26.000

我目前正在从事件数据库中提取命名实体。我已经尝试了几个库 NLTK、PHP 脚本等。但我发现最好的是斯坦福 NER：[http](http://nlp.stanford.edu:8080/ner/) ://nlp.stanford.edu:8080/ner/ 。

English.all.3class.dissim.crf.ser.gz

```
<PERSON>John</PERSON> saw Game of Thrones. 
```

英语.conll.4class.dissim.crf.ser.gz

```
John saw <ORGANIZATION>Game of Thrones</ORGANIZATION>. 
```

只需忽略分类类型。

我使用不同的分类器从文本中提取实体。之后我使用斯坦福解析器：[http ://nlp.stanford.edu:8080/parser/](http://nlp.stanford.edu:8080/parser/)

类型化依赖，折叠

```
nsubj(saw-2, John-1)
root(ROOT-0, saw-2)
dobj(saw-2, Game-3)
prep_of(Game-3, Thrones-5) 
```

[http://nlp.stanford.edu/software/dependencies_manual.pdf](http://nlp.stanford.edu/software/dependencies_manual.pdf)

指定我想要或不想要的命名实体。

# html - Aweber 自定义模板编码

> ID：16154112
> 
> 赞同：1
> 
> 时间：2013-04-22T18:27:09.207
> 
> 标签：html, html-email, newsletter, aweber

我是专业的电子邮件编码器，非常了解如何编码电子邮件模板，现在我必须编写`Aweber templates` 我一直在做 的代码`mailchimp`，但不幸的是我无法理解它，
我完成了 [本教程](https://labs.aweber.com/docs/theme-language) 但我仍然感到困惑，任何人都可以参考我一些`tutorial or some guidance` 。我已经对电子邮件 pc 进行了编码，只需转换为 Aweber，请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:40:56.127

如果您打算创建自己的 Aweber 电子邮件模板，请点击以下链接：

```
https://labs.aweber.com/docs/creating-your-template
http://www.ehow.com/how_8403183_use-custom-html-template-aweber.html 
```

如果你知道html和css，你应该没问题。

# android - greenDao 架构升级

> ID：16154113
> 
> 赞同：26
> 
> 时间：2013-04-22T18:27:13.223
> 
> 标签：android, orm, greendao

我看到了另一个关于使用 green dao 进行架构升级/迁移的问题（[这里](https://stackoverflow.com/questions/13373170/greendao-schema-update-and-data-migration)）

该答案中有很多链接可以在进行架构升级时使用一个好的模式 - 但是没有示例说明您对数据实际执行了什么操作以正确迁移它，而且我找不到任何东西。

就我而言，我的迁移非常简单——我不希望转换任何现有数据，我只需要在我的模式中添加一些新表，我怀疑这是一种相当常见的情况。

**在不删除用户已经保存的数据的情况下，将新表添加到架构中的最简单方法是什么？一个具体的例子将不胜感激。**

如果 greenDao 提供了一个类似于 DevOpenHelper 的类，该类将简单地添加以前不存在于模式中的新表/列，而不首先删除现有的表/数据，那就太棒了。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-05-05T15:43:08.663

我终于有时间自己深入研究这一点，并意识到在旧表中保留数据的同时添加新表非常容易。

**免责声明**：虽然我意识到这个实现是针对我的场景的，但我认为它对像我这样专门使用 Android ORM 工具 (greenDao) 来处理 Android 上的 SQLite 的人很有帮助。我知道这对于那些从一开始就编写自己的表创建查询的人来说是很常见的，但是对于那些没有在 Android 上使用 SQLite DB 的胆量的人来说，我认为这个示例会有所帮助。

**解答：** 您可以修改 DevOpenHelper 内部类或创建自己的类。我暂时选择编辑 DevOpenHelper 以保持我的示例简单 - 但是，请注意，如果您重新生成 greendao 类，DevOpenHelper 将被覆盖。创建自己的类（如“MyOpenHelper”）并改用它会是一个更好的主意。

在我进行更改之前，DevOpenHelper.onUpgrade 看起来像这样：

```
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) 
{
        Log.i("greenDAO", "Upgrading schema from version " + oldVersion + " to " + newVersion + " by dropping all tables");
        dropAllTables(db, true);
        onCreate(db);
} 
```

不要删除所有表，而是看一下 GreenDao 自动生成的 createAllTables 方法。

重写 onUpgrade 以检查“oldVersion”是否是您要升级的版本，然后只为“新”表调用 createTable 方法。这是我的 onUpgrade 方法现在的样子：

```
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) 
{
        Log.i("greenDAO", "Upgrading schema from version " + oldVersion + " to " + 

        //Going from older schema to new schema
        if(oldVersion == 3 && newVersion == 4)
        {
            boolean ifNotExists = false;

            //Leave old tables alone and only create ones that didn't exist
            //in the previous schema
            NewTable1Dao.createTable(db, ifNotExists);
            NewTable2Dao.createTable(db, ifNotExists);
            NewTable3Dao.createTable(db, ifNotExists);
            NewTable4Dao.createTable(db, ifNotExists);
        }
        else
        {
            dropAllTables(db, true);
            onCreate(db);
        }
} 
```

添加一个新列将是类似的，除了您必须编写一些 SQL 或查看 greenDao 自动生成的 SQL 创建语句并利用这些语句。

要将单个新列（NEW_COLUMN，假设它是 INTEGER 类型）添加到现有表 (EXISTING_TABLE)，请执行以下操作：

```
db.execSQL("ALTER TABLE 'EXISTING_TABLE' ADD 'NEW_COLUMN' INTEGER"); 
```

现在对我来说，我需要做的就是添加新表格，所以这最终变得相当简单。希望其他人觉得这很有用。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-09-23T09:16:44.537

无论以前的用户来自哪里，我都采用了一种稍微不同的方法来自动处理更新。首先，我创建了一个在 SQLDatabase 上实现 onUpgrade 方法的类

```
public abstract class AbstractMigratorHelper {

public abstract void onUpgrade(SQLiteDatabase db);
} 
```

从这个类将继承我将在之后声明的所有迁移器助手

我将写其中一个的例子

```
public class DBMigrationHelper5 extends AbstractMigratorHelper {

/* Upgrade from DB schema x to schema x+1 */

public void onUpgrade(SQLiteDatabase db) {
    //Example sql statement
    db.execSQL("ALTER TABLE user ADD COLUMN USERNAME TEXT");
 }
} 
```

在此之后，您需要在升级时实际调用的类上实现逻辑，您需要在其中删除以前的 DevOpenHelper 以获得可能看起来像这样的自定义

```
public static class UpgradeHelper extends OpenHelper {

    public UpgradeHelper(Context context, String name, CursorFactory factory) {
        super(context, name, factory);
    }

    /**
     * Here is where the calls to upgrade are executed
     */
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

        /* i represent the version where the user is now and the class named with this number implies that is upgrading from i to i++ schema */
        for (int i = oldVersion; i < newVersion; i++) {
            try {
                /* New instance of the class that migrates from i version to i++ version named DBMigratorHelper{version that the db has on this moment} */
                AbstractMigratorHelper migratorHelper = (AbstractMigratorHelper) Class.forName("com.nameofyourpackage.persistence.MigrationHelpers.DBMigrationHelper" + i).newInstance();

                if (migratorHelper != null) {

                    /* Upgrade de db */
                    migratorHelper.onUpgrade(db);
                }

            } catch (ClassNotFoundException | ClassCastException | IllegalAccessException | InstantiationException e) {

                Log.e(TAG, "Could not migrate from schema from schema: " + i + " to " + i++);
                /* If something fail prevent the DB to be updated to future version if the previous version has not been upgraded successfully */
                break;
            }

        }
    }
} 
```

因此，如果您仔细命名迁移助手（即 MigrationHelper5 执行从模式 5 到模式 6 的迁移），您可以实现此逻辑，然后在每个 MigratorHelper 类中使用您需要实现的所有 sql 代码实现 execSQL 调用。

最后再说一点，如果您使用 proguard，则按类查找名称的方法可能不起作用，因为在混淆代码时会更改类名。您可能需要考虑在 proguard 配置文件 (proguard-rules.pro) 上添加一个例外，以排除从 AbstractMigratorHelper 扩展的任何类

```
# Avoid errors when upgrading database migrators

-keep public class * extends yourpackage.locationofyourclass.AbstractMigratorHelper 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-16T06:56:18.650

我做的方式略有不同。

我将新的@DatabaseTable 类和任何@DatabaseFields 添加到现有的@DatabaseTable 类并运行DatabaseConfigUtil。

然后我将向我的 DatabaseUpgrader 类添加一个新方法并修改我的 DatabaseHelper，更改 DATABASE_VERSION 值和 onUpdate 方法

```
public class DatabaseHelper extends OrmLiteSqliteOpenHelper {

    private static final int DATABASE_VERSION = 3;

    @Override
    public void onUpgrade(SQLiteDatabase db, ConnectionSource connectionSource, int oldVersion, int newVersion) {

        if (newVersion > oldVersion) {
            switch (oldVersion) {
                case 1:
                    DatabaseUpdater.from1to2(connectionSource);
                    DatabaseUpdater.from2to3(connectionSource);
                    break;

                case 2:
                    DatabaseUpdater.from2to3(connectionSource);
                    break;

                default:
                    onCreate(db);
            }
        }
    }

    public static DatabaseHelper getInstance() {

        return DatabaseHelper.mHelper;
    }

    public static void setInstance(Context context) {

        DatabaseHelper.mHelper = new DatabaseHelper(context);
    }

    …
} 
```

然后在 DatabaseUpdater 类中

```
public class DatabaseUpdater {

    private static final String TAG = "DatabaseHelper";

    public static void from1to2(ConnectionSource connectionSource) {

        try {
            DatabaseHelper helper = DatabaseHelper.getInstance();

            //Example add a table
            TableUtils.createTable(connectionSource, AnotherEntity.class);

        } catch (SQLException e) {
            Log.e(TAG, "Error upgrading database to v2: ", e);
        } catch (java.sql.SQLException e) {
            e.printStackTrace();
        }

    }

    public static void from2to3(ConnectionSource connectionSource) {

        try {
            DatabaseHelper helper = DatabaseHelper.getInstance();

            //Example add a field to a table
            RuntimeExceptionDao<MyEntity, Integer> myDao = helper.getMyDao();
            diaryDao.executeRaw("ALTER TABLE myEntity ADD firstNewField");
            diaryDao.executeRaw("ALTER TABLE myEntity ADD anotherNewField");

        } catch (SQLException e) {
            Log.e(TAG, "Error upgrading database to v3: ", e);
        }

    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-28T17:13:51.210

回答@MBH 在第一个答案时发布的问题。我也没有在这篇文章中找到答案，因此添加了。

GreenDAO 使用 build.gradle 文件中的模式版本号。Gradle 文件应包含以下内容

```
android {
   ...
}
greendao {
   schemaVersion 1
} 
```

有关更多信息，请参阅此[链接](https://blog.mindorks.com/powerful-android-orm-greendao-3-tutorial)。然后在升级时将此数字更改为 2 或任何增量。基于这个数字，GreenDAO 从 android.database.sqlite.SQLiteDatabase.DatabaseOpenHelper.java 调用下面的 API

```
public DatabaseOpenHelper(Context context, String name, int version) 
```

作为 Sqlite DB 升级的标准方法，它调用以下 API

```
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) 
```

正如其他答案所暗示的那样，此方法可以在派生类中被覆盖，并且可以处理任何项目特定的升级。希望这可以帮助。

# sql - 使用 Insert Into 即时创建表

> ID：16154115
> 
> 赞同：0
> 
> 时间：2013-04-22T18:27:26.893
> 
> 标签：sql, sql-server, sql-server-2008

这可能吗？我有一个很大的 .sql 文件，里面充满了没有数据库模式的 Insert Into 语句。我可以即时创建表吗？

这是一个例子：

```
INSERT INTO [g_fuel_site] ([SiteID], ... ,[EMVEnabled])
  VALUES('Sep 23 2011 3:05:51:000PM', ... ,0) 
```

编辑：没有桌子！脚本假设我这样做了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:33:43.430

Aaron 以 20 秒的优势击败了我。例如，将第一个插入更改为：

```
INSERT INTO [g_fuel_site] ([SiteID],[CurrentOperatingLevelID],[CurrentPriceBookID],  [NumberFuelSaleBuffers],[LinearUnitOfMeasure],[VolumeUnitOfMeasure],[PreAuthAllowed],[StackedSalesAllowed],[MaxLiveDispensers],[AllowedZeroPPUs],[MaxPPU],[MinPPU],[InitialConfigDone],[DispenserOptionModeID],[GenAuthEnabled],[PendingPriceBookID],[AllowPresetWithHandleUp],[UseFixedGradeName],[UseFixedServiceLevelName],[UseFixedGradeProductCodes],[TokenAttendantRcptCtl],[TokenAttendantNtwrkRcptCtl],[TokenAttendantPrpayRcptCtl],[RunAttendantInBufferedMode],[AllowAttendantBalanceQuery],[TokenOrStandardOperation],[TokenPrefix],[EnablePostPayLimit],[PostPayLimit],[EMVEnabled])VALUES('Sep 23 2011  3:05:51:000PM',1,1,2,'CM','L',1,1,12,0,9.9990,0.7500,1,1,1,2,1,0,0,0,0,0,0,0,0,0,'',0,100.0000,0) 
```

成为：

```
SELECT 
'Sep 23 2011  3:05:51:000PM' [SiteID],
1 [CurrentOperatingLevelID],
1 [CurrentPriceBookID],
2 [NumberFuelSaleBuffers],
'CM' [LinearUnitOfMeasure],
'L' [VolumeUnitOfMeasure],
1 [PreAuthAllowed],
1 [StackedSalesAllowed],
12 [MaxLiveDispensers],
0 [AllowedZeroPPUs],
9.9990 [MaxPPU],
0.7500 [MinPPU],
1 [InitialConfigDone],
1 [DispenserOptionModeID],
1 [GenAuthEnabled],
2 [PendingPriceBookID],
1 [AllowPresetWithHandleUp],
0 [UseFixedGradeName],
0 [UseFixedServiceLevelName],
0 [UseFixedGradeProductCodes],
0 [TokenAttendantRcptCtl],
0 [TokenAttendantNtwrkRcptCtl],
0 [TokenAttendantPrpayRcptCtl],
0 [RunAttendantInBufferedMode],
0 [AllowAttendantBalanceQuery],
0 [TokenOrStandardOperation],
'' [TokenPrefix],
0 [EnablePostPayLimit],
100.0000 [PostPayLimit],
0 [EMVEnabled]
INTO g_fuel_site 
```

在此之后，该表将存在。它只是推断列类型，并且仅当第一个 select into 包含以后插入期望的所有列时才有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:28:48.280

如果您将第一个（并且只有第一个）更改为`SELECT INTO`，是的。假设第一个`INSERT`具有正确可推导的数据类型。请注意，它不会神奇地为您创建键、索引、约束、计算列等。

但是，您的示例还包括一个前导`DELETE`，这使我相信该表已经存在。`DELETE`从表中删除所有行，它不会删除表。如果该表不存在，那么您的脚本应该 (a) 在运行删除之前检查它是否存在，并且 (b) 运行第一个命令 a`SELECT INTO`以便它创建它。但是，您可能想要定义数据类型（我也很难相信这`SiteID`是 a `DATETIME`）。

```
IF OBJECT_ID('dbo.g_fuel_site') IS NOT NULL
BEGIN
  DELETE g_fuel_site;
END
ELSE
BEGIN 
  SELECT SiteID = CONVERT(INT, 1), ... 
    INTO dbo.g_fuel_site 
    WHERE 1 = 0; -- creates table but with 0 rows
END

INSERT dbo.g_fuel_site(SiteID, ...) VALUES(...); -- first row
INSERT ...          
INSERT ... 
```

# asp.net - 为 DB 创建 ASP.NET 角色和成员资格表

> ID：16154117
> 
> 赞同：-1
> 
> 时间：2013-04-22T18:27:32.463
> 
> 标签：asp.net, sql-server

我创建了一个名为 Antune 的数据库。

我需要为我现有的数据库创建 ASP.NET 角色和表单表。我查看了 aspnet_regsql.exe 的位置，但在我的计算机上找到了大约 7 个。我用哪一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T18:28:40.610

无论哪一个与您使用的 asp.net 版本匹配。

例如，如果您使用的是 32 位 asp.net 2，请使用`windows\Microsoft.NET\Framework\v2.0.xxxxx`文件夹中的那个。

# git - maven release git push 使用了不正确的 URL

> ID：16154119
> 
> 赞同：2
> 
> 时间：2013-04-22T18:27:37.810
> 
> 标签：git, maven

我已经在谷歌上搜索了几个小时没有找到匹配的问题。我在 ~/my-repo.git 有一个（裸）git repo。我的那个 repo 的工作克隆位于 /development/checkout/... repo 的根目录中有多个项目，其中一个（my-project）在 /development/checkout/my-project 签出，当我称呼

```
mvn release:prepare 
```

从 /development/checkout/my-project 开始一切正常，然后在 git push 中消失，并显示以下消息：

```
[ERROR] fatal: '/home/mike/my-repo.git/my-project' does not appear to be a git repository 
```

这是绝对正确的——事实上该目录不存在，我可以从输出中看到 Maven 正在调用 git 来推送到该路径。POM 中的 <scm/> 节点是：

```
<scm>
    <developerConnection>scm:git:file:///home/mike/my-repo.git</developerConnection>
</scm> 
```

那么，为什么 Maven 坚持将 '/my-project' 附加到该 URL 并使其无效？毫无疑问，这是一个配置问题而不是错误，但我正在努力寻找相关的文档块。

Maven 3.0.5

混帐 1.8.2.1

maven-release-plugin 2.4.1

谢谢，迈克

# x86 - 使用 SSE 加载非连续浮点数

> ID：16154120
> 
> 赞同：2
> 
> 时间：2013-04-22T18:27:40.763
> 
> 标签：x86, intel, sse, simd

是否有可以从（非连续）均匀分布的内存地址加载浮点数的英特尔 SSE 指令？

例如给定一个数组`A = {0, 1, 2, 3 .... n}`，我想一次加载到一个 128 位寄存器`{A[0], A[4], A[8], A[12]}`，然后 `{A[5], A[9], A[13], A[17]}`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T18:48:22.447

In this kind of use case you would typically load multiple contiguous vectors and then permute them into the required arrangements using e.g. `pshufd` or `punpckldq` etc.

Note that with AVX2 in Haswell and beyond there are gathered load instructions (e.g. [_mm_i32gather_ps](https://software.intel.com/sites/landingpage/IntrinsicsGuide/#text=_mm_i32gather_ps&techs=AVX2&expand=3004)), which might also be worth considering.

# android - Android - 具有特定 ID 的 ListView 项目

> ID：16154121
> 
> 赞同：0
> 
> 时间：2013-04-22T18:27:42.570
> 
> 标签：android, database, listview

我正在android上开发一个小型应用程序，在一个活动中我需要显示客户列表。实际上，我已经完成了一个查询（通过使用 Cursor 对象），结果，它将输出（客户的）ID 和 CustomerName。

我需要在 ListView 中显示 CustomerName，同时，当用户点击列表中的客户时，我可以获得相关的 ID。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:44:17.360

只需按照以下步骤

1.  制作一个简单的类，其中包含两个变量，例如 name 和 id 类名：customer

2.  现在使扩展基本适配器的适配器类覆盖 getView 方法并设置客户的文本（​​名称）

3.  处理列表视图中的 onitemclick 方法中的点击

所以这里有一个示例代码

向适配器传递一个 ArrayList<Customer>

所以现在你的列表视图将有客户对象

单击时您将获得客户对象，使用 parent.itematposition(position) 将此方法的结果转换为类似这样的客户

客户 c=(Customer)parent.itematposition(position);

System.out.print(c.getId+c.getName());

公共类客户{私人斯汀名称；私有字符串 id；

为它们提供setter和getter，以便它们可以在上面使用

}

# facebook - facebook 聊天 API 登录失败

> ID：16154125
> 
> 赞同：0
> 
> 时间：2013-04-22T18:28:02.763
> 
> 标签：facebook, facebook-chat

我将 smack 用于聊天 API。在一切正常之前。但现在我有问题。尝试登录聊天服务器时出现错误：“您的帐户暂时不可用。通过从 Web 浏览器登录您的帐户重新获得访问权限”。

我尝试了不同的应用程序：[FriendCaster Chat](https://play.google.com/store/apps/details?id=com.handmark.friendcaster.chat&feature=nav_result)、[Go!Chat for Facebook](https://play.google.com/store/apps/details?id=com.spartancoders.gtok&feature=search_result) 。所有人也无法使用我的帐户。只有本机应用程序[Chat facebook](https://play.google.com/store/apps/details?id=com.facebook.orca&feature=search_result)工作正常。但是本机应用程序使用 MQTT 服务器，而不是聊天 api。

使用另一个帐户，我的应用程序运行正常。我的帐户有问题。但是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T11:13:35.627

我认为这是 facebook 错误，我们无能为力。

# php - Codeigniter 用户功能

> ID：16154126
> 
> 赞同：0
> 
> 时间：2013-04-22T18:28:05.670
> 
> 标签：php, codeigniter, crud, tankauth

我目前正在开发一个项目，该项目允许用户注册并登录到自己的用户区域并添加/编辑/删除注释片段。

我目前正在处理编辑类，我想知道如何才能使其他用户无法访问相同的 url 并编辑某人的笔记？（所有笔记都存储在数据库的同一张表中）

schema = id、title、description、snippet、user_id

例如，如果 user1 想在[http://domain.com/edit/1](http://domain.com/edit/1)上编辑他的笔记（绑定到他在数据库中的 user_id），我如何阻止 user2 访问相同的 url 并编辑他的笔记？

这是控制器

```
<?php if (!defined('BASEPATH')) exit('No direct script access allowed');

class Mysnippets extends CI_Controller {

function __construct()
{
    parent::__construct();

    if (!$this->tank_auth->is_logged_in()) {
        redirect('/login/');
    } 

    $this->load->model('dashboard_model');

    $this->data['user_id']  = $this->tank_auth->get_user_id();
    $this->data['username']= $this->tank_auth->get_username();  
}

public function index()
{
    $this->data['private_snippets']  = $this->dashboard_model->private_snippets();
    $this->load->view('dashboard/my_snippets', $this->data);    
}

function edit_snippet($snippet_id) {

    $snippet = $this->dashboard_model->get_snippet($snippet_id);

    //validate form input
    $this->form_validation->set_rules('title', 'Title', 'required');

    if (isset($_POST) && !empty($_POST))
    {       
        $data = array(
            'title' => $this->input->post('title'),
        );

        if ($this->form_validation->run() === true)
        {
            $this->dashboard_model->update_snippet($snippet_id, $data);
            $this->session->set_flashdata('message', "<p>Product updated successfully.</p>");                
            redirect(base_url().'mysnippets/edit_snippet/'.$snippet_id);
        }           
    }

    $this->data['message'] = (validation_errors() ? validation_errors() : $this->session->flashdata('message'));

    $this->data['snippet'] = $snippet;

    //display the edit product form
    $this->data['title'] = array(
        'name'      => 'title',
        'type'      => 'text',
        'value'     => $this->form_validation->set_value('title', $snippet['title']),
    );

    $this->load->view('dashboard/edit_snippet', $this->data);
}
} 
```

继承人模型：

```
<?php if (!defined('BASEPATH')) exit('No direct script access allowed');

class Dashboard_model extends CI_Model {

public function public_snippets()
{
    $this->db->select('id, title, description, author, date_submitted');
    $query = $this->db->get_where('snippets', array('state' => 'public'));
    return $query->result_array();
}

public function private_snippets()
{
    $this->db->select('id, title, description, date_submitted');
    $query = $this->db->get_where('snippets', array('user_id' => $this->tank_auth->get_user_id()));
    return $query->result_array();
}

public function add_snippet($data)
{
    $this->db->insert('snippets', $data);
    $id = $this->db->insert_id();
    return (isset($id)) ? $id : FALSE;
}

public function get_snippet($snippet_id) {
    $this->db->select('id, title');
    $this->db->where('id', $snippet_id);
    $query = $this->db->get('snippets');

    return $query->row_array();
}

public function update_snippet($snippet_id, $data)
{
    $this->db->where('id', $snippet_id);
    $this->db->update('snippets', $data);
}

} 
```

继承人的观点：

```
 <?php echo $message;?>

    <?php $snippet_id = $snippet['id']; ?>
    <?php echo form_open("mysnippets/edit_snippet/$snippet_id");?>

    <?php echo form_input($title); ?>
    <?php echo form_submit('submit', 'Submit');?>

    <?php echo form_close(); ?> 
```

有没有办法可以限制它所以如果另一个用户试图去那个 url 我可以重定向他们或显示错误消息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:12:03.137

我只需在模型中的以下函数中添加一行：

```
public function get_snippet($snippet_id) {
    $this->db->select('id, title');
    $this->db->where('id', $snippet_id);
    //users can access only their own snippets 
    $this->db->where('user_id', $this->session->userdata('user_id'));
    $query = $this->db->get('snippets');
    return $query->row_array();
} 
```

这会阻止他们访问信息，但我会做一些事情来阻止他们甚至能够首先尝试，即不给他们选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:07:47.123

这样的事情可能会奏效。

```
public function edit_snippet(snippet_id) 
{
    $snippet = $this->dashboard_model->get_snippet($snippet_id); 

    // this depends on what you are using for sessions; 
    // recommend you use db sessions
    if($snippet->user_id != $this->session->userdata('user_id');)
    {
        redirect('/mysnippets');
    } 
    else 
    {
        //allow editing 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T07:42:58.327

您可以检查您正在编辑的 id 是否与您登录时提供的会话 id 相同。

它可能是这样的：

```
if ($snippet_id !=  $this->session->userdata('login_id'))
{
   //redirect to another page
} 
```

# php - 如何在插入查询中获得 auto_increment 值？

> ID：16154129
> 
> 赞同：2
> 
> 时间：2013-04-22T18:28:19.217
> 
> 标签：php, mysql, codeigniter

所以，我想知道您是否要启动此查询：

```
INSERT INTO users (name, gender, location) VALUES ('Ricky-Bobby', 'm', 'Daytona Beach, FL'); 
```

并且假设`users`主键有另一个自动递增的列，您如何能够在不启动另一个查询的情况下获取该主键的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T18:30:31.617

codeigniter makes this available with `$this->db->last_insert_id()`

[http://ellislab.com/codeigniter/user-guide/database/helpers.html](http://ellislab.com/codeigniter/user-guide/database/helpers.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T07:36:49.480

Codeigniter`SELECT LAST_INSERT_ID()`通过函数简化了 MySQL 查询`$this->db->insert_id()`。

虽然这*是*一个查询，但它是一个非常轻量级的查询，不会成为性能问题。需要注意的一件事是：

*   如果您想要插入的行上的 ID；`$this->db->insert_id()`
*   如果您想要 auto_increment 值，那就是 an`INSERT`将具有的下一个值`id`，只需`$this->db->insert_id() + 1`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T18:36:23.390

您可以结合[`LAST_INSERT_ID()`](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)您的查询：

```
INSERT INTO users (name, gender, location) VALUES ('Ricky-Bobby', 'm', 'Daytona Beach, FL');
SELECT LAST_INSERT_ID(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T18:34:17.707

如果您使用 PDO，您可以使用它

[http://php.net/manual/en/pdo.lastinsertid.php](http://php.net/manual/en/pdo.lastinsertid.php)

# c++ - cygwin g++ 链接器找不到共享库

> ID：16154130
> 
> 赞同：11
> 
> 时间：2013-04-22T18:28:23.227
> 
> 标签：c++, shared

我一直在创建一个库。当我将它编译为静态库时，它工作正常。现在我想把它变成一个共享库。该库已创建并位于正确的位置，但是当我尝试编译客户端代码时，链接阶段说它找不到该库。

我已经尝试将其重命名为 al 或 dylib ，但这也无济于事。当我将 -v 标志放在链接上时，我可以看到我的库路径在那里。我也尝试了不同的路径。我使用了相对路径，但即使使用完整路径也找不到它。

库中的 Makefile：

```
.SUFFIXES:
.SUFFIXES: .o .cpp
.SUFFIXES: .o .d

CC := g++
LNK:= g++

CXXFLAGS_RELEASE    = -fPIC -shared -O2 -Wall -fmessage-length=0
CXXFLAGS_DEBUG      = -fPIC -shared -g -Wall -fmessage-length=0 -D _DEBUG

CXXFLAGS =  $(CXXFLAGS_DEBUG)

OBJDIR:=        obj
SRCDIR:=        src
HDIR:=          include

INCLUDE_PATHS:= -Iinclude -Iinclude/interfaces -Iinclude/support

CPP_FILES := propertyfile/propertyfile.cpp \
            propertyfile/propertyitem.cpp \
            propertyfile/propertyfactory.cpp \
            helper/string_helper.cpp

OBJ :=      $(patsubst %.cpp,$(OBJDIR)/%.o, $(CPP_FILES))
SRC :=      $(patsubst %.cpp,$(SRCDIR)/%.o, $(CPP_FILES))

LIBS:=      

TARGET:=    libsupport.so

all:    $(TARGET)

$(TARGET):  $(OBJ)
    $(LNK) -o $(TARGET) $(OBJ) -shared  
    @cp $(TARGET) ../lib
    @cp -r include ..

clean:
    rm -f $(OBJ) $(ASM) $(TARGET)

-include $(patsubst %.cpp,$(OBJDIR)/%.d, $(CPP_FILES))

$(OBJDIR)/%.o: $(SRCDIR)/%.cpp $(OBJDIR)/%.d 
    @mkdir -p `dirname $@`
    $(CC) $(CXXFLAGS) -c $< -o $@ $(INCLUDE_PATHS)

$(OBJDIR)/%.d: $(SRCDIR)/%.cpp 
    @mkdir -p `dirname $@`
    $(CC) $(CXXFLAGS) -MM -MT $@ -MF $(OBJDIR)/$*.d -c $< $(INCLUDE_PATHS) 
```

这是应用程序的 Makefile：

```
.SUFFIXES:
.SUFFIXES: .o .cpp

CC := g++
LD := g++

CXXFLAGS_RELEASE    = -O2 -Wall -fmessage-length=0
CXXFLAGS_DEBUG      = -g -Wall -fmessage-length=0 -D _DEBUG
CXXFLAGS =  $(CXXFLAGS_DEBUG)

OBJDIR:=        obj
SRCDIR:=        src

INCLUDE_PATHS:= -Iinclude -I../include
LIBS:=      -L /cygdrive/d/src/c/lib -lsupport

CPP_FILES := nohupshd.cpp \
            daemon.cpp \
            task.cpp

OBJ :=      $(patsubst %.cpp,$(OBJDIR)/%.o, $(CPP_FILES))
SRC :=      $(patsubst %.cpp,$(SRCDIR)/%.o, $(CPP_FILES))

TARGET:=    nohupshd

all:    $(TARGET)

$(TARGET):  $(OBJ)
    $(LD) -o $(TARGET) $(OBJ) $(LIBS)

clean:
    rm -f $(OBJ) $(ASM) $(TARGET)

-include $(patsubst %.cpp,$(OBJDIR)/%.d, $(CPP_FILES))

$(OBJDIR)/%.o: $(SRCDIR)/%.cpp $(OBJDIR)/%.d 
    @mkdir -p `dirname $@`
    $(CC) $(CXXFLAGS) -c $< -o $@ $(INCLUDE_PATHS)

$(OBJDIR)/%.d: $(SRCDIR)/%.cpp 
    @mkdir -p `dirname $@`
    $(CC) $(CXXFLAGS) -MM -MT $@ -MF $(OBJDIR)/$*.d -c $< $(INCLUDE_PATHS) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-23T07:42:13.607

经过一番试验，我找到了如何在 cygwin 下编译共享库的解决方案。

显然编译器正在寻找一个 DLL 文件，即使它位于 cygwin 中。所以第一步是添加你的路径，库将在 PATH 变量中。

```
 export PATH=$PATH:/cygdrive/d/src/c/lib 
```

显然，当链接到共享库时，链接器似乎默认寻找 DLL 文件。我不知道为什么，因为在 cygwin 中，我希望它像在其他 UNIX 系统上一样查找 .so 文件。

但是，有两种解决方案，它们都有效。

首先，您可以创建一个指向您的 .so 库的链接，其名称为 .dll

```
ln -s /cygdrive/d/src/lib/libsupport.so libsupport.dll 
```

在这种情况下，不必更改生成文件，-lsupport 将在链接时找到库。我更喜欢这个解决方案。

其次，您可以使用全名指定链接器选项。

```
LIBS:=      -L /cygdrive/d/src/c/lib -l:libsupport.so 
```

那么您不必创建链接。

所以关键似乎是共享库必须在cygwin下的PATH中。在这种情况下使用 LD_LIBRARY_PATH 没有帮助，因为您可以链接可执行文件，但是在尝试运行它时，它不会找到它。

```
ldd nohupshd.exe

libsupport.so => not found 
```

更新：由于某种原因，当我检查 ldd 时，我的库突然从列表中消失了。我发现 cygwin 使用该名称来区分 MS Windows 和 Unix 共享库。所以为了让它工作，库的名称必须是 cyg.so 才能让它工作，否则可执行文件似乎是一些 Windows 构建。在这种情况下，您不需要创建名为 x.dll 的链接，因为共享库保留在 Unix 环境中。

```
 $(LNK) -o cyg$(TARGET).so $(OBJ) -shared 
```

使用eclipse进行调试时，共享库的路径也必须在windows路径环境变量中。否则，调试会话会立即终止而不会出现错误。

# java - Android 中的蓝牙客户端-服务器示例

> ID：16154137
> 
> 赞同：0
> 
> 时间：2013-04-22T18:28:44.247
> 
> 标签：java, android, bluetooth, client-server

我正在制作一个简单的客户端-服务器应用程序，可用于传输整数、字符串或字符。

我的应用程序编译成功，但没有客户端-服务器连接。当我尝试搜索服务器时，它会给出 NullPointerException 就行了

```
bluetooth.startDiscovery(); 
```

但是，当我启动服务器时，它也不例外。

此外，当我在一台设备上启动服务器并在另一台设备上查找服务器时，由于服务器正常运行的问题或客户端的问题，无法建立连接。

我已经有了一个使用蓝牙适配器的实例

```
bluetooth = BluetoothAdapter.getDefaultAdapter(); 
```

我认为可能给出了一个空指针，因为我在 onclickListener 中调用了 startDiscovery() 方法，这个，

```
private void setupSearchButton() {
    Button searchButton = (Button) findViewById(R.id.button_search);
    searchButton.setOnClickListener(new OnClickListener() {

        public void onClick(View view) {
            registerReceiver(discoveryResult, new IntentFilter(BluetoothDevice.ACTION_FOUND));
            if (!bluetooth.isDiscovering()) {
              try {  foundDevices.clear();
                bluetooth.startDiscovery(); } catch(Exception e)
                {
                Context c = getApplicationContext();
                    Toast.makeText(c, e.toString(),Toast.LENGTH_LONG).show();

                }
            }
        }
    });
} 
```

声明服务器的代码发布在这里：

```
 @Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == DISCOVERY_REQUEST) {
        boolean isDiscoverable = resultCode > 0;
        if (isDiscoverable) {
            String name = "bluetoothserver";
            try {
                final BluetoothServerSocket btserver = bluetooth.listenUsingRfcommWithServiceRecord(name, uuid);
                AsyncTask<Integer, Void, BluetoothSocket> acceptThread = new AsyncTask<Integer, Void, BluetoothSocket>() {

                    @Override
                    protected BluetoothSocket doInBackground(Integer... params) {

                        try {
                            socket = btserver.accept(params[0] * 1000);
                            return socket;
                        } catch (Exception e) {
                            Log.d("BLUETOOTH SERVER EXCEPTION : ", e.getMessage());
                        }

                        return null;
                    }

                    @Override
                    protected void onPostExecute(BluetoothSocket result) {
                        if (result != null) {
                            switchUI();
                        }
                    }
                };
                acceptThread.execute(resultCode);
            } catch (IOException e) {
                Log.d("BLUETOOTH", e.getMessage());
            }
        }
    }
} 
```

有人可以告诉我有什么问题吗？我正在使用两个按钮，一个用于启动蓝牙服务器，另一个用于搜索蓝牙服务器。单击启动蓝牙服务器按钮时运行的方法会触发 startActivityForResult，结果会执行 onActivityResult 方法，如下所示。搜索服务器按钮的 OnClickListener 已在此处显示。

# html - 包含文件引用的 HTML 可折叠列表

> ID：16154140
> 
> 赞同：1
> 
> 时间：2013-04-22T18:28:54.310
> 
> 标签：html

我是新来的，对 html 中的可折叠列表有疑问。我需要在学校网站页面上编写一个可折叠列表，其中包含“分钟”和“议程”的集合（它们只是已上传到网站的 pdf 文件）。

我的任务是将它们全部放在一个可折叠的列表中，这样页面就不会变得无限长。我们每个月都会添加一个新的“分钟”pdf 和一个新的“议程”pdf，所以我将只编辑代码以包含新文件。

我创建了一个下拉菜单，其中包含对网站的引用和一个 go 按钮，但从未使用过可折叠列表。我想我会有两个标题（一个用于分钟，一个用于议程）然后您单击其中一个，所有 pdf 文档将按时间顺序显示。

如果您要单击 pdf 链接，它应该下载，因为它现在在页面上是这样的。我试图尽可能详细地说明我要完成的工作。

**到目前为止，我在 4 月 23 日拥有的**新编辑是：****

 **```
<script type="text/javascript">
//<![CDATA[
function toggle(divName){
if(document.getElementById)
{
var theDiv = document.getElementById(divName);
if(theDiv)
{
if(theDiv.style.display == 'none')
{
theDiv.style.display = 'block';
}
else
{
theDiv.style.display = 'none';
}
}
}
}
//]]>
</script>
<ul>
<li><a href="javascript:toggle('Minutes')">Advisory Board Minutes</a>
<ul id="Minutes">
<li><a href="http://www.cnn.com">Advisory Board Minutes 1</li></a>
<li>Advisory Board Minutes 2</li>
<li>Advisory Board Minutes 3</li>
</ul>
</li>
<li><a href="javascript:toggle('Agendas')">Advisory Board Agendas</a>
<ul id="Agendas">
<li>Advisory Board Agenda 1</li>
<li>Advisory Board Agenda 2</li>
<li>Advisory Board Agenda 3</li>
</ul>
</li>
</ul> 
```

现在我的问题是如何在页面加载时使列表“折叠”而不是“展开”，因为它现在显示已经“展开”？另外，我如何链接会议纪要或议程中的元素（即咨询委员会会议纪要 1，而不是[http://www.ccn.com](http://www.ccn.com)，我可以只输入文件的名称和扩展名，这样当您单击它时，它将启动去下载）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:16:17.160

其实这没什么大不了的，如果你可以使用[jQuery](http://api.jquery.com/)的话。
像这样的东西：

```
$('#Minutes > li').click(function() {
    $('#Minutes ul').not($(this).find('ul')).stop(true,true).slideUp();
    $(this).find('ul').stop(true,true).slideDown(); list item
}); 
```

我已经在每行的作用的小提琴中加入了评论。 [http://jsfiddle.net/tgs2x/](http://jsfiddle.net/tgs2x/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:27:14.443

您也可以将 the[`.show()`](http://api.jquery.com/show/)和[`.hide()`](http://api.jquery.com/hide/)jQuery 方法与 the 一起使用`.click(function()`。**

# jquery - KeyPress上的JQuery SlideDown

> ID：16154141
> 
> 赞同：0
> 
> 时间：2013-04-22T18:28:55.280
> 
> 标签：jquery, keypress, slidedown

我有一个带有高级选项的表格。高级选项位于 div（隐藏）中。当“搜索”输入框被键入时，我想使用向下滑动取消隐藏 div。这是代码（部分取自另一个来源：[jQuery slideDown with forms](https://stackoverflow.com/questions/6526725/jquery-slidedown-with-forms)）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="http://api.jquery.com/resources/events.js"></script>
    <script type="text/javascript">
$("#searched").keypress(function(event) {
  if ( event.which == 13 ) {
     event.preventDefault();
   }
        $("#advanced").slideDown();

});
    </script>
</head>
<body>

<div id="content">
<form action="mycontrolleraddress" method="post" accept-charset="utf-8" name="search_form" id="search_form">

<input type="text" name="query" value="" placeholder="Search..." id="searched"/><br/>

<div id="advanced" style="display: none;">
    From: <input type="text" name="date_from" value="" id="datepicker" onchange="validateDate();" class="datefield"  /><br/>
    To: <input type="text" name="date_to" value="" id="datepicker2" onchange="validateDate();" class="datefield"  /> <br/>
</div>
<input type="submit" name="submit" value="Submit"  />

</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:32:08.653

把你的代码包装在里面`$(document).ready(function(){});`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:33:25.913

在里面使用`$(function() {});`或`$(document).ready(function() {});`

```
<script type="text/javascript">
    $(function() {
$("#searched").keypress(function(event) {
  if ( event.which == 13 ) {
     event.preventDefault();
   }
        $("#advanced").slideDown();

});
});
    </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T18:33:39.003

```
$('#search_form').on('focus', '#searched', function(e){
    $('#advanced').slideDown();
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T18:34:15.630

解决方案是将您的 javascript 代码包装在其中：

```
$(document).ready(function(){
    // your code
}); 
```

# c++ - 为什么我不能成功地将文件数据读入结构数组

> ID：16154154
> 
> 赞同：1
> 
> 时间：2013-04-22T18:29:47.843
> 
> 标签：c++, struct, deserialization

我正在为我的 C++ 决赛编写一个基于战舰棋盘游戏的程序，我目前正在处理的问题是如何管理用户帐户。我必须允许用户每次玩游戏时都使用同一个帐户并跟踪他们的赢/输记录。我可以将数据写入文件，但我需要在玩家重新登录时将其读回，然后对其进行排序以找到他们的用户名。我被困在这部分。

这是我正在使用的文件，它读取为用户名，wins，losses：

```
Rocky 0 0
Bob 0 0
dave 0 0
Jerry 0 0
Bert 0 0
Ernie 0 0
Marcus 0 0 
```

编辑：这是我要重复很多次的输出

```
-858993460
-858993460

-858993460
-858993460

-858993460
-858993460 
```

UserData 是一个结构

```
//begin create/find account function
userData createAccount(userData ud){

    //local variables
    int playerOption;

    //creates object to open files
    ifstream infile;

    //creates object to open files
    ofstream outfile;

    do {
        cout << "Do you have an existing account?" << endl;
        cout << "" << endl;
        cout << "Enter 1 for yes or 2 for no:" << endl;
        cin >> playerOption;
    }
    while (playerOption >= 3 || playerOption <= 0);

    if (playerOption == 1){
        cout << "Enter user name:" << endl;
        cin >> ud.name;

        //opens file in read mode
        infile.open("userData.dat");

        //tests to make sure the file is open
        if (!infile){
            cout << "File open failure!";
        }

        //creates array of user data
        userData userDataArray [SIZE];

        //reads data from file into array until end of file
        int i=0;
        while(i<SIZE){
            infile >> userDataArray[i].name;
            infile >> userDataArray[i].wins;
            infile >> userDataArray[i].losses;
            i++;
        }

        ///test output
        int j=0;
        while (j<SIZE){
            cout << userDataArray[j].name << endl;
            cout << userDataArray[j].wins << endl;
            cout << userDataArray[j].losses << endl;
            j++;
        }
        //end test output

        //closes file
        infile.close();
    }

    else if(playerOption == 2){
        cout << "Enter user name:" << endl;
        cin >> ud.name;
        ud.wins = 0;
        ud.losses = 0;

        //opens file in write mode
        outfile.open("userData.dat",ios::app);

        //tests to make sure the file is open
        if (!outfile){
            cout << "File open failure!";
        }

        //writes userData struct to file
        outfile << ud.name << " " << ud.wins << " " << ud.losses << endl;

        //closes file
        outfile.close();
    }

    return ud;

//end create/find account function
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:02:28.423

这就是一个最小的例子，它完美地工作：

```
#include <iostream>
#include <fstream>

using namespace std;

typedef struct { string name; int wins; int losses; } userData;

void createAccount(){
    ifstream infile;
    infile.open("userData.dat");

    userData userDataArray[3];

    for(int i = 0; i < 3; ++i){
        infile >> userDataArray[i].name;
        infile >> userDataArray[i].wins;
        infile >> userDataArray[i].losses;
    }

    for(int i = 0; i < 3; ++i){
        cout << userDataArray[i].name << endl;
        cout << userDataArray[i].wins << endl;
        cout << userDataArray[i].losses << endl;
    }
}

int main(){
    createAccount();
} 
```

输出：

```
Rocky
0
0
Bob
0
0
dave
0
0 
```

所以你应该一点一点地简化你的代码，直到它起作用。或者从像我这样的简单代码开始，然后构建自己的方式来实现所需的功能。

您最初的问题是“为什么我不能成功地将文件数据读取到结构数组中”，但显然这不是问题所在。

首先， 的值是`SIZE`多少？如果你说输出很长，你可能设置`size`的值远高于文件中序列化数据的数量，并且打印了很多未初始化的数据。

# ruby-on-rails - Rails：类：类的未定义方法“范围”

> ID：16154163
> 
> 赞同：1
> 
> 时间：2013-04-22T18:30:22.533
> 
> 标签：ruby-on-rails, polymorphism

我有一个多态模型：

```
class Vote < ActiveRecord::Base
  belongs_to :voteable, :polymorphic => true

  after_destroy :sum_votes

  private

    def sum_votes
      voteable.update_column(:votes_sum, 0)
    end

end 
```

当我尝试创建投票时，我收到此错误：

```
undefined method `scoped' for Class:Class 
```

它发生在`sum_votes`方法中，似乎源于`voteable`关联。这可能是什么原因造成的？

更新：

```
App backtrace
-------------

 - app/models/vote.rb:44:in `sum_votes'
 - app/models/vote.rb:16:in `cast_vote_of_type'
 - app/models/tag/item/vote.rb:7:in `cast_vote'
 - app/controllers/tag/item/votes_controller.rb:6:in `create'

Full backtrace
--------------

 - (gem) activerecord-3.2.12/lib/active_record/associations/association.rb:123:in `target_scope'
 - (gem) activerecord-3.2.12/lib/active_record/associations/association.rb:87:in `scoped'
 - (gem) activerecord-3.2.12/lib/active_record/associations/singular_association.rb:42:in `find_target'
 - (gem) activerecord-3.2.12/lib/active_record/associations/association.rb:145:in `load_target'
 - (gem) activerecord-3.2.12/lib/active_record/associations/association.rb:55:in `reload'
 - (gem) activerecord-3.2.12/lib/active_record/associations/singular_association.rb:9:in `reader'
 - (gem) activerecord-3.2.12/lib/active_record/associations/builder/association.rb:44:in `block in define_readers'
 - app/models/vote.rb:44:in `sum_votes'
 - (gem) activesupport-3.2.12/lib/active_support/callbacks.rb:427:in `_run__901513201__save__352223903__callbacks'
 - (gem) activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'
 - (gem) activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
 - (gem) activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'
 - (gem) activerecord-3.2.12/lib/active_record/callbacks.rb:264:in `create_or_update'
 - (gem) activerecord-3.2.12/lib/active_record/persistence.rb:84:in `save'
 - (gem) activerecord-3.2.12/lib/active_record/validations.rb:50:in `save'
 - (gem) activerecord-3.2.12/lib/active_record/attribute_methods/dirty.rb:22:in `save'
 - (gem) activerecord-3.2.12/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
 - (gem) activerecord-3.2.12/lib/active_record/transactions.rb:313:in `block in with_transaction_returning_status'
 - (gem) activerecord-3.2.12/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
 - (gem) activerecord-3.2.12/lib/active_record/transactions.rb:208:in `transaction'
 - (gem) activerecord-3.2.12/lib/active_record/transactions.rb:311:in `with_transaction_returning_status'
 - (gem) activerecord-3.2.12/lib/active_record/transactions.rb:259:in `block in save'
 - (gem) activerecord-3.2.12/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
 - (gem) activerecord-3.2.12/lib/active_record/transactions.rb:258:in `save'
 - (gem) activerecord-3.2.12/lib/active_record/persistence.rb:45:in `create'
 - (gem) activerecord-3.2.12/lib/active_record/relation.rb:87:in `block in create'
 - (gem) activerecord-3.2.12/lib/active_record/relation.rb:241:in `block in scoping'
 - (gem) activerecord-3.2.12/lib/active_record/scoping.rb:98:in `with_scope'
 - (gem) activerecord-3.2.12/lib/active_record/relation.rb:241:in `scoping'
 - (gem) activerecord-3.2.12/lib/active_record/relation.rb:87:in `create'
 - (gem) activerecord-3.2.12/lib/active_record/relation.rb:119:in `first_or_create'
 - app/models/vote.rb:16:in `cast_vote_of_type'
 - app/models/tag/item/vote.rb:7:in `cast_vote'
 - app/controllers/tag/item/votes_controller.rb:6:in `create'
 - (gem) actionpack-3.2.12/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
 - (gem) actionpack-3.2.12/lib/abstract_controller/base.rb:167:in `process_action'
 - (gem) actionpack-3.2.12/lib/action_controller/metal/rendering.rb:10:in `process_action'
 - (gem) actionpack-3.2.12/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
 - (gem) activesupport-3.2.12/lib/active_support/callbacks.rb:436:in `_run__348146889__process_action__388332341__callbacks'
 - (gem) activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'
 - (gem) activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
 - (gem) activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'
 - (gem) actionpack-3.2.12/lib/abstract_controller/callbacks.rb:17:in `process_action'
 - (gem) actionpack-3.2.12/lib/action_controller/metal/rescue.rb:29:in `process_action'
 - (gem) actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
 - (gem) activesupport-3.2.12/lib/active_support/notifications.rb:123:in `block in instrument'
 - (gem) activesupport-3.2.12/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
 - (gem) activesupport-3.2.12/lib/active_support/notifications.rb:123:in `instrument'
 - (gem) actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
 - (gem) actionpack-3.2.12/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
 - (gem) activerecord-3.2.12/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
 - (gem) actionpack-3.2.12/lib/abstract_controller/base.rb:121:in `process'
 - (gem) actionpack-3.2.12/lib/abstract_controller/rendering.rb:45:in `process'
 - (gem) actionpack-3.2.12/lib/action_controller/metal.rb:203:in `dispatch'
 - (gem) actionpack-3.2.12/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
 - (gem) actionpack-3.2.12/lib/action_controller/metal.rb:246:in `block in action'
 - (gem) actionpack-3.2.12/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
 - (gem) actionpack-3.2.12/lib/action_dispatch/routing/route_set.rb:36:in `call'
 - (gem) journey-1.0.4/lib/journey/router.rb:68:in `block in call'
 - (gem) journey-1.0.4/lib/journey/router.rb:56:in `call'
 - (gem) actionpack-3.2.12/lib/action_dispatch/routing/route_set.rb:601:in `call'
 - (gem) meta_request-0.2.3/lib/meta_request/middlewares/app_request_handler.rb:11:in `call'
 - (gem) rack-contrib-1.1.0/lib/rack/contrib/response_headers.rb:17:in `call'
 - (gem) meta_request-0.2.3/lib/meta_request/middlewares/headers.rb:16:in `call'
 - (gem) meta_request-0.2.3/lib/meta_request/middlewares/meta_request_handler.rb:13:in `call'
 - (gem) warden-1.2.1/lib/warden/manager.rb:35:in `block in call'
 - (gem) warden-1.2.1/lib/warden/manager.rb:34:in `call'
 - (gem) actionpack-3.2.12/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
 - (gem) rack-1.4.5/lib/rack/etag.rb:23:in `call'
 - (gem) rack-1.4.5/lib/rack/conditionalget.rb:35:in `call'
 - (gem) actionpack-3.2.12/lib/action_dispatch/middleware/head.rb:14:in `call'
 - (gem) remotipart-1.0.5/lib/remotipart/middleware.rb:30:in `call'
 - (gem) actionpack-3.2.12/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
 - (gem) actionpack-3.2.12/lib/action_dispatch/middleware/flash.rb:242:in `call'
 - (gem) rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
 - (gem) rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
 - (gem) actionpack-3.2.12/lib/action_dispatch/middleware/cookies.rb:341:in `call'
 - (gem) activerecord-3.2.12/lib/active_record/query_cache.rb:64:in `call'
 - (gem) activerecord-3.2.12/lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
 - (gem) actionpack-3.2.12/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
 - (gem) activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `_run__936866828__call__352223903__callbacks'
 - (gem) activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'
 - (gem) activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
 - (gem) activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'
 - (gem) actionpack-3.2.12/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
 - (gem) actionpack-3.2.12/lib/action_dispatch/middleware/reloader.rb:65:in `call'
 - (gem) actionpack-3.2.12/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
 - (gem) better_errors-0.7.2/lib/better_errors/middleware.rb:84:in `protected_app_call'
 - (gem) better_errors-0.7.2/lib/better_errors/middleware.rb:79:in `better_errors_call'
 - (gem) better_errors-0.7.2/lib/better_errors/middleware.rb:56:in `call'
 - (gem) actionpack-3.2.12/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
 - (gem) actionpack-3.2.12/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
 - (gem) railties-3.2.12/lib/rails/rack/logger.rb:32:in `call_app'
 - (gem) railties-3.2.12/lib/rails/rack/logger.rb:16:in `block in call'
 - (gem) activesupport-3.2.12/lib/active_support/tagged_logging.rb:22:in `tagged'
 - (gem) railties-3.2.12/lib/rails/rack/logger.rb:16:in `call'
 - (gem) actionpack-3.2.12/lib/action_dispatch/middleware/request_id.rb:22:in `call'
 - (gem) rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
 - (gem) rack-1.4.5/lib/rack/runtime.rb:17:in `call'
 - (gem) activesupport-3.2.12/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
 - (gem) rack-1.4.5/lib/rack/lock.rb:15:in `call'
 - (gem) actionpack-3.2.12/lib/action_dispatch/middleware/static.rb:62:in `call'
 - (gem) railties-3.2.12/lib/rails/engine.rb:479:in `call'
 - (gem) railties-3.2.12/lib/rails/application.rb:223:in `call'
 - (gem) rack-1.4.5/lib/rack/content_length.rb:14:in `call'
 - (gem) railties-3.2.12/lib/rails/rack/log_tailer.rb:17:in `call'
 - (gem) rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
 - C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
 - C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
 - C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

# c# - 如何分解表达式以满足通用属性更改方法？

> ID：16154172
> 
> 赞同：0
> 
> 时间：2013-04-22T18:30:47.493
> 
> 标签：c#, expression, inotifypropertychanged

我有一个基本的 EF 实体类，它实现`INotifyPropertyChanged`.

基本属性 Id 是我的示例：

```
 /// <summary>
  /// Entity Id
  /// </summary>
  public int Id {
     get { return id; }
     set { SetValue<int>(() => (Id != value), (v) => id = v); } // < can this be simplified into a single call?
  } 
```

...定义 SetValue 的地方：

```
 protected void SetValue<TValue>(Expression<Func<bool>> evalExpr, Action<TValue> set) {
     // Compile() returns a Func<bool>
     var doSetValue = evalExpr.Compile();

     if (doSetValue()) {
        var expr = evalExpr.Body as BinaryExpression;
        //  this is not compiling - how do I decompose the expression to get what I need?
        var propertyName = ((PropertyExpression)expr.Left).Name;
        var assignValue = (TValue)((ConstantExpression)expr.Right).Value;

        set(assignValue);
        _propertyChangedHandler(this, new PropertyChangedEventArgs(propertyName));
     }
  } 
```

我能找到的所有样本都需要参数。我更喜欢设置器（SetValue 调用）尽可能简单 - 即，有没有办法将输入参数减少到 1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T02:45:37.550

有各种比你所拥有的更简单的选项（这里有一些按我喜欢每个选项的粗略顺序排列）：

*   [Fody/PropertyChanged](https://github.com/Fody/PropertyChanged) - 这是一个免费的自动代码编织器，在编译时运行以自动实现`INotifyPropertyChanged`您选择的类的属性。运行时不需要程序集。
*   [INotifyPropertyChanged，.NET 4.5 方式——重温](http://danrigby.com/2012/04/01/inotifypropertychanged-the-net-4-5-way-revisited/)
*   [PostSharp - 自动实现 INotifyPropertyChanged](http://www.postsharp.net/model/inotifypropertychanged)
*   [INotifyPropertyChanged 接口文档的代码示例](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)

以下是“The .NET 4.5 Way”的核心代码片段：

```
protected bool SetProperty<T>(ref T storage, T value, [CallerMemberName] String propertyName = null)
{
    if (object.Equals(storage, value)) return false;

    storage = value;
    this.OnPropertyChanged(propertyName);
    return true;
} 
```

像这样使用：

```
 /// <summary>
  /// Entity Id
  /// </summary>
  public int Id {
     get { return id; }
     set { SetValue(ref id, value); }
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T02:58:25.463

你应该改变

```
var propertyName = ((PropertyExpression)expr.Left).Name; 
```

到

```
var propertyName = ((MemberExpression)expr.Left).Member.Name; 
```

并且您的代码可以编译，但是您正在做的事情根本不是最佳且不可信的。你会得到一个`InvalidCastException`！

在每次调用时编译一个`Expression<T>`并不是最优的，而且，你怎么知道用户将 lambda 传递给了如下方法：

```
() => (Id != value) 
```

并不是

```
() => (id != value) // using the field instead of property 
```

或者

```
() => (value != Id) // passing the property as the second operand 
```

?

另外，`value`在您的表达中不是`ConstantExpression`. 它`value`本身只是`set`属性部分的局部变量，当传递给 lambda 表达式时，它被提升为类字段（值被捕获 - 有关更多信息，请参见[此处](http://msdn.microsoft.com/en-us/library/bb397687.aspx)）。所以你所拥有的是`MemberExpression`双方的。

如果您不能使用 .NET 4.5 ( `[CallerMemberName]`)，我强烈建议您使用这种方法：

```
public class EntityBase : INotifyPropertyChanged
{
    protected virtual void OnPropertyChanged(string propName)
    {
        var h = PropertyChanged;
        if (h != null)
            h(this, new PropertyChangedEventArgs(propName));
    }

    public event PropertyChangedEventHandler PropertyChanged;

    protected bool ChangeAndNofity<T>(ref T field, T value, Expression<Func<T>> memberExpression)
    {
        if (memberExpression == null)
        {
            throw new ArgumentNullException("memberExpression");
        }

        var body = memberExpression.Body as MemberExpression;
        if (body == null)
        {
            throw new ArgumentException("Lambda must return a property.");
        }

        if (EqualityComparer<T>.Default.Equals(field, value))
        {
            return false;
        }

        field = value;
        OnPropertyChanged(body.Member.Name);
        return true;
    }
} 
```

使用它很简单：

```
public class Person : EntityBase
{
    private int _id;
    public int Id
    {
        get { return _id; }
        set { ChangeAndNofity(ref _id, value, () => Id); }
    }
} 
```

# javascript - 从 WinJS.xhr 调用 Web 服务 - 格式

> ID：16154176
> 
> 赞同：1
> 
> 时间：2013-04-22T18:31:01.303
> 
> 标签：javascript, sharepoint, xmlhttprequest

我需要调用名为[http://myfulldomain.com/_vti_bin/webpartpages.asmx的 SharePoint Web 服务](http://myfulldomain.com/_vti_bin/webpartpages.asmx)

我要调用的方法称为 GetWebPart，它接受 3 个参数：pageurl、storagekey、storage。

我不确定如何指定要调用的 URI/如何指定参数，是否使用 data: 对象？

到目前为止，我有：

```
var dashboardURL = "http://myfulldomain.com/_vti_bin/webpartpages.asmx/GetWebPart";
WinJS.xhr({ url: dashboardURL })
    .done(function complete(result) {
        q("#sharepointresponse").innerText = "Downloaded";
    },
    function error(result) {
        q("#sharepointresponse").innerText = "Error: " + result.statusText;
    }); 
```

简而言之，如何调用 Web 服务的特定方法以及如何指定参数？

谢谢，安德鲁

# javascript - Google Maps API V3：KML 图层未显示？

> ID：16154178
> 
> 赞同：1
> 
> 时间：2013-04-22T18:31:08.877
> 
> 标签：javascript, google-maps-api-3, kml

我有一个 KML 文件，我将其复制/粘贴在一起形成一个 fusiontable，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://earth.google.com/kml/2.1">
<Document>
<Polygon><outerBoundaryIs><LinearRing><coordinates>-73.992177,40.743465,0.0 -74.008242,40.752352,0.0 -74.006533,40.756112,0.0 -73.983973,40.748934,0.0 -73.987733,40.744149,0.0 -73.992177,40.743465,0.0</coordinates></LinearRing></outerBoundaryIs></Polygon>
<Polygon><outerBoundaryIs><LinearRing><coordinates>-73.973035,40.689458,0.0 -73.989784,40.683305,0.0 -74.008242,40.686381,0.0 -73.978846,40.705181,0.0 -73.977479,40.698003,0.0 -73.973035,40.689458,0.0</coordinates></LinearRing></outerBoundaryIs></Polygon>
(...)
</Document>
</kml> 
```

据我了解，在地图上绘制这些就像

```
var zipoverlay = new google.maps.KmlLayer('zips.kml');
zipoverlay.setMap(map); 
```

但显然这无济于事。是不是没有我想象的那么神奇？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T17:13:46.737

感谢 Molle 博士，我们解决了这个问题。这是我做错的事情：

1.  KML 文件需要可以从我自己的机器外部访问。将其托管在其他地方以便地图能够抓取它
2.  KML 文件的结构需要是这样的：

`

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://earth.google.com/kml/2.2">
<Document>
<Placemark>
<Polygon><outerBoundaryIs><LinearRing><coordinates>-73.992177,40.743465,0.0 -74.008242,40.752352,0.0 -74.006533,40.756112,0.0 -73.983973,40.748934,0.0 -73.987733,40.744149,0.0 -73.992177,40.743465,0.0</coordinates></LinearRing></outerBoundaryIs></Polygon></Placemark>
<Placemark><Polygon><outerBoundaryIs><LinearRing><coordinates>-73.973035,40.689458,0.0 -73.989784,40.683305,0.0 -74.008242,40.686381,0.0 -73.978846,40.705181,0.0 -73.977479,40.698003,0.0 -73.973035,40.689458,0.0</coordinates></LinearRing></outerBoundaryIs></Polygon>
</Placemark>
</Document></kml> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T21:09:05.683

A`<Polygon/>`必须是`<Placemark/>`or的孩子`<MultiGeometry/>`，但不是`<Document/>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-18T08:00:51.110

我遇到了这种问题（kml 层不显示），因为 url（或者可能只是文件名）太长了。使用较短的网址，它正在工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-17T02:07:35.220

我的错误是在我的服务器上启用了 HTTP 身份验证，这阻止了谷歌请求 KML 文件。我猜它不是在客户端完成的。

# sql - SQL 不等式加入返回的笛卡尔积

> ID：16154180
> 
> 赞同：3
> 
> 时间：2013-04-22T18:31:13.933
> 
> 标签：sql, inner-join, cartesian-product, netezza

我在获取连接条件以隔离唯一记录时遇到问题。我的查询返回笛卡尔积，我不知道如何让它停止。我的表如下所示：

```
Table A         
ID_1    Start   End Name
137 1:00    2:00    Galia
137 2:00    3:00    Est
137 3:00    4:00    Omnia
137 4:00    5:00    Divisa
137 5:00    6:00    Partes
137 6:00    7:00    Tres
137 7:00    8:00    Quarum
137 8:00    9:00    Unam
137 9:00    10:00   Incolunt

Table B     
ID_1Time_1  Time_2
137 3:10    3:57 
```

我的查询是：

```
select A.*, B.Time_1, B.Time_2
from Table_A A
inner join
Table_B B
on 
A.ID_1 = B.ID_1 and B.Time_1<=A.End and B.Time_2 >= A.Start 
```

我得到的看起来像这样：

```
ID_1Start   End Name    Time_1  Time_2
137 1:00    2:00    Galia   3:10    3:57
137 2:00    3:00    Est 3:10    3:57
137 3:00    4:00    Omnia   3:10    3:57
137 4:00    5:00    Divisa  3:10    3:57
137 5:00    6:00    Partes  3:10    3:57
137 6:00    7:00    Tres    3:10    3:57
137 7:00    8:00    Quarum  3:10    3:57
137 8:00    9:00    Unam    3:10    3:57
137 9:00    10:00   Incolunt3:10    3:57 
```

所以看起来它给出了两个表的笛卡尔积，考虑到每条记录都满足所有三个条件，这是有道理的。我想要的只是返回时间对应的记录，如下所示：

```
ID_1Start   End Name    Time_1  Time_2
137 3:00    4:00    Omnia   3:10    3:57 
```

关于如何构建连接以实现这一目标的任何建议？如果这有助于提供可用功能，我正在开发一个 Netezza 盒子。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T18:52:18.773

您希望以下条件适用：

```
 A.Start <= B.Time_1 <= B.Time_2 <= A.End 
```

假设列数据类型是一致的（即仅存储时间，而不是日期时间或时间戳），并且值是一致的（即，上述多重关系中的中心谓词已经有效）。这些条件可以用 SQL 重写为

```
B.Time_2 <= A.End AND B.Time_1 >= A.Start 
```

并不是

```
B.Time_1 <= A.End and B.Time_2 >= A.Start 
```

这可能对应于

```
B.Time_1 <= A.Start <= A.End <= B.Time_2 
```

因此：

```
select A.*, B.Time_1, B.Time_2
from Table_A A
inner join
Table_B B
on 
A.ID_1 = B.ID_1 and B.Time_1>=A.Start and B.Time_2 <= A.End 
```

# vb.net - MyBase.Load 或 Me.Load 在表单加载时未触发且没有可追溯的错误

> ID：16154181
> 
> 赞同：0
> 
> 时间：2013-04-22T18:31:13.947
> 
> 标签：vb.net, winforms, events, windows-forms-designer

我有一个 vb.net windows 表单，当表单打开时，它没有触发表单加载处理程序。这发生在我手动编辑 Designer.vb 文件以添加一些新字段之后。我已经查看了一个类似的[问题](https://stackoverflow.com/questions/4129925/form-load-event-not-firing-form-showing)，但是在尝试了该问题建议答案中的所有解决方案后，它没有显示表单可能隐藏的任何隐藏错误。

有些事情需要注意，其他事件似乎正在正确触发，例如 Me.FormClosed 或 Me.FormClosing。

Form_Load 事件示例代码：

```
 Private Sub Form_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        Try

        Catch ex As Exception

        End Try
    End Sub 
```

我对 Designer.vb 文件所做的更改示例：

添加

```
 Private Sub InitializeComponent()
        Me.TextBox100 = New System.Windows.Forms.TextBox()

        '
        'TextBox100
        '
        Me.TextBox100.BackColor = System.Drawing.Color.Honeydew
        Me.TextBox100.DataBindings.Add(New System.Windows.Forms.Binding("Text", Me.SomethingBindingSource, "NAME", True))
        Me.TextBox100.Dock = System.Windows.Forms.DockStyle.Fill
        Me.TextBox100.Font = New System.Drawing.Font("Microsoft Sans Serif", 9.75!, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, CType(0, Byte))
        Me.TextBox100.Location = New System.Drawing.Point(414, 118)
        Me.TextBox100.Margin = New System.Windows.Forms.Padding(0)
        Me.TextBox100.Name = "TextBox100"
        Me.TextBox100.Size = New System.Drawing.Size(134, 22)
        Me.TextBox100.TabIndex = 47
        Me.TextBox100.TextAlign = System.Windows.Forms.HorizontalAlignment.Center
    End Sub

    Friend WithEvents TextBox100 As System.Windows.Forms.TextBox 
```

任何建议都会非常有帮助，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T17:42:24.180

我忘记为其中一个文本框绑定添加一个字段，这导致表单出现错误，从而阻止从触发负载处理程序。

# c# - 不会为 .NET 方法生成垫片

> ID：16154182
> 
> 赞同：14
> 
> 时间：2013-04-22T18:31:20.467
> 
> 标签：c#, .net, moles, microsoft-fakes

当我开始使用 Microsoft Fakes 时，我很高兴开始填充一些 .NET 方法。我被引导相信我将能够填充任何 .NET 方法，无论是否静态：http: [//msdn.microsoft.com/en-us/library/hh549176.aspx](http://msdn.microsoft.com/en-us/library/hh549176.aspx)。

但是，我一直在尝试填充 TcpClient 中的一些方法并且只创建存根，这对我没有好处，因为我希望能够更改一些方法以返回我自己的数据，而不是依赖于实时TcpClient 给我数据。

如果除了 Microsoft Fakes 之外还有其他方法，我愿意接受有关如何执行此操作的任何建议。

编辑：添加代码来演示问题

```
[TestMethod]
public void CommunicationTest()
{
    var stubbedTcpClient = new System.Net.Sockets.Fakes.StubTcpClient
    {

    };

    //No such ShimTcpClient exists
    var shimmedTcpClient = new System.Net.Sockets.Fakes.ShimTcpClient
    {

    };
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-22T20:50:12.997

[在这篇博文](http://thecurlybrace.blogspot.com/2012/10/how-to-generate-missing-fakes-shims.html)和[这里](http://social.msdn.microsoft.com/Forums/en-US/vsunittest/thread/74fd087e-d833-4254-85be-8e1c1b0c5b61/)的帮助下得到了它。

解决方案是在 System.fakes 文件中添加我想要显式填充的类。这是我现在的样子：

```
<Fakes xmlns="http://schemas.microsoft.com/fakes/2011/">
  <Assembly Name="System" Version="4.0.0.0"/>
  <ShimGeneration>
    <Clear/>
    <Add FullName="System.Net.Sockets.TcpClient"/>
    <Remove Obsolete="1"/>
  </ShimGeneration>
</Fakes> 
```

这`Remove Obsolete="1"`是为了阻止 Shim 生成代码在尝试填充 [Obsolete] 代码时引发错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-12T22:32:33.513

我也有同样的问题。

我的 System.fakes 和 mscorlib.fakes 看起来像这样：

```
<Fakes xmlns="http://schemas.microsoft.com/fakes/2011/">
  <Assembly Name="mscorlib" Version="4.0.0.0"/>
  <ShimGeneration>
    <Add Namespace="System.ComponentModel.BackgroundWorker"/>
  </ShimGeneration>
</Fakes> 
```

和

```
<Fakes xmlns="http://schemas.microsoft.com/fakes/2011/">
  <Assembly Name="System" Version="4.0.0.0"/>
  <ShimGeneration>
    <Add Namespace="System.ComponentModel.BackgroundWorker"/>
  </ShimGeneration>
</Fakes> 
```

# 解决方案

系统假货

```
 <Fakes xmlns="http://schemas.microsoft.com/fakes/2011/">
   <Assembly Name="System" Version="4.0.0.0"/>
   <ShimGeneration>
     <Add FullName="System.ComponentModel.BackgroundWorker!"/>
   </ShimGeneration>
 </Fakes> 
```

mscorlib.fakes

```
<Fakes xmlns="http://schemas.microsoft.com/fakes/2011/">
  <Assembly Name="mscorlib" Version="4.0.0.0"/>
  <ShimGeneration>
    <Add FullName="System.ComponentModel.BackgroundWorker!"/>
  </ShimGeneration>
</Fakes> 
```

保存文件后，我重建解决方案。现在我有了 ShimBackgroundWorker。

# java - 如何获取地图值

> ID：16154187
> 
> 赞同：-1
> 
> 时间：2013-04-22T18:31:46.870
> 
> 标签：java, map, hashmap

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class clsWarehouse {

public static void main(String[] args){

    class Items {
        private String iItemID;
        private String strItemName;
        private String strItemDescription;
        private String iItemPrice;
        private String strSize;
        private String strSex;

    public Items (String id, String name, String description, String price, String size, String sex){
        iItemID = id;
        strItemName = name;
        strItemDescription = description;
        iItemPrice = price;
        strSize = size;
        strSex = sex;
        }
    }   

Map<Integer, Items> ItemMap = new HashMap<Integer, Items>();
ItemMap.put(1, new Items("3", "test1", "test2", "30", "20", "Male")); 

for (Map.Entry<Integer, Items> entry : ItemMap.entrySet()) {
System.out.println("Key = " + entry.getKey() + ", Value = " + entry.getValue());

        Items test = entry.getValue();
        String test2 = test.toString();
        System.out.println(test2);
    }  
}
} 
```

你好，

我想获取存储在地图中的值，但我只获取内存位置，Key = 1，Value = clsWarehouse$1Items@c3c749。有人可以帮我弄这个吗。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:32:50.363

覆盖类中的[`toString()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#toString%28%29)方法，`Items`以便在调用它时控制输出。中的默认实现`Object`会产生您正在观察的行为（来自链接的 Javadocs）

```
getClass().getName() + '@' + Integer.toHexString(hashCode()) 
```

`hashCode()`默认情况下，该方法[使用内存地址](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode%28%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:34:58.897

`Items`在课堂上添加您需要的吸气剂

Ex（用于 ItemID）：

```
public String getItemID()
{
    return iItemID;
} 
```

在你的`for loop`

```
Items test = entry.getValue();
System.out.println(test.getItemID()); 
```

# c# - Stream.CopyToAsync ( DeflateStream ) 的意外行为

> ID：16154190
> 
> 赞同：0
> 
> 时间：2013-04-22T18:31:58.933
> 
> 标签：c#, asynchronous, stream

我希望我不必复制完整的示例或创建一个最小的解决方案，这个问题是我的一些基本知识问题。

我有一个与 Azure 存储同步数据的应用程序，一切正常，上传部分已经在异步方法中。这一切都有效。

我试图进行更多优化，并希望将 stream.CopyTo 更改为 CopyToAsync。

```
using(var filestream = streamProvider())
{
    filestream.CopyTo(stream);
    stream.Position = 0;
} 
```

我将其更改为 await filestream.CopyToAsync(stream) 并且仅上传了部分文件。

在撰写本文时，我发现异常抛出是“解码时发现无效数据”，IO.InvalidDataException。

这让我回到了作为 GZip/ 或 DeflateStream 的流 - 所以我的问题是关于它是否不希望在这些流上与 CopyToAsync 一起使用？

### 语境

```
public async Task UploadFile(string storePath, Func<Stream> streamProvider, bool copyLocalBeforeUpload = false)
{
    using (new Timer(this.MessageQueue, "UPLOAD", storePath))
    {
        using (var stream =  copyLocalBeforeUpload ? new MemoryStream() : streamProvider() )
        {
            try
            {
                if (copyLocalBeforeUpload)
                {
                    using (var filestream = streamProvider())
                    {
                        await filestream.CopyToAsync(stream);
                        stream.Position = 0;
                    }
                }

                var blob = GetBlobReference(storePath);

                await blob.UploadFromStreamAsync(stream,new BlobRequestOptions { RetryPolicy = new LinearRetry(TimeSpan.FromMilliseconds(100), 3) });        

            }
            catch (Exception e)
            {
                if (this.MessageQueue != null)
                {
                    this.MessageQueue.Enqueue(string.Format("Failed uploading '{0}'", storePath));
                }
            }
        }
    }
} 
```

# c# - 为什么 HttpContext 访问 Session 变量比直接访问 Session 更好

> ID：16154194
> 
> 赞同：0
> 
> 时间：2013-04-22T18:32:16.793
> 
> 标签：c#, asp.net, .net

你可以看到这段代码

```
[HttpPost]
public ActionResult RemoveFromCart(int id)
{
     // Remove the item from the cart
     var cart = ShoppingCart.GetCart(this.HttpContext);

...

public static ShoppingCart GetCart(HttpContextBase context)
{
    var cart = new ShoppingCart();
    cart.ShoppingCartId = cart.GetCartId(context);
    return cart;
}

// We're using HttpContextBase to allow access to cookies.
public string GetCartId(HttpContextBase context)
{
   if (context.Session[CartSessionKey] == null)
   {
       if (!string.IsNullOrWhiteSpace(context.User.Identity.Name))
       {
            context.Session[CartSessionKey] = context.User.Identity.Name;
       }
       else
       {
             // Generate a new random GUID using System.Guid class
             Guid tempCartId = Guid.NewGuid();

             // Send tempCartId back to client as a cookie
             context.Session[CartSessionKey] = tempCartId.ToString();
        }
   }

   return context.Session[CartSessionKey].ToString();
} 
```

那么为什么我们不能直接使用`Session[CartSessionKey]`呢？

```
[HttpPost]
public ActionResult RemoveFromCart(int id)
{
     // Remove the item from the cart
     var cart =  Session[CartSessionKey].ToString(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T18:38:07.460

没有实质性区别。on的`Session`属性`Controller`实现为：

```
if (this.HttpContext != null)
    return this.HttpContext.Session;
else
    return null; 
```

这是一个方便的属性，所以你使用哪个并不重要。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-22T18:34:23.820

使用上下文可确保您访问的是正确的会话。在使用之前，您应该始终检查您的 Session 是否为空。这只是很好的编码实践。捷径是懒惰的，会导致错误，而且是不好的做法。

# c++ - 如何在多个线程中使用 ffmpeg 的 sws_scale？

> ID：16154197
> 
> 赞同：1
> 
> 时间：2013-04-22T18:32:27.707
> 
> 标签：c++, c, ffmpeg

我有一个基于[sws_scale](http://ffmpeg.org/doxygen/trunk/group__lsws.html#gae531c9754c9205d90ad6800015046d74)的色彩空间转换功能。它将在应用程序的生命周期内从多个不同的线程调用。但是，我不知道 sws_scale 的线程安全性如何，而且我没有在其文档中找到它。

我会假设每个线程都需要自己的[SwsContext](http://ffmpeg.org/doxygen/trunk/structSwsContext.html)因为这个参数将被共享，但这足以保证不会有任何内部冲突吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T21:36:31.210

只要每个线程都有自己的 SwsContext 值，您就应该是安全的。快速浏览一下 libswscale 源代码表明它不使用任何全局变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T22:38:25.920

默认情况下，ffmpeg 通常不是线程安全的。但是，只要在单独的线程上创建每个 sws 上下文，libswsscale 似乎是安全的。

但是，当使用 avcodec 操作时，有一个回调机制，您可以使用它来为您的解码步骤（或其他 avcodec 相关操作）启用线程安全：

** 请注意，我使用这个任意 Mutex 类用于说明目的：

```
 int ffmpeg_lock_callback(void **mutex, enum AVLockOp op)
   {
      static Mutex m;

      switch(op)
      {
          case AV_LOCK_CREATE:
          {
              *mutex = &m;
              break;
          }
          case AV_LOCK_OBTAIN:
          {
              // TODO: Lock you mutex here
              break;
          }
          case AV_LOCK_RELEASE:
          {
              // TODO: Unlock your mutex here
              break;
          }
          case AV_LOCK_DESTROY:
          {
              *mutex = 0;
              break;
          }

      }
      return 0;
  } 
```

...

这在你的 .h 文件中：

```
extern "C"{
#include "libavcodec/avcodec.h"
}

extern "C"
{
    int ffmpeg_lock_callback(void **mutex, enum AVLockOp op);
} 
```

# java - 使用 jdk 1.7 启动 Apache James

> ID：16154201
> 
> 赞同：5
> 
> 时间：2013-04-22T18:32:31.423
> 
> 标签：java, james

我曾尝试使用 Java jdk 1.7u17 在 Linux Mint 64 位（Debian）上运行 apache-james-3.0-beta4 服务器，但由于 JAXB 库错误，它没有工作。根据文档，应下载不同的 jar 文件（[http://jaxb.java.net/2.1.13/JAXB2_20100510.jar](http://jaxb.java.net/2.1.13/JAXB2_20100510.jar)）并放入 conf/lib 目录。我这样做了，但问题仍然存在。当我切换到 jdk 1.6 时，一切都开始正常工作。

有没有人解决过这个问题？

这是堆栈跟踪的一部分：

```
INFO  19:45:24,669 | org.apache.james.container.spring.context.JamesServerApplicationContext | Refreshing org.apache.james.container.spring.context.JamesServerApplicationContext@11641923: startup date [Mon Apr 22 19:45:24 CEST 2013]; root of context hierarchy
Exception in thread "main" org.springframework.beans.factory.BeanDefinitionStoreException: Failed to create the JAXB binder; nested exception is javax.xml.bind.JAXBException: Provider com.sun.xml.internal.bind.v2.ContextFactory could not be instantiated: com.sun.xml.internal.bind.v2.runtime.IllegalAnnotationsException: 1 counts of IllegalAnnotationExceptions
Class has two properties of the same name "outputs"
        this problem is related to the following location:
                at public java.util.List org.apache.camel.model.ResequenceDefinition.getOutputs()
                at org.apache.camel.model.ResequenceDefinition
        this problem is related to the following location:
                at private java.util.List org.apache.camel.model.ResequenceDefinition.outputs
                at org.apache.camel.model.ResequenceDefinition

 - with linked exception:
[com.sun.xml.internal.bind.v2.runtime.IllegalAnnotationsException: 1 counts of IllegalAnnotationExceptions
Class has two properties of the same name "outputs"
        this problem is related to the following location:
                at public java.util.List org.apache.camel.model.ResequenceDefinition.getOutputs()
                at org.apache.camel.model.ResequenceDefinition
        this problem is related to the following location:
                at private java.util.List org.apache.camel.model.ResequenceDefinition.outputs
                at org.apache.camel.model.ResequenceDefinition
]
... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T21:43:12.237

我下载的文件不是最新的。当我下载[更新版本的 beta5](https://repository.apache.org/content/repositories/snapshots/org/apache/james/james-server-app/3.0.0-beta5-SNAPSHOT/)时，它运行良好。

# iphone - 如何使用 Objective-C 类别

> ID：16154202
> 
> 赞同：9
> 
> 时间：2013-04-22T18:32:32.357
> 
> 标签：iphone, ios, objective-c, objective-c-category

当您在文件中实现类的类别时，该类的所有实例是否默认都属于该类别？

我是 Objective-C 的新手，我正试图让我不可编辑的 UITextView 不可选择。我使用一个类别遇到了这个答案： [https ://stackoverflow.com/a/8013538/1533240](https://stackoverflow.com/a/8013538/1533240)

其中有以下解决方案：

```
@implementation UITextView (DisableCopyPaste)

-(BOOL) canBecomeFirstResponder
{
    return NO;
}
@end 
```

我将代码段添加到我的代码中，但它似乎不起作用，因为我仍然可以选择文本。我的声明`UITextView`是通常的：

`titleLabel = [[UITextView alloc] initWithFrame:frame];`

我尝试将声明更改为，`[DisableCopyPaste alloc]`但这似乎不起作用..哈哈。

谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-22T18:42:53.837

您误解了类别的意义。类别将方法添加到现有类。它们绝不能用于覆盖现有方法。这样做是未定义的行为（技术上仅在一种情况下未定义，但您无法预测这种情况，因此您必须假设它适用）。

如果需要覆盖方法，则必须子类化，而不是使用类别。请参阅您链接的问题的最佳答案。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-22T18:51:05.943

> 当您在文件中实现类的类别时，该类的所有实例是否默认都属于该类别？

**是的。**如果您创建一个类别，[该类别中的方法将添加到该类](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/CustomizingExistingClasses/CustomizingExistingClasses.html)中。例如，如果您在 NSString 上创建一个返回字符串校验和的类别，您可以在*任何*NSString 实例上使用该方法。

> 我将代码段添加到我的代码中，但它似乎不起作用，因为我仍然可以选择文本。

**不要使用类别来覆盖现有方法。**

一方面，这是一种糟糕的形式。您正在以作者没有预料到的方式有效地*改变类的行为。*另一方面，您不能指望覆盖起作用-未定义将类别添加到类的顺序，因此您永远不知道是否会出现*其他*类别并替换您尝试替换的方法. 这根本不可靠。**如果您需要覆盖方法，请创建一个子类。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T18:47:48.720

What you need to do is to declare `category` in header `.h` file:

such as:

```
@interface UITextView (DisableCopyPaste)
-(BOOL) methodName
@end 
```

then in `.m` define as

```
@implementation UITextView (DisableCopyPaste)
-(BOOL) methodName
{
    return NO;
}
@end 
```

You can do two thing,

1.  You can write it in a class and import that to all classes you need this functionality.
2.  Or write these lines eachs `.h` and `.m` (respectively) you need it.

# ruby-on-rails - 迁移后：Ruby 代码认为方法未定义，之前运行良好

> ID：16154210
> 
> 赞同：0
> 
> 时间：2013-04-22T17:52:07.067
> 
> 标签：ruby-on-rails, passenger

[所以我修复损坏的红宝石设置](https://serverfault.com/questions/501476/ruby-mongrel-installation-broken-after-centos-upgrade-server-wont-start)的奥德赛还没有结束。我现在正在运行一个乘客服务器，以及带有 rails 2.2.2 的 ruby​​ 1.8.7，因为有一个遗留安装需要它。此安装现在可以工作 - 部分。有些部分没有，这是我在 production.log 中收到的错误消息：

```
ActionView::TemplateError (undefined method `textilize' for #<ActionView::Base:0x7fa9369fb9d8>) on line #3 of app/views/static/partners.rhtml:
1: <div id ="title"><h6>Partners</h6><br></div>
2: <div id="content_left">
3: <p><%= textilize(Static.find(:first, :conditions => [ "title = 'Partners'"]).text) %></p>
4: <br>
5: </div> 
```

如您所见，这是一些自定义代码，出于某种原因，它会将方法视为“未定义”。我已经从以前工作的安装中复制了所有内容，所以我想知道这是怎么发生的。它会喷出更多我在[这里](http://pastie.org/7698543)倾倒的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:04:35.003

在 AlexD 的评论之后，我看起来更多了。解决方案是安装[RedCloth](http://redcloth.org)，这是缺少的宝石。

# lucene.net - 如何拒绝 Lucene.net 中的数值？

> ID：16154214
> 
> 赞同：1
> 
> 时间：2013-04-22T18:33:30.477
> 
> 标签：lucene.net

我想知道在 Lucene.net 中进行索引或搜索时是否可以拒绝数字短语或数值。

例如（这是一行），

```
Hi all my no is 4756396 
```

现在，当我索引或搜索时，它应该拒绝要索引或搜索的数值 4756396。我尝试使用 1、2、3、4、5、6 等制作自定义停用词列表，但我想它只会在出现单个数字时忽略。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:47:18.103

您可以复制`StandardAnalyzer`并自定义语法（简单的 JFlex 内容）以拒绝数字标记。如果这样做，您需要将分析器移植回 Java，因为 JFlex 将生成 Java 代码，您可以尝试使用 C# Flex。

您还可以编写一个`TokenFilter`逐个扫描令牌并拒绝它们（如果它们是数字）。如果您只想过滤整数并且仍然保留例如由连字符分隔的数字，则过滤器可以简单地尝试 a`double.TryParse()`并且如果失败则接受令牌。更健壮和可定制的解决方案仍将使用词法解析器。

## 编辑：

这是我的意思的一个快速示例，并带有一个显示如何使用它的主要方法。在此我使用 a`TryParse()`来过滤掉标记，如果是用于更复杂的生产系统，我会使用词法解析器系统。（看看[C# Flex](http://sourceforge.net/projects/csflex/)）

```
public class NumericFilter : TokenFilter
{
    private ITermAttribute termAtt ;

    public NumericFilter(TokenStream tokStream)
        : base(tokStream)
    {
        termAtt = AddAttribute<ITermAttribute>();
    }

    public override bool IncrementToken()
    {
        while (base.input.IncrementToken())
        {
            string term = termAtt.Term;
            double res ;
            if(double.TryParse(term, out res))
            {
                // skip this token
                continue;
            }
            // accept this token
            return true;
        }
        // no more token in the stream
        return false;
    }
}

static void Main(string[] args)
{
    RAMDirectory dir = new RAMDirectory();
    IndexWriter iw = new IndexWriter(dir, new KeywordAnalyzer(), IndexWriter.MaxFieldLength.UNLIMITED);

    Document d = new Document();
    Field f = new Field("text", "", Field.Store.YES, Field.Index.ANALYZED);
    d.Add(f);

    // use our Filter here
    f.SetTokenStream(new NumericFilter(new LowerCaseFilter(new WhitespaceTokenizer(new StringReader("I have 300 dollars")))));
    iw.AddDocument(d);

    iw.Commit();
    IndexReader reader = iw.GetReader();
    // print all terms in the text field
    TermEnum terms = reader.Terms(new Term("text", ""));
    do
    {
        Console.WriteLine(terms.Term.Text);
    }
    while (terms.Next());

    reader.Dispose();
    iw.Dispose();
    Console.ReadLine();
    Environment.Exit(42);
} 
```

# jquery - Twitter Bootstrap 模态表单提交

> ID：16154216
> 
> 赞同：20
> 
> 时间：2013-04-22T18:33:39.410
> 
> 标签：jquery, forms, twitter-bootstrap, modal-dialog, submit

我最近一直在摆弄 twitter bootstrap，使用 java/jboss，我一直在尝试从 Modal 界面提交表单，该表单只包含一个隐藏字段，没有其他任何东西，所以显示等是不重要的。

表单在模态本身之外，我只是不知道这怎么可能

我尝试将模态本身添加到表单中，尝试使用 HTML5 form="form_list" 甚至将表单添加到模态正文并使用一些 jquery 强制提交，但似乎没有任何效果

下面是一个示例模式，我试图增加我需要的内容，OK 按钮之前正在编辑以尝试调用 jquery 函数。

```
<div class='modal small hide fade' id='myModal' tabindex='-1' role='dialog' aria-labelledby='myModalLabel' aria-hidden='true'>
    <div class='modal-header'>
        <button type='button' class='close' data-dismiss='modal' aria-hidden='true'>×</button>
        <h3 id='myModalLabel'>Delete Confirmation</h3>
    </div>
    <div class='modal-body'>
        <p class='error-text'>Are you sure you want to delete the user?</p>
    </div>");
    <div class='modal-footer'>
        <button class='btn btn-danger' data-dismiss='modal' aria-hidden='true'>Cancel</button>
        <button class='btn btn-success' data-dismiss='modal'>Ok</button>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-24T15:01:29.937

***2018 年更新***

提交后要关闭模式吗？无论是在模式内部还是外部的表单，您都应该能够使用 jQuery ajax 来提交表单。

**这是模态框内的表单**示例：

```
<a href="#myModal" role="button" class="btn" data-toggle="modal">Launch demo modal</a>

<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            <h3 id="myModalLabel">Modal header</h3>
    </div>
    <div class="modal-body">
        <form id="myForm" method="post">
          <input type="hidden" value="hello" id="myField">
            <button id="myFormSubmit" type="submit">Submit</button>
        </form>
    </div>
    <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
        <button class="btn btn-primary">Save changes</button>
    </div>
</div> 
```

和**jQuery ajax**来获取表单字段并提交它..

```
$('#myFormSubmit').click(function(e){
      e.preventDefault();
      alert($('#myField').val());
      /*
      $.post('http://path/to/post', 
         $('#myForm').serialize(), 
         function(data, status, xhr){
           // do something here with response;
         });
      */
}); 
```

[引导程序 3 示例](http://bootply.com/59864)

* * *

[引导程序 4 示例](https://www.codeply.com/go/tKcuKpAfc3)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-07-31T22:25:24.017

这个答案很晚，但无论如何我都会发布，希望它会对某人有所帮助。像你一样，我也很难提交超出我的引导模式的表单，我不想使用 ajax，因为我想要加载一个全新的页面，而不仅仅是当前页面的一部分。经过多次试验和错误，这是对我有用的 jQuery：

```
$(function () {
    $('body').on('click', '.odom-submit', function (e) {
        $(this.form).submit();
        $('#myModal').modal('hide');
    });
}); 
```

为了完成这项工作，我在模态页脚中做了这个

```
<div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary odom-submit">Save changes</button>
</div> 
```

注意 odom-submit 类的添加。当然，您可以根据您的具体情况为其命名。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-06-25T08:45:34.570

简单的

```
<div class="modal-footer">
<button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
<button class="btn btn-primary" onclick="event.preventDefault();document.getElementById('your-form').submit();">Save changes</button> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-12-31T11:01:13.647

旧的，但可能对读者有用，以了解如何使用模态的完整示例。

我喜欢以下（[工作示例 jsfiddle](https://jsfiddle.net/supersonique/5tzg8kzm/)）：

```
$('button.btn.btn-success').click(function(event)
{

event.preventDefault();

$.post('getpostcodescript.php', $('form').serialize(), function(data, status, xhr)
    {
        // do something here with response;
        console.info(data);
        console.info(status);
        console.info(xhr);
    })
    .done(function() {
        // do something here if done ;
        alert( "saved" );
    })
    .fail(function() {
        // do something here if there is an error ;
        alert( "error" );
    })
    .always(function() {
        // maybe the good state to close the modal
        alert( "finished" );
        // Set a timeout to hide the element again
        setTimeout(function(){
          $("#myModal").hide();
        }, 3000);
    });
}); 
```

为了更轻松地处理模态，我建议使用[eModal](http://saribe.github.io/eModal/)，它允许在使用 bootstrap 3 模态时更快。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-25T09:15:02.210

您还可以通过在表单上隐藏提交按钮并在单击模态按钮时触发它来以某种方式作弊。

# facebook - 没有用户管理员的页面的扩展访问令牌

> ID：16154222
> 
> 赞同：1
> 
> 时间：2013-04-22T18:33:45.347
> 
> 标签：facebook, facebook-graph-api, oauth, facebook-page

我想知道是否可以为没有设置 facebook 个人资料的 facebook 页面获取扩展访问令牌，因为它是管理员。我看到可以创建一个 facebook 页面，而无需将用户个人资料设置为管理员，并使用我的应用程序对这些页面进行身份验证。

对于作为管理员具有 facebook 个人资料的页面，我可以在请求 manage_pages 权限时扩展短期访问令牌。但如果没有与之关联的用户，我不会。

该文档描述了扩展页面令牌的过程。

> 当应用程序使用 manage_pages 权限进行身份验证时，应用程序可以从主页管理员用户那里检索主页访问令牌。如果用于检索此页面访问令牌的用户访问令牌是短暂的，则页面访问令牌也将是短暂的。
> 
> 要获得一个长期存在的页面访问令牌，请将用户访问令牌交换为一个长期存在的令牌，如上所述，然后请求页面令牌。生成的页面访问令牌根本没有到期时间。

[扩展访问令牌文档](https://developers.facebook.com/docs/howtos/login/extending-tokens/)

我想知道当没有与页面关联的管理员时，是否可以获得页面的扩展访问令牌。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:26:29.687

所有页面都必须由用户帐户拥有，无论是普通用户帐户还是企业帐户 - 就 API 而言，两者的工作方式相同，至少对于登录（企业帐户没有名称，时间线） ，朋友等显然不完全相同，但他们以相同的方式登录并授予对应用程序的访问权限）

几分钟前，我刚刚使用我的应用程序、企业帐户和[服务器端 oauth 流程](https://developers.facebook.com/docs/howtos/login/server-side-login/)进行了测试，并在将企业帐户代码交换为访问令牌时正确收到了一个长到期（大约 60 天）令牌

然后我可以再次完成流程，这一次请求`manage_pages`许可，并且能够使用令牌检索帐户使用常规流程管理的页面的非过期页面访问令牌（调用`/me/accounts`或 `/?fields =访问令牌）

# perl - 使用 WWW::Mechanize 丢失 Cookie

> ID：16154224
> 
> 赞同：1
> 
> 时间：2013-04-22T18:34:01.380
> 
> 标签：perl, cookies, www-mechanize

我正在使用 WWW::Mechanize 来抓取网站并收集有关正在设置的 Cookie 的信息。这是我正在使用的代码：

```
#! /usr/bin/perl

use warnings;
use WWW::Mechanize;
use HTTP::Cookies;

my $cookie_jar = HTTP::Cookies->new;
my $mech = WWW::Mechanize->new( cookie_jar => $cookie_jar, autocheck => 1 );

my $response = $mech->get('http://assets.pinterest.com/images/PinExt.png');

print "Cookie:\n" . $cookie_jar->as_string; 
```

当我使用 Chrome 并检查资源时，我可以看到设置了一个 cookie。但是，当我运行我的代码时，我什么也得不到。在许多网站上都遇到过这个问题。为什么我缺少 cookie？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:08:18.750

您的代码适用于[http://google.com/ （打印 cookie）](http://google.com/)

我已经使用 Firefox 访问了[http://assets.pinterest.com/images/PinExt.png](http://assets.pinterest.com/images/PinExt.png)。没有设置 cookie。

# linux - 找到一些文字 aa，然后在 aa 之后找到文字 bb 的第一次出现

> ID：16154225
> 
> 赞同：0
> 
> 时间：2013-04-22T18:34:06.240
> 
> 标签：linux, sed, awk, grep

整个文本文件如下所示：

```
aa
...
bb
...
bb
...
aa
...
bb
... 
```

行后`aa`会有一行或多行`bb`.

我尝试了下面的命令，它可以很好地处理所有行`aa`和上面的行`aa`。

```
grep -A 1 aa fileName 
```

如何打印出所有行`aa`和上面`aa`的行以及第一行`bb`之后的行`aa`和该行之上的`bb`行？

编辑：需要`bb`为每次出现找到第一行（并且只有第一行） `aa`，还打印出行号。也许我重新提出这个问题：对于每一行，在此之后`aa`找到第一行，然后打印出这两个 line ，以及它们上面的行，以及行号。`bb``aa``aa``bb`

考虑下面的输入文件，第一列是行号，它不是输入文件的一部分

```
1 xxx
2 aa
3 xxxx
4 bb
5 bb
6 xxxx
7 aa
8 xxxx
9 xxxx
10 xxxx
11 bb
12 xxx
13 aa
14 xxx
15 bb 
```

我想要输出：

```
1 xxx
2 aa
3 xxxx
4 bb
6 xxxx
7 aa
10 xxxx
11 bb
12 xxx
13 aa
14 xxx
15 bb 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:42:14.447

这将完成这项工作：

```
awk '/aa/{f=1}/aa|bb/&&f{printf "%d %s\n%d %s\n",NR-1,a,NR,$0}{a=$0}/bb/{f=0}' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:48:30.253

命令

```
grep -C 1 aa fileName 
```

将打印带有 aa 的所有行以及之前和之后的行

# visual-studio-2012 - 将网站项目转换为 Web 应用程序项目 - 无法访问 UI 控件

> ID：16154227
> 
> 赞同：0
> 
> 时间：2013-04-22T18:34:12.397
> 
> 标签：visual-studio-2012, uicontrol, web-site-project, web-application-project

我已经将一个大型项目（目前在 VS 2012 中）从网站项目转换为 Web 应用程序项目。

我已将命名空间添加到我的所有 .cs 文件中。

我已经在项目上运行了“转换为 Web 应用程序”，它已经生成了所有需要的文件。（所以我确实有作为此升级的一部分创建的设计器文件）

当我编译时，它会在我的 C# 代码隐藏文件中的所有 UI 控件的所有引用上出错。该错误表明该控件不存在。控件在那里，并且它们存在于设计器文件中。

我已经清理了我的解决方案，无论我做什么，我都会收到此错误。

有什么想法/建议可以尝试吗？我在转换为 Web 应用程序的过程中是否遗漏了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T02:00:34.717

修复了我的问题.. 这是 ASPX 中的继承语句。我必须同时包含命名空间......问题解决了......所以，语法是inherits="namespace.formname"

# php - php array_rand() 与多维数组

> ID：16154231
> 
> 赞同：0
> 
> 时间：2013-04-22T18:34:20.073
> 
> 标签：php

我有一个以秒为单位关联 mp3 文件及其各自长度的数组

```
$playlist = array(  array("song" => "01.mp3","min" => "91"),
                   array("song" => "02.mp3","min" => "101"),
                   array("song" => "03.mp3","min" => "143"),
                   array("song" => "04.mp3","min" => "143"),
                   array("song" => "05.mp3","min" => "151")
            ); 
```

我从播放列表中挑选一首歌`array_rand()`...

```
$song = $playlist[array_rand($playlist)]; 
```

然后，稍后，我访问该数组中的值...

```
echo $song['song'];

//Then somewhere else...

echo $song['min']; 
```

我的问题是，每次我请求`$song`时，它会产生随机结果，还是每次页面加载只产生一次随机结果？（即，一旦 $song 被定义，它就被定义好了。） ...我希望是后者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:36:18.250

> 我的问题是，每次我请求 $song 时，它会产生随机结果，还是每次页面加载只产生一次随机结果？

不，不会的。每次调用该函数时，它都会*产生一个随机结果。*`array_rand`如果您在每次页面加载时调用它一次，那么是的，每次加载页面时它只会产生一个随机结果。

* * *

通常，每次*访问*变量时，您很可能不会在该特定行中更改它。特别是，简化您的示例（`rand`从指定的最小值到最大值选择一个数字）：

```
$x = rand(0, 9); 
```

如果选择了一个数字，比如说`7`，那么多次访问`$x`不会改变它的值。只有显式`$x = y`赋值（或将其传递给对其有*副作用*的类或函数）可能会更改其值。

考虑`7`从`rand`:

```
echo $x;
echo $x;
echo $x; 
```

将打印`777`。

# javascript - 从jsp获取json并在javascript上显示

> ID：16154252
> 
> 赞同：0
> 
> 时间：2013-04-22T18:36:04.557
> 
> 标签：javascript, jquery, json

我需要在我的 java 脚本中从这个 JSON 中获取值，这来自 jsp：

```
[{
        "selectionName": "Select",
        "subSelections": [{
                "id": 4,
                "subSelectionName": "Select",
                "description": "Deepmala"
            }
        ]
    }, {
        "selectionName": "week14",
        "subSelections": [{
                "id": 7,
                "subSelectionName": "1",
                "description": ""
            }
        ]
    }, {
        "selectionName": "test",
        "subSelections": [{
                "id": 6,
                "subSelectionName": "test",
                "description": ""
            }
        ]
    }, {
        "selectionName": "select",
        "subSelections": [{
                "id": 3,
                "subSelectionName": "sub-select",
                "description": "Created by Prakash"
            }
        ]
    }, {
        "selectionName": "testcreate",
        "subSelections": [{
                "id": 1,
                "subSelectionName": "testcreate",
                "description": ""
            }
        ]
    }, {
        "selectionName": "by htmlwidget",
        "subSelections": [{
                "id": 5,
                "subSelectionName": "by htmlwidget",
                "description": "created by html widget"
            }
        ]
    }
] 
```

有什么建议么？我想像这样获取它：

```
function getSelection() {
  var options = "";  
  $.getJSON('../r3/selection.jsp').done(function(json) {    

  //alert(json.selectionName);
  // alert(json.subSelections);
  // options += '<option value="' + value. selectionId + '">' + value.selectionName +   '</option>';
    $.each(json.subSelections, function(index, value) {

     options += '<option value="' + value. subSelectionName + '">' + value. description + '</option>';
});

     var select = $('<select id="selection" onchange="getSubselection()"/>');   
    select.append(options);
    $(document.body).append(select); 

   }).fail(function (jqxhr, textStatus, error) {
   alert(' fail json  : '+error);
  }); 

}
//alert(json.selectionName); 
```

// 警报（json.subSelections）；循环内部给了我未定义的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:44:01.157

尝试这个：

```
$.each(json, function (key, data) {
    $.each(data.subSelections, function (index, values) {
        options += '<option value="' + values.subSelectionName + '">' + values.description + '</option>';            
    });
});

var select = $('<select id="selection" onchange="getSubselection()"/>');
select.append(options);
$('body').append(select); 
```

# javascript - Javascripts 从 HTML 中删除文本

> ID：16154257
> 
> 赞同：0
> 
> 时间：2013-04-22T18:36:13.560
> 
> 标签：javascript

我需要一个脚本来从我的产品页面中删除一行文本“库存数量：（缺货）”。我要删除的特定 HTML 代码是：

```
<span class="PageText_L329n"><strong class="prod_qty_label">
      Quantity in Stock
    </strong></span>
      :
    <span style="color:#cc0000;"><span class="StockQuantity_OutOfStock"></span></span><br></br> 
```

我对 Javascript 的了解有限，而且我知道我需要从以下内容开始：

```
document.body.innerHTML = document.body.innerHTML.replace('', ''); 
```

但我正在努力让它与 javascript 中的所有 HTML 标记一起工作。

在我的类别页面（不同页面）上，我试图从 HTML 中删除此文本，该文本可能在页面中出现多次：

```
<b><font color="#CC0000">
<span class="PageText_L331n">(Out of Stock)</span>
</font></b> 
```

任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:59:06.550

喜欢这个例子吗？

```
<div>
<span class="PageText_L328n"><strong class="prod_qty_label">
      Quantity in Stock 1
    </strong></span>

</div>
<div>
<span class="PageText_L329n"><strong class="prod_qty_label">
      Quantity in Stock 2
    </strong></span>

</div>
<div>
<span class="PageText_L330n"><strong class="prod_qty_label">
      Quantity in Stock 3
    </strong></span>

</div>
<button id="button">Remove</button>

var button = document.getElementById("button");
var PageText_L329n = document.getElementsByClassName("PageText_L329n");

function remove() {
    if (PageText_L329n[0]) {
        PageText_L329n[0].parentNode.removeChild(PageText_L329n[0]);
    }
}

button.addEventListener("click", remove, false); 
```

在[jsfiddle上](http://jsfiddle.net/Xotic750/3MmpJ/)

此外，也许仅仅隐藏它而不是从 DOM 中删除它就足够了。

并用于清除文本

```
<b><font color="#CC0000">
<span class="PageText_L331n">(Out of Stock)</span>
</font></b>

<button id="clear">Clear</button>

var button = document.getElementById("clear");

function clearText() {
    document.getElementsByClassName("PageText_L331n")[0].textContent = "";
}

button.addEventListener("click", clearText, false); 
```

在[jsfiddle上](http://jsfiddle.net/Xotic750/NxnUF/)

# sql - 更改 SQL 服务器本地名称

> ID：16154260
> 
> 赞同：0
> 
> 时间：2013-04-22T18:36:22.467
> 
> 标签：sql, sql-server, sql-server-2005

在我的 SQL Server 2005 中，我可以使用服务器名作为“.\LOCAL”登录。我怎样才能将其更改为“。”

我尝试使用查询 *sp_dropserver 和 sp_addserver* 更改 sql 服务器名称，但它不起作用？

我怎样才能改变这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T18:55:45.627

从来不需要这样做，但本指南看起来很有希望： [http ://www.mssqltips.com/sqlservertip/1620/how-to-setup-and-use-a-sql-server-alias/](http://www.mssqltips.com/sqlservertip/1620/how-to-setup-and-use-a-sql-server-alias/)

它不会是一个真正的默认实例，这最终可能会使事情变得混乱，但安装默认实例可能不是一个选项......如果是，请务必安装默认实例，移动数据库并删除命名的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:39:15.433

您不能将命名实例更改为默认实例。这样做的唯一方法是安装一个默认实例，然后备份您的数据库并恢复它们（以及登录名、作业、链接服务器等）。

或者，让您的客户端可以*认为*他们正在连接到默认实例的替代方法是让命名实例在固定端口上侦听，然后在将连接的所有客户端上创建网络别名（使用客户端网络实用程序）。

# delphi - 如何在 XE2 中将 RadioButton 分配给 RadioGroup？

> ID：16154262
> 
> 赞同：3
> 
> 时间：2013-04-22T18:36:23.667
> 
> 标签：delphi, radio-button, delphi-xe2

不要讨厌（或投入）我这个愚蠢的问题，但我注意到在 XE2 上它发生了变化，我尝试将新的 RadioButton 放到 RadioGroup 中，我注意到它实际上不是该组的一部分，为什么？

我需要写什么 TStrings ？我很难像那样控制它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-22T19:21:27.140

您不能手动将[TRadioButton](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.StdCtrls.TRadioButton)添加到 TRadioGroup。TRAdioGroup[控件](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.ExtCtrls.TRadioGroup)一直以这种方式工作。您必须使用它的`Items`属性来添加单选按钮。

Embarcadero 文档说

> 要将单选按钮添加到 TRAdioGroup，请在 Object Inspector 中编辑 Items 属性。Items 中的每个字符串都会在组合框中显示一个单选按钮，并以该字符串作为标题。ItemIndex 属性的值确定当前选择了哪个单选按钮。

因此，您可以使用 Object Inspector 来编辑`Items`属性或编写如下代码：

```
RadioGroup1.Items.Add('Option 1');
RadioGroup1.Items.Add('Option 2');
RadioGroup1.Items.Add('Option 3');
RadioGroup1.Items.Add('Option 4');
RadioGroup1.Items.Add('Option 5'); 
```

最后检查选择了哪个单选按钮，使用这样的`ItemIndex`属性

```
if RadioGroup1.ItemIndex>=0 then
  ShowMessage(RadioGroup1.Items[RadioGroup1.ItemIndex]); 
```

# ms-access - 访问从替换字符串返回值的 VBA 替换函数

> ID：16154266
> 
> 赞同：1
> 
> 时间：2013-04-22T18:36:42.017
> 
> 标签：ms-access, vba

我正在尝试使用 REPLACE 函数来搜索字符串并删除一个字符。这是代码..

```
SELECT Test.*, Replace([Data],ChrW(10),"",(Len([Data])-2),1) FROM Test; 
```

虽然这只是一个 select stmt，但结果集会返回 [Data] 列中数据的最后三个字符。而不是在该位置开始搜索。

这里的 UPDATE 语句也一样...

```
 UPDATE Test SET Test.Data = Replace([Data],ChrW(10),"",(LEN([Data])-2)) 
 WHERE (((Test.[Data]) Like ("*" & ChrW(10)))); 
```

我仍然希望搜索是 LEN([Data])-2 的结果。而是只返回最后一个字符。替换成功。

对我的监督有任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:16:34.737

奇怪的。我已经确认你得到了什么。在查询中，向 Replace() 函数添加起始位置也可以作为 Right() 函数。我找不到任何文档。在 VBA 中，它的行为与预期的一样，因为它返回整个字符串，没有替换的字符。

您有 3 个解决方法的选项。

1.  您可以替换所有 Chrw(10)，但我认为您可能不想这样做，因为您指定了起始位置。
2.  您可以使用 IIF() 语句测试最后一个字符是否为 Chr(10)，如果是，则执行 Left() 函数以排除最后一个字符。有点乱
3.  如果您在 Access 中工作，您可以在 VBA 中创建自己的函数并调用它。你可以调用你的函数 Repl，所以它看起来像这样：**UPDATE Test SET Test.Data = Repl([Data])**。

# algorithm - 使过亮（HDR）颜色变为白色的算法？

> ID：16154269
> 
> 赞同：1
> 
> 时间：2013-04-22T18:36:51.770
> 
> 标签：algorithm, graphics, colors

你知道如果图像足够亮或曝光过度，每种颜色最终会变成白色吗？我正在尝试找出一个函数来执行此操作，以以逼真且令人愉悦的方式应用于生成的 HDR 图像（我猜使用理想化的相机性能作为参考）。

我想要获得的算法/函数应该解决的问题是，假设您有一个橙色像素，其（线性 RGB）值 {1.0, 0.2, 0.0}。如果您将每个值乘以 1.0 或更少的因子，一切都很好，但是假设您将该像素乘以 6，现在您得到 {6.0, 1.2, 0.0}，您如何处理超出范围的红色和绿色值6.0 和 1.2？你可以剪裁它们，得到 {1.0, 1.0, 0.0}，遗憾的是 Photoshop 和 3DS Max 似乎在做这件事，但它看起来非常错误，因为现在你以前的橙色像素是黄色的（所以如果你从任何饱和开始色调（意味着至少一个通道是 0.0）你总是以洋红色、黄色或青色结束）并且它永远不会变成白色。

我考虑将一个通道的剩余部分取一半并在其他通道之间平均分配，因此例如 {1.6, 0.5, 0.1} 将变为 {1.0, 0.8, 0.4} 但它过于简单且不太现实。我强烈怀疑一个可接受的解决方案可能接近这个微不足道的任何地方。

我确信一定已经对这个主题进行了研究，但我找不到任何相关的文献，而且感光度法似乎并不是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:13:42.697

[修改我在另一个问题的答案中](https://stackoverflow.com/a/141943/5987)留下的 Python 代码，使其在 [0.0-1.0] 范围内工作：

```
def redistribute_rgb(r, g, b):
    threshold = 1.0
    m = max(r, g, b)
    if m <= threshold:
        return r, g, b
    total = r + g + b
    if total >= 3 * threshold:
        return threshold, threshold, threshold
    x = (3 * threshold - total) / (3 * m - total)
    gray = threshold - x * m
    return gray + x * r, gray + x * g, gray + x * b 
```

这应该在线性或伽马校正色彩空间中返回可接受的结果，尽管线性会更好。

将每个 r,g,b 值乘以相同的量会保留它们的原始比例，从而保留色调，直到`x=0`达到白色为止。一旦剪裁开始，您就对非线性响应表示了兴趣，但我不完全确定如何处理它。数学是经过精心选择的，因此至少有一个返回值将处于阈值，并且没有会在上面。

在您的示例上运行它`(1.6, 0.5, 0.1)`返回`(1.0, 0.6615, 0.5385)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T19:43:45.777

根据 Mark Ransom 的建议，我找到了一种方法。当颜色超出色域时，我们计算等效感知亮度的灰色颜色，然后我们在色域外输入颜色和该灰度值之间进行线性插值，以找到第一个色域内颜色。对每个 RGB 通道进行加权以获得感知亮度部分是一个棘手的部分，因为 CIELab 最常用的公式`L = 0.2126*red + 0.7152*green + 0.0722*blue`是非常错误的，因为它使蓝色太亮了。相反，我做了一些测试并选择了对我来说最正确的权重，尽管这些不是确定的，你可能想要调整它们，尽管对于这个特定的问题，这可能不是太重要。

或者用更少的话说，解决方案是将色域外的颜色去饱和，使其刚好可以在色域内。

这是我在 C 代码中的解决方案。所有变量都是浮点格式。

```
Wr=0.125; Wg=0.68; Wb=0.195;        // these are the weights for each colour

max = MAXN(MAXN(red, grn), blu);    // max is the maximum value of the 3 colours

if (max > 1.)       // if the colour is out of gamut
{
    L = Wr*red + Wg*grn + Wb*blu;   // Luminosity of the colour's grey point

    if (L < 1.) // if the grey point is no brighter than white
    {
        // t represents the ratio on the line between the input colour
        // and its corresponding grey point. t is between 0 and 1,
        // a lower t meaning closer to the grey point and a
        // higher t meaning closer to the input colour
        t = (1.-L) / (max-L);

        // a simple linear interpolation between the
        // input colour and its grey point
        red = red*t + L*(1.-t);
        grn = grn*t + L*(1.-t);
        blu = blu*t + L*(1.-t);
    }
    else    // if it's too bright regardless of saturation
    {
        red = grn = blu = 1.;
    }
} 
```

这是线性橙色渐变的样子： ![线性橙色渐变](https://i.imgur.com/p5BiIWm.png)

它不使用任何像任意伽玛这样的东西，这很好，唯一最随意的事情与亮度权重有关，但我想这些是非常必要的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-22T18:47:07.427

您必须将其映射到一些非线性比例。例如：[http](http://en.wikipedia.org/wiki/Gamma_correction) ://en.wikipedia.org/wiki/Gamma_correction 。

例如：让 y = f(x) = log(1+x) - log(1-x) 定义“实际”发光。

反向函数是 x = g(y) = (e^y-1)/(e^y+1)。

现在，您的值 x=1 和 x=0.2。对于第一种情况，对应的 y 是无穷大。六倍的无限仍然是无限。如果你使用函数 g，你会得到新的 x_new = 1。

对于 x=0.2，y = 0.4054651。乘以 6 后，y_new = 2.432791。对应的 x_new = 0.8385876。

对于 x=0，x_new 仍然为 0（我将把计算留给你）。

因此，从 (1.0, 0.2, 0.0) 开始，您的新点集是 (1.0, 0.8385876, 0.0)。

这是映射函数的一个例子。它们有无数个。选择一个最适合您的。

# c++ - Apple Mach O 链接器错误？

> ID：16154274
> 
> 赞同：-1
> 
> 时间：2013-04-22T18:36:57.250
> 
> 标签：c++, linker-errors

```
#include <iostream>
#include <cctype>
#include <string>

using namespace std;

int main()
{

    string text;
    string numbers;
    string characters;
    string spaces;

    getline(cin, text);
    int i;
    for (i=0; i<text.length(); i++)
    {
        if (isalpha(text[i]))
        {
            characters += text[i];
        }
        else if (isdigit(text[i]))
        {
            numbers +=text[i];
        }
        else
        {
            spaces +=text[i];
        }
    }

    cout<<"Numbers in the string: "<<numbers<<endl
    <<"Alphabets in the string: "<<characters<<endl
    <<"Spaces in the string: "<<spaces.length()<<endl<<endl;

    string searchstr;
    string replacestr;
    double n = text.length();

    cout<<"Enter a word to search: "<<endl;

    getline(cin, searchstr);

    cout<<"Enter a replacement word: "<<endl;

    getline (cin, replacestr);

    double position = text.find(searchstr, 0);

    text.replace (position, n, replacestr);

    cout<<"Replaced string is: "<<endl
    <<text<<endl<<endl;

    return 0;
} 
```

无法弄清楚这里发生了什么。它与正在使用的库有关吗？

```
Error:
Ld "/Users/andy/Library/Developer/Xcode/DerivedData/Project_4-fgfiiphpwijunsfidkthbsqbxgvb/Build/Products/Debug/Project 4" normal x86_64
    cd "/Users/andy/Desktop/EECS138/Project 4"
    setenv MACOSX_DEPLOYMENT_TARGET 10.8
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++ -arch x86_64 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk -L/Users/andy/Library/Developer/Xcode/DerivedData/Project_4-fgfiiphpwijunsfidkthbsqbxgvb/Build/Products/Debug -F/Users/andy/Library/Developer/Xcode/DerivedData/Project_4-fgfiiphpwijunsfidkthbsqbxgvb/Build/Products/Debug -filelist "/Users/andy/Library/Developer/Xcode/DerivedData/Project_4-fgfiiphpwijunsfidkthbsqbxgvb/Build/Intermediates/Project 4.build/Debug/Project 4.build/Objects-normal/x86_64/Project 4.LinkFileList" -mmacosx-version-min=10.8 -stdlib=libc++ -o "/Users/andy/Library/Developer/Xcode/DerivedData/Project_4-fgfiiphpwijunsfidkthbsqbxgvb/Build/Products/Debug/Project 4"

duplicate symbol _main in:
    /Users/andy/Library/Developer/Xcode/DerivedData/Project_4-fgfiiphpwijunsfidkthbsqbxgvb/Build/Intermediates/Project 4.build/Debug/Project 4.build/Objects-normal/x86_64/main.o
    /Users/andy/Library/Developer/Xcode/DerivedData/Project_4-fgfiiphpwijunsfidkthbsqbxgvb/Build/Intermediates/Project 4.build/Debug/Project 4.build/Objects-normal/x86_64/File.o
ld: 1 duplicate symbol for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation 
```

不知道为什么 Xcode 无法构建/运行程序，它在 CodeBlocks 中运行得非常好。关于为什么它给我这个错误的任何帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:42:12.630

从您的错误来看，您似乎有一个文件`main`和另一个文件`File`都**定义了该`main()`函数。**

`main()`是您的程序的入口点。您不能为程序开始定义两个不同的函数。

# android - Galaxy S3 - 以人像模式拍照会破坏活动

> ID：16154279
> 
> 赞同：15
> 
> 时间：2013-04-22T18:37:11.627
> 
> 标签：android, android-activity, camera, galaxy

所以，这个问题已经在这个论坛上以多种形式提出，但没有一个答案对我有帮助。我有一个只能在三星 Galaxy S3 上重现的错误。

我想简单地使用手机的相机拍摄和存储照片，但是在我收到 onActivityResult 的回复之前，我的 Activity 就被破坏了。这只发生在我在纵向模式下使用相机时，在横向模式下它很好。

我正在使用此代码启动相机：

```
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
startActivityForResult(intent, Config.ACTIVITY_TAKE_PHOTO); 
```

在纵向模式下，我从未看到对 onActivityResult 的调用（来自 Camera 活动），我只看到在启动活动中调用了 onDestroy()。日志中没有异常或错误，也没有明显的错误导致它崩溃。

我看过一些帖子建议将“android:configChanges="orientation|keyboardHidden"” 添加到清单中，并做很多其他事情来管理使用相机时发生的方向变化，但到目前为止没有任何帮助。

有没有其他人解决过这个问题？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-10-14T04:56:40.677

如果您的目标超出 API 级别 13，添加

```
android:configChanges="orientation|keyboardHidden" 
```

到 Manifest 是不够的。

[从Android 文档](http://developer.android.com/guide/topics/manifest/activity-element.html)中检查此摘录

> 注意：如果您的应用程序以 API 级别 13 或更高级别为目标（由 minSdkVersion 和 targetSdkVersion 属性声明），那么您还应该声明“screenSize”配置，因为当设备在纵向和横向之间切换时它也会改变。

因此尝试添加

```
android:configChanges="orientation|keyboardHidden|screenSize" 
```

到您的清单文件。这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-12T14:23:05.677

Android 在某些场景下可以调用 destroy() 方法。一种是当我们使用方法finish() 时。另一种方法是使用 Activity 类中的方法 isFinishing ()。如果真的是finalize就可以finalize自己的资源，否则，你可以保留分配一个继承Application的类的值

```
@Override
protected void onDestroy() {

    final YourApp app = (YourApp) getApplicationContext();
    if (app != null && isFinishing()) {
        app.finalizeAppResources();
    }

    // ...

    super.onDestroy();
} 
```

# youtube-api - 是否可以通过 API 为 YouTube 合作伙伴上传海报框架图像？

> ID：16154285
> 
> 赞同：1
> 
> 时间：2013-04-22T18:37:45.923
> 
> 标签：youtube-api

我的一个客户是 YouTube 合作伙伴，可以在通过 API 上传和管理的视频中上传/设置海报帧。但是，他们希望能够在为他们编写的应用程序中上传和设置这些图像，以管理他们的所有视频资产。

我希望能够上传一张海报图片（或者更糟糕的是提供一个时间码来抓取视频的近似帧）以在上传时设置海报帧和/或在上传后通过更新设置。

合作伙伴可以这样做吗？还是合作伙伴必须在 YouTube 用户界面中手动执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:55:18.937

YouTube Data API v3 中有一个新的[thumbnails.set()](https://developers.google.com/youtube/v3/docs/thumbnails/set)方法。任何能够通过任何其他机制（即通过 YouTube 网站手动）设置自定义缩略图的人都可以使用该 API 调用来完成同样的事情。

# google-chrome-extension - 如何从 Chrome 扩展中将字符串注入 tinyMCE？

> ID：16154289
> 
> 赞同：1
> 
> 时间：2013-04-22T18:37:59.753
> 
> 标签：google-chrome-extension, tinymce

我的 background_script.js 发送如下消息：

```
function genericOnClick(info, tab) {
    chrome.tabs.getSelected(null, function(tab) {
        chrome.tabs.sendMessage(tab.id, {message: 'insert_string'}, function(){} );
    });
}; 
```

receiver.js 将其捕获为：

```
function insert_string() {
    var field = document.activeElement;
    if(field.tagName == "IFRAME") {
        field = field.contentDocument.activeElement;
    }
    field.value += 'This is my string';
} 
```

现在，该扩展在常规可编辑字段和 textareas 上运行良好（它甚至可以在 textarea-tab 上的 tinyMCE 中正常工作！）但在 tinyMCE 的 Visual-tab 的情况下，我无法让它工作。我注意到Visual-tab，因为它是一个所见即所得的编辑器，很特别，到目前为止我想出解决这个问题的唯一方法是模仿tinyMCE的行为来更新Visual-tab。但是，我想知道我是否遗漏了一些简单而明显的东西。如果没有，我将如何编辑 Visual-tab 内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:46:32.060

填写编辑器所需要做的就是

```
tinymce.get('your_editor_id').setContent('This is my string'); 
```

# json - 如何在 7.02 之前的 ABAP 中编码 JSON

> ID：16154293
> 
> 赞同：5
> 
> 时间：2013-04-22T18:38:09.520
> 
> 标签：json, abap

正如 Horst Keller 在他的[ABAP 和 JSON](http://scn.sap.com/people/horst.keller/blog/2013/01/07/abap-and-json)帖子中提到的，“ABAP 原生支持 7.02 和 7.03/7.31 (Kernelpatch 116) JSON”。

显然 7.02 在我的情况下太通用了，因为下面的行：

`writer = cl_sxml_string_writer=>create( type = if_sxml=>co_xt_json ).`

返回错误：`"The field CO_XT_JSON is unknown, but there is a field with the similar name CO_XT_XOP".`

**那么有什么方法可以轻松生成 JSON 呢？**

编辑：来自 SAP 的屏幕截图 - 状态

![在此处输入图像描述](https://i.stack.imgur.com/QKCZt.jpg)

![在此处输入图像描述](https://i.stack.imgur.com/htjJy.jpg)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-09T07:47:59.010

关于**CL_TREX_JSON_SERIALIZER**类：我在开发移动 sap 应用程序期间也使用了这个类，我发现创建的**JSON 无效**，因此我开始搜索并找到这个[http://scn.sap.com/community/mobile/blog/2012 /09/24/serialize-abap-data-into-json-format](http://scn.sap.com/community/mobile/blog/2012/09/24/serialize-abap-data-into-json-format)（它还解释了如何创建有效的 JSON 序列化程序）。使用 json lint [http://jsonlint.com/](http://jsonlint.com/)验证您的 json以查看它是否有效.. 否则，可以肯定的是，您在调试它为什么不工作并且不明白序列化程序已损坏时会遇到很多麻烦. 问候，zY

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-04T12:37:37.177

看看`ZCL_MDP_JSON`图书馆。您可以解析/编码任何 JSON。因此，它最适合需要灵活性的 JSON 场景。

如果您在其他语言中使用过 JSON，则很容易理解。您只需要学习`ZCL_MDP_JSON_NODE`一次课堂方法并查看示例。

这是该库的扩展概述：http: [//scn.sap.com/community/abap/blog/2016/07/03/an-open-source-abap-json-library--zclmdpjson](http://scn.sap.com/community/abap/blog/2016/07/03/an-open-source-abap-json-library--zclmdpjson)

带有示例目录的 GitHub 存储库：[https ://github.com/fatihpense/zcl_mdp_json](https://github.com/fatihpense/zcl_mdp_json)

免责声明：我是该项目的作者。如果您有任何问题，请随时与我联系。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-13T08:16:04.310

这是我在 ABAP 中包含新功能之前为 ABAP 数据 <-> JSON 转换编写的一些代码（或者它可能只是一个较旧的系统）。

[https://gist.github.com/mydoghasworms/2291540](https://gist.github.com/mydoghasworms/2291540)

在您的 ABAP 源代码中包含代码并使用`data_to_json`该类的方法。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-07-07T10:28:15.190

自定义 ABAP <-> JSON 序列化器的一个很好的概述，包括另一个，可以在[这篇博文中找到](https://wiki.scn.sap.com/wiki/display/Snippets/One+more+ABAP+to+JSON+Serializer+and+Deserializer)

从我的角度来看，最受欢迎的是[SE38 的 ZJSON 库](https://github.com/se38/zJSON)，它可以使用 SAPLINK 安装（并且 - 与许多其他库相比）附加了明确的许可证：Apache 2.0

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-02T15:37:28.053

如果短期内无法升级到较新的补丁，您还可以使用类`CL_TREX_JSON_SERIALIZER`将对象序列化为 JSON。有点快速和肮脏的解决方案，但效果很好。

# sharepoint-2007 - SharePoint Designer 2007 - 将每种内容类型提交为默认内容类型的自定义提交按钮

> ID：16154295
> 
> 赞同：1
> 
> 时间：2013-04-22T18:38:18.117
> 
> 标签：sharepoint-2007

当我将新项目提交到具有 5 种内容类型的列表时，所有内容都将保存为默认内容类型。

应用程序：SharePoint 2007 和 SharePoint Designer 2007

我有一个包含 5 种内容类型的列表。我为每个表单创建了自定义列表表单来替换 Newform.aspx 页面。

我已经注释掉了这些表单上默认“保存”按钮的代码，因为我希望它们在提交时将用户重定向到默认列表视图以外的页面。我尝试在默认按钮上使用“重定向 URL”命令，但它似乎对功能没有影响：

```
<SharePoint:SaveButton runat="server" ControlMode="New" id="savebutton1" RedirectUrl="http://www.destinationpageforuser.com"/> 
```

然后我做了一些互联网研究，并为这段代码换掉了默认按钮：

```
<input type="submit" value="OK" name="btnFormActionSave1" onclick="javascript: {ddwrt:GenFireServerEvent('__commit;__redirect={http://www.destinationpageforuser.com}')}" /> 
```

这允许重定向发生，但会导致每个新项目都保存为默认内容类型。

然后我尝试从设计器的工具箱中添加一个表单操作按钮：

```
<input type="submit" value="Submit" name="Submit1" onclick="javascript: {ddwrt:GenFireServerEvent('__commit;__redirect={http://www.destinationpageforuser.com}')}" /> 
```

当我按下它时，它 1) 导致项目作为默认内容类型提交，2) 清除 NewForm.aspx 页面的数据，以及 3) 不重定向而是坐在现在空的 NewForm.aspx 页面上愚蠢地闪烁对我。

我是否需要在按钮代码中的某处传递内容类型 ID 以确保内容类型正确？我没有足够的编码经验，不知道这可能会去哪里。

综上所述 - 我需要在将新项目提交到列表时将我的用户重定向到特定页面，并且我需要尊重不同的内容类型。任何见解将不胜感激。

# html - CSS相对位置的顶部空间问题

> ID：16154301
> 
> 赞同：0
> 
> 时间：2013-04-22T18:38:44.710
> 
> 标签：html, css

使用相对位置时，无法让表格在我的一生中位于框架内。绝对它可以工作，但会根据窗口大小改变点。帮助！这是结果 [http://orange-restoration.com/water-damage-24-hour-help/](http://orange-restoration.com/water-damage-24-hour-help/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:16:55.610

```
<div id="main-form">
        <H3>Let us call YOU back </H3>
        <script type="text/javascript" src="http://form.jotform.com/jsform/92640718225"></script>
</div> 
```

CSS：

```
#main-form
{
    position: relative;
        top: 300px;
    left: 600px;
    width: 300px;
    height: 220px;
    margin: 1px;
    background-color: white;
    padding: 10px 30px 30px 30px;
    border-radius: 15px;
        z-index: 1000;
    box-shadow: 5px 5px 3px #888888;
    border-style:solid;
    border-width:1px;
    border-color:#888888:
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:41:56.130

放

```
<div id="main"> 
```

到位置：相对，然后设置你的

```
<div id="main-form"> 
```

到位置：绝对

# php - Position: fixed to position:static when horizontal scroll shows up?

> ID：16154303
> 
> 赞同：0
> 
> 时间：2013-04-22T18:38:58.290
> 
> 标签：php, javascript, jquery, html, css

Im looking for a way to make my div become static when you zoom in.

Try facebook for an example. Zoom in, and when the "topbar" content is more then 100% of the screen it becomes static and is no longer fixed. How do i make something like that?

I guess the "topbar" content is a specific width, and when you zoom so the screen is less than that specific width the horizontal scroolbar shows up and the "topbar" div becomes static.

To sum up with some code.

```
#topbar {
width: 100%;
height: 40px;
position: fixed;
}

#topbar-content {
width: 800px;
height: 40px;
} 
```

When screen becomes less the 800px, topbar stops being `position: fixed;` and becomes `position: static;`

If something is unclear, please comment and i will try to answer. Been trying with a solution for a long time now. ;)

Preferable language for the fix is: html, css, javascript, jquery or php

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:40:32.360

```
$(window).resize(function() {         
    if ($(window).width() <= 800) {  // check width when window get's resized
      $('#topbar').css('position', 'static');
    } else {
      $('#topbar').css('position', 'fixed');
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:42:12.320

It will work like this using css3 media queries:

```
/* Place this after your css rules you show at your question */
@media screen and (min-width: 800px){
    #topbar {
        position: static;
    }
} 
```

# c++ - C++程序，输入无限循环

> ID：16154305
> 
> 赞同：-2
> 
> 时间：2013-04-22T18:39:10.230
> 
> 标签：c++, linux, bash, infinite-loop

您好，我将此程序编译为一个名为 picodb 的可执行文件，并尝试在 linux 上通过 shell bash 脚本运行它。

```
int main(int argc, char** argv) {
    Debbuger DB(argc,argv);

    char command[12];
    int len;
    bool valid;

    while(1)
    {
        valid=true;
        cin.clear();
        cin>>command;
        len=strlen(command);
        if(command[0]=='t')
        {
                if(strcmp(command,"trace")==0 || len==1)
                {
                    cin>>command;
                    valid=DB.Trace(command);
                }
                else valid=false;
        }
        else if(command[0]=='r')
        {
            if(strcmp(command,"redirect")==0 || len==1)
             {
                char stream[6],file[15];
                cin>>stream; cin>>file;
                    valid=DB.Redirect(stream,file);
            }
            else valid=false;
        }
       else if(command[0]=='b')
       {
            if(strcmp(command,"blocking-mode")==0 || len==1)
            {
                cin>>command;
                valid=DB.Blocking_mode(command);
            }
            else valid=false;
       }
       else if(command[0]=='l')
       {
           if(strcmp(command,"limit-trace")==0 || len==1)
            {
               int n;
                cin>>n;
                valid=DB.Limit_Trace(n);
           }
            else valid=false;
       }
    else if(command[0]=='g')
    {
           if(strcmp(command,"go")==0 || len==1)
           {
                  DB.Go(argv[1]) ;     

             }
        }

   else if(command[0]=='q')
   {
           if(strcmp(command,"quit")==0 || len==1)
               return 0;
           else
               valid=false;
   }
   else if(command[0]=='h')
   {
           if(strcmp(command,"help")==0 || len==1)
               DB.Help();

           else valid=false;
   }
   else valid =false;

   if(valid==false)
   {
       cout<<"Invalid command"<<endl;
   }

    }
} 
```

脚本是这样的：

```
#!/bin/bash

./picodb  << EOF
t file_management
r stdin input.txt
EOF 
```

但是当我执行这个脚本时，程序进入一个无限循环，在那里它得到“t file_management”并且永远不会停止或改变这个输入。我打印了字符串命令，它的第一个参数始终具有值“t file_management”。我无法弄清楚我做错了什么。我尝试在终端上运行程序，手动输入并正常工作。

编辑：为了更清楚，这应该是一个用户界面。在您输入退出之前，它永远不会脱离循环。问题是通过 bash 读取的内容重复到无限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:49:57.957

`cin >> command`一次只会读一个单词。你确定你有“t file_management”`command`吗？当我运行您的程序时，它可以工作。但是它仍然使用脚本在无限循环中运行，所以我更改了以下行：`while(1)`->`while(cin >> command)`

# python - Python复杂的正则表达式替换

> ID：16154306
> 
> 赞同：0
> 
> 时间：2013-04-22T18:39:10.620
> 
> 标签：python, regex, replace

我正在尝试做一个简单的 VB6 到 c 的翻译器来帮助我将开源游戏移植到 c 语言。我希望能够使用 ragex 从“With Npclist[NpcIndex]”中获取“NpcList[NpcIndex]”，并在需要替换的任何地方替换它。（“With”在 VB6 中用作宏，在需要时添加 Npclist[NpcIndex] 直到找到“End With”）

```
Example:
 With Npclist[NpcIndex]
 .goTo(245) <-- it should be replaced with Npclist[NpcIndex].goTo(245)
 End With 
```

是否可以使用正则表达式来完成这项工作？我尝试使用函数在“With”和“End With”之间执行另一个正则表达式替换，但我不知道“With”正在替换的文本（Npclist [NpcIndex]）。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:19:45.440

我个人不会相信任何单一的正则表达式解决方案可以在第一次就正确完成，也不想调试它。相反，我会逐行解析代码并缓存任何`With`表达式以使用它来替换任何`.`直接位于前面的空格或任何类型的括号（根据需要添加用例）：

`(?<=[\s[({])\.`- 对集合中的任何字符进行正向回溯 + 转义的文字点

`(?:(?<=[\s[({])|^)\.``.`- 如果要替换可能出现在行首，则使用此非捕获替代列表

```
import re

def convert_vb_to_c(vb_code_lines):
    c_code = []
    current_with = ""
    for line in vb_code_lines:
        if re.search(r'^\s*With', line) is not None:
            current_with = line[5:] + "."
            continue
        elif re.search(r'^\s*End With', line) is not None:
            current_with = "{error_outside_with_replacement}"
            continue
        line = re.sub(r'(?<=[\s[({])\.', current_with, line)
        c_code.append(line)
    return "\n".join(c_code)

example = """
With Npclist[NpcIndex]
    .goTo(245)
End With
With hatla
    .matla.tatla[.matla.other] = .matla.other2
    dont.mind.me(.do.mind.me)
    .next()
End With
"""
# use file_object.readlines() in real life
print(convert_vb_to_c(example.split("\n"))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:59:00.013

您可以将函数传递给该[`sub`](http://docs.python.org/2/library/re.html#re.sub)方法：

```
# just to give the idea of the regex
regex = re.compile(r'''With (.+)
(the-regex-for-the-VB-expression)+?
End With''')

def repl(match):
    beginning = match.group(1)  # NpcList[NpcIndex] in your example
    return ''.join(beginning + line for line in match.group(2).splitlines())

re.sub(regex, repl, the_string) 
```

在`repl`您可以从对象中获取有关匹配的所有信息`match`，构建您想要的任何字符串并返回它。匹配的字符串将被您返回的字符串替换。

请注意，您必须非常小心地编写`regex`上述内容。特别是`(.+)`像我一样使用将所有行匹配到排除的换行符，这可能不是你想要的（但我不知道 VB，我不知道哪个正则表达式可以去那里而不是只捕获你想要的东西。

对于`(the-regex-forthe-VB-expression)+`. 我不知道这些行中可能包含什么代码，因此我将实现它的细节留给您。*也许*把所有的行都写好是可以的，但我不相信这么简单的东西（可能表达式可以跨越多行，对吧？）。

通常，在一个大的正则表达式中完成所有操作通常容易出错且速度慢。

我强烈认为正则表达式只是为了查找`With`和`End With`使用其他东西来进行替换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T21:37:32.037

这可能会满足您在 Python 2.7 中的需求。我假设你想去掉`With`and `End With`，对吧？你不需要 C 中的那些。

```
>>> import re
>>> search_text = """
... With Np1clist[Npc1Index]
...  .comeFrom(543)
... End With
...
... With Npc2list[Npc2Index]
...  .goTo(245)
... End With"""
>>>
>>> def f(m):
...     return '{0}{1}({2})'.format(m.group(1), m.group(2), m.group(3))
...
>>> regex = r'With\s+([^\s]*)\s*(\.[^(]+)\(([^)]+)\)[^\n]*\nEnd With'
>>> print re.sub(regex, f, search_text)

Np1clist[Npc1Index].comeFrom(543)

Npc2list[Npc2Index].goTo(245) 
```

# c++ - 代码块中的相对路径如何工作？

> ID：16154312
> 
> 赞同：1
> 
> 时间：2013-04-22T18:39:28.273
> 
> 标签：c++, mingw, codeblocks

我正在使用代码块并将搜索目录设置为相对路径，但是除非从代码块中启动程序，否则我的程序将找不到库。

有谁知道当程序在代码块之外启动时，代码块中的相对路径是如何工作的？

有没有办法使路径相对于可执行文件的目录？

操作系统：Windows 7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T18:49:48.770

Relative paths are resolved based on the [current working directory](http://en.wikipedia.org/wiki/Working_directory), i.e. where you launch the program from.

See [this thread](https://stackoverflow.com/questions/143174/how-do-i-get-the-directory-that-a-program-is-running-from) for more discussion on this and how to get the directory containing the running program.

# jsf - Richfaces 和 JSF/AJAX 生命周期

> ID：16154315
> 
> 赞同：3
> 
> 时间：2013-04-22T18:39:57.580
> 
> 标签：jsf, richfaces, seam

我已经设法让代码按照我的意图去做，但我不明白为什么这个工作的特定方面。我正在使用 Richfaces 3.3.3 运行 Seam 2.2.2。

这是来自xhtml页面的代码：

```
...
<h:form id="radiobuttontestform">

    <fieldset>           
        <h:panelGrid columns="3">

            <h:selectOneRadio layout="pageDirection" id="myRadio" value="#{actionBean.myRadioButton}">
                <f:selectItem itemLabel="First" itemValue="0" />
                <f:selectItem itemLabel="Second" itemValue="1" />
                <a4j:support event="onclick" ajaxSingle="true" process="myDropdown" reRender="myDropdown,myCount,test" />
            </h:selectOneRadio>
          <h:panelGrid columns="1" border="0">
            <h:selectOneListbox size="1" id="myDropdown" value="#{actionBean.rowCountPredefined}" disabled="#{actionBean.myRadioButton != '0'}">
                <f:selectItem itemLabel="10" itemValue="10" />
                <f:selectItem itemLabel="20" itemValue="20" />
                <f:selectItem itemLabel="30" itemValue="30" />
            </h:selectOneListbox>

            <h:inputText id="myCount" maxlength="5" value="#{actionBean.rowCountSpecified}" disabled="#{actionBean.myRadioButton != '1'}" required="true">
                <f:validateLongRange minimum="1" maximum="1000" />
                <rich:ajaxValidator event="onkeyup" for="myCount" />
            </h:inputText>
            <rich:message id="errorMessage" for="myCount" ajaxRendered="true" showDetail="false" showSummary="true">
                <f:facet name="errorMarker">ERROR:</f:facet>
            </rich:message>
       </h:panelGrid>

    </h:panelGrid>
    </fieldset>
    <h:outputLabel id="test" value="RadioValue: #{actionBean.myRadioButton}" />

    <a4j:commandButton id="show" value="Show Values in Log" action="#{actionBean.showValues}" />
    <a4j:commandButton id="done" value="Save and end conversation" action="#{actionBean.apply}" />
</h:form>
... 
```

支持 bean 只是一个简单的 POJO，其中包含三个属性的 getter 和 setter。(myRadioButton, rowCountPredefined, rowCountSpecified)

这就是我得到的：（正确的结果）

[单选按钮示例 http://katzekat.de/Bilder/radio2.png](http://katzekat.de/Bilder/radio2.png)

[单选按钮示例 http://katzekat.de/Bilder/radio.png](http://katzekat.de/Bilder/radio.png)

这是我的想法：

将 ajaxSingle 设置为 true 意味着服务器上只会处理单选按钮。它旁边的下拉列表不需要验证 - 它始终包含正确的值。我添加了 process="myDropdown" 以便将值持久保存到支持 bean 中，否则当我将单选按钮切换到位置 2 时，下拉菜单将恢复为原始值。（我意识到这只是装饰性的！）我已经用调试器检查了它，它确实在支持 bean 中设置了属性，并且一切都按预期工作。

一旦单选按钮切换到位置 2，就可以在文本框中输入一个值并进行验证。这非常有效，当我将单选按钮切换回位置 1 时，如果该字段处于错误状态，验证错误将被清除。大概是因为错误消息只存在于请求范围内。

当单选按钮位于位置 2 并在文本字段中输入有效值时再次启动调试器显示在切换回位置 1 时支持 bean 没有更新。我也预料到了这一点，因为我只告诉收音机和在服务器上处理的下拉列表。这是我不明白的一点 - 文本字段中的值在回发*时*保持不变。（见上面的第二个链接）如果不在支持 bean 中，这个文本字段的这个值保存在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T15:06:34.547

提交的表单值存储在`Apply Request Values`阶段的组件中。

例如，在您`javax.faces.component.html.HtmlInputText#decode`的文本字段调用的案例方法中`javax.faces.component.UIInput#setSubmittedValue`。提交的值未设置为 bean（如您所料），因为组件未包含在`execute`部件中。然后 inputText 的渲染器重新显示（写入响应）提交的值。

当验证失败时，它的工作原理几乎相同。提交的值存储在`Apply Request Values`阶段，然后由于验证失败，未将提交的值设置为 bean（`Update Model Values`跳过阶段），然后重新显示提交的值。

# java - 如何检查a中的所有元素 使用 Selenium WebDriver 列出？

> ID：16154318
> 
> 赞同：8
> 
> 时间：2013-04-22T18:40:11.907
> 
> 标签：java, list, selenium, webdriver

是否可以循环`li`遍历`<ul> </ul>`. 假设我有未知数量的`li`元素，因此循环它们的一种方法是强加一个`for`具有最大可能`li`s 数（例如 100）的循环，然后强加`try and catch`.

```
try{
for (int i=0; i<100; i++) {
 driver.findElement(By.xpath("//div[@id='...']/ul/li[i]"));
}
}
catch {...} 
```

但是，它不承认`i`索引吗？我怎样才能让它识别它？

有没有更好的办法？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-22T18:47:46.870

Webdriver has `findElements` API, which can be used for this purpose..

```
List<WebElement> allElements = driver.findElements(By.xpath("//div[@id='...']/ul/li")); 

for (WebElement element: allElements) {
      System.out.println(element.getText());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-19T14:18:20.463

您的目的是让所有 li 都在 ul 中。所以它需要先定位ul，然后再定位ul中的所有li。您可以使用以下 Selenium Java 代码来完成：

```
WebElement ul_element = driver.findElement(By.xpath("//ul[@class='list-unstyled']"));
        List<WebElement> li_All = ul_element.findElements(By.tagName("li"));
        System.out.println(li_All.size());
        for(int i = 0; i < li_All.size(); i++){
            System.out.println(li_All.get(i).getText());
        }
        //OR
        for(WebElement element : li_All){
            System.out.println(element.getText());
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-10T10:22:35.420

```
List<WebElement> allElements = driver.findElements(By.xpath("//div[@id='...']/ul/li"));
int s=allElements.size();
for(int i=1;i<=s;i++){
    allElements = driver.findElements(By.xpath("//div[@id='...']/ul/li"));
    allElements.get(i).click();
} 
```

用这个

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-10-16T18:13:09.540

如果您`i`像这样将索引从字符串中取出，您的初始代码可能会起作用：

```
try {
    for (int i=0; i<100; i++) {
        driver.findElement(By.xpath("//div[@id='...']/ul/li["+i+"]"));
    }
}
catch {...} 
```

# c# - 返回包含属于另一个列表的成员的列表

> ID：16154320
> 
> 赞同：0
> 
> 时间：2013-04-22T18:40:24.143
> 
> 标签：c#, linq-to-entities

我有 2 张桌子：

1.  **PK**的用户数据 **`UserId`**
***   带有**FK的用户订单** `UserID`**

 **我想做 LINQ 查询，给我一个用户列表，其中成员是用户订单列表。

我试过了：

```
var myNestedData = (from ub in db.Users
   join ah in db.UsersOrders  on ub.UserId equals ah.UserId
   into joined
   from j in joined.DefaultIfEmpty()
   group j by new { ub.UserId, ub.UserName, ub.UserPhone, ub.Approved } into grouped
   where grouped.Key.Approved  == true
   select new 
   {
      UserId= grouped.Key.UserId,
      UserName = grouped.Key.UserName, 
      UserPhone = grouped.Key.UserPhone,
      Orders = grouped
   }).ToList(); 
```

问题是我进入`Orders`了一个`Object<a,UsersOrders>`我没想到的内部。

这是在性能方面接近解决方案的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:46:16.937

在我看来，您应该能够保持简单：

```
 var myNestedData = (from u in db.Users
                         where u.Approved == true
                         select new
                         {
                             User = u,
                             Orders = u.UserOrders
                         }).ToList(); 
```

您正在尝试获取所有已批准用户和用户订购的列表。我错过了什么吗？

此外，u.UserOrders 的名称将取决于您如何配置映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:45:46.943

将其更改为

```
Orders = grouped.ToList() 
```

要查看这是否是*潜在*的性能问题，请查看生成的 SQL 以查看它是否是 N+1 方案（这意味着它对父记录运行一个查询，对子记录运行 N 个查询。

我说*潜力*是因为虽然可能不是禁食方法，但它可能不是*问题*。如果没有*明显的*性能问题，我不会担心，而是专注于通过改善体验来使应用程序变得更好，这可能包括改善地图*其他*区域的性能。**

# c# - Telerik radgrid 过滤器不再工作 - SP 2010

> ID：16154324
> 
> 赞同：0
> 
> 时间：2013-04-22T18:40:55.767
> 
> 标签：c#, asp.net, sharepoint, telerik, radgrid

我现在正在管理一个共享点站点，该站点具有一系列不同的报告，这些报告本质上是充满数据的 radgrids。用户抱怨过滤不再适用于大多数报告。

它们过去都可以正常工作，由于某种原因，现在只有一些页面会过滤，其他页面什么也不做。我对 Telerik 比较陌生，无法弄清楚为什么会出现排序问题。

c# 代码位于 SP 2010 之上

这是 radgrid 的代码

```
 <%-- raok 10/2012 - add employee ID to report --%>
                <telerik:GridBoundColumn SortExpression="Employee_ID" HeaderText="Employee ID" HeaderButtonType="TextButton"
                    DataField="Employee_ID" Visible="true" AllowFiltering = "false">
                </telerik:GridBoundColumn>

                <telerik:GridBoundColumn SortExpression="Form_Has_Conflicts" HeaderText="Form Has Conflicts"
                    HeaderButtonType="TextButton" DataField="Form_Has_Conflicts" Visible="true" AllowFiltering = "false">
                </telerik:GridBoundColumn>
                <telerik:GridBoundColumn SortExpression="Employee_Supervisor" HeaderText="Employee Supervisor"
                    HeaderButtonType="TextButton" DataField="Employee_Supervisor" Visible="true" AllowFiltering = "false">
                </telerik:GridBoundColumn>                            
                <telerik:GridBoundColumn SortExpression="Last_Name" HeaderText="Last Name" HeaderButtonType="TextButton"
                    DataField="Last_Name" Visible="true" AllowFiltering = "false">
                </telerik:GridBoundColumn>
                <telerik:GridBoundColumn SortExpression="DateModified" HeaderText="Date Modified"
                    HeaderButtonType="TextButton" DataField="DateModified" Visible="true" AllowFiltering = "false">
                </telerik:GridBoundColumn>
                <telerik:GridBoundColumn SortExpression="Employee_VP" HeaderText="Employee VP" HeaderButtonType="TextButton"
                    DataField="Employee_VP" Visible="true" AllowFiltering = "false">
                </telerik:GridBoundColumn>
                <telerik:GridBoundColumn SortExpression="Employee_Supervisor" HeaderText="Employee Supervisor"
                    HeaderButtonType="TextButton" DataField="Employee_Supervisor" Visible="true" AllowFiltering = "false">
                </telerik:GridBoundColumn>
            </Columns>
        </telerik:GridTableView>
    </DetailTables>
    <Columns>
        <telerik:GridBoundColumn SortExpression="Title" HeaderText="Title" HeaderButtonType="TextButton"
            DataField="Title" Visible="True" AllowFiltering="true" FilterControlWidth = "260px" AutoPostBackOnFilter="true" CurrentFilterFunction="Contains">
            <HeaderStyle Width="290px" />
        </telerik:GridBoundColumn>
        <telerik:GridBoundColumn SortExpression="Cycle_Year" HeaderText="Cycle Year" HeaderButtonType="TextButton"
                    DataField="Cycle_Year" Visible="false" AllowFiltering="false">
                </telerik:GridBoundColumn>
        <telerik:GridBoundColumn SortExpression="Form_ID" HeaderText="Form ID" HeaderButtonType="TextButton"
            DataField="ID" Visible="True" AllowFiltering="false">
            <HeaderStyle Width="60px" />
        </telerik:GridBoundColumn>
        <telerik:GridBoundColumn SortExpression="Form_Status" HeaderText="Form Status" HeaderButtonType="TextButton"
            DataField="Form_Status" Visible="false" AllowFiltering="false">
            <HeaderStyle Width="100px" />
        </telerik:GridBoundColumn>
        <telerik:GridBoundColumn SortExpression="Last_Modified_by" HeaderText="Last Modified by"
            HeaderButtonType="TextButton" DataField="Last_Modified_by" Visible="true" AllowFiltering="false">
            <HeaderStyle Width="150px" />
        </telerik:GridBoundColumn>
        <telerik:GridBoundColumn SortExpression="Created_By" HeaderText="Created By" HeaderButtonType="TextButton"
            DataField="Created_By" Visible="true" AllowFiltering="false">
            <HeaderStyle Width="150px" />
        </telerik:GridBoundColumn>
        <telerik:GridBoundColumn SortExpression="EmployeeFullName" HeaderText="Form Owner Last Name" HeaderButtonType="TextButton"
            DataField="EmployeeFullName" Visible="false" UniqueName="EmployeeFullNameColumn" AllowFiltering="false">
        </telerik:GridBoundColumn>
    </Columns>
</MasterTableView>
<ClientSettings>
    <Scrolling AllowScroll="True" UseStaticHeaders="True" SaveScrollPosition="True">
    </Scrolling>
    <Selecting AllowRowSelect="true" />
</ClientSettings> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T14:41:34.703

更改`AllowFiltering="false"`到`AllowFiltering="true"`您需要它们的位置。

例如，在您的代码中，“Title”过滤器有效，但在“Cycle_Year”中无效。

另请注意，要使用内置过滤器，您需要设置`AllowFilteringByColumn="True"`：

```
<telerik:RadGrid ID="SomeID" AllowFilteringByColumn="True" 
```

您还可以制作自定义过滤器等更多信息，请参阅[***此处***](http://www.telerik.com/help/aspnet-ajax/grid-implementing-filtering-for-gridtemplatecolumns.html)以获取更多信息，还可以查看有关过滤器的内容树。

而且我还注意到您已经设置`CurrentFilterFunction="SomeFilter"`了该过滤器的起始过滤器选项，如果它不能使用该选项过滤某些内容，那么它将不起作用，例如对数字使用字母过滤器。

# sql - 如何在交易完成前获取使用身份列的值？

> ID：16154326
> 
> 赞同：-1
> 
> 时间：2013-04-22T18:41:00.193
> 
> 标签：sql, tsql, transactions, sql-server-2008-r2

假设我的数据库中有 3 个表，如下所示：

*   `Person`( `personid`, ...) ---这是实体，`personid`是标识列
*   `Phone`( `phoneid`, ...) ---这是实体，`phoneid`是标识列
*   `PersonPhone`( `personid, phoneid`) ---这种关系

在向表中插入数据时，需要先向实体表中插入行并获取生成的`id`，然后再向关系表中插入一行。

它工作正常。问题是：我有一个带有事务的存储过程，`Try Catch`语句如下：

```
BEGIN TRY
declare aCursor cursor local fast_forward for (Select Query...)

open aCursor;
fetch next from aCursor into @variables....

while @@fetch_status = 0
begin

   INSERT INTO Person(...);
   set @personid =@@IDENTITY;

   INSERT INTO Phone(...);
   set @phoneid =@@IDENTITY;

   INSERT INTO PersonPhone(@personid, @phoneid);       
end; 

END TRY
BEGIN CATCH
    close aCursor;
    deallocate selectdistributor;
     SELECT ERROR_NUMBER() AS ErrorNumber,ERROR_MESSAGE() AS ErrorMessage;    
    ROLLBACK TRAN;
    RETURN;
END CATCH  
COMMIT;  
close aCursor;
deallocate aCursor; 
```

使用光标，将为人员、电话插入更多的一条记录。运行 SP 时，它会在关系上首次插入数据时停止。我也可以得到正确的@personid，@phoneid，但在交易完成之前，我收到错误 INSERT INTO PersonPhone(@personid, @phoneid); 作为：

> INSERT 语句与 FOREIGN KEY 约束“Person_PersonPhone_FK1”冲突。冲突发生在数据库“MYDB”、表“dbo.Person”、列“PersonID”中。

看起来系统生成的 ID 在事务完成之前无法识别。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:00:16.687

您的问题很可能是您使用了 @@identity ，在任何情况下都不应将其用于此目的。如果其中一个表有触发器，则可能返回错误的值（触发器插入的表中的标识）并且该值巧合地不存在于外键链接到的表中。

因此，假设您在第一个表上有一个触发器，该触发器向具有标识的审计表插入。插入记录的 ID 为 1234。但是，触发器插入到不同的表中，因此@@Identity 返回的值是 5678，它不存在于原始表中。当您将 FK 插入第一个表上的表时，您会收到错误消息，因为第一个表中不存在值 5678。

请改用 OUTPUT 子句。您也可以使用 scope_identity()，但输出更灵活（并且允许您执行多个记录插入并接收所有身份以及可能唯一标识记录的其他字段。

我和 Aaron 在一起，除非有人威胁我的生命，否则我不会使用光标。

# regex - 使用正则表达式搜索 HTML 的问题

> ID：16154327
> 
> 赞同：0
> 
> 时间：2013-04-22T18:41:03.093
> 
> 标签：regex, vba, vbscript

我第一次尝试使用正则表达式并且遇到了一些麻烦，可能是我的语法。

这是我想查找的源文件中包含的示例字符串：

```
Type = Creature / Animal / Elephant 
```

“Type =”是静态的，但是正斜杠之间的三个值可以改变。

我使用的搜索字符串是：

```
\bType = .*/.*/.*\b 
```

我的搜索字符串工作正常，但是我的源文件是 HTML 并且一些字符串嵌入了 HTML 代码：

```
Type = Creature / Animal / Elephant&nbsp;
Type = Creature / Animal / Elephant<br />
Type = Creature / Animal / Elephant</span></span></strong> 
```

类似的东西（它不是很好的 HTML，可能是从 Microsoft Word 复制粘贴的？）

对于我的搜索表达式，这是结果之一：

```
Type = Creature / Many&nbsp;Fish&nbsp;/ Tuna&nbsp; </span></span></li 
```

我不明白为什么结果不是在 Tuna 之后的“&”或“<”处停止。

关于如何改变我的表达来处理这些变体的任何想法？

我正在使用 Microsoft VBScript 正则表达式 5.5 库在 Microsoft Excel 中使用 VBA。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:21:05.517

你的正则表达式：

```
.*/.*/.*\b 
```

是消耗太多，因为`.*`贪吃。您可以不情愿地将它们全部匹配，但是您在此处想要的逻辑对于使其起作用有点不清楚。因此，相反，这将更精确地指定应该匹配的内容。

```
[^/]*/[^/]*/ \w+ 
```

而不是`.*`，使用`[^/]*`除“/”以外的任何含义，因此它将防止贪婪地消耗过去的斜杠，特别是当有斜杠时，如您的几个示例中所示。 `\w+`是一个空格，后跟 1 个或多个单词字符（字母、数字、下划线）。它不会消耗空格，或者`&`但听起来这就是意图。

确实，我怀疑对您来说更好的解决方案是[根本不使用正则表达式](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)。

# java - 使用 Spring MVC 编辑表单验证

> ID：16154328
> 
> 赞同：-1
> 
> 时间：2013-04-22T18:41:04.720
> 
> 标签：java, forms, validation, spring-mvc

我在我的项目中使用 Spring MVC 和 Spring 表单验证。对象模型中有一个类命名`Group`，我创建了用于编辑它的表单。

**形式**

```
<spring:url var="saveGroup" value="/teacher/groups/save"/>
<form:form action="${saveGroup}" method="post" modelAttribute="group">

    <form:hidden path="id"/>

    <div id="nameDiv" class="control-group">
        <form:label path="title">Title:</form:label>
        <form:input path="title"/>
        <form:errors path="title"/>
    </div>

    <div id="specDiv" class="control-group">
        <form:label path="title">Specialty:</form:label>
        <form:select path="specialty">
            <form:options items="${specialties}" itemValue="id" itemLabel="title"/>
        </form:select>
    </div>

    <div class="center">
        <spring:url var="groups" value="/teacher/groups"/>
        <input class="btn btn-primary" type="submit" value="Save"/>
        <a class="btn" href="${groups}"> Cancel </a>
    </div>
</form:form> 
```

**控制器**

```
@Controller
@RequestMapping("/teacher/groups")
public class GroupsController {

    @Autowired
    private GroupService groupService;
    @Autowired
    private SpecialtyService specialtyService;

    @ModelAttribute("group")
    public Group setGroup(Long id) {
        if (id != null) {
            return groupService.read(id);
        } else {
            return new Group();
        }
    }

    @InitBinder
    public void initBinder(WebDataBinder binder) {
        binder.registerCustomEditor(Specialty.class, "specialty", 
            new SpecialtyEditor(specialtyService));
        binder.setValidator(new GroupValidator());
    }

    @RequestMapping("")
    public ModelAndView groups() {
        return new ModelAndView("teacher/groups/list", "groups", 
            groupService.list());
    }

    @RequestMapping("/edit")
    public ModelAndView editGroup() {
        return new ModelAndView("teacher/groups/edit", "specialties",
            specialtyService.list());
    }

    @RequestMapping(value = "/save", method = RequestMethod.POST)
    public String saveGroup(@Valid Group group, BindingResult result) {
        if (result.hasErrors()) {
            return "forward:/teacher/groups/edit";
        }
        groupService.update(group);
        return "redirect:/teacher/groups";
    }
} 
```

我想在验证失败的情况下设置表单的适当行为。即它应该保存它的状态，但只显示验证错误消息（如使用 javascript 验证时）。我认为“转发：/teacher/groups/edit”将再次将请求转发到`editGroup()`保存的对象`group`和`result`. 但是当我验证表单失败时，只是重新加载并显示已编辑的开始状态`group`：没有错误，也没有保存的更改。我怎样才能正确地做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:42:07.750

我通过不将请求转发到其他方法而是立即向用户发送答案来解决问题。现在它可以工作了，看起来像：

```
@RequestMapping(value = "/save", method = RequestMethod.POST)
public ModelAndView saveGroup(@Valid Group group, BindingResult result) {
    if (result.hasErrors()) {
        return new ModelAndView("/teacher/groups/edit", "specialties", specialtyService.list());
    }
    groupService.update(group);
    return new ModelAndView("redirect:/teacher/groups");
} 
```

# javascript - 为什么 JSLint 返回 Unexpected 'String' 消息？

> ID：16154331
> 
> 赞同：1
> 
> 时间：2013-04-22T18:41:20.647
> 
> 标签：javascript, jslint

我想为 Javascript 中的字符串添加一些额外的功能，并使用以下 JavaScript 代码：

```
String.prototype.left = function (n) {
    "use strict";
    return this.substring(0, n);
}

String.prototype.right = function (n) {
    "use strict";
    return this.substring(this.length - n); 
} 
```

但是，当我针对 JSLint 运行此代码时，我收到以下错误：意外的“字符串”。我不太确定错误的含义，也不知道是否应该更改 JSLint 设置中的某些内容以“避免”错误，或者是否应该更改代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T18:45:14.567

使用分号，我没有收到任何错误/警告：

```
String.prototype.left = function (n) {
    "use strict";
    return this.substring(0, n);
};

String.prototype.right = function (n) {
    "use strict";
    return this.substring(this.length - n); // <-- SPACE HERE
}; 
```

添加分号后，它警告我一个意外的空格字符，我在上面添加了评论。所以删除那个空间（和我的评论），它应该在那里验证得很好。

# r - 在 R 中有效地处理多个面板数据

> ID：16154335
> 
> 赞同：1
> 
> 时间：2013-04-22T18:41:45.897
> 
> 标签：r, dataset, regression, panel-data, plm

我正在尝试对“不断变化的”面板数据集进行几次汇集 OLS 回归。包中的`Gasoline`数据`plm`将非常适合作为示例

```
library(plm)
data("Gasoline", package = "plm")
head(Gasoline)

  country year lgaspcar  lincomep  lrpmg      lcarpcap
1 AUSTRIA 1960 4.173244 -6.474277 -0.3345476 -9.766840
2 AUSTRIA 1961 4.100989 -6.426006 -0.3513276 -9.608622
3 AUSTRIA 1962 4.073177 -6.407308 -0.3795177 -9.457257
4 AUSTRIA 1963 4.059509 -6.370679 -0.4142514 -9.343155
5 AUSTRIA 1964 4.037689 -6.322247 -0.4453354 -9.237739
6 AUSTRIA 1965 4.033983 -6.294668 -0.4970607 -9.123903 
```

数据跨越1960年到1978年，我想对1961年到1978年的前几年面板数据进行合并OLS。也就是说，第一个回归只是1960年数据的横截面，第二个回归是1960 年和 1961 年的面板回归，第三个回归是 1960 年、1961 年和 1962 年等数据的面板回归。

我知道如何进行单池 OLS 回归（请忽略特定回归是否有意义 - 这只是一个示例）：

```
plm(lgaspcar ~ lcarpcap + lincomep, data = Gasoline, model='pooling') 
```

我正在寻找一种智能方法来对不断变化的数据集进行此面板回归。有什么方法可以将调用中的数据集的年限限制为`plm`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T20:15:06.697

好吧，你可以把它放在一个循环中，但我看不到优化它的方法，因为每个回归都必须重新进行。

```
plm.results = lapply(1961:1978,
                     function(y) plm(lgaspcar ~ lcarpcap + lincomep,
                                 data = subset(Gasoline, year <= y),
                                 model='pooling')) 
```

# javascript - 制作响应式网格

> ID：16154336
> 
> 赞同：1
> 
> 时间：2013-04-22T18:41:50.957
> 
> 标签：javascript, html, css, responsive-design

好的，我正在尝试制作一个响应式网格，但它比这更复杂一些。它必须能够：

*   调整大小，反应灵敏
*   网格应该在一行中包含尽可能多的元素，**并且**
*   必须有至少两个元素连续
*   最小页面大小为 320px
*   **元素应保持纵横比**

这是一个首发：[http ://codepen.io/loredonut/pen/KJDAE](http://codepen.io/loredonut/pen/KJDAE)

一个纯 CSS 的解决方案会很棒。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:13:05.893

您可以使用很多网格。

因为看起来你也要去移动屏幕，所以看看

[960 格](http://jeromeetienne.github.io/jquery-mobile-960/)
[1140 格](http://www.1140px.com/)

大多数网格将为您提供 x 数量的响应列，在较小的屏幕尺寸上折叠到**100% 宽度**。

现在，如果您真的想花哨，请查看`CSS-column-count`并`CSS-colum-gap`- 在这里找到[CSS 技巧](http://css-tricks.com/seamless-responsive-photo-grid/)，（[caniuse](http://caniuse.com/#search=column-count)）。虽然您需要一些 IE6-9 的后备，但这应该允许您制作具有不同行高的列 - 就像在这个[fiddle](http://jsfiddle.net/pMbtk/55/)中一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T06:30:29.553

有许多网格框架可能适合您的目的：

*   [**`Foundation`**](http://foundation.zurb.com/)
*   [**`Semantic Grid`**](http://semantic.gs/)
*   [**`Golden Grid System`**](http://goldengridsystem.com/)

还有：

*   [CSS 网格](http://cssgrid.net/)（非流体）
*   [320 及以上](http://stuffandnonsense.co.uk/projects/320andup/)（非流体）
*   [柱状](http://www.columnal.com/)（非流体）
*   [骨架](http://www.getskeleton.com/)（非流体）
*   [SimpleGrid](http://simplegrid.info/)（非流体）
*   [更少的框架](http://lessframework.com/)（不流畅）
*   [Bootstrap](http://twitter.github.com/bootstrap/)（非语义类）
*   [Breakpoints.js](http://xoxco.com/projects/code/breakpoints/)（只有断点，和媒体查询太相似了）
*   [自适应图像](http://adaptive-images.com/)>（仅限图像）
*   [FitText](http://fittextjs.com/)（仅文本）
*   [HTML5 样板](http://html5boilerplate.com/)（旧）

[请参阅此相关问题。](https://stackoverflow.com/questions/10741934/responsive-grid-layout-framework)

顺便说一句，我个人最喜欢的是基金会。它非常活跃，基于 Compass/Sass。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T06:22:37.503

我现在使用`<img>`s 并使它们响应，这是一个演示：[http ://codepen.io/loredonut/pen/FGneA](http://codepen.io/loredonut/pen/FGneA)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T19:04:30.500

尝试使用 twitter 引导程序 .. [http://twitter.github.io/bootstrap/](http://twitter.github.io/bootstrap/)

你也可以将它与同位素[http://isotope.metafizzy.co/](http://isotope.metafizzy.co/)结合并获得魔法效果:)

这也可以节省您将同位素与引导程序集成的时间：http: [//mpezzi.github.io/bootstrap_isotope/](http://mpezzi.github.io/bootstrap_isotope/)

# php - PHP 视频流到 iPad

> ID：16154337
> 
> 赞同：1
> 
> 时间：2013-04-22T18:41:52.493
> 
> 标签：php, ipad, http-headers, streaming, mp4

我正在尝试通过 PHP 流式传输 mp4 视频。我的应用程序从存储块的位置加载视频并提供适当的部分。使用这些标题：

```
header("Content-Type: $contenttype");
header("Content-Length: $filesize");
header('Accept-Ranges: bytes'); 
```

当请求使用以下附加标头并输出正确的字节时，它还可以提供部分内容：

```
header('HTTP/1.1 206 Partial Content');
header("Content-Range: bytes $start-$end/$filesize"); 
```

流媒体在 Chrome 和 VLC 中效果很好，但在 iPad 上不起作用。测试 mp4 文件已确认可在 ipad 上运行。

有人对此有任何运气吗？任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-06-07T16:12:36.000

多年后碰巧看到这个，无论如何我都会留下我的答案。

由于 Apple Inc. 使用 H.264 编码作为视频的默认编码，因此如果您使用 H.264 以外的编解码器，您可能会发现您的视频在本机应用程序上播放流畅，但在 Safari 等浏览器中播放不流畅。

在这种情况下，您可能应该在通过 php 代码流式传输之前使用 ffmepg 重新编码您的视频。您的 PHP 代码对我来说看起来不错。

请记住添加`--faststart`标志以将 移动`fastmoov`到视频的开头，以便立即开始播放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T10:32:10.493

是的，它很容易做到。无需手动设置这些标题。让服务器自动完成。

这是一个工作脚本 -

```
ob_start();

if( isset($_SERVER['HTTP_RANGE']) )
      $opts['http']['header']="Range: ".$_SERVER['HTTP_RANGE']; 

$opts['http']['method']= "HEAD"; 
$conh=stream_context_create($opts); 
$opts['http']['method']= "GET";
$cong= stream_context_create($opts);
$out[]= file_get_contents($real_file_location_path_or_url,false,$conh); 
$out[]= $http_response_header; 
ob_end_clean(); 
array_map("header",$http_response_header); 
readfile($real_file_location_path_or_url,false,$cong); 
```

# javascript - 当子子菜单处于活动状态或悬停时保持锚点悬停状态

> ID：16154338
> 
> 赞同：0
> 
> 时间：2013-04-22T18:41:54.710
> 
> 标签：javascript, html

我在菜单中有一个菜单。包含子菜单的第一个菜单锚（class = menu-container）具有悬停状态，并附加了样式。当鼠标也在子菜单上时，我希望父锚的这些样式保持活动状态。

我不能使用 jQuery，因为我只限于纯 javascript。

代码如下：

```
<ul>
    <li>
         <a href="#">List Item</a>
    </li>
    <li>
         <a class="menu-container" href="#">List Item</a>
         <ul class="submenu">
              <li>list item</li>
        </ul>
    </li>
</ul> 
```

注意：客户端已请求使用纯 CSS 显示和隐藏菜单。我知道使用 jQuery 来实现这个解决方案会更容易，但我受到限制。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:56:26.330

“将菜单容器类附加到父“li”项...

li 上的 ":hover" 不能在 IE6 及以下版本中使用，但可以在所有现代浏览器中使用。

# c# - 套接字“提供了一个无效的参数”

> ID：16154345
> 
> 赞同：0
> 
> 时间：2013-04-22T18:42:17.197
> 
> 标签：c#, sockets

我正在使用套接字将应用程序中的 UDP 数据包发送到固定的 IP 地址和端口。套接字被实例化，`Socket socket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp)`我在整个应用程序生命周期中都保留这个实例。每个 UDP 数据包都使用`Socket.Send(byte[] buffer)`.

该应用程序已经运行了数周，并突然发送带有“*提供了无效参数*`SocketException`”的消息的 throws 。重新启动应用程序可以有效地解决问题，但我很想知道是否有人知道导致此问题的原因以及是否有任何我可以遵循的恢复策略。

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T14:02:51.843

如果断开连接，最好重新创建套接字对象。*

# c# - 将实体上下文传递给其他方法和对象

> ID：16154346
> 
> 赞同：5
> 
> 时间：2013-04-22T18:42:21.930
> 
> 标签：c#, entity-framework, design-patterns

我想知道在类之间传递上下文的最佳方式是什么。我应该使用*ref*参数还是简单地将上下文作为参数传递？最好是构造函数，但在静态方法的情况下，最好的方法是什么？即性能、安全性、设计等。将上下文作为参数传递是否会影响性能？如果在使用引用时不同的线程同时在上下文上工作，可能会发生冲突吗？

主文件

```
static void Main(string[] args)
{
    var context = new MyEntities();

    var myClass = new MyClass(context);
    myClass.AddPerson();
    // or
    Person.AddPerson(ref context);
} 
```

我的类.cs

```
public class MyClass
{
    public void MyClass(MyEntities context) { }

    public void AddPerson()
    {
        context.People.AddObject(new Person());
    }
} 
```

MySecondClass.cs

```
public partial class Person
{
    public static AddPerson(ref MyEntities context)
    {
        // Do something
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T18:53:57.000

ref 关键字意味着您通过引用传递指针，因此更改变量的值将为调用者更改它。又名：

```
static void Main(string[] args)
{
    var context = new MyEntities();
    Person.AddPerson(ref context);

    // context is now null
} 
```

调用：

```
public partial class Person
{
    public static AddPerson(ref MyEntities context)
    {
        context = null;
    }
} 
```

在这种情况下，您不会通过引用传递。请记住，变量是指向对象的指针，因此简单地传递它不会像在 C++ 中那样制作对象的副本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T19:13:47.207

`ref`在这里完全不需要使用。在传递对象时，您*实际上是*在传递引用的副本（它本身就是一个指向堆中对象的值类型）。使用`ref`关键字，您通过引用传递“参考值”（感到困惑吗？）。这意味着实际上可以在函数范围之外更改引用，这在任何情况下似乎都不实际，并且只是出现奇怪错误的机会。

# objective-c - UIActivityViewController 未显示“在 iBooks 中打开”选项

> ID：16154347
> 
> 赞同：6
> 
> 时间：2013-04-22T18:42:25.883
> 
> 标签：objective-c, email, pdf, ibooks, uiactivityviewcontroller

我的应用程序有问题。在获得一些统计数据后，我生成了一个 PDF 文件，并且我想显示一个 UIActivityViewController，其中主要包含“在 iBooks 中打开”和“通过邮件发送”选项（其他类似“在 Dropbox 中打开”会很棒）。

好吧，在尝试使用 UIActivityViewController 之前，我使用的是 UIDocumentInteractionController，代码如下：

```
self.docController = [UIDocumentInteractionController interactionControllerWithURL:url];
self.docController.delegate = self;
[_docController presentOpenInMenuFromRect:_openInIBooksButton.bounds inView:self.openInIBooksButton animated:YES]; 
```

其中 url 是 /Documents/../statistics.pdf 之类的路径。它起作用了，它显示了一个弹出窗口，其中按钮在 iBooks 中打开并在 Dropbox 中打开，但不是通过邮件发送。现在我用下面的代码改变了它：

```
NSArray* itemsToShare = [NSArray arrayWithObjects:pdfData, nil];
UIActivityViewController *activityVC = [[UIActivityViewController alloc] initWithActivityItems:itemsToShare applicationActivities:nil];
activityVC.excludedActivityTypes = @[UIActivityTypeCopyToPasteboard]; //or whichever you don't need
[self presentViewController:activityVC animated:YES completion:nil]; 
```

其中 pdfData 是一个 NSData 对象。它也可以工作，但现在它显示了通过电子邮件发送的选项，而不是 iBooks 选项。我要疯了，因为我找不到这种行为的原因，我需要两个选项，iBooks 和 Mail。

我不知道这是否与 UIDocumentInteractionController 的路径以 .pdf 结尾并且 UIActivityViewController 只有一个 NSData 对象这一事实有关。但我找不到解决方案。

以前有人发现过这个问题吗？

非常感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-22T18:57:02.523

当您使用时，`presentOpenInMenuFromRect:inView:animated:`您只会获得可以使用给定文件的应用程序列表。

您想要使用的是`presentOptionsMenuFromRect:inView:animated:`它为您提供了您正在寻找的选项。

# r - 追踪设计中的“不平衡”

> ID：16154348
> 
> 赞同：0
> 
> 时间：2013-04-22T18:42:31.980
> 
> 标签：r

我有一些应该平衡的实验数据，但是当我尝试

```
print(model.tables(aov.PDD,"means"),digits=3) 
```

我明白了

```
Error in model.tables.aovlist(aov.PDD, "means") : 
  design is unbalanced so cannot proceed 
```

我怀疑这意味着数据的编码或输入在某处不正确，但我希望能够在进入数据框本身之前跟踪到更详细的信息。我怎样才能更详细地了解是什么因素导致了这里的不平衡？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:05:35.107

aov 中的余额是指每个单元格的观察次数（所有因素的组合）。有些公式需要平衡（所有数字都相同），因此在不平衡时会出错。有时，您不需要所有单元格中的数字完全相同，而是需要相同的单元格块。您可以只使用该`table`函数来计算每个单元格有多少观察值。

通常需要平衡的部分是当您开始嵌套随机效果时，在这种情况下，最好使用使用不同技术且不需要平衡的混合效果模型（包 nlme 或 lme4）。

# list - 在 TCL 中插入元素

> ID：16154351
> 
> 赞同：0
> 
> 时间：2013-04-22T18:42:39.413
> 
> 标签：list, tcl

我是 TCL 脚本的新手。我正在尝试在第 5 个位置插入一个元素（在列表中）。此列表最初没有任何值（空列表）。

我尝试使用“linsert”命令，但问题是它无法在我指定的位置插入元素。以下是代码片段，

```
set newlist {}
set newlist [linsert $newlist 5 value_to_be_inserted] 
```

此代码不会在第 5 个位置插入元素，而是在第 0 个元素的开头插入。我怎样才能完成这项任务。

任何帮助对我的理解都会有很大帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T04:43:54.047

如果您想要例如 JavaScript 的行为，如果索引大于长度，则列表用空元素扩展，我认为您必须创建一个过程。

```
proc expandInsert {list index args} {
  set nEmpties [expr {$index - [llength $list]}]
  if {$nEmpties > 0} {
    lappend list {*}[lrepeat $nEmpties ""]
  }
  # insert or append args
  return $list
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T18:44:36.267

您的列表有零个元素。当没有第 5 个位置可以插入时，你怎么可能在第 5 个位置插入？您期望得到什么结果列表？我唯一能想到的就是在你的元素后面有 5 个空元素，你可以简单地通过说

```
set newlist [list {} {} {} {} {} value_to_be_inserted] 
```

# android - Android 上的 ListView - 使用 ArrayList 填充

> ID：16154353
> 
> 赞同：0
> 
> 时间：2013-04-22T18:42:40.497
> 
> 标签：android, sql, arraylist, android-listview, android-asynctask

我正在尝试通过 AsyncTask 使用 SQL 语句和 jTDS 驱动程序在 Android 上的 ListView 中显示行。

**文章.java：**

```
package com.example.projectmanager;

import java.sql.Connection;
import java.sql.Date;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.List;

import android.os.AsyncTask;
import android.util.Log;

public class Articles extends AsyncTask <List<Articles>, Void, List> {

    int article_id;
    String title; 
    String body ;
    Date date;
    String username;
    List<Articles> posts = new ArrayList<Articles>();

    protected List<Articles> doInBackground(List... params) {

         Connection conn = null;
            try {   

            String driver = "net.sourceforge.jtds.jdbc.Driver";
            Class.forName(driver).newInstance();

            String connString = "jdbc:jtds:sqlserver://10.0.2.2/master_db;";
            String sqlusername = "admin";
            String sqlpassword = "root";

            conn = DriverManager.getConnection(connString, sqlusername, sqlpassword);
            Log.w("Connection","open");

            String articleQuery = "SELECT TOP 5 E.article_id,E.article_title,E.article_description,E.article_date,u.username FROM articles AS E INNER JOIN user_articles as A ON A.article_id = E.article_id INNER JOIN users as u ON A.user_id = u.user_id WHERE E.article_status = 1;"; 

            PreparedStatement stmt = conn.prepareStatement(articleQuery);

            ResultSet rs;

            rs = stmt.executeQuery();

            while (rs.next()) {

                Articles article = new Articles();
                article.article_id = rs.getInt("article_id");
                article.username = rs.getString("username");
                article.date = rs.getDate("article_date");
                article.title = rs.getString("article_title");
                article.body = rs.getString("article_description");
                posts.add(article);             

            }
            conn.close();

            } catch (Exception e)
            {
            Log.w(e.getMessage(), e);
            }

        return posts;

    }
    protected void onPostExecute(List posts) {
        // Result is here now, may be 6 different List type.
        this.posts = posts; 
    }

} 
```

**HomeActivity.java：**

```
package com.example.projectmanager;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.concurrent.ExecutionException;

import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.view.Menu;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class HomeActivity extends Activity {

    @SuppressWarnings("unchecked")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_home);

        Articles a = new Articles();

        ListView lv = (ListView) findViewById(R.id.lvPosts);
        List postsList = null;

        try {
            postsList = new Articles().execute().get();
        } catch (InterruptedException e) {

            e.printStackTrace();

        } catch (ExecutionException e) {

            e.printStackTrace();
        }

        ArrayAdapter<String> arrayAdapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, postsList);
        lv.setAdapter(arrayAdapter); 

    }

      } 
```

每当我尝试运行代码时，我都会得到以下输出：

![在此处输入图像描述](https://i.stack.imgur.com/JikwQ.png)

LogCat： http: [//pastebin.com/cjm1BNeZ](http://pastebin.com/cjm1BNeZ)

谁能告诉我发生了什么？

**更新：**填充数组列表

```
String articleQuery = "SELECT TOP 5 E.article_id,E.article_title,E.article_description,E.article_date,u.username FROM articles AS E INNER JOIN user_articles as A ON A.article_id = E.article_id INNER JOIN users as u ON A.user_id = u.user_id WHERE E.article_status = 1;"; 

            PreparedStatement stmt = conn.prepareStatement(articleQuery);

            ResultSet rs;

            rs = stmt.executeQuery();

            while (rs.next()) {

                Articles article = new Articles();
                article.article_id = rs.getInt("article_id");
                article.username = rs.getString("username");
                article.date = rs.getDate("article_date");
                article.title = rs.getString("article_title");
                article.body = rs.getString("article_description");
                posts.add(article);             

            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:02:42.313

将此添加到您的文章类：

```
 @Override
        public String toString() {
            return "id: "+article_id + "\n"
                   +"title : " + title 
                   +"body: "+body ;
        } 
```

或您希望用户看到的任何其他信息。
这是因为 Android 框架会调用 YOUROBJECT.toString(); 自动渲染列表中的对象。这就是为什么你需要重写这个方法。

更新：

```
Articles article = new Articles();
                article.article_id = rs.getInt("article_id");
                article.username = rs.getString("username");
                article.date = rs.getDate("article_date");
                article.title = rs.getString("article_title");
                article.body = rs.getString("article_description"); 
```

这是您填充文章对象的代码。如果您想在您的项目列表中显示此对象的其他属性。只需在 toString() 方法中添加字段。前任：

```
 @Override
        public String toString() {
            return "id: "+article_id + "\n"
                   +"title : " + title 
                   +"body: "+body+" date"+date +"username: "+username ;
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T19:00:41.380

我认为您使用 ArrayAdapter 错误。您输入的类型 (String) 不是您应该输入的类型。

您需要创建接受类型 Articles 的新自定义数组适配器并再次执行此操作。

就像是：

```
 public class ListAdapter extends ArrayAdapter<Articles> {

public ListAdapter(Context context, int textViewResourceId) {
    super(context, textViewResourceId);
    // TODO Auto-generated constructor stub
}

private List<Articles> items;

public ListAdapter(Context context, int resource, List<Articles> items) {

    super(context, resource, items);

    this.items = items;

}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    View v = convertView;

    if (v == null) {

        LayoutInflater vi;
        vi = LayoutInflater.from(getContext());
        v = vi.inflate(R.layout.itemlistrow, null);

    }

    Item p = items.get(position);

    if (p != null) {

        TextView tt = (TextView) v.findViewById(R.id.id);
        TextView tt1 = (TextView) v.findViewById(R.id.categoryId);
        TextView tt3 = (TextView) v.findViewById(R.id.description);

        if (tt != null) {
            tt.setText(p.userName());
        }
        if (tt1 != null) {

            tt1.setText(p.getDate);
        }
        //and so on...
    }

    return v;

} 
```

您应该将您的观点与您的文章对象联系起来。查看属性。这就是适配器的含义。字符串适配器仅用于字符串列表。

在此之后你应该这样做：

```
ListAdapter<Articles> arrayAdapter = new ListAdapter<Articles>(this,android.R.layout.simple_list_item_1, postsList);
    lv.setAdapter(arrayAdapter); 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T19:01:06.723

该`Articles.execute().get()`方法似乎返回了一个`List`对象`Articles`。`ArrayListAdapter`调用`toString()`这些对象的方法。如果您不提供自己的`toString()`方法，则只需继承默认方法，`Object`从中打印出对象的类名和哈希值。这就是输出如您所见的原因。

解决此问题的一种方法是覆盖类中的`toString()`方法`Articles`以返回`String`您希望出现在`ListView`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T19:03:13.753

[按照此说明](http://sogacity.com/how-to-make-a-custom-arrayadapter-for-listview/ "按照此说明")获取自定义适配器的示例。

# filepicker.io - 禁用/销毁 Filepicker.io 文件上传选择器

> ID：16154355
> 
> 赞同：1
> 
> 时间：2013-04-22T18:42:44.217
> 
> 标签：filepicker.io

我们在我们的应用程序中使用 Filepicker.io，它运行得非常好。我需要两个在他们的文档中找不到的插件选项。

1) 禁用 - 我们只希望用户每次交互上传一张图片。如果 Filepicker 已经在当前交互中处理了一个文件，我想禁用该插件，直到他们提交表单或删除当前图像。

2) Destroy - Filepicker 提供了一种以编程方式将标准输入字段转换为 Filepicker.io 小部件的方法：`constructWidget`. `destroyWidget`我在文档中找不到函数。有谁知道这是否是一个选项？

这是我们目前使用的代码：

```
<input id="upload-image-input" value="Upload an image." data-fp-
    services="COMPUTER,URL,FLICKR,FACEBOOK,INSTAGRAM,DROPBOX,PICASA"> 

var element = document.getElementById('upload-image-input')
    view = this;

// make sure filepicker isn't already displaying
if (element.style.display !== 'none') {
    element.type="filepicker-dragdrop";
    element.onchange = function(e){
        var text = view.set(e.fpfile.url),
    };
    filepicker.constructWidget(element);
} 
```

我还想知道使用拖放小部件的“X”按钮删除文件时是否会触发事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T01:43:13.233

我们目前不直接在 SDK 中支持这些功能，但有一些方法可以产生这种行为。例如，您可以向元素添加一个自定义类，然后使用它来添加事件侦听器、将其从 dom 中删除或禁用它。

# android - XML 位图渲染不好？

> ID：16154357
> 
> 赞同：0
> 
> 时间：2013-04-22T18:42:49.277
> 
> 标签：android, bitmap

我正在使用 PNG 模式来填充我的应用程序中的一些背景，但它的渲染效果并不理想。我在 Photoshop 中创建了该模式并将其用于许多事情，它工作得很好，但是使用相同的图像我无法在 Android 中获得相同的结果。检查这个：

*   Photoshop图像：

    ![在此处输入图像描述](https://i.stack.imgur.com/QsEgI.png)

*   安卓图片：

    ![在此处输入图像描述](https://i.stack.imgur.com/fdQHg.png)

这是我用来创建背景的 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
   <item>
       <color 
           android:color="@color/dark" />
   </item>
   <item>
       <bitmap 
           android:src="@drawable/bg_stripes_dark_image"
           android:antialias="true"
           android:dither="true"
           android:tileMode="repeat" />
   </item>
</layer-list> 
```

相同的图案，相同的尺寸，但不同的结果。我是否遗漏了某些东西，或者这确实是 Android 渲染重复图像的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:46:25.627

您的图像会被 android 自动放大。最简单的解决方法是将图像放入`drawable-nodpi`目录中。

# c# - 从另一个类中访问类列表 - 空引用异常

> ID：16154359
> 
> 赞同：1
> 
> 时间：2013-04-22T18:42:51.290
> 
> 标签：c#, exception

我有一个类创建另一个类的列表。看起来像：

```
class SortItAll
{                                       
    Recipient rec;
    public List<Recipient> listofRec = new List<Recipient>();

    public void sortToClass()
    {
        while (isThereNextLine()) { //while there is a following line
            loadNextLine();         //load it

            rec = new Recipient(loadNextPiece(),  //break that line to pieces and send them as arguments to create an instance of "Recipient" class
                                loadNextPiece(),
                                loadNextPiece(),
                                loadNextPiece());
            listofRec.Add(rec);                   //add the created instance to my list
        }
    } 
```

从我的 Form1 类中，我调用了这个方法 (sortToClass())，按照我的逻辑，它应该用那个特定的类填充我的列表。然后我想将 list.count() 写入文本框：

```
 public Form1()
    {
        SortItAll sort = new SortItAll(); //create the instance of the class

        sort.sortToClass();               //within which i call the method to fill my list

        txt_out.Text = sort.listofRec.Count().ToString(); //writing out its count to a textbox

        InitializeComponent();
    } 
```

现在我的问题是每当我尝试调试时，它都会阻止我

```
Nullreference exception pointing to -> "txt_out.Text = sort.listofRec.Count().ToString();" in Form1. 
```

然而，在调试时，我可以检查当地人，它指出：

```
sort -> listOfRec -> Count = 4. 
```

可能是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T18:46:07.697

放

```
 txt_out.Text = sort.listofRec.Count().ToString(); //writing out its count to a textbox 
```

在 InitializeComponent() 之后，因为它是在该方法中创建的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:49:23.793

You should keep `InitializeComponent();` at the top of the method as it creates all the controls on the form. You are probably getting it because you are trying to access control `txt_out` before it has been created and added to the form.

# sftp - Spring Integration / JSch：身份验证失败

> ID：16154361
> 
> 赞同：3
> 
> 时间：2013-04-22T18:42:54.137
> 
> 标签：sftp, spring-integration, jsch

我正在尝试使用 Spring Integration 的 SFTP 入站通道适配器，但我被困在这里：

```
20:29:30,458 INFO  [com.jcraft.jsch] (task-scheduler-6) Connecting to deployment port 22
20:29:30,484 INFO  [com.jcraft.jsch] (task-scheduler-6) Connection established
20:29:30,514 INFO  [com.jcraft.jsch] (task-scheduler-6) Remote version string: SSH-2.0-OpenSSH_5.9p1 Debian-5ubuntu1
20:29:30,514 INFO  [com.jcraft.jsch] (task-scheduler-6) Local version string: SSH-2.0-JSCH-0.1.45
20:29:30,514 INFO  [com.jcraft.jsch] (task-scheduler-6) CheckCiphers: aes256-ctr,aes192-ctr,aes128-ctr,aes256-cbc,aes192-cbc,aes128-cbc,3des-ctr,arcfour,arcfour128,arcfour256
20:29:30,515 INFO  [com.jcraft.jsch] (task-scheduler-6) CheckKexes: diffie-hellman-group14-sha1
20:29:30,515 INFO  [com.jcraft.jsch] (task-scheduler-6) diffie-hellman-group14-sha1 is not available.
20:29:30,516 INFO  [com.jcraft.jsch] (task-scheduler-6) SSH_MSG_KEXINIT sent
20:29:30,537 INFO  [com.jcraft.jsch] (task-scheduler-6) SSH_MSG_KEXINIT received
20:29:30,538 INFO  [com.jcraft.jsch] (task-scheduler-6) kex: server->client aes128-ctr hmac-md5 none
20:29:30,538 INFO  [com.jcraft.jsch] (task-scheduler-6) kex: client->server aes128-ctr hmac-md5 none
20:29:30,540 INFO  [com.jcraft.jsch] (task-scheduler-6) SSH_MSG_KEXDH_INIT sent
20:29:30,540 INFO  [com.jcraft.jsch] (task-scheduler-6) expecting SSH_MSG_KEXDH_REPLY
20:29:30,572 INFO  [com.jcraft.jsch] (task-scheduler-6) ssh_rsa_verify: signature true
20:29:30,572 INFO  [com.jcraft.jsch] (task-scheduler-6) Host 'deployment' is known and mathces the RSA host key
20:29:30,573 INFO  [com.jcraft.jsch] (task-scheduler-6) SSH_MSG_NEWKEYS sent
20:29:30,573 INFO  [com.jcraft.jsch] (task-scheduler-6) SSH_MSG_NEWKEYS received
20:29:30,573 INFO  [com.jcraft.jsch] (task-scheduler-6) SSH_MSG_SERVICE_REQUEST sent
20:29:30,597 INFO  [com.jcraft.jsch] (task-scheduler-6) SSH_MSG_SERVICE_ACCEPT received
20:29:30,650 INFO  [com.jcraft.jsch] (task-scheduler-6) Authentications that can continue: publickey,keyboard-interactive,password
20:29:30,651 INFO  [com.jcraft.jsch] (task-scheduler-6) Next authentication method: publickey
20:29:30,678 INFO  [com.jcraft.jsch] (task-scheduler-6) Authentications that can continue: password
20:29:30,679 INFO  [com.jcraft.jsch] (task-scheduler-6) Next authentication method: password
20:29:30,679 INFO  [com.jcraft.jsch] (task-scheduler-6) Disconnecting from deployment port 22
20:29:30,679 DEBUG [org.springframework.integration.channel.PublishSubscribeChannel] (task-scheduler-6) preSend on channel 'errorChannel', message: [Payload=org.springframework.integration.MessagingException: Failed to obtain pooled item][Headers={timestamp=1366655370679, id=c6f7922d-d121-4f7e-b60c-5e1905960f5e}]
20:29:30,680 DEBUG [org.springframework.integration.handler.LoggingHandler] (task-scheduler-6) (inner bean)#24 received message: [Payload=org.springframework.integration.MessagingException: Failed to obtain pooled item][Headers={timestamp=1366655370679, id=c6f7922d-d121-4f7e-b60c-5e1905960f5e}]
20:29:30,681 ERROR [org.springframework.integration.handler.LoggingHandler] (task-scheduler-6) org.springframework.integration.MessagingException: Failed to obtain pooled item
    at org.springframework.integration.util.SimplePool.getItem(SimplePool.java:170)
    at org.springframework.integration.file.remote.session.CachingSessionFactory.getSession(CachingSessionFactory.java:83)
    at org.springframework.integration.file.remote.synchronizer.AbstractInboundFileSynchronizer.synchronizeToLocalDirectory(AbstractInboundFileSynchronizer.java:143)
    at org.springframework.integration.file.remote.synchronizer.AbstractInboundFileSynchronizingMessageSource.receive(AbstractInboundFileSynchronizingMessageSource.java:146)
    at org.springframework.integration.endpoint.SourcePollingChannelAdapter.receiveMessage(SourcePollingChannelAdapter.java:111)
    at org.springframework.integration.endpoint.AbstractTransactionSynchronizingPollingEndpoint.doPoll(AbstractTransactionSynchronizingPollingEndpoint.java:67)
    at org.springframework.integration.endpoint.AbstractPollingEndpoint$1.call(AbstractPollingEndpoint.java:146)
    at org.springframework.integration.endpoint.AbstractPollingEndpoint$1.call(AbstractPollingEndpoint.java:144)
    at org.springframework.integration.endpoint.AbstractPollingEndpoint$Poller$1.run(AbstractPollingEndpoint.java:236)
    at org.springframework.integration.util.ErrorHandlingTaskExecutor$1.run(ErrorHandlingTaskExecutor.java:52)
    at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:49)
    at org.springframework.integration.util.ErrorHandlingTaskExecutor.execute(ErrorHandlingTaskExecutor.java:49)
    at org.springframework.integration.endpoint.AbstractPollingEndpoint$Poller.run(AbstractPollingEndpoint.java:231)
    at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:53)
    at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:81)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:439)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:98)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:206)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
    at java.lang.Thread.run(Thread.java:680)
Caused by: java.lang.IllegalStateException: failed to create SFTP Session
    at org.springframework.integration.sftp.session.DefaultSftpSessionFactory.getSession(DefaultSftpSessionFactory.java:266)
    at org.springframework.integration.file.remote.session.CachingSessionFactory$1.createForPool(CachingSessionFactory.java:55)
    at org.springframework.integration.file.remote.session.CachingSessionFactory$1.createForPool(CachingSessionFactory.java:53)
    at org.springframework.integration.util.SimplePool.doGetItem(SimplePool.java:180)
    at org.springframework.integration.util.SimplePool.getItem(SimplePool.java:160)
    ... 22 more
Caused by: java.lang.IllegalStateException: failed to connect
    at org.springframework.integration.sftp.session.SftpSession.connect(SftpSession.java:204)
    at org.springframework.integration.sftp.session.DefaultSftpSessionFactory.getSession(DefaultSftpSessionFactory.java:262)
    ... 26 more
Caused by: com.jcraft.jsch.JSchException: Auth cancel
    at com.jcraft.jsch.Session.connect(Session.java:463)
    at com.jcraft.jsch.Session.connect(Session.java:158)
    at org.springframework.integration.sftp.session.SftpSession.connect(SftpSession.java:196)
    ... 27 more 
```

我绝对确定私钥是正确的，因为我可以这样做：

```
$ sftp web@deployment
Connected to deployment.
sftp> quit 
```

我已将 ~/.ssh/id_rsa 复制到 ...path.../src/main/resources/keys/sftp_rsa。

这是我的配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:int="http://www.springframework.org/schema/integration"
       xmlns:int-sftp="http://www.springframework.org/schema/integration/sftp"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/integration http://www.springframework.org/schema/integration/spring-integration.xsd

        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/integration/sftp http://www.springframework.org/schema/integration/sftp/spring-integration-sftp.xsd">

    <context:property-placeholder location="classpath:sftp.properties" ignore-resource-not-found="false"
                                  ignore-unresolvable="true"/>

    <bean id="sftpSessionFactory" class="org.springframework.integration.sftp.session.DefaultSftpSessionFactory">
        <property name="host" value="${sftp.host}"/>
        <property name="port" value="${sftp.port}"/>
        <property name="user" value="${sftp.username}"/>
        <property name="privateKey" value="${sftp.private_key_file}"/>
        <property name="privateKeyPassphrase" value="${sftp.private_key_passphrase}"/>
    </bean>

    <int-sftp:inbound-channel-adapter id="sftpInboundChannelAdapter"
                                      channel="receiveChannel"
                                      session-factory="sftpSessionFactory"
                                      local-directory="file:local-dir"
                                      remote-directory="${sftp.remote_directory}"
                                      auto-create-local-directory="true"
                                      delete-remote-files="false"
                                      filename-regex=".*">
        <int:poller fixed-rate="5000" max-messages-per-poll="1"/>
    </int-sftp:inbound-channel-adapter>

    <int:channel id="receiveChannel">
        <int:queue/>
    </int:channel>

</beans> 
```

我的 sftp.properties 看起来像这样：

```
sftp.host=deployment
sftp.username=web
sftp.private_key_file=classpath:keys/sftp_rsa
sftp.private_key_passphrase=<censored>
sftp.remote_directory=/censored/path
sftp.port=22 
```

我看过[一个类似的条目](https://stackoverflow.com/questions/11410708/auth-fail-in-jsch-0-1-42-with-java-1-4-2)，但这没有帮助，因为我使用的是 Java 1.6 而不是 1.4。

有什么提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T19:48:00.293

正如您引用的另一个问题中所讨论的那样，确凿的证据是……

```
20:29:30,650 INFO  [com.jcraft.jsch] (task-scheduler-6) Authentications that can continue: publickey,keyboard-interactive,password
20:29:30,651 INFO  [com.jcraft.jsch] (task-scheduler-6) Next authentication method: publickey
20:29:30,678 INFO  [com.jcraft.jsch] (task-scheduler-6) Authentications that can continue: password 
```

PK 授权失败；当它成功时，它不会回到 pw ......

```
INFO: SSH_MSG_SERVICE_ACCEPT receivedINFO: Authentications that can continue: publickey,keyboard-interactive,password
INFO: Next authentication method: publickey
INFO: Authentication succeeded (publickey). 
```

我刚刚使用来自 github 的示例密钥文件运行了[sftp 示例](https://github.com/SpringSource/spring-integration-samples/tree/master/basic/sftp)，并得到了与您所做的相同的结果；然后我复制了我的 id_rsa 文件（就像你一样），它工作正常。如果你使用的是eclipse，请务必`src/main/resources`在复制密钥文件后按F5（刷新），否则它不会使用当前文件系统上的文件。

# orchardcms - 自定义果园 cms 导航区的整个标记

> ID：16154362
> 
> 赞同：5
> 
> 时间：2013-04-22T18:42:58.420
> 
> 标签：orchardcms, orchardcms-1.6

在过去的几天里，我一直在搜索 Orchard 中的文件，我可以在其中自定义用于导航的标记

在设计器工具中遍历树并查看模板和 HTML 视图并没有多大帮助，因为在 HTML 视图中`MenuItemLink`呈现了`<li>`，但在模板视图中没有呈现它。所以我很困惑。

原始标记是这样的（取自 Designer Tools `Zone [Navigation]`）：

```
<div class="zone zone-navigation">
    <article class="widget-navigation widget-menu-widget widget">
        <nav>
            <ul class="menu menu-main-menu">
                <li class="first">
                    <a href="/Orchard/work">Work</a>
                </li>
            </ul>
        </nav>
    </article>
</div> 
```

我需要的是自定义`<ul>`和`<li>`元素上的类，真的。如果可能的话，我希望能够自定义它，所以我不需要这个`<div class="zone zone-navigation">`例子。

但这甚至可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-23T14:55:31.097

*   `<li>`元素由`MenuItem`shape ( `Core\Shapes\MenuItem.cshtml`)渲染
*   `<nav>`顶部`<ul>`元素由`Menu`shape ( `Core\Shapes\Menu.cshtml`)呈现
*   `<a>`元素由`MenuItemLink`shape ( `Core\Shapes\MenuItemLink.cshtml`)渲染

如果您想覆盖默认值，只需将适当`Menu.cshtml`的 ,`MenuItem.cshtml`或`MenuItemLink.cshtml`文件放在您的主题中（或者更好 - 复制默认值并更改）。然后将使用这些而不是我上面写的默认值。

# c# - 从我的 DataGridView 中删除多行会留下 1

> ID：16154365
> 
> 赞同：0
> 
> 时间：2013-04-22T18:43:22.953
> 
> 标签：c#, datagrid, datagridview

```
List<DataGridViewRow> rowsToDelete = new List<DataGridViewRow>();
foreach (DataGridViewRow row in dataGridView1.Rows)
{
    DataGridViewCheckBoxCell chk = row.Cells[0] as DataGridViewCheckBoxCell;
    if (Convert.ToBoolean(chk.Value) == true)
        rowsToDelete.Add(row);
}
//loop through the list to delete rows added to list<T>:
foreach (DataGridViewRow row in rowsToDelete)
        dataGridView1.Rows.Remove(row); 
```

我选择了 3 个项目，它删除了 2 个，但留下了 1 个。

我们如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:26:52.913

**更新**

听起来您想删除未选中的项目。

你要做的就是从底部开始，然后到顶部，否则你会留下额外的物品。

例子：

```
for (int i = DataGridView1.SelectedRows.Count - 1; -1 < i; i--)
{
   object objChecked = DataGridView1.SelectedRows[i].Cells[0].Value;
   if ((objChecked  != null) && !(bool)objChecked)
   {
     DataGridView1.Rows.RemoveAt(i);
   }
} 
```

**更新 2：**

根据您在下面的评论，这个版本看起来`Rows`而不是`SelectedRows`.

`Rows`在开始循环之前检查是否存在：

```
if ((0 < DataGridView1.Rows.Count) && (0 < DataGridView1.Columns.Count)) 
{
  for (int i = DataGridView1.Rows.Count - 1; -1 < i; i--)
  {
    var row = DataGridView1.Rows[i];
    if ((row.Cells[0].Value != null) && (row.Cells[0].Value != DBNull.Value))
    {
      bool isChecked = (bool)row.Cells[0].Value;
      if (isChecked)
      {
        DataGridView1.Rows.Remove(row);
      }
    }
  }
} 
```

它在错误检查方面更加健壮，并且通过引用而不是索引来删除行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T18:53:21.010

**已编辑**

您可以通过 SelectedRows 属性删除。

确保该`MultiSelect`属性在您的数据网格上设置为 true。

然后，您可以`SelectedRows`根据自己的选择使用该物业：

*这就是你需要的，试试这个代码：*

```
for (int i = dataGridView1.Rows.Count -1; i >= 0 ; i--)
{
    if ((bool)dataGridView1.Rows[i].Cells[0].FormattedValue)
    {
        dataGridView1.Rows.RemoveAt(i);
    }
} 
```

或者

```
foreach (DataGridViewRow row in DataGridView1.SelectedRows)
{
    DataGridView1.Rows.Remove(row);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-22T06:32:24.967

页面：

```
<strong>Asp.Net : Delete Multiple Records form datagridview in one time<br />
        </strong>

        <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False"
            BackColor="White" BorderColor="#CCCCCC" BorderStyle="None" BorderWidth="1px"
            CellPadding="4" EnableModelValidation="True" ForeColor="Black">
            <Columns>
                <asp:TemplateField>
                    <EditItemTemplate>
                        <asp:CheckBox ID="CheckBox1" runat="server" />
                    </EditItemTemplate>
                    <ItemTemplate>
                        <asp:CheckBox ID="CheckBox1" runat="server" />
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:BoundField DataField="id" HeaderText="Sr No" />
                <asp:BoundField DataField="doc_name" HeaderText="Name" />
                <asp:BoundField DataField="doc_add" HeaderText="Address" />
                <asp:BoundField DataField="doc_mob" HeaderText="Mobile No" />
                <asp:BoundField DataField="doc_email" HeaderText="Email" />
            </Columns>
            <FooterStyle BackColor="#CCCC99" ForeColor="Black" />
            <HeaderStyle BackColor="#333333" Font-Bold="True" ForeColor="White" />
            <PagerStyle BackColor="White" ForeColor="Black" HorizontalAlign="Right" />
            <SelectedRowStyle BackColor="#CC3333" Font-Bold="True" ForeColor="White" />
        </asp:GridView>
        <br />
        <asp:Button ID="Button1" runat="server" Font-Size="12pt"
            onclick="Button1_Click1" Text="Delete" />
        <br /> 
```

页面背后的代码：

```
SqlConnection conn = new SqlConnection(@"server=server-pc; database=HMS; integrated security=true");
    protected void Page_Load(object sender, EventArgs e)
    {
        if (IsPostBack == false)
        {
            load_data();
        }
    }

   public void load_data()
    {
        SqlDataAdapter adp = new SqlDataAdapter("select * from doc_master", conn);
        DataSet ds = new DataSet();
        adp.Fill(ds);
        GridView1.DataSource = ds.Tables[0];
        GridView1.DataBind();
    }
   protected void Button1_Click1(object sender, EventArgs e)
   {
       CheckBox ch;
       for (int i = 0; i < GridView1.Rows.Count; i++)
       {
           ch = (CheckBox)GridView1.Rows[i].Cells[0].Controls[1];
           if (ch.Checked == true)
           {
      int id = Convert.ToInt32(GridView1.Rows[i].Cells[1].Text);
      SqlCommand cmd = new SqlCommand("delete from doc_master where ID=" + id + " ", conn);
      conn.Open();
      cmd.ExecuteNonQuery();
      conn.Close();
           }
       }

       load_data();
   } 
```

详细代码访问： [http ://www.gtuguide.com/2014/05/deleting-multiple-rows-in-gridview.html](http://www.gtuguide.com/2014/05/deleting-multiple-rows-in-gridview.html)

# c# - pdf下载链接，但文件可能存储在非公共文件夹中

> ID：16154367
> 
> 赞同：0
> 
> 时间：2013-04-22T18:43:28.887
> 
> 标签：c#, asp.net-mvc, pdf, asp.net-mvc-4

在我的生产环境中，当上传一个 pdf 文件时，它可能会被上传到一个不可公开访问的文件夹中（管理员强制我们这样做）。

所以我需要提供一个链接，该网站的访问者可以下载他们之前上传的 pdf 文件，如果该文件夹不可公开访问，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T18:44:20.737

创建一个 MVC 操作并添加`return File(some path)`.
这将读取文件并将其发送到 HTTP 响应中。

确保攻击者无法使用您的操作来读取`..\..\My Documents\Intersting Stuff`.

# django - 让 Nginx 在 Django 本地服务器前提供静态内容

> ID：16154370
> 
> 赞同：1
> 
> 时间：2013-04-22T18:43:38.703
> 
> 标签：django, nginx

我正在尝试在 Django 的 localhost 网络服务器（127.0.0.1:8000）前面使用 Nginx 来提供静态内容。我希望 Nginx 为“/static”下的所有文件提供服务，如果没有，则将请求传递到 Django 的网络服务器，但我被卡住了！这是我所做的：

1.  让 Nginx 在我的 OSX 上运行，所以“欢迎使用 Nginx！” 页面显示在本地主机上。
2.  更改了我的 /etc/hosts 文件以添加“testdev.com”：

    127.0.0.1 本地主机

    127.0.0.1 testdev.com

3.  在 /usr/local/src/nginx-1.2.6 中制作了 /sites-available 和 /sites-enabled 文件

4.  我在 /conf 中的 nginx.conf 文件是默认加上 include 语句：

    包括 /usr/local/src/nginx.1.2.6/sites-enabled/testdev.com

5.我的 testdev.com 文件在 sites-available 中，在 /sites-enabled 中有一个符号链接。

```
server {
root /<path-to-my-django-project>/website/static;
server_name testdev.com;
gzip            off;
listen         8000;

location = /favicon.ico  {
rewrite "/favicon.ico" /img/favicon.ico;
}
proxy_set_header Host $host;
location / {
if (-f $request_filename) {
     add_header X-Static hit;
     access_log   off;
 }

 if (!-f $request_filename) {
     proxy_pass http://127.0.0.1:8000;
     add_header X-Static miss;
 }
 }
} 
```

如果我 curl testdev.com，它会显示 Nginx：

```
curl -I http://testdev.com
HTTP/1.1 200 OK
Server: nginx/1.2.6
Date: Mon, 22 Apr 2013 18:37:30 GMT
Content-Type: text/html
Content-Length: 612
Last-Modified: Sun, 21 Apr 2013 19:39:47 GMT
Connection: keep-alive
Accept-Ranges: bytes 
```

但是，如果我尝试访问静态文件，则什么也没有：

```
curl -I http://testdev.com/static/css/style.css
HTTP/1.1 404 Not Found
Server: nginx/1.2.6
Date: Mon, 22 Apr 2013 18:38:53 GMT
Content-Type: text/html
Content-Length: 168
Connection: keep-alive 
```

所有这一切都基于谷歌搜索，并找到[了这个](http://www.peterbe.com/plog/local-django-development-with-nginx).

我在

```
listen 8000 
```

我的 testdev.com conf 文件中的声明，因为我认为 Nginx 虚拟主机需要它，但我非常困惑。博客作者使用

```
127.0.1.1 testdev.com 
```

在他的主机文件中，但如果我添加它，第一个 curl 语句就会挂起。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T01:48:34.557

谢谢大家 - 我已经开始工作了，这是我的工作 testdev conf：

```
server {
    root /<path-to-django-site>;
    server_name testdev.com;
    gzip            off;
    autoindex       on;

    proxy_set_header Host $host;

    location /static/ {
        add_header X-Static hit;
    }

    location / {
        proxy_pass       http://127.0.0.1:8000;

    }
} 
```

如果您不提供位置块，则看起来位置块采用服务器根路径。现在当我卷曲时：

```
curl -I  http://testdev.com/static/js/utils.js
HTTP/1.1 200 OK
Server: nginx/1.2.6
Date: Tue, 23 Apr 2013 01:36:07 GMT
Content-Type: application/x-javascript
Content-Length: 2730
Last-Modified: Thu, 13 Dec 2012 18:54:10 GMT
Connection: keep-alive
X-Static: hit
Accept-Ranges: bytes 
```

非常感谢@Evgeny - 让我走对了。Miget 对于希望做同样事情的其他人很有用。

# javascript - Jquery 内容滑块，如何在没有冗余代码的情况下进行复制

> ID：16154371
> 
> 赞同：0
> 
> 时间：2013-04-22T18:43:42.047
> 
> 标签：javascript, jquery, html, css

我可以在此页面上添加一个额外的滑块而不添加重复的函数和额外的 css 类吗？

我知道如何复制它们没问题，但我希望有人教我重用当前代码的正确方法。

我要猜测一下，说我可能需要“this”关键字。

```
<div id="flip">Click to slide the panel down or up</div>
<div id="panel">Hello world!</div> 
```

jsFiddle：http: [//jsfiddle.net/chaddly/mR3Vn/](http://jsfiddle.net/chaddly/mR3Vn/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T18:47:03.737

你可以做这样的事情 -

```
<div class="flip">Click to slide the panel down or up</div>
<div class="panel">Hello world!</div> 
```

还有一些翻转的-

```
<div class="flip">Click to slide the panel down or up</div>
<div class="panel">Hello world!</div>

$(document).ready(function () {
    $(".flip").click(function () {
        $(this).next('.panel').slideToggle("slow");
    });
}); 
```

[**jsFiddle 演示**](http://jsfiddle.net/mohammadAdil/mR3Vn/8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T18:53:30.367

**第2部分**

修改代码：

```
$('.panel').hide();    
$(this).next('.panel').slideToggle("slow"); 
```

首先隐藏所有面板，然后打开当前单击的面板。

# sed - 如何使用 sed 在 2 个模式之间打印线

> ID：16154372
> 
> 赞同：-1
> 
> 时间：2013-04-22T18:43:43.450
> 
> 标签：sed, awk

我如何在 pattern1 和 pattern2 之间打印线条，但我不需要 pattern1 和 pattern3 之间的线条。

请在 sed、awk 中提出解决方案。

我有这样的情况。

```
pattern1
blah blah blah
blah blah blah
blah blah blah
pattern2
pattern1
blah blah blah
blah blah blah
pattern3
pattern1
blah blah blah
blah blah blah
pattern2
pattern1
blah blah blah 
blah blah blah
pattern3 
```

期望输出：

```
pattern1
blah blah blah
blah blah blah
blah blah blah
pattern2
pattern1
blah blah blah
blah blah blah
pattern2 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T20:17:25.157

使用 sed：

```
sed -n '/pattern1/{:l N;/pattern3/b;/pattern2/!bl;p}' input 
```

**描述**

```
/pattern1/{   # Match pattern1 and ...
:l N;         # start loop and read a line
/pattern3/b   # quit if pattern3 matches
/pattern2/!bl # loop until pattern2 matches
 p            # print all lines 
```

**输出**

```
pattern1
blah blah blah
blah blah blah
blah blah blah
pattern2
pattern1
blah blah blah
blah blah blah
pattern2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T18:46:43.997

一种方法：

```
$ awk '/pattern1/{s=1;f=1;s=NR}f{p[NR]=$0}/pattern3/{s=0}/pattern2/&&s{f=0;for(i=s;i<=NR;i++)print p[i]}' file
pattern1
blah blah blah
blah blah blah
blah blah blah
pattern2
pattern1
blah blah blah
blah blah blah
pattern2 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T19:24:43.557

```
$ awk '/pattern1/{f=!f;buf=""} f{buf = buf $0 ORS} /pattern2/{if(f)printf "%s",buf; f=0} /pattern3/{f=0}' file
pattern1
blah blah blah
blah blah blah
blah blah blah
pattern2
pattern1
blah blah blah
blah blah blah
pattern2 
```

为了可能有助于理解，以下是上面的几行内容和更冗长的变量名称：

```
awk '
/pattern1/ {
    found=!found
    buffer=""
}

found {
    buffer = buffer $0 ORS
}

/pattern2/ {
    if (found) {
        printf "%s",buffer
    }
    found=0
}

/pattern3/ {
    found=0
}
' file 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T18:46:09.780

在纯 sed 解决方案中，我迷失在我的持有空间中；所以这是一个替代方案

```
$ tac input | sed '/pattern3/,/pattern1/d' | tac
pattern1
blah blah blah
blah blah blah
blah blah blah
pattern2
pattern1
blah blah blah
blah blah blah
pattern2 
```

# android - 果冻豆vs冰淇淋三明治textview外观错误

> ID：16154373
> 
> 赞同：0
> 
> 时间：2013-04-22T18:43:47.217
> 
> 标签：android, styles, textview, android-4.0-ice-cream-sandwich

我已经实现了一个按钮，可以更改文本视图的字体、文本大小和填充。textview 从 StyleA 开始，然后按钮将其切换到 StyleB 并且看起来不错，然后再次按下按钮将其切换回 StyleA 并且填充在 Android Ice Cream Sandwich 中不再正确，但对于 Jelly Bean 看起来不错（经过测试带有 4.1.1 设备和仿真器以及 4.2.2 仿真器）。它与 StyleB 的设置有关

```
 int appearanceB = android.R.style.TextAppearance_Medium;
  myTextView.setTextAppearance(getApplicationContext(), appearanceB); 
```

对于样式A：

```
 int appearanceA = R.style.my_style;
  myTextView.setTextAppearance(getApplicationContext(), appearanceA); 
```

如果我注释掉到 android.R.style.TextAppearance_Medium 的切换，那么 ICS（4.0.3 模拟器和 4.0.4 物理设备）中的一切正常。我发现设置 StyleB 会在切换回 StyleA 时以某种方式导致填充混乱，但是，当我没有为 StyleB 设置 android.R.style.TextAppearance_Medium 时，填充不会被弄乱。同样，该错误仅发生在 Android 4.0 而不是 4.1 或 4.2 上。

有什么想法吗？

# ajax - 找到响应中包含特定文本字符串的 http 响应的最佳方法是什么？

> ID：16154378
> 
> 赞同：0
> 
> 时间：2013-04-22T18:44:17.140
> 
> 标签：ajax, http, fiddler, wireshark

我正在 Windows 机器上调试具有大量 AJAX 的 Web 应用程序。我有 Fiddler 和 Wireshark，我愿意获得任何其他可以提供帮助的免费软件。

我正在寻找其中包含特定字符串的 http 响应（及其请求）。找到它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T22:00:12.343

这个任务在 Fiddler 中完全是微不足道的。导致流量发生，然后按 CTRL+F 并键入您要查找的字符串。

如果您希望 Fiddler 自动标记包含给定字符串的任何会话，请使用 [**utilFindInResponse**方法](http://fiddler2.com/documentation/Generate-Traffic/Tasks/SearchSequentialPages)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:47:29.757

我建议使用带有[Firebug插件的](https://addons.mozilla.org/en/firefox/addon/firebug/)[Firefox](http://www.mozilla.org/en/firefox/new/)！

# c# - C# 中的 Windows 8 任务管理器应用历史记录

> ID：16154384
> 
> 赞同：13
> 
> 时间：2013-04-22T18:44:36.950
> 
> 标签：c#, winapi, windows-8

我正在尝试从 C# 访问应用程序历史记录。我想提供与任务管理器中相同的信息，但我找不到 api/example。当然，我实现了一个桌面应用程序。

指定问题：我对 CPU/RAM 不感兴趣。我唯一想得到的是时间。

**更新** 要准确显示我在说什么看这个屏幕： ![截屏](https://i.stack.imgur.com/L5eRj.jpg)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-30T22:25:22.983

没有支持的方式来获取此信息。对不起。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-30T19:52:03.620

问题的描述缺少您所谈论的 Metro Apps 的详细信息。该解决方案相当于`Process.TotalProcessorTime`Metro Apps。

不幸的是，您无法获得该信息，因为正如您所说，应用程序正在另一个进程 (WWAHost.exe) 中运行。Metro 的设计有点像电话——你不能以同样的方式直接操纵系统。Windows 运行时中没有直接的“进程”（参见[此处](http://msdn.microsoft.com/en-us/library/windows/apps/br211377.aspx)），这反过来意味着 Process 类对移植没有意义......

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-30T11:22:40.713

我假设`The only thing I would like to get is Time.`你的意思是每个过程的开始和结束时间

最好的方法是你必须自己建立这段历史。如果您仅在应用程序运行时才需要历史记录，那么您只需执行下面的代码，否则如果您希望在某个时间段内构建历史记录，即使您的应用程序已关闭，请尝试创建一个 Windows 服务来为您完成这项工作。假设您知道如何创建、编译和安装 Windows 服务项目，以下是您需要执行的步骤：

**获取正在运行的进程信息：**

```
using System;
using System.Diagnostics;

public static class ProcessStart
{
    Process[] runningProcesses;
    var processesStartTimes = new Dictionary<int, Datetime>();
    var processesExitTimes = new Dictionary<int, Datetime>();

    static ProcessStart()
    {
        // This will get current running processes
        runningProcesses = Process.GetProcesses();
        foreach (var p in processes)
        {
            p.Exited += new EventHandler(ProcessExited);
            processesStartTimes.Add(p.Id, p.StartTime);
        }
    }

    private void ProcessExited(object sender, System.EventArgs e)
    {
        var p = (Process)sender;
        processesExitTimes.Add(p.Id, p.ExitTime);
    }
} 
```

**获取新的启动流程**

您需要创建一个新`Timer`对象并每隔一秒运行一次以检查新创建的进程。我复制了上面的代码并对其进行了扩展：

```
public static class ProcessStart
{
    Process[] runningProcesses;
    var processesStartTimes = new Dictionary<int, Datetime>();
    var processesExitTimes = new Dictionary<int, Datetime>();
    var updateTimer = new Timer(1000);

    static ProcessStart()
    {
        // This will get current running processes
        runningProcesses = Process.GetProcesses();
        foreach (var p in processes)
        {
            p.Exited += new EventHandler(ProcessExited);
            processesStartTimes.Add(p.Id, p.StartTime);
        }
        updateTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent);
    }

    private void ProcessExited(object sender, System.EventArgs e)
    {
        var p = (Process)sender;
        processesExitTimes.Add(p.Id, p.ExitTime);
    }

    private static void OnTimedEvent(object source, ElapsedEventArgs e)
    {
        runningProcesses = Process.GetProcesses();
        foreach (var p in processes)
        {
            // This will only add the processes that are not added yet
            if (!processesStartTimes.Keys.Contains(p.Id))
            {
                p.Exited += new EventHandler(ProcessExited);
                processesStartTimes.Add(p.Id, p.StartTime);
            }
        }
    }
} 
```

**最后 ：**

然后你需要和`System.Diagnostics.Process`班级一起玩。这应该是获取有关 Windows 进程所需的所有信息的最佳方式。它将授予您访问各种属性和方法的权限。这是官方的 MSDN 赞：

[进程类](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)

**编辑 ：**

正如我从您的评论中看到的，您对 CPU 运行特定进程所花费的时间感兴趣。同一个`System.Diagnostics.Process`类也包含该信息。这可以使用该`Process.PrivilegedProcessorTime`属性找到。此属性的 MSDN 描述是：

> TimeSpan 指示进程在操作系统内核中运行代码所花费的时间。

更多信息[在这里](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.privilegedprocessortime.aspx)

**编辑2：**

以下 2 个属性也可以为您提供所需的内容：

`Process.UserProcessorTime`:[这里](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.userprocessortime.aspx)

TimeSpan 指示关联进程在进程的应用程序部分（而不是操作系统核心）内运行代码所花费的时间量。

`Process.TotalProcessorTime`:[这里](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.totalprocessortime.aspx)

TimeSpan 指示关联进程使用 CPU 所花费的时间量。该值是 和 之`UserProcessorTime`和`PrivilegedProcessorTime`。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-05-01T21:04:03.490

我对此进行了一些研究，因为我发现 Metro 应用程序如何集成到现有流程结构中很有趣。

正如其他人在这里指出的那样，不可能以漂亮的受支持的 API 方式获取您想要的信息。但是，每个应用程序都是作为不同的进程启动的，对于进程，有已知的方法来获取运行时间、cpu 时间等。

如果您找到与您的 Windows 8 应用程序对应的进程，您将能够获得所需的信息。

有些应用真的很容易被发现。它们只是一个可执行文件，就像任何其他具有适当进程名称和描述的桌面应用程序一样。例如在这张图片中的“地图”、“Windows 阅读器”和“微软相机应用程序”：

![在此处输入图像描述](https://i.stack.imgur.com/YttSS.jpg)

其他一些应用程序更难发现。它们托管在由`wwahost.exe`执行程序启动的进程中。我只能通过查看模块列表来发现应用程序名称。这是`Bing`应用程序：

![在此处输入图像描述](https://i.stack.imgur.com/SzCe2.jpg)

要枚举进程中的模块和映射文件，您可以使用 WinAPIs [VirtualQueryEx](http://msdn.microsoft.com/de-de/library/windows/desktop/aa366907(v=vs.85).aspx)和[GetMappedFileName](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683195(v=vs.85).aspx)。

然后，您要查找位于`%programfiles%\WindowsApps`. 这是 Windows 为其应用程序保存所有应用程序文件的文件夹。

每个应用程序都有一个`.pri`文件。此文件包含应用程序的二进制元数据。您可以使用它从托管它的进程中查找应用程序的名称。在与 .pri 文件相同的文件夹`AppxManifest.xml`中，您可以在其中找到有关该应用程序的各种附加信息。

我将尝试总结一下我的写作：

*   使用 WinAPI 枚举进程并获取您需要的所有信息（运行时间、cpu 时间等）。
*   枚举每个进程的映射文件并查找`ressources.pri`. 此文件所在的目录中包含应用程序名称。
*   作为奖励阅读`AppxManifest.xml`文件以获取有关应用程序的其他信息。您可能需要管理员权限或其他权限才能读取此文件。

# php - Ajax 错误：编辑 jcart.js 中的路径以修复

> ID：16154386
> 
> 赞同：0
> 
> 时间：2013-04-22T18:44:44.863
> 
> 标签：php, javascript, ajax, jquery

我在包含购物车脚本的页面上遇到错误。

> 错误：“Ajax 错误：编辑 jcart.js 中的路径以进行修复。”

据我所知，问题在于文件的相对路径。我尝试了各种变体以使路径正确无济于事。

该错误特定于名为 jcart.js 的 JavaScript 文件中的文件路径位置变量。文件的位置如下：

文件/目录：

1.  domain.com/folder/jcart/js/jcart.js
2.  domain.com/folder/jcart/config-loader.php
3.  domain.com/folder/jcart/relay.php

代码：

```
var JCART = (function() {

// This script sends Ajax requests to config-loader.php and relay.php using the path below
// We assume these files are in the 'jcart' directory, one level above this script
// Edit as needed if using a different directory structure
var path = 'jcart',
container = $('#jcart'),
token = $('[name=jcartToken]').val(),
tip = $('#jcart-tooltip');

var config = (function() {
    var config = null;
    $.ajax({
        url: path + '/config-loader.php',
        data: {
        "ajax": "true"
        },
        dataType: 'json',
        async: false,
        success: function(response) {
            config = response;
        },
        error: function() {
            alert('Ajax error: Edit the path in jcart.js to fix.');
        }
    });
    return config;
}()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T21:37:48.647

更改`var path = 'jcart'`为`var path = 'folder/jcart'`_

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:58:41.110

由于实际的 ajax 请求将发送到“window.location.href + path + '/config-loader.php'”，因此您不妨将 url 参数设置为：

```
 url: location.protocol + "//" + location.host + "/folder/jcart/config-loader.php", 
```

# java - 构造函数是否可以接受由前一个参数定义的多个参数？

> ID：16154392
> 
> 赞同：4
> 
> 时间：2013-04-22T18:45:27.397
> 
> 标签：java, constructor

假设您有以下课程：

```
public class MyClass {

    public MyClass() {
    }
} 
```

我希望能够在构造函数中传递可定义数量的参数，如下所示：

```
 public MyClass(int parameters, int /* "parameters" amount of integers here*/) {
    } 
```

我知道我可以使用省略号运算符，但是构造函数将接受比 int“参数”更多或更少的参数。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T18:50:52.440

您不能在 Java 编译器中强制执行此限制，但您可以通过抛出一个运行时强制它`IllegalArgumentException`：

```
public MyClass(int numParameters, int... parameters) {
    if (numParameters != parameters.length)
       throw new IllegalArgumentException("Number of parameters given doesn't match the expected amount of " + numParameters);
    // Rest of processing here.
} 
```

这使用 Java 的[可变参数](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html)功能来接受未知数量的参数。

注意：为了清楚起见，我稍微重命名了参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T18:48:57.493

`public MyClass(int parameters, int /* "parameters" amount of integers here*/) { }`

请参阅有关*定义方法的*[链接](http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html)：

 *> 括号中的参数列表 - 输入参数的逗号分隔列表，前面是它们的数据类型，用括号括起来，()

参数不会告诉您它期望**多少**数据，它会告诉您**数据类型**。

如果需要，可以在运行时检查构造函数中的*数量：*

`if(parametersAmount != desiredAmount) ...`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T19:11:55.537

我猜测第一个参数将是一个命名常量，它区分不同的情况

```
new MyClass(CASE_ONE, p1); 
```

您可以使用工厂方法

```
public static MyClass createCaseOne(int p1){ ... }

public static MyClass createCaseTwo(int p1, int p2){ ... }

public static MyClass createCaseThree(int p1, int p2, int p3){ ... }

... 
```*

# javascript - 如何使用链接方法javascript附加点击事件

> ID：16154394
> 
> 赞同：1
> 
> 时间：2013-04-22T18:45:38.570
> 
> 标签：javascript, javascript-events, jquery

我真的饿死有知识的人了！！点击事件在 JQuery 中是如何工作的？

我的意思是，我学会了如何制作链接方法，但我不知道如何制作这样的点击事件。

```
MyLibrary("selector").click(function(){
console.log("hello");
}); 
```

我客人说，如果我学会了这一点，我就会知道模糊、鼠标悬停等是如何工作的。

请我希望你能帮助我学习，我搜索了答案，但我找不到任何答案，或者我问错了。

**更新**

我知道如何使用 JQuery 的家伙，**但我问**的是我怎样才能做到。我的意思是，我想创建一个库，并且我想像 JQuery 一样添加一个点击事件。

我做了这样的链接方法：

```
Find().UserByName("Bob").Write("DivOrInputObject's ID").UserByPass("pass").Write("DivOrInputObject's ID"); 
```

但是在编写代码时，我想到了如何制作点击事件？简而言之，我想像 Jquery 那样对 click() 事件进行动画处理并将其添加到我的库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:52:41.400

我假设您正在编写自己的 jQuery。因此，如果您的 MyLibrary 对象在 MyLibrary.el 下选择了元素，那么您可以拥有像这样的可链接点击处理程序：

```
click: function(handler){
  this.el.addEventListener('click', handler.bind(this.el));
  return this;
}, 
```

这将`this`在处理程序内部绑定到元素本身。就像 jQuery

这是此代码的实际操作：http: [//jsbin.com/ahinow/1/](http://jsbin.com/ahinow/1/)

# java - Eclipse Juno 说 SWT 未安装，但可用软件面板说它是

> ID：16154395
> 
> 赞同：0
> 
> 时间：2013-04-22T18:45:41.117
> 
> 标签：java, eclipse, swt

试图用 SWT 做一些开发，但我也做不到，因为它一直说 SWT 包没有安装。看下面的截图

![在此处输入图像描述](https://i.stack.imgur.com/0leb2.png)

但是，当我转到帮助-> 安装新软件-> [http://www.eclipse.org/swt/updates/3.8](http://www.eclipse.org/swt/updates/3.8)时，它指出所有项目都是为 SWT 工具安装的。任何人都没有运行过这个，如果是这样，需要解决什么？

在 Windows 7 上使用 Eclipse Juno 和 WindowBuilderPro。eclipse 和 Windows 7 都是 64 位安装

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T18:56:56.830

通常 SWT 应该立即工作。

但是，[这](http://www.mkyong.com/swt/how-to-import-swt-library-into-eclipse-workspace/)可能会奏效。

它所做的只是将 SWT 库添加到您的项目中。

# python - 构建 PyQt 以使用 Qt5

> ID：16154402
> 
> 赞同：1
> 
> 时间：2013-04-22T18:46:00.130
> 
> 标签：python, build, pyqt, qt5

构建/安装 PyQt（从源代码或使用`pip`）时，如何指定本地 Qt5 安装的路径？

我使用以下命令从源代码（[qt-everywhere-opensource-src-5.0.2.tar.gz](http://download.qt-project.org/official_releases/qt/5.0/5.0.2/single/qt-everywhere-opensource-src-5.0.2.tar.gz)）构建了 Qt5：

```
wget http://download.qt-project.org/official_releases/qt/5.0/5.0.2/single/qt-everywhere-opensource-src-5.0.2.tar.gz
tar -xvf qt-everywhere-opensource-src-5.0.2.tar.gz

cd qt-everywhere-opensource-src-5.0.2
./configure -prefix $PWD/qtbase -opensource -nomake tests
make -j 4 
```

如果我再`cd`进去`qtbase`，我会看到：

```
bin/
dist/
doc/
examples/
imports/
include/
lib/
etc ... 
```

查看 PyQt4[安装说明](http://pyqt.sourceforge.net/Docs/PyQt4/installation.html)，我找不到指定 Qt 安装位置的标志或选项。

有没有办法告诉 PyQt4 在哪里可以找到 Qt5？

**注意：**我没有root权限，需要在本地安装。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T18:39:41.500

配置 PyQt4：

```
python configure.py --qmake <path to your qt5 qmake> 
```

# php - 如何回显 stdClass 对象标题

> ID：16154405
> 
> 赞同：4
> 
> 时间：2013-04-22T18:46:07.810
> 
> 标签：php, mysql

我想要的只是呼应标题。

以下命令由以下触发器打印：

```
print_r($results);

Array ( 
   [0] => stdClass Object ( [title] => Title A [catid] => 1 ) 
   [1] => stdClass Object ( [title] => Title B [catid] => 1 ) 
) 
```

我怎样才能呼应**标题 A**

亲切的问候！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T18:47:27.617

它只是一个对象数组，所以...

```
$results[0]->title 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T18:47:33.960

要仅打印您可以执行的名称：

```
foreach($results as $result){
    echo($result->title);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T18:48:52.980

```
$results = Array ( 
   [0] => stdClass Object ( [title] => Title A [catid] => 1 ) 
   [1] => stdClass Object ( [title] => Title B [catid] => 1 ) 
);

$str = "";

foreach($arr as $item) {
    $result .= $item->title . "\n";
}

print $str; 
```

类似的东西？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-18T08:56:37.260

```
stdClass Object
(
    [0] => Array
        (
            [liquid_id] => 1
            [liquid_name] => lfts
            [amount_per_bottle] => 30
            [qty_used_per_test] => 10
            [location_id] => 1
            [liq_req_per_test] => 3
            [no_of_test_performed] => 0
            [labtest_names] => Absolute Eosinophil count
Bla bla

            [labtest_id] => 1,3,
        )

    [1] => Array
        (
            [liquid_id] => 2
            [liquid_name] => sgpt
            [amount_per_bottle] => 50
            [qty_used_per_test] => 5
            [location_id] => 1
            [liq_req_per_test] => 10
            [no_of_test_performed] => 0
            [labtest_names] => Absolute Eosinophil count
Bla bla

            [labtest_id] => 1,3,
        )

) 
```

# javascript - Javascript：查找每年降临周的开始

> ID：16154407
> 
> 赞同：2
> 
> 时间：2013-04-22T18:46:11.100
> 
> 标签：javascript, weekend

我创建了以下代码（有效）以根据指定月份的周数打印不同的内容：

```
<script language="javascript">
<!--
var advent;
mytime=new Date();
mymonth=mytime.getMonth()+1;
mydate=mytime.getDate();
if (mymonth==12 && (mydate >= 1 && mydate <= 6)){document.write("xxx");
}
if (mymonth==12 && (mydate >= 7 && mydate <= 13)){document.write("yyy");
}
if (mymonth==12 && (mydate >= 14 && mydate <= 20)){document.write("zzz");
}
if (mymonth==12 && (mydate >= 21 && mydate <= 30)){document.write("qqq");
}
//-->
</script> 
```

但是我需要每年针对 Advent 进行更改，并且 Advent 会根据每年圣诞节的时间进行更改：

> 降临节从圣诞节前四个星期的星期日开始。降临节有四个星期日，然后是圣诞节。日期每年都在变化，具体取决于圣诞节是一周中的哪一天。因此，在 2010 年，降临节于 11 月 28 日开始。2011 年将在 11 月 27 日举行。

我如何计算每年降临节的开始时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T19:01:41.480

**从平安夜**前 3 周的日期开始。然后，向后走，直到星期几是星期日：

```
function getAdvent(year) {
  //in javascript months are zero-indexed. january is 0, december is 11
  var d = new Date(new Date(year, 11, 24, 0, 0, 0, 0).getTime() - 3 * 7 * 24 * 60 * 60 * 1000);
  while (d.getDay() != 0) {
    d = new Date(d.getTime() - 24 * 60 * 60 * 1000);
  }

  return d;
}

getAdvent(2013);
// Sun Dec 01 2013 00:00:00 GMT-0600 (CST)

getAdvent(2012);
// Sun Dec 02 2012 00:00:00 GMT-0600 (CST)

getAdvent(2011);
// Sun Nov 27 2011 00:00:00 GMT-0600 (CST) 
```

[（2013 年和 2012 年根据http://usccb.org/](http://usccb.org/)上的日历进行了测试和验证。2011 年根据[http://christianity.about.com/od/christmas/qt/adventdates2011.htm](http://christianity.about.com/od/christmas/qt/adventdates2011.htm)进行了验证）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T18:55:03.343

这是我在评论中所说的：

```
function getAdvent(year) {
    var date = new Date(year, 11, 25);
    var sundays = 0;
    while (sundays < 4) {
        date.setDate(date.getDate() - 1);
        if (date.getDay() === 0) {
            sundays++;
        }
    }
    return date;
} 
```

**演示：http:** [//jsfiddle.net/eyUjX/1/](http://jsfiddle.net/eyUjX/1/)

它从特定年份的圣诞节开始。它日复一日地进入过去，检查周日（`.getDate()`返回`0`）。在遇到其中 4 个之后，循环停止并`Date`返回。

因此，要获得 2009 年降临节的开始，请使用：`getAdvent(2009);`. 它返回一个`Date`对象，因此您仍然可以使用它的方法。

作为其方法的参考：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T20:54:56.710

您可以通过在 11 月的最后一个星期四加上 3 天来获得 Advent Sunday，这似乎更简单：

```
function getAdventDay(y){
  var advent=new Date();
  advent.setHours(0,0,0,0);
  //set the year:
  if(typeof y!='number')y=advent.getFullYear();

  //get the last day of november:
  advent.setFullYear(y,10,30);

  //back up to the last thursday in November:
  while(advent.getDay()!==4)advent.setDate(advent.getDate()-1);

  //add 3 days to get Sunday:
  advent.setDate(advent.getDate()+3);

  return advent;
}

getAdventDay(2013)
/*
Sun Dec 01 2013 00:00:00 GMT-0500 (Eastern Standard Time)
*/ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-22T09:53:49.353

```
const getFirstAdvent=function(y){
 const firstAdvent=new Date(y,11,3);
 firstAdvent.setDate(firstAdvent.getDate()-firstAdvent.getDay());
 return firstAdvent;
};

alert(getFirstAdvent(2020)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T19:26:42.747

我喜欢这些挑战，这里是如何通过递归来完成的。首先我找到第四个星期天。然后我一直减去 7 天，直到我有另外 3 天。变量 firstSunday、secondSunday、thirdSunday 和 FourthSunday - 包含日期。

*编辑：*我相信我误解了，但*firstSunday*变量将是您要查找的日期。

**[演示](http://jsfiddle.net/aVdvU/3/)**

**Javascript**

```
var year = 2011;//new Date().getFullYear();
var sevenDays = (24*60*60*1000) * 7;

var foundDate;
var findClosestSunday = function(date){
    foundDate = date;
    if (foundDate.getDay() != 0)
        findClosestSunday(new Date(year,11,date.getDate()-1));
    return foundDate;
}

var fourthSunday = findClosestSunday(new Date(year, 11, 23));
var thirdSunday = new Date(fourthSunday.getTime() - sevenDays);
var secondSunday =  new Date(fourthSunday.getTime() - sevenDays *2);
var firstSunday =  new Date(fourthSunday.getTime() - sevenDays *3);

console.log
(
    firstSunday,
    secondSunday,
    thirdSunday,
    fourthSunday
); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-22T18:51:50.350

Javascript 自纪元以来以毫秒为单位工作。一周有 1000 * 60 * 60 *24 * 7 = 604800000 毫秒。

您可以在 Javascript 中创建一个与已知日期偏移的新日期，执行以下操作：

```
var weekTicks, christmas, week0, week1, week2, week3;
weekTicks = 604800000;
christmas = new Date(2013, 12, 25);
week0 = new Date(christmas - weekTicks);
week1 = new Date(week0 - weekTicks);
week2 = new Date(week1 - weekTicks);
week3 = new Date(week2 - weekTicks); 
```

看看它是如何为你工作的。

此外，Date.getDay 函数将帮助您找出一个月中的哪一天是第一个星期日。

# .net - SmtpClient 对象的默认超时是多少？

> ID：16154410
> 
> 赞同：7
> 
> 时间：2013-04-22T18:46:22.410
> 
> 标签：.net, smtpclient

.NET SmtpClient 对象中的超时默认值是什么？它是什么时间单位（秒、毫秒等）？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-22T18:49:34.093

默认值为 100,000（100 秒）。

[http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.timeout.aspx](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.timeout.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-08-07T10:54:36.817

单位为毫秒，默认值为 100,000，相当于 100 秒。

# powershell-2.0 - 数组数组混淆

> ID：16154414
> 
> 赞同：0
> 
> 时间：2013-04-22T18:46:34.160
> 
> 标签：powershell-2.0

我有一个逗号分隔的字符串数组。我通过拆分 csv 将其转换为数组数组。在我的循环中（来自输出）看起来不错，给了我一个字符串数组。但是，在我将字符串数组添加到另一个数组之后，它似乎变得一团糟。

最后的输出显示字符串中的一个字符，而不是实际的字符串。

```
 foreach($n in $Names) 
    {

    $obj = ([string]$n.value).Split(",")
    "0: " + $obj[0]
    "1: " + $obj[1]
    #$obj.GetTYpe()
    $arrInfo+= $obj
    }

$arrinfo[5][0]
$arrinfo[5][1]

$a = $arrinfo[5]
$a[0]
$a[1] 
```

输出类似于： 0：第 0 项字符串 1：第 1 项字符串

.... I t I t 出了什么问题？为什么我的第二个数组 (arrInfo) 似乎只有字符串而不是字符串数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T21:28:08.973

再环顾四周后，我将行更改为： $arrinfo += , $obj 并且它按预期工作。我不完全明白为什么。

# java - Java - System.out.println() 可从应用程序查看？

> ID：16154416
> 
> 赞同：1
> 
> 时间：2013-04-22T18:46:44.310
> 
> 标签：java, terminal

我有一个运行良好的 Java 应用程序 :) 在上传文件时，它使用标准输出来显示进度：“System.out.println(...);”。

当我在 Eclipse 中运行它时，它运行良好，但是当我运行 JAR 文件时，我没有看到任何控制台/终端出现并打印我通过“System.out.println(...)”打印的内容.

启动应用程序（它是 Swing 应用程序）时，如何打开新终端？基本上我希望能够运行 Swing 应用程序并在终端/控制台的侧面显示信息。为什么？不要担心我为什么要这样做；）

非常感谢！

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:54:58.573

使用`java`而不是`javaw`启动您的应用程序。双击一个 jar 执行它`javaw`。相反，打开命令行窗口并键入

```
java -jar thePathOfTheJarFile.jar 
```

如果你想要一些可双击的东西，那么编写一个包含此命令的 shell 脚本，然后双击 shell 脚本而不是 jar。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T18:55:37.677

打开终端并运行应用程序，`java -cp yourjar.jar YouMain`或者`java -jar yourjar.jar`如果您的 jar 可运行。

我相信您看不到输出，因为您正在运行您的应用程序`javaw`- JVM 的特殊 Windows 变体，根本没有 STDOUT。如果您想单击您的应用程序并查看`*.jar`要使用`java`而不是打开的输出映射文件`javaw`。或者编写`bat`运行您的应用程序的文件。在这种情况下，您将看到控制台。

# asp.net-mvc - MVC 试图将模型从剃刀视图传递到控制器

> ID：16154419
> 
> 赞同：0
> 
> 时间：2013-04-22T18:46:57.353
> 
> 标签：asp.net-mvc

所以我的故事是我在发布到控制器时遇到问题，视图似乎工作正常。当回发发生时，tm.BookId 为 0（应该为 1）并且列表计数为 0。首先我将显示模型：

```
 public class TransferModel
{
    public TransferModel()
    {
        cbItems = new List<CheckBoxItem>();
    }
    public List<CheckBoxItem> cbItems {get;set;}
    public int BookId;
    public class CheckBoxItem
    {
        public int AttributeId { get; set; }
        public string Attribute { get; set; }
        public bool Selected { get; set; }

    }
} 
```

控制器部分：

```
public ActionResult AddAttributes(int id = 0)
    {
        db.transMod.BookId = id;
        BookInfo book = db.BookInfoes.Find(id);
        var latts = db.BookAtts.ToList();
        foreach (BookAtt ba in latts)
        {
            db.transMod.cbItems.Add(new TransferModel.CheckBoxItem { Attribute = ba.Attribute, AttributeId = ba.BookAttId, Selected = false });
        }
        List<BookAtt> atInList = book.BookAtts.ToList();
        foreach (TransferModel.CheckBoxItem cb in db.transMod.cbItems)
        {
            if (atInList.Exists(item => item.Attribute == cb.Attribute))
                cb.Selected = true;
        }

        return View(db.transMod);
    }

    [HttpPost]
    [ValidateAntiForgeryToken]
    public ActionResult AddAttributes(TransferModel tm)
    {
       List<BookAtt> atPool = db.BookAtts.ToList();
       BookInfo book = db.BookInfoes.Find(tm.BookId);
       foreach (TransferModel.CheckBoxItem sel in tm.cbItems)
        {
            if (sel.Selected)
            book.BookAtts.Add(atPool.Find(item1 => item1.Attribute == sel.Attribute));
        }
        db.SaveChanges();
        return RedirectToAction("AddAttributes");
    }`enter code here` 
```

最后是视图：

```
 @model BrightStar.Models.TransferModel
@{
ViewBag.Title = "Update Attributes";
}
<h2>Add Attributes</h2>
@using (Html.BeginForm()) {
@Html.AntiForgeryToken()
<table>
 @Html.HiddenFor(model => Model.BookId)
 @Html.HiddenFor(model => Model.cbItems)

@foreach (var itm in Model.cbItems)
{
    <tr>
        <td>@Html.HiddenFor(mo => itm.AttributeId)</td>
        <td>@Html.CheckBoxFor(mo => itm.Selected)</td>
        <td>@Html.DisplayFor(mo => itm.Attribute)</td>
    </tr>
}

</table>
    <p>
        <input type="submit" value="Save"  />
    </p>
}

enter code here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:10:16.897

您应该在帮助程序中引用模型的属性，以便为您的控件正确生成名称：

```
@Html.HiddenFor(model => Model.cbItems) 
```

应该

```
@Html.HiddenFor(model => model.cbItems) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:00:22.347

模型绑定不会自动发生，项目需要采用某种格式才能绑定到 POST 操作中的列表属性。看看[这个](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspxm=bv.45512109,d.dmQ)。

尝试检查 DOM 中 BookId 属性的值，确认它是 1，否则应该正常绑定。

# erlang - 如何将 RabbitMQ Shovel 配置为用当前时间覆盖时间戳属性？

> ID：16154421
> 
> 赞同：0
> 
> 时间：2013-04-22T18:46:58.003
> 
> 标签：erlang, rabbitmq, rabbitmq-shovel

例如：

```
{myshovel, [
    {sources, ...}
    , {destinations, ...}
    , {queue, <<>>}
    , {ack_mode, on_confirm}
    , {publish_properties, [
        {delivery_mode, 2}
        , {timestamp, now} % this is the line I need to understand how to write
    ]}
    , {publish_fields, [{exchange, <<"">>}, {routing_key, <<"">>}]}
    , {reconnect_delay, 5}
]} 
```

我很好奇如何以`publish_properties`某种方式编写，以便 RabbitMQ Shovel 用当前时间覆盖时间戳（就像当铲子接收到消息并将其*铲*到目标队列时一样）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:44:21.070

不幸的是，在撰写本文时，无法以这种方式配置铲子。shovel 配置，包括`publish_properties`for forwarded 消息，是在 shovel worker 启动时读取的，并且只能包含静态内容。因此，您输入的任何值都`{publish_properties, [{timestamp, TimeStamp}]}`将直接传递给 erlang-client，然后将尝试序列化这些值（使用 amqp_ 框架层）。

我们目前正在计划对 shovel 插件进行一些改进（例如集群范围的故障转移和动态重新配置），您不是第一个要求此功能的人，因此我们将考虑在此处支持特定内容是否有意义（例如为每条已处理的消息设置新的时间戳）或配置 shovel worker 运行时行为的通用方法。

# php - 搜索不返回多个关键字的结果

> ID：16154424
> 
> 赞同：1
> 
> 时间：2013-04-22T18:47:03.723
> 
> 标签：php, mysql

有没有其他方法可以在没有 FULLTEXT 的情况下在一列中搜索多个字符串。当我将 MATCH 和 AGAINST 添加到我的 sql 时，我收到此错误“找不到与列列表匹配的 FULLTEXT 索引”下面是我的代码：

`$query = "SELECT id, title, introtext, published FROM`jos_k2_items`WHERE MATCH(title,introtext) AGAINST('".$search."') LIMIT 30";`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:49:15.187

要么在这两个字段上添加全文索引，要么进行*大量*的预处理/动态查询构建：

```
... WHERE title LIKE '%word1%' OR title LIKE '%word2' OR title LIKE ...
      OR introtext LIKE '%word1%' OR introtext LIKE '%word2%' ... 
```

# php - 使用 PHP 中的 json_encode 时，JQuery $.each 循环会重新排序我的数组

> ID：16154427
> 
> 赞同：0
> 
> 时间：2013-04-22T18:47:08.973
> 
> 标签：php, javascript, jquery, arrays, json

**PHP：**

```
 $arr[0] = 'A';
 $arr['C'] = 'C';
 $arr[10] = 'B';

 echo json_encode($arr); 
```

**查询：**

```
 $.each(result, function(i, item) {
    console.log(i + " => " + item);
 }); 
```

期望的输出：

```
 0 => A
   C => C
   10 => B 
```

相反，我得到：

```
 0 => A
   10 => B
   C => C 
```

如何防止它在不修改 PHP 代码或重组数组的情况下重新排序我的数组？

编辑：

当使用 firebug 在响应标头中调用 ajax 时，它的顺序似乎正确：

```
"0":"A","C":"C","10":"B" 
```

但是，当我在 $.each 循环中执行 console.log 时，它会重新排序

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T18:48:28.337

Your `$arr` is an object, not an array and the keys aren't indexed nor ordered.

You don't have guarantee in JavaScript about the iteration order on object properties, only the indexed keys (i.e. integer keys) of arrays.

To iterate over a plain object, `$.each` uses the standard `for..in` construct on which [the MDN precises that](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in)

> A for...in loop iterates over the properties of an object in an arbitrary order

If you want to keep arbitrary key-value ordered, you should store both in a proper array :

```
 var arr = [];
  arr.push({key:0, value:'A'});
  arr.push({key:'C', value:'C'});
  arr.push({key:10, value:'B'}); 
```

# html - How to pass an HTML string in a Query String in IOS

> ID：16154429
> 
> 赞同：0
> 
> 时间：2013-04-22T18:47:19.347
> 
> 标签：html, ios, query-string

I have a simple IOS application that I created for consultants where I work. It has a custom keyboard with notation that they use that includes superscript and subscript characters. The easiest way that I found to handle those characters was using `HTML` and a `WebView`, which works just fine.

I am now attempting to send this information to a web application that will insert it into a SQL database. Sending all of the other information works just fine, until I get to the transcript with `HTML` in it. I am encoding each of the values that I send through the query string with `stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding` but the query string fails when HTML elements are included. I believe this is due to the `/` that is not removed during the escape encoding. For example the HTML break tag becomes `%3Cbr%20/%3E`. So the `<` `>` and space are replaced, but not the `/`.

Should I be using a different method? Is there an easy way to send HTML over Query String? Am I correct that the `/` character is what is breaking my query string?

Here is the code I have now:

```
NSString *datePE =[dateString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSString *studentPE =[student stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSString *teacherPE =[teacher stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSString *transcriberPE =[transcriber stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSString *vrPE =[vrTextField.text stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSString *totalTimePE =[totalTimeString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSString *transcriptPE =[transcriptString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

parameters = [NSString stringWithFormat:@"dateQS=%@&studentQS=%@&teacherQS=%@&transcriberQS=%@&vrQS=%@&totalTimeQS=%@&transcriptQS=%@",datePE ,studentPE,teacherPE,transcriberPE,vrPE,totalTimePE, transcriptPE];
request = [NSMutableURLRequest
           requestWithURL:[NSURL URLWithString:@"http://server.domain.net/folder/subfolder/Default.aspx?"]];

[request setHTTPMethod:@"POST"];
[request setHTTPBody:[parameters dataUsingEncoding:NSUTF8StringEncoding]];
connection = [[NSURLConnection alloc] initWithRequest:request
                                             delegate:self
                                     startImmediately:YES]; 
```

# c# - WCF service as internal and internet exposed on different servers

> ID：16154431
> 
> 赞同：0
> 
> 时间：2013-04-22T18:47:21.803
> 
> 标签：c#, asp.net, wcf, iis, wcf-proxy

I have to distribute several applications in 2 servers. Currently both servers have public IPs and they can be accesed across internet requests. Both servers are hosting several Web Applications. Now, I have to distribute those applications to have the front-end in the server (A) and the back-end in the second (B), so that the server "B" doesn't have public internet conection, all the request must enter by the server "A" first. I am going to use WCF to separate and communicate the presentation with the program's logic (between those servers). That's ok but, the problem is that the server "B" is hosting some public business WCF services consumed by external systems. Those business services need to be accesed directly across internet.

I have to provide a public service to recieve the calls and another in the server "B" to process the logic and perform database operations.

I don´t know what can be the best way to achieve this application distribution. I am taking create 2 services as the last option. I think there must be a better solution like configuration or with infraestructure.

I hope you can give some idea to solve my issue.

Thanks in advance. Israel.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T03:22:54.360

这意味着您将服务器“B”暴露给互联网，对吗？我会考虑使用 2 个端点和 2 个差异。合同 - 1 个用于您的业务服务（ssl、证书......？），第二个 - 用于服务器“A”操作（net.tcp 绑定，仅为服务器“A”打开端口）。

# sql-server - Xpath 为有效的 Xpath 表达式返回 NULL

> ID：16154434
> 
> 赞同：2
> 
> 时间：2013-04-22T18:47:29.417
> 
> 标签：sql-server, xml, xpath, xquery, xml-namespaces

我正在使用一个相当简单的 Xpath 查询（下）来查询 SQL Server 2008 数据库列，其值都遵循示例的形式（下）。我的查询返回`NULL`所有行，而不是`example`属性的值（例如“VALUE”），即使该`example`属性是为我查询的每一行定义的。

我尝试在我的 Xquery 表达式中声明`xsd`和`xsi`命名空间，并从多个不同的属性名称中进行选择，但都没有任何效果。我错过了什么？

**查询**：

```
select ColumnName.value('(/RootNode/@example)[1]', 'nvarchar(15)') [Result]
  from TableName 
```

**XML 示例节点**（实际的 XML 包含更多属性，我已省略）：

```
<RootNode xmlns:xsd="http://www.w3.org/2001/XMLSchema"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xmlns="http://intranet"
          example="VALUE">
  <IsValid>true</IsValid>
</RootNode> 
```

**尝试使用命名空间进行查询，结果相同**：

```
select ColumnName.value('
declare namespace xsd="http://www.w3.org/2001/XMLSchema";
declare namespace xsi="http://www.w3.org/2001/XMLSchema-instance";

(/RootNode/@example)[1]', 'nvarchar(15)') [Result]
  from TableName 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T19:07:45.293

此查询有效。问题是数据节点声明了一个自定义的默认命名空间。

```
select ColumnName.value('
declare default element namespace "http://intranet";

(/RootNode/@example)[1]', 'nvarchar(15)') [Result]
  from TableName 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T19:07:04.623

您需要为您的 xml 数据添加默认命名空间，并且很可能会修改 xpath 查询。

我还没有运行这个来测试，但这是我最好的猜测，应该让你继续：

```
WITH XMLNAMESPACES (N'http://intranet' as intra)
SELECT ColumnName.value('/intra:RootNode[@example]/intra:IsValid[1]', 'nvarchar(15)') [Result]
FROM TableName 
```

# asp.net - error : Cannot find table 0

> ID：16154437
> 
> 赞同：-1
> 
> 时间：2013-04-22T18:47:44.520
> 
> 标签：asp.net

```
 con.Open();
 SqlDataAdapter da4 = new SqlDataAdapter("select * from tblbooking where bookid =(select max(bookid) from tblbooking)", con);
 DataSet ds4 = new DataSet();
 pay = ds4.Tables[0].Rows[0]["costoftickets"].ToString();
 Label4.Text = "Amount to Pay : " + pay + " INR.";
 da4.Fill(ds4);
 DetailsView1.DataSource = ds4;
 DetailsView1.DataBind();
 con.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:50:21.787

在访问数据集的内容之前，您还没有填充数据集，因此其中自然没有数据。

```
con.Open(); 
SqlDataAdapter da4 = new SqlDataAdapter("select * from tblbooking where bookid =(select max(bookid) from tblbooking)", con); 
DataSet ds4 = new DataSet(); 
da4.Fill(ds4); // this needs to go before accessing the data
pay = ds4.Tables[0].Rows[0]["costoftickets"].ToString(); 
Label4.Text = "Amount to Pay : " + pay + " INR."; 
DetailsView1.DataSource = ds4; 
DetailsView1.DataBind(); 
con.Close(); 
```

请注意，如果您的查询没有返回数据，您仍然可能会遇到错误。

# single-sign-on - OpenAM webagent for JBoss AS 7.x

> ID：16154440
> 
> 赞同：2
> 
> 时间：2013-04-22T18:47:49.087
> 
> 标签：single-sign-on, jboss7.x, openam

Need a compatible openAM web agent for Jboss7\. Or what can be done with existing version to make it compatible with JBoss AS 7?

jboss_v42_agent asks for the config path of Jboss while configuring and it does not accept any of the config paths in Jboss7\.

Log of policy agent installation...

```
 ************************************************************************
    Welcome to the OpenAM Policy Agent for JBoss Server 4.x.

    ************************************************************************

    Enter the complete path to the directory which is used by JBoss Server to store
    its configuration Files. This directory uniquely identifies the JBoss
    Server instance that is secured by this Agent.
    [ ? : Help, ! : Exit ]
    Enter the JBoss Server Config Directory Path
    [C:\jboss-4.2.3\server\default\conf]: C:\jboss2\standalone\configuration

    ERROR: Invalid JBoss Server Config directory . Please try again.
    Invalid JBoss Server Config directory :
    C:\jboss2\standalone\configuration

    Enter the complete path to the directory which is used by JBoss Server to store
    its configuration Files. This directory uniquely identifies the JBoss
    Server instance that is secured by this Agent.
    [ ? : Help, ! : Exit ]
    Enter the JBoss Server Config Directory Path
    [C:\jboss-4.2.3\server\default\conf]: 
```

# java - Java objects and GUI

> ID：16154441
> 
> 赞同：-3
> 
> 时间：2013-04-22T18:47:49.880
> 
> 标签：java, object, user-interface

How would I begin to write a mortgage calculator that compiles and runs, but I would be bale to add a GUI to later without re-writing the initial code

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:50:06.470

使用模型-视图-控制器模式。 [http://en.wikipedia.org/wiki/Model_view_controller](http://en.wikipedia.org/wiki/Model_view_controller)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:50:12.547

确保将计算抵押贷款的服务方法编写为`reusable`/ `decoupled`。这意味着不直接依赖于控制台输入/输出等。一旦存在，您可以使用它与 Swing GUI/Web 界面等一起使用。

# iphone - 将“评价我的应用”操作添加到按钮

> ID：16154444
> 
> 赞同：2
> 
> 时间：2013-04-22T18:48:01.713
> 
> 标签：iphone, ios, ipad

我正在尝试实现一个按钮，该按钮仅在触摸该按钮时才会对我的应用程序进行评分。这只是一个简单的动作。

我想这只是一个警报视图，但我真的不知道如何启动它。我从来没有实施过。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T18:56:34.603

就像许多人指出的那样，它已经得到了回答，但你也应该看看 APPirater。这是一个很好的解决方案，可以为您自动执行此操作。

[https://github.com/arashpayan/appirater](https://github.com/arashpayan/appirater)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T05:27:24.210

嗨 Vergmort as par waf 建议它非常容易和很好地使用**APPirater**。是显示评级警报，因为你希望这样的日子和时间明智： -

![在此处输入图像描述](https://i.stack.imgur.com/6brpK.png)

您只需执行一些简单的步骤：-

*   从此链接下载代码：- [https://github.com/arashpayan/appirater](https://github.com/arashpayan/appirater)

*   只有这三个文件需要您的项目：-

    `AppiraterDelegate.h` `Appirater.h` `Appirater.m`

*   将此三个文件添加到您的项目中，并将其导入`#import "Appirater.h"`您要显示此费率警报的位置。

*   把这段代码放进去：-（也在[https://github.com/arashpayan/appirater](https://github.com/arashpayan/appirater)中提到如何暗示）

    ```
     [Appirater setAppId:@"111111111"];         //yourApp id
        [Appirater setDaysUntilPrompt:1];
        [Appirater setUsesUntilPrompt:5];
        [Appirater setTimeBeforeReminding:1];
        [Appirater setDebug:YES];             //please while you upload app please setDebug `YES` to `NO` becouse its only for developer testing .
        [Appirater appLaunched:YES]; 
    ```

希望您通过我的完整描述得到您的解决方案。享受编码:)

**编辑**

您可以使用像 Bellow 这样的按钮单击操作来显示它：-

例如，将您的 Button 操作放入exampleviewcontroller.m **，**然后您需要导入**exampleviewcontroller.m**。`#import "Appirater.h"`

 **```
-(IBAction)yourBtnAction
{
            [Appirater setAppId:@"111111111"];         //yourApp id
            [Appirater setDaysUntilPrompt:1];
            [Appirater setUsesUntilPrompt:5];
            [Appirater setTimeBeforeReminding:1];
            [Appirater setDebug:YES];             //please while you upload app please setDebug `YES` to `NO` becouse its only for developer testing .
            [Appirater appLaunched:YES];

} 
```**

# mysql - SQL 中联接查询中的 COUNT 个输出行

> ID：16154445
> 
> 赞同：0
> 
> 时间：2013-04-22T18:48:03.457
> 
> 标签：mysql, join, count

我有两张桌子：

```
programmes[id,name,..]
notes[id,note,id_prgm,..] 
```

我实际上有一个要求了解有关 prgm 和相关注释的一些信息：

```
SELECT p.id, p.name, ...
FROM programmes p
    LEFT OUTER JOIN notes n
    ON (n.id_prgm=p.id AND ...)
WHERE ...
GROUP BY p.id
ORDER BY ...
LIMIT 20 
```

它工作得很好，但现在我想知道这个查询可以给我多少行（没有限制）所以我​​尝试输入一个 COUNT(p.id)，但它给了我每个程序的注释数。而不是全部的程序。

那么谁可以编辑这个查询来知道呢？

（带有 php 的 mysql）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:59:46.763

和你可以在使用查询`php`时使用你只需要在你的查询执行后运行将返回所有没有找到的行`mysql``SQL_CALC_FOUND_ROWS``limit``SELECT FOUND_ROWS()`

```
$query = 'SELECT SQL_CALC_FOUND_ROWS  p.id, p.name, ...
FROM programmes p
LEFT OUTER JOIN notes n
ON (n.id_prgm=p.id AND ...)
WHERE ...
GROUP BY p.id
ORDER BY ...
LIMIT 20';
mysql_query($query);
$query = 'SELECT FOUND_ROWS()';
mysql_query($query); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:07:10.463

您可以让 PHP 为您计算行数。

这是我的做法：

```
$sql = "<your-query>";
$resource = mysql_query($sql);

if (! $resource = mysql_query($sql) ){
    echo "Error reading from table $table";
    die;
}

if (! $num = mysql_num_rows($resource ) ){
    echo "No records found in $table";
}
else {
    echo "$num rows found";
    while($row = mysql_fetch_assoc($resource)){
        //...
        // other stuff you want to do
    }
} 
```

注意：我使用`mysql_`函数，但在`mysqli_`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T18:55:05.093

```
SELECT p.id, p.name, ...
FROM programmes p
    LEFT OUTER JOIN notes n
    ON (n.id_prgm=p.id AND ...)
WHERE ...
GROUP BY p.id WITH ROLLUP 
```

您将获得每个程序的计数，然后是 NULL、TOTAL COUNT 行。此外，请注意以下事项：

> 使用 ROLLUP 时，也不能使用 ORDER BY 子句对结果进行排序。换句话说，ROLLUP 和 ORDER BY 是互斥的。但是，您仍然可以控制排序顺序。MySQL 中的 GROUP BY 对结果进行排序，您可以对 GROUP BY 列表中命名的列使用显式 ASC 和 DESC 关键字来指定各个列的排序顺序。（ROLLUP 添加的更高级别的汇总行仍然出现在计算它们的行之后，无论排序顺序如何。）

如果您希望在每行中显示总计数，请通过以下方式删除组：

```
SELECT p.id, p.name, COUNT(*)
FROM programmes p
    LEFT OUTER JOIN notes n
    ON (n.id_prgm=p.id AND ...)
WHERE ...
ORDER BY ... 
```

如果您希望为每条记录显示计数但保留分组依据，请执行以下操作：

```
SELECT t.*, COUNT(*) FROM (
    SELECT p.id, p.name, ...
    FROM programmes p
        LEFT OUTER JOIN notes n
        ON (n.id_prgm=p.id AND ...)
    WHERE ...
    GROUP BY ...
    ORDER BY ...
) t 
```

但是，子查询中不支持 limit 子句，您必须找到其他内容。

* * *

我认为您想要区分，而不是 GROUP BY。这不是一回事，不应混淆。有关更多信息，请参阅[我](https://stackoverflow.com/a/11416345/1291428)对此问题的回答。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T18:55:12.450

您可以进行一个查询来计算查询的行数（这将是一个子查询）：

```
select count(*)
from (select p.id, ... from ... ) 
```

当然，您可以跳过聚合函数和 group by 以使子查询更快，只需添加`distinct`您的子查询：

```
select count(*)
from (select distinct p.id, ... from ... ) 
```

希望这可以帮助你

# vb.net - 仅在 Visual Basic 中的文本框中输入数值

> ID：16154449
> 
> 赞同：0
> 
> 时间：2013-04-22T18:48:27.160
> 
> 标签：vb.net

我正在尝试设置一个表格来接受电话号码，但我不确定如何验证它，所以它只会采用 11 位数字的数值。

到目前为止，我一直在努力确保文本框中有内容

```
 'Validate data for Telephone Number
 If txtTelephoneNumber.Text = "" Then
 txtTelephoneNumber.Focus()
 MessageBox.Show("You must enter a Telephone Number.", "Data Entry Error", MessageBoxButtons.OK, MessageBoxIcon.Information) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T18:49:40.583

I'll imply you are using Windows Forms.
Write this as your TextBox's Key Pressed event.

```
Private Sub myTxtBox_KeyPress(ByVal sender As System.Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles myTxtBox.KeyPress
If txtTelephoneNumber.Text.Length > 11 Then
   e.Handled= True
   return
End If
If Asc(e.KeyChar) <> 8 Then
    If Asc(e.KeyChar) < 48 Or Asc(e.KeyChar) > 57 Then
          e.Handled = True
    End If
End If
End Sub 
```

This *should* (did not have time to test it) keep the user from inputing anything that is not a number. It should prevent him from inputting more than 11 numbers too.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-29T05:02:05.457

在你的`textbox` `keydown`事件中。使用以下内容：

```
If Not IsNumeric(Chr(e.KeyCode)) Then
    e.SuppressKeyPress = True
End If 
```

如果您想允许其他字符，您可以这样做：

```
If Not IsNumeric(Chr(e.KeyCode)) And Not e.KeyCode = 8 And Not e.KeyCode = 46 Then
    e.SuppressKeyPress = True
End If

'(8 = backspace key and 46 = Delete key) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-02T16:52:35.263

你可以使用 lostfocus 事件，在这种情况下你可以这样写：

```
if not isnumeric(textbox1.text) then
   textbox1.gotfocus   'this part is to validate only numbers in the texbox and not let
                        ' him go from the texbox
endif 
```

并且您应该仅用 11 个字符定义文本框的最大长度

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T20:16:04.230

把它放在 TextBox 的 KeyPress 事件中

```
 'makes sure that only numbers and the backspace are allowed in the fields.
    Dim allowedChars As String = "0123456789" & vbBack

    'get a reference to the text box that fired this event
    Dim tText As TextBox
    tText = CType(sender, TextBox)

    If allowedChars.IndexOf(e.KeyChar) = -1 Then
        ' Invalid Character
        e.Handled = True
    End If

    if tText.Text.Length >= 11 then
        e.Handled = True
    End If 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T18:51:26.007

你可以试试

```
If txtTelephoneNumber.Text = "" Or Not IsNumeric(txtTelephoneNumber.Text) Or txtTelephoneNumber.Text.Length <> 11 Then
    txtTelephoneNumber.Focus()
    MessageBox.Show("You must enter a Telephone Number.", "Data Entry Error",      MessageBoxButtons.OK, MessageBoxIcon.Information) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T05:24:46.393

我将它用于按键事件

```
If e.KeyChar < CStr(0) Or e.KeyChar > CStr(9) Then e.Handled = True 
```

实际上，这看起来与我记得使用的不同，但它有效。尽管您也需要允许退格。

或者我想更短的会是

```
If Not IsNumeric(e.KeyChar) Then e.Handled = True 
```

还有按键事件。

您可以使用 MaxLength 设置文本框的最大长度

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-05T21:51:34.217

将最大长度设置为 12 将其放在 text1 的按键中，它将使用破折号和仅数字来格式化

```
 If Len(Text1.Text) = 3 Or Len(Text1.Text) = 7 Then
        Text1.Text = Text1.Text & "-"
        Text1.SelStart = Len(Text1.Text)
    End If
    If KeyAscii <> 127 And KeyAscii <> 8 And KeyAscii <> 13 Then
        If IsNumeric(Chr(KeyAscii)) = False Then
            KeyAscii = 0
        End If
    ElseIf KeyAscii = 8 Then
        If Right(Text1.Text, 1) = "-" Then
            Text1.Text = Left(Text1.Text, Len(Text1.Text) - 1)
            Text1.SelStart = Len(Text1.Text)
        End If
    End If 
```

如果您只想要数字文本框，请在按键中使用以下内容

```
 If KeyAscii <> 127 And KeyAscii <> 8 And KeyAscii <> 13 Then
        If IsNumeric(Chr(KeyAscii)) = False Then
            KeyAscii = 0
        End If
    End If 
```

# cocoa - NSLeftTextAlignment，字符串末尾有空格

> ID：16154455
> 
> 赞同：0
> 
> 时间：2013-04-22T18:48:51.523
> 
> 标签：cocoa, nstextview

如果我为我的 NSTextView 设置 NSCenterTextAlignment 我在字符串末尾的空格会神奇地消失

例如我有字符串

```
@"while      " 
```

如果我用 NSRightTextAlignment 显示它，它显示得很好

```
|white      | 
```

但是使用 NSLeftTextAlignment 所有空格都被删掉了

```
|white| 
```

我怎样才能得到这样的结果

```
|      white| 
```

选项卡不是一个选项

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:18:33.180

只是一个猜测：听起来好像您正在尝试通过使用空格填充其中一些来左对齐居中的项目。如果您必须这样做，您可以使用不间断空格（UTF-16 0x00A0，键入选项空间）。高温高压

# gradle - 如何使用 gradle 复制所有源 jar

> ID：16154458
> 
> 赞同：9
> 
> 时间：2013-04-22T18:49:00.950
> 
> 标签：gradle

我们有一个旧的 playframework 1.2.x 版本，我们将所有 jar 复制到 project/lib 以便 playframework 可以使用它们。我们也希望复制所有源 jar，以便在运行 eclipsify 时，我们可以查看所有第三方源。有没有办法用gradle做到这一点？

我的意思是当我运行 gradle eclipse 时下载的所有源 jar，因为我看到它们下载缓存位置。我们在一个项目上也有 gradle eclipse 为我们调用 play eclipsify，所以我们可以 100% 只使用 gradle。

谢谢，院长

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T21:51:39.290

这并不像预期的那样直截了当。以下代码段将 java 项目的所有依赖项（运行时 + 编译）的源 jar 复制到特定文件夹中：

```
 task copySourceJars(type:Copy){
        def deps = configurations.runtime.incoming.dependencies.collect{ dependency ->
            dependency.artifact { artifact ->
                    artifact.name = dependency.name
                    artifact.type = 'source'
                    artifact.extension = 'jar'
                    artifact.classifier = 'sources'
                }
            dependency
        }
        from(configurations.detachedConfiguration(deps as Dependency[]).resolvedConfiguration.lenientConfiguration.getFiles(Specs.SATISFIES_ALL))
        into('sourceLibs')
    } 
```

我们在这里使用 lenientConfiguration 的原因是，如果源工件无法解析，我们不希望失败。可能有更优雅的方式，但我还没有深入研究。

希望能帮助到你，

勒内

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-07-16T10:26:44.860

Rene 答案将下载直接依赖项的源 jar，而不是所有传递依赖项的源 jar。

这是一个可以解决问题的任务：

```
task copySourceJars( type: Copy ) {
  def sources = configurations.runtime.resolvedConfiguration.resolvedArtifacts.collect { artifact ->
    project.dependencies.create( [
      group: artifact.moduleVersion.id.group,
      name: artifact.moduleVersion.id.name,
      version: artifact.moduleVersion.id.version,
      classifier: 'sources'
    ] )
  }
  from configurations.detachedConfiguration( sources as Dependency[] )
    .resolvedConfiguration.lenientConfiguration.getFiles( Specs.SATISFIES_ALL )
  into file( 'some-directory/' )
} 
```

然后可以通过`classifier`将`javadoc`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-20T08:10:08.000

这里用 Kotlin DSL 翻译的 eskatos 解决方案：

```
tasks {
    "copySourceJars"(Copy::class) {
        val sources = configurations.runtime.resolvedConfiguration.resolvedArtifacts.map {
            with(it.moduleVersion.id) { 
                dependencies.create(group, name, version, classifier = "sources") 
            }
        }
        from(
            configurations.detachedConfiguration(*sources.toTypedArray())
                .resolvedConfiguration.lenientConfiguration.getFiles(Specs.SATISFIES_ALL)
        )
        into(File("some-directory"))
    }
} 
```

# iphone - iphone将注释传递给数组

> ID：16154460
> 
> 赞同：1
> 
> 时间：2013-04-22T18:49:14.850
> 
> 标签：iphone, annotations

我正在尝试将自定义注释传递给 NSMutableArra 以使用它来填充表格视图。代码是：

在 .h 我定义了一个 `NSMutableArray *mapViewAnnotations;`

然后在.m

```
- (void)plotBarPosition:(NSString *)datos{

/*
code that extract data froma a json string
*/
    MyLocation *nota =[[MyLocation alloc] initWithName:barNamePlusDistance coordinate:coordinate horario:horario oferta:offerta more:info];        
                NSLog(@"nota    :%@",nota);

            [_mapView addAnnotation:nota];   //annotation are  plot on  the map

            [mapViewAnnotations addObject:nota];   

            NSLog(@"mapViewAnnotations:%@",mapViewAnnotations);  //NSlog return null
    } 
```

mapViewAnnotations 结果为空。Perarps 无法将 MyLocation 对象复制到 mutablearray 中？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:06:16.050

首先在 viewDidLoad 或其他方法中调用它来初始化数组。

```
_mapViewAnnotations = [NSMutableArray array]; 
```

# asp.net - ASP.net 中的日期和时间选择器

> ID：16154466
> 
> 赞同：0
> 
> 时间：2013-04-22T18:49:25.063
> 
> 标签：asp.net, vb.net, datetime, calendar, timepicker

**我知道这个问题已经有好几次了，但我找不到有效或合适的答案。**

我想要一个包含时间选择器的日期选择器。我不想要任何花哨的装饰等，只是有用的东西。最好是一个控件，我可以将其拖入工具箱中`VS`，在顶部注册并使用。过去几天我一直在玩很多版本，但我无法使用。它们通常对我来说似乎包含太多文件或一些愚蠢的东西。我现在正在做的一个项目取决于这个愚蠢的事情，所以欢迎任何建议。我以前设法获得一个日历控件并在文本框上进行一些验证以选择时间。但是，我不能将这两个值都作为日期时间字段输入到我的数据库中，因为当我尝试使用“选定日期”来获取时间时，它自然会说文本框不能是“选定日期”的成员日期”属性。

因为我有一个日历控件来选择日期和一个经过验证的文本框来输入我尝试使用以下代码的时间。

```
Protected Sub Button1_Click(sender As Object, e As EventArgs)
    Dim time As String() = txtTime.SelectedDate.ToString().Trim().Split(" "C)
    Dim [date] As String() = cldDate.SelectedDate.ToString().Trim().Split(" "C)
    Dim datetime__1 As String = [date](0) & " " & time(1) & time(2)
    Dim DateTimeValue As DateTime = DateTime.Parse(datetime__1)
    Response.Write(DateTimeValue.ToString())
    ' Update database with DateTimeValue.  
End Sub 
```

这里的代码`txtTime.SelectedDate.ToString()`有问题。它说这`SelectedDate`不是文本框的支持成员。这是我遇到的代码。我对编码很陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:50:02.887

您可以创建 DateTime 结构的新实例。DateTimePicker.SelectedValue 返回一个 Nullable(Of DateTime)，因此您可以使用它的值来创建一个新的 DateTime（以及来自您的文本框的值）。

例如：

```
Dim myDateTime As New DateTime(cldDate.SelectedDate.Year, cldDate.SelectedDate.Month, cldDate.SelectedDate.Day, HourValue, MinuteValue, 0) 
```

只需将`HourValue`and替换`MinuteValue`为文本框中的值即可。请注意，您应该将这些转换为整数。

注意末尾的 0 代表秒。

这应该很好地保存到数据库中。

有关 DateTime 的更多信息，请参见[此处](http://msdn.microsoft.com/en-gb/library/system.datetime%28v=vs.95%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:13:36.023

如果 jQuery 是一个选项，我会[看看这个插件](http://trentrichardson.com/examples/timepicker/)

干净且易于实施

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T20:03:16.493

您没有提到商业产品是否适合您。

我们在我们的项目中使用Telerik 的[RadDateTimePicker](http://www.telerik.com)（当然还有其他商业产品）。[有关日期时间选择器控件的演示，请参阅此页面](http://demos.telerik.com/aspnet-ajax/calendar/examples/datetimepicker/accessibility/defaultcs.aspx)。

# php - 提交没有输入字段的表单。

> ID：16154469
> 
> 赞同：1
> 
> 时间：2013-04-22T18:49:46.913
> 
> 标签：php, forms

我正在尝试提交`form`（或请求）来完成一些任务。除了按钮`form`之外没有输入字段。`submit`

我知道这有点奇怪，但我想提交表单并仅使用 php 获取数据。

那可能吗？

我的代码

```
if($_GET['submitImage']){

   //do the stff I want......

}

<form id='formSubmitImage' name='submitImage' method='get' action='cm_ct_generate_preview.html'>
<?php
        echo "<table>";
          echo "<th>ID</th>";
          echo "<th>Type</th>";
          echo "<th>Name</th>";
          echo "<th>Image</th>";
          foreach($tests as $test){
              echo '<tr>';
                  echo '<td>';
                  echo $test['ID'];
                  echo '</td>';

                  echo '<td>';
                  echo $test['Type'];
                  echo '</td>';

                  echo '<td>';
                  echo $test['Name'];
                  echo '</td>';

                  echo '<td>';
                  echo $test['FileName'];
                  echo '</td>';
              echo '</tr>';
          }
          echo "</table>";
          echo "<input type='submit' value='Set Images'></input><br>";
?>
</form> 
```

有没有其他方法可以做到这一点？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:51:41.307

代替：

```
echo "<input type='submit' value='Set Images'></input><br>"; 
```

为什么不：

```
echo "<button type='submit'>Set Images</button><br>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T19:10:38.197

您可以在 URL 的末尾添加一个`GET`参数`action`（在您的情况下，它将类似于`cm_ct_generate_preview.html?submitImage=1`，或者您可以在表单中添加一个隐藏的输入字段并检查是否已提交，例如：

```
<input type="hidden" name="submitImage" value="1" /> 
```

由于您的表单方法已经设置为`GET`它应该作为`GET`参数发送。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T18:54:37.073

如果用户需要激活它，让他们只需按下提交按钮。但是，如果您想自动执行此操作，则需要使用一点 javascript。要使用它发送数据，您可以像这样指定您的输入：

```
echo '<input type="hidden" name="id" value="'.$test['ID'].'">'; 
```

输入字段不会出现，但数据将像输入字段一样发送。

# android - 在android中显示特殊字符

> ID：16154471
> 
> 赞同：0
> 
> 时间：2013-04-22T18:49:54.957
> 
> 标签：android

我正在一个应用程序中工作，我必须显示以下字符

`Chanéac`

`YÃ»ka`

但是当我调用这个网络服务时，这个字符被转换成其他一些字符，比如

`Chanéac`转换成`Chan&eacute;ac`

`YÃ»ka` 转换成`y&Atlide;&raquo;ka`

请给我一些解决方案谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:54:24.390

将 UTF-8 格式与您用于从 Android 应用程序中的 Web 服务读取的任何内容一起使用，例如，如果您使用的是 BufferReader：

```
BufferedReader reader = new BufferedReader(
  new InputStreamReader(inputStream, "UTF-8"), 8); 
```

编辑：

看起来你需要的是android 中的[HTML 实体解码](http://developer.android.com/reference/android/text/Html.html)，试试这样的：

```
Html.fromHtml(string); 
```

# actionscript-3 - Disable a function temporarily as3

> ID：16154472
> 
> 赞同：0
> 
> 时间：2013-04-22T18:49:55.507
> 
> 标签：actionscript-3, flash-cs5

On my screen are tiles generated from an array. I have a mouse roll over function called rollover, that adds a movieclip that highlights the edge of the tiles that I am currently on. I want it so that once I click a tile, the roll over function doesn't work until another button is clicked. I tried putting removeEventListener for the roll over function in the click function, doesn't seem to work. How would I go about this if possible?

I will post more information if needed.

```
function rollover(event:MouseEvent)
      {
        var tileHover = true;
        if (tileHover == true){
                (event.currentTarget as Tile).outline.gotoAndStop("hover");
                }
        if(tileHover == false){
                (event.currentTarget as Tile).outline.gotoAndStop("blank");
                }
      } 
```

Below is the mouseclick function

```
function mouseclick(event:MouseEvent)
      {
        tileHover = false;
        if (tileHover == false){
            tile_MC.removeEventListener(MouseEvent.ROLL_OVER, rollover)
                            }
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:25:11.273

我认为你需要有 (event.currentTarget as Tile).outline.gotoAndStop("blank"); 在鼠标点击中。

另外，我假设 tilehover 是一些用于跟踪悬停状态的全局变量。在处理程序中明确设置它的真/假只是为了调试目的！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:01:53.817

见下文。您设置一个属性并立即检查该属性的值是什么。它将*永远*为真，因为您只是将其设置为真。

```
var tileHover = true;
if (tileHover == true){
   (event.currentTarget as Tile).outline.gotoAndStop("hover");
} 
```

另外，不要忘记您的数据类型。

# matrix - 在一行中将 PHP 中的两个数组行求和

> ID：16154474
> 
> 赞同：0
> 
> 时间：2013-04-22T18:49:58.477
> 
> 标签：matrix, sum, rows, array-map

我记得有一次我遇到了一些网站，其中使用 array_sum 和 array_map 函数在一行上执行了 2 个数组项的总和。有谁知道这是怎么做到的吗？

```
$a=array(1,2,3,4,5);
$b=array(0,1,0,1,0);
$result=compoundedSinlgeLineFunction($a,$b);
$result=array(1,3,3,5,5); //this is what we get 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:24:01.800

我发现我可能还需要总结 3 个数字，所以我这样做了，但它与上面的解决方案基本相同

```
$z = array_map('sum', $z, $y, $x);

function sum($x, $y, $z=NULL){
  if($z) return $x + $y + $z;
  else return $x + $y;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-23T02:59:04.043

```
$result = array_map("array_sum", $a, $b); 
```

# asp.net-mvc - 通过文件系统将 MVC 3 应用程序发布到 IIS 6。文件仍然是指开发环境

> ID：16154477
> 
> 赞同：0
> 
> 时间：2013-04-22T18:50:18.330
> 
> 标签：asp.net-mvc

我正在使用 publish 命令通过文件系统/网络共享将 mvc3 项目发布到 qa 环境。当我尝试运行程序时，出现以下错误：

```
[ArgumentOutOfRangeException: Length cannot be less than zero. Parameter name: length]
 System.String.InternalSubStringWithChecks(Int32 startIndex, Int32 length, Boolean fAlwaysCopy) +9384283
 System.String.Substring(Int32 startIndex, Int32 length) +11
 MyProject.Controllers.LoginController.validateUser() in **C:\DEVPATH\Controllers\LoginController.cs**:42
 MyProject.Controllers.LoginController.Index() in **C:\DEVPATH\Controllers\LoginController.cs**:15 
```

这是我在开发中的路径，我搜索了硬编码路径，但它们什么也没返回。

部署包所在的路径是 D:\QAPATH... 但是当出现错误时，它会显示开发路径 C:\DEVPATH。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:18:07.250

发布没有问题，您的问题在于`LoginController.validateUser()`方法：它将负子字符串长度值传递给`String.Substring`函数。

# c++ - 在对类方法进行指针部分特化时获得“非法使用显式模板参数”

> ID：16154480
> 
> 赞同：15
> 
> 时间：2013-04-22T18:50:23.460
> 
> 标签：c++, templates, syntax, template-specialization

您好，我在部分专业化方面遇到问题。我想要做的是有一个具有模板成员函数的类，该函数将给定值解释为用户指定的值。例如，类名是`Value`，这是我想做的一个片段：

```
int *ptr1 = new int;
*ptr1 = 10;
Value val1 = ptr1;
int *ptr2 = val1.getValue<int*>();

Value val2 = 1;
int testVal = val2.getValue<int>(); 
```

这是我实现此类的方式：

```
struct Value {

    Value(void *p) : val1(p){}
    Value(int i) : val2(i){}

    template<typename T>
    T getValue();

    void *val1;
    int val2;
};

template<typename T>
T*  Value::getValue<T*>() {
    return reinterpret_cast<T*>(val1);
}

template<>
int Value::getValue<int>() {
    return val2;
} 
```

当我编译时，我收到以下错误：

> 错误 C2768：“Value::getValue”：非法使用显式模板参数

基本上它抱怨代码的指针模板部分：

```
template<typename T>
T* Value::getValue<T*>() {
    return reinterpret_cast<T*>(val1);
} 
```

我知道这个问题可以用一个简单的联合来实现，但是这段代码是一个更大代码的精简版本。

有人知道问题可能是什么吗？我想做的是在使用指针时分开一个代码，在不使用指针时分开另一个代码。我真的很困惑，我总是调查而不是询问，但我没有找到任何关于它的好信息。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-22T19:05:54.440

函数模板不能部分特化，但大多数时候，您可以使用委托到类的技巧。在您的示例中，它将是这样的：

```
struct Value {
  template<typename T>
  T getValue() {
    return Impl_getValue<T>::call(*this);
  }
};

template <typename T>
struct Impl_getValue
{
  static T call(Value &v) {
    //primary template implementation
  }
};

template <typename T>
struct Impl_getValue<T*>
{
  static T* call(Value &v) {
    return reinterpret_cast<T*>(v.val1);
  }
}; 
```

# durandal - 使用 keepScrollPosition 和 navigateBack 进行转换

> ID：16154482
> 
> 赞同：2
> 
> 时间：2013-04-22T18:50:37.910
> 
> 标签：durandal

我们将 Durandal 用于我们的 SPA 应用程序，在我看来，这是一个常见的用例。我们有两个页面：一个页面是实体列表（带有过滤器、排序、虚拟滚动），另一个是实体的详细预览。因此，用户在列表页面上并设置了一个过滤器，结果列表就出来了。向下滚动一点后，用户会注意到一个他/她想查看详细信息的实体。因此，单击适当的链接用户将导航到详细信息预览页面。

在预览页面上的“工作完成”后，用户单击返回按钮（在应用程序本身或浏览器中），他/她回到列表页面。但是，默认的“入口”转换会将页面滚动到顶部，而不是滚动到列表中用户按下预览的位置。因此，为了“阅读”列表，用户必须在按下预览之前向下滚动他/她所在的位置。

所以我开始创建新的过渡，它将为某些页面（如列表搜索页面）保持滚动位置，而对于其他页面（如预览或编辑页面）在过渡完成时滚动到顶部。这很容易做到，然而，当我注意到当我点击navigateBack'按钮'时预览页面上有奇怪的行为时，我感到很惊讶。我已经长话短说，经过调查，我发现 windows.history.back 更早完成，然后进行转换，这导致预览页面在按下后退按钮时自动向下滚动到上一个（列表）页面的位置。这种滚动对 UI 产生了非常不愉快的影响，更不用说这对我的过渡来说是“彻底的灾难”。

有什么想法或建议在这种情况下我能做什么？

这是转换的代码。就我遇到这个问题而言，它只是一个尚未完成的工作副本。

```
define(['../system'], function (system) {
var fadeOutDuration = 100;

var scrollPositions = new Array();

var getScrollObjectFor = function (node) {
    var elemObjs = scrollPositions.filter(function (ele) {
        return ele.element === node;
    });
    if (elemObjs.length > 0)
        return elemObjs[0];
    else
        return null;
};

var addScrollPositionFor = function (node) {
    var elemObj = getScrollObjectFor(node);
    if (elemObj) {
        elemObj.scrollPosition = $(document).scrollTop();
    }
    else {
        scrollPositions.push({element: node, scrollPosition: $(document).scrollTop()});
    }
};

var scrollTransition = function (parent, newChild, settings) {
    return system.defer(function (dfd) {
        function endTransition() {
            dfd.resolve();
        }

        function scrollIfNeeded() {
            var elemObj = getScrollObjectFor(newChild);
            if (elemObj)
            {
                $(document).scrollTop(elemObj.scrollPosition);
            }
            else {
                $(document).scrollTop(0);
            }
        }

        if (!newChild) {

            if (settings.activeView) {
                addScrollPositionFor(settings.activeView);
                $(settings.activeView).fadeOut(fadeOutDuration, function () {
                    if (!settings.cacheViews) {
                        ko.virtualElements.emptyNode(parent);
                    }
                    endTransition();
                });
            } else {
                if (!settings.cacheViews) {
                    ko.virtualElements.emptyNode(parent);
                }
                endTransition();
            }
        } else {
            var $previousView = $(settings.activeView);
            var duration = settings.duration || 500;
            var fadeOnly = !!settings.fadeOnly;

            function startTransition() {

                if (settings.cacheViews) {
                    if (settings.composingNewView) {
                        ko.virtualElements.prepend(parent, newChild);
                    }
                } else {
                    ko.virtualElements.emptyNode(parent);
                    ko.virtualElements.prepend(parent, newChild);
                }

                var startValues = {
                    marginLeft: fadeOnly ? '0' : '20px',
                    marginRight: fadeOnly ? '0' : '-20px',
                    opacity: 0,
                    display: 'block'
                };

                var endValues = {
                    marginRight: 0,
                    marginLeft: 0,
                    opacity: 1
                };

                $(newChild).css(startValues);
                var animateOptions = {
                    duration: duration, 
                    easing : 'swing', 
                    complete: endTransition,
                    done: scrollIfNeeded
                };

                $(newChild).animate(endValues, animateOptions);
            }

            if ($previousView.length) {
                addScrollPositionFor(settings.activeView);
                $previousView.fadeOut(fadeOutDuration, startTransition);
            } else {
                startTransition();
            }
        }
    }).promise();
};

return scrollTransition; 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-22T02:24:26.020

更简单的方法是在模块停用时存储滚动位置并在 viewAttached 上恢复滚动。

您可以将位置存储在一些全局应用程序变量中：

app.scrollPositions = app.scrollPositions || {};
app.scrollPositions[system.getModuleId(this)] = theCurrentScrollPosition;

# php - 用于创建表单元素的 PHP 函数。好的做法？

> ID：16154483
> 
> 赞同：1
> 
> 时间：2013-04-22T18:50:42.793
> 
> 标签：php, html

我不是一个使用插件或任何东西的人，所以我现在试图避免像 Zend 这样的事情，但我想看看用 php 函数创建“模板”是否是一种好习惯？我现在忘记了很多 PHP，一旦我得到他的回答，我就会重新开始，但我在想这样的事情：

PHP

```
function input($type, $label, $id, $class) {
    echo "<div>";
    echo "<input type=" .$type. " class=" .$class. " id=" .$id. />";
    echo "<label for=" .$id. ">".$label."</label>";
    echo "</div>";
} 
```

HTML

```
<div class="wrapper">
    <?PHP input("text", "Username", "username", "input"); ?>
</div> 
```

当然，这段代码需要根据我的需要进行调整，但我想知道它是否被认为是好的做法？还是我应该远离做这样的事情？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T18:59:46.940

我看到评论，我希望你不会钉死我说大多数人会同意可重用性：**返回值而不是呼应它**

```
function input($type, $label, $id, $class) {
  // create the div here ...
  return $divString;
} 
```

然后根据需要处理结果...

```
<div class="wrapper">
    <?PHP echo input("text", "Username", "username", "input"); ?>
</div> 
```

或以其他方式使用它

`$formElements = input("text", "Username", "username", "input") . input("password", "Password", "password", "input");`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T19:07:06.960

我相信这是一种很好的做法，但还有一些改进需要改进。一个更好的方法是使用一个类。这样，您可以轻松配置、克隆、传递和扩展输入，并实现复杂的输入类型。

另一种方法是接受一个包含元素的每个 HTML 属性的键值数组，并以给定的元素类型输出它们。

```
myElement = element(elementType, attributes); //Attributes: type=input, value=myvalue... 
```

第二个重要的改进是正确地转义每个参数内部的内容，以避免 XSS 注入。

所有这些通常都被大多数框架所覆盖，并且可以轻松复制，而无需在项目中包含整个框架。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T20:38:16.863

这就是我们所说的“帮手”。所以，是的，这绝对是一个好习惯。但是所有 PHP 框架都实现了这一点。你可以试试 CakePHP ！

# c# - Visual C# 2008：不可调用成员“Microsoft.VisualBasic.Devices.Ports.SerialPortNames”不能像方法一样使用

> ID：16154484
> 
> 赞同：0
> 
> 时间：2013-04-22T18:50:46.533
> 
> 标签：c#, .net, com, serial-port, visual-c#-express-2010

有人可以帮我解决这个问题..吗？尝试调试代码时出现此错误..

```
 private void Form2_Load(object sender, System.EventArgs e)
    {
        this.Show();
        Form1.DefaultInstance.Close();
        ToolTip1.SetToolTip(ComboBox1, "Please enter a VALID phone number");
        ToolTip1.SetToolTip(ComboBox2, "Please check your COM port number before selecting. Connection could be made for outgoing cable or bluetooth port with data calling supported phone.");
        ComboBox1.SelectedIndex = 0;

        for (int i = 0; i < My.Computer.Ports.SerialPortNames.Count; i++)
        {
            ComboBox2.Items.Add(My.Computer.Ports.SerialPortNames(i));
        }

        ComboBox2.SelectedIndex = 0;
    } 
```

这发生在这一行的“ **SerialPortNames** ”：

```
ComboBox2.Items.Add(My.Computer.Ports.SerialPortNames(i)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:54:00.270

也许尝试

```
For Each sp As String In My.Computer.Ports.SerialPortNames
    ListBox1.Items.Add(sp)
Next 
```

这取自[http://msdn.microsoft.com/en-us/library/yfbcbt43(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/yfbcbt43%28v=vs.90%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:57:04.057

您可能想使用索引器 -`[]`而不是方法调用`()`

```
 for (int i = 0; i < My.Computer.Ports.SerialPortNames.Count; i++)
  {
        ComboBox2.Items.Add(My.Computer.Ports.SerialPortNames[i]);
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T18:57:29.663

您像使用方法而不是集合一样使用它（在它之后使用`(i)`）。

尝试以下两种方法之一：

```
for (int i = 0; i < My.Computer.Ports.SerialPortNames.Count; i++)
{
  ComboBox2.Items.Add(My.Computer.Ports.SerialPortNames[i]);
} 
```

或者

```
foreach(var portname in My.Computer.Ports.SerialPortNames)
{
  ComboBox2.Items.Add(portname);
} 
```

# css - 视网膜显示屏，高分辨率背景图像

> ID：16154494
> 
> 赞同：105
> 
> 时间：2013-04-22T18:51:28.000
> 
> 标签：css, responsive-design, media-queries

这听起来像是一个愚蠢的问题。

如果我将此 CSS 片段用于常规显示（`box-bg.png`200 像素乘 200 像素在哪里）；

```
.box{
    background:url('images/box-bg.png') no-repeat top left;
    width:200px;
    height:200px
} 
```

如果我使用这样的媒体查询来定位视网膜显示器（@2x 图像是高分辨率版本）；

```
@media (-webkit-min-device-pixel-ratio: 2), 
(min-resolution: 192dpi) { 

    .box{background:url('images/box-bg@2x.png') no-repeat top left;}
} 
```

我是否需要将`.box`div 的大小加倍为 400px x 400px 以匹配新的高分辨率背景图像？

* * *

## 回答 #1

> 赞同：192
> 
> 时间：2013-04-22T19:04:24.260

> 我是否需要将 .box div 的大小加倍为 400 像素乘 400 像素以匹配新的高分辨率背景图像

否，但您确实需要设置`background-size`属性以匹配原始尺寸：

```
@media (-webkit-min-device-pixel-ratio: 2), 
(min-resolution: 192dpi) { 

    .box{
        background:url('images/box-bg@2x.png') no-repeat top left;
        background-size: 200px 200px;
    }
} 
```

* * *

**编辑**

为了给这个答案添加更多内容，这是我倾向于使用的视网膜检测查询：

```
@media
only screen and (-webkit-min-device-pixel-ratio: 2),
only screen and (   min--moz-device-pixel-ratio: 2),
only screen and (     -o-min-device-pixel-ratio: 2/1),
only screen and (        min-device-pixel-ratio: 2),
only screen and (                min-resolution: 192dpi),
only screen and (                min-resolution: 2dppx) { 

} 
```

[- 资源](http://css-tricks.com/snippets/css/retina-display-media-query/)

注意。这`min--moz-device-pixel-ratio:`不是一个错字。这是 Firefox 某些版本中的一个有据可查的错误，应该这样编写以支持旧版本（Firefox 16 之前）。 [- 资源](https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Media_queries#-moz-device-pixel-ratio)

* * *

正如@LiamNewmarch 在下面的评论中提到的，您可以像这样`background-size`在您的速记`background`声明中包含：

```
.box{
    background:url('images/box-bg@2x.png') no-repeat top left / 200px 200px;
} 
```

但是，我个人不建议使用速记形式，因为 iOS <= 6 或 Android 不支持它，因此在大多数情况下都不可靠。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-07-08T18:31:48.703

这是一个解决方案，**它还包括 High(er)DPI ( [MDPI](https://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources) ) 设备*> ~160 dots per inch*，例如**很多非 iOS 设备（fe: **Google Nexus 7 2012**）：

```
.box {
    background: url( 'img/box-bg.png' ) no-repeat top left;
    width: 200px;
    height: 200px;
}
@media only screen and ( -webkit-min-device-pixel-ratio: 1.3 ),
       only screen and (    min--moz-device-pixel-ratio: 1.3 ),
       only screen and (      -o-min-device-pixel-ratio: 2.6/2 ), /* returns 1.3, see Dev.Opera */
       only screen and (         min-device-pixel-ratio: 1.3 ),
       only screen and ( min-resolution: 124.8dpi ),
       only screen and ( min-resolution: 1.3dppx ) {

       .box {
           background: url( 'img/box-bg@2x.png' ) no-repeat top left / 200px 200px;
       }

} 
```

正如@3rror404 在收到评论反馈后在他的编辑中包含的那样，Webkit/iPhone 之外还有一个世界。到目前为止，大多数解决方案都困扰着我的一件事，例如上面在[CSS-Tricks](http://css-tricks.com/snippets/css/retina-display-media-query/)中引用的源代码，那就是没有完全考虑到这一点。
原始[来源](http://www.brettjankord.com/2012/11/28/cross-browser-retinahigh-resolution-media-queries/)已经走得更远了。

例如，Nexus 7 (2012) 屏幕是一个*TVDPI 屏幕，带有一个奇怪[`device-pixel-ratio`的`1.325`](http://dpi.lv/)*. 当以正常分辨率加载图像时，它们通过插值放大，因此变得模糊。对我来说，在媒体查询中应用此规则以包括那些成功获得最佳客户反馈的设备。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-12-01T06:30:14.527

如果您打算对视网膜和非视网膜屏幕使用相同的图像，那么这里就是解决方案。假设您有一个图像，`200x200`并且在顶行有两个图标，在底行有两个图标。所以，它是四个象限。

```
.sprite-of-icons {
  background: url("../images/icons-in-four-quad-of-200by200.png") no-repeat;
  background-size: 100px 100px /* Scale it down to 50% rather using 200x200 */
}

.sp-logo-1 { background-position: 0 0; }

/* Reduce positioning of the icons down to 50% rather using -50px */
.sp-logo-2 { background-position: -25px 0 }
.sp-logo-3 { background-position: 0 -25px }
.sp-logo-3 { background-position: -25px -25px } 
```

将精灵图标缩放和定位到实际值的 50%，可以得到预期的结果。

* * *

[Ryan Benhase](https://ryanbenhase.com/easily-implement-2x-retina-background-images/)的另一个方便的 SCSS mixin 解决方案。

```
/****************************
 HIGH PPI DISPLAY BACKGROUNDS
*****************************/

@mixin background-2x($path, $ext: "png", $w: auto, $h: auto, $pos: left top, $repeat: no-repeat) {

  $at1x_path: "#{$path}.#{$ext}";
  $at2x_path: "#{$path}@2x.#{$ext}";

  background-image: url("#{$at1x_path}");
  background-size: $w $h;
  background-position: $pos;
  background-repeat: $repeat;

  @media all and (-webkit-min-device-pixel-ratio : 1.5),
  all and (-o-min-device-pixel-ratio: 3/2),
  all and (min--moz-device-pixel-ratio: 1.5),
  all and (min-device-pixel-ratio: 1.5) {
    background-image: url("#{$at2x_path}"); 
  }
}

div.background {
  @include background-2x( 'path/to/image', 'jpg', 100px, 100px, center center, repeat-x );
} 
```

有关上述 mixin 的更多信息，请[阅读此处](https://ryanbenhase.com/easily-implement-2x-retina-background-images/)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-10-22T15:15:59.157

您可以使用图像集（）。此 CSS 功能目前[支持有限](https://caniuse.com/css-image-set)，但确实有效。[MND web docs 上有关它的更多信息](https://developer.mozilla.org/en-US/docs/Web/CSS/image/image-set())，但这里有一个它是如何工作的示例：

```
.box {
  background-image: -webkit-image-set(
    url('images/box-bg.png') 1x,
    url('images/box-bg@2x.png') 2x); /* Temporary fallback for Chrome and Safari browsers until they support 'image-set()' better */
  background-image: image-set(
    url('images/box-bg.png') 1x,
    url('images/box-bg@2x.png') 2x);
} 
```

“1x”和“2x”是这里的分辨率。'2x' 用于视网膜显示器。

# ios - 带有可可豆荚的 GHUnit

> ID：16154495
> 
> 赞同：0
> 
> 时间：2013-04-22T18:51:28.093
> 
> 标签：ios, objective-c, cocoapods, gh-unit

我正在使用 cocoa **pods**管理项目依赖项。我在我的项目中添加了`GHUnit`目标，它工作正常。

我在将 pod **（可可豆）**文件导入`GHUnit`目标时遇到问题。

例如，`AFNetwork`添加到我的 pod 中，如何将`AFJSONRequestOperation`header 导入`GHUnit`测试类？（尝试在构建阶段手动添加文件时，我会发现这些文件）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:06:11.613

看看我的回答[here](https://stackoverflow.com/a/15398732/902968)。这个想法是您必须将您的 pod 与您的应用程序的两个目标链接起来，[此处](http://docs.cocoapods.org/podfile.html#link_with)`link_with`记录了这些目标。

例子：

```
link_with ['MainTarget', 'TestTarget'] 
```

这会将您的所有 pod 与两者链接，以便您可以在测试中使用其他 pod。

# python - 将字典键：值插入到列表中特定索引处的现有字典中

> ID：16154500
> 
> 赞同：0
> 
> 时间：2013-04-22T18:52:04.053
> 
> 标签：python

我需要一些帮助来将字典（称为 umDict）中的键：值对插入到列表中特定位置的列表中已经存在的字典中。

我已经有一个列表（称为 rLu），里面有 943 个空字典。我还有一个名为 lineList 的列表，它解析了一个字符串并包含三个元素。最后，我在 umDict 临时字典中有一个键：值对，需要将其插入到 rLu 列表中的字典中
`rLu[int(lineList[0])-1]`

键值对的组成如下：
`umDict[lineList[1]] = lineList[2]`

为了得到我想要的结果，我试过：
`umDict[lineList[1]] = lineList[2]`
`rLu[int(lineList[0])-1] = umDict`

但它会在现有字典中插入一个全新的字典，而不仅仅是 key:value。如何让它仅将键：值对插入现有字典？

我期望得到的是这样的：
`rLu = [{'1':'a','2':'b'}, {'3':'c', '4':'d'}, {'5':'e', '6':'f'}]`
这些字典的长度可以是任意的，而不仅仅是我的示例中的两个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T18:53:55.983

也许你想要`rLu[int(lineList[0])-1].update(umDict)`？从您的描述中理解您的数据结构有点困难。如果我理解正确，您没有“键值对”，您有一个单键字典。

# java - 将参数的可空性应用于返回值

> ID：16154505
> 
> 赞同：0
> 
> 时间：2013-04-22T18:52:25.713
> 
> 标签：java, nullable, findbugs

我有一个声明为接受和返回的方法`null`。

```
@CheckForNull
public static String truncate(@CheckForNull text, int maxLength) { ... } 
```

`null`仅当`text`is时才返回`null`。当我从标记的方法传入返回值时`@Nonnull`，FindBugs 无法知道它`truncate`不会返回`null`，因此如果我将它分配给标记的字段，则会发出警告`@Nonnull`。

```
@Nonnull
public static String trimmedOrEmptyIfNull(@CheckForNull text) { ... }
...
@Nonnull
private String message;
...
message = truncate(trimmedOrEmptyIfNull(e.getMessage()), 100); 
```

这里的警告是误报，因为`trimmedOrEmptyIfNull`被标记为`@Nonnull`，因此`truncate`将返回一个非空值，并且可以推断为`@Nonnull`它本身。

有没有办法让 FindBugs 意识到返回值的可空性和参数之间的这种联系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T07:18:59.020

我还没有想出解决办法。实现它最困难的部分是方法返回值继承的*不是*参数的可空性注释，`text`而是传递给它的*参数值*，在这种情况下是`trimmedOrEmptyIfNull`. 这里有一些想法：

*   添加新的参数注释以代替现有注释。这并不清楚它是否适用于方法的返回值，也不是很容易检查方法的主体。您是否假设参数已标记`@CheckForNull`？

    ```
    public static String truncate(@InheritNullness text, int maxLength) { ... } 
    ```

*   将参数添加到新方法注释。这也不清楚调用代码传递的参数的可空性是继承的。

    ```
    @Nullability(inherit = "text")
    public static String truncate(@CheckForNull text, int maxLength) { ... } 
    ```

*   由于 99% 的情况可能会涉及用（这是一个合理的假设吗？）覆盖 a `@CheckForNull`or`@Nullable`注释，`@Nonnull`因此除了现有注释之外，添加一个新的参数注释以使用。这并不清楚它是否适用于方法的返回值，也不是很容易检查方法的主体。您是否假设参数已标记`@CheckForNull`？

    ```
    @CheckForNull
    public static String truncate(@InheritNonnull text, int maxLength) { ... } 
    ```

我必须承认我并不真正喜欢他们中的任何一个。:(

# php - 需要使用 php 抓取 HTML 内容和 Id 然后回显吗？

> ID：16154510
> 
> 赞同：-2
> 
> 时间：2013-04-22T18:52:47.497
> 
> 标签：php, html, echo, innerhtml

以下是我的 HTML 页面的示例，后面是处理表单的相应 PHP 页面。我需要从 id 中获取 HTML 内容（即字符串）并使用 PHP 回显它。保存一些方程的结果。我希望 PHP 处理结果并将它们回显到一个组织良好的表中。

HTML

```
<span id="a" name="a"></span>
<span id="b" name="b"></span> 
```

当一个函数运行时，它会将答案插入到 id 的 a 和 b 中。现在我想在提交表单时使用 PHP 回显这些答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:07:13.680

首先，做一个表格，如果你不知道怎么做，那么看看这个：

[http://www.w3schools.com/html/html_forms.asp](http://www.w3schools.com/html/html_forms.asp)

然后学习 post 方法来发布你想要回显的数据，目前你没有表单所以它不起作用。或者也许你做了但没有向我们展示，如果是这种情况，请把你所有的代码放在上面。

# file - IF 取决于每个文件夹的文件数 --unix

> ID：16154511
> 
> 赞同：0
> 
> 时间：2013-04-22T18:52:50.297
> 
> 标签：file, unix, if-statement, count, ls

我想根据每个文件夹中以相同两个字母开头的文件数量执行不同的操作 --- 如果 TS 中的文件小于或等于 6 来执行一组操作，否则执行另一组我的数据看起来像这样

```
files/TS01 -- which has 2 files  
files/TS02 -- which has 5 files 
files/TS03 -- which has 2 files 
files/TS04 -- which has 7 files
files/TS05 -- which has 9 files 
```

我试过了

```
FILES="$TS*"
for W in $FILES
do
    doc=$(basename $W) 
    if [ $W -le 6 ] 
    then
    ....
    done ...
    fi
done 
```

但我收到一条错误消息，提示“需要整数表达式”

我试过

```
if [ ls $W -le 6 ] 
```

我收到另一个错误说“争论太多”

你能帮忙吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:25:20.520

要获得行数，我建议将 ls -l 管道传输到 wc -l，这将在您的目录中吐出行数，如下所示...

```
Atlas $ ls -l | wc -l
    19 
```

我制作了一个小脚本，展示了如何使用此结果有条件地做一件事或另一件事......

```
#!/bin/bash

amount=$(ls -l | wc -l)

if [ $amount -le 5 ]; then
    echo -n "There aren't that many files, only "
else
    echo -n "There are a lot of files, "
fi

echo $amount 
```

在包含 19 个文件的文件夹上执行时，它会回显..

```
Atlas $ ./howManyFiles.sh
    There are a lot of files, 19 
```

还有一个文件少于 5 个...

```
Atlas $ ./howManyFiles.sh
    There aren't that many files, only 3 
```

希望这有助于向您展示如何从文件夹中获取可用文件数，然后如何在“if”语句中使用这些结果！

# c# - 数字范围的命名约定

> ID：16154515
> 
> 赞同：2
> 
> 时间：2013-04-22T18:53:03.713
> 
> 标签：c#, naming-conventions

有哪些可能的方法来命名代表一系列数字的变量？例如，我正在开发一个度量应用程序，该应用程序显示一个人队列中某些项目的年龄。它们被测量在

1.  0-50天
2.  51-100 天
3.  100 天以上

我考虑过拼写范围：`zeroToFifty`, `range0-50`. 我也考虑过用 "sections": `first`, `second`,来命名它们`third`，但这并不能证明是非常具有描述性的。你们做了什么来表示数字范围？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T19:09:29.490

首先，像 ZeroToFifty 这样的名字并不是非常具有描述性，几乎不比`if (number < 50)`. 如果可能，变量名称应提供更多信息，同时仍然简短。

其次，我建议*不要*将数值嵌入到常量中 - 如果您决定底部范围为 60，那么 ZeroToFifty 命名将不再匹配。如果您不必在整个代码库中重构名称更改，那么稍后调整这些值会容易得多。另外，常数的用户可能不关心50，他们关心的是“是年轻还是老？”。

所以你需要思考*“这些数字范围代表什么”*？

这取决于使用情况，但您可能会发现`Young, Mature, Old`适合您的情况，因为它描述了项目的年龄（从而为​​您提供有关该值的含义或用法的有力线索）。或者也许`Modern, Classic, Vintage`。或`Baby, Child, Adult`。（如果它们“适合”您想到的用法）。

在 C# 中，如果您使用枚举类型，则必须始终使用类型名，这也有助于阐明含义：`ItemAge.Young/Mature/Old`或`TimeInQueue.Short/Medium/Long`.

# c - C 编程：从文件中读取

> ID：16154517
> 
> 赞同：-2
> 
> 时间：2013-04-22T18:53:06.560
> 
> 标签：c, file-io, text-files

我有客户数据，例如客户编号、位置坐标等。文本文件中有 25 个客户。

这是我的代码。当我打印它时，这给了我一个零输出。

```
#include <stdio.h>
#include <conio.h>
#include <string.h>
#include <stdlib.h>
#define customerCount 25

struct customerData
{
       int customerNo;
       double xCoordinate;
       double yCoordinate;
       double demand;
       double readyTime;
       double dueTime;
       double serviceTime;
};

int main()
{
    int i;
    struct customerData allSubscriber[customerCount];
    FILE *dosya;
    dosya = fopen("c:\\solomon_c101.txt", "r");

        for(i=1; i<=customerCount; i++)
        {
                fscanf(dosya, "%d %f %f %f %f %f %f", &allSubscriber[i].customerNo, &allSubscriber[i].xCoordinate, &allSubscriber[i].yCoordinate, &allSubscriber[i].demand, &allSubscriber[i].readyTime, &allSubscriber[i].dueTime, &allSubscriber[i].serviceTime);
        }
        fclose(dosya);

    for(i=1; i<=customerCount; i++)
    {
             printf("%f\n", &allSubscriber[i].xCoordinate);
    }

    getch();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:59:01.910

用这个：

```
printf("%f\n", allSubscriber[i].xCoordinate); 
```

代替

```
printf("%f\n", &allSubscriber[i].xCoordinate); 
```

正如另一位用户指出的那样，`%lf`用作 in 的格式说明符。`double`在`fscanf()`printf() 中，它被提升为加倍。

不要使用`conio.h`and `getch()`。那些不是标准的 C。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T23:07:30.453

用`%lf`读`double`入`scanf`

`printf("%f\n", &allSubscriber[i].xCoordinate);`//消除`&`

# ios - 在 MKMapView 上放置图钉

> ID：16154518
> 
> 赞同：2
> 
> 时间：2013-04-22T18:53:12.417
> 
> 标签：ios, objective-c, mkmapview

iPhone 新手来自 Java。所以我在这个阶段的目标是允许用户在地图上“放置一个图钉”。我的地图初始化如下所示：

```
- (void)viewDidLoad {
    [super viewDidLoad];
     NSLog(@"your view did load, I'm going to initizlie the map by your location");
     CLLocationCoordinate2D location = theMap.userLocation.coordinate;
     NSLog(@"Location found from Map: %f %f",location.latitude,location.longitude);

     MKCoordinateRegion region;
     MKCoordinateSpan span;

     NSLog(@"coordinates: %f %f",location.latitude,location.longitude);
     if (TARGET_IPHONE_SIMULATOR) {
         NSLog(@"You're using the simulator:");
         location.latitude  =  40.8761620;
         location.longitude = -73.782596;
     } else {
         location.latitude  =  theMap.userLocation.location.coordinate.latitude;
         location.longitude =  theMap.userLocation.location.coordinate.longitude;
     }

     span.latitudeDelta = 0.001;
     span.longitudeDelta = 0.002;

     region.span = span;
     region.center = location;

     [theMap setRegion:region animated:YES];
     [theMap regionThatFits:region];
     [theMap setMapType:MKMapTypeSatellite]; 
     [theMap setZoomEnabled:YES];
     [theMap setScrollEnabled:YES];
     [theMap setShowsUserLocation:YES];
} 
```

对于请求的针脚，我有

```
- (MKAnnotationView *)mapView:(MKMapView *)mV viewForAnnotation:(id <MKAnnotation>)annotation {
    MKPinAnnotationView *pinView = nil;
    if (annotation != theMap.userLocation) {
        static NSString *defaultPinID = @"aPin";
        pinView = (MKPinAnnotationView *)[theMap dequeueReusableAnnotationViewWithIdentifier:defaultPinID];
    if (pinView == nil)
        pinView = [[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:defaultPinID] autorelease];
    } else {
    }
    pinView.pinColor = MKPinAnnotationColorRed;
    pinView.canShowCallout = YES;
    pinView.animatesDrop = YES;
    return pinView;
} 
```

我不确定我是否完全理解此地图 (theMap) 对 pin 的作用`viewForAnnotation`？我的意思是，用户执行什么操作会激活该`viewForAnnotation`方法？此代码不起作用，我不确定为什么。

我正在使用模拟器，所以我不确定是否有我应该按下的按钮或`Alt click`它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:14:31.673

> 我不确定我是否完全理解此地图 (theMap) 如何用于 viewForAnnotation 中的引脚？

`MKPinAnnotationView`只是另一种注解视图——也就是说，您向`MKAnnotation`地图添加注解（符合协议的对象）。当地图想要显示注解时（可能是因为用户滚动地图以使注解在视图中），它会要求您提供用于表示注解的视图。此时，您的`mapView:viewForAnnotation:`方法可以获取或创建一个 pin 注释视图并将其返回。用户不直接做任何事情来触发`mapView:viewForAnnotation:`，除了滚动或缩放。

如果您希望用户能够*放下*图钉，那是另一回事。您需要提供`MKPinAnnotationView`他们可以拖动的视图（甚至可能是 ）。当他们表示想要放下图钉（可能是通过抬起手指）时，您可以移除视图并在该点添加适当的注释。*然后*`mapView:viewForAnnotation:`地图视图将通过调用其委托的方法来要求您提供一个表示注释的视图。

> 此代码不起作用，我不确定为什么。

您是否在地图上添加了任何注释？如果是这样，您是否正在查看应该显示它们的地图部分？

我猜您正在查看该`animatesDrop`属性并期望它进行整个用户的 pin-dropping 交互。它不这样做。将该属性设置为`YES`仅在图钉出现在地图上时对其进行动画处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T21:14:45.527

好的，过了一会儿，我明白出了什么问题：

```
theMap.delegate = (id) self; 
```

在构造函数中丢失了。一旦我这样做了，最终用户的任何操作都会激活地图的其他方法（协议）。

# c# - 获取网站的外部 IP 地址

> ID：16154520
> 
> 赞同：4
> 
> 时间：2013-04-22T18:53:22.843
> 
> 标签：c#, .net, dns, ip-address

我见过许多轻松检索机器或网站内部 IP 地址的方法。但是，我似乎找不到检索外部 IP 地址的好方法。

澄清一下，如果我提供像 bitbucket.org 这样的 URL，我想获取 bitbucket 的外部 IP 地址。有没有可以轻松做到这一点的网络服务？

**编辑：**假设，对于这种情况，我与 bitbucket.org 在同一个网络上。

我正在用我们公司管理的所有网站的信息填充一个数据库。我们希望使用特定数据跟踪信息并记录周期性变化。该程序将部署在与运行网站的服务器位于同一网络上的本地服务器之一上。我相信检索每个站点的外部 IP 地址的唯一好方法是使用外部 Web 服务。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T18:55:15.923

您可以使用[`System.Net.Dns.GetHostEntry()`](http://msdn.microsoft.com/en-us/library/ms143998.aspx)通过主机名获取 IP 地址。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T22:51:52.520

您可以查询外部公共 DNS 服务器，例如 Google 位于 8.8.8.8 的服务器。从命令行

```
nslookup bitbucket.org 8.8.8.8 
```

或在 Linux 中`dig bitbucket.org @8.8.8.8`。有一些 C# 库可以让您查询特定的 DNS 服务器，例如构建在此[CodeProject 文章](http://www.codeproject.com/Articles/23673/DNS-NET-Resolver-C)之上的[DnsNet](https://github.com/spencerhakim/DnsNet)（找到搜索 - 我没有尝试过推荐它）。不过，这确实依赖于谷歌继续提供服务，但这似乎是安全的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T18:56:23.783

您可以使用 ping 实用程序。在 windows 中，通过按 windows 键 + r 打开命令窗口并键入

```
ping bitbucket.org 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T20:00:06.277

我认为您可以使用[Dns.GetHostAddresses](http://msdn.microsoft.com/en-us/library/system.net.dns.gethostaddresses.aspx)来获取 IP 地址。从 MSDN 文档：

> GetHostAddresses 方法向 DNS 服务器查询与主机名关联的 IP 地址。

更新：

如果您正在寻找 Web 服务，请尝试查看[whoisxmpapi.com](http://www.whoisxmlapi.com/)。从[这个示例](http://www.whoisxmlapi.com/documentation/WhoisRecord.xml)中可以看出，它们确实在其 XML 输出中提供了名称服务器 IP 地址。然后，您可以使用类似[的](http://www.kloth.net/services/nslookup.php)方法直接从名称服务器获取 IP 地址！

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-22T20:09:44.420

如果您想获取您的“wan”IP 而不是您的本地 IP，您可以尝试这样的事情。您还可以在 web 服务中添加这样的代码，并将其添加到 PC bitbucket 上（如果它真的在您的网络上并且您可以访问安装 web 服务）。

```
Public Shared ReadOnly Property IpAddress() As String
        Get
            If String.IsNullOrWhiteSpace(_ipAddress) Then
                Try
                    Dim webClient As New WebClient
                    Dim result As String = webClient.DownloadString("http://checkip.dyndns.org")

                    Dim fields = result.Split(" ")
                    _ipAddress = fields.Last
                    _ipAddress = _ipAddress.Replace("</body></html>", "")
                Catch ex As Exception
                    _ipAddress = "errorFindingIp"
                End Try
            End If
            Return _ipAddress
        End Get
    End Property 
```

# javascript - 用 JS 去除多余的 br 标签

> ID：16154521
> 
> 赞同：1
> 
> 时间：2013-04-22T18:53:30.257
> 
> 标签：javascript, jquery, css, formatting

我有一篇包含额外换行符的帖子，并希望将帖子限制为仅显示一个换行符。我认为这个css可能会工作..

```
br+br{display:none} 
```

但是由于文本没有包含在它自己的元素中，因此帖子中的所有换行符都是兄弟姐妹，这不起作用......现在我正在尝试用 JS 解决这个问题......

```
content.replace(/<br><br>/g,'<br>') 
```

为什么这只替换彼此相邻的第一组换行符？（我需要多次运行它以获得我想要的**所有**不必要的换行符被删除的效果），我应该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T18:57:02.480

*如果您的正则表达式完全*代表您的 HTML ，这应该有效：

```
content.replace(/(<br>)+/g,'<br>') 
```

尽管您的 CSS 应该可以工作：http: [//jsfiddle.net/UvVbE/](http://jsfiddle.net/UvVbE/)

# mysql - Joomla SQL查询调试方法

> ID：16154525
> 
> 赞同：0
> 
> 时间：2013-04-22T18:53:46.883
> 
> 标签：mysql, sql, debugging, joomla, joomla2.5

我计划通过输入每个查询及其对数据库表的查询执行时间来调试 Joomla 站点。我有 10 多个具有不同查询的模型。我很确定所有查询在执行之前都会经过一个地方/班级，但我不知道地点/班级在哪里/是什么。

我的问题是，我可以编辑一个中心位置来记录数据库查询和 SQL 查询的执行时间吗？我的意思是像编辑一个核心文件只是为了记录每个 SQL 查询和它的执行时间。

我怎样才能完成它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T21:09:09.093

您是否考虑过使用 Joomla 的内置[系统调试](http://learn.theartofjoomla.com/developing-extensions/setting-up-your-joomla-site-for-debugging.html)？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T19:13:18.330

[与其尝试使用蛮力以编程方式执行此操作，不如使用适当的 SQL 基准测试工具（例如MySQL Benchmark Suite](http://dev.mysql.com/doc/refman/5.0/en/mysql-benchmarks.html)）更容易且干扰更少 另一个可能的非蛮力选项可能是[Toad World](http://www.toadworld.com/MYSQL/SpotlightonMySQL/tabid/620/Default.aspx)

如果您想远离第三方工具，则可以从[慢查询日志](http://dev.mysql.com/doc/refman/5.1/en/slow-query-log.html)开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-22T17:03:25.610

如果你真的想通过 joomla (hack) 做到这一点：

1.  转到 joomla 的数据库驱动程序，对于 3.3 即：
    **libraries/joomla/database/driver.php**
2.  **删除 setDebug**函数
    *（以防某些组件将其设置为 0）*
3.  在文件开始更改
    **`$debug = false;`为`$this->debug = true;`**

现在，每个查询都与个人资料信息一起记录。

# c - sockaddr_in 变量的存储大小未知

> ID：16154530
> 
> 赞同：11
> 
> 时间：2013-04-22T18:53:59.010
> 
> 标签：c, sockets, gcc, freebsd

我有一段很久以前在某个环境中工作的代码。我很确定这是一台 FreeBSD 机器，所以我得到了 FreeBSD 8.3，我正在尝试制作这个文件，但它不起作用。

当我尝试编译它时，它会抱怨：

```
f.c: In function 'tcp'>
f.c:24: error: storage size of 'socket_stru' isn't known
f.c:29: error: 'IPPROTO_TCP' undeclared (first use in this function)
... 
```

我一直在环顾四周，发现这些都在 sys/socket.h 文件中指定。这是我的实际文件：

```
#include <stdio.h>
#include <string.h>
#include <netdb.h>
#include <sys/socket.h>
#include <unistd.h>

#include "f.h"

int tcp4 (in_addr_t ip, int port, int qsize )
{   
    struct sockaddr_in socket_stru; // line 24
    socket_stru.sin_family = AF_INET;
    socket_stru.sin_port = htons(port);
    socket_stru.sin_addr.s_addr = ip;

    int actual_socket = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP); // line 29
... 
```

我觉得我的代码不知何故没有“读取” sys/socket.h 文件，所以它不知道 socket_stru 和 IPPROTO_TCP，但我真的迷路了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-02-19T20:58:09.150

其他答案都不适合我。在查看`sys/socket.h`文件内部后，我什至没有看到`struct sockaddr_in`.

对我有用的是使用相应类型`#include`时的以下文件之一：`struct sockaddr_*`

*   如果你正在使用`struct sockaddr_in`， `#include <netinet/in.h>`
*   如果你正在使用`struct sockaddr_un`， `#include <sys/un.h>`
*   如果你正在使用`struct sockaddr_ns`， `#include <netns/ns.h>`
*   如果你正在使用`struct sockaddr_ndd`，`#include <sys/ndd_var.h>`

更多关于套接字编程头文件的信息可以在[这里](http://ps-2.kev009.com/tl/techlib/manuals/adoclib/aixprggd/progcomc/skthdrs.htm)找到。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-22T19:04:02.633

我将您的代码剪切并粘贴到一个文件中（仅删除 #include fh 并关闭函数调用。）它在*Linux*上编译得很好。

我怀疑BSD上可能存在头文件差异。对于套接字编程，我通常包括所有这些头文件。而且我知道我的套接字代码也可以在 BSD 上编译。我怀疑其中一个头文件引入了 sockaddr_in 的定义。我记得当我通过套接字代码移植到 BSD 时，我必须明确添加其中的一些。

```
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <unistd.h>
#include <arpa/inet.h>
#include <netdb.h>
#include <unistd.h>
#include <signal.h>
#include <stdio.h>
#include <string.h>
#include <fcntl.h>
#include <errno.h>
#include <sys/time.h>
#include <stdlib.h>
#include <memory.h>
#include <ifaddrs.h>
#include <net/if.h>
#include <stdarg.h>
/* the next two includes probably aren't relevant for you, but I typically use them all anyway */
#include <math.h>
#include <sys/termios.h> 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-03-17T23:38:21.313

我有同样的问题，但以下内容为我解决了这个问题

```
#include <arpa/inet.h> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-03-10T18:46:16.040

只需添加`#include <resolv.h>`到您的来源，您就可以开始了。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-02-19T21:08:49.453

根据你需要[的freebsd开发者手册](https://www.freebsd.org/doc/en/books/developers-handbook/sockets-essential-functions.html)

```
#include <stdio.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h> 
```

# ember.js - 在 ember 视图的上下文之外使用 ember-rails 车把模板

> ID：16154531
> 
> 赞同：4
> 
> 时间：2013-04-22T18:53:59.880
> 
> 标签：ember.js, ember-rails

我有一个使用`ember-rails`gem 的 rails 应用程序。

我的网站中有一部分不在 ember 上，但可以方便地使用通过资产管道提供的车把模板之一。然而，似乎有些不对劲。具体来说，我的模板返回如下：

```
Ember.TEMPLATES["views/wanderlists/templates/gallery"] = Handlebars.template(function anonymous(Handlebars,depth0,helpers,partials,data) { helpers = helpers || Ember.Handlebars.helpers;   var self=this;

  data.buffer.push("<h1>Gallery!</h2>\n"); }); 
```

但是，如果我尝试使用此模板：

```
Ember.TEMPLATES["views/wanderlists/templates/gallery"]({})
TypeError: Cannot read property 'buffer' of undefined 
```

知道为什么生成的模板会出现问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T02:43:50.630

> 知道为什么生成的模板会出现问题吗？

您不能调用 ember 车把编译器编译的车把模板，就好像它们是普通车把模板一样。他们期待一套完全不同的论点。具体来说，他们希望`(context, options)`在 options 有一个 data.buffer 的地方传递，输出将被写入。例如，如果您尝试：

```
Ember.TEMPLATES["views/wanderlists/templates/gallery"](this, {data: {buffer: 'NOT-A-BUFFER'}}) 
```

控制台应该输出`TypeError: Object NOT-A-BUFFER has no method 'push'`

> 我的网站中有一部分不在 ember 上，但可以方便地使用通过资产管道提供的车把模板之一。

好的。这真的很容易做到，只是不能`Ember.TEMPLATES`直接访问。而是使用`Ember.View`, 并直接调用 appendTo() 进行渲染。例如：

```
App = Ember.Application.create({});
var view = Ember.View.create({
  templateName: "views/wanderlists/templates/gallery",
  name: "Bob"
});
view.appendTo("#message"); 
```

这里的工作示例：http: [//jsfiddle.net/mgrassotti/VWmFq/1/](http://jsfiddle.net/mgrassotti/VWmFq/1/)

有关更多详细信息，请参阅[Ember 指南：定义视图](http://emberjs.com/guides/views/defining-a-view/)

# java - 使用自动化接口读取包上的标记值

> ID：16154533
> 
> 赞同：0
> 
> 时间：2013-04-22T18:54:15.380
> 
> 标签：java, enterprise-architect

EA 的 Java 自动化接口似乎没有提供访问包对象上的标记值的方法。然而，在我的模型中，我在我的包对象中放置了一些标记值。

关于我如何能够阅读这些信息的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T21:10:06.723

这是通过访问包的元素然后从中读取标记值来完成的。

```
Element pkgElement = pkg.GetElement();
Collection<TaggedValue> taggedValues = pkgElement.GetTaggedValues(); 
```

然后可以处理标记值的集合以读取所需的数据。

# php - 使用 MySQLi 准备好的语句检查现有记录

> ID：16154534
> 
> 赞同：0
> 
> 时间：2013-04-22T18:54:16.953
> 
> 标签：php, mysql, mysqli

所以我编写了一个脚本来在表格中插入一个电子邮件地址，但我想检查该地址是否已经存在。所以我从一个准备好的声明开始：

```
$statement = $db->prepare("SELECT * FROM `signups` WHERE `signups_email`= ? ");
$statement->bind_param('s',$email);
$statement->execute();

if($statement->num_rows < 1){ 
     $statement->close(); //Free up the SQL result
    //do the inserting code
} else {
    echo "Email already exists";
} 
```

麻烦的是，`($statement->num_rows < 1)`似乎总是返回 true，即使我知道数据库中有一封电子邮件。即它没有弄清楚该地址已经在数据库中。

我的连接等很好，因为该`//do the inserting code`位工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:58:24.517

如果电子邮件已存在于数据库中，则您的语句将失败。`if()`应该是

```
if ($statement->num_rows == 0) {
   ... email does not exist, insert it
} else {
   ... at least one record with that email exists
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:01:27.417

查看[mysqli_num_rows](http://us2.php.net/manual/en/mysqli-stmt.num-rows.php)的文档。

> 返回结果集中的行数。mysqli_stmt_num_rows() 的使用取决于您是否使用 mysqli_stmt_store_result() 来缓冲语句句柄中的整个结果集。
> 
> 如果使用 mysqli_stmt_store_result()，mysqli_stmt_num_rows() 可能会立即被调用。

看起来您需要先调用 store_result() 才能检查行数。

# c++ - C++ 转换 Base* 到 Derived* 和 constness

> ID：16154538
> 
> 赞同：2
> 
> 时间：2013-04-22T18:54:28.343
> 
> 标签：c++, casting, compiler-errors, constants

是否始终允许从`Base*`to转换？是否始终允许`Derived*`从`const Base*`to转换？`const Derived*`

我正在使用 Qt QSharedPointers。我有一个要`Base`对象的 QSharedPointer，我想将其转换为`Derived`对象的 QSharedPointer。我事先检查 pointee 是 type `Derived`。

有没有可能100%的成功率

*   `static_cast<QSP<Derived>>`
*   `dynamic_cast<QSP<Derived>>`
*   直接演员`QSP<Derived>(my_base_pointer)`

?

例如，对于直接转换：

```
QSP<Derived> inpf = QSP<Derived>(my_base_pointer) ; 
```

我有错误

```
Error 1 error C2440: 'initializing' : cannot convert from 'Base *' to 'Derived *' 
```

与`my_base_pointer`类型`const QSP<Base>`。

是因为 constness 吗？我应该在此之上使用 const_cast 吗？我猜 constness 不是根本原因，因为如果我

```
const QSP<Derived> inpf = static_cast<const QSP<Derived>>(my_base_pointer); 
```

发生同样的错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T18:59:08.530

您正在为`QSP<Derived>`构造函数提供一个`Base*`指针，该指针不起作用。只要您*确定*指针确实是 a`Derived*`您应该能够对其进行 static_cast ：

```
QSP<Derived> inpf = QSP<Derived>(static_cast<Derived*>(my_base_pointer)) ; 
```

如果基类至少有一个虚函数，那么`dynamic_cast`在这种情况下使用会更安全，因为它就是为此而创建的。如果指针实际上不是指向派生类的指针，您将得到一个 NULL 指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T18:59:22.980

你正在尝试做的事情被称为**downcast**。有关详细信息，请查看[此答案](https://stackoverflow.com/questions/28002/regular-cast-vs-static-cast-vs-dynamic-cast/1255015#1255015)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T18:59:25.657

没有从`Base*`to的隐式转换`Derived*`。那是因为指向的指针`Base`不必指向`Derived`对象。如果您确定确实如此，请使用`static_cast`: `static_cast<Derived*>(base_pointer)`。如果您不确定，并且`Base`至少有一个虚函数，请使用`dynamic_cast`: `dynamic_cast<Derived*>(base_pointer)`; 如果指针指向 type 的对象，this 将进行转换`Derived`，否则将返回空指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T20:32:14.087

正如评论中所建议的，问题是关于`QSharedPointer`，转换`Base*`为的通用答案`Derived*`不适合这种特殊情况。

在 Qt 文档中潜水，我们发现了有趣的成员方法`QSharedPointer`, `staticCast`。

首先，我想出了这段代码：

```
QSP<Derived> inpf_filter = my_base_QSP->staticCast<Derived>() ; 
```

由于 my`QSP`是指针类型，因此我不在指针`->`上调用，而是在指针上调用。所以，我又犯了一个错误：不是班级成员。我改正为`staticCast()``QSP``staticCast()``Base`

```
QSP<Derived> inpf_filter = my_base_QSP.staticCast<Derived>() ; 
```

这会编译。`QSharedPointer`也支持`dynamicCast()`。在这种情况下，如果无法执行强制转换，则返回空指针。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T20:43:49.187

`QSharedPointer`s 拥有一整套强制转换机制：

[http://qt-project.org/doc/qt-4.8/qsharedpointer.html#qSharedPointerCast](http://qt-project.org/doc/qt-4.8/qsharedpointer.html#qSharedPointerCast)

对于一个`QSharedPointer<U>`：

```
QSharedPointer ( const QSharedPointer<T> & other )
QSharedPointer<X>   constCast () const
QSharedPointer<X>   dynamicCast () const
QSharedPointer<X>   objectCast () const
QSharedPointer<X>   staticCast () const 
```

如果`T`是 的子类型，则构造函数有效`U`。

`const`,`dynamic`并`static`像`_cast`C++ 的运算符一样转换工作。

`object`做一个`qobject_cast`。

如果您将结果存储在另一个共享指针中，则对共享指针类型执行`_cast`运算符通常是一个坏主意——为了安全地转换非侵入性的共享指针，您需要进行共享指针感知转换。

# html - CSS链接背景图像未显示

> ID：16154541
> 
> 赞同：0
> 
> 时间：2013-04-22T18:54:32.500
> 
> 标签：html, css

我正在尝试使用带有背景图像的几个图像链接进行导航。如果我让链接 div 调用图像，它们就会出现。但是当我将链接调用到同一个类时，背景图像就会消失。任何帮助表示赞赏

CSS

```
#advertising  {
    z-index: 1;
    width: 465px;
    height: 65px;
    display: block;
    position: absolute;
    background: url('../images/advertising.png');
} 
```

HTML

```
<a href="#" id="advertising"></a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:17:06.140

在我的一个项目中，我遇到了类似的问题。如果我将我的 css 称为“css/medium.css”，它就不起作用。我不得不在开头的“/css/medium.css”中用斜杠调用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:01:22.627

1）你可能应该给它一个`top`, `left`... 位置的值。

2）尝试图像的绝对路径。

3）尝试将元素容器之一的位置设置为相对。

4）禁用广告过滤器:)

# c++ - 你能在Visual C++中找到一个值的实际数字吗

> ID：16154543
> 
> 赞同：1
> 
> 时间：2013-04-22T18:54:48.163
> 
> 标签：c++, .net, winforms

我正在学习 c++，很想知道你是否真的可以看到你分配给一个值的值。我从未参加过任何有关 C++ 的课程，但我相信这些是内存位置。我已经习惯了 vb.net，您可以在其中执行 .tostring 来查找任何内容的值，Visual C++ 中是否有类似的内容？

其中一些我很难找到的值是：0x00001f40 0x000003e8

是否有一些网站可以将其“解码”为 Visual Studio 中的数字或调试选项？对这种语言非常陌生，所以请保持温和。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:02:39.327

我倾向于在视觉工作室中使用手表盒（如果我有很多变量）。监视框允许您填写一个变量，该变量将显示其所有值（对于类对象非常有用）。这些值将显示断点触发的时刻。

另一种方法是使用断点并在断点触发时将鼠标悬停在代码中的变量上（对于少量代码可能最简单，但在大对象上显示所有内容非常痛苦）。

您可能希望确保关闭十六进制显示（可以在运行时在工具栏中找到）。

# ios - iOS iPhone iPad 限制 SSL/HTTPS 加密位

> ID：16154545
> 
> 赞同：1
> 
> 时间：2013-04-22T18:55:00.383
> 
> 标签：ios, encryption, ssl, https

有没有办法限制 SSL/HTTPS 连接的 iOS 端的加密位/类型？假设我们希望最大位数是 1024 或 128 等数字。

我们可以将加密类型设置为仅 DES 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T20:15:26.713

此问题涉及 SSL 的两个不同方面：

1.  控制 SSL 会话期间使用的密码套件
2.  控制 SSL 通信中使用的 RSA 密钥的密钥大小

[如果您使用此 SO 答案](https://stackoverflow.com/a/1977086/1904979)`CFSockets`中记录的代码，则可以控制第一个。请记住，您需要选择服务器实际支持的密码套件，否则 SSL 将无法工作。可以在[此处](http://www.thesprawl.org/research/tls-and-ssl-cipher-suites/)找到密码套件列表。如果您想将 DES 设置为密码套件（我强烈**建议**不要这样做），您可以使用类似**`SSL_RSA_FIPS_WITH_DES_CBC_SHA`**

 **从客户端的角度来看，第二个是您无法控制的……密钥大小（1024 位、2048 位、128 位等）由服务器上 SSL 证书中的密钥大小设置。您可能可以使用第一步中概述的过程从 中确定密钥的大小`SSLContextRef`，然后如果您没有得到您喜欢的值，则关闭连接。

最后，如果您想在 Safari 中执行此操作，那么您完全[不走运](https://apple.stackexchange.com/questions/32125/setting-safari-ssl-tls-cipher-suites)**

# javascript - 从 Javascript 中的 Div 中删除类

> ID：16154552
> 
> 赞同：10
> 
> 时间：2013-04-22T18:55:29.053
> 
> 标签：javascript

我有一个 div 部分

```
<div class="1">
        <div id="tab1"">
            <ul class="nav nav-tabs">                   
                <li class="active ans-tab"> <a href="{$cdn2}">MyText</a></li>
                <li class="topTab"><a href="{$cdn2}/Game/">Game</a></li>
                <li class="topTab"><a href="{$cdn2}/lb/">LB</a></li>
            </ul>
        </div>
       <div id="tab2">
        <ul class="nav nav-pills">
            <li class="active"> <a href="{$cdn2}">Top</a></li>
            <li><a href="{$cdn2}/categories/">Categories</a></li>
        </ul>
    </div>
</div> 
```

我在 div 中用作 href 的每个页面上尝试做的是从 li 项中删除类属性，并将其分配给一个，我单击。

我试过 removeClass removeAttribute 等，但似乎没有什么对我有用。我想使用纯 Javascript 而不是 jQuery

例如，我在游戏页面上的 JS 代码从 MyText 页面中删除活动类并将其添加到游戏页面的 li 元素中。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-22T19:02:29.467

我假设一次只有一个处于活动状态。要删除，您可以执行以下操作：

```
var active = document.querySelector(".active");

active.classList.remove("active"); 
```

然后添加，执行以下操作：

```
// Assuming `this` is your element
this.classList.add("active"); 
```

* * *

这两种方法都适用于现代浏览器。对于较旧的浏览器，使用相同的 DOM 选择，然后对`.className`属性进行典型的字符串操作。

```
active.className = active.className.replace(/\bactive\b/, " ");

this.className += " active"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:02:16.777

尝试删除类的功能：

```
function removeClass (parentEl, classToBeRemoved) { // DOM element, className for remove.
    var classes = parentEl.className.split(" ");

    for (var i = 0; i < classes.length; i++) {
        if (classes[i] == classToBeRemoved) {
            // Remove class.
            classes.splice(i, 1);
        }
        break;
    }
    parentEl.className = classes.join(" ");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T19:14:09.823

像这样

```
.bold {
    font-weight: bold
}
.red {
    background: red
}

<div id="theDiv" class="bold red">Bold and red</div>
<button id="button">Remove red</button>

var theDiv = document.getElementById("theDiv");
var button = document.getElementById("button");

function removeRed() {
    var classContent = theDiv.className;

    theDiv.className = classContent.replace("red", "").trim();
}

button.addEventListener("click", removeRed, false); 
```

在[jsfiddle上](http://jsfiddle.net/Xotic750/ts7NK/)

在较新的浏览器上，您可以使用[element.classList](https://developer.mozilla.org/en-US/docs/DOM/element.classList)和`remove`方法

# asp.net-mvc-3 - InProc 会话状态、网络农场和唯一且粘性的 SessionID？

> ID：16154553
> 
> 赞同：0
> 
> 时间：2013-04-22T18:55:29.090
> 
> 标签：asp.net-mvc-3, session, iis, session-cookies

我想在我的 webfarm 的服务器上拥有 InProc 会话状态，并且只共享唯一的 SessionID（我相信它是通过浏览器 cookie 传输的）。

这可能吗？我们计划有基于此 SessionID 的自定义对象缓存，仅在某些情况下才需要加载。如果可能的话，我想避免创建自定义会话提供程序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:06:07.373

您确实应该避免依赖 ASP.NET 的内部细节（它如何管理会话 ID）——如果有人发现当前方法中的漏洞，这种行为可能会在下一个 .NET 版本中甚至在此之前发生变化。

相反，创建您自己的 cookie - 读取和写入该 cookie 都是单行的 (`HttpResponse.SetCookie()`和`HttpRequest.Cookies[]`)。

# jquery - JQuery 等待 Ajax 结果

> ID：16154554
> 
> 赞同：1
> 
> 时间：2013-04-22T18:55:30.053
> 
> 标签：jquery

我有一个通过将方法名称和数据作为参数进行 Asp.Net Web 服务调用的函数。将数据发送到服务没有问题。但我的回报值是`undefined`

```
function ServiceCommand(method, mdata) {
            $.ajax({
                url: "Service1.asmx/" + method,
                type: "POST",
                dataType: "json",
                data: mdata,
                contentType: "application/json; charset=utf-8",
                success: function (msg) {
                    return msg;
                },
                error: function (e) {
                    return "error";
                }
            });
        }

function Insert()
{
var Msg = ServiceCommand("HelloWorld", "{pwd:'1234',txt:'SomeText'}");
alert(Msg);// undefined

} 
```

如何让 ServiceCommand 函数等到响应到来？我正在使用 JQuery 1.9（`async:false`不起作用）我看到了一些建议使用的解决方案，`$.When`但我无法弄清楚如何在这里使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:06:54.310

不使用承诺 (.when) 的一种简单方法是将回调函数作为第三个参数传递给 ServiceCommand。这个函数会做任何你需要对来自 ajax 调用的响应做的事情。

```
function ServiceCommand(method, mdata, onSuccessCallback) {
        $.ajax({
            url: "Service1.asmx/" + method,
            type: "POST",
            dataType: "json",
            data: mdata,
            contentType: "application/json; charset=utf-8",
            success: function (msg) {
                if (onSuccessCallback !== undefined) {
                    onSuccessCallback(msg);
                }
            },
            error: function (e) {
                return "error";
            }
        });
    }

function Insert()
{
    var Msg = ServiceCommand("HelloWorld", "{pwd:'1234',txt:'SomeText'}", onSuccess);
    alert(Msg);
}
function onSuccess(msg)
{
    alert(msg);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T18:59:46.440

使用异步=假；

```
$.ajax({
   url: myUrl,
   dataType: 'json',
   async: false 
```

# lisp - 获取字符串而不是数字

> ID：16154556
> 
> 赞同：2
> 
> 时间：2013-04-22T18:55:33.323
> 
> 标签：lisp, common-lisp

这工作正常：

```
[1]> ((lambda (x) (/ x x)) 5)
1 
```

但是这个：

```
[2]> ((lambda (x y) (/ x y)) 5 2)
5/2 
```

给我“5/2”而不是 2.5。我该如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T18:59:40.690

Common Lisp 尽可能执行有理算术。如果你想要浮点数，你要么必须提供至少一个浮点数作为算术函数的输入，要么对结果使用显式强制函数。

```
((lambda (x y) (float (/ x y)) 5 2) 
```

或者

```
((lambda (x y) (/ x y)) 5.0 2) 
```

有理算术通常比浮点更精确。考虑一下：

```
(setf x1 (/ 1 3)) => 1/3
(setf x2 (float (/ 1 3)) => 0.33333333
(* x1 3) => 1
(* x2 3) => 0.99999999 
```

# java - 如何从父字符串中的某个 int 位置从父字符串创建字符串？

> ID：16154562
> 
> 赞同：-1
> 
> 时间：2013-04-22T18:55:43.663
> 
> 标签：java, string

好的，让我举个例子：

```
 String parentString = "HelloThisIsAString";
    int stringPos = parentString.indexOf("String"); //Will return the position of the text "String" of the parentString.
    String string = //Here the problem arises. 
```

在python中我这样做：

```
 string = parentString[stringPos:#to some certain text] 
```

如何在 Java 中做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T18:57:52.107

您可以使用`substring`方法，如下所示：

```
String parentString = "HelloThisIsAString";
int stringPos = parentString.indexOf("String");
String string = parentString.substring(stringPos, toSomePos);
//                                                   ^^^
//                                                    |
//                                           This is optional 
```

删除最后一个参数会为您提供从特定位置到原始字符串末尾的子字符串。

# grails - Webflow：可以在流之间切换吗？

> ID：16154564
> 
> 赞同：1
> 
> 时间：2013-04-22T18:55:46.907
> 
> 标签：grails, spring-webflow, grails-2.2

我有两个控制器，每个控制器都有一个流程。在我的菜单中，我有一个指向流程的链接。如果我在流程#1 中并单击流程#2 的链接，Grails 将向我显示流程#1 的视图。

我发现使这种转换工作的唯一方法是拥有一个指向重定向到流的操作的链接。

```
class FirstController {
  def firstFlow = {
  }

  def toFirst() {
    redirect action: 'first'
  }

}

class SecondController {
  def secondFlow = {
  }
  def toSecond() {
    redirect action: 'second'
  }
} 
```

*   将正确`/first/first`显示视图。
*   将要`/second/second`显示第一个**视图**。
*   将`/second/toSecond`重定向并正确显示视图。
*   Backing to`/first/first`显示**第二个视图**
*   Goingo to`/first/toFisrt`正确显示视图。

这是预期的行为吗？为什么流程没有转到正确的视图？

**编辑**

菜单是使用[Platform Core Navigation API](http://grailsrocks.github.io/grails-platform-core/guide/nav.html)创建的。

```
navigation = {
  app {
    first(controller: 'first', action: 'first', title: 'nav.exportar')
    second(controller: 'second', action: 'second', title: 'nav.importar')
  }
} 
```

**链接**

```
http://localhost:8080/my-application/first/first?execution=e14s1
http://localhost:8080/my-application/second/second?execution=e14s1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-25T04:43:42.973

如果我们想停止一个流程（比如点击菜单），我们需要告诉 webflow `end-state`。

所以菜单链接 url 应该包含`eventId`表示`end-state`.

我不知道导航 api，但`g:link`下面的例子：

```
<g:if test="${params.action=='first'}"><%-- we are in first flow. --%>
    <g:link event="toSecond">Go to second</g:link>
</g:if>
<g:else><%-- we are not in first flow, normal link. --%>
    <g:link controller="second" action="second">Go to second</g:link>
</g:else> 
```

和第一个控制器：

```
class FirstController {
    def firstFlow = {
        // view-state
        firstViewState {
            on('next').to 'nextAction'
            on('toSecond').to 'toSecond' // <g:link event='toSecond'> in gsp
        }

        // end-state
        toSecond() {
            redirect (controller:'second', action:'second')
        }
    }

    def toFirst() {
        redirect action: 'first'
    }
} 
```

# bash - 在 bash 脚本中提示 MySQLDump 密码？

> ID：16154565
> 
> 赞同：2
> 
> 时间：2013-04-22T18:55:59.250
> 
> 标签：bash, mysqldump

我正在尝试编写一个运行`mysqldump`使用该`-p`标志的命令的 bash 脚本。此标志提示用户输入密码，直接在 shell 中运行时按预期工作，但在脚本中运行时不会出现。

```
#!/usr/bin/env 

ssh user@domain.com 'mysqldump -u mysqluser -p --databases foo | bzip2' > ~/temp/foo-dump.sql.bz2 
```

现在我可以在脚本中嵌入密码或将其作为参数传递，但我真的希望脚本提示用户输入密码，这样密码就不会出现在我的脚本存储库或我的 bash 历史记录中。

任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:28:38.247

这应该可以解决问题：

```
read -p "mysql password: " PASS && ssh user@domain.com 'mysqldump -u mysqluser -p'$PASS' --databases foo | bzip2' > foo-dump.sql.bz2 ; PASS="" 
```

在这种情况下，您将首先输入 mysql 密码，然后系统会提示您输入 ssh 密码。请注意，mysql 密码不会被隐藏，即有人可以从您的肩膀上读取它。如果你想避免这种情况，请使用标志`-s`

```
read -s -p "mysql password: " PASS && ... 
```

另请注意，“p”（在 -p 中表示密码）和密码变量的引号之间不能有任何空格。

此外，您的 shebang 没有指定使用哪个解释器，这可能是个问题。我建议你使用`#!/bin/bash`or `#!/usr/bin/env bash`。

# c# - IoC：温莎城堡和 WebAPI

> ID：16154566
> 
> 赞同：22
> 
> 时间：2013-04-22T18:55:59.610
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, asp.net-web-api, castle-windsor

我有一个使用 Castle Windsor 的 MVC4 站点，我想添加一些 WebAPI 调用，所以我开始在互联网上进行一些研究。

现在我不知道 IoC 的来龙去脉；我遵循了如何在我的项目中设置 Castle Windsor 的教程，在基本控制器中注入`IUnitOfWorkFactory`和`IApplicationService`as 公共属性，以及控制器构造函数中需要的一些其他接口。它可以流畅地工作，所以我从来不需要用它做更多的事情。

在我阅读 WebAPI 的任何地方，我都被告知 DI 在使用 Castle Windsor 时效果不佳，并谈到了`IDependencyResolver`和`IDependencyScope`. 如何解决这个问题有几种解决方法和实现，但我不清楚问题到底是什么。包括代码片段，但假设您知道它们属于哪个类，以及它们是如何被调用的，不幸的是我不知道。此外，我在网上看到的所有示例都指的是一个专有的 WebAPI 项目，而不是一个明智地加入了几个`ApiController`s 的 MVC4 项目。我不知道这会如何或是否会影响任何事情。

为什么我在标准控制器上使用的东西不能在 API 控制器上使用？要让 WebAPI 调用和标准 Web 调用在同一个应用程序中工作，需要做什么样的代码杂技？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-09-27T14:50:52.520

## 现有 Castle Windsor MVC 配置

假设您有类似于[Castle Windsor MVC 教程的 MVC 和 Castle Windsor 设置，使用](http://docs.castleproject.org/Default.aspx?Page=Windsor-tutorial-part-one-getting-Windsor&NS=Windsor&AspxAutoDetectCookieSupport=1)[Mark Seemann 的帖子](http://blog.ploeh.dk/2012/10/03/DependencyInjectioninASP.NETWebAPIwithCastleWindsor/) 添加 IoC 以使 Web API 控制器利用依赖注入非常简单*（请注意，他解释了为什么不使用 IDependencyResolver）*。

从 Castle Windsor 教程中，您应该在`Global.asax.cs`.

```
 private static IWindsorContainer container;

    protected void Application_Start()
    {
        //... MVC / Web API routing etc.
        BootStrapper bs = new BootStrapper();
        container = bs.ConfigureCastleWindsorMVC();
    } 
```

`BootStrapper.ConfigureCastleWindsorMVC()`剪断

```
 IWindsorContainer container = new WindsorContainer()
            .Install(
                new LoggerInstaller()
                //...,
                , new ControllersInstaller()
            );

        var controllerFactory = new WindsorControllerFactory(container.Kernel);
        ControllerBuilder.Current.SetControllerFactory(controllerFactory);
        return container; 
```

## 所需的更改

从 Mark Seemann 的帖子中，您[需要](http://blog.ploeh.dk/2011/07/28/CompositionRoot/)通过`IHttpControllerActivator`. 这是您需要的他的适配器实现。

```
public class WindsorCompositionRoot : IHttpControllerActivator
{
    private readonly IWindsorContainer container;

    public WindsorCompositionRoot(IWindsorContainer container)
    {
        this.container = container;
    }

    public IHttpController Create(HttpRequestMessage request,
        HttpControllerDescriptor controllerDescriptor, Type controllerType)
    {
        var controller =
            (IHttpController)this.container.Resolve(controllerType);

        request.RegisterForDispose(
            new Release(() => this.container.Release(controller)));

        return controller;
    }

    private class Release : IDisposable
    {
        private readonly Action release;

        public Release(Action release) { this.release = release; }

        public void Dispose()
        {
            this.release();
        }
    }
} 
```

使用 IHttpControllerActivator 适配器和 MVC Castle Windsor 容器实现，您只需要在`Global.asax.cs`（或者如果您使用的话，在 BootStrapper 中）配置它。它必须在 MVC 初始化之后，因为 MVC 初始化具有所有安装程序。

```
 private static IWindsorContainer container;

    protected void Application_Start()
    {
        // MVC / Web API routing etc.
        BootStrapper bs = new BootStrapper();
        container = bs.ConfigureCastleWindsorMVC();
        // Web API Castle Windsor ++ ADD THIS ++
        GlobalConfiguration.Configuration.Services.Replace(
            typeof(IHttpControllerActivator),
            new WindsorCompositionRoot(container));
    } 
```

## 最后结果：

Web API 控制器可以像使用 MVC 控制器一样使用注入的依赖项。

```
public class TestController : ApiController
{
    private readonly ITestService TestService;

    public TestController(ITestService testService)
    {
        this.TestService = testService;
    }

    // GET api/<controller>
    public IEnumerable<string> Get()
    {
        return TestService.GetSomething();
        //return new string[] { "value1", "value2" };
    }
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-23T03:50:47.410

为了使用带有 webapi 的 Windsor，请遵循 [http://blog.ploeh.dk/2012/10/03/DependencyInjectioninASP.NETWebAPIwithCastleWindsor/（BEH](http://blog.ploeh.dk/2012/10/03/DependencyInjectioninASP.NETWebAPIwithCastleWindsor/) ：固定链接）

另请阅读 [ASP.NET Web API 中的 Castle Windsor/DelegatingHandler/IPrincipal 依赖注入 (DI)/控制反转 (IoC)](https://stackoverflow.com/questions/15736402/castle-windsor-delegatinghandler-iprincipal-dependency-injection-di-inversion/15758982#15758982)

您可以在同一个应用程序中使用 webapi 和 MVC 控制器（我更喜欢将其分开），但路由和控制器工厂是不同的，您必须设置两个不同的配置并处理路由重叠......对于 MVC 和 Windsor，您可以找到伟大的

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-10-26T23:41:48.663

以下示例项目给了我正在寻找的答案。它使用 Castle Windsor 进行依赖注入。我能够在同一个应用程序上使用 MVC 控制器和 Web API 控制器。

[mirajavora / WebAPISample](https://github.com/mirajavora/WebAPISample)

* * *

这是详细说明它的帖子：

[ASP.NET Web API 入门](http://blog.mirajavora.com/getting-started-with-asp.net-web-api)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-12T08:54:47.430

首先，正如 Iko 所说，您需要创建一个实现`IHttpControllerActivator`.

然后在`ContainerBootstrapper`添加`Bootstrap()`以下将默认替换为已实现的：

```
 //This will help in creating Web api with Dependency injection
 GlobalConfiguration.Configuration.Services.Replace(
 typeof(IHttpControllerActivator),
 new WindsorCompositionRoot(container)); 
```

最后，这里没有提到，如果没有它，它对我不起作用，你应该在你实现的`IWindsorInstaller`服务中添加以下内容`install()`：

```
container.Register(
    Classes.FromThisAssembly()
    .BasedOn<ApiController>()
    .LifestyleTransient()    
); 
```

# android - 在不中断显示的子项的情况下更新 ViewPager

> ID：16154568
> 
> 赞同：0
> 
> 时间：2013-04-22T18:56:03.350
> 
> 标签：android

我正在为我们的校园出版物构建一个 Android 杂志阅读器，它从 Web 服务中提取文章并将它们显示在 ViewPager 中。

为了最小化初始加载时间，我希望它从一开始就拉出相对较少的文章（比如 10 篇）。一旦它提取并显示了这些文章，我希望它在用户浏览第一组时立即开始下载/反序列化接下来的 10 篇文章。同样，当他们到达第 11 篇文章时，我希望它继续下载下 10 篇，这样用户就可以继续浏览，而无需等待更多文章加载。使用 s 完成这似乎很容易`AsyncTask`，但我遇到了一个小问题：当下一组文章被下载并添加到 s 时`ViewPager`，它会跳回显示第一页。

如何在`ViewPager`不更改向用户显示的文章的情况下将视图添加到数据集的末尾？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:59:40.383

您将需要使用[Endless Adapter](https://github.com/commonsguy/cwac-endless)创建的通用软件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:19:57.317

或者，您可以在刷新内容后再次打开该页面`ViewPager`。获取用户正在阅读的文章的文章id。`ViewPager`刷新后打开同一篇文章。

# android - Android 传感器读数未返回所有传感器

> ID：16154570
> 
> 赞同：1
> 
> 时间：2013-04-22T18:56:17.217
> 
> 标签：android, android-sensors

我已经（或者我认为）拼凑了一些代码，这些代码应该允许我接收所有传感器数据的变化并将它们输出到日志中。但是，我得到的唯一传感器是光传感器（传感器 #5）。

在 OnCreate 内部：

* * *

```
{
sm = (SensorManager) getSystemService(SENSOR_SERVICE);
    Log.i("aaa","---sensors on");
          sm.registerListener(sensorListener,sm.getDefaultSensor(Sensor.TYPE_ALL),SensorManager.SENSOR_DELAY_UI);

    List<Sensor> typedSensors = sm.getSensorList(Sensor.TYPE_ALL);

    for(Iterator<Sensor> i = typedSensors.iterator(); i.hasNext();) 
    {
          Sensor item = i.next();
          Log.i("aaa","SENSOR: "+item.getName());
    }
} 
```

## 其他相关代码：

```
 private static SensorEventListener sensorListener=new SensorEventListener() {
        public void onSensorChanged(SensorEvent e) {
              writeSensorLog(e.sensor.getType()+":"+e.values[0]);
        }

        public void onAccuracyChanged(Sensor sensor, int accuracy) {
          // unused
        }
      };

public static void writeSensorLog(String data)
{
Log.i("aaa","sensor string: "+data);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:21:05.630

`TYPE_ALL`用于获取设备中所有可用传感器的列表。要注册所有传感器，请调用`getSensorList`并注册列表中的每个成员。

```
List<Sensor> sensors = sm.getSensorList(Sensor.TYPE_ALL);
for (Sensor sensor : sensors)
{
    sm.registerListener(sensorListener, sensor, SensorManager.SENSOR_DELAY_UI);
} 
```

# symfony - Symfony2 安全性：多个提供者

> ID：16154573
> 
> 赞同：6
> 
> 时间：2013-04-22T18:56:26.737
> 
> 标签：symfony, symfony-security

我的项目中有 2 个捆绑包：

*   src/韩国/AlmacenBundle
*   src/Galvez/RepuestosBundle

每个都有自己的数据库

*   korea_motos -> AlmacenBundle
*   galvez_motos -> RepuestosBundle

实际上我的 security.yml 只有一个提供者：

```
providers:
    korea:
        entity: { class: Korea\AlmacenBundle\Entity\Usuario, property: username } 
```

如您所见，两个捆绑包都由同一个表进行身份验证：Usuario，在 korea_motos

表：Usuario（korea_motos 数据库）

# --ID--|----用户名----|---------捆绑包---

--1-----|-------------管理员----|------ ---AlmacenBundle------

--2-----|-------------管理员----|------ ---RepuestosBundle-------

现在我想验证用户，对于 RepuestosBundle，在 galvez_motos 中有一个表 Usuario，删除上一个表中的“bundle”列。

问题出在 security.yml 文件中。如果我这样做：

```
providers:
    korea:
        entity: { class: Korea\AlmacenBundle\Entity\Usuario, property: username }
    galvez:
        entity: { class: Galvez\RepuestosBundle\Entity\Usuario, property: username } 
```

Symfony 启动异常：

```
The class 'Galvez\RepuestosBundle\Entity\Usuario' was not found in the chain configured namespaces Korea\AlmacenBundle\Entity 
```

我尝试使用 2 个提供程序，每个捆绑包一个表.. 这可能吗？

文件：security.yml

```
jms_security_extra:
secure_all_services: false
expressions: true 
```

安全性：编码器：Korea\AlmacenBundle\Entity\Usuario：算法：sha1 encode_as_base64：错误迭代：1 Galvez\RepuestosBundle\Entity\Usuario：算法：sha1 encode_as_base64：错误迭代：1

```
role_hierarchy:
    ROLE_ADMIN:       ROLE_USER
    ROLE_SUPER_ADMIN: [ ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH ]

providers:
    korea:
        entity: { class: Korea\AlmacenBundle\Entity\Usuario, property: username }
    galvez:
        entity: { class: Galvez\RepuestosBundle\Entity\Usuario, property: username }

firewalls:
    dev:
        pattern:  ^/(_(profiler|wdt)|css|images|js)/
        security: false

    login:
        pattern:  ^/demo/secured/login$
        security: false

    secured_area:
        pattern:    ^/
        anonymous: ~
        access_denied_handler: accessdenied_handler
        form_login:
            login_path:  /login
            check_path:  /login_check
            default_target_path: /redirect
            always_use_default_target_path: true
        logout:
            path:   /logout
            target: /login
        #anonymous: ~
        #http_basic:
        #    realm: "Secured Demo Area"

access_control:
    - { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/redirect, roles: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/galvez, roles: ROLE_ADMIN_GALVEZ }
    - { path: ^/, roles: ROLE_ADMIN_KOREA } 
```

config.yml -- 不能全部复制/粘贴:(

```
doctrine:
dbal:
    default_connection:   default
    connections:
        default:
            driver:   "%database_driver%"
            dbname:   "%database_name%"
            user:     "%database_user%"
            password: "%database_password%"
            host:     "%database_host%"
            port:     "%database_port%"
            charset:  UTF8
        galvez:
            driver:   %database_driver%
            dbname:   %database_name2%
            user:     %database_user2%
            password: %database_password2%
            host:     %database_host%
            port:     %database_port%
            charset:  UTF8
orm:
    default_entity_manager:   default
    entity_managers:
        default:
            connection:       default
            mappings:
                AlmacenBundle: ~
        galvez:
            connection:       galvez
            mappings:
                RepuestosBundle: ~ 
```

参数.yml

```
parameters:
database_driver: pdo_mysql
database_host: localhost
database_port: null
database_name: korea_motos
database_user: root
database_password:
mailer_transport: smtp
mailer_host: localhost
mailer_user: null
mailer_password: null
locale: en
secret: 5f7ac4e7c2b38d6dbe55a1f05bee2b02
database_path: null

database_name2: galvez_motos
database_user2: root
database_password2: 
```

PD：对不起我的英语：S

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-03-26T14:56:49.353

老问题，但对于任何寻找解决方案的人来说，手册[在这里](https://symfony.com/doc/current/security/multiple_user_providers.html)解释了一切。基本上，您需要像这样链接您的提供程序：

```
# app/config/security.yml
security:
    providers:
        chain_provider:
            chain:
                providers: [korea, galvez]
        korea:
            entity: { class: Korea\AlmacenBundle\Entity\Usuario, property: username }
        galvez:
            entity: { class: Galvez\RepuestosBundle\Entity\Usuario, property: username } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:00:26.687

这可能是您的类的名称空间的问题。检查类`Galvez\RepuestosBundle\Entity\Usuario`是否在正确的命名空间中以及配置是否正确 - 也许您不小心留下了来自其他实体的一些复制和粘贴代码。

尝试保留这两个实体并获取它们（没有安全上下文） - 我想你会在那里找到你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T22:16:51.203

我对两个实体进行了测试：

# abcController.php

```
$em= $this->get('doctrine')->getManager('galvez');

$usuario_g = $this->get('doctrine')->getRepository('RepuestosBundle:Usuario', 'galvez')->find(1);
$usuario_g->setUsername('asdasd');
$em->persist($usuario_g);
$em->flush(); 
```

工作正常，但如果我使用

> $em = $this->getDoctrine()->getEntityManager();

代替

> $em = $this->get('doctrine')->getManager('galvez');

当我尝试刷新时，Symfony 启动相同的错误：

```
The class 'Galvez\RepuestosBundle\Entity\Usuario' was not found in the chain configured namespaces Korea\AlmacenBundle\Entity 
```

Usuario.php (AlmacenBundle)

```
<?php

namespace Korea\AlmacenBundle\Entity;

use Symfony\Component\Security\Core\User\UserInterface;
use Doctrine\ORM\Mapping as ORM;

/**
 * Usuario
 *
 * @ORM\Table()
 * @ORM\Entity(repositoryClass="Korea\AlmacenBundle\Entity\UsuarioRepository")
 */
class Usuario implements UserInterface
{

/**
 * @var integer
 *
 * @ORM\Column(name="id", type="integer")
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="AUTO")
 */
private $id;

/**
 * @var string
 *
 * @ORM\Column(name="username", type="string", length=255)
 */
private $username;

/**
 * @var string
 *
 * @ORM\Column(name="password", type="string", length=255)
 */
private $password;

/**
 * @var string
 *
 * @ORM\Column(name="salt", type="string", length=255)
 */
private $salt; 
```

Usuario.php (RepuestosBundle)

```
<?php

namespace Galvez\RepuestosBundle\Entity;

use Symfony\Component\Security\Core\User\UserInterface;
use Doctrine\ORM\Mapping as ORM;

/**
* Usuario
*
* @ORM\Table()
* @ORM\Entity(repositoryClass="Galvez\RepuestosBundle\Entity\UsuarioRepository")
*/
class Usuario implements UserInterface
{

/**
 * @var integer
 *
 * @ORM\Column(name="id", type="integer")
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="AUTO")
 */
private $id;

/**
 * @var string
 *
 * @ORM\Column(name="username", type="string", length=255)
 */
private $username;

/**
 * @var string
 *
 * @ORM\Column(name="password", type="string", length=255)
 */
private $password;

/**
 * @var string
 *
 * @ORM\Column(name="salt", type="string", length=255)
 */
private $salt; 
```

# PD：嗯，我认为这是不可能的，如果我改变这个：

> 默认连接：韩国

至：

> 默认连接：galvez

Symfony 说：

```
MappingException: The class 'Korea\AlmacenBundle\Entity\Usuario' was not found in the chain configured namespaces Galvez\RepuestosBundle\Entity 
```

同样的错误，但相反..

似乎独白验证采用默认连接（在本例中为韩国）进行搜索和验证

# javascript - 奇怪的行为谷歌融合表

> ID：16154575
> 
> 赞同：0
> 
> 时间：2013-04-22T18:56:32.127
> 
> 标签：javascript, google-maps, google-fusion-tables

我想知道为什么我收到以下错误：

类型错误：e.row.beachID 未定义

我的 click 事件处理程序按预期工作，但我的 mouseover 和 mouseout 事件处理程序虽然类似于 click 处理程序输出上面提到的 TypeError 消息。如果我能够使用“单击处理程序”从 gft 检索图层数据，那么为什么我不能对“鼠标悬停”和“鼠标输出”处理程序执行相同的操作 - 我正在尝试从同一个表中检索数据。

```
/* start map initialization  */
function initialize() {
    latlng = new google.maps.LatLng(49.894634, -97.119141);
    var myOptions = {
        center: latlng,
        zoom: 7,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        zoomControlOptions: {
            style: google.maps.ZoomControlStyle.SMALL
        },
        mapTypeControl: true,
        mapTypeControlOptions: {
            mapTypeIds: [
                google.maps.MapTypeId.ROADMAP,
                google.maps.MapTypeId.SATELLITE,
                google.maps.MapTypeId.HYBRID,
                google.maps.MapTypeId.TERRAIN
            ],

            style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
        },
        overviewMapControl: true,
        overviewMapControlOptions: {
            opened: true
        }

    };
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    layer = new google.maps.FusionTablesLayer({
        query: {
            select: 'POINT',
            from: tableID
        },
        suppressInfoWindows: true
    });
    layer.setMap(map);
    infoWindow = new google.maps.InfoWindow();

    // begin tooltip section
    layer.enableMapTips({
        select: "'beachID', 'beach'",
        from: tableID,
        geometryColumn: 'POINT',
        suppressMapTips: true,
        delay: 100,
        tolerance: 8
    });

    google.maps.event.addListener(layer, 'mouseover', function (e) {
        $('#info').html(
            '<h3>' + e.row['beachID'].value + '</h3>',
            '<h3>' + e.row['beach'].value + '</h3>');
    });

    google.maps.event.addListener(layer, 'mouseout', function (e) {
        $('#info').html('<h2>Mouseout</h2>') ;
    });
    // end tooltip section

    google.maps.event.addListener(layer, 'click', function (e) {
        // close infoWindow if open
        if (infoWindow) {
            infoWindow.close();
        }
        beachID = e.row['beachID'].value;
        beachName = e.row['beach'].value;
        point = e.row['POINT'].value;
        region = e.row['region'].value;
        sampleDate = e.row['Date'].value;
        ecoli_count = e.row['avg_ecoli_count'].value;
        water_quality_guideline = e.row['water_quality_guideline'].value; 
    });
} 
```

我错过了什么明显的东西吗？任何想法总是受到赞赏。

提前致谢。迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T16:39:06.330

[FusionTablesLayer](https://developers.google.com/maps/documentation/javascript/3.exp/reference#FusionTablesLayer)上唯一有效的事件是单击：

点击 | FusionTablesMouseEvent | 单击图层中的要素时会触发此事件。

返回一个[FusionTablesMouseEvent 对象](https://developers.google.com/maps/documentation/javascript/3.exp/reference#FusionTablesMouseEvent)

# url - 附加了 Joomla 3 菜单项 URL

> ID：16154578
> 
> 赞同：0
> 
> 时间：2013-04-22T18:56:42.523
> 
> 标签：url, joomla, menu, append, joomla3.0

Joomla 版本 3 菜单项有一个名为“Note”的字段，主要用于在管理员后端显示注释。

我已经用“&City=4&County=0”之类的东西填充了“note”字段，现在我想将它附加到链接 URL 的前面。链接 URL 是不可编辑的字段，它会根据所选文章自动填充，因此我无法手动编辑或输入。

基于文章选择的正常 URL 如下所示：

```
index.php?option=com_content&view=article&id=10 
```

现在我想在这个 URL 前面附加注释字段，所以 URL 看起来像：

```
index.php?option=com_content&view=article&id=10&City=4&County=0 
```

这是屏幕截图：

[![](https://i.stack.imgur.com/USnHa.png)](https://i.stack.imgur.com/USnHa.png)
[（来源：[linkbank.co.uk](http://www.linkbank.co.uk/menu.png)）]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:08:25.623

您可以创建一个新视图，只需将 components/com_content/views/article 复制到 cityarticle 或其他有意义的内容，然后编辑您在其子文件夹 ./tmpl 中找到的 default.xml，更改名称以便您可以识别它并添加字段 city和县

大致在第 16 行，当您创建新菜单项（右侧）时会出现这些内容，以便您可以设置它们，并将作为获取请求传递。

选择适当的字段类型并在此处阅读文档：http: [//docs.joomla.org/Standard_form_field_and_parameter_types](http://docs.joomla.org/Standard_form_field_and_parameter_types)

# javascript - Enyo js - 填充菜单

> ID：16154581
> 
> 赞同：0
> 
> 时间：2013-04-22T18:56:52.393
> 
> 标签：javascript, enyo

我正在尝试在 Enyo js 中动态填充菜单。但我找不到合适的方法来做到这一点。虽然我尝试将它与 jQuery 结合起来，但我想知道是否有一种“Enyo”的方式来做这件事。

```
{kind: "onyx.MenuDecorator", name: "keymapHolder", components: [
    {content: "Default"},
    {kind: "onyx.Menu", name: "keymapMenu", components:[

    ]
    }],
} 
```

所以我必须使用一个函数来填充“keymapMenu”的组件，而不是直接把它放在小部件定义中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T15:07:58.647

您可以通过调用动态创建菜单项`createComponents()`。我为您准备了一个小提琴，它可以动态地将组件添加到菜单中。请注意，如果要清除旧项目，则需要调用*不是*菜单滚动条的`destroy()`每个项目。

 *看到这个小提琴：

[http://jsfiddle.net/RoySutton/hmyJt/5/](http://jsfiddle.net/RoySutton/hmyJt/5/)*

# css - Bootstrap 响应式导航栏在较低的视图比率下会出现奇怪的格式

> ID：16154582
> 
> 赞同：0
> 
> 时间：2013-04-22T18:56:55.533
> 
> 标签：css, twitter-bootstrap, navbar

网站：[collecthw.com](http://collecthw.com)

当 NavBar 全屏时，它占据屏幕宽度的 100%，并且搜索栏位于 NavBar 中。

在移动设备上，当您缩小浏览器窗口时，它会发生变化。我一生都无法弄清楚我应该去哪里让它不这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:19:21.600

fletch 为我指明了正确的方向

```
@media (max-width: 767px) {
body {
padding-right: 20px;
padding-left: 20px;
} 
```

需要更改为

```
@media (max-width: 767px) {
body {
padding-right: 0px;
padding-left: 0px;
} 
```

# tableviewcell - 从 uipickerview 更新自定义 UItableView 单元格文本

> ID：16154587
> 
> 赞同：0
> 
> 时间：2013-04-22T18:57:17.180
> 
> 标签：tableviewcell

我有一个自定义表格视图单元格，它有一个右标签和一个左标签我想在从 ui pickerview 中选择对象后更改右标签文本

```
-(void) pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component  {
if(pickerView ==myPicker){
    if(component==0){
        CustomeCell * cell =(CustomeCell*) [detailTableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0]];
        cell.rightLabel.text=@"Hi";
        NSLog(@"Section 0 %@",[allFoodType objectAtIndex:row]);
         [detailTableView reloadData];
    } 
```

但是在我从选择器视图中选择对象后没有任何变化

我对此一无所知，谁能给我一个解决方案如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:20:42.717

您是否将同时具有单元格和 UIpickerView 的 ViewController 设置为 UItableViewCell 和 UIPickerView 的委托和数据源？也是 UItableView 中的单元格吗？

# codemirror - Codemirror 与 Jquery 自动完成不兼容

> ID：16154591
> 
> 赞同：2
> 
> 时间：2013-04-22T18:57:31.683
> 
> 标签：codemirror

我想为我的 codemirror 编辑器使用 Jquery Autocomplete。但看起来它与它不兼容。当用户按下 ctrl-enter 键时，我有以下代码可以显示文本区域内的选项列表。

```
 $("#textareaCodemirror").autocomplete({
   source: ["c++", "java", "php", "coldfusion", "javascript", "asp", "ruby"],
   minLength: 0
 });

 $('#textareaCodemirror').keydown(function (e) {
   if (e.ctrlKey && (e.keyCode == 13)) {
   $("#textareaCodemirror").autocomplete("search","");
  }
 }); 
```

它工作正常。问题是有时当我按 ctrl-enter 时，浏览器会挂起一段时间，然后出现一个对话框，询问我是否要在此处输入代码或继续执行脚本。

对话框中的消息说明如下：

```
 "A script on this page may be busy, or it may have stopped responding. You can stop the script now, or you can continue to see if the script will complete.
 Script: "location1/codemirror/js/codemirror.js:958 " 
```

在上面的消息中，codemirror.js 是我正在使用的另一个库。

我该如何解决这个问题？

# haskell - Haskell：没有因使用`=='而产生（Eq a）的实例

> ID：16154592
> 
> 赞同：20
> 
> 时间：2013-04-22T18:57:41.620
> 
> 标签：haskell

```
isPalindrome :: [a] -> Bool
isPalindrome xs = case xs of 
                        [] -> True 
                        [x] -> True
                        a -> (last a) == (head a) && (isPalindrome (drop 1 (take (length a - 1) a)))

main = do
    print (show (isPalindrome "blaho")) 
```

结果是

```
No instance for (Eq a)
  arising from a use of `=='
In the first argument of `(&&)', namely `(last a) == (head a)'
In the expression:
  (last a) == (head a)
  && (isPalindrome (drop 1 (take (length a - 1) a)))
In a case alternative:
    a -> (last a) == (head a)
         && (isPalindrome (drop 1 (take (length a - 1) a))) 
```

为什么会出现这个错误？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-22T19:01:00.947

您正在使用 比较两个类型的`a`项目`==`。这意味着`a`不能只是任何类型 - 它必须是 的实例`Eq`，就像 的类型`==`一样`(==) :: Eq a => a -> a -> Bool`。

您可以通过在函数的类型签名`Eq`上添加约束来解决此问题：`a`

```
isPalindrome :: Eq a => [a] -> Bool 
```

[顺便说一句，有一种更简单的方法可以使用`reverse`.]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-12T15:35:14.493

哈马尔的解释是正确的。

另一个简单的例子：

```
nosPrimeiros :: a -> [(a,b)] -> Bool
nosPrimeiros e [] = False
nosPrimeiros e ((x,y):rl) = if (e==x)   then True
                                        else nosPrimeiros e rl 
```

(e==x) 对于此函数签名将失败。您需要更换：

```
nosPrimeiros :: a -> [(a,b)] -> Bool 
```

为 a 添加一个 Eq 实例

```
nosPrimeiros :: Eq => a -> [(a,b)] -> Bool 
```

这个实例化是说现在，**a**有一个可以和 (e==x)*比较*的类型，不会失败。

# mysql - SQL：将1个表中的2行合并为1行导致子查询多行

> ID：16154593
> 
> 赞同：0
> 
> 时间：2013-04-22T18:57:44.977
> 
> 标签：mysql, sql, database, phpmyadmin

# 我有的：

一桌~~水果~~ **食品（我从中选择水果）**，每个水果两排，小号一排，大号一排。

```
id | category | subcategory | title  | description       | value
-----------------------------------------------------------------
1  | Fruit    | Small       | Plum   | Om, nom, nom!     | 0.50
2  | Fruit    | Large       | Plum   | Om, nom, nom!     | 1.50
3  | Fruit    | Small       | Orange | Mmm, citrus.      | 0.30
4  | Fruit    | Large       | Orange | Mmm, citrus.      | 0.75
5  | Fruit    | Small       | Melon  | Get in mah belly! | 2.00
6  | Fruit    | Large       | Melon  | Get in mah belly! | 3.10 
```

# 我需要的：

我需要将每个水果的两行合并为一行：

***category**，**title**和**description**对于每对行将始终相同。*

***每对行的id**、**subcategory**和**value**总是不同的。*

```
id.r1 | id.r2 | category.r1 |  title.r1  | description.r1       | subcategory.r1 | value.r1 | subcategory.r2 | value.r2
-----------------------------------------------------------------------------------------------------------------------
1     | 2     | Fruit       |  Plum      | Om, nom, nom!        | Small          | 0.50     | Large          | 1.50
3     | 4     | Fruit       |  Orange    | Mmm, citrus.         | Small          | 0.30     | Large          | 0.75
5     | 6     | Fruit       |  Melon     | Get in mah belly!    | Small          | 2.00     | Large          | 3.10 
```

# 我试过的：

```
SELECT r1.id,
(SELECT r2.id FROM `my_table` r2 WHERE r1.title = r2.title),  
r1.category, 
r1.subcategory,
(SELECT r2.category FROM `my_table` r2 WHERE r1.title = r2.title) 
r1.title, 
r1.description, 
r1.value, 
(SELECT r2.value FROM `my_table` r2 WHERE r1.title = r2.title)

FROM `my_table` r1

WHERE category = "Fruit" 
```

...产生：

> 子查询返回超过 1 行

# 我的问题：

我应该如何修改上述查询以实现我所描述的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T19:01:55.710

您可以通过聚合轻松做到这一点：

```
select category, title, description,
       MAX(case when subcategory = 'Small' then id end) as Small_Id,
       MAX(case when subcategory = 'Small' then value end) as Small_Value,
       MAX(case when subcategory = 'Large' then id end) as Large_Id,
       MAX(case when subcategory = 'Large' then value end) as Large_Value
from my_table f
group by category, title, description 
```

注意：这不包括`subcategory`在最终结果中，因为该行没有子类别。

您也可以将其作为联接来执行，这似乎是您所采取的路径：

```
select fsmall.id, flarge.id, fsmall.category, flarge.category, . . .
from my_table fsmall join
     my_table flarge
     on fsmall.subcategory = 'small' and flarge.subcategory = 'large' and
        fsmall.category = flarge.category and
        fsmall.title = flarge.title and
        fsmall.description = flarge.description 
```

根据您是否可能缺少一些行，您可能需要 a`left outer join`或`full outer join`.

# facebook - 如何使 facebook like 按钮“发布到页面”弹出窗口出现在按钮上方？

> ID：16154594
> 
> 赞同：1
> 
> 时间：2013-04-22T18:57:50.183
> 
> 标签：facebook, facebook-like

我环顾网络，发现一些模糊的答案，这是无法做到的，我只是想在我抛弃整个想法之前确定一下。

因此，在我点击 Facebook 上的点赞按钮后，点赞按钮下方会出现一个“弹出窗口”，要求我发布到我的页面。由于我的按钮位于页面底部，因此如何使其显示在“赞”按钮上方。

谢谢！

# java - BlockingQueue 的 take() 方法的延迟是多少？

> ID：16154599
> 
> 赞同：1
> 
> 时间：2013-04-22T18:58:12.060
> 
> 标签：java, multithreading, concurrency, queue, blocking

我想了解它是如何`take()`工作的，以及它是否是一种合适的方法来消耗被推送到队列中的“快速”元素。

请注意，为了理解它的工作原理，我在这里没有考虑观察者模式：我知道我可以使用该模式对事件“快速做出反应”，但这不是我的问题所在。

例如，如果我有一个`BlockingQueue`（大部分是空的）和一个线程“卡住”等待一个元素被推送到该队列以便它可以被消耗，那么什么是最小化花费的时间（减少延迟）之间的好方法元素被推入队列的那一刻和它被消耗的那一刻？

例如，执行此操作的线程有什么区别：

```
while( true ) {
   elem = queue.peek();
   if ( elem == null ) {
       Thread.sleep( 25 ); // prevents busy-looping
   } else {
   ... // do something here
   }
} 
```

另一个这样做：

```
while ( true ) {
    elem = queue.take();
    ... // do something with elem here
} 
```

*（我认为是为了简化我们可以忽略在这里讨论异常的事情！？）*

当您打电话`take()`而队列为空时，幕后发生了什么？JVM 必须以某种方式让线程“休眠”，因为它不能一直忙于循环检查队列中是否有东西？*take()*是否在后台使用了一些 CAS 操作？如果是这样，是什么决定了*take()*调用该 CAS 操作的频率？

当有东西突然进入队列时怎么办？该线程如何`take()`以某种方式“通知”它应该立即采取行动而被阻止？

最后，在应用程序的整个生命周期中，一个线程“卡”在BlockingQueue 上的*take()上是否“常见”？*

这是一个与阻塞*take()*如何工作有关的大问题，我认为回答我的各种问题（至少是一个有意义的问题）将帮助我更好地理解这一切。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:05:34.803

您可以假设只要您的操作系统可以在线程之间传递这样的信号，就会通知 take() 它可以唤醒。注意：您的操作系统将涉及最坏的情况。通常这是 1 - 10 微秒，在极少数情况下为 100 或什至 1000 微秒。注意： Thread.sleep 将等待至少 1000 微秒，而 25 毫秒是 25,000 微秒，所以我希望差异对您来说是显而易见的。

避免罕见但长时间上下文切换的唯一真正方法是忙于等待亲和锁 CPU。（这会为您的线程分配一个 CPU）如果您的应用程序对延迟敏感，更简单的解决方案是根本不在线程之间传递工作。;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T19:31:24.157

好吧，这里的实现`LinkedBlockingQueue<E>.take()`：

> ```
> public E take() throws InterruptedException {
>     E x;
>     int c = -1;
>     final AtomicInteger count = this.count;
>     final ReentrantLock takeLock = this.takeLock;
>     takeLock.lockInterruptibly();
>     try {
>             while (count.get() == 0) {
>                 notEmpty.await();
>             }
>         x = dequeue();
>         c = count.getAndDecrement();
>         if (c > 1)
>             notEmpty.signal();
>     } finally {
>         takeLock.unlock();
>     }
>     if (c == capacity)
>         signalNotFull();
>     return x;
> } 
> ```

当队列为空时，`notEmpty.await()`调用它：

> 使当前线程等待，直到它发出信号或中断。
> 
> 与此 Condition 关联的锁被自动释放，并且当前线程出于线程调度目的而被禁用并处于休眠状态，直到发生以下四种情况之一：
> 
> 1.  其他某个线程为此Condition调用了signal方法，而当前线程恰好被选为要被唤醒的线程；或者
> 2.  其他一些线程为此 Condition 调用 signalAll 方法；或者
> 3.  其他一些线程中断当前线程，支持中断线程挂起；或者
> 4.  发生“虚假唤醒”。

当另一个线程将某些东西放入队列时，它会调用`signal`，这会唤醒等待消费该队列中的项目的线程之一。这应该比你的`peek`/`sleep`循环更快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T19:31:00.797

在内部，`take`等待在方法`notEmpty`中发出的条件`insert`；换句话说，等待线程进入睡眠状态，并在`insert.` 这应该很快醒来。

一些阻塞队列，例如`ArrayBlockingQueue`and `SynchronousQueue`，有一个接受队列公平属性的构造函数；传入`true`应该防止线程卡住，`take,`否则这是可能的。（该参数指定底层[ReentrantLock](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReentrantLock.html)是否公平。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T21:06:24.157

由于涉及两个线程，具有假设的微`peek`/`sleep`纳米睡眠实现的 / 不会有太大差异，`take()`因为它们都涉及通过主内存将信息从一个线程传递到下一个线程（使用`volatile`写入/读取和健康数量的 CAS） ，除非 JVM 找到其他方法来进行线程间同步。您可以尝试使用两个 s 和两个线程来实现基准测试`BlockingQueue`，每个线程充当一个队列的生产者和另一个队列的消费者，并来回移动令牌，将其从一个队列中取出并`offer`ing 到下一个队列。然后你可以看到他们生产/消费的速度有多快，并将其与`peek`/`sleep`. 我猜性能很大程度上取决于在每个令牌上花费的工作量（在这种情况下为零，所以我们测量纯开销）和 CPU 到内存的距离。以我的经验，单 CPU 比多插槽机器领先。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T23:15:59.603

不同之处在于第一个线程的睡眠时间最长为 25 毫秒，而第二个线程根本不会浪费任何时间。

# android - 将传感器数据移动到不同的类/活动

> ID：16154602
> 
> 赞同：0
> 
> 时间：2013-04-22T18:58:21.267
> 
> 标签：android

我有一个简单的应用程序，它记录了一堆传感器/gps 数据。第一个活动是一团糟，而且太长了，所以我想模块化它。我现在想要 3 个模块：

1.  主要活动
2.  传感器数据（陀螺仪、加速度计等）
3.  GPS 数据（位置、海拔等）

对我来说，进行模块化的最佳方法是什么？我试图将一些传感器数据移出原始类，然后我注意到我的类需要扩展一些`android.content.context`（例如`Activity`）才能正确访问传感器数据？

感谢您朝正确的方向轻推。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T21:59:43.890

根据我对原始问题的评论...

您不需要扩展`Context`- 您可以创建帮助类并简单地将 传递到类`Activity` `Context`构造函数或使用`this`.`Activity`

只要您正确地设计了您的帮助程序类，就可以了，这是很多人都在做的事情，而且确实有各种需要`Context`参数的 Android 类。避免内存泄漏并使用正确的`Context`.

有时使用应用程序`Context`可能会更好，因为它在所有应用程序组件的生命周期内都是持久的。然而，这只是部分上下文，因为某些事情无法使用它（例如，一些与 UI 相关的任务）。否则`Activity` `Context`，只要没有任何东西拥有对它的永久引用，就可以使用 （如果`Activity`被破坏，这可能会导致内存泄漏。

# c# - 如何检查电子邮件的退回？

> ID：16154606
> 
> 赞同：0
> 
> 时间：2013-04-22T18:58:34.883
> 
> 标签：c#, .net, email

我搜索并看到很多人询问是否验证天气或电子邮件地址是否有效 - 我得到的总体答案是“这是不可能的”。

这是有道理的，看看垃圾邮件公司将如何利用它。但是，我使用 MS Outlook 客户端手动发送电子邮件，如果我发送到无效的电子邮件地址，我通常会收到一封“退回”电子邮件作为回复。这有什么关系？我不能使用这些退回的电子邮件来查找我系统中的无效电子邮件地址（我已经出于正当理由向他们发送电子邮件并想查看电子邮件是否仍然有效）。

如果是这种情况，我该如何在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:01:57.250

不，你不能。并非所有电子邮件服务都会发送此类“退回”电子邮件以响应无效的电子邮件地址。

此外，理论上，除了所提供的电子邮件地址不存在之外，还可以发送“退回”电子邮件，并且您收到一封电子邮件的事实并不一定意味着该电子邮件地址不存在。

确实没有办法确定字符串是否是真实的电子邮件地址（您可以验证它是否作为电子邮件地址*有效，但不能验证它是否真的存在）。*

* * *

要回答您在标题中提出的问题，您必须监控传入电子邮件的返回地址，然后以某种方式确定收到的任何邮件是否是“退回”邮件。

# c# - 连接数据库时出现 C# 错误

> ID：16154607
> 
> 赞同：0
> 
> 时间：2013-04-22T18:58:37.187
> 
> 标签：c#, database

```
try
{
    connection.Open();
    myReader = cmdDatabase.ExecuteReader();
    while (myReader.Read())
    {
       string nationality = myReader.GetString("country");
       cmbnationality.Items.Add(nationality);
    }
} 
```

我有这个问题：

```
Error   2   Argument 1: cannot convert from 'string' to 'int' 
```

在线：

```
string nationality = myReader.GetString("country"); 
```

谁能帮我？我基本上是在尝试从我的数据库中填充组合框中的值。“国家”是我在数据库中的列名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T19:01:11.477

`GetString`接受一个 int 参数，它是你想要的数据的序号。将其更改为：

```
string nationality = myReader.GetString(myReader.GetOrdinal("country")); 
```

[请参阅此处](http://msdn.microsoft.com/en-us/library/system.data.idatarecord.getstring.aspx)的 IDataReader.GetString 方法的文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T19:00:55.110

这仅仅是因为[Reader.GetString()](http://msdn.microsoft.com/en-CA/library/system.data.sqlclient.sqldatareader.getstring.aspx)需要一个`int`作为参数。你正在传递一个`string`. 如果你*必须*传递一个字符串，你将不得不这样调用它：

```
string nationality = myReader.GetString (reader.GetOrdinal("country")); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T19:02:17.643

GetString 的正确使用方法如下

```
string nationality = myReader.GetString (myReader.GetOrdinal("country")); 
```

[MSDN - 获取序号](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.getordinal.aspx)
[MSDN - 获取字符串](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.getstring.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T19:37:03.703

`GetString`需要一个**int**参数，而您正在传递一个**string**。改为这样做：

```
string nationality = myReader.GetString (myReader.GetOrdinal("country")); 
```

详情请阅读以下内容：

[获取序号](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.getordinal.aspx)

[获取字符串](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.getstring.aspx)

# sql - 'reference..' 在 SQL 语法中是什么意思？

> ID：16154613
> 
> 赞同：1
> 
> 时间：2013-04-22T18:58:58.243
> 
> 标签：sql, sql-server-2008, syntax

```
from
[PMDB].[dbo].PROJECT P
inner join PROJWBS PW on P.proj_id = PW.proj_id
and PW.proj_node_flag = 'Y' and PW.wbs_short_name not like '%- B%'
and PW.status_code <> 'WS_Planned' and PW.status_code <> 'WS_Whatif'
inner join [PMDB].[dbo].TASKSUM TS on PW.proj_id = TS.proj_id and PW.wbs_id = TS.wbs_id
inner join reference..fiscal_year_qtr_month FYQM on isnull(TS.act_end_date,P.scd_end_date) > FYQM.fiscal_month_begin_datetime
and isnull(TS.act_end_date,P.scd_end_date) <= FYQM.fiscal_month_end_datetime
inner join reference..mfg_year_month_ww MYMW on isnull(TS.act_end_date,P.scd_end_date) > MYMW.mfg_ww_begin_datetime
a 
```

我已经尝试过互联网，但只是不明白“参考..”在这里是什么意思。我错过了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T19:00:37.587

`reference`是数据库名称。在数据库名称和对象名称之间是架构。

因此，如果您想从`sys.database_files`in查询`master`，您会说：

```
SELECT name FROM master.sys.database_files;
---- database ---^^^^^^
------------- schema ---^^^
----------------- object ---^^^^^^^^^^^^^^ 
```

如果您知道实体名称是明确的，则可以省略架构。对于目录视图/DMV，您不能忽略它，但如果您使用默认模式（通常是 dbo），则可以忽略显式引用。[这不是一个好主意](https://sqlblog.org/2009/10/11/bad-habits-to-kick-avoiding-the-schema-prefix)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T19:02:10.873

```
reference..mfg_year_month_ww 
```

是简写

```
reference.dbo.mfg_year_month_ww 
```

基本上这意味着使用默认模式。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-22T19:00:59.103

这是指示表名称和所有者的 T-SQL（Microsoft 特定）语法。默认所有者是“dbo”。默认数据库是您当前“使用”的任何一个。

以下是更多详细信息：

> [http://examplesql.com/sqlserver-t-sql-tsql/dbo-dotdot-syntax/](http://examplesql.com/sqlserver-t-sql-tsql/dbo-dotdot-syntax/)
> 
> `SELECT * FROM AdventureWorks2008.dbo.AWBuildVersion;`
> 
> 说实话，这不是火箭科学。当在 tsql 查询中引用默认模式时，'..' 可以用作 dbo 的替代品。如果您需要频繁访问默认数据库，dbo .. 语法快捷方式可以大大提高您的效率。

# mysql - 为什么 MySQL 查询没有正确插入 BIT(50) 位域

> ID：16154615
> 
> 赞同：0
> 
> 时间：2013-04-22T18:58:58.393
> 
> 标签：mysql, bit, bit-fields

我正在我当前项目的数据库中实现一个位域列。它有 50 位长，但似乎没有正确插入我在 PHP 中创建的位域。这是文字查询（我尝试在 PHP 和 phpMyAdmin 中提交它）。

```
 INSERT INTO features (title, category_id, bitnum) 
 VALUES ("a6", "0", b'00000000000000000000000000100000000000000000000000') 
```

但是由于某种原因 phpMyAdmin 和 PHP 输出的值是这样的：

```
00001100110011100000111000001101100011000000111000 
```

现在，如果我选择在 SELECT 查询中使用 BIN(bitnum) 选择 bitnum 列，它会输出正确的值。但在我继续之前，我需要知道我是否真的做对了（因为我需要稍后检查该列是否有标志）。我插入的第一个位域（中间只有一个 1）似乎不正确，变成了 0 和 1 的奇怪混乱，现在对我来说没有任何意义。

我在谷歌上找不到任何关于这个主题的东西，也没有。据我了解，BIT 列最多支持 64 位。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:05:43.747

您的`bitnum`列是否定义为`bit(50)`？

我的猜测是该值已正确插入数据库。之后的一切都需要进行一些测试。

当您说“phpMyAdmin 和 PHP 出于某种原因输出是这样的：`00001100110011100000111000001101100011000000111000`”时，您是否使用了一些查询？

我尝试使用 PhpMyAdmin，但它显示`bit`列为空，`NULL`或其他。即使使用 PhpMyAdmin 的 SQL 查询界面也没有显示它们应该出现的值。尝试一些其他的数据库管理软件。我使用[Sequel Pro](http://www.sequelpro.com/)，它会显示`bit`输入数据库的值。（也许 PhpMyAdmin 也以某种方式做到了，我只是不知道怎么做。）

至于 PHP 引擎，嗯……看[我有趣的问题](https://stackoverflow.com/questions/15106985/mysql-select-bit1-shows-as-string3)。某些 PHP 版本中可能存在错误。至少与此类似的查询应该检索到正确的值。

```
SELECT (bitnum + 0) AS my_multiple_bit FROM features 
```

这是我提出这个问题[的 RTM 时刻](http://dev.mysql.com/doc/refman/5.0/en/bit-field-literals.html)`If "+ 0" is not used the value of a bit(1) column is treated as binary string.`：（还要记住**PHP 版本**可能会导致它自己的问题。）

也许也`BIN(bitnum)`可以作为`(bitnum + 0)`. 尝试使用另外一个 PHP 引擎版本进行测试。如果一切正常，那么……那么一切正常。

顺便提一句。使用列是否有某些特定原因`bit(50)`？`int`或有什么问题`char`？（我用作`bit(1)`布尔值`true`/`false`只是为了好玩。`tinyint(1)`是我的另一个替代布尔值。我没有阅读[整篇文章](http://www.xaprb.com/blog/2006/04/11/bit-values-in-mysql/)，但也许`bit`​​列不是 MySQL 中列类型的最佳选择。）

# python - 在 Python 中分割文本

> ID：16154623
> 
> 赞同：1
> 
> 时间：2013-04-22T18:59:16.550
> 
> 标签：python, python-2.7

我正在编写一些脚本，它从网站捕获数据并将它们保存到数据库中。一些数据被合并，我需要拆分它们。我有这样的

```
Endokrynologia (bez st.),Położnictwo i ginekologia (II st.) 
```

所以我需要得到：

```
Endokrynologia (bez st.)
Położnictwo i ginekologia (II st.) 
```

所以我用python写了一些代码：

```
 #!/usr/bin/env python
# -*- encoding: utf-8

import MySQLdb as mdb
from lxml import html, etree
import urllib
import sys
import re

Nr = 17268
Link = "http://rpwdl.csioz.gov.pl/rpz/druk/wyswietlKsiegaServletPub?idKsiega="

sock = urllib.urlopen(Link+str(Nr))  
htmlSource = sock.read()                             
sock.close()
root = etree.HTML(htmlSource)
result = etree.tostring(root, pretty_print=True, method="html")
Spec = etree.XPath("string(//html/body/div/table[2]/tr[18]/td[2]/text())")
Specjalizacja = Spec(root)
if re.search(r'(,)\b', Specjalizacja):
    text = Specjalizacja.split()
    print text[0]
    print text[1] 
```

我得到：

```
Endokrynologia
(bez 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:02:00.600

你会尝试替换

```
text = Specjalizacja.split() 
```

和

```
text = Specjalizacja.split(',') 
```

不知道这是否能解决你的问题。

# java - 在Java中，如何同时遍历两个列表？

> ID：16154630
> 
> 赞同：5
> 
> 时间：2013-04-22T18:59:31.473
> 
> 标签：java

例如

```
for(String str : list1) {
...
}

for(String str : list2) {
...
} 
```

假设我们确定`list1.size()`equals `list2.size()`，如何在一个`for`语句中遍历这两个列表？

也许像`for(String str1 : list1, str2 : list2)`什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-22T19:01:54.833

您可以使用[迭代器](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#iterator%28%29)：

```
Iterator<String> it1 = list1.iterator();
Iterator<String> it2 = list2.iterator();
while(it1.hasNext() && it2.hasNext()) { .. } 
```

或者：

```
for(Iterator<String> it1 = ... it2..; it1.hasNext() && it2.hasNext();) {...} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-22T19:01:16.503

```
for(int i = 0; i< list1.size(); i++){
  String str1 = list1.get(i);
  String str2 = list2.get(i);
  //do stuff
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T19:00:56.853

`for`增强的循环不能同时遍历两个列表；您必须使用传统`for`循环遍历它：

```
for (int i = 0; i < list1.size(); i++)
{
    String str1 = list1.get(i);
    String str2 = list2.get(i);
    ...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T19:00:49.540

使用基本循环

```
for(int index=0; index < list1.size() ; index++){
  list1.get(index);
  list2.get(index);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-28T18:58:56.493

如果有人感兴趣，即使它们的大小不同，这也是将完全遍历两个列表的解决方案。

```
int max = Math.max(list1.size(), list2.size());
for(int i=0; i<max; ++i){
    if(list1.size()<i){
        list1.get(i);
    }
    if(list2.size()<i){
        list2.get(i);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T19:05:22.723

正如您所说，两个列表的大小相同，那么您可以使用“for”循环而不是“for-each”循环。您可以使用 list 的 get(int index) 方法在每次迭代期间获取值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-24T14:53:25.923

```
int index = 0;
for(String str1 : list1) {
    str2 = list2.get(index++);
} 
```

# java - 在 Java 中管理具有几乎相同属性的 2 个类的最佳方法

> ID：16154638
> 
> 赞同：3
> 
> 时间：2013-04-22T18:59:57.377
> 
> 标签：java, oop

我想首先说明由于超出此问题范围的原因，无法修改数据库。

话虽如此，问题在于我有 2 个数据库对象（T1、T2），它们具有几乎相同的属性，并且它们共享相同的 UI 代码和业务逻辑。含义取决于 UI 显示 T1 数据或 T2 数据的配置选项。所有用于管理数据的逻辑也是相同的。

我不想要的是让我的应用程序逻辑代码中到处都是`instanceof`操作符，并且基本上管理 2 组相同的代码。所以我的解决方案是创建一种将 T1 或 T2 作为构造函数的包装类 (TCombo)。所有的 getter 和 setter 都有类似的设计

```
public String getProp1() {
    if(o instanceof T1) ((T1)o).getProp1();
    else(o instanceof T2) ((T2)o).getProp1();
} 
```

并且基本上也遵循设置器，所以当我设置一个值时，数据库对象被正确设置。这样做让我可以使用一组代码并在整个代码中管理这个 TCombo 类，效果很好。问题是效率很糟糕，而且由于我的应用程序处理大型数据集，因此必须为数据集中的每个项目创建这个 TCombo 类会产生可怕的加载时间。

我的问题是：管理这些类的最佳方法是什么，这样我就不必维护 2 组逻辑代码并且也有速度？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T19:02:54.907

这或多或少是接口被设计用来处理的，所以你`T`用你常用的 getter 和 setter 设置了一个类似的接口，然后拥有`T1`并`T2`实现它。两者通用的 then 代码可以传递对接口的引用，并调用通用方法，而无需调用`instanceof`. 这将使您有可能在单个实例的 getter 和 setter 中实现自定义代码（例如，如果您想在`set`方法中`T1`而不是在方法中进行验证或其他操作`T2`等）

另一种选择是拥有一个您的两个 DB 对象都扩展的公共基类，并且该基对象包含它们之间的所有公共字段。然后你只需传递对基类的引用。这具有不必在同一个地方实现相同的 getter 和 setter 的额外好处。

在任何一种情况下，您都需要使用`instanceof`和 强制转换来访问和 独有的方法`T1`，`T2`但您应该能够少得多地这样做。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T19:02:22.247

你应该看看接口，你可以创建一个接口，让 T1 和 T2 实现接口。那么你只需要创建一个 T1 或 T2 实例，你的代码就可以工作了。您还可以查看 liskov 替代原则。

# python - 如果元素中有某个字符串，则删除元素

> ID：16154640
> 
> 赞同：4
> 
> 时间：2013-04-22T19:00:05.050
> 
> 标签：python, list

我有一个清单`['1 2 4 5 0.9', '1 2 4 5 0.6', '1 2 4 5 0.3', '1 2 4 5 0.4']`

我还有另一个清单：`[0.9, 0.3, 0.7, 0.8]`

我想使用第二个列表，第一个列表元素包括第二个列表中的内容，然后元素被删除，所以第一个列表最终如下：

```
[1 2 4 5 0.6', '1 2 4 5 0.4'] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T19:03:55.373

你的意思是这样的：

```
>>> lst = ['1 2 4 5 0.9','1 2 4 5 0.6','1 2 4 5 0.3','1 2 4 5 0.4']
>>> s = set([0.9,0.3,0.7,0.8])
>>> [x for x in lst if float(x.split()[-1]) not in s]
['1 2 4 5 0.6', '1 2 4 5 0.4'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:34:10.220

这是执行此操作的更通用方法。我意识到这可能不是最好的方法，但这不是我的想法。

```
>>> listOne = ['1 2 4 5 0.9', '1 2 4 5 0.6', '1 2 4 5 0.3', '1 2 4 5 0.4']
>>> listTwo = [0.9, 0.3, 0.7, 0.8]
>>> finalList = []
>>> for element in listOne:
       flagBit = 0
       for number in element.split():
           if float(number) in listTwo:
               flagBit = 1
               break
       if flagBit == 0:
           finalList.append(element) 
```

# javascript - 在 angular.js 控制器中为内部应用程序状态定义变量以显示/隐藏元素

> ID：16154641
> 
> 赞同：1
> 
> 时间：2013-04-22T19:00:09.733
> 
> 标签：javascript, html, angularjs

我在几种情况下都遇到过这个问题，但让我们在这里举一个例子。假设我有一个表单提交的交互流程。它由三个步骤组成，例如，数据输入步骤、双重检查步骤和确认步骤。在每个步骤中，我将使用 ng-show/ng-hide 显示不同的相关信息以及表单。我现在这样做的方式是像状态机一样定义流，并使用内部变量（例如currState）来表示当前状态，并在切换到不同状态时修改变量。在 ng-show/ng-hide 中，我检查 currState 变量以显示/隐藏元素。看起来像这样：

在我的 Angular 控制器中：

```
$scope.currState = 'DATA_INPUT'; 
```

在我的 HTML 中：

```
<div ng-show="currState == 'DATA_INPUT'"></div> 
```

我想知道是否有对这种用例或最佳实践/模式的本地支持，因为我现在做的方式很容易出错并且不是很灵活。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:17:35.970

您可以`ngSwitch`为此使用：

[http://docs.angularjs.org/api/ng.directive:ngSwitch](http://docs.angularjs.org/api/ng.directive:ngSwitch)

所以：

```
<div ng-switch on="state">
        <div ng-switch-default>Fist. <button ng-click="state='second'">Next</button></div>
        <div ng-switch-when="second">Second. <button ng-click="state='final'">Next</button></div>
        <div ng-switch-when="final">Final</div>

</div> 
```

# java - 拖动项目时滚动gridview（作为阴影）

> ID：16154642
> 
> 赞同：10
> 
> 时间：2013-04-22T19:00:14.720
> 
> 标签：java, android, drag-and-drop, android-gridview

我正在为 api > 14 进行开发，并且我已经在`GridView`.

但是，将项目拖动到屏幕的顶部或底部时，`GridView`不会滚动。

我想让它沿着你拖动项目的方向滚动，当你移动到边缘时会变得更快，而当你将项目移回屏幕的垂直中心时会变慢。

当然，这种功能在任何拖放操作中都应该是标准的吗？

无论如何，有人知道解决这个问题的最佳方法吗？

**更新**：我实际上无法在互联网上找到一个甚至尝试使用拖动的网格项目滚动的示例（我在这里遗漏了什么吗？）更不用说解决我的问题了。

如何让可拖动项目（显示为阴影）滚动网格视图？我按如下方式分配阻力：

```
int gridChildPosition = position - mGridView.getFirstVisiblePosition();                     
ViewFlipper gridItem = (ViewFlipper) mGridView.getChildAt(gridChildPosition);

ClipData data = ClipData.newPlainText("", "");
DragShadowBuilder shadowBuilder = new View.DragShadowBuilder(gridItem);

if (mGridView.startDrag(data, shadowBuilder, gridItem, 0)) {

    int lastVisiblePosition = mGridView.getLastVisiblePosition() - mGridView.getFirstVisiblePosition();
    for (int i=0; i<=lastVisiblePosition; i++) {
        if (i == gridChildPosition) {
            continue;
        }
        mGridView.getChildAt(i).setOnDragListener(new GridItemDragListener(position));
        mGridView.getChildAt(i).setAlpha(0.4f);
    }
} 
```

上面的代码创建了可拖动的阴影，并且所有其他项目当前都变暗了。但我不确定如何让阴影滚动网格视图。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-02T23:06:18.110

Drag Events 最酷的地方在于，您也可以在 parent 中监听`ViewGroup` **它们**。扩展`GridView`并覆盖`onDragEvent`到监视器`DragEvent.ACTION_DRAG_LOCATION`。在那里，获取拖动的 Y 坐标 ( `event.getY()`)。确保从 中返回 true `ACTION_DRAG_STARTED`，否则您将不会在 中收到事件`ACTION_DRAG_LOCATION`。

确定您的“命中框”，可能使用[jaibatrik 建议](https://stackoverflow.com/a/16155950/377260)的技术，或者仅使用 GridView 测量高度的百分比。

使用 可能最有意义`smoothScrollByOffset(int offset)`，这样您就可以实现步进/指数滚动。这意味着，用户将拖动的项目保留在点击框中的时间越长，偏移量就越大。

对于开源库/组件来说，这听起来像是一个很酷的想法。;-)

**编辑：**

这是一个如何执行此操作的示例：

```
import android.app.Activity;
import android.content.ClipData;
import android.content.ClipData.Item;
import android.content.Context;
import android.os.Bundle;
import android.util.Log;
import android.view.DragEvent;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemLongClickListener;
import android.widget.ArrayAdapter;
import android.widget.GridView;

public class GridDragActivity extends Activity implements OnItemLongClickListener {

    private static final String TAG = "GridDragActivity";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        MyGridView gridView = new MyGridView(this);
        gridView.setNumColumns(3);
        gridView.setOnItemLongClickListener(this);
        gridView.setAdapter(new ArrayAdapter<String>(
                this,
                android.R.layout.simple_list_item_1,
                COUNTRIES));

        setContentView(gridView);
    }

    @Override
    public boolean onItemLongClick(AdapterView<?> parent, View view, int position,
            long id) {

        ClipData data = ClipData.newPlainText((String) view.getTag(),
                String.valueOf(position));
        View.DragShadowBuilder shadow = new View.DragShadowBuilder(view);
        view.startDrag(data, shadow, null, 0);

        return true;
    }

    class MyGridView extends GridView {

        private static final int THRESHHOLD = 200;
        private static final int OFFSET = 10;

        public MyGridView(Context context) {
            super(context);
        }

        @Override
        public boolean onDragEvent(DragEvent event) {

            int height = getMeasuredHeight();

            switch (event.getAction()) {
                case DragEvent.ACTION_DRAG_STARTED:
                    return true;

                case DragEvent.ACTION_DRAG_LOCATION:

                    float y = event.getY();
                    if (height - y < THRESHHOLD) {
                        smoothScrollByOffset(OFFSET);
                    } else if (height - y > height - THRESHHOLD) {
                        smoothScrollByOffset(-OFFSET);
                    }

                    return true;

                case DragEvent.ACTION_DROP:

                    ClipData data = event.getClipData();
                    Item item = data.getItemAt(0);
                    int start = Integer.valueOf((String) item.getText());
                    int end = pointToPosition((int) event.getX(), (int) event.getY());

                    Log.i(TAG, "DROP started at = " + start + ", ended at = " + end);

                    return true;
            }

            return super.onDragEvent(event);
        }
    }

    static final String[] COUNTRIES = new String[] {
        "Afghanistan", "Albania", "Algeria", "American Samoa", "Andorra",
        "Angola", "Anguilla", "Antarctica", "Antigua and Barbuda", "Argentina",
        "Armenia", "Aruba", "Australia", "Austria", "Azerbaijan",
        "Bahrain", "Bangladesh", "Barbados", "Belarus", "Belgium",
        "Belize", "Benin", "Bermuda", "Bhutan", "Bolivia",
        "Bosnia and Herzegovina", "Botswana", "Bouvet Island", "Brazil",
        "British Indian Ocean Territory",
        "British Virgin Islands", "Brunei", "Bulgaria", "Burkina Faso", "Burundi",
        "Cote d'Ivoire", "Cambodia", "Cameroon", "Canada", "Cape Verde",
        "Cayman Islands", "Central African Republic", "Chad", "Chile", "China",
        "Christmas Island", "Cocos (Keeling) Islands", "Colombia", "Comoros", "Congo",
        "Cook Islands", "Costa Rica", "Croatia", "Cuba", "Cyprus", "Czech Republic",
        "Democratic Republic of the Congo", "Denmark", "Djibouti", "Dominica",
        "Dominican Republic",
        "East Timor", "Ecuador", "Egypt", "El Salvador", "Equatorial Guinea", "Eritrea",
        "Estonia", "Ethiopia", "Faeroe Islands", "Falkland Islands", "Fiji", "Finland",
        "Former Yugoslav Republic of Macedonia", "France", "French Guiana", "French Polynesia",
        "French Southern Territories", "Gabon", "Georgia", "Germany", "Ghana", "Gibraltar",
        "Greece", "Greenland", "Grenada", "Guadeloupe", "Guam", "Guatemala", "Guinea",
        "Guinea-Bissau",
        "Guyana", "Haiti", "Heard Island and McDonald Islands", "Honduras", "Hong Kong",
        "Hungary"
    };
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T20:17:09.550

我认为您需要使用方法`smoothScrollToPosition(int position)`或`smoothScrollByOffset(int offset)`. `GridView`在屏幕的顶部和底部取两个矩形。如果在拖动时在这些矩形上接收到触摸事件，则滚动`GridView`. `getLastVisiblePosition()`您可以使用该方法在任何给定时间获取最后一个可见位置。

# sqlalchemy - 使用 sqlalchemy 获取数据库的描述

> ID：16154648
> 
> 赞同：1
> 
> 时间：2013-04-22T19:00:41.697
> 
> 标签：sqlalchemy, turbogears

如何使用 sqlalchemy 找出数据库的描述，就像 django 的 sqlall 命令一样。

```
$ python manage.py sqlall 
```

我可以在 turbogears admin 或 sqlalchemy 中运行类似于 sqlall 的东西，我可以使用它来获取创建表或所有当前模型的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T22:49:37.500

您想查看[表反射](http://docs.sqlalchemy.org/en/rel_0_8/core/schema.html#metadata-reflection)以及[检查](http://docs.sqlalchemy.org/en/rel_0_8/core/schema.html#fine-grained-reflection-with-inspector)器。

# .net - 如何检测 WCF MSMQ 绑定的消息到达时间

> ID：16154649
> 
> 赞同：2
> 
> 时间：2013-04-22T19:00:47.947
> 
> 标签：.net, wcf, msmq

我有一个使用 WCF MSMQ 绑定的服务。在服务器上，需要引入一些延迟，例如 5 秒。为此，该服务希望检测消息到达的时间。

我搜索 OperationContext.Current.IncomingMessageHeaders 和 OperationContext.Current.IncomingMessageProperties 但找不到该属性。

反正有没有得到这个时间戳？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-19T03:53:09.497

不要认为消息标头上有这样的属性-除非您在退出时将其添加为自定义标头...然后您可以提取它..？

你是在节流之后吗？？？参见例如[http://msdn.microsoft.com/en-us/library/ms751436(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/ms751436%28v=vs.110%29.aspx)

# javascript - 使用 JavaScript 函数打印时如何打印隐藏的 DIV

> ID：16154650
> 
> 赞同：2
> 
> 时间：2013-04-22T19:00:48.820
> 
> 标签：javascript, jquery, asp.net, function, printing

我有一个javascript打印功能：

```
 function printDetails() {
        var printContent = document.getElementById('<%= divMail.ClientID %>');

        var windowUrl = 'about:blank';
        var uniqueName = new Date();
        var windowName = 'Print' + uniqueName.getTime();
        var printWindow = window.open(windowUrl, windowName, 'left=500,top=500,width=0,height=0');
        printWindow.document.write(printContent.innerHTML);

        printWindow.document.close();
        printWindow.focus();
        printWindow.print();

        printWindow.close();

        return false;
    } 
```

我有以下 HTML：

```
<div id="divMail" runat="server" >
    <div id="showTopDetailsContent" style="display: none; position:relative;">
        MORE HTML
    </div>
</div> 
```

以及以下 JQuery/脚本：

```
$('#showTopDetailsContent').toggle(300); 
```

问题：当我打印时，我得到了 divMail (DIV) 的内容并将它们发送到打印功能，问题是因为我在 divMail 中有一个隐藏的 DIV，它不会显示在打印中。如何使隐藏 DIV 的打印功能显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T19:16:14.170

试试这个：

```
printWindow.document.getElementById('showTopDetailsContent').style.display='block'; 
```

之后

```
printWindow.document.write(printContent.innerHTML); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T19:03:15.323

您可以将其指定为可见以在 CSS 中打印：

```
@media screen {
    #showTopDetailsContent { display: none; }
    #showTopDetailsContent.show { display: block; }
}
@media print {
    #showTopDetailsContent { display: block !important; }
} 
```

而不是使用`.toggle()`which 应用内联样式，而是使用一个类。

```
$('#showTopDetailsContent').toggleClass('show'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-08T22:12:50.907

你需要在 CSS 中抑制边框

```
/* stop page from printing footer */
@page {
    size: auto;   /* auto is the initial value */
    margin: 0mm;  /* this affects the margin in the printer settings */
} 
```

但这会使您的内容接近边缘，因此我会将所有内容都包装在带有一些填充的 DIV 中

# module - Dojo 在哪里存储所需的模块？需要调查是否加载了某些内容

> ID：16154652
> 
> 赞同：0
> 
> 时间：2013-04-22T19:00:52.807
> 
> 标签：module, dojo, require

我想知道是否有人知道我如何获得对实际数组或关联数组或在 Dojo 中存储加载模块的任何数据结构的引用。

我正在做的是：我在一个团队中工作。我们有一个相当复杂的页面，它需要很长时间才能加载，因为它必须等待一些需要很长时间的 Ajax 调用。此外，它依赖于许多必需的 Dojo 模块。所以我的同事设计了一种方法来加载这个“模板”一次，然后通过使用标签监听器刷新我正在处理的“实际”页面。

所以无论如何，为了加快开发速度，我需要能够重新加载我编辑过的自定义 Dojo 模块。我的意思是，当我编辑我们的一个模块时，我不想重新加载其他所有内容。就这么一个模块。

我正在使用require.undef，但这只是停止工作。而且我想看看我是否可以获得对模块实际存储位置的引用，以便我可以在 Firebug 中查看它。

谢谢！！

# sql - 只需要在存储更改日期的表中提取最后一个日期 SQL / ODBC

> ID：16154653
> 
> 赞同：0
> 
> 时间：2013-04-22T19:00:54.567
> 
> 标签：sql, odbc

希望有人可以帮助我。我正在尝试通过 ODBC/ms 查询获取即将发布的标题列表（我从事出版工作）。我希望（除其他外）显示他们的内部状态（已批准、印前等）。数据库存储状态的更改日期。我似乎每个标题的每个状态都有一行。因此，如果标题已更改状态 6 次，我将得到 6 行。但我只想显示最新状态...

日期在 BL_PROJECT_TO_STATUS.STATUS_DATE 中（我在下面插入了一个日期条件，只是为了让它更明显）。

如何才能做到这一点？我对 ODBC 很陌生，非常感谢。

```
SELECT DISTINCT 
    BL_PROJECT.EXP_PUB_DATE, BL_PROJECT.EAN, BL_PROJECT.TITEL,
    MEDIATYPE.DESCRIPTION, BL_PROJECT_STATUS.DESCRIPTION
FROM 
    FIRMA1.BL_PROJECT BL_PROJECT, FIRMA1.BL_PROJECT_STATUS BL_PROJECT_STATUS,   
    FIRMA1.BL_PROJECT_TO_STATUS BL_PROJECT_TO_STATUS, FIRMA1.MEDIATYPE MEDIATYPE
WHERE 
    BL_PROJECT.PROJECT_ID = BL_PROJECT_TO_STATUS.PROJECT_ID AND  
    BL_PROJECT_TO_STATUS.STATUS_ID = BL_PROJECT_STATUS.CODE AND 
    BL_PROJECT.MEDIATYPE = MEDIATYPE.ID AND 
    ((BL_PROJECT.PROJECT_TYPE = 2) AND 
     (BL_PROJECT.EXP_PUB_DATE Between SYSDATE AND (SYSDATE+90)) AND 
    (BL_PROJECT_TO_STATUS.STATUS_DATE = {ts '2013-11-20 00:00:00'}))
ORDER BY 
     BL_PROJECT.EXP_PUB_DATE, BL_PROJECT.EAN, BL_PROJECT.TITEL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:06:28.427

这是一般的想法。您可以使用您的表和字段名称对其进行调整。

```
select somefields
from sometables
join
(select something, max(datetimefield) maxdt
from table1
where whatever
group by something ) temp on table1.datetimefield = maxdt
etc 
```

# android - android集成新的facebook sdk 3.0.1并执行登录

> ID：16154659
> 
> 赞同：1
> 
> 时间：2013-04-22T19:01:01.243
> 
> 标签：android, facebook, android-facebook

我正在尝试将 facebook sdk 升级到 3.0.1 版，但在执行登录时遇到了麻烦。登录后我在会话中获得的访问令牌是 ACCESS_TOKEN_REMOVED ，我不知道为什么。

这是登录代码：

```
if (!session.isOpened() && !session.isClosed()) {
                session.openForRead(new Session.OpenRequest(SplashScreen.this).setCallback(new StatusCallback() {

                    @Override
                    public void call(Session session, SessionState state, Exception exception) {
                        if (session.isOpened()) {
                            loginIfSuccessfullAuth(true);

                    }
                }));
            } 
```

内部 if 中的会话包含访问令牌 ACCESS_TOKEN_REMOVED

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-06T13:42:06.447

如果您`ACCESS_TOKEN_REMOVED`在日志中看到，请确保您正在打印`session.getAccessToken().getToken()`. 如果您写入日志，将调用`session.getAccessToken()`AccessToken-object 的- 方法，它将用.`toString``ACCESS_TOKEN_REMOVED`

# database - Django Models：如何表达以下逻辑......？

> ID：16154660
> 
> 赞同：0
> 
> 时间：2013-04-22T19:01:02.337
> 
> 标签：database, django, django-models, many-to-many, one-to-many

我在架构上遇到困难，我需要以下逻辑的帮助。

我有一张桌子`Client`和一张桌子`Rights`。该表`Client`表示具有某些属性的客户端，该表表示`Rights`每个客户端的可用权限。

所以，我想为客户分配一个可用权限列表（每个用户可以有不同的权限，但都来自表格`Rights`），我该如何在模型中做到这一点？

在那之后我怎样才能找回分配给他`Client`的？`Rights`

### 客户

```
name = models.CharField(max_length=256)
user = models.ForeignKey(User)
bio = models.TextField(null=True, blank=True)
website = models.URLField(null=True) 
```

### 权利

```
key = models.CharField(unique=True, max_length=255, db_index=True)
title = models.CharField(max_length=100, blank=True)
description = models.TextField(blank=True) 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:10:06.647

只需在客户端模型中使用[ManyToMany](https://docs.djangoproject.com/en/dev/topics/db/examples/many_to_many/)字段。毕竟，这是一个多对多的关系。

如果每个权限对于每个客户端都是唯一的，那么请改用从权限到客户端的 ForeignKey。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T20:15:53.420

使用多对多字段

```
class Rights(models.Model):
    key = models.CharField(unique=True, max_length=255, db_index=True)
    title = models.CharField(max_length=100, blank=True)
    description = models.TextField(blank=True)

class Client(models.Model):
    name = models.CharField(max_length=256)
    user = models.ForeignKey(User)
    bio = models.TextField(null=True, blank=True)
    website = models.URLField(null=True)
    rights = models.ManyToManyField(Rights) 
```

您可以使用

```
c = Client.objects.get(id=1)
rights = c.rights.all() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T22:21:18.907

豪尔赫，对不起，我没有足够的业力直接回复你的评论。

```
Question: The rights = c.rights.all() will be instance of Rights or instance of the Client? 
```

->`Rights`实例。

`Rights`链接到`Client`对象的所有实例。

# java - 从任何地方访问数据

> ID：16154668
> 
> 赞同：0
> 
> 时间：2013-04-22T19:01:22.510
> 
> 标签：java, user-interface

我的程序中有几个框架。我需要从任何地方访问数据我该怎么做？

```
public class Main{
    public int aData;
    public static void main(String[] args){
        Frame1 f = new Frame1();
    }
}

public Frame1 extends JFrame{

    // ....
    public void foo(){

        // I need aData in here.

    }

} 
```

编辑1：我有多个数据，当其中一个更新时，主类中的数据应该更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:04:46.153

只需在`Frame1`构造函数中传递它

```
public class Main{
    public int aData;
    public static void main(String[] args){
        Frame1 f = new Frame1(aData);
    }
}

public Frame1 extends JFrame{
    private int data;
    public Frame1(int data) {
        this.data = data;
    }

    // ....
    public void foo(){
        // use data here
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T19:05:48.880

最重要的问题是为什么你认为你需要这样做。如果您真的想要从任何地方访问的东西，您可以在某个地方将其设置为公共静态成员，但这是一种可怕的设计实践。

一般来说，你想让你的设计模块化，所以每件事只取决于它实际需要什么。然后，您可以向它传递一个对象，该对象提供它所需的数据，例如配置设置。这使您可以轻松地为单元测试等模拟事物，并减少对程序进行更改时需要重写的代码量。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-22T19:03:24.240

尝试将 Fram1 实例设为静态

# ios - 密码保护 iPhone 中的文件夹

> ID：16154670
> 
> 赞同：1
> 
> 时间：2013-04-22T19:01:26.693
> 
> 标签：ios, security, encryption, ios6

我们需要在应用程序中实施文件保护。尽管苹果提供了文件保护属性，但我们对 iPhone 越狱或设备没有密码保护时的行为表示怀疑。为了实现这一点，一个想法是加密所有文件、文件名等。这是一条很长的路。我在想，如果可能的话，不要加密所有东西，而是只在顶层添加保护。假设我在存储所有应用程序文件夹和文件的文档文件夹中有一个名为“顶级文件夹”的文件夹。使用密码密钥，我可以只将锁添加到顶部文件夹吗？它将如何运作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:09:29.677

不，你不能。文件夹只是文件路径的一部分，它不能更改（加密）文件中的数据。

在 Mac 上，可以将加密的文件系统挂载到文件夹中，但在 iOS 上则没有这样的功能。

对于 iOS 上的加密，您必须分别加密/解密每个文件。确保将加密密钥保存到钥匙串中，并即时加密/解密文件。不要将临时解密文件留在任何地方。

# google-chrome - Chrome 会记住 301 重定向多长时间？

> ID：16154672
> 
> 赞同：67
> 
> 时间：2013-04-22T19:01:30.823
> 
> 标签：google-chrome, http-status-code-301, http-redirect, http-response-codes

我有一个新的作者站点，我想从以前使用 Apache 重写将流量反弹到我的 Amazon 站点 [R=301,L] 的域中提供该站点，我想将其用作我自己的站点。至少我还有一个临时的新域。

是否有（是否有）特定的时间段，特别是 Chrome 会存储 301 缓存重定向？其他一些问题，[浏览器缓存 HTTP 301 多长时间？](https://stackoverflow.com/questions/9130422/how-long-do-browsers-cache-http-301s)以及[不同浏览器如何实现301重定向？](https://stackoverflow.com/questions/4454787/how-is-301-redirect-implemented-by-different-browsers)，询问，给出的答案是某些浏览器不缓存，某些缓存用于会话，Chrome 和 IE10 缓存的方式可以在浏览器重启后继续存在，*但没有指定多长时间*。比测试的其他浏览器更长，但数量仍未指定。

那么 Chrome 将 301 重定向存储多长时间？引用的问题没有具体说明 Chrome 或 IE10 是什么。

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2017-03-29T13:27:49.433

我通过打开开发工具（F12）解决了这个问题，单击“网络”，然后单击“保留日志”复选框，并发出导致缓存 301 的请求。右键单击导致 301 的请求，然后单击“清除浏览器缓存”。再试一次，然后 301 应该不再被缓存。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2016-01-29T20:34:52.813

转到 chrome://net-internals 并在最右侧打开下拉菜单并选择“清除缓存”。从版本 48 开始，这是我清除缓存 301 的唯一方法。

更新：不幸的是，从第 71 版（2018 年 12 月）开始，Google 已经删除了 net-internals 功能。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-08-13T13:57:34.693

“ *view-source: ”解决方案在**Google Chrome*中对我不起作用；但是使用开发人员工具并将“**禁用缓存**”设置为真/在**Network** -tab 中选中会强制重新评估。顺便说一句：可以在匿名会话 (Ctrl+Shift+N) 中或通过在 URL 中添加一些虚假的查询参数（如“?foo=bar”）来实现临时规避。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-03-19T08:51:10.527

在 Chrome 或 Firefox 中，您可以通过键入“view-source:redirect.yoursite.com”并按 Enter 来刷新重定向。然后，刷新该页面。现在，这应该会强制 Chrome 或 Firefox 刷新重定向。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-04-24T11:57:45.617

最简单的解决方案是打开 F12 开发工具，检查禁用缓存，然后访问生成 301 重定向的地方。这应该更新到较新的版本。

[![禁用缓存](https://i.stack.imgur.com/ZRxQb.png)](https://i.stack.imgur.com/ZRxQb.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-04-29T06:27:38.710

例如，我们缓存了从[http://example.com](http://example.com)到[https://example.com的重定向](https://example.com)

1.  转到网络工具
2.  检查“保留日志”
3.  转到[http://example.com](http://example.com)（它将重定向到 https）
4.  右键单击刷新按钮，然后单击“清空缓存和硬重新加载”

[截屏](https://i.stack.imgur.com/np5xU.png)

# computer-architecture - Ghz 到 MIPS？粗略估计有人吗？

> ID：16154676
> 
> 赞同：4
> 
> 时间：2013-04-22T19:01:46.293
> 
> 标签：computer-architecture

从到目前为止我所做的研究中，我了解到 MIPS 高度依赖于正在运行的应用程序或语言。

但是谁能给我他们对 MIPS 中 2.5 Ghz 计算机的最佳猜测？或任何其他 Ghz 数？

C++ 如果有帮助的话。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T19:15:29.167

MIPS 代表“每秒百万指令”，但对于现代计算机来说，这个值变得难以计算。许多处理器体系结构（例如构成大多数台式机和笔记本电脑的 x86 和 x86_64）都属于[CISC](http://en.wikipedia.org/wiki/Complex_instruction_set_computing)处理器类别。CISC 架构通常包含同时执行多个不同任务的指令。这样做的后果之一是某些指令比其他指令占用更多的时钟周期。因此，即使您知道时钟频率（在本例中为 2.5 GHz），每秒运行的指令数也主要取决于程序使用的指令。出于这个原因，MIPS 在很大程度上已不再用作性能指标。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-28T10:53:06.867

对于我的许多基准中的一些，在

[http://www.roylongbottom.org.uk/](http://www.roylongbottom.org.uk/)

我生成了一个汇编代码列表，从中可以计算出实际使用的汇编指令（请注意，这些不是 RISC 处理器使用的实际微指令）。以下包括基于这些和其他 MIPS 假设的 %MIPS/MHz 计算。

[http://www.roylongbottom.org.uk/cpuspeed.htm](http://www.roylongbottom.org.uk/cpuspeed.htm)

结果仅适用于 Intel CPU。您将看到 MIPS 结果取决于使用的是 CPU、缓存还是 RAM 数据。对于 2500 MHz 的现代 CPU，使用 CPU/L1 缓存的 MIPS 可能在 1250 到 9000 之间，但访问 RAM 中的数据要少得多。然后是 SSE SIMD 整数指令。用于基于寄存器的简单加法的实整数 MIPS 位于：

[http://www.roylongbottom.org.uk/whatcpu%20results.htm#anchorC2D](http://www.roylongbottom.org.uk/whatcpu%20results.htm#anchorC2D)

我的 2.4 GHz Core 2 CPU 运行速度高达 17531 MIPS。

罗伊

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T23:37:32.487

MIPS 正式代表*每秒百万指令*，但黑客词典将其定义为*无意义的处理器速度指示*。这是因为许多公司使用在实际应用中从未达到的营销理论最大值。例如，当前的英特尔处理器每个周期最多可以执行 4 条指令。在 2.5 GHz 遵循这个逻辑，它可以达到 10,000 MIPS。当然，在实际应用中，这个数字永远不会达到。slavik 已经提到的另一个问题是指令执行不同数量的有用工作。甚至还有 NOP，根据定义，它们对 MIPS 评级没有任何用处。

为了纠正这个问题，人们在 1980 年代开始使用*Dhrystone MIPS*。Dhrystone 是一个综合基准（即它不是基于有用的程序），一个 Dhrystone MIPS 是相对于 VAX 11/780 的基准性能定义的。这仅比上面的定义略显荒谬。

今天，性能通常通过[SPEC CPU](http://www.spec.org/cpu2006/)基准来衡量，这些基准基于真实世界的程序。如果您非常了解这些基准测试和您自己的应用程序，您可以做出合理的性能预测，而无需实际在相关 CPU 上运行您的应用程序。

他们的关键是要了解性能会因许多特征而有很大差异。例如，曾经有一个名为*The Many Faces of Go*的程序，它本质上在许多条件 if 子句中硬编码有关棋盘游戏的知识。该程序的性能几乎完全由分支预测器决定。其他程序使用不适合任何缓存的大量内存。这些程序的性能取决于主存储器的带宽和/或延迟。一些应用程序可能严重依赖浮点指令的吞吐量，而其他应用程序从不使用任何浮点指令。你明白了。如果不了解应用程序，就不可能做出准确的预测。

话虽如此，平均数量约为每个周期 2 条指令和 5,000 MIPS @ 2.5 GHz。然而，实数很容易低十倍甚至一百倍。

# javascript - AngularJs - forEach 范围数组 - 不工作

> ID：16154681
> 
> 赞同：2
> 
> 时间：2013-04-22T19:01:59.000
> 
> 标签：javascript, angularjs

**我知道我在做一些愚蠢的事情，所以请放纵我：**

**html:**

```
Filter: <input type="radio" ng-model="Type" value="Rear"> Rear
<input type="radio" ng-model="Type" value="Front"> Front
<br>
Select:
<name-value-select  entry="entry" field="axleType" options="filterTypes"></name-value-select> 
```

**控制器：**

```
$scope.$watch('Type', function (Type) {
    $scope.filterTypes = [];
    if ($scope.axleTypes == undefined || $scope.axleTypes == []) {
        $scope.axleTypes = API.GetAxleTypes;
    }
    angular.forEach($scope.axleTypes, function (type) {
        console.log('axleType: ' + type);
        console.log('Type: ' + type);
        if (axleType.Type == Type) {
            this.push(axleType);
        }
    }, $scope.filterTypes);
    $scope.filterTypes.sort(function (a, b) {
        return a.Description.localeCompare(b.Description);
    });
}); 
```

我什至不能循环通过我的手表函数中的轴类型数组。看起来它没有拾取一个奇怪的集合，因为如果未定义或 []，它会绕过填充轴类型。

我正在做一些如此愚蠢的事情，我看不到它。

**更新：根据杰森的要求**

**(1) 我的角度控制器：**

```
$scope.entry = {
    Description: ''
};
$scope.Type = 'Front';
$scope.entry.type = '';

$scope.$watch('Type', function (Type) {
    $scope.filterTypes = [];
    $scope.axleTypes = new API.GetAxleTypes(function (axleTypes) {
        angular.forEach($scope.axleTypes, function (axleType) {
            if (axleType.Type == Type) {
                this.push(axleType);
                }
        }, $scope.filterTypes);
    });

    $scope.filterTypes.sort(function (a, b) {
        return a.Description.localeCompare(b.Description);
    });
}); 
```

**(2)我的HTML：**

```
Filter: <input type="radio" ng-model="Type" value="Rear"> Rear
<input type="radio" ng-model="Type" value="Front"> Front
<br>
Select:
<name-value-select entry="entry" field="axleType" options="filterTypes"></name-value-select> 
```

没有更多错误 Jason，然而，当我切换两个单选按钮时，没有任何反应，即，当我选择后轴单选按钮时，前轴仍然显示。呃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:40:28.523

好的，酷。我认为这就是你想要做的。基本上，您首先加载数据，然后设置手表。这样我们就不会多次调用异步调用。我修改了 Plunker 以使用这种方法[http://plnkr.co/edit/lQbn4hXmJ1Z4YpKdb4u3?p=preview](http://plnkr.co/edit/lQbn4hXmJ1Z4YpKdb4u3?p=preview)：

```
$scope.axleTypes = API.GetAxleTypes(function () {
    $scope.$watch('Type', function (Type) {
        $scope.filterTypes = [];
        angular.forEach($scope.axleTypes, function (type) {
            console.log('axleType: ' + type);
            console.log('Type: ' + type);
            if (axleType.Type == Type) {
                this.push(axleType);
            }
            if(!$scope.$$phase) $scope.$digest();
        }, $scope.filterTypes);
    });
});

$scope.filterTypes.sort(function (a, b) {
    return a.Description.localeCompare(b.Description);
}); 
```

# xml - 如何在jar之外导入 spring xml

> ID：16154682
> 
> 赞同：3
> 
> 时间：2013-04-22T19:01:59.837
> 
> 标签：xml, spring, configuration

我有一个 spring xml 导入另一个 spring xml。现在我想通过将第二个 xml 放在 jar 之外来使其更灵活。

我想知道这样做吗？

```
 <import resource="pipeline.xml"/> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T19:29:01.793

有几种方法可以在 Spring 中指定资源的路径，根据您的要求，您可以在路径前加上`classpath:`（并指定类路径上的位置）或`file:`（文件系统资源）。[文档中的](http://static.springsource.org/spring/docs/3.0.x/reference/resources.html#resources-resource-strings)更多解释。

# c# - 在同一解决方案中集中多个项目的连接字符串

> ID：16154684
> 
> 赞同：15
> 
> 时间：2013-04-22T19:02:01.013
> 
> 标签：c#, connection-string, app-config

我目前在我的解决方案中有三个项目，它们都有自己的 App.config 文件，并且具有完全相同的连接字符串。

有没有办法整合连接字符串/app.config 文件，以便我只需要对一个位置进行更改？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2016-11-06T15:07:13.430

您可以在解决方案中的多个项目之间共享连接字符串，如下所示：

1.  在解决方案文件夹下使用您的连接字符串创建一个`ConnectionStrings.config`文件，该文件应仅包含该部分`connectionStrings`

2.  在您的项目中，将此配置文件添加为链接（添加现有项目，添加为链接）

3.  选择添加的文件并将其属性设置`Copy to Output Directory`为`Copy always`或`Copy if newer`
4.  在您的项目中，使用以下属性 `App.config`指向链接`ConnectionStrings.config`文件：`configSource``<connectionStrings configSource="ConnectionStrings.config" />`

**ConnectionStrings.config**

```
<connectionStrings>
    <add name="myConnStr" connectionString="Data Source=(local); Initial Catalog=MyDB;Integrated Security=SSPI;" providerName="System.Data.SqlClient" />
</connectionStrings> 
```

**应用程序配置**

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    ...
    <connectionStrings configSource="ConnectionStrings.config" />
    ...
</configuration> 
```

[阅读更多细节](https://salimbenhadou.wordpress.com/2016/11/06/centralize-and-share-connection-strings-among-multiple-projects/)......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T19:08:42.370

有几种方法可以做到：

1.  将通用配置设置放在 machine.config 中，如下[所示](http://msdn.microsoft.com/en-us/library/ms229697.aspx)
2.  将通用配置设置放在一个中心文件中，并链接到每个项目的 app.config 中，如下[所示](https://support.microsoft.com/en-gb/help/555396)
3.  将配置设置存储在注册表中

对我来说，我总是使用最后一个解决方案 :) 祝你好运！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-22T19:13:26.810

首先，看看这个帖子。它描述了如何在多个项目之间共享相同的 app.config。

[如何共享 App.config？](https://stackoverflow.com/questions/426245/how-to-share-app-config)

其次，看看另一篇文章，它描述了如何让不同的 app.config 文件引用一个包含连接字符串的共享 xml 文件。

[在 app.config 中使用 XML 包含或配置引用来包含其他配置文件的设置](https://stackoverflow.com/questions/480538/use-xml-includes-or-config-references-in-app-config-to-include-other-config-file)

# html - 多个伪类？

> ID：16154686
> 
> 赞同：0
> 
> 时间：2013-04-22T19:02:14.383
> 
> 标签：html, css

我已经搜索了帖子，但没有找到我正在寻找的解决方案......

我尝试链接这些伪类（：first-child & :hover），但没有成功。我本可以发誓这在过去对我有用，但我没有得到任何结果。我正在尝试一个纯 CSS 解决方案。任何帮助将非常感激。谢谢！

```
#main_nav ul li:first-child a:hover { color: green; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:09:44.100

我完全使用了你的代码，它对我来说很好，所以我猜你要么拼错了你的 ID，要么你没有正确选择它，或者它在其他地方被覆盖。

# git - 为什么“git tag -l”会为我和我的同事返回不同的列表？

> ID：16154691
> 
> 赞同：-1
> 
> 时间：2013-04-22T19:02:22.450
> 
> 标签：git, tags

我的同事为我们代码的特定版本创建了一个标签。他将其命名为“x”。今天，我想为自己获得“x”，所以我做了

`git tag -l`.

结果，我得到了“y”的列表。

我要求他做同样的事情（`git tag -l`）。他这样做了，他看到两个列表：“x”和“y”。他做了一个 git status；它说他很干净，没有什么可承诺的。

**为什么我看不到两个列表？** 我看到的其他问题和网站暗示这`git tag -l`就是查看所有列表所需的全部内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T19:05:11.133

您的同事很可能没有将标签向上游推送到遥控器中。

*   如果您的同事尚未执行此命令，请让他运行此命令：

    ```
    git push <REMOTE-NAME> --tags 
    ```

*   然后，您必须运行 fetch 以将与标签对应的 refs 获取到本地 repo 中：

    ```
    git fetch <REMOTE-NAME> --tags 
    ```

*   再次运行`git tags -l`以查看您是否看到您的同事看到的同一组标签。

# jquery - .on("click") 在 iOS 上不起作用

> ID：16154705
> 
> 赞同：1
> 
> 时间：2013-04-22T19:03:17.653
> 
> 标签：jquery, ios, click

我注意到

```
$("body").on("click", "#id", function(event) {... 
```

在 iOS 上不工作，而

```
$("#id").on("click", function(event) {... 
```

完美运行。相同的站点，相同的 jQuery（最新），相同的 DOM。我不能使用后者，因为#id 是动态添加的。

想法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-22T19:04:21.063

尝试如下一次：

```
$(document).on("click touchstart", "#id", function(event) {... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-27T13:59:11.680

如果您想添加点击而不使用触摸事件，您可以这样做（尽管它确实涉及代理嗅探）：

```
// Check if it is iOS
var isiOS = (navigator.userAgent.match(/(iPad|iPhone|iPod)/g) ? true : false);

if(isiOS === true) {

    // Store -webkit-tap-highlight-color as this gets set to rgba(0, 0, 0, 0) in the next part of the code
    var tempCSS = $('a').css('-webkit-tap-highlight-color');

    $('body').css('cursor', 'pointer')                                    // Make iOS honour the click event on body
             .css('-webkit-tap-highlight-color', 'rgba(0, 0, 0, 0)');     // Stops content flashing when body is clicked

    // Re-apply cached CSS
    $('a').css('-webkit-tap-highlight-color', tempCSS);

} 
```

[在http://www.texelate.co.uk/blog/post/124-add-a-click-event-to-html-or-body-on-ios-using-jquery/](http://www.texelate.co.uk/blog/post/124-add-a-click-event-to-html-or-body-on-ios-using-jquery/)上查看更多信息

# c# - LINQ 是否返回集合的深层副本？

> ID：16154706
> 
> 赞同：7
> 
> 时间：2013-04-22T19:03:18.237
> 
> 标签：c#, linq

假设我有一个名为 PeopleCollection 的`List<Person>`变量

在下面的语句中， newPeople 会得到 PeopleCollection 的深层副本吗？

```
var newPeople=(from p in PeopleCollection select p).ToList(); 
```

对 newPeople 的任何操作会影响 PeopleCollection 吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-22T19:04:50.477

这将创建一个新列表并将该列表中的所有项目添加到新列表中。它将执行所有这些项目的“浅”副本，因此如果这些项目是可变引用类型，则它们的变异将反映在任一集合中。

这意味着对任一列表本身的更改（添加项目、删除项目等）将不会反映在另一个列表中，即使列表中任何项目的突变将从任一集合中反映出来。

（总之，不，它不会。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T19:06:11.397

它返回一个`List`引用由 . 返回的相同对象的`Enumerable`。

# asp.net-mvc - ASP.NET MVC 4 单元测试 - 有没有办法用 Moq 模拟 HttpClientCertificate

> ID：16154708
> 
> 赞同：1
> 
> 时间：2013-04-22T19:03:20.003
> 
> 标签：asp.net-mvc, unit-testing

我的网络应用程序通过 piv 卡使用 PKI 身份验证。我通过 HttpClientCertificate.Subject 获取用户的唯一标识符信息。问题是当我进行单元测试时，mock 不会模拟这个类，因为它没有构造函数。我尝试按照此线程上的建议进行操作：

[如何模拟 HttpClientCertificate？](https://stackoverflow.com/questions/3634249/how-to-mock-httpclientcertificate)

但看起来他设置它的方式是通过控制器的构造函数注入客户端证书，我不想这样做，因为控制器已经可以访问客户端证书。我假设这就是他所暗示的，因为他正在使用某种类型的适配器模式。有人有更好的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:25:04.310

你为什么不把它包装到你自己的对象中呢？

```
class MyHttpClientCertificate
{
    public MyHttpClientCertificate(HttpClientCertificate foo) { ... }

    internal MyHttpClientCertificate() { ... }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:27:53.467

您的问题是代码使用 Request 对象来获取证书，但这不容易进行单元测试。

我要做的是添加一个函数委托，默认情况下，它将使用 Request 对象返回 HttpClientCertificate，但允许覆盖实现。

对于控制器，添加以下内容：

```
internal Func<HttpClientCertificate> HttpClientCertificateGetter = () => {
  return Request.ClientCertificate;
} 
```

并且在您的控制器中使用 HttpClientCertificateGetter 而不是使用请求。

然后在您的单元测试中模拟证书并将其分配给 getter 函数，如下所示：

```
var certMock = new Mock<HttpClientCertificate>();
HttpClientCertificate clientCertificate = certMock.Object;
requestMock.Setup(b => b.ClientCertificate).Returns(clientCertificate);
certMock.Setup(b => b.Certificate).Returns(new Byte[] { });

controller.HttpClientCertificateGetter = () => {certMock.Object}; 
```

# ios - 横屏模式下如何确定iPad右下角的坐标？

> ID：16154711
> 
> 赞同：2
> 
> 时间：2013-04-22T19:03:46.053
> 
> 标签：ios, ipad, landscape

我试图在主视图的*右下角*`buttView`放置一个子视图（ ）（来自代码，而不是来自 IB）。

 *以下代码*有效*

> ```
> const float bottom = self.frame.size.height;
> const float left   = self.frame.size.width;
> NSLog(@"bottom=%.1f left=%.1f", bottom, left);
> CGSize bz = buttView.frame.size;
> CGRect rc = CGRectMake(left-bz.width, bottom-bz.height, bz.width,bz.height);
> buttView.frame = rc;
> [self addSubview:buttView]; 
> ```

但我很*困惑*，因为根据日志消息，**bottom=1004.0 和 left=768.0 ，***并且*iPad处于**横向模式！**（宽度应该大于高度！？？）

此外，如果我在 IB 中*关闭“自动调整子视图”*，那么代码只有在我交换`bottom`and时才能工作`left`（但它不能完美工作，因为真正的宽度是 1024 而不是 1004）。

*我的问题是：当视图处于横向模式时，是否有一种优雅的方法来确定视图右下角的位置？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:10:12.257

如果您在 viewWillLayoutSubviews 中查看这些值，并且使用边界而不是框架，您将获得正确的值，并且如果您旋转设备，它们将被更新。*

# javascript - 在javascript文件中获取jsp值

> ID：16154713
> 
> 赞同：6
> 
> 时间：2013-04-22T19:03:51.140
> 
> 标签：javascript, jsp

我在 abc.jsp 中有以下代码：

```
<%@page import="soundcap.Soundcap"%>

<%

    Soundcap cfl = new Soundcap();
    var sfl = cfl.playFile();

%> 
```

我需要外部 javascript 文件 (jcode.js) 中的 sfl 值。如何从 javascript 中的 jsp 获取此值（sfl）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:39:02.607

用这个...

```
<%
//get your sfl
 %>
  <input type="hidden" id="sfl" value="<%=sfl%>"> 
```

在你的 js 文件中使用

```
var sfl=document.getElementById("sfl").value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-01T08:23:27.317

只需将您的 JSP 值放在输入标记中，如下所示：

```
<input type="hidden" id="value" value="${value}"> 
```

并像这样在 JS 中获取这个值：

```
var value = document.getElementById("value").value; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T19:10:29.837

很简单：

```
<% 
//get your sfl
%>

<script>
var xyz = <% out.print(sfl); %>;
</script> 
```

# tsql - 更新表中的单个列

> ID：16154715
> 
> 赞同：1
> 
> 时间：2013-04-22T19:03:58.797
> 
> 标签：tsql

我有一个按月按供应商列出的库存美元表。我希望能够每天更新当月的美元金额，但我不想丢失上个月的数据。这是我的基本查询：

```
DELETE Inventory_Dollars 
FROM Inventory_Summary
WHERE MonthNum = '4'

SELECT
SUM(Cost*OnHand) AS Inventory_Dollars
FROM Inventory 
```

Inventory 表将始终保存当前数据。如何将 Select 语句中的数据插入到 Inventory_Summary 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:09:04.067

只需在查询前加上 INSERT：

```
INSERT INTO Inventory_Summary
            (Inventory_Dollars)
SELECT SUM(Cost * OnHand) AS Inventory_Dollars
FROM   Inventory 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:14:56.917

如果您已经插入了当月的 inventory_dollars 金额，那么您可以每天使用以下内容更新该值：

```
UPDATE Inventory_Summary
SET Inventory_Dollars = (
    SELECT (Cost * OnHand)
    FROM Inventory
)
WHERE MonthNum = DATEPART(m, GETDATE()) AND Year = DATEPART(year, GETDATE()) 
```

DATEPART 可用于填写当前日期的月份数，GETDATE()。那么您将不会更新过去几个月的 inventory_dollars 值。

编辑：还在 where 子句中添加了一年，因此您不会更新过去几年的月份。

编辑 2：如果您在 SET 中使用子查询，请确保只能返回一个结果。

# ubuntu - 如何为不同的 HTML URL 路径生成单独的日志？

> ID：16154718
> 
> 赞同：1
> 
> 时间：2013-04-22T19:04:11.923
> 
> 标签：ubuntu, logging, apache2

我正在尝试根据目录访问来打破我网站的日志记录，因此我正在寻求对这个[答案](https://stackoverflow.com/a/1460790/32836)（或这个[答案](https://stackoverflow.com/a/10001437/32836)）的详细说明：在哪个文件中放置建议的答案？

我将以下内容放入我的`/etc/apache2/apache2.conf`（实际上是通过 an `Include my-logging.conf`）：

```
SetEnvIf Request_URI "^/download/.+$" download_access
CustomLog /home/jamie/apache-logs/download.log common env=download_access 
```

目录`/home/jamie/apache-logs/`和其中的文件是通用可写的，但是当我通过浏览器 ( `http://download/index.html`) 访问资源时，主访问日志 ( `/var/log/access.log`) 会更新，但不是我希望的日志：`/home/jamie/apache-logs/download.log`保持不变。

我有理由确定`mod_setenvif`已经启用：

```
$ sudo a2enmod setenvif
Module setenvif already enabled 
```

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T16:01:59.910

拍头！

正则表达式错误：

```
SetEnvIf Request_URI "^/download/.+$" download_access 
```

应该：

```
SetEnvIf Request_URI "^/download/.*$" download_access 
```

注意`*`与`+`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T14:58:02.670

编辑：

不，这是正则表达式。打头是对的。

* * *

您是否查看`/etc/apache2/apache2.conf`过其他包含的站点文件中或其他包含的位置文件（可能`/etc/apache2/sites-enabled/foo.conf`或`/etc/apache2/conf/foo.conf`或其他什么......我使用不同的发行版）具有不同的**CustomLog** 定义？

很可能有一些东西压倒了你的陈述。放置**CustomLog**指令的最佳位置是在`<VirtualHost>`定义站点的节中。这样，该指令将具有最高优先级，因此它将覆盖服务器范围的设置。我认为正在发生的是您的定义正在为服务器设置默认值，但更具体的 customlog 语句位于 VirtualHost 内部并覆盖它。

# python - Django + MongoDB

> ID：16154720
> 
> 赞同：5
> 
> 时间：2013-04-22T19:04:13.847
> 
> 标签：python, django, mongodb, mongoengine

我试图将 MongoDB 与 Django 一起使用。我已按照本指南进行设置，以便安装所有必要的东西。 [MongoDB + Django 教程](http://docs.mongodb.org/manual/tutorial/write-a-tumblelog-application-with-django-mongodb-engine/) 我的问题如下： 尝试`cities = City.objects.get()`在我`views.py`的中运行时出现以下错误：

```
DoesNotExist at /GetAllCities/
        City matching query does not exist. 
```

我的 MongoDB 看起来像这样

```
Databasename = "exjobb"
Collectioname = "cities"` 
```

它包含 30,000 行数据，适用于我的 Rails 和 PHP 应用程序。

我的模型类看起来像这样

```
 from django.db import models
    from django.core.urlresolvers import reverse
    from djangotoolbox.fields import ListField, EmbeddedModelField

    # Create your models here.
    class City(models.Model):
        city = models.TextField()
        loc = models.TextField()
        population = models.IntegerField()
        state = models.TextField()
        _id = models.IntegerField()

        def __unicode__(self):
            return self.city 
```

数据库中的一行看起来像这样

```
{
     "city" : "ACMAR",
     "loc" : [
        -86.51557,
        33.584132
     ],
     "population" : 6055,
     "state" : "AL",
     "_id" : "35004"
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T17:57:23.507

我找到了解决方案。问题是我不知道如何选择要使用的集合。因此 Django 创建了一个名为“myAppName_cities”的新集合。

要告诉 django 使用哪个集合，只需添加一个像这样的元类。

```
class City(models.Model):
    city = models.TextField()
    loc = models.TextField()
    population = models.IntegerField()
    state = models.TextField()
        #Specify collection in the MongoMetaclass
    class MongoMeta:
        db_table = "cities" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:19:36.837

如果您想获得数据库中的所有城市，您应该使用

```
cities = City.objects.all() 
```

`City.objects.get`需要一个关键字参数来搜索，并且只返回一条记录。如果发现多个异常，则引发异常。

# data-binding - SPARQL BIND 子句导致转发器数据源异常

> ID：16154721
> 
> 赞同：1
> 
> 时间：2013-04-22T19:04:14.377
> 
> 标签：data-binding, datasource, repeater, sparql, dotnetrdf

我尝试通过以下 VB 代码填充转发器控件的数据源：

```
 Dim queryString As SparqlParameterizedString = New SparqlParameterizedString()
    For Each nsPrefix In UrlManager.namespaces.Keys
        queryString.Namespaces.AddNamespace(nsPrefix, New Uri(UrlManager.namespaces(nsPrefix)))
    Next
    queryString.CommandText = commandText
    Dim parser As New SparqlQueryParser()
    Dim query = parser.ParseFromString(queryString)
    Dim r As SparqlResultSet = g.ExecuteQuery(query)
    If r.Count > 0 Then
        datasource = r
    Else
        datasource = Nothing
    End If 
```

其中变量`g`是我的工作图

我使用相同的查询

```
SELECT DISTINCT ?context ?label { 
    ?s a my:Client . 
    ?s rdfs:label ?label . 
    BIND ( IF(EXISTS {?s rdf:type my:Subscriber}, 1, 0)  AS ?priority ) 
} ORDER BY DESC(?priority) ASC(?label) 
```

每当我在一个简单的 aspx 页面中尝试此 vb 代码时，它都可以正常工作，但如果在转发器`OnLoad`事件上失败并带有`VDS.RDF.Query.RdfQueryException: Cannot add a Set to the Null Multiset`

似乎错误是由该`BIND ( IF(EXISTS {?s rdf:type my:Subscriber}, 1, 0) AS ?priority )`子句引起的：如果我删除它，我的转发器会按预期运行！

知道为什么会发生异常以及如何纠正它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:26:02.127

这可能与您的相关问题（[BIND 子句上的 Sparql 问题](https://stackoverflow.com/questions/16121518/sparql-issue-on-bind-clause)）确定的错误有关

当它被用作另一个表达式的子表达式时存在一个错误`EXISTS`，如果您能够自己从源代码构建，您将能够检查该修复是否解决了这个问题。如果您仍然遇到问题，请在[问题跟踪器中提交新错误](http://www.dotnetrdf.org/tracker/)

# mysql - MYSQL 在 where 子句中使用 count(1)？

> ID：16154725
> 
> 赞同：0
> 
> 时间：2013-04-22T19:04:21.057
> 
> 标签：mysql, sql, count

我正在做面部识别。我有一个 A 组人员和 B 组人员的数据库。我想检查 A 中的每个人和 B 中的每个人。我正在运行许多不同的算法来验证面孔。为此，我设置了以下表格

```
comparison (
    id int,
    personA_id int,
    personB_id int,
)

facerecScore (
    id int,
    score int,
    comparison_id int,
    algo_id int,
 ) 
```

因此，假设我有一个 eigenfaces 程序作为我正在测试的第一个算法运行。特征脸的`algo_id`值为 1。

我想要做的是进行一个查询，从比较中选择`personA`和比较，其中表中`personB`不存在现有记录，其中1 并且比较是该比较。`facerecScore``algo_id`

换句话说，如果我已经对这两个人运行了特征脸，我不想再运行它。因此，我不想选择`facerecscore`表中已有记录的比较`algo_id`为 1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:20:42.567

对于讨厌相关子查询的任何人（例如，出于性能原因，如果原始查询未优化），可以使用左连接并排除实际连接的任何行：

**更新：**受@penfold 的“查找所有”答案的启发，如果`algo_id`s 的列表已知（并且很短），则这是一个 join+union 替代方案：

```
select '1' algo_id, c.*
  from comparison c
  left join facerecScore f
    on c.id = f.comparison_id
    and f.algo_id = 1
  where f.id is null
union all
select '2' algo_id, c.*
  from comparison c
  left join facerecScore f
    on c.id = f.comparison_id
    and f.algo_id = 2
  where f.id is null
... 
```

或者更通用的（不确定哪一个会更好）：

```
select a.algo_id, c.id
  from comparison c
  cross join (select algo_id from facerecScore group by algo_id) a
  left join facerecScore f
    on c.id = f.comparison_id
    and f.algo_id = a.algo_id
  where f.id is null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T19:11:48.220

您可以尝试以下类似的操作，它将查找所有`comparison`没有记录的行，其中`facerecScore`给`algo_id`定的参数`:current_algo`

```
SELECT *
FROM comparison
WHERE id not in (
    SELECT comparison_id
    FROM facerecScore
    WHERE algo_id = :current_algo
); 
```

在您想要查找所有`algo_ids`没有相应记录的所有比较行的场景中，`facerecScore`您可以使用类似以下的内容。

```
SELECT *
FROM comparison, (SELECT algo_id FROM facerecScore GROUP BY algo_id) algo    
WHERE id not in (
    SELECT comparison_id
    FROM facerecScore
    WHERE algo_id = algo.algo_id
); 
```

简单地说，这个查询首先找到所有`comparison`行组合，然后从结果集中`algo_id`删除任何有记录的行。`facerecScore`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T19:13:13.330

你可以使用它，它会返回第一个未被触及的组合。删除最后一部分`Limit 1,1`，您将获得所有未触及的组合。

```
SELECT *
  FROM comparison
 WHERE id
not in (
       select comparison_id
       from facerecScore
       where algo_id = 1)
 Limit 1,1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T19:13:53.487

```
SELECT personA_id, personB_id FROM comparison WHERE id NOT IN (SELECT comparison_id FROM facerecScore WHERE algo_id = 1); 
```

这可能对子查询的效率非常不利，但它应该会给你正确的结果。可能其他人可以找到更有效的解决方案。

# android - TextView 和 ImageView 的对齐方式

> ID：16154732
> 
> 赞同：2
> 
> 时间：2013-04-22T19:04:43.613
> 
> 标签：android, android-linearlayout, android-imageview, textview

我正在尝试在一行中设置文本和图像（小图像）。要求是文本应左对齐，图像应右对齐。如果文本很大，那么它不应该与图像重叠，而是应该有 2 行或更多行。我正在尝试使用以下代码，但它不起作用。第一个图像没有右对齐，如果文本很大，图像根本不会出现，只有文本出现在多行中：

```
 <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content" >

                <TextView
                    android:id="@+id/answerTextView"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="left"
                    android:focusable="true"
                    android:gravity="left"
                    android:textSize="@dimen/answer_size"
                    android:textStyle="bold" >
                </TextView>

                <View
                    android:layout_width="3dip"
                    android:layout_height="wrap_content" >
                </View>

                <ImageView
                    android:id="@+id/congratsImageView"
                    android:layout_width="@dimen/congrats_img_width"
                    android:layout_height="@dimen/congrats_img_height"
                    android:layout_gravity="right"
                    android:adjustViewBounds="false"
                    android:scaleType="fitXY" >
                </ImageView>
            </LinearLayout> 
```

我也尝试了RelativeLayout，在这种情况下，图像和文本都向左对齐，图像与左侧的文本重叠。请注意，此处的 LinearLayout 上方和下方还有其他字段，我在运行时从 Java 方法中设置图像。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:10:06.870

试试下面的代码 -

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"        
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/answerTextView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:focusable="true"
        android:gravity="left"
        android:text="Hello world.Hello world.Hello world.Hello world.Hello world.Hello world. "
        android:textColor="@android:color/white"
        android:textStyle="bold" >
    </TextView>

    <View
        android:layout_width="3dip"
        android:layout_height="wrap_content" >
    </View>

    <ImageView
        android:id="@+id/congratsImageView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" >
    </ImageView>
</LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:07:08.560

使用**android:weight**属性给它们相等的空间。

看我修改了你的代码。它将 100% 工作使用它。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"        
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/answerTextView"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="left"
            android:layout_weight="1"
            android:focusable="true"
            android:gravity="left"
            android:text="Hello world.Hello world.Hello world.Hello world.Hello world.Hello world. "
            android:textColor="@android:color/white"
            android:textStyle="bold" >
        </TextView>

        <View
            android:layout_width="3dip"
            android:layout_height="wrap_content" >
        </View>

        <ImageView
            android:id="@+id/congratsImageView"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="right"
            android:layout_weight="1"
            android:adjustViewBounds="false"
            android:scaleType="fitXY"
            android:src="@drawable/ic_launcher" >
        </ImageView>
    </LinearLayout>

</LinearLayout> 
```

# java - Java在变量上找不到符号

> ID：16154744
> 
> 赞同：0
> 
> 时间：2013-04-22T19:05:29.457
> 
> 标签：java, sling

我对 Java 还很陌生，所以请耐心等待。我一生都无法弄清楚为什么我在 resourceResolver.resolve 上遇到**找不到符号错误。**当在它上面的行上时，我正在定义变量。也许这是我想念的简单的东西，但我无法弄清楚，我觉得我已经盯着这种方式看了很久。

```
private static final String ROOTCHILD = "rootChild";

public void setResource(Resource resource) {
   this.resource = resource;
}

public void setProperties(ValueMap properties) {
   this.properties = properties;
}

public Page getRootPage() {
   ResourceResolver resourceResolver = getResource().getResourceResolver();
   return (this.properties != null)
      ? resourceResolver.resolve(
           properties.get( ROOTCHILD,currentPage.getPath())).adaptTo(Page.class)
      : null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:38:10.790

我在这里的猜测（从未使用过 sling 并且有一段时间没有使用过 Java）：

我认为问题在于您初始化了 ValueMap`properties`以使其不包含`String`s 或`HttpServletRequest`s，而是包含其他内容。该`.resolve()`方法只接受 a`String`或 a `HttpServletRequest`。（或**两个**参数，但您只传递了一个，因此不可能出现一个。）没有`.resolve()`找到接受您尝试提供的参数的方法，因此**找不到该符号**！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:45:29.113

要查看真正的错误，请重写代码并编译它：

```
public Page getRootPage() {
   if( properties == null ) {
      return null;
   }
   YYYYYY resource = getResource();
   ResourceResolver resourceResolver = resource.getResourceResolver();
   String path = currentPage.getPath();
   String rootChild = properties.get( ROOTCHILD, path );
   XXXXXX rc = resourceResolver.resolve( rootChild );
   return rc.adaptTo( Page.class );
} 
```

# android - 我的 Activity 如何在 Android 的启动器上安装另一个图标？像 Whatsapp 一样？

> ID：16154752
> 
> 赞同：0
> 
> 时间：2013-04-22T19:05:57.147
> 
> 标签：android, android-widget, android-manifest, android-launcher, whatsapp

我知道一个Android应用程序可以通过在清单中添加一个标签来将多个图标安装到用户的启动器，如下所述：[Android App actvities installed as multiple icons](https://stackoverflow.com/questions/3527263/android-app-actvities-installed-as-multiple-icons)

但是，上述解决方案会自动发生。相反，我想通过让用户按下按钮来让用户选择为我的应用安装第二个、第三个或更多图标。因此，例如，如果我是一个餐厅应用程序，我可以鼓励用户在他们已经为应用程序拥有的图标之外安装一个特定美食（比如寿司）的快速访问图标。

我注意到 WhatsApp for Android 可以做到这一点。您可以选择安装直接启动特定对话的快捷方式。所以我有一种强烈的感觉，这是可能的，但还没有找到任何解释如何的材料。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:13:35.710

刚刚在这里找到了解决方案：

[从 Android Market 下载和安装应用程序后，如何启用自动创建快捷方式？](https://stackoverflow.com/questions/6754966/how-to-enable-automatic-shortcut-creation-after-app-downloads-and-installs-from)

感谢所有看过的人！

# itextsharp - XFA 表单 PDF 使用 itextsharp 修改，结果 PDF Gives Extended feature 错误

> ID：16154754
> 
> 赞同：2
> 
> 时间：2013-04-22T19:06:09.377
> 
> 标签：itextsharp

我正在尝试通过修改包含 2D Barcode 的 XFA Forms PDF 以编程方式设置字段值。我在使用常规 Adob​​e Reader 打开结果 PDF 时遇到麻烦。这是一个错误“此文档在 adobe reader 中启用了扩展功能。该文档自创建以来已更改，扩展功能的使用不再可用。请联系该文档原始版本的作者”（注：-文件打开Adobe acrobat 很好）

以下是执行此操作的示例 C# 代码。

```
var reader = new PdfReader(@"c:\abc.pdf");

// System.IO.FileStream fs = new FileStream(reader, System.IO.FileMode.CreateNew, FileAccess.ReadWrite);

var output = new MemoryStream();
var stamper = new PdfStamper(reader, output, '\0', true);

stamper.ViewerPreferences = PdfWriter.AllowModifyContents;

stamper.AcroFields.SetField("form1[0].#subform[0].Line1a_FamilyName[0]", "Family Name");

stamper.FormFlattening = false;

stamper.Close();
reader.Close();

Response.AddHeader("Content-Disposition", "attachment; filename=YourPDF.pdf");
Response.ContentType = "application/pdf";

Response.BinaryWrite(output.ToArray());
Response.End(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:35:21.133

请参阅iText 作者的[这篇文章](http://support.itextpdf.com/node/6)：

> Bruno Lowagie 于 2010 年 12 月 31 日星期五 - 16:37 提交
> 
> 填写完我的表格后，我的 PDF 显示以下消息：此文档启​​用了 Adob​​e Reader 中的扩展功能。该文档自创建以来已更改，并且不再使用扩展功能。请联系作者获取本文档的原始版本。如何避免此消息？
> 
> 表单的创建者启用了文档阅读器。阅读器启用只能使用 Adob​​e 软件完成。您可以通过两种方式避免此消息：
> 
> 1\. 删除使用权限。这将导致不再启用 Reader 的表单。例如：如果文档的创建者允许将填写的表格保存在本地，则在删除使用权限后将不再可能。
> 2\. 以追加方式填写表格。这将导致更大的文件大小，但将保留阅读器启用。有关更多信息，请阅读 iText in Action 的第 8.7.1 节。

# objective-c - 使用 Objective-C 访问另一个顶级 JSON 对象

> ID：16154760
> 
> 赞同：0
> 
> 时间：2013-04-22T19:06:17.460
> 
> 标签：objective-c, json

我很难在我的应用程序中访问另一个顶级 JSON 对象。该计划是从 Instagram 加载数据（有效），但不计算我想要的顶级数据。

JSON 文档可以在这里找到 ( [http://pastebin.com/0Z4vBjRn](http://pastebin.com/0Z4vBjRn) ) 基本上它有三个顶级对象：分页、元和数据（我想要数据位）。

这是我现在的代码：

```
 - (void)viewDidLoad
        {
            [super viewDidLoad];
            // Do any additional setup after loading the view.

            // Viser "spinner" for å symbolisere nettverkstrafikk.
            [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;

            // URL til JSON filen
            NSURL *newsUrl = [NSURL URLWithString:@"https://api.instagram.com/v1/tags/beer/media/recent?client_id=client_key"];

            //URL Requestobjekt for å kontrollere tilkobling
            NSURLRequest *newsRequest = [NSURLRequest requestWithURL:newsUrl];
            [[NSURLConnection alloc]initWithRequest:newsRequest delegate:self];

        }

        - (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response{
            [rawImages setLength:0];
            rawImages = [[NSMutableData alloc] init];
        }

        - (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data{
            [rawImages appendData:data];
        }

        - (void)connectionDidFinishLoading:(NSURLConnection *)connection {
            [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
            images = [[NSArray alloc]init]; // Updated
            images = [NSJSONSerialization JSONObjectWithData:rawImages options:0 error:0];
            [self.collectionView reloadData];
        }

        - (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
            UIAlertView *errorView = [[UIAlertView alloc]initWithTitle:@"Feil" message:@"Det har oppstått en feil ved nedlastingen av data. Dobbeltsjekk at du er koblet til internett" delegate:nil cancelButtonTitle:@"Fortsett" otherButtonTitles:nil];
            [errorView show];
            [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
        }

        - (NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView {
            return 1;
        }

        - (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section {

            return [images count];

        }

        - (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {

            UICollectionViewCelle *cell = (UICollectionViewCelle *)[collectionView dequeueReusableCellWithReuseIdentifier:@"cell" forIndexPath:indexPath];

            cell.imageView.image = [UIImage imageNamed:@"eksempel.jpg"];

            return cell;
        } 
```

显然计数部分不起作用（它只返回三个）。但是我怎样才能让它计算“数据”对象中的所有对象呢？高度赞赏所有帮助！我已经完成了我的谷歌搜索，但我似乎无法准确找到我在寻找什么。

# php - 将 .htaccess 用于变量文件夹

> ID：16154761
> 
> 赞同：0
> 
> 时间：2013-04-22T19:06:24.953
> 
> 标签：php, .htaccess, rewrite, directory

我在使用 .htaccess 做我需要做的事情时遇到了一点麻烦。

这是网页的网址：

```
http://example.com/folder/$1/topic.php?id=$2 
```

唯一改变的两件事是 1 美元和 2 美元。

我正在使用这段代码，但我似乎无法让它与变量文件夹一起使用。

```
RewriteRule ^([a-zA-Z0-9_-]+)$ topic.php?id=$1
RewriteRule ^([a-zA-Z0-9_-]+)/$ topic.php?id=$1
RewriteRule ^folder/$1/([a-zA-Z0-9_-]+)$ folder/$1/topic.php?id=$2
RewriteRule ^folder/$1/([a-zA-Z0-9_-]+)/$ folder/$1/topic.php?id=$2 
```

我可能在语法上犯了一些错误，但我似乎无法弄清楚。

浏览器 URL 将变为如下所示：

```
http://example.com/folder/$1/topic/$2 
```

谢谢你的时间^.^

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:11:22.593

耶！用户大人。

我认为你需要逃跑 `$1`，只要给它一些反斜杠忍者拳：

```
RewriteRule ^folder/\$1/([a-zA-Z0-9_-]+)/$ folder/$1/topic.php?id=$2 
```

或者它可能是：

```
RewriteRule ^folder/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/$ folder/$1/topic.php?id=$2 
```

^__^

是的，我需要解释发生了什么，所以左边括号之间的内容变成`$`了右边，后面的数字`$`是括号的当前顺序。所以：

```
#             1st   2nd   3rd        1st────┐    2nd    ┌──────3rd   
RewriteRule ^(.*?)/(.*?)/(.*)$ file.php?p1=$1&p2=$2&p3=$3 
```

这些括号块称为捕获块，它是RegExp。

# java - 从网站中提取 Applet 的源文件

> ID：16154763
> 
> 赞同：2
> 
> 时间：2013-04-22T19:06:25.943
> 
> 标签：java, graph, web, applet

我想看看这个[小程序的源文件](http://mainline.brynmawr.edu/Courses/cs206/spring2004/WorkshopApplets/Chap13/GraphN/GraphN.html)

我该怎么做才能得到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:12:11.170

该页面的源代码为：

```
<HTML>
<HEAD>
<TITLE>Non-Directed, Non-Weighted Graph</TITLE>
</HEAD>
<BODY>
   <TABLE BORDER UNITS=PIXELS COLSPEC="L330 L250" CELLPADDING=7>
   <CAPTION><STRONG>Lafore's Non-Directed
Non-Weighted Graph</STRONG></CAPTION>
      <TH>Graph
      <TH>Operation
      <TR>
      <TD>
         <APPLET
            CODE=GraphN.class
            WIDTH=440
            HEIGHT=320>
         </APPLET>
    ...
</BODY>
</HTML> 
```

如您所见，Java 代码位于[http://mainline.brynmawr.edu/Courses/cs206/spring2004/WorkshopApplets/Chap13/GraphN/GraphN.class](http://mainline.brynmawr.edu/Courses/cs206/spring2004/WorkshopApplets/Chap13/GraphN/GraphN.class)。

*   单击下面的链接并将文件保存在您想要的任何位置。
*   使用[java反编译器](https://stackoverflow.com/questions/272535/how-do-i-decompile-java-class-files)查看源码

这是由[产生](http://jd.benow.ca/)的输出：

![在此处输入图像描述](https://i.stack.imgur.com/ppnIS.png)：

```
import java.applet.Applet;
...
import java.util.EventObject;

public class GraphN extends Applet
  implements Runnable, ActionListener, MouseListener
{
  private Thread runner;
  private vertexGroup theVertexGroup;
  private boolean wasClearPressed = false;
  private Button newButton;
  private Button dfsButton;
  private Button bfsButton;
  private Button treeButton;
  private Button viewButton;

  public void init()
  {
    addMouseListener(this);

    setLayout(new FlowLayout());
    Panel localPanel1 = new Panel();
    add(localPanel1);
    localPanel1.setLayout(new FlowLayout());
    ...
  }
} 
```

# php - php mysql + 3 动态下拉框

> ID：16154766
> 
> 赞同：0
> 
> 时间：2013-04-22T19:06:28.547
> 
> 标签：php, javascript, mysql, drop-down-menu

我正在创建三个动态下拉列表，第二个基于第一个的选择，第三个基于第二个的选择，使用 php 和 mysql 检索数据和 javascript

但这并没有发生如何解决问题，因为我在第一个列表中选择的所有内容都显示在第二个和第三个列表中。

在每个表中，我在选择完成之前都有下拉列表的 id 作为外键

谁能帮我 ？？？？

# 代码

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Register Page</title>
    <link href="style/stylesheet.css" rel="stylesheet" type="text/css" />
    <link href="style/imagesGallery.css"rel="stylesheet" type="text/css"/>

    <SCRIPT language=JavaScript>
    function reload(form)
    {
    var val=form.governorate.options[form.governorate.options.selectedIndex].value; 
    self.location='register.php?governorate=' + val ;
    }

    function reload3(form)
    {
    var val=form.governorate.options[form.governorate.options.selectedIndex].value; 
    var val2=form.district.options[form.district.options.selectedIndex].value; 

    self.location='register.php?governorate=' + val + '&district=' + val2 ;
    }
    </script>
    </head>

    <body>

    <?php

    $governorate = "";
    $district = "";

    //$quer2=mysql_query("SELECT DISTINCT category,cat_id FROM category order by category"); 
    $quer2=mysql_query("SELECT DISTINCT governorate_name,governorate_id FROM governorate order by governorate_name"); 

    //$cat=$_GET['cat']; 
    $governorate=$_GET['governorate'];
    var_dump($governorate);
    if(isset($governorate) and strlen($governorate) > 0)
    {
    $quer=mysql_query("SELECT DISTINCT district_name,district_id FROM districts where governorate_id=$governorate order by district_name"); 
    }
    else
    {
        $quer=mysql_query("SELECT DISTINCT district_name,district_id FROM districts order by district_name"); 
    } 

    $district=$_GET['district'];
    if(isset($district) and strlen($district) > 0){
    $quer3=mysql_query("SELECT DISTINCT village_name FROM village where district_id=$district order by village_name"); 
    }
else
{
$quer3=mysql_query("SELECT DISTINCT village_name FROM village order by village_name"); 
} 

    echo "<select name='governorate' onchange=\"reload(this.form)\"><option value=''>Select one</option>";
    while($noticia2 = mysql_fetch_array($quer2)) 
{ 
    if($noticia2['governorate_id']==@$governorate)
{
echo "<option selected value='$noticia2[governorate_id]'>$noticia2[governorate_name]</option>"."<BR>";
}
    else
 {
  echo  "<option value='$noticia2[governorate_id]'>$noticia2[governorate_name]</option>";
  }
}
    echo "</select>";

    echo "<select name='district' onchange=\"reload3(this.form)\"><option value=''>Select one</option>";
    while($noticia = mysql_fetch_array($quer))
 { 
    if($noticia['district_id']==@$district)
{
echo "<option selected value='$noticia[district_id]'>$noticia[district_name]</option>"."<BR>";
}
    else
  {
  echo  "<option value='$noticia[district_id]'>$noticia[district_name]</option>";
  }
}
    echo "</select>";   

    echo "<select name='village' ><option value=''>Select one</option>";
    while($noticia = mysql_fetch_array($quer3)) 
{ 
    echo  "<option value='$noticia[village_name]'>$noticia[village_name]</option>";
}
    echo "</select>";
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T01:49:57.797

我运行你做的代码，它对我有用。我所做的唯一更改是创建表单元素。我必须创建一个表以使其正常工作。我没有走遍整个村庄。当我让地区工作时，我停止了。

这是我更改的代码：

```
<?php 
$db = mysql_connect('127.0.0.1','root') or die('could not connect');
mysql_select_db('financial_system_local',$db);

?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Register Page</title>
    <link href="style/stylesheet.css" rel="stylesheet" type="text/css" />
    <link href="style/imagesGallery.css"rel="stylesheet" type="text/css"/>

    <SCRIPT language=JavaScript>
    function reload(form)
    {
    var val=form.governorate.options[form.governorate.options.selectedIndex].value; 
    self.location='register.php?governorate=' + val ;
    }

    function reload3(form)
    {
    var val=form.governorate.options[form.governorate.options.selectedIndex].value; 
    var val2=form.district.options[form.district.options.selectedIndex].value; 

    self.location='register.php?governorate=' + val + '&district=' + val2 ;
    }
    </script>
    </head>

    <body>
<form>
    <?php

    $governorate = "";
    $district = "";

    //$quer2=mysql_query("SELECT DISTINCT category,cat_id FROM category order by category"); 
    $quer2=mysql_query("SELECT DISTINCT governorate_name,governorate_id FROM governorate order by governorate_name",$db);
    echo mysql_error($db); 

    //$cat=$_GET['cat']; 
    $governorate=$_GET['governorate'];
    var_dump($governorate);
    if(isset($governorate) and strlen($governorate) > 0)
    {
    $quer=mysql_query("SELECT DISTINCT district_name,district_id FROM districts where governorate_id=$governorate order by district_name",$db); 
    }
    else
    {
        $quer=mysql_query("SELECT DISTINCT district_name,district_id FROM districts order by district_name",$db); 
    } 

    $district=$_GET['district'];
    if(isset($district) and strlen($district) > 0){
    $quer3=mysql_query("SELECT DISTINCT village_name FROM village where district_id=$district order by village_name"); 
    }
else
{
$quer3=mysql_query("SELECT DISTINCT village_name FROM village order by village_name"); 
} 

    echo "<select name='governorate' onchange=\"reload(this.form)\"><option value=''>Select one</option>";
    while($noticia2 = mysql_fetch_array($quer2)) 
{ 
    if($noticia2['governorate_id']==@$governorate)
{
echo "<option selected value='$noticia2[governorate_id]'>$noticia2[governorate_name]</option>"."<BR>";
}
    else
 {
  echo  "<option value='$noticia2[governorate_id]'>$noticia2[governorate_name]</option>";
  }
}
    echo "</select>";

    echo "<select name='district' onchange=\"reload3(this.form)\"><option value=''>Select one</option>";
    while($noticia = mysql_fetch_array($quer))
 { 
    if($noticia['district_id']==@$district)
{
echo "<option selected value='$noticia[district_id]'>$noticia[district_name]</option>"."<BR>";
}
    else
  {
  echo  "<option value='$noticia[district_id]'>$noticia[district_name]</option>";
  }
}
    echo "</select>";   

    echo "<select name='village' ><option value=''>Select one</option>";
    while($noticia = mysql_fetch_array($quer3)) 
{ 
    echo  "<option value='$noticia[village_name]'>$noticia[village_name]</option>";
}
    echo "</select>";
    ?>
    </form> 
```

# python - python tkinter 在小部件创建期间隐藏窗口

> ID：16154767
> 
> 赞同：0
> 
> 时间：2013-04-22T19:06:32.383
> 
> 标签：python, tkinter

我有一个烦人的小问题，所以我来找你，看看你能不能帮忙解决。我在 Python2.7 中有以下代码：

```
# main window
root = tk.Tk()
root.title('My application')
# create the objects in the main window
w = buildWidgetClass(root)
# size of the screen (monitor resolution)
screenWi = root.winfo_screenwidth()
screenHe = root.winfo_screenheight()
# now that widgets are created, find the widht and the height
root.update()
guiWi = root.winfo_width()
guiHe = root.winfo_height()
# position of the window
x = screenWi / 2 - guiWi / 2
y = screenHe / 2 - guiHe / 2
root.geometry("%dx%d+%d+%d" % (guiWi, guiHe, x, y)) 
```

所以我创建了主窗口（没有任何大小）我在里面插入小部件，然后我定义结果的大小，并将它放在屏幕的中间。

窗口中的小部件数量可能会有所不同，因此产生的大小！

到目前为止，一切都很好，它有效！我唯一的问题是窗口首先出现在屏幕的左上角，然后重新定位到中心。没什么大不了的，但也不是很专业。

所以我的想法是在小部件创建期间隐藏主窗口，然后在定义几何图形后使其出现。

所以在第一行之后，我添加了：

```
root.withdraw() 
```

然后在最后：

```
root.update()
root.deiconify() 
```

但是当窗口重新出现时，它没有被小部件重新调整大小并且大小为 1x1 ！我试图用**root.iconify() 替换 root.withdraw(** ) **，**窗口的大小被正确地重新调整了，但令人惊讶的是，最后没有去图标化！！！

我对此有点迷失......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:30:19.787

最后在 kalgasnik 的输入下，我有一个工作代码

```
# main window
root = tk.Tk()
# hide the main window during time we insert widgets
root.withdraw()

root.title('My application')
# create the objects in the main window with .grid()
w = buildWidgetClass(root)
# size of the screen (monitor resolution)
screenWi = root.winfo_screenwidth()
screenHe = root.winfo_screenheight()
# now that widgets are created, find the width and the height
root.update()
# retrieve the requested size which is different as the current size
guiWi = root.winfo_reqwidth()
guiHe = root.winfo_reqheight()
# position of the window
x = (screenWi - guiWi) / 2
y = (screenHe - guiHe) / 2
root.geometry("%dx%d+%d+%d" % (guiWi, guiHe, x, y))
# restore the window
root.deiconify() 
```

非常感谢你们俩的时间和帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T21:29:01.703

使用`root.winfo_reqwidth`而不是`root.winfo_width`可能对您的情况有所帮助。

# ember.js - ember.js - 计算属性结合 2 hasMany

> ID：16154771
> 
> 赞同：2
> 
> 时间：2013-04-22T19:06:59.667
> 
> 标签：ember.js

假设我有这样的模型：

```
App.Document = DS.Model.extend
  users: DS.hasMany('App.User')
  contacts: DS.hasMany('App.Contact') 
```

创建将两个 hasMany 关系结合起来的计算属性的最佳方法是：

```
people: ( ->
  users.toArray().concat(contacts.toArray()).sort (a, b) ->
    Em.Compare(a.get('name'), b.get('name'))
).property('users.[]', 'contacts.[]') 
```

有没有比我上面的粗略猜测更好的方法来应用排序并考虑记录数组是否为空？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:46:09.980

不确定这是否是您要查找的内容，但我认为您必须使用`property('users.@each')`而不是`property('users.[]')`更改`Em.Compare...`为`Em.compare...`（小写）

我制作了一个[示例](http://jsfiddle.net/schawaska/ZMTbj/)来说明为`User`,`Contact`和`Document`

其中一个文档没有与之关联的联系人，而一个文档既没有联系人也没有用户。计算的`people`属性如下所示：

```
people: ( ->
  @get('users').toArray().concat(@get('contacts').toArray()).sort (a, b) ->
    Ember.compare(a.get('fullName'), b.get('fullName'))
).property('users.@each', 'contacts.@each') 
```

排序适用于组合数组。

注意：我不太会说咖啡；抱歉，如果语法不是 100% 正确

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:46:43.390

这是一个相关的解决方案： [https ://stackoverflow.com/a/15869936/844923](https://stackoverflow.com/a/15869936/844923)

[JSBin 示例](http://jsbin.com/asimel/3/edit)

[只需使用特殊键](http://emberjs.com/guides/object-model/computed-properties-and-aggregate-data/)，您就可以完全按照您的想法进行操作[`@each`](http://emberjs.com/guides/object-model/computed-properties-and-aggregate-data/)

链接示例中的示例：

```
stream: function() {
  var post = this.get('post'),
      bookmark = this.get('bookmark'),
      photo = this.get('photo');

  var stream = [];

  stream.pushObjects(post);
  stream.pushObjects(bookmark);
  stream.pushObjects(photo);
  return stream;
}.property('post.@each', 'bookmark.@each', 'photo.@each'), 
```

然后对它们进行排序：

```
 streamSorted: function() {
    var streamCopy = this.get('stream').slice(); // copy so the original doesn't change when sorting
    return streamCopy.sort(function(a,b){
      return a.get('publishtime') - b.get('publishtime');
    });
  }.property('stream.@each.publishtime') 
```

# javascript - 可排序的拖放与碰撞？

> ID：16154773
> 
> 赞同：0
> 
> 时间：2013-04-22T19:07:02.273
> 
> 标签：javascript, jquery

有哪些工具可以通过碰撞检测来促进在 dom 中拖放项目，所以我可以通过将项目拖到文件夹上来将项目拖放到文件夹中？

我看到 jQuery 具有拖放功能，并且我已经看到了很多将其扩展为可排序的工具，但是我还没有完全了解如何在一个项目被拖放到另一个项目之上时触发一个函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:16:58.610

你看过[jQuery droppable](http://jqueryui.com/droppable/)吗？如果单击查看源链接，则在该页面上触发该功能的示例在该页面上。

# javascript - JavaScript 将 \n 转换为 \r\n

> ID：16154779
> 
> 赞同：0
> 
> 时间：2013-04-22T19:07:13.760
> 
> 标签：javascript, regex, line-breaks

我在 JavaScript 中将简单的 \n 转换为 \r\n 时遇到了一些问题

```
var text = "Test1\nTest2\nTest3";

 var converted = text.replace("/\\n/g", "\r\n"); 
```

有人看到上面的 JS 有什么问题吗？我正在尝试用 \r\n 对 \n 进行全局替换。

上面的代码不做转换，留下\ns

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T19:12:01.623

试试这个正则表达式：

```
var converted = text.replace(/(\r)?\n/g, "\r\n"); 
```

# r - R %dopar% 比 %do% 慢

> ID：16154786
> 
> 赞同：0
> 
> 时间：2013-04-22T19:07:46.670
> 
> 标签：r, parallel-processing

我正在尝试对 %dopar% 进行一个小测试，但结果总是比较慢。这是一些虚拟代码和输出。我在win7x64 core i7-2600k上运行这个...

```
library(foreach)
library(doSNOW)
registerDoSNOW(makeCluster(3, type = "SOCK"))

N <- 3*(10^4)

system.time(foreach(i = 1:N) %do% {sum(rnorm(N))})
system.time(foreach(i = 1:N) %dopar% {sum(rnorm(N))} ) 
```

这是输出：

```
> system.time(foreach(i = 1:N) %do% {sum(rnorm(N))})
 user  system elapsed 
90.39    0.00   90.42 

> system.time(foreach(i = 1:N) %dopar% {sum(rnorm(N))} )
user  system elapsed 
17.00    0.89  177.11 
```

# vb.net - VB.NET 在表单应用程序中重新创建 console.readline 函数

> ID：16154789
> 
> 赞同：0
> 
> 时间：2013-04-22T19:07:47.590
> 
> 标签：vb.net, winforms, console

我正在构建一个基于文本的游戏，并想像往常一样使用表单而不是控制台。所以我开始重建一个控制台——我创建了 2 个文本框，一个作为输出，一个作为输入。

执行此操作时遇到以下问题：在控制台应用程序中，您可以直接使用`console.readline()`。
例如：`Dim str as String = console.readline()`
现在我在表单应用程序中需要这个效果，我等待用户在**输入框中**按下回车并获取他写的文本。
例如：我要求输入角色名称，用户必须在输入框中输入，现在我需要他以某种方式输入的名称。

**编辑：**

> 我想我需要一些方法来等待事件引发而不阻塞 ui 线程。

我很感激任何帮助解决这个问题，
Mylo。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:22:16.533

要将表单用作控制台，您需要让您的`readLine`方法等待用户在 TextBox 控件中按 Enter 的事件，这样做不会阻塞您需要使用多线程（硬）或任务（困难，异步编程很容易），这不是一件容易的事，所以我认为最好使用旧的推力`System.Console`来完成这项工作。

但是，如果您想尝试一下，可以使用一些第三方控件，例如：http: [//www.codeproject.com/Articles/9621/ShellControl-A-console-emulation-control](http://www.codeproject.com/Articles/9621/ShellControl-A-console-emulation-control)，那里代码项目中还有其他人，因此您可能想深入挖掘并找到您喜欢的一个。

**编辑**

这是一个小的异步循环，请注意我也使用等待。

```
do
    await Task.Delay(100)
loop while (ReadingLine) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:20:56.107

我觉得你想太多了，我的朋友。默认情况下，文本框称为 TextBox1。

因此，要捕获文本框中的数据，您可以说：

```
Dim someIdentifier As String = TextBox1.Text 
```

现在您已经在变量中捕获了数据，就像您使用捕获它时一样

```
Console.ReadLine() 
```

# jakarta-ee - 处理 JPA 事务异常

> ID：16154791
> 
> 赞同：1
> 
> 时间：2013-04-22T19:08:04.030
> 
> 标签：jakarta-ee, jpa, exception-handling, transactions

我有 3 个 EJB：

第一个是持久性：

```
@Stateless
@TransactionAttribute(TransactionAttributeType.REQUIRED)
public class PersistenceService
{
    @PersistenceContext(unitName="pc")
    EntityManager em;

    public <T> void create(T entity) {
        em.persist(entity);
    }
} 
```

第二个是商业：

```
@Stateless
@TransactionAttribute(TransactionAttributeType.REQUIRED)
public class BusinessService implements 
{
    @EJB
    PersistenceService persistenceService;

    public <T> void register (User user) {
            try{
                    // Do some business
                    persistenceService.persist(user);
                    // Do other business
            }catch(Exception e){
                    // log exception
                    throw new BusinessException(e);
            }
      }
} 
```

第三个是调用业务 EJB 的 Web 服务。

问题是业务 EJB 没有捕获数据库异常，例如封装在 EJB 异常中的 Mysql 连接器抛出的约束冲突异常。我可以在 Rest 服务 EJB 上处理这个异常，但不能在业务 EJB 上处理。我认为这与交易有关。

我不确定应该将哪些事务属性添加到 Persistence EJB 和 Business EJB 以让我在业务 EJB 中捕获这些类型的异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T08:20:33.423

你是对的，显示的行为可能与事务边界有关。您的 Web 服务（我现在猜）是上层的非 EJB 层，因此当您调用`BusinessService.register()`事务时，事务在调用之前开始，并在此调用返回之前结束。

运行时异常发生在提交时，在您的情况下发生在`register()`方法代码结束后；因此，现在处理它们还为时过早。

如果您真的不想处理 Web 服务 bean 中的异常，您有两个选择：

**一。**`BusinessService`在bean中使用 bean 管理的事务

```
@Stateless
@TransactionManagement(TransactionManagementType.BEAN)
public class BusinessService 
{
@EJB
PersistenceService persistenceService;
@Resource
private UserTransaction ut;

public <T> void register (User user) {
        try{
                ut.begin();
                // Do some business
                persistenceService.persist(user);
                // Do other business
                ut.commit();
        }catch(Exception e){
                // log exception
                throw new BusinessException(e);
        }
  }
} 
```

**二**。在 Web 服务 bean 和 EJB 之间引入一个非事务性外观：

```
@Stateless
@TransactionAttribute(TransactionAttributeType.NOT_SUPPORTED)
public FacadeBean {

    @EJB private BusinessService businessService;

    public void facadeMethod(User user) {
        try {
            businessService.register(user);
        } 
        // your handling code here
        catch (...) { ... }
    }

} 
```

# java - JAR 文件中带有图像的 Java 工具提示

> ID：16154792
> 
> 赞同：1
> 
> 时间：2013-04-22T19:08:05.417
> 
> 标签：java, swing, tooltip, jfreechart

我正在使用 JFreeChart，我通过实现`XYToolTipGenerator`接口自定义了图表的工具提示。由于该`generateToolTip()`方法应该返回一个字符串，所以这是我在工具提示中显示图像的操作：

 `````
@Override
public String generateToolTip(XYDataset dataset, int series, int item) {
    (...)
    return "<html><body><img src=\"file:resources/img/image.png\"></body></html>";
} 
````  `虽然这在直接从我的 IDE (Eclipse) 执行时非常有效，但从打包的 JAR 文件执行时显然会失败（image.png 也在 JAR 文件中）。

任何有关如何解决此问题的提示将不胜感激（理想情况下无需从 JAR 文件中提取 image.png）。

非常感谢，托马斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T19:44:20.063

尝试使用资源 URL：

```
URL url = getClass().getResource("/img/image.png");
String tt = "<html><body><img src='" + url + "'></body></html>"; 
```

***编辑：***从显示工具提示的可执行 jar 运行的简单示例：

```
@Override
public String generateToolTip(XYDataset arg0, int arg1, int arg2) {
    return String.format(
            "<html><body><img src='%s'> some data </body></html>",
            getClass().getResource("/images/duke.gif"));
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/WIwIL.png)``

# c# - 获取实体框架中由子实体组成的实体

> ID：16154793
> 
> 赞同：0
> 
> 时间：2013-04-22T19:08:07.903
> 
> 标签：c#, entity-framework, database-design

我有一些由其他实体组成的“复杂”实体。例如“订单”实体：

*   命令
*   订单详情（子）
*   OrderDetailsDiscount（孩子的孩子）
*   订单支付
*   订单状态

Order 类的代码：

```
[MetadataType(typeof(OrderMetadata))]
public partial class Order
{
    public OrderPaymentStatus PaymentStatus {
        get { return Paid ? OrderPaymentStatus.Paid : OrderPaymentStatus.Pending; }
    }

    public bool Paid {
        get {
            return TotalPaid >= Total;
        }
    }

    public decimal TotalPaid {
        get {
            return OrderPayments.Sum(p => p.Amount);
        }
    }

    public decimal TotalRefund {
        get {
            return OrderRefunds.Sum(p => p.Amount);
        }
    }

    public decimal TotalDebt {
        get {
            return Total - TotalPaid + TotalRefund;
        }
    }

    public decimal TotalDiscounts {
        get {
            return ((SubTotal * DiscountPercentage) / 100) + DiscountAbsolute;
        }
    }

    public decimal TotalSurcharges {
        get {
            return ((SubTotal * SurchargePercentage) / 100);
        }
    }

    [DisplayFormat(DataFormatString="{0:C}", ApplyFormatInEditMode = false)]
    public decimal Total {
        get {
            return SubTotal - TotalDiscounts + TotalSurcharges;
        }
    }

    public decimal TotalTax {
        get {
            return (TaxEnabled) ? OrderDetails.Sum(t => t.Taxes): 0;
        }
    }

    public decimal SubTotal {
        get {
            return OrderDetails.Sum(o => o.Total) + TotalTax;
        }
    }

    public decimal DiscountOffers {
        get {
            return OrderDetails.Sum(o => o.DiscountOffers);
        }
    }

    public bool HasOffers {
        get { 
            return DiscountOffers > 0; 
        }
    }

    public decimal SurchargePercentage {
        get {
            return OrderSurcharges.Sum(o => o.ChargePercentage);
        }
    }

    public decimal DiscountPercentage {
        get {
            return OrderDiscounts.Where(o => o.Type == (int)DiscountType.Percentage).Sum(o => o.Value);
        }
    }

    public decimal DiscountAbsolute
    {
        get
        {
            return OrderDiscounts.Where(o => o.Type == (int)DiscountType.Absolute).Sum(o => o.Value);
        }
    }
} 
```

我以动态方式计算订单总数，因此我总是需要从一开始就加载 OrderDetail.*，以避免在呈现 1000 个订单的列表时对数据库进行多次查询，因此我在我的通用存储库中实现了此方法：

```
 public virtual IQueryable<T> GetAllIncluding(params Expression<Func<T, object>>[] includeProperties)
    {
        IQueryable<T> query = Fetch();

        foreach (var includeProperty in includeProperties)
        {
            query = query.Include(includeProperty);
        }

        return query;
    } 
```

我把它称为我的代码，如下所示：

```
 private IEnumerable<Order> GetAllOrders()
    {
        return unitOfWork.OrderRepository.GetAllIncluding(
            o => o.OrderDiscounts,
            o => o.OrderPayments,
            o => o.OrderSurcharges,
            o => o.OrderStates,
            o => o.OrderRefunds,
            o => o.OrderDetails,
            o => o.OrderDetails.Select(d => d.OrderDetailDiscounts),
            o => o.OrderDetails.Select(d => d.OrderDetailOffers),
            o => o.User,
            o => o.Employee,
            o => o.Store,
            o => o.TerminalSession);
    } 
```

好的..它有效..问题是当我必须用这个查询其他复杂对象时，我的用户实体由其他子实体组成，例如：

*   用户
*   用户点
*   用户状态
*   ...

有什么方法可以指示 EF 将一组实体作为一个整体加载，这样我就可以使用完全加载的 Orders 和 Users 进行查询，以避免在请求大量记录时访问数据库（我不想禁用延迟加载）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-16T19:44:58.010

```
context.Entity.Include("ChildEntity"); 
```

或者

```
context.Entity.Include( x => x.ChildEntity); 
```

如果您需要更多嵌套实体

```
context.Entity.Include( x => x.ChildEntity.Select( c => c.ChildChildEntity )); 
```

请记住，lambda 表达式存在于`System.Data.Entity`命名空间中。

请记住，通常太多的连接比多个数据库调用更糟糕。

# mysql - MYSQL 在我使用 RIGHT JOIN 时无法识别字段，但在我使用 NATURAL JOIN 时识别

> ID：16154795
> 
> 赞同：0
> 
> 时间：2013-04-22T19:08:14.980
> 
> 标签：mysql, sql, right-join

当我编写时，查询按预期执行：

```
SELECT id, day2.count - day1.count AS diff
FROM day1 NATURAL JOIN day2; 
```

但我真正想要的是一个正确的加入。当我写作时，

```
SELECT T1.id, day2.count - day1.count AS diff
FROM day1 RIGHT JOIN day2 AS T1
ON day1.id = day2.id 
```

它说它无法识别字段列表中的 day2.count。（另外，我不知道在第二个查询中是否应该是RIGHT OUTER JOIN，但在这种情况下结果是一样的。）

我觉得我错过了一些简单的东西。

编辑：以下是定义：

第1天

```
id bigint(8) NOT NULL
count bigint(21) NOT NULL 
```

第2天

（与第 1 天相同）

这个想法是 day2 表中可能存在 day1 中不存在的新 id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:12:34.380

你过度设计了它。从 where 子句中取出“as t1”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T19:16:34.993

使用别名或表名。

```
SELECT day2.id, day2.count - day1.count AS diff
FROM day1 RIGHT JOIN day2
ON day1.id = day2.id 
```

# sql - SQL SELECT If (a="") Then 改变 b 值

> ID：16154799
> 
> 赞同：7
> 
> 时间：2013-04-22T19:08:28.100
> 
> 标签：sql, sql-server, if-statement

这似乎是一个简单的问题，但我一直无法找到答案。我基本上是在尝试这样做：

```
SELECT * FROM table1
IF(columnA > 0) BEGIN
columnB = 'Greater than 0'
END 
```

我不想改变表格中的值，我只想改变结果。有什么建议么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-22T19:11:39.687

```
SELECT  ColumnA
        , case when ColumnA > 0 then 'Greater than 0' else ColumnB END AS ColumnB 
FROM    table1; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-22T19:16:22.793

这应该有效：

```
SELECT columnA, IIF(columnA > 0, 'Greater than 0', columnB)
  FROM table1; 
```

# sql - 列出已购买订单的客户 > 平均支付订单

> ID：16154801
> 
> 赞同：0
> 
> 时间：2013-04-22T19:08:35.267
> 
> 标签：sql, sql-server-2008

以下是我的查询：

```
select c.cust_lname, c.cust_fname, o.amount
from CUSTOMER c, orders o
where o.amount >
(select AVG (o.amount)
from orders o
group by order_num
having o.amount > AVG(o.amount)); 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:13:54.100

您编写查询的方式如下所示：

```
select c.cust_lname, c.cust_fname, o.amount
from CUSTOMER c join
     orders o
     on c.customerId = o.customerId
where o.amount > (select AVG (o.amount)
                  from orders o) 
```

请注意，您需要将两个表连接在一起才能获得所需的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:10:23.243

你过度设计了它。从您的子查询中取出 having 子句。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-22T19:13:28.920

```
select c.cust_lname, c.cust_fname, o.amount
from CUSTOMER c, orders o
where o.amount >
(select AVG (amount) from orders ); 
```

# c# - 通过 EWS 和 C# 访问没有邮箱的资源日历

> ID：16154802
> 
> 赞同：4
> 
> 时间：2013-04-22T19:08:36.670
> 
> 标签：c#, resources, calendar, shared, exchangewebservices

我们的 Exchange 管理员 (Exchange 2010 SP1) 已设置共享资源日历。 **没有分配给此资源日历的邮箱**。我希望能够使用 EWS 和 C# 阅读会议。

片段：

```
 ExchangeService esvc = new ExchangeService(ExchangeVersion.Exchange2010);
        esvc.Credentials = new WebCredentials(username, password, "ourplace.org");
        esvc.Url = new Uri("https://OWA.OURPLACE.ORG/EWS/Exchange.asmx");

        FolderId shareFolderId = new FolderId(WellKnownFolderName.Calendar, "Shared Calendar Name");
        CalendarFolder.Bind(esvc, shareFolderId); 
```

bind 语句抛出错误：“SMTP 地址没有与之关联的邮箱。”

如何阅读没有关联邮箱的共享资源日历上的项目......或者甚至有可能吗？

谢谢 ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-17T07:51:14.017

使用邮件地址绑定到该日历

首先创建一个 FolderId：

```
FolderId parkplatzCalendarId = new FolderId(WellKnownFolderName.Calendar,"de.calendar.name@company.com"); 
```

然后绑定到这个：

```
CalendarFolder calendar = CalendarFolder.Bind(_service, parkplatzCalendarId); 
```

现在你可以使用这个日历了！

```
CalendarView cView = new CalendarView(start, end, int.MaxValue);

cView.PropertySet = new PropertySet(AppointmentSchema.Subject, AppointmentSchema.Start, AppointmentSchema.End, AppointmentSchema.Duration, AppointmentSchema.LastModifiedName, AppointmentSchema.Organizer, AppointmentSchema.Categories);

FindItemsResults<Appointment> appointments = calendar.FindAppointments(cView); 
```

有类似的东西;D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:03:38.930

如果日历实际上不在任何特定邮箱中，那么它应该在公用文件夹中，您应该在子文件夹中查找`WellKnownFolderName.PublicFoldersRoot`。

否则，请告诉它在 Outlook 文件夹层次结构中的确切位置。

# weblogic - 保护/验证 WebLogic JNDI 句柄

> ID：16154805
> 
> 赞同：1
> 
> 时间：2013-04-22T19:08:46.307
> 
> 标签：weblogic, jndi

是否有公认的最佳实践来保护从外部应用程序访问 Weblogic JNDI（特别是 JDBC）服务？

主要动机是试图阻止人们不小心将 QA 代码指向生产机器，但显然还有保护端口免受不受欢迎的访问者（内部网络上的其他主机）的问题。

想法是任意客户端不能只连接到： `t3://importantprodhost.mycompany.com:7001`

并获取作为我们数据库代理的远程 JDBC/JNDI 存根之一

我确实找到了这个似乎相关的[链接](http://www.onjava.com/pub/a/onjava/excerpt/weblogic_chap17/index1.html?page=5)`WebLogic.runAs()`，但我希望不要将所有内容都作为调用来运行。

我的猜测是，一个人只能通过 HTTPS 公开 JNDI 服务并使用证书进行身份验证（不会在 QA 机器上），但还没有找到具体/简单的示例，所以我不知道这是否实际上会起作用。

*出于这个问题的目的，请假设我们**需要**访问（即我们无法将其关闭）-我们只想对其进行身份验证，并且我们无法部署任何网络级别（例如防火墙）来解决问题.*

# tfs - 通过拖放更改 TFS 2012 中的项目优先级

> ID：16154806
> 
> 赞同：0
> 
> 时间：2013-04-22T19:08:48.407
> 
> 标签：tfs, drag-and-drop, scrum

除了产品积压视图之外，还有什么视图可以更改一个 sprint 范围内的项目优先级？在 sprint backlog 视图中具有这种可能性会很棒，但是在这种情况下，我只能使用拖放将项目移动到另一个 sprint，而无需更改顺序（优先级）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T12:55:37.940

不，迭代（冲刺）积压工作旨在列出团队当前正在处理的事情。优先级应该已经发生。

更新：对于 TFS 2012.3 及更高版本，处于“已提交”状态的项目将保留在积压工作中。您可以在那里重新确定它们的优先级，这将反映在您的 Sprint 积压工作中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-02T11:43:41.580

看看这里 [https://blogs.msdn.microsoft.com/visualstudioalm/2014/07/08/where-is-the-field-on-the-work-item-form-to-order-the-backlog/](https://blogs.msdn.microsoft.com/visualstudioalm/2014/07/08/where-is-the-field-on-the-work-item-form-to-order-the-backlog/)

您需要转到积压项目视图，您可以右键单击项目以在“移动到顶部”或“移动到位置..”之间进行选择。

# c# - 给定左上角和右下角点，如何找到矩形内的所有点？

> ID：16154809
> 
> 赞同：0
> 
> 时间：2013-04-22T19:08:59.433
> 
> 标签：c#, .net, wpf, geometry, shape

我正在尝试实现一个类似 excel 的单击+拖动功能，用户单击一个单元格并拖动。当用户停止拖动时，我可以计算矩形的左上角和右下角。我也可以轻松计算矩形的长度、高度和面积，但是如何计算矩形内的坐标呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:12:58.543

伪代码：

```
for i = left_edge to right_edge
    for j = top_edge to bottom_edge
        add [i, j] to list of points inside rectangle 
```

# java - JRuby 图形用户界面窗口

> ID：16154825
> 
> 赞同：0
> 
> 时间：2013-04-22T19:09:51.413
> 
> 标签：java, ruby, user-interface, jruby, desktop-application

我只是想用 JRuby 创建一个简单的图形窗口。所以我安装了 JRuby 并且正在使用 ruby​​mine IDE。我有这段代码：

```
include Java

import java.awt.Color
import javax.swing.ImageIcon
import javax.swing.JLabel
import javax.swing.JPanel
import javax.swing.JFrame

class Graphics < JFrame
  def initialize
    super "Absolute"
    self.initUI
  end

  def initUI
    panel = JPanel.new
    panel.setLayout nil
    panel.setBackground Color.new 66, 66, 66
    self.getContentPane.add panel

    self.setDefaultCloseOperation JFrame::EXIT_ON_CLOSE
    self.setSize 350, 300
    self.setLocationRelativeTo nil
    self.setVisible true
  end
end 
```

我运行它，它编译没有错误。红宝石矿 说：

```
Process finished with exit code 0 
```

但是什么也没发生，我根本看不到任何窗口。如何让一个简单的图形窗口出现？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T21:53:12.190

您的代码只是定义了一个类，然后到达文件末尾，所以它退出了。尝试在最后创建一个实例，使用`Graphics.new`.

# database - 设计问题：如何为基于 SAAS 的应用程序设计数据模型？

> ID：16154826
> 
> 赞同：2
> 
> 时间：2013-04-22T19:09:53.927
> 
> 标签：database, data-modeling, saas

**为基于 SAAS 的模型的标准和用户特定记录设计数据模型。**

在我的基于 SAAS 的应用程序中，我有用户及其关联的（一对一）角色。租户可以创建自己的特定于其公司的角色并分配给他们的用户。并且 SYSTEM 提供了一些标准角色供租户使用。SYSTEM 定义的标准角色对所有租户都是通用的。

我的 ROLE 和 COMPANY 表如下：

表：公司

```
 COMPANY_ID   |  COMPANY_NAME    
    100          |  Acme Inc.
    101          |  E Technologies. 
```

表：角色

```
 ROLE_ID |   COMPANY_ID  | ROLE_NAME         | IS_STANDARD_ROLE
    1       |               | ADMINISTRATOR     |Yes
    2       |               |MANAGER            |Yes
    3       |   100         |MyAdmin            |No
    4       |   100         |MySpecialist       |No
    5       |   101         |Supervisor         |No 
```

这里我有 ROLE.COMPANY_ID 引用 COMPANY.COMPANY_ID

我试图找出在同一个表中同时容纳标准角色和用户定义角色的最佳方法，并让带有注释的 Hibernate 3.0 可以轻松提取。

这是我现有的替代方案。

1.  我可以在上面的同一个表中同时拥有标准和客户定义的角色，并将 ROLE.COMPANY_ID 字段留空（如果 mysql 允许）作为标准。但挑战是 hibernate3.0 拉 ROLE.COMPANY_ID=100 或 ROLE.COMPANY_ID=

2.  我可以在 company 表中定义一个名为 SYSTEM 的虚拟公司，并将所有标准/SYSTEM 记录引用到名为 SYSTEM 的公司。同样的挑战是在hinernate 3.0 中使用或使用aootations 提取记录。不确定，如何在没有自定义 HQL 的情况下使用注释在休眠 3.0 上执行此 OR 子句？有些方法，团队不喜欢数据库中的虚拟公司记录的想法。

3.  我可以为每个租户创建标准记录的副本并将它们分配给他们自己的 company_id。但是这里的问题是，我将为每个租户至少有 80 条标准记录，如果我预计有 1000 个免费试用租户，我最终将分配 80,000 条记录空间。这个设计有什么想法吗？不是三叶草选项，但选择这个没有任何选项。

相反，我更愿意拥有一份标准记录，所有租户都可以共享，因为它们是系统记录。

**对完美先生在可编程性、维护性、用于 SAAS 启动的数据库空间方面的设计有何想法？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-29T14:50:32.840

我看过几个选项。

我更喜欢有两张表，一张用于标准角色，一张用于客户定义的角色。这很微妙，但它们本质上是两个不同的实体：所有租户共有的角色和租户自定义角色。这些最终可能会在属性和/或关系上有所不同。

另一种是将它们整理在一个表格中，就像您的前两个建议一样，这基本上是相同的解决方案。我不喜欢这样的原因是您重载了 COMPANY_ID 的定义。您几乎总是会后悔重载列定义。

无论哪种方式，我都会选择以下方法之一：

1) 让 Hibernate 调用联合这两个集合的存储过程。

2) 有两个电话并在您的收藏中集合。至少您会缓存标准角色，因为它们不是易失性的。所以这不会增加性能损失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-02T13:36:21.930

您可以将 ROLE TYPE 实体添加到您的数据模型中，该实体对 ROLE 中的角色进行分类。我认为这比公司 ID 中的空白要好。如果需要，它还允许您构建角色层次结构 - 只需添加 PARENT ROLE 属性和递归关系。

实体：COMPANY (COMPANY_ID, NAME) ROLE (ROLE_ID, ROLE_TYPE_ID, COMPANY_ID, NAME) ROLE_TYPE (ROLE_TYPE_ID, PARENT_ROLE_TYPE_ID), NAME)

关系：COMPANY 到 ROLE 是 1:M ROLE_TYPE 到 ROLE 是 1:M ROLE_TYPE 到 ROLE_TYPE 是 1:M

# boost - boost::bimap 查找关系

> ID：16154827
> 
> 赞同：1
> 
> 时间：2013-04-22T19:09:54.047
> 
> 标签：boost, find, bimap

我只想问是否`boost::bimap`提供了一种方法来查找关系`bimap`？因为我在两边都有一个带有 unordered_multiset 的 bimap，所以我需要一个函数来检查它们是否是两个对象之间的关系。我阅读了一些文档，但没有找到。

```
class MyClass
{
  std::string s1;
  std::string s2;
  bool operator == (MyClass const& myClass)
  {
    return (s1 == myClass.s1 && s2 == myClass.s2);
  }
};

namespace std
{
  template<>
  struct hash<MyClass>
  {
    std::size_t operator()(const MyClass& myClass) const
    {
      std::size_t Seed = 0;
      boost::hash_combine(Seed, myClass.s1);
      boost::hash_combine(Seed, myClass.s2);
      return Seed;
    }
  }
}

int main()
{
  typedef boost::bimaps::bimap<boost::bimaps::unordered_multiset_of<client,std::hash<MyClass>, std::equal_to>, boost::bimaps::bimap<boost::bimaps::unordered_multiset_of<client,std::hash<MyClass>, std::equal_to>> MyBiMap;

  MyBiMap MAP;

  Map.value_type myRelation;
  MAP.insert(myRelation(myClassObject1,myClassObject2));
  MAP.insert(myRelation(myClassObject1,myClassObject4));
  MAP.insert(myRelation(myClassObject3,myClassObject4));
  MAP.insert(myRelation(myClassObject3,myClassObject6));
  MAP.insert(myRelation(myClassObject5,myClassObject2));
//    I want to check whether there is a relation between myClassObject1,myClassObject4
//    for example MAP.find(myRelation(myClassObject1,myClassObject4)) returns the iterator
//    and MAP.find(myRelation(myClassObject1,myClassObject6)) returns end();
    } 
```

# xml-serialization - XSD2Code 命名空间问题

> ID：16154828
> 
> 赞同：0
> 
> 时间：2013-04-22T19:09:55.773
> 
> 标签：xml-serialization, xml-deserialization, xsd-validation, xsd2code

我正在使用 XSD2Code 从 XSD 文件生成 C# 类。

我遇到了以下问题。

XML 文件看起来像

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<Notification xmlns="http://message.domain.com">
  <Object xmlns="http://type.domain.com" ID="97440" />
</Notification> 
```

当 Object 的 xmls 为空时，XML 会成功反序列化。但是，当有上面示例中的值时，我收到错误“对象引用未设置为对象的实例”。

什么可能导致此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T09:36:43.867

您必须将 Serializer 更改为类似的东西

```
private static System.Xml.Serialization.XmlSerializer Serializer
{
    get
    {
        if ((serializer == null))
        {
            serializer = new System.Xml.Serialization.XmlSerializer(typeof(Notification), "http://message.domain.com");
        }
        return serializer;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T15:17:48.413

要关闭编码，请在“序列化”选项卡上禁用编码

# php - PHP从另一个文件中获取类中的变量

> ID：16154830
> 
> 赞同：5
> 
> 时间：2013-04-22T19:10:02.003
> 
> 标签：php, oop, class

例如我有文件`config.php:`

```
$host = 'localhost';
$db = 'logger';
$user = 'user';
$pwd = 'pass'; 
```

并归档`mysqlClass.php`

```
class mysql{

public function connect(){

//hot get get variables form confing.php there ?
}

} 
```

而且我不知道如何从 mysql 类中的 confin.php 获取变量，我无法更改 config.php 文件

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T19:11:19.430

只是`require_once()`文件

```
public function connect() {
  require_once 'config.php';
  // ...code...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T19:12:03.203

使用函数参数：

```
class mysql{
    public function connect($host, $db, $user, $pass){
        // do something with the variables
    }
} 
```

现在实例化时`mysql`，使用：

```
require 'config.php';
$mysql = new mysql($host, $db, $user, $pass); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T19:11:32.327

```
include 'config.php';
include_once 'config.php'; 
```

或者

```
require 'config.php';
require_once 'config.php'; 
```

代替`mysqlClass.php`

和之间的区别在于`include`，`require`它`require`也会产生致命`E_COMPILE_ERROR`级别的错误，停止脚本，而`include`只会产生`E_WARNING`，这不会停止脚本。`include_once`or`require_once`和`include`or之间的区别在于`require`PHP 会检查文件是否已经被包含，如果没有，它将包含它。如果有，它**不会**再次加载它。

# c# - XML 序列化为字符串

> ID：16154832
> 
> 赞同：1
> 
> 时间：2013-04-22T19:10:10.650
> 
> 标签：c#, xml

我正在尝试将对象序列化为字符串。这是代码：

```
XmlSerializer xmlSerializer = new XmlSerializer(data.GetType());
StringWriter textWriter = new StringWriter();
xmlSerializer.Serialize(textWriter, data);
var xml = textWriter.ToString(); 
```

这可行，但 "\r\n" 是字符串的一部分。我想用这个字符串执行 XSLT 转换。由于“\r\n”字符，这不起作用。

这是转换代码：

```
XslCompiledTransform transform = new XslCompiledTransform();
transform.Load(xsltPath);

using (XmlReader xmlReader = System.Xml.XmlReader.Create(new StringReader(xmlString)))
{
     transform.Transform(xmlReader, xmlWriter);
     ...
} 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:11:37.110

只需将那些`\r\n`s替换为`\n`然后使用 XSLT

```
var xml = textWriter.ToString().Replace("\r\n", "\n"); 
```

# html - 尝试使用 CSS 将子元素垂直和水平居中

> ID：16154839
> 
> 赞同：0
> 
> 时间：2013-04-22T19:10:37.200
> 
> 标签：html, css, centering

就父元素而言，我如何能够垂直和水平地放置子元素。

```
#bigBanner  {
position: relative;
width: 960px;
height: 483px;
margin: 0 auto;
background-image:url(../wpimages/sliderbg.jpg);
}

#bannerQuote    {
width: 518px;
height: 127px;
margin: 0 auto;
background-color: #0d0f11;
opacity: 0.95;
filter:Alpha(opacity=95);
} 
```

是代码，bannerQuote 正好在bigBanner 的中间。我将如何实现这一目标？我有一种感觉，这很简单。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:17:29.937

你可以做类似...

```
#bannerQuote {
  position:absolute;
  top: 50%;
  left: 50%;
  margin-left: -259px;
  margin-top: -64px;
  width: 518px;
  height: 127px;
  background-color: #0d0f11;
  opacity: .95;
  filter:Alpha(opacity=95);
} 
```

其中 margin-left 和 margin-top 由您的高度和宽度决定。由于您将左上角设置为父容器的中心，因此您希望将子元素的一半宽度移回左侧，并将其高度的一半移回顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:55:43.487

只要您在具有特定高度和宽度的父元素中有一个具有特定高度和宽度的子元素，您就可以从顶部和左侧绝对定位子元素。喜欢：

```
#bannerQuote    {
 position:absolute;
 top: 178px;
 left: 221px;
 width: 518px;
 height: 127px;
 margin: 0 auto;
 background-color: #0d0f11;
 opacity: 0.95;
 filter:Alpha(opacity=95);
} 
```

如果您想在具有动态值的父级中定位具有已知高度和宽度的子级，请参阅 fetchs 答案。

# c++ - 如何在 C++ 中清空套接字读/写缓冲区

> ID：16154841
> 
> 赞同：0
> 
> 时间：2013-04-22T19:10:44.150
> 
> 标签：c++, c, sockets, network-programming, pthreads

我正在研究这个分布式计算项目，我必须模拟一些“节点”失败一段时间，即它们将无法读取或写入任何传出的 tcp 连接。一种方法是读取和丢弃消息，但我在 C/C++ 中寻找任何内置选项，您可以在其中设置套接字以丢弃任何传入消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T21:43:35.373

如果您通过关闭套接字来模拟故障，那么您会错过很多发生问题的情况。您 *可能*希望同时测试封闭和无响应的端点。主机上的解决方案，例如关闭套接字会模拟主机错误，但网络上的解决方案需要应用程序/操作系统支持解决方案。

封闭的套接字会自行清理。当您尝试访问使用关闭的套接字运行的操作系统时，它会返回错误。所有这些都是你应该检查的东西。然而，真正的故障，特别是在网络中而不是在主机中，只会丢弃数据包。这可能会使您的系统等待很长时间，而 tcp 超时。

模拟网络故障的最佳方法是使用防火墙规则。在防火墙处阻止连接的一端或两端，模拟网络故障。iptables，我相信还有其他解决方案，允许您丢弃部分数据包或具有某些特征的数据包。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T19:46:43.920

只需关闭“失败”节点正在使用的所有套接字。

取决于 OP 节点应用程序的完成方式（问题中未提及）.. 模拟故障节点的最简单方法是“杀死”节点应用程序，然后将跳过所有 TCP“关闭”数据包，其他节点将不知道连接关闭或（作为第一阶段）只需手动关闭节点上的所有通信套接字。这意味着不是完全干净的实验，因为其他节点会知道连接以“正确”的方式关闭，但足以检查系统的其余部分在某些节点丢失的情况下如何表现。

# javascript - 在 python 或 javascript 中正确使用 fold 或 reduce 函数来处理长到宽的数据？

> ID：16154847
> 
> 赞同：3
> 
> 时间：2013-04-22T19:10:54.400
> 
> 标签：javascript, python, functional-programming, reshape, fold

试着学会像函数式程序员一样思考——我想用我认为是折叠或归约操作来转换数据集。在 R 中，我认为这是一个重塑操作，但我不确定如何翻译这种想法。

我的数据是一个 json 字符串，如下所示：

```
s = 
'[
{"query":"Q1", "detail" : "cool", "rank":1,"url":"awesome1"},
{"query":"Q1", "detail" : "cool", "rank":2,"url":"awesome2"},
{"query":"Q1", "detail" : "cool", "rank":3,"url":"awesome3"},
{"query":"Q#2", "detail" : "same", "rank":1,"url":"newurl1"},
{"query":"Q#2", "detail" : "same", "rank":2,"url":"newurl2"},
{"query":"Q#2", "detail" : "same", "rank":3,"url":"newurl3"}
]' 
```

我想把它变成这样的东西，其中查询是定义“行”的主键，嵌套了与“排名”值和“网址”字段相对应的唯一“行”：

```
'[
{ "query" : "Q1",
    "results" : [
        {"rank" : 1, "url": "awesome1"},
        {"rank" : 2, "url": "awesome2"},
        {"rank" : 3, "url": "awesome3"}        
    ]},
{ "query" : "Q#2",
    "results" : [
        {"rank" : 1, "url": "newurl1"},
        {"rank" : 2, "url": "newurl2"},
        {"rank" : 3, "url": "newurl3"},        
    ]}
]' 
```

我知道我可以迭代，但我怀疑有一个功能操作可以进行这种转换，对吧？

也很想知道如何获得更像这样的东西，Version2：

```
'[
{ "query" : "Q1",
    "Common to all results" : [
        {"detail" : "cool"}
    ],
    "results" : [
        {"rank" : 1, "url": "awesome1"},
        {"rank" : 2, "url": "awesome2"},
        {"rank" : 3, "url": "awesome3"}        
    ]},
{ "query" : "Q#2",
    "Common to all results" : [
        {"detail" : "same"}
    ],
    "results" : [
        {"rank" : 1, "url": "newurl1"},
        {"rank" : 2, "url": "newurl2"},
        {"rank" : 3, "url": "newurl3"}        
    ]}
]' 
```

在第二个版本中，我想将所有在同一个查询下重复的数据放入一个“其他东西”容器中，其中“排名”下唯一的所有项目都在“结果”容器中。

我正在处理 mongodb 中的 json 对象，并且可以使用 python 或 javascript 来尝试这种转换。

任何建议，例如此转换的正确名称，可能是在大型数据集上执行此操作的最快方法，都值得赞赏！

# 编辑

在下面结合@abarnert 的优秀解决方案，试图让我的 Version2 上面的任何其他人处理相同类型的问题，需要在一个级别下分叉一些键，在另一个下分叉其他键......

这是我尝试过的：

```
from functools import partial
groups = itertools.groupby(initial, operator.itemgetter('query'))
def filterkeys(d,mylist):
    return {k: v for k, v in d.items() if k in mylist}

results = ((key, map(partial(filterkeys, mylist=['rank','url']),group)) for key, group in groups)
other_stuff = ((key, map(partial(filterkeys, mylist=['detail']),group)) for key, group in groups)

??? 
```

不好了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:30:59.497

我知道这不是您所要求的折叠式解决方案，但我会使用 来执行此操作`itertools`，它的功能相同（除非您认为 Haskell 的功能不如 Lisp……），而且可能是最 Pythonic 的解决方法这。

这个想法是将您的序列视为一个惰性列表，并对其应用一系列惰性转换，直到您获得所需的列表。

这里的关键步骤是[`groupby`](http://docs.python.org/2/library/itertools.html#itertools.groupby)：

```
>>> initial = json.loads(s)
>>> groups = itertools.groupby(initial, operator.itemgetter('query'))
>>> print([key, list(group) for key, group in groups])
[('Q1',
  [{'detail': 'cool', 'query': 'Q1', 'rank': 1, 'url': 'awesome1'},
   {'detail': 'cool', 'query': 'Q1', 'rank': 2, 'url': 'awesome2'},
   {'detail': 'cool', 'query': 'Q1', 'rank': 3, 'url': 'awesome3'}]),
 ('Q#2',
  [{'detail': 'same', 'query': 'Q#2', 'rank': 1, 'url': 'newurl1'},
   {'detail': 'same', 'query': 'Q#2', 'rank': 2, 'url': 'newurl2'},
   {'detail': 'same', 'query': 'Q#2', 'rank': 3, 'url': 'newurl3'}])] 
```

只需一步，您就可以看到我们已经有多近了。

要重组每个键，请将 pair 分组为您想要的 dict 格式：

```
>>> groups = itertools.groupby(initial, operator.itemgetter('query'))
>>> print([{"query": key, "results": list(group)} for key, group in groups])
[{'query': 'Q1',
  'results': [{'detail': 'cool',
               'query': 'Q1',
               'rank': 1,
               'url': 'awesome1'},
              {'detail': 'cool',
               'query': 'Q1',
               'rank': 2,
               'url': 'awesome2'},
              {'detail': 'cool',
               'query': 'Q1',
               'rank': 3,
               'url': 'awesome3'}]},
 {'query': 'Q#2',
  'results': [{'detail': 'same',
               'query': 'Q#2',
               'rank': 1,
               'url': 'newurl1'},
              {'detail': 'same',
               'query': 'Q#2',
               'rank': 2,
               'url': 'newurl2'},
              {'detail': 'same',
               'query': 'Q#2',
               'rank': 3,
               'url': 'newurl3'}]}] 
```

但是等等，还有那些额外的字段是你想要去掉的。简单的：

```
>>> groups = itertools.groupby(initial, operator.itemgetter('query'))
>>> def filterkeys(d):
...     return {k: v for k, v in d.items() if k in ('rank', 'url')}
>>> filtered = ((key, map(filterkeys, group)) for key, group in groups)
>>> print([{"query": key, "results": list(group)} for key, group in filtered])
[{'query': 'Q1',
  'results': [{'rank': 1, 'url': 'awesome1'},
              {'rank': 2, 'url': 'awesome2'},
              {'rank': 3, 'url': 'awesome3'}]},
 {'query': 'Q#2',
  'results': [{'rank': 1, 'url': 'newurl1'},
              {'rank': 2, 'url': 'newurl2'},
              {'rank': 3, 'url': 'newurl3'}]}] 
```

剩下要做的就是调用`json.dumps`而不是调用`print`.

* * *

对于您的后续行动，您希望在每一行中获取所有相同的值，`query`并将它们分组到`otherstuff`中，然后列出`results`.

因此，对于每个组，首先我们要获取公共密钥。我们可以通过迭代组中任何成员的键来做到这一点（不在第一个成员中的任何内容都不能在所有成员中），所以：

```
def common_fields(group):
    def in_all_members(key, value):
        return all(member[key] == value for member in group[1:])
    return {key: value for key, value in group[0].items() if in_all_members(key, value)} 
```

或者，或者……如果我们将每个成员变成一个`set`键值对，而不是一个字典，那么我们就可以`intersect`把它们都变成一个。这意味着我们终于可以使用 了`reduce`，所以让我们尝试一下：

```
def common_fields(group):
    return dict(functools.reduce(set.intersection, (set(d.items()) for d in group))) 
```

`dict`我认为 and 之间的来回转换`set`可能会降低可读性，这也意味着您的值必须是可散列的（对于您的样本数据来说不是问题，因为这些值都是字符串）......但它肯定更简洁。

当然，这将始终`query`作为一个公共字段包含在内，但我们稍后会处理它。（另外，你想`otherstuff`成为一个`list`with one `dict`，所以我们会在它周围加上一对额外的括号）。

同时，`results`与上面相同，只是`filterkeys`过滤掉所有公共字段，而不是过滤掉除`rank`and之外的所有内容`url`。把它放在一起：

```
def process_group(group):
    group = list(group)
    common = dict(functools.reduce(set.intersection, (set(d.items()) for d in group)))
    def filterkeys(member):
        return {k: v for k, v in member.items() if k not in common}
    results = list(map(filterkeys, group))
    query = common.pop('query')
    return {'query': query,
            'otherstuff': [common],
            'results': list(results)} 
```

所以，现在我们只使用那个函数：

```
>>> groups = itertools.groupby(initial, operator.itemgetter('query'))
>>> print([process_group(group) for key, group in groups])
[{'otherstuff': [{'detail': 'cool'}],
  'query': 'Q1',
  'results': [{'rank': 1, 'url': 'awesome1'},
              {'rank': 2, 'url': 'awesome2'},
              {'rank': 3, 'url': 'awesome3'}]},
 {'otherstuff': [{'detail': 'same'}],
  'query': 'Q#2',
  'results': [{'rank': 1, 'url': 'newurl1'},
              {'rank': 2, 'url': 'newurl2'},
              {'rank': 3, 'url': 'newurl3'}]}] 
```

这显然不像原始版本那么微不足道，但希望这一切仍然有意义。只有两个新技巧。首先，我们必须迭代`groups`多次（一次找到公共键，然后再次提取剩余的键）

# php - 如何在浏览器刷新时停止将输入表单数据发送到 SQL 数据库？

> ID：16154848
> 
> 赞同：1
> 
> 时间：2013-04-22T19:10:56.340
> 
> 标签：php

在每次浏览器刷新时，已经发送到数据库的旧数据会再次发送。如果输入名称'title'有一些值，我想在数据库中插入数据。

这是我的html表单：

```
<form method="post" enctype="multipart/form-data">
<table>
<tr>
<td><p>Title: <input type="text" name="title"></p></td>
</tr>
<tr>
<td><p>Comment: <input type="text" name="comment" class="inputtext"></p></td>
</tr>
<tr>
<td>  
<input type="hidden" name="MAX_FILE_SIZE"value="16000000">
<input name="userfile" type="file" id="userfile"> 
</td>
<td width="80"><input name="upload"type="submit" class="box" id="upload" value=" Upload "></td>
</tr>
</table>
</form> 
```

我的PHP代码：

```
<?php
$con = mysql_connect('','','') or die(mysql_error());
$db = mysql_select_db('db', $con);
if(isset($_POST['upload'])&&$_POST['title']>0)
{
$title = $_POST['title'];
$comment = $_POST['comment'];
$fileName = $_FILES['userfile']['name'];
$tmpName  = $_FILES['userfile']['tmp_name'];
$fileSize = $_FILES['userfile']['size'];
$fileType = $_FILES['userfile']['type'];
$fileType=(get_magic_quotes_gpc()==0 ? mysql_real_escape_string(
$_FILES['userfile']['type']) : mysql_real_escape_string(
stripslashes ($_FILES['userfile'])));
$fp      = fopen($tmpName, 'r');
$content = fread($fp, filesize($tmpName));
$content = addslashes($content);
fclose($fp);
if(!get_magic_quotes_gpc())
{
$fileName = addslashes($fileName);
}

if($db){
   $query = "INSERT INTO table (title,comment, name, size, type, content ) ".
 "VALUES ('$title','$comment','$fileName', '$fileSize', '$fileType', '$content')";
mysql_query($query) or die('Error, query failed'); 
mysql_close();
echo "<br>Success: $title <br>";
}else { echo "Error"; }
 } 
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:17:33.487

在对提交的数据执行任何操作后，您可以重定向到同一页面，例如：

```
header('Location: /yourpage/');
exit; 
```

如果有人尝试刷新它，它只会刷新内容，但不会提交表单。

如果您需要显示错误消息或成功确认，您可以在显示`unset`消息时将其保存在会话参数和它们中。

`exit`需要这样脚本不会继续执行并向选择忽略标头的客户端发送数据。

**“标头已发送”错误**

如果在调用之前已经输出了任何内容`header()`，你会得到一个`headers already sent`错误。如果 PHP 有任何内容要发送到浏览器，它会自动完成标题并开始输出页面内容。此时无法设置其他标题。这可能是由任何输出内容引起的，例如，、、、和`print`其他函数，或者可能是 HTML 代码，甚至是标签外的空白。`echo``print_r``var_dump``<?php .. ?>`

为避免这种情况，您可以：

1.  构造您的代码，以便在输出任何内容之前，在开始时执行所有 PHP 代码。

2.  使用输出缓冲，以便 PHP 收集所有内容并仅在脚本末尾输出。[您可以在此处](http://php.net/manual/en/book.outcontrol.php)阅读有关它的更多信息（包括有关访问内容的其他方式），但最简单的方法是`ob_start()`在任何 HTML 代码或内容输出之前放置在脚本开头附近的某个位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:19:09.340

我会先用给出的值查询数据库，这样你就可以确保你没有输入重复的条目（无论如何你都想检查它..），如果有任何条目返回就返回。

```
if($db){
$checkQuery = "SELECT * FROM table WHERE TITLE = $title AND COMMENT = $comment"
$result = mysql_query($checkQuery) or die('Error, query failed'); 
if (mysql_num_rows($result) > 0) { return; }

$query = "INSERT INTO table (title,comment, name, size, type, content ) ".
"VALUES ('$title','$comment','$fileName', '$fileSize', '$fileType', '$content')";
mysql_query($query) or die('Error, query failed'); 
mysql_close();
echo "<br>Success: $title <br>";
}else { echo "Error"; }
} 
```

如果您不想这样做，您可以使用帖子，然后重定向，然后获取模式：[说明](http://www.theserverside.com/news/1365146/Redirect-After-Post)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T19:47:49.980

在窗口加载时使用 JavaScript reset() 重置表单。

```
window.onload=function(){ 
var frm=document.getElementsByTagName(form);
frm.reset();
}; 
```

# c# - 带有 BulletList C# 控件的 Jquery 附加问题

> ID：16154850
> 
> 赞同：0
> 
> 时间：2013-04-22T19:11:02.347
> 
> 标签：c#, javascript, jquery, winforms

```
var eq = Cost/Sales;
var delimiters = "+-*/()";
var result = new Array();
var chunk = "";
var regex =  /[()*/+-]|[A-Z a-z]+|\d+/g;
var parts = eq.match(regex);
for (var i = 0; i < parts.length; i++)
{
      $("#ctl00_ContentPlaceHolder1_Destination").append('<li>'+parts[i]+'</li>');
       alert('<li>'+parts[i]+'</li>');     
} 
```

* * *

```
<CTExtension:EmptyBulletedList ID="Destination" runat="Server" class="connectedSortable"></CTExtension:EmptyBulletedList> 
```

我的 javascript 中有以下代码将值分解为数组。现在我想将它一一附加到目标 id-control 中，这是我的 C# 中的项目符号列表。但是上面的代码没有附加值。请帮忙！当我运行页面时它会创建 ul 标签

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:14:12.977

在运行时，您的 #ctl00 的值是否仍然相同？这看起来像 ASP.NET 中的占位符，这意味着实际值可能会在运行时发生变化。此外，当您说它没有附加值时，它在做什么。您是否在控制台中收到任何 javascript 错误？你收到警报了吗？加载后在页面上查看源代码并确保您传递给 JQuery 选择器的 ID 是正确的。

我会假设 ControlID 正在更改，因此您的选择器不再有效。

请参阅下面的我的 Fiddle，它正在工作，从一个有效的解决方案开始并进行更改直到它崩溃，然后你就会知道哪里出了问题。

[http://jsfiddle.net/zWXCN/](http://jsfiddle.net/zWXCN/)

```
for (var i = 0; i < 20; i++)
            {
                  $("#test").append('<li>'+i+'</li>');
                   //alert('<li>'+i+'</li>');     
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:16:20.890

通过自动生成的 ASP.NET ID 直接引用您的元素可能会导致问题。您能否检查该 ID 是否仍然正确（使用浏览器中的开发人员工具）？

相反，您应该引用您的控件，例如：

`$('#<%= Destination.ClientID %>')`

这意味着无论您的页面结构或 ClientID 的实现如何，您将始终引用正确的控件。

# c++ - C++ 混合对象数组

> ID：16154852
> 
> 赞同：1
> 
> 时间：2013-04-22T19:11:06.747
> 
> 标签：c++, arrays, object

[我正在通过http://www.tonypa.pri.ee/tbw/tut02.html](http://www.tonypa.pri.ee/tbw/tut02.html)阅读磁贴引擎教程，但是当我将 Flash 代码翻译成 C++ 时我被卡住了。到目前为止，我理解并翻译了这部分：

```
unsigned int MAPDATA[6][8] = {
    { 1, 1, 1, 1, 1, 1, 1, 1 },
    { 1, 0, 0, 0, 0, 0, 0, 1 },
    { 1, 0, 1, 0, 0, 0, 0, 1 },
    { 1, 0, 0, 0, 0, 1, 0, 1 },
    { 1, 0, 0, 0, 0, 0, 0, 1 },
    { 1, 1, 1, 1, 1, 1, 1, 1 }
};

class Tile0 {
    public:
        Tile0();
        bool walkable = true;
        unsigned int frame = 0;
};

class Tile1 {
    public:
        Tile1();
        bool walkable = false;
        unsigned int frame = 1;
}; 
```

但在这条线上，它说，

> “第一行 game.Tile0= function () {} 声明了新的对象原型。当我们从地图数组中得到 0 时，我们将使用 Tile0 作为模板在该位置创建新的 tile 对象。”

这是否意味着将数组 MAPDATA 转换为对象数组？

```
unsigned int MAPOBJS[6][8] = {
    { Tile1, Tile1, Tile1, Tile1, Tile1, Tile1, Tile1, Tile1 },
    { Tile1, Tile0, Tile0, Tile0, Tile0, Tile0, Tile0, Tile1 },
    { Tile1, Tile0, Tile1, Tile0, Tile0, Tile0, Tile0, Tile1 },
    { Tile1, Tile0, Tile0, Tile0, Tile0, Tile1, Tile0, Tile1 },
    { Tile1, Tile0, Tile0, Tile0, Tile0, Tile0, Tile0, Tile1 },
    { Tile1, Tile1, Tile1, Tile1, Tile1, Tile1, Tile1, Tile1 }
}; 
```

或者这是否意味着使用 Tile0 间接引用 0？你如何在 C++ 上做到这一点，所以以后你可以......

```
if ( MAPOBJS[1][5].walkable )
    player.moveLeft(); 
```

用于串通检测？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:28:00.703

必须先阅读原始文章。好吧，我认为那里提出的建议可以用类似的东西代替（不要假装优化或其他），但我希望它能给你一个大致的想法。

```
class Tile {
   public:
     enum {
        TILE0,
        TILE1
     };

     Tile(int type) : m_type(type) {};
   protected:
     int m_type;   
};

class Tile1 : public Tile {
     Tile1( Tile::TILE0 );
};

class Tile2 : public Tile {
     Tile2( Tile::TILE1 );
};

int mapData[6][8] = {
     { Tile::TILE0, Tile::TILE1, ... }, 
     { ... }
};

Tile * mapObject[6][8];

initMap() {
   for (int i=0;i<6;i++) 
     for (int j=0;j<8;j++) {
       switch (mapData[i][j]) {
           case Tile::TILE0:
              mapObect[i][j] = new Tile1();
           break;
           case Tile::TILE1:
              mapObject[i][j] = new Tile2();
           break;
           default:
              mapObject = NULL;
           break;
       }
   }
} 
```

# javascript - 如何获取相对于父 div 的鼠标坐标？Javascript

> ID：16154857
> 
> 赞同：28
> 
> 时间：2013-04-22T19:11:23.057
> 
> 标签：javascript, events, mousemove

我目前有一个 div，其中包含其他元素。

类似于下面的东西；

```
<div id="container" style="position: relative; width: 500px; height: 500px;">
     <div style="position: absolute; left: 50px; top: 50px;"></div>
     <div style="position: absolute; left: 100px; top: 100px;"></div>
</div> 
```

我正在尝试使用 id 获取鼠标相对于 div 的位置`container`。

到目前为止，我有这个；

```
function onMousemove(event) {

    x = event.offsetX;
    y = event.offsetY;
};

var elem = document.getElementById("container");
elem.addEventListener("mousemove", onMousemove, false); 
```

如果具有 id 的 div`container`没有子级，这可以正常工作。当`container`div 有子元素时，它会获取相对于子元素而不是父元素的鼠标坐标。

我的意思是，如果鼠标位于`x: 51, y: 51`相对于父 div 的位置，它实际上会`x: 1, y: 1`使用上面给出的 html 相对于子 div 返回。

我怎样才能实现我想要的，请不要图书馆。

**编辑**

tymeJV 对上面发生的事情做了一个 jsfiddle。

[http://jsfiddle.net/N6PJu/1](http://jsfiddle.net/N6PJu/1)

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2015-10-26T14:01:34.727

接受的答案在 Chrome 中对我不起作用。这是我解决它的方法：

```
function relativeCoords ( event ) {
  var bounds = event.target.getBoundingClientRect();
  var x = event.clientX - bounds.left;
  var y = event.clientY - bounds.top;
  return {x: x, y: y};
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-22T20:24:01.023

本质上：'mouseposition' - '父元素位置' = 'mouseposition 相对于父元素'

所以在这里我修改了你的功能：

```
function onMousemove(e){
    var m_posx = 0, m_posy = 0, e_posx = 0, e_posy = 0,
           obj = this;
    //get mouse position on document crossbrowser
    if (!e){e = window.event;}
    if (e.pageX || e.pageY){
        m_posx = e.pageX;
        m_posy = e.pageY;
    } else if (e.clientX || e.clientY){
        m_posx = e.clientX + document.body.scrollLeft
                 + document.documentElement.scrollLeft;
        m_posy = e.clientY + document.body.scrollTop
                 + document.documentElement.scrollTop;
    }
    //get parent element position in document
    if (obj.offsetParent){
        do { 
            e_posx += obj.offsetLeft;
            e_posy += obj.offsetTop;
        } while (obj = obj.offsetParent);
    }
    // mouse position minus elm position is mouseposition relative to element:
    dbg.innerHTML = ' X Position: ' + (m_posx-e_posx) 
                  + ' Y Position: ' + (m_posy-e_posy);
}

var elem = document.getElementById('container');
elem.addEventListener('mousemove', onMousemove, false);

var dbg=document.getElementById('dbg');  //debut output div instead of console 
```

这是一个[工作演示小提琴](http://jsfiddle.net/N6PJu/3/)。正如您在代码中所读到的，这也会查看文档的滚动位置。

PPK 关于“[事件属性](http://www.quirksmode.org/js/events_properties.html#position)”和“[查找位置](http://www.quirksmode.org/js/findpos.html)”的文章（一如既往）是一本好书！

希望这可以帮助！

**更新：**
我实际上在 ppk 的代码中发现了一个错误（这有多罕见？！）：我纠正了错误`var`：
`if (!e) var e = window.event;`到`if (!e){e = window.event;}`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-22T12:48:34.383

*html*

```
<div id="container" style="position: relative; width: 500px; height: 500px;">
<div style="position: absolute; left: 50px; top: 50px;"></div>
<div style="position: absolute; left: 100px; top: 100px;"></div>
</div> 
```

*Javascript*

```
function onMousemove(event) {
    x = event.layerX; // position x relative to div
    y = event.layerY; // position y relative to div 
};

var elem = document.getElementById("container");
elem.addEventListener("mousemove", onMousemove, false); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T20:01:10.623

获取 screenX 和 screenY 属性以查看鼠标在屏幕上的位置（并可能考虑到 scrollHeight！）。

然后获取容器元素的left和top，计算它们之间的偏移量：即鼠标在元素中的位置。

有关更多详细信息，请参阅[https://developer.mozilla.org/en-US/docs/DOM/MouseEvent](https://developer.mozilla.org/en-US/docs/DOM/MouseEvent)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-05-18T22:18:37.660

使用函数式组件，您可以结合`useRef`事件`click`监听器（而不需要直接引用 DOM）：

```
const MyElement = () => {
  const ref = useRef(null);

  useEffect(() => {
    const currentRef = ref.current;
    if (currentRef) {
      const clickListener = (e) => {
        const rightOfElement = currentRef.getBoundingClientRect().right;
        const leftOfElement = currentRef.getBoundingClientRect().left;
        const mousePosXRelativeToElement = e?.clientX ?? 0;

        const mousePosX = rightOfElement - mousePosXRelativeToElement;
        const fullWidth = rightOfElement - leftOfElement;

        // do something, e.g. changing state based on position
        if (mousePosX / fullWidth < 0.5) {
          setTheme(2);
        } else {
          setTheme(1);
        }
      };
      currentRef.addEventListener("click", clickListener);
      return () => {
        currentRef.removeEventListener("click", clickListener);
      };
    }
  }, [setTheme]);

  return (
    <div className="theme-selector-wrapper">
      <div className="theme-selector" ref={ref}></div>
    </div>
  );
}; 
```

在内部`useEffect`（即一旦加载元素），将事件侦听器添加到分配给`ref`侦听点击的元素的元素。在此示例中，我根据 X 位置与元素宽度的比率更改了“主题”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-04T10:54:30.580

尽管 Nikita Volkov 的回答非常可靠，但在某些情况下它可能无法按预期工作。

我建议使用`currentTarget`而不是`target`：

```
const handleEvent = (event) => 
{
  const bounds = event.currentTarget.getBoundingClientRect();
  const x = event.clientX - bounds.left;
  const y = event.clientY - bounds.top;
  // Now x and y are the relative coordinates.
} 
```

注意：

*   `event.target`是触发事件的元素（例如，用户点击或悬停在上面）。
*   `event.currentTarget`是事件侦听器附加到的元素。

当您想将侦听器附加到具有多个子元素的某个元素时，它会有所不同。

例如，

```
<div onMouseMove={handleEvent} id="div0">
  <div style={{'height': 200, 'width': 200}} id="div1">
  </div>
  <div style={{'height': 200, 'width': 200}} id="div2">
  </div>
</div> 
```

如果您使用`event.target`并将鼠标悬停在上方`div2`，您将获得相关的相对坐标，`div2`而您可能希望它们相关`div0`。然后`event.currentTarget`会做的伎俩。

# php - 在 PHP 中向 XML 文件添加新条目

> ID：16154858
> 
> 赞同：0
> 
> 时间：2013-04-22T19:11:26.137
> 
> 标签：php, xml, append, simplexml

我讨厌一直寻求帮助，但我被这个绊倒了。我需要做的最后一件事是在我的 xml 文件中添加一个新条目。xml结构是这样的：

```
<employees>
    <employee EmpID="">
        <first_name></first_name>
        <last_name></last_name>
        <ssnum></ssnum>
        <status></status>
        <contact_info>
                <office_phone></office_phone>
                <email></email>
                <cell_phone></cell_phone>
        </contact_info>
        <access_info level="user">
                <username></username>
                <password></password>
        </access_info>
        <department></department>
        <date_started></date_started>
        <years></years>
        <position></position>
        <salary></salary>
        <e_increase></e_increase>
        <e_raise></e_raise>
        <photo></photo>
    </employee>
</employees> 
```

我想添加一名新员工，并提供所有适当的信息。所有值都已存储在变量中。我研究过类似的事情：

```
$employees= new SimpleXMLElement;

$employees->loadfile("xml/employee.xml");

$employees->addChild("employee");

$employees->save('xml/employee.xml'); 
```

但我不确定如何添加属性，设置正确的子元素等。有人可以给我一个例子吗？我在这里找到的所有东西要么不处理属性，要么没有子元素的子元素。

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:15:49.477

SimpleXML 非常适合遍历/读取 XML 文档，但如果您想添加元素，包括属性等，最好使用功能齐全的库，例如[DOM](http://www.php.net/manual/en/intro.dom.php)

（您*可以*添加元素（如您在示例中描述的那样），但它不像普通的 XML 解析器那样 100% 功能齐全 - 因此是“简单”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T22:30:49.777

以下是如何做到这一点`sinplexml`：

```
$xml = simplexml_load_string($x); // assuming XML in $x

$newemp = $xml->addChild('employee',''); // add <employee>
$newemp->addAttribute('EmpID','9'); // add attribute

$contact = $newemp->addChild('contact_info',''); // add <contact_info> as child of <employee>
$contact->addChild('office_phone',''); 
```

# d3.js - 在配对条形图中访问键/值 - D3.js

> ID：16154860
> 
> 赞同：0
> 
> 时间：2013-04-22T19:11:35.893
> 
> 标签：d3.js, bar-chart, key-value, javascript-objects

我正在尝试在我的 JS 对象/数组中的*全局*和*本地*之间制作一个配对条形图。我之前在 D3 中制作过条形图，但没有使用对象。我发现很难访问正确的数据。

最终，*关键字*data 将在轴中使用。并且*cpc*将用作工具提示。

这是我到目前为止的代码：（[或查看我的 JSFiddle](http://jsfiddle.net/enigmarm/juY5E/1/)）

```
var w = 600;
var h = 400;

var colors = ["#377EB8", "#4DAF4A"];

var dataset = {"keyword": ["payday loans", "title loans", "personal loans"],
            "glob": ["1500000", "165000", "550000"],
            "local": ["673000", "165000", "301000"],
            "cpc": ["14.11", "12.53", "6.14"]   
};

var series = 2; // Global & Local

var x0Scale = d3.scale.ordinal()
            .domain(d3.range(dataset.glob.length))
            .rangeRoundBands([0, w], 0.05); 

var yScale = d3.scale.linear()
            .domain([0, d3.max(dataset, function(d) {return d.glob;})]) 
            .range([0, h]);

var glob = function(d) {
    return d.glob;
};

//SVG element
var svg = d3.select("#searchVolume")
        .append("svg")
        .attr("width", w)
        .attr("height", h);     

// Graph Bars
svg.selectAll("rect") 
    .data(dataset, glob) //access the series here?
    .enter()
    .append("rect")
    .attr("x", function(d, i){
        return x0Scale(i);
    })
    .attr("y", function(d) {
        return h - yScale(d.glob);
    })
    .attr("width", x0Scale.rangeBand())
    .attr("height", function(d) {
        return yScale(d.glob); // ***************
    })
    .attr("fill", colors[1]); 
```

目前，图表没有被填充。我假设我没有正确访问值。我只是想从*glob*中获取数据以确保我正确地访问了东西——然后我要从那里填充这两个系列等。我的问题是没有正确访问键/值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:49:06.590

看看这个：http: [//jsfiddle.net/juY5E/2/](http://jsfiddle.net/juY5E/2/)

我能够通过更改`.data(dataset, glob)`为`.data(dataset.glob)`然后更改`d.glob`为`+d`'y' attr、'height' attr 和 yScale.domain来获得三个条形图

为了能够在全局和本地之间切换，您可能需要重组数据。

# string - 异常中的字符串连接

> ID：16154867
> 
> 赞同：7
> 
> 时间：2013-04-22T19:11:50.977
> 
> 标签：string, postgresql-9.2

在我的触发程序中，我对消息使用 RAISE EXCEPTION。我对简单的消息没有问题，但如果我想给用户一些更复杂的反馈，我面临一个问题：连接运算符在 RAISE EXCEPTION 语句中不起作用。

首先，我试过这个：

```
CREATE OR REPLACE FUNCTION hlidej_datum_kon() RETURNS trigger AS $$
DECLARE
  od date;
BEGIN
  SELECT a.datum_od FROM akce AS a WHERE a.kod_akce = (
    SELECT b.kod_akce FROM sj AS b WHERE b.kod_sj = NEW.kod_sj
  ) INTO od;
  IF NEW.datum < od THEN
    RAISE EXCEPTION 'Kontext nemohl být odkryt před začátkem akce ('||TO_CHAR(od)||')!'
    ROLLBACK;  
  END IF;
  RETURN NEW;
END;
$$ LANGUAGE plpgsql; 
```

没用。所以我试图将整个文本放入一个文本变量中，但我没有找到如何将变量的内容放入异常语句中，以便将其作为消息打印。

我的问题是：**如何在 PostgreSQL 触发函数中打印包含变量的消息？**

只是为了完整起见，这是我的触发器：

```
CREATE TRIGGER hlidej_datum_kon
AFTER INSERT OR UPDATE ON kontext
FOR EACH ROW
  EXECUTE PROCEDURE hlidej_datum_kon();
END; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-22T21:20:08.660

您不需要使用 concat。您可以改用通配符：

```
RAISE EXCEPTION 'Kontext nemohl být odkryt před začátkem akce (%)!', od; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-23T04:59:39.047

有两个错误

*   RAISE 语句的第一个参数是格式字符串——这个字符串应该是常量。它可以包含替换符号“%”，这些符号的值作为 RAISE 语句的其他参数放置。

*   不应该使用 ROLLBACK 语句。RAISE EXCEPTION 抛出异常并且 ROLLBACK 语句被更新执行。您不能在 PL/pgSQL 中显式控制事务 - 因此您不能在 plpgsql 中使用 ROLLBACK 或 COMMIT 语句。您可以使用异常捕获

    ```
    BEGIN
       RAISE EXCEPTION 'blabla';
    EXCEPTION WHEN some_exception_identif_see_list_of_exception_in_doc THEN
        .. do some or do nothing
    END; 
    ```

# assembly - 如何读取 NASM 汇编程序 .lst 列表文件

> ID：16154870
> 
> 赞同：10
> 
> 时间：2013-04-22T19:12:02.243
> 
> 标签：assembly, x86, nasm, listings

我编写了一个 NASM 程序并使用`nasm -f elf -l rs.lst rs.asm`. 该程序运行良好，接受一个键输入值，并输出该值是控制键还是可打印键，以及它是数字、小写还是大写字母。

我需要帮助理解我在 .lst 文件中阅读的内容。左边的数字是地址吗？指示？它们代表记忆吗？这是`.lst`.

```
 1                                  segment .data
        //Removed my student ID info                            
     8                                      ;Program Output Strings
     9                                  
    10 00000023 5072657373204B6579-         askForKey: db 'Press Key and Enter: ', 10   ; ;10 is the newline value
    11 0000002C 20616E6420456E7465-
    12 00000035 723A200A           
    13                                      askLen: equ $-askForKey
    14                                  
    15 00000039 436F6E74726F6C204B-         controlKey: db 'Control Key ', 10
    16 00000042 6579200A           
    17                                      controlLen: equ $-controlKey
    18                                      
    19 00000046 5072696E7461626C65-         printableKey: db 'Printable Key ', 10   
    20 0000004F 204B6579200A       
    21                                      printableLen: equ $-printableKey
    22                                  
    23 00000055 446563696D616C204B-         decimalKey: db 'Decimal Key ', 10
    24 0000005E 6579200A           
    25                                      decimalLen: equ $-decimalKey
    26                                  
    27 00000062 55707065722D636173-         upperKey: db 'Upper-case Key ', 10
    28 0000006B 65204B6579200A     
    29                                      upperLen: equ $-upperKey
    30                                  
    31 00000072 4C6F7765722D636173-         lowerKey: db 'Lower-case Key ', 10
    32 0000007B 65204B6579200A     
    33                                      lowerLen: equ $-lowerKey
    34                                      
    35 00000082 0A                          blankLine: db '', 10
    36                                      blankLen: equ $-blankLine
    37                                   
    38                                  segment .bss
    39                                  
    40 00000000 <res 00000002>              key resb 2
    41                                  
    42                                  segment .text
    43                                  
    44                                      global main
    45                                  main:
    46                                  
    47                                  
    48 00000000 B804000000                  mov eax, 4      ; system call 4
    49 00000005 BB01000000                  mov ebx, 1      ; standard output 
    50 0000000A B9[00000000]                mov ecx, studentInfo    ; 'Program by Raphael Stein'
    51 0000000F BA23000000                  mov edx, infoLen
    52 00000014 CD80                        int 0x80
    53                                      
    54                                      ;Program Begins
    55                                  
    56                                      ; Ask for key input
    57 00000016 B804000000                  mov eax, 4      ; system call 4
    58 0000001B BB01000000                  mov ebx, 1      ; standard output 
    59 00000020 B9[23000000]                mov ecx, askForKey  ; 'Press key and Enter: '
    60 00000025 BA16000000                  mov edx, askLen 
    61 0000002A CD80                        int 0x80
    62                                      ; Take input
    63 0000002C B803000000                  mov eax, 3  ; system call 3 to get input
    64 00000031 BB00000000                  mov ebx, 0  ; standart input device
    65 00000036 B9[00000000]                mov ecx, key    ; pointer to id
    66 0000003B BA02000000                  mov edx, 2  ; take in this many bytes
    67 00000040 CD80                        int 0x80    
    68                                  
    69                                  
    70                                      
    71                                  control:        ; check if it's a control key
    72 00000042 B120                        mov cl, 32  ; space bar (32) is the first key after control keys
    73 00000044 BB[00000000]                mov ebx, key    ;move the first 8bits of ebx for comparison
    74 00000049 380B                        cmp byte [ebx], cl  ; compare 32 and the value of key 
    75 0000004B 7D1B                        jge printable   ; If the key is >=, it's a printable
    76 0000004D B804000000                  mov eax, 4
    77 00000052 BB01000000                  mov ebx, 1
    78 00000057 B9[39000000]                mov ecx, controlKey
    79 0000005C BA0D000000                  mov edx, controlLen
    80 00000061 CD80                        int 0x80
    81 00000063 E9A0000000                  jmp exit    ; It's obviously not any of the other categories
    82                                  
    83                                      
    84                                  printable:  ; Tell that it's a printable symbol
    85 00000068 B804000000                  mov eax, 4
    86 0000006D BB01000000                  mov ebx, 1
    87 00000072 B9[46000000]                mov ecx, printableKey
    88 00000077 BA0F000000                  mov edx, printableLen
    89 0000007C CD80                        int 0x80
    90                                  
    91                                  decimal: 
    92 0000007E B130                        mov cl, 48  ; 0 (48) is the smallest decimal
    93 00000080 BB[00000000]                mov ebx, key    ;move the first 8bits of ebx for comparison
    94 00000085 380B                        cmp byte [ebx], cl
    95 00000087 7C7F                        jl  exit
    96 00000089 B139                        mov cl, 57  ; 9 (57) is the largest decimal
    97 0000008B BB[00000000]                mov ebx, key    ;move the first 8bits of ebx for comparison
    98 00000090 380B                        cmp byte [ebx], cl
    99 00000092 7F18                        jg  uppercase   ; if key is greater, jump to check if it's                      uppercase.
   100 00000094 B804000000                  mov eax, 4
   101 00000099 BB01000000                  mov ebx, 1
   102 0000009E B9[55000000]                mov ecx, decimalKey
   103 000000A3 BA0D000000                  mov edx, decimalLen
   104 000000A8 CD80                        int 0x80
   105 000000AA EB5C                        jmp exit
   106                                  
   107                                  uppercase:
   108 000000AC B141                        mov cl, 65  ; A (65) is the smallest smallest uppercase
   109 000000AE BB[00000000]                mov ebx, key    ;move the first 8bits of ebx for comparison
   110 000000B3 380B                        cmp byte [ebx], cl
   111 000000B5 7C51                        jl  exit
   112 000000B7 B15A                        mov cl, 90  ; Z (90) is the largest upper case
   113 000000B9 BB[00000000]                mov ebx, key    ;move the first 8bits of ebx for comparison
   114 000000BE 380B                        cmp byte [ebx], cl
   115 000000C0 7F18                        jg  lowercase
   116 000000C2 B804000000                  mov eax, 4  ; If it IS an upper case key, print and then exit
   117 000000C7 BB01000000                  mov ebx, 1
   118 000000CC B9[62000000]                mov ecx, upperKey
   119 000000D1 BA10000000                  mov edx, upperLen
   120 000000D6 CD80                        int 0x80
   121 000000D8 EB2E                        jmp exit
   122                                  
   123                                          
   124                                  lowercase:
   125 000000DA B161                        mov cl, 97  ; a (97) is the smallest smallest uppercase
   126 000000DC BB[00000000]                mov ebx, key    ;move the first 8bits of ebx for comparison
   127 000000E1 380B                        cmp byte [ebx], cl
   128 000000E3 7C23                        jl  exit    ; If the key is less than 97 exit.
   129 000000E5 B17A                        mov cl, 122 ; Z (90) is the largest upper case
   130 000000E7 BB[00000000]                mov ebx, key    ;move the first 8bits of ebx for comparison
   131 000000EC 380B                        cmp byte [ebx], cl
   132 000000EE 7FEA                        jg  lowercase
   133 000000F0 B804000000                  mov eax, 4  ; If it IS an upper case key, print and then exit
   134 000000F5 BB01000000                  mov ebx, 1
   135 000000FA B9[72000000]                mov ecx, lowerKey
   136 000000FF BA10000000                  mov edx, lowerLen
   137 00000104 CD80                        int 0x80
   138 00000106 EB00                        jmp exit
   139                                      
   140                                  exit:
   141 00000108 B804000000                  mov eax, 4      ; system call 4
   142 0000010D BB01000000                  mov ebx, 1      ; standard output 
   143 00000112 B9[82000000]                mov ecx, blankLine  ; Print blank line before exiting
   144 00000117 BA01000000                  mov edx, blankLen
   145 0000011C CD80                        int 0x80
   146                                  
   147 0000011E B801000000                  mov eax, 1
   148 00000123 31DB                        xor ebx, ebx
   149 00000125 CD80                        int 0x80
   150 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-22T19:22:31.487

左边的数字是汇编程序的二进制输出，与您的源代码行相关。

第一列是源代码行

第二列是地址或偏移量。例如`00000023`是您的提示标签所在的地址`askForKey:`。

第三列是二进制值。例如，如果您查看提示文本`Press`，它会直接转换为十六进制值`5072657373`

`52 00000014 CD80 int 0x80`

读起来像这样：

源代码第 52 行，偏移量 00000014 包含二进制值 CD80，从指令 INT 0x80 编译。

您还可以看到旁边有地址的下一行是`57 00000016`，其中 16 来自之前的 14 + CD80 的 2 个字节

# ruby-on-rails - Rails Mailer：delivery_method 时更改文件：file

> ID：16154872
> 
> 赞同：2
> 
> 时间：2013-04-22T19:12:07.547
> 
> 标签：ruby-on-rails, ruby-on-rails-3, testing, actionmailer

我想要名为 Timestamp + normal_mail_name + ".eml" 的文件。

我查看了 rails 源代码、mail-gem 源代码和 letter opener-gem .. 你能否给我一个提示如何（猴子补丁）rails 邮件程序以支持我可以指定如下内容：

config.action_mailer.file_settings = { :location => Rails.root.join('tmp', 'mail'), :file_name => Time.now.to_i.to_s + "mail.eml" }

谢谢！

**更新：** 用我的本地关联电子邮件程序和launchy自动打开这些邮件也很好，就像开信刀gem一样。我会自己做，但我不明白源代码..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:46:08.907

我认为您有很多邮件内容，并且您想要调试邮件正文、文本等？我对吗？如果我是对的，我不会使用 delivery_method :file 发送邮件，我只会创建一个真实的电子邮件（例如 gmail）帐户并通过测试帐户发送邮件。

例如在您的 config/environments/development.rb 中：

```
email_settings = YAML::load(File.open("#{Rails.root.to_s}/config/mail.yml"))[Rails.env] rescue nil

if email_settings.nil?
  config.action_mailer.raise_delivery_errors = false
  config.action_mailer.perform_deliveries = false
  config.action_mailer.delivery_method = :file
else
  config.action_mailer.raise_delivery_errors = true
  config.action_mailer.perform_deliveries = true
  config.action_mailer.delivery_method = :smtp
  config.action_mailer.smtp_settings = {
    :address              => "#{email_settings["address"]}",
    :port                 => email_settings["port"],
    :authentication       => "#{email_settings["authentication"]}",
    :user_name            => "#{email_settings["user_name"]}",
    :password             => "#{email_settings["password"]}",
    :enable_starttls_auto => email_settings["enable_starttls_auto"]
  }
end 
```

还有你的 mail.yml 文件：

```
development:
  address: smtp.gmail.com
  port: 587
  authentication: login
  user_name: test@your-domain.com
  password: yourpassword
  enable_starttls_auto: true 
```

这并不是您问题的直接答案，但也许这种解决方法对您来说是一个不错的选择。您还可以根据需要以相同的方式配置其他环境。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T06:25:51.537

If you just want skip the transmission of the emails through a real mail server to view your emails locally, two good solutions I've used are:

*   [https://github.com/ryanb/letter_opener](https://github.com/ryanb/letter_opener)
*   [https://github.com/37signals/mail_view](https://github.com/37signals/mail_view)

A non-free, OSX-specific solution is to use [http://mocksmtpapp.com/](http://mocksmtpapp.com/)

If you want to have a copy of the raw email (headers and all), one way I would do it would be write an email interceptor and write the contents of the mail object to disk.

[http://railscasts.com/episodes/206-action-mailer-in-rails-3](http://railscasts.com/episodes/206-action-mailer-in-rails-3)

Something like this for `lib/development_mail_interceptor`:

```
class DevelopmentMailInterceptor
  def self.delivering_email(message)
    message.perform_deliveries = false
    File.open("#{Time.now.to_i}-email.eml", "w") { |f| f.write(message.to_s) }
  end
end 
```

and in config/initializers/setup_mail.rb

`Mail.register_interceptor(DevelopmentMailInterceptor) if Rails.env.development?`

# c# - 我在属性设置器中进入无限循环

> ID：16154873
> 
> 赞同：9
> 
> 时间：2013-04-22T19:12:08.663
> 
> 标签：c#, asp.net, properties, setter

```
public int Position
{
    get
    {
        if (Session["Position"] != null)
        {
            Position = Convert.ToInt32(Session["Position"]);
        }
        else
        {
            Position = 5;
        }
        return Position;
    }
    set
    {
        Position = value;
    }
} 
```

我的程序调用 get 并进入 if 循环，然后无限运行到 set 代码

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-22T19:13:40.217

该错误是因为在您的程序中`set {}`您正在递归地调用相同的设置器。

正确的代码是

```
private int _position;
public int Position
{
    get
    {
        if (Session["Position"] != null)
        {
            this._position = Convert.ToInt32(Session["Position"]);
        }
        else
        {
            this._position = 5;
        }
        return this._position;
    }
    set
    {
        this._position = value;
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-22T19:13:44.797

使用成员变量或将其存储在会话中。

```
private int _position;
public int Position
{
    get
    {
        if (Session["Position"] != null)
        {
            _position= Convert.ToInt32(Session["Position"]);
        }
        else
        {
            _position= 5;
        }
        return _position;
    }
    set
    {
        _position = value;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T20:01:51.857

会话状态项没有什么特别像字符串的。

你为什么不遵循 KISS 原则并做类似的事情

```
public int Position
{
  get { return (int) ( Session["Position"] ?? 5 ) ; }
  set { Session["Position"] = value ;               }
} 
```

或（取决于您的实际要求/规格：

```
public int Position
{
  get { return Session["Pointer"] as int? ?? position ?? 5 ; }
  set { position = value ; }
}
private int? position ; // backing store 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T22:00:32.913

自动实现的属性属性由 getter、setter 和支持字段组成。如果您自己编写代码，则可能不需要字段。

你的getter调用setter，setter调用setter；那将是无限递归。您可能需要一个字段来存储`Position`.

但是，如果我们将其更改为存储到一个字段，并且 setter 实际上不起作用。因此，代码可以更改为：

```
public int Position {
    set {
    }

    get {
        int x;
        return (x=Convert.ToInt32(Session["Position"]))>0?x:5;
    }
} 
```

您不需要检查 null，`Convert.ToInt32(null)`为零。

# ruby-on-rails - Rails config.static_cache_control 如何从缓存中排除文件

> ID：16154877
> 
> 赞同：5
> 
> 时间：2013-04-22T19:12:15.550
> 
> 标签：ruby-on-rails, caching, asset-pipeline

我正在为我的所有资产设置长期过期标题。但是，在我的公共目录中有一些静态 HTML 文件（用于 Jekyll 博客），它们正在被缓存，并且在更新时没有缓存失效。实际上，它似乎只是我`index.html`位于 中的主文件，`app/public/blog`它一直被缓存在缓存中。

是否像更改配置中的“公共”一样简单？

`config.static_cache_control = "public, max-age=604800"`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-10-06T10:27:50.333

我知道这是一个老问题，但我一直在寻找它，当我查找时（我一直在查找），所以这是答案：

不，public in`config.static_cache_control`不是指 rails public/ 目录。

事实上，这整个字符串是`Cache-Control`在提供静态资产时用作标头的文字（包括 assets/ 中的 public/ 和 sprockets 编译的资产）。

[有关如何在 rails 和http://www.w3.org/Protocols](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9)中使用 config.static_cache_control 的详细信息，请参见[http://guides.rubyonrails.org/asset_pipeline.html#cdns-and-the-cache-control-header](http://guides.rubyonrails.org/asset_pipeline.html#cdns-and-the-cache-control-header) [/rfc2616/rfc2616-sec14.html#sec14.9](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9)用于关于 Cache-Control 标头含义的 w3c 文档。

# javascript - 将 addClass （随机首选）应用于最多 2 个具有相同类的 div，而不是应用于所有具有相同类的 div

> ID：16154878
> 
> 赞同：0
> 
> 时间：2013-04-22T19:12:17.250
> 
> 标签：javascript, jquery, html, random, addclass

我有以下功能：

```
$(".schedule").each(function () {
    var cls = this.className.match(/schedule-\d+/);
    if (cls.length === 0) return;

    var els = $(".schedule." + cls); 
    if (els.not(this).length > 0) {
        els.addClass("someClass");        
    }
}); 
```

它将类 ( `.someClass`) 添加到具有相同类的 div 中，将 div 变为红色。正如在[这个小提琴](http://jsfiddle.net/mauricederegt/qz5WB/)中看到的，它有效。我想将这个`someClass`类随机添加到同一个类的最多 2 个 div 中。

示例（ps：div类的顺序是随机生成的，不限于A、B、C、D。这个顺序和fiddle中的类名只是一个例子）：

我们有 A、B、C、A、C、D、A。

我希望随机 2 个具有相同类的 div 变为红色，所以：

1.  A 和（第二个）A 是红色的或
2.  A 和（第三个）A 是红色的或
3.  （第二个）A 和（第三个）A 是红色的 OR
4.  C和C是红色的

如果这很复杂，我也会满足于第一个找到的匹配项。所以：

1.  A和（第二个）A是红色的

希望有人能帮忙，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:15:35.433

*可以使用以下方法选择 A 和（第二个）A：*

```
$('.a:eq(0), .a:eq(1)').addClass('someClass'); 
```

*A 和（第三个）A 将是：*

```
$('.a:eq(0), .a:eq(2)').addClass('someClass'); 
```

同样，您也可以获得其他组合。这是假设组合的总数是您在问题中指定的。

* * *

好的，要选择给定类的 2 个随机元素进行操作，您可以执行以下操作：

```
// total number of elements with class (.A, .B, .C etc.)
var n = $('.yourClass').length;

// get 2 indices randomly
var ids = [];
while(ids.length < 2) {
   var r = Math.floor(Math.random() * n);
   if(ids.indexOf(r) == -1) {
      ids.push(r);
   }
}

// select the 2 elements picked randomly
var sel = $('.yourClass:eq('+ids[0]+'), .yourClass:eq('+ids[1]+')');

// apply the class
sel.addClass('someClass'); 
```

# .net - 我需要下载企业开发参考架构

> ID：16154880
> 
> 赞同：0
> 
> 时间：2013-04-22T19:12:25.270
> 
> 标签：.net, architecture, soa, architectural-patterns

我想获得作为模式和实践一部分的资产：企业开发参考架构：发布：主页

该版本曾经在 GotDot.net - [http://www.gotdotnet.com/workspaces/releases/viewuploads.aspx?id=9c29a963-594e-4e7a-9c45-576198df8058](http://www.gotdotnet.com/workspaces/releases/viewuploads.aspx?id=9c29a963-594e-4e7a-9c45-576198df8058)

[我在http://weblogs.asp.net/hernandl/](http://weblogs.asp.net/hernandl/)网站上没有找到任何资源。

Microsoft 有一个关于此主题的 KB：http: [//support.microsoft.com/kb/872836](http://support.microsoft.com/kb/872836)，但大多数链接无处可寻。

Retired patterns & Practices 下载似乎也没有，但也许我错过了它。 [http://msdn.microsoft.com/en-us/library/ff921344.aspx](http://msdn.microsoft.com/en-us/library/ff921344.aspx)

我有点假设它被称为 Web 服务软件工厂，可以在此处下载：[http](http://servicefactory.codeplex.com/releases/view/9600) ://servicefactory.codeplex.com/releases/view/9600 ，因为该版本称为 Web 服务软件工厂 v2（已弃用），但是肯定会对此进行一些验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-21T18:03:23.937

您还需要 EDRA（也称为 ShadowFax）的资产吗？我拥有当时可用于框架的大部分（如果不是全部）下载（大约在 2005 年 - 使用 .NET 1.1），包括源代码和文档。我们基于该框架构建了企业应用程序集成 (EAI) 解决方案，并将消息传递请求/响应端点扩展为包括 IBM MQ 和可配置的数据库存储过程适配器（Oracle 或 SQL Server）。我将在接下来的两周左右监控这篇文章，看看你是否回复。

# java - 有没有办法在不使用 TimePickerDialog 的情况下获取 TimePicker 的时间？

> ID：16154881
> 
> 赞同：0
> 
> 时间：2013-04-22T19:12:29.770
> 
> 标签：java, android, time, timepicker

我想知道是否有一种方法可以在不使用对话框的情况下获取用户在屏幕上的 TimePicker 中设置的时间。当我可以在屏幕上显示 TimePicker 时，我没有看到创建一个会弹出 TimePickerDialog 的按钮的意义。即在本教程和许多其他类似的 TimePicker 教程中可以看到，拥有两个 TimePicker 是没有意义的：[http ://www.mkyong.com/android/android-time-picker-example/](http://www.mkyong.com/android/android-time-picker-example/)

我正在使用 picker.getCurrentHour() 和 picker.getCurrentMinute() 但它只是在我按下按钮后返回系统的当前时间。有没有办法得到用户输入的时间？

这是我在单击按钮后检索时间的方式：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_set_time);
    picker = new TimePicker(SetTimeActivity.this);
    Button save=(Button)findViewById(R.id.saveAlarmButton); 
    save.setOnClickListener(onSave);                
}

private View.OnClickListener onSave=new View.OnClickListener()
{
    public void onClick(View v)
    {
        hour=picker.getCurrentHour();
        min=picker.getCurrentMinute();

        System.out.println(hour + " : " + min);         
    }
};

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".SetTimeActivity" >

<Button
    android:id="@+id/saveAlarmButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/timePicker"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="28dp"
    android:text="Save" />

<TimePicker
    android:id="@+id/timePicker"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textView1"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="32dp" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="26dp"
    android:text="Set time for alarm"
    android:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout> 
```

但它只是给了我当前的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:49:06.530

您的代码应该可以正常工作。当您尝试通过数字输入输入日期时，可能会出现问题。这是由于`NumberPicker`更新，完成了选择器失去焦点。因此，您可以尝试确保选择器失去焦点，因此它将消耗当前用户输入：

```
picker.clearFocus();
hour=picker.getCurrentHour();
min=picker.getCurrentMinute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:36:23.517

[选择器类](http://developer.android.com/guide/topics/ui/controls/pickers.html)的定义是它打开一个对话框来选择一些东西：

> Android 提供控件供用户选择时间或选择日期作为即用型对话框。

当然，您可以随时尝试其他为您提供自定义选择器并获取其布局的解决方案，例如[this one](http://code.google.com/p/datetimepicker/)、[here](https://github.com/SimonVT/android-timepicker)、[here](https://github.com/SimonVT/android-datepicker)和[here](https://github.com/SimonVT/android-numberpicker)。

这样，您可以将选择器的布局放置在您希望的任何位置，而无需任何对话框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T19:43:35.230

您可以像任何其他小部件一样将小部件添加到活动中。您可以像这样获取日期/时间：

```
 // Format date and time from pickers
    Calendar calendar = Calendar.getInstance();
    calendar.set(Calendar.YEAR, datePicker.getYear());
    calendar.set(Calendar.MONTH, datePicker.getMonth());
    calendar.set(Calendar.DAY_OF_MONTH, datePicker.getDayOfMonth());
    calendar.set(Calendar.HOUR_OF_DAY, timePicker.getCurrentHour());
    calendar.set(Calendar.MINUTE, timePicker.getCurrentMinute());
    calendar.set(Calendar.SECOND, 0);
    calendar.set(Calendar.MILLISECOND, 0); 
```

# ruby - Ruby，黄瓜，在一个步骤中调用一个步骤，在一个 if 语句中

> ID：16154886
> 
> 赞同：0
> 
> 时间：2013-04-22T19:12:37.137
> 
> 标签：ruby, cucumber

在使 Gherkin 更具可读性的过程中，我试图在一个步骤中调用一个步骤。

```
Given /^I am a user with a case with (.*) properties with X enabled$/ do |number|
  if number == 2
    step "I login as a, 1, 2 user with X num_of_properties_2"
    puts "prop2"
  elsif number == 1
    step "I login as a, 1, 2 user with X num_of_properties_1"
    puts "prop1"
  end
end 
```

这些都行不通，但是如果我只这样做

```
 Given /^I am a user with a case with (.*) properties with X enabled$/ do |number|
     step "I login as a, 1, 2 user with X num_of_properties_2"
 end 
```

这完美地工作。

为什么我不能在“if”语句中调用另一个步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T00:01:09.293

使用 (\d+) 而不是 (.*) 捕获数字。

# html - 自动填充，所有浏览器中的自动完成功能在fancybox中的表单中

> ID：16154888
> 
> 赞同：0
> 
> 时间：2013-04-22T19:12:47.673
> 
> 标签：html, forms, autofill

您好我有以下问题。我正在一个 div 中构建一个表单，该表单最初是 display:none; 在该表单中，我有两个字段-电子邮件和密码，如下所示：

```
<form id="formino" name="blah" action="" autocomplete="on"><input type="text" name="emal" id="maila" autocomplete="on"> .................. </form> .... 
```

因此，无论我做什么，集成在浏览器中的自动完成（自动填充）都不起作用。文档类型为 html5。html是完美构建的。它以前从未工作过。浏览器经过数千次检查，并具有最佳设置，所有隐私内容都正确完成（IE、FF、Chrome）。

请不要建议“我们需要更多信息等”。假设代码一切正常。再次：Fancybox，div - 显示：无；表单，输入，AJAX 按钮点击后，在 submit() 上绑定，返回 false；

谢谢

# php - PHP - SSL 套接字客户端证书

> ID：16154898
> 
> 赞同：5
> 
> 时间：2013-04-22T19:13:15.110
> 
> 标签：php, sockets, ssl, certificate, client-side

我目前正在使用 tcp 套接字在 PHP 中使用套接字流在服务器和客户端之间交换数据。我希望每个客户端都有一个唯一的证书（我将为他们生成）来访问我的服务器，这样只有我认识的人才能使用它。我已经搜索并发现仅如何在服务器端使用证书，这将使我能够建立 SSL 套接字连接，但我真正需要的是使用客户端服务器证书来识别连接到我的服务器的客户端。这可能使用 PHP 吗？

我想象客户端是这样连接的：

```
$clientCert = './clientCert.pem';
$streamContext = stream_context_create();
stream_context_set_option($streamContext, 'ssl', 'local_cert', $clientCert);
$server = stream_socket_client('ssl://IP', $error, $errorString, 2, STREAM_CLIENT_CONNECT, $streamContext); 
```

但是服务器如何处理（识别等）这个客户端证书？

希望我的问题很清楚。

提前致谢， 拉斐尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:28:30.630

您应该使用`stream_context_set_option`to 设置[`verify_peer`](http://www.php.net/manual/en/context.ssl.php)为`true`; 这将要求对方验证客户端的证书是否可信。`cafile`验证是通过检查证书是否由受信任的权威机构签署来完成的，因此您需要通过or`capath`选项指定可以在何处找到权威机构的公钥。

请注意，以上内容在服务器端（允许您对客户端进行身份验证）*和*客户端都适用——除非您明确指定，否则服务器也不会经过身份验证。

# ms-access - 如何在同一表单的文本框中显示列表框中一列的最大值

> ID：16154900
> 
> 赞同：0
> 
> 时间：2013-04-22T19:13:24.147
> 
> 标签：ms-access, listbox, controls

如何从列表框中的列中选择最大值，并将该值显示在同一表单的文本框中？列表框本身由依赖于用户输入的查询填充，因此它的值事先是未知的。

我可以按值对列表框进行排序并选择第一个值，但它已经在另一列上按日期排序，用于不同的目的。我想知道的是最大值出现在第 2 列中的日期。

下一步是将在该日期之前出现的第 4 列中的所有值显示为空白或 N/A。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T21:28:55.537

您可能会发现以下 VBA 代码很有帮助。它扫描`.Column`数据中的值以查找名为 的列表框`List0`，例如...

```
2013-04-18 | 123
2013-04-17 | 77
2013-04-16 | 345
2013-04-15 | 34 
```

...找到与列表框第二列中最大值对应的日期（第一列），并将该日期放入名为 的文本框中`Text3`。请注意，该`CompareNumeric`标志控制比较是基于字符串（“77”获胜）还是基于数字（345 获胜）。

```
Private Sub Command2_Click()
Const DateCol = 0  '' column numbers start with 0
Const MaxCol = 1  '' second column has column index of 1
Const CompareNumeric = True  '' convert strings to numbers for finding maximum

Dim RowIdx As Long, MaxItem As Variant, MaxIdx As Long, CurrItem As Variant, NewMaxFound As Boolean

MaxIdx = -1
MaxItem = Null
For RowIdx = 0 To Me.List0.ListCount - 1
    CurrItem = Me.List0.Column(MaxCol, RowIdx)
    If CompareNumeric Then
        CurrItem = Val(CurrItem)
    End If

    If IsNull(MaxItem) Then
        NewMaxFound = True  '' first one
    Else
        NewMaxFound = (CurrItem > MaxItem)
    End If
    If NewMaxFound Then
        MaxItem = CurrItem
        MaxIdx = RowIdx
    End If
Next
If MaxIdx >= 0 Then
    Me.Text3.Value = Me.List0.Column(DateCol, MaxIdx)
End If
End Sub 
```

# api - restful api 身份验证与 oauth2 混淆

> ID：16154901
> 
> 赞同：24
> 
> 时间：2013-04-22T19:13:25.040
> 
> 标签：api, rest, authentication, oauth, oauth-2.0

我对restful api身份验证做了一些调查。大多数人指出 Oauth2 是为了进行 restful api 身份验证。我查看了一些资源，尤其是这个链接[https://developers.google.com/accounts/docs/OAuth2](https://developers.google.com/accounts/docs/OAuth2)。

在我看来，Oauth2 是供第三方应用程序访问用户在 google/facebook（或其他数据提供商）中的数据。

我们的问题是我们拥有数据，我们不需要访问客户的任何第三方数据，我们的客户也不需要任何第三方数据。我们想通过某种身份验证来保护我们的 api。

对于我们的案例，我们的 restful api 身份验证的便捷技术是什么？我们将像这样公开我们的 api

```
 https://ourdomain.com/api/<endpoint> 
```

我们的客户可以先访问一个网站注册[https://ourdomain.com](https://ourdomain.com)，他们应该能够从我们的网站获取clientId和clientKey来访问api。我们的客户应该能够通过某种身份验证来消费

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-10-06T18:37:40.403

在 oAuth 2.0 中，有多种授权类型。授权类型只是将某种凭证交换为访问令牌的一种方式。通常，oAuth 是指带有授权代码授予的第 3 方使用。这意味着将用户重定向到资源所有者的网站进行身份验证，这将返回一个授权码。

这对于第一方 oAuth 的使用显然没有意义，因为您是资源所有者。oAuth 2.0 已考虑到这一点，并为此目的包括了资源所有者密码凭证授予。在这种情况下，您可以在第一方级别交换用户名和密码以获取访问令牌。

有关详细信息，请参阅[https://www.rfc-editor.org/rfc/rfc6749#section-4.3 。](https://www.rfc-editor.org/rfc/rfc6749#section-4.3)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-23T10:32:57.323

如果我理解正确的话，你需要它类似于 OAuth 的方式是你做完全相同的事情减去授予 3rd 方应用程序访问用户资源的权限。

在 OAuth 中，有一个中央系统通过检查应用程序的凭据 + 用户的凭据并发出授权令牌来管理身份验证和授权。有多个端点将接受这些授权令牌。

令牌基本上是加密字符串，其中包含有关用户凭据的信息以及您的应用程序可能需要的一些其他信息。

您需要（我相信）是一个类似的身份验证端点，客户端使用其凭据点击并获取令牌。

因此，
i) 创建一个注册表单/控制台，客户可以在其中注册并获取他的凭据。看看[这个](https://code.google.com/apis/console/)。
ii) 定义一个 HTTP 端点，用户在其中交换他的凭据以获取访问令牌 + 刷新令牌。
iii) 客户端可以使用访问令牌访问资源端点，以对您的任何端点进行经过身份验证的调用。
iv) 在后端，您需要一个通用服务来验证令牌并从中提取信息。

PS - 这只是一个最小的系统，会有很多安全考虑，比如如果一些未经授权的应用程序可以访问某些客户端的访问令牌。
你可以找到很多关于 CSRF 攻击、noonces、时间戳和其他缓解安全问题的方法的信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-01-25T16:59:38.280

只是为了清楚原来的问题：

**OAuth2 至少需要一个客户端和一个服务器**

OP 想知道如何保护 REST API，以及为什么每个人都在谈论第三方身份验证提供程序（Google、Facebook 等）

这里有两个不同的需求：

1 - 能够保护个人 API (ourdomain.com)

```
Client             Server
Consumers  <---->  Your API 
```

2 - 能够使用公共 API（例如获取用户的 Google 联系人列表）

```
Client             Server
You        <---->  Google APIs 
```

OP 实际上需要第一个：在自己的 API 前面实现一个 OAuth2 服务器。
Github 上有[许多适用于所有语言/框架的现有实现](https://github.com/search?utf8=%E2%9C%93&q=oauth2+server&type=Repositories&ref=searchresults)

最后，这是[一个很好的 Oauth2 技术解释](https://developers.google.com/identity/protocols/OAuth2)，我在这里无耻地采用它的一种模式：

[![谷歌 OAuth2 架构](https://i.stack.imgur.com/tftQH.png)](https://i.stack.imgur.com/tftQH.png)

不，我不在 Google 工作，我只是将 Google 作为一个公共 API 供应商的例子。

# ruby-on-rails - Rails Factory Girl“创建”不保存记录？

> ID：16154903
> 
> 赞同：2
> 
> 时间：2013-04-22T19:13:28.973
> 
> 标签：ruby-on-rails, capybara, factory-bot

我有两个 capybara 测试正在测试我的 rails 应用程序上的注册过程，都使用 factory girl。一种是使用 Factory Girl build 命令并将其保存为以下形式：

```
 it 'should create a user and associated customer_info', js: true do
    visit signup_path
    user = build(:user)
    customer = build(:customer_info)

    sign_up user, customer
    page.should have_content 'Welcome back, ' + customer.firstname
  end 
```

而另一个正在使用 create 命令，然后尝试使用该信息登录。

```
 it 'should be able to sign in', js: true do
    user = create(:user)
    customer = create(:customer_info, user_id: user.id)

    visit new_user_session_path
    fill_in 'user_email', with: user.email
    fill_in 'user_password', with: user.password
    click_button 'Sign in'
    page.should have_content 'Welcome back, ' + customer.firstname
  end 
```

第一个通过并保存在我的测试数据库中。第二个失败，说“无效的电子邮件或密码”，但是当我在每次测试后检查我的数据库时，第一个保存记录但第二个没有（我假设这就是为什么它说无效的电子邮件/密码）。

为什么我的 FactoryGirl 创建函数实际上没有将我的记录保存在数据库中的任何想法？

**编辑**

我的 FactoryGirl 电子邮件定义中有一个序列，并且构建和创建都增加了序列，所以它不应该创建重复，对吗？

```
FactoryGirl.define do 
  factory :user do
    sequence(:email) { |n| "foo#{n}@example.com"}
    password "secret"
    password_confirmation "secret"
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:30:34.583

问题是您正在尝试创建重复用户。注册会在测试数据库中创建用户，现在当您尝试使用 FactoryGirl 创建新用户时，它会引发验证错误，因为同一用户已经存在于测试数据库中。你应该这样做：

```
def create_user
  @user ||= create(:user)
end

it 'should create a user and associated customer_info', js: true do
    visit signup_path
    @user = build(:user)
    customer = build(:customer_info)

    sign_up @user, customer
    page.should have_content 'Welcome, ' + customer.firstname
end

it 'should be able to sign in', js: true do
    create_user
    customer = create(:customer_info, user_id: @user.id)

    visit new_user_session_path
    fill_in 'user_email', with: @user.email
    fill_in 'user_password', with: @user.password
    click_button 'Sign in'
    page.should have_content 'Welcome back, ' + customer.firstname
end 
```

也许您可以使用不同的方法来解决它。但主要关注的是使用单个用户对象进行注册和登录。希望这会对您有所帮助。

# bash - sed 是否有一个选项仅用于检查文件中是否存在字符串？

> ID：16154911
> 
> 赞同：3
> 
> 时间：2013-04-22T19:13:42.493
> 
> 标签：bash, sed

sed 是否有类似于 的选项`grep -q`，它返回 1 或 0 取决于它是否实际找到字符串匹配？

我问的原因是在某些情况下我`sed`以特定方式使用，例如在给定行号之后查找第一个匹配项，或者设置捕获组并以这种方式获取字符串，所以我想看看是否`sed`有内置的东西可以检查如果返回任何内容，因为我想向用户抛出错误并在找不到匹配项时退出我的 bash 脚本

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T19:42:06.413

你最好使用`grep -q`这个，但如果你绝对想使用`sed`那么这里是你如何复制功能......

```
cat myFile | sed -n "/myString/p" | wc -l 
```

这将输出文件中“myString”的出现次数。从这里你可以做一个简单的测试，看看这个数字是否大于 0，如果是，则返回 1，如果不是，则返回 0。这是一个演示如何完成此操作的脚本......

```
#!/bin/bash
count=$(cat myFile | sed -n "/\myString/p" | wc -l)
final=0
if [ count -gt 0 ]; then
    final=1
else
    final=count
fi
echo final 
```

上面的脚本将打印出 1 或 0，如果找到字符串，则打印 1，如果没有，则打印 0（注意：我没有检查过这个，但没有理由不工作）。

同样，`grep -q`这是工作的工具，如果可能的话，我建议使用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T19:37:50.783

`q`您可以使用in 中的命令设置退出代码`sed`。

> q [退出代码]
> 
> 立即退出 sed 脚本，不再处理任何输入，除非自动打印未禁用，当前模式空间将被打印。退出代码参数是 GNU 扩展。

另请参阅此[答案以获取线索](https://stackoverflow.com/a/12145797/195488)。

编辑：

正如@cbuckley 友情链接的那样，您可以在[此处](https://stackoverflow.com/q/15965073)找到路线。

# c++ - 链接器错误：在 C++ 中未定义对 class::'methods' 的引用

> ID：16154919
> 
> 赞同：1
> 
> 时间：2013-04-22T19:13:58.320
> 
> 标签：c++

编译以下源代码时遇到 **问题::ShowResult()'**有人可以帮我吗？

头文件（dish.h）：

```
#ifndef DISH_H
#define DISH_H

class dish {
  public:
    dish();
    dish(std::string name, std::string variety, float caloric, float price);
    ~dish();
    static int GetN();
    void SetN(int N);
    static int IncrementN();
    std::string GetName() const;
    void SetName(std::string name);
    std::string GetVariety() const;
    void SetVariety(std::string variety);
    float GetCaloric() const;
    void SetCaloric(float caloric);
    float GetPrice() const;
    void SetPrice(float price);
    void Enter();
    void ShowResult();

  private:
    std::string name;
    std::string variety;
    float caloric;
    float price;
    static int N;

};

int dish::N;

#endif 
```

和dish.cpp：

```
#include <iostream>
#include  <cstring>
#include "dish.h"

dish::dish()
{ 
    dish::Enter();
}

dish::dish(std::string name, std::string variety, float caloric, float price)
{
    this->name = name;
    this->variety = variety;
    this->caloric = caloric;
    this->price = price;
}

dish::~dish() 
{             
}

static int dish::GetN()
{ 
    return N; 
}

void dish::SetN(int N)
{ 
     this->N = N; 
}

static int dish::IncrementN() 
{ 
    N++; 
}

std::string dish::GetName() const 
{ 
    return name; 
}

void dish::SetName(std::string name) 
{ 
    dish::name = name; 

}

std::string dish::GetVariety() const 
{ 
    return variety;
}

void dish::SetVariety(std::string variety) 
{ 
    dish::variety = variety; 
}

float dish::GetCaloric() const 
{ 
    return caloric; 
}

void dish::SetCaloric(float caloric) 
{ 
    this->caloric = caloric; 
}

float dish::GetPrice() const 
{ 
    return price; 
}

void dish::SetPrice(float price) 
{ 
    this->price = price; 
}

void dish::Enter()
{
    std::cout << "\n \\*_________________________________*\\\n"; 
    std::cout << "\n   ENTER THE NAME OF DISH: ";
    getline(std::cin, name);
    std::cout << "   ENTER THE VARIETY: ";
    getline(std::cin, variety);
    std::cout << "   ENTER THE CALORIC CONTENT: ";
    (std::cin >> caloric).get();
    std::cout << "   ENTER THE PRICE: ";
    (std::cin >> price).get();
    std::cout << "\n \\*_________________________________*\\\n"; 
    dish::IncrementN();
}   

void dish::ShowResult() 
{
    std::cout << "\n \\*________________________*\\\n"; 
    std::cout << "\n   THE NAME OF DISH: " << dish::GetName() << std::endl;
    std::cout << "   THE VARIETY: " << dish::GetVariety() << std::endl;
    std::cout << "   THE CALORIC CONTENT: " << dish::GetCaloric() << std::endl;
    std::cout << "   THE PRICE: " << dish::GetPrice() << std::endl;
    std::cout << "\n \\*________________________*\\\n";    
} 
```

主要实现...

```
#include <cstring>
using namespace std; 
#include "dish.h"

int main() {
    dish a;
    a.ShowResult();
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:17:47.453

您应该将dish.cpp 与您的主要可执行文件链接，即在您的项目中添加dish.cpp。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:11:04.753

这是一个语法错误，会在 disc.cpp 上产生编译错误。链接错误只是其结果。

`static`从 disc.cpp 中删除关键字。

请记住，唯一有趣的错误几乎总是第一个错误。

说明：为了做类方法，`static`只写在头文件中，不写在 .cpp 中。

有关信息，但这显然不是您想要做的：`static`在 .cpp 中可用于使函数在编译单元之外不可见，但实际上是从 C 继承的不推荐使用的构造。您应该更喜欢匿名命名空间。

# html - CSS - 定位 div 的最后一个实例

> ID：16154920
> 
> 赞同：2
> 
> 时间：2013-04-22T19:13:58.537
> 
> 标签：html, css, css-selectors

我有一个如下的 div 结构，我只想定位页面上的最后一个 .pcontain ，这样我就可以删除右边界 - 我该怎么做？

```
<div class="container">
    <div class="postcontainer">
        <div class="latest-posts">
            <div class="thumbnail"></div>
            <div class="pcontain"></div>
            <div class="more"></div>
        </div>
    </div>
    <div class="postcontainer">
        <div class="latest-posts">
            <div class="thumbnail"></div>
            <div class="pcontain"></div>
            <div class="more"></div>
        </div>
    </div>
    <div class="postcontainer">
        <div class="latest-posts">
            <div class="thumbnail"></div>
            <div class="pcontain"></div>
            <div class="more"></div>
        </div>
    </div>
    <div class="postcontainer">
        <div class="latest-posts">
            <div class="thumbnail"></div>
            <div class="pcontain"></div>
            <div class="more"></div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T19:15:26.750

# [工作小提琴](http://jsfiddle.net/55gFC/9/)

利用`last child`

```
.postcontainer:last-child .pcontain{ 
    background: black;
    color: white;
} 
```

[在此处阅读有关最后一个孩子的更多信息](https://developer.mozilla.org/en-US/docs/CSS/:last-child)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T19:16:42.250

您可以使用[`last-child`](http://www.w3.org/wiki/CSS/Selectors/pseudo-classes/%3alast-child)伪类，如：

```
.postcontainer:last-child .pcontain {
color: darkolive;
} 
```

[http://jsfiddle.net/ZZMZn/10/](http://jsfiddle.net/ZZMZn/10/)

# windows - 如何使用特定的图形驱动程序创建 OpenGL 上下文？

> ID：16154921
> 
> 赞同：7
> 
> 时间：2013-04-22T19:13:59.567
> 
> 标签：windows, winapi, opengl

一些计算机安装了多个图形卡/芯片组，即使（例如笔记本电脑）它们没有多个显示器。

我在使用同时具有 Intel 和 Nvidia 图形硬件的笔记本电脑系统时遇到问题。众所周知，英特尔的驱动程序在 OpenGL 支持方面很糟糕，而且我的代码遇到了一个莫名其妙的渲染错误，因为在创建渲染上下文时，它似乎默认为英特尔系统，而不是 Nvidia 系统。

有没有办法在启动时避免这种情况？要说“轮询所有可用的图形驱动程序，尽可能避免使用 Intel 驱动程序，并使用可以工作的驱动程序为我构建一个 OpenGL 渲染上下文”之类的话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-10T06:00:37.260

没有可移植的方式来完成您的要求，但本文档描述了如何在具有 NVIDIA Optimus 技术的系统上强制“高性能图形渲染”：

```
http://developer.download.nvidia.com/devzone/devcenter/gamegraphics/files/OptimusRenderingPolicies.pdf 
```

具体来说，请参阅“全局变量 NvOptimusEnablement（驱动程序版本 302 中的新功能）”部分，其中说：

> 从 Release 302 驱动程序开始，应用程序开发人员可以在运行时指示 Optimus 驱动程序使用高性能图形来渲染任何应用程序——即使是那些没有现有应用程序配置文件的应用程序。他们可以通过导出一个名为 NvOptimusEnablement 的全局变量来做到这一点。Optimus 驱动程序查找导出的存在和值。此时只有 DWORD 的 LSB 很重要。值 0x00000001 表示应使用高性能图形执行渲染。值 0x00000000 表示应忽略此方法。

示例用法：

```
extern "C" {
    _declspec(dllexport) DWORD NvOptimusEnablement = 0x00000001;
} 
```

另一种可能性是 WGL_nv_gpu_affinity 扩展，但您的 WGL 上下文需要支持它，我不确定它是否适用于混合 Intel/NVIDIA 系统：

```
http://developer.download.nvidia.com/opengl/specs/WGL_nv_gpu_affinity.txt 
```

# spring - junit 每行执行两次

> ID：16154926
> 
> 赞同：1
> 
> 时间：2013-04-22T19:14:23.277
> 
> 标签：spring, tomcat, junit

在我的项目上运行 Junt 测试，每个代码行执行两次，如下面的堆栈跟踪：

```
 TransactionAspectSupport - Getting transaction for [it.stasbranger.spidly.service.PostsServiceImpl.findPostsByPrimaryKey]
22 apr 2013 21:10:39 TRACE [main] TransactionAspectSupport - Getting transaction for [it.stasbranger.spidly.service.PostsServiceImpl.findPostsByPrimaryKey]
22 apr 2013 21:10:39 DEBUG [main] AbstractPlatformTransactionManager - Participating in existing transaction
22 apr 2013 21:10:39 DEBUG [main] AbstractPlatformTransactionManager - Participating in existing transaction
22 apr 2013 21:10:39 TRACE [main] TransactionAspectSupport - Getting transaction for [it.stasbranger.spidly.dao.PostsDAOImpl.findPostsByPrimaryKey]
22 apr 2013 21:10:39 TRACE [main] TransactionAspectSupport - Getting transaction for [it.stasbranger.spidly.dao.PostsDAOImpl.findPostsByPrimaryKey]
22 apr 2013 21:10:39 TRACE [main] TransactionSynchronizationManager - Retrieved value [org.springframework.orm.jpa.EntityManagerHolder@1a6c891] for key [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean@b9b8d9] bound to thread [main]
22 apr 2013 21:10:39 TRACE [main] TransactionSynchronizationManager - Retrieved value [org.springframework.orm.jpa.EntityManagerHolder@1a6c891] for key [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean@b9b8d9] bound to thread [main]
22 apr 2013 21:10:39 TRACE [main] TransactionSynchronizationManager - Retrieved value [org.springframework.orm.jpa.EntityManagerHolder@1a6c891] for key [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean@b9b8d9] bound to thread [main]
22 apr 2013 21:10:39 TRACE [main] TransactionSynchronizationManager - Retrieved value [org.springframework.orm.jpa.EntityManagerHolder@1a6c891] for key [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean@b9b8d9] bound to thread [main]
22 apr 2013 21:10:39 TRACE [main] TransactionAspectSupport - Completing transaction for [it.stasbranger.spidly.dao.PostsDAOImpl.findPostsByPrimaryKey]
22 apr 2013 21:10:39 TRACE [main] TransactionAspectSupport - Completing transaction for [it.stasbranger.spidly.dao.PostsDAOImpl.findPostsByPrimaryKey]
22 apr 2013 21:10:39 TRACE [main] TransactionAspectSupport - Completing transaction for [it.stasbranger.spidly.service.PostsServiceImpl.findPostsByPrimaryKey]
22 apr 2013 21:10:39 TRACE [main] TransactionAspectSupport - Completing transaction for [it.stasbranger.spidly.service.PostsServiceImpl.findPostsByPrimaryKey]
22 apr 2013 21:11:31 TRACE [main] TransactionAspectSupport - Completing transaction for [it.stasbranger.spidly.social.FacebookServiceImpl.storePostsFromPages]
22 apr 2013 21:11:31 TRACE [main] TransactionAspectSupport - Completing transaction for [it.stasbranger.spidly.social.FacebookServiceImpl.storePostsFromPages]
22 apr 2013 21:11:31 DEBUG [main] AbstractPlatformTransactionManager - Participating in existing transaction
22 apr 2013 21:11:31 DEBUG [main] AbstractPlatformTransactionManager - Participating in existing transaction
22 apr 2013 21:11:31 TRACE [main] TransactionAspectSupport - Getting transaction for [it.stasbranger.spidly.social.FacebookServiceImpl.storePostsFromPages]
22 apr 2013 21:11:31 TRACE [main] TransactionAspectSupport - Getting transaction for [it.stasbranger.spidly.social.FacebookServiceImpl.storePostsFromPages]
22 apr 2013 21:11:31 DEBUG [main] AbstractPlatformTransactionManager - Participating in existing transaction
22 apr 2013 21:11:31 DEBUG [main] AbstractPlatformTransactionManager - Participating in existing transaction
22 apr 2013 21:11:31 TRACE [main] TransactionAspectSupport - Getting transaction for [it.stasbranger.spidly.service.TagServiceImpl.findTagsByUserprofileId]
22 apr 2013 21:11:31 TRACE [main] TransactionAspectSupport - Getting transaction for [it.stasbranger.spidly.service.TagServiceImpl.findTagsByUserprofileId]
22 apr 2013 21:11:31 DEBUG [main] AbstractPlatformTransactionManager - Participating in existing transaction
22 apr 2013 21:11:31 DEBUG [main] AbstractPlatformTransactionManager - Participating in existing transaction
22 apr 2013 21:11:31 TRACE [main] TransactionAspectSupport - Getting transaction for [it.stasbranger.spidly.dao.TagDAOImpl.findTagByUserProfileId]
22 apr 2013 21:11:31 TRACE [main] TransactionAspectSupport - Getting transaction for [it.stasbranger.spidly.dao.TagDAOImpl.findTagByUserProfileId]
22 apr 2013 21:11:31 TRACE [main] TransactionSynchronizationManager - Retrieved value [org.springframework.orm.jpa.EntityManagerHolder@1a6c891] for key [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean@b9b8d9] bound to thread [main]
22 apr 2013 21:11:31 TRACE [main] TransactionSynchronizationManager - Retrieved value [org.springframework.orm.jpa.EntityManagerHolder@1a6c891] for key [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean@b9b8d9] bound to thread [main]
22 apr 2013 21:11:31 TRACE [main] TransactionSynchronizationManager - Retrieved value [org.springframework.orm.jpa.EntityManagerHolder@1a6c891] for key [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean@b9b8d9] bound to thread [main]
22 apr 2013 21:11:31 TRACE [main] TransactionSynchronizationManager - Retrieved value [org.springframework.orm.jpa.EntityManagerHolder@1a6c891] for key [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean@b9b8d9] bound to thread [main] 
```

在 Tomcat server.xml 中，自动部署被禁用。建议？

提前致谢！

```
# STDOUT appender
log4j.appender.STDOUT=org.apache.log4j.ConsoleAppender
log4j.appender.STDOUT.layout=org.apache.log4j.PatternLayout
log4j.appender.STDOUT.layout.ConversionPattern=%d{dd MMM yyyy HH\:mm\:ss} %p [%t] %C{1} - %m\n

# use the STDOUT appender. set the level to ERROR.
log4j.rootLogger=STDOUT

log4j.category.atomikos=WARN, STDOUT
log4j.category.org.springframework=WARN, STDOUT
#log4j.category.org.springframework.transaction=ERROR, STDOUT

# use this category for skyway / spring util output
log4j.category.org.skyway.spring.util=WARN, STDOUT

# Direct log messages to a log file
log4j.logger.social=INFO, social
log4j.appender.social=org.apache.log4j.RollingFileAppender
log4j.appender.social.File=/home/###############
log4j.appender.social.File=spidly.log
log4j.appender.social.layout=org.apache.log4j.PatternLayout
log4j.appender.social.layout.ConversionPattern=%d %p [%t] %C{1} - %m\n
log4j.appender.social.MaxFileSize=1MB
log4j.appender.social.MaxBackupIndex=10

# temp log for rss
log4j.logger.rss=INFO, rss
log4j.appender.rss=org.apache.log4j.RollingFileAppender
log4j.appender.rss.File=/home/#######################
log4j.appender.rss.File=rss.log
log4j.appender.rss.layout=org.apache.log4j.PatternLayout
log4j.appender.rss.layout.ConversionPattern=%d %p [%t] %C{1} - %m\n
log4j.appender.rss.MaxFileSize=1MB
log4j.appender.rss.MaxBackupIndex=10 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T19:16:59.157

您可能有重复的日志附加程序。检查您的 log4j 配置（或 logback 或您使用的任何内容）。

请参阅[Log4j 附加程序](http://logging.apache.org/log4j/2.x/manual/appenders.html)或[Logback 附加程序](http://logback.qos.ch/manual/appenders.html)。

也尝试通过设置系统属性打开 Log4j 调试`-Dlog4j.debug=true`

# php - 使用post方法将javascript变量与其他html变量一起传递给php

> ID：16154927
> 
> 赞同：1
> 
> 时间：2013-04-22T19:14:30.243
> 
> 标签：php, javascript

我想`post2.php`使用 POST 或 GET 方法将变量行与其他 HTML 表单变量一起发送。

下面的代码给出了一个错误：

```
Notice: Undefined index: row1 in C:\xampp\htdocs\PhpProject1\OtherUsableItems\post2.php on line 8 
```

**post1.php**

```
 <html>
 <head>
 <SCRIPT language="javascript">
 function addRow(tableID) {
      var table = document.getElementById(tableID);

      var rowCount = table.rows.length;
      var row = table.insertRow(rowCount);

      var colCount = table.rows[0].cells.length;

      for(var i=0; i<colCount; i++) {
          var newcell = row.insertCell(i);

          newcell.innerHTML = table.rows[0].cells[i].innerHTML;
          //alert(newcell.childNodes);
          switch(newcell.childNodes[0].type) {
              case "text":
                      newcell.childNodes[0].value = "";
                      break;
              case "checkbox":
                      newcell.childNodes[0].checked = false;
                      break;
              case "select-one":
                      newcell.childNodes[0].selectedIndex = 0;
                      break;
          }
      }      
  }
  </script>
  <script>
  function count(tableId){
      var rows = document.getElementById(tableId).getElementsByTagName("TR").length;

     // window.location.href = "http://localhost/PhpProject1/OtherUsableItem  /post2.php?rows=" + rows ;
     // alert('Your table has ' + rows + ' rows.');
     $.post("post2.php", { 'row' : rows}, function(rows){alert('rows'+rows);});
  }
  </script>

  </head>
  <body>
  <form action="post2.php" method="post">

   <TABLE id="dataTable"  border="1">
    <TR>
        <TD> 1 </TD>
        <TD> <INPUT name="n1[]"type="text" /> </TD>
        <TD> <INPUT name="n2[]"type="text" /> </TD>
        <TD><SELECT name="country[]" type="select-one">
                <OPTION value="in">India</OPTION>
                <OPTION value="de">Germany</OPTION>
                <OPTION value="fr">France</OPTION>
                <OPTION value="us">United States</OPTION>
                <OPTION value="ch">Switzerland</OPTION>
            </SELECT></TD>
    </TR>
  </TABLE>
 <INPUT type="button" value="Add Row" onclick="addRow('dataTable');"/>
 <button id="bt" onclick="count('dataTable');">Submit</button>
 </form>

 </body>
 </html> 
```

**post2.php**

```
<?php
    $n1 = $_POST['n1'];
    $n2 = $_POST['n2'];
    $country = $_POST['country'];
    echo $n1[0];
    echo $n2[0];
    echo $country[0];
    $count = $_POST['row1'];
    echo $count;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:17:15.127

尝试更改为`'row'`而不是`'row1'`

```
$n1 = $_POST['n1'];
$n2 = $_POST['n2'];
$country = $_POST['country'];
echo $n1[0];
echo $n2[0];
echo $country[0];
$count = $_POST['row'];
echo $count; 
```

以后用[`print_r`](http://php.net/manual/en/function.print-r.php)来查看 的值`$_POST`。

除了上述说明之外，我`<script>`将从 post1.php 中删除第二个标签，并将以下代码放入表单开头的正文中：

```
<form action="post2.php" method="post" >
  <input id="rowNumber" type="hidden" name="row" value="1"/> 
```

此外，将以下行添加到`function addRow`：

```
 var rowNumber = document.getElementById('rowNumber');
    rowNumber.value = parseInt( rowNumber.value ) + 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:03:01.820

问题是您没有发送正确的 Post 值。检查此行是否：

> var rows = document.getElementById(tableId).getElementsByTagName("TR").length;

它返回的值类似于：{name:'value',name2:'value2'}

之后，您将能够使用 $_POST['name'] 通过 php 访问...

这条线：

```
 $.post("post2.php", { 'row' : rows}, function(rows){alert('rows'+rows);}); 
```

替换为：

```
 $.post("post2.php", rows, function(rows){alert('rows'+rows);}); 
```

否则您将使用`$_POST['row']`

# django - django manytoone 另一边

> ID：16154930
> 
> 赞同：0
> 
> 时间：2013-04-22T19:14:34.097
> 
> 标签：django, django-models, django-forms

我有一个 django webapp。我有这样的设置：

```
class Doc(models.Model)
      invoice = models.ForeignKey(Invoice, null=True, on_delete=models.SET_NULL, blank=True)

class Invoice(models.Model)
      #bla bla bla 
```

我可以以某种方式创建一个代表的表单元素`invoice.doc_set.all()`吗？我希望它是我希望它是一个多选元素。我知道我不想要内联表单集。我想在发票端的 django admin 中看到什么-> 简单的多选元素，其中包含所有可以选择的实例。选择并保存后，特定发票将成为他们的外键实例......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T22:16:10.287

您可以使用 ModelMultipleChoiceField。

[https://docs.djangoproject.com/en/dev/ref/forms/fields/#modelmultiplechoicefield](https://docs.djangoproject.com/en/dev/ref/forms/fields/#modelmultiplechoicefield)

但我不认为管理员可以开箱即用地管理这种类型的功能。您可能需要扩展管理表单并自行设置 FK。

# mfc - Tab Control 在 Enter 键上绘制

> ID：16154933
> 
> 赞同：0
> 
> 时间：2013-04-22T19:14:57.707
> 
> 标签：mfc, tabcontrol, ctabctrl

所以我有一个问题，我认为之前已经探索过，但我似乎找不到任何东西。我制作了一个完全自定义绘制的自定义选项卡控件类，并在用户单击不同选项卡时显示/隐藏 CDialog 对象。为此，我重载了paint方法（我没有使用用户绘制功能）。除了一个问题外，一切似乎都运行良好，我遇到的问题是，当用户在当前显示的对话框中选择一个控件（即 CEdit）并按下回车键时，tabCtrl 将收到一个 WMPAINT导致 tabCtrl 的主体被绘制在当前对话框上的消息。为了解决这个问题，我修改了 tabCtrl 的擦除背景方法以显示当前对话框，该对话框修复了对话框被绘制但每次按下或按住 enter 键时控件中都会闪烁，因为绘制/显示对话组合发生。我想知道是否有人以前处理过这个问题并有修复或任何想法。我一直无法想出任何有效的方法。抱歉缺少代码，我没有得到所有者的许可来分享它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T01:48:02.423

双缓冲可能会对您有所帮助。请谷歌它 - 有很多例子。以[本文](http://www.codeproject.com/Articles/33/Flicker-Free-Drawing-In-MFC)为起点

# java - 将 RecipientType.TO 分配给消息时出错

> ID：16154944
> 
> 赞同：1
> 
> 时间：2013-04-22T19:15:33.903
> 
> 标签：java, jakarta-mail

使用这段代码：

```
message.addRecipient(Message.RecipientType.TO, new InternetAddress(to)); 
```

我收到一条错误消息“找不到符号符号：变量 RecipientType 位置：类消息”，其中“RecipientType”用红色下划线。

我的猜测是无法识别消息接口，为什么以及如何我不知道。我的进口：

```
import java.util.*;
import javax.mail.*;
import javax.mail.internet.*;
import javax.mail.internet.MimeMessage;
import javax.activation.*;
import javax.mail.Message.RecipientType; 
```

我正在使用 Netbeans 6.9.1 和 javaMail 1.4.7 API。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T19:29:25.893

您正在导入“javax.mail.Message.RecipientType”，因此您应该使用“RecipientType.TO”而不是“Message.RecipientType.TO”

# php - 使用外键插入数据库

> ID：16154947
> 
> 赞同：0
> 
> 时间：2013-04-22T19:15:39.570
> 
> 标签：php, mysql, sql

我有以下表格
**tbl_user** - id、用户名、密码（id 是 pk 并自动递增）
**tbl_userprofile** - id、userid、姓名、姓氏、性别、国籍、地址、手机、部门、电子邮件、问题、答案。
userid 是 tbl_userprofile 中的外键引用 tbl_user 中的 id 我正在尝试将新用户插入**tbl_userprofile**。在**tbl_userprofile**中获取用户 ID我的方法是使用 select 语句来获取**tbl_user**的 id 形式，但我不知道如何构造`WHERE`子句。

```
$SQL = "INSERT INTO tbl_userprofile (userid, name, surname, gender, nationality, address, mobile, department, email, question, answer) VALUES 
```

`('(SELECT id from tbl_user WHERE *something*) ', '$name','$surname','$gender','$nationality','$address','$mobile','$department','$email','$question','$answer')";` 我如何构建我的 WHERE 子句？或者我可以用不同的方式来解决这个问题吗？注意：我想我应该提到插入**tbl_user**和**tbl_userprofile**是由两个不同的脚本处理的，因为表单位于两个不同的页面上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:22:45.303

您可以使用以下`INSERT SELECT`语句：

```
INSERT INTO tbl_userprofile (userid, name, surname, gender, nationality, address, mobile, department, email, question, answer) 
SELECT id, '$name', '$surname', '$gender', '$nationality', '$address','$mobile', '$department', '$email', '$question', '$answer'
FROM tbl_user 
WHERE *something* 
```

[http://dev.mysql.com/doc/refman/5.0/en/insert-select.html](http://dev.mysql.com/doc/refman/5.0/en/insert-select.html)

# tomcat - DSE 3.0 Solr：Tomcat 给出 404 错误

> ID：16154955
> 
> 赞同：0
> 
> 时间：2013-04-22T19:15:52.710
> 
> 标签：tomcat, solr, cassandra, datastax-enterprise

我有带有 Solr 的 Datastax DSE 2.2，我在其中运行了 Wikipedia 演示。一切正常。然后我升级到 DSE 3.0，并重建了 Solr 索引。现在每次我点击网址：

```
http://myserverURL:8983/solr/wiki.solr/admin/ 
```

我收到 404“请求的资源 (/solr/wiki.solr/admin/) 不可用。” 来自 Tomcat。

我查看了 /var/log/cassandra/system.log 并且没有错误。我找到了这个资源：[http](http://www.datastax.com/docs/datastax_enterprise3.0/upgrade/solr_upgrade) ://www.datastax.com/docs/datastax_enterprise3.0/upgrade/solr_upgrade 我在那里运行了脚本；一切对我来说都运行良好，但没有解决我的错误。任何想法 ？Tomcat 的资源文件位置是否已在 DSE 3.0 中移动？

干杯，马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T16:03:33.047

在 DSE 3.0 中，管理页面的位置发生了变化。现在只需要去

```
http://myserverURL:8983/solr/ 
```

[http://www.datastax.com/docs/datastax_enterprise3.0/solutions/dse_search_upload#checking-a-schema](http://www.datastax.com/docs/datastax_enterprise3.0/solutions/dse_search_upload#checking-a-schema)

# css - IE：如何让 :active 也可以在父元素上工作（仅限 CSS）

> ID：16154959
> 
> 赞同：0
> 
> 时间：2013-04-22T19:16:05.380
> 
> 标签：css, internet-explorer

在 Chrome/Safari/Firefox 中，如果用户单击标签`span`内的a，伪类似乎也适用于包含元素/父级。但是，在 IE 中，似乎并非如此，仅适用于被直接点击的元素。`a``:active``:active`

当我尝试对`:active`标记相当复杂的按钮进行样式设置时，这带来了一些挑战。

[JSFiddle 上有一个简单的例子](http://jsfiddle.net/skotzko/ZZMZn/)。在非 IE 浏览器中直接单击文本，然后将 :active 状态与直接单击 IE 中的文本进行比较。

有没有办法让`:active`状态传递到`a`IE 中的包含？假设解决方案中没有 JS 作为约束。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:30:59.487

我知道如何在 IE 中执行此操作的唯一方法是使用按钮元素，而不是链接元素，因为没有 Javascript，您无法将 dom 遍历到父元素。

不过需要注意的是，您不再从 span 元素中获得黄色 :active 背景。希望这可以帮助。

# php - jQuery：当浏览器/计算机进入睡眠模式时，悲观的记录锁定？

> ID：16154960
> 
> 赞同：2
> 
> 时间：2013-04-22T19:16:08.603
> 
> 标签：php, jquery, mysql, pessimistic-locking

我正在尝试使用一些处理悲观锁定的 PHP/MySQL/jQuery 代码来调试问题。它使用两个字段：locking_user_id 和locking_date_time。锁定由对 PHP/MySQL 的 AJAX 操作确定。下面的 jQuery 代码显示了每 15 秒发生一次锁定的典型更新。每 10 分钟还有一个保存动作。

我的问题是，当某人的计算机进入“睡眠模式”或“锁定”几个小时时，jQuery/锁定更新会发生什么？AJAX 调用会继续吗？我假设 setTimeout() 不再运行？一个人故意允许编辑视图一次保持打开数小时。我相当确定这是导致问题的原因。今天，我正在对更新进行额外的 PHP 验证检查。

有没有人有任何建议基于不活动使编辑视图“超时”？

```
<script>

// Automatically Save Every 10 Minutes
setInterval(submit_crudForm, 600000); // (1000 * 60 * 10 = 600000)

function submit_crudForm() {
    $('#crudForm').submit();
}

// Set Update Locking
function updateLockingCount () {
    $.getJSON('https://wwww.thedomain.com/catalog/ajax_update_locking/1004', function(data) {
        //console.log(data);
        setTimeout(updateLockingCount, 15*1000);
    });
}
$(function () {
    updateLockingCount();
}); 
```

相关文章： [PHP/MySQL/jQuery 悲观锁定记录](https://stackoverflow.com/questions/15012314/php-mysql-jquery-pessimistic-locking-of-record)

# sql-server - 从 MERGE 获取匹配的 ID

> ID：16154961
> 
> 赞同：1
> 
> 时间：2013-04-22T19:16:12.623
> 
> 标签：sql-server, merge

在我们记录购票的应用程序中，我们决定如果在订单表格上填写的客户信息与已经存在的记录匹配，那么我们不会在客户表中添加新记录。

我使用 MERGE (SQL Server 2008) 仅在记录不匹配时插入。如果记录匹配（并且未插入）或插入记录并创建新的 CustomerID，我需要尝试输出 CustomerID。有没有合适的方法来解决这个问题？

```
CREATE PROCEDURE [dbo].[uspMergeCustomer]
    -- Add the parameters for the stored procedure here
    @lastName varchar(40),
    @firstName varchar(30),
    @email varchar(50),
    @emailNote varchar(100) = null,
    @address1 nvarchar(200) = null,
    @address2 nvarchar(50),
    @city nvarchar(50),
    @state char(2),
    @zip char(10)

AS
BEGIN
    SET NOCOUNT ON;

    MERGE Customer WITH (HOLDLOCK)
    USING (VALUES (@lastName, @firstName, @email, @emailNote, @address1, @address2, @city, @state, @zip)) 
    Source (LastName, FirstName, Email, EmailNote, AddressLine1, AddressLine2, City, State, Zip)
ON (Customer.LastName = Source.LastName
    AND Customer.FirstName = Source.FirstName
    AND Customer.Email = Source.Email
    AND Customer.AddressLine1 = Source. AddressLine1
    AND Customer.City = Source.City
    AND Customer.State = Source.State
    AND Customer.Zip = Source.Zip)
WHEN NOT MATCHED THEN
    INSERT (LastName, FirstName, Email, EmailNote, AddressLine1, AddressLine2, City, State, Zip) 
    VALUES (@lastName, @firstName, @email, @emailNote, @address1, @address2, @city, @state, @zip)
    OUTPUT INSERTED.CustomerID AS NEWID;
END 
```

# javascript - 将 ruby 字符串或整数或浮点数转换为 javascript 或 jquery 之一

> ID：16154963
> 
> 赞同：0
> 
> 时间：2013-04-22T19:16:14.293
> 
> 标签：javascript, jquery, ruby-on-rails, string, integer

在我的 Rails 项目中，我在 Google 地图中的以下代码是：

```
function initialize_google_maps() {
    var currentlatlng = new google.maps.LatLng(<%= @user.lat %>, <%= @user.lng %>);
    var zoom = <%= @kms_range %> > 9 ? 9 : 10;
    var myOptions = {
        zoom: zoom, 
```

等等等等……

问题在于：

```
(<%= @user.lat %>, <%= @user.lng %>); 
```

如何将 <%= @user.lat %> 和 <%= @user.lng %> 转换为字符串，以便 javascript 或 jquery 可以理解？

由于 ajax 的原因，我不能把这段代码放在脚本标签之间。我需要把它变成一个 jquery 函数，将值 <%= @user.lat %> 和 <%= @user.lng %> 分配给 jquery 可以理解的东西。

```
<script type="text/javascript">
  var map;
  var markers = [];

  function initialize_google_maps() {
    var currentlatlng = new google.maps.LatLng(<%= @user.lat %>, <%= @user.lng %>);
    var zoom = <%= @kms_range %> > 9 ? 9 : 10;
    var myOptions = {
        zoom: zoom,
        center: currentlatlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP, // ROADMAP, SATELLITE, HYBRID
        streetViewControl: false
    };
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    var marker = new google.maps.Marker({map: map, position: currentlatlng, icon:{oppacity:0}});
    map.setCenter(currentlatlng);
    map.setZoom(zoom);

    var circle = new google.maps.Circle({
        map: map,
        fillOpacity: 0,
        strokeWeight: 2,
        strokeOpacity: 0.7,
        radius: <%= @kms_range %>*1000,
    });
    circle.bindTo('center', marker, 'position');

  }

  function show_markers() {
    if (markers)
      for(i in markers) {
        markers[i].setMap(map);
      }
  }

  function add_marker(location) {
    marker = new google.maps.Marker({
      position: location,
      map: map
    });
    markers.push(marker);
    // markers.setVisible(false);
  }

  function initialize_markers() {
    <% (@reviews || []).each do |r| %>
      <% next unless r.lat && r.lng %>
      position = new google.maps.LatLng(<%= r.lat %>, <%= r.lng %>);
      add_marker(position);
    <% end %>
  }

  $(function() {
    initialize_google_maps();
    initialize_markers();
    show_markers();
  });

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:18:35.677

如果它们是 double 或 int，则不需要，您可以逐字呈现它们。如果它真的是一个字符串，并且你在js中需要一个字符串，只需在其中加上引号即可：

```
var currentlatlng = new google.maps.LatLng("<%= @user.lat %>", "<%= @user.lng %>"); 
```

编辑：根据评论：

```
var map_latitude = <%= at_user.lat %>;
var map_longitude = <%= at_user.lng %>; 
```

# php - nokia here location api在php中不起作用

> ID：16154966
> 
> 赞同：1
> 
> 时间：2013-04-22T19:16:21.383
> 
> 标签：php, json, api, here-api

我想从 nokia here location api 获取企业信息。下面是我的代码：

```
$NokiaPlaceURL = 'http://places.nlp.nokia.com/places/v1/discover/search?app_id='.APP_ID.'&app_code='.APP_CODE.'&at='.$at.'&q='.$keyword.'&size=10';
        //echo $NokiaPlaceURL; exit;
        $NokiaPlaceURL = file_get_contents($NokiaPlaceURL);
        var_dump($NokiaPlaceURL);exit; 
```

它给出了以下错误。我该如何解决这个问题？

```
Warning: file_get_contents(http://places.nlp.nokia.com/places/v1/discover/search?app_id=---&app_code=---&at=40.708322%2C-74.008881&q=food&size=10) [function.file-get-contents]: failed to open stream: HTTP request failed! HTTP/1.1 406 Not Acceptable in /opt/lampp/htdocs/test/nokia_here.php on line 29
bool(false) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:26:42.247

您需要为您的请求设置一些 HTTP 标头。从 API 文档中，我看到您需要设置`Accept`为`application/json`以 JSON 编码的数据或`application/xhtml+xml`XML 数据。标头被标记为可选，但是，我怀疑 PHP 设置了自己的标头，包括`Accept`没有诺基亚 API 期望的值。

但是，关于如何通过 向 GET 请求添加标头`file_get_contents`，您可以使用流上下文。例如：

```
$Options = array(
    'http' => array(
        'method' => 'GET',
        'header' => 'Accept: application/json'
    )
);

$Context = stream_context_create($Options);
$File = file_get_contents($URL, false, $Context); 
```

# c# - 如何围绕 Url.Content 辅助函数创建包装器辅助函数？

> ID：16154972
> 
> 赞同：5
> 
> 时间：2013-04-22T19:16:47.067
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我想围绕这个现有的助手创建一个包装器：

```
@Content.Url("...") 
```

**如何创建一个助手来包装它并向它添加一个参数？**

我的控制器有一个属性：

```
public bool IsAdmin {get; set;} 
```

我想以某种方式从我的控制器中引用这个值并像这样使用它：

```
@MyContent.Url("...", IsAdmin) 
```

我怎样才能做到这一点？`IsAdmin`是添加到我的唯一方法`ViewModel`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:24:15.713

您可以添加`IsAdmin`到模型中，也可以将其设为静态属性，将值存储在`HttpContext.Current.Items`. 或者，它可以从动态读取值`HttpContext.Request`。

```
public static bool IsAdmin
{
    get { return (HttpContext.Current.Items["IsAdmin"] as bool?) ?? false; }
    set { HttpContext.Current.Items["IsAdmin"] = value; }
} 
```

您可以像这样创建自定义扩展方法

```
public static Content(this UrlHelper helper, string contentPath, bool isAdmin)
{
    // do something with isAdmin
    helper.Content(contentPath);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:27:25.277

[这](http://www.codeproject.com/Articles/532513/ASP-NET-MVC-Url-Content-extended-with-force-update)是您正在寻找的一个很好的例子：

```
public class UrlHelperEx : UrlHelper
{
    #region Constants
    private const string c_VERSION_FORMAT = "{0}?v={1}";
    #endregion

    #region Initialization
    public UrlHelperEx(RequestContext requestContext)
        : base(requestContext)
    {
    }
    #endregion

    #region Public methods
    public string Content(string contentPath,bool forceupdate=false)
    {
        var content = base.Content(contentPath);

        if (!forceupdate) {
            return content.ToString();
        }
        else
        { 
            Version version = WebHelper.GetApplicationVersion(this.RequestContext.HttpContext);
            return string.Format(c_VERSION_FORMAT, content
                    , version.ToString());
        }
    }
    #endregion  
} 
```

# php - 欺骗在同一台服务器上运行良好的网站后 WP 白屏死机

> ID：16154975
> 
> 赞同：0
> 
> 时间：2013-04-22T19:16:52.730
> 
> 标签：php, wordpress, subdirectory, duplication

出于开发目的，我只是将一个在单独域上运行良好的站点复制到另一个域的子目录中。我已经压缩了不包括缓存的 /httpdocs/ 目录并上传了目录（它们 > 4gb 大）并 mysqldump'ed 数据库。导入文件或数据库期间没有错误。

值得注意的是，目标域在不同的子目录中运行单独的 WP 安装，这不会对我的安装产生影响。该域在根目录中包含一个带有 .htaccess 文件的非 CMS 站点，但它并没有什么引人注目的地方——只是重写规则和缓存配置（我已经尝试禁用它）。

发生的情况是我看到一个没有页面源的空白页面。

我试过： - 故意弄乱数据库连接，看看我是否会得到某种错误。- 打开 WP 调试和 PHP 错误报告（无）。- 将内存限制增加到 512mb - 禁用所有插件

在我看来，WP 不是由 Apache 运行的？

任何人都可以提出一些建议来尝试至少找到问题的根源吗？

非常感谢！

# android - Google Maps API V2：GPS 图标不出现

> ID：16154986
> 
> 赞同：0
> 
> 时间：2013-04-22T19:17:22.513
> 
> 标签：android, google-maps-api-2, android-maps-v2, htc-android

在我的应用程序中，我最近将 Google 地图从 V1 升级到了 V2。现在，使用 HTC One S (Android 4.1.1)，当我打开 GPS 并进入地图活动时，应用程序会识别出 GPS 已打开，但它的图标没有出现，并且应用程序无法找到我的位置。
在三星 Galaxy Y (Android 2.3) 等设备上，地图可以正常运行。
在三星 Galaxy S2 (Android 4.1.2)、HTC Wildfire (Android 2.3) 等其他设备上，GPS 图标不会出现，但应用程序会找到我的位置。
我哪里错了？

**班级：**

```
public class CercaPuntoVendita extends FragmentActivity implements OnMarkerClickListener, LocationSource, LocationListener {

    // Identificatore del messaggio della Map
    private final static int MAP_MESSAGE_ID = 1;

    // Identificatore della ProgressBar
    private final static int PROGRESS_DIALOG_ID = 1;

    // Riferimento alla Map
    private GoogleMap map;

    // Riferimento alle UiSettings
    private UiSettings uis;

    // Riferimento al GeoCoder
    private Geocoder geocoder;

    // Riferimento alla EditText
    private EditText inputName;

    // Livello di Zoom
    private int nMetriDiametroCitta = 10000;
    private int nMetriDiametroVia = 1500;

    //Riferimento al MapController
    public static MapController mapController;  

    //Otteniamo il riferimento al LocationManager
    private LocationManager myLocationManager = null;
    private OnLocationChangedListener myLocationListener = null;
    private Criteria myCriteria;

    private PuntiVendita overlays = null;

    private Context ctx = this;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // Mettiamo la View a tutto schermo
        requestWindowFeature(Window.FEATURE_NO_TITLE);

        // Visualizziamo la Map
        setContentView(R.layout.cerca_punto_vendita);

        // Gestione font
        Button btnSearch = (Button) findViewById(R.id.searchButton);
        Typeface tf = Typeface.createFromAsset(ctx.getAssets(), "fonts/CRAI_regular.ttf");
        Utils.setFontMultiple(tf, btnSearch);

        // Set up della map
        setUpMapIfNeeded();

        // Riferimento al campo di testo
        inputName = (EditText)findViewById(R.id.addressName);

        // Otteniamo il riferimento al geocoder
        geocoder = new Geocoder(this,Locale.ITALY);

        // Otteniamo il riferimento al location manager
        myLocationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

        // Verifichiamo se il GPS è abilitato altrimenti avvisiamo l'utente
        if(!myLocationManager.isProviderEnabled("gps")) {
            Utils.showWarningDialog(this, "GPS è attualmente disabilitato. E' possibile abilitarlo dal menu impostazioni.");
        }

        // muovo la mappa su Roma
        map.moveCamera(CameraUpdateFactory.newLatLngZoom(new LatLng(41.893, 12.482), calculateZoomLevel(nMetriDiametroCitta)));
    }

    @Override
    public void onPause() {
        super.onPause();

        map.setLocationSource(null);
        myLocationManager.removeUpdates(this);
    }

    @Override
    protected void onResume() {
        super.onResume();
        setUpMapIfNeeded();

        map.setMyLocationEnabled(true);
        uis = map.getUiSettings();
        uis.setMyLocationButtonEnabled(false);
        myCriteria = new Criteria();
        myCriteria.setAccuracy(Criteria.ACCURACY_COARSE);
        myLocationManager = (LocationManager)getSystemService(LOCATION_SERVICE);

        // Verifichiamo se il GPS è abilitato altrimenti avvisiamo l'utente
        if(myLocationManager.isProviderEnabled("gps")) {
            try {
                Location loc = myLocationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
                map.moveCamera(CameraUpdateFactory.newLatLngZoom(new LatLng(loc.getLatitude(), loc.getLongitude()), calculateZoomLevel(nMetriDiametroVia))); 
            } catch (NullPointerException e) {
            }

            //Register for location updates using a Criteria, and a callback on the specified looper thread.
            myLocationManager.requestLocationUpdates(
              0L,    //minTime
              0.0f,    //minDistance
              myCriteria,  //criteria
              this,    //listener
              null);   //looper

            //Replaces the location source of the my-location layer.
            map.setLocationSource(this);
        }
        //myLocationManager.getProviders(true); 
    }   

    public static double getRound(double x, int digits){
        double powerOfTen = Math.pow(10, digits);
        return (Math.round(x * powerOfTen) / powerOfTen);
    }

    /**
     * Permette di iniziare la ricerca
     * 
     * @param button
     *            Riferimento al button
     */
    public void searchPlace(View button) {
        hideSoftInput();

        Thread searchThread = new Thread("SearchThread") {

            @Override
            public void run() {
                // Otteniamo il messaggio
                Message message = mapHandler.obtainMessage();
                // Utilizziamo il Geocoder per fare la ricerca
                try {
                    List<Address> risultati = geocoder.getFromLocationName(inputName.getText().toString().trim(), 1);
                    // Se c'e' qualcosa lo notifichiamo
                    if (risultati != null && risultati.size() > 0) {
                        message.obj = risultati.get(0);
                        mapHandler.sendMessage(message);
                    } else {
                        runOnUiThread(new Runnable() {                
                            public void run() {
                                Utils.msg(CercaPuntoVendita.this, "Nessun risultato trovato");
                            }
                        });
                    }
                } catch (IOException e) {
                    // Non facciamo nulla ma arriva il messaggio vuoto
                    mapHandler.sendEmptyMessage(MAP_MESSAGE_ID);
                } finally {
                    dismissDialog(PROGRESS_DIALOG_ID);
                }
            }

        };
        // Visualizziamo la progressDialog
        showDialog(PROGRESS_DIALOG_ID);
        // Facciamo partire il Thread
        searchThread.start();
    }

    private final Handler mapHandler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            // Si ottengono le informazioni se presenti sulla posizione
            if (msg != null && msg.obj != null) {
                // Estraiamo le informazioni di posizione
                try { 
                    Address address = (Address)msg.obj;
                    Log.d("CercaPuntoVendita.this", "" + address.getLocality());
                    GeoPoint pointToGo = new GeoPoint((int)(address.getLatitude()*1000000),(int)(address.getLongitude()*1000000));
                    float dZoom = 0;
                    if (address.getLocality().equalsIgnoreCase(inputName.getText().toString().trim())) {
                        // se la locality è uguale alla stringa di ricerca, si tratta di una citta'
                        dZoom = calculateZoomLevel(nMetriDiametroCitta);
                    } else {
                        dZoom = calculateZoomLevel(nMetriDiametroVia);
                    }
                    map.moveCamera(CameraUpdateFactory.newLatLngZoom(new LatLng(address.getLatitude(), address.getLongitude()), dZoom));
                } catch (NullPointerException ex) {
                    Utils.msg(CercaPuntoVendita.this, "Nessun risultato trovato");
                    Log.w("Punti Vendita - Cerca", (ex.getMessage() == null)?"address = null":ex.getMessage()); 
                }
            } else {
                Utils.msg(CercaPuntoVendita.this, "Nessun risultato trovato");
            }
            Log.i("GEOCODER", "" + msg);
            if (msg != null) {
                Log.i("GEOCODER", "" + msg.obj);
            }
        }
    };

    @Override
    protected Dialog onCreateDialog(int id) {
        switch (id) {
        case PROGRESS_DIALOG_ID:
            ProgressDialog progressDialog = new ProgressDialog(this, ProgressDialog.STYLE_SPINNER);
            progressDialog.setIndeterminate(true);
            progressDialog.setTitle("Cerca Punti Vendita");
            progressDialog.setMessage("Cercando...");
            return progressDialog;
        default:
            return null;
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Menù di gestione modalità di visualizzazione che, per renderle checkable le inseriamo in un sottomenu
        SubMenu mapSubMenu = menu.addSubMenu("Modalità Mappa");
        mapSubMenu.setIcon(android.R.drawable.ic_menu_mapmode);
        int firstItem = Menu.FIRST;
        MenuItem trafficItem = mapSubMenu.add(1, firstItem, firstItem, "Traffic");
        trafficItem.setCheckable(true);
        trafficItem.setChecked(false);
        MenuItem satelliteItem = mapSubMenu.add(1, firstItem + 1, firstItem + 1, "Satellite");
        satelliteItem.setCheckable(true);
        trafficItem.setChecked(false);
        // Visualizziamo il menu
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // Modifichiamo lo stato di quella selezionata
        item.setChecked(!item.isChecked());
        // Abilitiamo o meno l'opzione relativa
        switch (item.getItemId()) {
            case Menu.FIRST:
                map.setTrafficEnabled(item.isChecked());
                break;
            case Menu.FIRST + 1:
                if (item.isChecked())
                    map.setMapType(MAP_TYPE_SATELLITE);
                else
                    map.setMapType(MAP_TYPE_NORMAL);
                break;
        }
        return super.onOptionsItemSelected(item);
    }

    protected boolean isRouteDisplayed() {
        return false;
    }

    private void hideSoftInput() {
        InputMethodManager inputManager = (InputMethodManager) CercaPuntoVendita.this.getSystemService(Context.INPUT_METHOD_SERVICE); 
        inputManager.hideSoftInputFromWindow(CercaPuntoVendita.this.getCurrentFocus().getWindowToken(), InputMethodManager.HIDE_NOT_ALWAYS);
    }

    public boolean onMarkerClick(Marker mrk) {
        final ProgressDialog progressDialog = ProgressDialog.show(ctx, "", "Caricamento in corso.\nAttendere prego...");
        final String sSnippet = mrk.getSnippet();
        new Thread() {
            @Override
            public void run() {
                try {
                    sleep(100);
                } catch (Exception e) {
                    e.printStackTrace();
                }

                Intent intent = new Intent(ctx, PuntoVenditaDett.class);
                intent.putExtra("myPdvId", sSnippet);
                ctx.startActivity(intent);

                progressDialog.dismiss();
            }
        }.start();

        return true;
    }

    private void setUpMap() { 
        // Gestiamo gli Overlay
        Drawable starImg = getResources().getDrawable(R.drawable.logominicrai);
        if (overlays == null)
            overlays = new PuntiVendita(starImg, this);
        map.setOnMarkerClickListener(this);
        for (int i=0; i < overlays.size(); i++) {
            LatLng llPunto = new LatLng(overlays.getItem(i).getPoint().getLatitudeE6()/1E6, overlays.getItem(i).getPoint().getLongitudeE6()/1E6);

            map.addMarker(new MarkerOptions()
                .position(llPunto)
                //.title(name)
                .snippet(overlays.getItem(i).getSnippet())
                .icon(BitmapDescriptorFactory
                    .fromResource(R.drawable.logominicrai)));
        }
    }

    private void setUpMapIfNeeded() {
        // Do a null check to confirm that we have not already instantiated the map.
        if (map == null) {
            // Try to obtain the map from the SupportMapFragment.
            map = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap();
            // Check if we were successful in obtaining the map.
            if (map != null) {
                setUpMap();
            }
        }
    }

    public void onLocationChanged(Location location) {
        if (myLocationListener != null) {
            myLocationListener.onLocationChanged(location);

            LatLng latlng = new LatLng(location.getLatitude(), location.getLongitude());
            map.animateCamera(CameraUpdateFactory.newLatLng(latlng));
        }
    }

    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

    public void activate(OnLocationChangedListener listener) {
        myLocationListener = listener;
    }

    public void deactivate() {
        myLocationListener = null;
    }
} 
```

**显现：**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.gmaps"
    android:versionCode="2"
    android:versionName="2" >

    <uses-sdk android:minSdkVersion="9" />

    <!-- Google Maps API V2 -->
    <permission
        android:name="com.example.gmaps.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />
    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />
    <uses-permission android:name="com.example.gmaps.permission.MAPS_RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />     

    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.FLASHLIGHT" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.CALL_PHONE" />
    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/icon"
        android:label="@string/app_name" >

        <activity
            android:name="com.fedrasoft.craiinforma.App"
            android:configChanges="orientation|keyboardHidden|keyboard"
            android:screenOrientation="portrait"
            android:launchMode="singleTask" >
            <!-- android:alwaysRetainTaskState="true" --> 
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:name="com.fedrasoft.craiinforma.CercaPuntoVendita"
            android:label="@string/title_activity_cerca_punto_vendita"
            android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="CercaPuntoVendita" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>

        <uses-library android:name="com.google.android.maps" />

        <!-- Google Maps API V2 -->
        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="my key" /> 
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T15:50:06.873

按照@Nevermore 的建议，我解决了实现 OnMyLocationChangeListener 而不是 LocationSource 和 LocationListener 的问题。
我以这种方式更改了代码：

```
public class CercaPuntoVendita extends FragmentActivity implements OnMarkerClickListener, OnMyLocationChangeListener {
    //...
    public void onMyLocationChange(Location location) {
        mMap.animateCamera(
            CameraUpdateFactory.newLatLng(
                new LatLng(location.getLatitude(), location.getLongitude())));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T06:50:18.090

我发现这个问题取决于指令：

```
map.setLocationSource(this); 
```

如果我不使用它，GPS 工作正常，但它不能“跟随”我的位置。我必须以一种始终可以设置位置源的方式放置此指令，即使我在运行中打开 GPS 时也是如此……

# android - 从单击的列表视图项中获取文本

> ID：16154990
> 
> 赞同：1
> 
> 时间：2013-04-22T19:17:29.970
> 
> 标签：android, listview

我的 ListView 是从我的数据库中提取的食谱列表。我正在尝试在我的 ListView 中获取单击项目的文本。ListView 通过数据库调用和 cursoradapter 填充。我想使用所选项目的文本在另一个活动中进行另一个数据库调用。这是代码块

```
listView.setClickable(true);
    listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View v, int position,
                long id) {
            final String text = ((TextView)v).getText().toString();
            recipeid = myDBAdapter.getRecipeID(text);
            Intent intent = new Intent(ListAllRecipes.this, DisplayRecipe.class);
            intent.putExtra("recipeid", recipeid);
            startActivity(intent);

        }

    }); 
```

当我运行我的代码时，我得到

```
04-22 14:08:37.022: E/AndroidRuntime(25206): FATAL EXCEPTION: main
04-22 14:08:37.022: E/AndroidRuntime(25206): java.lang.ClassCastException: android.widget.RelativeLayout cannot be cast to android.widget.TextView
04-22 14:08:37.022: E/AndroidRuntime(25206):    at com.example.ketorecipes.ListAllRecipes$1.onItemClick(ListAllRecipes.java:47) 
```

当我单击 ListView 中的项目时。

这是一大块的活动：

```
public class ListAllRecipes extends Activity{
private DBAdapter myDBAdapter;
private ListView listView;
private int recipeid;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.list_all);

    myDBAdapter = new DBAdapter(this);
    myDBAdapter.openToRead();
    Cursor c = myDBAdapter.getValues();

    listView = (ListView)findViewById(R.id.listView1);
    String[] from = new String[] {"_id"};
    int[] to = new int[] {R.id.name_entry};
    SimpleCursorAdapter cursorAdapter = new SimpleCursorAdapter(this, R.layout.list_entry, c, from, to);
    listView.setAdapter(cursorAdapter);

    listView.setClickable(true);
    listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View v, int position,
                long id) {
            final String text = ((TextView)v).getText().toString();
            recipeid = myDBAdapter.getRecipeID(text);
            Intent intent = new Intent(ListAllRecipes.this, DisplayRecipe.class);
            intent.putExtra("recipeid", recipeid);
            startActivity(intent);

        }

    });
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:45:23.783

我建议使用`position`Field`onItemClick`从中获取项目`parent.getItemAtPosition(position)`，这将返回代表您刚刚单击的项目的条目（可能需要转换为正确的类型），这应该是您想要的，无需手动获取值从 UI 元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T20:00:52.263

您将 _id 与 R.id.name_entry 相关联，因此您的列表包含 _id 的任何值。

```
String[] from = new String[] {"_id"};
int[] to = new int[] {R.id.name_entry}; 
```

如果是这样，您可以获得 _id 的名称

```
Cursor c = cursorAdapter.getCursor();
String text = c.getString(c.getColumnIndex("_id")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T19:34:21.037

我很确定返回的视图 (v) 不是文本视图。您的列表项是自定义视图，因此您需要通过 id 查找视图来获取视图。

# ruby-on-rails - 追捕：弃用警告：数据库连接不会自动关闭

> ID：16154994
> 
> 赞同：1
> 
> 时间：2013-04-22T19:17:45.553
> 
> 标签：ruby-on-rails

我有这个痕迹，不知道如何追查这个原因。这是在测试运行期间弹出的。关于如何进行的任何想法？

```
DEPRECATION WARNING: Database connections will not be closed automatically, please close your
database connection at the end of the thread by calling `close` on your
connection.  For example: ActiveRecord::Base.connection.close
. (called from mon_synchronize at /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211)
/home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:212:in `block in clear_stale_cached_connections!'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:210:in `each'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:210:in `clear_stale_cached_connections!'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:274:in `block (2 levels) in checkout'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:242:in `loop'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:242:in `block in checkout'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:239:in `checkout'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:102:in `block in connection'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:101:in `connection'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:410:in `retrieve_connection'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_specification.rb:171:in `retrieve_connection'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_specification.rb:145:in `connection'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/query_cache.rb:61:in `call'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.9/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/callbacks.rb:405:in `_run__1441209721629762293__call__222931449678172199__callbacks'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/callbacks.rb:405:in `__run_callback'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/callbacks.rb:81:in `run_callbacks'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.9/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.9/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.9/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.9/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/rack/logger.rb:32:in `call_app'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/rack/logger.rb:16:in `block in call'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/tagged_logging.rb:22:in `tagged'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/rack/logger.rb:16:in `call'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.9/lib/action_dispatch/middleware/request_id.rb:22:in `call'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.2.9/lib/action_dispatch/middleware/static.rb:62:in `call'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/airbrake-3.1.6/lib/airbrake/rack.rb:41:in `call'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/airbrake-3.1.6/lib/airbrake/user_informer.rb:12:in `call'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/engine.rb:479:in `call'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/application.rb:223:in `call'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:134:in `call'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib/rack/urlmap.rb:64:in `block in call'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib/rack/urlmap.rb:49:in `each'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib/rack/urlmap.rb:49:in `call'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/capybara-1.1.3/lib/capybara/server.rb:17:in `call'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /home/gaul/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T19:25:33.147

那么工作解决方案是：

```
after do
  ActiveRecord::Base.connection.close
end 
```

你可以看看这个问题

[ActiveRecord 连接警告。（数据库连接不会自动关闭）](https://stackoverflow.com/questions/10191531/activerecord-connection-warning-database-connections-will-not-be-closed-automa)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-15T22:46:23.743

不确定这是否适合遇到此问题的任何人，但我相信我在自己的应用程序中找到了解决方案。

场景：一些功能测试（使用 rspec 和 capybara）导致出现此警告，尽管测试通过了。

问题：测试正在加载一个页面，该页面然后使用 ajax 调用控制器，并使用几个部分 render_to_string 渲染回来。其中一个部分抛出了错误，但测试只是寻找其他东西的外观，这不是该部分的一部分。所以测试通过了。

我们需要对这种特定方法进行更好的测试，而且它应该做的事情更少。但这是我的问题的原因，我只是在运行测试时通过跟踪 test.log 才看到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-14T23:19:25.227

我和 Dominik 有同样的问题，但我无法解决。

以下是一些想法：

*   首先，我没有在我的代码中使用任何线程。
*   我责怪 VanityUrls 因为一旦页面加载，我一直在寻找 log/test.log 并且有一堆图像调用落入 Vanity 路线。我的猜测是每个请求都会产生一个线程？我没有任何论据来验证这种情况正在发生。
*   考虑到这一点，我摆脱了一些图像和一些工作。我不断收到数据库警告，但以下测试运行良好。过去，以下测试会失败，因为 AR 无法为测试生成新连接:(

*   我以为是 New Relic、Capybara、Capybara Webkit、AirBrake。我更新了那些。仍然收到警告。

*   不知道还能做什么。

# regex - 正则表达式尽可能多地匹配，但在约束范围内

> ID：16154996
> 
> 赞同：0
> 
> 时间：2013-04-22T19:18:01.973
> 
> 标签：regex, regex-greedy

这是我的字符串：

`"ab1 ab-1 f-12 g-12 ffff-123 456"`

我想挑选出具有以下特点的东西：

*   最多 2 个字母
*   可选连字符
*   最多 2 个号码

*   **有效**：ab1、ab-1、f-12、g-12

*   **无效**：ffff-123、456

所以我创建了正则表达式：

`[\w{1,2}]-?\d{1,2}`

但它返回了太多东西：

```
>>> re.findall('[\w{1,2}]-?\d{1,2}', "ab1 ab-1 f-12 g-12 ffff-123 456")
['b1', 'b-1', 'f-12', 'g-12', 'f-12', '456'] 
```

问题：

1.  `[\w{1,2}]`需要与`-?`......隔离，我认为他们被困在一起
2.  `[\w{1,2}]`正在获得最小的可能匹配，例如`b-1`from `ab-1`，当它应该获得最多 2 个字符的最大可能匹配时，`ab-1`

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T19:22:42.367

应该有：

```
[a-z]{1,2}-?\d{1,2} 
```

该表达式`[\w{1,2}]`表示任何单个字符，它可以是单词字符 , `{`, `1`, `,`,`2`或`}`.

请注意，在您的字符串中，这将匹配`ff-12`，因为这部分`ffff-123`匹配表达式。如果您不希望发生这种情况，则需要`\b`在表达式周围添加，以便它仅在单词边界处匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T19:37:13.160

此正则表达式应如下所示：

```
\b[a-z]{1,2}-?[\d]{1,2}\b 
```

这是因为`\w`匹配所有字母**数字**符号，包括您​​不想在字符串中找到的所有数字。

`\b`由于这个例子，RE的边界也应该有： `ffff-123`.

RE without`\b`将匹配此示例的部分，但它不应该因此我们添加`\b`使其仅在单词的边界处搜索

# http - 如何使用 httptest 在 Go 中测试 http 调用

> ID：16154999
> 
> 赞同：79
> 
> 时间：2013-04-22T19:18:21.037
> 
> 标签：http, go

我有以下代码：

```
package main

import (
    "encoding/json"
    "fmt"
    "io/ioutil"
    "log"
    "net/http"
    "time"
)

type twitterResult struct {
    Results []struct {
        Text     string `json:"text"`
        Ids      string `json:"id_str"`
        Name     string `json:"from_user_name"`
        Username string `json:"from_user"`
        UserId   string `json:"from_user_id_str"`
    }
}

var (
  twitterUrl = "http://search.twitter.com/search.json?q=%23UCL"
  pauseDuration = 5 * time.Second
)

func retrieveTweets(c chan<- *twitterResult) {
    for {
        resp, err := http.Get(twitterUrl)
        if err != nil {
            log.Fatal(err)
        }

        defer resp.Body.Close()
        body, err := ioutil.ReadAll(resp.Body)
        r := new(twitterResult) //or &twitterResult{} which returns *twitterResult
        err = json.Unmarshal(body, &r)
        if err != nil {
            log.Fatal(err)
        }
        c <- r
        time.Sleep(pauseDuration)
    }

}

func displayTweets(c chan *twitterResult) {
    tweets := <-c
    for _, v := range tweets.Results {
        fmt.Printf("%v:%v\n", v.Username, v.Text)
    }

}

func main() {
    c := make(chan *twitterResult)
    go retrieveTweets(c)
    for {
        displayTweets(c)
    }

} 
```

我想为它写一些测试，但我不确定如何使用 httptest 包[http://golang.org/pkg/net/http/httptest/](http://golang.org/pkg/net/http/httptest/)会感谢一些指针

我想出了这个（无耻地从 go OAuth [https://code.google.com/p/goauth2/source/browse/oauth/oauth_test.go](https://code.google.com/p/goauth2/source/browse/oauth/oauth_test.go)的测试中复制）：

```
var request = struct {
    path, query       string // request
    contenttype, body string // response
}{
    path:        "/search.json?",
    query:       "q=%23Kenya",
    contenttype: "application/json",
    body:        twitterResponse,
}

var (
    twitterResponse = `{ 'results': [{'text':'hello','id_str':'34455w4','from_user_name':'bob','from_user_id_str':'345424'}]}`
)

func TestRetrieveTweets(t *testing.T) {
    handler := func(w http.ResponseWriter, r *http.Request) {

        w.Header().Set("Content-Type", request.contenttype)
        io.WriteString(w, request.body)
    }

    server := httptest.NewServer(http.HandlerFunc(handler))
    defer server.Close()

    resp, err := http.Get(server.URL)
    if err != nil {
        t.Fatalf("Get: %v", err)
    }
    checkBody(t, resp, twitterResponse)
}

func checkBody(t *testing.T, r *http.Response, body string) {
    b, err := ioutil.ReadAll(r.Body)
    if err != nil {
        t.Error("reading reponse body: %v, want %q", err, body)
    }
    if g, w := string(b), body; g != w {
        t.Errorf("request body mismatch: got %q, want %q", g, w)
    }
} 
```

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-04-26T14:36:57.703

httptest 进行两种类型的测试：响应和服务器

反应测试：

```
func TestHeader3D(t *testing.T) {
    resp := httptest.NewRecorder()

    uri := "/3D/header/?"
    path := "/home/test"
    unlno := "997225821"

    param := make(url.Values)
    param["param1"] = []string{path}
    param["param2"] = []string{unlno}

    req, err := http.NewRequest("GET", uri+param.Encode(), nil)
    if err != nil {
            t.Fatal(err)
    }

    http.DefaultServeMux.ServeHTTP(resp, req)
    if p, err := ioutil.ReadAll(resp.Body); err != nil {
            t.Fail()
    } else {
            if strings.Contains(string(p), "Error") {
                    t.Errorf("header response shouldn't return error: %s", p)
            } else if !strings.Contains(string(p), `expected result`) {
                    t.Errorf("header response doen't match:\n%s", p)
            }
    }
} 
```

服务器测试（这是您需要使用的）：

```
func TestIt(t *testing.T){
    ts := httptest.NewServer(http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
        w.Header().Set("Content-Type", "application/json")
        fmt.Fprintln(w, `{"fake twitter json string"}`)
    }))
    defer ts.Close()

    twitterUrl = ts.URL
    c := make(chan *twitterResult)
    go retrieveTweets(c)

    tweet := <-c
    if tweet != expected1 {
        t.Fail()
    }
    tweet = <-c
    if tweet != expected2 {
        t.Fail()
    }
} 
```

顺便说一句，你不需要传入 r 的指针，因为它已经是一个指针。

```
err = json.Unmarshal(body, r) 
```

编辑：对于我的记录器测试，我可以像这样使用我的 http 处理程序：

```
handler(resp, req) 
```

但是我的原始代码没有使用默认的多路复用器（而是来自 Gorilla/mux），并且我对多路复用器进行了一些包装，例如插入服务器日志记录和添加请求上下文（Gorilla/context），所以我不得不从多路复用器开始调用 ServeHTTP

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-05-31T15:14:47.170

最初[这个代码片段是在 GitHub Gist 上找到的](https://gist.github.com/cespare/4992458#file-myserver_test-go)，但是在尝试将这个概念应用到我的一个项目中时，我意识到我必须对主要代码进行重大修改，因此我决定使用 docker 和 curl 使用集成测试来测试这些调用。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-23T04:17:33.543

如果您想测试您的程序，通常最好在编写时考虑到测试。例如，如果您将`retrieveTweets`函数的内部循环提取为如下内容：

```
func downloadTweets(tweetsUrl string) (*twitterResult, error) 
```

您可以使用您使用包设置的测试服务器的 URL 调用它，`httptest`而不必担心睡眠或重复请求。