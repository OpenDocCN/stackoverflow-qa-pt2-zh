# StackOverflow 问答 13527000-13527999

# android - 如何从android中的日历中获取出生日期？

> ID：13527001
> 
> 赞同：1
> 
> 时间：2012-11-23T10:18:20.900
> 
> 标签：android, android-layout, calendar, android-calendar

我是安卓新手。我的布局如下：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello_world" />

    <EditText
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="26-01-2010" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Calender" />

</LinearLayout> 
```

我有一个编辑框和按钮。当我点击按钮时，我想打开一个日历并能够从日历中选择一个日期。此外，必须将所选日期设置为编辑框。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-04-03T19:41:55.373

在文本视图或按钮或编辑文本单击上调用方法 SelectDate

```
 private void SelectDate() {

    final Calendar c = Calendar.getInstance();
    year = c.get(Calendar.YEAR);
    month = c.get(Calendar.MONTH);
    day = c.get(Calendar.DAY_OF_MONTH);

    showDialog(DATE_PICKER_ID);

}

@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
        case DATE_PICKER_ID:

            // open datepicker dialog.
            // set date picker for current date
            // add pickerListener listner to date picker
            return new DatePickerDialog(this, pickerListener, year, month,day);
    }
    return null;
}

private DatePickerDialog.OnDateSetListener pickerListener = new DatePickerDialog.OnDateSetListener() {

    // when dialog box is closed, below method will be called.
    @Override
    public void onDateSet(DatePicker view, int selectedYear,
                          int selectedMonth, int selectedDay) {

        year  = selectedYear;
        month = selectedMonth;
        day   = selectedDay;

        // Show selected date
        birthdate_edt.setText(new StringBuilder().append(month + 1)
                .append("-").append(day).append("-").append(year)
                .append(" "));

    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T10:26:00.623

尝试这样的事情：

```
button.setOnClickListener(new View.OnClickListener(){
   @Override
   public void onClick(View v) {
      Dialog dlg = new DatePickerDialog(YourActivity.this, new DatePickerDialog.OnDateSetListener() {
         public void onDateSet(DatePicker view, int year, int month, int day) {
            yourEditText.setText(String.format("%02d.%02d.%04d", day, month+1, year);
         }
      }
   }
}); 
```

您还可以将您的edittext设置为不可聚焦以防止手动输入值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-05T11:25:38.870

***我这样做了，它对我有用！***

**弹出 DatePickerDialog 的方法**

```
public void openDatePickerDialog(final View v) {

    Calendar cal = Calendar.getInstance();
    // Get Current Date
    DatePickerDialog datePickerDialog = new DatePickerDialog(this,
            (view, year, monthOfYear, dayOfMonth) -> {
                String selectedDate = dayOfMonth + "/" + (monthOfYear + 1) + "/" + year;
                switch (v.getId()) {
                    case R.id.editTextDob:
                        ((EditText)v).setText(selectedDate);
                        dob = selectedDate;
                        Log.e("DOB selected",dob);
                        break;
                }
            }, cal.get(Calendar.YEAR), cal.get(Calendar.MONTH), cal.get(Calendar.DAY_OF_MONTH));

    datePickerDialog.getDatePicker().setMaxDate(cal.getTimeInMillis());
    datePickerDialog.show();
} 
```

**然后简单调用上面的方法 onClick 监听器内幕 onCreateActivity**

```
edtDOB.setOnFocusChangeListener(new View.OnFocusChangeListener() {
        @Override
        public void onFocusChange(View view, boolean hasFocus) {
            if (hasFocus){
                openDatePickerDialog(view);
            }
        }
    });
edtDOB.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            openDatePickerDialog(view);
        }
    }); 
```

# linux - sed -e 's/^M/d' 不工作

> ID：13527005
> 
> 赞同：4
> 
> 时间：2012-11-23T10:18:27.593
> 
> 标签：linux, unix, sed

一个非常常见的问题，但我无法使用 sed 解决它。

我有一个脚本文件（一批命令）说`myfile.txt`要立即执行以创建一个列表。现在，当我执行批处理操作时，我的命令行界面清楚地显示它无法解析命令，因为换行符`^M`在每行的末尾加起来。

我认为`sed`这是最好的方法。我试过：

```
 sed -e 's/^M/d' myfile.txt > myfile1.txt
    mv myfile1.txt myfile.txt 
```

它没有用。我也试过这个，但没有奏效：

```
 sed -e 's/^M//g' myfile.txt > myfile1.txt
    mv myfile1.txt myfile.txt 
```

然后我想可能`sed`是把它当作行首的 M 字符，因此没有结果。所以我尝试了：

```
 sed -e 's/\^M//g' myfile.txt > myfile1.txt
    mv myfile1.txt myfile.txt 
```

但没有变化。我在做一个基本的错误吗？请建议，因为我不擅长`sed`。

我找到了一个解决方案，即在 vi 编辑器中打开文件并在命令模式下执行以下操作：

```
 :set fileformat=unix
    :w 
```

但我也想要它`sed`。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-23T10:23:10.197

`^M`不是字面意思`^M`。替换`^M`为`\r`。`tr`您可以对;使用相同的表示。这两个命令都删除回车：

```
tr -d '\r'  < input.txt > output.txt
sed -e 's/\r//g' input.txt > output.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T10:31:20.113

```
sed -e 's/^M/d' myfile.txt 
```

具有以下含义[与 /\^M/ 相同]：*如果该行的第一个字母是 M，则删除该行，否则将其打印并传递给下一个。*. 并且您必须在 s[search 命令] 中插入 2 个分隔符 /old/new/。

[这](http://kb.iu.edu/data/acux.html)可能会对您有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-05T09:36:00.453

迟到了，但这里是为了后代：[Linux 或 Unix 上的 sed Delete / Remove ^M Carriage Return (Line Feed / CRLF)](https://www.cyberciti.biz/faq/sed-remove-m-and-line-feeds-under-unix-linux-bsd-appleosx/)

要点，它回答了上述问题：要获得 ^M 类型 CTRL+V 后跟 CTRL+M 即不要只键入克拉符号和大写 M。它不起作用

# php - 使用php在同一页面上显示多个jquery图像滑块

> ID：13527006
> 
> 赞同：0
> 
> 时间：2012-11-23T10:18:39.780
> 
> 标签：php, jquery, slideshow

您好我目前有一个 jquery 图像滑块脚本，它从文件夹中提取图像并将它们显示在页面上。

这是带有工作图像滑块的网页：http: [//iseeit.no/slidertest/](http://iseeit.no/slidertest/)

我想要并且一直试图弄清楚的是在同一页面上有 9 个单独的滑块，这是一个示例图片，它显示了它的外观：

每个灰色框代表滑块

![](../Images/2e8b396889b5a628b36f74a8f19e4dcd.png)

现在我一直在尝试为每张幻灯片制作一个新的 div，但我不知道该怎么做......

这是 index.php 脚本：

幻灯片

```
<script src="scripts/jquery-1.3.2.min.js" type="text/javascript"></script>
<script src="scripts/jquery.cycle.all.min.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function(){
    $('#myslides').cycle({
    fit: 1, pause: 2, timeout: 100
    });
});
</script>
<link rel="stylesheet" href="styles/dynamicslides.css" type="text/css" media="screen" />

</head>
<body>

<?php
$directory = 'images/slideshow';    
try {       
    // Styling for images   
echo "<div id=\"myslides\">";   
foreach ( new DirectoryIterator($directory) as $item ) {            
    if ($item->isFile()) {
        $path = $directory . "/" . $item;   
        echo "<img src=\"" . $path . "\" />";   
    }
}   
echo "</div>";
}   
catch(Exception $e) {
echo 'No images found for this slideshow.<br />';   
}
?>

</body>
</html> 
```

这是CSS编码：

```
#myslides {

padding: -8px;
margin: -8px;

} 

#myslides img {

} 
```

所以我想知道我将如何做到这一点？我试图制作一个新的 div，但我没有太多的 php 经验，所以我认为我做得不对......

希望得到一些反馈和一些帮助。

以下是与脚本有关的所有文件：http: [//iseeit.no/files/slidertest.rar](http://iseeit.no/files/slidertest.rar)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:30:39.547

如果我的问题是正确的，那么您有一个工作滑块，并且希望将更多滑块放在彼此相邻的一页上。如果是这样，那么您可以这样做：

PHP：

```
 // set the directories of the sliders you want
    $directories = array('images/slideshow', 
                         'images/slideshow2',
                         'images/slideshow3',
                         'images/slideshow4',
                         'images/slideshow5');    

    //create all the image sliders
    foreach($directories as $dir) {
        try {       
            echo '<div class="myslides">';   

            //add slides
            foreach( new DirectoryIterator($dir) as $item ) {            
                if ($item->isFile()) { 
                    echo '<img src="' . $dir . '/' . $item. '" />';   
                }
            }   

            echo '</div>';          
        } catch(Exception $e) {
            //do nothing, just skip the slider
        }
    } 
```

并为类上的滑块设置 jQuery 插件，`myslides`如下所示：

```
 <script>
        $(document).ready(function() {
            $('.myslides').cycle({
                fit: 1, pause: 2, timeout: 100
            });
        });
    </script> 
```

您可以使用`floats`将滑块彼此相邻放置。最佳做法是将`ul`滑块用作`li`. 但我暂时把它留了下来`div`。您可以使用以下 CSS 将它们彼此相邻：

```
.myslides {
    float: left;
    margin: 0 10px 10px 0; //top, right, bottom, left
    width: 200px; //set the width and height of the sliders (or maybe the slider is doing it?)
    height: 400px;
} 
```

希望这可以帮助！

**更新：创建 3x3 的示例代码**

```
$directories = array(0, 1, 2, 3, 3, 4, 5, 5, 6, 6, 7, 7);
$i = 0;
echo '<ul>';

foreach($directories as $dir) {
    // devide $i by 3, is the outcome 0?
    if($i % 3 == 0 && $i != 0) {
        //end row
        echo '</li>';

        //are there more items for the next row?
        if($i != count($directories)) {
            echo '<li>';
        }
    } elseif($i == 0) {
        echo '<li>';
    }

    // your code
    echo 'Jeah!';

    $i++; //add one 
}

//close last element and list
echo '</li></ul>'; 
```

输出：

```
<ul>
    <li>Jeah!Jeah!Jeah!</li>
    <li>Jeah!Jeah!Jeah!</li>
    <li>Jeah!Jeah!Jeah!</li>
    <li>Jeah!Jeah!Jeah!</li>
</ul> 
```

# node.js - 更新我的 mongodb 架构

> ID：13527015
> 
> 赞同：1
> 
> 时间：2012-11-23T10:19:19.747
> 
> 标签：node.js, mongodb, schema, mongoose

目前，我的 mongodb 应用程序的架构非常简单。但是，我想进一步简化和清理它。更新我的架构设计的最佳方式是什么？我应该使用库（相当简单）以我选择的语言编写重新映射器，还是有更简单的方法？

我不介意执行上述操作，我只是想知道是否有一种非常明显的可靠方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T10:26:40.110

您不必迁移您的架构，mongodb 像任何 NoSQl 系统一样是 RDBMS 架构问题的答案。

也就是说，您必须通过制作迁移脚本来迁移数据。

您可能会发现此[答案](https://stackoverflow.com/questions/7617002/dealing-with-schema-changes-in-mongoose)很有用。

# jquery - jquery背景填充100％屏幕，但切断图像的一部分

> ID：13527018
> 
> 赞同：1
> 
> 时间：2012-11-23T10:19:30.090
> 
> 标签：jquery, css, background-image, fill

我已经使用下面的代码来填充页面的整个屏幕。我真正需要的是让它完全填满**高度**，没关系它没有完全填满宽度。我只需要让背景图片居中在页面中间，页面高度为 100%。两边可以有空格，我不介意。当然，我需要保持比例。我试图修改代码，但我不确定我能做到。我在这件事上浪费了一些时间，我相信对于比我更有经验的人来说这会很容易。感谢您提前提出任何想法。代码在这里：

```
 <img src="http://test.tucado.com/4play/_images/cdj2000-start.jpg" id="bg" alt="">
    <a href="home.html"><div id="wheel-enter"><img src="http://test.tucado.com/4play/_images/empty.png" width="100" height="100" /></div></a> 
```

CSS：

```
 body{
    height:100%;
    width:100%;
    margin:0;padding:0;
    overflow:hidden;
}

#bg { position: fixed; top: 0; left: 0; }
.bgwidth { width: 100%; }
.bgheight { height: 100%; }

#cdj2000 {
    position:fixed;
    top: 50%;
    left: 50%;
    width:700px;
    height:500px;
    margin-left: -350px; 
    margin-top: -250px; 
}

#wheel-enter {
    position:fixed;
    top: 50%;
    left: 50%;
    width:100px;
    height:100px;
    margin-top: -50px; 
    margin-left: -50px; 
}

img{
    border:none;
} 
```

和jQuery：

```
$(window).load(function() {    

    var theWindow        = $(window),
        $bg              = $("#bg"),
        aspectRatio      = $bg.width() / $bg.height();

    function resizeBg() {

        if ( (theWindow.width() / theWindow.height()) < aspectRatio ) {
            $bg
                .removeClass()
                .addClass('bgheight');
        } else {
            $bg
                .removeClass()
                .addClass('bgwidth');
        }

    }

    theWindow.resize(function() {
        resizeBg();
    }).trigger("resize");

}); 
```

顺便提一句。我不得不将空图像作为按钮，因为某些原因 div 不起作用。奇怪的事情。当我向这个 div 添加边框时，它开始工作，但动作只在边框上......这很奇怪。当然我不想要一个边框，因为它假设它看起来是要点击的背景的一部分。

jsFiddle在这里：[>> jsFiddle <<](http://jsfiddle.net/58MPb/)

谢谢你的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:39:45.967

只需使用这个：

```
var theWindow = $(window)

function resizeBg() {
    $("#bg").css('width', $('html').outerWidth());
    $("#bg").css('height', $('html').outerHeight());
}

theWindow.resize(function() {
    resizeBg();
}).trigger("resize"); 
```

如果要保持纵横比，请删除更改宽度的线。

这是一个演示：http: [//jsfiddle.net/58MPb/3/](http://jsfiddle.net/58MPb/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T10:40:30.693

出于某种原因，JSfiddle 不起作用，但这是在测试页面上工作的结果代码：

```
<style>
   body{
    height:100%;
    width:100%;
    margin:0;padding:0;
    overflow:hidden;
}

#bg { position: fixed; top: 0; left: 50%;}
.bgwidth { width: 100%; }
.bgheight { height: 100%;}

#cdj2000 {
    position:fixed;
    top: 50%;
    left: 50%;
    width:700px;
    height:500px;
    margin-left: -350px; 
    margin-top: -250px; 
}

#wheel-enter {
    position:fixed;
    top: 50%;
    left: 50%;
    width:100px;
    height:100px;
    margin-top: -50px; 
    margin-left: -50px; 
}

img{
    border:none;
}
</style>
<img src="http://test.tucado.com/4play/_images/cdj2000-start.jpg" id="bg" alt="">
    <a href="home.html"><div id="wheel-enter"><img src="http://test.tucado.com/4play/_images/empty.png" width="100" height="100" /></div></a>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script>
    $(window).load(function() {    

    var theWindow        = $(window),
        $bg              = $("#bg"),
        aspectRatio      = $bg.width() / $bg.height();

    function resizeBg() {
            $bg
                .removeClass()
                .addClass('bgheight').css('margin-left',$bg.width()/2*-1);
    }

    theWindow.resize(function() {
        resizeBg();
    });
    resizeBg();

});
</script> 
```

您无缘无故地测试了窗口的 aspectRatio。因为无论发生什么你都想要 100% 的窗口高度，所以我删除了这部分。为了使图片居中，我使用了负边距技巧，将其放置在页面的 50% 处，所以在中间。然后我应用一个等于调整大小图片宽度一半的负边距。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T10:42:14.220

我相信我已经修复了它：http: [//jsfiddle.net/jcolicchio/58MPb/4/](http://jsfiddle.net/jcolicchio/58MPb/4/)

首先，我将 JS 的第一行更改为：

```
$(document).ready(function() { 
```

因为它似乎根本没有运行您的代码。您还有一个反向不等号，也将其翻转过来：

```
if ( (theWindow.width() / theWindow.height()) > aspectRatio ) { 
```

这里发布的另一个解决方案是更简洁的代码，但对我来说有点紧张。

# opengl - GLSL 着色器中的模型到屏幕坐标混淆

> ID：13527020
> 
> 赞同：1
> 
> 时间：2012-11-23T10:19:40.793
> 
> 标签：opengl, glsl, unity3d

在我的着色器中，我已经有一个特殊变量，它包含先前渲染屏幕的**全部**内容。它存储在

```
uniform sampler2D _GrabTexture; 
```

它的内容应该是： ![画面内容](../Images/04ef524a099e22eb641cc1ce7a0d7d42.png)

（作为旁注，我使用 Unity 的 GrabPass{} 来获取整个屏幕。另外请忽略 Unity 的 GUI）

现在如何**再渲染一个 pass**，使用 _GrabTexture 作为我的平面模型的纹理，所以结果与我的 _GrabTexture 完全相同？

（重点是，我可以在再渲染一遍之前对屏幕纹理应用一些效果，如模糊、锐化等，这样飞机的纹理现在就被风格化了。）

我在最后一关尝试这个。该变量在顶点和片段着色器中都声明。

```
uniform sampler2D _GrabTexture;
varying vec4 v_Position; 
```

**顶点着色器：**

```
void main()
        {
            gl_Position = gl_ModelViewProjectionMatrix * gl_Vertex;
            v_Position = gl_ModelViewProjectionMatrix * gl_Vertex;

        } 
```

将每个模型顶点的屏幕坐标存储为可变的，以在片段着色器中使用。

**片段着色器：**

```
void main()
        {
            gl_FragColor = texture2D(_GrabTexture,vec2(v_Position)); 
        } 
```

现在使用存储的可变位置来访问 _GrabTexture 屏幕纹理。由于它是整个屏幕，我已经在屏幕坐标中的 v_Position 应该正确地获得正确的像素。

但结果是

![在此处输入图像描述](../Images/e716023e789d4d16060abd97c4094797.png)

如您所见，飞机的纹理“有点像”显示先前渲染的屏幕，但坐标不正确。如何修复它以使结果与第一张图像相同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T10:54:28.137

你想的太复杂了。OpenGL 会在内置变量的片段着色器中告诉您屏幕上的片段位置`gl_FragCoord`。

使用 GLSL-1.30 或更高版本`texelFetch`，您可以`gl_FragCoord`直接将其作为源坐标。或者您使用将 gl_FragCoord 转换为纹理空间坐标，请参阅[https://stackoverflow.com/a/5879551/524368](https://stackoverflow.com/a/5879551/524368)

# php - 自定义比较函数到 PHP 中的稳定排序

> ID：13527027
> 
> 赞同：0
> 
> 时间：2012-11-23T10:20:07.067
> 
> 标签：php, sorting

我有这样的输入：

```
array
   0 => 
      array
          'task_uid' => '10214' 
          'createdate' => '2012-04-18 09:47:40'
          'task_id' => '92966' 
   1 => 
      array
          'task_uid' => '10214' 
          'createdate' => '2012-04-18 09:47:40' 
          'task_id' => '92967' 
```

我必须通过 createdate 以稳定的方式对其进行排序。我创建了这个函数：

```
function compareTime($a, $b) {
    $a_timestamp = strtotime($a["createdate"]);
    $b_timestamp = strtotime($b["createdate"]);
    if ($a_timestamp > $b_timestamp)
        return -1;
    else if ($a_timestamp < $b_timestamp)
        return 1;
    else
        return 0;
    //return strcmp($a["createdate"], $b["createdate"]);
} 
```

和

```
usort($input, array( $this, "compareTime")); 
```

它应该从最旧到最新排序，但这是混合数据。此外，如果 datacreate 相同，则不要更改位置。但是如果我在 compareTime 中使用：

```
return strcmp($a["createdate"], $b["createdate"]); 
```

然后它从示例中更改元素（这对我来说是错误的）。你能给我答案我应该如何对输入进行排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:40:12.277

```
function cmp($a, $b)
{
    $a = strtotime($a['createdate']);
    $b = strtotime($b['createdate']);

    if ($a == $b) {
        return 0;
    }
    return ($a < $b) ? -1 : 1;
}

usort($input, "cmp");

print_r($input); 
```

**输出（从最旧到最新）**

```
Array
(
    [0] => Array
        (
            [task_uid] => 10214
            [createdate] => 2012-04-18 09:47:40
            [task_id] => 92967
        )

    [1] => Array
        (
            [task_uid] => 10214
            [createdate] => 2012-04-19 09:47:40
            [task_id] => 92966
        )

    [2] => Array
        (
            [task_uid] => 9999
            [createdate] => 2012-04-22 09:47:40
            [task_id] => 9999
        )

) 
```

**[键盘演示](http://codepad.org/IQZ9mvEi)**

* * *

如果你想在一个类中进行排序，例如使用类的方法进行比较，可以这样做：

```
class MyTest
{
    public function __construct()
    {
        $input = array(
           0 => 
              array(
                  'task_uid' => '10214',
                  'createdate' => '2012-04-19 09:47:40',
                  'task_id' => '92966'),
           1=>   array(
                  'task_uid' => '9999',
                  'createdate' => '2012-04-22 09:47:40',
                  'task_id' => '9999'),
           2 => 
              array(
                  'task_uid' => '10214' ,
                  'createdate' => '2012-04-18 09:47:40' ,
                  'task_id' => '92967' )
        );

        usort($input, array($this, "cmp"));

        print_r($input);
    }

    public function cmp($a, $b)
    {
        $a = strtotime($a['createdate']);
        $b = strtotime($b['createdate']);

        if ($a == $b) {
            return 0;
        }
        return ($a < $b) ? -1 : 1;
    }
}

$obj = new MyTest(); 
```

输出与第一个示例相同。

# viewstack - 使用切换按钮栏更改视图时视图堆栈未填充其子级

> ID：13527029
> 
> 赞同：2
> 
> 时间：2012-11-23T10:20:14.333
> 
> 标签：viewstack

我有一个视图堆栈，我有这个作为数据提供者`toggleButtonBar`。

当我运行我的应用程序时，我只能看到视图堆栈默认视图（零）。

如果我尝试通过单击来更改视图`toggleButtonBar`，则屏幕将为空。

如果我改变了，`viewStack.selectedIndex = 1;`那么我可以再次看到 index one 的屏幕；如果我尝试查看索引零的屏幕，则屏幕将为空。

我正在尝试分析这个问题，但无法这样做。帮帮我。

谢谢你。

# wpf - 如何在 WPF 中动态填充树视图以从数据库中获取值？

> ID：13527030
> 
> 赞同：0
> 
> 时间：2012-11-23T10:20:18.737
> 
> 标签：wpf, treeview

我想填充一棵树，从 WPF 中的数据库中获取父节点和节点。我的数据库结构如下； ![在此处输入图像描述](../Images/5199d83ca2f9454937dba5c8596e53ae.png)

这里的definitionID是节点的id，parentID是父节点的id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:07:13.700

您可以使用如下实体为您的数据库表建模：

```
public class Deficiency
{
    public int DeficiencyID { get; set; }
    public int ParentID { get; set; }
    //... OTHER PROPERTIES ...//
} 
```

然后看看[这个答案](https://stackoverflow.com/questions/3263289/grouping-data-in-wpf-treeview)。

编辑：您的带有树视图的 XAML 可以是这样的：

```
<!--Bind to Groups generated from codebehind 
    Every group have property Name and Items -->
<TreeView Name="treeview1" ItemsSource="{Binding Groups}" >
    <TreeView.ItemTemplate>
        <HierarchicalDataTemplate ItemsSource="{Binding Path=Items}">
            <!-- Here Bind to the name of the group => this is the Parent ID -->
            <TextBlock Text="{Binding Path=Name}" />
            <HierarchicalDataTemplate.ItemTemplate>
                <DataTemplate>
                    <StackPanel>
                    <!-- Here the data context is your class Deficiency, 
                         so bind to its properties-->
                        <TextBlock Text="{Binding Path=DeficiencyID}"/>
                        <!-- ... -->
                        <TextBlock Text="{Binding Path=OtherProperties}"/>
                        <!-- ... -->
                    </StackPanel>
                </DataTemplate>
            </HierarchicalDataTemplate.ItemTemplate>
        </HierarchicalDataTemplate>
    </TreeView.ItemTemplate>
</TreeView> 
```

你的代码隐藏应该是这样的：

```
List<Deficiency> myList = new List<Deficiency>();
// here load from DB //       
ICollectionView view = CollectionViewSource.GetDefaultView(myList);
view.GroupDescriptions.Add(new PropertyGroupDescription("ParentID"));
treeview1.DataContext = view; 
```

高温高压

# javascript - Java Script - 从字符串中提取数字

> ID：13527031
> 
> 赞同：1
> 
> 时间：2012-11-23T10:20:19.090
> 
> 标签：javascript

> **可能重复：**
> [如何使用 JavaScript 从数字 + 度量单位字符串中提取数字？](https://stackoverflow.com/questions/1849149/how-might-i-extract-the-number-from-a-number-unit-of-measure-string-using-java)

如何在JS中从这样的字符串中提取数字。字符串：“Some_text_123_text”-> 123

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T10:22:20.803

[**JSFiddle 演示**](http://jsfiddle.net/CGnUz/32/)

```
var s = "Some_text_123_text";
var index = s.match(/\d+/);
document.writeln(index);​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T10:25:57.453

尝试这个

```
var string = "Some_text_123_text";
var find = string.split("_");
for(var i = 0; i < find.length ; i ++){
 if(!isNaN(Number(find[i]))){
  var num = find[i];
 }
}

alert(num); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T10:28:07.483

试试这个工作[小提琴](http://jsfiddle.net/wXNDu/)

```
var str = "Some_text_123_text";
var patt1 = /[0-9]/g;
var arr= str.match(patt1);
var myval = arr.join(""); 
```

# php - Facebook 应用程序只能由管理员帐户访问

> ID：13527034
> 
> 赞同：0
> 
> 时间：2012-11-23T10:20:27.053
> 
> 标签：php, facebook

我用 PHP 开发了一个 Facebook 应用程序。它工作正常。

突然它停止为其他用户工作。当有人试图访问我的 Facebook 应用程序时，它会将我们带到[https://www.facebook.com/4oh4.php](https://www.facebook.com/4oh4.php)页面并给出错误“找不到您请求的页面”。

但同时，如果我登录并访问我的应用程序，那么它工作正常。我尝试了很多来更改 Facebook 设置，但对我没有任何效果。我的应用程序有三个管理员。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T10:24:03.723

检查`Sandbox Mode`基本设置。如果是`Enabled`，则没有管理员、开发人员或测试人员角色的用户无法访问以查看您的应用程序。

# ios5 - 时区更改时，IOS 5 上的周年日期会更改

> ID：13527035
> 
> 赞同：1
> 
> 时间：2012-11-23T10:20:27.970
> 
> 标签：ios5, ios6

当我将任何联系人添加到地址簿时，生日和周年日期会在时区更改时发生更改。但是周年纪念日变了！！！不是一个好兆头:)。

我检查了一些第三方应用程序，他们也有同样的问题。

但是当我用 FB 检查它的工作正常。

在ios6版本的设备上安装了FB应用程序。在设置中启用了 FB 的联系人同步。

当我更改时区时，从 FB 同步的联系人中的日期不会更改，但我从应用程序添加的内容会更改。

应该使用什么格式来写日期，这样它就不应该根据时区而改变。正如我现在看到的 Facebook 应用程序。

任何从 FB 同步到本地 AB 的联系人都无法编辑。这就是从 FB 添加的联系人的日期没有更改的原因吗？

提前致谢。沙

# javascript - MVC4发送一个xml字符串并在javascript中读取它使我的js函数未定义

> ID：13527042
> 
> 赞同：1
> 
> 时间：2012-11-23T10:20:56.143
> 
> 标签：javascript, xml, asp.net-mvc-4

我正在尝试通过发送 xml（不是那么大的〜30“屏幕尺寸线”）在 MVC4 视图中加载树视图。实际上，我将它作为一个简单的文本字符串填充到我的控制器中。没关系。

我在js中填充一个变量

```
function buildTree() {
       debugger
       var s_s = @ViewBag.xml;
        tree.setImagePath("../../Scripts/dhtmlxTree/imgs/csh_bluebooks/");
        tree.enableDragAndDrop(true);
        tree.setSkin("dhx_skyblue");
    } 
```

这会将我的 '<'、换行符 ... 更改为 &dl、&dt 等...但是在调试字符串 s_s 时看起来还不错。

问题是我在调用 buildTree() 的主 js 函数上的 javascript 中出现未定义错误，否则当我发表评论时该错误会消失

```
// var s_s = @ViewBag.xml; 
```

**我做了一些额外的故障排除 - 问题甚至不在视图中的 js 上，您在其中读取 viewbag.xml。实际上，一旦您在控制器中分配它，就会出现 js 错误。虽然它是一个大小相对适中的简单格式化字符串。** 请帮忙，非常感谢

好的 - 我认为我的问题确实与以字符串形式发送的换行符和新空间有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:24:59.620

我认为您可能只需要引用 XML：

```
var s_s = '@ViewBag.xml'; 
```

# javascript - 如何使用就地编辑标签到 HTML 表格

> ID：13527044
> 
> 赞同：1
> 
> 时间：2012-11-23T10:21:07.243
> 
> 标签：javascript, html, css, dom

我正在使用 YUI3 数据表和就地编辑（自己的实现），但这个问题似乎与任何就地编辑的表有关。

问题是这样的。当用户在某个输入字段上制表符时，他将被带到制表符顺序中的下一个可聚焦元素。如果表格是下一个顺序，用户会被带到标题，因为这些包含排序按钮。当最后一个标题离开时，焦点转移到表格之后的第一个输入字段。但是，当然，不会激活表中的就地编辑。

我想通过截取表格之前最后一个输入的 TAB 键来解决它（输入将标有特殊类），激活表格第一个单元格中的就地编辑并最终聚焦它。

我不喜欢我的方法的地方在于：

1.  要求我在表格之前标记最后一个输入。如果以后添加更多输入，我必须记住它。
2.  取决于表前最后一个输入与表之间的协作。

另一种解决方案是让表格探索 DOM 选项卡顺序（使用 tabIndex DOM 属性），以便自动定位最后一个输入。但这似乎太复杂了。

有没有更简单的方法，没有所描述的缺陷？

# interface - 耦合：使用原始类型、接口或具体对象作为参数？

> ID：13527046
> 
> 赞同：1
> 
> 时间：2012-11-23T10:21:10.897
> 
> 标签：interface, dependencies, coupling, oop

首先让我说，我对 OO 模式、实践、干净代码等方面的经验并不丰富。我实际上正在学习所有这些技术。

最松耦合的方式是使用原始类型来构造新对象或执行方法，但我认为这不切实际，对吗？因为它更容易出错。我可以放弃让我们说代表根本不存在的 Id 的整数。如果我要使用一个对象，我实际上知道它有有效的数据，否则该对象将不会被创建（异常）或处于我必须检查的无效状态。

[这篇文章](http://blog.sanaulla.info/2008/06/26/cohesion-and-coupling-two-oo-design-principles)说为此使用具体对象是邪恶的，我应该交出它们的接口（你们都知道，我猜）。对具体类型（而不是接口）的更改会导致依赖类型“崩溃”。在所有情况下都是这样吗？对于封闭的单一项目环境也是如此吗？我只会明白，如果接口 - 一旦编写 - 就无法触及并且永远不会再被修改/重构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T11:49:42.767

您应该在需要时使用所有东西。只有在有意义的情况下才使用原语。与具体类型相同。确实，与抽象“耦合”更好，但是在许多情况下，您不会拥有一个，也不需要一个。您可以从您正在使用的所有对象中提取接口，但如果您没有真正的理由这样做（多态性），那将毫无意义。

你必须思考。您可以开始使用具体类型，但随后您会发现您确实需要一个抽象而不是真正的具体类型（例如，如果您知道存储可以更改，那么抽象存储是一种非常常见的情况）。一个对象可以依赖于数据库抽象（抽象类或接口），而不是依赖于 Mysql 数据库对象，它允许您切换任何实现（Mysql、MMSql 甚至 NoSql）。但是，如果您正在编写一个仅使用 mysql 的小型应用程序，则只需直接使用具体类型即可。

您可能想要提取接口还有一个原因，那就是测试。当然，仅当具体类型将用作依赖项并且它具有足够复杂的行为时，才提取接口。如果依赖项只是一个简单的 DTO（数据传输对象），则不需要抽象它。

这些东西大部分都来自经验，但经验法则是从具体类型开始，然后在需要时将其抽象出来。如果一个对象已经实现了一个包含您想要的功能的接口，请直接使用该接口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T12:06:43.430

我想这个问题会引发很多问题。我会尽量保持简短：

> 我可以放弃让我们说代表根本不存在的 Id 的整数。

从我的角度来看，程序是代表您的问题域的（计算）模型（可以与物理学家或天文学家编写方程式来表示现象进行类比）。当您使用对象建模时，您所做的是使用某些特定规则创建该域的表示。因此，回到您的问题，您可以在概念上用整数表示什么是 ID，但随后您的问题域中将有一个未正确表示的概念（例如，因为存在无效 ID 的整数）。此外，除了概念问题之外，问题在于您不能向整数添加（并因此委托）新行为，如果可以（例如，在 Smalltalk 中，一切都是对象，您可以扩展任何类），那也是错误的从建模的角度来看。作为一般经验法则，当我必须在不应该有给定责任的对象中编写行为时，我认为模型缺乏抽象。在这种情况下，就像有一个`Util`带有类方法的类`isValidId`。

> 如果我要使用一个对象，我实际上知道它有有效的数据，否则该对象将不会被创建（异常）或处于我必须检查的无效状态。

同意 100%。我写了[几篇](http://research.quanbit.com/category/validators/)你可能会觉得有用的文章（免责声明：我在 Quanbit Research 工作）

> 这篇文章说为此使用具体对象是邪恶的，我应该交出它们的接口（你们都知道，我猜）。对具体类型（而不是接口）的更改会导致依赖类型“崩溃”。在所有情况下都是这样吗？

涉及对象、类型和接口的故事很长。总结一下，理想情况下，您应该针对接口而不是具体类进行编程，因为（理论上）您应该只关心给定对象（例如参数）实现一组具有预定义语义的消息。然而，如果你走这条路，在实践中你会发现一个类通常实现多个接口，并且让所有接口与类同步的簿记是令人望而却步的。我通常使用动态类型语言，所以在大多数情况下这对我来说不是问题，但如果我必须使用静态类型语言，当系统必须与项目外部的代码形式交互时，我会使用接口或在模块之间的 API 中。换句话说，我会尝试降低系统“边界”中的耦合。

> 对于封闭的单一项目环境也是如此吗？我只会明白，如果接口 - 一旦编写 - 就无法触及并且永远不会再被修改/重构。

我不得不在这里不同意。作为计算模型的程序反映了我们在问题域的给定时间点所知道的内容。因此，我们对它的工作越多，我们对它的了解就越多。编程涉及学习，当我们学习时，我们会更好地理解事物；因此我们的模型发生了变化。随着我们的模型发生变化，我们用来表示它们的元素也会发生变化（如类或接口）。随着时间的推移，你会发现你的模型变得更加健壮，概念上的变化会变慢，并且在某个时候你会拥有一个稳定的模型。但是变化是你应该期待的事情:)。

高温高压

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T13:36:38.333

我认为答案（通常是这样）是“视情况而定”。决策受以下因素影响：

1.  您正在使用哪些类型的对象？领域对象（表示业务领域中的概念）或服务（例如提供查找或保存操作）。

2.  您的应用程序有多大/复杂？

3.  您是否“拥有”所有正在使用的对象？您正在使用的对象是否可能会被您无法控制的其他人更改？

在复杂到足以证明[域模型](http://martinfowler.com/eaaCatalog/domainModel.html)的项目上，我喜欢使用以下设置：

1.  一个[数据访问层](http://en.wikipedia.org/wiki/Data_access_layer)，其中包含获取 id 并返回域对象的“查找器”服务对象，以及获取域对象的“保存”服务对象。

2.  包含域对象的域模型，这些域对象仅在其方法中采用其他域对象。

3.  接受 id的[服务层](http://martinfowler.com/eaaCatalog/serviceLayer.html)，使用数据访问层检索域对象，触发域模型中的域操作，然后使用数据访问层保存更改。

4.  一个或多个使用服务层的 UI 层，提供 id。

我将服务对象放在接口后面的数据访问层和服务层中，因为我希望在我的单元测试中可以轻松地模拟这些组件。除非我发现这样做有特定的好处，否则我通常不会为我的域对象制作接口。

最后，在 A 类对 B 类有具体引用的情况下，我看不出对 B 类的与 A 类使用的接口无关的部分的更改将如何破坏 A 类。

# javascript - javascript/gwt：将 Uint8Array 或 ArrayBuffer 转换为 ImageData 元素

> ID：13527049
> 
> 赞同：10
> 
> 时间：2012-11-23T10:21:27.450
> 
> 标签：javascript, html, gwt

我想获取一个 ArrayBuffer 或 Uint8Array 元素并将它们转换为 ImageData 元素，并最终转换为 Canvas 元素。

可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-06T17:51:53.880

在纯 javascript 中会变成这样：

```
var c=document.getElementById("myCanvas");
var ctx=c.getContext("2d");    
var imgData = ctx.createImageData(100,100);

var buffer = new ArrayBuffer(4*100*100);
var ubuf = new Uint8Array(buffer);
for (var i=0;i < ubuf.length; i+=4) {
    imgData.data[i]   = ubuf[i];   //red
    imgData.data[i+1] = ubuf[i+1]; //green
    imgData.data[i+2] = ubuf[i+2]; //blue
    imgData.data[i+3] = ubuf[i+3]; //alpha
}

ctx.putImageData(imgData,0,0); 
```

要在 GWT 中执行此操作，您需要将其包装在[JSNI 方法中](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-08T13:17:58.640

**2021年答案**

构造`ImageData`函数现在在大多数浏览器中都支持可选`Uint8ClampedArray`参数，因此无需`for()`像 rzymek 在 2013 年建议的那样在循环中复制值。

所以基于他的例子：

```
const buffer = ArrayBuffer(4 * 100 * 100)
const ui8ca = new Uint8ClampedArray(buffer);
const imageData = new ImageData(ui8ca, 100, 100);

const canvas = document.getElementById('myCanvas');
const ctx = canvas.getContext('2d');
ctx.putImageData(imageData, 0, 0); 
```

适用于除 Internet Explorer 和 Android Webview 之外的所有现代浏览器。

请参阅[https://developer.mozilla.org/en-US/docs/Web/API/ImageData/ImageData](https://developer.mozilla.org/en-US/docs/Web/API/ImageData/ImageData)

# rest - 当我发出 REST 请求时，服务器端到底发生了什么？

> ID：13527050
> 
> 赞同：0
> 
> 时间：2012-11-23T10:21:27.097
> 
> 标签：rest, request, server-side

我阅读了一些关于 REST 的内容，并认为我了解了基础知识。但我想知道当我在“RESTful”Web 应用程序上发出类似“http://www.acme.com/inventory/product/003”这样的请求时，服务器上到底发生了什么。服务器如何知道这应该是一个 REST 请求？由于这个 URL 没有任何文件扩展名，很明显我不会得到图片或 HTML 文档（编辑：虽然它也可以使用 REST 请求？！）。我将得到 XML 或 JSON 等格式的响应。

我不明白的是：

如果我有以下 URL “http://www.acme.com/inventory/product/003.html”，服务器将导航到文件夹“inventory/product”并将文件“003.html”发送到浏览器/客户。

但是当我有以下 URL “http://www.acme.com/inventory/product/003” 时，服务器到底是什么？它会调用一些从数据库返回产品 003 的方法吗？是否存在应执行的 URL 和方法的映射？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:34:16.720

服务器不关心这个。[REST](http://en.wikipedia.org/wiki/Representational_state_transfer)并不是什么神奇的**架构模式**，它通常是使用 HTTP 实现的，所以基本上服务器会收到常规的 HTTP 请求并发回由脚本/应用程序创建的数据。

**编辑**

一般来说，REST 定义**了**数据如何交换，但没有定义它是**什么**数据。在 REST 中，您通常可以期望使用 JSON 格式，但究竟会有什么，API 期望哪些字段以及返回什么由 API 本身定义（在这种情况下，您尝试查询的网站后面的人）

# ruby-on-rails - 使用 Formtastic 在 textarea 上的最大字符长度

> ID：13527051
> 
> 赞同：4
> 
> 时间：2012-11-23T10:21:29.530
> 
> 标签：ruby-on-rails, ruby, formtastic

我正在尝试使用 Formtastic 限制用户输入到 textarea 字段中的字符数量，但是找不到任何有关如何执行此操作的文档。HTML5 中的 Textarea 支持 maxlength

这是我的代码：

$ <%= f.input :about_me, :as => :text %>

谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T10:40:14.297

```
<%= f.input :about_me, :as => :text, :input_html => { :maxlength => 10 } %> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-09-23T11:52:31.453

```
<%= f.text_area :abc, :class => "form-control", id: "xyz", :maxlength => 200 %> 
```

# vi - vi:substitute——如何定义搜索对象

> ID：13527052
> 
> 赞同：0
> 
> 时间：2012-11-23T10:21:31.260
> 
> 标签：vi, substitution

在我的源代码中，它具有以下示例：

```
menu = add_menu_item ((char **)HW_KIND, 21);
.
.
if(get_idx_by_str ((char **)HW_KIND, prev->column_section, 21, 0) < get_idx_by_str ((char **)HW_KIND, curr->column_section, 21, 0))
.
.
fprintf(fp, "# %d floor\n%d@%d\n\n", i, get_idx_by_str ((char **)HW_KIND, section->column_section, 21, 0), stop->stop_landing);
.
.
add_text_to_gtk_text_buffer (text_buffer, iter, NULL, -99, -99, "??????????Ե -- %s\n", HW_KIND[steel_col_data.sec_idx]); 
```

我想找到所有具有精确键的句子`HW_KIND`then 也`21`然后更改`21`为`20`. 例如，上面的前三个句子匹配搜索条件，但上面的最后一个不匹配。

如果在 Linux 的终端中，`grep "\<HW_KIND\>" foo.c | grep 21`将查找所有出现。如何在**Vi**编辑器中定义替换命令？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:33:05.673

您必须同时搜索 HW_KIND 和 21，同时保留介于两者之间的所有内容。为此，您使用大括号`\(`和`\)`在搜索文本中定义一个组，然后在替换中使用该组`\1`。

```
:%s/\(HW_KIND.*\)21/\120/ 
```

这种替换也可以在命令行上使用`sed`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T10:34:14.330

您可以使用以下正则表达式：

```
:%s/\(.\{-}HW_KIND.\{-}\)21\(.\{-}\)/\120\2/gc 
```

使用`c`选项，您可以确认每次更换。试试上面的正则表达式，看看它会根据需要替换文本。它将替换 4 个匹配项。

`\(`并`\)`用于捕获组和`\{-}`非贪婪匹配。

# mysql - PHPMYADMIN 上的 MYSQL - 创建表关系

> ID：13527053
> 
> 赞同：1
> 
> 时间：2012-11-23T10:21:33.320
> 
> 标签：mysql, phpmyadmin, relationship, create-table

我想用 MYSQL PHPMYADMIN 创建一个表关系。但没有约束。

这是我所做的：

```
CREATE TABLE runs (
code_teachers int(8),
code_department int(8),
primary key(code_teachers, code_department),
foreign key(code_teachers)references teachers,
foreign key(code_department)references department
); 
```

因此，如您所见，我正在尝试在教师创建表的 code_teachers 和部门创建表的 code_department 之间创建名为运行的表关系。

但是由于一些未知的原因，当我进入设计者时，它只是没有建立关系。因此，如果有人知道我的问题的答案，欢迎您告诉我，因为我在这里发疯了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:27:51.843

你试过了吗

```
FOREIGN KEY ( columnName ) REFERENCES tableName(columnName) 
```

您的查询中似乎缺少 tableName。外键需要引用其他表中的列。

[维基百科](http://en.wikipedia.org/wiki/Foreign_key)说：

*   `In the context of relational databases, a foreign key is a referential constraint between two tables. A foreign key is a field in a relational table that matches a candidate key of another table. The foreign key can be used to cross-reference tables.`

[mySQL.com](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)说：

*   `Foreign key relationships involve a parent table that holds the central data values, and a child table with identical values pointing back to its parent. The FOREIGN KEY clause is specified in the child table.`

# java - 如何从 Iterable/Collection 创建 TreeMultimap？

> ID：13527055
> 
> 赞同：10
> 
> 时间：2012-11-23T10:21:36.363
> 
> 标签：java, guava

我正在尝试修剪 a `TreeMultimap`，并`TreeMultimap`返回相同的结构（但已修剪）。例如，我有不同的新闻提供者返回无序的新闻。我需要按日期对新闻进行排序，并按最近日期在排序的多图中维护这种排序。然后我需要能够返回最新的 X 新闻。每个日期，可能有很多新闻。

```
TreeMultimap<Date, String> latestNews = TreeMultimap.create(Ordering.natural().reverse(), Ordering.natural()); 
```

因为没有修剪或大小`TreeMultimap`，我已经设法返回`Iterable`并限制结果，但是如何`TreeMultimap`从`Iterable`?

本质上，这个想法是：

*   创建新的排序 TreeMultimap
*   输入尽可能多的条目（
*   修剪到 X 并返回地图

另外，如果我想实现类似分页的功能，那么不同的数据集呢？

例如，这是返回最后 5 条新闻的方法

```
Map.Entry<Date, String> lastFiveNews = Iterables.limit(latestNews.entries(), 5) 
```

但是如何从结果中创建一个新的 Multimap？

最简单的方法就像迭代和创建一个新的一样简单`TreeMultimap`：

```
TreeMultimap<Date, String> lastFiveNews = TreeMultimap.create(Ordering.natural().reverse(), Ordering.natural());

for (Map.Entry<Date, String> dateStringEntry : Iterables.limit(latestNews.entries(), 5)) {
    lastFiveNews.put(dateStringEntry.getKey(), dateStringEntry.getValue());
}
latestNews.clear();
latestNews.putAll(lastFiveNews); 
```

我想知道是否有一个实际的实用程序类/构造函数可以直接做到这一点。这种使用 Iterables 的方法是我能想到的唯一方法。可能还有其他方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T16:00:33.453

你已经在做的方式正是你应该做的。

您可能对相关的[https://code.google.com/p/guava-libraries/issues/detail?id=320](https://code.google.com/p/guava-libraries/issues/detail?id=320)上的讨论感兴趣。（实际上，这似乎是这些方法的实际有效用例。）

# c++ - 使用boost调用成员函数作为线程函数

> ID：13527057
> 
> 赞同：0
> 
> 时间：2012-11-23T10:21:39.540
> 
> 标签：c++, multithreading, boost

我尝试使用以下语句将成员函数调用为线程函数

```
boost::thread getURInHashThread(boost::bind(&Worker::run, this)); 
```

在哪里

```
Worker 
```

是班级和

```
run() 
```

是方法。我在同一个类的另一个成员函数中有这个语句，`Worker`所以我给出了那个`this`。

但是，我得到了错误

```
error:bind is not a member of boost. 
```

我无法弄清楚。请帮忙。提前致谢 ：）。

```
#include <boost/thread/thread.hpp>
#include <iostream>

class Test
{
 public:
  void Main() { boost::thread t(&Test::run, this); }
  void run() { while(1){  std::cout << "some functionality here"; } }
};

int main()
{
   Test test;
   test.Main();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:26:33.410

boost 线程在内部使用绑定，因此：

```
#include <boost/thread/thread.hpp>
#include <iostream>

class Test
{
public:
  void Main() { std::cout << "hello" << std::endl; }
};

int main()
{
  Test test;
  boost::thread t(&Test::Main, test);
  t.join();
} 
```

# selenium - Selenium 网络驱动程序，C#

> ID：13527059
> 
> 赞同：1
> 
> 时间：2012-11-23T10:21:49.420
> 
> 标签：selenium, element

我是硒和网络驱动程序的新手。我的问题很简单。抱歉，如果您发现这个问题非常基本。我正在使用带有 selenium 2 的 Visual Studio 2010 Ultimate，并在浏览器 IE 9 中使用语言 C#。我尝试执行以下简单代码。

```
IWebDriver driver = new InternetExplorerDriver(@"D:\IEDriverServer\");
driver.Navigate().GoToUrl("http://www.google.com");

System.Console.WriteLine("Page title is: " + driver.Title);

Console.WriteLine(driver.Title);
Console.WriteLine("Waiting to find element");

IWebElement returnedValue = driver.FindElement(By.Name("q"));

Console.WriteLine("Element Found"); 
```

上面的代码抛出了`Unable to find the element with name==...` 我认为它可能是浏览器加载问题。浏览器没有完全加载，因此导致它显示错误。然后我在 driver.navigate 行之后添加了下面的代码，让它等到浏览器完全加载。

```
WebDriverWait wait = new WebDriverWait(driver, TimeSpan.FromSeconds(20));
wait.Until(ExpectedConditions.TitleIs("Google")); 
```

奇怪的是，它再次忽略了这个 webdriverwait 行并直接跳转到 " `wait.until`" 行，导致显示 element not found 错误。我应该怎么办。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T11:56:23.297

您在定义等待时几乎是正确的......但是在 C# 中，有不同的方法可以启用 Webdriver 等到元素可见直到页面加载为止。

```
 WebDriverWait wait = new WebDriverWait(driver, TimeSpan.FromSeconds(20));
        IWebElement myDynamicElement = wait.Until<IWebElement>((d) =>
        {
            return d.FindElement(By.Name("q"));
        }); 
```

希望这会有所帮助......所有最好的伙伴:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T11:26:43.927

尝试使用 设置隐式等待`driver.Manage().Timeouts().ImplicitlyWait(TimeSpan.FromSeconds(10));`。

根据[Selenium 文档](http://seleniumhq.org/docs/04_webdriver_advanced.html)，默认值为 0 - 也就是说，如果没有立即找到该元素，Selenium 会抛出“无法找到具有...的元素”错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T11:34:26.980

改变`wait.Until(ExpectedConditions.TitleIs("Google"));`

至`wait.Until(ExpectedConditions.visibilityOfElementLocated(By.name("q")))`

可能会出现页面标题已更改为google但未完全加载完整页面的情况

# iphone - TableView 中的自定义警报显示通过？

> ID：13527060
> 
> 赞同：0
> 
> 时间：2012-11-23T10:21:56.517
> 
> 标签：iphone, xcode, ios6, tableview, uialertview

不确定如何启动此线程，因为我以前从未见过这种情况？

正在加载...

![在此处输入图像描述](../Images/447c79515420bc5986268a9198ec8911.png)

搜索前...

![在此处输入图像描述](../Images/492c168ad776494ad7b1ee1b75cb1324.png)

搜索后...

![在此处输入图像描述](../Images/27737c23d0bb1e327e906d1398501e77.png)

我有一个带有自定义加载警报的 TableView，当我添加一个 SearchBar 时，自定义加载警报显示来自 TableView 的行，以前有没有人见过这个，关于如何修复的任何想法？

多谢你们。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
if (tableView == self.searchDisplayController.searchResultsTableView)

{
    return [self.searchResults count];
}
else
{
    return [self.itemsToDisplay count];    }
}

- (void)filterContentForSearchText:(NSString*)searchText scope:(NSString*)scope {

[self.searchResults removeAllObjects];

for (MWFeedItem* item in itemsToDisplay) {
    NSComparisonResult result = [[item.title stringByConvertingHTMLToPlainText]   compare:searchText
                                           options:    (NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch)
                                             range:NSMakeRange(0, [searchText length])];

    if (result == NSOrderedSame) {

        [self.searchResults addObject:item];

    }
}       
}

-(BOOL)searchDisplayController:(UISearchDisplayController *)controller
shouldReloadTableForSearchString:(NSString *)searchString
{    
[self filterContentForSearchText:searchString
                           scope:[[self.searchDisplayController.searchBar   scopeButtonTitles]
                                  objectAtIndex:[self.searchDisplayController.searchBar
                                                 selectedScopeButtonIndex]]];

return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:59:10.740

为此，您可以添加以下代码

```
[self.view bringSubviewToFront:activityIndicatoriew];
[self.view sendSubviewToFront:tableView]; 
```

这将在表格视图上方设置活动指示器位置.. 祝你好运...... :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-18T21:05:10.447

为什么要打`[super viewDidLoad]`两次电话？

```
> - (void)viewDidLoad
> {
> 
>     [super viewDidLoad];
> 
>     // show in the status bar that network activity is starting
>     [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
>     [[LoadingHUD loadingHUD] showInView:self.view]; 
```

* * *

参考您的[文件](http://snippi.com/s/cg4u4bb)。删除第 37 和 38 行：

```
>     // Do any additional setup after loading the view, typically from a nib.
>     [super viewDidLoad]; 
```

# entity-framework - 存储过程和实体框架

> ID：13527063
> 
> 赞同：0
> 
> 时间：2012-11-23T10:22:08.220
> 
> 标签：entity-framework, stored-procedures

**实体框架或存储过程/函数**

1.  哪个更好？
2.  在哪些情况下使用存储过程或实体框架会更好？
3.  一种技术的性能是否优于另一种？

我已经使用这两种方法来检索和操作数据，并没有真正的偏好。我认为存储过程/函数可以让我们更清晰地分离关注点。但使用 C# 开发查询和操作数据的功能似乎更容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T22:07:14.000

1.  哪个更好？

    *   如果存储过程返回大数据结果和/或您的连接速度较慢 > EF
    *   如果你真的很喜欢 SQL 并且读过一点关于 CURSORS 的使用，并且一直喜欢它 > SP
2.  在哪些情况下使用存储过程或实体框架会更好？

    *   如果您需要在短时间内完成复杂的代码 > EF
    *   如果您需要处理数据库中的 biiiig 数据、查看记录、进行批量更新、使用触发器 > SP
3.  一种技术的性能是否优于另一种？

    *   您在 EF 中获得 1000 条记录，您将在内存中拥有 1000 个对象，但是，如何使用代码是这里的主要焦点。我使用 SP 进行了一些大数据更新，它真的非常快，因为它在数据库上，不涉及 TCP，没有套接字，没有流量.. 只是读取/更新。但是，你会浪费很多时间来编写好的 SQL 代码......

另一件事要考虑。如果您使用 EF，您必须更喜欢将所有业务逻辑放在一个地方，使用部分类或扩展..您的数据库上不会有这么多逻辑。

# iphone - 滚动多次 UITableView 时出现意外的 EXC_BAD_ACCESS

> ID：13527065
> 
> 赞同：0
> 
> 时间：2012-11-23T10:22:10.357
> 
> 标签：iphone, objective-c, ios, ipad

大家好，我有一个大问题。我正在开发一个 iPad 应用程序。在此，我在 UITableView 中重用了表格视图单元格。早些时候我没有重复使用这些单元格，它正在工作，但速度很慢。为了提高性能，我现在使用了单元格，它非常快，但是当我滚动多次或快速滚动时，*EXC_BAD_ACCESS* 出现以下消息：

```
-[CALayer retain]: message sent to deallocated instance 0x5aba7b0 
```

我找到了正在发布的实际 IBOutlet 。它是 UIImageView 。在此之前，同样的问题是单元格中的 UIButton。我用保留属性声明了它，然后它被解决了。现在，如果我声明 imageview 保留它可以工作，但是..prob 现在是根据单元格奇数或偶数的位置我需要 2 种类型的 imageViews。现在它在..continue 3,2,4..cells 中显示相同的图像视图未修复。我正在努力解决问题，请帮助遵循代码：另一件事我加载了 3 种类型的单元格，因此我将 cellIdientifier 存储在缺陷对象中

```
#import <Foundation/Foundation.h>
#import "BaseTableDelegate.h"

@interface AssignResponsibilityTableDelegate : BaseTableDelegate {

//Assign Responsibility Table cell IBOutlet
IBOutlet UITableViewCell *assignResponsibilityTableCustomCell;
IBOutlet UIButton *assignResCellViewButton;
IBOutlet UIButton *assignResCellNoteButton;
IBOutlet UILabel *assignREsCellDetailLabel;
IBOutlet UIImageView *assignResImageView;
IBOutlet UILabel *assignREsCellElementlabel;

//Trade
IBOutlet UIView *tradeSpinnerBackgroundView;    
IBOutlet UITextView *tradeTextView;    
IBOutlet UITextView *tradeSelectedNameTextView;    
IBOutlet UIButton *tradeSpinnerButton;

//SubContractor
IBOutlet UIView *subcontractorSpinnerView;    
IBOutlet UITextView *subContractorTextView;
IBOutlet UITextView *subContractorSelectedNameTextView;    
IBOutlet UIButton *subContractorSpinnerButton;

UIImage* greenLenseImage;
UIImage* lenceImage;
UIImage* noteExistImage;
UIImage* noteNotExistImage;

NSMutableArray* assignDefects;

//    int cellHeight;
}

@property(nonatomic, retain)UITextView *subContractorSelectedNameTextView;
@property(nonatomic, retain)UITextView *tradeSelectedNameTextView;
@property(nonatomic, retain)UIButton *tradeSpinnerButton;
@property(nonatomic, retain)UIView *tradeSpinnerBackgroundView;
@property(nonatomic, retain)UIView *subcontractorSpinnerView;

//Assign Responsibility Table Cell Click Action
- (IBAction)tradeContractorButtonClicked:(id)sender;
- (IBAction)subContractorButtonClicked:(id)sender;

@end 
```

* * *

以下是 cellForRowAtIndexPath：

* * *

```
- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    Defect* defect=nil;

    if(defects && [defects count]>0){

        defect=[defects objectAtIndex:indexPath.row];
    }

    UITableViewCell *cell=nil;
    cell = [tableView dequeueReusableCellWithIdentifier:defect.cellIdientifier];
    NSLog(@"%@",cell.reuseIdentifier);

    int row = [indexPath row];

    if (cell == nil) {

        NSLog(@"+++++++++++++++++++++++++++888Button=%@",assignResCellViewButton);
        NSLog(@"Button=%@",subContractorSpinnerButton);
        NSLog(@"Button=%@",tradeSpinnerButton);
        NSLog(@"Button=%@",assignResCellNoteButton);

   NSLog(@"assignResponsibilityTableCustomCell=%@",assignResponsibilityTableCustomCell);
         NSLog(@"assignResCellViewButton=%@",assignResCellViewButton);
         NSLog(@"assignResCellNoteButton=%@",assignResCellNoteButton);
         NSLog(@"tradeSpinnerButton=%@",tradeSpinnerButton);
         NSLog(@"subContractorSpinnerButton=%@",subContractorSpinnerButton);
         NSLog(@"assignREsCellElementlabel=%@",assignREsCellElementlabel);
         NSLog(@"assignREsCellDetailLabel=%@",assignREsCellDetailLabel);
         NSLog(@"assignResImageView=%@",assignResImageView);
         NSLog(@"tradeTextView=%@",tradeTextView);
         NSLog(@"subContractorTextView=%@",subContractorTextView);
         NSLog(@"tradeSelectedNameTextView=%@",tradeSelectedNameTextView);

       NSLog(@"subContractorSelectedNameTextView=%@",subContractorSelectedNameTextView);
         NSLog(@"tradeSpinnerBackgroundView=%@",tradeSpinnerBackgroundView);
         NSLog(@"subcontractorSpinnerView=%@",subcontractorSpinnerView);
                NSLog(@"++++++++++++++++++++999Button=%@",statusButton);

        //Load Nib as per Text Length
        [self getCellNibName:defect];

        //[[NSBundle mainBundle] loadNibNamed:@"AssignResponsibilityCellItem" owner:self options:nil];
        cell=assignResponsibilityTableCustomCell;
        assignResCellViewButton.tag=VIEW_BUTTON_TAG;
        assignResCellNoteButton.tag=NOTE_BUTTON_TAG;
        tradeSpinnerButton.tag=TRADE_SPINNER_BUTTON_TAG;
        subContractorSpinnerButton.tag=SUBCONTRACTOR_BUTTON_TAG;
        assignREsCellElementlabel.tag=ELEMENT_LABEL_TAG;
        assignREsCellDetailLabel.tag=DETAIL_LABEL_TAG;
        assignResImageView.tag=BG_IMAGEVIEW_TAG;
        tradeTextView.tag=TRADE_TEXTVIEW_TAG;
        subContractorTextView.tag=SUBCONTRACTOR_TEXTVIEW_TAG;
        tradeSelectedNameTextView.tag=TRADE_NAME_TEXTVIEW_TAG;
        subContractorSelectedNameTextView.tag=SUBCONTRACTOR_NAME_TEXTVIEW_TAG;
        tradeSpinnerBackgroundView.tag=133;
        subcontractorSpinnerView.tag=134;
    }

    //SetTag

    assignREsCellElementlabel=(UILabel*)[cell viewWithTag:ELEMENT_LABEL_TAG];
    assignResCellViewButton=(UIButton*)[cell viewWithTag:VIEW_BUTTON_TAG];
    assignResCellNoteButton=(UIButton*)[cell viewWithTag:NOTE_BUTTON_TAG];
    assignREsCellDetailLabel=(UILabel*)[cell viewWithTag:DETAIL_LABEL_TAG];
    tradeSpinnerButton=(UIButton*)[cell viewWithTag:TRADE_SPINNER_BUTTON_TAG];
    subContractorSpinnerButton=(UIButton*)[cell viewWithTag:SUBCONTRACTOR_BUTTON_TAG];
    subContractorTextView=(UITextView*)[cell viewWithTag:SUBCONTRACTOR_TEXTVIEW_TAG];
    assignResImageView=(UIImageView*)[cell viewWithTag:BG_IMAGEVIEW_TAG];
    tradeTextView=(UITextView*)[cell viewWithTag:TRADE_TEXTVIEW_TAG];
    subContractorSelectedNameTextView=(UITextView*)[cell viewWithTag:SUBCONTRACTOR_NAME_TEXTVIEW_TAG];
    tradeSelectedNameTextView=(UITextView*)[cell viewWithTag:TRADE_NAME_TEXTVIEW_TAG];
    tradeSpinnerBackgroundView=(UITextView*)[cell viewWithTag:133];
    subcontractorSpinnerView=(UITextView*)[cell viewWithTag:134];
    //Set Text
    assignREsCellElementlabel.text=defect.defectElement.name;
    assignREsCellDetailLabel.text=defect.defectItem.name;
    //set viewButton image on the basis of defectPhoto availability

    assignResCellViewButton.titleLabel.text=[NSString stringWithFormat:@"%d",indexPath.row];
    assignResCellNoteButton.titleLabel.text=[NSString stringWithFormat:@"%d",indexPath.row];
    if(defect.defectPhoto && defect.defectPhoto.location && [StringUtil isValid:defect.defectPhoto.location]){

        [assignResCellViewButton setImage:greenLenseImage forState:UIControlStateNormal];

    }else{
        [assignResCellViewButton setImage:lenceImage forState:UIControlStateNormal];
    }

    //set note button image on the basis of comment availability

    if (defect.hasComments){
        [assignResCellNoteButton setImage:noteExistImage forState:UIControlStateNormal];

    } else {
        [assignResCellNoteButton setImage:noteNotExistImage forState:UIControlStateNormal];
    }

    defect.tradeTextView=tradeTextView;

    defect.subContractorTextView=subContractorTextView;

    //Show Trade
    [self decideTradeToBePlaced:defect :row];

    //Show SubContractor
    [self decideSubContractorToBePlaced:defect :row];
    tradeSpinnerButton.titleLabel.text=[NSString stringWithFormat:@"%d",indexPath.row];
    subContractorSpinnerButton.titleLabel.text=[NSString stringWithFormat:@"%d",indexPath.row];
    //subContractorSpinnerButton.tag=indexPath.row;
    //Set Cell Background(alternate white and gray)

   // defect.tableCell= assignResponsibilityTableCustomCell;

    if(indexPath.row % 2 ==0){

        [assignResImageView setBackgroundColor:[UIColor whiteColor]];

    }else{

        [assignResImageView setBackgroundColor:[UIColor lightGrayColor]];
    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T22:10:32.410

您遇到了内存分配/释放问题。

使用 Instruments 分析您的应用并选择“Zombies”乐器。这将使您能够准确地确定这种内存滥用发生的位置。

此外，Instruments 将允许您查看相关对象的完整保留/释放周期——通常，一旦您获得了这些数据，就很容易追踪这些对象。

如果您仍需要更多帮助，请务必观看 WWDC 2012 会议 409 上的“学习工具”。

# ruby-on-rails-3 - 设计路由，我收到“出了点问题”错误

> ID：13527067
> 
> 赞同：0
> 
> 时间：2012-11-23T10:22:13.897
> 
> 标签：ruby-on-rails-3, routing, devise

我是 Rails 新手，我无法通过设计来确定 Rails 3 中的路由

当我路由到用户页面时，我得到了这个丑陋的错误： [http ://s9.postimage.org/nlyxhlk5b/Devise_routing.png](http://s9.postimage.org/nlyxhlk5b/Devise_routing.png)

在我的路线中

```
#Resources for users

devise_for :users, :controllers => { :registrations => "registrations" }

resource :users do
  get 'welcome'
end 
```

这些是我的用户路线

**更新**

```
 root        /                                               members#welcome
           new_user_session GET    /users/sign_in(.:format)                        devise/sessions#new
               user_session POST   /users/sign_in(.:format)                        devise/sessions#create
       destroy_user_session DELETE /users/sign_out(.:format)                       devise/sessions#destroy
              user_password POST   /users/password(.:format)                       devise/passwords#create
          new_user_password GET    /users/password/new(.:format)                   devise/passwords#new
         edit_user_password GET    /users/password/edit(.:format)                  devise/passwords#edit
                            PUT    /users/password(.:format)                       devise/passwords#update
   cancel_user_registration GET    /users/cancel(.:format)                         devise/registrations#cancel
          user_registration POST   /users(.:format)                                devise/registrations#create
      new_user_registration GET    /users/sign_up(.:format)                        devise/registrations#new
     edit_user_registration GET    /users/edit(.:format)                           devise/registrations#edit
                            PUT    /users(.:format)                                devise/registrations#update
                            DELETE /users(.:format)                                devise/registrations#destroy 
```

我应该没有 2 个用户资源吗？我相信他们可能会以某种方式发生冲突，或者我只是错过了什么？

**更新**

我忘了提到我正在覆盖默认的设计注册控制器

```
 class RegistrationsController < Devise::RegistrationsController
  protected

  # Redirect to welcome page after a successful registration
  def after_sign_up_path_for(resource)
    '/users/welcome'
  end
 end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T20:04:49.747

删除用户控制器 删除注册控制器

消除

```
resource :users do
get 'welcome'
end 
```

将此添加到您的路线

```
# Directing the user after login
 authenticated :user do
root :to => 'recipes#index' 
```

结尾

改变

```
devise_for :users, :controllers => { :registrations => "registrations" } 
```

到

```
devise_for :users 
```

让我知道情况如何

# git - Git 克隆与 Git 创建存储库

> ID：13527068
> 
> 赞同：4
> 
> 时间：2012-11-23T10:22:16.207
> 
> 标签：git, github, clone, git-clone, review-board

和有什么**区别**

**1.**选择**Git克隆？**

**2.**选择**Git Create repository here ..** 然后从存储库中**拉**取？

如图所示。

![Git 仓库创建](../Images/ecb4c946223560d524cb74691702cd3f.png)

**编辑 ：**

实际上我们将使用**Review Board**作为我们的**代码审查工具**。该工具需要创建**GIT Clone** (1) 方法来创建 GIT。但目前我们正在使用 2 选项作为我们的开发。因此，必须从根本上 (在所见的背后）这两种方法的差异。**那是什么 ？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T14:19:08.133

Git Clone 只是从指定的 URL 克隆现有的 repo（其他人已经工作）。另一方面，创建一个新的 repo 意味着从头开始一个新的 repo。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T10:31:36.733

在 Windows 环境中说话：

1.  是复制一个包含内容的文件夹
2.  是创建一个Folter，然后复制内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T10:42:54.240

几乎没有任何区别：存储库中的文件将是相同的，历史将是相同的。存储库配置可能会略有不同——我认为克隆设置了一些默认的分支映射，而只是拉动可能不会默认建立这些链接。

# google-apps-script - 尝试使用谷歌脚本访问网站数据

> ID：13527069
> 
> 赞同：0
> 
> 时间：2012-11-23T10:22:16.020
> 
> 标签：google-apps-script, google-sites

我试图通过谷歌脚本和 Oauth 操场获取相同的 URL .....在操场上它工作正常并给出状态 200 OK..但是使用谷歌脚本，它给出了无效的参数错误......给我一些建议

URL='https://sites.google.com/feeds/content/domainname/siteName/-/template|-template'

代码 ：

```
 var base = 'https://sites.google.com/feeds/';
     var fetchArgs = googleOAuth_('sites', base);
     fetchArgs.method = 'GET';

 var url=https://sites.google.com/feeds/content/domainname/siteName/-/template|-template'
       var resultOfSiteWebPages=UrlFetchApp.fetch(url,fetchArgs) 
```

在 UrlFetch 中给出错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T10:29:16.830

这很可能是编码问题。oAuth 游乐场可能会为您编码网址，`UrlFetch`但不会。尝试这个：

```
var resultOfSiteWebPages = UrlFetchApp.fetch(encodeURI(url), fetchArgs); 
```

# java - 按值排序列表

> ID：13527070
> 
> 赞同：5
> 
> 时间：2012-11-23T10:22:16.343
> 
> 标签：java, list, sorting

我有一个`List<String>`和一个`List<Integer>`。两者都有特定的顺序（它们是链接的）。`List<String>`包含名称`List<Integer>`及其值。

有没有办法`List<Integer>`按大小排序，但也可以更改排序，`List<String>`以便值和名称保持链接？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-23T10:24:24.400

你需要`java.util.TreeMap<Integer,String>`. 这根据其键的自然顺序或`Comparator`在地图创建时提供的排序，具体取决于`constructor`所使用的。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-23T10:24:49.423

您应该使用 a`List<NameAndValue>`而不是两个列表（并找到比*NameAndValue*更好的名称，这将反映这些数据实际代表的内容）。Java 是一种面向对象的语言。使用对象。这就是它们的用途：包含相关的数据，并通过方法和封装提供行为。

一旦你有了这个类，你就可以按名称、值或两者对列表进行排序，如果需要，添加一个额外的字段不会有问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T10:27:34.847

**-**您可以使用`java.util.TreeMap<Integer, String>`which 实现`SortedMap`. 它**按 key 的自然顺序排序**。

**-**你也可以用`java.util.Comparator<T>`它来整理它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-23T10:37:55.470

从*干净的代码*的角度来看，如果它们**属于一起**，并且这个结构可以在其他地方**重用**，你应该用它们创建一个类，并让它实现 Comparable ：

```
public SomeClass implements Comparable<SomeClass> {

    private Integer id;
    private String name;

    private Whatever elseIsNeededHere;

    /* getters'n'setters*/

    // ******** THOU SHALT NEVER FORGET THY FRIENDS, EQUALS AND HASHCODE, OR ELSE THEY TURN TO BE THY FOES ********
    @Override
    public boolean equals(Object other) { //do what it takes }

    @Override
    public int hashCode() { //do what it takes! }

    /* actually implement Comparable */
    @Override 
    public int compareTo(SomeClass o) {
        //null check, and other bloat left out for sake of brevity
        return this.id.compareTo(o.getId());
    } 
```

}

然后你可以有一个包含属于一起的列表，并对其进行**非常**好的排序：

```
ArrayList<SomeClass> myList = getMyData();
Collections.sort(myList); 
```

并且`myList`列表实例按照您想要的方式排序。

如果您想要不同的比较方法，您可以使用其他方式，即使用[Comparators](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)：

```
Collections.sort(myList,new Comparator<SomeClass>() { 
    public int compare(SomeClass a, SomeClass b) { // do what it takes }
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-17T10:36:00.033

你可以试试这个：

创建一个自定义 Comprator 类，如：

```
import java.util.Comparator;

/**
 * Created by Maddy Sharma on 7/17/2015.
 * Contains sorting logic to sort Dialogs by its date(long)
 */
public class DateDialogComparator implements Comparator<UserChatDialog>{

// lhs.getLastMessageDateSent() is the long value

    @Override
    public int compare(UserChatDialog lhs, UserChatDialog rhs) {
    // This line will work in java 7 and Android API Level 19
    //    return Long.compare(lhs.getLastMessageDateSent(), rhs.getLastMessageDateSent());

                              'OR'

        if(lhs.getLastMessageDateSent()>rhs.getLastMessageDateSent())
            return -1;
        else if(lhs.getLastMessageDateSent()<rhs.getLastMessageDateSent())
            return +1;
        return 0;
    }
} 
```

从活动或片段中调用它，例如：

```
ArrayList<UserChatDialog> myList = userChatDialogList;
Collections.sort(myList, new DateDialogComparator());
Log.i("List after sorting is:", "" + userChatDialogList); 
```

# c# - 如何正确构造 C# 嵌套类以接收复杂的 JSON

> ID：13527072
> 
> 赞同：0
> 
> 时间：2012-11-23T10:22:17.253
> 
> 标签：c#, json, class

我将 JSON 对象传递回 C# aspx 页面 web 方法。

我的 JavaScript 看起来像：

```
 return jsonItem = {
                     id: id,
                     title:  title,
                     registrationPage: {
                        registration: registration                              
                     }                                                  
                   } 
```

我将此项目传递给 aspx web 方法：

```
$.ajax({
          type: "POST",
          url: "SaveXML.aspx/SaveAs",
          data: JSON.stringify({ jsonItem : jsonItem }),
          contentType: "application/json; charset=utf-8",                
          dataType: "json",
          success: function (msg, textStatus) {
                alert(textStatus);
          },
    }); 
```

**JSON 有效负载发送正常**。

在 aspx 页面中，我有以下课程：

```
public class JSONItem
{
    public string Id { get; set; }
    public string Title { get; set; }  
    public RegistrationPage RegistrationPage { get; set; }           
}

public class RegistrationPage
{
     public string Registration { get; set; }
}

[WebMethod]
public static Policy Save(Policy policy)
{
} 
```

当我尝试构建它时，我得到一个代码分析错误，这是有道理的：

> CA1034：Microsoft.Design：不要嵌套类型“SaveXML.RegistrationPage”。或者，更改其可访问性，使其在外部不可见。

**如果我忽略该错误，则代码确实有效。我确实尝试更改修饰符，但未填充注册页面对象。**

如何使代码正常工作并遵守上述错误？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:01:29.083

通过 WebMethod 的本地化，看起来您已经嵌套在`JSONItem`类中。确切地说，您的代码如下所示：`RegistrationPage``Page`

```
public partial class MyPage : System.Web.UI.Page
{
    ...

    public class JSONItem
    {
        public string Id { get; set; }
        public string Title { get; set; }  
        public RegistrationPage RegistrationPage { get; set; }           
    }

    public class RegistrationPage
    {
         public string Registration { get; set; }
    }

    [WebMethod]
    public static Policy Save(Policy policy)
    {
    }

    ...
} 
```

您应该将这些课程移出`Page`课程（当然它们可以保留在同一个文件中）：

```
public class JSONItem
{
    public string Id { get; set; }
    public string Title { get; set; }  
    public RegistrationPage RegistrationPage { get; set; }           
}

public class RegistrationPage
{
    public string Registration { get; set; }
}

public partial class MyPage : System.Web.UI.Page
{
    ...

    [WebMethod]
    public static Policy Save(Policy policy)
    {
    }

    ...
} 
```

# c# - c# Windows Store - 页面之间的服务

> ID：13527079
> 
> 赞同：0
> 
> 时间：2012-11-23T10:22:56.973
> 
> 标签：c#, service, windows-runtime, windows-store

我正在构建一个应该始终运行的应用程序。每天我都应该在线检查许可证是否仍然有效。因此，例如每天 10 点，应用程序应该尝试连接到 Web 服务器并从中检索一些信息。现在我想知道是否有任何方法可以通过页面实例化通过应用程序运行并在我的应用程序内部运行的服务。那可能吗？有关如何管理此问题的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T08:29:15.583

是的，`BackgroundTask`可以由应用程序注册，以便在暂停时安排。它当然不能迭代多个应用程序。我不确定迭代页面的确切含义，但您可以从服务器检索一些信息并在本地存储或更新磁贴。

# visual-studio-2010 - 在 Visual Studio 2012 中编辑和编译 7-zip

> ID：13527084
> 
> 赞同：3
> 
> 时间：2012-11-23T10:23:02.600
> 
> 标签：visual-studio-2010, visual-studio-2012, compilation, 7zip

似乎许多应用程序的源代码对 Visual Studio 2010 或 2012 或任何基于 GUI 的东西都不友好，可能我的知识有问题。

**程序和版本：**

Windows 7 旗舰版 X64 SP1

7zip 源版本：9.20（推荐）（删除“-OPT:NOWIN98”）

Microsoft Visual Studio 11 (2012) 版本：4.5.50709

Microsoft Visual Studio 10 (2010) 版本：4.5.50709 SP1Rel

**问题：**

现在，问题是我尝试将“Build.mak”文件加载到任一程序中，它询问我是否要更新文件以便它们可以与应用程序一起使用。我经历了它的无选项过程，我得到了以下错误。我已经从“Build.mak”中删除了“-OPT:NOWIN98”，但它并没有改变产生的错误或其他任何东西。

* * *

概述 项目路径 错误 警告 消息 Build Build.mak 2 0 1 ..\CPP\Build.mak 1 0 0

解决方案和项目

*   构建消息：Build.mak：结束标记“xs:choice”与开始标记“xs:sequence”不匹配。Build.mak：项目升级失败。显示 1 条附加信息

*   ..\CPP\Build.mak 消息：在 XML 解析过程中出现以下错误：文件：F:\7zip\CPP\Build.mak 行：1 列：1 错误消息：文档语法不正确。文件“F:\7zip\CPP\Build.mak”未能加载。

* * *

这两个程序都是一样的，所以我猜要么需要完成一些前置步骤，要么应用程序永远不会喜欢在最新的 Visual Studios 中进行编辑。有没有办法解决这个问题，以便正确加载文件并编译应用程序？

# websphere-portal - 如何在 websphere 门户中添加博客 portlet？

> ID：13527085
> 
> 赞同：0
> 
> 时间：2012-11-23T10:23:02.690
> 
> 标签：websphere-portal

如何将博客功能添加到 websphere 门户应用程序中？Webspeher 服务器版本为 5.0。Portlet 应用程序版本是 5.1。

在这方面指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T17:32:08.333

我知道 Portal 版本 7 带有一个博客 portlet，但我不确定 Portal 5。如果是，那么您应该能够轻松地将该 portlet 添加到任何页面。如果没有，那么您将需要获得一个实现所需功能的 portlet。

这个任务一般来说应该是非常基础的，所以我首先建议阅读 Portal 的文档。此链接可能与您的直接问题最相关，但我建议您通过阅读信息中心的更多部分来更加熟悉该平台。

[http://publib.boulder.ibm.com/infocenter/wpdoc/v510/topic/com.ibm.wp.ent.doc/wps/adctinsp.html](http://publib.boulder.ibm.com/infocenter/wpdoc/v510/topic/com.ibm.wp.ent.doc/wps/adctinsp.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T20:49:02.187

您正在使用一个非常旧且过时的 WebSphere Portal 版本，所以我的第一个建议是升级到版本 7 或（最好）8。这样做您将能够利用 WCM 支持的新博客功能门户网站。

但是，升级并不总是一种选择。考虑到我会说您最好的选择是编写自己的基于 portlet 的博客系统，或者使用现有的博客系统（有大量的开源变体）并使用简单的 IFRAME portlet 将它们链接到门户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T01:12:10.687

您应该查看[此处提供的 Portlet 目录](https://greenhouse.lotus.com/catalog/ "目录")

# c++ - 在编译 C++ 时，如何将 .a 文件制作为 .so？

> ID：13527088
> 
> 赞同：0
> 
> 时间：2012-11-23T10:23:08.983
> 
> 标签：c++, makefile

> **可能重复：**
> [将静态库转换为共享库（从 libsome.a 创建 libsome.so）：我的符号在哪里？](https://stackoverflow.com/questions/2193944/convert-a-static-library-to-a-shared-library-create-libsome-so-from-libsome-a)

在使用 Cmakefile 编译 C++ 时，如何从 .a 静态库文件中创建动态库 .so 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T10:51:56.797

如果您正在构建库，那么您正在使用 CMake（正如我从您的问题中猜测的那样），它的定义如下：

```
add_library(name-of-library
    source1.cpp
    source2.cpp
) 
```

您可以在库名称后添加要构建的库类型。它可以是`STATIC`或`SHARED`。所以如果你想构建一个共享库（`.so`），那么上面的应该是这样转换的：

```
add_library(name-of-library SHARED
    source1.cpp
    source2.cpp
) 
```

希望这可以帮助。

# nullpointerexception - Hybris 管理员 - “本地化类型”失败并出现 NullPointerException

> ID：13527094
> 
> 赞同：0
> 
> 时间：2012-11-23T10:23:30.757
> 
> 标签：nullpointerexception, hybris

在我的 Hybris 管理工具 (http://localhost:9001/admin) 中，当我运行命令“更新运行 hybris 多通道套件”并仅选择“本地化类型”选项时，我收到以下错误：

```
11:19:31,146 [hybrisHTTP5] INFO  [Initialization] Localizing types ...
11:19:32,481 [hybrisHTTP5] INFO  [EJBTools] pk 8796118941778 does no longer exist.
java.lang.NullPointerException
        at de.hybris.platform.jalo.type.CollectionType.isAssignableFrom(CollectionType.java:545)
        at de.hybris.platform.util.localization.TypeLocalization.resortTypes(TypeLocalization.java:520)
        at de.hybris.platform.util.localization.TypeLocalization.localizeTypes(TypeLocalization.java:177)
        at de.hybris.platform.util.localization.TypeLocalization.localizeTypes(TypeLocalization.java:143)
        at de.hybris.platform.core.Initialization.doInitialize(Initialization.java:374)
        at org.apache.jsp.init_005finitialize_jsp._jspService(init_005finitialize_jsp.java:476)
        at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:377)
        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:366)
        at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
        at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:378)
        at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:378)
        at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:378)
        at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:378)
        at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:11
9) 
```

有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T14:00:50.597

由于先前记录为“INFO”的内容而发生错误：

```
INFO  [EJBTools] pk 8796118941778 does no longer exist. 
```

要解决这个问题： 1\. 对 hybris 数据库运行以下查询。

```
SELECT *
  FROM collectiontypes
  WHERE elementtypepk NOT IN (SELECT pk FROM composedtypes
                              UNION ALL
                              SELECT pk FROM ATOMICTYPES); 
```

1.  返回的行引用不再存在的类型，并且在某种程度上是以前升级的产物。
2.  删除这些行应该可以解决问题。
3.  更新 Hybris。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T17:58:13.613

您需要在创建项目类型时运行“ant all”，然后重新启动服务器并更新系统以勾选本地化项目类型。在这一切之前，您是否使用 Hmc 来本地化您创建的类型？您需要导出类型，将内容复制粘贴到 *locales-en.properties 中。

# ajax - nodejs 中的服务器端存储（用于 Dojo）

> ID：13527100
> 
> 赞同：0
> 
> 时间：2012-11-23T10:23:44.977
> 
> 标签：ajax, json, node.js, rest, dojo

我正在写这个很棒的应用程序。这是我第一次尝试编写一个仅在另一侧使用 Restful 存储的单页完全 AJAX 应用程序。

现在...我编写了一些代码，到目前为止，我只需要使用 GET 进行简单的查询。然而，为了保持一切整洁，我确保我有一个“协议”：每个请求都有一个格式为：

`{↵ "ack": "ERROR", "message": "required filter not passed",↵ "errors": { "name": "parameter required"↵ } }`

万一出现错误（在这种情况下，我*要求*用户设置过滤器）。

现在......如果 GET*确实*有效，我还有一个“数据”字段，因此结果如下所示：

`{↵ "ack": "OK", "data": { ... } }`

现在我遇到了 Dojo 的问题，因为例如 dgrid 期望返回对象的“根”（可以这么说）中的数据，而不是“数据”键。

可能的解决方案：

1）破解我的 JsonRest 文件（它已经有点不同了，我添加了超时等，它毕竟是一个样板），因此，对于“查询”，它实际上使用 then() 操作结果并返回原始数据

2) 更改我的协议，如果 HTTP 状态为 200，并且由于没有错误消息或任何要给出的内容，它只是返回数据

3）以某种方式说服所有小部件在查询后使用返回的 JSON 的“数据”部分中的内容（这似乎*不太*可能）。

我应该走哪条路？一方面，我喜欢协议始终遵循相同格式的事实（尽管我承认它没用）。另一方面，更改 JsonRest 似乎很容易。但是再一次，第三方 API 可能不喜欢从返回对象的“数据”键中提取数据......

在这里做什么是明智的？

谢谢！

默克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:33:43.627

我还没有尝试过，但文档表明如果 JsonRest 查询生成 HTTP 错误代码，xhr 错误对象将一直传递到 dgrid，并且是与*dgrid-error*事件关联的数据之一。

[dgrid 核心组件](https://github.com/SitePen/dgrid/wiki/Core-Components)
[dgrid 问题提到查询错误](https://github.com/SitePen/dgrid/issues/259)

如果它工作正常，那么我会选择解决方案 2，因为它需要对标准组件的修改最少，并且只使用提供的 API。

# c# - 如何获取richTextBox中特定文本的行？

> ID：13527105
> 
> 赞同：0
> 
> 时间：2012-11-23T10:23:57.107
> 
> 标签：c#, winforms

我有一个richTextbox，里面有一些文本。目前，“橙色”位于第 3 行......所以我怎样才能得到“橙色”行。我的代码不起作用=（

![在此处输入图像描述](../Images/cbd93044b1ca5ee8719c716ad009afb0.png)

我的 C# 代码：

```
private void button1_Click(object sender, EventArgs e)
    {
        string orange = "orange";
        int a = richTextBox1.Text.IndexOf(orange);
        var b = richTextBox1.Lines.ElementAt(a);

        textBox1.Text = b.ToString();

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T10:31:47.003

怎么样

```
private void button1_Click(object sender, EventArgs e)
{
    string orange = "orange";

    textBox1.Text = richTextBox1.GetLineFromCharIndex(
      richTextBox1.Find(orange)
    );
} 
```

参考[RichTextBox.GetLineFromCharIndex(int)](http://msdn.microsoft.com/de-de/library/system.windows.forms.richtextbox.getlinefromcharindex.aspx)和[RichTextBox.Find(string)的文档](http://msdn.microsoft.com/de-de/library/hfcsf75k.aspx)

基本上`Find(string)`返回文本中字符串开头的索引（或者`-1`如果没有找到字符串），这个索引被传递给`GetLineFromCharIndex(int)`它反过来检索指定索引的行号。
您可能必须处理未找到您的字符串并`-1`从`Find(string)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T10:32:18.157

您可能需要做一些事情来处理给定文本的多行，但它应该可以工作。

```
private void button1_Click(object sender, EventArgs e)
{
    string orange = "orange";

    foreach (string line in richTexBox1.Lines)
        if (line.Contains(orange))
            textBox1.Text = line.ToString();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T10:33:07.730

```
private void button1_Click(object sender, EventArgs e)
{
    string orange = "orange";
    stringp[] lines = richTextBox1.Lines;
    foreach(string line in lines)
    {
    int a = line.IndexOf(orange);
    if(a >0)
    {
      var b = line.ElementAt(a);

      textBox1.Text = b.ToString();
    }

} 
```

希望有帮助

# javascript - 从字符串中排序日期，而不使用 jQuery 或 Javascript 中的任何“日期”函数

> ID：13527111
> 
> 赞同：-3
> 
> 时间：2012-11-23T10:24:14.417
> 
> 标签：javascript, jquery

如何在**不使用任何 jQuery“日期”函数或方法的情况下从字符串中按日期排序？**

可以说我有这样的事情：

```
<ul>
    <li class="article"><a href="#" class="">15/02/1966</a></li>
    <li class="article"><a href="#" class="">17/07/2003</a></li>
    <li class="article"><a href="#" class="">11/12/2007</a></li>
    <li class="article"><a href="#" class="">04/07/1951</a></li>
</ul> 
```

如何将它们从小到大排序？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T10:29:02.763

您仍然可以使用字母比较，您只需要将日期反转为`YYYYMMDD`：

```
$ul = $("ul"); // or whatever selector you used
$ul.children().sort(function(a, b) {
    var ta = $(a).text().split("/").reverse().join();
    var tb = $(b).text().split("/").reverse().join();
    return (ta>tb) - (tb>ta);
}).appendTo($ul); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T10:26:37.337

像这样：

```
<ul>
    <li class="article"><a href="#" class="">04/07/1951</a></li>
    <li class="article"><a href="#" class="">15/02/1966</a></li>
    <li class="article"><a href="#" class="">17/07/2003</a></li>
    <li class="article"><a href="#" class="">11/12/2007</a></li>
</ul> 
```

奖励：甚至不必使用香草 JS

# android - 通知添加我自己的声音

> ID：13527113
> 
> 赞同：0
> 
> 时间：2012-11-23T10:24:18.493
> 
> 标签：android, android-notifications

我正在向我的应用程序添加一个 notificationCompat，它工作正常，但现在我想在通知中添加我自己的声音，所以，我读到的是：

```
.setSound(Uri sound); 
```

但是，我无法获取uri，我该怎么做？我的项目中的 .wav 文件应该放在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T10:35:02.683

要添加您自己的通知声音，请按照此步骤操作。在您的服务类中编辑。

```
PendingIntent pendingIntent= PendingIntent.getActivity(getBaseContext(),0, myIntent,Intent.FLAG_ACTIVITY_NEW_TASK);
                // myNotification.defaults |= Notification.DEFAULT_SOUND;
                 myNotification.sound = Uri.parse("android.resource://com.adroid.alarm"+R.raw.airtel_latest); 
```

将声音文件放在原始文件夹中。使用您的包名称编辑 com.adroid.alarm。

# c# - 无法更改 DataGridViewComboBox 值

> ID：13527116
> 
> 赞同：1
> 
> 时间：2012-11-23T10:24:29.873
> 
> 标签：c#, winforms, datagridview

我有一个从 LINQ 查询中填充的 DataGridView。其中一列是 FK，因此我添加了一个 ComboBox 列来显示该字段，该字段显示正常。

我遇到的问题是它不会让我更改 ComboBox 的值，因为它就像它被锁定一样。我检查了 DGV 和 Column 的 ReadOnly 属性，两者都是错误的。

任何人都可以阐明我所缺少的东西吗？

填充 DGV 的代码如下：

```
 private void PopulateForm()
    {
        DBDataContext db = new DBDataContext();

        var eventTypes =
            from evt in db.EVENT_TYPEs
                .Where(a => a.Omit == false)
                .OrderBy(a => a.EventType)
            select new
            {
                EventTypeID = evt.EventTypeID,
                EventType = evt.EventType,
                UpdateToStatusID = evt.UpdateToStatusID,
                AttachmentAllowedYn = evt.AttachmentAllowedYn,
                AttachmentRequiredYn = evt.AttachmentRequiredYn,
                CommentRequiredYn = evt.CommentRequiredYn
            };

        var statuses =
            from sts in db.STATUS
                .Where(a => a.Omit == false)
            select new
            {
                StatusID = sts.StatusID,
                Status = sts.TechreqStatus
            };

        DataGridView dgv = this.dgvEventTypes;
        DataGridViewColumn col;

        dgv.AutoGenerateColumns = false;
        col = dgv.Columns[dgv.Columns.Add("EventTypeID", "EventTypeID")];
        col.DataPropertyName = "EventTypeID";

        col = dgv.Columns[dgv.Columns.Add("EventType", "Event Type")];
        col.DataPropertyName = "EventType";

        DataGridViewComboBoxColumn comboCol = new DataGridViewComboBoxColumn();
        comboCol.Name = "UpdateToStatusID";
        comboCol.HeaderText = "Update To Status";
        comboCol.DataPropertyName = "UpdateToStatusID";
        comboCol.DataSource = statuses;
        comboCol.ValueMember = "StatusID";
        comboCol.DisplayMember = "Status";
        dgv.Columns.Add(comboCol);

        col = dgv.Columns[dgv.Columns.Add("AttachmentAllowedYn", "Attachments Allowed Yn")];
        col.DataPropertyName = "AttachmentAllowedYn";

        col = dgv.Columns[dgv.Columns.Add("AttachmentRequiredYn", "Attachment Required Yn")];
        col.DataPropertyName = "AttachmentRequiredYn";

        col = dgv.Columns[dgv.Columns.Add("CommentRequiredYn", "Comment Required Yn")];
        col.DataPropertyName = "CommentRequiredYn";

        dgv.DataSource = eventTypes;

        db.Dispose();
    } 
```

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T14:55:12.240

我相信这是因为您使用的是匿名类型。在您的情况下，您可以使用原始类型（evt 和 sts 的类型）

```
var eventTypes = from evt in db.EVENT_TYPEs where !evt.Omit order by evt.EventType
                 select evt

var statuses = from sts in db.STATUS where !sts.Omit
               select sts 
```

***或者***

创建一个 POCO 对象作为视图模型

```
var eventTypes = from evt in db.EVENT_TYPEs where !evt.Omit order by evt.EventType
                 select new EventTypesObject() {EventTypeID = evt.EventTypeID, ...}

var statuses = from sts in db.STATUS where !sts.Omit
               select new StatusObject() {StatusID = sts.StatusID, Status = sts.TechreqStatus} 
```

如果需要双向绑定，这将更容易实现 INotifyPropertyChanging 和 INotifyPropertyChanged。

# magento - 获取属性标签（url 标识符） - Magento

> ID：13527121
> 
> 赞同：0
> 
> 时间：2012-11-23T10:24:41.497
> 
> 标签：magento, attributes, label

在产品页面上，我需要当前制造商的标签文本。

我知道如何使用此代码示例获取 ID 和文本：

```
$_product = Mage::getModel('catalog/product')->load(PRODUCT_ID);

/** Get manufacturer name*/
    $manufacturerName = $_product->getAttributeText('manufacturer');

/** Get manufacturer id*/
$manufacturerId = $_product->getManufacturer(); 
```

我怎样才能得到标签？

示例：
制造商 = Emporio Armani
id = 36
标签（网址标识符）= **emporioarmani**

我需要标签（网址标识符）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:31:14.070

这存在于 EAV 配置领域。了解这一点很重要，因为它是了解用于检索属性信息的特定于**catalog_product**的便捷方法的先决条件。

虽然属性可以由`attribute_code`+唯一标识`entity_type_id`，但可以通过`eav/config`模型检索任何属性的所有元信息：

```
$attribute = Mage::getSingleton('eav/config')->getAttribute(
    Mage_Catalog_Model_Product::ENTITY,
    'manufacturer'
); 
```

这是实体属性的主要表示。从这个实例中，可以检索到各种信息——包括给定商店的正确前端标签：

```
echo $attribute->getStoreLabel();
//or $attribute->getStoreLabel([store id]); 
```

# javascript - d3.js - 需要帮助调试 Chrome、Safari 和 Firefox 中的差异

> ID：13527125
> 
> 赞同：1
> 
> 时间：2012-11-23T10:24:53.640
> 
> 标签：javascript, d3.js

我正在试验这个[d3 演示](http://enjalot.github.com/intro-d3/costofliving/)，但我无法调试为什么我在 Chrome 与 Safari/FireFox 中遇到不同的行为。如果我运行下面的**完整代码**，它可以在 Chrome 中运行，但不能在 Safari/Firefox 中运行。我似乎已将问题隔离到以下几点：

如果我改变这一行：

```
var circles = chart.select("#points").selectAll("circle") 
```

对此：

```
var circles = chart.selectAll("circle") 
```

它适用于 Safari/Firefox/Chrome，但我想了解发生了什么以及为什么下面的代码不起作用。任何见解将不胜感激。

**完整代码**

```
 <svg>
  <g id="chart">
   <g id="bg">
   </g>
   <g id="countries">
   </g>
   <g id="points">
   </g>
  </g>
 </svg>

  <script type="text/javascript">

  d3.json("costofliving.json", function(col) {

    var cx = 200;
    var cy = 132;

    var cw = 400;
    var ch = 400;

    var svg = d3.select("svg");
    var nticks = 14;

    var price_min = 0;
    var price_max = d3.max(col, function(d) {return d.price});

    var rent_min = 0;
    var rent_max = d3.max(col, function(d) {return d.rent});

    var price_scale = d3.scale.linear()
      .domain([price_min, price_max])
      .range([ch, 0]);
    var rent_scale = d3.scale.linear()
      .domain([rent_min, rent_max])
      .range([0, cw]);

    var price_layout = d3.layout.histogram()
      .value(function(d) { return d.price })
      .range([0, price_max])
      .bins(nticks);

    var rent_layout = d3.layout.histogram()
     .value(function(d) { return d.rent })
     .range([0, rent_max])
     .bins(nticks);

   var chart = svg.append("g")
    .attr("transform", "translate(" + [cx, cy] + ")");

  chart.append("g")
   .attr("id", "countries")
   .style("opacity", 0);

  chart.append("g")
   .attr("id", "points")

  var circles = chart.select("#points").selectAll("circle")
   .data(col);

  circles.enter()
   .append("circle")

  circles.attr({
    r: 6,
    cx: function(d,i) {
    return rent_scale(d.rent);
   },
    cy: function(d,i) {
    return price_scale(d.price);
   }
  })  
 });
 </script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T16:33:54.290

您需要为Firefox中的任何元素设置一个`width`and 。根据[W3C Spec](http://www.w3.org/TR/SVG/struct.html#SVGElementWidthAttribute)，svg 元素将使用“100%”作为默认值，但我的 Firefox 17（可能还有其他浏览器）可能还没有这样实现它。`height``svg`

在代码中设置一些绝对值时，它会按预期工作。

```
<svg width="600" height="600"> 
```

# iphone - 添加带有按钮的 UIView 并使其透明并在该 UIVIew 后面启用触摸视图

> ID：13527129
> 
> 赞同：0
> 
> 时间：2012-11-23T10:25:09.283
> 
> 标签：iphone, objective-c, ios, xcode

我在视图上动态添加图像，在同一个视图上我有 3 个按钮。但是当我添加图像时，它们会显示在这些按钮上方，我可以将它们发送回去，但是我有多个图像，我在这些图像上应用了手势，所以当我单击一个图像时，它会出现在前面，这样我就可以与之交互（移动、旋转）。

所以我做了什么，我在 mainView 上添加了图像，我在 childView 上添加了按钮并使其透明。我可以看到按钮后面的图像，但无法与它们交互。

我用这条线让它透明我认为它不是透明的好方法

```
ButtonsView.backgroundColor = [UIColor clearColor]; 
```

希望你们都知道我想做什么。

![在此处输入图像描述](../Images/8859dd9b9ac67247be526c84cec04500.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:31:54.193

嘿，伙伴，而不是添加子视图，只需在同一视图上添加此按钮并清除背景颜色，然后在此波纹管方法中尝试此..

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    [touch locationInView:yourView];
else if([touch.view isKindOfClass:[UIImageView class]])
    {
        UIImageView *tempImage=(UIImageView *) touch.view;
        [yourView bringSubviewToFront:tempImage];
        [yourView bringSubviewToFront:yourButtons];/// set superview as a buttons..
    }
} 
```

我希望这对你有帮助..

# ios - NSFetchedResultsController 和 NSFetchedResultsControllerDelegate 需要澄清

> ID：13527133
> 
> 赞同：1
> 
> 时间：2012-11-23T10:25:28.643
> 
> 标签：ios, uitableview, core-data, synchronization, nsfetchedresultscontroller

在 SO 中有很多关于`NSFetchedResultsController`和委托的问题/回复。有时代表会开火，有时不会。而且由于 Core Data 是相当复杂的论点，如果不花大量时间在上面，很难理解发生了什么。此外，文件说有几个问题，但没有列出。

> 在各种 iOS 版本中，NSFetchedResultsController 存在几个已知问题和行为变化。

因此，我需要对此类的行为进行一些说明。特别是，从文档中可以看出以下内容：

> 因此，控制器有效地具有三种操作模式，由它是否具有委托以及是否设置了缓存文件名来确定。
> 
> **无跟踪：**委托设置为零。控制器只是提供对数据的访问，就像执行获取时一样。
> 
> **仅内存跟踪：**委托为非 nil，文件缓存名称设置为 nil。控制器监视其结果集中的对象并更新部分和排序信息以响应相关更改。
> 
> **完全持久跟踪：**委托和文件缓存名称非零。控制器监视其结果集中的对象并更新部分和排序信息以响应相关更改。控制器维护其计算结果的持久缓存。

我正在开发一个非常复杂的应用程序，我正在利用`NSFetchedResultsController`从商店中检索数据并将它们显示在表格中。显示的托管对象有一个`syncStatus`布尔变量来验证它们是否已与外部服务同步。`syncStatus`变量不显示在单元格中，显示不同的信息（例如文本值）。换句话说，`syncStatus`不作为错误被解雇。

在表中，通过`NSFetchedResultsController`，我显示了唯一未同步的元素（布尔值设置为`NO`）。

```
- (NSFetchedResultsController*)fetchedResultsController
{
    if(_fetchedResultsController)
        return _fetchedResultsController;

    NSManagedObjectContext* mainContext = [self managedObjectContext];

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    [fetchRequest setEntity:[NSEntityDescription entityForName:@"LocalEntity" inManagedObjectContext:mainContext]];
    [fetchRequest setPredicate:[NSPredicate predicateWithFormat:@"syncStatus == %@", [NSNumber numberWithBool:NO]]];
    [fetchRequest setFetchBatchSize:10];

    // sort descriptor here...

    _fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:mainContext sectionNameKeyPath:nil cacheName:nil];
    _fetchedResultsController.delegate = self;

    return _fetchedResultsController;
} 
```

用户可以选择她/他想要同步的元素，后台线程将所选元素发送到服务，对于这些，它还将`syncStatus`变量更改为`YES`.

操作完成后，由于我设置`NSFecthedResultsControllerDelegate`并注册`NSManagedObjectContextDidSaveNotification`（**我还在主线程中通过通知合并更改。我能够看到通知包含具有正确更改的对象**），我希望表格是更新（`syncStatus`设置为的对象`YES`不会显示）。

说了这么多，问题如下。

基于文档，由于我使用**仅内存跟踪**选项，因此缺少更新是否是由于`isSyncStatus`未在内存中加载但仍然是错误的事实？

你能建议我正确的方向吗？

先感谢您。

**附言**

`NSFetchedResultsControllerDelegate`方法正确执行。仅在主线程中执行相同操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T18:40:29.633

您是否正在实施`NSFetchedResultsControllerDelegate`删除单元格的方法？

```
- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller {

    [self.tableView beginUpdates];    
}

- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type newIndexPath:(NSIndexPath *)newIndexPath {

    UITableView *tableView = self.tableView;

    switch(type) {
        case NSFetchedResultsChangeDelete:

            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];    
            break;
    }    
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller {

    [self.tableView endUpdates];    
} 
```

# android - AudioTrack、SoundPool 或 MediaPlayer 我应该使用哪个？

> ID：13527134
> 
> 赞同：36
> 
> 时间：2012-11-23T10:25:30.147
> 
> 标签：android, audio, media-player, audiotrack

我需要播放多个持续时间不同的音频文件，比如 5 到 30 秒。我想为右/左声道独立设置音量，并应用效果，如混响或失真。那么，我应该使用哪个 API？

另外，我在 AudioTrack API 上找不到太多文档。你知道我在哪里可以找到例子吗？谢谢。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-08-31T12:41:24.983

声音池实际上是音频混合器。它只能播放短片，无论它们是编码为 ogg 还是 mp3 还是未压缩。声音池总是将它们存储在未压缩的内存中，并且您必须知道限制是 1 MB。如果您的剪辑在内存中太大，声音池将静音，您会发现以下错误：“AudioFlinger 无法创建轨道。状态：-12” 媒体播放器播放流并实时解码。所以它可以播放更长的剪辑，但需要处理器能力。

所以媒体播放器更适合背景音乐，而声音池更适合短音频效果（点击、爆炸、声音循环）。此外，声音池可以同时播放更多片段，并具有音量和速度控制。它还可以播放循环。

请注意：如果剪辑未完全加载和解码，则无法播放声音池中的音乐。所以你必须使用 OnLoadCompleteListener (Android 10 或以上) 来检查它。如果您在解码之前尝试播放声音，声音池将被静音。

媒体播放器不会遇到这些问题。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2020-05-29T07:49:31.447

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-08-27T18:37:16.050

除了其他答案的建议之外，MediaPlayer 和 SoundPool 之间的一个区别是，在 MediaPlayer 中，当声音剪辑已经在播放时，您无法播放它（该功能在游戏中尤其有用）。MediaPlayer 需要剪辑完全完成才能再次播放。我认为这些信息是在官方网站上提供的。

但是，SoundPool 没有这样的问题，而且我注意到 SoundPool 仅在调用时播放音频（我有时注意到使用 MediaPlayer 时有轻微延迟）。

我认为这（部分）是人们说 SoundPool 更适合游戏等短声音的原因。希望这可以帮助：）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-23T10:58:30.507

MediaPlayer 不支持为多通道设置音量。

我认为 SoundPool 是这里唯一适合您需求的东西。

编辑：是的，您需要一个 SoundPool，请阅读： [https ://blog.csdn.net/chen_cheng_fly/article/details/7357350](https://blog.csdn.net/chen_cheng_fly/article/details/7357350)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-18T06:02:46.230

还有一件事要补充的是，所有其他答案都完全错过了。在 MedialPlayer 中，您可以获得媒体完成事件，而在 SoundPool 中没有像完成事件那样的东西。您必须自己应用逻辑。

# c# - WebClient 的多个任务超时

> ID：13527138
> 
> 赞同：0
> 
> 时间：2012-11-23T10:25:41.293
> 
> 标签：c#, download, task, webclient

我使用thise代码下载文件：

```
public delegate void ReportProgerssDelegate(int progerss);

public class TestFileDownloader
{
    public ReportProgerssDelegate ReportProgerss;

    public void startHTTPDownload(string urlToReadFileFrom, string filePathToWriteFileTo)
    {
        Uri _url = new Uri(urlToReadFileFrom);

        System.Net.HttpWebRequest _request = (System.Net.HttpWebRequest)System.Net.WebRequest.Create(_url);
        System.Net.HttpWebResponse _response = (System.Net.HttpWebResponse)_request.GetResponse();

        Int64 _downloadedFileSize = _response.ContentLength;
        Int64 _totalNumberOfReadedBytes = 0;

        using (System.Net.WebClient _webClient = new System.Net.WebClient())
        {
            using (System.IO.Stream _streamRemote = _webClient.OpenRead(new Uri(urlToReadFileFrom)))
            {
                using (Stream _streamLocal = new FileStream(filePathToWriteFileTo, FileMode.Create, FileAccess.Write, FileShare.None))
                {
                    int _numberOfReadedBytes = 0;
                    byte[] _byteBuffer = new byte[1024];

                    while ((_numberOfReadedBytes = _streamRemote.Read(_byteBuffer, 0, _byteBuffer.Length)) > 0)
                    {
                        _streamLocal.Write(_byteBuffer, 0, _numberOfReadedBytes);
                        _totalNumberOfReadedBytes += _numberOfReadedBytes;

                        reportProgress(_totalNumberOfReadedBytes, _downloadedFileSize);
                    }
                    _streamLocal.Close();
                }
                _streamRemote.Close();
            }
        }
        reportProgress(100, 100);
    }

    private void reportProgress(long totalNumberOfReadedBytes, long downloadedFileSize)
    {
        double _index = (double)(totalNumberOfReadedBytes);
        double _total = (double)downloadedFileSize;
        double _progress = (_index / _total);
        int _progressPercentage = (int)(_progress * 100);

        if (ReportProgerss != null)
            ReportProgerss(_progressPercentage);
    }
} 
```

当我将它作为一项任务启动时，它运行良好。

```
 TestFileDownloader _fd1 = new TestFileDownloader();
        _fd1.ReportProgerss = reportProgress;

        Task _task = new Task(
          () => _fd1.startHTTPDownload("http://", 
                                      @"d:\..."));
        _task.Start(); 
```

当我尝试像这样使用它时：

```
 TestFileDownloader _fd1 = new TestFileDownloader();
            _fd1.ReportProgerss = reportProgress;
            TestFileDownloader _fd2 = new TestFileDownloader();
            _fd2.ReportProgerss = reportProgress;
            TestFileDownloader _fd3 = new TestFileDownloader();
            _fd3.ReportProgerss = reportProgress;

            Task _task = new Task(
              () => _fd1.startHTTPDownload("http://", 
                                          @"d:\..."));
            _task.Start();

            Task _task2 = new Task(
              () => _fd2.startHTTPDownload("http://",
                                          @"d:\..."));
            _task2.Start();

            Task _task3 = new Task(
              () => _fd3.startHTTPDownload("http://",
                                          @"d:\..."));
            _task3.Start(); 
```

我超时了。

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:17:23.743

这篇文章帮助了我：

[尝试并行运行多个 HTTP 请求，但受到 Windows（注册表）的限制](https://stackoverflow.com/questions/2960056/trying-to-run-multiple-http-requests-in-parallel-but-being-limited-by-windows)

通过设置 ServicePointManager.DefaultConnectionLimit 解决了我的问题

# c# - 是否可以设置表单的最大宽度但不限制最大高度？

> ID：13527142
> 
> 赞同：12
> 
> 时间：2012-11-23T10:25:53.390
> 
> 标签：c#, winforms

出于某种原因，如果您将 Form.MaximumSize 的宽度和高度都设置为零，它将让您拥有不受限制的窗口大小，但是如果您想设置限制，则必须同时对宽度和高度进行限制时间。我想要一个固定的宽度，但对高度没有限制。

```
 // No Limits
    this.MaximumSize = new Size(0,0);

    // Form Height will be stuck at 0
    int ArbitraryWidth = 200;
    this.MaximumSize = new Size(ArbitraryWidth, 0); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-03-26T20:45:47.847

`Size`使用 INT_MAX 因为这是无论如何都可以用 a 表示的理论限制：

```
//Max width 200, unlimited height
this.MaximumSize = new Size(200, int.MaxValue); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-14T07:07:01.570

我知道这个问题已经有几年了，但我遇到了同样的问题，我所做的是将其中一个参数设置为屏幕的分辨率，假设表单的大小不能超过屏幕的大小。

```
this.MaximumSize = new Size(200, Screen.PrimaryScreen.Bounds.Height); 
```

希望这可以帮助某人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T10:43:42.837

> 是否可以设置表单的最大宽度但不限制最大高度？

并不真地。你可以模拟如下：

```
 private void Form1_Resize(object sender, EventArgs e)
    {
        SetMaximumWidth();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        SetMaximumWidth();
    }

    private void SetMaximumWidth()
    {
        if (Width > 200)
            Width = 200;
    } 
```

# symfony - symfony2 服务扩展了另一个类

> ID：13527148
> 
> 赞同：0
> 
> 时间：2012-11-23T10:26:20.420
> 
> 标签：symfony, php

在接到新任务之前，我已经写好了班级服务。我需要扩展我的服务..

我有：

```
namespace Trucking\MainBundle\Service;
use Trucking\MainBundle\classes\Scan;

    class ScanService  {

        public function scan() { 
          // code
        }
    } 
```

我已经升级了服务

```
namespace Trucking\MainBundle\Service;
use Trucking\MainBundle\classes\Scan;

class ScanService extends Scan\Process\Process  {

    public function scan(Scan\IScanVirtual $virtual) { 
        $virtual->start($this);
    }
} 
```

**服务.yml**

```
scan_storage:
  class : Trucking\MainBundle\Service\ScanService
  arguments: [path,container,movetime,checkpoint] 
```

**我有一个错误：**

> message":"运行时注意事项：Trucking\MainBundle\Service
> \ScanService::scan() 的声明应与
> 
> C:\webserver\symfony 中的 Trucking\MainBundle\classes\Scan\Process\Process::scan() 的声明兼容\src\Trucking\MainBundle\Service
> \ScanService.php 第 11 行","class":"ErrorException","trace":[{"namespace":"","short_class":"","class":"" ,"类型":"","函数":"","

**ScanService.php 第 11 行：**

```
ScanService extends Scan\Process\Process 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T10:55:29.263

`scan()`in`ScanService`具有不同数量的参数`Process`（或不同的访问级别）。这是纯 PHP，与 Symfony 无关。

# c++ - 打印超过 NULL 字符的内存内容

> ID：13527150
> 
> 赞同：0
> 
> 时间：2012-11-23T10:26:24.160
> 
> 标签：c++, c

如果内存之间可以有空字符，我需要做什么来打印内存的内容。假设我有一个地址 0X123。我想在内存中的这个地址之前打印大约 100 个字符，中间可能有一些 NULL 字符，我也想打印那些 NULL 字符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T10:27:32.920

使用未格式化的输出：

```
cout.write(address, count); 
```

或者对于 C：

```
fwrite(address, 1, count, stdout); 
```

# java - 将具有简单、索引、嵌套或组合类型属性作为键的 Hashmap 转换为 Java Bean

> ID：13527157
> 
> 赞同：1
> 
> 时间：2012-11-23T10:26:36.410
> 
> 标签：java, apache, reflection, javabeans

我正在尝试将 java bean 转换为 hashmap，然后将 hashmap 转换为 java bean。为了将 Java Object 转换为 hashmap，这篇文章帮助了我。 [使用 commons-beans BeanUtils 将 JavaBean 转换为具有嵌套名称的键/值映射](https://stackoverflow.com/questions/8165861/convert-a-javabean-to-key-value-map-with-nested-name-using-commons-beans-beanuti)

下面的代码

```
 public class Ax {
    String axAttr;

    public String getAxAttr() {
        return axAttr;
    }

    public void setAxAttr(String axAttr) {
        this.axAttr = axAttr;
    }

    List<Bx> bxs;

    public List<Bx> getBxs() {
        return bxs;
    }

    public void setBxs(List<Bx> bxs) {
        this.bxs = bxs;
    }
}

public class Bx {
    String bxAttr;

    public String getBxAttr() {
        return bxAttr;
    }

    public void setBxAttr(String bxAttr) {
        this.bxAttr = bxAttr;
    }

    List<Cx> cxs = new ArrayList<Cx>();

    public List<Cx> getCxs() {
        return cxs;
    }

    public void setCxs(List<Cx> cxs) {
        this.cxs = cxs;
    }
}

public class Cx {
    String cxAttr;

    public String getCxAttr() {
        return cxAttr;
    }

    public void setCxAttr(String cxAttr) {
        this.cxAttr = cxAttr;
    }

    List<String> items;

    public List<String> getItems() {
        return items;
    }

    public void setItems(List<String> items) {
        this.items = items;
    }
} 
```

下面是存储在`HashMap`

> axAttr --> axString bxs
> [0].bxAttr --> bxString bxs
> [0].cxs[0].cxAttr --> cxString bxs
> [0].cxs[0].items[0] --> 一个
> bxs[ 0].cxs[0].items[1] --> 两个
> bxs[0].cxs[0].items[2] --> 三个

我将这些键值存储在`DB`其中，稍后检索它们，并希望再次转换为 Java Bean。但是为了在我`HashMap`的帮助下将其转换为 Java 对象`propertyUtilsbean``NullPointerException.`

这就是我执行的方式：

```
public static void main(String[] args) throws Exception {
        Ax ax = new Ax();
        ax.setAxAttr("axString");

        Bx bx = new Bx();
        bx.setBxAttr("bxString");

        Cx cx = new Cx();
        cx.setCxAttr("cxString");

        List<Bx> bxs = new ArrayList<Bx>();
        ax.setBxs(bxs);
        ax.getBxs().add(bx);

        List<Cx> cxs = new ArrayList<Cx>();
        bx.setCxs(cxs);
        bx.getCxs().add(cx);

        List<String> xs = new ArrayList<String>();
        cx.setAxs(xs);

        cx.getAxs().add(new String("One"));
        cx.getAxs().add(new String("Two"));
        cx.getAxs().add(new String("Three"));

        MyPropertyUtils myPropertyUtils = new MyPropertyUtils();

        Map map = new HashMap();
        for (String name :  myPropertyUtils.listNestedPropertyName(ax)) {
            map.put(name, PropertyUtils.getNestedProperty(ax, name));
        }

        Ax axNew = new Ax();

        Set<Entry> set = map.entrySet();

        for (Entry entry :set) {
            BeanUtils.setProperty(axNew, entry.getKey().toString(), entry.getValue().toString());
        }

    } 
```

例外

```
Exception in thread "main" java.lang.NullPointerException
    at org.apache.commons.beanutils.PropertyUtilsBean.getIndexedProperty(PropertyUtilsBean.java:507)
    at org.apache.commons.beanutils.PropertyUtilsBean.getIndexedProperty(PropertyUtilsBean.java:410)
    at org.apache.commons.beanutils.PropertyUtilsBean.getNestedProperty(PropertyUtilsBean.java:768)
    at org.apache.commons.beanutils.PropertyUtilsBean.getProperty(PropertyUtilsBean.java:846)
    at org.apache.commons.beanutils.BeanUtilsBean.setProperty(BeanUtilsBean.java:903)
    at org.apache.commons.beanutils.BeanUtils.setProperty(BeanUtils.java:456)
    at com.wavecrest.aspect.Test1.main(Test1.java:57) 
```

接受任何建议：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:55:23.273

`BeanUtils`不要在实例中为您创建对象`axNew`实例。所以，打电话

```
BeanUtils.setProperty(axNew, "bxs[0].cxs[0].cxAttr", "Some value"); 
```

表示“获取 'bxs' 集合的第一个元素，然后获取它的第一个元素，然后更新此对象的 'cxAttr' 属性”。但此时 of 的`bxs`属性`axNew`为空，这导致`NullPointerException`.

您需要使用空对象初始化对象，然后才能使用`setProperty`方法更新它们的属性，例如：

```
axNew.setBxs(new ArrayList<Bx>());
axNew.getBsx().add(new Bx());
// should works fine
BeanUtils.setProperty(axNew, "bxs[0].bxAttr", "Some value"); 
```

我还要补充一点，这不是在 DB 中存储具有复杂层次结构的对象的最佳方式。还有其他更有用的序列化方法：

*   甲骨文
*   转换为 XML/JSON
*   Java 序列化
*   等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T23:06:04.270

您可以将 java bean 转换为哈希映射，以便映射的键是 bean 的属性名称。对于嵌套 bean，您可以拥有属性路径键，例如“proprty1.property2”。如果这符合要求，我可以使用我的 juffrou-reflect 库为您提供解决方案。希望能帮助到你。

# javascript - Jquery占位符插件将密码显示为文本

> ID：13527158
> 
> 赞同：1
> 
> 时间：2012-11-23T10:26:37.300
> 
> 标签：javascript, jquery

对于登录表单，我尝试在没有任何标签的情况下构建它并使用占位符文本，以便用户知道要输入什么。

**问：**如何修改下面的代码，使密码仅显示为占位符的可读文本。

[http://jsfiddle.net/DwAUY/](http://jsfiddle.net/DwAUY/)

注意：我也在使用密码掩码插件，所以它像 iphone 一样工作。作为 jsfiddle 的完整示例。

```
/**
* @preserve jquery.outofplace.js
* HTML5 placeholders for all browsers
* Copyright (c) 2010 timmy willison
* Dual licensed under the MIT and GPL licenses.
* http://timmywillison.com/licence/
*/
$.fn.outOfPlace = function (opts) {

    opts = $.extend({

        // Gives you control over the submit function if needed
        // The default function removes the placeholder before
        // submitting the form in case the field is not required client-side
        submit: function () {
            $(this).find('input, textarea').each(function () {
                var $input = $(this);
                if( $input.val() === $input.data('placeholder') ) {
                    $input.val('');
                }
            });
            return true;
        },

        // The placeholder class for setting
        // placeholder styles in your own css
        // e.g. input.place { color: #666666; }
        // This creates a lot more flexibility for you and
        // keeps the js lightweight
        placeClass: 'place'
    }, opts);

    /** Checks for browser autofill */
    function check_autofill ( $input ) {
        setTimeout(function() {
            var v = $input.val();
            if ( v === $input.data('placeholder') ) {
                $input.addClass( opts.placeClass );
            } else {
                $input.removeClass( opts.placeClass );
            }
        }, 300);
    }

    return this.each(function () {
        var $input = $(this),
            defaultText = $input.attr('placeholder') || '';

        // Set the placeholder data for future reference
        $input.data('placeholder', defaultText);

        // Attribute no longer needed
        $input.removeAttr('placeholder');

        // Focus and blurs, notice the class added and removed
        $input.focus(function () {
            if ( $input.val() === defaultText ) {
                $input.val('').removeClass( opts.placeClass );
            }
        }).blur(function () {
            if ( $.trim($input.val()) === '' ) {
                $input.val( defaultText ).addClass( opts.placeClass );
            }
        }).blur()
        // Bind the submit function
        .closest('form').submit( opts.submit );

        check_autofill( $input );
    });
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:31:19.760

替换这个位：

```
$('input:password').password123({
    character: "&#9679;"
}); 
```

有了这个：

```
$('input:password')[0].type="text"; 
```

[http://jsfiddle.net/DwAUY/2/](http://jsfiddle.net/DwAUY/2/)

# c++ - 对 for_each 的调用没有匹配的函数

> ID：13527161
> 
> 赞同：2
> 
> 时间：2012-11-23T10:26:40.143
> 
> 标签：c++, templates, overloading

这是代码：

```
#include <vector>
#include <algorithm>
#include <string>
#include <map>
#include <iostream>
using namespace std;

map<string, int> g_map;
void read_item(const pair<string, int>& p) {
   g_map[p.first] += p.second;
}

void myprint(std::pair<const string, int> ci) {
   cout << "first : " << ci.first << "seconde : " << ci.second << endl;
}

void myprint(int ci) {
   cout << ci << endl;
}

int main()
{
    string a = string("nail");
    string b = string("hammer");
    read_item(make_pair(a, 100));
    read_item(make_pair(b, 2));
    read_item(make_pair(b, 10));
    read_item(make_pair(a, 200));

    std::for_each(g_map.begin(), g_map.end(), myprint); // can't find the matching function here
    vector<int> vec;
    vec.push_back(3);
    vec.push_back(3);
    std::for_each(vec.begin(), vec.end(), myprint);  // and here
    return 0;
} 
```

我重载了函数`myprint`，我认为它应该可以工作，但事实并非如此。当我将第一个更改`myprint`为`myprint1`并将第二个更改为时`myprint2`，它可以工作。任何机构都可以提供帮助吗？编译错误是：

```
funcTemOverload.cpp: In function 'int main()':
funcTemOverload.cpp:29:54: error: no matching function for call to 'for_each(std::map<std::basic_string<char>, int>::iterator, std::map<std::basic_string<char>, int>::iterator, <unresolved overloaded function type>)'
funcTemOverload.cpp:29:54: note: candidate is:
In file included from d:\mingw\bin\../lib/gcc/x86_64-w64-mingw32/4.7.2/include/c++/algorithm:63:0,
         from funcTemOverload.cpp:2:
d:\mingw\bin\../lib/gcc/x86_64-w64-mingw32/4.7.2/include/c++/bits/stl_algo.h:4436:5: note: template<class _IIter, class _Funct> _Funct std::for_each(_IIter, _IIter, _Funct)
d:\mingw\bin\../lib/gcc/x86_64-w64-mingw32/4.7.2/include/c++/bits/stl_algo.h:4436:5: note:   template argument deduction/substitution failed:
funcTemOverload.cpp:29:54: note:   couldn't deduce template parameter '_Funct'
funcTemOverload.cpp:35:50: error: no matching function for call to 'for_each(std::vector<int>::iterator, std::vector<int>::iterator, <unresolved overloaded function type>)'
funcTemOverload.cpp:35:50: note: candidate is:
In file included from d:\mingw\bin\../lib/gcc/x86_64-w64-mingw32/4.7.2/include/c++/algorithm:63:0,
         from funcTemOverload.cpp:2:
d:\mingw\bin\../lib/gcc/x86_64-w64-mingw32/4.7.2/include/c++/bits/stl_algo.h:4436:5: note: template<class _IIter, class _Funct> _Funct std::for_each(_IIter, _IIter, _Funct)
d:\mingw\bin\../lib/gcc/x86_64-w64-mingw32/4.7.2/include/c++/bits/stl_algo.h:4436:5: note:   template argument deduction/substitution failed:
funcTemOverload.cpp:35:50: note:   couldn't deduce template parameter '_Funct' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T10:33:41.303

根据要求，您的原始代码失败的原因是`UnaryFunction`模板参数`std::for_each`仅用于“非推导上下文”，并且没有明确指定。`[temp.deduct.type]/4`：

> ...如果模板参数仅在非推导上下文中使用并且未明确指定，则模板参数推导失败。

`UnaryFunction`被视为非推断上下文，因为`[temp.deduct.call]/6`

> 当 P [UnaryFunction] 是函数类型、指向函数类型的指针或指向成员函数类型的指针时...如果参数 [myprint] 是重载集（不包含函数模板），则尝试使用每个集合的成员。如果只有一个重载集成员的推导成功，则该成员将用作推导的参数值。**如果对重载集的多个成员的推导成功，则将参数视为非推导上下文。**

一种选择是添加演员表：

```
std::for_each(
    g_map.begin(), g_map.end(),
    static_cast<void (*)(std::pair<const string, int>)>(myprint));

std::for_each(
    vec.begin(), vec.end(),
    static_cast<void (*)(int)>(myprint)); 
```

另一种选择是使其`myprint`成为一个函数对象，以便在内部发生重载决议`std::for_each`：

```
struct myprint {
    void operator()(std::pair<const string, int> ci) const {
        cout << "first : " << ci.first << "seconde : " << ci.second << endl;
    }
    void operator()(int ci) const {
        cout << ci << endl;
    }
};

std::for_each(g_map.begin(), g_map.end(), myprint());
std::for_each(vec.begin(), vec.end(), myprint()); 
```

# google-apps-script - 如何使用 UiApp/Appscript 关闭浏览器选项卡/窗口？

> ID：13527166
> 
> 赞同：0
> 
> 时间：2012-11-23T10:27:09.287
> 
> 标签：google-apps-script

所以，我有一个使用 UiApp 的 doPost() 处理程序，它在存储表单内容后显示信息消息。如何在渲染的 doPost() 页面中嵌入一个关闭按钮，该按钮关闭选项卡/窗口而不返回服务器。

我实际上是在尝试复制以下 HTML/Javascript 但使用 Appscript/UiApp 的功能：

```
<input type="button" class="btn" value="Close window" onClick="self.close();"> 
```

有这样的功能会很棒：

```
app.createClientCloseButton("Close window"); 
```

此函数将在呈现的客户端页面中嵌入必要的 HTML/Javascript。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T10:33:28.133

很抱歉给你一个坏消息，但这是不可能的，从[对这个问题](http://code.google.com/p/google-apps-script-issues/issues/detail?id=474)的解释来看，它也不会被实施。

# mysql - 用windows mobile 6连接Mysql服务器

> ID：13527175
> 
> 赞同：0
> 
> 时间：2012-11-23T10:27:40.780
> 
> 标签：mysql, windows, c#-3.0, sql-server-ce, windows-mobile-6

我正在为 windows mobile 6 设备开发应用程序。我想用 Mysql 服务器数据库更新它的数据库，但不幸的是这个设备没有任何网络连接设施。所以我必须将此设备与 PC 连接以更新数据库.. 过程是当我单击“同步”按钮时，数据应在服务器和本地数据库之间传输，所以请帮我这样做.. 任何链接或代码或任何对我有帮助的东西做这项工作谢谢.. 这是我的设备[http://www.posguys.com/mobile-computers_6/Motorola-MC3100_1124/](http://www.posguys.com/mobile-computers_6/Motorola-MC3100_1124/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T19:22:09.153

尽管您没有“网络”连接，但您可以使用 ActiveSync/WindowsMo​​bileDeviceCenter 通过 ActiveSync 的直通连接将 mc3100 连接到您的 PC 网络。

因此，第一步是从[http://dev.mysql.com/downloads/connector/net/#downloads](http://dev.mysql.com/downloads/connector/net/#downloads)下载 MySql 连接器，然后在您的 .NET Compact Framework/SmartDevice 项目中添加对它的引用。或者您正在使用不同的编程环境？

Nect 步骤是尝试连接到您的 MySql 服务器。如果成功，nect 步骤就是按照 MySql 数据同步编程。

# javascript - 根据所选产品从数据数组中填充价格

> ID：13527176
> 
> 赞同：0
> 
> 时间：2012-11-23T10:27:40.777
> 
> 标签：javascript, jquery, autocomplete

我有一个 json 数组

```
var data = [ { "id": "1", "label": 1, "value": "11.00" }, 
                 { "id": "2", "label": 2, "value": "21.00" }, 
                 { "id": "3", "label": 3, "value": "31.00" }, 
                 { "id": "4", "label": 4, "value": "40.00" }, 
                 { "id": "5", "label": 5, "value": "50.00" }, 
                 { "id": "6", "label": 6, "value": "60.00" }, 
                 { "id": "9", "label": 9, "value": "90.00" }, 
                 { "id": "8", "label": 8, "value": "80.00" }, 
                 { "id": "7", "label": 7, "value": "70.00" } 
               ]; 
```

和一个从

```
<form action="" method="POST">
Quantity1: <input type="text" name="quantity1" id="quantity1">
Product1: <select name="product1" id="product1"><option value="1">Product 1</option><option value="2">Product 2</option></select>
Price1: <input type="text" name="price1" id="price">
Quantity2: <input type="text" name="quantity2" id="quantity2">
Product2: <select name="product1" id="product2"><option value="1">Product 1</option><option value="2">Product 2</option></select>
Price2: <input type="text" name="price2" id="price">
.
.
.
<input type="submit" value="submit">
</form> 
```

我想自动填充产品的价格。很抱歉我不太了解 jquery 和 javascript。试过这个但没有奏效

```
$( "#product1" ).change(function(){
            source: data,
            minLength: 1,
            select: function( event, ui ) {
                 $('#price1').val( ui.item.value );
            }
        }); 
```

请帮助我如何填充产品 1 的价格 1 和产品 2 的价格 2。

* * *

这是适用于#product1 的代码

```
$('#product1').change(function() {  
            $('input[name="unit_price1"]').val(data[$(this).val()-1].value)
        }); 
```

但是一旦我尝试循环它就不能我的循环有问题。

```
$(function() {
        var data = <?php echo $projects; ?>;
var nbProducts = data.length;
    for(var iProduct = 0; iProduct < nbProducts; iProduct++) {
        $('#product'+iProduct).change(function() {  
            $('input[name="unit_price'+iProduct+'"]').val(data[$(this).val()-1].value)
        });
}       

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:41:13.927

```
var data = [ { "id": "1", "label": 1, "value": "11.00" }, 
                 { "id": "2", "label": 2, "value": "21.00" }, 
                 { "id": "3", "label": 3, "value": "31.00" }, 
                 { "id": "4", "label": 4, "value": "40.00" }, 
                 { "id": "5", "label": 5, "value": "50.00" }, 
                 { "id": "6", "label": 6, "value": "60.00" }, 
                 { "id": "9", "label": 9, "value": "90.00" }, 
                 { "id": "8", "label": 8, "value": "80.00" }, 
                 { "id": "7", "label": 7, "value": "70.00" } 
               ];

for(var i=0; i<data.length; i++) {
    $('#product1').append('<option value="' + data[i].value + '">' + data[i].label+ '</option>');
    $('#product2').append('<option value="' + data[i].value + '">' + data[i].label+ '</option>');
}

$('#product1').change(function() {
    $('input[name="price1"]').val($(this).val())
});

$('#product2').change(function() {
    $('input[name="price2"]').val($(this).val())
});
​ 
```

也许你会接近这个决定。示例： http: [//jsfiddle.net/YvZ9v/](http://jsfiddle.net/YvZ9v/) ​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T10:59:14.837

您可以使用这样的代码绑定更改事件：

```
$( "#product1" ).change(function() {
    var nbProducts = data.length;
    for(var iProduct = 0; iProduct < nbProducts; iProduct++) {
        if(data[iProduct].id == this.value)
            $('#price1').val( data[iProduct].value );
    }
} 
```

* * *

**编辑** 为了遍历所有产品输入，您只需要像这样迭代：

```
var nbProducts = data.length;
for(var iProduct = 1; iProduct <= nbProducts; iProduct++) {
    $('#product'+iProduct).change(function() {  
        // Same code as above...
    });
} 
```

# android - SearchView imeOptions 和 onQueryTextSubmit 支持

> ID：13527181
> 
> 赞同：3
> 
> 时间：2012-11-23T10:28:00.843
> 
> 标签：android, actionbarsherlock, searchview

我目前正在使用[ActionBarSherlock 4.2](http://www.actionbarsherlock.com)，它是我的应用程序中的[SearchView](https://github.com/JakeWharton/ActionBarSherlock/blob/master/library/src/com/actionbarsherlock/widget/SearchView.java)小部件。

我想让它提交查询，即使它是空的。我试图设置 imeOptions 和 OnKeyListener 但两者都被无缘无故地忽略了。

```
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    Log.d(TAG, "onCreateOptionsMenu");
    inflater.inflate(R.menu.interactive_map, menu);
    mSearchView = (SearchView) menu.findItem(R.id.action_search).getActionView();

    mSearchView.setImeOptions(EditorInfo.IME_ACTION_GO);
    mSearchView.setOnKeyListener(new View.OnKeyListener() {

        @Override
        public boolean onKey(View v, int keyCode, KeyEvent event) {

            Log.d(TAG, "keyCode: " + keyCode); 
            Log.d(TAG, "Action: " + event.getAction());
            if(keyCode == EditorInfo.IME_ACTION_SEARCH){
                onQueryTextSubmit(""+mSearchView.getQuery());
            }

            return false;
        }
    });

    super.onCreateOptionsMenu(menu, inflater);
} 
```

onKey 永远不会被触发，因为两个 Logcat 条目都不会出现在 Logcat 窗口中。不确定这是否在 SherlockFragment 中是问题所在。

菜单项也没有什么特别的。

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/action_search"
          android:title="@string/app_name"
          android:icon="@android:drawable/ic_menu_search"
          android:showAsAction="always"
          android:actionViewClass="com.actionbarsherlock.widget.SearchView" />
</menu> 
```

有没有办法解决这个问题？或者有没有更简单的方法可以在查询为空时启用提交？它似乎不支持源代码中的任何配置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:03:59.893

我改为通过 ActionMode 放置 SearchView。我现在会接受这个作为答案，直到有人对这个问题有更好的解决方案。

```
private void showActionMode(){
    MainActivity a = (MainActivity)getActivity();
    a.startActionMode(new SearchActionMode());
}

private class SearchActionMode implements ActionMode.Callback{

    @Override
    public boolean onCreateActionMode(ActionMode mode, Menu menu) {
        Log.d(TAG, "onCreateActionMode creating inflater");
        MenuInflater inflater = new MenuInflater(getActivity());
        Log.d(TAG, "onCreateActionMode inflating");
        inflater.inflate(R.menu.interactive_map, menu);
        Log.d(TAG, "onCreateActionMode finding SearchView");
        mSearchView = (SearchView) menu.findItem(R.id.action_search).getActionView();

        Log.d(TAG, "mSearchView: " + mSearchView);
        setupSearchView();
        return true;
    }

    @Override
    public boolean onPrepareActionMode(ActionMode mode, Menu menu) {
        Log.d(TAG, "onPrepareActionMode");
        //TODO add searchView once working
        mSearchView.requestFocus(); 
        return false;
    }

    @Override
    public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
        Log.d(TAG, "onActionItemClicked");
        return false;
    }

    @Override
    public void onDestroyActionMode(ActionMode mode) {
        Log.d(TAG, "onDestroyActionMode");
        closeTopTray();
        closeListView();
    }

}

private void setupSearchView() {

    mSearchView.setIconifiedByDefault(false);
    mSearchView.setId(ID_SEARCH_VIEW);
    mSearchView.setOnSearchClickListener(this);
    mSearchView.setOnQueryTextListener(this);
    mSearchView.setOnCloseListener(this);
    mSearchView.setImeOptions(EditorInfo.IME_ACTION_SEARCH);

    // To automatically display keyboard when display SearchView
    mSearchView.setOnQueryTextFocusChangeListener(new View.OnFocusChangeListener() {

        @Override
        public void onFocusChange(View v, boolean hasFocus) {
            Log.d(TAG, "mSearchView focus changed: " + hasFocus);
            if (hasFocus) {
                showInputMethod(v.findFocus());
            }
        }
    });

    mSearchView.setQueryHint("Type keyword");
    mSearchView.setQuery((TextUtils.isEmpty(searchQuery)? "": searchQuery), false);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T21:37:19.160

我有同样的问题，问题在于 SearchView.java 中的 onSubmitQuery()

```
private void onSubmitQuery() {
    CharSequence query = mQueryTextView.getText();
    if (query != null && TextUtils.getTrimmedLength(query) > 0) { 
```

不支持空查询，所以我不得不下载并使用[ActionBarSherlock](http://actionbarsherlock.com/)然后修改此方法。

这就是我的 onSubmitQuery() 现在的样子

```
private void onSubmitQuery() {
     CharSequence query = mQueryTextView.getText();
     if (query == null) {query = "";}
     if (mOnQueryChangeListener == null
             || !mOnQueryChangeListener.onQueryTextSubmit(query.toString())) {
         if (mSearchable != null) {
             launchQuerySearch(KeyEvent.KEYCODE_UNKNOWN, null, query.toString());
             setImeVisibility(false);
         }
         dismissSuggestions();
     }
 } 
```

希望这可以帮助。

# ios - iOS 通过 2 类使用委托

> ID：13527183
> 
> 赞同：0
> 
> 时间：2012-11-23T10:28:07.053
> 
> 标签：ios, delegates

我有 3 个类：ListItem、ListPageView、ListViewController

加载项时 ListViewController 中有代码：

```
ListPageView *pageView = [[ListPageView alloc] init];
pageView.delegate = self;
for(NSDictionary *_itemDetails in res)
{
    // khởi tạo item của list
    ListItem *item = [[ListItem alloc] initWithImage:[MEDIA_SERVER stringByAppendingString:[_itemDetails objectForKey:@"image"]]];
    item.data = _itemDetails; // copy
    item.center = CGPointMake(colIndex * 165 + 230 + colIndex * 30, rowIndex * 125 + 120 + rowIndex * 10);
    // gán tổng số page hiện có trên server
    _totalPage = [[_itemDetails objectForKey:@"pages"] intValue];
    // delegate vào self để gọi sự kiện click
    item.delegate = pageView;
    item.tag = ITEM_TAG + i;
    i++;
    // set Index
    colIndex++;
    if(colIndex == 4)
    {
        rowIndex++;
        colIndex = 0;
    }

    [pageView addSubview:item];
}
[self.view addSubview:pageView]; 
```

问题是如果我直接将 ListItem 添加到 self.view 中，ListViewController 可以委托 ListItem 的触摸事件。但是如果我将 ListItem 添加到 ListPageView 然后将 ListPageView 添加到 self.view ListViewController 不能从 ListItem 委托触摸事件。

列表项委托：

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
if ([_delegate respondsToSelector:@selector(ListItemBeginTouched:)])
{
    [_delegate ListItemBeginTouched:self];
} 
```

ListPageView 委托：

```
-(void)ListItemBeginTouched:(ListItem *)listItem
{
if ([_delegate respondsToSelector:@selector(ItemBeginTouched:withPageView:)])
{
    [_delegate ItemBeginTouched:listItem withPageView:self];
}
} 
```

# javascript - 正则表达式匹配 Javascript 中的回车符

> ID：13527186
> 
> 赞同：1
> 
> 时间：2012-11-23T10:28:28.730
> 
> 标签：javascript, regex

我正在尝试编写一些 Javascript 来隐藏一些仅包含回车的元素。我很欣赏解决这个问题的正确方法是停止创建这些元素，但不幸的是，在这种情况下这是不可能的。我正在尝试使用正则表达式来搜索不需要的元素，但运气不佳。我写的函数如下：

```
function HideEmptyP()
{

    var patt = (\\r)
    for(var i = 0;i<desc[i].length;i++);
    {
    var desc[i] = document.getElementsByClassName('sitspagedesc');
    var result[i] = patt.test(desc[i]);
        if (result[i] == true)
            {
            desc[i].style.display='none';
            }
        else
            {
            alert("No Match!");
            }
    } 
```

我在 Web 控制台中遇到的错误是“语法错误：非法字符”。

感谢有关如何解决此问题的任何想法。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T10:32:29.340

> 我正在尝试编写一些 Javascript 来隐藏一些仅包含回车的元素。

不需要正则表达式，只需将元素的`innerHTML`属性与进行比较`"\\r"`，例如：

```
if (demo[i].innerHTML === "\\r") {
    // Remove it
} 
```

但请注意，某些浏览器可能会转换单个回车符。您可能想检查`"\\r"`, `"\\n"`, 和一个空格。为此，您*可能*需要使用正则表达式。

您的正则表达式文字 ( `(\\r)`) 完全无效，值得[阅读它们](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)以了解正确的语法。要在 JavaScript 中编写正则表达式文字，请使用`/`分隔符。所以：`/\\r/`。要测试字符串是否仅包含`\r`、`\n`或空格，您可以使用`/^[\r\n ]+$/`（这要求至少有一个字符匹配，并用于`^`指示字符串的开头和字符串`$`的结尾）：

```
if (demo[i].innerHTML.match(/^[\r\n ]+$/) {
    // Remove it
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T10:42:24.770

您收到语法错误的原因是声明 var patt = (\r) 不正确，它应该类似于 var patt = '\r';

整个for循环也是错误的。

您应该在启动 for 循环之前定义 demo，而不是在其中，结果不必是数组，而只是一个普通变量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T10:32:21.647

你的文字看起来很奇怪。

尝试`var patt = /\r/;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-02T08:12:22.613

```
var patt=/\n/gi 
```

应该管用。

额外的 i 标志表示不区分大小写。g 用于全局搜索。

# php - 如果子类别只有 1 个项目，则不显示列表

> ID：13527191
> 
> 赞同：0
> 
> 时间：2012-11-23T10:29:01.527
> 
> 标签：php, javascript, jquery, html, wordpress

我正在显示带有此代码的菜单：

```
 <!--  Subcategory menu from current category -->
    <ul class="sub-menu">
    <?php
        if (is_home()) {
            wp_list_categories('orderby=id&title_li=&depth=1');
        }
        else{
            $category = get_the_category();
            $cat_term_id = $category[0]->term_id;
            $cat_category_parent = $category[0]->category_parent;
            $listcat = wp_list_categories('echo=0&child_of='.$cat_category_parent.'&title_li=&orderby=order&order=ASC');
            $listcat = str_replace("cat-item-".$cat_term_id, "cat-item-".$cat_term_id." current-cat", $listcat);
            if ( in_category( $cat_term_id ) || post_is_in_descendant_category( $cat_term_id )) {
                echo $listcat;
            }
        }
    ?> 
```

并且该菜单的每个 li 使用以下方法显示帖子标题：

```
 <!--  Post list from current category -->
    <div class="menu_list">
    <ul id="submenu_productos" class="clearfix">
        <?php
            $IDOutsideLoop = $post->ID;
            while( have_posts() ) {
                the_post();
                foreach( ( get_the_category() ) as $category )
                    $my_query = new WP_Query('category_name=' . $category->category_nicename . '&orderby=date&order=DESC&showposts=100');
                if( $my_query ) {
                    while ( $my_query->have_posts() ) {
                        $my_query->the_post(); ?>
                        <!-- this line to hightlight current post in the category page -->
                <li<?php if ( $post->ID == $wp_query->post->ID ) { echo ' class="test"'; } else {} ?>>
                    <a href="<?php the_permalink(); ?>" title="<?php the_title(); ?>"><?php the_title(); ?></a>
                </li>
        <?php
                }
            }
        }
        ?>
    </ul>
    </div> 
```

菜单运行良好，显示如下：

![在此处输入图像描述](../Images/c63e8ea0ea05bf8c0c4cc01a3360c3c3.png)

问题是，当我有一个属于该类别/子类别的帖子时，它也会显示在列表中......我想在它只有一个项目时隐藏它：

![在此处输入图像描述](../Images/3e24f1185a8dc902691f9f0ab54c2b5f.png)

当子类别只有一个帖子时，有什么办法可以隐藏它？

PD：请不要告诉我把它放在 wordpress.stackexchange.com 上，我总是在那里发帖，没有答案，这里的人总是帮助我......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:45:51.417

您可以使用以下方法计算子菜单中的项目数：

```
$count = $my_query->post_count; 
```

我建议将其添加到您的 if 条件中：

```
if( $my_query && $my_query->post_count > 1) 
```

那应该工作

# ios - 采样率改变后声音失真

> ID：13527195
> 
> 赞同：4
> 
> 时间：2012-11-23T10:29:19.170
> 
> 标签：ios, macos, audio, core-audio, sample-rate

这个让我保持清醒：
我有一个 OS X 音频应用程序，如果用户更改设备的当前采样率，它必须做出反应。
为此，我在“kAudioDevicePropertyNominalSampleRate”上为输入和输出设备注册了一个回调。
因此，如果其中一个设备的采样率发生变化，我会收到回调并在设备上设置新的采样率，并将“AudioObjectSetPropertyData”和“kAudioDevicePropertyNominalSampleRate”作为选择器。
苹果邮件列表中提到了接下来的步骤，我遵循了它们：

*   停止输入 AudioUnit 和由混音器和输出 AudioUnit 组成的 AUGraph
*   取消初始化它们。
*   检查节点数，越过它们并使用 AUGraphDisconnectNodeInput 断开混音器与输出的连接
*   现在在输入单元的输出范围上设置新的采样率
*   以及混音器单元的输入和输出范围
*   将混音器节点重新连接到输出单元
*   更新图表
*   初始化输入和图形
*   开始输入和图表

渲染和输出回调重新开始，但现在音频失真了。我相信是输入渲染回调负责信号，但我不确定。
我忘记了什么？
据我所知，采样率不会影响缓冲区大小。
如果我以其他采样率开始我的应用程序，一切都很好，这是导致信号失真的变化。
我看前后的流格式（kAudioUnitProperty_StreamFormat）。除了采样率当然会更改为新值之外，一切都保持不变。

正如我所说，我认为需要更改的是输入渲染回调。我是否必须通知回调需要更多样本？我检查了 44k 和 48k 的回调和缓冲区大小，没有什么不同。

我写了一个小测试应用程序，所以如果你想让我提供代码，我可以给你看。

**编辑：**我录制了失真的音频（正弦）并在 Audacity 中查看了它。
我发现，每 495 个样本后，音频会下降 17 个样本。我想你知道这是怎么回事：495 个样本 + 17 个样本 = 512 个样本。这是我设备的缓冲区大小。
但我仍然不知道我能用这个发现做什么。
我检查了我的输入和输出渲染过程以及它们对 RingBuffer 的访问（我使用的是固定版本的 CARingBuffer）
两者都存储和获取 512 帧，所以这里什么都没有......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:50:24.063

知道了！
断开图表后，似乎有必要告诉两个设备新的采样率。
我在回调之前已经这样做了，但似乎这必须在以后完成。

# asp.net-mvc - T4 模板中的 RenderPartial()

> ID：13527197
> 
> 赞同：4
> 
> 时间：2012-11-23T10:29:29.593
> 
> 标签：asp.net-mvc, razor, t4, asp.net-mvc-templates

我想知道是否可以在预处理器模板中采用现有的局部视图逻辑并将其重用于动态电子邮件生成？

在查看 T4ToolKit 的智能感知选项时

```
<#@ import namespace="System.Web.Mvc" #> 
```

mvc的命名空间没有出现，是否可以包含命名空间并调用

`Html.RenderPartial("viewName", this.Model)`

从预处理器模板中？

IE

```
<#@ template language="C#" #>
This is a header
<#= Html.RenderPartial("<%PATH%>/MyPartialRazerView", this.Model) #>
This is a Footer
<#+
  public MyType Model { get; set; }
#> 
```

所以我可以以编程方式访问我的模板，重用视图的显示逻辑并构建，即时说电子邮件（我知道电子邮件行是胡说八道，为了简单起见只是简写）

```
var template = MyTemplate(){ Model = MyViewModel };

Email.Send(emailAddress, title, template.TransformText(), null) etc.. 
```

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:33:23.453

This can be done for sure, but you need to use a different extension methods than `RenderPartial`, because these write directly to the response. I tried `Partial` extension methods, which return the `MvcHtmlString` which works fine in the template. This is my test T4 runtime template, RuntimeTextTemplate1.tt:

```
<#@ template language="C#" #>
<#@ import namespace="System.Web.Mvc.Html" #>
LogOnPartial:
<#= Html.Partial("_LogOnPartial") #> 
```

Then you also need to jump some ASP.NET MVC hoops to get the actual `HtmlHelper` instance into your template.

I created a partial class, to add the `Html` property to the template and instantiate the `HtmlHelper` and to provide a constructor:

```
public partial class RuntimeTextTemplate1
{
    public HtmlHelper Html
    {
        get;
        private set;
    }

    public RuntimeTextTemplate1(ViewContext viewContext, IViewDataContainer viewDataContainer)
    {
        Html = new HtmlHelper(viewContext, viewDataContainer);
    }
} 
```

A `HtmlHelper` needs a `ViewContext` and `IViewDataContainer` to be created and those in turn have another dependencies. I provided what is needed from the controller using some dummy classes:

```
public class HomeController : Controller
{
    public ActionResult TemplateTest()
    {
        var viewContext = new ViewContext(ControllerContext, new DummyView(), ViewData, TempData, TextWriter.Null);
        var template = new RuntimeTextTemplate1(viewContext, new ControllerViewDataContainer(this));
        return Content(template.TransformText());
    }
}

public class DummyView : IView
{
    public void Render(ViewContext viewContext, TextWriter writer)
    {
        // Do nothing
    }
}

public class ControllerViewDataContainer : IViewDataContainer
{
    private Controller controller;

    public ViewDataDictionary ViewData
    {
        get { return controller.ViewData; }
        set { }
    }

    public ControllerViewDataContainer(Controller controller)
    {
        this.controller = controller;
    }
} 
```

And I successfully get the template output out of it.

So while this can be done, it depends on your specific situation, how exactly you need to use it, how your view is parametrized, and how you can assemble the required classes together to get to the `HtmlHelper` instance.

In the end, you may find that making the template the primary source of the required output, and using this in your views and outside them is easier than the other way around.

# linux - 使用反向代理记录所有传入的 HTTP 请求，然后在克隆服务器中执行它以进行性能测试

> ID：13527198
> 
> 赞同：0
> 
> 时间：2012-11-23T10:29:34.257
> 
> 标签：linux, testing, proxy, webserver, jmeter

[我在 Serverfault](https://serverfault.com/questions/192785/use-a-reverse-proxy-do-record-all-incoming-http-request-then-execute-it-in-a-cl)的性能测试中发现了这个问题。

我曾经用 Jmeter 做性能测试。它可以记录对我在线服务器的所有请求吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T11:59:27.797

类似的方法可以与 JMeter Access Log Sampler 一起用于 Get 请求，但我认为它不像听起来那么现实。

因为代理拦截时使用的数据可能同时发生变化，所以仅重放流量不会模拟初始流量，并且可能会产生现实生活中不会发生的错误。最后，如果测试不检查这些可能导致过于乐观的响应时间。

# typescript - 匿名自执行功能的打字稿范围问题

> ID：13527202
> 
> 赞同：2
> 
> 时间：2012-11-23T10:30:03.693
> 
> 标签：typescript

我一直在用 VS 2012 测试新的打字稿，但在我的第一个项目中遇到了这个问题：

我已将此 JS 粘贴到我的 ts 文件中，但我无法访问 Sprite 对象，它位于匿名范围内。如何从打字稿访问它。

```
(function () {
  function LoaderProxy() {
    return {
      draw: $.noop,
      fill: $.noop,
      frame: $.noop,
      update: $.noop,
      width: null,
      height: null
    };
  }

  function Sprite(image, sourceX, sourceY, width, height) {
    sourceX = sourceX || 0;
    sourceY = sourceY || 0;
    width = width || image.width;
    height = height || image.height;

    return {
      draw: function(canvas, x, y) {
        canvas.drawImage(
          image,
          sourceX,
          sourceY,
          width,
          height,
          x,
          y,
          width,
          height
        );
      },

      fill: function(canvas, x, y, width, height, repeat) {
        repeat = repeat || "repeat";
        var pattern = canvas.createPattern(image, repeat);
        canvas.fillColor(pattern);
        canvas.fillRect(x, y, width, height);
      },

      width: width,
      height: height
    };
  };

  Sprite.load = function(url, loadedCallback) {
    var img = new Image();
    var proxy = LoaderProxy();

    img.onload = function() {
      var tile = Sprite(this);

      $.extend(proxy, tile);

      if(loadedCallback) {
        loadedCallback(proxy);
      }
    };

    img.src = url;

    return proxy;
  };

  var spriteImagePath = "images/";

  window.Sprite = function(name, callback) {
    return Sprite.load(spriteImagePath + name + ".png", callback);
  };
  window.Sprite.EMPTY = LoaderProxy();
  window.Sprite.load = Sprite.load;
}()); 
```

希望这能解释我的问题！

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:57:00.970

编译器给你的第一个错误在这里......

```
Sprite.load 
```

它检测到名为 的 Sprite 对象上没有属性或函数`load`。

第二个错误在这里...

```
var tile = Sprite(this); 
```

Sprite 构造函数接受五个参数，而您只传递了 1 个。

第三上...

```
window.Sprite 
```

Window 对象没有名为 Sprite 的属性。

所有其他问题都是这个问题的变体。

这是一个建议，让事情以最小的变化工作。更好的解决方案是将您的 Sprite 重写为 TypeScript 中的一个类

```
var Sprite;

(function () {
  function LoaderProxy() {
    return {
      draw: $.noop,
      fill: $.noop,
      frame: $.noop,
      update: $.noop,
      width: null,
      height: null
    };
  }

  Sprite = function (image, sourceX, sourceY, width, height) {
    sourceX = sourceX || 0;
    sourceY = sourceY || 0;
    width = width || image.width;
    height = height || image.height;

    return {
      draw: function(canvas, x, y) {
        canvas.drawImage(
          image,
          sourceX,
          sourceY,
          width,
          height,
          x,
          y,
          width,
          height
        );
      },

      fill: function(canvas, x, y, width, height, repeat) {
        repeat = repeat || "repeat";
        var pattern = canvas.createPattern(image, repeat);
        canvas.fillColor(pattern);
        canvas.fillRect(x, y, width, height);
      },

      width: width,
      height: height
    };
  };

  Sprite.load = function(url, loadedCallback) {
    var img = new Image();
    var proxy = LoaderProxy();

    img.onload = function() {
      var tile = Sprite(this);

      $.extend(proxy, tile);

      if(loadedCallback) {
        loadedCallback(proxy);
      }
    };

    img.src = url;

    return proxy;
  };

  var spriteImagePath = "images/";

  Sprite = function(name, callback) {
    return Sprite.load(spriteImagePath + name + ".png", callback);
  };
  Sprite.EMPTY = LoaderProxy();
  Sprite.load = Sprite.load;
}()); 
```

# php - 教义：id 上的关键结果数组

> ID：13527205
> 
> 赞同：1
> 
> 时间：2012-11-23T10:30:13.210
> 
> 标签：php, doctrine-orm

使用教义：

```
$result = array(
    array('user_id'=>1, 'name'=>'foo'),
    array('user_id'=>2, 'name'=>'bar'),
);

$expected = array(
    1 => array('user_id'=>1, 'name'=>'foo'),
    2 => array('user_id'=>2, 'name'=>'bar'),
); 
```

**是否可以通过Doctrine\ORM\Query**以某种方式在某个字段上键入/索引结果数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-07T03:10:19.547

也许你可以使用

```
INDEX BY t.userId 
```

其中 t 是您的表/实体别名

# c++ - C ++文件输出奇怪的数字，部分代码未运行

> ID：13527207
> 
> 赞同：0
> 
> 时间：2012-11-23T10:30:16.363
> 
> 标签：c++, linux, file-io, kubuntu

是的。所以，我正在尝试为猜谜游戏制作代码。在这个游戏中，有一个困难模式。在困难模式下，您有 15 次猜测，并且必须在 1 到 500 之间进行猜测。但我的问题是：我正在尝试让困难模式保存并显示您的赢/输，但是当它输出 wins.txt 的内容时它输出如下内容：

```
Wins: 0x7fffee26df78
Losses: 0x7fffee26e178 
```

这真的让我很困惑。这是我为此拥有的代码的一部分：

```
ifstream losses_var("losses.txt");
ifstream wins_var("wins.txt");
losses_var>> loss;
wins_var>> win;
wins_var.close();
losses_var.close(); 
```

然后它被调用：

```
cout<<"Wins: "<< wins <<"\nLosses: "<< losses <<"\n" 
```

如果您想查看完整的源代码，请访问：http: [//pastebin.com/gPT37uBJ](http://pastebin.com/gPT37uBJ)

我的第二个问题：获胜时不会显示困难模式。这几乎就是整个问题。在我的代码中，询问用户输入的循环使用 while (guess != randNum) 所以在最后的括号中，我有我希望代码在用户获胜时显示的内容，但它只是没有运行。它只是*停止*。如果有人可以帮助我，我会很高兴。有错误的行是第 97 到 105 行。同样，源代码在这里： http: [//pastebin.com/gPT37uBJ](http://pastebin.com/gPT37uBJ)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:45:15.543

你把你的变量名弄糊涂了

```
cout<<"Wins: "<< wins <<"\nLosses: "<< losses <<"\n"; 
```

应该

```
cout<<"Wins: "<< win <<"\nLosses: "<< loss <<"\n"; 
```

选择好的变量名很重要。一个原因是，您不会对变量的含义感到困惑（如果您感到困惑，请考虑其他人查看您的代码的情况）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:09:18.260

其他人已经回答了输出问题（`win`vs. `wins`）。另一个问题可能在于您的`while`循环嵌套逻辑。外循环 ( `while (guess != randNum)`) 开始，但其主体包含整个内循环 ( `while (guesses_left != 0)`)。这意味着在内部循环终止之前不会再次检查外部条件，这意味着您已经用完了猜测。另请注意，如果您猜对了，内循环将永远不会终止。你可能想要这样的东西：

```
while (guesses_left > 0) {
  // input user's guess
  if (guess < randNum) {
    // process it
  } else if (guess > randNum) {
    // process it
  } else {
    // it's equal, user won
    // do what's necessary for a win
    return 0;
  }
}
// ran out of guesses
// do what's necessary for a loss
return 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T10:46:28.910

你没有写你的变量`win`和. 从您粘贴的代码中，我可以看到它是ofstream 对象，这意味着您可能在那里看到了地址。我建议您选择更多信息变量名称，以避免难以发现这样的错误。`loss``cout``wins``losses`

# android - 定时器和异步在一起

> ID：13527210
> 
> 赞同：0
> 
> 时间：2012-11-23T10:30:27.943
> 
> 标签：android, timer

我想在 Timer 线程中触发 AsynTask，我收到以下错误。

java.lang.ExceptionInInitializerError 原因：java.lang.RuntimeException：无法在未调用 Looper.prepare() 的线程内创建处理程序

有没有可能？？？这是我的代码

```
networkTimer = new Timer();
                networkTimer.schedule(new TimerTask() {
                    int counter = 1;
                    @Override
                    public void run() {
                        // TODO Auto-generated method stub
                        if(isNetworkAvailable()){
                            Log.d("Hey I got the Network","!!");
                            new GmailAsync().execute("");
                            networkTimer.cancel();
                        }else{
                            Log.d("Attempt","No:"+counter);
                            counter++;
                            if(counter == 6){
                                Log.d("Attempt","Finished");
                                networkTimer.cancel();
                            }
                        }
                    }
                },0, 5000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:40:55.390

`AsyncTask.execute()`必须在 UI 线程上运行，而 TimerTask 不会。

建议： * 使用 runOnUiThread 返回 UI 线程以使用您的 AsyncTask * 不要使用计时器，而是使用处理程序和 postDelyaed * 如果您不需要与 UI 交互（您可能，但我不知道你的 AsyncTask 做了什么。

最佳解决方案是#2。那看起来像：

```
mHandler.postDelayed(new Runnable() {
    @Override
    public void run() {
        if(isNetworkAvailable()){
            Log.d("Hey I got the Network","!!");
            new GmailAsync().execute("");
        }else{
            Log.d("Attempt","No:"+counter);
            counter++;
            if(counter == 6){
                Log.d("Attempt","Finished");
            } else {
                mHandler.postDelayed(this, 5000);
            }
        }
    }, 5000);
} 
```

只要 counter < 6，runnable repost 本身

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T10:42:47.530

只需将对 FinderMain$1.gotLocation 的每次调用或在其中创建的 AsyncTask 封装在 Runnable 中，然后将其发布到绑定到 UI 线程的 Handler，如下所示：

```
class GetLastLocation extends TimerTask {
    private Handler mHandler = new Handler(Looper.getMainLooper());

        @Override
        public void run() {
           // ...
           mHandler.post(new Runnable() {
              public void run() {
                  locationResult.gotLocation(null);
              }
           });
           // ...
         }
    } 
```

# javascript - 库依赖和执行顺序

> ID：13527212
> 
> 赞同：0
> 
> 时间：2012-11-23T10:30:30.860
> 
> 标签：javascript

如果我在 core.js 文件中有一个对象并且我想在 extension.js 中扩展它，我如何确保 core.js 中的对象在扩展之前实际加载？管理这种依赖关系的好（轻）模式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:38:28.840

您只需确保在 HTML 文件的标题中以正确的顺序加载 .js 文件。它们将按照您放置它们的顺序加载。

或者您可以执行以下操作：

 `````
if(MyFramework === undefined)
    alert('MyFramework not loaded'); 
````  `如果当前未加载名为 MyFramework 的对象，则会引发该警报错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T10:39:15.360

如果它是一个对象，那么您应该能够检查它是否为空或未定义...

```
if (myObject === null || myObject === undefined) {
   alert("not loaded");
} 
`````

# powershell - 从行号和列号中提取文本

> ID：13527217
> 
> 赞同：0
> 
> 时间：2012-11-23T10:30:56.493
> 
> 标签：powershell, batch-file

我尝试编写一个接受参数的脚本：

*   线的范围
*   列范围

例如： cmd 文件名 1 5 12 87 其中 1 和 5 是行范围，12 和 87 是列范围

我想从这些范围中提取文本。

我使用 head 和 tail 找到了 line 的东西，但我不知道如何选择相应的列。

**仅适用于 windows**：批处理、powershell。

* * *

**更新 1**

**文件.txt**

```
define('HTTP_REQUEST_METHOD_GET',     'GET',     true);
define('HTTP_REQUEST_METHOD_HEAD',    'HEAD',    true);
define('HTTP_REQUEST_METHOD_POST',    'POST',    true);
define('HTTP_REQUEST_METHOD_PUT',     'PUT',     true);
define('HTTP_REQUEST_METHOD_DELETE',  'DELETE',  true);
define('HTTP_REQUEST_METHOD_OPTIONS', 'OPTIONS', true);
define('HTTP_REQUEST_METHOD_TRACE',   'TRACE',   true); 
```

cmd文件.txt 1 3 19 27

**输出**：

```
 ST_METHOD_GET',     'GET',     true);
define('HTTP_REQUEST_METHOD_HEAD',    'HEAD',    true);
define('HTTP_REQUEST_METHO 
```

我在第一行添加空白只是为了更好地表示。

事实上，该脚本模拟了从 W 列开始（仅用于第一行）并在 Z 列（仅用于最后一行）开始从 X 行到 Y 行的文本选择

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T10:57:04.207

试试这个：

```
Function SelectTextRange( $path, $SL, $EL, $SS , $ES)
{
  $txt = gc $path
  $txt | select -First (($EL+1)-$SL) -Skip ($SL-1) |
     % { $_.substring( ($SS-1) ,($ES-$SS+1) )}
} 
```

我了解列和行值是包含值。

在您获得更准确的样本后，请尝试以下操作：

```
Function SelectTextRange( $path, $SL, $EL, $SS , $ES)
{
  $txt = gc $path
  $c = 0
  $txt[($sl+1)..($el+1)] | % { 

  if ($c -eq 0) { $_.substring($ss-1) } 
  if ($c -gt 0 -and $c -lt $txt[$sl..$el].count ) { $_}
  if ($c -eq ($txt[$sl..$el].count) ) { $_.substring(0,$es+1) } ;

  $c++
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T11:25:56.113

```
@echo off
setlocal EnableDelayedExpansion

set n=1
set /a start=%4-1
set /a len=%5-%4

for /f "usebackq delims=" %%a in ("%1") do (
  if !n! gtr %3 exit /b
  if not !n! lss %2 (
    set "row=%%a"
    echo !row:~%start%,%len%!
  )
  set /a n += 1
) 
```

**编辑：**根据你的例子，我更新了我的答案，我认为你正在寻找这个：

```
@echo off
setlocal EnableDelayedExpansion

set n=1
set /a startc=%4-1
set /a endc=%5-1

for /f "usebackq delims=" %%a in ("%1") do (
  set "row=%%a"
  if !n! == %3 (
    if !n! == %2 echo !row:~%startc%,%endc%!
    if not !n! == %2 echo !row:~0,%endc%!
    exit /b
  )
  if !n! == %2  echo !row:~%startc%!
  if !n! gtr %2 echo !row!
  set /a n += 1
) 
```

# java - Java泛型转换为

> ID：13527220
> 
> 赞同：-1
> 
> 时间：2012-11-23T10:31:07.013
> 
> 标签：java, generics, casting

我有以下课程

```
public class DBField<T>
{
  protected String fieldName;
  protected FieldConverter c;
  protected T value;
  protected DataObject dataObject;

  public T getValue()
  {
    return value;
  }

  public void setValue(T value)
  {
    this.value = value;
  }

  public DBField(DataObject dataObject, String fieldName, FieldConverter c)
  {
    this.fieldName = fieldName;
    this.c = c;
    this.dataObject = dataObject;
  }
} 
```

T 应该是 Boolean、Float、String 等。

```
protected void ValuesToFields(List<Object> values, List<DBField<?>> fields) throws Exception
  {
    if (values.size() != fields.size())
      throw new Exception("Length does not match.");
    for (int i = 0; i < values.size(); i++)
    {
      Class valueClass = values.get(i).getClass();
      Class fieldClass = fields.get(i).getValue().getClass();
      if (valueClass.equals(fieldClass))
      {
        fields.get(i).setValue(values.get(i));
      }
      else
        throw new Exception("type mismatch");
    }
  } 
```

对象也应该包含布尔值、浮点数、字符串等。

这段代码的问题是

```
fields.get(i).setValue(values.get(i)); 
```

语法检查器告诉我我需要转换 values.get(i) （到？我怀疑）。我该怎么做呢？我已经尝试过 valueClass.cast(values.get(i)) 但没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T04:39:06.813

为了使您的代码安全，对于每个`i`，第 i 个元素`values`必须是 的第 i 个元素的类型参数的`DBField`实例`fields`。您的代码不保证这成立，事实上没有办法在 Java 中声明它们以确保对应元素之间的这种关系是真实的。而且由于类型擦除，您甚至无法在运行时检查元素是否正确，因为给定一个字段，您不知道它的类型参数。所以必须有一些未经检查的演员表，我们必须相信这些论点是正确的。

最简单的做法是将每个字段转换为`DBField<Object>`：

```
((DBField<Object>)fields.get(i)).setValue(values.get(i)); 
```

这有点像“相信我们，我们知道这个字段可以取任何`Object`值”，因此它可以取任何类型的值。这有点撒谎，因为我们知道应该存在类型参数不是的字段`Object`，但是由于无论如何我们都必须进行某种未经检查的强制转换，因此这种“不安全强制转换”并不比其他解决方案差。

或者，如果你不想做这个可以说是可疑的转换，一个更“合法”的方法是编写一个私有帮助器方法——一个“包装器帮助器”——它明确命名字段的类型参数，允许我们简单地将值转换为这种类型：

```
private <T> static void ValueToField(Object value, DBField<T> field) {
    field.setValue((T)value);
}

//...
ValueToField(values.get(i), fields.get(i)); 
```

请注意，这里的演员表也是未经检查的演员表。这种方法的缺点是它需要编写额外的方法的开销。

PS你的支票`valueClass`和`fieldClass`不是很好。首先，如果一个字段的值为 current `null`，会导致空指针异常。此外，a 的值`DBField<T>`是 的任何实例`T`，其实际类可能是 ; 的子类`T`。所以如果你用它来检查，它可能会导致不好的结果。如果`DBField`包含 的类的类对象可能是最好的`T`，所以它可以用来检查。此外，您不应将相等性与值的实际类进行比较，因为 的子类`T`也可以工作，因此您应该检查一下`fieldClass.isInstance(values.get(i))`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T10:33:01.183

`if(values.get(i) instanceof valueClass)`?

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-23T10:34:16.407

你有一个`List<Object>`.

你应该有一个`List<DBField<Object>>`匹配它，或者将你的第一个列表更改为`List<?>`

# c# - 如何使用 C# 表达式树创建一个 LINQ 友好的“return false”表达式？

> ID：13527221
> 
> 赞同：3
> 
> 时间：2012-11-23T10:31:08.067
> 
> 标签：c#, .net, linq, expression-trees

我有一些代码可以根据用户输入动态构建一些搜索条件，从而将`Expression<Func<T, bool>>`其传递给 LINQ .Where() 方法。当输入存在时它工作正常，但是当输入*不*存在时，我想创建一个简单的'return false;' 语句，以便不返回任何结果。

下面是我当前的尝试，但是当它被传递给 .Where() 方法时，它会抛出 NotSupportedException“‘Block’类型的未知 LINQ 表达式”。

```
var parameter = Expression.Parameter(typeof(T), "x");
var falseValue = Expression.Constant(false);
var returnTarget = Expression.Label(typeof (bool));

var returnFalseExpression = Expression.Block(Expression.Return(returnTarget, falseValue), Expression.Label(returnTarget, falseValue));
var lambdaExpression = Expression.Lambda<Func<T, bool>>(returnFalseExpression, parameter); 
```

如何构建可以由 LINQ 解释的“return false”表达式？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T10:33:05.847

```
Expression<Func<T, bool>> falsePredicate = x => false; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-23T10:44:13.937

你能把整个事情包装在一个 if-else 表达式中吗？

意义：

```
if input
    return <your normal code>
else
    return false 
```

return 隐含在表达式中；表达式的返回值将只是最后一个值。所以你可以尝试：

```
 Expression.Condition
    (
      Expression.NotEqual(input, Expression.Constant("")), 
      normalSearchExpression, 
      Expression.Constant(false)
    ) 
```

假设`normalSearchExpression`还返回一个布尔值。

# jquery - jQuery插件不适用于动态添加的元素

> ID：13527227
> 
> 赞同：0
> 
> 时间：2012-11-23T10:31:38.330
> 
> 标签：jquery

如何让 jQuery 插件为动态添加的元素工作？每次单击“添加”按钮时，我都会尝试将几个日期选择器添加到 DIV 日期 **列表中。**该插件不适用于动态添加的文本框。有人可以请教吗？

谢谢你

**HTML**

```
<div class="datesList">
    <div class="date">
        <input type="text" class="date-picker"/>
    </div>
</div>

<div class="addDate">
    Add Date
</div> 
```

JS

```
$(".date-picker").datepicker();

$(".addDate").click(function(){
   var dList = $(".datesList");
   dList.find(".date").first().clone(false).appendTo(dList);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:36:30.140

使用 jquery on() [http://api.jquery.com/on/](http://api.jquery.com/on/)像这样：

```
$(document).on('click', '.addDate', function() {
     YOUR FUNCTION
}); 
```

为了获得更好的性能而不是 $(document)，请使用第一次加载的最近的 DOM 元素

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T10:43:45.037

尝试这个

```
 $(".date-picker").datepicker();

 $(".addDate").click(function(){
   var dList = $(".datesList");
   dList.find(".date").first().clone(false).appendTo(dList);
   $(".date-picker").datepicker();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T11:18:47.043

这行得通，但你可能不喜欢我做的方式

```
$(".date-picker").datepicker();

$(document).on('click', '.addDate', function() {
    var dList = $(".datesList");
    var newinput = $('<input type="text" />').attr('class', 'date-picker');
    dList.append(newinput);
    var newdatepickr = $(".date-picker").datepicker();
});​ 
```

**[http://jsfiddle.net/2pFAd/](http://jsfiddle.net/2pFAd/)**

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-23T10:40:58.250

如果这是 jQuery UI 日期选择器，您可以`.datepicker('refresh')`在每次更新后简单地调用。

# linux - 如何告诉 rpm 查看特定目录的依赖项？

> ID：13527228
> 
> 赞同：1
> 
> 时间：2012-11-23T10:31:40.137
> 
> 标签：linux, python-2.7, rpm, suse

我有一个需要在 SLES 11 上安装的 rpm 包。由于未解决的依赖关系，安装失败。

```
$ rpm -ivh xpra-0.3.11-1.x86_64.rpm
warning: xpra-0.3.11-1.x86_64.rpm: Header V4 DSA signature: NOKEY, key ID f18ad6bb
error: Failed dependencies:
        libpython2.7.so.1.0()(64bit) is needed by xpra-0.3.11-1.x86_64
        python(abi) = 2.7 is needed by xpra-0.3.11-1.x86_64 
```

选中后，SLES 11 上的默认 python 安装为 2.6。我找不到 SLES 11 的 python 2.7 rpm 包。我通过构建源代码安装了 python 2.7。

现在，每当我尝试安装相同的软件时，都会遇到相同的错误。

如何告诉 rpm 包管理器查看特定目录以找到所需的依赖项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:33:01.617

你不能 - 唯一`rpm`可以知道的依赖项是使用`rpm`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T10:41:44.320

[您可以从该站点](http://rpm.pbone.net/index.php3?stat=3&search=python&srodzaj=3)下载预构建的 python 2.7 RPM并使用例如`python-rpm -i 2.7.3-3.6.1.x86_64.rpm`. 请记住，我不是 SLES 用户，所以我的建议是一种摸索。

# mysql - 选择给定 start_datetime 和 end_datetime 的所有行

> ID：13527230
> 
> 赞同：1
> 
> 时间：2012-11-23T10:31:48.630
> 
> 标签：mysql, database

我有这个带有以下记录的 mysql 表。

表名：`gce_arena_surface_booking`

```
+----+---------------------+---------------------+------------------+
| id | start_datetime      | end_datetime        | arena_surface_id |
+----+---------------------+---------------------+------------------+
|  1 | 2012-11-22 02:30:00 | 2012-11-22 05:00:00 |                2 |
|  2 | 2012-11-22 00:00:00 | 2012-11-22 02:30:00 |                2 |
|  3 | 2012-11-22 05:00:00 | 2012-11-22 08:00:00 |                2 |
|  4 | 2012-11-22 08:00:00 | 2012-11-22 11:00:00 |                2 |
|  5 | 2012-11-22 11:00:00 | 2012-11-22 17:00:00 |                2 |
|  6 | 2012-11-22 17:30:00 | 2012-11-22 22:00:00 |                2 |
|  7 | 2012-11-23 02:00:00 | 2012-11-23 18:00:00 |                2 |
+----+---------------------+---------------------+------------------+ 
```

我需要知道给定的日期时间，如果已经存在任何预订，我正在使用此查询来检查给定的任何预订是否存在`start_datetime`，并且`end_datetime`

```
SELECT 
    id, start_datetime, end_datetime, arena_surface_id 
FROM 
    gce_arena_surface_booking 
WHERE (
    (start_datetime BETWEEN '2012-11-23 2:00' AND '2012-11-23 6:00') OR 
    (end_datetime BETWEEN '2012-11-23 2:00' AND '2012-11-23 6:00')
) 
AND arena_surface_id = 2 
```

上面的查询给我带来了问题，例如，如果我的值从：

```
'2012-11-23 2:00' AND '2012-11-23 6:00' 
```

至

```
'2012-11-23 2:30' AND '2012-11-23 6:00' 
```

请注意，我已将值从 更改`2:00`为`2:30`，如果我这样做，它不会返回任何结果，而参考上面的记录，我希望它返回带有 id 的行，`7`因为我在`2:00`and 和之间预订了时间段`18:00`，因此任何与时间相匹配的给定值`02:00`都`18:00`应该返回一行。

处理我的问题的正确 mysql 查询是什么？

如果您想使用记录和模式，这里是[sqlfiddle的链接。](http://sqlfiddle.com/#!2/ca82d/1)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T05:40:49.830

下面给出了查找**重叠预订的查询。**只需要再添加一项检查来查找我们正在搜索的插槽是否在数据库中已预订的插槽中。它就像搜索槽的开始日期和结束日期都在已经预订的槽中。

```
SELECT 
    id, start_datetime, end_datetime, arena_surface_id 
FROM 
    gce_arena_surface_booking 
WHERE (
    (start_datetime BETWEEN '2012-11-23 2:30' AND '2012-11-23 6:00') OR 
    (end_datetime BETWEEN '2012-11-23 2:30' AND '2012-11-23 6:00')

  OR '2012-11-23 2:30' BETWEEN start_datetime AND end_datetime

) 
AND arena_surface_id = 2 
```

如果需要找出数据库中**不重叠的插槽**，请使用以下查询。是对上述的否定。

```
SELECT * FROM `gce_arena_surface_booking`
WHERE (`arena_surface_id`=2)
AND
(start_datetime NOT BETWEEN '2012-11-23 02:30:00' AND '2012-11-23 06:00:00')
AND
(end_datetime NOT BETWEEN '2012-11-23 02:30:00' AND '2012-11-23 06:00:00')
AND
('2012-11-23 02:30:00' NOT BETWEEN start_datetime AND end_datetime) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T10:36:04.207

```
 SELECT 
        id, start_datetime, end_datetime, arena_surface_id 
    FROM 
        gce_arena_surface_booking 

    Where ('2012-11-23 2:30' between start_datetime and end_datetime)
    and ('2012-11-23 6:00' between start_datetime and end_datetime) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T11:28:37.827

在新预订结束时或之后开始的预订，或者在新预订开始时或之前结束的预订都没有问题。

因此，您需要查找的预订​​既在您的新预订结束之前开始，又在您的新预订开始之后结束。

你的查询应该是

```
SELECT id, start_datetime, end_datetime, arena_surface_id 
FROM gce_arena_surface_booking 
WHERE ('2012-11-23 6:00' > start_datetime)
AND ('2012-11-23 2:00' < end_datetime)
AND arena_surface_id = 2 
```

# c# - 如何在 iText 中用 ColumnText 替换 MultiColumnText

> ID：13527234
> 
> 赞同：1
> 
> 时间：2012-11-23T10:31:58.817
> 
> 标签：c#, .net, itextsharp, itext

我在代码中有这样的陈述

```
MultiColumnText mct = new MultiColumnText(MultiColumnText.AUTOMATIC);
mct.AddRegularColumns(document.Left, document.Right, 30f, 2);
mct.AddElement(table); 
```

但是在将 iText 升级到 5.3.3 后，他们删除了 MultiColumnText 并建议改用 ColumnText！

用 ColumnText 重写这段代码的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:54:00.130

有很多可用的例子。寻找关键字[ColumnText](http://itextpdf.com/themes/keyword.php?id=59)。

例如看这个例子：http: [//itextpdf.com/examples/iia.php ?id=68](http://itextpdf.com/examples/iia.php?id=68)

您需要的代码如下所示：

```
float middle = (document.left() + document.right()) / 2;
float[][] columns = {
        { document.left(), document.bottom(), middle - 15, document.top() } ,
        { middle + 15, document.bottom(), document.right(), document.top() }
};

ColumnText ct = new ColumnText(writer.getDirectContent());
ct.addElement(table);
int column = 0;
int status = ColumnText.START_COLUMN;
while (ColumnText.hasMoreText(status)) {
  ct.setSimpleColumn(
    COLUMNS[column][0], columns[column][1],
    COLUMNS[column][2], columns[column][3]);
  status = column.go();
  if (++count > 1) {
    count = 0;
    document.newPage();
  }
} 
```

# maven - Maven：如何将罐子标记为已密封？

> ID：13527235
> 
> 赞同：4
> 
> 时间：2012-11-23T10:32:00.543
> 
> 标签：maven

这听起来很简单，那我为什么要挣扎？

有没有可以用来密封所有包裹的 POM 条目？

或者我是否提供价值为“密封：真”的清单？

谢谢杰夫波特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T16:19:22.177

*> 或者我是否提供价值为“密封：真”的清单？*

如[“清单定制”](http://maven.apache.org/plugins/maven-jar-plugin/examples/manifest-customization.html)中所述：

```
<project>
  ...
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-jar-plugin</artifactId>
        <version>2.6</version>
        <configuration>
          <archive>
            <manifestEntries>
              <Sealed>true</Sealed>
            </manifestEntries>
          </archive>
        </configuration>
        ...
      </plugin>
    </plugins>
  </build>
  ...
</project> 
```

# java - 重用 HttpURLConnection

> ID：13527237
> 
> 赞同：7
> 
> 时间：2012-11-23T10:32:10.947
> 
> 标签：java, android, http, httpurlconnection

在我的应用程序中，我使用如下代码下载多个图像。这样做是高性能还是我可以以某种方式重用连接？

```
 for(int i = 0; i < 100; i++){  
    URL url = new URL("http://www.android.com/image" + i + ".jpg");
           HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
           try {
             InputStream in = new BufferedInputStream(urlConnection.getInputStream());
             readStream(in);
            finally {
             urlConnection.disconnect();
           }
         }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T10:49:52.687

您不会真正从重用`HttpURLConnection`.

对您的应用程序大有裨益的一件事是，如果您花一些时间研究**Async Tasks**，这将允许您利用多线程 HTTP 请求的强大功能以及对主代码的回调。

请参阅： [http](http://www.vogella.com/articles/AndroidPerformance/article.html) : //www.vogella.com/articles/AndroidPerformance/article.html，了解如何使用异步任务的一个很好的示例。

一个很好的起点当然是**Android Developers Blog**，他们有一个从服务器异步下载图像的示例，这将很好地满足您的要求。通过一些调整，您可以让您的应用程序一次发送多个异步请求以获得良好的性能。

可以在以下位置找到 Google 文章： [http ://android-developers.blogspot.co.uk/2009/05/painless-threading.html](http://android-developers.blogspot.co.uk/2009/05/painless-threading.html)

要查看的关键区域是：

```
public void onClick(View v) {
  new DownloadImageTask().execute("http://example.com/image.png");
}

private class DownloadImageTask extends AsyncTask {
     protected Bitmap doInBackground(String... urls) {
         return loadImageFromNetwork(urls[0]);
     }

     protected void onPostExecute(Bitmap result) {
         mImageView.setImageBitmap(result);
     }
 } 
```

该`loadImageFromNetwork`方法是下载发生的地方，并且与您的主 UI 线程完全异步。

作为一个基本示例，您可以修改您的应用程序以像这样调用它：

```
for(int i = 0; i < 100; i++){  
    new DownloadImageTask().execute("http://www.android.com/image" + i + ".jpg");
} 
```

虽然为了优化，我不会一次抛出 100 个请求，可能会创建一个线程队列系统，它可能允许 4 或 5 个并发连接，然后通过维护一个`ArrayList`待读取的请求来保持其余连接通过，当另一个连接完成时.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T10:35:58.553

不管你怎么做，你最终都会打开多个连接，一个来获取每个图像。这就是接收任何图像的方式。而且无论如何都没有办法改变`HttpURLConnection`。所以从这个意义上说，这看起来不错。

但是，您可以尝试通过线程同时加载多个图像。实施这样的方案会有些复杂，但完全有可能。它将通过同时请求多个图像来加速该过程。

# c# - 如何使用带有 FillDataSet(ds) 方法的 LINQ 填充数据集 c#

> ID：13527247
> 
> 赞同：0
> 
> 时间：2012-11-23T10:32:36.187
> 
> 标签：c#, winforms, linq

如何使用带有 FillDataSet(ds) 方法的 LINQ 填充数据集。当我尝试实现此代码时，我遇到了当前上下文中不存在 FillDataSet 之类的错误。

我的代码是

```
DataSet ds = new DataSet();
ds.Locale = CultureInfo.InvariantCulture;
FillDataSet(ds);

DataTable products = ds.Tables["emp"];

IEnumerable<DataRow> query =
    from product in dtContext.emps.AsEnumerable()
    select product; 
```

请告诉我如何使用 FillDataSet(ds) 方法填充数据集。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:39:55.133

您不必填写*LINQ2SQL*`DataSet`。您也不必使用`DataTable`等。您只需要数据上下文并对其执行查询：

```
var query = from product in dtContext.emps
            select product; 
```

`query`将是类型`IQueryable<T>`，您可以在其上使用例如 a`foreach`来浏览其内容，或使用`where`子句进一步过滤它。你为什么要一个`DataSet`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T10:41:52.930

你必须定义你的`FillDataSet(DatatSet ds)`方法。如果您遵循 MSDN 教程，您可能应该实现与此[示例类似的内容。](http://msdn.microsoft.com/en-us/library/bb399340.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T10:42:14.673

从你的帖子

> 当前上下文中不存在 FillDataSet。

这显然意味着它无法访问 FillDataSet 方法，否则您的方法不存在。

如果存在，则尝试将访问说明符更改为`public`是否在不同的类中。

PS：您是否声明了任何名为的方法`FillDataSet`？

# c++ - 取消引用超出范围的向量迭代器 - 会发生什么，为什么？

> ID：13527252
> 
> 赞同：2
> 
> 时间：2012-11-23T10:32:54.490
> 
> 标签：c++, vector, iterator

在我的设置上运行它：

```
 vector<int> myvector;
  for (int i=1; i<=5; i++) myvector.insert(myvector.end(),i);

  vector<int>::iterator it;
  for ( it=myvector.begin() ; it < myvector.end()+2; it++ )
    cout << " " << *it; 
```

产量：

> 1 2 3 4 5 0 0

我原以为尝试取消引用超出范围的迭代器会导致段错误。但它似乎产生了向量中包含的类型的空对象或默认初始化对象。

这是明确定义的行为吗？这个属性是从哪里来的，来自迭代器还是来自向量？迭代器是否在某种意义上捕获了超出范围的异常并返回一个空对象？

我尝试在 C++11 参考中找到它，但感觉有点过头了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T10:34:21.367

这是未定义的行为，这意味着任何事情都可能发生，包括段错误、您所经历的事情或其他任何事情。基本上，你很幸运它没有崩溃（或者不走运，基于观点）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T10:50:22.660

> 我原以为尝试取消引用超出范围的迭代器会导致段错误。

不，它给出了未定义的行为。该语言不需要检查迭代器访问，因为这需要运行时检查。C++ 通常会尽量避免不必要的运行时开销，让程序员执行任何必要的检查。

大多数现代平台使用分页虚拟内存，以几千字节的粒度提供内存保护。这意味着在分配的块（例如由 管理的块`std::vector`）之后通常有可访问的内存，在这种情况下，超出范围的访问只会踩到该内存。

可以在 C++ 库中启用运行时迭代器检查；或者，诸如[valgrind](http://valgrind.org/)或[efence 之](http://linux.die.net/man/3/efence)类的工具可以帮助调试各种内存错误，包括超出范围的访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T10:46:38.727

C++ Vector 实现是使用数组完成的——如果大小超过，那么它会增加底层数组的大小：
这是 Facebook 不久前开源的一些有趣的代码——关于内存管理的评论是了解更多内容的好方法在引擎盖下[Facebook FBvector](https://github.com/facebook/folly/blob/master/folly/docs/FBVector.md)

你得到的结果相当于“C 数组”的越界访问 - 随机 :-)

# php - 用户的输出文件

> ID：13527253
> 
> 赞同：0
> 
> 时间：2012-11-23T10:33:00.647
> 
> 标签：php, html, mysql

好吧，解释我正在建设的网站可能有点困难，但基本上用户应该上传一些关于他们自己的基本数据，比如名字和姓氏年龄城市状态和他们自己的照片

我将所有这些数据都发送到了一个 mysql 服务器，并通过 pdo 确保了这一点，这要归功于堆栈溢出的一些用户，但现在我已经完成了所有数据的获取，我很想知道这些数据是否可见。

我的直觉是让 php 文件在我的目录中生成一个输出文件

所以基本的例子我用 FirstName:Jeff LastName:Fisher UniqueRandomIDGen:50af3da6bd0da 注册

将获取该数据并将其上传到mysql，然后在包含闲置数据MYDOMAIN.Com/ACCOUNTS/Jeff_Fisher_50af3da6bd0da的目录中创建文件

```
file_put_contents('FirstName_LastName_UniqueRanodmIDGEN.html', 'ENTER HTML'); 
```

该文件中的代码基本上只是创建一个 mysqli php 脚本，该脚本将仅使用随机代码 50af3da6bd0da 为 Jeff Fisher 提取数据

现在，这只是我对 c++ 和其他脚本语言的直觉，让我知道这是否过于复杂和毫无意义，以及您将如何处理。

# asp.net - ASP.net MVC 3.0 页面流

> ID：13527260
> 
> 赞同：1
> 
> 时间：2012-11-23T10:33:12.507
> 
> 标签：asp.net, asp.net-mvc-3, razor

我以前在 JAVA 中使用过 Spring MVC webflows，想知道 .net MVC 中的等价物是什么？工作流肯定不是我需要的页面流（例如：使用上一个下一个按钮注册）。我知道 Spring.Net 作为插件，但想知道我是否在 .net 中遗漏了任何东西，或者我别无选择，只能使用 Spring？

非常感谢，

# sql - SQL 2表，首先获得计数，按秒分组

> ID：13527263
> 
> 赞同：5
> 
> 时间：2012-11-23T10:33:29.823
> 
> 标签：sql, database, ms-access

我在 MS Access 2003 中工作。

我有这种结构的记录表：

```
ID, Origin, Destination, Attr1, Attr2, Attr3, ... AttrX

for example:

1,  1000,   1100,        20,    M,     5 ...
2,  1000,   1105,        30,    F,     5 ...
3,  1001,   1000,        15,    M,     10 ...
... 
```

我也有分组的出发地和目的地代码的表

```
Code, Country, Continent
1000, Albania, Europe
1001, Belgium, Europe
...
1100, China,   Asia
1105, Japan,   Asia
... 
```

我需要的是获得 2 个表，这些表将根据与我指定的属性相关的标准计算记录，但按以下方式分组：
1\. 起源大陆和目的地大陆
2\. 起源大陆和目的地国家

例如：

情况1。

```
Origin, Destination, Total, Females, Males, Older than 20, Younger than 20, ...
Europe, China,       300,   100,     200,   120,           180 ...
Europe, Japan,       150,   100,     50, ...
... 
```

案例 2。

```
Origin, Destination, Total, Females, Males, Older than 20, Younger than 20, ...
Europe, Asia,        1500,  700,     800 ...
Asia,   Europe,      1200, ...
... 
```

可以这样做，以便我可以轻松地添加更多列/标准吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:22:37.990

情况1：

```
select count(1) as total ,t2.continent,t3.country,t1.attr1,t1.attr2,t1.attr3 ... t1.attrX from table1 t1
join table2 t2 on t1.origin = t2.code
join table3 t3 on t1.destination = t3.code
group by t2.continent,t3.country,t1.attr1,t1.attr2,t1.attr3 ... t1.attrX 
order by total desc 
```

案例二：

```
select count(1) as total ,t2.continent,t3.continent,t1.attr1,t1.attr2,t1.attr3 ... t1.attrX from table1 t1
join table2 t2 on t1.origin = t2.code
join table3 t3 on t1.destination = t3.code
group by t2.continent,t3.continent,t1.attr1,t1.attr2,t1.attr3 ... t1.attrX 
order by total desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T22:53:30.537

您可以将查询与查询连接起来，因此这是男性/女性 (attr2) 的交叉表

```
TRANSFORM Count(Data.ID) AS CountOfID
SELECT Data.Origin, Data.Destination, Count(Data.ID) AS Total
FROM Data
GROUP BY Data.Origin, Data.Destination
PIVOT Data.Attr2; 
```

这是年龄：

```
TRANSFORM Count(Data.ID) AS CountOfID
SELECT Data.Origin, Data.Destination, Count(Data.ID) AS Total
FROM Data
GROUP BY Data.Origin, Data.Destination
PIVOT Partition([Attr1],10,100,10); 
```

这结合了两者：

```
SELECT Ages.Origin, Ages.Destination, Ages.Total,
       MF.F, MF.M, Ages.[10: 19], Ages.[20: 29], Ages.[30: 39]
FROM Ages, MF; 
```

如您所见，这在 VBA 中可能更容易管理。

# java - Antlr NoViableAltException

> ID：13527265
> 
> 赞同：-1
> 
> 时间：2012-11-23T10:33:35.017
> 
> 标签：java, antlr

我有一个使用 Antlr 3 的简单语法：

```
grammar i;

@header {
package com.data;
}

null        : 'null';
value       : null | STRING;
elements    : value? | (value ',' value)+;
STRING      : ('a'..'z'|'A'..'Z')+;
WS      : (' '|'\t'|'\f'|'\n'|'\r')+ {skip();}; // handle white space between keywords 
```

我想要实现的是我有一个价值。因此，一个值可以是可选的，也可以是一个逗号后跟另一个值的值。例如：

value 可以是 true，或者 value 可以是 true，true，true，true。

当我进行解释时，以下工作：

真的

或真，真

当我尝试 true、true、true 时，树显示为 true、true，但显示 NoViableAltException。

我也试过：

```
elements: value? | (value ',' value)*; 
```

但这也不起作用。

有什么想法我哪里出错了吗？

编辑：

```
insert      : 'INSERT INTO TABLE' 'VALUES' '('elements')'';'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:54:22.357

编写规则时，`elements`它只派生零或一个值，或任何数量的以逗号分隔的对，对之间没有逗号。

显然你想要的是这样的：

```
elements: ( value ( ',' value )* )?; 
```

This allows for nothing at all (due to the `?` operator), or a single value followed by zero or more (`*`) occurrences of a comma and a value.

# java - OpenJPA 说：你已经为 FooBar 提供了列，但是这个映射在这个上下文中不能有列

> ID：13527269
> 
> 赞同：5
> 
> 时间：2012-11-23T10:33:47.860
> 
> 标签：java, jpa, openjpa

我有一些 Java 实体类在我的生产代码中运行良好。我正在为这个应用程序编写一个自动化测试，我正在重用相同的类。

当测试应用程序以这种方式创建其实体管理器时：

```
 Properties props = new Properties();
 props.setProperty("provider", "org.apache.openjpa.persistence.PersistenceProviderImpl");
 props.setProperty(...);      
 EntityManagerFactory entityManagerFactory = Persistence.createEntityManagerFactory("foobar-upgrade-restful-test", props);

 EntityManager entityManager = entityManagerFactory.createEntityManager(); 
```

应用程序会抛出一条错误消息，告诉您：

```
Caused by: <openjpa-2.2.0-r422266:1244990 fatal user error> org.apache.openjpa.persistence.ArgumentException: You have supplied columns for "com.foo.bar.server.commontypes.job.CompositeJob", but this mapping cannot have columns in this context.
    at org.apache.openjpa.jdbc.meta.MappingInfo.assertNoSchemaComponents(MappingInfo.java:382)
    at org.apache.openjpa.jdbc.meta.strats.FlatClassStrategy.map(FlatClassStrategy.java:51)
    at org.apache.openjpa.jdbc.meta.ClassMapping.setStrategy(ClassMapping.java:392)
    at org.apache.openjpa.jdbc.meta.RuntimeStrategyInstaller.installStrategy(RuntimeStrategyInstaller.java:56)
    at org.apache.openjpa.jdbc.meta.MappingRepository.prepareMapping(MappingRepository.java:411)
    at org.apache.openjpa.meta.MetaDataRepository.preMapping(MetaDataRepository.java:762)
    at org.apache.openjpa.meta.MetaDataRepository.resolve(MetaDataRepository.java:651)
    ... 72 more 
```

我并不真正理解错误消息，因为同一实体 bean 在 Glassfish 下的应用程序中工作，并且 persistence.xml 也几乎相同。（在测试中我使用`RESOURCE_LOCAL`tx 而不是 JTA 但我怀疑它与这个错误有关。

你知道有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T13:09:37.613

该错误表明您提供的映射信息存在问题`com.foo.bar.server.commontypes.job.CompositeJob`。

我猜测它适用于 JTA 的原因，但不是本地资源很可能与在不同环境中加载/处理元数据的方式有些奇怪有关。如果您从您的实体发布相关的映射数据，将会很有帮助。

# c# - 让 INotifyPropertyChanged 类返回 List.Count

> ID：13527270
> 
> 赞同：0
> 
> 时间：2012-11-23T10:33:49.683
> 
> 标签：c#, inotifypropertychanged

我有以下课程：

```
public partial class Operation : INotifyPropertyChanged
{
    private int tasks;

    public int Tasks
    {
        get
        {
            return this.tasks;
        }
        set
        {
            if (this.tasks != value)
            {
                this.tasks = value;
                this.OnPropretyChanged("Tasks");
            }
        }
    }

    protected virtual void OnPropretyChanged(string propertyName)
    {
        var handler = this.PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
 } 
```

然后，我将这个类绑定到 dataGrid.DataSource，当 Tasks 变量发生变化时，它会在数据网格中实时更新。问题是我需要使用存储所有任务的 List 而不是 int，我希望 Tasks 返回 List.Count 而不是 int 任务，如下所示：

```
 public int Tasks
    {
        get
        {

            return this.TASKS.Count;
        }
        set
        {
            if (this.tasks != TASKS.Count)
            {
                this.tasks = TASKS.Count;
                this.OnPropretyChanged("Tasks");
            }
        }
    } 
```

但是 dataGrid 不会自动更新，我必须刷新它才能看到更新。有什么建议如何处理吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:36:05.907

`List`没有实现`INotifyPropertyChanged`或任何其他让您知道其内容何时更改的机制。你应该[`ObservableCollection<T>`](http://msdn.microsoft.com/en-us/library/ms668604.aspx)改用。

# .net - 替换 FormsAuthentication.HashPasswordForStoringInConfigFile？

> ID：13527277
> 
> 赞同：41
> 
> 时间：2012-11-23T10:34:11.413
> 
> 标签：.net, forms-authentication

升级到 .Net 4.5 后，我现在收到“System.Web.Security.FormsAuthentication.HashPasswordForStoringInConfigFile 已过时”的警告，建议改用会员 API。

这对新项目来说非常好，但是在这个阶段（存在用户数据和散列密码），我不能很好地更改为具有可能不同散列方式的自定义成员资格提供程序。

对于此类问题，推荐的前进方式是什么？继续使用“过时”调用显然不是建议的路径，那么它是否已被“仅使用成员资格 API”以外的其他内容所取代？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-12-13T12:06:33.207

这是 SHA1 变体的解决方案。

```
 public static string GetSwcSHA1(string value)
     {
        SHA1 algorithm = SHA1.Create();
        byte[] data = algorithm.ComputeHash(Encoding.UTF8.GetBytes(value));
        string sh1 = "";
        for (int i = 0; i < data.Length; i++)
        {
            sh1 += data[i].ToString("x2").ToUpperInvariant();
        }
        return sh1;
     } 
```

对于 MD5，您只需将算法更改为：

```
MD5 algorithm = MD5.Create(); 
```

* * *

希望您不介意，只需在上面添加代码的 VB.NET 变体：

```
 Public Shared Function CreateHash(saltAndPassword) As String
        Dim Algorithm As SHA1 = SHA1.Create()
        Dim Data As Byte() = Algorithm.ComputeHash(Encoding.UTF8.GetBytes(saltAndPassword))
        Dim Hashed As String = ""

        For i As Integer = 0 To Data.Length - 1
            Hashed &= Data(i).ToString("x2").ToUpperInvariant()
        Next

        Return Hashed
    End Function 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-02-25T04:19:52.127

> 对于此类问题，推荐的前进方式是什么？继续使用“过时”调用显然不是建议的路径，那么它是否已被“仅使用成员资格 API”以外的其他内容所取代？

纯粹在 .NET Framework 中的最佳方法（您已经排除）是更改所有内容以使用 PBKDF2、Bcrypt 或 Scrypt 散列密码。PBKDF2 在 .NET 中由[Rfc2898DeriveBytes Class](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rfc2898derivebytes%28v=vs.110%29.aspx)提供。

第二种最好的方法是最终得到两个“版本”的密码：

*   版本 0 本来是旧的 HashPasswordForStoringInConfigFile，但您可以将它们批量、离线更新到版本 1，并在任何人窃取它们之前将这些旧哈希完全删除，您最终会在贸易新闻中被视为具有可悲的 90 年代老式密码哈希。
*   版本 1，即现有 HashPasswordForStoringInConfigFile 值的 PBKDF2！即，您获取当前讨厌的旧哈希，并使用新的随机盐和大量迭代对它们进行 PBKDF2，然后存储结果。然后，当用户想要登录时，您将他们的密码提供给@RichardBažant 编写的代码，这样您就有了 HashPasswordForStoringInConfigFile 将返回的内容，*然后*您将 PBKDF2 应用于该结果！
    *   即它实际上是 Rfc2898DeriveBytes(HashPasswordForStoringInConfigFile(password)),PerUserSalt,YourIterations)
*   版本 2，具有版本 1 哈希的用户升级到该版本。除了“版本”之外的所有列都是相同的，但是在您计算并验证版本 1 之后，您计算 Rfc2898DeriveBytes(password),PerUserSalt,YourIterations) 并将版本 1 哈希替换为版本 2 哈希（并将版本更改为 2，当然）。

第三个最好的方法是第二个最好的方法，但只有版本 1。小心，这种方法是[DCC2 的](http://openwall.info/wiki/john/MSCash2)疯狂之处——你不断地将旧的输出包装在更新的算法中

在这两种情况下，您都将 PBKDF2-HMAC-SHA-1 结果存储在数据库中，因此您需要：

*   密码哈希 (BINARY(20)) - 即 PBKDF2 输出。
*   您的盐（BINARY(16)，由[RNGCryptoServiceProvider 类](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rngcryptoserviceprovider%28v=vs.110%29.aspx)为每个用户生成）
*   可选：PBKDF2 迭代次数（INT，从数万开始，直到您的服务器在最大负载下受 CPU 限制；随着硬件升级而增加）
    *   这使您可以在每次用户输入他们的（正确的）密码时透明地提高安全级别。首先验证它是正确的，然后用更高的迭代次数重新散列它
*   可选：一个“版本”（TINYINT），以便以后升级到另一种算法更容易，因为您可以同时激活多个版本。

PS 对于版本 1 或版本 2 更新的算法，Jither 创建了一个能够支持 PBKDF2-HMAC-SHA256、PBKDF2-HMAC-SHA512 等的 .NET 库；[我的 Github 存储库](https://github.com/Anti-weakpasswords/PBKDF2-CSharp-DeriveBytes-custom-A)包含它的一个变体，其中包含一组合理的测试向量。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-30T20:34:34.553

为什么不能使用.Net最简单的一个

```
public static string HashString(string inputString, string hashName)
{
  var algorithm = HashAlgorithm.Create(hashName);
  if (algorithm == null)
     throw new ArgumentException("Unrecognized hash name", hashName);

  byte[] hash = algorithm.ComputeHash(Encoding.UTF8.GetBytes(inputString));
  return Convert.ToBase64String(hash);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-12T13:53:48.647

理查德的回答对我很有用。这是从 .NET Framework 4.5 反编译的代码。如果有人觉得它更好，请使用它。我想它可能会快一点。

```
 public static string BinaryToHex(byte[] data)
        {
            if (data == null)
            {
                return null;
            }
            char[] hex = new char[checked((int)data.Length * 2)];
            for (int i = 0; i < (int)data.Length; i++)
            {
                byte num = data[i];
                hex[2 * i] = NibbleToHex((byte)(num >> 4));
                hex[2 * i + 1] = NibbleToHex((byte)(num & 15));
            }
            return new string(hex);
        }

        private static char NibbleToHex(byte nibble)
        {
            int aChar = (nibble < 10 ? nibble + 48 : nibble - 10 + 65);
            return (char)aChar;
        } 
```

# powershell - powershell - 格式化安装日期

> ID：13527281
> 
> 赞同：0
> 
> 时间：2012-11-23T10:34:20.620
> 
> 标签：powershell, datetime-format, powershell-3.0

嗨，我想比较不同的驱动器。如何格式化 InstallDate？

```
 @{"Label"=" InstallDate ";"Expression"={"{0:N}" -f ($_.InstallDate) –as [date]}}, ` 
```

Powershell中只有空间

```
Get-WmiObject -Class Win32_LogicalDisk |
Where-Object {$_.DriveType -ne 5} |
Sort-Object -Property Name | 
Select-Object Name, VolumeName, FileSystem, Status, Description, VolumeDirty,`
    @{"Label"="DiskSize(GB)";"Expression"={"{0:N}" -f ($_.Size/1GB) -as [float]}}, `
    @{"Label"=" InstallDate ";"Expression"={"{0:N}" -f ($_.InstallDate) –as [date]}}, `
    @{"Label"=" LastErrorCode ";"Expression"={"{0:N}" -f ($_.LastErrorCode) -as [int]}}, `
    @{"Label"="Access";"Expression"={"{0:N}" -f ($_.Access ) -as [float]}}, 
    @{"Label"="BlockSize";"Expression"={"{0:N}" -f ($_.BlockSize /1GB) -as [float]}}, `
    @{"Label"="NumberOfBlocks";"Expression"={"{0:N}" -f ($_.NumberOfBlocks /1GB) -as [float]}}, `
    @{"Label"="%Free";"Expression"={"{0:N}" -f ($_.FreeSpace/$_.Size*100) -as [float]}} |
Format-Table -AutoSize 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:49:58.103

要格式化日期，您可以使用以下内容：

```
"{0:yyyy-MM-dd}" 
```

# mysql - 自动电子邮件通知

> ID：13527284
> 
> 赞同：0
> 
> 时间：2012-11-23T10:34:31.743
> 
> 标签：mysql, sql-server, jsp, servlets

![在此处输入图像描述](../Images/022fff32fcc678dc24f9c2c6625f9733.png)

在这个项目中：当用户输入日期时。然后所有到期书将显示在显示到期详细信息表中，当用户单击电子邮件警报（超链接）时。自动将转到那个特定的学生：“你已经过了你的截止日期”。在这个里面 `Studentid`, `studentName`, `BookName`, `BookNo`, `Author`, `Eddition`,`Subject`以及`Return Date`.please `fine`let me know if you know this automatic mail Notification coding

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:51:50.093

当用户点击`Email Alert`超链接时，调用获取学生电子邮件地址的 servlet 计算罚款并使用[Java Mail](http://www.javaworld.com/jw-10-2001/jw-1026-javamail.html)发送自动电子邮件。

希望能帮助到你。

# android - 是否可以通过一次查询从联系人 Display_name + 电话号码 + 电子邮件中获取？

> ID：13527287
> 
> 赞同：0
> 
> 时间：2012-11-23T10:34:34.037
> 
> 标签：android, contacts

是否可以通过一个查询获取所有包含`Display_name`,`Phone Number`的联系人列表？`Email`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:48:37.120

查询相应的内容提供者 Uri。例如，android.provider.ContactsContract.CommonDataKinds.Email 允许您获取电子邮件地址，并且您的其他列（例如，IN_VISIBLE_GROUP）被隐式加入。

```
ContentResolver resolver = getContentResolver();
Cursor c = resolver.query(
        Data.CONTENT_URI, 
        null, 
        Data.HAS_PHONE_NUMBER + "!=0 AND (" + Data.MIMETYPE + "=? OR " + Data.MIMETYPE + "=?)", 
        new String[]{Email.CONTENT_ITEM_TYPE, Phone.CONTENT_ITEM_TYPE},
        Data.CONTACT_ID);

while (c.moveToNext()) {
    long id = c.getLong(c.getColumnIndex(Data.CONTACT_ID));
    String name = c.getString(c.getColumnIndex(Data.DISPLAY_NAME));
    String data1 = c.getString(c.getColumnIndex(Data.DATA1));

    System.out.println(id + ", name=" + name + ", data1=" + data1);
} 
```

# java - Java 23 小时制中的日期差异

> ID：13527292
> 
> 赞同：5
> 
> 时间：2012-11-23T10:34:50.010
> 
> 标签：java, date

我必须计算日期之间的差异，我找到了一种方法，但我得到了这个奇怪的结果，我错过了什么吗？

```
public static void main(String[] args) throws ParseException {
    DateFormat format = new SimpleDateFormat("yyyy-MM-dd HH:mm");
    long result = format.parse("2012-03-25 24:00").getTime() - format.parse("2012-03-25 00:00").getTime();
    System.out.println("Difference in hours: " + result/(1000*60*60));
    result = format.parse("2012-03-26 24:00").getTime() - format.parse("2012-03-26 00:00").getTime();
    System.out.println("Difference in hours: " + result/(1000*60*60));
} 
```

结果如下： 小时差异：23 小时差异：24

感谢您的建议，现在我正在使用 Joda libray，当我以这种方式计算差异时，我有这个问题：

```
DateTime  begin = new DateTime("2012-03-25T00:00+01:00");
DateTime  end = new DateTime("2012-03-26T00:00+01:00");
Hours m = Hours.hoursBetween(begin, end); 
```

如果我用这种方式来计算我得到 24 小时的小时数（因为我假设不考虑 DST）

考虑到夏令时（我已经尝试过不同的方法但我不明白），我应该使用什么课程/微积分来获得 23 小时的 Period 课程？

感谢所有的帮助...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-23T10:36:08.590

您可能碰巧选择了夏令时在该时区发生变化的日期，因此这一天实际上可能只有 23 小时。（2012 年 3 月 25 日当然是欧洲的 DST 更改日期，例如[Europe/London](http://www.timeanddate.com/worldclock/timezone.html?n=136)。不过我们不知道您的默认时区是什么。）

如果您将日期格式设置为使用 UTC，您应该不会看到这种效果。（请注意，在字符串表示中使用 24:00 有点奇怪。）目前尚不清楚您的数据*要*表示什么，或者您要测量什么。如果您想计算这些当地时间之间实际经过了多少时间，您应该计算出您的数据真正应该在哪个时区。

（如另一个答案中所述，[Joda Time](http://joda-time.sf.net)通常是一个更好的 API - 但您仍然需要知道如何正确使用它，并且在尝试计算实际经过的时间时，您仍然会在这里看到相同的结果.)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-02-16T10:17:07.297

必须像下面解释的那样放置库文件。

```
import java.util.Date;  

String dateStart = dateChooserCombo1.getText();
    String dateStop =dateChooserCombo2.getText();

    //HH converts hour in 24 hours format (0-23), day calculation
    SimpleDateFormat format = new SimpleDateFormat("MM/dd/yyyy");

    Date d1 = null;
    Date d2 = null;

    try {
        d1 =  format.parse(dateStart);
        d2 =  format.parse(dateStop);

        //in milliseconds
        long diff = d2.getTime() - d1.getTime();

        long diffSeconds = diff / 1000 % 60;
        long diffMinutes = diff / (60 * 1000) % 60;
        long diffHours = diff / (60 * 60 * 1000) % 24;
        long diffDays = diff / (24 * 60 * 60 * 1000);

        //System.out.print(diffDays + " days, ");
        jTextField3.setText(""+diffDays);

    } catch (Exception e) {
        e.printStackTrace();
    } 
```

# php - 检查同一文件中的 PHP 错误

> ID：13527294
> 
> 赞同：-1
> 
> 时间：2012-11-23T10:34:55.110
> 
> 标签：php

如何在执行同一文件时检查我的 PHP 文件中是否发生错误。我需要这个，因为我无法在浏览器中查看该文件。我想写下文本文件或日志文件中发生的任何错误。是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:38:02.933

尝试在日志文件中记录错误。

```
ini_set("log_errors", 1);
ini_set("error_log", "/path/to/php-error.log"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T10:36:20.713

您可以使用`error_reporting(-1);`来报告所有错误。

请参阅[此](http://php.net/manual/en/function.error-reporting.php)php.net 页面。我想你会在那里找到你需要的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T10:37:30.183

PHP 有`display_errors`和`error_reporting`设置。正确设置后，Apache 将在错误日志中记录 PHP 错误。

或者，您可以设置自己的错误处理程序。这样您就可以处理您可能遇到的任何错误（显然致命错误除外。

检查[`set_error_handler`](http://www.php.net/manual/en/function.set-error-handler.php)功能和其他。

# linux - apache2 Web 代理服务器上的多个 NIC

> ID：13527296
> 
> 赞同：1
> 
> 时间：2012-11-23T10:35:04.883
> 
> 标签：linux, networking, apache2, nic

我有一个关于具有两个 NIC 的 Linux 机器上的流量路由的问题。其中一个 NIC 在我们的 DMZ 网络 ( `10.1.9.0/24`) 上，另一个在我们的本地网络 ( `10.1.0.0./21`) 上：

```
default via `10.1.4.1` dev eth0 
default via `10.1.9.1` dev eth1  metric 100 
`10.1.0.0/21` dev eth0  proto kernel  scope link  src `10.1.0.132` 
`10.1.9.0/24` dev eth1  proto kernel  scope link  src `10.1.9.25` 
```

我们使用服务器作为网络代理。dmz 接口 (eth1) 从我们的外部 Internet 地址之一获取流量。所以在我们的主防火墙/路由器上存在一个 NAT 规则，它将请求转换为`10.1.9.25`. 这工作正常，请求被接受并响应。在这种情况下，连接在 eth1 上建立，响应也在 eth1 上。

问题：当我们想从本地网络内部访问网络服务器时，防火墙会将外部 ip 转换为 DMZ ip。可以从我们的本地网络中建立到 DMZ 服务器的连接，但反之则不行。在这种情况下，连接是从本地网络实例化到 DMZ，但网络服务器没有响应。

```
sudo tcpdump -i eth1 port 443 and src host 10.1.1.154
10:09:35.626450 IP 10.1.1.154.48870 > 10.1.9.25.https: Flags [S], seq 2491947547, win 14600, options [mss 1460,sackOK,TS val 2066949 ecr 0,nop,wscale 4], length 0
10:09:35.825619 IP 10.1.1.154.48871 > 10.1.9.25.https: Flags [S], seq 1827990665, win 14600, options [mss 1460,sackOK,TS val 2067011 ecr 0,nop,wscale 4], length 0
10:09:36.575239 IP 10.1.1.154.48870 > 10.1.9.25.https: Flags [S], seq 2491947547, win 14600, options [mss 1460,sackOK,TS val 2067199 ecr 0,nop,wscale 4], length 0
10:09:36.823264 IP 10.1.1.154.48871 > 10.1.9.25.https: Flags [S], seq 1827990665, win 14600, options [mss 1460,sackOK,TS val 2067261 ecr 0,nop,wscale 4], length 0
10:09:38.579373 IP 10.1.1.154.48870 > 10.1.9.25.https: Flags [S], seq 2491947547, win 14600, options [mss 1460,sackOK,TS val 2067700 ecr 0,nop,wscale 4], length 0
10:09:38.827290 IP 10.1.1.154.48871 > 10.1.9.25.https: Flags [S], seq 1827990665, win 14600, options [mss 1460,sackOK,TS val 2067762 ecr 0,nop,wscale 4], length 0 
```

SSH 也是一样，接口接收连接，但没有响应。我不确定问题出在哪里（在服务器上或防火墙/路由器设置上）。我们在 DMZ 中有其他运行良好的服务器，这里的系统管理员说网络配置是相同的。

谁能帮我诊断这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:45:13.403

你的问题在这里

```
default via `10.1.4.1` dev eth0 
default via `10.1.9.1` dev eth1  metric 100 
`10.1.0.0/21` dev eth0  proto kernel  scope link  src `10.1.0.132` 
`10.1.9.0/24` dev eth1  proto kernel  scope link  src `10.1.9.25` 
```

IP不能在同一个路由表中使用多条默认路由……想一想，如果从shell ping 4.2.2.2，应该使用哪个接口？

[Linux Advanced Routing and Traffic Control Howto](http://www.lartc.org/)有一些技巧可以用来实现多个路由表，但这通常会使事情变得比你想要维护的更复杂。

最简单的解决方案是选择一个接口，您可以在其中将所有内部公司网络聚合到一个超网中并为其分配一条路由……例如，该路由涵盖了所有不直接连接到 linux 机器的 10.xxx 网络。 .

```
route add -net 10.0.0.0 netmask 255.0.0.0 gw 10.1.0.132 
```

然后删除默认值`eth0`

# google-maps - 信息窗口在第一次点击时不会打开，而是在第二次点击事件时显示

> ID：13527297
> 
> 赞同：0
> 
> 时间：2012-11-23T10:35:09.313
> 
> 标签：google-maps, google-maps-api-3

我正在使用波纹管代码在我的地图中打开一个信息窗口

```
 //populate the  infowindow to defined marker map point
 function assignmarkerclick(marker1, index, message) {
     google.maps.event.addListener(marker1, 'click', function () {
         if (!infowindow) {
             infowindow = new google.maps.InfoWindow();
         }
         infowindow.setContent(message);
         infowindow.open(map, marker1);
     });
 } 
```

// 显示指定标记的信息窗口

```
function showMarker(index) {

    new google.maps.event.trigger(marker[index], 'click');
} 
```

因此，当我第一次单击“显示点”（假设我正在调用 showMarker() javascript 函数“显示点链接”单击事件）链接时，信息窗口不会打开，当我第二次单击“显示点”链接时信息窗口将打开，有人以前有过这个错误吗？有人可以帮我解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T10:42:04.067

在函数外部将您的 infowindow 对象创建为全局变量：

```
// global var
var infowindow = new google.maps.InfoWindow();

 function assignmarkerclick(marker1, index, message) {
     google.maps.event.addListener(marker1, 'click', function () {
         infowindow.setContent(message);
         infowindow.open(map, marker1);
     });
 } 
```

# python - 在同步和异步情况之间使用 time.clock() 进行错误的速度测试？

> ID：13527299
> 
> 赞同：1
> 
> 时间：2012-11-23T10:35:12.570
> 
> 标签：python, asynchronous, time, gevent

我正在阅读有关*gevent的*[教程](http://sdiehl.github.com/gevent-tutorial/#introduction)，它提供了用于演示同步和异步案例的示例代码：

 *```
import gevent
import random

def task(pid):
    """
    Some non-deterministic task
    """
    gevent.sleep(random.randint(0,2)*0.001)
    print('Task', pid, 'done')

def synchronous():
    for i in range(1,10):
        task(i)

def asynchronous():
    threads = [gevent.spawn(task, i) for i in xrange(1000)]
    gevent.joinall(threads) 
```

本文解释说“异步情况下的执行顺序本质上是随机的，并且异步情况下的总执行时间远少于同步情况下”。所以我用*时间*模块来测试它：

```
print('Synchronous:')
start1 = time.clock()
synchronous()
end1 = time.clock()
print "%.2gs" % (end1-start1)

print('Asynchronous:')
start2 = time.clock()
asynchronous()
end2 = time.clock()
print "%.2gs" % (end2-start2) 
```

但是，“异步”运行的时间比“同步”要长得多：

```
ubuntu@ip:/tmp$ python gevent_as.py
Synchronous:
0.32s
Asynchronous:
0.64s
ubuntu@ip:/tmp$ python gevent_as.py
Synchronous:
0.3s
Asynchronous:
0.61s 
```

我想知道我的测试程序有什么问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:29:41.700

这是*time.clock()的问题，在**ubuntu*下无法正常工作。有关详细信息，请参阅链接：[Python - time.clock() vs. time.time() - 准确度？](https://stackoverflow.com/questions/85451/python-time-clock-vs-time-time-accuracy)

我更改了测试程序：

```
print('Synchronous:')
start1 = time.time()
synchronous()
end1 = time.time()
print "%.2gs" % (end1-start1)

print('Asynchronous:')
start2 = time.time()
asynchronous()
end2 = time.time()
print "%.2gs" % (end2-start2) 
```

那么‘异步’的测试速度要比‘同步’快很多：

```
ubuntu@ip:/tmp$ python gevent_as.py
Synchronous:
1.1s
Asynchronous:
0.057s 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:45:02.933

可能睡眠非常小，开销很重要。尝试用 0.1 替换 0.001。*

# c# - ExecuteReader.HasRows 与 ExecuteScalar() 是 DBNull

> ID：13527300
> 
> 赞同：1
> 
> 时间：2012-11-23T10:35:22.473
> 
> 标签：c#, sql

在我网站的某个区域中，我需要控制对一组特定用户的访问。

这是通过对照 SQL 服务器数据库上的表检查用户 ID 来完成的。如果 ID 存在，则他们被授予访问权限：

```
SELECT 1 FROM admin WHERE userID = @userID 
```

我注意到有几种方法可以检查数据库中是否存在行，并且想知道使用其中任何一种是否有任何好处，或者是否有标准。

首先是通过检查以下行是否存在`SqlDataReader`：

```
if (!SqlCommand.ExecuteReader().HasRows)
{ 
    //redirect 
} 
```

第二个是检查返回值是否正在`DBNull`使用`ExecuteScalar()`：

```
if (SqlCommand.ExecuteScalar() is DBNull)
{ 
    //redirect 
} 
```

我应该使用哪个？有没有更好的办法？真的有关系吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T10:43:50.310

第二种选择，因为您的开销更少。
不过请注意

[ExecuteScalar](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)返回一个对象

> 结果集中第一行的第一列，如果结果集为空，则为空引用（在 Visual Basic 中为 Nothing）

您的查询可能不会返回任何内容，因此最好检查 null 而不是 DBNull

```
if (SqlCommand.ExecuteScalar() == null)
{ 
    //redirect 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T11:06:28.433

两者在性能方面是相同的。

ExecuteScalar 只返回数据集第一行的第一个值。在内部，它被视为 ExecuteReader()，打开 DataReader，选择值，然后销毁 DataReader。我也一直想知道这种行为，但它有一个优点：它发生在框架内......并且您无法在速度方面与框架竞争。

以下是这两者之间的区别：

```
ExecuteReader():

1.will work with Action and Non-Action Queries (Select)
2.Returns the collection of rows selected by the Query.
3.Return type is DataReader.
4.Return value is compulsory and should be assigned to an another object DataReader.

ExecuteScalar():

1.will work with Non-Action Queries that contain aggregate functions.
2.Return the first row and first column value of the query result.
3.Return type is object.
4.Return value is compulsory and should be assigned to a variable of required type. 
```

摘自

[http://nareshkamuni.blogspot.in/2012/05/what-is-difference-between.html](http://nareshkamuni.blogspot.in/2012/05/what-is-difference-between.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T10:43:29.027

在您的情况下，它不会影响太多性能，因此您可以使用它们中的任何一个。

*   当您的查询返回单个值时，通常使用 ExecuteScalar。如果返回更多，则结果是第一行的第一列。一个例子可能是`SELECT @@IDENTITY AS 'Identity'.`
*   ExecuteReader 用于具有多行/多列的任何结果集（例如，SELECT col1, col2 from sometable）。

[资源](https://stackoverflow.com/questions/2974154/what-is-the-difference-between-execute-scalar-execute-reader-and-executenonque/2974203#2974203)

# c - 如何在c中重置以下数组？

> ID：13527303
> 
> 赞同：3
> 
> 时间：2012-11-23T10:35:43.497
> 
> 标签：c, arrays

我有一个关于在 c 中重置数组的问题，我定义了一个这样的数组：

```
static int hello[5][6] = {{1,2,3,4,5,6},1,2,3,4,5,6},1,2,3,4,5,6},1,2,3,4,5,6},1,2,3,4,5,6}}; 
```

那么如何将每行和每行上的所有元素重置为0？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-23T10:37:17.370

```
memset (hello, 0, sizeof(hello)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T10:38:02.197

试试看： bzero(hello, sizeof(hello));

# php - 选定数据库中的表和选定表中的字段

> ID：13527306
> 
> 赞同：1
> 
> 时间：2012-11-23T10:36:00.663
> 
> 标签：php, jquery, mysql

我有一个无法解决的任务，希望能得到你的帮助。我想在选择选项中显示本地主机中的所有数据库，当我选择其中一些数据库时，我要在另一个选择选项中显示所选数据库中的所有表，当我选择其中一些表时，我想动态显示选定的表字段（列）。我认为最好使用`jquery`.

要显示我使用过的所有数据库、表和字段`mysql_database_list`，`mysql_table_list`但我不能动态地这样做。如果有任何想法请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:39:20.773

是的，使用 jQuery，简化您的工作是个好主意。使用您的数据库表名称填充第一个选择。然后绑定到该下拉列表上的选择事件并执行一个函数，该函数将使用您的字段名称填充第二个选择。

对于 select 上的事件绑定，请参阅：[http](http://api.jquery.com/select/) ://api.jquery.com/select/ 对于填充第二个列表的 ajax 调用，请参阅：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T14:32:48.663

```
<select style='width:150px' id='tbl'>

</select>

<script type="text/javascript">

    $(document).ready(function(){

         $("#db").change(function() { 
             var selectedDB = $('#db option:selected').val();
             $.ajax( {
                 url :'getTables.php',
                 type:'POST'
                 , data:{db:selectedDB}
                 , success: function(res) {
                     $("#tbl").html(res);
                 }
             });
         });
    });
</script> 
```

# c# - 新的 ASP.NET MVC3 项目无法在 MonoDevelop 中编译

> ID：13527324
> 
> 赞同：3
> 
> 时间：2012-11-23T10:36:55.483
> 
> 标签：c#, asp.net-mvc-3, macos, mono, monodevelop

我尝试安装 MonoDevelop 3.0.5 和 MDK 3.0.1 (beta)。MonoDevelop 让我可以选择创建一个新的 ASP.NET MVC3 项目。“干净！”，我想。所以我选择了它，并尝试运行它来查看默认项目给了我什么。

而 MonoDevelop 只是出错了。查看参考资料，两者`System.Web.Helpers`和`System.Web.WebPages`都显示为红色，并显示`Assembly not available for Mono / .NET 4.0 (in Mono 3.0.1)`。

那么出了什么问题 :( 似乎如果 MonoDevelop 为我提供选项，它应该只是工作™，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:03:45.193

[问题存在于他们的错误列表中： https](https://bugzilla.xamarin.com/show_bug.cgi?id=8516) ://bugzilla.xamarin.com/show_bug.cgi ?id=8516

# ios - 在没有 facebook 应用程序的情况下从 iOS 应用程序在 facebook 上共享照片

> ID：13527327
> 
> 赞同：-1
> 
> 时间：2012-11-23T10:37:05.250
> 
> 标签：ios, facebook

iOS < 6 可以吗？

在 iOS 6+ 中，我可以使用消息编辑器进行共享。

以前的 iOS 版本呢？FB SDK 共享使用 facebook 应用程序 ID，所以不是这样。也许我可以使用`fb://share/photo/[image_data]?` 其他想法之类的方案打开本机 facebook 应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:39:05.037

对于 iOS < 6，您始终可以使用[ShareKit](https://github.com/ShareKit/ShareKit)插件。

在这个[存储库](https://github.com/ShareKit/ShareKit)中，他们分享了在您的 fb 帐户上分享图像的好例子。

看看课程`ExampleShareImage`：

```
- (void)loadView 
{
    [super loadView];

    self.imageView = [[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"sanFran.jpg"]] autorelease];

    imageView.frame = CGRectMake(0,0,self.view.bounds.size.width,self.view.bounds.size.height);

    [self.view addSubview:imageView];
}

- (void)share
{
    SHKItem *item = [SHKItem image:imageView.image title:@"San Francisco"];

    /* optional examples
    item.tags = [NSArray arrayWithObjects:@"bay bridge", @"architecture", @"california", nil];

    //give a source rect in the coords of the view set with setRootViewController:
    item.popOverSourceRect = [self.navigationController.toolbar convertRect:self.navigationController.toolbar.bounds toView:self.view];
     */

    SHKActionSheet *actionSheet = [SHKActionSheet actionSheetForItem:item];
    [SHK setRootViewController:self];
    [actionSheet showFromToolbar:self.navigationController.toolbar];
}
```

您还可以集成Facebook 提供的[FBConnect](http://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/)框架。

# python - Python regex 或 split/strip 从文本行中的括号之间获取 int

> ID：13527329
> 
> 赞同：1
> 
> 时间：2012-11-23T10:37:12.580
> 
> 标签：python, regex

我有一个带有如下行的文本文件：

```
[00451] Kayle - 2/3/15 - Win - 2012-11-22 
```

开始时括号 [] 之间的数字是一个 id 号，我需要从文件的最后一行（或传递的包含该行的字符串）中获取它，以便我可以增加它以向文件写入更多行，所以每个游戏记录会有一个唯一的id号。我一直在尝试拆分、剥离和正则表达式，但我似乎无法让它工作。任何人都可以帮忙吗？我可以只使用文件的行来执行此操作，但我希望稍后能够按 id、名称或其他标准重新排序文件。

我在其他代码中写入文件的数据如下所示：

```
data = "[%s] %s - %s/%s/%s - %s - %s\n" % (id, champname, kills, deaths, assists, winloss, timestamp) 
```

如何获取最后一行的 id，以便增加未来的附加 id？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T10:43:09.230

您可以像这样从行中获取数据，

```
In [5]: x = "[00451] Kayle - 2/3/15 - Win - 2012-11-22"

In [6]: x.split(']')[0].lstrip('[')
Out[6]: '00451' 
```

然后将其转换为 int 并进行数学运算

```
In [7]: str(int(x.split(']')[0].lstrip('[')) + 1).zfill(5)
Out[7]: '00452' 
```

另一种方法可能是

```
In [8]: id = "%05d" %(int(x.split(']')[0].lstrip('[')) + 1)

In [9]: id
Out[9]: '00452' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T10:48:35.857

这是一个正则表达式解决方案：

```
>>> s = '[00451] Kayle - 2/3/15 - Win - 2012-11-22'

>>> import re
>>> re.match(r'\[(\d+)\]', s).group(1)
00451 
```

# objective-c - RestKit 不发送 POST 参数

> ID：13527333
> 
> 赞同：0
> 
> 时间：2012-11-23T10:37:39.090
> 
> 标签：objective-c, restkit

我正在发送

```
[self.responseObjectManager.client post:@"" usingBlock:^(RKRequest * request){

    RKParams * params = [RKParams params];

    [params setValue:@"VALUE1" forParam:@"PARAM1"];

    request.params = params;

    request.onDidLoadResponse = ^(RKResponse *response){

        ALog(@"Loaded resp %@", response.bodyAsString);

    };

}]; 
```

索引.php

```
header('Content-Type: application/json');

echo "WHAT IS ".$GLOBALS['HTTP_RAW_POST_DATA']." ANOTHER".@file_get_contents('php://input');
echo "POST ".var_dump($_POST)." GET ".var_dump($_GET); 
```

然后我就回来了

```
"Loaded resp POST  GET " 
```

所以看起来帖子参数没有发送

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:48:47.670

问题出在

```
[self.responseObjectManager.client post:@"" usingBlock:^(RKRequest * request){ 
```

必须直接指定 index.php

```
[self.responseObjectManager.client post:@"/index.php" usingBlock:^(RKRequest * request){ 
```

比响应可见

```
$GLOBALS['HTTP_RAW_POST_DATA'] 
```

# iphone - MKMapView 在左侧放置注释

> ID：13527334
> 
> 赞同：0
> 
> 时间：2012-11-23T10:37:40.787
> 
> 标签：iphone, ios, mkmapview

我目前正在开发一个带有 MKMapView 和大量注释的应用程序

触摸注释时，详细信息会显示为叠加层 ( `didSelectAnnotationView`)

我希望覆盖完全显示在手机屏幕上，但如果我使用

```
[mapView setCenterCoordinates:annotation.coordinates] 
```

我错过了大部分细节视图，它被设计为占据手机屏幕的 80%。

所以我寻找一种方法将触摸的注释放置在屏幕的左侧/垂直中间

我怎样才能做到这一点 ？

我知道我可以使用`MKCoordinateRegionMakeWithDistance`在一个点周围获得 XX 米的区域并使用 setRegion 以该点为中心，但我怎样才能获得该区域的左/中点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:16:33.107

我找到了使用此页面[http://iphonedevsdk.com/forum/iphone-sdk-development-advanced-discussion/36462-modifying-cllocations.html的解决方案](http://iphonedevsdk.com/forum/iphone-sdk-development-advanced-discussion/36462-modifying-cllocations.html)

# java - 使用 Java JAI 裁剪、调整大小和保存图像

> ID：13527335
> 
> 赞同：1
> 
> 时间：2012-11-23T10:37:44.330
> 
> 标签：java, image, resize, crop, jai

我想对一个充满图像的文件夹执行以下操作。图像通常是 .jpg，但最好能够使用任何图像格式。

*   加载图像
*   裁剪一个矩形（x、y、宽度、长度）
*   调整裁剪部分的大小（finalWidth，finalLength）
*   将裁剪和调整大小的部分保存为另一个文件夹中的新图像。

我是JAI的新手，有人可以一步一步解释吗？

非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T03:50:30.907

katu，就其价值而言，[imgscalr](http://www.thebuzzmedia.com/software/imgscalr-java-image-scaling-library/)将为您完成所有这些工作，这比使用 JAI（单个、静态、方法调用来执行所有这些操作）要容易得多。您可以在[此处查看 Javadoc 类](http://www.thebuzzmedia.com/downloads/software/imgscalr/javadoc/index.html)。

您可以添加此 Maven 条目并立即开始使用该库（无需配置或复杂的 API，只需调用 Scalr.* 方法）

```
<dependency>
    <groupId>org.imgscalr</groupId>
    <artifactId>imgscalr-lib</artifactId>
    <version>4.2</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:01:35.133

不使用 JAI，而是签出 jquery 插件 JCrop 以在 UI 中裁剪图像并使用简单的 java 代码保存到您的文件夹。签出此处提供的示例。 [http://www.javaservletsjspweb.in/2009/09/java-and-javascript-jcrop-jquery-plugin.html#.UK9XWOTqm8A](http://www.javaservletsjspweb.in/2009/09/java-and-javascript-jcrop-jquery-plugin.html#.UK9XWOTqm8A)

# javascript - JavaScript 库概述

> ID：13527336
> 
> 赞同：-2
> 
> 时间：2012-11-23T10:37:46.173
> 
> 标签：javascript, jquery

很长一段时间以来，我一直在使用 jQuery 以及其他 JavaScript 库。但我知道 JavaScript 领域发生了很多事情。有谁知道目前最流行的图书馆的概述/演练的视频或网站？（它们是什么，强项，弱点）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T10:57:45.817

查看这些资源，他们放置了主要的 Javascript 库

1.  [http://jster.net/](http://jster.net/)
2.  [http://jamjs.org/](http://jamjs.org/)

# scala - 使用 SORM 通过普通 SQL 查询获取对象

> ID：13527340
> 
> 赞同：9
> 
> 时间：2012-11-23T10:38:07.520
> 
> 标签：scala, sorm

是否可以通过普通 SQL 查询而不是使用[SORM](http://sorm-framework.org)通过 DSL 构建查询来获取项目？

例如，是否有一个 API 可以制作类似的东西

```
val metallica = Db.query[Artist].fromString("SELECT * FROM artist WHERE name = ?", "Metallica").fetchOne() // Option[Artist] 
```

代替

```
val metallica = Db.query[Artist].whereEqual("name", "Metallica").fetchOne() // Option[Artist] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T15:19:31.213

由于使用集合和其他结构化值填充实体涉及以不可连接的方式从多个表中获取数据，因此直接获取它的 API 很可能永远不会暴露。然而，目前正在考虑解决这个问题的另一种方法。

以下是它的实现方式：

```
val artists : Seq[Artist] 
  = Db.fetchWithSql[Artist]("SELECT id FROM artist WHERE name = ?", "Metallica") 
```

[如果这个问题在这里](https://github.com/nikita-volkov/sorm/issues)得到显着的支持，或者更好的是，它可能会在下一个小版本中实现。

**更新**

在 0.3.1 中实施

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-24T16:39:17.307

如果您只想获取一个对象（通过 2 个或更多参数），您还可以执行以下操作：

**通过使用 Sorm 查询器**

```
Db.query[Artist].where(Querier.And(Querier.Equal("name", "Name"), Querier.Equal("surname", "surname"))).fetchOne() 
```

**要不就**

```
Db.query[Artist].whereEqual("name", "Name").whereEqual( "surname","surname").fetchOne() 
```

# mysql - mysql 关注和转发类似的功能

> ID：13527341
> 
> 赞同：5
> 
> 时间：2012-11-23T10:38:11.190
> 
> 标签：mysql, performance, twitter, group-by, twitter-follow

这是一个有点挑战性但有趣的问题。考虑拥有这些表

**推文**

```
tweet_id | retweet_of_id | user_id 
```

**跟随**

```
user_id | followed_user_id 
```

因此，我们将每个“转推作为**单独**的推文”存储为指向原始推文的 id ( `retweet_of_id`)。这是因为我想分别在每一项下发表评论。如果某事不是转推，那么`retweet_of_id`将是`0`。

如何**有效地**使用 MySQL 检索以下内容？

*   我自己的推文
*   所有原始推文（来自我关注的用户）
*   以及推文的**第一次**转推（由我关注的用户）（来自我不关注的用户）

并且结果应该是两者的组合（按顺序），就像 twitter 所做的那样。
请考虑可能有 1,000,000 条推文，我们只需要最近的推文（例如：10 条）。

* * *

这是一个**示例**（我是用户 1，我关注用户 2 和 3）

```
tweet_id | retweet_of_id | user_id
----------------------------------
    1            0            4          <- EXCLUDE (I don't follow user 4)
    2            0            2          <- INCLUDE (I follow user 2)
    3            0            3          <- INCLUDE (I follow user 3)
    4            1            2          <- INCLUDE (I follow user 2 & first RT)
    5            1            3          <- EXCLUDE (I already have the first RT)
    6            2            3          <- EXCLUDE (I already have the orignal)
    7            0            1          <- INCLUDE (My own tweet) 
```

所以最终的顺序应该是这些推文：（`7, 4, 3, 2` *从最近的开始）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:48:20.183

这是我解决它的方法
*（这两个都假设推文是由他们的`tweet_id`ASC 排序的）*

**解决方案1**（正确，运行速度快）

```
SELECT tweet_id,
FROM tweets 
WHERE user = 1 OR user IN (2,3)  
GROUP BY  IF(retweet_of_id = 0, tweet_id, retweet_of_id)
ORDER BY tweet_id DESC 
```

* * *

**解决方案 2**（给出正确的结果，但对于 1,000,000 条推文来说速度很慢）

```
SELECT p1.tweet_id FROM tweets p1 
LEFT JOIN tweets p2 
       ON p2.user IN (2,3)
      AND p1.tweet_id > p2.tweet_id
      AND (p1.retweet_of_id = p2.tweet_id 
           OR p1.retweet_of_id AND p1.retweet_of_id = p2.retweet_of_id )
WHERE p2.tweet_id IS NULL
  AND (p1.user = 1 OR p1.user IN (2,3)) 
ORDER BY p1.tweet_id DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:56:03.827

### 所有原始推文（来自我关注的用户）

我关注的 1 个用户：

```
select user_id from follow where followed_user_id= MyOwnID 
```

2 所有原始推文：

```
select * from tweets where retweed_of_id=0 
```

两者结合：

```
select * from tweets where retweed_of_id=0 and
user_id in (select user_id from follow where followed_user_id= MyOwnID) 
```

应该是这样 - 还是我错过了什么？

# c# - 实体框架数据访问

> ID：13527345
> 
> 赞同：0
> 
> 时间：2012-11-23T10:38:21.580
> 
> 标签：c#, entity-framework

我目前正在从事一个团队项目，我们必须使用实体框架。我们的 WinForms 应用程序正在使用`MVC`设计模式，事实上，我们不太确定如何处理数据。

1.  最好只使用`context`并对此进行更改？
2.  或者，最好创建一个`DataManager`属于 的类，`Controller`然后在该类中创建适当的（需要的）方法？例如，如果我们需要一个返回所有 ID 介于 x 和 y 之间的人的方法，那么我们将在 DataManager 中创建这个方法，将 x 和 y 作为输入。

谢谢你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:44:07.727

我个人喜欢[存储库模式](http://msdn.microsoft.com/en-us/library/ff649690.aspx)。网络上有更多不那么正式的代码示例。“奖励”优势之一是您可以制作不进入数据库的虚假实现并将其用于单元测试。

但是没有一个最好的方法来解决这个问题。

# iphone - 如何从 ios 中的 FTP URL 在图像视图上加载图像

> ID：13527348
> 
> 赞同：0
> 
> 时间：2012-11-23T10:38:28.993
> 
> 标签：iphone, objective-c, ios, xcode, ftp

我正在尝试使用以下代码将图像从 FTP URL 加载到图像视图中

```
 NSURL * imageURL = [NSURL URLWithString:@"ftp://50.63.12.12/bpthumb.jpg"];
    NSURLRequest *request = [[NSURLRequest alloc]initWithURL:imageURL];
    UIImage * image = [[[UIImage alloc]initWithData:request]autorelease];
    UIImageView *imgView=[[UIImageView alloc]initWithFrame:CGRectMake(50, 50, 200, 200)];
    [imgView setImage:image];
    [self.view addSubview:imgView]; 
```

但它不起作用。

我知道我必须提供我的`FTP`凭据才能连接到`FTP`ma URL 并获取图像。

请给我建议出路。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T10:49:14.163

试试这个：

```
NSURL *url = [NSURL URLWithString:@"ftp://user:password@host:port/path"];
NSData *data = [NSData alloc] initWithContentsOfURL:url]; 
```

这里有一个来自苹果开发的[SimpleFTPSample 。](http://developer.apple.com/library/ios/#samplecode/SimpleFTPSample/Introduction/Intro.html#//apple_ref/doc/uid/DTS40009243)试试看 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T10:47:47.743

在连接委托 didReceiveAuthenticationChallenge 中尝试这样的事情：

```
-(void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge{

    NSLog(@"challenged %@",[challenge proposedCredential]);

    if([challenge previousFailureCount]==0){
        NSURLCredential *newCredential;
        newCredential=[NSURLCredential credentialWithUser:@"xxxxxx"
                                                 password:@"xxxx"
                                              persistence:NSURLCredentialPersistenceNone];
        [[challenge sender] useCredential:newCredential
               forAuthenticationChallenge:challenge];

    } else {

        [[challenge sender] cancelAuthenticationChallenge:challenge];
        NSLog(@"Wrong username or password ");
    }

} 
```

AXL

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T10:49:29.270

好吧，你可以使用

`UIImage *image = [[UIImage alloc] initWithData: [NSData dataWithContentsOfURL:imageURL];`

但是您不应该这样做，因为这将使用同步数据连接，并且很可能会暂时冻结您的应用程序。您应该使用 NSURLConnection 和适当的委托来异步下载图像。

有关此主题的更多提示，请查看[http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T10:51:15.190

只需将[NSURLConnection](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html)与以“ftp://”开头的路径一起使用，它就可以工作。NSURLConnection 支持 http、https、ftp 和开箱即用的文件。

# r - 枚举和计算

> ID：13527350
> 
> 赞同：0
> 
> 时间：2012-11-23T10:38:39.190
> 
> 标签：r

如果我有这样的数据框，可以将其视为针对不同受访者的调查的响应

```
Data = 
ID Q1 Q2 Q3
1  A1 B2 C3
2  A2 B1 C2
3  A1 B2 C3
... 
```

我还有以下分数表：

```
Q1 <- (c("A1", 10, "A2", 20, ...))
Q2 <- (c("B1", 10, "B2", 20, ...))
Q3 <- (c("C1", 10, "C2", 20, ...)) 
```

也就是说，如果我在 Q1 中选择“A1”，我会得到 10 分，如果我在 Q2 中选择“B2”，我会多获得 20 分，如果我在 Q3 中选择“C1”，也就是 10 分，我得到的总分是：10 (A1) + 20 (B2) + 10 (C1) = 40

现在对于数据中的每一行，我需要通过根据分数表对每列的分数求和来计算总分。

谁能建议我如何使用简单的代码来做到这一点？现在我只能想到将分数表放入 Xx2 矩阵中，并使用大量的嵌套 if 和 for 循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:52:54.007

数据：

```
Data <- read.table(text = "ID Q1 Q2 Q3
1  A1 B2 C3
2  A2 B1 C2
3  A1 B2 C3", header = TRUE)

Q1 <- c("A1", 10, "A2", 20)
Q2 <- c("B1", 10, "B2", 20)
Q3 <- c("C1", 10, "C2", 20) 
```

首先，`Q`创建对象列表：

```
Qlist <- list(Q1 = Q1, Q2 = Q2, Q3 = Q3) 
```

现在，`sapply`可以使用：

```
cbind(Data,
      QSum = rowSums(sapply(names(Qlist),
                            function(q)
                              as.numeric(Qlist[[q]][match(Data[[q]],
                                                          Qlist[[q]]) + 1])), 
                     na.rm = TRUE)) 
```

输出：

```
 ID Q1 Q2 Q3 QSum
1  1 A1 B2 C3   30
2  2 A2 B1 C2   50
3  3 A1 B2 C3   30 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T11:00:11.243

```
df <- read.table(text="ID Q1 Q2 Q3
1  A1 B2 C3
2  A2 B1 C2
3  A1 B2 C3",header=TRUE, stringsAsFactors=FALSE)

scores <- list(
Q1 = c("A1", 10, "A2", 20, "A3", 30),
Q2 =c("B1", 30, "B2", 10, "B3", 20),
Q3 =c("C1", 10, "C2", 30, "C3", 20)
)

#lookup table
scores <- do.call("cbind",scores)

#match
m <- apply(df[,-1],2,match,table=scores)

#look up
points <- matrix(as.numeric(scores[m+1]),ncol=ncol(df)-1)

#sum for each ID
result <- cbind(df,Score=rowSums(points))

  ID Q1 Q2 Q3 Score
1  1 A1 B2 C3    40
2  2 A2 B1 C2    80
3  3 A1 B2 C3    40 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T16:56:37.747

我将使用罗兰选择的“分数”。由于您提到可以将分数表更改为 2x2 矩阵，因此我提供了以下解决方案，该解决方案与其他 2 个解决方案的不同之处在于分数的数据结构不同。

在为您提供代码之前，请允许我解释一下逻辑：

1.  我希望逐行处理 df
2.  对于每一行，我希望将分数用于每个问题选择的答案
3.  我想总结一下

基于 2，我觉得需要一个关联数组，我可以根据问题编号和输入的答案对其进行索引。因此，我为分数创建了以下表示：

```
> scores <- list(
+                 Q1 = list(A1=10,A2=20,A3=30),
+                 Q2 = list(B1=30,B2=10,B3=20),
+                 Q3 = list(C1=10,C2=30,C3=20)
+               ) 
```

基本上，分数现在是一个列表列表。通过这样做，我可以执行以下操作：

```
> scores[["Q1"]][["A1"]]
[1] 10 
```

现在我需要做的就是找出一种方法来参数化上面的“Q1”和“A1”。

数据框“df”如下：

```
> df
  ID Q1 Q2 Q3
1  1 A1 B2 C3
2  2 A2 B1 C2
3  3 A1 B2 C3 
```

我关心的是没有 ID 列的每一行。所以，我只提取：

```
> df[1,-1]
  Q1 Q2 Q3
1 A1 B2 C3 
```

现在你可以看到我需要选择第一个索引的列名到分数和第二个索引的行中的值。因此，如果我能得到 score[[column-M]][[row-NvalueForColumn-M]] 那么我可以总结它们。

列名很容易获得，因此：

```
> columnNames <- colnames(df[1,-1])
> columnNames
[1] "Q1" "Q2" "Q3" 
```

所以你做必要逻辑的最后一段代码是这样的：

```
> columnNames <- colnames(df[1,-1])
> score <- c(0,0,0)
> for (i in 1:length(df[1,-1]))
+ {
+     for (j in 1:length(columnNames))
+     {
+         score[i] <- score[i] + scores[[columnNames[j]]][[df[i,-1][[columnNames[j]]]]]
+     }
+ }
> final <- cbind(df,score)
> final
  ID Q1 Q2 Q3 score
1  1 A1 B2 C3    40
2  2 A2 B1 C2    80
3  3 A1 B2 C3    40
> 
```

我相信上面的代码可以减少至少 5 行（使用 rowsums 等）。我确信像 Sven 这样有经验的人可以将上面的代码改进到几行。将不胜感激输入。

# python - Python 和奇怪的套接字行为

> ID：13527351
> 
> 赞同：1
> 
> 时间：2012-11-23T10:38:39.903
> 
> 标签：python, c, sockets, networking, pipe

我正在尝试在 C 可执行文件和 python 脚本之间建立通信管道。下面是 Python 脚本，奇怪的地方如下。如果我按如下方式运行 python 脚本，则 C 可执行文件永远不会在套接字上看到任何数据。

但是，如果我取消注释 Reader 类（即，仅启用对套接字的写入），则 C 可执行文件总是接收套接字上的数据。有没有人解释为什么当 Reader 和 Writer 线程同时运行时这不起作用？

```
class Reader(Thread):
    def __init__(self):
        Thread.__init__(self)
        self.daemon = True
    def run(self):
        while True:
            s = socket.socket(socket.AF_UNIX, socket.SOCK_STREAM)
            s.connect("/tmp/demo_socket")               
            nonce = s.recv(4)
            s.close

            if len(nonce) == 4:
                print("Result received \n")

class Writer(Thread):
    def __init__(self):
        Thread.__init__(self)
    def run(self):
        while True:
            payload = "Hello World"
            s = socket.socket(socket.AF_UNIX, socket.SOCK_STREAM)
            s.connect("/tmp/demo_socket")           
            s.send(payload)
            s.close()

reader = Reader()
writer = Writer()

reader.start()
writer.start()

try:
    while True:
        sleep(10000)
except KeyboardInterrupt:
    print("Terminated") 
```

编辑：

正如建议的那样，我正在尝试如下全局打开连接，但这给我带来了两个额外的问题：

1）发送数据后，Python端应该只收到4个字节，但似乎我收到了无穷无尽的数据流......

2）我在哪里可以关闭这个全局打开的流？

```
s = socket.socket(socket.AF_UNIX, socket.SOCK_STREAM)
s.connect("/tmp/demo_socket")  

class Reader(Thread):
    def __init__(self):
        Thread.__init__(self)
        self.daemon = True
    def run(self):
        while True:        
            nonce = s.recv(4)

            if len(nonce) == 4:
                print("Result received \n")

class Writer(Thread):
    def __init__(self):
        Thread.__init__(self)
    def run(self):
        while True:
            payload = "Hello World"         
            s.send(payload)

reader = Reader()
writer = Writer()

reader.start()
writer.start()

try:
    while True:
        sleep(10000)
except KeyboardInterrupt:
    print("Terminated") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:26:33.490

> 1）发送数据后，Python端应该只收到4个字节，但似乎我收到了无穷无尽的数据流......

您的发件人继续发送，如果您收到的数据是对此的回复，服务器将继续回复。

> 2）我在哪里可以关闭这个全局打开的流？

在你不再需要它之后......你有停止条件或类似的东西吗？

# c++ - Incredibuild 不是很快

> ID：13527352
> 
> 赞同：4
> 
> 时间：2012-11-23T10:38:43.440
> 
> 标签：c++, build, build-process, incredibuild

我们的项目需要很长时间才能编译，所以我正在尝试 Incredibuild 的试用版。

它由大约 50 个项目的解决方案组成。

问题是，当我使用 incredibuild 进行编译时，它并没有变得更快，它甚至可能持续更长的时间......

这是 incredibuild 在构建解决方案的子项目及其依赖项时生成的图表的屏幕截图，有时它似乎完全没有做任何事情： ![在此处输入图像描述](../Images/675a4c6cd1e1906ce693114fa2737884.png)

没有 incredibuild 的构建需要 4 分钟，这里需要 5 分钟，最常见的是下降到 3:30，如下例所示，但仍有一些差距： ![在此处输入图像描述](../Images/8a9ed940fd047b18ca65012489511d66.png)

**知道什么会导致这种情况发生吗？**

请注意，如果我构建整个项目，问题是一样的

顺便说一句，红线是 cpu 使用情况，绿色网络输入和蓝色网络输出，如 incredibuild 报告的那样。

**编辑：**为了清楚起见，由于有些人倾向于关注上述示例的低编译时间而不是试图给出有意义的答案，因此项目的完全重建大约需要 1 个半小时

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T19:32:23.563

您可以做的最好的事情是通过 support@incredibuild.com 将您的日志文件发送给 IncrediBuild 支持团队

为了提取日志文件，请按照以下说明进行操作：

1.  将代理的日志记录级别设置为“扩展”（右键单击 IncrediBuild 托盘图标->代理设置->“代理|常规”页面）。
2.  运行你的构建。
3.  双击 IncrediBuild 托盘图标以打开构建监视器。
4.  选择“文件->将监视器文件另存为...”以保存构建进度文件并将文件附加到您的回复中。
5.  将您的日志记录级别恢复为“最低”。

请在您的电子邮件中提及 Dori 将您推荐给支持部门。

谢谢，IncrediBuild 团队。

# razor - Razor Generator：如何使用在库中编译的视图作为主 mvc 项目中定义的主视图的部分视图

> ID：13527354
> 
> 赞同：11
> 
> 时间：2012-11-23T10:38:55.103
> 
> 标签：razor, asp.net-mvc-4, viewengine, razorgenerator

我们有一个 ASP.NET MVC 4 应用程序，其中包含大约 3000 个视图。我们决定将这组视图拆分为单独的 DLL，并使用 RazorGenerator 对其进行编译。我们在主 MVC 项目中只保留 main _Layout.cshtml 和相关文件。

我们无法从 DLL 加载部分视图以及主 MVC 项目中的主视图。详细说明如下。

**已经做了什么：**

1.  视图成功编译成 DLL（我已经确认它们在二进制文件中）

2.  使用 Global.asax.cs 中 Application_Start 中的以下代码为每个包含视图的 DLL 创建和注册 PrecompiledMvc​​Engine 对象：

.

```
foreach (var assembly in AppDomain.CurrentDomain.GetAssemblies())
{
    // ...
    // some code determining whether we've got an assembly with views
    // ...

    var engine = new PrecompiledMvcEngine(assembly);
    engine.UsePhysicalViewsIfNewer = true;

    ViewEngines.Engines.Insert(0, engine);

    // StartPage lookups are done by WebPages. 
    VirtualPathFactoryManager.RegisterVirtualPathFactory(engine);
} 
```

**什么不起作用：**

我无法加载在主 MVC 项目（例如 _Layout.cshtml）中定义的视图以及在其中一个库（例如 Partial.cshtml）中定义的部分视图。我在控制器的操作中使用以下代码来告诉 MVC 框架我请求了哪个视图：

```
var view = "~/Views/" + partialName + ".cshtml";    
return View(view, "~/Views/Shared/_Layout.cshtml", model); 
```

错误消息显示：未找到视图“~/Views/Partial.cshtml”或其主视图，或者没有视图引擎支持搜索的位置。搜索了以下位置：~/Views/Partial.cshtml ~/Views/Shared/_Layout.cshtml

当我尝试通过指定以下任一方式单独加载视图时：

```
return View("~/Views/Shared/_Layout.cshtml", model); 
```

或者

```
return View(view, model); 
```

，找到正确的视图。但是我需要将它们一起加载。当我在主 MVC 项目中拥有所有必需的 .cshtml 文件时，该代码有效。

请注意，已编译 DLL 中的视图具有 PageVirtualPathAttribute，其路径与控制器操作中指定的路径相同，例如：

```
namespace SomeBaseNamespace.Views
{
    [GeneratedCode("RazorGenerator", "1.5.0.0"), PageVirtualPath("~/Views/Partial.cshtml")]
    public class Partial : WebViewPage<PartialModel>
    {
        [CompilerGenerated]
        private static class <Execute>o__SiteContainer3
        {
            // logic
        }

        public override void Execute()
        {
            // logic
        }
    }
} 
```

综上所述，问题是如何用另一个项目中定义的部分编译视图调用存储在主 MVC 项目中的主视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-06T06:15:16.750

在应用程序启动时，当您的应用程序调用此行时...

```
foreach (var assembly in AppDomain.CurrentDomain.GetAssemblies()) 
```

包含您的外部视图的程序集可能尚未加载，因此不包含在视图引擎中。我实际上建议不要使用`AppDomain.CurrentDomain.GetAssemblies()`，因为这将包括在启动时加载的所有程序集。

解决方案是将[RazorGenerator.Mvc](https://www.nuget.org/packages/RazorGenerator.Mvc/ "RazorGenerator.Mvc") NuGet 包添加到每个包含已编译视图的项目中。这将以与您类似的方式添加以下应用程序启动代码...

```
[assembly: WebActivatorEx.PostApplicationStartMethod(typeof(SomeBaseNamespace.Views.RazorGeneratorMvcStart), "Start")]

namespace SomeBaseNamespace.Views
{
    public static class RazorGeneratorMvcStart
    {
        public static void Start()
        {
            var engine = new PrecompiledMvcEngine(typeof(RazorGeneratorMvcStart).Assembly) 
            {
                UsePhysicalViewsIfNewer = HttpContext.Current.Request.IsLocal
            };

            ViewEngines.Engines.Insert(0, engine);
        }
    }
} 
```

请注意这是如何使用当前程序集（您的视图程序集）创建视图引擎并将其添加到静态`ViewEngines`集合（包含在主 MVC 项目中）。

一旦投入生产，我还建议关闭该`UsePhysicalViewsIfNewer`设置，这会增加显着的性能开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-28T02:55:54.953

*术语*

BaseMvc - 带有 Razor 生成的视图、控制器等
ConsumerMvc - 具有此项目的布局并引用 BaseMvc

*概括*

在基本控制器中创建视图的交付。该视图使用通过 BaseMvc 中的 _ViewStart.cshtml 存在于 ConsumerMvc 中的布局。对于我的情况，我有不同布局的项目，因此是“指针”布局视图。我认为这是一个有用的例子。

## BaseMvc 示例

我创建了一个`AREA`，所以我可以设置一个默认布局。

**/Areas/Components/Controllers/ShoppingController.cs**

```
public ActionResult Basket()
{
    return View();
} 
```

**/Areas/Components/Views/Shopping/Basket.cshtml**

```
Welcome to the Basket! 
```

**/Areas/Components/Views/_ViewStart.cshtml**

```
@{
    //-- NOTE: "Layout_Component.cshtml" do not exist in the BaseMVC project. I did not
    // experiment with having it in both projects. A tip if you do is to ensure both
    // the base and consumer _Layout_Component.cshtml files are both razor
    // generated to allow the razor generator to handle the overrride. See
    // my other SO answer linked below.
    Layout = "~/Views/Shared/_Layout_Component.cshtml";
} 
```

代码注释中引用的链接：[ASP.NET MVC 站点中的覆盖视图不起作用](https://stackoverflow.com/questions/28348377/override-view-in-asp-net-mvc-site-not-working/31016271#31016271)

## ConsumerMvc 示例

**/Views/Shared/_Layout_Component.cshtml**

```
@{
    Layout = "~/Views/Shared/_Layout_ConsumerMvc.cshtml";
}
@RenderBody() 
```

## 我的网址

`http://www.consumermvc.example.com/Components/Shopping/Basket`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-30T12:01:10.793

调用时并非所有程序集都被加载`Application_Start`。添加额外的处理程序：

```
AppDomain.CurrentDomain.AssemblyLoad += (sender, args) => 
{
    // ...
    // some code determining whether we've got an assembly with views
    // ...

    var engine = new PrecompiledMvcEngine(args.LoadedAssembly);
    engine.UsePhysicalViewsIfNewer = true;

    ViewEngines.Engines.Insert(0, engine);

    // StartPage lookups are done by WebPages. 
    VirtualPathFactoryManager.RegisterVirtualPathFactory(engine);
} 
```

# css - Bootstrap 响应式视差图像重叠

> ID：13527355
> 
> 赞同：2
> 
> 时间：2012-11-23T10:38:57.673
> 
> 标签：css, image, twitter-bootstrap, parallax

目前我正在为我的网站制作一个响应式模板。我正在使用 twitter 引导框架来创建这个模板。

使用 Jarallax 插件的视差效果，因为我的网站是响应式的并且我的网站正在使用**twitter 引导程序**，所以我无法将 2 个图像放在一个列中（span4）。

将背景图像用作 div 时，背景图像无法在所有屏幕尺寸上正确显示，因此这是一个响应问题。

```
<img src="image-background.png" alt="bg" />
<img src="image-parallax.png" alt="fg" class="parallax-top" /> 
```

滚动图像时，视差应该改变样式并创建**视差**效果。 **问题**是我无法以模板仍然**响应**的方式将这些图像放在一起。

下面的 jsfiddle 链接中的简单示例。

[http://jsfiddle.net/nytrm/Z49Pv/3/](http://jsfiddle.net/nytrm/Z49Pv/3/)

我希望找到一个解决方案，这样我仍然可以使用视差并保持响应能力。

# cakephp - CakePHP 2.1：为 InternalErrorException 设置消息

> ID：13527356
> 
> 赞同：1
> 
> 时间：2012-11-23T10:38:58.920
> 
> 标签：cakephp, exception, exception-handling, cakephp-2.1

我的一个评论提交表单中有安全组件。现在，当出现问题并调用黑洞回调时，我想抛出带有自定义消息的 InternalErrorException，例如：

```
 throw new InternalErrorException('You have tried to submit a comment whose security token is either invalid or expired. Please try again by reloading the blog post and commenting again. Thank you.'); 
```

问题是消息不会在生产模式下显示（调试 == 0）。我该怎么做才能向用户显示消息而不是“发生内部错误”？

这是我的 error500.ctp：[http ://pastebin.com/t9NuzuqS](http://pastebin.com/t9NuzuqS)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:48:32.767

这些“信息”仅用于发展目的。在实时模式（调试 0）中，访问者不应获得您在服务器上获得的任何描述性问题描述。反正他也不会明白。所以在实时模式下，只有一个 404/5xx 被抛出，仅此而已。但是您的消息将被错误记录下来供您（作为开发人员）以后查找。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T11:48:46.407

您可能会做的是覆盖组件的`blackHole`操作`Security`。

目前您可以在`cakephp\lib\Cake\Controller\Component\SecurityComponent`. `SecurityComponent`您应该在您的文件夹中创建一个`Controller\Component`并根据需要覆盖此方法：

```
public function blackHole(Controller $controller, $error = '') {
    if ($this->blackHoleCallback == null) {
        throw new BadRequestException(__d('cake_dev', 'The request has been black-holed'));
    } else {
        return $this->_callback($controller, $this->blackHoleCallback, array($error));
    }
} 
```

您可以使用另一条消息引发相同的异常。`debug`即使设置为 0 ，用户也会看到此异常，[如文档中所述](http://book.cakephp.org/2.0/en/development/exceptions.html#built-in-exceptions-for-cakephp)

# php - 用php上传图片

> ID：13527357
> 
> 赞同：1
> 
> 时间：2012-11-23T10:39:03.847
> 
> 标签：php, html, image

我想在目录中添加图像。该目录是动态生成的。但是在目录中上传图片时出现错误，由于此错误，图片无法上传，错误如下：

警告：mkdir(): 文件存在于第 21 行的 C:\wamp\www\test\index.php

我的代码在这里：

```
 <body>
            <form method="post" action="" enctype="multipart/form-data">
            <input type="file" name="filename" id="filename" />
            <input type="submit" name="pic" />
            </form>

    </body>
    </html>

    <?php
        if(isset($_POST['pic'])){
            $comimages = $_FILES['filename']['tmp_name'];
            $targetpath = mkdir("pageimage/pageid");
                $compath = $targetpath."/".$_FILES['filename']['name'];

                $comFileType=$_FILES['filename']['type'];
                $comFileSize=$_FILES['filename']['size'];
                $comFileSize=$comFileSize/1024;

                if($comFileSize<1000)
                {
                    $arrFileType=array("image/jpeg","image/png","image/gif","image/bmp");

                    if(in_array($comFileType,$arrFileType))

                    {

                        move_uploaded_file($comimages,$compath);
                    }
                    else
                    {
                        echo("invalid file format");    
                    }
                }
                else
                {
                    echo("File Size Error");    
                }
        }
    ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T10:40:27.497

线索在错误中。您尝试创建的目录`$targetpath = mkdir("pageimage/pageid");`已经存在......所以您无法再次创建它！

我建议在尝试制作之前快速检查文件是否存在。有一个功能：**[file_exists()](http://php.net/manual/en/function.file-exists.php)**

此外，`mkdir()`返回一个布尔值（成功或失败）；不是文件目录，因此您将无法按`$targetpath`预期使用变量。

试试这个...

```
$targetpath = "pageimage/pageid";
if (!file_exists($targetpath)) {
    mkdir($targetpath);
}
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T10:44:38.950

第一个问题：第 21 行在哪里？无论如何，您必须在创建目录之前测试目录是否存在。显然，它似乎已经存在于您的案例中（文件夹在技术上被视为文件，参见示例`is_dir()`）。使用`file_exists()`. 另请注意，如果您创建结构（文件夹和内部文件夹），则必须使用`$recursive`参数，请参阅 PHP 文档： http: [//php.net/manual/fr/function.mkdir.php](http://php.net/manual/fr/function.mkdir.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T10:42:20.487

更换

```
$targetpath = mkdir("pageimage/pageid"); 
```

和：

```
$targetpath = "pageimage/pageid";
if(!is_dir($targetpath)){
mkdir($targetpath);
} 
```

这样，您仅在目录不存在时才创建目录。由于目录已经存在，您得到的错误是正常的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T10:42:20.790

您不能两次创建目录，在创建目录之前检查它的存在。

您可以使用`is_dir()`并`is_writeable()`确保您可以写入此目录。

见： [http ://uk.php.net/manual/en/function.is-writable.php](http://uk.php.net/manual/en/function.is-writable.php)

[http://uk.php.net/is_dir](http://uk.php.net/is_dir)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T10:42:24.517

代替

```
$targetpath = mkdir("pageimage/pageid"); 
```

和..

```
$targetpath = if(is_dir("pageimage/pageid")) ? "pageimage/pageid" : mkdir("pageimage/pageid"); 
```

您应该在创建文件夹之前检查该文件夹是否存在。

# javascript - JavaScript OOP 私有变量

> ID：13527363
> 
> 赞同：3
> 
> 时间：2012-11-23T10:39:30.600
> 
> 标签：javascript, oop, class, prototype

更新：这是对我之前的问题的更新，该问题对于 StackExchange 的目标有点偏离主题。但是我对之前关于这个主题的询问有一个后续问题。

对象模型：

```
 var Soldier;

 Soldier = (function() {

    "use strict";

    function Soldier() {
        var privateVar = "privateValue";

        this.methodToGetPrivateValue = function() {
            return privateVar;
        }
    }

    var sharedPrivateVar = "sharedPrivateValue";

    function sharedPrivateMethod() {
        // I want to get value `privateVar`
    }

    Soldier.prototype = {
        publicVar: "publicValue",

        publicMethod: function() {
            return this.publicVar;
        },

        sharedPrivate: function() {
            return sharedPrivateVar;
        }
    }

    return Soldier;

 })();

 var marine = new Soldier(); 
```

所以我更新的问题是使这个主题更合适的问题是，是否有办法以这种方式定义一个 sharedPrivateMethod 以便能够访问上述设置中的私有变量？

我问的原因是 sharedPrivateMethod 对实例对象完全不可见。由于 this.method = function()，实例可以访问 Soldier() 中定义的函数。我不知道它目前是否有任何实际用途，但看看它是否有可能会很有趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T11:17:28.813

您所拥有的问题是您的`_self`变量由通过构造的*所有*实例共享`new Test`，例如，假设您`privateMethod`使用它：

```
function privateMethod() {
    console.log(_self.message);
} 
```

然后这个：

```
var t1 = new Test();
t1.message = "Message 1";
var t2 = new Test();
t2.message = "Message 2";

t1.privateMethod(); 
```

...将记录“消息 2”，而不是您期望的“消息 1”，因为第二次调用`new Test`已覆盖`_self_`变量。

除了`_self`变量，你所拥有的一切都很好。它使您可以拥有所有实例共享的私有数据和功能，这非常方便。如果您需要拥有特定于每个实例的真正私有数据，则需要在构造函数本身中创建使用该数据的函数：

```
function Test() {
    var trulyPrivate = 42;

    this.showTrulyPrivate = function() {
        console.log("trulyPrivate = " + trulyPrivate);
    };
} 
```

然后`trulyPrivate`是实例真正私有的。成本是为*每个*实例创建`showTrulyPrivate`函数的成本。（函数对象可能能够共享底层代码，一个好的引擎会这样做，但会有*单独*的函数对象。）

 **所以总结一下：

```
var Test = (function() {
    // Data and functions defined here are private to this code
    // and shared across all instances. There is only one copy
    // of these variables and functions.
    var privateDataSharedByAll;

    function privateFunctionSharedByAll() {
    }

    function Test() {
        // Data and functions here are created for *each* instance
        // and are private to the instance.
        var trulyPrivate;

        this.hasAccessToTrulyPrivate = function() {
            // Has access to the shared private data *and* the
            // per-instance private data.
        };
    }

    return Test;
})(); 
```**

# javascript - 除非我提醒变量，否则我的事件无法正常工作？为什么？

> ID：13527367
> 
> 赞同：0
> 
> 时间：2012-11-23T10:39:56.343
> 
> 标签：javascript, jquery, drop-down-menu, jquery-events

我有两个事件：一个`onFocus`( `saveOld`) 和一个`OnChange`( `showPoints`)。当用户关注下拉菜单时，我使用该`jquery.data`功能保存下拉菜单的旧值。当用户更改下拉列表的值时，我会检查旧值是否大于当前值。如果是这样，我会相应地调整总数。但这仅在我`.data`从`onChange`. 没有警报，什么都不会发生。

```
function showPoints(pointCategory, ddlAmount, name){
    old = jQuery.data(document.body,name);

    alert(old);

    var Points = parseInt($('p#points').html());

    if(old > ddlAmount){
       diff =  old - ddlAmount;
       currentPoints = Points + (diff * pointCategory);
    }else{
       currentPoints = Points - (ddlAmount * pointCategory);
    }
    $('p#points').html(currentPoints);
}//showPoints

function saveOld(oldAmount, name){
    $(document.body).data(name,oldAmount);
} 
```

如果没有警报，`showPoints()`则无法正常工作。出了什么问题？

编辑：请注意，我已经尝试过`this.delay(1000)`警报应该在哪里。仍然没有工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T11:02:02.107

尝试将 onfocus 更改为 onclick 并将当前值保存到 showPoints 末尾的 .data 中，如下所示：

```
$('p#points').html(currentPoints);
$(document.body).data(name,currentPoints); 
```

我会在 showPoints 函数中使用局部变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T10:49:45.987

当您发出警报时，您会失去对元素的关注。所以它的情况发生了变化`alert()`。

所以我会说你保存值`onBlur`（当你离开控件时调用。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T10:53:46.390

delay(1000) 无济于事，因为它只会增加处理时间，而不会给函数处理更多时间。我会使用 x3ro 的解决方案并检查函数的调用方式。

# php - 当数据库中没有数据时表消失

> ID：13527369
> 
> 赞同：0
> 
> 时间：2012-11-23T10:40:06.343
> 
> 标签：php, javascript, ajax

我有一个显示数据库数据的表。代码如下：

```
<table class="table table-hover table-bordered" style="width:300px" id="contact">
    <tbody data-bind="foreach:items">
        <tr>
            <td style="height:180px" data-bind="text:title1"></td>
        </tr>
    </tbody>
</table> 
```

我正在使用 ajax 来获取数据：

```
$(function(){
  $('.datepicker').datepicker({
        dateFormat: 'M dd,yy',
        onSelect: function(dateText, inst) { 
                var date = $(this).datepicker('getDate');
                var dateFormat = inst.settings.dateFormat || $.datepicker._defaults.dateFormat;
                $('#date').text($.datepicker.formatDate( dateFormat, date, inst.settings));
                var month = date.getMonth() + 1;
                var day = date.getDate();
                var year = date.getFullYear();
                var date1 = year + "/" + month + "/" + day;
                $.post(root+"home/index?json",{date:date1}, function(data) {ko.applyBindings(new DynamicModel(data.calendar1),document.getElementById("contact"));});
        },
    });
}); 
```

表显示来自数据库的数据，但是当数据库中没有数据时会消失，所以请帮助我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:50:01.093

添加一个标题会有所帮助，因为它至少会显示标题。由于空表不会生成任何代码，我猜它没有出现

# richfaces - Richfaces 确认对话框

> ID：13527373
> 
> 赞同：0
> 
> 时间：2012-11-23T10:40:23.317
> 
> 标签：richfaces

伙计们！我正在尝试通过以下方式创建确认对话框：

```
<h:form>
  <a4j:commandButton id="declareNewStatusCbt" image="/img/buttons/save.png"
  styleClass="hoverable rich-panel-button"
  onclick="#{rich:component('confirmation')}.show();return false">
  </a4j:commandButton>
  <a4j:jsFunction name="doSubmit" action="#{customerService.action}"/>
</h:form> 
```

模态面板块上的按钮如下（rich:modalPanel has `id="confirmation"`）：

```
<h:commandButton image="img/buttons/proceed.png" styleClass="hoverable"       
onclick="#{rich:component('confirmation')}.hide();doSubmit();return false;"/> 
```

因此，基本上我需要获得与 with 相同的效果，`a4j:commandButton action="#{customerService.action}"`但是当我按下模式窗口上的“继续”按钮时，我`TypeError: this._form is null`在 FireFox 控制台中收到，并且页面只是重新加载。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:54:50.443

我自己找到了解决方案 - 这很好用，问题出在`<h:form>`. 显然`a4j:jsFunction`调用了不可取的表单提交，很遗憾没有注意到这一点。所以，你可以简单地删除 `<h:form>`:)

# hadoop - Hive 中 hive/lib/hive-builtins-0.9.0.jar 的 FileNotFoundException

> ID：13527377
> 
> 赞同：0
> 
> 时间：2012-11-23T10:40:46.100
> 
> 标签：hadoop, mapreduce, hive, hdfs, cloudera

我在本地机器上配置了 Hadoop 0.23，并使用简单的 map-reduce wordcount 程序使其工作。我已将 Hive 配置为使用它。所有 DDL 查询都可以正常工作。但是当我触发具有聚合的查询时（这将触发 Map-educe 作业）

```
java.io.FileNotFoundException: File does not exist: /Users/varadham/projects/hadoop/hive/lib/hive-builtins-0.9.0.jar
    at org.apache.hadoop.hdfs.DistributedFileSystem.getFileStatus(DistributedFileSystem.java:738)
    at org.apache.hadoop.mapreduce.filecache.ClientDistributedCacheManager.getFileStatus(ClientDistributedCacheManager.java:208)
    at org.apache.hadoop.mapreduce.filecache.ClientDistributedCacheManager.determineTimestamps(ClientDistributedCacheManager.java:71)
    at org.apache.hadoop.mapreduce.JobSubmitter.copyAndConfigureFiles(JobSubmitter.java:252)
    at org.apache.hadoop.mapreduce.JobSubmitter.copyAndConfigureFiles(JobSubmitter.java:290)
    at org.apache.hadoop.mapreduce.JobSubmitter.submitJobInternal(JobSubmitter.java:361)
    at org.apache.hadoop.mapreduce.Job$11.run(Job.java:1218)
    at org.apache.hadoop.mapreduce.Job$11.run(Job.java:1215)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:415)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1212)
    at org.apache.hadoop.mapreduce.Job.submit(Job.java:1215)
    at org.apache.hadoop.mapred.JobClient$1.run(JobClient.java:609)
    at org.apache.hadoop.mapred.JobClient$1.run(JobClient.java:604)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:415)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1212)
    at org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:604)
    at org.apache.hadoop.hive.ql.exec.ExecDriver.execute(ExecDriver.java:435)
    at org.apache.hadoop.hive.ql.exec.ExecDriver.main(ExecDriver.java:693)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:208)
Job Submission failed with exception 'java.io.FileNotFoundException(File does not exist: /Users/varadham/projects/hadoop/hive/lib/hive-builtins-0.9.0.jar)' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:25:25.137

确保你在 HDFS 中有 jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T02:23:54.573

您应该在您的 hadoop 文件系统中创建相同的文件 /Users/varadham/projects/hadoop/hive/lib/hive-builtins-0.9.0.jar。然后它应该工作。

# javascript - 遍历整个表并检查跨度标签属性名称

> ID：13527383
> 
> 赞同：2
> 
> 时间：2012-11-23T10:41:18.520
> 
> 标签：javascript, jquery

*HTML：*

```
<table id="mytable">    
<tr>
<td class="cssred"><span name='478'>john</span></td>
</tr>
<tr>
<td class="cssred"><span name='478'></span></td>
</tr>
<tr>
<td class="cssred"><span name='478'></span></td>
</tr>
 <tr>
<td class="cssred"><span name='521'></span></td>
</tr>
<tr>
<td class="cssred"><span name='522'></span></td>
</tr>
</table> 
```

*JavaScript：*

```
$(this).find('span').attr('name'); 
```

我必须遍历整个表并检查任何跨度标记属性名称值是否为 478，然后使其父单元格类`cssgreen`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T10:42:29.543

```
$("#mytable td:has(span[name='478'])").toggleClass("cssred cssgreen"); 
```

或者

```
$("#mytable span[name='478']").parent().toggleClass("cssred cssgreen"); 
```

**演示：http:** [//jsfiddle.net/E55jb/](http://jsfiddle.net/E55jb/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T10:43:01.447

试试这个

```
$('#mytable span').each(function() {
   if($(this).attr('name') == "478") $(this).parent().removeClass('cssred').addClass('cssgreen');
}); 
```

或更简单

```
$('#mytable span[name=478]').parent().removeClass('cssred').addClass('cssgreen'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T10:47:53.740

试试这个

```
 $('span[name="478"]').each(function(){
     $(this).parent().removeClass("cssred");
     $(this).parent().addClass("cssgreen");
  }) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T10:47:58.420

**解决方案：**

```
 $("#mytable span").each(function() {
       if($(this).attr("name") == "478"){ // check if name=478
       $(this).parent().removeClass("cssred"); // remove red bg
       $(this).parent().addClass("cssgreen"); // add green bg
  }); 
```

# asp.net-mvc - ASPxGridView 在我的 ASP.NET MVC 解决方案中不起作用

> ID：13527385
> 
> 赞同：0
> 
> 时间：2012-11-23T10:41:28.060
> 
> 标签：asp.net-mvc, datatable, aspxgridview

我正在使用`ASPxGridView`和更新来自 DataTable 的数据，它工作正常。但是当我尝试使用编辑、更新、删除、分页、排序功能时，我遇到了麻烦。显示按钮，但当我单击它们时该功能不起作用。

这是我的`Sample.aspx`文件：

**[ASPx]**

```
<dx:aspxgridview ID="grid" ClientInstanceName="grid" runat="server" 
        OnDataBinding="grid_DataBinding" Width="100%" EnableCallBacks="false">        

    <Settings ShowTitlePanel="True" />
    <SettingsText Title="Tabla" />
    <SettingsPager PageSize ="10" ShowSeparators="true" PageSizeItemSettings-Items="20" >
        <PageSizeItemSettings Visible="true" />            
    </SettingsPager>

</dx:aspxgridview> 
```

Sample.aspx.cs 背后的代码：

**[C＃]**

```
using System;
using System.Data;
using System.Web.Mvc;
using DataConnector;
using DevExpress.Web.ASPxGridView;
using DevExpress.Web.Data;

namespace Sample.Views.Actions

{

    public partial class Sample: ViewPage
    {

        private DataTable dt;

        protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
                grid.DataBind();

            grid.RowValidating += new ASPxDataValidationEventHandler(grid_RowValidating);

            if (!this.IsPostBack)
            {
                GridViewCommandColumn c = new GridViewCommandColumn();
                grid.Columns.Add(c);                
                c.Caption = "Operations";

                c.EditButton.Visible = true;
                c.UpdateButton.Visible = true;
                c.NewButton.Visible = true;
                c.DeleteButton.Visible = true;
                c.CancelButton.Visible = true;
            }            
        }        

        DataTable BindGrid()
        {
            DataConnection DM = new DataConnection();
            if (DM.login("ADMIN", "PASS"))

                dt = DM.getDataSet("SELECT * FROM Table_Name");
                grid.DataSource = dt;
                dt.PrimaryKey = new DataColumn[] { dt.Columns[0] };       

            return dt;
        }

        protected void grid_DataBinding(object sender, EventArgs e)
        {
            // Assign the data source in grid_DataBinding
            BindGrid();
        }

        protected void grid_RowUpdating(object sender, ASPxDataUpdatingEventArgs e)
        {
            int id = (int)e.OldValues["id"];
            DataRow dr = dt.Rows.Find(id);
            dr[0] = e.NewValues[""];
            dr[1] = e.NewValues[""];
            dr[2] = e.NewValues[""];
            dr[3] = e.NewValues[""];
            dr[4] = e.NewValues[""];

            ASPxGridView g = sender as ASPxGridView;
            UpdateData(g);
            g.CancelEdit();
            e.Cancel = true;
        }

        void grid_RowValidating(object sender, ASPxDataValidationEventArgs e)
        {
            int id = (int)e.NewValues["id"];
            if ((!e.OldValues.Contains("id") || ((int)e.OldValues["id"] != id))
                && (dt.Rows.Find(id) != null))
            {
                ASPxGridView grid = sender as ASPxGridView;
                e.Errors[grid.Columns["id"]] = String.Format("Column 'Id' is constrained to be unique.  Value '{0}' is already present.", id);
            }
        }

        private void UpdateData(ASPxGridView g)
        {
            g.DataBind();
        }
    }} 
```

在控制器页面上调用示例：

**[C＃]**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using System.Data;
using DataConnector;

namespace Sample.Controllers

{    
public class ActionsController : Controller

    {

        public ActionResult Sample()
        {
            return View();
        }

    }
} 
```

网格上显示的数据。

我创建了一个新的解决方案，其中只有`Sample.aspx`and`Sample.aspx.cs`并且我在没有 MVC 的情况下使用并且功能正在运行。不同之处在于“公共部分类示例：`System.Web.UI.Page`”。如果我尝试不`System.Web.UI.Page`使用我提到的代码，它会给我以下错误：

```
The view must derive from ViewPage, ViewPage<TModel>, ViewuserControl,or ViewuserControl<TModel>. 
```

我究竟做错了什么？为什么 ASPxGridView 的功能不起作用？

如果起草得不好，但我的母语不是英语，我很抱歉，我是一名新程序员:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:25:32.473

ASPxGridView 是一个 WebForms 控件，不能在 ASP.NET MVC 中使用。相反，您应该使用[DevExpress MVC 扩展](http://devexpress.com/MVC)。具体来说，[DevExpress MVC GridView 扩展](http://mvc.devexpress.com/GridView/DataBinding)

观看我的[“DevExpress MVC 入门视频”](http://www.youtube.com/watch?v=7DshgC2uTxE)以了解更多信息。

# php - 如何只更新 Yii 框架中的某些字段？

> ID：13527391
> 
> 赞同：9
> 
> 时间：2012-11-23T10:42:05.770
> 
> 标签：php, yii

![在此处输入图像描述](../Images/9ed30c326a69e2f9533848755495c8e3.png)

我不想更新密码字段。如何使用它。我使用 md5 编码作为密码。所以我不想更新 yii 框架中的密码字段。任何帮助表示赞赏？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-21T02:58:34.903

我认为更好的方法是在这种情况下不使用该场景。规则中的下一个代码只是对场景说：**下一个字段是必需的**。但不是：**跳过另一个 else**。

```
array('name, username, email', 'required', 'on' => 'update'), 
```

例如，如果我们将密码长度限制为最多 32 个字符，但在数据库中以 sha1 格式存储（长度为 40），那么我们就会遇到问题，因为验证器会阻塞数据库查询。这是因为当您进行更新时，“validatе”方法检查所有类属性（关于数据库表映射），而不仅仅是邮寄的新属性。

可以使用方法“saveAttributes”，但后来我注意到另一个问题。如果“email”列在数据库中是唯一的，并且如果编辑的电子邮件与现有的电子邮件重复，则规则中定义的 Yii 消息系统无法通知并抛出有关数据库查询的错误代码。

我认为最简单的方法是：在这种情况下不要设置场景。只需将您想要的属性作为参数发送。这将保留 GII 创建的所有 CRUD 功能。

在您的代码中，它看起来像这样：（在模型中）

```
public function rules() {
    return array(
        array('name, username, email, password', 'required'),
    );
} 
```

（在控制器中）

```
if($id==Yii::app()->user->id){ 
    $model=$this->loadModel($id); 
    if(isset($_POST['JbJsJobResume'])) { 
        $model->attributes=$_POST['JbJsJobResume']; 
        if($model->save(true, array('name', 'username', 'email'))) 
            $this->redirect(array('view','id'=>$model->id)); 
    } 

    $this->render('update',array( 'model'=>$model, )); 
} 
```

我注意到您不使用 RBAC。它非常方便和灵活 - 试试吧。

[http://www.yiiframework.com/doc/guide/1.1/en/topics.auth#role-based-access-control](http://www.yiiframework.com/doc/guide/1.1/en/topics.auth#role-based-access-control)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-23T10:48:07.157

在您的模型中，您必须执行以下操作：

```
public function rules() {
    return array(
        array('name, username, email, password', 'required', 'on' => 'create'),
        array('name, username, email', 'required', 'on' => 'update'),
    );
} 
```

假设您现在运行的场景是更新。所以我不需要那里的密码。我只在您可能拥有的创建场景中需要它。因此，在您拥有的视图文件中删除密码字段并在您拥有的操作中包含以下内容：

```
$model->setScenario('update'); 
```

所以它不需要密码，它会保持不变。

对于密码更改，您可以创建一个新操作（例如 actionPassChange），您需要在其中输入两次新密码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T11:15:58.720

```
$model->attributes=$_POST['JbJsJobResume']; 
```

而不是分配所有属性，只需分配您想要保存的属性，如

```
$model->name=$_POST['JbJsJobResume']['name'];
$model->save(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-21T21:18:36.250

我不确定为什么这是一个问题，一些代码可以帮助我们理解原因。如果您不希望捕获/更新密码，那么为什么表单中有密码字段？

如果您从视图中删除密码字段，密码字段的值将不会被发送回控制器，然后它不会被更新。

上述方法有可能不起作用，这可能是在您的用户模型中，您正在加密`afterValidate`方法中的密码？：

```
protected function afterValidate()
{
    parent::afterValidate();
    $this->password = $this->encrypt($this->password);
}

public function encrypt($value)
{
    return md5($value);
} 
```

在这种情况下，如果您从视图中删除密码字段，而只是更新名称、用户名或电子邮件，那么密码的 md5 哈希将自动重新哈希，您将丢失真实密码。

解决此问题的一种方法是在 afterValidate 方法（创建或更新）中对密码进行 md5 验证，但是如果用户希望以相同的形式更改配置文件详细信息，请要求用户再次验证其密码。

1.  FORM：用户更改名称并验证密码
2.  已发布表格
3.  控制器调用认证方法。
4.  如果验证为真，覆盖用户表中的条目（包括验证密码）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-21T03:40:59.613

第一个选项只需在设置密码字段之前取消设置：

```
function update(){
    $model=$this->loadModel($id);
    unset($_POST['JbJsJobResume']['password']);
    $model->attributes=$_POST['JbJsJobResume'];
    $model->save();  
} 
```

第二个选项：使用临时变量：

```
function update(){
    $model=$this->loadModel($id);
    $temPassword = $model->passwrod;
    $model->attributes=$_POST['JbJsJobResume'];
    $model->passwrod = $temPassword;
    $model->save();  
} 
```

第三种选择：使用[场景](http://www.yiiframework.com/wiki/266/understanding-scenarios/)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-07-31T10:57:21.820

我认为@Gravy 的回答是正确的，谢谢 Gravy 和 Nikos Tsirakis。我已经修复了与@faizphp 几乎相同的问题。正如 Nikos Tsirakis 所说，我为用户模型添加了场景，但也遇到了同样的问题。然后我发现我在User.afterValidate中加密了密码，所以每次更新用户模型时，程序再次将数据库中的密码加密为错误的密码。所以我改变了我的功能

```
protected function afterValidate()
{
        parent::afterValidate();
        if (!$this->hasErrors())
            $this->password = $this->hashPassword($this->password);
}
</code> 
```

至

```
protected function afterValidate()
{
        parent::afterValidate();
        if (!$this->hasErrors() && $this->scenario==="create")
            $this->password = $this->hashPassword($this->password);
} 
```

. 这似乎工作。

# c# - Entity Framework 5 RTM Code First 枚举支持损坏：其他命名空间中的枚举

> ID：13527400
> 
> 赞同：1
> 
> 时间：2012-11-23T10:42:33.567
> 
> 标签：c#, .net, entity-framework, .net-4.5, entity-framework-5

这是关于 Entity Framework 5 RTM Code First。

当我映射具有现有枚举的实体时，我收到此错误：

> 找不到概念类型“[FULL ENUM TYPE NAME]”的对应对象层类型

实际上它在`DbContext`.

其他一些问题（[Using Enums with Code First & Entity Framework 5](https://stackoverflow.com/questions/9769619/using-enums-with-code-first-entity-framework-5)）有一个答案指向一些博客文章，其中有一个关于如何使其工作的方法，但它谈到了数据库优先/模型优先方法。

**如何使用 Code-First 方法添加 EDM 枚举类型？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T23:50:44.277

恐怕现在不可能 - EF5 [http://entityframework.codeplex.com/workitem/532](http://entityframework.codeplex.com/workitem/532)中存在已知错误，导致上述错误。

我正在努力解决类似的问题，但没有找到任何优雅的解决方案。我最终得到了`int`列而不是枚举列。

**编辑**（有问题的模型）：

核心组件：

```
public enum UserStatus { Approved, Disabled }

public interface IUser {
    public int ID { get; }
    public string Username { get; set;}
    public UserStatus Status { get; set;}
} 
```

用户组装：

```
public class User : IUser {
    public int ID { get; protected set; }
    public string Username { get; set; }
    public UserStatus Status { get; set; }
} 
```

# ruby-on-rails - 从 DOB RoR 显示年龄

> ID：13527401
> 
> 赞同：0
> 
> 时间：2012-11-23T10:42:34.510
> 
> 标签：ruby-on-rails, date

我正在尝试使用以 1984-12-28 格式存储在数据库中的出生日期输出用户年龄。

dob 存储在配置文件中

我已经看到了很多答案，但无法弄清楚将代码放在哪里。

干杯:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:45:11.943

将`age`方法添加到您的`User`模型中，该方法`date_of_birth`将从`Time.now()`. 您也可以对其进行格式化，以便只返回完整的年份（无论如何这是显示年龄的常用方法）。稍后在您的意见中仅参考此方法。

# python - 如何在pygame（运动）中动画绘图

> ID：13527402
> 
> 赞同：1
> 
> 时间：2012-11-23T10:42:42.227
> 
> 标签：python, animation, pygame, draw

我一直在尝试为绘图元素设置动画但没有成功。我可以为导入的图像设置动画，但是当我尝试为 pygame 生成的绘图设置动画时，它们仍然是静态的。

编辑：“动画”是指“移动”。就像让一个圆圈在 x 和 y 方向上移动一样。

这是我的代码：

```
import pygame, sys
from pygame.locals import *

pygame.init()

FPS = 60
WIDTH = 600
HEIGHT = 500
fpsClock = pygame.time.Clock()
DISPLAYSURF = pygame.display.set_mode((WIDTH, HEIGHT), 0, 32)
WHITE = (255, 255, 255)
BLACK = (0, 0, 0)
ballx = WIDTH / 2
bally = HEIGHT / 2
ball_vel = [1, 1]
ball_pos =(ballx, bally)
RADIUS = 20

# Game Loop:
while True:
    # Check for quit event
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            pygame.quit()
            sys.exit()

    # Erase the screen (I have tried with and without this step)
    DISPLAYSURF.fill(BLACK)

    # Update circle position
    ballx += ball_vel[0]
    bally += ball_vel[1]

    # Draw Circle (I have tried with and without locks/unlocks)
    DISPLAYSURF.lock()
    pygame.draw.circle(DISPLAYSURF, WHITE, ball_pos, RADIUS, 2)
    DISPLAYSURF.unlock()

    # Update the screen
    pygame.display.update()
    fpsClock.tick(FPS) 
```

我已经尝试过锁定/解锁显示表面（如文档所示）。在更新屏幕之前，我尝试过擦除屏幕和不擦除屏幕（正如一些教程所建议的那样）。我只是无法让它工作。

我究竟做错了什么？你如何为绘图元素设置动画？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T11:57:05.893

您没有更新 ball_pos 元组：您将其设置为起始坐标：

```
ballx = WIDTH / 2
bally = HEIGHT / 2
ball_vel = [1, 1]
ball_pos =(ballx, bally) 
```

您稍后更新了 ballx 和 bally，但不再将 ball_pos 设置为 ballx 和 bally。在while循环中，设置完ballx和bally后，执行以下操作：

```
ball_pos = (ballx,bally) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-16T21:38:02.677

```
import pygame, sys
from pygame.locals import *

pygame.init()

FPS = 60
WIDTH = 600
HEIGHT = 500
fpsClock = pygame.time.Clock()
DISPLAYSURF = pygame.display.set_mode((WIDTH, HEIGHT), 0, 32)
WHITE = (255, 255, 255)
BLACK = (0, 0, 0)
ballx = WIDTH / 2
bally = HEIGHT / 2
ball_vel = [1, 1]
ball_pos =(ballx, bally)
RADIUS = 20

# Game Loop:
while True:
    # Check for quit event
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            pygame.quit()
            sys.exit()

    # Erase the screen (I have tried with and without this step)
    DISPLAYSURF.fill(BLACK)

    # Update circle position
    ballx += ball_vel[0]
    bally += ball_vel[1]
    ball_pos =(ballx, bally)

    # Draw Circle (I have tried with and without locks/unlocks)
    pygame.draw.circle(DISPLAYSURF, WHITE, ball_pos, RADIUS, 2)

    # Update the screen
    pygame.display.flip()
    fpsClock.tick(FPS) 
```

翻转 = 更新（）

# java - jdbc 行集在哪里使用？

> ID：13527407
> 
> 赞同：6
> 
> 时间：2012-11-23T10:43:10.043
> 
> 标签：java, sql, jdbc

有一些 JDBC**行集**，如**CachedRowSet**、**WebRowSet**、**FilteredRowSet**和**JoinRowSet**。有没有预兆知道它们在哪里使用？好的，在我不想打开和连接的地方可能是 CachedRowSet 很好，当我需要插入一些 XML 数据时可能是 WebRowSet 很好（“可能是”，但我不确定）。但是其他人呢？

显然，在 SQL 查询中编写连接而不是创建 2 个 JoinRowSet，从它们中获取所有数据并在 java 中连接字段，性能更好。FilteredRowSet 也是如此 - 将 where 子句添加到 SQL 查询而不是 grub 大量数据并通过 java 过滤它更有效。

但是有人“发明”了 CachedRowSet、WebRowSet、FilteredRowSet 和 JoinRowSet，为什么？有人对他们的使用有一些好的经验吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-09T14:27:48.990

CachedRowSet 接口定义了所有断开连接的 RowSet 对象可用的基本功能。其他三个是 CachedRowSet 接口的扩展，它们提供了更专业的功能。以下信息显示了它们之间的关系：

**CachedRowSet**对象具有 JdbcRowSet 对象的所有功能，此外它还可以执行以下操作：

*   获取到数据源的连接并执行查询。
*   从生成的 ResultSet 对象中读取数据并使用该数据填充自身
    。
*   在断开连接时操作数据并更改数据。
*   重新连接到数据源以将更改写回它。
*   检查与数据源的冲突并解决这些
    冲突

**WebRowSet**对象具有 CachedRowSet 对象的所有功能，此外它还可以执行以下操作：

*   将自身写为 XML 文档
*   读取描述 WebRowSet 对象的 XML 文档

**JoinRowSet**对象具有 WebRowSet 对象的所有功能（因此也具有 CachedRowSet 对象的功能），此外它还可以执行以下操作：

*   无需连接到数据源即可形成等效的 SQL JOIN

**FilteredRowSet**对象同样具有 WebRowSet 对象（因此也具有 CachedRowSet 对象）的所有功能，此外它还可以执行以下操作：

*   应用过滤条件，以便只有选定的数据可见。这相当于对 RowSet 对象执行查询，而无需使用查询语言或连接到数据源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:27:10.463

在 RowSet 接口中，行是从 JDBC 数据源检索的，但可以自定义行集，以便其数据也可以来自电子表格、平面文件或任何其他具有表格格式的数据源。

断开连接（不连接到数据源，除非从数据源读取数据或向其写入数据）

```
CachedRowSet

JoinRowSet

FilteredRowSet

WebRowSet 
```

缓存行集 - 断开连接并能够在没有驱动程序的情况下运行，旨在与瘦客户端一起工作，以在分布式应用程序中传递数据或使结果集可滚动和可更新

WebRowSet - 以 XML 格式读取和写入行集的能力。

FilteredRowSet - 用于从行集中过滤的数据子集。

JoinRowSet - 用于组合来自两个不同 RowSet 对象的数据。当相关数据存储在不同的数据源中时，这可能特别有价值

[文档](http://docs.oracle.com/javase/6/docs/technotes/guides/jdbc/getstart/rowsetImpl.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-12T08:06:16.417

不确定，但这就是我对 FilteredRowSet 的看法。可以通过一次连接从数据库中获取数据。例如城市、州和国家的数据。以后可以进一步对数据进行子集化**，而**无需返回 Java 中的数据库。例如与城市、州或国家或它们的组合相关的所有记录。

# javascript - 如何使用 Google 商店定位器库更改左侧面板中显示的商店数量？

> ID：13527408
> 
> 赞同：0
> 
> 时间：2012-11-23T10:43:11.790
> 
> 标签：javascript, gps, maps

我正在使用适用于 Maps API 的商店定位器库，您可以在[此处](http://storelocator.googlecode.com/git/index.html?utm_source=geoblog&utm_campaign=sl)找到 我已经根据需要自定义了 custom.html 示例。我需要做的最后一件事是：将左侧面板中显示的商店的默认值从 10 更改为插入 .csv 文件中的所有商店。我怎样才能改变它？有人可以帮我吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T08:06:07.793

您需要更改的代码行位于“store-locator.compiled.js”中。

```
for( var b = function(){ a[A]( this.store, d ) }, i = 0, k = h.min( 10, c[B] ); i < k; i++ ) 
```

搜索上面的行并将“10”更改为您需要的任何内容。

# php - onchange 事件在使用 jquery 从另一个 php 页面添加的下拉菜单中不起作用

> ID：13527409
> 
> 赞同：1
> 
> 时间：2012-11-23T10:43:13.257
> 
> 标签：php, javascript, jquery, mysql, ajax

我想在下拉菜单中显示数据库中的所有表列表，并允许用户选择表名。当用户选择表名时，我想显示所有数据。html文件是这样的

```
<!DOCTYPE html>
<html>
<head>
    <script src="jquery.js"></script>
    <script>
        $(document).ready(function(){

            $.ajax({url:"home.php?id=1",
                success:function(result){
                    $("#div1").html(result);                 
                }}); 

            $("#dropdown").change(function(){
                alert("list item selected");
                $.ajax({url:"home.php?id=2&tablename="+tableForm.tableLists.value,
                    success:function(result){
                        $("#div2").html(result);
                    }}); 
            });
        });

    </script>
</head>
<body>
    <button value="add" >
        <form name="tableForm"> 
            <div id="div1"></div>
        </form>
    </button>
    <br><hr>
    <div id="div2"></div>
</body> 
```

此页面运行正常并显示属于数据库的所有表名称列表。但是当我从下拉列表中选择一个值时，它甚至不会提醒**“选择列表项”**消息。怎么做才能让它工作？

这是下拉列表的图像 ![在此处输入图像描述](../Images/de4ade1a44a6c2998b5a9fd1f35a5019.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T10:45:08.790

看起来下拉框是动态加载到页面中的，因此您必须使用以下方法将该函数绑定到动态添加的元素`.on()`：

```
$(document).on('change', '#dropdown', function(){
    console.log("list item selected");
    // do whatever here
}); 
```

*   [jQuery API：.on()](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T10:47:07.193

我认为下拉框是动态加载到页面中的。你可以这样使用

```
$("#dropdown").on('change',function(){
                alert("hoi");
                $.ajax({url:"home.php?id=2&tablename="+tableForm.tableLists.value,
                    success:function(result){
                        $("#div2").html(result);
                    }}); 
            }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T10:55:00.553

正如您的代码所暗示的那样，您正在动态填充下拉列表，并且在您的代码中，您正在提供一个不起作用的本地事件，还有其他几个事件处理程序，例如`.on` `.bind` `.live`等，如果我必须在这种情况下工作，我肯定更喜欢使用`.on`或者`.live`你的代码必须是这样的：

```
$("#dropdown").live('change',function(){
    alert("list item selected");
    $.ajax({
       url:"home.php?id=2&tablename="+tableForm.tableLists.value,
       success:function(result){
            $("#div2").html(result);
          }
    }); 
}); 
```

或这个：

```
 $("#dropdown").on('change',function(){
    alert("list item selected");
    $.ajax({
       url:"home.php?id=2&tablename="+tableForm.tableLists.value,
       success:function(result){
            $("#div2").html(result);
          }
    }); 
}); 
```

# android-fragments - 替换视图分页器显示的片段内的片段

> ID：13527410
> 
> 赞同：2
> 
> 时间：2012-11-23T10:43:19.300
> 
> 标签：android-fragments, android-actionbar, android-viewpager, android-listfragment, android-fragmentactivity

请先查看线框图片[http://i.imgur.com/dPAMA.png](http://i.imgur.com/dPAMA.png)。

我正在使用 ViewPager 在 FragmentActivity 中显示片段。ViewPager 从附加的 FragmentPagerAdapter 获取片段

```
mViewPager = (ViewPager) findViewById(R.id.view_pager);       
mAdapter = new HomePagerAdapter(getSupportFragmentManager());    
mViewPager.setAdapter(mAdapter); 
```

假设 viewpager 有 3 个片段要显示，比如 Fragment1、Fragment2、Fragment3。在上图中，“显示片段 1”是第一个片段的标题“片段 1”。这个片段是一个列表片段并显示一个列表。Fragment2 和 Fragment3 有自己的内容要显示。当用户在屏幕上滑动时，ViewPager 将显示下一个片段“Fragment2”。

我想要的是，当单击列表中的一个项目（由 Fragment1 显示）时，Fragment1 应该被其他一些 Fragment 完全替换，比如 Fragment4（这是不同的 Fragment，不会由附加的适配器返回）。当显示 Fragment4 时，操作栏应更改其内容。每当用户使用 Fragment4 和 onBackPress 或来自 ActionBar 的操作时，应再次显示带有列表的 Fragment1。同时 ViewPager 应该表现相同，即在滑动时，下一个片段（在我们的例子中是 Fragment2）将被显示。

基本上，我想获得与示例中相同的行为：

[http://developer.android.com/training/basics/fragments/fragment-ui.html#Replace](http://developer.android.com/training/basics/fragments/fragment-ui.html#Replace)

在此示例中，ListFragment 直接显示在 FragmentActivity 中。我正在使用 ViewPager 显示 ListFragment。我想要与上面示例相同的功能，但在 ViewPager 显示的片段内部。这在 Android 4.2 发布之前很难实现。这个版本的 android 支持使用这样的嵌套片段`getChildFragmentManager()`，我看到了一些希望。

我在我身边尝试了很多天，还扫描了整个stackoverflow以查找与嵌套片段相关的问答，但没有得到我想要的。

那么，这有可能实现吗？如果是，那怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T01:51:58.723

这在 Android 4.2 之前是个大问题，但现在嵌套片段似乎更容易，除了确保后退按钮有效。我在这里发布了我对您的问题的解决方案：[https ://stackoverflow.com/a/13925130/467509](https://stackoverflow.com/a/13925130/467509)

除了更改 ActionBar 之外，我的解决方案回答了您提出的所有问题。

# cygwin - 使用 cygwin 安装 sshd

> ID：13527415
> 
> 赞同：5
> 
> 时间：2012-11-23T10:43:42.557
> 
> 标签：cygwin, sshd

我想使用 cygwin 在 windows 中安装 sshd。但是当我启动 sshd 服务时，它说：

```
The CYGWIN sshd service is starting.
The CYGWIN sshd service could not be started.
The service did not report an error.
More help is available by typing NET HELPMSG 3534. 
```

并且`sshd.log`说：

```
Permissions 0660 for '/etc/ssh_host_dsa_key' are too open.
It is required that your private key files are NOT accessible by others.
This private key will be ignored.
bad permissions: ignore key: /etc/ssh_host_dsa_key
Could not load host key: /etc/ssh_host_dsa_key 
```

那么如何处理呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-09T14:48:44.797

我的 /var/log/sshd.log 最后有这个：

```
Disabling protocol version 2\. Could not load host key
sshd: no hostkeys available -- exiting.
/var/empty must be owned by root and not group or world-writable.
/var/empty must be owned by root and not group or world-writable.
/var/empty must be owned by root and not group or world-writable.
/var/empty must be owned by root and not group or world-writable. 
```

看着 /var 我看到了这个：

```
$ ls /var -All
total 0
drwxrwxr-x+ 1 xxxx       None 0 Dec  8 15:59 cache
drwxrwxr-x+ 1 cyg_server root 0 Dec  8 16:21 empty
drwxrwxr-x+ 1 xxxx       None 0 Dec  8 15:58 lib
drwxrwxrwx+ 1 xxxx       None 0 Dec  8 16:27 log
drwxrwxrwx+ 1 xxxx       None 0 Dec  8 15:48 run
drwxrwxrwt+ 1 xxxx       None 0 Dec  8 15:48 tmp 
```

所以我就这样做了`chmod 600 /var/empty`，并且修复了它！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T21:22:57.060

您需要确保只有 cyg_server 用户可以访问这些密钥。

```
chown cyg_server /etc/ssh*
chmod 600 /etc/ssh* 
```

这些命令就是这样做的，并将允许您的 sshd 正确运行。

# android - Android应用程序通过自动任务杀手防止应用程序杀戮

> ID：13527420
> 
> 赞同：0
> 
> 时间：2012-11-23T10:44:07.080
> 
> 标签：android

有没有办法为应用程序设置一些优先级，所以任务杀手不能杀死它？我不想将我的应用添加到任务杀手安全列表中。我希望我的应用程序对任务杀手不可见。

那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T11:02:17.253

没有一个“应用程序杀手”。有**这样的**应用程序，所以每个用户可以有不同的用户（明智的用户没有任何;），我不希望这样的应用程序允许其他应用程序自动将自己添加到他们的白名单中。我的建议是忽略这一点，并教育您的用户应该避免应用杀手，并且可能弊大于利。Android 可以很好地处理自己的资源，并且希望不会有类似“任务杀手”类型的应用程序，因为 Android 不允许其他应用程序处理任务，因为（公平）HC

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:07:25.480

正如 lenik 所指出的，移动设备属于用户，是用户——而且只有用户——决定了哪些软件在设备上运行或不运行。任何试图做你似乎想让你做的事情的应用程序都会被有安全意识的用户认为是非常可疑的。你是否有充分的理由让应用程序这样做并不重要——重要的是这些能力如何被滥用。

不要低估用户的智慧。

只需在软件（或应用内帮助/在线手册）的某个适当位置通知您的用户不要使用 Task Killer，您就可以为 99.999% 的用户处理该问题。

# php - SimpleXML 导入 PHP。我需要关闭文件吗？

> ID：13527422
> 
> 赞同：4
> 
> 时间：2012-11-23T10:44:12.773
> 
> 标签：php, xml, simplexml

我正在使用 SimpleXML 将数据从 xml 文件导入 php 数组。

我正在使用该`simplexml_load_file`功能，但是一旦我得到了我需要的数据，我是否需要关闭文件或类似的东西来清除内存？

谢谢，

詹姆士

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T10:50:49.953

不，你不需要对文件做任何事情。[`simplexml_load_file()`](http://php.net/manual/en/function.simplexml-load-file.php)读取内容后将在内部关闭文件。

如果你看一下 的源代码`simplexml_load_file`，你会发现它正在调用 xmllib2 形式的`C`函数`xmlReadFile()`，这反过来又会在读取后关闭文件。

```
PHP_FUNCTION(simplexml_load_file)
{
    php_sxe_object *sxe;
    char           *filename;
    int             filename_len;
    xmlDocPtr       docp;
    char           *ns = NULL;
    int             ns_len = 0;
    long            options = 0;
    zend_class_entry *ce= sxe_class_entry;
    zend_bool       isprefix = 0;

    if (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, "s|C!lsb", &filename, &filename_len, &ce, &options, &ns, &ns_len, &isprefix) == FAILURE) {
        return;
    }

    docp = xmlReadFile(filename, NULL, options);  <--- reading the file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T10:51:36.470

如果你的意思是这样`fopen()`，`fclose()`然后没有......文件被simplexml解析并变成一个对象，如果你想真正迂腐，你可以在完成后取消设置对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-26T15:13:50.220

无需关闭文件，因为它在读取整个文件时会自动关闭。但是，如果您因为服务器内存不足而询问，您应该查看内存消耗最多的服务器日志并释放它。

`simplexml_load_file`旨在让生活变得简单:)

# iphone - dyld：惰性符号绑定失败：找不到符号：_objc_setProperty_atomic

> ID：13527424
> 
> 赞同：3
> 
> 时间：2012-11-23T10:44:17.220
> 
> 标签：iphone, objective-c, ios

我收到此错误

`dyld: lazy symbol binding failed: Symbol not found: _objc_setProperty_atomic`

我添加了 CaptureRecord 框架。它在模拟器中运行良好。但是尝试在实际设备上运行时出现此错误。

请帮我。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-28T09:30:36.440

在我的情况下，是由于我的 Xcode 目标`iOS Deployment Target`在 iOS 6.1 上，而在 5.0 模拟器上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T22:45:10.920

在项目设置中将 -fobjc-arc 添加到您的 OTHER_LINKER_FLAGS

# c++ - C++中的向量运算

> ID：13527426
> 
> 赞同：1
> 
> 时间：2012-11-23T10:44:25.770
> 
> 标签：c++, visual-studio-2010, vector

> **可能重复：**
> [用于向量数学的开源 C++ 库](https://stackoverflow.com/questions/362928/open-source-c-library-for-vector-mathematics)

我要做一个非常简单的问题：如何使用 c++ 对两个不同的 int 向量进行求和、差或积等基本运算，就像在 matlab 中一样？是否存在任何可以做到的功能？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:49:19.207

不在标准库中，您将不得不使用第三方库，我不知道您的要求是什么，但您可以看看类似[`boost::ublas`](http://www.boost.org/doc/libs/1_52_0/libs/numeric/ublas/doc/index.htm).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T10:50:34.720

看看标准算法：[http ://en.cppreference.com/w/cpp/algorithm](http://en.cppreference.com/w/cpp/algorithm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T10:51:18.860

根据您的要求（您没有真正详细说明），您可能正在寻找从[`std::for_each`](http://en.cppreference.com/w/cpp/algorithm/for_each)Boost [::uBLAS](http://www.boost.org/doc/libs/1_52_0/libs/numeric/ublas/doc/index.htm) ...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T10:57:17.950

用于[`std::accumulate`](http://en.cppreference.com/w/cpp/algorithm/accumulate)累积单个值，例如总和或总产品。

用于[`std::inner_product`](http://en.cppreference.com/w/cpp/algorithm/inner_product)生成一个值，该值是 2 个向量中的值之间的二元运算符以及连续结果之间的二元运算的结果。如果您能正确地表述您的问题，这是一个非常有用的功能。这与[MapReduce](https://stackoverflow.com/q/388321/1084416)有关。

虽然，您真正想要的可能是[`std::transform`](http://en.cppreference.com/w/cpp/algorithm/transform)它可以对两个输入进行操作并写入第三个输出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T11:01:34.117

您可以编写自己的类，如 Vector 类、Matrix 类，在其中重载 +、-、* 等运算符。或者您可以使用 LAPACK、boost ublas 等库...

# java - 如何拆分此字符串 [LECT-3A,instr01,Instructor 01,teacher,instr1@learnet.com,,,,male,phone,,] 作为我在 java 中的要求

> ID：13527427
> 
> 赞同：-1
> 
> 时间：2012-11-23T10:44:25.580
> 
> 标签：java

大家好，我从这样的 csv 文件中得到了一个字符串

```
LECT-3A,instr01,Instructor 01,teacher,instr1@learnet.com,,,,male,phone,, 
```

如何用逗号分割这个字符串我想要这样的数组

```
 s[0]=LECT-3A,s[1]=instr01,s[2]=Instructor 01,s[3]=teacher,s[4]=instr1@learnet.com,s[5]=,s[6]=,s[7]=,s[8]=male,s[9]=phone,s[10]=,s[11]= 
```

谁能帮我把上面的字符串拆分为我的数组

```
thank u inadvance 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:47:35.090

**-**使用`split()`带有**分隔符**`,`的功能来执行此操作。

 **例如：

```
String s = "Hello,this,is,vivek";

String[] arr = s.split(","); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:01:00.853

您可以使用 limit 参数来执行此操作：

**limit 参数控制应用模式的次数，因此会影响结果数组的长度。如果限制 n 大于零，则模式将最多应用 n - 1 次，数组的长度将不大于 n，并且数组的最后一个条目将包含最后一个匹配分隔符之外的所有输入。如果 n 为非正数，则该模式将尽可能多地应用，并且数组可以具有任意长度。如果 n 为零，则该模式将被应用尽可能多的次数，数组可以有任意长度，并且尾随的空字符串将被丢弃。**

例子：

```
String[]
ls_test = "LECT-3A,instr01,Instructor 01,teacher,instr1@learnet.com,,,,male,phone,,".split(",",12);

int cont = 0;

for (String ls_pieces : ls_test)
    System.out.println("s["+(cont++)+"]"+ls_pieces); 
```

输出：

s[0]LECT-3A s[1]instr01 s[2]讲师01 s[3]老师s[4]instr1@learnet.com s[5]s[6]s[7]s[8]男s [9]电话[10][11]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T11:06:20.267

你可以尝试这样的事情：

```
String str = "LECT-3A,instr01,Instructor 01,teacher,instr1@learnet.com,,,,male,phone,,";
List<String> words = new ArrayList<String>();
int current = 0;
int previous = 0;
while((current = str.indexOf(",", previous)) != -1)
{           
    words.add(str.substring(previous, current));
    previous = current + 1;
}

String[] w = words.toArray(new String[words.size()]);
for(String section : w)
{
    System.out.println(section);
} 
```

这产生：

```
LECT-3A

instr01

Instructor 01

teacher

instr1@learnet.com

male

phone 
```**

# google-apps-script - Google API 说 getRange(number,.....) not found

> ID：13527428
> 
> 赞同：0
> 
> 时间：2012-11-15T16:20:28.920
> 
> 标签：google-apps-script

我正在尝试将本教程中的一些功能用于我自己在 AdWords 中的目的。

这是我希望使用的功能。

```
function getColumnsData(sheet, range, rowHeadersColumnIndex) {
  rowHeadersColumnIndex = rowHeadersColumnIndex || range.getColumnIndex() - 1;
  var headersTmp = sheet.getRange(range.getRow(), rowHeadersColumnIndex, 
  range.getNumRows(), 1).getValues();
  var headers = normalizeHeaders(arrayTranspose(headersTmp)[0]);
  return getObjects(arrayTranspose(range.getValues()), headers);
 } 
```

但是，在运行时我收到错误消息，

> 找不到方法 getRange(number,number,number,number)。

这似乎完全疯了。据我所知，这[是 adwords API 的核心功能。](http://developers.google.com/apps-script/class_sheet#getRange)

我错过了一些明显的东西吗？我在`getColumnsData`调用它时传递了 4 个数值参数，所以即使范围无效，它至少应该找到方法，即使它不能正确执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:46:42.893

这是我的一个错误。这不是 AdWords 的核心功能，而是电子表格 API 的功能。我现在已经通过另一种方式解决了这个问题。

# awk - Shell编程中变量的匹配模式

> ID：13527429
> 
> 赞同：0
> 
> 时间：2012-11-23T10:44:29.850
> 
> 标签：awk, printf

似乎我不断收到以下 -gt 或 == 错误。有人可以帮忙吗？

```
flag= echo $flightSeatBooked | awk -F[,] '{print match($flightSeatBooked, $orderSeats)}'
if $flag == 0; then
        echo "Success";
else
        echo "fail"; 
```

鉴于：

```
flightSeatBooked= 9;,A1,A2,A3,A4,B2,E4,C3,B3,D3,D2,E1,E2,C2,B4,C4,D4,C1,D1,E3,B1
orderSeats= B2 (not found in the variable) 
```

预期输出：成功

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T20:24:51.457

这是如何做你问的：

```
flag=$(awk -v flseat="$flightSeatBooked" -v orseat="$orderSeats" 'BEGIN{print index(flseat, orseat)}')

if [ $flag -eq 0 ]; then
        echo "Success"
else
        echo "fail"
fi 
```

但我不认为你问的是一个好主意。它至少应该是这样的：

```
awk -v flseat="$flightSeatBooked" -v orseat="$orderSeats" 'BEGIN{exit index(flseat, orseat)}')

if [ $? -eq 0 ]; then
        echo "Success"
else
        echo "fail"
fi 
```

你可能真正需要的是这样的：

```
case "$flightSeatBooked" in
   *"$orderSeats"* ) echo "fail";;
   * ) echo "Success" ;;
esac 
```

检查逻辑（因为我没有！），但希望你能得到方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T11:02:51.560

Quite a few mistakes. Change it like this:

```
flag=$(echo $flightSeatBooked | awk -v flseat=$flightSeatBooked -v orseat=$orderSeats '{print match(flseat, orseat)}')

if [ $flag -eq 0 ]; then
        echo "Success";
else
        echo "fail";
fi 
```

1.  Command substitution has been done using the $(...) notation.
2.  It is not a good practice to use the shell variables directly in awk, and hence passed shell variables to awk using -v.
3.  The syntax of if used was incorrect, updated to correct it.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T11:42:10.427

您还可以在下面使用它来检查 $orderSeats 是否在 $flightSeatBooked 中。如果它在则返回匹配的字符串的长度或返回 0。

```
expr "$flightSeatBooked" : ".*,${orderSeats}," 
```

# c# - 通过 Excel 工作表计算

> ID：13527434
> 
> 赞同：2
> 
> 时间：2012-11-23T10:44:41.227
> 
> 标签：c#, excel

我得到了一张 Excel 表格，里面有一些公式。我要做的是填写一个公式并让 Excel 计算它，然后将结果返回给我。

假设我的公式（在单元格 A3 中）如下所示：

```
 =SUM(A1+A2) 
```

我想做的是从我的 c# 代码中填写 A1 和 A2。比阅读 A3 中的结果。但是，由于这是一个网站，我希望多个用户能够一次计算。所以我怀疑真的打开文件会占用太多资源。

我搜索了高低，发现了这个：[SpreadsheetGear](http://www.spreadsheetgear.com/products/spreadsheetgear.net.aspx)。我不确定，但我认为图书馆应该可以解决问题。太糟糕了，对于我需要完成的简单事情来说，这是一种昂贵的方式。

是否有（最好的免费）方法来返回 Excel 根据我的公式计算的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T12:35:31.767

那样有用吗？

```
 Range r = sheet.get_Range("A1");
        r.Value2 = 1;
        r = sheet.get_Range("A2");
        r.Value2 = 2;
        r = sheet.get_Range("A3");
        r.FormulaR1C1 = "=R[-2]C+R[-1]C";//=(A1+A2)
        int A3_Value = (int)(r.Value2); 
```

# c# - 为什么BackgroundWorker在这个单元测试中没有在正确的线程上调用RunWorkerCompleted？

> ID：13527442
> 
> 赞同：7
> 
> 时间：2012-11-23T10:45:00.450
> 
> 标签：c#, .net, multithreading

backgroundWorker 的全部意义在于在耗时的任务之后更新 UI。该组件的工作方式与我的 WPF 应用程序**中宣传的一样。**

然而，在我的测试中，回调没有在调用线程上调用。

```
[Test]
public void TestCallbackIsInvokedOnClientThread()
{

     var clientId = Thread.CurrentThread.ManagedThreadId;
     int callbackThreadId = -1;
     var manualEvent = new ManualResetEventSlim(false);

     var someUIControl = new TextBox();
     var bw = new BackgroundWorker();

     bw.DoWork += (s,e) => e.Result = 5 ; // worker thread

     bw.RunWorkerCompleted += (s, e) =>
                                  {
                                      try
                                      {
                                          callbackThreadId = Thread.CurrentThread.ManagedThreadId;
                                          //someUIControl.Text = callbackThreadId.ToString();
                                          manualEvent.Set();
                                      }
                                      catch (System.Exception ex)
                                      {
                                          Console.Out.WriteLine(ex.ToString());
                                      }
                                  };
     bw.RunWorkerAsync();

     if (!manualEvent.Wait(5000))
         Assert.Fail("no callback");
     Assert.AreEqual(clientId, callbackThreadId);
 } 
```

结果消息：Assert.AreEqual 失败。预期：<15>。实际：<10>。未在客户端线程上调用回调

我错过了什么？

在单元测试中，我看到了类似的行为

```
------ Run test started ------
MainThread Id =21
Worker Thread Id =9
Callback Thread Id =9 
```

在 Wpf 应用程序中，这将是

```
MainThread Id =1
Worker Thread Id =14
Callback Thread Id =1 
```

**更新：** 根据贾斯汀的回答，进行了以下更改，现在测试通过了

*   在创建 BackgroundWorker 之前 `SynchronizationContext.SetSynchronizationContext(new DispatcherSynchronizationContext(control.Dispatcher));`
*   不是使用事件在线程之间发出信号，而是模拟消息泵

.

```
for (int i = 0; i < 3; i++)
{
    control.Dispatcher.Invoke(DispatcherPriority.Background,
                                          new Action(delegate { }));
    Thread.Sleep(50);
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-23T11:20:26.893

由于您正在运行的不同上下文，行为是不同的。

当您调用 bw.RunWorkerAsync() 时，会捕获 SynchronizationContext。这用于分派 RunWorkerCompleted 调用。

在 WPF 下，它将使用 DispatcherSynchronizationContext 将完成的调用编组回 UI 线程。在测试中，这种编组是不必要的，因此它保留在后台工作线程上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T11:17:25.850

我相信调用线程必须支持消息泵送（意味着是 STA 单元并具有关联的调度程序），以便后台工作人员可以发布回调。如果没有，后台工作人员别无选择，只能在自己的线程中执行回调。如果您想测试它，请参阅[此链接](https://stackoverflow.com/questions/13381967/show-wpf-window-from-test-unit/13382721#13382721)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T22:28:05.887

I ran into a problem in my code where the user closing a window caused a save, that in turn used a BackgroundWorker to update the home window and it did not run the RunWorkerCompleted because the thread that started the BackgroundWorker had terminated when the window closed.

I had to change the closing window's save run in the home window's context so that after the BackgroundWorker completed, it had a thread to return to.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-06T10:59:23.507

在我的情况下，我使用的是 Windows 窗体和控件没有**Dispatcher属性（请参阅**[no definition for dispatcher](https://stackoverflow.com/a/16172207/1849495)的答案）。

**如果我们使用Dispatcher.CurrentDispatcher**而不是控件中的那个， Gishu 的解决方案同样有效。

在测试初始化​​时：

```
// I am using a field Dispatcher _dispatcher
_dispatcher = Dispatcher.CurrentDispatcher; 
```

然后在等待后台任务完成时：

```
_dispatcher.Invoke(DispatcherPriority.Background, new Action(delegate { }));
Thread.Sleep(50); 
```

# gwt - Ext-GWT 3.0 网格鼠标事件

> ID：13527449
> 
> 赞同：1
> 
> 时间：2012-11-23T10:45:21.490
> 
> 标签：gwt, grid, tooltip, gxt

我有一个从数据库中填充的网格并且工作正常。现在我想向这个网格添加一个鼠标悬停事件并显示一个工具提示文本，该文本以多行方式显示突出显示的记录的所有列值。这里的商业案例是网格中显示了相当多的列，用户希望在选择记录之前快速预览而不是水平滚动到最后。在这种情况下，挤压所有这些列以适应屏幕并不是一个干净的解决方案。

我尝试查看 GXT 3.0 API 中用于 Grid 和 GridView 的所有可用方法，但找不到任何东西来获取突出显示的记录。MouseMove、MouseDown 和 MouseClick 有几个事件，但 MouseOver 没有。

我也尝试了各种论坛以找到解决方案，但似乎还没有一个解决方案，所以我认为如果我开始这个帖子，它可能对其他人也有用。

请注意，此问题与 Ext-JS 无关。我使用的版本是 Ext-GWT 3.0.1。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:33:49.530

`MouseMove`是你想要的那个。仅当鼠标悬停在小部件上时才会触发。

**或者**，您可以使用以下方法将 DOM 事件接收到小部件：

```
DOM.sinkEvents(widget.getElement(), Event.ONMOUSEOVER); 
```

在您的小部件的`constructor`或`onLoad`方法中，然后覆盖小部件的 onBrowserEvent：

```
@Override
public void onBrowserEvent(Event event){
final int eventType = DOM.eventGetType(event);
    if(eventType == Event.ONMOUSEOVER) {
        //DISPLAY THE INFO
    }
} 
```

这绝对比直接添加处理程序更难，但非常可定制。您可以选择其中之一。

顺便说一句，您可能想通过以下方式获取鼠标的位置：

```
mouseX = DOM.eventGetClientX(event);
mouseY = DOM.eventGetClientY(event); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T16:42:42.937

您可以通过创建自定义 Cell 并将其传递给网格的特定 ColumnConfig 来完成此操作。

使用自定义单元格，您可以访问您需要的所有事件。一旦您可以访问所需的信息，就可以通过多种方式显示它。GXT为此提供了很多解决方案。快速提示可能是去这里的方式。

# jquery - 如何在 jQuery 中实现任意文本节点选择

> ID：13527450
> 
> 赞同：1
> 
> 时间：2012-11-23T10:45:24.123
> 
> 标签：jquery, jquery-plugins, jquery-selectors, textnode

我已经意识到最近几次我需要在一些 jQuery 选择器中加入文本节点选择。

jQuery 本身并不真正支持文本节点。大多数关于此类问题的答案都建议使用[`.contents()`](http://api.jquery.com/contents/)，但这并不真正属于“选择器”，而是“遍历”。因此，它只给出直接子节点，它给出所有子节点，而不仅仅是文本节点。

我发现我需要在任意标记的文本中选择所有文本节点，所以我感兴趣的一些文本节点将是孙子、曾孙等：

```
<div id="formattedText">
  This is a <b>sample</b> block <a href="http://somewhere.com">of <em>text</em></a>
  that I might want to get a list of <span class="groovy">all</span> text nodes in.
</div> 
```

因此，实现这一点而不是尝试实现递归调用的最具表现力的方法`.children()`是将 jQuery 选择器扩展为如下所示：

```
var txtNodes = $('#formattedText §'); 
```

where`§`代表一些新的语法，我将添加到表示文本节点的 jQuery 中。我必须找到一些未使用的 ASCII 符号或类似`:odd()`扩展的东西：

```
var txtNodes = $('#formattedText:textNodes()'); 
```

如何以这种方式扩展 jQuery 的选择器引擎？我假设我想使用他们现有的 DOM 遍历方法，而不必求助于构建新方法？

或者也许有一个表达技巧`.contents()`，我没有想到它可以做我想做的事，而无需我扩展 jQuery？

* * *

^(我的用例：我想在用户脚本（greasemonkey 等）中对来自第三方网站的文本进行自定义“突出显示”。通过“自定义”，我的意思是不同的模式会得到不同`background-color`的 s 等等。所以我需要所有的文本节点，无论它们的深度如何，我不希望它们周围有标签，我也不希望所有文本都像`.text()`这样给我吗。)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:56:44.210

`:`我还没有掌握制作-pseudo-selector 扩展所需的新签名，但这里有一个方法：

```
(function($){

    function walk( node, ret ) {
        var ret = ret || [],
            cur,
            nodes = node.childNodes;

        for( var i = 0, l = nodes.length; i < l; ++i ) {
            cur = nodes[i];

            if( cur.nodeType === 1 ) {
                walk( cur, ret );
            }
            else if( cur.nodeType === 3 ) {
                ret.push( cur );
            }
        }

        return ret;
    }

    $.fn.findText = function() {

        var ret = this.map( function() {
            return walk( this );
        });

        return this.pushStack( ret, "textNodes", "" );
    };

})( jQuery ); 
```

在这里的[演示](http://jsfiddle.net/LAarE/1)中，我将按找到的顺序遍历找到的文本节点，以便您可以在页面上看到顺序。

# python - 如何在 Python 中捕获系统挂起事件？

> ID：13527451
> 
> 赞同：8
> 
> 时间：2012-11-23T10:45:25.130
> 
> 标签：python, linux, events, ubuntu, suspend

我正在使用 ubuntu 12.04。有没有办法在 Python 中捕获挂起事件，即如果笔记本电脑要挂起，这样做......？捕获关闭事件的相同问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T13:09:53.767

我认为最简单的方法是使用[DBUS python](http://dbus.freedesktop.org/doc/dbus-python/doc/tutorial.html)接口并在“org.freedesktop.UPower”接口上监听“AboutToSleep”和/或“Sleeping”事件

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-25T06:57:15.803

如果有人偶然发现同样的问题，代码如下：

```
#!/usr/bin/env python

import dbus      # for dbus communication (obviously)
import gobject   # main loop
from dbus.mainloop.glib import DBusGMainLoop # integration into the main loop

def handle_resume_callback():
    print "System just resumed from hibernate or suspend"

def handle_suspend_callback():
    print "System about to hibernate or suspend"

DBusGMainLoop(set_as_default=True) # integrate into main loob
bus = dbus.SystemBus()             # connect to dbus system wide
bus.add_signal_receiver(           # defince the signal to listen to
    handle_resume_callback,            # name of callback function
    'Resuming',                        # singal name
    'org.freedesktop.UPower',          # interface
    'org.freedesktop.UPower'           # bus name
)

bus.add_signal_receiver(           # defince the signal to listen to
    handle_suspend_callback,            # name of callback function
    'Sleeping',                        # singal name
    'org.freedesktop.UPower',          # interface
    'org.freedesktop.UPower'           # bus name
)

loop = gobject.MainLoop()          # define mainloop
loop.run()                         # run main loop 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-23T13:42:28.560

您可以扩展此代码，它侦听来自 acpid 的事件，尝试仅打印它接收到的字符串并生成您想要的事件并查看字符串的样子。

```
s = socket.socket(socket.AF_UNIX, socket.SOCK_STREAM)
s.connect("/var/run/acpid.socket")
print "Connected to acpid"
while 1:
    for event in s.recv(4096).split('\n'):
        event=event.split(' ')
        if len(event)<2: continue
        print event
        if event[0]=='ac_adapter':
            if event[3]=='00000001': #plugged
                plugged() #Power plugged event
            else: #unplugged
                unplugged() #Power unplugged event
        elif event[0]=='button/power':
            power_button() #Power button pressed
        elif event[0]=='button/lid':
            if event[2]=='open':
                lid_open() #Laptop lid opened
            elif event[2]=='close':
                lid_close() #Laptop lid closed 
```

# javascript - 使用 JavaScript while 循环将图像数组绘制到 HTML5 画布

> ID：13527453
> 
> 赞同：2
> 
> 时间：2012-11-23T10:45:44.437
> 
> 标签：javascript, arrays, html5-canvas

我有以下 JavaScript 代码，我用它来尝试遍历一组图像，并将每个图像绘制到不同位置的 HTML5 画布上：

```
/*First, create variables for the x & y coordinates of the image that will be drawn.
                the x & y coordinates should hold random numbers, so that the images will be 
                drawn in random locations on the canvas.*/
                var imageX = Math.floor(Math.random()*100);
                var imageY = Math.floor(Math.random()*100);

                /*Create a 'table' of positions that the images will be drawn to */
                var imagePositionsX = [20, 80, 140, 200, 260, 320, 380, 440, 500, 560];
                var imagePositionsY = [20, 60, 100, 140, 180, 220, 260, 300, 340, 380];
                var randomPositionX = Math.floor(Math.random()*10);
                var randomPositionY = Math.floor(Math.random()*10);

            /*Draw all images from assetsImageArray */
            /*Use a while loop to loop through the array, get each item and draw it. */
            var arrayIteration = 0;
            console.log('Assets Image Array length: ' + assetsImageArray.length); /*Display the length of the array in the console, to check it's holding the correct number of images. */
            while(arrayIteration < assetsImageArray.length){
                context.drawImage(assetsImageArray[arrayIteration], imageX, imageY, 50, 50);
                console.log(arrayIteration); /*Display the current array position that's being drawn */
                arrayIteration = arrayIteration+1;
                /*Now try changing the values of imageX & imageY so that the next image is drawn to a 
                    different location*/
                imageX = imagePositionsX[randomPositionX];  /* imageX+(Math.floor(Math.random()*100)); */
                imageY = imagePositionsY[randomPositionY];  /* imageY+(Math.floor(Math.random()*100));  */

            } 
```

此代码背后的预期逻辑是：首先将 arrayIteration 变量设置为 0，然后在控制台中显示我的 assetsImageArray 中的图像数量。然后while循环开始-当arrayIteration变量小于assetsImageArray中的项目数时，assetsImageArray的arrayIteration位置（即此时位置0）的图像应该被绘制到坐标imageX和imageY的画布上。

imageX 和 imageY 变量都保存由代码分配给它们的随机数。`Math.floor(Math.random()*100);` 在将第一张图像绘制到画布的指定位置后，控制台应该记录刚刚绘制的数组元素。

下一行应该增加 arrayIteration 变量，最后，应该通过分别从数组 imagePositionsX 和 imagePositionsY 中获取随机元素的值来更新 imageX 和 imageY 的值。

while 循环将遍历此代码，将 assetsImageArray 中的每个图像绘制到画布上的新位置，直到绘制完数组中的所有图像。

但是，由于某种原因，只有 assetsImageArray 中的第一张和最后一张图像被绘制到画布上。它们被绘制在随机位置 - 这是我想要的，每次我重新加载页面时，它们都会被绘制到画布上的新位置，但我无法弄清楚为什么数组中没有图像在第一个位置之间最后被绘制到画布上。我认为我的逻辑在某处有问题，但无法弄清楚在哪里。

有没有人能发现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:23:09.583

在循环的每次迭代中，下一个图像在 和 指定的坐标处绘制`imageX`，`imageY`但对于第二次和后续迭代`imageX`，并且`imageY`始终保持相同的值，因此第二个和后续图像都在同一位置绘制在彼此的顶部。这就是为什么似乎只绘制了第一张和最后一张图像的原因。

在第一次迭代中，根据分配给循环开始之前`imageX`和之前分配的值，在 0 到 99 之间的随机坐标处绘制第一张图像：`imageY`

```
 var imageX = Math.floor(Math.random()*100);
            var imageY = Math.floor(Math.random()*100); 
```

然后在循环中你改变`imageX`和`imageY`：

```
 imageX = imagePositionsX[randomPositionX];  
         imageY = imagePositionsY[randomPositionY]; 
```

但是什么价值观`randomPositionX`呢`randomPositionY`？它们包含一个介于 0 和 9 之间的随机数，在循环开始之前分配*一次。*所以这两行总是从`imagePositionX`和`imagePositionsY`数组中选择相同的位置。

最简单的解决方法是在循环内移动以下两行：

```
 var randomPositionX = Math.floor(Math.random()*10);
            var randomPositionY = Math.floor(Math.random()*10); 
```

仍然有可能不止一张图像纯粹偶然地最终出现在同一位置，但使用 10×10 网格的可能性较小（取决于您拥有的图像数量）。

不过，我可能会简化代码，如下所示：

```
 var imagePositionsX = [20, 80, 140, 200, 260, 320, 380, 440, 500, 560];
 var imagePositionsY = [20, 60, 100, 140, 180, 220, 260, 300, 340, 380];
 var i, x, y;

 for (i = 0; i < assetsImageArray.length; i++) {
     x = imagePositionsX[ Math.floor(Math.random()*10) ];
     y = imagePositionsY[ Math.floor(Math.random()*10) ];

     context.drawImage(assetsImageArray[i], x, y, 50, 50);
 } 
```

我不明白为什么您当前的代码以随机位置开始，第一张图像的坐标在 0 到 99 之间，而所有其他图像都使用从两个数组中随机选择的坐标，所以我消除了这种差异。

# java - Spring JUnit 测试在我的服务类上保持返回 nullpointerexception

> ID：13527457
> 
> 赞同：1
> 
> 时间：2012-11-23T10:45:51.477
> 
> 标签：java, spring, testing, junit

**更新 25-11-2012**

嗨，看来我的上下文文件位于错误的“类路径”中，它们必须位于测试类路径中。我通过在 src/test/ 文件夹中添加一个名为 resources 的文件夹来解决这个问题。在这里，我可以放置我的应用程序上下文。我还从测试中删除了@TestExecutionListeners。我还需要为 javax/servlet/serlvetException 等添加一些依赖项到我的 pom 文件中。如果有人感兴趣，我的代码可以在[Github](https://github.com/martin-rohwedder/MROBlog/tree/issue9)的 issue9 分支下查看。

* * *

**问题[已解决]**

我使用 spring 3 制作了一个简单的应用程序。我制作了一个服务类，它使用 DAO 类通过使用简单的 JDBC 模板将事物映射到数据库和从数据库映射。

我的问题是，当我尝试对这些类进行集成测试时，它返回 NullPointerException（参见 Stacktrace）。这真的很烦人，因为我似乎找不到答案，所以我希望你们能帮助我。下面我发布了我所有的不同文件。

**堆栈跟踪**

```
Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 0.115 sec <<< FAILURE!
test(dk.martinrohwedder.blog.test.ArticleServiceTest)  Time elapsed: 0.009 sec  <<< ERROR!
java.lang.NullPointerException
at dk.martinrohwedder.blog.service.ArticleService.getFiveLastArticles(ArticleService.java:30)
at dk.martinrohwedder.blog.test.ArticleServiceTest.test(ArticleServiceTest.java:57)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:53)
at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)
at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)
at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)
at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175)
at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:107)
at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:68) 
```

**文章服务测试**

```
package dk.martinrohwedder.blog.test;

import dk.martinrohwedder.blog.domain.Article;
import dk.martinrohwedder.blog.service.ArticleService;
import java.util.ArrayList;
import org.junit.After;
import org.junit.Before;
import org.junit.Test;
import static org.junit.Assert.*;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.TestExecutionListeners;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import org.springframework.test.context.transaction.TransactionConfiguration;
import org.springframework.transaction.annotation.Transactional;
/**
 *
 * @author Martin Rohwedder
 */
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations={"classpath:test-context.xml"})
@TestExecutionListeners
@TransactionConfiguration(defaultRollback = true)
@Transactional
public class ArticleServiceTest {

    @Autowired(required = true)
    private ArticleService articleService;

    //private EmbeddedDatabase db;

    @Before
    public void setUp() {
        //EmbeddedDatabaseBuilder builder = new EmbeddedDatabaseBuilder();
        //db = builder.setType(EmbeddedDatabaseType.HSQL).setName("blog").addScript("classpath:create-db.sql").addScript("classpath:test-data.sql").build();
        //articleService.getArticleDao().setDataSource(db);
        //articleService = new ArticleService();
    }

    @After
    public void tearDown() {
        //articleService.getArticleDao().setDataSource(null);
        //db.shutdown();
        //articleService = null;
    }

    @Test
    public void test()
    {
        ArrayList<Article> articles = articleService.getFiveLastArticles();

        int number = articles.size();
        assertEquals(3, number);
    }

} 
```

**文章服务**

```
package dk.martinrohwedder.blog.service;

import dk.martinrohwedder.blog.domain.Article;
import dk.martinrohwedder.blog.repository.ArticleDao;
import java.util.ArrayList;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
/**
 *
 * @author Martin Rohwedder
 * @since 22-11-2012
 * @version 1.0
 */
@Service("articleService")
public class ArticleService {

    @Autowired(required = true)
    private ArticleDao articleDao;

    public ArticleDao getArticleDao() {
        return articleDao;
    }

    public void setArticleDao(ArticleDao articleDao) {
        this.articleDao = articleDao;
    }

    public ArrayList<Article> getFiveLastArticles()
    {
        ArrayList<Article> articles = (ArrayList) articleDao.selectAllArticles();

        if (articles.size() > 5) {
            articles = (ArrayList) articles.subList(articles.size() - 6, articles.size());
        }

        return articles;
    }

} 
```

**文章道**

```
package dk.martinrohwedder.blog.repository;

import dk.martinrohwedder.blog.domain.Article;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.List;
import javax.sql.DataSource;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.jdbc.core.RowMapper;
import org.springframework.stereotype.Repository;
/**
 *
 * @author Martin Rohwedder
 * @since 22-11-2012
 * @version 1.0
 */
@Repository
public class ArticleDao implements IArticleDao {

    private JdbcTemplate jdbcTemplate;

    @Autowired(required = true)
    public void setDataSource(DataSource dataSource) {
        this.jdbcTemplate = new JdbcTemplate(dataSource);
    }

    @Override
    public List<Article> selectAllArticles() {
        String sql = "select article_id, headline from article";
        return this.jdbcTemplate.query(sql, new ArticleMapper());
    }

    @Override
    public Article selectArticle(int articleId) {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public void insertArticle(Article article) {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public void updateArticle(Article article) {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public void deleteArticle(int articleId) {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    /**
     * Article Mapper is responsible for map all rows found in a sql 
     * statement to Article objects.
     */
    private static final class ArticleMapper implements RowMapper<Article> {

        @Override
        public Article mapRow(ResultSet rs, int rowNum) throws SQLException {
            Article article = new Article();
            article.setId(rs.getInt("article_id"));
            article.setHeadline(rs.getString("headline"));

            return article;
        }

    }

} 
```

**测试上下文.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:jdbc="http://www.springframework.org/schema/jdbc"
       xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd http://www.springframework.org/schema/context  http://www.springframework.org/schema/context/spring-context-3.0.xsd http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd">

    <context:component-scan base-package="dk.martinrohwedder.blog" />

    <mvc:annotation-driven />

    <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="viewClass" value="org.springframework.web.servlet.view.JstlView" />
        <property name="prefix" value="/views/" />
        <property name="suffix" value=".jsp" />
    </bean>

    <bean id="embeddedDataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="org.hsqldb.jdbc.JDBCDriver"/>
        <property name="url" value="jdbc:hsqldb:mem:blog"/>
        <property name="username" value="sa"/>
        <property name="password" value=""/>
    </bean>

    <jdbc:embedded-database id="dataSource" type="HSQL"/>
        <jdbc:initialize-database data-source="embeddedDataSource">
        <jdbc:script location="classpath:create-db.sql"/>
        <jdbc:script location="classpath:test-data.sql"/>
    </jdbc:initialize-database>

</beans> 
```

**创建-db.sql**

```
create database if not exists blog;

use blog;

drop table if exists article;

create table article
(
    article_id int unsigned not null auto_increment,
    headline varchar(30) not null,
    primary key (article_id)
); 
```

**测试数据.xml**

```
insert into article (article_headline)
values ("Artikel 1");
insert into article (article_headline)
values ("Artikel 2");
insert into article (article_headline)
values ("Artikel 3"); 
```

test-context.xml、create-db.sql 和 test-data.sql 都在类路径中，因为它们位于名为 Other Sources (src/main/resources) 的包中。

希望任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T13:38:10.363

尝试 在 test-context.xml 文件中使用
`<context:annotation-config/>`
而不是。
`<mvc:annotation-driven />`

`<mvc:annotation-driven/>`是 Spring 3.0 中添加的一个标签，它执行以下操作：

1.  配置 Spring 3 Type ConversionService（替代 PropertyEditors）
2.  添加对使用 @NumberFormat 格式化数字字段的支持
3.  如果 Joda Time 在类路径上，则添加对使用 @DateTimeFormat 格式化日期、日历和 Joda Time 字段的支持
4.  如果 JSR-303 Provider 在类路径上，则添加对使用 @Valid 验证 @Controller 输入的支持
5.  如果 JAXB 在类路径上，则添加对读取和写入 XML 的支持（使用 @RequestBody/@ResponseBody 的 HTTP 消息转换）
6.  如果 Jackson 在类路径上，则添加对读取和写入 JSON 的支持（与 #5 相同）

`<context:annotation-config/>`
在定义的同一应用程序上下文中查找 bean 上的注释，并声明支持所有通用注释，如 @Autowired、@Resource、@Required、@PostConstruct 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T10:49:14.783

在我看来，它`articleDao`没有被设置。如果您想在测试中使用 Spring bean，那么您不能在测试中实例化该服务。把这条线拿出来...

```
articleService = new ArticleService(); 
```

# java - 无法在运行 4.x 的智能手机上更新 PreferenceActivity 的标题摘要

> ID：13527458
> 
> 赞同：4
> 
> 时间：2012-11-23T10:46:03.273
> 
> 标签：java, android

据我所知，在运行 4.x 的智能手机上，当您有一个带有标头的 PreferenceActivity 时，操作系统将首先创建一个包含标头的活动。当用户单击标题列表中的一个项目时，将创建另一个表示该条目的 PreferenceFragment 的活动。在平板电脑上，标题列表和这个片段属于同一个活动，并同时出现在屏幕上。

所以，问题是这样的。当用户在 PreferenceFragment 中，并且他在那里更改了一些设置时，我想更新相应的标题摘要。我从 onBuildHeaders() 调用中引用了 headers 对象：

```
@Override
public void onBuildHeaders(List<Header> aTarget) {
    ...
    headers = aTarget;
} 
```

现在为了更新标题，我遍历这个列表并检查 id：

```
private void setHeaderSummary(int id, String summary) {
    for (Header header : headers) {
        if (header.id == id) {
            header.summary = summary;
            invalidateHeaders();
            return;
        }
    }
} 
```

这在平板电脑上非常有效，但在智能手机上却没有效果。当用户从 PreferenceFragment 返回到第一个 PreferenceActivity（通过点击 Back 按钮）时，标题保持不变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T12:59:27.347

我在输入问题时想出了解决方案。在第二个活动（包含 PrefenceFragment 的活动）中调用 invalidateHeaders()。它应该在初始活动（包含标题的活动）中调用。这不是最漂亮的解决方案，但我保留了对父活动的引用，并且 onResume() 如果首选项发生更改，我会使标题无效。

# html - 调整 HTML 表单中按钮的高度

> ID：13527459
> 
> 赞同：-1
> 
> 时间：2012-11-23T10:46:20.203
> 
> 标签：html, css, forms

我正在创建一个计算器。这是我的计算器 html：http: [//pastebin.com/JQYbNBmZ](http://pastebin.com/JQYbNBmZ)

这是我的计算器 css：http: [//pastebin.com/DEMgqyYi](http://pastebin.com/DEMgqyYi)

我已经使用`width="100%"`了按钮`CE`，`CA`并`0`拉伸了 2 列。但是，如果我使用`height="100%"`按钮`+`并`=`拉伸 2 行，所有按钮实际上都会变小。你会怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:52:48.547

如果要在 中使用百分比值`height`，则父元素必须具有固定高度，例如`height: 51px;`.

您可以查看此以获取更多信息：[CSS – 为什么百分比高度不起作用？](https://stackoverflow.com/questions/5657964/css-percentage-height)

我已经更新了你的 jsfiddle：http: [//jsfiddle.net/bsDVD/3/](http://jsfiddle.net/bsDVD/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T11:20:05.420

最好的想法是将所有 td 的高度设置为 2em 让我们说：

```
td {
height: 2em
} 
```

并强制两个扩展表的内联样式具有：

```
style="height: 4em" 
```

之后添加到您的按钮`height: 100%`，它应该可以工作。

# c# - 如何从 DataContract 对象生成 XSL 和 XSD

> ID：13527468
> 
> 赞同：1
> 
> 时间：2012-11-23T10:46:48.103
> 
> 标签：c#, xml, xslt, datacontractserializer

我有一段代码可以使用 DataContractSerializer 输出许多不同的 XML 文件，我希望能够同时输出 XSL 和 XSD。

这纯粹是为了学习目的。我也没有包含任何代码，因为我认为这是一个相当普遍的问题。

到目前为止，我发现这样做的唯一方法是使用 svcutil.exe。datacontractserializer 是否能够在运行时执行此操作？

（或者我对 XSD 和 XSL 的理解不正确？）

在阅读了更多内容后，我了解到需要为 XML 定义 XSL，而不是连同它一起定义，这是需要我手动完成的事情。

编辑：我有 Svcutil 工作但我想知道是否可以在代码中执行此操作。（最终我想将 XSD 的副本放在与 XML 文件相同的位置）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:22:12.717

您可以从`DataContract`使用 svcutil.exe中提取 XSD

```
svcutil.exe /dataContractOnly *.dll 
```

文档：http : [//msdn.microsoft.com/en-us/library/aa702581.aspx](http://msdn.microsoft.com/en-us/library/aa702581.aspx)

编辑：要在运行时执行此操作，请使用[XsdDataContractExporter](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.xsddatacontractexporter.aspx)

# jms - jmeter中的JMS点对点模型请求和响应

> ID：13527471
> 
> 赞同：1
> 
> 时间：2012-11-23T10:46:59.463
> 
> 标签：jms, jmeter

我只想在jmeter视图结果树监听器中看到jms点对点模型的请求和响应。我尝试配置 JMS 点对点模型，但我不知道正确的配置，所以请有人给我 JMS 点对点模型的请求和响应。我将与您分享我的 JMS 点对点模型 jmeter 图像。

JMS 点对点配置：

![在此处输入图像描述](../Images/e8d1ddc9eff8a92cfddbda11b6674f57.png)

JMS 请求：

![在此处输入图像描述](../Images/6cbbaa461d346fc6192d22535e782339.png)

JMS 响应：

![在此处输入图像描述](../Images/6dadadb412eccdd2b3fc57fb220606cb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T21:28:07.477

我认为你没有正确的回应（因为你有![警告](../Images/45527c681a0e3135ea44e7ce292ba7bd.png)并且没有成功![在此处输入图像描述](../Images/abde5458b4364c5858ed866e0bf56b2b.png)）。有关错误，请参阅示例结果选项卡或 jmeter 日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T23:05:16.350

您应该使用 JMeter 的 2.8 版本，因为自 2.4（您的版本）以来已经修复了许多错误

然后遵循有关 JMS 的 jmeter 文档：

*   [http://jmeter.apache.org/usermanual/component_reference.html#JMS_Point-to-Point](http://jmeter.apache.org/usermanual/component_reference.html#JMS_Point-to-Point)

这部分用于 activemq 设置：

*   [http://jmeter.apache.org/usermanual/build-jms-topic-test-plan.html](http://jmeter.apache.org/usermanual/build-jms-topic-test-plan.html)

# c# - 如何在 UserControl 中关闭窗体

> ID：13527474
> 
> 赞同：6
> 
> 时间：2012-11-23T10:47:10.253
> 
> 标签：c#, winforms, user-controls, visual-c#-express-2010

我创建了一个带有按钮的`Save`UserControl`Close`和`Cancel`。我想在取消按钮上关闭表单而不保存，在关闭按钮上提示保存消息，在保存按钮上保存而不关闭。通常，我会`this.Close()`在取消按钮上使用，但 UserControl 没有这样的选项。所以我想我必须为此设置一个属性。

向下滚动该`"Questions that may already have your answer"`部分，我遇到了这个问题：[如何从其中加载的 UserControl 按钮关闭 ChildWindow？](https://stackoverflow.com/questions/1803451/how-to-close-a-childwindow-from-an-usercontrol-button-loaded-inside-it)我使用了以下 C# 代码：

```
private void btnCancel_Click(object sender, EventArgs e)
{
    ProjectInfo infoScreen = (ProjectInfo)this.Parent;
    infoScreen.Close();
} 
```

这适用于一个屏幕，但我想知道我是否必须将此代码应用于我拥有的所有屏幕？我认为应该有更有效的方法。所以我的问题是：我是否需要为我拥有的每个表格应用此代码，还是有另一种（更有效的）方法？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-23T11:21:48.147

您可以使用

```
((Form)this.TopLevelControl).Close(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-23T11:37:43.803

您可以使用可用于任何控件的 FindForm 方法：

```
private void btnCancel_Click(object sender, EventArgs e)
{
    Form tmp = this.FindForm();
    tmp.Close();
    tmp.Dispose();
} 
```

不要忘记 Dispose 表单以释放资源。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T19:26:59.230

您还可以使用远程线程在代码的任何部分关闭一个表单：

```
 MyNamespace.MyForm FormThread = (MyNamespace.MyForm)Application.OpenForms["MyForm"];
            FormThread.Close(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T10:57:47.337

我找到了简单的答案:) 我都准备好想到类似的事情了。

要在`ButtonClicked Event`UserControl 内部关闭 WinForm，请使用以下代码：

```
private void btnCancel_Click(object sender, EventArgs e)
{
    Form someForm = (Form)this.Parent;
    someForm.Close();
} 
```

# objective-c - PDFDocument writeToURL 不起作用

> ID：13527476
> 
> 赞同：1
> 
> 时间：2012-11-23T10:47:29.757
> 
> 标签：objective-c, pdf, pdfkit

我正在使用 PDFDocument 和 PDFView。我能够打开一个文件并显示它。

但是，如果我尝试通过 PDFDocument 的“writeToURL:”使用不同的 URL 保存它，它就不起作用。我在控制台中记录了 fileURL，这与我在保存面板中输入的完全相同。但它不会将文档写入该 URL。

我对新分配的 PDFDocument 进行了同样的尝试，它的工作方式与我预期的一样。我会忘记任何访问问题吗？

这是我的代码：

```
NSURL* fileURL = [[NSURL alloc] init];
NSSavePanel* savePanel;
savePanel = [NSSavePanel savePanel];
NSArray* fileTypes = [[NSArray alloc] initWithObjects:@"pdf", nil];
[savePanel setAllowedFileTypes:fileTypes];
if([savePanel runModal] == NSFileHandlingPanelOKButton)
{
    fileURL = savePanel.URL;
}
else
{
    NSLog(@"failed to save file");
    fileURL = nil;
}
[pdfView.document writeToURL:fileURL]; 
```

提前致谢

# javascript - 在鼠标悬停和鼠标离开时更改图像

> ID：13527480
> 
> 赞同：-5
> 
> 时间：2012-11-23T10:47:43.233
> 
> 标签：javascript, jquery, css, jquery-ui, javascript-events

我有两个数组，其中包含这样的图像名称列表

```
array 1 = ["arrow1.png", "arrow2.png", "arrow3.png", "arrow4.png", "arrow5.png"]

array 2 = ["arrow_over1.png", "arrow_over2.png", "arrow_over3.png", "arrow_over4.png", "arrow_over5.png"] 
```

我想用`id="alter_img"`鼠标悬停和mouseleave更改div标签中的图像在mouseover上应该是`"arrow1.png"`，在mouseleave上应该是`arrow_over1.png`

结构是这样的

```
<div id="alter_img">
  <img src="arrow1.png">
  <img src="arrow2.png">
  <img src="arrow3.png">
  <img src="arrow4.png">
  <img src="arrow5.png">
</div> 
```

我怎么能那样做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T10:50:42.153

### 使用`data`属性：

### HTML

```
<div id="alter_img">
    <img src="arrow1.png" data-hover_src="arrow_over1.png">
    <img src="arrow2.png" data-hover_src="arrow_over2.png">
    <img src="arrow3.png" data-hover_src="arrow_over3.png">
    <img src="arrow4.png" data-hover_src="arrow_over4.png">
    <img src="arrow5.png" data-hover_src="arrow_over5.png">
</div> 
```

### jQuery

```
$(document).ready(function(){
    $("#alter_img > img").hover(function() {
        $(this).data("orig_src", $(this).attr("src"));
        $(this).attr("src", $(this).data("hover_src"));
    }, function(){
        $(this).attr("src", $(this).data("orig_src"));
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T10:56:56.600

我猜，当您提到您实际上想要更改 mouseenter 和 mouseout 上每个图像的 src 属性的数组时。如果是这种情况，请尝试

```
$("#alter_img > img").hover( function( ) {
    var src = $(this).attr("src");
    $(this).attr( "src", Array1[ Array2.indexOf(src) ] );
},
function( ) {
    var src = $(this).attr("src");
    $(this).attr( "src", Array2[ Array1.indexOf(src) ] );
}); 
```

演示[**在这里**](http://jsfiddle.net/bruno/8qy7k/5/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T10:57:32.807

我有最好的答案

```
$('img').bind('mouseenter mouseleave', function() {
$(this).attr({
    src: $(this).attr('data-other-src') 
    , 'data-other-src': $(this).attr('src') 
})
}); 
```

和图像标签将是

```
<img data-other-src="arrow_over1.png" src="arrow1.png"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T10:53:37.240

使用 CSS 会更好。

将每个原始和夸大按钮合并到一个图像中，每个状态都相邻。

然后，您可以简单地使用 css 将按钮的可见区域从“正常”移动到“上方”​​，而无需使用 JavaScript：

```
// button normally. Because we specify a width and height that is all that
// will be shown of our background. e.g. Our "normal state"
a.myButton {
    display:block;
     width:200px;
    height:80px;
    padding:10px;
    cursor:pointer;
    background:url(images/my-button-sprite.png) no-repeat top left;
 }

// This will switch the button to our right side (or our "over state")
a:hover.myButton  {
    background:url(images/my-button-sprite.png) no-repeat top right;
} 
```

或者，如果您真的想按照自己的方式进行操作：

 `````
$('#alter_img > img').mouseover(function(){
    var idIndex = array1.indexOf($(this).attr('src'));
    if(idIndex != -1)
        $(this).attr('src', array2[idIndex]);

}).mouseleave(function(){

    var idIndex = array2.indexOf($(this).attr('src'));
    if(idIndex != -1)
        $(this).attr('src', array1[idIndex]);
}); 
````  `* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-23T10:52:29.153

采用

```
 onmouseover=document.getElementById("alter_img").src="arrow1.png"          
   onmouseout=document.getElementById("alter_img").src="arrow_over1.png" 
`````

# objective-c - 调度任务以在 iOS 中执行方法

> ID：13527487
> 
> 赞同：3
> 
> 时间：2012-11-23T10:48:05.750
> 
> 标签：objective-c, ios, timer, nstimer

我想在 iOS 中安排任务以根据一天中的时间和一天执行一个方法。例如，我想每天晚上 10 点执行 startMonitorRegion，早上 10 点执行 stopMonitorRegion。我不想发送本地通知来提醒用户，它需要对用户透明。

无论如何要使用 NSTimer 来做吗？该应用程序将在后台。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-02T11:45:17.483

为此，您可以使用本地通知。

只需安排某个日期/时间的本地通知。一旦用户打开您的应用程序，您就可以执行所需的任务..

# regex - 使用正则表达式匹配自定义公式

> ID：13527490
> 
> 赞同：0
> 
> 时间：2012-11-23T10:48:16.873
> 
> 标签：regex, formula

我正在尝试使用正则表达式匹配公式。

1.  该公式应严格包含这三个字母（L，W，H）。
2.  应该只允许产品操作，即`(L*W*H, L*W, L*H etc).`
3.  此外，它应该允许这样的东西，而不是添加平方值`(L*L*L*W*W*H*H)`
4.  此外，它不应在末尾允许星号符号。

我尝试了自己并想出了这个

```
^([L|W|H]\*{0,1})?(([L|W|H]\*{0,1}){0,9})?([L|W|H]{0,1})$ 
```

但这允许连续添加字母，例如`"LLL*WW*HHH**"`. 请帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T10:54:32.647

看起来你想要这个：

`^[LWH](\*[LWH])*$`

解释：

*   `^`字符串的开头
*   `[LWH]`L，W，H之一
*   `(\*[LWH])*`（文字`*`后跟 L、W、H 之一）任意次数
*   `$`字符串的结尾

# c# - 处理单击按钮的事件

> ID：13527491
> 
> 赞同：0
> 
> 时间：2012-11-23T10:48:18.193
> 
> 标签：c#, winforms, .net-4.0, dialog, itextsharp

我正在 C# 4.0 中制作一个按钮。我想单击此按钮，并想在 adobe reader 中打开一个对话框。所以我也在使用itextsharp。请让我知道我必须使用什么来使这个对话框工作？

```
PushbuttonField button1 = new PushbuttonField(
    stamper.Writer,
    new Rectangle(90, 660, 140, 690), "Add Context");
button1.Text = "Add Context"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:54:58.060

假设您已经从[基`Button`类](http://msdn.microsoft.com/en-us/library/system.windows.forms.button.aspx)继承，您可以这样做：

```
this.button1.Click += new EventHandler(button1_Click);
//there you have an event:
private void button1_Click(object sender, EventArgs e)
{
   //open the dialog box here...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T10:56:05.400

```
button1.Text = "Add Context";
button1.Click += new EventHandler(button_Click);

protected void button_Click (object sender, EventArgs e)
{ 
//  perform necessary actions
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T13:05:20.120

前面的答案与问题不符。

问题是关于 PDF 文件中的按钮。当有人单击此按钮时，需要打开一个对话框。

答案是关于 C# 应用程序中的按钮。此类应用程序中的按钮与 Adob​​e Reader 中的按钮之间存在巨大差异。

该问题无法以当前的措辞回答，因为不清楚您想对 Adob​​e Reader 中的对话框做什么。如果您想要一个简单的警报消息，那很容易实现。如果您希望您可以创建一个与 C# 应用程序中可用的功能级别相同的对话框，请忘记这个想法：您可能会问一些完全不可能的问题。

# c# - c#中的while循环

> ID：13527493
> 
> 赞同：1
> 
> 时间：2012-11-23T10:48:25.683
> 
> 标签：c#, loops, while-loop, average

我有这个代码：

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace _121119_zionAVGfilter_Nave
{
    class Program
    { 
        static void Main(string[] args)
        {
            int cnt = 0, zion, sum = 0;
            double avg;
            Console.Write("Enter first zion \n");
            zion = int.Parse(Console.ReadLine());
            while (zion != -1)
            {
               while (zion < -1 || zion > 100)
            {
                Console.Write("zion can be between 0 to 100 only! \nyou can rewrite the zion here, or Press -1 to see the avg\n");
                zion = int.Parse(Console.ReadLine());
            }

                cnt++;
                sum = sum + zion;
                Console.Write("Enter next zion, if you want to exit tap -1 \n");
                zion = int.Parse(Console.ReadLine());

            }
            if (cnt == 0)
            {
                Console.WriteLine("something doesn't make sence");
            }
            else
            {
                avg = (double)sum / cnt;
                Console.Write("the AVG is {0}", avg);

            }
       Console.ReadLine(); }
    }
} 
```

这里的问题是，如果一开始我输入一个负数或大于百的数字，我会收到这样的消息：“zion 只能在 0 到 100 之间！\n你可以在这里重写 zion，或者按 -1 来查看平均\n"。
如果我然后 meenter -1，这会显示而不是 AVG：“输入下一个 zion，如果你想退出 tap -1 \n。”
我该如何解决这个问题，所以当数字为负数或大于百并且点击 -1 时，我将看到 AVG 而不是另一条消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:54:16.157

只需将您不想在`if`这样的语句中执行的代码附上

```
if(zion != -1)
{
      cnt++;
      sum = sum + zion;
      Console.Write("Enter next zion, if you want to exit tap -1 \n");
      zion = int.Parse(Console.ReadLine());
      if (cnt != 0){}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T11:05:58.020

您只需添加一个标志变量即可。

```
namespace _121119_zionAVGfilter
{
    class Program
    { 
        static void Main(string[] args)
    {
        int cnt = 0, zion, sum = 0;
        double avg;
        int flag = 0;
        Console.Write("Enter first zion \n");
        zion = int.Parse(Console.ReadLine());
        while (zion != -1)
        {                 
            while (zion < -1 || zion > 100)
            {
                Console.Write("zion can be between 0 to 100 only! \nyou can rewrite the zion here, or Press -1 to see the avg\n");
                zion = int.Parse(Console.ReadLine());
                if(zion== -1)
                    flag = 1;
            }                
            cnt++;
            sum = sum + zion;
            if (flag == 1)
                break;
            Console.Write("Enter next zion, if you want to exit tap -1 \n");
            zion = int.Parse(Console.ReadLine());
            if (cnt != 0) { }

        }
        if (cnt == 0)
        {
            Console.WriteLine("something doesn't make sence");
        }
        else
        {
            avg = (double)sum / cnt;
            Console.Write("the AVG is {0}", avg);                
        }            
        Console.ReadLine(); 
      }
    }
} 
```

# jquery - 如何在转发器控件中动态添加行？

> ID：13527494
> 
> 赞同：-1
> 
> 时间：2012-11-23T10:48:25.107
> 
> 标签：jquery, asp.net, repeater

![在此处输入图像描述](../Images/984596393b7e01fdad72129a18029d9f.png)

单击添加按钮时，我需要动态添加行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:51:22.413

```
$('table tr:last').after('<tr>...</tr><tr>...</tr>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T10:52:46.330

试试这个

```
 $('table').append('<tr>...</tr>'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T10:55:31.273

看这个 -[在 ASP.NET 中继器（或其他控件）中动态添加/删除行 - 使用自定义集合](http://xaeryan.blogspot.co.uk/2009/09/dynamically-adding-removing-textboxes.html)

# android - 无法让简单的 PreferenceFragment 示例工作

> ID：13527497
> 
> 赞同：0
> 
> 时间：2012-11-23T10:48:32.330
> 
> 标签：android, sharedpreferences, fragment

我正在努力使用 PreferenceFragments，似乎无法让它工作。

我有一个首选项文件，名为 at.package.preferences（没有 GUI）来保存内部值 - 这很有效。

现在我不想为用户的其他（公共）设置创建首选项屏幕，但这就是我失败的地方。我的代码：

```
 public class ChartPreferences extends Activity {

        private SharedPreferences prefs;
        private Button btn;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_chart_preferences);

            prefs = PreferenceManager.getDefaultSharedPreferences(this);

            btn = (Button) findViewById(R.id.button1);

            getFragmentManager().beginTransaction().replace(R.id.prefs_chart_content, 
            new ChartPrefsFragment()).commit();

            btn.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    Toast.makeText(ChartPreferences.this, getLineSize(), Toast.LENGTH_SHORT).show();                
                }
            });

        }

        public int getLineSize()
        {

            return Integer.valueOf(prefs.getString(getString(R.string.line_size_key), Helper.PREF_DEFAULT_LINE_SIZE));
        }

        public static class ChartPrefsFragment extends PreferenceFragment
        {
            @Override
            public void onCreate(Bundle savedInstanceState) {
                // TODO Auto-generated method stub
                super.onCreate(savedInstanceState);
                addPreferencesFromResource(R.xml.chart_prefs);  
            }           

        }
    } 
```

所以首选项屏幕显示，当我从首选项列表中选择一个值，比如说 5，它也可以。当我再次打开首选项列表时，仍然选择了 5（因此首选项被保存 - 某处......）

现在问题出现在 getLineSize() 函数中，当我尝试访问保存的值时。它给了我一个 android.content.res.Resources$NotFoundException。

我不知道 PreferenceScreen 的值保存在哪里，但它似乎不在 defaultSharedPreferences 中（？）

这是我的 chart_prefs.xml，以防万一：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen
  xmlns:android="http://schemas.android.com/apk/res/android">
    <PreferenceCategory android:title="@string/chart" android:summary="@string/chart">
        <ListPreference android:entries="@array/prefs_line_size" android:title="@string/line_size" android:summary="@string/line_size" android:key="@string/line_size_key" android:entryValues="@array/prefs_line_size"/>
    </PreferenceCategory>

</PreferenceScreen> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T08:29:46.460

使用 android:key="@string/line_size_key" 似乎很奇怪，即您的偏好名称是资源查找。我没有查看 Preference 的代码，但它可能无法解析字符串，而只是使用 '@string/line_size_key' 作为保存首选项的标记。

您真的不希望您的偏好名称成为资源查找吗？这意味着随着用户更改设备上的语言，偏好将消失。

# asp.net-mvc-4 - ASP.net MVC 4，项目发布后如何保持路由到默认文档

> ID：13527498
> 
> 赞同：1
> 
> 时间：2012-11-23T10:48:32.360
> 
> 标签：asp.net-mvc-4, visual-studio-2012, asp.net-mvc-routing, default-document

我在 VS 2012 express 中从 Internet 应用程序模板创建了一个新的 MVC 4 项目，[详情请点击这里](https://stackoverflow.com/questions/13511303/deploying-mvc-4-application-to-localhost-gives-http-error-404#comment18519554_13511303)

当我想发布它时，我得到了：**HTTP 403.14 - Forbidden**

我搜索了一个解决方案，发现它看起来像一个路由问题，stackoverflow中的其他帖子通过修改MVC 3 global.asax指令给出了答案。

当我尝试对 MVC 4 global.asax 应用相同的解决方案时，我发现语法与 MVC 3 的语法太不同，**即 RouteConfig.RegisterRoutes(RouteTable.Routes)**

```
namespace MyMVC4
{
    public class MvcApplication : System.Web.HttpApplication
    {
        protected void Application_Start()
        {
            AreaRegistration.RegisterAllAreas();

            WebApiConfig.Register(GlobalConfiguration.Configuration);
            FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
            RouteConfig.RegisterRoutes(RouteTable.Routes);
            BundleConfig.RegisterBundles(BundleTable.Bundles);
            AuthConfig.RegisterAuth();
            }
        }
    } 
```

# c# - Linq like 或其他结构

> ID：13527499
> 
> 赞同：2
> 
> 时间：2012-11-23T10:48:34.667
> 
> 标签：c#, sql, linq, oracle, sql-like

我的解决方案中有数据库预言机。我想在这个查询中得到一些结果。查询示例：

```
select * from doctor where doctor.name like '%IVANOV_A%'; 
```

但是，如果我在 LINQ 上这样做，我将无法得到任何结果。

```
from p in repository.Doctor.Where(x => x.Name.ToLower().Contains(name))
select p; 
```

其中 'name' 是字符串参数的变量。

网页布局请求下一个字符串：“Ivanov a”或“A Ivanov”

但我建议用户选择您的模式进行查询。

如果名称由“名字”和“姓氏”组成但用户不知道您的医生的全名，我如何获得“患者姓名”？

PS：我强制使用下一个 sql：

```
select * 
from doctor
where doctor.name like '%Ivano%' and doctor.name like '%Serg%'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T12:10:22.707

你可以做

```
repository.Doctor.Where(x => x.Name.Contains(name)) 
```

在 linq-to-sql 和 linq-to-entities 中，这都被转换为`LIKE %...%`. 您甚至可能不需要，`ToLower`因为比较完全是数据库端的，所以使用了数据库的排序规则。您必须尝试，但默认情况下，数据库通常不区分大小写。但`ToLower`如果需要，您可以使用它，它将转换为 SQL。

至于名称序列问题。无论您得到什么搜索字符串，您都可以使用尾随和前导空格来查找匹配项。假设搜索字符串是“A B”。匹配项应该是（（如“%A%”和“%B%”）或（如“%A%”）和“%B%”）。（Wathc 空格字符！）。您可以通过在空格字符处拆分字符串来解决此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T10:47:25.523

```
[System.Data.Objects.DataClasses.EdmFunction("WebDataModel", "String_Like")]
public static bool Like(this string input, string pattern)
{
    /* Turn "off" all regular expression related syntax in
     * the pattern string. */
    pattern = Regex.Escape(pattern);

    /* Replace the SQL LIKE wildcard metacharacters with the
     * equivalent regular expression metacharacters. */
    pattern = pattern.Replace("%", ".*?").Replace("_", ".");

    /* The previous call to Regex.Escape actually turned off
     * too many metacharacters, i.e. those which are recognized by
     * both the regular expression engine and the SQL LIKE
     * statement ([...] and [^...]). Those metacharacters have
     * to be manually unescaped here. */
    pattern = pattern.Replace(@"\[", "[").Replace(@"\]", "]").Replace(@"\^", "^");

    return Regex.IsMatch(input, pattern, RegexOptions.IgnoreCase);
} 
```

[链接 - 这个答案（警告 - 俄语）。](https://ru.stackoverflow.com/questions/168634/sql-like-%D0%B2-linq-net)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T11:20:37.860

试试这个，它可能会工作（没有测试过）：

```
from p in repository.Doctor.Where(x => x.Name.Contains(name, StringComparer.OrdinalIgnoreCase))
select p; 
```

# java - 具有唯一性检查的 HashMap

> ID：13527503
> 
> 赞同：5
> 
> 时间：2012-11-23T10:48:38.320
> 
> 标签：java, exception, hashmap

我有一个包含几个键值列表的类。每个键（在列表中）都应该是唯一的，所以我使用 HashMap。当我在代码中的某个地方向列表中添加一个新项目时，我使用的是 HashMap 的`put(K, V)`. 如果尝试添加具有现有密钥的项目，我希望我的代码抛出异常。而且，因为在程序中的许多地方都执行了这样的添加，所以我想避免在每个地方添加检查。所以应该是列表类本身不允许替换现有的键值对。

我想用我自己的扩展 HashMap 类，它会执行这样的检查并抛出异常。但是，HashMap`put`不会抛出异常，所以我也不能这样做。

实现这种行为的好方法是什么？我准备用更好的东西替换 HashMap，但我需要它在添加和检索项目时都快。

**更新：** 感谢大家的许多好建议。由于我是 Java 的完全新手，我现在需要学习很多东西才能选择最好的:) 无论如何，我很感激能在午休时间获得这么多的选择！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T10:52:28.827

您可以为此使用[Commons Collections](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/MapUtils.html#predicatedMap%28java.util.Map,%20org.apache.commons.collections.Predicate,%20org.apache.commons.collections.Predicate%29)，例如：

```
Map map = MapUtils.predicatedMap(new HashMap(), PredicateUtils.uniquePredicate(),
             null); 
```

这将创建一个`Map`实例，当您尝试在相同的键已经存在时插入键值对时，该实例将引发异常。

当然，您可以通过构建自己的`Predicate`实例并使用它而不是`PredicateUtils.uniquePredicate()`. 您自己的`Predicate`可以做任何您需要它做的事情，例如，它可能会抛出与 default 抛出的异常类型不同的异常`uniquePredicate()`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-23T10:53:35.007

我不会扩展`HashMap`类，因为在这种情况下，它会导致**违反里氏替换原则**，因为你改变了基类方法的行为。

**相反，我会使用组合：**

创建您的`CustomHashMap`类实现`Map`接口并拥有一个`HashMap`字段。并重新声明`HashMap`类中存在的每个方法，为每个方法添加一个委托到原始方法`HashMap`，除了方法 => 如果已经存在`put()`则抛出异常。`entry`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T10:51:28.940

几个想法：
A. 在扩展 HashMap 的类中抛出一个扩展 RuntimeException 的异常。
B. 提供某种 MapWrapper，它将接收 Map 作为参数，具有 get、put 和其他一些方法，以及更适合您的签名。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-23T11:06:14.973

Map#put的[javadoc 状态](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html#put%28K,%20V%29)：

> **如果指定键或值的某些属性阻止它存储在此映射中，则**抛出 IllegalArgumentException****

 **我认为您的用例属于该类别，因此我会使用这种可能性。由于它是一个未经检查的异常，您可以在方法中使用组合、包装 a 并在重复项上`HashMap`抛出一个。`IllegalArgumentException``put`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T10:51:15.970

您可以抛出一个扩展 RuntimeException 的异常。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-23T10:58:47.717

您可以扩展 HashMap 并抛出一个异常，它是 RuntimeException 的子类或 put 方法已经抛出的异常之一。**

# android - 如何在android中向用户的twitter朋友发送消息？

> ID：13527505
> 
> 赞同：-1
> 
> 时间：2012-11-23T10:48:45.947
> 
> 标签：android, twitter, tweets

我想向 twitter 用户朋友发布推文消息。我找不到教程。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:53:56.410

您想要 POST [direct_messages/new](https://dev.twitter.com/docs/api/1/post/direct_messages/new)直接消息。

检查[dev.twitter.com/docs/api 上的所有 REST API 方法。](https://dev.twitter.com/docs/api)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T10:55:46.227

如果您只需要发送一条推文，这可以为您提供帮助。

```
String tweetUrl = "https://twitter.com/intent/tweet?text=PUT TEXT HERE &url="
                        + "https://www.google.com";
Uri uri = Uri.parse(tweetUrl);
startActivity(new Intent(Intent.ACTION_VIEW, uri)); 
```

其他人例如如何发送消息 suing androd API 。这里有一些链接为您提供帮助；

```
http://www.android10.org/index.php/articleslibraries/291-twitter-integration-in-your-android-application,

Build Android applications with Twitter

http://kenai.com/projects/twitterapime/pages/Home 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T11:02:48.500

**TwitterAPIMe**是一个很棒的 Android 第三方库，它为许多 Twitter 交互提供了很多功能，包括处理 OAUTH 和发送推文。

该项目定期更新，可在以下网址找到：http: [//kenai.com/projects/twitterapime/pages/Home](http://kenai.com/projects/twitterapime/pages/Home)

撰写本文时的最新版本是下载页面上的**twitter_api_me-1.8.3-android 。**

网站上提供了教程，详细介绍了如何使用该功能以及如何将其与您的 Android 项目集成。

该库也可用于 RIM 设备和 J2ME。

我在多个项目中使用了他们的库。

# xml-parsing - xml序列化反序列化

> ID：13527510
> 
> 赞同：1
> 
> 时间：2012-11-23T10:48:52.110
> 
> 标签：xml-parsing

我有一个字典数据结构，我想像这样将它写入 XML

```
<root>
<key>House1</key>
<value>somevalue</value>
<key>House2</key>
<value>somevalue</value>
</root> 
```

而且我还想在我的字典中取回数据到目前为止我已经完成了这个 XmlTextWriter

```
textWriter = new XmlTextWriter("D:\\config.xml", null);
            textWriter.WriteStartDocument();
            Dictionary<string, string> dict = new Dictionary<string, string>();
            dict.Add("house", "langlat");
            dict.Add("house2", "langlat");
            XElement el = new XElement("root", dict.Select(kv => new XElement("key", kv.Key, new XElement("value", kv.Value)))); 
```

这是将数据写入 XML，但是当我尝试读取值时，它给了我像 Houselanglat 这样的全部内容。我希望房子作为钥匙，而 langlat 应该是它的价值。

# rest - JavaFX：ListView：来自 ListCell 的 SetId，来自 POJO 的 ID

> ID：13527511
> 
> 赞同：1
> 
> 时间：2012-11-23T10:48:53.360
> 
> 标签：rest, listview, javafx

我正在尝试在客户端站点上使用 mongoDB、restful-webservice 和 javaFX 开发一个小的联系人管理工具。restful-webservice 已经完成，现在我正在尝试开发客户端。

我使用以下路径获取单个联系人的信息：

**/联系人/实体/{uid}**

其中 {uid} 是 mongodb 中单个联系人的 objectID。

如果我想从我的客户端设置这个路径参数，我必须获取对象 ID。我认为如果来自 listcell 的 id 是来自单个对象的 objectid 会很好，这样我可以在单击 listCell 时使用*ListCell .getId() 添加路径参数。*

现在我的问题是：如何做到这一点，以便返回对象中的 objectId 用于单个 listCell 的 id？

感谢所有建议！

# android - 如何在软键盘中添加和使用语言

> ID：13527515
> 
> 赞同：0
> 
> 时间：2012-11-23T10:49:09.177
> 
> 标签：android, localization, keyboard

Android 支持键盘本地化。我们可以通过以下方式选择输入法语言

```
InputMethodManager inputManager = (InputMethodManager) context.getSystemService(context.INPUT_METHOD_SERVICE);
inputManager.showInputMethodPicker(); 
```

但是我们如何在输入法中添加任何特定的语言呢？我们如何在不向用户显示选择器的情况下更改键盘输入法？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:55:55.227

首先，您需要为所有字符串布局（本地化）使用不同的语言，而不是您需要在`phone settings`.

您可以选择任何语言，例如，如果您选择了法语，那么软键盘也会采用适当的语言。

我希望你明白

# java - java中使用AES加密/解密图像的技巧

> ID：13527521
> 
> 赞同：0
> 
> 时间：2012-11-23T10:49:21.243
> 
> 标签：java

我需要有关图像加密和解密的一些想法的帮助。

我想加密/解密图像并使用它们来防止未经授权的用户用他们的图像替换我的图像。我有使用 AES 加密/解密的代码。但是，我很困惑何时解密图像以及如何确定哪个加密字节数组属于特定图像。我想为此使用 2d 字节数组。任何人有任何想法，我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:51:34.207

**-**那么我会要求你使用`Cipher`，`CipherInputStream`并`CipherOutputStream`进行**加密**和**解密**。

**-**您可以在图像、文件、视频等上使用它...

**请参阅此链接：**

[http://www.flexiprovider.de/examples/ExampleCrypt.html](http://www.flexiprovider.de/examples/ExampleCrypt.html)

# capistrano - 开源项目和不同环境中的 Capistrano

> ID：13527524
> 
> 赞同：2
> 
> 时间：2012-11-23T10:49:37.493
> 
> 标签：capistrano

我考虑使用 Capistrano 在我的服务器上部署我的 rails 应用程序。目前我正在使用一个脚本，它为我完成了所有的工作。但是 Capistrano 看起来很不错，我想试一试。

我现在的第一个问题/问题是：如何在开源项目中正确使用 Capistrano？我不想发布我的 deploy.rb 有几个原因：

1.  它包含有关我的服务器的敏感信息。我不想发布它们:)
2.  它包含我的服务器的配置。对于将开源项目部署到自己的服务器的其他人，配置可能会有所不同。所以发布我的配置是非常没有意义的，因为它对其他人毫无用处。

第二个问题/问题：我如何管理不同的环境？背景：在我的服务器上，我为我的应用程序提供了两种不同的环境：使用当前稳定版本分支并位于 www.domain.com 下的稳定系统。以及在 dev.domain.com 下运行 master 分支的开发团队的集成环境。

我如何告诉 Capistrano 部署稳定系统或开发系统？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-30T21:42:59.830

我在 Capistrano 中处理敏感信息（密码等）的方式与我通常处理它们的方式相同：我使用`APP_CONFIG`来自未检入版本控制的 YAML 文件的哈希。这是一种经典技术，例如在[RailsCast #226](http://railscasts.com/episodes/226-upgrading-to-rails-3-part-2?view=asciicast)中介绍过，或者参见[这个 StackOverflow 问题](https://stackoverflow.com/questions/8043358/re-source-bashrc-when-restarting-unicorn)。

在 Capistrano 中使用这种方法时，您必须做一些不同的事情：

1.  通常`APP_CONFIG`是从你的`config/application.rb`（所以它发生得足够早，可以在其他任何地方使用）；但 Capistrano`cap`任务不会加载该文件。但是您也可以从中加载它`config/deploy.rb`；`config/deploy.rb`这是使用需要用户名/密码的 HTTP 存储库的人为文件的顶部。

    ```
    require 'bundler/capistrano'

    APP_CONFIG = YAML.load_file("config/app_config.yml")
    set :repo_user, APP_CONFIG['repo_user']
    set :repo_password, APP_CONFIG['repo_password']
    set :repository, "http://#{repo_user}:#{repo_password}@hostname/repositoryname.git/"
    set :scm, :git
    # ... 
    ```

2.  该`config/app_config.yml`文件未检入版本控制（将该路径放入您的`.gitignore`或类似的）；我通常签入`config/app_config.yml.sample`显示需要配置的参数：

    ```
    repo_user: 'usernamehere'
    repo_password: 'passwordhere' 
    ```

3.  如果您将`APP_CONFIG`用于您的应用程序，它可能需要在不同的部署主机上具有不同的值。因此，让您的 Capistrano 设置在`shared/`签出后从目录到每个版本的符号链接。您希望在部署过程的早期执行此操作，因为应用迁移可能需要数据库密码。所以在你的`config/deploy.rb`放这个：

    ```
    after 'deploy:update_code', 'deploy:symlink_app_config'
    namespace :deploy do
      desc "Symlinks the app_config.yml"
      task :symlink_app_config, :roles => [:web, :app, :db] do
        run "ln -nfs #{deploy_to}/shared/config/app_config.yml #{release_path}/config/app_config.yml"
      end
    end 
    ```

现在，对于问题的第二部分（关于部署到多个主机），您应该为每个主机配置单独的 Capistrano“阶段”。您将所有阶段通用的所有内容放入`config/deploy.rb`文件中，然后将每个阶段独有的所有内容放入`config/deploy/[stagename].rb`文件中。您将有一个部分`config/deploy.rb`定义阶段：

```
 # Capistrano settings
    require 'bundler/capistrano'
    require 'capistrano/ext/multistage'
    set :stages, %w(preproduction production)
    set :default_stage, 'preproduction' 
```

（您可以随意调用阶段；Capistrano 阶段名称与 Rails 环境名称是分开的，因此阶段不必称为“生产”。）现在，当您使用命令时，在和`cap`之间插入阶段名称`cap`目标名称，*例如*：

```
 $ cap preproduction deploy   #deploys to the 'preproduction' environment
    $ cap production deploy      #deploys to the 'production' environment
    $ cap deploy                 #deploys to whatever you defined as the default 
```

# mysql - Mysql FETCH CURSOR 结果不理解

> ID：13527528
> 
> 赞同：1
> 
> 时间：2012-11-23T10:49:46.227
> 
> 标签：mysql, cursor, fetch

我已经在 Google 上搜索了一段时间，我确信问题在于我不清楚 MySQL 中的 CURSOR 是如何工作的。

问题的简短解释：我正在编写这样的函数（简化）：

```
CREATE DEFINER=`me`@`localhost` FUNCTION `product_move`(prID INT, tr_type VARCHAR(2), clID INT, am INT, dnID INT, usrID INT, price FLOAT(10,2), ti DATETIME, barc TINYTEXT, cmt TINYTEXT, lnID INT)
BEGIN
    DECLARE done INT DEFAULT FALSE;
    DECLARE cur_id INT;
    DECLARE net_pr FLOAT(10,2);
    DECLARE cur_r INT;
    DECLARE remaind INT DEFAULT 0;
    DECLARE avg_price FLOAT(10,2) DEFAULT 0;
    DECLARE curs CURSOR FOR SELECT  `products_transactionsID`,
                                                `price`,
                                                `remains`
                                        FROM `products_transactions`
                                        WHERE `productID`=prID AND `remains`>0 AND `type`='V'
                                        ORDER BY `products_transactionsID` ASC;
DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;
 OPEN curs;
           SET remaind=am;
           read_loop:LOOP
                FETCH curs INTO cur_id,net_pr,cur_r;
                 IF done THEN
                  LEAVE read_loop;
                END IF;
                IF (cur_r>=remaind) THEN
                    SET avg_price = avg_price + (net_pr * remaind);
                    UPDATE `products_transactions` SET `remains`=`remains`-remaind WHERE products_transactionsID=cur_id;
                    LEAVE read_loop;
                ELSE

                    SET avg_price = avg_price + (net_pr * cur_r);
                    SET remaind=remaind-cur_r;
                    UPDATE `products_transactions` SET `remains`=0 WHERE products_transactionsID=cur_id;
                END IF;
           END LOOP;

CLOSE curs;
           SET avg_price=avg_price/am;
 INSERT INTO products_transactions
                       (`products_transactionsID`,`clientID`,`date_created`,`delivery_notesID`,`type`,`productID`,`amountIN`,`amountOUT`,`barcodes`,`in_stock`,`out_stock`,`out_repair`,`out_loss`,`booked`,`ordered`,`userID`,`price`,`comments`,`fifo_buy_price`)
                   SELECT NULL, clID, ti, dnID , tr_type, prID, 0, am, barc, products_transactions.in_stock-am, products_transactions.out_stock,
                       products_transactions.out_repair, products_transactions.out_loss, products_transactions.booked, products_transactions.ordered,usrID,price,cmt,avg_price
                   FROM
                       products_transactions WHERE productID=prID ORDER BY products_transactionsID DESC LIMIT 1; 
```

因此，我们在此表中插入一个新行，基于先前选择的行的一些计算并同时更新这些行。

问题出在`avg_price`变量上，它应该根据`net_pr`从游标中获取的变量来计算。但不知何故，该`net_pr`变量不是从 SELECT 中获取，而是采用`price`我的函数的输入参数的值！这怎么可能？

到目前为止，我的猜测是：

*   变量名冲突？搜索了代码，但我找不到任何东西。

*   更新 LOOP 中的表会使 CURSOR 失去其位置？这是有道理的，但这也不会导致这种情况......

我很欣赏任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:18:23.003

我可以看到两件事：

1）不要更新您在游标中使用的表。MySQL说游标是只读的，但我不相信这一点。设置您的值，退出游标，然后更新表。

2）对proc定义中的变量和select中的列使用相同的名称会产生冲突：[http ://dev.mysql.com/doc/refman/5.0/en/local-variable-scope.html](http://dev.mysql.com/doc/refman/5.0/en/local-variable-scope.html)

“局部变量不应与表列同名。如果 SQL 语句（例如 SELECT ... INTO 语句）包含对列的引用和已声明的同名局部变量，则 MySQL 当前解释引用作为变量的名称。”

# php - Robots.txt 正在阻止来自谷歌的 wordpress 网站

> ID：13527529
> 
> 赞同：2
> 
> 时间：2012-11-23T10:49:47.953
> 
> 标签：php, wordpress, robots.txt

不知何故，一个虚拟 robots.txt 阻止了谷歌搜索网站[http://www.domda.se](http://www.domda.se)。我不希望这种情况发生。

该网站是用 Wordpress 制作的，并在 Integrity 设置中对搜索引擎开放（当然；）

我试过了：

*   关闭并再次打开隐私设置/搜索引擎允许。

*   关闭所有插件。

*   将完全允许的 robots.txt 添加到根目录。

*   使用机器人插件编写 robots.txt 中应包含的内容

*   将主题更改为 211 并再次返回

*   使用 ftp 重置插件文件夹

现在我想知道是否有人可以帮助我，因为我的 php 知识太低了，这让我脸红。我现在想到的事情是尝试通过查看functions.php来解决问题。

在 wp-includes/functions.php 中执行代码的机器人说：

```
function do_robots() {
    header( 'Content-Type: text/plain; charset=utf-8' );

    do_action( 'do_robotstxt' );

    $output = "User-agent: *\n";
    $public = get_option( 'blog_public' );
    if ( '0' == $public ) {
        $output .= "Disallow: /\n";
    } else {
        $site_url = parse_url( site_url() );
        $path = ( !empty( $site_url['path'] ) ) ? $site_url['path'] : '';
        $output .= "Disallow: $path/wp-admin/\n";
        $output .= "Disallow: $path/wp-includes/\n";
    }

    echo apply_filters('robots_txt', $output, $public);
} 
```

也许那个代码完全没问题。而我添加一个真正的 robots.txt 会否决虚拟的，但我真的不知道该怎么做。

我希望有人能帮帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T10:54:58.817

我认为你需要先看看开场白是否完全正确。

您可以直接在网络浏览器中查看您的 robots.txt。

如果你访问[http://www.domda.se/robots.txt](http://www.domda.se/robots.txt)，你会得到

> 用户代理： *
> 
> 禁止：/wpsystem/wp-admin/
> 
> 禁止：/wpsystem/wp-includes/

这会阻止所有机器人访问 wpsystem 文件。

它不会阻止谷歌访问主站点。

然而，谷歌搜索`site:http://www.domda.se`确实拉起

> 由于此站点的 robots.txt，无法获得此结果的说明 – 了解更多

由于您进行了许多更改，您似乎曾经有一个阻止 Google 的 robots.txt，而现在您没有。

robots.txt 的全部意义在于它是供网络爬虫使用的信息。这些定期检查站点，并且比其他站点更频繁地检查某些站点。您的网站可能要过一段时间才会被 Google 的机器人重新访问，并且还要再过一段时间，您的网站在该次访问中抓取的网页才会出现在 Google 搜索中。

您应该使用 Google 网站管理员工具（它是免费的）来更清楚地了解这个主题并为 Google 提供帮助。

# sql - 将列数据拆分为行的 SQL 查询

> ID：13527537
> 
> 赞同：20
> 
> 时间：2012-11-23T10:50:05.067
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有 sql 表，因为我有 2 个字段`No`和`declaration`

```
Code  Declaration
123   a1-2 nos, a2- 230 nos, a3 - 5nos 
```

我需要将该代码的声明显示为：

```
Code  Declaration 
123   a1 - 2nos 
123   a2 - 230nos 
123   a3 - 5nos 
```

我需要将列数据拆分为该代码的行。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-23T10:56:04.510

对于这种类型的数据分离，我建议创建一个拆分函数：

```
create FUNCTION [dbo].[Split](@String varchar(MAX), @Delimiter char(1))       
returns @temptable TABLE (items varchar(MAX))       
as       
begin      
    declare @idx int       
    declare @slice varchar(8000)       

    select @idx = 1       
        if len(@String)<1 or @String is null  return       

    while @idx!= 0       
    begin       
        set @idx = charindex(@Delimiter,@String)       
        if @idx!=0       
            set @slice = left(@String,@idx - 1)       
        else       
            set @slice = @String       

        if(len(@slice)>0)  
            insert into @temptable(Items) values(@slice)       

        set @String = right(@String,len(@String) - @idx)       
        if len(@String) = 0 break       
    end   
return 
end; 
```

然后要在查询中使用它，您可以使用 an`outer apply`连接到现有表：

```
select t1.code, s.items declaration
from yourtable t1
outer apply dbo.split(t1.declaration, ',') s 
```

这将产生结果：

```
| CODE |  DECLARATION |
-----------------------
|  123 |     a1-2 nos |
|  123 |  a2- 230 nos |
|  123 |    a3 - 5nos | 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/0df5e/2)

或者您可以实现类似于以下的 CTE 版本：

```
;with cte (code, DeclarationItem, Declaration) as
(
  select Code,
    cast(left(Declaration, charindex(',',Declaration+',')-1) as varchar(50)) DeclarationItem,
         stuff(Declaration, 1, charindex(',',Declaration+','), '') Declaration
  from yourtable
  union all
  select code,
    cast(left(Declaration, charindex(',',Declaration+',')-1) as varchar(50)) DeclarationItem,
    stuff(Declaration, 1, charindex(',',Declaration+','), '') Declaration
  from cte
  where Declaration > ''
) 
select code, DeclarationItem
from cte 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-23T14:23:04.007

```
Declare @t Table([Code] int, [Declaration] varchar(32));    
Insert Into @t([Code], [Declaration])
Values(123, 'a1-2 nos, a2- 230 nos, a3 - 5nos')

Select 
    x.[Code]
    ,t.Declaration  
    From
    (
        Select 
        *,
        Cast('<X>'+Replace(t.[Declaration],',','</X><X>')+'</X>' As XML) As record

        From @t t
    )x
    Cross Apply
    ( 
        Select fdata.D.value('.','varchar(50)') As Declaration 
        From x.record.nodes('X') As fdata(D)
    ) t 
```

几次前，我[在 Sql Server 中使用 Set base 方法写过相同的拆分函数](http://www.dotnetfunda.com/codes/code1797-split-function-in-sql-server-using-set-base-approach.aspx)

另外，请访问[Erland Sommarskog](http://www.sommarskog.se/arrays-in-sql.html)博客，该博客自过去 15 年以来一直保持相同的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-13T08:59:50.890

试试这个....

```
declare @col1 varchar(100),@CurentSubString varchar(100)

create table #temp
(
    col1 varchar(50)
)

DECLARE CUR   CURSOR
FOR     SELECT  col1
        FROM    your_table
open    CUR

FETCH   next 
FROM    CUR
INTO    @col1

WHILE @@FETCH_STATUS = 0
BEGIN

    WHILE   CHARINDEX (@col1, ';') <> 0
    BEGIN
    SET @CurentSubString    =   SUBSTRING(@col1,1,CHARINDEX (@col1, ';'))
    SET @col1 = SUBSTRING(@col1,CHARINDEX (@col1, ';')+1,len(@col1))

    insert into #temp
    select @CurentSubString
END

IF CHARINDEX (@col1, ';') = 0 and isnull(@col1,'')!= '' 
BEGIN
    INSERT INTO #temp
    SELECT @col1
END

FETCH   next 
FROM    CUR
INTO    @col1

END

select  * 
From    #temp

CLOSE   CUR
DEALLOCATE CUR 
```

# excel - 如何在 VBA 表单上显示 Excel 的一部分

> ID：13527540
> 
> 赞同：8
> 
> 时间：2012-11-23T10:50:11.450
> 
> 标签：excel, excel-2007, userform, vba

我有一个 .csv 格式的文件，并且来自 AS 列，它有一些像表格一样的记录。我的完整程序将插入/删除/删除/添加一些行、列和编辑单元格值等。我设法编写了我需要的所有操作，现在我正在尝试将它与 gui 集成。

我想要的是显示从 Ax1 到在 VBA 用户表单上记录的最后一列的单元格。我怎样才能做到这一点？

*ps：同样，我的文件格式是 .csv，我使用的是 Excel 2007

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-23T13:15:04.877

您可以使用多列列表框来显示数据。

**逻辑**

1.  在临时表中导入文本 (Csv) 文件
2.  在多列列表框中显示该数据
3.  删除 Userform 卸载事件中的临时表

**在临时表中导入文本 (Csv) 文件**

```
Private Sub CommandButton1_Click()
    Dim wb As Workbook, wbTemp As Workbook
    Dim wsTemp As Worksheet

    Set wb = ThisWorkbook
    Set wbTemp = Workbooks.Open("C:\MyCsv.Csv")

    wbTemp.Sheets(1).Copy After:=wb.Sheets(wb.Sheets.Count)

    Set wsTemp = ActiveSheet

    wbTemp.Close SaveChanges:=False
End Sub 
```

现在您可以在多列列表框中显示该数据。

**在多列列表框中显示该数据**

我以 3 列和最多 20 列为例。根据需要进行更改

```
Private Sub CommandButton1_Click()
    Dim wb As Workbook, wbTemp As Workbook
    Dim wsTemp As Worksheet

    Set wb = ThisWorkbook
    Set wbTemp = Workbooks.Open("C:\MyCsv.Csv")

    wbTemp.Sheets(1).Copy After:=wb.Sheets(wb.Sheets.Count)

    Set wsTemp = ActiveSheet

    wbTemp.Close SaveChanges:=False

    With ListBox1
        .ColumnCount = 3
        .ColumnWidths = "50;50;50"
        .RowSource = wsTemp.Range("A1:C20").Address
    End With
End Sub 
```

**截屏**

![在此处输入图像描述](../Images/d69d15e6834f51d1a01dab47363a71a9.png)

**删除 Userform 卸载事件中的临时表**

要删除临时表，请`wsTemp`在代码顶部声明 ，以便您可以在`UserForm_QueryClose`事件中访问它。看这个完整的例子

```
Option Explicit

Dim wsTemp As Worksheet

Private Sub CommandButton1_Click()
    Dim wb As Workbook, wbTemp As Workbook

    Set wb = ThisWorkbook
    Set wbTemp = Workbooks.Open("C:\MyCsv.Csv")

    wbTemp.Sheets(1).Copy After:=wb.Sheets(wb.Sheets.Count)

    Set wsTemp = ActiveSheet

    wbTemp.Close SaveChanges:=False

    With ListBox1
        .ColumnCount = 3
        .ColumnWidths = "50;50;50"
        .RowSource = wsTemp.Range("A1:C20").Address
    End With
End Sub

Private Sub UserForm_QueryClose(Cancel As Integer, CloseMode As Integer)
    Application.DisplayAlerts = False
    wsTemp.Delete
    Application.DisplayAlerts = True
End Sub 
```

高温高压

# javascript - 命名参数与常规参数

> ID：13527544
> 
> 赞同：0
> 
> 时间：2012-11-23T10:50:20.577
> 
> 标签：javascript, jquery

我想知道javascript的常规参数之间是否存在性能差异

```
call(var1, var2); 
```

和 jQuery 风格：

```
call({var1: '1', var2: '2'}); 
```

我根据当前情况使用两者。

也许有一些标准？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T11:09:43.777

这不是*jQuery 风格*，而实际上只是一个 Javascript Object Literal。

当您必须传递命名值的映射时，您会选择文字，但您不知道实际将传递哪些以及多少，例如 jQuery CSS setter：

```
$(el).css({
  'color' : 'red',
  'font-weight' : 'bold'
}); 
```

函数体将负责检查参数对象，并做相应的事情

`function(arg1, arg2, ... argN)`当您可能知道函数所需的所有参数并且能够提供它们时，您可以选择一个简单的参数列表 [ ]：

```
var distance = function(p1, p2){

  // calculate distance between points p1 and p2

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T10:59:06.190

IMO，这完全取决于您的情况。如果你有`var1, var2, ... varN`你显然会使用数组或 JSON。我认为性能没有任何问题。

如果我的函数中只有一个参数，我为什么要使用 json（创建 json 可能会使用一些资源）。

# javascript - Cloudcarousel 反射

> ID：13527547
> 
> 赞同：0
> 
> 时间：2012-11-23T10:50:31.670
> 
> 标签：javascript, jquery, html

我在我的网站上使用 CloudCarousel。我使用 reflHeight 属性进行反射。不幸的是 IE8 显示反射的方式不同。我不喜欢它。

请问如果IE7或IE8浏览器比设置reflHeight为0，如何修改我的代码？所以我需要一些浏览器特定的条件？

剧本：

```
$(document).ready(function(){
     $("#carousel1").CloudCarousel(     
                            {           
                                xPos: 350,
                                yPos: 102,
                                minScale:1.4,
                                xRadius:230,
                                yRadius:10,
                                reflHeight: 26,
                                reflGap:2,
                                autoRotate:'yes',
                                autoRotateDelay:7500,
                                buttonLeft: $("#left-but"),
                                buttonRight: $("#right-but"),
                                altBox: $("#alt-text"),
                                titleBox: $("#title-text"),
                                bringToFront:false

                            }
                        );  
}); 
```

# java - 如何将字符串数组从 jsp 发送到 servlet 类

> ID：13527548
> 
> 赞同：0
> 
> 时间：2012-11-23T10:50:32.090
> 
> 标签：java, jsp, servlets, jstl

我想知道是否可以将字符串数组从 jsp 发送到 servlet 类。实际上这种情况是我从servlet发送一个字符串数组到jsp，然后我想把这个字符串数组发送到另一个servlet类。例如，

```
 <table border="1">
     <tr>
        <th>Target Names</th>
    </tr>
        <c:forEach items="${targetarray}" var="drugtarget">
        <tr>
        <td>${fn:escapeXml(drugtarget)}</td>
        </tr>
        </c:forEach>
</table> 
```

这里，`targetarray`是我的字符串数组。我现在需要将它发送到另一个 servlet 类。还是有另一种方法可以做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:38:50.007

HTML 只能包含字符序列。HTTP 请求参数只能表示字符序列。您绝对不能到处传递 Java 对象。您需要先将它们转换为基于指定格式唯一表示 Java 对象的字符序列，以便在服务器端检索回 Java 对象后将其转换回 Java 对象。字符序列在 Java 中由`String`类表示。

因此，基本上，您需要在以 HTML 格式打印之前转换`String[]`为。`String`您可以使用 HTML`<input type="hidden">`来表示隐藏的请求参数。您需要在将提交的值作为 HTTP 请求参数获取后将其转换`String`回。`String[]`在最简单的情况下，您可以选择逗号分隔值 (CSV) 格式作为`String` 表示，也可以选择 XML 或 JSON。

如果 Java 对象相当复杂（例如 Javabean，可能具有更多嵌套的 Javabean 属性等），则完全不同的替代方案是`java.util.UUID`在会话中沿唯一且自动生成的键（例如 by ）存储对象。然后，您只需将该唯一密钥作为请求参数准确地传递，以便之后可以根据该密钥从会话中获取（删除）它。

# apache-flex - 使用自定义 compareFunction 对 Datagrid 进行 Flex 排序（排序数字和文本字母数字）

> ID：13527551
> 
> 赞同：0
> 
> 时间：2012-11-23T10:50:39.447
> 
> 标签：apache-flex, sorting, datagrid, compare

我需要以下结果。

所有数字都使用数字排序，所有字符串都使用字母数字排序。此外，数值应列在字符串值之前：

示例：在 "i","9","89","0045","b","x" 之前

在 "9","0045","89","b","i","x" 之后

我当前的代码如下所示：（数字排序有效，但我的字符串分布在顶部和底部？！->“b”，“x”，“9”，“0045”，“89”，“i”）

```
 public function compareFunction(obj1:Object, obj2:Object):int {
  var id1:String = (obj1 as WdProblem).id;
  var id2:String = (obj2 as WdProblem).id;

  if(id1.replace(' ', '') == "n") {
    var sdld:int = 0;
  }

  var num1:int = Number(id1);
  var num2:int = Number(id2);

  if(stringIsAValidNumber(id1) && stringIsAValidNumber(id2)) {
    if(num1 == num2) {
      return 0;
    } else {
      if(num1 > num2) {
        return 1;
      } else {
        return -1;
      }
    }
  } else if(!stringIsAValidNumber(id1) && !stringIsAValidNumber(id2)) {
    return ObjectUtil.compare(id1, id2);
      //return compareString(id1, id2);

  } else if(!stringIsAValidNumber(id1) && stringIsAValidNumber(id2)) {
    return 1;
  } else if(stringIsAValidNumber(id1) && !stringIsAValidNumber(id2)) {
    return -1;
  }

  return -1;
}

private function stringIsAValidNumber(s:String):Boolean {
  return Boolean(s.match("[0-9]+(\.[0-9][0-9]?)?"));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T16:47:54.777

我的建议是将它分解成它的组成部分，特别是如果你有这样的场景，具有 1 个或多个优先级排序。关键是只有当第一个排序返回它们相等时才进入下一个排序。

对于您的情况，我将构建 2 种排序，一种用于数字，另一种用于字母数字，然后您的主排序可以通过调用子排序来优先处理这些排序。

例如我有类似的东西：

```
private function sort2DimensionsByIncomeVsTime(a:OLAPSummaryCategory, b:OLAPSummaryCategory, fields:Array = null):int
{
    var sort:OLAPSort = new OLAPSort();
    var incomeSort:int = sort.sortIncome(a, b);
    var nameSort:int = sort.sortName(a, b);
    var yrSort:int = sort.sortYear(a, b);
    var moSort:int = sort.sortMonth(a, b);

    if (incomeSort == 0)
    {
        if (nameSort == 0)
        {
           if (yrSort == 0) 
           {
               //trace(a.name, a.year, a.month, 'vs:', b.name, b.year, b.month, 'month sort:', moSort);
               return moSort;
           }
           else return yrSort;
        }
        else return nameSort;
    }
    else return incomeSort;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-30T14:56:38.493

我使用以下排序函数进行 AlphaNumeric 排序：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application 
    creationComplete="onCC()"
    xmlns:fx="http://ns.adobe.com/mxml/2009"
    xmlns:s="library://ns.adobe.com/flex/spark"
    xmlns:mx="library://ns.adobe.com/flex/mx">

    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;
            import mx.utils.ObjectUtil;
            import mx.utils.StringUtil;

            import spark.collections.Sort;
            import spark.collections.SortField;

            public function onCC():void
            {
                var acAlphaNumericString:ArrayCollection = new ArrayCollection();
                acAlphaNumericString.addItem({ name: "NUM10071" });
                acAlphaNumericString.addItem({ name: "NUM9999" });
                acAlphaNumericString.addItem({ name: "9997" });
                acAlphaNumericString.addItem({ name: "9998" });
                acAlphaNumericString.addItem({ name: "9996" });
                acAlphaNumericString.addItem({ name: "9996F" });
                acAlphaNumericString.addItem({ name: "i" });
                acAlphaNumericString.addItem({ name: "9" });
                acAlphaNumericString.addItem({ name: "89" });
                acAlphaNumericString.addItem({ name: "0045" });
                acAlphaNumericString.addItem({ name: "b" });
                acAlphaNumericString.addItem({ name: "x" });

                var sf:SortField = new SortField("name");
                sf.compareFunction = function(o1:Object, o2:Object):int
                {
                    return compare(o1.name, o2.name);
                }
                var sort:Sort = new Sort();
                sort.fields = [ sf ];
                acAlphaNumericString.sort = sort;
                acAlphaNumericString.refresh();

                for each (var o:Object in acAlphaNumericString)
                    trace(o.name);
            }

            public static function compare(firstString:String, secondString:String):int
            {
                if (secondString == null || firstString == null)
                    return 0;
                var lengthFirstStr:int = firstString.length;
                var lengthSecondStr:int = secondString.length;
                var index1:int = 0;
                var index2:int = 0;
                while (index1 < lengthFirstStr && index2 < lengthSecondStr)
                {
                    var ch1:String = firstString.charAt(index1);
                    var ch2:String = secondString.charAt(index2);
                    var space1:String = "";
                    var space2:String = "";
                    do
                    {
                        space1 += ch1;
                        index1++;
                        if (index1 < lengthFirstStr)
                            ch1 = firstString.charAt(index1);
                        else
                            break;
                    } while (isDigit(ch1) == isDigit(space1.charAt(0)));
                    do
                    {
                        space2 += ch2;
                        index2++;
                        if (index2 < lengthSecondStr)
                            ch2 = secondString.charAt(index2);
                        else
                            break;
                    } while (isDigit(ch2) == isDigit(space2.charAt(0)));

                    var str1:String = new String(space1);
                    var str2:String = new String(space2);
                    var result:int;
                    if (isDigit(space1.charAt(0)) && isDigit(space2.charAt(0)))
                    {
                        var firstNumberToCompare:int = parseInt(StringUtil.trim(str1));
                        var secondNumberToCompare:int = parseInt(StringUtil.trim(str2));
                        result = ObjectUtil.numericCompare(firstNumberToCompare, secondNumberToCompare);
                    }
                    else
                        result = ObjectUtil.compare(str1, str2);

                    if (result != 0)
                        return result;
                }
                return lengthFirstStr - lengthSecondStr;

                function isDigit(ch:String):Boolean
                {
                    var code:int = ch.charCodeAt(0);
                    return code >= 48 && code <= 57;
                }
            }
        ]]>
    </fx:Script>
</s:Application> 
```

# .net - WP7 中的扩展

> ID：13527555
> 
> 赞同：0
> 
> 时间：2012-11-23T10:50:50.033
> 
> 标签：.net, vb.net, windows-phone-7

```
Imports System.Runtime.CompilerServices

Public Module ColorExtension
    <Extension()> _
    Public Function ToColor(ByVal argb As UInteger) As Global.System.Windows.Media.Color
        Return Global.System.Windows.Media.Color.FromArgb(CByte((argb And -16777216) >> &H18), CByte((argb And &HFF0000) >> &H10), CByte((argb And &HFF00) >> 8), CByte(argb And &HFF))
    End Function
End Module

Public Class Test
    Private Sub TestExt()
        Dim Col As System.Windows.Media.Color
        Col = System.Windows.Media.Color.ToColor(100)'<-- Error
        Col.ToColor(100)'<-- Error
    End Sub
End Class 
```

当我使用此代码时，我收到此异常错误 1 ​​'ToColor' 不是 'System.Windows.Media.Color' 的成员。C:...\ColorExtension.vb

请任何建议如何开发像这个颜色扩展一这样的扩展功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:08:19.660

1.  扩展方法可以在类的对象上触发，而不是类本身。
2.  您的扩展方法是在`UInteger`class 上设置的，而不是在`Color`. 您扩展的类型是第一个方法参数的类型。
3.  您不能像您尝试那样将新方法添加到可能会被触发的类中。

您可以通过两种方式使用您的扩展方法：

1.  标准方法调用：`ColorExtension.ToColor(100)`
2.  使用扩展方法语法：`100.ToColor()`

# image-processing - 梯度压缩直方图 (CHoG)

> ID：13527566
> 
> 赞同：1
> 
> 时间：2012-11-23T10:51:23.707
> 
> 标签：image-processing, opencv, computer-vision, feature-extraction

我试图从斯坦福移动视觉搜索出版物中了解低比特率描述符压缩梯度直方图 (CHoG) 的实现。OpenCV 中是否有任何可用的开源代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T08:00:54.790

实际上，我联系了 CHoG 的作者，他们说这是受版权保护的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T09:35:49.477

我认为 OpenCV 没有[Compressed HOG](http://www.stanford.edu/~dmchen/mvs.html)的实现。然而，OpenCV 确实提供了[Dalal-Triggs 2005 论文](http://lear.inrialpes.fr/people/triggs/pubs/Dalal-cvpr05.pdf)中的传统 HOG 实现。

以下是使用 OpenCV 的方法`HOGDescriptor`，使用 Dalal-Triggs 论文中的默认参数：

```
cv::HOGDescriptor d();
vector<float> descriptorsValues; //this is the useful output
vector<cv::Point> locations;
d.compute(img, descriptorsValues, cv::Size(0,0), cv::Size(0,0), locations); 
```

如果要自定义 HOG 设置，可以使用带有`HOGDescriptor`自定义参数的构造函数：

```
cv::HOGDescriptor d(win_size, block_size, block_stride, cell_size, nOri, 1, -1, cv::HOGDescriptor::L2Hys, 0.2, gamma_corr, nLevels); 
```

OpenCV中还有一个[GPU 版本](http://docs.opencv.org/modules/gpu/doc/object_detection.html#gpu-hogdescriptor)`HOGDescriptor`。

# c++ - c ++访问地图中数组的元素

> ID：13527568
> 
> 赞同：8
> 
> 时间：2012-11-23T10:51:28.483
> 
> 标签：c++, arrays, map

> **可能重复：**
> [使用数组作为映射值：看不到错误](https://stackoverflow.com/questions/2582529/using-array-as-map-value-cant-see-the-error)

假设我有以下数据结构：

```
std::map<size_t, double[2] > trace; 
```

如何使用 operator[] 访问其元素？

基本上我想做类似的事情：

```
trace[0][0] = 10.0;
trace[0][1] = 11.0; 
```

在编译这些代码行时，我收到以下错误：

```
/usr/include/c++/4.6/bits/stl_map.h:453:11: error: conversion from ‘int’ to non-scalar type ‘std::map<long unsigned int, double [2]>::mapped_type {aka double [2]}’ requested 
```

评论？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T11:18:11.147

映射的值类型必须是默认可构造的，使用表达式`value_type()`，以便通过 访问它们`[]`。由于某些神秘的原因，数组类型不是 C++11 5.3.2/2 中指定的（我强调）：

> **表达式 T()，其中 T是非数组**完整对象类型的简单类型说明符或类型名称说明符...创建指定类型的纯右值，它是值初始化的

尝试对数组进行值初始化时，编译器会给出奇怪的错误；以下给出了相同的错误：

```
typedef double array[2];
array(); 
```

我建议使用类类型而不是`double[2]`: `std::array<double,2>`、`std::pair<double,double>`或`struct`包含两个双精度的 a。这种类型是可复制的，不会立即衰减为指针（丢失大小的编译时知识），并且通常比内置数组类型更容易处理。

如果你被一个不提供的旧库所困扰`std::array`，那么你可以使用非常相似的[Boost.Array](http://www.boost.org/doc/libs/release/doc/html/array.html)，或者编写你自己的简单类模板来包装一个数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T11:20:55.520

您可以包装一个数组：

```
template<typename T, unsigned int n>
struct ArrayWrapper
{
    T v[n];
    T& operator[](unsigned int i) { return v[i]; } // You can also check for out-of-bounds errors
    const T& operator[](unsigned int i) const { return v[i]; } // You can also check for out-of-bounds errors
};
#include <map>
#include <iostream>
int main()
{
    typedef std::map<size_t, ArrayWrapper<double,2> > Map;
    Map trace;
    trace[1][0] = 42;
    for(Map::const_iterator it = trace.begin(); it != trace.end(); ++it)
        std::cout << "( " << (*it).first
            << ", " << (*it).second[0]
            << ", " << (*it).second[1]
            << ")\n";
} 
```

[活生生的例子](http://ideone.com/JpGQFO)。否则，如果你有 C++11，你应该使用`std::array`; 如果没有，并且您有 Boost，则可以使用 Boost.Array。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T11:25:07.103

您的代码编译到：

```
std::map<size_t, double[2]> trace; 
```

因为`double[2]`是有效类型。您可以声明具有任何有效类型的模板类对象。例如：

```
template<typename T>
struct X {
  // T t; // this will complain for sure
  void foo () { T t; } // this won't complain unless invoked !!
};
X<void> x; 
```

将编译没有任何问题。
如果你调用`x.foo()`，编译器会抱怨它。

在 的情况下也会发生同样的事情`std::map`。当您调用诸如实际使用值类型的函数`map::insert()`时，编译器将开始抱怨不可复制（*例外*：我见过一个旧的 g++3.x 版本，其中数组是可分配和可复制的）。`map::operator []``double[2]``double[2]`

 *您可以将数组封装到一个结构中。

```
struct D { double d[2]; }; 
```

如果您想避免使用原始数组，那么`std::array`如评论和其他答案中所述，这是一个不错的选择。*

# jquery - 从 Ul 主干中移除 li

> ID：13527569
> 
> 赞同：1
> 
> 时间：2012-11-23T10:51:29.440
> 
> 标签：jquery, backbone.js, underscore.js

我正在尝试构建一个非常简单的 ul，其中您有一个输入框和添加按钮，单击添加按钮时，输入的文本将附加到 ul

这是我的代码：

HTML：

```
<body>
<input type="text" id="name">
<button id="add">Add</button>
<ul id="mylist"></ul> 
```

JS：

```
$(function(){

var myCollection = Backbone.Collection.extend();

var myView = Backbone.View.extend({

    el:$('body'),

    tagName:'li',

    initialize : function(e){
        this.collection.bind("add",this.render,this);
    },

    events:{
        'click #add' : 'addfoo',
        'click .button':'removefoo'
    },

    addfoo:function(){
       var myname= $('#name').val();
       $('#name').val('');
       console.log('name entered: '+myname);
       this.collection.add({name:myname});
    },

    removefoo:function(){
             //need the code here 
    },

    render:function(){

        $('#mylist').empty();
        this.collection.each(function(model){
            $('#mylist').append('<li>'+model.get('name') + "<button class='button'>"+"delete"+"</button></li>");
        });

    }

});
var view = new myView({collection: new myCollection()});
    }); 
```

我的添加功能正在工作，但是当我单击删除按钮时，应该删除集合中的哪个模型，我卡在那里，请帮帮我。只需要代码，在 removefoo 函数中从集合中删除什么。

换句话说，单击按钮时如何获取要删除的模型

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T11:49:05.553

我认为您需要一种更加模块化的 Backbone 方法，让我解释一下。

Backbone 是一种组织代码的方式。只有一个 Backbone 视图就可以完成所有工作，并没有太大变化。

相反，请尝试查看您实际需要的视图：

*   主视图
*   列表显示
*   列表项视图

`MainView`可能看起来像这样：

```
var MainView = Backbone.View.extend({

    el: 'body',

    initialize : function(options) {
       this.collection = new Backbone.Collection.extend({ url: '/items' });
    },

    events:{
    },

    render:function(){
        var listView = new ListView({ el: this.$("#myList") });
        listView.render();

        this.collection.fetch();

        return this;
    }
}); 
```

`ListView`

```
var ListView = Backbone.View.extend({

    tagName: 'ul',

    initialize : function(options) {
        _.bindAll(this, "render");

        this.collection.on("add", this.appendListItem, this);
    },

    events:{
    },

    render: function() {
        this.collection.each(this.appendListItem, this);

        return this;
    },

    appendListItem: function (model, collection, options) {
        var listItem = new ListItemView({ model: model});
        this.$el.append(listItem.render().el);
    }
}); 
```

`ListItemView`

```
var ListItemView = Backbone.View.extend({

    tagName: 'li',

    initialize : function(options) {
        _.bindAll(this, "render");

        this.model.on("destroy", this.remove, this);
    },

    events:{
        "click button": "delete"
    },

    render:function(){
        this.$el.text(this.model.get('name'));
        this.$el.append("<button class='button'>Delete</button>");

        return this;
    },

    delete: function (event) {
        this.model.destroy();
    }
}); 
```

启动主视图：`var view = new MainView().render();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:28:22.583

当您在 UI 上渲染每个模型时，必须为每个[li](https://developer.mozilla.org/en-US/docs/HTML/Element/li)元素分配一个唯一的 id，以了解哪个元素被删除。

代替

```
$('#mylist').append('<li>'+model.get('name') + "<button class='button'>"+"delete"+"</button></li>"); 
```

你最好使用模板。您可以使用下划线的[模板](http://underscorejs.org/#template) ，这将更容易分配 id 和动态创建 lis。

要删除模型：

```
removefoo:function(evt){
        var target = evt.target;
        //Parse the target id to get the model id and then delete it.
    } 
```

请参阅[https://stackoverflow.com/questions/8782704/backbone-js-tutorial](https://stackoverflow.com/questions/8782704/backbone-js-tutorial)以了解骨干网的所有组件如何组合在一起。

# jquery - jQuery Tipsy 的回调隐藏/显示

> ID：13527580
> 
> 赞同：3
> 
> 时间：2012-11-23T10:52:11.947
> 
> 标签：jquery, callback, tipsy

我正在尝试在醉酒打开/关闭后设置回调函数。

```
function addText()
{
    $('#text').html('Tipsy is now open !');
}

$('.tipsy').tipsy(addText); 
```

我希望 addText() 在醉醺醺的打开后运行，但事实并非如此。

有没有一种简单的方法可以在不修改核心代码的情况下做到这一点？

这是我的 jsfiddle：http: [//jsfiddle.net/Tqcgr/1/](http://jsfiddle.net/Tqcgr/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:44:41.207

所以，让我们看一下文档： http: [//onehackoranother.com/projects/jquery/tipsy/](http://onehackoranother.com/projects/jquery/tipsy/)

Tipsy 不支持回调，但支持参数的回调函数：例如标题。所以，我们可以传递我们的函数 ass 参数。这个函数会做我们想做的事，然后简单地返回原始标题，就好像我们没有使用这个自定义回调函数一样

```
$(function () {
  function addText(el)
  {
    $('#text').html('Tipsy is now open !');
    return $(el).attr('original-title');
  }

  $('.tipsy').tipsy({
    gravity: 'w',
    title: function() {
      return addText(this);
    }
  });
}); 
```

示例可以在这里看到：http: [//jsfiddle.net/Rf8qY/](http://jsfiddle.net/Rf8qY/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T12:58:54.740

添加 onShow 和 onHide 回调很容易。看看这个：http: [//jsfiddle.net/Tqcgr/2/](http://jsfiddle.net/Tqcgr/2/)

**但是**您需要修改显示和隐藏方法。

```
//show
var callback = this.options.onShow,
    element = this.$element[0],
    runCallback = function() {
        if(callback){
            callback.call(element);   
        }
    };

//invoke
if (this.options.fade) {
    $tip.stop().css({opacity: 0, display: 'block', visibility: 'visible'}).animate({opacity: this.options.opacity}, runCallback);
} else {
    $tip.css({visibility: 'visible', opacity: this.options.opacity});
    runCallback();
}

//hide
var callback = this.options.onHide,
    element = this.$element[0],
    runCallback = function() {
        if(callback){
            callback.call(element);
        }                        
    };
    //invoke
if (this.options.fade) {
    this.tip().stop().fadeOut(function() { $(this).remove(); runCallback()});
} else {
    this.tip().remove();
    runCallback();
} 
```

# ios - 未调用 RestKit didReceiveData

> ID：13527586
> 
> 赞同：0
> 
> 时间：2012-11-23T10:52:40.437
> 
> 标签：ios, delegates, restkit

我正在做类似的事情来下载文件。一切正常，而不是我想用来制作下载进度条的委托 didReceiveData：

```
 NSURL *URL = [NSURL URLWithString:path];
    RKRequest *downloadRequest = [RKRequest requestWithURL:URL];

    downloadRequest.delegate = self;
    downloadRequest.method = RKRequestMethodGET;
    [downloadRequest sendSynchronously]; 
```

之后，调用以下委托：

```
- (void)request:(RKRequest *)request didLoadResponse:(RKResponse *)response
{
    NSLog(@"TEST didLoadResponse");
} 
```

但委托 didReceiveData 从未被调用：

```
- (void)request:(RKRequest *)request didReceiveData:(NSInteger)bytesReceived totalBytesReceived:(NSInteger)totalBytesReceived totalBytesExpectedToReceive:(NSInteger)totalBytesExpectedToReceive
{
    NSLog(@"TEST didReceiveData");
} 
```

任何人的想法？我真的尝试了很多，我只是没有发现任何错误。可能它与我如何创建我的`RKRequest`？

编辑：如果我改变它，它的工作原理：

```
NSURL *URL = [NSURL URLWithString:path];

RKClient *client = [[RKClient alloc] initWithBaseURL:URL];
RKRequest *downloadRequest = [client get:@"" delegate:self];
[downloadRequest sendSynchronously]; 
```

奇怪的？

EDIT2：使用第二种解决方案，我遇到了一些线程问题，所以我想问题是我发送和同步请求会锁定线程，所以 didReceiveData 委托不会回来？

# php - JQuery拖放排序列表

> ID：13527589
> 
> 赞同：0
> 
> 时间：2012-11-23T10:52:50.543
> 
> 标签：php, jquery, ajax, wordpress, jquery-ui

所以我有点问题。我在我的 WordPress 插件中创建了一个拖放列表，它应该允许用户订购类别，在大多数情况下我有这个工作......

该表是从 MySQL 数据库中填充的：

```
$results = $wpdb->get_results($sql);

    foreach($results as $result)
    {
    ?>
     <tr id="list_item_<?php echo $result->priority_order; ?>" class="list_item">
                <td>
                    <?php echo $result->name; ?>
                </td>
                <td>
                    <?php echo $result->priority_order; ?>
                </td>
            </tr>
    <?php
    } 
```

我正在使用“jquery-ui-sortable”以允许表格可排序。

这是我的 JQuery，用于使列表可拖动并更新列表：

```
$('.list').sortable(
{
    items: '.list_item',
    opacity: 0.6,
    cursor: 'move',
    axis: 'y',
    update: function()
    {
        var order = $(this).sortable('serialize') + '&action=update_order';
        $.post(ajaxurl, order, function(response)
        {
            //alert(response);
        });
    }
}); 
```

* * *

这是用于使用新订单更新数据库的 PHP：

```
function save_order()
{
  global $wpdb;

  $table_name = $wpdb->prefix . "categories";
  $sql = "SELECT * FROM ".$table_name." ORDER BY priority_order ASC";

  $results = $wpdb->get_results($sql);
  $results = parseObjectToArray($results);

  $new_order = $_POST["list_item"];

  $counter = 0;
  foreach($new_order as $v)
  {
    if(isset($results[$v]["priority_order"]))
    {
        $update_sql = "UPDATE ".$table_name." SET priority_order='".$counter."' WHERE category_id='".$results[$v]["category_id"]."'";
        $wpdb->query($update_sql);

        $counter++;
    }
  }
  die();
}
add_action('wp_ajax_update_order','save_order');

// Converts StdObject to regular array
function parseObjectToArray($object)
{
$array = array();

  foreach($object as $o)
  {
    if (is_object($o))
    {
      $array[] = get_object_vars($o);
    }
  }
  return $array;
} 
```

* * *

我的问题是，虽然列表第一次完美更新，但假设页面尚未手动刷新，则发送的下一个序列化数组现在更新不正确。这是因为新列表和数据库中新更新的列表不再同步。

这是因为我使用数组索引来匹配需要更新的内容，但是在初始更改之后，新的列表索引和来自数组的索引不再匹配......

有人对我如何解决这个问题有任何想法吗？我环顾四周，发现的大部分代码都与我的相似，我看不出任何可能导致我崩溃的明显差异。每次更新后我需要刷新页面吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:48:43.877

我自己又找到了答案，哈哈……

我非常关注 pirority_order 字段，而是发送每个类别 ID 并使用 SQL 来 ORDER BY priority_id，然后只需使用一个计数器，我就可以分配一个新订单。

```
global $wpdb;

$table_name = $wpdb->prefix . "categories";
$sql = "SELECT * FROM ".$table_name." ORDER BY priority_order ASC";

$results = $wpdb->get_results($sql);
$results = parseObjectToArray($results);

$new_order = $_POST["ebs_list_item"];

$counter = 0;
foreach($new_order as $v)
{
    $update_sql = "UPDATE ".$table_name." SET priority_order=".$counter." WHERE id=".$v;
    $wpdb->query($update_sql);

    $counter++;
}
die(); 
```

* * *

```
<tr id="list_item_<?php echo $result->id; ?>" class="list_item">
    <td>
        <?php echo $result->name; ?>
    </td>
    <td>
        <?php echo $result->priority_order; ?>
    </td>
</tr> 
```

# zend-framework - 使用 composer.json 在 Windows 7 上安装 ZF2 模块

> ID：13527591
> 
> 赞同：1
> 
> 时间：2012-11-23T10:53:04.677
> 
> 标签：zend-framework, zend-framework2, composer-php

我刚刚开始探索 zf2 并尝试安装模块。已经为 ZfcAdmin 和 ZfcUser 下载了 zip 并手动添加了它们，但没有运气。我认为它可以通过使用 composer.phar 来安装，但是我如何让骨架应用程序完美运行。

我知道 php composer.phar 自我更新/安装，但如何编写 composer.json 是我的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:21:51.813

`composer.json`您使用您选择的文本编辑器打开文件。然后您将能够看到 json 格式的数据，这些数据将被传递给`composer.phar`

如果您希望添加新模块，您将看到该`require: {}`块，您只需向其中添加您希望包含的命名空间/模块。例如，将您扩展`composer.json`到这样的内容：

```
"minimum-stability": "alpha",
"require": {
    "php": ">=5.3.3",
    "zendframework/zendframework": "2.*",
    "zendframework/zend-developer-tools": "dev-master",
    "doctrine/doctrine-orm-module": "0.*"
} 
```

看到这一点，我安装了Git-Repositories 和`zend-developer-tools`从-repository安装。`zendframework``zendframework``doctrine-orm-module``doctrine`

一个小问题：一些存储库/模块正在大量开发中，还没有稳定的版本。就我个人而言，我使用附加参数运行`"minimum-stability": "alpha",`以告诉作曲家包括所有 alpha 存储库以供下载。

如果您只需要一个 alpha 版本，您很可能需要重新编写`composer.json`几次。

最后但并非最不重要的一点是，`php composer.phar update`它将起到作用，并且您将始终与存储库保持同步。

**Windows 用户的一些附加说明**

*   有时命令行中可能缺少写入权限。您可以通过以管理员权限运行命令行来更改此设置。
*   如果找不到 PHP 命令，您可能需要将 PHP 可执行文件的 PATH 添加到您的环境变量中`PATH`
*   我自己写了一篇详细的博客文章，介绍如何通过命令行使用 git 为 windows 7 保持 ZF2 运行，到目前为止，这已经涵盖了大多数问题，您可能想[查看我的博客文章](http://samminds.com/2012/07/zend-framework-2-installation-on-xampp-for-windows/)

希望这能让你跑步；）

# ios - UICollectionView 很慢

> ID：13527593
> 
> 赞同：1
> 
> 时间：2012-11-23T10:53:13.290
> 
> 标签：ios, uicollectionview

我正在开发一个照片库，为此，我决定使用基本上在 iOS6 设备上实现 UICollectionView的 PSTCollectionView ( [https://github.com/steipete/PSTCollectionView )，并为其他 iOS 使用自定义视图。](https://github.com/steipete/PSTCollectionView)我的设备正在运行 iOS6。

我使用 MKNetworkKit 从我的服务器加载图像并使用缓存响应来设置图像。

问题是，一旦我以最低速度滚动，滚动就会变得非常迟钝（我的猜测是由于图像设置）。看起来，出队的单元格几乎大部分时间不在正确的 indexPath 上，因此每次都重新创建图像。有没有办法让单元格为良好的索引路径出列并从内存（或缓存）重新加载而不是重置整个图像？

以下是一些代码：

Grid（即UICollectionView）分配

```
PSUICollectionViewFlowLayout *layout = [[PSUICollectionViewFlowLayout alloc] init];
_gridView = [[PSUICollectionView alloc] initWithFrame:[self.view bounds] collectionViewLayout:layout];
_gridView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
_gridView.delegate = self;
_gridView.dataSource = self;
[_gridView registerClass:[ImageGridCell class] forCellWithReuseIdentifier:CollectionViewCellIdentifier];
[_gridView setAlwaysBounceVertical:YES]; 
```

cellForRowAtIndexPath ：

```
ImageGridCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:CollectionViewCellIdentifier forIndexPath:indexPath];
id photoId = [self.photoIds objectAtIndex:indexPath.row];
[cell setPhotoId:photoId];
return cell; 
```

setPhotoId 方法：

```
if (![_photoId isEqualToNumber:photoId])
{
    NSLog(@"set Photo ID %@ for old id %@", photoId, _photoId);
    _photoId = photoId;
    self.image.image = nil;
    __block BOOL imageAlreadySetFromCache = NO;
    self.operation = [[BDRWebService manager] downloadImageWithId:_photoId.stringValue
                                                      isThumbnail:YES
                                                completionHandler:^(UIImage *fetchedImage, NSURL *url, BOOL isInCache) {
                                                    if (isInCache && !imageAlreadySetFromCache)
                                                    {
                                                        self.image.image = fetchedImage;
                                                        NSLog(@"image ready %@ (from cache %d) %@", _photoId, isInCache, NSStringFromCGSize(self.image.image.size));
                                                        imageAlreadySetFromCache = YES;
                                                    }
                                                    else if (!imageAlreadySetFromCache)
                                                    {
                                                        NSLog(@"image ready %@ (from cache %d) %@", _photoId, isInCache, NSStringFromCGSize(self.image.image.size));
                                                        self.image.image = fetchedImage;
                                                    }
                                                } errorHandler:^(MKNetworkOperation *completedOperation, NSError *error) {
                                                }];

}
else
{
    NSLog(@"same cell and image...");
} 
```

这是日志：

```
2012-11-23 11:39:25.431 cellForRow 12
2012-11-23 11:39:25.433 set Photo ID 269 for old id (null)
2012-11-23 11:39:25.436 cellForRow 13
2012-11-23 11:39:25.437 set Photo ID 268 for old id (null)
2012-11-23 11:39:25.440 cellForRow 14
2012-11-23 11:39:25.441 set Photo ID 267 for old id (null)
2012-11-23 11:39:25.463 cellForRow 15
2012-11-23 11:39:25.468 set Photo ID 266 for old id 280
2012-11-23 11:39:25.480 cellForRow 16
2012-11-23 11:39:25.488 set Photo ID 265 for old id 281
2012-11-23 11:39:25.490 cellForRow 17
2012-11-23 11:39:25.504 set Photo ID 264 for old id 279
2012-11-23 11:39:25.511 cellForRow 18
2012-11-23 11:39:25.566 set Photo ID 263 for old id 276
2012-11-23 11:39:25.570 cellForRow 19
2012-11-23 11:39:25.580 set Photo ID 262 for old id 277
2012-11-23 11:39:25.583 cellForRow 20
2012-11-23 11:39:25.591 set Photo ID 261 for old id 278
2012-11-23 11:39:25.654 cellForRow 21
2012-11-23 11:39:25.659 set Photo ID 260 for old id 273
2012-11-23 11:39:25.661 cellForRow 22
2012-11-23 11:39:25.665 set Photo ID 259 for old id 274
2012-11-23 11:39:25.667 cellForRow 23
2012-11-23 11:39:25.671 set Photo ID 258 for old id 275
2012-11-23 11:39:25.690 cellForRow 24
2012-11-23 11:39:25.693 set Photo ID 257 for old id 270
2012-11-23 11:39:25.696 cellForRow 25
2012-11-23 11:39:25.700 set Photo ID 256 for old id 271
2012-11-23 11:39:25.703 cellForRow 26
2012-11-23 11:39:25.707 set Photo ID 255 for old id 272
2012-11-23 11:39:25.733 cellForRow 27
2012-11-23 11:39:25.737 set Photo ID 254 for old id 269
2012-11-23 11:39:25.740 cellForRow 28
2012-11-23 11:39:25.747 set Photo ID 253 for old id 267
2012-11-23 11:39:25.758 cellForRow 29
2012-11-23 11:39:25.776 set Photo ID 252 for old id 268
2012-11-23 11:39:25.872 cellForRow 30
2012-11-23 11:39:25.886 set Photo ID 251 for old id 264
2012-11-23 11:39:25.890 cellForRow 31
2012-11-23 11:39:25.894 set Photo ID 250 for old id 265
2012-11-23 11:39:25.897 cellForRow 32
2012-11-23 11:39:25.906 set Photo ID 249 for old id 266 
```

它永远都是这样（也许这是适当的行为。毕竟，这就是出队的意义所在吗？），但我可以让滚动更快。

我可以使用各种技巧（在 0.2 秒后使用计时器加载图像并在 prepareForReuse 方法中使其无效，取消操作（我尝试过，目前没有更好的方法）），但这不会很好。

如何使图像“粘”到单元格上以防止`self.image.image = fetchedImage`每次都进行新的分配？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:07:10.280

**您需要使用`PSCollectionViewFlowLayout_`而不是`PSUICollectionViewFlowLayout`，`PSCollectionViewController_`而不是`PSUICollectionViewController`等。**

我认为这是因为您使用`PSTCollecitonView`控制。如果您需要对 iOS 5.1 PSTCollectionView 的旧版支持，但在 iOS 6 上您需要使用 UICollectionView 本机。在这种情况下，可能是 iOS 5.* 上的 PSTCollectionView 会很慢。但是在 ios 6.0 上，一切都应该没问题。

来自官方文档：

> 你想使用 UICollectionView，但仍需要支持旧版本的 iOS？那么你会喜欢这个项目的。最初我是为 PSPDFKit 编写的，我的 iOS PDF 框架支持文本选择和注释，但是这个项目对于其他人来说似乎太有用了，不能留给我自己 :)
> 
> 如果您想在 iOS4.3/5.x 上使用 PSTCollectionView，在 iOS6 上使用 UICollectionView，请使用 PSUICollectionView（基本上在任何 UICollectionView* 类上添加 PS 以获得对旧 iOS 版本的自动支持）如果您总是想使用 PSTCollectionView，请使用 PSTCollectionView作为类名。（用 PST 替换 UI）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:02:11.170

I think the block will execute in another thread. So **all UI-related operations should be carried out on main thread**

```
dispatch_async(dispatch_get_main_queue(), ^{

      if (isInCache && !imageAlreadySetFromCache)
          {
            self.image.image = fetchedImage;
            NSLog(@"image ready %@ (from cache %d) %@", _photoId, isInCache, NSStringFromCGSize(self.image.image.size));
            imageAlreadySetFromCache = YES;
          }
         else if (!imageAlreadySetFromCache)
         {
           NSLog(@"image ready %@ (from cache %d) %@", _photoId, isInCache, NSStringFromCGSize(self.image.image.size));
           self.image.image = fetchedImage;
         }

}); 
```

# php - 如何同时使用 mod_rewrite 和 Url 重定向

> ID：13527594
> 
> 赞同：1
> 
> 时间：2012-11-23T10:53:12.260
> 
> 标签：php, .htaccess

我有一个这样的网址

```
post_article.php?url=how-to-use-mod-rewrite 
```

我正在使用 mod_rewrite 来制作它

```
post/how-to-use-mod-rewrite 
```

我在 .htaccess 中使用的代码

```
RewriteEngine On
RewriteRule ^post/([^/]+)/?$ post_article.php?url=$1 [L] 
```

现在这两个网址都会给出相同的内容，这从 SEO 的角度来看并不好。 **我如何将所有这些旧 url 重定向到新 url**。

即 post_article.php?url=any-value 到 post/anyvalue

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:24:46.677

如果 SEO 是您唯一关心的问题，请使用[规范 URL](http://googlewebmastercentral.blogspot.fi/2009/02/specify-your-canonical.html)帮助搜索引擎理解重复内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:34:05.733

```
RewriteEngine On
Redirect ^post_article.php?url=.*$ post/$1
RewriteRule ^post/([^/]+)/?$ post_article.php?url=$1 [L] 
```

试试看。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-23T11:20:41.870

只需创建一个函数来重写文章中的所有链接，搜索引擎将永远无法找到旧的 url 方案。

# c - 指向数组的指针

> ID：13527600
> 
> 赞同：1
> 
> 时间：2012-11-23T10:53:35.190
> 
> 标签：c, arrays, pointers

我已经阅读了这些文章[http://eli.thegreenplace.net/2010/01/11/pointers-to-arrays-in-c/](http://eli.thegreenplace.net/2010/01/11/pointers-to-arrays-in-c/) [http://eli.thegreenplace.net/2010/04/06/pointers- vs-arrays-in-c-part-2d/](http://eli.thegreenplace.net/2010/04/06/pointers-vs-arrays-in-c-part-2d/)

我想进一步解释发生了什么。

```
int joe[] = {1, 2, 3, 4};

void test(int (*p)[4]) 
```

这是一个指向数组的指针，它不同于

```
void test(int *d); 
```

这将是指向传递的数组的第一个元素的指针，或者是另一个指针的副本。我可不可以做？

```
*p = joe //I guess not, I'm obtaining the array passed, and I'm trying to reassign it (which can't be done)
d = joe //I guess not, but I would like to know what would happen to d
*d = joe //Same as above
d = &joe //I'm giving to d the address of joe, what will it be? 
```

哪些是正确的，哪些是错误的，以及为什么。

在关于二维数组（实际上只是一维数组）的文章中，他写道：

```
void bar(int arr[2][3], int m, int n)
void bar(int arr[][3], int m, int n)
void bar(int (*arr)[3], int m, int n) 
```

都是正确的。

1）问题：

```
void bar(int arr[][3], int m, int n)
void bar(int arr*[3], int m, int n) 
```

是相同的？如果不是，它们之间有什么区别？

2）问题：

```
 void bar(int arr[][3], int m, int n)
 void bar(int (*arr)[3], int m, int n) 
```

它们之间有什么区别，为什么它们都有效？

我非常感谢详细解释背后发生的事情，我希望问题很清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T10:59:55.863

函数参数声明

```
void bar(int arr[]); /* this is a pointer to int */ 
```

相当于

```
void bar(int arr[5]); /* this is a pointer to int, compiler just ignores 5 */ 
```

相当于

```
void bar(int *arr); /* this is a pointer to int */ 
```

在所有情况下，都会将指向 int 的*指针*或*指向*int数组的指针提供给`bar()`. 特别注意*指针*。这意味着 inside `bar()`, `sizeof(arr)`will always be `sizeof(int*)`, never`sizeof(int[5])`或`sizeof(int[3])`例如。

其余的，包括多维数组，都遵循这个简单的规则。

问题1）

*   编译器会告诉你，这`void bar(int arr*[3], ...)`是无效的。
*   移到`*`前面会给出`void bar(int *arr[3], ...)`，它是一个数组，`int*`并转换为指向指针的指针：`int **arr`。
*   这与 不同`void bar(int arr[][3], ...)`，后者是指向 3 个整数数组的指针或指向第二维为 3 的多维数组的指针。

问题2）

*   这两者没有区别。两者都是指向 3 个整数数组的指针，如上面的问题 1 所示。

[来自google](http://www.google.de/search?q=interpret+c+declaration)的进一步阅读：解释c声明

*   [http://unixwiz.net/techtips/reading-cdecl.html](http://unixwiz.net/techtips/reading-cdecl.html)
*   [http://www.codeproject.com/Articles/7042/How-to-interpret-complex-CC-declarations](http://www.codeproject.com/Articles/7042/How-to-interpret-complex-C-C-declarations)
*   [http://msdn.microsoft.com/en-us/library/1x82y1z4%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/1x82y1z4%28v=vs.71%29.aspx)

最后一个建议：不要害羞并使用编译器。它会告诉您您的代码是否有效。

# c# - 使用 Data annotations 使用互斥验证在同一视图中验证模型中的相同属性

> ID：13527602
> 
> 赞同：1
> 
> 时间：2012-11-23T10:53:37.720
> 
> 标签：c#, asp.net-mvc, data-annotations

我有一个需要验证下拉列表的要求。在 Button1 上单击模型应验证未选择下拉菜单，在 Button2 上单击模型应验证下拉菜单已选择为有效值，并且如果该值是来自落下。

我的模型如下：

```
public class ApprovalInformation
{

    [DisplayName("Approval Decision")]
    public int? ApproveStatusID { get; set; }
    public string ApproveStatus { get; set; }
    public SelectList ApproveStatuses { get; set; }

    [DisplayName("Additional Information")]
    [RequiredIf("ApproveStatus", StringConstants.NotApproved, ErrorMessage = "You must specify the comments if not approved")]
    public string AdditionalInformation { get; set; }
} 
```

目前我有 2 种操作方法，我根据按钮名称的值调用它们。这是控制器代码：

```
public ActionResult SaveApproval(ApprovalInformation approveInfo,string submit)
    {
        if (submit == "Save For Later")
        {
            Business business = new Business();
            int selectedStatusID = approveInfo.ApproveStatusID??0;
            if ( selectedStatusID!= 0)
            {
                ModelState.AddModelError("ApproveStatusID", "You may not set the Approval Decision before saving a service request for later.  Please reset the Approval Decision to blank");
            }
            if (ModelState.IsValid)
            {
              return RedirectToActionPermanent("EditApproval");
            }

            return View("EditApproval", approveInfo);
        }
        else
        {
            TempData["approverInfo"] = approveInfo;
            return RedirectToActionPermanent("FinishApproval");
        }
    } 
```

我在插入验证时遇到问题，具体取决于单击的按钮。由于在不同的按钮上单击相同的属性应该以两种不同的方式进行验证。如何根据不同的操作在同一模型上在运行时抑制验证或诱导验证。对此的任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:04:14.457

我相信这是在您的视图模型上实现[IValidatableObject 接口的好情况。](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.ivalidatableobject.validate.aspx)`ApprovalInformation`你可以通过intent to `submit`or `save for later`in the `ValidationContext`dictionary，以获得你需要的重用。

您也可以在此处放置“如果未设置 ApprovalStatus 则必须设置附加信息”的[条件逻辑。](https://stackoverflow.com/questions/2417113/asp-net-mvc-conditional-validation)

```
public class ApprovalInformation : IValidatableObject
{
    ... // Properties

    IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
       if (validationContext.ContainsKey("submit"))
       {
          if (ApproveStatusID != 0)
          {
              yield return new ValidationResult("You may not set the Approval Decision before saving a service request for later.  Please reset the Approval Decision to blank", 
                                                 new {"ApproveStatusID"});
          }
       }
    }
} 
```

# php - 使用 phpQuery 将 HTML ul/li 树转换为 PHP 数组

> ID：13527604
> 
> 赞同：0
> 
> 时间：2012-11-23T10:53:46.803
> 
> 标签：php, mysql, phpquery

我想使用[phpQuery](http://code.google.com/p/phpquery/)来解析 DOM 元素。这是我想使用 PHP 递归函数导入 MySQL db[的 HTML 树。](http://dropship.mondialdeal.com/tmp/ul-tree.html)

将树存储为类别的 MySQL 数据库（带有子、子、..、类别）

```
create table categories
(
    categorie_id int(11) primary key auto_increment,
    categorie_id_parent int(11) not null,
    categorie_nom varchar(255) not null
) 
```

这是我的伪代码：

```
function getCategories( $pq_object, $last_generated_mysql_id )
{
    // for every element of $pq_object on same lvl
    {
        // insert into mysql $pq_object->a->name
        // and with categorie_id_parent as $last_generated_mysql_id if has parent

        // going deeper for every child
        getCategories( $pq_object->children(), mysql_insert_id() );
    } 
} 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:58:39.787

我实际上做到了：

```
function getCats( $categorie_id_parent, $cats )
{
    echo "<ul>";

    foreach ( $cats as $ch )
    {
        $categorie_nom = mysql_real_escape_string( pq($ch)->find("a:first")->text() );

        // Inserting categories
        $query_categorie = "SELECT categorie_id FROM categories WHERE categorie_id_parent='".$categorie_id_parent."' AND categorie_nom LIKE '".$categorie_nom."' LIMIT 1";
        $result_categorie = mysql_query( $query_categorie ) or die ( mysql_error() );

        $categorie_id = 0;

        if ( mysql_num_rows( $result_categorie ) )
        {
            $row_categorie = mysql_fetch_assoc( $result_categorie );

            $categorie_id = $row_categorie['categorie_id'];
        }
        else
        {
            $query_insert = "INSERT INTO categories (categorie_id_parent, categorie_nom) VALUES ('".$categorie_id_parent."', '".$categorie_nom."')";
            mysql_query( $query_insert ) or die ( mysql_error() );

            $categorie_id = mysql_insert_id();
        }

        // if we have any subcategories
        if ( pq($ch)->children()->children()->length )
        {
            echo "<li>".pq($ch)->find("a:first")->text()."</li>";

            // going deeper
            getCats( $categorie_id, pq($ch)->children()->children() );
        }
        // If no subcategories, show the last link name and href
        else
            echo "<li>".pq($ch)->find('a:first')->text()." ".pq($ch)->find('a:first')->attr('href')."</li>";
    }

    echo "</ul>";
} 
```

# html - 为什么我的 html 表从我的 div 中消失了？

> ID：13527607
> 
> 赞同：0
> 
> 时间：2012-11-23T10:53:58.597
> 
> 标签：html, html-table

我在 div 中有一个 html 表格，但表格超出了 div 的宽度，这就是我正在做的事情：

```
 <div style="width: 920px">
                            <table style="width: 100%;">
                                <tr>
                                    <td>
                                        &nbsp;
                                    </td>
                                    <td>
                                        &nbsp;
                                    </td>
                                    <td>
                                        &nbsp;
                                    </td>
                                </tr>
                            </table>
                        </div> 
```

这是行不通的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T11:07:57.843

你有一个空的布局，所以没有什么可看的。如果添加高度，您可以看到它的外观：

```
<div style="width: 920px;border:1px solid red;height:500px;">
                            <table style="width: 100%;" border="1">
                                <tr>
                                    <td>
                                        &nbsp;
                                    </td>
                                    <td>
                                        &nbsp;
                                    </td>
                                    <td>
                                        &nbsp;
                                    </td>
                                </tr>
                            </table>
                        </div>​ 
```

[**例子**](http://jsfiddle.net/wEuRz/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T10:57:50.763

尝试向表格中添加一些属性以确保没有单元格间距：

```
<table style="width: 100%;" border="0" cellspacing="0" cellpadding="0"> 
```

# c# - NuGet Package'n'Publish 项目包括 xml 注释

> ID：13527608
> 
> 赞同：0
> 
> 时间：2012-11-23T10:54:02.367
> 
> 标签：c#, nuget, nuget-package

我的解决方案中有这个结构：

```
Solution
    project: class library
    project: NuGet.Package'n'Publish 
```

我需要在 NuGet 包中包含类库项目生成的 xml 注释文件。我已经看到其他答案建议`<file src="bin\*.xml" target="lib" />`在 nuspec 文件中添加或一些变体，但我无法让它工作。

类库确实会生成一个 xml 文件，但它不包含在包中。

除了尝试标签的随机变体之外，我什至不知道从哪里开始进行故障排除`<file...`，这到目前为止还没有奏效。

没有错误消息 - 它只是不包括在内。

NuGet.Package'n'Publish 项目的 nuspec 模板中的默认部分如下所示：

```
<files>
  <file src="lib\**\*.dll" target="lib" />
  <file src="lib\**\*.pdb" target="lib" />
  <file src="tools\**\*.*" target="tools" />
  <file src="content\**\*.*" target="content" exclude="content\Content.Readme.txt" />
</files> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T03:28:28.713

不确定 NugetPackageNPublish 扩展是如何工作的。但是尝试使用 Nuget.exe Pack 命令打包它对我来说效果很好。可以在此处找到有关 Nuget 命令行的更多详细信息 @ [http://docs.nuget.org/docs/reference/command-line-reference](http://docs.nuget.org/docs/reference/command-line-reference)

是否存在 Nuget.exe 包无法满足您的目的的情况？

# c# - 多列的 RDLC 报告问题

> ID：13527609
> 
> 赞同：0
> 
> 时间：2012-11-23T10:54:10.203
> 
> 标签：c#, sql, rdlc, subreport

请检查下表。

表格1

```
Key    Title     Type
----------------------
A1     Test1       A 
A2     Test2       A 
B1     Test1       B
B2     Test2       B
B3     Test3       B
C1     Test1       C
C2     Test2       C 
```

表2

```
Id   Name    Address      A        B            C 
---------------------------------------------------
 1   Soham   Add1         A1       B1,B3        C2
 2   Varun   Add2         A1,A2    B1,B2,B4     C1 
```

我的 rdlc 报告看起来像 Id = 1

```
Name : Soham
Address : Add1
Type : A
         A1  - Yes
         A2  - No

Type : B 
         B1 -  Yes
         B2 -  No
         B3 -  Yes
         B4 -  No

Type : C
         C1 -  No
         C2 -  Yes 
```

和报告看起来像 Id = 2

```
Name : Varun
Address : Add2
Type : A
         A1  - Yes
         A2  - Yes

Type : B 
         B1 -  Yes
         B2 -  Yes
         B3 -  No
         B4 -  Yes

Type : C
         C1 -  Yes
         C2 -  No 
```

如果我不使用子报告，我怎么能在单个查询中实现。或者我如何使用子报告来实现这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:38:56.383

如果您使用的是 MySQL，那么您可以使用“FIND_IN_SET()”函数并像这样应用...它将通过简单的数据分组以正确的顺序为您的 RDLC 返回一个结果集...

```
select
      PreQuery.*
   from
      ( select
              t2.id,
              t2.`name`,
              t2.Address,
              t1.`type`,
              t1.`key`,
              case when FIND_IN_SET(t1.`key`, t2.A )  > 0 then 'yes' else 'no ' end HasKey
           from
              table1 t1,
              table2 t2
           where
              t1.`type` = 'A'
        UNION    
        select
              t2.id,
              t2.`name`,
              t2.Address,
              t1.`type`,
              t1.`key`,
              case when FIND_IN_SET(t1.`key`, t2.B )  > 0 then 'yes' else 'no ' end HasKey
           from
              table1 t1,
              table2 t2
           where
              t1.`type` = 'B'
        UNION    
        select
              t2.id,
              t2.`name`,
              t2.Address,
              t1.`type`,
              t1.`key`,
              case when FIND_IN_SET(t1.`key`, t2.C )  > 0 then 'yes' else 'no ' end HasKey
           from
              table1 t1,
              table2 t2
           where
              t1.`type` = 'C' ) PreQuery
   order by
      PreQuery.`name`,
      PreQuery.`type`,
      PreQuery.`key` 
```

如果您使用的是 SQL-Server，请将函数调用从 FIND_IN_SET() 更改为 CHARINDEX()

现在，即使上面的查询会得到你想要的，你所拥有的是非常糟糕的数据库设计。您实际上应该有另一个表，其中包含用户的密钥以及他们所拥有的......例如......

```
UserHasTable
userHasID   int auto-increment
userid      int           <-- to link to the person
hasKey      varchar(??)   <-- to correspond with the 'key' they have. 
```

然后，每个人的记录将类似于

```
UserHasID   UserID  HasKey
1           1       A1
2           1       B1
3           1       B3
4           1       C2
5           2       A1
6           2       A2
7           2       B1
8           2       B2
9           2       B4
10          2       C1 
```

然后，您的查询可以被简化，而不必显式分解每个 A、B、C 列

# jquery - 查找包含特定文本的标签并添加一个类

> ID：13527611
> 
> 赞同：1
> 
> 时间：2012-11-23T10:54:15.690
> 
> 标签：jquery, contains

我有以下 HTML，我需要向两者`<li>`以及`<a>`文本“图表”所在的位置添加一个类（所以不是第二行，而是第四行和第五行）。我无法更改 HTML 的输出。

```
<div class="wp-submenu-wrap">
    <div class="wp-submenu-head">Charts</div>
    <ul>
        <li class="wp-first-item">
            <a class="wp-first-item" tabindex="1" href="admin.php?page=charts">Charts</a>
        </li>
        <li>
            <a tabindex="1" href="admin.php?page=add-chart">Add Chart</a>
        </li>
    </ul>
</div> 
```

我已经尝试通过定位`<a>`包含文本的标签来做到这一点，但它不起作用。有人可以指出我正确的方向吗？谢谢。

我试过的代码 -

```
$(document).ready(function(){

    if(pagenow === 'admin_page_edit-chart') {

        var page = $('.wp-submenu-wrap a:contains["Charts"]');

        page.addClass('current');
        page.parent('li').addClass('current');

    }

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T10:56:51.220

应该是`:contains('text')`。除此之外，您的代码看起来不错。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T10:57:46.110

您的`:contains()`选择器无效。

改变：

```
a:contains["Charts"] 
```

到：

```
a:contains("Charts") 
```

[http://jsfiddle.net/C8KVW/](http://jsfiddle.net/C8KVW/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T10:57:20.607

以下代码应该可以完成这项工作：

```
$(".wp-submenu-wrap a:contains('Charts')")
    .parent("li")
    .andSelf()
    .addClass("current"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-23T10:59:43.917

试试这个

```
 var page = $('.wp-submenu-wrap a:contains("Charts")');

    page.addClass('current');
    page.parent().addClass('current'); 
```

# ruby-on-rails - 我的类别选择输入在我的帖子中添加了一个额外的 nil 类别？

> ID：13527614
> 
> 赞同：0
> 
> 时间：2012-11-23T10:54:27.643
> 
> 标签：ruby-on-rails

我的`many-to-many`帖子和类别模型之间存在关联。我将类别字段添加为帖子的嵌套属性：

**post_controller.rb：**

```
 def new
    @post = Post.new
  end 
```

**帖子/new.html.erb：**

```
<%= f.select :category_ids, Category.all.collect {|c| [c.name, c.id]} %> 
```

**分类.rb：**

```
class Categorization < ActiveRecord::Base
  attr_accessible :category_id, :post_id, :position

  belongs_to :post
  belongs_to :category
end 
```

**类别.rb：**

```
class Category < ActiveRecord::Base
  attr_accessible :name

  has_many :categorizations
  has_many :posts, :through => :categorizations  

  validates :name, presence: true, length: { maximum: 14 }
end 
```

**post.rb:**

```
class Post < ActiveRecord::Base
  attr_accessible :title, :content, :category_ids

  has_many :categorizations
  has_many :categories, :through => :categorizations  
end

<%= f.select :category_ids, Category.all.collect {|c| [c.name, c.id]} %> 
```

现在，提交表单后，我得到如下信息：

```
[#<Category id: 2, name: "Design", created_at: "2012-11-23 10:12:54", updated_at: "2012-11-23 10:12:54">, #<Category id: nil, name: nil, created_at: nil, updated_at: nil>] 
```

我不知道额外的 nil 类别来自哪里。

可能是什么原因？

**编辑：**

**发布新的：**

![在此处输入图像描述](../Images/be8d899ff42be6d6fdbecafb301c58ed.png)

**提交后生成的html：**

![在此处输入图像描述](../Images/4bb3df8048e409956afda0ebe7533d1e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:55:45.060

我意识到了这个问题。在我的后控制器中有这个：

```
 def show
    @post = Post.find(params[:id])
    @replies = @post.replies.paginate(page: params[:page])
    @reply = @post.replies.build
    @category = @post.categories.build # this was the problem
    @vote = Vote.new
    store_location
  end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T11:35:21.477

我不认为这是 HTML 或 Rails 代码中的问题。我认为您有数据完整性问题。

如果我是你，我会检查`Categorization`数据库中是否有指向不再存在的类别的条目。

此外，也许您想检查`:dependent`rails 中关系的属性以实现数据完整性，例如，我会在两个模型中编写`has_many :categorizations, :dependent => :destroy`或编写. 这样做的效果是，如果您通过 rails 删除帖子或类别，所有引用也会被销毁。`has_many :categorizations, :dependent => :delete``Post``Category`

# email - OSGi 和 Spring 集成

> ID：13527616
> 
> 赞同：0
> 
> 时间：2012-11-23T10:54:31.890
> 
> 标签：email, spring-integration, osgi-bundle

我有两个包 A 和 B ，包 A 有一个服务激活器，其中包含一个名为 receive 用于接收电子邮件的方法，包 B 使用来自包 A 的电子邮件，所以我想如何在 OSGi 中将服务激活器公开为服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:56:28.980

根据您的需要创建一个界面。我将为您提供一个示例：

```
public interface Receiver {

    void receive(String smth);

} 
```

创建一个实现类：

```
public class ReceiverImpl implements Receiver {
    @Override
    public void receive(String smth) {

    }
} 
```

然后使用 Spring 将 Receiver 公开为 OSGi 服务，如下所示：

```
<bean id="receiver" class="com.yourpackage.ReceiverImpl"/>
<osgi:service ref="receiver" interface="com.yourpackage.Receiver"/> 
```

要完成这项工作，请确保您的 Receiver 包导出清单条目中的包，并且您的 Consumer 包导入该包。

要调用其他捆绑包中的接收器，请使用：

```
<osgi:reference id="receiver" interface="com.yourpackage.Receiver"/> 
```

然后，您可以将 Receiver 的属性设置为将使用它的捆绑包的任何 Spring bean。

# ruby-on-rails - 如何在rails中嵌套布局

> ID：13527620
> 
> 赞同：0
> 
> 时间：2012-11-23T10:54:38.393
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有帐户控制器，其中包含“更改密码”、“更改电子邮件”等操作。每个视图都有相同的侧边栏，我想将其抽象为其他帐户布局。

```
 application layout (header, footer)         
              \/
 account layout (sidebar)
              \/
             view 
```

是否可以不进行编辑`layouts/application`？

我尝试在内部创建`app/view/layouts/account.html.erb`和使用`yield`，但在这种情况下，rails 会跳过`layouts/application`并以`layouts/account`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T11:02:04.583

是的你可以。访问此 Rails 指南链接[嵌套布局](http://guides.rubyonrails.org/layouts_and_rendering.html#using-nested-layouts)

# oop - 模型-服务解耦：如果我的模型需要服务怎么办？

> ID：13527621
> 
> 赞同：2
> 
> 时间：2012-11-23T10:54:39.077
> 
> 标签：oop, service, model, domain-driven-design, soa

服务层应该位于模型层之上。因此，模型不应该调用服务。

但是，我面临着我需要的情况，例如：

```
interface Component {
    getResult();
}
class Number implements Component {
    private value;
    public getResult() {
        return value;
    }
}
class Addition implements Component {
    private component1;
    private component2;
    public getResult() {
        return component1->getResult() + component2->getResult();
    }
}
class ConstantFromExternalSource implements Component {
    private identifier;
    public getResult() {
        // call a service for fetching constant identified by identifier
    }
} 
```

（伪代码）

在这里，我的模型需要通过服务（无论是否为 web 服务）访问外部数据源。

在这种情况下我该怎么办？**在模型中调用服务可以吗？**

如果您建议从模型中移走“getResult”方法并将其放入“ComponentService”中，我会不同意，因为我会失去 OOP 的所有优点（这里我的模型创建了一个需要递归解析的树，所以 OOP 是最好的解决方案）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:57:30.983

> 在模型中调用服务可以吗？

取决于什么样的服务。就 DDD 而言，

*   域绝对不应该知道使用域的底层*应用程序*层服务。

*   *领域*层服务不是什么大问题，因为它们是同一层的一部分。

*   相反，如果您想要域和基础设施之间的松散耦合（与存储库接口/实现相同），则必须将*基础设施层服务注入到您的域对象中，并且必须在域层中声明它们的接口。*谢尔盖对此有很好的实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T11:22:12.870

我会让外部源直接将常量作为组件返回。我不会将 ConstantFromExtenralSource 类与服务耦合，甚至不会作为接口，因为该类（至少在这种形式中）除了调用服务之外什么都不做。

但是，如果外部源返回一些需要包装在 ConstrantFromExternalSource 类中的数据，我只需通过构造函数将数据推送到对象中。

简而言之，如果模型只是从外部源获取数据的抽象，只需使用存储库来实际获取数据并返回模型，如果外部源不会直接返回您需要的对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T09:08:03.343

您可以通过多种方式实现这一目标。首先，您可以在单独的界面中提取模型的依赖关系，例如：

```
interface CustomService {
 getResult();
}

class ExternalService implments CustomService 
{
  getResult() { // access web service }
} 
```

然后将该依赖项注入模型中：

```
class ConstantFromExternalSource implements Component {
    private identifier;
    private CustomService service;

    ConstantFromExternalSource(CustomService service)
    {
        this.service = service;
    }

    public getResult() {
        // call a service for fetching constant identified by identifier
        return service.getResult();
    }
} 
```

实现此目的的另一种方法是使用[观察者设计模式](http://en.wikipedia.org/wiki/Observer_pattern)并通知更高级别的抽象您需要它们的某些东西。

在这两种方式中，您都可以将模型与服务层的具体实现分离。

# javascript - 我们如何在我们的 android 应用程序中执行一个 javascript 函数并获得一个返回值？

> ID：13527624
> 
> 赞同：6
> 
> 时间：2012-11-23T10:54:50.530
> 
> 标签：javascript, android, return

我们如何执行 javascript 函数并在我们的 android 应用程序中获取返回值？

我们想在按钮按下事件上执行一个javascript，我们需要将参数传递给脚本并获取返回值，所以我们使用“WebChromeClient”来实现这个，但是我们得到的异常是“SyntaxError: Parse error at undefined:1 "

以下是我的代码

```
import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.webkit.JsResult;
import android.webkit.WebChromeClient;
import android.webkit.WebSettings;
import android.webkit.WebView;

public class FirstTab extends Activity 
{

    private WebView webView;

    public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
             setContentView(R.layout.regis);

            try{

                webView = (WebView) findViewById(R.id.webView1);
                webView.getSettings().setJavaScriptEnabled(true);
                webView.setWebChromeClient(new MyWebChromeClient());
                String customHtml = "<html><head><title>iSales</title><script type=\"text/javascript\"> function fieldsOnDelete(){ var x=123; return \"JIJO\"; } </script></head><body>hi</body></html>";
                webView.loadData(customHtml, "text/html","UTF-8");  

                }catch(Exception e)
                {
                     Log.v("JAC LOG",e.toString());
                }

        }
    public void onResume()
    {
        super.onResume();

            final Button button = (Button) findViewById(R.id.button1);
             button.setOnClickListener(new View.OnClickListener() {
             public void onClick(View v) {
                 try{
                    webView.loadUrl("javascript:alert(javascript:fieldsOnDelete())");
                 }
                 catch(Exception e)
                 {
                     Log.v("JAC LOG",e.toString());

                 }
              } 
             });
    }

    final class MyWebChromeClient extends WebChromeClient {
        @Override
        public boolean onJsAlert(WebView view, String url, String message, JsResult result) {

        Log.v("LogTag", message);
          result.confirm();
          return true;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T11:03:14.007

您可以使用 `mWebView.loadUrl("javascript:checkName");`调用该方法...

然后您可以使用`addJavascriptInterface()`将 Java 对象添加到 Javascript 环境中。让您的 Java 脚本调用该 Java 对象上的方法以提供其“返回值”。

EDIT1：或者您可以使用以下技巧：

将此客户端添加到您的 WebView：

```
final class MyWebChromeClient extends WebChromeClient {
        @Override
        public boolean onJsAlert(WebView view, String url, String message, JsResult result) {
            Log.d("LogTag", message);
            result.confirm();
            return true;
        }
    } 
```

现在在您的 java 脚本调用中执行以下操作：

```
webView.loadUrl("javascript:alert(functionThatReturnsSomething)"); 
```

现在在 onJsAlert 调用中“ `message`”将包含返回值。

编辑2：

因此，如果我们在调用加载 URL 之后调用 javascript 方法，则它不起作用，因为页面加载需要时间。所以我创建了一个测试程序来测试它......

以下是我存储在 assets 文件夹中的 html 文件（名为 test.html）：

```
<html>
<head>
<script language="javascript">
    function fieldsOnDelete(message) {
        alert("i am called with " + message);
        window.myjava.returnValue(message + " JIJO");
    }
</script>
<title>iSales android</title>

</head>
<body></body>
</html>
</body>
</html> 
```

以下是我的 java 类，我可以将它作为接口添加到 java 脚本中，它会接收返回值：

```
public class MyJS {

    public void returnValue(String string){
        Log.d(this.getClass().getSimpleName(), string);
    }

} 
```

以下是我的活动课：

```
public class CheckWebView extends Activity {

    private WebView webView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_check_web_view);
        webView = (WebView) findViewById(R.id.webview);

        webView.setWebChromeClient(new WebChromeClient() {
            @Override
            public void onConsoleMessage(String message, int lineNumber,
                    String sourceID) {
                super.onConsoleMessage(message, lineNumber, sourceID);
                Log.d(this.getClass().getCanonicalName(), "message " + message
                        + "   :::line number " + lineNumber + "   :::source id "
                        + sourceID);
            }

            @Override
            public boolean onConsoleMessage(ConsoleMessage consoleMessage) {
                // TODO Auto-generated method stub

                onConsoleMessage(consoleMessage.message(),
                        consoleMessage.lineNumber(), consoleMessage.sourceId());

                Log.d(this.getClass().getCanonicalName(), "message::::: "
                        + consoleMessage.message());

                return super.onConsoleMessage(consoleMessage);
            }
        });

        webView.addJavascriptInterface(new MyJS(), "myjava");
        webView.getSettings().setJavaScriptEnabled(true);
        webView.getSettings().setPluginsEnabled(true);
        webView.getSettings().setAllowFileAccess(true);

        webView.loadUrl("file:///android_asset/test.html");

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_check_web_view, menu);
        return true;
    }

    /* (non-Javadoc)
     * @see android.app.Activity#onOptionsItemSelected(android.view.MenuItem)
     */
    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        webView.loadUrl("javascript:fieldsOnDelete('name');");
        return super.onOptionsItemSelected(item);
    }

} 
```

这里的关键是调用从 assets 文件夹加载 html 文件和调用`javascript:method`. 我在这里调用它`onOptionsItemSelected`，它工作正常..如果我将 `webView.loadUrl("javascript:fieldsOnDelete('name');");`onCreate() 方法移到末尾，它会显示找不到`fieldsOnDelete()`方法的错误...

希望能帮助到你...

编辑3：

在您的代码中替换以下内容

```
webView.loadUrl("javascript:alert(javascript:fieldsOnDelete())"); 
```

和

```
webView.loadUrl("javascript:alert(fieldsOnDelete())"); 
```

并尝试...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-04T14:14:08.297

在 Android KitKat 中有一个新方法 evaluateJavascript，它有一个返回值的回调。回调根据您返回的内容返回 JSON 值、对象或数组。

```
 if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT) {
            // In KitKat+ you should use the evaluateJavascript method
            mWebView.evaluateJavascript(javascript, new ValueCallback<String>() {
                @TargetApi(Build.VERSION_CODES.HONEYCOMB)
                @Override
                public void onReceiveValue(String s) {
                    JsonReader reader = new JsonReader(new StringReader(s));

                    // Must set lenient to parse single values
                    reader.setLenient(true);

                    try {
                        if(reader.peek() != JsonToken.NULL) {
                            if(reader.peek() == JsonToken.STRING) {
                                String msg = reader.nextString();
                                if(msg != null) {
                                    Toast.makeText(getApplicationContext(), msg, Toast.LENGTH_LONG).show();
                                }
                            }
                        }
                    } catch (IOException e) {
                        Log.e("TAG", "MainActivity: IOException", e);
                    } finally {
                        try {
                            reader.close();
                        } catch (IOException e) {
                            // NOOP
                        }
                    }
                }
            });
        } 
```

你可以在这里看到一个完整的例子：[https ://github.com/GoogleChrome/chromium-webview-samples/tree/master/jsinterface-example](https://github.com/GoogleChrome/chromium-webview-samples/tree/master/jsinterface-example)

# php - javascript用新行设置textarea值

> ID：13527625
> 
> 赞同：2
> 
> 时间：2012-11-23T10:54:54.363
> 
> 标签：php, javascript

我是 php、javascript 和 web 新手

我有一种情况=>我必须在客户端设置一个文本字段的值，我将值传递给我的javascript函数并将值设置为

```
 function editSubService(description){
      setVal("sub_service_description", description);
 } 
```

它设置值 right ，但如果文本中有新行，则不设置文本字段。这怎么能设置文本字段的值，只有换行才不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T11:02:04.883

# python - xpath 不使用 etree 选择具有类的节点

> ID：13527627
> 
> 赞同：0
> 
> 时间：2012-11-23T10:54:57.313
> 
> 标签：python, xpath, elementtree

我正在尝试使用 xpath 从 svg 中获取一些元素。我正在尝试通过他们的类获取节点。例如：

```
<path d="M 5624850,7744480 A 355600,355600 0 0,1 5624850,8455680 A 355600,355600 0 0,1 5624850,7744480" stroke-width="7620" fill="none" class="outline LAY26"/> 
```

因此，如果我想要具有“大纲”和“L26”的课程，我会执行以下操作：

```
elements = self.node.findall(".//*[@class='outline LAY26']") 
```

但是我总是得到一个空数组。我正在寻找的节点可以嵌套。所以我想我只是在看第一级，也许我错了。

有任何想法吗？

# objective-c - CGRect 在设备旋转时改变宽度

> ID：13527631
> 
> 赞同：0
> 
> 时间：2012-11-23T10:55:06.020
> 
> 标签：objective-c, ios, cgcontext, cgrect

我想画一个 XoY 坐标轴...轴是 CGRects ..当设备旋转时它们会改变宽度...我希望它们在所有旋转中都保持不变。当设备处于纵向而不是横向时，宽度 5.0 是否意味着不同的东西？

这是代码：

```
 CGContextSaveGState(ctx);
    CGContextSetFillColorWithColor(ctx, [[UIColor whiteColor] CGColor]);

    // the axis is a rect ...
    //axis start point
    CGFloat axisStartX = viewBounds.size.width * LEFT_EXCLUSION_LENGTH_PERCENT;
    CGFloat axisStartY = viewBounds.size.height * UNDER_EXCLUSION_LENGTH_PERCENT;

    CGFloat axisLength = viewBounds .size.height - (viewBounds.size.height * OVER_EXCLUSION_LENGTH_PERCENT) - viewBounds.size.height * UNDER_EXCLUSION_LENGTH_PERCENT;
    CGContextAddRect(ctx, CGRectMake(axisStartX, axisStartY, AXIS_LINE_WIDTH, axisLength));

    CGContextFillPath(ctx);
    CGContextRestoreGState(ctx); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T11:02:22.527

I would not know what you are up to with this calculation, but viewBounds.size.height may change on rotation, depending on what it represents. But if its height varies for different orientations then the axisLength will vary too. And axisLength is the height of your rect.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:02:56.177

If you want you rect to be of same size in every orientation than do this!

```
CGContextSaveGState(ctx);
CGContextSetFillColorWithColor(ctx, [[UIColor whiteColor] CGColor]);

// the axis is a rect ...
//axis start point
CGFloat boxSize = MIN(viewBounds.size.width, viewBounds.size.height);
CGFloat axisStartX = boxSize * LEFT_EXCLUSION_LENGTH_PERCENT;
CGFloat axisStartY = boxSize * UNDER_EXCLUSION_LENGTH_PERCENT;

CGFloat axisLength = boxSize - (boxSize * OVER_EXCLUSION_LENGTH_PERCENT) - boxSize * UNDER_EXCLUSION_LENGTH_PERCENT;
CGContextAddRect(ctx, CGRectMake(axisStartX, axisStartY, AXIS_LINE_WIDTH, axisLength));

CGContextFillPath(ctx);
CGContextRestoreGState(ctx); 
```

The idea here is that whatever the orientation is, the size remains same and visible on screen.

hope that helps!

# javascript - 使用谷歌街景图像 api v3 如何使用 javascript 保存街景图像

> ID：13527632
> 
> 赞同：1
> 
> 时间：2012-11-23T10:55:14.633
> 
> 标签：javascript, google-maps-api-3, google-street-view

我有一个谷歌街道地图，我想创建一个按钮，允许从谷歌图像中捕获并将其保存到文档文件中，以便他们可以添加所需的信息。

我知道我必须使用**[街景查看](http://maps.googleapis.com/maps/api/streetview)**所有细节。

我首先需要我的 javascript 以确保它从正确的谷歌街道图像中捕获，然后我需要能够通过单击创建的一个按钮将其保存到指定的位置。

我一直在寻找许多答案，但所有方法似乎都没有按照我需要的方式工作。我是整个编程环境的新手，特别是 javascript。

我试过添加这个：

```
$('#getStatic').click(function() {
                var maplatlong = map.getCenter().clone();
                maplatlong.transform(new OpenLayers.Projection("EPSG:900913"),
                new OpenLayers.Projection("EPSG:4326"));
                panoLatLon = new google.maps.LatLng(maplatlong.lat, maplatlong.lon);   

                $('#map_canvas').html('<img src="http://maps.googleapis.com/maps/api/streetview?location=' + panoLatLon.lat() + ',' + panoLatLon.lng() + '&maptype=' + map.getMapTypeId() + '&zoom=' + map.getZoom() + '&size=400x400&sensor=false">'); 
```

然后只是尝试尝试更改它，然后继续尝试添加代码以使其显示保存到弹出窗口

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T11:39:05.710

您可以使用[Streetview Image API](https://developers.google.com/maps/documentation/streetview/)获取图像，但该图像的[使用受服务/使用条款的约束](https://developers.google.com/maps/terms)，并且您将无法自动对图像执行太多操作，因为 Javascript 是沙盒化的。

为了节省您的查找时间，条款 10.1.3 禁止在网页之外存储图像和使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:10:26.103

1 - Javascript 无法访问文件系统，因此您无法使用它保存文件。

2 - 不允许从谷歌地图保存图像。看这里：

[https://developers.google.com/maps/faq#tos_screenshots](https://developers.google.com/maps/faq#tos_screenshots)

> **在印刷材料和离线媒体**中使用 Google 地图图像须遵守发布于以下网址的许可指南：
> 
> [http://www.google.com/permissions/geoguidelines.html](http://www.google.com/permissions/geoguidelines.html)

您可以请求许可，但我认为获得许可并不容易，除非您是付费商业客户。

# php - 验证错误后丢失数组

> ID：13527633
> 
> 赞同：0
> 
> 时间：2012-11-23T10:55:26.967
> 
> 标签：php, cakephp

我正在开发一个 CakePHP 项目，我有用户、帖子和位置模型等。User hasMany Location 和 Post belongsTo User 所以 Location 与 Post 没有直接关系。

这是我在 Post 控制器中的代码：

```
public function add() {
    if ($this->request->is('get')) {
       $this->loadModel('Location');
       $this->set('locations', $this->Location->find('all', array('conditions' => array('user_id' => $this->Auth->user('id')))));
    }
    ...
} 
```

这是我在帖子/添加视图中的代码：

```
<?php
$i = 0; $j = 0;
foreach ($locations as $location):
    $location_names[$i] = $location['Location']['name'];
    $i++;
endforeach;
echo "<select name=\"location\" onchange=\"select(this.value)\">";
echo "<option value=\"\">Select a saved location</option>";
foreach ($locations as $location):
    echo "<option value=\"" . $location['Location']['latitude'] . "," . $location['Location']['longitude'] . "\">" . $location_names[$j] . "</option>";
    $j++;
endforeach;
?>
</select> 
```

如果我在 Post 模型中具有验证规则的 post 输入之一中输入了错误的值，它会重定向到当前的添加视图，显示验证错误是什么，但是从控制器传递到视图的 $locations 数组会消失并且可以'不要在视图中使用它，我得到这个错误：

```
Notice (8): Undefined variable: locations [APP\View\Posts\add.ctp, line 68] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:58:30.420

这很可能是由您使用 设置`$locations`变量的位置引起的`$this->set()`，并且这只发生在 GET 请求的情况下。

提交表单时，您发送的是 POST/PUT 请求而不是 GET，并且内部`if`子句中的代码永远不会执行 - 因此`$locations`变量在您的视图文件中可用。

如果您只想在显示干净表单时加载这些值，您可以更改`if`条件以检查`$this->request->data`数组是否填充了用户提交的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:37:17.670

为什么你有条件`if ($this->request->is('get'))`？

如果您不用于任何特殊目的，则将其删除，并且`locations`将始终设置变量。

# db2 - 更改 IBM DB2 9.7 STMTHEAP

> ID：13527638
> 
> 赞同：1
> 
> 时间：2012-11-23T10:55:41.800
> 
> 标签：db2

如何获取 DB2 9.7 DB 的 STMTHEADP 的当前值，如何更改它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T18:32:38.623

打开命令行。在 Windows 上，在开始菜单中搜索命令窗口 - 管理员。

要获取当前值，请使用[GET DB CFG](http://pic.dhe.ibm.com/infocenter/db2luw/v10r1/index.jsp?topic=/com.ibm.db2.luw.admin.cmd.doc/doc/r0001954.html)命令：

```
db2 get db cfg for MY_DATABASE 
```

要设置新值，请使用[UPDATE DB CFG](http://pic.dhe.ibm.com/infocenter/db2luw/v10r1/index.jsp?topic=%2Fcom.ibm.db2.luw.admin.cmd.doc%2Fdoc%2Fr0001987.html)命令：

```
db2 update db cfg for MY_DATABASE using STMTHEAP 8192 AUTOMATIC 
```

[STMTHEAP](http://pic.dhe.ibm.com/infocenter/db2luw/v10r1/index.jsp?topic=/com.ibm.db2.luw.admin.config.doc/doc/r0000277.html)信息中心主题中有更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-25T18:11:39.193

Leons 是正确的，但如果您需要计算 STMTHEAP 大小并且不想使用命令行，则可以使用以下 SQL：

```
SELECT NAME, VALUE, VALUE_FLAGS, MEMBER
FROM SYSIBMADM.DBCFG
WHERE NAME = 'stmtheap'
ORDER BY NAME, MEMBER WITH UR; 
```

# jquery-ui - jquery验证代码不能正常工作

> ID：13527640
> 
> 赞同：0
> 
> 时间：2012-11-23T10:55:46.920
> 
> 标签：jquery-ui, jquery, jquery-plugins

我无法在我的代码中找到问题，每件事都正常工作，但问题是当用户第一次点击或关注文本框时，正确的 img 显示 .. 这是不正确的，但当用户输入时我无法解决这个问题，然后在完成用户正确输入后然后显示，否则不显示。任何人都可以帮助我解决这个问题。我的完整 jquery 和 html 或 css 代码可在此链接中找到，请检查并解决我的问题

[我的代码链接](http://jsfiddle.net/gU3PU/4/)

我认为此功能有错误，但无法解决问题

```
$('#step1 #fName').focus(function(){

        if($('#step1 #fName').hasClass('error_Aplha')==true)
        {
            $('#step1 #fntick').removeClass('block');    
        }
        else {
            $('#step1 #fntick').addClass('block');
        }
    }).blur(function(){

        if($('#step1 #fName').hasClass('error_Aplha')==true)
        {
            $('#step1 .fname_error').fadeIn(100).delay(2000).fadeOut(1000);
            $('#step1 #fntick').removeClass('block');    
        }
        else {
            $('#step1 .fname_error').removeClass('block');    
            $('#step1 #fntick').addClass('block');
        }

    }); 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:18:20.970

哇，这是一个简单任务的大量代码。更改它，以便仅在元素的`.keyup()`和`.blur()`事件中进行检查。`INPUT`

不是 100% 确定预期的行为是什么，但这可能会让你继续前进：

```
$(document).ready(function(e) {

    var errorAlpha = function() {
        var reg = /^([A-Za-z]+)$/;
        var check = $(this).val();
        if (reg.test(check) == true && check.match(reg) != null) {
            // VALID
            $(this).removeClass('error_Aplha');
            $(this).next('img').addClass('block');
            $(this).prevAll('span.tooltip2').stop(true).delay(500).fadeOut(400);
        } else {
            // INVALID
            $(this).addClass('error_Aplha');
            $(this).next('img').removeClass('block');
            $(this).prevAll('span.tooltip2').fadeIn(500).delay(2000).fadeOut(1000);
        }
    };

    $('#step1 #fName, #step1 #lName').on('keyup blur', errorAlpha);

});​ 
```

演示：http: [//jsfiddle.net/gU3PU/6/](http://jsfiddle.net/gU3PU/6/)

# html - 修复HTML左右DIV

> ID：13527643
> 
> 赞同：0
> 
> 时间：2012-11-23T10:56:04.440
> 
> 标签：html, css, css-float

我是网页设计的新手。我想设计 2 个盒子，其中一个在左边，另一个在右边。这些框在浏览器最大化状态下是固定的，但是当我调整浏览器大小并使其最小化时，右框从左框向下。

这是我的代码：

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" >
        <link type="text/css" rel="stylesheet" href="style.css" />
        <title>.: Home :.</title>
    </head>
    <body>
        <div class="main" >
            <div class="left" >&nbsp;</div>
            <div class="right" >
                <div class="search" >&nbsp;</div>
                <div class="login" >&nbsp;</div>
            </div>
        </div>
    </body>
</html> 
```

## 样式.css

```
body {
    margin: 0px;
    padding: 0px;
    background-color: #c4c4c4;
}

div.main {
    width: 100%;
    display: inline-block;
    background-color: red;
}

div.left {
    float: left;
    width: 300px;
    height: 500px;
    margin-top: 50px;
    margin-left: 100px;
    display: inline-block;
    background-color: blue;
}

div.right {
    float: right;
    width: 800px;
    height: 500px;
    margin-top: 50px;
    margin-right: 100px;
    display: inline-block;
    background-color: green;
} 
```

![在此处输入图像描述](../Images/4072df103f8cfeb2321915e1840bd530.png)

![在此处输入图像描述](../Images/d15729373ee873278e02d4b86a9ccc28.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:00:41.400

您需要在主 DIV 上固定宽度

```
div.main {
    width: 1350px;
    display: inline-block;
    background-color: red;
} 
```

在可能的情况下使用 id 而不是 class，它更快，例如：`class="main"`可以是一个 ID。

[工作演示](http://jsfiddle.net/YmHD3/)

**编辑**

如果您希望主 div 的宽度为 100%，则使用固定宽度的包装 div：

```
<div class="main" >
   <div id="wrapper" style="width:1350px;"> 
      <div class="left" >&nbsp;</div>
       <div class="right" >
            <div class="search" >&nbsp;</div>
            <div class="login" >&nbsp;</div>
       </div>
    </div>
</div> 
```

[使用 100% 主 DIV 更新了 DEMO](http://jsfiddle.net/YmHD3/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:05:25.863

这样做的原因是你的盒子是固定宽度的，有边距。如果您调整浏览器窗口的大小，使其小于并排显示两个框所需的空间量，则右侧框将显示在左侧框下方，那里有空间。

您的描述中的详细信息无法解决此问题。但是，您应该尝试将布局基于百分比（例如`width:25%`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T11:09:14.917

将 div.main 宽度从 % 更改为 px。您还可以设置最小宽度，以便浏览器在此之前不会缩小元素。

# javascript - Firefox 上的嵌套 z-index 问题，z-index 较高，z-index 较低

> ID：13527646
> 
> 赞同：1
> 
> 时间：2012-11-23T10:56:06.973
> 
> 标签：javascript, html, css, forms, z-index

我在 Firefox 和其他浏览器上的嵌套 z-index 有问题，我有`div`一个 z-index 为 30000 的 z-index 位于 a 下方`label`，zindex 为 9000。我认为这是由 div 与 30000 z -index 位于`div`具有 2000 s-index 的 a 内，但我删除了它，它没有任何效果。

这里有什么明显的东西会导致这个问题吗？

```
<div class="field row olabel end_date">    
    <label for="cc_end_year" generated="true" class="error">* required</label>    
</div> 
```

在我的标记中，我有一个弹出消息，在滚动一段文本时显示/隐藏。

```
<div class="field row olabel">
   <div style="display:none;" class="whats_this_popup"></div>
</div> 
```

我的 CSS：

```
#order_form .row.end_date {
   position: relative;
   z-index: 9000;
}    
label.error {
   z-index: 9001;
}
.whats_this_popup {
   left: 360px;
   padding: 20px;
   position: absolute;
   width: 205px;
   z-index: 30000;
}
#order_form .row {
   width: 435px;
   z-index: 2000;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:03:05.023

这是由[堆叠上下文](https://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index/The_stacking_context)引起的。前者 div 的 stacking context 有 z-index 9000，而后者的 stacking context 有 z-index 2000。

您仅**在其父级内**为标签提供 9001 的 z-index 。z-index 在父级的堆叠上下文之外是没有意义的。同样，通过为 指定 30000 的 z-index `.whats_this_popup`，您是说它将显示在其z-index 小于 30000的任何*兄弟姐妹的前面，而不是页面上 z-index < 30000 的任何内容。*

*为包含*div的后者提供30000 的索引将导致您想要的结果。

# sql - SQL 访问 INSERT INTO 失败

> ID：13527647
> 
> 赞同：2
> 
> 时间：2012-11-23T10:56:09.097
> 
> 标签：sql, vb.net, insert, ms-access-2007

我正在尝试制作一个使用 OLEDB 连接到 Microsoft Access 数据库的 Visual Basic 应用程序。在我的数据库中，我有一个具有以下布局的用户表

```
ID - Autonumber
Username - Text
Password - Text
Email - Text 
```

要将数据插入表中，我使用以下查询

```
INSERT INTO Users (Username, Password, Email) 
VALUES ('004606', 'Password', 'Email@Mail.com') 
```

但是我似乎收到了这个语句的错误，根据 VB，这是一个语法错误。

但后来我尝试使用以下查询

```
INSERT INTO Users (Username) Values ('004606') 
```

这个查询似乎工作得很好......

所以问题是我只能插入一个字段，但不能全部插入 3 个（不包括 ID 字段，因为它是自动编号）。

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T10:58:14.027

密码是[保留字](http://support.microsoft.com/kb/321266)，必须用括号括起来 [密码]

```
INSERT INTO Users (Username, [Password], Email)
VALUES ('004606', 'Password', 'Email@Mail.com') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:12:32.943

保留字在 [...]

```
INSERT INTO Users (Username, [Password], Email)
VALUES ('004606', 'Password', 'Email@Mail.com') 
```

# twitter - Twitter 上的 SLComposeViewController：如何检测重复的帖子

> ID：13527653
> 
> 赞同：3
> 
> 时间：2012-11-23T10:56:24.277
> 
> 标签：twitter, ios6, slcomposeviewcontroller

我在 iOS 6 上使用 Social Framework 进行 Twitter 集成，使用以下代码：

```
SLComposeViewController *controller = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeTwitter];
controller.completionHandler = ^(SLComposeViewControllerResult result) {
    if (result == SLComposeViewControllerResultCancelled) {
      // cancelled
    } else if (result == SLComposeViewControllerResultDone) {
      // done
    } else {
      // unknown
    }
    [controller dismissViewControllerAnimated:YES completion:nil];
};
[self presentViewController:controller animated:YES completion:Nil]; 
```

如果用户将相同的推文消息设置为其旧消息之一，我会弹出“推文“xxx”是重复的，无法发送。” 但完成处理程序结果值仍然是 SLComposeViewControllerResultDone。有没有办法知道一条推文是否**真的**被发送了？TWTweetComposeViewController 似乎也发生了相同的行为。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-31T14:47:48.747

在 iOS 5 推特集成中，

TWTweetComposeViewControllerResult 只有 2 个选项

当用户选择完成时——TWTweetComposeViewControllerResultDone

当用户选择取消时——TWTweetComposeViewControllerResultCancel

这个结果不依赖于苹果在后台更新的推文。如果推文在更新时失败，则会显示警报。

所以我建议不要为成功或失败实施任何自定义弹出窗口。由于苹果本身实现了成功/失败推文更新的指示。成功时它会播放声音，失败时会弹出一个带有原因的弹出窗口。

# unix - 根据第一列连接两个文件并保留顺序

> ID：13527655
> 
> 赞同：2
> 
> 时间：2012-11-23T10:56:34.443
> 
> 标签：unix

如何根据第一列加入两个文件并保留第二个文件的顺序.. 

文件 1：

```
ID1 123
ID2 234
ID3 232
ID4 344
ID5 345
ID6 867 
```

文件 2

```
ID2 A C
ID3 G T
ID1 C T
ID4 A C
... 
```

所以合并后的文件应该是这样的：

```
ID2 234 A C 
ID3 232 G T 
ID1 123 C T 
ID4 344 A C 
... 
```

`IDs`是第一列的值（存在于两个文件中）。文件 1 的行数/ID 比文件 2 多。`ID`文件 2 中的所有 s 都在文件 1 中，但并非`ID`文件 1 中的所有 s 都在文件 2 中

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T11:23:29.827

这是一种使用方法`awk`：

```
awk 'FNR==NR { a[$1]=$2; next } $1 in a { print $1, a[$1], $2, $3 }' file1 file2 
```

结果：

```
ID2 234 A C
ID3 232 G T
ID1 123 C T
ID4 344 A C 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T11:26:51.803

使用`join`：

```
$ join file1.txt file2.txt

ID1 123 C T
ID2 234 A C
ID3 232 G T
ID4 344 A C 
```

**注意**：文件需要首先排序，这不会保持 file2.txt 的顺序，但如果你不关心的话，这是*最干净的方式。*

首先对文件进行预排序：`sort file1.txt -o file1.txt; sort file2.txt -o file2.txt`

加入：`join file1.txt file2.txt`

一般来说，您可以`join file1.txt file.txt | sort`按某些标准进行排序，但在这种情况下`file2.txt`，不会按任何列/标准进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T11:00:51.417

您逐行读取这两个文件并通过正则表达式提取行标记。提取的标记存储在关联数组中，使用第一个标记作为键。在第二步中，您可以遍历所有可用键并从存储在数组中的值构造输出行。

php 中的示例实现，仅用于演示目的。因此没有进行错误检查，并且模式可能必须适应您的需求。显然，在所有其他语言中也可以这样做。我只是选择了 php，因为它很容易阅读：

```
<?php
$input_file[1]=fopen('/path/input1.list','r');
$input_file[2]=fopen('/path/input2.list','r');

# read input files line by line
foreach ($input_file as $input){
    while (!feof($input)){
        $tokens=array();
        preg_match('/^(ID[0-9]+) (.+)$/',trim(fread($input)),$tokens);
        $list[$i][$tokens[1]]=$tokens[2];
   } 
}

# construct output lines:
$output_file=fopen('/path/output.list','w');
foreach ($list[1] as $key=>$val){
    $line=sprintf("%s %s%s\n", $key, $val, 
                  array_key_exists($key,$list[2])?' '.$list[2][$key]:'' );
    fwrite($output_file,$line);
}

# some house keeping
fclose($input_file[1]);
fclose($input_file[2]);
fclose($output_file);

?> 
```

（请注意，我没有检查这个，我只是把这个写下来。它是一个起点，而不是即用型）

# c# - 复用或监听正在使用的串口

> ID：13527656
> 
> 赞同：1
> 
> 时间：2012-11-23T10:56:36.843
> 
> 标签：c#, serial-port, multiplexing

我使用 C# .Net 4 中的制造商硬件 DLL 访问我的 COM 端口。连接到我的 COM 端口时，我有一个[Nanotec 步进电机控制](http://en.nanotec.com/technology_programming.html)SMCI 33。

当硬件步进电机的运动完成时，制造商提供了一个标志“SetSendStatusWhenCompleted”来发送一个状态字节。不幸的是，没有监听这个状态字节的函数。我想添加这个功能。

**目标：**使用硬件驱动程序发送移动命令。等待：在发送下一个移动命令之前，收听响应“状态字节”。

```
using System.IO; using System.IO.Ports;
(... access same com Port via driver of hardware manufacturer. ...)
sp = new SerialPort();
    sp.PortName = "COM4";
    sp.BaudRate = 115200;
    sp.DataBits = 8;
    sp.StopBits = System.IO.Ports.StopBits.One;
    sp.Parity = System.IO.Ports.Parity.None;
    sp.Handshake = System.IO.Ports.Handshake.None;
sp.Open(); 
```

显然我得到了[UnauthorizedAccessException](http://msdn.microsoft.com/de-de/library/system.io.ports.serialport.open.aspx)，因为我的代码启动了驱动程序并尝试访问同一个 COM 端口。一个[类似的 SO 问题](https://stackoverflow.com/questions/358037/in-c-sharp-how-could-i-listen-to-a-com-serial-port-that-is-already-open)处理来自另一个程序的 COM 访问：端口嗅探器 (Portmon) 是解决方案。但我的问题需要简单的代码。

我可以停止硬件驱动程序。目前的问题是时间成本高的重新初始化。除了关闭以前的硬件驱动程序之外，还有其他方法可以监听 COM 端口吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:39:28.653

您应该使用[Monitor 工具](http://www.serial-port-monitor.com/)，以更好地了解您的其他应用程序真正在做什么以及在线上发生了什么。此外，您可以设置[两个虚拟 com 端口](http://com0com.sourceforge.net/)来测试在一台机器上的读写（即使在同一应用程序中），以便更好地控制何时发送哪些数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-01T09:12:16.073

[Nullmodem](https://sourceforge.net/projects/com0com/) com0com 项目中的 hub4com 提供了请求的多路复用。Hub4com 实现多路复用并管理 com 端口上的请求。这允许 a) 驱动程序和 b) OP 的代码访问相同的 COM 端口。

# c# - 使用 OrderBy、ThenBy 排序

> ID：13527657
> 
> 赞同：3
> 
> 时间：2012-11-23T10:56:38.737
> 
> 标签：c#, linq, sorting, iorderedenumerable

我正在尝试根据前一个排序的列对表的几列进行排序。它适用于前两列。但是，一旦我对第三列进行排序，第二列就会失去排序。据我所知，我的 foreach 循环肯定有问题。这是我的排序代码：

```
public List<object> inhaltSortieren(List<object> zuSortierendeListe, Dictionary<string, SortierRichtung> sortierung)
{
    IOrderedEnumerable<object> sortierteListe = null;
    if (sortierung.First().Value == SortierRichtung.asc)
        sortierteListe = zuSortierendeListe.OrderBy(x => x.GetType().GetProperty(sortierung.First().Key).GetValue(x, null));
    else if (sortierung.First().Value == SortierRichtung.desc)
        sortierteListe = zuSortierendeListe.OrderByDescending(x => x.GetType().GetProperty(sortierung.First().Key).GetValue(x, null));
    bool first = true;
    foreach (KeyValuePair<string, SortierRichtung> spalte in sortierung)
    {
        if (first)
        {
            first = false;
            continue;
        }
        if (spalte.Value == SortierRichtung.asc)
            sortierteListe = sortierteListe.ThenBy(x => x.GetType().GetProperty(spalte.Key).GetValue(x, null));
        else if (spalte.Value == SortierRichtung.desc)
            sortierteListe = sortierteListe.ThenByDescending(x => x.GetType().GetProperty(spalte.Key).GetValue(x, null));
    }

    return sortierteListe.ToList();
 } 
```

有任何想法吗？

**更新：**也许我添加了一些进一步的信息：

*   @param zusortierendeListe：这是我要排序的列表，它是一个对象列表
*   @param sortierung：这是我要排序的方向，升序或降序

对象本身是 Tabledata 列表

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T11:09:29.193

你传入一个`Dictionary`; `Dictionary`当您将其用作a 时`IEnumerable<KeyValuePair>`（就像您的循环一样） ，您从中获取值的顺序`foreach`（可能）*不是*您添加它们的顺序！

您需要使用 a `List<KeyValuePair>`（或其他一些*有序* `IEnumerable<KeyValuePair>`的 ）而不是`Dictionary`，甚至创建一个自定义类来保存字段和方向并传递 a `List`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T11:32:30.210

也[看看这里](https://stackoverflow.com/questions/3084671/linq-multiple-order-by)

只是为了让你的代码更清晰一点。您可以将所有内容放入 for-each 循环或保持原样，然后在代码中使用 sortierung.Skip(1)，因为您已经使用了第一个条目。根据之前的评论，我还将 Dictionary 参数更改为 IEnumerable>。

```
 object GetValue(object value, string name)
    {
        return value.GetType().GetProperty(name).GetValue(value, null);
    }

    public List<object> SortContent(List<object> listToSort, Tuple<string, SortDirection>[] sortInfos)
    {
        if (sortInfos == null || sortInfos.Length == 0)
             return listToSort;

        IOrderedEnumerable<object> sortedList = null;

        foreach (var column in sortInfos)
        {
            Func<object, object> sort = x => GetValue(x, column.Key);

            bool desc = column.Value == SortDirection.Descending;

            if (sortedList == null)
                sortedList = desc ? listToSort.OrderByDescending(sort) : listToSort.OrderBy(sort);
            else
                sortedList = desc ? sortedList.ThenByDescending(sort) : sortedList.ThenBy(sort);
        }

        return sortedList.ToList();
    } 
```

# oracle - ORA-06550 尝试检查表是否存在时

> ID：13527660
> 
> 赞同：0
> 
> 时间：2012-11-23T10:56:45.023
> 
> 标签：oracle, exists, ora-06550

我想在 Oracle 数据库中创建一个表之前检查是否存在一个表。但是，以下语句不起作用，在第 7 行（CREATE）抛出错误 ORA-06550。

```
 DECLARE cnt NUMBER;
  BEGIN
    SELECT COUNT(*) INTO cnt FROM ALL_TABLES WHERE lower(table_name) = lower('TestTable');

    IF( cnt = 0 )
    THEN
      CREATE TABLE TestTable
      (
        TestFlag NUMBER(1) NOT NULL
      );
    END IF;
  END; 
```

谁能帮我解决这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T11:16:03.923

就个人而言，我看不出有什么理由要以这种方式创建表，但如果表不存在，这是另一种创建表的方法：

```
 SQL> declare
  2     table_exists exception;
  3     pragma exception_init(table_exists, -955);
  4   begin
  5     execute immediate 'create table TestTable(TestFlag number(1) not null)';
  6     dbms_output.put_line('table created');
  7   exception
  8     when table_exists
  9     then dbms_output.put_line('table exists');
 10   end;
 11  /

table created

SQL> declare
  2    table_exists exception;
  3    pragma exception_init(table_exists, -955);
  4  begin
  5    execute immediate 'create table TestTable(TestFlag number(1) not null)';
  6    dbms_output.put_line('table created');
  7  exception
  8    when table_exists
  9    then dbms_output.put_line('table exists');
 10  end;
 11  /

table exists

PL/SQL procedure successfully completed 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T10:59:15.663

在 Oracle 中动态创建表是一个很大的禁忌，所以如果这是您正在运行的真实代码，请停止。改用临时表。但失败的原因是 DDL 必须在 SQL 中运行，而不是 PL/SQL。

```
 DECLARE cnt NUMBER;
  BEGIN
    SELECT COUNT(*) INTO cnt FROM ALL_TABLES WHERE lower(table_name) = lower('TestTable');

    IF( cnt = 0 )
    THEN
      execute immediate 'CREATE TABLE TestTable (testFlag NUMBER(1) NOT NULL)';
    END IF;
  END; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T11:01:03.927

```
DECLARE cnt NUMBER;
  BEGIN
    SELECT COUNT(*) INTO cnt FROM ALL_TABLES WHERE lower(table_name) 
                                                            = lower('TestTable');

    IF( cnt = 0 )
    THEN
      EXECUTE IMMEDIATE 'CREATE TABLE TestTable ( TestFlag NUMBER(1) NOT NULL )';
    END IF;
  END; 
```

# mysql - PHPMYADMIN 中的 MYSQL - 从一张表创建表关系

> ID：13527661
> 
> 赞同：0
> 
> 时间：2012-11-23T10:56:45.127
> 
> 标签：mysql, phpmyadmin, relationship, create-table

我想用 MYSQL PHPMYADMIN 创建一个表关系。

![在此处输入图像描述](../Images/a87bff3a315dee18b3a42eec0e6eebee.png)

我有这个创建表：

```
CREATE TABLE students(code_students int(8)not null AUTO_INCREMENT,
name_students varchar(25),
age_students int(3),
degree_program varchar(25),
code_advisor int(8)not null,
primary key(code_students, code_advisor)
); 
```

我想在 code_students、code_advisor 之间创建一个名为建议关系的创建表。

好的，这是我的试用。

```
CREATE TABLE advise (
code_students int(8),
code_advisor int(8),
primary key(code_students, code_advisor),
foreign key(code_students)references students(code_students),
foreign key(code_advisor)references students(code_advisor)
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:03:03.100

[mySQL](http://dev.mysql.com/doc/refman/5.1/en/innodb-foreign-key-constraints.html)说：

`A FOREIGN KEY constraint that references a non-UNIQUE key is not standard SQL. It is an InnoDB extension to standard SQL`
尝试将 UNIQUE 关键字添加到您的第一个表中：

```
CREATE TABLE students(
   code_students int(8)not null unique AUTO_INCREMENT,
   name_students varchar(25),
   age_students int(3),
   degree_program varchar(25),
   code_advisor int(8)not null unique,
   primary key(code_students, code_advisor)
); 
```

查看这个 sqlFiddle 并查看它是如何工作的，然后尝试删除 UNIQUE 关键字并看到您得到与您提到的相同的错误。（点击`Build Schema`按钮）

[http://sqlfiddle.com/#!2/46b69](http://sqlfiddle.com/#!2/46b69)

# sql - 数据库版本

> ID：13527663
> 
> 赞同：1
> 
> 时间：2012-11-23T10:56:55.823
> 
> 标签：sql, sql-server

我必须编写一个程序，该程序能够使用表`version`将数据库带到特定的类型时刻。例如从版本 1 移动到版本 10 或相反。问题是我对这一章很模糊，学校课程几乎没有关于它的内容。我尝试使用互联网构建解决方案，但不知何故我被卡住了。请帮助我理解我做错了什么。

表格版本，1 列，int 类型

询问

```
 create procedure [dbo].[goto_vs] (
        @vs int
    )
    as
    begin
        declare @current_vs int, @counter int;
        declare @sqlquery nvarchar(50); --query to modify
        declare @sqlsp nvarchar(30);
        declare @sqlversion nvarchar(3);
        declare @sqlreverse nvarchar(10);

        --get the current version from table
        select @current_vs=version from dbo.version;

        --checking for valid version
        if (@current_vs = @vs) begin
            print('The database is already at this version...')
            return
        end
        else begin
            if (@vs > 5) begin
                print('Setting the version of databse to last one...')
                set @vs = 5
            end
            else begin
                if (@vs < 0) begin
                    print('Setting the database to default...')
                    set @vs = 0
                end
            end
        end

        --setting up the string for exec
        set @sqlsp = 'exec sp_create_table_awards'

        --check if we go further or earlier in time
        print('Changing database version...')
        if (@vs > @current_vs) begin
            set @sqlreverse = ''
            goto upgrading
        end
        else begin
            set @sqlreverse = 'undo_create_awards'
            goto downgrading
        end

        --upgrading code
        upgrading:
            set @counter = @current_vs + 1
            while (@counter <= @vs) begin
                set @sqlquery = @sqlsp + cast(@counter as nvarchar(2)) + @sqlreverse
                print(@sqlquery)
                exec sp_executeSql @sqlquery
                set @counter = @counter + 1
            end
            goto ending
        downgrading:
            set @counter = @current_vs
            while (@counter > @vs) begin
                set @sqlquery = @sqlsp + cast(@counter as nvarchar(2)) + @sqlreverse
                print(@sqlquery)
                exec sp_executeSql @sqlquery
                set @counter = @counter - 1
            end
            goto ending
        ending:
            update dbo.version set version=@vs
            print('Database version changed...')
    end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:31:33.643

考虑到我想出了一个办法，但没有得到回复，我将其作为回复发布，因为它可能对其他学习计算机科学的学生有所帮助

为简化起见，我用这种模式命名了我的所有程序，`do_x`其中`undo_x`do `x`/ undo _x 是更严格的程序，例如 do_1 和 undo_1 创建一个表并销毁一个表

```
ALTER PROCEDURE [dbo].[goto_vs] 
    -- Add the parameters for the stored procedure here
    @v int = 0

AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    -- Insert statements for procedure here
    declare @i int
    declare @toexec nvarchar(70)

    set @i = (select version from version)

    -- If the requested version is lower than the current one, downgrade.
    while(@i > @v)
        BEGIN
            set @i = @i - 1
            set @toexec = 'Undo_' + CONVERT(varchar,@i);
            exec sp_executeSql @toexec
            print @toexec
        END

    -- Otherwise, upgrade.
    while(@i < @v)
        BEGIN
            set @toexec = 'Update_' + CONVERT(varchar, @i);
            exec sp_executeSql @toexec
            set @i = @i + 1
            print @toexec 
        END 
END 
```

# hibernate - Hibernate StandardServiceRegistryImpl 不使用默认的方言设置

> ID：13527665
> 
> 赞同：1
> 
> 时间：2012-11-23T10:56:56.937
> 
> 标签：hibernate, service, settings, default

迁移到 Hibernate 4 后，我意识到我们的批处理不起作用，因为没有设置**hibernate.jdbc.batch_size 。**

*配置BatchBuilderImpl*时，它会从 persistence.xml 接收仅包含环境设置和显式配置选项的配置值

快速修复是显式声明**hibernate.jdbc.batch_size** (>1)

问题是，为什么配置包括*BatchBuilderImpl*在内的所有服务的*StandardServiceRegistry*不使用*SettingsFactory*构建的包含方言默认值的设置（*包括***hibernate.jdbc.batch_size**）

# java - 如何将 java.lang.String 转换为 java.util.Timer？

> ID：13527668
> 
> 赞同：0
> 
> 时间：2012-11-23T10:57:07.967
> 
> 标签：java, string, types, timer

我正在从属性文件中读取

> actiontimer = properties.getProperty("action1");

我得到一个字符串，并想将其转换为计时器，以便稍后在我的程序中使用它。

```
private Timer actiontimer 
```

铸造不起作用，我得到：

> 无法从字符串转换为计时器

我该怎么做这个铸造？

**更新：**

在属性文件中格式化：

> 行动1：12314

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T11:06:29.690

将字符串转换为整数。

现在使用[[Timer's Schedule]](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Timer.html#schedule%28java.util.TimerTask,%20long%29)传递一个 int 作为参数。

```
 String s = "12314"; 
        Integer delay = Integer.parseInt(s);
        Timer timer = new Timer(); 
        TimerTask task = new TimerTask() {

            @Override
            public void run() {
                // TODO Auto-generated method stub

            }
        };
        timer.schedule(task, delay); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T10:59:48.660

这是不可能的。字符串是文本表示，而计时器用于基于时间的任务执行

# xaml - Windows 应用项目中不支持类型

> ID：13527671
> 
> 赞同：3
> 
> 时间：2012-11-23T10:57:25.167
> 
> 标签：xaml, windows-runtime, winrt-xaml, windows-store-apps

如何从 XAML 样式或模板中引用类型？WPF 语法在我的 Windows 应用商店项目中不起作用。

IDE 用“Windows 应用程序项目不支持类型”向我咆哮。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-23T10:57:25.167

使用以下语法：

```
<Style TargetType="xmlNamespacePrefix:MyControlClassName" >
    ... 
```

也就是说，您不需要在 Windows Store 和 Phone 应用程序中使用 {x:Type } 语法。

MSDN 说：

> 如果您已将 XAML 用于 Windows Presentation Foundation (WPF)，那么您可能已使用 x:Type 标记扩展来填充任何采用 System.Type 的 XAML 值。Windows 运行时 XAML 分析器不支持 x:Type。相反，您应该在不使用任何标记扩展的情况下按名称引用类型，并且任何必要的 XAML 到支持的类型转换都已由 XAML 解析器中的内置转换行为处理。

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.style.targettype](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.style.targettype)

# forms - 如何在 REST api 中使用模型和表单？

> ID：13527674
> 
> 赞同：0
> 
> 时间：2012-11-23T10:57:33.587
> 
> 标签：forms, api, rest, serialization, symfony

我想知道在 REST api 中发布/放置/修补实体或实体集合并使用 Symfony2 的最佳方法是什么。

我希望能够接受 json（可能还有 xml）作为输入请求，我知道使用 Form 已经可以做到这一点，但我不确定这是否可行。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T09:38:15.917

是的，使用表格似乎是最好的解决方案。这就是表格的用途。

查看[FOSRestBundle](https://github.com/FriendsOfSymfony/FOSRestBundle)，它会为您节省一些时间。

# android-layout - 如何在android xml中使用图像作为边框

> ID：13527675
> 
> 赞同：0
> 
> 时间：2012-11-23T10:57:33.787
> 
> 标签：android-layout

我有一个弹出窗口显示在我的 xml 中。它应该有一个边框。以下是代码：-

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/rl_parent"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:paddingBottom="20dp" >
<RelativeLayout
    android:id="@+id/rl_startpopup"
    android:layout_width="340dp"
    android:layout_height="320dp"
    android:layout_marginLeft="10dp"
    android:layout_marginRight="10dp"
    android:background="@drawable/popup_outline"
    android:orientation="vertical" />    
</RelativeLayout> 
```

popup_outline 是一个形状

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle" >
<gradient
    android:angle="270"
    android:endColor="#192423"
    android:startColor="#4a7669"
    android:type="linear" />
<corners android:radius="8dp" />
<stroke
    android:width="2dp"
    android:color="#e4f4d3" />
</shape> 
```

这是弹出窗口的图像：-

![在此处输入图像描述](../Images/6c39ceae2cd3761ae7039d7c7051ca46.png)

这个“popup_outline”是显示的白色边框。我想使用可重复的图案图像而不是一种颜色作为边框。我必须在 xml 中执行此操作。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T11:33:40.553

您可以使用 FrameLayout 显示边框，在 FrameLayout 内部使用 ImageView 或 RelativeLayout 显示其他内容。

例子：-

```
<FrameLayout 
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/IMAGE_OF_YOUR_CHOICE_WITH_repeatable pattern"
        >
        <RelativeLayout 
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            ></RelativeLayout>
    </FrameLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-22T09:57:11.860

您可以使用任何布局来使用边框，并且在布局内您可以自由使用任何视图或布局，例如 TextView、ImageView

例子：-

`<RelativeLayout android:layout_width="wrap_content" android:layout_height="wrap_content" android:background="@drawable/popupbox" android:padding="50dp"> <TextView android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Your Garage is empty" /> </RelativeLayout>`

# java - 按需填充下拉菜单 Java/Swing？

> ID：13527676
> 
> 赞同：1
> 
> 时间：2012-11-23T10:57:40.307
> 
> 标签：java, swing, user-interface

当我编写弹出菜单时，我可以检查鼠标事件，然后在调用 show() 之前准备菜单。

现在我想要一个类似的下拉菜单功能，它位于菜单栏中。例如，我有以下菜单栏布局：

```
Menu 1
   MenuItem 1.1
      MenuItem 1.1.1
      MenuItem 1.1.2
      ..
      MenuItem 1.1.n
Menu 2 
```

基本上我想在调用下拉菜单时和显示之前动态生成列表 MenuItem 1.1.1, MenuItem 1.1.2, ..., MenuItem 1.1.n。

我怎么能在 Java/Swing 中做到这一点？是否有涵盖菜单栏的 L&F 特定键盘/鼠标调用的回调？

最好的祝福

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T11:37:27.170

您需要使用 a`javax.swing.JMenuBar`而不是 a `java.​awt.MenuBar`。
这些 MenuBar 可以添加`javax.​swing.JMenu`具有`addMenuListener(MenuListener l)`方法的 s。

在此 MenuListener 中，您可以动态添加和删除菜单。

```
@Override
public void menuSelected(MenuEvent e) {
    // Put your logic here
    JMenu dynamicMenu = (JMenu) e.getSource();
    dynamicMenu.add(new JMenuItem("MenuItem 1.1.1"));
}

@Override
public void menuDeselected(MenuEvent e) {
    // Remove all MenuItems
    JMenu dynamicMenu = (JMenu) e.getSource();
    dynamicMenu.removeAll();
}

@Override
public void menuCanceled(MenuEvent e) {
    // Remove all MenuItems
    JMenu dynamicMenu = (JMenu) e.getSource();
    dynamicMenu.removeAll();
} 
```

要将 JMenuBar 添加到 JFrame，请使用该`setJMenuBar(JMenuBar menubar)`方法。

# r - 使用 outer() 替换 R 中的嵌套 for

> ID：13527680
> 
> 赞同：1
> 
> 时间：2012-11-23T10:57:49.033
> 
> 标签：r, outer-join

我有一个简单的 R 代码来将 2x2 矩阵的分量相加

```
sum<-0
for(i in 1:2){ # row
    for(j in 1:2){ #column
      sum<-sum+mat[i,j]
    }
  } 
```

是否可以使用 outer() 或任何其他函数来替换这段代码并使其更高效？我的目标是替换整个代码中的嵌套 for 循环，以减少执行程序所需的时间。

编辑：我也想尝试在代码片段上使用它，例如：

```
for(i in 1:2){ # row
    for(j in 1:2){ #coloumn

      chisqr<- chisqr+ ((mat[i,j]-expmat[i,j])^2)/expmat[i,j]

    }
  } 
```

和：

```
 for(i in 1:2){ # row
    for(j in 1:2){ #coloumn
      rowsum<-0
      colsum<-0

      for(k in 1:2){
        rowsum<- rowsum+mat[i,k]
      }

      for(k in 1:2){
        colsum<- colsum+mat[k,j]
      }

      expmat[i,j]<- (rowsum*colsum)/sum
    }
  } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T11:01:30.653

```
sum(mat) 
```

会成功的。不需要循环或`outer`.

* * *

**基于新问题的更新：**

您可以`expmat`使用以下方法计算`outer`：

```
outer(rowSums(mat), colSums(mat))/sum(mat) 
```

* * *

之后，您可以计算`chisqr`：

```
sum((mat-expmat)^2/expmat) 
```

*顺便说一句*：我建议看看`?chisq.test`。

# java - 当 XML 模式基类型和子类型在其中声明相同的元素时，为什么 JAXB 不在其生成的代码中创建成员变量？

> ID：13527685
> 
> 赞同：1
> 
> 时间：2012-11-23T10:58:04.030
> 
> 标签：java, xml, jaxb, xsd

我有一个关于 JAXB 生成的类的问题。

如您所见，我的模式中声明了一个复杂类型 DG_PaymentIdentification1。它是 PaymentIdentification1 的限制。DG_PaymentIdentification1 也与 PaymentIdentification1 相同。我还有一个名为 DG_CreditTransferTransactionInformation10 的类型，它的基本类型为 CreditTransferTransactionInformation10 并且与它相同。

我在下面包含了相关的 XML 模式片段。

```
<xs:complexType name="DG_PaymentIdentification1">
    <xs:complexContent>
        <xs:restriction base="PaymentIdentification1">
            <xs:sequence>
                <xs:element name="InstrId" type="DG_Max35Text_REF" minOccurs="0"/>
                <xs:element name="EndToEndId" type="DG_Max35Text_REF" id="DG-41"/>
            </xs:sequence>
        </xs:restriction>
    </xs:complexContent>
</xs:complexType>

<xs:complexType name="PaymentIdentification1">
    <xs:sequence>
        <xs:element name="InstrId" type="Max35Text" minOccurs="0"/>
        <xs:element name="EndToEndId" type="Max35Text"/>
    </xs:sequence>
</xs:complexType>

<xs:complexType name="DG_CreditTransferTransactionInformation10">
    <xs:complexContent>
        <xs:restriction base="CreditTransferTransactionInformation10">
            <xs:sequence>
                <xs:element name="PmtId" type="DG_PaymentIdentification1"/>

<xs:simpleType name="DG_Max35Text_REF">
    <xs:restriction base="DG_NotEmpty35">
        <xs:pattern value="[\-A-Za-z0-9\+/\?:\(\)\.,'&#x20;]*"/>
    </xs:restriction>
</xs:simpleType>

<xs:simpleType name="Max35Text">
    <xs:restriction base="xs:string">
        <xs:minLength value="1"/>
        <xs:maxLength value="35"/>
    </xs:restriction>
</xs:simpleType> 
```

JAXB 为 DG_PaymentIdentification1 生成以下 java 类：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "DG_CreditTransferTransactionInformation10")

public class DGCreditTransferTransactionInformation10
     extends CreditTransferTransactionInformation10
{

} 
```

我的问题是为什么 DGCreditTransferTransactionInformation10 生成的类在生成的代码中没有 DG_PaymentIdentification1 类型的变量？基类 CreditTransferTransactionInformation10 确实在其中声明了类型 PaymentIdentification1。

有什么方法可以确保 DGCreditTransferTransactionInformation10 中包含 DG_PaymentIdentification1 吗？

# java - java验证中的正则表达式帮助

> ID：13527688
> 
> 赞同：0
> 
> 时间：2012-11-23T10:58:23.353
> 
> 标签：java, regex

嗨，我想做一些验证。我曾经将正则表达式放在 JS 中，但我对 Java 中的正则表达式很陌生，所以我尝试在 Java 中的类似行上编写代码。这就是我所做的。1）检查字符串中的第一个字符是否是字母数字。2）检查字符串是否至少有1个数字。

所以我写了一个代码，但它总是返回错误。我不确定我是否正确地这样做。

```
 private static boolean checkEmbeddedPassword(final String field) {
            boolean returnValue=true;

            String testpatternAlpha="/^[A-Za-z0-9].+$/";

            String testNumber="/[0-9]/";
            Pattern pattern=Pattern.compile(testpatternAlpha);
            Pattern pattern2=Pattern.compile(testNumber);
            Matcher matcher = pattern.matcher(field);
            Matcher matcher2 = pattern2.matcher(field);
            boolean firstChar=matcher.matches();
            boolean numberFlag=matcher2.matches();
            System.out.println("-----the value of pwd iss-----"+field);
            System.out.println("---------Regex---------Out--put-----"+firstChar);
            System.out.println("---------Regex---------Out- for numeral-put-----"+numberFlag);
            if(firstChar){
                returnValue=false;
            }
            else if(field.contains(" "))
            {
                System.out.println("-----------cannot have space------");
                returnValue=false;
            }
            else if(numberFlag)
            {
                returnValue=false;
            }
            return returnValue;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T11:02:38.517

我们不在`/`java中正则表达式的开头和结尾使用。

试试这个...

```
String testpatternAlpha="^[A-Za-z0-9].+$"; //  first character in string is alphanumeric

String testNumber="[0-9]"; //test single number 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T11:07:05.680

Java 中不需要`/`前缀和后缀：

```
String testpatternAlpha="^[A-Za-z0-9].+$"; 
```

同样在您的情况下，您将希望使用`Matcher.find`而不是`Matcher.matches`. 您可以在 API 文档中阅读原因：http: [//docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Matcher.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Matcher.html)

# java - 使用java连续运行相互关联的方法

> ID：13527691
> 
> 赞同：1
> 
> 时间：2012-11-23T10:58:26.817
> 
> 标签：java, scheduled-tasks

我编写了应用程序，它每 10 分钟从网站下载数据并写入文件。然后将这些文件合并到一个文件中，然后在此合并文件上运行 R 程序以执行情感分析，并将结果存储在 hbase 中。

我想要合并文件、运行 R 然后存储到 HBase 以在下载的数据上连续运行的过程。

为了运行 R，我们从 java 程序运行 R 脚本。我们使用 Runtime.getRuntime().exec() 方法运行 R 程序，但它不等待 R 程序完成并且下一行中的方法开始执行。使用 p.waitFor() 没有帮助。

下面是代码片段。

公共类 runRprogram {

```
public static String rOutputFile; 
public static HashMap catMap;
public static HashMap dtMap;
public static HashMap sentMap;

public static void main(String[] arg) throws IOException, InterruptedException{
    //runR("D:\\workspace\\Out100316.txt","D:\\workspace\\Clean_Out100316");

    cleanupTempFiles();
    mergeFiles();
    rRun();
    Thread.sleep(60000); 
    //sleep for 10 secs and give time for R program to finish

    rOutputFile = "D:\\TweetsData\\TweetsProcessed\\Out1004224944.txt";
    incrementHBaseCounts();

} 
```

公共静态无效 rRun() 抛出 IOException {

```
 Formatter formatter = new Formatter();
        String execom = "C:\\Program Files\\R\\R-2.15.1\\bin\\i386\\Rscript.exe";
        String rpath = "D:\\workspace\\R_scripts\\TextMining.Funtion.R";
        String inputFile = "D:\\TData\\TTemp\\ConcatenatedFile.txt";
        rOutputFile = "D:\\TData\\TProcessed\\Out" + formatter.format("%1$tm%1$td%1$tH%1$tM%1$tS", new Date()) + ".txt";
        String[] command = {"cmd","/c",execom,rpath,inputFile,rOutputFile };
        Runtime.getRuntime().exec(command);
        //Process p = Runtime.getRuntime().exec(command); 
        //int status=p.waitFor();

        System.out.println("R - Program executed");

} 
```

}

我应该使用什么方法进行合并然后运行 ​​R 并最终将结果存储在 Hbase 中？我应该使用计时器类吗？

# macos - CGBitmapContextCreate：不支持的参数组合

> ID：13527692
> 
> 赞同：7
> 
> 时间：2012-11-23T10:58:29.660
> 
> 标签：macos, core-graphics

创建位图上下文时出现此错误：

CGBitmapContextCreate：不支持的参数组合：8个整数位/分量；24 位/像素；三分量色彩空间；kCGImageAlphaNone; 7936 字节/行。

这是代码（请注意，上下文基于现有 CGImage 的参数：

```
context = CGBitmapContextCreate(NULL,
                                (int)pi.bufferSizeRequired.width,
                                (int)pi.bufferSizeRequired.height,
                                CGImageGetBitsPerComponent(imageRef),
                                0,
                                CGImageGetColorSpace(imageRef),
                                CGImageGetBitmapInfo(imageRef)); 
```

宽度为 2626，高度为 3981。我将 bytesPerRow 设为零，以便为我自动计算它，并且它自动选择了 7936。

那么，到底哪里不一致呢？它快把我逼疯了。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-26T08:45:19.140

由于我不明白的原因，我通过将 BitmapInfo 参数设置为`kCGImageAlphaNoneSkipLast`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-23T14:30:54.217

> CGBitmapContextCreate：不支持的参数组合：8个整数位/分量；24 位/像素；三分量色彩空间；kCGImageAlphaNone; 7936 字节/行。

Quartz 2D Programming 文档中列出了[支持的像素格式](https://developer.apple.com/library/ios/documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_context/dq_context.html#//apple_ref/doc/uid/TP30001066-CH203-BCIBHHBB)。不支持 8/3/24 组合，但 8/3/32 支持，与是否使用 alpha 无关。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-31T08:24:48.413

海因里希给了你一个很好的答案背景。只是想我会提供我的具体案例，作为tarmes答案的替代方案。该答案的问题在于，如果您想要存在 Alpha 通道，它并不能解决问题。当我遇到这个问题时，我正在使用[Trevor Harmon 的 UIImage+Alpha](http://vocaro.com/trevor/blog/wp-content/uploads/2009/10/UIImage+Alpha.m)类别。在代码中我发现了这条评论：

```
// The bitsPerComponent and bitmapInfo values are hard-coded to prevent an "unsupported parameter combination" error 
```

现在这个硬编码的修复是在调用的方法之一中`CGBitmapContextCreate`，但不是在它后面的方法中。所以对我来说，这只是按照作者自己的建议用他的其他方法之一解决问题的问题；）

显然，某些部分`CGBitmapInfo`没有从相关图像中正确传递，尽管我不知道为什么。

因此，如果您正在使用 alpha 通道，请在 bitmapInfo 中使用这些常量：`kCGBitmapByteOrderDefault | kCGImageAlphaPremultipliedFirst`

否则，我只想指出，如果您正在处理别名问题，它是一个非常有用的类！

（另外，值得一提的是这个问题只出现在 Xcode 6 中......）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-22T17:15:48.320

我不确定它是否会对任何人有所帮助，我只是遇到了类似的问题并按照建议尝试了，但没有运气。

我的问题是：

```
CCLabelTTF *header_txt = [CCLabelTTF 
   labelWithString:header 
   fontName:fontname fontSize:header_fontsize 
   dimensions:CGSizeMake(header_fontsize*9, txt_h) 
   hAlignment:kCCTextAlignmentLeft 
   vAlignment:kCCVerticalTextAlignmentCenter]; 
```

有错误：

> <错误>：CGBitmapContextCreate：不支持的参数组合：8个整数位/分量；8位/像素；1-分量色彩空间；kCGImageAlphaNone; 2147483648 字节/行。

然后我发现一个错误是header_fontsize没有分配任何值（因为我把fontsize和header_fontsize弄错了）。错误就在这里：`dimensions:CGSizeMake(header_fontsize*9, txt_h)`header_fontsize 未分配任何值（它不是 0，分配`header_fontsize = 0`仍然可以）；重新分配一个值来`header_fontsize`解决问题。

希望这会对类似情况的人有所帮助，例如 Sprite 案例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-07T11:03:16.263

某些像素格式只是不受支持。

您可以提前检查是否支持任何图像：

```
extension CGImage {
  public var hasCGContextSupportedPixelFormat: Bool {
    guard let colorSpace = self.colorSpace else {
      return false
    }
    #if os(iOS) || os(watchOS) || os(tvOS)
    let iOS = true
    #else
    let iOS = false
    #endif

    #if os(OSX)
    let macOS = true
    #else
    let macOS = false
    #endif
    switch (colorSpace.model, bitsPerPixel, bitsPerComponent, alphaInfo, bitmapInfo.contains(.floatComponents)) {
    case (.unknown, 8, 8, .alphaOnly, _):
      return macOS || iOS
    case (.monochrome, 8, 8, .none, _):
      return macOS || iOS
    case (.monochrome, 8, 8, .alphaOnly, _):
      return macOS || iOS
    case (.monochrome, 16, 16, .none, _):
      return macOS
    case (.monochrome, 32, 32, .none, true):
      return macOS
    case (.rgb, 16, 5, .noneSkipFirst, _):
      return macOS || iOS
    case (.rgb, 32, 8, .noneSkipFirst, _):
      return macOS || iOS
    case (.rgb, 32, 8, .noneSkipLast, _):
      return macOS || iOS
    case (.rgb, 32, 8, .premultipliedFirst, _):
      return macOS || iOS
    case (.rgb, 32, 8, .premultipliedLast, _):
      return macOS || iOS
    case (.rgb, 64, 16, .premultipliedLast, _):
      return macOS
    case (.rgb, 64, 16, .noneSkipLast, _):
      return macOS
    case (.rgb, 128, 32, .noneSkipLast, true):
      return macOS
    case (.rgb, 128, 32, .premultipliedLast, true):
      return macOS
    case (.cmyk, 32, 8, .none, _):
      return macOS
    case (.cmyk, 64, 16, .none, _):
      return macOS
    case (.cmyk, 128, 32, .none, true):
      return macOS
    default:
      return false
    }
  }
} 
```

有关更多信息（以及支持的像素格式列表），请参阅[https://developer.apple.com/library/archive/documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_context/dq_context.html](https://developer.apple.com/library/archive/documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_context/dq_context.html)

# apache-flex - 如何将动态数据放入flex中的文本框？

> ID：13527699
> 
> 赞同：0
> 
> 时间：2012-11-23T10:59:01.110
> 
> 标签：apache-flex, autocomplete

实际上，在我的 Flex 应用程序中，我从数据库中获取值并存储到 ArrayCollection... [Bindable]public var data : ArrayCollection; …………

```
Actually ArrayCollection data contain values like...java,flex,dotnet,php..... 
```

所以现在我将此 ArrayCollection 添加到文本框中以获取动态值，就像自动建议一样

但它只提供一次所有数据，但我希望当我们动态键入“J”时，将显示“J”相关的单词....

请帮我....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:03:15.720

您要查找的组件类型称为 AutoComplete。那里有很多实现，但我最喜欢的是[Flextras AutoCompleteComboBox](https://www.flextras.com/index.cfm?event=ProductHome&productID=19)，因为我构建了它。它可免费用于生产；但是您必须注册才能下载 SWC。

# windows - 使用快捷方式或批处理文件将文件移动到相对位置

> ID：13527701
> 
> 赞同：0
> 
> 时间：2012-11-23T10:59:06.500
> 
> 标签：windows, batch-file, shortcut

我正在尝试创建一个快捷方式批处理文件以位于 windows'send to' 菜单中，该菜单将文件发送到相对于文件当前文件路径的位置。

因此，例如，我希望创建一个存档快捷方式以粘贴在 ocntext 菜单中，该菜单将按如下方式移动文件

```
C:\cheese\stilton.txt > C:\cheese\archive\stilton.txt 
```

或者

```
C:\biscuits\hobnobs.txt > C:\biscuits\archive\hobnobs.txt 
```

但我不明白如何捕获当前文件路径并将其传递给批处理\快捷方式。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:59:29.363

有趣的是，当使用`..`.

简单地说，`move "%1" "%1"\..\archive`也有效。;-) 虽然不是一个干净的方式。:-)
还要确保你`mkdir "%1"\..\archive`在移动之前做。

此外，您可以考虑将其添加到注册表中，而不是发送至；特定于文件类型。
对于文本文件，.reg 文件如下所示：

```
Windows Registry Editor Version 5.00

[HKEY_CLASSES_ROOT\txtfile\shell\movefile]
@="Move to archive"
[HKEY_CLASSES_ROOT\txtfile\shell\movefile\command]
@="cmd /c mkdir \"%1\"\\..\\archive & move \"%1\" \"%1\"\\..\\archive " 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:03:24.493

在批处理文件中，您可以使用 获取第一个参数`%~dp1`的路径，或者仅使用 获取路径`%~p1`。这意味着您需要将完整的文件名与批处理文件的路径一起传递。

要在批处理文件中使用它，例如移动文件，您可以执行以下操作：

```
@echo off
setlocal enabledelayedexpansion
set fn=%~1
move "!!fn!!" "%~p1archive" 
```

从文件名中`%~1`删除引号，我只是出于习惯这样做。

`%~p1`扩展为文件的路径，并附加一个斜杠。

请注意，我没有在这里检查目录是否存在，这应该很简单......在移动之前添加这一行来创建它：

```
md "%~p1archive" 
```

# android-layout - Android XML：创建独特布局的百分比高度和宽度

> ID：13527703
> 
> 赞同：2
> 
> 时间：2012-11-23T10:59:11.810
> 
> 标签：android-layout

我听说过很多关于重量等的信息。但是大多数教程总是提到宽度百分比。我希望对布局进行以下设置： ![在此处输入图像描述](../Images/af245e2d5932b4a1ea2c938e9d67196e.png)

有人知道怎么做吗？我被困住了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T14:04:24.450

## 编辑 ：

由于现在存在[百分比支持库](https://developer.android.com/tools/support-library/features.html#percent)，因此不再需要使用`LinearLayout`带有权重的 a。

* * *

好吧，你的第一个布局应该很简单，检查以下代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="horizontal"
        android:weightSum="3" >

        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:orientation="vertical"
            android:weightSum="5" >

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="0dp"
                android:layout_weight="3"
                android:background="@android:color/darker_gray" >
            </LinearLayout>

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="0dp"
                android:layout_weight="2"
                android:background="@android:color/white" >
            </LinearLayout>
        </LinearLayout>

        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:orientation="vertical"
            android:weightSum="9" >

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="0dp"
                android:layout_weight="3"
                android:background="@android:color/holo_red_light" >
            </LinearLayout>

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="0dp"
                android:layout_weight="6"
                android:background="@android:color/holo_orange_light" >
            </LinearLayout>
        </LinearLayout>

        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:orientation="vertical"
            android:weightSum="9" >

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="0dp"
                android:layout_weight="6"
                android:background="@android:color/holo_blue_dark" >
            </LinearLayout>

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="0dp"
                android:layout_weight="3"
                android:background="@android:color/holo_green_dark" >
            </LinearLayout>
        </LinearLayout>
    </LinearLayout>

</LinearLayout> 
```

输出：

![输出](../Images/170b237726ebafc6baccdb66b65bfa12.png)

第二个似乎不可能与权重有关。此外，我建议您不要使用太多带有权重的嵌套线性布局，因为根据以下[链接，这是一个巨大的性能问题](http://www.curious-creature.org/2009/02/22/android-layout-tricks-1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:26:13.317

> android:layout_weight=".YOURVALUE" 是实现百分比的最佳方式

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >
<TextView
    android:id="@+id/logTextBox"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight=".20"
    android:maxLines="500"
    android:scrollbars="vertical"
    android:singleLine="false"
    android:text="@string/logText" >
</TextView>

</LinearLayout> 
```

# magento - Maento 产品在交叉销售、追加销售和搜索结果列表页面中获取错误的 URL

> ID：13527709
> 
> 赞同：1
> 
> 时间：2012-11-23T10:59:35.773
> 
> 标签：magento, url, product

嗨，我在 magento 有网站。它在购物车、交叉销售、追加销售和购物车页面上升级后创建重复的 URL。我尝试了很多方法也做了很多谷歌搜索。但没有运气..就是这种情况

原始网址

[http://www.test.com/new/inner/myself-antena.html](http://www.test.com/new/inner/myself-antena.html)

SKU 的新的重复 URL：ZE-1925

[http://www.test.com/catalog/product/view/id/4951/s/myself-antena.html](http://www.test.com/catalog/product/view/id/4951/s/myself-antena.html)

你能帮我做点什么吗？？？？？？

# jquery - jquery 如何删除元素并保留 .next() 引用

> ID：13527715
> 
> 赞同：0
> 
> 时间：2012-11-23T10:59:46.547
> 
> 标签：jquery, reference

我被 jquery 选择器困住了。我有以下代码

```
 var $tab=this.$tab_pages.find("li#abc");
    var $nextTab=$tab.next();               
    $tab.remove(); 
```

删除变量 $nextTab 后，它变得未定义，我不能再用它做任何事情了。我试图克隆对象或只是隐藏 $tab 然后将其删除但没有成功。

有什么帮助吗？有人可以解释一下为什么 $nextTab 是未定义的吗？

谢谢

吉塞拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:43:52.160

您的示例中有一些错误。这是固定版本...

[http://jsfiddle.net/mYAj7/15/](http://jsfiddle.net/mYAj7/15/)

```
var x = $("#tab-page li.tabactive").next();
$("#tab-page li.tabactive").remove();
console.log(x);​ 
```

您试图选择`li:tabactive`- 它应该是`li.tabactive`

你试图删除`li.active`，而不是`li.tabactive`

您没有在框架下拉菜单中选择 jQuery

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:02:23.980

try this

```
var $tab=this.$tab_pages.find("li#abc");
var $nextTab=$tab.next().clone();               
$tab.remove(); 
```

**EDITED CODE**

According to fiddle you have posted your code should be like this , check this working [fiddle](http://jsfiddle.net/jLxuq/)

```
var x = $("#tab-page li.tabactive").next();
$("#tab-page li.tabactive").remove();
console.log(x); 
```

# javascript - 如何停止 jquery .load 覆盖 div 内的信息

> ID：13527721
> 
> 赞同：0
> 
> 时间：2012-11-23T11:00:04.410
> 
> 标签：javascript, jquery

我使用 jquery .load 函数从当前页面上的 div(page_content) 内的其他页面加载 divs(left) 但是当我使用 load 函数在 page_content 中加载另一个 div(right) 时，它会覆盖里面的所有内容div（页面内容）。我只想将它添加到 div 中。

这是我的代码：

`function load(){ $('#page_content').load('test.php .left');}`

`function load2(){ $('#page_content').load('test2.php .right'); }`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:02:47.517

您可以使用`callback function to convert two call to single call and get the .left and right content in the call to assign to your element with id page_content`,

```
$('#page_content').load('test.php', function(result){
  leftContent = $(result).find('.left').html();
  leftRight = $(result).find('.right').html();
  $(this).html($(leftContent + leftRight ).find('')
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:06:43.043

试试这个

```
function load(){ $('#page_content').load('test.php .left');}

$.ajax({
  url: 'test2.php .right',
  success: function(data) {
     $('#page_content').append(data);
  }
}); 
```

# c# - 保存相对于我的站点在 IIS 中运行的内容目录的图像

> ID：13527723
> 
> 赞同：0
> 
> 时间：2012-11-23T11:00:32.147
> 
> 标签：c#, iis, file-upload

我想将从 asp mvc 页面上传的图像保存到 content/img/ 文件夹，该文件夹与我的站点在 IIS 中运行的位置相关。但我不想将文件系统上的位置硬编码为绝对路径，因为这很容易改变。这是我用来保存它们的代码。

```
 public static string SaveCompanyLogoImage(HttpPostedFileBase file)
        {
            var newFileName = GetNewCompanyLogoFileName(file.FileName);
            file.FileName = newFileName;
            file.SaveAs(//relative-location-here);
            return Path.GetFileNameWithoutExtension(last);
        } 
```

希望这能解释我的问题！

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:02:30.200

使用 Server.MapPath("~/MyImagesFolder")

[http://msdn.microsoft.com/es-es/library/system.web.httpserverutility.mappath.aspx](http://msdn.microsoft.com/es-es/library/system.web.httpserverutility.mappath.aspx)

# jquery - 在 div 中按比例放置图像 - 永远不应剪切图像

> ID：13527727
> 
> 赞同：1
> 
> 时间：2012-11-23T11:00:55.150
> 
> 标签：jquery, css, image, responsive-design

我已经阅读了一堆关于在 div 中拟合图像的帖子，但还没有解决我的问题：

我有一个响应式网页设计，将容器 div 的高度设置为浏览器窗口高度，然后将图像加载到 flexslider 中。大多数图像将大于浏览器视口。

我的问题是我可以使照片正确地适应宽度，但图像永远无法正确调整高度。请参阅[http://stineheilmann.dk/portfolio/shoes/](http://stineheilmann.dk/portfolio/shoes/)（图片编号 3）

如何确保图片始终保持在包含的 div 内，同时保持纵横比？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T11:11:03.433

有浏览器限制吗？你在寻找类似[这个演示](http://cssdeck.com/labs/full/gu4wvptx/0)的东西吗？

CSS

```
.frame{width:300px;height:300px;padding: 2px; border:1px solid #ccc;margin:5px;}
.frame img{max-width:100%;max-height:100%;} 
```

HTML将类似于

```
<div class="frame">
    <img src="http://farm8.staticflickr.com/7251/8165766003_0e57a95b55.jpg"/>
</div>
<div class="frame">
    <img src="http://farm8.staticflickr.com/7251/8165766003_0e57a95b55.jpg"/>
</div> 
```

更新：我已经用三个不同纵横比的图像更新了演示，这些图像适合 div，而不会歪斜或溢出 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:11:40.633

只需将此 CSS 添加到以下选择器中：

```
.flexslider .slides img {
    height:100%;
    ....
} 
```

# php - 为什么这个 if else 条件不能正常工作

> ID：13527730
> 
> 赞同：0
> 
> 时间：2012-11-23T11:01:14.350
> 
> 标签：php, mysql, if-statement

$taskid=$this->privacy();

```
 if($taskid){I returning something in one function and then by reference to this return,I am fetching data from another table in second function using if condition in such a way that if data(return) found in first table then execute else leave empty 
```

但是我在第一个表中找到了数据然后一切都很好，但是在第一个表中找不到数据然后它显示为注意：未定义的变量：任务在....

我认为如果其他情况出现错误。请帮助或建议任何替代方法。

请注意，我正在研究价格表

第一个函数返回行

```
function privacy()
{
   $session=new session();

   $sql2=mysqli_query($this->db->connection,"SELECT * from privacy where viewerid='$session->userid'");
   while($row2=mysqli_fetch_array($sql2)){
     $task[]=$row2['task'];
   }
   return $task;
 } 
```

功能 2 .. 如果发现了什么然后做其他什么什么都不做（但错误显示为未定义的变量）

```
 function showactivityo4apply()
 {
    $session=new session();
    $taskid=$this->privacy();
    if($taskid){
       foreach($taskid as $fvid){
         $sql=mysqli_query($this->db->connection,"SELECT * FROM activity where id='$fvid'");
         while($row=mysqli_fetch_array($sql)){
            $name_id=$row['sub_id'];  
            echo  $name;                   
          }
        }
     }      
     else{}
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:07:37.483

如果条件有 == 符号不 = 符号

```
if($taskid==$this->privacy()){
}
 else
{
} 
```

= 表示给另一个赋值

== 检查其他变量的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:08:38.100

它显示了通知，因为 php 没有在关键“任务”的数组中获取值使用 isset() 函数来检查数据是否可用这样使用

```
$task[] = (isset($row2['task'])?$row2['task']:''; 
```

如果 $row2['task'] 中没有设置值，那么它将在 $task[] 数组中分配空白值。

还有一个你必须做的改变

而不是 if($taskid) 条件使用

```
if( count($taskid) > 0){
} 
```

这样如果在数组中找不到记录，它就不会进入循环

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T11:12:51.857

```
please change this line of your code like: 

  $sql2=mysqli_query($this->db->connection,"SELECT * from privacy where 
viewerid='$session->userid'");
=========================================
to
=============================
  $sql2=mysqli_query($this->db->connection,"SELECT * from privacy where 
viewerid='" . $session->userid . "'");

 ======================= 
```

结论：这里没有找到 $session->userid 这就是为什么你没有得到结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T11:04:24.523

`if($taskid=$this->privacy())`正在分配值`$this->privacy()`to`$taskid`

我想你的意思是

`if($taskid == $this->privacy())`

# iphone - 从子视图中获取 CGContextRef

> ID：13527731
> 
> 赞同：0
> 
> 时间：2012-11-23T11:01:16.253
> 
> 标签：iphone, uiview, cgcontextref

我正在使用`UIGraphicsGetCurrentContext()`为 UI 元素创建渐变背景，但我想我误解了绘图的位置。我希望绘图发生在子视图上，但它发生在视图本身中。

我认为问题在于，当我使用 时`UIGraphicsGetCurrentContext()`，我得到了一个`CGContextRef`视图，所以这就是进行绘图的地方。我想要做的是在子视图上进行绘图，这样我就可以使用其他相关的子视图淡入淡出。可以这样做，还是我需要为背景层创建另一个 UIView 子类？

这是我正在使用的代码的简化，我的目标是能够淡入和淡出背景渐变，`topBar`同时保持`InterfaceControlsView`视图可见。

```
@implementation InterfaceControlsView

- (id)initWithFrame:(CGRect)frame
{
    topBar = [[UIView alloc]  initWithFrame:CGRectMake(0.0, 20.0, self.frame.size.width, 45.0)];
/* etc. */
}

- (void)drawRect:(CGRect)rect {
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGRect rect = topBar.frame; // topBar is a subview

    CGContextSaveGState(context);
    CGContextAddRect(context, rect);
    CGContextClip(context);
    CGContextDrawLinearGradient(context, gradient, startPoint, endPoint, 0);
    CGContextRestoreGState(context);
    /* etc. */
}
@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T11:30:01.670

要为子视图创建渐变背景，您不需要创建子类，使用渐变层。希望这可以帮助

```
CALayer *layer = _button.layer;
layer.borderWidth = 1.0f;
layer.borderColor = [UIColor lightGrayColor].CGColor;

CAGradientLayer *gLayer = [CAGradientLayer layer];
[gLayer setName:@"gradient"];

gLayer.frame = layer.bounds;

gLayer.colors = [NSArray arrayWithObjects:
                         (id)[UIColor colorWithRed:26.0/255.0 green:94.0/255.0 blue:74.0/255.0 alpha:1.0].CGColor,
                         (id)[UIColor colorWithRed:23.0/255.0 green:59.0/255.0 blue:37.0/255.0 alpha:1.0].CGColor,
                         nil];
[layer addSublayer:gLayer]; 
```

# php - 根据使用 jquery 和 php 在第一个下拉列表中选择的元素，在第二个下拉列表中添加元素

> ID：13527734
> 
> 赞同：1
> 
> 时间：2012-11-23T11:01:30.110
> 
> 标签：php, html, drop-down-menu

我正在尝试根据用户在下拉列表中选择的州填充城市。

我在 jquery 中有一个函数定义为：

```
function onchange1(dropdownmenu,field_name,id)
{
  alert(field_name);

  $.post(
  'wppb.city.php', 
  { field_name: id},
  function(data) {
    alert(data);
    $('#'+dropdownname).html(data);

    alert("Data Loaded: " + data);
  });   

  alert($('#'+dropdownname).html());
} 
```

我正在尝试从调用此函数的位置获取值。我在 html 标签中将此函数称为：

```
<select name="state" id=state onChange="onchange1(city,state,this.value);"> 
```

其中city是我的第二个下拉菜单的名称，state是field_name，this.value是id。

但是当这个函数被调用并且被警告时它显示[objectHTMLSelectElement]。

如何从 HTML 中检索值并在 jquery 函数中使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T11:53:20.277

我相信你想要的是

```
$('#'+field_name.id).val() 
```

您可能还想查看 serializeObject ，一篇很好的帖子是[使用 jQuery 将表单数据转换为 JavaScript 对象](https://stackoverflow.com/questions/1184624/convert-form-data-to-js-object-with-jquery)

# css - CSS 无法在 Internet Explorer 和歌剧中正确显示

> ID：13527735
> 
> 赞同：2
> 
> 时间：2012-11-23T11:01:32.680
> 
> 标签：css, cross-browser

我用 CSS 制作了漂亮的旋转轮，它在你命名的 mozilla firefox、chrome、safari、android 股票浏览器中完美呈现。

唯一的例外是 Internet Explorer 和 Opera。渲染它非常难看，我似乎找不到它的根本原因是它没有正确渲染，因为我读过的内容我正确地遵循了说明......

看下面的区别： ![在此处输入图像描述](../Images/566058c7ad39ac3dc8a163e6b8e513e9.png)

[http://jsfiddle.net/cyLrm/2](http://jsfiddle.net/cyLrm/2)

我认为问题主要在于以下CSS代码：

```
background-image: -moz-radial-gradient(75% 20%, circle closest-corner, #ffffff, #ff0d0d 100px);
background-image: -webkit-radial-gradient(65% 50%, circle closest-corner, #ffffff, #ff0d0d 100px);
background-image: -o-radial-gradient(75% 20%, circle closest-corner, #ffffff, #ff0d0d 100px);
background-image: -ms-radial-gradient(75% 20%, circle closest-corner, #ffffff, #ff0d0d 100px);
background-image: radial-gradient(75% 20%, circle closest-corner, #ffffff, #ff0d0d 100px); 
```

另外，如果有人知道在 IE 下制作 css 动画的方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:09:27.497

据我所知，Internet Explorer 8-9 不支持渐变背景和动画。我不知道歌剧你应该检查规格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:04:31.000

据我所知，IE 对于实现 CSS3 来说是很糟糕的。您是否在 HTML 中添加了 DOCTYPE？这可能会解决 IE 问题。就 Opera 而言，我不知道 DOCTYPE 修复是否会起作用。

# sql - HSQL - 删除/创建类型

> ID：13527738
> 
> 赞同：1
> 
> 时间：2012-11-23T11:01:43.633
> 
> 标签：sql, hsqldb

这应该很简单，但还没有找到答案。

我只想在类型 A 不存在的情况下创建它和/或在类型 A 已经存在的情况下删除它，并在我的 HSQL 数据库启动时重新创建它。

现在我知道了 drop 和 create 命令：

```
CREATE TYPE myType as VARCHAR(100)
DROP TYPE myType 
```

但是我还没有辨别如何检查类型的存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T11:24:35.710

其实很简单：

```
DROP TYPE myType IF EXISTS 
```

# c# - 在 C# 元数据中创建不等的年龄段

> ID：13527739
> 
> 赞同：0
> 
> 时间：2012-11-23T11:01:48.220
> 
> 标签：c#, function, date, math, metadata

我需要使用 Visual Studio 2010 使用 Metada 方法从 C# 中的患者数据集创建一组不相等的年龄分组

年龄组 <= 40, 41-50, 51-60, 61-70, 70+

目前我们有一些代码来做 5 岁年龄组：

```
public string AgeGroup5Yrs
    {
        get
        {
            int range = Math.Abs(Age / 5) * 5;
            return string.Format("{0} - {1}", range, range + 5);
        }
    } 
```

还有一些 10 年（同等年龄组）

```
public string AgeGroup
    {
        get
        {
            int range = Math.Abs(Age / 10) * 10;
            return string.Format("{0} - {1}", range, range + 10);
        }
    } 
```

但是我需要一些不平等的群体！有任何想法吗？我是 C# 新手，所以任何帮助都很有用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:35:29.217

这使用`Array.BinarySearch`所以应该非常高效。`indexOf`最终包含下一个较大边界的索引。

```
static int[] boundaries = new[] { 40, 50, 60, 70 };
static string AgeGroupFor
{
    get
    {
        int indexOf = Array.BinarySearch(boundaries, Age);
        if (indexOf < 0)
            indexOf = ~indexOf;
        if (indexOf == 0)
            return "<= " + boundaries[0];
        if (indexOf == boundaries.Length)
            return (boundaries[boundaries.Length - 1]) + "+";
        return (boundaries[indexOf - 1]+1) + "-" + boundaries[indexOf];
    }
} 
```

或者，您可以预先计算字符串：

```
static int[] boundaries = new[] { 40, 50, 60, 70 };
static string[] groups = new[] { "<= 40", "41-50", "51-60", "61-70", "70+" };
static string AgeGroupFor
{
    get
    {
        int indexOf = Array.BinarySearch(boundaries, Age);
        if (indexOf < 0)
            indexOf = ~indexOf;
        return groups[indexOf];
    }
} 
```

# android - Is it Possible ,To access Name from Inbox in Android?

> ID：13527745
> 
> 赞同：0
> 
> 时间：2012-11-23T11:02:04.537
> 
> 标签：android, message, android-contentprovider, android-contacts, inbox

I am develop an App in which I access **Message from body,Mobile Number from address,message id,person-gives a int value**( i don't know about what is person) from this code:----

```
 Uri uriSMSURI = Uri.parse("content://sms/inbox");
 Cursor cur = getContentResolver().query(uriSMSURI , null, "read=0",
                null, null); 
```

Its working fine:--- now the **problem** is that--If any mobile number is saved in my mobile contact list than i want to show the name in my `ListView` otherwise I want to show the mobile `number` which i access from `address` feed. How I will get Name from the Inbox `Uri`? Any Help will be Appreciated.

Thanks & Regards, Deepanker

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:08:43.107

需要尝试这段代码

```
public String findNameByAddress(Context ct,String addr)
        {
             Uri myPerson = Uri.withAppendedPath(ContactsContract.CommonDataKinds.Phone.CONTENT_FILTER_URI,
                        Uri.encode(addr));

             String[] projection = new String[] { ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME };

                Cursor cursor = ct.getContentResolver().query(myPerson,
                        projection, null, null, null);

                if (cursor.moveToFirst()) {

                    String name=cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));

                    Log.e("","Found contact name");

                    cursor.close();

                    return name;
                }

                cursor.close();
                Log.e("","Not Found contact name");

                return addr;
        } 
```

和

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:18:57.233

```
String contact=address;
                           Uri uri = Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI, Uri.encode(address));  
                           Cursor cs= context.getContentResolver().query(uri, new String[]{PhoneLookup.DISPLAY_NAME},PhoneLookup.NUMBER+"='"+address+"'",null,null);

                           if(cs.getCount()>0)
                           {
                            cs.moveToFirst();
                            contact=cs.getString(cs.getColumnIndex(PhoneLookup.DISPLAY_NAME));
                           } 
```

# mysql - calculate total count

> ID：13527747
> 
> 赞同：-1
> 
> 时间：2012-11-23T11:02:08.813
> 
> 标签：mysql

We have table structure and data like

```
Id | startdate | enddate   | price
1\. |  1 jan    | 30 Jan    | 100
2  |  1 Feb    | 28 Feb    | 200
3\. |  1 March  |  31 March | 300 
```

Now I want to calculate total price between the date range. Like from 1 Jan to 28 Feb total count will be 300, from 1 Feb to 31 March total count will.be 500, how to write query for this

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:07:04.820

您需要以[DATE](http://dev.mysql.com/doc/refman/5.0/en/datetime.html)格式存储日期。然后，我们将简单地在具有适当条件的表上执行[SUM 。](http://www.tizag.com/mysqlTutorial/mysqlsum.php)`WHERE`

```
SELECT SUM(price) FROM tablename WHERE startdate > '2012-01-01' AND enddate < '2012-02-28' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:06:38.797

如果这些存储为日期字段，您可以执行类似的操作

```
Select SUM(Price) from Table where startdate > DD/MM/YYYY and enddate < DD/MM/YYYY 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T11:05:11.373

像这样的东西，

```
SELECT SUM(price) FROM [TABLE_NAME] WHERE DATE BETWEEN '2012-01-01' AND '2012-02-28' 
```

请注意，这可能不是正确的 MySQL 语法，但您明白了。

# c# - Asp.net Mvc 3 / C# 中的多个条件查询

> ID：13527748
> 
> 赞同：1
> 
> 时间：2012-11-23T11:02:09.437
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, c#-4.0

我正在使用 asp.net mvc3，我将实现高级搜索
这是我的高级搜索表单

```
 @using (Html.BeginForm("AdvanceSearch","Coupon",FormMethod.Post))
    {
        @Html.ValidationSummary(true)
        <fieldset>

            <div class="editor-label">
                @Html.LabelFor(model => model.AdvanceSearch.CouponName)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.AdvanceSearch.CouponName)
                @Html.ValidationMessageFor(model => model.AdvanceSearch.CouponName)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.AdvanceSearch.Category)
            </div>
            <div class="editor-field">
                @Html.DropDownList("categories", new SelectList(Model.AdvanceSearch.Category.OrderBy(c=>c.Name).Select(c => c.Name)), "--- Select Categories ---")
                @Html.ValidationMessageFor(model => model.AdvanceSearch.Category)
            </div>
            <div class="editor-label">

                <div class="editor-label">
                    @Html.LabelFor(model => model.AdvanceSearch.CreateDate)
                </div>
                <div class="editor-field">
                    @Html.EditorFor(model => model.AdvanceSearch.CreateDate, new { @class = "picker" })
                    @Html.ValidationMessageFor(model => model.AdvanceSearch.CreateDate)
                </div>

                <div class="editor-label">
                    @Html.LabelFor(model => model.AdvanceSearch.ExpiredDate)
                </div>
                <div class="editor-field">
                    @Html.EditorFor(model => model.AdvanceSearch.ExpiredDate, new { @class = "picker" })
                    @Html.ValidationMessageFor(model => model.AdvanceSearch.ExpiredDate)
                </div>

                <div class="editor-label">
                    @Html.LabelFor(model => model.AdvanceSearch.PublishDate)
                </div>
                <div class="editor-field">
                    @Html.EditorFor(model => model.AdvanceSearch.PublishDate, new { @class = "picker" })
                    @Html.ValidationMessageFor(model => model.AdvanceSearch.PublishDate)
                </div>
                @Html.LabelFor(model => model.AdvanceSearch.Company)
            </div>
            <div class="editor-field">
                @Html.DropDownList("companies", new SelectList(Model.AdvanceSearch.Company.OrderBy(c=>c.Name).Select(c => c.Name)), "--- Select Companies ---")
                @Html.ValidationMessageFor(model => model.AdvanceSearch.Company)
            </div>
            <div class="editor-label">
                @Html.LabelFor(model => model.AdvanceSearch.Description)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.AdvanceSearch.Description)
                @Html.ValidationMessageFor(model => model.AdvanceSearch.Description)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.AdvanceSearch.IsPublish)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.AdvanceSearch.IsPublish)
                @Html.ValidationMessageFor(model => model.AdvanceSearch.IsPublish)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.AdvanceSearch.Active)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.AdvanceSearch.Active)
                @Html.ValidationMessageFor(model => model.AdvanceSearch.Active)
            </div>

            <p>
                <input type="submit" value="Search" />
            </p>
        </fieldset>
    } 
```

现在的问题是我有以下情况

*   如果只给出 CouponName 则返回所有包含指定名称的优惠券
*   如果从公司列表中选择了任何公司，那么我们将搜索该公司的所有具有指定名称的优惠券将被返回
*   如果从类别列表中选择了任何类别，那么我们将搜索该类别中具有指定名称的所有优惠券将被返回
*   如果选择了所有三个日期中的任何日期，那么我们将在该日期之前过滤优惠券

现在我很困惑，最好的方法是什么，我应该执行`if else`条件，`switch`还是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:13:02.810

不确定是否有“最佳方法”。这完全取决于您如何应用过滤器。

我使用 LINQ 来应用过滤器，并且喜欢使用基本表达式编写过滤器构造，然后为每个提供的过滤器选择使用 AND 表达式。我使用一些扩展方法使这更容易。然后您可以逐步构建您的过滤器表达式，并且随着它变得更加复杂，您可以相应地实施步骤。每个基本步骤都会有一个 if 检查以查看是否指定了特定部分，以及是否将其附加到基本表达式。

```
// Example of service for applying filter
public GetProductsResponse GetProducts(GetProductsRequest request)
{
    // base expression is true, ie always returns everything
    Expression<Func<ProductEntity, bool>> filterExpression = i => true;

    // subsequent filters narrow base expression results
    if (!request.IncludeDeleted)
        filterExpression = filterExpression.And(i => i
            .IsDeleted == false);

    // I like to use nullable types so that I can check whether a parameter is specified or not
    if (request.CouponName != null)
        filterExpression = filterExpression.And(i => 
            i.CouponName == request.CouponName.Value);

    if (request.Company!= null)
        filterExpression = filterExpression.And(i => 
            i.Company== request.Company.Value);

    // etc.

    var products = _dataContext.Products.Where(filterExpression);

    // you probably want to transform products into some sort of model specific class

    return new GetProductsRequest
    {
        products = products;
    };
}

// Extension methods for Linq And and Or helpers
public static class Utility
{
    public static Expression<T> Compose<T>(this Expression<T> first, Expression<T> second, Func<Expression, Expression, Expression> merge)
    {
        // build parameter map (from parameters of second to parameters of first)
        var map = first.Parameters.Select((f, i) => new { f, s = second.Parameters[i] }).ToDictionary(p => p.s, p => p.f);

        // replace parameters in the second lambda expression with parameters from the first
        var secondBody = ParameterRebinder.ReplaceParameters(map, second.Body);

        // apply composition of lambda expression bodies to parameters from the first expression 
        return Expression.Lambda<T>(merge(first.Body, secondBody), first.Parameters);
    }

    public static Expression<Func<T, bool>> And<T>(this Expression<Func<T, bool>> first, Expression<Func<T, bool>> second)
    {
        return first.Compose(second, Expression.And);
    }

    public static Expression<Func<T, bool>> Or<T>(this Expression<Func<T, bool>> first, Expression<Func<T, bool>> second)
    {
        return first.Compose(second, Expression.Or);
    }
} 
```

# salesforce - How to add comments in SOQL

> ID：13527752
> 
> 赞同：9
> 
> 时间：2012-11-23T11:02:19.157
> 
> 标签：salesforce, soql

Is it possible to put comments in SOQL?

The Force.com explorer doesn't support basic operations like undo/redo and I can't find any way to enter comments so experimenting with queries is painful.

I've tried all the usual suspects --, #, /*, //

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-23T11:16:35.147

不，我认为没有办法在 SOQL 中使用注释。不过，您可以注释掉您在 Apex 中发出的查询。

除了基于 Flash 的官方资源管理器和 Eclipse IDE 中缓慢的查询实用程序之外，您可能更喜欢一些工具。

我最喜欢的是[Real Force Explorer](https://bitbucket.org/brsanthu/real-force-explorer/wiki/Home) - 具有 SOQL 和 Apex 片段的可搜索历史记录，如果您有多个查询（例如在 Oracle 的 SQLDeveloper 中），您可以选择要运行的片段...

我也听说过一些关于[BrainEngine](http://www.brainengine.net/)的好东西，还没有尝试过（基本版是免费的，多花点钱）。截图看起来很诱人；）

您可能还喜欢官方[Workbench](http://wiki.developerforce.com/page/Workbench)等基于 Web 的工具- 如果您不喜欢在官方托管的工具中提供凭据，您可以下载它并将其托管在您自己的机器上。

最后但并非最不重要的一点 - [JitterBit 数据加载器](http://www.jitterbit.com/salesforce/data-loader)前段时间被提升为在设置页面中列出。也没有玩过它（可能它只是一个数据加载器，不太适合查询编辑器任务）。

如果您是 SQL Server 人员 - 请查看[DBAmp](http://forceamp.com/)（再次 $$$）。我怀疑它是 Salesforce 的唯一连接器，必须进行更多类似 ODBC 的翻译尝试。所以你也许可以为你最喜欢的 SQL 编辑器找到一个插件。

*（不，我与这些链接背后的任何公司或项目都没有关系）*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-15T14:16:03.083

如果您在 Apex 内编写内联 SOQL，您可以添加 Apex 注释。块注释和单行注释都有效。

您可以在 Developer Console 的 Execute Anonymous 窗口中验证这一点：

```
List<Account> accounts = [
    SELECT ID From Account
    // single line comment
    WHERE Name = 'Test' /* block comment */
]; 
```

执行日志显示注释已从实际查询中删除：

```
SOQL_EXECUTE_BEGIN [1]|Aggregations:0|SELECT ID FROM Account WHERE Name = 'Test' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-20T19:16:39.713

我使用 VisualSoftwareSystems.net 的 SOQL Studio。它支持行注释和块注释以及完整的语法突出显示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-18T18:20:08.500

好的，在 SOQL 中你没有通常的评论机制。所以现在是布尔幻象的时候了：附加一个**永远不会为真**但包含注释信息的 OR 子句。像这样的东西：

SELECT id FROM Account WHERE Name = 'IBM' OR Name = '这是解释此查询用途的注释文本'

这一点hackery会稍微减慢查询速度......但是如果您只是必须将注释放在SOQL中（而不是在调用它的行尾），它确实有效。

# css - HTML5 video css background color on iPad

> ID：13527760
> 
> 赞同：3
> 
> 时间：2012-11-23T11:02:39.797
> 
> 标签：css, html, ipad, video

Is it currently possible to set the background color of HTML5 video elements effectively? [About HTML5 Audio and Video](http://developer.apple.com/library/safari/#documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/Introduction/Introduction.html) points to the fact that you can style video tags with standard CSS, but in my experience this isn't fully working:

*   On Chrome 23 (Snow Leopard) adding a poster image attribute to the video tag removes the background color, without a poster image it works as you might expect
*   On Safari 5.1.7 everything works correctly
*   Perhaps unsurprisingly Mobile Safari on an iPad running iOS 5 is a law until itself. The background color will always be black, no matter what I do. Occasionally I might get a flash of the set css background color before the poster / video load. But even with an empty video tag, the background color won't display.

Anyone had any success setting a background color on iPad?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T12:00:03.240

请根据 HTML 5 on mobile safari参考我的[问题。](https://stackoverflow.com/questions/8635899/ipad-safari-ignores-div-onlick-above-html5-video)

似乎无法控制它，因为视频渲染通过浏览器委托给硬件，并显示在“上方”，因此控制它的 css 属性不会影响任何事情。

我的研究是几年前的，但不要认为从那以后有什么改变。

# directx - 我可以在没有复制开销的情况下使用 gdi+ 图像作为 directx9 纹理吗

> ID：13527768
> 
> 赞同：0
> 
> 时间：2012-11-23T11:03:03.773
> 
> 标签：directx, gdi+, directx-9

我有一个 jpeg 图片流（25fps，约 1000x700），我想以尽可能少的 CPU 使用率将其渲染到屏幕上。

到目前为止，我发现了一种解压缩 jpeg 图像的快速方法——它是一个 gdi+ api。在我的机器上，每帧大约需要 50ns。我不知道他们是如何做到的，但这是真的，例如 libjpeg8 比记忆中的要慢得多。

我尝试使用 gdi+ 来输出拉伸的图片，但对于这样一个简单的工作，它使用了很多 CPU。所以我切换到directx9。这对我有好处，但是我找不到将gdi+图片转换为directx9纹理的好方法。

有很多方法可以做到这一点，所有这些方法都很慢并且 CPU 使用率很高。

其中之一：

1.  从纹理中获取表面
2.  从表面获取 hdc
3.  从 hdc 创建 gdi+ 图形
4.  不拉伸绘制（平面 API 的 DrawI）。

另一种方式：

1.  锁定图像位
2.  锁定表面位
3.  复制位

顺便说一句`D3DXCreateTextureFromFileInMemory`很慢。

问题是如何在没有复制开销的情况下使用图像作为纹理？或者将图像转换为纹理的最佳方法是什么？

# android - 网络服务背后的网络服务

> ID：13527770
> 
> 赞同：1
> 
> 时间：2012-11-23T11:03:04.693
> 
> 标签：android, web-services, design-patterns, architecture

我即将为 32 个客户开发一个移动应用程序。它们中的每一个都有自己的一组字段、逻辑和自己的 Web 服务。（例如，逻辑可以是 - 在页面上打印哪些字段以及何时打印）。除了字段之外，应用程序的其余部分对所有客户都是完全相同的。

我现在可以开发同一个应用程序的 12 个不同版本，每个版本都将设置给特定的客户——但这会花费我很多时间，我不确定这是不是明智之举。

我开始考虑一种通用模式，它允许我创建只有一个版本的 mob 应用程序。在我的服务器上，我将在每个客户 web 服务和 mob 应用程序之间创建一个业务逻辑层。这意味着 mob 应用程序将调用我的 web 服务 - 我的 web 服务将调用某些客户 web 服务并执行一些逻辑并将所需的数据以稳定格式返回给 mob 应用程序。

这意味着

1.  移动应用程序将调用我的网络服务
2.  我的网络服务将调用客户服务
3.  客户网络服务将返回
4.  我的网络服务将运行一些逻辑并返回
5.  移动应用程序获取数据并在屏幕上打印

所以这意味着它需要更多的运行时间，很多秒。这是最好的方法吗？请建议或提供一些替代实施。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T17:19:09.603

这种依赖于客户的配置通常由...配置（和一些代码生成）管理。下面是几个可能的架构解决方案。

# 1 第一类静态配置

将所有与客户相关的内容放在一个配置文件（JSON、XML 等）中，并在需要配置 UI 和应用程序的其他静态方面时加载它。当然，在这种情况下，只能管理静态数据（文件名等）。

# 2 第二种静态配置

将所有依赖于客户的内容放入配置文件（JSON、XML）中，并在安装之前使用它在服务器上生成依赖于客户的应用程序。这种代码生成主要被 Ruby-on-Rails 和其他框架使用。在这种情况下，可以管理服务器端应用程序的所有不同方面。

# 3 动态配置

将所有与客户相关的内容放入配置文件（JSON、XML 等）中，加载并使用它在运行时更改应用程序对象的行为。当然，在这种情况下你的代码必须能够进行相应的处理。

# 4 静态配置，客户端

将所有依赖于客户的内容放入配置文件（JSON、XML 等）中，并用于为每个客户生成不同的客户端（移动）应用程序。在这种情况下，所有应用程序的服务器端可以相同，也可以不同。这取决于你。当然，为移动设备生成完整的应用程序需要一个可以以这种方式使用的工作“模板”。

据我所知，解决方案 2 应该最适合您的需求（因为您必须生成 DB 模式、UI 代码和控制器逻辑）。

# android - android中的排序适配器

> ID：13527771
> 
> 赞同：1
> 
> 时间：2012-11-23T11:03:05.820
> 
> 标签：android, listview

我想知道如何对这个适配器进行排序：

```
private class ProductsListAdapter extends BaseAdapter {

        public ProductsListAdapter() {
            super();

        }

        public int getCount() {
            return SingletonComparer.getInstance().getProducts().size();
        }

        public Object getItem(int position) {
            return SingletonComparer.getInstance().getProducts().get(position);
        }

        public long getItemId(int position) {
            return SingletonComparer.getInstance().getProducts().get(position).getId();
        }

        public View getView(int position, View convertView, ViewGroup parent) {
                TextView textView = getGenericView();
                textView.setText(SingletonComparer.getInstance().getProducts().get(position)
                        .getName());
                TextView textView2 = getGenericView();
                textView2.setText(""
                        + SingletonComparer.getInstance().getProducts()
                                .get(position).getPrice());
                TextView textView3 = getGenericView();

                textView3.setText(SingletonData.getInstance().getBrandName(SingletonComparer.getInstance().getProducts().get(position)
                        .getBrandID()));

                LinearLayout ll = new LinearLayout(getActivity());
                ll.addView(textView, new LinearLayout.LayoutParams(0,
                        LayoutParams.WRAP_CONTENT, 1.0f));
                ll.addView(textView2, 1, new LinearLayout.LayoutParams(0,
                        LayoutParams.WRAP_CONTENT, 1.0f));
                ll.addView(textView3, 2, new LinearLayout.LayoutParams(0,
                        LayoutParams.WRAP_CONTENT, 1.0f));
                ll.setId(SingletonComparer.getInstance().getProducts().get(position)
                        .getId());
                return ll;

        }
    } 
```

按领域

```
SingletonComparer.getInstance().getProducts()
                                    .get(position).getPrice()); 
```

这个有可能？如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-23T11:08:39.403

您可以使用**比较**器对列出的项目进行排序。

你可以这样做：

```
public class SortByPrice implements Comparator{

    public int compare(Object o1, Object o2) {
        Product p1 = (Product) o1;
        Product p2 = (Product) o2; 
        // return -1, 0, 1 to determine less than, equal to or greater than
        return (p1.getPrice() > p2.getPrice() ? 1 : (p1.getPrice() == p2.getPrice() ? 0 : -1));
        // **or** the previous return statement can be simplified to:
        return p1.getPrice() - p2.getPrice();
    }
} 
```

您不会希望在您的`getView()`方法中执行此操作，而是**在将数据添加到适配器时**通过对列表进行排序来执行此操作，因为它从一开始就按顺序排列。

因此，在将数据添加到列表之前，请致电：

```
Collections.sort(list, new SortByPrice()); 
```

它将使用您创建的**Comparator对您的数据进行排序。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T11:07:01.780

您不能对适配器进行排序。您应该对数据源进行排序（我希望在您的`SingletonComparer`课程中处理）

顺便说一句：你应该重构你的代码，将引用存储`SingletonComparer`在适配器的成员中，而不是不断地做`SingletonComparer.getInstance().getProducts()`.

# php - FTP 上的大 xml 文件

> ID：13527773
> 
> 赞同：0
> 
> 时间：2012-11-23T11:03:12.243
> 
> 标签：php, ftp

在我的 FTP 服务器上，有一个 4gb XML 文件，我希望它使用 PHP 将该文件中的数据放入数据库。

我知道如何使用 PHP 连接到 FTP 和基本操作，但我的问题是有可能无需先下载文件就可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T11:08:34.513

不幸的是，不，您不能像在网络驱动器上所说的那样使用 FTP“流式传输”文件。如果不先在本地下载该文件，则无法打开该文件。

这是因为您只能通过 FTP 访问该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:09:10.433

如果您的 FTP 服务器和 PHP 服务器是同一台服务器，您只需更改路径以引用 FTP 位置，而不是下载到任何位置。

如果它们在同一个本地网络上，您可以使用网络路径访问该文件。

否则，您确实需要首先通过下载来传输整个文件。

# javascript - jQuery环绕文本

> ID：13527778
> 
> 赞同：6
> 
> 时间：2012-11-23T11:03:24.007
> 
> 标签：javascript, jquery, text

我有以下

```
<div><span class="myspan">hello</span> this text has no span </div> 
```

在 jQuery 中，如何`div`在“此文本没有跨度”文本周围环绕一个或跨度？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T11:08:49.197

对于您当前的示例，这是我的单行解决方案：

```
$("div span").detach().prependTo($("div").contents().wrap("<span />").end()); 
```

**演示：http:** [//jsfiddle.net/awwTA/](http://jsfiddle.net/awwTA/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:10:09.603

这不是最好的解决方案，但可以帮助您...

```
<div id="myDiv"><span class="myspan">hello</span> this text has no span </div>

var div = $('div#myDiv');
var span = $('span.myspan');
div.remove(span);
div.html($('<span></span>').text(div.text())); 
```

我想你知道我想要做什么

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-03T21:56:30.400

您可以在父 div 中搜索任何文本 (nodeType:3) 元素，然后将每个文本包装在另一个 div 中。请参见下面的示例：

```
$('#myDiv').contents().filter(function(){
   return this.nodeType === 3;
}).wrapAll("<div class='red' />");
```

```
.red { color: red; }
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="myDiv"><span class="myspan">Hello</span> this text has no span </div>
```

# http - 在 BizTalk 中检索自定义 HTTP 发布响应状态描述

> ID：13527779
> 
> 赞同：0
> 
> 时间：2012-11-23T11:03:24.910
> 
> 标签：http, post, biztalk

对于成功（ACKs / StatusCode == 200）和不成功（NACKs / StatusCode ！= 200）发布，如何通过 HTTP 发送适配器检索由 POST 产生的自定义 HTTP ResponseStatusDescription

即来自提琴手的回应：

```
HTTP/1.1 200 ResponseStatusDescription
Cache-Control: private
Transfer-Encoding: chunked
Content-Type: text/html; charset=utf-8
Server: Microsoft-IIS/7.5
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Fri, 23 Nov 2012 10:19:06 GMT

2c
This is the response body, statuscode: '200'
0 
```

无效响应示例：

```
HTTP/1.1 408 Custom Status Description
Cache-Control: private
Transfer-Encoding: chunked
Content-Type: text/html; charset=utf-8
Server: Microsoft-IIS/7.5
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Fri, 23 Nov 2012 14:42:37 GMT

2c
This is the response body, statuscode: '408'
0 
```

如果有帮助，我正在测试一个简单的 asp.net Web 项目，其中 Page_Load 被覆盖，如下所示：

```
 protected void Page_Load(object sender, EventArgs e)
    {            
        Response.SuppressContent = false;
        //Response.StatusCode = 200;
        Response.StatusCode = 400;
        Response.StatusDescription = "ResponseStatusDescription";
        string Resp = string.Format("This is the response body, statuscode: '{0}'", Response.StatusCode);
        Response.Write(Resp);
        Response.Flush();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T12:58:48.903

使用下面的架构，创建一个带有平面文件反汇编器组件的接收管道，并在属性中使用下面的架构。现在在 HTTP 端口的接收响应部分使用这个自定义接收管道。

```
<?xml version="1.0" encoding="utf-16"?>
<xs:schema xmlns:b="http://schemas.microsoft.com/BizTalk/2003" xmlns="http://httpresponse.httpresponse" targetNamespace="http://httpresponse.httpresponse" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:annotation>
    <xs:appinfo>
      <schemaEditorExtension:schemaInfo namespaceAlias="b" extensionClass="Microsoft.BizTalk.FlatFileExtension.FlatFileExtension" standardName="Flat File" xmlns:schemaEditorExtension="http://schemas.microsoft.com/BizTalk/2003/SchemaEditorExtensions" />
      <b:schemaInfo standard="Flat File" codepage="65001" default_pad_char=" " pad_char_type="char" count_positions_by_byte="false" parser_optimization="speed" lookahead_depth="3" suppress_empty_nodes="false" generate_empty_nodes="true" allow_early_termination="false" early_terminate_optional_fields="false" allow_message_breakup_of_infix_root="false" compile_parse_tables="false" root_reference="HTTPResponse" />
    </xs:appinfo>
  </xs:annotation>
  <xs:element name="HTTPResponse">
    <xs:annotation>
      <xs:appinfo>
        <b:recordInfo structure="delimited" child_delimiter_type="hex" child_delimiter="0xD 0xA" child_order="infix" sequence_number="1" preserve_delimiter_for_empty_data="true" suppress_trailing_delimiters="false" />
      </xs:appinfo>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:annotation>
          <xs:appinfo>
            <groupInfo sequence_number="0" xmlns="http://schemas.microsoft.com/BizTalk/2003" />
          </xs:appinfo>
        </xs:annotation>
        <xs:element name="Line1" type="xs:string">
          <xs:annotation>
            <xs:appinfo>
              <b:fieldInfo justification="left" sequence_number="1" />
            </xs:appinfo>
          </xs:annotation>
        </xs:element>
        <xs:element name="Line2">
          <xs:annotation>
            <xs:appinfo>
              <b:recordInfo structure="delimited" child_delimiter_type="char" child_delimiter="'" child_order="postfix" sequence_number="2" preserve_delimiter_for_empty_data="true" suppress_trailing_delimiters="false" />
            </xs:appinfo>
          </xs:annotation>
          <xs:complexType>
            <xs:sequence>
              <xs:annotation>
                <xs:appinfo>
                  <groupInfo sequence_number="0" xmlns="http://schemas.microsoft.com/BizTalk/2003" />
                </xs:appinfo>
              </xs:annotation>
              <xs:element name="Text" type="xs:string">
                <xs:annotation>
                  <xs:appinfo>
                    <b:fieldInfo justification="left" sequence_number="1" />
                  </xs:appinfo>
                </xs:annotation>
              </xs:element>
              <xs:element name="HTTPResponseCode" type="xs:string">
                <xs:annotation>
                  <xs:appinfo>
                    <b:fieldInfo justification="left" sequence_number="2" />
                  </xs:appinfo>
                </xs:annotation>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="Line3" type="xs:string">
          <xs:annotation>
            <xs:appinfo>
              <b:fieldInfo justification="left" sequence_number="3" />
            </xs:appinfo>
          </xs:annotation>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

# jquery - JQuery 根据页面 href 将类添加到 wordpress 导航菜单（在 IE7/8 中不起作用）

> ID：13527781
> 
> 赞同：0
> 
> 时间：2012-11-23T11:03:32.947
> 
> 标签：jquery, wordpress, internet-explorer-8, internet-explorer-7, addclass

此脚本在 wordpress 生成的导航菜单中向当前页面添加一个活动类（更改颜色并添加小背景图像箭头）。但是 document.ready 函数在 IE 7 和 8 中不起作用。

查询：

```
$(document).ready(function(){
    $('#menu-top-menu a').each(function(index) {
        if(this.href.trim() == window.location)
            $(this).addClass("active");
    });
}); 
```

CSS：

```
.active {color: #41A2FF !important; background-image: url('navarrow.png'); background-repeat: no-repeat; background-position: 50% 3%; padding-top: 10px;} 
```

我在谷歌上搜索了很多，并查看了这个论坛上与类似 IE <9 问题相关的一些主题，并且一些答案似乎指向了窗口。和 .href 声明，但我似乎无法弄清楚为什么它没有添加类。任何帮助将不胜感激，因为我对 jquery 的了解有限。

-谢谢

...问题解决了，.trim() 在 IE 中不起作用： if($(this).attr("href") == window.location)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:31:52.983

[要让 .trim() 在 ie7 和 8 中工作，必须在标头中添加 if：](https://stackoverflow.com/questions/2308134/trim-in-javascript-not-working-in-ie)

```
if(typeof String.prototype.trim !== 'function') {
  String.prototype.trim = function() {
    return this.replace(/^\s+|\s+$/g, ''); 
  }
} 
```

不使用 .trim()：

```
$(document).ready(function(){
    $('#menu-top-menu a').each(function(index) {
       if($(this).attr("href") == window.location)
            $(this).addClass("active");
    });
}); 
```

...但是第二种方法将我限制为只能将类应用于顶级导航

# ios - NSXML 解析中的空白处理

> ID：13527782
> 
> 赞同：0
> 
> 时间：2012-11-23T11:03:34.320
> 
> 标签：ios, xml-parsing

当我用 NSXMLParser 解析一个 html 文件时。我无法避免 html 文件中的空格。例如 `<html> <body><p>sample text. This is sample text </p></body></html>`

在找到的字符函数中，我也得到了空格。我不想要 html 标签中的空格。但我想要 p 标签中的空格和换行符（还有 h1、div 等）。任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:41:19.643

如果 HTML 标记中没有您需要的有用信息，则在解析时忽略它。您可以简单地`<p>,<div>`单独解析标签，这将自行删除空格。

例如

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName
  namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName
    attributes:(NSDictionary *)attributeDict {

if([elementName isEqualToString:@"HTML"])
{
    NSLog(@"ignore");
} 
```

# 4d-database - 4D 中的多行文本文字

> ID：13527783
> 
> 赞同：1
> 
> 时间：2012-11-23T11:03:37.050
> 
> 标签：4d-database

是否可以在 4D 方法中输入多行文本/字符串文字？就像是：

```
C_TEXT($var)
$var:="""First Line
Second Line
Third Line""" 
```

在 Python 中使用三元“”作为示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T15:22:50.420

您也可以在 4D v12 及更高版本中这样做

```
C_TEXT($var)
$var:="First Line\r"+\
"Second Line\r"+\
"Third Line" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T16:20:32.003

我不相信它是。在我们的整个程序中，我们做这样的事情：

```
C_TEXT(<>CR)
C_TEXT($var)

<>CR:=Char(13) //carriage return

$var:="First Line" + <>CR + "Second Line" + <>CR + "Third Line" 
```

我们还有一个换行符：<>LF:=Char(10)。我们使用在程序启动期间为这些字符和其他一些字符定义的 IP 变量，我想到了 Tab。您可以使用常量，但我们在过去遇到了一些问题，因此我们尽量不使用它们。

您还可以在文本中使用 \n 或 \r。在调试器中，它只会用\n 和\r 将它们全部显示在一行上，但我相信它会显示多行（它在Alert() 中显示）。

```
$var:="First Line\nSecond Line\nThird Line" 
```

我们选择第一种方式是为了可读性和可维护性。

# castle-windsor - TypedFactory 与性能监视器

> ID：13527784
> 
> 赞同：0
> 
> 时间：2012-11-23T11:03:40.563
> 
> 标签：castle-windsor, performancecounter, typed-factory-facility

我对新的 windsor3 性能计数器如何显示通过 TyepedFactory 生成的对象的跟踪感到困惑。

考虑以下情况

```
public interface IBFactory
{
    IB[] GetAll();
    void FreeUp(IB cmps);
}

public class B1 : IB, IDisposable
{
    public void Add(int i){}

    public void Dispose()
    {
        Console.WriteLine("Disposing " + GetType().Name);
    }
}

public class B2 : IB, IDisposable
{
    public void Add(int i){}

    public void Dispose()
    {
        Console.WriteLine("Disposing " + GetType().Name);
    }
}

public class B3 : IB
{
    public void Add(int i){}

    public void Dispose()
    {
        Console.WriteLine("Disposing " + GetType().Name);
    }
}

 var container = new WindsorContainer();

 var diagnostic = LifecycledComponentsReleasePolicy.GetTrackedComponentsDiagnostic(container.Kernel);
 var counter = LifecycledComponentsReleasePolicy.GetTrackedComponentsPerformanceCounter(new PerformanceMetricsFactory());
 container.Kernel.ReleasePolicy = new LifecycledComponentsReleasePolicy(diagnostic, counter);

 Console.WriteLine("Enter number of iterations:");
 int iterations = int.Parse(Console.ReadLine());

 container.AddFacility<TypedFactoryFacility>();
 container.Register
 (
    Component.For<IBFactory>()
        .AsFactory()
        .LifeStyle.Transient,

    Classes.FromAssemblyContaining<IB>()
        .BasedOn(typeof(IB))
        .WithService.Base()
        .Configure(c => c.LifestyleTransient())
 );

 Console.WriteLine("Create Memory Leak Y or N?");
 var leak = Console.ReadLine().ToUpper() == "Y";

 var sleepFor = 100;// int.Parse(Console.ReadLine());

 for (var i = 1; i < iterations+1; i++)
 {
    var factory = container.Resolve<IBFactory>();
    Console.WriteLine("Factory created.");

    var cmp = factory.GetAll();
    foreach (var b in cmp)
    {
        b.Add(i);
    }

    Console.WriteLine("Iteration {0} completed", i);

    Thread.Sleep(sleepFor);

    if (!leak)
    {
        foreach (var b in cmp)
        {
            factory.FreeUp(b);
        }
    }

    Console.WriteLine("Releasing factory.");
    container.Release(factory);     
 }

 Console.WriteLine("container disposing.....");
 container.Dispose();
 Console.WriteLine("container disposed");
 Console.ReadLine(); 
```

如果我按照我应该的方式通过 FreeUp 工厂方法处理对象，则性能计数器会显示预期的跟踪。

相反，如果我不明确处置对象，但如果我会隐式处置工厂，作为临时创建用于测试目的，则在我处置工厂时处置 IB 实例（根据文档），但性能计数器不会得到更新和显示 IB 实例仍被跟踪...

那是什么意思？即使由于工厂处理而在 IB 实例上调用了 Dispose，性能计数器也没有更新或对象仍然被跟踪（这将是非常可怕的）。

# php - mysql_real_escape_string、stripslashes 和 htmlspecialchars

> ID：13527785
> 
> 赞同：2
> 
> 时间：2012-11-23T11:03:42.247
> 
> 标签：php, mysql, mysql-real-escape-string, htmlspecialchars, stripslashes

当我将变量发布到数据库时，当然，我使用`mysql_real_escape_string`. 这样特殊字符就应该进入数据库。

当我从数据库中读取这个变量时，我再次使用 mysql_real_escape_string 和`stripslashes`：

```
$var = stripslashes(mysql_real_escape_string($record['rowname'])); 
```

否则它会在引号前给我斜杠。

当我使用`$var`上面提到的这个并想要回应它时，我很简单，`echo "$var"`因为它已经被剥离和转义了，对吧？

此外，如果我在一个变量上使用`stripslashes`+ `mysql_real_escape_string`，然后在数据库中再次发布这个相同的变量，就`mysql_real_escape_string`足够了吗？还是我需要`stripslashes`再次使用这个变量？

**总结：**

据我所知这是如何工作的：

1.  在 mysql 中使用数据时`mysql_real_escape` **每次**都使用：当通过变量读取查询时，就像将变量发布到数据库一样。
2.  `stripslashes`在回显转义变量时使用。
3.  如果您想`stripslashes`再次向数据库发布和转义变量，则不需要再次删除它。

我想念`htmlspecialchars`吗？

**编辑**

所以这一切都错了吗？

```
 while( $record=mysql_fetch_array($result) ) 
    {
        $custid=mysql_real_escape_string($record['custid']);
        $custsurname=mysql_real_escape_string($record['custsurname']);
        $custmidname=mysql_real_escape_string($record['custmidname']);
        $custforename=mysql_real_escape_string($record['custforename']);
        $custcountry=stripslashes(mysql_real_escape_string($record['custcountry'])); } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T11:17:46.233

恐怕你做错了。关键是转义是**上下文相关**的，你完全无视这个事实。

在每种数据格式中，都有在格式规范中被赋予特殊含义的单词或字符。例如，`'`SQL 中的符号表示“字符串分隔符”，`?`URL 中的符号表示“开始查询字符串” `<`，HTML 中的符号表示“开始标签”。当你想插入一个文字或字符时，你需要转义，即你想按原样插入它并删除它的特殊含义。

一旦意识到这一点，很明显语法会因格式和上下文而异。`<`在 HTML 中表示“开始标签”，但在 SQL 或 URL 中不表示。因此，您需要使用为目标格式构建并遵循格式规则的转义方法。

如果您`mysql_real_escape_string()`对从数据库**读取**的数据执行此操作，则您说的是“转义我的数据，以便可以将其注入 SQL 字符串中”。您的数据已准备好在内部用作 SQL 字符串，但因任何其他用途而损坏。

在这个例子中，碰巧`stripslashes()`撤消了*大部分*所做的事情`mysql_real_escape_string()`，所以你最终得到一个基本上没有改变的输出。但这纯粹是机会。

最后但同样重要的是，不得不一一转义数据库输入参数是非常烦人的。所有其他数据库扩展，但您使用的那个¹提供准备好的语句。不要被不推荐使用的不提供现代内容的扩展卡住。

¹注意：遗留的 mysql 扩展已经被弃用了好几年，当更好的替代品出现时，它不再是语言的一部分。

**更新：**稍微澄清一下——转义只是一个语法技巧。您不会更改目标引擎的输入，它只会按原样查看原始数据。因此，在检索输入时无需对输入进行*转义。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T11:11:35.967

您不需要`stripslashes`或`mysql_real_escape_string`来自数据库的数据，您只需要在查询之前对其进行转义，以便查询解析器知道什么是特殊字符和什么是文字字符。

`stripslashes`永远不应该使用（作为修复某些症状的技巧），如果您在转义后需要一个变量，请使用原始变量：

```
$data_safe = mysql_real_escape_string( $data );
//$data can still be used normally 
```

转义仅适用于特定上下文，如果上下文是 mysql 查询，那么您将 mysql 真正转义仅用于查询，仅此而已。如果上下文是 html 输出，那么您将在将字符串输出为 html 之前进行 htmlescape。在任何时候您都不想实际修改数据本身。如果你误解了这一点，你会看到`O\'Brian`等等`O&#39;Brian`。

# c# - Sharepoint单击gridview时如何显示弹出窗口？

> ID：13527786
> 
> 赞同：0
> 
> 时间：2012-11-23T11:03:45.930
> 
> 标签：c#, asp.net, sharepoint, sharepoint-2010

我在共享点上使用 Gridview 控件。我将数据绑定到 Gridview 的列名称。现在，我想直接点击列名称的行，程序将显示该行的详细信息弹出窗口。谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:09:19.380

我不知道我是否理解正确，但您可以尝试打开一个指向自定义 .aspx 页面的 ModalDialog 以显示您的信息

[http://sqldev-samir.blogspot.de/2012/08/open-modal-dialog-in-serverside-code-in.html](http://sqldev-samir.blogspot.de/2012/08/open-modal-dialog-in-serverside-code-in.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T02:36:59.610

这是用于打开对话框的客户端代码，该对话框将指向包含详细信息的页面（在此示例中为 editform.aspx）。此代码还会导致回发，因此网格会根据用户在 EditForm.aspx 上所做的更改进行更新。

```
function CloseCallback(result, target)
{
    eval(<%=Page.ClientScript.GetPostBackEventReference(new PostBackOptions(Button1))%>);    
}
function OpenDialog(url)
{ 
    var options = {
        url: url,
        title: '',
        allowMaximize: true,
        showClose: true,
        width: 700,
        height: 800,
        dialogReturnValueCallback: CloseCallback
    };

    var dlg = SP.UI.ModalDialog.showModalDialog(options);

} 
```

这是将超链接列添加到网格的服务器端代码（这恰好是 RadGrid 而不是 SPGridView 服务器控件）。此列将显示一个指向上述 JavaScript 函数的超链接，单击此列会打开带有来自所选行项的数据的 EditForm.aspx。

```
GridColumn fldEditLink = new GridHyperLinkColumn() { UniqueName = "Edit", Text = "Edit/View",DataNavigateUrlFields = new string[] { "ID" }, DataNavigateUrlFormatString =String.Format("javascript:OpenDialog('{0}/Lists/Events/EditForm.aspx?ID={{0}}');", web.Url) }; 
```

# html - 将网站内容居中而不重叠页眉和页脚

> ID：13527787
> 
> 赞同：0
> 
> 时间：2012-11-23T11:03:47.127
> 
> 标签：html, css

我有一个带有页眉、页脚和内容区域的基本站点结构。我能找到的几乎所有将页面内容居中的解决方案都使用 CSS 绝对定位，设置内容 div 的边距，并使其浮动在浏览器窗口的中心。但是，当窗口尺寸减小时，这会导致内容覆盖页眉和/或页脚。相反，我希望页面在无法放入窗口时滚动。

这是页面的截图： ![布局——带红色边框的区域应垂直居中](../Images/2c083efaaf0da771b422cdbc865837ae.png)

带有红色边框的区域应垂直居中而不覆盖任何其他元素。

这是我正在使用的 HTML 和 CSS：

```
<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Layout Test</title>
</head>

<body>
    <div class="wrapper">
        <div class="header">Header Content</div>
        <div class="articleContainer">
            <div class="articleLeft">
                <div class="articleTitle">
                    <h1 class="articleTitle">Title</h1>
                </div>
                <div class="articleText">
                    <p>Lorem ipsum ...</p>
                </div>
            </div>
            <div class="articleRight">
                <div class="articleImage"></div>
            </div>
            <div class="stepper">Stepper</div>
        </div>
        <div class="push"></div>
    </div>
    <div class="footer">Footer Content</div>
</body>
</html> 
```

**CSS：**

```
@charset "UTF-8";

* {
    margin: 0;
}

html, body {
    height: 100%;
}

.wrapper {
    min-height: 100%;
    height: auto !important;
    height: 100%;
    margin: 0 auto -48px;
}
.header {
    text-align: center;
    background-color: #7FF152;
    height: 48px;
}

.articleContainer {
    background-color: #CCFFFF;
    margin-right: auto;
    margin-left: auto;
    width: 700px;
    clear: both;
    min-height: 240px;
    position: relative;
    border: medium solid #FF0000;
}

.articleLeft {
    float: left;
    height: 450px;
    width: 330px;
}

.articleTitle {
    text-align: center;
    margin: 20px;
}

.articleText {
    max-height: 350px;
    overflow: auto;
}

.articleRight {
    float: right;
    height: 450px;
    width: 330px;
    background: url(articleImage.fw.png) no-repeat center center;
}

.stepper {
    clear: both;
    text-align: center;
    background-color: #FFFF00;
}

.footer {
    background-color: #CC6633;
    text-align: center;
    height: 48px;
}

.footer, .push {
    height: 48px; /* .push must be the same height as .footer */
} 
```

我已经上传到这里：[http ://cl.ly/3f2o1v0U2c0k](http://cl.ly/3f2o1v0U2c0k)

这是 jsfiddle：http: [//jsfiddle.net/gudmN/1/](http://jsfiddle.net/gudmN/1/)

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T21:20:07.350

1) 添加`margin: 0 auto; height: auto; float: left`到`.articlecontainer`.
2）制作页眉和页脚`float: left; width: 100%; height: 48px`

# sql - 当前系统时间 - SQL

> ID：13527789
> 
> 赞同：0
> 
> 时间：2012-11-23T11:03:57.693
> 
> 标签：sql, sql-server

如何仅在 SQL Server/任何数据库中获取当前系统时间。

不需要日期...只需要当前时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T11:07:10.060

您可以使用`getdate()`或`current_timestamp`

这将为您提供日期和时间，但是您可以根据需要对其进行格式化。

如果您使用的是 SQL Server 2008+，您甚至可以将结果格式化为`time`：

```
 select cast(getdate() as time) 
```

如果您不在 SQL Server 2008+ 中，则可以使用许多[不同的方法](http://anubhavg.wordpress.com/2009/06/11/how-to-format-datetime-date-in-sql-server-2005/)来获取时间，仅包括：

```
 SELECT convert(char(8), getdate(), 108) 
```

请参阅 具有多个版本的[SQL 小提琴演示](http://sqlfiddle.com/#!3/d41d8/6569)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:31:06.340

选择 CONVERT(VARCHAR(8),GETDATE(),108) 当前时间；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T11:06:28.047

```
Using `getdate()` like:
    select getdate()
=============================

and get only time use convert function with 108 code like :
  select convert(varchar,GETDATE(),108) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T13:38:27.693

有 3 种不同的语句可用于获取当前系统时间

```
select CONVERT(VARCHAR(8),getDate(),108)

select CONVERT(VARCHAR(8),{fn NOW()},108)

select CONVERT(VARCHAR(8),CURRENT_TIMESTAMP,108) 
```

它们都产生相同的结果和性能是相同的，因此它实际上是您喜欢的三个外观中的任何一个。

# ajax - 如何知道哪个组件触发了 p:ajax 请求

> ID：13527790
> 
> 赞同：0
> 
> 时间：2012-11-23T11:03:59.847
> 
> 标签：ajax, jsf, primefaces

我有多个带有 ap:ajax 和侦听器的输入字段。它们都连接到同一个监听器。我怎么知道是哪个组件触发了监听器？

```
<h:inputText id="postalCode" size="20" value="# businessPartner.primaryAddress.postalCode}" 
<p:ajax event="change" listener="#{businessPartner.primaryAddress.retrievePostalCodeCity}"  >
</p:ajax>  
</h:inputText>

<h:inputText id="city" size="60" value="# businessPartner.primaryAddress.city}" 
<p:ajax event="change" listener="#{businessPartner.primaryAddress.retrievePostalCodeCity}"  >
</p:ajax>  
</h:inputText>

public void retrievePostalCodeCity() throws MWSException {
    int country = address.getCountryId();
    String postalCode = address.getPostalCode();
    String city = address.getCity();
} 
```

我有这个问题，因为我曾经使用 a4j ajax，但我正在将项目移动到完全的 primefaces 而不再是richfaces。a4j 的侦听器有一个 AjaxBehaviorEvent 事件，我可以在那里做 event.getComponent().getId()

我怎样才能对 Prime ajax 做同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T11:37:51.540

这[`AjaxBehaviorEvent`](http://docs.oracle.com/javaee/6/api/javax/faces/event/AjaxBehaviorEvent.html)不是 RichFaces 特有的。它特定于 JSF2 本身。所以你可以继续在 PrimeFaces 中使用它。

```
public void retrievePostalCodeCity(AjaxBehaviorEvent event) {
    UIComponent component = event.getComponent();
    // ...
} 
```

作为替代方案，或者在其他地方*确实*不可能的情况下，您始终可以使用新的 JSF2[`UIComponent#getCurrentComponent()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#getCurrentComponent%28javax.faces.context.FacesContext%29)方法。

```
public void retrievePostalCodeCity() {
    UIComponent component = UIComponent.getCurrentComponent(FacesContext.getCurrentInstance());
    // ...
} 
```

顺便说一句，同样的构造应该与 JSF2 自己的`<f:ajax>`. 我看不出有任何理由在`<p:ajax>`这里使用。但是，如果您实际使用 PrimeFaces 组件（例如`<p:inputText>`.

* * *

**与具体问题**无关**`event="change"`，已经是默认设置。你可以省略它。**

 *** * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-23T11:43:57.113

在 primefaces 中几乎相同：

```
 <p:ajax event="change" listener="#{businessPartner.primaryAddress.retrievePostalCodeCity}"  />

import javax.faces.event.AjaxBehaviorEvent;
.....
public void retrievePostalCodeCity(AjaxBehaviorEvent event) {
...
} 
```

如果您想通过**按钮**组件*action/actionListener*标签访问，您可以使用`ActionEvent`并且在任何情况下确保设置*ajax="true"*：

```
<p:commandLink actionListener="#{businessPartner.primaryAddress.retrievePostalCodeCity}" ajax="true" />

import javax.faces.event.ActionEvent;

....

public void retrievePostalCodeCity(ActionEvent event) {
    ...
    } 
```**

# knockout.js - 如何设置一个 通过 KnockoutJS 的元素的类属性

> ID：13527793
> 
> 赞同：4
> 
> 时间：2012-11-23T11:04:16.757
> 
> 标签：knockout.js

我`select`通过 KnockoutJS 视图模型填充了 HTML 元素，如下所示：

```
<select data-bind="options: $data.answers,  optionsText: function(item) { return item.text }, value: selectedAnswer, optionsCaption: 'Choose...'"></select> 
```

我想做的是通过某种方式设置`class`每个元素的属性`option`，所以我最终得到：

```
<option class="someValue">12345</option> 
```

这可以在 KnockoutJS 中完成吗？我很难找到解决方案。

编辑：

我刚刚`foreach`按照 Artem 的建议尝试了绑定，它非常接近我想要的工作。但是有一个问题。

在`Question`对象上有一个订阅`SelectedAnswer`observable 的函数：

`this.selectedAnswer.subscribe(function (answer) {}`

当我使用`foreach`绑定`subscribe()`时，每个问题都会触发一次（在我选择答案之前它不应该触发。我认为这是因为“选择...”选项现在没有显示）。

对于`foreach`绑定，如何将默认文本设置回“选择...”并停止`selectedAnswer.subscribe()`触发，直到用户选择了一个项目，而不是在填充列表时。

编辑：

好的，这就是我的做法。

在 KO viewmodel 类中，我有一个布尔值`bindingFinished`，我在`selectedAnswer.subscribe()`. 如果`false`那么我们只是从函数中返回；如果为真，则照常进行。

`Answer`此外，我通过在数组的开头添加一个新选项来为答案添加一个默认的“选择”选项。最终的结果是，在数据被绑定的时候，订阅函数没有被执行，只有在用户选择了一个选项之后。

非常感谢 Artem 的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-02-12T15:05:19.710

您可以使用[`optionsAfterRender`](http://knockoutjs.com/documentation/options-binding.html#note-2-post-processing-the-generated-options)绑定来执行此操作。
它将`option`为其生成的每个元素调用提供的函数。
您所要做的就是将类添加到元素中。

**例子：**

**HTML**：

```
<select class="form-control" data-bind="options: list, 
        optionsAfterRender: addOptionClass"></select> 
```

**JS**：

```
this.addOptionClass = function(optionElement) {
    optionElement.classList.add("form-control");
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T11:30:59.690

您可以使用`foreach`绑定而不是`options`在`select`标签中：

```
<select data-bind="value: selectedAnswer">
    <option class="someValue">Choose...</option>
    <!-- ko foreach: $data.answers -->
    <option class="someValue" data-bind="value: $data, text: text"></option>
    <!-- /ko -->
</select> 
```

这是工作小提琴：http: [//jsfiddle.net/vyshniakov/5bPWQ/1/](http://jsfiddle.net/vyshniakov/5bPWQ/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-23T09:25:06.947

对我来说，使用所选值 (selectedAnswer) 的代码在应用此修复程序后出现错误。我通过添加`value=""`到默认选项（选择...）来解决此问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-04T14:43:36.240

根据以前的答案，我刚刚找到了另一种方法

```
 <select data-bind="foreach: yourArray">
     <option data-bind="value: IdValue, text: TextValue, attr: { customAttr: anyValueField }"></option>
   </select> 
```

这个对我有用。我希望它对其他人有帮助

# android - GPS数据在同一位置的变化

> ID：13527797
> 
> 赞同：0
> 
> 时间：2012-11-23T11:04:32.450
> 
> 标签：android, gps, direction

在我的应用程序中，我根据 GPS 位置计算了速度。

由于 GPS 接收器即使在同一位置也可能具有不同的坐标，因此即使手机在我的桌子上，我的应用程序也会记录速度。

如果我在同一位置接收 GPS 数据，我需要避免它。

我正在考虑添加一些基于“方位”的逻辑，这样我就可以确定手机是否真的在移动，或者它正在从任何方向接收跳跃的位置数据。

在此之前我想知道有没有其他方法可以避免这种数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:09:29.203

根据 Javadoc 的方法 request public void requestLocationUpdates (long **minTime** , float **minDistance** , Criteria criteria, PendingIntent intent) found [here](http://developer.android.com/reference/android/location/LocationManager.html#requestLocationUpdates%28long,%20float,%20android.location.Criteria,%20android.app.PendingIntent%29)

> minTime 位置更新之间的最小时间间隔，以毫秒为单位 minDistance
> 位置更新之间的最小距离，以米为单位

所以你可以使用`minDistance`参数来避免在很短的距离内获得更新......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T08:02:11.793

在研究了许多方法之后，我用轴承对其进行了编程。

我正在根据最近 5 个位置获得速度。我添加了逻辑来检查每个位置与下一个位置的方位，如果所有方位都有较大的差异，我假设位置是从随机方向接收的，因此设备实际上没有移动。

它对我很有用:)

# android - android中没有油漆

> ID：13527798
> 
> 赞同：2
> 
> 时间：2012-11-23T11:04:44.540
> 
> 标签：android, canvas, paint

我正在为签名编写迷你应用程序，用户使用手指进行绘画。

我画了功能`onPaint`，但什么也没有。我不明白，我调试了但我没有修复它。我明白了，如果我在函数`onCreate`中绘制就可以了。

我想在onPaint上画画。

```
public class Main extends Activity{
  ImageView drawingImageView;
  float downx = 0;
  float downy = 0;
  float upx = 0;
  float upy = 0;
  private Bitmap bitmap;
  private Canvas canvas;
  private Path mPath;
  private Paint mBitmapPaint;
  private Paint mPaint;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    drawingImageView = (ImageView) this.findViewById(R.id.imageView1);
    bitmap = Bitmap.createBitmap((int) getWindowManager()
        .getDefaultDisplay().getWidth(), (int) getWindowManager()
        .getDefaultDisplay().getHeight(), Bitmap.Config.ARGB_8888);
    canvas = new Canvas(bitmap);
    drawingImageView.setImageBitmap(bitmap);

    mBitmapPaint = new Paint(Paint.DITHER_FLAG);

    mPath = new Path(); 

    mPaint = new Paint();
    mPaint.setColor(Color.GREEN);
    mPaint.setTextSize(20);
    mPaint.setTypeface(Typeface.DEFAULT);

    canvas.drawLine(0, 0, 200, 200, mPaint);
  }

  protected void onDraw(Canvas canvas) {
    canvas.drawColor(0xFFAAAAAA);
    canvas.drawBitmap(bitmap, 0, 0, mBitmapPaint);
    canvas.drawPath(mPath, mPaint);
    canvas.drawLine(0, 0, 100, 100, mPaint);
  }
  private float mX, mY;
  private static final float TOUCH_TOLERANCE = 4;
  private void touch_start(float x, float y) {
    mPath.reset();
    mPath.moveTo(x, y);
    mX = x;
    mY = y;
  }
  private void touch_move(float x, float y) {
    float dx = Math.abs(x - mX);
    float dy = Math.abs(y - mY);
    if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
      mPath.quadTo(mX, mY, (x + mX) / 2, (y + mY) / 2);
      mX = x;
      mY = y;
    }
  }
  private void touch_up() {
    mPath.lineTo(mX, mY);
    // commit the path to our offscreen
    canvas.drawPath(mPath, mPaint);
    // kill this so we don't double draw
    mPath.reset();
  }
  @Override
  public boolean onTouchEvent(MotionEvent event) {
    float x = event.getX();
    float y = event.getY();
    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
      touch_start(x, y);
      onDraw(canvas);
      break;
    case MotionEvent.ACTION_MOVE:
      touch_move(x, y);
      onDraw(canvas);
      break;
    case MotionEvent.ACTION_UP:
      touch_up();
      onDraw(canvas);
      break;
    }
    return true;
  } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:13:10.907

`canvas.restore();`在所有绘图操作后调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:09:06.523

除了糟糕的代码格式之外：您不能在 onTouch 方法中使用自己创建的画布调用 onDraw()。要获得有关 2D 绘图的基本感觉，请查看我的[教程系列](http://www.droidnova.com/2d-tutorial-series)

# fonts - 如何定义默认字体以使用 iText 5.3.3 库中的 PdfPTable 和 PdfAWriter 类创建 PDF

> ID：13527800
> 
> 赞同：4
> 
> 时间：2012-11-23T11:05:10.920
> 
> 标签：fonts, itext, pdfptable

我正在使用 iText 5.3.3 库，我不想使用 PdfAWriter 类创建 PDF，该类需要指定必须遵守的合规性级别。

我不想在我的文档中添加 PdfPTable，但由于此错误，我无法做到这一点：“必须嵌入所有字体。这不是：Helvetica”。

我认为这个问题是因为当我们想用 PDFAConformanceLevel 制作 PDF 时，我们必须嵌入我们使用的字体；这就是我所做的，但在某些情况下，似乎使用了默认字体：Helvetica，并且此默认字体未嵌入且无法嵌入！当我们添加新行、空行、新页面或使用 PdfPTable 等元素时，就会发生这种情况。

我认为当我们使用 PdfPTable 之类的元素时，它必须是一种定义要使用的默认字体的方法；我听说有人设法通过定义一个新的 Chunk 构造函数来做到这一点，但我不知道该怎么做......有人有想法吗？

在这里你可以找到我的代码......我已经简化了它的目的：

我用这段代码定义了 2 种嵌入字体：

```
FontFactory.register("c:/NewYorker.ttf");
baseFont = (FontFactory.getFont("new yorker","UTF-8",BaseFont.EMBEDDED)).getBaseFont();
baseFont.setSubset(true);
BOLD = new Font(timesbd, 12);
NORMAL = new Font(times, 12); 
```

我使用这些字体在 3 个单元格中添加 3 个段落以放入一个表格中：

```
Document document = new Document();
PdfAWriter writer = PdfAWriter.getInstance(document, new FileOutputStream(filename), PdfAConformanceLevel.PDF_A_1B);
document.open();

float[] columnWidths = { 3.5f, 4.5f, 2.8f };
PdfPTable table = new PdfPTable(columnWidths);

PdfPCell defaultCell = table.getDefaultCell();
defaultCell.setPhrase(new Phrase("",NORMAL)); 

table.setWidthPercentage(90);
table.setHorizontalAlignment(Element.ALIGN_RIGHT);

PdfPCell cell1 = new PdfPCell(new Phrase("test 1",BOLD));
PdfPCell cell2 = new PdfPCell(new Phrase("test 2",NORMAL));
PdfPCell cell3 = new PdfPCell(new Phrase("test 3",NORMAL));

cell1.setBorder(0);
cell2.setBorder(0);
cell3.setBorder(0);

cell1.setIndent(27);
cell2.setIndent(27);
cell3.setIndent(27);

cell1.setLeading(4.5f, 1);
cell2.setLeading(4.5f, 1);
cell3.setLeading(4.5f, 1);

table.addCell(cell1);
table.addCell(cell2);
table.addCell(cell3);

document.add(table);

document.close(); 
```

当我执行我的代码时，我有这个堆栈：

```
Exception in thread "main" com.itextpdf.text.DocumentException: com.itextpdf.text.pdf.PdfAConformanceException: All the fonts must be embedded. This one isn't: Helvetica
at com.itextpdf.text.pdf.PdfDocument.add(PdfDocument.java:708)
at com.itextpdf.text.Document.add(Document.java:260)
at test.MainClass.createPdfA(MainClass.java:163)
at test.MainClass.main(MainClass.java:68) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T12:36:03.310

您的代码中有不同的错误，字体不是最大的问题。

我尽可能好地复制/粘贴您的代码：http: [//itextsupport.com/files/stackoverflow/PdfATest.java](http://itextsupport.com/files/stackoverflow/PdfATest.java)

*   我不得不更改字体，因为我的 PC 上没有 NewYorker.ttf。
*   我没有嵌入完整的字体；这似乎有点矫枉过正。
*   我添加了一行来创建 XMP 数据（这在 PDF/A 中是强制性的）。
*   我添加了一个颜色配置文件（也是强制性的；我选择了[sRGB](http://itextsupport.com/files/stackoverflow/sRGB.profile)）。

我运行了代码，它没有抛出任何异常。您可以自己检查结果：http: [//itextsupport.com/files/stackoverflow/pdfa.pdf](http://itextsupport.com/files/stackoverflow/pdfa.pdf)

当然：如果您看到一个蓝条说*这是 PDF/A1b* ，请不要相信 Adob​​e Reader 。您需要在 Preflight 工具中检查一致性，如下图所示： ![在此处输入图像描述](../Images/ba0b45ee61fb4db2bcb4ef300a46181b.png)

我猜：

*   也许您假设“new yorker”是字体的实际 PostScript 名称是错误的。
*   你为什么使用“UTF-8”作为编码。文档清楚地表明如果要使用 Unicode，则需要使用 Identity-H。

我无法重现您的问题，因此建议您尝试运行我的代码。

# objective-c - 如果没有 AM/PM 的 12 小时格式，有什么方法可以识别时间？

> ID：13527806
> 
> 赞同：0
> 
> 时间：2012-11-23T11:05:41.263
> 
> 标签：objective-c, ios, nsdate, nsdateformatter

我正在以 12 小时格式从 Web 服务获取日期，例如**@"2012-11-23 04:46:19.120"**。有什么方法可以识别这个时间的天气是上午还是下午？请指导我应该怎么做才能得到正确的结果？

我得到这样的响应字典：

{

```
address = "22 W 46th St,\nNew York,New York,10036";
"business_name" = "Monster Sushi Midtown";
"con_res_id" = 5940;
"current_date" = "2012-11-23 04:46:19.120";
"deal_description" = "Enjoy Happy Hour with $3 Large Beers & $2 Regular Beers"; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:32:56.777

不，如果响应的日期格式是 12 小时格式并且不包括 AM/PM 值，则无法推断它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T11:49:32.297

感谢 iosRider 提出问题并提供一些信息。

答案是不。

如果您的数据库没有存储 AM/PM，cocoa 无法将其转换为 AM 或 PM。

现在你可以做的是：

丢弃两个日期的时间戳，将其存储在 NSString 中并进行比较！

# android - 为超高分辨率手机设计

> ID：13527808
> 
> 赞同：0
> 
> 时间：2012-11-23T11:05:54.307
> 
> 标签：android, resources, screen, resolution

根据 android 文档，应用程序中的资源目录列表，为不同的屏幕尺寸提供不同的布局设计，并为中、高和超高密度屏幕提供不同的位图可绘制对象。

```
res/layout/my_layout.xml            
res/layout-small/my_layout.xml       
res/layout-large/my_layout.xml       
res/layout-xlarge/my_layout.xml      
res/layout-xlarge-land/my_layout.xml 

res/drawable-mdpi/my_icon.png        
res/drawable-hdpi/my_icon.png        
res/drawable-xhdpi/my_icon.png 
```

Galaxy Note 2 等超高分辨率手机的布局文件夹名称是什么？

# c# - 如何在 XAML/WPF ListBox Drop 事件中绑定命令

> ID：13527811
> 
> 赞同：1
> 
> 时间：2012-11-23T11:06:02.130
> 
> 标签：c#, wpf, xaml, drag-and-drop, listbox

我想做这样的事情：

```
<ListView PreviewDrop="{Binding TestCommand}"> 
```

（当然我知道它错了，但它表明了这个想法）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T11:13:41.843

将 InvokeCommandAction 与 EventTrigger 一起使用。请参阅[此链接](http://blogs.u2u.be/peter/post/2010/10/19/Invoking-commands-from-events-using-the-InvokeCommandAction-behavior.aspx)。

# ruby-on-rails-3 - simple_cov：如何在报告中包含引擎测试？

> ID：13527813
> 
> 赞同：4
> 
> 时间：2012-11-23T11:06:12.163
> 
> 标签：ruby-on-rails-3, unit-testing, rspec, code-coverage

我们的 Rails 应用程序使用引擎并建立在客户项目之上。引擎本身不能作为独立程序执行。使用 simple_cov 对客户项目来说效果很好。但是，启动所有测试（客户和引擎）会导致 rake 在执行完所有测试并为客户项目编写覆盖率报告后中止。基本上一切正常，但为引擎编写覆盖率报告。

引擎存储在客户项目旁边的外部文件夹中。使用的测试套件是 rspec

那么，有没有办法将引擎包含在 SimpleCov 配置中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T14:37:30.950

Where are you requiring simplecov? I had a similar problem, not with an engine, but rather trying to cover all tests in a "non-standard" rails application with a services architecture. Most of the files (even files in lib/ and models/) were not loaded. The way I solved that was to require simple_cov in "config/environments/test.rb". Hope that helps!

# ios5 - 如何在 UIView animateWithDuration 的每次迭代中执行操作

> ID：13527818
> 
> 赞同：4
> 
> 时间：2012-11-23T11:06:21.467
> 
> 标签：ios5, animation, uiview

我正在使用动画更改视图的大小，并且我需要在动画的每个步骤中更改该视图内的 imageview 的图像。图像取决于视图大小，这就是我想要这样做的原因。我试图在`animations:`块中这样做，但它似乎只被调用一次，而不是像我预期的那样每次迭代。

如何在`UIView animateWithDuration:animations:`. 或者也许我的问题有另一种解决方案？

PS我曾尝试使用`completion:`块，但它不能正确解决我的问题，因为我想实现图像的平滑变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:13:30.950

如果我给你简单的答案，答案是否定的……

但是我有一个替代方法，可以创建一个可以递归调用的函数，例如..

```
-(void)animationRecursive
{
    [UIView animateWithDuration:0.001 animations:^{
        // Here set frame slide different from last frame use incremental variables
        // for x,y,width,height
        //yourImageView.frame = set frame
        //yourImageView.image = set image
    } completion:^(BOOL finished) {

         if(![yourImage.frame isEqualToString NSStringFromCGRect(yourFinalCGRectAfterAnimation)]
         {
            [self animationRecursive];
         }
    }];

} 
```

希望对你有帮助.............

# prolog - 试图检查一个数字是否大于一

> ID：13527825
> 
> 赞同：0
> 
> 时间：2012-11-23T11:06:49.150
> 
> 标签：prolog

我正在编写一段序言代码，我想知道一个数字是否大于 1。每当我查询它时，它总是返回 false。

```
sss(count):- count > 1. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T11:10:17.327

Prolog 中的变量以大写字母或下划线开头。话虽如此，

`sss(Count):- Count > 1.`

# javascript - 谷歌图表仪表板api中的多个数据源作为数组

> ID：13527826
> 
> 赞同：0
> 
> 时间：2012-11-23T11:06:49.077
> 
> 标签：javascript, charts, google-visualization

**我做了什么？** 我正在构建一个包含多个数据的仪表板。数据采用数组的形式。

**我需要实施什么？** 我已经在本教程的帮助下实现了仪表板，但我无法实现另一个数据源。

**这是我的代码**

```
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>

<title>
          Google Visualization API Sample
        </title>

<script type="text/javascript" src="http://www.google.com/jsapi"></script>
<script type="text/javascript">
  google.load('visualization', '1.1', {packages: ['controls']});
</script>
<script type="text/javascript">

function drawVisualization() {

// Prepare the data
      var data1 = google.visualization.arrayToDataTable([
        ['Name', 'Type', 'Precheck Alarms', 'Postcheck Alarms'],
        ['Michael' , 'Type1', 12, 5],
        ['Elisa', 'Type2', 20, 7],
        ['Robert', 'Type1', 7, 3],
        ['John', 'Type1', 54, 2],
        ['Jessica', 'Type2', 22, 6],
        ['Aaron', 'Type1', 3, 1],
        ['Margareth', 'Type2', 42, 8],
        ['Miranda', 'Type2', 33, 6]
      ]);
       var data2 = google.visualization.arrayToDataTable([
        ['Name', 'Type', 'Precheck Alarms', 'Postcheck Alarms'],
        ['Michael' , 'Type1', 12, 5],
        ['Elisa', 'Type2', 20, 7],
        ['Robert', 'Type1', 7, 3],
        ['John', 'Type1', 54, 2],
        ['Jessica', 'Type2', 22, 6],
        ['Aaron', 'Type1', 3, 1],
        ['Margareth', 'Type2', 42, 8],
        ['Miranda', 'Type2', 33, 6]
      ]);     

  // Define a category picker control for the Type column

 var categoryPicker = new google.visualization.ControlWrapper({
    'controlType': 'CategoryFilter',
    'containerId': 'control2',
    'options': {
      'filterColumnLabel': 'Type',
      'ui': {
      'labelStacking': 'vertical',
        'allowTyping': false,
        'allowMultiple': false
      }
    }
  });

  // Define a Pie chart
  var columns_alarms = new google.visualization.ChartWrapper({
    'chartType': 'ColumnChart',
    'containerId': 'chart1',
    'options': {
      'width': 600,
      'height': 600,
      'legend': 'none',
      'title': 'Alarms',
      'chartArea': {'left': 15, 'top': 15, 'right': 0, 'bottom': 0},
      //'pieSliceText': 'label'
    },
    // Instruct the piechart to use colums 0 (Name) and 3 (Donuts Eaten)
    // from the 'data' DataTable.
    'view': {'columns': [0, 2,3]}
  });

  // Define a table

 var table_alarms = new google.visualization.ChartWrapper({
    'chartType': 'Table',
    'containerId': 'chart2',
    'options': {
      'width': '300px'
    }
  });
 var columns_kpi = new google.visualization.ChartWrapper({
    'chartType': 'ColumnChart',
    'containerId': 'chart4',
    'options': {
      'width': 600,
      'height': 600,
      'legend': 'none',
      'title': 'Alarms',
      'chartArea': {'left': 15, 'top': 15, 'right': 0, 'bottom': 0},
      //'pieSliceText': 'label'
    },

    // Instruct the piechart to use colums 0 (Name) and 3 (Donuts Eaten)
    // from the 'data' DataTable.
    'view': {'columns': [0, 2,3]}
  });

  // Define a table
  var table_kpi = new google.visualization.ChartWrapper({
    'chartType': 'Table',
    'containerId': 'chart5',
    'options': {
      'width': '300px'
    }
  });

  // Create a dashboard
  new google.visualization.Dashboard(document.getElementById('dashboard_alarms')).
  new google.visualization.Dashboard(document.getElementById('dashboard_kpi')).
      // Establish bindings, declaring the both the slider and the category
      // picker will drive both charts.
      bind([categoryPicker], [columns_kpi, table_kpi,columns_alarms, table_alarms]).
      // Draw the entire dashboard.
      draw(data1);
      draw(data2);

}

      google.setOnLoadCallback(drawVisualization);
    </script>
  </head>
  <body style="font-family: Arial;border: 0 none;">
    <div id="dashboard">
      <table>
        <tr style='vertical-align: top'>
          <td style='width: 300px; font-size: 0.9em;'>
            <div id="control1"></div>
            <div id="control2"></div>
            <div id="control3"></div>
          </td>
          <td style='width: 600px'>
            <div style="float: left;" id="chart1"></div>
            <div style="float: left;" id="chart2"></div>
            <div style="float: left;" id="chart3"></div>
            <div style="float: left;" id="chart4"></div>
            <div style="float: left;" id="chart5"></div>
          </td>
        </tr>
      </table>
    </div>
  </body>
</html> 
```

上面的代码呈现 WSD。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T06:28:21.100

您的代码中几乎没有错误。

```
 new google.visualization.Dashboard(document.getElementById('dashboard_alarms')).
 new google.visualization.Dashboard(document.getElementById('dashboard_kpi')). 
```

应该

```
 new google.visualization.Dashboard(document.getElementById('dashboard_alarms'));
 new google.visualization.Dashboard(document.getElementById('dashboard_kpi')). 
```

（“.”应该是第一行末尾的“;”）

同样在同一两行中，您使用 id 引用元素，`dashboard_alarms`但`dashboard_kpi`您的 html 中没有这些元素。您应该添加标签

```
<div id="dashboard_alarms"/>
<div id="dashboard_kpi"/> 
```

到你的 html。

如果您使用的是 Firefox，则可以使用[firebug来调试 javascript 代码。](http://getfirebug.com/)Goole chrome 也可能有一个 javascrpt 调试器。使用 javascript 调试器，您可以诊断此类问题的原因。

[jsfiddle](http://jsfiddle.net/GMjDz/)提供了代码的工作示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T09:45:28.093

我得到了我自己问题的答案。需要必须分离绑定到每个仪表板的控件。一个人不能与两个仪表板的两个数据源共享一个控件。只需有一个单独的控件，一切正常。

# javascript - 多个 jQuery post 很慢

> ID：13527828
> 
> 赞同：0
> 
> 时间：2012-11-23T11:06:57.147
> 
> 标签：javascript, jquery, html, ajax

由于我们有我们的新服务器，我们在调用多个 jquery 帖子时遇到了一些问题。

在某些页面上，我们调用多个 jquery 帖子，如下所示：

```
$.ajax({
    type: "POST",
    url: "../files/processed/includes/process.php",
    data: $('#myform').serialize(),
    complete: function(data)
    {
        $('#results').html(data.responseText);
    }
});

$.ajax({
    type: "POST",
    url: "../files/processed/includes/folders.php",
    data: '',
    complete: function(data)
    {
        $('#getFolders').html(data.responseText);
    }
}); 
```

最后一个帖子总是等第一个。在我们的旧服务器上，这没问题，两个帖子同时加载。

稍作改动后，我在使用旧服务器时速度加快了一点，但速度没有那么快。奇怪的是我们新服务器上的资源好多了。

我提到的变化是：

```
$.ajax({
        type: "POST",
        url: "../files/processed/includes/process.php",
        data: $('#myform').serialize(),
        complete: function(data)
        {
            $('#results').html(data.responseText);

            $.ajax({
                type: "POST",
                url: "../files/processed/includes/folders.php",
                data: '',
                complete: function(data)
                {
                    $('#getFolders').html(data.responseText);
                }
            });
        }
    }); 
```

是否有另一种解决方法可以同时加载两个帖子，或者至少可以加快速度？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T11:12:05.917

`session_write_close()`只要您不需要修改会话数据，就在服务器上执行。

否则，第二个请求将等待，直到第一个请求锁定会话文件。并且在第一个请求结束后释放锁。

# javascript - IE < 9 + HighCharts 不渲染系列

> ID：13527830
> 
> 赞同：6
> 
> 时间：2012-11-23T11:07:01.580
> 
> 标签：javascript, internet-explorer, internet-explorer-8, internet-explorer-7, highcharts

您好，我在 IE < 9 下遇到 HighCharts 问题。

[Internet Explorer HighCharts 截图](https://i.stack.imgur.com/SzeCY.png)

[HighCharts 在其他浏览器中运行良好 screenshot](https://i.stack.imgur.com/ULxa9.png)

如您所见，图表是在 IE 和 Chrome 中呈现的，但是.. 线条仅在 Chrome 中呈现，IE 的数据也必须存在，因为存在图例框（最佳出价，资格值......）

代码（顺便说一下，它是 erb 模板，所以我从 Rails 加载数据）：

```
<script type="text/javascript">
  "use strict";
  var chart;
  // assign data for current and qualification values
  var qualificationTranslation = "<%= t(:qualification_value_nobr) %>";
  var currentTranslation = "<%= t(:event_current_value) %>";
  var qualificationValue = <%= @lot.qualification_value %>
  var currentValue = <%= @lot.current_value %>

  jQuery(document).ready(function() {
    var parseChartData = function(data) {
      var chartData = [];
      jQuery.each(data, function(index, value) {
        chartData.push({
          x: Date.parse(value.x),
          y: parseFloat(value.y),
          formated_value: value.formated_value
        });
      });
      return chartData;
    };
    var dataForChart = parseChartData(<%= raw data[:chart_data].to_json %>);

    chart = new Highcharts.Chart({
      chart: {
        renderTo: 'chart',
        type: 'line',
        zoomType: 'x',
        marginRight: 25
      },
      credits: {
        enabled: false
      },
      title: {
        text: "<%= t(:total_difference_progression_chart) %>",
        x: -20 //center
      },
      xAxis: {
        type: 'datetime',
        labels: {
          formatter: function() {
            return Highcharts.dateFormat('%I:%M %p', this.value)
          }
        }
      },
      yAxis: {
        title: {
         text: "<%= t(:bid_value_price_per_uom_x_quantity, :symbol => @lot.event.currency.symbol) %>"
        }
      },
      tooltip: {
        formatter: function() {
          var serieName = this.point.series.name;
          // Don't show tooltip when you hover over qualification or current price
          if(serieName == qualificationTranslation || serieName == currentTranslation) {
            return false;
          } else {
            return '<b>'+ this.series.name +'</b><br/>'+
            Highcharts.dateFormat('%d %b %I:%M:%S %p', this.x) +
            '<br/><b>'+ this.point.formated_value + '</b>';
          }
        }
      },
      legend: {
        backgroundColor: '#FFFFFF',
        verticalAlign: 'top',
        y: 20,
        shadow: true
      },
      plotOptions: {
        series: {
          step: true
        }
      },
      series: [{
        name: "<%= t(:best_bid) %>",
        data: dataForChart
      }]
    });

    // This function will add the current price and qualification price lines
    var addOrUpdateSerie = function(name, value, serie) {
      var data = []

      data.push([chart.xAxis[0].min, value])
      data.push([chart.xAxis[0].max, value])

      var options = {
        name: name,
        type: 'spline',
        dashStyle: 'shortdot',
        marker: {enabled: false},
        data: data
      }

      if(!serie) {
        chart.addSeries(options);
      } else {
        serie.setData(data)
      }
    };

    addOrUpdateSerie(qualificationTranslation, qualificationValue);
    addOrUpdateSerie(currentTranslation, currentValue);

    socket = io.connect(
      ioServerAddr + '/charts',
      {query: "lot_id=<%= @lot.id %>", secure: isProduction}
    )

    socket.on('connect', function() {
      socket.emit('join', 'host_difference_progression_event_chart');
    });

    socket.on('<%= @lot.id %>/host_difference_progression_event_chart', function(data) {
      // Add data to series
      chart.series[0].setData(parseChartData(data.chart_data))
      //Update hirizontal values
      addOrUpdateSerie(qualificationTranslation, qualificationValue, chart.series[1])
      addOrUpdateSerie(currentTranslation, currentValue, chart.series[2])

      chart.redraw();
    });
  });
</script> 
```

**编辑：它不会引发错误**

**已解决：** 问题出在 Date.parse() 因为 IE 使用其他格式。 [http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/Date.html#method-i-httpdate](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/Date.html#method-i-httpdate)解决了这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:46:19.283

已解决：问题出在 Date.parse() 因为 IE 使用其他格式。[http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/Date.html#method-i-httpdate](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/Date.html#method-i-httpdate)解决了这个问题

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-25T13:51:01.357

我找到了在 IE7、IE8 等上呈现 Highcharts 的解决方案！

添加这个：

```
<meta http-equiv="X-UA-Compatible" content="chrome=IE7"> 
```

我不知道为什么这有效，但它有效:)

# java - Java/Grails 应用程序的 SaaS 基础架构

> ID：13527836
> 
> 赞同：1
> 
> 时间：2012-11-23T11:07:20.497
> 
> 标签：java, grails, heroku, cloud, cloud-foundry

我需要制作一个 Grails 应用程序 SAAS 基础设施。我想要“完全数据分离”（所以多租户不是一个选项），并且在用户注册的地方我启动了一个新的 Heroku 应用程序。一个好的是[http://www.getharvest.com/](http://www.getharvest.com/)

我有一个启动页面，位于 mydomain.com 和 www.mydomain.com。我还有 CNAME 条目 *.mydomain.com 指向 proxy.heroku.com（Heroku Mesh）。我了解新用户注册 SAAS 时应做以下事情：

1）选择应用名称：app-name.mydomain.com

2) 用户名​​/密码/角色（可选）和定价选项

3）然后将代码部署到新的 Heroku 实例（从 gi​​t repo 获取）

4) 添加 Heroku 域：添加 .mydomain.com

5) 使用 Heroku config:add 添加步骤 #2 中的选项

一切看起来都很好。但问题是，我们可以自动化这个过程吗？我正在寻找一种方法来做到这一点（也许是一个时髦的脚本）

注意：heroku 不是必需的（可能是另一个云服务）

干杯，

劳尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:56:26.937

这完全可以通过基于 Cloud Foundry 的提供商实现，它是开源的以及用于自动化部署的客户端库。

Java 客户端在这里 - [https://github.com/cloudfoundry/vcap-java-client](https://github.com/cloudfoundry/vcap-java-client)，我不是 Java / Groovy 开发人员，但通过解构 VMC（CF Ruby 客户端），我几乎可以使用 Ruby 完成这项工作源并使用它来部署站点。

# database - 如何将 Sql 表添加到 Pyqt 主窗口

> ID：13527839
> 
> 赞同：-1
> 
> 时间：2012-11-23T11:07:33.257
> 
> 标签：database, python-3.x, sqlite, pyqt4

我有一个表，我需要在我的主窗口中添加到网格中。我正在使用 python、sqlite3 和 pyqt。

我的问题是我收到类型错误

> QGridLayout.addWidget(QWidget, int, int, int, int, Qt.Alignment alignment=0): 参数 1 有意外的类型 'QSqlTableModel'

我认为这意味着 addWidget 不正确，我不确定它应该是什么？任何想法，将不胜感激。

代码如下：

```
def CreateStockDBWindow(self):
    # Create Table
    self.mainLayout = QtGui.QGridLayout()
    app = QtGui.QApplication(sys.argv)
    self.createConnection()
    model = QtSql.QSqlTableModel()
    self.initializeModel(model)

    # Create Widgets
    self.AddButton = QtGui.QPushButton("Add Stock",self)
    self.RemoveButton = QtGui.QPushButton("Remove Stock",self)
    self.MoreButton = QtGui.QPushButton("More Details",self)

    # Create Layouts
    self.VLayout = QtGui.QVBoxLayout()

    # top bar

        # Create Widgets for Top Bar
    CompanyNameLabel = QtGui.QLabel("<font size='72'><b>"+"Phoenix Trading"+"</b></font>",self)
    searchLabel = QtGui.QLabel("Search:",self)
    searchLineEdit = QtGui.QLineEdit("",self)
    searchButton = QtGui.QCommandLinkButton("Search",self)

        # Create Graphics view
    logo = QtGui.QPixmap("logo.jpg")
    self.myScene = QtGui.QGraphicsScene()
    self.myScene.addPixmap(logo)
    self.graphicsView = QtGui.QGraphicsView(self.myScene)

        # layouts for top bar
    self.TopBarLayout = QtGui.QGridLayout()
    self.RHSTopBarLayout = QtGui.QGridLayout()
    self.RHSVLayout = QtGui.QGridLayout()
    self.TopBarLayout.addWidget(self.graphicsView,0,0)
    self.TopBarLayout.addWidget(CompanyNameLabel,0,1)

    self.RHSVLayout.addWidget(searchLabel,0,0)
    self.RHSVLayout.addWidget(searchLineEdit,0,1)
    self.RHSTopBarLayout.addWidget(searchButton,1,0)
    self.RHSTopBarLayout.addLayout(self.RHSVLayout,0,0)
    self.TopBarLayout.addLayout(self.RHSTopBarLayout,0,2)

    # Assemble

    self.VLayout.addWidget(self.AddButton)
    self.VLayout.addWidget(self.RemoveButton)
    self.VLayout.addWidget(self.MoreButton)

    self.mainLayout.addLayout(self.TopBarLayout,0,0,1,5)
    self.mainLayout.addLayout(self.VLayout,4,1)
    self.mainLayout.addWidget(model,4,5)
    app.exec    

    return self.mainLayout 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:52:55.100

表格模型不是图形控件，它是此类控件与其数据之间的接口。

你可能想把你的表模型放在一个`QTableView`.

# iphone - UIImage 使用动画向下滑动

> ID：13527841
> 
> 赞同：0
> 
> 时间：2012-11-23T11:07:40.013
> 
> 标签：iphone, ios, xcode4

如何在ios app中实现图片下滑动画？

我用过这段代码：

```
 imageview.animationImages = [NSArray arrayWithObjects:
                                 [UIImage imageNamed:@"img10.png"],
                                 [UIImage imageNamed:@"img11.png"],[UIImage imageNamed:@"img12.png"],[UIImage imageNamed:@"img13.png"],nil];
    imageview.animationDuration = 10.00;  

    imageview.animationRepeatCount = 0; 

    [imageview startAnimating]; 
```

但这只是一个简单的幻灯片放映。帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:13:10.613

试试这个代码..

```
 imageview = [[UIImageView alloc] initWithFrame:self.view.frame];
      imageview.animationImages = [NSArray arrayWithObjects:
                             [UIImage imageNamed:@"img10.png"],
                             [UIImage imageNamed:@"img11.png"],[UIImage imageNamed:@"img12.png"],[UIImage imageNamed:@"img13.png"],nil];

        imageview.animationDuration = 1.25;
        imageview.animationRepeatCount = 10;
        [imageview startAnimating];
        [self.view addSubview:animationView];
        [imageview release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:14:04.400

请尝试以下代码

```
 -(void) createNewImage {
        imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0,0,320,460)];

        imageView.animationImages = [NSArray arrayWithObjects:
                                 [UIImage imageNamed:@"img10.png"],
                                 [UIImage imageNamed:@"img11.png"],
                                 [UIImage imageNamed:@"img12.png"],
                                 [UIImage imageNamed:@"img13.png"],nil];
        [imageView setAnimationRepeatCount:10];
        imageView.animationDuration =1.5;
        [imageView startAnimating]; 
        [NSTimer scheduledTimerWithTimeInterval:15.0 target:self selector:@selector(setLastImage:) userInfo:nil repeats:NO];

     }

    -(void)setLastImage:(id)obj
    {
        [imageView performSelectorOnMainThread:@selector(setImage:) withObject:[UIImage imageNamed:@"img12.png"] waitUntilDone:YES];
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T11:27:49.387

您可以`UIImageView`使用 imgVw.centre 更改中心，您可以使用`NSTimer`. 根据屏幕改变中心，您可以获得屏幕高度
`[[UIScreen mainScreen]bounds].size.height`

```
theTimer = [NSTimer scheduledTimerWithTimeInterval:1.0f 
        target:self 
        selector:@selector(updateTimer:) 
        userInfo:nil 
        repeats:YES];

- (void)updateTimer:(NSTimer *)theTimer {
    //update centre; 
    imgVw.centre.y += 4;
// you can update the image also if needed use if case
imgVw.image = image2;

} 
```

# extjs - 如何在 ExtJS4 的 vbox 中设置动态宽度？

> ID：13527842
> 
> 赞同：0
> 
> 时间：2012-11-23T11:07:54.707
> 
> 标签：extjs, extjs4, extjs4.1

我想要以下布局（右上角的图表计数是**动态**的）： ![我想要的布局](../Images/e821df0810b07309c4da973b1f27788c.png)

我试图为主容器采用边框布局。`Chart1`是`region: 'west'`，其余的在`region: 'center'`.

在中间，我有一个 vbox 容器，有 2 个容器，一个用于图表（顶部），一个是网格（底部）

现在的问题是，这两个容器需要固定宽度，否则它们的宽度为零......

此外，我希望所有容器都是**流动**的，所以我可以调整所有内容的大小而不会出现空白。

`flex: 1`如果我希望 vbox 中的某些容器获得**100% 宽度**，我阅读了有关使用的信息，但这不起作用。它只是使 vbox 中的 2 个容器使用相同的高度。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:24:01.883

像这样的东西怎么样（在架构师中快速绘制）：

```
Ext.define('MyApp.view.MyWindow', {
extend: 'Ext.window.Window',

height: 600,
width: 1000,
layout: {
    align: 'stretch',
    type: 'hbox'
},
title: 'My Window',

initComponent: function () {
    var me = this;

    Ext.applyIf(me, {
        items: [{
            xtype: 'container',
            flex: 1,
            layout: {
                type: 'fit'
            },
            items: [{
                xtype: 'chart'
            }]
        }, {
            xtype: 'container',
            flex: 4,
            layout: {
                align: 'stretch',
                type: 'vbox'
            },
            items: [{
                xtype: 'container',
                flex: 1,
                layout: {
                    align: 'stretch',
                    type: 'hbox'
                },
                items: [{
                    xtype: 'chart',
                    flex: 1,
                }, {
                    xtype: 'chart',
                    flex: 1,
                }, {
                    xtype: 'chart',
                    flex: 1,
                }, {
                    xtype: 'chart',
                    flex: 1,
                }]
            }, {
                xtype: 'gridpanel',
                flex: 1,
                title: 'My Grid Panel',
            }]
        }]
    });
    me.callParent(arguments);
}
}); 
```

尽管这样，第二个容器的 Flex 值必须考虑到您水平显示的图表数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T11:34:56.357

你试过`table`布局吗？用它创建这样的布局非常容易。例子：

```
Ext.onReady(function(){

  Ext.create('Ext.Viewport', {
    renderTo: Ext.getBody(),
    style: 'border: 1px solid red',

    layout: {
        type: 'table',
        columns: 5,
      tdAttrs: {
        style: 'padding: 20px; border: 1px solid blue;'
      }
    },

    defaults: {
      bodyStyle: 'border: 1px solid red'
    },

    items: [
      { xtype: 'panel', html: 'Chart1', rowspan: 2 },
      { xtype: 'panel', html: 'Chart2' },
      { xtype: 'panel', html: 'Chart3' },
      { xtype: 'panel', html: 'Chart4' },
      { xtype: 'panel', html: 'Chart5' },
      { xtype: 'panel', html: 'Grid', colspan: 4 }
    ]

  });

}); 
```

工作样本：http: [//jsbin.com/ojijax/1/](http://jsbin.com/ojijax/1/)

* * *

要拥有动态布局 IMO，最好的解决方案是使用`hbox`和`vbox`布局。例如，您可以将 2 到 n 的图表包装到一个容器中，比如说`chartPanel`- 这将具有`hbox`布局。然后包装`chartPanel`并`grid`放入另一个容器 -`panel`带有`vbox`布局。`chart1`然后再次用布局包装`panel`。`hbox`然后，您必须`align: stretch`为每个`box`布局设置适当的 flex 以平均划分屏幕。

工作样本：http: [//jsfiddle.net/75T7h/](http://jsfiddle.net/75T7h/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-23T11:21:46.787

`panel.add`我认为您正在使用extjs 选项（更好的方法）在 for 循环中加载 chart2、3、4、5 。如果是这样，那么保持这些面板的数量（这里是 4 个）和每个面板，同时分配你给的宽度

```
width:(1/countOfchrtLIst2345) * grid.getWidth(), 
```

因此，无论计数如何，它都会在您的顶部 vbox 中的所有这些水平面板之间划分可用宽度并进行分配。

在您的示例中，它分配

> (1/4) * 200

（思维网格的宽度为200）

# python - 从 Django 视图类中的 URL 访问主键

> ID：13527843
> 
> 赞同：25
> 
> 时间：2012-11-23T11:07:56.283
> 
> 标签：python, django, url-routing

我有一个 URL 模式映射到我的 Django 应用程序中的自定义视图类，如下所示：

```
url( r'^run/(?P<pk>\d+)/$', views.PerfRunView.as_view( )) 
```

问题是，我无法弄清楚如何从视图类中的 URL 模式字符串访问“pk”，以便可以根据其数据库 ID 检索特定模型对象。我用谷歌搜索，查看了 Django 文档，搜索了 Stack Overflow，但我根本找不到满意的答案。

谁能告诉我？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-11-23T12:00:23.083

在基于类的视图中，URL 中的所有元素都被放入`self.args`（如果它们是非命名组）或`self.kwargs`（对于命名组）。因此，对于您的观点，您可以使用`self.kwargs['pk']`.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-06-24T10:34:53.877

访问视图帖子中的主键 =

```
Class_name.objects.get(pk=self.kwargs.get('pk')) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-23T05:14:07.947

这是一个基于 django restframework 的示例，用于在 url 中使用 pk 检索对象：

视图.py

```
class ContactListView(generics.ListAPIView):
    queryset = Profile.objects.all()
    serializer_class = UserContactListSerializer

    def get(self, request, pk, *args, **kwargs):
        contacts = Profile.objects.get(pk=pk)
        serializer = UserContactListSerializer(contacts)
        return Response(serializer.data) 
```

网址.py

```
 url(r'^contact_list/(?P<pk>\d+)/$', ContactListView.as_view()) 
```

# sql - ORA-00904 无效标识符错误

> ID：13527845
> 
> 赞同：3
> 
> 时间：2012-11-23T11:08:06.850
> 
> 标签：sql, oracle

我得到 ORA-00904 'c' 无效标识符错误。这个别名有什么问题？

```
select NO, count(JOINT_NO) as c
from JOINT
WHERE HOLDER = 'Y' AND JOINT.c > 1
GROUP BY NO; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T11:09:55.670

我想你想获取那些计数 > 1 的记录。所以你不能`Indentifier C`在同一个查询的`WHERE`子句中使用。

```
select NO, count(JOINT_NO) as c
from JOINT
WHERE HOLDER = 'Y'
GROUP BY NO
HAVING COUNT(JOINT_NO)>1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T11:10:07.667

`c`table 中不存在列`JOINT`，导致您收到错误消息。

像这样更改您的查询：

```
select NO, count(JOINT_NO) as c
from JOINT
WHERE HOLDER = 'Y'
GROUP BY NO
HAVING count(JOINT_NO) > 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-07T06:29:53.897

您可以在 FROM 子句中使用子选择（子查询）：

```
 select T1.NO,T1.c
    from
    (
      select NO, count(JOINT_NO) as c
      from JOINT
      WHERE HOLDER = 'Y' 
      GROUP BY NO
    ) as T1
    where T1.c > 1 
```

你也可以使用**有**：

```
 select NO, count(JOINT_NO) as c
    from JOINT
    WHERE HOLDER = 'Y'
    GROUP BY NO
    HAVING COUNT(JOINT_NO)>1 
```

# python - 避免在每个页面上运行 GeoIP

> ID：13527848
> 
> 赞同：1
> 
> 时间：2012-11-23T11:08:26.103
> 
> 标签：python, session, cookies, nginx, geoip

这是我正在使用的模块：[http ://wiki.nginx.org/HttpGeoipModule](http://wiki.nginx.org/HttpGeoipModule)

据我所见，由于它是在 nginx 配置和 uwsgi 上配置的，因此看起来别无选择，只能让它在每个页面上运行 geoip，然后只在需要时收集和使用变量。

从性能的角度来看，我宁愿拥有它，所以我只在需要时请求 geoip，将其缓存在 cookie 或会话中，然后不再请求它以加快站点速度。

有人能告诉我这是否可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T19:11:13.933

> 从性能的角度来看，我宁愿拥有它，所以我只在需要时请求 geoip，将其缓存在 cookie 或会话中，然后不再请求它以加快站点速度。有人能告诉我这是否可能吗？

是的，这是可能的。但从性能的角度来看，您不必担心，因为 geoip 数据库存储在内存中（在读取配置阶段），而 nginx 的查找速度非常快。

无论如何，如果你愿意，你可以使用类似的东西：

```
set $country $cookie_country;

if ($country == '') {
    set $country $geoip_country_code;
    add_header Set-Cookie country=$geoip_country_code; 
}

uwsgi_param GEOIP_COUNTRY $country; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-23T14:10:24.227

不，您不能让 nginx 仅按需执行 GeoIP 查找。由于您定义了**geoip_country**或**geoip_city**指令，无论以后是否使用答案，nginx 都会从 GeoIP 数据库请求数据。但是您完全可以在没有 nginx 的情况下获取 GeoIP 数据，即直接使用您的应用程序。看看python geoip lib：[http ://dev.maxmind.com/geoip/downloadable#Python-5](http://dev.maxmind.com/geoip/downloadable#Python-5)

# android - 为 mapsforge 项目正确设置 M2_repo 类路径变量

> ID：13527854
> 
> 赞同：1
> 
> 时间：2012-11-23T11:08:49.643
> 
> 标签：android, eclipse, openstreetmap

我一直在尝试运行 mapsforge 项目提供的一些应用程序。我按照此处给出的说明进行操作：

（[http://code.google.com/p/mapsforge/wiki/GettingStartedDevelopers](http://code.google.com/p/mapsforge/wiki/GettingStartedDevelopers)）

但是，按照说明操作后，当我尝试将其中一个 mapsforge 应用程序（例如 AdvancedMapViewer 应用程序）导入我的 eclipse 工作区时，我的项目上有那个红色感叹号。为了找出我去构建路径的原因，它在这个路径上显示了一个 x 标记：

> M2_REPO/org/mapsforge/mapsforge-map/0.3.1-SNAPSHOT/mapsforge-map-0.3.1-SNAPSHOT-jar-with-dependencies.jar

谁能告诉我如何正确设置 M2_REPO 类路径变量？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:12:58.347

好的，我找到了解决方案，我正在把它写下来，这样它可能对其他在 mapsforge 项目中遇到同样问题的人有所帮助。根据本教程（[http://code.google.com/p/mapsforge/wiki/GettingStartedDevelopers），maven](http://code.google.com/p/mapsforge/wiki/GettingStartedDevelopers)用于构建项目。因此，要正确设置类路径变量，我需要知道本地 Maven 存储库的位置。在 Ubuntu 中，它通常位于用户的主目录 (~) 中。它可能作为一个名为**.m2**的隐藏目录保留在那里。因此，请确保显示隐藏文件。在我的例子中，maven 存储库的位置是**/home/myusername/.m2/repository**。因此，我必须从 Eclipse 转到**Window>Preferences>Java>Classpath 变量**并创建一个**NEW**入口。然后我必须添加**M2_REPO**作为名称和**/home/myusername/.m2/repository**作为路径。这将导致项目的重建。现在您应该能够从 Eclipse 工作区中签出的 mapsforge 主干目录导入和运行项目而不会出错。

# java - 使用 Java+Scala+Slick2D 时“无法从给定的启动配置中找到主要方法”

> ID：13527869
> 
> 赞同：10
> 
> 时间：2012-11-23T11:09:44.367
> 
> 标签：java, scala, executable-jar, eclipse-juno, slick2d

我有一个使用 Java+Scala+Slick2D 的项目。

从 Eclipse 中启动时，项目本身运行良好。但是当我尝试制作一个 jar 文件时，它只是拒绝工作。这是我在尝试将其导出为 Runnable jar 时不断遇到的错误：

![在此处输入图像描述](../Images/ddedc3f1733199e5b2fce6ca9e897f9e.png)

如果我尝试仅导出到 Jar 文件中，则无法找到主类：

![在此处输入图像描述](../Images/d582a234b7bc0780a278151bf84ffb93.png)

当然，game.TicTacGame 中有一个主类。但它拒绝承认。我尝试用一​​个简单的 Hello World 项目创建一个可执行文件，它运行良好。它甚至可以检测到主类。在这种情况下，为什么 Eclipse 没有检测到主类？

PS：我也尝试提取创建的.jar 文件，编辑manifest.mf 文件以添加Main-Class：game.TicTacGame，输入两个新行并重新创建jar。然后它给了我一个损坏的 jar 文件错误。

我无能为力，并希望在这方面提供任何帮助。我正在使用带有 Eclipse Juno、Java 1.7 和 Scala 2.10 的 Windows 7 x64

编辑：主类是在 Java

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-23T12:42:49.960

好的，我得到它的工作。显然，我需要做的就是重新启动 Eclipse。然后神奇地，它开始检测 Main 类：

![在此处输入图像描述](../Images/6b77b8f858f011f207f7e434f049bed3.png)

但是 jar 开始给我关于 Slick2d、LWJGL 和其他库的 noClassDefFound 错误。这就是[JarSplice 来救](http://ninjacave.com/jarsplice)我的地方。我像以前一样导出了项目，包括所有的库和资源。

然后，我启动了 JarSplice 并添加了如下所有内容：

1.  进入“Add Jars”，添加刚才通过eclipse创建的project.jar，添加lwjgl.jar、slick.jar和scala-library.jar。lwjgl 和 slick 应该在您的项目 lib 文件夹中，您将在其中导入它们。scala-library 应该在它所说的任何地方都可用。确保你也添加它![在此处输入图像描述](../Images/b8e957f18e87e18dcc15f53736e95b7a.png)
2.  接下来，当我尝试“添加本地人”时，它一直给我“重复库”错误。所以我将它们全部删除并保持为空。
3.  接下来在“主类”中，我输入了主类的路径，即game.TicTacGame
4.  最后，“创建胖罐”。它完美地工作:)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-29T06:30:29.383

I just encountered the same problem, and here is how I solved it:

1.  Open "Run As" --> "Run Configuration" on the project you want to export

2.  Click "Search" for Eclipse to refresh the list of main class

3.  Then export Runnable JAR file again, and everything goes smoothly.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-30T06:24:01.047

I recently figured a better way to do this using '*Runnable jar export*' which might help you. In order for your main method to be listed in that list, you need to add the main method to the *Run Configuration* list.

This way it's simpler to create a runnable jar especially if you want to do it repeatedly.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-18T10:55:24.760

Well, got the same Problem and solved it by selecting my GUI to export and not the whole Project.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-15T06:33:33.803

The most easiest method is run the java file once and automatically the file appears in the list.Even i was facing the error but it was solved by using this simple method.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-11T14:48:53.453

I had this problem with Eclipse version 2019-03 (4.11.0) and compiler JaveSE-11\. Choosing the right launch configuration and exporting runnable jar failed over and over again with an error

> Could not find main method from given launch configuration

I've tried to restart Eclipse and do a clean build, but it didn't help.

In the end, I found a workaround to go into the generated jar file (I've used 7zip) and change META-INF/MANIFEST.MF file. The file should have something like this inside:

```
Manifest-Version: 1.0
Class-Path: .
Main-Class: <package name>.<class name> 
```

Hope it helps someone.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-20T13:30:30.257

我遇到了同样的问题，在我的情况下，我发现 Runnable Jar 文件规范对话框中的“启动配置”不正确。不知何故，eclipse自动接受了它。“启动配置”应该是具有 main 方法的 java 文件。基本上，它是文件名包。在我更改“启动配置”的那一刻，我能够创建 Jar 文件而没有任何错误。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-09-03T07:31:26.500

我遇到过同样的问题。为了解决这个问题，您需要关闭所有打开的文件并打开一个具有 main() 方法的 java 类文件。然后从 eclipse 中导出并正常工作。

# ios - IOS：删除目录中的文件

> ID：13527870
> 
> 赞同：1
> 
> 时间：2012-11-23T11:09:45.710
> 
> 标签：ios, nsdocumentdirectory

在我的应用程序中，我下载了一个带有 ASiHttpRequest 的 pdf 文件，并且有以下说明：

```
NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    [currentDownload setDownloadDestinationPath:[documentsDirectory stringByAppendingPathComponent:@"file.pdf"]]; 
```

第一次工作正常，我可以打开这个file.pdf，但是当我第二次下载这个pdf时，它似乎没有替换文件而是进行了合并。

在我这样做之前，但它不起作用问题出在哪里，或者从它的路径中删除这个 file.pdf 的最佳方法是什么？

```
 - (void) removeFile{
  NSString *extension = @"pdf";
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectoryPDF = [paths objectAtIndex:0];

    NSArray *contents = [fileManager contentsOfDirectoryAtPath:documentsDirectoryPDF error:NULL];
    NSEnumerator *e = [contents objectEnumerator];
    NSString *filename;
    while ((filename = [e nextObject])) {

        if ([[filename pathExtension] isEqualToString:extension]) {

            [fileManager removeItemAtPath:[documentsDirectoryPDF stringByAppendingPathComponent:filename] error:NULL];
        }
    }
} 
```

**编辑**

现在我用这个方法

```
- (void) removeFile{

    NSError *error;

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,     NSUserDomainMask, YES);
    NSString *path = [[paths objectAtIndex:0]stringByAppendingString:@"/file.pdf"];

    NSFileManager *fileManager = [NSFileManager defaultManager];

    NSLog(@"Documents directory before: %@", [fileManager contentsOfDirectoryAtPath:[paths objectAtIndex:0] error:&error]);

        if([fileManager fileExistsAtPath:path] == YES)
        {
            NSLog(@"file exist and I delete it");

            NSFileManager *fileManager = [NSFileManager defaultManager];
            [fileManager removeItemAtPath:path error:&error];

            NSLog(@"error:%@", error);
        }

    NSLog(@"Documents directory after: %@", [fileManager contentsOfDirectoryAtPath:[paths objectAtIndex:0] error:&error]);

} 
```

此方法识别目录中有 NSLog 中的“file.pdf”

```
NSLog(@"Documents directory before: %@", [fileManager contentsOfDirectoryAtPath:[paths objectAtIndex:0] error:&error]); 
```

但它崩溃后

```
"NSLog(@"file exist and I delete it");" 
```

我在控制台中只有一个“lldb”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T11:54:44.833

我使用这种方法从本地缓存中删除 pdf 文件，只需进行一些修改，您就可以使其适应您的需要

```
- (void)removePDFFiles
{
    NSFileManager *fileMngr = [NSFileManager defaultManager];

    NSArray *cacheFiles = [fileMngr contentsOfDirectoryAtPath:[self cacheDirectory]
                                                    error:nil];
    for (NSString *filename in cacheFiles) {
        if ([[[filename pathExtension] lowercaseString] isEqualToString:@"pdf"]) {
            [fileMngr removeItemAtPath:[NSString stringWithFormat:@"%@/%@", [self cacheDirectory], filename] error:nil];
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:25:19.083

很可能您在下载新文件之前没有删除该文件，并且 ASIHttpRequest 看到已经有一个同名文件并将数据附加到该文件而不是替换该文件。我不确定 PDF 格式，但这通常不会导致合并的**可读**文件。无论如何，首先您需要使用文件管理器类为您提供的错误机制。传递 NULL 是不好的。很坏。因此，创建一个 NSError 对象并将其传递给`contentsOfDirectoryAtPath`and`removeItemAtPath`方法，然后检查错误，确保操作成功完成。之后，您可能还需要检查扩展名是否大写，因为基于 Unix 的系统区分大小写（尽管模拟器不区分，但设备区分）并且`example.PDF`不会根据您的代码删除文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T12:32:35.677

尝试以下操作：

```
-(BOOL) removePDF
{
    BOOL removeStatus = NO;

    NSArray *dirPaths;
    NSString *docsDir;

    dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, 
                                               NSUserDomainMask, YES);

    docsDir = [dirPaths objectAtIndex:0];

    NSString* fileName = @"file.pdf"; //your file here..

    NSString* filePath = [NSString stringWithFormat:@"%@/%@", docsDir, fileName];

    if([[NSFileManager defaultManager] fileExistsAtPath:filePath] == YES)
    {
       removeStatus = [[NSFileManager defaultManager] removeItemAtPath:filePath]; 
    }
    return removeStatus;
} 
```

# selenium - WebDriver：在驱动程序之间切换

> ID：13527874
> 
> 赞同：0
> 
> 时间：2012-11-23T11:10:06.147
> 
> 标签：selenium, webdriver

要测试应用程序的功能，我需要使用两个不同的驱动程序，因为使用一个驱动程序我无法获得预期的行为。我可以像这样切换到第二个驱动程序（driver2）：

```
driver2.getWindowHandle();
driver2.getWindowHandles(); 
```

我可以正常使用driver2。问题是，当尝试通过执行相同操作返回到 driver1 时，什么也没有发生！硒无法找到元素。即使在以下情况下也不起作用：

```
driver1.switchTo.window(driver1.getWindowHandle); 
```

我该如何解决这个问题？

测试流程是 driver1、drvier2、driver1（无法执行此操作），最后是 driver2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:33:28.573

做了一个快速测试：

```
FirefoxDriver d1 = new FirefoxDriver();
FirefoxDriver d2 = new FirefoxDriver();
d1.get("https://www.google.com");
d2.get("https://www.google.com");
d1.findElementByName("q").sendKeys("cheese");
d2.findElementByName("q").sendKeys("paneer");
d1.quit();
d2.quit(); 
```

为我工作..我不必使用 getwindowhandle 来移动差异驱动程序的两个窗口。这是否解决了您的情况？

# magento - 如何在 Magento 中通过 csv 导入可配置产品？

> ID：13527878
> 
> 赞同：1
> 
> 时间：2012-11-23T11:10:09.370
> 
> 标签：magento, import, product, dataflow

我需要在 Magento 中通过 csv 导入可配置产品和分组产品

那么任何人都可以为此提供csv演示文件吗？使用`import/export`或`dataflow profiles`。或为此提出建议。

谢谢

# crystal-reports - 在 Crystal Reports 中按条件计数组

> ID：13527881
> 
> 赞同：0
> 
> 时间：2012-11-23T11:10:16.513
> 
> 标签：crystal-reports

我的（内部）组页脚中的公式如下所示：

```
IIF( SUM({tbl.field1}, {groupA}) > 23 and SUM({tbl.field2},{groupA}) > 50, "OKAY", "NOT OKAY") 
```

如果组是“OKAY”或“NOT OKAY”，则会为每个（内部）组打印。外部组页脚应该计算有多少内部组是“OKAY”和“NOT OKAY”。所以输出应该是这样的：

```
GROUP1-HEADER
   GROUP2-HEADER
      REC
      REC
   GROUP2-FOOTER: "OKAY"
   GROUP2-HEADER
      REC
      REC
   GROUP2-FOOTER: "NOT OKAY"
GROUP1-FOOTER: 1x "OKAY, 1x "NOT OKAY". 
```

问题是，我不能使用公式（来自 group2-footer）来计算计数。我的想法是使用运行总计，计算每个 group2-change 的公式。但该公式未列在用于运行总计的公式选择中。

我正在使用 CR-XI。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:43:12.930

我觉得我们的事情过于复杂了，但你可以使用运行总数来做到这一点：

将要汇总的字段设置为 group2 的主键 将汇总类型设置为 distinct count 将评估公式设置为：`SUM({tbl.field1}, {groupA}) > 23 and SUM({tbl.field2},{groupA}) > 50` 将重置设置为 group1 的更改

我附上了一个样本（查看运行总数）：[http ://tickett.net/downloads/13527881.rpt](http://tickett.net/downloads/13527881.rpt)

# php - 如何使用标头发送多个文件

> ID：13527884
> 
> 赞同：0
> 
> 时间：2012-11-23T11:10:28.287
> 
> 标签：php, html, file, header

如何使用 header() 或其他方式发送多个文件，例如“.doc”文件和“.xls”文件？

无需刷新浏览器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T11:14:42.860

你不能。这不是 PHP 限制，而是 HTTP/Web 浏览器限制。HTTP 不提供通过一个请求发送多个文件的机制。

但是，您可以使用一些 PHP 脚本来生成多个 iframe，每个 iframe 会启动一个下载，然后以这种方式伪造它。

# varnish - 清漆使用标准输出输出 ReqEnd

> ID：13527886
> 
> 赞同：1
> 
> 时间：2012-11-23T11:10:43.553
> 
> 标签：varnish, varnish-vcl

是否可以在 VCL 中使用 std.log 输出[ReqEnd](https://www.varnish-cache.org/trac/wiki/Varnishlog)？我想在 varnishncsa 日志记录中使用 ReqEnd。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:35:15.313

我不知道您是否可以在 varnishnsca 中记录 ReqEnd，但您可以记录请求开始时间和 xid。

vcl 示例：

```
........
C{
    #include <syslog.h>
    #include <sys/time.h>
    #include <stdlib.h>
    #include <stdio.h>
    #include <string.h>
}C

sub vcl_recv {

    C{
        struct timeval detail_time;
        gettimeofday(&detail_time,NULL);
        char start[20];
        sprintf(start, "%lu%06lu", detail_time.tv_sec, detail_time.tv_usec);
        VRT_SetHdr(sp, HDR_REQ, "\020X-Request-Start:", start, vrt_magic_string_end);
    }C

........

sub vcl_deliver {
    set resp.http.X-ID = req.xid;
}
....... 
```

你可以看到它：`varnishncsa -F "%{X-Request-Start}o %{X-ID}o"`

# javascript - grunt.js 的全局安装失败

> ID：13527889
> 
> 赞同：9
> 
> 时间：2012-11-23T11:11:00.297
> 
> 标签：javascript, node.js, npm, gruntjs

我可以`gruntjs`使用`npm install grunt`.

但是当我尝试全局安装它时`npm install grunt -g`，我收到了一个错误：

```
npm ERR! Error: EACCES, symlink '../lib/node_modules/grunt/bin/grunt'
npm ERR! 
npm ERR! Please try running this command again as root/Administrator.
npm ERR! 
npm ERR! System Linux 2.6.18-92.el5xen
npm ERR! command "nodejs" "/usr/bin/npm" "install" "grunt" "-g"
npm ERR! cwd /home/lj
npm ERR! node -v v0.6.18
npm ERR! npm -v 1.1.19
npm ERR! path ../lib/node_modules/grunt/bin/grunt
npm ERR! code EACCES
npm ERR! message EACCES, symlink '../lib/node_modules/grunt/bin/grunt'
npm ERR! errno {}

npm ERR! Error: EACCES, open 'npm-debug.log'
npm ERR! 
npm ERR! Please try running this command again as root/Administrator.
npm ERR! 
npm ERR! System Linux 2.6.18-92.el5xen
npm ERR! command "nodejs" "/usr/bin/npm" "install" "grunt" "-g"
npm ERR! cwd /home/lj
npm ERR! node -v v0.6.18
npm ERR! npm -v 1.1.19
npm ERR! path npm-debug.log
npm ERR! code EACCES
npm ERR! message EACCES, open 'npm-debug.log'
npm ERR! errno {}
npm ERR! 
npm ERR! Additional logging details can be found in:
npm ERR!     /home/lj/npm-debug.log
npm not ok 
```

我也有`sudo`错误：

```
npm ERR! Error: spawn ENOENT
npm ERR!     at errnoException (child_process.js:483:11)
npm ERR!     at ChildProcess.spawn (child_process.js:446:11)
npm ERR!     at child_process.js:342:9
npm ERR!     at Object.execFile (child_process.js:252:15)
npm ERR!     at uidNumber (/usr/lib/nodejs/uid-number/uid-number.js:33:17)
npm ERR!     at loadUid (/usr/lib/nodejs/npm/lib/npm.js:336:5)
npm ERR!     at Array.2 (/usr/lib/nodejs/bind-actor.js:15:8)
npm ERR!     at LOOP (/usr/lib/nodejs/chain.js:15:13)
npm ERR!     at /usr/lib/nodejs/chain.js:18:7
npm ERR!     at setUser (/usr/lib/nodejs/npm/lib/npm.js:346:32)
npm ERR! You may report this log at:
npm ERR!     <http://github.com/isaacs/npm/issues>
npm ERR! or email it to:
npm ERR!     <npm-@googlegroups.com>
npm ERR! 
npm ERR! System Linux 2.6.18-92.el5xen
npm ERR! command "nodejs" "/usr/bin/npm" "install" "grunt" "-g"
npm ERR! cwd /home/lj
npm ERR! node -v v0.6.18
npm ERR! npm -v 1.1.19
npm ERR! syscall spawn
npm ERR! code ENOENT
npm ERR! message spawn ENOENT
npm ERR! errno {}
npm ERR! 
npm ERR! Additional logging details can be found in:
npm ERR!     /home/lj/npm-debug.log
npm not ok 
```

我能做些什么来安装它？

PS 某些文件夹的权限可能是针对 的`root:root`，而不是针对我的用户的。因为我们的管理员以这种方式安装了 VM...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-27T03:17:08.420

grunt 和 bower 我也遇到过这个问题

我找到的解决方案在这篇文章[NPM config](https://npmjs.org/doc/config.html)

在您的 .npmrc 中，您需要设置前缀路径

```
prefix = /usr/local 
```

或者您可以像这样从终端执行此操作：

```
npm config set prefix "/usr/local" 
```

这样节点就会知道在哪里安装它们：

在 npm 1.0 中，有两种安装方式：

global — 这会将模块放在 {prefix}/lib/node_modules 中，并将可执行文件放在 {prefix}/bin 中，其中 {prefix} 通常类似于 /usr/local。如果提供，它还会在 {prefix}/share/man 中安装手册页。

本地 ---- 这会将您的包安装在当前工作目录中。节点模块位于 ./node_modules 中，可执行文件位于 ./node_modules/.bin/ 中，并且根本没有安装手册页。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T03:43:25.030

Try chowning the node_modules folder and then try to install again:

```
sudo chown -R $USER /path/to/node_modules/folder 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-16T18:51:20.070

遇到同样的问题。以下对我有用：

```
sudo npm install -g grunt-cli 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-12-24T14:42:21.933

添加选项**--no-bin-links**效果很好。我尝试了一切，只有这解决了我的问题。我在 ubuntu 12.04 上安装 Yeoman，它总是返回错误：

```
npm ERR! Error: EACCES, symlink '../lib/node_modules/yo/cli.js' 
```

然后，我做了：

```
npm install -g --no-bin-links yo 
```

=D

更多详情[https://github.com/isaacs/npm/issues/2380](https://github.com/isaacs/npm/issues/2380)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-18T14:46:58.740

试试`sudo npm install -g grunt`？

# html - 网页上的文字水印

> ID：13527890
> 
> 赞同：-1
> 
> 时间：2012-11-23T11:11:02.883
> 
> 标签：html, css, watermark

我想在网页上创建一个**文本水印。**

水印的**文本**将是动态的。

有什么方法可以为网页制作水印吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T11:16:05.523

只需定位：将文本元素固定到页面右下角。

# c++ - C++ std::string.replace 不替换，为什么不替换？

> ID：13527893
> 
> 赞同：1
> 
> 时间：2012-11-23T11:11:10.053
> 
> 标签：c++, string, visual-studio-2008, replace

如果我将 string.replace 与普通字符一起使用，它会一切顺利，但是一旦我尝试替换像德语“ü”这样的特殊字符，我就没有结果

```
int main(){
    string s("Gl\\u00fcckstadt");
    string a = "\\u00fc";
    string ue = "ü";
    s = s.replace(s.find(a), a.length(), ue);
    cout << s << endl;
    system("pause");
    return 0;
} 
```

replace doenst 替换我需要它替换的字符串，有什么建议我错了吗？

```
int main(){
    string s("Glssckstadt");
    string a = "ss";
    string ue = "ue";
    s = s.replace(s.find(a), a.length(), ue);
    cout << s << endl;
    system("pause");
    return 0;
} 
```

这个会将“ss”替换为“ue”，但是一旦我尝试用“ü”替换它，它就不起作用了......

# ruby - 在 Ruby 中进行流根转换的 SVG

> ID：13527894
> 
> 赞同：0
> 
> 时间：2012-11-23T11:11:22.987
> 
> 标签：ruby, svg, imagemagick, png, inkscape

我正在尝试将 SVG 转换为其中包含 flowroot 元素的 PNG。Inkscape 做得很好，当我使用 Cairo 或 imagemagick 进行转换时，flowroot 元素显示为一个不透明的框，而不是在其中呈现文本。

我认为这是因为 flowroots 是 SVG 1.2 的一部分。有谁知道任何其他可能有帮助的宝石/图书馆？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T12:13:28.293

那么为什么不直接从inkscape将它导出到PNG呢？

您会发现除了 inkscape 之外的任何地方都不支持 flowRoot。它是在 SVG 1.2 Full 的旧工作草案中定义的，如果您查看上次发布的[SVG 1.2 Full 工作草案](http://www.w3.org/TR/SVG12/)，您会发现：

> 读者可以在下一个草案中看到的功能集的显着变化包括：
> 
> *   用 SVG 1.2 Tiny textArea 功能的超集替换之前的流动文本提案。

也就是说，SVG WG 正在开发[SVG2](https://svgwg.org/svg2-draft/)，所以如果你想知道事情的发展方向，你应该看看那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:23:32.533

你试过安装 libRSVG 吗？

这篇[文章](http://www.imagemagick.org/discourse-server/viewtopic.php?t=10275&p=33920#p32309)说：

> IM 内置的 SVG 转换器中没有实现 textPath。但是，如果可用 IM 将使用 libRSVG 库进行 SVG 转换，这确实是正确的。

# android - Listview 重复值

> ID：13527896
> 
> 赞同：0
> 
> 时间：2012-11-23T11:11:30.687
> 
> 标签：android, listview

我有动态列表视图，其中 textview 和 edittext 是两列。textview 带有正确的数据，但是当我在第一行的edittext 中插入值时，我向下滚动列表，在第三行中，edittext 填充有第一行的edittext 值。我不知道为什么会这样。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:51:29.327

请提供一些代码，以便我们更好地理解问题。据我了解，这是正在发生的事情。适配器生成屏幕上可以容纳的尽可能多的视图。当您向下滚动列表时，需要生成一个新项目。这可以在如下所示的 getView() 方法中以两种方式完成。

```
public View getView(int position, View convertView, ViewGroup parent) {
if(convertView==null){  
      //inflater is the layout inflater for the custom view
      convertView=inflater.inflate(R.layout.list_row, null); 
      return convertView;
}
else{
    return convertView; //recycled view
    }
} 
```

convertView 是刚刚离开屏幕并可供回收的视图。在您的情况下，它应该被销毁但又被重用的 convertView 。所以编辑文本值重新出现在下面的视图中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:13:35.070

我想这是因为您正在为具有具体 ID（手动设置）的项目膨胀布局，而 android 可能认为所有 listview 的项目都是相同的

但是，如果您需要真正的帮助，请在此处粘贴一些代码和布局……我们不是算命先生

# javascript - Javascript：构建 xml 格式

> ID：13527897
> 
> 赞同：0
> 
> 时间：2012-11-23T11:11:31.650
> 
> 标签：javascript

我需要将 xml 构建为 XML：

```
<Root>
 <Item1 absord="aa">
     <XItem n="a" v="b"/>
     <XItem n="a" v="b"/>
     <XItem n="a" v="b"/>
 </Item1>
  <Item1 absord="bb">
     <XItem n="a" v="b"/>
     <XItem n="a" v="b"/>
     <XItem n="a" v="b"/>
  </Item1>
</Root> 
```

我写了一个js函数如下：

```
 function BuildChildXml(s, name,n)
    {
        var xj=OrchGenericObj.GetXMLObj("<R15></R15>");
        var INode1 = xj.createElement("Item1");
            INode1.setAttribute("Absord", n)
        var INode = xmlnewObj.createElement("XItem");
        INode.setAttribute("Name", name);
        INode.setAttribute("Urlpath",s);                    
        xj.documentElement.appendChild(INode);
        INode1.appendChild(xj)
    } 
```

输出：

```
<Root>
 <Item1 absord="aa"/>
     <XItem n="a" v="b"/> 
  <Item1 absord="bb"/>
     <XItem n="a" v="b"/>
</Root> 
```

但我没有得到所需的输出。请更正功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:32:52.740

您只创建一次 XItem 节点，因此您只获得一次。

你的代码应该是这样的

```
var xj=OrchGenericObj.GetXMLObj("<R15></R15>");
    var INode1 = xj.createElement("Item1");
       INode1.setAttribute("Absord", n)

    var INode = xmlnewObj.createElement("XItem");
       INode.setAttribute("Name", name);
       INode.setAttribute("Urlpath",s);                    
     INode1.documentElement.appendChild(INode);

    xj.appendChild(INode1);
} 
```

# android - 在android应用程序中升级数据库时如何在设备中下载和存储图像？

> ID：13527902
> 
> 赞同：0
> 
> 时间：2012-11-23T11:11:44.340
> 
> 标签：android, jquery, html, cordova, jquery-mobile

有没有办法从互联网上下载图像并将其存储在 SD 卡/手机内存中，并在 Android 应用程序中升级数据库时使用它以供将来使用？我正在使用 HTML5/Phonegap/jQuery Mobile。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:32:28.113

您可以使用“延迟加载器”，[在这里](https://github.com/thest1/LazyList)您会找到 fedorvlasov 的延迟图像加载器。它还具有文件缓存和内存缓存，因此您可以存储下载的图像，以便以后在设备未连接到互联网时使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:59:12.247

看看这里

[http://www.helloandroid.com/tutorials/how-download-fileimage-url-your-device](http://www.helloandroid.com/tutorials/how-download-fileimage-url-your-device)

然后您可以通过 SQLite 将路径文件保存在数据库中。寻找 SQLite Android 教程

# c# - log4net 不能基于程序集属性工作

> ID：13527905
> 
> 赞同：0
> 
> 时间：2012-11-23T11:11:50.633
> 
> 标签：c#, log4net

我让 log4net 使用外部配置文件，方法是告诉我的应用程序配置在哪里可以找到配置文件，然后`XmlConfigurator.Configure()` 在应用程序启动时调用。

```
 <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
  ...
  <log4net configSource="Log4Net.config" /> 
```

这行得通，但我现在想观察变化，根据文档我应该可以使用程序集属性来实现这一点，这也意味着我不需要再调用`XmlConfigurator.Configure()`了。因此，我将其添加到主应用程序的 AssemblyInfo.cs（以及它引用的项目）：

```
[assembly: log4net.Config.XmlConfigurator(ConfigFile = "log4net.config", Watch = true)] 
```

麻烦的是，这根本没有任何作用。如果我删除对 的调用`XmlConfigurator.Configure()`，则日志记录不起作用 - 不会启动日志记录。这些属性似乎没有什么区别。所以，我根本看不到文件的工作。

任何人都可以建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:06:51.243

怀疑它。

这是因为第一条记录消息来自另一个程序集。正如[log4net 文档](http://logging.apache.org/log4net/release/manual/configuration.html)所说：

> 必须在应用程序启动期间尽早进行日志调用，当然在加载和调用任何外部程序集之前。

# excel - 为每个选择所有位置 - Excel 宏或 VB 等效项

> ID：13527910
> 
> 赞同：0
> 
> 时间：2012-11-23T11:12:10.573
> 
> 标签：excel, vba

我需要以一种非常具体的方式从 3 个 Excel 电子表格中整理数据，但是我在找到我需要使用的功能或命令方面绝对没有运气，而且由于某种原因，即使谷歌今天也没有帮助我。

对于 Sheet1 的每一行，我想“在 Sheet2 上查找所有行，其中 Sheet1 ColumnA 类似于 Sheet 2 ColumnA 并且 Sheet1 ColumnB 类似于 Sheet2 ColumnB”。我想我可能可以使用 EQUALS 而不是 LIKE 和通配符。

然后，对于第一个查询找到的每个结果，我想在 Sheet1 的当前行下方插入一个新行，并将 Sheet2 ColumnC 中的数据复制到新插入的行 ColumnC 中。我想我还需要计算第一个查询返回的行数，以便我可以告诉它在重复循环之前跳过那么多行，尽管即使它对那些新行执行循环它也应该无论如何都找不到任何结果。

显然有人想为我编写代码，那我会大喜过望！:) 但是，即使有人能够让我知道我需要的每一位使用的最佳功能，我仍然会非常感激，只是研究它们并自己组装一些东西。

提前致谢，

乔

**编辑**

在下面添加了示例，首先是工作表 1，然后是工作表 2，然后是运行宏后工作表 1 的所需结果。同样在上面我说过我将搜索“LIKE”匹配项，但是说我想搜索 CELL CONTAINS 的位置会更准确

![宏之前的表 1](../Images/1fd9ec37265b1f50c52269bc01b50d0e.png)

![表 2 包含信息](../Images/da5bc149eb8e6808d2d92082bf6bac29.png)

![宏之后的第 1 页](../Images/d9ca109cdee5ae6d250369f18d0de718.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T02:48:58.753

好吧，以下是我的解决方案。顺便说一句，如果您可以保证单元格已经排序，则可以优化代码以减少比较时间。

```
//Code is not tested
Sub Collate()

    Dim row1 As Long
    Dim row2 As Long
    Dim match As Boolean

    Dim lastRow1 As Long
    Dim lastRow2 As Long

    Dim valA1 As String
    Dim valB1 As String
    Dim valA2 As String
    Dim valB2 As String
    Dim valC2 As String

    lastRow1 = Sheet1.Cells.SpecialCells(xlCellTypeLastCell).Row
    lastRow2 = Sheet2.Cells.SpecialCells(xlCellTypeLastCell).Row

    row1 = 2
    While row1 <= lastRow1
        valA1 = "*" & Sheet1.Cells.Range("A" & row1).Value & "*"
        valB1 = "*" & Sheet1.Cells.Range("B" & row1).Value & "*"
        For row2 = 2 To lastRow2
            valA2 = Sheet2.Cells.Range("A" & row2).Value
            valB2 = Sheet2.Cells.Range("B" & row2).Value
            valC2 = Sheet2.Cells.Range("C" & row2).Value
            If valA2 Like valA1 And valB2 Like valB1 Then
                match = True
                row1 = row1 + 1
                lastRow1 = lastRow1 + 1
                Sheet1.Cells.Range("A" & row1).EntireRow.Insert
                Sheet1.Cells.Range("C" & row1).Value = valC2
            End If
        Next row2

        row1 = row1 + 1
    Wend

End Sub 
```

# android - Android 位图遮罩

> ID：13527911
> 
> 赞同：0
> 
> 时间：2012-11-23T11:12:29.323
> 
> 标签：android, canvas, bitmap, masking

我有我在其上应用两个蒙版的位图。当我在位图的右侧应用蒙版时，它可以正常工作，但之后当我在同一个位图的底部应用蒙版时，由于重新屏蔽，我在位图上有一个区域再次出现。我试图用下面的图片来解释这个问题。圈出的区域引起了问题。我希望该区域即使在重新屏蔽后也保持透明。

![在此处输入图像描述](../Images/8d2645d4aeb0af6b53052718b3309bea.png)

这是我的屏蔽功能代码被剪断。

```
paint = new Paint(Paint.ANTI_ALIAS_FLAG);
paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DST_IN));
.......

public void setRightMask(MyBitmap bmp, Type type) {
    int maskIndex = -1;
    switch(type){
        case CONCAVE:
            maskIndex = 0;
            break;
        case CONVEX:
            maskIndex = 6;
            break;

    }

    Bitmap result = Bitmap.createBitmap((int)bmp.getWidth(), (int)bmp.getHeight(), Config.ARGB_8888);
    Canvas canvas = new Canvas(result);
    canvas.drawBitmap(bmp.getBmp(), 0, 0, null);
    canvas.drawBitmap(masks[maskIndex].getBmp(), bmp.getWidth() - masks[maskIndex].getBmp().getWidth(), 0, paint);
    bmp.setBmp(result);
}

public void setBottomMask(MyBitmap bmp, Type type) {
    int maskIndex = -1;
    switch(type){
        case CONCAVE:
            maskIndex = 1;
            break;
        case CONVEX:
            maskIndex = 7;
            break;

    }

    Bitmap result = Bitmap.createBitmap((int)bmp.getWidth(), (int)bmp.getHeight(), Config.ARGB_8888);
    Canvas canvas = new Canvas(result);
    canvas.drawBitmap(bmp.getBmp(), 0, 0, null);
    canvas.drawBitmap(masks[maskIndex].getBmp(), 0, bmp.getHeight() - masks[maskIndex].getBmp().getHeight(), paint);
    bmp.setBmp(result);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:27:59.477

一种解决方案是使用黑色透明蒙版而不是黑白。尽管使用黑色透明蒙版，您首先必须绘制蒙版，然后绘制您想要被这些蒙版裁剪的任何内容

```
paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC_IN)); 
```

而不是 Mode.DST_IN。

# linux - 在 nodejs 的部署服务器上初始化 git

> ID：13527914
> 
> 赞同：0
> 
> 时间：2012-11-23T11:12:46.293
> 
> 标签：linux, git, node.js, ubuntu

我想用 nodejs 应用程序创建一个部署服务器。我将在我的 Windows 机器上编写 nodejs 代码并将其推送到该 ubuntu linux 服务器上。你能告诉我应该如何设置 git 来将新代码推送到这个代码中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T12:18:10.750

在服务器上设置 git 的最简单方法是在服务器上创建空的裸 git 存储库：

```
mkdir -p path/to/git/repos/myproject.git
cd path/to/git/repos/myproject.git
git init --bare 
```

现在，回到 Windows 机器并设置[msysgit git 命令行](http://msysgit.github.com/)客户端或[TortoiseGit](http://code.google.com/p/tortoisegit)以通过 ssh 连接到你的 Linux 机器。

您的目标是从服务器成功克隆您的空仓库：

```
git clone ssh://username@server:/path/to/git/repos/myproject.git 
```

完成此操作后，您可以`git add`将内容放到目录`myproject`中，然后`git commit`是它，最后是`git push`.

# file-upload - 在 Yii 框架中更改上传字段旁边的文本

> ID：13527918
> 
> 赞同：0
> 
> 时间：2012-11-23T11:12:54.747
> 
> 标签：file-upload, yii

希望这里有一个快速的问题，无法在谷歌上找到答案。无论如何，我有以下文件上传字段。

```
 <div class="row">
    <?php echo CHtml::form('', 'post', array('enctype' => 'multipart/form-data')); ?>
    <?php echo $form->labelEx($model, 'doc'); ?>
    <?php echo CHtml::activeFileField($model, 'doc'); ?>
    <?php echo $form->error($model, 'doc'); ?>
</div> 
```

我的问题是如何更改默认文本？在有问题的页面上，当页面加载时，上传字段会在按钮旁边显示“未选择文件”。我想更改此文本，有人告诉我怎么做吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:18:28.107

我快速而肮脏的修复是这样的：

```
<?php echo CHtml::activeFileField($model, 'type',array('style'=>'width:100px;', 'onchange' => 'this.style.width = "100%";')); ?> 
```

# python - Scrapy - 悄悄地丢下一个物品

> ID：13527921
> 
> 赞同：27
> 
> 时间：2012-11-23T11:13:06.907
> 
> 标签：python, scrapy

我正在使用 Scrapy 抓取多个网站，这些网站可能共享冗余信息。

对于我抓取的每个页面，我将页面的 url、它的标题和它的 html 代码存储到 mongoDB 中。我想避免数据库中的重复，因此，我实现了一个管道以检查是否已经存储了类似的项目。在这种情况下，我提出了一个`DropItem`例外。

我的问题是，每当我通过异常删除一个项目时`DropItem`，Scrapy 会将项目的全部内容显示到日志（标准输出或文件）中。当我提取每个抓取页面的整个 HTML 代码时，如果出现丢失，整个 HTML 代码将显示在日志中。

我怎样才能在不显示其内容的情况下默默地放下一个项目？

感谢您的时间！

```
class DatabaseStorage(object):
    """ Pipeline in charge of database storage.

    The 'whole' item (with HTML and text) will be stored in mongoDB.
    """

    def __init__(self):
        self.mongo = MongoConnector().collection

    def process_item(self, item, spider):
        """ Method in charge of item valdation and processing. """
        if item['html'] and item['title'] and item['url']:
            # insert item in mongo if not already present
            if self.mongo.find_one({'title': item['title']}):
                raise DropItem('Item already in db')
            else:
                self.mongo.insert(dict(item))
                log.msg("Item %s scraped" % item['title'],
                    level=log.INFO, spider=spider)
        else:
            raise DropItem('Missing information on item %s' % (
                'scraped from ' + item.get('url')
                or item.get('title')))
        return item 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-03-11T18:14:16.107

执行此操作的正确方法似乎是为您的项目实现自定义 LogFormatter，并更改已删除项目的日志记录级别。

例子：

```
from scrapy import log
from scrapy import logformatter

class PoliteLogFormatter(logformatter.LogFormatter):
    def dropped(self, item, exception, response, spider):
        return {
            'level': log.DEBUG,
            'format': logformatter.DROPPEDFMT,
            'exception': exception,
            'item': item,
        } 
```

然后在您的设置文件中，例如：

```
LOG_FORMATTER = 'apps.crawler.spiders.PoliteLogFormatter' 
```

我运气不好，只是返回“无”，这导致未来管道出现异常。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-12-16T19:56:44.277

在最近的 Scrapy 版本中，这已经有所改变。我从@jimmytheleaf 复制了代码并将其修复为与最近的 Scrapy 一起使用：

```
import logging
from scrapy import logformatter

class PoliteLogFormatter(logformatter.LogFormatter):
    def dropped(self, item, exception, response, spider):
        return {
            'level': logging.INFO,
            'msg': logformatter.DROPPEDMSG,
            'args': {
                'exception': exception,
                'item': item,
            }
        } 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-11-23T11:13:06.907

好的，我什至在发布问题之前就找到了答案。我仍然认为答案可能对任何有同样问题的人都很有价值。

`DropItem`您只需返回一个 None 值，而不是丢弃带有异常的对象：

```
def process_item(self, item, spider):
    """ Method in charge of item valdation and processing. """
    if item['html'] and item['title'] and item['url']:
        # insert item in mongo if not already present
        if self.mongo.find_one({'url': item['url']}):
            return
        else:
            self.mongo.insert(dict(item))
            log.msg("Item %s scraped" % item['title'],
                level=log.INFO, spider=spider)
    else:
        raise DropItem('Missing information on item %s' % (
           'scraped from ' + item.get('url')
            or item.get('title')))
    return item 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-03-10T16:34:49.973

正如 Levon 在其先前的评论中所指出的那样，也可以重载您正在处理的 Item 的 __repr__ 函数。

这样，消息将显示在 Scrapy 日志中，但您无法控制在日志中显示的代码长度，例如网页的前 150 个字符。假设您有一个像这样表示 HTML 页面的 Item，__repr__ 的重载可能如下所示：

```
class MyHTMLItem(Scrapy.Item):
    url = scrapy.Field()
    htmlcode = scrapy.Field()
    [...]
    def __repr__(self):
        s = ""
        s += "URL: %s\n" % self.get('URL')
        s += "Code (chunk): %s\n" % ((self.get('htmlcode'))[0:100])
        return s 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-11-21T20:52:49.137

这个问题的另一个解决方案是在子类中调整`repr`方法`scrapy.Item`

```
class SomeItem(scrapy.Item):
    scrape_date = scrapy.Field()
    spider_name = scrapy.Field()
    ...

    def __repr__(self):
        return "" 
```

这样该项目就不会出现在日志中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-27T18:53:37.027

对我来说，有必要使用 ItemAdapter 将 Item 参数转换为列表。所以我能够查询数据库。

```
from itemadapter import ItemAdapter, adapter
import pymongo
from scrapy.exceptions import DropItem

collection_name = 'myCollection'

    def __init__(self, mongo_uri, mongo_db):
        self.mongo_uri = mongo_uri
        self.mongo_db = mongo_db
    @classmethod
    def from_crawler(cls, crawler):
        return cls(
            mongo_uri=crawler.settings.get('MONGO_URI'),
            mongo_db=crawler.settings.get('MONGO_DATABASE', 'items')
        )

def open_spider(self, spider):
    self.client = pymongo.MongoClient(self.mongo_uri)
    self.db = self.client[self.mongo_db]

def close_spider(self, spider):
    self.client.close()

def process_item(self, item, spider):
    adapter = ItemAdapter(item)
    if self.db[self.collection_name].find_one({'id':adapter['id']}) != None:
        dado = self.db[self.collection_name].find_one_and_update({'id':adapter['id']})
        ## ----> raise DropItem(f"Duplicate item found: {item!r}") <------
        print(f"Duplicate item found: {dado!r}")
    else:
        self.db[self.collection_name].insert_one(ItemAdapter(item).asdict())
    return item 
```

# c# - 在 ASP.NET DropDownList 中排序数据

> ID：13527922
> 
> 赞同：0
> 
> 时间：2012-11-23T11:13:07.257
> 
> 标签：c#, asp.net, combobox

我在数据库表中有这样的数据：

```
vehicle1 driver1 
vehicle1 driver2
vehicle2 driver3
vehicle3 driver4
vehicle3 driver5
vehicle4 driver6
vehicle4 driver7
vehicle4 driver8 
```

我需要在 asp.net 下拉列表中显示按车辆订购的司机。但我需要首先向车辆 X 的驾驶员展示 X 是动态设置的（以编程方式）。

因此，如果 X 是车辆 3，我的下拉列表中的数据将如下所示：

```
**vehicle3 driver4**
**vehicle3 driver5**
vehicle1 driver1 
vehicle1 driver2
vehicle2 driver3
vehicle4 driver6
vehicle4 driver7
vehicle4 driver8 
```

任何建议如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T11:23:20.953

如果您的数据在`SQL Server`数据库中，则根据需要选择数据。

```
SELECT A.Vehicle, A.Driver 
FROM (SELECT Vehicle, Driver, CASE @X WHEN Replace(Vehicle,'Vehicle','')
                              THEN 0 ELSE 1 END AS OrderCol 
      FROM yourTable ) A
ORDER BY A.OrderCol,A.Vehicle 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:28:38.047

通过使用从数据库中订购您的结果
`ORDER BY Vehicle, Driver`

然后以编程方式在索引 0 处插入您的动态项，以便它们出现在数据绑定项之前。

# subsonic - subsonic 2.2 不会将可空列更新为空值

> ID：13527926
> 
> 赞同：2
> 
> 时间：2012-11-23T11:13:14.993
> 
> 标签：subsonic

在 ODSController 上使用 Update 方法（即在 ASP.NET 应用程序中使用 GridView / FormView）并将空值传递给可空列时，可空列值保持不变。

这是由于 update 方法实例化 ActiveRecord 进行更新的方式：

```
public void Update(Guid MyKey, ...)
{
    MyItem item =  new MyItem();
    item.MarkOld();
    item.IsLoaded = true;
    ...
    item.Save(UserName);
} 
```

通过创建一个空的 MyItem 实例（所有字段均为空）并将可为空的字段设置为空，不允许列在 DirtyColumns 集合中完成（请参阅 ActiveHelper GetUpdateCommand）。

我是否要为我的数据库中的每个表编写自定义更新函数来解决这个问题？

# c++ - C++ 套接字只接收第一次发送？

> ID：13527927
> 
> 赞同：1
> 
> 时间：2012-11-23T11:13:20.517
> 
> 标签：c++, sockets

我已经看了几个小时了。我已经尝试了我能想到的一切，坦率地说这没有意义。我积极地使用套接字发送和接收没有问题，但是一旦我将数据更改为不同的消息，相同的样式，它就会停止接收。我正在使用 TCP。我有一个管理器进程发送最多 N 个带有表数据的路由器消息。我后来发送了一个相同样式的数据包，它接收它，然后停止接收....代码回到循环的顶部，但没有得到更多数据。

哦，我正在使用的网络代码是 beejs TCP 服务器客户端代码的复制和粘贴。[http://beej.us/guide/bgnet/output/html/multipage/clientserver.html](http://beej.us/guide/bgnet/output/html/multipage/clientserver.html)

经理线程，这部分工作

```
for(vector< vector<int> >::iterator it = table.begin(); it!=table.end(); ++it ){
            vector< int > d = *it;

            for(vector<int>::iterator itA = d.begin(); itA!=d.end(); ++itA ){
                cout << "Sending... "<< *itA << endl;
                s <<*itA<<" ";
            }
            if (send(new_fd, s.str().c_str(), 13, 0) == -1)
                perror("Serv:send");
            sleep(2);
            logs << "Sent to router " << i <<":\n" << s.str();
            writeLog(logs.str().c_str());
            s.str("");
            logs.str("");

        }
        s<<"done";
        if (send(new_fd, s.str().c_str(), 13, 0) == -1)
            perror("Serv:send");
        writeLog(s.str().c_str()); 
```

管理 2，只有第一条消息通过

```
 for(vector <vector <int > >::iterator it = toSendPackets.begin(); it != toSendPackets.end(); ++it){
    sleep(3);
    vector<int> tsp = *it;
    int a,b,c = 0;
    for(vector<int>::iterator itr = tsp.begin(); itr != tsp.end(); ++itr){
        if(c==0){
            a = *itr;
        }
        if(c==1){
            b = *itr;
        }

        c++;
    }
    ss.str("");
    ss << a << " " << b;
    for(int i = 0; i < numN; i++){
        int curSoc = socketList[i];
        stringstream sl;

        sl<<"sent:"<< ss.str().c_str();
        cout << "sending..  " << ss.str() << " to " << i << endl;
        if (send(curSoc, "HOP", strlen("HOP")+1, 0) == -1)
            perror("Serv:send");
        sleep(2);
        if (send(curSoc, ss.str().c_str(), strlen(ss.str().c_str())+1, 0) == -1)
            perror("Serv:send");
        writeLog(sl.str().c_str());
        sleep(1);

    }
} 
```

路由器代码。

上面的管理器代码和管理器代码 2 都发送到这部分代码。它得到第一次发送，在这种情况下是“HOP”然后什么都没有？我删除了 HOP 数据包解析，所以它应该只声明某些内容已被读取。

```
if(tid == 0){// TCP
    stringstream s;
    bool proc = true;
    while(!doneFlag){
        proc = true;
        cout << "TCP RECEIVING... " << endl;
        int numbytes = 0;
        while(numbytes==0){
            if ((numbytes = recv(sockfd, buf, MAXDATASIZE, 0)) == -1) {
                perror("recvROUTERThread0");
                exit(1);
            }
        }
        buf[numbytes] = '\0';
        numbytes = 0;
        if(strcmp("Quit",buf)==0){
            writeLog("Quit read",outName);
            doneFlag = true;
            close(net.sockfd);
            floodUDP("Quit");
            pthread_exit(NULL);

        }
        else if(strcmp("HOP",buf)==0){
            cout << "HOP READ" << endl;
            numbytes = 0;
            while(numbytes==0){
                if ((numbytes = recv(sockfd, buf, MAXDATASIZE, 0)) == -1) {
                    perror("recvROUTERThread0");
                    exit(1);
                }
            }
            s << id << "R: Receiving a routing command! " << buf;
            cout << s.str().c_str() << endl;
            writeLog(s.str().c_str(),outName);
            HOPpacket hpo = genHopOrig(s.str().c_str());
            if(hpo.s == atoi(id)){
                printHOP(hpo);
                //              cout << "PACKET " << pr << endl;
                stringstream sl;
                char* hop = generateHopPacket(hpo);
                sl << "Generating HOP packet and sending.. " << hop;
                writeLog(sl.str().c_str(),outName);
                sendHOP(hop);
            }
        }
        else{
            cout << "Table row data from manager" << endl;
            s.str("");
            s << id << "R: MANAGER MESSAGE: " << buf << endl;
            cout << s.str() << endl;
            writeLog(s.str().c_str(),outName);
            int intID = atoi(id);
            vector <int> tr = processTR(buf,intID,basePN);
            table.push_back(tr);
        }

    }
   } 
```

我的输出。在这种情况下，有 10 个路由器正在运行。请注意，我没有更改我的打印件以说明它正在发送 HOP 然后 0 5 ..

```
sending..  0 5 to 0

HOP READ
WRITTING Manager log:12-11-23::4:6:26:
sent:0 5

sending..  0 5 to 1
HOP READ
WRITTING Manager log:12-11-23::4:6:29:
sent:0 5

sending..  0 5 to 2
HOP READ
WRITTING Manager log:12-11-23::4:6:32:
sent:0 5

sending..  0 5 to 3
HOP READ
WRITTING Manager log:12-11-23::4:6:35:
sent:0 5

sending..  0 5 to 4
HOP READ
WRITTING Manager log:12-11-23::4:6:38:
sent:0 5

sending..  0 5 to 5
HOP READ
WRITTING Manager log:12-11-23::4:6:41:
sent:0 5

sending..  0 5 to 6
HOP READ
WRITTING Manager log:12-11-23::4:6:44:
sent:0 5

sending..  0 5 to 7
HOP READ
WRITTING Manager log:12-11-23::4:6:47:
sent:0 5

sending..  0 5 to 8
HOP READ
WRITTING Manager log:12-11-23::4:6:50:
sent:0 5

sending..  0 5 to 9
HOP READ
WRITTING Manager log:12-11-23::4:6:53:
sent:0 5

sending..  3 9 to 0
WRITTING Manager log:12-11-23::4:6:59:
sent:3 9

sending..  3 9 to 1
WRITTING Manager log:12-11-23::4:7:2:
sent:3 9

sending..  3 9 to 2
WRITTING Manager log:12-11-23::4:7:5:
sent:3 9

sending..  3 9 to 3
WRITTING Manager log:12-11-23::4:7:8:
sent:3 9

sending..  3 9 to 4
WRITTING Manager log:12-11-23::4:7:11:
sent:3 9

sending..  3 9 to 5
WRITTING Manager log:12-11-23::4:7:14:
sent:3 9

sending..  3 9 to 6
WRITTING Manager log:12-11-23::4:7:17:
sent:3 9

sending..  3 9 to 7
WRITTING Manager log:12-11-23::4:7:20:
sent:3 9

sending..  3 9 to 8
WRITTING Manager log:12-11-23::4:7:23:
sent:3 9

sending..  3 9 to 9
WRITTING Manager log:12-11-23::4:7:26:
sent:3 9 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T11:44:11.733

数据时有一个问题`recv`，TCP是基于流的套接字而不是基于消息的套接字，因此如果您使用：

```
send( sock, buf1, len1, 0 );  // Send HOP, since it is small, you OS merge this
send( sock, buf2, len2, 0 );  // with next send! 
```

然后尝试使用`recv`它接收数据不能保证您在 2 个单独的调用中接收数据`recv`，因此您可能会在一次调用中接收两个发送的缓冲区`recv`：

```
recv( sock, buf, len, 0 );  // This may receive both buffers in one call 
```

因此，您的下一次呼叫`recv`将被第一次呼叫中已收到的数据阻止！此外，当您发送大缓冲区时，它们可能是另一个问题，然后`recv`接收的数据可能少于使用`send`.

您必须定义一个协议，在接收到的流中定义消息的结尾，然后根据该协议接收您的数据。例如，您可以先发送消息的长度或定义一些指示它结束的东西（例如`\0`或`\r\n`）。

抱歉，我对错误的描述不完整。在您的评论中，您说您增加了`HOP`消息大小！但这肯定不是一个好习惯，而且增加的大小是如此之小，以至于永远不会强制操作系统立即发送它（实际上没有确定的大小可以强制操作系统这样做）。如果您希望操作系统立即发送您的数据，您应该使用`TCP_NO_DELAY`选项禁用 Nagle 算法，但在此之前请查看[如何使用 TCP_NODELAY？](http://www.unixguide.net/network/socketfaq/2.16.shtml). **这样做也不是一个好习惯，除此之外，这样做会导致您的数据包在您调用时立即发送，`send`但它不会强制接收方的操作系统单独接收消息！**那么这样做的正确方法是什么？

我详细解释了这个问题：

```
// I don't know exact value of MAXDATASIZE but I will assume it is 128
char buf[ MAXDATASIZE ];

int numbytes = recv( sock, buf, MAXDATASIZE, 0 );
if( numbyte == -1 ) {
    // Handle error
}

// I assume HOP_MSG is a defined constant that contain value of HOP message
if( strcmp(buf, HOP_MSG) == 0 ) { // <-- (1)
    while( (numbytes = recv(sock, buf, MAXDATASIZE, 0)) != -1 ) { // <-- (2)
        if( numbytes == 0 ) break;
    }
    if( numbytes == -1 ) {
        // Handle error
    }
} 
```

可是等等！在标有的行中，`(1)` **我假设`recv`read `HOP_MSG`fully and only `HOP_MSG`，但是为什么呢？**正如我之前所说的，`TCP`它是一个流协议，它没有消息边界，所以它可能只读取 2 个字节！或者它读到`1KB`（那肯定不止`HOP_MSG`，那我该怎么办？？

有效的答案如下：

```
int receive_till_zero( SOCKET sock, char* tmpbuf, int& numbytes ) {
    int i = 0;
    do {
        // Check if we have a complete message
        for( ; i < numbytes; i++ ) {
            if( buf[i] == '\0' ) {
                // \0 indicate end of message! so we are done
                return i + 1; // return length of message
            }
        }
        int n = recv( sock, buf + numbytes, MAXDATASIZE - numbytes, 0 );
        if( n == -1 ) {
            return -1; // operation failed!
        }
        numbytes += n;
    } while( true );
}
void remove_message_from_buffer( char* buf, int& numbytes, int msglen ) {
    // remove complete message from the buffer.
    memmove( buf, buf + msglen, numbytes - msglen );
    numbytes -= msglen;
}

void main() {
    SOCKET s;
    char buf[ MAXDATASIZE ];
    int numbytes = 0, msglen;
    // Initialize socket and connect to server, you already do that

    while( true ) {
        msglen = receive_till_zero( s, buf, numbytes );
        if( msglen == -1 ) {/* Handle error */}

        if( !strcmp(buf, HOP_MSG) ) {
            remove_message_from_buffer( buf, numbytes, msglen );
            msglen = receive_till_zero( s, buf, numbytes );
            if( msglen == -1 ) {/* Handle error */}

            std::cout << "Message received from server: " << buf << std::endl;
            remove_message_from_buffer( buf, numbytes, msglen );
        }
    }
} 
```

通过调试这段代码，你肯定会理解它的目的，`receive_till_zero`假设缓冲区中已经有一些来自上次调用的待处理数据`recv`，所以它会首先检查缓冲区中是否有完整的消息，并且它永远不会假设接收数据已完成只需一次调用，`recv`它就会循环调用，直到在缓冲区中`recv`看到 a 。`\0`在我们处理完缓冲区中的数据后，我们调用`remove_message_from_buffer`来吃那个数据并且只吃那个数据，而不是仅仅从缓冲区的开头开始接收，因为它们可能已经在缓冲区中有一些数据。

**如您所见，代码有点复杂，为了获得更好的编程模型和更好的 C++ 代码，您可以使用[boost::asio](http://www.boost.org/libs/asio/)，它具有非常好的设计并且与 C++ 和`iostream`**

# vb.net - vb.net 缩放 vector3D 对象

> ID：13527928
> 
> 赞同：0
> 
> 时间：2012-11-23T11:13:22.313
> 
> 标签：vb.net, vector, scaling

我有一个 vector3D 对象，想用值 -1.0 对其进行缩放。在java中我会做

```
 private vector3f vector = new Vector3f(someX,someY,someZ);
 vector.scale(-1.0f); 
```

任何人都知道如何在 vb.net 中做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:23:31.680

私有 Vector3f 向量 = 新 Vector3f(-50.0f, -80.0f, -120.0f);

# java - 在 Java 中强制转换 smallint 无符号

> ID：13527929
> 
> 赞同：5
> 
> 时间：2012-11-23T11:13:22.233
> 
> 标签：java, mysql, casting, jooq

我正在使用 jOOQ 来获取 MySQL 中的 id`smallint unsigned primary key auto_increment`

```
public List<Integer> getID() {
   Factory sql = new Factory(Database.getInstance().connect(), SQLDialect.MYSQL);
   return (List<Integer>) sql.select().from("users").fetch().getValues("id_users");
} 
```

然后出错

```
org.jooq.tools.unsigned.UShort cannot be cast to java.lang.Integer 
```

[在这里](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.ase_15.0.java/html/java/java197.htm)，他们写道，应该将 smallint unsigned 强制转换为 int。

**编辑** 方法应该是

```
public List<UShort> getID() {
    Factory sql = new Factory(Database.getInstance().connect(), SQLDialect.MYSQL);
    return (List<UShort>) sql.select().from("users").fetch().getValues("id_users");
} 
```

并且在循环结果应该被强制转换为 int。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T11:19:09.157

您不能将 UShort 转换为 Integer，因为它不继承该类。我想你应该用它[`UShort.intValue()`](http://www.jooq.org/javadoc/latest/org/jooq/tools/unsigned/UShort.html#intValue%28%29)来检索整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T11:17:30.680

java lang 不能直接转换它。你需要一个中间步骤。类似 UShortval.intValue()
迭代查询的结果，并建立一个新的列表，在其中添加 ushortval.intValue() 的结果

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T11:27:55.627

如果`users`是系统表，则无法更改类型，则必须将其转换为`Integer`. 否则，您可以更改表并提供Java`TINYINT(4)`类型。`Short`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T14:09:25.473

jOOQ 可以为您进行类型转换和/或转换。这里有几个例子：

```
Result<?> result = sql.select().from("users").fetch();

// Without any type information
List<?> list1 = result.getValues("id_users");

// Using your implicit knowledge about id_users being an unsigned short:
@SuppressWarnings("unchecked")
List<UShort> list2 = (List<UShort>) result.getValues("id_users");

// Using jOOQ's code-generator for type-safe field access:
List<UShort> list3 = result.getValues(USERS.ID_USERS);

// Using jOOQ's conversion features to convert UShort into whatever you prefer
List<Integer> list4a = result.getValues("id_users", Integer.class);
List<Integer> list4b = result.getValues(USERS.ID_USERS, Integer.class); 
```

最后一个例子是你可能正在寻找的。

在此处查看相关的 Javadocs：

*   [`org.jooq.Result.getValues(Field, Class)`](http://www.jooq.org/javadoc/latest/org/jooq/Result.html#getValues%28org.jooq.Field,%20java.lang.Class%29)
*   [`org.jooq.tools.Convert.convert(Object, Class)`](http://www.jooq.org/javadoc/latest/org/jooq/tools/Convert.html#convert%28java.lang.Object,%20java.lang.Class%29)

请注意，指向 Sybase ASE 手册的链接是指 SQL 转换操作，而不是 Java 转换表达式。这可能是误导你的原因......

# html - 根据文档模式显示内容

> ID：13527932
> 
> 赞同：0
> 
> 时间：2012-11-23T11:13:39.990
> 
> 标签：html, internet-explorer-9

有没有办法在网页上显示设置了哪种浏览器模式和哪种文档模式？

这通常是可能的吗？是否可以根据打开的模式显示/隐藏某些内容？

我想使用一个函数来允许通过拖放上传（参见[http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)），但我注意到这仅在 IE 处于特定文档模式时才有效。如果未打开此模式，我想禁用通过拖放上传的选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:17:55.797

```
var j = jQuery.noConflict();
j(document).ready(function(){
    /* detect usage of IE Developer Tools using different Mode for Browser and Document */
    if(j.browser.msie) {
        var browserVersion = j.browser.version.slice(0,j.browser.version.indexOf("."));
        var documentVersion = document.documentMode;
        if(browserVersion != documentVersion) {
            alert("ERROR:\nBrowser Mode and Document Mode do not match!\n\nBrowser Mode: IE"+ browserVersion +".0\nDocument Mode: IE"+ documentVersion +".0");
        }
    }
}); 
```

礼貌： http: [//my.opera.com/Schalandra/blog/2012/02/29/how-to-detect-different-browser-mode-and-document-mode-in-ie](http://my.opera.com/Schalandra/blog/2012/02/29/how-to-detect-different-browser-mode-and-document-mode-in-ie)

也许你会发现这个答案也很有帮助。

[https://stackoverflow.com/a/623071/903454](https://stackoverflow.com/a/623071/903454)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T11:21:55.927

您可以检测文档模式：

```
var mode = document.documentMode; 
```

如果模式是 Internet Exlporer 5，则返回 5，如果是 IE6，则返回 6，依此类推。

但是，您可以强制使用特定的文档模式：

```
<meta http-equiv="X-UA-Compatible" content="IE=[IEVersion]"> 
```

其中 [IEVersion] 是以下之一：

*   **Edge**始终是最新版本
*   **EmulateIE9**如果设置了doctype，则模式为IE9，否则为IE5
*   **EmulateIE8**请参阅*EmulateIE9*
*   **EmulateIE7**请参阅*EmulateIE9*
*   **9**总是 IE9
*   **8**总是 IE8
*   **7**总是 IE7
*   **5**总是 IE5

PS：你的插件应该会自动识别模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T11:24:32.277

您可以在 IE 中使用 document.documentMode 来查找 html 文档

*   5 页面以IE5模式显示
*   7 页面以IE7模式显示
*   8 页面以IE8模式显示
*   9 页面以IE9模式显示

# linux - 为什么 NSS 模块在 Linux 上必须以 .so.2 结尾？

> ID：13527936
> 
> 赞同：3
> 
> 时间：2012-11-23T11:14:03.483
> 
> 标签：linux, strace, nss

我已经为 Red Hat Linux 构建了一个名称服务切换模块。

使用 strace，我确定操作系统在各种目录中查找库，但仅查找具有扩展名的文件`.so.2` （例如`libnss_xxx.so.2`，`xxx`服务名称在哪里）

为什么它不寻找`.so`或`.so.1`图书馆？是否有任何保证它不会停止寻找图书馆并在未来`.so.2`开始寻找图书馆？`.so.3`

**编辑**：[http](http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html) ://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html说这`2`是“每当界面更改时都会增加的版本号”。所以我猜：

*   NSS 的版本需要库的版本 2。
*   具有更新 NSS 的操作系统更新可能需要不同的版本号。

有人可以确认这是否属实吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T14:54:25.933

您的假设通常是正确的，只需稍作修改：

*   NSS 版本需要**具有接口版本 2 的库版本**。
*   具有更新 NSS 的操作系统更新可能需要不同的版本号。

接口的版本不一定需要随着库的版本而改变，即更新版本的库可能仍然提供相同的接口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T13:55:36.150

so 文件有两种类型：共享库（在编译时加载和扫描符号，在程序启动时再次加载和链接）和模块（在运行时加载和链接）。共享库的想法是您的程序需要某个版本的库。此版本在编译时确定。程序编译后，即使安装了新的（不兼容的）库版本，它也应该继续工作。这意味着新版本必须是不同的文件，因此旧程序仍然可以使用旧库，而较新（或最近编译的）程序使用较新版本。

为了正确使用这个系统，你的程序必须以某种方式确保它需要的库版本将继续安装。这是分销包装系统的任务之一。包含您的程序的包必须依赖于所需版本的库包。

但是，您似乎在谈论模块。那里的情况有所不同。它们不带有这样的版本，因为 ld.so （负责加载共享库）不是加载它们的那个。您的程序应该与这些模块捆绑在一起，因此模块版本始终与使用它们的程序兼容。这适用于大多数程序。

但如果您的程序允许第三方模块，它就不起作用。因此，他们可以提出自己的版本控制系统。这似乎是 nss 所做的（不过我不熟悉它）。这意味着他们已经定义了一个协议版本（目前为 2），它指定了一个模块应该是什么样子：需要定义哪些符号，函数期望什么参数，这些东西。如果您创建一个遵循协议版本 2 的模块，您应该将您的模块命名为 .so.2（因为这是他们检查您支持的版本的方式）。如果他们创建了新的不兼容协议 3，他们将开始寻找 .so.3。您的模块将不再被找到，这是一件好事，因为它也不支持新协议。

# android - 在相机预览上覆盖静态可绘制图像

> ID：13527943
> 
> 赞同：0
> 
> 时间：2012-11-23T11:14:32.247
> 
> 标签：android, android-widget, android-camera, surfaceview

当我的手机处于相机预览模式时，我需要显示一个静态的 .png 图像。至于现在我引用这个链接 [a link] [Overlay images to Camera preview SurfaceView](https://stackoverflow.com/questions/3548666/overlay-images-onto-camera-preview-surfaceview)。这个链接显示相机预览屏幕[链接] [http://android-er.blogspot.com.au/2010/12/add-overlay-on-camera-preview.html](http://android-er.blogspot.com.au/2010/12/add-overlay-on-camera-preview.html)。请建议继续进行。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:17:34.403

把相机的预览SurfaceView和一个ImageView放到一个FrameLayout或者一个RelativeLayout中。SurfaceView 必须在布局中排在第一位，ImageView 排在第二位，所以它绘制在 SurfaceView 之上。

# mysql - mysql复杂where查询

> ID：13527946
> 
> 赞同：-1
> 
> 时间：2012-11-23T11:14:38.860
> 
> 标签：mysql

在过去的几天里，我正在尝试解决这个问题，任何帮助将不胜感激。

我有一个退货项目，它在 taxonomy1 中有 term1，在 taksonomy2 中有 term2。

这是我的查询：

```
SELECT items.*
FROM (`items`)
LEFT JOIN `rel_taxonomy` ON `rel_taxonomy`.`item_id` = `items`.`id`
LEFT JOIN `terms_taxonomy` ON `terms_taxonomy`.`terms_taxonomy_id` = `rel_taxonomy`.`terms_taxonomy_id`
LEFT JOIN `terms` ON `term`.`id` = `terms_taxonomy`.`term_id`
WHERE (items.org =  '2')  AND  ( ((terms_taxonomy.taxonomy =  '1') AND (term.pojam  LIKE '%term1%')) AND ((terms_taxonomy.taxonomy =  '2') AND (term.pojam  LIKE '%term2%')))  
GROUP BY `items`.`id` 
```

如果我替换该行：

```
WHERE (items.org =  '2')  AND  ( ((terms_taxonomy.taxonomy =  '1') AND (term.pojam  LIKE '%term1%')) AND ((terms_taxonomy.taxonomy =  '2') AND (term.pojam  LIKE '%term2%'))) 
```

使用以下内容（将 AND 替换为 OR）：

```
WHERE (items.org =  '2')  AND  ( ((terms_taxonomy.taxonomy =  '1') AND (term.pojam  LIKE '%term1%')) OR((terms_taxonomy.taxonomy =  '2') AND (term.pojam  LIKE '%term2%'))) 
```

一切正常。但我仍然需要AND。

表方案

```
items
id | title | org

rel_taxonomy
item_id | terms_taxonomy_id

terms_taxonomy
terms_taxonomy_id | terms_id | taxsonomy 

terms
id | term 
```

所以我试图获得在taxonomy1中有term1和在taksonomy2中有term2的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:17:53.190

使用`OR`和添加`HAVING`子句

```
 SELECT i.id
 FROM items i
 LEFT JOIN rel_taxonomy rt ON rt.item_id = i.id
 LEFT JOIN terms_taxonomy tt ON tt.terms_taxonomy_id = rt.terms_taxonomy_id
 LEFT JOIN terms t ON t.id = tt.term_id
 WHERE i.org =  '2'
 AND 
 ( 
        (tt.taxonomy =  '1' AND t.pojam  LIKE '%term1%') 
     OR (tt.taxonomy =  '2' AND t.pojam  LIKE '%term2%')
 )  
 GROUP BY i.id
 having count(distinct tt.taxonomy) = 2 
```

# photoshop - 如何在 Ubuntu 操作系统中安装 Photoshop？

> ID：13527948
> 
> 赞同：1
> 
> 时间：2012-11-23T11:14:45.383
> 
> 标签：photoshop, ubuntu-12.04, software-design

您好任何人您知道如何在 Ubuntu 操作系统中安装 Photoshop？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T11:22:05.103

您可以使用 Wine 和 PlayOnlineLinux 在 Ubantu 中安装 Photoshop CS4。

所以请参考[链接](http://www.webupd8.org/2011/01/how-to-install-photoshop-cs4-in-ubuntu.html)给出的分步指南。

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T11:16:35.460

在 ubuntu 中尝试 Gimp，而不是 Ubuntu Software Center -> Gimp，如果您仍然想要 photoshop，请尝试安装 Wine（用于在 ubuntu/linux 中运行 Windows 应用程序）并使用 wine 安装 photoshop

您也可以尝试[在线 Photoshop](http://www.photoshop.com/tools)

# sql - SQL; 将 2 个字段相加，然后将它们加在一起

> ID：13527950
> 
> 赞同：5
> 
> 时间：2012-11-23T11:15:06.150
> 
> 标签：sql, database, oracle, sum

刚开始实习，并负责一些 SQL。发现它有些棘手。感谢任何帮助。谢谢！

**任务：**

“是否可以为以下内容编写警报。显示所有客户，当下个月到期的未结销售订单与未结销售发票合并（添加）时，他们超出了他们的信用额度。”

**我提出的逻辑：**

1.  首先，我想做的是在下个月内为每个客户（在 SALES 表中）汇总所有销售订单。

2.  接下来，对每个客户的所有未结发票求和，即计算出每个客户欠的总金额（在 INVOICES 表中）。

3.  然后我想通过相应的 customer_id 将 1 和 2 的结果相加

4.  接下来比较上面3的计算，看它是否大于每个客户的信用额度。

如果 3 中的总和超过信用额度，则生成的表格中应仅显示这些公司。结果表的理想格式是

```
Cust_ID|Name|Sum_sales_orders (1.above)|Sum_open_invoices (2.above)| Total_orders&invoices
----------------------------------------------------------------------------
   1   |  A |  25000                   |  333                      | 25333 
       |    |                          |                           | 
```

我到目前为止的代码是

```
 SELECT arc.company, arc.credit_limit, 
     sum (ard.unit_price * ard.invoice_qty) as open_invoice_total, 
     sum (od.total_qty_ord * od.unit_price) as open_orders_total
 FROM iqms.arprepost_detail ard, iqms.arprepost arp, iqms.arcusto arc, iqms.ord_detail od, iqms.orders o
 WHERE ard.arprepost_id = arp.id 
     and arc.id = o.arcusto_id and o.id = od.orders_id
     and arp.arcusto_id = arc.id
  GROUP BY arc.company, arc.credit_limit 
```

我认为这是在 sum () 函数中计算正确的总数？还是我错了？如何添加 open_invoice_total 和 open_orders_total？然后将它们与 credit_limit 进行比较？

我希望你们明白我想要做什么。我在这里先向您的帮助表示感谢！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T11:23:47.100

您可以使用[HAVING](http://msdn.microsoft.com/en-us/library/ms180199.aspx)子句来检查总和是否超过信用额度，如下所示。为了便于阅读，我还用 INNER JOINS 替换了 WHERE 子句中的连接。

```
 SELECT arc.company, arc.credit_limit, 
       sum(ard.unit_price * ard.invoice_qty) as open_invoice_total, 
       sum(od.total_qty_ord * od.unit_price) as open_orders_total
 FROM iqms.arprepost_detail ard 
        INNER JOIN iqms.arprepost arp ON ard.arprepost_id = arp.id
        INNER JOIN iqms.arcusto arc ON arp.arcusto_id = arc.id
        INNER JOIN iqms.ord_detail od ON o.id = od.orders_id
        INNER JOIN iqms.orders o ON arc.id = o.arcusto_id 
  GROUP BY arc.company, arc.credit_limit
  HAVING sum(ard.unit_price * ard.invoice_qty) + sum(od.total_qty_ord * od.unit_price) > arc.credit_limit; 
```

**编辑**

只是为了澄清 Dems 评论，`GROUP BY`不允许指定[aliases](https://stackoverflow.com/questions/268429/group-by-alias-oracle)，因此上述查询“重复” 和 中的`SELECT`总和`HAVING`。这可以通过嵌套来消除，但请注意`HAVING`是用 . 切换的`WHERE`。所以查询的 DRYer 版本是：

```
SELECT company, credit_limit, open_invoice_total, open_orders_total
FROM
(
     SELECT arc.company, arc.credit_limit, 
           sum(ard.unit_price * ard.invoice_qty) as open_invoice_total, 
           sum(od.total_qty_ord * od.unit_price) as open_orders_total
     FROM iqms.arprepost_detail ard 
            INNER JOIN iqms.arprepost arp ON ard.arprepost_id = arp.id
            INNER JOIN iqms.arcusto arc ON arp.arcusto_id = arc.id
            INNER JOIN iqms.ord_detail od ON o.id = od.orders_id
            INNER JOIN iqms.orders o ON arc.id = o.arcusto_id 
      GROUP BY arc.company, arc.credit_limit
) AS nested
WHERE (open_invoice_total + open_orders_total) > arc.credit_limit; 
```

而且，如果您愿意，CTE 可能会使它更具可读性：

```
;WITH nested AS
(
     SELECT arc.company, arc.credit_limit, 
           sum(ard.unit_price * ard.invoice_qty) as open_invoice_total, 
           sum(od.total_qty_ord * od.unit_price) as open_orders_total
     FROM iqms.arprepost_detail ard 
            INNER JOIN iqms.arprepost arp ON ard.arprepost_id = arp.id
            INNER JOIN iqms.arcusto arc ON arp.arcusto_id = arc.id
            INNER JOIN iqms.ord_detail od ON o.id = od.orders_id
            INNER JOIN iqms.orders o ON arc.id = o.arcusto_id 
      GROUP BY arc.company, arc.credit_limit
)
SELECT company, credit_limit, open_invoice_total, open_orders_total
  FROM nested
  WHERE (open_invoice_total + open_orders_total) > arc.credit_limit; 
```

# ruby-on-rails - Rails 全局状态变量

> ID：13527951
> 
> 赞同：1
> 
> 时间：2012-11-23T11:15:12.747
> 
> 标签：ruby-on-rails, ruby, variables, global

我需要在我的 Rails 项目中保持某种状态。某种全局变量或类似的东西，它在服务器启动时具有初始值，并且可以在项目中的任何地方访问和修改。怎么做？实现它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:17:21.900

在文件夹中创建一个文件`config/initializers`并在那里创建您的全局变量。

```
# config/initializers/my_var.rb
$my_global_var = 'hello' 
```

但通常有“更清洁”的方法可以做到这一点。全局变量不是线程安全的，这是最近的热门话题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:49:34.303

我认为这里最好的解决方案可能是[settingslogic gem](https://github.com/binarylogic/settingslogic)。您在 yaml 文件中定义设置，然后您可以在代码中的任何位置访问它们。阅读并设置它们。同时，它使您能够拥有不止一个“全局变量”。在我参与过的大多数项目中，设置在运行时都没有改变，但如果你需要这种行为，你可以这样做。

```
# config/application.yml
defaults: &defaults
  my_global_variable: 100

development:
  <<: *defaults

production:
  <<: *defaults

#And then anywhere in the application you can do:
Settings['my_global_variable'] = 200 
```

# python - 使用 AMQP (RabbitMQ) 作为 Apache Thrift RPC 传输层的 Python 库

> ID：13527956
> 
> 赞同：3
> 
> 时间：2012-11-23T11:15:42.683
> 
> 标签：python, rabbitmq, thrift, amqp

谁能推荐我一个 Python 库来使用 AMQP（最好是 RabbitMQ）作为 Apache Thrift 的传输层？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T18:19:00.950

由于您使用 Thrift 将消息序列化为二进制数据，因此您可以使用此页面上的任何 Python 客户端：[http ://www.rabbitmq.com/devtools.html](http://www.rabbitmq.com/devtools.html)

最后，rabbitmq 消息只是二进制数据，这正是 thrift 产生的。

我在这里对 Google Protocol Buffers 和 c# 做了类似的事情：http: [//itcrowd.be/rabbitmq-and-protobuf](http://itcrowd.be/rabbitmq-and-protobuf) 您可以将相同的逻辑应用于您的 python + thrift 解决方案。

最后，rabbitmq 并不关心消息包含什么，只要它是一个字节数组即可。

# c# - 用户控件从 3.7 迁移到 5.2 后停止工作

> ID：13527957
> 
> 赞同：0
> 
> 时间：2012-11-23T11:15:52.597
> 
> 标签：c#, asp.net, .net, telerik, sitefinity

我最近将我的 3.7 sp4 项目迁移到 5.2，但这样做时遇到了问题。目前，我的用户控件在 5.2 项目中迁移后无法正常工作。

下面是代码：

用户控制代码：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="SiteMenu.ascx.cs" Inherits="UserControls_Nav_SiteMenu" %>
<%@ Register TagPrefix="telerik" Assembly="Telerik.Web.UI" Namespace="Telerik.Web.UI" %>

<asp:SiteMapDataSource ID="SiteMapDataSource1" runat="server" ShowStartingNode="false" />
<telerik:RadMenu ID="RadMenu1" runat="server" DataSourceID="SitemapDataSource1" OnItemDataBound="RadMenu1_ItemDataBound">
</telerik:RadMenu> 
```

# 用户控件的类代码：

```
using System;
using System.Data;
using System.Configuration;
using System.Collections;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
using System.ComponentModel;
using System.Drawing;

using Telerik;
using Telerik.Cms;
using Telerik.Cms.Web;
using Telerik.Web.UI;
using Telerik.Caching;
using Telerik.Cms.Web.UI;

[DefaultProperty("StartingNodeOffset")]
public partial class UserControls_Nav_SiteMenu : System.Web.UI.UserControl, ICacheableObject
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected override void Render(HtmlTextWriter writer)
    {
        // Checks if this is called by the Search Indexer and does not render anything if so.
        // Navigation controls are present in every page and should NOT be indexed multiple times.
        if (!CmsContext.IsRequestCrawler(this.Context))
            base.Render(writer);
    }

    #region Data Fields

    private bool hideUrlForGroupPages = false;
    private string selectedItemCssClass = "selectedItem";

    #endregion

    #region Properties

    [Browsable(true)]
    [Category("Behavior")]
    public int LastExpandLevel
    {
        get
        {
            if (this.RadMenu1.MaxDataBindDepth < 0)
                return 0;
            return this.RadMenu1.MaxDataBindDepth;
        }
        set
        {
            if (value == 0)
                this.RadMenu1.MaxDataBindDepth = -1;
            else
                this.RadMenu1.MaxDataBindDepth = value;
        }
    }

    [Browsable(true)]
    [Category("Behavior")]
    public int ExpandDelay
    {
        get
        {
            return this.RadMenu1.ExpandDelay;
        }
        set
        {
            this.RadMenu1.ExpandDelay = value;
        }
    }

    [Browsable(true)]
    [Category("Behavior")]
    public bool ClickToOpen
    {
        get
        {
            return this.RadMenu1.ClickToOpen;
        }
        set
        {
            this.RadMenu1.ClickToOpen = value;
        }
    }

    [Browsable(true)]
    [Category("Behavior")]
    [DefaultValue(false)]
    public bool HideUrlForGroupPages
    {
        get
        {
            return this.hideUrlForGroupPages;
        }
        set
        {
            this.hideUrlForGroupPages = value;
        }
    }

    [Browsable(true)]
    [Category("Appearance")]
    public string SelectedItemCssClass
    {
        get
        {
            return this.selectedItemCssClass;
        }
        set
        {
            this.selectedItemCssClass = value;
        }
    }

    [Browsable(true)]
    [Category("Appearance")]
    public string CssClass
    {
        get
        {
            return this.RadMenu1.CssClass;
        }
        set
        {
            this.RadMenu1.CssClass = value;
        }
    }

    [Browsable(true)]
    public RadMenu Menu
    {
        get
        {
            return this.RadMenu1;
        }
        set
        {
            this.RadMenu1 = value;
        }
    }

    [Browsable(true)]
    [Category("Navigation")]
    public int StartingNodeOffset
    {
        get
        {
            return this.SiteMapDataSource1.StartingNodeOffset;
        }
        set
        {
            this.SiteMapDataSource1.StartingNodeOffset = value;
        }
    }

    [WebEditor("Telerik.Cms.Web.UI.UrlEditorWrapper, Telerik.Cms")]
    [Browsable(true)]
    [Category("Navigation")]
    public string StartingNodeUrl
    {
        get
        {
            return this.SiteMapDataSource1.StartingNodeUrl;
        }
        set
        {
            this.SiteMapDataSource1.StartingNodeUrl = value;
        }
    }

    [Browsable(true)]
    [Category("Navigation")]
    public bool StartFromCurrentNode
    {
        get
        {
            return this.SiteMapDataSource1.StartFromCurrentNode;
        }
        set
        {
            this.SiteMapDataSource1.StartFromCurrentNode = value;
        }
    }

    [Browsable(true)]
    [Category("Navigation")]
    public bool ShowStartingNode
    {
        get
        {
            return this.SiteMapDataSource1.ShowStartingNode;
        }
        set
        {
            this.SiteMapDataSource1.ShowStartingNode = value;
        }
    }

    /// <summary>(Exposed from contained RadMenu.)</summary>
    [Browsable(true)]
    [Category("Appearance")]
    public string SkinID
    {
        get
        {
            return this.RadMenu1.SkinID;
        }
        set
        {
            this.RadMenu1.SkinID = value;
        }
    }

    [Browsable(true)]
    [Category("Appearance")]
    public string Skin
    {
        get
        {
            return this.RadMenu1.Skin;
        }
        set
        {
            this.RadMenu1.Skin = value;
        }
    }

    #endregion

    #region Methods

    public void RadMenu1_ItemDataBound(object sender, RadMenuEventArgs e)
    {
    CmsSiteMapNode node = e.Item.DataItem as CmsSiteMapNode;

        if (this.hideUrlForGroupPages)
        {

            if (node != null)
            {
                // save the PageID in the attributes of the menu item
                e.Item.Attributes.Add("PageID", node.Key);

                if (node.PageType == CmsPageType.Group)
                {
                    e.Item.NavigateUrl = "";
                }

            }
        }

        if (node.CmsPage != null)
        {
            if (node.CmsPage.PageType == CmsPageType.External)
            {
                e.Item.Target = "_blank";
            }
        }
    }

    #endregion

    #region ICacheableObject Members

    public System.Web.Caching.CacheDependency[] GetDependencies()
    {
        CmsSiteMapProvider provider = null;
        if (!String.IsNullOrEmpty(this.SiteMapDataSource1.SiteMapProvider))
            provider = SiteMap.Providers[this.SiteMapDataSource1.SiteMapProvider] as CmsSiteMapProvider;
        else
            provider = SiteMap.Provider as CmsSiteMapProvider;
        if (provider != null)
        {
            return new System.Web.Caching.CacheDependency[]{ provider.CloneCacheDependency()};
        }
        return null;
    }

    #endregion
} 
```

当我编辑模板（在管理员模式下）时，控制位置显示以下错误：

```
Both DataSource and DataSourceID are defined on 'RadMenu1'.  Remove one definition. 

Description: An unhandled exception occurred during 
the execution of the current web request. Please review the stack trace 
for more information about the error and where it originated in the 
code.

Exception Details: System.InvalidOperationException: Both DataSource and DataSourceID are defined on 'RadMenu1'.  Remove one definition.

Source Error: 

An unhandled exception was generated during the execution of the current
web request. Information regarding the origin and location of the 
exception can be identified using the exception stack trace below.

Stack Trace: 

[InvalidOperationException: Both DataSource and DataSourceID are defined on 'RadMenu1'. Remove one definition.]
System.Web.UI.WebControls.DataBoundControl.ConnectToDataSourceView() +3234866
System.Web.UI.WebControls.DataBoundControl.OnLoad(EventArgs e) +28
System.Web.UI.Control.LoadRecursive() +71
System.Web.UI.Control.LoadRecursive() +190
System.Web.UI.Control.LoadRecursive() +190
System.Web.UI.Control.AddedControl(Control control, Int32 index) +11422584
System.Web.UI.Control.EnsureChildControls() +182
System.Web.UI.Control.PreRenderRecursiveInternal() +60
System.Web.UI.Control.PreRenderRecursiveInternal() +222
System.Web.UI.Control.PreRenderRecursiveInternal() +222
System.Web.UI.Control.PreRenderRecursiveInternal() +222
System.Web.UI.Control.PreRenderRecursiveInternal() +222
System.Web.UI.Control.PreRenderRecursiveInternal() +222
System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +4201

Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.272 
```

但我在我的代码中搜索，如您在上面看到的，只定义了 DataSourceID。

我应该怎么办？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T23:03:02.143

该值将在 .aspx 页面的 HTML 中，而不是在后面的代码中。检查那里，我之前在迁移 Telerik RadControls 版本时看到过这个问题。

# eclipse - Eclipse 总是在特定项目中启动

> ID：13527965
> 
> 赞同：0
> 
> 时间：2012-11-23T11:16:34.327
> 
> 标签：eclipse

这可能是一个愚蠢的问题，但是尽管我现在在我的 Eclipse 工作区上有几个项目，但每次我启动程序时，它都会在包资源管理器的项目文件夹中启动，并且标题上带有该项目名称，即使我正在处理不同的项目，而那个特定的项目已经很长时间没有被触及了。

就好像那个项目特别被标记为“主要”，我不知道如何将它恢复到默认状态。并不是说这是一个严重的问题或任何事情，它只是让我烦恼。

我的eclipse.ini：

```
double -startup
plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.100.v20110502
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-vmargs
-Xms40m
-Xmx384m 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:22:27.567

关于始终从特定项目开始，请查看以下答案：[https](https://stackoverflow.com/a/8598667/1599890) ://stackoverflow.com/a/8598667/1599890 。它似乎帮助了一些人。

关于标题，打开`Preferences -> General -> Workspace`并检查`Workspace name (shown in window title)`那里的设置。

# ruby-on-rails - Carrierwave+fog+s3 不适用于 Cloud Front URL

> ID：13527968
> 
> 赞同：4
> 
> 时间：2012-11-23T11:16:36.963
> 
> 标签：ruby-on-rails, amazon-s3, amazon-cloudfront, fog

我在`carrierwave+fog+s3`使用 Amazon时遇到了这个问题`cloud front`。通过以下设置，我可以将文件上传到 s3，但上传后，我从我的 rails 应用程序获得的 S3 对象 URL 没有`assets_host`基于 URL，即我正在使 URL 看起来像这种格式`https://mycloudfrontname.cloudfront.net/uploads/myfile.mp3`

但是它们都以这种格式出现`https://mybucketname.s3.amazonaws.com/uploads/myfile.mp3`

这里可能有什么问题？

```
CarrierWave.configure do |config|
  config.fog_credentials = {
    :provider               => 'AWS',
    :aws_access_key_id      => 'XXXX',
    :aws_secret_access_key  => 'XXXX',
    :region                 => 'us-east-1'
  }
  config.fog_directory  = 'mybucketname'
  config.asset_host     = 'https://mycloudfrontname.cloudfront.net'
  config.fog_public     = false
  config.fog_attributes = {'Cache-Control' => 'max-age=315576000'}
end 
```

**更新：**

我从 Carrierwave's 中找到了这个代码位`/lib/carrierwave/storage/fog.rb`- 所以如果我们`asset_host`在上面的代码片段中设置 as ，这一定可以正常工作吗？还是我还必须做任何其他配置？

```
def public_url
          if host = @uploader.asset_host
            if host.respond_to? :call
              "#{host.call(self)}/#{path}"
            else
              "#{host}/#{path}"
            end
          else
            # AWS/Google optimized for speed over correctness
            case @uploader.fog_credentials[:provider]
            when 'AWS'
              # if directory is a valid subdomain, use that style for access
              if @uploader.fog_directory.to_s =~ /^(?:[a-z]|\d(?!\d{0,2}(?:\d{1,3}){3}$))(?:[a-z0-9\.]|(?![\-])|\-(?![\.])){1,61}[a-z0-9]$/
                "https://#{@uploader.fog_directory}.s3.amazonaws.com/#{path}"
              else
                # directory is not a valid subdomain, so use path style for access
                "https://s3.amazonaws.com/#{@uploader.fog_directory}/#{path}"
              end
            when 'Google'
              "https://commondatastorage.googleapis.com/#{@uploader.fog_directory}/#{path}"
            else
              # avoid a get by just using local reference
              directory.files.new(:key => path).public_url
            end
          end
        end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-20T12:56:41.433

更改`config.fog_public`并`true`添加`config.asset_host = 'YOUR_CND_ADDRESS'`. 当为假`asset_host`时不起作用`fog_public`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T23:16:13.193

在您的环境文件中，您需要设置资产主机。只需将下面的行添加到您的`config/environments/production.rb`文件中，就可以了。还可能需要确保您使用的是最新版本的载波和雾宝石。

```
-- config/environments/production.rb

Myapp::Application.configure do

  # Use Content Delivery Network for assets
  config.action_controller.asset_host = 'https://mycloudfrontname.cloudfront.net'

end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T06:56:00.963

不要使用asset_host。asset_host 设置用于由 rails 资产助手提供的文件。CarrierWave 文件以不同的方式处理。您正在寻找的配置是 config.fog_host

```
config.fog_host = 'https://mycloudfrontname.cloudfront.net' 
```

# php - 如何在群组中分享公共照片 php sdk facebook

> ID：13527969
> 
> 赞同：1
> 
> 时间：2012-11-23T11:16:37.190
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我正在尝试使用 php sdk (graph api) 将公开照片分享给一个群组

```
 $ret_obj = $facebook->api("/$group_id/feed", 'POST', array(
                'link' =>  $link,
                'message' => $message,
            )
        ); 
```

$link 是我想以这种格式分享的照片的链接：[https ://www.facebook.com/photo.php?fbid=10151273906386749&set=a.53081056748.66806.6815841748&type=1&theater](https://www.facebook.com/photo.php?fbid=10151273906386749&set=a.53081056748.66806.6815841748&type=1&theater)

它没有用，所以我也在 Graph Api Explorer 中尝试了这个，结果我得到：

```
{
  "error": {
"message": "(#100) property values must be strings or objects with a 'text' and a 'href' attribute",
"type": "OAuthException",
"code": 100
  }
} 
```

# javascript - 为什么我的网站无法访问链接的 JavaScript 文件？

> ID：13527973
> 
> 赞同：0
> 
> 时间：2012-11-23T11:16:57.113
> 
> 标签：javascript

我在工作中运行一个子站点，虽然我的实时站点与公司的主站点位于同一“主服务器”上，但我的开发环境托管在单独的服务器上。

由于某种原因，我的开发站点无法访问托管在“主服务器”上的特定 JavaScript 文件。可以访问所有其他 JavaScript 文件，例如 jQuery 和 jQueryTools，但`main.js`不能访问。我唯一的猜测是因为它是由我们的首席 Web 开发人员创建的自定义 JavaScript 文件，但我不知道为什么会有所作为。（**跨站点脚本限制？**）

我链接到它，就像我对所有其他 JavaScript 文件所做的一样，就在我们的主包装器之后（它是底部的第三个）：

```
<script type="text/javascript" src="ui/2009/js/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="ui/2009/js/jquerytools/1.2.2/jquery.tools.min.js"></script>
<script type="text/javascript" src="ui/2009/js/jquery.cycle.all.min.js"></script>
<script type="text/javascript" src="ui/2009/js/main.js"></script>
<script type="text/javascript" src="ui/2009/js/jquery.jgfeed-min.js"></script>
<script type="text/javascript" src="ui/2009/js/hr.js"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:27:40.510

要进行故障排除，请执行以下步骤：

*   检查文件*ui/2009/js/main.js*是否实际上在该位置，如果是，请确保它没有大写字符（服务器操作系统可能区分大小写）

*   检查文件*main.js*是否与其他 .js 文件（例如 755）具有相同的权限（即 chmod）

*   检查文件 main.js 是否实际被访问（你怎么知道文件不是从你的页面在开发服务器中访问的？它可能被访问但由于与你之前加载的 .js 的变量冲突而无法工作，例如） . 为此，您可以 a) 检查服务器日志并查看是否有涉及 main.js 文件的“未找到”错误 b) 在 main.js 中临时删除所有内容并打印一些简单的输出（或者到屏幕使用 *document.write或使用**console.log*到 javascript 控制台）

# css - 使用 CSS 创建带有固定标题的可滚动 div

> ID：13527982
> 
> 赞同：-1
> 
> 时间：2012-11-23T11:17:26.110
> 
> 标签：css, css-tables, scrollable

我想使用 CSS 创建一个顶部固定表头的可滚动表。你能建议我一个解决方案吗？我试图为 tbody 提供溢出自动和高度，但它不起作用。

```
<div class="container">
    <div class="table">
        <div class="tr header">
            <div class="td col1">
                heading1sdfsfa
            </div>
            <div class="td col2">
                heading2
            </div>
            <div class="td col3">
                heading3
            </div>
        </div>
        <div class="tbody">
            <div class="tr">
                <div class="td">
                    4343
                </div>
                <div class="td">
                    444
                </div>
                <div class="td">
                    23
                </div>
            </div>

            <div class="tr">
                <div class="td">
                    3323
                </div>
                <div class="td">
                    32423423
                </div>
                <div class="td">
                    4234
                </div>
            </div>    
            <div class="tr">
                <div class="td">
                    3323
                </div>
                <div class="td">
                    32423423
                </div>
                <div class="td">
                    4234
                </div>
            </div>    
            <div class="tr">
                <div class="td">
                    3323
                </div>
                <div class="td">
                    32423423
                </div>
                <div class="td">
                    4234
                </div>
            </div>    
            <div class="tr">
                <div class="td">
                    3323
                </div>
                <div class="td">
                    32423423
                </div>
                <div class="td">
                    4234
                </div>
            </div>    
            <div class="tr">
                <div class="td">
                    3323
                </div>
                <div class="td">
                    32423423
                </div>
                <div class="td">
                    4234
                </div>
            </div>    
            <div class="tr">
                <div class="td">
                    3323
                </div>
                <div class="td">
                    32423423
                </div>
                <div class="td">
                    4234
                </div>
            </div>    
            <div class="tr">
                <div class="td">
                    3323
                </div>
                <div class="td">
                    32423423
                </div>
                <div class="td">
                    4234
                </div>
            </div>    
            <div class="tr">
                <div class="td">
                    3323
                </div>
                <div class="td">
                    32423423
                </div>
                <div class="td">
                    4234
                </div>
            </div>    
            <div class="tr">
                <div class="td">
                    3323
                </div>
                <div class="td">
                    32423423
                </div>
                <div class="td">
                    423434355454354343 5353454354354354353455334546
                </div>
            </div>    
        </div>            
    </div>
</div>
​ 
```

这是风格：

```
.container{ width:100%; padding-top:25px;padding-top:30px;}
.table{display:table; width:90%; margin:auto; border-collapse:collapse;}
.tr{display:table-row;}
.td{display:table-cell; border:1px solid #ccc; padding:5px;}

.header .td{color:#fff; background:#000;}

.tbody{display:table-row-group; height:100px; overflow:auto}

.td.col1{width:25%;}
.td.col2{width:50%;}
.td.col3{width:25%;}

.scrollable{height:350px; overflow:auto;} 
```

​</p>

在这里查看我未完成的[小提琴](http://jsfiddle.net/ajineshravi/6e37h/2/)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-23T12:01:49.237

CSS 不允许你这样做。我的理由是..

如果你的 CSS 能以某种方式工作，那么 tbody 会为你创建滚动......但是要显示滚动条，它需要空间......并且该空间将改变列百分比宽度......和整个结构对齐会动摇。

这件事也会发生在固定宽度上......

如果你理解了，那就点个赞吧：）

# android - 绑定服务期间的异常

> ID：13527986
> 
> 赞同：0
> 
> 时间：2012-11-23T11:17:32.410
> 
> 标签：android, android-intent, android-service

当我尝试从我的应用程序执行 bindService 时出现以下错误。我正在使用 Android 源代码，我确信我尝试绑定的这个服务不是从其他地方启动的。我已经通过设置 -> 应用程序 -> 运行确认了这一点，它显示了正在运行的服务。

```
01-02 00:06:54.531: INFO/PowerManagerService(425): Start Light.setBrightness(), [20],  [3]
01-02 00:06:56.473: INFO/PowerManagerService(425): Start Light.setBrightness(), [130], [3]
01-02 00:06:58.055: WARN/dalvikvm(4956): threadid=1: thread exiting with uncaught exception (group=0x40b70390)
01-02 00:06:58.055: WARN/ActivityManager(425): Permission Denial: Accessing service ComponentInfo{jp.co.abc.android.omrsettings/jp.co.xyz.bluetooth.profile.TIPServer} from   pid=4956, uid=10158 requires jp.co.abc.android.OMRSettings.permission.Access
01-02 00:06:58.065: ERROR/AndroidRuntime(4956): FATAL EXCEPTION: main
java.lang.SecurityException: Not allowed to bind to service Intent {      act=jp.co.xyz.bluetooth.api.ITimeServer }
at android.app.ContextImpl.bindService(ContextImpl.java:1187)
at android.content.ContextWrapper.bindService(ContextWrapper.java:370)
at jp.co.abc.middleware.tip.LeTimeServerProfile.startTimeServer(LeTimeServerProfile.java:45)
at jp.co.abc.tip.TimeActivity.onClick(TimeActivity.java:49)
at android.view.View.performClick(View.java:3511)
at android.view.View$PerformClick.run(View.java:14133)
at android.os.Handler.handleCallback(Handler.java:605)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4507)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
at dalvik.system.NativeStart.main(Native Method)
01-02 00:06:58.095: WARN/ActivityManager(425): Force finishing activity      jp.co.abc.tip/.TimeActivity 
```

奇怪的是，当我从设备中删除特定应用程序时，不会发生此错误。有人可以告诉我在存在此应用程序的情况下出现此错误的原因可能是什么，而当我删除此应用程序时却没有？

任何帮助深表感谢。

**编辑**

这是我用来做绑定服务的代码：

```
mContext.bindService(new Intent("jp.co.xyz.bluetooth.api.ITimeServer"),  time_connection, Context.BIND_AUTO_CREATE);

ServiceConnection time_connection = new ServiceConnection() {
     public void onServiceConnected(ComponentName name, IBinder service){
         mTime = ITimeServer.Stub.asInterface(service);
         try {
             mTime.startTIPServer(callback,Constants.TIME_SOURCE_CELLULAR_NETWORK,46);
         } catch (RemoteException e) {
             Log.e(TAG, " startTIPServer error "); 
         }
     }

    public void onServiceDisconnected(ComponentName name){
        mTime = null;
     }
  }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:37:03.977

该错误是权限错误。看起来您的应用程序需要具有权限`jp.co.abc.android.OMRSettings.permission.Access`。将此添加到您的清单中：

```
<uses-permission android:name="jp.co.abc.android.OMRSettings.permission.Access"/> 
```

# html - html为移动设备创建仪表板

> ID：13527992
> 
> 赞同：-1
> 
> 时间：2012-11-23T11:17:58.890
> 
> 标签：html

我必须创建以下 html，尝试将 div 用于“过去 24 小时”和“上个月”，并将其他 div 用于其他内容，但结果却一团糟。请帮助我，应该使用什么结构？桌子？分区？谢谢

![在此处输入图像描述](../Images/544de817fb41d881c284d105f52606e3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:21:38.530

这乞求成为一个网格。我会将`div`s 与一些现成的网格一起使用，例如[Bootstrap](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)中的网格。

例如，它可能看起来像这样：

```
<div class="container">
  <div class="row">
    <div class="span6">LAST 24 HOURS</div>
    <div class="span6">LAST MONTH</div>
  </div>
  <div class="row">
    <div class="span6">283</div>
    <div class="span6">put a nested grid here</div>
  </div>
  <div class="row">
    <div class="span3">Facebook<div class="value">10%</div></div>
    <div class="span3">Twitter<div class="value">9%</div></div>
    <div class="span3">Foursquare<div class="value">7%</div></div>
    <div class="span3">Others<div class="value">5%</div></div>
  </div>
</div> 
```

然后添加一些 css 类并使用它来浮动、更改字体大小、颜色等。

# java - Android php+mysql+json错误实现AsyncTask

> ID：13527993
> 
> 赞同：0
> 
> 时间：2012-11-23T11:18:02.400
> 
> 标签：java, android, json, android-asynctask

我是 Android 新手，需要一点帮助。我有一个来自远程 mysql 上的一个表的类女巫值，它在 2.3 上工作正常，但在 4.x 上，当我启动它时出现错误。我在某处读过它，因为我没有使用 AsyncTask。我试图在现有的工作代码上实现它，但有一个错误，所以请帮忙，因为我尽一切努力让它工作但没有成功。

这是适用于 2.3 的现有代码

```
package com.stole.fetchtest;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import android.app.ListActivity;
import android.net.ParseException;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.ArrayAdapter;
import android.widget.Toast;

public class FetchData extends ListActivity {

    @SuppressWarnings("unchecked")
    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        String result = null;
        InputStream is = null;
        StringBuilder sb = null;
        ArrayList<?> nameValuePairs = new ArrayList<Object>();
        List<String> r = new ArrayList<String>();

        try {

            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(
                    "http://www.url.com/fetch.php");
            httppost.setEntity(new UrlEncodedFormEntity(
                    (List<? extends NameValuePair>) nameValuePairs));
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();
        } catch (Exception e) {
            Toast.makeText(getBaseContext(), e.toString(), Toast.LENGTH_LONG)
                    .show();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "UTF-8"));

            sb = new StringBuilder();

            String line = null;

            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }

            is.close();

            result = sb.toString();
        } catch (Exception e) {
            Toast.makeText(getBaseContext(), e.toString(), Toast.LENGTH_LONG)
                    .show();
        }

        try {
            JSONArray jArray = new JSONArray(result);
            JSONObject json_data = null;
            for (int i = 0; i < jArray.length(); i++) {
                json_data = jArray.getJSONObject(i);
                r.add(json_data.getString("names"));
            }
            setListAdapter(new ArrayAdapter<String>(this, R.layout.names_row, r));
        } catch (JSONException e1) {
            Toast.makeText(getBaseContext(), e1.toString(), Toast.LENGTH_LONG)
                    .show();
        } catch (ParseException e1) {
            Toast.makeText(getBaseContext(), e1.toString(), Toast.LENGTH_LONG)
                    .show();
        }

    }} 
```

然后我尝试添加AsyncTask，根据网上找到的一些教程，它看起来像这样：

```
package com.stole.fetchtest;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import android.app.ListActivity;
import android.net.ParseException;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.ArrayAdapter;
import android.widget.Toast;

public class FetchData extends ListActivity {

    String result = null;
    InputStream is = null;
    StringBuilder sb = null;
    ArrayList<?> nameValuePairs = new ArrayList<Object>();
    List<String> r = new ArrayList<String>();

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        new task().execute();
    }

    public class task extends AsyncTask<String, String, Void> {

        @SuppressWarnings("unchecked")
        @Override
        protected Void doInBackground(String... params) {

            try {

                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost("http://www.url.com/fetch.php");
                httppost.setEntity(new UrlEncodedFormEntity(
                        (List<? extends NameValuePair>) nameValuePairs));
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();
            } catch (Exception e) {
                Toast.makeText(getBaseContext(), e.toString(),
                        Toast.LENGTH_LONG).show();
            }

            try {
                BufferedReader reader = new BufferedReader(
                        new InputStreamReader(is, "iso-8859-1"));

                sb = new StringBuilder();

                String line = null;

                while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
                }

                is.close();

                result = sb.toString();
            } catch (Exception e) {
                Toast.makeText(getBaseContext(), e.toString(),
                        Toast.LENGTH_LONG).show();
            }

            return null;
        }

        protected void onPostExecute(Void v) {

            try {
                JSONArray jArray = new JSONArray(result);
                JSONObject json_data = null;
                for (int i = 0; i < jArray.length(); i++) {
                    json_data = jArray.getJSONObject(i);
                    r.add(json_data.getString("naziv"));
                }
                setListAdapter(new ArrayAdapter(this, R.layout.names_row, r));
            } catch (JSONException e1) {
                Toast.makeText(getBaseContext(), e1.toString(),
                        Toast.LENGTH_LONG).show();
            } catch (ParseException e1) {
                Toast.makeText(getBaseContext(), e1.toString(),
                        Toast.LENGTH_LONG).show();
            }

        }

    }

} 
```

我得到的错误是

```
setListAdapter(new ArrayAdapter(this, R.layout.names_row, r)); 
```

它说“*构造函数 ArrayAdapter(FetchData.task, int, List) 未定义*” 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:22:06.277

它应该使用**活动上下文**而不是任务上下文..

```
setListAdapter(new ArrayAdapter(FetchData.this, R.layout.names_row, r)); 
```

# vb.net - Visual Basic 9.0 不支持这种 lambda 表达式

> ID：13527995
> 
> 赞同：2
> 
> 时间：2012-11-23T11:18:17.847
> 
> 标签：vb.net, lambda

**当**我将**鼠标****悬停**在Sub

 ****我是 lambda 表达式的新手。任何帮助表示赞赏。我正在使用 VS 2010 和 .NET 3.5。

```
Sub Main() 
    ExecuteWithinTransaction(Sub(con, trans) InsertA("Al", con, trans))
    ExecuteWithinTransaction(Sub(con, trans) InsertB("Bert", con, trans))

    ExecuteWithinTransaction(Sub(con, trans)
                                 InsertA("Albert", con, trans)
                                 InsertB("Einstein", con, trans)
                             End Sub)
End Sub

''' <summary>
''' Executes an action within a transaction. handles connection and transaction management
''' </summary>
''' <param name="action">The action to be executed</param>
Sub ExecuteWithinTransaction(ByVal action As Action(Of SqlConnection, SqlTransaction))
    Dim connection As SqlConnection = New SqlConnection("CONNECTIONSTRING")

    connection.Open()
    Try
        Dim transaction = connection.BeginTransaction()

        Try
            action(connection, transaction)
            transaction.Commit()
        Catch ex As Exception
            transaction.Rollback()
            Throw 'rethrow exception preserving original stacktrace
        End Try
    Finally
        connection.Close()
    End Try 
End Sub

Sub InsertA(ByVal name As String, ByVal connection As SqlConnection, ByVal transaction As SqlTransaction)
    Dim cmd As SqlCommand = New SqlCommand("INSERT INTO XXX (Name) VALUES (@NAME)", connection, transaction)

    cmd.Parameters.AddWithValue("@Name", name)

    cmd.ExecuteNonQuery()
End Sub

Sub InsertB(ByVal name As String, ByVal connection As SqlConnection, ByVal transaction As SqlTransaction)
    Dim cmd As SqlCommand = New SqlCommand("INSERT INTO YYY (Name) VALUES (@NAME)", connection, transaction)

    cmd.Parameters.AddWithValue("@Name", name)

    cmd.ExecuteNonQuery()
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T11:20:35.477

~~`Sub`VB.NET 2012+ 支持语句 lambda ( s)。~~

~~VB.NET 2010 仅支持函数 lambdas ( `Function`s)。~~

请参阅下面 Ric 的评论以获取答案。

如果无法更改固件版本的解决方法：以普通的非 lambda 形式编写小助手 subs，然后将它们作为委托传递给`ExecuteWithinTransaction`.

所以你会有

```
private sub Lambda1 (con as SqlConnection, tran as SqlTransaction)
  InsertA("Al", con, tran)
end sub

private sub Lambda2 (con as SqlConnection, tran as SqlTransaction)
  InsertB("Bert", con, tran)
end sub

private sub Lambda3 (con as SqlConnection, tran as SqlTransaction)
  InsertA("Albert", con, tran)
  InsertB("Einstein", con, tran)
end sub 
```

进而

```
ExecuteWithinTransaction (AddressOf Lambda1)
ExecuteWithinTransaction (AddressOf Lambda2)
ExecuteWithinTransaction (AddressOf Lambda3) 
```****