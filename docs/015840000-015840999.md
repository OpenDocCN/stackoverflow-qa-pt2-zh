# StackOverflow 问答 15840000-15840999

# java - 在 TextField 中将控制字符显示为空格

> ID：15840000
> 
> 赞同：1
> 
> 时间：2013-04-05T17:32:57.757
> 
> 标签：java, swing, javafx-2

我必须在 JavaFX 中的 TextBox、TextFile 等组件中显示字符串。此字符串可以包含控制字符、不可打印字符（即所有字符在 ASCII < 32 中）。当我通过 println() 在控制台上显示我的字符串时，控制字符将被空格替换（仅在视图中），因为我可以复制并粘贴相同的字符串仍然带有控制字符。默认情况下，不可打印字符被跳过以进行显示。我想收到相同的结果以在任何 JAvaFx 组件中显示/输入特殊字符，就像它在 Java 控制台中一样，有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T04:12:32.767

随意使用和/或编辑我制作的这段代码：

```
import java.awt.Toolkit;
import java.awt.datatransfer.Clipboard;
import java.awt.datatransfer.DataFlavor;
import java.awt.datatransfer.StringSelection;
import java.awt.datatransfer.UnsupportedFlavorException;
import java.io.IOException;

import javax.swing.JTextField;
import javax.swing.text.AttributeSet;
import javax.swing.text.BadLocationException;
import javax.swing.text.PlainDocument;

/**
 * A text field where all control characters are displayed as the same optional
 * char. The default replacement char is space.
 */
public class MyTextField extends JTextField {

    private static final long serialVersionUID = -4027593772585498003L;
    private static final Clipboard clipboard =
            Toolkit.getDefaultToolkit().getSystemClipboard();

    //String whose control characters aren't replaced
    private String ctrlText;
    //Char for replacing control characters
    private char replacementChar;

    public MyTextField() {
        this(null, 0);
    }
    public MyTextField(int columns) {
        this(null, columns);
    }
    public MyTextField(String text) {
        this(text, 0);
    }
    public MyTextField(String text, int columns) {
        ctrlText = (text == null) ? "" : text;
        setReplacementChar(' ');
        setDocument(new CustomDocument());
        setText(text);
        setColumns(columns);
    }
    /**
     * Sets the char to replace the control characters.
     * 
     * @param ch  the char to replace the control characters
     */
    public void setReplacementChar(char ch) {
        replacementChar = ch;
    }

    @Override
    public void cut() {
        int start = getSelectionStart();
        int end   = getSelectionEnd();

        //Copy to clipboard
        String data = ctrlText.substring(start, end);
        clipboard.setContents(new StringSelection(data), null);

        //Set new text
        String newText = ctrlText.substring(0, start) + ctrlText.substring(end);
        setText(newText);
    }
    @Override
    public void copy() {
        int start = getSelectionStart();
        int end   = getSelectionEnd();

        //Copy to clipboard
        String data = ctrlText.substring(start, end);
        clipboard.setContents(new StringSelection(data), null);
    }
    @Override
    public void paste() {
        int start = getSelectionStart();
        int end   = getSelectionEnd();

        //Get data from clipboard
        String data = null;
        try { data = (String)clipboard.getData(DataFlavor.stringFlavor); }
        catch (UnsupportedFlavorException e) {}
        catch (IOException e) {}

        //Set new text
        String newText = ctrlText.substring(0, start)
                + data
                + ctrlText.substring(end);
        setText(newText);
    }
    /**
     * Replaces all control characters with the replacement char.
     * 
     * @param text  the String whose control characters are to be replaced
     * @return      the resulting String
     */
    private String replaceCtrlChars(String text) {
        if(text == null) return null;

        return text.replaceAll("\\p{Cntrl}", "" + replacementChar);
    }
    /**
     * Document where control characters are displayed as the replacement char.
     */
    private class CustomDocument extends PlainDocument {
        @Override
        public void remove(int offs, int len) throws BadLocationException {
            //Remove from ctrlText
            ctrlText = ctrlText.substring(0, offs)
                    + ctrlText.substring(offs + len);
            //Remove from text field
            super.remove(offs, len);
        }
        @Override
        public void insertString(int offs, String str, AttributeSet a)
                throws BadLocationException {
            //Insert to ctrlText
            ctrlText = ctrlText.substring(0, offs)
                    + str
                    + ctrlText.substring(offs);
            //Insert String with replaced chars to text field
            super.insertString(offs, replaceCtrlChars(str), a);
        }
        private static final long serialVersionUID = -6187351778620427126L;
    }
} 
```

这是一个文本字段，其中控制字符（ASCII < 32 或 == 127 的字符）显示为相同的可选`char`.

默认替换是空格，但您可以通过调用`char`将其设置为任何可显示的。我可能会使用问号。`char``setReplacementChar`

# bash - 通过 ssh 运行多个命令

> ID：15840001
> 
> 赞同：1
> 
> 时间：2013-04-05T17:32:58.807
> 
> 标签：bash

我正在尝试使用 SSH 运行多个命令，但我的语法不正确。有人可以给我一些帮助吗？

```
ssh "$USER"@"$IP" " \
    CURRENT_HOSTNAME=$(hostname); \
    sed -c -i 's/\($TARGET_KEY *= *\).*/\1$REPLACEMENT_VALUE/' $DISTRO_FILE; \
    sed -c -i 's/$CURRENT_HOSTNAME/$REPLACEMENT_VALUE/' $CONFIG_FILE; \
    hostname $REPLACEMENT_VALUE" 
```

如果这些命令在本地运行，它们可以正常工作，但是在尝试通过 SSH 运行它们时出现以下错误：

```
sed: -e expression #1, char 0: no previous regular expression 
```

似乎错误来自

```
sed -c -i 's/$CURRENT_HOSTNAME/$REPLACEMENT_VALUE/' $CONFIG_FILE; \ 
```

因为它试图读取之前在 SSH 本身中设置的 $CURRENT_HOSTNAME。我不确定如何读回该变量。请问有什么线索吗？

编辑代码：

```
ssh "$USER"@"$IP" "CURRENT_HOSTNAME=\$(hostname);
    sed -c -i \"s/\($TARGET_KEY *= *\).*/\1$REPLACEMENT_VALUE/\" $DISTRO_FILE;
    sed -c -i \"s/\$CURRENT_HOSTNAME/$REPLACEMENT_VALUE/\" $CONFIG_FILE;
    hostname $REPLACEMENT_VALUE" 
```

这行得通！非常感谢！

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T18:07:32.167

在将参数发送到远程机器之前，所有带双引号的变量都将由 Bash 评估。

如果要保留，`$variable`则需要使用单引号（在命令中转义单引号），或转义要在服务器端评估的所有美元符号。

您也不需要转义换行符并使用分号。所有换行符都将包含在参数中。

# git - Git推送大文件时，远程端意外挂断

> ID：15840002
> 
> 赞同：8
> 
> 时间：2013-04-05T17:33:01.873
> 
> 标签：git, version-control, github, bitbucket, git-remote

当我尝试推送到我的 bitbucket 存储库时，我收到以下错误。（事实上​​它在 GitHub 中也是一样的）。

> 计数对象：48，完成。
> Delta 压缩最多使用 2 个线程。
> 压缩对象：100% (38/38)，完成。
> 写入对象：100% (48/48)，1.95 MiB | 38 KiB/s，完成。
> Total 48 (delta 9), reused 0 (delta 0)
> 致命：远程端意外挂断
> 错误：RPC失败；结果 = 56，HTTP 代码 = 0
> 致命：在死处理程序中检测到递归
> 一切都是最新的

大多数情况下，我会遇到另一个错误，例如

> 错误：RPC 失败；result=56, HTTP code = 0
> fatal: 远端意外挂断

无论哪种方式，PUSH 都会失败。我猜这仅适用于大文件。对于较小的更改，它可以正常工作。我已经更新`http.postBuffer`到2M了，还是不行。

**重要** 我有一个 3G 连接和一个基于 CDMA 的 EVDO 互联网连接。使用**3G 连接**，PUSH 和其他一切**工作正常**。但是使用 EVDO 我得到了上述错误。所以我的印象是，这是因为我的 EVDO 或 ISP 的一些连接问题。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-09T15:02:52.667

通常，远端挂断来自未经授权的用户。但是，如果您可以成功连接，那不是问题。

如果您真的认为这是文件大小问题，这是我最好的建议：

git 客户端开始*“分块”*请求的默认大小是 1MB。您可以使用以下方法更改此设置：

`git config http.postBuffer 524288000`

此示例将 postBuffer 设置为 500MB。玩弄这个值，看看它是否有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-12T12:52:14.590

我用 bitbucket 遇到了这个问题，增加了`postBuffer`可能需要但没有解决问题。

我只能通过使用另一个互联网连接来解决这个问题。

这些是`GIT_CURL_VERBOSE=1`返回的错误：

```
* SSLRead() return error -9820
* Connection died, retrying a fresh connect
* Closing connection 0 
```

进而

```
* SSLWrite() returned error -36
* Closing connection 1
error: RPC failed; result=55, HTTP code = 0
fatal: The remote end hung up unexpectedly 
```

希望这可以帮助某人，也许有更多知识的人了解这些 SSL 错误？

**更新：**

我遇到的问题是最初`git push`进入回购协议，从那时起，我尝试使用原始互联网连接将相同的推送到同一个 bitbucket 回购协议中，并且它可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-23T16:29:42.850

我遇到了同样的问题，这是因为我的推送包含一些大文件。显然 github 对单个文件大小有 100MB 的限制。我从我的提交中删除了大文件并重试了 git push 并且它起作用了。以下是有关尺寸限制的更多信息：

[https://help.github.com/articles/what-is-my-disk-quota](https://help.github.com/articles/what-is-my-disk-quota)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-09T14:32:10.307

原来这是 BSNL 的 EVDO 连接的问题。不幸的是，BSNL 的技术人员都无法帮助我。所以我放弃了连接。

回到良好的旧有线宽带：D。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-14T14:46:15.210

当原因是一个巨大的文件并且`http.postBuffer`对您不起作用时，请尝试从 http 切换到 ssh（即`ssh://git@<your git repository>`）。这可能会让你越过你的障碍。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-18T14:19:24.923

就我而言，我没有PRC错误，而是“client_loop：发送断开连接：对等方重置连接”，然后是“致命：远程端意外挂断”。我的解决方案是使用嵌套 VPN。我需要一个到 git repo 的 VPN 连接（因为它位于客户端防火墙后面）。

我首先将我的计算机连接到一个完全不同的 VPN。此 VPN 连接的类型为“IPv6、Layer3、UDP”。然后我设置了一个虚拟机，并将它与另一个 VPN 连接到目标网络。从这个虚拟机我可以成功推送。

# json - 在 Coldfusion 中使用 JSON 数据

> ID：15840003
> 
> 赞同：4
> 
> 时间：2013-04-05T17:33:02.140
> 
> 标签：json, coldfusion

我过去使用过 JSON 数据——主要是“捏造”我的解决方案，并没有真正理解事情为什么或如何工作。我遇到了一个问题，即返回的数据看起来与我以前看到的有些不同，而且我找不到任何与之匹配的示例。

这是返回数据的示例（通过 API）；

```
{"domain.co.uk":{"status":"available","classkey":"thirdleveldotuk"},"domain.net":{"status":"available","classkey":"dotnet"},"domain.com":{"status":"available","classkey":"domcno"}} 
```

在我的前端，我需要返回这样的东西 -

*   domain.co.uk - 可用
*   domain.net - 可用
*   domain.com - 可用

因为“domain.com”等值总是会改变，所以我不能像往常一样映射名称（尽管它总是返回 3 个“行”）

我检查了我拥有的每一本 CF 书，并阅读了在线 CF 文档，但我完全不知道从哪里开始！

非常感谢指点！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T17:50:46.187

如果你使用 deserializeJSON(data) 运行它，你会看到你最终得到的是带有嵌套结构的结构。因此，您可以遍历您的结构，获取键，然后获取该键的状态。在 JSON 术语中，您的 JSON 对象具有嵌套对象。

```
<cfset data = deserializeJSON(apiData) />
<cfset formattedData = [] />
<cfset tmp = {} />

<cfloop collection=#data# item="domain">
    <cfset tmp.domain = domain />
    <cfset tmp.status = data[domain]["status"] />
    <cfset arrayAppend(formattedData,duplicate(tmp)) />
</cfloop>

<cfdump var=#formattedData# /> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-05T18:31:09.447

（这真的更像是一个评论，但有点太长了......）

> 我过去使用过 JSON 数据——主要是“捏造”我的解决方案，并没有真正理解为什么或如何工作

[JSON](http://json.org/)字符串本质上只是两个对象的表示：

*   由`[]`和表示的数组
*   由表示的结构（或对象）`{}`

查看 API 字符串，大括号`{}`表示您正在处理一个结构：

```
 { "theKey": "theValue" } 
```

在您的情况下，域名是结构`key`：

```
 { "domain.co.uk": "theValue" } 
```

..`value`是一个*嵌套*结构，包含两个静态键：“status”和“classkey”

```
 { "theKey":  {"status":"available","classkey":"thirdleveldotuk"}  } 
```

与任何结构一样，您可以使用`for .. in`循环动态迭代键，如果您更喜欢 cfml，则可以使用集合循环。

```
 for (theKey in theStruct) {
         WriteDump( theKey ); // ie "domain.co.uk"
     } 
```

然后在循环内使用关联数组表示法来获取`value`，即：

```
 theStatus = theStruct[ theKey ]["status"]; // "available"

     // ... OR
     theValue  = theStruct[ theKey ]; 
     theStatus = theValue.status; 
```

这就是它的全部。您可以使用类似的逻辑来访问任何类型的嵌套结构。

# r - R中的高效内存管理

> ID：15840004
> 
> 赞同：12
> 
> 时间：2013-04-05T17:33:06.963
> 
> 标签：r, memory, memory-management

我的机器中有 6 GB 内存（Windows 7 Pro 64 位），在 R 中，我得到

```
> memory.limit()
6141 
```

当然，在处理大数据时，会出现内存分配错误。所以为了让 R 使用虚拟内存，我使用

```
> memory.limit(50000) 
```

现在，在运行我的脚本时，我不再有内存分配错误，但是 R 占用了我计算机中的所有内存，所以在脚本完成之前我无法使用机器。我想知道是否有更好的方法让 R 管理机器的内存。我认为它可以做的事情是使用虚拟内存，如果它使用的物理内存超过用户指定的。有没有这样的选择？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-06T01:12:27.133

查看 ff 和 bigmemory 包。这使用知道 R 对象的函数将它们保存在磁盘上，而不是让操作系统（它只知道内存块，但不知道它们代表什么）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-05T17:56:48.130

R 不管理机器的内存。那是操作系统的责任。在 Windows 上存在的唯一原因是因为（`memory.size`来自）：`memory.limit``help("Memory-limits")`

```
 Under Windows, R imposes limits on the total memory allocation
 available to a single session as the OS provides no way to do so:
 see 'memory.size' and 'memory.limit'. 
```

R 对象还必须占用 RAM 中的连续空间，因此您可能会遇到仅使用几个大对象的内存分配问题。您可能会更加小心您创建的对象的数量/大小，并避免使用太多内存。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-05T18:07:23.010

这不是一个解决方案，而是一个建议。尽可能使用内存高效的对象：例如，使用矩阵而不是 data.frame。

这里有一个例子

```
m = matrix(rnorm(1000), 2, 2)
d = as.data.frame(m)
object.size(m)
232 bytes
object.size(d)
808 bytes 
```

# objective-c - iOS5 和 iOS6 中不同的视图

> ID：15840005
> 
> 赞同：0
> 
> 时间：2013-04-05T17:33:08.670
> 
> 标签：objective-c, ios5, ios6, landscape-portrait

我有这个代码（使用横向方向）

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return UIInterfaceOrientationIsLandscape(interfaceOrientation);
} 
```

和 viewDidLoad 中的代码

```
CGSize viewSize = [[UIScreen mainScreen] bounds].size;

if(UIInterfaceOrientationIsLandscape([[UIApplication sharedApplication] statusBarOrientation])){
    viewSize = CGSizeMake(viewSize.height, viewSize.width);

} else {
    viewSize = CGSizeMake(viewSize.width, viewSize.height);
}

rect = CGRectMake(0, 0, viewSize.width, viewSize.height); 
```

在 iOS 5 矩形中 (x=0,y=0,width=320,height=480)

在 iOS 6 矩形中 (x=0,y=0,width=480,height=320)

如何修复 iOS 5 不同的矩形

**更新**

在 viewDidAppear 中都OK

# javascript - 需要 iFrame 外部的父按钮来调用 iFrame 内部加载的 JS 函数

> ID：15840006
> 
> 赞同：1
> 
> 时间：2013-04-05T17:33:11.573
> 
> 标签：javascript, forms, submit

这是一个奇怪的问题，我讨厌 iFrame，但我正在使用 PhoneGap 和 Codiqa 进行移动应用程序开发，而 Codiqa 输出 HTML，并且对于我想要合并到 Codiqa 的 HTML 中的所有外部表单，它会在 iframe 中加载。Codiqa 使用 div ID 引用，因此当您单击菜单项时，它会在 HTML 中加载该页面 ID，然后在父窗口中加载该 div 内的 iframe。此外，父窗口有自己的提交、重置和返回按钮。我需要这些按钮来调用和使用在 iFrame 内加载的页面中的功能......

显然，这与 parent.myfunction() 的工作方式完全相反，我想知道这是否可能，或者我是否需要重新创建我的代码而不使用 iFrame，但我不知道如何去做. PHP 包含并不能很好地工作我来找出...谢谢！或者也许我只需要将每个表单的所有 JS 文件移动到父文件夹中，并且必须单独链接到表单？我不知道...请指教。以下是其中一个页面 ID 的示例：

HTML (Codiqa)

```
<a href="#page17" data-transition="flip">
   Extracting
</a>

<div data-role="page" id="page17">
        <div data-theme="a" data-role="header">
            <h3>Extracting</h3>
        </div>
        <div data-role="content">
            <iframe src="extraction/extract_form.html"
            name="Cable_Extraction_Worksheet" class="contentiframe"></iframe>
        </div>
        <div data-role="tabbar" data-iconpos="left" data-theme="a">
            <ul>
                <li>
                    <a href="#page1" data-transition="flip" data-theme="" data-icon="arrow-l">
                  Back
              </a>
                </li>
                <li>
                    <a href="#" data-transition="none" data-theme="" data-icon="minus">
                  Reset
              </a>
                </li>
                <li>//THIS IS THE BUTTON, AND JS FUNCTION I NEED TO CALL ONCLICK
                    <a onclick="uploaddata();" data-transition="none" data-theme="" data-icon="check">
                  Submit
              </a>
                </li>
            </ul>
        </div>
    </div> 
```

IFRAME 的 JS 函数

```
function uploaddata() { 

//Read all of the data from the page
for (eID in extractform) {
    extractform[eID] = document.getElementById(eID).value;
}
        upload_extractform();
}
function upload_extractform() {
$.ajax({
    type: 'POST',
    url: './php/upload_extractform.php',
    data: extractform,
    async: false,
    dataType: 'text',
    success: function() {
        alert("Thank you. Your Extraction form has been submitted.");

},

        error: function(jqXHR, textStatus, errorThrown) {
        alert("Error... " + textStatus + "\n" + errorThrown);
    }
});
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T22:11:35.540

我想这就是我要找的：

onclick="document.getElementById('Cable_Extraction_Worksheet').contentWindow.uploaddata();"

这个靠谱吗？？有人说它不适用于所有浏览器或其中包含 Jquery 的功能，我的一些人这样做。只是想验证一下，谢谢。

# java - 标准差数组列表错误

> ID：15840007
> 
> 赞同：0
> 
> 时间：2013-04-05T17:33:12.273
> 
> 标签：java, arraylist, hashmap, standard-deviation

当我尝试检索单个值以在计算标准偏差的过程中找到方差时出现错误。我不知道是使用 .get() 还是 .getValue ，我迷路了。我已经计算了平均值。

```
final ArrayList<Map.Entry<String,NumberHolder>> entries = new ArrayList<Map.Entry<String,NumberHolder>>(uaCount.entrySet());

for(Map.Entry<String,NumberHolder> entry : entries)  //iterating over the sorted hashmap
{

    double temp = 0;
    double variance = 0;

    for (int i = 0; i <= entry.getValue().occurrences ; i ++)
        {               
            temp += ((entry.getValue(i).singleValues) - average)*((entry.getValue(i).singleValues) - average);

            variance = temp/entry.getValue().occurrences;
        }

        double stdDev = Math.sqrt(variance); 
```

这是我的 NumberHolder 类，我填充在我的主要功能中。我使用这个方程来计算标准偏差： http: [//www.mathsisfun.com/data/standard-deviation-formulas.html](http://www.mathsisfun.com/data/standard-deviation-formulas.html)

根据我的代码，出现次数是 N 并且来自 singleValues 数组列表的值是 Xi

```
public static class NumberHolder
{
    public int occurrences = 0;
    public int sumtime_in_milliseconds = 0; 
    public ArrayList<Long> singleValues = new ArrayList<Long>();
} 
```

这是我得到的错误。：

```
The method getValue() in the type Map.Entry<String,series3.NumberHolder> is not applicable for the arguments (int). 
```

如果您需要查看更多代码，请询问，我不想放任何不必要的东西，但我可能错过了一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T17:37:50.940

错误的意思正是它所说的。您不能将 int 参数传递给`getValue()`.

更改`entry.getValue(i)`为`entry.getValue()`，它应该可以正常工作。

我想这`entry.getValue().singleValues.get(i)`就是你想要的。如果`occurrences`总是等于`entry.getValue().singleValues.size()`考虑摆脱它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T17:38:02.033

[getValue](http://docs.oracle.com/javase/7/docs/api/java/util/Map.Entry.html#getValue%28%29)不接受整数参数。您可以使用：

```
for (int i = 0; i < entry.getValue().singleValues.size(); i++) {
   Long singleValue = entry.getValue().singleValues.get(i);
   temp += (singleValue - average) * (singleValue - average);

   variance = temp / entry.getValue().occurrences;
} 
```

也是`ArrayLists`从零开始的，所以你应该以`size - 1`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T17:39:03.283

您不能`int`将[`Map.Entry#getValue()`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.Entry.html#getValue%28%29). 所以在你的代码中它应该是`entry.getValue()` *而不是* `entry.getValue(i)`. 现在除此之外，你`singleValues`是一个`ArrayList`. 所以你不能从`average`line 中的整数中减去它`(entry.getValue(i).singleValues) - average)`。您必须首先从 中提取元素`ArrayList`，然后从 中减去它`average`。你的 for 循环应该是这样的：

```
for (int i = 0; i < entry.getValue().occurrences ; i ++)// i < entry.getValue() to avoid IndexOutOfBoundsException
{               
   temp += ((entry.getValue().singleValues.get(i)) - average)*((entry.getValue().singleValues.get(i)) - average);
   variance = temp/entry.getValue().occurrences;
} 
```

# macos - 撤消 git clean 命令？

> ID：15840009
> 
> 赞同：3
> 
> 时间：2013-04-05T17:33:17.077
> 
> 标签：macos, git, git-clean

我只是使用了“git clean”命令并设法删除了我的 Documents、Music 和其他目录。有没有办法撤消这个并以某种方式取回这些文件？我是通过 Mac 上的终端完成的。Time Machine 也没有设置。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T17:36:44.843

恐怕那些文件不见了。`git clean`不可逆，因为 git 没有跟踪这些文件。

从评论看来，您的主文件夹是 git repo，但没有任何跟踪。

运行`git clean -f`删除主文件夹中的**任何**文件（包括子目录中的文件），只留下空子目录（`-d`删除它们也需要该选项）。

很遗憾地通知您，您确实清除了整个主目录。下次运行时，请`git clean`使用这些`-n`选项进行试运行，并在为时已晚之前检查会发生什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T17:36:13.013

不幸的是`git clean`删除了所有未跟踪的文件，这意味着被删除的文件无法使用 git 恢复。您也许可以检查您的垃圾箱以查看文件是否仍然存在。

# css - 百分比宽度问题

> ID：15840015
> 
> 赞同：1
> 
> 时间：2013-04-05T17:33:29.907
> 
> 标签：css, layout

我有一个包含另外 3 个 div 的主 div，每个内部 div 被分成 20% 50% 和 30% 的宽度。我遇到了一个问题，当将窗口调整为更小的尺寸时，我得到了所有元素调整大小的挤压效果，但是我想将元素 1 和 3 保持在某些尺寸（分别为 40 像素和 75 像素）。我尝试将元素 1 设置为 40px，将元素 2 设置为 100%，将元素 3 设置为 75px 宽度，但最终让元素 2 占据所有空间并将其他元素推出。我将包含我不想实现的正常状态、调整大小状态和所需状态（调整大小）的图像。我怎样才能实现它？

![在此处输入图像描述](https://i.stack.imgur.com/Z94Mu.png)

如您所见，我只希望中间部分（元素 2）在调整窗口大小时调整大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:42:45.410

```
 <div class="div-contain"> 
       <div class="div-1"><div>
       <div class="div-2"><div>
       <div class="div-3"><div>
     <div>

.div-contain {
     position: relative;
}

.div-1 {
   width: 20%;
   min-width: 40px;
   float: left;
}

.div-2 {
    width: 50%;
    position: abosolute;
    margin: 0 auto;
}

.div-3 {
      width: 30%;
      min-width:75px;
      float: right;
} 
```

您还可以使用媒体查询并在到达断点时直接指定宽度。向中心 div 添加边距 左侧 div 的大小

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T18:00:08.043

我不知道这是否适合你，但基本上我将所有三个内部 div 都`absolute`定位了。并且必须使用 calc 来计算中间 div 的宽度。不使用 calc 可能会有更好的解决方案，但这就是我此时想到的。

[http://jsfiddle.net/btevfik/VRU8V/](http://jsfiddle.net/btevfik/VRU8V/)

```
body{
    margin:0;
}

.container {
    height:20px;
    position:relative;
}

.div1 {
   width: 40px;
   position:absolute;
   left:0;
   border:1px solid blue;
}

.div2 {
   width: calc(100% - 120px);
   position:absolute;
   left:40px;    
   border:1px solid red;
}

.div3 {
   width: 75px;
   position:absolute;
   right:0;
   border:1px solid yellow;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T18:16:34.233

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style type="text/css">
body{
    margin:0;
    padding:0;
}

.wrapper{
    width:100%;
    height:400px;
    display:table;
}

#n1{
    width:20%;
    min-width:40px;
    background:red;
    display:table-cell;
}

#n2{
    width:50%;
    background:green;
    display:table-cell;
}

#n3{
    width:30%;
    min-width:75px;
    background:blue;
    display:table-cell;
}
</style>
<script type="text/javascript">
window.onload = function()
{
    document.getElementById('n1i').value = document.getElementById('n1').offsetWidth;
    document.getElementById('n2i').value = document.getElementById('n2').offsetWidth;
    document.getElementById('n3i').value = document.getElementById('n3').offsetWidth;
}

window.onresize = function()
{
    document.getElementById('n1i').value = document.getElementById('n1').offsetWidth;
    document.getElementById('n2i').value = document.getElementById('n2').offsetWidth;
    document.getElementById('n3i').value = document.getElementById('n3').offsetWidth;
}
</script>
</head>

<body>

<div class="wrapper">

    <div id="n1">
        &nbsp;
    </div>

    <div id="n2">
        &nbsp;
    </div>

    <div id="n3">
        &nbsp;
    </div>

</div>

First div width:<br />
<input type="text" id="n1i" readonly="true" /><br />

<br />

Second div width:<br />
<input type="text" id="n2i" readonly="true" /><br />

<br />

Third div width:<br />
<input type="text" id="n3i" readonly="true" />

</body>
</html> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T18:20:06.670

最简单的方法可能是完全取消元素 2 并将其内容直接放在 parent`div`中。然后你可以浮动元素 1 和 2，当页面调整大小时，只有它们之间的空间会改变：

```
<style type="text/css">
    #parent {position:relative;width:100%;height:100%;}
    #parent div {position:relative;height:100%;}
    #element1 {width:40px;float:left;}
    #element3 {width:75px;float:right;}
</style>

<div id="parent">
    <div id="element1"></div>
    <div id="element3"></div>
    <!-- Place the contents of element 2 here -->
</div> 
```

# javascript - 如何将此 ajax 代码更改为长轮询

> ID：15840016
> 
> 赞同：1
> 
> 时间：2013-04-05T17:33:32.997
> 
> 标签：javascript, ajax, long-polling

这是我的 ajax 代码，所以请谁能告诉我如何将此代码更改为长轮询？

这是我的代码：-

```
var chat = {}
chat.fetchMessages = function () {
  $.ajax({
    url: 'ajax/ajax/chat.php',
    type: 'POST',
    data: { method: 'fetch' },
    success: function(data) {
      $('#chats').html(data);
    }
  }); 
}
chat.interval = setInterval(chat.fetchMessages, 1000); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T17:51:31.710

您必须将 fetchMessage 的下一个调用放在前一个的回调中：

```
var chat = {}
chat.fetchMessages = function () {
  $.ajax({
    url: 'ajax/ajax/chat.php',
    type: 'POST',
    data: { method: 'fetch' },
    success: function(data) {
      $('#chats').html(data);
      chat.fetchMessages(); // let's do it again
    }
  }); 
}
chat.fetchMessages(); // first call 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T12:20:24.863

The above code seems to work fine but this will call function immediately as a result of this it would increase the traffic and possibly for continuous long polling memory usage by the browser will increase . Try to use settimeout to keep some duration between calls made , would be good if you clear cache too . Other option would be comet or signaR .

# java - 拉力赛：最近java应用程序开始抛出异常

> ID：15840018
> 
> 赞同：0
> 
> 时间：2013-04-05T17:33:47.127
> 
> 标签：java, rally

大约两周后，我开始使用我的 java 应用程序，现在每次运行它时都会看到以下异常：

```
Exception in thread "main" java.io.IOException: HTTP/1.1 500 Internal Server Error
    at com.rallydev.rest.RallyRestApi.doRequest(RallyRestApi.java:258)
    at com.rallydev.rest.RallyRestApi.doPost(RallyRestApi.java:276)
    at com.rallydev.rest.RallyRestApi.update(RallyRestApi.java:155)
    at ExportTRtoRally.testresult_to_testset(ExportTRtoRally.java:273)
    at ExportTRtoRally.main(ExportTRtoRally.java:453) 
```

如上所示，将测试结果添加到测试集中时会发生这种情况。该应用程序过去一直运行良好。有谁知道它的原因？

这是 testresult_to_testset() 方法：

```
public static void testresult_to_testset(RallyRestApi r, ArrayList<String> testres_refs,      String testset_ref) throws IOException{

    System.out.println("\n--------------------------------\nAdding test results to the testset...");
    for (String i2 : testres_refs){
        JsonObject tingo2 = new JsonObject();
        tingo2.addProperty("TestSet", testset_ref);
        UpdateRequest req = new UpdateRequest(i2, tingo2);
        UpdateResponse resp = r.update(req);
        if(resp.wasSuccessful())
            System.out.println(resp.getObject().get("_ref").getAsString());
    }
    System.out.println("----------------------------------\nTestResults successfully added to TestSet\n----------------------------------");
} 
```

谢谢，哈里斯

# java - 实现 Java 比较器

> ID：15840021
> 
> 赞同：16
> 
> 时间：2013-04-05T17:33:55.390
> 
> 标签：java, implementation, priority-queue, comparator

我正在尝试编写一个利用最小优先级队列的算法，所以我在谷歌上环顾四周，找到了 PriorityQueue。不过，似乎为了使用它，我需要告诉它我希望它如何优先排序，并且这样做的方法是使用比较器（我想比较我的“Node1”的特定数据字段对象）。更多的谷歌搜索提出了创建一个新的比较器的想法，它实现了 Comparator 但覆盖了 compare 方法。我正在尝试的是这个（以及它的其他变体）：

```
import java.util.Comparator;

public class distComparator implements Comparator {

    @Override
    public int compare(Node1 x, Node1 y){
        if(x.dist<y.dist){
            return -1;
        }
        if(x.dist>y.dist){
            return 1;
        }
        return 0;
    }
} 
```

编译器有几个理由提出抗议，其中之一是我没有覆盖比较器类（它说它是抽象的）

> 错误：distComparator 不是抽象的，并且不会覆盖 Comparator 中的抽象方法 compare(Object,Object)

我已将其切换为“比较（对象 x，对象 y）”，它可以解决该问题。在这一点上，尽管编译器抱怨它在 x 或 y 中找不到“dist”变量——这是有道理的，因为它们是我的 Node1 类的一部分，而不是 Object 类。

那么这应该如何工作呢？显然，它应该有 type `Object`，但是我如何将它定向到正确的变量？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-05T17:42:33.163

您需要实施`Comparator<Node1>`：

```
public class distComparator implements Comparator<Node1> {
                                                 ^^^^^^^ 
```

没有这个，你正在实现`Comparator<Object>`，这不是你想要的（它可以工作，但不值得麻烦）。

您问题中的其余代码都很好，只要`Node1`有一个名为`dist`.

请注意，如果您使用的是 Java 7，则可以将方法的整个主体替换为

```
return Integer.compare(x.dist, y.dist); 
```

（替换`Integer`为`Double`etc，取决于 的类型`Node1.dist`。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T18:01:30.170

正如您[在此处（JSE Comparator JavaDoc 页面）](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)所看到的，该`Comparator`接口具有一个通用“参数”，描述了该比较器所针对的类型。[PriorityQueue](http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html)类似。

所以，如果你创建一个`PriorityQueue<Node1>`，你可以创建一个`Comparator<Node1>`如下：

```
public class distComparator implements Comparator<Node1> {    
    @Override
    public int compare(Node1 x, Node1 y){
        return x.dist - y.dist;
    }
} 
```

# python - Flask 自定义路由

> ID：15840024
> 
> 赞同：0
> 
> 时间：2013-04-05T17:34:22.413
> 
> 标签：python, routing, flask

假设我在 Flask 中定义用户个人资料页面：

```
@app.route('/user/<name>')
def user(name):
    do stuff 
```

我想更改路由规则，以便我可以在 中放置多个名称`<name>`，例如`<name, location>`以该名称和位置（由 /user/James-Oregon 给出的 url）翻译给用户。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T20:25:22.040

如果我理解正确，您正在寻找...

```
@app.route('/user/<name>-<location>')
def user(name, location):
    # do stuff... 
```

使用 URL`/user/James-Oregon`时，您应该得到“詹姆斯”`name`和“俄勒冈” `location`。

请注意，flask 很大程度上是基于[Werkzeug](http://werkzeug.pocoo.org/)构建的，因此请务必查看[Werkzeug 路由文档](http://werkzeug.pocoo.org/docs/routing/)。

# php - php 语法错误，意外 $end 第 36 行

> ID：15840027
> 
> 赞同：-4
> 
> 时间：2013-04-05T17:34:43.973
> 
> 标签：php

好的，最初的建议似乎有效。他们没有像以前那样的错误代码。但现在它告诉我它的结局并不好。我尝试了多种语法，但似乎没有任何效果。和一个 IF 把它拿走......甚至删除`<? end if ?>`或诸如此类。有任何想法吗？

```
<?php
$correct = true;
if ($_GET["firstname"] == "")
    $correct = false;
if (preg_match("/^.+@\w+\.\w{2,4}$/", $_GET["email"]))
    $correct = false;

$to = "sample@domain.com";
$subject = "Application request";

$message = "A new request has come in!\n\n";
$message .= $_GET["firstname"];
$message .= $_GET["lastname"];"\n";
$message .= $_GET["email"];"\n";
$message .= $_GET["phone"];"\n";
$message .= $_GET["dropdown"];"\n";
$message .= $_GET["address"];"\n";
$message .= $_GET["dropdown2"];"\n";
$message .= $_GET["textarea"];"\n";

?>
<html>
<head>
    <title>something funky
    </title>
</head>
<body>
<?php if ($correct): ?>
Thank you for applying. We will get back to you shortly.<br>
<?php else: ?>
Please complete the form.
<?php end ?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T17:37:42.343

改变

```
<?php end ?> 
```

经过

```
<?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T17:38:27.977

你的代码：

```
$message .= $_GET["lastname"];"\n"; 
```

您必须用点字符替换分号：

```
$message .= $_GET["lastname"] . "\n"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T17:37:35.103

你错过了`endif`。尝试这个，

```
 <?php if ($correct): ?>
    Thank you for applying. We will get back to you shortly.<br>
    <?php else: ?>
    Please complete the form.
    <?php endif; ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T17:37:35.893

改变

```
<?php if ($correct): ?>
Thank you for applying. We will get back to you shortly.<br>
<?php else: ?>
Please complete the form.
<?php end ?> 
```

至

```
if($correct){
// thank you for ...
}

else{
// please complete
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T17:48:49.533

所以你可以使用它：

```
<body>
<?php if ($correct) { ?>
Thank you for applying. We will get back to you shortly.<br>
<?php } else { ?>
Please complete the form.
<?php } ?>
</body> 
```

它不整洁，但效果很好

你也可以这样写

```
<body>
<?php
if ($correct) echo "Thank you for applying. We will get back to you shortly.<br>";
else echo "Please complete the form.";
?>
</body> 
```

# jsf - 如何在 JSF Managed bean 中访问 ServletConfig

> ID：15840031
> 
> 赞同：2
> 
> 时间：2013-04-05T17:34:50.877
> 
> 标签：jsf, jsf-2, managed-bean, servletconfig

目前，我正在尝试将[Confident CAPTCHA](http://www.confidenttechnologies.com/products/confident-captcha)集成到我的 JSF 项目中。该类的构造函数`ConfidentCaptchaClient`如下：

```
public ConfidentCaptchaClient(String settingsXmlFilePath, HttpServletRequest request, javax.servlet.ServletConfig servletConfig) 
```

这需要一个`ServletConfig`论据。如何在托管 bean 中获取它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T07:50:17.547

这是一个黑客。什么[`ServletConfig`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletConfig.html)是，基本上是一个包含 a 参数的对象`Servlet`。您会在[`ServletRegistration`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRegistration.html)界面中找到几乎相同的方法和信息。因此，如果您将配置参数从`ServletContext`自身中提取出来并填充到`ServletConfig`. 尝试这个：

1.  检索`ServletContext`对象

    ```
    FacesContext facesContext = FacesContext.getCurrentInstance();
    ServletContext servletContext =  (ServletContext) context.getExternalContext(); // Your servlet context here 
    ```

2.  从 servlet 上下文中，获取所需 servlet 的 servlet 注册对象

    ```
    ServletRegistration reg =   servletContext.getServletRegistration("theServlet"); //ServletRegistration contains all the info you'll need to populate a custom ServletConfig object 
    ```

3.  使用您从 (2) 中获得的信息来填充的自定义 impl`ServletConfig`

    ```
    ServletConfig myServletConfig = new MyCustomServletConfig();
    myServletConfig.setInitParams(reg.getInitParameters()); //do a simple transfer of content 
    ```

最后一步是过度简化，但你会明白的。

如果您运行的是以前版本的 Java EE（3.0 之前），您将可以访问`ServletContext#getServlet()`现在已弃用的版本。

# objective-c - 包含在嵌入导航控制器的视图控制器中时，UIScrollView 不滚动

> ID：15840043
> 
> 赞同：1
> 
> 时间：2013-04-05T17:35:27.213
> 
> 标签：objective-c

我制作了一个嵌入导航控制器的视图控制器。在视图控制器中，我插入了一个包含一些按钮和文本字段的滚动视图。在该`viewDidLoad`方法中，我插入了以下代码来初始化`scrollView`：

```
[scroller setScrollEnabled:YES];
[scroller setContentSize:CGSizeMake:(1000, 1000)]; 
```

但视图不滚动。我尝试了相同的场景，但没有将视图控制器嵌入导航控制器并且它正在工作。有谁知道这个问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:32:21.607

把这个写在`viewDidAppear`. UI 组件不会完全设置在`viewDidLoad`

尝试，

```
-(void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    [scroller setScrollEnabled:YES];
    [scroller setContentSize:CGSizeMake:(1000, 1000)];
} 
```

应该管用 。

# java - 包含包含 .jars 的 libs 文件夹以进行编译

> ID：15840045
> 
> 赞同：0
> 
> 时间：2013-04-05T17:35:35.777
> 
> 标签：java, ant, compilation, classpath, javac

我有以下文件结构：

```
ServerCode <- src , libs, bin 
```

我正在尝试编译 src 中的所有代码。Src 在顶层和子目录中有几个 .java 文件。libs 包含构建我的项目所需的所有 .jar 文件。

我编写了以下 build.xml，但是当我尝试编译它时，编译器会抛出错误，找不到我所包含的库的符号错误。

```
<project default="compile">
    <target name="compile">
        <mkdir dir="bin"/>
        <javac srcdir="src" destdir="bin" classpath="libs/*.jar">
    </target>
</project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:47:36.723

定义类路径以包含所有像这样的 jar

```
<target name="compile" depends=""   description="compile the java source files">  
   <javac srcdir="." destdir="${build}">  
        <classpath>  
            <fileset dir="${lib}">  
                <include name="**/*.jar" />  
            </fileset>  
            <fileset dir="${test_lib}">  
                <include name="**/*.jar" />  
            </fileset>  
        </classpath>  
    </javac> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T17:44:08.627

我认为您不能在类路径属性中使用模式。我可能错了。您应该以详细模式（-v 选项）运行 ant 以查看它如何使用您的类路径属性。我怀疑它是将它作为文字字符串传递给 javac 。

这就是我所做的：

```
<javac target="${javac.target}" source="${javac.source}" destdir="${validator.output.dir}" debug="on"
       nowarn="off"
       memorymaximumsize="128m" fork="true">
    <classpath refid="validator.module.production.classpath"/>
    <src>
        <dirset dir="Validator">
            <include name="src"/>
        </dirset>
    </src>
</javac> 
```

...

```
<path id="validator.module.production.classpath">
    <fileset dir="Validator/lib/-validator" includes="**/*.jar"/>
</path> 
```

其中一些代码是由我的 IDE 生成的，所以有点冗长，但你明白了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T17:47:39.223

[按照http://ant.apache.org/manual/using.html](http://ant.apache.org/manual/using.html)中提到的方法尝试此操作，而不是与 javac 一起提供 classPath 属性

```
 <classpath>
      <pathelement location="libs/*.jar"/>
    </classpath> 
```

您还可以通过上述链接浏览其他方式

# matlab - MATLAB 图窗中的多个 Y 轴标签

> ID：15840046
> 
> 赞同：-2
> 
> 时间：2013-04-05T17:35:37.963
> 
> 标签：matlab, matlab-figure

好的，例如我的一个数据的数值很大，而我的一个数据的数值很小。

```
A = [130000 310000 200000 400000]';
B = [16 32 5 10]'; 
```

我正在做以下事情。

```
figure;
bar(1:4,[A B],0.5,'stack'); 
```

由于 的值`A`比 高很多`B`，我想要一个辅助`y`轴。否则，`B`在堆积条形图上看不到 的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T18:44:10.867

您可以使用`plotyy`在同一图中的不同 y 轴上绘制两个条形图。

```
x = [1,2,3];
y1 = [1000,2000,3000];
y2 = [0.5,0.3,0.1];
[AX,H1,H2] = plotyy(x, y1, x, y2, 'bar', 'bar');
set(H1, 'FaceColor', [1 0 0], 'BarWidth', 1) 
```

这不是您之前使用的堆叠条形图（一组数据垂直位于另一组之上），但在堆叠条形图中包含不同比例的数据是没有意义的。

# javascript - 吊装后的价值？

> ID：15840048
> 
> 赞同：-7
> 
> 时间：2013-04-05T17:35:54.373
> 
> 标签：javascript, function, expression, hoisting

问题：吊起来之后，bar的价值是多少？

```
var bar = function() {
return 3;
}; 
```

我认为：函数表达式。我错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T17:37:26.733

为什么不试试呢？

```
var bar = function() {
    return 3;
 };

console.log(bar); 
```

输出，

```
 function () {
    return 3;
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T12:56:11.480

如果您尝试使用未定义的变量，那么这当然会引发引用错误。如果您尝试分配给未定义的变量，那么它将创建一个全局变量（在网页中，大致相当于写作`window.foo = bar;`）。但是，该变量在创建之前仍然是未定义的。

`const`但是，如果您使用or声明局部变量`var`，那么它将从函数的开头定义为具有 value `undefined`，因此“早期”访问变量不会引发引用错误，并且设置它将设置局部值。您不必在函数开始时声明变量；声明将被*提升*到函数的范围。

相比之下，在 ES6 中，如果你使用 声明一个变量`let`，那么它只会被提升到块的开头。

此外，如果您使用 声明“变量” `function`，那么它的值也会被提升，因此您可以在声明之前调用函数。（该函数必须在同一个脚本中。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T17:38:15.593

确实是功能。所以，是的，你是对的。

# php - Yii 框架 - 导航栏选项中的 Twiiter Bootstrap TbMenu

> ID：15840053
> 
> 赞同：1
> 
> 时间：2013-04-05T17:36:04.477
> 
> 标签：php, twitter-bootstrap, yii

我开始研究 Yii 和 PHP，并且正在使用[cniska.net 的这个 Twitter Bootstrap](http://www.cniska.net/yii-bootstrap/) 并且能够使其工作。

但是，我发现使其按我想要的方式工作时遇到了一些困难。并且在文档中没有发现任何有用的东西，尽管我可能错过了一些东西。

我有这样的*导航栏*：

```
 $this->widget('bootstrap.widgets.TbNavbar', array(
          'brand'=>'XPTO',
          'brandUrl'=>'#',
          'fixed' => 'top',
          'collapse'=>true, // requires bootstrap-responsive.css
          'items'=>array(
              array(
                  'class'=>'bootstrap.widgets.TbMenu',
                  'items'=>array(
                      array('label'=>'1st Link', 'url'=>'#', 'active'=>true),
                      array('label'=>'2nd Link', 'url'=>'#'),
                      array('label'=>'3rd Link', 'url'=>'#'),
                      array('label'=>'4thLink', 'url'=>'#'),
                  ),
              ),
(..) 
```

**所以，对于我的两个问题中的第一个：**

在下面`'brand'=>'XPTO'`，是否可以输入图像的路径？例如标志？我知道我可以尝试输入图像路径，但图像并排如何？（这将避免我创建和包含 2 的图像）。

**第二：**

我想根据我点击的链接在我的布局中操作和添加页面移动，因此，*我想将**'id'**属性添加到每个**'li'**，***所以最终结果将是***：

`<li class="active" id="xyz"><a href="#"> Link Text </a></li>`

我试过了

`array('label'=>'2nd Link', 'url'=>'#', 'id'=>'xyz'),`

和

`array('label'=>'2nd Link', 'url'=>'#', 'htmlOptions'=>array( 'id'=>'xyz'),),`

但没有成功。

有小费吗？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T18:30:32.390

要使图像正常工作，只需在品牌名称中嵌入图像，如下所示：

```
'brand'=>'<img src="path_to_img.jpg"/>" 
```

至于你的第二个问题，我只花了 20 分钟搜索了源代码，[发现](https://bitbucket.org/Crisu83/yii-bootstrap/src/a4dff3c27389/widgets/TbBaseMenu.php?at=default#cl-54)当一个项目`'itemOptions'`有. 所以要添加一个 id 使用：`'htmlOptions'``htmlOptions`

```
array('label'=>'First Link', 'url'=>"#", 'itemOptions'=>array('id' => 'xyz')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-26T19:09:40.277

在 Yiistrap 中，一些属性发生了变化。

你应该在那里使用

```
'brandLabel' => CHtml::image(Yii::app()->getBaseUrl() . '/images/logo.png', 'Logo', array('width' => '37', 'height' => '37')),

'brandUrl' => 'http://www.someurl.com', 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-02T16:04:34.953

而不是brandLabel的形象只是使用品牌..

# javascript - 奇怪的 IE9 只有错误 Backbone.js

> ID：15840055
> 
> 赞同：0
> 
> 时间：2013-04-05T17:36:08.037
> 
> 标签：javascript, internet-explorer-9, jquery-isotope

我们遇到了一个非常奇怪且令人困惑的错误，该错误阻止了某些 Javascript 的呈现。我用谷歌搜索，似乎找不到解决方案，我知道这很模糊，但我想我会问。

该问题仅在 IE9 中发生。我们认为它正在阻止我们的其他脚本运行，并且可能与 Backbone 无关。

```
SCRIPT5007: Unable to get value of the property 'apply': object is null or undefined 
application.js, line 86 character 2366 
```

非常感谢任何人对此的帮助，这真的难倒我们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:33:17.817

在呈现 JS 之前将其添加到文档的 head 部分可以解决问题！

```
<meta http-equiv="X-UA-Compatible" content="IE=8"> 
```

# c++ - Xml 解析器 - string::find

> ID：15840058
> 
> 赞同：0
> 
> 时间：2013-04-05T17:36:17.387
> 
> 标签：c++, string

我正在尝试解析一个包含我的 XML 文件行的字符串。

```
std::string temp = "<Album>Underclass Hero</Album>";
int f = temp.find(">");
int l = temp.find("</");
std::string _line = temp.substr(f + 1, l-2); 
```

这是我的函数代码的一部分，它实际上应该返回解析的字符串。我所期望的是它会返回*Underclass Hero*。相反，我得到了*Underclass Hero< /Alb*
（这里在 '<' 和 '/' 之间有一个空格，因为我无法将它们写在一起）。

我看了 std::string::find 几次，它总是说它返回（如果存在）第一个匹配的第一个字符的位置。在这里，它给了我字符串的最后一个字符，但只在我的变量*l*中。
*f*没问题。

[链接到 std::string::find](http://www.cplusplus.com/reference/string/string/find/)

那么谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T17:37:39.877

[`substr`](http://en.cppreference.com/w/cpp/string/basic_string/substr)将长度作为第二个参数，而不是结束位置。尝试：

```
temp.substr(f + 1, l-f-1); 
```

另外，请考虑使用真正的 XML 解析器，不要自己尝试或通过[其他不适当的方式](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)尝试。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-05T17:38:35.790

第二个参数采用您要提取的子字符串的长度。您可以通过以下方式修复代码：

```
#include <string>
#include <iostream>

int main()
{
    std::string temp = "<Album>Underclass Hero</Album>";
    int f = temp.find(">");
    int l = temp.find("</");
    std::string line = temp.substr(f + 1, l - f - 1);   
    //                                    ^^^^^^^^^
} 
```

这是一个[活生生的例子](http://liveworkspace.org/code/3SRz1U$78)。

此外，请注意名称，例如`_line`. 根据 C++11 标准的第 17.6.4.3.2/1 段：

> [...] 每个以下划线开头的名称都保留给实现，用作全局名称空间中的名称。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-05T19:29:58.767

不要这样做！

'*解析*''*行*'的 XML 文件迟早会因您的尝试而失败。示例：以下是有效的 XML，但您的代码将失败：

```
<Album>Underclass Hero<!-- What about </ this --></Album> 
```

PS：**请**尽可能使用`const`：

```
std::string const temp = ...
// ...
std::string const line = ... 
```

# android - Android AsyncTask 问题：doInBackground 不执行

> ID：15840061
> 
> 赞同：0
> 
> 时间：2013-04-05T17:36:35.000
> 
> 标签：android, service, android-asynctask, broadcastreceiver

我在我的 android 应用程序中使用 AsyncTasks。

当我必须通过设置`Service`（AlarmManager）`BroadcastReceiver`并退出应用程序并重新打开应用程序时，AsyncTask 只是不执行。

我该如何解决？我想是有一些线程或任务没有完成，导致这种问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T17:44:06.757

这可能是因为从 Honeycomb 开始（以及在 Donut 之前）[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)是在单个线程上连续执行的。您是否还有其他长期运行的 AsyncTasks 可能会阻止新的 AsyncTasks？

# asp.net - 选项卡面板内的 asp.net 和 google 地图

> ID：15840064
> 
> 赞同：0
> 
> 时间：2013-04-05T17:36:44.950
> 
> 标签：asp.net, maps, tabpanel

我在标签面板内的地图上有问题。这就是我展示的内容： [http](http://www.pixelfarm.it/gmaps.png) ://www.pixelfarm.it/gmaps.png 如果我调整浏览器窗口的大小，一切正常。我该如何解决这个问题？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-25T21:40:48.803

我所做的是创建一个函数 JavaScript：

```
function resize() {
                google.maps.event.trigger(map, 'resize');
} 
```

然后是您添加属性的 TabContainer：

```
OnClientActiveTabChanged="resize
     <asp:TabContainer ID="tcEntidades" runat="server" ActiveTabIndex="0"   OnClientActiveTabChanged="resize"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T17:52:40.793

每当用户单击地图的选项卡时，您都需要触发调整大小功能...这是一个基本代码...它可能会对您有所帮助

```
$(document).ready(function(){
  $('#maptab').bind('onClick', function() {
    google.maps.event.trigger(map, 'resize');
  });
}); 
```

# clojure - 什么是 Leiningen2、Clojure 和 Ring 的优秀 Web 服务教程？

> ID：15840069
> 
> 赞同：3
> 
> 时间：2013-04-05T17:36:51.843
> 
> 标签：clojure, leiningen, compojure, ring

我正在尝试学习如何在 clojure 中创建 Web 服务，并且我正在寻找有助于说明该过程的教程。我是clojure的新手。似乎每个教程都针对之前版本的 leiningen 或 compojure 等，但没有一个真正给出如何做的好主意。对此有何建议？从使用 leiningen 2.1.2 开始，有教程教我如何创建 Web 服务吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T17:50:18.493

至于使用 ring 和 compojure，我认为 leiningen 2.0.x 和 2.1.x 之间没有区别，因此使用提及该工具旧版本的教程可能很好。

[在这个SO 问题](https://stackoverflow.com/questions/3122749/good-current-documentation-and-or-tutorials-for-compojure-ring-development)上提到了一些不错的教程虽然我目前的个人建议转到[Clojure Programming中关于 web programmin 的章节](http://www.clojurebook.com/)

# apache - symfony : 在线服务器上的应用程序移动

> ID：15840071
> 
> 赞同：1
> 
> 时间：2013-04-05T17:37:08.983
> 
> 标签：apache, symfony-1.4

我有一个非常简单的问题，我用 symfony 1.4 创建了我的网站，我还创建了三个应用程序：

*   应用程序/前端 ==>example.com

*   应用程序/后端 ==> example.com/backend.php

*   应用程序/移动 ==> mobile.example.com

对于前端和后端在线路服务器上工作正常，但对于移动版本，我正确创建了一个子域（mobile.example.com），但这是我的问题。

当我浏览链接 mobile.exemple.com 时，如何在线配置 symfony 或服务器以直接访问移动应用程序？

我的意思是我的所有项目都在 example.com 文件夹中，而不是在 subdomain(mobile.exemple.com) 文件夹中。

任何的想法？

编辑 ：

我希望不同应用程序的子域不是一个应用程序中的不同模块！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:53:26.983

此[问题中指向](https://stackoverflow.com/questions/6678103/dynamic-subdomains-in-symfony-1-4)[symfony 博客](http://symfony.com/blog/call-the-expert-adding-subdomain-requirements-to-routing-yml)的链接表明您可以为此使用 sfRequestRoute 配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T16:30:33.363

我找到了一个很好的解决方案，而且比使用 sfRequestRoute 配置简单，最后对我来说：

我为不同的 symfony 应用程序更改子域，只是为了让一个 index.php 控制你的项目。

```
<?php

 require_once(dirname(__FILE__).'/../config/ProjectConfiguration.class.php');

 switch ($_SERVER['HTTP_HOST']) { 

case 'm.example.com': $configuration =    ProjectConfiguration::getApplicationConfiguration( 'mobile', 'prod', false); break;

 case 'backend.example.com'.....

default: $configuration = ProjectConfiguration::getApplicationConfiguration( 'frontend', 'prod', false); break; 

}

sfContext::createInstance($configuration)->dispatch(); 
```

它完成了。

# asp.net-mvc - 方法的综合单元测试

> ID：15840076
> 
> 赞同：1
> 
> 时间：2013-04-05T17:37:31.143
> 
> 标签：asp.net-mvc, unit-testing, controller, moq, vs-unit-testing-framework

我有一个控制器方法 -`CurrentValues`

```
[HttpGet]
public ActionResult CurrentValues(ValueRetrieverViewModel valueRetrieverModel)
{
    int page = 0;
    if(!string.IsNullOrEmpty(valueRetrieverModel.Page))
    {
        int.TryParse(valueRetrieverModel.Page, out page);
    }

    if (page <= 0) page = 1;

    var values = GetValues(page);

    if (values != null)
    {
        if (values.QueryResults.Count > 0)
        {
            ViewData["name"] = valueRetrieverModel.Name; 
            ViewData["school"] = valueRetrieverModel.School;             
            ViewData["team"] = valueRetrieverModel.Team;
        }
    }

    var valRtrvrViewModel = new ValuesViewModel
    {
        Results = values,  
        InputParms = valueRetrieverModel
    };

    return View("CurrentValues", searchViewModel);
} 
```

我想通过使用 MS-VS-Unit 测试套件和如果需要 Moq 对这个控制器进行全面的单元测试。

此方法的核心是从 - 检索到的值`GetValues(page)`。

1.  我可以编写哪些测试来对此方法进行全面的单元测试？示例代码将与测试场景一起提供帮助。
2.  如何使用 Moq 模拟 ValueRetrieverViewModel？我应该或我可以将起订量用于这里的任何其他目的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T17:54:50.863

以下文章非常出色地详细解释了在测试控制器时应编写的所有测试，包括何时使用模拟框架。它也很短。 [http://www.arrangeactassert.com/how-to-unit-test-asp-net-mvc-controllers/](http://www.arrangeactassert.com/how-to-unit-test-asp-net-mvc-controllers/)

文章摘录：

> 让我首先讨论应该为 MVC 控制器创建哪些类型的单元测试。用于检查正确操作结果的测试从控制器操作返回。这包括有关操作结果的信息，例如针对视图结果返回正确视图的测试。
> 
> 测试以检查视图模型是否符合您的预期。如果您有一个需要类 foo 的强类型视图，并且您将类 bar 传递给您的视图模型，您的代码将编译，将导致运行时错误，如下所示。
> 
> 如果您正在测试比这更多的东西，那么您的控制器做的太多了。

# javascript - 如何在 iframe 上圆角

> ID：15840084
> 
> 赞同：0
> 
> 时间：2013-04-05T17:37:51.733
> 
> 标签：javascript, html, iframe

在任何人链接到它之前，这是我试图遵循的示例。

[圆形 iframe](http://search.missouristate.edu/map/mobile/examples/corners.htm)

我从字面上完全复制了代码，当我在所有不同的浏览器中加载它时，边缘仍然是方形的。

查看源代码后，我确实注意到了这一行

```
 .TopLeft, .TopRight, .BottomLeft, .BottomRight {position:absolute;z-index:1000;background-image: url(corners.png);width:20px;height:20px;} 
```

是我没有这些角落图片的问题吗？但是当我试图检查元素时，我可以找到“corners.png”，那里什么也没有。我真的很困惑。

这是整个代码

```
 <!--
Example taken from
http://search.missouristate.edu/map/mobile/examples/corners.htm
-->
<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Rounded Map Corners - Google Maps Javascript API v3</title>
<style>
    html, body {height: 100%; margin: 0;}
    #Container {position:relative;width:400px;margin:20px;}
    .TopLeft, .TopRight, .BottomLeft, .BottomRight {position:absolute;z-index:1000;background-image: url(corners.png);width:20px;height:20px;}
    .TopLeft {left: 0; top: 0;}
    .TopRight {right: 0; top: 0; background-position: top right;}
    .BottomRight {right: 0; bottom: 0; background-position: bottom right;}
    .BottomLeft {left: 0; bottom: 0; background-position: bottom left;}
    #map_canvas {width: 400px; height: 400px;}
</style>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">
var map;
function Initialize() {
    var MapOptions = {
        zoom: 15,
        center: new google.maps.LatLng(37.20084, -93.28121),
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        sensor: false
    };
    map = new google.maps.Map(document.getElementById("map_canvas"), MapOptions);
}
</script></head><body onload="Initialize()">
<div id="Container">
    <div class="TopLeft"></div>
    <div class="TopRight"></div>
    <div id="map_canvas"></div>
    <div class="BottomLeft"></div>
    <div class="BottomRight"></div>
</div>
</body></html> 
```

这个例子对其他人有用吗？或者当您复制并粘贴该代码时，您会得到与我相同的结果吗？

这是我的结果屏幕截图的链接。我试图将代码放在 jsFiddle 中，但它没有用。

[ImageShack 截图](http://img833.imageshack.us/img833/9065/mapsexample.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:40:24.130

为什么你没有得到`corners.png`. [因为您可以在这里](http://search.missouristate.edu/map/mobile/examples/corners.png)轻松下载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T17:41:41.237

corners.png 文件绝对是必需的。这是该示例站点的资产：[http ://search.missouristate.edu/map/mobile/examples/corners.png](http://search.missouristate.edu/map/mobile/examples/corners.png)

# for-loop - 在树枝 for 循环中选择上一个项目

> ID：15840089
> 
> 赞同：6
> 
> 时间：2013-04-05T17:38:03.833
> 
> 标签：for-loop, twig

我使用树枝并在数组中有一些数据。我使用 for 循环访问所有数据，如下所示：

```
{% for item in data %}
    Value : {{ item }}
{% endfor %} 
```

是否可以在循环中访问上一个项目？例如：当我在**n**项上时，我想访问**n-1**项。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-06T09:05:23.207

没有内置的方法可以做到这一点，但这里有一个解决方法：

```
{% set previous = false %}
{% for item in data %}
    Value : {{ item }}

    {% if previous %}
        {# use it #}
    {% endif %}

    {% set previous = item %}
{% endfor %} 
```

if 是第一次迭代所必需的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-29T16:29:25.860

除了@Maerlyn 的示例，这里是提供的代码`next_item` （当前代码之后的代码）

```
{# this template assumes that you use 'items' array 
and each element is called 'item' and you will get 
'previous_item' and 'next_item' variables, which may be NULL if not availble #}

{% set previous_item = null %}
{%if items|length > 1 %}
    {% set next_item = items[1] %}
{%else%}
    {% set next_item = null %}
{%endif%}

{%for item in items %}
    Item: {{ item }}

    {% if previous_item is not null %}
           Use previous item here: {{ previous_item }}    
    {%endif%}

    {%if next_item is not null %}
          Use next item here: {{ next_item }}    
    {%endif%}

    {# ------ code to udpate next_item and previous_item  elements #}
    {%set previous_item = item %}
    {%if loop.revindex <= 2 %}
       {% set next_item = null %}
    {%else%}
        {% set next_item = items[loop.index0+2] %}
    {%endif%}
{%endfor%} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-16T08:11:15.867

我的解决方案：

```
{% for item in items %}

  <p>item itself: {{ item }}</p>

  {% if loop.length > 1 %}
    {% if loop.first == false %}
      {% set previous_item = items[loop.index0 - 1] %}
      <p>previous item: {{ previous_item }}</p>
    {% endif %}

    {% if loop.last == false %}
      {% set next_item = items[loop.index0 + 1] %}
      <p>next item: {{ next_item }}</p>
    {% endif %}

  {% else %}

    <p>There is only one item.</p>

  {% endif %}
{% endfor %} 
```

* * *

我必须制作无尽的图片库，在第一个项目到最后一个之前和最后一个项目之后到第一个。可以这样做：

```
{% for item in items %}

  <p>item itself: {{ item }}</p>

  {% if loop.length > 1 %}
    {% if loop.first %}
      {% set previous_item = items[loop.length - 1] %}
    {% else %}
      {% set previous_item = items[loop.index0 - 1] %}
    {% endif %}

    {% if loop.last %}
      {% set next_item = items[0] %}
    {% else %}
      {% set next_item = items[loop.index0 + 1] %}
    {% endif %}

    <p>previous item: {{ previous_item }}</p>
    <p>next item: {{ next_item }}</p>

  {% else %}

    <p>There is only one item.</p>

  {% endif %}
{% endfor %} 
```

# asp.net - 如何在 ASPX 页面上调用 ASCX 页面函数？

> ID：15840090
> 
> 赞同：0
> 
> 时间：2013-04-05T17:38:05.563
> 
> 标签：asp.net, vb.net, user-controls, webusercontrol

我在运行时添加了 WebUserControl，所以我不能使用`MyWebUserControl.MyFunction()`，我有一个 MasterPage，我试过这个：

```
_MainContentPage = CType(_Page.Form.FindControl("MyContentPlaceHolder"), ContentPlaceHolder)
CType(_MainContentPage.FindControl("MyWebUserControl"), myType) 
```

但`_MainContentPage.FindControl("MyWebUserControl")`返回一个 TableCell。

我添加 WubUserControl 的方式：

```
tcValue = New TableCell()      
tcValue.Controls.Add(_Page.LoadControl("Paht/WebUserControl"))
tcValue.ID = "MyWebUserControl" 
```

好吧，这就是`_MainContentPage.FindControl("MyWebUserControl")`返回 TableCell 的原因，但是如何获取 Webcontrol 并调用函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:34:32.863

将该函数作为 Web 方法或在 asp.net http 处理程序中提取该函数以供全局访问是多么困难。我认为通过这种方式你可以让它变得更好，而不是使用反射和其他东西来访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:00:26.253

解决方案是获取 TableCell 然后找到控件，然后调用该函数。

```
_MainContentPage = CType(_Page.Form.FindControl("MyContentPlaceHolder"),ContentPlaceHolder)
MyTableCell =  CType(_MainContentPage.FindControl("MyWebUserControl"), TableCell)
MyWebControl = CType(MyTableCell.Controls(0), MyType)
MyWebControl.MyFunction() 
```

# x86 - 交叉编译的 Valgrind 没有检测到明显的泄漏

> ID：15840091
> 
> 赞同：4
> 
> 时间：2013-04-05T17:38:05.910
> 
> 标签：x86, valgrind, openwrt, uclibc

我将 Valgrind 交叉编译到 openwrt x86 平台。在目标上运行时，它不会检测到任何泄漏。在 Ubuntu 上，它运行良好。

我的测试程序很简单

```
main()
{
   char *p = malloc(10000);

   *(p-1) = 1;
} 
```

相关编译步骤

```
i486-openwrt-linux-uclibc-gcc -c -o leak.o -pipe -march=i486 -fhonour-copts  -I/home/r2/external/openwrt/staging_dir/target-i386_uClibc-0.9.30.1/usr/include -I/home/r2/external/openwrt/staging_dir/target-i386_uClibc-0.9.30.1/include -I/home/r2/external/openwrt/staging_dir/toolchain-i386_gcc-4.1.2_uClibc-0.9.30.1/include  -O0 -g -I. -Idbus -I/home/r2/external/openwrt/staging_dir/target-i386_uClibc-0.9.30.1/usr/include leak.c
leak.c: In function 'main':
leak.c:3: warning: incompatible implicit declaration of built-in function 'malloc'
  CC  leak.c
i486-openwrt-linux-uclibc-gcc leak.o  -L/hom e/r2/external/openwrt/staging_dir/target-i386_uClibc-0.9.30.1/usr/lib -L/home/r2/external/openwrt/staging_dir/target-i386_uClibc-0.9.30.1/lib -L/home/r2/external/openwrt/staging_dir/toolchain-i386_gcc-4.1.2_uClibc-0.9.30.1/lib  -o leak
  LD  leak 
```

它不是静态链接的。objdump 确认

```
objdump -x build_dir/target-i386_uClibc-0.9.30.1/test/leak  

build_dir/target-i386_uClibc-0.9.30.1/test/leak:     file format elf32-i386
build_dir/target-i386_uClibc-0.9.30.1/test/leak
architecture: i386, flags 0x00000112:
EXEC_P, HAS_SYMS, D_PAGED
start address 0x08048340

Program Header:
    PHDR off    0x00000034 vaddr 0x08048034 paddr 0x08048034 align 2**2
         filesz 0x000000c0 memsz 0x000000c0 flags r-x
  INTERP off    0x000000f4 vaddr 0x080480f4 paddr 0x080480f4 align 2**0
         filesz 0x00000014 memsz 0x00000014 flags r--
    LOAD off    0x00000000 vaddr 0x08048000 paddr 0x08048000 align 2**12
         filesz 0x000004ac memsz 0x000004ac flags r-x
    LOAD off    0x000004ac vaddr 0x080494ac paddr 0x080494ac align 2**12
         filesz 0x000000f4 memsz 0x00000110 flags rw-
 DYNAMIC off    0x000004c0 vaddr 0x080494c0 paddr 0x080494c0 align 2**2
         filesz 0x000000b8 memsz 0x000000b8 flags rw-
   STACK off    0x00000000 vaddr 0x00000000 paddr 0x00000000 align 2**2
         filesz 0x00000000 memsz 0x00000000 flags rw-

Dynamic Section:
  NEEDED               libgcc_s.so.1
  NEEDED               libc.so.0
  INIT                 0x080482d4
  FINI                 0x08048490
  HASH                 0x08048108
  STRTAB               0x080481e4
  SYMTAB               0x08048144
  STRSZ                0x0000009c
  SYMENT               0x00000010
  DEBUG                0x00000000
  PLTGOT               0x08049578
  PLTRELSZ             0x00000020
  PLTREL               0x00000011
  JMPREL               0x080482b4
  VERNEED              0x08048294
  VERNEEDNUM           0x00000001
  VERSYM               0x08048280

Version References:
  required from libgcc_s.so.1:
    0x0b792650 0x00 02 GCC_3.0

Sections:
Idx Name          Size      VMA       LMA       File off  Algn
  0 .interp       00000014  080480f4  080480f4  000000f4  2**0
                  CONTENTS, ALLOC, LOAD, READONLY, DATA
  1 .hash         0000003c  08048108  08048108  00000108  2**2
                  CONTENTS, ALLOC, LOAD, READONLY, DATA
  2 .dynsym       000000a0  08048144  08048144  00000144  2**2
                  CONTENTS, ALLOC, LOAD, READONLY, DATA
  3 .dynstr       0000009c  080481e4  080481e4  000001e4  2**0
                  CONTENTS, ALLOC, LOAD, READONLY, DATA
  4 .gnu.version  00000014  08048280  08048280  00000280  2**1
                  CONTENTS, ALLOC, LOAD, READONLY, DATA
  5 .gnu.version_r 00000020  08048294  08048294  00000294  2**2
                  CONTENTS, ALLOC, LOAD, READONLY, DATA
  6 .rel.plt      00000020  080482b4  080482b4  000002b4  2**2
                  CONTENTS, ALLOC, LOAD, READONLY, DATA
  7 .init         0000001c  080482d4  080482d4  000002d4  2**0
                  CONTENTS, ALLOC, LOAD, READONLY, CODE
  8 .plt          00000050  080482f0  080482f0  000002f0  2**2
                  CONTENTS, ALLOC, LOAD, READONLY, CODE
  9 .text         00000150  08048340  08048340  00000340  2**4
                  CONTENTS, ALLOC, LOAD, READONLY, CODE
 10 .fini         00000017  08048490  08048490  00000490  2**0
                  CONTENTS, ALLOC, LOAD, READONLY, CODE
 11 .eh_frame     00000004  080484a8  080484a8  000004a8  2**2
                  CONTENTS, ALLOC, LOAD, READONLY, DATA
 12 .ctors        00000008  080494ac  080494ac  000004ac  2**2
                  CONTENTS, ALLOC, LOAD, DATA
 13 .dtors        00000008  080494b4  080494b4  000004b4  2**2
                  CONTENTS, ALLOC, LOAD, DATA
 14 .jcr          00000004  080494bc  080494bc  000004bc  2**2
                  CONTENTS, ALLOC, LOAD, DATA
 15 .dynamic      000000b8  080494c0  080494c0  000004c0  2**2
                  CONTENTS, ALLOC, LOAD, DATA
 16 .got.plt      0000001c  08049578  08049578  00000578  2**2
                  CONTENTS, ALLOC, LOAD, DATA
 17 .data         0000000c  08049594  08049594  00000594  2**2
                  CONTENTS, ALLOC, LOAD, DATA
 18 .bss          0000001c  080495a0  080495a0  000005a0  2**2
                  ALLOC
 19 .comment      00000036  00000000  00000000  000005a0  2**0
                  CONTENTS, READONLY
 20 .debug_aranges 00000020  00000000  00000000  000005d6  2**0
                  CONTENTS, READONLY, DEBUGGING
 21 .debug_pubnames 0000001b  00000000  00000000  000005f6  2**0
                  CONTENTS, READONLY, DEBUGGING
 22 .debug_info   000000b1  00000000  00000000  00000611  2**0
                  CONTENTS, READONLY, DEBUGGING
 23 .debug_abbrev 0000004e  00000000  00000000  000006c2  2**0
                  CONTENTS, READONLY, DEBUGGING
 24 .debug_line   00000039  00000000  00000000  00000710  2**0
                  CONTENTS, READONLY, DEBUGGING
 25 .debug_frame  00000058  00000000  00000000  0000074c  2**2
                  CONTENTS, READONLY, DEBUGGING
 26 .debug_loc    00000043  00000000  00000000  000007a4  2**0
                  CONTENTS, READONLY, DEBUGGING
SYMBOL TABLE:
080480f4 l    d  .interp    00000000              .interp
08048108 l    d  .hash  00000000              .hash
08048144 l    d  .dynsym    00000000              .dynsym
080481e4 l    d  .dynstr    00000000              .dynstr
08048280 l    d  .gnu.version   00000000              .gnu.version
08048294 l    d  .gnu.version_r 00000000              .gnu.version_r
080482b4 l    d  .rel.plt   00000000              .rel.plt
080482d4 l    d  .init  00000000              .init
080482f0 l    d  .plt   00000000              .plt
08048340 l    d  .text  00000000              .text
08048490 l    d  .fini  00000000              .fini
080484a8 l    d  .eh_frame  00000000              .eh_frame
080494ac l    d  .ctors 00000000              .ctors
080494b4 l    d  .dtors 00000000              .dtors
080494bc l    d  .jcr   00000000              .jcr
080494c0 l    d  .dynamic   00000000              .dynamic
08049578 l    d  .got.plt   00000000              .got.plt
08049594 l    d  .data  00000000              .data
080495a0 l    d  .bss   00000000              .bss
00000000 l    d  .comment   00000000              .comment
00000000 l    d  .debug_aranges 00000000              .debug_aranges
00000000 l    d  .debug_pubnames    00000000              .debug_pubnames
00000000 l    d  .debug_info    00000000              .debug_info
00000000 l    d  .debug_abbrev  00000000              .debug_abbrev
00000000 l    d  .debug_line    00000000              .debug_line
00000000 l    d  .debug_frame   00000000              .debug_frame
00000000 l    d  .debug_loc 00000000              .debug_loc
00000000 l    df *ABS*  00000000              crtstuff.c
080494ac l     O .ctors 00000000              __CTOR_LIST__
080494b4 l     O .dtors 00000000              __DTOR_LIST__
080484a8 l     O .eh_frame  00000000              __EH_FRAME_BEGIN__
080494bc l     O .jcr   00000000              __JCR_LIST__
080495a0 l     O .bss   00000001              completed.2431
0804959c l     O .data  00000000              p.2429
08048370 l     F .text  00000000              __do_global_dtors_aux
080495a4 l     O .bss   00000018              object.2483
080483d0 l     F .text  00000000              frame_dummy
00000000 l    df *ABS*  00000000              crtstuff.c
080494b0 l     O .ctors 00000000              __CTOR_END__
080494b8 l     O .dtors 00000000              __DTOR_END__
080484a8 l     O .eh_frame  00000000              __FRAME_END__
080494bc l     O .jcr   00000000              __JCR_END__
08048460 l     F .text  00000000              __do_global_ctors_aux
00000000 l    df *ABS*  00000000              initfini.c
00000000 l    df *ABS*  00000000              leak.c
080494c0 l     O .dynamic   00000000              .hidden _DYNAMIC
08049598 l     O .data  00000000              .hidden __dso_handle
08049578 l     O .got.plt   00000000              .hidden _GLOBAL_OFFSET_TABLE_
00000000       F *UND*  00000000              malloc
08048310  w    F *UND*  00000000              __deregister_frame_info_bases@@GCC_3.0
080482d4 g     F .init  00000000              _init
08048340 g     F .text  00000022              _start
00000000       F *UND*  00000000              __uClibc_main
080495a0 g       *ABS*  00000000              __bss_start
08048424 g     F .text  00000033              main
08048330  w    F *UND*  00000000              __register_frame_info_bases@@GCC_3.0
08049594  w      .data  00000000              data_start
08048490 g     F .fini  00000000              _fini
08048364 g     F .text  00000000              .hidden __get_pc_thunk_bx
080495a0 g       *ABS*  00000000              _edata
080495bc g       *ABS*  00000000              _end
08049594 g       .data  00000000              __data_start
00000000  w      *UND*  00000000              _Jv_RegisterClasses 
```

这是目标 x86 板上的 valgrind 输出

```
valgrind --leak-check=full -v -d -d -d -d  -d ./leak 
--5221:1:debuglog DebugLog system started by Stage 1, level 5 logging requested
--5221:1:launcher no tool requested, defaulting to 'memcheck'
--5221:2:launcher   selecting platform for './leak'
--5221:2:launcher   selecting platform for './leak'
--5221:2:launcher   opened './leak'
--5221:2:launcher   read 4096 bytes from './leak'
--5221:2:launcher   selected platform 'x86-linux'
--5221:1:launcher selected platform 'x86-linux'
--5221:1:launcher launching /usr/lib/valgrind/memcheck-x86-linux
--5221:1:debuglog DebugLog system started by Stage 2 (main), level 5 logging requested
--5221:1:main     Welcome to Valgrind version 3.8.0 debug logging
--5221:1:main     Checking current stack is plausible
--5221:1:main     Checking initial stack was noted
--5221:1:main     Starting the address space manager
--5221:2:aspacem            sp_at_startup = 0x00bfafb800 (supplied)
--5221:2:aspacem                  minAddr = 0x0004000000 (computed)
--5221:2:aspacem                  maxAddr = 0x00bfafafff (computed)
--5221:2:aspacem                   cStart = 0x0004000000 (computed)
--5221:2:aspacem                   vStart = 0x0061d7e000 (computed)
--5221:2:aspacem    suggested_clstack_top = 0x00beafbfff (computed)
--5221:2:aspacem    <<< SHOW_SEGMENTS: Initial layout (5 segments, 0 segnames)
--5221:2:aspacem      0: RSVN 0000000000-0003ffffff     64m ----- SmFixed
--5221:2:aspacem      1:      0004000000-0061d7dfff   1501m
--5221:2:aspacem      2: RSVN 0061d7e000-0061d7efff    4096 ----- SmFixed
--5221:2:aspacem      3:      0061d7f000-00bfafafff   1501m
--5221:2:aspacem      4: RSVN 00bfafb000-00ffffffff   1029m ----- SmFixed
--5221:2:aspacem    >>>
--5221:2:aspacem    Reading /proc/self/maps
--5221:2:aspacem    <<< SHOW_SEGMENTS: With contents of /proc/self/maps (12 segments, 1 segnames)
--5221:2:aspacem    ( 0) /usr/lib/valgrind/memcheck-x86-linux
--5221:2:aspacem      0: RSVN 0000000000-0003ffffff     64m ----- SmFixed
--5221:2:aspacem      1:      0004000000-0037ffffff    832m
--5221:2:aspacem      2: FILE 0038000000-0038288fff 2658304 r-x-- d=0x803 i=33422   o=4096    (0)
--5221:2:aspacem      3: FILE 0038289000-003828afff    8192 rw--- d=0x803 i=33422   o=2658304 (0)
--5221:2:aspacem      4: ANON 003828b000-0038d20fff     10m rw---
--5221:2:aspacem      5:      0038d21000-0061d7dfff    656m
--5221:2:aspacem      6: RSVN 0061d7e000-0061d7efff    4096 ----- SmFixed
--5221:2:aspacem      7:      0061d7f000-00bfae7fff   1501m
--5221:2:aspacem      8: ANON 00bfae8000-00bfafcfff   86016 rw---
--5221:2:aspacem      9: RSVN 00bfafd000-00ffffdfff   1029m ----- SmFixed
--5221:2:aspacem     10: ANON 00ffffe000-00ffffefff    4096 r-x--
--5221:2:aspacem     11: RSVN 00fffff000-00ffffffff    4096 ----- SmFixed
--5221:2:aspacem    >>>
--5221:1:main     Address space manager is running
--5221:1:main     Starting the dynamic memory manager
--5221:1:mallocfr newSuperblock at 0x61D7F000 (pszB 4194288)  owner VALGRIND/tool
--5221:1:mallocfr deferred_reclaimSuperblock at 0x61D7F000 (pszB 4194288)  (prev 0x0) owner VALGRIND/tool
--5221:1:main     Dynamic memory manager is running
--5221:1:main     Initialise m_debuginfo
--5221:1:main     VG_(libdir) = /usr/lib/valgrind
--5221:1:main     Getting launcher's name ...
--5221:1:main     ... /usr/bin/valgrind
--5221:1:main     Get hardware capabilities ...
--5221:1:main     ... arch = X86, hwcaps = x86-sse1-sse2
--5221:1:main     Getting the working directory at startup
--5221:1:main     ... /root
--5221:1:main     Split up command line
--5221:1:main     (early_) Process Valgrind's command line options
--5221:1:main     Create initial image
--5221:1:initimg  Loading client
--5221:1:initimg  Setup client env
--5221:2:initimg    preload_string:
--5221:2:initimg      "/usr/lib/valgrind/vgpreload_core-x86-linux.so:/usr/lib/valgrind/vgpreload_memcheck-x86-linux.so"
--5221:1:initimg  Setup client stack: size will be 16777216
--5221:2:initimg    Client info: initial_IP=0x40008B4 initial_TOC=0x0 brk_base=0x804A000
--5221:2:initimg    Client info: initial_SP=0xBEAFBD80 max_stack_size=16777216
--5221:1:initimg  Setup client data (brk) segment
--5221:1:main     Setup file descriptors
--5221:1:main     Create fake /proc/<pid>/cmdline
--5221:1:main     Initialise the tool part 1 (pre_clo_init)
--5221:1:mallocfr deferred_reclaimSuperblock NULL (prev 0x61D7F000) owner VALGRIND/tool
--5221:1:mallocfr newSuperblock at 0x6217F000 (pszB 1048560)  owner VALGRIND/exectxt
--5221:1:main     Print help and quit, if requested
--5221:1:main     (main_) Process Valgrind's command line options, setup logging
--5221:1:mallocfr newSuperblock at 0x6227F000 (pszB 1048560)  owner VALGRIND/core
--5221:1:main     Print the preamble...
==5221== Memcheck, a memory error detector
==5221== Copyright (C) 2002-2012, and GNU GPL'd, by Julian Seward et al.
==5221== Using Valgrind-3.8.0 and LibVEX; rerun with -h for copyright info
==5221== Command: ./leak
==5221== 
--5221-- Valgrind options:
--5221--    --leak-check=full
--5221--    -v
--5221--    -d
--5221--    -d
--5221--    -d
--5221--    -d
--5221--    -d
--5221-- Contents of /proc/version:
--5221--   Linux version 2.6.32.27 (ramesh@r2) (gcc version 4.1.2) #16 Mon Apr 1 15:37:49 PDT 2013
--5221-- Arch and hwcaps: X86, x86-sse1-sse2
--5221-- Page sizes: currently 4096, max supported 4096
--5221-- Valgrind library directory: /usr/lib/valgrind
--5221:1:main     ...finished the preamble
--5221:1:main     Initialise the tool part 2 (post_clo_init)
--5221:1:main     Initialise TT/TC
--5221:2:transtab   cache: 8 sectors of 27597024 bytes each = 220776192 total
--5221:2:transtab   table: 524168 total entries, max occupancy 340704 (65%)
--5221:1:main     Initialise redirects
--5221:1:mallocfr newSuperblock at 0x623FA000 (pszB 1048560)  owner VALGRIND/dinfo
--5221:1:main     Load initial debug info
--5221-- Reading syms from /root/leak
--5221:1:redir    transfer ownership V -> C of 0x3803d000 .. 0x3803dfff
--5221:1:main     Initialise scheduler (phase 1)
--5221:1:sched    sched_init_phase1
--5221-- Scheduler: using generic scheduler lock implementation.
--5221:1:main     Tell tool about initial permissions
--5221:2:main       tell tool about 0004000000-0004003fff r-x
--5221:2:main       tell tool about 0004004000-0004005fff rw-
--5221:2:main       tell tool about 0008048000-0008048fff r-x
--5221:2:main       tell tool about 0008049000-0008049fff rw-
--5221:2:main       tell tool about 000804a000-000804afff rwx
--5221:2:main       tell tool about 003803d000-003803dfff r-x
--5221:2:main       tell tool about 00beafb000-00beafbfff rwx
--5221:2:main       mark stack inaccessible 00beafb000-00beafbd7f
--5221:1:main     Initialise scheduler (phase 2)
--5221:1:sched    sched_init_phase2: tid_main=1, cls_end=0xbeafbfff, cls_sz=16777216
--5221:1:main     Finalise initial image
--5221:1:main     Initialise signal management
--5221:1:main     Load suppressions
--5221-- Reading suppressions file: /usr/lib/valgrind/default.supp
--5221:2:stacks     register 0xBEAFB000-0xBEAFBFFF as stack 0
--5221:1:main     
--5221:1:main     
--5221:1:aspacem  <<< SHOW_SEGMENTS: Memory layout at client startup (25 segments, 3 segnames)
--5221:1:aspacem  ( 0) /usr/lib/valgrind/memcheck-x86-linux
--5221:1:aspacem  ( 1) /root/leak
--5221:1:aspacem  ( 2) /lib/ld-uClibc-0.9.30.1.so
--5221:1:aspacem    0: RSVN 0000000000-0003ffffff     64m ----- SmFixed
--5221:1:aspacem    1: file 0004000000-0004003fff   16384 r-x-- d=0x803 i=86      o=0       (2)
--5221:1:aspacem    2: file 0004004000-0004005fff    8192 rw--- d=0x803 i=86      o=12288   (2)
--5221:1:aspacem    3:      0004006000-0008047fff     64m
--5221:1:aspacem    4: file 0008048000-0008048fff    4096 r-x-- d=0x803 i=33471   o=0       (1)
--5221:1:aspacem    5: file 0008049000-0008049fff    4096 rw--- d=0x803 i=33471   o=0       (1)
--5221:1:aspacem    6: anon 000804a000-000804afff    4096 rwx--
--5221:1:aspacem    7: RSVN 000804b000-0008849fff 8384512 ----- SmLower
--5221:1:aspacem    8:      000884a000-0037ffffff    759m
--5221:1:aspacem    9: FILE 0038000000-003803cfff  249856 r-x-- d=0x803 i=33422   o=4096    (0)
--5221:1:aspacem   10: file 003803d000-003803dfff    4096 r-x-- d=0x803 i=33422   o=253952  (0)
--5221:1:aspacem   11: FILE 003803e000-0038288fff 2404352 r-x-- d=0x803 i=33422   o=258048  (0)
--5221:1:aspacem   12: FILE 0038289000-003828afff    8192 rw--- d=0x803 i=33422   o=2658304 (0)
--5221:1:aspacem   13: ANON 003828b000-0038d20fff     10m rw---
--5221:1:aspacem   14:      0038d21000-0061d7dfff    656m
--5221:1:aspacem   15: RSVN 0061d7e000-0061d7efff    4096 ----- SmFixed
--5221:1:aspacem   16: ANON 0061d7f000-0062509fff 7909376 rwx--
--5221:1:aspacem   17:      006250a000-00bdafbfff   1461m
--5221:1:aspacem   18: RSVN 00bdafc000-00beafafff     15m ----- SmUpper
--5221:1:aspacem   19: anon 00beafb000-00beafbfff    4096 rwx--
--5221:1:aspacem   20:      00beafc000-00bfae7fff     15m
--5221:1:aspacem   21: ANON 00bfae8000-00bfafcfff   86016 rw---
--5221:1:aspacem   22: RSVN 00bfafd000-00ffffdfff   1029m ----- SmFixed
--5221:1:aspacem   23: ANON 00ffffe000-00ffffefff    4096 r-x--
--5221:1:aspacem   24: RSVN 00fffff000-00ffffffff    4096 ----- SmFixed
--5221:1:aspacem  >>>
--5221:1:main     
--5221:1:main     
--5221:1:main     Running thread 1
--5221:1:syswrap- entering VG_(main_thread_wrapper_NORETURN)
--5221:1:aspacem  allocated thread stack at 0x6250a000 size 1064960
--5221:1:syswrap- run_a_thread_NORETURN(tid=1): pre-thread_wrapper
--5221:1:syswrap- thread_wrapper(tid=1): entry
--5221:1:gdbsrv   entering call_gdbserver init_reason ... pid 5221 tid 1 status VgTs_Runnable sched_jmpbuf_valid 0
--5221:1:gdbsrv   gdbserver_init gdbserver embedded in valgrind: gdbserver protocol box extracted from gdb 6.6
==5221== embedded gdbserver: reading from /tmp/vgdb-pipe-from-vgdb-to-5221-by-root-on-???
==5221== embedded gdbserver: writing to   /tmp/vgdb-pipe-to-vgdb-from-5221-by-root-on-???
==5221== embedded gdbserver: shared mem   /tmp/vgdb-pipe-shared-mem-vgdb-5221-by-root-on-???
==5221== 
==5221== TO CONTROL THIS PROCESS USING vgdb (which you probably
==5221== don't want to do, unless you know exactly what you're doing,
==5221== or are doing some strange experiment):
==5221==   /usr/lib/valgrind/../../bin/vgdb --pid=5221 ...command...
==5221== 
==5221== TO DEBUG THIS PROCESS USING GDB: start GDB like this
==5221==   /path/to/gdb ./leak
==5221== and then give GDB the following command
==5221==   target remote | /usr/lib/valgrind/../../bin/vgdb --pid=5221
==5221== --pid is optional if only one valgrind process is running
==5221== 
--5221:1:gdbsrv   Opening read side /tmp/vgdb-pipe-from-vgdb-to-5221-by-root-on-???
--5221:1:gdbsrv   result fd 3
--5221:1:gdbsrv   result safe_fd 1019
--5221:1:transtab allocate sector 0
--5221:1:mallocfr newSuperblock at 0x64AE1000 (pszB   65520)  owner VALGRIND/ttaux
--5221:1:mallocfr newSuperblock at 0x64AF1000 (pszB   65520)  owner VALGRIND/errors
--5221:1:signals  extending a stack base 0xbeafb000 down by 4096
--5221:2:stacks     change stack 0 from 0xBEAFB000-0xBEAFBFFF to 0xBEAFA000-0xBEAFBFFF
--5221:1:syswrap- thread_wrapper(tid=1): exit
--5221:1:syswrap- run_a_thread_NORETURN(tid=1): post-thread_wrapper
--5221:1:syswrap- run_a_thread_NORETURN(tid=1): last one standing
--5221:1:main     entering VG_(shutdown_actions_NORETURN)
--5221:1:aspacem  <<< SHOW_SEGMENTS: Memory layout at client shutdown (43 segments, 8 segnames)
--5221:1:aspacem  ( 0) /usr/lib/valgrind/memcheck-x86-linux
--5221:1:aspacem  ( 1) /root/leak
--5221:1:aspacem  ( 2) /lib/ld-uClibc-0.9.30.1.so
--5221:1:aspacem  ( 3) /tmp/vgdb-pipe-shared-mem-vgdb-5221-by-root-on-???
--5221:1:aspacem  ( 4) /usr/lib/valgrind/vgpreload_core-x86-linux.so
--5221:1:aspacem  ( 5) /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so
--5221:1:aspacem  ( 6) /lib/libgcc_s.so.1
--5221:1:aspacem  ( 7) /lib/libuClibc-0.9.30.1.so
--5221:1:aspacem    0: RSVN 0000000000-0003ffffff     64m ----- SmFixed
--5221:1:aspacem    1: file 0004000000-0004003fff   16384 r-xT- d=0x803 i=86      o=0       (2)
--5221:1:aspacem    2: file 0004004000-0004004fff    4096 r---- d=0x803 i=86      o=12288   (2)
--5221:1:aspacem    3: file 0004005000-0004005fff    4096 rw--- d=0x803 i=86      o=16384   (2)
--5221:1:aspacem    4: anon 0004006000-0004006fff    4096 rw---
--5221:1:aspacem    5:      0004007000-0004007fff    4096
--5221:1:aspacem    6: file 0004008000-0004008fff    4096 r-xT- d=0x803 i=33412   o=0       (4)
--5221:1:aspacem    7: file 0004009000-0004009fff    4096 rw--- d=0x803 i=33412   o=0       (4)
--5221:1:aspacem    8: file 000400a000-0004012fff   36864 r-xT- d=0x803 i=33423   o=0       (5)
--5221:1:aspacem    9: file 0004013000-0004013fff    4096 rw--- d=0x803 i=33423   o=32768   (5)
--5221:1:aspacem   10: file 0004014000-000401dfff   40960 r-xT- d=0x803 i=338     o=0       (6)
--5221:1:aspacem   11: file 000401e000-000401efff    4096 rw--- d=0x803 i=338     o=36864   (6)
--5221:1:aspacem   12: file 000401f000-0004064fff  286720 r-xT- d=0x803 i=135     o=0       (7)
--5221:1:aspacem   13: file 0004065000-0004065fff    4096 r---- d=0x803 i=135     o=282624  (7)
--5221:1:aspacem   14: file 0004066000-0004066fff    4096 rw--- d=0x803 i=135     o=286720  (7)
--5221:1:aspacem   15: anon 0004067000-000406bfff   20480 rw---
--5221:1:aspacem   16:      000406c000-0008047fff     63m
--5221:1:aspacem   17: file 0008048000-0008048fff    4096 r-xT- d=0x803 i=33471   o=0       (1)
--5221:1:aspacem   18: file 0008049000-0008049fff    4096 rw--- d=0x803 i=33471   o=0       (1)
--5221:1:aspacem   19: anon 000804a000-000804cfff   12288 rwx--
--5221:1:aspacem   20: RSVN 000804d000-0008849fff 8376320 ----- SmLower
--5221:1:aspacem   21:      000884a000-0037ffffff    759m
--5221:1:aspacem   22: FILE 0038000000-003803cfff  249856 r-x-- d=0x803 i=33422   o=4096    (0)
--5221:1:aspacem   23: file 003803d000-003803dfff    4096 r-x-- d=0x803 i=33422   o=253952  (0)
--5221:1:aspacem   24: FILE 003803e000-0038288fff 2404352 r-x-- d=0x803 i=33422   o=258048  (0)
--5221:1:aspacem   25: FILE 0038289000-003828afff    8192 rw--- d=0x803 i=33422   o=2658304 (0)
--5221:1:aspacem   26: ANON 003828b000-0038d20fff     10m rw---
--5221:1:aspacem   27:      0038d21000-0061d7dfff    656m
--5221:1:aspacem   28: RSVN 0061d7e000-0061d7efff    4096 ----- SmFixed
--5221:1:aspacem   29: ANON 0061d7f000-0062509fff 7909376 rwx--
--5221:1:aspacem   30: ANON 006250a000-006250bfff    8192 -----
--5221:1:aspacem   31: ANON 006250c000-006260bfff 1048576 rwx--
--5221:1:aspacem   32: ANON 006260c000-006260dfff    8192 -----
--5221:1:aspacem   33: FILE 006260e000-006260efff    4096 rw--- d=0x00b i=8236    o=0       (3)
--5221:1:aspacem   34: ANON 006260f000-0064b08fff     36m rwx--
--5221:1:aspacem   35:      0064b09000-00bdafbfff   1423m
--5221:1:aspacem   36: RSVN 00bdafc000-00beaf9fff     15m ----- SmUpper
--5221:1:aspacem   37: anon 00beafa000-00beafbfff    8192 rwx--
--5221:1:aspacem   38:      00beafc000-00bfae7fff     15m
--5221:1:aspacem   39: ANON 00bfae8000-00bfafcfff   86016 rw---
--5221:1:aspacem   40: RSVN 00bfafd000-00ffffdfff   1029m ----- SmFixed
--5221:1:aspacem   41: ANON 00ffffe000-00ffffefff    4096 r-x--
--5221:1:aspacem   42: RSVN 00fffff000-00ffffffff    4096 ----- SmFixed
--5221:1:aspacem  >>>
==5221== 
==5221== HEAP SUMMARY:
==5221==     in use at exit: 0 bytes in 0 blocks
==5221==   total heap usage: 0 allocs, 0 frees, 0 bytes allocated
==5221== 
==5221== All heap blocks were freed -- no leaks are possible
==5221== 
==5221== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 1 from 1)
--5221-- 
--5221-- used_suppression:      1 ld(Cond)
==5221== 
==5221== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 1 from 1)
--5221:1:gdbsrv   remote_finish (reason orderly_finish) 1019 -1
--5221:1:gdbsrv   unlinking
    /tmp/vgdb-pipe-from-vgdb-to-5221-by-root-on-???
    /tmp/vgdb-pipe-to-vgdb-from-5221-by-root-on-???
    /tmp/vgdb-pipe-shared-mem-vgdb-5221-by-root-on-???
--5221:1:core_os  VG_(terminate_NORETURN)(tid=1) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T04:49:08.640

事实证明，openwrt 剥离了所有库，包括 valgrind 的 vgpreload_xxxxxx.so 库和 libc.so。但是，valgrind 需要 .so 文件中的节标题和符号。我禁用了 libc 和 valgrind 包的剥离，然后一切都像魅力一样工作。需要深入研究 valgrind 代码才能了解真正发生的事情。如果 valgrind 找不到任何指向 REDIR 的符号，我希望它有一些警告或错误。本来可以节省我 3 天的时间。哦，好吧，反正学到了一些新东西。

# javascript - Jasmine angularjs - 监视初始化控制器时调用的方法

> ID：15840097
> 
> 赞同：4
> 
> 时间：2013-04-05T17:38:29.587
> 
> 标签：javascript, unit-testing, angularjs, jasmine

我目前正在使用 Jasmine 和 Karma(Testacular) 和 Web Storm 来编写单元测试。我无法监视初始化控制器时立即调用的方法。是否可以监视初始化控制器时调用的方法？

我的控制器代码，我试图监视的方法是`getServicesNodeList()`.

```
myApp.controller('TreeViewController', function ($scope, $rootScope ,$document, DataServices) {
    $scope.treeCollection  =  DataServices.getServicesNodeList();
    $rootScope.viewportHeight = ($document.height() - 100) + 'px';
}); 
```

这是测试规范：

```
describe("DataServices Controllers - ", function () {

beforeEach(angular.mock.module('myApp'));
describe("DataServicesTreeview Controller - ", function () {

    beforeEach(inject(function ($controller, $rootScope, $document, $httpBackend, DataServices) {
        scope = $rootScope.$new(),
        doc = $document,
        rootScope = $rootScope;
        dataServices = DataServices;

        $httpBackend.when('GET', '/scripts/internal/servicedata/services.json').respond(...);

        var controller = $controller('TreeViewController', {$scope: scope, $rootScope: rootScope, $document: doc, DataServices: dataServices });

        $httpBackend.flush();
    }));

    afterEach(inject(function($httpBackend){
        $httpBackend.verifyNoOutstandingExpectation();
        $httpBackend.verifyNoOutstandingRequest();
    }));

    it('should ensure DataServices.getServicesNodeList() was called', inject(function ($httpBackend, DataServices) {
        spyOn(DataServices, "getServicesNodeList").andCallThrough();

        $httpBackend.flush();
        expect(DataServices.getServicesNodeList).toHaveBeenCalled();
    }));

});
}); 
```

测试失败，说明该方法尚未被调用。我知道我应该模拟`DataServices`并将其传递给测试控制器。但是，无论它是否是模拟方法，在监视该方法时，我似乎仍然会遇到同样的问题。任何人有任何想法或可以指出我处理此问题的正确方法的资源吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T17:14:49.957

在编写单元测试时，你应该隔离每一段代码。在这种情况下，您需要隔离您的服务并单独对其进行测试。创建服务的模拟并将其传递给您的控制器。

```
var mockDataServices = {
    getServicesNodeList: function () {
        return <insert your sample data here > ;
    }
};

beforeEach(inject(function ($controller, $rootScope, $document) {
    scope = $rootScope.$new(),
    doc = $document,
    rootScope = $rootScope;

    var controller = $controller('TreeViewController', {
        $scope: scope,
        $rootScope: rootScope,
        $document: doc,
        DataServices: mockDataServices
    });
})); 
```

如果是您的服务发出 $http 请求，您可以从单元控制器测试中删除该部分。编写另一个单元测试来测试服务在初始化时是否进行了正确的 http 调用。

# jquery - 选择复选框作为一个组

> ID：15840098
> 
> 赞同：0
> 
> 时间：2013-04-05T17:38:32.317
> 
> 标签：jquery

我目前使用下面的代码来循环复选框。它可以工作，但是它会在我的页面上获取每个复选框。有没有办法只选择一组具有相同名称、类或存在于同一个 div 容器中的复选框？

谢谢

```
 $('input[type=checkbox]').each(function () {
 ...do stuff 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T17:40:22.110

按名称过滤：

```
$('input[type=checkbox][name=yourname]') 
```

或者

```
$('input[type=checkbox]').filter('[name=yourname]') 
```

按类别过滤

```
$('input[type=checkbox]').filter('.myclass') 
```

按父级过滤：

```
$('input[type=checkbox]', parent) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T17:40:37.683

在同一个 div （假设它有一个类）：

```
$('.theclassofthediv input[type=checkbox]').each(function () { 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T17:42:05.727

按名称过滤：

```
$('input[type=checkbox][name=name]') 
```

按类别过滤

```
$('input[type=checkbox]').filter('.myclass').each(..) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T17:43:28.393

按类过滤，直接在选择器中不使用`.filter()`：

```
$('input.myclass[type=checkbox]'); 
```

# android - 我的广告只能横向显示？

> ID：15840100
> 
> 赞同：0
> 
> 时间：2013-04-05T17:38:37.993
> 
> 标签：android, landscape

好吧，我在市场上上传了一个应用程序，但广告只显示在平板电脑上，而不是手机上。但是后来我将手机倾斜为横向而不是纵向并且广告弹出？我不明白为什么这是我的 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" 
android:background="@drawable/blue_final2"
>
<com.google.ads.AdView android:id="@+id/ad"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        ads:adUnitId="ID"   
        ads:loadAdOnCreate="true"
        ads:adSize="BANNER"
        />

<ScrollView android:layout_weight="30" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <LinearLayout android:orientation="vertical"
        android:layout_width="match_parent" 
        android:layout_height="match_parent"
        >
<LinearLayout 
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:weightSum="9" >
<ImageButton
       android:id="@+id/ibOne"
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:layout_weight="3"
       android:src="@drawable/one"
       android:background="@null"
       android:layout_marginTop="60dp" />
<ImageButton
    android:id="@+id/ibTwo"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="3"
    android:src="@drawable/two" 
    android:background="@null"
    android:layout_marginTop="60dp"/>
<ImageButton
    android:id="@+id/ibThree"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="3"
    android:src="@drawable/three"
    android:background="@null"
    android:layout_marginTop="60dp" />
</LinearLayout>

<TextView
   android:id="@+id/textView1"
   android:padding="30dp"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:text="Click on the picture you like the most and see your result!"
   android:textAppearance="?android:attr/textAppearanceLarge"
   android:textColor="@android:color/white" />
</LinearLayout>
</ScrollView>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:01:59.150

我真的想通了。这很简单...我只是将广告的宽度更改为 wrap_content 以匹配父级，一切正常！

# flyway - 将初始模式加载到现有数据库的 Flyway 表中

> ID：15840103
> 
> 赞同：1
> 
> 时间：2013-04-05T17:38:48.977
> 
> 标签：flyway

我已经阅读了 Flyway (2.1.1) 文档，我只是想澄清一点……

我将生产数据库中的当前 DDL 转储到文件 V1__baseddl.sql 中。我验证了我们的 QA 数据库具有匹配生产的模式。

我现在想将我们的 QA 数据库置于 Flyway 管理之下（然后是生产）。我们通过 API 使用 Flyway。我调用了 flyway.setInitVersion(1)，然后调用了 flyway.init()，我期待它找到 V1__baseddl.sql 文件，并将其设置为 flyway.schema_version 表中的版本 1，但实际上并未执行其内容（因为该模式已存在于数据库中）。在 schema_version 表中，我看到了初始版本的一行，但对于脚本，它只有 << Flyway Init >>。

如何将初始模式文件 (V1__baseddl.sql) 作为版本 1“加载”到 schema_version 表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:41:23.360

要更改描述，您必须致电`flyway.setInitDescription("baseddl")`

# php - 使用谷歌翻译时必须保留而不是 \u003cbr /

> ID：15840105
> 
> 赞同：1
> 
> 时间：2013-04-05T17:39:00.687
> 
> 标签：php, json

我使用函数翻译，如下所示。文中
标签较多，翻译后改为\u003cbr /。

示例：Super Preis - Leistungsverhältnis。

# Das bekommen Sie nur bei uns ！

超级大奖 - 。盖尔德 \u003cbr /\u003e U ons \u003cbr /\u003e

问题：如何防止文本
标签不被更改并在翻译后作为
标签保留。

```
function translate($text, $from = 'de', $to = 'nl'){
 $texto_traducri = urlencode($text);
 $query = "http://translate.google.nl/translate_a/t?client=t&text=$texto_traducri%0A%0A&hl=$from&sl=$from&tl=$to&multires=1&prev=enter&oc=5&ssel=3&tsel=6&sc=1";
 $response = file_get_contents(
    $query,
    null,
    stream_context_create(
        array(
            'http'=>array(
            'method'=>"GET",
            'header'=>"Referer: http://translate.google.nl/\r\n"
            )
        )
    )
);
$p_separador = strpos($response,'","');
$p_separador = strpos($response,"]]");
$s_previo = substr($response,3,($p_separador));
$a_previo = explode("],[",$s_previo);
$txt_sum = '';
    foreach($a_previo as $s_cadenaparcial){
        $s_cadenaparcial = str_replace("]", "", $s_cadenaparcial);
        $s_cadenaparcial = str_replace("[", "", $s_cadenaparcial);
        $a_cadena = explode('","',$s_cadenaparcial);
        $txt_sum.=substr($a_cadena[0],1);
        }
    $tagresult = $txt_sum; 
```

$tagresult = htmlspecialchars_decode($tagresult);

```
return $tagresult;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:19:01.143

`\u003c`并表示和`\u003e`的 unicode 值。`<``>`

您可以简单地将它们转换回普通字符。

以下是如何执行此操作的示例：

```
<?
    function uconverter($matches) {
        return html_entity_decode('&#' . hexdec($matches[1]) . ';', ENT_COMPAT, 'UTF-8');
    }
    function decode_uchars($str) {
        return preg_replace_callback('/\\\\u([0-9A-Fa-f]{4})/', uconverter, $str);
    }

    $in = 'Super prijs - . Geld \u003cbr /\u003e U ons \u003cbr /\u003e';
    $out = decode_uchars($in); // Super prijs - . Geld <br /> U ons <br />

    echo $out;
?> 
```

# android - 使用 NDK 构建 Android 原生代码

> ID：15840108
> 
> 赞同：2
> 
> 时间：2013-04-05T17:39:15.867
> 
> 标签：android, android-ndk

我正在尝试使用 NDK 在 Android 构建系统中构建一个 Android 本机模块。使用 Android 模块 make 命令构建时，我的模块可以正确构建，没有任何错误。但是当我尝试使用 NDK 构建设置时，我遇到了 android 系统包含文件的问题。我的模块结构是：

```
android
       |
       external
              |
              MyModule
                     |
                     jni --> Android.mk
                     mysharedobj --> Android.mk 
```

我的本机模块包括许多 android 包括，例如

```
#include <JNIHelp.h>
#include "android_runtime/AndroidRuntime.h"
#include <gui/Surface.h>
#include <gui/ISurface.h> 
```

在 NDK 文档的帮助下，我能够解决包含错误，但我面临严重错误，例如：

```
jni/com_my_module_NativeInterface.cpp:3:21: fatal error: JNIHelp.h: No such file or directory compilation terminated. 
```

-->为了解决 JNIHelp.h 包含错误，我在 Android.mk 中添加了以下行

```
LOCAL_C_INCLUDES += \
    $(LOCAL_PATH)/../../../libnativehelper/include/nativehelper 
```

在这之后又出现了一个错误，

```
jni/../../../libnativehelper/include/nativehelper/JNIHelp.h:27:24: fatal error: cutils/log.h: No such file or directory compilation terminated. 
```

--> 为了解决上述错误，我修改了 Android.mk

```
LOCAL_C_INCLUDES += \
    $(LOCAL_PATH)/../../../libnativehelper/include/nativehelper \
    $(LOCAL_PATH)/../../../system/core/include \ 
```

在这之后又出现了一个错误

```
/home/user/android-ndk-r8e/platforms/android-3/arch-arm/usr/include/linux/uio.h:18:8: error: redefinition of 'struct iovec'
jni/../../../system/core/include/cutils/uio.h:33:8: error: previous definition of 'struct iovec' 
```

如何成功构建使用android系统包含文件的本机模块？请帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-21T14:43:37.063

我不确定，但尝试将标志**-DHAVE_SYS_UIO_H**放在您的**LOCAL_CFLAGS**上：

```
LOCAL_CFLAGS += -DHAVE_SYS_UIO_H 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T23:00:21.613

您应该使用`LOCAL_LDLIBS`而不是将 ndk 依赖项添加到`LOCAL_C_INCLUDES`. 下面的例子来自我的 Android.mk：

```
LOCAL_LDLIBS := -L$(NDK_PLATFORMS_ROOT)/$(TARGET_PLATFORM)/arch-arm/usr/lib -L$(LOCAL_PATH) -llog -lz -lm 
```

查看文档以查看应根据需要添加哪些库。

# c# - WPF 使用 MVVM 通过绑定动态添加单个控件

> ID：15840110
> 
> 赞同：1
> 
> 时间：2013-04-05T17:39:37.350
> 
> 标签：c#, wpf, mvvm

好的，所以我为此做了很多搜索，我似乎无法解决正确的问题，或者只是没有完成......

基本上，我有一个模块化应用程序，其中包含各种数据驱动的“Applet”，它们可能会根据提供给用户的权限进行更改和动态添加。我已经在 Flex 中构建了这个应用程序，并且我们正在通过 MVVM 将它移动到 WPF，因为它对我们来说编码和维护要容易一百万倍。

现在，我正在尝试解决两个问题：

**问题 #1**

我需要能够通过绑定动态添加单个控件。我已经使用 ItemsControls 上的数据模板构建了绑定，这些模板连接到 ViewModel 中的对象列表，效果很好，但是当我知道只有一个控件但它让我知道时，该系统似乎有点笨拙到现在为止。

这是我的代码，以说明为什么这对我来说似乎很hacky：

**XAML**

```
<ItemsControl ItemsSource="{Binding ApplicationList}">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <CTRL:PortalApplicationControl />
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

**视图模型**

```
/// <summary>
/// A List to contain the currently active application for binding to the ItemsControl in XAML
/// </summary>
public List<Models.Application> ApplicationList
{
    get { return (List<Models.Application>)GetValue(ApplicationListProperty); }
    set { SetValue(ApplicationListProperty, value); }
}
public static readonly DependencyProperty ApplicationListProperty =
    DependencyProperty.Register("ApplicationList", typeof(List<Models.Application>), typeof(ApplicationVM));

/// <summary>
/// The currently active application
/// </summary>
public Models.Application Application
{
    get { return (Models.Application)GetValue(ApplicationProperty); }
    set { SetValue(ApplicationProperty, value); ApplicationList = new List<Models.Application>() { Application }; }
}
public static readonly DependencyProperty ApplicationProperty =
    DependencyProperty.Register("Application", typeof(Models.Application), typeof(ApplicationVM)); 
```

如您所见，从某种意义上说，绑定到 Application 依赖项属性上的属性的对象能够调用“{Binding Application.Name}”但 ItemsControl 必须调用“{Binding ApplicationList}”和 setter对于 Application 必须实例化一个长度为 1 的新“列表”来依次设置 ​​ApplicationList 对象....它可以工作，但它不是很优雅，我想知道是否有另一种方法可以完成此任务

**问题 #2**

好的，现在我们到了在上面的整个结构中抛出一个活动扳手的部分：如果我想要数据模板中的不同控件基于哪个 Application 对象当前处于活动状态，该怎么办？IE 如果 Application1 当前处于活动状态，请使用 Application1View，但如果 Application2 当前处于活动状态，请使用 Application2View ......这似乎我必须在后面的代码中做一些工作才能让它工作......这让我很震惊如果我坚持使用 MVVM 结构，那是一个很大的禁忌

抱歉啰嗦了，我希望这个问题是有道理的，并感谢你们提供的任何帮助......这使我的项目处于停滞状态，直到我能够解决上述问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T17:51:23.280

[DataTemplateSelector](http://msdn.microsoft.com/en-us/library/system.windows.controls.datatemplateselector.aspx)可能会派上用场。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T18:29:01.627

如果同时只有一个控件，请使用[ContentControl](http://msdn.microsoft.com/en-us/library/vstudio/system.windows.controls.contentcontrol.aspx)。

# c# - 计算 DataGrid 中的单元格值

> ID：15840113
> 
> 赞同：1
> 
> 时间：2013-04-05T17:39:44.530
> 
> 标签：c#, winforms, datagrid

我有以下 DataGrid（用罗马尼亚语编写）：

![在此处输入图像描述](https://i.stack.imgur.com/M1QBn.png)

我想通过这个公式计算列“Valoarea”：

> valoarea = Cantitatea *** Pret *unitar (fara TVA)*

我的实际代码给了我错误：

```
private void produseFacturate_CellValueChanged(object sender, DataGridViewCellEventArgs e)
    {
        switch (e.ColumnIndex)
        {
            case 3:
                var row = produseFacturate.Rows[e.RowIndex];

                double qty, price;

                double.TryParse(row.Cells[2].Value.ToString(), out qty);
                double.TryParse(row.Cells[3].Value.ToString(), out price);

                row.Cells[4].Value = (qty * price).ToString();
                break;
        }
    } 
```

现在，我的问题是：如何用好的数据填充行上的特定单元格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:06:19.090

我假设控件实际上是一个 DataGridView？

您可以覆盖 CellFormatting 事件。这是一个简单的例子：

我创建了一个包含 3 列的 DataGridView。

```
this.Column1 = new System.Windows.Forms.DataGridViewTextBoxColumn();
this.Column2 = new System.Windows.Forms.DataGridViewTextBoxColumn();
this.Column3 = new System.Windows.Forms.DataGridViewTextBoxColumn();
this.dataGridView1.Columns.AddRange(new System.Windows.Forms.DataGridViewColumn[] {
        this.Column1,
        this.Column2,
        this.Column3});

this.dataGridView1.Name = "dataGridView1";
this.dataGridView1.Size = new System.Drawing.Size(405, 150);
this.dataGridView1.TabIndex = 1;
this.dataGridView1.CellFormatting += new System.Windows.Forms.DataGridViewCellFormattingEventHandler(this.dataGridView1_CellFormatting); 
```

我想让第三列成为前两列的乘积。这是我覆盖单元格格式的方法。

```
 private void dataGridView1_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
        {

            if (this.dataGridView1.Columns[e.ColumnIndex].Name.Equals("Column3"))
            {
                try {
                    this.dataGridView1.Rows[e.RowIndex].Cells[2].Value =  Convert.ToInt32(this.dataGridView1.Rows[e.RowIndex].Cells[0].Value) * Convert.ToInt32(this.dataGridView1.Rows[e.RowIndex].Cells[1].Value);
                }
                catch (Exception ex) { }
            }
        } 
```

请注意，每当我更改第一两列中的值时，都会重新计算第三列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-18T01:01:44.727

如果有人想知道如何计算 datagridview 的单元格中的值并将结果放在同一行的另一列上，在 datagridview 的 CellEndEdit 事件中，您可以尝试这种方式：

```
 if (Convert.ToDecimal(datagridPR.CurrentRow.Cells["price_value"].Value) != 0)
        {
            decimal c_Quantity = Convert.ToDecimal(datagridPR.CurrentRow.Cells["quantity"].Value);
            decimal c_Result = c_Quantity * Convert.ToDecimal(datagridPR.CurrentRow.Cells["price_value"].Value);
            datagridPR.CurrentRow.Cells["amount"].Value = c_Result;
        } 
```

每次编辑后按回车键或离开单元格，在金额栏立即可以看到计算结果。您可以扩展代码以处理空值以避免运行时错误。

# search - 了解用户在 Google 上搜索的内容以访问我的网站

> ID：15840119
> 
> 赞同：0
> 
> 时间：2013-04-05T17:40:04.120
> 
> 标签：search, seo, keyword

我想知道用户在谷歌上搜索了什么来访问我的网站，我的网站是用 php 构建的，我转储**了 $_SERVER**变量，但我没有找到任何与搜索关键字相关的内容。是否可以找到用户搜索到我的网站的内容？如果是，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:02:33.293

使用来自 Google 的 SSL 搜索，您无法再从他们的搜索中获取关键字：

[http://www.seomoz.org/blog/google-hides-search-referral-data-with-new-ssl-implementation-emergency-whiteboard-friday](http://www.seomoz.org/blog/google-hides-search-referral-data-with-new-ssl-implementation-emergency-whiteboard-friday)

这可能就是您没有在 SERVER 变量中获取这些变量的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T17:55:57.113

以谷歌为例， $_SERVER['HTTP_REFERER'] 返回你谷歌搜索结果的 url，比如

```
https://www.google.com/search?q=stackoverflow&aq=f&oq=stackoverflow&aqs=chrome.0.57j61j60j58j60l2.4259&sourceid=chrome&client=ubuntu&channel=cs&ie=UTF-8 
```

现在您可以使用以下代码段从中提取您的搜索查询

```
$url = $_SERVER['HTTP_REFERER'];
$start = strpos($url, "search?q=");
$keyword = substr($url, $start + 9, strpos($url, "&", $start)); 
```

$keywork 将返回用户输入搜索的确切字符串。它只适用于谷歌，就像你可以为其他搜索引擎构建功能一样。

但是您可以使用任何分析工具，如谷歌分析或任何其他工具作为替代。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T17:43:30.927

检查这一点的唯一方法是在 HTTP 标头中查找 Referer 字段，您可能会在其中找到用户来自的 URL。如果它是一个谷歌 URL，那么你必须自己解析它。

# jquery - 当我做一个 Ajax 帖子时，在 Django 中看不到提交的数据

> ID：15840120
> 
> 赞同：1
> 
> 时间：2013-04-05T17:40:08.907
> 
> 标签：jquery, html, ajax, django

这是我的html页面：

```
<div>
<form id="assignment_form" action="/submit-assignments/" method="post" accept-charset="utf-8">
    {% csrf_token %}
    <!-- Fields here -->
    <select id="user_list" multiple='multiple' size="10">
    {% for u in users %}
        <option value="{{ u.iduser }}" >{{ u.get_long_name }}</option>
    {% endfor %}
    </select>
    <select id="assigned_list" multiple='multiple' size="10" style="width: 200px">
    </select>
    <input id="assign" type="submit" value="Assign"/></input>
</form>
</div>
<script type="text/JavaScript">
    $(document).ajaxSend(function(event, xhr, settings) {
        //cookies stuff
    }

    $(document).ready(function() {
        $("#assignment_form").submit(function(event){
            event.preventDefault();
            $.ajax({
                type:"POST",
                url:"/brewkeep/submit-assignments/",
                data: $("#assignment_form").serialize(),
                success: function(data) {
                     alert(data);
                }
            });
       });
    });
</script> 
```

这是我的 Django 视图：

```
def submit_assignments(request):
    print request.POST
    return HttpResponse("Success!") 
```

单击`Assign`按钮后，我查看屏幕输出，这是我看到的打印内容：

```
<QueryDict: {u'csrfmiddlewaretoken': [u'LqSWcQDMt8YGoBqpBMw8B8mfebC9ZyEo']}> 
```

如何访问我提交的数据？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:47:32.350

你`select`的 s 必须有一个`name`属性：

```
<select id="user_list" name="user_list" multiple='multiple'  size="10">
{% for u in users %}
    <option value="{{ u.iduser }}" >{{ u.get_long_name }}</option>
{% endfor %}
</select>
<select id="assigned_list" name="assigned_list" multiple='multiple' size="10" style="width: 200px">
</select> 
```

[HTML 规范](http://www.w3.org/TR/html401/interact/forms.html#successful-controls)：

> 成功的控件必须在 FORM 元素中定义，并且必须具有控件名称。

[w3schools`<input>`名称属性](http://www.w3schools.com/tags/att_input_name.asp)：

> *注意：*只有具有 name 属性的表单元素才会在提交表单时传递其值。

# c# - 锁定期间隐含的获取和释放语义？

> ID：15840122
> 
> 赞同：2
> 
> 时间：2013-04-05T17:40:16.247
> 
> 标签：c#, multithreading, volatile

[volatile](http://msdn.microsoft.com/en-us/library/aa645755%28v=vs.71%29.aspx)关键字用于保护字段免受某些编译器优化：

> 对于非易失性字段，重新排序指令的优化技术可能会导致多线程程序在没有同步的情况下访问字段的意外和不可预测的结果，例如锁定语句提供的那些（第 8.12 节）

但是，MSDN 似乎没有明确说明是[`lock`](http://msdn.microsoft.com/en-us/library/c5kehkcz%28v=vs.71%29.aspx)仅对.`expression``statement_block`

如果我有一段代码：

```
lock(obj_something){
    boolFoo = true;
    if(boolIsFriday)
        doSomething(anything);
} 
```

和隐含`boolFoo`的`boolIsFriday`易失性（即使它没有被声明`volatile`）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T17:53:00.020

这是一个困难的话题，我建议你从阅读 Joe Duffy 的书开始[`Concurrent Programming on Windows`](http://www.bluebytesoftware.com/books/winconc/winconc_book_resources.html)——这是 1000 页纯知识。

回答您的问题：不，变量不会“隐式易变”

`lock`除了相互排斥之外，它确实提供的是获取和释放的栅栏。

这意味着对编译器、抖动、cpu 或介于两者之间的任何东西可以应用的重新排序优化设置了一些限制。

尤其：

获取锁可以防止任何内存访问在栅栏 **之前移动。**
释放锁可以防止任何内存访问在栅栏**之后移动。**

* * *

`boolFoo`在您的示例中，在获取锁之前，任何线程都无法观察到写入。

类似地，读取`boolIsFriday`和`anything`不能使用在获取锁之前读取的值。

在释放时，在释放锁时写入`boolFoo`必须可见，该`doSomething`方法执行的任何写入也必须可见。

* * *

回答您的评论：这不会阻止其他线程重新排序。

如果您有另一个线程`B`执行此操作：

```
// do some work while your lock code is running
for ( int i = 0 ; i < ( int ) 1e7 ; i++ ) ;

var copyOfBoolFoo = boolFoo; 
```

那么它**是**可能`copyOfBoolFoo`的`false`。

那是因为在循环和你的锁代码运行之前，某些东西可能会向前看`for`，并决定读取`boolFoo`和缓存该值。

线程中没有任何东西`B`可以防止这种情况发生，所以它可能会发生。

如果您在读取`boolFoo`​​in thread之前放置了一个栅栏（例如锁！） `B`，那么您**将**保证读取最新值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T17:43:24.337

不，lock 语句仅 - 直接 - 保护对您“锁定”的对象的访问。

关键在于，如果您在多个地方使用一个对象作为锁源，那么由于拥有锁，因此在任何时候只有一个代码块（在锁范围内）可以运行。

`boolFoo`并且`boolIsFriday`仅当它们在同一对象的锁内被独占访问时才受到保护（在这种情况下`obj_something`）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T17:46:16.320

> 但是，MSDN 似乎没有明确说明 lock 是仅对表达式中使用的对象应用优化保护，还是对 statement_block 中的所有语句应用优化保护。

后者。

> boolFoo 和 boolIsFriday 是否是隐含的 volatile（即使它没有被声明为 volatile）？

不完全，不。的想法`volatile`是在任何时候访问对象时都会应用内存屏障。`lock`仅将内存屏障应用于对象的*那一种用途*。因此，不会有从`lock`语句内部和外部混合（某些类型的已定义）操作的优化，但是如果其他东西在没有`lock`块的情况下访问该变量，您仍然可能会遇到麻烦。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-09T14:57:20.500

让我们仔细看看您的示例，以帮助回答您的问题。我将稍微调整您的代码，以便在读取`boolIsFriday`发生时更清楚。行为仍然相同。这就是我们所拥有的。

```
lock(obj_something)
{
    boolFoo = true;
    var register1 = boolIsFriday;
    if (register1)
    {
        var register2 = anything;
        doSomething(register2);
    }
} 
```

接下来，我们将用箭头符号装饰这段代码，以帮助可视化内存屏障的位置。我将使用 ↑ 箭头和 ↓ 箭头分别表示*释放栅栏*和*获取栅栏*。易失性写入具有释放语义，因此它们将在写入*之前*放置一个 ↑ 。易失性读取具有获取语义，因此它们将在读取*之后*放置一个↓ 。把箭头想象成把一切都推离它。没有其他读取或写入可以在箭头头部上方或下方浮动。如果您以我刚刚描述的术语来考虑它，那么这应该准确地反映内存屏障的作用。它也恰好与规范一致。

在我们开始之前，还有几件事要提及。首先，虽然没有其他内存访问被允许越过箭头的头部，但它们仍然被允许越过尾部。同样，这符合规范的措辞。其次，一旦生成了内存屏障，它们就会被锁定到位。生成它们的机制，如易失性读取或写入，仍然可以自由移动。换句话说，箭头不能移动，但相应的读或写可以。第三，a`lock`产生一个完整的内存屏障。

* * *

**锁内的内存访问是否隐式易失？**

为了回答这个问题，我将在您的示例中添加箭头符号。

```
↑
lock(obj_something)
↓
{
    boolFoo = true;
    var register1 = boolIsFriday;
    if (register1)
    {
        var register2 = anything;
        doSomething(register2);
    }
↑
}
↓ 
```

注意箭头的位置。代替没有其他内存生成器，只有`lock`注入它们。现在有几个事实应该是显而易见的。

1.  锁块*之外*的任何内存访问都不能在块*内*移动。
2.  锁块*内*的任何内存访问都不能移出块*外*。
3.  *只要满足长点#2，锁块内*的所有内存访问都可以自由移动。

**这应该会立即回答您的一个问题。不，`boolFoo`并且`boolIsFriday`不要从`lock`. 他们仍然可以自由移动，尽管现在有一些限制。**

那么如果`boolFoo`和`boolIsFriday`都被标记为`volatile`. 让我们来看看会发生什么。

```
↑
lock(obj_something)
↓
{
    ↑
    boolFoo = true;
    var register1 = boolIsFriday;
    ↓
    if (register1)
    {
        var register2 = anything;
        doSomething(register2);
    }
↑
}
↓ 
```

注意箭头已放置。写入前有一个↑箭头`boolFoo`，表示没有其他内存访问可以通过易失性写入向下浮动。同样，读取后有一个↓箭头`boolIsFriday`表示没有其他内存访问可以通过易失性读取浮动。现在有两个特殊的事实显而易见。

1.  写入`boolFoo`和读取`boolIsFriday`可以交换。请注意没有箭头可以防止这种情况发生。
2.  写入`boolFoo`可以一直浮动到`lock`块的末尾（当然假设这`dosomething`不会产生内存屏障。正是 ↑ 箭头结束了锁定块，防止它进一步下降。
3.  的读取`boolIsFriday`不能向下浮动很远，因为在某些时候它必须与读取的交换位置`anything`。`anything`但是，如果发生这种情况，那么这在语义上与在表示 volatile 读取的 ↓ 上方浮动相同。我们已经说过阻止了移动。

* * *

**锁是否限制表达式或块内容的优化？**

最后回答你的另一个问题。该`lock`关键字确实对锁定表达式和锁定块本身的内容都有一些影响。让我们来看看这是如何发生的。我设计了一个带有有趣表达式的 lock 语句。

```
object foo;
lock (foo=bar)
{
  // contents of lock here
} 
```

你看到我做了什么吗？我在表达式中放置了一个赋值。如果我们重新组织它以更好地了解这里发生的事情，它会是什么样子。

```
object foo;
foo = bar;
object expression = foo;
↑
lock (expression)
↓
{
  // contents of lock here
↑
}
↓ 
```

现在注意以下几点。

1.  由于语句生成的↑ ，write to`foo`是不允许下浮的。`lock`这是锁表达式影响的一种方式。
2.  我们已经讨论过锁块的内容现在对它们的移动施加了约束。

**因此，要回答您的问题，`lock`关键字对锁定表达式和锁定块的内容都设置了优化约束。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T17:48:06.613

保证块内的所有语句作为一个单元是有序的，相对于在一个持有相同锁的块内执行的任何其他语句，作为一个单元。不多也不少。

因此，如果您有：

```
lock (foo) // in one thread
{
  x();
  y();
}

lock (foo) // in another
{
  a();
  b();
} 
```

您可以保证执行顺序是`x y a b`或`a b x y`。

您防止`x a b y`, `x a y b`, or`x`和同时`a`运行并爆炸。

# backbone.js - 创建 Backbone Collection 对象的实例时是否可以传递 url 参数？

> ID：15840127
> 
> 赞同：0
> 
> 时间：2013-04-05T17:40:24.637
> 
> 标签：backbone.js, backbone.js-collections

创建 Collection 对象的实例时是否可以传递 url 参数？我想创建一个包含所有页面数据的集合数组。

```
var Collection = Backbone.Collection.extend({ 
    model: MainModel,
    initialize: function (models,options) {
        var self = this;
        self.fetch();   
    }
});

var Collections = {
    news : new Collection({url : "../data/news"}),
    projects : new Collection({url : "../data/projects"}),
    home : new Collection({url : "../data/home"})
}; 
```

这可能是这样，还是我做错了什么？我需要为每个页面创建一个集合吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:59:32.110

通常，您需要为每种类型的模型创建一个新集合

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T02:27:11.933

我也发现了这个问题，我得到了解决.. 这是快速答案。

集合对象

```
 var Events = Backbone.Collection.extend({
        initialize : function(models,options){
            this.model = options.model ,
            this.url = options.url
        }
    }); 
```

这是我创建新集合实例的方式

```
var events = new Events([],{ model : modelName , url : 'urlToGo' }); 
```

希望你能帮助

# asp.net - 无法在控制台应用程序中创建 HttpClient 实例，mvc 4 web api

> ID：15840134
> 
> 赞同：1
> 
> 时间：2013-04-05T17:40:43.070
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, asp.net-web-api

我已经为 web api 安装了 nuGet 包并尝试在控制台应用程序中创建一个 HttpClient 实例（我添加了 System.Net.Http 参考），但我得到一个奇怪的编译错误：

> 错误 1 ​​找不到类型或命名空间名称“HttpClient”（是否缺少 using 指令或程序集引用？） C:\Users\Aleksey_Chepovoi@epam.com\Documents\Visual Studio 2012\Projects\ConsoleApplication\Program。 cs 14 21 控制台应用程序

已经尝试重新启动 VS 2012 并创建一个新的控制台项目。

此错误的原因可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T17:54:48.340

您正在寻找的参考是 System.Net.Http HttpClient 唯一需要的 nuget 包是这个[http://nuget.org/packages/Microsoft.Net.Http/2.0.20710.0](http://nuget.org/packages/Microsoft.Net.Http/2.0.20710.0)

只需确保您使用的是 .net 4.5 或 .net 4 full。.net 4 的客户端配置文件将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T18:05:44.663

System.Net.Http：提供基本 HttpClient 和相关类的主要 NuGet 包

System.Net.Http.Formatting：添加对序列化、反序列化的支持以及在 System.Net.Http 之上构建的许多附加功能

System.Json：添加对 JsonVaue 的支持，这是一种读取和操作 JSON 文档的机制

你可能也需要这些。[http://code.msdn.microsoft.com/Introduction-to-HttpClient-4a2d9cee](http://code.msdn.microsoft.com/Introduction-to-HttpClient-4a2d9cee)将为您提供有关 HttpClient 的基本概念

# javascript - jQuery 字符数 - 未调用函数

> ID：15840135
> 
> 赞同：0
> 
> 时间：2013-04-05T17:40:43.597
> 
> 标签：javascript, jquery, forms

我正在创建一个 jQuery 函数来计算文本字段中的字符数量并输出数字。但它似乎并没有在密钥释放时被调用。带有文本字段的页面是一个外部页面，它被包含在外部文件中`index.php`，并且`js`被包含在外部`js`文件中。

```
 $('#commentField').keyup(function () {
    alert("functionCalled");
    var max = 500;
    var len = $(this).val().length;
    if (len >= max) {
      $('#charNum').html(' you have reached the limit');
    } else {
      var char = max - len;
      $('#charNum').text(char + ' characters left');
    }
  }); 
```

文字区：

```
<input type="text" name="commentArea" placeholder="Comment..." autofocus="autofocus" id="commentField"/> 
```

`div`要填充的：

```
<div id="charNum">here</div> 
```

外部`js`文件可以正常访问，但似乎没有调用该函数。为什么这不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T17:46:42.267

如果是动态内容，则需要调用 .on。但是，我会将“body”更改为更接近 dom 中的元素。

```
$('body').on('keyup','#commentField',function () {
    alert("functionCalled");
    var max = 500;
    var len = $(this).val().length;
    if (len >= max) {
      $('#charNum').html(' you have reached the limit');
    } else {
      var char = max - len;
      $('#charNum').text(char + ' characters left');
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T17:45:19.170

`char`是 javascript 中的保留字，因此您的 keyup 函数未编译。尝试使用不同的名称。

编辑：

它似乎适用于[这个小提琴](http://jsfiddle.net/HcNyn/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T17:43:45.533

您的事件处理程序是否在文档就绪函数中？

```
$(function () {

   //put your code here

}); 
```

接下来，您的输入在您的事件绑定时是否存在于页面上？换句话说，您的元素是动态添加的吗？如果是这样，请尝试事件委托。

# java - jface.resource.ImageDescriptor - 如何判断将正确显示哪种文件属性？

> ID：15840138
> 
> 赞同：0
> 
> 时间：2013-04-05T17:41:01.120
> 
> 标签：java, image, swt, jface

生无可恋。

我的应用程序中有以下代码来加载 PNG 文件：

```
public static Image loadImageFromLocal(Class<?> clazz, String fileName) {
   ImageDescriptor imageDesc = ImageDescriptor.createFromFile(clazz, fileName);
   Image image = imageDesc.createImage();
   return image;
} 
```

到目前为止一切顺利，直到我尝试从 Internet 下载一些文件并使用相同的逻辑加载它们。下载的文件没有正确显示。当我应用我的 SWT 程序逻辑来显示原始文件时，它工作正常。

我试图找出文件之间有什么区别——正确显示的是 8 位，而现在下载的当然是 32 位色深。

然后我将下载的颜色深度从 32 位更改为 8 位。没有任何反应，我的程序仍然无法正确显示它们。

我也试过把下载的文件格式改成JPG，还是不行。

我应该去哪个方向来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:31:00.740

其实是Eclipse内部问题。再次在 Eclipse 中删除并导入项目后，一切正常。

# opengl - 注入帧缓冲区

> ID：15840143
> 
> 赞同：13
> 
> 时间：2013-04-05T17:41:19.250
> 
> 标签：opengl, framebuffer, code-injection

我从小就一直在“破解”我最喜欢的游戏之一，并且我设法能够拦截 OpenGL 调用并使用 opengl32.dll 包装器注入 C++ 代码。我已经为此想出了许多很酷的用途，但我目前的目标是在这个旧游戏中实现后处理 glsl 着色器，让它看起来更现代一点。该游戏最初是在 90 年代后期发布的，因此它对 OpenGL 的使用及其渲染代码是有限的/原始的/过时的。

我已经能够通过注入代码来初始化和使用 glsl 着色器程序成功地生成顶点和片段着色器，但我的问题在于产生帧缓冲区/将我的场景渲染到纹理以作为采样器发送到我的片段着色器。据我所知，我制作的纹理通常都是黑色的。

很难找到与我正在做的事情和检查原始 opengl 调用相关的资源（我一直试图通过阅读单帧游戏的 opengl 跟踪来确定在哪里插入代码），所以我没有能够把我的头绕在我做错的事情上。

我尝试将代码放在很多地方，但目前，我在游戏调用后绑定帧缓冲区，`wglSwapBuffers()`并且在下一次调用之前立即解除绑定`glFlush()`，但我不确定是否设置了多个视口，或矩阵运算，或在这些时间之间创建的任何其他东西都会以某种方式扰乱帧缓冲区。

这是初始化帧缓冲区的代码：

```
void initFB()
{
  /* Texture */
  glActiveTexture(GL_TEXTURE0);
  glGenTextures(1, &fbo_texture);
  glBindTexture(GL_TEXTURE_2D, fbo_texture);

  glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, 1920, 1080, 0, GL_RGBA, GL_UNSIGNED_BYTE, NULL);

  glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
  glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
  glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
  glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

  glBindTexture(GL_TEXTURE_2D, 0);

    /* Depth buffer */
  glGenRenderbuffers(1, &fbo_depth);
  glBindRenderbuffer(GL_RENDERBUFFER, fbo_depth);
  glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH_COMPONENT16, 1920, 1080);  
  glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_RENDERBUFFER, fbo_depth);
  glBindRenderbuffer(GL_RENDERBUFFER, 0);

  /* Framebuffer to link everything together */
  glGenFramebuffers(1, &fbo);
  glBindFramebuffer(GL_FRAMEBUFFER, fbo);

  glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, fbo_texture, 0);
  glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_RENDERBUFFER, fbo_depth);

  GLenum status;
  if ((status = glCheckFramebufferStatus(GL_FRAMEBUFFER)) != GL_FRAMEBUFFER_COMPLETE) {
    fprintf(stderr, "glCheckFramebufferStatus: error %p", status);
  }

  glBindFramebuffer(GL_FRAMEBUFFER, 0);
} 
```

这是之后调用的代码`wglSwapBuffers`：

```
GLenum fboBuff[] =  { GL_COLOR_ATTACHMENT0 };
glBindFramebuffer(GL_FRAMEBUFFER, fbo);
glDrawBuffers(1, fboBuff);
glPushAttrib(GL_VIEWPORT_BIT | GL_ENABLE_BIT); 
```

这是之前调用的代码`glFlush()`：

```
glBindFramebuffer(GL_FRAMEBUFFER, 0);
glPopAttrib(); // Restore our glEnable and glViewport states  

... Draw an Overlay containing with fbo texture binded ... 
```

[这](http://pastebin.com/YfQWyYS0)是单帧的 gl 轨迹。

它有近 800 行，但训练有素的 opengl 眼睛应该能够看到什么时候发出的呼叫。我删除了数百行我至少理解的绘图调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-16T07:25:53.993

我不完全确定你想做什么。运行游戏渲染给你fbo？在上面渲染东西？首先，尝试挂钩所有 wgl 和 gl 调用。[http://research.microsoft.com/en-us/projects/detours/](http://research.microsoft.com/en-us/projects/detours/)是一个很好的起点。

但是再次阅读您的帖子，我想您已经知道了。知道你想做什么会有所帮助。

*   渲染叠加层：Hook SwapBuffers，在那里做你的事情
*   捕获：再次挂钩 SwapBuffers
*   渲染到纹理并做后期效果：Hook BindFramebuffer。但是有一个问题：帧缓冲区 0 是启动时的默认值，因此不使用它的代码将不会调用 BindFramebuffer 来启动，只会将其设置回 0。尝试挂钩 glClear 或任何首先出现的调用。

欢迎私信我了解更多详情。听起来像是一个有趣的教育项目，我很乐意帮助:)

我只是在发布之前再次阅读了您的帖子，您的问题可能会容易得多。作为 Windows 程序，您的目标假定 fbo 0 在开始渲染帧时已绑定。就这样做吧。在它完成之前，它会切换回 fbo 0。不要做 push/pop 的事情。只需确保您的 fbo 与预期的大小相同（在 Windows 上更大也可以）。不过，您需要挂钩 BindFramebuffer。每当您的游戏调用 bind 0 时，您都需要绑定您的。但是没有必要做任何其他事情，比如触摸视口，游戏已经处理好了。当您最终在您的 swapBuffers 挂钩中渲染时，只需确保恢复您更改的任何内容。

此外，您真的不需要 DrawBuffers 调用。它把我的痣弄糊涂了，可能也把你的目标弄糊涂了。:) 您的目标执行 GL 1.2 代码，您正在执行 3...4...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-16T18:28:26.593

根据我的经验，对于无着色器 GL1.x 应用程序的 GL 拦截方法，您尝试做的事情是完全可能的。

正如我快速破解的那样，您现在可以忘记 FBO，并`glCopyTexSubImage()`在原始应用程序交换缓冲区时使用，将渲染的内容复制到纹理中并为您的后处理函数发送文本。

在执行这种 GL 注入方法时，您应该注意一些事项：

*   可能有不同的 GL 上下文（尽管这对于 CAD 应用程序比典型游戏更有可能）
*   旧的 GL 允许用户直接管理对象 ID - 无需调用需要的`glGen*`函数（Nice 应用程序仍然这样做）。如果您自己创建新对象，原始应用程序将不知道并且可能会重复使用这些 ID。如果你想做到这一点，你将不得不透明地重新映射对象 ID（可能使用一些哈希表）——这是很多工作，因为涉及到许多 GL 函数。另一个邪恶的技巧是自己使用一些不太可能的对象 ID。
*   GL 是一个状态机，所以你应该非常小心地恢复游戏所期望的状态（尽可能）。OTOH 手，您还应该准备好原始应用程序在您获得更改以拦截它时可能设置了任何 GL 状态 - 所以您可能需要重置很多东西。

我可以向您保证，确实可以将渲染纹理注入到一些旧的 GL 应用程序中，就像我自己做的那样。与 Quake3 和其他当时著名的游戏配合得非常好。我没有看到您当前的方法有明显错误。不过我有几件事：您还应该拦截`glDrawBuffer()`应用程序将要执行的任何绘图`GL_BACK`（假设这里是双缓冲应用程序）到您的颜色附件。您发布的日志没有跟踪此功能，因此游戏可能在启动时设置了一次。

我也不明白你为什么用`glFlush`. 它不是特别适合任何事物的好标记。如果游戏使用双缓冲，SwapBuffers 将是您可以获得的“帧”的最佳近似值。只需在上下文创建后直接插入您自己的初始化对象创建内容（您也可以拦截`wglCreateCintext()`和朋友），并且已经设置了对 FBO 的渲染。在 上`SwapBuffers`，只需使用着色器将纹理的内容绘制到真实的后台缓冲区，进行真实的缓冲区交换，然后将渲染恢复为 FBO 设置。

我不知道你是否已经意识到这一点，但是开源项目[Chromium](http://chromium.sourceforge.net/)确实为 OpenGL 拦截提供了一个很好的 fframework。虽然这可能集中在分布式集群渲染上，但它也可以在本地设置中工作，并允许您编写 SPU（流处理单元），您可以在其中简单地为您想要挂钩的任何 GL 函数指定 C 函数. 该项目已经过时并且在 5 年左右的时间里没有积极开发，因为它设计的那种 GL 流操作不适用于更现代的可编程管道，但它仍然可以很好地与旧的 GL1 一起使用。 x 固定功能流水线...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T02:51:19.463

据我了解，您正在尝试更新旧游戏的图形方面，但您在原始代码中遇到限制，阻止您改装所需的部件。

虽然我没有相关的游戏编码经验，但是当我有一个我正在尝试改造的应用程序时，我会拆解应用程序来研究它的结构，并有选择地应用内存中的补丁来重定向某些功能和代码段到我提供的替代品。

我将预加载一个共享库，该库将使用条件/无条件跳转/调用指令覆盖程序内存的某些部分，并有选择地 NOP'ing，这样我的代码就成为程序的一个组成部分。它绝对不是优雅的，但它让我能够快速解决原始代码中的缺陷。

# java - android Xml 属性 android:onClick="..." 如何在幕后工作？

> ID：15840144
> 
> 赞同：4
> 
> 时间：2013-04-05T17:41:22.933
> 
> 标签：java, android, xml

我问这个有点是因为我很感兴趣，主要是因为我害怕使用我不理解的属性\代码。据我了解，Java 中的所有事件都通过实现适合该事件的侦听器接口来工作。如果我在我的活动中为 2 个按钮实现 onClick 并为第三个定义一个具有 android:onClick="..." 属性的方法会发生什么？我找到了这篇[文章](http://androidcookbook.com/Recipe.seam?recipeId=2359)，所以在阅读它之后，我了解到它是使用实现 OnClickListener 的匿名类以探测方式实现的，但我想确定\了解更多关于它的信息，以及我可能会以何种方式破坏某些东西\使用这些知识对我有利？android[参考](http://developer.android.com/reference/android/view/View.html#attr_android%3aonClick)不清楚它是如何工作的，，，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T17:48:02.953

它使用反射来找出在运行时调用的方法。这是一个视图的属性，所以视图有相关的代码来查看是否设置了这个属性，然后找出活动上的方法名称并触发它。

View 始终绑定到特定活动的上下文，因此能够通过反射调用此公共方法。

您可以在此处查看视图类的源代码。您可以看到第 2003 行，正在处理这种情况。

[View 类的源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.1_r2/android/view/View.java#2003)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T17:56:56.750

为了以更简单的方式回答您的问题，您在此处指定的名称是加载该布局的 Activity 中的公共方法。该方法必须采用 View 类型的单个参数。

如：

```
android:onClick="myMethod"

public void myMethod(View view) {
} 
```

# arrays - Javassist CtMethod.make() 在使用空括号的数组初始化时给出“语法错误”

> ID：15840146
> 
> 赞同：1
> 
> 时间：2013-04-05T17:41:25.993
> 
> 标签：arrays, syntax, syntax-error, brackets, javassist

我正在使用 Javassist 构建一个运行时类。我正在创建一个 CtMethod：

```
CtMethod m = CtMethod.make(constructMethodSource, bclass); 
```

在“constructMethodSource”里面是这一行，它是合法的 Java 代码行：

```
java.lang.Object[] args = new java.lang.Object[] {}; 
```

这样，make() 会引发语法错误：

```
[source error] syntax error near "bject[] {};" 
```

我使用它，而是以不同的方式初始化我的空数组：

```
java.lang.Object[] args = new java.lang.Object[0]; 
```

这让 Javassist 很高兴，但我想知道为什么 Javassist 在第一行就卡住了？这是一个已知的限制或错误还是我在做一些愚蠢的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:42:36.847

研究过这个，我能想到的最好的答案是，这是一个遗漏的错误。根据文档，它“应该工作”，但事实并非如此。幸运的是，解决方法很简单，只需使用“new Object[0];”初始化您的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:14:38.577

[http://www.csg.is.titech.ac.jp/~chiba/javassist/tutorial/tutorial2.html](http://www.csg.is.titech.ac.jp/~chiba/javassist/tutorial/tutorial2.html)（第 4.7 节）说：数组初始值设定项，由括号 { 和 } 括起来的以逗号分隔的表达式列表，是除非数组维度为一，否则不可用。

# android - 在浏览器中打开特定链接，但不在 WebView 中 - Eclipse Android

> ID：15840148
> 
> 赞同：0
> 
> 时间：2013-04-05T17:41:31.907
> 
> 标签：android

我为我的网站创建了一个应用程序：当我打开应用程序时，它会在 WebView 中显示我的网站，并且我网站中的所有链接也会在 WebView 中打开。但是网站上有一个按钮，其链接看起来像“ [http://www.domain.com/out/some-text](http://www.domain.com/out/some-text) ”。如果有人点击此链接，该链接应在 Android 的默认浏览器中打开，而不是在 WebView 中。

这是代码：

```
public class WebViewClientDemoActivity extends Activity {
/** Called when the activity is first created. */

WebView web;
@SuppressLint("SetJavaScriptEnabled")
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    web = (WebView) findViewById(R.id.webview01);

    web.setWebViewClient(new myWebClient());
    web.getSettings().setJavaScriptEnabled(true);
    web.loadUrl("http://www.domain.com");
}

public class myWebClient extends WebViewClient
{

    @Override
    public void onPageStarted(WebView view, String url, Bitmap favicon) {
        // TODO Auto-generated method stub
        super.onPageStarted(view, url, favicon);
    }

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        // TODO Auto-generated method stub

        view.loadUrl(url);
        return true;

    }

    @Override
    public void onPageFinished(WebView view, String url) {
        // TODO Auto-generated method stub
        super.onPageFinished(view, url);

    }
}

// To handle "Back" key press event for WebView to go back to previous screen.
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) 
{
    if ((keyCode == KeyEvent.KEYCODE_BACK) && web.canGoBack()) {
        web.goBack();
        return true;
    }
    return super.onKeyDown(keyCode, event);
}
// Inflate the menu
        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
           MenuInflater inflater = getMenuInflater();
           inflater.inflate(R.menu.option, menu);
           return true;
        }

        // Handle click events
        @Override
        public boolean onOptionsItemSelected(MenuItem item) {
           switch (item.getItemId()) {
           case R.id.add:
              Toast.makeText(this, "Android App V1.1", Toast.LENGTH_SHORT).show();
              return true;
           case R.id.help:
               finish();
               System.exit(0);
              return true;

           default:
              return super.onOptionsItemSelected(item);
        }
        }
} 
```

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T17:45:44.247

尝试：

```
startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(url))); 
```

进入“shouldOverrideUrlLoading”。

# forms - Codeigniter 表单验证：在哪里设置规则？

> ID：15840151
> 
> 赞同：0
> 
> 时间：2013-04-05T17:41:37.403
> 
> 标签：forms, codeigniter, validation

我正在尝试实现“瘦控制器”、“胖视图”和“胖模型”结构。但是，我经常受到 form_validation 库的阻碍。

如果该控制器处理具有 2-3 个字段的表单，那还不错。

但是当我有 10 个字段时，事情开始变得很长。然后我开始进行回调，设置 form_error 消息，我的控制器刚刚达到数百行。

是否有关于在哪里设置规则的一般做法？在另一个控制器中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T17:46:55.753

您可以尝试将它们放入配置文件中，正如[此处](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#savingtoconfig)所述，我发现它很难使用（我只是将规则放在控制器中并闭上眼睛），但也许它适合您的需要。

# javascript - prototype.js 和其他一些 js 的冲突

> ID：15840153
> 
> 赞同：-1
> 
> 时间：2013-04-05T17:41:51.920
> 
> 标签：javascript, prototypejs

我对 javascript 了解不多，也没有任何朋友知道 javascript :( 这就是为什么我再次向 stackoverflow 社区寻求帮助。我的脚本有一个新模板，但问题是我有一些我的脚本与模板中的某些 js 一起工作所需的prototype.js 发生冲突，我不知道如何解决这个问题，因为没有注释 js 模板将无法正常工作，主 js 和脚本不会在没有原型 js 的情况下正常工作我不知道是否有人有时间查看脚本并可能给出合并它们的解决方案，因为是大脚本，最后我会尝试。

我已经在某些位置上传了脚本并将链接放在这里

```
pastebin.com/n5dnr6i7 here is the main.js required for template

pastebin.com/YisnTuBM comments.js recuired for template

pastebin.com/Cibn1NA2 prototype.js required for main script 
```

注释和 main 在加载原型时无法正常工作

先感谢您！

编辑：我很抱歉在 Java 中发布此内容，感谢您的更正

编辑2：问题是网络脚本是用IonCube加密的，我只能访问模板html文件，这有点复杂，因为模板是我使用的网络脚本的修改/破解版本，它是一个视频管脚本，例如我使用的原始 web 脚本使用包含在 video.html 中的 comments.html 破解/修改是不同的，我必须在新的 video.html 模板中包含旧的 comments.html 文件，现在如果我使用jquery-1.9.1，当我点击它时，评论区框会向下滑动，但如果我使用原型，我无法评论视频，我可以评论视频，但评论区框被冻结，它不会向下滑动我点击它，我不知道如何合并它们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T17:57:29.037

我已将这些文件添加[到 jsfiddle](http://jsfiddle.net/eEEq9/1/)，您确定甚至需要 Prototype 吗？我已将其注释掉并替换为 jQuery（因为注释文件似乎需要它，组合的 [main] 文件也需要它）。

这样做后，我在页面加载时没有错误。

```
<!-- prototype -->
<!--script src="http://pastebin.com/raw.php?i=Cibn1NA2"></script-->

<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<!--script>jQuery.noConflict();</script-->

<!-- comments -->
<script src="http://pastebin.com/raw.php?i=YisnTuBM"></script>

<!-- main = Modernizr + extras -->
<script src="http://pastebin.com/raw.php?i=n5dnr6i7"></script> 
```

**编辑评论：** [第二小提琴](http://jsfiddle.net/nTExW/6/)展示 jQuery 的使用`noConflict()`：

设置 - 要么不注释两个脚本标签，要么尝试注释一个或另一个，看看你得到了哪些错误。

测试使用[`addClass`](http://api.jquery.com/addClass/)jQuery 的[`addClassName`](http://prototypejs.org/doc/latest/dom/Element/addClassName/index.html)函数和 Prototype 的函数来查看哪个版本`$`处于活动状态。一种或其他方法将失败，具体取决于当时哪种`$`方法处于活动状态。

```
<!-- Comment one of these script tags, or leave both uncommented for noConflict mode -->
<!-- jQuery must come second in order to properly use noConflict -->
<script src="https://ajax.googleapis.com/ajax/libs/prototype/1.7.1.0/prototype.js"></script>
<script src="http://code.jquery.com/jquery-1.9.1.js"></script> 
```

测试：

```
// local var for jQuery - this might be undefined if jQuery not imported
var jQuery = window["jQuery"];
// if jQuery exists, put into noConflict mode - i.e. return jQuery $ to Prototype $
if (jQuery) jQuery.noConflict();

try {
    // addClassName is prototype only, not jquery
    $("output").addClassName("prototype");
    setOutput("$.addClassName ok");
} catch (e) {
    setOutput("Prototype > $.addClassName error: " + e);
}

try {
    // addClass is jquery only, not prototype
    $("output").addClass("jquery");
    setOutput("$.addClass ok");
} catch (e) {
    setOutput("jQuery > $.addClass error: " + e);
}

try {
    // try using jQuery with the 'full' jQuery name
    jQuery("output").addClass("jquery");
    setOutput("jQuery.addClass ok");
} catch (e) {
    setOutput("jQuery > jQuery.addClass error: " + e);
}

// wrap the code that needs $ to be jQuery $ in a function.
// and pass in jQuery to be aliased as $ within the function.
(function($) {
    try {
        $("output").addClass("jquery");
        setOutput("$.addClass ok when wrapped");
    } catch (e) {
        setOutput("jQuery > wrapped $.addClass error: " + e);
    }
}(jQuery)); 
```

包含 Prototype 和 jQuery 时的示例输出：

```
$.addClassName ok
jQuery > $.addClass error: TypeError: $(...).addClass is not a function
jQuery.addClass ok
$.addClass ok when wrapped 
```

# javascript - 同时 setIntervals - 只有第一个运行

> ID：15840154
> 
> 赞同：4
> 
> 时间：2013-04-05T17:41:52.743
> 
> 标签：javascript, jquery, loops, setinterval

我正在设计一个在背景中有移动云的网页。我的代码使用 jQuery，看起来像这样。

```
browserWidth = 0;
browserHeight = 0;
clouds = 4; 
cloudSpeed = 50;

$(function() {  
    browserWidth = $(window).width();
    browserHeight =  $(window).height();

    for(i = 0; i < clouds; i++) {
        createCloud(cloudSpeed);
    }
});

function moveCloud(cloud) {
    offset = cloud.offset();
    posX = offset.left;
    posX--;

    if(posX < -250) {
        posX = browserWidth;
    }

    cloud.offset({
        left: posX
    });
}

function createCloud(speed) {
    posY = Math.floor(Math.random() * (browserHeight / 2.5));
    posX = Math.floor(Math.random() * (browserWidth - 255));

    cloud = $("<div></div>").addClass("cloud").appendTo("body").offset({
        top: posY,
        left: posX
    });

    setInterval(function() {
        moveCloud(cloud);
    }, speed);
} 
```

基本上它使用`createCloud`函数来创建四朵云（带有背景图像的 div），它初始化 div 并使用`setInterval`. 在间隔函数`moveCloud`中，我调用将 div 向左移动一个像素的函数。请参阅上面的代码。

我的问题是它只移动了一个 div。我读过同时使用多个间隔应该没问题。

代码有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T17:44:19.580

问题是您只有一个全局的`cloud`.

`var`在声明前添加：

```
var cloud = $("<div></div>").addClass("cloud").appendTo("body").offset({ 
```

当您不使用[var](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/var)关键字时，您将变量设为全局变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T17:45:06.117

您没有声明`cloud`为局部变量，而是在全局上下文中。有关更多信息，请参阅：[http ://www.webdevelopersnotes.com/tutorials/javascript/global_local_variables_scope_javascript.php3](http://www.webdevelopersnotes.com/tutorials/javascript/global_local_variables_scope_javascript.php3)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T19:44:18.050

首先，您的问题很糟糕，其次，这不是您问题的答案，而是对动画的调整。
我为云添加了不同的不透明度层，增加了动画速度的间隔以使其更逼真（更近的云移动比远处的更快）并为云生成随机大小，这是代码（纯 JavaScript）：

```
var clouds = 4,
    cloudSpeed = 20,
    browserWidth = window.innerWidth,
    browserHeight = window.innerHeight,
    int = 5;

for (i = 0; i < clouds; i++) {
    createCloud(cloudSpeed, i, int);
}

function moveCloud(cloud) {
    var posX = (cloud.offsetLeft < -250) ? browserWidth : cloud.offsetLeft;
    posX--;
    cloud.style.left = posX + "px";
}

function createCloud(speed, index, interval) {
    var posY = Math.floor(Math.random() * (browserHeight / 2.5)),
        posX = Math.floor(Math.random() * (browserWidth - 255)),
        cloud = document.createElement('div'),
        height = h + Math.floor(Math.random() * 40),
        width = w + Math.floor(Math.random() * 40);
    cloud.className = "cloud";
    cloud.innerHTML = svg(width, height);//added svg scalable background, see the demo
    document.getElementsByTagName('body')[0].appendChild(cloud);
    cloud.style.left = posX + "px";
    cloud.style.top = posY + "px";
    cloud.style.opacity = 1 - (index / 10);
    cloud.style.zIndex = (clouds - index) * 100;
    setInterval(function () {
        moveCloud(cloud);
    }, speed + (interval * index));
} 
```

[演示](http://jsfiddle.net/arcm111/u8zVm/)

# routing - Marionette AppRouter 未触发

> ID：15840157
> 
> 赞同：1
> 
> 时间：2013-04-05T17:42:11.633
> 
> 标签：routing, routes, router, marionette

我正在重构我的应用程序，现在我的路由器没有响应。我觉得这可能与事件的顺序有关。但那是猜测。有任何想法吗？

初始化.js

```
define(function(require) {
    'use strict';
    var app = (require('app')()),
        Backbone = require('backbone');
    app.modules = {};
    require('modules/main/main');
    app.on('initialize:after', function() {
        if (Backbone.history) {
            Backbone.history.start();
        }
    });
    app.start();
}); 
```

模块/main/main.js

```
define(function(require) {
    'use strict';
    var app = (require('app')()),
        MainController = require('widgets/main/controller');
    app.addInitializer(function() {
        app.modules.main = new MainController();
    });
}); 
```

小部件/main/controller.js

```
define(function(require) {
    'use strict';
    var app = (require('app')()),
        Marionette = require('marionette'),
        View = require('./view');
    return Marionette.Controller.extend({
        initialize: function(options) {
            this.router = new Marionette.AppRouter.extend({
                appRoutes: {'apps': 'showApp'},
                controller: this
            });
        },
        showApp: function() {
            console.log('route fired!');
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-13T06:50:06.577

我认为许多异步`require`请求中的问题。我会尝试更改例如 main.js 之类的文件。

`

```
define(['app','widgets/main/controller'], function(App, Ctr){

    App.addInitializer(function() {
        app.modules.main = new Ctr;
    });

}); 
```

`

# html - BeautifulSoup 不需要替换 html 实体

> ID：15840158
> 
> 赞同：1
> 
> 时间：2013-04-05T17:42:14.393
> 
> 标签：html, utf-8, python-2.7, beautifulsoup, html-entities

我有一些 html 包含我使用 MathType 从 Word 文档生成的 mml。我有一个使用 BeautifulSoup 美化它的 python 脚本，但问题是它需要类似的东西`&#x2220;`并将其转换为实际的字节序列`0xE2 0x88 0xA0` ，即∠符号。这是一个问题，因为`0xE2 0x88 0xA0`不会在浏览器中显示为∠。相反，浏览器将其解释为一系列拉丁字符。这也发生在所有数学实体上，例如 Δ ∠ − +... 等。

我查看了 BeautifulSoup 文档，可以看到如何将实体转换为字节序列，但我没有使用该命令；我正在使用的是 prettify()。而且我在 BeautifulSoup 文档中没有看到不将实体转换为字节序列的方法。

有谁知道 BeautifulSoup 中是否有设置告诉它不要将实体更改为字节序列？我希望如此，因为在美化运行后必须撤消损坏似乎有点愚蠢:)

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:02:24.013

我错过了 BeautifulSoup 文档的一部分。默认输出格式化程序执行所描述的行为：它们将 html 实体转换为 unicode 字符。因此，可以通过使用不同的输出格式化程序来更改此行为。（哦）

“您可以通过为 prettify()、encode() 或 decode() 的 formatter 参数提供一个值来更改此行为......”

因此，如果我传入`formatter="html"`Beautiful Soup 将尽可能将 Unicode 字符转换为 HTML 实体！耶！谢谢美丽的汤！

（而且他们有这么好的文档。可惜我没有早点阅读整本书。:$）

# actionscript-3 - FileReference.save() 通过 javascript

> ID：15840162
> 
> 赞同：0
> 
> 时间：2013-04-05T17:42:29.473
> 
> 标签：actionscript-3, flash, security, actionscript, filereference

我有一个处理数据并生成要下载的文件的 javascript 函数。主要浏览器有一个本地功能或允许使用标签`download`上的属性`A`作为将这个文件保存在客户端磁盘上的一种方式。IE 9 和 8（我仍然必须支持）不支持。所以我想到我可以在这些情况下使用 Flash 来完成工作（`ExternalInterface.addCallback`），但是看起来我需要放置一个额外的按钮来这样做（[https://stackoverflow.com/a/3302164](https://stackoverflow.com/a/3302164)），是没有办法画出轮廓并`FileReference.save`无需点击即可调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:05:41.113

没办法。这是 Flash 播放器中的安全限制。

# jquery - jQuery 导航居中公式只运行一次

> ID：15840163
> 
> 赞同：0
> 
> 时间：2013-04-05T17:42:32.220
> 
> 标签：jquery, resize, margin, formula, centering

我写了一个公式来使我制作的导航栏的位置居中，并且它正在加载。是否有一个函数我必须重写它以使其在每次更改窗口大小时再次运行？

```
$(document).ready(function () {        
    $('#left').css({ 'margin-left': (($(window).width())/2)-190 });
)}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:45:26.113

`});`您在关闭时有错字`doc ready`，请尝试将其包含在`.resize()`函数中：

```
$(document).ready(function () {        
    $(window).resize(function(){
        $('#left').css({ 'margin-left': ($(window).width()/2)-190 });
    }).resize();
}); 
```

# python - 保留 Python 字符串的第一个单词？

> ID：15840167
> 
> 赞同：1
> 
> 时间：2013-04-05T17:42:38.533
> 
> 标签：python

假设我有一个全名列表，例如：

```
names : ["Katie von Martin", "Bob Austin Marley", "John Travolta", "Josh Hartnett"] 
```

拆分每个字符串并仅保留第一个单词的函数是什么样的？

```
def keepFirstName():
    for name in names:
        ???? 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-05T17:43:33.363

最简单的是：

```
def first_names(names):
    for name in names:
        yield name.split()[0] 
```

例如

```
>>> print list(first_names(["Katie von Martin", "Bob Austin Marley", "John Travolta", "Josh Hartnett"]))
['Katie', 'Bob', 'John', 'Josh'] 
```

在某些情况下，如果您只想要第一个单词，您可能不想拆分字符串……例如，如果字符串*真的*很长。在这种情况下，您可以使用`str.find`来获取字符串中第一个空格的位置，然后您可以切分到该点以仅给您名字：

```
>>> def first_names(names):
...     for name in names:
...         idx = name.find(' ')
...         yield name[:idx] if idx > 0 else name
... 
>>> print list(first_names(["Katie von Martin", "Bob Austin Marley", "John Travolta", "Josh Hartnett"]))
['Katie', 'Bob', 'John', 'Josh'] 
```

然而，在实践中，这几乎没有必要。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-05T17:44:38.697

或者，这会给你第一句话：

```
>>> names = ["Katie von Martin", "Bob Austin Marley", "John Travolta", "Josh Hartnett"]
>>> first_words = [words.split()[0] for words in names]
>>> print first_words 

['Katie', 'Bob', 'John', 'Josh'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T17:48:42.743

要保留它并将其存储在列表中，

```
b=[]
for i in names:
    b.append(i.split()[0]) 
```

列表 b 包含名字

# android - JQueryMobile：是否存在 data-transition="slideback" 或类似的东西？

> ID：15840170
> 
> 赞同：3
> 
> 时间：2013-04-05T17:43:07.077
> 
> 标签：android, jquery, cordova, jquery-mobile, jquery-mobile-button

单击菜单中的“主页”按钮时，我想要反向移动页面转换（[data-transition="slide"](http://jquerymobile.com/demos/1.2.0/docs/pages/page-transitions.html)）。**是否存在诸如 data-transition="slideBACK" 之类的东西？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T17:51:46.490

你可以这样做：

```
$.mobile.changePage("help.html", {
    reloadPage: true,
    transition: "slide",
    reverse: true
}); 
```

你会得到通缉的效果。

工作示例：http: [//jsfiddle.net/Gajotres/82ke9/](http://jsfiddle.net/Gajotres/82ke9/)

要对其进行测试，请转到第二页并单击按钮**Slide back**。

或者有一个纯 HTML 解决方案：

```
<a href="#index" data-role="button"  data-direction="reverse" data-transition="slide">Reverse slide back - Variant</a> 
```

# android - BitmapFactory.decodeStream(is) 在下载文件夹中的某些图像上失败

> ID：15840172
> 
> 赞同：0
> 
> 时间：2013-04-05T17:43:11.640
> 
> 标签：android, cordova, bitmap

我正在使用 PhoneGap 2.5.0，这是我调用该方法的方式：

```
try {
        InputStream is = cordova.getActivity().getContentResolver()
                .openInputStream(Uri.parse(inputString));
        Bitmap bmp = BitmapFactory.decodeStream(is);
        is.close(); 
```

当我使用相机拍照时代码工作正常，但在下载文件夹中的某些图像上随机失败。我检查了这些图像，它们都是在本地下载的，其 URL 为 content://media/external/images/media/xxxx。有些文件非常大，只有 6MB，而有些文件很小，只有 700K。通过返回 null 而不是被异常捕获，失败似乎是随机的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T17:52:04.743

从[文档](http://developer.android.com/reference/android/graphics/BitmapFactory.html#decodeStream%28java.io.InputStream%29)：

> 将输入流解码为位图。如果输入流为 null，或者不能用于解码位图，则该函数返回 null。流的位置将是读取编码数据后的位置。

因此，要么您的 InputStream 为空，要么您打开的文件不能用于解码位图。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T17:58:56.127

有可能是jpeg吗？

请参阅此已知问题：-

[https://code.google.com/p/android/issues/detail?id=6066](https://code.google.com/p/android/issues/detail?id=6066)

我使用以下解码位图：-

```
BitmapFactory.decodeStream(new FlushedInputStream(is), null, opts);

public class FlushedInputStream extends FilterInputStream {
public FlushedInputStream(InputStream inputStream) {
    super(inputStream);
}

@Override
public long skip(long n) throws IOException {
    long totalBytesSkipped = 0L;
    while (totalBytesSkipped < n) {
        long bytesSkipped = in.skip(n - totalBytesSkipped);
        if (bytesSkipped == 0L) {
              int myByte = read();
              if (myByte < 0) {
                  break;  // we reached EOF
              } else {
                  bytesSkipped = 1; // we read one byte
              }
       }
        totalBytesSkipped += bytesSkipped;
    }
    return totalBytesSkipped;
}
} 
```

此外，如果某些图像很大，您可能需要设置样本大小，以免导致分配过大。

```
BitmapFactory.Options opts = new BitmapFactory.Options();
opts.inSampleSize = sampleSize; 
```

其中 sampleSize 是您计算的合理值。

# shell - 为什么在 awk printf 中使用变量不起作用？

> ID：15840182
> 
> 赞同：0
> 
> 时间：2013-04-05T17:43:40.390
> 
> 标签：shell, awk

新手来了 我正在尝试使用 awk 打印一些信息。所以我写了一个shell脚本

```
#!/bin/bash

turbVar="U"
bcName="outlet"
str="$turbVar $bcName b.c. = "
# method-1
awk -v RS='}' '/'$bcName'/ { printf "%20s = %s\n" $str $4; exit;}' BCFile  | tr -d ";"
# method-2
awk -v RS='}' -v var1=$bcName '$0 ~ var1 { printf "%20s = %s\n" $str $4; exit;}' BCFile  | tr -d ";" 
```

`BCFile`文件内容是

```
boundary
{
    inlet
    {
        type            fixedValue;
        value           uniform (5 0 0);
    }

    outlet
    {
        type            inletOutlet;
        inletValue      $internalField;
        value           $internalField;
    }

    ....
} 
```

我希望输出类似

```
U outlet b.c. = inletOutlet 
```

可悲的是，这不起作用。它抱怨`awk: (FILENAME=0/U FNR=4) fatal: not enough arguments to satisfy format string %20s = %s`。

为什么我不能在 awk printf 中使用 $str 变量？

第二个问题，哪种方法更好？using `'/'$bcName'/`or using `-v var1=$bcName '$0 ~ var1`?，为什么我不能使用`'/$bcName/`or`'/"$bcName"/`直接？这里的强引用和弱引用有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T17:50:40.767

您清理的代码应该是：

```
awk -v RS="}" -v v1="$bcName" -v s="$str" '$0~v1{gsub(/;/,"");printf "%s%s\n",s,$4;exit}' 
U outlet b.c. = inletOutlet 
```

笔记：

*   不要玩 shell 扩展并引用它是一个真正令人头疼的问题。用 .很好地传入任何 shell 变量`-v`。

*   您需要用逗号分隔`printf`.

*   总是引用你的 shell 变量！

*   您应该在脚本`gsub(/;/,"")`内部而不是.`awk``tr -d ";"`

然而，这可能不是最好的方法，但我不能说，因为没有提供上下文。

# python - Wxpython：如何向 StyledTextCtrl 添加新的词法分析器？

> ID：15840184
> 
> 赞同：0
> 
> 时间：2013-04-05T17:43:46.977
> 
> 标签：python, wxpython, lexer

我写了自己的词法分析器

我想`StyledTextCtrl`在 wxpython 中添加我自己的新词法分析器？我目前在 Windows 上运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:47:04.117

您可能必须对控件进行子类化并覆盖 SetupBaseStyles，您必须在其中使用 StyleSetSpec 来指定词法分析器的设置。这是一个链接，可以引导您完成很多过程：

[http://packtlib.packtpub.com/library/9781849511780/ch04lvl1sec05](http://packtlib.packtpub.com/library/9781849511780/ch04lvl1sec05)

这是关于这个主题的官方 wxPython wiki 页面：

[http://wiki.wxpython.org/StyledTextCtrl%20Lexer%20Quick%20Reference](http://wiki.wxpython.org/StyledTextCtrl%20Lexer%20Quick%20Reference)

最后，这是一个简短示例的链接：

[http://nullege.com/codes/search/wx.stc.StyledTextCtrl.SetLexer](http://nullege.com/codes/search/wx.stc.StyledTextCtrl.SetLexer)

# asp.net-mvc-4 - 并行 Foreach 竞争条件

> ID：15840186
> 
> 赞同：0
> 
> 时间：2013-04-05T17:44:01.817
> 
> 标签：asp.net-mvc-4, parallel-processing, race-condition, parallel.foreach

我有一个并行 foreach 在完成执行之前关闭连接的问题。当我有一个常规的 foreach 循环运行时，它很慢，但它会返回所有内容。一旦我更改为并行 foreach，它现在返回大约 95% 的数据并终止。

下面是我正在使用的代码：

```
var USPostalCodes = repository.GetUSPostalCodes();
                var CAPostalCodes = repository.GetCAPostalCodes();

                Parallel.ForEach(spreadsheetinfo, location =>
                {

                    LocationData Locationdata = new LocationData()
                    {
                        id = location.Id,
                        Market = repository.GetMarketsForPostalCode(location.PostalCode, uploadedFile, USPostalCodes, CAPostalCodes),
                    };

                    locationlist.Add(Locationdata);
                });

I added the following code to check and see what was going on, and that fixed it so that it is returning all rows so i know that a race condition exists but what i can't figure out is why and how ot fix it.  any suggestions would be greatly appreciated

Console.WriteLine("Processing {0} on thread {1}", Locationdata,
                                    Thread.CurrentThread.ManagedThreadId); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T17:45:41.183

`locationlist`可能不是线程安全的。因此，您正在破坏列表。

相反，您应该使用`.AsParrelel.Select()`并行运行委托并返回`IEnumerable<T>`结果。

# wpf - Kinect SDK 1.7 中的移交按钮事件

> ID：15840187
> 
> 赞同：1
> 
> 时间：2013-04-05T17:44:01.883
> 
> 标签：wpf, xaml, kinect, kinect-sdk

我正在使用 Kinect SDK 1.7 创建一个 WPF 应用程序，我需要计算用户放置按钮的次数（不是按下，只是放置）。我发现只有一个事件负责在 XAML 中按下按钮

```
<k:KinectTileButton Label="Click" Click="PushButtonEvent"></k:KinectTileButton> 
```

我找不到哪个事件负责将手放在按钮上（如果此事件存在）。也许你已经知道哪个事件会做到这一点？或者如何以另一种方式解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:30:14.437

支持手形光标的`KinectTileButton`跟随事件，可以订阅并根据您的需要采取行动：

```
public static readonly RoutedEvent HandPointerMoveEvent = EventManager.RegisterRoutedEvent(
    "HandPointerMove", RoutingStrategy.Bubble, typeof(EventHandler<HandPointerEventArgs>), typeof(KinectRegion));

public static readonly RoutedEvent HandPointerEnterEvent = EventManager.RegisterRoutedEvent(
    "HandPointerEnter", RoutingStrategy.Direct, typeof(EventHandler<HandPointerEventArgs>), typeof(KinectRegion));

public static readonly RoutedEvent HandPointerLeaveEvent = EventManager.RegisterRoutedEvent(
    "HandPointerLeave", RoutingStrategy.Direct, typeof(EventHandler<HandPointerEventArgs>), typeof(KinectRegion));

public static readonly RoutedEvent HandPointerPressEvent = EventManager.RegisterRoutedEvent(
    "HandPointerPress", RoutingStrategy.Bubble, typeof(EventHandler<HandPointerEventArgs>), typeof(KinectRegion));

public static readonly RoutedEvent HandPointerPressReleaseEvent = EventManager.RegisterRoutedEvent(
    "HandPointerPressRelease", RoutingStrategy.Bubble, typeof(EventHandler<HandPointerEventArgs>), typeof(KinectRegion));

public static readonly RoutedEvent HandPointerGripEvent = EventManager.RegisterRoutedEvent(
    "HandPointerGrip", RoutingStrategy.Bubble, typeof(EventHandler<HandPointerEventArgs>), typeof(KinectRegion));

public static readonly RoutedEvent HandPointerGripReleaseEvent = EventManager.RegisterRoutedEvent(
    "HandPointerGripRelease", RoutingStrategy.Bubble, typeof(EventHandler<HandPointerEventArgs>), typeof(KinectRegion));

public static readonly RoutedEvent HandPointerGotCaptureEvent = EventManager.RegisterRoutedEvent(
    "HandPointerGotCapture", RoutingStrategy.Direct, typeof(EventHandler<HandPointerEventArgs>), typeof(KinectRegion));

public static readonly RoutedEvent HandPointerLostCaptureEvent = EventManager.RegisterRoutedEvent(
    "HandPointerLostCapture", RoutingStrategy.Direct, typeof(EventHandler<HandPointerEventArgs>), typeof(KinectRegion));

public static readonly RoutedEvent QueryInteractionStatusEvent = EventManager.RegisterRoutedEvent(
    "QueryInteractionStatus", RoutingStrategy.Bubble, typeof(EventHandler<QueryInteractionStatusEventArgs>), typeof(KinectRegion)); 
```

该`InitializeKinectButtonBase`函数设置按钮的默认行为：

```
private void InitializeKinectButtonBase()
{
    KinectRegion.AddHandPointerPressHandler(this, this.OnHandPointerPress);
    KinectRegion.AddHandPointerGotCaptureHandler(this, this.OnHandPointerCaptured);
    KinectRegion.AddHandPointerPressReleaseHandler(this, this.OnHandPointerPressRelease);
    KinectRegion.AddHandPointerLostCaptureHandler(this, this.OnHandPointerLostCapture);
    KinectRegion.AddHandPointerEnterHandler(this, this.OnHandPointerEnter);
    KinectRegion.AddHandPointerLeaveHandler(this, this.OnHandPointerLeave);

    KinectRegion.SetIsPressTarget(this, true);
} 
```

您可以在 UI 中实际定义按钮的任何位置执行相同操作。钩住`HandPointerEnter`和`HandPointerLeave`处理程序，然后您可以计算用户将手形光标移入和移出该区域的次数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T09:59:38.673

不确定这些是否是自定义控件，但是我非常肯定大多数控件应该带有鼠标输入事件或能够扩展它。

```
<Button Tag="Test" MouseEnter="enterMethod"> 
```

并且只需让您的方法为每次鼠标悬停增加一个变量。

# ios - 禁用 UITableView 浮动部分标题点击？

> ID：15840192
> 
> 赞同：4
> 
> 时间：2013-04-05T17:44:09.890
> 
> 标签：ios, uitableview

我有一个带有自定义部分标题视图的普通样式 UITableView（6.0 之前，所以不是 UITableViewHeaderFooterView）。有些可以点击，有些则不能。当它们浮动在其他单元格上方的表格视图顶部时，点击会通过标题部分到达下面的表格视图单元格。由于该视图在应用程序其他地方的重用要求，节标题视图是 UITableViewCell 的子类。有没有办法防止触摸通过？

如果我将部分标题视图的子类更改为 UIView 而不是 UITableViewCell 问题就消失了。但是，由于其他原因，此解决方案不可行。UITableViewCell 中是否有一些我可以禁用的特殊行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T17:50:41.547

看看[这里](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html)`- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event`的实例方法。

您可以在 UIView 子类中重写此方法并返回您想要响应触摸的视图。

使用这种方法：

```
- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event
{
    id hitView = [super hitTest:point withEvent:event];

    if (hitView == self) {
        return nil;
    } else {
        return hitView;
    }
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-09T14:34:48.540

如果您有权访问节标题视图，只需*启用用户交互* `false`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-26T01:36:23.833

我也有同样的情况。我最终在我的自定义标题单元格中的其他内容下方放置了一个 UIButton，并使其成为整个单元格的大小并使其融入其中。

现在它抓住了水龙头，什么也不做，防止水龙头通过它下面的单元格。希望这可以帮助。

# iphone - nsnotification 麻烦

> ID：15840195
> 
> 赞同：0
> 
> 时间：2013-04-05T17:44:19.257
> 
> 标签：iphone, ios, nsnotificationcenter

所以我有一个方法：

```
-(void)didLoginWithAccount(MyAccount *)account 
```

我在这个方法中添加了一个观察者，比如

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(didLoginWithAccount:)]; 
```

我的问题是，当我发布通知时，如何传递 MyAccount 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:52:47.507

当您收到通知回调时，会传递通知对象，而不是显式传递对象。

第一步，注册：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(didLoginWithAccount:) name:@"MyCustomNotification" object:nil]; 
```

第 2 步，发布：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"MyCustomNotification" object:myAccount]; 
```

第 3 步，接收：

```
- (void)didLoginWithAccount:(NSNotification *)notification {
    MyAccount *myAccount = (MyAccount *)[notification object];
} 
```

# html - p：如果 img 标签紧跟在 p 标签之后，第一个孩子不起作用？

> ID：15840198
> 
> 赞同：1
> 
> 时间：2013-04-05T17:44:37.423
> 
> 标签：html, css, image

Hy那里，不能让它工作我有这样的东西

```
 .body-post p:first-child:first-letter
    {
    font-size:240%;
    } 
```

这里是html：

```
 <div class="body-post">
    <p><img src="http://#" align="left" style="margin-right:5px;"/>
    some text</p></div> 
```

因此，如果没有图片，则第一个字母有效。有没有办法跳过 img 标签。我无法编辑源代码，因为我正在为博客域做一些模板。没什么大不了的，只是太混乱了。第一个字母应该选择字母而不是图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:53:17.353

将图像放在 P 标签的外侧并使用以下内容。图像仍将允许 P 包裹，因为这是浮动元素所做的。

```
 .body-post > p:first-child:first-letter {
    font-size:240%;
 }

  <div class="body-post">
    <img src="http://#" align="left" style="margin-right:5px;"/>
    <p>some text</p>
 </div> 
```

//附注，尽可能避免使用内联样式。它可能会干扰 JS 和媒体查询/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T18:05:20.143

经过一番[研究](https://stackoverflow.com/questions/7631722/css-first-letter-not-working)，我发现首字母只能用于块元素（你正在做的）。

在这个解决方案中，我通过将文本包装在一个跨度中来增加文本的选择性并放入适当的样式以使跨度成为内联块

[http://jsfiddle.net/52Vjm/1/](http://jsfiddle.net/52Vjm/1/)

```
<div>
    <p>
        <img src="http://placekitten.com/100/100"/>
        <span>Kittens are great</span>
    </p>
</div>

span:first-letter { font-size:2em; }
span { display:inline-block; }
img { margin-right:5px; } 
```

# c++ - C++ 类型的转换，它们在做什么，哪些变量是有效的？

> ID：15840201
> 
> 赞同：0
> 
> 时间：2013-04-05T17:44:44.370
> 
> 标签：c++, pointers, casting

好的，我在理解不同类型的演员表以及他们的情况时遇到了一些麻烦。我创建了两个类：A 和 B。B 派生自 A。

我做了一堆指针，然后把它们放到屏幕上。我需要帮助了解正在发生的事情以及哪些变量实际上是有效的。

这是代码：

```
#include <iostream>

using namespace std;

class A {
public:
    A(int iValue){
            m_iValue = iValue;
    }

    A(){
            m_iValue = 10;
    }

    virtual void doSomething(){
            cout << "The value is " << getValue() << endl;
    }

    void doSomethingElse(){
            cout << "This is something else" << endl;
    }

    virtual int getValue(){
            return m_iValue;
    }

private:
    int m_iValue;
};

class B : public A{

public:
 B() : A(5){

    }

    virtual void doSomething(){

            cout << "This time, the value is " << getValue() << endl;
    }

    void doSomethingElse(){

            cout << "This is something else entirely" << endl;
    }

    virtual void doAnotherThing(){

            cout << "And this is a third thing" << endl;
    }
};

int main(int argc, char * argv[]){
    A * pA1 = new B;
    A * pA2 = new A;

    B * pB1;
    B * pB2;

    pB1 = (B*)pA1;
    pB2 = (B*)pA2;

    cout << "Step 1 - c style cast:" << endl;
    cout << "  pA1 cast to pointer pB1: " << pB1 << endl;
    cout << "  pA2 cast to pointer pB2: " << pB2 << endl << endl;

    B * pB3;
    B * pB4;

    pB3 = dynamic_cast<B*>(pA1);
    pB4 = dynamic_cast<B*>(pA2);

    cout << "Step 2 - dynamic_cast:" << endl;
    cout << "  pA1 cast to pointer pB3: " << pB3 << endl;
    cout << "  pA2 cast to pointer pB4: " << pB4 << endl << endl;

    B * pB5;
    B * pB6;

    pB5 = static_cast<B*>(pA1);
    pB6 = static_cast<B*>(pA2);

    cout << "Step 3 - static_cast:" << endl;
    cout << "  pA1 cast to pointer pB5: " << pB5 << endl;
    cout << "  pA2 cast to pointer pB6: " << pB6 << endl << endl;

    B * pB7;
    B * pB8;

    pB7 = reinterpret_cast<B*>(pA1);
    pB8 = reinterpret_cast<B*>(pA2);

    cout << "Step 4 - reinterpret_cast:" << endl;
    cout << "  pA1 cast to pointer pB7: " << pB7 << endl;
    cout << "  pA2 cast to pointer pB8: " << pB8 << endl << endl;

    return 0;
} 
```

* * *

**这是它的输出：**

```
Step 1 - c style cast:
  pA1 cast to pointer pB1: 0x1853010
  pA2 cast to pointer pB2: 0x1853030

Step 2 - dynamic_cast:
  pA1 cast to pointer pB3: 0x1853010
  pA2 cast to pointer pB4: 0

Step 3 - static_cast:
  pA1 cast to pointer pB5: 0x1853010
  pA2 cast to pointer pB6: 0x1853030

Step 4 - reinterpret_cast:
  pA1 cast to pointer pB7: 0x1853010
  pA2 cast to pointer pB8: 0x1853030 
```

# asp.net-mvc - 根据模型实例和上下文切换 ASP.MVC 验证

> ID：15840209
> 
> 赞同：0
> 
> 时间：2013-04-05T17:45:18.137
> 
> 标签：asp.net-mvc, validation, fluentvalidation

对于相同的 MVC 控制器操作和模型，我希望根据模型上的值和基于什么用户发出请求来应用不同的验证规则。

对于相同的 Controller 和相同的 Action：

*   如果高级用户登录，他应该有一组与低级用户不同的验证规则。
*   如果模型已被标记为某个值，则该模型将需要一组与没有此标记的模型不同的验证规则。

我对任何可能支持这个的框架感兴趣，第三方或其他。

我在 FluentValidation CodePlex 项目上发布了一个类似的问题： [https ://fluentvalidation.codeplex.com/discussions/439281](https://fluentvalidation.codeplex.com/discussions/439281)

我想从该帖子中获得的代码片段：

```
IValidator GetValidator<T>(object model, Context context)
{
    if (typeof(T) == typeof(MyModel))
    {
        var myModel = (MyModel)model;
        if (myModel.Level == 1 && context.CurrentUser == 2)
        {
            return GetSpecialValidatorForMyModel();
        }
        else
        {
            return GetNormalValidatorForMyModel();
        }
    }
    else
    {
        ...
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:26:39.563

如果我从 FluentValidationModelValidatorProvider 继承，看起来我可以用 FluentValidation 做到这一点。我可以重写 CreateValidator 来实现我想要的。我还将创建自己的使用 MyFluentValidationModelValidatorProvider 的 Configure 方法。

# installation - 预检查 WAS 上的 EJB3.0 功能包安装

> ID：15840213
> 
> 赞同：0
> 
> 时间：2013-04-05T17:45:29.560
> 
> 标签：installation, websphere, ejb-3.0

有没有办法预先知道我的 Websphere 6.1 App 服务器上是否安装了 EJB3.0 功能包？一种了解方法是在 WAS 上部署 EJB 3.0 EAR 并让它抱怨未安装功能包。但是，有没有办法事先知道这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:46:00.547

是的，您可以尝试使用功能包使用以下命令创建配置文件：

```
$app_server_root/bin/manageprofiles.sh -create -profileName AppSvr01 -templatePath $app_server_root/profileTemplates/EJB3/default.ejb3fep 
```

或者您可以检查您的安装中是否已经存在 default.ejb3fep。

在以下位置查看详细信息：

[http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp)

# scala - 用akka解决n皇后难题

> ID：15840214
> 
> 赞同：1
> 
> 时间：2013-04-05T17:45:31.493
> 
> 标签：scala, akka

我对使用 scala 和 akka 进行编程比较陌生，我尝试使用 akka 演员为 n-queens 问题编写解决方案。不幸的是，我的想法效果不佳：与顺序方法相比，计算所有解决方案需要更长的时间，并且程序永远不会终止。但是，一些正确的解决方案会打印到控制台。这是我的代码：

```
 case class Work(list: List[Point])
  case class Reply(list: List[Point])

  class QueenWorker(val master: ActorRef) extends Actor {
        override def preStart() = {
      println("new worker")
    }
    def receive = {
      case Work(list) =>
        val len = list.length
        if (len < size) {
          val actors = for (
            i <- 0 until size if (!list.exists(_.y == i))
          ) yield (context.actorOf(Props(new QueenWorker(master))), i)
          actors.foreach { case (actor, pos) => actor ! Work(list :+ (new Point(len, pos))) }

   } else {
          if (check(list)) { //check() checks whether the solution is valid
            master ! Reply(list)
            println("solution found!")
          }
          //else sender ! Reply(List[List[Point]]())
        }
         //context.stop(self) //when do I have to use it?
         //println("worker stopped - len "+len)
    }
  }

  class QueenMaster extends Actor {
    override def preStart() = {
      println("preStart")
      context.actorOf(Props(new QueenWorker(self))) ! Work(List[Point]())
    }

      def receive = {//print solution to console
      case Reply(list) =>
        for (x <- 0 until size) {
          for (y <- 0 until size) {
            if (list.exists(p => p.x == x && p.y == y)) print("x ") else print("o ")
          }
          println()
        }
        println()
    }
  }

 def runParallel {
    val system = ActorSystem("QueenSystem")
    val queenMaster = system.actorOf(Props[QueenMaster])
  } 
```

我的意图是为每个新的回溯迭代创建一个新的演员。如果一个参与者找到了一个有效的解决方案，它将被发送给将其打印到控制台的主控。

*   程序永远不会终止。但是，如果我删除 //context.stop(self) 周围的评论，根本找不到解决方案。我该如何解决这个问题？
*   我的整个方法似乎是错误的。有什么更好的呢？
*   是否有可能找到使用期货而不是演员的并行解决方案？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T23:14:39.003

经过一些调整后，我设法运行了您的程序并获得了`size=8`. 出于调试目的，将这两行添加到`runParallel`：

```
readLine()
system.shutdown() 
```

当程序完成时——按回车键——这将导致`shutdown`方法被调用并且你的程序将退出。

我在 8 核 i7 2.2Ghz 机器上运行 - 所以你的结果可能会有所不同。

关于性能，这几乎是一个低效的解决方案，原因如下：在回溯过程的每一步 - 即对于每个尝试过的部分解决方案 - 您正在创建和执行一个简单的循环，为下一个提议的解决方案创建更多的参与者.

现在，在 Akka 中创建一个演员非常快，但我敢说，在你的情况下，创建一个演员的开销比它正在做的实际工作更大（甚至可能是一个数量级）——我还没有测试过这个，但很有可能。

此处分析的部分解决方案的数量与板的大小呈指数关系。那就是您正在创建指数级数量的参与者 - 这是很多开销，您肯定会失去通过并行计算解决方案获得的任何优势。

我们怎样才能使它变得更好？好吧，首先，我们可以少创建几个演员。

让我们创建一个固定的`QueenWorker`演员池（与您计算机中的核心数量相同），并将它们放在[SmallesMailboxRouter](http://doc.akka.io/docs/akka/snapshot/scala/routing.html#SmallestMailboxRouter)后面。

当您的工作人员检查已处理消息中的当前解决方案`Work`而不是创建新参与者时，他们会将新提出的解决方案发送到路由器，路由器将以`Work`统一的方式将这些新消息发送到其路由。

一个工人actor现在将处理更多的部分解决方案，而不仅仅是一个，就像它之前所做的那样。这比以前要好得多的实际工作/akka_housekeeping 比率。

我们还能做得更好吗？我认为我们可以，如果你对你的问题建模有点不同。在皇后问题中，一般来说，在回溯中，您正在探索部分解决方案树。在算法的每个步骤中，当您从现有解决方案生成更多部分解决方案时，您正在分支您的树。您的方法的问题在于，当您在算法中分支时，您也在并发流中分支 - 我在这里指的是您正在发送一个新的工作消息以由另一个参与者处理的事实。这很好，但是如果您添加数字，您会发现这是很多开销，不会为您带来任何时间优势。

那是因为你的`Work`任务的粒度非常小。你在发送消息之间做的工作很少——这会影响你的表现。`Work`您可以让您的工作人员在生成新消息之前探索更大的部分解决方案。

例如，如果您有一个 8 核 CPU，并且问题已经存在，`size=8`那么您最好创建 8 个工作人员并将任务分配给工作人员 K，以计算在第一行的 K 列中具有皇后的解决方案。现在每个工人只执行一项`Work`任务，约占总工作量的 1/8——这将产生更好的结果。

关于期货的解决方案 - 你当然可以这样做，但我认为程序时间将与具有固定演员池的演员解决方案大致相同。但我鼓励你尝试，因为我可能是错的。

# c# - 在数据库中按 ID 更新信息 - ASP.NET/C#

> ID：15840215
> 
> 赞同：0
> 
> 时间：2013-04-05T17:45:34.933
> 
> 标签：c#, asp.net, sql, database

感谢您提前查看我的问题。

我正在尝试从保存按钮更新数据库中的信息。

目前我已经保存了它，但它将更新保存为新行。

我已经获得了我希望更改的行的 ID，但我正在努力让它工作。

ASP.NET：

```
<asp:Button runat="server" ID="btnSave" CssClass="btnSubmit" Text="Save" OnClick="btnSave_Click" /> 
```

C＃：

```
protected void btnSave_Click(object sender, EventArgs e)
{
    int ItemID = 0;
    var Item = Placements.GetPlacementByExpiry(ItemID, false);
    if (Item == null)
    {
        Item = new Placements();
    }

    Item.CategoryID = Convert.ToInt32(ddlCategory.SelectedValue);
    Item.Title = txtTitle.Text;
    Item.Company = txtCompany.Text;
    Item.Location = txtLocation.Text;
    Item.Duration = txtDuration.Text;
    Item.SalaryFrom = Convert.ToDecimal(txtSalaryFrom.Text);
    Item.SalaryTo = Convert.ToDecimal(txtSalaryTo.Text);
    Item.SalaryType = ddlSalaryType.Text;
    Item.Description = txtDescription.Text;
    Item.Responsibilities = txtResponsibilities.Text;
    Item.Requirements = txtRequirements.Text;
    DateTime ExpiryDate = DateTime.ParseExact(txtExpiryDate.Text, "dd/MM/yyyy", System.Globalization.CultureInfo.InvariantCulture);
    Item.ExpiryDate = ExpiryDate;
    Item.DateCreated = DateTime.Now;

    if (Item.ID == 0)
    {
        Placements.CreatePlacement(Item);
    }
    else
    {
        Placements.UpdatePlacement(Item);
    }

    mvEdit.SetActiveView(vwList);
} 
```

我尝试在按钮上放置命令参数并在后端更改它，但收到以下错误：

```
Error   1   No overload for 'btnSave_Click' matches delegate 'System.EventHandler'  C:\Users\laura\Documents\Visual Studio 2010\WebSites\ThirdYearProject\tools\controls\placements\edit.ascx   239 
```

我一直在尝试修复它一段时间，但我不确定我做错了什么！任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:05:15.463

我认为 Item.ID == 0 不是 0 null 或其他一些值。请检查它的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T18:06:29.820

是错字吗？这条线不应该

```
btnSave_Click+= new System.EventHandler(this.btnSave_Click); 
```

移动到可能的 Page_Load 事件甚至 Pre_Init？

我认为下面的答案应该对你有所帮助

[Asp.Net 中的示例程序事件冒泡](http://forums.asp.net/t/1285712.aspx)

# java - zk - 文件上传前的 java 文本框验证

> ID：15840216
> 
> 赞同：0
> 
> 时间：2013-04-05T17:45:38.997
> 
> 标签：java, validation, upload, zk

我在 zk 框架中有一个带有 upload = true 属性组件的文本框和一个按钮，我想在弹出上传对话框之前控制文本框的值（如果它为空）。我尝试了文本框上的 onChange 事件以根据值禁用和启用按钮问题是在单击其他位置之前未启用/禁用按钮。也就是说，如果我在文本框中写了一些文本并单击按钮后，它仍然保持禁用状态。第二次点击后，它被激活。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T07:17:06.743

您应该使用**onChanging**而不是**onChange**。此外，只有 ZK 端解决方案正常工作，但 ZK + Java 端解决方案无法正常工作。

ZK 端解决方案（**工作**）

```
<zk>
  <textbox>
    <attribute name="onChanging">
      if ( event.getValue().length() > 0 )
        but.setDisabled( false );
      else
        but.setDisabled( true );
    </attribute>
  </textbox>
  <button id="but" disabled="true" upload="true,maxsize=300" label="Up" />
</zk> 
```

ZK + Java 解决方案（**不能正常工作**）

## ZK

```
<window title="Hello World!!" border="normal" width="200px" apply="com.UploadFile">

<textbox id="value" />

<button id="but" disabled="true" upload="true,maxsize=300" label="Up" />

</window> 
```

## JAVA

```
public class UploadFile extends GenericForwardComposer<Window> {

    private static final long serialVersionUID = 1L;

    private Textbox value;
    private Button but;

    public void onChanging$value() {
        if ( value.getValue().length() > 0 )
            but.setDisabled( false );
          else
            but.setDisabled( true );
    }

    public void onClick$but() {
        alert(value.getValue());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T15:37:23.970

即使这

```
<zk>
  <textbox>
    <attribute name="onChanging">
      if ( event.getValue().length() > 0 )
        but.setDisabled( false );
      else
        but.setDisabled( true );
    </attribute>
  </textbox>
  <button id="but" disabled="true" upload="true,maxsize=300" label="Up" />
</zk> 
```

正在工作，这不推荐用于生产。看到[这个](http://books.zkoss.org/wiki/ZK_Developer%27s_Reference/Overture/Technology_Guidelines#When_to_use_zscript)。

我的解决方案

```
public class MyClass extends SelectorComposer<Window> {
   @Wire
   private Button btn;

   @Listen("onChanging = #myTextBoxID")
   public void onChanging(ChangeingEvent ev) {
      btn.setDisabled( ev.getValue().isEmpty() );
   }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-20T08:39:39.143

当您有一个`Textbox`、`Combobox`或`Spinner`其他组件来控制诸如 a 的启用/禁用属性之类的东西时`Button`，一种常见的方法是使用`onChanging`此类组件的事件。ZK 以特殊的方式对待这个事件。

所以我们有：

```
<textbox id="myTextbox" />
<button id="myButton" disabled="true" /> 
```

如前所述，所有在 MVC 环境中获取价值的常见尝试都行不通。

```
@Listen("onChanging = #myTextbox")
public void onChangingTextbox(Event event){

   String byGetText = myTextbox.getText(); //Will give you the old value
   String byGetValue = myTextbox.getValue(); //Will still give the old value
   String byEvent = event.getValue(); //Yet another way to get the old value

   if(!byGetText.equals("")) myButton.setDisabled(false)
   else myButton.setDisabled(true);

   if(!byGetValue.equals("")) myButton.setDisabled(false)
   else myButton.setDisabled(true);

   if(!byEvent.equals("")) myButton.setDisabled(false)
   else myButton.setDisabled(true);

   //All of the above won't work when the Textbox is cleared since the 
   //referred value is the old value.
} 
```

解决方案是在事件中。我们必须使用`InputEvent`而不是`Event`来获取新值：

```
@Listen("onChanging = #myTextbox")
public void onChangingTextbox(InputEvent event){

   String byEvent = event.getValue(); //This will give you the new value

   //This control will behave as wanted
   if(!byEvent.equals("")) myButton.setDisabled(false)
   else myButton.setDisabled(true);

} 
```

该`onChanging`事件在将新值分配给`Textbox`value 字段之前触发，因此，在事件处理程序上获取时，您将获得旧值。同样在`Event`类中，新值字段是私有且不可访问的，因此该`getValue()`方法返回旧值。而是在调用`InputEvent`时首选新值。`getValue()`

# c# - 什么更好：在函数之间传递参数或使用静态对象？

> ID：15840222
> 
> 赞同：-2
> 
> 时间：2013-04-05T17:46:01.320
> 
> 标签：c#, coding-style

在[Clean Code](http://www.amazon.ca/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882) book 中有一种观点认为，最佳实践是使用没有传入和传出参数的函数。所以我的问题是，使用相互传递 args 的函数或共享和操作静态对象的 void 函数更有意义？

例子：

**选项1。**

```
public List<MyThing> FunctionA(List <MyThing> myThings){

myThings.Add(SomeBlah);

return myThings;     
}

public void FunctionB(){

List<MyThing> myThings = new List<MyThing>();

myThings = InitiateThingsOrWhatever();

List<MyThing> myChangedThings = FunctionA(myThings);  
} 
```

**选项 2：**

```
private static List<MyThing> _myThings = new List<MyThing>();

public static List<MyThing> MyThings{
get { return _myThing; }
set { _myThing = value; }
}

public void SomeFunction(){

FunctionA();
FunctionB();
}

public void FunctionA(){

MyThings = YadaYadaStuff();     
}

public void FunctionB(){

var showMyChangedThings = MyThings; 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T17:50:05.480

传递参数比使用共享静态数据要好得多。

我相信您误解了（或直接阅读）该建议。据我所知，没有建议使用静态共享数据而不是在那本书中传递参数。

建议是尽量减少传递给成员函数的参数数量。通常，您可以将“很多参数”转​​换为一个类，而不是提供没有参数的方法来执行原始函数。

将一些参数转换为对象的示例：

```
int MultiplySome(int arg1, int arg2, int arg3) 
{ 
   return arg1 * arg2 * arg3;
} 
```

可以转换为具有较少参数的方法的对象：

```
class MultiplySomeClass
{  
   public int First;
   public int Second;

   int MultiplyBy(int arg3) { return First * Second * arg3;}
} 
```

并调用从：

```
var result = MultiplySome(4,5,6);

var multiplyHelper = new MultiplySomeClass { First = 4, Second = 5 };
var result = multiplyHelper.MultiplyBy(6); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T17:52:15.113

在您引用的文章中，鲍勃叔叔正在讨论单个类中函数之间的交互。他建议您将通常在这些函数之间传递的数据移动到对象的私有属性中。所以这不是创建全局数据，而是全部封装在类中。静态数据/函数方法正在污染全局命名空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T17:54:23.387

static 从来都不好，选项 2 中的设计在几乎任何软件中都无法使用，如果您有两个必须保持不同状态的同一类的对象怎么办？

# css - 无法正确放置 HTML5 滑块输出

> ID：15840224
> 
> 赞同：1
> 
> 时间：2013-04-05T17:46:17.793
> 
> 标签：css, html, positioning, rangeslider

不完全确定如何正确表达这个问题，对此我深表歉意。我想要在这里发生的是“输出”显示在滑块旁边，而不是在它下面。

看看有什么问题：alainbruno.nl/form.html

无论如何，我只是从 HTML5 开始，这是到目前为止的代码：

```
<!DOCTYPE html>
<html lang = "en">
<head>
<title>Character Creation</title>
</head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
    $(function(){
        //Range
        var val     = $('#slider').val();
            output  = $('#output');

        output.html(val);

        $('#slider').on('change', function(){
            output.html(this.value);
        });
    });
</script>
<body>
<h1>Form</h1>
<form>
<fieldset>
<legend>Appearance</legend>
<p>
<label>
Select Race:
</label>
<select id="Race">
<option value="human">Human</option>
<option value="faela">Faela</option>
<option value="domovoi">Domovoi</option>
<option value="arcon">Arcon</option>
<option value="tsaaran">Tsaaran</option>
</select>
</p>
<p>
 <label>Select Gender</label>
<select id="Gender">
<option value="male">Male</option>
<option value="female">Female</option> 
<option value="other">Other</option>
</select>
</p>
<p>
<label for="range">Select Age:</label> <input type="range" min="14" max="60" id="slider"     value="10" name="range"> <div id="output"></div>
</p>
</fieldset>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T17:49:56.813

只需使`<div>`保持该值的值 a`<span>`使其显示`inline`：

```
<p>
    <label for="range">Select Age:</label> 
    <input type="range" min="14" max="60" id="slider" value="10" name="range"> 
    <span id="output"></span>
</p> 
```

看到[这个Plunk：http://plnkr.co/edit/ELffjF?p=preview](http://plnkr.co/edit/ELffjF?p=preview)

或者，您可以使用 css 将其设置`<div>`为`display:inline`，但这将是一个反模式恕我直言，认为`<span>`存在，并且默认情况下是`display:inline`

# awk - AWK合并两个文件交叉行

> ID：15840227
> 
> 赞同：1
> 
> 时间：2013-04-05T17:46:23.197
> 
> 标签：awk, playlist, gawk

感谢您花点时间阅读本文，此时我正在尝试使用 icecast 完成和润色一个小广播电台，实际上一切都已经开始工作了。

但是有一个名为 ezstream 的程序，它只是在没有人直播的时候将音乐流式传输到 icecast，它是最常见的 autodj，它使用播放列表。

说播放列表可以播放一次，然后程序关闭，这正是我想在这里利用的，我设法自动创建了两个不同的播放列表，一个包含所有音乐，另一个包含广告、叮当声和声音字节，基本上它们是只是存储在计算机上的文件列表。像下面这样，显然他们有名字和东西。

这将是播放列表1

```
/home/mp3/albums/album1/title1.mp3

/home/mp3/albums/album1/title2.mp3

/home/mp3/albums/album1/title3.mp3

/home/mp3/albums/album1/title4.mp3

/home/mp3/albums/album1/title5.mp3

/home/mp3/albums/album2/title1.mp3

/home/mp3/albums/album2/title2.mp3

/home/mp3/albums/album2/title3.mp3

/home/mp3/albums/album2/title4.mp3

/home/mp3/albums/album2/title5.mp3 
```

playlist2 非常相似，但它只包含广告，所以看起来像这样

```
/home/mp3/commercials/commercial1.mp3

/home/mp3/commercials/commercial2.mp3

/home/mp3/commercials/commercial3.mp3

/home/mp3/commercials/commercial4.mp3

/home/mp3/commercials/commercial5.mp3 
```

我严重卡住的部分是以 2:1 或 3:1 的比例合并那些（如果你能帮我处理这两个代码，那也很棒。

最终输出应该看起来像这样

```
/home/mp3/albums/album1/title1.mp3

/home/mp3/albums/album1/title2.mp3

/home/mp3/commercials/commercial1.mp3

/home/mp3/albums/album1/title3.mp3

/home/mp3/albums/album1/title4.mp3

/home/mp3/commercials/commercial2.mp3

/home/mp3/albums/album1/title5.mp3

/home/mp3/albums/album2/title1.mp3

/home/mp3/commercials/commercial2.mp3 
```

依此类推，直到两个文件完全合并，到目前为止，我只设法找到此代码，但由于某种原因它不起作用，它给出了与语法相关的错误并缺少 < 符号。

AWK 代码：

```
awk ‘FNR==NR{

song[FNR]=$0; 
next 
}

{

print song[FNR+line];line++;

print song[FNR+line]

print $0

}’ playlist1.m3u playlist2.m3u 
```

所有这些都应该输出到第三个文件说`mergedplaylists.m3u`

我没有创建该代码，尽管我已经尝试摆弄了一段时间，但我不太清楚的一件事是为什么它在那里说“歌曲”，可以将其更改为其他内容吗？说“专辑”？

该代码根本不起作用，也没有在输出文件中写入任何内容（我也不知道它是否正确）。

我希望 some1 可以帮助我处理特定情况，AWK 似乎很有帮助，但它非常神秘，我发现很多问题来理解它......

再次感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:07:00.823

这将在每个广告之前放置 2 首歌曲：

```
awk '
FNR==NR{ song[++numSongs]=$0; next }
{
   for (i=1;i<=2;i++)
      print song[++songNr]
   print
}
songNr == numSongs { exit }
' playlist1.m3u playlist2.m3u 
```

将“2”更改为“3”或您认为合适的任何内容。

基于以下评论的替代实施：

```
$ cat tst.awk
BEGIN{ interval = (interval ? interval : 3) }

NR==FNR { songs[++numSongs] = $0; next }

{ commercials[++numCommercials] = $0 }

END {
    for (songNr=1; songNr<=numSongs; songNr++) {

        print songs[songNr]

        if ( !( songNr % interval) && (++commercialNr in commercials) )
            print commercials[commercialNr]

    }

}
$
$ cat songs.txt
/home/mp3/albums/album1/title1.mp3
/home/mp3/albums/album1/title2.mp3
/home/mp3/albums/album1/title3.mp3
/home/mp3/albums/album1/title4.mp3
/home/mp3/albums/album1/title5.mp3
/home/mp3/albums/album2/title1.mp3
/home/mp3/albums/album2/title2.mp3
/home/mp3/albums/album2/title3.mp3
/home/mp3/albums/album2/title4.mp3
/home/mp3/albums/album2/title5.mp3
$
$ cat commercials.txt
/home/mp3/commercials/commercial1.mp3
/home/mp3/commercials/commercial2.mp3
/home/mp3/commercials/commercial3.mp3
/home/mp3/commercials/commercial4.mp3
/home/mp3/commercials/commercial5.mp3
$
$ awk -f tst.awk songs.txt commercials.txt
/home/mp3/albums/album1/title1.mp3
/home/mp3/albums/album1/title2.mp3
/home/mp3/albums/album1/title3.mp3
/home/mp3/commercials/commercial1.mp3
/home/mp3/albums/album1/title4.mp3
/home/mp3/albums/album1/title5.mp3
/home/mp3/albums/album2/title1.mp3
/home/mp3/commercials/commercial2.mp3
/home/mp3/albums/album2/title2.mp3
/home/mp3/albums/album2/title3.mp3
/home/mp3/albums/album2/title4.mp3
/home/mp3/commercials/commercial3.mp3
/home/mp3/albums/album2/title5.mp3
$
$ awk -v interval=1 -f tst.awk songs.txt commercials.txt
/home/mp3/albums/album1/title1.mp3
/home/mp3/commercials/commercial1.mp3
/home/mp3/albums/album1/title2.mp3
/home/mp3/commercials/commercial2.mp3
/home/mp3/albums/album1/title3.mp3
/home/mp3/commercials/commercial3.mp3
/home/mp3/albums/album1/title4.mp3
/home/mp3/commercials/commercial4.mp3
/home/mp3/albums/album1/title5.mp3
/home/mp3/commercials/commercial5.mp3
/home/mp3/albums/album2/title1.mp3
/home/mp3/albums/album2/title2.mp3
/home/mp3/albums/album2/title3.mp3
/home/mp3/albums/album2/title4.mp3
/home/mp3/albums/album2/title5.mp3
$
$ awk -v interval=2 -f tst.awk songs.txt commercials.txt
/home/mp3/albums/album1/title1.mp3
/home/mp3/albums/album1/title2.mp3
/home/mp3/commercials/commercial1.mp3
/home/mp3/albums/album1/title3.mp3
/home/mp3/albums/album1/title4.mp3
/home/mp3/commercials/commercial2.mp3
/home/mp3/albums/album1/title5.mp3
/home/mp3/albums/album2/title1.mp3
/home/mp3/commercials/commercial3.mp3
/home/mp3/albums/album2/title2.mp3
/home/mp3/albums/album2/title3.mp3
/home/mp3/commercials/commercial4.mp3
/home/mp3/albums/album2/title4.mp3
/home/mp3/albums/album2/title5.mp3
/home/mp3/commercials/commercial5.mp3
$
$ awk -v interval=4 -f tst.awk songs.txt commercials.txt
/home/mp3/albums/album1/title1.mp3
/home/mp3/albums/album1/title2.mp3
/home/mp3/albums/album1/title3.mp3
/home/mp3/albums/album1/title4.mp3
/home/mp3/commercials/commercial1.mp3
/home/mp3/albums/album1/title5.mp3
/home/mp3/albums/album2/title1.mp3
/home/mp3/albums/album2/title2.mp3
/home/mp3/albums/album2/title3.mp3
/home/mp3/commercials/commercial2.mp3
/home/mp3/albums/album2/title4.mp3
/home/mp3/albums/album2/title5.mp3 
```

这是awk：

```
BEGIN{ interval = (interval ? interval : 3) }

NR==FNR { songs[++numSongs] = $0; next }

{ commercials[++numCommercials] = $0 }

END {
    for (songNr=1; songNr<=numSongs; songNr++) {

        print songs[songNr]

        if ( !(songNr % interval) && (++commercialNr <= numCommercials) )
            print commercials[commercialNr]

    }

} 
```

这是类似 C 的伪代码：

```
void main() {

    FILE *filep;
    char *line;

    char *songs[1000];
    char *commercials[1000];

    int FNR = 0;
    int NR = 0;
    int interval = 0;
    int numSongs = 0;
    int numCommercials = 0;
    int songNr = 0;
    int commercialNr = 0;
    int argNr = 0;

    /* BEGIN */
    if (ARGV[++argNr] == "interval") {
         interval = ARGV[++argNr];
    }
    interval = (interval ? interval : 3);

    for (++argNr;argNr<=ARGC;argNr++) {
       filep = ARGV[argNr];
       FNR = 0;
       while ( fgets(line,filep) > 0 ) {
          NR++;
          FNR++;

          if (NR == FNR) { songs[++numSongs] = line; continue; }

          commercials[++numCommercials] = line;

       }
    }

    /* END */
    for (songNr=1; songNr<=numSongs; songNr++) {

        printf("%s\n",songs[songNr]);

        if ( !(songNr % interval) && (++commercialNr <= numCommercials) )
                printf("%s\n",commercials[commercialNr]);
        }

    }

    return;
} 
```

为了便于比较，我对 awk 脚本所做的唯一更改是删除了没有明确的 C 等效项的“in”运算符。

希望这有助于澄清 awk 脚本在做什么。

# css - 让 UL 随内容一起增长（内联阻止列表项）

> ID：15840230
> 
> 赞同：2
> 
> 时间：2013-04-05T17:46:30.937
> 
> 标签：css, menu, panel

我有一个正在处理的 CSS 菜单，但是在不设置父 UL 的宽度的情况下无法让列表项向左浮动。

我已经设置了一个 JS 小提琴，所以你可以看看 [http://jsfiddle.net/FkK7Y/1/](http://jsfiddle.net/FkK7Y/1/)

如果你看一下“产品菜单”，你会看到我有两组链接（用漂亮的粉红色线条勾勒出来），它们堆叠在一起。我希望这些链接集彼此并排浮动（使他的子菜单更加面板化）。我觉得内联块（见 li class="subMenu"）*应该*在这里工作，但没有。

```
.mainMenu ul.subMenu li.subMenu {
  border:1px solid pink;
  display:inline-block;
  margin-right:10px;
 } 
```

但是，如果我将宽度设置为父 UL（还有 class="subMenu" -我有一个当前在代码中注释掉的宽度参数，请随意摆弄以查看它的实际效果）内联块似乎可以工作在列表项上。

```
.mainMenu ul.subMenu {
  position:absolute;
  left:-9999px;
  top:34px;
  background:#fff;
  padding:0 0 10px 10px;
  z-index:-1;
  border:1px solid #600;
  min-width:100px;
  /*width:200px;*/ } 
```

但是由于每个子菜单面板可能有一个或多个这些菜单，我不想指定宽度。我希望它随着我添加到它的列表项的数量而增长。

有没有解决的办法？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:54:03.797

这就是您需要添加的所有内容：

```
.subMenu{
    white-space:nowrap;
} 
```

更新：http: [//jsfiddle.net/FkK7Y/2/](http://jsfiddle.net/FkK7Y/2/)

# ruby - 无法在 Ruby 2.0 上修改冻结的 Fixnum

> ID：15840233
> 
> 赞同：4
> 
> 时间：2013-04-05T17:46:39.983
> 
> 标签：ruby, ruby-2.0

我有以下代码：

```
require 'prime'
class Numeric
  #... math helpers

  def divisors
    return [self] if self == 1
    @divisors ||= prime_division.map do |n,p|
      (0..p).map { |i| n**i }
    end.inject([1]) do |a,f|
      a.product(f)
    end.map { |f| f.flatten.reduce(:*) } - [self]
  end

  def divisors_sum
     @divisors_sum ||= divisors.reduce(:+)
  end

   #... more methods that evaluate code and 'caches' and assigns (||=) to instance variables
end 
```

输出错误：

```
> 4.divisors
/home/cygnus/Projects/project-euler/stuff/numbers.rb:24:in `divisors_sum': can't modify frozen Fixnum (RuntimeError) 
```

当我将缓存删除到实例变量中时，错误消失了`@divisors`，`@divisors_sum`...等等。这只发生在 ruby​​ 2.0 上。在 1.9.3 上运行它没有问题。发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T18:30:34.627

`@divisors`是 Fixnum 实例上的实例变量，因此您正在尝试更改它。你可能不应该这样做。

那这个呢？

```
module Divisors
  def self.for(number)
    @divisors ||= { }
    @divisors[number] ||= begin
      case (number)
      when 1
        [ number ]
      else
        prime_division.map do |n,p|
          (0..p).map { |i| n**i }
        end.inject([1]) do |a,f|
          a.product(f)
        end.map { |f| f.flatten.reduce(:*) } - [ number ]
      end
    end
  end

  def self.sum(number)
     @divisors_sum ||= { }
     @divisors_sum[number] ||= divisors(number).reduce(:+)
  end
end

class Numeric
  #... math helpers

  def divisors
    Divisors.for(self)
  end

  def divisors_sum
     Divisors.sum(self)
  end
end 
```

这意味着 Numeric 中的方法不会修改任何实例，缓存存储在其他地方。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T18:42:50.057

除了@tadman 的回答之外，工作`1.9.3`而不是工作的原因`2.0.0`是因为 2 年前决定冻结 Fixnums （和 Bignums），正如[this](http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-core/52584)和[this](http://bugs.ruby-lang.org/issues/3222)所证明的那样。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-05T19:36:49.710

正如其他人指出的那样，ruby 核心已经决定 Fixnums 和 Bignums 现在被冻结，所以你不能在这些类的对象中设置实例变量。

一种解决方法是制作一个外部模块，该模块保留由这些冻结对象的值索引的哈希缓存，并使用这些哈希的元素而不是实例变量：

```
require 'prime'

module FrozenCacher
  def FrozenCacher.fcache
    @frozen_cache ||= {}
  end

  def fcache
    FrozenCacher.fcache[self] ||= {}
  end
end

class Numeric
  include FrozenCacher
  #... math helpers

  def divisors
    return [self] if self == 1
    fcache[:divisors] ||= prime_division.map do |n,p|
      (0..p).map { |i| n**i }
    end.inject([1]) do |a,f|
      a.product(f)
    end.map { |f| f.flatten.reduce(:*) } - [self]
  end

  def divisors_sum
    fcache[:divisors_sum] ||= divisors.reduce(:+)
  end

   #... more methods that evaluate code and 'caches' and assigns (||=) to instance variables
end

puts 4.divisors.inspect           # => [1, 2]
puts FrozenCacher.fcache.inspect  # => {4=>{:divisors=>[1, 2]}}
puts 10.divisors.inspect          # => [1, 5, 2]
puts FrozenCacher.fcache.inspect  # => {4=>{:divisors=>[1, 2]}, 10=>{:divisors=>[1, 5, 2]}} 
```

# ios - UISearchBarDelegate 的 textDidChange 方法对语音到文本有奇怪的行为

> ID：15840237
> 
> 赞同：2
> 
> 时间：2013-04-05T17:47:03.360
> 
> 标签：ios, objective-c, uisearchbar, siri

我有一个 iPhone 应用程序，它的顶部包含`UITableView`a 。`UISearchBar`当用户键入`UISearchBar`的`UITableView`内容时，会被适当地过滤。当用户删除搜索栏中的所有文本时，`UISearchBar`搜索栏中不再是第一响应者，并且表格视图再次变为未过滤。这是相关的委托代码：

```
- (void) searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText
{
    if(searchBar.text.length == 0)
    {
        [self.searchBar resignFirstResponder];
        [self.myModel stopFiltering];
        [self.tableView reloadData];
    }
} 
```

这样做的问题是，当用户对着手机说话并尝试在搜索栏中进行语音到文本的转换（通过 Siri）时，该`textdidChange`方法会返回一个空字符串作为搜索文本。因此，我无法知道用户是否正在对着他们的手机讲话，或者他们是否删除了该字段中的所有文本。这种行为是预期的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T02:10:05.600

试试这个并检查你是否可以进入`IF statement`：

```
 - (void) searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText
    {
        if([searchText length]== 0)
        {
            [self.searchBar resignFirstResponder];
            [self.myModel stopFiltering];
            [self.tableView reloadData];
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T06:05:18.590

```
if([searchText length]> 0)
{
    [self searchTableView];
}
else
{
    [self btncloseClicked]; 
```

}

```
- (void)btncloseClicked
{
    [YourSearchBar performSelector: @selector(resignFirstResponder) withObject: nil afterDelay: 0.1];
    [table_View reloadData];
} 
```

# c# - 理解文件流

> ID：15840239
> 
> 赞同：0
> 
> 时间：2013-04-05T17:47:08.817
> 
> 标签：c#

现在我正在使用这种方法将文件写入磁盘

```
using (FileStream fileStream = new FileStream(fileOne, FileMode.Create))
{
    using (StreamWriter streamW = new StreamWriter(fileStream))
    {
       streamW .Write("Blah");
       streamW.Close();
    }
    fileStream .Close();
} 
```

如何在此 using 语句中编写更多文件，例如 fileTwo？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T17:50:10.653

> 如何在此 using 语句中编写更多文件，例如 fileTwo？

您需要打开一个不同的流。每个`FileStream`只会写入一个文件。目前尚不清楚您是要*一次*写入两个文件，还是一个接一个地写入。在后一种情况下，您可能只需要一个循环。例如：

```
foreach (string file in files)
{
    // Note: File.CreateText is simpler than creating a FileStream then
    // wrapping it in a StreamWriter
    using (TextWriter writer in File.CreateText(file))
    {
        ...
    }
} 
```

请注意，您不需要您的`Close`调用-您有适当的`using`语句意味着`Dispose`将自动调用这一事实，这基本上相当于`Close`.

# objective-c - 如何在主队列上加载 UIDocument？

> ID：15840240
> 
> 赞同：0
> 
> 时间：2013-04-05T17:47:13.050
> 
> 标签：objective-c, uidocument

我曾经使用 plists 来存储我的应用程序的数据，但我决定改用 UIDocument。第一个view是一个UITableView，在view出现之前需要加载对应的UIDocument。

我在应用程序的委托中加载并保存我的数据，但是当我加载我的 UIDocument 时，它只会在我的表格视图出现后才被加载（我认为是在后台队列上），从而导致各种错误。

那么，如何将它加载到主队列中，以便加载后程序执行可以正常继续呢？该文档不是很大（仅包含字符串数据数组的数据），因此不会真正存在任何与性能相关的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:34:29.597

您是否使用方法`-openWithCompletionHandler:`来加载文档？如果是这种情况，您将不得不**在完成块中重新加载表**。

该文档在主线程*上*加载，但在显示您的表格*之后。*

# php - codeigniter ajax form_validation（使用 jquery）

> ID：15840243
> 
> 赞同：0
> 
> 时间：2013-04-05T17:47:17.613
> 
> 标签：php, jquery, ajax, codeigniter

我正在尝试通过codeigniter验证一些带有ajax的字段，但不能完全弄清楚如何“正确”。

我的阿贾克斯：

```
var timeout = null;

$(document).ready(function(){

    $('.new-user-box input').each(function(){

        var key = $(this).attr('name');

        $(this).on("keyup", function() {
            var value = $(this).val();

            if(value=="") {
                return false;
            }

            var json = {};
            json[key] = value;
            json['ajax'] = '1';

            if (timeout) {
                clearTimeout(timeout);
            }
            timeout = setTimeout( function() {
                $.ajax({
                url: 'auth/ajax_validate',
                type: 'post',
                data: json,
                success: function(data) {
                    console.log(data);
                }
                })
            }, 1000)
        });

    })

}) 
```

这基本上可以让我所有的输入字段在 keyup 上发送它们的值（1 秒后）。

我的 php（只是用户名测试的一个片段）：

```
<?php

    function ajax_validate()
    {

        // Test if the method is called by ajax and validate the input field
        if($this->input->post('ajax'))
        {
            if($this->input->post('username'))
            {
                if($this->form_validation->set_rules('username', 'Brugernavn', 'required|trim|min_length[1]|max_length[20]|is_unique[users.username]|xss_clean') && !$this->form_validation->run())
                {
                    $validates = 0;
                }
                else {
                    $validates = 1;
                    $error = "";
                }
                $response = array($validates,$form_error('username'));
                echo json_encode($response);
                exit;
            }
        }

    }

?> 
```

我收到的响应是一个 php 错误：

消息：未定义的变量：form_error

致命错误：函数名称必须是第 401 行的 \PATH TO CODEIGNITER\application\modules\auth\controllers\auth.php 中的字符串

希望有人知道如何解决此问题，或以其他方式进行。先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T17:51:31.317

取出“form_error”之前的$。

```
$response = array($validates,$form_error('username')); 
```

到

```
$response = array($validates,form_error('username')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-23T00:27:48.780

刚发现这个：

```
$this->input->is_ajax_request(); 
```

从这里：

[判断帖子是否来自codeigniter中的ajax调用的方法？](https://stackoverflow.com/questions/1779433/way-to-tell-if-a-post-came-from-an-ajax-call-in-codeigniter)

# django - django：同一模板中的两个通用视图

> ID：15840245
> 
> 赞同：0
> 
> 时间：2013-04-05T17:47:34.287
> 
> 标签：django, django-forms, django-templates, django-views

我需要一些关于 Django 中的通用视图和模板的建议。我试图弄清楚它是如何工作的。

我想实现一个页面，我想在其中显示两个通用视图作为 CreateView 和 DeleteView。

例如：

**模型.py**

```
class model(models.Model):
      name = models.CharFields(u'Name', max_length=30, null= True, unique= True) 
```

如何为创建对象制作一个表单，并在下面的同一模板中创建包含所有现有对象的表单渲染表，并使用复选框列，如删除对象的选项。

两种形式都应包含提交操作的按钮（删除、添加）

肿瘤坏死因子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:27:38.187

in urls.py

```
from appname.models import model
from django.views.generic import list_detail
interface_info={
'queryset': model.objects.all(),
'template_name': 'template/interface.html'
}
url(r'^template/interface/$',list_detail.object_list,interface_info), 
```

in template/interface.html

```
<form action="template/add/" method="get">
<input type="text" name="name"/>
<input type="submit">
</form>

<form action="template/delete/" method="get">
{% for a in object_list %}
{{a.name}}  <input type="radio" name={{a.name}}/>
<br/>
{% endfor %}
<input type="submit"/>
</form> 
```

your form is ready.

# sql - 数据库名称更改 SQL 失败 Sql Server 2008

> ID：15840248
> 
> 赞同：1
> 
> 时间：2013-04-05T17:47:39.217
> 
> 标签：sql, sql-server, tsql

我有一个数据库“我的数据库”，我想重命名它，这样就没有空格。我尝试使用重命名它

```
use master
exec sp_renamedb 'I 3 SCI Study','I3SciStudy' 
```

并受到错误的欢迎

```
Msg 5030, Level 16, State 2, Line 1
The database could not be exclusively locked to perform the operation. 
```

该服务器是我的本地计算机，除了运行重命名查询的窗口之外，我没有打开其他查询窗口。在重命名数据库之前，是否需要运行某种关闭连接命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T23:07:09.623

试试这个命令，但建议小心：

```
USE master;
ALTER DATABASE [dbname] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
GO

ALTER DATABASE [dbname] SET MULTI_USER;
GO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T07:54:48.323

您还可以查询有关当前活动的锁管理器资源的信息。

```
SELECT *
FROM sys.dm_tran_locks DTL
WHERE DTL.[resource_database_id] = DB_ID() 
```

每一行代表当前对锁管理器的活动请求，该请求已被授予或等待被授予的锁。您不仅会看到您对当前数据库的请求（很可能使用 resoure_type DATABASE）。这些资源被锁定时无法更改数据库名称

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-05T20:14:31.877

使用 SSMS 重命名数据库，这样做应该没有任何问题。

# python - python字典对象与值

> ID：15840251
> 
> 赞同：0
> 
> 时间：2013-04-05T17:47:41.983
> 
> 标签：python, dictionary

我仍然不太熟悉编程语言，我正在努力理解返回值的 low_price 和返回（显然）一个对象的 high_price 之间的区别。有人能解释一下为什么他们有不同的结构吗？两者都是字典。high_price 正在通过一个函数。希望这是有道理的。如果缩进不正确，我深表歉意，我仍在努力在网站上做到这一点！

```
Output
{0: {...}} 
({0: {...}}, 99.9969999999999)

def agregate_freq(freq, high_price,low_price):    
    if mynumber >high_price[0]: #new one
        high_price[0] = mynumber
    #if mynumber <low_price[0]: #new one
    #    low_price[0] = mynumber
    print(high_price[0])
    return (high_price)

    if mynumber <low_price[0]: #new one
        low_price[0] = mynumber

    high_price[0] = agregate_freq(0,high_price,low_price)
    print (high_price[0],low_price[0]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:53:24.843

`return (high_price)`只返回表达式的值，`high_price`而*不是*预期的元组。`(high_price[0],low_price[0])`是一个元组。如果你想要一个单元素元组，在你的`high_price`;后面加一个逗号。类似的东西`return (high_price,)`。

这就是为什么看到的输出之间存在差异的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T17:53:39.493

当你这样做时`high_price[0] = agregate_freq(0,high_price,low_price)`，你将第 0 个元素设置为你的函数`high_price`的返回值。`agregate_freq`该函数返回`high_price`自身，奇怪的是我认为您将第一个元素设置`high_price`为`high_price`自身。你这样做不是为了`low_price`。
我只是在猜测，但您的函数似乎正在执行任务本身，因此您可能不希望它返回任何内容。只需`agregate_freq(0,high_price,low_price)`自己调用，这可能会满足您的需求。

# css - 两列布局中的垂直对齐按钮

> ID：15840253
> 
> 赞同：0
> 
> 时间：2013-04-05T17:47:48.203
> 
> 标签：css, layout, styles, vertical-alignment

我正在尝试获得两列布局，其中左列有一个按钮（垂直居中），右列只是文本。

我已经能够使两列布局正常工作，但我无法使按钮居中（最大的文本是动态的。它可以增长和缩小，所以左列需要`height: 100%`）。

这就是我到目前为止想出的：

```
<body>
<div>
<div style="float: left; width: 10px; height: 100%; vertical-align: middle; display: table-cell;">
    <button type="button" style="display: block; vertical-align: middle;">Abc</button>
</div>
<div style="margin-left: 50px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris nulla magna, auctor a varius quis, convallis id est. Vestibulum rhoncus, diam ac malesuada commodo, ipsum justo blandit nulla, eu pretium felis metus vel erat. Donec lobortis arcu ac mauris aliquam ultrices. Nunc feugiat, nisl non pharetra tempus, nunc est cursus nibh, quis hendrerit nibh mauris et massa. Nunc justo quam, feugiat ac mattis ac, placerat sed sem. Sed ultrices orci at erat sodales malesuada. Aenean blandit blandit tellus sit amet imperdiet. Duis pellentesque augue quis lacus cursus at convallis dolor volutpat. Donec orci quam, rhoncus in tincidunt ornare, fringilla eget magna.

Nulla facilisi. Cras consectetur turpis id odio mattis sagittis. Aenean bibendum, ligula tempor luctus fringilla, magna neque malesuada ipsum, non tincidunt ipsum libero non ante. Mauris posuere ullamcorper lorem, et vulputate nibh mattis a. Mauris pretium ullamcorper convallis. Mauris quam est, sollicitudin ut pretium eu, mollis ut elit. Nulla vulputate sodales sagittis.

Suspendisse a porta orci. Sed velit purus, auctor quis tincidunt sed, tristique sed libero. Sed et est eget neque mattis lobortis. Mauris suscipit vestibulum gravida. Etiam lorem ligula, viverra eu iaculis vel, varius at libero. Nullam ante ligula, porta vel euismod ac, gravida ac massa. Pellentesque semper eros vitae sapien aliquam laoreet quis ut neque. Phasellus ac ullamcorper nibh. Praesent vitae tellus libero. Sed aliquet consectetur tempor. Nam porta ornare quam, sed viverra arcu congue eget. Nulla pharetra mi ac enim convallis vel mollis nunc iaculis.

Aenean cursus sodales nunc eu euismod. Mauris eget justo est, eget varius libero. Integer pretium ultricies tortor, ut pellentesque dolor bibendum sed. Praesent ullamcorper, est facilisis molestie ultricies, erat metus tristique enim, nec luctus quam felis et lacus. Donec ullamcorper nulla ac purus consequat aliquet. Praesent nec arcu eu orci feugiat ullamcorper sit amet ac augue. Nullam porta adipiscing felis, vel suscipit tortor bibendum vel. Cras tincidunt erat quis mi ornare ultricies.

Maecenas non ante elit, vel ullamcorper sem. Donec a lectus sit amet lectus lacinia fermentum. Quisque at feugiat lorem. Donec in ipsum lectus, in aliquet enim. Duis purus nisi, tempor vehicula faucibus eu, dapibus id nisl. Phasellus dignissim sodales ornare. Fusce vel libero non ipsum sagittis convallis. In hac habitasse platea dictumst. Fusce ultrices, lectus nec eleifend porttitor, risus sem tincidunt elit, eu hendrerit nibh tortor a dolor.</div>
</div>
</body> 
```

据我了解，应该可以工作，但似乎没有。关于如何让它发挥作用的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T18:06:05.807

我想出了将您的内容放入`div`并`position: relative`制作`button` `position: absolute`的解决方案`top: 50%`。那是你想要达到的吗？
[**小提琴示例**](http://jsfiddle.net/65F7K/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T18:05:07.157

您应该使容器 display: table 并从按钮中删除浮动：

```
<div style="display: table;">
<div style="width: 10px; height: 100%; vertical-align: middle; display: table-cell;">
    <button type="button" style="display: block; vertical-align: middle;">Abc</button>
</div>
<div style="margin-left: 50px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris nulla magna, auctor a varius quis, convallis id est. Vestibulum rhoncus, diam ac malesuada commodo, ipsum justo blandit nulla, eu pretium felis metus vel erat. Donec lobortis arcu ac mauris aliquam ultrices. Nunc feugiat, nisl non pharetra tempus, nunc est cursus nibh, quis hendrerit nibh mauris et massa. Nunc justo quam, feugiat ac mattis ac, placerat sed sem. Sed ultrices orci at erat sodales malesuada. Aenean blandit blandit tellus sit amet imperdiet. Duis pellentesque augue quis lacus cursus at convallis dolor volutpat. Donec orci quam, rhoncus in tincidunt ornare, fringilla eget magna.

Nulla facilisi. Cras consectetur turpis id odio mattis sagittis. Aenean bibendum, ligula tempor luctus fringilla, magna neque malesuada ipsum, non tincidunt ipsum libero non ante. Mauris posuere ullamcorper lorem, et vulputate nibh mattis a. Mauris pretium ullamcorper convallis. Mauris quam est, sollicitudin ut pretium eu, mollis ut elit. Nulla vulputate sodales sagittis.

Suspendisse a porta orci. Sed velit purus, auctor quis tincidunt sed, tristique sed libero. Sed et est eget neque mattis lobortis. Mauris suscipit vestibulum gravida. Etiam lorem ligula, viverra eu iaculis vel, varius at libero. Nullam ante ligula, porta vel euismod ac, gravida ac massa. Pellentesque semper eros vitae sapien aliquam laoreet quis ut neque. Phasellus ac ullamcorper nibh. Praesent vitae tellus libero. Sed aliquet consectetur tempor. Nam porta ornare quam, sed viverra arcu congue eget. Nulla pharetra mi ac enim convallis vel mollis nunc iaculis.

Aenean cursus sodales nunc eu euismod. Mauris eget justo est, eget varius libero. Integer pretium ultricies tortor, ut pellentesque dolor bibendum sed. Praesent ullamcorper, est facilisis molestie ultricies, erat metus tristique enim, nec luctus quam felis et lacus. Donec ullamcorper nulla ac purus consequat aliquet. Praesent nec arcu eu orci feugiat ullamcorper sit amet ac augue. Nullam porta adipiscing felis, vel suscipit tortor bibendum vel. Cras tincidunt erat quis mi ornare ultricies.

Maecenas non ante elit, vel ullamcorper sem. Donec a lectus sit amet lectus lacinia fermentum. Quisque at feugiat lorem. Donec in ipsum lectus, in aliquet enim. Duis purus nisi, tempor vehicula faucibus eu, dapibus id nisl. Phasellus dignissim sodales ornare. Fusce vel libero non ipsum sagittis convallis. In hac habitasse platea dictumst. Fusce ultrices, lectus nec eleifend porttitor, risus sem tincidunt elit, eu hendrerit nibh tortor a dolor.
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T18:41:02.573

```
<div style="display:table; width:100%; height:100%">

    <div style="display:table-cell; width:20%; height:100%; background:#ddd; vertical-align:middle; text-align:center">
         <button type="button">Abc</button>
    </div>

    <div style="display:table-cell; height:100%; padding-left:20px">
         Your content
    </div>

</div> 
```

你只需要看看这个 -`http://jsfiddle.net/qN53h/`

这将解决您的问题。显示表格单元格存在*高度 100%*的问题。对于该修复，您可以尝试`height:auto`或为父显示表格 div 或子显示表格单元格 div 设置固定高度，如下所示 -`http://jsfiddle.net/CjT2G/`

# java - 在 osgi 容器中使用 cxf spring 启动 Restful 服务失败

> ID：15840256
> 
> 赞同：1
> 
> 时间：2013-04-05T17:47:59.677
> 
> 标签：java, spring, maven, osgi, cxf

我用 Maven、CXF 和 spring 创建了一个 Restful 服务。对于 Maven 原型，我选择快速入门。这是 pom.xml：

```
<groupId>com.example.ExampleBean</groupId>
<artifactId>RestExample</artifactId>
<version>0.0.1-SNAPSHOT</version>
<packaging>bundle</packaging>

<build>
    <defaultGoal>install</defaultGoal>
    <plugins>
        <plugin>
            <groupId>org.apache.felix</groupId>
            <artifactId>maven-bundle-plugin</artifactId>
            <extensions>true</extensions>
            <configuration>
                <instructions>
                    <Bundle-SymbolicName>${project.artifactId}</Bundle-SymbolicName>
                </instructions>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

pom依赖：

```
<dependency>
  <groupId>org.apache.cxf</groupId>
  <artifactId>cxf-rt-frontend-jaxrs</artifactId>
  <version>2.3.0</version>
</dependency> 
```

班级：

```
package com.example.ExampleBean;

import javax.ws.rs.GET;
import javax.ws.rs.Path;

@Path("/example")
public class RestExample {
@GET
    @Path("/")
    public String ping() throws Exception {
        return "SUCCESS";
    }
} 
```

src/main/resources/META-INF/spring/bundle-context.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:jaxrs="http://cxf.apache.org/jaxrs"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="
     http://www.springframework.org/schema/beans    
     http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
     http://www.springframework.org/schema/context 
     http://www.springframework.org/schema/context/spring-context.xsd
     http://cxf.apache.org/jaxrs http://cxf.apache.org/schemas/jaxrs.xsd">

<import resource="classpath:META-INF/cxf/cxf.xml" />
<import resource="classpath:META-INF/cxf/cxf-extension-jaxrs-binding.xml" />
<import resource="classpath:META-INF/cxf/cxf-extension-http.xml" />
<import resource="classpath:META-INF/cxf/cxf-extension-http-jetty.xml" />
<import resource="classpath:META-INF/cxf/cxf-servlet.xml"/>

<bean id="exampleBean" class="com.example.ExampleBean.RestExample" />

<jaxrs:server id="exampleService" address="/">
    <jaxrs:serviceBeans>
        <ref bean="exampleBean" />
    </jaxrs:serviceBeans>
</jaxrs:server>

</beans> 
```

maven安装成功。当我将包部署到 Fuse ESB karaf OSGi 容器并启动它时，我得到：

[ 286] [活动] [] [失败] [60] RestExample (0.0.1.SNAPSHOT)

它未能启动。谁能帮我这个？

# css - 如何删除导航栏上非常薄的明暗边缘

> ID：15840262
> 
> 赞同：2
> 
> 时间：2013-04-05T17:48:12.727
> 
> 标签：css

我的一位客户注意到他们导航栏上的活动链接中有一条非常细的亮线和一条非常细的暗线。它几乎不引人注意，但它就在那里。我试过调整 CSS，但由于线条小于一个像素宽，我不确定它是 CSS。

这是网址：[http ://www.abqlibraryfoundation.org](http://www.abqlibraryfoundation.org)

如果您查看导航栏中的“主页”链接，您会看到作为活动页面，它是一种生锈的橙色，左侧有一个薄薄的浅色边缘。右侧在橙色和绿松石色之间有一个深色薄边。

有谁知道这是什么原因造成的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T17:58:01.517

这是因为**亚像素伪影**。

如今，它也被建设性地用于平滑文本。这是因为屏幕由垂直排列的红色、绿色和蓝色子像素组成。请注意，某些屏幕上的实际顺序可能会有所不同。

```
rgb|rgb|rgb
---+---+---
rgb|rgb|rgb
---+---+---
rgb|rgb|rgb 
```

这意味着在导航栏中，您有如下配置：

```
blue       |    red    |   blue
---+---+---+---+---+---+---+---
  b|  b|  b|r  |r  |r  |  b|  b
---+---+---+---+---+---+---+---
  b|  b|  b|r  |r  |r  |  b|  b
           ^           ^
           |           Artifact caused by sub-pixels being far away (darker line)
           |
           Artifact caused by vicinity of sub-pixels (lighter line) 
```

我还创建了一个图像，说明了 lcd 屏幕 (rgb) 中的典型像素配置：

![亚像素伪影](https://i.stack.imgur.com/oNGg3.png)

您可以看到在第一次*过渡*时，将蓝色变为橙色时，有一个绿色子像素，然后是蓝色和红色子像素，它们彼此**相对接近**。我们的眼睛**认为这是白色的**。

右侧（从橙色到蓝色的第二次过渡）显示了一个间隙，给人一种深色的错觉。

## 关于移动设备的说明

由于移动设备上的大多数网页通常都是**按比例缩放**的，因此这种效果远不那么明显（由于图像重采样）。要考虑的另一个方面是**屏幕的方向**可以改变，因此可能会在不同方向上产生伪影。

如果您对如何利用这种效果来渲染平滑文本感兴趣，可以继续阅读以下关于维基百科的文章：[维基百科](http://en.wikipedia.org/wiki/Subpixel_rendering)

这就是当今屏幕的工作方式，您无能为力（无需更改设计）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T17:54:18.023

如果您看到一条白线，那是您的显示器有缺陷或错觉。这是来自 chrome 的放大截图。正如您在展开的部分中可以清楚地看到的那样，没有较亮的像素列。

![截屏](https://i.stack.imgur.com/utQLc.png)

通过反复试验，我发现我可以通过应用这种风格来消除*显示器上的错觉。*

```
.nav-bar>li#active>a{ border-left: rgb(146, 108, 66) 1px solid; } 
```

它在左边缘创建了一个深 1 像素的橙色，最终看起来像这样。如果你放大那个，它最终看起来比原来的要差得多。

![在此处输入图像描述](https://i.stack.imgur.com/5eG1r.png)

# java - 在 NetBeans IDE 6.9.1 中，我可以删除类似自动更正的功能吗？

> ID：15840265
> 
> 赞同：0
> 
> 时间：2013-04-05T17:48:41.847
> 
> 标签：java, coding-style, formatting, netbeans-6.9, spacing

是的，我知道这听起来很模糊，但是假设我开始输入一个程序：public class programname，然后我按回车键在最左边插入一个 {。该程序会自动将其设置为选项卡。此外，当我按下 { 键时，我的插入点会向下一行，并在没有任何制表符空间的情况下捕捉到左侧。它看起来像这样：

```
import java.text.*;
public class program18

{ 
```

这很烦人，因为我个人的习惯是这样安排我的代码块：

```
import java.text.*
public class program18
{
    //statements go here
} 
```

当我需要停止和纠正间距问题时，NetBeans 会终止我的“流程”。有时，NetBeans 甚至会像这样排列括号：

```
public static void methodname()
    {
    //statements here
        } 
```

这真的引发了我的强迫症。

有没有办法防止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:55:02.900

格式设置位于**Java : Formatting**选项卡上的**Tools : Options**对话框中。不幸的是，我看不到任何方法可以从列表中选择一组标准规则，因此您需要手动修复它们。

 **顺便说一句，NetBeans 的最新版本是 7.3。要求您的网络管理员升级到这十年的版本。**

# parsing - 使用 java.nio 处理带有二进制数据的字符串

> ID：15840267
> 
> 赞同：0
> 
> 时间：2013-04-05T17:48:44.020
> 
> 标签：parsing, validation, scala, character-encoding, binary

我在解析包含非法字符（二进制标记）的文本文件时遇到问题。答案如下：

测试.csv

```
^000000^id1,text1,text2,text3 
```

这里`^000000^`是源文件中非法字符的文本表示。

我正在考虑在处理之前使用 java.nio 来验证该行。所以，我正在考虑引入一个 Validator trait，如下所示：

```
import java.nio.charset._
trait Validator{
   private def encoder = Charset.forName("UTF-8").newEncoder
   def isValidEncoding(line:String):Boolean = {
     encoder.canEncode(line)
   }
} 
```

你们认为这是处理这种情况的正确方法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T19:40:24.960

二进制数据不是字符串。不要试图破解在转换为`String`.

如果您的输入是任意字节序列（即使其中许多符合 ASCII），甚至不要尝试将其转换为`String`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T09:47:31.940

当你已经有了一个`String`，UTF-8 总是可以编码任何字符串*时为时已晚。您需要转到最初解码文件的位置。

* * *

ISO-8859-1 是一种具有有趣属性的编码：

*   从字面上看，任何字节序列都是有效的 ISO-8859-1
*   每个解码字符的代码点与解码它的字节的值完全相同

因此，您可以将文件解码为 ISO-8859-1 并去掉非英文字符：

```
//Pseudo code
str = file.decode("ISO-8859-1");
str = str.replace( "[\u0000-\u0019\u007F-\u00FF]", ""); 
```

您还可以逐行迭代，并忽略包含 中的字符的每一行`[\u0000-\u0019\u007F-\u00FF]`，如果这就是您在处理之前验证行的意思。

* * *

我还想到二进制标记可能是 BOM。您可以使用十六进制编辑器查看这些值。

*除了那些有非法代理人的人，这可能不是这里的情况。

# c++ - 序数 4445 无法位于动态链接库：libeay32.dll

> ID：15840268
> 
> 赞同：1
> 
> 时间：2013-04-05T17:48:44.177
> 
> 标签：c++, visual-studio-2008, windows-7-x64

最近我使用 Visual Studio 2008 将我的项目从 32 位升级到 64 位。在 Windows 7 64 位版本上安装了我的应用程序。当我尝试运行我的应用程序时，它会引发以下错误

```
The ordinal 4445 could not be located in dynamic link library: libeay32.dll 
```

谁能告诉我是什么导致了这个错误以及如何解决它。

我尝试了依赖 walker，发现 mfc42u.dll 在 x86 中。所以我用x64版本替换了它。但我仍然看到了问题。

任何帮助都会很棒！！！

`update 1:`我尝试了此链接中的步骤，但没有使用 [http://www.joyfax.com/faqs/joyfax_mail_ssl.html](http://www.joyfax.com/faqs/joyfax_mail_ssl.html)

# sql - SQL to_char() 将 2 位数字打印为 0xx 并且不触及 3 位数字

> ID：15840271
> 
> 赞同：2
> 
> 时间：2013-04-05T17:48:50.803
> 
> 标签：sql, oracle

我目前正在与一些对你来说一定是微不足道的事情作斗争。

我有 2 个数字 191 和 97，我需要将它们放入 SQL 请求中，因为 chars 和 97 必须打印为 097。

起初我尝试了 999，但它给我的号码增加了 2 个空格。然后是 099，它会打印 097，但会增加一个空格。

```
to_char(:center, '099') = " 197" and " 097" 
```

这个空间是从哪里来的？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T17:56:37.293

您正在寻找的是格式修饰符元素：

```
to_char(:center, 'fm099') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T18:02:14.473

前导空格是潜在的减号。要删除它，您可以使用`FM`以下格式：

```
to_char(v_num,'FM099') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T17:55:50.463

9 9999 返回具有指定位数的值，如果为正数，则带有前导空格，如果为负数，则带有前导减号。前导零为空白，但零值除外，它为定点数的整数部分返回零。

来自[http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements004.htm#i34510](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements004.htm#i34510)

使用@DavidAldridge 解决方案，或削减您的价值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-15T07:57:45.623

如果您正在寻找相同位数的所有列值，即使实际值的位数更少。试试这个

```
a) SELECT TO_CHAR(COLUMN_NAME, 'FM099') FROM TABLE_NAME;

b) SELECT TO_CHAR(COLUMN_NAME, 'FM000') FROM TABLE_NAME; 
```

两者都工作正常。但不知道哪一个是最好的选择。

# asp.net-mvc - 在 MVC 操作上处理 WebDAV 请求

> ID：15840273
> 
> 赞同：2
> 
> 时间：2013-04-05T17:49:01.620
> 
> 标签：asp.net-mvc, webdav

我有一个现有的 MVC3 应用程序，它允许用户上传文件并与他人共享。当前的模式是，如果用户想要更改文件，他们必须删除那里的文件并重新上传新版本。为了改进这一点，我们正在研究集成 WebDAV 以允许在线编辑 Word 文档等内容。

到目前为止，我一直在使用来自[http://www.webdavsystem.com/](http://www.webdavsystem.com/)的 .Net 服务器和客户端库将网站设置为 WebDAV 服务器并与之通信。

但是，我们不希望用户直接与 WebDAV 服务器交互（我们有一些复杂的规则，用户可以根据域逻辑在某些情况下执行什么操作），而是通过之前的控制器操作来访问文件。

到目前为止，它正在运行到我们可以返回文件的地步，它提供了 WebDAV-y 类型的提示来打开文件。

问题是它总是停留在只读模式。如果我使用直接 WebDAV URL 但不是通过我的控制器操作，我已经确认它可以工作并且是可编辑的。

使用 Fiddler 我想我发现问题是 Word 正在尝试与服务器协商有关锁定的位置，该位置没有返回正确的详细信息。用于下载文件的控制器操作是“/Files/Download?filePath=bla”，因此 Word 在发送 OPTIONS 请求时会尝试与“/Files”通信。

我是否只需要在该位置执行一个知道如何响应 OPTIONS 请求的操作，如果是，我将如何响应？或者，是否有另一种方法可以做到这一点，也许通过在响应中添加一些属性来通知 Word 它应该在哪里查找？

这是我的控制器操作：

```
public virtual FileResult Download(string filePath)
{
    FileDetails file = _fileService.GetFile(filePath);
    return File(file.Stream, file.ContentType);
} 
```

这是文件服务方法：

```
public FileDetails GetFile(string location)
{
    var fileName = Path.GetFileName(location);
    var contentType = ContentType.Get(Path.GetExtension(location));
    string license ="license";
    var session = new WebDavSession(license) {Credentials = CredentialCache.DefaultCredentials};
    IResource resource = session.OpenResource(string.Format("{0}{1}", ConfigurationManager.AppSettings["WebDAVRoot"], location));
    resource.TimeOut = 600000;
    var input = resource.GetReadStream();
    return new FileDetails { Filename = fileName, ContentType = contentType, Stream = input };
} 
```

现在还处于早期阶段，所以我很感激我可能以完全错误的方式做这件事，所以欢迎任何形式的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T12:13:04.400

最后，似乎更好的选择是允许用户直接与 WebDAV 服务器对话并实现身份验证逻辑来​​控制它。

IT Hit 服务器具有扩展，允许您使用来自 Office 的基本或摘要式身份验证对站点其余部分的表单身份验证进行身份验证。使用它以及对项目请求逻辑的一些其他定制为我们提供了我们需要的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-20T19:59:50.450

这正是我为 MVC 4 项目所做的。

[https://mvc4webdav.codeplex.com/](https://mvc4webdav.codeplex.com/)

# sql - EF CodeFirst TPH 不产生内连接？

> ID：15840276
> 
> 赞同：0
> 
> 时间：2013-04-05T17:49:26.653
> 
> 标签：sql, entity-framework, ef-code-first

包含包含的简单 LINQ 使用 LEFT OUTER JOIN 而不是 INNER JOIN 生成巨大的 SQL 代码。

我想看到 INNER JOIN 因为两个表是通过外键连接的，并且列 TransportPointID 不为空。

在这种情况下如何强制 EF 使用 INNER JOIN 有什么想法吗？

```
var stops = context.TransportObjects.OfType<Stop>()
                                    .Include(s => s.Points).ToList(); 
```

```
SELECT   [Project1].[TransportObjectID]  AS [TransportObjectID],
         [Project1].[Type]               AS [Type],
         [Project1].[Name]               AS [Name],
         [Project1].[InternalName]       AS [InternalName],
         [Project1].[C1]                 AS [C1],
         [Project1].[Type1]              AS [Type1],
         [Project1].[TransportPointID]   AS [TransportPointID],
         [Project1].[TransportObjectID1] AS [TransportObjectID1],
         [Project1].[Name1]              AS [Name1],
         [Project1].[StandName]          AS [StandName]
FROM     (SELECT [Extent1].[TransportObjectID] AS [TransportObjectID],
                 [Extent1].[Name]              AS [Name],
                 [Extent1].[InternalName]      AS [InternalName],
                 [Extent1].[Type]              AS [Type],
                 [Extent2].[TransportPointID]  AS [TransportPointID],
                 [Extent2].[TransportObjectID] AS [TransportObjectID1],
                 [Extent2].[Name]              AS [Name1],
                 [Extent2].[StandName]         AS [StandName],
                 [Extent2].[Type]              AS [Type1],
                 CASE 
                   WHEN ([Extent2].[TransportPointID] IS NULL) THEN CAST(NULL AS int)
                   ELSE 1
                 END AS [C1]
          FROM   [CentralDatabase].[TransportObjects] AS [Extent1]
                 LEFT OUTER JOIN [CentralDatabase].[TransportPoints] AS [Extent2]
                   ON ([Extent2].[Type] IN (CAST('2' AS smallint),CAST('1' AS smallint)))
                      AND ([Extent1].[TransportObjectID] = [Extent2].[TransportObjectID])
          WHERE  [Extent1].[Type] IN (CAST('1' AS smallint),CAST('2' AS smallint))) AS [Project1]
ORDER BY [Project1].[TransportObjectID] ASC,
         [Project1].[C1] ASC 
```

**模型**

```
public enum TransportObjectType : short
{
    Stop = 1,
    ReferenceObject = 2
}

public abstract class TransportObject
{
    public int TransportObjectID { get; set; }
    public string Name { get; set; }
    public virtual List<TransportPoint> Points { get; set; }
}

public class Stop : TransportObject
{
    public string InternalName { get; set; }
}

public enum TransportPointType
{
    StopPoint = 1,
    ReferencePoint = 2
}

public abstract class TransportPoint
{
    public int TransportPointID { get; set; }
    public int TransportObjectID { get; set; }
    public virtual TransportObject TransportObject { get; set; }
    public string Name { get; set; }
}

public class StopPoint : TransportPoint
{
    public string StandName { get; set; }
} 
```

**映射**（只是重要部分）

```
public class TransportObjectMap : EntityTypeConfiguration<TransportObject>
{
    public TransportObjectMap()
    {
        this.Map<Stop>(m => m.Requires("Type").HasValue((short)TransportObjectType.Stop))
            .Map<ReferenceObject>(m => m.Requires("Type").HasValue((short)TransportObjectType.ReferenceObject));
    }
}

public class TransportPointMap : EntityTypeConfiguration<TransportPoint>
{
    public TransportPointMap()
    {
        this.Map<StopPoint>(m => m.Requires("Type").HasValue((short)TransportPointType.StopPoint))
            .Map<ReferencePoint>(m => m.Requires("Type").HasValue((short)TransportPointType.ReferencePoint));

        // Add not nullable FK
        this.HasRequired(o => o.TransportObject)
            .WithMany(p => p.Points)
            .HasForeignKey(p => p.TransportObjectID);
    }
} 
```

**数据库完全正确。**

![D B](https://s1.postimg.org/m7e63krgf/stackoverflow_codefirst_innerjoin.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:34:55.493

我认为它需要左外连接，因为如果您有一个没有任何 TransportPoint 的 TransportObject，则 TransportObject 不会包含在结果中，并且根据您的 linq 查询，您希望所有 TransportObjects 都在一个列表中。

# jquery - 按 Enter 提交表单但会破坏可访问性

> ID：15840277
> 
> 赞同：1
> 
> 时间：2013-04-05T17:49:27.130
> 
> 标签：jquery, forms, accessibility

我有一个 HTML 表单。我正在拦截提交按钮的激活，因为我需要运行一些 javascript 而不是正常的表单提交。

我添加了 javascript，以便按下回车键和单击提交按钮都会激活表单（我认为这是正常做法）。然而，这打破了可访问性。当用户在表单外点击另一个按钮或链接，然后按 Enter 键时，将激活具有焦点的按钮。但是它没有 - 表单按钮被激活。处理这个问题的标准方法是什么（我觉得我在这里错过了一些基本的东西）？

我用来捕捉回车的简化版本（jQuery）....

```
 $("form").bind("keydown", function(e){
            if (e.which == 13) {
                e.currentTarget.blur();
                $("button").click();
                return false;
            }
         }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T17:55:46.207

改为拦截该`submit()`动作，并使用[`event.preventDefault()`](http://api.jquery.com/event.preventDefault)立即取消它：

```
$('form').on('submit',function(e) {
    e.preventDefault();
    // more code
}); 
```

# haskell - Haskell 中的守卫，使用检查执行操作

> ID：15840280
> 
> 赞同：2
> 
> 时间：2013-04-05T17:49:32.457
> 
> 标签：haskell, tuples

因此，我搜索了在 Haskell 中处理“if”语句的不同方法，并对守卫有疑问，比如我有一个元组并想要执行 +,-,*,/ 检查条件：

给定 (x,y) if x < y only +,* 因为我只想要整数，此外检查除法以便 x `mod`y == 0 与否，这可以编译但我不能让它运行

```
operaciones (x,y) = (x,y)
x,y | x < y = [(x, y, '+', x+y), (x, y, '*', x*y)]
    | (x > y) && (x `mod ` y == 0) = [(x, y, '+', x+y), (x, y, '*', x*y), (x, y, '-', x-y) , (x, y, '/', x/y)]
    | (x > y) && (x `mod ` y /= 0) = [(x, y, '+', x+y), (x, y, '*', x*y), (x, y, '-', x-y)]
    | otherwise  = [(x, y, '+', x+y), (x, y, '*', x*y), (x, y, '-', x-y) , (x, y, '/', x/y)] 
```

我的想法来自

> [Haskell：单个函数中的多个 case 语句](https://stackoverflow.com/questions/4242002/haskell-multiple-case-statements-in-single-function)

但失败，否则是如果 x == y

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T17:54:52.817

你写的不是合法的语法。

你可能想要这个：

```
operaciones (x,y)
    | x < y = [(x, y, '+', x+y), (x, y, '*', x*y)]
    | (x > y) && (x `mod ` y == 0) = [(x, y, '+', x+y), (x, y, '*', x*y), (x, y, '-', x-y) , (x, y, '/', x/y)]
    | (x > y) && (x `mod ` y /= 0) = [(x, y, '+', x+y), (x, y, '*', x*y), (x, y, '-', x-y)]
    | otherwise  = [(x, y, '+', x+y), (x, y, '*', x*y), (x, y, '-', x-y) , (x, y, '/', x/y)] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T02:21:51.100

我不会推荐这种风格。你重复自己的方式太多了。据我了解，您需要此功能：

```
operaciones (x, y) = [
    (x, y, '+', x + y),
    (x, y, '*', x * y),
    (x, y, '-', x - y),
    (x, y, '/', x / y) ] 
```

*但*将结果列表过滤为仅包含正整数结果。（顺便说一句，至少在英语中，约定是“整数”包括负数和 0，因此包含差异的条件比“整数结果”更严格）。

我会通过连接列表推导来进行过滤：

```
operaciones (x, y) =
    [ (x, y, '+', x + y) ] ++
    [ (x, y, '*', x + y) ] ++
    [ (x, y, '-', x + y) | x > y ] ++
    [ (x, y, '/', x `div` y) | x >= y, x `mod` y == 0 ] -- I'm assuming x and y have type Int or Integer, so you should use div not / 
```

另一个注意事项：在 Haskell 中，将多个参数组合成一个像 (x, y) 这样的元组并不常见；所以如果`x`和`y`是单独的参数，你的函数头应该写成

```
operaciones x y = 
```

反而。（编译器的编写方式，优化器实际上必须做额外的工作才能将元组组合`(x, y)`成单独的形式，所以最好保存它。）

**更新**：我想不出一种干净的方式来进行错误报告。我可能最终会采用混合风格，使用警卫进行错误检查和连接成功案例：

```
operaciones x y
    | x <= 0 || y <= 0 = Left "Use positive numbers"
    | otherwise = Right $
        [ (x, y, '+', x + y) ] ++ -- etc. as above 
```

如果你真的想要，你可以使用`error`代替`Left`并省略。`Right`

# java - HelloWorld Spring 应用程序在线程“main”中抛出异常：java.lang.NoClassDefFound

> ID：15840281
> 
> 赞同：1
> 
> 时间：2013-04-05T17:49:34.720
> 
> 标签：java, spring

我正在尝试在运行该应用程序时开发一个 Spring“HelloWorld”项目，它给了我这个错误：

> 信息：从类路径资源加载 XML bean 定义 [Beans.xml] 线程“主”java.lang.NoClassDefFoundError 中的异常：org.springframework.expression.ExpressionParser

下面是我的代码：

```
package com.tutorialspoint;

public class HelloWorld {
    private String message;

    public void getMessage() {
        System.out.println("your message : "+message);
    }

    public void setMessage(String message) {
        this.message = message;
    }
} 
```

和

```
package com.tutorialspoint;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class MainApp {
    public static void main(String[] args) {
    ApplicationContext context = new ClassPathXmlApplicationContext("Beans.xml");

        HelloWorld obj = (HelloWorld) context.getBean("helloWorld ");
    obj.getMessage();
    // TODO Auto-generated method stub
    }
} 
```

应用程序上下文.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

    <bean id="helloWorld" class="com.tutorialspoint/HelloWorld">
        <property name="message" value="Hello World!"/>
    </bean>
</beans> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:52:44.273

包括

> spring-expression-3.1.1.Release.jar

`lib`文件夹下

我提到了 3.1.1 作为示例，您可以使用最新版本（如果有的话）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T17:57:12.320

`class`除了添加所有依赖的jar之外，定义中的定义似乎`bean`是*无效的*

```
com.tutorialspoint/HelloWorld
                  ^ 
```

做了，

```
<bean id="helloWorld" class="com.tutorialspoint.HelloWorld"> 
     <property name="message" value="Hello World!"/>
</bean> 
```

也`context.getBean("helloWorld ")` 应该改为`context.getBean("helloWorld")`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T18:01:06.543

将 spring 依赖项添加到您的类路径

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-21T08:47:41.630

如果您不使用 Maven，如 M Sach 所说，请将“spring expression-X.Release.jar”添加到您的“lib”文件夹中，并且不要忘记将其添加到 Eclipse 的构建路径中

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-05T10:14:01.197

这个与 spring-expression.jar 相关的异常添加这个。

在您的添加以下依赖项`pom.xml`

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-expression</artifactId>
    <version>5.3.8</version>
</dependency> 
```

# c# - C# ASP .Net MVC 4 可变长度路由映射

> ID：15840282
> 
> 赞同：3
> 
> 时间：2013-04-05T17:49:38.700
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-routing

我需要在 asp.net mvc 3 中进行可变长度路由映射。据我了解，我可以像这样映射路由：

```
routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } ); 
```

但是如何添加可变数量的参数。我的应用程序中的路由有一个从基地址开始的目录结构，如下所示：www.mywebsite.com/root/

root 后面的任何内容都具有如下目录结构：

www.mywebsite.com/root/directory1/directory2/image.jpg

这将对应于这样的映射：

```
routes.MapRoute(
            "Default", // Route name
            "root/{path}", // URL with parameters
            new { controller = "DirectoryBrowser", action = "Browse" } ); 
```

但我不知道如何设置路径参数。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T17:50:41.563

您可以使用通配符参数：`"root/{*path}"`

# python - Python 将元组列表转换为嵌套字典列表

> ID：15840285
> 
> 赞同：1
> 
> 时间：2013-04-05T17:50:01.507
> 
> 标签：python, arrays, list, dictionary

我有一个几乎让我发疯的问题。

我正在用 python 编程，我有一个元组列表：

```
my_tuples = [
    ('csrf_token', u'5bc7224ef8f71c8142b4bef1597883b049b83fee'),
    ('fields-team', u'dsada'),
    ('fields-year_from', u'dsa'),
    ('fields-year_to', u'dsa'),
    ('fields-description', u'dsa') ,
    ('fields-team', u''),
    ('fields-year_from', u''),
    ('fields-year_to', u''),
    ('fields-description', u'')
] 
```

我必须将此元组列表转换为：

```
 form_data = {
     'csrf_token':u'5bc7224ef8f71c8142b4bef1597883b049b83fee',
     'fields':[
         {
             'team': u'dsada',
             'year_from': u'dsa',
             'year_to': u'dsa',
             'description': u'dsa'
         },
         {
             'team': u'',
             'year_from': u'',
             'year_to': u'',
             'description': u''
         }
     ]
 } 
```

然后我必须删除第二个字典，因为每个键都有一个空值。所以最终的结果将是：

```
 form_data = {
     'csrf_token':u'5bc7224ef8f71c8142b4bef1597883b049b83fee',
     'fields':[
         {
             'team': u'dsada',
             'year_from': u'dsa',
             'year_to': u'dsa',
             'description': u'dsa'
         }
     ]
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:21:16.603

我的两分钱：

```
import collections

def transform(loft):
    form_data = collections.defaultdict(list)
    internal = {}
    numfield = 0
    for t in my_tuples:
        keys = t[0].split("-")
        if len(keys) == 1:
            form_data[keys[0]] = t[1]
        else:
            internal[keys[1]] = t[1]
            if numfield == 3:
                numfield = -1
                form_data[keys[0]].append(internal)
                internal = {}
            numfield += 1
    return form_data

if __name__ == "__main__":

    my_tuples = [
        ('csrf_token', u'5bc7224ef8f71c8142b4bef1597883b049b83fee'),
        ('fields-team', u'dsada'),
        ('fields-year_from', u'dsa'),
        ('fields-year_to', u'dsa'),
        ('fields-description', u'dsa') ,
        ('fields-team', u''),
        ('fields-year_from', u''),
        ('fields-year_to', u''),
        ('fields-description', u'')
    ]
    trans = transform(my_tuples)
    # cleanup
    trans['fields'] = [f for i, f in enumerate(trans['fields'])
        if trans['fields'][i]['team'] != ''
        and trans['fields'][i]['year_from'] != ''
        and trans['fields'][i]['year_to'] != ''
        and trans['fields'][i]['description'] != '']
    print dict(trans) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:08:32.900

这个怎么样 ：

```
def myfunc(my_tuples):
    mydict = {}
    d = {}
    for kv in my_tuples:
        if kv[0] == 'csrf_token':
            mydict[kv[0]] = kv[1].decode('ascii')
        elif 'fields' in kv[0]:
            d[kv[0]] = kv[1].decode('ascii')
    mydict['fields'] = [d]
    return mydict

def main():
    my_tuples = [
        ('csrf_token', u'5bc7224ef8f71c8142b4bef1597883b049b83fee'),
        ('fields-team', u'dsada'),
        ('fields-year_from', u'dsa'),
        ('fields-year_to', u'dsa'),
        ('fields-description', u'dsa'),
        ('fields-team', u''),
        ('fields-year_from', u''),
        ('fields-year_to', u''),
        ('fields-description', u'')
    ]

    myfunc(my_tuples)

if __name__ == "__main__":
    main() 
```

# iphone - 在 NSMutableArray 中保存 UIImage 的最佳实践

> ID：15840287
> 
> 赞同：1
> 
> 时间：2013-04-05T17:50:04.393
> 
> 标签：iphone, ios, objective-c, memory-management, uiimageview

`UIImage`在一个特定的动作中，我需要记住很多's。

我设法保存图像的最佳方法是将它们转换为`NSData`并存储在`NSMutableArray`. 稍后我将遍历数组并再次转换`NSData`为`UIImage`对象以重用每个图像（我真的将它们全部合并为一个单块）。

但是，如果数组中有 10 个或更多图像，我的应用程序就会崩溃。将它们保存到硬盘而不是`NSMutableArray`会为用户增加大量处理时间。

动态处理大量图像的最佳实践是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:23:29.710

你会发现如果直接存储 UIImage 可以在崩溃前在数组中存储更多的图像。从 NSData 转换为 UIImage 并返回需要消耗内存。

但是，您的内存仍然有限。如果这些图像的大小可以改变，那么在崩溃之前您可以在数组中拥有的数量将是未知的。如果是这种情况，可能是时候开始考虑将数据缓存到`tmp`文件夹了。

无论如何，最好的做法是将对象的引用直接保存在数组中，而不是将它们转换为 NSData。存储直接引用还允许引用计数发挥其魔力，通常需要在内存中复制更少的数据，从而减少内存占用并提高性能。

# eclipse - Groovy 调试器不同步

> ID：15840289
> 
> 赞同：3
> 
> 时间：2013-04-05T17:50:06.013
> 
> 标签：eclipse, debugging, grails, groovy, sts-springsourcetoolsuite

我在尝试调试 grails 中的某些代码时遇到了困难。很难输入文字，所以我发布了一个截屏视频，确切地显示了[这里](http://www.youtube.com/watch?v=dwl2vGpXEYU)的问题。简而言之，当我调试时，调试器开始从一个地方跳到另一个地方，而不是遵循我已有的程序逻辑。我发现的唯一其他类似问题是一岁，没有解决方案，可以在[这里](https://stackoverflow.com/questions/10784329/springsource-tool-suite-skipping-codes)找到。

到目前为止，我最好的猜测是调试器正在显示我输入的文本，但实际上正在执行它缓存在某处的旧版本的类文件。因此，我尝试了：

*   清理项目
*   从目标文件夹和 target-eclipse 文件夹中手动删除所有类文件
*   在我的整个硬盘中搜索具有相似名称的其他文件
*   从工作区中删除我的项目并重新添加它
*   关闭和重新打开 IDE
*   grails 刷新依赖
*   将项目导入新的 IDE（我使用的是 GGTS，我切换到了 IntelliJ）

这些解决方案都没有任何效果。我意识到问题出在 .groovy 文件中，而我编写的几乎是纯 Java，所以我删除了 .groovy 文件，并在 .java 文件中重新创建了类。这解决了我的问题。不幸的是，我又遇到了这个问题，这次是在一个严重依赖 grails 框架的控制器中，所以这个解决方案不是一个选择。除了也在 .groovy 文件中之外，另一个相似之处是代码在 if 语句上中断。

我的下一步：

*   通过使用打印函数来监控实际执行流程，验证应用程序没有执行我看到的代码。
*   注释掉整个函数并一次重新添加一行功能，看看我是否能看到是什么破坏了它。
*   删除 .groovy 文件，然后将其重新创建为另一个 .groovy 文件。

感谢您提供任何帮助，由于我在网上找不到任何答案，我将在了解更多信息时继续更新此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T21:43:44.113

请参阅我对[您提出的 jira 问题](https://issuetracker.springsource.com/browse/STS-3333#comment-86273)的评论。您发现 groovy 编译器及其计算行号的方式存在问题。这不是执行错误的类文件或使用损坏的调试器的问题。调试器正在做它预期做的事情。是编译器提供了错误的行号信息。

如问题中所述，下一步是提供一个重新创建错误的简单项目。我自己也试过这样做，但做不到。所以，请提供一些我们可以使用的东西。然后我们可以通知 groovy 编译器团队。

# c++ - c++ Qt Qwt构建问题

> ID：15840294
> 
> 赞同：1
> 
> 时间：2013-04-05T17:50:19.597
> 
> 标签：c++, qt, qwt

我是Qt新手，所以如果这个问题很明显，我提前道歉......

我刚刚在我的 Windows7 机器上下载并安装了最新版本的 Qt Creator 5 以及 Qwt（Qt Widgets for Technical Applications）。

Qwt.pro 没有在我的 Windows 机器上使用 QT Creator 构建。

在我使用 Qt Creator 4 的 Ubuntu 机器上一切正常。

Qwt 和最新版本的 Qt 是否存在兼容性问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:36:48.030

你安装了MinGW版本的Qt吗？如果不确定是否安装了包含 MSVC 编译器的 Visual Studio。要开始使用 MinGW 版本，MSVC 编译器在 Windows 上速度更快，但设置起来更复杂。为了测试，直接从 Qt 控制台（开始菜单）在 Qwt 目录中运行 qmake。还要确保您可以先使用 Qt Creator 构建一个简单的 hello world 项目。

# unix - shell - 在字符串的不同索引处插入一个字符

> ID：15840296
> 
> 赞同：1
> 
> 时间：2013-04-05T17:50:33.700
> 
> 标签：unix, dash-shell

它最终将成为更大脚本的一部分，因此需要编写 shell 脚本。其他语言的一个简单任务，但我无法在 shell 中完成它。基本上我有一个字符串，我想插入一个“。” 在字符串中所有可能的索引处。输出可以是换行符或空格分隔。任何人都可以帮忙吗？

示例：
输入：“abcd”

输出：“ .abcd
a.bcd
ab.cd
abc.d
abcd。”

或者

输出：“.abcd a.bcd ab.cd abc.d abcd。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T17:59:20.813

一个简单的 for 循环可以：

```
input=abcd
for ((i=0; i<${#input}+1; i++))
do
    echo ${input::$i}.${input:$i}
done 
```

这只是在每个索引处分割字符串并插入一个`.`. 当然，如果您想存储它们而不是输出它们，您可以将其更改`echo`为其他内容，例如附加到数组。

# c++ - c ++如何使用ElementComparator类在JUCE中对数组进行排序

> ID：15840299
> 
> 赞同：0
> 
> 时间：2013-04-05T17:50:41.067
> 
> 标签：c++, juce

我有一个数组，我想使用 JUCE 库中定义的 ArrayName.sort(ElementComparator&comparator) 对这个数组进行排序，这里是排序函数的链接：[http ://www.rawmaterialsoftware.com/juce/api/ classArray.html#a13366b4435364fcd0d304cdcaebd726a](http://www.rawmaterialsoftware.com/juce/api/classArray.html#a13366b4435364fcd0d304cdcaebd726a)

我无法理解如何将该比较器传递给我的排序函数。

或者，如果有人可以给我一个更好的方法来按升序和降序对字符串数组进行排序。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-12T12:34:05.133

它非常简单，文档中对此进行了描述：

> 这将使用比较器对象对元素进行排序。传递的对象必须具有以下形式的方法：

```
int compareElements (ElementType first, ElementType second); 
```

> ..并且此方法必须返回：
> 
> 如果第一个在第二
> 个之前，则值 < 0 如果两个对象相等
> ，则值为 0 如果第二个在第一个之前，则值 > 0

因此，要使用自己的比较器对 Array 进行排序，您必须定义一个实现上述方法的类，例如：

```
class MyArraySorter
{
public:
    static int compareElements(ElementType a, ElementType b)
    {
        if (a < b)
            return -1;
        else if (a > b)
            return 1;
        else // if a == b
            return 0;
    }
}; 
```

当然，ElementType 必须是数组所持有的元素类型，并且 compareElements 的实现必须相应地进行调整。

然后将其传递给数组的排序方法：

```
MyArraySorter sorter;
myarr.sort(sorter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T18:22:54.037

> 或者，如果有人可以给我一个更好的方法来按升序和降序对字符串数组进行排序。

一个例子可能是：

```
#include <string>
#include <vector>
#include <algorithm>

std::vector<std::string> vec;

/* populate your vector */

std::sort(vec.begin(), vec.end()); 
```

您可以尝试使用一些标准库来更轻松地完成字符串的存储和排序。

# codeigniter - CodeIgniter 可以路由自定义 URL 吗？

> ID：15840303
> 
> 赞同：-1
> 
> 时间：2013-04-05T17:50:44.517
> 
> 标签：codeigniter

我正在尝试在 Codeigniter 上获取漂亮的 URL。基本上，这就是我想要的。

```
//http://website.com/State/City/Neighborhood/Zip => http://website.com/search?lotsofParams=1234
$route['/State/City/Neighborhood/Zip'] = "search?location=blahblahblah&Submit=Search"; 
```

我愿意手动编写路线，但现在该代码不起作用。知道如何让这个工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T11:48:36.383

不，您正在使用`QUERY STRINGS`您不能将查询字符串路由到友好的斜线网址。

你可以用重写它们`htaccess`

# sql - 正确设置 SQL 局部变量

> ID：15840308
> 
> 赞同：0
> 
> 时间：2013-04-05T17:50:53.060
> 
> 标签：sql, sql-server, local-variables

**我想知道是否有办法让局部变量使用未在变量的“SET”中声明的 SELECT 语句中的“FROM”语句。我有以下示例：**

```
DECLARE @IDNO int;
DECLARE @ORDERQUANTITY int;

SET @IDNO='1';  --TEST VALUE
SET @ORDERQUANTITY=ISNULL(SUM(Table1.QUANTITY), 0);

SELECT
Table1.IdNo AS 'ID No',
@ORDERQUANTITY AS 'Order Quantity'

FROM Table1

WHERE IdNo = @IDNO
GROUP BY IdNo, QUANTITY 
```

我有很多列将列添加在一起，而那些添加在一起的列是从`@ORDERQUANTITY`变量中的语句派生的。

因此，我不想在我的 SELECT 语句中使用冗长的列定义，而是将内容放在变量中以使 SELECT 语句更简单

例如

`SELECT @ORDERQUANTITY - @ORDERSCANCELLED AS 'Net Sold'`

解决此问题的最佳方法将不胜感激！

（使用 SQL 服务器）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:54:58.397

你的意思：

```
SELECT @ORDERQUANTITY = COALESCE((SELECT SUM(QUANTITY) FROM dbo.Table1), 0); 
```

如果您的目标是使您的后续查询更具可读性，我建议使用较短的变量名而不是使用`@ALLCAPSFORVARIABLENAMESBECAUSETHEYARENOTVERYREADABLE`.

此外，我不知道你想用它做什么，`GROUP BY`但它似乎根本没有必要（并且按常量分组在任何情况下都不会做任何事情）。

现在，我不确定我是否完全遵循您的尝试。您是说您不想`SUM(QUANTITY)`在`SELECT`列表中重复多次，并且您想用变量替换*表达式*而不是 value*？很难从您的代码中分辨出来，但这`SUM`应该代表整个表格，还是仅代表给定的 ID？一些想法：

1.  如果您只查找特定 ID 的一行，请使用 CTE/派生表，这样您就不必重复计算：

    ```
    ;WITH x AS 
    (
      SELECT oq = SUM(Quantity), oc = SUM(Cancelled)
      FROM dbo.Table1 WHERE IdNo = @IDNO
    )
    SELECT
      [Total Sold] = oq,
      [Cancelled] = oc, 
      [Net Sold] = oq - oc
    FROM x; 
    ```

2.  如果您想首先计算整个表的总和，请执行以下操作，这样您只需执行一次这些计算：

    ```
    SELECT
      @oq = SUM(Quantity),
      @oc = SUM(Cancelled)
    FROM dbo.Table1;

    ... and use those variables later ... 
    ```

3.  如果您尝试将多个`@IDNO`值的值保存在一个变量中，则需要对此进行不同的思考。当您处理多于一排的集合时，不要再将变量视为储存罐。告诉我们您真正想要实现的目标，而不是告诉我们您认为如何实现它。

最后，请停止使用`AS 'single quotes'`别名。如果您需要为列别名使用非法字符或保留字，请`AS [square brackets]`改用我们。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-05T17:59:57.960

如果您要问的是您是否可以这样做：

```
DECLARE @ORDERQUANTITY int;
DECLARE @ORDERSCANCELLED int;
SET @ORDERQUANTITY=ISNULL(SUM(Table1.QUANTITY),0);
SET @ORDERSCANCELLED=ISNULL(SUM(Table1.CANCELLED),0);
SELECT @ORDERQUANTITY - @ORDERSCANCELLED 
```

答案是肯定的

# php - 通过 JSON 输出 HTML，由 ajax 激活

> ID：15840309
> 
> 赞同：4
> 
> 时间：2013-04-05T17:50:53.243
> 
> 标签：php, jquery, html, mysql, json

### 背景：

我有一个动态拉出模式窗口的页面，该窗口通过 mySQL 在一行（多列）上显示扩展信息。我遇到了我的 JSON 代码无法正确填充信息以便输出的问题。我尝试了多个嵌套数组、while 循环和 for 循环。但是，我只需要从数据库中返回一整行信息。在挠头之后，我正在寻求所有 SO 专家的帮助。任何指针都非常感谢。

### Div 人口的 Ajax 代码（作品）

```
 var data_id = $(this).data('id');
                $.ajax({
                    url: 'view_agency_info.php',
                    type: 'POST',
                    data: {id: data_id},
                    dataType: 'json',
                    success: function(data){
                        $('.view_modal_content').html(data.html); // LOAD THE DATA INTO THIS DIV
                    },
                    error: function(jqXHR, textStatus, errorThrown){
                        $('.view_modal_content').html(''); // LOAD THE DATA INTO THIS DIV
                        alert('Error Loading Information');
                    }
                }); 
```

### 用于提取信息并返回 HTML 的 JSON 代码

```
<?php
$customer_id=$_SESSION['customer']['customer_id'];
$id = (int)$_POST['id'];
$query = "SELECT * FROM collections_list WHERE id={$id} && customer_id=$customer_id LIMIT 1"; //expecting one row
$result = mysql_query( $query );
//$message = mysql_fetch_assoc( $result ); //expecting just one row
$message=array();

while ($row = mysql_fetch_assoc($result)) {
    $message[]=$row['agency_name'];
    $message[]=$row['account_number'];
    $message[]=$row['phone'];
}

$json = array();
$json['html'] = '<p><pre><code>id:'.$id.'.<br>Agency Name: '.$message[0].'<br>Account Number:'.$message[1]."<br>Phone:".$message[2].'</code></pre></p>'.'<br><br>test';

header('Content-Type: application/json');
echo json_encode( $json );
?> 
```

附加问题：

> 是否可以在返回的 html 中使用“$message['agency_name']”来引用数组中的标题？
> 
> 解决此问题后，我需要将输出的 html 转换为结构，以允许我的用户以可正确理解的格式查看信息。我知道如何在 html 中执行此操作，但我对 JSON 不熟悉......有没有一种方法可以输出信息而无需手动编码结构？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:15:13.857

```
$con = mysql_connect("localhost","user","password");
 if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db(db_nname", $con);

$result = mysql_query("SELECT phone,agency_name FROM  '''' ");

 $rows = array();
 while($r = mysql_fetch_assoc($result)) {
  $rows['results'][] = $r;

 }

print json_encode($rows);

   ?> 
```

在你的 html 中

```
 <table id ="listtable"></table>

  var listdiv = $("#listtable");

      $.getJSON("whatever.php",function(json){
  $.each(json.results,function(i,data){ 
         listdiv.append("<tr><th>" + data.phone + "</th><th>" + data.agency_name + "</th></tr>");

    });     
      }); 
```

并在附加使用数据中。无论您的字段是什么 data.agency_name data.phone

ETC....

# c - (unix/C) 使用 system() 函数时出现“stty：stdin 不是终端”

> ID：15840310
> 
> 赞同：1
> 
> 时间：2013-04-05T17:50:58.157
> 
> 标签：c, unix, terminal, system

我们正在从标准输入读取一个文件到`file_buffer`，然后单步执行一个方法`more`。

一旦我们使用`system("stty cbreak -echo");`，输出就会打印“stty: stdin is not a terminal”，并且不会将我们的终端设置为我们要求的设置。

这个问题只在我们使用标准输入时存在。如果我们使用文件参数，程序可以正常工作——终端设置被设置，并且没有错误消息。

所以，这没关系：`myprogram file1.txt`

但这不是：`myprogram < file1.txt`

无论哪种方式，内容都在被使用之前被读入`file_buffer`。如果我们从标准输入获取输入，那么使用 stty 到底有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:54:12.933

如果使用输入重定向或管道，则`stdin`不是*TTY*。

你可以用它[`isatty`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/isatty.html)来检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T18:06:49.993

当标准输入是文件时，它不是终端，因此在`stty`的标准输入上设置终端属性将不起作用。

起初听起来很愚蠢，但您可能会发现您可以使用`stdout`或`stderr`作为输入`stty`，它会调整终端。所以：

```
system("stty cbreak -echo <&2"); 
```

很可能设置终端特性。如果您有 GNU 版本`stty`，您还可以使用：

```
system("stty -F /dev/stderr cbreak -echo"); 
```

或替代`/dev/stdout`或`/dev/tty`代替`/dev/stderr`。您还可以使用任何命名设备，而不是`&2`第一个变体中的重定向。

# c# - 当服务器处于繁重的 CPU 负载或线程池繁忙时，WCF 可靠会话故障

> ID：15840313
> 
> 赞同：5
> 
> 时间：2013-04-05T17:51:05.950
> 
> 标签：c#, wcf, reliablesession

# 当服务器处于繁重的 CPU 负载或线程池繁忙时，WCF 可靠会话故障

WCF 可靠会话中似乎存在设计缺陷，当服务器处于高 CPU 负载（80-100% 范围）或没有立即可用的 IO 线程池线程时，该缺陷会阻止基础结构保持活动消息的发布或接受来处理消息。由于可靠的会话不活动超时，症状表现为明显的随机通道中止。然而，中止逻辑似乎以更高的优先级或通过不同的机制运行，因为即使保持活动定时器无法运行，中止定时器似乎也会触发。

深入研究参考源，看来 ChannelReliableSession 使用 InterruptableTimer 类来处理 inactivityTimer。作为响应，它触发由 ReliableOutputSessionChannel 设置的 PollingCallback，它创建一个 ACK​​RequestedMessage 并将其发送到远程端点。InactivityTimer 使用 WCF 内部的 IOThreadTimer/IOThreadScheduler 来调度自己。这取决于一个可用的（非繁忙的）IO ThreadPool 线程来为定时器提供服务。**如果 CPU 负载很高，则线程池似乎不会产生新线程。因此，如果有多个线程正在执行（在我的 4 核机器上似乎是 8 个线程；在 15 秒 inactivityTimeout 7 将中止并失败），则没有线程可用于发送 keep-alive。**但是，如果您将客户端上的可靠会话不活动超时修改为比服务器更长，即使在这些情况下，服务器仍将单方面中止通道，因为它希望在更短的时间内收到消息。因此，中止逻辑似乎以更高的优先级运行，或者向其中一个正在执行的线程抛出异常（不确定是哪个）；我预计服务器上的中止会由于 CPU 高而延迟，并且客户端的超时时间较长最终会命中，但事实并非如此。**如果 CPU 负载较低，那么即使并发调用需要 30-90 秒才能返回，这种完全相同的场景也可以正常工作。**

您的 InstanceMode 是什么、最大并发连接、会话或实例是什么、其他任何超时值是什么都无关紧要（recieveTimeout 必须大于 inactivityTimeout 除外）。这完全是WCF实现的设计缺陷；它应该使用隔离的高优先级或实时线程来为保持活动消息提供服务，因此不会产生虚假的中止。

**简短的版本是：只要 CPU 负载保持在低水平，我可以发出 1000 个需要 60 秒才能完成的并发请求和 15 秒的可靠会话不活动超时，没有问题。一旦 CPU 负载变重，调用将随机开始中止，*包括不占用任何 CPU 时间的调用或空闲等待使用的双工会话*。**如果传入的调用也增加了 CPU 负载，那么服务将进入死亡螺旋，因为执行时间被浪费在保证中止的请求上，而其他请求则位于入站队列中。在停止所有请求、所有运行中的线程完成并且 CPU 负载下降之前，该服务无法恢复到健康状态。**这种行为似乎使 Reliable Sessions 成为最不可靠的通信机制之一。**

同样的行为也适用于客户端；在这种情况下，WCF 客户端可能会受到盒子上其他进程的支配，但在高 CPU 负载下，它将随机中止可靠会话，除非所有操作的完成时间少于 inactivityTimeout，但如果您不发出新的调用很快，WCF 可能仍然无法发送 keep-alive，并且通道可能出现故障。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T17:51:05.950

记录我的答案：

如果您使用 ThreadPool.SetMinThreads(X, Y) 可以稍微缓解该问题，其中 Y 比执行并发 WCF 请求的线程数大一些。然后可能有一个可用的线程++来为保持活动提供服务，并且即使在持续的 100% CPU 负载下，可靠会话也可能不会超时，但这也有其局限性。在我的测试中，我将 IO 线程最少从 2 个增加到 20 个，然后发出大量并发（但只是休眠 10 秒的无操作请求）。之后，我重新运行了我的客户端，但调用了 CPU 浪费，我能够同时成功地执行所有 8 个。由于线程池的延迟初始化，重新启动服务然后立即执行相同的客户端测试失败。碰到这个问题，我最终在 14 个同时调用（10 个调用中止）时再次开始超时，这可能只是调度程序没有获得足够的 CPU 片来正确执行。我怀疑如果你能抓住 IO 线程并提高它们的优先级，你也许可以解决这个问题。

++因为池使用延迟初始化，您必须从客户端发出足够的并发调用，这些调用需要时间才能完成但不使用任何 CPU（例如：Thread.Sleep(5000)）来强制池创建不触发 high-CPU-blocks-new-threads 逻辑的最小线程数，否则不会创建最小线程数，问题仍然存在。

另一个潜在的解决方法是使 inactivityTimeout 的值非常大。这将有助于缓解问题，但会引入新的拒绝服务漏洞，即使客户端意外关闭连接失败也是如此。

**否则，目前似乎没有解决此问题的方法；由于此缺陷，我个人建议不要使用 Reliable Sessions，因为它使中止在连接中止和中止开始发生的情况下都是随机的。**

# java - Spring JPA 并从 @ManyToMany 中删除条目

> ID：15840324
> 
> 赞同：6
> 
> 时间：2013-04-05T17:51:45.950
> 
> 标签：java, spring, hibernate, jpa

如下所述：

*   [使用单向多对多映射删除级联](https://stackoverflow.com/questions/1980177)
*   [如何在 JPA 中删除具有多对多关系的实体（以及相应的连接表行）？](https://stackoverflow.com/questions/1082095)
*   [JPA JPQL：当项目（列表/集）的属性包含另一个项目时选择项目](https://stackoverflow.com/questions/8339889)

从`@ManyToMany`映射中删除条目时，需要手动调整以删除外键。

多年来，我一直在使用自己的 JPA CRUD，并为此提供了一个不错的解决方案：[CrudDao](https://github.com/fommil/common-utils/blob/master/src/main/java/com/github/fommil/jpa/CrudDao.java#L409) ，例如[NoteDao](https://github.com/fommil/zibaldone/blob/master/src/main/java/uk/me/fommil/zibaldone/persistence/NoteDao.java#L61)。

但我最近对[​​Spring JPA](http://www.springsource.org/spring-data/jpa)以及通过声明接口然后`namedQuery`在`@Entity`.

但是如何解决`@ManyToMany`删除问题？我基本上将`remove`在我的 Crud 上有一些方法来公开 JPA 的这个“特性”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T21:53:28.890

[如https://stackoverflow.com/a/14911910/1041691](https://stackoverflow.com/a/14911910/1041691)`@PreRemove`中所述，我似乎已经解决了这个问题

例如 [https://github.com/fommil/zibaldone/blob/master/src/main/java/com/github/fommil/zibaldone/Note.java#L74](https://github.com/fommil/zibaldone/blob/master/src/main/java/com/github/fommil/zibaldone/Note.java#L74)

# javascript - 如何从 DOM 元素中删除事件监听器？

> ID：15840326
> 
> 赞同：1
> 
> 时间：2013-04-05T17:51:48.323
> 
> 标签：javascript, dom, addeventlistener

我想在点击时切换添加/删除事件监听器。有人能指出我如何改进我的代码吗？

我在 Stackoverflow 上阅读了许多答案，但没有一个对我有帮助。

这是一个学习工具，将指针悬停在显示的数字上会使中心立方体旋转以显示相同的数字。

当页面加载时，一个事件监听器被添加到中心立方体，我编写了一个小 jQuery 来将监听器添加到任何单击的立方体，这样它们也会显示指针悬停的数字。

在 Chrome 中运行，在 Opera 中运行。FF 认为它的 Salvador Dali 和 IE ......呃！

[目前如何运作](http://sandbox.chrisloughnane.net/cube3d/)

页面加载时添加的事件监听器

```
var thisCube = '.two';
var init = function() {
  var box = document.querySelector(thisCube).children[0],
      showPanelButtons = document.querySelectorAll('#hover-change li'),
      panelClassName = 'show-front',

      hover = function( event ){
        box.removeClassName( panelClassName );
        panelClassName = event.target.className;
        box.addClassName( panelClassName );
      };

  for (var i=0, len = showPanelButtons.length; i < len; i++) {
    showPanelButtons[i].addEventListener( 'mouseover', hover, false);
  }

};

window.addEventListener( 'DOMContentLoaded', init, false); 
```

jQuery添加新的监听器

```
$('.one, .three, .four, .five, .six, .seven, .eight, .nine').click(function() { 
    thisCube = $(this).data('id');
    init();
}); 
```

我确定我没有正确添加事件侦听器，所以当我阅读其他解决方案时，这给我带来了麻烦。

我没有为这篇文章构建一个 jsfiddle，因为发布所有相关代码的新规则会使这篇文章变得太大。如果有人想在 jsfiddle 上看到它，请询问。

[基于此演示构建](http://desandro.github.com/3dtransforms/docs/cube.html)

- 编辑 -

我尝试添加此代码以添加一个类`rotate`，如果一个元素已经具有该类，我将删除`rotate`并删除事件侦听器。它不会删除事件侦听器。

```
$('.one, .two, .three, .four, .five, .six, .seven, .eight, .nine').on('click', function() {

    if($(this).hasClass('rotate'))
    {
        $(this).removeClass('rotate');
        alert('remove ' + $(this).attr("class"));
        $(this).off('click');
    } else {
        $(this).addClass('rotate');
        alert('add ' + $(this).attr("class")); 
        thisCube = $(this).data('id');
        init();
    }
}); 
```

-- 我的解决方案 --

```
$('.container').click(function(){
    $(this).toggleClass('rotate');
});

$('#hover-change').children().hover(function(){
    $('.rotate > #cube').removeClass();
    $('.rotate > #cube').addClass($(this).attr('class'));
},
function(){}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T18:13:09.333

您可以使用[jQuery.on](http://api.jquery.com/on/)添加事件侦听器并使用[jQuery.off](http://api.jquery.com/off/)删除它们。

```
//Add
$('.one, .three, .four, .five, .six, .seven, .eight, .nine').on('click', function() { 
    thisCube = $(this).data('id');
    init();
});

// Remove
$('.one, .three, .four, .five, .six, .seven, .eight, .nine').off('click'); 
```

您也可以使用事件命名空间：

```
//Add
    $('.one, .three, .four, .five, .six, .seven, .eight, .nine').on('click.MyNamespace', function() { 
        thisCube = $(this).data('id');
        init();
    });

// Remove
    $('.one, .three, .four, .five, .six, .seven, .eight, .nine').off('click.MyNamespace'); 
```

这样你就不会与其他处理程序混淆..

希望能帮助到你...

# java - 空数组，拆分方法

> ID：15840328
> 
> 赞同：0
> 
> 时间：2013-04-05T17:51:52.367
> 
> 标签：java, split

我的问题是`ms[ ]`当我做 split() 时数组没有得到值；为什么会这样？

```
public class Test {

    public static void main(String[] args) {
        Date date = new Date();
        SimpleDateFormat ft = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss.");    //change format          
        String msgTime = ft.format(date);
        System.out.println(msgTime);

        String ms[] = msgTime.split(".");
        System.out.println(ms.length);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:55:46.463

问题是 split() 函数将正则表达式作为参数，而不是简单的字符串。和 ”。” 正则表达式表示“任何符号”。所以你只需要逃避它。

`String ms[] = msgTime.split("\\.");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T17:54:54.473

我猜你打算这样做

```
String ms[] = msgTime.split("\\."); 
```

[String.split()](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)采用正则表达式，因此您应该转义任何特殊字符，例如`.`.

# floating-point - 浮点等式和不等式

> ID：15840334
> 
> 赞同：3
> 
> 时间：2013-04-05T17:52:12.020
> 
> 标签：floating-point

浮点相等比较有时有奇怪的边缘情况，例如两个 NaN 值比较不相等，即使它们是相同的位模式。

然而，可以假设不平等总是平等的反面吗？也就是说，假设标准 IEEE 64 位浮点数在 x64 等主流体系结构上实现，那么无论存在什么位模式，都将是其中之一`a == b`并且`a != b`总是正确的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T18:05:41.260

是的，这将永远是正确的，没有数字解释运算符 == 不会返回与 != 完全相反的位模式。

正如您已经提到的，对于不同的位模式（负零 0x80... 等于零 0x00...）或相同的位模式比较为不等（NaN）的位模式有例外，但是 != 总是==的反转。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T18:20:38.950

必须小心正在测试什么关系。“x 和 y 有不同的值吗？”有不同的测试。和“x不等于y吗？”</p>

如果 x 或 y 是 NaN，或者两者都是 NaN，则它们具有不同的值是错误的（因为它们中至少有一个根本没有任何值），但不存在相等性是正确的。

C 运算符`!=`询问“不等于”，因此它回答了后一个问题。又因为问的是“不相等”，所以是“相等”的逻辑否定。

某些语言提供了一种询问前一个问题的方法。

# jquery - fancybox 2 iframe 加载问题

> ID：15840336
> 
> 赞同：1
> 
> 时间：2013-04-05T17:52:25.620
> 
> 标签：jquery, iframe, fancybox, fancybox-2

我在最近推出的网站上遇到了 fancybox 2 的问题。

我使用我的页面上的链接在花式灯箱中打开 Galleria (galleria.io) 画廊和 PDF 文件。对于照片画廊（画廊），我在fancybox iframe 中加载了另一个网页，并且我正在定义明确的缩略图图像，因此不必立即加载所有全尺寸图片。对于 PDF 内容，我直接在 iframe 中加载 PDF 文件。

但是，第一次单击链接时，通常不会出现 iframe（永久加载动画）。关闭花式框并再次单击链接可以很好地加载内容。Galleria 和 PDF 内容都会发生这种情况。

我主要在 FF 中开发和测试了该网站，但似乎问题也出现在 IE 中。

在互联网上搜索答案后，我发现的最接近的问题是 stackoverflow 上的以下问题：

/questions/4710023/jquery-fancybox-working-but-only-when-you-click-this-image-twice

（尝试使用此处发布的解决方案交换术语，但在 iframe 内导致 404）

/questions/9779250/fancybox-2-requires-two-click

（信息不足）

/questions/14819642/fancybox-stuck-loading-iframe-in-ie

（指的是 IE，但禁用预加载听起来很有希望，我正要试一试）

我是一个家庭建设者，而不是一个代码建设者，所以我确信我在构建我的网站的过程中做错了什么。我将不胜感激提供的任何帮助！谢谢！

示例链接：

（在开发中）画廊页面： http: [//www.sonahomes.com/gallery/](http://www.sonahomes.com/gallery/)

（实时）主页： http: [//www.sonahomes.com](http://www.sonahomes.com) [在主页的页脚上方有“精选列表”，其中包含指向 PDF 和照片画廊的链接……最右边的列表加载了一个包含 19 个相片]

代码：

在 iframe 中打开 PDF 的链接：

```
<a href="...pdf file..." class="various">
  <p><img src="...icon..." class="icon" />PDF Flyer</p>
</a> 
```

在 iframe 中打开 Galleria 画廊的链接：

```
<a href="...link to page with galleria..." class="various">
  <img src="...small image..." class="thumb1" />
  <div>
    <p><img src="...icon..." class="icon" />19 Photos</p>
  </a>
  </div> 
```

（我知道上面画廊链接中的附加 div 并不完全正确，但我认为它与问题无关，因为同样的问题发生在上面链接的画廊页面上，该页面只有文本链接）

使用 fancybox 在页面上初始化：

```
<body>
<script type="text/javascript">
$(document).ready(function() {
  $(".various").fancybox({
    autodimensions : false,
    autoSize : false,
    fitToView : false,
    type : 'iframe',
    });
});
</script> 
```

# java - im4java 转换为 jpg，图像崩溃

> ID：15840341
> 
> 赞同：1
> 
> 时间：2013-04-05T17:52:54.163
> 
> 标签：java, imagemagick, im4java

我想使用 im4java 将图像从 gif 转换为 jpeg。执行后应该有一张gif和一张ipeg图片。但是当我这样做时。有3张图片。一个是原始gif，一个是新的nomarl jpeg，另一个是崩溃的jpeg图片。有些图片可能会导致此问题。有些可能不会。有没有人知道为什么？谢谢

* * *

```
public static void convertImage(String srcPath, String newPath, String format)
throws Exception
{
    IMOperation op = new IMOperation();
    op.addImage(srcPath);
    op.addImage(newPath);
    System.out.println(op);
    ConvertCmd cmd = new ConvertCmd();
    cmd.run(op);
}
public static void changePictures(String format) throws Exception
{
    File file = new File("picture path");
    File pictureArray[];
    pictureArray = file.listFiles();
    int i;
    for(i = 0; i < pictureArray.length; i++)
    {
        convertImage(pictureArray[i].getAbsolutePath(), "picture path" + i + "." +          format, format);   
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T05:01:35.160

op.addImage(srcPath); 这里。因为一个gif文件中的图片不止一张。试试这个op.addImage(srcPath+"[0]");

# c# - SQL Server 2008 日期时间不会通过 c# 插入，但可以在 SQL Server Management Studio 中工作？

> ID：15840343
> 
> 赞同：1
> 
> 时间：2013-04-05T17:53:09.917
> 
> 标签：c#, sql, sql-server, datetime

我正在使用 SQL Server 存储过程通过 C# 将数据放入数据库。当我从 SQL Server Management Studio 中运行存储过程时，它可以工作，但是当我尝试使用 C# 插入行时，它失败了，我无法找出原因。最初我在使用存储过程中的类型时遇到了麻烦，`DATETIME`但现在当我使用 CAST 时它可以工作。我也尝试过将`DateTime`值作为字符串从 C# 传递，但这也不起作用！？

我的SP如下：

```
ALTER PROCEDURE [dbo].[SaveFlightInfo]
(
        @FlightInfoID int,
        @AirportFrom varchar(5),
        @AirportTo varchar(5),
        @TimeDeparture datetime,
        @TimeArrival datetime,
        @Price float,
        @DateAdded datetime,
        @Carrier varchar(30),
        @Url varchar(300)

)

AS

DECLARE @sql as varchar(1000)

--If the primary key is zero then insert new record
IF ( @FlightInfoID = 0) BEGIN
DECLARE @sql3 as varchar(1000)
SET @sql ='
INSERT INTO '+@AirportFrom+'
(AirportFrom,
AirportTo,
TimeDeparture,
TimeArrival,
Price,
DateAdded,
Carrier,
Url)

 VALUES ('''+@AirportFrom+''',
'''+@AirportTo+''',
CAST('''+CAST(@TimeDeparture as varchar(50))+''' as DATETIME),
CAST('''+CAST(@TimeArrival as varchar(50))+''' as DATETIME),
CAST('''+CAST(@Price as varchar(10))+''' as FLOAT),
CAST('''+CAST(@DateAdded as varchar(50))+''' as DATETIME),
'''+@Carrier+''',
'''+@Url+''')

'
    END
    EXEC(@sql) 
```

我的 C# 代码如下：

```
 Database db = DatabaseFactory.CreateDatabase("DBConnectionString");
        DbCommand dbCommand = db.GetStoredProcCommand("SaveFlightInfo");

        db.AddInParameter(dbCommand, "FlightInfoID", DbType.Int32, flightInfoID);
        db.AddInParameter(dbCommand, "AirportFrom", DbType.String, airportFrom);
        db.AddInParameter(dbCommand, "AirportTo", DbType.String, airportTo);
        db.AddInParameter(dbCommand, "TimeDeparture", DbType.DateTime, timeDeparture);
        db.AddInParameter(dbCommand, "TimeArrival", DbType.DateTime, timeArrival);
        db.AddInParameter(dbCommand, "Price", DbType.Int16, price);
        db.AddInParameter(dbCommand, "DateAdded", DbType.DateTime, dateAdded);
        db.AddInParameter(dbCommand, "Carrier", DbType.String, carrier);
        db.AddInParameter(dbCommand, "Url", DbType.String, url);

        IDataReader dr = db.ExecuteReader(dbCommand); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T07:23:25.300

您也可以使用带参数的[sp_executesql](http://msdn.microsoft.com/en-us/library/ms188001.aspx)系统存储过程

```
DECLARE @sql as varchar(1000)
--If the primary key is zero then insert new record
IF (@FlightInfoID = 0)
BEGIN
  DECLARE @sql3 as varchar(1000)
  SET @sql = 'INSERT INTO ' + @AirportFrom + 
    '(AirportFrom, AirportTo, TimeDeparture, TimeArrival, Price, DateAdded, Carrier, Url)
     VALUES @AirportFrom, @AirportTo, @TimeDeparture, @TimeArrival, @Price, @DateAdded, @Carrier, @Url)'
END
EXEC sp_executesql @sql, N'@AirportFrom varchar(5), 
                           @AirportTo varchar(5), 
                           @TimeDeparture datetime,
                           @TimeArrival datetime, 
                           @Price float, 
                           @DateAdded datetime, 
                           @Carrier varchar(30), 
                           @Url varchar(300)', @AirportFrom,
                                               @AirportTo,
                                               @TimeDeparture,
                                               @TimeArrival,
                                               @Price,
                                               @DateAdded,
                                               @Carrier,
                                               @Url 
```

# javascript - 用户调整窗口大小后获取浏览器宽度和高度

> ID：15840347
> 
> 赞同：21
> 
> 时间：2013-04-05T17:53:20.613
> 
> 标签：javascript, jquery

用户调整窗口大小后，有什么方法可以获取浏览器的宽度和高度。例如，如果窗口是 1920 x 1080 并且用户将窗口更改为 500 x 500，有没有办法在 JavaScript 或 jquery 中获取这两个新值？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-05T18:04:24.063

纯 Javascript 答案：

```
var onresize = function() {
   //your code here
   //this is just an example
   width = document.body.clientWidth;
   height = document.body.clientHeight;
}
window.addEventListener("resize", onresize); 
```

这在 chrome 上运行良好。但是，它仅适用于 chrome。一个稍微跨浏览器的示例是使用事件目标属性“outerWidth”和“outerHeight”，因为在这种情况下，事件“目标”就是窗口本身。代码是这样的

```
var onresize = function(e) {
   //note i need to pass the event as an argument to the function
   width = e.target.outerWidth;
   height = e.target.outerHeight;
}
window.addEventListener("resize", onresize); 
```

这在 Firefox 和 chrome 中运行良好

希望能帮助到你 ：）

编辑：在 ie9 中测试，这也有效:)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-03-07T13:41:49.590

如果你需要知道这些值来进行布局调整，我敢打赌你打算听这些值。我建议`Window.matchmedia()`为此目的使用 API。

它的[性能要好得多](https://jsperf.com/matchmedia-vs-resize/3)，基本上相当于 JS 的 CSS 媒体查询。

非常快速的使用示例：

```
if (window.matchMedia("(max-width: 500px)").matches) {
  /* the viewport is less than or exactly 500 pixels wide */
} else {
  /* the viewport is more than 500 pixels wide */
} 
```

您还可以设置一个侦听器，每次`matches`属性状态更改时都会调用该侦听器。

[有关使用侦听器的](https://developer.mozilla.org/en-US/docs/Web/CSS/Media_Queries/Testing_media_queries)[描述](https://developer.mozilla.org/cs/docs/Web/API/Window/matchMedia)和示例，请参阅 MDN 。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-05T17:54:31.973

通过监听`resize`事件是可能的。

```
$(window).resize(function() {
  var width = $(window).width();
  var height = $(window).height();
}) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-05T17:56:46.890

您可以使用 JQuery resize() 函数。还要确保添加相同的调整大小逻辑来重新加载事件。如果用户在大小窗口中重新加载，您的逻辑将不起作用。

```
 $(window).resize(function() {
                        $windowWidth = $(window).width();
                            $windowHeight = $(window).height();
                        });

 $(document).ready(function() {
      //same logic that you use in the resize...
  }); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-04-05T18:18:11.050

实际上，我使用它，它对我有很大帮助：

```
 var TO = false;
    var resizeEvent = 'onorientationchange' in window ? 'orientationchange' : 'resize';
    $(window).bind(resizeEvent, function() {
        TO && clearTimeout(TO);
        TO = setTimeout(resizeBody, 200);
    });
    function resizeBody(){
        var height = window.innerHeight || $(window).height();
        var width = window.innerWidth || $(window).width();
        alert(height);
        alert(width);
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-05T17:54:32.240

使用 jQuery resize 方法来监听窗口大小的变化。在回调内部，您可以获得高度和宽度。

```
$(window).resize(function(){
    var width = $(window).width();
    var height = $(window).height();

}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-05T17:54:39.973

您可以使用`resize`事件以及`height()`和`width()`属性

```
$(window).resize(function(){
   var height = $(window).height();
   var width = $(window).width();
}); 
```

[在此处查看更多示例](http://www.mkyong.com/jquery/jquery-resize-example/)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-07-31T20:55:38.027

调整窗口大小后获取元素实际宽度和高度的最简单方法如下：

```
<div id="myContainer">
    <!--Some Tages ...  -->
</div> 
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>
    $(function () {
        $(window).resize(function () {
            //The below two lines of codes more Important to clear the previous settings to get the current measure of width and height
            $('#myContainer').css('height', 'unset');
            $('#myContainer').css('width', 'unset');

            var element = $('#myContainer');

            var height = element.height();
            var width = element.width();

            //Below two lines will includes padding but not border 
            var innerHeight = element.innerHeight();
            var innerWidth = element.innerWidth();

            //Below two lines will includes padding, border but no margin 
            var outerHeight = element.outerHeight();
            var outerWidth = element.outerWidth();

            //Below two lines will includes padding, border and margin 
            var outerHeight = element.outerHeight(true);
            var outerWidth = element.outerWidth(true);
        });
    });
</script> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-02-13T17:39:31.317

您可以使用`event`对象来获取**高度**和**宽度**，我使用解构赋值和`target`指向`window`：

```
const handleGetDim = ({ target }) => ({
  width: target.innerWidth,
  height: target.innerHeight,
});

window.addEventListener('resize', handleGetDim); 
```

# security - Grails Spring Security 为方法分配角色

> ID：15840355
> 
> 赞同：1
> 
> 时间：2013-04-05T17:53:48.187
> 
> 标签：security, grails, functional-testing

我想要一个测试，通过控制器中可用的所有方法并检索与这些方法关联的角色。我知道它应该是一个功能测试（而不是单元测试），但我仍然不知道如何请求与方法关联的角色列表。假设我有这个控制器：

```
@Secured("hasAnyRole('ROLE_1')"
class MyController {
    def methodA() {}

    @Secured("hasAnyRole('ROLE_2')"
    def methodB() {}
 } 
```

在我的测试中，我想要这样的东西：

```
assertEquals(['ROLE_1'],getRoles(MyController.class, "methodA"))
assertEquals(['ROLE_1', 'ROLE_2'],getRoles(MyController.class, "methodB")) 
```

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:50:49.223

您可以使用[反射 API](http://docs.oracle.com/javase/tutorial/reflect/)做到这一点。就像是：

```
Method m = MyController.class.getMethod("methodB");
Annotation[] annos = m.getAnnotations(); 
```

~~但我不认为这对您的方法是一个很好的验证，因为它只能确保您正确编写角色名称。我认为最好尝试调用操作并检查进程是否重定向到拒绝。~~

 ~~```
@TestFor(MyController)
class MyControllerTests {
  @Test
  void shouldRedirectToDenied() {
    SpringSecurityUtils.doWithAuth('username') {
      controller.methodB()
      assert controller.response.redirectedUrl == '/login/denied'
    }
  }
} 
```~~ 

~~闭包将模拟用户名的`doWithAuth`身份验证，因此说：“执行此代码，就好像用户名成功登录一样”。~~

看来您确实需要使用功能测试。见伯特的评论。我仍然认为创建测试只是为了验证方法是否具有注释不是有效的努力。

# android - 运行猴子时getDrawingCache返回null

> ID：15840356
> 
> 赞同：0
> 
> 时间：2013-04-05T17:53:54.807
> 
> 标签：android, android-monkey

我有以下代码来获取屏幕截图

```
 View screen = getWindow().getDecorView();
    screen.setDrawingCacheEnabled(true);
    screen.setDrawingCacheQuality(View.DRAWING_CACHE_QUALITY_HIGH);
    screen.buildDrawingCache();

    Bitmap bitmap = screen.getDrawingCache(); 
```

代码`onOptionsItemSelected`在 UI 线程中。

当我手动测试它时它运行良好。但是，当我用猴子运行应用程序时，`bitmap`我`null`不确定它在猴子模式下是否总是为空，或者只是偶尔因为猴子的随机性。

有什么想法可以解释为什么猴子的行为会有所不同？我不想在以后的代码中盲目地添加一个空指针检查器。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-28T10:36:58.667

您应该使用 buildDrawingCache(true)，因为 buildDrawingCache() 与 buildDrawingCache(false) 相同。确保在使用 getDrawingCache() 之前将位图复制到另一个，如下所示。

```
Bitmap bt=Bitmap.createBitmap(screen.getDrawingCache()); 
```

因为如果您调用 setDrawingCacheEnabled(false)，它会在 recycle() 之前复制我们的位图。

# mysql - 查询 MySQL 数据库以从另一个表中获取值

> ID：15840364
> 
> 赞同：0
> 
> 时间：2013-04-05T17:54:22.983
> 
> 标签：mysql, sql, database, database-design, metadata

我有两个 MySQL 数据库表：

房车

```
-----------------------
| id  | status | name |
-----------------------
|  1  | active | mh 1 |
|  2  | active | mh 2 |
----------------------- 
```

motorhome_meta

```
----------------------------------------------
| id  | motorhome_id | meta_key | meta_value |
----------------------------------------------
|  1  | 1            | size     | large      |
|  2  | 1            | fuel     | petrol     |
|  3  | 2            | size     | small      |
|  4  | 2            | fuel     | petrol     |
---------------------------------------------- 
```

我需要的是一个查询，它允许我从`motorhome`表中选择一行，其中包含表中的值`motorhome_meta`。或者换句话说，如果我选择 `motorhome`表中 id 为 1 的行。

```
----------------------------------------
| id  | status | name | size  | fuel   |
----------------------------------------
|  1  | active | mh 1 | large | petrol |
---------------------------------------- 
```

在某些情况下，我可能需要对任一表使用 where 语句，例如`WHERE motorhome.status='active'`或`WHERE motorhome_meta.meta_key='size'`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T17:56:44.373

您可以使用带有 a 的聚合函数`CASE`从数据行中创建列：

```
select m.id,
  m.status,
  m.name,
  max(case when h.meta_key= 'size' then h.meta_value end) size,
  max(case when h.meta_key= 'fuel' then h.meta_value end) fuel
from motorhome m
inner join motorhome_meta h
  on m.id = h.motorhome_id
-- where m.id = 1
group by   m.id, m.status, m.name 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/31dc84/1)。这给出了结果：

```
| ID | STATUS | NAME |  SIZE |   FUEL |
---------------------------------------
|  1 | active | mh 1 | large | petrol |
|  2 | active | mh 2 | small | petrol | 
```

* * *

如果对组合有`UNIQUE`限制，您也可以使用此变体：`(motorhome_id, meta_key)`

```
select m.id,
  m.status,
  m.name,
  h1.meta_value  size,
  h2.meta_value  fuel
from motorhome m
left join motorhome_meta h1           -- or:  inner join
  on  m.id = h1.motorhome_id          -- depending on your need (or not)
  and h1.meta_key = 'size'            -- to show motorhomes
left join motorhome_meta h2           -- that have  only 'fuel'
  on  m.id = h2.motorhome_id          -- or only 'size'
  and h2.meta_key = 'fuel' ; 
```

请参阅：[SQL-Fiddle-2](http://www.sqlfiddle.com/#!2/31dc84/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T18:04:26.567

问题更多的是一个`Relational Division`。

```
SELECT  a.id,
        a.status,
        a.name,
        MAX(CASE WHEN b.meta_key= 'size' THEN b.meta_value END) size,
        MAX(CASE WHEN b.meta_key= 'fuel' THEN b.meta_value END) fuel
FROM    motorhome a
        INNER JOIN motorhome_meta b
            ON a.ID = b.motorhome_ID
WHERE   a.status = 'active' AND
        (
            (b.meta_key = 'size' AND b.meta_value = 'large') OR
            (b.meta_key = 'fuel' AND b.meta_value = 'petrol') 
        )
GROUP   BY a.id, a.status, a.name
HAVING  COUNT(*) = 2 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/f2e71/1)
*   [关系划分的SQL](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)

输出

```
╔════╦════════╦══════╦═══════╦════════╗
║ ID ║ STATUS ║ NAME ║ SIZE  ║  FUEL  ║
╠════╬════════╬══════╬═══════╬════════╣
║  1 ║ active ║ mh 1 ║ large ║ petrol ║
╚════╩════════╩══════╩═══════╩════════╝ 
```

# java - 第一次使用maven后出现Java.lang.NoClassDefFoundError？

> ID：15840367
> 
> 赞同：9
> 
> 时间：2013-04-05T17:54:25.103
> 
> 标签：java, maven, soap

我一直在为我的公司创建一个带有 java 的肥皂服务器，而我最近才切换到使用 Bone-CP 和 Maven 来导入所有必需的第 3 方程序。完成 bone-CP 实施后，我使用了 server 命令

```
jar -cvfm SoapServer.jar manifest.txt SoapServer 
```

当我将它转移到我的服务器并尝试运行它时，我收到了这个错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: SoapServer/SoapServer (wrong name: com/test/SoapServer/SoapServer)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)
    at java.net.URLClassLoader.access$100(URLClassLoader.java:71)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:482) 
```

我能想到的唯一导致问题的想法是 maven 没有将所需的 JAR 打包到程序中？如果是这种情况，我是否只需要下载它们并将它们添加到类路径中？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-05T17:59:58.040

如果您需要将所有依赖项打包到可执行 jar 中，请像这样配置您的 pom

```
<build>
    <plugins>
      <plugin>
         <artifactId>maven-jar-plugin</artifactId>
         <configuration>
           <archive>
             <manifest>
               <addClasspath>true</addClasspath>
               <classpathPrefix>lib/</classpathPrefix>
               <mainClass>com.something.YourMainClass</mainClass>
             </manifest>
           </archive>
         </configuration>
      </plugin>
    </plugins>
  </build> 
```

上面的块会将 lib/ 中的所有库添加到清单类路径条目中的类路径中

并将所有依赖项复制到 lib 目录

```
<plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-dependency-plugin</artifactId>
        <version>2.1</version>
        <executions>
          <execution>
            <id>copy-dependencies</id>
            <phase>package</phase>
            <goals>
              <goal>copy-dependencies</goal>
            </goals>
            <configuration>
              <outputDirectory>${project.build.directory}/lib</outputDirectory>
              <overWriteReleases>false</overWriteReleases>
              <overWriteSnapshots>false</overWriteSnapshots>
              <overWriteIfNewer>true</overWriteIfNewer>
            </configuration>
          </execution>
        </executions>
      </plugin> 
```

# javascript - 在更改不同属性时应用 CSS3 过渡

> ID：15840372
> 
> 赞同：0
> 
> 时间：2013-04-05T17:54:34.363
> 
> 标签：javascript, css, css-transitions

我知道使用 CSS3 过渡，您可以告诉它在属性发生更改时缓慢地将更改应用于属性。我想知道是否有办法做同样的事情，但是当改变不同的属性时。

例如，关于悬停的经典教程示例：

```
-- CSS --
#div1 { opacity: 0.2; transition: opacity 1s; }
#div1:hover { opacity: 1; }

-- HTML --
<div id="div1" style="width:200px;height:200px;background-color:#000;"></div> 
```

我希望做的是像这样应用不透明度转换，但是当不同的属性发生变化时。具体来说，我无法控制的单独库正在以正常方式显示/隐藏元素，使用 javascript 设置`display`属性。我想做的是以某种方式连接到该更改，以强制它使用 淡入和淡出`opacity`，而无需使用正在调用的 javascript。

我可以做一些 CSS3 魔术来实现这一点吗？

（如果您想知道，它使用 ASP.NET AJAX 及其所有时髦的工具包和扩展程序，所以我无法真正深入研究他们的脚本 - 如果它是常规的 jQuery 或另一个简单的 javascript 库进行调用，它会是更容易使用）。

# wpf - WPF DataGrid 在行删除/剪切后失去焦点

> ID：15840375
> 
> 赞同：0
> 
> 时间：2013-04-05T17:54:44.053
> 
> 标签：wpf, wpfdatagrid

我`DataGrid`在 MVVM/Prism 应用程序中实现了一个。通过`DataGrid`上下文菜单和键盘手势支持剪切/复制/粘贴/删除。

我发现当一行被删除/剪切时，整个`DataGrid`失去焦点并且键盘焦点移动到最后一个焦点控件。

有没有办法防止这种情况发生？

删除一行后，我可能想重新粘贴到`DataGrid`. 此外，如果网格为空，则根本无法获得键盘焦点。单击空网格不会使其获得焦点。

这是一个类似的问题，但它并没有解决我的问题： [DataGrid Looses Focus When Delete Key is Pressed](https://stackoverflow.com/questions/8991188/datagrid-looses-focus-when-delete-key-is-pressed)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:23:47.197

您可以在 PreviewKeyDown-Event 中设置 DataGrids 焦点

```
private void TheDataGrid_PreviewKeyDown(object sender, KeyEventArgs e)
{
    if (e.Key == Key.Delete)
    {
       var grid = (DataGrid)sender;
       FocusManager.SetFocusedElement(Window.GetWindow(grid), grid); //not tested
    }
} 
```

如果您不想将代码放在代码隐藏中，请将[AttachedProperties](http://www.wpftutorial.net/AttachedProperties.html)与[DependencyPropertyChanged-Event](http://blogs.msdn.com/b/llobo/archive/2007/03/05/listening-to-dependencyproperty-changes.aspx)结合使用。
[如何设置焦点](http://msdn.microsoft.com/en-us/library/system.windows.input.focusmanager.setfocusedelement%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T17:59:45.167

一个肮脏的解决方案可能是处理由控件`LostFocus`公开的事件`DataGrid`并将焦点放在控件上。

可以说它略微侵犯了 MVVM 模式，即保持视图愚蠢，但它仍然是视图代码。

# jquery - 使用 .val() 的 MVC/JQuery 输入集值

> ID：15840384
> 
> 赞同：2
> 
> 时间：2013-04-05T17:55:04.797
> 
> 标签：jquery, ajax, asp.net-mvc, get

我有一个输入元素，我最初将值设置为空：

```
<input id="fooValue" type="hidden" data-url="@Url.Action(MVC.fooController.fooValue())" value="" /> 
```

然后我有一个 AJAX 调用，我在其中检索一个值并尝试将其传递到输入中并将以前的空白值设置为这个新值：

```
$.ajax({
    type: 'GET',
    url: $('#fooValue').data('url'),
    success: function (data) {
        $('#fooValue').val(data);
    }
}); 
```

当我在 Firebug 控制台中执行此 AJAX 请求时，我得到了 4 的值，但是当我从输入中获取值时，它没有返回任何内容。谁能帮助我并告诉我为什么 AJAX 请求没有设置该值？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:22:09.053

以下[帖子](http://www.codem0nk3y.com/2011/03/jquery-val-setter-not-working/)可能会有所帮助。尽管他的示例涉及一个 HIDDEN 字段，但我认为您可以通过`value=""`从您的 HTML 中删除来解决您的问题，如博客文章中所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:55:05.097

Ajax 是一个异步请求。您可以尝试使用`async: false`ajax 函数吗？

```
$.ajax({
  type: 'GET',
  url: $('#fooValue').data('url'),
  async: false,
  success: function (data) {
    $('#fooValue').val(data);
  }
}); 
```

# javascript - 在 DropDownList/SELECT 项目上激活的 Jquery 已更改

> ID：15840385
> 
> 赞同：0
> 
> 时间：2013-04-05T17:55:09.957
> 
> 标签：javascript, jquery, html

我有一些 JQuery 代码可以过滤掉页面上的链接列表。目前，当单击带有盲 href 的链接时会触发过滤。链接的 id 用于确定哪些内容在页面上仍然可见。例如：

```
<script type="text/javascript">
$(document).ready(function () {

    //when a link in the filters div is clicked...
    $('#filters a').click(function (e) {

        //prevent the default behaviour of the link
        e.preventDefault();

        //get the id of the clicked link(which is equal to classes of our content
        var filter = $(this).attr('id');

        //show all the list items(this is needed to get the hidden ones shown)
        $('#content ul li').show();

        /*using the :not attribute and the filter class in it we are selecting
        only the list items that don't have that class and hide them '*/
        $('#content ul li:not(.' + filter + ')').hide();

    });

}); 
```

我需要对此进行更改，以便在 DropDownList/SELECT 中更改选项时激活 JQuery。但是，我无法完全理解如何更改此 JScript 以检测 DDL 中的选择而不是超链接。

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T18:02:55.760

使用 change() 事件

```
$("#idOfDropDown").change(function() {
    //code here
    var filter = this.value //gets the value of the selected dropdown item.
}); 
```

每次进行下拉选择时都会触发。

# html - 将文本添加到 html 表单

> ID：15840386
> 
> 赞同：0
> 
> 时间：2013-04-05T17:55:10.350
> 
> 标签：html, forms

我正在尝试自己添加文本来描述一些步骤，而表单中没有任何输入框。是否有可能做到这一点？应该只是文本的行是：

```
<p>For a new location please add an entry</p> 
```

`<p>`我在没有标签的情况下尝试了它，但再次没有成功。抱歉，如果这看起来很简单，但我在 w3schools、这个网站或只是谷歌搜索上什么也没看到。

```
<form action="insert.php" method="post">
Name <input name="name" type="text">
<br>
Email address of user <input name="email" type="text">
<br>
Phone Number <input name="phone" type="text">
<br>
Town <input name="town" type="text">
<br>
County <select name="county">
<option>    Outside Ireland </option>
<option>    Antrim  </option>
<option>    Armagh  </option>
<br>
<p>For a new location please add an entry</p>
<br>
Name of New Location <input name="newlocation" type="text">
<br>
Name of Location <input name="location" type="text">
<br>
Link in Google Maps <input name="gmapslink" type="text">
<br>
<input type="submit">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:16:05.193

您可以使用该`placeholder`属性来完成此操作

```
<input
  type="text"
  name="ds_email"
  placeholder="Please, enter your e-mail here"
/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T18:04:43.187

你的意思是，在框中有一个预设的文本输入？我相信那将是 value="desired value:

前任。 `input name="town" value="Text Desired" type="text"`

# java - JFreeChart 实现错误

> ID：15840388
> 
> 赞同：3
> 
> 时间：2013-04-05T17:55:18.090
> 
> 标签：java, jfreechart

```
import java.io.*;
import org.jfree.data.category.DefaultCategoryDataset;
import org.jfree.chart.ChartFactory; 
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.chart.JFreeChart; 
import org.jfree.chart.ChartUtilities; 
public class xyLine {  
      public static void main(String[] args){
         try {

                /* Step - 1: Define the data for the line chart  */
                DefaultCategoryDataset line_chart_dataset = new DefaultCategoryDataset();
                line_chart_dataset.addValue(15, "schools", "1970");
                line_chart_dataset.addValue(30, "schools", "1980");
                line_chart_dataset.addValue(60, "schools", "1990");
                line_chart_dataset.addValue(120, "schools", "2000");
                line_chart_dataset.addValue(240, "schools", "2010");                

                /* Step -2:Define the JFreeChart object to create line chart */
                JFreeChart lineChartObject=ChartFactory.createLineChart("Schools Vs Years","Year","Schools Count",line_chart_dataset,PlotOrientation.VERTICAL,true,true,false);                

                /* Step -3 : Write line chart to a file */               
                 int width=640; /* Width of the image */
                 int height=480; /* Height of the image */                
                 File lineChart=new File("line_Chart_example.png");              
                 ChartUtilities.saveChartAsPNG(lineChart,lineChartObject,width,height); 
         }
         catch (Exception i)
         {
             System.out.println(i);
         }
     }
 } 
```

我正在创建一个带有点的折线图。导致问题的行如下... JFreeChart lineChartObject=ChartFactory.createLineChart("Schools Vs Years","Year","Schools Count",line_chart_dataset,PlotOrientation.VERTICAL,true,true,false);

错误是：无法解析类型 org.jfree.util.PublicCloneable。它是从所需的 .class 文件中间接引用的

我已经尝试添加 jar 文件（jfreechart-1.0.14.jar），但它仍然无法正常工作。任何有任何帮助的人将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T17:58:13.317

你也需要`jcommon-1.0.14.jar`。有关更多信息，请参阅[*下载 JFreeChart*](http://www.jfree.org/jfreechart/download.html)。

# moovweb - 如何将实时桌面网站转变为移动网站？

> ID：15840391
> 
> 赞同：1
> 
> 时间：2013-04-05T17:55:23.437
> 
> 标签：moovweb

我想采用一个不是我自己的[slashdot.org](http://slashdot.org)的标准桌面网站，并将其转换为一个适合移动设备的网站。如何使用 Moovweb 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T19:10:38.063

[Moovweb 站点](http://console.moovweb.com)上有很多文档-[构建移动站点教程](https://console.moovweb.com/learn/training/building_a_site/index)可能对您的要求最有用。

如果您需要从头开始（例如 - 您甚至还没有下载它），[还有一个入门指南](https://console.moovweb.com/learn/training/getting_started/index)。

# html - 如何在 CSS 中的段落下方放置一个 div？

> ID：15840393
> 
> 赞同：-1
> 
> 时间：2013-04-05T17:55:29.973
> 
> 标签：html, css

我有这样的页面布局：

```
<p>some text</p>
<div>a block button</div> 
```

风格`<p>`：

```
p {
    font-size: 0.9em;
    font-weight: normal;
    color: #666;
    float: left;
    margin: 0px;
    line-height: 0.6em;
} 
```

风格`<div>`：

```
.view {
    width: 75px;
    height: 20px;
    float: left;
    text-align: center;
    vertical-align: middle;
    margin: 0 3px 3px 0;
    line-height: 1.4em;
} 
```

我不能改变它（它是在别处生成和共享的），我只能改变风格。

目前`<div>`被渲染到 的右侧`<p>`。我需要`<div>`坐在它下面。如何仅在 CSS 中实现这一点（没有 jQuery）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:57:58.737

尝试以下

```
<p>some text</p>
<div style="clear:both">a block button</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T17:59:45.403

```
p
{
clear:both;
margin:0px;
padding:0px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T17:57:55.963

```
p,
div
{
    display:block;
} 
```

这就是元素的默认值，可能会覆盖您的 CSS

# javascript - 将复杂的输入名称转换为数组

> ID：15840394
> 
> 赞同：2
> 
> 时间：2013-04-05T17:55:33.160
> 
> 标签：javascript, jquery

我有一些复杂的输入名称，例如：`this[is][][a][complex][name]`我需要将其转换为数组/对象。喜欢：

```
{ "this": { "is": [ { "a": { "complex": { "name": true } } } ] } } 
```

我怎样才能用纯 javascript 或 jquery 做到这一点？

**原因**

我需要使用 jQuery.ajax() 方法发送它，例如：

```
jQuery.ajax({
    "data": {
        "complex": complex_names,
        "time": Date.now()
     }, ...
}); 
```

如果我只是像 序列化数据`this[is][][a][complex][name]=true`，它会破坏 HTTP 请求，并像发送它`data[this[is][][a][complex][name]]`而不是`data[this][is][][a][complex][name]`.

**例子**

我做了这个例子来帮助你。好吧，假设我有这个：

```
<input type="text" name="test1" value="ok" />
<input type="text" name="test2" value="ok" />
<input type="text" name="test3[1]" value="ok" />
<input type="text" name="test4[1][2]" value="ok" />
<input type="text" name="test5[]" value="ok" /> 
```

如果我直接通过 POST 发送，它会生成如下请求：

```
test1: ok
test2: ok
test3[1]: ok
test4[1][2]: ok
test5[]: ok 
```

但我需要通过 jQuery.ajax() 方法在`data`选项中的数组内发送它（就像`complex_data`其他一些数据一样）。该请求将类似于：

```
call_time: 1612
call_title: test
complex_data[test1]: ok
complex_data[test2]: ok
complex_data[test3][1]: ok
complex_data[test4][1][2]: ok
complex_data[test5][]: ok 
```

请注意，我的表单输入将设置在`complex_data`对象内。但是，如果我只是将数据转换为数组，例如：

```
{
  "test1": "ok",
  "test2": "ok",
  "test3[1]": "ok",
  "test4[1][2]": "ok",
  "test5[]": "ok",
} 
```

并将其发送到`complex_data`，它会请求它，而不是：

塔）。该请求将类似于：

```
call_time: 1612
call_title: test
complex_data[test1]: ok
complex_data[test2]: ok
complex_data[test3][1]]: ok
complex_data[test4][1][2]]: ok
complex_data[test5][]]: ok 
```

`test1`像nad这样的简化案例`test2`可以正常工作，但像 nad 这样的复杂案例`test3[1]`将无法理解并且会崩溃。

**解决方法**

目前，我正在使用一种解决方法来创建一个数组，例如：`this][is][][a][complex`并且它被 HTTP 请求包含在`data[...]`什么转向.`data[`**`this][is][][a][complex][name`**`]`

**研究**

它类似于[如何将输入名称转换为 JavaScript 数组](https://stackoverflow.com/questions/15162663/how-to-convert-input-name-to-javscript-array)问题，但它有点复杂，因为深度是 0 到无限（通常到 3 级）。所以，除非我使用 eval (!)，否则我什么都做不了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T18:42:54.133

有趣的问题，这是我想出的：

```
function convert(s) {
    var names = s.replace(/^\w+/, "$&]").replace(/]$/, "").split("][");
    var result = {};
    var obj = result;
    var last;
    for (var i = 0; i < names.length; i++) {
        var name = names[i];
        if (typeof last !== "undefined") {
            obj[last] = name === "" ? [] : {};
            obj = obj[last];
        }
        last = name === "" ? 0 : name;
    }
    obj[last] = true;
    return result;
} 
```

JSFiddle：http: [//jsfiddle.net/QdRvz/](http://jsfiddle.net/QdRvz/)

# java - 为什么在 REPL 中未观察到通配符和存在类型之间的指定等效性

> ID：15840397
> 
> 赞同：2
> 
> 时间：2013-04-05T17:55:43.233
> 
> 标签：java, scala, types, existential-type, type-bounds

根据*Java 编程语言*第 4 版。第 15.7.1 节“类型令牌”：

> **[编译器对getClass](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#getClass%28%29)**进行特殊处理：如果**在静态类型T**的引用上调用**getClass**，则编译器将**getClass**的返回类型视为**Class**。所以这有效：

 ******```
String str = "Hello";
Class<? extends String> c2 = str.getClass(); // compiler magic 
```

[类中方法](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#getClass%28%29)的[javadocs 提供了`getClass``Object`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#getClass%28%29)更多详细信息：

> **实际结果类型 [of `getClass()`]是`Class<? extends |X|>`调用`|X|`getClass 的表达式的静态类型的擦除。**例如，此代码片段中不需要强制转换：
> 
> ```
> Number n = 0; 
> Class<? extends Number> c = n.getClass(); 
> ```

那是 Java 和`getClass()`class 的方法`Object`。将注意力转移到 Scala，SLS 3.2.10 读取，

> # 存在类型的占位符语法
> 
> ## 句法：
> 
> ```
> WildcardType ::= ‘_’ TypeBounds 
> ```
> 
> Scala 支持存在类型的占位符语法。*通配符类型*的形式为**_ >: L <: U** ...通配符类型是存在量化类型变量的简写，其中存在量化是隐含的。
> 
> ...令*T = pc[targs, T, targs']*为参数化类型，其中*targs* , *targs'*可能为空，并且*T*是通配符类型**_ >: L <: U**。那么***T*等价于存在类型**
> 
> *pc[targs, t, targs]* **forSome** { **type** *t >: L <: U* }
> 
> 其中*t*是一些新的类型变量。

我在上面强调了“T 等同于存在类型......”，因为我观察到的行为似乎与该陈述不一致。

# 我做了什么

在 Scala repl 中，我尝试了 SLS 3.2.10 的通配符语法：

```
scala> val c: Class[_ >: scala.Nothing <: String] = "foo".getClass
c: Class[_ <: String] = class java.lang.String 
```

这正如我所料。但是，如果我依赖 SLS 3.2.10 中声称的等效性“通配符类型是存在量化类型变量的简写”，我会遇到意外的失败。

```
scala> val c: Class[t forSome { type t >: scala.Nothing <: String }] = "foo".getClass
<console>:7: error: type mismatch;
 found   : java.lang.Class[?0] where type ?0 <: java.lang.String
 required: Class[t forSome { type t <: String }]
Note: ?0 <: t forSome { type t <: String }, but Java-defined class Class is invariant in type T.
You may wish to investigate a wildcard type such as `_ <: t forSome { type t <: String }`. (SLS 3.2.10)
       val c: Class[t forSome { type t >: scala.Nothing <: String }] = "foo".getClass
                                                                         ^ 
```

错误消息似乎将我递归地引导回 SLS 3.2.10，建议我同时使用通配符语法和表达存在量化。我不明白那是什么意思。无论如何，我使用`Object`上面引用的 javadocs 中的示例观察到相同的二分法：

```
scala> val n: Number = 0
n: java.lang.Number = 0 
```

作品：

```
scala> val c: Class[_ >: scala.Nothing <: Number] = n.getClass
c: Class[_ <: java.lang.Number] = class java.lang.Integer 
```

不工作：

```
scala> val c: Class[t forSome { type t >: scala.Nothing <: Number }] = n.getClass
<console>:8: error: type mismatch;
 found   : java.lang.Class[?0] where type ?0 <: java.lang.Number
 required: Class[t forSome { type t <: java.lang.Number }]
Note: ?0 <: t forSome { type t <: java.lang.Number }, but Java-defined class Class is invariant in type T.
You may wish to investigate a wildcard type such as `_ <: t forSome { type t <: java.lang.Number }`. (SLS 3.2.10)
       val c: Class[t forSome { type t >: scala.Nothing <: Number }] = n.getClass 
```

# 问题

## 主要是

如果特定的通配符类型与特定的存在类型“等效”，这是否意味着可以用一个替换另一个？这不就是等价的意思吗？假设我正确理解了 SLS 3.2.10 中使用的“等价”的含义，我尝试根据 SLS 3.2.10 中规定的规则进行等效替换是否有错误？repl 如何处理我上面引用的包含与 SLS 3.2.10 一致的存在类型的两个语句的失败，根据这些语句，失败的语句等同于使用成功的通配符类型的语句？

## 此外

*相关错误消息的required*行和*found*行中指定的类型有什么区别？即，这是怎么回事：

```
java.lang.Class[?0] where type ?0 <: java.lang.String 
```

不同于

```
Class[t forSome { type t <: String }] 
```

第一个问号是什么？显然`?0`意味着什么，它似乎是一个类型变量，但使用这样的问号不是Scala，是吗？那是什么语言，在哪里指定，以便我可以理解该错误消息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T18:46:31.223

再次查看您引用的规范部分：

> 令 T = pc[targs, T, targs'] 为参数化类型，其中 targs, targs' 可能为空，而 T 为通配符类型 _ >: L <: U 。那么 T 等价于存在类型 pc[targs, t , targs ] forSome { type t >: L <: U } 其中 t 是一些新的类型变量。

特别要注意它说`p.c[targs, t , targs ] forSome { type t >: L <: U }`而**不是** `p.c[targs, t forSome { type t >: L <: U } , targs ]`。这两种类型是不同的。

回到`Class`它的上下文意味着`Class[_ >: scala.Nothing <: String]`相当于`Class[t] forSome { type t >: scala.Nothing <: String}`，而**不是** `Class[t forSome { type t >: scala.Nothing <: String }]`。

果然，如果你在 REPL 中输入以下内容，它可以很好地编译：

```
val c: Class[t] forSome { type t >: scala.Nothing <: String } = "foo".getClass 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T18:27:50.467

我不了解 Scala，但我会根据我对 Java 通配符的理解进行猜测。

如果表达式的类型包含通配符，java 会对其进行“通配符捕获”

```
expr: "foo".getClass()
type: Class<? extends String>

after wildcard capture
type: Class<X>, for some X that X<:String 
```

这两种类型并不完全相同，第二种类型更具体（这是首先进行通配符捕获的原因，以便我们获得更多关于表达式的类型信息）

“通配符捕获”被广泛应用于任何表达式。因此几乎在所有情况下，包含通配符的类型都可以说与捕获转换后的类型等价。例如表达式的类型`"foo".getClass()`是`Class<? extends String>`，但我们可以等效地认为它的类型为`Class<X>, for some X that X<:String`

但这两种类型并不总是可以互换的。在 Java 中，第二种类型是不可表示的；假设是，这意味着我们可以声明这样的类型

```
Class<Y>(for some Y<:String) var = "foo".getClass(); 
```

该行不应该编译，因为右侧，在捕获转换后，得到一个不同的、不相关的类型变量，比如 X。所以该行尝试分配`Class<X> to Class<Y>`.

这有效

```
Class<? extends String> var = "foo".getClass(); 
```

因为`Class<X>(where X<:String)`是 的子类型`Class<? extends String>`。事实上，

```
for any X<:String,  Class<X>  <:  Class<? extends String> 
```

可以认为是通配类型的定义，本质上是一个联合。

```
o instanceof Class<? extends String> 
iff 
there exists X<:String and o instanceof Class<X> 
```

（Java 类型系统不考虑，`String`是最终的，所以所有这些类型几乎相同，因为它们都包含相同的元素，String.class）

当我们谈论表达式类型时，我们可以说这两种类型是等价的；当我们谈论变量类型时，它们是不等价的。******

# symfony - Symfony 2.1 错误：在存储库中导入 @ORM\Table

> ID：15840400
> 
> 赞同：3
> 
> 时间：2013-04-05T17:55:49.587
> 
> 标签：symfony, doctrine-orm, symfony-2.1

我正在将应用程序从 Symfony 2.0 升级到 Symfony 2.1，我遵循[了这个](https://github.com/symfony/symfony-standard/blob/master/UPGRADE.md)升级文件并且一切正常，除了`cache:clear`在使用某些存储库时出现错误之后。这是错误：

```
[Semantical Error] The annotation "@ORM\Table" in class 
edasiclinic\AlertesBundle\Repository\AlertesRepository was never imported. Did you maybe
forget to add a "use" statement for this annotation? 
```

这是一个示例，我在其他存储库中遇到此错误。`@ORM\Table`如果我不在那里使用注释，我不明白为什么我必须在存储库文件中导入。

另外，如果我等待约 10 秒，然后刷新浏览器，它就可以工作......

**编辑**

这是实体：

```
<?php

namespace edasiclinic\DatabaseBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * edasiclinic\DatabaseBundle\Entity\Alertes
 *
 * @ORM\Table(name="alertes")
 * @ORM\Entity(repositoryClass="edasiclinic\AlertesBundle\Repository\AlertesRepository")
 * @ORM\HasLifecycleCallbacks()
 */
class Alertes
{
    /**
     * @var integer $id
     *
     * @ORM\Id
     * @ORM\Column(name="idAlerta", type="integer")
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id;

    ...
} 
```

这是存储库类：

```
<?php

namespace edasiclinic\AlertesBundle\Repository;

use Doctrine\ORM\EntityRepository;
use edasiclinic\DasiBundle\Funcions\AES;

class AlertesRepository extends EntityRepository
{

    public function countUnread($user, $idioma, $fus)
    {
        // ...
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-21T17:47:41.253

我今天遇到了同样的问题。经过一番谷歌搜索后，解决方案显然是在 Repository 类定义之前包含一个注释块。

在你的情况下：

```
/**
 * 警报存储库
 */
类 AlertesRepository 扩展了 EntityRepository
{
  ...
}
```

如果没有该注释块，您将收到有关“@ORM\Table”的无意义错误。又一个 Symfony/Doctrine 怪事>_>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-10T02:16:59.480

看起来你忘记添加`use`语句了。

```
<?php

namespace Acme\MyBundle\Entity;

// Remember to include this use statement
use Doctrine\ORM\Mapping as ORM;

/**
 * My Entity
 *
 * @ORM\Table()
 * @ORM\Entity(repositoryClass="Acme\MyBundle\Entity\MyEntityRepository")
 */
class MyEntity
{
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-26T18:56:52.130

这是 5.3.8 之前版本中的一个 PHP 错误。从[symfony 系统要求](https://github.com/symfony/symfony-standard/blob/master/app/SymfonyRequirements.php#L546-L548)：

```
$this->addRecommendation(
    version_compare($installedPhpVersion, '5.3.8', '>='),
    'When using annotations you should have at least PHP 5.3.8 due to PHP bug #55156',
    'Install PHP 5.3.8 or newer if your project uses annotations.'
); 
```

如果您无法升级到 PHP 版本 >= 5.3.8，请参阅[PHP 错误 #55156了解更多详细信息和可能的解决方法。](https://bugs.php.net/bug.php?id=55156)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-23T06:57:17.867

对我来说，它只适用于某些版本的 PHP，解决方案是将 Repository 类放在实体类文件夹上方的文件夹中

# linq - 选择性Linq子包括两层深

> ID：15840402
> 
> 赞同：2
> 
> 时间：2013-04-05T17:55:51.550
> 
> 标签：linq, entity-framework, include

我正在将一些 sql 存储过程逻辑（它将返回数据集中的多个表）移植到使用 linq 查询的实体框架强类型对象。

基本上我需要表 A、B 和 C 中的数据，其中 C 对 B 有一个外键，而 B 对 A 有一个外键。但我不希望每个 C 都对 B 有 FK，只希望 C 有一定的约束 X。

所以基本上，存储过程基本上说

```
TableA = select from A where A.AID = AIDPassedIn
TableB = select from B where B.AID = AIDPassedIn
TableC = select from TableB where TableB.XID = XIDPassedIn 
return new DataSet(TableA, TableB, TableC);
//yes this is gross and confusing, thus our current efforts 
```

实体框架*几乎*让这变得超级简单，就像这样

```
A.Include("B.C").Where(a => a.AID == AIDPassedIn) 
```

我唯一的问题是这不包括 C 表上的约束 X。我读过很多文章，但我读过的所有内容都表明我可以添加到 where 子句中，这将过滤我最终得到的 A 对象。我应该只得到一个 A 对象，不管它的孩子的属性如何。我想要的是带有 AIDPassedIn 的 A，以及它的所有子 B，以及与约束 X 匹配的所有 B 的子 C。

我觉得这是我有史以来最糟糕的措辞问题之一，但我有点困惑。任何帮助都会非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:47:03.360

您可以按照以下方式尝试：

```
var AList = context.As.Where(a => a.AID == AIDPassedIn)
    .Select(a => new
    {
        A = a,
        Bs = a.Bs,
        Cs = a.Bs.Select(b => b.Cs.Where(c => c.XID == XIDPassedIn))
    })
    .AsEnumerable()
    .Select(x => x.A)
    .ToList(); // or SingleOrDefault if AIDPassedIn is the PK 
```

`Include`只要您不禁用更改跟踪，实体框架就会自动（即使不使用）将对象图放在一起。

# jquery - 使用 JQuery 和 SenchaTouch 获取单个元素

> ID：15840405
> 
> 赞同：1
> 
> 时间：2013-04-05T17:55:56.093
> 
> 标签：jquery, extjs, sencha-touch-2

我正在写一篇关于 SenchaTouch 的文章，并想将基本的 Ext.Get 与 JQuery 中的等价物进行比较。我有点困惑，想确保我做对了。

在 SenchaTouch 中，为了设置 innerHtml，我使用 Ext.get 并将我想要的元素传递给它。在 JQuery 中，我传递了一个 CSS 选择器？（我认为这就是 # 所做的）。我说得对吗？在 JQuery 中，有没有办法做同样的“GetElementById”类型的事情？

另外，我对为什么 JQuery 不返回数组有点困惑？那是因为在 DOM 中只能有一个标记为相同 ID 的项目吗？

我知道，有点新手问题，但我真的想确保我正确理解这一点。

```
 Ext.application({
        name: 'MyApp',
        launch: function () {
            Ext.get('div1').setHtml('Ext Set this');
        }

    });

    $(document).ready(function () {
        $('#div2').html('JQuery Set this');
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:26:21.377

`document.getElementById()`返回一个 DOM 元素，它是原生 JavaScript，并且会比`Ext.get()`or快得多`$(#id)`

`$('#id')`这是一种 jQuery 选择器，它不会返回一个数组，它会返回一个 jQuery[对象](http://api.jquery.com/Types/#jQuery)，它允许您调用任何应该影响找到的元素的 jQuery 方法。即使 jQuery 对象不包含任何元素，它也永远不会返回 null，它将被视为空对象并且什么也不做。

`document.getElementById()`所以基本上，Ext.get() 与javascript 或 jQuery 中的并不完全相同，`$('#id')`因为它允许的不仅仅是`id`现有的 HTMLElement 或`Ext.Element`.

# maven - build.gradle 文件中应该包含哪些内容以支持标准 groovy 库的导入

> ID：15840408
> 
> 赞同：1
> 
> 时间：2013-04-05T17:56:14.907
> 
> 标签：maven, groovy, import, repository, gradle

我创建了一个 groovy 项目。它自己工作。

在添加了一些内容后，我不得不在导入中添加一个新库的新 jar。

当整个工作区在 Gradle 上运行时，我将适当的 Maven 引用添加到 gradle.build 文件中。

运行`gradle cleanEclipse Eclipse`新库后工作正常。

但。所有对 Groovy 库的项目引用都消失了。愚弄我，我也必须将一些对它们的引用放入 gradle.build 中。

图书馆名单：

```
groovy.util.slurpersupport
groovy.xml
org.codehaus.groovy.tools.xml
groovy.lang 
```

但我不知道如何将它们包含到 gradle.build 中。我在 Maven 存储库中找不到它们。即便如此，我已经将它们安装在我的 Eclipse 中，我应该使用它们。而且我无法谷歌任何帮助，因为 gradle groovy 给出了如何从 groovy 调用 gradle 的结果，反之亦然。

[从普通的 Groovy 迁移到 Gradle](https://stackoverflow.com/questions/11526431/moving-from-plain-groovy-to-gradle)无济于事，它实际上是关于从 groovy 调用 java 库的 gradle 支持。

我不反对从 Maven 代表处获取依赖项，但我不知道在我的情况下如何做 - 问题是，我有 Eclipse 3.6。我应该使用 Eclipse 3.6 的最新版本的 groovy。所以，我从[http://dist.codehaus.org/groovy/distributions/greclipse/snapshot/e3.6/](http://dist.codehaus.org/groovy/distributions/greclipse/snapshot/e3.6/)安装了它。而且我不知道 Maven 中的等效版本是什么 - 没有关于它的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:36:28.210

Eclipse 安装中的 groovy 出现了一些错误。现在运行`gradle cleanEclipse Eclipse`while build.gradle 对 groovy 没有依赖项后，几乎一切运行正常，我只需将 groovy 特性添加到项目中

# java - NFC 示例源代码：不读取 NFC 标签

> ID：15840409
> 
> 赞同：0
> 
> 时间：2013-04-05T17:56:21.657
> 
> 标签：java, android, eclipse, nfc, ndef

我正在使用一个教程源——根本没有改变它——它不会读取 NFC 标签。

当我扫描标签时 - 它什么也不做。

应该读取写为：WIFINETWORKNAME,password 的 NFC 标签

^ - 我认为 - 教程指出“将网络名称和密码（用逗号分隔）写入标签”，我已经尝试了 3 种不同的方式 - 没有任何效果。

它也不会创建新的无线配置文件 - 无论我做什么。

[http://schoolofcode.wordpress.com/2013/03/20/connect-to-wifi-using-android-nfc-phone-and-nfc-tag/](http://schoolofcode.wordpress.com/2013/03/20/connect-to-wifi-using-android-nfc-phone-and-nfc-tag/)

它的作用：

当我扫描 NFC 标签时启动（如果我将 AAR 写入标签）

它不做什么：

*   创建任何新的无线配置文件

*   读取 NFC 标签和/或正确连接

我试图做的事情：

将 NFC 标签写入然后读取为：

WIFINETWORKNAME,密码

WIFI网络名称、密码

WIFI网络名称，密码

爪哇：

```
import java.util.List;
import android.net.wifi.WifiConfiguration;
import android.net.wifi.WifiInfo;
import android.net.wifi.WifiManager;
import android.nfc.NdefMessage;
import android.nfc.NfcAdapter;
import android.os.Bundle;
import android.os.Parcelable;
import android.app.Activity;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class Connect2 extends Activity {
private EditText wifiname;
private String password;
private  NfcAdapter mAdapter;
private  PendingIntent mPendingIntent;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.connect2);

        mAdapter = NfcAdapter.getDefaultAdapter(this);
        // Create a generic PendingIntent that will be deliver to this activity.
        // The NFC stack
        // will fill in the intent with the details of the discovered tag before
        // delivering to
        // this activity.
        mPendingIntent = PendingIntent.getActivity(this, 0, new Intent(this,
                getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), 0);

        // Setup an intent filter for all MIME based dispatches
        IntentFilter ndef = new IntentFilter(NfcAdapter.ACTION_NDEF_DISCOVERED);

        WifiManager wifiMgr = (WifiManager)getSystemService(Context.WIFI_SERVICE);
        WifiInfo wifiInfo = wifiMgr.getConnectionInfo();
        String connectionName = wifiInfo.getSSID();

        TextView tv=(TextView)findViewById(R.id.wifiname);
        if(connectionName==null){
            tv.setText("You are not connected  ");
        }else{

            tv.setText("You are linked to: "+connectionName+"   ");
        }

        Button close=(Button)findViewById(R.id.close);
        close.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                finish();
                System.exit(0);
            }
        });

    }
    @Override
    public void onResume(){
        super.onResume();

        if(NfcAdapter.ACTION_TAG_DISCOVERED.equals(getIntent().getAction())||NfcAdapter.ACTION_NDEF_DISCOVERED.equals(getIntent().getAction())){
            processReadIntent(getIntent());
        }
    }
    @Override
    public void onNewIntent(Intent intent){
        setIntent(intent);
    }
    public void processReadIntent(Intent intent){
        Parcelable[] rawMsgs = intent.getParcelableArrayExtra(
                NfcAdapter.EXTRA_NDEF_MESSAGES);

        // only one message sent during the beam
        NdefMessage msg = (NdefMessage) rawMsgs[0];

        // record 0 contains the MIME type, record 1 is the AAR, if present
        Log.d("msg", msg.getRecords()[0].getPayload().toString());

        byte[]payload=msg.getRecords()[0].getPayload();
        String msgtext=null;
        try{

        //Get the Text Encoding
        String textEncoding = ((payload[0] & 0200) == 0) ? "UTF-8" : "UTF-16";

        //Get the Language Code
        int languageCodeLength = payload[0] & 0077;
        String languageCode = new String(payload, 1, languageCodeLength, "US-ASCII");

        //Get the Text
        msgtext = new String(payload, languageCodeLength + 1, payload.length - languageCodeLength - 1, textEncoding);
        }catch(Exception e){

        }

        // splitting the message by comma. The first part is the name and 2nd part is the password.
        String[]tagdata=msgtext.split(",");

        String networkSSID = tagdata[0].toString();
        String networkPass = tagdata[1].toString();

        WifiConfiguration conf = new WifiConfiguration();
        conf.SSID = "\"" + networkSSID + "\"";   // Please note the quotes. String should contain ssid in quotes

        conf.preSharedKey = "\""+ networkPass +"\"";
        WifiManager wifiManager = (WifiManager)getSystemService(Context.WIFI_SERVICE); 
        wifiManager.addNetwork(conf);

        List<WifiConfiguration> list = wifiManager.getConfiguredNetworks();
        for( WifiConfiguration i : list ) {
            if(i.SSID != null && i.SSID.equals("\"" + networkSSID + "\"")) {
                 wifiManager.disconnect();
                 wifiManager.enableNetwork(i.networkId, true);
                 wifiManager.reconnect();               
                 break;
            }           
         }

        TextView wifiname=(TextView)findViewById(R.id.wifiname);
        wifiname.setTextColor( getResources().getColor(R.color.solid_red) );
        wifiname.setText("Successfully linked "+networkSSID +"   ");

    }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

尝试执行它时，我在 LogCat 中得到以下信息：

```
04-05 13:08:37.107: D/NfcDispatcher(905): dispatch tag: TAG: Tech [android.nfc.tech.MifareUltralight, android.nfc.tech.NfcA, android.nfc.tech.Ndef] message: NdefMessage [NdefRecord tnf=1 type=54 payload=02656E414E4452452D50435F4E4554574F524B2C2070617373776F7264]
04-05 13:08:37.107: D/NfcHandover(905): tryHandover(): NdefMessage [NdefRecord tnf=1 type=54 payload=02656E414E4452452D50435F4E4554574F524B2C2070617373776F7264]
04-05 13:08:37.117: I/ActivityManager(478): START u0 {flg=0x10008000 cmp=com.android.nfc/.NfcRootActivity (has extras)} from pid 905
04-05 13:08:37.137: I/NfcDispatcher(905): matched multiple TECH
04-05 13:08:37.147: I/ActivityManager(478): START u0 {cmp=com.android.nfc/.TechListChooserActivity (has extras)} from pid 905
04-05 13:08:37.317: D/dalvikvm(905): GC_CONCURRENT freed 7783K, 22% free 15072K/19148K, paused 9ms+9ms, total 52ms
04-05 13:08:37.327: I/ActivityManager(478): Displayed com.android.nfc/.TechListChooserActivity: +185ms (total +196ms)
04-05 13:08:38.247: D/NativeNfcTag(905): Tag lost, restarting polling loop 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T22:28:18.640

Having made [an application](https://play.google.com/store/apps/details?id=w.i) just like that I think that the tutorial is overly simple.

1.  It seems to use a Text Record to store the user/name and password. Not a crime punishable by death but there are better alternatives like Well-known URI Record or Handover Records, and the author seems to think it is a mime record.

2.  It says nothing about the security type, so adding the network would never work. I doubt that code has ever worked.

3.  The code totally ignores wifi-related broadcast events, which if fine, but would be necessary in 99% of real-life cases.

# c - 线程函数计时

> ID：15840422
> 
> 赞同：1
> 
> 时间：2013-04-05T17:57:01.513
> 
> 标签：c, pthreads, posix

创建线程时，它会自动启动参数中的线程函数吗？

我正在使用

```
iret1 =  pthread_create(&client[i++].tID, NULL, thread_function, NULL);
printf("Thread Created");   //for testing purposes 
```

在我的线程函数中，我在最顶部有一个打印语句。前任：

```
void *thread_function(void *arg){
    printf("Entered thread function");
    ...
    } 
```

而不是打印`Entered thread function`它立即打印`Thread Created`

在我开始另一个线程之前它不会打印`Entered thread function`，这是有原因的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:59:56.757

您至少需要在每个[printf(3)](http://man7.org/linux/man-pages/man3/printf.3.html)`\n`格式函数的末尾添加一个换行符，并且经常调用[fflush(3)](http://man7.org/linux/man-pages/man3/fflush.3.html) ，例如在两个之后添加一个调用...`fflush(NULL);``printf`

不要忘记`<stdio.h>`函数是缓冲的。请参见[setvbuf(3)](http://man7.org/linux/man-pages/man3/setvbuf.3.html)函数和手册页。

**您的输出未按您希望的方式打印的原因是它停留在`stdout`.**

而且您可能无法保证输出。个别字符可能是混合的。阅读[unlocked_stdio(3)](http://man7.org/linux/man-pages/man3/unlocked_stdio.3.html)和[flockfile(3)](http://man7.org/linux/man-pages/man3/flockfile.3.html)了解详情。

您可能想（多次）阅读一些[pthread 教程](https://computing.llnl.gov/tutorials/pthreads/)...

PS您可以考虑直接使用[write(2)](http://man7.org/linux/man-pages/man2/write.2.html)系统调用（不使用任何`<stdio.h>`函数）。

# php - 函数不适用于 for 循环

> ID：15840423
> 
> 赞同：1
> 
> 时间：2013-04-05T17:57:08.747
> 
> 标签：php, arrays, loops

因此，我在 wordpress 上的所见即所得（TinyMCE）中添加了按钮。有一个函数被调用来将按钮添加到按钮数组中。在该函数中，我创建了一个新循环，因为要添加很多按钮。我的循环一定有问题，因为它会抛出错误，而手动插入代码则不会返回任何错误。

```
 //Add button to the button array.

function register_button($buttons) {
//Use PHP 'array_push' function to add the columns button to the $buttons array

       $columnNum = array('one','two','three','four','five','six','seven','eight','nine','ten','eleven');

       for($i=0;$i<11;$i++){

           array_push($buttons, '"'.$columnNum[$i].'_col"');
           array_push($buttons, '"'.$columnNum[$i].'_col_first"');
           array_push($buttons, '"'.$columnNum[$i].'_col_last"');
       }

//Return buttons array to TinyMCE
   return $buttons;
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-05T18:05:38.287

你检查是否`$buttons`是一个数组？因为如果没有，`array_push`就会失败。

如果你确定 $buttons 是一个数组，你可以试试这个：

```
$buttons[] = '"'.$columnNum[$i].'_col"'; 
```

顺便说一句：你确定它不应该`$columnNum[$i].'_col'`没有双引号吗？

无论如何，有一些明显的方法可以优化您的代码，例如

```
for($i = 0; $i < count($columNum); $i++){ 
```

# sql - 同组级别的两列Birt Report

> ID：15840428
> 
> 赞同：1
> 
> 时间：2013-04-05T17:57:16.727
> 
> 标签：sql, crosstab, birt

我正在尝试编写一份报告，该报告在 Birt 中看起来类似于

```
-------------------------------------------------------------------------------------
               |                  Event Identifier                                  |
               ----------------------------------------------------------------------
               | Event Date  | Event instance #1| Event Instance 2| Event Instance 3| 
-------------------------------------------------------------------------------------
Employee Number| Event Date  | Entry            | Entry           | Entry           |
------------------------------------------------------------------------------------- 
```

我目前的问题是“事件日期”实际上只是事件实例日期的 MAX(EventDate)。

单独我可以获得我需要的所有信息，但是我无法获得它，因此我可以在事件实例级别旁边的整体事件级别显示事件日期。

如果我将其提升到高于事件实例的级别，它将仅显示具有该事件日期的第一个患者的信息，并且它将

Birt 交叉表中是否可以在同一组级别有两列？

快速编辑：这个的一个大问题是，这是我写这篇文章的客户想要的一般格式。我尝试使用普通表格向他们展示垂直方向的版本，但他们对结果不满意.

# version-control - 如何在 mercurial 中撤消“中止：推送在分支上创建新的远程头”

> ID：15840429
> 
> 赞同：17
> 
> 时间：2013-04-05T17:57:23.557
> 
> 标签：version-control, mercurial

我知道[Mercurial for Beginners: The Definitive Practical Guide](https://stackoverflow.com/questions/1170338/mercurial-for-beginners-the-definitive-practical-guide/)和[Mercurial 合并分支之类的答案？（中止：推送创建新的远程分支）](https://stackoverflow.com/questions/7448405/mercurial-merge-branches-abort-push-creates-new-remote-branches)

在这里，我无意中创建了 Mercurial 想要创建一个新的远程头的情况。撤消此问题的最佳方法是什么，并且在远程端留下很少或根本没有此错误的痕迹？

```
###> hg push
pushing to http://example.com
searching for changes
abort: push creates new remote heads on branch 'default'!
(did you forget to merge? use push -f to force)

###> hg revert --all -r tip

###> hg update -C
0 files updated, 0 files merged, 0 files removed, 0 files unresolved

###> hg incoming
comparing with http://example.com
searching for changes
no changes found

###> hg summary
parent: 488:e3db024fe901 tip
 Misc.
branch: default
commit: (clean)
update: 6 new changesets, 2 branch heads (merge)

###> hg pull
pulling from http://example.com
searching for changes
no changes found

###> hg glog
@  changeset:   488:e3db024fe901
|  tag:         tip
|  summary:     Misc.
|
o  changeset:   487:b207579b9d41
|  parent:      480:ce775708800c
|  summary:     Misc.
|
| o  changeset:   486:59a7a5b34c7f
| |  user:        other
| |  summary:     fixes
| |
| o  changeset:   485:b28264333e18
| |  user:        other
| |  summary:     binary 
```

如果我合并，它看起来不错：

```
hg merge
abort: outstanding uncommitted merges 
```

但`hg diff`显示了我没有做的各种改变。我愿意重新应用我的更改...我怎样才能将这一切恢复到一个提示，放弃所有本地更改？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-08T11:43:30.630

看起来当你完成了一个`hg merge`，你还没有提交结果变更集。

当您合并到另一个分支时（在您的情况下，您可能需要指定`hg merge 486`合并其他用户的更改），它会将该分支合并到您的工作目录中。然后，您需要通过使用合并工具或手动编辑文件（然后在任何冲突上运行）检查是否解决了所有冲突（如果有`hg resolve`）。完成此操作后，您需要`hg commit`新的合并变更集。

这可以解释为什么`hg diff`会给你很多你没有做的更改——它们是在另一个分支上所做的更改，你还没有提交。如果您运行`hg summary`或`hg parents`在您的工作目录中，您应该看到列出了两个父级：`486`和`488`. 您应该`hg commit`在这个工作目录中创建一个新的合并`489`.

如果您想撤消当前的合并并重新开始，那么您尝试运行是正确的`hg update -C`，这会将您的工作目录设置回其原始（未合并）状态。

如果您想*摆脱*您的更改（`487`并且`488`- 您声明您不介意重新应用您的更改），不求助于扩展的最简单的选择就是重新克隆存储库并从那里继续您的工作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-22T09:48:54.603

摆脱更改（例如 487 和 488）：如果您（和我一样）觉得重新克隆存储库，如上所述甚至[官方推荐这里](https://www.mercurial-scm.org/wiki/PruningDeadBranches#Using_clone)是荒谬的，那么您应该获得[MqExtension](https://www.mercurial-scm.org/wiki/MqExtension#Configuration)

启用 Mq 后，您可以轻松删除不需要的更改：

```
hg strip 487
hg strip 488 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-23T18:31:55.803

我没有进行合并，但突然间我正在查看操作员发布的消息。当我执行**hg pull**时，在命令行中显示**abort !repository default not found**。

# android - 带有日期选择器的 RadioButton 选择

> ID：15840432
> 
> 赞同：0
> 
> 时间：2013-04-05T17:57:44.400
> 
> 标签：android

我有一个从日期选择器获取日期的程序，还需要从单选按钮组中选择客舱。我知道我的错误在于单选按钮侦听器，也许我没有把它放在正确的位置。请记住，我是新来的！谢谢！

```
public class Main extends Activity {

    private int currentYear;
    private int currentMonth;
    private int currentDay;
    static final int DATE_DIALOG_ID = 0;
    private Button btDate;
    private TextView reservation;

    private String cabinChoice;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        btDate = (Button)findViewById(R.id.btnDate);
        reservation = (TextView)findViewById(R.id.txtReservation);
        btDate.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
            showDialog(DATE_DIALOG_ID);                                      

            }           

        });
        //---RadioButton---
        RadioGroup radioGroup = (RadioGroup) findViewById(R.id.radiogroup1);        
        radioGroup.setOnCheckedChangeListener(new OnCheckedChangeListener() 
        {
            public void onCheckedChanged(RadioGroup group, int checkedId) {
                //---displays the ID of the RadioButton that is checked---
                switch(checkedId){
                case 0:
                    cabinChoice = "Basic";
                    break;
                case 1:
                    cabinChoice = "Deluxe";
                    break;
                }
            }
        });

        final Calendar c = Calendar.getInstance();
        currentYear = c.get(Calendar.YEAR);
        currentMonth = c.get(Calendar.MONTH);
        currentDay = c.get(Calendar.DAY_OF_MONTH);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    protected Dialog onCreateDialog(int id) {
        switch (id){
        case DATE_DIALOG_ID:
            return new DatePickerDialog(this, reservationDate, currentYear, currentMonth, currentDay);

        }   

        return null;

    }
    private DatePickerDialog.OnDateSetListener reservationDate = new DatePickerDialog.OnDateSetListener(){

        @Override
        public void onDateSet(DatePicker view, int year, int month,
                int day) {
            // TODO Auto-generated method stub
            reservation.setText("Your reservation is set for " + (month + 1)+("-") + day + ("-") + year 
            + ("") + (" thru ") + ("") + (month + 1) + ("-") + (day + 2) + ("-") + year 
            + ("in") + cabinChoice);

        }

    };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:08:21.033

您的错误是参数是对内部`checkedId`检查的标识符的引用（*请参阅**[文档](http://developer.android.com/reference/android/widget/RadioGroup.OnCheckedChangeListener.html#onCheckedChanged%28android.widget.RadioGroup,%20int%29)*），因此您的代码将如下所示：`RadioButton``RadioGroup`

```
radioGroup.setOnCheckedChangeListener(new OnCheckedChangeListener() 
    {
        public void onCheckedChanged(RadioGroup group, int checkedId) {
            //---displays the ID of the RadioButton that is checked---
            switch(checkedId){
            case R.id.btnBasic:
                cabinChoice = "Basic";
                break;
            case R.id.btnDeluxe:
                cabinChoice = "Deluxe";
                break;
            }
        }
    }); 
```

# google-maps-api-3 - OpenLayers ::: 计算多边形中的房屋？

> ID：15840436
> 
> 赞同：1
> 
> 时间：2013-04-05T17:57:56.533
> 
> 标签：google-maps-api-3, map, geolocation, openlayers

我需要能够计算多边形内存在的所有房屋/地址。我已经考虑过了，似乎可以找到多边形内是否存在单个地址（通过查找地理位置是否与它相交？）

是否可以提取一个区域中所有地址的列表并检查它们是否相交？或者可能有其他方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:32:05.827

如果我尝试在浏览器客户端上执行此操作，我将获得一组 OpenLayers.LonLat 对象或 OpenLayers.Geometry.Point 对象。我将遍历该数组并通过调用 OpenLayers.Geometry.Polygon 的 containsPoint 函数来询问每个对象是否在一个多边形内。我会计算或收集多边形内的点。

您所描述的地理空间操作是我们使用开源 GeoTools 在服务器上执行的操作。我们倾向于将 OpenLayers 几乎专门用于地图可视化。

我可能没有完全回答您的问题，因为我感觉到您首先尝试获取地图上某个区域的地址/点列表，并且我认为您没有提供足够的信息来回答该部分这个问题。

# dojo - 从 Dojo 中的 CSVStore 读取数据

> ID：15840439
> 
> 赞同：1
> 
> 时间：2013-04-05T17:58:02.173
> 
> 标签：dojo, dojox.grid.datagrid

假设我有一个`CSVStore`连接到可编辑网格：

```
var csvStore = dojox.data.CsvStore({data: csvData, separator: ","});

this._grid = new dojox.grid.EnhancedGrid({
  id: gridId,
  store: csvStore,
  structure: layout,

  ...
}); 
```

如何检索`CSVStore`以 CSV 格式存储的修改后的数据？我正在寻找这样的东西：

```
var modifiedCSVData = csvStore.getCSVData(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T11:22:19.077

前几天我回答了一个类似的问题。有人试图**[从道场商店获取数据](https://stackoverflow.com/questions/15650541/how-to-pass-a-whole-dojox-grid-datagrid-storeitems-json-data-to-servlet/15650691#15650691)**。在这种情况下，它在`JSON`，不是`CSV`。您可以使用相同的技术来构建对象。`Array.join`然后，不要将其转换为 JSON，而是使用您在评论中所说的将其转换为 CSV 。很高兴我能提供帮助，我完全同意；这是 dojo 商店的一个缺失用例。

# php - 谷歌代理是假的爬虫？例如：google-proxy-66-249-81-131.google.com

> ID：15840440
> 
> 赞同：7
> 
> 时间：2013-04-05T17:58:05.020
> 
> 标签：php, block, web-crawler

****编辑：*** *此问题的解决方案在此问题下方，因为无法发布答案。人们决定结束这个问题。**

最近我发现谷歌代理的一些变种访问了我的网站。我怀疑这些是合法的谷歌爬虫，因为这些爬虫并不总是在代理后面（如主机名描述的那样）并且将自己标识为浏览器。主机名的格式类似于/类似于 google bot，但添加了字符串“代理”。

我的 PHP 拦截类拦截了这些爬虫，但是拦截这些爬虫是否正确？它们是什么，这些来自谷歌还是假的？

这里有一些关于这些爬虫之一的信息：

```
BlockedIp Notifier Report - IP:66.249.81.131:: has been blocked

Ticket ID : {EVNT_136877_2013040520130402_33147_10348}  
Event type : Access blocked  
Event date : 04/05/2013 - 19:17:47 (server date-time)  
Event counter : First occurring  
Processed url : http://streambutler.net/  
From url : http://www.google.com/search  
Domain : streambutler.net 
Domain IP : 95.170.70.213  
Visitor IP : 66.249.81.131  
Proxy IP : 66.249.81.131  

Critical : Yes  
Action required : No  

Additional information
Problem : Bad Proxy - via 66.249.81.131 
Hostname : google-proxy-66-249-81-131.google.com 
Block : Yes 
Refferer : http://www.google.com/search 
AgentString : Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.4 (KHTML, like G... 
Browser : Chrome 22.0.1229 
Platform : Linux 
Robot : No 
Mobile : No 
Tablet : No 
Console : No 
Crawler : No 
Agent_type : browser 
Agent_name : chrome 
Agent_version : 22.0.1229 
Os_type : linux 
Os_name : linux 
Agent_languagetag : en 
Status : ok 
Request : 66.249.81.131 
Languagecode : us 
Country : United States 
Region : California 
City : Mountain View 
Zipcode : 94043 
Latitude : 37.406 
Longitude : -122.079 
Timezone : -07:00 

Available from  : \'http 
Areacode : 0 
Dmacode : 0 
Continentcode : na 
Currencycode : USD 
Currencysymbol : &#36; 
Currencysymbol_utf8 : $ 
Currencyconverter : 1 
Extended : 1 
Organization : NULL 
```

**发现其他变种**

*   google-proxy-66-249-81-131.google.com（将自己标识为 Firefox 6.0 ???）
*   google-proxy-66-249-81-148.google.com（尝试访问 javascript 文件）
*   google-proxy-66-249-81-131.google.com
*   google-proxy-66-249-81-111.google.com（尝试访问 javascript 文件）
*   google-proxy-66-249-81-164.google.com

**编辑：** 下一个是一个奇怪的，Windows 7 上的 Firefox 6.0 和与上面示例相同的 IP，但不是下一个日志中的代理？如果是移动代理，这是否很奇怪？

```
Ticket ID : {EVNT_164838_2013040520130402_33147_10348}  
Event type : Access blocked  
Event date : 04/05/2013 - 19:19:07 (server date-time)  
Event counter : First occurring  
Processed url : http://streambutler.net/  
From url : Unknown or direct link  
Domain : streambutler.net 
Domain IP : 95.170.70.213  
Visitor IP : 66.249.81.131  
Proxy IP : (not present)  

Critical : Yes  
Action required : No  

Additional information
Problem : Blocked Server IP address (analysis) - 66.249.81.131 
Hostname : google-proxy-66-249-81-131.google.com 
Block : Yes 
Refferer : (direct access) 
AgentString : Mozilla/5.0 (Windows NT 6.1; rv:6.0) Gecko/20110814 Firefox/6.0 ... 
Browser : Firefox 6.0 
Platform : Windows 7 
Robot : No 
Mobile : No 
Tablet : No 
Console : No 
Crawler : No 
Agent_type : browser 
Agent_name : firefox 
Agent_version : 6.0 
Os_type : windows 
Os_name : windows 7 
Agent_languagetag : en 
Status : ok 
Request : 66.249.81.131 
Languagecode : us 
Country : United States 
Region : California 
City : Mountain View 
Zipcode : 94043 
Latitude : 37.406 
Longitude : -122.079 
Timezone : -07:00 
Available from  : \'http 
Areacode : 0 
Dmacode : 0 
Continentcode : na 
Currencycode : USD 
Currencysymbol : &#36; 
Currencysymbol_utf8 : $ 
Currencyconverter : 1 
Extended : 1 
Organization : NULL 
```

* * *

## **编辑：**解决方案：

**知道了！**这些“爬虫”不是爬虫，而是 Google 搜索引擎中使用的实时网站预览的一部分。

我已经尝试过，在预览中显示我的一个网站，是的，就是这样，收到了一条被阻止的 IP 消息。

如果您希望用户能够查看您网站的预览，您必须接受这些“爬虫”。

就像其他人所说：“该 URL 的根域是 google.com，并且不容易被欺骗”。

**结论：**您可以信任这些机器人或爬虫，它用于在谷歌搜索中显示预览。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T18:00:50.500

我尚未确认，但我怀疑这些 IP 可能与 Google 的 Google Chrome Mobile 数据压缩代理相关：

[https://developers.google.com/chrome/mobile/docs/data-compression](https://developers.google.com/chrome/mobile/docs/data-compression)

如果是这种情况，阻止它们会导致您的网站对一些完全无辜的移动用户显示不正确。

* * *

它还可能与用于使用 Google +1 按钮抓取网页片段的 Google+ 爬虫相关联：

[https://code.google.com/p/google-plus-platform/issues/detail?id=178](https://code.google.com/p/google-plus-platform/issues/detail?id=178)

底线是，这些 IP 用于由 Google 内部发起的 Web 请求。它们不是公共网络代理。

# javascript - 页面加载后运行 javascript

> ID：15840441
> 
> 赞同：5
> 
> 时间：2013-04-05T17:58:09.357
> 
> 标签：javascript, jquery, javascript-events

我目前有一个在我的视图页面中调用的 javascript 文件，我可以在其中显示我的数据信息。同时，我有这段 javascript，一旦单击图像，就会显示一个菜单栏。这个脚本在页面完全加载之前运行，或者因为它不工作而运行。在所有其他脚本完成运行并加载页面后，如何让我的一段 javascript 执行操作？这是我尝试过但无法正常工作的方法

**Javascript**

```
(function ($) {

.... lines to load view page with data

$(document).ready(function () {
    $('figure').on('click', function (event) {
        $(event.currentTarget).toggleClass('open');
    });
});

})(jQuery); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T17:59:43.463

如果您想等到在这种情况下加载所有元素，您可以使用`$(window).on("load")`而不是：`$(document).ready`

```
$(window).on("load", function(){
    $('figure').on('click', function (event) {
        $(event.currentTarget).toggleClass('open');
    });    
}); 
```

# ios - 我的 FetchedResultsController 做错了什么，它给了我设置其委托的警告？

> ID：15840442
> 
> 赞同：0
> 
> 时间：2013-04-05T17:58:09.960
> 
> 标签：ios, objective-c, core-data, nsfetchedresultscontroller

我有以下代码：

```
- (NSFetchedResultsController *)fetchedResultsController {
    if (!_fetchedResultsController) {
        NSManagedObjectContext *context = [(AppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext];
        NSEntityDescription *entity = [NSEntityDescription entityForName:@"ArticleInfo" inManagedObjectContext:context];
        NSFetchRequest *request = [[NSFetchRequest alloc] init];
        request.entity = entity;

        NSSortDescriptor *descriptor = [[NSSortDescriptor alloc] initWithKey:@"timeStamp" ascending:NO];
        request.sortDescriptors = [NSArray arrayWithObject:descriptor];

        request.fetchBatchSize = 20;

        NSFetchedResultsController *fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request managedObjectContext:context sectionNameKeyPath:nil cacheName:@"Root"];
        _fetchedResultsController = fetchedResultsController;
        _fetchedResultsController.delegate = self;
    }

    return _fetchedResultsController;
} 
```

它报告此错误：

> 从不兼容的类型'RootViewController *const __strong'分配给'id'

我到底做错了什么导致这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T22:03:04.200

您需要让编译器知道您的类符合`NSFetchedResultsControllerDelegate`协议。

您可以通过将其添加到`.h`文件中来执行此操作

```
@interface RootViewController : UITableViewController <NSFetchedResultsControllerDelegate> 
```

或者可能更优选将其添加到类扩展中。所以在你的`.m`文件中

```
@interface RootViewController () <NSFetchedResultsControllerDelegate> 
```

这可以被认为更好一点的原因是它更好地隐藏信息 - 没有其他类需要知道`RootViewController`符合`NSFetchedResultsControllerDelegate`协议的，那么为什么要让它公开可见呢？

# java - 具有元素限制的 Java 堆栈

> ID：15840443
> 
> 赞同：0
> 
> 时间：2013-04-05T17:58:10.887
> 
> 标签：java, list, stack

我知道这个问题已经问了很多次，但是搜索了一个小时后我仍然有问题。

我想使用一个 lifo 堆栈，它可以存储最大数量的元素。达到最大数量后，首先删除元素并将其替换为新元素，因此在第一个 pop 中我可以获得这个元素，在第二个我必须获得 size-1 的元素。

我尝试了什么：

**1）**使用修改后的堆栈，如此处所述[。](https://stackoverflow.com/questions/10359802/a-lifo-data-structure-that-holds-max-n-items)问题是它总是返回我添加的前 5 个元素（如果大小为 5）。

```
class StackSizable<E> extends Stack<E>{

    int maxSize;
    StackSizable(int size)
    {
        super();
        this.maxSize=size;
    }

    @Override
    public E push(E elt) {
        super.push(elt);
        while (this.size() > this.maxSize) {
            this.removeElementAt(this.size() - 1);
        }
        return null;
    }
} 
```

**2**）使用 ArrayDeque ，我看不出与简单 Stack 有任何区别，它没有设置任何限制（我用错了吗？）

```
ArrayDeque<State> lifo = new ArrayDeque<State>(5);
lifo.pop();
lifo.push(state); 
```

我想在益智游戏中使用它来实现撤消重做功能

**已解决：**正如汤姆所说，我最终使用了固定大小的堆栈，主要是为了性能

```

`public class FixedStack<T> {
     private T[] stack;
     private int size;
     private int top;
     private int popBalance = 0;//its used to see if all the elements have been popped

     public FixedStack(T[] stack) {
           this.stack = stack;
           this.top = 0;
           this.size = stack.length;
     }

     public void push(T obj) {
           if (top == stack.length)top = 0;
           stack[top] = obj;
           top++;
           if (popBalance < size - 1)popBalance++;
     }

     public T pop() {

          if (top - 1 < 0)top = size;
          top--;
          T ob = stack[top];
          popBalance--;
          return ob;
     }

     public void clear() {
          top = 0;
     }

     public int size() {
          return size;
     }

     public boolean poppedAll() {
          if (popBalance == -1)return true;
          return false;
     }
}` 

            回答 #1

赞同：4

时间：2013-04-05T18:08:14.193

我认为最有效的方法是使用一个固定数组，其大小等于您的最大元素数，以及一个指向当前队列“顶部”元素的索引。

当你添加一个新元素时，你在 index+1 处添加它（如果需要，返回到元素 0）并可能覆盖不再适合的元素。当你弹出一个元素时，你会做相反的事情。

这样，您的数据结构就不必重新排序，并且您可以使用比集合更轻量的数组。

            回答 #2

赞同：3

时间：2013-04-05T18:01:32.157

当达到最大尺寸时，您的线路

```
this.removeElementAt(this.size() - 1); 
```

然后立即删除最后推送的元素（您刚刚推送的），这是堆栈的顶部。您需要删除第一个元素（堆栈底部）：

```
this.removeElementAt(0); 
```

```

# python - 在 Ubuntu 上使用 nginx 通过 FastCGI 运行 Python

> ID：15840444
> 
> 赞同：2
> 
> 时间：2013-04-05T17:58:12.700
> 
> 标签：python, http, nginx, installation

我已经看过其他线程，但大多数都没有进入足够的设置细节，这是我需要帮助的地方。

我有一个基于 Ubuntu 的 VPS，运行 nginx，通过端口 9000 上的 php-cgi 为 PHP 站点提供服务。

我想开始用 Python 做更多的事情，所以我编写了一个部署脚本，我基本上想将它用作我本地 GitLab 服务器上的接收后挂钩，作为我的第一个 Python 脚本。我可以通过在命令行上运行来成功运行此脚本，`python script.py`但为了将其用作接收后挂钩，我需要它能够通过 http 访问它。

我在 nginx wiki 上查看了[本指南](http://wiki.nginx.org/PythonFlup)，但中途说：

> 并启动 django fastcgi 进程：
> 
> `python ./manage.py runfcgi host=127.0.0.1 port=8080`

现在，就像我说的那样，我对 python 还很陌生，而且我从未使用过 Django 框架。任何人都可以帮助我应该如何启动 fastcgi 服务器吗？我用`./manage.py`我的脚本名称替换吗？任何帮助都会得到帮助，因为我在网上找到的所有内容都涉及使用 Django。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T18:11:32.873

> 我是否将 ./manage.py 替换为我的脚本名称？

不，您的脚本不太可能是*FastCGI*服务器，或者它可以接受任何类型的 HTTP 请求，因为您提到通过命令行运行它。（根据我对*FastCGI*的了解，支持它的应用程序必须能够处理通过标准输入以特定格式传入的请求流，因此肯定会涉及一些管道。）

我想说最简单的方法是使用*一些*Web 框架来充当 HTTP/FastCGI 中间件。供您使用，例如[*Flask*](http://flask.pocoo.org/docs/deploying/fastcgi/)（甚至是[*Paste*](http://pythonpaste.org/)，但我发现文档难以理解）之类的“微框架”听起来可以正常工作。这个想法是为您的主代码提供两个接口，一个可以处理命令行参数，一个可以处理 HTTP 请求，最终两者都只会调用一个实际完成工作的函数。（如果您想保留应用程序的命令行版本。）

Flask 文档还提到[使用*uWSGI*](http://flask.pocoo.org/docs/deploying/uwsgi/)或[独立工作者](http://flask.pocoo.org/docs/deploying/wsgi-standalone/)作为部署选项。我不熟悉前者；~~出于与下一段中的方法相同的原因，我不建议将后者用于简单、低流量的应用程序。~~

考虑到您使用 VPS，您甚至可以使用[模块](http://docs.python.org/3/library/http.server.html)[将应用程序作为独立服务器进程运行`http.server`](http://docs.python.org/3/library/http.server.html)~~，但我不确定这是更好的选择，除非您绝对想避免使用任何类型的框架。您必须确保应用程序在服务器重新启动时启动，或者它在崩溃时重新启动，并且让*nginx*完成主管的工作似乎更容易。~~

**更新：**从头开始，似乎*nginx*不会为您处理监督*FastCGI工作进程，这将是该方法的主要优势。*鉴于此，您使用三种方法中的哪一种并不重要，因为您必须以一种或另一种方式设置服务主管。我会说使用*uWSGI*，因为*Flup*（*Flask+FastCGI*需要它）似乎自 2011 年以来就被放弃了，而且*nginx*本身显然支持*uWSGI*协议。否则，您需要使用与 nginx 不同的网络服务器，它会为您管理一个 FastCGI 工作器。如果这是一个选项，我会考虑[*切诺基*](http://www.cherokee-project.com/)*[](http://www.cherokee-project.com/)*，可以使用 Web GUI 进行配置。**

 ****tl; dr：**您需要编写一个（非常简单的）webapp。虽然在没有任何类型的 Web 框架的情况下执行此操作是可行的，但在我看来，使用一个更容易，因为您可以免费进行一些（非平凡的）管道，并且有很多关于如何部署它们的指导。**

# android - Android 使用多个进度对话框

> ID：15840446
> 
> 赞同：0
> 
> 时间：2013-04-05T17:58:14.050
> 
> 标签：android, progressdialog

我正在尝试构建一个类来访问网络，下载数据然后将其加载到数据库中。使用单个进度对话框执行此操作没有问题，但根本无法弄清楚如何拥有多个对话框。在对此进行研究时，我发现了数百个进度对话框问题，因此它看起来并不像应有的那么简单。

我尝试过使用处理程序和线程，但根本无法使用

我正在寻找一个工作代码的例子来完成这个。

这是我正在尝试的伪代码：

```
public class myactivity extends Activity()
{
    private WebIO webIO   ;     // web acess io
    private DataIO DataIO ;     // database  io

    public void onCreate( Bundle savedInstanceState ) {
        DataIO = new DataIO( this );
        WebIO  = new WebIO();
        DataIO.open();
        runProgram();
    }
}

private void runProgram() {
    startProgressDialog( "Downloading data from web" );

    new Thread() {
        public void run() {
            try{
                String vData = webIO.getData();

                dismissProgressDialog();

                if  ( vData.length() > 0 ) {
                    promptUser( vData );
    } } } }
}

private void promptUser( vData ){
    if alertdialog_to_prompt_user_to_load(){
    {
        loadData( pData )
    }

private void loadData( String pData ){
    startProgressDialog( "Loading data into database" );

    new Thread() {
        public void run() {
            try{
                loadDataIntoDatabase();

                dismissProgressDialog();
    } } } }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T18:06:25.730

拥有多个对话框的唯一方法是将它们层叠在一起，这显然是用户体验的禁忌。在android中，对话框是它们自己的窗口，所以一次只能有一个焦点。

要解决您的问题，请创建一个包含多个[`ProgressBar`](http://developer.android.com/reference/android/widget/ProgressBar.html)小部件的自定义对话框。最简单的方法是从 a 开始[`DialogFragment`](http://developer.android.com/reference/android/app/DialogFragment.html)并覆盖`onCreatedDialog()`以返回[`AlertDialog`](http://developer.android.com/reference/android/app/AlertDialog.html)带有自定义视图的 a。要在警报对话框上设置自定义视图，请[`setView()`](http://developer.android.com/reference/android/app/AlertDialog.html#setView%28android.view.View%29)参阅`AlertDialog`. 例如，

```
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    LayoutInflater li = LayoutInflater.from(context);
    View layout = = li.inflate(R.layout.my_dialog);

    return new AlertDialog.Builder(getActivity())
            .setIcon(..)
            .setTitle(...)
            .setView(layout)
            ...
            .create();
} 
```

将所有这些封装到一个多下载进度对话框中会非常简洁，您可以在其中注册其他下载并让该类自动添加进度条并自行注册以进行进度更新。

# xcode - Xcode如何更改启动时首先加载的viewController

> ID：15840449
> 
> 赞同：7
> 
> 时间：2013-04-05T17:58:21.040
> 
> 标签：xcode, uiviewcontroller, storyboard

我正在使用故事板，xcode 4.6.1。我已经创建了一个应用程序，但现在我想返回并在开头添加一个新的视图控制器。如何将此视图控制器指定为在运行时加载的第一个？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-05T18:01:52.420

在情节提要中选择您的视图控制器，单击`show the attributes inspector`

并选择`initial scene: is initial view controller`

![在此处输入图像描述](https://i.stack.imgur.com/aqNy7.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-26T10:18:04.723

**初始视图控制器**

初始视图控制器允许您在不启动情节提要的情况下`Storyboard ID`

```
let storyboard = UIStoryboard(name: String(describing: SomeViewController.self), bundle: nil)
let initialViewController = storyboard.instantiateInitialViewController() 
```

Xcode 10.3

```
Storyboard -> View Controller

Show Inspectors -> Show the Attributes inspector -> Is Initial View Controller 
```

它将更新初始视图控制器`.storyboard`。

![](https://i.stack.imgur.com/AySzy.png)

# c# - C# MySql.Data 插入错误

> ID：15840457
> 
> 赞同：-1
> 
> 时间：2013-04-05T17:58:59.520
> 
> 标签：c#, mysql, sql, sql-insert

我在 c# 中使用 MySql.Data 进行 mysql 连接。在另一个程序上它工作但目前我挂在 INSERT INTO 命令上。

我收到以下错误：

```
An unhandled exception of type 'MySql.Data.MySqlClient.MySqlException' occurred in MySql.Data.dll
Additional information: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'key) VALUES ('PGJWZBPOWTRPUTKY')' at line 1 
```

使用此代码：

```
MySqlCommand Command = Connection.CreateCommand();
        MySqlDataReader Reader;
        Command.CommandText = "INSERT INTO jt_teamsync (key) VALUES ('" + TeamSyncKey + "')";
        Connection.Open();
        Reader = Command.ExecuteReader();
        Connection.Close(); 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T17:59:33.727

`KEY`是mysql中的保留关键字。它应该使用反引号进行转义，

```
INSERT INTO jt_teamsync (`key`) VALUES(...) 
```

*   [MySQL 保留关键字列表](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

作为旁注，您的查询非常弱。它很容易受到`SQL Injection`. 参数化值以避免它，例如

```
string content = TeamSyncKey;
string connStr = "connection string here";
string sqlStatement = "INSERT INTO jt_teamsync (`key`) VALUES (@key)";
using (MySqlConnection conn = new MySqlConnection(connStr))
{
    using(MySqlCommand comm = new MySqlCommand())
    {
        comm.Connection = conn;
        comm.CommandText = sqlStatement;
        comm.CommandType = CommandType.Text;

        comm.Parameters.AddWithValue("@key", content);

        try
        {
            conn.Open();
            comm.ExecuteNonQuery();
        }
        catch(MySqlException e)
        {
            // do something with the exception
            // do not hide it
            // e.Message.ToString()
        }
    }
} 
```

# java - 如何将 Java.Lang.Enum 转换为整数？

> ID：15840458
> 
> 赞同：1
> 
> 时间：2013-04-05T17:59:01.803
> 
> 标签：java, xamarin.android

在 monodroid 中，我有一个 java 绑定，它返回一个 Java.Lang.Enum 对象。

当我尝试将此对象转换为 int 时，它会抛出。

```
System.InvalidCastException: Cannot cast from source type to destination type. 
```

这是我在调试器的即时窗口中得到的：

```
state
{OPENING}
base: {Java.Lang.Enum}
IsClosed: false
IsOpened: false
ThresholdClass: 0x1d200832
ThresholdType: {System.MonoType} 
```

我很惊讶 enum 不能转换成 int ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T18:11:32.540

您可以使用[java.lang.Enum.ordinal()](http://docs.oracle.com/javase/6/docs/api/java/lang/Enum.html#ordinal())返回一个 int 值，该值表示该类型对象的 Enum 类定义中 Enum 常量的位置。

例如，如果 Enum 类的定义是这样的：

```
enum Example {
    Cat, Dog, Fish, Goat
} 
```

然后`Cat.ordinal()`将返回 int 值 0，`Dog.ordinal()`将返回 int 值 1，`Fish.ordinal()`将返回 int 值 2，依此类推。

但是，不能保证 Enum 常量的序数位置保持不变，因此在不确定 Enum 定义中的更改（这将更改序数值）不会破坏您的代码的情况下，永远不要使用它。

# c# - 提高异步 Web 调用的性能

> ID：15840463
> 
> 赞同：2
> 
> 时间：2013-04-05T17:59:15.913
> 
> 标签：c#, web-services, asynchronous

背景：我必须调用 Web 服务调用 1500 次，大约需要 1.3 秒才能完成。（无法控制此第 3 方 API。）总时间 = 1500 * 1.3 = 1950 秒 / 60 秒 = 大约 32 分钟。

我想出了我认为是一个很好的解决方案，但它并没有那么好。所以我将调用更改为异步网络调用，认为这会极大地帮助我的结果，但它没有。

示例代码：

预优化：

```
foreach (var elmKeyDataElementNamed in findResponse.Keys)
{

    var getRequest = new ElementMasterGetRequest
    {
        Key = new elmFullKey
        {
            CmpCode = CodaServiceSettings.CompanyCode,
            Code = elmKeyDataElementNamed.Code,
            Level = filterLevel
        }
    };

    ElementMasterGetResponse getResponse;
    _elementMasterServiceClient.Get(new MasterOptions(), getRequest, out getResponse);
    elementList.Add(new CodaElement { Element = getResponse.Element, SearchCode = filterCode });
} 
```

通过优化：

```
var tasks = findResponse.Keys.Select(elmKeyDataElementNamed => new ElementMasterGetRequest
    {
        Key = new elmFullKey
            {
                CmpCode = CodaServiceSettings.CompanyCode,
                Code = elmKeyDataElementNamed.Code,
                Level = filterLevel
            }
    }).Select(getRequest => _elementMasterServiceClient.GetAsync(new MasterOptions(), getRequest)).ToList();

Task.WaitAll(tasks.ToArray());

elementList.AddRange(tasks.Select(p => new CodaElement
    {
        Element = p.Result.GetResponse.Element,
        SearchCode = filterCode
    })); 
```

较小的采样示例：因此，为了轻松测试，我对 40 条记录进行了较小的采样，这需要 60 秒，没有优化，优化只需要 50 秒。我会虽然它会接近 30 或更好。

我使用wireshark 来观察交易，并意识到异步方式的发送速度并没有我想象的那么快。

捕获的异步请求 ![捕获的异步请求](https://i.stack.imgur.com/p7ggo.png)

正常无优化 ![正常无优化](https://i.stack.imgur.com/ewXTE.png) 您可以看到异步推送非常快，然后下降......还请注意，在请求 10 和 11 之间花了将近 3 秒。

为缓慢的任务创建线程的开销是否需要几秒钟？注意：我所指的任务是 4.5 TAP 任务库。

为什么请求不会比这更快。有人告诉我，我正在访问的 Apache Web 服务器最多可以容纳 200 个线程，所以我在那里看不到问题。

我没有考虑清楚吗？调用 Web 服务时，异步请求有什么好处吗？我有代码错误吗？任何想法都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T21:38:29.420

经过多天的搜索，我发现这篇文章解决了我的问题： [尝试并行运行多个 HTTP 请求，但受到 Windows（注册表）的限制](https://stackoverflow.com/questions/2960056/trying-to-run-multiple-http-requests-in-parallel-but-being-limited-by-windows)

请求没有更快地到达服务器的原因也是由于我的客户端代码与服务器无关。默认情况下，C# 只允许 2 个并发请求。见这里：http: [//msdn.microsoft.com/en-us/library/system.net.servicepointmanager.defaultconnectionlimit.aspx](http://msdn.microsoft.com/en-us/library/system.net.servicepointmanager.defaultconnectionlimit.aspx)

我只是添加了这行代码，然后所有请求都在几毫秒内完成。

```
System.Net.ServicePointManager.DefaultConnectionLimit = 50; 
```

![在此处输入图像描述](https://i.stack.imgur.com/rxpPM.png)

# javascript - 让 cocos2d-html5 与 Visual Studio 一起工作

> ID：15840471
> 
> 赞同：0
> 
> 时间：2013-04-05T17:59:44.767
> 
> 标签：javascript, visual-studio-2012, cocos2d-html5

`<rant>`我发誓处理 IDE 问题是最糟糕的。就像我想做的就是用一些代码弄脏我的手，但不能。`</rant>`

正如标题所暗示的，我正在尝试让 Cocos2d-HTML5 在 Visual Studio 2012 中工作。我已将 Cocos2d-HTML5 文件复制到我的 web 目录并遵循了一些教程，但在`jsloader.js`.

在进行以下更改之前，它没有找到`jsloader.js`：

```
 FROM:  `engineDir: '../cocos2d/',`
   TO:  `engineDir: '../GridWars/cocos2d/'` 
```

`Gridwars`是项目的名称

现在它找到`jsloader.js`但有一个错误。

```
Unhandled exception at line 117, column 5 in http://localhost:51244/GridWars/cocos2d/platform/jsloader.js

0x800a138f - JavaScript runtime error: Unable to get property 'loadExtension' of undefined or null reference 
```

对于这些代码行：

```
var d = document;
var c = d.ccConfig;

if (c.loadExtension != null && c.loadExtension == true) { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T03:12:03.453

你用的是哪个版本的 Cocos2d-html5？

需要在 cocos2d.js 文件中配置您的设置。您可以在模板文件夹中找到此文件。

例如：

```
var c = {

    COCOS2D_DEBUG:2, //0 to turn debug off, 1 for basic debug, and 2 for full debug

    box2d:false,

    chipmunk:false,

    showFPS:true,

    loadExtension:false,    //**Hey, here is the loadExtension.....**

    frameRate:60,

    tag:'gameCanvas', //the dom element to run cocos2d on

    engineDir:'../cocos2d/',

    //SingleEngineFile:'',

    appFiles:[

        'src/resource.js',

        'src/myApp.js'//add your own files in order here

    ]

}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-07T20:38:09.647

v2.2 有类似的错误。我发现在 cocos2d.js 文件中移动一行会有所帮助。

```
window.addEventListener('DOMContentLoaded', function () {
    ...
    d.body.appendChild(s);
    document.ccConfig = c;
    s.id = 'cocos2d-html5';
    //else if single file specified, load singlefile
}); 
```

删除行：`document.ccConfig = c;`并将其移到`window.addEventListener`

例如：

```
document.ccConfig = c;

window.addEventListener('DOMContentLoaded', function () {
   // etc
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T04:01:20.677

答案张贴在他们的[发行说明](http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Upgrade_Guide_for_Cocos2d-html5_v21)上。我正在关注他们的一个教程，最终在帖子底部找到了我的答案。

回答：

在`cocos2d.js`

寻找“ `s.c = c`”，

将其更改为“ `document.ccConfig = c`”

在`main.js`

寻找“ `config:document.querySelector('#cocos2d-html5')['c'],`”

将其更改为“ `config:document.ccConfig,`”

# php - 如何确定当前的 php 数组编号

> ID：15840477
> 
> 赞同：1
> 
> 时间：2013-04-05T17:59:48.563
> 
> 标签：php, arrays

下午好。

我正在尝试创建一个数组列表，其中一个键值为 ($_REQUEST['qty#'])，其中“#”将是数组中项目的当前编号（因为它与收集此信息的表格）。

例如：

```
$itemdetails =  array(
    array(
    'qty' => ($_REQUEST['qty1']),
    'price' => 0.70,
    'pn' => 'TV-1000',

    array(
    'qty' => ($_REQUEST['qty2']),
    'price' => 0.99,
    'pn' => 'TV-5000')); 
```

有什么方法可以自动确定 ($_REQUEST['qty']) 中的数字，而无需手动输入数字？

就是想。我的下一个猜测是将其全部输入数据库并从那里提取。

提前感谢一堆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:11:25.670

What you should do is pass an array of data via POST/GET.

To do this in your inputs, you make the name value = `qty[]` for each input. Note the array syntax `[]` here.

PHP will automatically take all values for input with that array syntax and build an array out of it in $_POST/$_REQUEST.

So you would be able to access your array like

```
var_dump($_POST['qty']);
var_dump($_REQUEST['qty']); 
```

That however still doesn't give the ability to match this to the price/pn as you need. So, let's take the array syntax one step further and actually put a key value in it like this:

```
<input name="qty[0]" ... />
<input name="qty[1]" ... /> 
```

By doing this you will be able to know exactly which array index matches which item (assuming you know the order the inputs were displayed in).

The would make `$_POST['qty'][0]` be the first item, `$_POST['qty'][1]` be the next and so on.

So assuming you also have you prices/pn in an array like this:

```
$item_array = array(
    0 => array('price' => 123, 'pn' = 'ABC'),
    1 => array('price' => 456, 'pn' = 'XYZ'),
    ...
); 
```

You could then easily loop through the input quantities and build you final array like this:

```
$itemdetails = array();
foreach ($_REQUEST['qty'] as $key => $value) {
    $itemdetails[$key] = $item_array[$key];
    $itemdetails[$key]['qty'] = $value;
) 
```

Also note, that if you are expecting this data to be passed via POST, it is considered best practice to use the `$_POST` superglobal rather than the `$_REQUEST` superglobal.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T18:03:27.870

你需要循环...

```
$itemdetails = array(
        array(
                'price' => 0.70,
                'pn' => 'TV-1000'
        ),

        array(
                'price' => 0.99,
                'pn' => 'TV-5000'
        )
);

foreach ( $itemdetails as $k => &$item ) {
    $item['qty'] = $k + 1;
} 
```

# android - Android LoaderManager ContentProvider 和通过网络加载数据

> ID：15840486
> 
> 赞同：1
> 
> 时间：2013-04-05T18:00:04.237
> 
> 标签：android, rest, networking, android-contentprovider

我搜索了 StackOverflow 并用谷歌搜索，但找不到答案。

我正在尝试使用 Virgil Dobjanschis Designpattern B ( [http://www.google.com/events/io/2010/sessions/developing-RESTful-android-apps.html](http://www.google.com/events/io/2010/sessions/developing-RESTful-android-apps.html) )构建 REST-Service

我有一个带有 SimpleCursorAdapter 和 LoaderManager 的活动来查询 ContentProvider。这适用于我的数据库中的数据。重新查询数据并刷新 UI。

在 ContentProvider 上的每个查询之后，都会启动一个线程来同步来自网络的请求数据，它会加载 json 对象、解析并将新数据保存到数据库中——一切都很好，但 UI 没有更新。

我想我必须向我的活动发送一条消息来刷新数据，但我不知道如何也找不到如何做到这一点的示例。

那么，管理这个问题的正确方法是什么？

- - 更新 - -

我想我没有清楚地解释我的问题。正如你在这张照片中看到的：

![在此处输入图像描述](https://i.stack.imgur.com/ONrz5.jpg)

第 7 步正在工作。Helper 类正在更新数据。步骤 7' 不会发生。我认为这将是 ContentProvider 的自动功能。

我的 Helper 类（Resthandler）直接更新数据库而不使用 ContentProvider。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:11:01.470

你有一个 SimpleCursorAdapter，我想你用它来将数据从内容提供者绑定到你的 UI，对吗？如果这是真的，那么每次更新游标时都需要将检索到的游标移动到游标适配器。

在 CursorLoader.onLoadFinished() 中执行此操作，方法是调用

SimpleCursorAdapter.swapCursor() 或 SimpleCursorAdapter.changeCursor()。

有关完整示例，请参阅 Android 培训课程 [在后台加载数据。](http://developer.android.com/training/load-data-background/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T14:47:46.187

我已经找到了解决方案。我在 ContentProvider 中重载了 insert()。所以我可以给它 ContentValues 并且 CP 正在将数据写入 db。CP 向视图发送通知。它已经过测试并且可以正常工作。我在“Programming Android”一书中找到了这一点。

# r - 基于字符向量值跨 R 中的多个数据帧进行子集化

> ID：15840493
> 
> 赞同：0
> 
> 时间：2013-04-05T18:00:32.170
> 
> 标签：r, data-manipulation

我有 6 个数据框，每个数据框有 2 列，用于“id”和“value”以及不同的行数。它们被标记为 p1、p2....p6，看起来像这样

```
id          value_p1
Jane C      9.713457e-01
Claire K    1.260160e-01
Brett F     4.933005e-0
Jen S       0.56 
```

我现在有一个字符向量，其中包含所有 6 个数据集的名称相交，称为 id_ intersect：

```
c("Jane C", "Claire K","Brett F") 
```

我现在想创建一个新的数据框，它只有每个数据框中包含 id_intersect 的部分的子集，并保留每个数据框中相交 id 的值。

```
id          value_p1      value_p2.............value_p6
Jane C      9.713457e-01  0.87                 .098
Claire K    1.260160e-01  0.89                 .005
Brett F     4.933005e-0   0.002                .035 
```

我真的坚持这一点，我对 R 很陌生，所以非常感谢任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T18:23:45.720

您可以`Reduce`在这里使用`merge`,

```
 ll <- list(p1,p2,...,p6)
 Reduce(merge,ll) ## 
```

这是一个可重复的示例。首先，我在列表中创建您的数据框

```
ll <- lapply(1:6, function(x) {
  id <- c(letters[1:3],letters[3+x])
  dat <- data.frame(id=id, value=rnorm(4))
  names(dat) <- c('id',paste('value',x,sep='_'))
  dat

}) 
```

然后

```
Reduce(merge,ll)
        id     value_1     value_2    value_3   value_4      value_5    value_6
1  Brett F -0.09242725 -0.03908275  0.5366957 0.4926749  0.830829230  1.4868564
2 Claire K -0.27487913 -0.13733120 -0.2708968 0.1720550 -0.003194644 -0.6328486
3   Jane C -1.56306487 -0.75655434  0.1806619 0.2482159 -1.075606294  1.9711559 
```

# java - 如果存在负权重循环，贝尔曼-福特算法究竟会发生什么？

> ID：15840495
> 
> 赞同：0
> 
> 时间：2013-04-05T18:00:40.593
> 
> 标签：java

我试图准确理解为什么贝尔曼-福特算法不适用于负重量循环。我明白负重循环会阻止程序给出正确的答案。但是，如果存在负重量循环，程序中究竟会发生什么？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:25:53.550

Bellman-Ford 算法在加权图中找到从源顶点到所有其他顶点的*最短路径。*

负权循环的问题***是没有最短路径***。

不画图，考虑4个节点的情况，其中A为源，节点B,C,D为其他顶点。

所有边的权重如下：

```
w(A,B) = 1
w(B,C) = 1
w(C,D) = 1 
```

Bellman-Ford 将得出以下最短路径长度

```
path(A~B) = 1
path(A~C) = 2
path(A~D) = 3 
```

但是，如果我们添加一个创建负权重循环的边缘会怎样。例如从 C 到 B 的一条边，权重为 -2。

```
w(C,B) = -2 
```

现在有一个负重循环。通过步行`(B,C,B)`，我们得到 -1 (1 + -2) 的总路径权重。

如果我们再次运行 Bellman-Ford，它会给我们提供它认为的从 A 到 D 的最短路径，就像以前一样。[注 1]

但这一次，就错了。

事实上，算法给我们的整数最短路径权重并不重要，因为我们***总能***找到一个更短的。

例如，假设算法给了我们原始路径权重 3 `(A,B,C,D)`。好吧，很容易看出我们可以构造一条*更短*的路径：`(A,B,C,B,C,D)`这给了我们 2 的路径权重。

但这也不是最短的路径。例如`(A,B,C,B,C,B,C,D)`给我们一个路径权重 1。

如您所见，我们可以通过在顶点 B 和 C 之间重复循环来构造***任意短***的路径权重。这只是因为我们的图包含负权重循环。

所以并不是贝尔曼-福特没有正确找到最短路径。
...更准确地说，***没有最短路径***。

[1] 在 Bellman-Ford 中检测负权重循环并不难，因此这是一个简单的实现。

# qt - 使用 QTextCursor 选择非 alpha 字符

> ID：15840501
> 
> 赞同：0
> 
> 时间：2013-04-05T18:01:05.417
> 
> 标签：qt

我正在尝试将语法完成添加到 QTextEdit 基本编辑器中，并且我想支持非字母字符来触发 QCompleter 弹出窗口。我正在使用 QTextCursor::select 来获取当前单词，但它总是过滤掉非字母字符。我需要为此使用一个选项吗？

这是我用来获取文本的代码：

```
QTextCursor tc = textCursor();
tc.select(QTextCursor::WordUnderCursor);
QString t = tc.selectedText(); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:26:23.203

单词实际上不包含字母字符。选择最后一个输入字符：

```
QTextCursor tc = textCursor();
tc.movePosition ( QTextCursor::Left, QTextCursor::KeepAnchor);
QChar lastChar = tc.selectedText().at(0);
if (!lastChar.isLetterOrNumber())
{
do something;
} 
```

将 isLetterOrNumber() 替换为您可能要检查的任何字符。

# django - Django - Django ORM 如何管理用户在数据库中上传的表

> ID：15840503
> 
> 赞同：1
> 
> 时间：2013-04-05T18:01:10.810
> 
> 标签：django, django-models

我的 Web 应用程序允许用户在 Postgres 数据库中加载/创建表。我知道 Django ORM 需要在 models.py 中为数据库中的每个表定义模型才能访问它。如何在每次上传新表时访问用户在应用程序中上传的表，而无需即时创建新的模型定义？我正在考虑创建一个通用模型定义，将表分解为其组件，如下所示：

模型.py

```
class Table(models.Model):
    filename = models.CharField(max_length=255)

class Attribute(models.Model):
    table = models.ForeignKey(Table)
    name = models.CharField(max_length=255)
    type = models.IntegerField()
    width = models.IntegerField()
    precision = models.IntegerField()

class Row(models.Model):
    table = models.ForeignKey(Table)

class AttributeValue(models.Model):
    row = models.ForeignKey(Row)
    attribute = models.ForeignKey(Attribute)
    value = models.CharField(max_length=255, blank=True, null=True) 
```

这种通用模型的问题是每个表都混合在 4 个表中（在管理界面中没有用），当你有很多行时创建它真的很慢。你对这个案子有什么建议吗？

**编辑：**`manage.py inspectdb`每次用户添加或删除表时，使用单独的数据库存储这些表并使用路由器并更新其 models.py 是否可行？（[就像在这篇文章中一样](https://stackoverflow.com/questions/14108003/how-to-access-data-in-django-which-models-is-not-defined-in-models-py)）我想知道如果两个用户同时添加一个表会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:36:19.480

您可能需要使用[原始 SQL 查询](https://docs.djangoproject.com/en/dev/topics/db/sql/)来执行此操作。

如果您期望的表的模式是预定义的，您可以使用数据库路由器将某个模型链接到每个用户的特定表名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T02:24:22.743

我认为您应该研究像这里这样的动态模型：

[https://code.djangoproject.com/wiki/DynamicModels](https://code.djangoproject.com/wiki/DynamicModels)

或在这里：

[http://dynamic-models.readthedocs.org/en/latest/](http://dynamic-models.readthedocs.org/en/latest/)

祝你好运，因为这不是一个简单的方法，我的朋友 :)

# android - 哪些选项可用于使用 Adob e AIR 在 Android 上处理文本输入？

> ID：15840504
> 
> 赞同：4
> 
> 时间：2013-04-05T18:01:13.163
> 
> 标签：android, mobile, air, adobe, textinput

哪些选项可用于使用 Adob​​e AIR 在 Android 上处理文本输入？每个选项的优点和缺点是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-05T18:01:59.543

当前可供 Android 上的 AIR 开发人员处理文本输入的选项有：

*   **StageText**原生文本（默认）
*   **TextInputSkin** (spark.skins.mobile)
*   **TextInputSkin** (spark.skins.spark)
*   **StageText** + **TextInputSkin** (spark.skins.mobile) 混合
*   **StageWebView**（解释如下）
*   **本机视图**

我将在下面讨论每种方法的一些优点和缺点。如果我遗漏了什么（或者如果您有其他我没有想到的想法），请告诉我！

* * *

# 舞台文字

*   在所有情况下都正确处理输入？**是的**[![](https://i.stack.imgur.com/KcZLh.png)](https://i.stack.imgur.com/KcZLh.png)
***   在所有情况下都正确显示？**不**[![](https://i.stack.imgur.com/9Qg7r.png)](https://i.stack.imgur.com/9Qg7r.png) ***   滚动时的垂直对齐问题。**** 

 ****默认情况下，在移动设备上运行的 TextInputs 使用 StageText（本机文本）进行输入。正如 Adob​​e**[在其在线文档中](https://help.adobe.com/archive/en_US/flex/mobileapps/developing_mobile_apps_flex_4.6.pdf#WS19f279b149e7481c-66c6406712f265ad38d-8000)**概述的那样，StageText 提供了几个优势，包括自动更正、软件键盘的自定义等。

**[bugbase ticket 3302441](https://tracker.adobe.com/#/view/AIR-3302441)**中描述了使用 StageText 的最大缺点。当用户滚动时，StageText 的定位会被破坏。文本字段出现在它们各自的 TextInputs 之外，或者更糟糕的是，出现在其他 TextInputs 之内。此缺陷的唯一解决方法是设计一个不允许滚动的 UI。显然，这对于手机和平板手机来说是非常困难的。

* * *

# [TextInputSkin](https://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/skins/mobile/TextInputSkin.html) (spark.skins.mobile)

*   在所有情况下都正确处理输入？**是的**[![](https://i.stack.imgur.com/KcZLh.png)](https://i.stack.imgur.com/KcZLh.png)
***   在所有情况下都正确显示？**不**[![](https://i.stack.imgur.com/9Qg7r.png)](https://i.stack.imgur.com/9Qg7r.png) ***   在某些 Android 版本（例如运行 Android 2.3 的 Nook）上插入随机字符。**** 

 ****该组件在内部使用**[StyleableTextField](https://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/supportClasses/StyleableTextField.html)**。它针对移动使用进行了优化。

当用户在某些 Android 版本（例如运行 Android 2.3 的 Nook、运行 Android 4.0 的 Kindle HD）上键入时，此组件会在 TextInput 中插入额外的任意字符。请参阅**[bugbase 票证 3547601](https://tracker.adobe.com/#/view/AIR-3547601)**。

如果您的应用程序仅本地化为英语（或基于拉丁语的语言）并且不需要支持较旧的 Android 版本，那么此组件可能适合您。

* * *

# [TextInputSkin](https://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/skins/spark/TextInputSkin.html) (spark.skins.spark)

*   在所有情况下都正确处理输入？**不**[![](https://i.stack.imgur.com/9Qg7r.png)](https://i.stack.imgur.com/9Qg7r.png) ***   不接受某些双字节字符（例如韩语）。
    *   在某些设备上不接受任何输入（例如运行 Android 4.0 的三星 Galaxy 10.1）。** 
***   在所有情况下都正确显示？**是的**[![](https://i.stack.imgur.com/KcZLh.png)](https://i.stack.imgur.com/KcZLh.png)**

 ****该组件在内部使用**[RichEditableText](https://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/RichEditableText.html)**。它没有针对移动使用进行优化。除此之外，它还展示了一些使其不适合使用的缺陷（如上所列）。

此组件无法正确处理某些双字节字符（在韩语等语言中）。这些字符似乎被插入到 TextInput 中（光标在进步，可见），但没有向用户呈现文本。（有可能使用嵌入字体解决此问题。）请参阅**[bugbase 票证 3547591](https://tracker.adobe.com/#/view/AIR-3547591)**。

在测试上面提到的第 3 项（某些设备上不接受输入）时，观察到了一件有趣的事情。键入几个字符后，如果用户将焦点切换到使用默认 StageText 的 TextInput，则至少一些丢失的字符将自动插入到新字段中。

* * *

# StageText + [TextInputSkin](https://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/skins/mobile/TextInputSkin.html) (spark.skins.mobile) 混合

*   在所有情况下都正确处理输入？**是的**[![](https://i.stack.imgur.com/KcZLh.png)](https://i.stack.imgur.com/KcZLh.png)
***   在所有情况下都正确显示？**不**[![](https://i.stack.imgur.com/9Qg7r.png)](https://i.stack.imgur.com/9Qg7r.png) ***   有时，软件键盘的“显示”动画会连续触发两次，造成不良的视觉效果。
    *   有时焦点处理很困难，并且可能导致 StageText-TextInput 在没有软件键盘的情况下显示，直到学习者再次触摸它。**** 

 ****这种方法将 StageText 的优点与 TextInputSkin (spark.skins.mobile) 的滚动功能相结合。总体思路是创建 1 个使用 StageText 的 TextInput 并将其分配到屏幕上的固定位置。默认情况下，此 TextInput 应隐藏。可以根据需要在舞台上创建和定位其他 TextInputs（使用 TextInputSkin）。当这些 TextInput 之一获得焦点时，应显示隐藏的代理 TextInput 并将焦点转移到它。将文本输入到代理项中时，更改处理程序应将文本复制到用户选择的 TextInput。当用户点击或点击以在其他地方设置焦点时，代理 TextInput 应该再次隐藏。

如果需要，我可以提供一个代码示例。这种方法有几个缺点（上面提到过），但它们可能是我的实现的错误。

* * *

# [StageWebView](https://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/StageWebView.html)

*   在所有情况下都正确处理输入？**是/否**[![](https://i.stack.imgur.com/9EgL0.png)](https://i.stack.imgur.com/9EgL0.png) ***   根据 的值，`<renderMode>`此`<fullscreen>`组件可能会为您正常工作。
    *   开始工作有点棘手。** 
***   在所有情况下都正确显示？**是的**[![](https://i.stack.imgur.com/KcZLh.png)](https://i.stack.imgur.com/KcZLh.png)**

 ****此方法涉及使用 StageWebView 在 AIR 应用程序内显示一个简单的 HTML 页面。HTML 页面包含`<input type="text">`使用 Android 的本机文本和软件键盘的对象。尽管在 HTML 页面和父 AIR 应用程序之间进行通信有点棘手，因为 StageWebView 不支持 Flash 到 JavaScript 的通信，就像**[ExternalInterface](https://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html)**相同的 Flash 到 JavaScript 通信。

## 从 JavaScript 到 Flash 的通信

从 JavaScript（或 HTML）到 ActionScript 的通信很困难，因为 StageWebView 不允许 ActionScript 添加回调。**[StageWebViewBridge](https://code.google.com/archive/p/stagewebviewbridge)**提供此功能已经有一段时间没有更新了，当我尝试它时，我无法使用 Flex 4.6 和 AIR 3.5 获取要显示的内容。

仍有一些方法可以使用[LocationChangeEvent](https://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/LocationChangeEvent.html)向 ActionScript 传达信息。这背后的想法是让 AIR 应用程序监听位置变化事件，然后解析传入`event.location`的信息。对于简单的链接，这很容易工作，但在涉及表单时事情变得更加复杂。在确定一种方法之前，我尝试了以下方法：

*   [![](https://i.stack.imgur.com/9Qg7r.png)](https://i.stack.imgur.com/9Qg7r.png)将 onclick 处理程序添加到表单提交按钮，该按钮设置`window.location.href`为包含 URL 编码的键/值对的字符串。**[由于bugbase 票证 3362483](https://bugbase.adobe.com/index.cfm?event=bug&id=3362483)**中描述的原因，此方法不起作用。
*   [![](https://i.stack.imgur.com/9Qg7r.png)](https://i.stack.imgur.com/9Qg7r.png)将 onclick 处理程序添加到表单提交按钮，动态修改表单目标以包含 URL 编码的键/值对，然后提交表单。此方法不起作用，因为在调用 form.submit() 时未调度 LocationChangeEvents。
*   [![](https://i.stack.imgur.com/KcZLh.png)](https://i.stack.imgur.com/KcZLh.png)将 onchange 处理程序添加到`<input type="text">`标签并修改`href`“提交”链接的属性以包含 URL 编码的键/值对。单击此链接时，将调用 ActionScript LocationChangeEvent 处理程序，您可以使用**[URLVariables](https://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLVariables.html)**类解析传入数据。

## 从 Flash 到 JavaScript 的通信

要与 JavaScript 通信（调用方法、传递参数），请使用**[StageWebView 的 loadURL 方法](https://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/StageWebView.html#loadURL())**，如下所示：

```
_stageWebView.loadURL( 'javascript:yourMethodName( "A string", true )' ); 
```

不幸的是 loadURL 方法有一个 void 返回类型（这意味着你不能用这种方式检索数据）。

## 其他困难

这种方法的最大缺点在**[bugbase 票证 3535948](https://tracker.adobe.com/#/view/AIR-3535948)**中进行了描述。如果您的 AIR 应用程序使用`<renderMode>direct</renderMode>`或`<fullscreen>true</fullscreen>`然后通过 StageWebView 输入的文本将无法使用。（响应会很迟缓。用户将无法选择或删除字符。）如果您的应用不需要这些标志中的任何一个，那么这条路线可能对您很有效。

全屏限制的一种解决方法是仅在您的应用程序需要使用 StageWebView 时禁用全屏模式。这可以使用**[StageDisplayState](https://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/StageDisplayState.html)**来完成，如下所示：

```
// Turn off fullscreen
stage.displayState = StageDisplayState.NORMAL;

// Turn on fullscreen
stage.displayState = StageDisplayState.FULL_SCREEN_INTERACTIVE; 
```

* * *

# 原生视图

*   在所有情况下都正确处理输入？[![](https://i.stack.imgur.com/KcZLh.png)](https://i.stack.imgur.com/KcZLh.png) **是的**
*   在所有情况下都正确显示？**是的**[![](https://i.stack.imgur.com/KcZLh.png)](https://i.stack.imgur.com/KcZLh.png)

 **剩下的最后一个选项（我知道）是编写一个本地扩展来显示文本输入并将数据返回到您的 AIR 应用程序。这可能是该线程中讨论的最安全（尽管最令人失望）的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-14T04:25:07.943

我们*可能*有一个至少适用于我们的场景的解决方案：http: [//blog.flexicious.com/post/Scrolling-Issues-With-TextInput-for-Flex-Air-Mobile-Native-StageText.aspx](http://blog.flexicious.com/post/Scrolling-Issues-With-TextInput-for-Flex-Air-Mobile-Native-StageText.aspx)**********************

# java - 单击超链接时将所选信息从 JSP 发送到 servlet

> ID：15840506
> 
> 赞同：1
> 
> 时间：2013-04-05T18:01:19.877
> 
> 标签：java, html, jsp, servlets, jstl

我正在使用显示“节日名称”列表的 JSP 页面。然后我想链接到一个点击页面，该页面将显示该节日的“个人资料页面”。如何将单击的链接发送到 JAVA SERVLET，以便我可以使用 SQL 和 Java 将所选信息发送到“配置文件页面”jsp。

```
<table border ="1">
        <tr>
            <td>Festival Name:</td>
            <td>Location:</td>
            <td>Start Date:</td>
            <td>End Date:</td>
            <td>URL:</td>
            <td>List of Trips to </td>
        </tr>
        <c:forEach items="${allFestivals}" var="festival">
        <tr>      
            <td>${festival.festivalName}</td>
            <td>${festival.location}</td>
            <td>${festival.startDate}</td>
            <td>${festival.endDate}</td>
            <td>${festival.URL}</td>
            <td><a href="festival_profile.jsp">View Your Festivals</a></td>
             ^i have the festivals ID that can be sent with this link in the jsp
        </tr>
        </c:forEach> 
```

我只需要知道如何将选择的“节日”ID 发送回 servlet，以便它可以生成配置文件 JSP。编辑：以及如何在 servlet 上捕获它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:06:48.760

使用链接

```
<a href="<c:url value="/servletpath"><c:param name="id" value="${festival.id}"/></c:url>">View Your Festivals</a> 
```

# php - 在 webroot 之外打开 php

> ID：15840512
> 
> 赞同：0
> 
> 时间：2013-04-05T18:01:33.393
> 
> 标签：php, mysql

我正在尝试编写一个独立的 Web 表单来将数据插入 MySQL。我不希望我的网络用户可以访问它。如何让它在我的浏览器中打开。它目前位于我的主文件夹中。文件:///home/user/file.php 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:04:07.183

您必须设置一个本地 LAMP，即安装 Apache 和 PHP（我假设 MySQL 已经安装）

# java - JavaFX ScrollPane 以编程方式移动视口 - 使内容居中

> ID：15840513
> 
> 赞同：8
> 
> 时间：2013-04-05T18:01:37.737
> 
> 标签：java, javafx-2, viewport, panning, scrollpane

我可以使用 setVvalue(double) 和 setHvalue(double) 方法在 JavaFX ScrollPane 中移动视口。我正在努力做的是根据其位置在滚动窗格的内容中将特定节点居​​中。我已经尝试了 localToScene() 和 boundsInParent() 的各种组合。我已经阅读（很多）并看到了这个例子

[如何滚动以使 ScrollPane 内容中的节点可见？](https://stackoverflow.com/questions/12837592/how-to-scroll-to-make-a-node-within-the-content-of-a-scrollpane-visible)

哪个很近，但不会使对象居中，只是使它们可见。拥有内置的鼠标平移非常棒，但我正在为程序化平移带来恶劣天气。

最终，我也需要能够进行缩放，所以我将实际形状放在一个组中，并将该组添加到滚动窗格内容中。我想我应该对组进行缩放，并且我需要能够围绕组的中心进行缩放，以便我们回到操作和识别当前的中心位置。任何可以提供的指针或示例将不胜感激。上面链接中的代码示例是一个很好的 SSCCE。

提前致谢，

安迪

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-05-07T12:49:25.883

我将尝试在没有代码的情况下解释这一点，因为我认为这里没有必要。

假设您的滚动窗格的*内容*有 height `h`，而视口的高度是`v`。如果`h = v`，那么内容将完全适合视口，并且您不需要滚动条。在这种情况下（使用不可移动的滚动条），要使元素居中，它需要位于滚动窗格内容的中心。您不能通过滚动将其移动到视口的中心。

现在考虑是(ie )`h`大小的两倍。在这种情况下，滚动窗格内容的上 1/4 和下 1/4 无法通过滚动居中。`v``h = 2v`

*（如果您绝对需要通过滚动来居中任何组件，您应该考虑填充您的内容窗格，但我们将在此处继续使用未填充的解决方案）*

当您考虑它时，您会意识到滚动条的可能滚动距离是`h - v`，并且您将通过设置`vvalue`为 1.0 来滚动该距离。

要使一个点居中`y`（这里的点 y 是滚动窗格内容窗格的坐标），您可以使用以下 vvalue：

```
vvalue = (y - 0.5 * v) / (h - v) 
```

此表达式的命名者是当点 y 在视口内居中时显示在视口顶部的 y 坐标。分母是总的可滚动距离。

**编辑：无论如何添加一些代码！**

```
public void centerNodeInScrollPane(ScrollPane scrollPane, Node node) {
    double h = scrollPane.getContent().getBoundsInLocal().getHeight();
    double y = (node.getBoundsInParent().getMaxY() + 
                node.getBoundsInParent().getMinY()) / 2.0;
    double v = scrollPane.getViewportBounds().getHeight();
    scrollPane.setVvalue(scrollPane.getVmax() * ((y - 0.5 * v) / (h - v)));
} 
```

*（请注意，这假设节点是滚动窗格内容窗格的直接子节点）*

希望这可以帮助！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-23T13:26:21.577

我知道，这有点晚了，但也许有人会觉得它有用。:)

至于居中，这不是一项艰巨的任务，只需要一点点数学知识。你需要两件事。ScrollPane 的全部内容的大小（可滚动区域的宽度和高度，不仅是带有滚动条的框架，而且就像没有滚动条一样完整）和 ScrollPane 内容内的居中对象的位置。

你会得到这样的内容大小：`scrollPane.getContent().getBoundsInLocal().getHeight() or .getWidth()`

和你的对象的位置：`node.getBoundsInParent().getMinY() or .getMinX()`- 对象的最小位置。你也可以得到它的高度和宽度。

然后根据这个公式计算你的中心位置并移动滚动条。

`double vScrollBarPosition = scrollPane.getVMax() * (yPositionOfCenter / heightOfScrollPaneContent)`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-06-02T19:51:04.773

这是一个关于如何将已旋转的图片居中的示例。该代码在 Scala 中，因此适用于 ScalaFX，但 JavaFX 和 Java 开发人员将能够阅读/使用它：

```
 def turnPic(angle:Int) {
    val virtualSurfaceMultiplier = 8.0;
    currentAngle = ( floor((currentAngle % 360) / 90) * 90 + angle + 360 ) % 360;
    imageView.rotate = currentAngle;
    val orientationSwitched = (currentAngle / 90) % 2 > 0;
    val width= scrollPane.getViewportBounds().getWidth();
    val height= scrollPane.getViewportBounds().getHeight();
    val viewPort = new Rectangle2D(0, 0, image.width.value, image.height.value);
    imageView.setViewport(viewPort);
    imageView.fitHeight.value = virtualSurfaceMultiplier * height;
    imageView.fitWidth.value = 0 //virtualSurfaceMultiplier * width;
    def centerV(picHeight:Double) {
      val node  = scrollPane.getContent();
      val totalHeight = scrollPane.getContent().getBoundsInLocal().getHeight();
      val offsetToCenter = (node.getBoundsInParent().getMaxY() + node.getBoundsInParent().getMinY()) / 2.0;
      val viewportWidth = scrollPane.getViewportBounds().getHeight();
      val res = (scrollPane.getVmax() * ((offsetToCenter - 0.5 * picHeight * zoomFactor) / (totalHeight - picHeight * zoomFactor)));
      scrollPane.setVvalue(res);
    }
    def centerH(picWidth:Double) {
      val node  = scrollPane.getContent();
      val totalWidth = scrollPane.getContent().getBoundsInLocal().getWidth();
      val offsetToCenter = (node.getBoundsInParent().getMaxX() + node.getBoundsInParent().getMinX()) / 2.0;
      val viewportWidth = scrollPane.getViewportBounds().getWidth();
      val res = (scrollPane.getHmax() * ((offsetToCenter - 0.5 * picWidth * zoomFactor) / (totalWidth - picWidth * zoomFactor)));
      scrollPane.setHvalue(res);
      System.err.println(s"trace centerH> $FILE:$LINE:" + " totalWidth:" + totalWidth + " offsetToCenter=" + offsetToCenter + " vWidth=" + viewportWidth + "res=" + res);
    }
    if (orientationSwitched) {
      zoomFactor = 1.0 / (virtualSurfaceMultiplier * image.width.value / image.height.value);
      centerH(height);
      centerV(width);
    }
    else
    {
      zoomFactor = 1.0 / virtualSurfaceMultiplier;
      centerH(width);
      centerV(height);
    }
    imageView.setScaleX(zoomFactor);
    imageView.setScaleY(zoomFactor);
  } 
```

# ios - 在 iOS 上使用 AFNetworking，在重定向中未获得 302 状态代码

> ID：15840519
> 
> 赞同：2
> 
> 时间：2013-04-05T18:02:01.457
> 
> 标签：ios, http, afnetworking

我在 iOS 上使用 AFNetworking 并尝试访问给我 302 状态代码的网页，重定向我，然后在重定向页面加载时返回 200。

但是，我无法在我的 iOS 应用程序中捕捉到这一点。我尝试添加 authenticationChallenge 块，但它没有被调用。completionBlock 正在获取重定向视图，但状态代码仅为 200。我在这里想念什么？当我收到 302 代码时，我需要发送登录详细信息。我的代码粘贴在下面：

```
 AFHTTPRequestOperation *uploadOperation = [[AFHTTPRequestOperation alloc] initWithRequest:myRequest];
[uploadOperation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id response) {
    NSLog(@"Request: %@", [operation.request description]);
    NSLog(@"CODE: %i",operation.response.statusCode);
    NSLog(@"Response: %@", [[NSString alloc] initWithData:response encoding:NSUTF8StringEncoding]);
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    self.statusLabel.text = @"upload failed";
}];    

[uploadOperation setAuthenticationChallengeBlock:^(NSURLConnection *connection, NSURLAuthenticationChallenge *challenge) {
    NSLog(@"pls authenticate");
}]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T19:21:19.543

知道了。我设置了错误的块。在 @login_required 装饰器的情况下，身份验证质询不是 Django 应用程序发送的。这是需要设置的redirectResponse！

```
[uploadOperation setRedirectResponseBlock:^NSURLRequest *(NSURLConnection *connection, NSURLRequest *request, NSURLResponse *redirectResponse) {
    NSLog(@"pls authenticate");
    return request;
}]; 
```

# javascript - 除非单击，否则 JqueryUI Google Map 不会调整大小

> ID：15840520
> 
> 赞同：0
> 
> 时间：2013-04-05T18:02:04.923
> 
> 标签：javascript, jquery-ui, google-maps-api-3, jquery-ui-tabs

我编写了一个单击函数，可以在单击地图时调整地图的大小并使其居中。

有没有办法让功能在选项卡加载时自动运行？这就是功能。

```
 mapResize = function () {
                var mapFirstClick = false;
                var center = new google.maps.LatLng(32.565243, -97.130531);
                $("#tabs-4").click(function() {
                    mapFirstClick || setTimeout(function() {
                        google.maps.event.trigger(map, 'resize');
                        mapFirstClick = true;
                        map.setCenter(center);
                    }, 250);
                });
            }, 
```

[您可以通过单击位置选项卡在http://l2technotes.dyndns.org](http://l2technotes.dyndns.org)查看它的作用，地图无法正确加载，但如果您单击地图，它会正确调整大小并重新定位，这告诉我单击功能正在工作。

与往常一样，我们将不胜感激任何指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:42:46.963

首先：您使用的是 jqueryUI 1.10 。您在网络上找到的大多数资源都是指 1.8，但有一些重大变化，例如在 1.10 中不再有显示事件，请`activate`改用：

```
 $('#tabs').tabs({
        activate: function (event, ui) {
                    if (ui.newPanel.attr('id') =='tabs-4') {
                      ui.newPanel.click();
                    }
                  }
    }); 
```

您可以在此处找到 1.10 的文档：http: [//api.jqueryui.com/1.10/tabs/](http://api.jqueryui.com/1.10/tabs/)

# php - 使用 Ajax 将 JSON 数据从 JavaScript 传递到 PHP

> ID：15840522
> 
> 赞同：0
> 
> 时间：2013-04-05T18:02:16.227
> 
> 标签：php, javascript, ajax, json, post

我有以下JS：

```
window.onload = function() {
'use strict';
var ajax = getXMLHttpRequestObject();

ajax.onreadystatechange = function() {
    if ( ajax.readyState == 4 ) {
        if ( (ajax.status >= 200 && ajax.status < 300) || (ajax.status == 304) ) {
            var data = JSON.parse(ajax.responseText);
            var file = '';
            file += 'Original: ' + data['org'].file + '<br>';
            file += 'Processed: ' + data['pre'].file + '<br>';
            document.getElementById('output').innerHTML = file; 
        } else {
            document.getElementById('output').innerHTML = 'Error: ' + ajax.statusText;
        }
    }
};

document.getElementById('btn').onclick = function() {
    ajax.open('POST', 'resources/test.json', true);
    ajax.setRequestHeader('Content-Type', 'application/json');
    ajax.send(null);
};
}; 
```

我想从

> 数据['org'].file

和

> 数据['pre'].file

到 PHP 并让它使用 POST 方法回显该值。请不要使用 jQuery 解决方案，这需要严格使用 JavaScript。

像这样的东西：

```
<?php $data = $_POST['the_data']; echo $data; ?> 
```

这是来自 test.json 的 JSON：

```
{
"org": {
    "file": "css/original.css"
},
"pre": {
    "file": "css/preprocessed.css"
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:16:48.537

看看[JSON Stringify](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)你可以用它来编码你的数据。

然后在您编码后，您可以将其发送到您需要的任何地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T18:11:38.717

If you want a PHP script to echo JSON data, it's as simple as this:

```
<?
    $json = file_get_contents('php://input');
    //...
    echo $json;
?> 
```

To post it from Javascript, I reccomend reading [this](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest). There's a reason so many people use jQuery...

# php - Netbeans 中的“修复名称”是什么？

> ID：15840523
> 
> 赞同：6
> 
> 时间：2013-04-05T18:02:16.973
> 
> 标签：php, netbeans

我正在使用 Netbeans 开发一个网站，有时会出现一条通知，上面写着“Fix name to ...”但我不明白“Fix name”的含义是什么或它的作用是什么......

谁能给我解释一下它的含义，好吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-07T17:33:08.640

如果您的应用程序名称与 netbeans.conf 文件中的名称不同，您将收到此错误。修复它的方法是打开 netbeans.conf 文件并将名称更改为应用程序的当前名称。

# javascript - 在加载 DOM 之前填充元标记

> ID：15840524
> 
> 赞同：0
> 
> 时间：2013-04-05T18:02:19.113
> 
> 标签：javascript, jquery, html

所以这是一个奇怪的问题——但我必须解决这个问题。

我根据表单是否存在来填充元标记。我在 .ready() 函数中使用了表单 ID，因为 jQuery 在 DOM 中位于它之前（在头部）。

这是一个分析脚本，脚本的事件在页脚中。该脚本在填充标签之前触发，并且没有发送数据。不幸的是，我无法修改此脚本。

是否可以在表单的 .ready() 事件上暂停 DOM 加载？

```
var wtURL = window.location.pathname;
var wtURLParse = wtURL.split('/');
var appType = '1';

if (wtURLParse[3] == 'app') {
    var appType = '2';
}
else {
    var appType = '1'
}

document.write('<META name="placeholder">');

$('#createUsername').ready(function(e) {
    e.preventDefault;
    var isForm = $('#createUsername').length;
console.log(isForm);

    if ( $('#createUsername').length == 1 ) {
        $('META[name="placeholder"]').after('<META NAME="junk" CONTENT="'+ appType +' stuff">\n<META NAME="junk2" CONTENT="stuff2">');
        $('META[name="placeholder"]').remove();
    }
    else {
        if ( $('#createUsername').length == 0 ) {
            $('META[name="placeholder"]').after('<META NAME="junk" CONTENT="'+ appType +' stuff">\n<META NAME="junk2" CONTENT="stuff2">\n<META NAME="junk3" CONTENT="stuff3">');
            $('META[name="placeholder"]').remove();
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:08:36.207

这似乎是个坏主意。

`<meta>`标签旨在进入文档的头部。JavaScript 必须在文档头部同步执行才能`document.write`正确放置标签。这种同步执行会阻塞页面的呈现，并且对性能很不利。

[元标记 - Google 网站站长工具帮助](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=79812)

# c# - 如果列表视图为空，则显示按钮

> ID：15840525
> 
> 赞同：0
> 
> 时间：2013-04-05T18:02:25.677
> 
> 标签：c#, asp.net, sql

我有一个从 sql 数据源检索数据的列表视图。我试图使两个按钮（是和否）和列表视图外部的标签仅在列表视图不为空时可见。过程是：一个人在文本框中输入信息并点击检索按钮，如果输入的数据存在于数据库中，则列表视图显示某些信息。我有以下代码：

```
protected void btnExistingRetrive_Click(object sender, EventArgs e)
{

     if (lstExisting.Items.Count>0 )
    {
       lblIsITYou.Visible = true;
       btnYes.Visible = true;
       btnNo.Visible = true;
    }

} 
```

默认情况下，按钮和标签是不可见的。问题是当我单击检索按钮时，它会显示包含信息的列表视图，但标签仍然不可见。只有当我双击检索按钮时它们才可见。请告诉我我的错误是什么？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T18:04:11.827

使用[ListView EmptyDataTemplate](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.emptydatatemplate.aspx)

```
 <asp:ListView ID="ContactsListView" 
    DataSourceID="ContactsDataSource" 
    runat="server">
    <LayoutTemplate>
      <table runat="server" id="tblProducts">
        <tr runat="server" id="itemPlaceholder" />
      </table>
     </LayoutTemplate>
     <ItemTemplate>
        <tr runat="server">
          <td>
            <asp:Label ID="FirstNameLabel" runat="Server" Text='<%#Eval("FirstName") %>' />
          </td>
          <td>
            <asp:Label ID="LastNameLabel" runat="Server" Text='<%#Eval("LastName") %>' />
          </td>
        </tr>
      </ItemTemplate>
      <EmptyDataTemplate>
          <table class="emptyTable" cellpadding="5" cellspacing="5">
            <tr>
              <td>
                <asp:Image ID="NoDataImage"
                  ImageUrl="~/Images/NoDataImage.jpg" 
                  runat="server"/>
              </td>
              <td>
                No records available.
              </td>
            </tr>
          </table>
      </EmptyDataTemplate>
  </asp:ListView> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T18:08:49.353

你在检查项目计数之前绑定列表视图吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T18:09:03.943

在回发而不是在事件中执行此操作。在您的 Page_Load 中执行以下操作：

```
protected void Page_Load(object sender, EventArgs e)
{
    bool visible = (lstExisting.Items.Count > 0); // assuming it's never null
    lblIsITYou.Visible = visible;
    btnYes.Visible = visible;
    btnNo.Visible = visible;
} 
```

如果上述情况造成并发症，那么按照我首先说的回发：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (IsPostBack)
    {
        bool visible = (lstExisting.Items.Count > 0); // assuming it's never null
        lblIsITYou.Visible = visible;
        btnYes.Visible = visible;
        btnNo.Visible = visible;
    }
} 
```

# checkbox - C1.Win.C1FlexGrid 网格的标题（固定）行中的复选框

> ID：15840527
> 
> 赞同：1
> 
> 时间：2013-04-05T18:02:34.520
> 
> 标签：checkbox, componentone, c1flexgrid

我的问题是“有没有办法在 C1.Win.C1FlexGrid 的固定行单元格内使用 CheckBox？”。

我有一个带有两个固定行的 C1FlexGrid。（重要的是在这里提到我使用的是 C1.Win.C1FlexGrid 网格而不是 WPF 或 SilverLight 版本）

我拥有的第一个固定行像往常一样用于标题。第二个虽然是定制的以执行其他一些任务，但除了一项我无法完成的任务外，一切都运行良好。我需要在第二个固定行的单元格的一个单元格内使用 CheckBox（就像网格正常行中的任何布尔单元格一样），因为我想使用此 CheckBox 来选中/取消选中同一列中的所有复选框。

当然，将列数据类型设置为 bool 不会为固定行完成这项工作。将单元格的编辑器设置为 CheckBox 也不行，因为编辑器不会一直可见，只有在选择单元格时才可见。此外，根据我的研究，有一些线程正在讨论的 CellFactory 属性可用于完成这项工作，但 CellFactory 未在 C1.Win.C1FlexGrid 类中实现，而仅在 WPF、SilverLight 和 Phone 版本的网格中实现.

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-15T08:56:06.977

使用 Boolean DataType 创建一个新的 CellStyle 并将其设置为您需要的任何 Cell。这是实现它的代码，假设单元格位于第 1 行和第 1 列：

```
//Implement 2 fixed rows
c1FlexGrid1.Rows.Fixed = 2;
//create and set a new style to the reqd. cell
var cs = c1FlexGrid1.Styles.Add("Boolean");
//set DataType
cs.DataType = typeof(Boolean);
//Set any alignment
cs.ImageAlign = C1.Win.C1FlexGrid.ImageAlignEnum.CenterCenter;
c1FlexGrid1.SetCellStyle(1, 1, cs); 
```

谢谢， 里查

# android - 按钮 drawableBottom Nexus 7 和 Galaxy Tab 2

> ID：15840528
> 
> 赞同：0
> 
> 时间：2013-04-05T18:02:37.327
> 
> 标签：android, android-drawable

我正在将针对 Galaxy Tab 2 (10".1) 屏幕尺寸编写的应用程序改编为 Nexus 7 (7")。按照 stackoverflow 中的建议，我为所有密度创建了不同的图像尺寸`(l|m|h|xh)dpi`，还创建了一个特定`layout-sw600dp`文件夹，其中包含我为 7 英寸屏幕修改的布局。

[编辑]

我添加 `<supports-screens android:anyDensity="true" android:largeScreens="true" android:normalScreens="true" android:resizeable="true" android:smallScreens="true" />` 到我的`Androidmanifest`文件中。

[/编辑]

尽管进行了所有这些修改，但我仍在努力在两个设备之间正确缩放`drawableBottom`（以及上、左、右） 。`Buttons`

渲染图像的物理尺寸是相同的。因此，Nexus 正在使图标与 Galaxy 一样大（反之亦然）。

据我了解，这两款设备虽然物理尺寸不同，但它们共享相同的像素密度 (xhdpi)，这使得 Nexus 从 xhdpi 文件夹中拾取。我错过了什么重要的东西吗？

我应该如何调整我的 drawableBottoms？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:07:28.770

您是否确定该应用程序专为高密度显示器而设计？尝试在获得权限后将其添加到您的清单中：

```
<supports-screens android:largeScreens="true"
                  android:normalScreens="true"
                  android:smallScreens="true"
                  android:anyDensity="true"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T00:34:12.860

好的。

可能这不是预期的“THE”解决方案。但它立即对我有用，并且考虑到我必须适应的应用程序的大小，只需付出*最小的努力。*

以下解决方案基本上可以很好地工作，但（可能）仅适用于这种特定情况，因为 Galaxy Tab 2 和 Nexus 7 共享相同的分辨率。

我如何在几乎没有工作的情况下修复它：

1.  不要创建较小分辨率的图像（您并不真的需要它），除非您要在许多其他设备上安装（或已经安装）您的应用程序。
2.  创建两个值文件夹。一个用于 Galaxy Tab 2 (= xlarge)，另一个用于 Nexus 7 (= large)。修饰符是屏幕的大小。
3.  在每个文件夹中放置一个`dimen.xml`文件，您将分别填写该文件。

对于 Galaxy Tab 2：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
[...]
<dimen name="s25sp">25sp</dimen>
<dimen name="s30sp">30sp</dimen>
<dimen name="s35sp">35sp</dimen>
[...]
<dimen name="s25dp">25dp</dimen>
<dimen name="s30dp">30dp</dimen>
<dimen name="s35dp">35dp</dimen>
[...]
</resources> 
```

对于 Nexus 7：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
[...]
<dimen name="s25sp">17sp</dimen>
<dimen name="s30sp">21sp</dimen>
<dimen name="s35sp">24sp</dimen>
[...]
<dimen name="s25dp">17dp</dimen>
<dimen name="s30dp">21dp</dimen>
<dimen name="s35dp">24dp</dimen>
[...]
</resources> 
```

Nexus 7 的每个值的获取方式如下： Galaxy_value/10.1*7

1.  之后，您必须在`@dimen/s[0-9]*dp`要使用该特定维度时使用。

PS：如果你有一个大型应用程序已经格式化了许多布局，你可以使用这个`PERL`脚本将每个 [0-9]*dp 和 [0-9]*sp`@dimen/s[0-9]*dp` `@dimen/s[0-9]*sp`自动转换为。这里是：

```
 #!/usr/bin/perl

   $filename = $ARGV[0];
   open (FILE, $filename);

   while (<FILE>) {
      chomp;

      if ( $_ =~ /\"[0-9]*(di?p|sp)\"/) {

         my $pre = $`;
         my $mat = $&;
         my $pos = $';

         $mat =~ s/["]+//g;

         print "$pre\"\@dimen/s$mat\"$pos\n";
      }  elsif ( ($_ !~ /\"[0-9]*dp\"/) && ($_ !~ /\"[0-9]*sp\"/) ) {      
         print "$_\n";
      }
   }

   close (FILE);
   exit; 
```

# sql - SQLite - 实数列中的每一行仅包含一个 R

> ID：15840530
> 
> 赞同：0
> 
> 时间：2013-04-05T18:02:47.827
> 
> 标签：sql, sqlite

我有一个 SQLite 数据库，其中表中的一列（REAL 类型）在每一行中都包含一个 R。我以前从未见过这个，它有点破坏读取数据库的方法，因为它期望一个真正的价值。

有人见过这些 R 值吗？

如果我的描述还不够，下面的图片应该可以清楚地说明。非常感谢帮助！谢谢！

![在此处输入图像描述](https://i.stack.imgur.com/wSfPD.png)

# jquery - jquery：在每个单击事件上追加并增加输入名称

> ID：15840533
> 
> 赞同：2
> 
> 时间：2013-04-05T18:03:07.990
> 
> 标签：jquery

每次单击按钮时，我都需要将 name='0fName' 增加一个，以便 php 脚本看到一个唯一的名称并且不会覆盖前一项。

```
$(document).ready(function(){
    $('#addMember').click(function() {
        for (var i = 0; i <= 6; i++); 
        console.log("addMember was called");
        $("#addfamMember").append("<input type='text' name='0fName'>");
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T18:06:10.147

添加计数器：

```
$(document).ready(function(){
var count=0;
    $('#addMember').click(function() {
        console.log("addMember was called");
        $("#addfamMember").append("<input type='text' name='" + count + "fName'>");
        count++;
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T18:11:55.173

Another approach could be changing a name attribute to `fName[]`:

```
$('#addMember').click(function () {
    $("#addfamMember").append("<input type='text' name='fName[]'>");
    return false;
}); 
```

In this case data will be sent as `fName` array which may be more convenient to deal with than with a bunch of separate parameters.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T18:17:13.833

`.index()`也会这样做：

```
$('#addMember').click(function() {
    var idx = $(':input:last').index();
    $("#addfamMember").append("<input type='text' name='" + idx + "fName'>");
    return false;
}); 
```

### [小提琴](http://jsfiddle.net/tTQL9/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T18:05:35.350

就像 epascarello 说的，添加一个计数器：

```
$(document).ready(function(){

var counter = 0;

$('#addMember').click(function() {
    console.log("addMember was called");
    $("#addfamMember").append("<input type='text' name='" + counter + "fName'>");

    counter++;
    return false;
}); 
```

# android - 在现有按钮上方的相对布局中添加动态表格布局

> ID：15840534
> 
> 赞同：1
> 
> 时间：2013-04-05T18:03:08.540
> 
> 标签：android, button, dynamic, android-relativelayout, tablelayout

我正在尝试在 relativelayout 中添加一个 tablelayout，但我有一些问题将这个 tablelayout 放在现有按钮之上，我只能在它下面。

XML

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/main"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:gravity="center_horizontal"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
android:stretchColumns="0,1"
tools:context=".MainActivity" >

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"       
    android:gravity="center_horizontal"
    android:text="Button" /> 
```

lp.addRule *(RelativeLayout.ABOVE, idx);* 不工作

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // get the size of the screen to set the size of the buttons according
    // to the level
    Display display = getWindowManager().getDefaultDisplay();
    Point size = new Point();
    display.getSize(size);
    int level = 3;
    int width = size.x - (size.x / level);
    int btsize = width / level;

    // Get the main Layout
    RelativeLayout rLayout = (RelativeLayout) findViewById(R.id.main);      
    //
    TableLayout tLayout = new TableLayout(this);

    int id = 0;
    for (int i = 0; i < level; i++) {
        // Create the TableRow
        TableRow tRow = new TableRow(this);

        for (int j = 0; j < level; j++) {

            id++;
            Button bt = new Button(this);
            bt.setId(id);
            bt.setWidth(btsize);
            bt.setHeight(btsize);
            bt.setMinimumWidth(0);
            bt.setMinimumHeight(0);
            tRow.addView(bt); // add button into the row
        }
        tLayout.addView(tRow);// add row into the table
    }

    RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(
            RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
    int idx = findViewById(R.id.button1).getId();
    lp.addRule(RelativeLayout.ABOVE, idx);
    rLayout.addView(tLayout,lp);// add table into the relativelayout

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:25:02.030

你可以试试这个……把这段代码放在你的 oncreate() 方法中

```
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

 relay = (RelativeLayout)findViewById(R.id.rlayout);
 LayoutParams layoutprams = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);

TableLayout table=new TableLayout(this);
relay.addView(table); 
```

# c# - 鼠标移动时连续获取鼠标坐标 onmousedown

> ID：15840538
> 
> 赞同：2
> 
> 时间：2013-04-05T18:03:22.107
> 
> 标签：c#, winforms

当鼠标向下和向上时，我可以获得鼠标坐标

```
 private void panel2_MouseDown(object sender, MouseEventArgs e)
{
    mouseClickedX = e.X;
    mouseClickedY = e.Y;
}

   private void panel2_MouseUp(object sender, MouseEventArgs e)
{
    mouseReleaseX = e.X;
    mouseReleaseY = e.Y;
} 
```

但是当鼠标按下并移动直到鼠标升起时，我需要连续的鼠标坐标。仅当鼠标移动时我不需要坐标，但是当鼠标按下并移动时我需要坐标。怎么做？

**编辑：**

```
 private void panel2_MouseMove(object sender, MouseEventArgs e)
        {
            while (isDragging) {
                mouseMoveX = e.X;
                mouseMoveY = e.Y;
                label1.Text = mouseMoveX.ToString();
                label2.Text = mouseMoveY.ToString();
            }
        } 
```

我正在使用 isDragging true 或 false onmosueup 和 down 但这只是挂起应用程序。我应该使用计时器还是线程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T18:04:10.333

您需要处理`MouseMove`并检查鼠标是否向下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T18:17:09.880

你应该做几件事：

1.  向您的班级添加一个名为的私有布尔字段`bool isDragging`
2.  在 MouseDown 处理程序中，设置`isDragging = true`和`this.Capture = true`
3.  在 MouseUp 处理程序中，设置`isDragging = false`和`this.Capture = false`
4.  添加一个 MouseMove 处理程序。在其中，检查`if (isDragging)`，如果它是真的，按照你的意愿作出回应。您的 MouseMove 处理程序将提供当前鼠标坐标。

使用[`Capture`](http://msdn.microsoft.com/en-gb/library/system.windows.forms.control.capture.aspx)很重要，因为否则您可能会丢失 MouseMove 和 MouseUp 消息。

# ruby-on-rails - 在创建时从嵌入式文档访问父级（Mongoid）

> ID：15840540
> 
> 赞同：3
> 
> 时间：2013-04-05T18:03:26.987
> 
> 标签：ruby-on-rails, ruby, activerecord, mongoid

此技巧适用于“has_many”关系，但适用于“embeds_many”。有任何想法吗？

```
class Country
    include Mongoid::Document

    field :name, type: String
    embeds_many :cities  
end

class City
    include Mongoid::Document

    field :name, type: String
    field :full_name, type: String, default: ->{ "#{name}, #{country.name}" }
    embedded_in :country
end

1.9.3p392 :025 > c = Country.find_or_create_by(name: 'foo')
 => #<Country _id: foo, name: "foo"> 

1.9.3p392 :026 > c.cities.find_or_create_by(name: 'bar')
NoMethodError: undefined method `city' for nil:NilClass 
```

因此，它在“field :full_name, type: String, default: ->{ "#{name}, #{country.name}" }" 行失败，因为当时国家尚未定义

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T04:05:32.870

你需要先检查`country`，然后它会返回`country.name`

`field :full_name, type: String, default: ->{ "#{name}, " << country.name if country }`

我无法让它与字符串插值一起使用，但附加工作（将 country.name 连接到 str）

# iphone - iOS：更改渲染缓冲区后 glCheckFramebufferStatus 返回 GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT_OES

> ID：15840542
> 
> 赞同：1
> 
> 时间：2013-04-05T18:03:31.697
> 
> 标签：iphone, ios, objective-c, opengl-es, render

我正在制作一个绘画应用程序。我想更改延音以添加重做和撤消功能。但是渲染后我无法制作完整的帧缓冲区。

```
CAEAGLLayer* pGLLayer = ( CAEAGLLayer* )self.layer;
pGLLayer.opaque = YES;
pGLLayer.drawableProperties = [ NSDictionary dictionaryWithObjectsAndKeys:[ NSNumber numberWithBool:YES ],
                                                                 kEAGLDrawablePropertyRetainedBacking,
                                                                 kEAGLColorFormatRGBA8,
                                                                 kEAGLDrawablePropertyColorFormat,
                                                                                                                                     nil ];     
mpGLContext = [ [EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES1 ];
[ EAGLContext setCurrentContext:mpGLContext ];
glGenFramebuffers( 1, &FrameBuffer );
glBindFramebuffer( GL_FRAMEBUFFER, FrameBuffer );   
glGenRenderbuffers( 1, &firstColorBuffer );
glBindRenderbuffer( GL_RENDERBUFFER, firstColorBuffer );
[ mpGLContext renderbufferStorage:GL_RENDERBUFFER fromDrawable:( CAEAGLLayer* )self.layer ];
glFramebufferRenderbuffer( GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_RENDERBUFFER, firstColorBuffer );
glOrthof( 0.0f, 320.0f, 480.0f, 0.0f, 0.5f, -0.5f );
glViewport( 0, 0, 320, 480 );

    // here status is GL_FRAMEBUFFER_COMPLETE
    GLenum status = glCheckFramebufferStatus( GL_FRAMEBUFFER );

/** render function  **/
glGenRenderbuffers( 1, &secondColorBuffer );
glBindRenderbuffer( GL_RENDERBUFFER, secondColorBuffer );
[ mpGLContext renderbufferStorage:GL_RENDERBUFFER fromDrawable:( CAEAGLLayer* )self.layer ];
glFramebufferRenderbuffer( GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_RENDERBUFFER, firstColorBuffer );

// here status is GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT_OES
GLenum status = glCheckFramebufferStatus( GL_FRAMEBUFFER ); 
```

glCheckFramebufferStatus 返回 GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT_OES。但是我绑定了渲染缓冲区。所以有一个framebuffer的附件。我应该在这段代码中修复什么来制作完整的帧缓冲区。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:49:22.847

尝试更换通话后`/** render function **/`

```
glFramebufferRenderbuffer( GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_RENDERBUFFER, firstColorBuffer ); 
```

和

```
glFramebufferRenderbuffer( GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_RENDERBUFFER, secondColorBuffer ); 
```

您要附加`firstColorBuffer`两次，根据[文档](http://www.khronos.org/opengles/sdk/docs/man/xhtml/glFramebufferRenderbuffer.xml)，最终附件损坏：

> 当前绑定的帧缓冲区对象的*附件*逻辑缓冲区的任何先前附件都被破坏。

# sql-server - SQL Server Profiler 突然说加密文本

> ID：15840543
> 
> 赞同：3
> 
> 时间：2013-04-05T18:03:39.893
> 
> 标签：sql-server, stored-procedures, profiler

最近我注意到我们试图分析的存储过程未能出现在分析输出中。

添加 SP:StmtStarting 和 SP:StmtCompleted 事件后，我注意到 TextData 报告为

```
-- Encrypted text 
```

..但存储过程未加密。

这只是最近才开始发生的——我们曾经完美地分析过这个 SP，但我不知道发生了什么变化。

任何建议将不胜感激。

更新：SP 绝对没有加密。我在盒子上创建了新的 SP，我看到 SP:BatchStarting 事件带有新的 SP 的名称。对于旧的 SP，我看不到 BatchStarting 事件，但我确实看到了 SP 中的语句正在执行。

但是我需要查看调用 SP 的参数值，因为它们是表类型。最初我可以看到在调用 SP 之前实例化和填充表类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T23:39:51.500

所以我想出了这一点，以防有人发现它有用。

我有这个存储过程的表类型参数。其中一个参数传递了很多数据（即一个具有 >5000 行的 C# DataTable）。如果没有这个数量的数据，存储的过程分析得很好。

我想必须有一些截止点，Profiler 没有显示所有传入的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T18:17:22.520

有人更改了存储过程并添加了“WITH ENCRYPTION”提示，这将导致此行为。更改存储过程并删除该提示，您将再次开始看到 proc 的文本。

还要注意，如果您没有原始代码，您将无法解密 proc 的文本以发出 ALTER 语句，因此希望您能方便使用。

这是此选项的一个不错的选择：[隐藏 SQL Server 代码的选项](http://www.mssqltips.com/sqlservertip/1828/options-for-hiding-sql-server-code/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-19T20:32:35.243

将跟踪属性从默认值移动`OnlySP(<your database here>)(user,default)`到`TSQL`或`TSQL_Replay`显示为我使用的 SQL，... 转到`File|Properties...`并更改 [使用模板：] 下拉组合框。[![SQL Server Profiler|跟踪属性对话框](https://i.stack.imgur.com/XR0dV.png)](https://i.stack.imgur.com/XR0dV.png)

# hash - 为什么 Gravatar 要求您对电子邮件进行哈希处理？

> ID：15840544
> 
> 赞同：1
> 
> 时间：2013-04-05T18:03:39.810
> 
> 标签：hash, gravatar

我没有技术背景，所以我假设对此有一个简单的答案：

为什么 Gravatar 要求您在向他们的系统发送请求之前创建电子邮件地址的哈希值？是否有技术（或社会）理由不只使用电子邮件地址？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T18:11:58.280

这是为了防止将电子邮件地址暴露给收割机。如果在头像 URL 中使用原始电子邮件地址，垃圾邮件发送者通过使用 Gravatar 抓取任何论坛的 HTML/DOM 来获取这些电子邮件地址以用于其邪恶目的将是一项简单的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-20T01:52:43.057

有两个原因。

**原因一：**

当你调用 gravatar 时，url 如下所示：

`https://www.gravatar.com/avatar/37dj383ks?params=blah`

这意味着，在博客或互联网论坛上，作为访客或登录用户阅读使用 gravatar 图像的评论，html 源代码如下所示：

`<img src='https://www.gravatar.com/avatar/37dj383ks?params=blah'>`

如果它们没有经过哈希处理，您网站的***公共***HTML 源代码将如下所示：

```
<img src='https://www.gravatar.com/avatar/  bob_smith@example.com      ?params=blah'>
<img src='https://www.gravatar.com/avatar/  susan_suzanna@example.com  ?params=blah'>
<img src='https://www.gravatar.com/avatar/  jason123@example.com       ?params=blah'>
<img src='https://www.gravatar.com/avatar/  francisbakery@example.com  ?params=blah'> 
```

任何使用 gravatar 的网站都会*自动**公开*泄露他们自己用户的每一个电子邮件地址。

**原因2：**

第二个原因是，任何使用 gravatar 的网站都会*自动*泄露**到 gravatar**用户的电子邮件地址。

如果我在一个网站上注册，比如 Stack Overflow，我给 Stack Overflow 我的电子邮件地址，我不希望 Stack Overflow 将我的个人电子邮件地址发送给像 Gravatar 这样的其他公司。

但是，如果我已经给 Gravatar 提供了我的电子邮件地址并设置了个人资料图片，那么我电子邮件的哈希值就是 Gravatar 和 Stack Overflow 都知道的共享哈希值。Stack Overflow 不必信任 Gravatar。Gravatar 不必信任 Stack Overflow。但是通过简单地提供电子邮件的单向哈希，两者都不必实际分发任何用户的敏感信息。

# c# - Excel.Worksheet.Cells[row, column] 的奇怪行为

> ID：15840547
> 
> 赞同：4
> 
> 时间：2013-04-05T18:03:41.847
> 
> 标签：c#, visual-studio-2008, .net-3.5, vsto, excel-2010

我有以下方法：

```
 public static object getValue(Excel.Worksheet sheet, int row, int col)
    {
        Excel.Range r = sheet.Cells[row, col] as Excel.Range;
        //I've also tried using sheet.get_Range(cell, cell); here, with the same result

        if (r.Row != row || r.Column != col) 
        {   
            //Why does this debug statement sometimes print?
            Debug.Print("Tried to read (" + row.ToString() + ", " + col.ToString() + ") but got (" + r.Row.ToString() + ", " + r.Column.ToString() + ")");
        }

        return r.Value2;
    } 
```

根据我对 Excel.Worksheet.Cells[row, column] 的理解，我的代码不应该进入 if 语句。但是，当我重复调用 getValue 以读取多个单元格时，它返回的范围的行和列经常与我调用 Excel.Worksheet.Cells 的行和列不同。

示例输出：“尝试读取 (19, 1) 但得到 (56, 5)”

此外，如果我中断 if 语句，然后倒回我的执行点并再次运行 Excel.Worksheet.Cells，我会得到正确的范围。

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:17:02.313

这不是您直接问题的答案，但可能会解决问题。

是否`getValue`处于紧密循环中？如果是这样，那么我会以不同的方式处理它。由于访问`Cells`和`Value2`是 COM 调用，它们比普通数组访问器慢。如果你有一个特定的范围，你正在循环，我会在内存中获取该范围的值数组并直接访问该*数组**，*而不是遍历*单元格*。

例如，而不是

```
for(int r = 1; r <= 10; r++)
    for(int c = 1; c <= 20; c++)    
        double val = sheet.Cells[r,c]; 
```

做

```
object[,] values = sheet.Range("A1:J20").Value
for(int r = 1; r <= 10; r++)
    for(int c = 1; c <= 20; c++)    
        double val = values[r,c]; 
```

这*可以*通过从紧密循环中删除 COM 访问并消除任何给您带来奇怪结果的问题来解决您的问题。

# php - 在 PHP 中使用带有变量的 like 子句

> ID：15840548
> 
> 赞同：-2
> 
> 时间：2013-04-05T18:03:42.573
> 
> 标签：php, mysql

我有一个用变量动态构造的查询。我希望我的所有条件也有类似的声明。

我的代码是：

```
$where .= " AND name=" . "'" . $name . "'"; 
```

我想使用：

```
$where .= " AND name Like "%'.$name.'%"; 
```

但我不确定如何构建它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:13:27.010

It's looks like you are on the right track. Like this...

```
$where .= " AND name LIKE '%" . $name . "%'"; 
```

But, when adding fields to a string, I find is easier to use the php [sprintf()](http://php.net/sprintf) function. As an example:

```
$where = sprintf("SELECT * FROM Users WHERE name LIKE '%s' AND status='%s'",
    "%" . mysql_real_escape_string($name) . "%",
    "active"
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T18:04:48.187

你可以简单地做

```
$where .= " AND name Like '%".$name."'%"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T18:04:56.363

```
$where .= " AND name Like '%$name%'"; 
```

或者

```
$where .= ' AND name Like "%'.$name.'%"'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T18:05:07.240

像这样 ：

```
$where .= " AND name LIKE '%".mysql_real_escape_string($name)."%'"; 
```

# actionscript-3 - 拖放 AS3 - 简单捕捉到原始位置

> ID：15840549
> 
> 赞同：0
> 
> 时间：2013-04-05T18:03:51.983
> 
> 标签：actionscript-3, flash, actionscript, drag-and-drop

创建游戏拖放类型没有“目标区域（当您将鼠标悬停在按钮上时，它会播放视频）我想要当您将项目拖动到视频时，如果您释放项​​目，它会弹回原位.

这是我现在拥有的代码...

```
mc_d4.addEventListener(MouseEvent.MOUSE_DOWN, dragD4);
stage.addEventListener(MouseEvent.MOUSE_UP, dragStop4);
function dragD4(e:Event):void {
mc_d4.startDrag();
}
function dragStop4(e:Event):void {
    mc_d4.stopDrag();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:10:47.433

您必须将当前拖动项目的位置保存在某处。简单的解决方案是将其保存在变量中

```
var startPosition:Point;

mc_d4.addEventListener(MouseEvent.MOUSE_DOWN, dragD4);
stage.addEventListener(MouseEvent.MOUSE_UP, dragStop4);

function dragD4(e:Event):void {
   mc_d4.startDrag();
   startPosition = new Point( mc_d4.x, mc_d4.y);
}

function dragStop4(e:Event):void {
   mc_d4.stopDrag();
   //set back or tween position

   mc_d4.x = startPosition.x;
   mc_d4.y = startPosition.y;

   startPosition = null;

} 
```

# python - 在python 2.7中同时多次运行脚本

> ID：15840550
> 
> 赞同：1
> 
> 时间：2013-04-05T18:03:58.670
> 
> 标签：python, asynchronous, python-2.7, subprocess, python-multithreading

您好，我正在尝试多次运行脚本，但希望这可以同时发生，据我所知，我是要一起使用子进程和线程但是当我运行它时，它看起来仍然是按顺序执行的，有人可以帮忙吗我这样我就可以让它一遍又一遍地运行相同的脚本，但同时？它实际上是否有效并且真的很慢？

编辑忘记了最后一段代码现在在底部

这是我到目前为止所拥有的

```
import os
import datetime
import threading
from subprocess import Popen

today = datetime.date.today()
os.makedirs("C:/newscript_image/" + str(today))

class myThread(threading.Thread):
    def run(self):
        for filename in os.listdir('./newscript/'):
            if '.htm' in filename:
                name = filename.strip('.htm')

                dbfolder = "C:/newscript/db/" + name
                os.makedirs(dbfolder)

                Popen("python.exe C:/execution.py" + ' ' + filename + ' ' + name + ' ' + str(today) + ' ' + dbfolder)
myThread().start() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T18:13:13.787

就个人而言，我会使用`multiprocessing`. 我会编写一个函数，它接受一个文件名并执行主要内容的任何`execution`操作（可能通过在其中导入`execution`和运行一些函数）：

```
import multiprocessing
import execution
import datetime

#assume we have a function:
#exection.run_main_with_args(filename,name,today_str,dbfolder)

today = datetime.datetime.today()
def my_execute(filename):
    if '.htm' in filename:
       name = filename.strip('.htm')
       dbfolder = "C:/newscript/db/" + name
       os.makedirs(dbfolder)
       execution.run_main_with_args(filename,name,str(today),dbfolder)

p = multiprocessing.Pool()
p.map(my_execute,list_of_files_to_process) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T19:29:54.477

进行了一些快速测试。使用脚本的框架：

```
#!/usr/bin/env python

import os
import threading
from subprocess import Popen

class myThread(threading.Thread):
    def run(self):
        for filename in os.listdir("./newscript/"):
            if '.htm' in filename:
                Popen("./busy.sh")

myThread().start() 
```

然后，我用一堆“.htm”文件填充了“newscript”文件夹，针对这些文件运行脚本。

“busy.sh”基本上是：

```
#!/usr/bin/env bash
while :
do
    uptime >> $$
    sleep 1
done 
```

您拥有的代码确实会触发在后台运行的多个进程。我使用包含 200 个文件的 newscript 文件夹执行此操作，我看到 200 个进程都在后台运行。

您注意到您希望它们同时在后台运行。

在大多数情况下，并行进程在后台“大致”并行运行，但由于大多数常见操作系统的设置方式，“并行”更像是“几乎并行”或更通常称为异步。如果您非常仔细地查看访问时间，以这种方式产生的各种进程将各自轮流，但它们永远不会同时做某事。

这是需要注意的。特别是因为您正在访问由操作系统和底层文件系统控制的文件。

对于您要执行的操作：处理一堆入站文件，您的操作方式基本上是在后台为出现的每个文件生成一个处理文件的进程。

**所呈现的逻辑存在几个问题：**

1.  叉子炸弹情况的高风险，因为你的产卵是无限的，并且没有跟踪仍然产卵的东西。
2.  通过调用和执行另一个程序来生成的方式会导致生成操作系统级别的进程，这会占用更多资源。

**建议：**

与其生成作业，不如将生成的文件处理代码转换为 Python 函数。将您的代码重新编写为一个守护进程，它监视文件夹并跟踪产生了多少进程，以便管理处理文件转换的后台进程级别。

在处理文件时，您将分离出一个 Python 线程来处理它，这将是产生一个操作系统级线程的更轻量级的替代方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-30T04:54:32.153

稍微阐述一下 mgilson 的回答：

假设我们有一个文件夹 example1。
在 example1 中，我们有两个 python 脚本：
**execution.py**和**main.py**

**execution.py**的内容如下所示：

```
import subprocess

def run_main_with_args(filename,name,today,dbfolder):
    print('{} {} {}'.format('\nfilename: ',filename, ''))
    print('{} {} {}'.format('name: ',name, ''))
    print('{} {} {}'.format('today: ',today, ''))
    print('{} {} {}'.format('dbfolder: ',dbfolder, ''))

    outfile = dbfolder+ '/' + name + '.txt'
    with open (outfile, 'w') as fout:
        print('name', file=fout) 
```

此外，**main.py**的内容如下所示：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-
#
# Author      : Bhishan Poudel; Physics Graduate Student, Ohio University
# Date        : Aug 29, 2016
#

# Imports
import multiprocessing,os,subprocess
import datetime
import execution  # file: execution.py

#assume we have a function:
#exection.run_main_with_args(filename,name,today_str,dbfolder)

today = datetime.datetime.today()
def my_execute(filename):
    if '.txt' in filename:
       name = filename.strip('.txt')
       dbfolder = "db/" + name
       if not os.path.exists(dbfolder): os.makedirs(dbfolder)
       execution.run_main_with_args(filename,name,str(today),dbfolder)

p = multiprocessing.Pool()
p.map(my_execute,['file1.txt', 'file2.txt']) 
```

然后，如果我们运行这个**main.py**，它将以**并行**方式在所需目录中创建所需文件！

# java - Java 无法读取文件

> ID：15840554
> 
> 赞同：0
> 
> 时间：2013-04-05T18:04:02.437
> 
> 标签：java, bufferedreader, filereader

我正在编写一个 Java 程序，它可以获取用户条目并将它们保存到 ArrayList 中，然后使用 ArrayList 打开一系列网页。该程序还应该能够从文件中读取网址。这就是我遇到问题的地方。

我目前正在接受：找不到文件 bills.txt。//文件在我的src文件夹中

```
Exception in thread "main" java.lang.NullPointerException
    at PayBills.main(PayBills.java:92) //this is when the BufferdReader is closed 
```

这不是家庭作业，但该程序与我即将完成的家庭作业共享概念，所以我不想改变任何关于我在文本中阅读方式的基本内容。任何建议表示赞赏！

```
import java.io.*;
import java.util.ArrayList;

    public class PayBills implements Serializable
    {
        /*The purpose of this program is to assist the user in opening a series of webpages to
         * pay bills online. The user will be able to save and edit a list of webpages,
         * open the newly created list, or read a list from file.
         */ 
        public static void main(String[] args) throws IOException
        {
            char input1;
            String line = new String();
            ArrayList<String> list1 = new ArrayList<String>();
            Runtime rt = Runtime.getRuntime();
            String filename = new String();

            try
            {
             // print out the menu
             rt.exec( "rundll32 url.dll,FileProtocolHandler " + "http://www.google.com");
             printMenu();

             // create a BufferedReader object to read input from a keyboard
             InputStreamReader isr = new InputStreamReader (System.in);
             BufferedReader stdin = new BufferedReader (isr);

             do
             {
                 System.out.println("\nWhat action would you like to perform?");
                 line = stdin.readLine().trim();  //read a line
                 input1 = line.charAt(0);
                 input1 = Character.toUpperCase(input1);
               if (line.length() == 1)   //check if a user entered only one character
               {
                   switch (input1)
                   {
                   case 'A':   //Add address process to array
                       System.out.println("\nPlease enter a web address to add to list:\n");
                       String str1 = stdin.readLine().trim();
                       if(str1.startsWith("http://www.") || str1.startsWith("https://www."))
                           list1.add(str1);
                       else
                       {
                           System.out.println("Please enter a valid web address (starting with http:// or https://).");
                       }
                       break;
                   case 'D':    //Show current list
                       System.out.println(list1.toString());
                       break;
                   case 'E':    //Execute current list
                       //rt.exec( "rundll32 url.dll,FileProtocolHandler " + "http://www.speedtest.net");
                       for(int i = 0; i < list1.size(); i++)
                       {
                           Process p1 = Runtime.getRuntime().exec("cmd /c start " + list1.get(i));                     
                       }
                       break;     
                   case 'R':   //Read list from file
                       System.out.println("\nPlease enter the filename to read: ");
                       {
                           filename = stdin.readLine().trim();
                       }
                       FileReader fr = null;
                       BufferedReader inFile = null;
                       try
                       {
                           fr = new FileReader(filename);
                           inFile = new BufferedReader(fr);
                           line = inFile.readLine();
                           System.out.println("Test2");
                           while(line != null)
                           {
                               System.out.println("Test3");
                               if(line.startsWith("http://www.") == false || line.startsWith("https://www.") == false)
                                   System.out.println("Error: File not in proper format.");
                               else 
                                   list1.add(line);
                           }
                               System.out.println(filename + " was read.");
                           }
                           catch(FileNotFoundException exception)
                           {
                               System.out.println("The file " + filename + " was not found.");
                               break;
                           }
                           catch(IOException exception)
                           {
                               System.out.println("Error. " + exception);
                           }
                           finally
                           {
                               inFile.close();
                           }  

                       break;
                   case '?':   //Display Menu
                       printMenu();
                       break;
                   case 'Q':    //Quit    
                       System.out.println("Goodbye!");
                       System.exit(0);
                   }//end switch
               }//end if
            else
                System.out.print("Unknown action\n");
             }//end do
             while (input1 != 'Q' || line.length() != 1);
            }

            catch(IOException e1) 
            {
                System.out.println("Error: " + e1);
            }
        }//end main
        public static void printMenu()
        {
            System.out.print("Choice\t\tAction\n" +
                             "------\t\t------\n" +
                             "A\t\tAdd Web Address to List\n" +
                             "D\t\tDisplay Current List\n" +
                             "E\t\tExecute Current List\n" +
                             "R\t\tRead List from File\n" +
                             "?\t\tDisplay Menu\n" +
                             "Q\t\tQuit\n");
        }//end of printMenu()

    }//end PayBills 
```

编辑：好的，程序不再崩溃，因为我修复了 NPE，但我仍然收到“找不到文件 bills.txt。”，这是捕获的异常。如上所述，该文件位于我的 src 文件夹中，因此路径应该是正确的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T18:12:20.943

如果您只是传递文件名，那么您必须在读取文件之前附加文件的位置

```
File file = new File(location + filename); 
```

如果您只将文件名作为参数传递给 File 构造函数，这就是它的工作原理，它将尝试在 /Project/ 目录中查找文件（例如 c:/workspace/project/test ，如果您的项目名称是 test 并且是位于 c:/workspace/project)

因此，为了传递正确的位置，您必须指定您尝试读取的文件的完整路径

所以创建字符串位置，它将保存文件所在文件夹的位置，然后附加文件名

```
String location = "C:/opt/files/";
String filename = "abc.txt";

File file = new File(location + filename); 
```

此 abc.txt 应位于“C:/opt/files/”

请记住我添加了驱动器名称，因为您正在尝试运行 main

但是如果在服务器上运行相同的代码，则必须指定相对于服务器运行的根目录的路径

```
String location = "/opt/files/"; 
```

如果您只传递文件名，代码将在项目文件夹中查找文件，而不是在您的 java 类所在的文件夹中。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T18:08:33.783

如果只需要从这里摆脱 Null Poninter Exception 的错误到

```
 finally
                       {
                           inFile.close();
                       } 
```

到

```
finally{
         if (inFile!=null){
             inFile.close();
          }
       } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T18:12:50.343

如果您只是提供文件名，请将文件放在主程序所在的位置，或者将文件名指定为绝对路径，例如 c:\myBills.txt

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T18:13:11.920

如果我正确理解了您的问题，那么您遇到的问题是您正在查找错误的目录。Java 将查找与您的工作目录相关的文件。

例如，如果您正在执行程序`~/project`并且您的文件位于 中`~/foo`，则需要`"..foo/bills.txt"`作为文件路径传入，或者等效地传入`"~/foo"`.

如果你只是`bills.txt`用来测试你的程序，你总是可以将它移动到你执行程序的目录中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-05T18:14:19.720

`NullPointerException`正在抛出，因为您试图关闭`infile`仍然没有被实例化的异常，因为在它可以在您的`try-catch`块中实例化之前引发了异常。所以你应该改变：

```
finally
{
     inFile.close();
} 
```

到

```
finally
{
        try
        {
          if(infile!=null)
          inFile.close();
        }catch(Exception ee){}

} 
```

在您的 NPE 解决后。这是您可以访问“Bill.txt”文件的方式。请改用此代码：

```
fr = new FileReader(new File(System.getProperty("home.dir"), filename)); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-05T18:36:31.573

这里可能不是解决方案，但可能会使用其中的一些，JFileChoser，看看它是如何在 Stream 中移动的，希望它有帮助。

```
import java.util.ArrayList;
import javax.swing.*;
import java.io.*;

public class TriArrayList {

  static ArrayList<String> arr = new ArrayList<String>();

  public static void imprimer(){
  System.out.println (arr);
  }

  public static void tri(){
  for (int i=0; i+1 < arr.size(); i++) {
     int a = arr.get(i).compareTo(arr.get(i+1));
        if (a > 0) {
            String b = arr.get(i);
            arr.set(i, arr.get(i+1));
            arr.set(i+1, b);
            if (i != 0)
                i -= 2;
        }  
  }
  }

  public static void main(String args[]){
  try {
      JFileChooser dial = new JFileChooser();
      int res = dial.showOpenDialog(null);
      if (res == JFileChooser.APPROVE_OPTION) {
          File f = dial.getSelectedFile();
          InputStream is = new FileInputStream(f);
          Reader r = new InputStreamReader(is);
          BufferedReader br = new BufferedReader(r);
          String line;
          while ((line = br.readLine()) != null) {
              line += "\n";
              arr.add(line);
          }
          is.close();
      }
  } catch (IOException e) {
  System.err.println("Problème de lecture du fichier blablabla.txt");
  }
  tri();
  imprimer();
  }
} 
```

# git - 如何在 Sourcetree 中进行 Git Rebase？

> ID：15840561
> 
> 赞同：11
> 
> 时间：2013-04-05T18:04:26.720
> 
> 标签：git, atlassian-sourcetree

我希望我的本地 master 分支包含提交“已修复 js 错误”并重新定位到 origin/master。
![在此处输入图像描述](https://i.stack.imgur.com/jPJSK.png)

我开始了这样的过程： ![在此处输入图像描述](https://i.stack.imgur.com/eOR9y.png)

这导致我这样做： ![我的源树](https://i.stack.imgur.com/uFJSa.png)

但正如你所见，我被要求先拉再推。每次拉动时，我都会遇到第一张图片中描述的情况。我究竟做错了什么？！谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T19:00:24.003

您的原始结构不支持变基。假设您对本地进行了提交，`master`而其他人已经提交（并推送）了对`origin/master`. 在这种情况下，您可以将您的提交重新设置在其他提交之上。

您的场景有来自完全不同的分支的提交。您要么需要将另一个分支合并到`master`中，要么您可以挑选一个提交并应用于该`master`分支。

# ios - 具有布尔属性的 NSPredicate

> ID：15840563
> 
> 赞同：1
> 
> 时间：2013-04-05T18:04:30.687
> 
> 标签：ios, objective-c, core-data, nspredicate

假设我有一个`Foo`具有布尔属性的对象，`isLegit`我该如何编写一个 NSPredicate 以过滤掉该属性设置为的对象`NO`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T18:08:45.627

```
[NSPredicate predicateWithFormat:@"(isLegit == NO)] 
```

# php - 如何用不同的替换文本替换 preg_match 匹配的多个实例？

> ID：15840564
> 
> 赞同：0
> 
> 时间：2013-04-05T18:04:38.700
> 
> 标签：php, preg-replace, preg-match

我有一个脚本，它通过用户的文本输入运行，并用 html 替换标签中包含的文本。它大部分工作正常，但是其中一个标签给我带来了麻烦。

[include=someFile.php] 应该将 someFile.php 的内容加载到页面中，[inlude=thatFile.txt] 应该加载 thatFile.txt。但是，当包含标签有多个实例时，每个实例都引用不同的文件，它会将它们全部替换为仅包含的文件之一。我正在使用的代码是这个......

```
if (preg_match ("/\[include=(.+?)\]/", $text, $matches)) {
  foreach ($matches as $match) {
    $match = preg_replace("/\[include=/", "", $match);
    $match = preg_replace("/\]/", "", $match);
    $include = $match;
    $file_contents = file_get_contents($include);
    $text = preg_replace("/\[include=(.+?)\]/", "$file_contents", $text);
  }
} 
```

foreach 循环的最后一行似乎是用它在当前标签中找到的任何内容替换匹配标签的每个实例，但我不知道该怎么做。任何建议表示赞赏！

编辑：感谢 Uby，我做了以下更改，现在可以使用。

```
if (preg_match_all ("/\[include=(.+?)\]/", $text, $matches)) {

    foreach ($matches[0] as $match) {
        $file = preg_replace("/\[include=/", "", $match);
        $file = preg_replace("/\]/", "", $file);
        $file_contents = file_get_contents($file);
        $text = str_replace("$match", "$file_contents", $text);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:11:26.000

`preg_match()`将仅匹配一次，在您的情况下您应该使用`preg_match_all()`（请参阅文档[http://php.net/manual/en/function.preg-match-all.php](http://php.net/manual/en/function.preg-match-all.php)）

仔细阅读文档，你的循环不会像这样工作。

# jquery - Ajax GET 在 Chrome 控制台中抛出 404 错误

> ID：15840565
> 
> 赞同：1
> 
> 时间：2013-04-05T18:04:40.723
> 
> 标签：jquery, ajax, google-chrome, get, http-status-code-404

这不会影响我的页面或输出，但我想知道是否有人可以解释为什么会这样：

这是我的阿贾克斯：

```
$(document).ready(function(){

$archive = "/videoarchive/";

$.ajax({
  url: "http://mysite.com/videoarchive/",
  cache: false
}).done(function( html ) {
    $div = $('.archive', $(html));
    $img = $div.first().find('img').attr('src');
    $link = $div.first().find('a').attr('href');
    alert($img);
    $('#featureVideo').append('<img src="http://mysite.com/videoarchive/'+$img+'" alt="image" />');
    $('#playVideo').append('<a class="extLink" href="http://mysite.com/videoarchive/'+$link+'" target="_blank" title="fancybox link"><img src="images/playButton.png" alt="image" /></a>');
    $('#archiveLinks').append('');

});

}); 
```

一切正常，但是当我检查元素并在控制台中查看来自传入 HTML 的所有图像时，都将路径添加到我的网站。这是一个例子：

加载资源失败：服务器响应状态为 404（未找到）>>> [http://mysite.com/webapps/r2ewg/images/diversity_scanline.jpg](http://mysite.com/webapps/r2ewg/images/diversity_scanline.jpg)

我只是好奇是否有办法摆脱这些，或者我是否被它们困住了。或者如果我做错了什么......

在 Chrome 和 IE8 中运行良好...输出只能在 Intranet 站点上的 IE8 中看到...

让我知道我是否可以提供更多详细信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:18:37.820

首先，你应该包装 html 两次吗？而是这样做：

```
$div = $('.archive', html); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T18:20:04.900

可能发生的情况是，当您从 ajax 调用返回响应时，您会收到一堆 HTML，并且该 URL ( [http://mysite.com/webapps/r2ewg/images/diversity_scanline.jpg](http://mysite.com/webapps/r2ewg/images/diversity_scanline.jpg) ) 是其中的一部分它。

如果该 HTML 块附加到您的 DOM，浏览器将尝试抓取图像。浏览器可能正在尝试加载图像并获得 404。它甚至可能与您的 jQuery 没有任何关系。

# excel - Excel 下拉列表 - 根据选择自动填写值

> ID：15840579
> 
> 赞同：2
> 
> 时间：2013-04-05T18:05:28.973
> 
> 标签：excel, conditional-formatting

我正在尝试为一家餐厅创建一个内部成本核算电子表格。我重新熟悉了如何创建下拉列表（在这种情况下，用于选择成分）。

当有人从下拉列表中选择“胡萝卜”时，我希望其他字段自动填充另一个电子表格中的成本数据。我知道如何从另一张表中提取下拉数据，但我不知道如何根据选择下拉列表中的哪个项目有条件地在当前表拉成本数据中设置字段。

请像我 5 岁那样解释答案；自从我的 Excel 忍者时代以来，已经有很多年了。

TIA

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T18:19:53.820

如果您已经在表中设置了数据，则可以使用 Vlookup。您所要做的就是如下图所示设置您的验证。然后您可以使用 vlookup 来引用该数字和表格。当然，您可以通过更有效地使用命名范围和 OFFSET 函数来清理它，但这通常可以解决您的问题。

![验证图像](https://i.stack.imgur.com/tmYZx.png)

![vlookup 图像](https://i.stack.imgur.com/Zr3R2.png)

# asp.net - 用户控件中的必需属性

> ID：15840588
> 
> 赞同：3
> 
> 时间：2013-04-05T18:05:46.270
> 
> 标签：asp.net, vb.net, user-controls

我刚刚制作了一个用户控件，其中包含一些要填充的参数。

```
<uc1:Graph ID="uc1Graph" runat="server" property1="Name" property2="XValue" /> 
```

现在，我的问题是：

*   如何使 property1 成为必填字段？

开发者必须填写Graph(property1)的名称，否则它一定不能工作，并且在运行时应该会出现一些错误消息，或者更好，在设计模式下

感谢您的时间 ！:D

# java - Java IF ELSE 语法错误

> ID：15840593
> 
> 赞同：0
> 
> 时间：2013-04-05T18:06:01.713
> 
> 标签：java

我在 IF ELSE 语句上有一个 java 语法错误。我多次检查了我的代码，但无法找出问题所在。错误是：标记“else”的语法错误，删除此标记。我在这里做错了什么？

```
if(androidFragment!=null)
    ft.detach(androidFragment);

if(appleFragment!=null)
    ft.detach(appleFragment);

if(berryFragment!=null)
    ft.detach(berryFragment);

if(tabId.equalsIgnoreCase("android")){

    if(androidFragment==null){      

        ft.add(R.id.realtabcontent,new AndroidFragment(), "android");                       
    }else{

        ft.attach(androidFragment);                     
    }

}else if{   

    if(appleFragment==null){

        ft.add(R.id.realtabcontent,new AppleFragment(), "apple");                       
    }else{

        ft.attach(appleFragment);               
    }

}else{  

    if(berryFragment==null){

        ft.add(R.id.realtabcontent,new BerryFragment(), "berry");                       
    }else{

        ft.attach(berryFragment);                       
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T18:11:39.767

你在这方面没有条件`if`

```
...
}else if{ /* condition missing at this if */  

    if(appleFragment==null){

        ft.add(R.id.realtabcontent,new AppleFragment(), "apple");                       
    }else{

        ft.attach(appleFragment);               
    }
}... 
```

将其更改为您需要的内容，可能：

```
...
}else if (tabId.equalsIgnoreCase("apple")){

    if(appleFragment==null){

        ft.add(R.id.realtabcontent,new AppleFragment(), "apple");                       
    }else{

        ft.attach(appleFragment);               
    }
}... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T18:07:23.327

您只能将一个`else`附加到`if`; 这里有两个`else`s，for`AppleFragment`和`BerryFragment`。

```
if(tabId.equalsIgnoreCase("android")){

  ...
}else{  

    ...

}else{  

    ...

} 
```

**编辑**

您现在有以下代码片段：

```
} else if { 
```

您`else if`需要一个条件，例如

```
} else if (/*another boolean condition here for AppleFragment*/) { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T18:07:24.527

您连续有 2 个其他人

```
if (...) {
   ...
} else {
   ...
} else {   <--only one "else" allowed.
   ...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T18:25:14.603

您没有`else if`正确使用该构造，您的代码应如下所示：

```
}else if(tabId.equalsIgnoreCase("apple")) {   

    if(appleFragment==null){
        ...

}else if (tabId.equalsIgnoreCase("berry")){  

    if(berryFragment==null){
        ...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T18:08:42.783

只允许一个 else，使用 else if

```
if(condition){ ....

}else if(condition 2){ ......

}else{ ........

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-05T18:09:39.477

问题在这里：

```
else{   // Second else compilation error

    if(berryFragment==null){

        ft.add(R.id.realtabcontent,new BerryFragment(), "berry");                       
    }else{

        ft.attach(berryFragment);                       
    }

} 
```

你不能有两个 else 语句。

# c# - 登录错误“无法将 void 隐式转换为字符串”

> ID：15840603
> 
> 赞同：0
> 
> 时间：2013-04-05T18:06:21.290
> 
> 标签：c#, asp.net-mvc

我有一个包含以下代码的登录页面：

程序：

```
ALTER PROCEDURE [dbo].[Login_Validation]

@email varchar(100),
@password varchar(50)

AS
BEGIN

DECLARE @cnt INTEGER
SET @cnt = (SELECT COUNT(*) FROM SUBSCRIBER_MASTER WHERE EmailId=@email AND [Password]=@password AND [Status]='Y')

END 
```

类文件：

```
public void Login_Validation(string email, string password)
{

SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnString"].ConnectionString);
try
{
    LocalConnection_Class(con);
    SqlCommand cmd = new SqlCommand("Login_Validation", con);
    cmd.CommandType = CommandType.StoredProcedure;
    cmd.Parameters.Add(new SqlParameter("@email", SqlDbType.VarChar, 100)).Value = email;
    cmd.Parameters.Add(new SqlParameter("@password", SqlDbType.VarChar, 50)).Value = password;
    SqlDataReader dr = cmd.ExecuteReader();
    if (dr.HasRows)
    {
        dr.Read();
    }

    cmd.Dispose();
    con.Close();
}
catch (Exception)
{ }
} 
```

cs 文件：

```
protected void btnSubmit_Click(object sender, EventArgs e)
{
string login = obj.Login_Validation(txtEmail.Text, txtPassword.Text);
} 
```

我无法理解如何解决该错误。有人可以帮我吗？它给了我一个错误：“无法在 obj.Login_Validation 处将 void 隐式转换为字符串”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:47:59.773

就像**DJ KRAZE**告诉你的那样

您`string login = obj.Login_Validation(txtEmail.Text, txtPassword.Text);`建议您的方法`Login_Validation`将返回一个字符串，因此您需要做两件事

首先
将您的方法标题更改
`public void Login_Validation(string email, string password)`为
`public string Login_Validation(string email, string password)`

第二个现在你需要在你的方法中添加一个返回

例如

```
public string Login_Validation(string email, string password)
    {
        //...

        try
        {
            //...

            return //<- your string if succeed
        }
        catch (Exception)
        { 
            return //<- your string if an error occurs
        }

        // or you place just one return here
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-05T18:07:59.827

您将一个函数声明为 void，`public void Login_Validation`并尝试从中分配一个字符串。

那是行不通的，并且错误消息非常清楚。

更改方法签名以返回一个字符串，并使用存储过程中的相关数据添加一个返回语句。

编辑 - 实际上你的存储过程似乎没有返回任何东西。从那里开始！也许是一个输出参数。

```
ALTER PROCEDURE [dbo].[Login_Validation]

@email varchar(100),
@password varchar(50),
@isValid bit outbit 
AS
BEGIN

SET @isValid = EXISTS(SELECT * FROM SUBSCRIBER_MASTER WHERE EmailId=@email AND [Password]=@password AND [Status]='Y')

END 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-05T18:08:43.423

您的 Login_Validation 不返回任何内容。它返回一个“无效”。

如果您希望它返回某些内容，请更改签名以返回字符串。

```
public string Login_Validation 
```

然后返回任何你想要的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-05T18:31:21.357

试试这个以使用 SqlDataReader 而不是 void

```
public SqlDataReader  Login_Validation(string email, string password)
{
   SqlConnection con = new     SqlConnection(ConfigurationManager.ConnectionStrings["ConnString"].ConnectionString);
    LocalConnection_Class(con);
    SqlCommand cmd = new SqlCommand("Login_Validation", con);
    cmd.CommandType = CommandType.StoredProcedure;
    cmd.Parameters.Add(new SqlParameter("@email", SqlDbType.VarChar, 100)).Value = email;
    cmd.Parameters.Add(new SqlParameter("@password", SqlDbType.VarChar, 50)).Value = password;
    SqlDataReader dr = cmd.ExecuteReader(); 
    cmd.Dispose();
    con.Close();
    return dr ;
} 
```

并呼吁这种方式

```
protected void btnSubmit_Click(object sender, EventArgs e)
{
SqlDataReader   login = obj.Login_Validation(txtEmail.Text, txtPassword.Text);

if(login.HasRows)
{
//Login Successfully 
}
else
{
//Login Failed
}
} 
```

# autohotkey - Autohotkey - 如果条件不满足，则发送默认行为

> ID：15840608
> 
> 赞同：3
> 
> 时间：2013-04-05T18:06:42.273
> 
> 标签：autohotkey

在 Autohotkey 中，如果 Foxit Reader 处于活动状态，如何使 NumpadDot 双击，否则发送正常的 NumpadDot？

我的（破碎的）尝试：

```
NumpadDot::
  SetTitleMatchMode 2 ; allow partial titles
  IfWinActive, Foxit
      Click 2
  else
      Send {NumpadDot} ; THIS CREATES AN ENDLESS LOOP!
Return 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T13:48:01.390

我推荐@RobertIlbrink 的答案，但这是另一种方法。

```
$NumpadDot::
IfWinActive, Foxit
    Click 2
else
    SendInput {NumpadDot}
return 
```

这`$`可以防止 AutoHotkey 将发送的击键（通过发送命令）与用户的按键混淆。如果我们不这样做，我们将得到一个无限循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T18:23:32.707

好吧，我会这样做：

```
SetTitleMatchMode 2 ; allow partial titles

#IfWinActive, Foxit ; Any hotkeys defined between #IfWInActive ONLY works in Foxit
  NumpadDot::Click 2
#IfWinActive 
```

哦顺便说一句，无限循环是因为您的 Send, {NumPadDot} 启动了您自己的脚本。如果你想防止在热键之前放置一个 $，比如 $NumpadDot::

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-06T08:48:30.913

我已经通过“SendPlay”解决了这个问题，在这个例子中我有 2 个键盘，所以我使用键盘 1 中的 {tab} 对 Windows 执行 {RAlt}{TAb} 并使用主键盘中的 {tab} 来执行通常的操作

```
Tab::
  getKeyboardID()               ; AHKHID based routine
  if(kbID = keyboard1){
    send, {Ralt Down}{Tab}{RAlt Up}
  } Else {
   SendPlay {Tab}               ; here the solution
  }
Return 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T18:11:53.617

你不必有 else 语句：

```
 NumpadDot::
     SetTitleMatchMode 2 ; allow partial titles
     IfWinActive, Foxit
 Click 2

return 
```

# html - jQuery Mobile：获取通过 changePage 传递给页面的数据

> ID：15840611
> 
> 赞同：3
> 
> 时间：2013-04-05T18:06:53.920
> 
> 标签：html, jquery-mobile, jquery

我正在尝试将一个对象从一个页面传递到另一个页面，并且根据 JQM 文档，这应该是正确的：

```
$.mobile.changePage( "about/us.html", { data: {paramUno:"Uno", paramDos:11} }); 
```

我的问题是，一旦 us.html 加载，我不确定访问这些值的最佳方式。我添加了, , 和的页面事件回调`pageshow`，并且在每种情况下， event.data 都是. 这样做的正确方法是什么？我宁愿不使用 localStorage 或全局/命名空间变量，除非那是我唯一的选择。`pagebeforeshow``pageinit``pagechange``undefined`

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-05T18:10:04.277

# 解决方案

像这样发送它们：

```
$.mobile.changePage('page2.html', { dataUrl : "page2.html?parameter=123", data : { 'paremeter' : '123' }, reloadPage : true, changeHash : true }); 
```

并像这样阅读它们：

```
$("#index").live('pagebeforeshow', function (event, data) {
    var parameters = $(this).data("url").split("?")[1];;
    parameter = parameters.replace("parameter=","");  
    alert(parameter);    
}); 
```

更多示例可以在这里找到：[**jQuery Mobile：文档就绪与页面事件**](https://stackoverflow.com/a/14469041/1848600)，只需查找章节：**页面转换之间的数据/参数操作**。

# 例子：

**索引.html**

```
<!DOCTYPE html>
  <html>
    <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="widdiv=device-widdiv, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <title>
    </title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://www.dragan-gaic.info/js/jquery-1.8.2.min.js">
    </script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>  
    <script>
        $(document).on('pagebeforeshow', "#index",function () {
            $(document).on('click', "#changePage",function () {     
                $.mobile.changePage('second.html', { dataUrl : "second.html?paremeter=123", data : { 'paremeter' : '123' }, reloadPage : false, changeHash : true });
            }); 
        }); 

        $(document).on('pagebeforeshow', "#second",function () {
            var parameters = $(this).data("url").split("?")[1];;
            parameter = parameters.replace("parameter=","");  
            alert(parameter);
        });         
    </script>
   </head>
   <body>
    <!-- Home -->
    <div data-role="page" id="index">
        <div data-role="header">
            <h3>
                First Page
            </h3>
        </div>
        <div data-role="content">
          <a data-role="button" id="changePage">Test</a>
        </div> <!--content-->
    </div><!--page-->

  </body>
</html> 
```

**第二个.html**

```
<!DOCTYPE html>
  <html>
    <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="widdiv=device-widdiv, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <title>
    </title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://www.dragan-gaic.info/js/jquery-1.8.2.min.js">
    </script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>  
   </head>
   <body>
    <!-- Home -->
    <div data-role="page" id="second">
        <div data-role="header">
            <h3>
                Second Page
            </h3>
        </div>
        <div data-role="content">

        </div> <!--content-->
    </div><!--page-->

  </body>
</html> 
```

# 更多信息

如果您想了解有关此主题的更多信息，请查看这篇**[文章](http://www.gajotres.net/passing-data-between-jquery-mobile-pages/)**。您会发现几个带有示例的解决方案。

# dart - 如果存在就调用方法

> ID：15840613
> 
> 赞同：4
> 
> 时间：2013-04-05T18:07:02.197
> 
> 标签：dart, dart-mirrors

是否有一个简单、*轻量级/廉价的*调用来确定对象是否支持命名方法？所以，在这个 obj.respondsTo 会很棒。

```
dynamic _toJson(dynamic obj) {
  return obj.respondsTo('toJson'))? obj.toJson() : obj;
}

class Foo {
  String foo = "Foo.foo";
  Bar bar = new Bar();
  Map toJson() {
    return {
      "foo" : _toJson(foo),
      "bar" : _toJson(bar)
    };
  }
} 
```

一种替代方法是调用它并捕获 noSuchMethod 异常，但我认为这是不好的做法且昂贵？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T19:32:38.450

最简洁的答案是不'。Frédéric Hamidi 提供的答案并不正确，但它在 dart2js 中不起作用（dart:mirrors 在 dart2js 中很大程度上未实现）。

此外，虽然检查对象是否响应特定方法在其他语言（例如 Ruby）中非常常见，但对我来说似乎并不特别 Dart-y。也许一旦 Dart 完全支持镜像，这种情况就会改变。

很难说基于镜子的反射是否“轻巧/便宜”。这取决于用例以及您如何定义这些术语。

我会说你最好的选择是调用对象的方法，捕获 NoSuchMethod 异常，并实现一些默认的错误处理行为。如果您通常期望该方法存在，这尤其有意义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-16T05:05:19.563

如果对象是接口类型，您可以在测试时定义一个带有抽象方法的接口/抽象类，然后调用您现在知道存在的方法。

```
abstract class JsonEncodable {
    Map toJSON();
}

Object _toJson(Object obj) {
    return (obj is JsonEncodable)? obj.toJson() : obj;
}

class Foo implements JsonEncodable {
    Map toJSON() {
        // toJSON implementation
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-07-25T10:20:49.647

这是一种解决方法，但我使用了一个基本上是内联 try catch 的小助手：

```
 String json = ifHasMethodElse(() => obj.toJson(), null)

dynamic ifHasMethodElse(Function closureWithCall, dynamic elseThis) {
  try {
    return closureWithCall();
  } catch (NoSuchMethodError, e) {
    return elseThis;
  }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-05T18:36:45.583

使用[dart:mirrors](http://www.dartlang.org/articles/reflection-with-mirrors/)，您应该能够编写如下内容：

```
bool respondsTo(dynamic obj, String methodName)
{
    var mirror = reflect(obj);
    return mirror.type.methods.values.map((MethodMirror method) => method.simpleName)
                                     .contains(methodName);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-12T20:39:25.403

使用稍微不同的方法，我通过检查实例函数列表来检查给定方法是否存在：

```
InstanceMirror im = reflect(this);
Symbol fn = new Symbol('$functionName');
if (im.type.instanceMembers.keys.contains(fn)) {
  im.invoke(fn, params);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-02T02:07:44.977

不是轻量级的，但不需要`mirrors`（并且在重新阅读接受的答案之后，这基本上是接受的答案所暗示的可能性）：

```
dynamic _toJson(dynamic obj) {
  try {
    return obj.toJson();
  } catch(NoSuchMethodError) {
    return obj;
  }
} 
```

我仅将其用于调试/故障排除目的——我从未将这段代码投入生产。理想情况下，您最好定义某种接口并将其作为您的`obj`而不是动态的，正如@thetrompf 建议的那样。

# python - 获取 Numpy genfromtxt 转换器以使用 def 函数

> ID：15840614
> 
> 赞同：2
> 
> 时间：2013-04-05T18:07:07.797
> 
> 标签：python, numpy, genfromtxt

我搜索了论坛，似乎无法解决以下问题。我对 python 很陌生，有一点编程经验，所以我的问题可能是微不足道的。

希望使用类方法将日期时间字符串转换为日期时间格式`date.strptime`。

问题是列内的字符串格式**不一致**（大部分是`%Y-%m-%d $H:$M:$S.%f`）；当时间正好落在秒上时，毫秒小数将被省略（格式应改为`%Y-%m-%d $H:$M:$S`）。当`strptime`遇到无法识别的格式时，它只会`None`在数组元素中放置一个值。

有没有办法在`lambda`函数中创建异常（即`ValueError`异常），如果没有，我如何将字符串值`def timeConv(x)`从转换器选项传递给“正常”函数`genfromtxt`？

也许有更好的方法来解决这个问题......？

我当前的代码`None`在格式为时产生一个值`%Y-%m-%d $H:$M:$S`：

```
timeConv = lambda x: datetime.strptime(x, '\"%Y-%m-%d $H:$M:$S.%f\"')

Time = np.genfromtxt(file, dtype='object', delimiter=',', skip_header=4, usecols=(0), converters = {0: timeConv}) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T18:11:17.640

您可以使用 a`try..except`首先尝试一种格式，如果它不起作用，则捕获异常并尝试另一种格式：

```
import datetime as DT
import numpy as np

def timeConv(x):
    try:
        return DT.datetime.strptime(x, '%Y-%m-%d %H:%M:%S.%f')
    except ValueError as err:
        return DT.datetime.strptime(x, '%Y-%m-%d %H:%M:%S')

time = np.genfromtxt(file, dtype='object', delimiter=',', skip_header=4,
                     usecols=(0), converters = {0: timeConv}) 
```

该函数`timeConv`以`genfromtxt`与传递`lambda`.

* * *

dateutil[模块](http://niemeyer.net/python-dateutil)有一个日期字符串解析器，它不需要您指定日期字符串的确切格式。所以使用 dateutil 你可以简单地写

```
import dateutil.parser as dparser
import numpy as np

time = np.genfromtxt(file, dtype='object', delimiter=',', skip_header=4,
                     usecols=(0), converters = {0: dparser.parse}) 
```

请注意，虽然`dparser.parse`它非常易于使用，但有一些模棱两可的日期字符串，例如`2013-8-9`(August 8 或 Sept 9?)，需要更加小心。请务必阅读`dayfirst`和`yearfirst`参数，以便您可以控制解析器的行为。

# php - php会话过期太快 - session.gc_maxlifetime

> ID：15840627
> 
> 赞同：1
> 
> 时间：2013-04-05T18:08:01.940
> 
> 标签：php, session

我将 session.gc_maxlifetime 设置为 43200，应该是 12 小时，但我的会话仍然很快过期。我希望它至少 12 小时

我创建了一个 php_info.php 文件，所以我可以看到事情是如何配置的

*   session.auto_start 关 关
*   session.bug_compat_42 On On
*   session.bug_compat_warn On On
*   session.cache_expire 180 180
*   session.cache_limiter nocache nocache
*   session.cookie_domain 无值 无值
*   session.cookie_httponly 关 关
*   session.cookie_lifetime 0 0
*   session.cookie_path //
*   session.cookie_secure 关 关
*   session.entropy_file 无值 无值
*   session.entropy_length 0 0
*   session.gc_divisor 100 100
*   session.gc_maxlifetime 43200 43200
*   session.gc_probability 1 1
*   session.hash_bits_per_character 4 4
*   session.hash_function 0 0
*   session.name PHPSESSID PHPSESSID
*   session.referer_check 无值 无值
*   session.save_handler 文件 文件
*   session.save_path 无值 无值
*   session.serialize_handler php php
*   session.use_cookies On On
*   session.use_only_cookies 关 关
*   session.use_trans_sid 0 0

# android - 寻找 AlarmManager 对电池的影响？

> ID：15840638
> 
> 赞同：1
> 
> 时间：2013-04-05T18:08:25.987
> 
> 标签：android, repeatingalarm

我有一个进程在我的设备上每分钟运行一次。它真的只有那么快，因为在调试时我厌倦了等待更长的时间。它每分钟调用一次我的代码，该代码运行一个 Web 请求和一些 sqlite 条目，并执行一些可能会很快耗尽电池电量的工作。因为我运行的是 4.2.2（特别是 Cyanogenmod nightlies），所以我可以访问系统 > 电池，在那里我可以很好地了解哪些应用程序正在使用我的电池。我应该期望在什么过程中看到这些 AlarmManager 调用使用电池？报警管理器？我的应用程序？安卓系统？我想这归结为我不知道当 AlarmManager 间隔指示是处理时间时父进程是谁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T12:26:42.193

可以使用 adb 转储信息以了解其他进程或应用正在使用 alarmManager

```
adb shell dumpsys alarm 
```

# javascript - 凸包 - 单调链算法错误

> ID：15840639
> 
> 赞同：0
> 
> 时间：2013-04-05T18:08:26.743
> 
> 标签：javascript, python, 2d, polygon, convex-hull

我正在使用[单调链算法](http://en.wikibooks.org/wiki/Algorithm_Implementation/Geometry/Convex_hull/Monotone_chain)围绕一组多边形创建一个凸包。它有时效果很好，但在某些形状上，它会失败。看看这个例子：http: [//i.imgur.com/KN40LgV.png](http://i.imgur.com/KN40LgV.png)

左边是应用算法*之前的形状，右边是应用**之后*的形状。某处似乎有一些小的计算错误，我无法弄清楚。

这是我的源代码（JavaScript）的链接：http: [//pastebin.com/GPVm9dQp](http://pastebin.com/GPVm9dQp)

这是我用作参考的 Python 实现：http: [//pastebin.com/RgMKH3XN](http://pastebin.com/RgMKH3XN)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:50:21.040

如果不深入研究它，您不应该在某个时候按 x 位置对点列表进行排序吗？

# php - 如何正确清理存储电子邮件的 mssql 查询

> ID：15840642
> 
> 赞同：1
> 
> 时间：2013-04-05T18:08:34.687
> 
> 标签：php, sql-server

我有一个查询到邮箱并尝试将所有电子邮件保存在表中。它在大多数情况下都有效，但当电子邮件内容值包含双引号或单引号时它会失败。我将如何修改我的代码以正确插入所有查询？

```
 $num = imap_num_msg($imap);
    if($num > 0)
    {
        for($b = $num; $b > 0; $b--)
        {
            $body = $this->get_part($imap, $b, "TEXT/HTML");
            if($body == "")
            {
                $body = $this->get_part($imap, $b, "TEXT/PLAIN");
            }
            $header = imap_headerinfo($imap, $b);
            $subject = $header->subject;
            $fromaddress = $header->fromaddress;
            $body = str_replace("'", "''", $body);
            //$body = str_replace("\"", "\"\"", $body);
            $sql3 = "INSERT INTO [tbl_test] (content) 
                    VALUES ('".$body."')";
            $result3 = mssql_query($sql3, $dbh1);
        }
    } 
```

之后我得到这些错误：

警告：mssql_query(): 消息：字符串后的未闭合引号 '请调查为什么下面的 s....

警告：mssql_query()：一般 SQL Server 错误：在第 38 行的 /var/www/testing.php 中检查来自 SQL Server（严重性 15）的消息

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T18:13:22.927

You want to be using parameters:

```
$query = "INSERT INTO test (email, body) VALUES (?,?);";
$arrParams[]="my@domain.com";
$arrParams[]="My email body has quotes\'s or double quotes \" in it.";
$resource=sqlsrv_query($conn, $query, $arrParams); 
```

Source: [sqlsrv_query](http://msdn.microsoft.com/en-us/library/cc296184%28v=sql.105%29.aspx)

# dom - 用于 webgl 渲染器的 canvas 元素的three.js dom id

> ID：15840650
> 
> 赞同：9
> 
> 时间：2013-04-05T18:08:46.660
> 
> 标签：dom, canvas, three.js, element

我想获取由three.js自动创建的canvas元素的id。

或者，我会同样高兴（也许更高兴）能够在构造过程中传递预先存在的画布元素 id。

经过研究，我尝试了这个：

```
renderer = new THREE.WebGLRenderer( { canvas: my_canvas } ); 
```

没有成功（它来自一个相当古老的版本，但希望它能工作）。也许自 2 年前以来某些参数语法发生了变化？

（my_canvas 是画布的 id，也尝试传递上下文，没有运气）

最后我尝试了：

```
document.getElementsByTagName('canvas'); 
```

它什么也没返回...这是一个令人困惑的问题，也是导致我在这里发帖的众所周知的稻草。

任何见解表示赞赏，谢谢！（我现在有投票权）

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-02-08T13:18:27.743

```
var canvas = document.getElementById("canvasID");
renderer = new THREE.WebGLRenderer({ canvas: canvas }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T18:28:25.170

如果您查看three.js/src/renderers/WebGLRenderer.js（位于文件的最顶部）中的最新版本（r57），您可以看到您实际上可以将画布参数传递给渲染器。如果你没有通过一个，那么就会为你创建一个。您可能需要发布一些不起作用的代码或更好的 jsfiddle，以便我们查看问题。

# javascript - JavaScript -- 0.56 + 4 = 4.5600000000000005

> ID：15840655
> 
> 赞同：0
> 
> 时间：2013-04-05T18:08:58.797
> 
> 标签：javascript, google-chrome

刚刚找到这个奇怪的故障很有趣。您可以打开控制台并输入`0.56 + 4`将为您`4.5600000000000005`提供 JavaScript 的内容。我在用着`Chrome Version 26.0.1410.43`

其他浏览器没试过。

我知道舍入误差，但这里到底发生了什么？

# android - 在移动网站中创建将打开 QR 码扫描仪的链接

> ID：15840659
> 
> 赞同：1
> 
> 时间：2013-04-05T18:09:06.207
> 
> 标签：android, iphone, jquery-mobile, qr-code

是否可以在移动网站中创建一个链接，当用户点击它时，它会在 iPhone 或 Android 手机上打开二维码扫描器？

具体来说，我正在使用 jQuery Mobile 构建一个站点，并希望有一个显示“扫描 QR 码”的按钮。当点击它时，它将打开他们手机上的任何扫描应用程序。

我在[这里发现了另一个类似的问题](https://stackoverflow.com/questions/11195178/is-it-possible-to-launch-a-qr-code-scan-from-a-mobile-web-app-running-on-ipad)，看来答案是否定的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:21:45.657

至少在 Android 上，您可以请求 QR 扫描仪应用程序的开发人员为您在点击时发送给用户的 URL 添加一个意图过滤器，然后启动他们的应用程序。请注意，系统仍会提示用户在 QR 扫描仪和设备上的浏览器之间进行选择，对此您无能为力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T20:00:13.950

这可以帮助您：

[http://qrdroid.com/web-masters.php](http://qrdroid.com/web-masters.php)

创建一个像这样的链接：http: [//qrdroid.com/scan](http://qrdroid.com/scan?q=http://www.example.com/your_page?q=) ?q=http://www.example.com/your_page?q = {CODE}

扫描仪将启动。用户扫码后，您的网页将以扫码为参数打开。

# sql - 在 SQL 中清理 CSV 字符串/varchar

> ID：15840660
> 
> 赞同：0
> 
> 时间：2013-04-05T18:09:06.933
> 
> 标签：sql, sql-server

我在一个 varchar 字段中有一些怪癖，该字段被指定用作我想要清理的 CSV（逗号分隔值）。

例如额外的逗号：`val1, ,val2, val3`或尾随逗号`val1, val2,`

如果它是最后一个字符，我如何制作一个替换`, ,`并删除最后一个字符的 SQL ？`,``,`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T18:18:40.003

`regexp_replace`如果使用 oracle db，则可以使用函数

```
select  REGEXP_REPLACE(REGEXP_REPLACE('val1, ,val2, val3,', ',\s,', ','),'[,]$','')
from dual 
```

在 MySql 中，您可以编写自己的函数，就像在[Rasika 的博客中一样](http://techras.wordpress.com/2011/06/02/regex-replace-for-mysql/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T18:10:20.180

```
SELECT REPLACE(columnName, ', ,', ', ')
FROM   TableName 
```

*这可能并不总是有效，尤其是当逗号之间有多个空格时。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T19:06:35.843

最终使用了类似的选择器并替换

```
-- clean tags, remove empty tags
Update [myTable]
set [taglist] = REPLACE([taglist], ', ,', ', ')
  WHERE [taglist] like '%, ,%' -- not really needed, I know

  -- remove last comma
Update [myTable]
set [taglist] = SUBSTRING([taglist], 0, LEN([taglist]))
  WHERE [taglist] like '%,' 
```

# python - 具有固定选项的多项选择。看不到选项（Django）

> ID：15840661
> 
> 赞同：1
> 
> 时间：2013-04-05T18:09:19.813
> 
> 标签：python, django, model, manytomanyfield, multiple-choice

我对 Django 很陌生，我正在努力做到这一点，以便我可以为一个字段选择多个选项，但我似乎遇到了问题

这是我的网站模型的简化版本

```
class Zone(models.Model): 
    zone = (
        ('NE','Northeast'),
        ('SE','Southeast'),
        ('SW','Southwest'),
        ('MW','Midwest'),
        ('CN','Canada'),
    )

class Site(models.Model):

    region = models.ManyToManyField(Zone)
    state = models.CharField(max_length = 30)
    ...

class SiteForm(ModelForm): 
    class Meta: 
        model = Site 
```

现在，有比我在这里显示的更多的区域，这可能意味着一个站点可能同时有多个区域。

简单的视图功能：

```
def add_site(request): 
    if request.method == 'POST':
        form = SiteForm(request.POST)
        if form.is_valid():
            profile = form.save(commit=False) 
            profile.user = request.user 
            profile.save()
        else:
            form = SiteForm()

    return render(request, 'index.html', {'form': form,}) 
```

据我了解，一旦表单出现在网页上，我应该会看到一个框，其中包含我在 Zone 类中指定的选项，但该框完全是空的。如何使用西北、东南、西南等选项填充它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:22:41.303

这不是它的工作原理。在 django 文档中查看[此定义。](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.Field.choices)这个例子很清楚，但对你来说，你也在尝试做一些非常奇怪的事情。

我怀疑您正在尝试为您的选择创建一个单独的模型 - 为此，您将使用[modelchoicefield](https://docs.djangoproject.com/en/dev/ref/forms/fields/#django.forms.ModelChoiceField)或[modelmultiplechoicefield](https://docs.djangoproject.com/en/dev/ref/forms/fields/#django.forms.ModelMultipleChoiceField) - 为此您只需将 Zone 模型定义为实际模型；你所拥有的根本不是 Django 模型。

此外，“站点”是 django 提供的模型 - 你应该没问题，但如果你也使用 django 提供的身份验证，你可能会遇到一些难以诊断的问题。

# javascript - 图表 - 实现有序的异步脚本加载？

> ID：15840664
> 
> 赞同：0
> 
> 时间：2013-04-05T18:09:36.177
> 
> 标签：javascript, head.js

为了提高性能，有很多方法可以异步加载 JavaScript，如这篇[SO 帖子所示。](https://stackoverflow.com/questions/4396849/does-the-script-tag-position-in-html-affects-performance-of-the-webpage)

但是，通常，如果您需要，这些方法不会保留顺序，例如依赖关系。

您可以通过哪些方式获得异步加载的好处，同时在需要时保持排序。

骨干依赖是一个很好的例子。

(require.js, jquery.js) -> 主干.js

是否有实现这一点的库中可用的承诺或队列的实现？

看起来[head.js](http://headjs.com/)还没有使用承诺或队列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:16:42.353

简单的解决方案：使用[Promises](http://wiki.commonjs.org/wiki/Promises)。[`.ajax`](http://api.jquery.com/jQuery.ajax/)在 jQuery 中，从 1.5 版开始提供 Promise。

如果你不能使用第三方库，你可以这样做：

```
var resourceData = {};
var resourcesLoaded = 0;

function loadResource(resource, callback) {
    var xhr = new XMLHttpRequest();
    xhr.onload = function() {
        var state = this.readyState;
        var responseCode = request.status;

        if(state == this.DONE && responseCode == 200) {
            callback(resource, this.responseText);
        }
    };

    xhr.open("get", resource, true);
    xhr.send();
}

//Assuming that resources is an array of path names
function loadResources(resources) {
    for(var i = 0; i < resources.length; i++) {
        loadResource(resources[i], function(resource, responseText) {

            //Store the data of the resource in to the resourceData map,
            //using the resource name as the key. Then increment the
            //resource counter.
            resourceData[resource] = responseText;
            resourcesLoaded++;

            //If the number of resources that we have loaded is equal
            //to the total number of resources, it means that we have
            //all our resources.
            if(resourcesLoaded === resources.length) {
                //Manipulate the data in the order that you desire.
                //Everything you need is inside resourceData, keyed
                //by the resource url. 
                ...
                ...
            }                    
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T18:19:46.903

尝试实现和使用 Combres 库。

[https://www.nuget.org/packages/combres](https://www.nuget.org/packages/combres)

装载订单只是众多好处之一。缩小、css 变量、路径中的 tilda 使用（如在 asp.net 中）等只是其中的一些好处，以及组合和缓存。

# python - 输入与 raw_input：Python 交互式 Shell 应用程序？

> ID：15840667
> 
> 赞同：4
> 
> 时间：2013-04-05T18:09:49.787
> 
> 标签：python, shell, undefined, interactive

我正在解决这个问题的答案：[Python Interactive Shell Type Application](https://stackoverflow.com/questions/9340391/python-interactive-shell-type-application)

我的代码看起来像这样

```
def main():
  while True:
    s = input('> ')

    if s == 'hello':
      print('hi')

    if s == 'exit':
      break

if __name__ == "__main__":
  main() 
```

如果我运行它并输入 hello，我会得到

```
 File "<string>", line 1, in <module>
NameError: name 'hello' is not defined 
```

我应该如何收听文本，并根据结果调用不同的函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T18:14:07.230

您在 Python 2.x 下运行它，其中`input()`实际评估您作为 Python 表达式键入的内容。因此，它正在寻找一个名为的*变量*`hello`，并且由于您尚未定义一个变量，因此它会引发错误。要么使用 Python 3.x，要么使用`raw_input()`.

从您的括号中，`print`我假设您打算在 Python 3.x 下运行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T18:34:33.060

```
if s == 'hello':
  print('hi')

elif s == 'exit':
  break

else:
  print('Undefined input') 
```

这应该处理未定义的用户输入。

# c++ - 向富文本框添加格式

> ID：15840670
> 
> 赞同：1
> 
> 时间：2013-04-05T18:10:00.820
> 
> 标签：c++, winapi, richtextbox, rtf

我有一个丰富的编辑控件，我想在其中添加格式化文本，但它不起作用：

```
const char* str="{\rtf1\ansi{\fonttbl\f0\fswiss Helvetica;}\f0\pard\
This is some {\b bold} text.\par\
}";
    LoadLibrary("riched32.dll");

    HWND hEdit= CreateWindowEx(WS_EX_CLIENTEDGE, RICHEDIT_CLASS, str,
        WS_CHILD | WS_VISIBLE | WS_VSCROLL | ES_MULTILINE | ES_AUTOVSCROLL 
| ES_READONLY, 0, 0, 100, 100,
        hwnd, (HMENU) IDC_MAIN_EDIT, GetModuleHandle(NULL), NULL); 
```

我知道我可以使用`PARAFORMAT`和添加格式`CHARFORMAT`，并向控件发送消息，如下所示：

```
PARAFORMAT pf;
CHARFORMAT cf;

memset( &cf, 0, sizeof cf );
cf.cbSize = sizeof cf;
cf.dwMask = CFM_BOLD;
cf.dwEffects = CFE_BOLD;
SendMessage( hEdit, EM_SETCHARFORMAT, SCF_SELECTION, (LPARAM) &cf);
SendMessage( hEdit, EM_REPLACESEL, FALSE, (LPARAM) "bold "); 
```

但是我怎样才能使第一个工作，或者如果没有办法，有没有比第二个更简单的方法？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:28:15.553

丰富的编辑控件不会以您在第一个代码块中尝试的方式接受 RTF。要使 RTF 进入控件，您需要使用[ES_STREAMIN](http://msdn.microsoft.com/en-gb/library/windows/desktop/bb774302%28v=vs.85%29.aspx)消息。

# jquery - 启用复选框列表在 IE、asp.net、jquery 中不起作用

> ID：15840680
> 
> 赞同：0
> 
> 时间：2013-04-05T18:10:35.167
> 
> 标签：jquery, asp.net, checkboxlist

```
<asp:CheckBoxList ID="chkList" runat="server" Enabled="false" >
    <asp:ListItem Text="1" Value="1"></asp:ListItem>
    <asp:ListItem Text="2" Value="2"></asp:ListItem>
</asp:CheckBoxList>

<asp:Button ID="btnFoo" runat="server" Text="Test" />

<script type="text/javascript" language="javascript">
    $(document).ready(function () {
        $('#<% = btnFoo.ClientID %>').click(function () {
            //var targetValue = 2;
            var items = $('#<% = chkList.ClientID %> input:checkbox');
            for (var i = 0; i < items.length; i++) {
                //alert(i);
                //if (items[i].value == targetValue) {
                    items[i].checked = true;
                    // break;
                //}
            }

            $('#<%= chkList.ClientID%>input:checkbox').removeAttr('disabled');                                                    return false;
        })
    });
</script> 
```

注意：它适用于 Chrome，FF 不适用于 IE

它在 IE8 中没有工作，这是下面的代码。它检查所有复选框，但将它们禁用，请问有什么解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:14:26.167

每个人的脚本都适用于普通的 HTML 页面。但是，您正在使用**按钮控件**，除非您明确取消事件，否则它会**回发到服务器。**

`checkAll`返回 false 到 onclick 事件，这样它就不会回发到服务器。

![在此处输入图像描述](https://i.stack.imgur.com/7xB9m.png)

```
<%@ Page Language="C#" AutoEventWireup="true" 
CodeBehind="WebForm7.aspx.cs" Inherits="WebApplication2010.WebForm7" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:CheckBoxList ID="chkList" runat="server" Enabled="False">
            <asp:ListItem Text="1" Value="1"></asp:ListItem>
            <asp:ListItem Text="2" Value="2"></asp:ListItem>
        </asp:CheckBoxList>
        <asp:Button ID="btnFoo" runat="server" Text="Test" 
            OnClientClick="return checkAll();" />
        <script type="text/javascript" language="javascript">
            function checkAll() {
                $('#<% = chkList.ClientID %> :checkbox').each(function () {
                    $(this).prop("checked", "true").prop("disabled",false);
                });
                return false;
            }
        </script>
    </div>
    </form>
</body>
</html> 
```

***感谢@Hanlet Escaño。***

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T18:21:04.043

尝试使用该`prop`属性而不是`.checked`：

```
$("#btn").on("click",function(){
    $('input:checkbox').each(function(){
     $(this).prop("checked", "true");
    });
}); 
```

**jsFiddle**：http: [//jsfiddle.net/hxS7M/1/](http://jsfiddle.net/hxS7M/1/)

**编辑**：这也将使它们启用。

```
$("#btn").on("click",function(){
    $('input:checkbox').each(function(){
     $(this).prop("checked", "true").prop("disabled",false);
    });
}); 
```

**jsfiddle**：http: [//jsfiddle.net/hxS7M/4/](http://jsfiddle.net/hxS7M/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T18:42:06.453

要启用它们，请执行此操作

```
$('#<%= chkList.ClientID%>input:checkbox').prop('disabled', false); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T18:29:28.123

尝试这个：

 **```
$(document).ready(function () {
  $('#btnFoo').click(function () {
     $('#chkList input:checkbox').each(function(i,e) {
        $(e).attr("checked", true);                       
     })
   });
}) 
```**

# c# - 在 rdlc 报告中显示来自数据库的图像

> ID：15840682
> 
> 赞同：0
> 
> 时间：2013-04-05T18:10:37.013
> 
> 标签：c#, rdlc

我正在尝试在报告中显示与之相关的每个人的照片`rdlc`。我尝试使用图像并将其源设置为数据库。

但是，它不起作用。我已将图像以格式存储在`SQLite`数据库中。`BLOB`我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:19:00.280

1.  在您的 *.rdlc [设计] 中删除要显示图像的列的文本框并从工具箱中插入一个**图像控件。**

2.  当您将图像拖到该单元格时，会`Image Properties`出现对话框。选择`Database`for`Select the image source`并选择正确的字段和 MIMe 类型。

# python - 使用“pywinauto”控制程序 (Windows XP)

> ID：15840684
> 
> 赞同：0
> 
> 时间：2013-04-05T18:10:39.513
> 
> 标签：python, windows-xp, pywinauto

我几乎是 Python 新手，我开始使用模块“pywinauto”来控制我用于论文的程序。

我做的一切都是这样的：从 pywinauto 导入应用程序

```
prog=application.Application()
prog.start_('RAMPlus.exe')
prog.RAMPlus.MenuSelect('File->New') 
```

直到这里一切都很好，但现在“新建”窗口是这样的：

![新窗口的截图](https://i.stack.imgur.com/6FcA6.jpg)

2 个表，1 个名为“左上”，另一个名为“右下”。每个表有两行“Lat：”和“Long：”，每行有 3 行。我需要修改每一行的值

如果我尝试

```
a.New.UpperLeftCombo.Click() 
```

我收到消息“pywinauto.controls.win32_controls.StaticWrapper object at 0x013A9BF0>”所以我认为“pywinauto”承认“左上角”和“右下角”，但其余的我不知道如何选择。

有任何想法吗？

PS：我在某处看到pywinauto的创建者，用户“markm”在这里回答问题。我可以在这篇文章中标记他或类似的东西，以便他可以看到吗？我是网站新手所以不知道

非常感谢您的帮助

编辑：你知道我是否可以使用 pywinauto 将窗口的全部内容复制到 txt 文件中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:27:23.973

您可能无法直接在表格中“选择”一行。pywinauto 中不会有诸如`a.New.UpperLeftCombo.SelectRow()`.

相反，您可以做的是将按键发送到表格以选择一行，然后选择它。例如，您可以使用向上和向下箭头键选择一行，然后按空格键选择它。使用[TypeKeys](http://pywinauto.googlecode.com/hg/pywinauto/docs/code/pywinauto.controls.HwndWrapper.html#pywinauto.controls.HwndWrapper.HwndWrapper.TypeKeys)方法`HwndWrapper`将按键发送到控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T06:21:16.367

pywinauto 如果是 Windows ListView 常用控件，则可以使用表。ListViewWrapper 有足够的表格方法： `ColumnCount(), GetSelectedCount(), Select(item)`等。

我不确定您是否一直在使用表格控件`a.New.UpperLeftCombo.Click()`，它似乎`UpperLeftCombo`只是一些文本（`pywinauto.controls.win32_controls.StaticWrapper object at 0x013A9BF0>`）。

尝试获取窗口的所有控件并查找`ListView`控件。

您可以使用`a.New.print_control_identifiers()`或最简单的方法是使用 pywinauto 的 GUI 工具之一。纯属偶然，我是其中之一的作者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T15:16:43.147

我正在设法用 Swapy 解决它，所以这个问题得到了解决。

还有一个问题，“pywinauto”和“swapy”在 64 位系统上不起作用吗？我有两个工作区，一个 32 位和一个 64 位，我真的很想在这两个工作区工作

# java - CardLayout，通过ButtonClick在JPanels之间切换

> ID：15840686
> 
> 赞同：4
> 
> 时间：2013-04-05T18:10:50.780
> 
> 标签：java, swing, awt, layout-manager, cardlayout

我想通过单击 JPanel 上的按钮在 JPanel 之间切换。

例如：我有一个带有 JButton simknop 的 JPanel sim 和带有 JButton helpknop 的 JPanel 帮助 我想通过单击按钮在这两个 JPanel 之间切换。当我单击 JButton simknop 时应该出现 JPanel 帮助，当我单击 JButton 帮助时应该出现 JPanel sim。

您可以在下面找到不同的类：

## main.java

```
public class main extends JFrame
{

    JPanel cards;
    sim sim;
    help help;

    public main()
    {
        this.setSize(1024,768);
        //this.setLayout(new BoxLayout(this, BoxLayout.Y_AXIS));
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.setTitle("Crazy Bombardement");
        this.setLocation(800, 100);//standaard in de hoek van het scherm

        cards = new JPanel();
        cards.setLayout(new CardLayout());
        sim = new sim();
        help = new help();

        cards.add(sim, "SIM");
        cards.add(help, "HELP");    

        this.add(cards);
        this.setVisible(true);
    }

    public static void main(String[] args) 
    {
        new main();
    } 
```

## sim.java

```
public class sim extends JPanel
{
    JButton simknop;

    public sim()
    {
        simknop = new JButton("simknop");
        this.add(simknop);
        this.setBackground(Color.black);
    }

} 
```

## 帮助.java

```
public class help extends JPanel
{
    JButton helpknop;

    public help()
    {
        helpknop = new JButton("helpknop");
        this.add(helpknop);
        this.setBackground(Color.red);
    } 
```

我想为此使用 CardLayout，但我不知道如何让它工作以收听不同的 ActionListener。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T18:53:31.957

1) 按钮不应位于 CardLayout 中的每个面板上。它们需要位于另一个始终可见的外部面板上，无论卡片面板上显示的是哪张卡片。

2）一旦你的按钮定位正确，你会为每个按钮添加一个 ActionListener，其 actionPerformed 方法看起来像（以 SIM 按钮为例）：

```
CardLayout cl = (CardLayout) cards.getLayout();
cl.show(cards, "SIM"); 
```

延伸阅读：[如​​何使用 CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)

**编辑：**理论上，您可以将按钮直接放在卡面板上，但它会是每个面板上的相反按钮（即 SIM 按钮将位于帮助面板上，反之亦然）。

# c# - How to read command line parameters passed from VB6 IDE in a .NET library?

> ID：15840687
> 
> 赞同：3
> 
> 时间：2013-04-05T18:11:00.393
> 
> 标签：c#, .net, vb6

I have app1.exe (built with VB6) which takes a bunch of command line parameters. It calls lib1.dll - a C#/.NET interop library which needs access to the command line parameters of the EXE. I use `Environment.CommandLine` to read the command line params and that works great.

When I am debugging app1.exe in the VB6 IDE, I typically go into project properties, Make tab and set the command line parameters textbox manually. However, the .NET library, when called, doesn't see the command line parameters at all. It just sees that the entire thing is running under the VB6.exe process.

That makes sense (since when debugging, it really does run under VB6.exe), but it makes it difficult to debug, since .NET library never gets access to the actual command line parameters.

My question: short of passing up the command line parameters manually to the .NET lib, is there any other way for it to see them when debugging in the VB6 IDE?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T21:49:40.793

这只是 VB6 IDE 设计方式的核心。当您调试 VB6 代码时，您不会运行进程，而是运行解释器。它执行 p 代码，而不是机器代码。这是一个意外的好功能，它允许调试您制作的 VB6 代码和 .NET 代码 [ComVisible]。这通常是不可能的，只能有一个调试器附加到一个进程。这也解释了为什么您的 .NET 调试器会看到 VB6.exe 进程，该进程同时具有解释器和调试器。

因此，当您使用 Environment.CommandLine 时，您实际上是在读取传递给 VB6 IDE 的命令行。通常这是一个空的。

正确的做法是明确的：不要试图通过后门获取信息。只需在对象上设置 VB6 代码集属性即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T23:33:01.573

您可能可以使用您想要进行调试运行的命令行参数来启动 VB6 IDE。虽然看起来很不方便（每次运行之前都必须重新启动 IDE）。如果 .NET 库关心作为命令行一部分的程序名称，它也不应该工作。

替代方法可以是在修改运行 VB6.exe 进程的命令行之后进行。由于命令行在创建时被复制到进程的地址空间中，因此进程可以修改它。理论上。坏消息是，据我所知，没有支持的方法来做到这一点。并且实施不受支持的方式可能很棘手。

另一种选择可能是 .NET 库测试它是否在 VB6.exe 下运行（这应该从命令行清楚），并在这种调试场景中从一些替代存储中获取数据。

## 编辑

[下面的代码改变了GetCommandLine](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683156%28v=vs.85%29.aspx) WinAPI 函数返回的内存位置。希望在幕后也能使用同样的函数`Environment.CommandLine`。

我还没有使用 .NET 库测试过代码（还没有），但你还是想试试看。为了尝试这种方法：

使用任意但足够长的命令行参数字符串运行 VB6 IDE (VB6.exe)。安排`SetCmdLineWhenRunInVB6IDE`在VB6 IDE中运行时执行以下程序。它旨在用项目参数中设置的值替换 IDE 的命令行。`GetCmdLine`并且`SetCmdLine`仅仅是促进探索的帮手。

```
Option Explicit

Private Declare Function GetCommandLine _
    Lib "kernel32" Alias "GetCommandLineW" () As Long
Private Declare Function lstrlen _
    Lib "kernel32" Alias "lstrlenW" (ByVal lpString As Long) As Long
Private Declare Sub CopyMemory _
    Lib "kernel32" Alias "RtlMoveMemory" (ByVal pDst As Any, ByVal pSrc As Any, ByVal ByteLen As Long)

Public Function GetCmdLine() As String
    Dim hStr As Long
    Dim hLen As Long

    hStr = GetCommandLine
    hLen = lstrlen(hStr)
    If hLen > 0 Then
        GetCmdLine = Space$(hLen)
        CopyMemory StrPtr(GetCmdLine), hStr, (hLen) * 2
    End If
End Function

Public Sub SetCmdLine(sNewCmdLine As String)
    Dim hStr As Long
    Dim hLen As Long
    Dim sBuf As String

    hStr = GetCommandLine
    hLen = lstrlen(hStr)
    If hLen > 0 Then
        Dim i As Long, hEndMark As Long

        sBuf = Space$(hLen)
        hEndMark = IIf(Len(sNewCmdLine) < Len(sBuf), Len(sNewCmdLine), Len(sBuf))

        For i = 1 To hEndMark
            Mid$(sBuf, i) = Mid$(sNewCmdLine, i)
        Next i

        CopyMemory ByVal hStr, StrPtr(sBuf), LenB(sBuf)
    End If
End Sub

Public Sub SetCmdLineFromVBACommand()
    Dim sVBACmdLine As String

    sVBACmdLine = """" & App.Path & "\" & App.EXEName & ".exe"" " & VBA.Command$
    SetCmdLine sVBACmdLine
End Sub 
```

# asp.net-mvc-4 - @Viewbag not displaying anything

> ID：15840688
> 
> 赞同：0
> 
> 时间：2013-04-05T18:11:05.753
> 
> 标签：asp.net-mvc-4

I'm making a simple quiz in ASP.NET MVC4\. This is my first application so I'm really new to this.

The problem is, when I display @Viewbag.ans1 (or ans2 etc.), nothing displays. I've done a lot of searching, but I think I may have more than one problem.

Per asawyer's question, the reason I didn't use the Model was that I figured I didn't need a database to keep track of the user's answers and that Viewbag would suffice for that (not sure if I figured right though). I am using it for something else though (the quiz answers).

Here is my Results View. The @Viewbag.ans1 displays nothing on output.:

```
@{
    ViewBag.Title = "Results";
}

<h2>Results</h2>

<p># Correct: 9/10</p> <!--hardcoded, will change later-->

<p>Grade: A </p> <!--hardcoded, will change later-->
<p>Your Answers: </p>
<p>1\. @ViewBag.Ans1</p>
<p>2\. @ViewBag.Ans2 </p>
<p>3\. @Html.Raw(ViewBag.Ans3)</p> <!--Trying a different way here-->
<p>4\. @Html.Raw(ViewBag.Ans4)</p> <!--Here too-->
<p>5\. @Html.Raw(ViewBag.Ans5)</p> <!--Here too-->
<p>6\. @ViewBag.Ans6</p>
<p>7\. @ViewBag.Ans7</p>
<p>8\. @ViewBag.Ans8</p>
<p>9\. @ViewBag.Ans9</p>
<p>10\. @ViewBag.Ans10</p>

<div>
    @Html.ActionLink("Retry the test?", "Index")
</div> 
```

Here is my Question_1 View. I'm only showing this because this is where I'm setting my Answer variable in my @Html.ActionLink below:

```
@{
    ViewBag.Title = "Question_1";
}

@using (Html.BeginForm()) 
{
    @Html.ValidationSummary(true)
}
<ol class="round">
    <li class="one">
        What is the name of this website?
    </li>
</ol>
        @Html.ActionLink("Yes", "Question_2", new{ Answer = true} )
        @Html.ActionLink("No", "Question_2",  new{ Answer = false} ) 
```

Here is my Quiz_Controller:

```
using System;
using System.Collections.Generic;
using System.Web;
using System.Web.Mvc;

namespace Matts_Quiz.Controllers
{
    public class QuizController : Controller
    {
        // 
        // GET: /Index/ 

        public ActionResult Index()
        {
            return View();
        }

        // 
        // GET: /Question_1/ 

        public ActionResult Question_1()
        {
            return View();
        }

        // 
        // GET: /Question_2/ 

        public ActionResult Question_2(bool Answer)
        {
            if (Answer == true)
            {
                ViewBag.Ans1 = "Y";
            }
            else if (Answer == false)
            {
                ViewBag.Ans1 = "N";
            }
            else
            {
                ViewBag.Ans1 = "Miss";
            }
            return View();
        }
(...etc...) 
```

# c++ - 在 C++ 中连接 char 数组（棘手）

> ID：15840693
> 
> 赞同：0
> 
> 时间：2013-04-05T18:11:31.193
> 
> 标签：c++, arrays, char

所以我有一个练习，我必须连接 2 个字符数组，如下所示：

```
const int MAXI=100;
char group[MAXI+7]="things/"
char input[MAXI];

cin >> input;
//Doing something here!
cout << group << endl; 
```

必须让 smthing 发生，所以它返回 -- things/input_text --

棘手的部分是我不允许使用指针、字符串库或任何类型的动态数组。

该怎么办？

编辑：我不需要打印它，我需要变量具有值：things/input_text，因为我将用于其他东西！

EDIT2：我不能使用 < string > 库，这意味着我不能使用 strcat() 或该库上的任何东西。我提供了另一个模块，其触发方式如下：

```
void thing(group, stuff, more_stuff); 
```

就是这样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T18:19:43.893

像这样的东西？

```
#include <iostream>

using namespace std;
const int MAXI=100;

int main()
{
    char group[MAXI+7]="things/";
    char input[MAXI];
    cin >> input;
    for(int i=0; i<MAXI; i++)
    {
        group[7+i]=input[i];
        if(input[i]=='\0') break;//if the string is shorter than MAXI
    }
    cout << group << endl;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T18:23:37.513

```
#include <iostream>

using namespace std;

int main(int argc, char **argv)
{
    const int MAXI=100;
    char group[MAXI+7]="things/";
    char input[MAXI];

    // Warning: this could potentially overflow the buffer
    // if the user types a string longer than MAXI - 1
    // characters
    cin >> input;

    // Be careful - group only contains MAXI plus 7 characters
    // and 7 of those are already taken. Which means we can only
    // write up to MAXI-1 characters, including the NULL terminator.
    for(int i = 0; (i < MAXI - 1) && (input[i] != 0); i++)
    {
        group[i + 7] = input[i];
        group[i + 8] = 0; // ensure null termination, always
    }

    cout << group << endl;

    return 0;
} 
```

# mysql - meaning of percent symbol in INFORMATION_SCHEMA.PROCESSLIST HOST column

> ID：15840696
> 
> 赞同：4
> 
> 时间：2013-04-05T18:11:34.053
> 
> 标签：mysql, information-schema

I'm running a query against INFORMATION_SCHEMA.PROCESSLIST (shown below). The HOST column in the result is showing %:port_number instead of ip_address:port_number.

```
select *
from INFORMATION_SCHEMA.PROCESSLIST
where 1=1
and COMMAND <> 'Sleep'; 
```

What is the meaning of the percent symbol (is it just, MySQL can't figure it out?), and why does it not show the incoming IP address?

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-05T19:11:32.400

'%' 字符是一个可以匹配任何主机的通配符。

# javascript - 使用 javascript 隐藏/显示 HTML 表单（按下按钮）

> ID：15840700
> 
> 赞同：3
> 
> 时间：2013-04-05T18:11:41.460
> 
> 标签：javascript, html, forms, hide, show

我的名字是迈克尔托斯卡诺。我目前正在为学校做一个 3 层项目，但是我被困在一个看似微不足道的步骤上。现在，我正在尝试通过单击一个按钮隐藏单个 HTML 表单，并通过单击另一个按钮显示。HTML 页面上只有 2 个表单。如果我尝试隐藏第二个表单，我现在所拥有的工作，但是如果我尝试仅隐藏第一个表单，它会隐藏整个页面，除了页面顶部的两个按钮（两个表单）。我想也许我不小心将第二个表单放在了第一个表单中（如果可能的话），但是在查看我的代码后，它看起来（至少对我来说）就像我用 . 反正整个HTML文件如下：

```
 <!DOCTYPE html>
    <html><head>

    <button type=button id=f1 onclick="func(1)">Order Form</button>
    <button type=button id=f2 onclick="func(2)">Retrieval Form</button>

    <script type="text/javascript">
    function func(a) {
        if(a==1) {
            document.getElementById("order").style.display="none";
        }
        if(a==2) {
            document.getElementById("order").style.display="block";
        }
    }
    </script>

    <script type="text/javascript">
        function showValue(newValue)
        {
            document.getElementById("range").innerHTML=newValue;
        }
    </script>
    </head>

   <body> 
<form id=order action=form.php >

    <p><center>Name: <input type=text
        name="name"
        placeholder="Enter Your Name"
        required
        autocomplete="on"></center><br>

    <center>Email: <input type=text
        name="email"
        placeholder="Enter Your Email"
        required
        autocomplete="off"></center><br>

    <center>Password: <input type=text
        name="password"
        placeholder="15 Characters Or Less"
        required
        autocomplete="off"></center><br>

    <center>Address: <input type=text
        name="address"
        placeholder="Enter Your Address"
        required
        autocomplete="off"></center><br>

    <center>Laptops: <input type=range 
        name=laptop 
        value=0 
        min=0 
        max=10 
        onChange="showValue(this.value)">

    <center>Monitors: <input type=range 
        name=monitor 
        value=0 
        min=0 
        max=10 
        onChange="showValue(this.value)">

    <center>Mouses: <input type=range 
            name=mouse  
        value=0 
        min=0 
        max=10 
        onChange="showValue(this.value)">

    <center>Keyboards: <input type=range
        name=keyboard
        value=0
        min=0
        max=10
        onChange="showValue(this.value)">

    <br>
    <br>

    <center>Shipping Carrier: <SELECT name="delivery">
        <option value="fedex">FEDEX</option>
        <option value="ups">UPS</option>
    </SELECT></center>

    <br>

    <center>Would you like an email receipt?<br>
    <center>Yes <input type="radio" name="group1" value=1> No
    <input type="radio" name="group1" value=0 checked></center><br>

    <br>

    <center><input type=submit value="Submit Order"></center></p>

    </form>

    <form id=retrieve action=form2.php>

    First Name: <input type=text name=first><br>
    Last Name: <input type=text name=last><br>
    Password: <input type=password name=p1><br>
    Retype Password: <input type=password name=p2><br>
    <input type=submit>

    </form>
</body>
</html> 
```

我想指出，我对 HTML 和 javascript 还很陌生，所以如果任何人的回复都可以提供简短的解释，我将不胜感激。谢谢大家。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T18:24:55.557

有几个问题：

*   您不需要为每个 Javascript 函数使用单独的脚本标记。只需将所有 Javascript 放在一个脚本标签中即可。
*   我强烈建议使用 CSS 来居中元素而不是`<center>`标签。你有许多未关闭`<center>`的标签，要启动。就个人而言，我认为左对齐看起来比居中好得多。
*   如果您的 HTML 是完整的文档，则需要标签`<head>`和`<body>`. 使用[W3C 标记验证服务](http://validator.w3.org/)确保您拥有有效的 HTML 代码。
*   HTML 中的属性值应该用引号引起来，`<form id=order>`例如`<form id="order">`. 有可能甚至`required`需要`required="required"`。
*   使用 javascript 而不是放置内联事件处理程序来“连接”javascript 事件被认为是最佳实践。例如：

    ```
    document.getElementById('f1').onclick = function () {
        func(1);
    }; 
    ```

    我认为实际上最好在按钮上放置一个数据属性，该按钮具有显示/隐藏表单的 id，然后在 onclick 事件中（现在只需要一个没有 if 语句的函数版本）你只是拉出expando数据值。例如`<button data-for="order">`.

*   在您的显示/隐藏代码中，您只使用一种表单。对另一个的引用在哪里？此外，要获得您正在寻找的切换效果，您需要检测表单是否已经隐藏并适当地更改其显示样式。
*   您应该研究 Javascript`==`和`===`.
*   您的 HTML 元素之间不需要如此多的垂直空间。我完全赞成打破长行，比大多数人都多，但是当标记如此分散时，它变得难以扫描。可以放在`<br>`行尾。
*   许多 Javascript 程序员更喜欢将左大括号放在前一行的末尾。这是一个次要的考虑，但它有助于节省空白。你会看到在我的代码示例中我遵循了这个约定。这个选择由你。
*   您的`<select>`标签应该是小写的。
*   “15 个字符或更少”是不正确的语法。它应该是“15 个字符或更少”或“15 个或更少字符”甚至更好，“最多 15 个字符”

请参阅[此 JS Fiddle](http://jsfiddle.net/ErikE/E5NEr/)，了解我正在运行的已清理 HTML 文档的版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T19:11:03.650

首先，您必须将按钮移动到文档正文中

之后，您可以使您的功能更好一些。

```
//names of functions as well as attributes should describe them
function show(elementId) { 
  //now we kick out both conditional we do not need them anymore

  //we hide both forms
  document.getElementById("order").style.display="none";
  document.getElementById("retrieve").style.display="none";

  //and then we simply show wanted one isn't that nicer and cleaner?
  document.getElementById(elementId).style.display="block";
} 
```

现在当我们有了我们的功能时，我们可以将它应用到我们的按钮上

```
<button type="button" onclick="show('order');">Order Form</button>
<button type="button" onclick="show('retrieve');">Retrieval Form</button> 
```

如您所见，我们踢掉了它们的 ID，因为它们是不必要的，我们将属性放在引号中。这必须去身体元素而不是头部！

而不是这种形式的块：

```
<p><center>Name: <input type=text
name="name"
placeholder="Enter Your Name"
required
autocomplete="on"></center><br> 
```

你可以像这样做得更好：

```
<p style="text-align:center"><input type="text"
  name="name"
  placeholder="Enter Your Name"
  required="required"
  autocomplete="on" />
</p> 
```

（是的，每一行都是一个新段落，所以你不需要使用 BR 标签）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T18:23:24.037

你的代码有很多问题：

1.  您`<center>`打开的标签多于关闭的标签
2.  你没有`<head>`也没有`<body>`标签。
3.  如果您想`func()`隐藏显示一种形式但隐藏另一种形式，则每种情况下都应该有两行 Javascript 代码，例如：`document.getElementById("order").style.display="none"; document.getElementById("retrieve").style.display="block";`
4.  您还应该找到一种默认隐藏第二种形式的方法。

# django - Django 新用户：NameError 即使在视图中定义了类

> ID：15840701
> 
> 赞同：0
> 
> 时间：2013-04-05T18:11:44.217
> 
> 标签：django, django-models, django-views

我是 python 的新手，甚至是 django 的新手。我目前正在关注 Effectivedjango 教程。我的项目文件夹具有以下结构。

```
addressbook
  - addressbook
      - _init_.py
      - settings.py
      - urls.py
      - wsgi.py
      - _init_.pyc
      - settings.pyc
      - urls.pyc
      - wsgi.pyc

  - contacts
      - forms.py
      - _init_.py
      - models.py
      - tests.py
      - views.py
      - forms.pyc
      - _init_.pyc
      - models.pyc
      - tests.pyc
      - views.pyc
      - templates
            - contact_list.html
            - edit_contact.html</li> 
```

## 意见：

```
# Create your views here.

from django.views.generic import ListView
from django.core.urlresolvers import reverse
from django.views.generic import CreateView
from contacts.models import Contact
import forms

class ListContactView(ListView):

    model = Contact
    template_name = 'contact_list.html'

class CreateContactView(CreateView):

    model = Contact
    template_name = 'edit_contact.html'
    form_class = forms.ContactForm

    def get_success_url(self):
        return reverse('contacts-list')

class UpdateContactView(UpdateView):

    model = Contact
    template_name = 'edit_contact.html'
    form_class = forms.ContactForm 
```

## 楷模：

```
from django.db import models

# Create your models here.
class Contact(models.Model):

    first_name = models.CharField(
        max_length=255,
    )
    last_name = models.CharField(
        max_length=255,

    )

    email = models.EmailField()

    def __str__(self):

        return ' '.join([
            self.first_name,
            self.last_name,
        ]) 
```

## 网址

```
from django.conf.urls import patterns, include, url

# Uncomment the next two lines to enable the admin:
# from django.contrib import admin
# admin.autodiscover()

import contacts.views

urlpatterns = patterns('',url(r'^$', contacts.views.ListContactView.as_view(),
        name='contacts-list',),
url(r'^new$', contacts.views.CreateContactView.as_view(),
    name='contacts-new',),

    # Examples:
    # url(r'^$', 'addressbook.views.home', name='home'),
    # url(r'^addressbook/', include('addressbook.foo.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    # url(r'^admin/', include(admin.site.urls)),
) 
```

当我尝试通过 virtualenv 从开发服务器运行它时，我收到以下错误：

```
Traceback:
...
File "/home/rudresh/tutorial/addressbook/addressbook/urls.py" in <module>
  7\. import contacts.views
File "/home/rudresh/tutorial/addressbook/contacts/views.py" in <module>
  23\. class UpdateContactView(UpdateView):

Exception Type: NameError at /new
Exception Value: name 'UpdateView' is not defined 
```

我以为我在视图中定义了 UpdateView，所以我真的不知道我做错了什么。任何建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:14:02.393

在您的观点中，您使用`ListView`,`CreateView`和`UpdateView`，但只导入`ListView`和`CreateView`。

**视图.py：**

```
from django.views.generic import ListView, CreateView, UpdateView
from django.core.urlresolvers import reverse
from contacts.models import Contact
import forms
... 
```

# javascript - 是否可以根据其他表单的输入来更改 HTML5 范围滑块的最小值和最大值？

> ID：15840702
> 
> 赞同：3
> 
> 时间：2013-04-05T18:11:44.477
> 
> 标签：javascript, jquery, html, max, minimum

参考这个：[http ://www.alainbruno.nl/form.html](http://www.alainbruno.nl/form.html)

So, for instance, when the race selected is Human I want the minimum and maximum of the age slider to be between 10-80, but when Faela is chosen I want it to be between 10-70\. 这可能吗？如果可以，怎么做？

如果可能的话，我希望它在滑块更改之前不提交比赛输入的情况下工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T19:06:38.093

当然，尝试添加这个：

```
$('#Race').change(function () {
    if (this.value == "faela") {
        $('#slider').prop({
            'min': 10,
            'max': 70
        });
    }
    if (this.value == "human") {
        $('#slider').prop({
            'min': 10,
            'max': 80
        });
    }
    $('#slider').val(10);
    output.html('10');
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/6F9Gr/)**

（请注意，在您的代码中，您的滑块以 14 和 60 的最小值/最大值开始，所以我将其更改为 10 和 80。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T19:09:56.813

当然，通过使用`objects`，您可以快速轻松地完成此操作，例如：

```
<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <title>Character Creation</title>
        <meta charset="UTF-8" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script>
            $(function(){
                //Range
                var slider = $("#slider"), val = slider.val(), output = $("#output");
                output.html(val);
                slider.on("change", function(){
                    output.html($(this).val());
                });
                //Change range values
                var minMax = {
                    human: [10, 80],
                    faela: [10, 70],
                    domovoi: [12, 99],
                    arcon: [5, 80],
                    tsaaran: [20, 100]
                };
                $("#Race").on("change", function(){
                    var ages = minMax[$(this).val()];
                    if(ages) {
                        slider.attr({
                            min: ages[0],
                            max: ages[1]
                        });
                        output.html(slider.val());
                    }
                });
            });
        </script>
    </head>
    <body>
        <h1>Form</h1>
        <form>
            <fieldset>
                <legend>Appearance</legend>
                <p>
                    <label for="Race">Select Race:</label>
                    <select name="Race" id="Race">
                        <option value="human">Human</option>
                        <option value="faela">Faela</option>
                        <option value="domovoi">Domovoi</option>
                        <option value="arcon">Arcon</option>
                        <option value="tsaaran">Tsaaran</option>
                    </select>
                </p>
                <p>
                    <label for="Gender">Select Gender</label>
                    <select name="Gender" id="Gender">
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                        <option value="other">Other</option>
                    </select>
                </p>
                <p>
                    <label for="slider">Select Age:</label> <input name="slider" type="range" min="14" max="60" id="slider" value="10" />
                    <span id="output"></span>
                </p>
            </fieldset>
        </form>
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T20:28:59.980

我看到其他人已经用很好的答案回答了你的问题。这是我在 Stackoverflow 的第一次尝试，因此是我的第一个答案。我对 JQuery 或 AJAX 不是很先进，但我使用了一个简单的 Javascript。

```
<!DOCTYPE html>
<html lang="en">
<head>
<script>
function changeRange(x,y) {
var input = document.getElementById("slider");
input.setAttribute("min", x);
input.setAttribute("max", y);
}
</script>
</head>
<body>
<h1>Form</h1>
<form>
<fieldset>
<legend>Appearance</legend>
<p>
<label>
Select Race:
</label>
<select id="Race" onchange="changeRange('10', '80')">
<option value="human">Human</option>
<option value="faela" >Faela</option>
<option value="domovoi">Domovoi</option>
<option value="arcon">Arcon</option>
<option value="tsaaran">Tsaaran</option>
</select>
</p>
<p>
<label>Select Gender</label>
<select id="Gender">
<option value="male">Male</option>
<option value="female">Female</option>
<option value="other">Other</option>
</select>
</p>
<p>
<label for="range">Select Age:</label> <input type="range" min="14" max="60" id="slider" value="10" name="range"> <span id="output"></span>
</p>
</fieldset>
</form>
</body>
</html> 
```

不是最好的答案，但我想试一试:)

# opengl-es-2.0 - Does the size of a texture image impact the performance of texture fetching?

> ID：15840705
> 
> 赞同：0
> 
> 时间：2013-04-05T18:11:52.520
> 
> 标签：opengl-es-2.0, textures, fragment-shader

Using OpenGL ES 2.0, does the size of the texture impact how long it takes to fetch from a texture? I would think that it should be almost constant time to fetch a color.

# api - GraphDatabase API how to deal with neo4j logging

> ID：15840715
> 
> 赞同：0
> 
> 时间：2013-04-05T18:12:21.770
> 
> 标签：api, logging, neo4j

Hi, I am trying to run a query using the following :

```
final GraphDatabaseService graphDatabaseService = new EmbeddedGraphDatabase("http://localhost:7474/db/data");
ExecutionEngine engine = new ExecutionEngine(graphDatabaseService,StringLogger.DEV_NULL);
ExecutionResult result = engine.execute("START n=node(0) RETURN n"); 
```

However, an exception is fired upon executiong the upon code :

> Exception in thread "main" java.lang.NoClassDefFoundError: scala/Function0

Can you give me advises on how to solve this issue, anyone ever had the same one ?

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:16:21.277

```
<dependency>
  <groupId>org.neo4j</groupId>
  <artifactId>neo4j-rest-graphdb</artifactId>
  <version>1.9.M04</version>
</dependency> 
```

然后在你的java代码中使用它，如下所示：

```
import org.neo4j.rest.graphdb.RestAPI;
import org.neo4j.rest.graphdb.RestAPIFacade;
import org.neo4j.rest.graphdb.query.RestCypherQueryEngine;
import org.neo4j.rest.graphdb.util.QueryResult;

import java.util.Map;

import static org.neo4j.helpers.collection.MapUtil.map;

public class RestApiTest {
    public static void main(String[] args) {
        final RestAPI api = new RestAPIFacade("http://localhost:7474/db/data");
        final RestCypherQueryEngine engine = new RestCypherQueryEngine(api);
        final QueryResult<Map<String,Object>> result = engine.query("start n=node({id}) return n.name, id(n) as id", map("id", 0));
        for (Map<String, Object> row : result) {
            long id=((Number)row.get("id")).longValue();
            String name= (String) row.get("n.name");
        }
    }
} 
```

# c++ - convert file path from windows to linux and back again, using boost::filesystem

> ID：15840718
> 
> 赞同：2
> 
> 时间：2013-04-05T18:12:35.580
> 
> 标签：c++, linux, windows, path, boost-filesystem

Is it me, or does boost::filesystem::path::make_preferred not convert "\" to "/"?

> davidan@kempt:~/Documents/prog/work!$ ../practice/./path_info c:\pitou foo/bar\baa.txt
> composed path:
> cout << -------------: "c:pitou/foo/bar\baa.txt"
> make_preferred()----------: "c:pitou/foo/bar\baa.txt"

I was rather hoping for

> c:\pitou\foo\bar\baa.txt

on windows and

> /pitou/foo/bar/baa.txt

(or something close) on POSIX

the source is here: [boost::filesystem tutorial](http://www.boost.org/doc/libs/1_53_0/libs/filesystem/example/path_info.cpp)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-06-26T14:59:10.727

在 Linux 上没有处理它的原因在这里很好地解释了：

[http://theboostcpplibraries.com/boost.filesystem-paths](http://theboostcpplibraries.com/boost.filesystem-paths)

引用：

> 如果在 Linux 上执行 Example 35.5，返回的值是不同的。大多数成员函数返回一个空字符串，除了 relative_path() 和 filename()，它们返回“C:\Windows\System”。这意味着字符串“C:\Windows\System”在 Linux 上被解释为文件名，这是可以理解的，因为它既不是路径的可移植编码，也不是 Linux 上依赖于平台的编码。因此，Boost.Filesystem 只能将其解释为文件名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-15T14:16:02.063

最终这样做了：

```
string f = filename;
#       ifdef BOOST_POSIX_API   //workaround for user-input files
            std::replace(f.begin(), f.end(), '\\', '/');        
#       endif 
```

必须有一个原因为什么尚未处理......？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-12T20:57:40.117

这不使用`boost`，但我手动实现了两个转换方向。

`FileSystemPathUtils.hpp`：

```
#pragma once

#include <string>

static const char *const WSL_FILE_PATH_HEADER = "/mnt";
static const char WINDOWS_FILE_PATH_SEPARATOR = '\\';
static const char UNIX_FILE_PATH_SEPARATOR = '/';

std::string windows_to_unix_file_path(std::string file_path, bool is_wsl = true);

std::string unix_to_windows_file_path(std::string file_path, bool is_wsl = true);

std::string windows_path_to_host_operating_system_path(std::string file_path, bool is_wsl = true); 
```

`FileSystemPathUtils.cpp`：

```
#include "FileSystemPathUtils.hpp"

#include <string>
#include <algorithm>
#include <sstream>
#include <utility>
#include <cstring>

std::string windows_to_unix_file_path(std::string file_path, bool is_wsl) {
    // Replace the slashes
    std::replace(file_path.begin(), file_path.end(), WINDOWS_FILE_PATH_SEPARATOR, UNIX_FILE_PATH_SEPARATOR);

    // Convert the drive letter to lowercase
    std::transform(file_path.begin(), file_path.begin() + 1, file_path.begin(),
                   [](unsigned char character) {
                       return std::tolower(character);
                   });

    // Remove the colon
    const auto drive_letter = file_path.substr(0, 1);
    const auto remaining_path = file_path.substr(2, file_path.size() - 2);
    file_path = drive_letter + remaining_path;

    std::stringstream stringstream;

    if (is_wsl) {
        stringstream << WSL_FILE_PATH_HEADER;
    }

    stringstream << "/";
    stringstream << file_path;

    return stringstream.str();
}

std::string unix_to_windows_file_path(std::string file_path, bool is_wsl) {
    if (is_wsl) {
        file_path = file_path.erase(0, strlen(WSL_FILE_PATH_HEADER));
    }

    // Delete the leading forward slash
    file_path.erase(0, 1);

    // Convert the drive letter to uppercase
    std::transform(file_path.begin(), file_path.begin() + 1, file_path.begin(),
                   [](unsigned char character) {
                       return std::toupper(character);
                   });

    // Replace the slashes
    std::replace(file_path.begin(), file_path.end(), UNIX_FILE_PATH_SEPARATOR,
                 WINDOWS_FILE_PATH_SEPARATOR);

    std::stringstream stringstream;
    stringstream << file_path.at(0);
    stringstream << ":";
    stringstream << file_path.substr(1, file_path.size() - 1);

    return stringstream.str();
}

std::string windows_path_to_host_operating_system_path(std::string file_path, bool is_wsl) {
#ifdef _WIN32
    return file_path;

#else
    return windows_to_unix_file_path(std::move(file_path), is_wsl);

#endif
} 
```

# java - 无法嵌套自定义 Jersey 提供程序

> ID：15840723
> 
> 赞同：0
> 
> 时间：2013-04-05T18:12:55.753
> 
> 标签：java, jersey, jax-rs

当我尝试从另一个自定义提供程序中引用一个自定义提供程序时，Jersey 会引发异常。

这个测试用例

```
public class NestedProvidersTest extends JerseyTest {
    public NestedProvidersTest() throws TestContainerException {
        super(new LowLevelAppDescriptor.Builder(new DefaultResourceConfig(Resource.class, ParentProvider.class, ChildProvider.class)).build());
    }

    @Test public void test() {
        resource().path("/").get(String.class);
    }

    @Path("/") public static class Resource {
        @Context private Parent parent;

        @GET public String get() {
            return "hello";
        }
    }

    public interface Parent {}
    public interface Child {}

    @Provider public static class ParentProvider extends PerRequestTypeInjectableProvider<Context, Parent> {
        @Context private Child child;

        public ParentProvider() {
            super(Parent.class);
        }

        @Override public Injectable<Parent> getInjectable(ComponentContext ic, Context context) {
            return new Injectable<Parent>() {
                @Override public Parent getValue() {
                    return new Parent(){};
                }
            };
        }
    }

    @Provider public static class ChildProvider extends PerRequestTypeInjectableProvider<Context, Child> {
        public ChildProvider() {
            super(Child.class);
        }

        @Override public Injectable<Child> getInjectable(ComponentContext ic, Context context) {
            return new Injectable<Child>() {
                @Override public Child getValue() {
                    return new Child(){};
                }
            };
        }
    }
} 
```

给了我例外

```
Apr 05, 2013 7:02:41 PM com.sun.jersey.test.framework.spi.container.grizzly2.GrizzlyTestContainerFactory$GrizzlyTestContainer <init>
INFO: Creating low level grizzly2 container configured at the base URI http://localhost:9998/
Apr 05, 2013 7:02:41 PM com.sun.jersey.server.impl.application.WebApplicationImpl _initiate
INFO: Initiating Jersey application, version 'Jersey: 1.17.1 02/28/2013 12:47 PM'
Apr 05, 2013 7:02:43 PM com.sun.jersey.spi.inject.Errors processErrorMessages
SEVERE: The following errors and warnings have been detected with resource and/or provider classes:
  SEVERE: Missing dependency for field: private NestedProvidersTest$Child NestedProvidersTest$ParentProvider.child

com.sun.jersey.test.framework.spi.container.TestContainerException: com.sun.jersey.spi.inject.Errors$ErrorMessagesException
    at com.sun.jersey.test.framework.spi.container.grizzly2.GrizzlyTestContainerFactory$GrizzlyTestContainer.<init>(GrizzlyTestContainerFactory.java:106)
    at com.sun.jersey.test.framework.spi.container.grizzly2.GrizzlyTestContainerFactory.create(GrizzlyTestContainerFactory.java:77)
    at com.sun.jersey.test.framework.JerseyTest.getContainer(JerseyTest.java:345)
    at com.sun.jersey.test.framework.JerseyTest.<init>(JerseyTest.java:220)
    at NestedProvidersTest.<init>(NestedProvidersTest.java:22)
[snip]
Caused by: com.sun.jersey.spi.inject.Errors$ErrorMessagesException
    at com.sun.jersey.spi.inject.Errors.processErrorMessages(Errors.java:170)
    at com.sun.jersey.spi.inject.Errors.postProcess(Errors.java:136)
    at com.sun.jersey.spi.inject.Errors.processWithErrors(Errors.java:199)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:770)
    at com.sun.jersey.api.container.ContainerFactory.createContainer(ContainerFactory.java:172)
    at com.sun.jersey.api.container.ContainerFactory.createContainer(ContainerFactory.java:134)
    at com.sun.jersey.test.framework.spi.container.grizzly2.GrizzlyTestContainerFactory$GrizzlyTestContainer.<init>(GrizzlyTestContainerFactory.java:102)
    ... 29 more 
```

我做错了什么，还是泽西岛不支持这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:46:19.837

更合适的问题应该是： `is this behavior not supported by Jersey 1.17?`

我不想玩猜谜游戏，所以我只能告诉你，这可以用 Jersey 2 来完成。

为什么它在 1.17 中不起作用？可能是因为`Child`在注册提供程序期间该依赖项不可用。

Jersey 2 使用 JSR-330 即 @Inject 和所有这些以及做某事的方法是使用[javax.inject.Provider](http://docs.oracle.com/javaee/6/api/javax/inject/Provider.html)。

然后，您将使用某种活页夹来注册注射剂，但在使用 Provider 时跳过所有细节，您不希望在注册期间注入 T 。稍后会在`Provider#get`

请求范围过滤器的示例：

```
@Inject
private Provider<ResourceInfo> resourceInfo; 
```

如果我只想做这些：

```
@Inject
ResourceInfo resourceInfo 
```

那么它就会失败，就像它对你失败一样。

如果你可以升级到2，那么我认为这是值得的。

# java - Notifications won't open file

> ID：15840724
> 
> 赞同：0
> 
> 时间：2013-04-05T18:13:06.740
> 
> 标签：java, android

I am tring to open an uploaded file through notifications, but it is not working, the notification appears but once I click on it, nothing happens.

This is the notification part of my code :

```
Uri uri= RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);

Intent i = new Intent();      
i.setAction(android.content.Intent.ACTION_VIEW);
i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
i.setDataAndType(Uri.parse("file://"+file_path), f.getString("type") );
i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

PendingIntent contentIntent = PendingIntent.getActivity(Main.this, 0,  i , 0); 

mNotifyManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
mBuilder = new NotificationCompat.Builder( BabupMain.this);
mBuilder.setContentTitle("test").addAction(android.R.drawable.alert_dark_frame, "hi",contentIntent) 
                                .setContentText("click to open the file")
                                .setLights(0xfff89829, 300, 5000)
                                .setOnlyAlertOnce(true)
                                .setSound(uri)
                                .setSmallIcon(android.R.drawable.ic_input_add);

mNotifyManager.notify( NOTIFICATION_ID , mBuilder.build()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:11:01.820

我没有使用 NotificationCompat，所以不知道它是否这样做，但我创建了一个 Intent 然后不得不使用

```
PendingIntent contentIntent = PendingIntent.getActivity(this,0, i, PendingIntent.FLAG_CANCEL_CURRENT); 
```

将打开文件的意图与通知联系起来

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:06:24.907

以您的方式设置 Intent*可能会*启动一个可以查看文件的应用程序，但如果没有应用程序与您的 Intent 匹配，则不会发生任何事情。

你有这段神秘的代码

{i.setDataAndType(Uri.parse("file://"+file_path), f.getString("type"))}

但没有提到“f”是什么，所以我不知道 {f.getString("type")) 是否会导致有效的 MIME 类型。

无论如何，这一切都是没有意义的。几乎在所有情况下，通知的内容意图都应该返回到创建通知的应用程序。这样做可以为用户提供最佳上下文。*从应用程序*中，允许用户发送另一个 Intent 来打开文件。

还要记住正确设置后堆栈。当前的实现不这样做，因此一旦查看文件，就会导致导航路径混乱。

# module - 可以实现 Apex 库或模块以导入 force.com 项目吗？

> ID：15840725
> 
> 赞同：3
> 
> 时间：2013-04-05T18:13:08.827
> 
> 标签：module, salesforce, apex-code

可以使用 force.com 开发项目。但是，是否可以开发 apex 代码库并将其导入项目中，有点像 maven 和 java 中的依赖项？如果是，应该如何进行？我正在探索这个框架。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T21:36:23.393

Apex 并没有真正的类似 Java 的包和依赖项的概念。您的大多数自定义类都位于一个大命名空间中，这有时会导致非常长的类名。有关更多信息，您可能需要查看[Force.com 平台的缺点](https://stackoverflow.com/questions/1664503/disadvantages-of-the-force-com-platform)

话虽如此，您可以制作文档中称为“包”的东西。但将其视为整个 Force.com 解决方案的插件。您可以创建一个仅包含一些代码库的包，但更常见的是构建带有自己的对象、visualforce 页面、报告等的包。基本上，您在[http://appexchange.com/](http://appexchange.com/)上看到的都是这样的包。 . 这可能是一个可怕的类比，但我会将它们与[WAR 文件](http://en.wikipedia.org/wiki/WAR_file_format_%28Sun%29)进行比较，而不是 JAR。

包可以管理（意思是开发它的一方控制它，你看不到他们的源代码，但你可以使用`global`例如带有关键字的方法）。非托管软件包也存在 - 您可以随意修改它们，删除不需要的东西。[Chatter Unfollow Rules](https://appexchange.salesforce.com/listingDetail?listingId=a0N30000003IP2gEAG)是非受管软件包的一个示例。另一个（让您在深入安装之前安装并浏览代码）可能是[http://code.google.com/p/apex-lang/](http://code.google.com/p/apex-lang/)

为了使事情变得更复杂，您也可以制作私有包；）然后您可以将其部署到您的不同 salesforce 组织中，而无需在 AppExchange 上发布。

* * *

如果这看起来太笨重，而您所追求的是依赖控制、整个项目的部署等 - 也许您应该阅读“变更集”甚至“Force.com 迁移工具包”（这应该很容易使用如果您了解 Ant，则适合您）。

至少我希望我现在给你几个新的关键词给谷歌；）你可能还想在 salesforce.stackexchange.com 上问同样或更详细的问题——那里有几个非常铁杆的集成商和应用程序开发人员可能会为你提供有更好的答案。

# python - Get pid of command ran by screen

> ID：15840738
> 
> 赞同：1
> 
> 时间：2013-04-05T18:14:01.077
> 
> 标签：python, python-3.x, gnu-screen

I'm developing a Minecraft (Bukkit) server manager. It's porpuse is only to start it, stop it, back it up and check if it is running. The last one causes the problem. If I do like this to get the pid of the server:

```
subprocess.Popen(["screen", "-dmS", "minecraft-server", "serverstart.sh"]) 
```

I get the pid of the screen command, not the startup-script. However it seems like the pid is always one underneath the pid of the startup-script, but I suppose this isn't relaiable. How can I get the pid of the java process?

EDIT: I tried this, but ps returns with exit code 1 and no child pid. I think this is because screen closes down imidiately.

```
check_output(['ps', '--ppid', str(Popen(['screen', '-dmS', 'test']).pid), '--no-headers', '-o', 'pid']) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T18:41:32.293

如果您有屏幕的进程 ID（父进程，`p.pid`假设您使用过，您可以访问它`p = Subprocess.Popen(...)`），您可以通过类似的方式获取子进程 ID

```
ps --ppid <SCREEN_PID> --no-headers -o pid 
```

[psutil](http://code.google.com/p/psutil/wiki/Documentation)模块也`psutil.Process(<SCREEN_PID>).get_children()`提供了它，它可能比解析 ps 的输出更可取，因为（我认为）它直接解析。`/proc`

[Python 的标准 os 模块](http://docs.python.org/2/library/os.html)中还有一些函数允许您直接使用进程 ID 执行一些操作，但不会获取父进程 ID 或进程组 ID 的子进程 ID。

* * *

以下代码：

```
#!/bin/env python

import subprocess, random, string, re
import psutil

SERVER_SCRIPT = "./serverstart.sh"

def get_random_key(strlen):
    return 'K'+''.join(random.choice(string.hexdigits) for x in range(strlen-1))

def find_screen_pid(name):
    ph = subprocess.Popen(["screen", "-ls"], stdout=subprocess.PIPE)
    (stdout,stderr) = ph.communicate()
    matches = re.search(r'(\d+).%s' % name, stdout, re.MULTILINE)
    if(matches): 
        pids = matches.groups()
        if(len(pids) == 1): return int(pids[0])
        else: raise Exception("Multiple matching PIDs found: %s" % pids)
    raise Exception("No matching PIDs found")

def get_child_pids(parent_pid):
    pp = psutil.Process(parent_pid)
    return [ int(cp.pid) for cp in pp.get_children()]

# Generate a random screen name, in case you're running multiple server instances
screenname = "minecraft-server-" + get_random_key(5)
print("Creating screen session named: %s" % screenname)
subprocess.Popen(["screen", "-dmS", screenname, SERVER_SCRIPT]).wait()

spid = find_screen_pid(screenname)  # Display some output
print("Screen PID: %d" % spid)
cpids = get_child_pids(spid)
print("Child PIDs: %s" % cpids) 
```

产生输出：

```
./screen-pid.py
创建名为：minecraft-server-K77d1 的屏幕会话
屏幕PID：2274
儿童 PID：[2276]

```

您可以使用 访问子 pid 列表中的子 pid `cpids[0]`。

该脚本简单地生成具有特定名称的屏幕进程，然后找到父进程 ID 并从中找到子进程 ID。

如果您使用相同的脚本运行多个实例，则附加到屏幕名称的随机字符会出现。如果你不是，你可以删除所有这些，但离开它没有任何区别。

查找父进程 id（解析 的输出`screen -ls`）的方法可能不是最好的，您也可以使用`psutils.process_iter()`. 但这似乎有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-08T14:45:37.883

假设您想要在屏幕中运行的进程的 PID，我[在此站点的另一个问题中](https://stackoverflow.com/a/28395244/343302)回答了这个问题。这是该答案的内容：

您可以在这里获取屏幕会话的 PID，如下所示：

```
$ screen -ls
There are screens on:
        1934.foo_Server         (01/25/15 15:26:01)     (Detached)
        1876.foo_Webserver      (01/25/15 15:25:37)     (Detached)
        1814.foo_Monitor        (01/25/15 15:25:13)     (Detached)
3 Sockets in /var/run/screen/S-ubuntu. 
```

让我们假设您希望在`foo_Monitor`屏幕会话中运行在 Bash 中的程序的 PID。使用`foo_Monitor`屏幕会话的 PID`bash`通过搜索已知 PID 的 PPID（父 PID）来获取在其中运行的会话的 PID：

```
$ ps -el | grep 1814 | grep bash
F S   UID   PID  PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD
0 S  1000  1815  1814  0  80   0 -  5520 wait   pts/1    00:00:00 bash 
```

现在只获取`bash`会话的 PID：

```
$ ps -el | grep 1814 | grep bash | awk '{print $4}'
1815 
```

现在我们想要具有*该*PID 的进程。只需嵌套命令，这次使用`-v`标志 on`grep bash`来获取*不是*bash 的进程：

```
echo $(ps -el | grep $(ps -el | grep 1814 | grep bash | awk '{print $4}') | grep -v bash | awk '{print $4}')
23869 
```

**只需将 1814 替换为真实的 PID 或您的屏幕会话：**

```
echo $(ps -el | grep $(ps -el | grep SCREEN_SESSION_PID | grep bash | awk '{print $4}') | grep -v bash | awk '{print $4}') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T18:21:07.910

您必须将您的 java 命令包装到获取并返回 pid 的 shell 脚本中。有关示例，请参见[http://ss64.org/viewtopic.php?id=1495 。](http://ss64.org/viewtopic.php?id=1495)

# c# - Excel._Worksheet.Columns.Autofit() 方法挂起

> ID：15840740
> 
> 赞同：2
> 
> 时间：2013-04-05T18:14:04.237
> 
> 标签：c#, excel

我的 sqldatareader 正在返回约 200 行数据。这些行中大约有一半有一列包含整个 xml 文档。我假设此列导致 autofit() 方法挂起。我怎样才能让它要么抛出异常，要么成功完成。我不在乎哪一个，我只需要这个[自动化]程序来完成。

```
Excel.Application xl = null;
            Excel._Workbook wb;
            Excel._Worksheet ws;

            try
            {
                xl = new Microsoft.Office.Interop.Excel.Application();
                xl.Visible = false;

                while (reader.HasRows && !done)
                {
                    wb = (Excel._Workbook)(xl.Workbooks.Add(Excel.XlWBATemplate.xlWBATWorksheet));
                    ws = (Excel._Worksheet)wb.ActiveSheet;

                    // Insert column headers
                    for (int counter = 0; counter < reader.FieldCount; counter++)
                        ws.Cells[1, counter + 1] = reader.GetName(counter);

                    // Write the data to the excel file
                    while (reader.Read())
                    {
                        for (int counter = 1; counter <= reader.FieldCount; counter++)
                        {
                            // Need to format this column so excel doesn't change how it looks
                            if (report.ReportName == "RPTAAMVANetBatch" && reader.GetName(counter - 1) == "CorrelationID")
                                ws.Cells[rowCounter, counter] = String.Format("''{0}'", reader.GetValue(counter - 1));
                            else
                                ws.Cells[rowCounter, counter] = reader.GetValue(counter - 1);
                        }
                        rowCounter++;
                    }

                    RecordsProcessed = rowCounter - 1;

                    // Format the excel file to liking
                    ws.get_Range(ws.Cells[1, 1], ws.Cells[rowCounter - 1, reader.FieldCount]);
                    ws.Columns.AutoFit(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:13:28.740

除了我上面的评论，我正在使用我几天前创建的这个特定的示例文件，其中有 100 行`Col E`，我有几封电子邮件的整个正文（*我放了一个红色框来保护身份和邮件内容*）

![在此处输入图像描述](https://i.stack.imgur.com/Pjv1I.png)

这是一个简单的 VBA 代码，我运行它来检查自动调整`E`列所需的时间

```
Sub Test()
    Dim startTime As String
    Dim endTime As String

    startTime = Now

    Columns("E:E").EntireColumn.AutoFit

    endTime = Now

    Debug.Print "The process started at " & startTime & " and got over at " & endTime
End Sub 
```

**截图**：

![在此处输入图像描述](https://i.stack.imgur.com/aLWf5.png)

您的程序需要更多时间，因为有 200 行，并且每个 Excel 单元格中的数据可能比我的要多。

**那么解决方案是什么？**

我能想到的最佳解决方案是在将大量数据写入之前将列扩大到它的[MAX (254.86)。](http://office.microsoft.com/en-in/excel-help/excel-specifications-and-limits-HP005199291.aspx)像这样的东西

```
 Excel.Range Rng = ws.get_Range("E:E",System.Type.Missing);

        Rng.EntireColumn.ColumnWidth = 254; 
```

**注意**：不要对该列或整个工作表使用 Autofit。如果您确实需要使用`Autofit`，请将其分解。例如，在我的情况下，我会从第 1 列到第 4 列然后从第 6 列到最后一列进行自动调整

# forms - 使用 WinApi Window 使 VCL 窗体和对话框很好地发挥作用

> ID：15840741
> 
> 赞同：0
> 
> 时间：2013-04-05T18:14:06.447
> 
> 标签：forms, delphi, winapi, dialog, ownership

**短版——**

我有一个使用 WinApi 调用创建的 OpenGL 窗口。我宁愿保持这种方式，而不是将 OpenGL 包装到 VCL 表单中。

为了提供一些首选项菜单和文件对话框，我使用了 VCL 表单和典型的对话框（TOpenDialog、TSaveDialog）。

我想知道的是 - 我如何让这些表单和对话框将我的 OpenGL 窗口视为它们的所有者？

我试图将我的窗口句柄传递给表单，但我确信我这样做不正确，因为它没有任何效果。

```
Form1 := TForm1.Create(nil);   
Form1.ParentWindow := hwnd; //handle to OpenGL Window 
```

VCL 表单需要什么才能将本机窗口视为它的所有者？

**长版 -**

我的应用程序有两种模式。独立模式，它自己运行。其次，有一个插件模式*在宿主应用程序的进程空间中运行*。

在独立模式下，我对 VCL 表单和对话框没有任何问题。即使它们的所有权是不确定的，它也不会以任何方式影响可用性。

在插件模式下，我发现主机应用程序将*控制*我的 VCL 表单和打开和保存对话框。

因此，当在主机的进程空间中运行时，我的 VCL 表单呈现非常奇怪。我尝试手动修复它们，但它们不会响应样式更改。

**编辑 - 对话框的详细信息**

我主要关心的是 VCL 表单的呈现，但这里有一些关于对话框的更多细节，如果它有任何用处的话。

我正在执行这样的对话框：

```
if FileOpenDialog.Execute(hwnd) then
Begin
  //open up file
End; 
```

它没有任何效果。该对话框的行为与我没有将句柄传递给它一样。请记住，我使用的是 Delphi 2006，而这个版本的 Delphi 仍在使用旧的文件对话框，它们是在 Windows XP 中引入的。

最后 - 当作为插件运行时，我的打开/保存对话框将出现*，就好像它们属于*任务栏上的主机应用程序一样。因此，主机有一个任务栏选项卡。我的应用程序也有它自己的选项卡。当我执行它时，我的打开对话框会附加到主机的选项卡上。

**图片**

独立模式下的首选项菜单：

![独立模式下的首选项菜单](https://i.stack.imgur.com/0dvYg.jpg)

首选项菜单作为主机中的插件：

![主机中的首选项菜单](https://i.stack.imgur.com/XcTRz.jpg)

如果我可以简单地更改黑色文本的颜色，那就足够了，但我似乎做不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T18:26:34.920

对于 VCL 表单，您需要覆盖 CreateParams 并将 Params.WndParent 设置为拥有窗口。据我了解，这将是您的 OpenGL 窗口。

```
procedure TMyForm.CreateParams(var Params: TCreateParams);
begin
  inherited;
  Params.WndParent := MyOpenGLWindow;
end; 
```

公共对话框类有一个接收窗口句柄的 Execute 重载。传递 OpenGL 窗口的句柄，该 OpenGL 窗口将成为对话框的所有者窗口。

关于您的表格呈现奇怪的主题，很难给出明确的建议。我的猜测是，奇怪是由于主机应用程序没有启用主题。如果您控制主机修复它。否则，您需要使用激活上下文。我对这个问题的回答提供了示例代码：[可能通过在运行时添加应用程序清单来执行运行时可选切换**运行时主题**？](https://stackoverflow.com/questions/10074809/possible-to-do-runtime-optional-toggling-of-runtime-themes-by-adding-an-app)

# sorting - 保留所有行 > 2 个重复项，基于一列

> ID：15840743
> 
> 赞同：0
> 
> 时间：2013-04-05T18:14:12.423
> 
> 标签：sorting, awk, uniq

我有一个包含数百万行的文件，格式如下：

```
SN608   VB050   1       1113    1699.50 2339.90 0       1       AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACCCGTCAATTTTTTAAAAAAAACCCCCGGGGGGTAGTTTGTTAAAA   a[_ceeeegggfgiiigecccccccccccccccccccccbcccccccccccTTEHGGHHGJHGJSRGEGGJY]]]TX[[[XEEOX[EEEGGJGGGGJS]  1 
```

我已经使用第 9 列对其进行了排序`sort -k9`。第 9 列是一个 100 个字母的字符串，但有些条目可能有句点。现在我想删除第 9 列中 100 个字母的字符串仅出现 1 或 2 次（<3 次）的行，并将所有其他行保存到文件中。

我玩过`uniq`( `-d -f9 -w100`) 并且`sort`怀疑`awk`会有所帮助，但我太新手了，无法弄清楚这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:30:22.763

这将存储第一个和第二个匹配项`outfile`以及所有其他匹配项`dups`：

```
awk '++a[$9]>2{print $0>"dups";next}1' file > outfile 
```

# r - 使用非法 EOL 标记读取巨大的 csv 文件

> ID：15840748
> 
> 赞同：4
> 
> 时间：2013-04-05T18:14:18.943
> 
> 标签：r

我需要将几个巨大的（> 400MB）csv 日志文件读入 R。文件看起来像：

> N VISIT_DATE REQ_URL TYPE_LEVEL
> 
> 126424 2013/1/25 23:42:34 [http://weibo.cn/attgroup/privateAtt?cat=user&f=atts](http://weibo.cn/attgroup/privateAtt?cat=user&f=atts) 1
> 
> 33559 2013/1/25 15:15:54 [http://i.ifeng.com/mil/mili?vt=5&dh=touch&mid=aKUiAg](http://i.ifeng.com/mil/mili?vt=5&dh=touch&mid=aKUiAg) 1

我使用以下命令来读取 csv 文件的内容。它适用于大多数数据。`REQ_URL`但是，在某些字段中存在一些非法字符，例如`http://some.url/query=_1A_`1A 是十六进制代码，与 LF 标记非常相似。该`scan`函数似乎将这些字符视为 EOL 标记，并在遇到它们时停止。有没有办法让 R 忽略这些字符或被视为 EOL 标记？谢谢。

> dat<-scan(file='sample.sv', what=list("integer", "numeric", "character", "integer"), sep='\t', strip.white=T, quote=" ", 多行=F, 跳过=1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T09:49:18.523

您可以使用`fread`类似于 read.table 但更快更方便。

```
TEXT <- '126424 2013/1/25 23:42:34 http://weibo.cn/attgroup/privateAtt?cat=user&f=atts 1
33559 2013/1/25 15:15:54 http://i.ifeng.com/mil/mili?vt=5&dh=touch&mid=aKUiAg 1
33556 2013/1/25 15:15:59 http://some.url/query=_1A_ 1'
library(data.table)
fread(TEXT)
       V1        V2       V3                                                   V4 V5
1: 126424 2013/1/25 23:42:34  http://weibo.cn/attgroup/privateAtt?cat=user&f=atts  1
2:  33559 2013/1/25 15:15:54 http://i.ifeng.com/mil/mili?vt=5&dh=touch&mid=aKUiAg  1
3:  33556 2013/1/25 15:15:59                           http://some.url/query=_1A_  1 
```

# c# - WebAPI [授权] 属性。这里发生了什么？

> ID：15840752
> 
> 赞同：3
> 
> 时间：2013-04-05T18:14:29.530
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-4

我正在构建一个具有基本帐户功能的 WebAPI AccountController，如 LogIn、LogOut、Register 等。

我的控制器顶部装饰有该`[System.Web.Http.Authorize]`属性。

在以下方法中，经过身份验证的用户是我的本地系统用户，除非我用“AllowAnonymous”装饰该方法：

```
 // GET/api/isAuthenticated
    // [System.Web.Http.AllowAnonymous]
    [System.Web.Http.HttpGet]
    public HttpResponseMessage IsAuthenticated()
    {
        if (User.Identity.IsAuthenticated)
        {
            var userProfile = _service.GetUserProfile(WebSecurity.CurrentUserId);
            return Request.CreateResponse(HttpStatusCode.OK, userProfile);
        }
        else
        {
            return Request.CreateResponse(HttpStatusCode.OK, false);
        }
    } 
```

据我了解， AllowAnonymous 告诉控制器不要将 Authorize 属性应用于给定的方法。由于我正在构建一个 Web 应用程序，我从不想针对本地凭据进行授权。

我从 MVC SPA 模板中提取了这段代码，所以我想知道 - 当不使用 [AllowAnonymous] 时，如何将其更改为针对本地存储的用户凭据而不是系统用户进行授权？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:01:28.600

使用 WebAPI 时，您应该通过 HTTP 基本授权对用户进行身份验证，它是一种用于授权的 HTTP 标准。如果您通过 aspx 页面登录，您应该在配置部分中将您的授权设置为表单身份验证，如果没有，那么您应该在您的 webapi 调用中添加 http 授权标头。

WebAPI 控制器与普通控制器不同，其身份验证机制也不同。

# ios - Facebook iOS SDK - 上传照片失败并出现奇怪错误

> ID：15840753
> 
> 赞同：1
> 
> 时间：2013-04-05T18:14:35.500
> 
> 标签：ios, facebook-graph-api

```
2013-04-05 21:09:24.502 Pazam[72689:c07] FBSDKLog: Request <#1111>:
  URL:  https://graph.facebook.com/me/photos?format=json&sdk=ios
  Method:   POST
  UserAgent:    FBiOSSDK.3.0.8
  MIME: multipart/form-data; boundary=3i2ndDfv2rTHiSisAbouNdArYfORhtTPEefj3q2f
  Body Size:    0 kB
  Attachments:  
    format: json
    sdk:    ios
    picture:    <Image - 984 kB>

2013-04-05 21:09:24.503 Pazam[72689:c07] FBSDKLog: FBURLConnection <#1114>:
  URL: 'https://graph.facebook.com/me/photos?format=json&sdk=ios'

2013-04-05 21:09:29.627 Pazam[72689:c07] FBSDKLog: FBURLConnection <#1114>:
  Duration: 5123 msec
Response Size: 0 kB
  MIME type: text/plain
2013-04-05 21:09:29.627 Pazam[72689:c07] FBSDKLog: Response <#1111>
Duration: 5124 msec
Size: 0 kB
Response Body:
(
        {
        body =         {
            "FACEBOOK_NON_JSON_RESULT" = "";
        };
        code = 200;
    }
) 
```

检查一下，我无法找出问题所在，唯一看起来很奇怪的是身体大小（0kb），但图片大小还可以。

有任何想法吗 ？

更新

将sdk更改为最新的，仍然没有:(

# msbuild - 如何从源代码构建 tSQLt？

> ID：15840754
> 
> 赞同：1
> 
> 时间：2013-04-05T18:14:36.027
> 
> 标签：msbuild, tsqlt

我可以通过从源代码构建来构建托管在[Sourceforge上的相同 tSQLt.zip 吗？](http://sourceforge.net/projects/tsqlt/)我怎么做？

我已经使用以下命令检查了[tSQLt SVN 存储库的头部（当前为 r200）：](http://sourceforge.net/scm/?type=svn&group_id=233942&source=navbar)

```
svn checkout https://tsqlt.svn.sourceforge.net/svnroot/tsqlt tsqlt 
```

Build 目录中有一个名为 buildNotes.txt 的文件，用于描述构建过程。第一步如下所示：

```
Setting up tSQLt build notes:
1\. You must run MSBuild from the command line once before running the build. The reason is that the first time it prompts for the signing
password. The signing password is: P@$$30rd

This gets somehow stored internally in Windows, and will not need to
be re-entered again.

Here is an example of the MSBuild command:
c:\Projects\tSQLt.sourceforge\tSQLtCLR\tSQLtCLR>C:/Windows/Microsoft.NET/Framework/v2.0.50727/msbuild.exe tSQLtCLR.csproj /p:Configuration=Release /nologo 
```

当我运行示例命令时，我看到一个密码提示：

![导入密钥文件](https://i.stack.imgur.com/ibftb.png)

我粘贴密码“P@$$30rd”，然后单击“确定”。密码显然不正确：

![导入密钥时出错](https://i.stack.imgur.com/nSaDz.png)

msbuild 的命令输出如下所示：

```
C:\Users\iain.CORP\SkyDrive\Software\SQL Server\tSQLt\svn\tsqlt\tSQLtCLR\tSQLtCLR>C:/Windows/Microsoft.NET/Framework/v2.0.50727/msbuild.exe tSQLtCLR.csproj /p:Configuration=Release /nologo
Build started 05/04/2013 19:07:15.
__________________________________________________
Project "C:\Users\iain.CORP\SkyDrive\Software\SQL Server\tSQLt\svn\tsqlt\tSQLtCLR\tSQLtCLR\tSQLtCLR.csproj" (default targets):

Target GetFrameworkPaths:
    Could not locate the .NET Framework SDK.  The task is looking for the path to the .NET Framework SDK at the location specified in the SDKInstallRootv2.0 value of the registry key HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NETFramework.  You may be able to solve the problem by doing one of the following:  1.) Install the .NET Framework SDK.  2.) Manually set the above registry key to the correct location.
Target ResolveKeySource:
    C:\Windows\Microsoft.NET\Framework\v2.0.50727\Microsoft.Common.targets(1728,7): error MSB3321: Importing key file "SigningKey.pfx" was canceled.
Done building target "ResolveKeySource" in project "tSQLtCLR.csproj" -- FAILED.

Done building project "tSQLtCLR.csproj" -- FAILED.

Build FAILED.
C:\Windows\Microsoft.NET\Framework\v2.0.50727\Microsoft.Common.targets(1728,7): error MSB3321: Importing key file "SigningKey.pfx" was canceled.
    0 Warning(s)
    1 Error(s)

Time Elapsed 00:00:07.39

C:\Users\iain.CORP\SkyDrive\Software\SQL Server\tSQLt\svn\tsqlt\tSQLtCLR\tSQLtCLR>C:/Windows/Microsoft.NET/Framework/v2.0.50727/msbuild.exe tSQLtCLR.csproj /p:Configuration=Release /nologo
Build started 05/04/2013 19:07:15.
__________________________________________________
Project "C:\Users\iain.CORP\SkyDrive\Software\SQL Server\tSQLt\svn\tsqlt\tSQLtCLR\tSQLtCLR\tSQLtCLR.csproj" (default targets):

Target GetFrameworkPaths:
    Could not locate the .NET Framework SDK.  The task is looking for the path to the .NET Framework SDK at the location specified in the SDKInstallRootv2.0 value of the registry key HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NETFramework.  You may be able to solve the problem by doing one of the following:  1.) Install the .NET Framework SDK.  2.) Manually set the above registry key to the correct location.
Target ResolveKeySource:
    C:\Windows\Microsoft.NET\Framework\v2.0.50727\Microsoft.Common.targets(1728,7): error MSB3321: Importing key file "SigningKey.pfx" was canceled.
Done building target "ResolveKeySource" in project "tSQLtCLR.csproj" -- FAILED.

Done building project "tSQLtCLR.csproj" -- FAILED.

Build FAILED.
C:\Windows\Microsoft.NET\Framework\v2.0.50727\Microsoft.Common.targets(1728,7): error MSB3321: Importing key file "SigningKey.pfx" was canceled.
    0 Warning(s)
    1 Error(s)

Time Elapsed 00:00:07.39 
```

输出包含消息“无法找到 .NET Framework SDK”。这是我必须安装的东西才能完成这项工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-25T21:48:22.247

看起来确实指定了错误的密码。您可以`tSQLtCLR\tSQLtCLR.sln`在 Visual Studio 界面中打开并尝试键入或更改密码。在这两种情况下，我都收到“旧密码无效”消息。

实际上，您不需要完全使用这个强名称密钥文件。强名称是 SQL CLR 程序集的先决条件，您可以使用任何文件，包括您自己的文件。您可以创建具有相同名称和密码的新密钥文件并成功构建程序集。

![在此处输入图像描述](https://i.stack.imgur.com/2CuOA.png)

如果您安装了 Visual Studio，则不需要[.NET Framework SDK](http://www.microsoft.com/en-us/download/details.aspx?id=19988) ，因为您可以通过接口对程序集进行签名。但是如果你没有VS，你必须安装SDK才能使用[sn.exe](http://msdn.microsoft.com/en-us/library/k5b5tt23%28v=vs.80%29.aspx)，它是SDK的一部分。

我也尝试过[这个](https://stackoverflow.com/questions/2815366/cannot-import-the-following-keyfile-blah-pfx-the-keyfile-may-be-password-prote)解决方案，但它也没有成功

![在此处输入图像描述](https://i.stack.imgur.com/uWJvF.png)

# silverlight - Silverlight 5 屏幕检测

> ID：15840756
> 
> 赞同：0
> 
> 时间：2013-04-05T18:14:36.270
> 
> 标签：silverlight, mono, cross-platform, silverlight-5.0

如何从 Silverlight 5 浏览器外应用程序检测 Windows 和 Mac 上的多个屏幕？

我正在为我想构建的 Winodws/Mac 应用程序寻找 Silverlight 5。现在 Silverlight在浏览器外模式下运行时[支持多个窗口](http://www.kunal-chowdhury.com/2011/05/silverlight-5-multiple-window-support.html)，根据我自己对 WPF 和 .NET 的了解，这似乎是一个不错的选择。

我注意到`Windows.Forms`缺少命名空间（这很有意义），但这让我遇到了上述问题，我似乎无法找到答案。

我曾考虑过为此使用 Mono 项目，但还没有从他们的任何一个中挖掘出方法，但仍在搜索。我不是在寻找*最好*的方式，只是*任何*方式。

仅供参考，屏幕检测的目的是通过投影仪设置第二个窗口全屏显示材料。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T00:12:09.913

我不认为你会找到答案。

似乎在 Windows 上，您可以使用[win32](http://purplestoat.com/blog/positioning-a-window-in-a-second-monitor-in-silverlight-5-2/)实现此目的。但是，解决方案取决于 p/invoke，这在 Silverlight for Mac 上不可用。

我怀疑托管代码中有一个解决方案，它可以在 Silverlight 中运行，无论是 .NET 还是 Mono。

另外，我会质疑在 Silverlight 中启动新应用程序的决定。因为版本 5 似乎是该框架的[终点](http://arstechnica.com/information-technology/2011/12/silverlight-5-released-will-there-be-a-silverlight-6/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T20:01:26.720

Mac 和 Windows 之间的[Silverlight 浏览器外](http://msdn.microsoft.com/en-gb/library/dd550721%28v=vs.95%29.aspx)应用程序的行为存在差异，请参阅[Silverlight 在 Windows 和 Macintosh 上的差异](http://msdn.microsoft.com/en-us/library/cc838247%28v=vs.95%29.aspx)。可以检测应用程序正在运行的平台，并且只对主机平台进行有效调用。

Pete Brown 的文章[Creating Big Silverlight Windows and Getting Monitor Resolutions and Positions with PInvoke](http://10rem.net/blog/2012/02/07/creating-big-silverlight-windows-and-getting-monitor-resolutions-and-positions-with-pinvoke)描述了如何通过 Win32 [EnumDisplayMonitors](http://pinvoke.net/default.aspx/user32.EnumDisplayMonitors)和[GetMonitorInfo](http://msdn.microsoft.com/en-us/library/dd144901%28v=VS.85%29.aspx)函数获取 Windows 平台上的显示信息。

如果您想使用 C#/F#/VB.Net 开发一个在 Windows 和 Mac 上运行的 .Net 应用程序，Silverlight 仍然是一个不错的选择，另一个是[Mono](http://xamarin.com/)。

# c++ - c++ 如何使用动态指针数组？

> ID：15840761
> 
> 赞同：0
> 
> 时间：2013-04-05T18:14:47.527
> 
> 标签：c++, pointers, dynamic-arrays

好的，我正在努力解决指针问题，但是一旦我开始使用类似`class **c`我迷路的东西。

说我有

```
struct POINT{ int x, y, z; };
struct POLYGON{ POINT **vertices; int size; };

POINT points[10];
InputPoints(points,10); //fills up the points array somehow

POLYGON square;
//the following is where I'm lost
square.vertices = new *POINT[4];
square.vertices[0] = *points[2];
square.vertices[1] = *points[4];
square.vertices[2] = *points[1];
square.vertices[3] = *points[7]; 
```

此时，`square`应该保存一个指针数组，每个指针引用`points`. 然后

```
square.vertices[2].x = 200; //I think this is done wrong too 
```

应更改`points[1].x`为 200。

我将如何更改上述代码以实际执行此操作？虽然我知道使用 std::vector 会更好，但我正在尝试了解指针的工作原理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:26:10.497

有两种方法可以解决问题：

*   `Polygon`保留 s 的副本`Point`（这使用`Point *`）
*   `Polygon2`保持指向`Point`s 的指针（这使用`Point **`）

以下是对 OP 代码进行了一些修改的程序，它举例说明了这两种方式。该代码也可在[http://codepad.org/4GxKKMeh](http://codepad.org/4GxKKMeh)

```
struct Point { int x, y, z; };

struct Polygon {
    // constructor: initialization and memory allocation
    Polygon( int sz ) : size( sz ), vertices( 0 ) {
        vertices = new Point[ size ];
    }
    ~Polygon() {
        delete [] vertices;
        vertices = 0;
    }
    int const size;
    Point * vertices; // note: single pointer; dynamically allocated array
};

struct Polygon2 {
    // constructor: initialization and memory allocation
    Polygon2( int sz ) : size( sz ), pPoints( 0 ) {
        pPoints = new Point * [ size ];
    }
    ~Polygon2() {
        delete [] pPoints;
        pPoints = 0;
    }
    int const size;
    Point ** pPoints; // note: double pointer; points to Points :-)
};

int main() {

    Point points[10];

    // Fill up the points
    // InputPoints(points, 10);

    Polygon square( 4 );
    square.vertices[0] = points[2];
    square.vertices[1] = points[4];
    square.vertices[2] = points[1];
    square.vertices[3] = points[7];

    Polygon2 square2( 4 );
    square2.pPoints[0] = & points[2];
    square2.pPoints[1] = & points[4];
    square2.pPoints[2] = & points[1];
    square2.pPoints[3] = & points[7];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T18:37:48.600

您可以执行以下操作：（假设`vertices`存储两个点）

```
 POINT points[2];
 POINT  p1 = {10,20,30};
 POINT  p2 =  {20,30,50};
 points[0] = p1 ;
 points[1] = p2;

POLYGON square;
//the following is where I'm lost
square.vertices  = new POINT*[2]; //pay attention to syntax
square.vertices[0] = &points[0];  //vertices[0] stores first point
square.vertices[1] = &points[1];  //you should take address of points

square.vertices[0][0].x = 100;
std::cout << square.vertices[0][0].x 
    <<std::endl;  //this will change the first point.x to 100
return 0; 
```

您当然可以根据自己的需要进行更新。

# java - 如何在会话级别调整 Java 中的 Sybase 优化器设置？

> ID：15840762
> 
> 赞同：1
> 
> 时间：2013-04-05T18:14:47.827
> 
> 标签：java, performance, sybase, database-performance, sap-ase

根据 Sybase，您可以在会话级别调整优化器设置，如下所示：

```
set plan optgoal allrows_dss 
```

但是，我将使用什么语法将其包含在使用 Java 的 DriverManager.getConnection 的连接字符串中？现在我做这样的事情：

```
Connection conn = DriverManager.getConnection("jdbc:sybase:Tds:myservername:myportnum/myDBname", user, password); 
```

提前感谢您的任何答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:24:58.593

好的，所以最终想通了，分享给以后想知道的人。不知道这是正确还是最好的方法，但它有效：

```
Connection conn = DriverManager.getConnection(URL, user, password);
Statement s = conn.createStatement().executeUpdate(" set plan optgoal allrows_oltp ");
ResultSet rs = conn.createStatement().executeQuery(" select @@optgoal ");
rs.next();
System.out.println("Session-level optimizer set to: " + rs.getString(1)); 
```

# php - 这个 MySQL 查询有什么问题。它给出了无效的参数号错误

> ID：15840763
> 
> 赞同：4
> 
> 时间：2013-04-05T18:14:48.310
> 
> 标签：php, mysql, pdo

MySQL给出了这个错误：

```
SQLSTATE[HY093]: Invalid parameter number 
```

对于这个查询：

```
public function getUserFriends($userId) {
    $query = "SELECT users.id, users.firstName, users.lastName, users.thumbPic FROM friendships LEFT JOIN users ON ((friendships.user1 = users.id OR friendships.user2 = users.id) AND users.id <> :userId) WHERE (user1 = :userId OR user2 = :userId) AND friendships.status = 1";
    return $this->adapter->prepare($query)->execute(array(':userId' => $userId))->fetchAll();
} 
```

参数编号对我来说看起来不错还是我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T21:46:30.373

不幸的是，您不能两次使用相同的命名参数。你必须以这种方式完成你的目标：（我知道......跛脚，对吧？）

```
public function getUserFriends($userId) {
    $query = "
        SELECT
            users.id, users.firstName, users.lastName, users.thumbPic 
        FROM
            friendships 
        LEFT JOIN 
            users ON 
                (friendships.user1 = users.id OR friendships.user2 = users.id) 
                AND users.id <> :userIdA
        WHERE 
            (user1 = :userIdB OR user2 = :userIdC) 
            AND friendships.status = 1";
    return $this->adapter->prepare($query)->execute(array(
        ':userIdA' => $userId
        ':userIdB' => $userId
        ':userIdC' => $userId
    ))->fetchAll();
} 
```

# .net - 公共网络驱动器

> ID：15840765
> 
> 赞同：1
> 
> 时间：2013-04-05T18:14:58.320
> 
> 标签：.net, visual-studio, dropbox, unc, onedrive

如何将 Skydrive、Dropbox、Google 驱动器或任何其他驱动器公开为公共网络驱动器？我正在尝试将这些基于云的存储服务中的任何一个用作我的 TFS 构建输出的放置位置。

目前，当我将 skydrive 作为输出位置连接到构建输出时，我收到错误消息，StorePath Parameter name: DropFolder: StorePath is required and must be a valid UNC path.

有任何想法吗？如果没有，有人知道我可以使用的公共网络驱动器吗？

# objective-c - 从 NSString 获取前 32 位（4 字节）数字

> ID：15840766
> 
> 赞同：2
> 
> 时间：2013-04-05T18:15:00.247
> 
> 标签：objective-c, cocoa-touch, cocoa, nsdata

我的 NSString 看起来像这样：

```
42949672951365185178 
```

它是 32 位数字`4294967295`和时间戳的串联`1365185178`。

我需要将两者分开，以便我可以分别获取数字和时间戳。我所知道的是前 32 位是“数字”部分，其余的是时间戳。

这是我尝试过的：

```
NSString *step9String = @"42949672951365185178";
NSData *step10uAndTS = [step9String dataUsingEncoding:NSASCIIStringEncoding];

NSRange uidRange = NSMakeRange(0, 4); // 4 bytes
UInt8 uidBytes[uidRange.length];
[step10uAndTS getBytes:&uidBytes range:uidRange];

NSData *uidData = [NSData dataWithBytes:uidBytes length:sizeof(uidBytes)];
NSString *uid = [[NSString alloc] initWithData:uidData encoding:NSASCIIStringEncoding];

// and the rest should be the timestamp
NSRange tsRange = NSMakeRange(4, step10uAndTS.length-4);
UInt8 tsBytes[tsRange.length];
[step10uAndTS getBytes:&tsBytes range:tsRange];

NSData *tsData = [NSData dataWithBytes:tsBytes length:sizeof(tsBytes)];
NSString *ts = [[NSString alloc] initWithData:tsData encoding:NSASCIIStringEncoding];

NSLog(@"UID: %@, TS: %@", uid, ts); 
```

但是我得到了这个输出：

> UID：4294，TS：9672951365185466

不知道这里出了什么问题，或者如何以不同的方式做。如果有人能解释我做错了什么以及如何补救，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T18:43:55.840

[将信息从评论转移到答案。]

如果没有已知字符串长度的两个部分之一，则无法解决此问题，因为适合 32 位的整数的十进制表示可以有 1 到 10 位长度。例如，字符串`01365185178`or`45981365185466`也符合您所写的约束——一个 32 位数字，`0`或者`4598`，后跟时间戳。但是，我们如何确定“前 4 个字节”的结束位置？在第一种情况下，它是一个字符，在第二种情况下，它是四个。

如果实际上您确实知道其中一个的长度，那么这就像切片字符串一样简单。由于您已指示 UID 部分必须用零填充，因此如下所示：

```
NSString * UID = [step9String substringToIndex:10];
NSString * timestamp = [step9String substringFromIndex:10]; 
```

你的问题是你的字符串中的信息是由字符组成的，每个字符占用一个字节。当您将信息放入`NSData`对象时，它仍然是字符——不会自动转换为 binary `int`。你需要一个`NSScanner`对象`scanf()`或类似的东西。因此，当您访问数据对象的前四个字节时，您只是获取原始字符串的前四个字符。

# c++ - 如何在 C++ 中加速 CYK 算法？

> ID：15840770
> 
> 赞同：3
> 
> 时间：2013-04-05T18:15:19.700
> 
> 标签：c++, algorithm, stl, implementation, cyk

我想在 C/C++ 中实现[CYK 算法](http://en.wikipedia.org/wiki/CYK_algorithm)，但在各种网站上提供的伪代码并没有回答如何有效地实现它。我写了一个版本，它使用了一些 stl 结构，比如 map 和 sets，但是速度很慢。我正在考虑通过仅使用二进制操作来改进我的实现，但我不知道如何用集合存储我的表。假设我们只有 8 个非终端符号和 26 个终端符号。我正在考虑使用无符号字符表（0-1 的 2^8 -> 8 个位置）来存储有关产品的信息，但我不知道如何存储它。

你能给我一些帮助或线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-29T18:26:40.240

您没有提供很多细节，一个简单的实现（甚至是伪代码）可以为您提供很多提示。

来自维基百科：

> 令输入为由 n 个字符组成的字符串 S：a1 ... an。让

为此，您可以使用简单的字符串或字符向量

> 该文法包含 r 个非终结符号 R1 ... Rr。

我会将非终结符号存储在布尔数组 std::array nonterminal {}; 那么由于 yu 有字符，你可以用 true 来初始化对应于 char 的位置。

非终端[static_cast('C')] = true; 你对终端做同样的事情，你有一个非常快速的查找机制。

> 该文法包含子集 Rs，它是开始符号的集合。令 P[n,n,r] 为布尔数组。将 P 的所有元素初始化为 false。对于每个 i = 1 到 n 对于每个单位生产 Rj -> ai 设置 P[i,1,j] = true 对于每个 i = 2 到 n -- 每个 j = 1 到 n-i+1 的跨度长度 - - 每个 k = 1 到 i-1 的跨度开始 - 每个生产 RA 的跨度分区 -> RB RC 如果 P[j,k,B] 和 P[j+k,ik,C] 然后设置 P[ j,i,A] = true 如果任何 P[1,n,x] 为真（x 在集合 s 上迭代，其中 s 是 Rs 的所有索引）然后 S 是语言的成员，否则 S 不是成员语言的

在那之后，该算法似乎非常简单。只要确保不要在紧密循环中初始化临时值，你会没事的。

# c - 等待条件变量时的信号计数器

> ID：15840771
> 
> 赞同：1
> 
> 时间：2013-04-05T18:15:20.217
> 
> 标签：c, multithreading, condition-variable

条件变量是否有一个数字 - 与它相关联的信号的次数（如信号量）？即，如果五个线程向条件变量发出信号，并假设它们都被取消，那么条件变量是否有可能被其他五个线程等待，之后呢？或者，调用等待后是否只有一个线程解除阻塞？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T18:24:31.480

> 如果五个线程向条件变量发出信号，并假设它们都被取消，那么之后是否有可能让其他五个线程等待条件变量？

尽管这是非常特定于语言和实现的，但通常答案是*没有*数字。如果在*没有*任何线程等待条件的情况下发出条件信号，则信号将丢失。如果生成了 5 个信号，然后一个线程等待条件，它必须等待*下一个*信号被传递。

既然问题是关于 C 的（我假设是 POSIX 线程），那么我可以从[`pthread_cond_signal()`手册](https://computing.llnl.gov/tutorials/pthreads/man/pthread_cond_signal.txt)中添加详细信息：

> 如果当前没有线程阻塞在 cond 上，pthread_cond_broadcast() 和 pthread_cond_signal() 函数将无效。

没有跟踪 POSIX 条件信号的计数器。

# android - 在 Sharedpreferences 中使用 GSON 存储对象。你怎么看？

> ID：15840772
> 
> 赞同：1
> 
> 时间：2013-04-05T18:15:29.673
> 
> 标签：android, object, sharedpreferences, gson

在使用应用程序对象遇到困难之后，我有了一个（新的？）想法，即使用 GSON 库和 Sharedpreferences 在活动之间交换数据。这有一个很大的优势，即如果应用程序关闭，对象不会被破坏。

我想知道你的想法

1.  安全
2.  性能
3.  应用稳定性

这就是我所做的。首先创建一个 MyExchanger 类

```
 public class MyExchanger {
    //store your variables here
     String name;
     List<Vokabel> vokabeliste;

 //put your GETTERS und SETTERS HERE (or make them public)

} 
```

然后是魔法发生的助手类

```
public class ExchangerUtils {

        Context context;
        SharedPreferences prefs;
        SharedPreferences.Editor editor;
        Resources res;
        Gson gson;
        Type type ;

        public ExchangerUtils(Context context) {

                this.context = context;
                prefs = PreferenceManager.getDefaultSharedPreferences(context
                                .getApplicationContext());
                res = context.getResources();
                type = new TypeToken<MyExchanger>() {
                }.getType();
        }

        public void updateExchanger(MyExchanger exchanger) {

                gson = new Gson();
                String exchangerjson = gson.toJson(exchanger, type);
                editor = prefs.edit();
                editor.putString(res.getString(R.string.key_exchanger), exchangerjson);

                editor.commit();

        }

        public Exchanger getExchanger(){

                String exchangerjson = prefs.getString(res.getString(R.string.key_exchanger), null);
                Gson gson = new Gson();
                if(exchangerjson!=null){
               My Exchanger exchanger = gson.fromJson(exchangerjson, type);

                return exchanger;
                }

                return new MyExchanger();
        }

} 
```

实现可能看起来像这样

```
//Somewhere in the activity

ExchangerUtils utils = new ExchangerUtils(this);
MyExchanger exchanger = utils.getExchanger();

exchanger.setName("a name");
utils.update(exchanger); 
```

我已经在我的两个应用程序中对其进行了测试，它工作得很好，也适用于旧手机和很多对象（>100）。

实现中唯一的 annyong 是我必须更新对象。知道如何在没有这种方法的情况下做到这一点吗？

我有任何改进建议，请随时发布。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-20T06:48:53.477

我创建了一个库，可以很容易地以与您描述的方式相同的方式保存数据： [DroidPrefs](https://github.com/bradley-curran/DroidPrefs)

您可以很容易地保存和加载值，但您不必担心带有 TypeToken 的辅助类等等。

从这个 POJO

```
public class Animal
{
    private String mName;
    private String mBreed;
    private int mLegs;

    public Animal() {
        mName = "";
        mBreed = "";
        mLegs = 0;
    }

    public Animal(String name, String breed, int legs)
    {
        mName = name;
        mBreed = breed;
        mLegs = legs;
    }
} 
```

保存对象

```
Animal newAnimal = new Animal("Gitty", "Octocat", 8);
DroidPrefs.instance(context).put("animal", newAnimal).apply(); 
```

加载对象

```
Animal newAnimal = DroidPrefs.instance(context).get("animal", Animal.class); 
```

如果对象之前没有序列化，则将使用默认构造函数创建一个新对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T19:55:11.837

嗯。这是一个有趣的想法，但 SharedPreferences 并不是传输和持久化数据的最佳选择。当然，正如您所见，Application 或任何其他类型的静态变量都不是。

在不知道您要做什么的情况下，我无法提出确切的替代方案，但是在相同的情况下，我会使用由内容提供者包装的数据库。您可能认为这对于您正在尝试做的事情来说工作量太大，但是数据库是持久的、可索引的、可搜索的并且易于更新。

如果您想在活动之间传递瞬态数据，请在其扩展数据中使用带有对象的意图。如果数据不是真正瞬态的，请将其保存在某个地方。如果是少量数据，例如设置，则将其保存在 SharedPreferences 中。如果是大量线性数据，例如 JPEG 图像，请将其保存在文件中。如果是结构化数据，请将其保存在数据库中。但是，不要仅仅因为它“更容易”而试图用其中一个替换另一个。

# android - 将信息附加到线程中的 TableLayout

> ID：15840773
> 
> 赞同：0
> 
> 时间：2013-04-05T18:15:31.700
> 
> 标签：android

我试图弄清楚如何从 MainActivity 类中的线程访问视图。我需要能够在收集信息时每 5 秒将信息附加到表中。当函数位于 a 中时，我将如何执行此操作`Thread()`？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:17:17.767

创建一个 Hanlder 作为字段并在您的活动的 onCreate 中对其进行初始化。然后用那个 Hanlder 访问 UI 线程。即访问视图

或者简单地使用

```
 runOnUiThread(new Runnable() {
            public void run() {
               //code needs to be ran in UI thread)

            }
        }); 
```

# javascript - 使用 jQuery 选择 contentEditable div

> ID：15840774
> 
> 赞同：0
> 
> 时间：2013-04-05T18:15:39.783
> 
> 标签：javascript, jquery, tablesorter

我有以下 tablesorter 小部件，它在单击时将`td`元素转换为 contentEditable div，然后在用户单击单元格外部时将它们转换回`td`s。

```
$simjq.tablesorter.addWidget({
    id: 'makeColumnsEditable',

    format:function(table){
        var searchString = '',
            targetColumns = table.config.widgetOptions
                                 .makeColumnsEditable.targetColumns,
            inClick = false,
            thisCell = $simjq(),
            thisCellHtml = null;

        while (targetColumns.length){
            searchString.length ? 
                searchString += (',td:eq('+targetColumns.pop()+')') :
                    searchString += ('td:eq('+targetColumns.pop()+')');
        }

        function exitSelection(){
            //Re-attach text to cell and get rid of the div
            thisCellHtml = thisCell.children('div').html();
            thisCell.empty();
            thisCell.html(thisCellHtml);

            //Exit current selection
            thisCell = $simjq();

            //unbind handler from document
            $simjq(document).unbind('click', exitSelection)
        }

        $simjq(table).find('tr').each(function(){
            $simjq(this).find(searchString).on('click', function(event){
                if(!inClick || (thisCell[0] == $simjq(this)[0])){
                    event.stopPropagation();
                    if (thisCell[0] != $simjq(this)[0]){
                        inClick = true;

                        thisCell = $simjq(this);
                        thisCellHtml = thisCell.html();
                        thisCell.empty();
                        thisCell.append('<div contentEditable="true">'
                                           +thisCellHtml + '</div>');

                        $simjq(document).bind('click', exitSelection);
                    }
                } else {
                    //Allow click to bubble up to document
                    inClick = false;
                };
            });
        });
    }
}); 
```

我的问题是，当单击将 a`div`变为 contentEditable div 时，它不会选择它们，因此需要额外单击才能输入目标元素并对其进行编辑。当我点击 div 时，如何输入可编辑的 div（即在文本中放置克拉），而不需要额外点击？

# javascript - 如何删除分隔符和空格或标点之间的文本？

> ID：15840775
> 
> 赞同：1
> 
> 时间：2013-04-05T18:15:46.097
> 
> 标签：javascript, regex

我有一个 JavaScript 字符串数组，其同义词由插入符号指示。示例如下：

*   `I'm baffled^bemused by his decision.`
*   `"Why are you so mean^nasty?" she wailed^moaned.`

我想返回：

*   `I'm baffled by his decision.`
*   `"Why are you so mean?" she wailed.`

这`/\^([^^]*)\./`适用于单个标点符号，但我无法让它为`[.,:;?"' ]`. 我很感激这方面的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T18:27:57.453

试试这个：

```
var str = "Why are you so mean^nasty?";
var regex = /\^\w+/;

var result = str.replace(regex, '');

console.log(result); //"Why are you so mean?" 
```

[看到它在这里工作](http://regexpal.com/?flags=g&regex=%5C%5E%5Cw%2b&input=Why%20are%20you%20so%20mean%5Enasty?%0AI%27m%20baffled%5Ebemused%20by%20his%20decision.%0Ashe%20wailed%5Emoaned.)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T18:20:05.017

您想将 String.replace 与空字符串一起使用。

你想匹配一个 '^' 后跟所有非空格字符，直到下一个空格，所以正则表达式是

```
\^[^\s]+ 
```

编辑：正如评论中所指出的，这不会针对标点符号进行调整。

```
\^\w+ 
```

应该可以工作，因为 \w 匹配所有“单词”字符，即 az、AZ、0-9 和 & _

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T18:31:01.470

您想使用此正则表达式搜索并替换为空字符串：

```
\^([^^]*?)(?=[.,:;?"' ]) 
```

[您可以在www.debuggex.com](http://www.debuggex.com/?re=%5C%5E%28%5B%5E%5E%5D%2a?%29%28?=%5B.,%3a;?%22%27%20%5D%29&str=I%27m%20baffled%5Ebemused%20by%20his%20decision.%0D%0A%22Why%20are%20you%20so%20mean%5Enasty?%22%20she%20wailed%5Emoaned.)上查看将要替换的部分，以及正则表达式的详细信息。

# php - 如何在 PHP 中最好地解析 1 个 HTTP 标头 VALUE？

> ID：15840780
> 
> 赞同：-2
> 
> 时间：2013-04-05T18:16:07.283
> 
> 标签：php, parsing, http-headers

我的响应中有一个非常重要且详细的 HTTP 标头，我想解析它的值以获取详细信息：

```
Digest realm="My Very, Very Cool Site", nonce="A8W/7aDZBAA=ffc2afd053c8802dd64be69b985f38c85ec29607", algorithm=MD5, domain="/", qop="auth" 
```

它显然是逗号分隔的，但它也被引用，所以值可以包含`,`. 还有`"Digest "`那不是`key="value"`-pairs的一部分。（我可以假设第一部分（“摘要”）永远不会包含空格，所以这不应该太难。

我认为最可靠的方法是逐字节解析并查找`"`and `,`，但这需要做很多工作。

可能是我错过了一个非常有用的 PHP SPL 函数。我试过 `http_parse_headers()`了，但那是不标准的，我没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:27:41.613

您可以使用正则表达式：

```
function parseHeader($theHeaderValue /* Without the Digest: part */) {
  if (preg_match_all("'(?<variable>[A-z0-9\_]+)\=(?<delimiter>[\"\']?)(?<value>.*?)(?<!\\\)\k<delimiter>(?:\s*(?:,|$))'isux", $theHeaderValue, $matches) and !empty($matches['variable'])) {
    $result = array();
    foreach ($matches['variable'] as $index=>$key) $result[$key] = $matches['value'][$index];
    return $result;
  } else return array();
} 
```

# jquery - 将 li 动态附加到 ul 时，鼠标悬停不起作用

> ID：15840781
> 
> 赞同：0
> 
> 时间：2013-04-05T18:16:11.173
> 
> 标签：jquery

我遵循了 zhujy_8833 在此页面上发布的代码，[jQuery changed background on hover](https://stackoverflow.com/questions/10526121/jquery-changing-background-on-hover)。

它可以正常工作，但是当我使用 jQuery 将 li 动态附加到 ul 时。我的鼠标悬停不会在 li 上触发。我正在循环从数据库中提取的一些数据并将它们附加到 ul 如下：

**在 HTML 中，我有：**

```
<div id="result-holder">
    <ul id="results-list">
    </ul>
</div> 
```

**用于填充 ul 的 JQuery：**

```
for (var i=0; i<data.length; i++){
    // #results-list is the ul id
    $('#results-list').append("<li class='lineInc' id='lineInc_"+i+"'>" + data[i] + "</li>");
} 
```

**尝试使用更改 li 背景颜色**

```
$(document).ready(function(){
    $(".lineInc").mouseover(function(){
            $(this).addClass("hover")      //hover, add class "hover"
    });
    $(".lineInc").mouseout(function(){
            $(this).removeClass("hover");  //hover out, remove class "hover"
    });
}); 
```

**CSS**

```
ul#results-list .lineInc.hover{ 
      cursor:pointer;
      background:#900;
} 
```

另外，我尝试了这个 CSS 但仍然无法正常工作

```
ul#results-list li.hover{ 
      cursor:pointer;
      background:#900;
} 
```

你能帮我解决这个问题吗？非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T18:18:03.633

使用[jquery](http://api.jquery.com/on/)

```
$(document).ready(function(){
    $("#results-list").on("mouseover", ".lineInc" ,function(){
            $(this).addClass("hover")      //hover, add class "hover"
    });
    $("#results-list").on("mouseout", ".lineInc",function(){
            $(this).removeClass("hover");  //hover out, remove class "hover"
    });
}); 
```

# javascript - 你能把一个函数放在一个变量里吗？

> ID：15840783
> 
> 赞同：0
> 
> 时间：2013-04-05T18:16:19.960
> 
> 标签：javascript, jquery, ajax, json, jplayer

我的问题出现是因为我有以下代码，最后一部分不起作用，JPlayer 的播放列表部分没有声明

```
(function($) {
    Drupal.behaviors.MyfunctionTheme = {
        attach: function(context, settings) {
            $('.add-music').click(function() {
                var songNew = JSON.stringify({
                    title: $(this).attr('data-title'),
                    artist: $(this).attr('data-artist'),
                    mp3: $(this).attr('href')
                });
                var songIE = {
                    json: songNew
                };
                $.ajax({
                    type: 'POST',
                    data: songIE,
                    datatype: 'json',
                    async: true,
                    cache: false
                }).done(
                //this is the callback function, which will run when your POST request returns

                function(postData) {
                    //Make sure to test validity of the postData here before issuing the GET request
                    var session;
                    $.ajaxSetup({
                        cache: false
                    })
                    $.get('/getsession.php', function(getData) {
                        session = JSON.parse(getData);
                        var myPlaylist = new jPlayerPlaylist({
                            jPlayer: "#jquery_jplayer_N",
                            cssSelectorAncestor: "#jp_container_N"
                        }, [session], {
                            playlistOptions: {
                                enableRemoveControls: true
                            },
                            swfPath: "../js",
                            supplied: "oga, mp3"
                        });
                    });
                });
            });
        }
    }
})(jQuery); 
```

我遇到的问题是我进入了播放列表“未定义”

会话变量包含以下内容

```
{"title":"radio novela wagia. CAPITULO 1","artist":"","mp3":"http://red.comppa.com/sites/default/files/audios/radionovela%20wagia%20final.mp3"},{"title":"radio novela wagia. CAPITULO 1","artist":"","mp3":"http://red.comppa.com/sites/default/files/audios/radionovela%20wagia%20final.mp3"},{"title":"Lenguas Indígenas en Los Medios de Comunicación","artist":"","mp3":"http://red.comppa.com/sites/default/files/audios/Cun%CC%83aLenguasIndigenasEnMediosdeComunicacion.mp3"} 
```

但是如果我进行以下测试并且效果很好

```
(function ($) { 

    Drupal.behaviors.MyfunctionTheme = {
        attach: function(context, settings) {
var session = [{"title":"radio novela wagia. CAPITULO 1","artist":"","mp3":"http://red.comppa.com/sites/default/files/audios/radionovela%20wagia%20final.mp3"},{"title":"radio novela wagia. CAPITULO 1","artist":"","mp3":"http://red.comppa.com/sites/default/files/audios/radionovela%20wagia%20final.mp3"},{"title":"Lenguas Indígenas en Los Medios de Comunicación","artist":"","mp3":"http://red.comppa.com/sites/default/files/audios/Cun%CC%83aLenguasIndigenasEnMediosdeComunicacion.mp3"}];
        var myPlaylist = new jPlayerPlaylist({
jPlayer: "#jquery_jplayer_N",
cssSelectorAncestor: "#jp_container_N"
}, session, {
playlistOptions: {
enableRemoveControls: true
},
swfPath: "../js",
supplied: "oga, mp3"
});
}}

})( jQuery ); 
```

任何解释或帮助非常感谢

# android - 如何在没有保存实例状态的情况下恢复片段状态？

> ID：15840784
> 
> 赞同：3
> 
> 时间：2013-04-05T18:16:20.193
> 
> 标签：android, android-listview, android-fragments

在我的应用程序`FragmentActivity`中包含一个简单的`ListFragment`，我想保留用户滚动到的位置。我做了以下事情：

```
private int initialScrollPosition = 0;
private int initialScrollYOffset = 0;

@Override
public void onSaveInstanceState (Bundle outState) {
    outState.putInt(SCROLL_POSITION, this.getListView().getFirstVisiblePosition());
    View firstVisibleItemView = this.getListView().getChildAt(0);
    outState.putInt(SCROLL_Y_OFFSET, (firstVisibleItemView == null) ? 0 : firstVisibleItemView.getTop());
}

@Override
public void onActivityCreated (Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    this.restoreState(savedInstanceState);
}

private void restoreState(Bundle savedInstanceState) {
    if(savedInstanceState != null
            && savedInstanceState.containsKey(SCROLL_POSITION)) {
        this.initialScrollPosition = savedInstanceState.getInt(SCROLL_POSITION);
    }
    if(savedInstanceState != null
            && savedInstanceState.containsKey(SCROLL_Y_OFFSET)) {
        this.initialScrollYOffset = savedInstanceState.getInt(SCROLL_Y_OFFSET);
    }
}

@Override
public void onStart () {
    super.onStart();
    // some other GUI stuff
    this.getListView().setSelectionFromTop(this.initialScrollPosition, this.initialScrollYOffset);
} 
```

此解决方案适用于显示方向更改或从`Activity`我的一个应用程序移动到下一个应用程序。

但是，如果我启动应用程序，滚动一下，回到家，并从最近恢复应用程序，`onActivityCreated`（或任何其他带有 的回调`savedInstanceState` `Bundle`）不会被调用，因此无法恢复状态。

因此我有两个问题：

1.  我该怎么做才能在没有回调的`savedInstanceState`情况下恢复后？`onXXXCreated`
2.  生命周期到底在做什么。我想了解，为什么我的方法失败了。

非常感谢您的任何见解！

**解决方案：**

感谢安德烈！我把我改成`onSaveInstanceState`这样：

```
@Override
public void onSaveInstanceState (Bundle outState) {
    this.initialScrollPosition = this.getListView().getFirstVisiblePosition();
    View firstVisibleItemView = this.getListView().getChildAt(0);
    this.initialScrollYOffset = (firstVisibleItemView == null) ? 0 : firstVisibleItemView.getTop();
    outState.putInt(SCROLL_POSITION, this.initialScrollPosition);
    outState.putInt(SCROLL_Y_OFFSET, this.initialScrollYOffset);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T18:32:46.713

如果您的应用程序使用最近的应用程序按钮被置于最前面，则可能是它没有重新创建，因为系统尚未完成它。在这种情况下，仅`onResume()`调用后续回调。

结论：尝试恢复您的位置`onResume()`，将位置存储在`onPause()`（对于未重新创建活动的最近应用程序切换），从`savedInstanceState`捆绑包中提取位置（用于重新创建活动的方向更改）。

# c++ - 矢量文件中的错误

> ID：15840794
> 
> 赞同：0
> 
> 时间：2013-04-05T18:16:56.623
> 
> 标签：c++, stdvector

我的项目中有这样的错误。

```
 error C2036: 'ClassName *' : unknown size  c:\program files (x86)\microsoft visual studio 10.0\vc\include\vector   735 
```

代码中有很多地方`std::vector<ClassName>`都使用了，所以我有点困惑这个错误的可能原因是什么。

在某些类中，我从以下方法返回此类向量

```
class AnotherClass
{
    public:
    std::vector<ClassName> AnotherClass::GetVector()
    {
        return _myVector;
    }
    private:
    std::vector<ClassName> _myVector;
}; 
```

这是一个可能的原因吗？或者还有另一个常见的错误导致这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:22:37.310

这通常是忘记包含包含 ClassName 声明的头文件的问题

# android - 使用资产文件夹中的项目名称填充 Android ListView

> ID：15840796
> 
> 赞同：1
> 
> 时间：2013-04-05T18:17:01.897
> 
> 标签：android, android-listview, assets

我正在基于别人的代码构建一个媒体播放器。媒体播放器播放资产文件夹中的 mp3。我已将 ListView 添加到媒体播放器 layout.xml 并希望使用资产文件夹的内容填充此列表。目前在主 java 中有一些代码采用 mp3 名称并将其显示在弹出窗口中。我如何才能将此信息加载到列表中。列表中的 ietm 也必须与曲目播放相对应。

这是java代码

```
 //Generate a String Array that represents all of the files found
private String[] getTracks(){
    if(type == 0){
        try {
            String[] temp = getAssets().list("");
            return temp;
        } catch (IOException e) {
            e.printStackTrace();
            Toast.makeText(getBaseContext(), e.getMessage(), Toast.LENGTH_LONG).show();
        }
    } else if(type == 1){
        if(Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED) 
                || Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED_READ_ONLY)){
            path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_MUSIC);
            path2 = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);
            String[] temp = path.list();
            return temp;
        } else{
            Toast.makeText(getBaseContext(), "SD Card is either mounted elsewhere or is unusable", Toast.LENGTH_LONG).show();
        }
    }
    return null;
}

//Adds the playable files to the trackNames List
private void addTracks(String[] temp){
    if(temp != null){
        for(int i = 0; i < temp.length; i++){
            //Only accept files that have one of the extensions in the EXTENSIONS array
            if(trackChecker(temp[i])){
                trackNames.add(temp[i]);
                trackArtworks.add(temp[i].substring(0, temp[i].length()-4));
            }
        }
        Toast.makeText(getBaseContext(), "Loaded " + Integer.toString(trackNames.size()) + " Tracks", Toast.LENGTH_SHORT).show();
    }
}

//Plays the Track
    private void playTrack(){
        if(isTuning && track != null){
            track.play();
            Toast.makeText(getBaseContext(), "Playing " + trackNames.get(currentTrack).substring(0, trackNames.get(currentTrack).length()-4), Toast.LENGTH_SHORT).show();
        }
    } 
```

还有我的xml

```
 <ListView
    android:id="@+id/trackNames"
    android:layout_width="match_parent"
    android:layout_height="98dp"
    android:layout_weight="0.74" >
</ListView> 
```

如何填充列表？我怎样才能使用我已经拥有的代码来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:57:48.913

这是一个 SimpleAdapter 版本....非常类似于 ArrayAdapter

```
HashMap<String,String> item;
for (int i=0;i<count; i++){
        item = new HashMap<String,String>();
        item.put( "line1", trackNames.get(i));
        list.add( item );

    }

    sa = new SimpleAdapter(getActivity(), 
    list, android.R.layout.simple_list_item_activated_1, new String[] { "line1" },  new int[] {android.R.id.text1});
    setListAdapter( sa ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T18:20:10.173

您需要创建一个 ArrayAdapter 或 ArrayAdapter 的子类，将您的数据添加到其中，并将其设置在您的 ListView 中。

这是一个[例子。](http://android.amberfog.com/?p=296)

# jquery - 如何使用 jQuery 或 HTML5 在所有页面上复制页眉和页脚？

> ID：15840800
> 
> 赞同：2
> 
> 时间：2013-04-05T18:17:10.523
> 
> 标签：jquery, html, navigation, footer, dry

我知道使用 rails 和 django，您可以使用模板将页眉和页脚作为单独的文件编写一次，并将其包含在您的所有网页中。我想知道，这样的事情可以用 jQuery 或 html5 来实现吗？如果是这样，如何？

```
<html>
    <head></head>
    <body>
        <navigation> include code from header.html here </navigation>
        ...
        some page specific content
        ...
        <footer>include code from footer.html here</footer>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T18:20:08.337

是的，如果你使用 jQuery 的`.load()`功能。我认为它看起来像

`$('footer').load('/assets/myfooter.html');`

那应该这样做。

[此处提供的文档](http://api.jquery.com/load/)

由于“同源策略”，您唯一不能做的就是从另一个域获取 html，我认为这是为了防止 CSRF 攻击和/或会话劫持。

# java - 如何摆脱 ArrayList 中的 IndexOutOfBoundsException

> ID：15840802
> 
> 赞同：0
> 
> 时间：2013-04-05T18:17:13.703
> 
> 标签：java, indexoutofboundsexception

当我启动服务器并且客户端连接到它时，我收到此错误：

```
Waiting for clients ...
Client connected from: Driton PC
java.lang.IndexOutOfBoundsException: Index: 1, Size: 1 
```

我不太明白为什么会发生这种情况，因为我从互联网上一个接一个地关注并且他的例子有效而我没有

```
public class ChatServer { 

public static ArrayList<Socket> ConnectionArray = new ArrayList<Socket>();

public static ArrayList<String> CurrentUsers = new ArrayList<String>();

public static void main(String[] args) throws IOException{
    try
    {
        final int PORT = 444;
        ServerSocket SERVER = new ServerSocket(PORT);
        System.out.println("Waiting for clients...");

        while(true)
        {
            Socket SOCK = SERVER.accept();
            ConnectionArray.add(SOCK);
            System.out.println("Client connected from: "+ SOCK.getLocalAddress().getHostName());
            AddUserName(SOCK);
            Chat_Server_Return CHAT = new Chat_Server_Return(SOCK);
            Thread x = new Thread(CHAT); 
            x.start();
        }
    }
        catch(Exception x){System.out.println(x);}
}

public static void AddUserName(Socket X) throws IOException
{
    Scanner INPUT = new Scanner(X.getInputStream());
    String UserName = INPUT.nextLine();
    CurrentUsers.add(UserName);
    for(int i = 1; 1 <= ChatServer.ConnectionArray.size(); i++){
        Socket TEMP_SOCK = (Socket) ChatServer.ConnectionArray.get(i-1);
        PrintWriter OUT = new PrintWriter(TEMP_SOCK.getOutputStream());
        OUT.println("#?!"+ CurrentUsers);
        OUT.flush();

    }
} 
```

它运行`for`循环两次。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T18:19:04.020

`for`如果没有删除任何内容，则循环的条件不正确。改成：

```
i <= ChatServer.ConnectionArray.size() 
```

但是处理 for 循环的常规方法是遵循从 0 开始的索引，而*不是*稍后减去一个：

```
for(int i = 0; i < ChatServer.ConnectionArray.size(); i++){
    Socket TEMP_SOCK = (Socket) ChatServer.ConnectionArray.get(i); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T18:18:46.537

轻松执行数组长度检查。

`java.lang.IndexOutOfBoundsException`访问集合而不是该数组时确实抛出了。

已知`ArrayIndexOutOfBoundsException`有一种类似的异常，但解决相同问题的目的只是使用检查集合的大小以确保您没有超出它的赏金范围。

# r - 页面加载时闪亮的 submitButton 行为

> ID：15840803
> 
> 赞同：11
> 
> 时间：2013-04-05T18:17:14.277
> 
> 标签：r, shiny

提交按钮很有用，但我还没有找到一种优雅的方式来抑制初始页面加载时的输出。

例如，闪亮教程在加载时呈现输出。
[http://rstudio.github.com/shiny/tutorial/#more-widgets](http://rstudio.github.com/shiny/tutorial/#more-widgets)

如何确保在按下提交按钮之前不调用任何反应函数？

这是上面链接的示例的内联代码。

```
#ui.R
library(shiny)

# Define UI for dataset viewer application
shinyUI(pageWithSidebar(

  # Application title.
  headerPanel("More Widgets"),

  # Sidebar with controls to select a dataset and specify the number
  # of observations to view. The helpText function is also used to 
  # include clarifying text. Most notably, the inclusion of a 
  # submitButton defers the rendering of output until the user 
  # explicitly clicks the button (rather than doing it immediately
  # when inputs change). This is useful if the computations required
  # to render output are inordinately time-consuming.
  sidebarPanel(
    selectInput("dataset", "Choose a dataset:", 
                choices = c("rock", "pressure", "cars")),

    numericInput("obs", "Number of observations to view:", 10),

    helpText("Note: while the data view will show only the specified",
             "number of observations, the summary will still be based",
             "on the full dataset."),

    submitButton("Update View")
  ),

  # Show a summary of the dataset and an HTML table with the requested
  # number of observations. Note the use of the h4 function to provide
  # an additional header above each output section.
  mainPanel(
    h4("Summary"),
    verbatimTextOutput("summary"),

    h4("Observations"),
    tableOutput("view")
  )
))

#server.R
library(shiny)
library(datasets)

# Define server logic required to summarize and view the selected dataset
shinyServer(function(input, output) {

  # Return the requested dataset
  datasetInput <- reactive({
    switch(input$dataset,
           "rock" = rock,
           "pressure" = pressure,
           "cars" = cars)
  })

  # Generate a summary of the dataset
  output$summary <- renderPrint({
    dataset <- datasetInput()
    summary(dataset)
  })

  # Show the first "n" observations
  output$view <- renderTable({
    head(datasetInput(), n = input$obs)
  })
}) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-07T23:28:46.423

一种方法是使用`actionButton`（来自[shiny-incubator](https://github.com/rstudio/shiny-incubator)包）和`isolate`. [这](https://groups.google.com/d/msg/shiny-discuss/14mgoAEP2fU/U1882iklkTgJ)是一篇文章，解释了如何将两者结合使用。这本质上是一种比 更灵活的方法`submitButton`，后者有点过于笨拙且不够灵活。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T14:20:55.193

对于文本字段输入，我遇到了同样的问题，并且我使用了一个非常肮脏的工作：

我将初始字段值设置为“please_type_stuff_here”。在 server.RI 中，使用 if 子句来决定是否有某些内容要返回给 ui：

```
if (input$data=="please_type_stuff_here") {

} else {
# Return the requested dataset
  datasetInput <- reactive({
    switch(input$dataset,
           "rock" = rock,
           "pressure" = pressure,
           "cars" = cars)
  })

  # Generate a summary of the dataset
  output$summary <- renderPrint({
    dataset <- datasetInput()
    summary(dataset)
  })

  # Show the first "n" observations
  output$view <- renderTable({
    head(datasetInput(), n = input$obs)
  })
} 
```

# jquery - 在href = jquery上使用鼠标悬停选择选择选项

> ID：15840814
> 
> 赞同：1
> 
> 时间：2013-04-05T18:17:48.793
> 
> 标签：jquery, select, mouseover, option

我想用鼠标悬停在href上动态更改选择。

的HTML：

```
<select name = "modifiers[11]" id = "selectImg" class = "selectImg">

<option value ="43" > Natural Black </option>
<option value="44"> Red   <!--(+$10.50)--></option>
<option value ="45" > Brown <!--(+$10.50)--></option>
<option value="46"> Green <!--(+$10.50)--></option>
<option value ="47" > Blue <!--(+$10.50)--></option>

</select>

<a id="18" href="#">link1</a>
<a id="19" href="#">link2</a>
<a id="20" href="#">link3</a>
<a id="21" href="#">link4</a>
<a id="22" href="#">link4</a> 
```

jQuery：

```
$('#18 a').hover(function() {
    $('#43').attr('selected', 'selected');
});
$('#19 a').hover(function() {
    $('#44').attr('selected', 'selected');
});
$('#20 a').hover(function() {
    $('#45').attr('selected', 'selected');
});
$('#21 a').hover(function() {
    $('#46').attr('selected', 'selected');
});
$('#22 a').hover(function() {
    $('#47').attr('selected', 'selected');
}); 
```

这是我一直在研究的小提琴。 [http://jsfiddle.net/NnEdM/3/](http://jsfiddle.net/NnEdM/3/)

我究竟做错了什么？

编辑

我想补充一下，我找到了这个 jsfiddle，它可以在悬停时工作，但我的值不是从 1 [http://jsfiddle.net/SEqZG/23/开始](http://jsfiddle.net/SEqZG/23/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T18:27:27.327

**[jsFiddle 演示](http://jsfiddle.net/NnEdM/6/)**

有几件事出了问题。首先，您应该使用`prop`而不是`attr`. 其次，您在一些地方没有正确选择元素。`$('#22 a')`将选择一个嵌套的锚标记，并且应该像这样定位实际的锚：`$('#22')`. 此外，`$('#47')`将查找`id`不存在的元素，您应该在 select 元素下方查找值为 47 的选项，如下所示`$('#selectImg option[value=47]')`：这是最终结果

```
$('#18').hover(function() {
 $('#selectImg option[value=43]').prop('selected', 'selected');
});
$('#19').hover(function() {
 $('#selectImg option[value=44]').prop('selected', 'selected');
});
$('#20').hover(function() {
 $('#selectImg option[value=45]').prop('selected', 'selected');
});
$('#21').hover(function() {
 $('#selectImg option[value=46]').prop('selected', 'selected');
});
$('#22').hover(function() {
 $('#selectImg option[value=47]').prop('selected', 'selected');
}); 
```

# javascript - 想要 jQuery 帮助...

> ID：15840815
> 
> 赞同：-4
> 
> 时间：2013-04-05T18:17:49.390
> 
> 标签：javascript, jquery

我有一个站点，右侧有一个弹出窗口。并有一个按钮。我的问题是，如果我单击该按钮，那么弹出窗口将向左移动，如果我再次单击该按钮，那么弹出窗口将返回它之前的位置，我的意思是正确的。这就像 slideToggle 。我尝试了一些东西。但它只剩下了，但它不会回去。怎么做 ？

```
<script>
function goto(){    
    //animate to the div id.
    $(".pop_up").animate({"left": -($(id).position().left)});

}
$(document).ready(function(){
  $(".red_sec").click(function(){
    $(".pop_up").animate({left:'-560px'});
  });
});
</script> 
```

对不起我的英语不好。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:30:38.003

试试这个代码，这将给出一个`toggle effect`.

```
$(document).ready(function(){
  $(".red_sec").click(function(){
       $(".pop_up").animate({'left': ($(".pop_up").position().left == -560)?100:-560});
  });
}); 
```

[小提琴](http://jsfiddle.net/9E2AM/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T18:43:04.433

保持简单，我会说。为`.pop_up`元素提供[数据属性](http://ejohn.org/blog/html-5-data-attributes/)并使用它来确定动画应该走的路：

```
function goto(){    
    var direction = $(".pop_up").attr('data-lr');
    $(".pop_up").animate( {left: direction} );
    $(".pop_up").attr('data-lr',direction === '+=100' ? '-=100' : '+=100');

}

$(".red_sec").click(goto); 
```

这是一个[**jsFiddle**](http://jsfiddle.net/4spkx/)

# batch-file - 批量循环文件

> ID：15840818
> 
> 赞同：2
> 
> 时间：2013-04-05T18:18:00.313
> 
> 标签：batch-file, notepad++

我正在尝试在 Notepad++ 中进行批处理，以计算所选文本中重复行的数量。

到目前为止，我的 Notepad++ 工作正常

```
NPE_CONSOLE v+
CLS
ECHO $(CURRENT_WORD)
CON_SAVETO "H:\tmp.txt"
NPE_CONSOLE v- 
```

此脚本将选定的文本保存到`tmp.txt`其中，唯一的问题是它包含在底部，`CON_SAVETO "H:\tmp.txt"`但我现在可以忍受。

**编辑**：另外，我不认为 N​​otepad++ 是这里的问题，因为我尝试从`cmd`行运行批处理文件并得到相同的错误/问题。我也尝试`tmp.txt`手动设置文件，但仍然存在同样的问题。

我的批处理文件是导致问题的原因：

```
::@ECHO OFF
CD "H:\"
SET counter=0
SET prev=a

FOR /F "tokens=*" %%L IN (tmp.txt) DO (
    SET blnOut=0
    SET curLine="%%L"

    IF /I %prev%==%curLine% (
        SET counter=%counter%+1
        SET blnOut=1
    )
    IF %blnOut%==0 (
        IF %prev%==a (
            SET counter=%counter%+1
            SET blnOut=1
        )
        IF %blnOut%==0 (
            ECHO %curLine%- %counter%
            SET counter=1
        )
    )
    SET prev=%curLine%
) 
```

我已经尝试了所有我能想到的方法，包括将进程拆分为一个函数，但我不断收到错误消息，`Unexpected )`或者，如果它运行，它不会循环遍历文件。

目前，这是`tmp.txt`：

```
1
2
3
4
5
6
7
8
1
4
5
8
4
3
4
4
5 
```

所以理想的输出是：

```
1 - 2
2 - 1
3 - 2
4 - 5
5 - 3
6 - 1
7 - 1
8 - 2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T19:40:47.000

```
@ECHO OFF
SETLOCAL enabledelayedexpansion
FOR %%i IN (prev) DO SET "%%i="
FOR /f "delims=" %%i IN ('sort ^<temp.txt') DO (
 IF DEFINED prev (
  IF "!prev!"=="%%i" (SET /a count+=1) ELSE (
  ECHO !prev! - !count!
  SET "prev="
  )
 )
 IF NOT DEFINED prev (
  SET prev=%%i
  SET /a count=1
 )
)
ECHO %prev% - %count% 
```

这是我的版本。对输入文件进行排序，将类似的行组合在一起，然后当行内容发生变化时，显示以前的内容并计数并重置上一行的计数器和记录。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T20:21:59.090

只要行不包含某些特殊的批处理字符，下面的批处理程序就会以更快的方式执行您想要的操作：

```
@echo off
setlocal EnableDelayedExpansion
for /F "delims=" %%a in (tmp.txt) do (
   set /A "line[%%a]+=1"
)
for /F "tokens=2* delims=[]=" %%a in ('set line[') do (
   echo %%a - %%b
) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-05T20:22:21.437

我有一个不同但更简单的解决方案给你。

您可以下载[用于 win32 的 GNU 实用程序](http://sourceforge.net/projects/unxutils/?source=dlp)。然后只需提取它。它是 Windows 移植工具的集合。非常便利。

然后从那里使用`sort`and`uniq`程序。你可以在...里找到它们

```
extracted_folder\usr\local\wbin\ 
```

那么你可以简单地做

```
sort original_file.txt | uniq --count > count.txt 
```

从窗户`command line`。你会在里面找到你需要的`count.txt`

* * *

确保您的路径正确，或者您的`path`. 如果不在路径中，则执行类似的操作

```
"C:\GNUWin_standalone\usr\local\wbin\sort.exe" original_file.txt | "C:\GNUWin_standalone\usr\local\wbin\uniq.exe" --count > count.txt 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-05T19:18:17.790

您不能使用语法设置环境变量并在同一`for`循环中使用它`%`，您需要使用延迟扩展并使用`!`语法。

我没有测试过这个，但试试这个：

```
::@ECHO OFF
SETLOCAL ENABLEDELAYEDEXPANSION
CD "H:\"
SET counter=0
SET prev=a

FOR /F "tokens=*" %%L IN (tmp.txt) DO (
    SET blnOut=0
    SET curLine="%%L"

    IF /I !prev!==!curLine! (
        SET counter=!counter!+1
        SET blnOut=1
    )
    IF !blnOut!==0 (
        IF !prev!==a (
            SET counter=!counter!+1
            SET blnOut=1
        )
        IF !blnOut!==0 (
            ECHO !curLine!- !counter!
            SET counter=1
        )
    )
    SET prev=!curLine!
) 
```

或者将`for`循环体移动到子程序中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-05T19:40:37.923

这是我对不同方向的想法。它输出您期望的结果。输出未排序；保持原来的行顺序。

```
@ECHO OFF
setlocal enabledelayedexpansion

set filename=h:\tmp.txt
set idx=0

:: build array of unique lines
FOR /F "usebackq delims=" %%I IN ("%filename%") DO (

    rem :: if dupe line not already processed
    2>NUL set line | findstr /r /c:"^line\[[0-9]*\]=%%I$" >NUL || (

        rem :: add it to the array
        set "line[!idx!]=%%I"
        set /a "idx+=1"
    )
)

:: For each unique line
set /a "idx-=1"
for /L %%I in (0,1,%idx%) do (

    rem :: Echo the line contents without a line break
    set /p "=!line[%%I]! - "<NUL

    rem :: use find /c to count the instances of that line.
    findstr /b /e /c:"!line[%%I]!" "%filename%" | find /c "!line[%%I]!"
) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-05T19:22:59.843

你犯了更多的错误，我现在要告诉你。看看`delayed expansion`, `if /?`, `for /?`,`set /?`和所有批次的东西......

```
@ECHO OFF &setlocal enabledelayedexpansion
CD /d "H:\"
SET counter=0
SET prev=a

FOR /F "tokens=*" %%L IN (tmp.txt) DO (
    SET blnOut=0
    SET "curLine=%%L"

    IF /I "!prev!"=="!curLine!" (
        SET /a counter+=1
        SET blnOut=1
    )
    IF "!blnOut!"=="0" (
        IF "!prev!"=="a" (
            SET /a counter+=1
            SET blnOut=1
        )
        IF "!lnOut!"=="0" (
            ECHO !curLine!- !counter!
            SET counter=1
        )
    )
    SET "prev=!curLine!"
) 
```

如果您正确发布内容，您的代码毫无意义`tmp.txt`。

# ios - 如何使用 Xcode 中的块进行有效调试

> ID：15840825
> 
> 赞同：9
> 
> 时间：2013-04-05T18:18:21.587
> 
> 标签：ios, xcode

我真的在为我们的大型 ios 项目调试代码而苦苦挣扎。似乎每个人都对到处放置块和调度队列发疯了。

当我被要求调试一段代码时，我真的很喜欢单步调试，看看事情是如何变化的，看看变量到底发生了什么。对于所有已放入的块，我真的不能轻易做到这一点，原因有两个：

1.  我必须在每个小块内放置一个断点才能在该块中停止。

2.  在一个块内，来自块外的变量不会以可用的方式显示，并且不能使用 po 命令轻松转储到控制台。

是否有更简单或更好的方法来单步执行/评估充满块的代码？或者我在这里错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T18:27:16.237

您是否将断点与自动控制台转储一起使用（不停止正在运行的应用程序）？

有一个远非优秀但真正有用的[关于中间调试](http://www.raywenderlich.com/28289/debugging-ios-apps-in-xcode-4-5)的教程。

快乐编码！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T18:25:45.113

为什么不使用 NSLog() 在块中输出所需的变量？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T19:35:14.627

您可以使用以下命令在控制台中打印出对象：

例子：

```
po object.name
po object.age 
```

另一种方法：在代码处设置断点。当它在该点停止执行时，将鼠标悬停在它上面。

有关更清晰的细节，请查看我对这个问题的回答：[How to inspect elements from NSArray and NSDictionary in xcode?](https://stackoverflow.com/questions/14974125/how-to-inspect-elements-from-nsarray-and-nsdictionary-in-xcode-4-6/14974895#14974895)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T20:10:35.630

你是对的，调试块有点麻烦。我尝试使用“自动转储断点”，但事实证明，它们很难维护......

我最终基本上使用了`NSLog`. 但问题`NSLog()`是，你不想在你的发布版本中记录所有的日志。所以我建议使用如下工具：

[MWLogging](https://github.com/MikeWeller/MWLogging)

我认为这真的很棒。您可以在此博客文章中阅读相关内容并进行一般登录：

[iOS 开发：你做错了](http://doing-it-wrong.mikeweller.com/2012/07/youre-doing-it-wrong-1-nslogdebug-ios.html)

真的很值得一读。

# shared-libraries - 如何创建具有两个同名函数的共享库 (.so)

> ID：15840827
> 
> 赞同：1
> 
> 时间：2013-04-05T18:18:25.123
> 
> 标签：shared-libraries, libc, newlib

我首先编译了两个目标文件（.o）：

*   字符串-memcpy.o
*   机器-memcpy.o

他们都定义了一个函数`memcpy()`。现在，我想创建一个共享库（.so）：

```
gcc -shared -o test.so string-memcpy.o machine-memcpy.o 
```

由于*“多个定义`memcpy`”*而失败。有没有办法做到这一点 ？谢谢！

事实上，当我尝试为 libc (newlib-1.16) 编译共享库时，我遇到了这个问题。我只能在 Internet 上找到如何从中构建静态库。因此，任何有关如何实现这一目标的提示都值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:01:34.637

静态库只是一个包含 .o 文件的“.ar”文件（tar 的原始前身）。该过程中涉及的任何人都不知道或关心是否存在符号冲突。如果 .ar 文件中的多个 .o 文件包含相同的符号，则链接器将选择它看到的第一个。如果它稍后尝试使用另一个 .o 文件来满足另一个符号，你会得到一个错误。

另一方面，共享库是链接器输出，链接器不愿意创建具有重复符号名称的文件。

有一些复杂的选项`ld`可以让你解决这个问题，但它们也可能只会让你的问题变得更糟。

# android - 如何在 ListView 中显示 arrayList？

> ID：15840828
> 
> 赞同：1
> 
> 时间：2013-04-05T18:18:30.467
> 
> 标签：android, listview, arraylist

目前我有 14 个元素添加到数组列表中，但我希望它们显示在 listview 活动中，到目前为止我有：

```
public class ListView extends ListActivity{

  static final String baseURL ="http://www.dublincity.ie/dublintraffic/cpdata.xml?1354720067473";
  TextView tvcp;

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.listview);
    StringBuilder URL = new StringBuilder(baseURL);
    String fullURL = URL.toString();
    try{
      URL website = new URL(fullURL);
      SAXParserFactory spf = SAXParserFactory.newInstance();
      SAXParser sp = spf.newSAXParser();
      XMLReader xr = sp.getXMLReader();
      HandelingXML gettingData = new HandelingXML();
      xr.setContentHandler(gettingData);
      xr.parse(new InputSource(website.openStream()));

      ArrayList<CarparkNode>carparks = gettingData.getCarparks();

      this.setListAdapter(
        new ArrayAdapter<CarparkNode>(ListView.this,R.layout.listview, android.R.id.list, carparks)
      );
    }catch(Exception e){
      tvcp.setText("error");
    }
  }
} 
```

但是，每次我运行它都会崩溃，我不知道为什么我在使用简单数组之前已经这样做了。如果有人能指出我做错了什么并提供解决方案，那将非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T18:20:25.970

**首先**不要给出类名`ListView`这是Android中的预定义类

**第二**不要在 UI Thread 上执行网络操作。

**编辑：**

**原因：**

Android 3.x 或更高版本的设备不允许在 UI 线程中执行网络操作，当您尝试这样做时，它会抛出异常，说明您正在 UI 线程上执行网络操作，即`NetworkOnMainThreadException`. 所以你需要做的是创建一个单独的线程来执行网络操作或AsyncTask。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T18:28:10.543

您的崩溃很可能会`android.os.NetworkOnMainThreadException`被抛出。应用程序现在默认在严格模式下运行，因此操作系统可以让您知道您做的事情非常非常错误。

您需要在后台线程上发出任何和所有网络请求，而不是在 UI 线程上发出，这将导致 UI 在网络请求进行时不响应用户，并可能导致 ANR 对话框。

请参阅此[问题](https://stackoverflow.com/questions/6343166/android-os-networkonmainthreadexception)的答案，了解如何修复代码以符合最佳实践。

# php - 单击 PHP 中的菜单选项时 POST 方法不起作用

> ID：15840834
> 
> 赞同：2
> 
> 时间：2013-04-05T18:18:52.920
> 
> 标签：php, jquery, html

我正在尝试为我的网站构建一个菜单。当我单击菜单时，它应该 POST 到 index.php 但什么也没发生。我已经使用 console.log 进行了检查，分配给 data-val 的值正在输入，但隐藏的 INPUT 不起作用。有人可以通过指出问题来指明正确的方向。谢谢

这是JQuery

```
 $(document).ready(function($) {
           $('ul li a').on('click', function() {
               $('#shareto').val($(this).data('val'));
           });
       }); 
```

这是HTML

```
 <form name="mainmenu" id="mainmenu" method="post" action="index.php">
        <table border="0" cellpadding="0" cellspacing="0" width="100%">
        <tr>
            <td width="96%" height="50" background="images/headerPanel.jpg" valign="center">
                <font face="verdana" size="1" color="white"> <h1 align="center">ABC Company</h1></font>
            </td>
            <td width="3%" background="images/headerPanel.jpg" valign="center" align="right">
                <input type="submit" name="submit" value="Logout" />
            </td>
            <td width="1%" background="images/headerPanel.jpg" valign="center"></td>
        </tr>
        </table>

        <table border="0" cellpadding="0" cellspacing="0" width="100%">
        <tr>
            <td width="2%" bgColor=#C11B17></td>
            <td width="16%" bgColor=#C11B17>
                <ul>
                    <li><a href="#">Maintanence</a>
                        <ul>
                            <li><a href="#" data-val="1-1">Add Category</a></li>
                            <li><a href="#" data-val="1-2">Add Sub-category</a></li>
                        </ul>
                    </li>
                    <li><a href="#">Process Order</a>
                        <ul>
                            <li><a href="#" data-val="2-1">Ship Order</a></li>
                            <li><a href="#" data-val="2-2">Change Order Status</a></li>        
                        </ul>
                    </li>
                    <li><a href="#">Reports</a>
                        <ul>
                            <li><a href="#" data-val="3-1">Orders by station</a></li>
                            <li><a href="#" data-val="3-2">Orders by date</a></li>
                            <li><a href="#" data-val="3-3">Pending Orders</a></li>
                        </ul>
                    </li>
                    <input id="shareto" type="hidden" name="shareto">
                </ul>
            </td>
        </tr>
        </table>
    </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:12:47.623

您的问题是提交用于注销的表单按钮，如果您需要使用提交按钮进行注销，那么对于发送菜单项索引，您需要使用 ajax 查询而不需要“shareto”输入元素。之后在服务器端，您可以重定向正确的菜单页面。或相反亦然。

这是完整代码：客户端js文件：

```
$(document).ready(function($) {
    $('ul li a').on('click', function() {
        var menuItemIndex = $(this).data('val');
        $.ajax({
          type: "POST",
          dataType:'json',
          url: "index.php",
          data: {
               menuindex: JSON.stringify(menuItemIndex)
          },
          success: function(data, textStatus, jqXHR) {
              console.log(data.menu_location);
              window.location = data.menu_location;
          },
          error: function(errorMsg, textStatus, jqXHR) {
              console.log(errorMsg);
              console.log(textStatus);
              console.log(jqXHR);
          }
        });
     });
}); 
```

服务器端 index.php ：

```
<?php
     $menu_locations = array("1-1" => "URL_1.html", "1-2" => "URL2_.html");
     $menu_item_index = json_decode($_POST['menuindex']);

     header("Content-type: application/json");
     echo json_encode(array("menu_location" => $menu_locations[$menu_item_index])); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T18:23:35.223

您需要提交表单以发布数据...使用 jquery 的[ubmit()](http://api.jquery.com/submit/)提交表单..

试试这个

```
 $(document).ready(function($) {
       $('ul li a').on('click', function() {
           $('#shareto').val($(this).data('val'));
           $('#mainmenu').submit();
       });
   }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T18:23:55.517

jquery 需要是：

```
 $(document).ready(function($) {
       $('ul li a').on('click', function() {
           $('#shareto').val($(this).data('val'));
           $('#mainmenu').submit();
       });
   }); 
```

# ruby-on-rails - 执行 db:reset 后的未知列“photos.gallery_id”

> ID：15840839
> 
> 赞同：0
> 
> 时间：2013-04-05T18:19:14.093
> 
> 标签：ruby-on-rails

在我拉了一个 rake db:migrate:reset 之后，一些代码停止工作。当试图查看我的画廊索引页面时，我得到： Mysql2::Error: Unknown column 'photos.gallery_id' in 'where clause': SELECT COUNT(*) FROM `photos` WHERE `photos`。`gallery_id`= 1

如果我从 index.html 中删除一行编码，它将起作用： <%= gallery.photos.size %>

我没有修改任何代码。这一切都是在我进行重置后发生的。很好奇如何修复它。

索引.html：

```
<% for gallery in @galleries %>
    <div class="gallery">
        <h2><%= link_to gallery.name, gallery %></h2>
        Photos: <%= gallery.photos.size %>
    </div>
<% end %>

<p><%= link_to "New Gallery", new_gallery_path %></p> 
```

正确的列是“gallery_id”，所以我不确定它为什么要尝试提取“photos.gallery_id”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:46:08.203

就像错误所说的那样，“照片”表中没有“gallery_id”列。您可以尝试检查数据库并检查它是否存在。你可以试试：

```
rails c
> Photo 
```

并查看是否有一个名为“gallery_id”的字段。

您应该尝试运行`rake db:migrate`.

# webserver - Web 服务器和各种重定向

> ID：15840841
> 
> 赞同：-6
> 
> 时间：2013-04-05T18:19:19.920
> 
> 标签：webserver

我如何向我的 Web 服务器发出请求并打开它，也许，对其他主机上的另一个 Web 服务器的多个请求等等，直到一个或多个不同的 Web 服务器获得响应，并将其返回给发起请求的客户端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:01:30.567

*听起来*你要求的是这样的：

[客户端] --> [您的网络服务器] ----> [多个服务器]

1.  客户端向您的网络服务器发起请求
2.  您的网络服务器向一个或多个远程网络服务器发出请求
3.  当至少一个远程网络服务器回复或超时时，您的网络服务器将响应发送回您的客户端。

如果这是您要问的，那么范围太广了。即，您的实现是什么？这真的是一个python问题吗？:)

如果后端的所有大量服务器都相同并且由您控制，那么位于前端的服务器基本上将成为负载平衡器或代理服务器。Ala HA-Proxy、Nginx、Apache、Varnish 等。

如果您正在谈论将您的网站设置为进行部分代理或网络抓取或数据捕获，那么这完全是另一回事。

在任何一种情况下，您的问题/案例都过于模糊，如发布的那样。

编辑：回应评论。

这并不是特别困难。你需要做的是设置一个 python 守护进程，它监听一个 web 端口。根据您希望文件读取行为的工作方式，您可以在启动时读取文件，使其位于内存中，或者您可以承受性能损失并在每次尝试时读取文件。

启动与远程站点的连接是构建和调用适当的 python 库的问题。

**创建 python 网络服务器：**

[http://docs.python.org/2/library/simplehttpserver.html](http://docs.python.org/2/library/simplehttpserver.html)

**要启动与远程站点的连接：**

**使用 Python HTTP 库：** [http ://docs.python.org/2/library/httplib.html](http://docs.python.org/2/library/httplib.html)

**构建 Python Web 客户端：http:** [//python.about.com/od/networkingwithpython/ss/beg_web_client_all.htm](http://python.about.com/od/networkingwithpython/ss/beg_web_client_all.htm)

**Python Web Scraping：** [使用 Python 进行 Web 抓取](https://stackoverflow.com/questions/2081586/web-scraping-with-python) [http://scrapy.org/](http://scrapy.org/)

您所描述的不是执行任务的理想方式。在这方面，使用 HAproxy/Nginx 会更好。但是，鉴于要求是 python，上述资源链接将为您指明正确的方向。

# types - 具有类型和值限制以及默认值的 Erlang 记录

> ID：15840842
> 
> 赞同：5
> 
> 时间：2013-04-05T18:19:22.577
> 
> 标签：types, erlang, default-value, records, restrictions

我正在尝试编写代表银行帐户的记录：

```
-record(account, {  name :: atom(),
                    type :: atom(),
                    balance = 0 :: integer()  }). 
```

我还想将平衡限制为始终`>= 0`。我该怎么做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T15:24:18.580

正如其他人所指出的，类型规范仅仅是[PropEr](https://github.com/manopapad/proper)和[Dialyzer](http://www.erlang.org/doc/man/dialyzer.html)等分析工具的输入。如果您需要强制执行不变量`balance >= 0`，则应封装帐户类型，仅可访问尊重不变量的函数：

```
-module(account).

-record(account, { name :: atom(),
                   type :: atom(),
                   balance = 0 :: non_neg_integer() }).

%% Declares a type whose structure should not be visible externally.
-opaque account() :: #account{}.
%% Exports the type, making it available to other modules as 'account:account()'.
-export_type([account/0]).

%% Account constructor. Used by other modules to create accounts.
-spec new(atom(), atom(), non_neg_integer()) -> account().
new(Name, Type, InitialBalance) ->
    A = #account{name=Name, type=Type},
    set_balance(A, InitialBalance).

%% Safe setter - checks the balance invariant
-spec set_balance(account(), non_neg_integer()) -> account().
set_balance(Account, Balance) when is_integer(Balance) andalso Balance >= 0 ->
    Account#account{balance=Balance};
set_balance(_, _) -> error(badarg). % Bad balance 
```

请注意，这类似于 Java 或 C++ 等面向对象语言中具有私有字段的类。通过限制对“受信任的”构造函数和访问器的访问，可以强制执行不变量。

此解决方案不提供防止*恶意*修改`balance`字段的保护。另一个模块中的代码完全有可能忽略“不透明”类型规范并替换记录中的 balance 字段（因为[记录只是 tuples](http://www.erlang.org/doc/reference_manual/records.html)）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-05T18:49:07.403

类似的东西`balance = 0 :: 0 | pos_integer()`可能会奏效。

编辑不确定它是否存在，但`non_neg_integer()`会更好：

```
balance = 0 :: non_neg_integer() 
```

# mysql - 如何解决 MySQL 错误代码：1292。截断不正确的 DOUBLE 值？

> ID：15840843
> 
> 赞同：4
> 
> 时间：2013-04-05T18:19:33.470
> 
> 标签：mysql

我正在尝试使用更新查询更新 2 个不同的表，如下所示

```
UPDATE  db1.table1 a, db2.table1 b 
SET       b.firstname  =  a.firstname,
          b.lastname   =  a.lastname,
          b.address    =  a.address,
          b.state      =  a.state,
          b.city       =  a.city,
          b.zip        =  a.zip             

WHERE a.stud_id=b.stud_id AND a.firstname IS NOT NULL AND b.firstname IS NULL
          AND str_to_date(a.joindate,'%m/%d/%Y') >= str_to_date('02/01/2012','%m/%d/%Y'); 
```

但是当我尝试执行此查询时，MySQL 不断抛出以下错误

```
Error Code: 1292\. Truncated incorrect DOUBLE value: 'CROUGH0000' 
```

虽然我在 stackoverflow 中找到了很多类似的帖子，但我找不到这个问题的确切解决方案。

需要一些帮助。提前致谢

* * *

编辑：每列的数据类型如下

```
 b.firstname(varchar(25))  =  a.firstname(varchar(52)),
              b.lastname(varchar(25))   =  a.lastname(varchar(35)),
              b.address(varchar(40))    =  a.address(varchar(50)),
              b.state(char(2))      =  a.state(char(2)),
              b.city(varchar(25))       =  a.city(varchar(25)),
              b.zip(varchar(11))        =  a.zip(varchar(11)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T19:04:05.833

如果所有这些列都是 varchar（如上所述），那么问题一定出在`a.stud_id=b.stud_id`.

检查表 a 和 b 中的数据类型。有些东西必须是双重的，否则 MySQL 不会抱怨它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-02T02:05:54.203

对我来说，显示此错误是因为我使用“和”来更新 2 个查询而不是“逗号”。

此代码段显示错误：

```
UPDATE employees 
SET 
lastname = 'Hill'and
email = 'mary.hill@classicmodelcars.com'
WHERE
employeeNumber = 1056; 
```

此片段显示了更正：

```
UPDATE employees 
SET 
lastname = 'Hill',
email = 'mary.hill@classicmodelcars.com'
WHERE
employeeNumber = 1056; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-07T12:20:43.083

我认为该`joindate`列包含一个不是字符串日期的字符串值。

为了检查，如果可能的话，我建议测试以下 SQL 命令

```
UPDATE db1.table1 a
      ,db2.table1 b 
SET b.firstname = b.firstname,
WHERE a.stud_id=b.stud_id 
  AND a.firstname IS NOT NULL 
  AND b.firstname IS NULL; 
```

如果这项工作有效，则没有任何改变，但您知道您的问题与`joindate`字段或`str_to_date`功能有关。

注意： b.firstname 被分配给相同的值 -> 没有任何改变

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-13T16:35:02.400

我遇到了一个意外问题，我在 where 子句中正确比较了数据类型，但仍然遇到了同样的异常。

我有这个例外只是因为我在表上有一个**计划的事件**，我试图更新它清楚地比较了 where 子句中的不同类型的字段。解决该问题后，一切正常。

# node.js - 创建模型时出现猫鼬错误（使用步骤）

> ID：15840844
> 
> 赞同：22
> 
> 时间：2013-04-05T18:19:40.033
> 
> 标签：node.js, mongodb, mongoose

尝试在 Mongoose 中创建模型时出现以下错误

[TypeError：无法读取未定义的属性“选项”]

我不知道是什么原因造成的

```
"use strict";
var Step = require('step');
var mongoose = require('mongoose');
var Schema = mongoose.Schema;

function randomFunction() {
    var categorySchema = new Schema({
        id: Number,
        name: String,
        description: String
    }, { collection: 'categories' });

    var Category;

    //...

    mongoose.connect('mongodb://localhost/grouping');

    new Step(
        function() { //Connect to mongodb
            var db = mongoose.connection;
            db.on('error', console.error.bind(console, 'connection error:'));
            db.on('open', this);
        },
        function() {  //Create model
            console.log(categorySchema); //Logs the schema object right
            Category = mongoose.Model('Category', categorySchema);

        },
        function(err) {
            console.log(err);  //Error here
        });
    //...
} 
```

我对 Mongo 很陌生（对节点也很陌生），但我完全不知道错误消息的含义。

我知道我在架构中定义了选项，但我看不出它是如何未定义的，有人能指出我正确的方向吗？

注意 - 这是原始代码的一个很大的删减，这是一般结构（实际上下面有一些代码`mongoose.Model('Cat...`但它被跳过了，我认为是因为错误是由调用引发的，因为在它之后`mongoose.Model`甚至没有`console.log("Hello");`直接打印 a 。

**编辑** 我发现在 Mongoose (mongoose/lib/document.js) 内部尝试获取`this.schema`但未定义

```
function Document (obj, fields, skipId) { //Line 37
    this.$__ = new InternalCache;
    this.isNew = true;
    this.errors = undefined;

    var schema = this.schema; //-> undefined
    // ... 
```

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-04-06T13:06:33.940

原来我不是那种善于观察的人，

`mongoose.Model`应该`mongoose.model`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-18T04:09:20.010

调用它也会得到同样的错误。

`MyModel = new mongoose.model('<your model name>', mySchema)`

如果您确实删除了新的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-22T15:25:25.960

在 Promise 链中使用模型方法时也会显示此错误消息，例如：

```
const Product = mongoose.model('Product', ProductSchema)

ScrapProducts()
  .then(mapToModel)
  .then(Product.create) 
```

要解决它，您必须确保您的猫鼬模型保留其原始上下文。

```
const Product = mongoose.model('Product', ProductSchema)

ScrapProducts()
  .then(mapToModel)
  .then(function(data) {
    return Product.create(data)
  }) 
```

或更好：

```
const Product = mongoose.model('Product', ProductSchema)

ScrapProducts()
  .then(mapToModel)
  .then(Product.create.bind(Product)) 
```

# php - php提交按钮和表单单选

> ID：15840846
> 
> 赞同：0
> 
> 时间：2013-04-05T18:19:44.353
> 
> 标签：php, mysql, submit, radio

我正在尝试编写将信息发送到 SQL 的脚本，但是提交按钮和表单收音机有问题，有人可以帮我吗？

这个 IF 不能正常工作

```
if (isset($_POST['test'])) {
if(isset( $_POST['odp'])) 
```

这是 PHP [http://wklej.org/id/1003412/的所有代码](http://wklej.org/id/1003412/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:24:40.410

一方面，在查看您的代码后，您似乎最好将这两个 if 结合起来，如下所示：

```
if ((isset($_POST['test']) && isset( $_POST['odp']))
{
    code to execute;
} 
```

你得到 isset($_POST['test']) 和 isset($_POST['odp']) 的值是多少？您可能想尝试将它们呼应出来，看看它们是否是您期望的实际值。您也可以尝试在两个 if(isset 之后立即回显某些内容，因为它可能是已执行代码的一部分不起作用，而不是实际的 if 语句。

empty($_POST['test']) 也可能效果更好，与上述海报相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:13:30.467

对于标题，在您提供的代码中，您当前已将该行注释掉。另一个提示是，必须在输出任何内容之前完成标头重定向，您目前在打印行和一些回显行之后拥有它。要解决此问题，您可以将其移至所有其他代码之上的函数，然后在需要时调用该函数。

编辑：这是为了回答此页面上发布的最后一个问题。

# android - Android 使用手指擦除位图透明度和匹配背景

> ID：15840853
> 
> 赞同：3
> 
> 时间：2013-04-05T18:20:09.097
> 
> 标签：android, canvas, transparency

**设想：**

1.  以`FingerPaint`示例为基础
2.  `FingerPaint`在区域中绘制一些文本
3.  希望用户能够通过拖动手指来擦除文本的某些部分

*参考： [如何用手指擦除油漆](https://stackoverflow.com/questions/13742297/how-erase-paint-with-the-finger)*

**尝试：**

它几乎可以到达我想要的位置，但是`SRC`拖动`CLEAR`路径是黑色的。我希望拖动路径是绘制到画布上的颜色，而不是在手指移动时重新绘制整个画布。

如果您知道 FingerPaint，他们会这样做：

```
canvas.drawColor(0xFFAAAAAA); 
```

我通过 drawText 在此画布上写了一些黑色文本。
然后我尝试了以下组合以允许用户擦除文本：

```
mPaint.setColor(0xFFAAAAAA);
mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));

mPaint.setColor(Color.TRANSPARENT);
mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));

mPaint.setColor(0x00AAAAAA);
mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR)); 
```

`CLEAR`您可以通过将模式替换为模式来将这三个相乘`SRC`并显示相同的结果。

**问题：**

任何人都知道如何使我的擦除`drawPath`采取适当的措施来擦除它被拖动的位图部分，并且在这样做的同时，被拖动的路径应该与绘制到文本下方的画布上的颜色相匹配？

# java - Java - 代码中无法识别 createImageIcon()？

> ID：15840857
> 
> 赞同：2
> 
> 时间：2013-04-05T18:20:25.713
> 
> 标签：java, swing, imageicon

我不断收到一个错误，即 createImageIcon() 未被识别为可用函数。不知道为什么会发生这种情况，因为我觉得我已经加载了我需要的库。

```
ImageIcon icon = createImageIcon("images/middle.gif","this is a caption"); 
```

我尝试过使用不同的参数等，但似乎无法弄清楚。

```
import javax.swing.*;
import javax.swing.ImageIcon;
import java.awt.*;
import java.awt.image.BufferStrategy;

public class main extends JFrame {

    public main() {

    }

    public static void main(String[] args) {
        JMenuBar menuBar = new JMenuBar();
        JMenu Menu_File = new JMenu("TEST MENU");
        JMenu Menu_File_New = new JMenu("New");
        ImageIcon icon = createImageIcon("images/middle.gif","this is a caption");
        Menu_File.add(Menu_File_New);
        JMenuItem Menu_File_New_Project = new JMenuItem("Project...");
        JMenuItem Menu_File_New_Burrito = new JMenuItem("Burrito...");
        JMenuItem Menu_File_New_Cookie = new JMenuItem("Cookie...");
        JMenuItem Menu_File_New_Other = new JMenuItem("Other...");
        Menu_File_New.add(Menu_File_New_Project);
        Menu_File_New.add(Menu_File_New_Burrito);
        Menu_File_New.add(Menu_File_New_Cookie);
        Menu_File_New.add(Menu_File_New_Other);
        JMenuItem Menu_File_Open = new JMenuItem("Open...");
        JMenuItem Menu_File_Save = new JMenuItem("Save");
        JMenuItem Menu_File_SaveAs = new JMenuItem("Save As...");
        JMenuItem Menu_File_Reload= new JMenuItem("Reload");
        Menu_File.add(Menu_File_Open);
        Menu_File.add(Menu_File_Save);
        Menu_File.add(Menu_File_SaveAs);
        Menu_File.add(Menu_File_Reload);
        Menu_File.addSeparator();
        JMenuItem Menu_File_Screenshot = new JMenuItem("Take Screenshot");
        Menu_File.add(Menu_File_Screenshot);
        Menu_File.addSeparator();
        JMenuItem Menu_File_Exit = new JMenuItem("Exit");
        Menu_File.add(Menu_File_Exit);
        menuBar.add(Menu_File);
        JMenu Menu_Edit = new JMenu("Edit");
        JMenu Menu_Windows = new JMenu("Windows");
        JMenu Menu_Mode = new JMenu("Mode");
        JMenu Menu_Help = new JMenu("Help");
        menuBar.add(Menu_Edit);
        menuBar.add(Menu_Windows);
        menuBar.add(Menu_Mode);
        menuBar.add(Menu_Help);

        main frame = new main();
        frame.setJMenuBar(menuBar); // Create menu and associate with frame
        frame.setTitle("3DAirspace");
        frame.setUndecorated(true);
        //frame.setExtendedState(JFrame.MAXIMIZED_BOTH);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T18:22:56.470

它实际上应该是：

```
ImageIcon icon = new ImageIcon("images/middle.gif","this is a caption"); 
```

以便您为新的 ImageIcon 对象调用构造函数？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-05T18:22:48.363

您调用的方法不在您的班级中。

在 Java 教程[How to use icons](http://docs.oracle.com/javase/tutorial/uiswing/components/icon.html)中，有这个同名的示例方法，您可以将其复制到您的类中。

```
/** Returns an ImageIcon, or null if the path was invalid. */
protected ImageIcon createImageIcon(String path,
                                       String description) {
    java.net.URL imgURL = getClass().getResource(path);
    if (imgURL != null) {
        return new ImageIcon(imgURL, description);
    } else {
        System.err.println("Couldn't find file: " + path);
        return null;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-07T07:18:16.040

这段代码对我有用：

```
JButton button1 = new JButton("Button 1",new ImageIcon("youricon.gif")); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-05T18:23:01.263

这行得通吗？

```
ImageIcon icon = new createImageIcon("images/middle.gif","this is a caption"); 
```

# node.js - 用于 Paypal IPN 的 Node express bodyParser

> ID：15840859
> 
> 赞同：1
> 
> 时间：2013-04-05T18:20:27.573
> 
> 标签：node.js, post, express, paypal-ipn

我正在尝试让 paypal ipn 为我的 node.js express 应用程序工作，一旦我收到它，我必须验证 ipn 消息，方法是“按照接收到的确切顺序发送 [ing] 内容并在它之前使用命令_通知验证”。他们给出的示例是这样的查询字符串：

```
https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_notify-validate&mc_gross=19.95&protection_eligibility=Eligible&address_status=confirmed&payer_id=LPLWNMTBWMFAY&tax=0.00&...&payment_gross=19.95&shipping=0.00 
```

但是，因为我使用的是 bodyParser，所以 request.body 是一个 json 对象。如果我要附加“cmd=_notify-validate”并将其发回，我将如何将其作为简单的查询字符串接收并将其作为简单的查询字符串发送而无需摆脱 bodyParser？我仍然需要这条路线上的 json 解析版本来实际解释数据。另外，在服务器端发送 POST 是什么样的？（我只做 res.send(str) 吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T06:38:08.453

我为节点使用了 paypal-ipn 模块，结果证明一个 json 解析的主体很好。我使用这个模块的主要问题是确保使用 res.send(200) 进行响应，否则 paypal 的 ipn 会每隔一分钟左右发送消息。这是帮助的代码：

```
exports.ipn = function(req,res){
    var params = req.body
    res.send(200);

    ipn.verify(params, function callback(err, msg) {
        if (err) { console.log(err); return false }

        if (params.payment_status == 'Completed') {

            // Payment has been confirmed as completed
            // do stuff, save transaction, etc.
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T13:22:55.363

由于您确实询问了如何发出 HTTP POST 请求，因此您就是这样做的。

```
var options = {
  host: 'example.com',
  port: '80',
  path: '/pathname',
  method: 'POST',
  headers: {
    'Content-Type': 'application/x-www-form-urlencoded',
    'Content-Length': post_data.length
  }
};

var post_req = http.request(options, function (res) {
  res.setEncoding('utf8');
  var chunks = '';
  res.on('data', function (chunk) {
    chunks += chunk;
  });
  res.on('end', function() {
    console.log(chunks);
  });
});

post_req.write(post_data);
post_req.end(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-01T05:41:50.143

为了让这个 IPN 发挥作用，我也挣扎了一两天。我对 bodyparser 和 url-encoded 有类似的问题。

这是 NodeJS 中的一些工作示例代码，它们侦听传入的 IPN 消息并针对 Paypal Sandbox 进行验证。

[https://github.com/HenryGau/node-paypal-ipn](https://github.com/HenryGau/node-paypal-ipn)

`mocha subscriptionMessage.js`您可以在文件夹中运行 subscriptionMessage.js`tests`来模拟/模拟 Paypal IPN 消息。

希望能帮助到你。

# javascript - 如何防止 facebook 连接网站中的弹出窗口阻止程序？

> ID：15840863
> 
> 赞同：0
> 
> 时间：2013-04-05T18:20:48.573
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk

我为我的网站创建了一个 facebook 登录应用程序。但是弹出窗口阻止程序会阻止它。我在谷歌搜索它说要添加一个 onclick 选项，我有一个。但它仍然无法正常工作。我在下面发布了我的代码

js代码：

```
 $(document).ready(function() {

 window.fbAsyncInitialize = function() {
    FB.init({
      appId      : '', // App ID
      channelUrl : '..../channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });
    FB.getLoginStatus(function(response) {
    if (response.status === 'connected') {
        // connected
        apiCall();
    } else if (response.status === 'not_authorized') {
        // not_authorized
      login();
    } else {
        // not_logged_in
      login();
    }
    });

  };

   function login() {
    FB.login(function(response) {
        if (response.authResponse) {
            // connected
          apiCall();
        } else {
            // cancelled
        }
    }, { scope: 'email' });
  }

  function apiCall() {

    console.log('Welcome!  Fetching your information.... ');
    FB.api('/me', function(response) {

        var first_name = response.first_name;
        var last_name = response.last_name;
        var fb_id = response.id;
        var email = response.email;

    });
  }

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
 }); 
```

html：

我应该更改或添加什么来防止弹出窗口阻止程序问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T09:51:33.683

您可以将用户重定向到登录页面，而不是弹出授权对话框。

您还可以通过用户操作触发登录 - 如果用户单击触发弹出窗口的链接，它将被阻止的可能性要小得多（而不是以编程方式触发登录）。

# php - 上传后显示图片网址

> ID：15840864
> 
> 赞同：1
> 
> 时间：2013-04-05T18:20:51.830
> 
> 标签：php, image, url

我正在做一个项目，我正在寻找一个脚本来上传图像，并在上传后显示该位置的 URL。

我一直在编写一些脚本，但它们都不起作用。谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:58:44.760

这个应该对你有帮助，我试过了，对我来说效果很好： [http ://www.script-tutorials.com/demos/199/index.html](http://www.script-tutorials.com/demos/199/index.html)

# javascript - jquery延迟的时间问题

> ID：15840865
> 
> 赞同：6
> 
> 时间：2013-04-05T18:20:57.043
> 
> 标签：javascript, jquery, race-condition, jquery-deferred, deferred

[这个问题是作为 jQuery Deferred 执行](https://stackoverflow.com/questions/15837964/not-asynchronous-function-executed-as-jquery-deferred)的非异步函数的仔细提炼版本。

我们有 2 个 jsfiddles：

1.  [http://jsfiddle.net/XSDVX/1/](http://jsfiddle.net/XSDVX/1/) - 这里没有触发进度事件，尽管调用了 notify() 函数。

2.  [http://jsfiddle.net/UXSbw/1/](http://jsfiddle.net/UXSbw/1/) - 这里进度事件按预期触发。

唯一的区别是一行代码：

```
setTimeout(dfd.resolve,1); 
```

相对

```
dfd.resolve(); 
```

**问题是：**

1.  > 当我们延迟解析时，.then 如何捕获在此回调返回之前调用的 .notify？想想看。.then 获取从它的第一个参数返回的延迟对象，并从中创建一个新的延迟对象，绑定到它的完成进度和失败事件。如果在延迟返回之前调用了通知，那么即使使用 setTimeout，.then 如何捕获它？（感谢[https://stackoverflow.com/users/400654/kevin-b](https://stackoverflow.com/users/400654/kevin-b)提出这个问题）

2.  我可以摆脱`setTimeout()`并仍然触发进度回调吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-11T10:39:34.763

做了一个大的重构，这是[最后一个工作示例，](http://jsfiddle.net/UXSbw/6/)带有进度监控。

现在是重要的部分。

*   在调用 resolve 之后，JQuery deferreds 不执行任何进度回调（[有一个例外](http://api.jquery.com/deferred.progress/)）。在您的示例中（没有 setTimeout），延迟立即解决，没有机会运行进度。
*   在我们在最终的 Deferred 上触发 enything*之前*，执行所有回调的挂钩，尤其是进度回调。这是通过在我们填充它的触发器*之后将最终的 Deferred（现在是信标）传递给执行函数来实现的。*
*   我重构了 API，所以要执行的函数是延迟不可知的。
*   该解决方案在 memo.then 函数内部使用了一个局部（对于 reduce 迭代器函数）Deferred 的[闭包](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)，以继续执行链。

编辑：我忘记了你的第一个问题。这种行为是通过[闭包](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)（“x”函数中的 dfd 变量）实现的。

函数“x”立即返回（在触发一个现在可以处理的通知事件之后，因为执行链的所有延迟都已创建，并且“executePromiseQueueSync”的完成、失败、进度挂钩已被挂钩）。

此外，setTimeout 的函数在闭包中“关闭”dfd，因此尽管“x”已返回，它仍可以访问该变量。“then”调用通过创建与第一个链接的下一个延迟来继续。

在 JS VM 产生后（它没有其他事情要做）， setTimeout 触发它的关联函数，该函数（通过闭包）可以访问“关闭”的 dfd 变量。Deferred 已解决，链可以继续。

EDIT2：[这是一个重构版本](http://jsfiddle.net/UXSbw/7/)，增加了对长时间执行、延迟支持的函数的支持，它们通知调用者他们的进度。

EDIT3：这是[另一个版本](http://jsfiddle.net/UXSbw/8/)，没有下划线绑定和 jq-ui 进度条示例。

顺便说一句，这对于复杂的应用程序初始化例程来说是一个非常好的主意。

来源（第一版）

```
function executePromiseQueueSync(queue, beacon){
    var seed = $.Deferred(),
        le = queue.length,
        last;
    beacon.notify(0);
    last = _.reduce(queue, function(memo, ent, ind){
       var df = $.Deferred();
        df.then(function(){
            console.log("DBG proggie");
            beacon.notify((ind+1)/le*100);
        });
        console.log("DBG hook funk "+ind);
        memo.then(function(){
          console.log("DBG exec func "+ind);
          ent.funct.apply(null, ent.argmnt);
          df.resolve();
        });

        return df.promise();
    }, seed.promise());
    last.then(function(){
        beacon.resolve(100)
    });
    seed.resolve(); // trigger

    return beacon.promise();
}

function x(){
    // do stuff
    console.log("blah");
}

var promisesQueue = [],
     beacon = $.Deferred(); 

promisesQueue.push({funct: x, argmnt:[]});
promisesQueue.push({funct: x, argmnt:[]});
promisesQueue.push({funct: x, argmnt:[]});

function monTheProg(pct) 
{
    console.log('progress '+pct);
}

// first hook, then exec
beacon.then(function(){
        console.log('success');
    }, function(){
        console.log('failure');
    }, monTheProg);

// do the dance
executePromiseQueueSync(promisesQueue, beacon) 
```

# ruby - Errors.add 与对象实例作为消息

> ID：15840870
> 
> 赞同：1
> 
> 时间：2013-04-05T18:21:26.057
> 
> 标签：ruby, ruby-on-rails-3

我有一个带有自定义日历验证例程的表单。我希望能够向用户显示有关此错误的大量动态信息。

从这个意义上说`errors.add(:base, "this is wrong because ...")`不会削减它。所以我想到了将执行实际验证的对象实例传递给错误数组。我会把它留给视图，通过调用实例上的方法来挑选它想要的信息。

在我的模型验证例程中，我有：

```
errors.add(:date_range, [calendar] ) 
```

在视图中，我这样做：

```
<p><%= @event.errors[:date_range].first.first.parse_events.to_sentence %></p> 
```

我必须添加数组文字，否则`empty?`rails 调用的方法会失败。

尽管这有效，但它闻起来很糟糕！我考虑过使用`render_to_string`，但显然不能从模型中调用（或不应该调用）。

关于如何改进这一点的任何建议？

# c# - C# 和 youtube 视频 ID

> ID：15840874
> 
> 赞同：-3
> 
> 时间：2013-04-05T18:21:36.240
> 
> 标签：c#, asp.net, webforms

我这里有这个脚本

```
<object width="830" height="495">
    <param name="movie" value="http://www.youtube.com/v/VIDEOIDHERE?fs=1&amp;hl=en_US&amp;rel=0&amp;autoplay=1">
    <param name="allowFullScreen" value="true">
    <param name="allowscriptaccess" value="always">
    <embed src="http://www.youtube.com/v/VIDEOIDHERE?fs=1&amp;hl=en_US&amp;rel=0&amp;autoplay=1" type="application/x-shockwave-flash"
           allowscriptaccess="always" 
           allowfullscreen="true" width="830" height="495">
</object> 
```

在我后面的代码中，我在一个名为 videoID 的字符串中定义了 videoID

如何用我在后面的代码中定义的 videoID 替换 VIDEOIDHERE？

我正在使用 ASP.NET

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T18:29:47.327

如果您有一个名为 VideoId 的属性（访问修饰符为 protected 或更高），则应该这样做：

```
<embed src="http://www.youtube.com/v/<%= VideoId %>?fs=1&amp;hl=en_US&amp;rel=0&amp;autoplay=1" ...> 
```

# android - 如何为 Listview 中不同大小的图像设置 Imageview 的最佳大小

> ID：15840875
> 
> 赞同：1
> 
> 时间：2013-04-05T18:21:40.593
> 
> 标签：android, android-layout, android-widget

我正在开发一个`android app`. 我想做的是一个`listview`带有一些文本和图像的自定义视图。我从互联网下载的图像大小不同。我想在不改变外观的情况下调整它们的大小。如果我在 xml 文件中设置`ImageView` `height`， `weight`我的应用程序将在不同屏幕尺寸的设备上具有相同的外观。如果我将`ImageView`布局大小设置为`wrap content`，图像在应用程序中看起来很糟糕，因为它们每个都有不同的大小。一个想法或教程会很好。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:21:28.403

ImageView的[scaleType](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)属性在修复不同屏幕尺寸的调整问题时非常有用。[这个站点](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)有所有 scaleTypes 的示例图像。

一种解决方案是使用足够大的图像，将 match_parent 指定为 ImageView 的 layout_width，并在 dp 中使用精确的 layout_height。如果 scaleType 为 centerCrop，则图像的尺寸保持不变[尽管可能仅显示图像的一部分，具体取决于屏幕尺寸]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T18:54:42.413

我认为您想要做的是在 gimp 或 photoshop 中调整图像的大小，并以不同的大小保存图像的多个副本。

你会想看看[这个教程](http://developer.android.com/guide/practices/screens_support.html)。

# android - Android WebChromeClient WebView onGeolocationPermissionsShowPrompt 从未触发

> ID：15840879
> 
> 赞同：3
> 
> 时间：2013-04-05T18:21:57.233
> 
> 标签：android, webview, gps, webchromeclient

我有一个带有 WatchPosition 调用的网页，它在常规浏览器中运行良好。但是，当使用 WebChromeClient 从 WebView 加载网页并且永远不会调用 onGeolocationPermissionsShowPrompt 时，请求 GPS 权限的对话框永远不会显示。

```
public class GeoWebChromeClient extends WebChromeClient {
     public void onGeolocationPermissionsShowPrompt(String origin, android.webkit.GeolocationPermissions.Callback callback) {
         Log.d("geolocation permission", "permission >>>"+origin);
         callback.invoke(origin, true, false);
     }
}

 public class GeoWebViewClient extends WebViewClient {

    @Override
    public void onReceivedSslError (WebView view, SslErrorHandler handler, SslError error) {
        handler.proceed();
    }

    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        // When user clicks a hyperlink, load in the existing WebView
        view.loadUrl(url);
        return true;
    }
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    WebView Browser = (WebView) findViewById(R.id.Browser);

    WebSettings webSettings = Browser.getSettings();

    webSettings.setJavaScriptEnabled(true);
    webSettings.setJavaScriptCanOpenWindowsAutomatically(true);
    webSettings.setAppCacheEnabled(true);
    webSettings.setDomStorageEnabled(true);
    webSettings.setGeolocationEnabled(true);

    Browser.setWebViewClient(new GeoWebViewClient());
    Browser.setWebChromeClient(new GeoWebChromeClient());

    Browser.loadUrl("http://192.168.1.102/");

}

<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_GPS" />
<uses-permission android:name="android.permission.ACCESS_ASSISTED_GPS" />
<uses-permission android:name="android.permission.ACCESS_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-06T20:24:44.660

onGeolocationShowPrompt 实际上并不显示提示本身，它只是在页面请求您的地理位置时调用的方法。您需要为用户创建自己的提示，如下所示（放置在 onGeolocatioonShowPrompt 方法中）：

```
final boolean remember = true;
AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setTitle("Locations");
builder.setMessage(origin + " Would like to use your Current Location").setCancelable(true).setPositiveButton("Allow",
                            new DialogInterface.OnClickListener() {
                                @Override
                                public void onClick(DialogInterface dialog,
                                        int id) {
                                    // origin, allow, remember
                                    callback.invoke(origin, true, remember);
                                }
                            })
                    .setNegativeButton("Don't Allow",
                            new DialogInterface.OnClickListener() {
                                @Override
                                public void onClick(DialogInterface dialog,
                                        int id) {
                                    // origin, allow, remember
                                    callback.invoke(origin, false, remember);
                                }
                            });
AlertDialog alert = builder.create();
alert.show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-24T18:49:32.410

对于像我一样正在寻找如何解决“从未使用过 onGeolocationPermissionsShowPrompt”消息的人来说，这应该会有所帮助。如果这是您的问题，那么如果它从未被调用过，那么在该方法中放入什么并不重要。

在您的 onCreate 中：

```
webView = findViewById(R.id.webView);
webView.setWebViewClient(new customWebView());
webView.setWebChromeClient(new customChromeClient()); 
```

自定义类：

```
private class customChromeClient extends WebChromeClient {
    public void onGeolocationPermissionsShowPrompt(String origin, GeolocationPermissions.Callback callback) {
        callback.invoke(origin, true, false);

        //check for permissions or show your dialog etc
    }
}

//other methods you may want to override
private class customWebView extends WebViewClient {
    @Override
    public void onPageFinished(WebView view, String url) {

    }

    @Override
    public boolean shouldOverrideUrlLoading(WebView webView, String url) {
        return true;
    }
} 
```

希望这对将来的人有所帮助。

示例以及我在哪里找到答案： [https ://gist.github.com/Cheesebaron/ad84740c9bffa7e255c8](https://gist.github.com/Cheesebaron/ad84740c9bffa7e255c8)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-26T05:04:08.520

万一位置被关闭并且如果网站请求位置然后`webview`调用`onGeolocationPermissionsShowPrompt`但只有一次。为了完成这项工作，意味着`onGeolocationPermissionsShowPrompt`每次网站请求位置时我都会调用：

```
inner class MyChromeClient: WebChromeClient()
    {

        override fun onGeolocationPermissionsShowPrompt(origin: String?, callback: GeolocationPermissions.Callback?) {
            // Geolocation permissions coming from this app's Manifest will only be valid for devices with API_VERSION < 23.
            // On API 23 and above, we must check for permission, and possibly ask for it.
            //callback?.invoke(origin,true,false)

            val permission=Manifest.permission.ACCESS_FINE_LOCATION

            if (Build.VERSION.SDK_INT<Build.VERSION_CODES.M || ContextCompat.checkSelfPermission(applicationContext,permission)==PackageManager.PERMISSION_GRANTED)
            {
                // we're on SDK < 23 OR user has already granted permission
                callback?.invoke(origin,true,false)
            }
            else{

                if (!ActivityCompat.shouldShowRequestPermissionRationale(this@WebViewActivity,permission))
                {
                    // user clicked on don't asked again
                    alert("Allow location permission to access this feature"){
                        yesButton {
                            val intent=Intent()
                            intent.action = Settings.ACTION_APPLICATION_DETAILS_SETTINGS
                            intent.data= Uri.fromParts("package",packageName,null)
                            startActivity(intent)
                            callback?.invoke(origin,false,false)
                        }
                        noButton {
                            callback?.invoke(origin,false,false)
                        }
                    }.show()
                }
                else{
                    // permission not granted yet
                    this@WebViewActivity.callback=callback
                    this@WebViewActivity.origin=origin
                    ActivityCompat.requestPermissions(this@WebViewActivity, arrayOf(permission),100)
                }
            }
        }
    } 
```

添加 onRequestPermissionsResult 代码：

```
override fun onRequestPermissionsResult(requestCode: Int, permissions: Array<out String>, grantResults: IntArray) {
        super.onRequestPermissionsResult(requestCode, permissions, grantResults)
        if (grantResults.isNotEmpty() && requestCode==100)
        {
            if (grantResults[0]==PackageManager.PERMISSION_GRANTED)
            {
                if (callback!=null)
                    callback?.invoke(origin,true,false)
                return
            }
            else{
                callback?.invoke(origin,false,false)
            }
        }
        callback?.invoke(origin,false,false)
    } 
```

关键是，如果你想`onGeolocationPermissionsShowPrompt`再次调用，你需要调用`callback?.invoke(origin,false,false)`，在里面的参数中有这些确切的值`onGeolocationPermissionsShowPrompt`

# html - 同时左右定位div

> ID：15840883
> 
> 赞同：0
> 
> 时间：2013-04-05T18:22:07.100
> 
> 标签：html, css, positioning

我正在尝试使用绝对定位使 div 具有宽度，它在 google chrome 中工作正常，但在 fierfox 中却没有。为什么会有冲突？我在浏览器和 fierfox 上都尝试了完全相同的代码，但没有重新调整它。

```
 <!DOCTYPE HTML>
<html >
    <head>
        <meta charset="utf-8"/>
        <title>Kelma</title>
        <link rel="stylesheet" href="style.css" />
    </head>
    <body>

            <input type="text" id="center" />
    </body>
</html> 
```

这是css文件

```
#center{
    position: absolute;
    left:50px;
    right: 50px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:28:14.890

看看这个：

```
<!DOCTYPE HTML>
<html >
    <head>
        <meta charset="utf-8"/>
        <title>Kelma</title>
        <link rel="stylesheet" href="style.css" />
        <style>
            #wrapper
            {
               position: absolute;
               left:50px;
               right: 50px;
            }
            #center
            {
               width:100%;
            }
        </style>
    </head>
    <body>
        <div id="wrapper">
               <input type="text" id="center" value="test" />
        </div>
    </body>
</html> 
```

我用 div 包装输入，并将样式应用于 div，并将 100% 宽度应用于输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T18:27:20.773

试试这个：

```
#center{
  position: absolute;
  left:0px;
  width: 100%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T18:28:13.460

我已经让它与内联 css 一起工作

这是我个人网站上的一个例子

```
<div style="position:absolute; top:60px; bottom:5%; left:5%; right:5%; width:90%; text-align:center;"> SOME TEXT </div> 
```

我个人喜欢使用百分比，因为它在某些网站上看起来更好。让我知道这是否适合您！现场观看：[http](http://cbogausch.com/portal) ://cbogausch.com/portal它适用于 firefox 和 chrome

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T18:38:58.997

这不是你的意思吗？

```
body{padding: 0 50px;}
input{width:100%; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T19:28:17.163

在你的 CSS 上使用它：

```
#center {
   margin: 0 auto;
   width: 90%;
} 
```

汞柱，维尼修斯 =)

# ruby-on-rails - 如何在 ruby on rails 中实现 AS2

> ID：15840884
> 
> 赞同：0
> 
> 时间：2013-04-05T18:22:12.487
> 
> 标签：ruby-on-rails, edi

我有一个潜在的客户将在 EDI 中向我们发送数据，我们需要设置一个 AS2 端点来接收/请求数据。

我将如何在 ruby​​ on rails 中做到这一点？

请参阅此处的规范：[http ://www.ietf.org/rfc/rfc4130.txt](http://www.ietf.org/rfc/rfc4130.txt)

我需要将其编程为文档第 8 页上的排列 12：发件人发送加密和签名的数据并请求签名的收据。接收方发回签名的收据。

有没有人为此写过宝石？

我在 php 中找到了这个解决方案：[http ://search.cpan.org/~swong/Net-AS2-0.01/lib/Net/AS2.pm](http://search.cpan.org/~swong/Net-AS2-0.01/lib/Net/AS2.pm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T00:16:41.913

接收 AS2 是服务器的事情。AFAICS 的配方是客户端吗？有开源的 AS2 实现，也有商业的。开源：例如 OpenAS、mendelson AS2

# ruby-on-rails - rails、websocket-rails、websocket、redis + websocket-rails 的问题

> ID：15840885
> 
> 赞同：3
> 
> 时间：2013-04-05T18:22:15.400
> 
> 标签：ruby-on-rails, websocket, redis

我在我的一个项目中使用`redis`, `sidekiq`gem，后来添加了`websocket-rails`gem。之后我遇到了这样的问题：

```
/synchrony.rb:114:in `resume': double resume (FiberError)
from .rvm/gems/ruby-1.9.3-p194/bundler/gems/redis-rb-e9e17d65b9c5/lib/redis/connection/synchrony.rb:114:in `block in setup_connect_callbacks' 
```

需要帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-29T04:31:18.587

使用 ruby​​ 驱动而不是 redis 的同步驱动。我已经分叉了这个项目，你可以在这里找到它[https://github.com/Bivek/websocket-rails](https://github.com/Bivek/websocket-rails)并查看最新的提交。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-17T09:14:58.587

你可以参考这个文件。 [http://ruby-doc.org/core-2.0.0/Fiber.html#method-i-alive-3F](http://ruby-doc.org/core-2.0.0/Fiber.html#method-i-alive-3F) 在我的情况下发生了这样的错误。/usr/local/rvm/gems/ruby-2.0.0-p247/gems/redis-3.0.4/lib/redis/connection/synchrony.rb:78:in `resume'：双重恢复（FiberError）

所以我补充

如果 !fiber.alive? 结尾

堵塞

谢谢你

# prolog - 不同 Prolog 实现的兼容层

> ID：15840887
> 
> 赞同：4
> 
> 时间：2013-04-05T18:22:32.573
> 
> 标签：prolog, compatibility, swi-prolog, yap

处理两种不同 Prolog 解释器之间兼容性的最佳方法是什么？我已经阅读了这个[问题及其答案](https://stackoverflow.com/questions/7151675/prolog-compatibility-layers-available-programming-libraries)，但我正在寻找一种方法来处理不同定义的谓词（即在 SWI 中删除不是变量明智的，而在 YAP 下它是）和新引入的谓词（即 remove_duplicates 不是存在于 SWI 的库（列表）中）。

目前我正在编写一个包含大多数谓词重*定义*的文件，但当然这会让两个（或两个以上）编译器之一产生重定义警告。

为了简洁起见，您可以假设我感兴趣的 Prolog 实现是 SWI 和 Yap。尽管如此，一个尽可能通用的方法将受到高度赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:13:39.217

我认为 ISO Prolog 应该是通用的子集参考。

但是图书馆是一个*大*问题。事实上，我在尝试将 SWI-Prolog 片段移植到 YAP 时遇到了问题。

```
...
:- use_module(library(assoc)).
:- use_module(library(aggregate)).
... 
```

assoc 库在这些系统中的实现方式不同，我无法让 YAP 版本工作（如果我没记错的话， gen_assoc((R, C), GridC, Char) 有不同的*语义*）。此外，库（聚合）在 YAP 下也存在问题。

为了[有条件地在这两个系统中编译](http://www.swi-prolog.org/pldoc/doc_for?object=section%284,%274.3.1.1%27,swi%28%27/doc/Manual/consulting.html%27%29%29)，我尝试了

```
/*  File:    prolog_impl.pl
    Author:  Carlo,,,
    Created: Jan 26 2013
    Purpose: handle SWI/YAP portability issue
*/

:- module(prolog_impl, [swi/0, yap/0, prolog_impl/1]).

swi :- prolog_impl(swi).
yap :- prolog_impl(yap).

prolog_impl(K) :-
    F =.. [K,_,_,_,_],
    current_prolog_flag(version_data, F). 
```

但当然我对此并不满意。我希望你的问题能给问题带来一些答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T08:28:18.787

Logtalk 提供与支持 B-Prolog、CxProlog、ECLiPSe、GNU Prolog、Lean Prolog、Qu-Prolog、SICStus Prolog、SWI-Prolog、XSB 和 YAP 的可移植库的兼容层。可以在以下位置找到有关其库的文档：

[http://logtalk.org/library/index.html](http://logtalk.org/library/index.html)

[http://logtalk.org/library/library_diagram.pdf](http://logtalk.org/library/library_diagram.pdf)

在您的问题的一个答复中提到的“assoc”库的具体情况下，Logtalk 提供了一个协议（又名接口）“dictionaryp”和该协议的两个实现，“bintree”和“rbtree”。

# mysql - 如何检查带有 max、count 等 sql 函数的查询是否返回 NULL？

> ID：15840892
> 
> 赞同：1
> 
> 时间：2013-04-05T18:22:49.643
> 
> 标签：mysql, sql, null, max

如何检查带有 max() 等 sql 函数的查询是否返回 NULL ？这是我的代码：

```
$query = mysql_query("SELECT MAX(priority) FROM categories") or die('sel_pri:'.mysql_error());

    if(mysql_num_rows($query) > 0)
            $max_pri = mysql_result($query, 0) or die('priority:'.mysql_error());
    else
        $max_pri = 0; 
```

我的类别表是 epmty，因此`mysql_num_rows()`将返回 1，因为此查询将返回 1 行，其值为 NULL。上面的代码“死”了！我也试过：

```
if(empty($query))   
if(isset($query))
if(is_null($query)) 
```

但以上都没有工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:40:09.483

我有类似的问题，我用以下方法解决了它......

如果（mysql_num_rows（$query）>0）{

如果（！空（$查询））{

```
 $max_pri = mysql_result($query, 0);

  } else

  {

       $max_pri = 0;

   } 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:50:37.380

在您的情况下，您也可以在 SQL using 中提供默认值`coalesce`，它返回其参数的第一个非空值：

```
SELECT COALESCE(MAX(priority), 0) FROM categories 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-16T06:51:53.470

我更喜欢 IFNULL 函数，它听起来更相关。

```
SELECT IFNULL(MAX(priority),0) FROM categories 
```

# android - Facebook Android SDK 会话 openForPublish 未创建新会话

> ID：15840893
> 
> 赞同：5
> 
> 时间：2013-04-05T18:22:52.093
> 
> 标签：android, facebook, facebook-graph-api, facebook-android-sdk

我打电话时在 Facebook Android SDK 中

```
Session tempSession = new Builder(this).build();
Session.setActiveSession(tempSession);
tempSession.openForRead(new OpenRequest(this).setPermissions(FB_PERMISSIONS)); 
```

它有一个 FB 会话，一切都正常运行。但是当我替换`Read`为`Publish`. 即跟随

```
Session tempSession = new Builder(this).build();
Session.setActiveSession(tempSession);
tempSession.openForPublish(new OpenRequest(this).setPermissions(FB_PERMISSIONS)); 
```

它给出了一个错误，即会话为空，并且无法获得对空会话的发布权限。

你能告诉我为什么会这样吗？处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-14T16:49:10.710

我花了一些时间来解决这个问题，这样用户就可以点击一个按钮在 Facebook 上的提要中分享我的一个产品。在他们真正想要分享之前，我不希望他们被提示登录，所以我真的只是想要发布许可。下面将初始登录/读取权限请求与发布权限请求堆叠在一起。这将双重提示用户，首先是阅读，然后是发布，但无论解决方案如何，现在都需要这样做：

```
Session session = Session.getActiveSession();

if (session == null) {
    session = new Session.Builder(this).setApplicationId("<APP ID HERE>").build();

    Session.setActiveSession(session);
    session.addCallback(new StatusCallback() {
        public void call(Session session, SessionState state, Exception exception) {
            if (state == SessionState.OPENED) {
                Session.OpenRequest openRequest = new Session.OpenRequest(FacebookActivity.this);
                openRequest.setLoginBehavior(SessionLoginBehavior.SSO_WITH_FALLBACK);
                session.requestNewPublishPermissions(
                        new Session.NewPermissionsRequest(FacebookActivity.this, PERMISSIONS));
            }
            else if (state == SessionState.OPENED_TOKEN_UPDATED) {
                publishSomething();
            }
            else if (state == SessionState.CLOSED_LOGIN_FAILED) {
                session.closeAndClearTokenInformation();
                // Possibly finish the activity
            }
            else if (state == SessionState.CLOSED) {
                session.close();
                // Possibly finish the activity
            }
        }});
}

if (!session.isOpened()) {
    Session.OpenRequest openRequest = new Session.OpenRequest(this);
    openRequest.setLoginBehavior(SessionLoginBehavior.SSO_WITH_FALLBACK);
    session.openForRead(openRequest);
}
else
    publishSomething(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T20:15:12.207

简短的回答是，不要调用 openForPublish。如果您需要发布权限，请稍后调用 openForRead，然后再 requestNewPublishPermissions。

长答案是，除非您已经拥有基本或默认权限（如果您使用空权限集调用 openForRead 会得到什么），否则您不能请求发布权限（对于之前从未通过您的应用连接过 Facebook 的用户） . 所以 openForPublish 实际上处理了大多数应用程序可能没有的非常特定的利基用例。

# c - 线程中的多个键

> ID：15840897
> 
> 赞同：0
> 
> 时间：2013-04-05T18:22:57.460
> 
> 标签：c, pthreads, key, posix, ftok

对于我的程序，当客户端加入由服务器创建的 MQ 时，服务器会启动一个线程，并在该线程中创建一个私有 MQ，只有一个特定的客户端拥有该 MQ 的密钥。

当我创建一个密钥时，因为它是众多密钥之一，它是否必须有一个特殊的名称？或者我可以在打电话时使用同一个`ftok()`吗？

示例代码：

```
void *thread_function(void *arg){
        key_t keyT;
    int temp;
    temp = i;
    struct my_msgbuf bufT;
    keyT=ftok("server.c", 'B'); //create key for client[temp]
    if ((client[temp].mqID=msgget(keyT, 0666 | IPC_CREAT))==-1){ //private mq for client[temp]
        perror("msgget");
    }
} 
```

或者我必须`key_t`为每个线程制作一个数组，一个不同的键？

并且`keyT=ftok("server.c", 'B');`在您使用它时会创建相同的密钥吗？

# javascript - 通过 AngularJS 创建带有虚拟内容的更新列表视图

> ID：15840898
> 
> 赞同：0
> 
> 时间：2013-04-05T18:22:58.450
> 
> 标签：javascript, html, angularjs

我正在使用**AngularJS**构建一个允许用户构建报告然后提交它们的应用程序。标题和创建时间会自动生成（基于用户输入），并且报告摘要会添加到用户所做的所有报告的列表中。

该表最终将由服务器端 JSON 字符串填充（并且新条目将从本地会话添加到服务器），但对于我的本地测试，我需要一种在本地客户端期间添加到表的方法会议。

用户将转到一个单独的页面，他们可以在其中创建报告：单击“运行报告”后，应将报告摘要添加到表格中，其中报告的名称和创建日期会自动填充用户的输入。报告创建界面位于不同的页面上，因此与报告摘要列表所在的“主”页面**不同的控制器范围。**

现在，这是我的问题：**从不同的控制器**向表（又名本地模型）**提交报告摘要的最佳、最具 Angular 风格的方法是**什么？ **`$scope`**

 **我的代码看起来像这样（记住它可能很糟糕，我打算重构它！）：

控制器.js：

```
var MainCtrl = function($scope) {
  $scope.reports = [
    {name:'Trx Summary', date:'Mar 20, 2013 @ 12:30PM'},
    {name:'Trx Summary', date:'Mar 20, 2013 @ 12:30PM'}
  ];
}; 
```

_dat_partial_view.html：

```
<div ng-controller="MainCtrl" class="row-fluid">
  <table class="table table-striped">
    ...
    <tr ng-repeat="report in reports">
      <td>
        <p>{{report.name}} <span class="label label">Generating</span></p>
      </td>
      <td>
        <dl class="no-margin">
          <dt>Date Range</dt>
          <dd>Mar 3, 2013 - Mar 13, 2013</dd>
          <dt>Generated</dt>
          <dd>{{report.date}}</dd>
        </dl>
      </td>
      ...
    </tr> 
```

这成功地创建了一些用两个条目填充表的虚拟内容。

我需要做什么来创建这样一个动态列表加法器？我很确定我需要将`push`元素放入数组中，但我不知道如何在当前控制器之外这样做`$scope`。我尝试将数组的代码放在控制器之外`$scope`：

控制器.js：

```
reports = [
        {name:'Trx Summary', date:'Mar 20, 2013 @ 12:30PM'},
        {name:'Trx Summary', date:'Mar 20, 2013 @ 12:30PM'}
      ];

var MainCtrl = function($scope) {}; 
```

这只是从表中删除了两个虚拟条目，因此不起作用。

有任何想法吗？

**问题2**

另一个问题：**创建填充表格的动态内容列表的最佳方法是什么**？该应用程序将创建报告，并将**其存储在本地**。然后它将尝试**将新报告推送到服务器**，服务器将生成报告并理论上将结果发送回连接到 JSON 字符串。换句话说，报告在成功发送到服务器并由服务器生成之前一直保持在本地。在生成报告之前，用户无法阅读该报告，但如果服务器由于某种原因无法接受生成新报告的请求，该报告也将保留在本地保存。

这就是说，我已经看到建议使用**service 或 factory的**[示例](https://stackoverflow.com/questions/13180293/angularjs-multiple-uses-of-controller-and-rootscope)。这是最明智的做法吗？这比我现在设置的简单数组更好吗？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:35:30.193

您可以使用广播将对象传递到不同的范围。

**控制器一**

```
$rootScope.$broadcast('ReportSubmit', $scope.reportObject); 
```

数据可以是您控制器中的对象。

然后它在另一个控制器中侦听广播，您可以在其中定义数据并对其进行操作并可以访问它。

**控制器二**

```
$scope.$on('ReportSubmit', function(event, data) {
   $scope.reportObject = data;
}; 
```

对于第二个问题，当您创建新报告时，如果您在前端有模型绑定，您可以这样做。

您将绑定到此功能，在从表单字段中传入您的对象的创建操作上单击 ng-click。

```
$scope.createNewReport = function(object) {
// Assign object to var
var newReport = object;

//Add new object to data from in memory object.
$scope.reportList.push(newReport);
}; 
```

`reportList`您可以通过使用ajax传递对象将其传递回控制器或服务器

找到了一个可能会帮助你的小提琴。[http://jsfiddle.net/yh3Ds/24/](http://jsfiddle.net/yh3Ds/24/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T01:52:12.973

您应该在这里使用服务，我认为您引用的示例是正确的方法****

# css - div 悬停在带有 SASS 的图标上

> ID：15840901
> 
> 赞同：0
> 
> 时间：2013-04-05T18:23:09.773
> 
> 标签：css, hover, sass

当您将鼠标悬停在图标文本上时，我在如何显示 div 方面犯了一些错误。

问题是当您将鼠标悬停在我的标题的整行上时，我的 div 就会出现。我在 sass 或页面结构中的问题在哪里，或者两者兼而有之？我希望我的 div 在鼠标悬停时出现在图标信息中

您还可以在此处查看示例：http: [//codepen.io/anon/pen/gduJF](http://codepen.io/anon/pen/gduJF)

这是我的HTML：

```
<div id="spinCastJs">
    <div id="spintitle">
      <h1>Example<span id="spininfo">i</span></h1>
      <div id="instructions">
        <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text</p>
      </div>
    </div>
</div> 
```

和风格

```
#spinCastJs
  #spintitle
    background: #ddd
    padding: 6px

    h1
    text-align: center
    color: #04677e
    font-weight: bold
    font-size: 1.2em

    #instructions
      display: none
      position: absolute
      background: #ffffff
      right: 0px
      height: 100px

    #spininfo
      float: right
      font-style: normal
      font-size: 1.1em
      background: #ddd
      height: 50px
      width: 18px
      color: #ffffff
      border-radius: 3px
      background: #bf24bf
    &:hover
      #instructions
        display: block
        border: 1px solid #ddd 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:47:32.297

您需要在 #spaninfo 范围内显示元素

例如：我在下面的代码中放入了一个带有 id test 的 div，其中 span 仅用于示例。

### HTML

```
 <h1>Example<span id="spininfo">i<div id="test">test</div></span></h1> 
```

### 萨斯

```
 #spintitle
   #spininfo
     float: right
     font-style: normal
     font-size: 1.1em
     background: #ddd
     height: 50px
     width: 18px
     color: #ffffff
     border-radius: 3px
     background: #bf24bf
     display: block
     &:hover
       #test
         display: block
         border: 1px solid #ddd
         color: red 
```

# php - php 安全中的 Require_once 和 fopen

> ID：15840906
> 
> 赞同：0
> 
> 时间：2013-04-05T18:23:27.937
> 
> 标签：php, fopen, require-once

我有 1 个用 PHP 实现的文件。我得到的错误是

**警告：require_once(): http:// wrapper is disabled in server configuration by allow_url_include=0 in /Applications/MAMP/htdocs/opencart/catalog/view/theme/default/template/payment/bank_transfer.tpl 在第 13 行警告：**

问题：

1.  我知道我需要通过在 php.ini 中允许 allow_url_include=0 来解决这个问题。我正在使用 MAMP，我已经搜索了 MAMP 和 MAMP Pro 中的所有文件夹，但我没有找到任何行，我可以将该值设置为 0。**我要添加这一行吗？**

2.  我已经阅读了[LINK](https://stackoverflow.com/questions/8034064/error-using-include-once-with-a-php-variable)，我担心使用 require_once、fopen 和绝对 URL 会出现一些安全问题。使用绝对 URL 和 require_once 是否存在任何安全问题？

3.  如何指定文档的 URL？目前它是**www.example.com/opencart/admin/kzm/kzm.utils.php**，我尝试使用相对 URL **/opencart/admin/kzm/kzm.utils.php**，但我没有找到该文件。我做对了吗？

bank_transfer.tpl：

```
<h2><?php echo $text_instruction; ?></h2>
    <div class="content">
          <p><?php echo $text_description; ?></p>
          <p><?php echo $bank; ?></p>
          <p><?php echo $text_payment; ?></p>
          <p><?php echo $orderIdKZM; ?></p>
          <p>
          <?php 
            echo $amountKZM; 
            $titleKZM = $titleKZM.$orderIdKZM; 
            echo '<br>';

            require_once('http://example.com/opencart/admin/kzm/kzm.utils.php');
            echo $titleKZM;
            echo '<br>';

            $merchantIdKZM = '10';
            $currencyKZM = 'KZT';
            $successUrlKZM = 'http://localhost:8888/opencart/admin/kzm/kzm_pay.php';
            $erroUrlKZM = 'http://www.google.com';

            $dateKZM = " ";
            $signstrKZM = " ";
            $verKZM = " ";
            echo $merchantIdKZM.'-'.$currencyKZM.'-'.$successUrlKZM.'-'.$erroUrlKZM.'-'.$dateKZM;

          ?></p>
    </div>
    <div class="buttons">
      <div class="right">
            <form action="/opencart/testkzm.php" method="get">
                <input type="hidden" name="merchantIdKZM" value="<?php echo $merchantIdKZM; ?>">
                <input type="hidden" name="orderIdKZM" value="<?php echo $orderIdKZM; ?>">
                <input type="hidden" name="amountKZM" value="<?php echo $amountKZM; ?>">
                <input type="hidden" name="currencyKZM" value="<?php echo $currencyKZM; ?>">
                <input type="hidden" name="successUrlKZM" value="<?php echo $successUrlKZM; ?>">
                <input type="hidden" name="errorUrlKZM" value="<?php echo $errorUrlKZM; ?>">
                <input type="hidden" name="signstrKZM" value="<?php echo $signstrKZM; ?>">
                <input type="hidden" name="verKZM"  value="<?php echo $verKZM; ?>">

                <input type="submit" value="<?php echo $button_confirm; ?>" id="button-confirm" class="button" />
            </form>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T18:59:21.527

**更改 allow_url_include=1 是不安全的。**它默认设置为禁用。

当我在本地机器上包含一些东西时，我总是使用这样的东西，这样它就可以跨平台移植。如果您使用共享托管计划或您不控制服务器，则在 Web 根目录下硬编码包含可能会导致强制重写。这对于开发/生产环境也更便携。

```
<?php

    require_once($_SERVER['DOCUMENT_ROOT'].'/opencart/admin/kzm/kzm.utils.php');

?> 
```

如果您需要进入另一个目录，您可以随时执行以下操作：

```
<?php

    require_once($_SERVER['DOCUMENT_ROOT'].'/../website2_folder/opencart/admin/kzm/kzm.utils.php');

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T18:43:44.073

您应该提供相对于文件系统的 require_once() 路径，而不是站点 URL。

例如，您有`http://example.com`该站点的站点和脚本位于`/Applications/MAMP/htdocs/`目录中。因此，您应该使用`require_once("/Applications/MAMP/htdocs/opencart/admin/kzm/kzm.utils.php");`而不是`require_once('http://example.com/opencart/admin/kzm/kzm.utils.php');`.

在这种情况下不需要修改配置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T18:45:11.347

1和2个问题我不知道

3）如果你想要的php代码是你的当前目录，试试这个：

```
require_once("kzm.utils.php"); 
```

如果没有，请使用完整路径示例：

require_once("/var/www/opencart/kzm.utils.php);

# java - 使用地图的 JPA 集合

> ID：15840915
> 
> 赞同：0
> 
> 时间：2013-04-05T18:23:47.037
> 
> 标签：java, spring, hibernate, jpa, spring-data

所以我有一个使用 JPA、Hibernate 和 Spring Data 的小型概念证明。在这个 POC 中，我创建了一个`Post`实体和一个`Comment`实体。该`Post`实体包含评论地图`Map<Integer,Comment>`。

由于我使用实体列作为地图的键，因此我在将多个`Comment`实体持久化时遇到了问题。基本上，如果我没有明确设置Hibernate 的 id，就会将它们识别为同一个实体，并且只保留其中一个。`Map``Comment``@Id``Comment`

我发现我可以`Map`通过指定垃圾键来持久化，一旦持久化，MySql 自动编号将替换它。这导致了一个问题，当前映射中的键不会接收`commentId`到数据库设置的新值。这导致我的单元测试失败。

所以基本上我有三个问题？

1.  我应该指定垃圾键来持久化地图中的实体吗？
2.  我的方法全错了吗？如果是这样，有什么更好的方法？
3.  如果垃圾键没问题，插入后如何刷新它们？

**Post.java**

```
@Entity
@Table(name = "POST")
public class Post {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "POST_ID")
    private Integer postId;

    @Column(name = "TITLE")
    private String title;

    @OneToMany(mappedBy = "post", cascade = CascadeType.ALL)
    @MapKeyColumn(name="COMMENT_ID")
    private Map<Integer, Comment> comments = new HashMap<Integer, Comment>();

        /** Accessors (Get/Set) **/
        /** HashCode & Equals that does not consider the postId field or the Map */
} 
```

**评论.java**

```
@Entity
@Table(name="COMMENT")
public class Comment {

    @Id
    @Column(name="COMMENT_ID")
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    private Integer commentId;

    @Column(name="BODY")
    private String body;

    @ManyToOne(cascade=CascadeType.ALL)
    @JoinColumn(name="POST_ID")
    private Post post;

        /** Accessors (Get/Set) **/
        /** HashCode & Equals that does not consider the commentId field or the Post */
} 
```

**单元测试**

```
@Test
public void insertTest2(){
    Comment comment = new Comment();
    Comment comment2 = new Comment();
    final String body1 = "This is a map test";
    final String body2 = "This is another map test";

    comment.setBody(body1);
    comment2.setBody(body2);

    Post post = new Post();
    post.setPostDate(new Date());
    post.setTitle("First Post");

    post.getComments().put(1,comment);   //Setting garbage IDs
    post.getComments().put(2, comment2); //Setting garbage IDs

    comment.setPost(post);
    comment2.setPost(post);

    repository.save(post);

    Post dbpost = repository.findOne(post.getPostId());

    Map<Integer, Comment> comments = dbpost.getComments();

    //Test fails using old id       
    assertTrue(comments.containsKey(comment.getCommentId()));
    //Same here 
    assertTrue(comments.containsKey(comment2.getCommentId()));  

} 
```

**另请注意，这是双向关系**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T18:29:40.667

> 我应该指定垃圾键来持久化地图中的实体吗？

不会。一旦真实 ID 受到影响，地图就会处于不一致状态。地图的键应该是不可变的。

> 我的方法全错了吗？如果是这样，有什么更好的方法？

坦率地说，我真的不明白使用地图按 ID 保存评论的意义。实体管理器已经能够通过 ID 获得评论。我会简单地使用一个集合或一个列表。

另一种方法是在将评论添加到地图之前保留评论并刷新实体管理器，以确保它们已经具有真实 ID。

# sql - WHERE NOT EXISTS in PostgreSQL 给出语法错误

> ID：15840922
> 
> 赞同：7
> 
> 时间：2013-04-05T18:23:56.070
> 
> 标签：sql, postgresql, postgresql-9.1

当试图使用该`WHERE NOT EXISTS`子句来防止在列中添加具有重复值的行时`age`，我得到了错误`syntax error at or near "WHERE"`。

为什么会抛出语法错误？我正在使用 Postgresql 9.1。

**SQL**

```
INSERT INTO live.users ("website", "age") 
values ('abc', '123')
WHERE NOT EXISTS (SELECT age FROM live.users WHERE age = 123); 
```

**错误**

```
ERROR:  syntax error at or near "WHERE"
LINE 6: WHERE NOT EXISTS (SELECT age FROM live.users W... 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-05T18:28:35.540

改为：

```
INSERT INTO live.users ("website", "age") 
SELECT 'abc', 123
WHERE NOT EXISTS (SELECT age FROM live.users WHERE age = 123); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T18:30:26.830

```
INSERT INTO live.users ("website", "age") 
select 'abc', '123'
WHERE NOT EXISTS (SELECT age FROM live.users WHERE age = 123); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-02T20:35:26.933

我`WHERE field NOT EXISTS`在 PLPGSQL 中使用时遇到了一些问题。相反，效果很好的是`WHERE field NOT IN`，使用后我没有收到任何功能错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-13T07:46:00.757

我看到您要求使用 v9.1，但从[PostgreSQL v9.5 开始到现在已经 4 年了 - INSERT](https://www.postgresql.org/docs/9.5/static/sql-insert.html "PostgreSQL v9.5 - 插入")为您提供了`ON CONFLICT … DO NOTHING`选项：

```
INSERT INTO live.users("website", "age") VALUES('abc', '123') ON CONFLICT ("age") DO NOTHING 
```

值得注意的是，这需要在目标表上设置**相应的约束——但在大多数情况下，我想你无论如何都会拥有它。**否则你会得到：

```
ERROR:  there is no unique or exclusion constraint matching the ON CONFLICT specification 
```

# makefile - 为什么`make`只执行依赖？

> ID：15840924
> 
> 赞同：0
> 
> 时间：2013-04-05T18:24:12.500
> 
> 标签：makefile, build-automation

我有以下内容`Makefile`：

```
compile:
    echo a
run: compile
    echo b
all: run 
```

`make all`有预期的效果：

```
$ make all
echo a
a
echo b
b 
```

但简单地调用`make`只执行`compile`目标：

```
$ make
echo a
a 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T18:36:27.337

默认情况下，make 运行第一个目标，在您的情况下是`compile`：[http ://www.gnu.org/software/make/manual/html_node/How-Make-Works.html#How-Make-Works](http://www.gnu.org/software/make/manual/html_node/How-Make-Works.html#How-Make-Works)

如果您想`all`成为默认目标，请先列出它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T20:40:25.990

当您刚刚执行`make`第一个目标时，将默认执行。它是作为第一个依赖项保留的约定，`all`即使它可以像您所做的那样在任何地方，除非您传递`all`到`make`. 甚至退房`.PHONY`。

# r - 映射研究的分类气泡图

> ID：15840926
> 
> 赞同：17
> 
> 时间：2013-04-05T18:24:14.240
> 
> 标签：r, plot

如何使用 GNU R 创建一个分类气泡图，类似于系统映射研究中使用的（见下文）？

![映射研究中使用的分类气泡图](https://i.stack.imgur.com/rdB7M.png)

编辑：好的，这是我到目前为止所尝试的。首先，我的数据集（Var1 到 x 轴，Var2 到 y 轴）：

```
> grid
                         Var1                      Var2 count
1              Does.Not.apply            Does.Not.apply    53
2               Not.specified            Does.Not.apply    15
3   Active.Learning..general.            Does.Not.apply     1
4      Problem.based.Learning            Does.Not.apply     2
5              Project.Method            Does.Not.apply     4
6         Case.based.Learning            Does.Not.apply    22
7               Peer.Learning            Does.Not.apply     6
10                      Other            Does.Not.apply     1
11             Does.Not.apply             Not.specified    15
12              Not.specified             Not.specified    15
21             Does.Not.apply Active.Learning..general.     1
23  Active.Learning..general. Active.Learning..general.     1
31             Does.Not.apply    Problem.based.Learning     2
34     Problem.based.Learning    Problem.based.Learning     2
41             Does.Not.apply            Project.Method     4
45             Project.Method            Project.Method     4
51             Does.Not.apply       Case.based.Learning    22
56        Case.based.Learning       Case.based.Learning    22
61             Does.Not.apply             Peer.Learning     6
67              Peer.Learning             Peer.Learning     6
91             Does.Not.apply                     Other     1
100                     Other                     Other     1 
```

然后，尝试绘制数据：

```
# Based on http://flowingdata.com/2010/11/23/how-to-make-bubble-charts/
grid <- subset(grid, count > 0)
radius <- sqrt( grid$count / pi )
symbols(grid$Var1, grid$Var2, radius, inches=0.30, xlab="Research type", ylab="Research area")
text(grid$Var1, grid$Var2, grid$count, cex=0.5) 
```

结果如下：![我有什么](https://i.stack.imgur.com/i4oXU.png)

问题：轴标签错误，虚线网格线丢失。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-05T19:30:00.610

这是 ggplot2 解决方案。首先，将半径作为新变量添加到您的数据框中。

```
grid$radius <- sqrt( grid$count / pi ) 
```

您应该使用绘图内的点和文本标签的大小来完美匹配。

```
library(ggplot2)
ggplot(grid,aes(Var1,Var2))+
  geom_point(aes(size=radius*7.5),shape=21,fill="white")+
  geom_text(aes(label=count),size=4)+
  scale_size_identity()+
  theme(panel.grid.major=element_line(linetype=2,color="black"),
        axis.text.x=element_text(angle=90,hjust=1,vjust=0)) 
```

![在此处输入图像描述](https://i.stack.imgur.com/yE8Uq.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T19:35:03.997

这里是使用`levelplot`from的版本`latticeExtra`。

```
library(latticeExtra)
levelplot(count~Var1*Var2,data=dat,
          panel=function(x,y,z,...)
          {
            panel.abline(h=x,v=y,lty=2)
            cex <- scale(z)*3
            panel.levelplot.points(x,y,z,...,cex=5)
            panel.text(x,y,label=z,cex=0.8)
          },scales=(x=list(abbreviate=TRUE))) ## to get short labels 
```

![在此处输入图像描述](https://i.stack.imgur.com/yyt6e.png)

要获得与计数成比例的气泡大小，您可以这样做

```
library(latticeExtra)
levelplot(count~Var1*Var2,data=dat,
          panel=function(x,y,z,...)
          {
            panel.abline(h=x,v=y,lty=2)
            cex <- scale(z)*3
            panel.levelplot.points(x,y,z,...,cex=5)
            panel.text(x,y,label=z,cex=0.8)

          }) 
```

我不显示它，因为在修复大小的情况下渲染不清晰。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T19:29:28.983

这将使您开始通过将刻度线添加到您的 xaxis。

要添加行，只需在每个级别添加一行

```
ggs <- subset(gg, count > 0)
radius <- sqrt( ggs$count / pi )

# ggs$Var1 <- as.character(ggs$Var1)

# set up your tick marks 
#  (this can all be put into a single line in `axis`, but it's placed separate here to be more readable)
#--------------
# at which values to place the x tick marks
x_at <- seq_along(levels(gg$Var1))
# the string to place at each tick mark
x_labels <-   levels(gg$Var1)

# use xaxt="n" to supress the standard axis ticks 
symbols(ggs$Var1, ggs$Var2, radius, inches=0.30, xlab="Research type", ylab="Research area", xaxt="n")
axis(side=1, at=x_at, labels=x_labels)

text(ggs$Var1, ggs$Var2, ggs$count, cex=0.5) 
```

* * *

另外，请注意，`grid`我没有调用对象，而是调用了它`gg`，然后调用`ggs`了子集。 `grid`是 中的一个函数`R`。虽然“允许”用对象覆盖函数，但不建议这样做，并且可能会导致烦人的错误。

# xna-4.0 - 您如何发布以使其在其他计算机上运行？

> ID：15840939
> 
> 赞同：0
> 
> 时间：2013-04-05T18:25:06.697
> 
> 标签：xna-4.0

如何发布我的游戏以便在其他计算机上使用它？当我尝试发布它时，它可以在我的计算机（应用程序）上运行，但不能在另一台计算机上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:00:47.513

在 VS 中单击*创建。*
选择*Publish Yourprojectname*
按照帮助程序中的步骤
创建完成后，将打开一个文件夹。不要启动安装程序，而是启动*.application*文件，该文件会检查 XNA-Framework 是否已安装，如果未安装，则自动启动 setup.exe。

[我将这些步骤从德语翻译成英语，所以如果一个按钮的名称有点不同，你现在知道为什么]

# c# - 带有下拉列表的 ASP.NET 仅插入详细信息视图

> ID：15840944
> 
> 赞同：1
> 
> 时间：2013-04-05T18:25:17.643
> 
> 标签：c#, asp.net, .net, entity-framework, webforms

我正在使用 ASP.NET 网络表单和实体框架。我正在尝试使用详细信息视图创建一个简单的插入表单。我不想在此详细信息视图中编辑、删除或选择条目，只想插入新条目。

在插入中，我想插入新的人。一个人的结构是：姓名、经理、位置

我有两个实体数据源，一个代表经理，一个代表位置 我在 InsertItemTemplate 中有两个 DropDownList，可以选择经理和位置。

我的问题是，当我放置 DetailsView (DefaultMode = insert) 并为人员实体添加数据源时，DetailsView 会显示数据库中的条目以及下拉列表和名称字段。我可能遗漏了一些简单的东西，但我似乎无法获得仅用于插入的 DetailsView，它的 DropDownLists 由其他实体数据源填充。

```
 <asp:DetailsView ID="DetailsView1" runat="server" Height="50px" Width="125px" 
        DefaultMode="Insert" AutoGenerateInsertButton="True">
        <Fields>
            <asp:BoundField DataField = "Name" />
            <asp:TemplateField>
                <InsertItemTemplate>
                    <asp:DropDownList DataSourceID = "ManagerEntitySource" runat="server" />
                </InsertItemTemplate>
                <InsertItemTemplate>
                    <asp:DropDownList DataSourceID = "LocationEntitySource" runat="server" />
                </InsertItemTemplate>
            </asp:TemplateField>
        </Fields>
    </asp:DetailsView>
    <asp:EntityDataSource ID="AddEmployeeDataSource" runat="server" 
        ConnectionString="name=SafetyEntities" DefaultContainerName="SafetyEntities" 
        EnableFlattening="False" EnableInsert="True" EntitySetName="Employees">
    </asp:EntityDataSource> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T01:54:17.377

不确定这是否有帮助，但如果您只想要插入模式，请尝试删除 AutoGenerateInsertButton 属性，并在 Fields 属性中添加 ShowInsertButton = True 的 CommandField。

```
<asp:DetailsView ID="DetailsView1" runat="server" Height="50px" Width="125px" 
    DefaultMode="Insert">
    <Fields>
        <asp:BoundField DataField = "Name" />
        <asp:TemplateField>
            <InsertItemTemplate>
                <asp:DropDownList DataSourceID = "ManagerEntitySource" runat="server" />
            </InsertItemTemplate>
            <InsertItemTemplate>
                <asp:DropDownList DataSourceID = "LocationEntitySource" runat="server" />
            </InsertItemTemplate>
        </asp:TemplateField>
        <asp:CommandField ShowInsertButton="True" />
    </Fields>
</asp:DetailsView> 
```

# html - 具有相同班级问题的多个ID

> ID：15840945
> 
> 赞同：0
> 
> 时间：2013-04-05T18:25:20.013
> 
> 标签：html, css, identifier

我正在尝试将悬停动作应用于具有不同 id 的多个元素，但边距和背景位置不会改变，但是当我为每个 id 使用相同的代码时它工作正常，任何人都可以帮助我吗？提前致谢！！

```
<li id='gostou' class='menuacao' title="Gostou do Filme?">
     <a class='link' href="" target="_blank"></a>
</li>

<li id='assistir' class='menuacao' title="Gostou do Filme?">
     <a class='link' href="" target="_blank"></a>
</li> 
```

CSS看起来像这样

```
#gostou {
    background: transparent url('img/trailer.png');
    margin: 5px 2px;
}

#assistir {
    background: transparent url('img/tags.png');
    margin: 5px 2px;
}

.menuacao {
    background-position: left;
    height: 40px;
    width: 40px;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    border-radius: 4px;
    -webkit-transition: all 0.2s ease-in-out;
    list-style: none;
    cursor: pointer; 
}

.menuacao:hover {
    margin: 5px -5px;
    background-position: -80px;
    -webkit-transition: all 0.3s ease-in-out;
    -webkit-box-shadow: 0 8px 6px -6px black;
    -moz-box-shadow: 0 8px 6px -6px black;
    box-shadow: 0 8px 6px -6px black;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:34:45.097

`:hover`您应该使用逗号分隔多个选择器并为每个选择器重复，如下所示：

```
#gostou:hover, #assistir:hover {
    margin: 5px -5px;
    background-position: -80px;
} 
```

看到这个小提琴：http: [//jsfiddle.net/vovkss/reNcu/](http://jsfiddle.net/vovkss/reNcu/)

# javascript - Javascript - 简单的 Jquery 设置 CSS 问题

> ID：15840948
> 
> 赞同：0
> 
> 时间：2013-04-05T18:25:32.543
> 
> 标签：javascript, jquery, css

为什么不为 .btn-post 元素设置 css。我也试过把它放在一个函数中。

```
var variable = "hsla(359, 61%, 30%, 1);"

$('.btn-post').css('background', variable ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:30:09.483

可能你需要一个`doc ready`处理程序：

```
$(function(){
   var variable = "hsla(359, 61%, 30%, 1)";
   $('.btn-post').css('background', variable );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T18:34:36.340

试试这个：

```
 var variable = "hsla(359, 61%, 30%, 1)";
   $('.btn-post').css('background-color', variable ); 
```

[在这里演示](http://jsfiddle.net/2dJAN/)

# java - 在 Spring 中指定代理创建的顺序

> ID：15840954
> 
> 赞同：4
> 
> 时间：2013-04-05T18:25:54.383
> 
> 标签：java, spring, aop, ehcache

我有一个 Spring 应用程序，其中有以下骨架类

```
class ServiceCaller
{
    public Result callService()
    {
        //call a remote service
    }
} 
```

由于调用远程服务是一项昂贵的操作，我在我的应用程序中添加了缓存。我使用了 EhCache Spring 注释`@Cacheable`并将其应用于`callService()`方法。一切正常，我的`Result`对象被正确缓存。

后来我想在我的所有`ServiceCaller`s 中添加一个记录器，这样我的记录器就会记录对远程服务的每个实际调用。我不想手动添加`logger.info()`到每个这样`callService`的方法，所以我决定使用 Spring AOP 来实现它。

在返回到我想要记录的所有方法后，我定义了一个切入点。它正在工作；`callService`但是我注意到，即使我有缓存命中并且我的实际方法没有被调用，我的记录器切入点也被调用了。我观察到，发生这种情况是因为我的`ServiceCaller`bean 代理顺序如下`AOPPointCutProxy(EhCacheCachingProxy(ServiceCallerBean))`：我希望只有在调用我的实际方法时才调用我的记录器切入点，`callService`而不是在它从 EhCache 代理返回缓存值时调用。这意味着我实际上希望我的代理创建层次结构采用`EhCacheCachingProxy(AOPPointCutProxy(ServiceCallerBean))`. 请注意，我的 bean 定义、切入点定义、缓存配置可能都在不同的随机命名的 xml 文件中。

那么如何强制 Spring 按我想要的顺序创建代理呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T19:29:30.643

这就是[Ordered](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/core/Ordered.html)接口的用途。你需要在你的 bean 上实现它。

您可以创建一个代理，以获取应该围绕您调用的所有注入的代理。只有那个复合代理围绕着实际的 bean。在调用时，它会按照指定的顺序调用注入的代理。

# c++ - 如何在 C++11 中操作日期/日期时间？

> ID：15840958
> 
> 赞同：5
> 
> 时间：2013-04-05T18:26:08.437
> 
> 标签：c++, c++11

这很尴尬，但我很难对日期时间进行简单的操作。

这是我基本上尝试使用 c++11 实现的 c# 版本；

```
DateTime date1=new DateTime(4,5,2012);
DateTime date2=new DateTIme(7,8,2013);
int day1=date1.Days;
TimeSpan ts=d2-d1;
int diffDays=ts.Days; 
```

我尝试了什么？

```
 std::tm tm;
    tm.tm_year=113;
    tm.tm_mon=0;
    tm.tm_wday=0;

    std::time_t tt=mktime(&tm);
    std::chrono::system_clock::time_point then = std::chrono::system_clock::from_time_t(tt);
    std::chrono::system_clock::time_point now = std::chrono::system_clock::now();
    auto e1 = std::chrono::duration_cast<std::chrono::hours>(now - then).count(); 
```

e1 (379218) 的值没有任何意义。

我看了一下 chrono，它作为 datetime 的 c++11 标准库提供，但我找不到如何创建具有 int year=2012、int month=2、int day=14 的日期的示例。

PS：chrono 是否足以在 c++11 中处理日期/时间/时区？需要time.h吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-03-27T01:55:07.430

旧问题的新答案。

除了弄乱古老的`std::tm`，C++11 没有处理日期或日期时间的好方法，除了[boost Date Time](http://www.boost.org/doc/libs/1_57_0/doc/html/date_time.html)。还有一个我最近一直在研究的库，它高度倾向于性能、编译时类型安全和`chrono`兼容性。如前所述，它仅适用于 C++14，但如果您退出某些`constexpr`s，它将适用于 C++11。它是仅标头，仅包含一个标头，并[在此处](http://howardhinnant.github.io/date/date.html)记录。 ~~它的 I/O 能力很轻。~~（现在具有广泛的 I/O 能力）

但这是您的示例的样子：

哦，现在仔细看，不知道C#，不知道是`DateTime(4,5,2012)`指2012年4月5日，还是2012年5月4日。m/d/y和d/m/y格式都是常用的。这是我的图书馆解决的问题之一。它明确地接受这两种格式。对于这个演示，我将假设您正在以 m/d/y 格式编写。但我将使用这两种格式来重现您的示例：

```
#include "date.h"
#include <iostream>

int
main()
{
//     DateTime date1=new DateTime(4,5,2012);
//     DateTime date2=new DateTIme(7,8,2013);
//     int day1=date1.Days;
//     TimeSpan ts=d2-d1;
//     int diffDays=ts.Days;

    using namespace date;
    auto date1 = sys_days(apr/5/2012);     // m/d/y is ok
    auto date2 = sys_days(8_d/jul/2013);   // d/m/y is ok
                                           // y/m/d is also ok
    auto diffDays = date2 - date1;         // diffDays is a chrono::duration
    std::cout << diffDays.count() << '\n';
} 
```

这将输出：

```
459 
```

而在 C++14 中，这种计算实际上可以在编译时完成：

```
constexpr auto date1 = sys_days(apr/5/2012);
constexpr auto date2 = sys_days(8_d/jul/2013);
constexpr auto diffDays = date2 - date1;
static_assert(diffDays == days{459}, ""); 
```

这意味着“日期常量”既可读又高效，可以编译为“立即加载”。

有关完整描述、教程和实现，请参阅[文档。](http://howardhinnant.github.io/date/date.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-05T18:31:50.853

您需要从 初始化所有字段`tm`，从

```
std::tm tm = {0,0,0,0,0,0,0,0,0,0,0}; 
```

如果没有这个，其他字段（您之后没有明确设置的字段）将包含任意值。转换还将标准化值，这意味着如果该字段`tm_hour`包含 123456789，它将在您指定的日期增加这么多小时。这就是`e1`可以解释这些无意义值的方式。如果您显式初始化所有字段，它将允许您的示例返回有意义的值，尽管您可能需要设置更多字段，例如`isdst`使其适用于所有情况。

我不得不承认，`chrono`到目前为止我还没有使用过，因为我发现所需的语法过于冗长，并且我继续使用我自己的类来包装 C 风格的时间函数。当然，这不是关于 质量和力量的陈述`<chrono>`，也许我应该开始使用它 :)

# iphone - UIcollectionView 上的 LocalNotification 显示

> ID：15840966
> 
> 赞同：0
> 
> 时间：2013-04-05T18:26:33.673
> 
> 标签：iphone, ios, xcode, ipad, uicollectionview

我想设置一个 LocalNotification 然后能够在 UICollectionView 上显示。但是，我只知道如何让它显示在 UITable 上。我应该怎么做才能将它从 UITable 转换为 UIcollectionview？我希望 UIcollectionview 在后面有背景图像时显示带有时间和日期的 UIlabel。

这是我使用本地通知构建 UITable 的代码。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    // Return the number of notifications
    return [[[UIApplication sharedApplication] scheduledLocalNotifications] count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }
    cell.textLabel.textColor = [UIColor whiteColor];

    // Get list of local notifications
    NSArray *notificationArray = [[UIApplication sharedApplication] scheduledLocalNotifications];
    UILocalNotification *notif = [notificationArray objectAtIndex:indexPath.row];

    // Display notification info
    [cell.textLabel setText:notif.alertBody];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:50:47.253

表格视图和集合视图都使用单元格来显示内容。一旦您有了一个集合视图，您在此处显示的两个操作（确定行数和填充行单元格的文本）对于集合视图将是相同的。

按照教程使集合视图正常工作，然后查看 numberOfItemsInSection 和 cellForItemAtIndexPath: 并将它们与您上面的方法进行比较 - 您应该能够逐字使用 tableView:numberOfRowsInSection: 中的代码以及其他方法的代码只有微小的变化。

# c# - MonoDevelop 不显示 dll 方法

> ID：15840971
> 
> 赞同：0
> 
> 时间：2013-04-05T18:26:55.337
> 
> 标签：c#, dll, mono

我有两个用 Mono 制作的项目，我创建了这样的 ac# 类库

```
Namespace TestSpace
{
    public class TestClass
    {
        public string Id { get; set; }
        public string Name { get; set; }

        public TestClass()
        {
            System.Guid guid = System.Guid.NewGuid ();
            Id = guid.ToString ();
        }

        public void test()
        {

        }
    }
} 
```

然后我编译它并将dll导入我的另一个项目并尝试像这样使用它

```
using TestSpace;

NameSpace Project
{
    public class Main
    {
        TestClass tc = new TestClass();

        public Main()
        {
            tc.Name = "test";
        }
    }
} 
```

这工作正常，我没有收到任何错误，但奇怪的是当我输入“tc”时。它没有显示任何可用于自动完成的公共变量或方法。现在我对 dll 很陌生，我不知道这是否正常，我只是没有正确使用它，但是当我尝试在 Visual Studio 中做同样的事情时，它显示了所有公共方法和变量。

所以我的问题是这是否正常，我不应该使用这样的 dll（我只是试图以这种方式编写代码以便在以后的项目中重用它们），或者它是 Mono 中的错误还是只有我得到的错误。

我在 Ubuntu 12.10 上使用 Mono-develop v3.0.3.2

提前致谢

# file - 写入系统目录中的文件

> ID：15840972
> 
> 赞同：0
> 
> 时间：2013-04-05T18:26:57.063
> 
> 标签：file, delphi, permissions

我一直在尝试写入计算机上系统目录中的文件，但我无法让它工作；我该怎么做才能获得必要的权限？我需要更新 SS 而无需手动更改每台电脑的权限...

```
 var
    z: THandle;
...
    begin
    ....
    z:=OpenFile('myfile.scr',a,OF_WRITE);
    FileWrite(z,buf[16],3124);
    FileClose(z);
    end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T19:13:50.173

这很可能是[文件系统重定向器](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa384187.aspx)关闭。假设您确实在提升，那么您将拥有足够的权利。但是 32 位进程会看到 32 位系统文件夹 SysWOW64。那可能就是您的文件所在的位置。

如果您确实需要写入 64 位系统目录，请运行 64 位进程，或写入[sysnative 别名](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa384187.aspx)。

我不太确定您为什么使用旧版 OpenFile。使用 CreateFile 是正常的。甚至 TFileStream。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T18:42:58.423

您可以将清单添加到您的应用程序，如下所述：

[如何将清单 <requestedPrivileges> 信息添加到 delphi 项目中](https://stackoverflow.com/questions/6226976/how-to-add-manifest-requestedprivileges-info-into-delphi-project)

这样，在应用程序启动时，Windows UAC 将提示管理员权限。这篇文章是关于 Delphi XE 的，但我已经在 Delphi 2005 上成功测试了清单。

在开发过程中，请务必以管理员权限启动 Delphi IDE。否则，当您尝试从 IDE 运行/调试程序时，它可能会崩溃。

# knockout.js - 无法解析绑定。敲除错误

> ID：15840975
> 
> 赞同：2
> 
> 时间：2013-04-05T18:27:00.203
> 
> 标签：knockout.js

这是我学习淘汰赛的第二天。

尝试为按钮单击附加“deleteItem”。它给出了以下错误。

> 错误
> 
> 未捕获的错误：无法解析绑定。
> 消息：ReferenceError：deleteItem 未定义；绑定值：点击：deleteItem

JavaScript：

```
$(function () {
    var defaultData = [{
        id: 1,
        item: "Todo 1"
    }, {
        id: 2,
        item: "Todo 2"
    }, {
        id: 3,
        item: "Todo 3"
    }];
    var viewModel = {
        listItem: ko.observableArray(defaultData),
        addItem: function () {
            // Add new item
            var id = this.listItem().length + 1;
            this.listItem.push({
                id: id,
                item: "Todo " + id
            });
        },
        deleteItem: function () {
            alert(this);
        }
    }
    ko.applyBindings(viewModel, main);
}); 
```

HTML：

```
<div id="main">
    <button data-bind="click: addItem">+ Add Item</button>
    <div data-bind="foreach: listItem">
        <input type="text" data-bind="value: item" />
        <input type="button" data-bind="click: deleteItem" />
        <br />
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T18:45:10.357

该功能`deleteItem`在您的视图模型上。当您在 内部绑定`foreach`时，绑定操作的上下文是数组中的`item`个体`listItem`。您需要绑定到`$root.deleteItem`以引用根视图模型。

# javascript - HTML5 会话存储有多大？

> ID：15840976
> 
> 赞同：53
> 
> 时间：2013-04-05T18:27:02.847
> 
> 标签：javascript, html, local-storage, session-storage

虽然[localStorage的大小](https://stackoverflow.com/questions/2989284)已经详细解决了，[网上也有测试，但是](http://arty.name/localstorage.html)想知道常用浏览器[sessionStorage的最大大小是多少？](https://developer.mozilla.org/en-US/docs/DOM/Storage#sessionStorage)

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-04-05T18:29:45.783

根据[这个网站](http://www.nczonline.net/blog/2009/07/21/introduction-to-sessionstorage/)，Firefox 和 Safari 的存储限制是每个域 5MB，Internet Explorer 的限制是每个域 10MB。

但是，根据[这个测试您的网络浏览器本地存储功能的站点](http://dev-test.nemikor.com/web-storage/support-test/)，在我的机器上：

```
Browser        LocalStorage         SessionStorage
-------        ------------         --------------
Chrome              5M                   5M
Firefox             5M                Unlimited
IE11                5M                   5M 
```

另外，请注意页面底部的方便图表。

* * *

## 回答 #2

> 赞同：-6
> 
> 时间：2013-04-05T18:29:48.343

能够存储的数量因浏览器而异，IE 最多可以存储几 MB。还需要注意的是，存在允许无限量数据存储的漏洞。

# ios - 如何使用淡入淡出动画设置屏幕亮度？

> ID：15840979
> 
> 赞同：8
> 
> 时间：2013-04-05T18:27:24.447
> 
> 标签：ios, screen-brightness

是否可以在 iOS 5.1+ 上为屏幕亮度变化设置动画？我正在使用`[UIScreen mainScreen] setBrightness:(float)]`，但我认为突然的变化是丑陋的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-06-03T23:02:45.223

在尝试使用正在进行的前一个动画制作另一个值时，我遇到了接受答案的问题。此解决方案取消正在进行的动画并将动画设置为新值：

```
extension UIScreen {

    func setBrightness(_ value: CGFloat, animated: Bool) {
        if animated {
            _brightnessQueue.cancelAllOperations()
            let step: CGFloat = 0.04 * ((value > brightness) ? 1 : -1)
            _brightnessQueue.add(operations: stride(from: brightness, through: value, by: step).map({ [weak self] value -> Operation in
                let blockOperation = BlockOperation()
                unowned let _unownedOperation = blockOperation
                blockOperation.addExecutionBlock({
                    if !_unownedOperation.isCancelled {
                        Thread.sleep(forTimeInterval: 1 / 60.0)
                        self?.brightness = value
                    }
                })
                return blockOperation
            }))
        } else {
            brightness = value
        }
    }

}

private let _brightnessQueue: OperationQueue = {
    let queue = OperationQueue()
    queue.maxConcurrentOperationCount = 1
    return queue
}() 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2019-05-15T16:20:44.157

斯威夫特 5

```
import UIKit

extension UIScreen {

    public func setBrightness(to value: CGFloat, duration: TimeInterval = 0.3, ticksPerSecond: Double = 120) {
        let startingBrightness = UIScreen.main.brightness
        let delta = value - startingBrightness
        let totalTicks = Int(ticksPerSecond * duration)
        let changePerTick = delta / CGFloat(totalTicks)
        let delayBetweenTicks = 1 / ticksPerSecond

        let time = DispatchTime.now()

        for i in 1...totalTicks {
            DispatchQueue.main.asyncAfter(deadline: time + delayBetweenTicks * Double(i)) {
                UIScreen.main.brightness = max(min(startingBrightness + (changePerTick * CGFloat(i)),1),0)
            }
        }

    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-05T19:20:41.187

我不知道这是否以其他方式“动画化”，但你可以自己做。例如，以下示例代码连接到 UI 中的“全亮”和“半亮”按钮。它使用**performSelector...afterDelay**每 10ms 将亮度更改 1%，直到达到目标亮度。您将根据一些实验选择适当的更改率。实际上，我认为刷新率是 60 赫兹，因此以小于 1/60 秒的时间间隔进行更改可能没有意义（我选择的示例速率是为了得到很好的数学运算）。尽管您可能希望在非 UI 线程上执行此操作，但它不会阻塞 UI。

```
- (IBAction)fullBright:(id)sender {
    CGFloat brightness = [UIScreen mainScreen].brightness;
    if (brightness < 1) {
        [UIScreen mainScreen].brightness += 0.01;
        [self performSelector:@selector(fullBright:) withObject:nil afterDelay:.01];
    }
}

- (IBAction)halfBright:(id)sender {
    CGFloat brightness = [UIScreen mainScreen].brightness;
    if (brightness > 0.5) {
        [UIScreen mainScreen].brightness -= 0.01;
        [self performSelector:@selector(halfBright:) withObject:nil afterDelay:.01];
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-06T18:47:37.873

一个 Swift 扩展：

```
 extension UIScreen {

    private static let step: CGFloat = 0.1

    static func animateBrightness(to value: CGFloat) {
        guard fabs(UIScreen.main.brightness - value) > step else { return }

        let delta = UIScreen.main.brightness > value ? -step : step

        DispatchQueue.main.asyncAfter(deadline: .now() + 0.01) {
            UIScreen.main.brightness += delta
            animateBrightness(to: value)
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-12T03:16:44.877

根据 Charlie Price 的出色回答，这是一种将屏幕亮度“动画化”为任何所需值的方法。

```
- (void)graduallyAdjustBrightnessToValue:(CGFloat)endValue
{
    CGFloat startValue = [[UIScreen mainScreen] brightness];

    CGFloat fadeInterval = 0.01;
    double delayInSeconds = 0.01;
    if (endValue < startValue)
        fadeInterval = -fadeInterval;

    CGFloat brightness = startValue;
    while (fabsf(brightness-endValue)>0) {

        brightness += fadeInterval;

        if (fabsf(brightness-endValue) < fabsf(fadeInterval))
            brightness = endValue;

        dispatch_time_t dispatchTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC));
        dispatch_after(dispatchTime, dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
            [[UIScreen mainScreen] setBrightness:brightness];
        });
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-15T15:59:44.950

或者您可以使用**NSTimer**代替 while 循环和 performSelector。

**finalValue** - 是您想要实现的价值。

计时器触发 30 次，每次持续时间为 0.02 秒（您可以选择不同但平滑的东西）并更改亮度值。

```
weak var timer: NSTimer?
var count = 1
let maxCount = 30
let interval = 0.02

timer = NSTimer
            .scheduledTimerWithTimeInterval(interval,
                                            target: self,
                                            selector: #selector(changeBrightness),
                                            userInfo: nil,
                                            repeats: true)
func changeBrightness()
{
    guard count < maxCount else { return }

    let currentValue = UIScreen.mainScreen().brightness 
    let restCount = maxCount - count
    let diff = (finalValue - currentValue) / CGFloat(restCount)
    let newValue = currentValue + diff
    UIScreen.mainScreen().brightness = newValue

    count += 1
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-17T11:00:05.937

如果您需要更改特定 ViewController 的亮度，可以使用此助手

```
import Foundation
import UIKit

final class ScreenBrightness {

    private var timer: Timer?
    private var brightness: CGFloat?
    private var isBrighteningScreen = false
    private var isDarkeningScreen = false

    private init() { }

    static let shared = ScreenBrightnessHelper()

    //Увеличение яркости экрана до максимального уровня
    func brightenDisplay() {
        resetTimer()
        isBrighteningScreen = true
        if #available(iOS 10.0, *), timer == nil {
            brightness = UIScreen.main.brightness
            timer = Timer.scheduledTimer(withTimeInterval: 0.01, repeats: true) { (timer) in
                UIScreen.main.brightness = UIScreen.main.brightness + 0.01
                if UIScreen.main.brightness > 0.99 || !self.isBrighteningScreen {
                    self.resetTimer()
                }
            }
        }
        timer?.fire()
    }

    //Затемнение экрана до предыдущего уровня
    func darkenDisplay() {
        resetTimer()
        isDarkeningScreen = true
        guard let brightness = brightness else {
            return
        }
        if #available(iOS 10.0, *), timer == nil {
            timer = Timer.scheduledTimer(withTimeInterval: 0.01, repeats: true) { (timer) in
                UIScreen.main.brightness = UIScreen.main.brightness - 0.01

                if UIScreen.main.brightness <= brightness || !self.isDarkeningScreen {
                    self.resetTimer()
                    self.brightness = nil
                }
            }
            timer?.fire()
        }
    }

    private func resetTimer() {
        timer?.invalidate()
        timer = nil
        isBrighteningScreen = false
        isDarkeningScreen = false
    }
} 
```

在 viewWillAppear 中调用 ScreenBrightness.shared.brightenDisplay() 如果你想改变它，调用方法 ScreenBrightness.shared.darkenDisplay() 将改变亮度

# objective-c - 当用户选择 UITable 行时显示等待屏幕

> ID：15840982
> 
> 赞同：2
> 
> 时间：2013-04-05T18:27:27.887
> 
> 标签：objective-c, ipad, cocoa-touch, uitableview

当用户在我的表中选择一行时，我需要使用 CoreData 加载一堆数据。这需要几秒钟（至少在模拟器上运行时 - 尚未在设备上进行测试，但我想它仍然会很长）。我想在用户选择一行时显示一个加载弹出屏幕（我正在为 iPad 开发），然后在加载数据后让它消失。

在使用 UIButtons 时，我总是通过触发 TouchDown 和 TouchUp 方法来做到这一点。我将代码放在 TouchDown 上显示弹出框，然后在 TouchUp 中完成我所有的实际工作（在本例中从 CoreData 加载）。然后在 TouchUp 结束时，我关闭弹出框。

有没有办法像按钮一样在表格视图中拆分触摸？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:27:27.887

[因此，当我输入问题时，我在Apple Docs](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html)中遇到了一些问题`willSelectRowAtIndexPath`，看起来就是为了解决这个问题。我没有在 SO 上看到任何其他主题，所以我想我会在这里使用这个“回答自己的问题 - 问答”功能，所以将来寻找这个的人可能会发现它更容易一些。

* * *

巨大的仅供参考：

我应该注意`willSelectRowAtIndexPath`实际上应该返回一个`NSIndexPath`，不像`didSelectRowAtIndexPath`（返回`void`）。然而，我原本有

```
-(void)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    //stuff
} 
```

注意`void`返回类型。Xcode（4.5 版）允许这样做而没有任何错误或警告（甚至在自动完成列表中为我提供了它）。当我以这种方式运行代码时，我总是遇到一个不可见的断点`libobjc.A.dylib'objc_autorelease:`（可能是因为我启用了“所有异常”断点？）。我无法越过这个断点，我从未在调试器输出控制台中获得任何调试信息，并且应用程序从未终止。我碰巧再次查看 Apple Doc 并注意到它应该返回一个 NSIndexPath （具体来说，代码应该解释为被选择的索引路径），但如果我没有碰巧在那里看到它，我永远不会知道问题是什么。

* * *

# python - 在两个 csv 文件之间做列操作

> ID：15840984
> 
> 赞同：-4
> 
> 时间：2013-04-05T18:27:28.910
> 
> 标签：python, csv

我有两个这样的 csv 文件：

文件1：

```
# full part
1 30   10 
```

文件2：

```
# full part
1 32   15 
```

我想做列操作并像这样输出：

```
listname        a        b    diff(b-a)
full            30       32    2
part            10       15    5 
```

我怎样才能在python中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:33:47.343

您的问题很难理解，但我可以猜测您的意思：

csvdiff.py：

```
import csv

with open('file1') as file1, open('file2') as file2, open('output', 'w') as output:
    next(file1), next(file2) # skip the header lines
    c1, c2 = csv.reader(file1, delimiter=' '), csv.reader(file2, delimiter=' ')
    c3 = csv.writer(output, delimiter=' ')
    c3.writerow(['listname', 'a', 'b', 'diff(b-a)'])
    for (row1, row2) in zip(c1, c2):
        c3.writerow(('full', row1[1], row2[1], int(row2[1])-int(row1[1])))
        c3.writerow(('part', row1[2], row2[2], int(row2[2])-int(row1[2]))) 
```

文件1：

```
full part
1 30 10 
```

文件2：

```
full part
1 32 15 
```

输出：

```
listname a b diff(b-a)
full 30 32 2
part 10 15 5 
```

那是你想要的吗？

请注意，我的测试输入中的列没有“排列”。如果您的原始数据已排列好，则可能是使用了制表符，在这种情况下您需要使用`delimiter='\t'`而不是`delimiter=' '`. 如果它们确实有不同数量的空格（就像您最初粘贴到问题中的那样），您想要离开`delimiter=' '`，然后添加`skipinitialspace=True`. 有关所有可用格式选项的详细信息，请参阅[文档](http://docs.python.org/2/library/csv.html#dialects-and-formatting-parameters)。

如果您希望输出对齐......最简单的方法是使用字符串格式来强制值在打印之前为固定宽度。例如，而不是`c3.writerow(…)`do `c3.writerow('{:<20}'.format(col) for col in …)`。如果你需要任何*真正*花哨的东西——比如通过遍历所有行并找到每列的最大宽度来确定每列的正确宽度——你可能想要在周围放置某种包装器`writer`（或者可能根本不`csv`使用用于输出）。

这里有几个技巧：

首先，使用该[`csv`](http://docs.python.org/2/library/csv.html)模块为您处理解析（和创建）CSV 文件。真正简单的方法是使用`DictReader`and `DictWriter`（这样，您不需要跳过标题行，并且可以按名称而不是索引来引用列），但是由于您只有两个列标题，三个列，这不起作用，因此您需要使用`reader`and `writer`。

其次，a`csv.reader`就像文件、列表或任何其他可迭代对象。这只是一系列行。因此，如果您想同步地通过两个 CSV 读取器，只需`zip`将它们放在一起，您就会得到一个单行序列对。（如果您使用的是 Python 2.x，则可能需要[`itertools.izip`](http://docs.python.org/2/library/itertools.html#itertools.izip)改用。）

最后，CSV 文件通常不做任何事情来指示值的类型，所以`reader`只给你字符串。如果您知道这些值是整数，并且想以这种方式对待它们，则必须调用`int`它们。

# javascript - 如何捕获输入元素的内容并测试它是否是字母 az AZ 之间的字符和两个单词之间的空格

> ID：15840985
> 
> 赞同：0
> 
> 时间：2013-04-05T18:27:31.690
> 
> 标签：javascript, jquery, if-statement, input, try-catch

我有这个代码：

```
$(document).ready(function(){
    $("input").focus(function(){
        $(this).css('outline-color','#559FFF');
        $(this).blur(function(){
            $(this).css("outline-color","#FF0000");
        });
    });
    $("input").click(function(){
     var value = $(this).val(function(){
         $(this).html("");
      });
    });
    $(".awesome").click(function(){
        var toStore = $("input[name=name]").val();
        if((toStore===/[a-zA-Z]/)===true){
        $("#contain").children().fadeOut(1000);
        $("#contain").delay(5000).queue(function(){
            $("#contain").append("<p>welcome : " + toStore + " </p>");
    });
        }else{
            alert("You Must Put a Valid Name");
        }
});
}); 
```

我希望我的代码测试并捕获我输入的值，如果该值是 az 之间的字符，包括大写，两个单词之间有空格，例如：“FirstName LastName”，如果它可以处理为：

```
$("#contain").children().fadeOut(1000);
        $("#contain").delay(5000).queue(function(){
            $("#contain").append("<p>welcome : " + toStore + " </p>");
    }); 
```

否则提醒用户他必须输入有效字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T18:36:06.360

我认为这个正则表达式应该可以工作：

```
if (/^[A-Za-z]+ [A-Za-z]+$/.test(toStore)) {

} 
```

并且应该代替你的`if((toStore===/[a-zA-Z]/)===true){`

**演示：http:** [//jsfiddle.net/tDVWk/](http://jsfiddle.net/tDVWk/)

这将检查输入是否遵循以下内容：

*   以 1 个或多个字母字符开头（可以是大写或小写）
*   在上一组字符之后包含一个空格
*   以 1 个或多个字母字符结尾（可以是大写或小写）

如果您想更严格并要求每个名称以大写字母开头，其余为小写，您可以使用：

```
if (/^[A-Z][a-z]? [A-Z][a-z]?$/.test(toStore)) {

} 
```

但这并不理想，因为名称非常不同，很容易成为“McLovin”之类的东西……第二个例子肯定会失败。希望我的第一个例子能完成你所需要的。

当然，总是有争论说你不应该限制这样的事情。如果他们的名字不仅仅是第一个和最后一个怎么办？如果他们有一个后缀，比如“III”（或者实际上是“3”），表明他们是同名的家族中的第三个呢？如果人们想要包括他们的中间名（故意或意外）怎么办？对每个名称使用两个文本框可能更有意义，使用户更清楚。这样，您所要做的就是验证每个都已填写（并且可能只有字母字符）。再说一次，我不确定你的要求是什么以及你已经拥有的这个文本框是什么:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T18:47:50.153

像这样的东西？您需要在需要的地方添加代码。

```
<script>
 function validateInput(obj, e){
    var code;
    if (!e) var e = window.event;
    if (e.keyCode) code = e.keyCode;
    else if (e.which) code = e.which;
    var character = String.fromCharCode(code);
    var AllowRegex  = /^[\ba-zA-Z,\s-\f\n\r\t\v]$/;
    if (AllowRegex.test(character)){ 
        return true;
    }
    else{
    alert('!');
        return false;
    }
    }
</script>

<input id="input1" onkeydown=" return validateInput(this,event) "/> 
```

# java - Java - 对象数组 - 一个设置索引设置整个数组

> ID：15840992
> 
> 赞同：0
> 
> 时间：2013-04-05T18:28:13.163
> 
> 标签：java, android, arrays

在这一点上我很迷茫。这可能很简单，但是......我缩小了代码。我不相信我删除了任何相关内容。除了一个大缺陷外，一切似乎都很好。当我调用 SetWhosOnline 时，无论我的索引是什么，它似乎都设置了整个数组。

我在 SetWhosOnline 调用之前的监视环境窗口。

```
 users[0].name = null
    users[1].name = null
    users[2].name = null
    users[3].name = null
    etc.... 
```

我打电话

```
 SetWhosOnline("john",1); 
```

我期待看到...

```
 users[0].name = null
    users[1].name = john
    users[2].name = null
    users[3].name = null 
```

不幸的是 - 我得到的是......

```
 users[0].name = john
    users[1].name = john
    users[2].name = john
    users[3].name = john 
```

我的头发变白了！希望有人能帮我解答一下......

第一类

```
public class Login extends Activity {
public static who[] users = new who[100];
}

private static void SetWhosOnline(String user, int Index) {
      users[index].SETname(user);
}

 } 
```

2 级

```
public class who 
 {
private static boolean active;
private static boolean online;
private static String msg="";
private static int MsgCnt=0;
private static String name;
private static String IP;
private static Date stamp=new Date();

public void init(int index) {
      this.active = false;
      this.online = false;
      this.name = "";
      this.IP = "";
      this.stamp = new Date();
}  //USER   

public final void SETname(String value) {
    this.name = value;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-05T18:30:40.457

类中的所有字段都是静态的，因此类的所有实例将共享相同的数据（即具有相同的名称、相同的 IP 等）。在这种情况下使用静态是没有意义的。

# java - 是否可以将 Google Maps V2 MapFragment 放在 ActionBar 选项卡中？

> ID：15840995
> 
> 赞同：1
> 
> 时间：2013-04-05T18:28:15.507
> 
> 标签：java, android, google-maps, android-actionbar, google-maps-android-api-2

我有一个使用操作栏选项卡的应用程序。我正在尝试升级应用程序以使用 Google Maps V2 (MapFragment)，但是当 MapFragment 从主活动传递到片段容器时，它都崩溃了。

地图片段：

```
public class EstablishmentGoogleMapFragment extends MapFragment {

    private GoogleMap mMap;
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View root = super.onCreateView(inflater, container, savedInstanceState);
        mMap = getMap();
        return root;
    }
} 
```

分片交易：

```
 public void onTabSelected(Tab tab, FragmentTransaction ft) {
        if(fragment == null){
            String fragmentName = fragmentClass.getName();
            fragment = Fragment.instantiate(activity, fragmentName);
            ft.add(fragmentContainer, fragment, fragmentName);
        } else {
            ft.attach(fragment);
        }
    } 
```

日志猫：

```
FATAL EXCEPTION: main
java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.rb.hellojson/com.rb.hellojson.EstablishmentGoogleMapFragment}:
      java.lang.ClassCastException: com.rb.hellojson.EstablishmentGoogleMapFragment cannot be cast to android.app.Activity
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2024)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
    at android.app.ActivityThread.access$600(ActivityThread.java:140)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4898)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
    at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.ClassCastException: com.rb.hellojson.EstablishmentGoogleMapFragment cannot be cast to android.app.Activity
    at android.app.Instrumentation.newActivity(Instrumentation.java:1057)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2015)
    ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:45:01.650

这个错误应该很清楚：

`Caused by: java.lang.ClassCastException: com.rb.hellojson.EstablishmentGoogleMapFragment cannot be cast to android.app.Activity`

你是想在这个片段上做 startActivity 还是什么？

对于以后的修复：`mMap = getMap();`此时将返回 null （或者可能不返回）。

编辑：

有些东西正在开始你的片段，就像它是一个活动一样。如果不是Launcher，因为片段是在Manifest中定义的......

# c - 删除 C 中的 HTML 标签

> ID：15840996
> 
> 赞同：-5
> 
> 时间：2013-04-05T18:28:22.177
> 
> 标签：c, regex, html-parsing

在我的程序中，我下载了一个带有 wget 的网页，我想提取它，只有一个文本字符串。

我应该怎么做（如果它是正确的）从文件中清除 html 标签，因为只有网页上的文本？

我从来没有在 C 中使用过正则表达式，我不知道这是否是解决这个问题的正确方法。你能告诉我我可以使用的其他替代品或图书馆吗？或者如果我应该使用正则表达式，你能帮我在 C 中做一个这样的替换标签吗？

```
sed -e 's/<[^>]\+>/ /g' file.html 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T18:31:22.513

[正则表达式不适合解析 HTML。](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)只要您有 XHTML，就可以保证它是有效的 XML，因此您可以使用[XML 解析器库](http://www.xmlsoft.org/)来解析它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T22:25:55.747

另一个答案指向最相关的一点，即您无法使用正则表达式解析 HTML ...

这指出您的 sed 脚本也不起作用......

```
<a href="http://localhost/" title="Click &lt; link >">A link</a> 
```

以上是有效的 XML，更不用说快速和松散的 HTML，因为关闭`>`在 XML 中是有效的未转义...您只需要转义`&`并且...这也是转义的`<`最佳实践`>`

# javascript - 菜单悬停时昏暗的休息屏幕

> ID：15840999
> 
> 赞同：5
> 
> 时间：2013-04-05T18:28:27.977
> 
> 标签：javascript, jquery, css

以下是我的 js fiddle，我在其中尝试创建类似于以下网站 bankalhabib.com 的熄灯效果，问题是悬停在菜单上时，我的屏幕其余部分没有变暗，而我实际上想要的只是我的菜单暗淡。

请让我知道我可以解决这个问题，以便我可以达到与上述网站相同的效果吗？

谢谢，

[http://jsfiddle.net/49Qvm/9/](http://jsfiddle.net/49Qvm/9/)

```
<ul>
    <li>Home</li>
    <li>About</li>
    <li>Contact</li>
    <li>Num</li>
</ul>

$('li').hover(function(){
    $(this).addClass('hovered');
},function(){
    $(this).removeClass('hovered');
}); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-05T18:40:52.550

我认为你最好的选择是为屏幕上的变暗效果创建一个元素。当您将鼠标悬停在`ul`元素上时，它将切换变暗元素的可见性。

您需要确保该元素的`z-index`值`ul`高于提供变暗效果的元素（**记住这一点！**在设置`z-index`元素时，您需要确保将其`position`CSS 属性设置为`relative`、`fixed`或`absolute`）。

这是一个小提琴：http: [//jsfiddle.net/49Qvm/28/](http://jsfiddle.net/49Qvm/28/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-05T19:01:42.767

`z-index`试试这个用于创建焦点效果的javascript/css 。

**CSS**

```
.link {
  z-index: 700;
  list-style-type: none;
  padding: 0.5em;
  background: black;
  display: inline-block;
  cursor: pointer;
  color: white;
}
.dim {
  width: 100%;
  height: 100%;
  z-index: -6;
  display: none;
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  background: rgba(0,0,0,0.4);
}

body {
  background-color: orange;
} 
```

**jQuery**

```
var $dim = $('.dim');
$('.link').hover(function(){
  $dim.fadeIn(200);
}, function(){
  $dim.fadeOut(200);
}); 
```

**HTML**

```
<div class="dim"></div>
<ul>
  <div class="link"><li>Home</li></div>
  <div class="link"><li>Home</li></div>
  <div class="link"><li>Home</li></div>
  <div class="link"><li>Home</li></div>
</ul>

Some text here 
```

[http://jsfiddle.net/49Qvm/33/](http://jsfiddle.net/49Qvm/33/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T18:36:17.640

我认为这可能是一个范围界定问题。在函数的上下文中，“this”指的是函数而不是 li 元素。我曾经遇到过很多与此相关的问题。我的案例的解决方案是研究使用闭包以确保您将类添加到正确的 html 元素。