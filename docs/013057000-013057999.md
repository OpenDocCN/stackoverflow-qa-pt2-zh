# StackOverflow 问答 13057000-13057999

# c++ - 增强正则表达式构造函数中的互斥断言

> ID：13057001
> 
> 赞同：11
> 
> 时间：2012-10-24T20:16:14.377
> 
> 标签：c++, regex, linux, boost, initialization

我正在为 Arm 使用 boost 1.47，使用 Code Sourcery C++ 编译器 (4.5.1)，从针对 Ubuntu 的 Windows 7 进行交叉编译。

当我们编译调试版本（即启用断言）时，触发了一个断言：

```
pthread_mutex_lock.c:62: __pthread_mutex_lock: Assertion 'mutex->__data.__owner == 0' failed. 
```

在发布模式下编译，断言没有被触发并且程序工作正常（据我们所知）。

这是在 Ubuntu 10.x Arm 板下发生的。

因此，pthread_mutex_lock 似乎认为互斥锁是由与当前线程不同的线程设置的。此时在我的程序中，我们仍然是单线程的，通过在 main 中打印出 pthread_self 并且就在调用正则表达式构造函数之前进行验证。也就是说，它不应该使断言失败。

下面是触发问题的代码片段。

```
// Set connection server address and port from a URL
bool MyHttpsXmlClient::set_server_url(const std::string& server_url)
{
#ifdef BOOST_HAS_THREADS
cout <<"Boost has threads" << endl;
#else
cout <<"WARNING: boost does not support threads" << endl;
#endif
#ifdef PTHREAD_MUTEX_INITIALIZER
    cout << "pthread mutex initializer" << endl;
#endif
{
        pthread_t id = pthread_self();
        printf("regex: Current threadid: %d\n",id);
}
const boost::regex e("^((http|https)://)?([^:]*)(:([0-9]*))?"); // 2: service, 3: host, 5: port // <-- dies in here 
```

我已经确认设置了 BOOST_HAS_THREADS 和 PTHREAD_MUTEX_INITIALIZER。

我尝试通过 boost 来跟踪调试器，但它是模板代码，并且很难跟踪程序集，但我们基本上死在 do_assign 中（大约在 basic_regex.hpp 中的第 380 行）

```
basic_regex& assign(const charT* p1,
                      const charT* p2,
                      flag_type f = regex_constants::normal)
{
  return do_assign(p1, p2, f);
} 
```

模板代码是：

```
// out of line members;
// these are the only members that mutate the basic_regex object,
// and are designed to provide the strong exception guarentee
// (in the event of a throw, the state of the object remains unchanged).
//
template <class charT, class traits>
basic_regex<charT, traits>& basic_regex<charT, traits>::do_assign(const charT* p1,
                    const charT* p2,
                    flag_type f)
{
   shared_ptr<re_detail::basic_regex_implementation<charT, traits> > temp;
   if(!m_pimpl.get())
   {
      temp = shared_ptr<re_detail::basic_regex_implementation<charT, traits> >(new re_detail::basic_regex_implementation<charT, traits>());
   }
   else
   {
      temp = shared_ptr<re_detail::basic_regex_implementation<charT, traits> >(new re_detail::basic_regex_implementation<charT, traits>(m_pimpl->m_ptraits));
   }
   temp->assign(p1, p2, f);
   temp.swap(m_pimpl);
   return *this;
} 
```

我不确定哪个组件实际上在使用互斥锁——有人知道吗？

在调试器中，我可以检索变量的地址，`mutex`然后检查 ( `mutex->__data.__owner`)。我从编译器头文件 bits/pthreadtypes.h 中得到了偏移量，它显示：

```
/* Data structures for mutex handling.  The structure of the attribute
   type is not exposed on purpose.  */
typedef union
{
  struct __pthread_mutex_s
  {
    int __lock;
    unsigned int __count;
    int __owner;
    /* KIND must stay at this position in the structure to maintain
       binary compatibility.  */
    int __kind;
    unsigned int __nusers;
    __extension__ union
    {
      int __spins;
      __pthread_slist_t __list;
    };
  } __data;
  char __size[__SIZEOF_PTHREAD_MUTEX_T];
  long int __align; 
```

我使用这些偏移量来检查内存中的数据。这些值没有意义：例如，`__data.__lock`字段（一个 int）是 0xb086b580。( `__count`an unsigned int) 是 0x6078af00，`__owner`(an int) 是 0x6078af00。

这使我认为没有执行此互斥锁的某种初始化。要么是这样，要么是完全损坏，但我倾向于错过初始化，因为当我与调试提升库链接时，没有断言。

现在，我假设正在查询的任何互斥体都是一些全局/静态的，用于使正则表达式线程安全，并且不知何故它没有被初始化。

*   有没有人遇到过类似的事情？Ubuntu 是否需要一些额外的步骤来确保互斥体初始化？
*   我的实现假设是否正确？
*   如果它是正确的，有人可以指出这个互斥锁的声明位置，以及它的初始化发生在哪里
*   关于进一步调试步骤的任何建议？我在想我可能不得不以某种方式下载源代码并在那里进行跟踪重建（希望 StackOverflow 在我到达这一点之前可以帮助我）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:33:48.873

> 我使用这些偏移量来检查内存中的数据。这些值没有意义：例如，`__data.__lock`字段（一个 int）是 0xb086b580。( `__count`an unsigned > int) 是 0x6078af00，`__owner`(an int) 是 0x6078af00。

这听起来像是代码的不同部分对各种结构的大小有不同的看法。需要检查的一些事项：

*   有没有`#define`可以扩大数据结构，但在整个代码库中设置不一致？（在 Windows 上，`_SECURE_SCL`因此类错误而臭名昭著）
*   你做任何结构包装吗？如果您`#pragma pack`在标头中的任何位置设置并忘记在标头末尾取消设置，则此后包含的任何数据结构都将具有与程序中其他位置不同的布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T20:18:37.187

在像 boost 这样一个众所周知的、经过充分测试的库中出现真正特殊的运行时崩溃时，首先要检查的事情之一是是否存在头文件/库配置不匹配。恕我直言，将 _DEBUG 或 NDEBUG 放在标题中，尤其是在结构中以影响其二进制布局的方式，是一种反模式。*理想情况下，无论我们定义 _DEBUG、DEBUG、Debug、 Debug* 、NDEBUG 还是其他任何东西，我们都应该能够使用相同的 .lib （这样我们就可以根据是否需要调试符号来选择 .lib，而不是是否匹配标题定义）。不幸的是，情况并非总是如此。

# jquery - jQuery Mobile - 禁用单击可折叠标题

> ID：13057003
> 
> 赞同：1
> 
> 时间：2012-10-24T20:16:25.847
> 
> 标签：jquery, jquery-mobile

我希望能够禁用一组中的打开/关闭可折叠，而不是用户将单击打开元素内的继续按钮，该按钮将进行验证，然后在准备好时打开下一个元素。我基本上将可折叠套装用作向导。我一直在搜索文档，发现在崩溃发生时我可以在哪里捕获事件，但我找不到如何取消它。任何建议，或其他向导类型控件的建议，可以做我所说的，我将不胜感激！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T12:55:34.757

经过一番研究，我终于找到了答案。在这里发布它，希望它对任何试图将手风琴变成巫师的人有所帮助。

我的可折叠设备是这样设置的：

```
 <div data-role="collapsible" data-collapsed="false" id="col1" >
     <h3>Title</h3>
     <p>
         <input type="text" />
         <input type="button" value="Next" onclick="nextClicked(1);" />
     </p>
 </div> 
```

要停止单击工作但保持能够触发扩展，我使用此 jquery：

```
$(document).ready(function () {
    $("#col1 h3 a").click(function (event) {
        return false;
    });
}); 
```

我曾尝试使用 preventDefault 和 stopPropagation 但这些都没有。显然 return false 和那两个一样做了一些额外的工作。

编辑：我发现这在浏览器中有效，但不能在移动设备上阻止它，为了阻止它在移动设备上，你还必须捕获点击事件，但要小心，你必须在标题上而不是整个可折叠或可折叠元素中的任何元素（例如按钮）也不会注册。这是我使用的代码：

```
$("#col1 h3").on("tap", function (event, ui) {
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-17T10:23:51.507

改变

```
<div data-role="collapsible"> 
```

到

```
<div data-role="collapsible" class="ui-disabled"> 
```

为我在图形和功能上禁用标题。

见[http://jsfiddle.net/NY63z/](http://jsfiddle.net/NY63z/)

# matplotlib - Matplotlib - 创建具有 1:1 轴比例的子图网格

> ID：13057005
> 
> 赞同：0
> 
> 时间：2012-10-24T20:16:40.243
> 
> 标签：matplotlib

有什么方法可以创建如下图所示的绘图，轴比例为 1:1。1:1 我的意思是，如果两个值为 100-200 的刻度在 x 轴上的屏幕距离为 2cm，那么它在 y 轴上应该是相同的。相反，如图所示，x 轴上的刻度要大得多。![阴谋](../Images/50364414e48032c42942dee1ff2839f4.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T21:06:24.733

`ax.set_aspect('equal')``ax = fig.add_subplot(111, aspect='equal')`当您生成 轴时，每个轴的事实之后。[示例/文档](http://matplotlib.org/faq/howto_faq.html#make-the-aspect-ratio-for-plots-equal)

# android - canvas.drawCircle 不起作用 - 而 drawLine 起作用 - 可能是由使用 Sherlock 引起的？

> ID：13057006
> 
> 赞同：3
> 
> 时间：2012-10-24T20:16:40.453
> 
> 标签：android, drawing, actionbarsherlock, android-canvas

我对标准方法有一个奇怪的问题`canvas.drawCircle`。

虽然我在具有 Android 4.0.4 的三星 Galaxy S3 和具有 2.1 的另一台 S2 上运行完全相同的代码，但它可以正常工作。使用 4.0.3 的 Acer 500 平板电脑上的相同代码在调用`drawCircle`和`drawPath`.

这是代码：

```
 Paint thickLine = new Paint(scalePaint);
    thickLine.setStrokeWidth(0.07f);
    thickLine.setColor(Color.argb(0xff, 0xff, 0x36, 0x33));
    thickLine.setFlags(Paint.ANTI_ALIAS_FLAG);
    canvas.drawLine(0.5f, 0.5f, 0.1f, 0.1f, thickLine);
    canvas.drawCircle(0.5f, 0.5f, 0.15f, thickLine); 
```

但`drawLine`适用于所有三种设备！

还要提一下 - 代码之前工作过 - 然后我将标准 Fragments 更改为 SherlockFragments 并在应用程序中的几个地方修改了代码 - 总是在 S3 上进行测试。所以我不知道它从什么阶段开始在宏基上不再起作用。

我还使用了包含此代码的未更改的旧绘图类（在我对应用程序进行所有更改之前）并将其复制到现在使用 Sherlock 的新版本中 - 即使项目代码的这个阶段不再像描述的那样工作。

所以我想这可能与夏洛克有关——但是，我不知道如何以及为什么——如果有的话……

任何人都有类似的经验，但在哪里可以工作`drawLine`但不可以？- 使用或不使用 Sherlock`drawCircle``drawPath`

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:02:06.517

我遇到了完全相同的问题 - Canvas.drawCircle 不适合我。幸运的是，还有另一个函数 - Canvas.drawOval。您可以使用它来绘制圆圈而无需更改构建目标。

```
RectF tmpRect = new RectF();
tmpRect.top = 0;
tmpRect.bottom = diameter;
tmpRect.left = 0;
tmpRect.right = diameter;

//This call will draw nothing
canvas.drawCircle(tmpRect.centerX(), tmpRect.centerY(), tmpRect.width() / 2, selectionPaint);
//This call will draw a circle
canvas.drawOval(tmpRect, selectionPaint); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:59:29.527

几乎令人难以置信但确实如此，只需更改目标设置（或将其全部删除），它就会起作用 - 在我的情况下它确实如此:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T08:33:38.467

我只是遇到了 Canvas.drawLine() 和 Canvas.drawRect() 的问题。我的线条会被绘制，但我的矩形没有。

```
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    paint.setStyle(Paint.Style.FILL);
    paint.setColor(Color.WHITE);

    int height = canvas.getHeight();
    int width = canvas.getWidth();

    canvas.drawLine(width/2,0,width/2,height,paint);
    canvas.drawLine(0,height/2,width,height/2,paint);

    paint.setStyle(Paint.Style.STROKE);
    paint.setColor(Color.GREEN);
    canvas.drawRect(touchRect, paint);
} 
```

但是，当我在 onTouchEvent() 方法中调用 View.invalidate() 时，它开始起作用，因为我想在触摸屏幕的地方绘制一个矩形。

```
@Override
public boolean onTouchEvent(MotionEvent event) {

    invalidate();

    if (event.getAction() == MotionEvent.ACTION_DOWN) {
        float x = event.getX();
        float y = event.getY();

        touchRect.left = (int) (x - 20);
        touchRect.top =(int) (y - 20);
        touchRect.right = (int) (x + 20);
        touchRect.bottom = (int) (y + 20);
    }
    return false;
} 
```

我从阅读[https://developer.android.com/guide/topics/graphics/2d-graphics.html得到这个](https://developer.android.com/guide/topics/graphics/2d-graphics.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-31T20:55:04.420

将最低 Android 版本从 2.3 更改为 3 后，我遇到了同样的问题。如果我将 android 版本改回来，线条可以正常工作，但 drawRect 不能正常工作。经过多次尝试和错误，我发现切换顶部和底部坐标可以解决问题。

我将顺序从左上右下更改为左下右上，它起作用了。

# batch-file - 如何使批处理文件等到设置完成

> ID：13057007
> 
> 赞同：0
> 
> 时间：2012-10-24T20:16:40.980
> 
> 标签：batch-file, setup.exe

我试图把它放到 example.bat call= blahblah.exe call= example.bat /wait blahblah.exe

但上面不会等待，它会在 blahblah.exe 运行后立即调用 example.bat。

我想在整个 blahblah.exe 完成后启动 example.bat。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:48:40.097

您可以使用`start`. 如果要运行，请在退出时`a.bat`执行`b.exe`然后运行；`c.bat`

**`a.bat`**：

```
start /wait b.exe
call c.bat 
```

# google-chrome - chrome 索引数据库 setVersion 请求充满异常

> ID：13057011
> 
> 赞同：2
> 
> 时间：2012-10-24T20:17:00.173
> 
> 标签：google-chrome, indexeddb

我正在尝试使用 setVersion 让以下代码在 chrom 上工作（因为 onupgradeneeded 尚不可用）。

IDBVersionChangeRequest 填充了 IDBDatabaseException。并且无法调用 onsuccess 函数。我需要在 onsuccess 函数中创建一个 ObjectStore。

特别是这一行：**request = browserDatabase._db.setVersion(browserDatabase._dbVersion.toString());**

下面是我的代码。任何帮助将不胜感激...

```
browserDatabase._db = null;
browserDatabase._dbVersion = 4;
browserDatabase._dbName = "mediaStorageDB";
browserDatabase._storeName = "myStore";

var request = indexedDB.open(browserDatabase._dbName);

// database exist
request.onsuccess = function(e) 
{
    browserDatabase._db = e.target.result;

    // this is specifically for chrome, because it does not support onupgradeneeded
    if (browserDatabase._dbVersion != browserDatabase._db.version)
    {
        request = browserDatabase._db.setVersion(browserDatabase._dbVersion.toString());

        request.onerror = function(e) { alert("error") };

        request.onblocked = function(e)
        {
           b = 11;  // for some reason the code goes here...
        }

        request.onsuccess = function(e)
        {
            browserDatabase._db.createObjectStore(browserDatabase._storeName, {autoIncrement: true});
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T05:04:24.107

在您的代码示例中，您说您进入了 onblocked 回调。您可以获得此回调的唯一方法是当您仍然打开到您的数据库的事务/连接时。（除了您正在工作的那个。）这意味着您必须先关闭所有其他事务/连接，然后才能调用 setVersion。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T01:06:52.407

当 IndexedDB 发生有线问题时，我“从托管应用程序中清除数据”，退出 Chrome 窗口并喝杯咖啡。之后一切正常。:-D

`browserDatabase._dbVersion < browserDatabase._db.version`. 降级是不可能的。`dbVersion = 4`不应掉以轻心。您可能会打开其他选项卡`dbVersion = 5`，或者浏览器可能会在其他地方等待您的响应或自身更新。这一切背后的原因都不值得追究。

# xcode - 按下 UICollectionViewCell 时如何调用方法？

> ID：13057012
> 
> 赞同：0
> 
> 时间：2012-10-24T20:17:02.273
> 
> 标签：xcode, uiviewcontroller, ios6, uicollectionview, uicollectionviewcell

当按下 UICollectionViewCell 时，我试图调用另一个 UIViewController，但我就是不能。我应该使用以下哪种方法？

```
-(void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath
{

}

-(void) collectionView:(UICollectionView *)collectionView performAction:(SEL)action forItemAtIndexPath:(NSIndexPath *)indexPath withSender:(id)sender
{

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:20:54.090

只需链接`UICollectionViewCell`到情节提要中的新视图控制器！你不需要这些方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T03:19:59.520

在一个简单的情况下，您可能想要使用情节提要并建立从您的单元到另一个视图控制器的转场。如果您想将每个单元格链接到同一个视图控制器类，那将起作用。如果您需要实例化不同类的视图控制器，或者如果您不使用情节提要，那么您将使用您提到的第一个功能

```
-(void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath 
```

# perl - perl 中的无限循环

> ID：13057014
> 
> 赞同：1
> 
> 时间：2012-10-24T20:17:17.360
> 
> 标签：perl

我想从 tcp 流文件中提取除 http 标头之外的内容，内容如下所示，当遇到两个 ^M 时，http 标头结束

```
HTTP/1.1 200 OK^M 
Last-Modified: Sat, 20 Mar 2010 09:43:12 GMT^M 
Content-Type: video/x-flv^M 
Date: Wed, 24 Oct 2012 14:34:13 GMT^M 
Expires: Wed, 24 Oct 2012 14:34:13 GMT^M 
Cache-Control: private, max-age=22124^M 
Accept-Ranges: bytes^M 
Content-Length: 29833281^M 
Connection: close^M 
X-Content-Type-Options: nosniff^M 
Server: gvs 1.0^M 
^M 
FLV^A^E^@^@^@   ^@^@^@^@^R^@^CK^@^@^@^@^@^@^@^B^@ 
onMetaData^H^@^@^@^O^@^Hduration^@@i<97> 
=p£×^@  starttime^@^@^@^@^@^@^@^@^@^@^Mtotalduration^@@i<97> 
```

我的提取代码如下，我运行：extract.pl < tcp.flow 但似乎循环是无止境的，代码有什么问题？谢谢！

```
#!/usr/bin/perl 
$start=0; 
$data=""; 
while(<STDIN>) 
{ 
    if ( $start eq 0 && $_ =~ /^\r\n/) { $start = 1; } 
    elsif ( $start eq 1 ) { $data = $data . $_; } 
} 
open(FH, ">sample.flv"); 
print FH $data; 
close(FH); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:44:26.907

在读取数据之前调用`binmode()`STDIN，文件内容可能会干扰文件读取。在写入数据之前，您还需要在 FH 上使用它。高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T21:33:40.370

这是一个单行。但是，我认为没有任何无限循环的理由。

```
perl -00 -lne '$i++ and print' file > sample.flv 
```

哪个 deparsed 看起来像这样：

```
>perl -MO=Deparse -00 -lne '$i++ and print' input.txt
BEGIN { $/ = ""; $\ = "\n\n"; }        # from -l and -00
LINE: while (defined($_ = <ARGV>)) {   # from -n
    chomp $_;                          # from -l, removes "\n\n" now
    print $_ if $i++;                  # skips the first line
}
-e syntax OK 
```

如果您需要先清理文件，只需执行

```
perl -pi -le 's/[\r\n]+$//' input.txt 
```

# javascript - NodeJs、Mocha 和 Mongoose

> ID：13057016
> 
> 赞同：10
> 
> 时间：2012-10-24T20:17:24.537
> 
> 标签：javascript, node.js, module, mongoose, mocha.js

我有以下结构：

```
|服务器
 |分贝
  |mongooseTest.js
 |测试
  |userModel.test.js
 |用户
  |userModel.js

```

使用他们的代码：

*mongooseTest.js*

```
    var 猫鼬 = 要求（'猫鼬'）；

    module.exports = 函数（） {
        var db = mongoose.createConnection('localhost', 'dbUnitTest');

        db.on('已连接', function() {
            console.log('DB:' + db.name + '本地:' + db.host + ':' + db.port);
        });

        db.on（'错误'，函数（错误）{
            控制台日志（错误）；
        });

        返回分贝；
    };

```

*userModel.test.js*

```
    var 断言 = 要求（'断言'），
        应该 = 要求（'应该'），
        conn = require('../db/mongooseTest'),
        UserModel = require('../user/userModel');

    描述（'用户模型'，函数（）{
        描述（'保存'，函数（）{

            it('正在保存...', function() {
                var db = conn();
                var Model = db.model('User');
                var userModel = 新模型（{
                    名称：'我的名字'，
                    电子邮件：'contact@com.br',
                    通过：'anything123'
                });

                userModel.on('save', function(user) {
                    console.log('由用户保存事件句柄传递');
                });

                userModel.save（函数（错误，用户）{
                    console.log('由用户保存传递');
                    如果（错误）console.log（错误）；
                    控制台.log（用户）；
                });
            });
        })
    })

```

*用户模型.js*

```
    var 猫鼬 = 要求（'猫鼬'），
        加密 = 要求（'加密'），
        Schema = mongoose.Schema;

    var setPass = 函数（值）{
            var salt = 'anyRandomSaltValue';
            this.set('salt', salt);
            var pass = hashPass(value + salt);
            回程通行证；
        }

    var hashPass = 函数（值）{
            return crypto.createHash('sha1').update(value).digest('HEX');
        }

    var userSchema = new Schema({
        姓名： {
            类型：字符串，
            要求：真
        },
        电子邮件： {
            类型：字符串，
            要求：真，
            唯一：真
        },
        经过： {
            类型：字符串，
            要求：真，
            设置：setPass
        },
        盐： {
            类型：字符串，
            要求：真
        }
    });

    userSchema.method({
        验证通行证：函数（senha）{
            var salt = this.get('salt');
            var passSha = hashPass(senha + salt);
            return passSha === this.get('senha');
        },
    });

    userSchema.static({
        findByEmail：函数（电子邮件，成功，错误）{
            这个.findOne({
                电子邮件：电子邮件
            }，函数（e，o）{
                如果（e）{
                    如果（错误）错误（e）；
                } 别的 {
                    如果（成功）成功（o）；
                }
            });
        },
    });

    module.exports = mongoose.model("用户", userSchema);

```

问题是......当我运行“mocha”来执行我的单元测试时，没有执行保存函数的回调。

谢谢大家！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-27T03:47:30.180

用[这种](https://github.com/joshmosh/node-mongoose-mocha-demo)方法解决了问题。

我还找到[了另一种](https://github.com/elliotf/mocha-mongoose)看起来不错的解决方案，但我没有尝试。

# knockout.js - 淘汰赛验证 ko.validation.group 与 ko.validatedObservable

> ID：13057018
> 
> 赞同：14
> 
> 时间：2012-10-24T20:17:25.317
> 
> 标签：knockout.js, knockout-validation

`ko.validation.group`和有什么区别`ko.validatedObservable`？是否存在我应该使用其中一种的特殊情况？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-24T21:03:23.770

`ko.validation.group`只是给你一个模型中所有错误消息的（计算的）可观察的。它只收集模型直接属性的错误消息。

`ko.validatedObservable`另一方面，不仅收集错误消息，还将模型包装在可观察对象中，并添加一个属性`isValid`，指示是否有任何错误消息（即模型完全有效）。否则，它们本质上是相同的。

如果您只对收集错误消息感兴趣，那么`ko.validation.group`应该绰绰有余。如果您需要一个跟踪模型是否有效的可观察对象，则可`ko.validatedObservable`以为您完成一些工作。

# jquery - 如何将验证引擎应用于我的表单？

> ID：13057019
> 
> 赞同：4
> 
> 时间：2012-10-24T20:17:25.843
> 
> 标签：jquery, checkbox, jquery-validate, max, min

我正在使用 jQuery 验证引擎，但需要`checkbox`一个最小为 4 且最大为 8 的验证引擎。

我知道如何像这样分开做它们，但不合并。一点帮助？

```
<class="validate[minCheckbox[4]] 
<class="validate[maxCheckbox[8]] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T20:30:11.693

你里面的班级名称`input`应该是：

```
class="validate[minCheckbox[4]maxCheckbox[8]]" 
```

^ 注意 mincheckbox[] 后面没有空格或逗号

# python - Python scipy.optimize：将 fsolve 与多个初步猜测一起使用

> ID：13057022
> 
> 赞同：7
> 
> 时间：2012-10-24T20:17:37.677
> 
> 标签：python, optimization, numpy, scipy

Scipy 版本 0.10.0

考虑以下：

```
>>> import math
>>> from scipy.optimize import fsolve
>>> import numpy as np
>>> def p(s, l, k, q):
    p = q * np.maximum(s - k, 0.0)
    return (p + math.copysign(l, -q)) * math.fabs(q) * 100.0

>>> x0 = fsolve(p, np.arange(33.86, 50.86, 1.0), args=(1.42, 41.0, -1.0), xtol=1e-06, maxfev=500)
Warning (from warnings module):
  File "C:\Python27\lib\site-packages\scipy\optimize\minpack.py", line 152
    warnings.warn(msg, RuntimeWarning)
RuntimeWarning: The iteration is not making good progress, as measured by the 
   improvement from the last ten iterations.
>>> print x0
[ -4.87169392e+05  -4.87168392e+05  -4.87167392e+05  -4.87166392e+05
  -4.87165392e+05  -4.87164392e+05  -4.87163392e+05  -4.87162392e+05
   4.24200000e+01   4.24200000e+01   4.24200000e+01   4.24200000e+01
   4.24200000e+01   4.24200000e+01   4.24200000e+01   4.24200000e+01
   4.24200000e+01] 
```

第一个问题是如何抑制返回的警告消息？

其次，为什么首先会产生这个错误（除了显而易见的，迭代没有取得好的进展:)）？

最后，这个函数的根是42.42（找到了）。为什么也`fzero`回来`-4.87e+05`了？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T20:49:07.993

这样做可能会让您错过一些重要的事情，但是，要使警告消息静音，您可以使用`warnings.filterwarnings`：

```
import warnings
warnings.filterwarnings('ignore', 'The iteration is not making good progress')
import math
from scipy.optimize import fsolve
import numpy as np
def p(s, l, k, q):
    p = q * np.maximum(s - k, 0.0)
    return (p + math.copysign(l, -q)) * math.fabs(q) * 100.0

x0 = fsolve(p, np.arange(33.86, 50.86, 1.0),
            args=(1.42, 41.0, -1.0), xtol=1e-06, maxfev=500)
print(x0) 
```

事实上，`p(x0, 1.42, 41.0, -1)`它并不接近于零，因此`fsolve`正确警告您它未能找到解决方案。

* * *

PS。当你说

```
fsolve(p, np.arange(33.86, 50.86, 1.0),...) 
```

你说`fsolve`你最初的猜测`s`是 numpy 数组`np.arange(33.86, 50.86, 1.0)`。整个数组立即被传入`p`。

请注意，`np.arange(33.86, 50.86, 1.0)`它的长度为 17， 也是如此`x0`。那是因为`fsolve`认为它正在寻找一个长度为 17 的数组来解决`p`.

我想也许你是`s`想成为一个花车？在这种情况下，您只能为初始猜测传入一个浮点值：

```
fsolve(p, 41.0, args = (1.42, 41.0, -1.0), xtol=1e-06, maxfev=500) 
```

例如，

```
import math
import scipy.optimize as optimize
import numpy as np

def p(s, l, k, q):
    p = q * np.maximum(s - k, 0.0)
    return (p + math.copysign(l, -q)) * math.fabs(q) * 100.0

args = (1.42, 41.0, -1.0)
result = optimize.fsolve(p, 41.0, args=args, xtol=1e-06, maxfev=500)
print(result) 
```

产量

```
[ 42.42] 
```

`fsolve`如果初始猜测 >= 41.0（ 的值），则在根上归零做得不错，`k`但当初始猜测 < 41.0 时失败。

我的猜测是，这是由于`np.maximum`对于`s`. 所以`fsolve`不知道是增还是减`s`，容易猜错，`s`离根越来越远。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-13T15:54:40.373

```
import math
import scipy.optimize as optimize
import numpy as np

def p(s, l, k, q):
    p = q * np.maximum(s - k, 0.0)
    return (p + math.copysign(l, -q)) * math.fabs(q) * 100.0

result = optimize.fsolve(p, 41.0, args=1,2,3, xtol=1e-06, maxfev=500)
print(result)

result = optimize.fsolve(p, 41.0, args=2,3,4, xtol=1e-06, maxfev=500)
print(result) 
```

# haskell - 如何使用 foldr 编写此函数？

> ID：13057028
> 
> 赞同：3
> 
> 时间：2012-10-24T20:18:15.753
> 
> 标签：haskell, recursion, functional-programming, fold, higher-order-functions

我有这个简单的函数，它返回一个包含列表相邻元素的对列表。

```
adjacents :: [a] -> [(a,a)]
adjacents (x:y:xs) = [(x,y)] ++ adjacents (y:xs)
adjacents (x:xs) = [] 
```

我在尝试使用`foldr`. 我已经做了一些研究，但似乎没有任何提示。怎么做到呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T20:57:36.573

像这样的棘手折叠通常可以通过让折叠构建一个函数而不是尝试直接构建结果来解决。

```
adjacents :: [a] -> [(a, a)]
adjacents xs = foldr f (const []) xs Nothing
  where f curr g (Just prev) = (prev, curr) : g (Just curr)
        f curr g Nothing     = g (Just curr) 
```

在这里，我们的想法是让结果成为包含前一个元素的类型的函数，或者`Maybe a -> [(a, a)]`如果我们位于列表的开头。`Maybe``Nothing`

让我们仔细看看这里发生了什么：

1.  如果我们同时拥有前一个元素和当前元素，我们将创建一对并将当前元素传递给递归的结果，递归的结果是生成列表尾部的函数。

    ```
    f curr g (Just prev) = (prev, curr) : g (Just curr) 
    ```

2.  如果没有前一个元素，我们只需将当前元素传递到下一步。

    ```
    f curr g Nothing     = g (Just curr) 
    ```

3.  `const []`列表末尾的基本情况只是忽略了前一个元素。

通过这样做，结果与您的原始定义一样懒惰：

```
> adjacents (1 : 2 : 3 : 4 : undefined)
[(1,2),(2,3),(3,4)*** Exception: Prelude.undefined 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T20:55:46.590

我认为您的函数不适合折叠，因为它着眼于两个元素而不是一个元素。

我认为解决问题的最佳方法是

```
adjacents [] = []
adjacents xs = zip xs (tail xs) 
```

但如果你愿意，我们可以把它硬塞进一个滑稽的折叠中。首先是辅助功能。

```
prependPair :: a -> [(a,a)] -> [(a,a)]
prependPair x [] = [(x,b)]             where b = error "I don't need this value."
prependPair x ((y,z):ys) = ((x,y):(y,z):ys)

adjacents' xs = init $ foldr prependPair [] xs 
```

我觉得我通过使用错误值制作和丢弃最后一个元素有点作弊，但是嘿嘿，我已经说过我不认为 foldr 是这样做的好方法，所以我想这个 hack 就是一个例子它不是一个折叠。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T07:39:16.497

您也可以尝试`unfoldr`代替`foldr`.

```
import Data.List
adjacents xs = unfoldr f xs where
  f (x:rest@(y:_)) = Just ((x,y), rest)
  f _ = Nothing 
```

# sql - SQL查询过滤掉匹配结果

> ID：13057029
> 
> 赞同：0
> 
> 时间：2012-10-24T20:18:19.283
> 
> 标签：sql, sql-server-2008, select

```
 SELECT TOP 92 PERCENT 
        Convert(DateTime,Floor(Cast((DateTime) as Float)*24)/24,0) AS SummaryDateTime,
        MIN(APM_ApplicationAvailability.PercentAvailability) AS MIN_of_ApplicationAvailability,
        Nodes.Caption AS NodeName 

        FROM 
        (Nodes INNER JOIN APM_AlertsAndReportsData ON (Nodes.NodeID = APM_AlertsAndReportsData.NodeId))  INNER JOIN APM_ApplicationAvailability ON (APM_AlertsAndReportsData.ApplicationId = APM_ApplicationAvailability.ApplicationID)

        WHERE 
        ( DateTime BETWEEN 40907 AND 41205 )
         AND  
        (
          (APM_AlertsAndReportsData.ApplicationName LIKE '%HTTP%') AND 
          (Nodes.Caption = 'www.example.com')
        )
GROUP BY Convert(DateTime,Floor(Cast((DateTime) as Float)*24)/24,0), 
Nodes.Caption

ORDER BY SummaryDateTime ASC 
```

上面的查询给了我以下结果，作为图像附加。![在此处输入图像描述](../Images/d4e53004230809ab9b744981f472fead.png)

我想编写一个查询来过滤掉所有`0.00%`结果，所以它只会给出`0.00%`数据，因为我不关心`100%`数据。我不知道如何过滤数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T20:24:17.783

这是您的完整查询吗？您有混合聚合 ( `MIN`) 和非聚合 ( `Datetime`)。
我假设您在某处有一个 GROUP BY，但无论如何，直接的方法是对其进行子查询。

```
SELECT *
FROM (
    SELECT TOP 92 PERCENT
        Convert(DateTime,Floor(Cast((DateTime) as Float)*24)/24,0) AS SummaryDateTime,
        MIN(APM_ApplicationAvailability.PercentAvailability) AS MIN_of_ApplicationAvailability,
        Nodes.Caption AS NodeName 
    FROM Nodes
    INNER JOIN APM_AlertsAndReportsData
            ON Nodes.NodeID = APM_AlertsAndReportsData.NodeId
    INNER JOIN APM_ApplicationAvailability
            ON APM_AlertsAndReportsData.ApplicationId = APM_ApplicationAvailability.ApplicationID
    WHERE DateTime BETWEEN 40907 AND 41205
      AND APM_AlertsAndReportsData.ApplicationName LIKE '%HTTP%'
      AND Nodes.Caption = 'www.example.com'
    -- GROUP BY..
) X
WHERE MIN_of_ApplicationAvailability = 0.0 
```

通常，对于聚合查询，您还可以使用 HAVING 子句，例如

```
 SELECT TOP 92 PERCENT
        Convert(DateTime,Floor(Cast((DateTime) as Float)*24)/24,0) AS SummaryDateTime,
        MIN(APM_ApplicationAvailability.PercentAvailability) AS MIN_of_ApplicationAvailability,
        Nodes.Caption AS NodeName 
    FROM Nodes
    INNER JOIN APM_AlertsAndReportsData
            ON Nodes.NodeID = APM_AlertsAndReportsData.NodeId
    INNER JOIN APM_ApplicationAvailability
            ON APM_AlertsAndReportsData.ApplicationId = APM_ApplicationAvailability.ApplicationID
    WHERE DateTime BETWEEN 40907 AND 41205
      AND APM_AlertsAndReportsData.ApplicationName LIKE '%HTTP%'
      AND Nodes.Caption = 'www.example.com'
    GROUP BY DateTime, Nodes.Caption
    HAVING MIN(APM_ApplicationAvailability.PercentAvailability) = 0.0 
```

# php - 在所有 cPanel 帐户中包含 PHP 脚本？

> ID：13057031
> 
> 赞同：0
> 
> 时间：2012-10-24T20:18:24.677
> 
> 标签：php, apache, nginx, webserver, cpanel

是否可以在服务器中的所有 cPanel 帐户中包含 PHP 脚本，而脚本不位于每个用户的主目录中？

例如`global.php`驻留在服务器中的某处：

```
// global.php
class global
{

} 
```

现在`user-a.com/test.php`和`user-b.com/test.php`（单独的 cPanel 帐户）将`new global();`提供给他们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T20:31:21.430

放入`global.php`一个目录`include_path`（或创建一个新目录），服务器上的所有 PHP 脚本都可以通过`include('global.php')`. 我建议不要自动包含它。

# caching - 从缓存中重新渲染 SVG。重新计算或记住？

> ID：13057034
> 
> 赞同：1
> 
> 时间：2012-10-24T20:18:36.917
> 
> 标签：caching, browser, svg

我找不到这个问题的答案，当浏览器从缓存中获取 SVG 时，它是否重新计算 xml，它是否存储了它已经创建的“图像”？（如何？）

我本来不会想到的，但后来我注意到重复 svgs 的加载速度有多快。

我还注意到页面徽标（在移动浏览器中）的速度很慢，这让我认为他们重新计算了 SVG，所以我已经转移到移动设备的 PNG（显然已缓存）以节省大量计算工作低端手机。

那么也许，答案是否取决于浏览器/浏览器类型/浏览器设置？

*顺便说一下，我的 svg 是压缩的 svgz

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T22:16:17.440

有时会，有时不会。大多数浏览器都会努力不重新渲染内容，除非他们必须这样做。SVG 1.2 Tiny 中有一个[缓冲渲染](http://www.w3.org/TR/SVGTiny12/single-page.html#painting-BufferedRenderingProperty)属性，如果您使用 Opera，可能会有所帮助，但其他浏览器会尝试自动执行操作而不需要此类提示。

不过，浏览器通常不会将 SVG 内容缓存为简单的位图。他们确实缓存了诸如应用了变换的形状和文本的绝对位置和大小、css 树结构、渐变等，然后使用这些信息，他们可以更快地重绘内容，而不是每次重绘都必须解决。此类信息允许浏览器使用 JavaScript 和 SMIL 动画复制部分 SVG 内容以及用户滚动。

# jquery - jQuery显示与选中的单选按钮关联的所有数据

> ID：13057036
> 
> 赞同：0
> 
> 时间：2012-10-24T20:18:57.797
> 
> 标签：jquery

我正在从服务返回的数组中生成动态单选按钮。返回的每个项目都包含地址数据。我知道如何从数据中获取值，但是如何从所选项目中获取所有值？这是我到目前为止所拥有的：

```
function showAddresses(item) {
    window.addNo2 = item.streetno;
    window.addStr2 = item.streetname;
    window.addCity2 = item.city;
    window.addSt2 = item.state;
    window.addZip2 = item.zip;
    window.latLong2 = item.latlng;
    $('#multiAdds').show();
    $('#results').append('<p><input type="radio" name="multiAdds" class="radioButton" onclick="getChecked()" value="' + latLong2 + '">' + addNo2 + ' ' + addStr2 + </p>');
}

function getChecked(){
    var latLong2 = $("input[name=multiAdds]:radio:checked").val();
    getJurisdictionMulti(latLong2, addNo2, addStr2, addCity2, addSt2, addZip2);
} 
```

我基本上需要能够从选定的单选按钮中获取所有关联的地址数据，并使用它们创建单独的变量，以便能够传递到我的 getJurisdictionMulti() 函数中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:28:52.153

对于这种情况，您可以使用 HTML-5 **data-***属性.. 这是一个简单的案例（粗略示例），**仍然可以优化..**

我们称这个属性**为 data-custom**

```
var custom =  latLong2 + ',' + addNo2 + ',' + addStr2 + ',' + addCity2
             + ',' + addSt2 + ',' + addZip2 ;
$('#results').append('<p><input data-custom="' + custom + '" type="radio" name="multiAdds" class="radioButton" onclick="getChecked()" value="' + latLong2 + '">' + addNo2 + ' ' + addStr2 + </p>');

function getChecked(){
    var values = $("input[name=multiAdds]:radio:checked").data('custom').split(',');
    var latLong2 = values[0] ;
    var addNo2 = values[1] ;
    var addStr2 = values[2] ;
    var addCity2 = values[3] ;
     var addSt2 = values[4] ;
    var addZip2 = values[5] ;
    getJurisdictionMulti(latLong2, addNo2, addStr2, addCity2, addSt2, addZip2);
} 
```

# ember.js - 使用 slug 代替 id

> ID：13057037
> 
> 赞同：5
> 
> 时间：2012-10-24T20:18:58.703
> 
> 标签：ember.js, ember-data

我正在尝试从可以接受用户名或 ID 的路由加载 ember-data 用户模型。

我修改了 RESTAdapter 的 find 方法以将 JSON 响应中的 id 传递给`didFindRecord`，但没有任何东西传递给我的视图。似乎 Ember 仍在尝试使用用户名作为模型的 id。

我的路由器是这样的：

```
App.Router = Em.Router.extend({
  location: 'history'
, root: Em.Route.extend({
    user: Em.Route.extend({
      route: '/users/:slug'
    , connectOutlets: function(router, context) {
        router.get('applicationController').connectOutlet('user', context)
      }

    , serialize: function(router, context) {
        return { slug: context.get('username') || context.get('id') }
      }

    , deserialize: function(router, params) {
        return App.User.find(params.slug)
      }
    })
  })
}) 
```

我的 find 方法如下所示：

```
var CustomAdapter = DS.RESTAdapter.extend({
  find: function(store, type, id) {
    var root = this.rootForType(type)

    this.ajax(this.buildURL(root, id), 'GET', {
      success: function(json) {
        this.didFindRecord(store, type, json, json[root].id)
      }
    })
  }
})

App.store = DS.Store.create({
  revision: 6
, adapter: CustomAdapter.create({ namespace: 'api' })
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:06:36.533

你应该看看这个问题： [https ://github.com/emberjs/data/issues/551](https://github.com/emberjs/data/issues/551)

# android - Android Chrome 中的 HTML5 数据列表

> ID：13057038
> 
> 赞同：0
> 
> 时间：2012-10-24T20:19:01.107
> 
> 标签：android, html, google-chrome, html-datalist

我有一个在 Chrome（桌面）中工作的 HTML5 数据列表，但是在 Android 和最新的 Chrome 中使用相同的输入时，自动完成功能不再起作用。

Android中的Chrome不支持此功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-24T23:29:36.643

建议 UI在`datalist`Chrome for Android v33 中实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T00:24:28.093

桌面 Chrome 从 20 版本开始支持，Android Chrome 仍然是 18 版本。

# c# - 在单元测试中保持值

> ID：13057040
> 
> 赞同：7
> 
> 时间：2012-10-24T20:19:06.723
> 
> 标签：c#, unit-testing

我有一个问题要问你们。我有 2 个单元测试正在调用 webservices。一个单元测试返回的值应该用于另一种单元测试方法

例子

```
namespace TestProject1
{
    public class UnitTest1
    {
        String TID = string.empty;

        public void test1
        {
           //calling webservices and code

           Assert.AreNotEqual(HoID, hID);
           TID = hID;
        }

        public void test2
        {
           //calling webservices and code            
           string HID = TID  // I need the TID value from the Above testcase here

           Assert.AreNotEqual(HID, hID);            
        }
    }
} 
```

我如何在一个单元测试中存储一个值并在另一个单元测试中使用该值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T20:25:47.253

一般来说，你不应该这样写你的测试。你不能确保你的测试会以任何特定的顺序运行，所以没有很好的方法来做到这一点。

而是使测试独立，但将公共部分重构为它自己的（非测试）方法，您可以将其作为其他测试的一部分调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T20:27:42.183

不要重用任何值。运行测试的顺序通常是随机的（最常见的运行程序，如 NUnit 和 Resharper 的运行测试以随机顺序运行，有些甚至可能并行运行）。相反，只需在第二次测试中再次调用 Web 服务（即使这意味着有*2 个*Web 服务调用）并检索您需要的值。

每个测试（无论是单元测试还是集成测试）都应该有所有可用的数据/依赖项来运行。您永远不应该依赖其他测试来设置环境/数据，因为这不是它们的目的。

**孤立地**考虑你的测试——每个单独的测试都是一个独立的存在，它设置、执行和清理所有必要的东西来练习特定的场景。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T20:38:25.267

下面是一个示例，按照 Oleksi 的大纲，你可以如何组织这个

```
String TID = string.empty;

[TestFixtureSetUp]
public void Given() {
  //calling webservices and code
  TID = hID;
  //calling webservices and code
}

[Test]
public void assertions_call_1() {
   ...
}

public void assertions_on_call_2() {
   if (string.IsNullOrEmpty(TID))
     Assert.Inconclusive("Prerequisites for test not met");
   ...
} 
```

# c# - 模块运算符覆盖

> ID：13057043
> 
> 赞同：1
> 
> 时间：2012-10-24T20:19:33.233
> 
> 标签：c#, module, operators, complex-numbers

我有一个`struct`复数。我希望能够运行类似的东西：

```
Complex a = new Complex( 3, 5 );
Console.WriteLine("|a| = {0}", |a|); 
```

`|a|`可以创建吗？如果是，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T20:23:16.520

[可重载运算符（C# 编程指南）](http://msdn.microsoft.com/en-us/library/8edha89s%28v=vs.110%29.aspx)列出了以下可重载运算符：

> C# 允许用户定义类型通过使用 operator 关键字定义静态成员函数来重载运算符。但是，并非所有运算符都可以重载，并且其他运算符有限制，如下表所示：
> 
> +, -, !, ~, ++, --, true, false
> 这些一元运算符可以重载。
> 
> +, -, *, /, %, &, |, ^, <<, >>
> 这些二元运算符可以重载。
> 
> ==, !=, <, >, <=, >=
> 比较运算符可以重载（但请参阅此表后面的注释）。
> 
> &&, ||
> 条件逻辑运算符不能重载，但使用 & 和 | 求值，可以重载。
> 
> []
> 数组索引运算符不能重载，但可以定义索引器。
> 
> (T)x
> 强制转换运算符不能重载，但您可以定义新的转换运算符（请参阅显式和隐式）。
> 
> +=, -=, *=, /=, %=, &=, |=, ^=, <<=, >>=
> 赋值运算符不能被重载，但是 +=，例如，使用 + 计算，它可以超载。
> 
> =、.、?:、??、->、=>、f(x)、as、checked、unchecked、default、delegate、is、new、sizeof、typeof
> 这些运算符不能重载。

您不能定义新的运算符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:34:39.993

有点，你不能使用 |a| 像上面一样的语法 - 但您可以覆盖 ToString() 方法以进行基本输出，或创建自定义属性以生成您希望输出的格式。例如，使用此类定义：

```
public class Complex
{
    public int Real { get; protected set; }
    public int Imag { get; protected set; }

    public Complex(int a, int b)
    {
        Real = a; Imag = b;
    }

    public override string ToString()
    {
        return string.Format("{0} + {1}i", Real, Imag);
    }

    public string AbsoluteValue
    {
        get { return string.Format("sqrt({0}² + {1}²)", Real, Imag); }
    }
} 
```

你可以做这样的事情：

```
static void Main(string[] args)
{
    Complex c = new Complex(2, 6);
    Console.WriteLine(c);
    Console.WriteLine(c.AbsoluteValue);
} 
```

要生成这样的输出：

```
2 + 6i
sqrt(2² + 6²) 
```

# grails - 无法访问控制器中的隐藏字段或参数

> ID：13057044
> 
> 赞同：0
> 
> 时间：2012-10-24T20:19:40.103
> 
> 标签：grails, gsp

我将参数以及客户 obj 从控制器传递给 gsp 页面。例如

```
render(view:"finish", params: params, model:[customer: customer]) 
```

finish.gsp 使用传递的参数和客户对象打印表单字段。例如`${params.name}`或`${customer.name}`。在选择完成按钮后的完成页面上，我想传递参数或客户对象值以保存客户对象。所以我在finish.gsp上设置隐藏字段。

```
 <g:actionSubmit action="save" value="Done" class="button1" params ="${customer}"/>
  <g:hiddenField name="kbc" value="${params}" />
</g:form>` 
```

我可以看到保存操作方法的值`println params.kbc`as

```
[contactBy:email, appointmentDate:Wed Oct 24 14:54:00 CDT 2012, appointmentDate_day:24, appointmentDate_hour:14, sentReminder:on, appointmentDate_month:10, emailAddress:jaimataji@jaimataji.com, lookingFor:0, appointmentDate_year:2012, appointmentDate_minute:54, _action_finish:Next, myGroup:0, _sentReminder:, description:test, name:abc, contactNo:7777777777, action:index, controller:customer]`</b> 
```

但是当我尝试访问`params.kbc.name`它时，我会说错误

```
No such property: name for class: java.lang.String 
```

我不知道我哪里错了。如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T20:27:43.893

我相信`params`对象不会尝试解析/转换传递数据的内部结构。它只是一个http请求参数。因此，您只能拥有一个`String`.

如果需要转换`String`为`Map`，则应编写自己的转换器。看来这不是你想要的。

或者，如果您需要`params.kbc.name`，您可以将其作为`<g:hiddenField name="kbc.name" value="${params.name}" />`Same 传递给其他字段。

# jquery - 遇到 Jquery 模态对话框无法正确加载 ui-overlay 的问题

> ID：13057046
> 
> 赞同：0
> 
> 时间：2012-10-24T20:19:51.043
> 
> 标签：jquery, overlay, modal-dialog

因此，测试站点位于[http://kinnill.com/dev/eisatech](http://kinnill.com/dev/eisatech)，这听起来非常尴尬，但是从“关于”和“联系”链接打开了两个单独的模式对话框窗口。“关于”对话框可以很好地打开和关闭，但“联系人”对话框仅在“关于”未加载时才加载模式覆盖。我在 firebug 中查看了该站点，似乎如果您尝试第二次加载“联系人”对话框，则永远不会创建 .ui-overlay div。

javascript调用是：

```
<script type="text/javascript">
$(function() {

    $( "#dialog-form" ).dialog({
        autoOpen: false,
        height: 420,
        width: 661,
        modal: true
    });

    $( ".contact" )
        .click(function() {
            $( "#dialog-form" ).dialog( "open" );
        });

    $( "#dialog-about" ).dialog({
        autoOpen: false,
        height: 420,
        width: 661,
        modal: true
    });

    $( ".about" )
        .click(function() {
            $( "#dialog-about" ).dialog( "open" );
        }); 

    $(".contact")
        .click(function() {
            $("#dialog-about").dialog("close");
        });

});
</script> 
```

#dialog-form 是“联系”对话框，#dialog-about 是“关于”对话框。额外的“关闭”调用是因为“关于”对话框中有一个链接可以打开“联系人”对话框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T20:27:54.893

我会建议一种更好的方法来创建和关闭 jquery 对话框。即使我在同一页面上使用更多对话框时也遇到了同样的问题，但我最终以这种方式解决了：

```
$( ".about" ).click(function() {
 $("<div />").dialog({
  open: function()
  {
    $(this).html( $( "#dialog-about" ).html());
  },
  height: 420,
  width: 661,
  modal: true,
  close:function()
  {
    $(this).dialog('destroy').remove();
  }
 });
}); 

$( ".contact" ).click(function() {
 $("<div />").dialog({
  open: function()
  {
    $(this).html( $( "#dialog-form" ).html());
  },
  height: 420,
  width: 661,
  modal: true,
  close:function()
  {
    $(this).dialog('destroy').remove();
  }
 });
}); 
```

只需即时创建对话框，当您关闭它们时，它们会完全删除而不会发生冲突。

# jquery - JQuery 选项卡的表面不是完全可点击的

> ID：13057050
> 
> 赞同：0
> 
> 时间：2012-10-24T20:20:03.790
> 
> 标签：jquery, tabs

我有一组工作正常的 JQuery 选项卡——这些选项卡连接到 div 和所有内容。唯一的问题是，除非我将鼠标放在选项卡的文本上，否则它不会将其识别为链接，而只是作为“li”的一部分。令人困惑的是，几乎我见过的每个示例都没有任何我可以轻易看到的额外内容。我几乎可以肯定，我错过了一件愚蠢的事情，但我不知道它是什么。还是我需要添加一些额外的东西来制作整个“li”？

这是代码：

```
<style type="text/css">
    body{
        font-family: Verdana, Arial, Helvetica, sans-serif;
        font-size:75%;
    }
    .tabs ul{
        list-style:none;
        padding:0px;
        font-size:14px;
    }
    .tabs li{
        float:left;
        padding:.5em 0em;
        margin:0px .5em 0px 0px;
        width:120px;
        background-color:#ccc;
        text-align:center;
    }
    .tabs li a{
        color:#666;
        text-decoration:none;
    }
    .tabs li.ui-tabs-selected{
        background-color:#999;
    }
    .tabs li.ui-tabs-selected a{
        color:#000;
    }
    .tabs div{
        clear:both;
        background-color:#f0f0f0;
        margin:0px;
        padding:.5em 1em;
    }
    .ui-tabs-hide{
        display:none;
    }
</style>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $(".tabs").tabs();
});
</script>
</head>

<body>
<div class="tabs">
    <ul>
        <li><a href="#tab1">First Tab</a></li>
        <li><a href="#tab2">Second Tab</a></li>
        <li><a href="#tab3">Third Tab</a></li>
    </ul>
    <div id="tab1"><p>This is the first tab.</p></div>
    <div id="tab2"><p>This is the second tab.</p></div>
    <div id="tab3"><p>This is the third tab.</p></div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T20:22:16.317

添加`display:block`到您的标签或链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T20:22:29.267

您必须更改 的`display`属性`a`，默认情况下它是，`inline`但您可以将其更改为`inline-block`

```
.tabs li a{
    color:#666;
    text-decoration:none;
    display:inline-block;  
} 
```

而且您可能还需要调整高度`width`和`height`.

[**一个例子**](http://jsfiddle.net/G4pWn/1/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T20:26:35.737

`float:left`从您的`.tabs li`规则中删除并改为`width:120px;`使用`.tabs li a`。

**[jsFiddle 示例](http://jsfiddle.net/j08691/tFKFJ/)**

# python - 使用 Python-dbus 在 dbus 上发射信号

> ID：13057051
> 
> 赞同：2
> 
> 时间：2012-10-24T20:20:06.630
> 
> 标签：python, dbus, xfce

我希望能够首先调用一个简单的脚本来启用或禁用我的上网本的外部监视器。我正在以 XFCE 作为桌面运行 Fedora 17。我看到我应该能够使用 python 和 python-dbus 来打开和关闭活动切换。我的问题是我不知道如何发出信号以激活新设置。不幸的是，Python 不是我经常使用的语言。我的代码是：

```
import dbus
item = 'org.xfce.Xfconf'
path = '/org/xfce/Xfconf'
channel = 'displays'
base = '/'
setting = '/Default/VGA1/Active'

bus = dbus.SessionBus()
remote_object = bus.get_object(item, path)
remote_interface = dbus.Interface(remote_object, "org.xfce.Xfconf")

if remote_interface.GetProperty(channel, setting):
  remote_interface.SetProperty(channel, setting, '0')
  remote_object.PropertyChanged(channel, setting, '0')
else:
  remote_interface.SetProperty(channel, setting, '1')
  remote_object.PropertyChanged(channel, setting, '0') 
```

它失败并被踢出：

```
Traceback (most recent call last):   File "./vgaToggle", line 31, in <module>
remote_object.PropertyChanged(channel, setting, '0')   
File "/usr/lib/python2.7/site-packages/dbus/proxies.py", line 140, in __call__
**keywords)   
File "/usr/lib/python2.7/site-packages/dbus/connection.py", line 630, in call_blocking
message, timeout) dbus.exceptions.DBusException: 
org.freedesktop.DBus.Error.UnknownMethod: Method "PropertyChanged"
with signature "sss" on interface "(null)" doesn't exist 
```

我花了一些时间进行搜索，但没有找到很多类似的 Python 示例。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T06:58:25.430

`PropertyChanged`是信号，不是方法。您正在与之通信的服务负责发出信号。在这种情况下，`PropertyChanged`只要相应对象或接口上的属性值发生更改，就应该隐式触发。

这应该在您调用时隐式发生`remote_interface.SetProperty(...)`，并且您不需要像方法一样显式地“调用”信号。

如果您对接收信号感兴趣，您将需要设置一个 glib 主循环并在您的代理对象上调用[connect_to_signal](http://dbus.freedesktop.org/doc/dbus-python/doc/tutorial.html#receiving-signals-from-a-proxy-object)，并传递一个回调方法来调用。

# c# - 如果可能的话，如何传入 C# 属性以像方法一样使用？

> ID：13057055
> 
> 赞同：1
> 
> 时间：2012-10-24T20:20:31.980
> 
> 标签：c#

我知道 Func<> 用于传递一个方法，该方法具有要在另一个方法中使用的返回值。我知道 Action<> 用于传递一个没有返回值的方法，以便在另一个方法中使用。有没有办法传递一个属性，所以它的 get/set 可以在另一个方法中使用？

例如，这是一个使用 Func<> 的方法：

```
public bool RangeCheck (int minVal, int maxVal, Func<< int, int >> someMethod)  
{  
    bool retval = true;  
    try  
    {  
        for (int count = min; count <= max; count++)  
        {  
            int hello = someMethod(count);  
        }  
    }  
    catch  
    {  
        retval = false;  
    }  
    return retval;  
} 
```

我正在寻找的是这样的：

```
public bool RangeCheck(int min, int max, Prop<< int >> someProperty)  
{  
    bool retval = true;  
    try  
    {  
        for (int count = min; count <= max; count++)  
        {  
            someProperty = count;  
        }  
    }  
    catch  
    {  
        retval = false;  
    }  
    return retval;  
} 
```

外面有这样的吗？我什么也找不到。这将非常有用。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T20:22:40.763

您可以使用 lambda 作为包装器吗？

```
MyClass myClass = new MyClass();

bool val = RangeCheck(0, 10, () => myClass.MyProperty); 
```

如果你想同时做两个，你会做两个 lambdas，一个用于 set，一个用于 get。

```
bool val = RangeCheck(0, 10, () => myClass.MyProperty, (y) => myClass.MyProperty = y); 
```

我的语法可能不正确，但我认为这给出了这个想法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T20:25:09.640

从来没听说过。您可以尝试使用反射并将对象与要获取其值的属性的相应 PropertyInfo 对象一起传递。然后调用 PropertyInfo 的 SetValue 函数为其分配一个值（当然，假设它是读/写的）。

```
 public void SetMyIntValue()
    {
        SetPropertyValue(this, this.GetType().GetProperty("MyInt"));
    }

    public int MyInt { get; set; }

    public void SetPropertyValue(object obj, PropertyInfo pInfo)
    {
        pInfo.SetValue(obj, 5);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T20:36:22.113

为什么不简单地把它当作一个`ref`论点呢？

```
public bool RangeCheck(int min, int max, ref int someProperty) 
```

您现在可以`someProperty`在方法内部设置 的值。

并这样称呼它：

```
RangeCheck(min, max, ref myProperty); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T20:44:42.350

你可以使用`Func`这样的`Func<int, T>`

```
void Main()
{
    var sc = new SimpleClass();
    var result = RangeCheck(0, 10, x => sc.Value = x );
    System.Console.WriteLine(result);
    System.Console.WriteLine(sc.Value);
}

public class SimpleClass
{
    public int Value { get; set; }
}

public bool RangeCheck<T>(int minVal, int maxVal, Func<int, T> someMethod)   
{   
    bool retval = true;   
    try   
    {   
        for (int count = minVal; count <= maxVal; count++)   
        {
            //someMethod(count); //is not a range check,
            //Did you mean
            someMethod(count - minValue);
        }   
    }   
    catch   
    {   
        retval = false;   
    }   
    return retval;   
} 
```

# git - 删除 Git Credential-osxkeychain

> ID：13057056
> 
> 赞同：4
> 
> 时间：2012-10-24T20:20:40.290
> 
> 标签：git, caching, terminal, installation

我在让 git 在我的 Mac OSX10.8.2 上运行时遇到了重大问题。我安装了 git，并按照[这里](https://help.github.com/articles/set-up-git)的教程进行操作。我按照步骤进行密码缓存，但现在每当我在终端输入“git”时，我都会得到以下语句：

```
Usage: git credential-osxkeychain <get|store|erase> 
```

当我运行另一个命令（如“git push”）时，它不会返回任何内容。

关于如何使它工作的任何想法？非常感谢所有帮助！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-09T18:46:52.183

[这里](https://stackoverflow.com/questions/16052602/disable-git-credential-osxkeychain)有一个更简单的答案

```
git config --global --edit 
```

进入该文件后，删除文件的 [helper] 部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T21:10:13.293

我自己也有这个问题。我已经删除了我当前安装的 git 并重新安装它。幸运的是，只需几分钟即可完成此操作。

去这里： http: [//git-scm.com/downloads](http://git-scm.com/downloads)

下载最新版本的 git。打开它，在里面你会看到一些文件。在文本编辑器中打开uninstall.sh。转到以下代码块：

```
if [ "$response" == "yes" ]; then
  sudo rm -rf /usr/local/git/
  sudo rm /etc/paths.d/git
  sudo rm /etc/manpaths.d/git
  sudo pkgutil --forget --pkgs=GitOSX\.Installer\.git[A-Za-z0-9]*\.[a-z]*.pkg
  echo "Uninstalled"
else
  echo "Aborted"
  exit 1
fi 
```

您需要在“if”语句中运行每个 sudo 命令，但您必须修改第一个命令，以便路径是安装 git 的位置。`which git`通过在终端中键入来找出这一点。从这里，您所要做的就是安装您下载的 git-whateverversion.pkg 文件（在与 uninstall.sh 文件相同的文件夹中）。安装它，你就可以开始了。[在https://help.github.com/articles/set-up-git](https://help.github.com/articles/set-up-git)再次关注用户名和电子邮件部分，但这次不要进行密码缓存 :)

# java - 向线程执行器添加更多信息？

> ID：13057060
> 
> 赞同：1
> 
> 时间：2012-10-24T20:20:55.147
> 
> 标签：java, multithreading, executorservice

`singleThreadedExecutor`可以在 Java 等中创建各种类型的线程执行器`fixedThreadedExecutor`。有什么方法可以添加一些东西，以便当我调用`getThreadName()`并`getThreadID()`在执行线程上时，我可以看到它来自哪个线程执行器？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:25:02.647

是的。您为这些工厂方法提供一个`ThreadFactory`实现。这是一个`Thread`由 a 组成的东西`Runnable`。因此，您可以在方法中做任何您喜欢的事情，例如设置其名称、优先级或守护程序状态——甚至使用自定义`Thread`子类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T20:25:05.520

如果您使用的是[guava](/questions/tagged/guava "显示标记为“番石榴”的问题")，这很简单：

```
final ThreadFactory threadFactory = new ThreadFactoryBuilder()
        .setNameFormat("Fancy-pool-%02d")
        .build();
Executors.newFixedThreadPool(10, threadFactory); 
```

如果你不是一个快乐的[guava](/questions/tagged/guava "显示标记为“番石榴”的问题")用户，你可以自己实现它：

```
final ThreadFactory threadFactory = new ThreadFactory() {
    final AtomicInteger id = new AtomicInteger();

    @Override
    public Thread newThread(Runnable r) {
        final Thread thread = new Thread(r);
        thread.setName("Fancy-pool-" + id.incrementAndGet());
        return thread;
    }
}; 
```

# 也可以看看：

*   [java中线程池的编号](https://stackoverflow.com/questions/13055951)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T20:25:27.030

如果您在提交的任务运行时获取线程的名称，那么我建议使用`ThreadGroup`. 您也可以使用 a `ThreadLocal`，但这听起来更像是 hack。

要使用它，`ThreadGroup`您需要将自己的注入`ThreadFactory`执行器。

```
final ThreadGroup threadGroup = new ThreadGroup("someThreadPoolName");
threadPool = Executors.newFixedThreadPool(10, new ThreadFactory() {
    public Thread newThread(Runnable r) {
        Thread thread = new Thread(threadGroup, r);
        return thread;
    }
}); 
```

然后一个线程可以做：

```
String myThreadPollName = Thread.currentThread().getThreadGroup().getName(); 
```

# php - mysql_fetch_array() 总是返回 null

> ID：13057062
> 
> 赞同：1
> 
> 时间：2012-10-24T20:20:57.093
> 
> 标签：php, mysql

我正在尝试从数据库中获取数据

```
$check_sql = 'SELECT * FROM table;
$check_result = mysql_query($check_sql);
echo $check_result;
$result = mysql_fetch_array($check_result); 
```

当我`echo $check_result`，它显示'Resource id 2'，我认为这意味着存在一个返回数组，但是当我使用时`mysql_fetch_array`，它会返回一个空值，我不知道为什么......
我发现不管是否存在resules，`echo $check_result`总是显示'Resource id#2'，这句话在mysql中是否意味着'no results'？有人可以帮忙吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:23:54.520

如果您在 mysql 查询中处理多行，则需要使用如下代码：

```
while ($row = mysql_fetch_array($check_result) )
{
   echo $row['ROW_NAME_HERE'];
} 
```

我想这就是你提到 mysql_fetch_array 函数的原因。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-24T20:22:53.837

`mysql_fetch_array()`返回一个数组。你一定要看看文档[http://php.net/mysql_fetch_array](http://php.net/mysql_fetch_array)

尝试`print_r($result);`

# c# - 替代 C# 中的动态变量名

> ID：13057065
> 
> 赞同：4
> 
> 时间：2012-10-24T20:21:08.533
> 
> 标签：c#, global-variables, instance-variables

我正在 NinjaTrader 中编写我的自定义指标，它具有基于 C# 构建的脚本语言。我想在不同的股票图表之间共享数据，但没有固有的方法可以这样做。每个指标都继承自一个指标类，当然每个图表都运行一个应用的任何指标的唯一实例。

例如，我希望能够将 IBM 的当前价格“发送”到 AAPL 图表。从概念上讲，在“发送”图表上，我需要能够执行以下操作：

静态双 IBM = 190.72;

但是，例如，当用户将图表代码从 IBM 更改为 DELL 时，我现在需要类似以下内容：

静态双 DELL = 9.25；

在我的“接收”图表上，我希望能够执行 Print(DELL); 之类的操作。

所以我的倾向是希望有一个根据用户为图表选择的股票代码动态分配的变量名称，但是我知道这在 C# 中是不可能的。那么，当存在一组实际上无限的潜在股票代码值时，存储和检索需要按股票代码名称索引的数据的替代方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T20:24:08.810

为什么不使用[字典](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)之类的东西？例如：

```
var stocks = new Dictionary<string, double>();
stocks.Add("appl", 1234.56);
Print(stocks["appl"]); 
```

您可以根据需要为其动态添加代码名称和值，按代码进行查找以及许多其他有用的功能。您想要单个变量而不是集合的任何原因？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:27:02.397

创建一个对象：

```
public class Stock {
  public string Ticker{get; set;}
  public double Price {get; set;}
} 
```

然后引用 List 中所有可能的股票：

```
 List<Stock> allStocks = new List<Stock>();
   allStocks.Add(new Stock() { Ticker = "Dell", Price = 9.25 });

   allStocks.ForEach(stock => Print(string.Format("{0} : {1}", stock.Ticker, stock.Price) ); 
```

# php - glob() 构建文件数组还是硬编码数组？速度是关键，但自动化很好

> ID：13057069
> 
> 赞同：0
> 
> 时间：2012-10-24T20:21:16.347
> 
> 标签：php, arrays, api, directory, scandir

抱歉标题不详，不知道给这个标题取什么:-)

我编写了一个 API，它从我的服务器上的目录加载所需的 javascript 库。目录具有特定的格式，唯一不同的是每个库目录中的文件名格式。

## 目录格式

> _js/_source/_library_name_here/file_name_here.js

例如

> /_js/_source/_fancybox/jQuery.lightbox-0.5.js

## 数组（当前是硬编码的）

目前，我将单独的库存储在一个数组（硬编码）中，如下所示：

```
$js_libraries = array(
    'fancybox'       => '/_js/_source/_fancybox/jQuery.lightbox-0.5.js',
    'something_else' => '/_js/_source/_something_else/jQuery.something.js'
); 
```

## 潜在的替代品

`$js_libraries`如果数组是通过扫描“_source”目录并像这样填充数组而自动构建的，那么这个 API 将会更加动态。我会这样做**（未经测试，只是一个例子！）**：

```
function gather_files($directory){
    $files_and_folders = scandir($directory);
    foreach($files_and_folders as $value){
        if($value != '.' && $value != '..'){
            if(is_dir($directory.'/'.$value)){
                listFolderFiles($dir.'/'.$ff);
            }
        }
    }
}

$js_libraries = gather_files(dirname(__FILE__)); 
```

***以上没有完成，只是想演示一下我的意思是根据目录的内容自动构建数组***

## 我的问题

很简单，这个 API 的关键是速度，因为它将打包/缩小（通过 PHP 即时）的 javascript 文件返回到 HTML 页面，因此不会有任何延迟，因为这会延迟页面的启动。**我想知道的是，当这个目录中有很多库时，自动方法会明显变慢吗？我应该坚持使用硬编码数组吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:41:45.923

### 始终进行基准测试

对于实际速度，列出深层文件系统层次结构可能比其他任何东西都更受 IO 约束，但请***不要相信我***，或者不要相信你自己的直觉，***始终***进行基准测试。

**至于优化**：速度不是唯一的选择，您可以选择[低内存使用，](http://framework.zend.com/issues/browse/ZF-11684?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel)并使用[GlobIterator 类](http://www.php.net/manual/en/class.globiterator.php)或组合其他[RecursiveDirectoryIterator](http://www.php.net/manual/en/class.recursivedirectoryiterator.php)，[FilterIterator](http://www.php.net/manual/en/class.filteriterator.php)和[RecursiveIteratorIterator](http://www.php.net/manual/en/class.recursiveiteratoriterator.php)的自定义子类来获取可以使用`foreach`并返回所需的对象文件，一次一个。

# php - 处理站点的子部分——Codeigniter

> ID：13057071
> 
> 赞同：0
> 
> 时间：2012-10-24T20:21:21.380
> 
> 标签：php, codeigniter, codeigniter-routing

我对 Codeigniter 和 MVC 还很陌生，我在找出实现这一目标的最佳方法时遇到了一些麻烦。

我需要构建一个应用程序，允许用户申请一些机构提供的各种程序。然而，这些机构都必须在应用程序中占有一席之地，但他们希望彼此独立——而不是为所有程序共享一个应用程序页面。例如，机构 1 希望网站的一部分仅查看并应用于他们的计划，而机构 2 希望网站的一部分仅适用于他们的计划。

实现这一目标的最佳方法是什么？我应该为每个机构创建一个单独的控制器吗？

例如`sitename.com/inst1/apply, sitename.com/inst2/apply`

但是，这些控制器中的每一个基本上都具有相同的创建/读取/更新/等功能。在这种情况下，最佳做法是什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:45:32.883

您可以创建文件夹以正确使用您的功能。这广泛用于 API。

例如。您可以拥有这样的文件夹结构。

```
- application/
    - controllers/
        - inst1/
            apply.php
        - inst2/
            apply.php 
```

这样，您将拥有类似的 URL 端点。

```
index.php/inst1/apply
index.php/inst2/apply 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T05:11:15.243

只需构建一个控制器，并制作一个**标志**来区分它们。在视图文件中，您可以检查此标志来决定天气以显示程序并应用或不应用。

您的**网址**将是这样的：

```
sitename.com/inst/1/apply, sitename.com/inst/2/apply 
```

注意：您也可以用文字更改网址中的数字；更好的**seo**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T20:33:02.257

我认为你是对的，你会为每个机构创建控制器，允许你改变你为每个机构提取的数据。视图可以共享，因为所有功能都在控制器/模型中，这是 MVC 最重要的方面之一，能够分离这些层并在不需要重复的情况下重用您需要的东西。如果您将页面设置为模板，您甚至可以提取不同的模板来提供特定于机构的视图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T22:29:10.903

为此，您可能希望使用相同的控制器，而是通过将您的函数传递给您可以在[此处](http://codeigniter.com/user_guide/general/controllers.html#passinguri)阅读的不同 uri 段来处理变化 。在我的 codeigniter 应用程序中，我喜欢在每个控制器或模型中保留特定的功能。所以它可能看起来像：

```
sitename.com/my_controller/my_function/my_argument 
```

控制器中的函数如下所示：

```
public function my_function($argument){
//stuff goes here
} 
```

您当然可以使用您的[路由文件](http://codeigniter.com/user_guide/general/routing.html)来使 url 看起来像您想要的那样。

# php - 无法重新声明类 Mysqli

> ID：13057074
> 
> 赞同：0
> 
> 时间：2012-10-24T20:21:38.747
> 
> 标签：php

嗨，我刚刚读完一本关于 PHP 的初学者书籍，我想开始创建自己的登录名。我没有走多远，我遇到了一个我无法修复的错误；似乎无法修复。

我有 3 个文件

```
 index.php

    session_start();
    require 'DB_ACCES/connect.php';

    if(isset($_POST['submit'])){
        $conn = new Mysqli();
    }

    constants.php

    define('DB_HOST', 'localhost');
    define('DB_USER' , 'root');
    define('DB_PWD' , '');

    connect.php

    require '../includes/constants.php';

    class Mysqli{

        private $conn;

        function __construct() {
            $this->conn = new mysqli(DB_HOST , DB_USER , DB_PWD) or die(mysqli_error());
        }
    } 
```

当我运行 index.php 时，我收到此错误：

```
Fatal error: Cannot redeclare class Mysqli in D:\Program Files\xampp\htdocs\MyWork\Blog\DB_ACCES\connect.php on line 4 
```

我在这里做错了什么，我该如何修复它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T20:24:34.873

该错误正是错误所指出的。

Mysqli 是一个现有的类，它是一个非常常见的 php 共享库的一部分`mysqli`。你不能重新声明它。

将您的班级名称更改为`MyMysqli`或其他内容。

```
class MyMysqli{

    private $conn;

    function __construct() {
        $this->conn = new mysqli(DB_HOST , DB_USER , DB_PWD) or die(mysqli_error());
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T20:29:55.443

Mysqli 已经存在于 php 中，因为 php 不区分大小写，所以 mysqli 它本身是保留的，并且不能用于任何拼写。

您将能够创建自己的扩展 mysqli 的类，因此它将基本上继承现有 mysqli 类的所有属性和方法

```
class MyMySQLi extends MySQLi 
{
    private $conn;

    function __construct() {
        $this->conn = parent::__construct(DB_HOST , DB_USER , DB_PWD) or die(mysqli_error());
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T20:25:55.127

您的 PHP 环境包括 mysqli，它是一个模块，可提供名为 mysqli 的类。只需将您的班级命名为其他名称。

# python - python教程中的Traceback NameError

> ID：13057076
> 
> 赞同：0
> 
> 时间：2012-10-24T20:21:57.963
> 
> 标签：python

我正在从[这里](http://www.swaroopch.com/notes/python_en-control_flow/)阅读在线 python 教程书。代码如下所示。当我执行代码时，我可以在其中输入文字，但它给了我下面的错误。代码有什么问题？

在相关说明中，如果您有更好的 Python 学习资源，请告诉我。我正在寻找一个在线并经常更新的（例如：railstutorial.org）。即使在本书的早期，我使用的资源也有很多错误。谢谢。

```
Enter something : programmig is fun
Traceback (most recent call last):
  File "break.py", line 5, in <module>
    s = input('Enter something : ')
  File "<string>", line 1, in <module>
NameError: name 'programmig' is not defined

#!/usr/bin/python
# Filename: break.py

while True:
    s = input('Enter something : ')
    if s == 'quit':
        break
    print('Length of the string is', len(s))
print('Done') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T20:24:26.207

这是python 3代码。似乎您正在使用 python 2 运行它。

运行`python --version`以检查您使用的是哪个版本的 python。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T20:25:25.970

`input()`没有得到一个字符串，所以它认为这`programmig`是一个变量。您可以在引号中键入所需的输入来解决此问题。
然而，更好的方法是使用`raw_input`，它返回一个字符串。
所以要么做`Enter something : 'programmig is fun'`，不推荐，要么做`s = raw_input('Enter something : ')` **推荐的方式**

造成混淆的原因是这本书可能是针对 python 3的，当您使用 python 2.x 时，它有一个不同`input`的，也有一个不同的 。`print`

# javascript - 如何在保持包装动态的同时制作粘性页脚？

> ID：13057077
> 
> 赞同：1
> 
> 时间：2012-10-24T20:21:57.550
> 
> 标签：javascript, jquery, css, sticky-footer

嗯，我压力很大。- 重要时刻。

我在网上搜索了很长时间，寻找一个整洁的粘性页脚。好吧，你猜怎么着。我发现的每个粘性页脚都告诉你使用`min-height:100%`. 这很烦人，因为它使您的包装器变得丑陋，如果内容小于窗口本身，则会删除动态高度。

所以问题是**如何在保持包装动态的同时制作粘性页脚？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:22:53.553

这是一个简洁的 javascript 小技巧，当内容小于窗口时，它可以让您制作一个留在窗口底部的粘性页脚。然后当内容高于窗口时，它会将页脚放在页面底部！

```
setInterval(function(){
    var wrapper_height = $('#wrapper').height();

var window_height = $(window).height();
    if(wrapper_height<window_height){
        $('footer').css({position:'absolute', bottom: '0px'});
    }else if(wrapper_height>window_height){
        alert('switched to mode 2');
         $('footer').css({position:'relative', bottom: '0px'});
    }
},10);

$('#wrapper').click(function(){

    $('#wrapper').append('<p>BLAH</p>');

}) 
```

​</p>

希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:31:13.317

通过保持包装器动态-我认为您的意思是页面/主要内容的包装器，而不是页脚？页脚高度是动态的还是整个页面的高度？

如果页脚是固定高度但主要内容包装可以变化，这是一个很好的资源： [http ://ryanfait.com/resources/footer-stick-to-bottom-of-page/](http://ryanfait.com/resources/footer-stick-to-bottom-of-page/)

# xcode - 在执行期间更改按钮和标签位置

> ID：13057081
> 
> 赞同：0
> 
> 时间：2012-10-24T20:22:00.120
> 
> 标签：xcode

我有点惊讶，因为我想在我的应用程序执行期间动态更改标签和文本字段。我的意思是根据图像大小，我需要更改标签和文本字段的位置。但是，它不起作用。我在主窗口文件（ex xib）中完成了所有创建。

然后，当我单击我的段选择器时，我正在这样做（并且我的字段和标签没有移动！？）：

```
 CGRect frame = [LHeight frame];
    frame.origin.x += 100;  // change the location
    frame.size.width += 100;  // change the size
    [LHeight setFrame:frame]; 
```

即使这种方法也不起作用：

```
LHeight.frame = CGRectMake(LHeight.frame.origin.x + 100, LHeight.frame.origin.y,     LHeight.frame.size.width + 100, LHeight.frame.size.height); 
```

XIB 文件中是否有任何要更改的参数？

提前感谢您的支持。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:26:56.347

```
LHeight.frame = CGRectMake(LHeight.frame.origin.x + 100, LHeight.frame.origin.y, LHeight.frame.size.width + 100, LHeight.frame.size.height); 
```

# amazon-ec2 - 无法从 EC2 实例连接到某些主机

> ID：13057082
> 
> 赞同：3
> 
> 时间：2012-10-24T20:21:59.807
> 
> 标签：amazon-ec2

我在 EC2 实例上运行 Ubuntu，并且某些非常特殊的主机无法回复 POST。例如，当我跑步时

`curl -v -L -I http://www.moneymanagement.com.au/`

从我的本地机器上，我立即收到回复。但是，从 EC2 运行的相同命令会超时。

> *   即将 connect() 到 www.moneymanagement.com.au 端口 80 (#0)
> *   正在尝试 61.14.142.150... 连接超时
> *   无法连接到主机
> *   关闭连接 #0 curl: (7) 无法连接到主机

然而，同样的 POST 到 Google 和其他人会立即返回。此外，绕过名称服务器可以避免这个问题：

`curl -v -L -I 141.101.124.53`

回复没有失败。什么可能导致这种行为？

编辑：这是跟踪路由结果。

```
traceroute to www.moneymanagement.com.au (61.14.142.150), 30 hops max, 60 byte packets
 1  10.96.72.3 (10.96.72.3)  0.345 ms  0.444 ms  0.556 ms
 2  ip-10-1-16-41.ec2.internal (10.1.16.41)  0.540 ms ip-10-1-28-41.ec2.internal (10.1.28.41)  0.390 ms ip-10-1-18-41.ec2.internal (10.1.18.41)  0.499 ms
 3  ip-10-1-29-14.ec2.internal (10.1.29.14)  0.667 ms ip-10-1-13-14.ec2.internal (10.1.13.14)  0.755 ms ip-10-1-29-14.ec2.internal (10.1.29.14)  0.865 ms
 4  216.182.224.120 (216.182.224.120)  2.872 ms 216.182.232.50 (216.182.232.50)  2.732 ms 216.182.224.211 (216.182.224.211)  2.580 ms
 5  100.64.2.195 (100.64.2.195)  1.680 ms 100.64.2.235 (100.64.2.235)  1.885 ms 100.64.2.247 (100.64.2.247)  2.098 ms
 6  100.64.0.50 (100.64.0.50)  364.049 ms 100.64.0.6 (100.64.0.6)  383.689 ms 100.64.0.24 (100.64.0.24)  403.813 ms
 7  * * *
 8  72.21.220.225 (72.21.220.225)  0.526 ms 72.21.222.148 (72.21.222.148)  1.056 ms 72.21.220.225 (72.21.220.225)  0.718 ms
 9  72.21.222.148 (72.21.222.148)  0.815 ms 205.251.245.64 (205.251.245.64)  0.839 ms 72.21.222.148 (72.21.222.148)  47.064 ms
10  gw3.lax1.asianetcom.net (206.223.115.40)  65.325 ms  65.297 ms  65.291 ms
11  te0-1-0-0-983.cr1.syd5.asianetcom.net (203.192.174.133)  202.111 ms  201.326 ms  201.273 ms
12  gi0-1-0.gw16.syd5.asianetcom.net (203.192.174.170)  201.375 ms te0-1-0-0-983.cr1.syd5.asianetcom.net (203.192.174.133)  200.736 ms gi0-1-0.gw16.syd5.asianetcom.net (203.192.174.170)  200.682 ms
13  gi0-1-0.gw16.syd5.asianetcom.net (203.192.174.170)  200.504 ms  200.922 ms *
14  * * *
15  * * *
16  * * *
17  * * *
18  * * *
19  * * *
20  * * *
21  * * *
22  * * *
23  * * *
24  * * *
25  * * *
26  * * *
27  * * *
28  * * *
29  * * *
30  * * * 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T21:59:59.973

错误是您应该关注的`connection timed out`地方（假设 IP 地址是您要连接的主机的正确地址。）为了建立 HTTP 连接，您需要：

*   一个 Web 服务器监听服务器上的 80 端口
*   与主机实例关联的安全组，允许来自您的 IP 的流量通过端口 80（更有可能来自所有 IP）

检查 Web 服务器是否正在实例上运行（登录并运行`ps -elf`并检查您的 Web 服务器进程（例如`apache`或`nginx`）。或检查 Web 服务器错误日志以确保它正确启动。除非您有一个时髦的配置，否则很可能监听 80 端口。

通过 AWS 控制台检查与实例关联的安全组。它与其他正在工作的实例相同吗？如果不是，很可能就是问题所在，或者如果这是唯一的实例，那么您需要允许端口 80 上的流量。

如果 IP 地址错误，请检查您的 DNS 设置（如果您在 AWS 上为您的域执行 DNS，请检查 Route 53），或与实例关联的任何弹性 IP 关联的 IP 地址。

# sql-server - 带有 SQL Server 2008 R2 数据库引擎的 SQL Server 2012 SSMS

> ID：13057083
> 
> 赞同：0
> 
> 时间：2012-10-24T20:22:01.337
> 
> 标签：sql-server, sql-server-2008-r2, sql-server-2012, ssms

我使用 SQL Server 2008 R2 作为数据库引擎。通过我的 MSDN 订阅，我可以获得用于开发的 SQL Server 2012。由于我在 2012 SSMS 中发现了一些很酷的东西，所以我的问题是，如果我只使用 2012 SSMS 并保留 2008 R2 作为数据库引擎，那么脚本的生成或任何其他效果会有什么不同吗？

谢谢。

更新 1：哦，是的，我看到了这个页面：[SQL Server Database Engine Backward Compatibility](http://msdn.microsoft.com/en-us/library/ms143532.aspx)，但这并不是我想要的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T21:11:58.263

不，应该没有不良影响。

SSMS 2012 应生成与正在使用的数据库版本兼容的脚本。

# php - 如何从 ajax.done() 获取数据？

> ID：13057092
> 
> 赞同：5
> 
> 时间：2012-10-24T20:22:37.893
> 
> 标签：php, javascript, jquery, html, ajax

我有以下功能：

```
$.ajax({
    url: "../../getposts.php"
}).done(function(posts) { 
    var postsjson = $.parseJSON(posts);
}); 
```

如何`postsjson`在函数外部使用变量`.done()`，或者如何将其声明为全局变量？

我不能将它传递给另一个函数，因为我想稍后使用数组，而不是在 ajax 完成时使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T20:24:30.370

如果您只是在 ajax 调用之外定义变量：

```
var postsjson;

$.ajax({
    url: "../../getposts.php"
}).done(function(posts) { 
    postsjson = $.parseJSON(posts);
}); 
```

然后你可以在外面使用它。同样，如果您只是离开`var`，它将在全局范围内声明它，但不建议这样做。

正如 SLaks 所指出的，您将无法立即使用从 AJAX 调用中获得的数据，您必须等待`done`函数运行，然后才能将其初始化为任何有用的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T20:38:34.813

很酷的是，从 Ajax 函数返回的 Promise 可以以多种不同的方式使用，这里有一些：

```
var XHR = $.ajax({
    url: "../../getposts.php"
});

function somethingElse() {
    XHR.done(function(posts) { 
       var postsjson = $.parseJSON(posts);
    });
} 
```

--

```
function myAjax(url) {
    return $.ajax({
        url: url
    });
}

function doSomething(url) {
    var postsjson = myAjax(url).done(parsePosts);
}

function parsePosts() {
     return $.parseJSON(posts);
}

doSomething("../../getposts.php"); 
```

ETC...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T20:26:55.227

你需要在调用ajax之前声明一个变量。

简单示例：

```
var postsjson;

$.ajax({
    url: "../../getposts.php"
}).done(function(posts) { 
    postsjson = $.parseJSON(posts);
});

console.info(postsjson); // Use here for example 
```

# mysql - InnoDB 聚集复合索引的行为

> ID：13057095
> 
> 赞同：2
> 
> 时间：2012-10-24T20:22:43.587
> 
> 标签：mysql, performance, indexing, innodb, clustered-index

我们正在使用下表运行 MySQL/ISAM 数据库：

```
create table measurements (
  `tm_stamp` int(11) NOT NULL DEFAULT '0',
  `fk_channel` int(11) NOT NULL DEFAULT '0',
  `value` int(11) DEFAULT NULL,
  PRIMARY KEY (`tm_stamp`,`fk_channel`)
); 
```

-组合是唯一的`tm_stamp`，`fk_channel`因此是复合主键。现在，由于某些不相关的原因，数据库将迁移到 InnoDB 引擎。在谷歌搜索后，我发现密钥将决定磁盘上数据的物理顺序。目前 90% 的查询如下：

```
SELECT value FROM measurements
WHERE fk_channel=A AND tm_stamp>=B and tm_stamp<=C
ORDER BY tm_stamp ASC 
```

插入是 99% 的顺序`tm_stamp`，它是数据记录器网络的存储。该表有数百万行，但稳定增长。问题是

1.  存储引擎的唯一更改是否会导致任何显着的性能变化，更好还是更差？
2.  索引中列的顺序对于最流行的 SELECT 是否重要？[这个博客](http://www.cumps.be/nl/blog/read/efficient-compound-index-usage)提出了一些类似的建议。
3.  由于聚集索引的性质，我们是否可以省略 ORDER BY 子句并获得一些性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T23:17:28.230

**编辑 1**：

似乎将主键从

```
PRIMARY KEY (`tm_stamp`,`fk_channel`) 
```

至

```
PRIMARY KEY (`fk_channel`,`tm_stamp`) 
```

对于 MyISAM 和 InnoDB 来说总是有意义的。请参阅[http://sqlfiddle.com/#!2/0aa08/1](http://sqlfiddle.com/#!2/0aa08/1)以证明确实如此。

原答案：

判断是否改变

```
PRIMARY KEY (`tm_stamp`,`fk_channel`) 
```

至

```
PRIMARY KEY (`fk_channel`,`tm_stamp`) 
```

会提高查询的性能，您需要确定哪个字段的值基数更高（哪个字段的值更多样化）。跑步

```
SELECT COUNT(DISTINCT tm_stamp), COUNT(DISTINCT fk_channel) FROM measurements; 
```

会给你列的基数。

因此，要正确回答您的问题，我们首先需要知道： 和 之间的常见值范围是`B`什么`C`？60？3,600？86,400？更多的？

例如，假设

```
SELECT COUNT(DISTINCT tm_stamp), COUNT(DISTINCT fk_channel) FROM measurements; 
```

返回 32,768 和 256。32,768 除以 256 是 128。这告诉我们`tm_stamp`对于 的每个值都有 128 个唯一值`fk_channel`。

所以如果和之间的差值`B`通常`C`小于128，那么就留下`tm_stamp`作为主键中的第一个字段。如果 128 或更大，则创建`fk_channel`第一个字段。

另一个问题：是否`fk_channel`需要是一个`INT`（40 亿个唯一值，其中一半是负数）？如果没有，那么更改`fk_channel`为`TINYINT UNSIGNED`（如果您有 256 个唯一值）或`SMALLINT UNSIGNED`（65536 个唯一值）将节省大量时间和空间。

例如，假设您有 256 个最大可能`fk_channel`值和 65,536 个可能值`value`，那么您可以通过以下方式更改架构：

```
create table measurements_new (
  tm_stamp INT UNSIGNED NOT NULL DEFAULT '0',
  fk_channel TINYINT UNSIGNED NOT NULL DEFAULT '0', -- remove UNSIGNED if values can be negative
  value SMALLINT UNSIGNED DEFAULT NULL, -- remove UNSIGNED if values can be negative
  PRIMARY KEY (tm_stamp,fk_channel)
) ENGINE=InnoDB
SELECT
  tm_stamp,
  fk_channel,
  value
FROM
  measurements
ORDER BY
  tm_stamp,
  fk_channel;

RENAME TABLE measurements TO measurements_old, measurements_new TO measurements; 
```

这会将现有数据按顺序存储在新表中`PRIMARY KEY`，这将在一定程度上提高性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T20:36:32.083

盯着查询

```
SELECT value FROM measurements
WHERE fk_channel=A AND tm_stamp>=B and tm_stamp<=C
ORDER BY tm_stamp ASC 
```

您的静态值为`fk_channel`，而移动的有序值为`tm_stamp`。这解决了您的第二个问题，这似乎是查询需求的核心。

`PRIMARY KEY`如果列颠倒，你会更好

```
create table measurements (
  `tm_stamp` int(11) NOT NULL DEFAULT '0',
  `fk_channel` int(11) NOT NULL DEFAULT '0',
  `value` int(11) DEFAULT NULL,
  PRIMARY KEY (`fk_channel`,`tm_stamp`)
); 
```

至于第一个问题，存储引擎决定了缓存的内容。

*   MyISAM 仅在 Key Cache 中缓存索引页（大小为[**key_buffer_size**](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_key_buffer_size)）
*   InnoDB 在缓冲池中缓存数据和索引（大小为[**innodb_buffer_pool_size**](http://dev.mysql.com/doc/refman/5.5/en/innodb-parameters.html#sysvar_innodb_buffer_pool_size)）
*   [我在 DBA StackExchange 上写过这个](https://dba.stackexchange.com/a/2194/877)

如果您仍然使用 MyISAM，您可以更改主键以包含该`value`列：

```
create table measurements (
  `tm_stamp` int(11) NOT NULL DEFAULT '0',
  `fk_channel` int(11) NOT NULL DEFAULT '0',
  `value` int(11) DEFAULT NULL,
  PRIMARY KEY (`fk_channel`,`tm_stamp`,`value`)
) ENGINE=MyISAM; 
```

这样，您的查询的数据检索最多严格来自一个文件，即 MyISAM 表的 .MYI。该表根本不需要阅读。

如果您切换到 InnoDB, `fk_channel`,`tm_stamp`会两次加载到 RAM中

*   一次来自 InnoDB 数据页面
*   一次来自 InnoDB 索引页面

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T20:29:19.857

`WHERE`子句中参数的顺序在这里无关紧要，优化器将选择最佳键选项（通常是对索引字段的直接比较，而不是 > 或 < 比较）。对于您的初始示例，最好的选择是`tm_stamp`<> 比较，它不是直接的相等检查，因此低于标准。

但是，聚集键的顺序确实很重要....如果确切的比较总是在 fk_channel 列上，我会将 PK 更改为：

```
 PRIMARY KEY (`fk_channel`,`tm_stamp`) 
```

现在你有了一个索引，它可以从`fk_channel=A`你的 where 子句中受益。

此外，虽然存储引擎在某种程度上发挥了作用，但我认为这里的问题不在 innodb 和 myisam 之间。

最后，我认为该`ORDER BY`子句对您的问题没有太大影响，这是在查询后完成的。分组可能会影响您的表现....

# python - Virtualenv 无法正常工作

> ID：13057103
> 
> 赞同：1
> 
> 时间：2012-10-24T20:23:34.850
> 
> 标签：python, django, virtualenv, pip

我已经用这个命令构建了我的虚拟环境：

```
virtualenv env --distribute --no-site-packages 
```

然后我用 pip 将几个模块（django 等）安装到 env 中，问题是当我想在第二台机器上运行代码时它不起作用，这是我所做的：

```
visgean@rewitaqia:~/scripty/project_name$ source ./env/bin/activate
(env)visgean@rewitaqia:~/scripty/project_name$ python
Python 2.7.1+ (r271:86832, Sep 27 2012, 21:12:17) 
[GCC 4.5.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import django
>>> django.__file__
'/home/visgean/scripty/project_name/env/lib/python2.7/site-packages/django/__init__.pyc' 
```

但是当我想在第二台机器上运行它时：

```
(env)user@debian:~/project_name$ python
Python 2.6.6 (r266:84292, Dec 27 2010, 00:02:40) 
[GCC 4.4.5] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import django
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named django
>>> 
```

我野错误出现！第一台机器是ubuntu，第二台机器是ubuntu。/home/user/project_name/env/lib/python2.7 中似乎有一些断开的链接，这是问题吗？如果是这样，我应该如何防止它/修复它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T20:38:29.247

如果您只是将 virtualenv 复制到第二台机器，您可能会遇到一些问题。从 virtualenv 站点：

> 通常，环境与特定路径相关联。这意味着您无法移动环境或将其复制到另一台计算机。您可以使用以下命令修复环境以使其可重定位：
> 
> `$ virtualenv --relocatable ENV`
> 
> 这将使 setuptools 或分发创建的一些文件使用相对路径，并将所有脚本更改为使用 activate_this.py 而不是使用 Python 解释器的位置来选择环境。
> 
> 注意：您必须在将任何软件包安装到环境中后运行它。如果使环境可重定位，然后安装新软件包，则必须再次运行 virtualenv --relocatable。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:54:49.070

我刚刚注意到我在第二台机器上确实有错误的python版本-debian没有python2.7，安装2.7和pip for是解决方案

# php - 显示数字并用字母替换

> ID：13057105
> 
> 赞同：-6
> 
> 时间：2012-10-24T20:23:47.093
> 
> 标签：php

我需要一个 PHP 代码来显示从 1 到 10 的数字，数字 1 将是字母 A，数字 5 字母 B 和 9 字母 C，我用 FOR 指令做了它，但不是很好..

```
<?php
 for($i=1;$i<=10;$i++)
 {   
   if ($i==1)
   {
       echo 'A';
   }
  echo "number:" .$i."<br />";  

 }

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T20:38:26.407

`if`尝试制作一个数字到字母的映射，而不是一堆s。

```
$map = array(
    1 => 'A',
    5 => 'B',
    9 => 'C'
);
for($i=1; $i <= 10; $i++){
    // If the value is in the map, print the letter,
    // otherwise print the number
    echo array_key_exists($i, $map) ? $map[$i] : $i;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T20:35:59.017

几乎不可能理解你在问什么，但是......

```
for($i = 1; $i <= 10; $i++) {
    if($i == 1) {
        echo 'A';
    } elseif($i == 5) {
        echo 'B';
    } elseif($i == 9) {
        echo 'C';
    } else {
        echo $i;
    }
} 
```

您也可以`switch`为此使用语句。

或者，如果您计划进一步扩展，*关联数组*可能更适合您的需求：

```
$letters = array(
    1 => 'A',
    5 => 'B',
    9 => 'C'
);

for($i = 1; $i <= 10; $i++) {
    if(array_key_exists($i, $letters)) {
        echo $letters[$i];
    } else {
        echo $i;
    }
} 
```

# cmake - cmake未定义对函数的引用

> ID：13057107
> 
> 赞同：8
> 
> 时间：2012-10-24T20:23:54.050
> 
> 标签：cmake, ld, undefined-reference

下面的项目结构是一个简化的例子。我试图将其归结为最少的文件来重现我的问题。

```
.
├── CMakeLists.txt
├── subdir1
│   ├── CMakeLists.txt
│   └── subsubdir1
│       ├── CMakeLists.txt
│       ├── Example.cpp
│       └── Example.h
└── subdir2
    ├── CMakeLists.txt
    ├── main.cpp
    └── subsubdir1
        ├── CMakeLists.txt
        ├── ExampleCreator.cpp
        └── ExampleCreator.h 
```

### ./CMakeLists.txt

```
cmake_minimum_required(VERSION 2.8)
project(test)

macro(add_sources)
    file (RELATIVE_PATH _relPath "${CMAKE_SOURCE_DIR}" "${CMAKE_CURRENT_SOURCE_DIR}")
    foreach (_src ${ARGN})
        if (_relPath)
            list (APPEND SRCS "${_relPath}/${_src}")
        else()
            list (APPEND SRCS "${_src}")
        endif()
    endforeach()
    if (_relPath)
        # propagate SRCS to parent directory
        set (SRCS ${SRCS} PARENT_SCOPE)
    endif()
endmacro()

add_subdirectory(subdir1)
add_subdirectory(subdir2)

add_executable(test ${SRCS}) 
```

### subdir1/CMakeLists.txt

```
add_subdirectory(subsubdir1) 
```

### subdir1/subsubdir1/CMakeLists.txt

```
add_sources(Example.cpp) 
```

### subdir1/subsubdir1/Example.h

```
#ifndef EXAMPLE_H
#define EXAMPLE_H

class Example
{
public:
    Example();
    virtual ~Example();
};

#endif 
```

### subdir1/subsubdir1/Example.cpp

```
#include <stdio.h>
#include "Example.h"

Example::Example()
{
    printf("Inside Example constructor\n");
}

Example::~Example()
{
} 
```

### subdir2/CMakeLists.txt

```
add_subdirectory(subsubdir1)
add_sources(main.cpp) 
```

### subdir2/main.cpp

```
#include "subsubdir1/ExampleCreator.h"

int main(int argc, char** argv)
{
    ExampleCreator creator;
    return 0;
} 
```

### subdir2/subsubdir1/CMakeLists.txt

```
add_sources(ExampleCreator.cpp) 
```

### subdir2/subsubdir1/ExampleCreator.h

```
#ifndef EXAMPLE_CREATOR_H
#define EXAMPLE_CREATOR_H

class ExampleCreator
{
public:
    ExampleCreator();
    virtual ~ExampleCreator();
};

#endif 
```

### subdir2/subsubdir1/ExampleCreator.cpp

```
#include "ExampleCreator.h"
#include "../../subdir1/subsubdir1/Example.h"

ExampleCreator::ExampleCreator()
{
    Example* ex1 = new Example();
}

ExampleCreator::~ExampleCreator()
{
} 
```

我希望这是对 CMake 如何处理依赖项的理解非常简单。这编译没有错误，但在链接期间失败。下面的`make`输出显示它`Example.cpp`甚至没有编译，我不明白为什么。

```
user>:~/src/test/build$ make
Scanning dependencies of target test
[ 50%] Building CXX object CMakeFiles/test.dir/subdir2/subsubdir1/ExampleCreator.cpp.o
[100%] Building CXX object CMakeFiles/test.dir/subdir2/main.cpp.o
Linking CXX executable test
CMakeFiles/test.dir/subdir2/subsubdir1/ExampleCreator.cpp.o: In function `ExampleCreator::ExampleCreator()':
ExampleCreator.cpp:(.text+0x2b): undefined reference to `Example::Example()'
collect2: ld returned 1 exit status
make[2]: *** [test] Error 1
make[1]: *** [CMakeFiles/test.dir/all] Error 2
make: *** [all] Error 2 
```

据我所知，所有源都附加到`SRCS`根文件中的变量中。`CMakeLists.txt`那么，为什么不`Example.cpp`编译呢？或链接？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T20:33:25.953

该目录`subdir1`不会生成二进制文件。添加这个：

```
project(Example)
add_library(Example Example.cpp) 
```

而不是你的`add_sources`. 在此之后，您需要告诉使用它链接它的项目：

```
TARGET_LINK_LIBRARIES(subdir2 Example) 
```

如果您的名字不同，请记录下这些命令的功能。

# python - 使用自定义管道进行交叉验证 scikit-learn

> ID：13057113
> 
> 赞同：2
> 
> 时间：2012-10-24T20:24:11.663
> 
> 标签：python, machine-learning, scikit-learn

我想使用 GridSearchCV 来确定分类器的参数，并且使用管道似乎是一个不错的选择。

该应用程序将用于使用词袋特征的图像分类，但问题是存在不同的逻辑管道，具体取决于使用的是训练示例还是测试示例。

对于*每个*训练集，必须运行 KMeans 以生成将用于测试的词汇表，但对于测试数据，不运行 KMeans 过程。

我看不出如何为管道指定这种行为差异。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T20:53:42.947

您可能需要从`KMeans`该类派生并覆盖以下方法以使用您的词汇逻辑：

*   `fit_transform`只会在火车数据上调用

*   `transform`将在测试数据上调用

也许类派生并不总是最好的选择。您还可以编写自己的转换器类来包装对嵌入式 KMeans 模型的调用，并提供该类在第一阶段所期望的`fit`// API `fit_transform`。`transform``Pipeline`

# deployment - 使用 Capistrano 部署到 Linode 的问题

> ID：13057114
> 
> 赞同：0
> 
> 时间：2012-10-24T20:24:14.413
> 
> 标签：deployment, capistrano, linode

我正在寻找有关使用 Capistrano 部署到 Linode 的任何指导。

一切似乎都很好，直到以下几点：

```
[example.com :: out] Password: Password:   ** [example.com :: out]  ** [example.com :: out] HEAD is now at dc70d86 Fixed bugs from Webmaster Tools.
    command finished in 9912ms
    copying the cached version to /home/deploy/example.com/releases/20121024201633   * executing "cp
-RPp /home/deploy/example.com/shared/cached-copy /home/deploy/example.com/releases/20121024201633 && (echo dc70d867e1b01427a776ef23b59ddd375d39a34b > /home/deploy/example.com/releases/20121024201633/REVISION)"
    servers: ["example.com"]
    [example.com] executing command  ** [out :: example.com] cp: cannot create directory `/home/deploy/example.com/releases/20121024201633'  ** [out :: example.com] : No such file or directory
    command finished in 661ms
*** [deploy:update_code] rolling back   * executing "rm -rf /home/deploy/example.com/releases/20121024201633; true"
    servers: ["example.com"]
    [example.com] executing command
    command finished in 623ms failed: "sh -c 'cp -RPp /home/deploy/example.com/shared/cached-copy /home/deploy/example.com/releases/20121024201633 && (echo dc70d867e1b01427a776ef23b59ddd375d39a34b > /home/deploy/example.com/releases/20121024201633/REVISION)'" on example.com 
```

关于为什么没有创建目录的任何线索或我能做些什么来修复它？

感谢所有答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T14:21:33.157

似乎此 /home/deploy/example.com/releases/ 路径中的某些目录不存在。

尝试运行`cap deploy:setup`并确保也在`mkdir -p /home/deploy/example.com/releases`服务器外壳上。

# html - 使用h1的正确方法？（关于文档大纲和SEO）

> ID：13057118
> 
> 赞同：9
> 
> 时间：2012-10-24T20:24:26.183
> 
> 标签：html, browser, search-engine, html-heading

我还在努力让自己熟悉 HTML5，而且有些东西让人感觉有点混乱......

我曾经读过[Jeremy Keith 的书](http://www.abookapart.com/products/html5-for-web-designers)和 HTML5 Doctor（通过[这个问题](https://stackoverflow.com/questions/7405282/how-to-properly-use-h1-in-html5)），其中说 HTML5 使得使用多个`h1`s 成为可能。在 HTML5 中，每个部分都可以有自己的标题元素，因此可以有多个`h1`. 我见过一个 Wordpress 主题框架，[“下划线”](http://themeshaper.com/2012/02/21/getting-started-with-the-underscores-theme/)，它似乎最充分地应用了这一点。

但是，这似乎会给旧版浏览器（尚不支持 HTML5）在定义站点结构/文档大纲时带来问题。此外，它给 SEO 带来了问题。

我偶然发现了[Matt Cutts（来自 Google）的视频](http://www.youtube.com/watch?v=GIn5qJKU8VM)并重新阅读了 Keith 的书，该书建议限制使用和使用传统的文档大纲（每页`h1`只使用一两个，然后是多个,等）。Matt Cutts 还暗示多重对于 SEO 来说并不是太好。`h1``h2``h3``h1`

然而，

*   我以前从未认真关注过网站结构/文档大纲。所以我永远不知道旧浏览器（HTML5 之前）是如何读取网站结构/文档大纲的。存在[HTML5 大纲](http://gsnedders.html5.org/outliner/)，但我找不到 HTML4 大纲。
*   Matt Cutts 的视频（关于 HTML5 和 SEO）发布于 2009 年。我不知道 Google 是否已经支持新的 HTML5 大纲文档方式。

所以我的问题是，如果我想：

*   支持旧浏览器（例如 Firefox 3.0 和 IE 6）以显示正确的站点结构/文档大纲
*   在SEO中取得好成绩

我应该使用哪一个：multiple `h1`s（在 HTML5 中完成的方式）还是传统方式？

这个 HTML5 之一（取自 HTML5 Doctor 的示例）：

```
<h1>My fantastic site</h1>
<section>
  <h1>About me</h1>
  <p>I am a man who lives a fascinating life. Oh the stories I could tell you...</p>
  <section>
    <h1>What I do for a living</h1>
    <p>I sell enterprise-managed ant farms.</p>
  </section>
</section>
<section>
  <h1>Contact</h1>
  <p>Shout my name and I will come to you.</p>
</section> 
```

还是传统的方式？

```
<h1>My fantastic site</h1>
  <h2>About me</h2>
  <p>I am a man who lives a fascinating life. Oh the stories I could tell you...</p>
    <h3>What I do for a living</h3>
    <p>I sell enterprise-managed ant farms.</p>
  <h2>Contact</h2>
  <p>Shout my name and I will come to you.</p> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T21:30:18.123

使用新格式。很多人会使用`h3`s 或`h2`s，这也很好。

事实上，他们将使用 html5 提供的`section`or`article`或`header`or`footer`元素，然后使用`h3`or`h4`作为该文档段的标题（因为担心 SEO 惩罚/遗留样式|布局怪癖）。

这也很好。

如果你再看一次 Cuts 的视频，他说要尽量`h1`减少使用——只有在真正有必要时才使用倍数。

在这一点上，这并没有真正改变。

谷歌不会因为你有多个而谋杀你。谷歌预计每一个都意味着内容发生了根本性的变化。

无论您是否在其中有切片 ( `section`/ `article`/etc) 元素，都是如此。

谷歌也已经到了正确爬取仅 AJAX 或依赖 JavaScript 的网站的地步，并拥有自己的内容丰富的元数据系统............它们足够复杂，可以解析`section`或`article`.

更多地担心内容的质量，如果你准备好接受它，他们用于搜索结果的谷歌特定元数据等等......让谷歌担心导航语义（如只要你很好地使用它们，并且没有做任何阴暗的事情）。

较小的爬虫，谁知道... ...但这是基于每个爬虫的，大多数人只需要关心谷歌、必应和雅虎，其他爬虫要么以谷歌为食，要么非常特定于域（例如，如果您出于某种原因想在选择加入的汽车租赁爬虫中排名靠前…………无论如何，此时您应该提供某种 XML/JSON 提要）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T17:03:30.397

死锁，您的第二个示例不包含任何分段元素。但是，您可以使用带有除`h1`. 我认为这就是你问题的重点：

`h1`在每个切片元素中

```
<section>
  <h1>…&lt;/h1>
  <section>
    <h1>…&lt;/h1>
  </section>
</section> 
```

**或**“计算”标题级别

```
<section>
  <h2>…&lt;/h2>
  <section>
    <h3>…&lt;/h3>
  </section>
</section> 
```

从语义/技术上讲，它们是相同的。

搜索引擎优化不应该是一个问题，因为“`h1`无处不在”将（并且已经）在整个网络上使用，并且主要的搜索引擎都知道这一点。如果他们想支持 HTML5，他们必须了解大纲算法。我敢打赌，他们的爬虫/API 已经正确计算了真实的标题级别，就像[HTML5 大纲](http://gsnedders.html5.org/outliner/)一样，例如。

您想要使用`h2`-`h6`作为分段元素标题的唯一原因是旧的可访问性软件，例如屏幕阅读器。他们通常提供一个大纲菜单，因此用户可以直接跳转到某个标题。因此，如果您总是使用`h1`，不了解 HTML5 的旧屏幕阅读器会将所有标题宣布为`h1`，因为它们不会计算正确的大纲级别。**但是**，例如 Jaws 13（当前版本的屏幕阅读器），只能`h1`在 IE、[AFAIR](http://www.accessibleculture.org/articles/2011/10/jaws-ie-and-headings-in-html5/)中正确地获取 HTML5 的“所有位置” ，并且如果您在 HTML5 页面中使用其他标题级别，它会感到困惑。这当然是一个错误，但这是一个很好的例子，坚持“旧方式”并不总是适用于更新的软件。

因此，无论哪种方式，您都*可能*会遇到问题。

在我看来，您应该坚持 HTML5 规范的建议，这将是：`h1`用于所有分段元素标题。因为这个规范是未来的用户代理、可访问性工具、搜索引擎和其他服务/软件用来构建他们的产品的。

但是，这当然取决于您的用例。如果您知道您的访问者统计数据，您应该使用它们为您的特殊情况做出正确的决定。例如，如果您的站点在未来很多年都不会存在，请使用*现在*最受支持的内容。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-10-24T20:28:28.733

最好的方法是使用 HTML5 并使用此链接使它们在旧浏览器中工作，因为 Google 已经为您的网站做好了更好的准备，并且如果您使用新标签，则考虑您使用新技术（以便您的网站更好）。

```
 <!--[if IE]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--> 
```

把它放在你网站的 head 部分，它适用于旧的 IE 版本

# java - ScheduledExecutorService.scheduleAtFixedRate - 可重入？

> ID：13057120
> 
> 赞同：0
> 
> 时间：2012-10-24T20:24:30.403
> 
> 标签：java, concurrency, executorservice

通过某个库，我发现自己在一个实例上同时调用了这个函数两次（使用 Executors.newSingleThreadScheduledExecutor 返回的实现）。传递给第二个调用的 Runnable 似乎没有立即执行，也没有在下一个计划的插槽上执行，并且没有引发异常。如果我序列化这两个调用（通过在第二个调用者的调度调用之前放置一个断点来非常粗略且无意地这样做），那么第二个可运行对象将毫无问题地执行。

我是这个界面的新手，但这些调度功能似乎并不是为了可重入而设计的。但是我在描述这里应该发生什么的各种文档中找不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T23:09:29.593

好吧，小测试用例不会重现问题，所以我没有理由相信这个函数是不可重入的。真正解决问题的是从请求时间到服务器启动的所有这些。还有一些其他迹象，比如我在 OP 中提到的断点临时修复，这表明我的堆栈中某处存在一些可怕的时间问题。

# ms-access - MS-access INSERT INTO 变量

> ID：13057122
> 
> 赞同：2
> 
> 时间：2012-10-24T20:24:34.443
> 
> 标签：ms-access

我必须制作一个可以跟踪 之后的字段的审计跟踪`INSERT INTO`，但是，我无法获取“值”中的表达式表示的任何变量进入字段，只有`VALUES`. 例如，两个带有数值的条目给了我数值，其他的给了我一个字符串，例如`Form.RecordSource = clientName`

```
db.Execute "INSERT INTO tblAudit ([RecordID], [AuditWho], [AuditWhen], [AuditWhat],     [AuditFrom], [AuditTo]) VALUES ('1', '2', 'Now()', 'Form.RecordSource = clientName' , ' Me.ClientName.Value ', '  Me.clientNameTextBox.Value  ')" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T20:35:48.627

至少你需要做这样的事情：

```
Dim SQL as string

SQL = "INSERT INTO tblAudit ([RecordID], [AuditWho], [AuditWhen], [AuditWhat],     [AuditFrom], [AuditTo]) VALUES ('1', '2','" & Now() & "', 'ClientName' , '" & Me.ClientName.Value & "', '" & Me.clientNameTextBox.Value & "')"

db.Execute SQL 
```

为了更“健壮”，您应该在尝试执行插入之前为`AuditFrom`和`AuditTo`值声明变量并验证输入的数据是否“正常”：

```
Dim SQL as string
dim strAuditFrom as string
Dim strAuditTo As String

strAuditFrom = Me.ClientName.Value & ""
strAuditTo = Me.ClientNameTextBox.Value & ""

if strAuditTo = vbNullString then
  'Alert the user or throw an error perhaps?
end if

sql = "INSERT INTO tblAudit ([RecordID], [AuditWho], [AuditWhen], [AuditWhat],   [AuditFrom], [AuditTo]) VALUES ('1', '2','" & Now() & "', 'ClientName' , '" &strAuditFrom & "', '" & strAuditTo & "')"

db.Execute sql 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T20:38:49.810

您正在使用单个 qoutes 定义要插入的文本。要从控件获取值并将其包含在查询中，您需要使用双引号对字符串进行转义，将字符串与与符号连接，找到控件的值，然后使用与符号和双引号继续字符串。例如：

```
db.Execute "INSERT INTO tblOne (Field1, Field2) VALUES ('literal text','" & ctlSomething & "')" 
```

# c++ - 依赖倒置和普遍依赖

> ID：13057127
> 
> 赞同：5
> 
> 时间：2012-10-24T20:24:53.553
> 
> 标签：c++, dependency-injection, inversion-of-control

我正在尝试进行依赖反转，或者至少了解如何应用它，但我目前遇到的问题是如何处理普遍存在的依赖关系。典型的例子是跟踪日志，但在我的应用程序中，我有许多服务，如果不是所有代码都依赖于这些服务（跟踪日志、字符串操作、用户消息日志等）。

对此的解决方案似乎都不是特别可口：

*   使用构造函数依赖注入意味着大多数构造函数将有几个、许多标准注入的依赖项，因为大多数类都明确需要这些依赖项（它们不仅仅是将它们传递给它们构造的对象）。
*   服务定位器模式只是将依赖项驱动到地下，将它们从构造函数中删除，但隐藏它们，因此甚至不需要明确的依赖项
*   单例服务是单例，也可以用来隐藏依赖项
*   将所有这些公共服务集中到一个 CommonServices 接口中并将其注入 a) 违反了德米特法则 b) 实际上只是服务定位器的另一个名称，尽管它是一个特定的而不是通用的。

有没有人对如何构建这些类型的依赖关系有任何其他建议，或者实际上有任何上述解决方案的经验？

请注意，我没有考虑特定的 DI 框架，实际上我们正在使用 C++ 进行编程，并且会手动进行任何注入（如果确实注入了依赖项）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-22T16:57:06.387

```
class Base {
 public:
  void doX() {
    doA();
    doB();
  }

  virtual void doA() {/*does A*/}
  virtual void doB() {/*does B*/}
};

class LoggedBase public : Base {
 public:
  LoggedBase(Logger& logger) : l(logger) {}
  virtual void doA() {l.log("start A"); Base::doA(); l.log("Stop A");}
  virtual void doB() {l.log("start B"); Base::doB(); l.log("Stop B");}
 private:
  Logger& l;
}; 
```

现在您可以使用了解记录器的抽象工厂来创建 LoggedBase。没有其他人需要了解记录器，也不需要了解 LoggedBase。

```
class BaseFactory {
 public:
  virtual Base& makeBase() = 0;
};

class BaseFactoryImp public : BaseFactory {
 public:
  BaseFactoryImp(Logger& logger) : l(logger) {}
  virtual Base& makeBase() {return *(new LoggedBase(l));}
}; 
```

工厂实现保存在一个全局变量中：

```
BaseFactory* baseFactory; 
```

并且被'main'或一些接近main的函数初始化为BaseFactoryImp的一个实例。只有那个函数知道 BaseFactoryImp 和 LoggedBase。其他所有人都对他们一无所知。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T14:25:45.093

> 服务定位器模式只是将依赖项驱动到地下，单例服务是单例，并且还用于隐藏依赖项

这是一个很好的观察。隐藏依赖项不会删除它们。相反，您应该解决一个类需要的依赖项的数量。

> 使用构造函数依赖注入意味着大多数构造函数将有几个、许多标准注入依赖项，因为大多数类都明确需要这些依赖项

如果是这种情况，您可能违反了[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)。换句话说，那些类可能太大了，做的太多了。由于您正在谈论日志记录和跟踪，因此您应该问问自己是否[没有记录太多](https://stackoverflow.com/a/9915056/264697)。但总的来说，日志记录和跟踪是横切关注点，您不必将它们添加到系统中的许多类中。如果您正确地应用[SOLID](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)原则，这个问题就会消失（如此处所述[）](https://stackoverflow.com/a/9915056/264697)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-17T18:33:30.177

依赖倒置原则是 SOLID 原则的一部分，并且是促进更高级别算法的可测试性和重用的重要原则。

背景：正如鲍勃叔叔的网页所指出的，依赖倒置是关于依赖于抽象，而不是依赖于具体。

实际上，发生的情况是，您的类直接实例化另一个类的某些地方需要更改，以便调用者可以指定内部类的实现。

例如，如果我有一个 Model 类，我不应该硬编码它以使用特定的数据库类。如果我这样做，我不能使用 Model 类来使用不同的数据库实现。如果您有不同的数据库提供程序，这可能很有用，或者您可能想用假数据库替换数据库提供程序以进行测试。

模型不会在 Database 类上执行“新”操作，而是简单地使用 Database 类实现的 IDatabase 接口。模型从不引用具体的数据库类。但是谁实例化了 Database 类呢？一种解决方案是构造函数注入（依赖注入的一部分）。对于此示例，模型类被赋予了一个新的构造函数，该构造函数接受一个要使用的 IDatabase 实例，而不是实例化一个实例本身。

这解决了Model不再引用具体Database类，通过IDatabase抽象来使用数据库的问题。但它引入了问题中提到的问题，即它违反了Demeter法则。也就是说，在这种情况下，Model 的调用者现在必须知道 IDatabase，而以前它不知道。该模型现在向其客户公开其如何完成工作的一些细节。

即使你对此没意见，还有一个问题似乎让很多人感到困惑，包括一些培训师。假设任何时候一个类，例如 Model，具体实例化另一个类，那么它就违反了依赖倒置原则，因此它是坏的。但在实践中，您不能遵循这些硬性规定。有时您需要使用具体的类。例如，如果你要抛出一个异常，你必须“更新它”（例如 throw new BadArgumentException(...)）。或者使用来自基本系统的类，例如字符串、字典等。

没有适用于所有情况的简单规则。您必须了解您要完成的工作是什么。如果您追求可测试性，那么 Model 类直接引用 Database 类这一事实本身就不是问题。问题在于 Model 类没有其他方法可以使用另一个 Database 类。您可以通过实现 Model 类来解决此问题，使其使用 IDatabase，并允许客户端指定 IDatabase 实现。如果客户未指定，则模型可以使用具体实现。

这类似于许多库的设计，包括 C++ 标准库。例如，查看声明 std::set 容器：

```
template < class T,                        // set::key_type/value_type
           class Compare = less<T>,        // set::key_compare/value_compare
           class Alloc = allocator<T> >    // set::allocator_type
           > class set; 
```

你可以看到它允许你指定一个比较器和一个分配器，但大多数时候，你采用默认值，尤其是分配器。STL 有很多这样的方面，特别是在 IO 库中，可以针对本地化、字节序、语言环境等增强流的详细方面。

除了可测试性之外，这还允许使用完全不同的算法内部使用的类的实现来重用更高级别的算法。

最后，回到我之前关于您不想反转依赖关系的场景的断言。也就是说，有时您需要实例化一个具体的类，例如在实例化异常类 BadArgumentException 时。但是，如果你追求可测试性，你也可以提出你所做的论点，事实上，你也想反转 this 的依赖关系。您可能希望设计 Model 类，以便将所有异常实例委托给一个类并通过抽象接口调用。这样，测试 Model 类的代码可以提供自己的异常类，然后测试可以监视其使用情况。

我让同事给我举了一些例子，他们甚至可以抽象系统调用的实例化，例如“getsystemtime”，这样他们就可以通过单元测试来测试夏令时和时区场景。

遵循 YAGNI 原则——不要仅仅因为你认为你可能需要它就添加抽象。如果您正在练习测试优先的开发，那么正确的抽象就会变得很明显，并且只有实现了足够的抽象才能通过测试。

# jquery - 在第一个单元格中换行

> ID：13057128
> 
> 赞同：0
> 
> 时间：2012-10-24T20:24:54.160
> 
> 标签：jquery

我需要将表格第一列中的文本标签包装成一个跨度。这似乎很简单，但我似乎遗漏了一些东西。这是我尝试过的：

```
$('#myTable tr td:first-child').each(function() {
    var lbl = $(this).val();
    lbl.wrap('<span class="new" />');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T20:40:14.337

这是一个 td 并且您正在包装文本..所以使用[contents()](http://api.jquery.com/contents/) - val 用于输入

```
$('#myTable tr td:first-child').each(function() {
    var lbl = $(this).contents();
    lbl.wrapAll('<span class="new"></span>');
}); 
```

或者你可以使用[wrapInner()](http://api.jquery.com/wrapInner/) - 与上面做同样的事情

```
$('#myTable tr td:first-child').each(function() {
    $(this).wrapInner('<span class="new"></span>');
}); 
```

哎呀，你甚至不必循环..只要做

```
$('#myTable tr td:first-child').wrapInner('<span class="new"></span>'); 
```

[http://jsfiddle.net/wirey00/UcJ49/](http://jsfiddle.net/wirey00/UcJ49/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:30:13.337

```
var lbl = $(this).val();
alrtLbl.wrap('<span class="new" />'); 
```

应该是

```
var lbl = $(this).contents();
lbl.wrap('<span class="new" />'); 
```

# gstreamer - gstreamer 与 x264enc 的复用

> ID：13057130
> 
> 赞同：0
> 
> 时间：2012-10-24T20:25:00.170
> 
> 标签：gstreamer, x264

我正在尝试使用 gstreamer 将 DVD 转换为 mkv 文件。我使用的管道是：

```
gst-launch -evv multifilesrc location="VTS_01_%d.VOB" index=1 ！dvddemux 名称=解复用器\
 matroskamux 名称=多路复用器！文件接收器位置=test.mkv \
 demuxer.current_video ！队列 ！mpeg2dec ！x264enc ！多路复用器。\
 demuxer.current_audio ！队列 ！ffdec_ac3 ！lamemp3enc ！多路复用器。

```

不幸的是，管道并没有超出预滚动。当我用例如 ffenc_mpeg4 替换 x264enc 时，一切正常..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T01:49:56.370

这可能有效：

```
gst-launch filesrc location=file.vob \
  ! queue \
  ! dvddemux name=demuxer matroskamux name=mux \
  ! queue \
  ! filesink location=test.mkv demuxer.current_video\
  ! queue \
  ! ffdec_mpeg2video \
  ! ffdeinterlace  \
  ! x264enc \
  ! 'video/x-h264, width=720, height=576, framerate=25/1' \
  ! mux.  demuxer.current_audio \
  ! queue max-size-bytes=0 max-size-buffers=0 max-size-time=10000000000 \
  ! ffdec_ac3 \
  ! audioconvert \
  ! lamemp3enc \
  ! mux. 
```

字节流应该是 0 - 抱歉之前

您需要在 x264enc 之后提供视频的上限，并且您需要增加音频队列的限制以处理 x264enc 中的延迟

这两个更改使管道在我的末端运行。

去隔行器是可选的，但对于隔行扫描的内容是可取的。

# css - 将 Flex Group/Layout 的默认/全局间隙设置为零

> ID：13057132
> 
> 赞同：1
> 
> 时间：2012-10-24T20:25:02.667
> 
> 标签：css, apache-flex, actionscript

我有几个不同的视图和屏幕，它们都使用了 Group、VGroup 或 HGroup 的一些变体，并且要正确布置它们，我发现自己不得不再次编写和重写

```
gap="0" 
```

或使用 TileLayout

```
horizontalGap="0" verticalGap="0" 
```

让它们全部正确布局，以及我想要的方式。目前，我看到的能够将它们全局设置为零的唯一选择是设置一个重型全局监听器，即。

```
protected function globalListener():void
{
    addEventListener(Event.ADDED_TO_STAGE, onAddedToStage, true);
}

protected function onAddedToStage(event:Event):void
{
    var g:Group = event.target as Group; 
    if(g)
    {
        if( g.layout.hasOwnProperty('gap') )
        {
            g.layout['gap'] = 0;
        }
        else
        {
            var l:TileLayout = g.layout as TileLayout;
            if(l)
            {
                l.verticalGap = l.horizontalGap = 0;
            }
        }
    }
} 
```

或使用这些布局创建一个新包，并在其中添加 gap=0，

```
package overrides.gapless
{
    import spark.components.HGroup;

    public class HGroup extends spark.components.HGroup
    {
        public function HGroup()
        {
            gap = 0;
        }
    }
} 
```

和

```
package overrides.gapless
{
    import spark.layouts.TileLayout;

    public class TileLayout extends spark.layouts.TileLayout
    {
        public function TileLayout()
        {
            horizontalGap = 0;
            verticalGap = 0;
        }
    }
} 
```

之类的。我检查了相关文件的源代码（主要是 VerticalLayout、Horizo​​ntalLayout 和 TileLayout）并且可以看到硬编码的值，但仍然不能完全相信没有其他方法可以做到这一点。

我最近才开始研究 Flex，并且喜欢它的蒙皮选项，但对这个有点迷惑。

感谢您提供有关如何执行此操作的所有帮助。

# delphi - 在无限循环中停止delphi程序

> ID：13057133
> 
> 赞同：5
> 
> 时间：2012-10-24T20:25:04.477
> 
> 标签：delphi, debugging, delphi-xe3

当 Delphi 中出现无限循环时，当我点击停止按钮时，调试器甚至不会给我一个堆栈跟踪。如果我怀疑程序在哪里停止，我可以设置一个断点，如果这是正确的无限循环，它将停止。

这是一个故意导致无限循环的示例程序：

```
procedure TForm1.btnDebugInfiniteLoopClick(Sender: TObject);
var I: Integer;
begin
    I:=0;
    while I<100 do begin
        I:=1+1;
        if I>64 then I:=I div 2;
    end;
end; 
```

停止时，我得到如下内容：

```
ntdll.RtlUserThreadStart:
776301B4 89442404         mov [esp+$04],eax
776301B8 895C2408         mov [esp+$08],ebx
776301BC E9E99C0200       jmp $77659eaa
776301C1 8DA42400000000   lea esp,[esp+$0000]
776301C8 8DA42400000000   lea esp,[esp+$0000]
776301CF 90               nop 
ntdll.KiFastSystemCall:
776301D0 8BD4             mov edx,esp

... 
```

当我单步 (F7) 时，它单步走几行，然后锁定，直到我再次按下 break，此时我得到相同的结果。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T00:50:55.230

Rob Kennedy 在评论中回答。我必须从调试窗口打开线程视图以获取线程列表并选择正确的线程；那时我可以看到我的程序无限循环的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T07:09:03.607

As alternative answer: considering you're using Delphi XE3, it comes bundled with the profiler: AQTime which will find things like this real real fast.

# trigger.io - Trigger.io 动态加载页面

> ID：13057139
> 
> 赞同：0
> 
> 时间：2012-10-24T20:25:22.353
> 
> 标签：trigger.io

所以我使用 trigger.io 创建一个页面，底部有一个自定义菜单，每个按钮将一个外部 HTML 页面加载到主容器中。我不得不四处寻找才能完成这项工作，所以我想知道是否有更好的方法来做到这一点。

我开始使用`$('.main').load('pages/test.html')`它，它不起作用。相反，我必须这样做：

```
forge.file.getLocal('pages/test.html', function (file) {
  forge.file.string(file, function (str) {
    $('.main').html(str);
  });
}); 
```

这有点乱。

此外，如果将`str`HTML 内容作为`img`标签，则 img 不会显示，因为该`src`属性被弄乱了。所以我不得不做另一个黑客：

```
forge.file.getLocal('pages/test.html', function (file) {
  forge.file.string(file, function (str) {
    var $main = $('.main');
    $main.html(str);

    //Hack to resolve img src
    var imgPath;
    $main.find('img').each(function () {
      var $this = $(this);
      // First 8 chars is "file:///"
      imgPath = $this.prop('src').substr(8);
      forge.file.getLocal(imgPath, function (file) {
        $this.prop('src', file.uri);
      });
    });
  });
}); 
```

有什么更好的方法可以轻松地完全加载外部 HTML 页面？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:42:23.770

在 Android 4.1 和 iOS（iPhone 模拟器和 iPad）上使用 forge 平台 v1.4（在撰写本文时为 v1.4.18）进行测试，我似乎能够毫不费力地使用 jQuery 的加载方法。这是我的测试用例的结构：

```
src/
  index.html
  face.png
  pages/
    hello.html 
```

以下是内容`index.html`

```
<!DOCTYPE html>
<html>
<head>
<script src="js/jquery-1.7.1.min.js"></script>
<script type="text/javascript">
    $(function () {
        $('.content').load('pages/hello.html');
    });
</script>
</head>
<body>

<div class="content">
</div>

</body>
</html> 
```

并且`pages/hello.html`：

```
<b>hello world</b><img src="face.png"> 
```

这导致应用程序启动后出现这种情况： ![使用 $.fn.load 的结果](../Images/ffc3ec3316d3cb032a4c3aad9d574f81.png)

我可以看到这种方法的一个问题是标签的`src`属性`img`必须相对于`index.html`. 如果您仍然遇到问题，那么更具体的测试用例和/或使用的伪造平台版本的详细信息以及您测试的设备/模拟器可能会很有用。

# c# - 使用 Ninject 的参数化工厂

> ID：13057142
> 
> 赞同：1
> 
> 时间：2012-10-24T20:25:32.360
> 
> 标签：c#, ninject, factory-pattern, ninject.web.mvc

如何让 Ninject 在运行时根据变量实例化对象？

我正在尝试根据来自用户输入的参数在控制器操作 - MVC 3 中注入正确的存储库。如果用户输入“BMW”，它将绑定`ICarRepository` 到`BMWRepository`，如果他输入“KIA” `KiaRepository`，将被注入。

```
[HttpPost]
public ActionResult SearchResult(FormCollection values)
{
    string carModel  = values["model"];

    ICarRepository myRepository = RepositoryFactory.getRepository(carModel);

    .....
} 
```

这通过 switch/case noob 实例化或参数化工厂知道，我知道如何在没有 Ninject 的情况下手动完成，检查此处解释的 4 种方法[Exploring Factory Pattern](http://www.codeproject.com/Articles/37547/Exploring-Factory-Pattern)

我的问题是如何用 Ninject 做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T21:46:54.950

您可以注入一个[抽象工厂](http://blog.ploeh.dk/2012/03/15/ImplementingAnAbstractFactory.aspx)（可能只是一个`Func<string,ICarRepository>`），然后通过将以下内容添加到您的`RegisterServices`:

```
Bind<ICarRepository>().To<KiaRepository>().Named("KIA")
Bind<ICarRepository>().To<BmwRepository>().Named("BMW")
Bind<Func<string,ICarRepository>>()
    .ToMethod( ctx=> name => ctx.Get<ICarRepository>( name)); 
```

在你的 ctor 中：

```
class MyController
{
    readonly Func<string,ICarRepository> _createRepository;

    public MyController(Func<string,ICarRepository> createRepository)
    {
        _createRepository = createRepository;
    } 
```

然后，在您的操作中：

```
[HttpPost]
public ActionResult SearchResult(FormCollection values)
{
    string carModel  = values["model"];

     using( ICarRepository myRepository = _createRepository( carModel)) 
     {
            ... 
     } 
} 
```

# javascript - document.addEventListener 减慢加载速度

> ID：13057143
> 
> 赞同：1
> 
> 时间：2012-10-24T20:25:35.677
> 
> 标签：javascript, event-handling, slowdown, performance

我有一个网络应用程序。我写了一个日历 javascript 代码。脚本标记位于从服务器加载该 js 文件的 html 代码主体中。

在编写最后的代码之前，加载页面大约需要 900 毫秒。当我编写最后一个 javascript 代码时，加载页面需要 6 秒。

Javascript 代码基本上为我的日历定义了一个类。里面有很多方法。在我最后的代码中，我写了一个新方法，如下所示：

```
registerHider = function(){
    alert('hello');

    if(document.addEventListener){
        document.addEventListener('click', hider, false);
    }
}; 
```

方法“隐藏”是另一种方法，它只是将“显示”样式更改为“无”。就这样。当我注释掉“addEventListener”代码时，页面再次加载大约 900 毫秒。但是当我取消注释时，它又需要 6 秒。

我在那里发出警报，看看页面是否在加载时尝试处理那里的任何代码，但屏幕上没有消息。从那里我了解到，代码尚未执行。即使我更改了代码以仅在文档准备好时才注册事件，没有帮助，仍然相同。

这个问题的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T22:28:01.913

所有的问题都解决了。事实证明，这与这些 javascript 代码无关。

经验教训：如果 HTTP 标头的内容长度大于内容的实际大小；

1.  Firefox 等待的时间更长，但它仍然有效。
2.  Chrome 无法加载 javascript 代码。所以它不起作用。

无论如何感谢所有出席的人。

# winforms - 选定行时datagridview背景颜色混淆/脏

> ID：13057148
> 
> 赞同：2
> 
> 时间：2012-10-24T20:25:57.880
> 
> 标签：winforms, datagridview, colors, background

我一直在寻找几个小时，但还没有找到关于这个问题的解决方案。

我在 WinForms 中使用 .NET 4 DataGridView，它向我展示了一些与所选行背景颜色有关的问题。

选择时行变得像脏了一样，并且窗口的任何属性都发生了变化。例如：当另一个窗口在网格上移动时，字段的隐藏部分变得不可读。

我发布的图片比我糟糕的英语更好地解释了这种情况。

![在此处输入图像描述](../Images/19967191f3e25846b94af3589f30c028.png)

如图所示，当另一个窗口从它们上方经过时，具有浅蓝色前色的选定行变脏了。您会看到只有选定的那些会变成那样，因为另一个未选择的绿色行不会发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T19:31:52.293

我发现有一个 SelectedBackGround 属性允许我更改所选行的颜色，这与默认背景色不同。

这解决了我的问题。

# jsf - 具有 postconstruct 方法的 ApplicationScoped Bean

> ID：13057151
> 
> 赞同：1
> 
> 时间：2012-10-24T20:26:08.920
> 
> 标签：jsf, jakarta-ee, ejb, managed-bean, postconstruct

我有一个应用程序范围的 bean 来保存我的数据库中的信息。在实例化之后它应该获取数据，所以我用@PostConstruct 注释了这个方法。一旦我请求引用此 bean 的 jsf 页面，服务器日志就会爆炸！我认为它以某种方式递归，我得到的唯一堆栈跟踪是在 repBean.acceptVisitor(Visitor); 期间发生了系统异常；方法。然后服务器日志会变大几 GB，我必须手动删除它才能获得可用磁盘空间。如果我删除 @PostConstruct 注释，则没有例外。从另一个 bean 调用 update() 方法后，repositoryContent 变量会正确更新并包含信息。唯一的问题是我的 jsf 页面由于某种奇怪的原因没有显示内容。

```
@ManagedBean(eager=true)
@ApplicationScoped
public class IndexBean implements Serializable {

    private ArrayList<ViewFolder> repositoryContent;

    @EJB
    RepositoryService repBean;

    @PostConstruct
    public void update() {
       RepositoryVisitor Visitor = new RepositoryVisitor();
       repBean.acceptVisitor(Visitor);
       repositoryContent = Visitor.getList();
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:17:13.567

这不是正常行为。

以下行之一

```
 RepositoryVisitor Visitor = new RepositoryVisitor();
   repBean.acceptVisitor(Visitor);
   repositoryContent = Visitor.getList(); 
```

正在间接评估 EL 表达式`#{indexBean}`，这反过来又会导致 bean 再次被构造，因为它还没有投入使用。它只会在完成后投入使用（因此可以作为混凝土使用`#{indexBean}`）`@PostConstruct`。这一切都会导致无限循环。

您可能需要进行一些重构，或者将应用程序范围的 bean 实例本身传递给方法调用，以便可以直接使用它，而不是被 EL 表达式引用。

# python - 以 " 结尾的 Python 正则表达式

> ID：13057156
> 
> 赞同：0
> 
> 时间：2012-10-24T20:26:28.997
> 
> 标签：python, regex

我正在尝试长时间的刺痛并提取它包含的所有网址。

```
page.findall(r"http://.+") 
```

是我所拥有的，但这不会导致我想要的。url 都用双引号括起来，所以我怎样才能告诉正则表达式在到达“？”时停止匹配？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T20:29:05.517

那里有非常复杂的 url 解析正则表达式，但如果你想停在 a 处`"`，只需使用`[^\"]+`url 部分。

或者切换到单引号字符串并删除`\`.

另外，如果你`https`混进去了，它会坏的，所以你可能只想和

```
page.findall(r'"(http[^"]+)"') 
```

但现在我们正在研究 url 解析正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:39:35.203

最好在这里使用非贪婪表达式而不是使用`[^\"]+`. 这样你的正则表达式就是`r'"http://.+?"'`. 加号后面的问号使它找到第一次遇到双引号。

# ruby-on-rails - Excon::Errors::MovedPermanently - 使用 Paperclip + Fog 上传到 S3 时

> ID：13057158
> 
> 赞同：0
> 
> 时间：2012-10-24T20:26:39.340
> 
> 标签：ruby-on-rails, amazon-s3, paperclip

我正在尝试通过 Paperclip (2.7.4) 将文件上传到 S3。我已将模型设置如下：

```
has_attached_file :swatch,
                :styles => {:preview => '50x50>', :display => '50x50>'},
                :storage => :fog,
                :fog_credentials => {
                    :provider => 'AWS',
                    :aws_access_key_id => ENV['AWS_ACCESS_KEY_ID'],
                    :aws_secret_access_key => ENV['AWS_SECRET_ACCESS_KEY'],
                    :region => 'eu-west-1'

                },
                :fog_directory => 'FOG_DIRECTORY',
                :path => '/swatches/:id/:style/:filename' 
```

每当我尝试实际上传文件时，我都会遇到以下错误：

> Excon::Errors::MovedPermanently in Spree::Admin::OptionTypesController#update
> Expected(200) <=> Actual(301 Moved Permanently)

任何想法那里发生了什么？

# objective-c - 如何制作 UITextView Wrap 以容纳其中的文本？

> ID：13057164
> 
> 赞同：1
> 
> 时间：2012-10-24T20:27:07.467
> 
> 标签：objective-c, ios, xcode, uitextview

我有几个 UITextViews 包含一到三位数之间的数字。我希望这些视图随着数字的变大或变小而扩大和缩小。目前文本正在缩小，TextViews 的大小保持不变。

我更喜欢使用 xib 文件来执行此操作（我很惊讶这不是一个微不足道的复选框），但如果这不可能，一个编码的答案会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T20:35:47.750

我建议使用 UITextView 的 contentSize 属性：

```
 self.textView.frame = CGRectMake(self.textView.frame.origin.x, self.textView.frame.origin.y, self.textView.contentSize.width, self.textView.contentSize.height); 
```

# java - NIO Server/Client发送图片问题

> ID：13057170
> 
> 赞同：0
> 
> 时间：2012-10-24T20:27:21.553
> 
> 标签：java, nio, bytebuffer, socketchannel

嘿伙计们，我一直在尝试制作 NIO 服务器/客户端程序。我的问题是服务器只发送 14 个字节然后它不会再发送任何东西。我已经坐了很长时间，以至于我真的什么都看不到了，因此决定看看这里是否有人能看到问题

服务器代码：

```
import java.nio.*;
import java.nio.channels.*;
import java.nio.charset.*;

public class Testserver {
    public static void main(String[] args) throws java.io.IOException {

        ServerSocketChannel server = ServerSocketChannel.open();
        server.socket().bind(new java.net.InetSocketAddress(8888));

        for(;;) { 
            // Wait for a client to connect
            SocketChannel client = server.accept();  

            String file = ("C:\\ftp\\pic.png");

            ByteBuffer buf = ByteBuffer.allocate(1024);
            while(client.read(buf) != -1){

            buf.clear();
            buf.put(file.getBytes());
            buf.flip();

            client.write(buf);
            // Disconnect from the client
            }
            client.close();
        }
    }
} 
```

客户：

```
import java.io.IOException;
import java.net.InetSocketAddress;
import java.nio.ByteBuffer;
import java.nio.channels.Channels;
import java.nio.channels.ReadableByteChannel;
import java.nio.channels.SocketChannel;
import java.nio.channels.WritableByteChannel;
import java.io.*;
import java.net.*;
import java.nio.*;
import java.nio.channels.*;
import java.nio.charset.*;
public class Testclient {

    public static void main(String[] args) throws IOException {

        SocketChannel socket = SocketChannel.open(new InetSocketAddress(8888));

        FileOutputStream out = new FileOutputStream("C:\\taemot\\picNIO.png");
        FileChannel file = out.getChannel();

        ByteBuffer buffer = ByteBuffer.allocateDirect(8192);

        while(socket.read(buffer) != -1) { 
          buffer.flip();       
          file.write(buffer); 
          buffer.compact();    
          buffer.clear();
        }
        socket.close();        
        file.close();         
        out.close();           
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T23:20:16.993

1.  您只发送文件名，而不是文件内容。文件名是 14 个字节。

2.  每次客户端发送任何内容时，您都会发送它。但是客户端从来没有发送任何东西，所以我很惊讶你甚至得到了 14 个字节。

3.  您忽略了 write() 的结果。

如果要发送文件内容，请使用 FileChannel 打开它。同样，在客户端中使用 FileChannel 打开目标文件。然后复制循环在两个地方都是一样的。在通道之间复制缓冲区的正确方法如下：

```
while (in.read(buffer) >= 0 || buffer.position() > 0)
{
  buffer.flip();
  out.write(buffer);
  buffer.compact();
} 
```

请注意，这会处理部分读取、部分写入和读取 EOS 后的最终写入。

说了这么多，我看不出有任何理由在这里使用 NIO。使用 java.net 套接字和 java.io 流会简单得多。

# java - ANTLR 树解析器语法重写规则 *

> ID：13057172
> 
> 赞同：2
> 
> 时间：2012-10-24T20:27:27.000
> 
> 标签：java, antlr, dsl, parser-generator

我有一个树语法，部分语法如下所示

```
transitions
    :'transitions' '=' INT ('(' INT ',' INT ')') + ';' -> ^(TRANSITIONS INT INT INT*)
    ; 
```

这是树解析器语法的相应部分，

```
transitions
    :^(TRANSITIONS INT INT INT*)
    {System.out.println("");}
    ; 
```

我使用了 + rewrite 规则，这基本上是 repitition。在上面的语法中，用户输入最少 3 个整数值，比如一个可能的输入，

```
 transitions 1 (5,0) 
```

第二种可能的输入

```
transitions 2 (5,0) (5,1) 
```

第三种可能的输入

```
transitions 3 (5,0) (5,1) (5,2) 
```

等等。
第一个整数决定了有多少对整数。问题是如何在解析器语法中访问这些整数输入，以及如何在上面的 println 语句中打印这些输入？

我写的完整语法请参考我的问题[ANTLR java test file can't create object of tree grammar](https://stackoverflow.com/questions/13012371/antlr-java-test-file-cant-create-object-of-tree-grammar)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T20:43:11.150

我建议您将“数字对”保留在单独的规则中：

## 语法分析器

```
transitions
 : 'transitions' '=' INT pair+ ';' -> ^(TRANSITIONS INT pair+)
 ;

pair
 : '(' INT ',' INT ')' -> ^(PAIR INT INT)
 ; 
```

## 树语法

```
transitions
 : ^(TRANSITIONS INT pair+) {System.out.println("transitions.INT=" + $INT.text);}
 ;

pair
 : ^(PAIR a=INT b=INT) {System.out.println("pair=" + $a.text + ", " + $b.text);}
 ; 
```

## 编辑

快速演示：

```
grammar T;

options {
  output=AST;
  ASTLabelType=CommonTree;
}

tokens {
  TRANSITIONS;
  PAIR;
}

parse
 : transitions EOF!
   {
     CommonTree root = $transitions.tree;

     int count = root.getChildCount();

     Tree child1 = root.getChild(0);
     Tree child2 = root.getChild(1);
     Tree child3 = root.getChild(2);
     Tree child4 = root.getChild(3);

     System.out.println("root=" + root.getToken().getText() + " has " + count + " child nodes:");
     System.out.println(" - child1=" + child1.toStringTree());
     System.out.println(" - child2=" + child2.toStringTree());
     System.out.println(" - child3=" + child3.toStringTree());
     System.out.println(" - child4=" + child3.toStringTree());

     String secondValueFromLastPair = child4.getChild(1).getText();
     System.out.println("\nsecondValueFromLastPair=" + secondValueFromLastPair);
   }
 ;

transitions
 : 'transitions' '=' INT pair+ ';' -> ^(TRANSITIONS INT pair+)
 ;

pair
 : '(' INT ',' INT ')' -> ^(PAIR INT INT)
 ;

INT   : '0'..'9'+;
SPACE : ' ' {skip();}; 
```

如果您现在解析 input `"transitions = 3(5,0) (5,1) (5,2);"`，您会看到以下内容被打印到控制台：

```
root=TRANSITIONS 有 4 个子节点：
 - 孩子1=3
 - child2=(对 5 0)
 - child3=(对 5 1)
 - child4=(对 5 1)

secondValueFromLastPair=2
```

# .net - 我可以为我的用户参数化 OAuth 选项吗？

> ID：13057174
> 
> 赞同：1
> 
> 时间：2012-10-24T20:27:32.973
> 
> 标签：.net, oauth

我想提供我的用户可以选择授予 OAuth 访问权限的移动应用程序列表。

我想在我的数据库中参数化这个列表，所以我可以通过将应用程序的唯一详细信息添加到我的数据库表中来轻松地将新的移动应用程序添加到列表中。我希望这些参数包括所需的各种 OAuth URL、我注册时获得的唯一 ApplicationID 等等。当成员从我的列表中单击一个时，它会显示相应的提示来收集他们的用户名/密码等。

我可以像这样制作一个通用的参数化 OAuth 授权系统吗？还是每个移动应用程序都需要我进行独特的自定义编码来设置用户的授权？

我听说我们需要在我的 Windows Web 服务器上为每个移动应用程序制造商安装一个唯一的 DLL，才能进行 OAuth。（不是实际的数据调用，只是建立 OAuth。我知道许多应用程序制造商发布 .NET DLL 以简化数据调用......我不是在谈论这个。）

可能的？如果可能的话，谁能指出我的文档？

非常感谢， - 汤姆

# sql - 消息 102，级别 15，状态 1，第 24 行 '.' 附近的语法不正确

> ID：13057176
> 
> 赞同：2
> 
> 时间：2012-10-24T20:27:40.390
> 
> 标签：sql, sql-server-2008

所有...基于我最近在这里发布的另一个问题，我构建了这个存储过程，但是在执行时，我收到标题中的错误。

如您所见，我尝试删除任何别名，但这没关系。也不知道如何使用 PRINT 来查看这个问题。当然，孤立的`SELECT`陈述是独立的。

出现错误后，我什至可以从我的临时表中提取结果。那么这个脚本或结果有问题吗？感谢您的帮助。我也只使用了 WHERE 语句来限制测试结果。

```
 ALTER PROC ap_vhdr_test AS
SET NOCOUNT ON
IF OBJECT_ID('temp.dbo.#ap_vend_det') is NOT NULL
DROP TABLE #ap_vend_det;

CREATE TABLE #ap_vend_det           
(db_name varchar(32)
, vendor_name varchar(40)
, vendor_code varchar(12)
, voucher_no varchar(16)
, invoice_num varchar(16)
, inv_date varchar(16)
, due_date varchar(16)
, apply_date varchar(16)
, total float
, line_desc varchar(40)
, company_id smallint
, gl_num varchar(32)
, acct_site varchar(32)
, sort_code varchar(32)
, nat_gl varchar(32)
, gl_desc varchar(40)
, category nvarchar(510)
, sub_category nvarchar(510)
, po_num varchar(16)
, vendor_class varchar(8)
)
INSERT INTO #ap_vend_det
EXEC sp_MSforeachdb N'IF ''?'' NOT IN ( ''model'',''tempdb'',''master'',''msdb'')
BEGIN SELECT DISTINCT db_name = ''?''
, amaster.addr1 --as vendor_name
, amaster.vendor_code --as vendor_code
, apdet.trx_ctrl_num --as voucher_no
, aphdr.doc_ctrl_num --as invoice_num
, CONVERT(varchar(16),dateadd(dd,(aphdr.date_doc - 639906),''1/1/1753''),101) --as inv_date 
, CONVERT(varchar(16),dateadd(dd,(aphdr.date_due - 639906),''1/1/1753''),101) --as due_date
, CONVERT(varchar(16),dateadd(dd,(aphdr.date_applied - 639906),''1/1/1753''),101) --as apply_date
, aphdr.amt_net --as total
, aphdr.doc_desc --as line_desc
, gldet.company_id --as company_id
, gldet.account_code --as gl_num
, gldet.seg2_code --as acct_site
, gldet.seg3_code --as sort_code
, gldet.seg1_code --as nat_gl
, gldet.description --as gl_desc
, ap_coa.group_header --as category
, ap_coa.group_label  --as sub_category
, apdet.po_ctrl_num --as po_num
, apvend.vend_class_code --as vendor_class
FROM ?.dbo.amaster --amaster
JOIN ?.dbo.aphdr --aphdr                        --**
    ON amaster.vendor_code = aphdr.vendor_code
    AND amaster.pay_to_code = aphdr.pay_to_code
JOIN ?.dbo.apdet --apdet
    ON aphdr.trx_ctrl_num = apdet.trx_ctrl_num
JOIN ?.dbo.gldet --gldet
    ON aphdr.journal_ctrl_num = gldet.journal_ctrl_num
JOIN ?.dbo.glt --glt
    ON gldet.journal_ctrl_num = glt.journal_ctrl_num
JOIN ?.dbo.apvend --apvend
    ON amaster.vendor_code = apvend.vendor_code
JOIN reps.dbo.ap_coa --ap_coa
    ON gldet.seg1_code = ap_coa.acct_code
WHERE aphdr.date_applied >= ''734785''              
END';

SELECT * FROM #ap_vend_det; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T20:31:21.940

如果您的数据库名称中包含空格或其他字符，这将失败。您需要将它们括在方括号中，例如

```
FROM [?].dbo.amaster --amaster 
```

不仅如此，因为您使用的是 3 个部分名称，您还需要在 FROM 子句中为表起别名。

```
FROM [?].dbo.amaster amaster
JOIN [?].dbo.aphdr aphdr                        --**
    ON amaster.vendor_code = aphdr.vendor_code
    AND amaster.pay_to_code = aphdr.pay_to_code
JOIN [?].dbo.apdet apdet
    ON aphdr.trx_ctrl_num = apdet.trx_ctrl_num
JOIN [?].dbo.gldet gldet
    ON aphdr.journal_ctrl_num = gldet.journal_ctrl_num
JOIN [?].dbo.glt glt
    ON gldet.journal_ctrl_num = glt.journal_ctrl_num
JOIN [?].dbo.apvend apvend
    ON amaster.vendor_code = apvend.vendor_code
JOIN reps.dbo.ap_coa ap_coa
    ON gldet.seg1_code = ap_coa.acct_code
WHERE aphdr.date_applied >= ''734785'' 
```

# r - 绘制收敛域的最有效方法是什么？

> ID：13057189
> 
> 赞同：2
> 
> 时间：2012-10-24T20:28:31.150
> 
> 标签：r, statistics

比如说，你有一个牛顿法算法，它有 2 个感兴趣的参数（a，b）。我想用 x 轴 = a，y 轴 = b 绘制它们的收敛域。有没有真正快速和简单的方法？？？有什么建议么？

我的算法基本上会收敛于 a & b 的某些值。如果我输入（a，b），它将返回（迭代次数，它收敛到的 a 的值，它收敛到的 b 的值）。现在，我正在考虑在另一个 for 循环中设置一个 for 循环，该循环遍历 b 的所有可能值，首先保持 a 固定，并且 a 将收敛的所有可能值保持 b 固定。

但是，我的麻烦是：如何识别 a & b 是否收敛。还有比使用嵌套 for 循环更好的方法吗？？？？

# python - Django 日期时间查询

> ID：13057197
> 
> 赞同：2
> 
> 时间：2012-10-24T20:29:13.087
> 
> 标签：python, django, datetime, django-queryset

在Django中以时区感知方式查询今天（或过去给定天数的特定日期）创建的对象的最有效方法是什么？

我知道对此有很多问题，但大多数答案都没有包含时区意识，似乎没有任何明确的最近答案，并且大多数解决方案都会产生天真的日期时间警告：

> RuntimeWarning：在时区支持处于活动状态时，DateTimeField 收到了一个幼稚的日期时间 (2012-10-23 00:00:00)。

我正在运行支持时区的 Django 1.5，并且始终使用 pytz 和 UTC 时区。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T04:44:42.513

Django 有一个内置函数可以将天真的日期时间对象转换为时区感知对象：

```
from django.utils import timezone

enlightened_date = timezone.make_aware(naive_date, timezone.utc) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T05:45:30.457

另一种选择是

```
from django.utils.timezone import utc
utcnow = datetime.utcnow().replace(tzinfo=utc) 
```

# java - 由于 $ 导致 Java 正则表达式匹配错误

> ID：13057200
> 
> 赞同：0
> 
> 时间：2012-10-24T20:29:26.750
> 
> 标签：java, regex

我有以下正则表达式片段来解析 ahref 的 URL，如下所示：

```
(?<=href=)[^\"']+(?=(\"|'))?> 
```

我想要做的是用数据替换以下代码段，我在运行时填充：

```
<a href=$tracking_url$&langding_url=google.com>
   <img src="irreleavnt" />
</a> 
```

当我按如下方式尝试 replaceAll() 时，它失败了

```
 String fragment = <a href=$click_tracking_url$&landing_url=google.com><img src=\"10.gif\" /></a>
 String processedFragment = fragment.replaceAll(AHREF_REGEX, ahrefurl); 
```

错误是：

```
java.lang.IllegalArgumentException: Illegal group reference
    at java.util.regex.Matcher.appendReplacement(Matcher.java:724)
    at java.util.regex.Matcher.replaceAll(Matcher.java:824)
    at java.lang.String.replaceAll(String.java:1572) 
```

如何修复正则表达式以匹配`<a href=$click_tracking_url$`？我怎样才能摆脱`$`正则表达式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:44:00.443

来，试一试。换这个...

```
(?<=href=)(['"]?)\\$([^$>]+)\\$ 
```

...有了这个：

```
$1$url 
```

并且不要忘记逃避你的反斜杠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:46:24.730

如果我正确理解了您的问题，则您正在尝试以`$someIdentifier$`您使用 someIdentifier 取消引用的应用程序中的某些值的形式替换模式。

您似乎想要使用该模式`\$([^\$]+)\$`并查找字符串中的每个匹配项，获取第一组 (1) 的值，查找该值，然后用您查找的值替换该特定序列的所有匹配项。

```
 String someString = "some$string$withatoken";
   Pattern tokenPattern = Pattern.compile("\\$([^\\$]+)\\$");
   Matcher tokenMatcher = tokenPattern.matcher(someString);
   // find not matches.  matches will compare the entire string against the pattern
   // basically enforcing ^{pattern}$.
   while (tokenMatcher.find()) {
       String tokenName = tokenMatch.group(1);
       String tokenValue = tokenMap.get(tokenName); // lookup value of token name.
       someString = someString.replaceAll("\\$" + tokenName + "\\$", tokenValue);

       // resets the target of the matcher with the new value of someString.
       tokenMatcher.reset(someString);
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T20:48:10.763

好吧..我试过你的正则表达式并没有得到错误。但是，正则表达式直到元素末尾才替换`$click_tracking_url$`整个文本。

如果您需要动态替换占位符，请尝试以下操作：

```
Map<String, String> placeholders = new HashMap<String, String>();
// init your placeholders somehow...
placeholders.put("click_tracking_url", "something");

String fragment = "<a href=\"$click_tracking_url$&landing_url=google.com\"><img src=\"10.gif\" /></a>";
Matcher m = Pattern.compile("\\$(\\w+)\\$").matcher(fragment);
if (m.find()) { 
   String processedFragment = m.replaceAll(placeholders.get(m.group(1)));
   System.out.println(processedFragment);
} 
```

# java - 拨打预定电话以再运行一次

> ID：13057202
> 
> 赞同：0
> 
> 时间：2012-10-24T20:29:33.070
> 
> 标签：java, multithreading

我们有一个每 10 秒运行一次的计划任务和一个包含 3 个线程的线程池，它们实际上更新了一个静态公共映射。计划的操作每 10 秒打印一次此地图。问题是我希望调度程序在 3 个线程完成映射后停止打印。但这里是关键。我不想立即停止调度程序，我想先打印（地图的最终版本）然后完成。

```
public class myClass implements ThreadListener {
    public static ArrayList<Pair<String, Integer>> wordOccurenceSet = new ArrayList<Pair<String, Integer>>();
    int numberOfThreads = 0;
    ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(1);
    public void getAnswer(Collection<CharacterReader> characterReaders, Outputter outputter) {

        ExecutorService executor = Executors.newFixedThreadPool(characterReaders.size());
         OutputterWriteBatch scheduledThread = new OutputterWriteBatch(outputter,wordOccurenceSet);

        scheduler.scheduleAtFixedRate(scheduledThread, 10, 10, TimeUnit.SECONDS);
        for (CharacterReader characterReader : characterReaders) {
            NotifyingRunnable runnable = new CharacterReaderTask(characterReader, wordOccurenceSet);
            runnable.addListener(this);

            executor.execute(runnable);
        }

    }

    @Override
    public void notifyRunnableComplete(Runnable runnable) {
        numberOfThreads += 1;
        if(numberOfThreads == 3 ){
         //All threads finished...  What can I do to terminate after one more run?
        }
    }
} 
```

侦听器实际上只是在线程完成时收到通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:11:17.320

首先，让你的`numberOfThreads`同步。`Reader`当两个线程同时完成时，您不希望它损坏。它是一个原始的 int，所以它*可能*不会被破坏（我对 JVM 不是很精通），但无论如何都应该遵循线程安全的一般规则。

```
// 1\. let finish OutputterWriteBatch if currently running
scheduler.shutdown(); 
// 2\. will block and wait if OutputterWriteBatch was currently running
scheduler.awaitTermination(someReasonableTimeout);
// 3\. one more shot.
scheduler.schedule(scheduledThread,0);
// You could also run it directly if your outputting logic in run()
// is published via separate method, but i don't know the API so i suppose
// only Runnable is published 
```

但是，这当然不应该直接从 调用`notifyRunnableComplete`。侦听器方法是从您的`Reader`线程中调用的，因此它将阻止 3 个线程中的最后一个线程及时完成。而是制作一个通知对象，其他线程将`wait()`在（最好是执行的那个`getAnswer()`）上，`notify()`当它`numberOfThreads`达到 3 并将上述代码放在`wait()`.

哦，当`wait()`解除阻塞时，你应该仔细检查它`numberOfThreads`是否真的是 3，如果不是，循环回到`wait()`. 谷歌“虚假唤醒”来解释为什么需要这样做。

# asp.net - _Layout 中强类型分部视图的异步操作

> ID：13057203
> 
> 赞同：2
> 
> 时间：2012-10-24T20:29:33.367
> 
> 标签：asp.net, .net, asp.net-mvc-4, partial-views, async-await

所以，这里是破败...

我的 MVC 4 应用程序有一个主布局页面，其中包含一些动态信息，需要强类型化到特定域实体才能获取该信息。为了让我的文件更干净，我将输入的字段提取到部分视图中。

为了获取我需要的实体并将其映射到部分视图模型，我有一个 LayoutController 和一个返回`Task<PartialViewResult>`. 此操作使用服务层`async`调用`await`实体的 Web API 项目。它将该实体按摩到视图模型中，然后返回`PartialView("_LayoutPartial", viewModel).`

在 _Layout 页面中，部分通过以下方式调用：

```
@{Html.RenderAction("LayoutInfo", "Layout", new { /*entity primary key*/ });} 
```

我已经逐步完成了代码，它确实得到了正确的实体，但是在返回部分视图任务之后，我得到了每个人最喜欢的服务器错误页面，并出现以下错误：

`HttpServerUtility.Execute blocked while waiting for an asynchronous operation to complete.`

我做了一些谷歌搜索和搜索，但不知道这实际上意味着什么。我是否正确地考虑了这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T01:42:11.980

该错误消息意味着您正在尝试从同步方法中调用（并等待！）异步方法。在您的特定情况下，同步方法是 HtmlHelper.RenderAction，异步方法是您的任务返回操作方法。出现错误的原因是写异步Task-returning方法的点大概是为了避免阻塞一个线程，但是RenderAction要等到Task完成后才能返回，所以RenderAction在等待操作完成的时候就阻塞了。

一种选择是使 RenderAction 调用的方法是同步的而不是异步的，记住这将继续阻塞原始线程。另一种选择是从原始操作方法中异步填充布局数据，然后通过 ViewData 将其传递给布局页面。

# ios - 如何从 Xcode 中删除 MPAVController 控制台日志

> ID：13057207
> 
> 赞同：7
> 
> 时间：2012-10-24T20:29:45.427
> 
> 标签：ios, xcode, console, mpmovieplayercontroller

自从我上次更新 XCode 以来，我在播放视频时收到了很多 MPAVController 日志，如下所示：

```
[MPAVController] Autoplay: Likely to keep up or full buffer: 0
[MPAVController] Autoplay: Skipping autoplay, not enough buffered to keep up.
[MPAVController] Autoplay: Disabling autoplay for pause
[MPAVController] Autoplay: Disabling autoplay
... 
```

这很烦人，并填满了控制台。我怎样才能关闭这些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T20:55:56.503

我不确定，但我认为那些只出现在调试版本中。尝试使用发布版本，看看它们是否消失了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-13T14:24:30.120

我只使用本地视频文件，添加后，日志不再是垃圾邮件：

```
MPMoviePlayerController.movieSourceType = MPMovieSourceTypeFile; 
```

编辑：这似乎是我的解决方案，但后来我发现日志记录已经返回......

# c# - 如何使用 lambda 表达式改进代码？

> ID：13057209
> 
> 赞同：0
> 
> 时间：2012-10-24T20:30:06.480
> 
> 标签：c#, linq, lambda, refactoring

有人能帮我吗？我对 lambda 表达式不是很擅长。

```
protected void Process1(List<SomeClass> mylist)
{
    foreach (var item in mylist)
    {
        if (!SomeClass.Validate(item)) 
        { 
            continue; 
        } 
        DoStuff(item); 
        DoMore(item); 
        DoEven(item);
    }
}

protected void Process2(List<SomeClass> mylist)
{
    foreach (var item in mylist)
    { 
        if (!SomeClass.Validate(item) || item.Value == 0)
        {
            continue;
        }
        DoStuff(item);
        DoMore(item);
        DoEven(item); 
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T21:05:28.260

```
protected void Process1(List<SomeClass> mylist)
{
    foreach (var item in mylist.Where(item => SomeClass.Validate(item))
    {
        DoStuff(item); 
        DoMore(item); 
        DoEven(item);
    }
}

protected void Process2(List<SomeClass> mylist)
{
    foreach (var item in mylist.Where(item => item.Value != 0 && SomeClass.Validate(item))
    { 
        DoStuff(item);
        DoMore(item);
        DoEven(item); 
    }
} 
```

That's how I would get it done.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T20:36:25.780

第二个进程与带参数调用第一个进程相同

```
myList.Where(item => item.Value != 0) 
```

或者，如果您需要这两种方法：

```
protected void Process1(IEnumerable<SomeClass> mylist)
{
    foreach (var item in mylist)
    { 
        if (!SomeClass.Validate(item))        
            continue;

        DoStuff(item);
        DoMore(item);
        DoEven(item); 
    }
}

protected void Process2(IEnumerable<SomeClass> mylist)
{
    Process1(myList.Where(item => item.Value != 0));
} 
```

另外，我将输入参数更改为`IEnumerable`（因为您只遍历项目序列）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T20:37:28.713

你的意思是这样的？

```
protected void Process(List<SomeClass> mylist, List<Action<SomeClass>> actions)
{
    foreach (var item in mylist)
    {
        if (!SomeClass.Validate(item)) 
        { 
            continue; 
        }
        foreach(var action in actions) 
            action(item); 
    }
} 
```

然后调用它：

```
Process(list, new List<Action<SomeClass>> {DoStuff, DoMore, DoEven}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T21:03:22.300

该`Process`方法可以非常通用且可重用：

```
void Process<T>(IEnumerable<T> source, Predicate<T> filter, Action<T> action)
{
    foreach (var item in source)
        if (filter(item))
            action(item);
} 
```

然后您将使用它，例如，像这样：

```
Process(
    list, 
    i => SomeClass.Validate(i) && i.Value != 0, 
    i => 
    {
        DoStuff(i);
        DoMore(i);
        DoEven(i);
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T20:38:07.543

您可以做的一件事是使用 Linq 将验证应用于集合并仅返回有效项目。此外，如果需要，您可以将它们链接在一起以应用多个验证。例如：

```
return myList.Where(item -> !SomeClass.Validate(item))
             .Where(item -> !OtherClass.Validate(item)) 
```

这将返回仅通过验证的项目的集合，您可以在其中应用您需要“做”的任何“东西”。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-24T20:38:10.637

一开始我不太喜欢传递列表，但是...

```
protected void Process1(List<SomeClass> myList)
{
    myList.Where(item => SomeClass.Validate(item)).ToList()
        .ForEach(item =>
        {
            DoStuff(item);
            DoMore(item);
            DoEven(item);
        });
}

protected void Process2(List<SomeClass> myList)
{
    myList.Where(item => SomeClass.Validate(item) && item.Value != 0).ToList()
        .ForEach(item =>
        {
            DoStuff(item);
            DoMore(item);
            DoEven(item);
        });
} 
```

# java - 以编程方式切换操作栏选项卡 - 如何附加参数？

> ID：13057212
> 
> 赞同：3
> 
> 时间：2012-10-24T20:30:11.570
> 
> 标签：java, android, android-actionbar, actionbarsherlock

我正在切换我的 Android (Sherlock) 操作栏选项卡，如[以下问题](https://stackoverflow.com/questions/11609745/programmatically-switch-tabs-in-android-using-actionbarsherlock)所述：[Programmatically switch tabs in Android using ActionBarSherlock](https://stackoverflow.com/questions/11609745/programmatically-switch-tabs-in-android-using-actionbarsherlock)。
有没有办法将**参数传递**给被调用的选项卡？

感谢期待！

* * *

@semperfly 要求的更多信息：

我的 MainActivity 有一个 ActionBar 并实现了 ActionBar.TabListener

```
 actionBar = getSupportActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    tabCalculate = actionBar.newTab();
    tabCalculate.setText("Calculate");
    tabCalculate.setTabListener(this);
    actionBar.addTab(tabCalculate);

    tabArchive = actionBar.newTab();
    tabArchive.setText("Archive");
    tabArchive.setTabListener(this);
    actionBar.addTab(tabArchive); 
```

这是 ActionBar.TabListener 的实现：

```
public void onTabSelected(Tab tab, android.support.v4.app.FragmentTransaction ft) {
    FragmentManager fragmentManager = getSupportFragmentManager();
    FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();

    SherlockFragment fragment = null;
    if( tabCalculate.equals(tab) ) {
        if( fragmentInput == null ) {
            fragmentInput = new FragmentInput();                
        }            
        fragment = fragmentInput;
    } else if ( tabArchive.equals(tab)) {
        if( fragmentArchive == null ) {
            fragmentArchive = new FragmentArchive();
        }
        fragment = new FragmentArchive();
    }
    fragmentTransaction.replace(R.id.fragmentsContainer, fragment);

    fragmentTransaction.commit();
}    

public void onTabUnselected(Tab tab, android.support.v4.app.FragmentTransaction ft) {

}

public void onTabReselected(Tab tab, android.support.v4.app.FragmentTransaction ft) {

} 
```

我的第一种方法是以这种方式从 ArchiveFragment 加载 InputFragment：

```
 FragmentManager fragmentManager = getActivity().getSupportFragmentManager();
            FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();

            SherlockFragment fragment = new FragmentInput();
            Bundle arguments = new Bundle();
            arguments.putSerializable(FragmentInput.ARG_INPUTDATA_TO_LOAD, inputData);
            fragment.setArguments(arguments);
            fragmentTransaction.replace(R.id.fragmentsContainer, fragment);

            fragmentTransaction.commit(); 
```

这工作得非常好，但没有相应地切换 ActionBar 中的活动选项卡指示器，存档选项卡下方的蓝线处于活动状态，尽管输入片段处于活动状态。

然后我尝试了这种方法来切换标签/片段：

```
getSherlockActivity().getSupportActionBar().setSelectedNavigationItem(0); 
```

这可行，但现在我无法将参数传递给要激活的选项卡。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-07-29T18:58:03.510

晚了，但你可以使用：

```
getActivity().getActionBar().setSelectedNavigationItem(1); //where 1 equals the 2nd tab 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:40:44.907

似乎这可能是我的问题 [Fragments - Creating event callbacks to the Activity的答案](http://developer.android.com/guide/components/fragments.html#EventCallbacks)

# ios - 如何将 UIImage 插入 UITableViewCell

> ID：13057214
> 
> 赞同：0
> 
> 时间：2012-10-24T20:30:17.030
> 
> 标签：ios

我在情节提要中的 tableviewcell 中遇到了 UIImage 问题。当我在表格视图中滚动单元格时，它每次都从服务器请求数据，因此单元格非常慢。我看过这个[视频](http://www.youtube.com/watch?v=M7butieUoBg) ，但它在情节提要上不起作用，因为情节提要没有 UITableViewCell NIB 文件（它集成到情节提要中）

**我在我的项目中做什么**

1.  我创建对象并链接到我的插座属性
2.  我使用 json 从互联网上获取数据。
3.  我在tableview上显示它。

[你可以在这里](http://www.mediafire.com/?ra8mmw89dj4ybaa)下载我的整个项目文件。这是 UITableview.m 中的代码`cellForRowAtIndexPath`：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"MyCell";
    MyCustomCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Configure the cell...
    NSDictionary *entry = [ _entries objectAtIndex:indexPath.row];
    cell.boomTitle.text = [entry objectForKey:@"body"];
    NSString *imageURL=[NSString stringWithFormat:@"http://kelnakub.co.cc/upload/%i.jpg",[[entry objectForKey:@"IdEntry"] intValue]];
    for(NSDictionary *dic in _entries)
    {
        NewsFeed *myNewsFeed = [[NewsFeed alloc]init];
        myNewsFeed.thumNail = [dic objectForKey:@"IdEntry"];
    }

    NSURL *url = [NSURL URLWithString:imageURL];
    NSData *imageData = [NSData dataWithContentsOfURL:url];
    cell.boomImage.image = [UIImage imageWithData:imageData];
    cell.boomDate.text = [entry objectForKey:@"dateCreated"];
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:39:43.163

您可以使用情节提要在 NIB 文件中使用 UITableViewCell。只需使用原型单元格，而不是在 Storyboard 上设计单元格，而是创建一个新的 NIB 并在其上设计 UITableViewCell（Storyboard 的 UITableView 仍然没有单元格）。

然后，在代码中，您可以使用以下内容加载单元格：`UITableViewCell * MyCustomCell = [[[NSBundle mainBundle] loadNibNamed:@"MyCustomCell" owner:self options:nil] objectAtIndex:1];`

# jquery - 以编程方式打开嵌套的 jquery 手风琴部分

> ID：13057215
> 
> 赞同：1
> 
> 时间：2012-10-24T20:30:21.823
> 
> 标签：jquery, nested, accordion

我正在用包含交叉引用的文本编写一个 jQuery 手风琴，因此一个部分中的文本链接需要打开另一个部分。到目前为止使用很简单 $(location.hash).click(); 如[jQuery 手风琴所示 - 打开某些 div 的链接](https://stackoverflow.com/questions/4022775/jquery-accordion-link-to-open-certain-div)

但是，我需要打开的部分嵌套在另一个手风琴中：

```
Level 1 heading 1
      Level 2 heading 1
      Level 2 heading 2
      Level 2 heading 3
Level 1 heading 2
      Level 2 heading 1
      Level 2 heading 2
      Level 2 heading 3
... etc 
```

如何单击以打开 2 级部分之一，同时打开其包含的 1 级手风琴部分？

# java - 在 jboss 中使用 jax-ws

> ID：13057216
> 
> 赞同：3
> 
> 时间：2012-10-24T20:30:29.433
> 
> 标签：java, jakarta-ee, jax-ws

我正在尝试从 java 调用 Web 服务。我使用 JBoss 作为客户端应用程序服务器。Web 服务器是用 jax-ws 编写的，并在其他一些服务器上运行（我不知道）。

我的要求是从我在 JBoss 中运行的应用程序调用 Web 服务。经过足够的搜索，我发现 jax-ws 是一个标准，现在包含在 jdk 中。Metro 是 jax-ws 的参考实现，在 Glassfish 应用服务器中提供。

我的问题是： -
市场上还有其他 jax-ws 实现吗？
就像每个容器都提供自己的 Servlet API 实现一样，它们都提供 Jax-ws 的实现吗？
我需要将 Metro api 复制到我的 Jboss 应用程序吗？
JBossWS 在哪里发挥作用？
Web Service 主机提供的示例代码指定，客户端需要将身份验证令牌添加到 SOAPHeader，并且在示例代码中他们使用了 com.sun.xml.ws 包。
当我使用 MessageFactory 创建一个新的 SOAPMessage 时，它​​会使用 Metro RI 还是 JbossWS？
如果 Metro 是 glassfish 对 Jax-ws 的实现，那么它会在其他应用服务器上运行吗？

除此之外，我的应用程序还公开了另一个 Web 服务（尽管它使用 Axis 1）。

我对此感到有些困惑。

有人可以帮助我了解有关 jax-ws、Metro、JbossWS 的一些详细信息。他们每个人都站在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T19:12:26.313

JBossWS 是 JBoss Application Server 提供的 Web-Service 堆栈，是的，它也是 JAX-WS 标准的实现。据我所知，JBossWS 基于 Apache CXF。Glassfish 使用另一个 JAX-WS 实现，Metro。

为了与远程 WebService 通信（实现并不重要，只要它使用标准），您可以简单地使用 JAX-WS api 和任何为其提供实现的应用程序服务器。JBoss 可以，因此您只需按照 JAX-WS api 编写客户端（并且它应该在 JBoss 和 Glassfish 或任何其他符合 JAX-WS 的容器上运行）。

关于身份验证，您应该提供更多信息，因为这里的标准中有很多选项。

# c# - C#：并行处理列表的基本方法？

> ID：13057219
> 
> 赞同：3
> 
> 时间：2012-10-24T20:30:38.203
> 
> 标签：c#, .net, parallel-processing, .net-4.5

我想做一些我认为相当基本的事情，但我还没有找到一个相当基本的例子。这是我想要做的：

给定一个对象列表，我想遍历列表中的每个元素并在其上调用一个相当耗费资源的方法。我想将其拆分为运行应用程序可用的尽可能多的内核，这样如果它在 8 核设备上运行，它一次最多可以处理 8 个元素。所有的计算都是彼此完全独立的，我希望当一个元素被处理完后，列表中的下一个元素将被启动。

我不确定在任何给定时间列表中有多少项目，我不知道有多少内核可用。有时可能只有一个核心。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-24T20:32:32.937

```
Parallel.ForEach(items, currentItem =>
{
     // TODO: process a current item
     Debug.WriteLine("[{0}] {1} {2}", 
                    Thread.Current.ManagedThreadId , 
                    DateTime.Now,
                    currentItem);
}; 
```

`items`变量应该是实现`IEnumerable`或的类型的实例`IEnumerable<T>`。

您还可以指定`ParallelOptions`MaxDegreeOfParalellism 来控制线程池可以使用的线程数，同时在线程之间分配工作。

```
var options = new ParallelOptions
      {
         MaxDegreeOfParallelism = 2
      };

Parallel.ForEach(items, options, currentItem =>
{
     // TODO
}); 
```

另请参阅 MSDN：[如何：编写简单的 Parallel.ForEach 循环](http://msdn.microsoft.com/en-us/library/dd460720.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-23T18:31:20.307

与其指定计数，不如使用 Environment 来获取，以便随着功能的增加尽可能并行。

```
Parallel.ForEach(
    items,
    new ParallelOptions {MaxDegreeOfParallelism =
        System.Environment.ProcessorCount
    },
    item => {
        // Work with item
    }
); 
```

# android - 在Android App中计算谷歌地图中多边形覆盖的面积

> ID：13057221
> 
> 赞同：2
> 
> 时间：2012-10-24T20:30:39.163
> 
> 标签：android, google-maps, google-maps-api-3, android-mapview

我有一系列`Location`/`GeoPoint`对象在我的 Android 应用程序中形成一个多边形。我想知道是否有任何方法可以计算它所覆盖的面积。

到目前为止，我正在考虑建立一个网络服务，当发布坐标列表时，它使用 JS Google Maps API v3 来计算面积。但是可能有一种方法可以很容易地使用我不知道的 Android 的某些功能来实现这一点。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-27T14:00:26.053

执行此操作的方法发布在以下答案中：

[https://stackoverflow.com/a/16210785/891479](https://stackoverflow.com/a/16210785/891479)

这是基于以下公式：

[http://mathworld.wolfram.com/PolygonArea.html](http://mathworld.wolfram.com/PolygonArea.html)

[http://en.wikipedia.org/wiki/Polygon](http://en.wikipedia.org/wiki/Polygon)

使用此公式计算多边形面积的原理：

[http://maruzar.blogspot.com/2011/12/irregular-and-regular-polygon-area-by.html](http://maruzar.blogspot.com/2011/12/irregular-and-regular-polygon-area-by.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T22:03:54.227

如果你想自己做，在[Polygon](http://en.wikipedia.org/wiki/Polygon)中解释了计算任何已知坐标的多边形面积的方法。

您可以在主题下的[如何计算多边形的面积中](http://www.wikihow.com/Calculate-the-Area-of-a-Polygon)找到更全面的解释`Irregular Polygons`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-05T11:43:36.087

以防万一它对某人有所帮助，这个线程中有一个很好的答案： [Calculate the area of​​ a polygon on google maps in an Android application](https://stackoverflow.com/questions/28838287/calculate-the-area-of-a-polygon-drawn-on-google-maps-in-an-android-application)

Marian Paździoch 的回答：

> 已经有一个[图书馆](http://googlemaps.github.io/android-maps-utils/javadoc/com/google/maps/android/SphericalUtil.html#computeArea(java.util.List))。
> 
> ```
> import com.google.maps.android.SphericalUtil;
> 
> //...
> 
> List<LatLng> latLngs = new ArrayList<>();
> latLngs.add(new LatLng(51.893728, -8.491865));
> latLngs.add(new LatLng(51.893550, -8.492479));
> latLngs.add(new LatLng(51.893216, -8.492224));
> latLngs.add(new LatLng(51.893404, -8.491598));
> Log.i(TAG, "computeArea " + SphericalUtil.computeArea(latLngs)); 
> ```

# c++ - 嵌套循环到尾递归

> ID：13057227
> 
> 赞同：1
> 
> 时间：2012-10-24T20:31:17.187
> 
> 标签：c++

实施：

```
bool no_uniq(list_t l);
//E: Returns true if l has no elements that appear only once in l; returns false otherwise
//Ex1: (1,5,1,5,1) -> True
//Ex2: (1,5,1,1) -> False 
```

已经实现的功能：

```
bool list_isEmpty(list_t list); //True if the list is empty, false otherwise
list_t list_make(); //Make an empty list
list_t list_make(int elt, list_t list); //Make a list with element elt followed by list
int list_first(list_t list); //Retrieve the first element of list
list_t list_rest(list_t list); //Retrieve all elements of list besides the first one 
```

所以我希望能够以尾递归的方式处理这个问题，但是我很难考虑如何将我通常拥有的嵌套循环转换为尾递归函数。我知道一个尾递归调用应该处理“外部”循环，一个应该处理“内部”循环，但是将它们放在一起来解决这个问题似乎几乎是不可能的。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T22:54:32.437

在没有看到太多代码的情况下，我会说

```
bool no_uniq(const list_t& list)
{
  if(list_empty(list))
      return true;      
  return no_uniq_acc(list_first(list), list_rest(list));
}

bool no_uniq_acc(int acc, const list_t& list)
{
  if(list_empty(list))
      return true;
  const int first = list_first(list);
  if(first==acc)
    return false;
  else
    return no_uniq_acc(first, list_rest(list));
} 
```

如果我怀疑它是*c*，您可以更改`const list_t&`为 just `list_t`。

# objective-c - 带有自定义后退导航按钮的自定义按钮栏

> ID：13057229
> 
> 赞同：0
> 
> 时间：2012-10-24T20:31:20.867
> 
> 标签：objective-c, ios, xcode, cocoa-touch

[可重复使用的按钮栏？](https://stackoverflow.com/questions/12591750/reusable-button-bars/12592534#12592534)让我在这里的一部分，但现在我遇到了“后退按钮”要求的问题。

我需要一个布局解决方案：

*   适用于 iOS 5.0 和 6.0
*   在顶部有一个带有几个按钮的自定义视图；这个视图应该可以在每个屏幕（场景）上重复使用，而不是在 Interface Builder 中为每个场景手动复制按钮。
*   在该顶部自定义视图中有一个自定义“后退”按钮。对于我必须实现的设计，我不能只使用默认导航栏
*   与 UINavigationController 配合良好；当用户点击“返回”按钮时，主视图控制器（带有按钮栏）应该保留，但代表实际场景内容的子视图控制器应该返回到前一个场景。

当前的问题是“后退”按钮不会改变子控制器——它会改变父控制器，返回到带有按钮栏的场景之前的上一个场景。我已经尝试了几种不同的方法。我不确定是我做的不对，还是做不到。

一种可能性是实现我自己的“返回”功能，保留一堆子视图控制器并在用户点击“返回”时手动更改它们。然而，与使用 UINavigationController 相比，这很尴尬，而且设计也很糟糕。

也许我走错了路。我不能接受在 Interface Builder 中的每个场景中复制按钮栏......但也许我应该以编程方式创建它，然后我可以轻松地从每个场景中调用该代码。然后我会有“普通”视图控制器，使用 UINavigationController 会更容易。但在我走那条路并完全放弃我目前拥有的东西之前，我想看看是否还有其他方法。

* * *

以下是我的解决方案的某些部分的概述：

我创建了一个 ButtonBarController，为 Storyboard 布置了我想要的按钮的 UIView，以及内容窗格的 UIView。我还在后退按钮的顶部添加了一个带有应用程序徽标的按钮（用于转到应用程序的主屏幕）。

然后我为每个其他屏幕创建了一个控制器。在这些子屏幕/子视图控制器中，我会首先添加一个大小合适的 UIView 以适合我的内容窗格，然后添加我想要的所有其他控件。我让所有这些子视图控制器都继承自另一个控制器，该控制器负责一些常见任务——例如获取对按钮栏控制器的引用，以及帮助调整 3.5 英寸和 4 英寸屏幕视图大小的代码。

我创建了一个 changeToControllerWithIndex 方法；当应用程序加载时，当用户单击主按钮栏中的一个按钮来更改场景时，或者当场景中发生需要另一个场景更改的任何事情时，我都会调用它。我重载了这个方法以提供两条额外的信息：为 NSDictionary 提供子视图控制器所需的任何额外信息，并告诉它这是一个顶级场景，还是我们是否需要一个后退按钮。

（注意：在 Identity Inspector 中为那些子视图控制器设置 Storyboard ID 很重要。我一直不小心在 Attribute Inspector 中设置了 Title）

```
- (void)changeToControllerWithIndex:(NSInteger)index {
    [self changeToControllerWithIndex:index withPayload:nil isRootView:YES];
}

// This is the method that will change the active view controller and the view that is shown
- (void)changeToControllerWithIndex:(NSInteger)index withPayload:(id)payload isRootView:(BOOL)isRootView
{
    if (YES) {
        self.index = index;

        // The code below will properly remove the the child view controller that is
        // currently being shown to the user and insert the new child view controller.
        UIViewController *vc = [self setupViewControllerForIndex:index withPayload:payload];

        if (isRootView) {
            NSLog(@"putting navigation controller in");
            childNavigationController = [[UINavigationController alloc] initWithRootViewController:vc];
            [childNavigationController setNavigationBarHidden:YES];
            [self addChildViewController:childNavigationController];
            [childNavigationController didMoveToParentViewController:self];

            if (self.currentViewController){
                [self.currentViewController willMoveToParentViewController:nil];

                [self transitionFromViewController:self.currentViewController toViewController:childNavigationController duration:0 options:UIViewAnimationOptionTransitionNone animations:^{
                    [self.currentViewController.view removeFromSuperview];
                } completion:^(BOOL finished) {
                    [self.currentViewController removeFromParentViewController];
                    self.currentViewController = childNavigationController;
                }];
            } else {
                [self.currentView addSubview:childNavigationController.view];
                self.currentViewController = childNavigationController;
            }

            [self.currentView addSubview:childNavigationController.view];

            //We are at the root of the navigation path, so no back button for us
            [homeButton setHidden:NO];
            [backButton setHidden:YES];
        } else {
            //Not a root view -- we're in navigation and want a back button

            [childNavigationController pushViewController:vc animated:NO];

            [homeButton setHidden:YES];
            [backButton setHidden:NO];
        }
    }   
} 
```

然后我有一个重载的方法来设置每个单独的视图控制器......有些需要比其他的多一点准备。

```
- (UIViewController *)setupViewControllerForIndex:(NSInteger)index {
    return [self setupViewControllerForIndex:index withPayload:nil];
}

// This is where you instantiate each child controller and setup anything you need  on them, like delegates and public properties.
- (UIViewController *)setupViewControllerForIndex:(NSInteger)index withPayload:(id)payload {
    UIViewController *vc = nil;
    if (index == CONTROLLER_HOME){
        vc = [self.storyboard instantiateViewControllerWithIdentifier:@"Home"];
    } else if (index == CONTROLLER_CATEGORIES){
        SAVECategoryViewController *child = [self.storyboard instantiateViewControllerWithIdentifier:@"Categories"];
        if (payload) {
            child.currentCategory = [(NSNumber *) [(NSDictionary *)payload objectForKey:ATTRIBUTE_CAT_ID] integerValue];
        } else {
            child.currentCategory = CATEGORY_ALL;
        }
        vc = child;
    } //etc for all the other controllers...
    payload = nil;

    return vc;
} 
```

我提到了管理“后退”导航的困难。上面的代码确保导航控制器保持正确的“返回”历史记录，每当我们使用按钮栏按钮之一更改屏幕时，都会重新开始。当我们确实使用子控制器中的按钮从一个场景导航到另一个场景时，我们可以这样返回：

```
- (IBAction)backButtonPressed:(id)sender {
    [childNavigationController popViewControllerAnimated:YES];
    if ([[childNavigationController viewControllers] count] <= 1) {
        //Root view
        [homeButton setHidden:NO];
        [backButton setHidden:YES];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:52:35.460

我认为您至少需要实现一个自定义容器视图控制器——根视图控制器。那将是托管自定义按钮栏的那个。在按钮栏下方，您将添加一个 UINavigationController 来管理您的其他 VC。先看这个：

```
@implementation RootVC
//...

- (void)viewDidLoad
{
    self.navVC = [[UINavigationController alloc] initWithRootViewController:someOtherVC];
    self.navVC.navigationBarHidden = YES;
    self.navVC.view.frame = ...;

    [self addChildViewController:self.navVC];
    [self.view addSubview:self.navVC.view];
    [self.navVC didMoveToParentViewController:self];
}

- (void)backButtonTouched:(UIButton *)button
{
    [self.navVC popViewControllerAnimated:YES];
} 
```

# objective-c - 使用 NSDictionary keysOfEntriesPassingTest 限制结果的数量：

> ID：13057231
> 
> 赞同：0
> 
> 时间：2012-10-24T20:31:20.947
> 
> 标签：objective-c

我声明一个变量只是为了限制过滤 NSDictionary 的结果数量。有没有其他方法可以避免额外的变量？

我的代码：

```
//Pick one part from each item
__block int partsCounter = 0;
NSSet *itemsParts = [self.deckDictionary keysOfEntriesPassingTest:^BOOL(id key, id obj, BOOL *stop) {

    //filter with itemRef value
    CollectiblePart* part = (CollectiblePart*)obj;
    if([candidatesSet containsObject:[NSNumber numberWithInt: part.itemRef]]){

        if(partsCounter < quantity)
        {
            partsCounter++;
            return YES;
        }else{
            //stop the filtering
            return (*stop = NO);
        }
    }else{
        return NO;
    }
}]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:50:43.640

不，这是最好的方法。

虽然该方法允许块在中途退出，但它不知道为什么必须这样做，因此不提供任何帮助。

在您的语义中，您需要保留一个计数以跟踪是否超过特定阈值。有一个变量来做到这一点是有道理的。

# c++ - 在 C++ 中为调制解调器调用 ::CreateFile 总是返回 ERROR_SHARING_VIOLATION

> ID：13057237
> 
> 赞同：-1
> 
> 时间：2012-10-24T20:31:57.560
> 
> 标签：c++, windows, createfile

我在 COM44 上有一个调制解调器，当我尝试通过 C++ 访问它时，我最终收到 ERROR_SHARING_VIOLATION。我使用的代码是并且 m_hFile 最终为-1：

```
void* m_hFile;
m_hFile = ::CreateFile( "\\\\.\\COM44",
  GENERIC_READ | GENERIC_WRITE,
  NULL,
  NULL,
  OPEN_EXISTING,
  NULL,
  NULL ); 
```

我已经通过 Putty 测试了对调制解调器的访问，并且能够打开它的 comport 并向它发送 AT 命令，没有任何问题，所以我知道它可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T14:29:17.810

问题最终不是与 CreateFile 代码有关，而是与我在它上面的注册表代码有关，它确定要使用的 com 端口号，我没有添加，因为我认为它不相关。

# google-app-engine - 提交时 GAE Con currentModificationException

> ID：13057239
> 
> 赞同：0
> 
> 时间：2012-10-24T20:32:10.987
> 
> 标签：google-app-engine, jpa

我正在使用 SDK 提供的码头（版本 1.7.1）在 localhost 上部署 JPA 测试 GAE 应用程序。每次提交时，框架都会引发 ConcurrentModificationException，但对象会保留在数据存储中。有什么我做错了吗？提前 Tnx

* * *

*   appengine-api-1.0-sdk-1.7.1
*   数据核-api-jpa-3.1.2
*   datanucleus-core-3.1.2
*   datanucleus-appengine-2.1.0-final

* * *

```
Transaction failed to commit
org.datanucleus.transaction.NucleusTransactionException: Transaction failed to commit
    at org.datanucleus.TransactionImpl.commit(TransactionImpl.java:365)
    at it.gustaff.core.PlaceRService.createPlace(PlaceRService.java:91)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.google.appengine.tools.development.agent.runtime.Runtime.invoke(Runtime.java:115)
    at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
    at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$TypeOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:185)
    at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
    at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1469)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1400)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)
    at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:60)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:370)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
Caused by: java.util.ConcurrentModificationException
    at java.util.AbstractList$Itr.checkForComodification(AbstractList.java:372)
    at java.util.AbstractList$Itr.next(AbstractList.java:343)
    at com.google.appengine.datanucleus.DatastoreConnectionFactoryImpl$DatastoreManagedConnection.close(DatastoreConnectionFactoryImpl.java:146)
    at org.datanucleus.store.connection.ConnectionManagerImpl$2.transactionCommitted(ConnectionManagerImpl.java:296)
    at org.datanucleus.TransactionImpl.internalPostCommit(TransactionImpl.java:577)
    at org.datanucleus.TransactionImpl.commit(TransactionImpl.java:354)
    ... 51 more 
```

* * *

```
<persistence-unit name="appengine-transactions-optional">
    <provider>org.datanucleus.api.jpa.PersistenceProviderImpl</provider>
    <class>it.gustaff.data.Place</class>
    <properties>
        <property name="datanucleus.NontransactionalRead" value="true"/>
        <property name="datanucleus.NontransactionalWrite" value="true"/>
        <property name="datanucleus.singletonEMFForName" value="true"/>
        <property name="datanucleus.ConnectionURL" value="appengine"/>
    </properties>
</persistence-unit> 
```

* * *

```
public Place createPlace(Place p){

    EntityManager entityManager = EMF.get().createEntityManager();
    entityManager.getTransaction().begin();
    //avoid to persist a Place with an Id already set
    p.setId(null);
    entityManager.persist(p);
    ExecutionContext ec = (ExecutionContext) entityManager.getDelegate();
    ec.getTransaction().commit();
    entityManager.close();
    return p;
} 
```

* * *

```
@Entity
public class Place {

    private String name;
    private String description;
    private String address;

    //omitted other getter/setter

    private com.google.appengine.api.datastore.Key id;

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    public Key getId() {
        return id;
    }

    public void setId(Key id) {
        this.id = id;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T05:31:26.387

您没有引用您的实体以及 p.setId(null) 正在做什么。除了你可以尝试的东西（找到真正的 ConcurrentModificationException 发生的地方）之外（类似于）`entityManager.getTransaction().commit()`用这个替换

```
ExecutionContext ec = (ExecutionContext)entityManager.getDelegate();
ec.getTransaction().commit(); 
```

如果这引发了 NucleusTransactionException，则打印出带有原因的堆栈跟踪并将其添加到您的问题中。原因是真正的问题所在，如果它是 GAE 中的问题，那么它可以被修复，否则如果它在你的代码中是一个问题，那么你就知道它在哪里。

# java - 在while循环中等待（长时间超时）？

> ID：13057240
> 
> 赞同：14
> 
> 时间：2012-10-24T20:32:16.097
> 
> 标签：java, multithreading, concurrency, wait, notify

我读过你应该`Object.wait()`在一个while循环中调用Java。原因是该线程可能被唤醒，而您等待通知的条件仍然为假（虚假唤醒）。

怎么样`Object.wait(long timeout)`。在这里，您不想循环条件，因为您希望它在指定的时间后超时。但是如果你不把它放在一个循环中，你怎么能保证它不会被提前唤醒呢？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-24T20:35:38.137

> 但是如果你不把它放在一个循环中，你怎么能保证它不会被提前唤醒呢？

这是 Java IMO 的一个缺陷，尽管它可能是各种操作系统变体中底层线程支持的一个缺陷。我怀疑Java知道等待是否超时，但是如果不重新测试条件并专门测试时间，调用者就无法弄清楚。丑陋。

因此，您还需要将其`wait(long timeout)`放入一个`while`循环中，并*测试*时间是否超过了超时期限。我知道没有其他方法可以做到这一点。

```
long timeoutExpiredMs = System.currentTimeMillis() + timeoutMs;
while (!condition) {
    long waitMillis = timeoutExpiredMs - System.currentTimeMillis();
    if (waitMillis <= 0) {
       // timeout expired
       break;
    }
    // we assume we are in a synchronized (object) here
    object.wait(waitMillis);
    // we might be improperly awoken here so we loop around to see if the
    // condition is still true or if we timed out
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T20:37:43.643

```
long deadline = now() + timeout;

synchronized(lock)

    while( !condition() && now()<deadline )
        lock.wait( deadline - now() );

    if(condition())
        ...
    else // timeout
        ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-20T21:15:00.940

这是因为 java 有 Mesa 风格的监视器而不是 Hoare 风格的监视器。所以你需要把等待放在一个while循环中。请在以下网页上搜索字符串“为此，通常需要将每个等待操作都包含在这样的循环中”，

[http://en.wikipedia.org/wiki/Monitor_(synchronization)#Nonblocking_condition_variables](http://en.wikipedia.org/wiki/Monitor_(synchronization)#Nonblocking_condition_variables)

.如果它是 Hoare 风格的显示器，那么您可以等待。我将很快添加 Mesa 监视器的详细信息。这不是 Java 的不足。两种类型的显示器都有优点和缺点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-25T13:45:09.593

在循环中调用 wait 不仅仅用于处理偶尔的虚假唤醒。在多个线程竞争锁的一般（非玩具示例）情况下，当线程从等待中唤醒时，它*在等待之前*所做的任何检查都不足以预测对象在*等待之后*的状态。正在等待的线程已经放弃了锁，所以从那时起任何事情都可能发生，而且通知的工作方式并没有原子性，仅仅因为你得到通知并不意味着另一个线程没有在通知之间的时间内潜入并且通知的线程重新获得了锁。

从根本上说，你在一个循环中等待，因为一旦你重新获得了锁，你需要检查当前状态，以便能够知道发生了什么。超时不会改变这一点。超时是一种安全机制，因此如果错过通知，线程不会永远挂起。如果等待超时，通常不需要任何特定操作，只需重新获取锁，继续循环体，并像往常一样检查条件。

这不是 Java 的错，这就是 pthread 的工作方式。

# java - 由相同类型的非静态成员引起的 StackOverflowError

> ID：13057244
> 
> 赞同：0
> 
> 时间：2012-10-24T20:32:21.633
> 
> 标签：java, exception, stack-overflow

以下代码段中的代码抛出`java.lang.StackOverflowError`.

```
public class Main
{
    private Main m=new Main("");  //This statement causes the exception.

    private Main(String s)
    {
        System.out.println(s);
    }

    public static void main(String[] args)
    {
        try
        {
            Main m1=new Main("The constructor called.");
            System.out.println("Successful!");
        }
        catch (Exception ex)
        {
            System.out.println(ex);
        }
    }
} 
```

故意在类本身中编写此语句是没有意义的，`private Main m=new Main("");`但是该语句不应该被类中的任何代码使用，那么该语句如何导致抛出异常？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T20:33:51.193

每次调用构造函数时，都会创建一个实例，从而执行初始化代码

```
private Main m=new Main(""); 
```

它调用构造函数等。

你可能想要

```
private static Main m=new Main(""); 
```

为了保持单身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T20:50:33.233

您的程序导致堆栈溢出是绝对正常的......编译器不会检查您的成员 m 是否在您的代码中使用，尽管您是对的，它可能已经做到了，可能有副作用：对象未构建。 .. 为了构造一个 Main 对象，必须构造另一个 Main 对象（私有 Main m 成员）......这给出了无限递归，因此堆栈溢出

# emacs - 如何彻底清除 Emacs Calc 的状态？

> ID：13057245
> 
> 赞同：5
> 
> 时间：2012-10-24T20:32:27.450
> 
> 标签：emacs, calc

这一定是一个愚蠢的简单问题，但尽管以多种方式多次搜索谷歌并挖掘 Calc 文档，但我仍然无法找到答案。

**给定**一个 Emacs 实例，运行 Calc，并执行了多次计算，包括存储变量和方程，其中一些可能来自“~/.emacs.d/calc.el”文件，

**如何在***不*重新启动 Emacs的情况下将 Calc 恢复到*原始*状态？

 **Pristine：*堆栈上什么都没有。路上什么都没有。没有存储的变量或方程。等等。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T21:07:44.657

`M-x calc-reset`，这也必然是`C-x * 0`，是你所需要的。从[信息手册](http://www.gnu.org/software/emacs/manual/html_mono/calc.html#Basic-Commands)：

> `C-x * 0' command ('calc-reset'; that's 'C-x *' followed by a zero) resets the Calculator to its initial state. This clears the stack, resets all the modes to their initial values (the values that were saved with`m m' ( Cx * 0' 保留堆栈的内容，但将`calc-save-modes')), clears the caches (*note Caches::), and so on. (It does _not_ erase the values of any variables.) With an argument of 0, Calc will be reset to its default state; namely, the modes will be given their default values. With a positive prefix argument,`其他所有内容重置为其初始状态；使用负前缀参数，`Cx * 0' 保留堆栈的内容，但将其他所有内容重置为其默认状态。

编辑：哎呀。即使这样也不能清除变量。我不确定是否有一种简单的方法可以一直回到原始状态:(

编辑 2：看起来 Calc 将所有变量（包括 pi 和 e 之类的“内置”）存储为带有前缀“var-”的全局变量。据我所知，它不会跟踪模式（如 pi）设置了哪些变量，以及用户设置了哪些变量。此外，默认用户变量存储为 var-q0、var-q1 等。因此，为了清除所有变量，您需要编译启动时存在的变量和状态列表，删除不在该列表中的所有内容，然后恢复该列表中变量的原始值。这当然是可能的，但有点乏味。

编辑3：这是我的尝试。我又看了一下 calc-mode，在启动时它定义了我添加到下面的 my-calc-builtin-vars 中的变量。第二行将删除 Emacs 中所有以前缀 'var-' 开头*且不*在此列表中的变量。这将包括您定义的任何变量，或者在另一个包中。所以让我们希望没有其他人使用前缀“var-”。并且它不会重置内置变量的值，因此如果您将 pi 重新定义为 3，它将保持为 3。

```
(setq my-calc-builtin-vars
      '("var-nan" "var-uinf" "var-sym" "var-lines" "var-Modes"
      "var-EvalRules" "var-inf" "var-phi" "var-pi" "var-gamma" "var-π"
      "var-φ" "var-γ" "var-spec" "var-e" "var-i")) 

(defun really-reset-calc ()
  (interactive)
  (calc-reset nil)
  (mapc #'(lambda (el) (unintern el)) 
        (remove nil (mapcar 
                     #'(lambda (el) (unless (member el my-calc-builtin-vars) el))
                     (all-completions "var-" obarray))))) 
```

# 更新：2016 年 8 月 6 日

当前的内置变量列表：

```
(setq my-calc-builtin-vars
      '("var-CommuteRules" "var-Decls" "var-DistribRules" "var-EvalRules"
      "var-FactorRules" "var-FitRules" "var-Holidays" "var-IntegAfterRules"
      "var-IntegLimit" "var-InvertRules" "var-JumpRules" "var-MergeRules"
      "var-Modes" "var-NegateRules" "var-e" "var-gamma" "var-i" "var-phi"
      "var-pi" "var-γ" "var-π" "var-φ")) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-24T20:45:36.903

M-# 0

这应该是你需要做的所有事情。*

# c++ - XML 模式 XSD 1.1 的 C++ 实现？

> ID：13057249
> 
> 赞同：8
> 
> 时间：2012-10-24T20:32:41.163
> 
> 标签：c++, xml, xsd, xsd-1.1

是否存在 XML Schema XSD 1.1 的任何现有 C++ 实现？

我找到了 xerces-c++-3.1.1，但它只实现了 XSD 1.0。这个项目的 java 对应物确实实现了 XSD 1.1。

我正在寻找一种实现“断言”功能的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:57:40.047

我知道的唯一发布的 XSD 1.1 处理器是 Xerces-J 和 Saxon-EE，它们都是基于 Java 的（尽管 Saxon-EE 也在 .NET 上发布）。

**（编辑，六年后）**

Altova 也有一个实现。

# include - 生成源代码文件之间的“包含”关系图

> ID：13057251
> 
> 赞同：7
> 
> 时间：2012-10-24T20:32:44.580
> 
> 标签：include, code-analysis, tex

我想对代码进行一些重构，尤其是文件之间的“包含”类关系。其中有很多，要开始使用，最好有一个列表、图表，甚至是柱状图，这样我就可以一眼看出从哪里包含了什么。

（在许多情况下，给定文件包含在多个其他文件中，因此该图将是 DAG，而不是树。没有循环。）

我正在使用 TeX（实际上是 ConTeXt），但这个问题似乎适用于任何具有类似`#include`C功能的编程语言。

显而易见，简单的答案是在所有 .tex 文件中为相关关键字（ ,和我们定义的其他几个宏）执行一个`grep`或“在文件中查找” 。这总比没有好，但是输出很长，仍然很难看到包含什么的模式。例如，文件 A 通常包含在文件 B 之前吗？文件 C 是否曾多次包含在同一个文件中？`\usemodule``\input`

我想这会带来一个额外但可选的功能：这样的工具将能够显示来自特定文件的包含*序列。*所以在那种情况下，DAG 可能是一个多重图，即从一个文件到另一个文件可能有多个弧。

理想情况下，最好能够对每个文件进行注释，并对其中的内容进行非常简短的总结。这将构成该文件图形节点上文本的一部分。

可能这种事情可以通过生成graphviz dot语言的脚本来完成。但我想知道它是否已经完成，而不是重新发明轮子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T18:22:29.203

因为现在是我的国家的星期五，我在等我的同事去喝啤酒，所以我想我会做一些编程。

在这里[http://www.luki.webzdarma.cz/up/IncludeGraph.zip](http://www.luki.webzdarma.cz/up/IncludeGraph.zip)您可以下载一个非常简单的实用程序的源代码，该实用程序在一个文件夹中查找所有文件，解析 #includes 并为此生成一个 .dot 文件。

它支持并正确处理相对路径，适用于 windows，也应该适用于 linux。它以非常简陋的方式编写。我的dot版本不解析生成的文件，有一些bug，但我现在真的需要去喝酒，看看你能不能修复它。我不是普通的点用户，我看不到它，但我确信它很明显。

享受 ...

PS - 如果您在编译和/或运行时遇到问题，请告诉我。谢谢。

**编辑**

好吧，我的错，Linux上有一些小故障。点问题是它使用“graph”而不是“digraph”。但它现在就像魅力一样工作。这是[链接](http://www.luki.webzdarma.cz/up/igraph.tgz)。只需键入 make，如果这样，make test 应该会生成程序本身的下图：

![包含图](../Images/614b1a7146c027b302cac6cf7fa9aef7.png)

它忽略了 C++ 文件中的预处理器指令，因此直接对它不是很有用（可以通过简单地使用预处理器输出标志调用 g++ 并处理它而不是实际文件来修复）。我今天没有使用正则表达式，但是如果您有任何编程经验，您会发现修改 DotGraph.cpp 对包含令牌进行硬编码和更改文件扩展名列表应该不会很难。明天可能会使用正则表达式或其他东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T17:02:12.560

一个聪明而通用的解决方案是跟踪构建系统（使用类似 strace、LD_PRELOAD、修补二进制文件或其他一些调试工具）。

一旦你收集了文件打开/关闭操作的顺序，你只需要过滤掉不感兴趣的东西，只要以下假设成立，就应该很容易为任何语言构建依赖关系树：

1.  构建系统将在包含每个文件时打开它。
2.  构建系统将在每个文件到达末尾时关闭它。

不幸的是，编写良好或编写不佳的编译器可能会违反这些假设，例如仅在第一次包含文件时打开文件，或者从不关闭任何文件。

也许由于这些限制，我不知道这个想法的任何实现。

另一方面，聪明的构建系统可能包括自己计算或提取依赖项的功能。gcc 可以`-M`选择输出依赖项，而 javac 可以自己计算依赖项（尽管我不知道如何让它输出它们）。

就 TeX 而言，我不知道足够的 TeX 来实际实现这一点，但从概念上讲，似乎应该可以重新定义低级 include 命令以：

1.  写下即将包含的内容的日志
2.  调用原始的包含命令来包含它
3.  写下所包含内容的日志

然后，您可以从日志输出构建您的树。

# haskell - 尝试制作haskell-platform时如何修复错误2？

> ID：13057254
> 
> 赞同：8
> 
> 时间：2012-10-24T20:32:50.467
> 
> 标签：haskell, ubuntu, haskell-platform

我从这里下载了 Haskell 平台源：[http](http://www.haskell.org/platform/linux.html) ://www.haskell.org/platform/linux.html ，安装了 ghc，并做了 /.configure。但是，当我执行 sudo make 时，出现以下错误：

```
Preprocessing library HUnit-1.2.4.2...

Test/HUnit/Base.hs:1:1:
    Could not find module `Prelude'
    Perhaps you haven't installed the profiling libraries for package `base'?
    Use -v to see a list of the files searched for.

Error:
Building the HUnit-1.2.4.2 package failed
make: *** [build.stamp] Error 2 
```

有谁知道如何解决这个问题？

我正在尝试在 Ubuntu 12.04.1 LTS 上安装

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T21:38:25.800

与其尝试从源代码安装，不如简单地安装 Ubuntu 软件包，这会简单得多，包括：

```
 $ sudo apt-get install haskell-platform 
```

如果您需要本地版本的文档和分析库，请安装其他软件包：

```
 $ sudo apt-get install haskell-platform-doc haskell-platform-prof 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-09T12:51:20.623

Daniel Fisher 的评论让我找到了解决方案。您必须为已安装的每个 ghc 软件包安装所有分析库。写吧

```
sudo apt-get install ghc*-prof 
```

这就是它对我有用的方式

# c++ - 在 C++ 中完成逻辑 AND 链中的所有函数调用

> ID：13057255
> 
> 赞同：0
> 
> 时间：2012-10-24T20:32:55.230
> 
> 标签：c++, logical-operators

> **可能重复：**
> [C++ 中是否存在非短路逻辑“与”？](https://stackoverflow.com/questions/1758608/is-there-an-non-short-circuited-logical-and-in-c)
> [C++ 逻辑 & 运算符](https://stackoverflow.com/questions/6899289/c-logical-operator)

我有类似这样的代码：

```
return ( check1() && check2() && check3() && check4() ); 
```

除了返回一个值（例如打印输出）之外，不同的检查函数还可以做其他事情。似乎这些`checkX`函数是按顺序运行的，只要一个返回 0，其余的就不会运行。这样做是有道理的。确保每个函数运行而不考虑其他返回值的最佳方法是什么（在 C++ 代码中）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T20:34:42.883

```
bool ret1 = check1();
bool ret2 = check2();
bool ret2 = check3();
bool ret4 = check4();

return (ret1 && ret2 && ret3 && ret4); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T20:38:23.727

**使用按位和运算符**

`return ( check1() & check2() & check3() & check4() );`

这将在返回之前进行每个调用。

* * *

**Node:** This is a hack and is not recommend.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T20:36:07.793

一种解决方案可能是在 bool 变量中捕获每个函数的结果，并在所有 4 个变量上执行 chexk。

 `````
bool x1 = check1();
bool x2 = check2();
bool x3 = check3();
bool x4 = check4();
return (x1 && x2 && x3 && x3); 
````  `* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T21:01:50.960

```
bool res = check1();
res &= check2();
res &= check3();
res &= check4();
return res; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T20:53:38.463

If you don't care about the sequence in which the functions run, you could use:

```
return (check1() + check2() + check3() + check4()) == 4; 
```

Another possibility would be to use pointers to functions, so you can invoke them in a loop:

```
typedef bool (*f)();

f checks[] = {check1, check2, check3, check4};

bool ret = true;
for (int i=0; i<4; i++)
     ret &= checks[i]();

return ret; 
```

This doesn't help much for dealing with 4 functions, but if 4 is just a demo and there are really more (or there's a good possibility of that expanding), this makes it relatively easy to deal with a large number of functions when/if necessary.

If you cared more about conciseness than clarity, you could do something like this:

```
bool ret = check1();

return (ret &= check2()), (ret &= check3()), (ret & check4()); 
`````

# silverlight - 在 Silverlight 的 LINQ 语句中使用 string.Contains 时 WCF 数据服务出错

> ID：13057260
> 
> 赞同：1
> 
> 时间：2012-10-24T20:33:24.143
> 
> 标签：silverlight, visual-studio-2012, wcf-data-services, odata, azure-table-storage

这是 Silverligh 中的代码。我正在尝试从 wcf 数据服务获取数据：

```
 public DataServiceQuery<Group> GetGroupsByDisplayName(string groupPartitionKey, string displayName)
    {
        DataServiceQuery<Group> query = (DataServiceQuery<Group>)(from g in this.Groups
                                                                  where g.PartitionKey == groupPartitionKey & g.DisplayName.Contains(displayName) == true
                                                                  select g);
        return query;
    } 
```

这是该查询的结果：

```
http://127.0.0.1:8080/DataService/WcfDataService.svc/Groups()?$filter=PartitionKey%20eq%20'Family'%20and%20substringof('text',DisplayName)%20eq%20true 
```

这是我的 wcf 数据服务使用该链接的响应：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?><error xmlns="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata"><code></code><message xml:lang="en-US">Not Implemented</message><innererror><message>The expression (([10007].PartitionKey == "Family") And (IIF(([10007].DisplayName == null), null, Convert([10007].DisplayName.Contains("text"))) == True)) is not supported.</message><type>System.NotSupportedException</type><stacktrace>   at System.Data.Services.Client.ExpressionWriter.ExpressionToString(DataServiceContext context, Expression e)&#xD;
   at System.Data.Services.Client.UriWriter.VisitQueryOptionExpression(FilterQueryOptionExpression fqoe)&#xD;
   at System.Data.Services.Client.UriWriter.VisitQueryOptions(ResourceExpression re)&#xD;
   at System.Data.Services.Client.UriWriter.VisitResourceSetExpression(ResourceSetExpression rse)&#xD;
   at System.Data.Services.Client.UriWriter.Translate(DataServiceContext context, Boolean addTrailingParens, Expression e, Uri&amp; uri, Version&amp; version)&#xD;
   at System.Data.Services.Client.DataServiceQueryProvider.Translate(Expression e)&#xD;
   at System.Data.Services.Client.DataServiceQuery`1.Execute()&#xD;
   at System.Data.Services.Client.DataServiceQuery`1.GetEnumerator()&#xD;
   at System.Data.Services.Client.DataServiceQuery`1.System.Collections.IEnumerable.GetEnumerator()&#xD;
   at System.Data.Services.WebUtil.GetRequestEnumerator(IEnumerable enumerable)</stacktrace></innererror></error> 
```

我究竟做错了什么？我需要使用“string.Contains”来获取数据（这是一个搜索屏幕）。如果我删除“string.Contains”部分，那么它工作正常。我正在使用 Azure 表存储、Wcf 数据服务、OData V1、Silverlight 5、Visual Studio 2012。

# wix - 在 WiX 中更改 TARGETDIR

> ID：13057263
> 
> 赞同：5
> 
> 时间：2012-10-24T20:33:29.323
> 
> 标签：wix, wix3.6

我在设置 TARGETDIR 路径时遇到问题。我曾经`dark.exe`对一个工作的 MSI 文件进行逆向工程，并阅读了我能找到的关于这个主题的任何帖子，但我似乎无法将 TARGETDIR 设置为指向路径`ProgramFiles\Manufacturer\Product`。下面是我的 WXS 文件的蒸馏，它导致我的应用程序由于某种原因被安装到我的 D 驱动器的根目录：

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Product Id="*"
             Name="FBL - Some App"
             Language="1033"
             Version="1.0.0.0"
             Manufacturer="Foo &amp; Bar Limited"
             UpgradeCode="780286c6-e064-4402-80d8-dd2c68b56c04">
        <Package InstallerVersion="200"
                 Compressed="yes"
                 InstallScope="perMachine"
                 Comments="Performs some operation that is important" />

        <MajorUpgrade DowngradeErrorMessage="A newer version of [ProductName] is already installed." />
        <Media Id="1" Cabinet="App.1.0.0.cab" EmbedCab="yes" />
        <CustomAction Id="setTARGETDIR"
                      Property="TARGETDIR"
                      Value="[ProgramFilesFolder][Manufacturer]\[ProductName]"
                      Execute="firstSequence"
                      Return="check" />

        <Directory Id="TARGETDIR" Name="SourceDir">
            <Component Id="C__App.exe"
                       Guid="{074586E9-A675-2734-A4CD-1CE520922A41}">
                <File Id="F__App.exe"
                      Name="App.exe"
                      KeyPath="yes"
                      Assembly=".net"
                     AssemblyManifest="F__App.exe"
                      AssemblyApplication="F__App.exe"
                      DiskId="1"
                      Source="D:\SomePath\bin\Debug\App.exe" />
            </Component>
        </Directory>
        <Feature Id="DefaultFeature" ConfigurableDirectory="TARGETDIR" Level="1">
            <ComponentRef Id="C__App.exe" Primary="yes" />
        </Feature>
        <Icon Id="favicon.ico" SourceFile="d:\SomePath\favicon.ico" />
        <Property Id="ARPPRODUCTICON" Value="favicon.ico" />
        <UI />
        <InstallExecuteSequence>
            <Custom Action="setTARGETDIR" Before="CostFinalize" />
        </InstallExecuteSequence>
    </Product>
</Wix> 
```

我确定我遗漏了一些简单的东西，但我无法从这里找到有关该做什么的任何进一步信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T22:28:22.963

需要进行以下修改：

```
<CustomAction Id="SetTARGETDIR"
              Directory="TARGETDIR"
              Value="[ProgramFilesFolder][Manufacturer]\[ProductName]"
              Return="check" /> 
```

和

```
<InstallExecuteSequence>
    <Custom Action="SetTARGETDIR" After="InstallValidate" />
</InstallExecuteSequence> 
```

说明：使用 Directory 属性而不是属性（它是类型 35 自定义操作）并`InstallValidate`在执行序列之后安排此操作 - 这是检查目录的写入访问权限并真正设置的时间。

（感谢来自 WiX 用户组的 Narina Chandra Sekhar 对此的回答。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-22T18:37:08.120

这很奇怪......我有同样的问题，但你的回答对我不起作用。我所需要的只是：

```
<Product>
   <SetProperty Id='TARGETDIR' Value='[ProgramFilesFolder][Manufacturer]\[ProductName]\' Before='FindRelatedProducts' />
   ...
</Product> 
```

但话又说回来，我认为我的安装程序中的其他东西可能已经从属性设置了 TARGETDIR 目录；我正在处理一些遗留的东西。

**编辑**：实际上，这是一个坏主意。很多时候，可以在安装过程的不同部分调用其中一些内置的自定义操作，因此最好添加自定义操作来设置属性。

这对我有用：

```
<Product>
   <CustomAction Id='SetTARGETDIR' Property='TARGETDIR' Value='[ProgramFilesFolder][Manufacturer]\[ProductName]\'/>
   ...
</Product>
<InstallUISequence>
   <Custom Action='SetTARGETDIR' Sequence='1'/>
   ...
</InstallUISequence>
<AdminUISequence>
   <Custom Action='SetTARGETDIR' Sequence='1'/>
   ...
</AdminUISequence> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-29T09:30:03.607

没有什么对我有用，所以我所做的是使用命令行设置安装目录的属性来运行 msi。默认情况下，我的程序将安装到驱动器 C，但有时我希望它安装到 D 驱动器，所以这就是我所做的：

```
<Directory Id="TARGETDIR" Name="SourceDir">
            <Directory Id="ProgramFilesFolder">
               <Directory Id="APPLICATIONROOTDIRECTORY" Name="XServer">                     
               </Directory>
            </Directory>
</Directory> 
```

这是命令行：

**XServer.msi /L*v log.log APPLICATIONROOTDIRECTORY="D:\Program Files (x86)\XServer"**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-14T21:11:08.733

这实际上对我有用。该`CostFinalize`操作`TARGETDIR`是定义目录的位置。

```
<SetProperty Id="TARGETDIR" Value="[ROOTDRIVE]MyCompany" Sequence="first" Before="CostFinalize">NOT Installed AND NOT TARGETDIR</SetProperty> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-06T17:22:03.450

我尝试通过自定义操作更改安装目录（因为我需要代码来找出带有代码的路径 - 长篇大论），以及什么为我解决了时间问题 - 我必须将自定义操作安排为：

```
After="CostInitialize" 
```

# joomla - K2 Joomla：如何从单个文章页面获取类别 ID？

> ID：13057265
> 
> 赞同：1
> 
> 时间：2012-10-24T20:33:39.670
> 
> 标签：joomla, joomla-k2

我正在尝试从单个项目（文章）K2 页面中获取类别 ID。我试着做：

```
JRequest::getVar( 'catid' ) 
```

但这返回空白。我从 index.php 而不是 item.php 运行此代码，因此我无权访问该`$item`对象。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:44:49.253

获取当前 itemid 修改查询是

```
$item_id = JRequest::getVar('Itemid');
$db = & JFactory::getDBO();
$query = "SELECT catid FROM #__k2_items WHERE id =".$item_id;
$db->setQuery($query);
$result = $db->loadResult();

echo $result; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T22:26:07.443

您可以尝试使用以下内容：

```
$db = JFactory::getDBO();
$query = "SELECT catid FROM #__k2_items WHERE id = 1";
$db->setQuery($query);
$result = $db->loadResult();

echo $result; 
```

您将需要更改`id = 1`为您文章的任何 ID。

请让我知道它是否有效。

# java - 休眠父子同表错误

> ID：13057266
> 
> 赞同：0
> 
> 时间：2012-10-24T20:33:43.160
> 
> 标签：java, mysql, spring, hibernate

我在同一张表中使用父子关系时遇到 Hibernate 问题。我可以做选择和插入，但我不能删除。我写了一个 JUnit 测试来看看发生了什么，并发现了一些奇怪的行为。

这是我定义我的表的方式：

```
CREATE TABLE `product` (
  `productId` bigint(20) NOT NULL AUTO_INCREMENT,
  `name` varchar(50) NOT NULL,
  `parentProductId` bigint(20) NULL DEFAULT NULL,
  PRIMARY KEY (`productId`),
  CONSTRAINT `FK_PARENTPRODUCT` FOREIGN KEY (`parentProductId`) REFERENCES `product` (`productId`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=latin1; 
```

我的产品类看起来像：

```
@Entity
@Table(name = "product")
public class Product {

    private Long productId;
    private String name;
    private Product parentProduct;
    private Set<Product> children;
    private List<CustomerProduct> productCustomers;

    public Product() {
    }

    public Product(Long productId, String name) {
        this.productId = productId;
        this.name = name;
    }

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    public Long getProductId() {
        return productId;
    }

    public void setProductId(Long productId) {
        this.productId = productId;
    }

    @NotNull
    @Size(min = 1, max = 50)
    public String getName() {
    return name;
    }

    public void setName(String name) {
    this.name = name;
    }

    @ManyToOne
    @JoinColumn(name = "parentProductId")
    public Product getParentProduct() {
        return parentProduct;
    }

    public void setParentProduct(Product parentProduct) {
        this.parentProduct = parentProduct;
    }

    @OneToMany(mappedBy = "parentProduct", fetch = FetchType.EAGER)
    public Set<Product> getChildren() {
        return children;
    }

    public void setChildren(Set<Product> children) {
        this.children = children;
    }

    @OneToMany(mappedBy = "product")
    public List<CustomerProduct> getProductCustomers() {
        return productCustomers;
    }

    public void setProductCustomers(List<CustomerProduct> productCustomers) {
        this.productCustomers = productCustomers;
    }

    @Override
    public boolean equals(Object obj) {
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        final Product other = (Product) obj;
        if (this.productId != other.productId
            && (this.productId == null || !this.productId.equals(other.productId)))
                return false;
        if ((this.name == null) ? (other.name != null) : !this.name.equals(other.name))
            return false;
        return true;
    }

    @Override
    public int hashCode() {
        int hash = 7;
        hash = 31 * hash + name.length();
        hash = 31 * hash + (name == null ? 0 : name.hashCode());
        return hash;
    }

    @Override
    public String toString() {
        return "Product [productId=" + productId + ", name=" + name + "]";
    }
} 
```

我写了一些 JUnit 测试，它们是：

```
@Test
@Transactional(readOnly=true)
public void getProductNoChildren() {
    Product p = productService.getProductById(Long.parseLong("1"));
    assertNotNull(p);
    assertTrue(p.getName().equals("Test"));
    assertNull(p.getParentProduct());
    assertTrue(p.getChildren().size() == 0);
}

@Test
@Transactional(readOnly=true)
public void getProductWithChildren() {
    Product p = productService.getProductById(Long.parseLong("10"));
    assertNotNull(p);
    assertTrue(p.getName().equals("Test_2"));
    assertNull(p.getParentProduct());
    assertTrue(p.getChildren().size() > 0);
}

@Test
@Transactional(readOnly=true)
public void getProductWithParent() {
    Product p = productService.getProductById(Long.parseLong("20"));
    assertNotNull(p);
    assertTrue(p.getName().equals("Test_3"));
    assertNotNull(p.getParentProduct());
    assertTrue(p.getParentProduct().getProductId() == Long.parseLong("2"));
    assertTrue(p.getChildren().size() == 0);
} 
```

前 2 个测试通过。第 3 个总是在 hashcode 方法的第 2 行以 NullPointerException 失败。说名称为空。我验证这仅在设置 parentProductId 时发生。我不知道为什么会这样。名称永远不应为空。我为班级定义休眠注释的方式是否有错误？

如果有人感兴趣，这是我的堆栈跟踪......

```
java.lang.NullPointerException
at com.symmetry.security.model.Product.hashCode(Product.java:145)
at java.util.HashMap.put(HashMap.java:372)
at java.util.HashSet.add(HashSet.java:200)
at java.util.AbstractCollection.addAll(AbstractCollection.java:305)
at org.hibernate.collection.PersistentSet.endRead(PersistentSet.java:352)
at org.hibernate.engine.loading.CollectionLoadContext.endLoadingCollection(CollectionLoadContext.java:261)
at org.hibernate.engine.loading.CollectionLoadContext.endLoadingCollections(CollectionLoadContext.java:246)
at org.hibernate.engine.loading.CollectionLoadContext.endLoadingCollections(CollectionLoadContext.java:219)
at org.hibernate.loader.Loader.endCollectionLoad(Loader.java:1005)
at org.hibernate.loader.Loader.initializeEntitiesAndCollections(Loader.java:993)
at org.hibernate.loader.Loader.doQuery(Loader.java:857)
at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:274)
at org.hibernate.loader.Loader.loadEntity(Loader.java:2037)
at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:86)
at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:76)
at org.hibernate.persister.entity.AbstractEntityPersister.load(AbstractEntityPersister.java:3293)
at org.hibernate.event.def.DefaultLoadEventListener.loadFromDatasource(DefaultLoadEventListener.java:496)
at org.hibernate.event.def.DefaultLoadEventListener.doLoad(DefaultLoadEventListener.java:477)
at org.hibernate.event.def.DefaultLoadEventListener.load(DefaultLoadEventListener.java:227)
at org.hibernate.event.def.DefaultLoadEventListener.proxyOrLoad(DefaultLoadEventListener.java:285)
at org.hibernate.event.def.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:152)
at org.hibernate.impl.SessionImpl.fireLoad(SessionImpl.java:1090)
at org.hibernate.impl.SessionImpl.internalLoad(SessionImpl.java:1038)
at org.hibernate.type.EntityType.resolveIdentifier(EntityType.java:630)
at org.hibernate.type.EntityType.resolve(EntityType.java:438)
at org.hibernate.engine.TwoPhaseLoad.initializeEntity(TwoPhaseLoad.java:139)
at org.hibernate.loader.Loader.initializeEntitiesAndCollections(Loader.java:982)
at org.hibernate.loader.Loader.doQuery(Loader.java:857)
at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:274)
at org.hibernate.loader.Loader.loadEntity(Loader.java:2037)
at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:86)
at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:76)
at org.hibernate.persister.entity.AbstractEntityPersister.load(AbstractEntityPersister.java:3293)
at org.hibernate.event.def.DefaultLoadEventListener.loadFromDatasource(DefaultLoadEventListener.java:496)
at org.hibernate.event.def.DefaultLoadEventListener.doLoad(DefaultLoadEventListener.java:477)
at org.hibernate.event.def.DefaultLoadEventListener.load(DefaultLoadEventListener.java:227)
at org.hibernate.event.def.DefaultLoadEventListener.proxyOrLoad(DefaultLoadEventListener.java:285)
at org.hibernate.event.def.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:152)
at org.hibernate.impl.SessionImpl.fireLoad(SessionImpl.java:1090)
at org.hibernate.impl.SessionImpl.get(SessionImpl.java:1005)
at org.hibernate.impl.SessionImpl.get(SessionImpl.java:998)
at com.symmetry.security.dao.hibernate.HibernateAbstractDao.findById(HibernateAbstractDao.java:52)
at com.symmetry.security.dao.hibernate.HibernateAbstractDao$$FastClassByCGLIB$$b227fdff.invoke(<generated>)
at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:191)
at org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:689)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:622)
at com.symmetry.security.dao.hibernate.HibernateProductDao$$EnhancerByCGLIB$$415fcf17.findById(<generated>)
at com.symmetry.security.service.ProductServiceImpl.getProductById(ProductServiceImpl.java:42)
at com.symmetry.security.service.ProductServiceImpl$$FastClassByCGLIB$$8b8f4a88.invoke(<generated>)
at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:191)
at org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:689)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:622)
at com.symmetry.security.service.ProductServiceImpl$$EnhancerByCGLIB$$b032e753.getProductById(<generated>)
at com.symmetry.security.service.ProductServiceImplUnitTest.getProductWithParent(ProductServiceImplUnitTest.java:87)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:49)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:43:45.920

你有一个属性访问权限，让 Hibernate 使用 setter/getter 来管理对象。但是在您的 hashcode() 和 equals() 方法中，您直接使用绕过 Hibernate 的字段。

此外，如果您直接访问另一个类的 equals() 方法字段，如果该对象是代理，这将失败，因为它将尝试访问代理的字段，而真实对象本身是该代理的另一个字段。所以在这种情况下，你也应该使用 getter。

# node.js - 在引号中渲染主干模板变量

> ID：13057270
> 
> 赞同：3
> 
> 时间：2012-10-24T20:33:51.850
> 
> 标签：node.js, backbone.js, pug

您好我正在使用 Backbone 将 Jade 模板呈现为 HTML。视图如下所示：

```
script(type="text/template",id="waiting_call_template") 
    div(class="call-code") <%= channelId %>
    div(style="display: inline-block; vertical-align: top; margin-right: 20px; width: 130px;")
      div(class="statistic", title='<%= fullPage %>') <%= page %> 
```

呈现时，HTML 输出如下所示：

```
<div title="&lt;%= fullPage%&gt;" class="statistic">test.html</div> 
```

发生这种情况是因为 fullPage 变量在引号中。如何让 Backbone 识别 fullPage 是一个变量，即使它在引号中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-30T07:08:25.727

如果您使用此脚本将标记更改为 {{- varName }} ，它会起作用：

```
_.templateSettings.escape = /\{\{-(.*?)\}\}/g 
```

在您的情况下，您必须将模板更改为：

```
script(type="text/template",id="waiting_call_template") 
    div(class="call-code") {{- channelId }}
    div(style="display: inline-block; vertical-align: top; margin-right: 20px; width: 130px;")
      div(class="statistic", title='{{- fullPage }}') {{- page }} 
```

来源：[下划线模板 - 更改标记标记](https://stackoverflow.com/questions/9802402/underscore-templating-changing-token-markers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:45:15.183

当您想在引号之间打印某些内容时，请使用“#{}”语法：

```
div(class="statistic", title="#{fullPage}") #{page} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-04T09:02:37.137

只需取消转义您的模板。使用下划线'unescape'。在你的骨干中：

`_.template( $('#tmpl-following').html() ),`

改成

`_.template( _.unescape( $('#tmpl-following').html() ) ),`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T20:40:04.597

试试这个：

```
div(class="statistic", title=<%= fullPage %>) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T17:52:05.557

您是否尝试过下划线的 escape() 函数？

从[下划线手册](http://underscorejs.org/)：

> _.escape(string) 转义字符串以插入 HTML，替换 &、<、>、"、' 和 / 字符。

# c# - 声明新类型

> ID：13057272
> 
> 赞同：1
> 
> 时间：2012-10-24T20:34:12.390
> 
> 标签：c#, types, numbers

假设我有以下课程：

```
class Number{

} 
```

然后我想声明`Number`类型的变量，并给它们一个值，如 in`int`或`uint`或任何类型的变量：

```
Number n = 14; 
```

我不确定我的问题是否好，但请帮助我，因为我是 C# 新手

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T20:36:33.660

您可以创建隐式转换运算符来处理此类情况。您的类需要隐式转换运算符将调用的构造函数。例如：

```
class Number
{
    public int Value { get; set; }

    public Number(int initialValue)
    {
        Value = initialValue;
    }

    public static implicit operator Number(int initialValue)
    {
        return new Number(initialValue);
    }
} 
```

然后线

```
Number n = 14; 
```

将等效于

```
Number n = new Number(14); 
```

您也可以在类中添加一个运算符以朝另一个方向发展：

```
public static implicit operator int(Number number)
{
    if (number == null) {
        // Or do something else (return 0, -1, whatever makes sense in the
        // context of your application).
        throw new ArgumentNullException("number");
    }

    return number.Value;
} 
```

**小心**使用隐式运算符。它们是很好的语法糖，但它们也会使我们更难判断特定代码块中的实际情况。您还可以使用显式运算符，这需要进行类型转换才能调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T20:39:20.527

您想查看[隐式](http://msdn.microsoft.com/en-us/library/z5z9kes2%28v=VS.71%29.aspx)以创建从 int 到您的数字类的隐式转换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T20:39:39.213

您可以在类中重载运算符：

```
class Number
{
    public static Number operator=(int i)
    {
        ...
    }
} 
```

顺便说一句，对于像这样的简单和小类，最好使用结构，而不是类。

# css - CSS3 线性渐变 100% 高度不固定

> ID：13057274
> 
> 赞同：2
> 
> 时间：2012-10-24T20:34:19.807
> 
> 标签：css, background, height

我有html：

```
<!doctype html>
    <html>
    <head>
        <title>test</title>
        <meta charset="utf-8"/>
        <meta name="description" content="" />
        <meta name="keywords" content="" />
        <meta name="viewport" content="width=device-width"/>
        <meta name="format-detection" content="telephone=no"/>
        <!--[if lt IE 9]>
            <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
    </head>
    <body>
    <section class="container">
        //full html on jsfiddle
    </section>
    </body>
    </html> 
```

我有 CSS

```
html, body {height:100%;margin:0;}
body {
    background-color:#f4cbc9;
    background-image: linear-gradient(top, rgb(171,153,180) 0%, rgb(244,203,201) 50%, rgb(247,231,208) 100%);
    background-image: -o-linear-gradient(top, rgb(171,153,180) 0%, rgb(244,203,201) 50%, rgb(247,231,208) 100%);
    background-image: -moz-linear-gradient(top, rgb(171,153,180) 0%, rgb(244,203,201) 50%, rgb(247,231,208) 100%);
    background-image: -webkit-gradient(linear,left top,left bottom,color-stop(0, rgb(171,153,180)),color-stop(0.50, rgb(244,203,201)),color-stop(1, rgb(247,231,208)));
    background-image: -webkit-linear-gradient(top, rgb(171,153,180) 0%, rgb(244,203,201) 50%, rgb(247,231,208) 100%);
    background-image: -ms-linear-gradient(top, rgb(171,153,180) 0%, rgb(244,203,201) 50%, rgb(247,231,208) 100%);
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ab99b4', endColorstr='#f4cbc9');
} 
```

我需要背景（线性渐变）来获得全身高度。没有固定，没有重复。

请参阅[JsFiddle](http://jsfiddle.net/CYrpd/)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-24T20:39:24.597

使用`min-height`而不是`height`.

[http://jsfiddle.net/CYrpd/6/](http://jsfiddle.net/CYrpd/6/)

这将使 bg 拉伸到身体的完整尺寸，但永远不会小于窗口显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-29T15:01:00.290

html {最小高度：100%; }

身体{最小高度：100%；}

这对我帮助很大

# c# - 将 C# 行转换为 VB.net

> ID：13057276
> 
> 赞同：0
> 
> 时间：2012-10-24T20:34:21.210
> 
> 标签：c#, vb.net, c#-to-vb.net

我试图将以下 c# 代码转换为 vb.net。我看到问题是我不熟悉 OrderByDescending() 参数的语法 什么是 C# 行的正确 VB.Net 等价物？

```
//C# code
SelectedFolder.Search("ALL", true).OrderByDescending(_ => _.Date).ToList();

//VB.Net part which doesn't work
For Each msg In SelectedFolder.Search("ALL", True).OrderByDescending(Function(_).[Date]).ToList() 
```

在 [Date] 之前删除下划线后，错误变为，

> 错误 1 ​​应为标识符。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T20:37:34.413

该`_`字符是 VB 中的续行符。尝试将变量名称更改为更常见的名称，例如`x`

```
For Each msg In SelectedFolder.Search("ALL", True).OrderByDescending(Function(x) x.[Date]).ToList() 
```

# javascript - dojo.form.Select onChange 未触发

> ID：13057279
> 
> 赞同：3
> 
> 时间：2012-10-24T20:34:36.457
> 
> 标签：javascript, dojo

我目前正在使用 dojo 1.7 进行编程。我陷入了 dojo.forms.Select 的 onChange 事件。在我看来，它从未被解雇过。我试图在互联网上搜索。但我不走运。有什么问题？任何建议或帮助将不胜感激。

用于将事件附加到 dojo.form.Select 的代码：

```
var findLayerListOnChangeEvent = dojo.connect(findLayerListSelect, "onChange", function(newValue) {
doFindLayerListChange(); 
```

});

dojo.form.Select 的 HTML 代码

```
<select id="findLayerList" data-dojo-type="dijit.form.Select" data-dojo-props="required:true, sortByLabel:false" name="findLayerList" disabled="disabled" maxHeight=-1 style="width:150px;">
<option value="ID">Layer List</option> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T04:45:30.707

JS 代码中的 findLayerListSelect 是什么。

在 HTML 代码中，将 id 替换为 data-dojo-id。

最好用您的代码编写一个 jsfiddle，我可以帮助您修复它。

# sql - 分组和总问题

> ID：13057281
> 
> 赞同：0
> 
> 时间：2012-10-24T20:34:37.403
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个名为 Phone_Details 的表，数据如下所示：

```
Name            DeviceType  InvoiceDate TotalCharges
Aguilera, Alex  Smart Phone 8/3/2012    606.55
Aguilera, Alex  Data Card   8/3/2012    26.17 
```

我希望输出为：

```
Name            Total Spend    # of devices    Avg Spend    # of Bills >300
Aguilera, Alex  632.72              2            316.36            1 
```

我试过这样做：

```
Select Name,Sum(Totalcharges), Count(DeviceType),Sum(Totalcharges)/Count(DeviceType)
from dbo.Phone_Details
group by Name 
```

但是我怎样才能得到最后一列呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T20:35:45.100

```
 Select Name,
         Sum(Totalcharges) [Total Spend],
         Count(DeviceType) [# of devices],
         Sum(Totalcharges)/Count(DeviceType) [Avg Spend],
         Count(CASE WHEN TotalCharges > 300 then 1 end)  [# of Bills > 300]
    from dbo.Phone_Details
group by Name 
```

# javascript - connect.router 错误以及如何在节点中重写它

> ID：13057291
> 
> 赞同：0
> 
> 时间：2012-10-24T20:35:04.563
> 
> 标签：javascript, node.js, module, connect

我正在阅读 Richard Rodger 的“Beginning Mobile Application Development in the Cloud”，一些示例代码使用了 Connect，我发现它不再允许直接对路由器层进行请求处理。这是一个给出“没有方法路由器”错误的示例：

```
var common = require('./common.js');
var util    = common.util;
var connect = common.connect;
var mongo   = common.mongo;

var server = connect.createServer( 
  connect.router(function(app){ //gives the error: "has no method 'router'

    // POST {id:<string>}
    app.post('/todo/stats/init',function(req,res,next){
      common.readjson(req,function(json){
        common.sendjson(res,{ok:true,id:json.id});
      })
    })

    // POST {time:<UTC-millis>,total:<todos>,done:<done todos>}
    app.post('/todo/stats/collect/:id',function(req,res,next){
      var id = req.params.id;
      common.sendjson(res,{ok:true,id:id});
      common.readjson(req);
    })
  })
);

mongo.init('todo','localhost');
mongo.open()

server.listen(3000); 
```

大多数关于节点的书籍都包含不起作用的代码，对于现在开始学习并在一分钟后取消学习的人来说非常令人沮丧。开源框架经历了惊人的快速变化！我只需要学习如何以正确的方式做到这一点。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:25:58.570

是这样吗？

```
var common = require('./common.js');
var util    = common.util;
var connect = common.connect;
var mongo   = common.mongo;

connect.createServer(function (req, res, next) {

    app.post('/todo/stats/init',function(req,res,next){
      common.readjson(req,function(json){
        common.sendjson(res,{ok:true,id:json.id});
      })
    })

    app.post('/todo/stats/collect/:id',function(req,res,next){
      var id = req.params.id;
      common.sendjson(res,{ok:true,id:id});
      common.readjson(req);
    })

        mongo.init('todo','localhost');
        mongo.open();

}).listen(3000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T23:33:41.937

您安装的**连接**模块比本书最新。从这个博客尝试解决方案：http: [//blog.riff.org/2012_04_09_missing_the_connect_router_middleware_for_nodejs](http://blog.riff.org/2012_04_09_missing_the_connect_router_middleware_for_nodejs)

或通过运行命令使用**连接路由器**`npm install connect-route`模块： 或从 github 克隆：`git clone git://github.com/baryshev/connect-route.git`到您的**node_module**目录，然后通过以下方式安装：`cd connect-route`-->`npm install -d`

# ios - 从文档目录加载 UIImage

> ID：13057294
> 
> 赞同：12
> 
> 时间：2012-10-24T20:35:13.933
> 
> 标签：ios

我正在尝试`UIImage`从文档目录加载 a 并将其设置为 a `UIImageView`，如下所示：

```
NSString  *pngfile = [[MyUtil getLocalDirectory] stringByAppendingPathComponent:@"school.png"];
NSLog(@"%@", pngfile);
if ([[NSFileManager defaultManager] fileExistsAtPath:pngfile]) {
    NSData *imageData = [NSData dataWithContentsOfFile:pngfile];            
    UIImage *img = [UIImage imageWithData:imageData];
    [schoolImage setImage:img];
} 
```

但是，每当我尝试上述方法时，图像永远不会加载。图像在`Documents/MyAppCustomDirectory/school.png`. 从该目录加载上述内容是否正确？

我还尝试了其他一些方法：`UIImage imageWithContentsOfFile`，以及基于 SO 响应的其他方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-24T20:40:33.433

要获取文档目录，您应该使用：

```
NSArray  *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDir  = [documentPaths objectAtIndex:0];
NSString  *pngfile = [documentsDir stringByAppendingPathComponent:@"school.png"]; 
```

我不太确定您是否还需要附加“MyAppCustomDirectory”，但我不这么认为。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-11-23T16:55:55.587

**斯威夫特 4 解决方案：**

```
guard let documentsDirectory = try? FileManager.default.url(for: .documentDirectory,
                                                                in: .userDomainMask,
                                                                appropriateFor:nil,
                                                                create:false)
                else {
                    // May never happen
                    print ("No Document directory Error")
                    return nil
                }

// Construct your Path from device Documents Directory
var imagesDirectory = documentsDirectory

// Only if your images are un a subdirectory named 'images'
imagesDirectory.appendPathComponent("images", isDirectory: true)

// Add your file name to path
imagesDirectory.appendPathComponent("school.png")

// Create your UIImage?    
let result = UIImage(contentsOfFile: imagesDirectory.path) 
```

# android - 当我单击时，如何在其下方放置一个带有按钮的 Edittext，它会识别它是正确还是错误？

> ID：13057301
> 
> 赞同：0
> 
> 时间：2012-10-24T20:35:46.967
> 
> 标签：android, android-edittext, android-button, identify

我的意图是在下面放一个`Edittext`，和a `Button`，当用户放一个特定的单词并单击按钮时，该值是正确的，而其他所有不同的单词都是错误的..如何用代码识别它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T07:00:05.920

```
 btn.onClickListiner(this);

  @Override
   public void onClick(View v) {
      if (v == btn) {
   // check word
     String word = editText.getText().toString(); // don't forget "toString()" .
    // checking word below :

  }} 
```

# java - 如何使用 JCodeModel 创建？

> ID：13057304
> 
> 赞同：3
> 
> 时间：2012-10-24T20:35:53.783
> 
> 标签：java, generics, sun-codemodel

我在 JCodeModel 上使用了 JClass.narrow 来为类型创建必要的泛型，但我不知道如何生成这样的东西。

```
private Class<? extends Serializable> dataType; 
```

如何生成？延伸部分？

欢迎任何帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-26T17:06:29.893

弄清楚了。下面是获取 JClass 引用的示例`Class<? extends Serializable>`。希望它可以帮助某人。

```
JClass temp = codeModel.ref(Class.class).narrow(codeModel.ref(Serializable.class).wildcard()); 
```

# ios - 对通行证进行分组时，存折 passURL 未打开正确的通行证

> ID：13057307
> 
> 赞同：2
> 
> 时间：2012-10-24T20:36:08.010
> 
> 标签：ios, cocoa, ios6, passbook

我在尝试打开 Pass 的 passURL 时遇到存折问题，如下所示：

```
PKPass *pass = .....
[[UIApplication sharedApplication] openURL:[pass passURL]]; 
```

现在这在大多数情况下都可以正常工作，但是当我的存折中有很多通行证时，有时我的通行证会像这样分组，并且必须刷过：

![通行证是分组的，需要刷过； 看到底部的 UIPageControl 了吗？](../Images/bce5af8f8175144f913f138c4f239808.png)

这里的问题是，当通行证以这种方式分组时，我在上面提供的代码位只会打开组中的任何通行证，而不一定是 passURL 中提供的那个。

现在这是我测试过的东西，现在知道了：

*   通行证有不同的通行证 URL
*   通行证是根据一系列标准进行分组的；我有来自同一个组织的通行证没有被分组，但有时被分组。与样式相同（优惠券、活动门票等）

我浏览了 Apple 的开发论坛，但没有提到这个错误（如果它确实是一个错误而不是我的错误）。我想知道是否有其他人看到它，以及他们是否找到了一些解决方法或可以揭示我的错误。

谢谢，

编辑：

我们所有的通行证都使用完全相同的通行证类型标识符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T02:18:12.820

谢谢约翰。我面临着完全相同的问题。这个问题在 iOS 6.1 中仍然存在。

我还进行了一些测试，分组逻辑似乎如下。

*   来自不同传递类型 ID 的传递永远不会分组。
*   不同风格的通行证（优惠券、登机牌等）从不分组。
*   可以对具有相同传递样式的传递进行分组。分组是基于数据字段、条形码类型，可能还有其他一些字段之间的相似性。但似乎organizationName、description、logoText、foregroundColor 和 backgroundColor 在这里并没有起到很大的作用。

希望有帮助。

# javascript - 从 Chrome 扩展访问元素的事件对象

> ID：13057312
> 
> 赞同：1
> 
> 时间：2012-10-24T20:36:22.750
> 
> 标签：javascript, jquery, google-chrome-extension

在页面中存在一个绑定事件，如下所示：

```
$('form#signin_form').submit(function() {
  // ...
}) 
```

在 Chrome 扩展中，我找到了以下表单：

```
$form = $("form").has(':password').first() 
```

但是请求绑定在表单上的事件是未定义的（这是通过清单的 content_scripts 部分加载的，而不是注入页面中）：

```
$.data($form, 'events') // undefined 
```

是否无法从内容脚本的元素中获取事件数据？

# java - 在 GridLayout 中居中单选按钮

> ID：13057322
> 
> 赞同：4
> 
> 时间：2012-10-24T20:36:47.690
> 
> 标签：java, swing, user-interface, radio-button, grid-layout

我正在尝试使用 GridLayout 创建一个应用程序，但我不知道如何将一些单选按钮居中。窗口最终看起来像：![在此处输入图像描述](../Images/b8510ccf5a1370578be57119b3e4a2fa.png)

这是我添加单选按钮的方式：

```
JPanel qArea = new JPanel(new GridLayout(0,5));
...
qArea.add(new JPanel());
    qArea.add(o1);
    qArea.add(o2);
    qArea.add(o3);
    qArea.add(o4);
    while(i<50)
    {
        if (i%5 == 0)
            qArea.add(qs[cq++]);
        else
            qArea.add(buttons[crb++]);
        i++;
    } 
```

有什么办法可以让单选按钮在它们的列中居中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T20:48:35.123

您可以使用：

```
radioButton.setHorizontalAlignment(SwingConstants.CENTER); 
```

# ruby-on-rails - 如何在黄瓜场景中跳过登录以加快测试速度？

> ID：13057324
> 
> 赞同：4
> 
> 时间：2012-10-24T20:36:57.087
> 
> 标签：ruby-on-rails, cucumber, capybara, selenium-webdriver

我有一个 rails-app，我正在尝试让我的 cucumber/capybara/selenium-webdriver 测试更快。我的大多数场景看起来像：

```
@javascript
Feature: Writing reports
  In order .....

  Background:
  Given I am logged in

  Scenario: Scenario 1
    ...........
  Scenario: Scenario 2
    ........... 
```

大部分时间都花在“鉴于我已登录”中，我去注册页面创建用户并登录。身份验证是使用 Devise 实现的。

**我怎样才能使我根本不必在测试环境中登录？**

**是否有其他最佳实践来绕过繁琐的登录步骤？**（并且只保留那些专门测试登录/注册的场景的登录）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T00:17:27.647

**您的黄瓜场景是您的生活和呼吸文档。**如果您需要登录才能使用应用程序的该部分，那么您的黄瓜步骤应该明确说明。

至于你在 Capybara 的引擎盖下叫什么。您可以查看设计会话控制器并直接在集成测试中使用相同的方法调用。但是，如果 Devise 更改了它的实现，您的集成测试将会中断。**在可能的情况下，您的集成测试不应关注任何底层实现细节。**

最容易维护的代码和最可靠的测试是按照用户的意愿填写表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-30T09:12:19.987

你的场景中有很多 UI 细节。这使得很难理解您真正在验证哪种行为。

场景名称提供了一些提示，但 Given/When/Then 中的具体示例包含许多混淆目的的细节。

```
Scenario: Login with invalid username/password
  Given I am signed out
  When I log in with invalid user credentials
  Then should I get an error message

Scenario: Login with valid username/password and valid PIN
  Given I am signed out
  When I log in with valid credentials
  then should I be greeted 
```

这两个示例不包含有关链接或 pin 表单的任何详细信息。我将这些视为我将在堆栈中下推的实现细节。我会将它们推送到步骤正在使用的辅助类。您似乎正在验证 Web 应用程序，我会让这些详细信息存在于支持这些步骤的页面对象中。

我还会考虑删除人称代词的使用，并将`I`其改为角色。系统用户的典型角色。角色有一个名字。假设我们创建了一个名为“Ann”的角色，她是一名在行政部门工作的 35 岁女性。这将使我有机会将场景重写为

```
Scenario: Login with invalid username/password
  Given Ann am signed out
  When Ann log in with invalid user credentials
  Then will she receive an error message

Scenario: Login with valid username/password and valid PIN
  Given Ann am signed out
  When Ann log in with valid credentials
  then should Ann be greeted 
```

这给了我们一些背景信息，我们知道安是谁。我们可以将她的用户名和密码保存在我们的支持类中，并期望实现能够正确使用它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T22:50:20.463

如果您正在使用 Warden（Devise 在其上运行），可以查看[http://blog.crowdint.com/2012/11/02/using-warden-to-login-logout-within-your-cucumber-tests.html](http://blog.crowdint.com/2012/11/02/using-warden-to-login-logout-within-your-cucumber-tests.html) .

作者提出了一种使用 Warden 助手代替填写表格的方法。基本上使用纯 Ruby 登录，而不是通过浏览器登录。对于专门测试登录/注销功能的场景，您仍将测试填写各个字段，但这可能会加快您的其他情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-23T23:00:40.893

1.  不要注册用户。就像`User.create!`Given 步骤的一部分。并且只能通过 Web UI 登录。

2.  尽可能避免`@javascript`。通过这种方式，您可以使用设计测试助手`sign_in`，而不是通过 Web UI。

3.  使用更快的 javascript 驱动程序。例如，在撰写本文时，[poltergeist](https://github.com/jonleighton/poltergeist)在我的机器上的运行速度大约是 Firefox 的两倍。

# android - PhoneGap 上的 ClassNotFoundException Android 入门

> ID：13057325
> 
> 赞同：3
> 
> 时间：2012-10-24T20:37:08.657
> 
> 标签：android, cordova

我按照 PhoneGap 的 Android 入门说明进行操作。唯一与步骤中描述的不完全一样的是，我有科尔多瓦 2.1.0 版。该应用程序在我的手机上构建并安装，但在启动后会给出 ClassNotFoundException。

java.lang.RuntimeException：无法实例化活动 ComponentInfo{com.example.phonegaptest/com.example.phonegaptest.MainActivity}：java.lang.ClassNotFoundException：com.example.phonegaptest.MainActivity in loader dalvik.system.PathClassLoader [/data /app/com.example.phonegaptest-2.apk]

MainActivity 是应用程序中的唯一类。为什么找不到？

更新：这是我的清单：

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<supports-screens 
    android:largeScreens="true" 
    android:normalScreens="true" 
    android:smallScreens="true" 
    android:resizeable="true" 
    android:anyDensity="true" />

<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.BROADCAST_STICKY" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" 
        android:configChanges="orientation|keyboardHidden|keyboard|screenSize|locale"
        >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T12:48:02.903

我解决了这个问题，但我不喜欢这个解决方案。我进入项目的 Eclipse 构建路径设置，并选中复选框以导出项目所依赖的三个 jar。这解决了问题。然后我开始取消选中它们以找出我真正需要为哪一个执行此操作，并且在取消选中所有框后，程序仍然运行。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-30T16:22:50.787

升级到 v22 后，我也面临类似的情况，当我将 jar 文件添加到它开始工作的构建路径时

# html - 如何引导机器人从我的 URL 下载哪个缩略图？

> ID：13057328
> 
> 赞同：3
> 
> 时间：2012-10-24T20:37:13.307
> 
> 标签：html, metadata, thumbnails, facebook-opengraph

如今，许多网站都能够从 URL 中提取最合适的缩略图。例如，它在这里找到了一个无头超人的图片：![来自 Facebook 状态更新器的示例](../Images/2bc9fb4e774f34aea86d867ee147cfb3.png) 例如， [来自这篇文章](http://www.newstatesman.com/steven-baxter/2012/10/superman-vs-blogosphere)。

假设我想控制像这样获取我的 URL 的缩略图机器人，我可以使用 HTML 元标记或其他东西来做到这一点吗？特别是我想到的我的页面没有比其他所有页面都大的图片。

我确信没有一个可靠的标准，但也许有一个我可以利用的体面的约定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T23:32:27.653

把它放在`<head></head>`标签之间。

```
<meta property="og:image" content="http://ia.media-imdb.com/images/rock.jpg" /> 
```

[开放图协议](http://ogp.me/)

# javascript - 使用 require.js 全局设置 lodash / underscore 模板设置

> ID：13057330
> 
> 赞同：8
> 
> 时间：2012-10-24T20:37:17.170
> 
> 标签：javascript, requirejs, underscore.js

使用[RequireJS](http://www.requirejs.org)时有没有办法设置`templateSettings`for [lodash](http://lodash.com)？

现在在我的主要创业公司中，

```
 require(['lodash', 'question/view'], function(_, QuestionView) {
    var questionView;
    _.templateSettings = {
      interpolate: /\{\{(.+?)\}\}/g,
      evaluate: /\{\%(.+?)\%\}/g
    };
    questionView = new QuestionView();
    return questionView.render();
  }); 
```

但它似乎不想设置`templateSettings`全局，因为当我`_.template(...)`在模块中使用时，它想使用默认值`templateSettings`。问题是我不想在每个使用`_.template(...)`.

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-28T02:36:23.350

根据@Tyson Phalp 的建议，这意味着[这个 SO question](https://stackoverflow.com/questions/8842223/share-resources-across-different-amd-modules)。
我根据您的问题对其进行了调整，并使用 RequireJS 2.1.2 和[SHIM configuration](http://requirejs.org/docs/api.html#config-shim)对其进行了测试。
这是`main.js`文件，这就是 requireJS 配置所在的位置：

```
require.config({
/*  The shim config allows us to configure dependencies for
    scripts that do not call define() to register a module */

    shim: {
      underscoreBase: {
        exports: '_'
      },
      underscore: {
        deps: ['underscoreBase'],
        exports: '_'
      }

    },
    paths: {
      underscoreBase: '../lib/underscore-min',
      underscore: '../lib/underscoreTplSettings',
    }
});

require(['app'],function(app){
  app.start();
}); 
```

然后您应该`underscoreTplSettings.js`使用您的 templateSettings 创建文件，如下所示：

```
define(['underscoreBase'], function(_) {
    _.templateSettings = {
        evaluate:    /\{\{(.+?)\}\}/g,
        interpolate: /\{\{=(.+?)\}\}/g,
        escape: /\{\{-(.+?)\}\}/g
    };
    return _;
}); 
```

因此，您的模块`underscore`将包含下划线库和您的模板设置。
从您的应用程序模块中只需要该`underscore`模块，以这种方式：

```
define(['underscore','otherModule1', 'otherModule2'], 
   function( _, module1, module2,) { 
      //Your code in here
   }
); 
```

我唯一的疑问是我`_`两次导出相同的符号，即使这项工作很艰难，我也不确定这是否被认为是一种好的做法。

==========================

**替代解决方案：** 这也可以正常工作，我想它更干净一点，避免创建和需要额外的模块作为上述解决方案。我已经使用初始化函数更改了 Shim 配置中的“导出”。如需进一步了解，请参阅[Shim 配置参考](http://requirejs.org/docs/api.html#config-shim)。

```
//shim config in main.js file
shim: {     
  underscore: {
      exports: '_',
      init: function () {
        this._.templateSettings = {
          evaluate:/\{\{(.+?)\}\}/g,
          interpolate:/\{\{=(.+?)\}\}/g,
          escape:/\{\{-(.+?)\}\}/g
        };
        return _; //this is what will be actually exported! 
      }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T18:06:23.533

您应该将带有模板设置的**_**变量作为函数参数或全局对象中的属性（浏览器的**窗口**或**nodejs**的进程）传递。

```
_.templateSettings = {
      interpolate: /\{\{(.+?)\}\}/g,
      evaluate: /\{\%(.+?)\%\}/g
};
questionView = new QuestionView(_); 
```

或者

```
_.templateSettings = {
      interpolate: /\{\{(.+?)\}\}/g,
      evaluate: /\{\%(.+?)\%\}/g
};
window._ = _ 
```

第一种选择更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-04T16:54:25.203

请记住，如果您使用下划线 >=1.6.0 或 lodash-amd，则解决方案非常简单：

“main.js”配置文件

```
require.config({
  baseUrl: './', // Your base URL
  paths: {
    // Path to a module you create that will require the underscore module.
    // You cannot use the "underscore" name since underscore.js registers "underscore" as its module name.
    // That's why I use "_".
    _: 'underscore',

   // Path to underscore module 
   underscore: '../../bower_components/underscore/underscore',
  }
}); 
```

您的“_.js”文件：

```
define(['underscore'], function(_) {

  // Here you can manipulate/customize underscore.js to your taste.
  // For example: I usually add the "variable" setting for templates
  // here so that it's applied to all templates automatically.

  // Add "variable" property so templates are able to render faster!
  // @see http://underscorejs.org/#template
  _.templateSettings.variable = 'data';

  return _;
}); 
```

一个模块文件。它需要我们的“_”模块，该模块需要“下划线”并对其进行修补。

```
define(['_'], function(_){
  // You can see the "variable" property is there
  console.log(_.templateSettings);   
}); 
```

# sql-server-2008 - 链接服务器不需要加密

> ID：13057332
> 
> 赞同：0
> 
> 时间：2012-10-24T20:37:23.520
> 
> 标签：sql-server-2008, encryption

我正在尝试将链接服务器从 Windows 2k3 / SQL Server 2000 复制到 Windows 2008 / SQL 2008 R2 设置。

SQL 2000 链接服务器的设置如下：

```
srvname=blah.blah.com
srvproduct=SQL Server
providername=SQLOLEDB
datasource=blah.blah.com
srvnetname=blah.blah.com
rpc=1
rpcout=1
dataaccess=1 
```

SQL 2008 R2 链接服务器的设置方式相同。我已经复制了远程用户，一切似乎都很好，除了当我尝试连接时，我得到了这个错误：

```
 OLE DB provider "SQLNCLI10" for linked server "blah.blah.com" returned message "Client unable to establish connection". (Microsoft SQL Server, Error: 20)
 Encryption not supported on SQL Server 
```

我仍然可以访问 SQL 2000 机器，并且可以正常运行查询。我猜问题是 Windows2008 机器正在尝试发送加密的数据，但链接服务器说它无法处理加密。类似的东西。我玩过各种不同的数据源类型，但似乎没有任何结果。我无权访问远程服务器，所以我不知道它上面有什么操作系统/数据库。

任何比我拥有更多 SQL 知识的人都可以为我指明正确的方向吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T17:14:44.890

万岁！我已经做到了。对于将来可能会发现此问题的任何人，这就是我所做的：

1.  创建到 SOMESERVER.COM 的 ODBC 连接，将其命名为 dsnSOME
    *   驱动程序：SQL Server
    *   名称： dsnSOM
    *   服务器：SOMESERVER.COM
2.  创建到 dsnSOM 的链接服务器：
    *   链接服务器：“SOMESERVER”（我认为这不重要）
    *   提供程序：用于 ODBC 驱动程序的 Microsoft OLE DB 提供程序
    *   产品名称： dsnSOME
    *   数据来源：dsnSOME

就是这样。现在，当我调用存储过程时，我调用：

```
[SOMESERVER].database.owner.storedprocedure 
```

它有效！

似乎无论出于何种原因，当尝试将 SQL 64 位存储过程直接运行到 SQL 32 位链接服务器时，它会给出关于加密的奇怪消息。但是通过 ODBC 并且效果很好。

# java - 创建一个在数组中搜索用户输入值的方法，如果有的话输出结果？

> ID：13057340
> 
> 赞同：1
> 
> 时间：2012-10-24T20:38:05.973
> 
> 标签：java, methods, input, arraylist, output

我有一个存储 4 个数组列表的程序：songName、songArtist、songAlbum 和 songYear，用户可以全部添加、编辑、改组和删除。我想创建一个方法，在调用时要求用户输入一个字符串，然后搜索数组并打印任何相应的结果。例如，如果我在 songName 数组中搜索标题中带有“The”的任何歌曲，它们会在每一行输出一首歌曲。

有人可以帮我解决这个问题吗？提前致谢 ：）

我的代码：

主类：

```
package ca1;

//imports the scanner
  import java.util.Scanner;

public class MainClass extends UserInput {

        public String nextInt;

        public static void main(String[] args) {

      //Links to the UserInput class to create an object that stores
      //user input    
        UserInput ui = new UserInput();

      //Creates new scanner object
        Scanner input = new Scanner(System.in);

      //Declares the int "opt" so it can be used in the menu  
        int opt;

        //Calls Methods Class so methods can be used below
        Methods methodsFunctions = new Methods();

        //initial prompt only displayed when program is first ran
        System.out.println("Welcome to your music library");

        //Usig a do while loop so that the program keeps running until 
        //a specific condition is met, in this case it's when 0 is selected.
        do 
        {

          //Menu Prompts printed to the screen for the user to select from
            System.out.println("........ \n");
            System.out.println("Press 0 to Exit\n");
            System.out.println("Press 1 to Add a Song\n");
            System.out.println("Press 2 to View All Songs\n");
            System.out.println("Press 3 to Remove a Song\n");
            System.out.println("Press 4 to Edit Song Information\n");
            System.out.println("Press 5 to Shuffle Library\n");
            System.out.println("Press 6 to Search (by name) \n");
            System.out.println("Press 7 to Remove ALL Songs\n");

          //Monitors the next Int the user types
            opt = input.nextInt();

            //"if" statements
            if (opt == 0) 
            {
            //This corresponds to the condition of the while loop,      
            //The program will exit and print "Goodbye!" for the user.  

             System.out.println("Goodbye!");  
            } 

            else if (opt == 1)                 
            { 
             //This method allows the user to add a song to the library.
             //With the format being Title, Artist, Year.

               methodsFunctions.addEntry();
            }

            else if (opt == 2)
            {
              //This method prints the contents of the Array List to the screen  

                methodsFunctions.viewAll(); 
            } 

            else if (opt == 3)             
            {
              //This method allows the user to remove an indiviual song from
              //their music library  

                methodsFunctions.removeOne(); 
            } 

            else if (opt == 4) 
            {
              //This method allows the user to edit the data of a particular 
              //and then prints the new value on screen

                methodsFunctions.editItem();
            } 

             else if (opt == 5) 
            {    
               //This method uses the Collections.shuffle method
               //to re-arrange the track list
               //song to simulate a music player's shuffle effect.
                 methodsFunctions.shuffleSongs();

            } 

            else if (opt == 6) 
            {    
                 methodsFunctions.searchSongs(); 
            } 

            else if (opt == 7) 
            {
                //This method will clear all contents of the library.
                //It will ask the user to confirm their choice.

                methodsFunctions.clearAll();
             } 

            else 
            {
              //If the user selects an incorrect number, the console will 
              //tell the user to try again and the main menu will print again

                System.out.println("Incorrect Entry, please try again");
            }

        } //do-while loop
        while (opt > 0);

    }
} 
```

方法类

```
 package ca1;

import java.util.ArrayList;
import java.util.Collections;
import java.util.List;
import java.util.Random;
import java.util.Scanner;

    public class Methods extends UserInput

    {
         Scanner input = new Scanner (System.in);

       //Declare array lists  
         List<String> songName = new ArrayList<>();
         List<String> songArtist = new ArrayList<>();
         List<String> songAlbum = new ArrayList<>();
         List<Integer> songYear = new ArrayList<>();

            UserInput ui = new UserInput();

                public void clearAll(){  
                    System.out.println("Are you sure?");
                    System.out.print("1: Yes \n2: No" + "\n");
                    System.out.print("");

                    int confirmDelete=input.nextInt();
                    if (confirmDelete == 1){
                    songName.clear();
                    songYear.clear();
                    System.out.println("Your music library has been cleared");
                }   

    }

                public void viewAll(){  
                System.out.println("\n");
                System.out.println("Your Music Library" + "\n" + " Artist - Song - Album (Year)  " + "\n");
                for (int i = 0; i < songName.size(); i++)

                {
                int counter=i+1;
                System.out.println(counter+": "+songArtist.get(i)+" - "+ songName.get(i)+ " - " + songAlbum.get(i) + " (" +songYear.get(i)+") ");
                }

                System.out.println("\n");
    }   

                public void addEntry(){
            //System.out.print("Enter Name: ");
            String newName = ui.getString("Enter the name of the track");
            songName.add(newName);
            String newArtist = ui.getString("Who performs this track");
            songArtist.add(newArtist);
            String newAlbum = ui.getString("What album is this track from");
            songAlbum.add(newAlbum);
            System.out.print("What year was the track released? ");
            int newYear=input.nextInt();
            songYear.add(newYear);

            System.out.println("\n" + "Thank you, " +songName.get(songName.size()-1) + " has been added to the library.");
            System.out.println("\n" + "Press 2 to view your library." + "\n");

            /*
            System.out.println("\n"+songName.get(songName.size()-1));
            System.out.println("\n"+songArtist.get(songArtist.size()-1));
            System.out.println("\n"+songYear.get(songYear.size()-1));
            */
        } 

                public void removeOne(){       

            System.out.println(" Which song would you like to delete? (1 to "+songName.size()+")");
            viewAll();
            int remove=input.nextInt();
            if (remove >songName.size()){
                System.out.println("Invalid ");
            }
            else {
                remove--;
                System.out.println("Are you sure you would like to delete "+songArtist.get(remove)+" - "+songName.get(remove)+ "-" + songAlbum.get(remove) +" (" +songYear.get(remove)+ ") from your music library?");
                System.out.print("1: Yes \n2: No" + "\n");
                int confirmDelete=input.nextInt();
                if (confirmDelete == 1){
                    songArtist.remove(remove); 
                    songAlbum.remove(remove);
                    songName.remove(remove);
                    songYear.remove(remove);
                    System.out.println(songName.get(remove)+ " has just been removed from your music library");
                    // viewAll();
                }       
            }
        } 

                public void shuffleSongs(){
              //The attributes of the song all get shuffled together because they 
              //are all linked by the same seed.

                long seed = System.nanoTime();
                Collections.shuffle(songName, new Random(seed));
                Collections.shuffle(songArtist, new Random(seed));
                Collections.shuffle(songAlbum, new Random(seed));
                Collections.shuffle(songYear, new Random(seed));
                System.out.println("Your library is now shuffled" + "\n");
                viewAll();

              //Shuffles library, then outputs the new library list.
            }         

                public void editItem(){

            viewAll();
            System.out.println("Choose the song you want to edit (1 to "+songName.size()+")");
          //prints out the contents of library with first entry being index 1
          //The library is numbered and goes as far as the index of the last entry  

            int edit=input.nextInt();       
            if (edit >songName.size()){
                System.out.println("Invalid Selection");

              //if user selects a number that corresponds to an index that's not
              //In the array list, they will be shown an error.
            }

                else{
                edit--;
                System.out.println("\n" + "Enter New Track Name: ");
                input.nextLine();
                String editName=input.nextLine();
                songName.set(edit,editName);
              //Edits the songName value of the Song object selected 

                System.out.println("\n" + "Enter New Artist ");
                String editArtist=input.nextLine();
                songArtist.set(edit,editArtist);
              //Edits the songArtist value of the Song object selected 

                System.out.println("\n" + "Enter New Album ");
                String editAlbum=input.nextLine();
                songArtist.set(edit,editAlbum);
              //Edits the songAlbum value of the Song object selected 

                System.out.println("\n" + "Enter New Year:");
                int editYear;
                editYear = input.nextInt();
                songYear.set(edit,editYear);
              //Edits the songName value of the Song object selected

                System.out.print("\n" + "Your changes have been saved:" + "\n");
                System.out.print("\n" + "This is your current library");
                viewAll();
            }
        }

                public void searchSongs(){

                }

    } 
```

一切正常，我只想添加能够搜索的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:03:53.863

要搜索的字符串：

```
String searchString= "the something ok" 
```

将其拆分为令牌：

```
String[] tokens = searchString.split("\\s+"); 
```

构建一个正则表达式模式以匹配所述字符串：

```
StringBuilder sb = new StringBuilder();
sb.append("(?i)^" + "(?=.*" + tokens[0] + ")");
for (int num = 0; num < tokens.length; num++) {
    sb.append("(?=.*" + tokens[num] + ")");
} 
```

然后将数组中的每个名称与该正则表达式模式匹配：

```
List<String> result = new ArrayList();
for(String i: yourStringArray){
    if(i.matches(sb.toString()))
        {
             result.add(i);
         }
} 
```

然后显示结果列表：

```
You can figure out this part your self 
```

# jquery - 单击带有jquery的按钮时旋转图像

> ID：13057353
> 
> 赞同：0
> 
> 时间：2012-10-24T20:38:39.217
> 
> 标签：jquery

我见过一些 jquery 插件可以连续旋转图像。我希望通过单击按钮获得那种效果。图像应该像轮子一样连续旋转。该按钮将像一个开关一样工作。这是想法：

```
$('button').click(function(){
  if($(this).hasClass('on')){
    $('image').stopRotate();
    $(this).removeClass('on').addClass('off');
  }
  else{
    $('image').startRotate();
    $(this).removeClass('off').addClass('on');
  }
}) 
```

# delphi - 接口中的构造函数

> ID：13057354
> 
> 赞同：2
> 
> 时间：2012-10-24T20:38:45.387
> 
> 标签：delphi, interface, coding-style, delphi-xe2

我知道——我不能，但是。

我希望所有将实现我的接口的类都具有相同的所有者（通常在构造函数中定义）。这样做的最佳做法是什么？

我应该使用一些基本的抽象类还是类似的东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T21:34:15.870

接口定义了实现者和消费者之间的契约。

该合同的一部分由编译器强制执行。例如，接口的所有实现都具有特定名称的必要功能，这些功能采用特定的参数。

但是编译器没有强制执行接口的另一部分。这是接口文档中描述的合同的一部分。您可以决定告诉所有实施者他们必须遵守哪些规则就足够了。许多图书馆采取这种立场。Windows API 就是一个突出的例子。

如果您对通过代码强制执行死心塌地，那么界面将无济于事。您需要在代码中表达约束的东西，在这种情况下，这将需要实现。这意味着你需要使用一个类。一个（几乎）抽象基类可以完成它。该类的唯一具体部分将强制执行所有权约束。该类的其余部分将是一系列抽象虚拟方法。这不是 Delphi 关键字所暗示的接口。但是，它是语义方面的接口。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T20:51:31.293

当然，您可以选择在一个共同的祖先中实现接口，或者至少为实现该接口的类有一个共同的祖先。但是，您不能通过界面强制执行此操作。接口没有构造函数，并且接口不能强制执行哪个类可以或不能实现它。

我认为最好的选择是`Owner`通过接口公开一个属性。这样，您至少可以通过接口获得所有者，并且您将强制实现类至少实现该属性。顺便说一句，允许接口具有返回对象或具有对象参数的属性和方法。

# asp.net - ASP.NET 进程回收和会话变量

> ID：13057357
> 
> 赞同：1
> 
> 时间：2012-10-24T20:38:57.700
> 
> 标签：asp.net

我想弄清楚以下网页上以下文字的含义： http: [//msdn.microsoft.com/en-us/library/ms525803%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/ms525803%28v=vs.90%29.aspx)：

> 多实例的发生：在多实例中，一个进程的两个或多个实例同时运行。根据应用程序池的配置方式，可以运行多个工作进程实例，每个实例都可能加载和运行相同的应用程序代码。重叠回收的发生是多实例化的一个示例，就像 Web 园一样，其中两个或多个进程为应用程序池提供服务，而不管回收设置如何。

我正在开发一个我认为存在此问题的 ASP.NET 应用程序，即今天有一个案例，似乎会话变量在两个会话中共享。我相信这可能是因为这个过程被回收了（只是一个想法）。

# php - 将 SALT 添加到哈希（加密）函数（澄清），还有一些小问题

> ID：13057358
> 
> 赞同：0
> 
> 时间：2012-10-24T20:38:59.183
> 
> 标签：php, encryption, bcrypt

我在谷歌上学习/寻找太久了，虽然我找到了很多**一般的**教程，但我想知道 PHP 中 (crypt) 函数中的“可选 SALT”参数。我打开了太多标签，无处可去，所以，在这一点上，我想我只是寻求帮助。

至于盐，我在某处读到，如果您不添加它，它将为您添加，但这不是一个好习惯。我似乎找不到“**为什么**”它好/不好。这应该如何处理？

我在这里和那里读过一些关于随机化盐的东西，但其他人说这没关系......再次令人困惑。

此外，我在检查存储的数据时也遇到了问题。显然，如果我做类似的事情

```
crypt("pass string here",salt here); 
```

我会得到一个随机字符串作为通行证......所以在用户登录时，然后是

```
$_POST['the entered name/pass etc ']; 
```

并检查用户通过的 db 值将始终等于 false。那么我认为 id 必须重新哈希 /salt 用户输入时给出的通行证，*然后*测试数据库上的内容？

另外，我在整个网络上都读过（但此时我很困惑）盐以某种方式存储在数据库中？它不必隐藏？

我可以继续说下去，只是老实说迷路了，我想我读得太多了，不知道如何继续。在这一点上，如果有人拥有这些资源，我真正喜欢的是与教程的良好链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:41:47.183

您需要在用户注册时生成一个安全的随机盐值，并将该盐存储在数据库中。

当用户登录时，从数据库中获取 salt 和 hash，计算他们使用原始 salt 键入的密码的 hash，并确保 hash 匹配。

另外，不要使用通用哈希算法（例如 MD5 或 SHA*）；相反，请使用专用的慢速密码散列算法，例如 bcrypt 或 scrypt 或 PBKDFv2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:47:04.407

为了最大限度地提高安全性，您永远不会在数据库中拥有明文密码，并将其开放给任何拥有/可以访问该数据库的人。因此，您要做的是选择一个预定义的盐，获取用户所需的密码并使用盐和哈希对其进行加密。

盐是您添加的一些额外随机字符，以使散列密码更加安全。您应该跟踪这一点。

然后哈希获取盐+密码并基于它生成一个随机字符串，这样如果你给它相同的盐+密码，你总是会得到那个唯一的哈希。

这似乎是对加盐/散列的相当有用的介绍：

[http://crackstation.net/hashing-security.htm](http://crackstation.net/hashing-security.htm)

# ms-access - Jet (MS Access) 获取 COUNTER 列的种子和增量

> ID：13057359
> 
> 赞同：1
> 
> 时间：2012-10-24T20:39:01.257
> 
> 标签：ms-access, ddl, jet

有谁知道如何在**Jet (MS Access)**数据库中检索自动增量字段（又名 COUNTER，或 Access UI 中的“自动编号”）的种子和增量？

我已经枚举了对应的 DAO.Field 对象、ADO.Field 对象和 ADOX.Column 对象的所有属性，并且无法识别任何东西。任何方法都是可以接受的，包括对 MSys* 表或本机方法调用的古怪破解。

**背景：**

在 Jet SQL 中，您可以使用自定义种子创建一个自动递增列，并使用 DDL 数据类型子句递增`COUNTER(seed, increment)`，如下所示：

```
CREATE TABLE ODD_INCREMENTER (
    ID_COL   COUNTER(-52098, 42)
  , TEXT_COL VARCHAR(50)
) 
```

它创建了下表（为演示添加了一些数据）：

![在此处输入图像描述](../Images/b4527ebf996f1d62d7a3e7e2c684dbdd.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T20:54:11.903

您可以使用 ADOX

```
Dim cat As New ADOX.Catalog 
Dim tbl As ADOX.Table       
Dim col As ADOX.Column      

Set cat.ActiveConnection = CurrentProject.Connection
Set tbl = cat.Tables("Table1")
Set col = tbl.Columns("AKey")
'Next autonumber
lngSeed = col.Properties("Seed") 
```

Allen Browne 有一个相当详细的参考资料：[http ://allenbrowne.com/ser-40.html](http://allenbrowne.com/ser-40.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T21:02:43.130

考虑使用后期绑定而不是添加引用。

除了种子之外，您还可以通过检查其属性来获得增量。

```
Public Sub SeedAndIncrement(ByVal pTable As String, _
        ByVal pAutonumField As String)

    Dim cat As Object
    Dim objColumn As Object
    Set cat = CreateObject("ADOX.Catalog")
    Set cat.ActiveConnection = CurrentProject.Connection
    Set objColumn = cat.Tables(pTable).Columns(pAutonumField)
    Debug.Print "Seed: " & objColumn.Properties("Seed")
    Debug.Print "Increment: " & objColumn.Properties("Increment")
    Set objColumn = Nothing
    Set cat = Nothing
End Sub 
```

# git - 使用 GIT 的多个类似站点？还是其他版本控制？

> ID：13057360
> 
> 赞同：7
> 
> 时间：2012-10-24T20:39:06.450
> 
> 标签：git, svn, version-control, multiple-sites

我刚刚接手了一家管理许多不同网站的公司的 Web 开发职位。有几个不同的网站“设计”，对于每个设计，有几个相同的东西的千篇一律的版本。它们是不同的站点，但框架非常接近，因为只有内容和一些样式发生了变化，以前的人只是将这些复制粘贴到特定的主机上。

所以我的问题是 Git 是否适合这个？我在自己的副项目中使用了一点 git，但我们正在谈论数百个站点（每个设计大约 10 个）来完成这项工作。一堆树枝会是个好方法吗？主要是我希望能够快速轻松地更新常用文件。当我们进行全局更改时，前一个人只是使​​用 perl 脚本将内容转移到“更新”站点。似乎使用 git 会更加简单和受控（版本控制）。

Subversion 是我的另一个想法，但我无权在所有服务器上安装它。大多数文件都是通过 ftp 传输的，但是经过一些改进，我可能会得到一些 ssh（我可能会使用 sshfs 的 fuse 来设置它）。

有什么想法吗？或者，如果我完全错了，也请告诉我。我以前从来没有处理过这么大的事情（即很多网站），而且看起来真的很乱。我知道有更好的方法来做到这一点！

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-13T15:10:28.577

[git 子模块](http://git-scm.com/book/en/Git-Tools-Submodules)仍然是跟踪其他存储库的好方法，包括：

*   一个用于公共文件
*   一个用于特定文件。

这意味着您的每个网站都是一个“父”存储库，其中包括上面提到的两个子模块。

诀窍是，特别是对于代表公共文件的子模块，是在网站中将其声明为“[跟随分支的最新提交](https://stackoverflow.com/a/9189815/6309)”。

```
git submodule add -b master common url/to/common/files/repo 
```

这样，每次您必须处理其中一个网站存储库时，您首先需要做的就是：

```
git submodule update --remote 
```

您一定会使用最新的常用文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T20:59:43.200

1.  分开开发和部署到不同的任务中（不需要在每个生产中都有一个存储库/或只是 WC/）
2.  任何具有良好分支合并的 SCM 都可以工作
3.  所有站点（框架）的公共部分可以分离（或者至少你可以*尝试这样做*）成一个实体，链接到最终产品（使用 SCM 特定的方法 - 子模块，外部）

# mysql - 从数据库中间隔 div

> ID：13057366
> 
> 赞同：0
> 
> 时间：2012-10-24T20:39:28.793
> 
> 标签：mysql, css, html

网站[在这里](http://cambridge.guestvibe.com)。

我正在从数据库中提取值并将它们显示在图像上两个框中的右侧框中。中间有四个值：价格、队列跳转、交易 1 和交易 2。我的问题是，并非每个报价都包含所有 4。但是，div 的边距值本来应该是一个间距间隙. 除了将 div 放在数据库字段中之外，我还能做些什么来避免这种情况？

这是我的Javascript：

```
<script type="text/javascript">

    $(document).ready(function() {
        $.ajax({
            type: "POST",
            url: "http://cambridge.guestvibe.com/wp-content/themes/cambridge/eventinfo.php",
            data:  $('#club').serialize(),
            success: function(data) {
                $('#rightbox_inside').html('<h2><div class="tagnospacing">' + $('#club').val() + '</div></h2><p><div class="tagnospacing">' + data[0].day + '</div></p><hr><p><div class="tag">' + data[0].entry + '</div></p><p><div class="tag">' + data[0].queuejump + '</div></p><p><div class="tag">' + data[0].special + '</div></p><p><div class="tag">' + data[0].special2 + '</div></p><p><div class="tag">' + data[0].closing + '</div></p><hr><p><div id="caveat">All offers subject to availability</div></p>');
                },
            dataType: "json"
        });
    });

    $('#club').change(function(event) {
        $.ajax({
            type: "POST",
            url: "http://cambridge.guestvibe.com/wp-content/themes/cambridge/eventinfo.php",
            data:  $(this).serialize(),
            success: function(data) {
                $('#rightbox_inside').hide().html('<h2><div class="tagnospacing">' + $('#club').val() + '</div></h2><p><div class="tagnospacing">' + data[0].day + ', ' + data[0].doors + '</div></p><hr><p><div class="tag">' + data[0].entry + '</div></p><p><div class="tag">' + data[0].queuejump + '</div></p><p><div class="tag">' + data[0].special + '</div></p><p><div class="tag">' + data[0].special2 + '</div></p><p><div class="tag">' + data[0].closing + '</div><hr><p><div id="caveat">All offers subject to availability</div></p>').fadeIn('500');
                },
            dataType: "json"
        });

    });

</script> 
```

# reporting-services - SSRS 添加接受输入以进行打印的文本框

> ID：13057370
> 
> 赞同：3
> 
> 时间：2012-10-24T20:39:41.710
> 
> 标签：reporting-services, ssrs-2008, rdlc, bids, rdl

使用 Business Intelligence Development Studio，我正在为 SSRS 创建一个报告，要求用户在打印之前添加一些注释。不需要将注释发送回生成报告的 SQL Server，只需要在打印或导出报告时包含它们。我还有其他一些解决方案，包括：

*   导出到 Word 进行编辑，然后用户可以手动发布到 pdf 并发送
*   包括注释字段的参数，涉及拉报告，然后添加注释，最后再次重新拉报告以包含数据

但除非必要，否则我真的不想在用户的流程中添加额外的步骤。有没有人试过这个？我一直在修补和搜索，但没有运气。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T22:08:46.180

SSRS 报告的输入来自数据源和参数。应用了一些服务器设置，但每个报告的所有内容都来自这两个地方中的任何一个。

根据 OP 评论，我将添加一个允许空白值的文本参数。您可以设置默认值，`=""`以便报告将在首次访问时运行。然后用户添加的任何文本都可以简单地通过引用参数的值插入到报告中。（`=Parameters!MyParam1.Value`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-26T11:27:01.997

用户首先拉报告以分析数据。所以他们会拉一次，然后添加注释，然后再次拉报告并添加参数。

# javascript - 按列名对表列表进行分组（包括示例）

> ID：13057374
> 
> 赞同：0
> 
> 时间：2012-10-24T20:39:43.957
> 
> 标签：javascript, html, asp.net-mvc, linq

我有一张需要分组为 div 的表格

```
rated | rater | team | score | subject
john    mike     TA     10      math
john    mike     TA     10      PE
john    jane     TA     9       math
john    jane     TA     9       PE
kim     lee      TB     5       math
kim     min      TB     2       math 
```

我需要它看起来像

```
 TA
    john
     RATER    MATH  PE         
     mike      10   10
     jane      9     9
 TB
   kim
    RATER     MATH  PE
    lee        5
    min        2 
```

在我看来，我只是从 LINQ 中迭代这些值

```
@foreach (var item in Model) 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:50:49.920

看起来您想要转置列和行。

从这个博客中查看这个方法：http: [//higherlogics.blogspot.com/2010/05/linq-transpose-extension-method.html](http://higherlogics.blogspot.com/2010/05/linq-transpose-extension-method.html)

这是代码示例：

```
public static IEnumerable<IEnumerable<T>> Transpose<T>(
     this IEnumerable<IEnumerable<T>> source)
{
return from row in source
       from col in row.Select(
           (x, i) => new KeyValuePair<int, T>(i, x))
       group col.Value by col.Key into c
       select c as IEnumerable<T>;
} 
```

# workflow-foundation-4 - 将 Lambda 表达式作为参数传递给工作流代码活动

> ID：13057375
> 
> 赞同：1
> 
> 时间：2012-10-24T20:39:45.173
> 
> 标签：workflow-foundation-4, workflow-activity

我想知道 Lambda 表达式是否可以作为参数传递给 Windows 工作流代码活动？

我正在尝试根据 lambda 表达式查询 ldap 的用户对象，该表达式将作为参数传递给 Windows 工作流代码活动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T08:30:25.610

lamda 表达式只是一个参考，像传递任何其他数据一样传递它。

```
class Program
{
    static void Main(string[] args)
    {
        var workflow = new ExecuteFunc<int>();
        var inputs = new Dictionary<string, object>();
        inputs["Func"] = new Func<int, int>(maxValue =>
        {
            var rnd = new Random(Environment.TickCount);
            return rnd.Next(maxValue);
        });
        inputs["MaxValue"] = 100;
        WorkflowInvoker.Invoke(workflow, inputs);
    }
}

public class ExecuteFunc<T> : CodeActivity<T>
{
    public InArgument<int> MaxValue { get; set; }
    public InArgument<Func<int, T>> Func { get; set; }

    protected override T Execute(CodeActivityContext context)
    {
        var func = Func.Get(context);
        var maxValue = MaxValue.Get(context);
        var result = func(maxValue);
        Console.WriteLine(result);
        return result;
    }
} 
```

# sql-server-2005 - 如何在 SQL 中向新表中添加行号？

> ID：13057383
> 
> 赞同：5
> 
> 时间：2012-10-24T20:40:25.037
> 
> 标签：sql-server-2005, insert-into

我正在尝试使用已经使用的现有表创建一个新表：

```
INSERT INTO NewTable (...,...)
   SELECT * from SampleTable 
```

我需要的是在开头或结尾添加一个记录号，只要它在那里就没有关系。

**样品表**

```
Elizabeth  RI 02914
Emily      MA 01834 
```

**预期的新表**

```
1 Elizabeth  RI 02914
2 Emily      MA 01834 
```

这有可能吗？

这就是我最终的目标......除了现在这些表的大小不同，因为我需要我的 ErrorTemporaryTable 有一个列，其中第一行有一个数字，该数字由前一个递增。

```
declare @counter int
declare @ClientMessage varchar(255)
declare @TestingMessage carchar(255)
select @counter = (select count(*) + 1 as counter from ErrorValidationTesting)
while @counter <= (select count(*) from ErrorValidationTable ET, ErrorValidationMessage EM where ET.Error = EM.Error_ID)
begin
    insert into ErrorValidationTesting (Validation_Error_ID, Program_ID, Displayed_ID, Client_Message, Testing_Message, Create_Date)
    select * from ErrorTemporaryTable

    select @counter = @counter + 1

end 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T20:43:05.230

您可以将`into`子句与`IDENTITY`列一起使用：

```
SELECT IDENTITY(int, 1,1) AS ID_Num, col0, col1
INTO NewTable
FROM OldTable; 
```

[这里](http://msdn.microsoft.com/en-us/library/ms189838.aspx)有更多信息

您还可以创建带有`identity`字段的表：

```
create table NewTable
(
  id int IDENTITY,
  col0 varchar(30),
  col1 varchar(30)
) 
```

并插入：

```
insert into NewTable (col0, col1)
SELECT col0, col1   
FROM OldTable; 
```

或者，如果您有 NewTable 并且想要添加新列，请在 SO 上查看[此解决方案。](https://stackoverflow.com/questions/1049210/adding-an-identity-to-an-existing-column)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-24T20:46:52.160

```
INSERT INTO NewTable (...,...)
SELECT ROW_NUMBER() OVER (ORDER BY order_column), * from SampleTable 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T20:47:17.037

如果您在 SQL Server 中

```
INSERT INTO newTable (idCol, c1,c2,...cn)
SELECT ROW_NUMBER() OVER(ORDER BY c1), c1,c2,...cn
FROM oldTable 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-03T22:17:33.890

试试这个查询来插入 1,2,3... 用你的列名替换 MyTable 和 ID。

```
DECLARE @myVar int
SET @myVar = 0
UPDATE
  MyTable
SET
   ID =  @myvar ,
   @myvar = @myVar + 1 
```

# mongodb - 如何使用 $gt 和 $lte 优化 MongoDB 查询？

> ID：13057387
> 
> 赞同：12
> 
> 时间：2012-10-24T20:40:42.407
> 
> 标签：mongodb, mongodb-query

我有以下查询，有点像反向范围查找：

```
db.ip_ranges.find({ $and: [{ start_ip_num: { $lte: 1204135028 } }, { end_ip_num: { $gt: 1204135028 } }] }) 
```

当仅使用 $lte 标识符运行时，查询会立即返回。但是当我在同一个查询中同时使用 $gt 和 $lte 时，它​​非常慢（以秒为单位）。

start_ip_num 和 end_ip_num 字段都被索引。

我该如何优化这个查询？

**编辑**

当我在查询中使用 explain() 函数时，我得到以下信息：

```
{
    "cursor" : "BtreeCursor start_ip_num_1",
    "nscanned" : 452336,
    "nscannedObjects" : 452336,
    "n" : 1,
    "millis" : 2218,
    "nYields" : 0,
    "nChunkSkips" : 0,
    "isMultiKey" : false,
    "indexOnly" : false,
    "indexBounds" : {
        "start_ip_num" : [
            [
                -1.7976931348623157e+308,
                1204135028
            ]
        ]
    }
} 
```

**编辑 2**

添加复合索引后，explain() 函数返回以下内容：

```
{
    "cursor" : "BtreeCursor start_ip_num_1_end_ip_num_1",
    "nscanned" : 431776,
    "nscannedObjects" : 1,
    "n" : 1,
    "millis" : 3433,
    "nYields" : 0,
    "nChunkSkips" : 0,
    "isMultiKey" : false,
    "indexOnly" : false,
    "indexBounds" : {
        "start_ip_num" : [
            [
                -1.7976931348623157e+308,
                1204135028
            ]
        ],
        "end_ip_num" : [
            [
                1204135028,
                1.7976931348623157e+308
            ]
        ]
    }
} 
```

但是，性能仍然很差（以秒为单位）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T20:56:42.943

因此，在 Mongo 中不建议使用双范围查询。我假设您有一个包含两者的索引`{start_ip_num: 1, end_ip_num: 1}`。

如果这不能让你足够接近（如果你有足够的数据从第一个字段返回，通常它仍然很慢，因为它必须进行大量 B-tree 扫描），你可以采取一个技巧来解决这个问题使用 2D 框查询（一次仅适用于两个范围）。

基本上，您在包含数组中两个点的字段上放置一个 2D 地理索引，例如 [start_ip, end_ip]，并给它一个足够高的最小值/最大值，这样它就不会达到默认情况下的限制-180/180。

最后，使用边界查询，范围从框的一个角上的 min 到 $lte 值，以及框的另一个角上的 gt 和最大值。有关语法，请参见[http://www.mongodb.org/display/DOCS/Geospatial+Indexing#GeospatialIndexing-BoundsQueries](http://www.mongodb.org/display/DOCS/Geospatial+Indexing#GeospatialIndexing-BoundsQueries)。

它看起来像这样：

```
db.ip_ranges.find({ip_range:{$within:{$box:[[0, 1204135028], [1204135028, max]]}}}); 
```

其中 max 是您可以拥有的最大 ip。

我已经有一段时间没有看到这个了，所以这个框可能是错误的，但这个概念是合理的，它使双范围查询的性能比使用常规的两字段 B 树索引好一点。始终不到一秒钟（尽管通常是几百毫秒），而使用常规索引则需要几秒钟——我想我当时有数亿个文档，但是已经有一段时间了，所以请用这些记住的基准盐。我敢肯定，结果会因您的数据和范围大小而有很大差异。

**更新：**您可能想尝试`bits`设置，尝试一个小数字和一个大数字，看看它是否有所作为。对我来说，它似乎并没有平均影响查询。有关语法，请参见[http://www.mongodb.org/display/DOCS/Geospatial+Indexing#GeospatialIndexing-CreatingtheIndex](http://www.mongodb.org/display/DOCS/Geospatial+Indexing#GeospatialIndexing-CreatingtheIndex)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-01-07T18:11:48.267

根据[Ip2location 网站](http://www.ip2location.com/tutorials/importing-ip2location-data-into-mongodb-and-querying-with-php)，可以在没有范围查询的情况下使用 mongodb 实现对 IP 地址的快速查询。在 mongodb 上只创建一个索引 `{ ip_to: 1 }`，并使用以下命令查询 ip：

```
db.collection_name.find({ ip_to: { $gte : ip_integer } }).sort({ ip_end: 1 }).limit(1) 
```

使用此配置，我获得了 1 毫秒的查询时间和 600 万个文档集合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-17T07:06:19.363

诀窍是使用 $lte 和排序。我将查询缩短到几毫秒。

我遇到了完全相同的问题 - 查找与特定 IP 地址匹配的 CIDR 块。我还尝试使用 $gte 和 $lte 并获得 10 秒的响应时间。

我以不同的方式解决了这个问题。请注意，MaxMind 数据库中的 CIDR 块（IP 地址范围）不重叠。每个 IP 地址最多匹配一个结果。因此，您需要做的就是找到具有小于特定 IP 地址的最大 start_ip_num 的 CIDR 块。然后在应用程序代码中验证 end_ip_num 是否大于特定的 IP 地址。

这是代码（使用节点 MongoDB 客户端）：

```
// Convert IP address to base 10.
var ipToDecimal = function (ipAddress) {
  var split = ipAddress.split('.');
  return (split[0] * 16777216) + (split[1] * 65536) + (split[2] * 256) + (+split[3]);
};

var ipAddress = '1.2.3.4';
var ipDecimal = ipToDecimal(ipAddress);

db.ip_addresses.find({start_ip_num: {$lte: ipDecimal}}, {_id: 0, country_code: 1, end_ip_num: 1}, {limit: 1, sort: [['start_ip_num', -1]]}).toArray(function (error, ipAddresses) {
  if (ipAddresses[0] && ipAddresses[0]['end_ip_num'] >= ipDecimal) {
    console.log('IP address found: ', ipAddresses[0]['country_code']);
  } else {
    console.log('IP address not found.');
  }
}); 
```

请务必在 start_ip_num 上创建索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T06:07:16.687

经过大量的实验和研究，我遇到了这个：

[https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/IUwOzWsc0Sg](https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/IUwOzWsc0Sg)

我可以使用此查询将查询降低大约 200-300 毫秒，并**删除所有索引**（**您必须删除所有索引才能工作！！！**）：

db.ip_ranges.find({start_ip_num: {$lte: 1204135028}, end_ip_num: {$gt: 1204135028}}).limit(1)

不要问我为什么。我无法解释。如果您有兴趣，我正在使用 MongoDB 从 MaxMind 构建 GeoIP 数据库。

# c# - 将同一基类的不同对象传递给方法

> ID：13057389
> 
> 赞同：0
> 
> 时间：2012-10-24T20:40:55.023
> 
> 标签：c#, asp.net-mvc, entity-framework

基本上，我想创建一个方法，它将基类作为参数，并且可以用于派生类的“通用”

ef-code-first 类：

基类

```
public abstract class BaseClass
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

派生类：

```
public class DerivedA:BaseClass
{
    public string AValue {get;set;}
    ...more specific fields
}

public class DerivedB:BaseClass
{
    public string BValue {get;set;}
    ..... more specific fields
} 
```

我将这些稍微不同的对象称为“通用方法”：

```
System.Data.Entity.DbSet<DerivedA> _dA....
System.Data.Entity.DbSet<DerivedB> _dB....

genericMethod(_dA.Where(a => a.Name.StartsWith("a name")))); //<-contains records
genericMethod(_dB.Where(a => a.Id==5)); //<---- contains records 
```

两个“Where...”都包含调试中的记录（单击枚举后）

现在方法：

```
public string genericMethod(<IQueryable>BaseClass _myClass)
{
    foreach (BaseClass c in _myClass)  // <-------class is empty - no records
        {
          // do something usefull...
        }
    return someResult 
} 
```

但是在方法内部时不包含任何记录。

有可能吗，我正在尝试做什么......？是否有意义？

没有设计时或编译时或运行时错误，但传递的对象在传递给方法时不包含任何记录，但它包含调用语句中的记录。

我做错了什么？

有更好的方法吗？-

我需要这个方法来操作两个以上（可能是十个）派生类，因此我希望它“通用”。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:55:47.220

当面对这样的事情时，我喜欢简化我的代码。

我会尝试从方法调用中删除`_dA.Where(a => a.Name.StartsWith("a name"))`and`_dB.Where(a => a.Id==5)`并首先将它们放入变量中（然后将变量传递给方法）。

这将使您能够更好地检查您的代码，并可能阐明问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:13:12.940

在将查询传递给方法之前添加 .ToList() 以实现查询：

```
genericMethod(_dA.Where(a => a.Name.StartsWith("a name"))).ToList()); 
```

否则你并没有真正传递查询的结果，你只是传递了一个需要首先评估的查询。ToList() 将为您评估它。当您查看调试器监视时，它基本上是在动态地为您评估它，这就是您看到返回行的原因。

之后，更改您的方法以处理 IList 而不是 IQueryable。

# .net - ClickOnce 应用程序和 Windows 8 认证

> ID：13057390
> 
> 赞同：4
> 
> 时间：2012-10-24T20:40:59.060
> 
> 标签：.net, windows-8, clickonce, app-certification-kit

是否可以将[ClickOnce](http://en.wikipedia.org/wiki/ClickOnce)、[WPF](http://en.wikipedia.org/wiki/Windows_Presentation_Foundation)应用程序认证为与 Windows 8 兼容？

请注意，我不是指让应用程序获得[Windows Store](http://en.wikipedia.org/wiki/Windows_Store)认证。我只是想让它被认证为兼容的 Windows 8 桌面应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T01:52:59.787

不可以，ClickOnce 应用程序无法通过认证。:(

以下是团队的官方说法：

> ClickOnce 部署管理安装/卸载与传统安装程序略有不同。例如，安装位置不会按照桌面认证要求的要求转到 %ProgramFiles%，快捷方式具有 Windows 应用程序使用的不同扩展名，例如 *.lnk，等等。结果是这些应用程序没有被 ACK 正确检测到，因此无法被认证。

对于非 ClickOnce 桌面应用程序，请查看*[让您的桌面应用程序兼容](http://msdn.microsoft.com/library/windows/desktop/dd535817)*，了解如何准备好您的桌面应用程序并获得认证。另请查看左侧菜单边栏（特别是*[Windows 8 和 Windows RT 兼容徽标使用指南](http://msdn.microsoft.com/en-us/library/windows/desktop/jj591630.aspx)*）。这使您能够在您的应用程序上显示“Windows 8 兼容”徽标，因为它已被认证为兼容。

# javascript - 在 IE 9 上，window.open 正在打开一个空白窗口

> ID：13057394
> 
> 赞同：0
> 
> 时间：2012-10-24T20:41:03.330
> 
> 标签：javascript, jquery, internet-explorer, window.open

我正在将表单发布到窗口中的另一个页面，使用`window.open()`. 我遇到的问题是，当窗口打开时，它变为空白，原始浏览器窗口被重定向到应该在弹出窗口中的页面。

这在 Chrome 中运行良好，但 IE 不是。

任何帮助是极大的赞赏！谢谢

****编辑****

我没有发布代码，因为我认为这是一个概念性问题。正如我之前所说，它适用于其他浏览器，但不适用于 IE。所以我知道我的代码正在运行。但是，如果您需要代码，这里有一个示例：

表格：

```
<form id="SCartFormId">
  <input type="hidden" name="merchantKey" value="E0FU0E14-CC2D-C88N-6TDQ-0A08CCD05610" />
  <input type="hidden" name="orderNumber" value="321654" />
  <input type="hidden" name="descriptor" value="Test Environment" />
  <input type="hidden" name="cart[0].sku" value="V4C3D5C2" />
  <input type="hidden" name="cart[0].name" value="Halls" />
  <input type="hidden" name="cart[0].unitprice" value="100" />
  <input type="hidden" name="cart[0].quantity" value="10" />
  <input type="hidden" name="shippingMethodCollection[0].name" value="USPS" />
  <input type="hidden" name="shippingMethodCollection[0].price" value="200" />
  <input type="hidden" name="descriptor" value="" />            
</form> 
```

的JavaScript：

```
S.Widgets = {};
S.Widgets.PostWidget = (function(widget){
  var merchantId = widget.merchantId;
  var originForm = widget.orderInput.value;

  var render = (function(target) {var targetHtml = document.getElementById(target),
    button = document.createElement('button'),
    sForm = document.getElementById(originForm);                    

  button.innerText = "Checkout";

  button.onclick = function(){
    window.open('', 'SWidget', 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=yes, width=840, height=840');
    sForm.submit();
  };            
  return {
    render: render
  };
}); 
```

此按钮是通过以下方式即时创建的：

```
new S.Widgets.PostWidget({
  merchantId: 'AEIOU1234AEIOU',
  orderInput: {value: 'SCartFormId'}
}).render("sButtonId"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:04:03.803

以下是导致您描述的两行代码：

```
// Open a window at URL '' (thus, blank window)
window.open('', 'SWidget', 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=yes, width=840, height=840');

// Submit the form (plain submit, no jQuery.ajax)
// I don't see any jQuery on your code
sForm.submit(); 
```

我不确定这是否是您想要的，但是将表单的`target`属性设置为`_blank`并删除该`window.open`行怎么样？

# flash - 如何确定动态影片剪辑的宽度？

> ID：13057395
> 
> 赞同：0
> 
> 时间：2012-10-24T20:41:06.423
> 
> 标签：flash, math, actionscript-2, flash-cs5, flash-cs4

我正在尝试菊花链复制的电影剪辑，但我不知道如何让每个片段相互对接。我正在为铁路教官构建一个培训辅助工具，其中一部分是教官可以动态地构建火车。

总共有五个对象，机车、漏斗、flat_car、tank_car 和 box_car。当教师单击其中一辆汽车时，会在舞台上创建一个副本，教师可以在舞台上的任何位置拖放该副本。如果他/她点击另一辆车，也会发生同样的事情，但如果其中一个副本掉到另一辆车的顶部，火车就会开始建造。新车会在目标的右侧对齐，如果另一辆车掉落，它会在右侧对齐，依此类推，但我遇到麻烦的地方是当我添加第三辆汽车时，它只会卡到一半。

注册点对我来说搞砸了，它是中心，所以我需要找出目标的一半宽度和被丢弃的汽车的一半宽度，这将为我提供汽车将捕捉到的点。例如：

目标车是 50，被丢弃的汽车是 50，那么要捕捉的点应该是 25 + 25。如果第三辆汽车被丢弃，那么现在链接在一起的两辆汽车是 100，被丢弃的汽车是 50，新的掉落点应该是 75。

这些汽车的尺寸各不相同，这让这很困难，我希望它们的尺寸都一样:(下面是我正在使用的代码，也许它有助于说明我在说什么：

```
var _carArray:Array = ["locomotive","tank_car","box_car","hopper","flat_car"];

/*** 
* the function below is called when a duplicated
* object is dropped on a another duplicated object
* I could add that code, but I figured it wasn't 
* needed since my math is what I'm struggling with
***/

function BuildTrain(_mc,_instanceName):Void
{
    var _tar        = eval(_mc._droptarget);
    var _carHalf    = (_mc._width) / 2;
    var _targetHalf = (_tar._width) / 2;
    var _math       = _targetHalf + _carHalf;
    for(var _i in _carArray)
    {
        if(instanceName == _carArray[_i])
        {
            _tar.attachMovie(_instanceName,_instanceName,200+_count,{_x:_math});
        }
        _p.removeMovieClip();
    }
} 
```

注意：我将其标记为数学，因为它确实需要数学来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T00:24:09.073

创建另一个数组来保存您当前的火车。

```
var myTrain = []; 
```

每次您想将一辆新车加入混合中时，请将其添加到 myTrain 数组中。然后遍历 myTrain 数组并按顺序重新定位所有内容。

```
function BuildTrain(_mc,_instanceName):Void
{
    var _tar        = eval(_mc._droptarget);
    var _carHalf    = (_mc._width) / 2;
    var _targetHalf = (_tar._width) / 2;
    var _math       = _targetHalf + _carHalf;
    for(var _i in _carArray)
    {
        if(instanceName == _carArray[_i])
        {
            myTrain.push(_tar.attachMovie(_instanceName,_instanceName,200+_count,{_x:_math})); //put the newly created car in the mytrain array;
            redrawTrain();
        }
        _p.removeMovieClip();
    }
}

function redrawTrain(){
    var curX = 0;
    for(var i = 0;i < myTrain.length; i++){
        myTrain[i]._x = curX + (myTrain[i]._width * .5); //offset by half the car width since it's anchored in the center
        curX += myTrain[i]._width;
    }
} 
```

# c++ - Visual Studio 2012 编译时间慢

> ID：13057396
> 
> 赞同：1
> 
> 时间：2012-10-24T20:41:08.070
> 
> 标签：c++, visual-c++, time, compilation, visual-studio-2012

我在 Visual Studio 2012 中有一个非常小的项目（只有 50 行代码）。我只有一个源文件 ( `main.cpp`)。但是编译需要大约 20 秒或更长时间！我应该如何加快速度？当我使用 C# 时，编译时间很快，但当涉及到 C++ 时，它非常慢。

至于我的最小计算机规格，我有一个 i5 处理器，4gb 内存，它是一个四核。编译只有 50 行长的东西不应该花这么长时间。我应该怎么办？

我的代码：

```
 #include<iostream>
using namespace std;

class Entity
{
protected: 
    int health; 
public: 
    void SetHealth(int value)
    {
        health = value;
    }

    void DisplayHealth()
    {
        cout << "Entity: " << health << endl;
    }
};

class Player : public Entity
{
private:
    int xp;
public: 
    void DisplayHealth()
    {
        cout << "Player: " << health << endl;
    }
};

class Enemy : public Entity
{

};

int main()
{
    Player player; 

    Entity *entity = &player;

    entity->SetHealth(10); 
    player.DisplayHealth();

    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-21T16:07:55.047

代码没有使用任何可以让编译器出汗的东西。

一些可能会影响性能的选项： clear %localappdata%\Microsoft\WebSiteCache 同时清除 %localappdata%\temp 文件夹。

拔下您的 n/w 电缆并尝试（或关闭无线连接）。

同样在工具\选项\调试中：禁用编辑并继续。您可能正在生成 MAP、PDB 等...看看您需要什么和不需要什么。

有人报告说打开“硬件加速”有帮助（选项）！

检查您的 PCH（预编译的头文件），看看它是否变得太大。

允许增量链接，这样就不会一直在构建任何东西。

此外，请确保磁盘没有碎片。

# java - Eclipse：如何在自定义调试器中对源代码启用 Watch 和 Inspect 操作？

> ID：13057399
> 
> 赞同：2
> 
> 时间：2012-10-24T20:41:35.670
> 
> 标签：java, eclipse

我是 EclipseFP 的开发者之一，它为 Eclipse 提供 Haskell 开发插件。它包含一个调试器，所以我实现了 DebugTarget、StackFrames 等。变量和表达式在调试透视图中工作。但是，添加表达式的唯一方法是通过“表达式”视图中的“添加观察表达式”操作。我希望能够在我的源代码中右键单击并选择 Watch，就像在 Java 中一样。我在运行菜单中看到 Watch 操作被禁用。说“我希望监视操作在我的源代码上工作”的集成点是什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T08:54:37.230

也许回答你自己的问题是不好的形式，但我终于设法实现了我想要的......

看了JDT代码，好像没有明确的入口点。我创建了普通的编辑器操作，在调试表达式视图中添加新表达式的代码是：

```
 IWatchExpression expression= DebugPlugin.getDefault().getExpressionManager().newWatchExpression(snippet);
  DebugPlugin.getDefault().getExpressionManager().addExpression(expression);
  IAdaptable object = DebugUITools.getDebugContext();
  IDebugElement context= null;
  if (object instanceof IDebugElement) {
    context= (IDebugElement) object;
  } else if (object instanceof ILaunch) {
    context= ((ILaunch) object).getDebugTarget();
  }
  expression.setExpressionContext(context); 
```

在 JDT 代码的引导下，我有一个系统属性，我的调试目标在挂起时设置它，它反过来启用“显示”操作，向您显示表达式的当前值。

# ios - iOS 更新 JSON 对象

> ID：13057406
> 
> 赞同：0
> 
> 时间：2012-10-24T20:41:59.977
> 
> 标签：ios, json, sqlite

我遇到了一个现有的 iOS 应用程序。它从 Web 服务下载 JSON，并在运行时将 JSON 解析为地图注释对象以显示在地图上。这是相对较快的，因为只有大约 2000 条记录。

问题是我现在想通过询问“自[日期]更新”记录来更新/删除记录。当我得到这些记录时，我不知道我将如何更新 JSON。

我觉得唯一的选择之一可能是在创建地图点之前将对象存储到 SQLite 或类似的东西中。因此，将对 SQLite 记录进行更新，我可以重新创建注释。

有没有人有更好的主意？如果可能的话，我想继续使用原始的 JSON 方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:52:20.850

为什么不使用本地 JSON 副本的创建/修改日期，而在解析新 JSON 时忽略旧记录？这是我在几个应用程序中用于 JSON 和 XML 数据馈送的方法，它总是像 ccharm 一样工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T00:42:37.643

在我看来，Core Data 将是最好的选择。

从长远来看，将大量记录存储在 plist 或纯 JSON 中并不是一个好主意。使用 Core Data，您可以根据需要轻松获取记录、更新和删除记录。更新数据后，您可以使用注释重新获取和更新地图。

您应该查看可以帮助将数据映射到 NSManagedObjects 的 MagicalRecord。

例如，以这个 JSON 为例：

```
result: [
        { longitude: ...,
          latitude: ...,
          locationName: ...
        },
        { longitude: ...,
          latitude: ...,
          locationName: ...
        }
        ],
 status: "ok" 
```

您可以创建具有以下属性的 NSManagedObject：

```
MyLocationObject:
longitude (double)
latitude (double)
locationName (string) 
```

然后，使用 MagicalRecord，您可以简单地执行以下操作来解析和保存对象：

```
[MagicalRecord saveWithBlock:^(NSManagedObjectContext *localContext) {
     // loop through all the locations
     for (NSDictionary *locationDictionary in [response objectForKey:@"result"]) {
         // first we will do a fetch in the database to see if we already have the object
         // I am using the location name as a reference but if you have a unique ID in the JSON, use that instead
         MyLocationObject *locationObject = [MyLocationObject findFirstByAttribute:@"locationName" withValue:[locationDictionary objectForKey:@"locationName"];
         // if locationObject is nil we need to create a new record
         if (!locationObject) {
             locationObject = [MyLocationObject createInContext:localContext];
         }
         // now simple map the JSON to the object
         [locationObject importValuesForKeysWithObject:locationDictionary];
     }
}]; 
```

您可以使用 AFNetworking 之类的东西，它会自动将 JSON 响应解析为适当的 NSObject（字典/数组）以供您使用。

# sql - 比较两列的值，然后选择较大的值

> ID：13057408
> 
> 赞同：21
> 
> 时间：2012-10-24T20:42:15.887
> 
> 标签：sql, sql-server-2008

我需要查询一个表并选择 4 列的值中的 3 个。我需要比较第三列和第四列的值并选择较大的值。

例如：

```
column1  column2  column3  column4
 hello    hello      3        5   
 hi       hi         7        1 
```

我需要返回：

```
column1  column2  Hybrid
 hello    hello     5   
 hi       hi        7 
```

我一直在尝试使用 IF/ELSE，但我似乎无法获得正确的语法

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-10-24T20:44:06.043

在 T-SQL 中，***[IF](http://msdn.microsoft.com/en-us/library/ms182717.aspx)***命令用于程序控制。例如：

*   `IF x THEN doSQLStatement1 ELSE doSQLStatement2`

在 SQL 语句中，您需要***[CASE](http://msdn.microsoft.com/en-us/library/ms181765.aspx)***。

```
CASE WHEN a > b THEN a ELSE b END 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-24T20:49:02.383

试试这个代码：

```
SELECT column1, column2,
       (CASE WHEN column3 > column4 THEN column3 ELSE column4 END)
  FROM Table1 
```

结果：

```
COLUMN1   COLUMN2  Hybrid
 hello     hello      5
  hi         hi       7 
```

在这里，您有关于 SQL Fiddle[的完整示例。](http://sqlfiddle.com/#!3/71b96/2)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-20T15:32:12.480

您可以使用[CASE](http://doc.nuodb.com/Latest/Content/SQL-Conditional-Expressions.htm#CASE)，但如果其中一个值为“null”，则“null”被视为最大值。

要解决此问题，您可以使用[GREATEST](http://doc.nuodb.com/Latest/Content/SQL-Conditional-Expressions.htm#GREATEST)

```
SELECT GREATEST(column3, column4)
FROM Table1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-27T13:26:13.777

我将从创建一个视图开始。

```
CREATE VIEW t_c
SELECT id, c1 AS c FROM t
UNION
SELECT id, c2 AS c FROM t; 
```

然后我会从那个视图中选择。

```
SELECT id, MAX(c) FROM t_c GROUP BY id; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-17T21:00:34.143

这样我们就不会返回 null：

```
SELECT  IIF( a > b, a, COALESCE( a, b )) -- coalesce or isnull
FROM wherever 
```

这是一个测试它的查询：

```
with whatever as (
  select null as a, 1 as b
  UNION
  select 1 as a, null as b
  union
  select 1 as a, 0 as b
  union
  select 0 as a, 1 as b
  union
  select null as a, null as b
)
select( iif( a > b, a, isnull( b, a )))
from whatever 
```

应该返回

```
null
1
1
1
1 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-24T20:45:26.857

```
select column1, coloumn2, case when column3 < column4 then column4 else coloum3 end from table. 
```

# vba - 如何自动将 VBA 脚本转换为 Google Apps 脚本？

> ID：13057411
> 
> 赞同：2
> 
> 时间：2012-10-24T20:42:39.833
> 
> 标签：vba, google-apps-script, google-sheets, code-conversion

VBA 是编写 excel 宏的语言。Google 表格仅支持将 Google 应用脚本作为宏语言。是否有直接或自动的方式将 VBA 脚本转换为 Google Apps 脚本脚本而无需重写代码？

这是我正在尝试转换的示例 VBA 脚本：

```
Private Sub Worksheet_Change(ByVal Target As Range)
    Dim rngStart As Range, rngCrit As Range
    Set rngStart = Range("A3")
    Set rngCrit = Range("B1")
    On Error GoTo ExitPoint
    Application.EnableEvents = False
    If Not Intersect(Target, rngCrit) Is Nothing Then
        Range(rngStart, Cells(Rows.Count, rngStart.Column).End(xlUp)).ClearContents
        If Val(rngCrit) > 0 Then
            With rngStart.Resize(Val(rngCrit))
                .Value = "=ROW()-" & rngStart.Row - 1
                .Value = .Value
            End With
        End If
    End If
ExitPoint:
    Set rngStart = Nothing
    Set rngCrit = Nothing
    Application.EnableEvents = True
End Sub 
```

### 我试过的：

我试图用一些等效的 Google 脚本替换一些命令。我的问题是我的想法太线性了。我正在尝试以与 VBA 完全相同的方式进行编码，并且只是尝试将关键字从 VBA 切换到 Google Script 中的关键字。我希望有一个直接的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T20:29:41.640

有一些这样的“转换”示例 - 但它们通常是重新实现，而不是转换。这是一个微妙的区别，但很重要。虽然您可以将一种语言翻译成另一种语言是可行的，但真正的挑战在于 Excel/VBA 与 Google 电子表格/应用程序脚本/javascript 中的底层对象模型和可用方法之间的差异。

成功的最佳机会是使用 VBA Sub 作为一种规范；如果您可以清楚地解释 VBA Sub 实现了哪些功能，那么您就有了在您的 google 电子表格中实现的新功能规范的基础。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-02T11:44:50.417

您可以使用**GSpread.NET**自动将 VBA 转换为 Google 脚本。它库允许使用 Microsoft Excel API 读取和写入 Google 电子表格。示例：[http ://scand.com/products/gspread/tutorial.html](http://scand.com/products/gspread/tutorial.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-19T11:01:39.137

Google [officially recommends Macro convertor add on.](https://developers.google.com/apps-script/guides/macro-converter/overview)

### Notes:

*   It currently seems to need enterprise plus version of Google workspace.
*   There's a compatibility check and, for VBA APIs, where there are corresponding Apps Script APIs([see list](https://developers.google.com/apps-script/guides/macro-converter/compatible-vba-apis)), the conversion is automatic.
*   It still isn't a copy paste job for apis that are not directly available. You still should have some proficiency in excel vba and apps script to attempt conversion, where the compatibility report suggests `Supported with workarounds` or `Needs more investigation`

# css - 向下滑动菜单没有动画

> ID：13057412
> 
> 赞同：-2
> 
> 时间：2012-10-24T20:42:46.643
> 
> 标签：css, drop-down-menu, css-transitions, nav

现在我正试图让我的下拉导航列表动画。我可以让它褪色，但它绝对不会滑动。

这是下拉列表的示例。

```
<div id="nav" class="navv">
<ul>
    <li><a href="http://www.domain.com">Home</a></li>
    <li><a href="#">Archives</a>
        <ul>
            <li><a href="http://domain.com/index.php?f=BackIssues&page=_Directory2012">Back Issues 2012</a></li>
            <li><a href="http://domain.com/index.php?f=BackIssues&page=_Directory2011">Back Issues 2011</a></li>
            <li><a href="http://domain.com/index.php?f=musicianfeatures&page=_MusicianFeatureDirectory">Musician Features</a>
            </li>
            <li><a href="http://domain.com/index.php?f=cdreview&page=_cdReviewDirectory">CD Reviews</a></li>
            <li><a href="http://domain.com/index.php?f=artist&page=_ArtistFeatureDirectory">Visual Artist Features</a>
            </li>
            <li><a href="#">Coming Soon: Restaurant Reviews</a></li>
        </ul>
    </li>
    <li><a href="#">Calendars</a>
        <ul>
        <!--<li><a href="http://domain.com/index.php?f=calendar&page=TRF">TRF 44</a><li>-->
            <li><a href="http://domain.com/index.php?f=calendar&page=Music">Music &amp; Comedy</a></li>
            <li><a href="http://domain.com/index.php?f=calendar&page=OTR">On the Road Concert Calendar</a></li>
            <li><a href="http://domain.com/index.php?f=calendar&page=RoadTripz">Road Tripz</a></li>
            <li><a href="http://domain.com/index.php?f=calendar&page=Karaoke">Karaoke &amp; DJs</a></li>
            <li><a href="http://domain.com/index.php?f=calendar&page=Movies">Movie Times</a></li>
            <li><a href="http://domain.com/index.php?f=calendar&page=ToDo">Things to Do (Events)</a></li>
            <li><a href="http://domain.com/index.php?f=calendar&page=Stage">Stage &amp; Dance</a></li>
            <li><a href="http://domain.com/index.php?f=calendar&page=Art">Art &amp; Artifacts</a></li>
            <li><a href="http://domain.com/index.php?f=calendar&page=Subcal">Submit Calendar Item</a></li>
        <!--<li><a href="http://domain.com/index.php?f=calendar&page=domain">domain</a></li>
        <li><a href="../Feedback/Subcal.html">Submit Calendar Item</a></li>-->
        </ul>
    </li> 
```

还有这里的 CSS：

```
 #navcon {
background:#7E2217;
width:979px;
border:2px solid #ffe680;
}

#nav {
width:983px;
height:44px;
position:relative;
z-index:200;
color:#ffe680;
font-family:Arial, Tahoma, san-serif;
font-size:1em;
margin:0 auto;
}

#nav ul {
list-style-type:none;
}

#nav ul li {
float:left;
position:relative;
z-index:200;
width:163px;
}

#nav ul li a {
border:1px solid #ffe680;
display:block;
text-align:left;
text-decoration:none;
color:#ffe680;
z-index:200;
-webkit-transition:background .09s ease-in;
-o-transition:background .09s ease-in;
-moz-transition:background .09s ease-in;
padding:12px;
}

#nav ul li a:hover {
background:#E8A317;
color:#ffe680;
}

#nav ul li ul {
height:0;
overflow:hidden;
}

#nav ul li:hover ul {
height:auto;
overflow:shown;
position:absolute;
-webkit-transition:height 2s;
-o-transition:height 2s;
-moz-transition:height 2s;
}

#nav ul li:hover ul li a {
background:#fff;
color:#e8a317;
display:block;
}

#nav ul li:hover ul li a:hover {
background:#e8a317;
color:red;
} 
```

我已经尝试过仅高度的过渡，没有任何反应。我可以不使用两个过渡元素吗？因为如果我尝试用一​​条线作为背景，一条线作为高度，也不会发生任何事情。

我怎样才能让这个导航列表动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:27:36.753

你错过了声明`>`之后`:hover`...

试试这个：

```
/* set the hidden menu */
#nav ul li ul{top:-100px;position:absolute;opacity:0}
/* do the magic */
#nav ul li:hover > ul{top:44px;opacity:1} 
```

工作示例：http: [//jsfiddle.net/Dvveq/](http://jsfiddle.net/Dvveq/)

干杯，祝你的项目好运！

# ios - Xcode，未找到此可执行文件的配置文件

> ID：13057413
> 
> 赞同：0
> 
> 时间：2012-10-24T20:42:53.453
> 
> 标签：ios, xcode

所以我以前遇到过这个问题，但我不知道马上解决它。我通过 Xcode 管理器创建了一个新的配置文件，并尝试使用它在设备上运行。那没起效。我得到了 no valid prov profile 错误。当我去组织者时，我看到我的个人资料都是绿色的。我连接的 iPad 一开始都是绿色的，然后在构建过程快结束时，当 Xcode 说“正在验证”时，我试图构建的管理器中 iPad 旁边的圆圈变成黄色，并且然后我收到错误消息，“找不到此可执行文件的有效配置 porfiles。” 我已经清理了我的构建文件夹，重新启动了我的机器，断开并重新连接了我的设备，没有任何效果。这一切都在大约一周前奏效。从那以后我唯一做的就是升级到 Xcode 4.5.1。当我尝试使用 Xcode 4.5 返回时，我仍然遇到同样的错误。我不确定接下来要寻找什么。我在 WWDC 2012 上观看了 Apple 关于构建、归档和提交应用程序的视频，但这并没有帮助我解决这个问题。有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:25:17.497

确保您的证书有效。转到钥匙串访问并检查那里的证书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:29:40.107

我们现在正在尝试的一件事是长远目标，但这也可能是您的问题：如果这是您正在使用的新 iPad 或设备，请确保注册它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T10:14:17.240

对我有用的解决方案是在 4.5.1 中出现问题后在“目标”和“项目”中设置代码签名身份

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T03:26:58.630

我升级 XCode 时遇到了同样的问题。首先确保您的设备在配置文件中。不知何故，我的不是，即使我确定它以前是。然后，使用您的凭据从 XCode 中的 Organizer 刷新您的证书。然后你必须重新启动 xcode，再次设置代码签名身份，然后你就可以开始了。

# php - 通过 URL 显示 PHP 图像

> ID：13057415
> 
> 赞同：3
> 
> 时间：2012-10-24T20:42:54.593
> 
> 标签：php, image, url

我有这个 php 代码（image.php）：

```
if($_SERVER['SERVER_NAME'] == 'site.tld') {

    header('Content-type: image/jpeg');
    echo file_get_contents("image1.jpg");

} else {

    header('Content-type: image/jpeg');
    echo file_get_contents("image2.jpg");

} 
```

*此页面 ( `image.php`) 托管在`site.tld`;

现在...此代码将由 调用`<img src='http://site.tld/image.php' />`。

`image1.jpg`如果图像被调用，我想显示`site.tld`，`image2.jpg`如果没有。

该代码显示`image1.jpg`调用代码的任何域名。

有什么解决办法吗？谢谢。

编辑：任何网站上的输出`$_SERVER['SERVER_NAME']`都是`site.tld`（我的服务器）......

这就是问题所在，因为脚本无法正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T21:02:19.693

尝试这个：

```
 $imgPath = "image1.jpg";

    if(stripos($_SERVER["HTTP_REFERER"], 'http://site.tld/')=== false){

       $imgPath = "image2.jpg";

    }

    //echo $_SERVER["HTTP_REFERER"]."<br/>";
    //echo $imgPath."<br/>";

    header('Content-type: image/jpeg');
    echo file_get_contents($imgPath); 
```

其他选项（基于 PWhite 评论）：

您从[http://site.tld/](http://site.tld/)进行的所有调用都添加了一个查询字符串键，然后也评估此数据。

内部 site.tld ：

```
<img src='http://site.tld/image.php?myfookey=secret' /> 
```

外部 site.tld ：

```
<img src='http://site.tld/image.php' /> 
```

图像.php

```
$imgPath = "image1.jpg";

if (!(isset($_REQUEST["myfookey"]) &&  $_REQUEST["myfookey"] == 'secret')){
    $imgPath = "image2.jpg";
} 

header('Content-type: image/jpeg');
echo file_get_contents($imgPath); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T20:50:53.470

那是因为

```
$_SERVER['SERVER_NAME'] 
```

显示*您的*服务器的名称（即执行 PHP 的服务器）。

您想要的是包含页面的 URL，`<img src='http://site.tld/image.php' />`我不确定客户端的浏览器会将此类信息发送到您的服务器。

/edit：如果您试图阻止第三方网站显示您的图片，您希望在服务器配置级别执行此操作，例如[http://www.davidairey.com/stop-image-theft-hotlinking-htaccess/](http://www.davidairey.com/stop-image-theft-hotlinking-htaccess/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T20:50:13.303

首先，检查`$_SERVER['SERVER_NAME']`if 条件的输出。然后使用`readfile()`而不是`file_get_contents()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T20:56:56.830

如果您使用的是 Apache，请尝试`UseCanonicalName Off`在您的虚拟主机配置中进行设置（可能需要重新加载/重新启动 Apache）。

# c# - 如何将 asp:FormView ItemTemplate 导出到外部文件

> ID：13057417
> 
> 赞同：2
> 
> 时间：2012-10-24T20:43:00.393
> 
> 标签：c#, asp.net, external, itemtemplate, edititemtemplate

我有一个像这样的 asp:FormView：

```
<asp:FormView ID="foo" runat="server" >
    <ItemTemplate>
      ... lots of code
    </ItemTemplate>
    <EditItemTemplate>
      ... lots more code
    </EditItemTemplate>
<asp:FormView> 
```

如果可能的话，我想将模板移到单独的文件中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:48:08.187

提取模板中的代码并将它们添加到单独的`.ascx`文件中。然后你可以这样做：

**ASPX**

```
<asp:FormView ID="foo" runat="server" OnInit="foo_Init"> 
```

**背后的代码**

```
protected void foo_Init(object sender, EventArgs e)
{
    foo.ItemTemplate = Page.LoadTemplate("~/Controls/MyLayoutTemplate.ascx");
    foo.EditTemplate = Page.LoadTemplate("~/Controls/MyEditTemplate.ascx");
} 
```

# java - Java JUnit 代码中 new 运算符之后的代码块

> ID：13057422
> 
> 赞同：1
> 
> 时间：2012-10-24T20:43:29.200
> 
> 标签：java, unit-testing

这是 JUNIT4 中包含的示例 JUnit 测试代码。它展示了两种情况：类型安全方式和动态方式。我尝试使用类型安全的方式。

```
import junit.framework.Test;
import junit.framework.TestCase;
import junit.framework.TestSuite;

/**
 * Some simple tests.
 */
public class SimpleTest extends TestCase {
    protected int fValue1;
    protected int fValue2;

    SimpleTest(String string)
    {
        super(string);
    }

    @Override
    protected void setUp() {
        fValue1 = 2;
        fValue2 = 3;
    }

    public static Test suite() {

          /*
           * the type safe way
           */
          TestSuite suite= new TestSuite();
          suite.addTest(
              new SimpleTest("add") {
                   protected void runTest() { testAdd(); }
              }
          );

          suite.addTest(
              new SimpleTest("testDivideByZero") {
                   protected void runTest() { testDivideByZero(); }
              }
          );
          return suite;
    }

    ...

    public static void main(String[] args) {
        junit.textui.TestRunner.run(suite());
    }
} 
```

我不确定这个代码片段。

```
suite.addTest(
    new SimpleTest("add") {
        protected void runTest() { testAdd(); }
        }
    ); 
```

*   new Simple("add") {...} 是如何工作的？我的意思是，代码块如何跟随新的运算符？
*   为什么需要 {...} 块？我试过没有它，我没有编译/运行时错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:12:39.767

在这个片段中：

```
suite.addTest(
    new SimpleTest("add") {
        protected void runTest() { testAdd(); }
    }
); 
```

您创建一个[匿名内部类](https://stackoverflow.com/questions/355167/how-are-anonymous-inner-classes-used-in-java)并将其作为参数传递给 addTest 方法。您调用了将 String 作为参数的 SimpleTest 构造函数，因此您需要添加另一个构造函数。至于 Q3 问题，TestCase 也有无参数构造函数，因此此代码将是正确的，无需添加额外的构造函数：

```
suite.addTest(
    new SimpleTest() {
        protected void runTest() { testAdd(); }
    }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T21:47:09.540

我有一个创建和使用匿名内部类的简单示例。对我 `Inner`来说有点误导，因为它似乎没有使用内部类，而只是更改了一些方法操作。

```
class Ferrari {
    public void drive() {
        System.out.println("Ferrari");
    }
}

// Example 1: You can modify the methods of an object.
class Car {
    Ferrari p = new Ferrari() {
        public void drive() {
            System.out.println("anonymous Ferrari");
        }
    };
}

class AnonymousAgain {
    public void hello(Ferrari car) {
        car.drive();
    }

    public static void main(String[] args) {
        AnonymousAgain a = new AnonymousAgain();
        // Example 2
        a.hello(new Ferrari() {
            public void drive() {
                System.out.println("The power of inner");
            }
        });
    }
} 
```

# java - Selenium Grid，如何将 WebDriver 与 ThreadSafeSeleniumSessionStorage.session() 结合使用

> ID：13057423
> 
> 赞同：5
> 
> 时间：2012-10-24T20:43:34.863
> 
> 标签：java, selenium, webdriver, selenium-webdriver, selenium-grid

我正在开展一个项目，该项目涉及大量使用 Selenium WebDriver 和特定的 Firefox 配置文件来查找元素和管理页面。

例如，
`driver.findElement(By.xpath("//*[@id='foobar']"));`
和
`driver.manage().refresh();`

我正在尝试将 Selenium Grid 实施到我的项目中；但是，随着 Selenium WebDriver 的广泛使用，有没有办法使用特定的 WebDriver 启动 ThreadSafeSeleniumSessionStorage.session() 静态对象？

据我研究，可以通过以下方式从 Selenium 对象中获取 WebDriver：

```
startSeleniumSession(seleniumHost, seleniumPort, browser, webSite); //Create and start the session() object
//TODO: insert a specific WebDriver into the session() object
WebDriver driver = ((WebDriverBackedSelenium) session()).getWrappedDriver(); //Get the WebDriver from the session() object 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T22:03:38.643

我没有尝试过这段代码，但如果它有效，那么你将拥有一个包含基于 Selenium 的 WebDriver 的对象。据我了解，此功能可用于从 Selenium 1 迁移到 Selenium 2。这不是使 Web 驱动程序线程安全的推荐方法。

WebDriver 默认不是线程安全的。我建议为每个线程实例化一个 WebDriver 实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T14:44:30.413

您可以查看 ThreadSafeSeleniumSessionStorage 类的实现，并使用相同的逻辑来创建新的 ThreadSafeWebdriverSessionStorage。你不能吗？来源在[这里](https://github.com/nirvdrum/selenium-grid/blob/master/tools/src/main/com/thoughtworks/selenium/grid/tools/ThreadSafeSeleniumSessionStorage.java)

它使用 ThreadLocal 类。实施起来应该不难。

# google-apps-script - 如何使用 Google API 创建触发器

> ID：13057425
> 
> 赞同：-1
> 
> 时间：2012-10-24T20:43:50.303
> 
> 标签：google-apps-script

我是否有可能不仅在电子表格上添加触发器？我的意思是如果我想在我登录邮箱时执行一些脚本。是否有可能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:23:53.233

您可以从电子表格事件或基于时间的触发器设置触发器，暂时没有别的，这在[在线文档](https://developers.google.com/apps-script/class_triggerbuilder)中有明确的解释......

我同意前面的评论，这是一个不恰当的问题......

# prolog - Prolog：失败驱动的循环

> ID：13057428
> 
> 赞同：6
> 
> 时间：2012-10-24T20:44:12.223
> 
> 标签：prolog, logic-programming, prolog-setof

我使用以下失败驱动循环来列出所有内容而不使用分号。

```
happiness(fred,5).
happiness(john,3).
happiness(grace,2).

someGoal(X) :-
        happiness(X,Y), write(Y), tab(4), fail. 
```

在查询模式下，我得到了预期

```
?- someGoal(_).
5    3    2 
```

如何将这些数字插入列表而不是将它们写入屏幕？我无法在内部处理这个问题，`someGoal`因为回溯似乎是隐含的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T20:54:13.330

你是对的，回溯它是 Prolog 处理替代方案的方式。

使用[findall](http://www.swi-prolog.org/pldoc/doc_for?object=findall/3) /3，它使用“内部”回溯收集*所有备选方案：*

```
someGoal(X, Values) :-
    findall(Value, happiness(X, Value), Values). 
```

然后`?- someGoal(_, Values).`将实例 Values = [5, 3, 2]

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-25T14:50:24.473

故障驱动的循环通常会使某些部分处于打开状态且未指定，迟早会导致一些问题。特别是变量的精确量化很容易保持开放。[通常，这样的循环可以完全避免](https://stackoverflow.com/a/9791028/772868)。在你的例子中，我不清楚你为什么要争论`someGoal/1`。至少你不使用它。于是出现了几个问题：

1.  如果没有匹配的值，你期望什么？您的原始程序不打印任何内容并且失败。

2.  如果有多余的条目，您会期望什么？你想把东西打印几次吗？

3.  你坚持价值的精确顺序，还是你能想象另一个顺序？

4.  你为什么对看到这些价值观感兴趣？大多数时候，您要么希望将它们与具体名称相关联，要么希望将其聚合，例如总和或平均值。

鉴于我不知道这些问题的答案，我可以为您提供几种解决方案。我将以一个额外的（冗余）事实为例：

```
幸福（弗雷德，5）。
幸福（约翰，3）。
幸福（约翰，3）。
幸福（恩典，2）。

?- setof(PH,happiness(P,H), PHs)。
PHs = [fred-5，grace-2，john-3]。

?- setof(H,P^happiness(P,H), PHs)。
PH = [2, 3, 5]。

?- bagof(H,P^happiness(P,H), PHs)。
PH = [5, 3, 3, 2]。

```

# zend-framework - Zend like with or 条件

> ID：13057431
> 
> 赞同：-1
> 
> 时间：2012-10-24T20:44:19.093
> 
> 标签：zend-framework, zend-db

我收到了带有 where 条件的 sql 问题：

```
$select->where('(users.user_fname LIKE (?) )','%'.$first.'%'); 
```

如何放入它 OR 条件，使其看起来像：

```
$select->where('(users.user_fname LIKE (?) )','%'.$first.'%');
OR
$select->where('(users.user_fname LIKE (?) )','%'.$last.'%'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:47:09.877

[http://framework.zend.com/manual/1.12/en/zend.db.select.html](http://framework.zend.com/manual/1.12/en/zend.db.select.html)

```
$select
    ->where('(users.user_fname LIKE "%?%")', $first)
    ->orWhere('(users.user_fname LIKE "%?%")', $last)
; 
```

# vba - 将所有“工作表对象”转换为 powerpoint 中的图像

> ID：13057432
> 
> 赞同：5
> 
> 时间：2012-10-24T20:44:23.897
> 
> 标签：vba, powerpoint, worksheet

真的不确定将其放置在哪个堆栈站点上。随意将其移至正确的位置。我的问题与编程并没有真正的关系，但我有很多关于幻灯片中嵌入的“工作表对象”的电源点。有些似乎是来自 excel 的图表以及来自 Visio 的其他图表类型项目。我需要将所有这些“工作表对象”转换为幻灯片中的图像。

我现在的过程是复制对象>粘贴为图像>移动到正确的位置>删除“工作表对象”。这是一个非常耗时且乏味的过程。是否有我可以编写的宏或可以自动转换所有这些对象的东西？我试过谷歌搜索，到目前为止没有运气

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-26T03:52:16.310

这应该让你开始：

```
Sub ConvertAllShapesToPic()
    Dim oSl As Slide
    Dim oSh As Shape

    For Each oSl In ActivePresentation.Slides
        For Each oSh In oSl.Shapes
            ' modify the following depending on what you want to
            ' convert
            Select Case oSh.Type
                Case msoChart, msoEmbeddedOLEObject, msoLinkedOLEObject
                    ConvertShapeToPic oSh
                Case msoPlaceholder
                    If oSh.PlaceholderFormat.ContainedType = msoEmbeddedOLEObject _
                        Or oSh.PlaceholderFormat.ContainedType = msoLinkedOLEObject _
                        Or oSh.PlaceholderFormat.ContainedType = msoChart _
                        Then
                        ConvertShapeToPic oSh
                    End If
                Case Else

            End Select
        Next
    Next

End Sub

Sub ConvertShapeToPic(ByRef oSh As Shape)
    Dim oNewSh As Shape
    Dim oSl As Slide

    Set oSl = oSh.Parent
    oSh.Copy
    Set oNewSh = oSl.Shapes.PasteSpecial(ppPasteEnhancedMetafile)(1)

    With oNewSh
        .Left = oSh.Left
        .Top = oSh.Top
        Do
            .ZOrder (msoSendBackward)
        Loop Until .ZOrderPosition < oSh.ZOrderPosition
    End With

    oSh.Delete

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-04T11:41:41.987

如果您不想编写宏，其他快速替代方法是剪切对象 (Ctrl + x)，然后将其粘贴 (Ctrl + v) 为 img（我们可以使用特殊粘贴来选择图像格式或粘贴时(Ctrl + v) MS power point 将提示粘贴选项，然后在其中选择图像）。这样我们就不必将图像保存到驱动器上的某个位置，然后再将其插入幻灯片中。剪切和粘贴将在同一张幻灯片上工作。

# c++ - 如何在C++、Qt、QML、Blackberry 10 Cascades Beta 3 SDK中制作图表/图形（如折线图、条形图、圆图）等？

> ID：13057437
> 
> 赞同：5
> 
> 时间：2012-10-24T20:45:10.793
> 
> 标签：c++, qt, charts, qml, blackberry-10

我需要知道如何在 Blackberry 10 Cascades Beta 3 SDK、QML、Qt、C++ 中制作图表/图形。如果有人可以向我展示一个示例或向我指出一些向我展示如何做到这一点的东西，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-01-27T20:10:33.287

您应该查看 QChart.js：

[http://jwintz.me/blog/2014/02/15/qchart-dot-js-qml-binding-for-chart-dot-js/](http://jwintz.me/blog/2014/02/15/qchart-dot-js-qml-binding-for-chart-dot-js/)

[https://github.com/jwintz/qchart.js](https://github.com/jwintz/qchart.js)

![QChart.js 图库截图](../Images/c3d0779dd09cb49eb57720f54155dac1.png)

**更新**Qt 公司将在 GPL 下在 5.7 中发布 QtCharts [http://blog.qt.io/blog/2016/01/13/new-agreement-with-the-kde-free-qt-foundation/](http://blog.qt.io/blog/2016/01/13/new-agreement-with-the-kde-free-qt-foundation/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T17:51:08.230

在 Qt 和 QML 中创建图形的一种方法是添加一个 Webview 并使用 html 库来显示图形。我使用过[flot](http://www.flotcharts.org)并发现它非常灵活。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-03T20:58:07.417

这是 QCustomPlot 的简单 QML 包装器：[https ://github.com/ncp1402/ql-lineplot](https://github.com/ncp1402/ql-lineplot)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-16T07:53:35.973

*这是一个老问题，但对我来说，值得等待。*

此时有[Qt 5.7.0 Released](https://blog.qt.io/blog/2016/06/16/qt-5-7-released/)。其他新功能包括：

*   **Qt 图表**。以前仅用于商业用途的 Qt Charts 模块现在包含在 Qt 中，同时也是针对开源用户的 GPLv3 许可。

[![Qt 图表。 图片引起注意](../Images/3dca11f5092fab5716ef134344f6be5b.png)](https://i.stack.imgur.com/jEhy9.png)

*   **Qt 数据可视化**。以前仅用于商业用途的 Qt 数据可视化模块现在包含在 Qt 中，也适用于开源用户的 GPLv3 许可。

[![Qt 数据可视化。 图片引起注意](../Images/2af53a405dc66b9193dd90ccb2d4b3cd.png)](https://i.stack.imgur.com/HApAN.png)

如果有人感兴趣，这里是一个很好的起点：

*   [Qt 图表入门](http://doc.qt.io/qt-5/qtcharts-index.html)
*   [Qt 数据可视化入门](http://doc.qt.io/QtDataVisualization/qtdatavisualization-getting-started.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T14:24:57.543

如果您需要使用 QT 的 C++ 中的某些内容，您可以查看 QWT [http://qwt.sourceforge.net/index.html](http://qwt.sourceforge.net/index.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-26T20:18:55.490

正如已经建议的那样，使用 WebView 对象来托管您的图库，您会发现与它一起使用的库比本机要多得多。

根据个人经验，我可以说[http://www.highcharts.com/](http://www.highcharts.com/)与 Playbook OS 和 Blackberry 10 OS 配合得很好

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-26T21:47:03.160

好吧，我也在寻找解决方案。

如果它是简单的绘图，那么也许您可以使用 ImagePaintData 创建 ImagePaint。此处显示了非常简单的示例： [https://developer.blackberry.com/cascades/reference/bb_ *cascades* _imagepaint.html](https://developer.blackberry.com/cascades/reference/bb__cascades__imagepaint.html)

例如，也可以渲染图表并将其分割为 Png；然后您也可以在 QML 中将其显示为图像；

另一种选择是使用此处描述的外部窗口： [https ://developer.blackberry.com/cascades/files/webinars/cascades_opengl_webcast.pdf](https://developer.blackberry.com/cascades/files/webinars/cascades_opengl_webcast.pdf)

你可以使用opengl来渲染图形，或者尝试编译图表库

好吧-网络浏览器控件似乎是最简单的解决方案，我想我会尝试的。

我试过这个。并非每个图表库都适用于 bb10 模拟器。对于 exaple flot ，前面提到的那个不起作用。但有些图书馆有效。例如 highCharts 和 [http://elycharts.com/](http://elycharts.com/examples)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-28T19:36:28.097

Chart.js 2 是一个不错的库，它提供了大量带有动画、许多选项和简单界面的不同图形。我们为它编写了一个 QML 适配器。Qt 图表也不错，但它只能与 GPL 或商业 QT 许可证一起使用。我们的适配器和 Chart.js 2 都是 MIT 许可的。

也许，它对您和其他人有帮助：[https ://github.com/Elypson/ChartJs2QML](https://github.com/Elypson/ChartJs2QML)

# java - Java：如何打印数组？“找不到标志”

> ID：13057439
> 
> 赞同：2
> 
> 时间：2012-10-24T20:45:11.770
> 
> 标签：java, arrays

```
System.out.println(someArray); 
```

只给我一个地址，我假设它是存储值的地址。

```
System.out.println(Arrays.asList(someArray));
System.out.println(Arrays.toString(someArray)); 
```

这两个都无法编译并说“找不到符号”，符号为：“变量数组”。

如何查看该数组中有哪些值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T20:48:21.647

> '找不到符号'，符号为：'变量数组'

您缺少`import java.util.Arrays`类顶部的导入语句。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T20:46:34.640

一个循环怎么样？：

```
for (T item : someArray)
    System.out.println(item); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T20:48:55.657

你必须：

```
import java.util.Arrays; 
```

然后你就可以做到：

```
System.out.println(Arrays.asList(someArray)); 
```

或者

```
System.out.println(Arrays.toString(someArray)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T20:48:15.087

只需尝试导入`java.util.Arrays`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T20:50:29.290

> 只给我一个地址，我假设它是存储值的地址。

不是真正存储值的位置，而是数组寻址空间的开头。

我并没有真正使用 java.util.Arrays 所以我不知道那个库。您始终可以通过遍历数组并根据需要打印出每个项目的内容来打印出一个数组——只要您要打印的每个部分都有一个为其编写的 toString() 方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-24T20:53:01.927

你只需要导入`java.util.Arrays`.

像这样添加导入语句：

```
your.some.package;

import java.util.Arrays;

public class SomeClass {
   public void someMethod() {
      System.out.println(Arrays.asList(someArray));
   }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-25T12:51:20.907

为此，java.util.Arrays 还包含[deepToString()](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#deepToString%28java.lang.Object%5B%5D%29)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-10-24T20:52:21.290

试试这个： `enter code here`

```
for(int i=0;i<=size_of_ur_array;i++)
{
  System.out.println(""+someArray[i]);
} 
```

上面的 size_of_ur 数组将是你用来给它一个最大上限的数字。由于数组是使用索引存储的，因此您需要以索引方式访问它们，即第一个元素将是 a[0]，第二个元素是 a[1]，依此类推，直到您的上限。

# iphone - 使用 SDWebimagemanager iOS iPhone 清除内存

> ID：13057440
> 
> 赞同：1
> 
> 时间：2012-10-24T20:45:14.377
> 
> 标签：iphone, ios, memory, memory-leaks, sdwebimage

我很失望，自从我遇到这个记忆问题已经一个多星期了，我找不到解决办法。

我的应用程序使用了大量来自 facebook 的高分辨率照片。

我使用 SDwebimageManager 下载和缓存我的所有照片。

当我创建我的 photoviewcontroller 的实例时，平均有 40 张照片被下载和缓存并出现在屏幕上。

正如你想象的那样，我必须经常为我的控制器的每个实例清除缓存。

但是，我的 SDWebimage 有问题，我无法清除缓存……可用物理内存的大小正在下降，我的应用程序总是很快崩溃

我正在使用情节提要创建这样的控制器（如您所见，我首先清除缓存）：

```
if([[segue identifier] isEqualToString:@"FriendView"])
{
    SDImageCache *imageCache = [SDImageCache sharedImageCache];
    [imageCache clearMemory];
    if (self.friends != nil) {
        [self.friends release];
    }
    NSString *s = [friendsid objectAtIndex:indexload];

    self.friends = (MyFriendViewController *)[segue destinationViewController];

    self.friends.friend = s;
    self.friends.Manager = self.Manager; 
} 
```

在控制器中，我使用我的经理下载每张这样的照片：

```
for(int i=0;i<items.count;i++) {
   [self.Manager downloadWithURL:[NSURL URLWithString:[self.items objectAtIndex:i]]
   delegate:self
   options:0
   success:^(UIImage *image,BOOL cached )                        
   {
       [self.photosload setObject:image  forKey:[NSString stringWithFormat:@"%i", i]];
       if (photosload.count == items.count) {
           [self.collectionView reloadData];
       }
   }
   failure:nil];
} 
```

我使用 NSDictionary 来收集我所有的照片，当最后一张照片被下载时，我重新加载我的收藏视图。如果我回到我的 ui 并重新加载我的控制器，我的内存会增长并且我很快就会收到警告......并且应用程序崩溃了。

当我使用 SDCache 清除内存缓存时，什么也没有发生。

这很奇怪，因为如果我在此行之后放置 [image release]：

```
[self.photosload setObject:image  forKey:[NSString stringWithFormat:@"%i", i]];
[image release]; 
```

当我调用 SDImagecache 时，我的内存被清除了，但正如你可以想象的那样......如果我这样做......我使用这本字典“photosload”和一个 collectionview，因为我释放了每张图片，当我在 collectionview 中滚动时我的应用程序崩溃...

我完全失望了，我不知道发生了什么……

非常感谢您的帮助我完全被这个内存问题所困扰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:03:58.060

如果我错了，请纠正我，但我认为您的问题在于下载所有项目，即使是您目前不需要的项目。您的屏幕上是否同时显示所有 40 张图像？我认为您有一个集合视图，同时屏幕上只有几个。

因此，如果我是对的，您不必在循环中下载所有这些，仅在需要时下载它们，最常见的情况是当您显示新图像时。您将重用 UIImageView 并用新的 URL 填充它。如果您使用的是[SDImage](https://github.com/rs/SDWebImage)库，那么您必须像这样加载图像：

```
[imageView setImageWithURL:[NSURL URLWithString:self.items objectAtIndex:i]]
          placeholderImage:[UIImage imageNamed:@"placeholder.png"]]; 
```

它应该自动缓存您的图像。当您收到内存警告时，您应该清除缓存，但这不是问题。

这是如何`SDImage`工作的：

当您调用`[imageView setImageWithURL:URL placeholderImage:Image];`它时，它会检查`memcache`它，`NSDictionary`如果在 memcache 中没有这样的 URL，它将在磁盘上搜索该 URL 的保存图像，如果失败，它将开始下载和缓存您的图像。因此，当您收到内存警告时，您`SDImageCache`只能使用调用。`clearMemory`

# javascript - 在 Javascript 中精确模拟用户的按键

> ID：13057441
> 
> 赞同：8
> 
> 时间：2012-10-24T20:45:15.457
> 
> 标签：javascript, android, events, keyboard, trigger.io

一点上下文：我正在开发一个基于 HTML5 的移动应用程序，该应用程序具有自动完成功能，由于 setSelectionRange 中的错误而在 Android 上中断：[http://code.google.com/p/android/issues/detail? id=15245](http://code.google.com/p/android/issues/detail?id=15245)因此，我不能像往常一样直接操作文本字段中的文本。为了解决这个问题，我打算手动触发几个键事件来模拟用户在 android 软键盘上的按键。

我在[是否可以以编程方式模拟按键事件中找到的所有解决方案？](https://stackoverflow.com/questions/596481/simulate-javascript-key-events)并且[在 JavaScript 中触发键盘事件](https://stackoverflow.com/questions/961532/firing-a-keyboard-event-in-Javascript)只是触发事件而不实际创建任何文本输入。

有没有办法使用javascript模拟整个按键事件，包括文本输入？

**更新：固定（有点）**

我通过为触发器（我们正在使用的包装器）编写一个插件来解决这个问题，该插件在本机级别手动触发 android 键盘事件。它托管在这里：[http](http://bit.ly/RiJqrM) ://bit.ly/RiJqrM ，如果其他人感兴趣的话。

**另一个更新：**

进一步的挫败感和随后的测试让我绕了一圈，结果发现上面提到的 android bug 可能有点像红鲱鱼。我的插入符号表现异常的原因实际上可能是由于原生 android 自动完成的某种组合以及 jQuery focus() 在 android 上根本不起作用（无耻的自我提升）的事实：[Android JQuery focus() workaround](https://stackoverflow.com/questions/13176813/android-jquery-focus-workaround)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T22:47:40.083

不，大多数浏览器不允许脚本完全模拟按键：您可以触发事件，但相关的浏览器行为（更新输入的值、编辑 contenteditable 元素的内容、移动插入符号等）不会发生.

# ruby - 无法在 windows xp 上的 cygwin 下为 bcrypt-ruby gem 构建本机扩展

> ID：13057452
> 
> 赞同：2
> 
> 时间：2012-10-24T20:46:07.403
> 
> 标签：ruby, cygwin, rvm, bundler, bcrypt-ruby

我正在 Windows XP 上为 Rails 应用程序设置测试代理。

为了强制代理之间的一致性，我通过带有 Cygwin 的 RVM 的 Bundler 安装它。

以下是在项目目录中运行 bundle install 的结果（编辑：请注意，运行 gem install bcrypt-ruby 会产生相同的输出）：

```
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

    /goBaltoEngineering/.rvm/rubies/ruby-1.9.3-p125/bin/ruby.exe extconf.rb
creating Makefile

make
compiling bcrypt_ext.c
compiling crypt.c
compiling crypt_blowfish.c
compiling crypt_gensalt.c
compiling wrapper.c
In file included from wrapper.c:27:0:
/goBaltoEngineering/.rvm/rubies/ruby-1.9.3-p125/include/ruby-1.9.1/ruby/backward/util.h:2:2: warning: #warning use "ruby/util.h" instead of bare     "util.h"
linking shared-object bcrypt_ext.so
bcrypt_ext.o:bcrypt_ext.c:(.text+0x29): undefined reference to `_ruby_bcrypt'
collect2: ld returned 1 exit status
Makefile:207: recipe for target `bcrypt_ext.so' failed
make: *** [bcrypt_ext.so] Error 1

Gem files will remain installed in /goBaltoEngineering/.rvm/gems/ruby-1.9.3-p125@togo/gems/bcrypt-ruby-3.0.1 for inspection.
Results logged to /goBaltoEngineering/.rvm/gems/ruby-1.9.3-p125@togo/gems/bcrypt-ruby-3.0.1/ext/mri/gem_make.out
An error occurred while installing bcrypt-ruby (3.0.1), and Bundler cannot continue.
Make sure that `gem install bcrypt-ruby -v '3.0.1'` succeeds before bundling. 
```

安装了 cygwin gcc 包：

```
$ whereis gcc
gcc: /bin/gcc.exe /usr/bin/gcc.exe /lib/gcc /usr/lib/gcc /cygdrive/e/Cygwin/bin/gcc.exe /usr/share/man/man1/gcc.1.gz

$ gcc -v
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/usr/lib/gcc/i686-pc-cygwin/4.5.3/lto-wrapper.exe
Target: i686-pc-cygwin
Configured with: /gnu/gcc/releases/respins/4.5.3-3/gcc4-4.5.3-3/src/gcc-4.5.3/configure    --srcdir=/gnu/gcc/releases/respins/4.5.3-3/gcc4-4.5.3-3/src/gcc-4.5.3 --prefix=/usr --exec-  prefix=/usr --bindir=/usr/bin --sbindir=/usr/sbin --libexecdir=/usr/lib -- datadir=/usr/share --localstatedir=/var --sysconfdir=/etc --datarootdir=/usr/share -- docdir=/usr/share/doc/gcc4 -C --datadir=/usr/share --infodir=/usr/share/info -- mandir=/usr/share/man -v --with-gmp=/usr --with-mpfr=/usr --enable-bootstrap --enable-version-specific-runtime-libs --libexecdir=/usr/lib --enable-static --enable-shared --enable-shared-libgcc --disable-__cxa_atexit --with-gnu-ld --with-gnu-as --with-dwarf2 --disable-sjlj-exceptions --enable-languages=ada,c,c++,fortran,java,lto,objc,obj-c++ --enable-graphite --enable-lto --enable-java-awt=gtk --disable-symvers --enable-libjava --program-suffix=-4 --enable-libgomp --enable-libssp --enable-libada --enable-threads=posix --with-arch=i686 --with-tune=generic --enable-libgcj-sublibs CC=gcc-4 CXX=g++-4 CC_FOR_TARGET=gcc-4 CXX_FOR_TARGET=g++-4 GNATMAKE_FOR_TARGET=gnatmake GNATBIND_FOR_TARGET=gnatbind --with-ecj-jar=/usr/share/java/ecj.jar
Thread model: posix
gcc version 4.5.3 (GCC) 
```

和 bcrypt 一样：

```
 $ whereis bcrypt
 bcrypt: /bin/bcrypt.exe /usr/bin/bcrypt.exe /cygdrive/e/Cygwin/bin/bcrypt.exe /usr/share/man/man1/bcrypt.1.gz

 bcrypt -v
 bcrypt: unknown option -- v
 Usage is: /bin/bcrypt -[orc][-sN] file1 file2..
   -o Write output to standard out
   -r Do NOT remove input files after processing
   -c Do NOT compress files before encryption
   -sN How many times to overwrite input files with random data 
```

进一步研究的结果：

环境

```
 rvm use system 
```

（在我的情况下是 1.9.3-p286）允许 bcrypt-ruby 顺利安装

通过 rvm 安装 1.9.3-p286 并设置

```
 rvm use 1.9.3-p286 
```

导致相同的（禁止 ruby​​ 版本）错误消息。

在 Mac OS X 上安装可以在众多开发人员站和多个 Mac 代理上顺利运行。

所有这些都表明该错误位于 rvm 与 cygwin 的交集处。

我已经尝试了我能想到的一切。任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T22:35:59.220

我通过以下方式避开了它：为我的 Ruby 版本安装 Rubyinstaller：

[http://rubyinstaller.org/](http://rubyinstaller.org/)

从我的路径中删除 Cygwin（右键单击我的电脑 > 属性 > 高级 > 环境变量）。

下载 Git Bash 并按照此处的说明设置 ssh：

[http://mrsimonelliott.com/blog/setting-git-and-github-windows-xp](http://mrsimonelliott.com/blog/setting-git-and-github-windows-xp)

已下载 Ruby 安装程序 DevKit

[http://rubyinstaller.org/add-ons/devkit/](http://rubyinstaller.org/add-ons/devkit/)

下载的QT

[http://qt-project.org/downloads（mingw](http://qt-project.org/downloads) 目录在我安装 Git 的地方）

将 QT/bin 添加到路径中。

我只使用 Ruby 版本，但我想当这成为问题时，我总是可以使用 Pik。

顺便说一句，我相当确信这是一个 RVM 问题。

# iphone - 如何从 Xcode 中检索意外删除的应用程序目标？

> ID：13057453
> 
> 赞同：4
> 
> 时间：2012-10-24T20:46:12.670
> 
> 标签：iphone, ios, xcode

我正在开发一个大型应用程序，在最终版本中，我不小心删除了我的应用程序目标，现在所有代码都消失了。有谁知道如何找回它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:24:55.297

1 您选择“添加目标方法（在此屏幕底部）：

![在此处输入图像描述](../Images/8dadd074468cbaca15ff1177ff6e0844.png)

2 接下来选择“单一视图应用程序。

3 在“产品名称”的下一个视图中，输入与您的项目名称相同的名称，并在“项目”中选择您的实际项目：

![在此处输入图像描述](../Images/68af8709d09a507afee81a9e9c0b06bf.png)

之后，您将应该构建并运行该项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:28:24.757

如果从备份或存储库中恢复不是一个选项，并且您的包有很多资源，我建议从头开始一个新的 XCode 项目并将源文件和资源导入其中。

1.  创建一个与您的项目具有相同类型和信息的新 Xcode 项目。
2.  删除这个新项目的 ViewController 和 AppDelegate 源文件，将源文件复制到新项目的文件夹中，然后将它们导入 Xcode 项目。
3.  添加您使用过的任何框架。
4.  将资源（图像、声音、plist 等）导入项目。

这可能比重新创建目标并向其添加内容要花更长的时间，但您在此过程中犯错的可能性较小，并且您将确保所有内容都正确添加到目标中。

# bash - rsync 在哪里保存完整和不完整数据传输的日志文件？

> ID：13057454
> 
> 赞同：19
> 
> 时间：2012-10-24T20:46:13.177
> 
> 标签：bash, ssh, rsync, remote-access

我想获取我的数据传输使用`rsync`无法完成（甚至无法启动）的所有目标设备的 IP，因为这些设备未连接到 Internet 或在数据传输时断开连接......

* * *

我的实际问题场景是：

**rsync -t Desktop/sony.pdf home@abcd: ssh: 连接到主机 abcd 端口 22: 没有到主机的路由**

我想要无法完成数据传输的所有此类 IP 的列表...

所有 IP 的列表，例如“abcd”

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-24T20:57:07.983

您可以说出日志文件的位置（根据手册页文档）：

```
--log-file=FILE 覆盖“日志文件”设置

```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-25T19:54:30.867

**当 rsync 在守护进程模式下运行时**，日志信息通常通过 syslog 守护进程发送。

如果您想在通过 ssh 使用 rsync 时记录某些内容，则必须在命令行中输入选项：

```
rsync --rsync-path='/usr/bin/rsync --log-file=$HOME/.rsyncd.log' -t Desktop/sony.pdf home@a.b.c.d: 
```

用于在目标主机中保存日志或

```
rsync --log-file=$HOME/.rsyncd.log -t Desktop/sony.pdf home@a.b.c.d: 
```

用于在源主机中保存日志。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-25T12:43:17.197

在系统日志中搜索 rsync 的证据。例如：

```
sudo grep -ir rsync /var/log

```

就此而言，您可以使用 grep / 虽然这太过分了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-24T23:20:08.747

我在 perl 中完成这项工作（在命令行中）：

```
# perl -ne '
    ($conn{$2}->{"ip"},$conn{$2}->{"started"})=($3,$1) if 
        /^(.{15}).*rsyncd\[(\d+)\]:\sconnect.*\((\d+\.\d+\.\d+\.\d+)\)/;
    $conn{$2}->{"closed"}=$1 if /(.{15}).*rsyncd\[(\d+)\]:\ssent\s.*\stotal/;
    END {
        print "Good:\n";
        map{
            printf "%s %-16s %s\n",
                $conn{$_}->{"started"},$conn{$_}->{"ip"},$conn{$_}->{"closed"} if
                    $conn{$_}->{"closed"};
          } sort { $conn{$a}->{"started"} cmp $conn{$b}->{"started"}
          } keys %conn;
        print "Unterminated:\n";
        map{
            printf "%s %s\n",$conn{$_}->{"started"},$conn{$_}->{"ip"};
          } sort { $conn{$a}->{"started"} cmp $conn{$b}->{"started"}
          } grep { ! defined $conn{$_}->{"closed"}
          } keys %conn;
    }' < /var/log/daemon.log 
```

这可能会产生如下输出：

```
Good:
Apr 28 08:12:01 127.0.0.1        Apr 28 08:15:35
Apr 28 08:27:01 192.168.1.36     Apr 28 08:28:04
Apr 28 08:42:01 127.0.0.1        Apr 28 08:42:13
Apr 28 08:57:01 192.168.1.36     Apr 28 08:57:16
Apr 28 09:12:01 127.0.0.1        Apr 28 09:12:28
Apr 28 09:27:01 192.168.1.36     Apr 28 09:27:13
Apr 28 09:42:01 127.0.0.1        Apr 28 09:42:09
Apr 28 09:57:02 192.168.1.36     Apr 28 09:57:16
Apr 28 10:12:01 127.0.0.1        Apr 28 10:12:32
Apr 28 10:27:01 192.168.1.36     Apr 28 10:27:12
Apr 28 10:42:01 127.0.0.1        Apr 28 10:42:14
Apr 28 10:57:01 192.168.1.36     Apr 28 10:57:13
Apr 28 11:27:01 192.168.1.36     Apr 28 11:28:01
Apr 28 11:42:01 127.0.0.1        Apr 28 11:44:32
Apr 28 11:57:02 192.168.1.36     Apr 28 11:58:43
Apr 28 12:12:01 127.0.0.1        Apr 28 12:12:27
Apr 28 12:27:01 192.168.1.36     Apr 28 12:28:48
Apr 28 12:42:01 127.0.0.1        Apr 28 12:42:13
Apr 28 12:57:01 192.168.1.36     Apr 28 12:57:56
Unterminated:
Apr 28 11:12:01 127.0.0.1 
```

# javascript - 如何在您事先不知道名称的angularjs中设置对象的属性，并且仍然确保绑定有效？

> ID：13057455
> 
> 赞同：0
> 
> 时间：2012-10-24T20:46:17.953
> 
> 标签：javascript, data-binding, angularjs

我的服务器可以将更改发送到我的应用程序的状态。当我的应用收到这样的更改时，会调用以下函数：（注意，在实际应用代码中，此函数不在全局范围内）

```
function(message){
    data = window.JSON.parse(message.data);
    console.log(data);
    for(element in data){
        if(element[0] == "_"){continue;}
        $scope.state[element] = data[element];
    }
} 
```

我还尝试通过克隆状态对象来做到这一点，然后在完成操作后将其附加到范围内。

克隆函数如下所示：

```
var clone = (function(){
    return function (obj) { Clone.prototype=obj; return new Clone() };
    function Clone(){}
}()); 
```

我接收数据的函数现在看起来像这样。

```
function(message){
    data = window.JSON.parse(message.data);
    console.log(data);
    var cloned = new clone($scope.state);
    for(element in data){
        if(element[0] == "_"){continue;}
        cloned[element] = data[element];
    }
    $scope.state = cloned;
} 
```

我的控制器中只有一个元素来测试这个：

```
<div ng-controller='MainController'>
    {{ state | json}}
</di> 
```

它只是没有更新。

是否有其他方法可以添加/更改您事先不知道名称的属性，以便绑定继续工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T01:41:12.540

你在打电话`$scope.$apply()`吗？

如果您的数据是异步返回的，那么 Angular 很可能在您更新范围之前已经完成了 UI 更新。试一试，看看是否有效。如果没有，那么我们可能需要更多信息。

# git - 在 git diff 中同时显示分阶段和工作树？

> ID：13057457
> 
> 赞同：54
> 
> 时间：2012-10-24T20:46:24.267
> 
> 标签：git, diff

如果我运行，`git diff`我会看到我的工作树中的更改，如果我运行`git diff --staged`（或者`--cached`），那么我会看到暂存的更改（w/ `git add`），但是有没有办法`git diff`一次性查看所有内容？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-10-24T20:48:15.443

如果您的意思是工作树和您的 HEAD 提交之间的更改（即同时进行分阶段和非分阶段更改），只需执行以下操作：

```
git diff HEAD 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2015-03-18T07:30:06.450

> 有没有办法使用 git diff 一次性查看所有内容？

有，使用 Git 2.4.0+（2015 年 4 月）。

请参阅[Michael J Gruber](https://github.com/mjg)的[提交 4055500](https://github.com/git/git/commit/40555000935147f56896e75b919b25f1f2d23aca)：[`mjg`](https://github.com/mjg)

> ### `commit`/ ：用（或）`status`显示索引工作树差异`-v -v``-vv`
> 
> `git commit`并`git status`以长格式显示 HEAD 和给定索引之间的差异`-v`。这允许预览要进行的提交。
> 
> 他们还列出了具有未暂存更改但没有差异的跟踪文件。
> 
> 引入 ' `-v -v`' （或），它**除了显示索引差异外，还**显示`-vv`了索引和工作树之间的差异。这允许审查提交中可能缺少的未暂存更改。**`HEAD`**
> 
>  **在 ' `-v -v`' （或`-vv`）的情况下，附加标题行
> 
> ```
> Changes to be committed: 
> ```
> 
> 和
> 
> ```
> Changes not staged for commit: 
> ```
> 
> 插入到差异之前，与状态部分中的差异相同；后者前面加上 50*`-`以使其更加突出。**

 **在 OP 的情况下，一个简单的**`git status -v -v`**(or `git status -vv`) 将显示分阶段*和*非分阶段的差异。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-24T20:47:51.340

[漫反射](http://diffuse.sourceforge.net/)视觉差异工具可以做到这一点：如果部分但不是全部更改已上演，它将显示三个窗格。在发生冲突的情况下，甚至会有四个窗格。

![带有分阶段和非分阶段编辑的漫反射屏幕截图](../Images/af868aa3db49118546df4987b7c3d358.png)

调用它

```
diffuse -m 
```

在你的 Git 工作副本中。

如果你问我，十年来我见过的最好的视觉效果。**

# soap - 从 CF8 升级到 CF10 后 Web 服务不工作

> ID：13057459
> 
> 赞同：0
> 
> 时间：2012-10-24T20:46:27.907
> 
> 标签：soap, coldfusion, wsdl

我有一个发布帖子的 Intranet 应用程序，`localhost/site/maint/dbLibrary.cfc?wsdl`然后该服务将响应结果。但是，由于在向 wsdl firebug 发布帖子时从 CF8 升级到 CF10 显示请求只是挂在那里，没有错误或响应。它只是永远挂出，没有错误。那么我该如何解决呢？管理员中是否有设置或权限之类的？

非常感谢帮助，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T21:29:43.773

好吧，看起来它是 CF10 的一个错误。显然，新的更新 3 将在它回滚时修复它。该版本提到了以下错误修复：

> “当接收到带有 Web 服务的 XML 正文的 POST 请求时，ColdFusion 服务器没有响应。”

# android - 如何将两个数据库表中的数据合并到一个listView中

> ID：13057462
> 
> 赞同：1
> 
> 时间：2012-10-24T20:46:36.150
> 
> 标签：android, listview, join, mergecursor

我对如何将两个单独的数据库查询组合到一个 listView 中感到很困惑。

目前，我的 listView 由以下适配器填充，该适配器在我的数据库中查询损坏的组件表并提供某个位置的损坏组件列表：

```
private class MyListAdapter extends ResourceCursorAdapter { 

    // In your ListActivity class, create a new inner class that extends ResourceCursorAdapter. 
    //This inner class is the custom CursorAdapter we will use to manage how data is bound to a list item:

    public MyListAdapter(Context context, Cursor cursor) { 
        super(context, R.layout.row_location, cursor);
    } 

    @Override
    public void bindView(View view, Context context, Cursor cursor) { 
        TextView text_first_line = (TextView) view.findViewById(R.id.location_row_item_main_text);
        TextView text_second_line = (TextView) view.findViewById(R.id.location_row_item_secondary_text);
        ImageView flagIcon = (ImageView) view.findViewById(R.id.flagIcon);

        String row_text_component = cursor.getString(cursor.getColumnIndex(RMDbAdapter.COMPONENT));
        String row_text_position = ", Position " + cursor.getString(cursor.getColumnIndex(RMDbAdapter.POSITION));
        if(row_text_position.equals(", Position Not Applicable")){
            row_text_position = "";
        }
        String row_text_action = " - " + cursor.getString(cursor.getColumnIndex(RMDbAdapter.ACTION_REQUIRED));

        text_first_line.setText(row_text_component + row_text_position + row_text_action);
        text_second_line.setText("Dexion Speedlock, S Duty, 3000mm");

        String risk = cursor.getString(cursor.getColumnIndex(RMDbAdapter.RISK));
        if (risk.equals("Red Risk")){
            flagIcon.setImageResource(R.drawable.red_flag);
        }
        else if (risk.equals("Green Risk")){
            flagIcon.setImageResource(R.drawable.green_flag);
        }
        else if (risk.equals("No Risk")){
            flagIcon.setImageResource(R.drawable.note);
        }

    }
} 
```

当我在活动开始时调用以下命令时会触发此事件：

```
private void setAdapter(){

    // Get a Cursor for the list items

    Cursor listComponentCursor = rmDbHelper.fetchDamagedComponentsForLocation(locationId);
    componentCursorSize = listComponentCursor.getCount();
    startManagingCursor(listComponentCursor); 
    // set the custom list adapter     
    setListAdapter(new MyListAdapter(this, listComponentCursor));

} 
```

因此，我还想在单独的表（这次是问题表）上创建第二个查询，并将其添加到损坏组件列表下的 listView 中。

从多个表中读取此[Listview？](https://stackoverflow.com/questions/3539684/listview-from-multiple-tables)，我相信我应该使用 Join**或**Merge 游标。但是，根据我的研究，我仍然不知道如何将这两个概念集成到我的代码中。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:01:44.817

尽管您没有显示它，但我将假设您覆盖了`newView`光标适配器的方法。MergeCursor 只会将一个查询的结果堆叠在下一个查询之上。CursorJoiner 几乎会将结果并排放置。听起来你想要一个 MergeCursor。

如果您只想将第二个查询的结果连接到第一个查询，请执行两个查询并创建一个 MergeCursor。如果您需要它们具有不同的布局，或者它们具有不同的列名，则需要覆盖`getItemViewType`适配器中的方法。然后，在您的`newView`方法中，您可以根据类型膨胀不同的视图。`bindView`您需要检查类型并将正确的值应用于正确的视图。

您的代码的一些随机提示：

1）使用 ViewHolder 模式，它更快。

2）这样做总是更好，`"literal string".equals(variable)`而不是`variable.equals("literal string")`因为文字字符串不能抛出 NullPointerException

# android - 通过 Intent 向 Google Map 传递信息

> ID：13057463
> 
> 赞同：1
> 
> 时间：2012-10-24T20:46:41.623
> 
> 标签：android, android-intent, maps

我有一个包含一个editText 字段和一个按钮的应用程序。用户可以在字段中输入地址，当他们按下按钮时，会创建一个调用 Google 地图应用程序的意图。

然后按预期加载，但由于某种原因，未找到提供的地址......

我不知道为什么。

在我的 XML 布局文件中引用 EditText。

```
 address = (EditText)findViewById(R.id.addressBox); 
```

从 EditText 字段中检索输入并启动一个新的 Intent。

```
String location = address.getText().toString();
            location = location.replace(" ", "+");

            Intent i = new Intent(android.content.Intent.ACTION_VIEW, Uri.parse("geo:0,0?q=" + address));
            startActivity(i); 
```

非常感谢任何建议。

当我尝试查找地址时，谷歌地图按预期启动，并显示 Toast 并显示以下错误消息：

**“没有找到结果：android.widget.EditText 40d9fef8”**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T20:50:08.057

看起来您正在将您的编辑文本传递给`new Intent()`. 再看看它，我怀疑你的意思`"geo:0,0?q=" + location`。

# java - 使用 dateformat 验证日期

> ID：13057464
> 
> 赞同：2
> 
> 时间：2012-10-24T20:46:41.613
> 
> 标签：java, date-format

我正在尝试验证实际上是字符串的日期，并尝试以`yyyy/MM/dd`格式打印它。这是代码。

```
String s="2012/12/0390990";
SimpleDateFormat ft = new SimpleDateFormat("yyyy/MM/dd");
System.out.println(ft.format(ft.parse(s))); 
```

输出是`3083/05/30`。我也想要验证。不知道如何进行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T20:47:48.203

默认情况下是宽松的。您需要在解析之前将其设置为[non-lenient](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#setLenient%28boolean%29)。

```
ft.setLenient(false); 
```

这将导致提供的`ParseException`日期和/或月份与年份相比无效。请注意，这并不能验证年份本身，因为基本上任何年份都是有效的。根据具体的功能要求，您可能需要对年份进行额外检查，例如拆分字符串`/`，然后检查第一部分的长度是否为 4。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-24T20:48:50.513

您最好使用 RegExp 来验证输入，
例如，请参阅此答案：
[https ://stackoverflow.com/a/2149692/1448704](https://stackoverflow.com/a/2149692/1448704)

塞巴斯蒂安

# c# - 在 2 个不同的循环中更新多个进度条

> ID：13057468
> 
> 赞同：2
> 
> 时间：2012-10-24T20:47:06.887
> 
> 标签：c#, .net, winforms, backgroundworker

我有一个 Windows 程序正在对数据库进行一些更新。它有 2 个循环，我想展示其进度。第一个循环获取客户列表，第二个循环获取该客户的位置列表：

```
DataTable dtCustomers = GetAllCustomers();

foreach(DataRow customer in dtCustomers.Rows)
{
    //update Customer Progressbar...

    //do some updating here...

    DataTable dtLocations = GetAllLocations(customer);

    foreach(DataRow location in dtLocations.Rows)
    {
        //do some updating here...

        //update Location Progressbar...
    }

    //reset Location Progressbar...
} 
```

所以我想做的是显示每个循环的视觉进度条（pb）。客户 pb 将随着每个处理的客户而增加，位置 pb 也会增加......唯一的区别是位置 pb 将在每个位置之后重置，因为根据位置更新可能需要更长/更短的时间。

我从 1 个后台工作人员开始，并且能够很好地更新客户 pb。我将以下代码放在“开始”按钮中：

```
private void buttonStart_Click(object sender, EventArgs e)
{
    workerCustomers.RunWorkerAsync();
} 
```

在 workerCustomer 的 DoWork() 事件中，我放置了 2 个循环。我知道位置 pb 不会更新，因为它会给出“跨线程引用”错误。那么我该如何去做我想做的事呢？我什至尝试在表格上放置 2 个 bg 工作人员并从另一个调用一个，但再次出现另一个错误，说明第一个工作人员很忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T20:52:25.467

当您报告进度时，您可以传递额外的 userState 对象作为第二个参数（请参阅[ReportProgress](http://msdn.microsoft.com/en-us/library/a3zbdb1t.aspx)方法定义）：

```
workerCustomers.ReportProgress(percentage1, percentage2); 
```

在`ProgressChanged`事件处理程序中，您可以更新两个进度条：

```
void workerCustomers_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    progressBar1.Value = e.ProgressPercentage; // Customers
    progressBar2.Value = (int)e.UserState; // Locations
} 
```

更新：如何在您的情况下使用它

```
DataTable dtCustomers = GetAllCustomers();
int customerIndex = 0;

foreach(DataRow customer in dtCustomers.Rows)
{
    //do some updating here...
    int customerPercentage = ++customerIndex * 100 / dtCustomers.Rows.Count;
    workerCustomers.ReportProgress(customerPercentage, 0);

    int locationIndex = 0;
    DataTable dtLocations = GetAllLocations(customer);

    foreach(DataRow location in dtLocations.Rows)
    {
        //do some updating here...
        int locationPecentage = ++locationIndex * 100 / dtLocations.Rows.Count;
        workerCustomers.ReportProgress(customerPercentage, locationPecentage);
    }

    workerCustomers.ReportProgress(customerPercentage, 0);
} 
```

# javascript - 为什么 {var foo = foo} 不抛出 ReferenceError？

> ID：13057475
> 
> 赞同：3
> 
> 时间：2012-10-24T20:47:29.050
> 
> 标签：javascript, scope

为什么不`var foo = foo`扔一个`ReferenceError`？

注意：`foo = foo`确实抛出一个`ReferenceError`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T20:48:21.483

当你声明

```
var foo = ... 
```

您声明整个范围的变量（如果不是全局的，那就是您的函数），而不仅仅是之后的代码，这与其他语言相反。

所以在赋值的右边部分，`foo`已经声明了，即使它仍然是`undefined`. 没有参考错误。

请注意，javascript 中 var 声明的这个属性可能是错误的来源。因为您很可能拥有（更复杂的）这种代码：

```
if (true) {
    var a = 3; // do you think this is "local" ?
}
var a;
alert(a); // a is 3, did you expect it ? 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T20:51:31.150

据推测，变量声明是在 Javascript 中提升的。这意味着代码

```
function bar() {
    // some other code
    var foo = foo;
} 
```

相当于：

```
function bar() {
    var foo;
    // some other code
    foo = foo;
} 
```

事实上，即使是以下工作：

```
function bar() {
    return foo;
    var foo;
} 
```

（并返回`undefined`。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T20:49:02.933

JavaScript 将 var 声明排序到顶部，因此在赋值时它已经声明（即使未定义）：

```
var foo;
foo = foo; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T20:58:55.407

当您使用 var 关键字时

> var foo = foo

JavaScript 提升创建 foo 并在代码执行之前为其分配未定义的值。所以你可以在这里为它分配任何值 foo 并且 foo 本身是未定义的，所以实际上你再次通过同一个变量将 undefined 分配给 foo

当你在做

> 富=富

您没有之前定义的左侧 foo 来为其分配值。

当你在做

> var foo = 酒吧

您之前没有定义 bar 。

# php - 使用 PHP 将信息更新到 MySQL 数据库

> ID：13057480
> 
> 赞同：0
> 
> 时间：2012-10-24T20:47:51.350
> 
> 标签：php, mysql, database, web

在我的代码中，我试图用表单中可修改文本字段的值更新我的数据库。但是，当查询运行时，它会擦除​​与用户尝试编辑的记录相关的所有字段（将它们变为“”）。谁能明白为什么？

```
<?php
$dbuser = 'test';
$dbpass = 'test';
$host = '127.0.0.1';
$db = 'test';
mysql_connect($host, $dbuser, $dbpass) or die(mysql_error());
mysql_select_db($db) or die(mysql_error());

$result = mysql_query("SELECT * from characters");
$id = $_REQUEST['combo'];
while($row = mysql_fetch_array($result))
{
    if($id == $row['_Key'])
    {
        echo "<form action=\"webpagetests.php\" method=\'post\'>";
        echo "<strong>Player ID:</strong>    " . $row['_Key'] . "</br>";
        echo "<strong>Steam Name:</strong>   " . $row['_SteamName'] . "</br>";
        echo "<strong>Steam ID:</strong>     " . $row['_SteamID'] . "</br></br>";

        echo "Name: </br><input name = \"name\" type=\"text\" size=\"25\" value=\"" . $row['_Name'] . "\"></br></br>";
        echo "Cash: </br><input name = \"cash\" type=\"text\" size=\"25\" value=\"" . $row['_Cash'] . "\"></br></br>";
        echo "Flags: </br><input name = \"flags\" type=\"text\" size=\"25\" value=\"" . $row['_Flags'] . "\"></br></br>";
        echo "Gender:</br> <input name = \"gender\" type=\"text\" size=\"25\" value=\"" . $row['_Gender'] . "\"></br></br>";
        echo "Model:</br> <input name = \"model\" type=\"text\" size=\"50\" value=\"" . $row['_Model'] . "\"></br></br>";
        echo "Faction: </br><input name = \"faction\" type=\"text\" size=\"25\" value=\"" . $row['_Faction'] . "\"></br></br></br>";
        echo "Recognised Names: </br><input name = \"names\" type=\"text\" size=\"50\" value=\"" . $row['_RecognisedNames'] . "\"</br>";
        echo "<input name=\"submit2\" type=\"submit\" value=\"Update\" />";
        echo "</form>";
    }
}
if (isset($_POST['submit2'])) 
{
    //$name = mysql_real_escape_string(htmlspecialchars($_POST['name']));
    $name = "Test";
    $cash = (int)$_POST['cash'];
    $flags = mysql_real_escape_string(htmlspecialchars($_POST['flags']));
    $gender = mysql_real_escape_string(htmlspecialchars($_POST['gender']));
    $model = mysql_real_escape_string(htmlspecialchars($_POST['model']));
    $faction = mysql_real_escape_string(htmlspecialchars($_POST['faction']));
    $names = mysql_real_escape_string(htmlspecialchars($_POST['names']));

    mysql_query("UPDATE  `test`.`characters` SET  `_Name` =  '$name',
    `_Cash` =  '$cash',
    `_Model` =  '$model',
    `_Flags` =  '$flags',
    `_Gender` =  '$gender',
    `_Faction` =  '$faction',
    `_RecognisedNames` =  '$names' 
    WHERE  `characters`.`_Key` ='$id'") or die(mysql_error());
    echo '<META HTTP-EQUIV="Refresh" Content="0; URL=webpagetest.php">'; 
}?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:06:02.490

1) You have no where clause in your select statement, so the whole table is transferred from the DB to your PHP script. Add:

```
$id = mysql_real_escape_string($id);
$result = mysql_query("select * from characters where _Key = '$id'"); 
```

to improve performance and bandwidth usage. Better yet, use `mysqli`, where you can use prepared statements.

2) I don't see where `$id` is set, when the form returns, so this might be a problem too.

# python - Twisted / Amp 网络：响应所有客户，而不仅仅是一个提出请求的客户

> ID：13057483
> 
> 赞同：1
> 
> 时间：2012-10-24T20:47:55.677
> 
> 标签：python, networking, twisted, multiplayer

我正在尝试了解这些新奇的“工厂”风格网络库。Twisted 广受好评，但对我来说绝对是一场噩梦，因为我不熟悉 lambda，因此我真的不知道如何遵循演示代码的操作。

演示客户端：

```
from twisted.internet import reactor, defer
from twisted.internet.protocol import ClientCreator
from twisted.protocols import amp
from ampserver import Sum, Divide

def doMath():
    d1 = ClientCreator(reactor, amp.AMP).connectTCP(
        '127.0.0.1', 1234).addCallback(
            lambda p: p.callRemote(Sum, a=13, b=81)).addCallback(
                lambda result: result['total'])
    def trapZero(result):
        result.trap(ZeroDivisionError)
        print "Divided by zero: returning INF"
        return 1e1000
    d2 = ClientCreator(reactor, amp.AMP).connectTCP(
        '127.0.0.1', 1234).addCallback(
            lambda p: p.callRemote(Divide, numerator=1234,
                                   denominator=0)).addErrback(trapZero)
    def done(result):
        print 'Done with math:', result
    defer.DeferredList([d1, d2]).addCallback(done)

if __name__ == '__main__':
    doMath()
    reactor.run() 
```

演示服务器：

```
from twisted.protocols import amp

class Sum(amp.Command):
    arguments = [('a', amp.Integer()),
                 ('b', amp.Integer())]
    response = [('total', amp.Integer())]

class Divide(amp.Command):
    arguments = [('numerator', amp.Integer()),
                 ('denominator', amp.Integer())]
    response = [('result', amp.Float())]
    errors = {ZeroDivisionError: 'ZERO_DIVISION'}

class Math(amp.AMP):
    def sum(self, a, b):
        total = a + b
        print 'Did a sum: %d + %d = %d' % (a, b, total)
        return {'total': total}
    Sum.responder(sum)

    def divide(self, numerator, denominator):
        result = float(numerator) / denominator
        print 'Divided: %d / %d = %f' % (numerator, denominator, result)
        return {'result': result}
    Divide.responder(divide)

def main():
    from twisted.internet import reactor
    from twisted.internet.protocol import Factory
    pf = Factory()
    pf.protocol = Math
    reactor.listenTCP(1234, pf)
    print 'started'
    reactor.run()

if __name__ == '__main__':
    main() 
```

据我了解，客户端`p.callRemote(Sum, a=13, b=81)`和`p.callRemote(Divide, numerator=1234, denominator=0)`部分调用`Math.sum(13, 81)`and `Math.Divide(1234, 0)`，因为工厂对象`protocol`设置为`Math`类。不知何故，当客户端从服务器接收到返回值时，子函数`Done(result)`被调用，它将内容打印到屏幕上。

这很好，但是我的理解很糟糕，而且每篇文档似乎都已经期望达到这种理解水平。

我真正想做的是将数据从客户端发送到服务器，然后从服务器发送到连接的多个客户端。一旦交换结束，这种方法似乎会忘记客户端，并`reactor.run()`阻塞客户端，阻止它做任何其他工作。

人们可能每天都希望使用此功能。我怎么理解这个？

编辑：我试图让客户调用“签入”功能，但这似乎会让我的服务器淹没在请求中，只是为了响应“没有报告”。此外，它增加了延迟，因为客户端仅在他们请求时才收到新数据，而不是在它实际可用时。工厂 - 反应器布局似乎没有公开我需要存储的客户信息以便任意响应它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:37:55.823

你似乎有三个问题：

1.  `lambda`“在 Python中是什么意思？”

    [Python 的文档涵盖了](http://docs.python.org/reference/expressions.html#lambda)这一点。但是，如果您仍然难以阅读以这种方式编写的代码，则可以使用这`lambda x: y`只是编写的捷径这一事实`def my_function(x): return y`。任何你看到 的地方`lambda`，例如，这个：

    ```
    def foo(bar):
        return boz().addCallback(lambda result: qux(bar, result)) 
    ```

    您始终可以将其拉出`lambda`到它自己的函数中，以便您更容易阅读，如下所示：

    ```
    def foo(bar):
        def callback_for_boz(result):
            return qux(bar, result)
        return boz().addCallback(callback_for_boz) 
    ```

2.  “[我如何在一个连接上进行输入导致另一个连接上的输出？](http://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions#HowdoImakeinputononeconnectionresultinoutputonanother) ”

    [Twisted 的 FAQ 记录了](http://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions#HowdoImakeinputononeconnectionresultinoutputonanother)这一点。

3.  “[如何让 Twisted 与多个客户端对话/连接到多个服务器？](http://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions#HowdoImakeTwistedtalktomultipleclientsconnecttomultipleservers) ”

    这[也是一个扭曲的常见问题解答](http://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions#HowdoImakeTwistedtalktomultipleclientsconnecttomultipleservers)。这里的一般想法是这`reactor.run()`意味着“......然后运行整个程序”。您之前运行任何代码的唯一原因`reactor.run()`是设置初始计时器、侦听套接字或您的第一个连接。您可以在运行反应器之前或在程序中稍后发生的任何回调中调用或任意次数`connectTCP`。`listenTCP`

# php - JQuery Post 不工作 json 数据类型

> ID：13057485
> 
> 赞同：0
> 
> 时间：2012-10-24T20:48:02.347
> 
> 标签：php, javascript, jquery

我在javascript中有这段代码：

```
$.post('AccessDB.php', {add:add, seriesid:seriesid, lang:lang}, function(data) {
            alert(data);

            if (data.returned == "Verified"){

                notification('Success notification');
            } else if (data.returned == "NotVerified") {

            notification('Oh noes! Something went wrong', true);

            }
        }, "json"); 
```

当我按下按钮时我调用它，然后在`AccessDB.php`我这样做以返回值：

```
echo json_encode(array('returned' => 'Error')); 
```

但从 javascript 返回的警报是这样的：

```
[object Object] 
```

并且不是值错误，而是如果我`"json"`从 javascript 中删除警报中的值是：

```
{"returned":"Error"} 
```

但我无法处理这个值，因为我删除了 json 数据类型，任何人都可以告诉我如何修复它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T20:50:57.637

JSON 是一个对象。尝试：

```
alert(data.returned); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T20:51:17.580

an`alert()`所做的是将您传入的变量转换为字符串。

当您这样做时，`myObject.toString()`它会返回`[object Object]`，这是预期的行为。您不会看到带有警报的对象中的内容。

使用`console.dir(data)`或`console.log(data)`获取该信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T20:52:35.003

您的 JSON 响应已转换为 JavaScript 对象。当您提醒一个普通的 JavaScript 对象时，它会显示为 [object Object]。您应该仍然能够访问对象的属性。举个`alert(data.returned)`例子。

# python - PyDev 控制台未打印所有级别的日志记录

> ID：13057492
> 
> 赞同：4
> 
> 时间：2012-10-24T20:48:16.460
> 
> 标签：python, eclipse, logging, pydev

我对python有平均经验，顺便说一句，我刚刚在它上面安装了eclipse和pydev。奇怪的是，日志模块的行为看起来很奇怪。

```
import datetime
import logging

print datetime.date.today()
print logging
logging.info("test")
print logging.info("test2")

--------
OUTPUT::
--------
2012-10-25
<module 'logging' from '/usr/lib/python2.7/logging/__init__.pyc'>
None 
```

任何线索为什么 logging.info 不起作用？

顺便说一句，不确定这是否相关，但在 pydev 安装后导入日志本身不起作用。然后我检查了python解释器设置和日志模块在强制内置列表中没有（Windows->preference->Pydev->Interpreter(python)->Forced Builtins）。所以我手动添加了它以使导入日志记录工作。在此先感谢您的任何指点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T21:07:03.010

Because the default loglevel is `WARNING` and `logging.info()` logs at level lower than that. See the explanation [here](http://docs.python.org/howto/logging.html#a-simple-example) and the [docs](http://docs.python.org/library/logging.html#logging.Logger.setLevel).

To do what you want you could try this:

```
logger = logging.getLogger('name_of_your_logger')
logger.setLevel(logging.INFO)
logger.info("Should get logged") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:27:24.107

如果想写入标准输出，试试这个：

```
import sys
import logging

logger = logging.getLogger()
handler = logging.StreamHandler(sys.stdout)
handler.setLevel(logging.DEBUG)
logger.addHandler(handler)
logger.setLevel(logging.DEBUG)
logger.info('teste') 
```

输出：

> 睾丸

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T21:11:11.097

`setLevel`您可以在第一个日志记录语句之前更改默认级别。

```
logging.getLogger().setLevel(logging.DEBUG) 
```

# python - 无法在 Python 中导入类

> ID：13057496
> 
> 赞同：0
> 
> 时间：2012-10-24T20:48:27.807
> 
> 标签：python, module

我有以下项目框架。

```
ex47 
    bin/
    docs/
    ex47/
        __init__.py
    tests/
        __init__.py
        game_tests.py
    game.py
    setup.py 
```

在 Aptana 工作室工作。在 game_tests.py 我有

```
from nose.tools import *
from ex47.game import Room 
```

但是 Aptana 对我大喊大叫，因为我找不到 Room，我在 'game.py' 中将它定义为一个类。当我`nosetests`在命令行上运行时出现错误：导入错误（没有名为游戏的模块）。似乎有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T20:57:06.923

我看到两个问题：

*   最上面的 ex47 不是一个有效的包（没有`__init__.py`）
*   最上面的 ex47 不在你的`PYTHONPATH`

第一个很明显。如果您希望 game.py 可以使用`ex47.game`then导入，则`ex47`必须是有效的包。所以很可能你想把它放在`ex47`一个有效的包里面？

当涉及到第二个问题时，python 将`ex47`在您`PYTHONPATH`的当前目录（您发出命令时所在的目录）中查找。可能这些都不是，因此`ex47`无法找到。

考虑到上述情况，如果您具有以下目录结构：

```
ex47 
    bin/
    docs/
    ex47/
        __init__.py
        game.py
    tests/
        __init__.py
        game_tests.py
    setup.py 
```

并尝试运行这样的测试：

```
nosetests tests 
```

在最顶层的目录中它应该可以工作（请注意，最顶层的目录中`ex47`没有）。`__init__.py``ex47`

# android - 如何让 Eclipse 识别 Android 项目中的加密算法

> ID：13057497
> 
> 赞同：3
> 
> 时间：2012-10-24T20:48:27.850
> 
> 标签：android, eclipse, encryption

我正在 Eclipse 中开发一个使用加密的 Android 项目。该代码包含以下行：

Cipher en = Cipher.getInstance("AES/ECB/NOPADDING");

Eclipse 抱怨以下代码行：“未处理的异常类型 NoSuchAlgorithmException”和“未处理的异常类型 NoSuchPaddingException”。

我用包含那行代码的 Eclipse 外部的文本编辑器编写了一个简单的加密/解密 java 程序。该程序正确编译并从命令行运行，没有抛出任何异常，并且正确加密和解​​密。

这告诉我在机器上正确安装了一个提供程序，支持该算法和填充，但由于某种原因 Eclipse 没有看到或找不到一些必要的文件。我试过浏览各种目录并多次更改 Eclipse 的搜索路径，但都没有成功。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T20:55:08.530

如果您查看[Cipher.getInstance 的文档](http://developer.android.com/reference/javax/crypto/Cipher.html#getInstance%28java.lang.String,%20java.lang.String%29)，您会注意到它会引发您提到的异常。用 try/catch 块包围您的引用（如果您将鼠标悬停在突出显示的错误上，eclipse 应该提供此作为解决方案）。

例子：

```
try {
    Cipher en = Cipher.getInstance("AES/ECB/NOPADDING");
    //use the cipher
    //...
} catch (NoSuchAlgorithmException e) {
    //handle exception
    // ex: e.printStackTrace(); System.exit(1);
} catch (NoSuchPaddingException e) {
    //handle exception
} finally {
    //optional, use this block if necessary
} 
```

Java 要求您处理已检查的异常，因此您应该确保在代码中正确使用 try/catch 块。

[异常基础](http://docs.oracle.com/javase/tutorial/essential/exceptions/)

# java - 请帮我解决我的 Ant + Ivy + Java 构建/依赖问题

> ID：13057500
> 
> 赞同：1
> 
> 时间：2012-10-24T20:48:40.547
> 
> 标签：java, eclipse, ant, ivy, build-dependencies

我可以让 Eclipse 导出一个可以正常工作的独立 JAR 文件。但是当我尝试将我的 build.xml 文件与 Ant 一起使用时，我得到了大约 100 个错误，因为无法解析一堆引用。

这是我的 build.xml

```
 <!-- Deletes the existing build, docs and dist directory-->
  <target name="clean">
    <delete dir="${build.dir}" />
    <delete dir="${docs.dir}" />
    <delete dir="${dist.dir}" />
  </target>

  <!-- Creates the  build, docs and dist directory-->
  <target name="makedir">
    <mkdir dir="${build.dir}" />
    <mkdir dir="${docs.dir}" />
    <mkdir dir="${dist.dir}" />
  </target>

      <!-- ================================= 
            target: resolve              
           ================================= -->
      <target name="resolve" description="--> retrieve dependencies with ivy">
          <ivy:retrieve />
      </target>

  <!-- Compiles the java code (including the usage of library for JUnit -->
  <target name="compile" depends="resolve,clean, makedir">
    <javac destdir="${build.dir}" includeantruntime="false">
        <src path="${src.dir}"/>
        <src path="${lib.dir}"/>
    </javac>

  </target>

  <!-- Creates Javadoc -->
  <target name="docs" depends="compile">
    <javadoc packagenames="src" sourcepath="${src.dir}" destdir="${docs.dir}">
      <!-- Define which files / directory should get included, we include all -->
       <fileset dir="${src.dir}">
                <include name="**" />
           </fileset>
    </javadoc>
  </target>

  <!--Creates the deployable jar file  -->
  <target name="jar" depends="compile">
    <jar destfile="${dist.dir}\hcm.jar" basedir="${build.dir}">
      <manifest>
        <attribute name="Main-Class" value="org.heromanager.MainWindow" />
      </manifest>
    </jar>
  </target>

  <target name="main" depends="compile, jar, docs">
    <description>Main target</description>
  </target>

</project> 
```

这是 ivy.xml 文件

```
<ivy-module version="2.0">
    <info organisation="org.herocombatmanager" module="mainwindow"/>
    <dependencies>
        <dependency org="org.apache.commons" name="commons-lang3" rev="3.0"/>
        <dependency org="com.jgoodies" name="looks" rev="2.2.2"/>
        <dependency org="com.jgoodies" name="forms" rev="1.2.1"/>
    </dependencies>
</ivy-module> 
```

这里有一些错误:-)

```
[javac] H:\Development\Workspace\HeroCombatManager\src\org\herocombatmanager\XMLParser.java:3: package org.apache.commons.lang3 does not exist
[javac] import org.apache.commons.lang3.StringUtils;
[javac]                                ^
[javac] H:\Development\Workspace\HeroCombatManager\src\org\herocombatmanager\AttackAdvantagesPanel.java:10: package com.jgoodies.forms.factories does not exist
[javac] import com.jgoodies.forms.factories.FormFactory;
[javac]                                    ^
[javac] H:\Development\Workspace\HeroCombatManager\src\org\herocombatmanager\AttackAdvantagesPanel.java:11: package com.jgoodies.forms.layout does not exist
[javac] import com.jgoodies.forms.layout.*;
[javac] ^
...
[javac] H:\Development\Workspace\HeroCombatManager\src\org\herocombatmanager\AttackAdvantagesPanel.java:40: cannot find symbol
[javac] symbol  : class FormLayout
[javac] location: class org.herocombatmanager.AttackAdvantagesPanel
[javac]         this.setLayout(new FormLayout(new ColumnSpec[] {
[javac]                            ^
[javac] H:\Development\Workspace\HeroCombatManager\src\org\herocombatmanager\AttackAdvantagesPanel.java:40: cannot find symbol
[javac] symbol  : class ColumnSpec
[javac] location: class org.herocombatmanager.AttackAdvantagesPanel
[javac]         this.setLayout(new FormLayout(new ColumnSpec[] {
[javac]                                           ^ 
```

谢谢大家..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T21:50:31.253

正如@oers 所指出的，您不能将“lib”目录中的 jar 文件添加为源文件，[javac](http://ant.apache.org/manual/Tasks/javac.html)任务不能这样工作。

您需要将 ivy 解析的 jar 添加到 ANT 类路径中。最简单的方法是使用 ivy [cachepath](http://ant.apache.org/ivy/history/latest-milestone/use/cachepath.html)任务，如下所示：

```
 <target name="resolve" description="--> retrieve dependencies with ivy">
     <ivy:resolve/>
     <ivy:cachepath pathid="compile.path"/>
  </target>

  <target name="compile" depends="resolve,clean, makedir">
    <javac destdir="${build.dir}" includeantruntime="false" classpathref="compile.path">
        <src path="${src.dir}"/>
    </javac>
  </target> 
```

# asp.net - 限制未登录用户点击链接

> ID：13057501
> 
> 赞同：3
> 
> 时间：2012-10-24T20:48:42.873
> 
> 标签：asp.net, webforms

我们在主页上有一个链接，出于安全原因，需要阻止用户在 Y 分钟内点击 X 次链接。这是一个服务器端链接按钮，如果它们超过阈值，我可以返回一条信息性消息。

但是，我不确定如何识别用户。我应该使用客户端的 IP 地址吗？我可以为未登录的用户使用会话吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:05:13.740

I would recommend against using an IP address to identify a user. See: [Is it reliable to use the IP address to identify a user on your website?](https://stackoverflow.com/questions/6832724/is-it-reliable-to-use-the-ip-address-to-identify-a-user-on-your-website)

Using a cookie is often the best way to track users. But obviously if this is a security issue then that can be circumvented.

If you are dealing with a potential Denial-Of-Service attack, then I think the only secure option is to require the user to login before allowing him/her to click the link. If this is not a major security issue (it's OK for bad actors to circumvent), then just require the use of cookies for your site and track clicks that way.

* * *

**EDIT**
Based on your comment, I think you need to implement a secure and meaningful method for the user to login. There is no universal way to successfully and reliably identify a single user (however you may define that). You will need to have the user login and accept cookies (so you can track their session).

This is like trying to prevent kids from ringing your doorbell more than once. Trying to determine who they are from the murky blackness of the web (IP address, etc) is like trying to identify the ringer by having them shout their name at you through the door. You will have to have them present some more meaningful and concrete form of identification which can be attached to them and tracked if you want to have any hope of making that dang doorbell stop.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:04:11.000

您可以使用 Session 存储总点击次数。

但是，如果用户是恶意的/聪明的 - 他可以通过拒绝接受 cookie 或在没有 sessionid 的情况下加载页面（在无 cookie 会话处理的情况下）轻松地“丢失”会话。

使用 IP 地址可能有效，但要意识到使用同一网络的人可能具有相同的 IP 地址，因此您可能会不小心撞到几个人。同样，如果您试图阻止 DDOS - 这不会有任何区别，因为他们有一个 IP 列表可以使用。

# python - 在python中查找坐标

> ID：13057507
> 
> 赞同：0
> 
> 时间：2012-10-24T20:49:15.150
> 
> 标签：python, map, coordinates

所以我有这个任务，我得到了一张“地图”

```
island = \
['     /---------\       ',
 '     |     x    \      ',
 '     /           \--\  ',
 '    /   x            | ',
 '    |         x      | ',
 '     \               \ ',
 '      \  x  /\/\     / ',
 '       \---/    \   |  ',
 '                /--/   '] 
```

编写一个程序，计算岛上宝物的数量（x 表示地点）并创建一个坐标列表，例如 [(1,11), ...] ((1,11) 是顶部的实际位置示例中的宝物），然后打印出一份报告，格式为：有 3 个宝物。(1,11) 处有宝藏。在...处有一个宝藏。提示：从第 i 行第 j 列中的符号的（非常短的）表达式开始。

编写一个计算海岸线长度的程序。假设 an`'-'`和 a`'|'`是`1 mile`，并且 a `'\'`,`'/'`是`1.4 miles`。（这只是一个非常粗略的估计，原因有很多，其中一些是数学的）。

我什至不知道从哪里开始......有人可以帮助我或至少指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T20:51:47.853

您要做的第一件事是遍历数组

```
for column, line in enumerate(island):
    print column, line 
```

那给你

```
0      /---------\       
1      |     x    \      
2      /           \--\  
3     /   x            | 
4     |         x      | 
5      \               \ 
6       \  x  /\/\     / 
7        \---/    \   |  
8                 /--/ 
```

好的，那么在每一行上水平迭代怎么样？完全相同的：

```
for column, line in enumerate(island):
    for row, cell in enumerate(line):
        print "entry at", row, column, "is", cell 
```

^(警告：给出长输出！)

这应该足以让你开始

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T21:36:51.860

由于人们发布了完整的解决方案，这里有一个 Pythonic 但不高级的解决方案。

```
segment_lengths = {'\\':1.4,'/':1.4,'-':1,'|':1}
coast_len = 0
treasure_coords = []
for y, line in enumerate(island):
    for x, c in enumerate(line):
        coast_len += segment_lengths.get(c, 0)
        if c == 'x':
            treasure_coords.append((y, x))
print len(treasure_coords), 'treasures found at', treasure_coords
print 'island coast length is', coast_len 
```

印刷：

```
4 treasures found at [(1, 11), (3, 8), (4, 14), (6, 9)]
island coast length is 49.0 
```

**编辑**：JF Sebastian[提供](http://codepad.org/bdxpmyFQ)了一个基于 if-elif 的解决方案：

```
coast_length = 0
treasure_coords = []
for y, row in enumerate(island):
    for x, c in enumerate(row):
        if c in r'\/':
            coast_length += 1.4
        elif c in '-|':
            coast_length += 1
        elif c == 'x':
            treasure_coords.append((y, x))

print("There are %d treasures." % (len(treasure_coords),))
for y, x in treasure_coords:
    print("There is a treasure at (%2d, %2d)." % (y, x))
print("The length of the coastline is %.1f." % (coast_length,)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T21:46:36.197

为了发布（半pythonic）解决方案：

```
# reads as it means - coords where the cell is "x"
treasure_coords = [
    (x, y) for y, row in enumerate(island)
           for x, c in enumerate(row)
           if c == 'x'
]

# slightly more cryptic
coast_length = sum(
    1   if c in '-|'  else
    1.4 if c in '/\\' else
    0
    for c in ''.join(island)
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T21:07:09.667

To get the length of the coastline, you just need to count the instances of each coast character.

```
>>> from itertools import groupby
>>> dict([(k, len(list(g))) for k, g in groupby(sorted(''.join(island)))])
{' ': 162, '-': 16, '/': 9, '\\': 11, 'x': 4, '|': 5} 
```

Then you can add them up:

```
>>> char_counts = dict([(k, len(list(g))) for k, g in groupby(sorted(''.join(island)))])
>>> char_counts['-'] + char_counts['|'] + 1.4 * (char_counts['/'] + char_counts['\\'])
49.0 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T20:54:48.900

二维网格很容易用某种数组表示。创建一个数组，以您了解如何查找该数组中的坐标 x,y 的方式存储所有网格。

通过遍历数组的索引来检查所有宝藏。

海岸线只是一个周长测量值，但它的表示要简单得多，你找到的每个字符都相当于某个数字。再次运行一个循环，寻找这些角色，当你遇到它们时，增加一些海岸线的运行总和。

*您可以在一个循环中或以其他简单的方式完成所有这些操作……最好的方法是将其分解为多个部分，以便您了解如何执行此操作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-24T21:02:49.733

非常简单的方法就是遍历每个字符（记录当前的 col/row_ 并检查它是否为 'x' 或海岸符号之一。就像这样：

```
length = 0.0
x = 0
y = 0
for line in island:
    x += 1
    y = 0
    for char in line:
        y += 1
        if char == 'x': print 'There is a treasure at (%d,%d)' % (x, y)
        elif char in ('-', '|'):
            length += 1
        elif char in ('\\', '/'):
            length += 1.4
print 'Coast length is', length 
```

当然，它不会检查海中的宝藏、海岸的完整性等。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-24T21:55:23.963

海岸线部分长度的 Pythonic 解决方案：

```
In [144]: strs
Out[144]: 
['     /---------\\       ',
 '     |     x    \\      ',
 '     /           \\--\\  ',
 '    /   x            | ',
 '    |         x      | ',
 '     \\               \\ ',
 '      \\  x  /\\/\\     / ',
 '       \\---/    \\   |  ',
 '                /--/   ']

In [145]: dic={'\\':1.4,'/':1.4,'-':1,'|':1}

In [146]: sum(dic.get(y,0) for x in strs for y in x)
Out[146]: 48.999999999999979 
```

或者

```
In [149]: sum(map(lambda x:dic.get(x,0),chain(*strs)))
Out[149]: 48.999999999999979 
```

或（如埃里克所建议）：

```
In [197]: sum(dic.get(x,0) for x in chain(*strs))
Out[197]: 48.999999999999979 
```

对于坐标：

```
In [185]: [(i,m.start()) for i,x in enumerate(strs) for m in re.finditer('x',x)]
Out[185]: [(1, 11), (3, 8), (4, 14), (6, 9)] 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-31T18:55:02.130

我是python的初学者，这个问题很有趣，我对这个问题的解决方案如下：感谢@Eric为开始提供了一个想法

```
island = \
['     /---------\       ',
 '     |     x    \      ',
 '     /           \--\  ',
 '    /   x            | ',
 '    |         x      | ',
 '     \               \ ',
 '      \  x  /\/\     / ',
 '       \---/    \   |  ',
 '                /--/   ']
Distance={
    "-":1.0,
    "|":1,
    "\\":1.4,
    "/":1.4
}
Treasure_Location = []
Miles = []
for row, line in enumerate(island):
    #print(row, line)

    for column, cell in enumerate(line):
        if cell== "x":
            Treasure_Location.append((row, column))

        if cell in Distance:
            z=Distance.get(cell)
            Miles.append(z)

Total_miles= sum(Miles)

print ("Co-ordinates of the Treasure in the Island are:\n")
print("\nTreasure 1: " + str(Treasure_Location[0]))
print("\nTreasure 2: " + str(Treasure_Location[1]))
print("\nTreasure 3: " + str(Treasure_Location[2]))
print("\nTreasure 4: " + str(Treasure_Location[3]))
print("\nThe length of the Coastal line is:"+str(Total_miles)) 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-10-24T21:03:56.047

由于每一行都是列表中的一个值，因此您可以使用简单的“in”检查来查看是否有宝藏。

```
 for line in island:
     if 'x' in island[line]:
         print '%d,%d' %line,island[line].index('x') 
```

获取电源线的简单方法。

# objective-c - NSURLConnection 队列

> ID：13057509
> 
> 赞同：0
> 
> 时间：2012-10-24T20:49:23.213
> 
> 标签：objective-c, ios

我正在使用 NSURLConnection 发送与 Web 服务的一项操作相关的数据。现在用户将能够离线工作，我将需要实现一个同步按钮，该按钮将发送与 n 个操作相关的数据，我不确定如何始终如一地处理 NSURLConnection 队列。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:54:39.010

我已经处理了离线接受用户提交并使用 NSUserdefaults 设置队列。如果用户在线，该条目将访问 Web 服务以获取单一类型的提交和数据库条目。

如果离线，我将用户的数据对象存储到 NSUserDefaults 中并设置一个标志，表明我有需要上传的内容。

当可达性发生变化时，如果我有要上传的数据，我会将内容发送到一个稍微不同的服务，我已经设置了该服务来接收批处理数据。唯一的区别是我设置了接受序列化对象组的批处理服务，然后在服务器端反序列化并执行许多数据库提交。

编辑：我创建了一个当前未连接到任何网络服务的示例项目，但是我正在使用 tonymillion 的[可达性](https://github.com/tonymillion/Reachability)类来测试在线连接，并且正在设置一个队列，以确定在没有连接时是否按下按钮。该项目将时间戳记录到控制台（如果存在有效连接）。如果不存在连接，我会将时间戳存储到数组中，当连接返回时，我会遍历时间戳并将存储的时间戳记录在数组中。
[https://github.com/propstm/webserviceQueueSample](https://github.com/propstm/webserviceQueueSample)

# perl - 带有哈希键和值的正则表达式

> ID：13057511
> 
> 赞同：0
> 
> 时间：2012-10-24T20:49:37.593
> 
> 标签：perl

我正在尝试检查某些术语是否出现在哈希键中，如果我用哈希值标记它们。我的代码识别出完全匹配但对于略有不同的术语失败。同样对于完全匹配，代码用所有值而不是相关值标记匹配的术语。

```
%Drugs = ('tamoxifen' => tablet,
        'docotaxel' => capsule,
        '5-hydroxycin' => IDK,);

$sentence="tamoxifen 4-hydroxytamoxifen tamoxifen-incoded pre-docotaxel Drugs";
@sentence=split/ /,$sentence;
@array=();
foreach $word(@sentence)
{
    chomp $word;
    for $keys(keys %Drugs)
    {
        if($Drugs{$word})
        {
            $term="<$Drugs{$keys}>$word<$Drugs{$keys}>";
            push(@array,$term);
        }
        elsif($word=~/.*$Drugs{$keys}$/i)
        {
            $term="<$Drugs{$keys}>$word<$Drugs{$keys}>";
            push(@array,$term);
        }
    }
    foreach $Bio(@array)
    {
        print "$Bio\n";
    } 
```

我想要输出句子：

```
<tablet>tamoxifen</tablet> <tablet>4-hydroxytamoxifen</tablet> <tablet>tamoxifen-incoded<tablet> <capsule>pre-docotaxel<capsule> Drugs.(Here Drugs didn't match and hence it is left untagged) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:01:29.930

您正在检查是否完全匹配，但根据您的预期，您必须针对 $key 正则表达式您的 $word

试试这个->

```
%Drugs = ('tamoxifen' => tablet,
        'docotaxel' => capsule,
        '5-hydroxycin' => IDK,);

$sentence="tamoxifen 4-hydroxytamoxifen tamoxifen-incoded pre-docotaxel Drugs";
@sentence=split/ /,$sentence;
@array=();
foreach $word(@sentence)
{
    chomp $word;
    for $keys(keys %Drugs)
    {
        if($word=~/.*$keys$/i)#Changed this
        {
            $term="<$Drugs{$keys}>$word<$Drugs{$keys}>";
            push(@array,$term);
        }
        elsif($word=~/.*$Drugs{$keys}$/i)
        {
            $term="<$Drugs{$keys}>$word<$Drugs{$keys}>";
            push(@array,$term);
        }
    }
}
foreach $Bio(@array)
  {
     print "$Bio\n";
  } 
```

**更新**

* * *

根据新要求

```
%Drugs = ('tamoxifen' => tablet,
        'docotaxel' => capsule,
        '5-hydroxycin' => IDK,);

$sentence="tamoxifen 4-hydroxytamoxifen tamoxifen-incoded pre-docotaxel Drugs";
@sentence=split/ /,$sentence;
@array=();
foreach $word(@sentence)
{
    chomp $word;
    my $flag= 0; #using a flag, I am sure there are PLENTY of ways better than this :)
    for $keys(keys %Drugs)
    {

        if($word=~/.*$keys$/i)#Changed this
        {
            $term="<$Drugs{$keys}>$word<$Drugs{$keys}>";
            push(@array,$term);
            $flag++;
        }
        elsif($word=~/.*$Drugs{$keys}$/i)
        {
            $term="<$Drugs{$keys}>$word<$Drugs{$keys}>";
            push(@array,$term);
            $flag++;
        }

    }
    push (@array,$word) if $flag==0;
}
foreach $Bio(@array)
  {
     print "$Bio\n";
  } 
```

# .net - VB.NET 应用程序在 ntdll.dll 中给出内存异常 0xc0000005

> ID：13057512
> 
> 赞同：2
> 
> 时间：2012-10-24T20:49:41.780
> 
> 标签：.net, vb.net, vb.net-2010

我正在处理的 VB.NET 应用程序中的内存访问异常存在一些问题。我希望在这里获得一些见解，因为我所做的任何研究都没有帮助我找到问题所在。

**背景：**

我正在将许多应用程序从 VB6 转换为 .NET 4.0。应客户的要求，我正在进行直接转换，并且仅在必要时进行重构，以避免在转换时将其他问题注入代码中。大多数应用程序都在任何 CPU 模式下编译，但由于依赖 32 位 PLC 软件或较旧的硬件驱动程序，一些应用程序必须编译为 x86。我的开发机器是 Windows 7 64 位。

**问题：**

成功转换两个应用程序后，第三个应用程序在代码中的随机位置崩溃。未捕获异常，我必须查看查看事件日志，我在 ntdll.dll 上看到异常代码：0xc0000005，我认为这是内存访问异常。由于应用程序并不总是在同一个地方崩溃，因此很难追踪。我注意到在调用 ADODB 期间会发生很多错误（并不总是在同一个地方或在同一个调用中），但它在调用 form.ShowDialog() 时也会崩溃。

调用 ShowDialog 的表单使用 ADODB 将一些日志信息写入数据库。虽然我无法确认，但我猜测 form.ShowDialog() 中的异常是在这些 ADODB 调用之一期间发生的。ADODB 调用的崩溃发生在已在已转换的其他两个应用程序中成功使用的程序集中，并且它不会始终在同一个地方崩溃。

在我对此的研究中，我发现糟糕的互操作会导致这个问题。想知道 ADODB COM 调用是否在某种程度上导致了这个应用程序中的问题，即使这些调用在其他应用程序中都很好。

我观察到的一些地方显然将这个异常抛出到事件日志中：

*   新建 ADODB.recordset
*   在 command.append 中创建新参数
*   connection.open 调用

有人知道我如何缩小范围以可能将问题追溯到其根本原因吗？感谢您提供的任何帮助或见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:59:05.470

啊... PLC 让我回来了。如果制造商没有更新的驱动程序集，您可能正在打一场艰苦的战斗。可能发生的情况是较新的操作系统更快或具有更多内核，或者两者的某种组合导致驱动程序代码中的“竞争”条件。在经常使用线程的通信中尤其如此。由于驱动程序代码可能是用 C 或 C++（非托管）编写的，因此您可能无法控制这些条件。您可以尝试弄乱应用程序正在运行的线程模型。如果这样可以提高稳定性，那就去吧。

[Visual Basic 6 中的单元模型线程](http://msdn.microsoft.com/en-us/library/aa261361%28v=vs.60%29.aspx)

[DotNet MTA 线程属性](http://msdn.microsoft.com/en-us/library/system.mtathreadattribute.aspx)

[DotNet STA 线程属性](http://msdn.microsoft.com/en-us/library/system.stathreadattribute.aspx)

最坏的情况是，您可以生成一个使用驱动程序的单独进程，并使用各种“进程间通信”技术从您的主应用程序与其通信。如果它崩溃了，你会启动另一个，但你的主应用程序仍然会继续运行。您甚至可以在绝对最坏的情况下将外部进程编写为 VB6 应用程序。

祝你好运。

# screen - 缩放精灵速度/坐标

> ID：13057513
> 
> 赞同：2
> 
> 时间：2012-10-24T20:49:48.587
> 
> 标签：screen, sprite, scaling, screen-resolution, dpi

我正在尝试查找有关如何缩放精灵速度/运动/坐标的信息。

我的意思是如何让精灵以相对于屏幕尺寸/ DPI 相同的速度移动，以便从屏幕的一侧到另一侧需要相同的实时时间？

我可以在各种论坛上找到的所有与精灵缩放有关的帖子都与精灵的大小有关，但这部分我到目前为止还可以，只是当我移动精灵时，它有点根据设备的 dpi / 分辨率以不同的速度出现。我希望我说得通。

这是我到目前为止的代码，而不是使用明确的数量，如 1，我使用的是如下内容：

```
 platSpeedFloat= (1 * (dpi/160)); //Use '1' so on an MDPI screen, the sprite will move by 1 physical pixel 
```

然后基本上我正在做的事情是这样的：（之前声明的所有变量）

```
 platSpeedSave+=platSpeedFloat; //Add the platSpeedFloat value to the current platSpeedSave value

    platSpeed=(int) platSpeedSave; //Cast to int so it can be checked in the following statement

    if (platSpeed==platSpeedSave) //Check the casted int value to float value stored previoiusly

    {floorY=floorY-platSpeed; //If they match then change the Y value

    platSpeedSave=0;} //Reset 
```

如果有人可以提供帮助将不胜感激 - 希望我说得通。以上似乎不起作用，精灵在较低 DPI 屏幕上移动得“更快”。

谢谢

# javascript - django ajax Post 未正确发布并返回空消息

> ID：13057519
> 
> 赞同：0
> 
> 时间：2012-10-24T20:50:11.937
> 
> 标签：javascript, ajax, django, post, httpresponse

使用 django 1.4，我正在尝试发布，它似乎没有正确发布，i `request.GET.get('type',''`）但它打印空字符串并且发布响应（未定义）为空，但 GET 工作正常。

我的 Django 视图：

```
@csrf_protect
def edit_city(request,username):
    conditions = dict()

    #if request.is_ajax():
    if request.method == 'GET':
        conditions = request.method
#based on http://stackoverflow.com/a/3634778/977622     
            for filter_key, form_key in (('type',  'type'), ('city', 'city'), ('pois', 'pois'), ('poisdelete', 'poisdelete'), ('kmz', 'kmz'), ('kmzdelete', 'kmzdelete'), ('limits', 'limits'), ('limitsdelete', 'limitsdelete'), ('area_name', 'area_name'), ('action', 'action')):
                value = request.GET.get(form_key, None)
                if value:
                    conditions[filter_key] = value
                    print filter_key , conditions[filter_key]

    elif request.method == 'POST':
        print "TIPO" , request.GET.get('type','')       
        #based on http://stackoverflow.com/a/3634778/977622     
        for filter_key, form_key in (('type',  'type'), ('city', 'city'), ('pois', 'pois'), ('poisdelete', 'poisdelete'), ('kmz', 'kmz'), ('kmzdelete', 'kmzdelete'), ('limits', 'limits'), ('limitsdelete', 'limitsdelete'), ('area_name', 'area_name'), ('action', 'action')):
            value = request.GET.get(form_key, None)
            if value:
                conditions[filter_key] = value
                print filter_key , conditions[filter_key]

        #Test.objects.filter(**conditions)
    city_json = json.dumps(conditions)

    return HttpResponse(city_json, mimetype='application/json') 
```

这是我的 javascript 代码：

```
function getCookie(name) {
    var cookieValue = null;
    if (document.cookie && document.cookie != '') {
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookie = jQuery.trim(cookies[i]);
            // Does this cookie string begin with the name we want?
            if (cookie.substring(0, name.length + 1) == (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
}
var csrftoken = getCookie('csrftoken');

function csrfSafeMethod(method) {
    // these HTTP methods do not require CSRF protection
    return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
}
function sameOrigin(url) {
    // test that a given url is a same-origin URL
    // url could be relative or scheme relative or absolute
    var host = document.location.host; // host + port
    var protocol = document.location.protocol;
    var sr_origin = '//' + host;
    var origin = protocol + sr_origin;
    // Allow absolute or scheme relative URLs to same origin
    return (url == origin || url.slice(0, origin.length + 1) == origin + '/') ||
        (url == sr_origin || url.slice(0, sr_origin.length + 1) == sr_origin + '/') ||
        // or any other URL that isn't scheme relative or absolute i.e relative.
        !(/^(\/\/|http:|https:).*/.test(url));
}
$.ajaxSetup({
beforeSend: function(xhr, settings) {
    if (!(/^http:.*/.test(settings.url) || /^https:.*/.test(settings.url))) {
        // Only send the token to relative URLs i.e. locally.
        xhr.setRequestHeader("X-CSRFToken",
                             $('input[name="csrfmiddlewaretoken"]').val());
    }
}
});

$.post(url,{ type : type , city: cityStr, pois: poisStr, poisdelete: poisDeleteStr, kmz: kmzStr,kmzdelete : kmzDeleteStr,limits : limitsStr, area_nameStr : area_nameStr , limitsdelete : limitsDeleteStr},function(data,status){
                    alert("Data: " + data + "\nStatus: " + status);
                    console.log("newdata" + data.kmz)
                }); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:20:27.720

明白了，问题是我必须把这个改成`request.GET.get('type','')`这个`request.POST.get('type','')`

# algorithm - 需要算法来绘制重叠的矩形

> ID：13057526
> 
> 赞同：2
> 
> 时间：2012-10-24T20:50:41.670
> 
> 标签：algorithm, rectangles

我需要帮助来有效地绘制/剔除一系列不透明的矩形，换句话说，这是桌子上的一堆索引卡。具体如下：

*   没有旋转，所以一切都是简单的整数坐标，轴对齐
*   卡片完全不透明
*   卡片可以有任何整数 X,Y 位置
*   所有卡片尺寸相同
*   我有一张按 z 顺序排列的卡片列表

我想我（基本上）有两个选择：

1) 蛮力画家的方法，其中桌面视口内的所有卡片都以反向 z 顺序完全绘制。优点：简单。缺点：a) 需要一个屏幕外缓冲区以避免闪烁，b) 可能会浪费大量时间来绘制每张卡片的昂贵区域，而该区域最终可能会被遮挡，最坏的情况是整张卡片都被覆盖。

2) 一种算法，它为每张卡片生成可见（或模糊）矩形列表，以便只绘制可见部分。

选择 2 是我需要建议的地方，尤其是在算法方面，以及“更智能”抽牌周期的优缺点。

感谢任何语言/平台无关的建议。如果重要，这将在 MS Windows 上实现。

我愿意接受任何建议，包括混合方法。我意识到一个精确的答案可能非常依赖于代码的细节，但即使在这一点上，我也会很高兴有概括的概念！

附加说明：有可能将数千张卡片堆叠在一起，所以我非常积极地避免使用纯粹的蛮力画家的方法 - 至少没有某种预处理来剔除完全模糊的卡片。对于许多紧密平铺的卡片也是如此，更糟糕的情况是它们的边框显示 - 如果可能的话，我想在这些情况下跳过绘制复杂的内脏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:58:19.790

如果只画每张卡片从最底部到最顶部的轮廓线呢？然后你可以做一个洪水填充来绘制轮廓内部。这样，您将只重新绘制与有交叉点的边界相对应的几个像素。

编辑：上传图片来帮助我解释这个想法。

![方法的第 1 部分](../Images/4749d142765b4e42bfcefb83c7cf3de5.png) ![第2部分](../Images/5c687326c77f8db45d9519221011b731.png)

第一步是标记分配其 Z 顺序的卡片的边界（左上图）。这样，有覆盖，但只在少量像素的边界上。

之后，您可以按照以下两条规则绘制卡片的纹理（首先是最低 Z 顺序）：

*   您从边界开始绘制空白直到到达边界；
*   如果边框的 Z 顺序是当前的，则绘制它；
*   如果找到的边框 Z 顺序小于当前 Z 顺序，则继续绘制，因为它是空白的；
*   否则，您会找到具有更大 Z 顺序的边框，因此您跳过该块；
*   下一张牌。

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T05:30:12.217

好的，这里有一些松散的伪代码，我认为可以解决这个问题。

从卡片的 z 顺序排序列表开始。每张卡片都有一个可见矩形列表（稍后解释），需要从一个矩形开始，设置为卡片的完整边界框。循环首先从最低 z 顺序卡开始。

```
Cards.SortZOrder();
foreach Card in Cards do
  Card.ResetVisibleRects; // VisibleRects.DeleteAll; VisibleRects.Add(BoundingBox);

CurrentCard = Cards.Last;
TestCard = CurrentCard; 
```

这里的想法是，我们将从我们的“当前”卡向上工作，看看每张更高的卡对它有什么影响。当我们测试每张更高的卡片时，有 3 种可能性。它要么完全错过，要么完全模糊，要么部分模糊。对于完全错过，我们忽略测试卡，因为它不会影响我们当前的卡。为了完全模糊，我们当前的卡被剔除。部分重叠是可见矩形列表的来源，因为部分重叠可以（可能）将下部矩形分成两部分。（如果您只抓两张扑克牌或索引卡，很容易看出这是如何发挥作用的。顶部的一张会导致底部的一张调整它的一侧，如果它们共享任何边缘，或者它会导致底部的一张分裂如果它们不共享边，则分成两个矩形。）

警告：这是非常未优化的展开代码......只是为了谈论原则。是的，我即将使用“goto”......如果你必须嘲笑我。

```
[GetNextCard]
TestCard = Cards.NextHighest(TestCard);

[OverlapTest]
// Test the overlap of TestCard against all our VisibleRects.
// The first time through this test, CurrentCard will have only one
// rect in the VisibleRect list, but that rect may get split up later.
// OverlapTests() checks each rect in the VisibleRects list, and
// creates an Overlap record for any of the rects that do overlap,
// like: Overlap.RectIndex, Overlap.Type. It also summarizes the
// results into the .Summary field. 

Result = CurrentCard.OverlapTests(TestCard);

case Result.Summary
  none: 
    goto [GetNextCard];

  complete:
    CurrentCard.Culled = true;

    // we're now done with this CurrentCard, so we move upwards
    CurrentCard = TestCard;
    goto [GetNextCard]

  partial:
    // since there was some overlap, we need to adjust,
    // split, or delete some or all of our visible rectangles.
    // (we won't delete them all, that would have been caught above)

    foreach Overlap in Result.Overlaps
      R = CurrentCard.VisibleRects[Overlap.RectIndex];
      case Overlap.Type
        partial: CurrentCard.SplitOrAdjust(R, TestCard);
        complete: CurrentCard.Delete(R);
      end case

    // so we've either added new rects, or deleted some, but either 
    // way, we're done with this test card. We leave CurrentCard
    // where it is and loop to look at the next higher card.
    goto [GetNextCard] 
```

`CurrentCard = Cards.First`由于最上面的卡片始终完全可见，因此测试完成。

这里还有一些想法......

我认为这在实际代码中会相当简单。关于它的最复杂的事情是将一个矩形分成两部分，并且考虑到这都是整数数学，即使那是微不足道的。

此外，不必在每个绘制周期都执行此操作。仅当内容、位置或 z 顺序发生任何变化时才需要执行此操作。

在通过列表之后，您会得到一个可绘制的卡片列表，每张未剔除的卡片至少有一个矩形，可能会落在显示器的剪切/脏区域内。当你绘制一张卡片时，你可以检查它的可见矩形列表，并且可能会跳过卡片的绘制部分，这些部分可能渲染起来很昂贵。

# java - 需要java7的开源包

> ID：13057529
> 
> 赞同：0
> 
> 时间：2012-10-24T20:50:57.780
> 
> 标签：java, open-source, java-7

由于 java7 已经存在了一段时间，是否有任何使用新 java7 结构的开源包？如果有人对此类软件包有任何指示，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T20:53:45.520

[http://code.google.com/hosting/search?q=label:Java7](http://code.google.com/hosting/search?q=label:Java7)是所有带有 Java7 标记的 Google 代码项目的列表。

# television - Comcast TV API 是否向公众开放？

> ID：13057545
> 
> 赞同：0
> 
> 时间：2012-10-24T20:52:09.233
> 
> 标签：television

我正在考虑构建我自己的家庭系统，它可以为我的 Comcast 有线电视进行基本的调谐频道或查看阵容，就像 xfinity TV App 一样。

我想知道是否有人知道 Comcast 打开他们的 API？还是有办法做到这一点？

谢谢

刘易斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:55:13.103

不，我所看到的一切都表明它是一个私有 API。这是有道理的，他们可能希望您必须使用他们的服务而不是创建自己的服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:56:41.193

最有可能的是，您必须针对使用 CableCard 的第 3 方系统进行编程。

据我所知，您可以执行此类操作的唯一方法是[使用 CableCARD 为 Windows 上的 Media Center](http://hd.engadget.com/2009/05/12/how-to-install-a-cablecard-tuner-in-your-diy-media-center/)编写插件。查看[Windows Media Center SDK 概述](http://msdn.microsoft.com/en-us/library/windows/desktop/ms816327.aspx)，看看它是否具有您正在寻找的功能。

# javascript - JavaScript 文本的位长

> ID：13057546
> 
> 赞同：1
> 
> 时间：2012-10-24T20:52:10.647
> 
> 标签：javascript, bits, valueconverter

如何在 JavaScript 中计算字符串的位数？例如字符串有多少位长`0000xfe-kemZlF4IlEgljDF_4df:1102pwrq7`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-06-17T07:57:01.847

提供的字符串 ("0000xfe-kemZlF4IlEgljDF_4df:1102pwrq7") 将是：

```
length * 2 * 8 
```

位长，或**592 位**。

这是因为字符串中的每个字符都被视为 16 位无符号值，至少在最常见的主流实现中是这样。这个细节[可能可以讨论](https://mathiasbynens.be/notes/javascript-encoding)，但你在评论中提到这是出于安全目的 -

因此，假设您提供 ASCII 字符 (0-127) 或 UTF-8 (0-255)，您可以使用该`TextEncoder`对象来确保提供足够的字符来生成 128 位。请注意 UTF-8 中的 Latin-1 字符，因为编码器可能会将它们投影到等效的 UTF-16 上，这意味着它将为其生成 2 个字节，而不仅仅是一个。

如果您使用纯 JavaScript 字符串来保存 ASCII 字符，您将有一半的位置表示为 0，这会显着降低安全性，因此需要从 UTF-16/UCS-2 编码为 ASCII 或 UTF-8。

要使用[TextEncoder](https://developer.mozilla.org/en-US/docs/Web/API/TextEncoder)，您只需提供一个表示 16 个字符的字符串，此时为 256 位 (16x16)，但每个字符都在 ASCII/UTF-8 值范围内。编码后，除非使用了某些特殊字符，否则二进制缓冲区作为类型化数组应表示 128 位 (16x8)。

### 例子

```
if (!("TextEncoder" in window)) alert("Sorry, no TextEncoder in this browser...");
else {
  btn.onclick = function() {

    var s = txt.value;
    if (s.length !== 16) {
      alert("Need 16 chars. " + (16 - s.length) + " to go...");
      return
    }

    var encoder = new TextEncoder("ASCII");  // or use UTF-8
    var bytes = encoder.encode(s);

    console.log(bytes);

    if (bytes.byteLength === 16) alert("OK, got 128 bits");
    else alert("Oops, got " + (bytes.byteLength * 8) + " bits.");
  };
}
```

```
<label>Enter 16 ASCII chars: <input id=txt maxlength=16></label>
<button id=btn>Convert</button>
```

如果使用较旧的浏览器，另一种方法`TextEncoder`是手动迭代字符串并提取和屏蔽每个字符以从中构建二进制数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:01:35.030

您可以将字符串复制到缓冲区中，然后检查缓冲区的长度吗？

var str = '...';

var buf = 新缓冲区（str）；

控制台.log(buf.length);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T22:20:36.763

如果，如您所说，您只需要确保给定值至少为 128 位，那么您可能会将这个字符串传递给将字符串转换为某种字节表示的东西。字符串如何转换为字节取决于它的编码方式。

您给我们的示例字符串包含 ASCII 范围的字符。如果字符串被编码为 ASCII，那么它是每个字符 8 位。如果字符串被编码为 UTF-8，那么每个字符 8 位，但如果字符串可能包含比您提供的样本更大的字符值，那么每个字符可能超过 8 位，具体取决于字符。如果将其编码为 UTF-16，则每个字符至少为 16 位，但可能更多取决于字符。如果它被编码为 USC-2，那么它总是每个字符 16 位。

我们不知道这个要求是从哪里来的，以及需要这个字符串的系统是如何使用它的。如果系统使用每个字符的固定位数，那么这就像获取`length`字符串的 并乘以适当的数字一样简单。如果不是那么简单，那么您需要使用正确的*编码*对字符串进行编码，很可能是字节数组，然后乘以 8 * 字节数以获得位数。

# php - 在 html 和 php 中使用 $_POST 的问题

> ID：13057556
> 
> 赞同：0
> 
> 时间：2012-10-24T20:52:44.680
> 
> 标签：php, html, get

我对 $_POST 和 $_GET 有严重的问题。我是 php 新手。一周前才开始。

我有一个 html 表单，它调用 php 来执行操作。

```
<html><body>
<form action="ls_sample1.php" method="post">Submission ID: <input type="text" name="sub_id" />
<input type="submit"/></form>
</body></html> 
```

我有一个接受 sub_id 并执行系统命令的 php

```
<?php
ini_set('display_errors',1);
error_reporting(E_ALL);
?>

<?php
$input = $_POST['sub_id'];
echo "Entered submission id is $input";
system('/auto/ash/g2k/bin/gt -F stat -s $input',$ret);
if($ret) {
 echo "its invalid input because return value is $ret";
}
?> 
```

忽略上面代码中的命令。它就像任何其他 unix 命令一样。当我在 shell 中执行时，一切正常，返回值为 0。当我在浏览器中执行时，返回值为 1，没有执行任何操作。但是提交 id 正在传递给 php.ini。

浏览器输出：输入的提交 id 为 0000268801 其无效输入，因为返回值为 1

我在这里错过了什么吗？请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T20:56:23.907

所以不行。不要这样做。

如果有人提交表单，使得输入字段包含以下内容：

```
 ; rm -rf ~/ # 
```

那你就有麻烦了。它们可能比仅仅删除所有文件更具恶意。

看看[escapeshellarg](http://php.net/manual/en/function.escapeshellarg.php)。

**WRT你的错误：**

返回代码 1 通常表示一般（未指定）错误。有时 PHP 会将某些内容转储到您的错误日志中，这可能会有所帮助。您可以检查以确保您的 apache 用户确实有权运行该程序，并且您的 php.ini 文件中没有任何内容会干扰。

所有简单的解决方案都失败了，我会做的是`strace`Apache 实例，看看会发生什么。这有点高级，但是如果您知道如何使用该工具，那么它是必不可少的。我会暂时更改 apache 配置，以便只有一个 apache 工作进程，使用 strace 附加到它并将输出转储到文件中。然后在文件中搜索可执行文件的名称，并从那里跟踪执行链。最终你会遇到错误，看看它是什么。您可能还需要注意`-s`strace 选项（它控制截断字符串`-w`的位置），它设置输出文件，`-t`或者`-tt`添加时间戳。

请不要让我解释如何做所有这些事情；它需要页面。

# django - 自定义 SearchView 返回空结果

> ID：13057559
> 
> 赞同：0
> 
> 时间：2012-10-24T20:53:10.297
> 
> 标签：django, django-haystack

我正在尝试使用自定义 SearchView 进行过滤，这是我的代码：

```
sqs = SearchQuerySet().filter(content='Testing')
view = search_view_factory(
    view_class=SearchView,
    template='search/results.html',
    load_all=True, 
    form_class=None,
    searchqueryset=sqs,
    )
return view(request) 
```

但它一直给我没有找到结果，尽管在打印 sqs 时，我确实得到了结果。

AnyIdea 我的代码中可能缺少什么？

# h.264 - 如何解码 RTP/MP4A-LATM 音频有效载荷

> ID：13057564
> 
> 赞同：3
> 
> 时间：2012-10-24T20:53:41.240
> 
> 标签：h.264, rtp, mp4a

我正在 J2ME 中实现 RTSP 以连接到 Wowza。我有 RTSP 部分工作，并提取 RTP 数据包。我能够解码和显示 h264 视频流。

我在理解如何创建适当的音频流以传递给 J2ME Player 对象时遇到问题。

作为 RTSP 设置交换的一部分，我从 SDP 获得以下信息

`m=audio 0 RTP/AVP 96 a=rtpmap:96 MP4A-LATM/24000/1 a=fmtp:96 profile-level-id=15;object=2;cpresent=0;config=400026103FC0 a=control:trackID=1`

由此我知道我可以期待包含 MP4A-LATM 格式音频的 RTP 数据包，并且（最重要的是）mux 配置数据不与流一致。多路复用器配置数据为 400026103FC0

我只是不知道如何解释配置字符串，以及如何配置 J2ME 播放器。

# image - winrt 事件拖放 dragenter 等或网格中图像的 zindex

> ID：13057574
> 
> 赞同：1
> 
> 时间：2012-10-24T20:54:17.183
> 
> 标签：image, events, drag-and-drop, grid, windows-runtime

我有一个带有网格的 winrt 应用程序。网格包含图像。我想要做的是将一个图像拖到网格内的另一个图像上并更改位置。我用 Drag_ManipulationDelta 制作的图像的移动效果很好。使用 allowdrop=true 和 drop 事件，我认为我可以获得目标图像，但 drop 事件从未触发。有什么问题或我应该检查吗？

所以我尝试了不同的事件，zB Pointer_moved 等，但如果事件触发取决于图像的“位置”，如果移动图像在顶部，则底层图像不会触发事件。所以我的下一个想法是改变 zindex 但 image.zindex 不存在。如何通过代码更改 zindex？

任何想法都非常受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:37:36.877

我解决的 zindex 问题：一个简单的

对于 myGrid.children c.setvalue(zindex, 0) 中的每个 c

使图像处于同一水平，并且

myimage.setvalue(zindex, -1)

将运动图像放在所有其他图像后面，现在其他图像的 pointer_entered 事件触发，我可以检测到最后触发的事件。它有效，但它并不是一个很好的解决方案。

因此，如果有人暗示为什么 drop 事件不起作用，那就太好了。

# javascript - 难以在 Android 浏览器中停止无限的 CSS 动画

> ID：13057575
> 
> 赞同：2
> 
> 时间：2012-10-24T20:54:16.893
> 
> 标签：javascript, android, css, animation, webkit-animation

我在 Android 4.x 浏览器/webview 中停止或暂停动画时运气不佳。我将 -webkit-animation-iteration-count 设置为无限，在 Chrome/Safari 中停止它没有问题，但如果元素有动画子元素，它在 Android 中会失败。

我的 HTML：

```
<div id="css-container" onclick="stopAnim();">
    <div id="content">Content</div>
</div> 
```

我的 JS：

```
function stopAnim() {
    // cssContent.classList.toggle('css-container-anim');
    cssContainer.classList.toggle('css-container-anim');
}

var cssContainer = document.getElementById("css-container");
var cssContent= document.getElementById("content");

cssContainer.classList.toggle('css-container-anim');
cssContent.classList.toggle('css-container-anim'); 
```

[你可以在这个fiddle](http://jsfiddle.net/ENrKj/9/)中看到问题。如果我取消注释内容的停止（删除动画类），那么我可以停止动画。

我想这可能是一些我无法理解的冒泡问题？或者它是一个Android错误？我也尝试通过 JS 直接操作样式，并将 webkitAnimationPlayState 设置为暂停而不是更改类，但这没有任何改变。

请注意，小提琴可以在 Android 上的 Chrome 中使用，但不能在普通浏览器中使用——因为 webview 我需要它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-09T12:44:24.620

This solves my (very similar) problem:

```
 $el.removeClass('THE_ANIMATION').css('opacity', 0.99);
    window.setTimeout(function () {
      $el.css('opacity', 1); 
    }, 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:25:25.887

我很难找到任何来源来确认这一点，但我相信 div 可能不会`onclick`为触摸设备发送事件。[我在http://jsfiddle.net/f2XaP/4/](http://jsfiddle.net/f2XaP/4/)中创建了一个测试，我在其中处理 an 的 onclick，`<a>`它似乎可以在我的 iPhone 上运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T08:32:31.700

我找到了解决该问题的方法。去除溢出：隐藏；从容器允许动画停止。去搞清楚。

**编辑：**虽然这可行，但动画在开始/停止时会出现口吃，所以这不是理想的解决方案。

# c# - 如何从 Orchard 数据库中删除模块的数据？

> ID：13057576
> 
> 赞同：14
> 
> 时间：2012-10-24T20:54:16.887
> 
> 标签：c#, asp.net, orchardcms

我已经安装了一个模块，在迁移和创建表之后，`Orchard.sdf`我想清除所有表并回滚迁移所做的所有更改。

我删除了表格，但我想应该删除一些元数据。

我们如何才能完全清除模块数据？谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-18T19:04:22.040

完全卸载涉及删除与模块名称、其功能名称和名称空间关联的数据库表和行。这是一个对我们有用的过程。

1：运行[orchard.exe](http://docs.orchardproject.net/Documentation/Using-the-command-line-interface) > 包卸载 Orchard.Module.MyModuleName

2：然后，打开 SQL Server Management Studio 并删除与您的模块关联的以下数据库表。

```
MyModuleName_MyFeatureNameRecord 
```

3：对下表列进行通配符搜索。请务必搜索 MyModuleName、MyNamespaceName、MyFeatureName 等。您最终将删除所有这些行，但还没有。

```
SELECT *  FROM Orchard_Framework_ContentTypeRecord  WHERE Name LIKE '%%'
SELECT *  FROM Settings_ContentTypeDefinitionRecord  WHERE Name LIKE '%%'
SELECT *  FROM Settings_ContentPartDefinitionRecord  WHERE Name LIKE '%%'
SELECT *  FROM Settings_ShellFeatureRecord  WHERE Name LIKE '%%'
SELECT *  FROM Settings_ShellFeatureStateRecord  WHERE Name LIKE '%%'
SELECT *  FROM Orchard_Framework_DataMigrationRecord  WHERE DataMigrationClass LIKE '%%' 
```

4：从上面的搜索结果中，记下这些表中行的 Id 值。

```
Orchard_Framework_ContentTypeRecord.Id
Settings_ContentTypeDefinitionRecord.Id 
```

5：现在您已经记录了 Id，删除您在上面的步骤 3 中找到的行。

6：使用步骤 4 中收集的 Id，从下表中删除行。

```
SELECT * FROM Settings_ContentTypePartDefinitionRecord 
    WHERE ContentTypeDefinitionRecord_Id IN()

SELECT * FROM Orchard_Framework_ContentItemRecord 
    WHERE ContentType_id IN () 
```

这对我有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T21:57:09.813

我不知道是否有正确的方法可以做到这一点，但是清理**Orchard_Framework_DataMigrationRecord**应该就足够了：datamigration 检查此表以查找当前功能版本，如果已经有一个条目，您可能无法重新启用特征。还要检查**Settings_ShellFeatureRecord**、**Settings_ShellFeatureStateRecord**、**Settings_ContentPartDefinitionRecord**和**Settings_ContentTypeDefinitionRecord**。

最后，其他表中可能有很多引用，但我认为没有什么危险的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-22T15:01:46.340

这是一个 SQL 查询片段，如果您对租户使用表前缀，它会更容易。

```
USE DatabaseName
DECLARE @moduleName varchar(255);
DECLARE @tableName varchar(255);
DECLARE @tablePrefix varchar(255);

SET @moduleName = '%Orchard.YourModule%';
SET @tablePrefix = 'YourTablePrefix';

SET @tableName = @tablePrefix + '_Orchard_Framework_ContentTypeRecord';
DECLARE @sql nvarchar(4000)
SELECT @sql = ' SELECT * ' +
              ' FROM dbo.' + quotename(@tableName) +
              ' WHERE Name LIKE @moduleName'
EXEC sp_executesql @sql, N'@moduleName varchar(255)', @moduleName;

SET @tableName = @tablePrefix + '_Settings_ContentTypeDefinitionRecord';
SELECT @sql = ' SELECT * ' +
              ' FROM dbo.' + quotename(@tableName) +
          ' WHERE Name LIKE @moduleName'
EXEC sp_executesql @sql, N'@moduleName varchar(255)', @moduleName;

SET @tableName = @tablePrefix + '_Settings_ContentPartDefinitionRecord';
SELECT @sql = ' SELECT * ' +
              ' FROM dbo.' + quotename(@tableName) +
          ' WHERE Name LIKE @moduleName'
EXEC sp_executesql @sql, N'@moduleName varchar(255)', @moduleName;

SET @tableName = @tablePrefix + '_Settings_ShellFeatureRecord';
SELECT @sql = ' SELECT * ' +
              ' FROM dbo.' + quotename(@tableName) +
              ' WHERE Name LIKE @moduleName'
EXEC sp_executesql @sql, N'@moduleName varchar(255)', @moduleName;

SET @tableName = @tablePrefix + '_Settings_ShellFeatureStateRecord';
SELECT @sql = ' SELECT * ' +
              ' FROM dbo.' + quotename(@tableName) +
              ' WHERE Name LIKE @moduleName'
EXEC sp_executesql @sql, N'@moduleName varchar(255)', @moduleName;

SET @tableName = @tablePrefix + '_Orchard_Framework_DataMigrationRecord';
SELECT @sql = ' SELECT * ' +
              ' FROM dbo.' + quotename(@tableName) +
              ' WHERE DataMigrationClass LIKE @moduleName'
EXEC sp_executesql @sql, N'@moduleName varchar(255)', @moduleName; 
```

# objective-c - 从 iOS 包中加载 Nib 文件的更快方法？

> ID：13057577
> 
> 赞同：4
> 
> 时间：2012-10-24T20:54:19.523
> 
> 标签：objective-c, ios, nib, nsbundle

我有一个应用程序，它使用一组自定义“控件”，这些控件是使用类似于以下方法从 Xib 文件按需加载的：

```
NSArray * topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"AudioPlayer" owner:self options:nil];
InteractiveMovieView *newAudio = [topLevelObjects objectAtIndex:0]; 
```

这种方法效果很好，除非同时加载多个控件（在应用程序的一个“页面”上有效）。

每次从捆绑包中加载显然效率低下，但我找不到另一种方法来解决这个问题。我曾尝试将笔尖加载到一个`copy`属性中并根据需要将其返回以供重复使用，但这不起作用，因为返回的副本绝不是空白笔尖的“干净”副本。

我希望这是有道理的，并感谢所有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T20:56:59.380

听起来您正在寻找[`UINib`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINib_Ref/Reference/Reference.html)课程。从文档中：

> `UINib`每当需要重复实例化相同的 nib 数据时，您的应用程序都应该使用对象。例如，如果您的表格视图使用 nib 文件来实例化表格视图单元格，则在`UINib`对象中缓存 nib 可以显着提高性能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T21:41:56.717

按照 Rob 的建议，您可以执行以下操作：

```
@implmentation InteractiveMovieView (NibFactory)

+(id)movieView
{
    static UINib * __nib ;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        __nib = [ UINib nibWithNibName:@"AudioPlayer" bundle:nil ] ;
    });

    InteractiveMovieView * view = [ __nib instantiateWithOwner:nil options:nil ][0] ;
    return view ;
}

@end 
```

# android - 如何使位于另一个已可单击视图下方的视图可单击？

> ID：13057579
> 
> 赞同：1
> 
> 时间：2012-10-24T20:54:31.230
> 
> 标签：android, android-layout, android-appwidget

很难给这个问题一个描述性的标题！

我有一个应用小部件，其中有一些可点击的按钮（根据应用小部件的需要使用 RemoteViews 和 PendingIntents），这些按钮在当前大小下难以点击。为了在不调整实际按钮大小的情况下解决这个问题，我在这些按钮上放置了更大的、不可见的、可点击的 FrameLayouts 以增加可点击区域。这很好用，除了按钮也有连接到它们的选择器，以便在点击时图像的背景颜色会发生变化。当 FrameLayout 覆盖按钮时，此选择器不再起作用，因为它现在实际上是被点击的 FrameLayout，而不是按钮。

我的问题是，是否有办法让它“点击”FrameLayout，以便仍然触发按钮的选择器，或者任何其他能达到相同效果的巧妙解决方法？在 FrameLayout 本身上应用选择器会使背景变化太大。

下面是我正在做的一个简化示例。我使用的实际布局更复杂，因此任何需要更改布局的解决方案都可能比这里看起来更难做。此外，将 FrameLayout 放置在 RelativeLayout 中的原因是我可以更自由地放置。

编辑

FrameLayout 放置在其他两个布局之上，这就是为什么我不能简单地将它放在按钮下方的原因。它需要覆盖更大的区域。我希望我不必重做整个布局来解决这个问题。

**布局**

```
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

            <ImageButton
                android:layout_width="@dimen/size_myButton_w"
                android:layout_height="@dimen/size_myButton_h"
                android:layout_alignParentRight="true"
                android:background="@drawable/selector" //NOT TRIGGERED! Covered by FrameLayout below. 
                android:src="@drawable/myButton" />

            <RelativeLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"

                <!-- More stuff here! -->

            </RelativeLayout>

                 <!-- Even more stuff here! -->

    </LinearLayout>

    <FrameLayout
        android:layout_width="120dp"
        android:layout_height="35dp"
        android:layout_alignParentRight="true">
    </FrameLayout>

</RelativeLayout> 
```

**选择器**

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" android:drawable="@color/navy" />
    <item android:state_focused="true" android:drawable="@color/white" />
    <item android:drawable="@color/white" />
</selector> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:05:56.803

也许您可以将 FrameLayout放在按钮***下方***，而不是顶部。这样，如果他们点击了实际的按钮，您的选择器就会被触发，如果他们错过了按钮并且仍然点击 FrameLayout ......好吧，您的选择器不会被触发，但您的 FrameLayout 点击监听器仍然会被调用。

# c++ - 迭代基本类型时使用 const 引用有什么缺点吗？

> ID：13057596
> 
> 赞同：35
> 
> 时间：2012-10-24T20:55:50.053
> 
> 标签：c++, templates, c++11

我发现自己最近越来越多地使用 C++11，过去我会使用迭代器，现在我尽可能使用[基于范围的 for 循环：](http://en.cppreference.com/w/cpp/language/range-for)

```
std::vector<int> coll(10);
std::generate(coll.begin(), coll.end(), []() { return rand(); } ); 
```

C++03：

```
for (std::vector<int>::const_iterator it = coll.begin(); it != coll.end(); ++it) {
   foo_func(*it);
} 
```

C++11：

```
for (auto e : coll) { foo_func(e); } 
```

但是如果集合元素类型是模板参数呢？`foo_func()`可能会被重载以通过 const 引用传递复杂（= 复制成本高）类型，而通过值传递简单类型：

```
foo_func(const BigType& e) { ... };
foo_func(int e) { ... }; 
```

当我使用上面的 C++03 风格的代码时，我没有考虑这么多。我会以同样的方式进行迭代，因为取消引用 const_iterator 会产生一个 const 引用，所以一切都很好。但是使用 C++11 基于范围的 for 循环，我需要使用 const 引用循环变量来获得相同的行为：

```
for (const auto& e : coll) { foo_func(e); } 
```

突然间我不再确定，如果这`auto`是一个简单的类型（例如实现引用的幕后指针），这是否不会引入不必要的汇编指令。

但是编译一个示例应用程序证实了简单类型没有开销，并且这似乎是在模板中使用基于范围的 for 循环的通用方式。如果不是这种情况，[boost::call_traits::param_type](http://www.boost.org/doc/libs/1_51_0/libs/utility/call_traits.htm)将是要走的路。

**问题：**标准中是否有任何保证？

（我意识到这个问题与基于范围的 for 循环并不真正相关。使用 const_iterators 时也存在。）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-24T21:13:53.203

标准容器都从它们的迭代器返回引用（但是请注意，一些“容器不是真正的容器，例如，`std::vector<bool>`它返回一个代理）。其他迭代器可能返回代理或值，尽管这不是严格支持的。

当然，该标准不对性能做出任何保证。任何与性能相关的特性（除了复杂性保证之外）都被认为是实现的质量。

也就是说，您可能需要考虑让编译器像以前一样为您做出选择：

```
for (auto&& e: coll) { f(e); } 
```

这里的主要问题是`f()`可能会收到非`const`参考。如有必要，可以`const`使用`coll`.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-24T21:16:40.287

6.5.4/1 说：

```
for ( for-range-declaration : braced-init-list ) statement 
```

> 让 range-init 等价于花括号初始化列表。在每种情况下，基于范围的 for 语句等效于

```
{
    auto && __range = range-init;
    for ( auto __begin = begin-expr,
                __end = end-expr;
            __begin != __end;
            ++__begin ) {
        for-range-declaration = *__begin;
        statement
    }
} 
```

（进一步解释所有这些`__`gubbins的含义）。

当然，与直接使用而不是内部*语句*相比，该标准不*保证*该行是否会引入性能开销。允许实现通过费力地将指针复制到某个堆栈槽中然后在每次使用引用时将其读回来实现引用，并且不需要优化。`const auto &e = *__begin``*__begin``e`

 *But there's no reason why there should be an overhead in a sensible compiler, in the case where `__begin` is a container iterator (whose `operator*` returns a reference), and then `e` is passed by value in *statement*.*

# ruby-on-rails - 如何仅在 Rails 的生产环境中向管理员显示 500 错误堆栈跟踪？

> ID：13057601
> 
> 赞同：1
> 
> 时间：2012-10-24T20:56:00.717
> 
> 标签：ruby-on-rails, exception-handling, internal-server-error

我想让普通用户看到正常的“我们很抱歉，但出了点问题”。当他们遇到 500 错误时的消息，但管理员在生产中看到开发风格的完整堆栈跟踪。

我们正在使用异常，但能够在服务器上内联调试错误也很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:38:38.307

以前没有尝试过，但我认为您可以在 ApplicationController 中有一个 before_filter 来检查用户是否是管理员，如果是，请执行以下操作：

```
YourApp::Application.configure do
  config.consider_all_requests_local = true
end 
```

# matlab - 多项式的最大值

> ID：13057605
> 
> 赞同：6
> 
> 时间：2012-10-24T20:56:19.587
> 
> 标签：matlab, optimization, max, polynomial-math, maximize

我有一个 N 阶多项式（其中 N 是偶数）。对于 x 负/正无穷大，这个多项式等于负无穷大（因此它有一个最大值）。我现在正在做的是通过使用求多项式的导数，`polyder`然后使用`roots`Matlab 中返回 N-1 个解的函数。然后我选择真正最大化多项式的真正根。问题是我经常更新多项式，并且在每个时间步我都使用上述过程来找到最大化器。因此，roots 函数需要太多的计算时间，使我的应用程序变慢。在 Matlab 或提议的算法中是否有一种方法可以以计算有效的方式进行这种最大化（即只找到一个解决方案而不是 N-1 个解决方案）？谢谢。

编辑：我还想知道Matlab中是否有一个只返回实根而不是 `roots`返回所有实/复根的例程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T21:21:35.413

我认为你可能不走运。如果多项式的系数在每个时间步以任意方式变化，那么最终您将在每个阶段面临一个独特且不相关的优化问题。没有足够的信息来考虑仅计算导数多项式的根的子集 - 如果不比较所有导数根处的函数值，您如何知道哪个导数根提供了多项式的最大驻点？如果您的多项式系数在每一步仅受到（有界）少量或以可预测的方式受到干扰，那么这是*可以想象的*您将能够尝试迭代以在每个步骤中改进解决方案（例如一些粗​​略的东西，例如使用您以前的根作为一组新的牛顿迭代的起点来识别更新的导数根），但问题不建议实际上是这种情况，所以我只是猜测。我在这里可能完全错了，但是除非您可以提供更多信息，说明在每一步生成的多项式之间存在某种关系，否则您可能无法获得更快的速度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T04:24:51.097

Steve Morris有一个[文件交换提交](http://www.mathworks.com/matlabcentral/fileexchange/15122-real-roots-on-interval)，它在给定的时间间隔内找到函数的所有真实根。它是通过用 Chebychev 多项式对多项式进行插值并找到它的根来实现的。

您可以将其中`eig`的伴随矩阵的评估修改为`eigs`. 这使您可以只找到一个（或几个）根并节省时间（很有可能也可以*分析*地计算切比雪夫的根或极值，尽管我找不到很好的参考（甚至是不好的参考）一个就此而言...））。

`polyder`您可以在加快速度方面进行的另一种尝试是注意

```
Pprime = (numel(P)-1:-1:1) .* P(1:end-1); 
```

为你的多项式`P`。此外，`roots`除了找到伴生矩阵的特征值之外，什么也不做，因此您可以自己找到这些特征值，从而防止调用`roots`. 这可能都是有益的，因为在循环中调用非内置函数会阻止 Matlab 的 JIT 编译器将循环转换为机器语言。否则，这可能会给您带来很大的速度增益（100 倍或更多的因素并不少见）。

# jquery-ui - jquery ui 工具提示手动打开/关闭

> ID：13057606
> 
> 赞同：21
> 
> 时间：2012-10-24T20:56:22.710
> 
> 标签：jquery-ui, tooltip

有没有办法手动打开关闭 jquery ui 工具提示？我只是希望它对打开/关闭的点击事件做出反应。您可以取消绑定所有鼠标事件，它会在调用 .tooltip('open') 时重新绑定它们，即使这不应该初始化或设置事件 imo，因为如果您尝试在不初始化的情况下运行 .tooltip('open')，它会抱怨大声说没有被初始化。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-10-24T15:35:39.570

jltwoo，我可以建议使用两个不同的布尔开关来启用自动打开和自动关闭吗？通过此更改，您的代码将如下所示：

```
(function( $ ) {
  $.widget( "custom.tooltipX", $.ui.tooltip, {
    options: {
        autoShow: true,
        autoHide: true
    },

    _create: function() {
      this._super();
      if(!this.options.autoShow){
        this._off(this.element, "mouseover focusin");
      }
    },

    _open: function( event, target, content ) {
      this._superApply(arguments);

      if(!this.options.autoHide){
        this._off(target, "mouseleave focusout");
      }
    }
  });

}( jQuery ) ); 
```

这样，将工具提示初始化为：

```
$(someDOM).tooltipX({ autoHide:false }); 
```

当鼠标悬停在元素上时它会自行显示，但您必须手动关闭它。

如果您想手动控制打开和关闭操作，您可以简单地使用：

```
$(someDOM).tooltipX({ autoShow:false, autoHide:false }); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-11-11T01:48:33.930

如果您只想取消绑定事件并且不想制作自己的自定义工具提示。

```
$("#some-id").tooltip(tooltip_settings)
             .on('mouseout focusout', function(event) {
                  event.stopImmediatePropagation();
             });

$("#some-id").attr("title", "Message");
$("#some-id").tooltip("open"); 
```

**mouseout**通过移动鼠标光标阻止工具顶部消失

**focusout**阻止工具顶部通过键盘导航消失

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-25T04:04:45.067

工具提示有一个禁用选项。好吧，我使用了它，这是代码：

```
$('a').tooltip({
    disabled: true    
}).click(function(){    
    if($(this).tooltip('option', 'disabled'))
        $(this).tooltip('option', {disabled: false}).tooltip('open');
    else
        $(this).tooltip('option', {disabled: true}).tooltip('close');
}).hover(function(){
    $(this).tooltip('option', {disabled: true}).tooltip('close');
}, function(){
    $(this).tooltip('option', {disabled: true}).tooltip('close');
}); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-09-22T05:44:49.847

与我的其他评论相关，我查看了原始代码并通过扩展小部件并添加版本 JQuery-UI v1.10.3 的 autoHide 选项来实现手动打开/关闭。基本上我只是删除了在 _create 和内部 _open 调用中添加的鼠标侦听器。

**编辑：**按照@MscG 的建议，将 autoHide 和 autoShow 分隔为两个单独的标志

**在这里演示：http:** [//jsfiddle.net/BfSz3/](http://jsfiddle.net/BfSz3/)

```
(function( $ ) {
  $.widget( "custom.tooltipX", $.ui.tooltip, {
    options: {
      autoHide:true,
      autoShow: true
    },

    _create: function() {
      this._super();
      if(!this.options.autoShow){
        this._off(this.element, "mouseover focusin");
      }
    },

    _open: function( event, target, content ) {
      this._superApply(arguments);

      if(!this.options.autoHide){
        this._off(target, "mouseleave focusout");
      }
    }
  });

}( jQuery ) ); 
```

现在，当您初始化时，您可以通过设置 autoHide 将工具提示设置为手动显示或隐藏：false：

```
 $(someDOM).tooltipX({ autoHide:false }); 
```

并根据其他地方的需要直接在您的代码中执行标准的打开/关闭调用

```
 $(someDOM).tooltipX("open"); // displays tooltip
 $(someDOM).tooltipX("close"); // closes tooltip 
```

一个简单的修补程序，直到我有时间做正式的拉取请求，这将不得不做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-05T21:53:44.200

其他 SO 问题的一些汇编。

[示例](https://jsfiddle.net/9mff4scL/4/)在单击时 显示工具提示`hint`，并在单击时隐藏工具提示

```
$(document).on('click', '.hint', function(){ //init new tooltip on click
   $(this).tooltip({
      position: { my: 'left+15 center', at: 'center right' },
      show: false,
      hide: false
   }).tooltip('open'); // show new tooltip
}).on('click', function(event){ // click everywhere
   if(!$(event.target).hasClass('hint'))
     $(".hint").each(function(){
        var $element = $(this);
        if($element.data('ui-tooltip')) { // remove tooltip only from initialized elements
           $element.tooltip('destroy');
        }
     })
});

$('.hint').on('mouseout focusout', function(event) { // prevent auto hide tooltip 
    event.stopImmediatePropagation();
}); 
```

# applescript - 如何使用applescript通过从剪贴板粘贴来命名文件夹

> ID：13057614
> 
> 赞同：1
> 
> 时间：2012-10-24T20:56:56.813
> 
> 标签：applescript, adobe-indesign, save-as

我从事平面设计工作，想为 indesign 创建一个脚本，它会自动：

1.  打开指定的文档模板。
2.  创建一个新的项目文件夹。
3.  使用剪贴板中的文本命名该文件夹。
4.  将新打开的文档保存到新创建的文件夹中，并使用剪贴板中的相同文本命名该文档。

我对 Applescript 很陌生，所以打字很慢，用小词，这样我就能理解。

到目前为止，这是我提出的代码方式：

```
tell application "Adobe InDesign CS5"
set myDocument to open "cm:Graphic_Design:Design Studio Templates:Brochure_042012_001:Brochure_042012_001.indt"
end tell
tell application "Finder"
make new folder at folder "Work" of folder "Graphic_Design" of disk "cm" with properties {name:"untitled folder"}
set name of folder "untitled folder" of folder "Work" of folder "Graphic_Design" of disk "cm" to pbpaste
end tell 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:41:39.770

尝试：

```
tell application "Finder" to set newFolder to make new folder at "cm:Graphic_Design:Work" with properties {name:(the clipboard as text)}
tell application "Adobe InDesign CS5"
    tell active document to save saving in (newFolder as text)
    end tell 
```

# c++ - 如何在 Dev++ 中链接 libws2_32.a 以进行套接字编程

> ID：13057615
> 
> 赞同：0
> 
> 时间：2012-10-24T20:56:57.813
> 
> 标签：c++, linker

我正在使用 Dev++，根据我阅读的关于套接字编程的教程，我需要链接到`libws2_32.a`我的项目。

我不明白该怎么做。有人可以解释一下吗？

这是我的代码：

```
//CONNECT TO REMOTE HOST (CLIENT APPLICATION)
//Include the needed header files.
//Don't forget to link libws2_32.a to your program as well
#include <winsock.h>
#pragma comment(lib,"libwsock32.a")
SOCKET s; //Socket handle

//CONNECTTOHOST – Connects to a remote host
bool ConnectToHost(int PortNo, char* IPAddress)
{
    //Start up Winsock…
    WSADATA wsadata;

    int error = WSAStartup(0x0202, &wsadata);

    //Did something happen?
    if (error)
        return false;

    //Did we get the right Winsock version?
    if (wsadata.wVersion != 0x0202)
    {
        WSACleanup(); //Clean up Winsock
        return false;
    }

    //Fill out the information needed to initialize a socket…
    SOCKADDR_IN target; //Socket address information

    target.sin_family = AF_INET; // address family Internet
    target.sin_port = htons (PortNo); //Port to connect on
    target.sin_addr.s_addr = inet_addr (IPAddress); //Target IP

    s = socket (AF_INET, SOCK_STREAM, IPPROTO_TCP); //Create socket
    if (s == INVALID_SOCKET)
    {
        return false; //Couldn't create the socket
    }  

    //Try connecting...

    if (connect(s, (SOCKADDR *)&target, sizeof(target)) == SOCKET_ERROR)
    {
        return false; //Couldn't connect
    }
    else
        return true; //Success
}

//CLOSECONNECTION – shuts down the socket and closes any connection on it
void CloseConnection ()
{
    //Close the socket if it exists
    if (s)
        closesocket(s);

    WSACleanup(); //Clean up Winsock
} 
```

我得到的错误是：

```
[Linker error] undefined reference to `WSAStartup@8' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:03:24.283

转到项目选项->参数->链接器->添加库并添加您需要的库文件-在您的情况下-`libws2_32.a`

# ruby-on-rails-3 - Heroku 花费太多时间上传到 S3（载波和雾）

> ID：13057621
> 
> 赞同：2
> 
> 时间：2012-10-24T20:57:32.097
> 
> 标签：ruby-on-rails-3, heroku, amazon-s3, carrierwave, fog

我有一个 Rails 应用程序，当用户从网络调用一个操作时，heroku 应用程序会生成一个随机图像，将该图像上传到 S3 并将该图像的公共 URL（存储在 s3 中）返回给用户......

“将该图像上传到 S3”需要很长时间，需要 27kb 20 秒的文件，这是不可能的......我真的不知道如何解决这个问题，因为它正在工作，它正在上传到 s3 但是采取太多...

我正在考虑将图像存储在 rails 应用程序的 tmp 文件夹中，但我不知道在被删除之前会有多长时间......知道吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T02:56:01.477

如果图像不是临时的，则不应将它们存储在 Heroku 上，因为当测功机处于非活动状态时它们将被删除。

我认为您应该调查将上传到 s3 的内容转移到异步后台作业。有几个可用选项：DelayedJob、Resque 和 Sidekiq 是一些更流行的后台处理 gem。您还必须在 Heroku 上添加一个工作人员来处理您的后台作业。

通过将上传移动到后台作业，您的用户将不会有大量的等待时间，因为图像上传过程将单独完成。

# html - IE 对不同页面的 CSS 处理方式不同

> ID：13057624
> 
> 赞同：1
> 
> 时间：2012-10-24T20:57:52.130
> 
> 标签：html, css, internet-explorer, cross-browser

我在 IE 无法读取我正在编辑的网站主页上的所有 CSS 时遇到了一些问题。我已经检查过它是否有效（它仍然显示一些标签没有关闭，即使这不是真的，但无论如何）。我无法摆脱内联样式，特别是因为内容管理系统（Volusion）覆盖了我编写的大部分代码，所以我被迫编写了很多内联代码。CSS 页面已加载，因此标题区域具有以下样式：

```
#header{ z-index:1; 
         width:100%; 
         opacity:.85; 
         background:rgba(200,200,200,.85); 

         /*For IE*/ 
         background-color: rgb(200, 200, 200); 
         opacity(0.85); } 
```

我最初在没有“背景颜色”的情况下运行它，因为 rgba(200,200,200,.85) 应该适用于 IE，但在这种情况下它不是。事实上，甚至在我将其更改为添加“背景颜色”之前，其他页面都完美地从这个 CSS 中绘制。然而，主页读取背景颜色，但这是它唯一需要的东西。它显然是从 Template.CSS 文件中读取的，因为它引用了它，但是不使用不透明度，并且标题被放置在“固定”的图像之后，因此应该悬停在这些图像上方。标题中的其他元素也是如此。我有 btn-group:first-child 有：

```
.btn-group a:first-child{ 
       border-radius: 4px 0 0 4px; 
       text-decoration:none; 
       font-weight:bold; } 
```

但是这些样式都没有应用在主页上。事实上 .btn-group 根本没有出现在样式列表中。我知道它*可以*阅读此内容，因为如果您转到该网站的任何其他页面，您会看到它的外观（它几乎是完美的）。但是主页不起作用。

有问题的页面位于 www.giftonline.us ，任何帮助都将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:57:34.730

IE 被强制进入 Quirks 模式，因为您有一个`doctype`与其他页面不匹配的无效页面。您需要使用 valid`doctype`以便 IE 以标准模式显示。

目前您有：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"> 
```

尝试将`doctype`主页更改为与其他页面相同：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

一旦您为页面提供了正确`doctype`的 ，CSS 规则应该像在其余页面上一样工作。

而且您正在使用无效的 html 链接到您的 CSS：

```
<link href="v/vspfiles/templates/tempTemplate/css/Imports.css" rel="stylesheet" type="text/css"></link> 
```

应改为：

```
<link href="v/vspfiles/templates/tempTemplate/css/Imports.css" rel="stylesheet" type="text/css" /> 
```

# cron - 你如何设置cron任务？

> ID：13057629
> 
> 赞同：6
> 
> 时间：2012-10-24T20:58:29.030
> 
> 标签：cron

我以前从未使用过 CRON，但我想使用 CRON 以便能够为 php 脚本执行计划作业。php 脚本称为“inactivesession.php”，在 php 脚本中是以下代码：

```
<?php

include('connect.php');

$createDate = mktime(0,0,0,10,25,date("Y"));
$selectedDate =  date('d-m-Y', ($createDate));

$sql = "UPDATE Session SET Active = ? WHERE DATE_FORMAT(SessionDate,'%Y-%m-%d' ) <= ?";                                         
$update = $mysqli->prepare($sql);
$update->bind_param("is", 0, $selectedDate);
$update->execute();

?> 
```

我想做的是，当达到上述日期（10 月 25 日）时，我希望 php 脚本执行上面的 UPDATE 语句。但我的问题是我如何使用 CRON 来做到这一点？

我正在使用的服务器是大学的服务器，称为 helios，是否需要在 helios 中设置 CRON，（我是否必须为此打电话给管理员）或者是其他使用 CRON 的服务器。

我以前从未使用过 CRON，所以你能向我解释一下如何使用我正在使用的服务器为上面的示例设置 CRON 吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T21:01:03.890

方法一：使用 crontab 中的 php 执行脚本

就像调用 shell 脚本（如我们的 crontab 15 示例文章中所示）一样，使用 php 可执行文件，并从 crontab 调用 php 脚本，如下所示。

要每 1 小时执行一次 myscript.php，请执行以下操作：

# **crontab -e**

```
00 * * * * /usr/local/bin/php /home/john/myscript.php 
```

方法 2：使用 crontab 中的 URL 运行 php 脚本

如果您的 php 脚本可以使用 URL 调用，您可以使用 lynx、curl 或 wget 来设置您的 crontab，如下所示。

以下脚本通过使用 lynx 文本浏览器调用 URL 来执行 php 脚本（每小时）。Lynx 文本浏览器默认以交互模式打开一个 URL。但是，如下所示，lynx 命令中的 -dump 选项会将 URL 的输出转储到标准输出。

```
00 * * * * lynx -dump http://www.thegeekstuff.com/myscript.php 
```

以下脚本通过使用 CURL 调用 URL 来执行 php 脚本（每 5 分钟一次）。Curl 默认在标准输出中显示输出。使用“curl -o”选项，您还可以将脚本的输出转储到临时文件，如下所示。

```
*/5 * * * * /usr/bin/curl -o temp.txt http://www.thegeekstuff.com/myscript.php 
```

以下脚本通过使用 WGET 调用 URL 来执行 php 脚本（每 10 分钟一次）。-q 选项表示相当模式。“-O temp.txt”表示将输出发送到临时文件。

```
*/10 * * * * /usr/bin/wget -q -O temp.txt http://www.thegeekstuff.com/myscript.php 
```

# sql - 从只有前两列不同的表中选择数据

> ID：13057630
> 
> 赞同：2
> 
> 时间：2012-10-24T20:58:39.977
> 
> 标签：sql, sql-server, tsql, distinct

**背景**

我有一个有六列的表。前三列创建 pk。我的任务是删除其中一个 pk 列。

我选择（使用不同的）数据到临时表（不包括第三列）中，并尝试将所有数据插入原始表中，每行的第三列为“11”，因为这是我被指示的做。（此列将在我执行此操作后被 DBA 删除）

但是，当我将这些数据插入到原始表中时，我得到了一个 pk 约束错误。（震惊，我知道）

其他三列只是日期列，因此不同的选择没有为每条记录创建唯一的 pk。我想要实现的只是在前两列上调用一个 distinct，然后任意选择其他三列，因为我选择哪个日期并不重要（至少不是在开发上）。

**我试过的**

我发现以下帖子似乎达到了我想要的效果：

[我如何（或我可以）在多列上选择 DISTINCT？](https://stackoverflow.com/questions/54418/how-do-i-or-can-i-select-distinct-on-multiple-columns-postgresql)

我尝试了乔尔和欧文的答案。

**尝试1：**

但是，对于 Joels 的回答，返回的集合太大 - 内部连接没有做我认为它会做的事情。选择不同的 col1 和 col2 会返回 400 列，但是当我使用他的解决方案时会返回 600 行。我检查了数据，实际上有重复的pk。这是我复制乔尔斯答案的尝试：

```
select a.emp_no, 
        a.eec_planning_unit_cde, 
        '11' as area, create_dte, 
        create_by_emp_no, modify_dte,
        modify_by_emp_no
from tempdb.guest.temp_part_time_evaluator b
inner join
(
    select emp_no, eec_planning_unit_cde
    from tempdb.guest.temp_part_time_evaluator
    group by emp_no, eec_planning_unit_cde
) a
ON b.emp_no = a.emp_no AND b.eec_planning_unit_cde = a.eec_planning_unit_cde 
```

现在，如果我只执行内部选择语句，则返回 400 行。如果我选择整个查询返回 600 行？内连接不应该只显示两组的交集吗？

**尝试2：**

我也尝试了欧文的答案。这个有语法错误，我在搜索 where 子句的规范时遇到了麻烦（特别是他使用 with 的技巧`(emp_no, eec_planning_unit_cde)`）

这是尝试：

```
select emp_no, 
    eec_planning_unit_cde, 
    '11' as area, create_dte, 
    create_by_emp_no, 
    modify_dte,
    modify_by_emp_no
where (emp_no, eec_planning_unit_cde) IN
(
    select emp_no, eec_planning_unit_cde
    from tempdb.guest.temp_part_time_evaluator
    group by emp_no, eec_planning_unit_cde
) 
```

现在，我意识到我引用的帖子是针对 postgresql 的。T-SQL没有类似的东西吗？尝试谷歌括号效果不太好。

**问题概述：**

1.  为什么内部连接不返回两个集合的交集？从谷歌搜索这是我认为应该做的
2.  是否有另一种方法可以实现我在 t-sql 中尝试 2 时尝试的相同方法？
3.  我使用其中的哪一个，或者如果我使用另一种解决方案对我来说并不重要......我应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:12:07.510

选择不同的将基于所有列，因此它不保证前两个是不同的

```
select pk1, pk2, '11', max(c1), max(c2), max(c3) 
from table 
group by pk1, pk2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T21:09:05.967

你可以试试这个：

```
SELECT a.emp_no, 
        a.eec_planning_unit_cde, 
        b.'11' as area, 
        b.create_dte, 
        b.create_by_emp_no, 
        b.modify_dte,
        b.modify_by_emp_no
FROM 
(
    SELECT emp_no, eec_planning_unit_cde
    FROM tempdb.guest.temp_part_time_evaluator
    GROUP BY emp_no, eec_planning_unit_cde
) a 
JOIN tempdb.guest.temp_part_time_evaluator b 
     ON a.emp_no = b.emp_no AND a.eec_planning_unit_cde = b.eec_planning_unit_cde 
```

这将使您在这些字段上有所不同，但如果列之间的数据存在差异，您可能不得不尝试更暴力的方法。

```
SELECT a.emp_no, 
        a.eec_planning_unit_cde, 
        a.'11' as area, 
        a.create_dte, 
        a.create_by_emp_no, 
        a.modify_dte,
        a.modify_by_emp_no
FROM 
(
    SELECT ROW_NUMBER() OVER(ORDER BY emp_no, eec_planning_unit_cde) rownumber,
            a.emp_no, 
            a.eec_planning_unit_cde, 
            a.'11' as area, 
            a.create_dte, 
            a.create_by_emp_no, 
            a.modify_dte,
            a.modify_by_emp_no
    FROM tempdb.guest.temp_part_time_evaluator
) a
WHERE rownumber = 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T21:10:14.003

我会一一回复：

1.  为什么内部连接不返回两个集合的交集？从谷歌搜索这是我认为应该做的

    内连接不做交集。让我们假设这些表：

    ```
    T1   T2
    n s  n s
    1 A  2 X   
    2 B  2 Y
    2 C
    3 D 
    ```

    如果您按数字列连接两个表，**则不会**得到交集（2 行）。你得到：

    ```
    select *
    from t1 inner join t2
       on t1.n = t2.n;

    | N | S |
    ---------
    | 2 | B |
    | 2 | B |
    | 2 | C |
    | 2 | C | 
    ```

    而且，您的第二种查询方法：

    ```
    select *
    from t1 
    where t1.n in (select n from t2);

    | N | S |
    ---------
    | 2 | B |
    | 2 | C | 
    ```

2.  是否有另一种方法可以实现我在 t-sql 中尝试 2 时尝试的相同方法？

    是的，这个子查询：

    ```
    select *
    from t1 
    where not exists (
       select 1
       from t2
       where t2.n = t1.n
    ); 
    ```

3.  我使用其中的哪一个，或者如果我使用另一种解决方案对我来说并不重要......我应该怎么做？

    是的，使用[@JTC 第二个查询](https://stackoverflow.com/a/13057776/1165522)。

# f# - F# Excel Range.Sort 失败或重新排列列

> ID：13057631
> 
> 赞同：3
> 
> 时间：2012-10-24T20:58:49.163
> 
> 标签：f#, vsto, excel-2010, excel-interop

我有两个案例。初步代码：

```
open Microsoft.Office.Interop.Excel

let xl = ApplicationClass()
xl.Workbooks.OpenText(fileName...)
let wb = xl.Workbooks.Item(1)
let ws = wb.ActiveSheet :?> Worksheet

let rows = string ws.UsedRange.Rows.Count 
```

首先，我尝试以下排序：

```
ws.Sort.SortFields.Clear()
ws.Sort.SortFields.Add(xl.Range("A8:A" + rows), XlSortOn.xlSortOnValues, XlSortOrder.xlAscending, XlSortDataOption.xlSortNormal) |> ignore
ws.Sort.SortFields.Add(xl.Range("H8:H" + rows), XlSortOn.xlSortOnValues, XlSortOrder.xlAscending, XlSortDataOption.xlSortNormal) |> ignore
ws.Sort.SetRange(xl.Range("A7:I" + rows))
ws.Sort.Header <- XlYesNoGuess.xlYes
ws.Sort.MatchCase <- false
ws.Sort.Orientation <- XlSortOrientation.xlSortRows
ws.Sort.SortMethod <- XlSortMethod.xlPinYin
ws.Sort.Apply() 
```

这会导致“排序引用无效。请确保它在您要排序的数据内，并且第一个排序依据框不同或空白。”。

然后我尝试以下排序：

```
ws.Range("A7:I" + rows).Sort(xl.Range("A8:A" + rows), XlSortOrder.xlAscending,
                             xl.Range("H8:H" + rows), "", XlSortOrder.xlAscending,
                             "", XlSortOrder.xlAscending, XlYesNoGuess.xlYes,
                             XlSortOrientation.xlSortRows) |> ignore 
```

这导致我的列被重新排列，尽管我没有看到重新排列的任何逻辑。并且行没有排序。

请告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T14:22:52.440

我还没弄清楚为什么第一次排序尝试不起作用。但我查看了第二次排序[的文档](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.range.sort.aspx)。使用命名参数并删除除必要参数之外的所有参数，我想出了以下内容：

```
ws.Range("A8:H" + rows).Sort(Key1=xl.Range("A8:A" + rows), Key2=xl.Range("H8:H" + rows),
                             Orientation=XlSortOrientation.xlSortColumns) |> ignore 
```

The default Orientation is xlSortRows. I interpret this as sorting the rows, the normal, default, intuitive sort that Excel does when one sorts manually. Oh no. If you want the normal, default, intuitive sort that Excel does when one sorts manually, specify xlSortColumns.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-25T12:06:12.590

The first Sort doesn't work because you're probably trying to sort a table (judging by property **Header** set to **XlYesNoGuess.xlYes**) by columns located on **A** and **H**. In this case you can only sort using "**Sort top to bottom**"(**xlSortColumns**).

You can also convince yourself by trying this in Excel first and see what options are available:
1) Select the range you want to apply sorting (e.g. in your case "A7:I" + rows)
2) Click on "Data" menu -> "Sort & Filter" task pane -> Sort
3) Add/Delete columns/rows by using "Add Level"/"Delete Level" buttons
4) Then you can select whatever level you want and click "Options..." button and you will see your available "Sort Options".
You will notice that in case of a table you will have only one available option for "Orientation", which is "Sort top to bottom"

**xlSortColumns** - sorts by columns (meaning rows are sorted based on those columns)

**xlSortRows** - sort by rows (meaning columns are sorted based on those rows)

# xml - 使用 Powershell 删除一组 XML 元素

> ID：13057635
> 
> 赞同：4
> 
> 时间：2012-10-24T20:59:10.413
> 
> 标签：xml, powershell, nodes

我在 XML 文档中有类似于以下内容的内容：

```
<variables>
    <variable>
        <name>ctrl_btn</name>
        <value>button</value>
    </variable>
    <variable>
        <name>ctrl_snpt_calctrl</name>
        <value>The date entered must be less than or equal to</value>
    </variable>
</variables> 
```

我可以使用 Powershell 提取文档中的某些元素（例如根据索引号获取名称或值元素）。但是，我不了解这些索引是如何工作的（或任何索引可能被称为）。例如，查找 name[1] 给了我 ctrl_btn，但我会假设它是 name[0]。有人可以解释一下吗？

然而，我真正的问题是创建一个脚本来删除文档中的某些元素集合。例如，如果我想删除以下内容：

```
 <variable>
        <name>ctrl_snpt_calctrl</name>
        <value>The date entered must be less than or equal to</value>
    </variable> 
```

我四处搜索，但大多数示例仅从 XML 中删除某个节点，而不是像上面那样删除整个组。

名称和值在 XML 文档中始终是唯一的（顺便说一下，在`<variable></variable>`元素中包含超过 5000 个不同的名称/值组合。

我要删除的元素列表包含在一个仅列出名称值的文本文件中（例如，文本文档将列出 ctrl_btn，然后是 ctrl_snpt_calctrl）。

为了让您更好地了解，这是脚本执行的整个过程：

1.  获取 XML 文档的内容
2.  获取`<name></name>`文档中所有项目的元素之间的值
3.  针对文件列表运行搜索以验证文件中是否使用了该名称。
4.  如果未使用该名称，则将其写入一个文本文件（例如，not_found.txt）。
5.  `<variable></variable>`如果 ` 等于 not_found.txt 中的名称，则删除标签及其之间的所有内容。

我不确定上述过程是否有助于解释，但我认为我最好将其包括在内。

那么如何删除这些？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T22:02:57.113

假设您有一个字符串数组，其中每个元素都是您要删除的变量元素的名称，您可以执行以下操作：

```
$names = 'ctrl_btn','ctrl_snpt_calctrl'

$xml.variables.variable | ? { $names -contains $_.name } | % {$xml.variables.RemoveChild($_)} 
```

> 我可以使用 Powershell 提取文档中的某些元素（例如根据索引号获取名称或值元素）。但是，我不了解这些索引是如何工作的（或任何索引可能被称为）。例如，查找 name[1] 给了我 ctrl_btn，但我会假设它是 name[0]。有人可以解释一下吗？

不能保证 Xml 顺序，所以不要依赖这个。例如，在我的机器上，我得到了您期望的结果：

```
$xml.variables.variable.name[0] = ctrl_btn

$xml.variables.variable.name[1] = ctrl_snpt_calctrl 
```

# php - Facebook GraphAPI 通过另一个网页 php？

> ID：13057636
> 
> 赞同：0
> 
> 时间：2012-10-24T20:59:12.673
> 
> 标签：php, path, include, require

第一：请原谅我-我有点像新手...

我有一个工作测试站点，它正在运行 php facebook SDK 以成功执行一些简单的 graphAPI 请求。即读取用户所属的组的提要，并对其进行处理并将其显示回网页上。

这一切都很好，我遇到的问题是尝试通过 php curl POST 执行相同的请求到另一个网页（在同一个域上）。当发布请求形成时，SDK似乎没有将预期的会话带到另一个页面（参见代码中的“AUTH ERROR2”）......当通过“require_once”包含以下文件时，这工作正常，但不是当卷曲制作完成。

我宁愿做一个“卷曲”，因为我发现当“require_once”是从不同目录级别的页面完成时，我得到页面的 php 错误没有找到 - 这是预期的。

我可能只是错误地解决了这个问题......可能有一种更简单的方法来确保何时包含文件，它们正确的直接级别保持不变，或者可能有一种方法可以通过当前授权的 facebook sdk 会话发送卷曲的帖子。所有这些我都试图无济于事，我非常感谢任何帮助或建议。

感谢您的时间。

```
//readGroupPosts.inc.php
function readGroupPosts($postVars)

{
 //$access_token = $postVars[0]; 
 // ^-- I'm presuming I need this? I have been experimenting appending it to 
 //     the graphAPI request to no success...
 $groupID = $postVars[1];
 $limit = $postVars[2];

 require_once("authFb.inc.php"); //link to the facebookSDK & other stuff

  if ($user) {
   try {
     $groupFeed = $facebook->api("/$groupID/feed?limit=$limit"); //limit=0 returns all; 
     $groupFeed = $groupFeed['data']; //removes first tier of array for simpler access

     $postArray;
     for($i=0; $i<count($groupFeed); $i++)
      {
       $postArray[$i] = array($groupFeed[$i]['from']['name'], $groupFeed[$i]['message'], $groupFeed[$i]['updated_time'], count($groupFeed[$i]['likes']['data']));
      }

     return $postArray;
   } catch (FacebookApiException $e) {
     error_log($e);
     $user = null;
     return "AUTH ERROR1"; //for testing..
   }  
  }
 else
  {
     return "AUTH ERROR2"; //no user is authenticated i.e. $user == null..
  } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:09:19.193

> 我宁愿做一个“卷曲”，因为我发现当“require_once”是从不同目录级别的页面完成时，我得到的页面没有找到的 php 错误 - 这是预期的。
> 
> 我可能只是错误地解决了这个问题......

肯定的。

仅仅因为您无法找到绕过服务器文件系统的方法而使用 cURL 作为“解决方法”是一个*离谱*的想法。不要这样做。甚至停止思考它。现在。

> 可能有一种更简单的方法来确保文件被包含时，它们的正确直接级别保持不变

是的——例如，使用绝对路径而不是相对路径。用例如值作为前缀的路径`$_SERVER['DOCUMENT_ROOT']`- 这样，一旦你正确地给出了关于这个“基本路径”的路径，你需要文件的位置并不重要，因为绝对路径是相同*的*不管你从哪里看。

* * *

*（由于这根本不是与 Facebook 相关的问题，而只是涉及 PHP 和服务器端编程的基础知识，因此我将编辑标签。）*

# java - 使用 JSch 进行 SFTP 时无法连接到安全通道

> ID：13057638
> 
> 赞同：3
> 
> 时间：2012-10-24T20:59:22.357
> 
> 标签：java, exception, sftp, jsch

我正在尝试实现 JSch 以将文件从远程 Windows sftp 服务器检索到 Linux。

```
Session session = null;
    Channel channel = null;
    ChannelSftp channelSftp = null;
        try{
           JSch jsch = new JSch();
           session = jsch.getSession("userName","hostName",22);
           session.setPassword("password");
           java.util.Properties config = new java.util.Properties();
           config.put("StrictHostKeyChecking", "no");
          session.setConfig(config);
          session.connect();
          System.out.println(session.sendKeepAliveMsg());
          channel = session.openChannel("sftp");
          channel.connect();
         }catch(Exception e){
               e.printstacktrace();
         } 
```

运行此代码时出现以下异常。

```
com.jcraft.jsch.JSchException: java.io.IOException: inputstream is closed
    at com.jcraft.jsch.ChannelSftp.start(ChannelSftp.java:288)
    at com.jcraft.jsch.Channel.connect(Channel.java:152) 
```

当我调试时，我发现：

```
start(); 
```

**Channel 类**中的方法抛出异常。无论如何我可以防止这种情况吗？我不明白为什么该方法存在而不做任何事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:15:03.287

尝试在连接之前将您的频道投射到 ChannelSft：

```
Channel channel = session.openChannel("sftp");
ChannelSftp channelSftp = (ChannelSftp) channel;
channelSftp.connect(); 
```

# c# - 当用户在 datagridview 上输入内容时开始搜索

> ID：13057639
> 
> 赞同：1
> 
> 时间：2012-10-24T20:59:23.843
> 
> 标签：c#, winforms, datagridview

我们当前使用 FoxPro 制作的软件有一个非常好的功能：当我们在网格上键入内容时，会自动调用搜索功能。

示例：我有一个包含卡车列表的网格。当我单击网格并输入卡车编号时，网格会直接转到网格的卡车记录。

我需要在 C# 中实现它，我该怎么做？

PS 在某些情况下，网格可以有可编辑的字段。但如果它太复杂，我不会在那些可编辑的网格上实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T22:32:36.567

您可以在表单代码中尝试这样的事情：

```
TextBox searchBox = new TextBox();
Timer searchTimer = new Timer();
bool keyPressed = true;

public Form1()
{
    InitializeComponent();
    yourDataGridView.KeyUp += new KeyEventHandler(dgv_KeyUp);
    searchTimer.Interval = 5000;
    this.Controls.Add(searchBox);
    searchBox.KeyUp += new KeyEventHandler(searchBox_KeyUp);
    searchTimer.Tick += new EventHandler(timerTick);
    searchTimer.Enabled = true;
}

void searchBox_KeyUp(object sender, KeyEventArgs e)
{
    keyPressed = true;
}

void dgv_KeyUp(object sender, KeyEventArgs e)
{
    searchBox.Show();
    searchBox.Text += e.KeyCode.ToString().ToLowerInvariant();
    searchBox.Location = Cursor.Position;
    searchBox.Focus();
    SendKeys.Send("{Right}");
    searchBox.BringToFront();
    // Do your sorting of your DataGridView here according to your search box
}

void timerTick(object sender, EventArgs e)
{
    keyPressed = !keyPressed;
    if (keyPressed)
    {
        searchBox.Text = "";
        searchBox.Hide();
    }
} 
```

这会让你弹出一个“搜索” `TextBox`，它会在 5 秒后消失。您可以使用框中的文本执行您认为合适的搜索`DataGridView`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-24T22:26:47.327

您可以使用 TextChanged 事件在网格上方有一个文本框

```
-------------------
| TextBox here    | implement TextChanged event handler for the textbox
-------------------

-------------------

  GridView here      update this gridview when text changes

-------------------

protected void TextBox1_TextChanged(object sender, EventArgs) //this could be replaced with KeyUp event handlder
{
     string truckNo = TextBox1.Text;

     var newValues = findTrucksByNo(truckNo);

     truckGridView.DataSource = newValues; //rebind items to refresh grid view
} 
```

# c# - 如何从 ASP.NET MVC 4 网站获取文件和表单值？

> ID：13057648
> 
> 赞同：9
> 
> 时间：2012-10-24T21:00:13.190
> 
> 标签：c#, asp.net-mvc, forms, asp.net-mvc-4, http

我有一个 ASP.NET MVC 网站，它有一个在视图中使用它创建的下拉列表...

```
@Html.DropDownList("Programs") 
```

程序是从业务对象集合中填充的，并在 Home Controller 上的索引操作中填充到 ViewBag 中......

```
\\get items...
ViewBag.Programs = items; 
```

该视图还可能包含三个我在同一个视图中得到的文件......

```
<input type="file" name="files" id="txtUploadPlayer" size="40" />  
<input type="file" name="files" id="txtUploadCoaches" size="40" />  
<input type="file" name="files" id="txtUploadVolunteers" size="40" /> 
```

所有上述控件都包含在一个表单中，该表单使用...在视图中创建

```
@using (Html.BeginForm("Index", "Home", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
     <!--  file and other input types  -->
     <input type="submit" name="btnSubmit" value="Import Data" />
} 
```

我的问题是我找不到处理所有文件和引用表单字段的方法。

具体来说，我需要知道用户从下拉列表中选择的程序。

我可以毫无问题地使用此代码处理文件...

```
[HttpPost]
public ActionResult Index(IEnumerable<HttpPostedFileBase> files)
//public ActionResult Index(FormCollection form)
{

    _tmpFilePath = Server.MapPath("~/App_Data/uploads");

    if (files == null) return RedirectToAction("Index");
    foreach (var file in files)
    {
        if (file != null && file.ContentLength > 0)
        {
            var fileName = Path.GetFileName(file.FileName);
            var path = Path.Combine(_tmpFilePath, fileName);
            if (System.IO.File.Exists(path)) System.IO.File.Delete(path);

            _file = file;

            file.SaveAs(path);

            break;  //just use the first file that was not null.
        }
    }

    //SelectedProgramId = 0;

    //DoImport();

    return RedirectToAction("Index");
} 
```

但是我不知道如何还可以访问 POST 表单值，尤其是 Programs 下拉列表中的选定值（并且作为记录，还有一个复选框，我无法从中读取值。）Fiddler 向我展示了响应具有文件引用和选择的程序，但我不知道如何使用 ASP.NET MVC 将它们从 POST 中取出。

我知道这个问题非常基础，但我仍在学习整个 web/http 的东西，而不仅仅是 MVC。

**编辑** 感谢您的回答。我认为答案可能在于将文件和表单值都传递到 POST 中。

所以我的最后一个问题是......如何更改 HTML.BeginForm 块以同时传递文件和表单值？现在我有...

```
@using (Html.BeginForm("Index", "Home", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
  //do stuff
} 
```

该 using 语句应该如何获取表单值和文件作为 ActionResult 的单独参数？

**编辑我的编辑**
看来我不需要做任何更改...调试器显示文件和表单都是非空的。凉爽的！是对的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T21:05:07.853

我认为这应该这样做

```
[HttpPost]
public ActionResult Index(IEnumerable<HttpPostedFileBase> files, FormCollection form)
{
  //handle the files

  //handle the returned form values in the form collection
} 
```

您应该能够在 [HttpPost] 操作中传入 2 个参数。您也可以传入 HTML 名称。

编辑：我在 ASP.net 中的表单也有问题。我建议查看 Scott Allen 的这篇博文。 [http://odetocode.com/blogs/scott/archive/2009/04/27/6-tips-for-asp-net-mvc-model-binding.aspx](http://odetocode.com/blogs/scott/archive/2009/04/27/6-tips-for-asp-net-mvc-model-binding.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T21:05:11.623

Use a ViewModel type that contains both the posted files and form values, or use the `HttpRequest` (accessed via the `Controller.Request` property) object, which has `.Form[key]` for POST values and `.Files[key]` for posted files.

# actionscript-3 - AS3 - 仅从外部 SWF 加载某些项目/对象

> ID：13057649
> 
> 赞同：0
> 
> 时间：2012-10-24T21:00:13.863
> 
> 标签：actionscript-3

有什么办法可以说，让 A.swf 只使用 B.swf 中的某些项目，而不必先加载整个 swf 作为孩子？我想要做的是让 A 尽可能精简，并不时从 B 中提取一些项目，而不必以某种方式将整个文件缓存在闪存中。我看过其他类似的问题，但似乎没有一个真正回答或适合这个确切的问题。

在有人问之前，是的，我确实知道如何使用加载器、加载器上下文以及从库中创建类的实例。这更像是一个方法问题，而不是一个“如何”的问题。

我能想出的唯一想法是将所有子项导出为单独的 swf 对象，然后让 A 请求 B 将 A 请求的单独项目组合起来。这会有效吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:27:34.443

A`swf`是一个已编译的包，并不意味着要分成几部分。**一种解决方案是将A**和**B**中的所有常见元素拉到一个`swc`（编译的 Flash 库，不打算运行）中。然后，您可以将 包含在**A**和**B**`swc`的编译中。

 ****除非您将创建大量只有几个共同元素的文件，否则我不明白为什么需要将每个子项导出为单独的`swf`文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T22:55:37.530

我不认为你可以做你想做的事，但是由于这些资产本质上是严格的图形化，所以将它们导出为单独的资产并在需要时加载它们似乎并不是低效的。（实际上它对我来说似乎非常有效......）

我没有尝试过，但为了节省时间，您可能可以使用 jsfl 自动执行导出过程。（Jsfl 允许您编写 Flash IDE 本身的脚本，以自动执行您原本必须手动执行的任务。）在此处查看此 Stack Overflow 答案：

[使用带有大型库的 fla 的类生成单个 SWF](https://stackoverflow.com/questions/4652883/generating-individual-swfs-with-classes-from-a-fla-with-a-large-library)

该示例显示了如何从库中批量导出 swf。

请注意，在 Flash CS6 中，您可以通过右键单击并选择导出来从库中导出 MovieClip，但不幸的是，它不允许您一次导出所有组。****

# javascript - 更改交替 div 中表格的单元格背景颜色？

> ID：13057651
> 
> 赞同：-1
> 
> 时间：2012-10-24T21:00:25.517
> 
> 标签：javascript, jquery

更改每个其他 div 的表格单元格背景颜色的正确语法是什么？

代码示例：

```
 <table>    
                <div id="alternator">
                    <tr>
                        //stuff here
                    </tr>
                    <tbody>
                        <tr>
                            <td>
                                <table>
                                    //stuff here
                                </table>
                            </td>
                        </tr>
                    </tbody>
                </div>
            </table> 
```

为了解释，我的表格的一部分被包裹在一个 id 的 Div 中，`ALTERNATOR` 对于出现在页面上的每个其他 ALTERNATOR，我想更改内部表格单元格的背景颜色

就像是：

```
(#Alternator:odd).AllTableCellsInside().attr(background-color, "grey") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:03:42.097

看起来像是`:odd`选择器的完美用例：http: [//api.jquery.com/odd-selector/](http://api.jquery.com/odd-selector/)

```
$('#alternator tr:odd').css('background-color', 'grey'); 
```

# xpath - 在 XPath 查询中使用命名空间

> ID：13057659
> 
> 赞同：1
> 
> 时间：2012-10-24T21:00:57.873
> 
> 标签：xpath, xml-namespaces

我有我提出 XPath 请求的 xml 文件。但它只有在没有`xmlns-namespace`. 您能帮我添加正确的命名空间限定符（我有错误）吗？

xml:

```
<Event xmlns='http://schemas.microsoft.com/win/2004/08/events/event'> 
  <EventData> 
    <Data Name="ObjectServer">Security</Data>  
    <Data Name="ObjectType">File</Data>  
    <Data Name="ObjectName">C:\Temp\Project1.txt</Data> 
  </EventData> 
</Event> 
```

XPath：

```
*[EventData[Data[@Name="ObjectName" and (ends-with(text() ,".exe") or ends-with(text() ,".txt"))]]] 
```

PS我正在使用C++。我的代码基于来自 msdn的这个[示例。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa385771%28v=vs.85%29.aspx)但我认为这并不重要，因为我正在使用在线 XPath [tester](http://www.xpathtester.com/saved/46df956c-7bab-456d-940a-20225540b9fd)检查这个请求。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T23:32:17.030

试试这个：

```
//*[local-name()='EventData' and ./*[local-name()='Data']
[@Name="ObjectName"and 
(ends-with(text() ,".exe") or ends-with(text() ,".txt"))]] 
```

# perl - 使用 Perl 进行测试自动化

> ID：13057660
> 
> 赞同：3
> 
> 时间：2012-10-24T21:01:00.667
> 
> 标签：perl, selenium, automated-tests, test-class

我正在使用 Perl 和 Selenium 为 Web 应用程序构建测试自动化框架。

我正在权衡使用 Test::Routine v/s Test::Class 的利弊（关于测试的可维护性）。如果有人有使用这两种方法的经验，您能分享一下您的经验吗？

我是初学者，因此任何指向有关两者好处的更多信息的链接也将非常有益。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T05:31:01.500

在 Perl 社区和 CPAN 的美妙之处，我发现了这个模块，我认为它已经完成了您想要实现的功能：

[`Test::WWW::Selenium`](http://search.cpan.org/~lukec/Test-WWW-Selenium-1.33/lib/Test/WWW/Selenium.pm)

# database - 行、记录和元组有什么区别？

> ID：13057663
> 
> 赞同：4
> 
> 时间：2012-10-24T21:01:14.717
> 
> 标签：database, row, tuples, record

我目前正在学习数据库开发课程，但我很难理解这一点！

我的课程笔记将元组描述为：元组是关系的一行

根据我使用 MySQL 以来的理解，您可以搜索行。或者在浏览数据库时，您正在查看表中的行。

据我了解，记录是一行内的信息。

三者之间有什么明显的区别吗？

我知道有人发布了类似的内容，但我无法真正理解他的回答。

感谢您的所有帮助！

彼得

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T21:07:41.707

在您的上下文中，它们是不同的词，表示完全相同的事物。

通常，元组表示具有可能重复元素的有序列表（与具有所有唯一元素且未排序的集合相反）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:16:00.427

They mean exactly same thing: tuple, rows or records.

Your SELECT query will generate results that may contain 0 or more rows/records or tuples. A SELECT query can span 1 or more tables

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T21:04:05.400

他们是一样的。

行（也称为记录或元组）表示表中的单个隐式结构化数据项。

# javascript - Backbone.js 客户端模型保存服务器端错误的问题

> ID：13057664
> 
> 赞同：1
> 
> 时间：2012-10-24T21:01:20.463
> 
> 标签：javascript, node.js, backbone.js, socket.io

想知道是否有人可以在这里帮助我。

我在客户端运行backbone.js 有一个页面

服务器正在运行 socket.io。

我已将 Backbones 默认同步替换为主干.iobind 同步以支持 socket.io。

我有一个主干模型，它在保存时从服务器（计划中）获得错误响应，并触发保存的错误功能，**但是我在客户端的模型仍然更新为新值**。我已经包含了 wait:true ，据我了解，它在更新之前等待服务器的成功响应，但是这不会发生在我身上。

**服务器端socket.io代码**

```
io.sockets.on('connection', function (socket) {
  socket.on('test:create', function (data, callback) {
    //err - used to fake an error for testing purposes
    var err = true;
    if (err) {
      // error
      callback('serv error');
    } else {
      // success
      // The callback accepts two parameters: error and model. If no error has occurred, send null for error.
      callback(null, data);
    }
  }); 
```

**客户端代码**

```
 //HTML Code
  //<div id="callBtns">
    //<button id="runTest">Create</button>
  //</div>

  var CommunicationType = Backbone.Model.extend({
    defaults: {
      runTest: 'default'
    },
    urlRoot : '/test',
    validate: function(attrs) {
            //return 'error';    
    }
  }); 

  var BasicView = Backbone.View.extend({    
    el: $('#callBtns'), 

    initialize: function(){
      _.bindAll(this); 
    },

    events: {
    "click #runTest": "runTestFn"
    },

    runTestFn: function() {

      //causing the issue?
      communicationType.set({runTest: 'value from set'});     

      communicationType.save({},{
        success:function(model, serverResponse){
          console.log('Success');
          console.log(serverResponse);
        },
        error:function(model, serverResponse){
          console.log('Error');
          console.log(serverResponse);
          console.log(JSON.stringify(communicationType));
        },
        wait: true
      });
    }

  });

  var communicationType = new CommunicationType(); 
  var basicView = new BasicView(); 
```

**我注意到这个问题看起来是由于我使用 set 直接更新我的模型**（*communicationType.set({runTest: 'value from set'});*）

如果我在保存之前没有设置任何值，并直接将值传递给保存，就像下面的代码一样，它可以正常工作，例如

```
communicationType.save({runTest: 'value from save'},{
            success:function(.... 
```

但是，这意味着如果不通过保存功能，我将无法设置任何新值/更新我的模型：/

**所以我的问题是，我怎样才能让它正常工作（如果出现服务器端错误，让客户端模型不更新）同时仍然能够使用 set？**

任何答案都非常感谢！非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:57:40.317

这无法完成，因为您的模型在发出请求之前无法知道其数据是否有效（在本例中为 model.save）。

如果您想在传递无效值时阻止 Backbone.Model.set 工作，则必须更新模型的“验证”函数以检查错误。

给定以下验证功能：

```
validate: function(attrs) {
    this.errors = [];
    if (attrs.runTest === 'wrong_value') {
      this.errors.push('error message');
    }
    return _.any(this.errors) ? this.errors : null;
} 
```

在您的 CommunicationType 模型上。在 BasicView 中运行此代码：

```
communicationType.set({runTest: 'wrong_value'}); 
```

不会改变模型。

您还可以使用 validate 函数通过返回错误数组并检查它来检查服务器端错误：

```
validate: function(attrs) {
    this.errors = [];
    if (attrs.runTest === 'wrong_value') { // client side check
      this.errors.push('error message');
    }
    if (attrs.errors && attrs.errors.length > 0) { // server side check
        for (var key in attrs.errors) {
            this.errors.push(attrs.errors[key]);
        }
    }
    return _.any(this.errors) ? this.errors : null;
} 
```

但这只会防止在保存模型时更改模型。

作为 hack-ish 的替代方案，您可以在 validate 函数中添加服务器请求，以检查错误并防止“set”函数更改模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T22:04:56.807

您可以使用`set`with`silent: true`所以它不会触发更改事件。

# vba - VBA - 表单类没有显示方法

> ID：13057665
> 
> 赞同：3
> 
> 时间：2012-10-24T21:01:21.197
> 
> 标签：vba

我想从另一种形式创建一种形式。但是 Form 类没有 Show 方法，该方法在[http://msdn.microsoft.com/en-us/library/office/gg251540.aspx中描述](http://msdn.microsoft.com/en-us/library/office/gg251540.aspx)

这是 Form_Main 中的代码：

```
Private Sub btnTemp_Click()
    Dim frmOpt As Form_Option
    Set frmOpt = New Form_Option
    frmOpt.Show vbModal
End Sub 
```

但我收到“编译错误：找不到方法或数据成员”。

我在哪里犯错了？

谢谢

（VBA 6.5 版；Access 2007）

=====
对不起我之前的评论：现在我看到评论并不明显。

我的 mainForm 上没有 subForm。

我有两个简单的表单：Form_Main 和 Form_Option。我想成为下一个逻辑：

1.  Form_Main 有按钮“btnOption”

2.  点击“btn选项”。Form_Option 正在打开

3.  我更改 Form_Option 上的选项

4.  并点击Form_Option上的btnSave按钮，下一个思路正在执行：
    `Form_Main.TimerInterval = CLng(Form_Option.edtTimerInterval.Value)`

此刻我把它简单化了。这对我来说已经足够了。
我这样写：

```
Private Sub btnOptions_Click()
    '  After changing options, refresh timer interval of main form
    DoCmd.OpenForm "Options", , , , , acDialog
    Me.TimerInterval = 1000 * CLng(MOptions.loadOption("fPeriodVerifyNoticeInterval"))
End Sub 
```

其中 fPeriodVerifyNoticeInterval 是存储在选项表中的参数。
并且选项表单在保存时更改“fPeriodVerifyNoticeInterval”参数。

我的问题解决了，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T00:20:40.620

“错误”是这`Show`不是访问表单的有效方法。您提供的链接适用于用户表单，它们是用 VBA 制作的表单。

如果你想以这种方式创建一个新表单，你想要的是这样的：

```
frmOpt.Modal = true
frmOpt.Visible = true 
```

虽然我建议改为这样做： `DoCmd.OpenForm "Option", , , , , acDialog`这会将选项表单作为对话框打开。

警告：如果您使用 New 创建表单，即使您将其设置为模式，它也不会停止 VBA 代码的进度。这意味着您的变量将在代码完成后立即超出范围。如果您希望您的表单保持打开状态，您需要在子内将其设置为静态或在子外声明它，如下所示：

```
static frmOpt As Form_Option 
```

或在子之外`private frmOpt = Form_Option`或`public frmOpt = Form_Option`

# list - Scala中列表上的模式匹配

> ID：13057668
> 
> 赞同：17
> 
> 时间：2012-10-24T21:01:25.667
> 
> 标签：list, scala, pattern-matching

我对 Scala 列表中的模式匹配有点困惑。

例如。

```
 val simplelist: List[Char] = List('a', 'b', 'c', 'd')

    //> simplelist  : List[Char] = List(a, b, c, d)

    def simple_fun(list: List[Char]) = list match {
           case (x:Char) :: (y:List[Char]) => println(x)
           case _ => Nil
     }                                                 
   //> simple_fun: (list: List[Char])Any

   simple_fun(simplelist)                            

   //> a
   //| res0: Any = () 
```

这当前只打印一行输出。它不应该在 List 的每个元素上运行/模式匹配吗？

编辑：我修复了编译错误并复制了 REPL 的输出。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-24T21:04:40.037

Unless you are repeatedly calling `simple_fun` in some way, what you have there will pattern match the first element and nothing more. To get it to match the whole list, you can get `simple_fun` to call itself recursively, like this:

```
val simplelist: List[Char] = List('a', 'b', 'c', 'd')

def simple_fun(list: List[Char]): List[Nothing] = list match {
  case x :: xs => {
    println(x)
    simple_fun(xs)
  }
  case _ => Nil 
} 
```

Note I've also left out some of the types as the Scala compiler can infer them, leaving you with less cluttered, more readable code.

As a small side-note, calling `println` repeatedly inside the function like that is not particularly functional - as it is all about side effects. A more idiomatic approach would be to have the function construct a string describing the list, which is then output with a single call to `println` - so the side-effects are kept in a single well-defined place. Something like this would be one approach:

```
def simple_fun(list: List[Char]):String = list match {
  case x :: xs => x.toString + simple_fun(xs)
  case Nil => ""
}

println(simple_fun(simple_list)) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-07-21T17:02:42.623

I would also like to mention that the case for lists can be divided not only the head and tail, as well as any N number of list elements:

```
def anyFunction(list: List[Int]): Unit =
  list match {
        // ...methods that have already been shown
      case first :: second :: Nil  => println(s"List has only 2 elements: $first and $second")
      case first :: second :: tail => println(s"First: $first \nSecond: $second \nTail: $tail")
  } 
```

Hope it will be useful to someone.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-31T17:17:53.410

我认为以下应该有效：

```
def flatten(l: List[_]): List[Any] = l match {
  case Nil => Nil
  case (head: List[_]) :: tail => flatten(head) ::: flatten(tail)
  case head :: tail => head :: flatten(tail)
} 
```

第一行是 Nil 的匹配项，所以如果我们没有找到任何内容，则什么也不返回。第二行将识别 List of Lists 并调用 flatten 方法并展平列表列表。

# html - 浏览器为 html 添加额外的高度

> ID：13057669
> 
> 赞同：0
> 
> 时间：2012-10-24T21:01:27.567
> 
> 标签：html, lamp

我的 linux ubuntu 有问题...我已经安装了 Lamp 服务器，今天我注意到了这一点（html 是从 w3scool 复制/粘贴的）：

```
<!DOCTYPE html>
<html>
<body>

<h1>My First Heading</h1>

<p>My first paragraph.</p>

</body>
</html> 
```

当我使用 localhost 打开它时，我得到了这个：

```
<html style="height: 688px; "><head></head><body>

<h1>My First Heading</h1>

<p>My first paragraph.</p>

<div style="clear: both; "></div></body></html> 
```

我的问题是，浏览器从哪里获取 html tag() 中的这种额外的内联样式`<html style="height: 688px; ">`？因此，我的页面总是有滚动条（高度 > 100%）。但是如果我像这样打开同一个文件：左键单击，用谷歌浏览器打开没有滚动条......我不明白......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T17:58:49.843

试试这个代码..

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Klemzy Document</title>
</head>

<body>
<h1>My First Heading</h1>    
<p>My first paragraph.</p>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T22:09:24.523

您需要添加`<title></title>`标签。不确定您是否还需要`<head></head>`

# wpf - WPF DataGrid 中的超链接停止选择行

> ID：13057671
> 
> 赞同：0
> 
> 时间：2012-10-24T21:01:32.877
> 
> 标签：wpf, datagrid, hyperlink

我有一个带有模板列的 DataGrid，其中包含一个超链接作为模板

```
<DataGridTemplateColumn.CellTemplate>
    <DataTemplate>
        <TextBlock>
            <Hyperlink Command="{Binding Path=OpenCommand}">
                <TextBlock Text="{Binding Path=Description}" />
            </Hyperlink>
        </TextBlock>
    </DataTemplate>
</DataGridTemplateColumn.CellTemplate> 
```

DataGrid 也有一个上下文菜单，其中包含所选行的命令。当用户右键单击超链接列以外的任何其他列中的行时，该行被选中并显示上下文菜单。我遇到的问题是当用户右键单击超链接时，为了查看该行的命令，该行不会自动被选中。

问题：如何让超链接忽略鼠标右键单击，让数据网格处理事件并像在其他列中一样选择行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T13:36:34.073

我不确定是什么导致了这种行为，但它确实很烦人。

我不知道您是否可以对超链接或 DataGrid 做一些事情以使其工作，但我认为不能。

幸运的是，有一个很好的解决方法。

您可以订阅`MouseRightButtonDown`DataGridRows 上的事件，并在`IsSelected`引发事件时将该属性设置为 true。这样，即使您单击 ，也会选择正确的行`Hyperlink`。

在 XAML 中添加事件处理程序，如下所示：

```
<DataGrid.Resources>
    <Style TargetType="DataGridRow">
        <EventSetter Event="MouseRightButtonDown" Handler="DataGridRow_MouseRightButtonDown" />
    </Style>
</DataGrid.Resources> 
```

..并在代码隐藏设置选择：

```
protected void DataGridRow_MouseRightButtonDown(object sender, EventArgs e)
{
    var row = (DataGridRow)sender;
    row.IsSelected = true;
} 
```

# mdx - 如何使用 MDX 执行不同的求和？

> ID：13057676
> 
> 赞同：2
> 
> 时间：2012-10-24T21:01:54.887
> 
> 标签：mdx, mondrian

所以我有这样的数据：

```
Date       EMPLOYEE_ID   HEADCOUNT   TERMINATIONS
1/31/2011        1            1             0 
2/28/2011        1            1             0
3/31/2011        1            1             0
4/30/2011        1            1             0
...
1/31/2012        1            1             0
2/28/2012        1            1             0
3/31/2012        1            1             0

1/31/2012        2            1             0
2/28/2011        2            1             0
3/31/2011        2            1             0
4/30/2011        2            0             1    

1/31/2012        3            1             0
2/28/2011        3            1             0
3/31/2011        3            1             0
4/30/2011        3            1             0
...
1/31/2012        3            1             0
2/28/2012        3            1             0
3/31/2012        3            1             0 
```

我想总结员工人数，但我需要从employee_id 的总和中删除重复的条目。从数据中可以看到employee_id 1 在表中出现了很多次，但我只想添加它的headcount 列一次。例如，如果我上一年汇总，我可能会使用以下查询获得一份报告：

```
with member [Measures].[Distinct HeadCount] as
          ??? how do I define this???
select { [Date].[YEAR].children } on ROWS, 
       { [Measures].[Distinct HeadCount] } on COLUMNS 
       from [someCube] 
```

它会产生这个输出：

```
YEAR    Distinct HeadCount
2011           3
2012           2 
```

任何想法如何用 MDX 做到这一点？有没有办法控制每个员工的总和中使用哪一行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:33:23.547

您可以使用这样的表达式：

```
WITH MEMBER [Measures].[Distinct HeadCount] AS
    Sum(NonEmpty('the set of the employee ids', 'all the dates of the current year (ie [Date].[YEAR].CurrentMember)'), [Measures].[HeadCount]) 
```

如果你想要一个更通用的表达式，你可以使用这个：

```
WITH MEMBER [Measures].[Distinct HeadCount] AS
    Sum(NonEmpty('the set of the employee ids', 
                 Descendants(Axis(0).Item(0).Item(0).Hierarchy.CurrentMember, Axis(0).Item(0).Item(0).Hierarchy.CurrentMember.Level, LEAVES)),
        IIf(IsLeaf(Axis(0).Item(0).Item(0).Hierarchy.CurrentMember),
            [Measures].[HeadCount],
            NULL)) 
```

# xcode - 在旧版 OS X 上模拟运行

> ID：13057678
> 
> 赞同：4
> 
> 时间：2012-10-24T21:02:06.630
> 
> 标签：xcode, macos, cocoa

如何在较旧的 OS X 版本上模拟运行？

现在我的应用程序可以在 10.7 和 10.8 上运行，但我想让它与 10.6 兼容。由于我正在使用一些新的 api，我仍在使用 10.8 基础 SDK 进行编译，因此我只能更改部署目标。

那么在我的 OS X 10.8 上，如何模拟在 OS X 10.6 上的运行？（如果它是可能的）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T22:21:48.473

TheZ 提到了虚拟机。有很多箍要通过许可来跳过。

我个人的“阻力最小的路径”是使用旧的 PPC Mac Mini 和几乎一样旧的基于英特尔的。PPC 运行 10.4 用于旧应用测试；英特尔 mini 启动各种操作系统版本以进行测试。所有安装映像都是一次性的，无论我对它做什么，都可以从网络卷中恢复它以获得干净的环境。

如果您不关心 PPC，那么只需购买一台二手 Intel Mac Mini，将其分区为旧操作系统版本，并将其专门用作测试环境。

# c# - 自定义验证类 - 如何使通用

> ID：13057682
> 
> 赞同：1
> 
> 时间：2012-10-24T21:02:27.273
> 
> 标签：c#, asp.net-mvc, validation

我正在尝试为我的 MVC 应用程序创建自定义验证属性。我编写的代码非常适合代码中指定的属性。我现在想扩展它，所以它更通用，因为我有 5 个其他属性我想使用这个相同的属性。
一般的想法是如果指定的其他属性为真，那么附加到属性的属性必须> 0。

我假设这样做的方法是创建一个接受属性值和其他属性值的构造函数，但我似乎无法实现它。我遇到的具体问题是我找不到正确的方法来获取所需的值。

这是我所拥有的：

```
public class MustBeGreaterIfTrueAttribute : ValidationAttribute
{
    protected override ValidationResult IsValid(object value, ValidationContext context)
    {
        var model = context.ObjectInstance as HistoryViewModel;
        //ValidationResult result = null;

        // Validate to ensure the model is the correct one
        if (context.ObjectInstance.GetType().Name == null)
        {
            throw new InvalidOperationException(string.Format(
                    CultureInfo.InvariantCulture, "Context of type {0} is not supported. "
                                                  + "Expected type HistoryViewModel",
                                                   context.ObjectInstance.GetType().Name));
        }

        // Here is the actual custom rule
        if (model.HistoryModel.IsRetired == true)
        {
            if (model.CounterA == 0)
            {
                return new ValidationResult("Please enter more information regarding your History");
            }
        }
        else if ( model.HistoryModel.IsRetired == true )
        {
            if ( model.ROCounter > 0 )

            return ValidationResult.Success;
        }

        // If all is ok, return successful.
        return ValidationResult.Success;

    }

    //  Add the client side unobtrusive 'data-val' attributes
    //public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    //{

    //}

} 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:08:53.113

我刚刚在我称为“RequiredIfTrueAttribute”的属性中做了类似的事情。这将为您提供模型中其他属性的值。将另一个属性名称作为字符串传递到自定义属性构造函数中。

```
public class RequiredIfTrueAttribute: ValidationAttributeBase
{

    public string DependentPropertyName { get; private set; }

    public RequiredIfTrueAttribute(string dependentPropertyName) 
        : base()
    {
            this.DependentPropertyName = dependentPropertyName;
    }

    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        // Get the property we need to see if we need to perform validation
        PropertyInfo property = validationContext.ObjectType.GetProperty(this.DependentPropertyName);
        object propertyValue = property.GetValue(validationContext.ObjectInstance, null);

        // ... logic specific to my attribute

        return ValidationResult.Success;
    }

} 
```

现在，如果只有一种方法可以在不使用字符串的情况下将dependentPropertyName 传递给验证属性......

* * *

*更新：*

在 C# 6.0 中，现在有一种方法可以在不使用字符串的情况下调用dependentPropertyName。只需使用 nameof(thePropertyName) ，它将被字符串替换。这发生在编译时，因此如果您更改属性名称，您将立即知道您也需要更改它。或者，更好的是，如果你使用`Ctrl`+ `R`，`Ctrl`+`R`来重命名变量，它也会自动重命名 nameof 中的版本。惊人的！

See: [nameof (C# and Visual Basic Reference)](https://msdn.microsoft.com/en-us/library/dn986596%28v=vs.140%29.aspx)

# visual-studio-2012 - 将 blob 上传到 azure

> ID：13057683
> 
> 赞同：1
> 
> 时间：2012-10-24T21:02:31.367
> 
> 标签：visual-studio-2012, azure, azure-blob-storage, server-explorer

我已将 VS 2012 中的服务器资源管理器连接到我的公共 blob 容器。

在 VS 2010 中有一个用于上传文件的按钮，但在 VS 2012 中似乎没有。

我是盲人，还是实际上缺少功能？

当我在这里时，有人知道在天蓝色门户中的容器设置下“公共容器”和“公共 blob”之间的区别吗？我将容器设置为“公共 blob”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T23:11:04.330

我们终于在最新版本的 Azure SDK for .NET / Visual Studio Azure 工具（2012 年 10 月）中添加了对 Blob 和队列的完整读/写支持。这使您可以执行许多有助于使用存储构建应用程序的操作，例如上传 blob、批量上传、批量下载、删除、创建容器、设置公共容器访问、入队/出队等。VS 2010 或 VS 2012默认情况下安装了 Azure 工具，这让我觉得你可能有以前版本的 SDK。请继续[安装最新的 SDK](http://www.windowsazure.com/en-us/develop/net/?slideshow=5)（可以与您现有的版本并排完成，而且它是免费的），您应该是金子了。

顺便说一句，上传的步骤是通过双击打开您的 bob 容器，在容器窗口的顶部，您会看到一个按预览文本框和几个图标进行过滤的过滤器。寻找“向上箭头”图标。它位于刷新图标和 x 图标之间，过滤器框右侧的第三个。

如果您有任何问题，请告诉我。如果有帮助，我很乐意上传屏幕截图。

Paul Yuknewicz，微软 Visual Studio

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-02T23:29:17.377

只是为了补充 Paul 的上述评论 - 在[Azure SDK for .NET 2.0](http://www.windowsazure.com/en-us/develop/net/#)（2013 年 4 月 30 日发布）中，我们添加了上传和删除表实体的功能。此外，我们还添加了一个查询生成器，以便更轻松地搜索特定实体。希望你喜欢这些好东西。

[有关 Visual Studio 中 Azure 存储工具的 MSDN 文档](http://msdn.microsoft.com/en-us/library/windowsazure/ff683677.aspx)

微软 Visual Studio 的 Merwan Hade

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T02:32:13.067

公共容器意味着匿名/未经身份验证的请求可以列出容器中的 blob 以及访问该容器中的 blob。公共 blob 意味着任何人都可以在给定 blob 的 URL 的情况下访问该容器中的 blob，但他们不能列出该容器中的 blob。（请参阅[设置容器 ACL](http://msdn.microsoft.com/en-us/library/windowsazure/dd179391.aspx)文档）

至于上传按钮，我在 VS2010 或 VS2012 中没有看到，但[MSDN 文档](http://msdn.microsoft.com/en-us/library/windowsazure/ff683677.aspx)确实提到了它的存在。我一直使用第三方工具，例如 Cloudberry Explorer 或 Cerebrata CloudStorage Studio。

# javascript - 关于 javascript 缓存的最佳实践，何时使用 var 何时不使用？

> ID：13057687
> 
> 赞同：0
> 
> 时间：2012-10-24T21:02:44.923
> 
> 标签：javascript, memory-management

我正在用javascript做一个项目，需要澄清一些事情。我读过 javascript 中的内存管理并不那么重要，因为系统会在后台为我们的程序员做这件事，但我也读过有时缓存“东西”以进行更好的优化是件好事，到目前为止它是非常清楚。例如，当我们在 for 循环中进行计算时，最好创建一个本地 var 并将结果存储在其中，这样我们就不必在循环时一遍又一遍地计算相同的计算。所以我的问题是，我创建了一个 json 对象。然后我想调用它的属性，是否可以通过对象调用它，比如 Car.color 或者当我想访问它或类似的东西时将它存储在本地变量中。对象 = 堆，

另一个例子：

```
 var map = [[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
              [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
              [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
              [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
              [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
              [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
              [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
              [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
              [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
              [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
              [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
              [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]];

            if (r >= 0) {
                var num = map[r][k];
                if(num === 0)
                {
                    return false;
                }
            } 
```

num var 是否会改变任何东西（是好是坏？），如果有人可以扩展这个主题，那就太好了，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:06:10.993

在对象深处存储对事物的引用实际上与内存无关。这与不必一遍又一遍地查找事物有关。

将值存储到变量中就像在 Internet 上为页面添加书签一样。它可供您将来参考。如果您不为其添加书签，则需要弄清楚您是如何到达那里的，并一遍又一遍地按照这些步骤进行操作。书签很快，必须重新创建步骤很慢。

但好消息是在现代浏览器中，创建对某物的引用并不意味着代码会更快。在某些情况下它会变慢！这完全取决于浏览器、您要查找的对象类型以及代码在做什么。

*   DOM 查找好处
*   对一个小数组/对象的引用，不是那么多。

大多数时候，除非您在应用程序中看到主要的性能瓶颈，否则您不应该真正关心它。这就是您在浏览器中查看配置文件选项卡并查看代码永远运行的地方。

# javascript - Javascript 不会运行

> ID：13057689
> 
> 赞同：-5
> 
> 时间：2012-10-24T21:02:51.777
> 
> 标签：javascript, dreamweaver

我在我的简单 html 文件中尝试了许多 javascript，但是没有一个可以工作，我使用的是 Adob​​e Dreamweaver CS4，并且我尝试使用 Safari 和 Firefox 浏览器，

我也做了一些测试，并且在两个浏览器中都启用了 javascript，我使用的问题是在我的页面或 Dreamweaver 中，谁能给我一些建议来找到问题。

这是我尝试使用的代码示例。

```
 <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-like" data-href="http://facebook.com/facebook" data-send="false" data-width="450" data-show-faces="false"></div> 
```

我将第一部分放在我的标签下方，第二部分放在正文的表格中。

谢谢，萨米。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:50:30.220

您的代码很好，**但由于安全原因，您无法在本地进行测试。**

双斜杠没有**http:**

```
js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1"; 
```

新协议的行为就是这样。

看看这个小提琴，它与您的代码完全相同，但如果它有效，则不在*本地。*

[http://jsfiddle.net/h4xgn/](http://jsfiddle.net/h4xgn/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:20:53.860

问题是无协议 URL 继承了用于打开当前文档的协议，也就是说，它们通常不适用于`file:///`URI 方案。

要在没有此类问题的情况下进行本地测试，请安装本地 Web 服务器 - [XAMPP](http://www.apachefriends.org/en/xampp.html)、[WAMP](http://www.wampserver.com/en/)、[EasyPHP](http://www.easyphp.org/)`http://` - 并通过协议运行本地文件。或者，您也可以将其上传到您的网络服务器进行测试。

旁注：FB 不会使用 加载`file:///`，它需要加载到 Web 服务器上（本地主机也可以）。

[**小提琴**](http://jsfiddle.net/ult_combo/MWAZY/)

# c# - 如何从 Settings Charm Flyout 更新页面上的 GridView？

> ID：13057691
> 
> 赞同：0
> 
> 时间：2012-10-24T21:03:01.240
> 
> 标签：c#, windows-8, windows-runtime, winrt-xaml

我有一个带有 GridView 的页面。我的 Settings Charm 条目之一可以初始化该页面，即 Setting Charm 可以删除或加载 GridView 条目。如果我在此页面上启动 Setting Charm 并初始化 GridView，当我关闭 Setting Charm 时，GridView 保持与初始化之前相同的状态，即显示相同的条目。如果我向后移动一个页面，然后再次转发到该页面，该页面会正确更新其内容，但我必须进行这种不吸引人的前后移动。

我怎样才能避免它？

谢谢， EitanB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:52:26.527

您是否使用`ObservableCollection`了该项目的 in`GridView`或 simple `List`，如果不是，则`ObservableCollection`改为使用。

# sed - 搜索字符串和消费税开始部分 - Solaris

> ID：13057697
> 
> 赞同：0
> 
> 时间：2012-10-24T21:03:25.607
> 
> 标签：sed, awk, solaris

另一个 Solaris 问题。

这是我的文件。

```
/abc/123/gfh/hello/what/is/up <THIS WOULD BE WHERE A NEW LINE STARTS>
bhn/fda/fds/hello/the/sky/is/blue <THIS WOULD BE WHERE A NEW LINE STARTS>
...etc 
```

我需要在“hello”之前删除所有内容，包括文件中每一行的正斜杠“/”...

我被卡住了 -> 我使用了 sed -E 命令，但 Solaris 无法识别“-E”。叹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:13:47.603

我想你可以grep这个：

```
grep -o hello.* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:08:39.117

这应该删除“hello”之前的所有内容，直到斜线：

```
sed -e 's|^.*hello/|hello|' <inputfile >outputfile 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T21:09:11.113

那应该这样做：

sed -e's/. *你好（。*）/你好\1/'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T21:41:05.200

@user4815162342：sed 解决方案中不需要“^”，“.*”就足够了。因为也有一个 awk 标签，所以这是等效的 awk 解决方案：

```
awk '{sub(/.*hello\//,"hello")}1' 
```

# c++ - cinder 函数重载错误

> ID：13057699
> 
> 赞同：1
> 
> 时间：2012-10-24T21:03:31.757
> 
> 标签：c++, overloading, cinder

在这个简单的 cinder 示例中（来自 cinder 介绍 - [http://libcinder.org/docs/v0.8.4/hello_cinder.html](http://libcinder.org/docs/v0.8.4/hello_cinder.html)）我得到这个编译错误：

```
myImage = gl::Texture( loadImage( loadResource( "image.jpg" ) ) ); 
```

错误 1 ​​错误 C2661: 'cinder::app::App::loadResource' : 没有重载函数需要 1 个参数

但是文档说：

```
DataSourceRef cinder::app::loadResource (   const std::string &     macPath  ) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:07:43.550

您指的是相同的功能：

```
cinder::app::App::loadResoure
cinder::app::loadResource 
```

从未使用过这个库，但文档说第一个函数需要更多参数：

[http://libcinder.org/docs/v0.8.4/classcinder_1_1app_1_1_app.html#afef905bb792960152d38c2680f88ea33](http://libcinder.org/docs/v0.8.4/classcinder_1_1app_1_1_app.html#afef905bb792960152d38c2680f88ea33)

```
static DataSourceRef cinder::app::App::loadResource (   
       const std::string &  macPath,
       int  mswID,
       const std::string &  mswType  
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-01T21:06:27.073

您最好尝试加载为资产而不是资源：

```
 gl::TextureRef      texImagen;
    texImagen = gl::Texture::create( loadImage( getAssetPath( "image.jpg" ) ) ); 
```

`image.jpg`位于资产文件夹中的位置。资产在运行时从该资产文件夹加载。该文件夹可以位于程序的同一级别或最多三个以上。

资源位于资源文件夹中，并在编译阶段复制并与应用程序或可执行文件一起打包。

使用包含资源标头

```
 #include "Resources.h" 
```

其中包含这样的东西

```
#pragma once
#include "cinder/CinderResources.h"
#define MY_IMAGE       CINDER_RESOURCE( ../resources/, image.jpg, 1, IMAGE ) 
```

然后你可以加载它

```
texImagen = gl::Texture::create( loadResource( MY_IMAGE ) ); 
```

请注意，如果您在 Xcode 中，则必须将图像添加到项目中，只需将其拖到项目树中即可。

# python - 更新信用卡或允许用户在平衡支付中使用不同的卡

> ID：13057701
> 
> 赞同：2
> 
> 时间：2012-10-24T21:03:35.817
> 
> 标签：python, balanced-payments

我正在使用[平衡付款](https://www.balancedpayments.com)来允许用户在我的网站上购买服务。当用户准备结帐时，他们在我的网站上登录/创建一个帐户，然后输入他们的信用卡信息。该卡已收费，他们正在路上。

正如我上面提到的，我的网站提供了一项服务，所以我每个月都会通过 cronjob 自动从他们的卡上收费。我干脆用下面一个班轮来抢买家：

```
buyer = balanced.Account.query.filter(email_address = emailAddress)[0] 
```

很简单。但是，信用卡丢失、过期、用户想要使用不同的信用卡等。我该如何允许用户编辑他们的信用卡或提供新的信用卡？我是否只是创建一个单独的页面，允许他们通过以下方式输入新的信用卡信息：

```
buyer = balanced.Marketplace.my_marketplace.create_buyer(emailAddress, card_uri = cardURI) 
```

最后，balanced如何决定使用哪个chard？如何让用户管理他们想使用的信用卡？我是否只是存储 card_uri 并让他们选择要使用的卡 URI？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T00:10:15.543

如果您查看[balance-python](https://github.com/balanced/balanced-python/blob/master/balanced/resources.py#L523)库的源代码，您可以获得有关使用哪些参数的提示。我很欣赏这对初学者来说可能有点混乱，所以感谢您提出问题。

### 将卡添加到现有帐户：

```
card = balanced.Card(**card_payload)  # this could also just be a URI from a card tokenized with balanced.js
account = balanced.Account.query.filter(email_address = emailAddress).one()
account.add_card(card.uri) 
```

### 为特定卡充电：

```
cards = account.cards
# some magic here to select the correct card (e.g. prompt user for which card)
card = magic_card_selection(cards)
debit = account.debit(amount_in_cents, source_uri=card.uri) 
```

### 为用户显示卡片

```
cards = account.cards
for card in cards:
    # display as you like, the card object has the following attributes:
    print card.__dict__.keys()
   ['expiration_month', 'account', 'hash', 'name', 'expiration_year', 'created_at', 'brand', 'uri', 'card_type', 'is_valid', 'meta', 'last_four', 'id'] 
```

这是一个完整的示例，可能会有所帮助：

```
import balanced

key = balanced.APIKey().save()
balanced.configure(key.secret)
balanced.Marketplace().save()

buyer = balanced.Account(email_address='buyer@example.org').save()

# add a new card
card = balanced.Marketplace.my_marketplace.create_card(
    name='First card',
    card_number='5105105105105100',
    expiration_month='12',
    expiration_year='2020',
    security_code='123',
)

buyer.add_card(card.uri)

# add another valid card 
card = balanced.Marketplace.my_marketplace.create_card(
    name='Second card',
    card_number='5105105105105100',
    expiration_month='12',
    expiration_year='2020',
    security_code='123',
)

buyer.add_card(card.uri)

amount_in_cents = 100  # $1.00

first_card = buyer.cards[0]
second_card = buyer.cards[1]

# charge a specific card
debit = buyer.debit(amount_in_cents, source_uri=first_card.uri)
debit2 = buyer.debit(amount_in_cents, source_uri=second_card.uri)

assert debit.source.uri == first_card.uri
assert debit2.source.uri == second_card.uri

# show all attributes on an object
print first_card.__dict__.keys() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T21:23:11.663

很多内容都包含在文档中；

*   [收集卡片信息](https://www.balancedpayments.com/docs/python/buyer#secure-information-collection)（ github上有完整的[示例页面。）](https://gist.github.com/2662770)
*   [添加卡片](https://www.balancedpayments.com/docs/python/buyer#add-card-to-account)
*   评论中提到了[使用哪张卡；](https://www.balancedpayments.com/docs/python/buyer#create-a-hold)

> 您可以从特定的卡中收取费用，如果您不这样做，balanced 将收取此帐户中最近添加的卡的费用。

# objective-c - 动态二维 C 数组在 Objective-C 中崩溃

> ID：13057703
> 
> 赞同：0
> 
> 时间：2012-10-24T21:03:45.487
> 
> 标签：objective-c, arrays, dynamic, crash

我正在使用二维数组形式的矩阵制作曲线拟合程序，但编译器会随机抛出 BAD_ACCESS 错误，例如 Thread 1:EXC_BAD_ACCESS (code=1, address=0x13f800000)。该程序有时会工作，有时会崩溃。任何想法，将不胜感激。谢谢。

```
- (void)main {
    NSLog(@"Enter size");

    scanf("%i", &matrixSize);

    float* temp;

    matrix = (float**)calloc(matrixSize, sizeof(float*));
    temp = (float*)calloc(matrixSize+1, sizeof(float));

    for (int i = 0; i < matrixSize+1; i++) {
        matrix[i] = temp + (i*(matrixSize+1));
    }

    [self enterPoints];
    [self elimination];
    [self setNeedsDisplay:YES];
    free(matrix);
    free(temp);
}

//points entered here

- (void)enterPoints {
    CGPoint *points = (CGPoint *)malloc(matrixSize * sizeof(CGPoint));

    for (int i = 0; i < matrixSize; i++) {
        scanf("%lf", &points[i].x);
        scanf("%lf", &points[i].y);
    }

    for (int j = 0; j < matrixSize; j++) {
        for (int i = 0; i < matrixSize+1; i++) {
            if (i == (matrixSize)) {
                matrix[i][j] = points[j].y;
            }
            else {
                matrix[i][j] = pow(points[j].x, (matrixSize-1)-i);
            }
        }
    }
    free(points);
}

//matrix reduction occurs here

- (void)elimination {

    for (int j = 0; j < matrixSize; j++) {
        double divideValue = matrix[j][j];
        for (int i = 0; i < matrixSize+1; i++) {
            matrix[i][j] /= divideValue;
        }
        for (int j1 = 0; j1 < matrixSize; j1++) {
            if (j1 == j) {
                if (j1 == matrixSize-1) {
                    break;
                }
                else {
                    j1++;
                }
            }
            double subValue = matrix[j][j1];
            for (int i = 0; i < matrixSize+1; i++) {
                matrix[i][j1] -= matrix[i][j]*subValue;
            }
        }
    }
}

//drawing the polynomial 

- (void)drawRect:(NSRect)dirtyRect {
    NSGraphicsContext * GraphicsContext = [NSGraphicsContext currentContext];
    CGContextRef context = (CGContextRef) [GraphicsContext graphicsPort];

    CGContextSetRGBStrokeColor(context, 0.0, 0.0, 0.0, 1.0);

    CGContextSetLineWidth(context, 3.0);

    CGContextMoveToPoint(context, 0, matrix[matrixSize][0]*100 + 100);

    [GraphicsContext saveGraphicsState];

    CGMutablePathRef path;

    path = CGPathCreateMutable();

    for (float i = -matrixSize; i < matrixSize; i+=.01) {
        float y = 0;

        for (int j = 0; j < matrixSize; j++) {
             y += matrix[matrixSize][j]*pow(i, j);
        }

        CGContextAddLineToPoint(context, i*100 + 100, y*100 + 100);   
    }

    CGContextStrokePath(context);

    [GraphicsContext restoreGraphicsState];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:10:03.303

您没有为矩阵分配足够的内存。此行设置了整个数据区域，但您只分配`matrixSize+1`了元素，而不是`matrixSize*(matrixSize+1)`：

```
temp = (float*)calloc(matrixSize+1, sizeof(float)); 
```

因此，维护`matrixSize+1`列和`matrixSize`行：

```
matrix = (float**)calloc(matrixSize, sizeof(float*));
temp = (float*)calloc(matrixSize * (matrixSize+1), sizeof(float));

for (int i = 0; i < matrixSize; i++) {
    matrix[i] = temp + (i*(matrixSize+1));
} 
```

当你以后使用它时，要小心。你说错了：

```
for (int j = 0; j < matrixSize; j++) {
    for (int i = 0; i < matrixSize+1; i++) {
        if (i == (matrixSize)) {
            matrix[i][j] = points[j].y;
        }
        else {
            matrix[i][j] = pow(points[j].x, (matrixSize-1)-i);
        }
    }
} 
```

请注意，`i`转到`matrixSize+1`但您将其用作行索引（只有`matrixSize`行）。我认为您的意思是使用`matrix[j][i]`而不是`matrix[i][j]`. 您在构造初始矩阵时也这样做，但我实际上已将其更改为符合您的分配。

所以我看到你的程序中有两点缓冲区溢出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:07:25.420

EXC_BAD_ACCESS indicates one of your objects is being over-released (not to be confused with garbage collection) before invoking a method on it. Once you reach the point in your code where you invoke the method on the collected object, the pointer is referencing an invalid memory location.

To find Zombie objects have a look at this: [How to Enable NSZombie in XCode](https://stackoverflow.com/questions/5386160/how-to-enable-nszombie-in-xcode)

I've used this and it works very well.

# android - 在android中配对蓝牙设备的正确顺序是什么？

> ID：13057704
> 
> 赞同：3
> 
> 时间：2012-10-24T21:03:52.030
> 
> 标签：android, bluetooth

我正在通过应用程序将客户端蓝牙设备与我的手机配对。现在我在 asynctask 中使用以下代码来尝试为远程设备创建一个套接字。

```
try{
    ba.cancelDiscovery();
    socket= blud.createRfcommSocketToServiceRecord(uuid);
    Method m = blud.getClass().getMethod("createRfcommSocket", new                  
    Class[] {int.class});
    socket = (BluetoothSocket) m.invoke(blud, 1);
}catch(Exception e){e.printStackTrace();} 
```

我不知道我是否需要更多地遵循 BluetoothChat 示例，其中我有一个连接线程和一个接受线程，或者 asynctasks 是否足够。

这是我正在使用的 UUID 字符串 00001101-0000-1000-8000-00805F9B34FB 我操作的顺序是我在服务器端监听，一旦我尝试打开蓝牙设备的套接字，我尝试连接但是最终得到一个 Permission Denied IO 异常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-08T07:04:59.250

对于蓝牙权限，在 android 清单文件中添加以下内容 -

```
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
<uses-permission android:name="android.permission.BLUETOOTH" /> 
```

要创建债券，请使用 -

```
public boolean createBond(BluetoothDevice btDevice)  
    throws Exception  
    { 
        Class class1 = Class.forName("android.bluetooth.BluetoothDevice");
        Method createBondMethod = class1.getMethod("createBond");  
        Boolean returnValue = (Boolean) createBondMethod.invoke(btDevice);  
        return returnValue.booleanValue();  
    } 
```

创建套接字 -

```
private BluetoothSocket createBluetoothSocket(BluetoothDevice device) throws IOException {
        if(Build.VERSION.SDK_INT >= 10){
            try {
                final Method  m = device.getClass().getMethod("createInsecureRfcommSocketToServiceRecord", new Class[] { UUID.class });
                return (BluetoothSocket) m.invoke(device, my_UUID);
            } catch (Exception e) {
                Log.e("No Connection Created", "Could not create Insecure RFComm Connection",e);
            }
        }
        return  device.createRfcommSocketToServiceRecord(my_UUID);
    } 
```

还要检查来自 android 开发者文档的[蓝牙适配器。](http://developer.android.com/reference/android/bluetooth/BluetoothAdapter.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T22:21:53.150

您需要在您的清单中请求蓝牙权限和 BLUETOOTH_ADMIN 权限，如 Android API[此处所述](http://developer.android.com/reference/android/bluetooth/BluetoothAdapter.html)

“注意：大多数方法需要 BLUETOOTH 权限，有些还需要 BLUETOOTH_ADMIN 权限。”

# fluent-nhibernate-mapping - 如何在当前实体中使用多个属性引用一行？

> ID：13057708
> 
> 赞同：1
> 
> 时间：2012-10-24T21:03:55.267
> 
> 标签：fluent-nhibernate-mapping

我需要引用表中的一行，而不是通过其主键，而是通过另外两列。如何在 fluent-nhibernate 中配置它？

我正在使用 FluentNHibernate 1.3

示例：如果另一个表 YY 有列 foo 和 bar（假设数据类型是整数，如果有帮助的话）它们*不是*主键。我当前的 XX 类具有这些属性，我想从 XX 引用一个 YY 对象。`ClassMap<XX>`如果本地成员是 YYObject 并且引用它的字段是 XX.foo 和 XX.bar ，我应该在类中添加以下内容吗？

```
CompositeId(x => x.YYObject).KeyProperty(x => x.foo).KeyProperty(x => x.bar); 
```

我也不太确定`ClassMap<YY>`应该如何相应地调整课程。如果你做过这样的事情，我们可以使用一些指导。

我们正在处理遗留问题，所以我不能挥手让这一切消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T11:41:00.917

如果可能的话，围绕这两个属性定义一个组件

```
Component(x => x.Comp, c =>
{
    c.Map(x => x.Foo);
    c.Map(x => x.Bar);
}); 
```

并参考它

```
References(x => x.ParentObject)
    .KeyColumns.Add("parent_foo", "parent_bar");
    .PropertyRef(p => p.Comp); 
```

# ios - “fb:explicitly_shared”和“no_feed_story”参数有什么区别？

> ID：13057713
> 
> 赞同：0
> 
> 时间：2012-10-24T21:04:16.590
> 
> 标签：ios, facebook, facebook-graph-api, mobile, facebook-opengraph

我看到在 Facebook 开发者文档中提到了两个不同但看似相关的参数：`fb:explicitly_shared`和`no_feed_story`

此处记录了 Explicity_shared 参数： [https ://developers.facebook.com/docs/opengraph/explicit_sharing/](https://developers.facebook.com/docs/opengraph/explicit_sharing/)

“no_feed_story”参数在很多地方都被提及，包括这篇博文： [https ://developers.facebook.com/docs/opengraph/opengraph-approval/](https://developers.facebook.com/docs/opengraph/opengraph-approval/)

这些参数有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T06:53:45.387

我注意到，如果您包含`no_feed_story=true`它会抑制来自ticker和feed的活动，而如果您设置，`fb:explicitly_shared=true`那么您的活动将在您的时间轴上作为帖子以及在活动块中明确可见，如果`fb:explicitly_shared=false`或未提及，则活动仅显示在时间线上的活动块。我看不出两者之间有任何关联。

# html - How to run a hexagon css overlay on image in wordpress

> ID：13057720
> 
> 赞同：2
> 
> 时间：2012-10-24T21:05:16.560
> 
> 标签：html, image, css

> **Possible Duplicate:**
> [html/css hexagon with image inside](https://stackoverflow.com/questions/7433454/html-css-hexagon-with-image-inside)

I'm using a theme that allows the CSS to create a circle with a border around the images of team member photos and I was trying out different ways to create a hexagon instead with a border. I couldn't achieve the border though. So now I'm wondering if it would be easier (or possible - running into a lot of dead ends) to place an image with a hexagon shape cut out of the center with transparency and somehow positioning that over any loaded images?

The only downside I've found to trying absolute positioning is that it seems to through off the responsiveness of the site when viewed in mobile.

Here's the site theme with the circles - [http://themes.codehunk.me/wp/infringe/shortcodes/team-clients/](http://themes.codehunk.me/wp/infringe/shortcodes/team-clients/)

This is my site with the image overlay - [http://splendidangst.com/about-us/](http://splendidangst.com/about-us/)

# php - Wordpress Url re-writing

> ID：13057725
> 
> 赞同：1
> 
> 时间：2012-10-24T21:05:49.517
> 
> 标签：php, regex, wordpress

So I have a Wordpress page here:

[http://12.ourgreenville.com/real_estate/](http://12.ourgreenville.com/real_estate/)

I want to be able to place two variable (city/state) in the URL, then work with them. A URL would look like this:

[http://12.ourgreenville.com/real_estate/1/2/](http://12.ourgreenville.com/real_estate/1/2/)

Please let me know what is needed. I placed your code in functions.php as follows:

```
function add_rewrite_rules( $wp_rewrite )
{
    $new_rules = array(
                     '('.$template_page_name.')/real_estate/(.*?)/?([0-9]{1,})/?$' =>'index.php?p=5351city='.$wp_rewrite->preg_index(1).'&state='.$wp_rewrite->preg_index(2)
                 );

 $wp_rewrite->rules = $new_rules + $wp_rewrite->rules;
}
add_action('generate_rewrite_rules', 'add_rewrite_rules');

function query_vars($public_query_vars) {

    $public_query_vars[] = "city";
    $public_query_vars[] = "state";
    return $public_query_vars;
}
add_filter('query_vars', 'query_vars'); 
```

I don't know what i am doing wrong.kindly help me.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:23:29.910

您错过了一个非常重要的步骤 - 刷新规则以激活您对它们的更改。这是我的工作变体，适用于您的情况：

```
add_action('init', 'prefix_attach_page_rules');
add_filter('query_vars', 'prefix_attach_page_query_vars');
add_action('parse_request', 'prefix_attach_page_request');

function prefix_attach_page_rules()
{
    add_rewrite_rule('^' . urlencode(get_option('non_latin_data')) . '/(\d+)/(\d+)/?$', 'index.php?prefix_view=my_special_id&prefix_city_=$matches[1]&prefix_state=$matches[2]', 'top');

    flush_rewrite_rules(); // IMPORTANT
}

function prefix_attach_page_query_vars($query_vars)
{   
    $query_vars[] = 'prefix_city';
    $query_vars[] = 'prefix_state';  
    return $query_vars;
}

function prefix_attach_page_request(&$wp)
{
    // If the page request is really from our rewrite url
    if(!array_key_exists('prefix_view', $wp->query_vars))
        return;

    $city= $wp->query_vars['prefix_city'];
    $state = $wp->query_vars['prefix_state'];

    // we are on the rewrite rule
    exit; // in case very custom page like include
} 
```

前缀，在您的程序实施的情况下非常重要。你可以放置任何你喜欢的东西，但它可以让你避免重复常用名称的情况。

使用您应该能够使用的选定操作或过滤器并不是完全必要的，但重要的是使您的规则具有更高的优先级（顶部）并刷新规则。

`prefix_attach_page_rules`会告诉 Wordpress 我们的规则

`prefix_attach_page_request`在这种情况下，通过给定的查询变量解析请求时，将完成我们的工作。

还有另一个 StackOverflow：[WordPress Answers](https://wordpress.stackexchange.com/) - 专门用于 WordPress，您也可以在那里找到许多解决方案。

附加（基于评论链接的正则表达式）：

```
add_rewrite_rule('^real_estate/(\d+)/(\d+)/?$', 'index.php?prefix_view=real_estate&real_estate_city_id=$matches[1]&real_estate_state_id=$matches[2]', 'top'); 
```

然后你应该搜索它们`real_estate_city_id`并`real_estate_state_id`在查询变量和 page_request ...

# perl - Perl 无法识别包

> ID：13057727
> 
> 赞同：1
> 
> 时间：2012-10-24T21:05:59.290
> 
> 标签：perl

我以搜索方式创建了构建脚本，它将所有项目依赖项放在目标文件夹中。此目标文件夹将位于项目根目录中。此目标文件夹包含 bin、lib 文件夹。在 lib 文件夹中，所有依赖项都在那里。

我已将路径搜索设置为：

```
export PERL5LIB="$PWD/target/lib/perl5:$PWD/target/lib/perl5/x86_64-linux:$PWD/targer/lib/perl5/x86_64-linux-gnu-thread-multi" 
```

当我构建我的项目时，它会引发以下错误。

> > 无法在 @INC 中找到 Clone.pm（@INC 包含：lib /home/smopuru/pigeon/target/lib/perl5 /home/smopuru/pigeon/target/lib/perl5/x86_64-linux /home/smopuru/pigeon /targeter/lib/perl5/x86_64-linux-gnu-thread-multi lib /home/smopuru/pigeon/target/lib/perl5 /home/smopuru/pigeon/target/lib/perl5/x86_64-linux /home/smopuru/ pigeon/targeter/lib/perl5/x86_64-linux-gnu-thread-multi /home/smopuru/pigeon/target/lib/site_perl/5.14.2/x86_64-linux /home/smopuru/pigeon/target/lib/site_perl/ 5.14.2 /home/smopuru/pigeon/target/lib/5.14.2/x86_64-linux /home/smopuru/pigeon/target/lib/5.14.2 .) 在 lib/Pigeon/Compiler.pm 第 29 行，<> 1号线。
> > 
> > 无法在 @INC 中找到 Mouse.pm（@INC 包含：lib /home/smopuru/pigeon/target/lib/perl5 /home/smopuru/pigeon/target/lib/perl5/x86_64-linux /home/smopuru/pigeon /targeter/lib/perl5/x86_64-linux-gnu-thread-multi lib /home/smopuru/pigeon/target/lib/perl5 /home/smopuru/pigeon/target/lib/perl5/x86_64-linux /home/smopuru/ pigeon/targeter/lib/perl5/x86_64-linux-gnu-thread-multi /home/smopuru/pigeon/target/lib/site_perl/5.14.2/x86_64-linux /home/smopuru/pigeon/target/lib/site_perl/ 5.14.2 /home/smopuru/pigeon/target/lib/5.14.2/x86_64-linux /home/smopuru/pigeon/target/lib/5.14.2 .) 在 lib/Pigeon/Compiler.pm 第 29 行，<> 1号线。

我确信这两个文件是可用的。我用来搜索的命令：

```
find target/lib/ -name Clone.pm target/lib/perl5/x86_64-linux-gnu-thread-multi/Clone.pm
find target/lib/ -name Mouse.pm target/lib/perl5/x86_64-linux-gnu-thread-multi/Mouse.pm target/lib/perl5/x86_64-linux-gnu-thread-multi/Test/Mouse.pm 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:17:40.457

1.  你有一个错字`PERL5LIB`- 你在其中一条路径上有“目标”而不是“目标”。这就是 Clone.pm 错过的原因。

2.  Mouse.pm 在`.../something/in/your/path/Test/`而不是`.../something/in/your/path`意味着您需要`use Test::Mouse;`在脚本中或将 Mouse.pm 文件上移到文件系统中的一个目录。

# wcf-data-services - Visual Studio service reference doesn't work, but DataSvcUtil does

> ID：13057732
> 
> 赞同：1
> 
> 时间：2012-10-24T21:06:16.250
> 
> 标签：wcf-data-services

I have Visual Studio 2010\. If I try to add a service reference to my project I get the error

```
This service cannot be consumed by the current project. Please check if the project target framework supports this service type. 
```

But if I run DataSvcUtil on the same endpoint, it works fine.

The thing is that when Visual Studio generates the reference, it generates `Reference.cs`, `Reference.datasvcmap`, and `service.edmx` (I know this because the files used to be there, I deleted the reference to try to re-generate it and am running into this issue). If I use the command line tool, I only get `myfile.cs` (or whatever I named the output file).

Why would this be the case?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T10:14:38.657

您在 WCF 数据服务中使用的 OData 库是否比 VS2010 附带的更新版本？如果是这样，您可能需要升级到 VS2012 ...

# ruby-on-rails - Using Ruby to Parse through JSON when the JSON object is nested?

> ID：13057736
> 
> 赞同：2
> 
> 时间：2012-10-24T21:06:32.120
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, json

I have a JSON object that is posted to my rails controller. For some reason Rails is unable to parse the JSON object.

This is resulting in null: `Rails.logger.info params[:payload]["commits"]`

Here is the rails code:

```
before_filter :set_payload

def create
    params[:payload] = @payload
    Rails.logger.info params[:payload]["commits"]
 .........

protected

  def set_payload
    @payload = {
      "data" => {
        "api_version" => "2.0.alpha1",
        "username" => "jamie.winsor",
        "password" => "passw0rd",
        "server_url" => "http://jira"
      },

      "payload" => {
        "after"   => "a47fd41f3aa4610ea527dcc1669dfdb9c15c5425",
        "ref"     => "refs/heads/master",
        "before"  => "4c8124ffcf4039d292442eeccabdeca5af5c5017",
        "compare" => "http://github.com/mojombo/grit/compare/4c8124ffcf4039d292442eeccabdeca5af5c5017...a47fd41f3aa4610ea527dcc1669dfdb9c15c5425",
        "forced"  => false,
        "created" => false,
        "deleted" => false,

        "repository" => {
          "name"  => "grit",
          "url"   => "http://github.com/mojombo/grit",
          "owner" => { "name" => "mojombo", "email" => "tom@mojombo.com" }
        },

        "pusher" => {
          "name" => "rtomayko"
        },

        "commits" => [
          {
            "distinct"  => true,
            "removed"   => [],
            "message"   => "[#WEB-249 status:31 resolution:1] stub git call for Grit#heads test",
            "added"     => [],
            "timestamp" => "2007-10-10T00:11:02-07:00",
            "modified"  => ["lib/grit/grit.rb", "test/helper.rb", "test/test_grit.rb"],
            "url"       => "http://github.com/mojombo/grit/commit/06f63b43050935962f84fe54473a7c5de7977325",
            "author"    => { "name" => "Tom Preston-Werner", "email" => "tom@mojombo.com" },
            "id"        => "06f63b43050935962f84fe54473a7c5de7977325"
          },
          {
            "distinct"  => true,
            "removed"   => [],
            "message"   => "clean up heads test",
            "added"     => [],
            "timestamp" => "2007-10-10T00:18:20-07:00",
            "modified"  => ["test/test_grit.rb"],
            "url"       => "http://github.com/mojombo/grit/commit/5057e76a11abd02e83b7d3d3171c4b68d9c88480",
            "author"    => { "name" => "Tom Preston-Werner", "email" => "tom@mojombo.com" },
            "id"        => "5057e76a11abd02e83b7d3d3171c4b68d9c88480"
          },
          {
            "distinct"  => true,
            "removed"   => [],
            "message"   => "add more comments throughout",
            "added"     => [],
            "timestamp" => "2007-10-10T00:50:39-07:00",
            "modified"  => ["lib/grit.rb", "lib/grit/commit.rb", "lib/grit/grit.rb"],
            "url"       => "http://github.com/mojombo/grit/commit/a47fd41f3aa4610ea527dcc1669dfdb9c15c5425",
            "author"    => { "name" => "Tom Preston-Werner", "email" => "tom@mojombo.com" },
            "id"        => "a47fd41f3aa4610ea527dcc1669dfdb9c15c5425"
          }
        ]
      }
    }

  end

end 
```

Any ideas why nil is being returned? Am I handling the JSON object incorrectly? Thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T21:08:33.253

您使用了错误的路径到您想要的元素。您需要以以下方式访问它：

```
params[:payload]["payload"]["commits"] 
```

# html - 如何使任意数量的 div 水平并排站立并平均划分整个页面宽度？

> ID：13057739
> 
> 赞同：0
> 
> 时间：2012-10-24T21:06:44.313
> 
> 标签：html, css

如何使任意数量的 div 在包装 div 中水平并排站立，并确保它们填充整个页面宽度**而不固定包装的 div 宽度**（就像 html 表格列在将表格宽度设置为 100% 时的行为一样）？

并且尽可能跨浏览器...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:35:01.320

这似乎有效。它使用 jquery，这使得它尽可能跨浏览器：

[http://jsfiddle.net/AmnsD/](http://jsfiddle.net/AmnsD/)

哇，所以不允许只链接到 jsfiddle：所以这是示例：

```
<style>
.inner1{background-color:#FF0000;float:left;height:25px;}
.inner2{background-color:#00FF00;float:left;height:25px;}
.inner3{background-color:#0000FF;float:left;height:25px;}
.inner4{background-color:#FFFF00;float:left;height:25px;}
</style>

<script>
$(document).ready(function(){
    $('#outer').children().each(function(index){
        $(this).css('width',100/$('#outer').children().length + '%');
    });
});​
</script>

<div id="outer">
    <div class="inner1">
        &nbsp;
    </div>
    <div class="inner2">
        &nbsp;
    </div>
    <div class="inner3">
        &nbsp;
    </div>
    <div class="inner4">
        &nbsp;
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T21:47:18.773

这有点作弊，但您可以像这样使用 display:table-cell 来做到这一点；

```
<style type="text/css" media="screen">
    body {
        margin:0;
        padding:0;
    }

    #wrap {
        background:black;
        display:table;
        padding:10px 0;
        width:100%;
    }
    .box {
        height:100px;
        display:table-cell;
    }

    .a {
        background:red;
    }

    .b {
        background:blue;
    }

    .c {
        background:green;
    }

    .d {
        background:yellow;
    }
 </style> 
```

和 HTML 一样；

```
<div id="wrap">
    <div class="box a">a</div>
    <div class="box b">b</div>
    <div class="box c">c</div>
    <div class="box d">d</div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T21:38:02.343

我认为这可能是你正在寻找的：[http ://umaar.github.com/css-flexbox-demo/](http://umaar.github.com/css-flexbox-demo/)

编辑：这是现在非常跨浏览器的悬停（不适用于 ie9-）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T22:04:35.137

您的问题将使用响应式网页设计和媒体查询来解决。

# java - PrintWriter 不发送我的字符串 (TCP/IP)

> ID：13057740
> 
> 赞同：0
> 
> 时间：2012-10-24T21:06:45.467
> 
> 标签：java, tcp, ip, printwriter

我正在制作一个具有基本聊天功能的 Java 小程序（您可以发送/接收消息）。我已经创建了一个单独的线程来处理客户端版本上的连接，并且服务器还为每个连接的客户端创建了一个线程。

在客户端的 run() 方法中，我有一个 while 循环来读取收到的任何消息：

```
while (state == ConnectionState.CONNECTED) {
   out.println("Hello Server");
   out.flush();
   String input = in.readLine();
   System.out.println(input);
   if(input == null){
      connectionClosedFromOtherSide();
   }
   else {
      received(input);
      System.out.println(String.format("Recieved something: %s", input));
   }
} 
```

这是我的 PrintWriter 和我的 BufferedReader。出于调试目的，我将“hello server”放在这里。此代码工作正常，但问题是 sendtext() 方法：

```
synchronized private void sendText(String tosend) {
   if(out != null && state == ConnectionState.CONNECTED){
      out.print(tosend);
      out.flush();
      System.out.println(String.format("sending %s to server", tosend));
   }
} 
```

出于某种原因，如果我调用此方法，它不会在服务器端收到。（但是控制台确实显示它已发送）

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:18:20.027

客户端，每个

```
String input = in.readLine(); // read until newline 
```

在服务器端，应该由

```
out.println( tosend ); // print the newline expected by the client 
```

`out.flush()`不要发送换行符。

# python - KeyError：连接到 Mongodb 副本集（电机、pymongo、龙卷风）时“从空集中弹出”

> ID：13057742
> 
> 赞同：1
> 
> 时间：2012-10-24T21:06:46.950
> 
> 标签：python, mongodb, replication, tornado, tornado-motor

我正在以下列方式连接到运行 mongoDB 的 3 节点副本集：

```
DB = motor.MotorReplicaSetConnection("mongodb://user:pass@ip_address:27017", replicaSet='repl_set_name').open_sync().collection_name 
```

当 PRIMARY 出现故障时，我的副本集运行良好，另一个接管。但是当我这样做时，我的 Tornado 服务器`KeyError: 'pop from an empty set'`在重新连接时会抛出错误。Tornado/Motor 似乎无法重新连接到新的 PRIMARY 节点，我不知道为什么。即使我添加/替换主机：端口到连接字符串，我仍然没有得到任何结果。这有关系`read_preference`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T22:37:10.690

LR 和我一直在私下调试这个，我认为奇怪的错误消息是这个 Tornado 错误的结果：

[https://github.com/facebook/tornado/issues/651](https://github.com/facebook/tornado/issues/651)

...我已经解决了这个对 Motor 的承诺：

[https://github.com/ajdavis/mongo-python-driver/commit/c7c1614bbf27c3a02ac8c582a8815dee59c39280](https://github.com/ajdavis/mongo-python-driver/commit/c7c1614bbf27c3a02ac8c582a8815dee59c39280)

根据您的测试，听起来 MotorReplicaSetConnection实际上**可以**在新的主节点成为主节点后不久重新连接到它，如果不是这种情况，请再次给我发电子邮件。

# symfony - Notice: Undefined index in vendor\doctrine\orm\lib\Doctrine\ORM\UnitOfWork.php line 2735 (Symfony 2.1)

> ID：13057745
> 
> 赞同：3
> 
> 时间：2012-10-24T21:07:01.723
> 
> 标签：symfony, doctrine-orm

I have got two entities associated with OneToOne association. This is how it all looks like:

```
/**
 * @ORM\Entity
 * @ORM\HasLifecycleCallbacks()
 * @ORM\Table(name="a")
 */
class A
{
....

    /**
     * @ORM\OneToOne(targetEntity="B", cascade={"all"}, orphanRemoval=true)
     * @ORM\JoinColumn(name="b_id", referencedColumnName="id", nullable=true)
     */
    private $b;
}
/**
 * @ORM\Entity
 * @ORM\Table(name="b")
 */
class B
{
....
    /**
     * @ORM\Column(type="string", length=20)
     */
    protected $type;

    /**
     * @ORM\Column(type="integer")
     */
    protected $aId;        
} 
```

What I am trying to do is to crate lifeCycleCallback preUpdate on A class. While calling preUpdate A class already has its on ID. I have tried to do something like this:

```
/**
 * @ORM\PreUpdate
 */
public function update()
{
    if (is_null($this->getB()))
        $this->b = new B();
    $this->b->setAId($this->id)->setType('A'/* classname */);
} 
```

B class has to store classname in type filed and object id in aId field. I cannot use foreign keys here.

The problem is that the above update function returns this error:

> Notice: Undefined index: 000000006914b7950000000033b7b784 in C:...\vendor\doctrine\orm\lib\Doctrine\ORM\UnitOfWork.php line 2735

Any ideas what this error means and how to solve it?

**EDIT** This is how I fetch A object before passing it to edit form:

```
$this->getEntityManager()
                    ->createQueryBuilder()
                    ->select('a,b')
                    ->from('MyBundle:A', 'a')
                    ->leftJoin('a.b','b')
                    ->where('a.id = :aId')
                    ->setParameter('aId', $id)
                    ->getQuery()->getSingleResult(); 
```

I do edit only A object (in form) and want to create associated B object on first A update and make some changes to this B object on every next update of A.

**EDIT2** The above error no longer displays. However changes made to B object in `@ORM\PreUpdate` of A object are never persisted even when association to be has `cascade={"all"}`. Here is the example:

```
/**
 * inside A class !
 *
 * @ORM\PreUpdate
 */
public function update()
{
    $this->lastModified = new \DateTime();        
    $this->getB()
            ->setSomething('something'); // <-- this is never stored to db by cascade 
} 
```

# java - Java ME 中的二进制消息有多可靠

> ID：13057750
> 
> 赞同：3
> 
> 时间：2012-10-24T21:07:21.677
> 
> 标签：java, java-me

我将为 Java ME 平台开发一个移动应用程序，用于发送包含二进制数据的 SMS 消息。但是，该应用程序将使用自定义端口来发送这些消息（以便它可以注册自己并自动接收这些消息，而不是电话的标准消息传递系统）。

我的问题是：

1) 全球移动网络是否广泛支持 BinaryMessages 到自定义端口？还是只有少数电信运营商才能做到的“奢侈”？

2) 当文本超过单个消息的限制时，普通的 TextMessages 往往会被分解为多个部分。BinaryMessages 是否以同样的方式处理，如果是，我该如何处理我的应用程序中的这个问题（碎片）？显然，消息的一部分将无法完成工作，理想情况下，我希望在收到所有部分后得到完整的消息。这取决于运营商网络吗？

我意识到我可以对此进行测试，但我无法在许多电信公司上运行测试，只有我（小）国家的电信公司，这对于是否应该开发这个应用程序至关重要。

我试图自己寻找答案，但我失败了。对不起，如果这些是微不足道的问题，感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T19:30:35.857

我觉得这个问题没有错。不过，我只能提供一个半答案。

确实，由各个网络提供商来选择是否要保持所有端口打开。因此，您不能假设始终可以发送/接收文本消息或二进制消息。但是，很久以前，另一位 JavaME 开发人员告诉我，他们关闭端口是非常不寻常的。（对于许多其他协议（例如套接字和http）使用的端口不是相同的吗？如果是，那么它们肯定总是打开的。关闭它们没有任何意义）。

如果我是你，我会添加一些代码来检查是否发送了消息，然后在失败时向用户输出一些错误消息。（如果可能，也可以调用一些 URL 作为向您报告错误的一种方式）。

关于分解的消息，这是一个很好的问题。我不知道。我会做一些真实的设备测试来找出答案。

# c# - 使用 C# API 在 Facebook 中创建事件时出现 TargetParameterCountException

> ID：13057763
> 
> 赞同：1
> 
> 时间：2012-10-24T21:08:00.853
> 
> 标签：c#, facebook, facebook-c#-sdk

我正在使用[C# SDK](http://csharpsdk.org/)发布事件。我已经填写了基本的事件参数，并使用 Graph API explorer 测试了这些参数。但是，当我调用 PostTaskAsync 时：

```
var parameters = new Dictionary<string, string>
    {
        { "name", "Random" },
        { "start_time", "2012-11-11" },
    };

fb.PostTaskAsync("me/events", parameters); 
```

我遇到了 TargetParameterCountException。谁能解释我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-26T19:02:44.830

Facebook c# sdk 需要类型实现接口

```
IDictionary<string, object> 
```

请参阅 sdk 版本 6.4.2 中的 FacebookClient.cs 文件。ToDictionary() 方法内部有一个演员表：

```
var dictionary = parameters as IDictionary<string, object>; 
```

此转换产生 null 并且 sdk 无法将您的字典类型转换为预期的字典类型。

更改代码以将您的字典更新为正确的类型，您的代码应该可以工作！

# bash - SIGINT 取消在 bash 脚本中读取？

> ID：13057771
> 
> 赞同：6
> 
> 时间：2012-10-24T21:08:46.577
> 
> 标签：bash, sigint

我正在编写一个 bash 包装器来学习一些脚本概念。这个想法是在 bash 中编写一个脚本，并在登录时将其设置为用户的 shell。

我做了一个 while 循环`read`s 和`eval`s 用户的输入，然后注意到，每当用户键入`CTRL + C`时，脚本都会中止，因此用户会话结束。

为了避免这种情况，我陷入`SIGINT`了陷阱，在陷阱中什么也不做。

现在，问题是当您键入`CTRL + C`命令的一半时，它不会像在 bash 上那样被取消 - 它只是忽略`CTRL + C`.

所以，如果我输入`ping stockoverf^Cping stackoverflow.com`，我得到`ping stockoverfping stackoverflow.com`的不是`ping stackoverflow.com`我想要的。

有没有办法做到这一点？

```
#!/bin/bash

# let's trap SIGINT (CTRL + C)
trap "" SIGINT

while true
do
    read -e -p "$USER - SHIELD: `pwd`> " command
    history -s $command
    eval $command
done 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T22:34:37.097

您可以使用 xdotool 之类的工具发送 Ctrl-A（行首） Ctrl-K（删除到行尾） Return（清理行）

```
#!/bin/bash
trap "xdotool key Ctrl+A Ctrl+k Return" SIGINT;
unset command
while [ "$command" != "quit" ] ;do
    eval $command
    read -e -p "$USER - SHIELD: `pwd`> " command
  done
trap SIGINT 
```

但我强烈邀请你到 rtfm... 在搜索 ``debug'' 关键字...

```
man -Pless\ +/debug bash 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-09-02T21:28:14.477

我知道这已经很老了，但我一直在努力做这样的事情并想出了这个解决方案。希望它可以帮助别人！

```
#/usr/bin/env bash
# Works ok when it is invoked as a bash script, but not when sourced!
function reset_cursor(){
    echo
}
trap reset_cursor INT
while true; do
    command=$( if read -e -p "> " line ; then echo "$line"; else echo "quit"; fi )
    if [[ "$command" == "quit" ]] ; then
        exit
    else
        history -s $command
        eval "$command"
    fi
done
trap SIGINT 
```

通过将读取放入子shell，您可以确保它会被 sigint 信号杀死。如果您在该信号渗透到父级时捕获该信号，则可以在那里忽略它并移至下一个 while 循环。您不必将 reset_cursor 作为其自己的功能，但如果您想做更复杂的事情，我觉得它很好。

我必须在子 shell 中添加 if 语句，否则它会忽略 ctrl+d - 但我们希望它能够“注销我们”而不强制用户键入 exit 或手动退出。

# android - 动态生成的 LinearLayouts 重叠

> ID：13057773
> 
> 赞同：1
> 
> 时间：2012-10-24T21:08:50.723
> 
> 标签：android, android-layout

我是 Android 开发的新手，我还在学习 Java，所以要温柔！

我正在创建一个应用程序，它可以获取有关任务的信息（我基于一种家庭作业计划器），存储该信息，然后将其显示在列表中。程序必须能够从后台文件动态生成列表。到目前为止，我已经管理了所有这些，但是当我为每个任务创建一个基本输出时，使用 LinearLayout 包含“主题”和“详细信息”变量，它们出现在屏幕上重叠。他们似乎都在正确地创建，但他们都被放在同一个地方。是否可以设置属性以使它们显示在垂直列表中？？？

这是我生成视图组并显示它们的代码。这是从程序另一部分的循环中调用的，该部分查找内部存储中的文件数。

```
 TextView subjView;
    TextView detailView;
    RelativeLayout displayLayout;

    LinearLayout taskDisplay = new LinearLayout(this);
    LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(
                LinearLayout.LayoutParams.WRAP_CONTENT,
                LinearLayout.LayoutParams.WRAP_CONTENT);

    subjView = new TextView(this);      
    detailView = new TextView(this);
    displayLayout = (RelativeLayout) findViewById(R.id.relative_display_layout);

    subjView.setText(subject);
    detailView.setText(details);

    layoutParams.setMargins(0, 0, 0, 0);
    taskDisplay.addView(subjView, layoutParams);

    layoutParams.setMargins(10, 0, 0, 0);
    taskDisplay.addView(detailView, layoutParams);

    displayLayout.addView(taskDisplay); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:46:51.640

如果我理解正确，我认为您的问题只是您要声明然后更改将`layoutParams`它们设置为相同的边距，这与您的`TextViews`.

* * *

**编辑**

好的，我仍然不是 100% 确定你是如何做这一切的，所以我的例子可能需要调整。我试图快速把它放在一起，所以请原谅我的任何小错误。

动态布局的新模型：

```
TextView subjView, detailView;
RelativeLayout displayLayout, rl;

// I am assuming this is your main layout
displayLayout = (RelativeLayout) findViewById(R.id.relative_display_layout);

// Just using a for loop as an example of a loop event, not sure how you are accomplishing this
for(int i = 0; i < data.length(); i++) {

    RelativeLayout.LayoutParams rllp = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.MATCH_PARENT, 100);

    if (i > 0) {
        int rePositionRule = i;
        rllp.addRule(RelativeLayout.BELOW, rePositionRule);
    }

    RelativeLayout taskDisplay = new RelativeLayout(this);

    taskDisplay.setLayoutParams(rllp);
    LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(
            LinearLayout.LayoutParams.WRAP_CONTENT,
            LinearLayout.LayoutParams.WRAP_CONTENT);
    layoutParams.setMargins(0, 0, 0, 0);

    LinearLayout.LayoutParams layoutParams2 = new LinearLayout.LayoutParams(
            LinearLayout.LayoutParams.WRAP_CONTENT,
            LinearLayout.LayoutParams.WRAP_CONTENT);
    layoutParams2.setMargins(10, 0, 0, 0);

    subjView = new TextView(this);      
    detailView = new TextView(this);

    subjView.setText(subject);
    subjView.setLayoutParams(layoutParams);
    detailView.setText(details);
    detailView.setLayoutParams(layoutParams2);

    taskDisplay.addView(subjView);
    taskDisplay.addView(detailView);

    displayLayout.addView(taskDisplay);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:30:12.287

您的 displayLayout 是一个 relativeLayout.. 一个相对布局，顾名思义，将元素彼此相对放置。通常你会说“元素 A 应该低于元素 B”等等。由于你没有为你正在创建的项目提供任何这些规则，它们只是将全部转到相对布局中的默认位置（即屏幕顶部..因此重叠）

如果您不想处理更改代码以相对放置事物的麻烦，只需在 xml 和代码中将 displayLayout 切换为 LinearLayout 并将其方向设置为垂直。如果它跑出屏幕，您可能希望将其包装在滚动视图中

但是，听起来您真正想要的是 ListView ......

# sockets - 带有预先创建的 ServerSocket 的 Netty Channel 引导程序

> ID：13057775
> 
> 赞同：1
> 
> 时间：2012-10-24T21:09:04.093
> 
> 标签：sockets, netty, bootstrapping

目前，您可以使用 SocketAddress 引导 Netty 来创建通道工厂。为了与 JBoss AS7 紧密集成并使用它的托管套接字绑定，我需要使用已经创建的 ServerSocket 来引导 Netty 通道工厂。那可能吗？我没有找到任何相关的 API。

我正在尝试解决[https://community.jboss.org/thread/203485](https://community.jboss.org/thread/203485)

如果没有，我可以要求将其作为一项功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T05:28:48.660

In 4.x you will be able to create a Netty Channel from an existing NIO Channel. Is that what you are looking for:

[https://netty.io/Documentation/New+and+Noteworthy#HAbilitytocreateaChannelfromanexistingJDKsocket](https://netty.io/Documentation/New+and+Noteworthy#HAbilitytocreateaChannelfromanexistingJDKsocket)

Be aware that Netty 4 is still in Alpha state..

# r - 如何更改 heatmap.2 中的颜色键值？

> ID：13057777
> 
> 赞同：4
> 
> 时间：2012-10-24T21:09:06.340
> 
> 标签：r, heatmap

![在此处输入图像描述](../Images/b27d7444fa036a964da395911b73a027.png)

如上面的屏幕截图所示，我在`heatmap.2()`这里使用了该功能。

如何将颜色编码栏中的“**值”更改为****任何其他名称**？

可以只使用 gplots 包中的数据：

```
 library(gplots)

 data(mtcars)

 x  <- as.matrix(mtcars)

 rc <- rainbow(nrow(x), start=0, end=.3)

 cc <- rainbow(ncol(x), start=0, end=.3)

 heatmap.2(x, key=TRUE) 
```

非常感谢 ：-）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-12-24T19:39:56.370

自从@BondedDust 回答以来，功能 heatmap.2 可能已经改变，但现在可以通过以下方式轻松更改 heatmap.2 键标签：

`key.xlab="New value"`

**首先，您的代码**（使用标准颜色）：

```
library(gplots)
data(mtcars)
x  <- as.matrix(mtcars)
heatmap.2(x,key=TRUE) 
```

![钥匙截图前](../Images/766b66fc8d432282e6f1f427f73cd8f5.png)

**现在替换 x 和 y 标签：**

```
library(gplots)
data(mtcars)
x  <- as.matrix(mtcars)
heatmap.2(x, key=TRUE , key.xlab="New value", key.ylab="New count") 
```

![钥匙截图后](../Images/4cf5a9861b1a4d4c529c3ecf7ac89119.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T21:41:42.513

它是硬编码的。您需要在代码中更改它。它出现在绘制键的部分的中间，该行是：

```
else mtext(side = 1, "Value", line = 2) 
```

这是创建键的 heatmap.2 代码部分（至少到出现“值”一词的位置）：

```
 if (key) {
        par(mar = c(5, 4, 2, 1), cex = 0.75)
        tmpbreaks <- breaks
        if (symkey) {
            max.raw <- max(abs(c(x, breaks)), na.rm = TRUE)
            min.raw <- -max.raw
            tmpbreaks[1] <- -max(abs(x), na.rm = TRUE)
            tmpbreaks[length(tmpbreaks)] <- max(abs(x), na.rm = TRUE)
        }
        else {
            min.raw <- min(x, na.rm = TRUE)
            max.raw <- max(x, na.rm = TRUE)
        }
        z <- seq(min.raw, max.raw, length = length(col))
        image(z = matrix(z, ncol = 1), col = col, breaks = tmpbreaks, 
            xaxt = "n", yaxt = "n")
        par(usr = c(0, 1, 0, 1))
        lv <- pretty(breaks)
        xv <- scale01(as.numeric(lv), min.raw, max.raw)
        axis(1, at = xv, labels = lv)
        if (scale == "row") 
            mtext(side = 1, "Row Z-Score", line = 2)
        else if (scale == "column") 
            mtext(side = 1, "Column Z-Score", line = 2)
        else mtext(side = 1, "Value", line = 2)
 .... lots more code below 
```

您应该键入`heatmap.2`，然后将源代码复制到编辑器，然后使用搜索功能查找“值”。将“值”更改为其他内容（用引号括起来），然后键入`heatmap.2 <-`并粘贴代码并按回车键。（除非您保存它，否则它只会在会话继续时持续存在。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-07T18:00:51.333

最近刚遇到同样的任务。现在有一个选项“key.title”来设置刻度入口的标题：

```
library(gplots)
data(mtcars)
x  <- as.matrix(mtcars)
heatmap.2(x, key.title = "New Title", key.xlab="New value", key.ylab="New count") 
```

[![在此处输入图像描述](../Images/2a9efacc06b20ee8c70d9cea0d0bf0d2.png)](https://i.stack.imgur.com/xCSYE.png)

不幸的是，如果入口没有直方图，它就不能正确传播：

```
library(gplots)
data(mtcars)
x  <- as.matrix(mtcars)
heatmap.2(x, key.title = "New Title", key.xlab="New value", key.ylab="New count") 
```

[![在此处输入图像描述](../Images/f92087e16c39de570689062035e5d0fe.png)](https://i.stack.imgur.com/ycOne.png)

好吧，key.xlab 按预期工作，可以代替使用。

我已经检查了 github 上的源代码，它已经在那里修复了。

# javascript - jQuery 上下文减慢搜索速度

> ID：13057781
> 
> 赞同：2
> 
> 时间：2012-10-24T21:09:18.133
> 
> 标签：javascript, jquery, performance, jquery-selectors, jquery-context

> **可能重复：**
> [带有上下文的 jQuery 选择器的性能](https://stackoverflow.com/questions/2421782/performance-of-jquery-selector-with-context)

在[jQuery DOCS](http://api.jquery.com/jQuery/)中它说

> 默认情况下，选择器从文档根目录开始在 DOM 中执行搜索。但是，可以使用 $() 函数的可选第二个参数为搜索提供替代上下文。

基于此，我的理解是使用`context`传入作为第二个参数的选择应该比没有`context`传入的相同选择更快。但是我运行了一些测试，似乎情况并非如此，或者至少不是并非总是如此。

详细地说，我最初想看看一次搜索多个元素 ( `$("div1, #div2")`) 是否比单独搜索两个元素 ( ) 更快`$("#div1") $("div2")`。然后我决定用`context`和 不测试它，看看它用 的速度有多快`context`，但当事实证明`context`似乎在减慢速度时，我感到很惊讶。

例如，给出以下基本 HTML 标记

```
<div id="testCnt">
    <div id="Div0"></div>
    <div id="Div1"></div>
    <div id="Div2"></div>
    <div id="Div3"></div>
    <div id="Div4"></div>
    <div id="Div5"></div>
    <div id="Div6"></div>
    <div id="Div7"></div>
    <div id="Div8"></div>
    <div id="Div9"></div>
</div> 
```

以及以下 JavaScript（jQuery 1.8.2，并使用 FireBug 测试）

```
$(function () {    
    var $dvCnt = $('#testCnt');
    var dvCnt = $dvCnt[0];

    console.time('Individual without cache');
    for (var i = 0; i < 10000; i++) {
        $('#Div0').text('Test');
        $('#Div1').text('Test');
        $('#Div2').text('Test');
        $('#Div3').text('Test');
        $('#Div4').text('Test');
        $('#Div5').text('Test');
        $('#Div6').text('Test');
        $('#Div7').text('Test');
        $('#Div8').text('Test');
        $('#Div9').text('Test');

    }
    console.timeEnd('Individual without cache');

    console.time('Individual with $cache');
    for (var i = 0; i < 10000; i++) {
        $('#Div0', $dvCnt).text('Test');
        $('#Div1', $dvCnt).text('Test');
        $('#Div2', $dvCnt).text('Test');
        $('#Div3', $dvCnt).text('Test');
        $('#Div4', $dvCnt).text('Test');
        $('#Div5', $dvCnt).text('Test');
        $('#Div6', $dvCnt).text('Test');
        $('#Div7', $dvCnt).text('Test');
        $('#Div8', $dvCnt).text('Test');
        $('#Div9', $dvCnt).text('Test');

    }
    console.timeEnd('Individual with $cache');

    console.time('Individual with DOM cache');
    for (var i = 0; i < 10000; i++) {
        $('#Div0', dvCnt).text('Test');
        $('#Div1', dvCnt).text('Test');
        $('#Div2', dvCnt).text('Test');
        $('#Div3', dvCnt).text('Test');
        $('#Div4', dvCnt).text('Test');
        $('#Div5', dvCnt).text('Test');
        $('#Div6', dvCnt).text('Test');
        $('#Div7', dvCnt).text('Test');
        $('#Div8', dvCnt).text('Test');
        $('#Div9', dvCnt).text('Test');

    }
    console.timeEnd('Individual with DOM cache');

    console.time('Multiple without cache');
    for (var i = 0; i < 10000; i++) {
        $('#Div0,#Div1 ,#Div2 ,#Div3 ,#Div4 ,#Div5 ,#Div6, #Div7, #Div8, #Div9').text('Test');
    }
    console.timeEnd('Multiple without cache');

    console.time('Multiple with $cache');
    for (var i = 0; i < 10000; i++) {
        $('#Div0,#Div1 ,#Div2 ,#Div3 ,#Div4 ,#Div5 ,#Div6, #Div7, #Div8, #Div9', $dvCnt).text('Test');
    }
    console.timeEnd('Multiple with $cache');

    console.time('Multiple with DOM cache');
    for (var i = 0; i < 10000; i++) {
        $('#Div0,#Div1 ,#Div2 ,#Div3 ,#Div4 ,#Div5 ,#Div6, #Div7, #Div8, #Div9', dvCnt).text('Test');
    }
    console.timeEnd('Multiple with DOM cache');
}); 
```

这是一个[jsbin](http://jsbin.com/ehumic/3/edit)

我得到类似以下结果

没有缓存的个人：11490ms
有 $cache 的个人：13315ms
有 DOM 缓存的个人：14487ms

不带缓存的多个：7557ms
带 $cache 的多个：7824ms
带 DOM 缓存的多个：8589ms

有人可以对发生的事情有所了解吗？具体来说，当传入 jQuery 上下文时，为什么搜索会变慢？

*编辑：*

这里的大多数回答者（以及[带有上下文的 jQuery 选择器的性能](https://stackoverflow.com/q/2421782/384985)）基本上都说这个例子中的 DOM 太小而无法真正获得太多，或者`ID`无论如何选择都会很快。我理解这两点，我的问题的重点是为什么会`context` **减慢**搜索速度，大小`DOM`不应该对此产生影响，而且通过 ID 搜索已经非常快的事实也不应该。

[@pebble](https://stackoverflow.com/users/1490904/pebbl)建议它较慢的原因是因为 jQuery 不能使用本机浏览器方法（`getElementByID`），这对我来说似乎很有意义，但是为什么在一个选择中搜索多个元素会更快呢？

无论如何，我将测试转储到[jsPerf](http://jsperf.com/jquery-selection-with-context)添加案例以按类搜索，并且再次惊讶地发现这次搜索具有缓存的多个类是最快的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:14:44.140

我想在很多情况下使用上下文会减慢速度，主要是因为 jQuery 会尽可能地尝试使用浏览器本地方法——而不是遍历整个 dom。这方面的一个例子是`document.getElementById`在你的例子中使用。

### 为什么减速？

`getElementById`仅存在于文档对象上-您无法在上下文元素上使用它-即`element.getElementById`. 所以我的理论是 jQuery 首先使用 id 请求`document.getElementById`，然后，如果有一个上下文集 - 扫描每个元素的父元素以判断它们中的任何一个是否作为上下文的子元素存在 - 从而减慢进程。

### 其他可能很慢的选择器示例

您还会发现其他地方，根据您使用的选择器，您将获得性能提升 - 所有这些都取决于 jQuery 可以使用哪些方法来加速它的工作。例如：

```
$('.className'); 
```

很可能会转换为使用`getElementsByClassName`或任何其他提供给类名选择的本机方法，但是：

```
$('.className .anotherClassName'); 
```

将无法使用它*（因为它必须考虑到关系）*并且必须使用`querySelector` *（如果存在）*和/或纯 JavaScript 逻辑的混合来解决问题。

充分了解可用的本地方法将帮助您优化 jQuery 查询。

### 优化方法

如果您希望使用上下文进行优化，我想这将证明比没有更快的查询：

```
$('div', context); 
```

这将是因为`getElementsByTagName`已经存在~~自古以来~~一段时间，并且可以在纯 JavaScript 中直接在 DOM 元素上使用。但是，如果您要执行此操作，则执行以下操作可能会更快：

```
$().pushStack( context[0].getElementsByTagName('div') ); 
```

或者

```
$( context[0].getElementsByTagName('div') ); 
```

主要是因为您减少了 jQuery 函数调用，尽管这不那么简洁。关于许多流行的 JavaScript 环境需要注意的另一件事 - 调用不带参数的函数比调用*要*快得多。

用于优化某些 jQuery 选择器的相对未使用的方法是使用 jQuery`eq`伪选择器 - 这可以以类似于在 SQL 查询中使用的方式加快速度`LIMIT 0,1`- 例如：

```
$('h2 > a'); 
```

将在所有 H2 中扫描以查找 A 元素，但是如果您从一开始就知道 H2 中只有一个 A 标签，您可以这样做：

```
$('h2 > a:eq(0)'); 
```

另外，如果您知道只有一个 H2 - 逻辑是相同的：

```
$('h2:eq(0) > a:eq(0)'); 
```

### $().pushStack 和 $().add 的区别

针对 Jasper 的评论，这里是两个函数之间的区别：

**。添加：**

```
function (a,b){var c=typeof a=="string"?p(a,b):p.makeArray(a&&a.nodeType?
[a]:a),d=p.merge(this.get(),c);return this.pushStack(bh(c[0])||bh(d[0])?
d:p.unique(d))} 
```

**.pushStack：**

```
function (a,b,c){var d=p.merge(this.constructor(),a);return
d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector
+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")"),d} 
```

主要区别在于`.add()`使用`.pushStack()`它来实现它的目标 - add 允许支持更多的数据类型 - 甚至是 jQuery 对象。而`.pushStack`仅针对 DOM 元素设计，如果您正在使用它，这将使其更加优化:)

### 按 ID 选择的更快方法？

这很明显，但我想我会把它放在这里，因为有时会遗漏一些东西 - 通过 id 选择元素的更快方法是执行以下操作：

```
$(document.getElementById('id')); 
```

这一切都是因为 jQuery/Sizzle 无法超越本机方法，这也意味着您可以避免 jQuery/Sizzle 部分的任何字符串解析。虽然它没有 jQuery 对应物那么简洁，并且可能不会获得那么多的速度提升，但作为优化值得一提。如果您要经常使用 id，您可以执行以下操作。

```
jQuery.byid = function(id){
  return jQuery(document.getElementById(id))
};

$.byid('elementid'); 
```

上面的例子比我之前的例子要慢一些，但仍然应该超过 jQuery。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T21:14:35.153

由于您是按 ID 选择的，因此在这种情况下，jQuery（或嘶嘶声，我忘了）会跳到更快的 document.getElementById() 。使用类时，您可能会得到不同的结果，但即便如此，它也可能因浏览器而异。

[您可以使用http://jsperf.com/ 之](http://jsperf.com/)类的东西使您的测试更容易

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T21:18:40.873

您似乎正在使用 #elementid 属性来执行测试。

请记住，HTML 页面中的**ID** 应该是唯一的。因此，无论您在搜索 ID 时是否给它一个上下文，这都不会产生影响。

如果您尝试使用类或元素标记本身来定位元素，则此测试可能更有意义。

`$('.mydiv' , $('#innerDiv'))`可能比 `$('.mydiv')`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T21:37:23.220

当您使用 id 时，您不会从上下文中受益，因为它在浏览器中已高度优化。

有了 id 你就可以打电话说嘿嘿。一个非编程示例，你在一个人的房间里，你喊出一个名字，那个人回答。

现在让我们看看上下文。假设你知道这个名字是一个男人的名字，所以你把房间分成男人和女人。你比问这群人的名字。一个相当简单的事情的额外步骤。

当您查找特定的事物（如属性）时，您将受益。浏览器更难查找且未高度优化的东西。假设您正在寻找具有特定属性的输入。最好引用一个你知道的包含它的元素，这样它就不必搜索页面上的每个输入。

现在有趣的部分是上下文选择器更慢。最好使用查找。为什么？它必须处理多个 jQuery 对象的创建。:)

所以而不是

```
 $('.myClass', dvCnt).text('Test'); 
```

做

```
 $(dvCnt).find('.myClass').text('Test'); 
```

如果您要进行多次查找，最好将第一个存储到变量中

```
 var myDiv = $(dvCnt)
    myDiv.find('.myClass1').text('Test');
    myDiv.find('.myClass2').text('Test'); 
```

但是现在有了 jQuery 对 querySelector 的处理，除非您使用的是 querySelector 不支持的组成的 jQuery 选择器，否则这些优化就更小了。对于不支持 querySelector 的浏览器，上下文很重要。

# android - dynamic drawable icon for ActionBar menu item? (Android, ActionBarSherlock)

> ID：13057782
> 
> 赞同：7
> 
> 时间：2012-10-24T21:09:18.603
> 
> 标签：android, android-actionbar, actionbarsherlock

How can I dynamically update the icon for an ActionBar MenuItem to show a 'red badge' with a number? (conceptually similar to "unread message count')

I'm using ActionBarSherlock in my Android application, targeting API level 10+. My application is for mobile data capture and, sometimes, the user cannot immediately submit new data but must save it locally on the phone (e.g. when connectivity is poor).

Whenever there are 'unsubmitted' items stored locally on the phone, I'd like to show the user a menu item (in the Action Bar) so that they can click over to the UnsubmittedItems activity and trigger an upload manually.

**Ideally**, this menu item will have some graphical representation of the number of unsubmitted items (similar to how an email or sms app shows the number of unread messages as a badge). Currently, I'm just doing:

```
unsubmittedMenuItem.setTitle( Integer.toString(numUnsubmitted) ); 
```

And this works, but two issues: I'd prefer to use the Icon and keep the Title as something intelligible ("Unsubmitted") and, also, I'd love to have some custom layout or design here, such as a red circle background behind the number.

Thoughts on how to accomplish this? So far my research suggest two possibilities:

1.  Use a level list drawable that is precreated for some range of numbers (e.g. 1, 2, 3... 10+) and then unsubmittedMenuItem.getIcon().setLevel( numUnsubmitted )
2.  Build the entire bitmap entirely dynamically, using the Bitmap and Canvas APIs

These are similar in the sense that I'm rendering the text into a bitmap (either offline like #1 or on the fly like #2) but it would be great to leverage the 'native' text rendering of the ActionBar if possible and simply insert a red circle behind it like in a TextView.

Is there some way to set a custom layout just for the icon drawable? (NOT a full actionLayout, just for the icon?)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T21:33:25.920

There are a lot of ways to do this:

1.  Use [`LayerDrawable`](https://developer.android.com/reference/android/graphics/drawable/LayerDrawable.html) and stack badge images on top of your icon image.
2.  Write a custom class which extends from `Drawable` and draws the icon and badge manually.
3.  Use a custom action item view with your icon in an `ImageView` with a `TextView` overlay for the badge.

# c# - White自动化工具线程安全吗？

> ID：13057784
> 
> 赞同：0
> 
> 时间：2012-10-24T21:09:19.370
> 
> 标签：c#, white-framework

我想执行一个 GUI 自动化任务。我需要打开几个 GUI 窗口并一次性将它们全部自动化。我的计划是将每个窗口放在一个单独的线程上，并让 White 自动化工具进行一些自动化。我的问题可以在不创建自定义代码来管理线程的情况下做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T09:52:03.147

这是不可能的，约束是物理的。

为了说明这个问题，如果您将多个键盘/鼠标连接到您的机器，然后让多个人同时尝试并执行测试，您将很难过。因为您只能拥有一个鼠标并同时专注于一个应用程序。

白色无法绕过这些物理限制。无论您编写多少自定义代码。

# maven - Maven原型获取旧版本

> ID：13057787
> 
> 赞同：0
> 
> 时间：2012-10-24T21:09:21.380
> 
> 标签：maven

我正在使用已上传到中央存储库的原型生成一个 Maven 项目。

```
mvn archetype:generate \
   -DarchetypeGroupId=org.opencoweb \
   -DarchetypeArtifactId=coweb-archetype 
```

最新版本是 0.8.3.1，但我得到的版本是 0.8.3。我已经清除了我的缓存`~/.m2`，运行上面的命令仍然会下载 0.8.3 而不是最新版本。有谁知道为什么？上传/创建 0.8.3.1 模块时是否忘记指定某些内容？我本月早些时候（10 月 3 日）上传了模块，根据[http://search.maven.org/remotecontent?filepath=org/opencoweb/coweb-archetype/maven-metadata.xml](http://search.maven.org/remotecontent?filepath=org/opencoweb/coweb-archetype/maven-metadata.xml)，“最新版本”是 0.8 .3.1.

编辑：我可以下载最新的 0.8.3.1 版本，但前提是我指定`-DarchetypeVersion=0.8.3.1`. 然而，这显然是不可取的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:29:35.917

检查这个答案。也许最新部分对您的需求有所帮助。

[https://stackoverflow.com/a/13058666/1602465](https://stackoverflow.com/a/13058666/1602465)

# c# - 从后面的代码中的类访问 TextBox 和 DropDownList 值

> ID：13057788
> 
> 赞同：1
> 
> 时间：2012-10-24T21:09:24.003
> 
> 标签：c#, class, asp.net-4.0, code-behind

我知道我缺乏关于类和继承之间关系的基本知识

我发现很难理解一件简单的事情：

给定的`DDl`或`TextBox`可以从后面的代码访问

```
int selected = DDLID.SelectedIndex ;

string userInput = TBXID.Text; 
```

现在来自放置在代码后面的类：

```
public static class ControlsValue
{
   public static int UserSel = DDLID.Selected.index;
   public static string UserText = TBXID.Text;
} 
```

我试图“排列”我的代码，这样我就可以在其他一些项目中重用它

...所以我已将与该类中的代码相关的所有全局变量移到该类中，而我不能做的是用`webControls Values`

有什么办法呢？

## 更新

我能想到的一种方法是通过参数

```
public static class ControlsValue
{
   public static void getValues(DropDownList DDLID)
   {
        public static int UserSel = DDLID.Selected.index;
   }
   public static string UserText(TextBox TBXID)
   {
      return TBXID.Text;
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:40:43.850

像这样创建一个不同的类

```
public class ControlValues{

    private int_dropDownIndex;
    public int DropDownIndex{
         get { return _dropDownIndex; }
         set { _dropDownIndex= value; }
    }

    private string _textBoxValue;
    public string TextBoxValue{
         get { return _textBoxValue; }
         set { _textBoxValue= value; }
    }

    public ControlValues(int dropDownIndex, string textBoxValue){
         this._dropDownIndex = dropDownIndex;
         this._textBoxValue = textBoxValue;
    }
} 
```

您可以从后面的代码创建一个实例，如下所示

```
ControlValues cv= new ControlValues(DDLID.Selected.index, TBXID.Text); 
```

现在您可以访问 DropDown 索引和文本

```
cv.DropDownIndex;  
cv.TextBoxValue; 
```

Although I provided an answer for this, Please note:

*   Remember the stateless nature of web application and the way you are going to use this.
*   In ASP.NET, it will be inefficient to create an Instance of class to hold values of server control because those controls and their values are directly accessible from the code behind. Using this approach will be an extra overhead.
*   If you are serious about learning re-usability, I would strongly recommend you to learn basics of object oriented programming. Once you have a good grip of OOP, you will see clearly when to apply OOP principles.

# delphi - 使用 Data Explorer 直观地创建数据库表

> ID：13057789
> 
> 赞同：0
> 
> 时间：2012-10-24T21:09:27.617
> 
> 标签：delphi, sqlite, delphi-xe3

我观看了有关在 Delphi 中创建和使用数据库的[视频。](http://www.youtube.com/watch?feature=player_detailpage&v=416qL6is5Xw#t=26s)该视频指出您可以使用代码、数据浏览器或 SQLite3 控制台应用程序创建数据库，但我无法了解如何使用数据浏览器创建数据库。有谁知道我可以这样做吗？

提前谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T22:11:45.773

以下说明适用于 XE3，但它们也适用于 XE。

右键单击`SQLite`数据资源管理器中的项目，然后选择`New connection`。

`Database`在编辑控件中输入新数据库文件的完整路径（当然，它还不存在） 。

单击`Advanced`对话框右下角的按钮。找到 的条目`FailIfMissing`，并将值从 更改`True`为`False`，然后单击`OK`按钮关闭`Advanced Properties`对话框。

单击`Test connection`对话框左下角的按钮（在`Advanced`您之前单击的按钮的正对面）。你应该得到一个对话框，上面写着`Test connection successful`。关闭`New Connection`对话框。（如果此时您没有获得成功的测试连接，请检查您输入的数据库的路径；如果该文件夹不存在，它将失败。如果`SQLite3.dll`不在您的 Windows 上`PATH`或者是错误的版本。）

要创建表，请为上面创建的新连接展开 Data Explorer 条目，这样您就可以看到`Tables`、`Views`和`Procedures`分支。右键单击`Tables`，然后`New table`从弹出菜单中选择。

# java - 了解 JAX-WS 中的 @Oneway 注解

> ID：13057794
> 
> 赞同：10
> 
> 时间：2012-10-24T21:10:01.457
> 
> 标签：java, jax-ws

根据 javadoc：

> 表示给定的@WebMethod 只有一个输入消息，没有输出。通常，单向方法在执行实际业务方法之前将控制线程返回给调用应用程序。如果标记为 @Oneway 的操作具有返回值或 Holder 参数，或声明任何已检查的异常，则 181 处理器应报告错误。

那么我可以假设，如果我需要异常处理（选中或未选中），不建议使用此注释吗？我不会从业务逻辑中返回任何内容，但是我仍然有兴趣了解超时和其他各种特定于调用 SOAP 方法的行为的错误。此注释是否意味着我无权访问 HTTP 返回码或抛出异常？

**问题**：我最好自己将其线程化以获得真正的异步调用并删除`@Oneway`注释？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-24T21:15:14.160

`@Oneway`意味着*没有任何东西*可以逃脱您的方法，无论是响应还是异常。这有两个原因：

*   从技术上讲，异常只是另一种类型的响应（SOAP 错误），因此不能从单向方法返回（不能返回任何东西）

*   通常单向方法由 Web 服务框架异步执行（我知道[apache-cxf](/questions/tagged/apache-cxf "显示标记为“apache-cxf”的问题") odes）。框架会立即返回，因此您的客户可能甚至在开始处理单向方法之前就收到了空响应。当抛出异常时，原来的 HTTP 连接早已不复存在。

因此，如果您想传播异常或超时，请使用标准 SOAP 方法，其中包含空响应^*和显式声明的少量错误。如果您想在一段时间后使呼叫超时，则需要单独的线程池并阻塞等待响应或给定时间段。

^*请不要混淆空的 SOAP 响应（一个没有内容的 XML 文档，只是根标签，包裹在一个 SOAP 信封中）和空的 HTTP 响应（*什么都没有*发回）。请记住，SOAP 不限于 HTTP。例如，如果您使用 JMS 或电子邮件传输，普通双向功能的空响应（或故障）是另一个从服务器发送到客户端的消息。单向方法只是一条最可靠的消息，并且*没有*发回任何内容。

# php - IP地址国家查询服务

> ID：13057795
> 
> 赞同：0
> 
> 时间：2012-10-24T21:10:02.080
> 
> 标签：php, geolocation, ip-geolocation

过去我曾使用 ipinfodb.com 进行地理定位，但它们每秒有 2 个查询的限制，而我正在处理的应用程序将超过该限制。

我需要一种在国家层面快速准确的地理定位替代方案。我对数据库或 Web 服务持开放态度，我愿意为此付费。

Web 服务似乎最容易集成，但下载数据库很可能更快。我对下载数据库的担忧是，如果不定期更新，它会随着时间的推移变得不准确。这是一个有效的担忧吗？

我听说过关于 Quova 的褒贬不一的评论。

除了 ipinfodb 之外，任何人都有其他地理定位服务的经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:13:51.580

[http://uppit.com/4hyisuepbh60/geoip.sql](http://uppit.com/4hyisuepbh60/geoip.sql)

有一个数据库。DB 取自：[http](http://code.google.com/p/ci-geoip/) ://code.google.com/p/ci-geoip/刚刚添加了 country_name 列

```
$query = query('SELECT country_code, country_name FROM geoip WHERE ' . ip2long($_SERVER['REMOTE_ADDR']) . ' BETWEEN ipnum_start AND ipnum_end'); 
```

# actionscript-3 - 八哥杂耍者循环

> ID：13057797
> 
> 赞同：0
> 
> 时间：2012-10-24T21:10:03.360
> 
> 标签：actionscript-3, starling-framework

我正在构建一个带有一些动画的简单游戏，但我遇到了从八哥扩展的循环的问题。

我的代码使用精灵表和纹理图集来获取动画精灵但是当我添加

```
anim.loop = false 
```

动画根本不播放。我的代码如下所示：

```
anim = new MovieClip(Assets.getAtlasDuck().getTextures("duck_"), 20);
anim.loop = false;
starling.core.Starling.juggler.add(anim);
this.addChild(anim); 
```

如果我删除循环动画播放但循环。如果我添加：

```
anim.addEventListener(starling.events.Event.COMPLETE, duckComplete); 
```

动画不播放。鸭子完成功能只是从杂耍者中删除动画。

我希望动画播放一次然后停止。甚至添加：

```
anim.play(); 
```

不使用事件侦听器或 loop = false 播放动画。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T22:14:34.073

将循环属性设置为 false 的 MovieClip 添加到 Juggler 后，您必须使用以下 MovieClip 函数手动控制剪辑：

```
anim.play();
anim.pause();
anim.stop(); 
```

[史达琳文档](http://doc.starling-framework.org/core/)

# asp.net - 为什么 MVC3 网站下的 webforms 应用程序需要 MVC3 bin_deployable dll？

> ID：13057804
> 
> 赞同：0
> 
> 时间：2012-10-24T21:10:21.523
> 
> 标签：asp.net, asp.net-mvc-3, webforms

我在 IIS 7.5 的 MVC3 站点下配置了一个 webforms 应用程序。我'无法加载文件或程序集...' System.Web.Mvc 和 System.Web.Helpers 的异常。当我将 MVC3 dll 添加到 webforms 应用程序 bin 目录时，一切正常。

为什么我必须在 webforms 应用程序中包含 bin_deployable dll？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:18:58.137

您不必*“bin deploy”*，除非您将其部署到的服务器在其 GAC 中没有程序集（对于共享托管环境通常如此）。

* * *

## 更新（根据评论）：

> “我在 MVC3 站点下配置了一个 webforms 应用程序”

请参阅：[**Web.config 继承**](http://weblogs.asp.net/jgalloway/archive/2012/01/17/10-things-asp-net-developers-should-know-about-web-config-inheritance-and-overrides.aspx)

# java - Java JSlider.getvalue 向 JTextField 返回良好的值，错误的 toolTipText

> ID：13057812
> 
> 赞同：1
> 
> 时间：2012-10-24T21:11:11.850
> 
> 标签：java, swing, jtextfield, jslider

我使用 NetBeans 7.2。

我有一个`JSlider slider_random`在我的`JPanel1`，输入的值`100`，最小值`0`，最大值`1000`。我通过属性（自定义代码）设置`toolTipText`了一个：`slider_random`

```
"<html>Range (0-" + String.valueOf(slider_random.getMaximum()) + ")<br>Current: " + String.valueOf(slider_random.getValue()) 
```

还放置了一个`JTextField text_current`并将文本设置为`100`，这将显示`slider_random`我更改它时的值。

我将`stateChanged`事件设置为`slider_random`：

```
private void slider_randomStateChanged(javax.swing.event.ChangeEvent evt) {
    slider_random.setToolTipText("<html>Range (0-" + String.valueOf(slider_random.getMaximum()) + ")<br>Current: " + String.valueOf(slider_random.getValue()));
    jTextField1.setText(String.valueOf(slider_random.getValue()));
} 
```

我的问题是当我启动程序并指向它显示的滑块时：

> 范围 (0-1000)
> 
> 当前：50

然后稍微移动滑块，然后移回原始位置（同时我可以看到 的变化`text_current`）所有数据都变得正确，并且工具提示说：

> 范围 (0-1000)
> 
> 当前：100

什么会导致我的问题？

[这是我启动后的屏幕截图。](http://i.stack.imgur.com/rX8OR.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T21:32:36.060

我能够重现您的问题。

问题是 jSlider 的默认值为 50。您将值修改为 100，但这并未反映在您访问 jSlider 值的 jSlider 的 setToolTip() 方法中（通过自定义代码）。它将显示旧值 50。

为了纠正这个问题，一种解决方案是在滑块上创建鼠标悬停事件，这样当您运行应用程序并将鼠标指针悬停在滑块上时，jToolTip 方法会选择最新的值并向您显示相同的值。它对我有用，所以我相信它对你有用。

如果我能想到更好的解决方案，我会发布相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T21:55:45.757

也许在滑块的值已经设置之后添加了侦听器。您可能需要更改订单。或者，只是为了解决初始化问题，您可能需要在初始化滑块后显式设置工具提示。

作为替代方案，您可以子类化`JSlider`和覆盖`getToolTipText`，例如：

```
JSlider slider = new JSlider() {
    public String getToolTipText(MouseEvent e) {
        return "<html>Range (0-" + String.valueOf(getMaximum()) + ")<br>Current: " + String.valueOf(getValue());
    }
}; 
```

这是一个简短的演示：

```
import java.awt.event.MouseEvent;

import javax.swing.BorderFactory;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JSlider;

public class TestSlider {
    public static void main(String[] args) {
        JFrame frame = new JFrame("TestSlider");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JSlider slider = new JSlider() {
            public String getToolTipText(MouseEvent e) {
                return "<html>Range (0-" + String.valueOf(getMaximum())
                        + ")<br>Current: " + String.valueOf(getValue());
            }
        };
        slider.setToolTipText("");

        frame.add(slider);

        ((JComponent) frame.getContentPane()).setBorder(BorderFactory
                .createEmptyBorder(10, 10, 10, 10));
        frame.setLocationByPlatform(true);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-30T22:33:03.507

我认为执行此操作的最佳方法是在滑块附近制作一个标签，然后放置一个整数之类的变量而不是“y”或放置获取值而不是“y”，以及您需要的事件是项目状态更改，因此当您移动滑块时，标签将随滑块移动并显示值；）

```
public class Slidebar extends JFrame {

private JPanel contentPane;

/**
 * Launch the application.
 */
public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                Slidebar frame = new Slidebar();
                frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}

/**
 * Create the frame.
 */
public Slidebar() {
    setResizable(false);
    setTitle("SlideBar With Text Move");
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setBounds(100, 100, 317, 300);
    contentPane = new JPanel();
    contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
    setContentPane(contentPane);
    contentPane.setLayout(null);

    final JSlider slider = new JSlider();

    slider.setPaintLabels(true);
    slider.setOrientation(SwingConstants.VERTICAL);
    slider.setValue(0);
    slider.setBounds(131, 60, 53, 136);
    contentPane.add(slider);

     final JLabel lblNewLabel = new JLabel("");
    int y = 165;
    lblNewLabel.setBounds(111, 173, 41, 30);
    contentPane.add(lblNewLabel);
    slider.addChangeListener(new ChangeListener() {
        public void stateChanged(ChangeEvent arg0) {
            int y=165;

            lblNewLabel.setBounds(111, y-(slider.getValue())-5, 41, 30);

            lblNewLabel.setText(slider.getValue()+"");

        }
    });

} 
```

}

# windows - Windows 上的语言包：winapi

> ID：13057813
> 
> 赞同：0
> 
> 时间：2012-10-24T21:11:22.740
> 
> 标签：windows, winapi, language-packs

如何检索所有可用的语言包以将其设置为当前线程语言以便之后在 FormateMessage 中使用？我需要的正是可用于函数 SetThreadUILanguage 的语言。之后我需要使用 FormateMessage 函数，它将消息提取为当前线程的消息。

# javascript - 声明函数的方法

> ID：13057822
> 
> 赞同：0
> 
> 时间：2012-10-24T21:12:03.393
> 
> 标签：javascript, function, declaration

> **可能重复：**
> [JavaScript：var functionName = function() {} vs function functionName() {}](https://stackoverflow.com/questions/336859/javascript-var-functionname-function-vs-function-functionname)

这两个功能有什么区别

```
function a()
{
    b=2;
    alert(b);
}
a(); 
```

和这个功能

```
var a=function()
{
    b=2
    alert(b);
}
a(); 
```

主要区别是什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T21:14:07.463

主要区别在于，当您声明函数时：

```
function a(){
    // something...
} 
```

即使在代码中声明它的位置之前，它也可以在同一范围内访问。

但是当您将匿名函数分配给变量时：

```
var a = function(){
    // something...
}; 
```

它在分配之前不可用。

## 创建函数时

这是实际创建函数时的结果。在第一种情况下，它是在编译代码时创建的，而在第二种情况下，函数是在解释器到达赋值行时创建的。

## 测试代码

您可以通过执行以下代码（[jsfiddle](http://jsfiddle.net/rPjPB/)）看到我上面提到的区别：

```
try {
    a();
} catch(e) {
    alert('problem calling function a(): ' + e);
};
try {
    b();
} catch(e) {
    alert('problem calling function b(): ' + e);
};

​function a(){
    alert('function a() called');
};

var b = function(){
    alert('function b() called');
};​ 
```

您将看到（如[提到的 jsfiddle](http://jsfiddle.net/rPjPB/)中所述），该`a()`函数甚至在实际声明之前被正确调用，但`b()`在分配之前不可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:14:17.133

唯一真正的区别是第二个函数没有名称，而第`function a() {}`一个函数被提升了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T21:17:30.317

不同之处在于函数 a() 是在解析时为脚本块定义的，而 var a=function() 是在运行时定义的。

```
<script type="text/javascript">
    // No errors occured;
    function a();

    function a(){
        console.log("Success");
    }
</script>

<script type="text/javascript">
    // An error will occured;
    a();

    var a = function (){
        console.log("Success");
    }
</script> 
```

# php - 从 sql 查询中显示一个标题和多个日期

> ID：13057824
> 
> 赞同：1
> 
> 时间：2012-10-24T21:12:10.007
> 
> 标签：php, sql

新的 sql 和 php 并试图解决这个问题。在阅读了这里的几个示例之后，我似乎仍然无法完成这项工作。现在我有以下查询

```
$sql = "SELECT e.id, e.event_name, e.recurrence_id, e.start_date, e.venue_title FROM " . wp_events_detail . " e  WHERE e.recurrence_id <>0 or e.recurrence_id = 0 and is_active = 'Y' GROUP BY e.event_name, e.start_date"  ;
                $posts = $wpdb->get_results($sql);

                print("<ul>");
                foreach ($posts as $post)
                {
                    print('<li>'.$post->event_name.'|'.$post->event_desc.'<br/>');

                     print('</li>');
                    print($post->start_date. '~' .$post->venue_title.'<br/>'); 
                }
                print("</ul>"); 
```

这将产生 A 类名称开始日期 1 A 类名称开始日期 2 B 类名称开始日期 1 B 类名称开始日期 2

我想要的是 A 类的名称 开始日期 1 开始日期 2

B 类名称 开始日期 1 开始日期 2

我知道我需要一个数组并定义行 - 尝试了几个选项但没有运气。不理解此答案中定义的所有变量等（这似乎是我想要做的）

[在档案循环中仅显示一次](https://stackoverflow.com/questions/9253070/show-year-only-once-in-archives-loop)

非常感谢任何帮助！甚至是正确方向的一点；-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:18:25.497

您可以将 for 循环调整为：

```
$lastseeneventname='';
foreach ($posts as $post){
   if($lastseeneventname!=$post->event_name){
      print('<li>'.$post->event_name.'|'.$post->event_desc.'<br/>');
      print('</li>');
      $lastseeneventname=$post->event_name;
   }
   print($post->start_date. '~' .$post->venue_title.'<br/>'); 
} 
```

这只会打印`event_name`一次 new ，我认为这是你想要的。

# drupal - 在 Drupal 中显示子页面/子节点

> ID：13057826
> 
> 赞同：0
> 
> 时间：2012-10-24T21:12:33.187
> 
> 标签：drupal, drupal-7

我对 Drupal 比较陌生，所以如果这似乎是一个愚蠢的问题，但它让我很难过，我很抱歉，我花了大约一个小时搜索，但我认为我没有找到正确的东西。

我将我的内容设置为节点、节点/1、节点/2 等 - 我也有几个节点设置，我想成为这些节点的子页面。我已将“父项”设置为主节点，但我不知道如何在主节点页面上将这些子节点显示为菜单。在 Wordpress 中，这可以使用显示子页面的函数来完成，在 Drupal 中是否有类似的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:55:53.303

Drupal 核心带有一个**Book**模块，用于分层结构节点。我的猜测是您正在将链接嵌套到菜单中的节点，这有效，但在处理数百个节点时性能较差。回答您的问题：本书还提供了到每个父页面底部的子页面的导航。有关示例，请参阅此[drupal.org 手册页面。](http://drupal.org/documentation/build)内容下方的列表及其下方的链接是 Book 的作品。

# java - 关闭 HTTP 会话以编写 Java / Tomcat

> ID：13057827
> 
> 赞同：1
> 
> 时间：2012-10-24T21:12:35.747
> 
> 标签：java, ajax, session, tomcat, concurrency

在处理 ASP.NET 应用程序时，我发现在会话缓存中放置一些东西，或者实际上，访问会话缓存中的变量会导致我的 Ajax 查询停止异步。我了解到这是因为会话基本上是阻塞的——如果我同时从浏览器发出两个 Ajax 请求，而第一个请求需要一点时间才能返回，则会话被锁定在第一个请求中，直到该请求完成，在这一点我的第二个 Ajax 请求开始工作。

在 PHP 中，我收集到有一个选项可以关闭会话以进行写入（和/或以只读方式打开它），以便会话变量访问是非阻塞的并且事情保持异步。

我正在构建一个将是 Java 的应用程序，可能在 Tomcat 上运行（尽管如果需要，我可以更改为其他容器）并且我无法确定 Java 是否有相同的问题（会话变量读取块）或有相同的补救措施（提前关闭，只读模式）。有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:23:45.557

在 Tomcat 中，`HttpSession`在`org.apache.catalina.session.StandardSession`(source [here](http://www.docjar.com/html/api/org/apache/catalina/session/StandardSession.java.html) ) 中实现。

如果您查看源代码，您会看到对 a 的调用`HttpSession.getAttribute(String)`几乎`HttpSession.setAttribute(String, Object)`没有`ConcurrentHashMap` 任何额外的同步。

这意味着这些调用派生了`ConcurrentHashMap`. 引用它的[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html)：

*   检索操作不需要锁定，也不支持以阻止所有访问的方式锁定整个表。<..> 检索操作（包括get）一般不会阻塞，因此可能与更新操作（包括put和remove）重叠
*   该表在内部进行了分区，以尝试允许指定数量的并发更新而不会发生争用。因为哈希表中的放置本质上是随机的，所以实际的并发性会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:21:31.113

看起来阻塞是由于线程同步访问而发生的`HttpSession`，如[this SO answer中所述](https://stackoverflow.com/a/616723/162634)

因此，必须是第二个请求仅在第一个请求正在使用时才被阻止`HttpSession`（或者如果您有一些由第一个请求长时间持有的共享锁，但这与 Tomcat 无关）。

由于 Servlets 规范要求此同步，因此您不应尝试违反它。相反，让您的应用程序尽量减少读取或写入`HttpSession`.

此外，正如我在上面所写的，如果您有额外的锁使多个请求按顺序执行，则可能会发生阻塞。当您向 Tomcat 发送第二个请求时，尝试对 Tomcat 进行多个线程转储，并查看是否有任何此类锁正在等待第二个请求。

# ruby-on-rails - Heroku 30 秒超时和长外部查询的解决方法

> ID：13057829
> 
> 赞同：3
> 
> 时间：2012-10-24T21:12:42.997
> 
> 标签：ruby-on-rails, heroku

注意：这篇文章中有些东西不是最佳实践。被警告 ：）

*   我正在开发一个连接到微实例 AWS 服务器的管理仪表板。
*   数据库有数千万条记录。
*   大多数查询会在几秒钟内返回，但有些需要一两分钟才能返回，这取决于我无法控制的一些事情。

由于 Heroku 的 30 秒限制 (https://devcenter.heroku.com/articles/request-timeout)，我需要找到一些方法来争取时间来保持连接打开，直到查询返回。Heroku 确实说您可以通过同时向客户端发送字节来购买时间，这又为您购买了 55 秒。

无论如何，只是好奇你们是否有解决 Heroku 拖延时间的方法。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-08-13T00:59:02.450

我已经为此做了一个解决方法。我们的应用程序正在运行 Sinatra，我使用[EventMachine gem](https://github.com/eventmachine/eventmachine)每 10 秒写入`\0`一次流，因此 Heroku 在操作完成之前不会关闭连接，请参见示例[https://gist.github.com/troex/31790323fb4a8a29c8b8cd84e50ad1e8](https://gist.github.com/troex/31790323fb4a8a29c8b8cd84e50ad1e8)

我的例子是使用 Puma，但它也应该适用于 Unicorn 和 Thin（你不需要`EventMachine.run`Thin）。对于 Rails，我认为您可以使用 before/after_action 来启动/停止事件计时器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T21:30:19.667

您可以将事物分解为多个查询。

您可以发送一个查询，让您的 AWS 服务器立即响应，只是说它收到了查询，然后一旦它提取数据，让它通过 POST 请求将该数据发送到您的 Heroku 实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T21:26:01.333

是的，通过 ajax 来做，发回一个回复说稍后再问...

# ajax - 通过ajax从数据库中删除一行

> ID：13057830
> 
> 赞同：0
> 
> 时间：2012-10-24T21:12:47.323
> 
> 标签：ajax, jquery, symfony

我有这个 javascript 函数来删除该行，但该函数不起作用

```
$(document).ready(function()
{
    $('table#example td a.delete').click(function()
    {
        if (confirm("Are you sure you want to delete this row?"))
        {
            var id = $(this).parent().parent().attr('id');
            var data = 'id=' + id ;
            var parent = $(this).parent().parent();

            $.ajax(
            {
                   type: "POST",
                   url: "supprimerkpi",
                   data: data,
                   cache: false,

                   success: function()
                   {
                        parent.fadeOut('slow', function() {$(this).remove();});

                        // sets specified color for every odd row
                        $('table#example tr:odd').css('background',' #FFFFFF');
                   }
             });
        }
    }); 
```

在我的页面 html 中：

```
<a href="#" class="delete" style="color:#FF0000;"> 
```

在我的控制器中

```
$repository = $this->getDoctrine()->getEntityManager()->getRepository('AdminBlogBundle:Condkpi'); $id=$this->getRequest()->query->get('id');
$em = $this->getDoctrine()->getEntityManager();
$uti=$repository->findOneBy(array('id' => $id));
$em->remove($uti);
$em->flush(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-27T07:42:51.363

在你的`routing.yml`

```
delete_data:
    path:     /delete
    defaults: { _controller: AcmeDemoBundle:Default:delete} 
```

在你的ajax调用url参数中根据这个改变

```
var id = $(this).parent().parent().attr('id');

var data = 'id=' + id ;

 var parent = $(this).parent().parent();

        $.ajax(
        {
               type: "POST",
               url: "{{ path('delete_data') }}",
               data: {id :id },
               cache: false,

               success: function()
               {
                    parent.fadeOut('slow', function() {$(this).remove();});

                    // sets specified color for every odd row
                    $('table#example tr:odd').css('background',' #FFFFFF');
               }
         }); 
```

在你的`AcmeDemoBundle/Controller/DeafultControlller.php`

```
public function deleteAction(Request $request)
{
   $id = $request->get('id');
   $repository = 
    $this->getDoctrine()->getEntityManager()->getRepository('AdminBlogBundle:Condkpi'); 
   $em = $this->getDoctrine()->getEntityManager();
   $uti=$repository->findOneById($id);
   $em->remove($uti);
   $em->flush();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:21:35.950

`POST`您正在通过方法发送“id” 。所以，你需要改变：

```
$id=$this->getRequest()->query->get('id'); 
```

进入：

```
$id=$this->getRequest()->request->get('id'); 
```

此外，您可以更改：

```
$uti=$repository->findOneBy(array('id' => $id)); 
```

进入：

```
$uti=$repository->find($id); 
```

..作为`find()`使用主键搜索实体...

在旁注中，什么是“supprimerkpi”？这不可能是有效的目标网址，对吧？:)

# haxe - 遍历哈希

> ID：13057832
> 
> 赞同：0
> 
> 时间：2012-10-24T21:12:52.803
> 
> 标签：haxe

在我下面的代码中，字段长度始终为 0，我很确定其中有一些键值对。

```
var fields = Reflect.fields(_commandMap);
trace("mapping "+fields.length); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T09:20:15.723

您无法访问 Hash 中数组形式的值。

这是一个哈希

```
var a = new Hash();
a.set("hello", 0);
a.set("bonjour", 1);
a.set("ohai", 2); 
```

这是您可以访问值/键的一些方法：

```
for (value in a)
{
    trace(value); //Will trace 0, 1, 2 (no assurance that it will be in that order)
}

for (key in a.keys())
{
    trace(key); //Will trace hello, bonjour, ohai (no assurance that it will be in that order)
} 
```

如果要将哈希转换为数组，请使用[Lambda](http://haxe.org/api/lambda)：

```
var valueArray = Lambda.array(a);
trace(valueArray[0]); //can be 0, 1 or 2

//since keys() returns an Iterator, not an Iterable, we cannot use Lambda here...
var keyArray = [];
for (key in a.keys()) keyArray.push(key);
trace(keyArray[0]); //can be hello, bonjour or ohai 
```

# linux - MongoDB 服务无法在 Linux 上的不同用户下启动

> ID：13057834
> 
> 赞同：0
> 
> 时间：2012-10-24T21:13:03.103
> 
> 标签：linux, mongodb, permissions, startup

```
mongod 在某个 Linux ID 下运行，现在需要在不同的 ID 下运行。
启动命令：
   mongod -vvvvv --dbpath $dbpath --fork --rest --journal --logpath $logpath

我像这样更改了现有数据库的权限：
   查找 /data/mongo -user XXX -ls -exec chmod --verbose a+rw {} \;

现在烫发：
   -rw-rw-rw- 1 XXX qs_pbdev 16777216 Oct 24 16:56 /data/mongo/hprsui.ns

mongod 启动消息：

   10 月 24 日星期三 16:59:27 [initandlisten] mmf open /data/mongo/hprsui.ns
   10 月 24 日星期三 16:59:27 [initandlisten] 无法打开 /data/mongo/hprsui.ns errno:1 不允许操作
   10 月 24 日星期三 16:59:27 [initandlisten] mmf finishOpening 0 /data/mongo/hprsui.ns len:16777216

我做错了什么以及 mongod 需要哪些其他权限？
操作系统是 Linux RHEL 5.3.2
谢谢你。

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:00:26.110

您需要授予对它自己的文件夹的权限，而不仅仅是对现有文件，因为它需要创建数据文件的新范围

尝试运行命令：

```
chown -R XXX /data/mongo 
```

这将为您想要运行 mongodb 的新用户提供所有权。

# java - 在一个 JFrame 中使用两个 JPanel

> ID：13057836
> 
> 赞同：11
> 
> 时间：2012-10-24T21:13:14.873
> 
> 标签：java, swing, user-interface, layout

我正在尝试创建一个程序，该程序允许用户单击按钮以将某些东西放入其中`JPanel`并允许他们移动该项目。我已经找到了一个很好的布局来允许移动组件（请参阅[此](http://tips4java.wordpress.com/2011/10/23/drag-layout/)链接）。但是，我只是好奇创建这样的布局的最佳方法？我希望有这样的东西：

![布局理念](../Images/9342cad3d83cddbc17f9589520210f88.png)

我怎样才能做到这一点？我要使用两个`JPanel`或其他东西吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-24T21:20:19.830

主面板（或窗口内容窗格）必须有一个`BorderLayout`作为布局管理器。

然后，按钮面板将添加到`BorderLayout.WEST`，拖动面板将添加到`BorderLayout.CENTER`.

摆动布局管理器有一个[视觉指南。](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-24T21:29:46.600

尝试使用`JSplitPane`：

![在此处输入图像描述](../Images/33e9d2c53dddea914787c2c3ecaa7343.png)

这是一个代码示例：

```
class SplitPane extends JFrame {

private     JSplitPane  splitPaneV;
private     JSplitPane  splitPaneH;
private     JPanel      panel1;
private     JPanel      panel2;
private     JPanel      panel3;

public SplitPane(){
    setTitle( "Split Pane Application" );
    setBackground( Color.gray );

    JPanel topPanel = new JPanel();
    topPanel.setLayout( new BorderLayout() );
    getContentPane().add( topPanel );

    // Create the panels
    createPanel1();
    createPanel2();
    createPanel3();

    // Create a splitter pane
    splitPaneV = new JSplitPane( JSplitPane.VERTICAL_SPLIT );
    topPanel.add( splitPaneV, BorderLayout.CENTER );

    splitPaneH = new JSplitPane( JSplitPane.HORIZONTAL_SPLIT );
    splitPaneH.setLeftComponent( panel1 );
    splitPaneH.setRightComponent( panel2 );

    splitPaneV.setLeftComponent( splitPaneH );
    splitPaneV.setRightComponent( panel3 );
}

public void createPanel1(){
    panel1 = new JPanel();
    panel1.setLayout( new BorderLayout() );

    // Add some buttons
    panel1.add( new JButton( "North" ), BorderLayout.NORTH );
    panel1.add( new JButton( "South" ), BorderLayout.SOUTH );
    panel1.add( new JButton( "East" ), BorderLayout.EAST );
    panel1.add( new JButton( "West" ), BorderLayout.WEST );
    panel1.add( new JButton( "Center" ), BorderLayout.CENTER );

}

public void createPanel2(){
    panel2 = new JPanel();
    panel2.setLayout( new FlowLayout() );

    panel2.add( new JButton( "Button 1" ) );
    panel2.add( new JButton( "Button 2" ) );
    panel2.add( new JButton( "Button 3" ) );
}

public void createPanel3(){
    panel3 = new JPanel();
    panel3.setLayout( new BorderLayout() );
    panel3.setPreferredSize( new Dimension( 400, 100 ) );
    panel3.setMinimumSize( new Dimension( 100, 50 ) );

    panel3.add( new JLabel( "Notes:" ), BorderLayout.NORTH );
    panel3.add( new JTextArea(), BorderLayout.CENTER );
}

public static void main( String args[] ){
    try {
        UIManager.setLookAndFeel("com.sun.java.swing.plaf.windows.WindowsLookAndFeel");
    } catch (Exception evt) {}
    // Create an instance of the test application
    SplitPane mainFrame = new SplitPane();
    mainFrame.pack();
    mainFrame.setVisible( true );
}
} 
```

你可以玩 `splitPaneH.setOneTouchExpandable`真/假

您可以为两者配置分隔线位置，例如：

```
Toolkit tk = Toolkit.getDefaultToolkit();
    Dimension d = tk.getScreenSize();
    int width = d.width;
    int height = d.height;

    spane.setDividerLocation((width*3)/4);
    spanex.setDividerLocation(width/4); 
```

# python - 守护进程时Python子进程未执行

> ID：13057838
> 
> 赞同：1
> 
> 时间：2012-10-24T21:13:34.123
> 
> 标签：python, shell, subprocess, daemon, popen

我尝试在父类被守护的方法中执行脚本。

autogamma.sh 是一个需要安装 ImageMagick（并使用转换）的脚本，可以在这里找到：[http ://www.fmwconcepts.com/imagemagick/autogamma/index.php](http://www.fmwconcepts.com/imagemagick/autogamma/index.php)

```
import os
import subprocess
import daemon

class MyClass():
    def __init__(self):
        self.myfunc()
    def myfunc(self):
        script = os.path.join(os.path.dirname(os.path.realpath(__file__)), 'autogamma.sh')
        cmd = ('/bin/sh %s -c average /tmp/c.jpg /tmp/d.jpg' % script).split(' ')
        ret = subprocess.Popen(cmd).communicate()

with daemon.DaemonContext():
    process = MyClass()
    process.run() 
```

仅在启动类 MyClass 时正确执行脚本。我认为 env 或类似的东西有问题，但无法得到它。

Rsync、mediainfo、ffprobe 也出现了问题。使用 Python 2.7.3 和 python-daemon 1.6，在 mac os、centos 5.5、ubuntu 12.04TLS 上测试

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:31:08.673

该脚本非常短，如果排除读取命令行参数、注释和其他颜色模式的代码，它不到 75 行。我只是将其转换为 Python。

就像评论所暗示的那样，最好的方法是使用 ImageMagick 的 python 包装器之一。

你也可以`convert`直接打电话，虽然它可能会很痛苦。这是一个小片段：

```
import subprocess

def image_magick_version():
    output = subprocess.check_output("/usr/local/bin/convert -list configure", shell=True)

    for line in output.split('\n'):
        if line.startswith('LIB_VERSION_NUMBER'):           
            _, version = line.split(' ', 1)
            return tuple(int(i) for i in version.split(','))

im_version = image_magick_version()    
if im_version < (6,7,6,6) or im_version > (6,7,7,7) :
    cspace = "RGB"
else:
    cspace = "sRGB"

if im_version < (6,7,6,7) or im_version > (6,7,7,7):
    setcspace = "-set colorspace RGB"
else:
    setcspace = "" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T23:13:20.977

当我怀疑环境问题时，我会做以下两件事之一：

1.  使用“env - 不管脚本”在前台运行脚本。这应该清除环境，并将错误发送到终端的标准错误。
2.  正常运行脚本，但将 stdout 和 stderr 重定向到 /tmp 中的文件：whatever-script > /tmp/output 2>&1

这些使无 tty 的脚本不那么不透明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T15:03:02.357

我终于找到了问题所在。这实际上是一个路径问题。在查看库后，我发现了这个有用的参数：

```
 `working_directory`
        :Default: ``'/'``

        Full path of the working directory to which the process should
        change on daemon start.

        Since a filesystem cannot be unmounted if a process has its
        current working directory on that filesystem, this should either
        be left at default or set to a directory that is a sensible “home
        directory” for the daemon while it is running. 
```

所以我像这样设置了守护进程：

```
with daemon.DaemonContext(working_directory='.'):
    process = MyClass()
    process.run() 
```

现在我有了正确的路径，并且我的脚本已正确执行。

# c# - 从 Visual Basic 转换为 C#

> ID：13057839
> 
> 赞同：-1
> 
> 时间：2012-10-24T21:13:34.143
> 
> 标签：c#, vb.net

你如何将这段代码（在 Visual Basic 上）翻译成 C#

```
For m = 1 To 12
     Dim daysInMonth = curCulture.Calendar.GetDaysInMonth(year, m)
     Dim firstMonthDate = New Date(year, m, 1)
     Dim daysBefore = (7 + (firstMonthDate.DayOfWeek - firstYearDate.DayOfWeek)) Mod 7
     Dim daysBehind = (tblCalendar.Columns.Count - 2) - (daysBefore + daysInMonth) - 1
     Dim monthDays = From d In Enumerable.Range(1, daysInMonth) Select New With {.Day = d.ToString}
     Dim emptyDaysBefore = From d In Enumerable.Range(1, daysBefore) Select New With {.Day = ""}
     Dim emptyDaysAfter = From d In Enumerable.Range(1, daysBehind) Select New With {.Day = ""}
     Dim montos = From d In Enumerable.Range(1, 2) Select New With {.Day = "0"}
     Dim monthName = curCulture.DateTimeFormat.GetMonthName(m)
     Dim allFields = ({New With {.Day = monthName}}.
                    Union(emptyDaysBefore).
                    Union(monthDays).
                    Union(emptyDaysAfter).
                    Union(montos).
                    Select(Function(d) d.Day)
                    ).ToArray
     tblCalendar.Rows.Add(allFields)
  Next 
```

我不能简单地通过这样做找到联合方法：

```
for (int _m = 1 ; _m <= 12; _m++) {
     int _daysInMonth = _currentCulture.Calendar.GetDaysInMonth(_selYear, _m);
     DateTime _firstMonthDate = new DateTime(_selYear, _m, 1);
     int _daysBefore = (7 + (_firstMonthDate.DayOfWeek - _firstDateOfYear.DayOfWeek)) % 7;
     int _daysBehind = (_tableCalendar.Columns.Count) - (_daysBefore + _daysInMonth) - 1;
     var _monthDays = from d in Enumerable.Range(1, _daysInMonth) select new { Day = d.ToString() };
     var _emptyDaysBefore = from d in Enumerable.Range(1, _daysBefore) select new { Day = "" };
     var _emptyDaysAfter = from d in Enumerable.Range(1, _daysBehind) select new { Day = "" };
     string _monthName = _currentCulture.DateTimeFormat.GetMonthName(_m);

     var _allFields = (new { 
               Day = _monthDays
           });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:31:46.530

对于代码：

```
{New With {.Day = monthName}} 
```

这是 VB.NET 中的一个数组 - 它是一个单元素数组，但仍然是一个数组。所以相应的 C# 代码将是：

```
new[] { new { Day = monthName } }; 
```

其余的 LINQ 表达式应该从那里开始工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:26:46.917

您不需要在 C# 中使用联合。例如，我可以像这样创建一个匿名类型：

```
var anon = new {someString = "S", someInt = someLocalIntValue, myCustomClass = this}; 
```

[http://msdn.microsoft.com/en-us/library/bb384061.aspx](http://msdn.microsoft.com/en-us/library/bb384061.aspx)

不完全确定这是您正在寻找的，但我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T21:22:46.417

我不确定这些工具的效果如何，因为我几乎不需要做这种事情。但是你可以试试[http://www.developerfusion.com/tools/convert/vb-to-csharp/](http://www.developerfusion.com/tools/convert/vb-to-csharp/)

# haskell - 寻找haskell高阶函数

> ID：13057840
> 
> 赞同：5
> 
> 时间：2012-10-24T21:13:36.743
> 
> 标签：haskell, functional-programming, function-composition, pointfree

将列表压缩到自身上的函数可以定义为：

```
let adjacent1 l = zip l $ tail l 
```

这行得通，但我想以无点风格定义它。为此，我定义了一个函数`dollarize`：

```
let dollarize f1 f2 x = f1 x $ f2 x
let adjacent1 = dollarize zip tail 
```

这可行，但显然我宁愿不定义自己的高阶函数。有没有办法找到 的标准等价物`dollarize`，假设它存在？如果不是，那么用于组合功能的此类功能在哪里？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-24T21:46:24.557

该[`pointfree`](http://hackage.haskell.org/package/pointfree)工具可以自动为您执行此操作。

```
$ pointfree "\l -> zip l (tail l)"
ap zip tail
$ pointfree "\f1 f2 x -> f1 x $ f2 x"
ap 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-24T21:15:53.013

How about using the `Applicative` instance of `(->) a`?

```
Prelude Control.Applicative> :t zip <*> tail
zip  <*> tail :: [a] -> [(a, a)]
Prelude Control.Applicative> zip <*> tail $ [1 .. 4]
[(1,2),(2,3),(3,4)] 
```

short and sweet.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-24T21:22:34.290

根据@Daniel Fischer 的回答。您也可以使用 monad 实例`(->) a`：

```
Prelude Control.Monad.Instances> let adjacent1 = tail >>= flip zip
Prelude Control.Monad.Instances> adjacent1 [1..4]
[(1,2),(2,3),(3,4)] 
```

# asp.net - 如何取消选择节点或将 myTreeView.SelectedNode 设置为 null？

> ID：13057841
> 
> 赞同：0
> 
> 时间：2012-10-24T21:13:37.773
> 
> 标签：asp.net, .net-4.0, treeview, treenode, system.web.ui.webcontrols

我正在开发一个用 C# 编写的在线 Web 应用程序，我正在使用 System.Web.UI.WebControls.TreeView

树视图由嵌入在网页上的 asp:TreeView 标签表示。

很奇怪，我使用的是 .NET Framework 4，如果我尝试类似

```
myTreeView.SelectedNode = null 
```

然后它说“不能分配给-它是只读的”

你能帮忙吗？如何取消选择节点或将 myTreeView.SelectedNode 设置为 null？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T18:37:03.790

这是我用来确保 SelectedNode 被取消选择的代码：

```
if (myTreeView.SelectedNode != null)
{
    myTreeView.SelectedNode.Selected = false;
} 
```

# wpf - 来自不同程序集的 WPF 进度条消息

> ID：13057847
> 
> 赞同：0
> 
> 时间：2012-10-24T21:13:52.543
> 
> 标签：wpf

我正在使用带有 MVVM 的 WPF。我需要一些关于如何从以下架构将进度消息发送到 UI 的建议。

UI - 文件处理窗口。ViewModel - 具有 Message、ProgressValue 的属性 消息绑定到 UI 文本块，以在用户处理其他事情时更新 ui 在后台发生的事情。

当用户单击处理文件时，将调用 ViewModel ProcessFile。

视图模型直接不处理任何文件。它反过来调用一个不同的程序集来处理文件。

以下是代码片段（我无法将实际代码放在这里）：

XAML：

```
 <StackPanel>
                <TextBlock Text="{Binding Message}" />
                <ProgressBar MinWidth="250" Height="25" IsIndeterminate="True" />
            </StackPanel> 
```

目前我有它是不确定的。我将更改它以显示完成百分比。

视图模型

```
 private string _message;
    public string Message
    {
       get 
       { 
           return _message;
       }
       set 
       { 
           _message=value; 
           OnPropertyChanged("Message");
       }
    }

    private int _progressValue;
    public int ProgressValue
    {
       get { return _progressValue;}
       set 
       { _progressValue=value; 
           OnPropertyChanged("ProgressValue");
       }
    }

    public void StartProcess(string fileName)
    {
       ThreadStart tStart = delegate()
        {
           differentAssembly.StartProcess(string fileName);
        };
        Thread processThread = new Thread(tStart);
        processThread.IsBackground = true;
        processThread.Start();
    } 
```

现在说了我如何从不同的Assembly 获取进度信息。这将是一条说明进度和百分比的消息。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T22:47:57.767

关于增加不同程序集的进度条值，我有同样的问题。

我没有调用当然有很多优点的线程，而是使用了 Observable 模式。它使用代表和后台工作人员。

如果我是对的，我们可以将 Observable 模式与 MVVM 一起使用。

如果我回答了你的问题，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T21:23:21.773

你能做这样的事情吗？

```
differentAssembly.StartProcess(fileName, x => ProgressValue = x); 
```

然后您的 StartProcess 函数负责更新进度：

```
public class DifferentAssembly
{
    public void StartProcess(string fileName, Action<int> progressValue)
    {
        // Initialize progress
        progressValue(0);

        // Do Some Things
        progressValue(25);

        // Do More Things
        progressValue(50);

        // Almost There!
        progressValue(75);

        // And, I'm Done
        progressValue(100);
    }
} 
```

# sql - 在这个 Oracle 查询中使用 to_date 有什么问题？

> ID：13057848
> 
> 赞同：0
> 
> 时间：2012-10-24T21:13:59.193
> 
> 标签：sql, oracle

我有一个这样的查询：

```
INSERT INTO some_table (date1, date2) 
VALUES (to_date('2012-10-24','YYYY-MM-DD'), to_date('2012-10-24','YYYY-MM-DD')); 
```

但我得到：

```
SQL Error: ORA-01858: a non-numeric character was found where a numeric was expected
01858\. 00000 -  "a non-numeric character was found where a numeric was expected" 
```

和：

```
*Cause:    The input data to be converted using a date format model was
           incorrect.  The input data did not contain a number where a number was
           required by the format model.
*Action:   Fix the input data or the date format model to make sure the
           elements match in number and type.  Then retry the operation. 
```

但我的用法`to_date`似乎还可以？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T21:21:22.757

这看起来是正确的。它对我有用，所以问题必须有其他不属于你的例子的东西......

```
SQL> create table some_table( date1 date, date2 date );

Table created.

SQL> INSERT INTO some_table (date1, date2)
  2  VALUES (to_date('2012-10-24','YYYY-MM-DD'), to_date('2012-10-24','YYYY-MM-DD'));

1 row created. 
```

你真的在使用硬编码的文字吗？还是您要传递的字符串`to_date`来自桌子？表中是否有可能（至少）有一行数据与预期格式不匹配。请注意，最终被`WHERE`子句过滤掉的行，即使是`WHERE`子查询中的子句，仍然可以`to_date`在被过滤掉之前调用并导致错误。所以你有类似的东西是完全合理的

```
INSERT INTO some_table( date1, date2 )
  SELECT to_date( string1, 'YYYY-MM-DD' ), to_date( string2, 'YYYY-MM-DD' )
    FROM (SELECT *
            FROM some_other_table
           WHERE condition_that_limits_the_data_to_just_valid_date_strings )
   WHERE some_other_condition 
```

返回错误。

# iphone - 适用于 iOS 的商店定位器 API

> ID：13057851
> 
> 赞同：-1
> 
> 时间：2012-10-24T21:14:04.077
> 
> 标签：iphone, ios, xcode, ipad, ios5

我正在浏览一些带有商店定位器的 iPhone 应用程序，允许用户根据邮政编码或当前位置查找商店。

我想知道是否有任何方法可以找到列出特定商店（沃尔玛、Target 等）的所有地址的 XML/JSON 文件，我可以使用 NSXML 解析器提取这些地址，然后将地址关联到 MapView . 我必须使用 Google Maps API 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:40:12.040

您可以查看 Foursquare 搜索 API：[https ://developer.foursquare.com/docs/venues/search](https://developer.foursquare.com/docs/venues/search)

否则，可能值得手动定义用户可以从中选择的商店列表，然后手动将 XML/JSON 商店列表添加到您的包中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T06:09:46.600

实际上，今天有很多 API 可用，比如`FourSquare Google Places Search API`等等。

我认为您应该为此使用 Google Places Search API。与其他人相比，它提供了更详细的数据。他们拥有相同的出色文档。 [在这里，您应该使用 Google Places Search API。](https://developers.google.com/places/documentation/search)

[选择 FourSquare API。](https://developer.foursquare.com/docs/venues/search)

# ios - 降低 UITableViewController 的高度 [如果可能，单点触控]

> ID：13057853
> 
> 赞同：0
> 
> 时间：2012-10-24T21:14:11.970
> 
> 标签：ios, xamarin.ios

尝试了以下属性，但没有像我需要的那样工作：

this.TableView.ContentInset this.TableView.ContentOffset

基本上，我在 uitableviewcontroller 的最顶部有图像标题，所以当 tableview 被填充时，标题图像被单元格覆盖......请看图像

![在此处输入图像描述](../Images/8ddb0dc5888a0f295c8c8e93bec8d63a.png)

最后，我想将单元格向下移动一点，以便为标题图像留出空间。

* * *

更新 ：

添加了这段代码并以某种方式工作

```
UIImageView img = new UIImageView (new RectangleF ((this.View.Bounds.Width- 164)/2,0, 164, 44));
img.Image = UIImage.FromFile ("Images/app-name.png");
this.TableView.TableHeaderView(img); 
```

![在此处输入图像描述](../Images/58dd3465626258b2ce5f449b9c02d9b5.png)

但是图像被拉长了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:15:56.820

Add your image in table header `tableHeaderView`.

Also, set custom height to the table header - sectionHeaderHeight:

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)

*Note: these are UITableView class's properties. I am not sure about Monotouch but you might be able to find some similar properties in it.*

* * *

Please try any of the following:

Refer to this answer and its comments: [Adding an image to a Section in Monotouch.Dialog](https://stackoverflow.com/questions/8424847/adding-an-image-to-a-section-in-monotouch-dialog)

```
HeaderView = new UIImageView (UIImage.FromFile ("imagename.png")) 
```

Or refer to this : [http://dantes-andreea.blogspot.com.au/2011/08/monotouch-class-for-resize-maintaining.html](http://dantes-andreea.blogspot.com.au/2011/08/monotouch-class-for-resize-maintaining.html)

* * *

Try this : [iphone: put uiimage in tableview section header, stretch problem](https://stackoverflow.com/questions/6091477/iphone-put-uiimage-in-tableview-section-header-stretch-problem)

# c# - C# datetime 和 SQL datetime 之间的相等比较失败

> ID：13057855
> 
> 赞同：3
> 
> 时间：2012-10-24T21:14:20.737
> 
> 标签：c#, sql-server-2008, datetime, linq-to-entities, equality

我正在尝试在 C# 日期时间和 SQL 日期时间之间进行相等比较，由于这些值的存储精度，这似乎失败了。

假设我有一个非常简单的 SQL 表，其中包含以下字段：

```
ID (PK, int, not null) - identity
Title (text, null)
UpdateTime (datetime, not null) 
```

我通过实体框架创建了一个类对象，将其 UpdateTime 设置为 DateTime.Now，如下所示：

```
DateTime now = DateTime.Now;
Title.UpdateTime = now; 
```

当我将新对象插入表中时，我看到所有值似乎都已正确存储。现在我想要为我的对象创建的 ID。

这就是事情变得无聊的地方。我尝试通过 LINQ 拉回 ID：

```
Title.ID = context.DBTitles.Where(x=>x.UpdateTime == now).FirstOrDefault().ID; 
```

这会引发异常，因为查询返回 null，尽管我插入的“现在”应该与插入到表中的“现在”相同。

所以我的问题是：如何确保我的 C# 日期时间等同于存储在 SQL 中的日期时间？拿回我的身份证的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T21:16:56.167

如果您使用的是 SQL 服务器，请`DateTime2`改用。它具有与 .NET 类型相同的精度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T21:17:23.060

如果您使用的是 Linq，您插入的对象不会在提交时获得分配给它的 ID 吗？你不需要“召回”它。

# grails - 带 Chrome 的 Grails、Geb、Selenium：无法连接？

> ID：13057856
> 
> 赞同：0
> 
> 时间：2012-10-24T21:14:24.327
> 
> 标签：grails, selenium-webdriver, geb

# 问题

当我使用 Chrome 驱动程序运行时，我的 selenium 功能测试失败，但在使用 Firefox 时有效。

## 我的环境

1.  Mac OS X 山狮
2.  Chrome 版本 22.0.1229.94
3.  构建信息：版本：'2.2.1'，修订：'16551'，时间：'2012-04-11 21:42:35'
4.  系统信息：os.name：'Mac OS X'，os.arch：'x86_64'，os.version：'10.8.2'，java.version：'1.6.0_35' 驱动程序信息：driver.version：ChromeDriver

## 重现步骤

[使用来自 github 的 Geb Grails 示例应用程序](https://github.com/geb/geb-example-grails)时会发生异常。

使用 Chrome 驱动程序运行应用程序：

```
grails -Dgeb.env=chrome test-app 
```

测试将开始运行，Chrome 实例成功打开，但之后没有任何反应。Chrome 浏览器并没有定向到一个 url，它只是坐在那儿，脸上带着傻笑。在 15 秒（左右）超时后，控制台中会引发以下错误。

## 错误

```
Caused by: org.openqa.selenium.WebDriverException: Unable to either launch or connect to Chrome. 
Please check that ChromeDriver is up-to-date. Using Chrome binary 
at: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome 
```

## 我的调试步骤

1.  根据[这个 stackoverflow 帖子](https://stackoverflow.com/questions/12314038/cannot-connect-to-chrome-on-selenium-mountain-lion)，我尝试了各种不同版本的驱动程序，但没有任何效果。
2.  使用 Firefox 驱动程序时测试成功（遗憾的是，我必须使用 Chrome 进行测试）。
3.  尝试使用最新的 chrome 测试版`Version 23.0.1271.40 beta`。没运气。
4.  将测试应用程序中的 geb 和 selenium 版本升级到最新和最好的：`def gebVersion = "0.7.2" def seleniumVersion = "2.25.0"`

## 谦虚的感谢部分

谢谢你看看这个。我很想采用geb，但迄今为止这是一场艰苦的战斗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T22:31:55.410

可能是一个愚蠢的答案，但你安装了 chrome 驱动程序吗？[http://code.google.com/p/selenium/wiki/ChromeDriver](http://code.google.com/p/selenium/wiki/ChromeDriver)

对于 Firefox，您不需要安装驱动程序，但对于 Chrome 和 IE，您需要。这可能就是您的测试使用 FF 而不是 chrome 运行的原因。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:56:55.360

我不确定它是否与 Geb 有关，我认为当您使用 WebDriver Chrome 驱动程序运行测试时，您会得到类似的行为。

当 Chrome 不在路径上时，我已经看到了这类错误。chrome.binary 应该始终是实际可执行文件的绝对路径。对于 Mac，这通常看起来像：/Applications/Google Chrome.app/Contents/MacOS/Google Chrome

您使用的是什么版本的 Selenium/WebDriver？

# java - 能够将 Lat Long 绘制到图像上并保存为 png/jpg 的库？

> ID：13057858
> 
> 赞同：3
> 
> 时间：2012-10-24T21:14:29.907
> 
> 标签：java, tomcat, gis, latitude-longitude

我正在研究让我的 Tomcat 服务器从一组卫星的经度和纬度位置动态创建图像并将其覆盖在世界地图上然后将图像导出为 png 等的可行性。是否有任何图书馆可以做到这一点（尤其是人们会推荐的图书馆）？

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:09:53.180

听起来你正在重新发明轮子。

您可以使用 WMS 服务器（与 TomCat 一起工作虽然默认通常是码头）。WMS 服务器（有关最流行的开源示例，请参阅： [GeoServer](http://geoserver.org/)或[MapServer ）可以从您的数据库中获取数据，并根据请求在背景图像（即您的世界地图，或者可能是 OpenLayers）上呈现它。](http://www.mapserver.org/)

WMS 查询可以指定图像大小和文件格式。对于您想要的东西，这可能有点矫枉过正，但它们很容易设置（尤其是 GeoServer）。

如果您对此还有其他疑问，[https://gis.stackexchange.com/](https://gis.stackexchange.com/)可能会为您提供更多特定领域的帮助。

# mysql - SQL - 从行中获取特定值，然后使用该值

> ID：13057859
> 
> 赞同：1
> 
> 时间：2012-10-24T21:14:32.220
> 
> 标签：mysql, sql

我有一个包含名称、等级和分数的数据表。例如，“约翰”获得了 B 级，其分值为 3.0。

如何选择低于“B”级的条目？

所以我不知何故需要做这样的事情

```
Value = select Point from MyTable where Grade="B" 
```

接着

```
select * from MyTable where Point < value 
```

但显然 SQL 必须是一个语句......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:23:21.190

您可以嵌套选择并添加子查询：

```
SELECT realtable.* 
FROM (SELECT Point FROM MyTable WHERE Grade="B" LIMIT 1) subquery, MyTable realtable
WHERE subquery.Point > realtable.Point 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T21:15:52.843

Try it use in subquery as below:

```
select * 
from MyTable 
where Point < (select Point 
               from MyTable 
               where Grade="B") 
```

but if you subquery returns more than one row try to use aggregate funcion for example `min`

```
select * 
from MyTable 
where Point < (select min(Point)
               from MyTable 
               where Grade="B") 
```

or with `LIMIT` and `join`:

```
select * 
from MyTable mt
join (select Point from MyTable 
      where Grade="B"
      order by Point
      LIMIT 1) mt2 on mt.Point < mt2.Point 
```

# java - 如何将 cursorLoader 转换为 Loader Hopefully simple java question I've just forgotten or never understood. I've been playing with Loaders in Android 4.0\. The program is working as was but now I'm looking to the 'next' part. I want a 问问题 问问题 2012-10-24T21:15:07.830 5867 次 This question shows research effort; it is useful and clear 5 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. Hopefully simple java question I've just forgotten or never understood. I've been playing with Loaders in Android 4.0\. The program is working as was but now I'm looking to the 'next' part. I want a standard Cursor loader and a custom AsyncTaskLoader. I'm stuck on part 1 trying to convert a cursorLoader to a Loader and return it. @Override //public Loader <cursor>onCreateLoader(int id, Bundle args) { public Loader onCreateLoader(int id, Bundle args) { if (id == LISTVIEWLOADER) { String[] projection = { RunnerTable.COLUMN_ID, RunnerTable.COLUMN_NAME }; CursorLoader cursorLoader = new CursorLoader(getActivity(), FanContentProvider.CONTENT_URI, projection, null, null, null); return cursorLoader; //HERE IS THE PROBLEM } return null; } Type mismatch cannot convert from CursorLoader to Loader. I believe can make it work with public class MainFragment extends ListFragment implements //LoaderManager.LoaderCallbacks <cursor>LoaderManager.LoaderCallbacks But don't like the warning: LoaderManager.LoaderCallbacks is a raw type. References to generic type LoaderManager.LoaderCallbacks should be parameterized Thanks for any assistance you can provide. iPhone App Local Database and Updating the App I have an iPhone app which consists of local database (sqlite3). The database consists of a MyVegetableGarden table which stores data about user's vegetables. When I push out an update to my application it clears the MyVegetableGarden table and user's database will be lost. How can I prevent this from happening or maintain user's data. javaandroidcastingandroid-loadermanager 4 5 回答 5 This answer is useful 30 尽管这是一个旧线程，但尚未完全回答。tch0106 提到了这里的问题，但没有完全描述。 我刚刚遇到了同样的问题并在导入部分解决了它。简单来说：一起使用支持Loader、CursorLoader和LoaderCallbacks。 在 android 本地库和支持库中都可以找到几个类。不要将支持库与非支持库版本混用。 // Use these together import android.support.v4.content.CursorLoader; import android.support.v4.app.LoaderManager.LoaderCallbacks; import android.support.v4.content.Loader; import android.support.v4.widget.SimpleCursorAdapter; // Or use these, but don't mix and match import android.content.CursorLoader; import android.content.Loader; import android.app.LoaderManager.LoaderCallbacks; import android.widget.SimpleCursorAdapter; 于 2013-06-14T13:56:52.543 回答 This answer is useful 7 检查您的导入，您可能会误用这两个： import android.content.CursorLoader; 和 import android.support.v4.content.CursorLoader; 于 2012-12-02T06:19:00.290 回答 This answer is useful 2 Change public Loader onCreateLoader(int id, Bundle args) { to public Loader onCreateLoader(int id, Bundle args) { First statement tells jvm, return type is concrete Object. New statement tells jvm that any TYPE which is of Object. Please read this tutorial. 于 2012-10-24T21:16:05.887 回答 This answer is useful 0 我已经通过更改导入解决了我的问题，与这个问题非常相似......当我声明自定义加载程序时，我犯了错误。 // My custom loader java class: import android.content.Context; import android.content.AsyncTaskLoader; //this was the place of my mistake right here import java.util.ArrayList; public class ArticleLoader extends AsyncTaskLoader<arraylist<article>> { public ArticleLoader(Context context){ super(context); } @Override protected void onStartLoading() { forceLoad(); } @Override public ArrayListloadInBackground() { ArrayListarticles = QueryUtils.fetchArticles(getContext()); return articles; } } 所以，发生的事情是我没有足够注意，Android Studio 已经自动导入了“android.support.v4.content.AsyncTaskLoader”。 希望这对某人有帮助！ 吨 于 2017-06-27T20:14:11.853 回答 This answer is useful -1 看看这个： Android AsyncTaskLoader 参考 我相信您的问题出在这一行： public class MainFragment extends ListFragment implements //LoaderManager.LoaderCallbacks <cursor>LoaderManager.LoaderCallbacks 你应该改成这样： public static class AppListFragment extends ListFragment implements LoaderManager.LoaderCallbacks<list<appentry>> 于 2013-05-21T09:54:59.363 回答 Related 1 asp.net - 带有查询字符串的 URL 路由 0 android - 谷歌导航在键盘锁后面启动时 1 c# - 从 C# 中的 JSON 对象中获取值 1 android - 根据他们的 Playstore 帐户通知设备 3 java - 什么是 Java 的异步任务的 C/C++ 等价物 1 c++ - 在 MFC 中的记事本中打开文本 2 mysql - 将值从数据库获取到组合框的问题 1 python - 如何检测智能卡扫描时的事件 1 php - 难以从 JSON 页面获取信息并放入 MySQL 1 c# - 将列表框项作为数组传递到其他页面 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13057865
> 
> 赞同：5
> 
> 时间：
> 
> 标签：java, android, casting, android-loadermanager

Hopefully simple java question I've just forgotten or never understood. I've been playing with Loaders in Android 4.0\. The program is working as was but now I'm looking to the 'next' part. I want a standard Cursor loader and a custom AsyncTaskLoader. I'm stuck on part 1 trying to convert a cursorLoader to a Loader and return it.

```
@Override
    //public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    public Loader<Object> onCreateLoader(int id, Bundle args) {

        if (id == LISTVIEWLOADER) {
            String[] projection = { RunnerTable.COLUMN_ID,
                    RunnerTable.COLUMN_NAME };
            CursorLoader cursorLoader = new CursorLoader(getActivity(),
                    FanContentProvider.CONTENT_URI, projection, null, null,
                    null);

            return cursorLoader;   //HERE IS THE PROBLEM
        }
        return null;
    } 
```

Type mismatch cannot convert from CursorLoader to Loader.

I believe can make it work with

```
public class MainFragment extends ListFragment implements
        //LoaderManager.LoaderCallbacks<Cursor>
        LoaderManager.LoaderCallbacks 
```

But don't like the warning:

LoaderManager.LoaderCallbacks is a raw type. References to generic type LoaderManager.LoaderCallbacks should be parameterized

Thanks for any assistance you can provide.

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-06-14T13:56:52.543

尽管这是一个旧线程，但尚未完全回答。tch0106 提到了这里的问题，但没有完全描述。

我刚刚遇到了同样的问题并在导入部分解决了它。简单来说：一起使用支持Loader、CursorLoader和LoaderCallbacks。

在 android 本地库和支持库中都可以找到几个类。不要将支持库与非支持库版本混用。

```
// Use these together
import android.support.v4.content.CursorLoader;
import android.support.v4.app.LoaderManager.LoaderCallbacks;
import android.support.v4.content.Loader;
import android.support.v4.widget.SimpleCursorAdapter;

// Or use these, but don't mix and match
import android.content.CursorLoader;
import android.content.Loader;
import android.app.LoaderManager.LoaderCallbacks;
import android.widget.SimpleCursorAdapter; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-02T06:19:00.290

检查您的导入，您可能会误用这两个：

```
import android.content.CursorLoader; 
```

和

```
import android.support.v4.content.CursorLoader; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T21:16:05.887

Change

```
public Loader<Object> onCreateLoader(int id, Bundle args) { 
```

to

```
 public Loader<? extends Object> onCreateLoader(int id, Bundle args) { 
```

First statement tells jvm, return type is concrete `Object`. New statement tells jvm that any TYPE which is of `Object`.

Please read this [tutorial](http://docs.oracle.com/javase/tutorial/java/generics/inheritance.html).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-27T20:14:11.853

我已经通过更改导入解决了我的问题，与这个问题非常相似......当我声明自定义加载程序时，我犯了错误。

```
// My custom loader java class:

import android.content.Context;
import android.content.AsyncTaskLoader;  //this was the place of my mistake right here
import java.util.ArrayList;

public class ArticleLoader extends AsyncTaskLoader<ArrayList<Article>> {

    public ArticleLoader(Context context){
        super(context);
    }

    @Override
    protected void onStartLoading() {
        forceLoad();
    }

    @Override
    public ArrayList<Article> loadInBackground() {
        ArrayList<Article> articles = QueryUtils.fetchArticles(getContext());
        return articles;
    }
} 
```

所以，发生的事情是我没有足够注意，Android Studio 已经自动导入了“android.support.v4.content.AsyncTaskLoader”。

希望这对某人有帮助！

吨

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-05-21T09:54:59.363

看看这个： [Android AsyncTaskLoader 参考](http://developer.android.com/reference/android/content/AsyncTaskLoader.html)

我相信您的问题出在这一行：

```
public class MainFragment extends ListFragment implements
    //LoaderManager.LoaderCallbacks<Cursor>
    LoaderManager.LoaderCallbacks 
```

你应该改成这样：

```
public static class AppListFragment extends ListFragment
    implements LoaderManager.LoaderCallbacks<List<AppEntry>> 
```</list<appentry></cursor></arraylist<article></cursor></cursor>

# ios - iPhone App 本地数据库和更新 App

> ID：13057869
> 
> 赞同：0
> 
> 时间：2012-10-24T21:15:28.123
> 
> 标签：ios

我有一个由本地数据库 ( `sqlite3`) 组成的 iPhone 应用程序。该数据库由一个`MyVegetableGarden table`存储用户蔬菜数据的数据库组成。

当我向我的应用程序推送更新时，它会清除 MyVegetableGarden 表，并且用户的数据库将丢失。

我怎样才能防止这种情况发生或维护用户的数据。

# syntax - `a += b += c` 是什么意思？

> ID：13057871
> 
> 赞同：2
> 
> 时间：2012-10-24T21:15:39.130
> 
> 标签：syntax

我看到了以下代码：`a += b += c`- 请问，有人知道这是什么意思吗？

```
a = a + b
b = b + c 
```

或者：

```
b = b + c
a = a + b 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T21:16:57.857

它取决于`+=`运算符的关联性。通常是从右到左，所以是第二个答案：`a+=b`在`b+=c`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T21:22:00.410

它只能被评估为：

```
a += (b += c) 
```

如果将其评估为：

```
(a += b) += c 
```

然后它将评估`a += b`为数值，然后尝试更改数值，而不是变量，这是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T21:17:56.677

在大多数高级语言中，像这样的表达式是从左到右计算的，因为`+=`它是从右到左关联的。在这种情况下，将 的值与`c`的值相加`b`，然后将 的值`b`（由 相加后`c`）与 相加`a`。

这相当于你的第二个块。

# apache - .htaccess 重写规则干扰子域

> ID：13057880
> 
> 赞同：0
> 
> 时间：2012-10-24T21:16:19.083
> 
> 标签：apache, .htaccess, redirect

我有这段代码要添加`www.`到我的网站：

```
RewriteCond %{HTTP_HOST} !^www\.
RewriteCond %{HTTP_HOST} !^m\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

这工作正常，但是，我有一个名为的子域`users.mysite.com`

如果我浏览到

`users.mysite.com/login.php`

我的浏览器会将我重定向到

`www.users.mysite.com/users/login.php`

当然，这不存在。有什么方法可以修改此重写规则，以便正确处理我的子域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:20:36.627

你可以添加另一个`RewriteCond`

```
RewriteCond %{HTTP_HOST} !^users\. 
```

# c++ - 当 boost deadline_timer 在超时处理程序中被破坏时会发生什么

> ID：13057881
> 
> 赞同：2
> 
> 时间：2012-10-24T21:16:19.133
> 
> 标签：c++, boost, boost-asio

当一个线程已经在超时处理程序中时，在上下文切换期间销毁截止时间计时器会发生什么？

例如，如果在 TimerCallback 执行期间，上下文切换到另一个线程删除了 ScheduledCommand？

```
ScheduledCommand::ScheduledCommand(
        const boost::shared_ptr<CommandInterface> command,
        const boost::posix_time::time_duration timeTillExecution):
    mTimer(TheCommandTimerThread::instance()->IoService(), timeTillExecution),
    mCommand(command)
{
    mTimer.async_wait(boost::bind(&ScheduledCommand::TimerCallback,
                                  this,
                                  boost::asio::placeholders::error));
}

ScheduledCommand::~ScheduledCommand()
{
    Cancel();
}

void ScheduledCommand::TimerCallback(const boost::system::error_code& error)
{
    if (!error)
    {
        assert(mCommand);
        mCommand->Execute();
    }
} 
```

上述代码在 mCommand->Execute() 处存在分段错误。GDB 分析显示 mCommand 无效。可能从另一个线程中删除。谢谢。

编辑：

为什么以下更改不能解决此问题？

```
ScheduledCommand::Cancel()
{
    if (mTimer.cancel() == 0) 
    { 
        mTimer.wait() 
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:26:17.190

如果在多线程环境中，您在一个线程中删除了一个对象，而在另一个线程中使用它，您可能会发生崩溃，正如您所看到的那样。

当使用 boost::asio 时，如果你取消了定时器，你仍然必须让它执行处理程序（这将得到一个操作被取消的错误），然后你才能安全地销毁对象。根据您的其余设置，有几种方法。手动使用同步原语，使用`boost::asio::strand`将某些交互限制在单个线程中，或使用`boost::shared_ptr`确保关键对象在不再被引用之前保持可用。

没有更多信息，很难告诉您最佳选择。

# jquery - jquery 格式日期本地化

> ID：13057882
> 
> 赞同：0
> 
> 时间：2012-10-24T21:16:21.710
> 
> 标签：jquery, jquery-ui, localization, datepicker

我只是不明白，我实际上从`jquery`文档中复制了代码，也许其他人会看到它为什么不起作用。

```
$("#date").text($.datepicker.formatDate('d. MM', new Date()),{monthNames: $.datepicker.regional['lv'].monthNames}); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:20:53.267

您错误地将第三个参数传递给`$.datepicker.formatDate()`，在您的代码中它作为第二个参数传递给`text()`，更正后的形式如下：

```
$("#date").text($.datepicker.formatDate('d. MM', new Date(),{monthNames: $.datepicker.regional['lv'].monthNames})); 
```

# android - Android app wont run in device

> ID：13057884
> 
> 赞同：0
> 
> 时间：2012-10-24T21:16:42.347
> 
> 标签：android, mobile

I have an app in development that runs fine in the emulator but wont run on any android device, when the application icon is clicked the screen goes blank for a second then returns back to the device apps page, i have experimented with setting different permissions but it does not seem to solve the issue. Any ideas?

# java - 从 TreeMap 中检索 HashMap

> ID：13057889
> 
> 赞同：4
> 
> 时间：2012-10-24T21:16:55.837
> 
> 标签：java, hashmap, treemap

我使用以下复杂的数据结构。

```
departures = new TreeMap<String,  Map<String,  Set<MyObject>>>();
arrivals=new HashMap<String, Set<MyObject>>();
flights=new HashSet<MyObject>(); 
```

然后我使用循环（我也尝试了其他循环）。

```
for(String dep: nizDep){
    for(String arr: nizArr){
      for(MyObject flight: _flights){
        if(flight.getFrom().equalsIgnoreCase(dep)&&flight.getTo().equalsIgnoreCase(arr)){
                    flights.add(flight);
                 }
                }
                if(!flights.isEmpty()){
            arrivals.put(arr, flights);
                    flights.clear();
                    }
            }
            if(!arrivals.isEmpty()){
            departures.put(dep, arrivals);
            arrivals.clear();
            }
    }
    System.out.println(departures.size()); //result 14
    System.out.println(departures.containsKey("Madrid")); //result true
            arrivals=departures.get("Madrid");
    System.out.println(arrivals.size()); //result 0, arrivals is empty. WHY? 
```

我的问题是如何使用这种复杂的数据结构以及如何从出发中检索到达？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:21:44.267

```
 System.out.println(arrivals.size()); //result 0, arrivals is empty. WHY? 
```

**因为**当您调用`flights.clear();`after`arrivals.put(arr, flights);`或`arrivals.clear();`after`departures.put(dep, arrivals);`时，这会清除您的原始对象（航班和到达）。请带上您的初始化语句，即

```
 Map<String, Set<MyObject>> arrivals=new HashMap<String, Set<MyObject>>();
        Set<MyObject>(); flights=new HashSet<MyObject>(); 
```

在`for`循环**中或替换该语句，如下所示：**

```
 if(!flights.isEmpty()){
                   Set<MyObject> newflights=new HashSet<MyObject>(); 
                    newflights.addAll(flights); //copy elements to new set
                   arrivals.put(arr, newflights);
                    flights.clear();
                } 
```

你也可以用`departures`.

**现在进行检索：**

```
 Set<String> arrivalKeys = departures.keySet();
      Interator<String> arrIter = arrivalKeys.iterator();
      while(arrIter.hasNext()){
        String arrKey = arrIter.next();
        Map<String, Set<MyObject>> arrivals = departures.get(arrKey );
        //use your arrivals map object
      } 
```

同样，您可以`flights`从`arrivals`例如检索

对于上述检索到的每个到达：

```
 Set<String> flightKeys = arrivals.keySet();
      Interator<String> flIter = flightKeys.iterator();
      while(flIter.hasNext()){
        String flKey = flIter.next();
        Set<MyObject> flights = arrivals.get(flKey );
        //use your flights set object
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:46:01.577

```
arrivals=new HashMap<String, Set<MyObject>>();
departures = new TreeMap<String,  Map<String,  Set<MyObject>>>();
for(String dep: nizDep){
    for(String arr: nizArr){
      for(MyObject flight: _flights){
        if(flight.getFrom().equalsIgnoreCase(dep)&&flight.getTo().equalsIgnoreCase(arr)){
            flights=new HashSet<MyObject>(); 
            flights.add(flight);        
            arrivals.put(arr, flights);     
            departures.put(dep, arrivals);
         }
      }
   }
}
System.out.println(departures.size()); //result 14
if(departures.containsKey("Madrid")) {
    arrivals=departures.get("Madrid");
    System.out.println(arrivals.size());
} 
```

如果您想在到达和航班之间保持一对一的映射，则此代码有效。如果您想保持维护航班集的全局结构，那么您必须创建另一个全局 gflights 对象并将每个航班对象放入其中。

# java - library dependencies in maven. best practices

> ID：13057891
> 
> 赞同：2
> 
> 时间：2012-10-24T21:17:06.097
> 
> 标签：java, maven, junit, dependencies

I'm writing testing library with my own junit runner. it extends BlockJUnit4ClassRunner which is available since 4.5 till... who knows. user of my library should be able to choose whatever junit version (with BlockJUnit4ClassRunner of course). and i don't know how to define dependency on junit (let's say current version is 4.10).

*   if i make [4.5, 4.10] provided, then i have to release new version with every junit release
*   i'm not sure if [4.5, ) is good a good practise because it implicitly chooses the newest version and build may not be repeatable

e.g. mockito uses ant and junit 4.10 only for compilation and have no maven dependency on it. i also don't know if it's a good practice.

how should i solve this dependency problem

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T05:31:34.230

一般来说，JUnit 版本是向后兼容的[*]。开发人员非常小心，以便它们向后兼容。一种选择是声明对 JUnit 4.5 的依赖，然后用户可以在他们的 pom 中覆盖该版本（使用版本 4.10），它应该仍然可以工作。

如果您正在执行上述操作并声称它适用于 4.5 之后的所有版本，那么您也应该使用所有版本进行测试，这应该很容易做到。

[*] 当然不推荐使用类和方法，但仍然可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T22:16:39.470

如果您总是想坚持使用最新版本的 junit，请使用

```
<version>LATEST</version> 
```

以上将始终引用 junit 的最新发布或快照版本。

如果你使用

```
<version>RELEASE</version> 
```

然后它将引用存储库中存在的最后一个发布/非快照版本。

声明一个开放式版本范围也没有问题，它将包括 xyz 之后的最新版本，即

```
<version>[x.y.z,)</version> 
```

但是，当 junit 世界中可能发生与您的工件不兼容的 API 级别更改时，事情就会变糟。从这个意义上说，最好提供一个准确的版本并要求客户遵循相同的版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T07:05:45.920

版本标记 LATEST 和 RELEASE 的问题仅受 Maven 2.2.1 及之前的版本支持，但[不再支持 Maven 3](https://cwiki.apache.org/MAVEN/maven-3x-compatibility-notes.html#Maven3.xCompatibilityNotes-PluginMetaversionResolution)。所以问题是避免它们。

此外，如果您将对 JUnit 的依赖定义为提供的用户可以使用不同的版本而不是定义的版本。

# c++ - Implementing an interface that is not yet compilated, .cpp include?

> ID：13057893
> 
> 赞同：0
> 
> 时间：2012-10-24T21:17:13.640
> 
> 标签：c++, visual-studio-2010, visual-studio

i'm using VS2010, and i am designing a MVC application.

Say i have "Project 1" and "Project 2" in a solution. The need to be compiled in that order, P1 compiles to a DLL, P2 to an Exe file that dynamically uses the DLL. P2 declares a view interface. Both projects have a view class that implements the interface (a class with pure virtual methods).

The problem now is, that i cannot include the header file of the interface in P1, because the linker would say then that he cannot resolve this external symbol. Which is of course right, because it is compiled later in P2.

So what i did is, i added the include folder for P2 to P1 and included the interface.cpp in P1 instead of the header file.

It works, but i don't think this is what i am supposed to do. Or isn't it? The interface is obviously compiled twice, once in each project.

I don't want to move the interface to P1, what would solve the problem. Just assume, i don't want that.

Thanks for input.

edit: code snippet:

```
Project1:

View1.hpp // nothing special

View1.cpp:

#include ViewInterface.cpp
View1::View1(int x) : ViewInterface(int x)

Project2:

ViewInterface.hpp:

#ifdef EXP
#define DECLDIR __declspec(dllexport)
#else
#define DECLDIR __declspec(dllimport)
#endif

class ViewInterface : SomeOtherClass, AnotherClass
{
  virtual void DECLDIR show(void) const = 0;
  virtual void DECLDIR hide(void) const = 0;
}

ViewInterface.cpp:

ViewInterface::ViewInterface(int x) : SomeOtherClass(int x), AnotherClass(int x)

View2.hpp // nothing special

View2.cpp:
#define EXP
#include ViewInterface.h

View2::View2(int x) : ViewInterface(int x) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:40:51.507

为了让可执行文件使用 DLL 中的类，您需要确保它们被正确导出。编译 DLL 时，用 标记类[`__declspec(dllexport)`](http://msdn.microsoft.com/en-us/library/a90k134d%28v=vs.100%29.aspx)，而在编译可执行文件时，用 标记类`__declspec(dllimport)`。通常这是使用如下宏完成的：

```
// In your DLL's header file
#ifdef COMPILING_MY_DLL
#define MY_EXPORT __declspec(dllexport)
#else
#define MY_EXPORT __declspec(dllimport)
#endif

class MY_EXPORT MyClass
{
    ...
}; 
```

然后，*仅*在您的 DLL 项目中定义宏`COMPILING_MY_DLL`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T22:24:30.253

> 我不想将接口移到 P1，什么可以解决问题。只是假设，我不想要那个。

然后将其移动到第三个实体。

你必须决定什么对你更重要。如果您想要一个干净的解决方案，那么要么将接口定义移至 DLL (P1)，要么移至 DLL 和 EXE 都可以使用的东西——我们称之为“P0”。P0 甚至不必是已编译的东西——在它自己的目录中的一个简单的头文件，其中所有定义的内容都内联就可以了。我的首选是让 P0 成为一个 DLL。

这是**唯一**干净的解决方案。为了完整起见，以下“解决方案”实际上只是我描述的黑客。

* * *

如果您真的想要“肮脏”的解决方案，那么也可以这样做，唯一的区别是您将定义接口的头文件留在应用程序源文件夹中。

如果你想要它超脏，然后像你建议的那样在构建 DLL 时包含 .cpp 文件。它也会起作用......这真的很糟糕。

当然，有些事情你必须要知道。例如，“接口”不应该有任何静态数据成员，“接口”中的任何函数都不应该有函数局部静态。因为如果他们这样做了，那么这些静态变量将被实例化两次——一次在 DLL 中，一次在 EXE 中。此外，由于所有代码都将编译到两个项目中，因此如果要更改任何内容，则必须重新编译这两个项目。（在 DLL 和 EXE 中重复的代码不是问题，只要它们是从相同的代码编译的。）

如果您选择“P0 = 只是一个头文件”解决方案，这些限制当然也适用。

* * *

最后还有一个非常糟糕的超级脏解决方案：在 EXE 中实现接口，从 EXE 中 dllexport 并将其 dllimport 到 DLL 中（是的，可以这样做！）。缺点是您必须执行一个特殊的 EXE 构建，它只构建 EXE 的导入库（这可以在没有 DLL 的导入库的情况下完成）。使用 EXE 的导入库，您可以构建 DLL，然后使用 DLL 的导入库，您可以构建 EXE 本身。这样，“接口”甚至可以具有静态数据成员，如果您只更改代码（即头文件中没有更改），那么您只需要重新编译 EXE。

# java - Java: Calculations giving wrong answer, where is my mistake?

> ID：13057894
> 
> 赞同：1
> 
> 时间：2012-10-24T21:17:19.100
> 
> 标签：java, arrays

I can't seem to figure out why it's not printing correctly:

```
public class test3 {
  public static void main(String[] args) {
    double[] gens = {100, 200.1, 9.3, 10};
    double d0 = 0;
    double d1 = 0;
    double d2 = 0;
    double d3 = 0;
    double d4 = 0;
    double d5 = 0;
    double d6 = 0;
    double d7 = 0;
    double d8 = 0;
    double d9 = 0;
    for (int i = 0; i < gens.length; i++) {
      double percs = gens[i];
      while (percs < -9 || 9 < percs) percs /= 10;
      percs = Math.abs(percs);
      if (percs == 0) {
        d0 += 1;
      }
      else if (percs == 1) {
        d1 += 1;
      }
      else if (percs == 2) {
        d2 += 1;
      }
      else if (percs == 3) {
        d3 += 1;
      }
      else if (percs == 4) {
        d4 += 1;
      }
      else if (percs == 5) {
        d5 += 1;
      }
      else if (percs == 6) {
        d6 += 1;
      }
      else if (percs == 7) {
        d7 += 1;
      }
      else if (percs == 8) {
        d8 += 1;
      }
      else if (percs == 9) {
        d9 += 1;
      }
    }
    double[] pack = {
       d0 /= gens.length,
       d1 /= gens.length,
       d2 /= gens.length,
       d3 /= gens.length,
       d4 /= gens.length,
       d5 /= gens.length,
       d6 /= gens.length,
       d7 /= gens.length,
       d8 /= gens.length,
       d9 /= gens.length
    };
    System.out.println(pack[0]);
    System.out.println(pack[1]);
    System.out.println(pack[2]);
    System.out.println(pack[3]);
    System.out.println(pack[4]);
    System.out.println(pack[5]);
    System.out.println(pack[6]);
    System.out.println(pack[7]);
    System.out.println(pack[8]);
    System.out.println(pack[9]);
  }
} 
```

I know it's pretty repetitive, but that's just how I'm dealing with it for now.

Anyway, essentially, it should take those four numbers in the gens array, cut them off to the first digit of each number (i.e. 1, 2, 9 & 1 respectively), then count how many times each digit from 0-9 shows up, so '1' should give 0.5 (50%), 2 should give .25 (25%) and 9 should give .25 (25%) where every other digit from 0-9 should give 0\. I get 0.5 for the digit '1', but 0 for every other one, and I haven't been able to find my mistake. The results I get vary depending on which numbers I input (hardcode), but they're pretty much always wrong.

Any ideas?

Thank you!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T21:20:43.217

改变

```
double percs = gens[i]; 
```

至

```
int percs = (int)gens[i]; 
```

* * *

如果您将其保留为双精度，则您的 while 循环

```
while (percs < -9 || 9 < percs) percs /= 10; 
```

不会正确切断除第一个数字之外的所有数字，因为它将执行*正常除法*而不是*整数除法*。如果您`percs`在 while 循环之后打印，您可以看到这一点。

* * *

我还想指出，这可以*更*容易地完成。例如：

```
double[] gens = {100, 200.1, 9.3, 10};

int[] count = new int[10];

for (double d : gens)
    count[("" + Math.abs(d)).charAt(0) - '0']++;

for (int n : count)
    System.out.println((double)n / gens.length); 
```

会做同样的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T21:24:23.630

如果您`percs`在每个阶段打印出来，您会注意到它们是：

```
1.0
2.001
0.93
1.0 
```

所以你的 == 将不起作用。这是因为您正在划分双精度数而不是整数。您可以改为使用：

```
int percs = (int) gens[i]; 
```

这将为您提供所需的整数值。

# android - 如何确定我的用户是否是 ZORO

> ID：13057900
> 
> 赞同：-1
> 
> 时间：2012-10-24T21:17:34.887
> 
> 标签：android, line

我正在用 android 构建应用程序，但这是一个算法问题，所以每个人都可以提供帮助。

我想以某种方式检测我的用户何时用手指绘制**Z 。**

我一直在尝试计算用户在最后两点之间的斜率并跟踪他的变化以了解他何时开始绘制新线。但这还不够好。

有什么想法怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T21:20:17.740

您可以使用[GestureBuilder](http://android-developers.blogspot.com/2009/10/gestures-on-android-16.html)。

# python - How do I bind a Pyglet sprite with a Pymunk shape so they rotate together?

> ID：13057901
> 
> 赞同：7
> 
> 时间：2012-10-24T21:17:37.847
> 
> 标签：python, pyglet, pymunk

How do I bind a pyglet sprite to a pymunk body so that if the body is rotating the sprite also rotates?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T23:52:28.330

没有内置同步功能，因此您必须在每一帧中自己进行同步。但别担心，这很容易。

如果您的身体位于形状/形状的中间，并且图像大小相同，则需要两件事。首先，将图像锚设置为其大小的一半。然后在您的更新方法中，您循环要同步的主体并将精灵位置设置为身体位置，并将精灵旋转设置为转换为度数的身体旋转。您可能还需要将其旋转 180 度（以防您的模型被翻转）和/或反转旋转。

在代码中

```
img = pyglet.image.load('img.png')
img.anchor_x = img.width/2
img.anchor_y = img.height/2

sprite = pyglet.sprite.Sprite(img)
sprite.body = body 

def update(dt):

    sprite.rotation = math.degrees(-sprite.body.angle)
    sprite.set_position(sprite.body.position.x, sprite.body.position.y) 
```

有关完整示例，请查看我创建的此示例：[https ://github.com/viblo/pymunk/blob/master/examples/using_sprites_pyglet.py](https://github.com/viblo/pymunk/blob/master/examples/using_sprites_pyglet.py)

（我是pymunk的作者）

# java - 撤消在 netbeans 重新启动之前完成的操作

> ID：13057905
> 
> 赞同：2
> 
> 时间：2012-10-24T21:18:10.147
> 
> 标签：java, plugins, netbeans, netbeans-plugins

在 Netbeans 重新启动之前，在 netbeans 重新启动之后，是否有任何方法可以撤消已完成的操作？

对此的任何插件支持也可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:14:07.973

有“本地历史”NetBeans 插件（默认安装此插件）。正如您在屏幕截图中看到的那样，撤消和重做按钮处于非活动状态，但我可以看到文件的更改。![在此处输入图像描述](../Images/641df1fdd14ddb2138524c0e71c4c67d.png)

# jquery-ui - AngularJs + JQueryUI waiting for response

> ID：13057908
> 
> 赞同：1
> 
> 时间：2012-10-24T21:18:30.147
> 
> 标签：jquery-ui, angularjs

I am trying to make some useful directives with jQueryUI widgets for my AngularJS base application.

One of them works on "**select**" element and am ok with directives but only thing do not understand is this one:

1.  When select list is populated from ajax request, how to tell to apply jqueryui widget when data is populated? Suppose it is with $watch but not sure how.

**Edit:** In example I am trying to implement directive for the [multiselect plugin](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/). Please note that I am simulating server reponse but putting everything in timeout.

Here is a [code on plunker](http://plnkr.co/edit/SoVw7k)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T13:40:24.080

您需要 $watching 对项目列表的更改，然后调用`refresh`多选插件... [这是一个显示解决方案的 plunk](http://plnkr.co/edit/EJRH2I)

```
angular.module('myui', [])
    .directive('qnMultiselect', function() {
        return { 
          restrict: 'A',
          require: 'ngModel',
          link: function(scope, elem, attr) {
            //set up the plugin.
            elem.multiselect({ allowClear: false });

            //get the source of the ngOptions
            var parts = attr.ngOptions.split(' ');
            var source = parts[parts.length - 1];

            //watch the options source and refresh the plugin.
            scope.$watch(source, function(value) {
              elem.multiselect('refresh');
            });
          }        
        };
    }); 
```

# jquery - 当用户滚动“靠近”页面底部时加载更多内容？

> ID：13057910
> 
> 赞同：14
> 
> 时间：2012-10-24T21:18:37.420
> 
> 标签：jquery

我用它来检测滚动到页面底部。但是如何检测到页面底部的距离？

```
if($(window).scrollTop() + $(window).height() == $(document).height() ) {
 .. my ajax here
} 
```

我的意思是我希望函数在他离底部 100px 或 200px 时执行，而不是在页面的最底部。我将如何改变这个？

另外：如果滚动是在显示加载内容的特定元素（比如我的大容器）的最后一个，是否可以捕获。

提前致谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-24T21:26:22.270

```
var nearToBottom = 100;

if ($(window).scrollTop() + $(window).height() > 
    $(document).height() - nearToBottom) { 
 .. my ajax here 
} 
```

或滚动到 .CONTAINER 的底部

```
if ($(window).scrollTop() + $(window).height() >= 
    $('.CONTAINER').offset().top + $('.CONTAINER').height() ) { 
 .. my ajax here 
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-28T13:10:01.393

这将对您有所帮助。

```
<script>
 $(window).scroll(function () {
    if ($(document).height() <= $(window).scrollTop() + $(window).height()) {
        alert("End Of The Page");
    }
 });
</script> 
```

通过此链接查看整篇文章并详细说明其工作原理。

[当浏览器滚动到jQuery中的页面末尾时加载更多内容](http://www.dotnetbull.com/2013/05/browser-scroll-to-end-of-page-in-jquery.html)

# git - Git internal pack view

> ID：13057913
> 
> 赞同：2
> 
> 时间：2012-10-24T21:18:41.513
> 
> 标签：git

Guys, question about git internals.

I can view packs content by executing: git verify-pack -v .git/objects/pack/pack-79b6e1ec4077aa90fd3231be780e6cc22a8e35f7.idx

It will return my content, like this one: ... 2278dd6b6ec2365c03257d153f281943f84f5ff9 blob 24 34 6110 ...

How can I view the content of this piece in pack file? git cat-file -p 2278dd is not that I want - this will show me full content. And I would like to see exactly info from part file

thanks

# tomcat7 - 播放框架 WAR 文件不会部署在 tomcat7 上

> ID：13057914
> 
> 赞同：1
> 
> 时间：2012-10-24T21:18:42.093
> 
> 标签：tomcat7, playframework-1.x

我创建了一个 Play 框架 v1.2.5 Web 服务，并成功地将其部署为 Tomcat 7.0.30 上的 WAR 文件。几个月来一直运行良好。

我最近稍微调整了代码（我实际上将 trim() 添加到 2 个函数）。测试了它。有用。我生成了一个新的 WAR，但它始终无法在服务器上启动。

catalina 日志说：geronimo-servlet_2.5_spec-1.2.jar) - jar 未加载。请参阅 Servlet 规范 2.3，第 9.7.2 节。违规类：javax/servlet/Servlet.class

但我尝试按照以前的帖子建议删除罐子，但它仍然无法正常工作。其他人则认为这是一个内存问题。我要求我的系统管理员增加内存，但他还没有这样做。

我在正确的轨道上还是有其他解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T19:18:29.023

解决了！我注意到 Tomcat 7 服务器使用的是旧版本的 Java。

我让我的系统管理员升级到 JDK 1.7x，该死的 WAR 又开始工作了。这仍然不能解释为什么它首先停止工作。

是的，Play 1.2.5 文档说它只适用于 tomcat 6x，但我的公司不会回滚到 6。

# ios - _NTP_Logging 架构 armv7 的未定义符号

> ID：13057915
> 
> 赞同：0
> 
> 时间：2012-10-24T21:18:47.627
> 
> 标签：ios, xcode

首先有很多问题被问到如何解决导入 lib/files 时似乎发生的编译错误。谁能首先解释“架构armv7的未定义符号”是什么意思。[我为 iso ( http://code.google.com/p/ios-ntp/source/checkout](http://code.google.com/p/ios-ntp/source/checkout) )导入了 ntp 客户端文件，这些文件在它自己的 Xcode 项目中工作，但是当我移到我的项目时它失败并出现以下错误和警告。任何想法 ？

```
 Undefined symbols for architecture armv7:
     "_NTP_Logging", referenced from:
      -[NetAssociation evaluatePacket] in NetAssociation-586077E517B5DC42.o
      -[NetworkClock associationTrue:] in NetworkClock-496336397AA5FC44.o
      -[NetworkClock associationFake:] in NetworkClock-496336397AA5FC44.o
    "_DEFINE_SHARED_INSTANCE_USING_BLOCK", referenced from:
     +[NetworkClock sharedInstance] in NetworkClock-496336397AA5FC44.o
    "_LogInProduction", referenced from:
     -[NetAssociation enable] in NetAssociation-586077E517B5DC42.o
     -[NetAssociation finish] in NetAssociation-586077E517B5DC42.o
     -[NetAssociation onUdpSocketDidClose:] in NetAssociation-586077E517B5DC42.o
     -[NetworkClock createAssociations] in NetworkClock-496336397AA5FC44.o
     -[NetworkClock applicationBack:] in NetworkClock-496336397AA5FC44.o
     -[NetworkClock applicationFore:] in NetworkClock-496336397AA5FC44.o
  ld: symbol(s) not found for architecture armv7
  clang: error: linker command failed with exit code 1 (use -v to see invocation)

  Warning: no rule to process file '$(PROJECT_DIR)/SwapViews_3/NetAssociation.h' of type   
 sourcecode.c.h for architecture armv7 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T23:34:16.873

您不应该在要编译的 .c 文件中包含 .h 文件。转到目标的“构建阶段”选项卡。然后检查“编译源”部分并删除 .h 文件。

# controller - iPad 上 UIDocumentInteractionController 的可能错误：presentPreviewAnimated 未推入导航堆栈

> ID：13057919
> 
> 赞同：8
> 
> 时间：2012-10-24T21:19:13.857
> 
> 标签：controller, document, modalviewcontroller, interaction, ios6

**仅限 iPad：UIDocumentInteractionController presentPreviewAnimated 不会被推入导航堆栈，即使从 documentInteractionControllerViewControllerForPreview 返回导航控制器，也只会以模态方式显示**

大家好

我想知道是否有人可以在这里帮助我，我相信这可能是一个仅与 iPad 相关的错误（它适用于 iPhone），但在我提交之前需要确认。

为了让 UIDocumentInteractionController 在导航控制器中工作，我遵循了推荐的方法，通过返回导航控制器表单 documentInteractionControllerViewControllerForPreview 但它不起作用。

我什至通过将其升级到 iPad 来尝试 Apple 提供的 UIDocumentInteractionController 代码示例，果然，即使我从 documentInteractionControllerViewControllerForPreview 返回导航控制器，文档交互控制器也会模态显示。但是对于 iPhone，它确实会被推送到导航堆栈中。

我试图设计一个基于 splitviewcontroller 的应用程序，它使用 doc 交互控制器读取 PDF 文件，这样 PDF 将显示在 DetailViewController 中，但这仅适用于 QLPreviewController（而不是 Doc 交互控制器）。

有没有人有这个问题？我把我的示例代码和我看到的图像放在下面：

我正在使用 iOS 6.0 SDK。

```
static NSString* documents2[] =
{
    @"PDF Document.pdf"
};

@implementation WhizTBViewController

@synthesize documentURLs, docInteractionController;

#pragma mark -
#pragma mark View Controller

- (void)setupDocumentControllerWithURL:(NSURL *)url
{
    if (self.docInteractionController == nil)
    {
        self.docInteractionController = [UIDocumentInteractionController interactionControllerWithURL:url];
        self.docInteractionController.delegate = self;
    }
    else
    {
        self.docInteractionController.URL = url;
    }
}

- (void)previewDocument {
    // three ways to present a preview:
    // 1\. Don't implement this method and simply attach the canned gestureRecognizers to the cell
    //
    // 2\. Don't use canned gesture recognizers and simply use UIDocumentInteractionController's
    //    presentPreviewAnimated: to get a preview for the document associated with this cell
    //
    // 3\. Use the QLPreviewController to give the user preview access to the document associated
    //    with this cell and all the other documents as well.
    // for case 2 use this, allowing UIDocumentInteractionController to handle the preview:

    NSURL *fileURL;

    fileURL = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:documents[0] ofType:nil]];
    [self setupDocumentControllerWithURL:fileURL];
    [self.docInteractionController presentPreviewAnimated:YES];
}

#pragma mark -
#pragma mark UIDocumentInteractionControllerDelegate

- (UIViewController *)documentInteractionControllerViewControllerForPreview:(UIDocumentInteractionController *)interactionController
{
    return [self  navigationController];
} 
```

这是我在 iPad 上看到的

![这是我在 iPad 上看到的](../Images/8b80a47abaf92ba6ff95484ae0b323f0.png) 我需要像这样显示它（iPhone上的示例代码相同）

![我需要像这样显示它（iPhone上的示例代码相同）：](../Images/8f669708d8cded30519f561eced3f9cf.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:32:37.137

我向 Apple 提交了错误报告。我的报告 ( [http://www.openradar.me/radar?id=2785401](http://www.openradar.me/radar?id=2785401) ) 作为 Bug ID# 12567789 的副本被关闭。所以显然这是一个已知问题。

# eclipse - JavaCV - 运行示例

> ID：13057921
> 
> 赞同：0
> 
> 时间：2012-10-24T21:19:41.777
> 
> 标签：eclipse, macos, javacv

我是一个业余开发人员，目前我正在 Mac 上使用 JavaCV 和 Eclipse。

我正在尝试让 FaceRecorgnition 工作，但我真的不知道如何将它正确安装到 Eclipse 中。

我创建了一个新的 Java 项目，并导入了“JavaCPP”、“JavaCV-Mac”和“JavaCV”库。

然后我创建了一个包并将其命名为“mvn”，然后创建了一个类并将“FaceRecorgnition”java C/P 到该类中，然后尝试运行它。然后我得到这个错误：

```
Oct 24, 2012 10:17:22 PM mvn.FaceRecognition learn
INFO: ===========================================
Oct 24, 2012 10:17:22 PM mvn.FaceRecognition learn
INFO: Loading the training images in data/all10.txt
Exception in thread "main" java.lang.RuntimeException: java.io.FileNotFoundException: data/all10.txt (No such file or directory)
    at mvn.FaceRecognition.loadFaceImgArray(FaceRecognition.java:317)
    at mvn.FaceRecognition.learn(FaceRecognition.java:97)
    at mvn.FaceRecognition.main(FaceRecognition.java:789)
Caused by: java.io.FileNotFoundException: data/all10.txt (No such file or directory)
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(FileInputStream.java:120)
    at java.io.FileInputStream.<init>(FileInputStream.java:79)
    at java.io.FileReader.<init>(FileReader.java:41)
    at mvn.FaceRecognition.loadFaceImgArray(FaceRecognition.java:244)
    ... 2 more 
```

我还没有完全理解导入和 SDK，所以要简单。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T12:17:47.380

这不是缺少库，而是缺少 .txt 文件。JavaCV 下载中似乎不包含 all10.txt 文件。

**在“如何使用基于 cmd 的离线 FaceRec 系统：”**标题下 查看[http://www.shervinemami.info/faceRecognition.html](http://www.shervinemami.info/faceRecognition.html)

 **您在他的 zip facerecExample_ORL.zip 中找到 all10.txt 文件，在 zip Cambridge_FaceDB.zip 中找到所需的面孔

创建 FaceRecognition.java 所在的数据文件夹。将 .txt 文件放在该文件夹以及 Cambridge_FaceDB 文件夹中：

```
samples/
  FaceRecognition.java  
  data/
    all10.txt
    Cambridge_FaceDB/ 
```**

# ruby-on-rails - Rails 路由：无法区分静态和动态路由

> ID：13057922
> 
> 赞同：0
> 
> 时间：2012-10-24T21:19:50.557
> 
> 标签：ruby-on-rails

我正在尝试为我的网站用户创建自定义 URL：

```
www.mysite.com/user1 
```

如果我将路由规则设置为：

```
match ':id' => "user#view", :as => :user 
```

然后效果很好！我可以访问 www.mysite.com/user1，它会为 user1 拉出页面。

但是，这打破了我的关于页面，该页面位于 www.mysite.com/about 。我在这里得到的错误是：“找不到 id=about 的用户”

知道如何解决这个问题吗？谢谢！顺便说一句 - 我正在使用friendlyid 来生成人类可读的slug。

林戈

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T21:20:59.910

关于页面是位于的静态文件`public/about.html`吗？如果是这样，那么 Rails 将首先匹配它，如果找不到文件，则回退到路由器。

如果它是一条路线，那么您的`match :id`路线应该在 about 的*下方*，以便首先匹配 about。

# pytables - 嵌套的 pytables

> ID：13057924
> 
> 赞同：0
> 
> 时间：2012-10-24T21:20:11.557
> 
> 标签：pytables

假设您将字典传递给 pytable 构造函数：

h5f.createTable('/','table',{'col1':Float64Col(pos=0),'col2':StringCol(16,pos=1)})

我有以下三个与嵌套 pytables 相关的初学者问题：

1）如何使用字典描述符来创建嵌套的 pytable？2）如何为嵌套列分配位置？如果顶级列的位置为 pos=1，您是否从 0 开始对其子列进行编号？3）如何将行分配给嵌套列？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:24:48.827

我一直在使用 python type() 动态创建 pytables 描述。这至少应该让你继续......

```
from tables import *

h5_file = openFile('test_nested_table.h5', 'w')

nested_table_fields = {}
nested_table_fields['x'] = Float64Col(dflt=1, pos=0)
nested_table = type('nested_table', (IsDescription,), nested_table_fields)

main_table_fields = {}
main_table_fields['y'] = Float64Col(dflt=1, pos=0)
main_table_fields['nested_table'] = nested_table
main_table = type('main_table', (IsDescription,), main_table_fields)

h5_table = h5_file.createTable('/', 'nested_table_example', main_table)
print repr(h5_table) 
```

# c# - 将 TimeSpan.TotalMilliseconds 转换为日期时间并将其格式化为小时：分钟

> ID：13057928
> 
> 赞同：0
> 
> 时间：2012-10-24T21:20:20.660
> 
> 标签：c#, linq, date, kendo-ui, datetime-format

我对日期时间转换有点困惑

在我的模型中我定义了

```
 public DateTime? Sent { get; set; }
    public DateTime? Reply { get; set; }
    public double ResponseTime { get; set; } 
```

在我正在使用的 linq 部分

```
ResponseTime = (u.Reply - u.sent).TotalMilliseconds 
```

不是这样格式化和显示的`979809803`

我想知道如何将其转换为日期时间格式，并最终将格式显示为小时：分钟，例如发送日期和回复日期之间的 2:45。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T21:23:52.653

只需返回`TimeSpan`并调用`.ToString("hh:mm")`。

[时间跨度.ToString](http://msdn.microsoft.com/en-us/library/dd992632.aspx)

```
public TimeSpan ResponseTime { get; set; }

//usage in LINQ
ResponseTime = (u.Reply - u.Sent) 
```

显示时...

```
value.ResponseTime.ToString("hh:mm") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T21:23:45.217

从 DateTime 中减去 DateTime 会产生 TimeSpan。查看[TimeSpan.ToString Method (String)](http://msdn.microsoft.com/en-us/library/dd992632.aspx)以了解如何自定义格式化值。

您可以将 ResponseTime 更改回 TimeSpan 并从那里更改为字符串。

```
TimeSpan ResponseTimeSpan = new TimeSpan(0, 0, 0, (int)ResponseTime);

string ResponseTimeDisplay = ResponseTimeSpan.ToString(); 
```

# html - 如何垂直居中此内容？

> ID：13057930
> 
> 赞同：0
> 
> 时间：2012-10-24T21:20:34.767
> 
> 标签：html, css

我知道已经有很多关于此的问题，但没有一个解决方案真正适用于我的特定情况。这是没有任何垂直居中修复的布局的样子：http: [//jsfiddle.net/4FsKG/9/](http://jsfiddle.net/4FsKG/9/)

这是**tr#toolBar**：**height**和**line-height**设置为*2.25em*：[http://jsfiddle.net/4FsKG/10/](http://jsfiddle.net/4FsKG/10/)。这会使除页码周围的边框之外的所有内容居中，从而导致您可以在左侧边框下轻松注意到的间隙。此外，边框占据了单元格的整个高度，而不是像预期的那样围绕数字。

我已经尝试了许多其他解决方案来解决这个问题，但所有这些最终都是我已经展示的两个示例的一些变体。

我希望该行中的所有内容都垂直居中，同时允许我在诸如页码之类的内容周围设置边框。有人有想法么？

我的示例的 CSS：

```
table {
    background-color:#274F68;
    font-size:0.85em;
    white-space:nowrap;
    border-collapse:separate;
    border:1px solid #274F68;
    border-radius:6px 6px 6px 6px;
    -moz-border-radius:6px 6px 6px 6px;
    -webkit-border-radius:6px 6px 6px 6px;
}

tr#input td { border-bottom:2px solid #6189A3; }

    tr#input td form {
        float:right;        
    }

tr#toolBar { 
    font-family:Arial;
    background-color:#152939;
    color:#6189A3;
}

    tr#toolBar td { border-bottom:2px solid #6189A3; }

        tr#toolBar td a {
            padding:0;
            margin:0 3px 0 3px;
        }

.dataTables_length { float:left;}
.dataTables_info { float:left; }
.dataTables_filter { float:right; }
.dataTables_paginate { float:right; }

.paging_full_numbers a.paginate_button,
.paging_full_numbers a.paginate_active {
    float:left;
    border: 1px solid #6189A3;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T23:02:32.293

只需用`display:inline-block`with替换浮点数`vertical-align:middle`就可以了：http: [//jsfiddle.net/4FsKG/42/](http://jsfiddle.net/4FsKG/42/)

`_display: inline; zoom:1;`但是如果你想支持 IE7 及以下版本，也不要忘记添加。

# java - Minecraft 客户端的 SHA1 加密

> ID：13057931
> 
> 赞同：1
> 
> 时间：2012-10-24T21:20:35.817
> 
> 标签：java, minecraft, sha

我正在用 Java 为 Minecraft 编写客户端。我已经做了很多工作，但真正让我难过的一件事是 Minecraft 如何进行身份验证。我找到了这个页面

[http://wiki.vg/Protocol#Handshake_.280x02.29](http://wiki.vg/Protocol#Handshake_.280x02.29)

它定义了协议。截至目前，以下代码

```
public boolean connect(String ip, int port) {
    try {
        socket = new Socket(ip, port);
        dis = new DataInputStream(socket.getInputStream());
        dos = new DataOutputStream(socket.getOutputStream());
        dos.writeByte(0x02);
        dos.writeByte(0x00);
        writeString(username);
        writeString(ip);
        dos.writeInt(port);
        if (dis.readByte() != 0xFD)
            return false;
        String serverId = readString();
        byte[] publicKey = new byte[dis.readShort()];
        for (int i = 0; i < publicKey.length; i++)
            publicKey[i] = dis.readByte();
        byte[] token = new byte[dis.readShort()];
        for (int i = 0; i < token.length; i++)
            token[i] = dis.readByte();
        PublicKey serverPublicKey = KeyFactory.getInstance("RSA").generatePublic(new X509EncodedKeySpec(publicKey));
        byte[] sharedSecret = new byte[16];
        new Random().nextBytes(sharedSecret);
        URL url = new URL("http://session.minecraft.net/game/joinserver.jsp?user=" + username + "&sessionId=" + session + "&serverId=" + serverId);
        url.openConnection();

        Cipher cipher = Cipher.getInstance("AES");
        return true;
    }
    catch (Exception ex) { System.out.println("Failed to login for " + username); ex.printStackTrace(); }
    return false;
} 
```

是我所拥有的。如你所知，通过这段代码，我得到了一个公钥、一个验证令牌，并生成了一个随机的共享密钥。但是，我不知道从这里做什么。我已经看到了这个的 Python 实现

[https://github.com/ammaraskar/pyCraft/blob/master/networking/NetworkManager.py](https://github.com/ammaraskar/pyCraft/blob/master/networking/NetworkManager.py)第82行

但我不知道他们是如何使用 SHA1 来获取 serverid 的。我在 Java 中找不到等价物。有一个特定于 Minecraft 的身份验证方案页面，它更清楚地定义了在后台发生的事情：[http ://wiki.vg/Protocol_Encryption](http://wiki.vg/Protocol_Encryption)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T12:23:58.603

我的世界有一个优秀的反编译项目：

[http://mcp.ocean-labs.de/index.php/MCP_Releases](http://mcp.ocean-labs.de/index.php/MCP_Releases)。

看看`src/minecraft/net/minecraft/src/NetClientHandler.java`， 和`src/minecraft/net/minecraft/src/ThreadLoginVerifier.java`。

实际的散列是在 中完成的`src/minecraft/net/minecraft/src/CryptManager.java`，如下所示：

```
digestOperation("SHA-1", new byte[][] {par0Str.getBytes("ISO_8859_1"), par2SecretKey.getEncoded(), par1PublicKey.getEncoded()}) 
```

# class - 如何在 Mockito 中模拟 Class myVar？

> ID：13057933
> 
> 赞同：2
> 
> 时间：2012-10-24T21:20:36.487
> 
> 标签：class, mocking, mockito, powermock

我想在 Mockito 中模拟一个类。然后它将发出一个 .newInstance() 调用，预计将返回一个实际的类实例（在我的情况下将返回一个模拟）。

如果设置正确，那么我可以这样做：

```
ArrayList myListMock = mock(ArrayList.class);
when(myVar.newInstance()).thenReturn(myListMock); 
```

我知道我可以设置它，以便类 ArrayList 的新实例将成为模拟（使用 PowerMockito whenNew），只是想知道是否有办法模拟这种类对象，所以我不必重写实例创建...

下面是我要模拟的真实类，我无法更改它由接口定义的结构。我正在寻找的是一种在调用初始化时提供 cvs 的方法。

```
public class InputConstraintValidator 
    implements ConstraintValidator<InputValidation, StringWrapper> {

    Class<? extends SafeString> cvs;

    public void initialize(InputValidation constraintAnnotation) {
        cvs = constraintAnnotation.inputValidator();
    }

    public boolean isValid(StringWrapper value, 
                   ConstraintValidatorContext context) {

        SafeString instance;
        try {
             instance = cvs.newInstance();
        } catch (InstantiationException e) {
            return false;
        } catch (IllegalAccessException e) {
            return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T00:25:21.030

Mockito 专为模拟对象*实例*而设计。在底层，模拟方法实际上创建了一个代理，它接收对所有非最终方法的调用，并根据需要记录和存根这些调用。*没有使用 Mockito 替换 Class 对象本身的函数的好方法。*这给您留下了几个选择：

1.  我没有使用 PowerMock 的经验，但它似乎[是为模拟静态方法而设计的](https://stackoverflow.com/a/10652564/1426891)。

2.  在依赖注入风格中，将您的静态工厂方法变成工厂实例。由于看起来您实际上并没有使用`ArrayList`，因此假设您的课程是`FooBar`：

    ```
    class FooBar {
      static class Factory {
        static FooBar instance;
        FooBar getInstance() {
          if (instance == null) {
            instance = new FooBar();
          }
          return instance;
        }
      }
      // ...
    } 
    ```

    现在你的类用户可以接收一个`new FooBar.Factory()`参数，它以单例样式创建你真正的 FooBar（希望比我的简单实现[更好，更线程安全](https://stackoverflow.com/a/71399/1426891)），你可以使用纯 Mockito 来模拟工厂。如果这看起来像很多样板，那是因为它是，但如果你正在考虑切换到像[Guice](http://code.google.com/p/google-guice/)这样的 DI 解决方案，你可以减少很多。

3.  考虑使一个字段或方法包私有或受保护，并记录它对[测试目的可见](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/annotations/VisibleForTesting.html)。然后，您只能在测试代码中插入一个模拟实例。

    ```
    public class InputConstraintValidator implements 
        ConstraintValidator<InputValidation, StringWrapper> {
      Class<? extends SafeString> cvs;

      public void initialize(InputValidation constraintAnnotation) {
        cvs = constraintAnnotation.inputValidator();
      }

      public boolean isValid(StringWrapper value,
          ConstraintValidatorContext context) {
        SafeString instance;
        try {
          instance = getCvsInstance();
        } catch (InstantiationException e) {
          return false;
        } catch (IllegalAccessException e) {
          return false;
        }
      }

      @VisibleForTesting protected getCvsInstance()
          throws InstantiationException, IllegalAccessException {
        return cvs.newInstance();
      }
    }

    public class InputConstaintValidatorTest {
      @Test public void testWithMockCvs() {
        final SafeString cvs = mock(SafeString.class);
        InputConstraintValidator validator = new InputConstraintValidator() {
          @Override protected getCvsInstance() {
            return cvs;
          }
        }
        // test
      }
    } 
    ```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-24T23:50:15.497

我认为您只需要为以下内容引入一个额外的模拟`Class`：

```
ArrayList<?> myListMock = mock(ArrayList.class);
Class<ArrayList> clazz = mock(Class.class);
when(clazz.newInstance()).thenReturn(myListMock); 
```

当然，诀窍是确保你的 mocked`clazz.newInstance()`不会被到处调用，因为由于类型擦除，你不能指定它实际上是一个`Class<ArrayList>`.

另外，请小心为基本的东西定义自己的模拟`ArrayList`- 通常我会使用“真实的”并用模拟填充它。

# windows - 从软件 API 和安全性的角度来看，Win8 Metro 应用程序与 Windows7 应用程序有何不同？

> ID：13057934
> 
> 赞同：0
> 
> 时间：2012-10-24T21:20:38.573
> 
> 标签：windows, windows-8, microsoft-metro

对于各种应用商店（例如 Play、iOS 商店），可下载的应用只能在沙箱中运行 - 限制限制了对操作系统功能、API 和其他本地应用不受影响的访问方式。

可下载的 Win8 Metro 应用程序的软件环境与例如 Windows 7 软件安装程序有何不同？他们可以安装设备驱动程序，访问整个文件系统，我可以从 MS 商店下载在操作系统的 Win7 样式部分运行的应用程序，等等...

基本上，我正在寻找 Win7 开发人员需要了解的有关 Win8 的知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:13:08.927

Windows 8 商店应用程序无法访问与常规 Windows 7/8 (WPF/WinForms) 应用程序相同的 API。对设备和其他操作系统功能的访问受到限制。您无法从 Windows 8 商店应用程序连接到本地数据库或联系本地运行服务。因此，与 Windows 7 开发环境相比，它非常有限。

# eclipse - 给定ID时如何获取记录的名称字段

> ID：13057936
> 
> 赞同：1
> 
> 时间：2012-10-24T21:20:43.077
> 
> 标签：eclipse, salesforce, apex-code, soql

我有一个查询：

```
SELECT Id, recordtypeid  FROM myObject__c 
```

但我不想返回记录类型 ID，而是返回记录类型名称。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:25:43.883

从 myObject__c 中选择 Id、RecordType.Name

![在此处输入图像描述](../Images/3b13913b86db9db15024c620257a62c2.png)

# android - android : 解析 XML 并插入到 sqlite 数据库

> ID：13057942
> 
> 赞同：1
> 
> 时间：2012-10-24T21:21:04.297
> 
> 标签：android, sqlite

假设我有这样的文件 XML：

```
<?xml version="1.0"?>
<P>
    <Content>
        <id>1016576</id>
        <date>20.08.2012</date>
        <placeOfBirth>KUALA LUMPUR</placeOfBirth>
    </Content>
    <Content>
        <id>1016620</id>
        <date>20.08.2012</date>
        <placeOfBirth>SINGAPORE</placeOfBirth>
    </Content>
    <Content>
        <id>1020907</id>
        <date>20.08.2012</date>
        <placeOfBirth>SINGAPORE</placeOfBirth>
    </Content>
</P> 
```

我想解析所有文本并插入到具有 _id、date 和 placeOfBirth 列的数据库表中。我试过这个：

```
 Activity activity1 = this;
    String str="";
    Resources res = activity1.getResources();
    XmlResourceParser xmlPharser = res.getXml(R.xml.fileXML);
    String id,date,pob;
//database
        final databaseHelper myDbHelper = new databaseHelper(this);
        myDbHelper.open();
//insert into table while parsing xml
        try {
            xmlPharser.next();
            int eventType = xmlPharser.getEventType();
            String event = ""+eventType;
            Log.d("Event", event);
            while (eventType != XmlPullParser.END_DOCUMENT)
            {

        if(eventType == XmlPullParser.START_TAG )
            {
               if( xmlPharser.getName() == "id")
               {
                    id=xmlPharser.getText();
               }
               else if ( xmlPharser.getName() == "date" )
               {
                    date = xmlPharser.getText();
               }
               else if ( xmlPharser.getName() == "placeOfBirth" )
               {
                    pob = xmlPharser.getText();
               }
               myDbHelper.insertData(id,date,pob);
               myDbHelper.close();
            }
            eventType = xmlPharser.next();
        }
  } catch (XmlPullParserException e) {
        e.printStackTrace();
  } catch (IOException e) {
        e.printStackTrace();
  } 
```

它不会显示任何错误 LogCat，但不会在每个 START_TAG 处测试条件。

我该如何解决这个问题......所有答案将不胜感激......谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T22:39:29.760

如果你不小心，解析 XML 会变得非常糟糕，特别是使用这个解析器；您可以尝试其他一些使用更简单的 API 或更清晰的层次结构（即[JDOM](http://www.jdom.org/)）的方法。您还应该查看 Android 开发人员网站上的示例，它非常简单（[解析 XML 数据](http://developer.android.com/training/basics/network-ops/xml.html)）。

说了这么多，我给你修好了。这应该有效（至少它对我有用）。不过要小心，它不会对格式错误的 XML 或数据库内容进行任何错误检查。

```
import java.io.IOException;

import org.xmlpull.v1.XmlPullParser;
import org.xmlpull.v1.XmlPullParserException;

import android.app.Activity;
import android.content.res.XmlResourceParser;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        XmlResourceParser parser = getResources().getXml(R.xml.filexml);

        final databaseHelper myDbHelper = null;

        try {
            myDbHelper = new databaseHelper(this);
            myDbHelper.open();
            while (parser.next() != XmlPullParser.END_TAG) {
                if (parser.getEventType() != XmlPullParser.START_TAG) {
                    continue;
                }
                String name = parser.getName();
                if (name.equals("Content")) {
                    String id = null, date = null, pob = null;
                    while (parser.next() != XmlPullParser.END_TAG) {
                        if (parser.getEventType() != XmlPullParser.START_TAG) {
                            continue;
                        }
                        name = parser.getName();
                        if (name.equals("id")) {
                            id = readText(parser);
                        } else if (name.equals("date")) {
                            date = readText(parser);
                        } else if (name.equals("placeOfBirth")) {
                            pob = readText(parser);
                        }
                    }
                    myDbHelper.insertData(id,date,pob);
                }
            }
        } catch (XmlPullParserException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } finally {
            if (myDbHelper != null) {
                myDbHelper.close();
            }
        }
    }

    private String readText(XmlPullParser parser) throws IOException,
            XmlPullParserException {
        String result = "";
        if (parser.next() == XmlPullParser.TEXT) {
            result = parser.getText();
            parser.nextTag();
        }
        return result;
    } 
```

再评论，将 xml 文件名更改为小写；）

# mysql - 是否可以为每个选择创建一个带有不同 where 子句的 mysql 查询？

> ID：13057943
> 
> 赞同：0
> 
> 时间：2012-10-24T21:21:04.827
> 
> 标签：mysql, select, where

我有一个查询本周的销售数量。它看起来像这样：

```
SELECT DAYNAME(SOLD), COUNT(*) FROM SALES_DATA 
WHERE SOLD BETWEEN '2012/10/14 00:00:00' AND '2012/10/21 00:00:00' AND STORE_ID = 1010         GROUP BY DAYNAME(SOLD) ORDER BY DAY(SOLD); 
```

输出如下所示：

```
DAYNAME(SOLD)   COUNT(*)
Sunday          400
Monday          375
Etc.            Etc. 
```

我想要前一周的第三列销售额进行比较。但要做到这一点，我需要一个单独的 where 子句，其日期范围不同。所以我的问题是我将如何做到这一点？我对mysql还很陌生，还没有找到这样的东西。加入会起作用吗？我不太确定这些是如何工作的。我想要的输出是这样的：

```
DAYNAME(SOLD)   COUNT(*)   COUNT(*)
Sunday          400        550
Monday          375        250
Etc.            Etc.       Etc. 
```

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:24:00.317

你可以使用这样的结构：

```
select stuff1.common_col, stuff1.col1, stuff2.col2
from
(select common_col, col1 from somewhere where ... ) as stuff1
(select common_col, col1 from somewhere where ... ) as stuff2
where stuff1.common_col = stuff2.common_col 
```

# f# - F# Excel Range.AutoFilter() 失败

> ID：13057944
> 
> 赞同：2
> 
> 时间：2012-10-24T21:21:13.187
> 
> 标签：f#, vsto, excel-2010, excel-interop

我正在尝试为`AutoFilter`将使用数据的用户打开。

```
open Microsoft.Office.Interop.Excel

let xl = ApplicationClass()
xl.Workbooks.OpenText(fileName...)
let wb = xl.Workbooks.Item(1)
let ws = wb.ActiveSheet :?> Worksheet

let rows = string ws.UsedRange.Rows.Count

// AutoFilter method of Range class failed.
ws.Range("A7:I" + rows).AutoFilter() |> ignore 
```

谢谢你的尽心帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:16:29.097

根据[文档](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.range.autofilter.aspx)，您需要将 5 个参数传递给`AutoFilter`.

[System.Reflection.Missing.Value](http://msdn.microsoft.com/en-us/library/system.reflection.missing.value.aspx)可以填充未指定的参数。

就像是

```
ws.Range("A7:I" + rows).AutoFilter(1, System.Reflection.Missing.Value, 
                                   Excel.XlAutoFilterOperator.xlAnd, 
                                   System.Reflection.Missing.Value, true) 
|> ignore 
```

应该管用。

# java - 为什么 a:commandLink 的 action 属性有效但 h:commandLink 的无效？

> ID：13057945
> 
> 赞同：2
> 
> 时间：2012-10-24T21:21:14.420
> 
> 标签：java, jsf, richfaces, jsf-1.2

今天我有一个非常简单的任务需要帮助。首先让我解释一下我的环境。我们正在使用 Java/Hibernate/SEAM/Facelets/JSF/RichFaces 和 A4J 设置。我对此了解不多。

当旧 asp 平台上的所有工作都完成时，我会使用它。

所以我有这样的事情（我只是不记得在 stockCheck 之后我是否有 () ..我现在回家了）：

```
<h:commandLink value="Submit" action="session.stockCheck()"/> 
```

该`stockCheck()`方法不会运行！它不返回值，它的工作是在数据库中创建记录，它完美地做到了这一点。

所以我尝试了一些东西，但没有任何效果，我问了我的同事，他说只需将其更改为 a4j，它应该可以工作。我问他为什么，他不知道。

现在看，当我不明白为什么事情正常或不正常工作时，我真的会挂断电话。

将电子邮件提交到数据库的解决方案是：

```
<a:commandLink value="Submit" action="session.stockCheck()"/> 
```

顺便说一句：我们将 a4j 的命名空间设置为 a。

我在这里希望有人可以向我解释一些有关此的事情。

`<h:commandLink>`幕后发生了什么以及在这种情况下失败需要了解什么？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T23:22:16.960

如果您正在嵌套表单，则可能会发生这种情况。这在 HTML 中是非法的，并且行为未指定并且取决于所使用的网络浏览器。ajax 链接不提交表单，它只是通过 JavaScript 收集输入值，然后`XMLHttpRequest`在后台发送一个。

### 也可以看看：

*   [未调用 commandButton/commandLink/ajax 操作/侦听器方法或未更新输入值](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked/2120183#2120183)

# c++ - 带有构造函数的单链表类

> ID：13057946
> 
> 赞同：1
> 
> 时间：2012-10-24T21:21:14.903
> 
> 标签：c++

我想要做的是有一个带有默认构造函数、复制构造函数、复制赋值构造函数和析构函数的单链表类。我几乎没有开始它，因为我很困惑是否 a `Node`with int data 和 next 指针应该是一个单独的类或者我这样做的方式。

```
class list {
public:
    list(): next(NULL) {} // default constructor                                   
    list(const list &t){} // copy constructor                                     
    list&   operator= (const list &t) // assignment operator                        
    ~list(){} //destructor                                                        
    void print()    

private:
    struct Node {
        data x;
        Node *next;
    }_list;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T21:25:19.470

好吧，从逻辑上讲，节点是一个单独的结构（类），但在常见的实现中，列表本身由第一个节点表示。

所以，基本上，你不会有一个`list`类（如果你有，它只会持有一个指向第一个节点的指针+构造函数/赋值运算符/析构函数）：

```
struct Node {
  data x;
  Node *next;
};

class list{
 public:
  list(): next(NULL) {} // default constructor                                   
  list(const list &t){} // copy constructor                                     
  list& operator= (const list &t) // assignment operator                        
  ~list(){} //destructor                                                        
  void print() ;

 private:
  Node* first;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:30:11.507

这是完全有效的。如果`Node`只使用 in `list`，它只是一个实现细节。虽然，如果您需要`Node`在 之外`list`，例如在一个`iterator`类中，那么您需要在 之外实现它`list`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T21:27:23.077

如果“单独的类”是指不嵌套在*list 中*，那么不，最好将它嵌套（和私有）。但这并不意味着你不能给它构造函数、析构函数、操作符、方法等（即把它变成一个成熟的类）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T00:14:43.280

拥有一个内部类很好，但是，如果/当您为内部类实现诸如构造函数之类的方法时，则范围解析运算符需要包含外部类和内部类名称。例如，

```
List::Node::Node(const DataType& nodeData, Node* nextPtr) {stuff} 
```

通过在 List 类的私有部分中声明 Node 类，您提供了针对外部访问的封装，但仍然让 List 类具有访问权限。

# python - Python：通过公钥“不是有效的 RSA”的 Paramiko 身份验证

> ID：13057948
> 
> 赞同：3
> 
> 时间：2012-10-24T21:21:24.980
> 
> 标签：python, rsa, solaris, paramiko, public-key

我正在尝试通过 Paramiko 在两个 Solaris 服务器之间进行通信。出于安全原因，我不能使用我的私钥，所以我尝试使用 id_rsa.pub。最初我试过这个：

```
ssh.connect(hostname=host, username=user, key_filename=path-to-key) 
```

...其中 ssh 是一个 SSHClient 对象。最终我的谷歌搜索让我相信 connect 真的需要一个私钥，而不是公开的，所以我在[这里](http://code.activestate.com/recipes/576810-copy-files-over-ssh-using-paramiko/)尝试了解决方案。与此不同的是，它使用 transport.auth_publickey 进行身份验证，我希望这能让我绕过任何格式挂起。这是重要的部分：

```
try:
    ki = paramiko.RSAKey.from_private_key_file(filename=key_file)
except Exception, e:
    print 'Failed loading {0}.  {1}'.format(key_file, e)
    return 
```

我检查了我的 key_file，它肯定指向我的 id_rsa.pub 文件，该文件采用 OpenSSH 格式（我认为；它以 ssh-rsa 开头，以 user@host 结尾）。尽管如此，我始终遇到上述异常，其中 e 是“不是有效的 RSA 私钥文件”。查看代码，我能找到的最接近的错误是在 BER 的解码步骤中。我对 BER 或 OpenSSH 一无所知，但谷歌似乎认为它们是相同的东西，或者至少是兼容的。

这里有很多类似问题的答案，但没有任何迹象表明我的解决方案不起作用。我没有阅读一些奇怪的格式，我没有将密钥文件与密钥本身混淆，等等。

任何人都成功使用 id_rsa.pub 或 Paramiko 的等价物？最好在 *nix 上。我也乐于接受，“嘿，白痴！你为什么要使用 Paramiko ！” ...只要批评是建设性的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T21:42:04.577

连接服务器时不能使用**公钥**，必须提供**私钥**，这就是公钥/私钥认证的工作原理！您链接到的示例还读取**私钥**并使用它进行连接。

您可以生成一个仅用于 paramiko 的密钥对，这样您就不需要公开您用于例如 ssh 等的私钥。

# jquery - 使用 URL 中的变量使用 JQuery 过滤 XML 数据

> ID：13057952
> 
> 赞同：0
> 
> 时间：2012-10-24T21:21:30.213
> 
> 标签：jquery, xml, xml-parsing

因此，我要做的只是根据 url 变量显示位于特定县的客户。例如[http://www.example.com/clients.html?county=Ocean](http://www.example.com/clients.html?county=Ocean)。我认为我的 if 语句没有正确完成。一些帮助将不胜感激！

XML

```
 <clients>    
        <client>
        <name>Client 1</name>
        <id>001</id>
        <counties>
        <county>Monmouth</county>
        <county>Ocean</county>
        </counties>
        </client>

        <client>
        <name>Client 2</name>
        <id>001</id>
        <counties>
        <county>Middlesex</county>
        <county>Ocean</county>
        </counties>
        </client>
   </clients> 
```

jQuery

```
 $(document).ready(function()
    {
      $.ajax({
        type: "GET",
        url: "clients.xml",
        dataType: "xml",
        success: parseXml
      });
    });
    var county = $.getUrlVar('county');
    function parseXml(xml){

    $(xml).find("client").each(function(){
    if(county == $(this).find("county").text()) {

    $("#client").append('<div class="clients">' + ('<div class="name">' + $(this).find("name").text() + '</div>' + '</div>'); 

    });

    } 
else { alert("Fail!") }

    } 
```

下面是我如何获取 url 变量以防万一

```
$.extend({
  getUrlVars: function(){
    var vars = [], hash;
    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
    for(var i = 0; i < hashes.length; i++)
    {
      hash = hashes[i].split('=');
      vars.push(hash[0]);
      vars[hash[0]] = hash[1];
    }
    return vars;
  },
  getUrlVar: function(name){
    return $.getUrlVars()[name];
  }
}); 
```

# c# - 在类实例之间共享字典内容

> ID：13057960
> 
> 赞同：3
> 
> 时间：2012-10-24T21:21:53.387
> 
> 标签：c#, scope

假设我有一个 Dictionary 结构，例如

```
var stocks = new Dictionary<string, double>();
stocks.Add("APPL", 1234.56); 
```

在保留从字典中添加和删除的能力的同时，有没有办法可以在它的包含类的实例之间“共享”内容？（顺便说一句，我被迫从一个不能是静态的包含类继承。）

或者是否有另一种方式来表示允许这种类型共享的数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T21:26:54.777

一个类不需要是静态的就可以拥有静态成员。我建议将字典作为受保护的静态属性。同样为了线程安全，您需要使用[`ConcurrentDictionary`](http://msdn.microsoft.com/en-us/library/dd287191.aspx)而不是正常的`Dictionary`

```
public class MyClass
{
    protected static ConcurrentDictionary<string, double> Stocks {get; set;} 

    static MyClass()
    {
        Stocks = new ConcurrentDictionary<string, double>();
    }
} 
```

# c# - 在新线程上运行 Linq 查询

> ID：13057963
> 
> 赞同：-1
> 
> 时间：2012-10-24T21:22:04.497
> 
> 标签：c#, multithreading, linq

在按照 MSDN 指南创建一个新线程来更新 UI 控件后，我遇到了一个奇怪的错误。我在 load 方法中运行了同样的查询，它工作得很好，现在在新线程中运行我得到了正确数量的结果，但是我没有得到字段的名称，而是在我的组合框中写入了 16 次 DataSet。谁能帮我这个？

```
private void Form1_Load(object sender, EventArgs e)
    {
        recipeListComboBox.Items.Clear();
        Thread QueryThread = new Thread(new ThreadStart(updateRecipeList));
        QueryThread.Start();
    }

 private void updateRecipeList()
    {

        IEnumerable<string> list = recipeList.getList();

        foreach (string a in list)
            UpdateRecipeComboBox(a);
    }

 private void UpdateRecipeComboBox(string text)
    {
        if (this.recipeListComboBox.InvokeRequired)
        {
            UpdateRecipeComboBoxCallBack d = new UpdateRecipeComboBoxCallBack(UpdateRecipeComboBox);
            Invoke(d, new object[] { text });
        }

        else
        {
            this.recipeListComboBox.Items.Add(Text);
        }
    }

    delegate void UpdateRecipeComboBoxCallBack(string text); 
```

在我把它放在一个新线程上之前，它看起来像这样：

```
private void Form1_Load(object sender, EventArgs e)
{
     recipeListComboBox.Items.Clear();
     IEnumerable<string> list = recipeList.getList();

     foreach (string a in list)
          recipeComboBox.Items.Add(a); 
```

这将重新运行数据库中 16 个不同接收方的列表，现在我只打印了 16 次 dataSet。

谢谢你的帮助！！

克雷格

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T21:27:22.580

如果您`"DataSet"`再次打印出来，我猜您在某处使用`DataSet`对象代替字符串参数，并且它会`object.ToString()`自动调用返回类的名称。

不确定这是否是您的问题，但您在这里也有大小写不匹配：

```
private void UpdateRecipeComboBox(string text)
{
    if (this.recipeListComboBox.InvokeRequired)
    {
        UpdateRecipeComboBoxCallBack d = new UpdateRecipeComboBoxCallBack(UpdateRecipeComboBox);
        Invoke(d, new object[] { text });
    }

    else
    {
        this.recipeListComboBox.Items.Add(Text);  // <--- should be text???
    }
} 
```

# javascript - JQuery 工具：如何从另一个 JS 文件文本字符串填充标题标签

> ID：13057964
> 
> 赞同：0
> 
> 时间：2012-10-24T21:22:06.480
> 
> 标签：javascript, jquery, jquery-plugins, jquery-tools

我正在为工具提示使用 JQuery Tools 插件，它工作正常，但我想从另一个 JS 文件加载我的文本字符串以获取工具提示，或者如何从另一个 JS 文件文本字符串填充标题标签。这是我的代码：

```
$(".show-tooltip-top[title]").tooltip({position: "top center"}); 
```

以前我只是用 JQuery 做这样的事情，而不是插件：

```
$(".tooltip-test",this).html("This is a tooltip test"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T22:08:52.907

不完全清楚你在问什么，但如果你只是想知道如何改变`title`元素的属性，你可以使用[jQuery 的`attr`函数](http://docs.jquery.com/Attributes/attr)：

```
$(".show-tooltip-top[title]").attr("title", "your title text goes here").tooltip({position: "top center"}); 
```

# php - 如果数组中的数据存在，则自动生成 JS 变量 PHP/MySQL

> ID：13057967
> 
> 赞同：0
> 
> 时间：2012-10-24T21:22:37.663
> 
> 标签：php, javascript, mysql

我的网站上有一张地图，上面有使用我表格中的数据放置的图。这些图是用javascript放置的......

```
addPostCode('<?php echo $array[$UID][0]; ?>');
addPostCode('<?php echo $array[$UID][1]; ?>');
addPostCode('<?php echo $array[$UID][2]; ?>'); 
```

不知何故，我需要查看该变量是否存在于我的表中，如果存在，则生成一个附加行并增加我的数组编号，因此基于上述 3 条记录，下一行将是...

```
addPostCode('<?php echo $array[$UID][4]; ?>'); 
```

我可以问这是否可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T03:31:54.900

您只需要遍历`$array[$UID]`变量的所有成员。

```
<?php
    foreach($array[$UID] as $thing) {
        $encodedThing = json_encode($thing);
        echo "addPostCode($encodedThing);\n"
    }
?> 
```

我使用`json_encode()`它是因为它会进行任何必要的转义以使您的数据与 JavaScript 兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:54:37.193

如果我很好理解你，你会这样做：

```
addPostCode('<?php $i=0; while (isset( $array[$UID][$i])) { echo $array[$UID][$i]; $i++ ; } ?>'); 
```

这也将取代你所有的`addPostCode()`电话。

# lucene - Apache Lucene - 按具体日期搜索

> ID：13057968
> 
> 赞同：1
> 
> 时间：2012-10-24T21:22:40.550
> 
> 标签：lucene

我想找到允许使用 Apache Lucene 语法进行搜索查询的应用程序的一些数据。我按日期搜索数据，并想从具体日期 - 具体日期中查找数据。我怎样才能做到这一点？

查询：

```
date: [2010-10-4 TO 2010-10-4] 
```

或者

```
date: 2010-10-4 
```

不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:54:57.577

**简短的回答：** Lucene 中没有日期查询语法的“标准”。您需要找出您的应用支持的格式。

**长答案：**在过去几年左右的时间里，Lucene 对数字数据进行了特殊编码。最有可能的是，索引中的日期以时间戳格式保存。这意味着查询解析器需要接收查询，咀嚼它并吐出时间戳。查询原始时间戳不是很实用——至少对人类来说是这样——你的查询解析器可能有一些它能够理解的预定义格式。

例如，Solr 具有一[组预定义的受支持的日期/时间格式](http://lucene.apache.org/solr/api-4_0_0-BETA/org/apache/solr/schema/DateField.html)，并且能够将它们解析为时间戳。

不要忘记 Lucene 只是一个库，每个应用程序（包括 Solr 和您正在使用的应用程序）都旨在以他们喜欢的方式使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T21:55:11.000

我找到了解决方案。要按具体一天进行搜索，请查询：

```
date: [2010-10-4T00:00:00 TO 2010-10-4T23:59:59] 
```

是正确的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-31T12:33:59.857

我把日期范围不带连字符，它对我有用。

```
date: [20210901 TO 20211101 ] 
```

请参阅文档[范围搜索](https://lucene.apache.org/core/2_9_4/queryparsersyntax.html#Range%20Searches)

# tomcat - 使用第三方证书时 solr 的露天存储库 tomcat 用户名？

> ID：13057979
> 
> 赞同：0
> 
> 时间：2012-10-24T21:23:30.830
> 
> 标签：tomcat, solr, alfresco

`HTTP Status 401 - Cannot authenticate with the provided credentials`当露天尝试使用 solr 搜索时，我得到了。

我从 startSSL 获得了一个免费的 class1 密钥。和[alfresco wiki](http://wiki.alfresco.com/wiki/Alfresco_And_SOLR#Generating_new_SSL_certificates)说`REPO_CERT_DNAME`必须匹配 tomcat 用户名`roles=repository`

但是因为我没有像维基说的那样自己生成密钥对。我怎么知道我应该为tomcat用户名输入什么？

发行人？

主题？

友好的名字？友好名称上有一些随机数字，例如

```
1.2.840.xxxxx.3.9.1=#16117765626d61737465724xxxxxxxxxxxx,CN=Domain.com,C=US,2.5.4.13=#1310446c5a344a4dxxxxxxxxx4453834 
```

注意：我已经解决了`unable to find valid certification path to requested target`错误，所以我认为它可能与密钥库的东西无关

# php - youtube gdata 超时

> ID：13057988
> 
> 赞同：4
> 
> 时间：2012-10-24T21:24:05.227
> 
> 标签：php, timeout, youtube-api

我对 Youtube 的 GDATA API 有疑问。

如果不更改我的 php 设置或代码，我将无法再通过 PHP API 访问 YouTube。

创建一个新的 Zend_Gdata_YouTube 对象并加载视频数据会导致 'Zend_Gdata_App_HttpException' 异常，并带有以下消息：

> 无法连接到 tcp://gdata.youtube.com:80。错误 #110：/usr/share/php/Zend/Gdata/App.php:688 中的连接超时 堆栈跟踪：#0 /usr/share/php/Zend/Gdata.php(221): Zend_Gdata_App->performHttpRequest ('GET', 'http://gdata.yo...', 数组, NULL, NULL, NULL) #1 /usr/share/php/Zend/Gdata/App.php(875): Zend_Gdata->performHttpRequest ('GET', 'http://gdata.yo...', 数组) #2 /usr/share/php/Zend/Gdata/App.php(763): Zend_Gdata_App->get('http:// gdata.yo...', NULL) #3 /usr/share/php/Zend/Gdata/App.php(220): Zend_Gdata_App->importUrl('http://gdata.yo...', 'Zend_Gdata_YouT ...', NULL) #4 /usr/share/php/Zend/Gdata.php(187): Zend_Gdata_App->getEntry('http://gdata.yo...', 'Zend_Gdata_YouT...') '#5' /usr/share/php/Zend/Gdata/YouTube。

我知道这是一个超时。但是什么会导致这个超时？因为我不介意对服务器的连接设置进行任何更改，并且对 gdata.youtube.com 的 ping 操作非常有效。

另外我想说的是，系统不是在共享托管平台上运行的，所以没有托管人做他想做的任何事情——系统更改是由我个人执行的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-07T03:40:36.550

我通过将上传脚本中的所有 google 链接更改为安全连接来解决此问题。

例如，我改变了

```
http://uploads.gdata.youtube.com/feeds/api/users/default/uploads 
```

至

```
https://uploads.gdata.youtube.com/feeds/api/users/default/uploads 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T00:58:28.373

YouTube API 服务器端没有任何东西会导致任何客户端完全拒绝连接。即使由于某种原因，您的客户端的流量违反了某些配额限制或由于反 DoS 保护而被阻止（我并不是暗示是这种情况），我们仍然会为您的请求返回有效的 HTTP 响应。

所以，我可以肯定地说，无论是什么问题，都不是由于 YouTube API 服务器造成的。最可能的罪魁祸首是服务器和 YouTube API 之间的网络问题。标准网络故障排除程序是有序的。

# c# - 使用数据源确定本地 SQL Server CE 数据库的路径

> ID：13057990
> 
> 赞同：0
> 
> 时间：2012-10-24T21:24:12.613
> 
> 标签：c#, .net, sql-server-ce

我已经使用来自 MSDN 站点的这些[说明](http://msdn.microsoft.com/en-us/library/bb546200.aspx)设置了数据库。其中包括首先创建数据库，然后将其添加到项目中。

然后在打开数据库时的数据源中，我使用了类似“Data Source=|Applicatoin Data| + filename.sdf”的东西，但是使用它时，我会启动应用程序，然后将一些数据加载到它上面，但是我不能查看我在项目之外创建的本地数据库中的数据（如我链接到的教程中所述）只有在我硬编码到我第一次创建数据库时创建的 .sdf 文件时才会起作用。

我似乎找不到任何关于如何使它成为在构建之间数据将保留在数据库中的相对路径的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:34:46.977

当您构建解决方案时，您的数据库将被复制到 bin 目录

当您调试时，您使用该副本而不是您的项目中的副本。

这是设计使然。这是正确的。

你应该这样做：

```
#if DEBUG
    public static readonly string ConnectionString =
        string.Format(@"Data Source=..\..\DbTest\{0}; password='{1}'", DbFileName, DbPassword);
#else
    public static readonly string ConnectionString =
        string.Format(@"Data Source=|DataDirectory|\{0}; password='{1}'", DbFileName, DbPassword);
#endif 
```

请记住使用 2 个不同的数据库：

一个用于测试一个用于发布没有数据的应用程序

# if-statement - 这是 Bison 的安全编程吗？

> ID：13057991
> 
> 赞同：0
> 
> 时间：2012-10-24T21:24:18.433
> 
> 标签：if-statement, bison, yacc

我正在编写一个编译器，并且我有用于处理无限嵌套 if 语句的工作代码，但这有点像 hack。我不知道这样做是否安全？

```
con_statement:
IF exp DO
{
  $1 = ifNum++;
  if($2 == BOOLEAN_TYPE || $2 == INTEGER_TYPE)
    {
      utstring_printf(code, "\tpop\teax\n");
      utstring_printf(code, "\tcmp\teax, 0\n");
      utstring_printf(code, "\tje\tIF_END_%d\n", $1);
    }
  if($2 == FLOAT_TYPE)
    {
      utstring_printf(code, "\tnop\n");
    }
}
program FI
{
  utstring_printf(code, "IF_END_%d:\n", $1);
}
; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T23:42:22.457

这很好用，但使用 $$/$4 会更清楚 IMO：

```
con_statement:
IF exp DO
{
  $$ = ifNum++;
  if($2 == BOOLEAN_TYPE || $2 == INTEGER_TYPE)
    {
      utstring_printf(code, "\tpop\teax\n");
      utstring_printf(code, "\tcmp\teax, 0\n");
      utstring_printf(code, "\tje\tIF_END_%d\n", $$);
    }
  if($2 == FLOAT_TYPE)
    {
      utstring_printf(code, "\tnop\n");
    }
}
program FI
{
  utstring_printf(code, "IF_END_%d:\n", $4);
}
; 
```

第一个操作是生成一个值（它放入`$$`），然后后面的操作可以访问该值。

或者（特别是如果您想支持 ELSE），将这个初始操作拆分到单独的生产中可能是有意义的：

```
con_statement:
  if_head program FI
    { utstring_printf(code, "IF_FALSE_%d:\n", $1); }
| if_head program ELSE
    { utstring_printf(code, "\tjmp\tIF_END_%d\n", $1);
      utstring_printf(code, "IF_FALSE_%d:\n", $1); }
  program FI
    { utstring_printf(code, "IF_END_%d:\n", $1); }
;

if_head:
  IF exp DO
    { $$ = ifNum++;
          :
; 
```

这允许对普通 if 和 if/else 使用相同的操作，避免语法冲突，因为在您解析时`IF..DO`您不知道是否会有 an `ELSE`。

# c# - 桌面 Metro 应用程序

> ID：13057992
> 
> 赞同：3
> 
> 时间：2012-10-24T21:24:20.063
> 
> 标签：c#, windows-8, microsoft-metro, visual-studio-2012

我想知道如何创建`Zune-like`应用程序（我的意思是`Metro`风格）。但我不希望它们成为`Windows Store apps`（我已经安装了`Windows 8`平台`VS2012`）。你能告诉我是否应该下载一些样式包或类似的东西吗？也许有一些图书馆正在实施`Metro`？如果是，请让我知道哪个是最好的。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T21:34:06.463

WPF有一个[名为 Cosmopolitan 的主题，](http://cosmopolitanwpf.codeplex.com/)它模仿 Metro 风格。现在它只是免费为您提供控件的扁平外观。布局、动画和导航是您自己的事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T21:37:51.583

由于命名问题（*阅读：MS 不想被起诉，并且显然无法正确注册 Metro 一词，请看图*），不再有这样的东西`Metro`了。

该样式被重命名为“Windows Store”。所以我不能 100% 确定你要的是什么。

此外，与其网站上的名称和可能具有误导性的营销说法相反，Windows 商店应用程序不必通过 Windows 商店发布和销售。

您可能会阅读此内容以获得一些“澄清”：
[http ://www.zdnet.com/microsoft-finally-comes-cleaner-on-post-metro-naming-plans-7000004151/](http://www.zdnet.com/microsoft-finally-comes-cleaner-on-post-metro-naming-plans-7000004151/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T04:21:51.830

考虑使用 WPF UI 框架构建像 zune 这样的应用程序

[http://mahapps.com/MahApps.Metro/](http://mahapps.com/MahApps.Metro/)

# java - Java绘画问题

> ID：13057994
> 
> 赞同：4
> 
> 时间：2012-10-24T21:24:32.033
> 
> 标签：java, swing, user-interface, graphics, paint

好的，我已经搜索和谷歌搜索了很长时间，这让我很生气。（请记住，这始于大学的代码）。

任何帮助将不胜感激！因为在谈到 java 图形时我似乎有一个心理障碍:(。

问题是标记图像，但是由于各种原因，我遇到一半图像丢失的问题，除非我在框架周围移动然后它又回来了。同样，如果我尝试删除绘制在 BufferedImage 上的“标签”，我必须在 Jframe 周围移动才能看到结果。

最后，当 JOptionPane 弹出询问标签名称时，它会在关闭时执行此操作：

**获取图片以发布** [https://docs.google.com/document/d/1I5rFH23a75IHB6twTu1dPRwmRt-By1sIUvDvI6FE_OY/edit](https://docs.google.com/document/d/1I5rFH23a75IHB6twTu1dPRwmRt-By1sIUvDvI6FE_OY/edit)

```
 package hci;

import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

/**
 * Deals with the label tools
 */
public class LabelToolGUI extends JPanel implements ActionListener {

        JButton newButton = new JButton("New");
        JButton deleteButton = new JButton("Delete");
        JButton editButton = new JButton("Edit");
        JButton undoButton = new JButton("Undo");
        JComboBox labelsBox = new JComboBox();

    String saveIcon = "./images/icons/save.jpg";
    String deleteIcon = "./images/icons/delete.jpg";
    String openIcon = "./images/icons/open.jpg";
    String newIcon = "./images/icons/new.jpg";
    String helpIcon = "./images/icons/help.jpg";
    String labelsIcon = "./images/icons/help.jpg";
    String fname = "";
    String fnameURL = "";

    public LabelToolGUI() {
        super();
        newButton.addActionListener(this);
        deleteButton.addActionListener(this);
        editButton.addActionListener(this);
        undoButton.addActionListener(this);

        setLayout(new BorderLayout());
        setBorder(BorderFactory.createTitledBorder("Label tools"));

        add(newButton, BorderLayout.WEST);
        add(deleteButton, BorderLayout.EAST);
        add(editButton, BorderLayout.CENTER);
        add(labelsBox, BorderLayout.NORTH);
        add(undoButton, BorderLayout.SOUTH);
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        Object src = e.getSource();
        if(src == newButton) {
            String labelName = JOptionPane.showInputDialog("Please input a value");
            ImageLabeller.addNewPolygon(labelName);
            labelsBox.addItem(labelName);
        } else if(src == deleteButton) {
            String toDelete = labelsBox.getSelectedItem().toString();
            System.out.println("Deleting " + toDelete);
            labelsBox.removeItem(labelsBox.getSelectedItem());
            ImageLabeller.removeLabel(toDelete);
        } else if(src == undoButton) {
            ImageLabeller.undo();
            ImageLabeller.imagePanel.repaint();
        }
    }
} 
```

* * *

```
package hci;

import javax.swing.*;

import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;

/**
 * Main class of the program - handles display of the main window
 * @author Michal
 *
 */
public class ImageLabeller extends JFrame implements ActionListener {
    /**
     * some java stuff to get rid of warnings
     */
    private static final long serialVersionUID = 1L;

    /**
     * main window panel
     */
    JPanel appPanel = null;

    /**
     * toolbox - put all buttons and stuff here!
     */
    JPanel toolboxPanel = null;

    /**
     * image panel - displays image and editing area
     */
    static ImagePanel imagePanel = null;

    /**
     * handles New Object button action
     */
    public static void addNewPolygon(String labelName) {
        imagePanel.addNewPolygon(labelName);
    }

    public static void removeLabel(String labelName) {
        LabelHandler.deleteLabel(labelName);
    }

    /**
     * Removes last point added to the label.
     */
    public static void undo() {
        imagePanel.currentLabel.removeLast();
    }

    /*@Override
    public void paint(Graphics g) {
        super.paint(g);
        imagePanel.paint(g); //update image panel
    }  */

    /**
     * sets up application window
     * @param imageFilename image to be loaded for editing
     * @throws Exception
     */
    public void setupGUI(String imageFilename) throws Exception {
        this.addWindowListener(new WindowAdapter() {
            public void windowClosing(WindowEvent event) {
                //here we exit the program (maybe we should ask if the user really wants to do it?)
                //maybe we also want to store the polygons somewhere? and read them next time
                System.out.println("Bye bye!");
                System.exit(0);
            }
        });

        //setup main window panel
        appPanel = new JPanel();
        this.setLayout(new BoxLayout(appPanel, BoxLayout.X_AXIS));
        this.setContentPane(appPanel);

        //Create and set up the image panel.
        imagePanel = new ImagePanel(imageFilename);
        imagePanel.setOpaque(true); //content panes must be opaque

            appPanel.add(imagePanel);

        //add toolbox to window
        appPanel.add(new LabelToolGUI());

        //display all the stuff
        this.pack();
            this.setVisible(true);
    }

    /**
     * Runs the program
     * @param argv path to an image
     */
    public static void main(String argv[]) {
        try {
            //create a window and display the image
            ImageLabeller window = new ImageLabeller();
            window.setupGUI(argv[0]);
        } catch (Exception e) {
            System.err.println("Image: " + argv[0]);
            e.printStackTrace();
        }
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        System.out.println("Action clicked");
        imagePanel.paint(imagePanel.getGraphics());
    }
} 
```

* * *

```
package hci;

import javax.imageio.ImageIO;
import javax.swing.JPanel;

import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.image.BufferedImage;
import java.io.File;
import java.util.ArrayList;

import hci.utils.*;

/**
 * Handles image editing panel
 * @author Michal
 *
 */
public class ImagePanel extends JPanel implements MouseListener {
    /**
     * some java stuff to get rid of warnings
     */
    private static final long serialVersionUID = 1L;

    /**
     * image to be tagged
     */
    BufferedImage image = null;

    /**
     * list of current polygon's vertices 
     */
    Label currentLabel = null;

    /**
     * default constructor, sets up the window properties
     */
    public ImagePanel() {
        currentLabel = new Label();

        this.setVisible(true);

        Dimension panelSize = new Dimension(800, 600);
        this.setSize(panelSize);
        this.setMinimumSize(panelSize);
        this.setPreferredSize(panelSize);
        this.setMaximumSize(panelSize);

        addMouseListener(this);
    }

    /**
     * extended constructor - loads image to be labelled
     * @param imageName - path to image
     * @throws Exception if error loading the image
     */
    public ImagePanel(String imageName) throws Exception{
        this();
        image = ImageIO.read(new File(imageName));
        if (image.getWidth() > 800 || image.getHeight() > 600) {
            int newWidth = image.getWidth() > 800 ? 800 : (image.getWidth() * 600)/image.getHeight();
            int newHeight = image.getHeight() > 600 ? 600 : (image.getHeight() * 800)/image.getWidth();
            System.out.println("SCALING TO " + newWidth + "x" + newHeight );
            Image scaledImage = image.getScaledInstance(newWidth, newHeight, Image.SCALE_FAST);
            image = new BufferedImage(newWidth, newHeight, BufferedImage.TYPE_INT_RGB);
            image.getGraphics().drawImage(scaledImage, 0, 0, this);
        }
    }

    /**
     * Displays the image
     */
    public void ShowImage() {
        Graphics g = this.getGraphics();

        if (image != null) {
            g.drawImage(image, 0, 0, null);
        }
    }

    public void paintComponent(Graphics g) {
        super.paintComponent(g);

        //display iamge
        ShowImage();

        //display all the completed polygons
        for(Label l : LabelHandler.labels) {
            drawLabel(l);
            finishPolygon(l);
        }

        //display current polygon
        drawLabel(currentLabel);
    }

    /**
     * displays a polygon without last stroke
     * @param l label to be displayed
     */
    public void drawLabel(Label l) {
        Graphics2D g = (Graphics2D)this.getGraphics();
        g.setColor(Color.GREEN);
        for(int i = 0; i < l.size(); i++) {
            Point currentVertex = l.getPoint(i);
            if (i != 0) {
                Point prevVertex = l.getPoint(i - 1);
                g.drawLine(prevVertex.getX(), prevVertex.getY(), currentVertex.getX(), currentVertex.getY());
            }
            g.fillOval(currentVertex.getX() - 5, currentVertex.getY() - 5, 10, 10);
        }
    }

    /**
     * displays last stroke of the polygon (arch between the last and first vertices)
     * @param l label to be finished
     */
    public void finishPolygon(Label l) {
        //if there are less than 3 vertices than nothing to be completed
        if (l.size() >= 3) {
            Point firstVertex = l.getPoint(0);
            Point lastVertex = l.getPoint(l.size() - 1);

            Graphics2D g = (Graphics2D)this.getGraphics();
            g.setColor(Color.GREEN);
            g.drawLine(firstVertex.getX(), firstVertex.getY(), lastVertex.getX(), lastVertex.getY());
        }
    }

    /**
     * moves current polygon to the list of polygons and makes pace for a new one
     */
    public void addNewPolygon(String labelName) {
        //finish the current polygon if any
        if (currentLabel != null ) {
            finishPolygon(currentLabel);
            LabelHandler.addLabel(currentLabel);
        }

        currentLabel = new Label(labelName);
    }

    @Override
    public void mouseClicked(MouseEvent e) {
        int x = e.getX();
        int y = e.getY();

        //check if the cursos withing image area
        if (x > image.getWidth() || y > image.getHeight()) {
            //if not do nothing
            return;
        }

        Graphics2D g = (Graphics2D)this.getGraphics();

        //if the left button than we will add a vertex to poly
        if (e.getButton() == MouseEvent.BUTTON1) {
            g.setColor(Color.GREEN);
            if (currentLabel.size() != 0) {
                Point lastVertex = currentLabel.getPoint(currentLabel.size() - 1);
                g.drawLine(lastVertex.getX(), lastVertex.getY(), x, y);
            }
            g.fillOval(x-5,y-5,10,10);

            currentLabel.addPoint(new Point(x,y));
            System.out.println(x + " " + y);
        } 
    }

    @Override
    public void mouseEntered(MouseEvent arg0) {
    }

    @Override
    public void mouseExited(MouseEvent arg0) {
    }

    @Override
    public void mousePressed(MouseEvent arg0) {
    }

    @Override
    public void mouseReleased(MouseEvent arg0) {
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T21:35:24.143

不要`getGraphics()`用于您的绘画，因为它是临时缓冲区，会在下次重新绘画时回收。如果需要的`paintComponent()`话，你会画画吗？`repaint()`

也不要`paint()`手动调用（即`imagePanel.paint(imagePanel.getGraphics());`：）

有关详细信息，请参阅[执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)。另请参阅[AWT 和 Swing 中的绘画](http://www.oracle.com/technetwork/java/painting-140037.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T21:35:07.857

在`ImagePanel.paintComponent`替换`ShowImage();`为`if (image != null) g.drawImage( image, 0, 0, this );`.

设备上下文`g`是由 swing 初始化的，你不必再通过`getGraphics()`.

# delphi - 如何使我对 XML 相关源文件的更改生效？

> ID：13057995
> 
> 赞同：0
> 
> 时间：2012-10-24T21:24:36.760
> 
> 标签：delphi, delphi-xe

我想更改 xmldom 和 XMLDoc 文件。我试过了，但我不知道如何测试这些更改，因为程序似乎没有运行这些文件中的代码。我尝试使用 ShowMessage 来查看是否正在访问该代码，但它从未出现过。即使我重命名文件所在的目录，程序仍然可以正常编译，就好像它没有在运行时主动读取文件，而是将信息存储在其他地方。

如何更改这些命名空间，然后确保这些更改包含在我的下一次编译中？

*更新*

好吧，我正在寻找一般的答案..因为我在多种情况下都遇到过这个问题..但是对于具体情况，[更改 XML 节点属性值会给出“命名空间错误”](https://stackoverflow.com/questions/11794540/changing-xml-node-attribute-value-gives-namespace-error)（这里的答案是关于更改“AdomCore_4_3”）我想要能够更改它并在我编译时显示更改。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T21:40:45.437

如果您已从环境中删除了已编译的 DCU 文件，并且您的更改仍未编译到您的项目中，那么您要么根本没有真正使用这些单元，要么您启用了运行时包。

对于运行时包，编译后的代码是从 BPL 文件而不是 DCU 访问的。不允许分发修改后的 BPL 文件，因此如果您要修改 Delphi 提供的源代码，您需要确保没有将带有 XML 单元的包链接到您的项目。您可以在项目的链接器选项中控制它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T23:55:48.260

只要您不更改`interface`单元部分，仅更改`implementation`部分，那么您可以在项目选项中禁用运行时包的使用，然后将修改后的源文件直接添加到项目中。编译器会将它们编译成新的 .DCU 文件并使用它们而不是默认的 .DCU 文件。

# vb.net - 使用已安装的版本号作为变量

> ID：13057996
> 
> 赞同：0
> 
> 时间：2012-10-24T21:24:48.803
> 
> 标签：vb.net

我正在尝试检索各种已安装应用程序的版本号，然后在它们低于某个值时执行操作。例如：

```
Dim regKey As RegistryKey
        Dim ver As ???????
        regKey = Registry.LocalMachine.OpenSubKey("Software\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall\Adobe Flash Player ActiveX")
        ver = regKey.GetValue("DisplayVersion")
                MessageBox.Show(ver)
            If ver < 11.4.402.287 Then
            'Install updated version of software in question
        End If
        regKey.Close() 
```

我如何定义 Ver 以便能够轻松地进行大于/小于检查？我试过了：

```
Dim ver as integer
Dim ver as decimal 
```

这两个都返回“附加信息：从字符串“11.4.402.287”到类型“十进制”的转换无效。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:34:23.533

假设您正在查看前两个组件，则进行简单的解析和检查：

```
Dim va = Ver.split("."c)
If va(0) < 11 OrElse (va(0) = 11) and va(1) < 4) Then 
    'Install updated ....
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:35:55.447

一个正则表达式可能看起来像：

```
(?<major>\d+)(\.(?<minor>\d+)(\.(?<revision>\d+)(\.(?<build>\d+))?)?)? 
```

然后，您可以使用组提取版本号：

```
Dim l_version As Regex = New Regex("(?<major>\d+)(\.(?<minor>\d+)(\.(?<revision>\d+)(\.(?<build>\d+))?)?)?")
Dim l_versionMatch As Match = l_version.Match( "1.2.3" )

Dim l_major As String = l_versionMatch.Groups("major").Value 
```