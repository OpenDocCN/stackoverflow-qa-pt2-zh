# StackOverflow 问答 15015000-15015999

# openoffice-calc - Open office calc 动态单元格选择

> ID：15015010
> 
> 赞同：0
> 
> 时间：2013-02-22T00:46:49.710
> 
> 标签：openoffice-calc

所以我有一个我认为是我想要修复的开放式办公室计算中的一个非常简单的问题，但我在任何地方都找不到答案。

如果这是我的桌子：

```
A  |  B  |  C

5  |  2  |  ?

3  |  1  |  ? 
```

我希望 C 获取它旁边的 B 的值并获取 A{那个数字}的值。

所以它应该是这样的：

```
A  |  B  |  C

5  |  2  |  3

3  |  1  |  5 
```

编辑：

我会尽力解释得更好。所以我想让单元格 C1 做的是获取 B1 的值。然后，它获取该值，将其称为 X，并获取单元格 AX 的值。其中 A 是列。所以在这种情况下，C1 获取 A2 的值，C2 获取 A1 的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:50:22.603

所以这是答案：

公式应`=INDIRECT("A"&B1)`在单元格 C1 中，然后复制到 C 列

# ios - 为什么 NSURLConnection 在 iOS OCUnit 测试用例中不起作用？

> ID：15015011
> 
> 赞同：4
> 
> 时间：2013-02-22T00:46:55.567
> 
> 标签：ios, nsurlconnection, ocunit

我编写了一个 OCUnit 单元测试用例，它依赖于外部 Web 服务来完成。我知道这本身就存在争议，但我绝对希望将 Web 服务包含在测试中（无论如何它都在内部服务器上运行）。

显然，当作为 SenTestCase 的一部分运行时，NSURLConnection 无法启动。连接根本不是由以下行启动的：

```
NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:urlRequest delegate:self startImmediately:YES]; 
```

没有调用任何委托方法。几乎相同的代码通常在 OCUnit 之外运行。

阻止它运行的 OCUnit 运行时环境是什么？

并不是说测试在请求返回之前完成：我有 NSCondition 锁来处理请求的异步性质。我也尝试过删除这些并在运行循环上旋转。测试用例继续执行，但 NSURLConnection 永远不会启动。

如果可能的话，我宁愿不将我的测试迁移到另一个单元测试框架。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T00:48:10.300

我有完全相同的问题，我通过使用来解决它

```
 [[NSRunLoop currentRunLoop] runUntilDate:[NSDate dateWithTimeIntervalSinceNow:30]]; 
```

我之前使用过 NSCondition，但我认为它可能会锁定 NSUrlConnection 的线程。

# html - 寻找一个 HTML 解析器在文本节点上进行搜索/替换

> ID：15015012
> 
> 赞同：0
> 
> 时间：2013-02-22T00:47:12.513
> 
> 标签：html, html-parsing, replace, textnode

我需要在很多**静态 html 文件**中进行大量搜索和替换。我想出的一个问题是，当**我真正想要搜索/替换的只是文本节点**时，我在 urls 中得到了匹配。

因此，这使得正则表达式更加困难并且很可能更容易出错，因为您现在正在使用它们解析 html。

仅在文本节点上进行搜索/替换的最简单方法是什么**？**我说的是你可以在几分钟内启动并运行，而无需 Python-Java-Ruby-Headless-Phantom-PHP-Node-FluxCapacitor 中的 Master。

请提供建议，就好像你在和一个白痴说话一样。

我在**Windows 7**上。

我正在寻找类似 Notepad++ 中的搜索/替换功能。你给它一个开始搜索的目录，它递归搜索，点击你指定的每种类型的文件（如 .html 或 .shtml）你告诉它要搜索什么以及用什么替换它。它会运行，10 或 15 秒后，您可能已经一口气编辑了数百个文件。你知道，死的简单的东西。

这就是我想要做的，但只是在文本节点中搜索/替换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T01:01:58.843

SublimeText 2 has some very powerful text searching features that should empower you to be able to do as you are explaining, so whilst i think i can point you in the right direction - I myself am still learning how to use it - but it does have the "find in files" option which means you can grab the selected word in many different files and replace it - but I havn't found a way to exclude the irrelevant ones that may not need changing. Hopefully someone else will come along and enlighten you.

You may want to add the tag "Sublime text 2" to your original post to broaden the audience

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T04:37:02.330

[您可以在http://htql.net](http://htql.net)使用 Python 和 HTQL 。一些例子：

```
page="<html> <body> <table> <tr><td id='cell1'> test1 </td></tr> <tr> <td id='cell2'> test2 </td> </tr> </table> </body> </html>"

import htql
print(htql.query(page, "<td (id='cell1')>:tx &replace('XXXX') "))
#[("<html> <body> <table> <tr><td id='cell1'>XXXX</td></tr> <tr> <td id='cell2'> test2 </td> </tr> </table> </body> </html>",)]

print(htql.query(page, "<td (id='cell1')>:id &replace('ZZZZ') "))
#[("<html> <body> <table> <tr><td id='ZZZZ'> test1 </td></tr> <tr> <td id='cell2'> test2 </td> </tr> </table> </body> </html>",)]

print(htql.query(page, "<td (id like 'cell%')>:tx &replace('YYYY') "))
#[("<html> <body> <table> <tr><td id='cell1'>YYYY</td></tr> <tr> <td id='cell2'>YYYY</td> </tr> </table> </body> </html>",)] 
```

# joomla - 用php将k2文章插入joomla数据库

> ID：15015016
> 
> 赞同：2
> 
> 时间：2013-02-22T00:47:23.117
> 
> 标签：joomla, joomla-k2

我想用 php 将 K2 文章添加到 joomla 数据库中。我可以在文章表中添加一条记录吗？还是我也需要更新任何其他表？我对 PHP 和 mySQL 有一些基础知识，但我希望能在正确的方向上推动正确的语法来做到这一点。

非常感谢， 哈坎

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:02:42.243

我也在做同样的事情，但在 K2 项目保存上（不适用于 K2 中已经保存的项目）。这样我就可以将 K2 中的项目复制到 joomla 中的文章中，只需单击 K2 项目创建面板上的保存即可。

K2 中的“项目”是 Joomla 中的“文章”。

我正在使用我在这篇文章中提到的过程覆盖核心 K2-> **[Joomla - 覆盖 getItem 方法](https://stackoverflow.com/questions/14966202/joomla-overriding-getitem-method)**

然后我找到了 K2 保存文章的位置，如这篇文章-> **[Joomla - K2 中保存新项目的标题和别名的代码在哪里](https://stackoverflow.com/questions/14990175/joomla-where-is-the-code-in-k2-which-saves-a-new-items-title-and-alias)**

现在，我下一步将在覆盖文件（K2 的 models\item.php）的 save() 函数中添加一段代码，以便将相同的 K2 项目也保存到 joomla com_content 表中。您将在我提到的帖子中找到所有信息。如果有不清楚的地方，请发表评论，以便我回复查询。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:18:50.273

对于 Joomla 1.6 或更高版本中的文章，您还必须在资产表中有一个条目，并且必须使用 JTableContent 中的方法正确创建它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T18:54:06.733

我已经在 J​​oomla 2.5 及更高版本中多次这样做了。只需将结构正确的行插入 Joomla 数据库中的 k2_items 表即可。不过，您需要确保添加的每个新行都有一个正确递增的 id。这是一个例子：

```
$data =new stdClass();
$data->id = null;
$data->title = $title;
$temp = strtolower($data->title);
$data->alias = str_replace(' ', '-', $temp);
$data->catid = $catid;
$data->published = 1;
$data->introtext = $introtext;
$data->fulltext = $fulltext; 
```

对所有其他 K2 字段（有一堆）执行相同的操作，直到您最终可以编写以下代码：

```
$db = JFactory::getDBO();
$db->insertObject( '#__k2_items', $data, id ); 
```

# javascript - 防止 Chrome 包装加入的内容 与

> ID：15015019
> 
> 赞同：32
> 
> 时间：2013-02-22T00:47:42.343
> 
> 标签：javascript, html, google-chrome, contenteditable

我在 Chrome 中观察到一种不良行为，当一个人`<p>`通过删除它们之间的分隔来加入两个 's 时，就会发生这种行为。尽管`<p>`标签已正确连接，但 Chrome 还是将最右侧`<p>`标签的内容用`<span>`.

**编辑**：这发生在所有块元素上，而不仅仅是`p`标签。

**示例**：

例如，当`</p><p>`从以下块中删除分隔符时：

```
<div contenteditable="true"><p>p one.</p><p>p two.</p></div> 
```

它成为了：

```
<div contenteditable="true"><p>p one.<span style="font-size: 16px; line-height: 1.44;">p two.</span></p> 
```

小提琴中的示例：[Chrome 包装内容的加入`<p>`与`<span>`](http://jsfiddle.net/faceleg/THPmr/).

**问题**：

有没有一种简单的方法可以防止 chrome 这样做？它会导致我非常想摆脱的可怕标记。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T01:40:24.563

有一种方法，但您需要主动设置一些样式。这个想法是告诉 Chrome 样式已经被处理好了，所以它不需要添加 SPAN 来满足样式要求。基本上，您需要将 chrome 添加的样式添加到您的 contenteditable div 下的 span 类中（参见下面的示例）。

[编辑过的小提琴](http://jsfiddle.net/WCxcA/1/)

以你为例：

*   我向 contenteditable DIV 添加了一个“编辑”类
*   我`.edit p, span`在样式中添加了一个类

这变成：

```
.edit {
  border: 1px solid gray;
  padding: 10px;
}
.edit p, span {
  line-height: 1.44; font-size: 16px;
} 
```

和 DIV：

```
<div contenteditable="true" class="edit">...</div> 
```

请注意，您通常不需要`font-size: 16px;`. 我需要添加这个，因为 fiddle 在 contenteditable 中定义了一些字体大小。在独立页面上，我不需要它。

您需要将此 Chrome“补丁”应用于它发生的任何元素（因此，如果您需要 UL、OL ......然后按照我上面的示例逻辑添加所需的内容）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-26T09:53:50.273

我知道这并不是解决它的真正答案，而是一个提示如何解决它（但对 Petah 问题我将如何解决它的评论太久了）

一般来说，您会检查何时会发生此类错误。对于`span`创建的情况，您将侦听所有事件`keydown`并`keypress`检查键是否是退格键/删除键或插入字符的每个键（如果它是真实选择）。

如果是这种情况，那么您需要检查当前选择（插入标记的位置或实际选择），然后您就知道下一个文本元素或节点是哪个。那么您需要检查接下来的内容`keypress`，以及`keyup`是否`span`在插入标记之后直接创建了一个。根据浏览器错误，您需要进一步检查。如果有一个创建再次打开其内容。可以使用附加`Mutation`事件和*辅助属性。*

但我需要说我自己放弃了，转而使用 ckeditor 4。它的大部分功能我不需要，它是一个非常大的库。但是由于大量此类错误的原因，我没有看到其他解决方案。

**编辑** 这里更新的 js fiddle 显示了一个 Mutable 事件的想法：http: [//jsfiddle.net/THPmr/6/](http://jsfiddle.net/THPmr/6/)

但这并不是万无一失的，它只是为了展示它是如何实现的（仅在 chrome 27.0.1422.0 中测试过，如果第二个文本元素包含多个文本元素，则可能不起作用`p`）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-06-04T21:49:01.460

这是我对删除额外跨度的看法

```
document.querySelector('[contenteditable=true]')
  .addEventListener('DOMNodeInserted', function(event) {
    if (event.target.tagName == 'SPAN') {
      event.target.outerHTML = event.target.innerHTML;
    }
  }); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-26T10:40:14.963

CSS 正在影响如何在 contenteditable 中制作标记：

div, pre { 边框：1px 纯灰色；填充：10px；行高：1.44；}

删除行高线，问题不再出现。

通常有几个与默认样式相关的 contenteditable 错误：[如何避免 WebKit contentEditable 复制粘贴导致不需要的 CSS？](https://stackoverflow.com/questions/3306205/how-to-avoid-webkit-contenteditable-copy-paste-resulting-in-unwanted-css?rq=1)

**编辑**JsFiddle 间接影响了这一点（tinkerbin 的行为不同），因为它的 CSS（normalize.css）。尝试这个：

1.  运行你的小提琴
2.  检查一个`<p>`
3.  禁用`font-size`CSS 堆栈中的所有声明 - 包括您的 line-height
4.  做退格
5.  没有内联跨度

**解决方案 1**：使用类和 id。

不要为`p`or声明 font-size ，`div`而是为`p.main-content`，或更简单地说，`.main-content`。如果 contenteditable 中元素的字体大小来自浏览器的内部默认 CSS，则 Chrome 不会添加额外的标记/内联样式。

**解决方案 2**：使用消毒剂。

我个人会选择#1，因为在如此通用的标签中指定字体大小和错字从来都不是一个好习惯。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-09-03T14:56:31.143

到目前为止，我发现的最好方法是听 DOMNodeInserted 并检查 tagName。如果是跨度，您可以删除标签，但保留内容。这也使光标保持在正确的位置。

```
function unwrap(el, target) {
    if ( !target ) {
        target = el.parentNode;
    }
    while (el.firstChild) {
        target.appendChild(el.firstChild);
    }
    el.parentNode.removeChild(el);
}

var AutoFix = true;

document.getElementById('editable')
.addEventListener('DOMNodeInserted', function(ev) {
    if ( !AutoFix ) {
        return;
    }
    if ( ev.target.tagName=='SPAN' ) {
        unwrap(ev.target);
    }
}); 
```

我添加了一个布尔值“AutoFix”，因此您可以在需要插入跨度时禁用自动 dom 更改，因为此事件会在任何 dom 更改时触发。例如，如果您有一个允许用户插入类似 <span class="highlight">...</span> 的工具栏。

据我所知，该代码在 IE 或 FireFox 中没有副作用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-02-28T22:25:32.020

这也激怒了我，但我找到了一个目前运行良好的解决方案。

```
$('#container span').filter(function() {
    $(this).removeAttr("style");
    return $(this).html().trim().length == 0;
}).remove(); 
```

我只是从 span 元素中删除样式标签，如果它为空，则将其完全删除。您可能可以根据属性样式进行过滤，但是由于我已经在循环检查以检查以删除空跨度，因此我认为最好同时执行这两项操作。

当 chrome 第一次尝试插入为 span 继承的样式时，它确实会产生一微秒的闪烁，但您只会在删除后立即看到一次。

它并不完美，但它快速而简洁。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-30T23:06:19.873

请在此处查看答案：[https](https://stackoverflow.com/a/24494280/2615633) ://stackoverflow.com/a/24494280/2615633 要解决此问题，您可以使用此插件：[jquery.chromeinsertfix](https://github.com/UndeadBaneGitHub/jquery.chromeinsertfix/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-04-28T07:49:55.670

从某人博客上的评论中找到此链接：

（修复了最新的 WebKit 版本会产生 span 元素的错误……） [https://github.com/tinymce/tinymce/commit/8e6422aefa9b6cc526a218559eaf036f1d2868cf](https://github.com/tinymce/tinymce/commit/8e6422aefa9b6cc526a218559eaf036f1d2868cf)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-12-03T17:23:56.757

After several attempts of using provided solutions, I came up with this script:

```
var content = obj.textContent;
obj.innerHTML = '';
obj.textContent = content; 
```

When someone pastes a text with html encoded chars, putting it to `innerHTML` results with a valid html tags, that is why I decided to purge `innerHTML` content before placing `content` into `obj`

# backbone.js - 从主干中的表单读取数据

> ID：15015022
> 
> 赞同：6
> 
> 时间：2013-02-22T00:48:01.603
> 
> 标签：backbone.js

我正在开发一个 Backbone 应用程序，除了我应该从表单中读取数据的方式之外，我几乎所有的东西都在工作。

我有一些创建表单元素的视图和模板，以及一个“保存”按钮。当我单击该按钮时，它会触发一个视图事件，并且我想知道是否有“最佳实践”来阅读该信息。

我在想的选项是：

*   使用 jQuery 读取输入，例如 jQuery('#name').val()，如果你的表单很大，这会很烦人。

*   使用序列化数组

*   最后一个类似于[https://github.com/derickbailey/backbone.syphon](https://github.com/derickbailey/backbone.syphon)，但不确定它有多受欢迎。

那么，哪一种是最好的“骨干方式”呢？

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T00:57:31.637

什么是最好的方法很难说，因为这取决于。

您在帖子中展示的示例都是针对一个操作：**将表单提交到后端**。然后，虹吸管（由一个伟大的开发者制造）和 serializeArray （或只是`$(form).serialize()`）是很好的解决方案（显然第一个不适合大型形式 - 所以我会忘记这个）。

虽然，如果您的表单旨在***实时*****更新模型***，并且此表单应反映对模型的更改。然后，我会选择一个数据绑定库。我知道的最好的是[Backbone.stickit](https://github.com/NYTimes/backbone.stickit)；还有[Backbone.ModelBinder](https://github.com/theironcook/Backbone.ModelBinder)。我都使用了它们，它们都很棒，尽管第一个使用的样板少了一点。*

# batch-file - 在一行中间批量创建颜色？

> ID：15015025
> 
> 赞同：0
> 
> 时间：2013-02-22T00:48:21.257
> 
> 标签：batch-file, colors

有没有办法让它像这样显示文本？：

你好吗？

每个单词都有不同的颜色吗？

在批处理代码中。不过，我知道 Color 命令：)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T05:54:36.683

与 fvu 所说的不同，有一种相当简单的方法可以做到这一点。

首先，将其复制到您的文本编辑器中并将其另存为`ncol.bat`. 确保将其保存在与其他文件相同的位置。

```
@echo off
setlocal
if "%~1"=="/?" (
echo.
echo    ncol ["Text"] [Colour]
echo.
echo "Text" - The text you want displayed in another colour.
echo          Remember that spaces cannot be added if you don't put the text in
echo          quotation marks (""^).
echo.
echo Colour - The hexadecimal colour code that you want the text to be changed into.
echo          For more information of colour codes, see "color /?"
echo.
exit /b
)
for /f "delims=#" %%i in ('"prompt #$H# &for %%b in (1) do rem"') do set "bs=%%i"
<nul >"%~1.@" set /p "=.%bs%%bs%%bs%%bs%"
findstr /p /a:%2 . "*.@"
endlocal
del "*.@"
@echo on
@exit /b 
```

这是一个如何使用它的例子......

```
ncol "Hello, " 01 && ncol "how " 02 && ncol "are " 03 && ncol "you" 04 
```

这将显示`Hello,`为黑色上的红色、黑色`how`上的绿色、黑色`are`上的青色和黑色`you`上的红色。

不幸的是，我的简单版本无法处理特殊字符（如问号），但有一些可以处理（本网站和 www.dostips.com 上都有）。

所以，祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-13T12:17:07.393

是的，有，如果你使用[**cmdcolor**](https://github.com/jeremejevs/cmdcolor)：

```
echo \033[91mHello, \033[92mhow \033[93mare \033[94myou? 
```

`Hello,`将是红色、`how`- 绿色、`are`- 黄色和`you?`- 蓝色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T01:10:43.487

不，您不能，因为 cmd 不理解例如修改文本颜色所需的 ANSI 转义序列。现在，根据您的冒险精神，[这个巧妙的技巧](http://gynvael.coldwind.pl/?id=130)、额外的实用程序（如[ansicon](http://jasonkarns.com/blog/ansi-color-in-windows-shells/)或使用 bash）可能都是可能的解决方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-28T18:09:04.063

通过使用 Visual Studio Community 2015，人们（和我）制作了扩展 BATCH 限制的程序。基本上，如果您愿意，人们（和我）会制定一个外部“命令”。[Batbox](http://dos9.org/doc/en/html/batbox.html)将工作做得最好。将应用程序放在 BATCH 文件的当前目录中，然后尝试执行类似这样的操作

```
batbox /g 20 20 /c 0x0f /d "Hello" /c 0x0a /d " World" /c 0x09 /d "!" 
```

它应该带有彩色文字“Hello World！”。Batbox [这里使用的标签都是标签](http://dos9.org/doc/en/html/batbox.html)。放我给你几个

```
/g = Cursor Position (Ex: batbox /g 20 20)
/c = Color (Ex: batbox /c 0x0f) Make sure 0x is before color
/d = Prints text. (Ex: batbox /d "Hello World") 
```

您也可以在此获得鼠标点击和击键！

```
batbox /k 
```

击键将以 %errorlevel% 和键盘格式（数字）返回

```
batbox /m
batbox /y 
```

将获得鼠标点击。由于它返回三个退出代码，我们需要一个 for 语句。

```
for /f "delims=: tokens=1,2,3" %%A in ('batbox /m') do set/a "x=%%A", "y=%%B", "M=%%C" 
```

X 和 Y 应该只是自我探索，但你问 M 是什么？M 是被点击的变量。左键单击和右键单击。左键单击=1 右键单击​​=2。如果按下键方式，它将以 idk 格式返回一个数字。在一个总结的[batbox](http://dos9.org/doc/en/html/batbox.html)中可以做很多事情！

# python - 创建在启动时运行的python脚本

> ID：15015026
> 
> 赞同：0
> 
> 时间：2013-02-22T00:48:32.833
> 
> 标签：python, cross-platform, startupscript

**背景**

我需要创建一个在启动时运行的 python 脚本。问题是该脚本必须独立于平台，因为它将用于不同的操作系统。它需要自动设置，因为它将由用户运行，因此我无法在每台机器上设置任务调度程序。

**问题**

1.  如何找出计算机在 Python 中运行的操作系统？
2.  如何让脚本在启动时运行（Linux、Mac OSX、Windows）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T01:02:27.373

问题1很简单：

> 如何找出计算机在 Python 中运行的操作系统？

那是[`sys.platform`](http://docs.python.org/2/library/sys.html#sys.platform)：

```
if sys.platform.startswith('win') or sys.platform.startswith('cygwin'):
    do_windows_stuff()
elif sys.platform.startswith('darwin'):
    do_osx_stuff()
elif sys.platform.startswith('linux'):
    do_linux_stuff()
else:
    raise Exception("Nobody's written the stuff for {}, sorry".format(sys.platform)) 
```

第二部分也很简单，但不是您想听到的方式：

> 如何让脚本在启动时运行（Linux、Mac OSX、Windows）

你没有。不是来自脚本内部。您使用某种安装程序（或包 postflight 脚本，或其他）。

添加在启动时运行的东西需要 root/admin 权限。您的脚本（希望）没有以此类权限运行。因此，它做不到。是的，可以通过各种方式提升权限，但这几乎肯定不是您想要在最终在启动时运行的脚本中执行的操作。

那么，您的安装程序是如何做到的呢？

OS X：您需要创建一个 Launch Daemon，并附带一个 launchd plist。这在[创建启动守护程序和代理](http://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/CreatingLaunchdJobs.html)中进行了描述。如果你没有读过那篇文章，你不应该尝试这样做，如果你读过那篇文章，你就会知道如何做，所以没有什么可说的了。

Windows：执行此操作的官方方法在[Run 和 RunOnce Registry Keys](http://msdn.microsoft.com/en-us/library/aa376977%28v=vs.85%29.aspx)中进行了说明。再说一遍，不读这篇文章你就不应该这样做，读完这篇文章后很明显，除了两件事：首先，在四个键中，它是 HKLM Run 键。其次，在现代 Windows 中，这实际上并不是在启动时运行，而是在启动后的第一次登录时运行；如果这不可接受，请`RunServices`改为调查。

Linux：什么是安装程序？您是否期望为每个发行版家庭提供一种方法？除了确切地知道您想在每个发行版上做什么之外，[本入门书为您提供了您需要的大部分信息。](http://www.linux.com/news/enterprise/systems-management/8116-an-introduction-to-services-runlevels-and-rcd-scripts)一般来说，如果你只想让你的脚本运行一次并退出，并且有一个`rc.local.d`, 你只需要在其中放置一个链接。否则，您要么需要创建一个`rc.d`脚本，将其安装到正确的位置，然后运行正确的`chkconfig`命令，要么您需要编辑`rc.local`运行你的脚本。但最简单的事情是：只需将英文文本放入 INSTALL 文件中，告诉人们这样做。最终，当有人决定为 Ubuntu 制作 DEB 或为 Redhat 制作 RPM 或其他任何东西时，他们会为他们的发行版做正确的事情，或者向您提交补丁或单独维护它。

# php - 用户''@'localhost'的访问被拒绝（使用密码：否）

> ID：15015031
> 
> 赞同：0
> 
> 时间：2013-02-22T00:48:56.213
> 
> 标签：php, mysql

尝试使用以下代码连接到 localhost sql db（此时不对查询执行任何操作，只希望执行查询）：

```
<?php

$host     = "localhost";
$port     = 3306;
$socket   = "";
$user     = "root";
$password = "Password1";
$dbname   = "CIIP_WIKI";

$con = new mysqli($host, $user, $password, $dbname, $port);

if(!$con)
{
echo ("db connection failed!");
die ('Could not connect to the database server' . mysqli_connect_error());
}

else {
    echo ("db connection established.");
    echo ("<br/>");
    }

$query = sprintf("SELECT first_name FROM actor WHERE actor_id='1'");

$result = mysql_query($query);

$con->close();

?> 
```

我不断收到以下...

```
Welcome

db connection established.

Warning: mysql_query(): Access denied for user ''@'localhost' (using password: NO) in C:\Program Files (x86)\EasyPHP-12.1\www\Cisco Wiki\index.php on line 31

Warning: mysql_query(): A link to the server could not be established in C:\Program Files (x86)\EasyPHP-12.1\www\Cisco Wiki\index.php on line 31 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-22T00:50:05.427

这是因为您使用创建连接`mysqli_`，然后使用`mysql_`尝试获取结果。它们是不同的 API。

```
<?php

/* You should enable error reporting for mysqli before attempting to make a connection */
mysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT);

$mysqli = mysqli_connect('localhost', 'my_user', 'my_password', 'my_db');

/* Set the desired charset after establishing a connection */
mysqli_set_charset($mysqli, 'utf8mb4');

printf("Success... %s\n", mysqli_get_host_info($mysqli)); 
```

[示例取自 PHP 手册](http://www.php.net/manual/en/mysqli.construct.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-22T16:24:32.263

只要您尝试在没有可用的有效连接对象的情况下执行查询，就会记录此警告。

在您的情况下，您*认为*您有一个有效的连接对象可用，但是您在使用 mysql 执行查询时使用 mysqli 创建了它。这是两个不同的 API，因此 mysql_query 函数正在寻找一个 mysql 连接对象但没有找到它。

# java - 具有可比接口和通用列表的未经检查的强制转换警告

> ID：15015035
> 
> 赞同：3
> 
> 时间：2013-02-22T00:49:07.330
> 
> 标签：java, list, generics, comparable

当我将 Comparable 接口与通用或参数化列表一起使用时，我会收到未经检查的强制转换警告。我可以使用 ObjectList 进行比较，但不能使用通用列表。这是我的开发，首先使用 ObjectList，然后使用通用列表。

这是我的 ListNode 类定义的片段：

```
public class ListNode {
    private Object info;
    private ListNode next; 
```

和我的 ObjectList 类定义的片段：

```
public class ObjectList {
    private ListNode list; 
```

和我的 Comparable 界面：

```
public interface Comparable {
    public int compareTo(Object o);
} 
```

我的 ObjectList 类中有一个方法，可以毫无问题地将 Object 参数与 ListNode 中的 Object 进行比较。这是比较代码：

```
if (((Comparable)o).compareTo(p.getInfo()) == 0) 
```

我现在正在尝试创建一个通用 List 类并进行类似的比较。这是我的通用 ListNode 类定义的片段：

```
public class ListNode<Type> {
    private Type info;
    private ListNode<Type> next; 
```

和我的通用 List 类定义的片段：

```
public class List<Type> {
    private ListNode<Type> list; 
```

和我的通用 Comparable 接口：

```
public interface Comparable<Type> {
    public int compareTo(Type t);
} 
```

当我尝试与我的 ObjectList 类进行相同的比较时，我从我的通用 List 类中收到以下未经检查的强制转换警告：

List.java:239: 警告: [unchecked] unchecked cast found : Type required: Comparable

```
if (((Comparable<Type>)t).compareTo(p.getInfo()) == 0) 
```

有什么想法吗？

这是一些简化的代码：

```
public class List<Type> {
    public class ListNode<Type> {
        private Type info;
        private ListNode<Type> next;

        public ListNode() {
            info = null;
            next = null;
        }
    }

    private ListNode<Type> list;

    public List() {
        list = null;
    }

    public boolean contains(Type t) {
        ListNode<Type> p = list;
        while (p != null && (((Comparable<Type>)t).compareTo(p.info) != 0))
            p = p.next;
        return p != null;
    }
}

public interface Comparable<Type> {
        public int compareTo(Type t);
} 
```

向列表类添加有界参数：

```
public class List<Type extends Comparable<Type>> { 
```

解决了警告问题。但是创建一个 String 对象列表会产生这个错误：

类型参数 java.lang.string 不在其范围内

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T02:17:49.857

Why you need to create your own `Comparable` interface while there is already one in JDK? The reason for fail to create List of String is simply because String didn't bear your own Comparable interface. It has only implemented java.lang.Comparable. Just do some rename and things will be clear: what you are doing is:

```
public interface MyComparable<Type> {
    public int compareTo(Type t);
}

public class MyList<Type extends MyComparable<Type>> {
  //....
} 
```

and then you are trying to create a `MyList<String>` variable

`String` is not implementing `MyComparable`, of course it is causing problem.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T00:53:00.357

首先将您的 List 声明更改为下面的代码。这使得参数化类型必须是可比较的。

```
List<Type extends Comparable<Type>> 
```

然后，您可以`t.compareTo(p.info)`直接调用而无需演员。其次，将您的 ListNode 类移动到它自己的文件中。

# android - 我怎样才能把 autoParallaxBackground 放在前面，首先是精灵？

> ID：15015040
> 
> 赞同：0
> 
> 时间：2013-02-22T00:49:40.243
> 
> 标签：android, andengine, game-engine, sprite

我需要一个在所有精灵上运行的 autoParallaxBackground。任何人都可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T01:05:33.647

两个步骤来做到这一点。

1.  首先，将视差层的 Z-Index 设置为高于场景中其他所有内容的值。例如，如果您的其他场景实体的 Z-index 为 10，请将其设置为 100。（数字无关紧要，只是相对数字。）这是通过调用 setZIndex() 方法来完成的。

2.  其次，告诉场景对其子实体进行排序。这是通过调用 scene.sortChildren() 来完成的。

# javascript - 当第一个元素匹配时，jQuery inArray 不起作用

> ID：15015043
> 
> 赞同：4
> 
> 时间：2013-02-22T00:49:55.823
> 
> 标签：javascript, jquery, arrays

我正在尝试检查我创建的一个数组，以确定一个值是否在数组（任何地方）中。如果该值在数组中的任何位置，它需要做一件事，否则另一件事。

```
var Arr = [false, false, false, false, false];
// It works with the following:
// Arr = [true, false, false, false, false]

if(!$.inArray(false, Arr))
{
        //False is not in the array at all - so continue with code  
}
else
{
       //False was found in the array
} 
```

所以上面的代码就像 if 语句是真的一样工作，但它显然不是。

如果我将数组更改为：`true, false, false, false, false`if 语句则为假，因为它应该是。

基本上我需要这段代码做的是只有当数组中的每个值都是`true`.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-22T00:52:23.213

`$.inArray`返回项目的索引，或者`-1`如果没有找到项目：

```
if ($.inArray(false, Arr) > -1) {
  // found
} else {
  // not found
} 
```

首先检查文档总是有用的：http: [//api.jquery.com/jQuery.inArray/](http://api.jquery.com/jQuery.inArray/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-22T00:53:22.650

> [`jQuery.inArray( value, array [, fromIndex ] )`](http://api.jquery.com/jQuery.inArray/)返回：数字
> 
> 描述：在数组中搜索指定值并返回其索引（如果未找到则返回 -1）。

inArray 返回一个整数！

因此，当它的索引为 0 时，这将是一个错误的值！

您需要检查 > -1

# java - 如何使 JOptionPane 在尝试关闭 JFrame 时出现

> ID：15015046
> 
> 赞同：1
> 
> 时间：2013-02-22T00:50:14.857
> 
> 标签：java, swing, jframe, joptionpane

我目前正在使用 JFrame 开发 Java 应用程序。我想要的是，当有人试图关闭窗口时，它会出现一个 JOptionPane 询问：“你确定要退出 3DWorld 吗？” 然后在底部有两个按钮说是和否。任何帮助都会很棒！

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T01:08:18.370

有关一些基本信息和一些辅助类，请参阅[关闭应用程序。](http://tips4java.wordpress.com/2009/05/01/closing-an-application/)

# sql - SQL：尝试访问无法找到的表时，Try/Catch 未捕获错误

> ID：15015051
> 
> 赞同：9
> 
> 时间：2013-02-22T00:51:22.673
> 
> 标签：sql, database, sql-server-2005, transactions, try-catch

我创建了一个存储过程，它运行许多命令来修改数据。如果一切顺利，我只想提交交易。我通过以下方式使用 try-catch 块来执行此操作（其中我的 CATCH 块在实际中使用 RAISERROR 来返回错误消息）：

```
BEGIN TRY
  BEGIN TRANSACTION
  UPDATE Table1 SET MyVarcharColumn = 'test'
  UPDATE Table2 SET MyBitColumn = 1
  UPDATE Table3 SET MyIntColumn = 42
  COMMIT TRANSACTION
END TRY
CATCH
  ROLLBACK TRANSACTION
END CATCH 
```

这按我想要的方式工作。例如，如果我将 MyBitColumn 设置为 'b' 而不是 1，则会捕获错误，控制流向 CATCH，并且不会提交事务。

我注意到的一个问题是，如果数据库中不存在 Table3，那么它会出错（无效的对象名称），但是 CATCH 块永远不会执行并且事务保持打开状态。

我想处理这个问题以处理数据库被修改的任何（远程）可能性（或者在正确添加此存储过程但其中一个表没有发生的情况下发生某些事情）。

我应该如何处理这些错误情况？

-谢谢你的帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-22T00:55:20.133

在脚本开始时使用[SET XACT_ABORT](http://msdn.microsoft.com/en-us/library/ms188792.aspx)

```
SET XACT_ABORT ON 
```

> 当 SET XACT_ABORT 为 ON 时，如果 Transact-SQL 语句引发运行时错误，则整个事务将终止并回滚。

我认为这是不可能的：

> 以下类型的错误发生在与 TRY...CATCH 构造相同的执行级别时，不会由 CATCH 块处理：
> 
> *   编译错误，例如语法错误，阻止批处理运行。
>     
>     
> *   在语句级重新编译期间发生的错误，**例如由于延迟名称解析而在编译后发生的对象名称解析错误。**

[参考](http://technet.microsoft.com/en-us/library/ms175976.aspx)。

> 以下示例显示了由 SELECT 语句生成的对象名称解析错误如何未被 TRY...CATCH 构造捕获，但在存储过程中执行相同的 SELECT 语句时被 CATCH 块捕获。

```
USE AdventureWorks2012;
GO

BEGIN TRY
    -- Table does not exist; object name resolution
    -- error not caught.
    SELECT * FROM NonexistentTable;
END TRY
BEGIN CATCH
    SELECT 
        ERROR_NUMBER() AS ErrorNumber
        ,ERROR_MESSAGE() AS ErrorMessage;
END CATCH 
```

> 错误没有被捕获，并且控制从 TRY…CATCH 构造传递到下一个更高级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-18T19:15:45.297

```
EXECUTE ('SELECT * FROM NonexistentTable'); 
```

# java - 如何在子注释上下文中使用 spring 属性源？

> ID：15015053
> 
> 赞同：1
> 
> 时间：2013-02-22T00:51:26.443
> 
> 标签：java, spring, configuration, annotations

我正在尝试使用带注释的配置类复制与 XML 配置一起使用的东西。我遇到的问题是子上下文中定义的属性源不可访问。

工作的xml看起来像

**父上下文：**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="proxyChannelQueue" class="java.util.concurrent.ArrayBlockingQueue">
        <constructor-arg value="10"/>
    </bean>

</beans> 
```

**子上下文：**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:p="http://www.springframework.org/schema/p"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

    <context:property-placeholder location="proxy-host.properties"/>

    <bean class="org.eclipse.jetty.server.Server"
          p:handler-ref="proxyHostHandler"
            init-method="start">
        <constructor-arg value="${proxyHostPort}"/>
    </bean>

    <bean id="proxyHostHandler" class="com.sjl.web.ProxyHostHandler"
            p:proxyChannelQueue-ref="proxyChannelQueue"/>
</beans> 
```

**启动代码：**

```
 ClassPathXmlApplicationContext parentContext = new ClassPathXmlApplicationContext("test/parent-context.xml");
    ClassPathXmlApplicationContext childContext = new ClassPathXmlApplicationContext(new String[] {"test/child-context.xml"}, parentContext); 
```

我尝试使用配置类来做到这一点看起来像。

**父上下文：**

```
@Configuration
public class ParentConfiguration {
    @Bean(name = "proxyChannelQueue")
    public BlockingQueue<ProxyChannel> getProxyChannelQueue() {
        return new ArrayBlockingQueue<ProxyChannel>(10);
    }
} 
```

**子上下文：**

```
@Configuration
@PropertySource("classpath:proxy-host.properties")
public class ChildContext {
    private static final Logger LOGGER = LoggerFactory.getLogger(ChildContext.class);
    @Autowired
    private Environment environment;

    @Resource(name = "proxyChannelQueue")
    private BlockingQueue<ProxyChannel> proxyChannelQueue;

    public static void main(String[] args) {
        new HierarchicalAnnotationConfigApplicationContext(ChildContext.class);
    }

    @Bean
    public Server getJettyServer() throws Exception {
        int proxyHostPort = environment.getProperty("proxyHostPort", Integer.class);
        Server server = new Server(proxyHostPort);
        server.setHandler(getHandler());
        server.start();

        return server;
    }

    @Bean
    public Handler getHandler() {
        ProxyHostHandler proxyHostHandler = new ProxyHostHandler();
        proxyHostHandler.setProxyChannelQueue(proxyChannelQueue);
        return proxyHostHandler;
    }
} 
```

**启动代码：**

```
AnnotationConfigApplicationContext parentContext = new AnnotationConfigApplicationContext(ParentConfiguration.class);
AnnotationConfigApplicationContext childContext = new AnnotationConfigApplicationContext();
childContext.setParent(parentContext);
childContext.register(ChildContext.class);
childContext.refresh(); 
```

尝试在 ChildContext getJettyServer 方法中检索 proxyHostPort 时，我得到一个空指针。检查环境变量表明它只包含 2 个属性源（systemProperties 和 systemEnvironment），而不是我期望的 3 个。

如果我将它们作为单个组合上下文运行，则相同的配置有效。例如：

```
AnnotationConfigApplicationContext parentContext = new AnnotationConfigApplicationContext(ParentConfiguration.class, ChildContext.class); 
```

但是我想要使用父上下文提供的隔离。

干杯，彼得

# ember.js - 使用 ember-data 在 Ember.js RC1 中侧载 belongsTo 数据

> ID：15015055
> 
> 赞同：2
> 
> 时间：2013-02-22T00:51:46.760
> 
> 标签：ember.js, ember-data

Sideloading 在我们的应用程序中适用于 hasMany 关系，但我无法让它适用于 belongsTo 关系。我正在尝试使用记录在案的`DS.RESTAdapter.configure()`方法，但这似乎没有任何效果。我得到的错误是`Uncaught Error: assertion failed: Your server returned a hash with the key occasions but you have no mapping for it`.

请注意，我们不需要指定`hasMany`侧载映射，因为该请求可以正常工作。`App.Occasion.find();`工作正常。`App.Reminder.find();`抛出错误。

楷模

```
App.Reminder = DS.Model.extend(
  occasion: DS.belongsTo('App.Occasion')
  ...
)
App.Occasion = DS.Model.extend(Ember.Validations,
  reminders: DS.hasMany('App.Reminder')
  ...
) 
```

Store.js.coffee

```
DS.RESTAdapter.configure('App.Occasion',
    sideLoadAs: 'occasions'
)
App.Store = DS.Store.extend(
  revision: 11
  adapter: DS.RESTAdapter.create()
) 
```

JSON（适用于各种场合）

```
{
  reminders: [{},...],
  occasions: [{reminders: [1,2,...]},...]
} 
```

JSON（用于提醒）

```
{
  reminders: [{occasion_id: 1},...],
  occasions: [{},...]
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T18:27:45.980

尝试`sideloadAs`代替`sideLoadAs`（不是大写`L`）

# solr - 类别/子类别的 Solr 分组

> ID：15015063
> 
> 赞同：2
> 
> 时间：2013-02-22T00:52:47.780
> 
> 标签：solr, solr4

我仍然是 Solr 领域的新手。

我正在尝试创建一个按类别分组的查询，返回一个唯一的子类别列表。我的架构看起来类似于以下内容：

```
+==============================================+
| id  | category | sub_category | Type         |
+-----+----------+--------------+--------------+
| 1   | Apparel  | Pants        | Suede        |
| 2   | Apparel  | Pants        | Leather      |
| 3   | Apparel  | Pants        | Wind Pants   |
| 4   | Apparel  | Shirts       | Short-Sleeve |
| 5   | Apparel  | Shirts       | Long-Sleeve  |
| 6   | Sports   | Balls        | Soccer Ball  |
| 7   | Sports   | Balls        | Football     |
+-----+----------+--------------+--------------+ 
```

我有兴趣获得类似于以下内容的回报，但不确定如何完成。我几乎可以到这里，但问题是我无法让 sub_category 列返回唯一值。下面的示例*确实*说明了不同的子类别：

```
{
  "responseHeader": {
    "status": 0,
    "QTime:" 12,
  },
  "grouped": {
    "category": {
      "matches": 1,
      "groups": [
        {
          "groupValue": "Apparel",
          'docList": {
            "numFound": 2,
            'start': 0,
            'docs': [
              {"sub_category": "Pants"},
              {"sub_category": "Shirts"}
            ]
        },
        {
          "groupValue": "Sports",
          'docList": {
            "numFound": 2,
            'start': 0,
            'docs': [
              {"sub_category": "Balls"}
            ]
        },
      ]
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T02:29:56.283

假设您使用的是 Solr 4.0+，我相信[facet pivoting](https://wiki.apache.org/solr/SimpleFacetParameters#Pivot_.28ie_Decision_Tree.29_Faceting-1)是一种更好的方法。

尝试：

`http://localhost:8983/solr/select?q=*:*&facet.pivot=category,sub_category&facet=true&facet.field=category&rows=0`

*更新：*嗯，但这不会给你唯一的计数：-？如果你同意的话，那会给你这样的东西：

```
+ Apparel [5]
|--- Pants [3]
|--- Shirts [2]
|
+ Sports [2]
|--- Balls [2] 
```

# grails - 有没有办法在 grails 应用程序中添加第三方 servlet？

> ID：15015064
> 
> 赞同：1
> 
> 时间：2013-02-22T00:52:53.073
> 
> 标签：grails, spring-mvc, spring-security, waffle

我是 grails 新手，想知道是否有办法在 grails 应用程序中添加第三方 servlet？

我正在尝试将[Waffle](https://github.com/dblock/waffle)与 grails 一起使用。我成功地能够在 MVC 应用程序中使用 Spring Security 使用 Waffle，如下所述：[https ://github.com/dblock/waffle/blob/master/Docs/spring/SpringSecurityAuthenticationProvider.md](https://github.com/dblock/waffle/blob/master/Docs/spring/SpringSecurityAuthenticationProvider.md)

在我的 MVC 应用程序中，我能够添加这样的 bean 进行身份验证：

```
<bean id="waffleNegotiateSecurityFilter" class="waffle.spring.NegotiateSecurityFilter">
    <property name="provider" ref="waffleSecurityFilterProviderCollection"/>
    <property name="allowGuestLogin" value="false"/>
    <property name="principalFormat" value="fqn"/>
    <property name="roleFormat" value="both"/>
</bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:34:31.673

您必须将过滤器映射添加到 web.xml

使用 grails 命令安装 web.xml

```
> grails install-templates 
```

比编辑 web.xml 文件（在 src/templates 内）

并按照您向我们展示的文档中的说明添加映射。

然后将bean定义添加到grails资源

```
/conf/spring/resources.groogy 
```

将 xml bean 定义转换为 grails spring groovy DSL 可能有点困难。如果您有任何问题，请参阅[有关 grails 和 spring](http://www.grails.org/doc/latest/guide/spring.html)的指南或在此处询问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-09T14:37:40.963

我已经为此苦苦挣扎了几天，最终在一个普通的 Grails 2.4.4 项目中做了以下事情：

```
grails create-app
grails install-templates 
```

然后修改**BuildConfig.groovy**

```
dependencies {
...
compile "com.google.guava:guava:18.0"
compile "com.github.dblock.waffle:waffle-jna:1.7.3"
compile "net.java.dev.jna:jna:4.1.0"
compile "net.java.dev.jna:jna-platform:4.1.0"
compile "org.slf4j:slf4j-api:1.7.9"
.... 
```

}

然后我在 ..\META-INF 下创建了**context.xml ，内容如下：**

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE Context>
<Context>
    <Valve className="waffle.apache.NegotiateAuthenticator" principalFormat="fqn" roleFormat="both" protocols="Negotiate,NTLM" />
    <Realm className="waffle.apache.WindowsRealm" />
</Context> 
```

然后将以下内容添加到**..\templates\web.xml**文件中：

```
<display-name>/@grails.project.key@</display-name>
<security-constraint>
    <display-name>Waffle Security Constraint</display-name>
    <web-resource-collection>
        <web-resource-name>Protected Area</web-resource-name>
        <url-pattern>/</url-pattern>
        <http-method>DELETE</http-method>
        <http-method>GET</http-method>
        <http-method>POST</http-method>
        <http-method>PUT</http-method>
    </web-resource-collection>
    <auth-constraint>
        <role-name>Everyone</role-name>
    </auth-constraint>
</security-constraint>
<security-role>
    <role-name>Everyone</role-name>
</security-role>
....
.... 
```

为了验证它是否确实有效，我在**index.gsp中添加了一行**

```
<p>You are logged in as remote user <b>${request.getRemoteUser()}</b> in session <b>${session.getId()}</b>.</p> 
```

我在 Tomcat 7.0.57 下对此进行了测试，并且必须向 Tomcat 库添加一些 jar 才能让我工作。我添加了**slf4j-api-1.7.9.jar、guava-18.0.jar、jna-platform-4.1.0.jar、jna-4.1.0.jar、waffle-tomcat7-1.7.3.jar、waffle-jna- 1.7.3.jar**。仍然想知道为什么当同样的 jars 也被添加到 BuildConfig.groovy 时这实际上是必要的。

# javascript - 如何让子菜单以小窗口大小显示？

> ID：15015069
> 
> 赞同：0
> 
> 时间：2013-02-22T00:53:43.637
> 
> 标签：javascript, jquery, html, css

我有一个可以点击的基本菜单栏。一切正常，但我注意到，如果我将浏览器窗口设置得太小，子菜单会在视野之外打开，我无法在窗口中滚动查看它们。

如果您在手机上查看，很容易明白我在说什么。我将如何自动添加滚动条以确保可以看到我的所有页面内容？

小提琴： http: [//jsfiddle.net/2SC5G/6/](http://jsfiddle.net/2SC5G/6/) SEARCH > RESULTS > LATEST SMOKE RESULTS 是本演示中最长的选择。为了看看我在说什么，调整浏览器的大小并将右边框放在“搜索”菜单项旁边。

提前致谢。

HTML：

```
<!-- <LINK REL="SHORTCUT ICON" HREF="favicon.ico"> -->
<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="includes/tp_menu.js"></script></script>
    <link type="text/css" href="includes/tp_menu.css" rel="stylesheet" />
</head>
<body>
    <div style="z-index:100;width:100%;position:fixed;top:0;left: 0;min-width:1000px;">
        <div id="menuJQ">
            <ul class="menuJQ">
                <li class="parent"><a href="#"><span>Home</span></a></li>
                <li><a class="parent" href="#"><span>Product View</span></a> 
                    <div id="submenu">
                        <ul>
                            <li><a href="http://www.google.com"><span>DevTask Search</span></a></li>
                            <li><a href="#"><span>Active Machines</span></a></li>
                        </ul>
                    </div>
                </li>
                <li class="parent"><a href="#"><span>Request Tool</span></a></li>
                <li><a href="#" class="parent"><span>Search</span></a>
                    <div id="submenu">
                        <ul>
                            <li><a href="http://www.google.com"><span>DevTask Search</span></a></li>
                            <li><a href="#"><span>Active Machines</span></a></li>
                            <li><a href="#"><span>Integrity Query</span></a></li>
                            <li><a href="#"><span>Internal DevTasks</span></a></li>
                            <li><a href="#" class="parent"><span>Results</span></a>
                                <div id="submenu">
                                    <ul>
                                        <li><a href="#" target='_blank'><span>Latest Smoke Results</span></a></li>
                                        <li><a href="#" target='_blank'><span>Latest Smoke Results</span></a>
                                            <div id="submenu">
                                                <ul>
                                                    <li><a href="#"><span>DevTask Search</span></a></li>
                                                    <li><a href="#"><span>Active Machines</span></a></li>
                                                    <li><a href="#"><span>Integrity Query</span></a></li>
                                                </ul>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </li>
                            <li><a href="#"><span>Issues for Stability Team</span></a></li>
                        </ul>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</body>
</html> 
```

CSS：

```
/* menu::base */
.expand{
    display:block;
}
.collapse{
    display:none;
}
div#menuJQ {
    height: 46px;
    padding-left: 0px;
    width:auto;
    /*background: url(../includes/images/right2.png) repeat right 0;*/ 
    background-color:black; 
}

div#menuJQ ul {
    margin: 0;
    padding: 0;
    list-style: none;
    float: left;
}
div#menuJQ ul.menuJQ {
    padding-right: 0px;
}

div#menuJQ li {
    position: relative;
    margin: 0;
    padding: 0;
    display: block;
    float: left;
    z-index: 9;
    width: auto;
}

div#menuJQ ul ul li {
    z-index: 9;
}
div#menuJQ li div {
    list-style: none;
    float: left;
    position: absolute;
    z-index: 11;
    top: 39px;
    left: -18px;
    -left: 4px;
    visibility: hidden;
    transition-delay: 0.5s;
    -moz-transition-delay: 0.5s; /* Firefox 4 */
    -webkit-transition-delay: 0.5s; /* Safari and Chrome */
    -o-transition-delay: 0.5s; /* Opera */
    width: 180px;
      margin: 0px 0 0 -4px;
    padding: 0; 
    background: url(../includes/images/submenu-top.png) no-repeat 0px 0;
    -background: url(../includes/images/submenu-top.gif) no-repeat 0px 0; 
}
div#menuJQ ul ul { /*submenu*/
    display:none;
      z-index: 12;
      width: 180px;
    padding: 0px 0px 12px 0px;
    -padding: 0px 0px 3px 0px;    
    /*background: url(../includes/images/submenu-bottom.png) no-repeat 0px bottom;*/
    background-color:black;
    -background: #E4E4E2 none;        
    margin: 14px 0 0 0;   
    -margin: 5px 0 0 0;      
}
div#menuJQ li > div {
    visibility: visible;
}

div#menuJQ a {
    position: relative;
    z-index: 10;
    height: 38px;
    display: block;
    float: left;
    line-height: 38px;
    text-decoration: none;
    margin-top: 1px;
    white-space: nowrap;
    width: auto;
    padding-right:5px;
    text-align:center;
}
div#menuJQ span {
    margin-top: 2px;
    padding-left: 15px;
    color: #fff;
    font: normal 13px Tahoma;
    background: none;
    line-height: 38px;  
    display: block;
    cursor: pointer;
    background-repeat: no-repeat;
    background-position: 95% 0;
    text-align: center;
}

/* menu::level1 */
div#menuJQ a {
    padding: 0 15px 0 0;
    line-height: 38px;
    height: 46px;
    _margin-right: 1px;
    background: none;
    font-weight:bold;    

}
div#menuJQ span {
    font-weight:bold; 
}
div#menuJQ a:hover{
    background-image: url(../includes/images/selected-sub.png);
    background-repeat: repeat-x;
    background-position: right -1px;    
    -background: url(../includes/images/selected-sub.gif) repeat-x right -1px; 
}
div#menuJQ li.current a,
div#menuJQ ul.menuJQ>li:hover>a {
    background-image: url(../includes/images/selected-sub.png);
    background-repeat: repeat-x;
    background-position: right -1px;  
    -background: url(../includes/images/selected-sub.gif)  repeat-x right -1px; 
}
div#menuJQ a:hover span{
      color: #ff9900;
}   
div#menuJQ ul.menuJQ>li:hover>a span {
      color: #ff9900;
}
div#menuJQ li {}
div#menuJQ li.last { background: none; }

/* menu::level2 */
div#menuJQ ul ul li {
    background-image: url(../includes/images/sep-sub.png);
    background-repeat: repeat-x;
    background-position: left bottom;
    margin: 0;
    padding: 0;
}
div#menuJQ ul ul li:hover {
    background-image: url(../includes/images/sub-item-hover.gif);
    background-color: #717171;
    background-repeat: repeat-x;
    background-position: left top;
}
div#menuJQ ul ul a {
      color: #ff9900;   
    height: auto;
    float: none;
    display: block;
    line-height: 25px;
    font-size: 13px;
    z-index: -1;
    padding: 6px 0 6px 0px;
    white-space: normal;
    width: 166px;
    margin: 0 0px 0 13px;
    background: none;
}

div#menuJQ ul ul a span {
    color: #ff9900; 
      padding: 0 3px;
    line-height: 25px;
    font-size: 13px;
    font-weight: normal;
    margin:0;    
}
div#menuJQ li.current ul a,
div#menuJQ li.current ul a span {
    background: none;
}
div#menuJQ ul ul a:hover {
    background: none;
  color: #fff;
}
div#menuJQ ul ul a:hover span {
  background: none;
  color: #fff;
}
div#menuJQ ul ul a.parent {
  background: url(../includes/images/submenu-pointer.png) no-repeat right top;
  -background: url(../includes/images/submenu-pointer.gif) no-repeat right top;  
  margin-right: -1px;
}
div#menuJQ ul ul a.parent span {
  padding-right: 26px;
}
div#menuJQ ul ul a.parent:hover {
  background: url(../includes/images/submenu-pointer-hover.gif) no-repeat right top;
  -background: url(../includes/images/submenu-pointer.gif) no-repeat right top;  
}
div#menuJQ ul ul a.parent:hover span {
}
div#menuJQ ul ul span {

    margin-top: 0;
    text-align: left;
}
div#menuJQ ul ul li.last { background: none; }
div#menuJQ ul ul li {
    width: 100%;
}

/* menu::level3 */

div#menuJQ ul ul div {
      width: 180px;
      padding: 0;
    background: url(../includes/images/subsubmenu-top.png) no-repeat 0px 0;
    -background: url(../includes/images/subsubmenu-top.gif) no-repeat 0px 0;      
    margin: -32px 0 0 198px !important;
    margin: -32px 0 0 176px;
}
div#menuJQ ul ul ul {
    padding: 11px 0px 9px 0px;  
    margin: 20px 0 0 0; 
}
div#menuJQ ul ul div li {
    position:relative;
    top:-10px;
}

/* lava lamp */
div#menuJQ li.back {
    background: url(../includes/images/selected-sub.png) no-repeat 0 0;
    -background: url(../includes/images/selected-sub.gif) no-repeat 0 0;    
    width: 5px;
    height: 46px;
    z-index: 8;
    position: absolute;
    padding: 0;
    margin: 0px 0 0 0;
}

div#menuJQ li.back .left {
    padding:0;
    width:auto;
    background: url(../includes/images/selected-sub.png) repeat-x right 0;
    -background: url(../includes/images/selected-sub.gif) repeat-x right 0;     
    height: 46px;
    margin: 0 0 0 5px;
    float: none;
    position: relative;
    top: 0;
    left: 0;
    visibility: visible;
} 
```

查询：

```
$(document).ready(function(){
    $('#menuJQ > ul li').click(function(e) {
        e.preventDefault();
            $('ul:first', this).show();
    });

    $('#menuJQ > ul li').mouseleave(function() {
        $('ul', this).hide();
    });

    $('#submenu > ul li a').click(function(e) {
        e.preventDefault();
        window.location = (this).href;
        // var test = (this).href;
        // alert(test);
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T01:04:38.107

将您编写的所有 CSS 放入媒体查询中：

```
@media only screen and (min-width: 900px) {

    .expand{
        display:block;
    }
} 
```

这将使它仅在屏幕宽于 900 像素时起作用。您可以更改该像素数。

现在在媒体查询之外编写您只需要用于移动设备的 CSS。mdeia 查询中的样式将覆盖，但仅在满足条件时才会覆盖。

如果您想要列表小部件，可以访问我的页面：http: [//instancia.net/jquery-plugin-mobile-list/](http://instancia.net/jquery-plugin-mobile-list/) 缩小浏览器宽度以查看小部件。页面中的 Zip 文件。

# css - Django加载一个不存在的css

> ID：15015083
> 
> 赞同：0
> 
> 时间：2013-02-22T00:55:38.673
> 
> 标签：css, django, static

即使我完全删除了静态文件夹，Django 也会在我的模板中加载一个 css 文件。几天前我尝试了 collectstatic 命令，我认为这可能是问题所在。关于如何修复它的一些线索？

# jquery - Jquery Slider 不再适用于 IE

> ID：15015086
> 
> 赞同：-1
> 
> 时间：2013-02-22T00:56:13.237
> 
> 标签：jquery, css, internet-explorer, slider

到目前为止，我的 Jquery 滑块在 Chrome 和 Firefox 中完美运行，并且一度在 IE 中完美运行。但是当我完成网站时，它不再工作，我不知道为什么。[这](http://www.stonewallinsurancegroup.com)是该网站的链接。这是代码的链接，因为它太长了，不能放在这里[！](http://jsfiddle.net/gbcbw/)任何帮助将不胜感激！ `.gotojsfiddle{ }`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T01:05:23.657

if you changed the jquery plugin, maybe you will have some problems, cause some functions were removed on version 1.9.1 [http://jquery.com/download/](http://jquery.com/download/) there you will find the migrate plugin take a look it.

# vb.net - 将字符串转换为

> ID：15015087
> 
> 赞同：0
> 
> 时间：2013-02-22T00:56:15.697
> 
> 标签：vb.net, string, winforms

例如，我有一个带有 10 个按钮的程序，当我按下一个随机按钮时，它的名称被保存到一个字符串中，我想将 1 添加到按钮的名称中，例如，如果我按下 button1 将字符串更改为 button2 但现在我不能使用该字符串，因为它无法将字符串转换为 system.windows.forms.buttons，我已经尝试过 Me.Controls 但它对我不起作用。

例子：

```
dim stringy as string
dim integr as integer
dim buton as button

sub procedureee
stringy = stringy.remove(0,6)
integr = val(stringy) + 1
stringy = "Button" & integr
button.backcolor = white
end sub

Button1_Click
stringy = button1
procedureee 
```

/* 编辑 */

对不起，我认为我没有明确我的 sefl，这段代码中的所有内容都对我有用，除了“stringy = button1”它说字符串不能转换为 system.windows.forms.button 但这正是我想要做的，我有一个有 100 个按钮的程序，当按下任何按钮时，它会设置（“Dim local as button”）变量 local= 按下的按钮的值，它可以工作，所以我取那个 button.name 并从中删除 1 所以我得到上面按钮的值（PS：我在网格上有按钮，垂直方向从 1 到 10，如果我删除 1，我会得到按钮的名称，例如：button1gA3 变成 Button1gA2）但是当我尝试这样做时 local2 = stringy 它给了我消息（字符串无法转换为 system.windows.forms.button）有人知道如何解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T01:02:41.213

您可以使用`FindControl()`按名称查找控件。请注意，它不是递归的，因此您需要在包含您的按钮的直接父级上调用此方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T02:00:09.773

干得好 ...

```
 Private Sub Button_Click(sender As Object, e As EventArgs) Handles Button1.Click, Button2.click

    Dim FullButtonName As String = sender.text

    Dim ButtonsNumber As String = FullButtonName.Replace("Button", "").Trim

    Dim NewButtonNumber As Integer = CType(ButtonsNumber, Integer) + 1

    sender.text = "Button " & NewButtonNumber.ToString

End Sub 
```

# jquery - 如何混合 jquery 表单验证 (http://docs.jquery.com/Plugins/Validation) 和我自己的？

> ID：15015091
> 
> 赞同：-1
> 
> 时间：2013-02-22T00:56:34.123
> 
> 标签：jquery, jquery-validate

我需要在我的 Web 表单上使用自定义验证。

我有 2 或 3 个显示巡演日期的选择标签。它们都默认为“空”选项（即值参数返回“”）。用户可以选择一个或多个日期。

**例如**

```
name: required field and uses the validation plugin

1st tour: user selected April 1 tour date

2nd tour user selected April 14 tour date

3rd tour: user opted not to join 
```

如果我使用上面链接中的验证插件，则在按下提交按钮时我的自定义验证永远不会运行。（按钮标签是类型提交。如果我将按钮类型更改为按钮，我的自定义 javascript 验证有效，但从未检查过名称字段。）

另一个复杂性是页面上出现的游览数量（因此选择标签的数量）各不相同。本周可能是 2 个，到下周，它将是 4 个（从那时起创建了新的）。

我已经查看了验证插件的 api，但我认为它不会起作用。我希望将它用于可以使用它的字段，并且只依赖自定义验证来解决我上面描述的“棘手”情况。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T01:08:08.963

**报价标题：**

> “我如何混合 jquery 表单验证 ( [http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation) ) 和我自己的？”

使用插件的`addMethod()`方法，你可以用这个插件完成的事情没有限制。

[http://docs.jquery.com/Plugins/Validation/Validator/addMethod#namemethodmessage](http://docs.jquery.com/Plugins/Validation/Validator/addMethod#namemethodmessage)

```
jQuery.validator.addMethod("myRule", function(value, element, params) { 
    // your custom validation function
    // return false; // represents failed validation
    // return true; // represents passed validation
}, jQuery.format("failed - your custom message")); 
```

回调的参数是：

*   已验证元素的当前**值**
*   要验证的**元素**
*   **为方法指定的参数**，例如为`min: 5`参数 is `5`，`range: [1, 5]`为其`[1, 5]`

# lotus-domino - 自动日期和时间 Lotus domino

> ID：15015092
> 
> 赞同：0
> 
> 时间：2013-02-22T00:56:44.470
> 
> 标签：lotus-domino, lotusscript, lotus-formula

可以自动化上次修改的时间和日期，我有 4 个文本框，一个是日期有公式`@Created`，3 个有公式`@Modified`。我希望 3 个文本框一次修改一个。

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:33:35.127

如果您正在寻找 Richard 的解决方案，请尝试以下操作：

1.  创建一个字段

    *   在您的表格上放置一个字段，
    *   转到字段属性
    *   计算字段以供显示
    *   在第一个选项卡中选中“允许多个值”，
    *   然后转到第三个选项卡并在“显示单独的值”字段中选择值“新行”
2.  @Formula 放入文本字​​段的 value 属性：

    @Subset($Revisions; 4)

这将为您提供前 4 个条目。如果要获取最后 4 个条目，请在数字前加上减号：

```
@Subset($Revisions; -4) 
```

这是你想要的吗？？

# c# - 如何在没有 MS Word 或 Interop 的情况下在 C# 中创建固定宽度的艺术字样对象

> ID：15015093
> 
> 赞同：0
> 
> 时间：2013-02-22T00:57:03.260
> 
> 标签：c#, ms-word, office-interop

我在一家每周和每月都有销售的商店工作。为了宣传这些销售，公司中的某个人花费了一个班次，从标准化模板中用 MS Word 制作大大小小的标志。这真的很耗时，而且容易出错。

我想设计一个程序来从我们的数据库中提取必要的产品信息并将其放入这些标志中。

我想使用艺术字或艺术字替代品来创建许多对象，因为这将确保标准尺寸（以适合标志）和风格。我不太关心效果，我只关心整个单词的高度和宽度。

我创建了一个使用 Interop 库执行此操作的小程序，虽然它创建了原始标志的近乎完美的复制品，但我担心一次完成 30-50 个标志可能会太慢。

是否有 MS wordart 的替代方法可以让我创建可以缩放以适应特定大小的图像或其他文本对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T01:01:20.040

如果您试图通过编写代码来取代（或减轻）员工制作标牌的工作，并且您的代码接近完美但只是有点慢，那么您应该分析您的代码以了解它为什么慢。我无法想象您的代码比员工慢：D。所以你不应该仅仅因为速度而放弃 Word 互操作，如果它完全符合你的要求。

此外，由于艺术文字是一种文字事物，因此在没有 Word 的情况下进行这项工作是一项巨大的工作。如果您有正确的字体，您可能可以使用 GDI+（标准图像绘制接口）从 .NET 执行此操作。但是，这将需要一些教程阅读和反复试验。有一个[备受赞誉的 GDI+ 常见问题解答](https://web.archive.org/web/20141230145656/http://bobpowell.net/faqmain.aspx)，其中包含有关该主题的大量信息。

缓慢互操作的一个可能原因是 Word 实例的创建（和销毁）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T01:13:20.710

使用 .docx 和 xml 直接更改

# perl - Perl 中的 NYSIIS 算法

> ID：15015094
> 
> 赞同：0
> 
> 时间：2013-02-22T00:57:09.910
> 
> 标签：perl, character

我正在尝试在 perl 中使用 NYSIIS 模块：[http ://search.cpan.org/~krburton/String-Nysiis-1.00/Nysiis.pm](http://search.cpan.org/~krburton/String-Nysiis-1.00/Nysiis.pm)

我尝试了示例程序：

```
#!/usr/bin/perl

use 5.10.0;
use String::Nysiis qw(nysiis);

my $enc = nysiis($string);

print nysiis('Larry'),"\n"; # should print LARY 
```

它确实打印了 LARY，但它也给了我一个错误：“在 C:/Perl/site/lib/String/Nysiis.pm 第 24 行的 uc 中使用未初始化的值 $string。”

当我执行 ppm install String::Nysiis 时，我被告知“没有要安装的缺失包”。

如何防止生成此警告（或错误）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T01:05:36.230

您在这一行中使用未初始化的变量调用它：

```
my $enc = nysiis($string); 
```

取出该行，或先初始化 $string（然后使用 $enc）。

# node.js - 带有回调和不带回调的 collection.find 有什么区别？

> ID：15015101
> 
> 赞同：0
> 
> 时间：2013-02-22T00:58:08.903
> 
> 标签：node.js, mongodb

有什么区别：

```
var cursor = collection.find();
//do something 
```

和

```
collection.find(null, function(err, cursor) {
  //do something
} 
```

第一个“阻塞”吗？如果是这样，“阻塞”是否意味着它将锁定节点，直到 mongo 返回游标？

（第一个示例来自[node-mongodb-native](https://github.com/mongodb/node-mongodb-native#find)的文档。如果他们的示例是阻塞的，那么他们为什么要放入文档中？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T01:03:17.930

第一个是同步的，并且会阻塞。如果 mongo 超时，您的节点服务器将无法做任何其他事情，所以基本上“锁定”，是的。

除非可能在服务器初始化期间或编写命令行工具期间，否则应避免这种情况。

第二个将在返回 mongo 的结果时调用回调之前处理其他事件。

# database - 如何使用缓存来提高分类网站的性能？

> ID：15015106
> 
> 赞同：2
> 
> 时间：2013-02-22T00:59:04.833
> 
> 标签：database, performance, caching, yii

我已经使用 Yii php 框架建立了分类网站。现在它的流量很大。所以我想使用缓存来优化网站的性能。

我要优化两个控制器。

一种是线程列表控制器：（示例）[http://www.shichengbbs.com/category/view/id/15](http://www.shichengbbs.com/category/view/id/15)

另一个线程控制器：（示例）[http://www.shichengbbs.com/info/view/id/67900](http://www.shichengbbs.com/info/view/id/67900)

我做了什么：

1.  线程列表缓存 3 分钟。（另一个选项是仅在新线程出现时更新线程列表）

2.  设置线程视图的最后修改时间 HTTP 标头。（没有设置过期时间，因为一些用户抱怨页面在编辑后看起来没有变化）

3.  部分缓存类别导航片段。（它出现在每个页面的左侧）

4.  使用 htaccess 为 img/html/css/js 设置过期标头。

5.  考虑了线程列表的数据库 sql 缓存，但没有完成。因为我认为它与1相同。

我还能做些什么来提高网站性能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T08:48:57.317

我假设您已经完成了[性能调优指南](http://www.yiiframework.com/doc/guide/1.1/en/topics.performance)第 1 点和第 3 点。这真的很有帮助。

对于数字 2，您可以使用[CHttpCacheFilter](http://www.yiiframework.com/doc/api/1.1/CHttpCacheFilter)

```
类 CategoryController 扩展控制器 {

   私人 $_categoryLastUpdate;
   公共功能过滤器（）{
      返回数组（
         大批（
           'CHttpCacheFilter + 视图',
           'cacheControl' => " max-age=604800, 必须重新验证",
           'etagSeedExpression' => 函数（） {
             返回 $this->getCategoryLastUpdate();
           }
           'lastModifiedExpression' => 函数（） {
             返回 $this->getCategoryLastUpdate();
           }
         )
      )
   }

   公共函数 actionView($id){
      $object = Category::model()->findByPk($_GET['id']);
      $this->render('view', array('object' => $object));
   }

   公共函数 getCategoryLastUpdate(){
      if (!isset($this->_categoryLastUpdate)){
         $obj = Category::model()->findByPk($_GET['id'], array('select' => 'lastUpdate'));
         $this->_categoryLastUpdate
      }
      返回 $this->_categoryLastUpdate;
   }

}

```

它基本上会按类别计算 ETag 和 LastUpdate。而要保存查询，它会首先只计算对象`lastUpdate`的。`Category`

对于第一，您始终可以使用[CCacheDependency](http://www.yiiframework.com/doc/api/1.1/CCacheDependency)。只需在线程列表对象中创建一个字段，例如`lastUpdate`. 当一个新线程提交时，只需更新该字段并将其用于 CCacheDependency。

由于我看到您使用了非常大的分页，因此我认为您想阅读有关[优化分页显示的四种方法](http://www.mysqlperformanceblog.com/2008/09/24/four-ways-to-optimize-paginated-displays/)（如果您将 MySQL 用于数据库和线程搜索/列表）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T01:20:56.450

尝试将缓存管理器与 Memcache 或 APC 一起使用。例如，[http://code.google.com/p/memcache-flag/](http://code.google.com/p/memcache-flag/)。当您编辑列表时，您可以使缓存项或标签无效。我想如果您的设计很简单（设置一个键并在它不再有效时将其删除），它也可以使用常规的 APC / Memcache 函数来完成。

使用它来存储序列化（或自动序列化）数据，而不是从 mysql 中检索它。

# javascript - 这个 JavaScript Function.call 方法在做什么？

> ID：15015108
> 
> 赞同：0
> 
> 时间：2013-02-22T00:59:26.383
> 
> 标签：javascript, function, prototype

```
var function1 = function(){};
var function2 = function(){};

function1.call(function2.prototype); 
```

我花了太多时间试图理解上面的代码。任何人都可以解释在上述情况下是如何变化的吗`function1`？`function2`

[功能混合](https://javascriptweblog.wordpress.com/2011/05/31/a-fresh-look-at-javascript-mixins/#comment-29193)

我可以`function1`在`function2`. 所以，我的结论`function`一定是变了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T01:03:21.390

Given your code example, the value of `this` in that invocation of `function1` will be set to the value of the `function2.prototype` object.

```
var function1 = function(){
    console.log(this === function2.prototype); // true
};
var function2 = function(){};

function1.call(function2.prototype); 
```

So methods *(or other values)* on `function2.prototype` will be accessible from `this` inside `function1`.

But if they're simply invoked as like this:

```
this.someMethod(); 
```

then the value of `this` inside the method will be the actual prototype object. This would be an unusual use.

* * *

The code example from your link seems to be this:

```
var asCircle = function() {
  this.area = function() {
    return Math.PI * this.radius * this.radius;
  };
  this.grow = function() {
    this.radius++;
  };
  this.shrink = function() {
    this.radius--;
  };
  return this;
};

var Circle = function(radius) {
    this.radius = radius;
};
asCircle.call(Circle.prototype);

var circle1 = new Circle(5);
circle1.area(); //78.54 
```

* * *

In this example, the `asCircle` function adds methods to whatever is provided as its `this` value. So basically, `Circle.prototype` is being enhanced with additional methods as a result of this invocation.

As you can see, the `.area()` method becomes available in the prototype chain of `Circle` after it was assigned via that invocation.

So it's not that the function being invoked is using the methods, but just the opposite... it's providing new methods.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T01:03:11.673

they aren't. your code is calling function1 using function2's prototype as the context. So in the call, "this" will map to function2's prototype, instead of the window object (assuming you're calling it from a browser)

# c# - 找出模式中的下一个数字

> ID：15015117
> 
> 赞同：-1
> 
> 时间：2013-02-22T01:00:13.137
> 
> 标签：c#, design-patterns, math

我将如何在 C# 中以编程方式找出下一个以某种模式出现的数字？例如，如果我有一个模式（3、6、9、12），我将如何以编程方式计算出下一个数字是 15，然后是 21，等等？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T01:09:22.497

好吧，首先您需要知道模式的类型或以编程方式弄清楚。线性数字模式通过加法或减法增加。指数模式通过乘法或除法增加。这样，您必须从第一个数字开始并确定差异。然后查看下一个数字，看看它是否增加了相同的数量。如果是这样，您就有了模式，只需将差值添加到最后一个数字即可。如果不是，它是一个指数函数，然后你需要确定它随着模式中的每个数字增加多少，以投影下一个。

没有看到代码，我只能向您展示概念。希望能帮助到你！您可能会发现[这](https://stackoverflow.com/questions/8958573/programmatically-detect-patterns-in-a-set-of-data)很有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T01:17:43.683

Dangit，我的响应因无线故障而丢失。让我再试一次：

您可以将其作为对 RPN 语言组合的广度优先搜索。从堆栈上的模式开始；忽略堆栈下溢，因为它们表明您处于序列种子中。使用基本运算符和个位数，在表达能力和不过度扩展搜索空间之间取得良好平衡。例如（显然，在搜索空间中只显示一些有趣的点）：

```
for +:
3 +: Stack Underflow - ignore
3 6 +: 9
3 6 9 +: 15 - wrong

for *:
3 *: SU
3 6 *: 18 - wrong

for 1:
3 1: 1 - wrong

for + -:
3 + -: SU
3 6 + -: SU
3 6 9 + -: -12 - wrong

for 3 +:
3 3 +: 6
3 6 3 +: 9
3 6 9 3 +: 12
success
next:
3 6 9 12 3 +: 15
3 6 9 12 15 3 +: 18 
```

这将为序列产生最简单的解释。正如 Samuel Edwin Ward 所指出的，据我们所知，可能有一个复杂的算法产生 4 作为下一个项目，或“香蕉”。例如，这里的许多人会立即“知道”这个序列中的下一个词：

```
1
2
"fizz"
4
? 
```

（答案是，“显然”，，`"buzz"`即使该模式实际上并未在示例中展示，只是我们的经验。）

编辑：堆栈下溢，而不是溢出：/

# gwt - 具有内容辅助功能的 GWT 文本字段

> ID：15015123
> 
> 赞同：1
> 
> 时间：2013-02-22T01:00:35.167
> 
> 标签：gwt

我正在做一个项目，我需要创建一个 GWT 文本字段。用户应该能够在文本字段中进行查询。但是这个文本字段应该具有内容辅助（如 Ecliplse）类型的功能。

示例：“路径”是应用程序中的预定义对象之一，具有“名称”、“地址”等特定属性。所以现在当用户输入“path.”时，它应该显示可用属性。这应该与我们在 eclipse 中得到的几乎相同的方式 put objectname 它将提供所有可用的方法来调用。

示例：用户编写文本“From path.name, path.attribute for object.attribute” 当用户编写“from”，“for”时，它不会显示任何帮助，但当用户键入“path”时。或“对象”。在上面的陈述中，它应该显示协助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T04:01:41.107

这是一个有趣的想法。您可以使用建议框小部件尝试此操作。

GWT 建议框 - [http://gwt.googleusercontent.com/samples/Showcase/Showcase.html#!CwSuggestBox](http://gwt.googleusercontent.com/samples/Showcase/Showcase.html#!CwSuggestBox)

GWTchosen 建议框 - [http://jdramaix.github.com/gwtchosen/](http://jdramaix.github.com/gwtchosen/)

上面的小部件演示使用对字符串的简单“包含”检查。如果你想提出你的想法，你需要在正则表达式匹配上花费一些严肃的逻辑。

# python - Django中没有属性“方法”

> ID：15015132
> 
> 赞同：0
> 
> 时间：2013-02-22T01:01:55.947
> 
> 标签：python, django, forms

我在一页上有多个表单，我的视图是通过检查提交的值来处理这些表单。这似乎一切正常，但是在我的表单中出现以下错误。

```
'QueryDict' object has no attribute 'method' 
```

看法

```
def all(request):
if request.method == 'POST':
    if 'all' in request.POST['submit']:
        all(request.POST)
    elif 'addtype' in request.POST['submit']:
        addtype(request.POST)
    elif 'addnewpm' in request.POST['submit']:
        addnewpm(request.POST)
    elif 'addnewspec' in request.POST['submit']:
        addnewspec(request.POST)
    elif 'update' in request.POST['submit']:
        update(request.POST)
    elif 'addnewrecord' in request.POST['submit']:
        addnewrecord(request.POST) 
```

基本上，我只是根据按下的提交按钮将帖子值传递给单独的函数。除了第一个“全部”之外，它们都工作正常。“全部”提交按钮正在提交大量数据，我可以在回溯中看到所有这些数据。

也许它与我的 HTML 代码有关。

```
<table class="gridtable">
<tr>
<td class="topheader-left" colspan="10">     
<form action="" method="post">
<button type="submit" value="all" name="submit" style="border:0px;">
<img src="{%  get_static_prefix %}images/update.png" style="width:27px;height:27px;">
</button>
</td>
</tr> 
```

在此之下，我只有大量带有字段的表格单元格，最后是 /form。

我页面上其中一种表单的代码运行良好。

```
<table width="100%">
<tr>
<form method="post" action="">
<td>
<input id="newtype" type="text" name='newtype' size="40" value="Service Type">
</td>
<td>
<button name="submit" type="submit" value="addtype" style="border:0px;">
<img src="{% get_static_prefix %}images/Add-icon.png" width="20" height="20" border="0">
</button>
</td>
</form> 
```

这种形式似乎工作正常。我不明白我在做什么不同。

干杯，伙计们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T01:04:41.290

似乎是一个简单的函数名冲突。您的视图方法名称是`all`，`all(request)`如果`submit == all`.

使用`in`在 request.POST 中查找 submit 的值似乎很奇怪。为什么不只设置一次值并以这种方式进行比较呢？

```
submit = request.POST['submit']

if submit == 'all':
    # call method
elif submit == 'addtype':
   # etc 
```

# android - 如何测试各种移动变体的 android 应用程序？

> ID：15015135
> 
> 赞同：-3
> 
> 时间：2013-02-22T01:02:09.963
> 
> 标签：android, iphone, xcode, ipad, cocoa

如果您正在开发 iphone/iPad 应用程序，是否可以在没有设备的情况下进行测试？其他应用程序，如 android（如何测试不同的手机变体——比如三星、诺基亚等）。我们需要什么应用来测试windows mobile app，blackberry app？请帮我。

是否可以在 iphone 3 上测试为 iphone 5 构建的应用程序？Xcode 模拟器或任何其他模拟器中的情况如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T01:06:43.277

这些移动平台中的每一个都有模拟器或模拟器作为其 SDK 的一部分。
例如，在 Android 中，您可以创建一个仿真器来模仿某个手机型号的各种硬件属性。

对于某些平台，也有提供“设备即服务”的公司，您可以在其中上传您的应用程序，然后他们在一系列真实的移动设备上运行它及其测试套件（例如，适用于 Android 的[Testdroid](http://testdroid.com/) 、适用于 Android 和 iOS 的[LessPainful](https://www.lesspainful.com/) 、举几个例子）。

但总的来说，这个问题有点太宽泛了；谷歌是你的朋友。

# javascript - Javascript MYSQL Dropdown

> ID：15015138
> 
> 赞同：-1
> 
> 时间：2013-02-22T01:02:39.207
> 
> 标签：javascript, mysql, drop-down-menu

Apologies in advance if a) this question has already been answered, I did search but am not able to use the answers I've found and b) I am not the a very skilled programmer and am trying to learn...

To make this as short as possible...

*   I have a fully functioning site with a searchable and sortable database (that a co-worker pretty much build for me a long time ago, hence why I am extra confused)
*   I would like to add a dropdown filter that populates from the database
*   The code references javascript and PHP. From what I understand, the PHP populates the table data for me and the javascript triggers the 'show xx entries' filter and the search box - which are both awesome

My issue is I cannot get any code for the dropdown I would like to add to work. I can get the dropdown to populate but not actually filter the data :(

```
<?php

$dbhost = 'localhost';
$dbuser = 'database';
$dbpass = 'password;
$dbname = 'marchmadness';
$table = 'leaderboard';

//connect to the database
$db = mysql_connect($dbhost, $dbuser, $dbpass) or die(mysql_error());

mysql_select_db($dbname) or die(mysql_error());

?>

<!DOCTYPE html>
<html lang="en">

<head>
    <title>Leaderboard</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 <link rel="icon" type="image/png" href="/favicon.ico" />
   <link rel="stylesheet" type="text/css" href="assets/css/main.css">
    <link rel="stylesheet" type="text/css" href="assets/css/listing.css" media="all" />
    <script type="text/javascript" src="assets/js/jquery.min.js"></script>
    <script type="text/javascript" language="javascript" src="assets/js/jquery.dataTables.min.js"></script> 

    <script type="text/javascript">
$(document).ready(function() {
            /* This triggers the cool filtering stuff, without this it's just a normal table of data */
            $('table').dataTable({
                "iDisplayLength": 10
            });
        });

function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}

}
    </script>

</head>

<body id="listing">
<div id="wrapper">

<div id="topbox" align="center">
<img src="_Images/maddnessheader.png" width="539" height="296" align="center" /></div>
&nbsp; <br/>
&nbsp; <br/>
&nbsp; <br/>
&nbsp; <br/>
&nbsp; <br/>
&nbsp; <br/>

<?
  $sql="SELECT Title FROM leaderboard"; 
$result=mysql_query($sql); 

$options=""; 

while ($row=mysql_fetch_array($result)) { 

    $id=$row["leaderboard"]; 
    $thing=$row["Title"]; 
    $options.="<OPTION VALUE=\"$id\">".$thing.'</option>';
} 
?>

<SELECT NAME=thing> 
<OPTION VALUE=0>Choose 
<?=$options?> 
</SELEC 
```

T>

```
 <table align="center">

<thead>
    <tr>
        <th>Title</th>
        <th>Name</th>
        <th>Call Coding (%)</th>
        <th>FizzBack SAT Score (%)</th>

    </tr>
</thead>

<tbody>

<?php

    //get the information from the database
    $result = mysql_query("SELECT * FROM `$table`;") or die(mysql_error());

    while($row = mysql_fetch_array($result)) {
        echo '<tr>';

        // print out the data from the database. Notice how the text inside $row[] matches up with the headers in phpmyadmin

        echo '<td>' . htmlentities($row['Title']) . '</td>';
        echo '<td>' . htmlentities($row['Name']) . '</td>';
        echo '<td>' . htmlentities($row['CC']) . '</td>';
        echo '<td>' . htmlentities($row['FZB']) . '</td>';

        echo "</tr>\n";
    }

?>

</tbody>
</table>

</div>
</body>
</html> 
```

I think I would have to manipulate the javascript to add what I need, as that's where the the working dropdown and search box come from... but I suck a javascript :-\ If anyone could help I would REALLY appreciate it. I can share the existing Java as well if needed :D

Cheers!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T01:54:29.760

试一试，我编辑了一些看起来不太正确的东西，并添加了一些希望过滤东西的代码。有点猜测，因为我从未使用过数据表，也不知道数据类型是什么。

```
<?php
    $dbhost = 'localhost';
    $dbuser = 'database';
    $dbpass = 'password';
    $dbname = 'marchmadness';
    $table = 'leaderboard';

    //connect to the database
    $db = mysql_connect($dbhost, $dbuser, $dbpass) or die(mysql_error());

    mysql_select_db($dbname) or die(mysql_error());
?>
<!doctype html>
<html lang="en">
    <head>
        <title>Leaderboard</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link rel="icon" type="image/png" href="/favicon.ico" />
        <link rel="stylesheet" type="text/css" href="assets/css/main.css">
        <link rel="stylesheet" type="text/css" href="assets/css/listing.css" media="all" />
        <script type="text/javascript" src="assets/js/jquery.min.js"></script>
        <script type="text/javascript" language="javascript" src="assets/js/jquery.dataTables.min.js"></script> 

        <script type="text/javascript">
            var table; // used to store a reference later
            $.fn.dataTablesExt.afnFiltering.push(
                function( oSettings, aData, iDataIndex ) {
                    if (aData[0].toLowerCase() == $('#title_filter').val().toLowerCase()) {
                        return true;
                    } else {
                        return false;
                    }
                }
            );
            $(document).ready(function() {
                /* This triggers the cool filtering stuff, without this it's just a normal table of data */
                table = $('table').dataTable({ "iDisplayLength": 10 }); // this starts the datatable stuff and returns a reference to it
            });
            $("#title_filter").onchange(function() { 
                table.fnDraw(); // forgot this line - whoops
            });
            function MM_preloadImages() { //v3.0
                var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
                var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
                if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
            }
        </script>
    </head>
    <body id="listing">
        <div id="wrapper">
            <div id="topbox" align="center">
                <img src="_Images/maddnessheader.png" width="539" height="296" align="center" /></div>
<?php
    $sql="SELECT Title FROM leaderboard"; 
    $result=mysql_query($sql); 
    $options=""; 
    while ($row=mysql_fetch_array($result)) { 
        $id=$row["leaderboard"]; 
        $thing=$row["Title"]; 
        $options.="<option value=\"$thing\">".$thing.'</option>';
    } 
?>
                <select id="title_filter"> 
                    <?=$options?> 
                </select>
                <table align="center">
                    <thead>
                        <tr>
                            <th>Title</th>
                            <th>Name</th>
                            <th>Call Coding (%)</th>
                            <th>FizzBack SAT Score (%)</th>
                        </tr>
                    </thead>
                <tbody>
<?php
    //get the information from the database
    $result = mysql_query("SELECT * FROM `$table`;") or die(mysql_error());

    while($row = mysql_fetch_array($result)) {
        echo '<tr>';
        // print out the data from the database. Notice how the text inside $row[] matches up with the headers in phpmyadmin
        echo '<td>' . htmlentities($row['Title']) . '</td>';
        echo '<td>' . htmlentities($row['Name']) . '</td>';
        echo '<td>' . htmlentities($row['CC']) . '</td>';
        echo '<td>' . htmlentities($row['FZB']) . '</td>';
        echo "</tr>\n";
    }
?>
                </tbody>
            </table>
        </div>
    </body>
</html> 
```

# java - 如何解析来自 FB 图形 API 的 JSON 数组中的数据？

> ID：15015141
> 
> 赞同：1
> 
> 时间：2013-02-22T01:02:56.847
> 
> 标签：java, json, processing

我是 JSON 新手。我正在使用[json 处理库](https://github.com/agoransson/JSON-processing)。给定一个 JSON，例如：

```
{
   "data": [
      {
         "name": "John Doe",
         "id": "2980311"
      },
      {
         "name": "Jane Doe",
         "id": "10221412"
      },
      {
         "name": "George Doe",
         "id": "111623489"
      }
    ],
    "paging": {
      "blah" : "blah"
    }
} 
```

如何获取 id 值。我首先尝试使用一个数组：

```
String URL = "https://graph.facebook.com/username/friends?access_token=";
String token = "";
String[] response = loadStrings(URL+token);

if(response != null) {
  JSONObject result = new JSONObject(response);
  JSONArray data = result.getJSONArray("data");
} 
```

这打印出来：

```
JSONObject["data"] not found.
JSONObject["data"] is not a JSONArray. 
```

但它肯定会得到数据。如果我打印出来，`response`我会看到数据。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T01:12:17.577

我没有[`JSONObject`](https://github.com/agoransson/JSON-processing/blob/master/src/org/json/JSONObject.java)在该库中看到接受`String[]`（`response`变量的类型）的构造函数。有`JSONObject(String)`，有`JSONObject(Object)`。如果您将 a 传递给`String[]`，`JSONObject`它将与后者匹配，这在我看来（立即）不会像您想要的那样做。

`String`我怀疑您想从 URL中获取一个，然后将其传递给`JSONObject(String)`，此时事情应该开始正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-02T19:36:08.937

试试这个..

GraphObject responseGraphObject = response.getGraphObject();
JSONObject json = responseGraphObject.getInnerJSONObject();

```
 JSONObject sys  = json.getJSONObject("data");
          Log.e("urlimage json",  sys.getString("url")); 
```

# php - Creating a web page which contains variable text output

> ID：15015142
> 
> 赞同：-1
> 
> 时间：2013-02-22T01:03:07.017
> 
> 标签：php, javascript, html, ajax

As you will probably tell from my question I am a bit of newbie at this. Anyway, I have been racking my brain on this for days and I cannot find a solution anywhere.

What I am trying to do is create a php page with html text but I want the page to contain a section that displays different text based on a click from menu list.

I know it is possible because I have seen it elsewhere but I cannot seem to figure it our. I would be grateful for any assistance I can get.

Cheers

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T03:23:16.743

也许 javascript/jquery 方法对您有用。

您可以将 onclick 选择器分配给您的链接，并让它们为您显示不同的内容。如，

```
var yourMessage = "I like stuff";

$('#linkId').click(function(){
    $('#containerId').html(yourMessage);
} 
```

带有多个按钮的 jsFiddle 示例 - [http://jsfiddle.net/B6QDy/1/](http://jsfiddle.net/B6QDy/1/) 这当然是您的起点，如何在 php 文件中自定义它完全是您的选择。希望这可以帮助...

# php - 应用程序浏览页面相册的Facebook访问权限

> ID：15015147
> 
> 赞同：0
> 
> 时间：2013-02-22T01:03:22.377
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我正在尝试获取我使用 Facebook PHP SDK 管理的页面的相册/照片。该页面本身不是我的，我被授予从 Facebook 管理它的权限。

我创建了一个新应用程序并选择了“带有 Facebook 登录的网站”，它已用于我网站上的 Facebook 评论。

我正在使用位于[此处](https://github.com/facebook/facebook-php-sdk)的 Facebook PHP SDK 。

当我查询该帐户的专辑时，我只是得到`{ ["data"]=> array(0) { } }` 所以这似乎是一些权限问题，但我无法弄清楚如何从 facebook 修复它。

如何授予应用程序访问权限以浏览页面的相册？（请记住，这不是我的帐户，这是我管理的页面，但我有权访问它）。

这是我的代码，以防万一我的代码中有一些愚蠢的东西。谢谢！

```
$fbconfig = array();
$fbconfig['appId'] = $appid;
$fbconfig['secret'] = $appsecret;
$facebook = new Facebook($fbconfig);
$access_token = $facebook->getAccessToken();    

$albums = $facebook->api('/'.$pageid.'/albums','GET');
var_dump($albums);  //this outputs { ["data"]=> array(0) { } } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T02:24:48.087

你应该：

*   通过您的应用令牌使用您自己的帐户登录 Facebook
*   成为特定 Facebook 页面的管理员
*   最后接受Facebook要求的“管理我的页面”的权利。

我知道您不是该页面的所有者，但真正的所有者应该将您作为管理员在 Facebook 上该页面的规范中...

# .net - 绑定到两个属性

> ID：15015149
> 
> 赞同：1
> 
> 时间：2013-02-22T01:03:29.713
> 
> 标签：.net, wpf, binding

我有一个有趣的场景——我有一个滑块需要在控件的值发生更改时立即更新它。那里都很好，很容易。

但我也希望它做一些额外的工作，但只是在延迟之后。绑定上的 .NET 4.5 延迟属性将是完美的，但现在滑块值需要有两个绑定......一个有延迟，一个没有。

类似这样的东西：

```
<Slider value={Binding Path=Property1, Delay=500; Binding Path=Property2} /> 
```

我知道这不存在，但它会很高兴。但是有没有办法使用 4.5 中的新延迟道具来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T02:58:29.143

不确定这是否可行，但您可以使用`MultiBinding`虚拟转换器作弊。

就像是：

xml:

```
 <Window.Resources>
        <local:DummyConverter x:Key="Dummyconverter" />
    </Window.Resources>
    <Grid>
        <Slider >
            <Slider.Value>
                <MultiBinding Converter="{StaticResource Dummyconverter}" >
                    <Binding Path="Value1"  />
                    <Binding Path="Value2" Delay="500" />
                </MultiBinding>
            </Slider.Value>
        </Slider>
    </Grid> 
```

虚拟转换器

```
public class DummyConverter : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        return values == null ? null : values[0];
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, System.Globalization.CultureInfo culture)
    {
        return new object[] { value, value };
    }
} 
```

# php - PHP's mysqli functions, is freeing the statements necessary, and what's the difference between close and free_result?

> ID：15015150
> 
> 赞同：0
> 
> 时间：2013-02-22T01:03:30.517
> 
> 标签：php, mysql, mysqli

I wasn't freeing my statements, as I didn't think it was necessary per se, as the manual says "mysql_free_result() only needs to be called if you are concerned about how much memory is being used for queries that return large result sets." so I didn't. But then I got an error saying: "Commands out of sync; you can't run this command now" which only went away when I freed my results. Weird.

So is it necessary?

Also, what's the difference between `close()` and `free_result()`? In [PHP's manual](http://php.net/manual/en/mysqli-stmt.fetch.php) they have close used to close statements (in one of the examples on this fetch manual). But they also use `free_result` [here](http://www.php.net/manual/en/function.mysql-free-result.php) and it's unclear the difference.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T01:04:43.833

**`_close`**

> Closes a previously opened database connection

[Documentation](http://php.net/manual/en/mysqli-result.free.php)

**`_free_result`**

> Frees the memory associated with a result
> 
> **Note:**
> 
> You should always free your result with `mysqli_free_result()`, when your result object is not needed anymore.

[Documentation](http://php.net/manual/en/mysqli.close.php)

And as mentioned in the comments, see [this question](https://stackoverflow.com/questions/614671/commands-out-of-sync-you-cant-run-this-command-now) regarding the out of sync error.

# python - displaying a 'completed' form in django

> ID：15015152
> 
> 赞同：1
> 
> 时间：2013-02-22T01:04:20.043
> 
> 标签：python, django, webforms

I would like to show a completed form using a model instance and the form class that was used to render the form. Basically, I want to show the 'completed' form, read-only. Is there an easy way to do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T01:11:41.630

当然。只需`readonly`在“已完成”表单的输入中设置属性：http: [//www.w3schools.com/tags/att_input_readonly.asp](http://www.w3schools.com/tags/att_input_readonly.asp)

# emacs - How to attach character to the next N lines using Emacs?

> ID：15015160
> 
> 赞同：1
> 
> 时间：2013-02-22T01:04:56.263
> 
> 标签：emacs, emacs24

Using `emacs24` I'd like to attach for example `#` at the beginning of the next five lines. So having this:

```
Line1
line2
line3 
```

get this:

```
#Line1
#line2
#line3 
```

for the number of lines that I specify. How can I do that? Thanks!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T03:46:38.327

虽然 Emacs 中可能有一些内置的东西可以做到这一点，而且你当然可以编写一些 Lisp 来完成它，但我通常会使用“矩形编辑”功能来完成它。想象一下缓冲区包含以下内容，`.`代表点（光标所在的位置）

```
.Line1
line2
line3 
```

设置标记

按`C-n`两次。这是现在缓冲区的状态：

```
Line1
line2
.line3 
```

按`C-x r t`。

键入`#`。

按回车。

我会发现这比输入重复命令的次数值要自然得多，因为您可以直观地选择要编辑的行。YMMV

*编辑*

下面是如何使用一点 Emacs Lisp 来做到这一点。请注意，虽然我已经使用 Emacs 几年了，但我最近才开始学习如何实际使用 Emacs Lisp，所以这段代码可能不是那么好！它确实完成了工作。

```
(defun insert-n-times (s n)
  (interactive "Mstring:\nNtimes:")
  (while (> n 0)
    (insert s)
    (goto-char (- (point) 1))
    (next-line)
    (setq n (- n 1)))) 
```

通过执行以下操作来使用它：`M-x insert-n-times RET <type a string> RET <type a number>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T06:56:27.950

另一种方法是使用宏来完成此类重复性工作。[这](http://emacswiki.org/emacs/KeyboardMacros)是一个描述如何在 Emacs 中使用宏的页面。如果你不熟悉它，你可以看看它。

在您的情况下，以下键将起作用：

1.  将光标移动到 Line1 的开头
2.  CX (
3.  键入“#”
4.  Cn，然后是 Ca
5.  CX)
6.  将光标移动到要添加“#”的行首
7.  铜 10 Cx e

基本上，步骤 2-5 将录制一个宏，该宏将在开头添加一个 #，然后移至下一行的开头。步骤 6-7 将执行宏 10 次（当然，您可以将其更改为任意数量）。我想这将是相当多的击键和新手可能不喜欢它。也许其他人有更好的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T17:22:53.430

为什么不只是`query-replace-regexp`or `replace-regexp`？例如选择区域并执行`C-M-%``^``RET``#``RET``!`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T09:49:47.920

```
Line1
line2
line3 
```

我写了以下代码：

*   您首先给出一个数字参数（您想要执行此操作的次数），例如`M-3`（按住 alt，点击 3），执行以下 3 次

*   要么使用一个键，就像下面的建议 (f8)，要么使用 Mx`prompt-for-insert`

*   它会要求您输入一个字符串。例如“foo”并点击返回按钮。

然后它会按照你的要求去做。

```
(defun prompt-for-insert (val)
  (interactive "P")
  (let ((astring (read-string "What do you want to insert?"))
        (value val))
    (while (> value 0)
      (insert astring)
      (move-beginning-of-line 2)
      (decf value)))
  )

(global-set-key [f8] 'prompt-for-insert) 
```

整个序列将是：

```
M-3 [f8] foo RET 
```

导致：

```
fooLine1
fooline2
fooline3 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T01:50:03.813

虽然`comment-region`在这个特定示例中很好，但请查看该`multiple-cursors`包以了解通常执行此类操作的非常强大的方法。

您可以`C->`反复点击，直到每行开头都有一个光标，然后点击`#`完成（`C-g`以摆脱多余的光标。）

它是一种更具交互性的形式，`C-x r t`并且也适用于非矩形区域（`C-s`例如在之后）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-24T12:58:58.257

试试`M-x string-insert-rectangle`。此命令在矩形的每一行上插入一个字符串。

# python - int object not callable error in python

> ID：15015163
> 
> 赞同：1
> 
> 时间：2013-02-22T01:05:14.587
> 
> 标签：python, object, int, typeerror

This following section of code gave me the error

```
fd=((1/(sd*sqrt(6.28)))*2.718**((-1(d-average)**2))/(2*sd**2))) 
```

This is the error

```
Traceback (most recent call last):
  File "C:\Users\etc
    fd=((1/(sd*sqrt(6.28)))*2.718**((-1(d-average)**2))/(2*sd**2))
TypeError: 'int' object is not callable 
```

i cannot find where the int object is "not callable"

thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T01:08:16.050

您`*`在 -1 之后缺少运算符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T01:14:01.750

这是由 Python 试图像这样“调用”的 int 对象造成的：

```
>>> 2*(1+3)
8
>>> 2(1+3)        #note missing *
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'int' object is not callable 
```

# unix - 使用 applescript 显示 Unix Exctable 文件

> ID：15015172
> 
> 赞同：2
> 
> 时间：2013-02-22T01:05:48.963
> 
> 标签：unix, applescript

我想使用 applescript 创建一个应用程序来运行 Unix 可执行文件。我希望将 Unix exe 文件中的信息显示在 applescript 中。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T02:51:25.587

试试这个：

```
set aVariable to do shell script "fullPathToYourExecutable"
display dialog aVariable 
```

# android - 向 ListFragment 显示信息的最佳方式？

> ID：15015174
> 
> 赞同：0
> 
> 时间：2013-02-22T01:06:32.007
> 
> 标签：android, xml, text, file-io, android-listfragment

我正在为我的校园新闻报纸创建一个应用程序，其中一个功能将是一个标签，其中包含校园内所有俱乐部和组织的列表。我想知道最好的方法是什么。我目前使用 RSS 处理程序从网站的另一个选项卡中获取新文章，但有关俱乐部和组织的信息不在任何地方的 RSS 提要上。 ![在此处输入图像描述](../Images/792318ccb42519370d9f7d566ff46089.png)

我想知道将这些信息放入列表的最佳方式是什么？我最初认为最简单的方法是使用文本文件或 xml 文件。理想情况下，我希望列表项显示俱乐部的简称和全名，就像我在文章选项卡中有文章名称和发布日期一样。如IEEE及其下的电气电子工程师学会。

单击列表项时，我想启动带有俱乐部徽标和描述的详细视图。我想知道是否有人以前做过这样的事情并且知道最好的方法。

我认为可以创建我自己的 XML 文件并像我已经为新闻文章所做的那样解析它，但我不确定，任何建议都会受到赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:52:49.913

我决定创建自己的 XML 文件并从 assets 文件夹中读取它，这与我用于 RSS 提要的方法几乎相同，但输入源不同。

# java - 在单个 ListView 中左右对齐

> ID：15015179
> 
> 赞同：1
> 
> 时间：2013-02-22T01:07:07.903
> 
> 标签：java, android, xml, listview

我正在`listView`动态设置。我将在每行显示两件我将从中接收到的东西`parse.com`。我希望第一件事左对齐和蓝色，第二件事右对齐和红色。我将有两个数组`firstArray`， 和`secondArray`。我找到了很多方法来做到这一点，但没有一个是动态的。我应该怎么做，或者我可以做到`xml`？

**更新**

这是我`xml`在@t0s 发布的那个教程之后

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:padding="2dp"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal" >

<TextView
    android:id="@+id/column1"
    android:layout_width="50dip"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:textColor="#0000FF"
    android:gravity="left"
    />
    <TextView
    android:id="@+id/center"
    android:text="VS"
    android:textSize="15sp"
    android:layout_width="50dip"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:textColor="#FFFFFF"
    android:gravity="center"
   />
       <TextView
    android:id="@+id/column2"
    android:layout_width="50dip"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:textColor="#FF0000"
    android:gravity="right"
   />
    </LinearLayout> 
```

和我的java

```
 ListView list = (ListView) findViewById(R.id.mylist);

                ArrayAdapter<String> listAdapter = new  ArrayAdapter<String>(MainActivity.this, R.layout.mylist, namesArray);
                list.setAdapter(listAdapter);

 //find my objects off parse, and call this method

private String display(Object name, Object record,
         ArrayAdapter listAdapter) {

    String fightCard = (name).toString();
    namesArray.add((name).toString() +" " + (record).toString());
    return fightCard;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T02:17:37.233

那么我的代码是一团糟。检查这里的教程是[[非常简单]](http://www.vogella.com/articles/AndroidListView/article.html#tutorial_ownadapter)

好的乍得检查这里的代码：

主要活动 ：

```
package org.example.chad;

import java.util.ArrayList;

import android.app.ListActivity;
import android.os.Bundle;

public class MainActivity extends ListActivity {

private ArrayList<DataItem> data = new ArrayList<DataItem>();

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    //create Objects
    DataItem obj1 = new DataItem("name1", "record1");
    DataItem obj2 = new DataItem("name2", "record2");
    DataItem obj3 = new DataItem("name3", "record3");
    DataItem obj4 = new DataItem("name4", "record4");
    DataItem obj5 = new DataItem("name5", "record5");
    //add the to ArrayList
    data.add(obj1);
    data.add(obj2);
    data.add(obj3);
    data.add(obj4);
    data.add(obj5);

        CustomAdapter adapter = new CustomAdapter(this, R.layout.row, data);
        setListAdapter(adapter);        

} 
```

}

**主.xml**：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

 <ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />

</RelativeLayout> 
```

**数据项**：

```
package org.example.chad;

public class DataItem {
private String name;
private String record;

public DataItem(){

}

public DataItem(String n, String r ){
    this.name = n;
    this.record = r;
}

public String getname() {
    return name;
}

public void setname(String name) {
    this.name = name;
}

public String getrecord() {
    return record;
}

public void setrecord(String record) {
    this.record = record;
} 
```

}

自定义适配器：

```
package org.example.chad;

import java.util.ArrayList;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.TextView;

public class CustomAdapter extends ArrayAdapter<DataItem> {
   private ArrayList<DataItem> objects;

   public CustomAdapter(Context context, int textViewResourceId, ArrayList<DataItem>     objects) {
        super(context, textViewResourceId, objects);
        this.objects = objects;
}

  @Override
  public View getView(int position, View convertView, ViewGroup parent) {

  View v = convertView;
  if (v == null) {
        LayoutInflater inflater = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = inflater.inflate(R.layout.row, null);
    }

  DataItem i = objects.get(position);

if (i != null) {
    TextView nameView = (TextView) v.findViewById(R.id.name);
    TextView recordView = (TextView) v.findViewById(R.id.record);

    if (nameView != null){
        nameView.setText(i.getname());
    }
    if (recordView != null){
        recordView.setText(i.getrecord());
    }

}

return v;
  }
} 
```

和**row.xml**：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
     android:orientation="horizontal" >

    <TextView
      android:id="@+id/name"
      android:layout_width="100sp"
      android:layout_height="20sp"
      android:textSize="16sp"
      android:layout_gravity="left|center_vertical"
      android:layout_marginLeft="10sp"/>

    <TextView
        android:id="@+id/record"
        android:layout_width="100sp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10sp"
        android:layout_gravity="right"
        android:textSize="16sp" />

</LinearLayout> 
```

几个小时后，我将添加一些评论。结果在这里 ![在此处输入图像描述](../Images/21f6e97897d8bb0da6cec985e6963a18.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T01:19:48.333

如果我没记错的话，您必须扩展`BaseAdapter`类，以便为您的 ListView 提供一个自定义适配器，如果不创建自定义适配器，就不可能将两个数组项添加到 ListView。

这是一个[教程。](http://www.brighthub.com/mobile/google-android/articles/56268.aspx)

并不像看起来那么难。希望能帮助到你。

# jquery - jQuery 移动表单验证与默认消息混合

> ID：15015181
> 
> 赞同：1
> 
> 时间：2013-02-22T01:07:14.437
> 
> 标签：jquery, jquery-mobile, jquery-validate

我`jquery.validate.js`用来管理表单中的验证。在我的表格中，我有这一行：

```
<input type="email" name="email" id="email" value="" /> 
```

在这一行中，我有 [ `type="email"`]。因此，当我尝试在此字段中输入错误的电子邮件时，会显示默认验证消息（在弹出窗口中）。所有其他消息都是展示`jquery.validate.js`方式。

如何解决？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T01:32:05.703

您可以通过将“novalidate”属性添加到表单标记来禁用新 HTML5 表单字段（包括 type=email）的浏览器验证。

例如

```
<form method="post" action="" novalidate>...</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T01:09:35.790

更改`type=email`为`type=text`。提交甚至没有被触发，因为浏览器由于`type=email`要求而阻止它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T01:25:31.507

你的代码：

```
<input type="email" name="email" id="email" value="" /> 
```

它在我的桌面浏览器中运行：http: [//jsfiddle.net/WhH8a/](http://jsfiddle.net/WhH8a/)。通过“工作”，我看到所有消息，包括“电子邮件格式”消息，都正确来自验证插件。

jQuery Validate 插件动态地将 a`novalidate="novalidate"`插入到`<form>`元素中，这应该禁用 HTML 5 表单验证。但是，也许有一些原因导致它在您的移动浏览器中不起作用。

由于 Validate 插件禁用了 HTML 5 验证，并且您想使用该插件来支持 HTML 5 验证，您不妨将其从标记中删除...

... 更改`type="email"`为`type="text"`.

如果要使用该`email`规则，请按以下步骤操作。

**HTML**：

```
<input type="text" name="email" id="email" value="" /> 
```

**jQuery** :

```
$(document).ready(function () {

    $('#myform').validate({ // initialize the plugin
        // other options,
        rules: {
            email: {
                required: true,
                email: true
            },
            // other rules
        }
    });

}); 
```

**工作演示：http: [//jsfiddle.net/TxN48/](http://jsfiddle.net/TxN48/)**

* * *

或者，可以在`class`属性中内联指定这两个规则：

**HTML**：

```
<input type="text" name="email" id="email" class="required email" value="" /> 
```

**jQuery** :

```
$(document).ready(function () {

    $('#myform').validate({ // initialize the plugin
        // other rules & options
    });

}); 
```

**工作演示：http: [//jsfiddle.net/TxN48/1/](http://jsfiddle.net/TxN48/1/)**

# pusher - 移动电话上的错误网关 502

> ID：15015182
> 
> 赞同：0
> 
> 时间：2013-02-22T01:07:28.197
> 
> 标签：pusher

在移动互联网上使用 Pusher 时，我们在尝试通过 ws:// 协议连接时收到这些错误消息。失败后通过 wss:// 成功连接。

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T01:07:28.197

购买加密方案，并告诉客户连接“加密：真”，你的烦恼就烟消云散了！

# asp-classic - 在经典 ASP 中使用 Tumblr Api v2 发布新博客

> ID：15015186
> 
> 赞同：0
> 
> 时间：2013-02-22T01:07:52.897
> 
> 标签：asp-classic, oauth, tumblr

我猜 Tumblr 更新了他们的 API，所以旧的方法行不通了。

关于新文档： [http ://www.tumblr.com/docs/en/api/v2#posting](http://www.tumblr.com/docs/en/api/v2#posting)

就是说我需要使用 OAuth 1.0a 来验证这个 api（如下所示：[http](http://www.tumblr.com/docs/en/api/v2#auth) ://www.tumblr.com/docs/en/api/v2#auth ），这是我到目前为止没有想法如何做他们所要求的。

```
RequestURL = "http://api.tumblr.com/v2/blog/mytestblog.tumblr.com/post"

RequestStr = "type=text"
RequestStr = RequestStr & "&state=published"
RequestStr = RequestStr & "&title=" & PostTitle
RequestStr = RequestStr & "&body=" & PostBody   

Set objXML=Server.CreateObject("Microsoft.XMLHTTP")
    objXML.Open "POST", RequestURL, False
    objXML.Send RequestStr
    Response.Write objXML.ResponseText
Set objXML=Nothing 
```

这显然不起作用并给出以下响应：

```
 {"meta":{"status":401,"msg":"Not Authorized"},"response":[]} 
```

有没有人有在经典asp中这样做的经验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T02:03:58.890

我以前没有使用过这个 API，但是查看您的链接，我认为您需要做的是获取 Oauth 密钥，然后将其添加到您的对象 RequestStr - 例如使用他们的示例

```
RequestStr = RequestStr & "&api_key=PyezS3Q4Smivb24d9SzZGYSuh--IaMfAkE" 
```

# c - 需要推动学习 C 上的指针和 void 函数

> ID：15015194
> 
> 赞同：0
> 
> 时间：2013-02-22T01:08:43.323
> 
> 标签：c, arrays, pointers, sum, void

我只需要在正确的方向上稍微推动一下。首先，我在理解指针时遇到了麻烦，据我了解，它有点像指向您所指的另一个变量的变量。不过，这对我来说似乎不对：S

其次，我在使用 void 函数时遇到了问题，void 函数不能返回任何东西，现在为了我的作业，我需要使用 void 函数来执行一些稍后将用于打印语句的过程。现在问题是我不能在 void 函数中打印任何东西，我必须在主函数中打印它。我不确定 void 函数如何将数据放回主打印中使用，因为它不会返回任何内容。这是我正在使用的函数的示例。

```
void fx1(int d[][5], int rows, int* colIndex, int* maxSum); 
```

在哪里：

*   d 是数据数组
*   rows 是 d 中的行数
*   colIndex 是存储总和最大的列的列索引的地址
*   maxSum 是存储最大列和的地址

该函数的目的是获取数组中的一组数字，即：

> 55、8、12、6、-1
> 
> -10、4、7、5、-6
> 
> -20, 0, 15, 4, -2

计算并找到总和最大的列。

现在我知道它背后的逻辑，只是我不确定如何返回最终结果，以便它可以在主中使用或打印，也可以在这种情况下使用指针（是的，我必须使用指针，整个点这个任务显然是为了学习指针）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T01:14:56.247

你可以定义一个`sum`这样的函数：

```
void sum(int a, int b, int *result) {
    *result = a + b;
} 
```

并在 main 中使用它：

```
int main() {
    int result;

    sum(1, 5, &result);

    printf("%d\n", result);

    return 0;
} 
```

希望这可以帮助。

# jquery - 提高这个 jquery 选择器的效率

> ID：15015196
> 
> 赞同：1
> 
> 时间：2013-02-22T01:09:20.657
> 
> 标签：jquery, performance, jquery-selectors

我有一个类似于这样的布局：

```
<li class="item">
  <div class="data">
    <div class="pics">
      <div class="pic"></div>
      <div class="pic"></div>
      <div class="pic"></div>
      <div class="btns">
        <div class="btn 1"></div>
        <div class="btn 2"></div>
      </div>
    </div>
  </div>
  <input type="hidden" value="" name="">
  <input type="hidden" value="" name="">
  <input type="hidden" value="" name="">
  <input type="hidden" value="" name="">
</li> 
```

我想做的是从单击`<li>`其中一个按钮时 获取所有输入元素`class="btn"`。我接近这个的方式本质上是抓住`<li>`按钮的父级，然后选择`<input>`元素......

```
var inputs = $($(element).parents('.item')[0]).children('input'); 
```

...`element`单击的按钮之一在哪里。

这种方法似乎可以满足我的要求，但是有更好的方法吗？这似乎相当低效，但我没有确切知道的性能指标。有什么想法或建议吗？

## 更新

我去 jsPerf 测试我的选择：http: [//jsperf.com/jq-select](http://jsperf.com/jq-select)。似乎我所拥有的比 using 更快`closest()`，这是我没有猜到的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T01:11:47.070

您不需要调用 jQuery 函数两次 - 您可以使用`closest`

```
$(element).closest('.item').children('input'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T01:12:03.453

你可以试试`closest`：

```
element.closest('.item').children('input'); 
```

它在第一场比赛中停止。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T01:28:17.777

我觉得这更方便一些，因为它是从父级开始的：

```
$('li').has(this).find('input') 
```

性能： http: [//jsperf.com/jquery-closest-vs-has](http://jsperf.com/jquery-closest-vs-has) — 请注意，最佳性能来自缓存`$('li')`。

但是，如果您*真的*想查看性能，我在[http://jsperf.com/jq-select/3](http://jsperf.com/jq-select/3)上使用缓存`li` `has`/`children`方法（比您的方法快约 33%）*和*仅 DOM 版本增强了您自己的 JSPerf，只是所以你可以看到真正的鸿沟有多大（没有真正优化，但仍然快了*7800% ！）。*

这强调了一个前提：当速度*真的很*重要时，使用 DOM。如果您使用的是 JQuery，请选择您认为最方便且易于使用的表达式。

![在此处输入图像描述](../Images/be84f6e675751082e162ca42a355539f.png)

# ruby - 如何为 RSpec 测试创建临时 DataMapper 模型？

> ID：15015198
> 
> 赞同：1
> 
> 时间：2013-02-22T01:09:27.980
> 
> 标签：ruby, rspec, datamapper

我想按照这些思路在 RSpec 测试期间创建一个 DataMapper 模型。但是如何从 RSpec 测试中创建底层 temp_models 表？

```
require 'spec_helper'

class TempModel
  include DataMapper::Resource
  property :id, Serial
  property :foo, String
end

describe "MyTests" do
  before(:all) do
    # what goes here to create the table and finalize the model?
  end
  after(:all) do
    # what goes here to drop the table?
  end
  before(:each) do
    TempModel.destroy!
  end

  it 'creates a TempModel' do
    expect { TempModel.create(:foo => "yowza")}.to_not raise_error
  end
end 
```

所以，就像代码说的那样，我应该在`before(:all)`块中添加什么来在数据库中创建表并创建 DataMapper 模型？并在`after(:all)`块中删除表？

## 更新

或者，如何创建“本地迁移”并对其执行上下移动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T20:33:20.537

我挖掘了资源并尝试提出这个解决方案。如果有人对此有改进，请告诉我：

```
require 'spec_helper'

class TempModel
  include DataMapper::Resource
  property :id, Serial
  property :foo, String
end

describe "MyTests" do
  before(:all) do
    DataMapper.auto_upgrade!
    TempModel.finalize
  end
  after(:all) do
    adapter = DataMapper.repository(:default).adapter
    adapter.execute("DROP TABLE #{TempModel.storage_name}")
  end
  before(:each) do
    TempModel.destroy!
  end

  it 'creates a TempModel' do
    expect { TempModel.create(:foo => "yowza")}.to_not raise_error
  end
end 
```

# java - 为图片更新 3D 数组中的颜色值

> ID：15015201
> 
> 赞同：0
> 
> 时间：2013-02-22T01:09:32.933
> 
> 标签：java, arrays, colors, pixel

我在 Java 中有一个名为 pic[400][400][3] 的数组

我把这个数组放在一个方法中，让它变成一个图像。

在调用将数组制作成图片的方法之前，我想更改每个像素的颜色值。我正在努力解决如何选择我想要更改的值以及我需要输入什么来调整数组中的颜色值的概念。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T01:15:22.780

`pic[xcoord][ycoord][0]`会是红色的。

`pic[xcoord][ycoord][1]`会是蓝色的。

`pic[xcoord][ycoord][2]`会是绿色的。

但是，使用`BufferedImage`. 有`getRGB()`, `setRGB()`, 并且它支持 alpha 值。保存和加载图像也容易得多。

# android - 我可以使用一个按钮将数据保存在 sharedPreferences 中，然后使用另一个按钮来检索它吗？

> ID：15015203
> 
> 赞同：0
> 
> 时间：2013-02-22T01:09:41.873
> 
> 标签：android, button, save, sharedpreferences

假设我有一个希望用户查看的 TextView，然后点击保存按钮。然后点击显示按钮并将文本输入到editText字段中。

这是我正在尝试的，但它不起作用

从 TextView 保存信息...

```
 case R.id.save:

 SharedPreferences firsttunesettings = getSharedPreferences("tune1", 0);
            SharedPreferences.Editor editor = firsttunesettings.edit();
            editor.putString("rh1", rh1.getText().toString());
            editor.commit(); 
```

然后在 EditText 中显示数据....

```
 case R.id.display:
SharedPreferences firsttunesettings = getSharedPreferences("tune1", 0);

            rh1.setText(firsttunesettings.getString("rh1", "")); 
```

该代码没有抛出任何错误，它似乎没有做任何事情。任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T01:36:19.367

你需要这个：

```
SharedPreferences firsttunesettings = getApplicationContext().getSharedPreferences("tune1", 0);

and

SharedPreferences firsttunesettings = getApplicationContext().getSharedPreferences("tune1", 0);

            rh1.setText(firsttunesettings.getString("rh1", "")); 
```

SharedPreferences 需要应用程序的上下文。

其余的代码对我来说看起来不错。

编辑：尝试将您的值首先保存在临时变量上，如下所示：

`String temp = firsttunesettings.getString("rh1", "");`接着：

```
rh1.setText(temp); 
```

由于您发布的代码应该可以正常工作，因此我的想法已经用完了。

编辑#2：

我还声明了我在共享首选项中使用的变量，如下所示：

```
private static final String RH1 = "RH1"; 
```

并像这样使用它：

```
editor.putString(RH1, rh1.getText().toString()); 
```

和

```
String temp = firsttunesettings.getString(RH1, ""); 
```

这应该可以解决问题。

# memory-management - PIC24F - 即使在 PIC 断电后，数据值也可能保持不变？

> ID：15015207
> 
> 赞同：1
> 
> 时间：2013-02-22T01:10:06.127
> 
> 标签：memory-management, persistence, pic, persistent-storage

我有一个关于 PIC24F 中数据值的持久性（存储）的问题，即使 PIC 已关闭。

我已通读数据表，但对 EEPROM 和闪存的区别感到困惑。

例如，假设我有一个变量“x”，有没有办法让“x”的值在 PIC 关闭后仍然存在？我知道只要代码是在独立操作 (COE_OFF) 中编译的，程序就可以保留在闪存中。但是，我特别想知道数据值。

如果我将程序存储器和数据值的存储器设置为非易失性，即使断电也会保持不变吗？

我是否需要将值声明为“静态”，例如：static int x; ?

还是我错了，即使关闭电源，数据值也没有办法持续存在？

感谢您的帮助和澄清！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T03:48:46.687

您必须使用 TBLWTL 和 TBLWTH 指令在页面中写入闪存，正如您在设备的数据表中阅读的那样。这通常用于通过引导加载程序更新您的软件，听起来这不是您所追求的。

要访问 EEPROM，您可以以较小的单位进行操作，并且有编译器便利宏用于声明变量应位于内存映射中的哪个位置。您可以指定该变量位于 EEPROM 中，编译器将为您生成访问和更新该变量的指令。您还可以使用编译器内在函数或 TBL 指令直接读取它。

声明可能类似于：

```
unsigned __attribute__((space(eedata), aligned(2)) my_eeprom_variable; 
```

查看生成的汇编程序，了解当您访问变量时编译器做了什么。

声明一个变量`static`只有传统的 C 语义；它控制变量的范围和初始化规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T07:57:37.173

感谢您的回复！

在提出一些其他建议后，我再次阅读了 MPLAB C30 编译器数据表，发现了“持久”属性。

根据数据表：

“持久属性指定在启动时不应初始化或清除变量。具有持久属性的变量可用于存储状态信息，该状态信息在设备重置后将保持有效。”

我将尝试使用它来看看它是否会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T02:00:38.543

断电时寄存器和 RAM 变量的内容会丢失。Flash 和 EEPROM 都是持久的。Flash 只能以大块擦除 - 128K 或更高，具体取决于您拥有的类型。EEPROM 字可以单独读取或写入。如果您有 EEPROM，那是您保存少量数据的最佳选择。通常您必须串行读写 EEPROM。

# ruby-on-rails-3 - 使用设计将 Spree 添加到 Rails 应用程序

> ID：15015215
> 
> 赞同：1
> 
> 时间：2013-02-22T01:10:45.480
> 
> 标签：ruby-on-rails-3, devise, spree

我是 RoR 的新手，但我喜欢它的每一点:)

我有一个使用设计进行身份验证的小应用程序，它工作正常。

现在我想添加一个电子商务部分，我决定狂欢。我安装了 spree，在安装过程中它问我是否要使用默认身份验证，我说“不”。然后它向我询问我说“用户”的用户模型。

现在我进入我的应用程序，我登录它进入狂欢的产品页面。没关系，但是当我尝试访问管理部分时，我被重定向到产品页面。

我的疑问是： - 我是否应该安装 spree_auth_devise gem？- 这应该是数据库和用户角色的问题吗？因为在“spree_users”表上我什么都没有，只有在用户表上......

如何在 spree 中将我的现有用户之一关联到管理员用户？

这应该是问题还是我错过了其他东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T01:14:03.113

你有没有运行这个：

```
rails g spree:custom_user User 
```

初始设置块中的[http://guides.spreecommerce.com/authentication.html](http://guides.spreecommerce.com/authentication.html)

要检查用户是管理员：

```
user = User.find_by_email("master@example.com")
user.spree_roles << Spree::Role.find_or_create_by_name("admin")
## To test that this has worked, use the has_spree_role? method, like this:
user.has_spree_role?("admin") 
```

# c# - 集合依赖属性

> ID：15015217
> 
> 赞同：5
> 
> 时间：2013-02-22T01:10:49.753
> 
> 标签：c#, wpf, data-binding, observablecollection, dependency-properties

我有一个自定义控件，它`DependencyProperty`的类型`ObservableCollection`绑定到`observableCollection`：

```
<MyControl MyCollectionProperty = {Binding MyObservableCollection} ... 
```

问题是添加到`MyObservableCollection`不更新`MyCollectionProperty`。

我需要完全替换它`MyObservableCollection`以使其工作，例如

```
MyObservableCollection = null;
MyObservableCollection = new ObservableCollection(){...} 
```

有没有更好的方法来处理这个问题？

*编辑：*

```
 public ObservableCollection<string> Columns
    {
        get { return (ObservableCollection<string>)GetValue(ColumnsProperty); }
        set { SetValue(ColumnsProperty, value); }
    }

    public static readonly DependencyProperty ColumnsProperty =
        DependencyProperty.Register("Columns", typeof(ObservableCollection<string>), typeof(MyControl),
                                    new PropertyMetadata(new ObservableCollection<string>(), OnChanged)); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-22T11:56:43.143

除了 grantz 回答的内容之外，我建议使用类型声明属性`IEnumerable<string>`并在运行时检查集合对象是否实现了[`INotifyCollectionChanged`](http://msdn.microsoft.com/en-us/library/ms668629.aspx)接口。这为哪些具体的集合实现可以用作属性值提供了更大的灵活性。然后，用户可以决定拥有自己的可观察集合的专门实现。

另请注意，在`ColumnsPropertyChanged`回调中，`CollectionChanged`事件处理程序附加到新集合，但也从旧集合中删除。

```
public static readonly DependencyProperty ColumnsProperty =
    DependencyProperty.Register(
        "Columns", typeof(IEnumerable<string>), typeof(MyControl),
        new PropertyMetadata(null, ColumnsPropertyChanged));

public IEnumerable<string> Columns
{
    get { return (IEnumerable<string>)GetValue(ColumnsProperty); }
    set { SetValue(ColumnsProperty, value); }
}

private static void ColumnsPropertyChanged(
    DependencyObject obj, DependencyPropertyChangedEventArgs e)
{
    var control= (MyControl)obj;
    var oldCollection = e.OldValue as INotifyCollectionChanged;
    var newCollection = e.NewValue as INotifyCollectionChanged;

    if (oldCollection != null)
    {
        oldCollection.CollectionChanged -= control.ColumnsCollectionChanged;
    }

    if (newCollection != null)
    {
        newCollection.CollectionChanged += control.ColumnsCollectionChanged;
    }

    control.UpdateColumns();
}

private void ColumnsCollectionChanged(
    object sender, NotifyCollectionChangedEventArgs e)
{
    // optionally take e.Action into account
    UpdateColumns();
}

private void UpdateColumns()
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-22T03:55:35.037

下面是一个可能有帮助的工作示例。

在这个例子中，方法 OnChanged 被立即调用，当点击 Add 按钮时，“Changed”被写入控制台。

控制

```
public class MyControl : Control
{

    public ObservableCollection<string> ExtraColumns
    {
        get { return (ObservableCollection<string>)GetValue(ExtraColumnsProperty); }
        set { SetValue(ExtraColumnsProperty, value); }
    }

    public static readonly DependencyProperty ExtraColumnsProperty =
        DependencyProperty.Register("ExtraColumns", typeof(ObservableCollection<string>), typeof(MyControl),
                                    new PropertyMetadata(new ObservableCollection<string>(), OnChanged));

    static void OnChanged(DependencyObject sender, DependencyPropertyChangedEventArgs e)
    {
        (sender as MyControl).OnChanged();

    }

    void OnChanged()
    {
        if ( ExtraColumns != null )
            ExtraColumns.CollectionChanged += new System.Collections.Specialized.NotifyCollectionChangedEventHandler(ExtraColumns_CollectionChanged);
    }

    void ExtraColumns_CollectionChanged(object sender, System.Collections.Specialized.NotifyCollectionChangedEventArgs e)
    {
        Console.WriteLine("Changed");    
    }
} 
```

窗户

```
<Window x:Class="WpfApplication18.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:WpfApplication18"
    Title="MainWindow" Height="350" Width="525">
  <StackPanel>
    <local:MyControl ExtraColumns="{Binding Extras}"/>
    <Button Click="Button_Click">Add</Button>
  </StackPanel>
</Window> 
```

窗口代码背后

```
public partial class MainWindow : Window
{
    private ObservableCollection<string> _extras = new ObservableCollection<string>( );
    public ObservableCollection<string> Extras
    {
        get { return _extras; }
        set
        {
            if (value != _extras)
            {
                _extras = value;
            }
        }
    }

    public MainWindow()
    {
        InitializeComponent();
        DataContext = this;
    }

    private void Button_Click(object sender, RoutedEventArgs e)
    {
        Extras.Add("Additional");
    }
} 
```

# c#-4.0 - 将 Try and Catch 添加到现有程序

> ID：15015221
> 
> 赞同：0
> 
> 时间：2013-02-22T01:11:28.900
> 
> 标签：c#-4.0

大家晚上好，在一个带有巨大大脑放屁的泡菜中，可以在一些事情上需要一点帮助。所以我编写了这个 C# 控制台应用程序，它使用 Selenium 打开网页、登录、执行一些操作，然后提交表单并注销站点。现在我在一个 for 循环中做了 100 次。现在它很少会打嗝并引发异常，原因是页面加载速度不够快或其他原因。我认为使用 try/catch 可能很好，但是一旦 catch 捕获异常，但我希望它重做它所在的循环号并继续。例如，假设我在第 66 次迭代（共 100 次）并且它引发异常，导致页面加载速度不够快或该链接的页面上出现错误，我需要它来捕获它，记录它，然后重新启动又是66号。

```
using System;
using System.Collections.Generic;
using System.Text;
using OpenQA.Selenium;
using OpenQA.Selenium.Firefox;
using OpenQA.Selenium.Support.UI;
using System.Threading;
using System.IO;

namespace SeleniumTest
{
class Program
{
    static void Main(string[] args)
    {
            for (Int64 i = 1; i < 100; i++)
            {
                DateTime time;
                time = DateTime.Now;
                StreamWriter tw = new StreamWriter(@"C:\folder\file.txt", true);
                IWebDriver driver = new FirefoxDriver();
                tw.WriteLine("Staring test," + time);
                driver.Navigate().GoToUrl("http://site.com");
                driver.FindElement(By.Name("username")).Clear();
                driver.FindElement(By.Name("username")).SendKeys("username");
                driver.FindElement(By.Name("password")).Clear();
                driver.FindElement(By.Name("password")).SendKeys("password");
                driver.FindElement(By.CssSelector("input.ui-standard-button")).Click();
                driver.FindElement(By.LinkText("page")).Click();
                driver.FindElement(By.LinkText("page")).Click();
                Thread.Sleep(5000);
                //Do awesome stuff
                DateTime time1;
                time1 = DateTime.Now;
                driver.FindElement(By.CssSelector("div.Parameters")).Click();
                driver.FindElement(By.Name("submit")).Click();
                driver.FindElement(By.LinkText("Logoff")).Click();
                driver.Quit();
                tw.WriteLine("Stopping Test Successfully," + time1);
                tw.Flush();
                tw.Close();
                Thread.Sleep(10000);
            }
        }
    }
}

using System;
using System.Collections.Generic;
using System.Text;
using OpenQA.Selenium;
using OpenQA.Selenium.Firefox;
using OpenQA.Selenium.Support.UI;
using System.Threading;
using System.IO;

namespace SeleniumTest
{
class Program
{
    static void Main(string[] args)
    {
         try
           {
            for (Int64 i = 1; i < 100; i++)
            {
                DateTime time;
                time = DateTime.Now;
                StreamWriter tw = new StreamWriter(@"C:\folder\file.txt", true);
                IWebDriver driver = new FirefoxDriver();
                tw.WriteLine("Staring test," + time);
                driver.Navigate().GoToUrl("http://site.com");
                driver.FindElement(By.Name("username")).Clear();
                driver.FindElement(By.Name("username")).SendKeys("username");
                driver.FindElement(By.Name("password")).Clear();
                driver.FindElement(By.Name("password")).SendKeys("password");
                driver.FindElement(By.CssSelector("input.ui-standard-button")).Click();
                driver.FindElement(By.LinkText("page")).Click();
                driver.FindElement(By.LinkText("page")).Click();
                Thread.Sleep(5000);
                //Do awesome stuff
                DateTime time1;
                time1 = DateTime.Now;
                driver.FindElement(By.CssSelector("div.Parameters")).Click();
                driver.FindElement(By.Name("submit")).Click();
                driver.FindElement(By.LinkText("Logoff")).Click();
                driver.Quit();
                tw.WriteLine("Stopping Test Successfully," + time1);
                tw.Flush();
                tw.Close();
                Thread.Sleep(10000);
            }
        }
         catch(Exception e)
        {
            StreamWriter tw = new StreamWriter(@"C:\folder\file.txt", true);
            tw.WriteLine("Problem happened.  Restarting test.  Exception is :" + e);
            //Line of code to restart test at number 66 which I don't know
        }
    }
  }
} 
```

我不知道在哪里//在第 66 号重新开始测试的代码行是我的知识结束的地方，希望是其他人所在的地方。您可以提供的任何指导都将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T01:17:41.377

遇到异常时减少计数器应该这样做。

```
for (Int64 i = 1; i < 100; i++) {
    try {
        //main code here
    } catch (Exception ex) {
        //logging here
        i--;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T01:19:10.550

我会尝试找出它失败的原因，但如果这不是一个选项，我会将它转换为带有 try catch 的 while 循环

```
 int i = 100;
    while(i > 0)
    {
      try
     {
     //Do your logic here 
       i--
     }
      catch
     {
         //Log failure
      }//Don't decrement in case of failure
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T01:31:35.313

```
for (Int64 i = 1; i < 100; ++i)
{
  for (;;)
  {
     try
     {
       //code here
       break;
     }
     catch (Exception exc)
     {
       //log error
     }
  }
} 
```

# ruby-on-rails - ROR bundle install : git://github.com/Goin/dm-migrations.git (at master) 未检出。请运行 `bundle install` (Bundler::GitError)

> ID：15015224
> 
> 赞同：1
> 
> 时间：2013-02-22T01:11:43.490
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gem, bundle

我有一个继承的现有 ROR 应用程序。我需要将 GEM 文件添加到 Gemfiles 列表。然后我运行了“捆绑安装”。Apache (/phusion/rack) 现在显示错误“git://github.com/Goin/dm-migrations.git (at master) is not check out. Please run `bundle install`(Bundler::GitError)”。然而，根据捆绑包安装了这个 gem：“/usr/local/lib/ruby/gems/1.8/bundler/gems/dm-migrations-3d190029bb8c”。

问题的根本原因和解决方法是什么？

泰，弗雷德

# android - 方法 setButton 在 AlertDialog 上不明确

> ID：15015226
> 
> 赞同：2
> 
> 时间：2013-02-22T01:11:53.513
> 
> 标签：android, android-alertdialog

我有这个方法：

```
alert.setButton(1, "OK", null); 
```

但它不起作用，因为我在我的 sdk 上收到了这个警报：

> 说明 资源路径 位置 类型 方法 setButton(int, CharSequence, Message) 对于 AlertDialog (...) 类型不明确

如何解决？提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T01:19:25.033

首先，不要硬编码`1`，类中有一些常量[`DialogInterface`](http://developer.android.com/reference/android/content/DialogInterface.html)：[`BUTTON_NEGATIVE`](http://developer.android.com/reference/android/content/DialogInterface.html#BUTTON_NEGATIVE), [`BUTTON_NEUTRAL`](http://developer.android.com/reference/android/content/DialogInterface.html#BUTTON_NEUTRAL), [`BUTTON_POSITIVE`](http://developer.android.com/reference/android/content/DialogInterface.html#BUTTON_POSITIVE)...</p>

而且，还有重载的方法：

*   [`setButton(int whichButton, CharSequence text, DialogInterface.OnClickListener listener)`](http://developer.android.com/reference/android/app/AlertDialog.html#setButton%28int,%20java.lang.CharSequence,%20android.content.DialogInterface.OnClickListener%29)
*   [`setButton(int whichButton, CharSequence text, Message msg)`](http://developer.android.com/reference/android/app/AlertDialog.html#setButton%28int,%20java.lang.CharSequence,%20android.os.Message%29)

您传递`null`给第三个参数，因此编译器不知道您要使用哪种方法。

# android - 调整 RelativeLayout 导致列表视图丢失选择，更多

> ID：15015234
> 
> 赞同：0
> 
> 时间：2013-02-22T01:13:11.377
> 
> 标签：android, listview, android-linearlayout

我的主屏幕是一个相对布局，其中包含一个位于 2 个 TableLayout 之上的 ListView 之上的 LinearLayout。

我随意显示/隐藏各种碎片。但是，我第一次添加 LinearLayout 时，ListView 失去了选择，底部的 TableLayout 消失了。在第一次之后，一切正常。

知道发生了什么吗？

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/sort_header"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:background="@color/sorting"
        android:orientation="vertical"
        android:paddingBottom="10dp"
        android:paddingTop="10dp" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <TextView
                android:layout_width="80dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="left"
                android:text="Sort Order"
                android:textSize="18sp"
                android:paddingLeft="12dip"
                android:textStyle="bold" />

            <TextView
                android:layout_width="80dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="left"
                android:text="Score Mode"
                android:textSize="18sp"
                android:paddingLeft="12dip"
                android:textStyle="bold"  />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <Spinner
                android:id="@+id/sort_spinner"
                android:layout_width="80dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:entries="@array/sort_array"
                android:prompt="@string/sort_prompt" />

            <Spinner
                android:id="@+id/score_spinner"
                android:layout_width="80dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:entries="@array/score_array"
                android:prompt="@string/score_prompt" />
        </LinearLayout>
    </LinearLayout>

    <ListView
        android:id="@+id/score_list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@+id/keyboard"
        android:layout_below="@+id/sort_header"
        android:choiceMode="singleChoice"
        android:divider="#CCCCCC"
        android:dividerHeight="1dp"
        android:listSelector="@drawable/selector" />

    <TableLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/keyboard"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/keyboardSave"
        android:background="#000000"
        android:paddingBottom="0dip"
        android:paddingLeft="0dip"
        android:paddingRight="0dip"
        android:paddingTop="2dip" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="0dip" >

            <Button
                android:id="@+id/keyboard1"
                style="@style/keyboardButton"
                android:background="@drawable/button_bg"
                android:text="1" />

            <Button
                android:id="@+id/keyboard2"
                style="@style/keyboardButton"
                android:background="@drawable/button_bg"
                android:text="2" />

            <Button
                android:id="@+id/keyboard3"
                style="@style/keyboardButton"
                android:background="@drawable/button_bg"
                android:text="3" />

            <Button
                android:id="@+id/keyboardp10"
                style="@style/keyboardButton"
                android:background="@drawable/button_bg"
                android:text="+10" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="0dip" >

            <Button
                android:id="@+id/keyboard4"
                style="@style/keyboardButton"
                android:background="@drawable/button_bg"
                android:text="4" />

            <Button
                android:id="@+id/keyboard5"
                style="@style/keyboardButton"
                android:background="@drawable/button_bg"
                android:text="5" />

            <Button
                android:id="@+id/keyboard6"
                style="@style/keyboardButton"
                android:background="@drawable/button_bg"
                android:text="6" />

            <Button
                android:id="@+id/keyboardp1"
                style="@style/keyboardButton"
                android:background="@drawable/button_bg"
                android:text="+1" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="0dip" >

            <Button
                android:id="@+id/keyboard7"
                style="@style/keyboardButton"
                android:background="@drawable/button_bg"
                android:text="7" />

            <Button
                android:id="@+id/keyboard8"
                style="@style/keyboardButton"
                android:background="@drawable/button_bg"
                android:text="8" />

            <Button
                android:id="@+id/keyboard9"
                style="@style/keyboardButton"
                android:background="@drawable/button_bg"
                android:text="9" />

            <Button
                android:id="@+id/keyboardm1"
                style="@style/keyboardButton"
                android:background="@drawable/button_bg"
                android:text="-1" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="0dip" >

            <Button
                android:id="@+id/keyboardDel"
                style="@style/keyboardButton"
                android:background="@drawable/button_list"
                android:text="Del"
                android:textColor="#FF2C00" />

            <Button
                android:id="@+id/keyboard0"
                style="@style/keyboardButton"
                android:background="@drawable/button_list"
                android:text="0" />

            <Button
                android:id="@+id/keyboardPosNeg"
                style="@style/keyboardButton"
                android:background="@drawable/button_list"
                android:text="+ / -" />

            <Button
                android:id="@+id/keyboardm10"
                style="@style/keyboardButton"
                android:background="@drawable/button_list"
                android:text="-10" />
        </TableRow>
    </TableLayout>

    <TableLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/keyboardSave"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:background="#000000"
        android:padding="0dip" >

        <TableRow
            android:id="@+id/tableRow5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingBottom="0dip"
            android:paddingLeft="0dip"
            android:paddingRight="0dip"
            android:paddingTop="2dip" >

            <Button
                android:id="@+id/keyboardSaveButton"
                style="@style/keyboardButton"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:background="@drawable/save_button"
                android:text="Save" />
        </TableRow>
    </TableLayout>

</RelativeLayout> 
```

我在 OnCreate 中隐藏了 LinearLayout：

```
sortHeader.setVisibility(LinearLayout.GONE); 
```

这是执行显示/隐藏的功能：

```
public void showOptions() {
    if (menuOptions.getTitle() != getString(R.string.show_options)) {
        menuOptions.setTitle(R.string.show_options);
        sortHeader.setVisibility(LinearLayout.GONE);
    } else {
        menuOptions.setTitle(R.string.hide_options);
        sortHeader.setVisibility(LinearLayout.VISIBLE);
    }
} 
```

在此图像中，您可以看到这些部分。当我第一次使排序部分可见时，保存按钮和选择都消失了。

![在此处输入图像描述](../Images/9cb26133d8d1f0f12c07a3ed1abbeb03.png)

这是之前和之后。首先，没有排序，然后一旦我添加它们，选择和按钮就会消失。

![在此处输入图像描述](../Images/dfb4792377117facd410add95a4d59b3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:50:09.293

尝试在 LinearLayout 中制作 listview .. 可能会有所帮助..！

```
<LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_above="@+id/keyboard"
    android:layout_below="@+id/sort_header">

    <ListView
        android:id="@+id/score_list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:choiceMode="singleChoice"
        android:divider="#CCCCCC"
        android:dividerHeight="1dp"
    />

</LinearLayout> 
```

# ruby - 计算Ruby中字符串数组中的总字符数？

> ID：15015235
> 
> 赞同：3
> 
> 时间：2013-02-22T01:13:12.797
> 
> 标签：ruby

如何计算 Ruby 中字符串数组中的字符总数？假设我有以下内容：

```
array = ['peter' , 'romeo' , 'bananas', 'pijamas'] 
```

我正在努力：

```
array.each do |counting|
   puts counting.count "array[]"
end 
```

但是，我没有得到想要的结果。看来我在数字符以外的东西。

我搜索了 count 属性，但没有任何运气或找到良好的信息来源。基本上，我想得到数组内字符总数的输出。，

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T01:20:25.593

Wing's Answer 会起作用，但只是为了好玩，这里有一些选择

```
['peter' , 'romeo' , 'bananas', 'pijamas'].inject(0) {|c, w| c += w.length } 
```

或者

```
['peter' , 'romeo' , 'bananas', 'pijamas'].join.length 
```

真正的问题是这`string.count`不是您正在寻找的方法。（[文档](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-count)）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-22T01:33:23.377

或者...

```
a.map(&:size).reduce(:+) # from Andrew: reduce(0, :+) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-22T01:21:41.863

另一种选择：

```
['peter' , 'romeo' , 'bananas', 'pijamas'].join('').size 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-22T02:06:09.020

一个有趣的结果:)

```
>> array = []
>> 1_000_000.times { array << 'foo' }
>> Benchmark.bmbm do |x|                                          
>>   x.report('mapreduce') { array.map(&:size).reduce(:+) }       
>>   x.report('mapsum') { array.map(&:size).sum }                 
>>   x.report('inject') { array.inject(0) { |c, w| c += w.length } }   
>>   x.report('joinsize') { array.join('').size }                   
>>   x.report('joinsize2') { array.join.size }                      
>> end

Rehearsal ---------------------------------------------
mapreduce   0.220000   0.000000   0.220000 (  0.222946)
mapsum      0.210000   0.000000   0.210000 (  0.210070)
inject      0.150000   0.000000   0.150000 (  0.158709)
joinsize    0.120000   0.000000   0.120000 (  0.116889)
joinsize2   0.070000   0.000000   0.070000 (  0.071718)
------------------------------------ total: 0.770000sec

                user     system      total        real
mapreduce   0.220000   0.000000   0.220000 (  0.228385)
mapsum      0.210000   0.000000   0.210000 (  0.207359)
inject      0.160000   0.000000   0.160000 (  0.156711)
joinsize    0.120000   0.000000   0.120000 (  0.116652)
joinsize2   0.080000   0.000000   0.080000 (  0.069612) 
```

所以看起来`array.join.size`运行时间最低

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-22T01:16:20.910

```
a = ['peter' , 'romeo' , 'bananas', 'pijamas']

count = 0
a.each {|s| count += s.length}
puts count 
```

# coldfusion - 使用冷融合的 Instagram 身份验证范围参数

> ID：15015241
> 
> 赞同：4
> 
> 时间：2013-02-22T01:14:05.510
> 
> 标签：coldfusion, instagram

我有一个用 Coldfusion 8 编写的 Instagram 应用程序，它基本上通过标签提取媒体，然后允许人们对照片点赞/投票，这一切都是通过 Instagram API 完成的。不过，Liking 部分让我悲痛欲绝，因为我可以在没有戏剧性的情况下获得 Authentication 和 Access_Token，但是 Access_Token 默认情况下似乎没有 Like 的权限。Authenticate 调用“范围”有一个可选参数，它允许您传递 Access_Token 允许的权限，但我不知道如何通过 ColdFusion CFHTTP 将其作为 POST 传递。

这是通过 CFHTTP 以 type="FormField" 形式循环所有参数的数据的准备工作。无论我如何尝试并呈现范围选项，无论是 JSON 格式、带空格的字符串、带“+”分隔符的字符串，它似乎都没有效果，并且由于权限错误，Like 操作继续失败。

```
<cfscript>
    var LOCAL = {};
    LOCAL['config'] = {};
    LOCAL['returnStruct'] = {};

    // prep packet required by the main call method
    // the following values are required for EVERY call
    LOCAL['config']['method'] = 'POST';
    LOCAL['config']['format'] = ARGUMENTS['outputType'];
    LOCAL['config']['url'] = VARIABLES.authURL;

    // variables required by this method
    LOCAL['config']['params'] = {};
    LOCAL['config']['params']['client_secret'] = ARGUMENTS.client_secret;
    LOCAL['config']['params']['grant_type'] = 'authorization_code';
    LOCAL['config']['params']['redirect_uri'] = ARGUMENTS.redirect_uri;
    LOCAL['config']['params']['code'] = ARGUMENTS.code;
    LOCAL['config']['params']['scope'] = 'likes comments relationships';

</cfscript> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T22:25:54.987

如果其他人遇到同样的问题，“范围”没有正确应用于返回 Access_Token，那么问题是 Instagram 文档对于应该在哪里使用这个参数含糊不清。正如它在服务器端身份验证期间建议的那样，我已经尝试了所有可能的方式作为 POST 操作，但是它似乎只有在作为 GET 参数发送并且经过一些玩弄之后我决定将“范围”参数添加到第二阶段身份验证是请求代码并且有效的地方！见下文 [https://api.instagram.com/oauth/authorize/?client_id=YOUR_CLIENT_ID&redirect_uri=YOUR_REDIRECT_URI&response_type=code&scope=likes+basic](https://api.instagram.com/oauth/authorize/?client_id=YOUR_CLIENT_ID&redirect_uri=YOUR_REDIRECT_URI&response_type=code&scope=likes+basic)

这将向用户显示来自 Instagram 的确认消息，以允许应用程序代表用户执行点赞，之后其他一切都像魅力一样工作。

# python - 比较python中的列表值时出现问题

> ID：15015242
> 
> 赞同：0
> 
> 时间：2013-02-22T01:14:09.523
> 
> 标签：python, python-2.7

我有一个程序可以在运行时解析输出，将时间与给定值进行比较并打印差异，但它没有按照我的方式工作：

```
a = 'Time Taken for Response: 31 msec'

time_out = 75

if a.split()[4] > time_out:

    print "time taken is more than given conditions"

    print a.split()[4] 
```

输出如下：

```
time taken is more than given conditions

31 
```

我不明白为什么程序在`31 < 75`

任何线索或指导？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T01:19:08.740

您正在比较“31”和 75。试试`int(a.split()[4]) > time_out:`吧。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T01:22:45.483

您正在将字符串与整数进行比较。

字符串的二进制表示是比十进制数的二进制表示更大的二进制数。

*注意：[另一个答案](https://stackoverflow.com/a/15015338/1487282)中的信息表明，在讨论python解释器时，上述解释实际上是不准确的*

转换为 int `if int(a.split()[4]) > time_out:`应该会给你正确的答案。

顺便说一句，如果你使用 python 3 而不是 python 2，试图比较一个字符串和 int 会给你以下错误：

> TypeError：不可排序的类型：str() > int()

更符合用户期望

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T01:24:34.877

拆分后，您实际上是在比较一个字符串和一个 int。不幸的是，这在 CPython 3.0 之前的版本中是完全奇怪的，并且基于所有事物的类型名称，而不是内容或二进制表示。请参阅[Python 如何比较字符串和 int？](https://stackoverflow.com/questions/3270680/how-does-python-compare-string-and-int)

# php - 使用未知网址刷新网站

> ID：15015243
> 
> 赞同：-3
> 
> 时间：2013-02-22T01:14:13.957
> 
> 标签：php, redirect, refresh

我正在尝试将刷新用作重定向功能，因为标头由于某种原因不起作用。这是我的一段代码，当我运行它时会刷新循环：

----------不工作 /----------------

```
$url = $_SERVER['REQUEST_URI'];
$url = substr($url, 10); //cuting url to "index.php?site=page"
echo '<META HTTP-EQUIV="Refresh" Content="0; URL='.$url.'">'; 
```

- - - - - 在职的 / - - - - - - - -

```
$url = 'index.php?site=page';
echo '<META HTTP-EQUIV="Refresh" Content="0; URL='.$url.'">'; 
```

----------全功能 /----------------

```
elseif($action=="nfvi") {
        safe_query("UPDATE ".PREFIX."nfv SET nfv=nfv+1");
    $url = $_SERVER['REQUEST_URI'];
    $url = substr($url, 10);
    echo '<META HTTP-EQUIV="Refresh" Content="0; URL='.$url.'">';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T01:15:58.003

为什么不使用 HTTP 标头？

```
<?php
$url = "http://www.google.com";

header("Location: index.php?site=" . urlencode($url)); /* Redirect browser */

/* Make sure that code below does not get executed when we redirect. */
exit;
?> 
```

[请参阅手册](http://php.net/manual/en/function.header.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T01:16:01.567

您可以使用[CURL](http://php.net/manual/en/book.curl.php)作为客户端启动：

它将平衡 CURL_SET TIMEOUT：`curl_setopt($ch, CURLOPT_TIMEOUT, 3);`

$ch = curl_init(); curl_setopt($ch, CURLOPT_URL, $ping_url); curl_setopt($ch, CURLOPT_RETURNTRANSFER, true ); curl_setopt($ch, CURLOPT_POST, true ); curl_setopt($ch, CURLOPT_POSTFIELDS, trim($request)); $result = curl_exec($ch); curl_close($ch);

如果标题位置不起作用，您是否检查标题中的刷新页面？

```
 header("Refresh: 2;"); 
```

如果标头不起作用，请使用 fsockets 读取数据：

```
$host = 'www.example.com';
$service_uri = '/cgi-bin/processACT';
$vars ='code=22&act=TEST';

$header = "Host: $host\r\n";
$header .= "User-Agent: PHP Script\r\n";
$header .= "Content-Type: application/x-www-form-urlencoded\r\n";
$header .= "Content-Length: ".strlen($vars)."\r\n";
$header .= "Connection: close\r\n\r\n";

$fp = pfsockopen("ssl://".$host, 443, $errno, $errstr);
if (!$fp) {
   echo "$errstr ($errno)<br/>\n";
   echo $fp;
} else {
    fputs($fp, "POST $service_uri  HTTP/1.1\r\n");
    fputs($fp, $header.$vars);
    fwrite($fp, $out);
    while (!feof($fp)) {
    echo fgets($fp, 128);
    }
    fclose($fp);
} 
```

`sleep(3)`而不是用你想要暂停的第二个循环。

为什么在 PHP 中使用元标记而不是标头？

```
header('Location: '.$url); 
```

或完整的标头重定向示例：

```
$host  = $_SERVER['HTTP_HOST'];
$uri   = rtrim(dirname($_SERVER['PHP_SELF']), '/\\');
$extra = 'mypage.php';
header("Location: http://$host$uri/$extra");
exit; 
```

# python - 想要围绕大列表的最大值制作更小的列表

> ID：15015245
> 
> 赞同：-3
> 
> 时间：2013-02-22T01:14:36.630
> 
> 标签：python

我想围绕一个大列表的最大值制作一个较小的列表。如何使用 python 有效地做到这一点。

```
tmp=[11, 22, 13, 45 ,21, 56, 26, 9, 10, 89, 77, 34, 91, 65, 67] 
max_val=max(tmp) 
max_index=tmp.index(max_val) 
print max_index,i,max_val 
```

在这个列表中，索引和最大值是 13 和 91。我想要一个围绕宽度为 2 的索引 13 的列表，即 [77, 34, 91, 65, 67]

最佳修行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T01:27:06.650

```
>>> tmp = [11, 22, 13, 45 ,21, 56, 26, 9, 10, 89, 77, 34, 91, 65, 67]
>>> idx = tmp.index(max(tmp))
>>> tmp[idx-2:idx+3]
[77, 34, 91, 65, 67] 
```

# c# - C# 变量获取器/设置器

> ID：15015246
> 
> 赞同：3
> 
> 时间：2013-02-22T01:14:44.643
> 
> 标签：c#

我正在尝试为外部程序创建一种简单的方法来获取/设置我的类中的变量。我所拥有的是一个具有多个变量的类，例如：

```
class myClass
{
    public int one
    {
        get{ /* get code here */ }
        set{ /* set code here */ }
    }
} 
```

而不仅仅是变量“一个”，我有接近 100 个变量。所有设置都使用相同的方式获取和设置代码。我想要的是一种获取和设置变量的简单方法。示例：不必这样做：

```
myClass c = new myClass();
c.one = 5; 
```

我想找到一种方法来做类似的事情：

```
myClass c = new myClass();
c.setVariable("variableName", value); 
```

让“variableName”文本来自枚举列表是理想的，以便可以像这样引用它们：

```
c.setVariable(enumName.varName, value); 
```

我不确定如何去做，或者是否有可能。正如我所说，我有近 100 个变量需要自己的 get/set 代码，但出于各种原因，我更喜欢只有一个公共 get 函数和一个公共 set 函数。

由于我认为反射不是很有效，因此我想尽可能避免它。

我在 C# 中看到了其他代码，其中使用了类似的东西：

```
this["variableName"] = value; 
```

但是我似乎也找不到一种方法来完成这项工作......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T01:24:33.040

```
this["variableName"] = value; 
```

您描述的语法仅对字典有效。如果你不想使用反射并且只想要一个 getter 和 setter，你应该使用字典。**编辑**：你知道[lambda 表达式](http://msdn.microsoft.com/en-us/library/bb397687.aspx)吗？它们是内联匿名方法，通过将它们放在另一个字典中，您可以进行验证！像这样的东西：

```
public class MyClass
{
    private readonly Dictionary<String, Object> dictionary;
    private readonly Dictionary<String, Func<Object, bool>> validators;

    public MyClass()
    {
        this.dictionary = new Dictionary<String, Object>();
        this.validators = new Dictionary<String, Func<Object, bool>>();

        // Put the default values in the dictionary.
        this.dictionary["One"] = 10;
        this.dictionary["Another"] = "ABC";

        // The validation functions:
        this.validators["One"] = obj => ((int)obj) >= 0;
        this.validators["Another"] = obj => obj != null;
    }

    public Object this[string name]
    {
        get { return this.dictionary[name]; }
        set
        {
            // This assumes the dictionary contains a default for _all_ names.
            if (!this.dictionary.Contains(name))
                throw new ArgumentException("Name is invalid.");

            // Get a validator function. If there is one, it must return true.
            Func<Object, bool> validator;
            if (validators.TryGetValue(name, out validator) &&
                !validator(value))
                throw new ArgumentException("Value is invalid.");

            // Now set the value.
            this.dictionary[name] = value;
        }
    }
} 
```

关于这段代码的一些注意事项：

*   字典是一个通用对象：*String 和 Object 的字典*，其中`String`是键`Object`的类型，是值的类型。如果您只有一种值（例如整数），那么您应该`Object`在任何地方更改为，例如，`int`.
*   给定一个实例`MyClass myClass`，您可以`myClass["One"] = 20`设置 的值`One`。
*   如果您（无意中）尝试使用不存在的名称（`var value = myClass["DoesNotExist"]`）获取值，您将得到一个异常。您可以更改它以返回默认值或完全执行其他操作。
*   要使用`enum`，请创建枚举并指定其类型，而不是`String`在代码中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T01:41:17.577

另一种解决方案可以通过这种方式使用反射：

```
public object this[string name] {
    get { return this.GetType().GetProperty(name).GetValue(this, null); }
    set { this.GetType().GetProperty(name).SetValue(this, value, null); }
} 
```

或者：

```
public void SetVariable(string name, object value){
    this.GetType().GetProperty(name).SetValue(this, value, null); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T01:37:50.587

我不会对设计发表评论，但实现起来相当简单。你根本不需要反思，你只需要大量的打字。一般来说，你想要的基本上是这样的：

```
public class MyClass
{
    public enum Variables {
        one,
        two
    }

    private int one {
        get { /* get; */ }
        set { /* set; */ }
    }

    private int two {
        get { /* get; */ }
        set { /* set; */ }
    }

    public object getVariable(Variables v) {
        switch(v) {
            case Variables.one: return one;
            case Variables.two: return two;

            default: throw new InvalidArgumentException("v");
        }
    }

    public void setVariable(Variables v, object value) {
        switch(v) {
            case Variables.one: one = (int)value; return;
            case Variables.two: two = (int)value; return;

            default: throw new InvalidArgumentException("v");
        }
    }
} 
```

因为，你没有类型检查，所以很多事情都会在你的脸上爆炸。另一种使用反射而不造成太大性能压力的方法是静态编译 enum->getter 和 enum->setter 方法的字典（不仅仅是 MethodInfo，而是一个委托）。这将导致启动性能下降。但是在获取和设置值时，它不会（afaik）损害性能（特别是）。

**[编辑]**
上面也可以这样实现：

```
public object this[Variables v]
{
    get { return getVariable(v); /* or move implementation here */ }
    set { serVariable(v, value); /* or move implementation here */ }
} 
```

这将使您能够编写（例如）`myObject[MyClass.Variables.one] = 5`。

**[编辑 2]**
以下[内容](http://monobin.com/1550/)已经过测试。当面对正常反射（或就此而言的巨大开关）时，我不知道性能。

# java - 在数组的开头获取 NullPointerException？

> ID：15015248
> 
> 赞同：0
> 
> 时间：2013-02-22T01:15:10.060
> 
> 标签：java, arrays, nullpointerexception

我不确定为什么当我打印出来时，我的数组开头会出现 nullPointerException（请参阅最后一个 println）。我以前见过 nullPointException 但它位于数组的末尾。我不明白为什么是一开始。另外，如果有人可以帮助摆脱异常，我将不胜感激。

```
import java.io.File;
import java.io.FileNotFoundException;
import java.util.Scanner;

public class Main {
    public static void main(String[] args) throws FileNotFoundException {

        File file = new File("Book.txt");
        Scanner sc = new Scanner(file);

        Book[] books = new Book[20];

        int x = 0;
        while(sc.hasNext()){
            int id, year;
            String name, author;

            //scan data for each book and create new book object
            id = Integer.valueOf(sc.next());
            year = Integer.valueOf(sc.nextLine().trim());
            name = sc.nextLine();
            author = sc.nextLine();

            books[x] = new Book(id, name, year, author);
            x++;
        }

        for(Book b : books){
            System.out.println(b.toString());
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T01:21:34.830

您的程序非常脆弱。它期望文件正好有 20 本书：如果输入的书少于 20 本书，您将在打印循环中得到一个空指针异常；如果输入超过 20 本书，在阅读循环中会出现数组索引越界异常。

您应该使用简单的 更改`for-in`循环`for`，并为从文件中读取的书籍数量添加限制，如下所示：

```
while(sc.hasNext() && x < 20) {
    ...
}
for (int i = 0 ; i != x ; i++) {
    System.out.println(books[i].toString());
} 
```

如上所述重组的程序的宽容度要小得多：它不会在输入少于 20 本书时崩溃，而是会打印与文件中一样多的条目。当文件中的书籍多于您预先分配的数组中的书籍时，第 20 本书之后的书籍将被悄悄地忽略。

# javascript - jQuery - 检测字符串中特定长度的单词？

> ID：15015250
> 
> 赞同：-5
> 
> 时间：2013-02-22T01:15:33.310
> 
> 标签：javascript, jquery

在 jQuery 中，是否有一种更简单的方法来检测字符串中是否包含 X 个字符或更少的单词？我将编写一些 Javascript 循环遍历字符串中的每个单词，检查每个单独的长度，但想知道是否有一个函数，或者一个更简单的方法，可能在 jQuery 中，在我浪费时间和行之前。

这就是我要做的，一定有更简单的方法，可能是单线？

```
var bad_words = 0;
var search_str = $('#search_str').split(' ');
$.each(search_str, function(index, chunk) {
    if (chunk.length < 4) {
        bad_words++;
    }
}
if (badwords > 0) {
    alert("Words with 3 or less characters found.");
} 
```

我不是在找人来做我的工作，我只是想知道这是否可能，如果可以，我应该看什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T01:20:47.643

```
if (str.match(/\b\w{1,3}\b/g)) {
  // string has words with 3 chars or less
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T01:28:24.413

```
/\b\w{1,3}\b/.test(str) 
```

只需返回`true`or `false`，如您所愿。

# python - django - 模型 unicode() 显示外键对象属性

> ID：15015253
> 
> 赞同：12
> 
> 时间：2013-02-22T01:15:45.493
> 
> 标签：python, django, django-models, python-2.7, django-admin

我是 Django 新手，有一个应用程序模型和一个环境模型。环境将应用程序作为外键。我知道我需要为模型的人类可读表示编写一个**unicode** () 方法，但是有没有办法从外键对象中获取一个属性以显示为字符串的一部分？

```
class Application(models.Model):
    app_id = models.IntegerField(primary_key=True)
    app_name = models.CharField(max_length=200)
    app_description = models.CharField(max_length=2000, blank=True)

    def __unicode__(self):
        return self.app_name

class Environment(models.Model):
    app_id = models.ForeignKey(Application, db_column='app_id')
    environ_id = models.IntegerField(max_length=6)
    environ_name = models.CharField(max_length=200)

    def __unicode__(self):
        return '%s %s' % (application__app_name, self.environ_name) 
```

我希望将环境模型表示为“app_name environ_name”。

更新：我想将环境模型显示为“app_name environ_name”的原因，以便用户在管理页面上输入数据时更清楚。例如，app_name 将是“NavSystem”，environ_name 将是“DEV1”，因此将环境模型表示为“NavSystem DEV1”比仅“DEV1”更有用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-22T01:41:47.003

您确实可以通过使用“点”语法来引用属性。这是你想要的：

```
def __unicode__(self):
   return '%s %s' % (self.app_id.app_name, self.environ_name) 
```

# drupal - 获取字段的平均值

> ID：15015257
> 
> 赞同：0
> 
> 时间：2013-02-22T01:16:07.407
> 
> 标签：drupal

我在 Drupal 中使用整数字段作为审查系统。

我想将特定整数字段的所有值（全局）相加，然后将其除以字段数以获得平均值。我可以得到一个节点的总整数值，但我想得到具有特定节点引用的所有节点的值。

我尝试使用计算字段和视图 php 寻找解决方案，但我的 php 技能有限。

任何帮助将非常感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T01:19:01.757

你可能正在寻找这个：

[https://drupal.org/node/1308114](https://drupal.org/node/1308114)

# wif - Web 客户端、ASP.Net MVC 4 和 ASP.Net WebAPI 之间基于声明的安全性

> ID：15015261
> 
> 赞同：1
> 
> 时间：2013-02-22T01:16:35.863
> 
> 标签：wif, asp.net-web-api, claims-based-identity

鉴于以下各方：

基于浏览器的客户端
ASP.Net MVC 4 Web 应用程序
ASP.Net Web API 服务
Security Token Service (STS) 即 Thinktecture IdentityServer
（注意：Web 应用程序和 WebAPI 服务位于不同的盒子上）

我想得到一个类似于这个工作的流程：

用户导航到 WebApp，应用程序在请求中看不到有效令牌，并重定向用户以通过 STS 进行身份验证。用户登录到 STS 并在成功验证后重定向回 WebApp。WebApp 看到有效的令牌并授予用户访问权限。用户尝试在 WebApp 上执行需要对 WebAPI 进行服务调用的操作。WebApp 在服务请求中传递用户令牌。WebAPI 服务看到令牌，禁止访问并返回错误，或代表用户授权请求并返回结果。

此外，我希望客户端能够通过 AJAX 调用直接对 WebAPI 服务进行服务调用。

到目前为止，我可以使用 Web 应用程序重定向到 STS 并返回，但是如何将令牌从 Web 应用程序传递到 Web API 服务？

另外，如何让 JavaScript 客户端在 AJAX 调用中传递令牌？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T06:24:08.493

好吧 - 如果您使用 SAML，您可以立即执行此操作。

网站登录返回一个 SAML 令牌，saveBootstrapContext 功能保存该令牌以供以后使用 - 您可以将其转发到您的 Web api。

在 Web API 中，您可以使用 SAML 使用 thinktecture 身份模型。对于 AJAX 调用，提供一种从 JS 检索 SAML 令牌并将其在授权标头上发送到 Web API 的方法。

这不是最优的。但是对于一直执行 JWT（这将是首选方式） - 现在缺少一些位（例如 IdSrv 仅支持对称签名，我的 JWT 处理程序不支持引导上下文、MS JWT 处理程序和对称签名通过配置也是一个问题）。

我正在做这件事。但就目前而言，这种情况有一些粗糙的边缘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T17:34:46.253

如果两个服务都在同一个域中，您可以使用 cookie。

# java - 如何在jni中创建一个CBTHook，然后在回调函数中调用一个java函数？

> ID：15015263
> 
> 赞同：0
> 
> 时间：2013-02-22T01:16:42.577
> 
> 标签：java, c, callback, java-native-interface

更新 (23/02/13)：单独测试了 Hook，它可以工作。问题是您不能`printf`在 .dll 中使用，除非您将控制台与其关联。

相反，我将每个替换`printf`为`fprintf`并将输出写入日志文件。

更新（22/02/13）：`clazz`以正确的方式初始化变量。

我想在我的 java 应用程序中调用一个方法，如果有任何桌面窗口是`created/activated/destroyed`.

我编写了一个带有两个本机函数的简单 Java 类：

```
public class Hook {

public Hook(){}

public void setstatus(){
    System.out.println("status set");
}

public native void starthook();
public native void stophook();
} 
```

在 CI 中写道：

```
#include "Hook.h"
#include <windows.h>
#include <jni.h>
#include <stdio.h>

#pragma data_seg("Shared")
HHOOK   g_hHook  = NULL;
FILE *pFile=NULL;
//do mid, clazz and jvm have to be shared ?
//jmethodID mid=NULL;
//jclass clazz=NULL;
//static JavaVM *jvm = NULL;

#pragma data_seg()

HINSTANCE   g_hInstance = NULL;

BOOL APIENTRY DllMain( HANDLE hModule, DWORD  ul_reason_for_call, LPVOID lpReserved ){
    switch (ul_reason_for_call){
    case DLL_PROCESS_ATTACH:
        g_hInstance  = (HINSTANCE) hModule;
        break;

    case DLL_THREAD_ATTACH:  break;
    case DLL_THREAD_DETACH:  break;
    case DLL_PROCESS_DETACH: break;
    }

    return TRUE;
}

LRESULT CALLBACK CBTProc(int nCode, WPARAM wParam, LPARAM lParam){
    if (nCode < 0)
        return CallNextHookEx(g_hHook, nCode, wParam, lParam);       
    /*
    JNIEnv *env;
    int res =(*jvm)->AttachCurrentThread(jvm,(void **)&env, NULL);
        if(res<0){
            fprintf(pFile,"AttachCurrentThread failed\n");
            return 0;
        }
    */

    HWND hWnd = (HWND)wParam;
    if (!hWnd){
        fprintf(pFile,"hWnd==NULL\n");
        //(*jvm)->DetachCurrentThread(jvm);
        return 0;
    }
    if (nCode == HCBT_ACTIVATE){            
        // is printed
        fprintf(pFile,"activated\n");
        // isn't called
        //(*env)->CallVoidMethod(env, clazz, mid);
        // Nothing is logged
        //if((*env)->ExceptionOccurred(env))
        //      (*env)->ExceptionDescribe(env);
    }
    else if (nCode == HCBT_DESTROYWND){
        fprintf(pFile,"destroyed\n");
    }
    else if (nCode == HCBT_CREATEWND){
        fprintf(pFile,"created\n");
    }
    //(*jvm)->DetachCurrentThread(jvm);
    return 0;
}

JNIEXPORT void JNICALL Java_Hook_starthook(JNIEnv *e, jobject o){
/*
if(jvm==NULL)
    if(((*e)->GetJavaVM(e,&jvm))<0){
        printf("GetJavaVM failed\n");
        return;
        }
    jclass localRef = (*e)->GetObjectClass(e, o);
        clazz = (*e)->NewGlobalRef(e,localRef);
    if(clazz==NULL){
        printf("GetObjectClass failed\n");
        return;
    }
    mid = (*e)->GetMethodID(e, clazz, "setstatus", "()V");
    if(mid==0){
        printf("GetMethodID failed\n");
        return;
    }
*/
    pFile = fopen("C:/workspace/CBTHook/log.txt","a");
    g_hHook      = SetWindowsHookEx(WH_CBT, (HOOKPROC) CBTProc, g_hInstance, 0);
    printf("Hook started\n");
}

JNIEXPORT void JNICALL Java_Hook_stophook(JNIEnv *e, jobject o){
    if (g_hHook){
        UnhookWindowsHookEx(g_hHook);
        g_hHook = NULL;
        //(*e)->DeleteGlobalRef(e,clazz);
    }
    if(pFile)
        fclose(pFile);
    }
    printf("Hook stopped\n");
} 
```

有效，`CBTHook`但我不能`setstatus`从函数内部调用`callback`函数。

```
(*env)->CallVoidMethod(env, clazz, mid); 
```

不做任何事情，也没有抛出异常。

我需要做什么 ？

此外，我是否必须共享全局变量`mid`：`clazz`和`jvm`？中的每个变量

```
#pragma data_seg("SHARED") 
```

段是“共享的”，这意味着它们不是特定进程所独有的。

如果有必要，附加/分离其他线程的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:37:31.570

*鉴于对“不接收消息*”的确切含义缺乏明确的解释，我推测您`CBTProc` **正在被调用**，而您只是没有收到 JVM 回调。*如果`CBTProc`没有被调用，那么它根本不是 JNI 问题*。

你做的几乎是对的。`jmethodID`在线程之间和 JNI 调用之间是可重用的，因此它可以像你一样被缓存。你进入`JavaVM*`和`starthook()`缓存它的方式也是正确的。你只是错了`jclass clazz`。您尝试将其缓存，`starthook()`然后尝试不仅在不同的调用中使用它，而且很可能甚至在不同的线程中使用它。您从中获得的`GetObjectClass`是*本地引用*，这意味着在当前 JNI 调用退出回 JVM 后，无法确保其有效性。它可能有效，但你不能依赖它。当从不同的线程使用时，它*肯定*不会起作用。您必须进行*全局参考*：

```
jclass localRef = (*e)->GetObjectClass(e,o);
clazz = (*e)->NewGlobalRef(e,localRef); 
```

然后你可以`clazz`按照你已经`CBTProc`注释掉的方式使用。剩下的唯一工作是`stophook`：

```
(*e)->DeleteGlobalRef(e,clazz); 
```

以免泄漏。

**底注**：我不明白您所说的“*共享全局变量*”是什么意思。

# java - 如何解决 Selenium 中的库问题？

> ID：15015264
> 
> 赞同：0
> 
> 时间：2013-02-22T01:16:49.767
> 
> 标签：java, android, selenium

我尝试在我的应用程序中使用 Selenium，因此我已将库**selenium-java-2.30.0.jar 添加**到构建路径，并将以下导入添加到活动类中：

```
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.android.AndroidDriver; 
```

然而; 每当我尝试在模拟器（avd 2.2 和 4.2）中运行应用程序时，我都会收到以下错误：

```
[2013-02-21 19:03:46 - xxxx] The library 'selenium-java-2.30.0.jar' contains native libraries that will not run on the device.
[2013-02-21 19:03:46 - xxxx] The following libraries were found:
[2013-02-21 19:03:46 - xxxx]  - org/openqa/selenium/firefox/amd64/libibushandler.so
[2013-02-21 19:03:46 - xxxx]  - org/openqa/selenium/firefox/amd64/x_ignore_nofocus.so
[2013-02-21 19:03:46 - xxxx]  - org/openqa/selenium/firefox/x86/libibushandler.so
[2013-02-21 19:03:46 - xxxx]  - org/openqa/selenium/firefox/x86/x_ignore_nofocus.so 
```

并取消发射。我已经清理了项目，但仍然收到相同的消息。这是模拟器问题还是我使用了错误的库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T03:34:49.603

我已经找到了解决方案。[我没有使用http://code.google.com/p/selenium/downloads/list](http://code.google.com/p/selenium/downloads/list)的下载部分中提供的**selenium-java-2.30.0.jar** ，而是去了 Android SDK 管理器并从那里安装了适当的库。

在 Eclipse 中转到 Window -> Android SDK Manager -> 选择：Available packages → Extras → Google → WebDriver

安装 GoogleWebDriver 后，进入*android/sdk/extras/google/webdriver/*目录，找到并复制**android_webdriver_library.jar**库并将其粘贴到项目的 lib 文件夹中。之后，您可以导入前面提到的语句并使用 Selenium Web 驱动程序类。

# javascript - 使用 Extjs (NON sencha touch) api 时检测方向变化

> ID：15015266
> 
> 赞同：1
> 
> 时间：2013-02-22T01:16:59.037
> 
> 标签：javascript, extjs

我知道有一个orientationChange 监听器可用于触摸视口。但是，在常规 ext js（非触摸）版本的视口中没有可用的orientationChange 侦听器。

在这种情况下如何检测方向变化......

感谢
nohsib

# php - 将 Java.util.date 转换为用户友好的日期

> ID：15015267
> 
> 赞同：0
> 
> 时间：2013-02-22T01:17:02.700
> 
> 标签：php, date, converter

我想`java.util.Date`使用 PHP 将 a 转换为对用户更友好的东西。有没有办法使用 PHP 做到这一点？

我尝试做类似的事情：

```
$created = date("F j, Y, g:i a", $issue_fields['created_date']); 
```

但它抱怨一个看起来像这样的错误：

```
Notice: A non well formed numeric value encountered in C:\wamp\www\PHP\get_tickets.php on line 49 
```

不幸的是，我无法控制收到的日期格式。格式如下：

```
2013-01-22T11:46:24.000-0800 
```

我想要更像 2011 年 9 月 24 日上午 6:39 的内容。这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T01:28:10.563

看起来给定的日期是 ISO 8601 格式。您应该能够使用 strtotime 将其转换为日期对象：

```
echo date("F j, Y, g:i a", strtotime('2013-01-22T11:46:24.000-0800')); 
```

这产生：2013 年 1 月 22 日，上午 11:46

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T01:25:02.417

您可以使用[date_parse_from_format()](http://www.php.net/manual/en/function.date-parse-from-format.php)。

# iphone - 运行 Appdelegate.m 的应用程序错误（sigabrt 错误）

> ID：15015270
> 
> 赞同：0
> 
> 时间：2013-02-22T01:17:36.213
> 
> 标签：iphone, ios, objective-c, appdelegate

我收到一个 SIGABRT 错误，我真的很生气，你能帮帮我吗？我知道该错误是由于应用程序委托中的某些内容造成的。我浏览了几次代码并检查了情节提要，但那里没有问题。甚至 Parse 也在正确编译。

```
#import "AppDelegate.h"
#import <Parse/Parse.h>

@implementation AppDelegate 

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
//  Parse Initialization

.....

//Custom Stuff Initialization

[[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"navigationBar"] forBarMetrics:UIBarMetricsDefault];

// Assign tab bar item with titles
UITabBarController *tabBarController = (UITabBarController *)self.window.rootViewController;
UITabBar *tabBar = tabBarController.tabBar;
UITabBarItem *tabBarItem1 = [tabBar.items objectAtIndex:0];
UITabBarItem *tabBarItem2 = [tabBar.items objectAtIndex:1];
UITabBarItem *tabBarItem3 = [tabBar.items objectAtIndex:2];
UITabBarItem *tabBarItem4 = [tabBar.items objectAtIndex:3];

tabBarItem1.title = @"Dashboard";
tabBarItem1.titlePositionAdjustment = UIOffsetMake(0.0, -5.5);
tabBarItem2.title = @"Interactions";
tabBarItem2.titlePositionAdjustment = UIOffsetMake(0.0, -5.5);
tabBarItem3.title = @"Messages";
tabBarItem3.titlePositionAdjustment = UIOffsetMake(0.0, -5.5);
tabBarItem4.title = @"Me";
tabBarItem4.titlePositionAdjustment = UIOffsetMake(0.0, -5.5);

[tabBarItem1 setFinishedSelectedImage:[UIImage imageNamed:@"pen_sIMG.png"] withFinishedUnselectedImage:[UIImage imageNamed:@"pen_usIMG.png"]];
[tabBarItem2 setFinishedSelectedImage:[UIImage imageNamed:@"comment_sIMG.png"] withFinishedUnselectedImage:[UIImage imageNamed:@"comment_usIMG.png"]];
[tabBarItem3 setFinishedSelectedImage:[UIImage imageNamed:@"message_sIMG.png"] withFinishedUnselectedImage:[UIImage imageNamed:@"message_usIMG.png"]];
[tabBarItem4 setFinishedSelectedImage:[UIImage imageNamed:@"star_sIMG.png"] withFinishedUnselectedImage:[UIImage imageNamed:@"star_usIMG.png"]];

// Change the tab bar background
UIImage* tabBarBackground = [UIImage imageNamed:@"tabBarBg-icns.png"];
[[UITabBar appearance] setBackgroundImage:tabBarBackground];
[[UITabBar appearance] setSelectionIndicatorImage:[UIImage imageNamed:@"tabBarBg-selc.png"]];

// Change the title color of tab bar items
UIColor *titleNormColor = [UIColor colorWithRed:137/255.0 green:137/255.0 blue:137/255.0 alpha:1.0];
[[UITabBarItem appearance] setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:
                                                   titleNormColor, UITextAttributeTextColor,
                                                   nil] forState:UIControlStateNormal];

UIColor *titleHighlightedColor = [UIColor colorWithRed:73/255.0 green:130/255.0 blue:202/255.0 alpha:1.0];
[[UITabBarItem appearance] setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:
                                                   titleHighlightedColor, UITextAttributeTextColor,
                                                   nil] forState:UIControlStateHighlighted];

return YES;
}

@end 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-22T01:47:46.230

您的代码的以下行是错误的

```
UITabBarController *tabBarController = (UITabBarController *)self.window.rootViewController; 
```

因为**`self.window.rootViewController;`**只会返回**UIViewController**。不是**UITabBarController**

正确的代码是

```
 UITabBarController *tabBarController = self.window.rootViewController.tabBarController; 
```

# javascript - JS，HTML5 - 在画布上添加文本输入值作为 fillText

> ID：15015273
> 
> 赞同：1
> 
> 时间：2013-02-22T01:17:47.073
> 
> 标签：javascript, html

我正在尝试使用 HTML5 画布，我只是在制作一个有趣的小网络应用程序，但我被卡住了。

我希望用户在文本框中输入文本，然后当他们按下按钮时，该文本会使用 TextFill 添加到画布中。

这是我所拥有的：

```
 var canvas = document.getElementById('myCanvas');
        var ctx = canvas.getContext('2d');
        var words = document.getElementById("words").value;
        var x = 80;
        var y = 110;

        ctx.font = "bold 36px sans-serif";
        ctx.fillStyle = "blue";
        $('#entertext').click(function(){
            ctx.fillText(words, x, y);
        }); 
```

所以我显然有一个画布，myCanvas，和一个id=words的文本输入框，以及一个id=entertext的按钮...

如果你想完全重做我的代码，那完全没问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T03:22:24.947

从评论扩展，我*猜*你是`words`在一个“静态”上下文中分配的，比如`window.onload`.

而且因为是一个字符串，它是**通过 value**`document.getElementById("words").value`分配/复制的，所以很可能是一个空字符串，不管*后来*变成什么。**`words``document.getElementById("words").value`**

 ***所以解决方案要么赋值`words`为`document.getElementById("words")`，所以它是一个对象*“指针”*，或者获取`click`事件内部的值：

```
$('#entertext').click(function(){
    ctx.fillText($("#words").val(), x, y);
}); 
```

[工作演示](http://jsfiddle.net/fmnBa/)。***

# python - 操作后在列表内排序

> ID：15015275
> 
> 赞同：0
> 
> 时间：2013-02-22T01:18:24.623
> 
> 标签：python, list

在对列表中的 2 个数字求和并根据该总和进行排序后，我需要对列表进行排序。列表如下..任何建议将不胜感激。

```
myList = [['X5QR76', 3, 7], ['G77652', 1, 5], ['GT1885', 5, 2], ['WB2013', 5, 2], ['FINBOX', 2, 9]] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T01:19:29.923

```
sorted(myList,key=lambda x:x[1]+x[2]) 
```

# c - C 从命令提示符中接受参数作为条件

> ID：15015279
> 
> 赞同：0
> 
> 时间：2013-02-22T01:18:39.573
> 
> 标签：c, multithreading, argv, argc

我对C完全陌生......好吧。我很了解 C++。我正在尝试为我的作业运行一个多威胁程序，其中一个要求是让用户在命令提示符下输入他的命令。基本上我要问的是，我如何设置 int main 以便它可以不断地从命令提示符获取输入（所以我可以启动新线程）而不停止，以及如何进行比较，例如用户是否按下'E ' 做这个，如果他按 F 做那个等等。我猜 argc 根本不重要，因为我不知道用户要输入多少命令。最好的解决方法是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T01:23:12.413

当程序启动时，命令行参数被传递给`int main(int argc, char **argv)`并且这些参数不会改变（除非程序修改它们）。

之后，程序可以从标准输入中读取命令，例如`E`for 'do this' 和`F`for 'do that'。除非您采取特定于平台的步骤使其行为不同，否则输入将不会提供给您的程序，直到用户在键入命令后点击返回。

因此，如果提供了命令行参数，您可以处理它们。完成此操作后，您可能会进行交互并等待用户的更多输入。

多线程与此关系不大。您可能需要一个线程来从用户那里读取数据（否则，某人或某物会感到困惑），但是线程之间的通信是一个完全独立的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T01:23:17.250

让主线程负责 i/o。

*   向用户打印一个提示，要求从主线程输入。

*   将用户输入从主线程传递到工作线程。

*   重复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T01:23:26.100

用户界面线程：

```
void *trd_func(void *p) {
  while (1) {
    int c = getchar();
    switch(c) {
        case 'E':
             set_some_flag('E');
             break;
        default: break;
    }
  }
  return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T01:28:27.533

如果你真的想通过做你想做的事来学习，

您应该开始寻找有关文件流和 ttys/规范输入的信息。

当您了解它的工作原理后，您将能够使用 read() 函数，并做任何您想与用户交互的事情（甚至做一个 shell）。

我可以向你保证，你会学到很多关于 I/O 文件流的有趣的东西。

但如前所述，您也可以使用 getchar()。

# c - Text::JaroWinkler::strcmp95 的第三个参数是什么？

> ID：15015280
> 
> 赞同：0
> 
> 时间：2013-02-22T01:18:48.380
> 
> 标签：c, string, perl, perl-module, jaro-winkler

我对用 Perl 编写的用于计算两个字符串之间的距离（或相似性）的 Jaro-Winkler 模块感兴趣：

[http://search.cpan.org/~scw/Text-JaroWinkler-0.1/JaroWinkler.pm](http://search.cpan.org/~scw/Text-JaroWinkler-0.1/JaroWinkler.pm)

我不清楚该函数的语法；我找不到任何明确的文件。

这是示例代码：

```
#!/usr/bin/perl

use 5.10.0;
use Text::JaroWinkler qw( strcmp95 );
print strcmp95("it is a dog","i am a dog.",11); 
```

11到底代表什么？我认为它是一个长度。哪个长？我要检查的字符数量的长度？必须在那里吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T03:23:59.823

请参阅[来源](http://cpansearch.perl.org/src/SCW/Text-JaroWinkler-0.1/JaroWinkler.pm)以获取问题的答案。它包含这一行：

```
$ying = sprintf("%*.*s", -$y_length, $y_length, $ying); 
```

所以`$y_length`被用来重新格式化字符串，必要时填充它们并将它们修剪成相同的长度。然后将这些等长的字符串输入到实际的比较函数中。这表明 Alex 是正确的，并且`max(length $ying, length $yang)`在大多数情况下给出一个长度会给出最好的结果。

阅读源代码还表明，如果您未能提供`$y_length`，则不会提供默认值。因此，您将比较空字符串和空字符串。那些应该有一个很短的JW距离。

# oracle - 插入触发器之前的 ORacle

> ID：15015285
> 
> 赞同：-3
> 
> 时间：2013-02-22T01:19:10.947
> 
> 标签：oracle, plsql

```
 CREATE OR REPLACE TRIGGER OBU
 BEFORE INSERT ON BOOKING
 REFERENCING NEW AS n
    FOR EACH ROW
 BEGIN
 INSERT INTO BOOKINGLOG VALUES(n.HOTELID,n.ROOMNO,n.GUESTID,n.STARTDATE,n.ENDDATE,'SYSTEM',SYSDATE);
 ENG;
 .
 / 
```

当我尝试执行它时，我收到此错误：

```
LINE/COL ERROR
-------- -----------------------------------------------------------------
3/4      PLS-00103: Encountered the symbol "end-of-file" when expecting
         one of the following:
         ( begin case declare end exception exit for goto if loop mod
         null pragma raise return select update while with
         <an identifier> <a double-quoted delimited-identifier>
         <a bind variable> << continue close current delete fetch lock
         insert open rollback savepoint set sql execute commit forall
         merge pipe purge 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T01:20:33.977

您可能想更改 ENG；结束；

并且，失去那个和/之间的句点。

要提升评论以回答：INSERT 语句中引用表值的值需要以冒号 (:) 为前缀。所以，n.HOTELID 应该是 :n.HOTELID 等。

# mysql - 如何按小时和 30 分钟分组

> ID：15015286
> 
> 赞同：0
> 
> 时间：2013-02-22T01:19:17.000
> 
> 标签：mysql

我有一个日期时间格式的时间列表

```
datetime action
11:13:40 eat
12:33:40 sleep
14:44:40 walk
14:55:40 eat
14:59:40 call 
```

我想分组

```
11:00am eat
12:30pm eat
2:30pm walk
2:30pm eat
2:30pm call 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T02:57:07.480

这是一种方法：

```
SELECT DATE_FORMAT(`datetime`,IF(MINUTE(`datetime`)<30,'%l:00%p','%l:30%p'))
     , action
  FROM ...
 ORDER BY 1 
```

稍微放松一下：我们使用 MINUTE 函数从日期时间值中提取分钟部分。如果小于 30，那么我们指定“00”作为分钟部分，否则，我们指定“30”。剩下的只是格式化。 `%l`给我们从 1 到 12 的小时值，没有零填充。得到我们的`%p`'AM'或'PM'值。（如果您需要小写，那么您可以将整个 DATE_FORMAT 表达式包装在 LOWER() 函数中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T01:21:33.707

```
SELECT REPLACE(DATE_FORMAT(datetime,'%h %p'),
               ' ' ,
               IF(CEIL(MINUTE(datetime)/30)*30=60,':30 ',':00 '))  AS hour_time
       , action    
FROM table1
GROUP BY 1 
```

# javascript - jQuery . 是否可以隐藏动态生成的对象（tr）

> ID：15015289
> 
> 赞同：0
> 
> 时间：2013-02-22T01:19:25.610
> 
> 标签：javascript, jquery, html

这是我要生成的脚本

```
var milliseconds = new Date().getTime();
$('#users-table > tbody:first').append("< tr id='"+milliseconds.toString()+"'><td>newuser</td>  <td><a href=\"javascript:remove_user('"+milliseconds.toString()+"')\"  ><i class='icon-trash'></i></a></td>   </tr>"); 
```

而我用这段代码来隐藏

```
function remove_user(tr_id){
        $("#"+tr_id).hide();

 } 
```

但它似乎无法正常工作（在我点击图标后它应该被隐藏。但新用户仍然出现）。我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T01:26:38.240

你的空间`tr`正在扔东西。删除它，它会工作。

[jsFiddle 不工作](http://jsfiddle.net/fcGHD/1/)

[jsFiddle工作](http://jsfiddle.net/fcGHD/)

问题似乎在于 jQuery 解析 HTML：

```
$("< tr><td></td></tr>")[0].tagName //TD instead of TR 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T01:26:41.923

在创建它时向 tr 添加一个类。单击按钮时，请使用该类引用 td 并对其应用 display: none 。

```
 var milliseconds = new Date().getTime(); $('#users-table > tbody:first').append("< tr class="mango" id='"+milliseconds.toString()+"'><td>newuser</td> <td><a href=\"javascript:remove_user('"+milliseconds.toString()+"')\" ><i class='icon-trash'></i></a></td> </tr>");
 $("#btn").click(function(){ $("tr.mango").css("display","none"); }); 
```

# perl - 在 URL 中使用 GET 变量发送 POST 请求（使用 LWP::UserAgent）

> ID：15015296
> 
> 赞同：0
> 
> 时间：2013-02-22T01:20:13.747
> 
> 标签：perl, post, get, lwp, lwp-useragent

我必须向还包含 GET 变量（查询字符串）的 URL 发出 POST 请求。

我尝试了以下方法（看起来是最简单/合乎逻辑的方式），但它不起作用：

```
my $ua = LWP::UserAgent->new;
my $res = $ua->post('http://my.domain/index.pl?login=yes', {
    username => $username, 
    password => $password
}); 
```

my.domain/index.pl 确实收到任何请求，但只要我删除查询字符串“？login=yes”，请求就会正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T01:24:45.397

```
my $res = $ua->post('http://my.domain/index.pl?login=yes', {
    username => $username, 
    password => $password
}); 
```

归结为

```
use HTTP::Request::Common qw( POST );

my $req = POST('http://my.domain/index.pl?login=yes', {
    username => $username, 
    password => $password,
});

my $res = $ua->request($req); 
```

通过使用`print $req->as_string();`，您可以看到它完全按照您所说的去做。

```
POST http://my.domain/index.pl?login=yes
Content-Length: 35
Content-Type: application/x-www-form-urlencoded

password=PASSWORD&username=USERNAME 
```

问题在别处。

# ios - 应用程序因 AVAudioSession privateBeginInterruption 而崩溃

> ID：15015300
> 
> 赞同：3
> 
> 时间：2013-02-22T01:20:44.150
> 
> 标签：ios, xcode, avaudioplayer, avaudiosession

我正在设备（音板）上测试我的应用程序，它崩溃了`EXC_BAD_ACCESS`，我使用了断点，错误来自`[AVAudioSession privateBeginInterruption]`

崩溃按照以下模式发生：

1.  应用程序启动，我们看到主菜单
2.  按下主菜单按钮并加载音板视图（按下），此处按下一些按钮并播放声音。
3.  返回主菜单 ( `[self.navigationController popViewControllerAnimated:YES];`)
4.  应用进入后台
5.  当应用程序进入前台并按下音板的菜单按钮时，应用程序崩溃。

我不知道这里发生了什么，我已经安装了 CrashLytics，它只说：

![应用程序崩溃](../Images/b7cf386c08b4e838460c1db131de60c2.png)

也许音频会话从内存中释放并且应用程序尝试访问它并失败？

音频会话在`viewDidLoad`

```
//  Initialize audio session
[[AVAudioSession sharedInstance] setDelegate: self];
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error: nil];

UInt32 audioRouteOverride = kAudioSessionOverrideAudioRoute_Speaker;
AudioSessionSetProperty (kAudioSessionProperty_OverrideAudioRoute,sizeof    (audioRouteOverride),&audioRouteOverride); 
```

在`viewDidUnload`我有

```
[[AVAudioSession sharedInstance] setDelegate: nil]; 
```

有什么提示吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T18:26:59.207

发生崩溃是因为您已在此行中将会话委托设置为您的控制器

```
[[AVAudioSession sharedInstance] setDelegate: self]; 
```

但没有实现所需的委托方法（中断一）

删除委托设置行或实现委托方法以解决崩溃

# google-app-engine - 部署到 Google App Engine 站点时的 TemplateNotFound

> ID：15015305
> 
> 赞同：0
> 
> 时间：2013-02-22T01:21:09.293
> 
> 标签：google-app-engine, jinja2

**更新时间：2 月 22 日**Per Lipis 的请求。我添加了代码来呈现模板。

我在我的网站上开发了一个管理部分，该部分在我的本地环境中运行良好（本地主机：8080）。当我将应用程序部署到我的 appengine 站点`TemplateNotFound`时，当我导航到*http://myapp/myadmin/*时出现错误，它应该会在 admin 目录中获取 default.html 文件。html 文件位于 templates\admin 目录下。

我的模板的文件结构是：

```
--app
  --templates
    --admin
          -default.html 
    -file.html
    -file1.html
    -file2.html 
```

我正在使用以下代码来创建 Jinja 环境：

```
FolderPath = os.path.dirname(os.path.dirname(__file__))
jinja_environment = jinja2.Environment(
    loader=jinja2.FileSystemLoader(
        [
            os.path.join(FolderPath,"templates\\admin"),
            os.path.join(FolderPath,"templates")
        ]
    )
) 
```

**更新——模板渲染代码：**

```
template_values = {}

template = jinja_environment.get_template('default.html')
self.response.out.write(template.render(template_values)) 
```

我假设它是导致问题的“FolderPath”变量，但不是 100% 确定。有没有人遇到过这个问题？

*   语言：python 2.7
*   操作系统：Windows 7
*   IDE：PyCharms 2.7

**错误：**

> default.html Traceback（最近一次调用最后一次）：文件“/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py”，第 1511 行，**调用** rv = self.handle_exception（请求，响应，e）文件“ /python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py”，第 1505 行，**调用** rv = self.router.dispatch(request, response) 文件“/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/ webapp2.py”，第 1253 行，在 default_dispatcher 返回 route.handler_adapter(request, response) 文件“/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py”，第 1077 行，**调用中** return handler.dispatch() File "/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 547, in dispatch return self.handle_exception(e, self.app.debug) File "/python27_runtime/python27_lib /versions/third_party/webapp2-2.3/webapp2.py”，第 545 行，在调度返回方法（*args，**kwargs）文件中“/base/data/home/apps/s~myapp/0-2-5.365473085936457098/ app/controllers/admin.py”，第 42 行，在获取模板 = jinja_environment.get_template('default.html') 文件“/python27_runtime/python27_lib/versions/third_party/jinja2-2.6/jinja2/environment.py”，第 719 行, 在 get_template 返回 self._load_template(name, self.make_globals(globals)) 文件 "/python27_runtime/python27_lib/versions/third_party/jinja2-2.6/jinja2/environment.py",第 693 行，在 _load_template template = self.loader.load(self, name, globals) 文件“/python27_runtime/python27_lib/versions/third_party/jinja2-2.6/jinja2/loaders.py”中，第 115 行，在加载源中，文件名， uptodate = self.get_source(environment, name) File "/python27_runtime/python27_lib/versions/third_party/jinja2-2.6/jinja2/loaders.py"，第 180 行，在 get_source raise TemplateNotFound(template) TemplateNotFound: default.html第 180 行，在 get_source raise TemplateNotFound(template) TemplateNotFound: default.html第 180 行，在 get_source raise TemplateNotFound(template) TemplateNotFound: default.html

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T03:03:29.553

试试`"templates/admin"`。那个反斜杠是 Windows 主义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T07:32:26.067

理想情况下使用 Linux（可能是 Ubuntu 或 Mint）从长远来看它也会让你头疼

# asp.net - 使用 ADO.NET 在 VB 2008 中的不同网页上显示数据库

> ID：15015307
> 
> 赞同：1
> 
> 时间：2013-02-22T01:21:17.170
> 
> 标签：asp.net, mysql, visual-studio-2008, gridview, ado.net

我很难知道我拥有的这个框架是否是在 VB 2008 的 gridview 的表格中显示所有用户及其角色的正确方法。我已经布置好了所有内容，我只需要确保后面的代码是正确的。我有一个带有用户登录名和密码的初始页面，以及一个允许输入正确信息的按钮，它将导致访问数据库并在 gridview 中生成所有用户及其角色的表的下一页。

看看代码，如果这是正确的想法，请告诉我。

```
Dim mySqlConnection As SqlConnection

mySqlConnection = New SqlConnection("Data Source=(local)\SQLExpress;" _
+"Password=myPassword; " _
    +"Persist Security Info=True;" _
    +"User ID=mcobery;" _
    +"Initial Catalog=model;")

Try
    mySqlConnection.Open()
    Console.WriteLine("Opened Connection to {0}",_
        mySqlConnection.ConnectionString)

' Close the connection explicitly
mySqlConnection.Close()
Console.WriteLine("Closed Connection. " _
    +"It is important to close connections explicitly.")

Catch
    Console.WriteLine("Couldn't Open Connection to {0}", _ 
        mySqlConnection.ConnectionString)

End Try 
```

如您所见，这是一个框架，我将填写正确的用户名和密码。

请让我知道这是否是正确的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T02:33:58.823

Hard to know where to start here.

First thing

```
Using myConnection as new SqlConnection(someConnectionString)
  myConnection.Open()
  ...

End Using 
```

When myConnection goes out of scope it will get closed, well actually it will go back in to the connection pool. You need to read up on that.

The GC will tidy up for you, but as basic priniciple, what closes your connection if you get an exception? You said it was very important in your comment.

You create a connection, you do something, you close it, it goes out of scope, so why are you persisting security info?

Don't put your passwords in the code. They should be in the config. In fact all your connection string should. That would also help out, when you want to test in a staging environment. Or when the system boys tell you sql server and IIS are on different machines.

Why are you using sql server security by the way?

How are you going to unit test this?

Keep going there are plenty far more experienced than yourself making worse mistakes than these. If I were you though I'd pick up a best practices book. Some of it will go over your head until you learn a bit more, but get a sense of the dos and don'ts.

# rest - ColdFusion 10：使用新的 REST API 处理和记录错误

> ID：15015308
> 
> 赞同：2
> 
> 时间：2013-02-22T01:21:31.933
> 
> 标签：rest, coldfusion, error-handling, coldfusion-10

我正在使用 ColdFusion 10 的新 REST API： http: [//www.adobe.com/devnet/coldfusion/articles/restful-web-services.html](http://www.adobe.com/devnet/coldfusion/articles/restful-web-services.html)

每当出现异常时，API 都会很好地处理它并自动返回如下内容：

```
HTTP/1.1 500 Internal Server Error
Content-Length: 52
Content-Type: application/json
Date: Fri, 22 Feb 2013 01:07:49 GMT

{"Message":"Element FOO is undefined in ARGUMENTS."} 
```

问题是以下都没有被调用：

*   站点范围的错误处理程序
*   Application.cfc 的 onError

似乎 REST API 处理了错误并且异常没有冒泡。每当发生服务器端错误时，我都喜欢给自己发送一封电子邮件（带有错误详细信息）。关于如何使用新的 REST API 有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:04:18.433

这并不理想，但您可以在每个方法中添加一个 try/catch，以便在出错时向您发送电子邮件，然后重新抛出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-04T16:39:04.863

站点范围的错误处理程序适用于 REST 服务。在调用 REST 服务时，用户可以指定“接受”标头。如果用户将接受标头指定为 xml 或 json，则会捕获错误并将带有错误代码和消息的结构序列化为适当的格式。在这种情况下，不会调用站点范围的错误处理程序。以 JSON 或 XML 格式发送整个 HTML 内容并不好。但是，如果请求的 Content-Type 是 text/html，则会调用站点范围的处理程序并将 HTML 作为响应返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T16:44:20.687

我不确定您使用什么来使用 Web 服务，但假设它是 ColdFusion，您可以使用 cfhttp 及其 throwonerror 属性：

```
<cftry>
    <cfhttp
        url="http://localhost:8500/rest/restapp/crudService/1"
        method="get"
        timeout="5"
        throwonerror="yes" />

    <cfcatch type="Any">
        <!--- email yourself the error details --->
    </cfcatch>
</cftry> 
```

这样，您可以使用 cfcatch 捕获返回的 500 错误，然后通过电子邮件向您自己发送 cfcatch 转储（或者您喜欢通过电子邮件发送错误详细信息）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-10T21:05:49.623

这是固定的，但**仅在 CF11**中可用。

引用：

> 这已在最新的 ColdFusion11 版本中得到修复。

——哈里·克里希纳·卡莱

[https://bugbase.adobe.com/index.cfm?event=bug&id=3506757](https://bugbase.adobe.com/index.cfm?event=bug&id=3506757)

**更新**

CF10 的修补程序将在下一次更新时提供（目标为 2014 年 8 月中旬）

# php - 卷曲和重定向

> ID：15015310
> 
> 赞同：1
> 
> 时间：2013-02-22T01:21:33.737
> 
> 标签：php, curl

我正在使用 php 和 cURL，从 noaa 的网站上提取海洋预报。该脚本运行良好，直到预测区域离岸超过 60 英里。当预测离岸超过 60 英里时，页面会重定向。我的问题是如何获取新网址并仅在新页面上打印我想要的信息。这是我到目前为止所拥有的。它显然不起作用，但我认为它可能有助于展示我想要完成的事情。

```
<?php

$url = "http://forecast.weather.gov/MapClick.php?lat=$a1[d_lat]&lon=-$a1[d_lon]&unit=0&lg=english&FcstType=text&TextType=1";

//unique text to determine start goes here

$start = "</table><table width=";

//insert end text here

$end = "which includes this point<br></td></tr><tr>";

$ch = curl_init();

curl_setopt ($ch, CURLOPT_URL, $url );

curl_setopt ($ch, CURLOPT_HEADER, 0);

curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);

$result = curl_exec ($ch) or die ("Couldn't connect to $url.");

curl_close ($ch);

$startposition = strpos($result,$start);

if($startposition > 0){

$endposition = strpos($result,$end, $startposition);

//add enough chars to include the tag

$endposition += strlen($end);

$length = $endposition-$startposition;

$result = substr($result,$startposition,$length);

echo $result;

}else

//get the new url from headers? This is where I'm Lost...

$url = "";

//unique text to determine start on redirected page 

$start = "</table><table width=";

//insert end text here

$end = "which includes this point<br></td></tr><tr>";

$ch = curl_init();

curl_setopt ($ch, CURLOPT_URL, $url );

curl_setopt ($ch, CURLOPT_HEADER, 0);

curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);

$result = curl_exec ($ch) or die ("Couldn't connect to $url.");

curl_close ($ch);

$startposition = strpos($result,$start);

if($startposition > 0){

$endposition = strpos($result,$end, $startposition);

//add enough chars to include the tag

$endposition += strlen($end);

$length = $endposition-$startposition;

$result = substr($result,$startposition,$length);

echo $result;
 }else

 echo "Sorry Forecast Unavailable";
?> 
```

# java - 我需要一个整数数组并将它们打印为金字塔

> ID：15015315
> 
> 赞同：0
> 
> 时间：2013-02-22T01:22:04.670
> 
> 标签：java, arrays, int

这很简单，但我真的不知道该怎么做。

我已经得到它，所以它可以工作，但它只适用于大小为 6 的数组，我尝试为它编写 for 循环，但我不确定如何每次减少空格数。也许我做错了，但这就是我现在所拥有的。

```
 public static void prettyPrint(int[] numbers) {
    System.out.println("   " + numbers[0]);
    System.out.println("  " + numbers[1] + " " + numbers[2]);
    System.out.println(" " + numbers[3] + " " + numbers[4] + " " + numbers[5]);

} 
```

其中数组编号在上面定义为

```
 static int[] numbers = { 4, 3, 5, 6, 7, 8 }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T02:07:56.967

您可能希望使用循环来实现所需的输出。

首先，想想金字塔结构的本质。

可以在金字塔的第 i 行（从顶部算起）上表示的数字是 i。例如，在金字塔的顶部（即 i=第 1 行），只能显示单个数字。同样在第 5 行，显示 5 个数字。

记住这一点，代码看起来像这样：

```
int n = numbers.length;
int idx = 0;
int numRows = 0;

//First, calculate number of rows that pyramid will have 
while(idx < n){
    numRows++; 
    for(int numInRow=0; numInRow<numRows; numInRow++){
        idx++;
    }
}

//Make the pyramid
idx = 0;
for(int i=1; i <= numRows && idx < n; i++){ //Loop # of lines
    for(int j=0; j < (numRows-i) ; j++){
        System.out.print(" "); //Left pad
    }

    for(int j=0; j<i; j++){         // Add i many numbers only
        System.out.print(numbers[idx++] +" ");  //Print
        if(idx >= n){
            break;  //If index exceeds, break 
        }
    }
    System.out.println();   //New line
} 
```

# functional-programming - 如何实现函数式语言

> ID：15015317
> 
> 赞同：1
> 
> 时间：2013-02-22T01:22:16.387
> 
> 标签：functional-programming, language-design, language-implementation

我正在尝试学习命令式语言和函数式语言之间的区别。
而且，我想了解闭包以及垃圾收集器是如何实现的。所以我决定尝试为函数式语言实现解释器。

由于我不熟悉函数式语言，因此设计一种对我来说太难了。是否有一些关于简单函数式语言的语法和语义的资源？有关如何执行此操作的教程将非常有帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T08:28:36.433

请考虑：

```
Implementing functional languages: a tutorial
Simon Peyton Jones and David Lester. Published by Prentice Hall, 1992. 
```

[可在线获取](http://research.microsoft.com/en-us/um/people/simonpj/papers/pj-lester-book/)，其中涵盖了实现已编译的惰性函数式语言的日益复杂的方法。

跟进[STG 机器论文](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0ahUKEwiTwOHUi6HOAhVL1h4KHQguAHkQFgggMAA&url=http%3A%2F%2Fresearch.microsoft.com%2Fen-us%2Fum%2Fpeople%2Fsimonpj%2Fpapers%2Fspineless-tagless-gmachine.ps.gz&usg=AFQjCNEVonQNBxIuOXqPr7thmoRYXeTgSQ&sig2=n1QUCpGg48MU_egVMIifWg)，描述 GHC 运行时的核心。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-22T01:28:19.677

奇怪的是，有。计算机程序的[结构和解释](http://mitpress.mit.edu/sicp/full-text/book/book.html)这本书有练习，其中 Scheme 是在 Scheme 中实现的。但准备材料不能跳过。您将需要了解它（以及如何使用函数式语言进行编程），尤其是当您在解释器中实现解释器时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T04:30:56.300

你可能比阅读 John Allen 的 Lisp 剖析更糟糕。对于懒惰的语言。

# sorting - 使用 pdf 中的前几行文本批量重命名 pdf

> ID：15015318
> 
> 赞同：0
> 
> 时间：2013-02-22T01:22:26.563
> 
> 标签：sorting, pdf, ocr, batch-processing

我有成千上万的 pdf，它们基本上是来自供应商的采购订单，标题为 20130121.00005.pdf。由于同一家公司的文件夹中有多个采购订单，我想根据供应商对文件进行分组。pdf 是 OCRed，所以我在想如果我可以提取 pdf 的前几行并使用该文本重命名 pdf，我将能够仅根据标题对 pdf 进行分组。这可以通过一个简单的脚本或类似的东西来实现吗？我不是一个开发人员。谢谢你的帮助。

# android - 插入具有相同外键的多行会导致“约束失败”

> ID：15015319
> 
> 赞同：0
> 
> 时间：2013-02-22T01:22:35.413
> 
> 标签：android, foreign-keys, constraints, ormlite

我有一堂课`Contact`和一堂课`PhoneNumber`。在`PhoneNumber`课堂上，我有以下属性：

```
@DatabaseField(foreign = true, columnName = "contact_id")
private Contact mContact; 
```

课堂上是这样的`contact_id`：`Contact`

```
@DatabaseField(id = true, columnName = "contact_id", allowGeneratedIdInsert = false)
private Integer m_id; 
```

当我尝试向`PhoneNumber`数据库中插入具有相同`contact_id`值的新值时，它总是返回`constraint_failed`错误。

它应该发生吗？我不能用相同的外键插入多行吗？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:07:47.803

这应该发生。您实现了一对一的关系，但您需要一对多。在您的班级中，您有一个电话号码联系人，但 db 为一个电话号码存储了多个联系人。这是没有意义的。因此，您应该使用列表联系人，而不是联系人联系人。然后插入具有相同 id 的多个联系人将起作用。

# java - 如何验证来自 SWT Text 小部件的输入并分配给变量？

> ID：15015320
> 
> 赞同：1
> 
> 时间：2013-02-22T01:22:38.063
> 
> 标签：java, eclipse, user-interface, swt, actionlistener

此 SWT 程序有一个名为 mBuy 的组，其中包括用于输入股票买入价格的文本字段。按下计算按钮并激活事件侦听器后，我想将此文本字段中的任何内容分配给我已在此处初始化的变量。

```
final Text tmp0 = new Text(mBuy, SWT.SINGLE);
tmp0.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));

// Calculate Button
Button tmp3 = new Button(mBuy, SWT.PUSH);
tmp3.setText("Calculate");
tmp3.setLayoutData(new GridData(SWT.FILL, SWT.FILL, false, true));

// if calculate button is pressed
tmp3.addSelectionListener(new SelectionAdapter() {
    public void widgetSelected(SelectionEvent e) {
        //take the decimal value inside textbox 
        bPrice=Double.parseDouble(tmp0.getText());
        // don't show buy menu anymore
        mBuy.dispose();

    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T06:45:43.313

只是`tmp0.getText()`。您应该查看[SWT 的 Javadocs](http://www.eclipse.org/swt/javadoc.php)。

# c# - 使用数据绑定将颜色（作为字符串）传递给按钮的背景

> ID：15015321
> 
> 赞同：0
> 
> 时间：2013-02-22T01:22:38.090
> 
> 标签：c#, wpf, button, binding, background

在以下代码段中，我尝试将颜色（作为字符串）传递给控件并使用绑定将颜色分配给按钮的背景。但是，它被忽略了。知道出了什么问题吗？

这是 XAML：

```
<Window x:Class="SDKSample.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:SDKSample"
        Title="MainWindow" Height="350" Width="525">

    <DockPanel>
        <DockPanel.Resources>
            <local:MyData x:Key="myDataSource"   />
        </DockPanel.Resources>
        <DockPanel.DataContext>
            <Binding Source="{StaticResource myDataSource}" />
        </DockPanel.DataContext>
        <!--<Button Background="Red" Width="250" Height="25">RED</Button>-->
        <Button Background="{Binding Source={StaticResource myDataSource}, Path=ColorName}" Width="150" Height="30">I'm bound to be red</Button>

    </DockPanel>        
</Window> 
```

这是后面的代码：

```
namespace SDKSample
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            MyData md = new MyData("Red");
            this.DataContext = md.ColorName;

        }
    }

    public class MyData
    {
        private Color colorname;
        public MyData()
        {
        }

        public MyData(string value)
        {
            Color col = (Color)ColorConverter.ConvertFromString(value);
            this.colorname = col;
        }

        public Color ColorName
        {
            get { return colorname; }
            set
            {
                this.colorname = value;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T01:50:21.933

这里有几个问题，第一个很常见，很多人尝试将 a 分配`Color`给 a `Brush`，您不能直接这样做，解决此问题的一种方法是将 分配给`color`a `SolidColorbrush`。`Background`

例子：

```
<Button Content="I'm bound to be red" Width="150" Height="30">
    <Button.Background>
        <SolidColorBrush Color="{Binding ElementName=UI,Path=MyData.ColorName}" />
    </Button.Background>
</Button> 
```

另一个问题是`DataContext`您`MyData`分配`Button`.

这是一个例子。

xml:

```
<Window x:Class="WpfApplication7.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="124" Width="464" Name="UI" >

        <DockPanel DataContext="{Binding ElementName=UI}"> <!--set the DataContext to your Window (using the Name of the Window)-->
            <Button Content="I'm bound to be red" Width="150" Height="30">
                <Button.Background>
                    <SolidColorBrush Color="{Binding MyData.ColorName}" />
                </Button.Background>
            </Button>
        </DockPanel>
</Window> 
```

代码

```
public partial class MainWindow : Window, INotifyPropertyChanged
{
    private MyData _myData;

    public MainWindow()
    { 
        InitializeComponent();
        MyData = new MyData("Red");
    }

    public MyData MyData
    {
        get { return _myData; }
        set { _myData = value; NotifyPropertyChanged("MyData"); }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(string property)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(property));
        }
    }
} 
```

# objective-c - 为 IBOutlet 和 INT 变量名称添加前缀字符串值

> ID：15015334
> 
> 赞同：1
> 
> 时间：2013-02-22T01:24:26.253
> 
> 标签：objective-c, xcode, string, iboutlet

我有许多 IBOutlets 前缀为“playerOne”“playerTwo”等。

```
@property (weak, nonatomic) IBOutlet UIButton *playerOneTurnButton;
@property (weak, nonatomic) IBOutlet UIButton *playerTwoTurnButton;
@property (weak, nonatomic) IBOutlet UIButton *playerOneChallengeButton;
@property (weak, nonatomic) IBOutlet UIButton *playerTwoChallengeButton;
@property (weak, nonatomic) IBOutlet UILabel *playerOneTimeLabel;
@property (weak, nonatomic) IBOutlet UILabel *playerTwoTimeLabel; 
```

而且我声明了一些变量，这些变量也以'playerOne''playerTwo'等为前缀......

```
int playerOneTimeRemaining;
int playerTwoTimeRemaining;
int playerThreeTimeRemaining;

etc ... 
```

在不同的点上，我想根据轮到谁来操纵这些出口（调整 alpha、隐藏和活动属性），我还需要更改一些变量的 int 值。我有各种各样`NSStrings`的（在这个例子中叫做`whoWasChallengedFromGame`），它可以跟踪它是谁。`@"playerOne"`或`@playerTwo"`等每个玩家。

目前我有一个 if 语句来检查字符串并执行一段代码。这段代码每次都几乎相同，只是每次调整出口和变量的名称......

```
-(void)challengeAccepted {
Store *myStore = [Store sharedStore];
if (([myStore.whoWasChallengedFromGame isEqual:@"playerOne"]) && ([myStore.brutalModeFromOptions isEqual:@"lenient"])) {
    playerOneTimeRemaining -= 30;
    playerOneTimeLabel.text = [NSString stringWithFormat:@"%i", playerOneTimeRemaining];
}

if (([myStore.whoWasChallengedFromGame isEqual:@"playerTwo"]) && ([myStore.brutalModeFromOptions isEqual:@"lenient"])) {
    playerTwoTimeRemaining -= 30;
    playerTwoTimeLabel.text = [NSString stringWithFormat:@"%i", playerTwoTimeRemaining];

}

etc etc for each player 
```

正如您所看到的，随着玩家数量的增加，这实际上是无法控制的。我要做的是能够编写一个代码块来检查字符串并为变量名添加`whoWasChallengedFromGame`前缀`IBOutlet`

所以代码将只需要说

```
"string"TimeRemaining -=30
"string"TimeLabel.text= blah blah 
```

并且代码将简单地将“字符串”部分转换为 playerOne 或 playerTwo 或字符串中的任何内容`whoWasChallengedFromGame`。

如果可以做到这一点，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T01:36:38.513

创建一个`PlayerControls`类，`viewDidLoad`在游戏中对每个玩家进行初始化，然后`PlayerControls`用于对当前玩家进行调整。

这是一个简单的例子：

```
@interface PlayerControls : NSObject
@property (weak, nonatomic) UIButton *turnButton;
@property (weak, nonatomic) UIButton *challengeButton;
@property (weak, nonatomic) UILabel *timeLabel;
@end 
```

创建 的每个玩家实例`PlayerControls`，并将它们放入一个数组中。将此声明添加到您的控制器：

```
PlayerControls *playerControls[2];

-(void)viewDidLoad {
    playerControls[0] = [[PlayerControls alloc] init];
    playerControls[0].turnButton = self.playerOneTurnButton;
    playerControls[0].challengeButton = self.playerOneChallengeButton;
    playerControls[0].timeLabel = self.playerOneTimeLabel;
    playerControls[1] = [[PlayerControls alloc] init];
    playerControls[1].turnButton = self.playerTwoTurnButton;
    playerControls[1].challengeButton = self.playerTwoChallengeButton;
    playerControls[1].timeLabel = self.playerTwoTimeLabel;
} 
```

从这一点开始，您可以通过其索引来引用当前玩家：玩家一为零，玩家二为一。您可以根据需要添加更多播放器，而无需更改代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T02:23:41.613

[使用Key-Value Coding](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/KeyValueCoding.html) (KVC)后可以实现您的目标。

特别是看看[这个页面](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/BasicPrinciples.html#//apple_ref/doc/uid/20002170-BAJEAIEE)。为了合并您的玩家信息，您可以执行以下操作：

```
[myInstance setValue:someAppropriateValue
              forKey:[NSString stringWithFormat:@"%@challengeButton", currentPlayer]]; 
```

但是，我可能会使用一个类来做到这一点。不过，我强烈建议您使用包装类来管理播放器，例如：

```
@interface PlayerStates

- (UIButton *)turnButtonForPlayer:(NSInteger)player
...etc

@end 
```

这种方法的缺点是您不能`IBOutlet`直接使用 s （尽管您可以从 构建它`IBOutletCollection`）。

如果您确实需要`IBOutlet`为每个小部件使用一个，我可能会使用 KVC，但请确保为您的播放器使用命名常量：

```
typedef enum {
    PlayerOne,
    PlayerTwo,
} Player;

@property (nonatomic) Player currentPlayer; 
```

然后使用以下命令获取 KVC 所需的字符串：

```
- (NSString *)stringForPlayer:(Player)player
{
    switch (player) {
        case PlayerOne:
            return @"playerOne";
        ...
} 
```

# jquery - 使用 JQuery 拆分一个 在 2

> ID：15015342
> 
> 赞同：0
> 
> 时间：2013-02-22T01:24:56.247
> 
> 标签：jquery, insert, html-lists, indexing

嗨，我有一个无序元素列表。单击时，我想`<p>`在拆分`<ul>`2 时插入一个元素。

问题在于`$("</ul>"+text+"<ul class=\"test\">").insertAfter(element);`似乎将`<p>`元素与`<ul>`元素分开，先插入`<p>`然后再插入`<ul>`标签。

我还想立即删除元素`<ul>`之前和之后的打开和关闭，以便我可以在不同的位置拆分。这是我能找到的唯一方法，但它只删除了元素：`.temp``<ul>``<p>``$('.temp').remove();`

页面开始时的格式化方式正是我所追求的。JS有点坏了。 [http://jsfiddle.net/yU65g/1/](http://jsfiddle.net/yU65g/1/)

JS：

```
 $(".test li").click(function () {
    var text = "<p class=\"temp\">Test</p>";
  var index = $(".test li").index(this);
  $("span").text("That was div index #" + index);
   var element = $('.test li').get(index);
    $('.temp').remove();
    $("</ul>"+text+"<ul class=\"test\">").insertAfter(element);
}); 
```

HTML：

```
<html>
<head>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
  <span>Click a div!</span>
        <ul class="test">
<li>First div</li>
<li>Second div</li>
<li>Third div</li>

    </ul>
    <p class="temp">Test</p>
 <ul class="test"> 

<li>Fourth div</li>
<li>Fith div</li>
<li>Sixth div</li>
        </ul>

</body>
</html> 
```

CSS：

```
.test li { background:yellow; margin:5px; }
span { color:red; }
.test {border: solid 1px red; clear:both; margin: 1em;}
.temp {clear:both;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T01:40:05.253

使用 DOM 时，“标签”实际上并不存在。jQuery 解析 HTML 字符串并尽可能地从它们中创建 DOM 元素，然后将它们插入到树中。

因此，考虑到 DOM 元素，“拆分”意味着您必须获取以下所有`li`元素（如果有的话）并将它们移动到新列表中。

例如：

```
$(".test li").click(function () {
    $("span").text("That was div index #" + $(this).index());

    var $ul = $(this).parent(); // the current list (the parent `ul` element)
    var $following = $(this).nextAll('li'); // all following `li` elements

    if ($following.length > 0) {
        // Create a new list, append the `li` elements and add the list
        // after the current list
        $('<ul />', {'class': 'test'}).append($following).insertAfter($ul);
    }

    // add a paragraph after the current list
    $('.temp').remove();
    $('<p />', {'class': 'temp',text: 'Test'}).insertAfter($ul);
}); 
```

[**演示**](http://jsfiddle.net/yU65g/6/)

* * *

如果您只想将所有元素拆分为两个列表，假设两个列表都已存在，则以下操作将起作用：

```
var $uls = $("ul.test");
var $lis =  $uls.find("li");

$lis.click(function () {
    var index = $lis.index(this);
    $("span").text("That was div index #" + index);

    var $following = $lis.slice(index + 1); // get all following `li` elements
    if ($following.length > 0) {
       // append to second list
       $uls.eq(1).append($following);
    }

    // append all li elements up to the current one to the
    // first list
    $uls.eq(0).append($lis.slice(0, index + 1));

    // add a paragraph after the first list
    $('.temp').remove();
    $('<p />', {'class': 'temp',text: 'Test'}).insertAfter($uls.eq(0));
}); 
```

[**演示**](http://jsfiddle.net/yU65g/7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T01:38:25.837

强烈推荐[.nextAll()](http://api.jquery.com/nextAll/)在点击后获取兄弟姐妹。 [.detach()](http://api.jquery.com/detach/)会将它们从 dom 中删除，然后可以移动它们（它还保持向其注册的 click 事件）。我附加`<p>`你想要的，然后在文本后附加一个克隆的 ul 。 [小提琴](http://jsfiddle.net/GWJvY/1/)

```
$(".test li").click(function () {
  var copied = $(this).nextAll().detach(), ul = $(this).closest("ul"), copyUl = ul.clone().empty().append(copied), test = $("<p>Test</p>",{"class":"temp"}); 
if(copied.length > 0){
  ul.after(test);
  test.after(copyUl);
}

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T01:32:49.260

jQuery（和 JavaScript）与*DOM*一起工作，而不是与 HTML 标签一起工作。不要被`$("<tag>")`语法迷惑；它仍然是正在创建、附加等的 DOM 节点。

因此，您必须创建一个新`$("<p>")`的并将其附加到主体并将创建的 ul 附加到该主体。

至于得到`<li>`你想要的 s，你可以使用`$("ul li")`集合的长度分成两半。

工作示例：http: [//jsfiddle.net/yU65g/2/](http://jsfiddle.net/yU65g/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T02:30:08.850

在原来的 ul 后面加上 p 和一个新的 ul

JS

```
var li = $('#myul li');
$('body')
    .append($('<p>p</p>'))
    .append($('<ul/>')
    .append(li.slice(li.length/2))); 
```

HTML

```
<ul id="myul">
  <li>a</li>
  <li>b</li>
  <li>c</li>
  <li>d</li>
  <li>e</li>
  <li>f</li>
</ul> 
```

[http://codepen.io/anon/pen/qKmae](http://codepen.io/anon/pen/qKmae)

# assembly - 我的 MIPS 汇编程序有什么问题？

> ID：15015344
> 
> 赞同：0
> 
> 时间：2013-02-22T01:25:16.390
> 
> 标签：assembly, mips

我正在尝试创建一个循环遍历数组以达到最终值 0 的程序。

在遍历数组中的每个元素时，我需要将值增加 2 并将最终结果存储在 $v0 中。（我不知道该怎么做）

到目前为止，这是我的代码：

```
.data  
list: .word 1, 2, 3, 4, 5, 6, 7, 8, 9, 0

.text 

li  $s0, 0x10010000          

increment:         
beq $s0, $zero, EndLoop      
lw $s1, 0($s2) 
sw $s1, 0($s2) 
la $s2, list 
la $s1, list   
lb $s2, 0($s1)           
addi $s2, $s2, 2         
sb $s2, 0($s1)           
addi $s1, $s1, 1         

j increment                

EndLoop: 
```

我的问题是：

我不断收到错误消息，提示运行时异常，地址超出范围。**知道为什么吗？**

**谁能指出我将最终值存储在 $v0 中的正确方向？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T01:43:17.047

> I Keep getting an error saying runtime exception, address out of range. Any idea why?

Sure, here:

```
.text 

li  $s0, 0x10010000          

increment:         
beq $s0, $zero, EndLoop      
lw $s1, 0($s2) 
```

Problems:

1.  You don't seem to define where your program is supposed to start its execution. I'd expect some label at the beginning of the code, but I'm seeing nothing. Is the relevant part simply not shown in the question?

2.  Your code is attempting to read from a memory location whose address is contained in register `s2`, however your code does not initialize this register.

3.  Also, you never modify `s0`, so the loop is hopelessly endless.

> Could anyone point me in the right direction about storing the final values in $v0?

I see no problem with storing anything in `v0`.

# macos - 什么 OS X quicklook 生成器用于 java 文件？

> ID：15015346
> 
> 赞同：0
> 
> 时间：2013-02-22T01:25:24.677
> 
> 标签：macos, finder, quicklook

OS X Finder 使用 quicklook 预览选定的文档。

> [Q] 我的应用程序必须如何配置才能拦截这些请求并绘制预览？

我的应用程序有什么方法可以将一个文件扩展名的请求转发到另一个已经处理类似扩展名的应用程序？

（例如，这对于使用现有的 ruby​​ 预览器预览我的 Ruby dsl 或使用 XCode 中内置的 .java 预览器的 .scala 文件特别有用。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T00:58:23.413

`qlmanage -p -d1 somefile.java`给出：

```
Testing Quick Look preview with files:
    somefile.java

[DEBUG] Registering <QLGenerator Built-in 0x7fbf5b00b890> for public.image
[DEBUG] Preview test for somefile.java -- file://localhost/Users/XXX/. Content type UTI: com.sun.java-source
[DEBUG] Previewing file://localhost/Users/XXX/somefile.java. Content type UTI: com.sun.java-source. Generator used: <QLGenerator Text.qlgenerator>
[DEBUG] Loading <QLGenerator Text.qlgenerator>
[DEBUG] Previewing file://localhost/Users/XXX/somefile.java finished 
```

请注意，`com.sun.java-source`符合`public.source-code`哪个符合`public.plain-text`。任何声明为符合的类型`public.plain-text`都将使用文本生成器，除非有更具体的插件。

映射文件扩展名/内容类型由应用程序（或 Quick Look 插件）提供。查看[文档](http://developer.apple.com/library/mac/#documentation/FileManagement/Conceptual/understanding_utis/understand_utis_intro/understand_utis_intro.html#//apple_ref/doc/uid/TP40001319)以获取更多信息。

笔记：

*   您不能在不修改插件本身的情况下更改生成器支持的类型列表（这对于内置系统生成器来说是个坏主意）。映射类型 -> 生成器是根据生成器在其 Info.plist 中声明的内容自动构建的。
*   如果您希望文本生成器处理类型 XXX，则必须`public.plain-text`在您的应用程序中声明 XXX 符合。
*   如果您不想正式声明 XXX 符合`public.plain-text`，则必须自己编写一个生成器。

# memcached - 使用 gcc 4.5.3 在 Cygwin 上构建 Memcached 1.4.15 失败

> ID：15015351
> 
> 赞同：3
> 
> 时间：2013-02-22T01:25:56.053
> 
> 标签：memcached, cygwin

[如此处所述，我无法在](https://stackoverflow.com/questions/6869655/building-memcached-1-4-x-on-windows-error-with-cygwin)Cygwin 上成功构建和测试 memcached 1.4.15 。我能够在 3 次修复之后进行构建，一次用于`-Werror`从 Makefile 中删除 CFLAG，第二次用于`sanitytest`强制转换为 int，第三次用于`testapp.c`代码更改，[如上所述](https://stackoverflow.com/questions/6869655/building-memcached-1-4-x-on-windows-error-with-cygwin)。但是，当我运行时，`testapp.exe`我得到以下输出：

```
$ ./testapp.exe
1..47
ok 1 - cache_create
ok 2 - cache_constructor
ok 3 - cache_constructor_fail
ok 4 - cache_destructor
ok 5 - cache_reuse
ok 6 - cache_redzone
ok 7 - issue_161
ok 8 - strtol
ok 9 - strtoll
ok 10 - strtoul
ok 11 - strtoull
ok 12 - issue_44
ok 13 - vperror 
```

在杀死作为 testapp 运行的一部分触发的守护进程（`testrun.exe`和）之后，我以守护模式（ ）和详细的控制台输出（）启动了 memcached 可执行文件，这是我看到的输出： **服务器（Cygwin bash 外壳）：**`memcached-debug.exe``-d``-vv`

 **```
<24 server listening (udp)
<24 server listening (udp)
<25 new auto-negotiating client connection
25: Client using the ascii protocol
<25 stats
Failed to write, and not due to blocking: Address family not supported by protocol
<25 connection closed. 
```

**客户端（MS-DOS 命令提示符）：**

```
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.
stats
Connection closed by foreign host. 
```

我的本地环境是：-
Windows 7 x64
Cygwin
gcc 4.5.3
libevent2.0.20-stable
memcached1.4.15

有人可以帮我解决这个问题吗？
提前致谢..**

# r - 如何使用 GGPLOT geom_point() 进行选择性标记

> ID：15015356
> 
> 赞同：33
> 
> 时间：2013-02-22T01:26:58.290
> 
> 标签：r, plot, ggplot2

使用此代码：

```
library(ggplot2)
p <- ggplot(mtcars, aes(wt, mpg))
p + geom_point()
p + geom_point() + geom_text(aes(wt, mpg, label=row.names(mtcars))) 
```

我得到这张图：

![在此处输入图像描述](../Images/19893efd0423a61ad16815b91ff6f523.png)

如何修改上面的代码，使其仅标记点 where`wt > 4`或`mpg > 25`，而其余点保持未标记。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-02-22T01:29:53.753

为 提供`data`参数`geom_text`：

```
library(ggplot2)
mtcars$name <- row.names(mtcars)
p <- ggplot(mtcars, aes(wt, mpg))
p + geom_point()
p + geom_point() + 
  geom_text(data=subset(mtcars, wt > 4 | mpg > 25),
            aes(wt,mpg,label=name)) 
```

结果图：

![情节1](../Images/b073c43b9f6df89cac4d7399abfc2543.png)

PS：我真的不喜欢`p + geom()`构建 ggplots 的风格，我很确定 hadley 在最初的 ggplot2 书中做了它来演示对同一情节的不同修改，但人们似乎已经接受了它并使用它. 这是我的做法：

*   只需将绘图的不同组件与 一起添加`+`，不要保存每个中间步骤。
*   除非您确实需要，否则不要费心将其保存到变量中，如果需要，您仍然可以将其保存到文件中`ggsave()`
*   将所有将适用于整个情节的美学放在第一次`ggplot`调用中，仅在必要时修改其他内容

我的版本：

```
ggplot(mtcars, aes(wt, mpg, label=name)) +
  geom_point() +
  geom_text(data=subset(mtcars, wt > 4 | mpg > 25)) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-22T01:32:22.843

您可以将`subset`参数传递给图层。在您的情况下，这需要将行名作为一列，因此可以正确评估它们。您将需要显式加载`plyr`以获取`.`使语法简单的函数。

```
# shamelessly using @marius initial code
library(ggplot2)
library(plyr)
mtcars$name <- row.names(mtcars)
p <- ggplot(mtcars, aes(wt, mpg))

p + geom_point() + geom_text(aes(wt,mpg,label=name), subset = .(wt > 4 | mpg > 25)) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-22T01:36:43.597

你可以得到一个额外的变量：

```
carnames <- row.names(mtcars)
carnames[with(mtcars, !(wt > 4 | mpg > 25))] <- ""

p + geom_point() + geom_text(aes(wt,mpg,label=carnames)) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-22T02:11:20.527

一个类似ggplot2的格子解决方案:-)

```
 library(latticeExtra)
  xyplot(mpg~wt, data=mtcars,pch=19,
         panel =function(x,y,...){
         #  panel.xyplot(x,y,...)
           data=subset(mtcars, wt > 4 | mpg > 25)
           panel.text(data$wt,data$mpg,label=row.names(data),
                      col='red',cex=2)
         },par.settings = ggplot2like(), axis = axis.grid) 
```

![在此处输入图像描述](../Images/b3e8e93721cce26ea38271b01d61d466.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-02T01:19:52.240

```
library(ggrepel)

mtcars$name <- row.names(mtcars)

ggplot(mtcars, aes(wt, mpg, label=name)) +

geom_point() +

geom_text_repel(data=subset(mtcars, wt > 4 | mpg > 25), aes(label=name)) 
```

# android - Android 应用内结算 v3 未返回正确的本地化价格 (getSkuDetails)

> ID：15015359
> 
> 赞同：6
> 
> 时间：2013-02-22T01:27:09.430
> 
> 标签：android, in-app-purchase, google-play, in-app-billing

我正在尝试使用不同的本地价格测试 Android In-app billing v3 API 中的 getSkuDetails 方法。

我使用了 Google 提供的示例应用程序（TrivialDrive），并对其进行了修改以显示 Google 响应 getSkuDetails 返回的价格：

```
 SkuDetails gasDetails = inventory.getSkuDetails(SKU_GAS);

        if (gasDetails != null){
            alert("Gas Price is " + gasDetails.getPrice());
        } 
```

我已使用为墨西哥设置了 Google 电子钱包位置的帐户安装了该应用程序。

当应用程序运行时，警报错误地显示 Gas Price 为 1.00 美元，但当我尝试购买更多 Gas 时，它显示正确的购买价格为 MX$12.72。

为什么 getSkuDetails 没有返回 12.72 美元而不是 1.00 美元的正确本地化价格？

很高兴提供更多代码片段，但以上是我添加到 Google 提供的示例应用程序中的全部内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T21:45:54.807

似乎 API 目前只支持返回本地货币代码和本地价格的格式化字符串，这对于会计目的没有用，因为货币符号可以在多种货币之间共享。

这是跟踪问题的链接：[http ://code.google.com/p/marketbilling/issues/detail?id=93](http://code.google.com/p/marketbilling/issues/detail?id=93)

# realstudio - Real Studio 中的数组操作

> ID：15015363
> 
> 赞同：1
> 
> 时间：2013-02-22T01:27:59.180
> 
> 标签：realstudio, xojo

我正在尝试在 Real Studio 中对数组做一些事情，但似乎在文档中找不到任何关于它们的内容。

第一件事是提取多维数组的子集：我想从我已填充的矩阵中的一列中创建一个新向量。在 MATLAB 或 R 中，这将类似于 Matrix(1:5,2) 来提取第 2 列的第 1 到 5 行。在 Real Studio 中有没有简单的方法可以做到这一点？

在类似的注释中，我想知道是否有一种方法可以让函数或操作返回数组中单元格的索引，而不是存储的值。例如，如果我在 max([1 2 3 4 8]) 之类的东西上使用 max 函数，我希望返回最大值 (5) 的索引，而不是 8。

谢谢！让我知道我是否可以更具体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-14T09:46:05.523

对于关于提取子集的第一部分：您必须简单地创建一个可以为您执行此操作的方法。您可以使用 Extends 关键字轻松创建一个方法，该方法将使用 myArray.getSubSet(1,5,2) 语法返回数组的一部分。扩展信息：http: [//docs.xojo.com/index.php/Extends](http://docs.xojo.com/index.php/Extends)

在获取数组中单元格的索引方面，如果它是一维数组，您可以使用 array.indexOf(value) 让它返回索引。如果你想要最大值的索引，theIndex = array.indexOf(max(array))

# java - 有没有办法强制程序留在 RAM 中

> ID：15015370
> 
> 赞同：1
> 
> 时间：2013-02-22T01:28:21.190
> 
> 标签：java, c++, linux, windows, service

我可以编写一个程序来启动其他留在物理 RAM 中并避免交换到磁盘的小程序吗？我很好奇 Linux 和 Windows 的答案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T01:34:44.397

[`mlock`POSIX 系统可以使用/`munlock`](http://linux.die.net/man/2/mlock)将内存锁定到 RAM 中。在 Windows 上，您可以使用[`VirtualLock`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366895(v=vs.85).aspx).

不过，在几乎所有情况下，您都希望让操作系统来处理这类事情。

编辑：详细说明，如果您想要这样做的原因是性能或响应能力，*请不要*. 几乎你想要这样做的唯一原因是阻止密码或加密密钥意外写入磁盘，攻击者可能会得到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T01:34:59.407

[相似主题](https://superuser.com/questions/237137/how-to-control-ram-swap-usage)

引用其中一位用户的话：

> 是的，有：让程序调用 VirtualLock 函数：
> 
> 进程锁定的页面保留在物理内存中，直到进程解锁或终止。这些页面保证在锁定时不会写入页面文件。
> 
> 我相信 SetProcessWorkingSetSize 函数也可能会有所帮助。
> 
> 对于那些认为我是异端甚至暗示这可能有用的人：
> 
> 请注意，在内存中锁定页面可能是有正当理由的。一个有效的原因可能是用户正在运行 CD 刻录机，而 CD 刻录机不断换页并因此导致缓冲区欠载，从而产生过山车。在这种情况下，锁定内存缓冲区以使其不会被分页是有效的，即使这意味着计算机的其余部分会慢下来，因为这仍然比给用户一个过山车好。也可能有其他正当理由——我的观点是，虽然通常不建议将页面锁定在内存中，但仍然存在有效情况，我认为终止这个想法不会帮助这里的 OP。
> 
> 更新：查看 Process Hacker 的 Reduce Working Set 菜单选项。

# google-apps-script - 如何将“自定义函数帮助”添加到谷歌电子表格。- 不是脚本编辑器

> ID：15015373
> 
> 赞同：7
> 
> 时间：2013-02-22T01:28:27.033
> 
> 标签：google-apps-script, google-sheets, custom-function

可以将“自定义功能帮助”添加到谷歌电子表格吗？即，如果我在电子表格单元格中键入 =sum，我会得到浮动帮助文本，有没有办法使用自定义函数来做到这一点？

谷歌应用程序脚本中的文档是使用 JSDoc [http://en.wikipedia.org/wiki/JSDoc](http://en.wikipedia.org/wiki/JSDoc) 样式（类似 JavaDoc）的注释创建的。如此处 [所述 https://developers.google.com/apps-script/guide_libraries?hl=en#guidelines](https://developers.google.com/apps-script/guide_libraries?hl=en#guidelines)

看起来这些仅在脚本编辑器中有效。它有一种添加文档的方法，因此它出现在电子表格上。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-07-09T19:14:25.387

此功能于 2014 年 5 月添加，之前的[Issue 2475](https://code.google.com/p/google-apps-script-issues/issues/detail?id=2475)已关闭。

[Google 文档中给出](https://github.com/google/google-apps-script-samples/blob/master/date_add_and_subtract/Code.gs#L74)的示例是可以的，但是您可以使用 jsdoc 信息做的事情比它们显示的要多。

例如：

```
/**
 * Return the time that the referenced cell or range was last changed.
 * Initial use shows current time.
 *
 * @param {Sheet3!B32}  reference  Cell or range to monitor.
 * @returns                        The time the reference was last changed.
 * @customfunction
 */
function lastModified( reference ) {
  // Surprise - we don't actually care what has changed!
  return( new Date() );
} 
```

![截屏](../Images/f7ca8756259f7aa43d0e3bb04d39aba1.png)

[我在博客](https://mogsdad.wordpress.com/2015/07/08/did-you-know-custom-functions-in-google-apps-script/#heading_codecomments)中详细介绍了这一点和示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T01:51:17.847

看到没有这方面的文档，我认为这个功能是不可能的。考虑[在问题跟踪器上寻找现有的请求，](http://code.google.com/p/google-apps-script-issues/issues/list)如果没有，请提出功能请求！我敢肯定，你不是唯一一个想看到这个的人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T18:31:43.703

我为此发布了一个功能请求。 [https://code.google.com/p/google-apps-script-issues/issues/detail?id=2475](https://code.google.com/p/google-apps-script-issues/issues/detail?id=2475)

# php - php SimpleXMLelement解析具有多个“潜在”属性的XML标签

> ID：15015375
> 
> 赞同：0
> 
> 时间：2013-02-22T01:28:29.420
> 
> 标签：php, xpath, simplexml

正如标题所示，我有一个关于解析可能具有多个属性（或根本没有属性）的 XML 标记的问题，我正在寻找有关如何完成此操作的建议；但首先，我认为一些背景知识是有序的。

我正在开发一个名为[Program O的基于 PHP 的](http://www.program-o.com)[AIML](http://en.wikipedia.org/wiki/AIML)解释器脚本，并且正在将代码从字符串替换函数（例如 str_replace、preg_replace 等）迁移到使用 PHP 的内置 SimpleXML 函数。到目前为止，我为各种 AIML 标签创建的几乎所有解析功能都已完成，并且运行良好，但特别是有一个标签正在启动我的座椅加热器，那就是 CONDITION 标签。

根据[AIML 标签参考](http://www.alicebot.org/documentation/aiml-reference.html#condition)，标签有三种不同的“形式”：一种同时具有 NAME 和 (VALUE|CONTAINS|EXISTS) 属性，称为“多条件”，一种只有 NAME 属性，称为“单条件” name list-condition”，最后一个“form”，称为“list-condition”，它只是 CONDITION 标记，根本没有任何属性。我之前链接的 AIML 标记参考包含所有三种形式的示例，但中间有很多单词，所以我将在这里重复它们，并结合周围的 AIML 代码：

**FORM：多条件标签：**

```
<category>
  <pattern>I AM BLOND</pattern>
  <template>You sound very
    <condition name="gender" value="female"> attractive.</condition>
    <condition name="gender" value="male"> handsome.</condition>
  </template>
</category> 
```

**FORM：列表条件标签：**

```
<category>
  <pattern>I AM BLOND</pattern>
  <template>You sound very
    <condition>
      <li name="gender" value="female"> attractive.</li>
      <li name="gender" value="male"> handsome.</li>
    </condition>
  </template>
</category> 
```

**FORM：单名列表条件标签**

```
<category>
  <pattern>I AM BLOND</pattern>
  <template>You sound very
    <condition name="gender">
      <li value="female"> attractive.</li>
      <li value="male"> handsome.</li>
    </condition>
  </template>
</category> 
```

在我正在处理的脚本的先前版本中，只使用了 CONDITION 标记的“列表条件”形式，虽然这是最常用的形式，但它并不是专门使用的，所以我需要能够也适用于其他两种形式。所以我的问题是：

*如何以有效的方式实现这一点？*

我已经有工作代码来解析 CONDITION 标记的列表条件形式，初步测试看起来很有希望，因为它不会引发错误，并且似乎产生了所需的响应（但仅适用于列表条件形式。其他 2表单因错误而失败，原因很明显）。功能如下：

```
function parse_condition_tag($convoArr, $element, $parentName, $level)
{
  runDebug(__FILE__, __FUNCTION__, __LINE__, 'Starting function and setting timestamp.', 2);
  $response = array();
  $attrName = $element['name'];
  if (!empty ($attrName))
  {
    $attrName = ($attrName == '*') ? $convoArr['star'][1] : $attrName;
    $search = $convoArr['client_properties'][$attrName];
    $path = ($search != 'undefined') ? "//li[@value=\"$search\"]" : '//li[not@*]';
    $choice = $element->xpath($path);
    $children = $choice[0]->children();
    if (!empty ($children))
    {
      $response = parseTemplateRecursive($convoArr, $children, $level + 1);
    }
    else
    {
      $response[] = (string) $choice[0];
    }
    $response_string = implode_recursive(' ', $response, __FILE__, __FUNCTION__, __LINE__);
    runDebug(__FILE__, __FUNCTION__, __LINE__, "Returning '$response_string' and exiting function.", 4);
    return $response_string;
  }
  trigger_error('Parsing of the CONDITION tag failed! XML = ' . $element->asXML());
} 
```

我对使用 SimpleXML 函数还比较陌生，所以我很可能遗漏了一些明显的东西。事实上，我希望情况确实如此。:)

**编辑：**添加我最终得到的功能，正如我在其中一条评论中所承诺的那样：

```
 /*
   * function parse_condition_tag
   * Acts as a de-facto if/else structure, selecting a specific output, based on certain criteria
   * @param [array] $convoArr    - The conversation array (a container for a number of necessary variables)
   * @param [object] $element    - The current XML element being parsed
   * @param [string] $parentName - The parent tag (if applicable)
   * @param [int] $level         - The current recursion level
   * @return [string] $response_string
   */

 function parse_condition_tag($convoArr, $element, $parentName, $level)
 {
   runDebug(__FILE__, __FUNCTION__, __LINE__, 'Starting function and setting timestamp.', 2);
   global $error_response;
   $response = array();
   $attrName = $element['name'];
   $attributes = (array)$element->attributes();
   $attributesArray = (isset($attributes['@attributes'])) ? $attributes['@attributes'] : array();
   runDebug(__FILE__, __FUNCTION__, __LINE__, 'Element attributes:' . print_r($attributesArray, true), 1);
   $attribute_count = count($attributesArray);
   runDebug(__FILE__, __FUNCTION__, __LINE__, "Element attribute count = $attribute_count", 1);
   if ($attribute_count == 0) // Bare condition tag
   {
     runDebug(__FILE__, __FUNCTION__, __LINE__, 'Parsing a CONDITION tag with no attributes. XML = ' . $element->asXML(), 2);
     $liNamePath = 'li[@name]';
     $condition_xPath = '';
     $exclude = array();
     $choices = $element->xpath($liNamePath);
     foreach ($choices as $choice)
     {
       $choice_name = (string)$choice['name'];
       if (in_array($choice_name, $exclude)) continue;
       $exclude[] = $choice_name;
       runDebug(__FILE__, __FUNCTION__, __LINE__, 'Client properties = ' . print_r($convoArr['client_properties'], true), 2);
       $choice_value = get_client_property($convoArr, $choice_name);
       $condition_xPath .= "li[@name=\"$choice_name\"][@value=\"$choice_value\"]|";
     }
     $condition_xPath .= 'li[not(@*)]';
     runDebug(__FILE__, __FUNCTION__, __LINE__, "xpath search = $condition_xPath", 4);
     $pick_search = $element->xpath($condition_xPath);
     runDebug(__FILE__, __FUNCTION__, __LINE__, 'Pick array = ' . print_r($pick_search, true), 2);
     $pick_count = count($pick_search);
     runDebug(__FILE__, __FUNCTION__, __LINE__, "Pick count = $pick_count.", 2);
     $pick = $pick_search[0];
   }
   elseif (array_key_exists('value', $attributesArray) or array_key_exists('contains', $attributesArray) or array_key_exists('exists', $attributesArray)) // condition tag with either VALUE, CONTAINS or EXISTS attributes
   {
     runDebug(__FILE__, __FUNCTION__, __LINE__, 'Parsing a CONDITION tag with 2 attributes.', 2);
     $condition_name = (string)$element['name'];
     $test_value = get_client_property($convoArr, $condition_name);
     switch (true)
     {
       case (isset($element['value'])):
         $condition_value = (string)$element['value'];
         break;
       case (isset($element['value'])):
         $condition_value = (string)$element['value'];
         break;
       case (isset($element['value'])):
         $condition_value = (string)$element['value'];
         break;
       default:
         runDebug(__FILE__, __FUNCTION__, __LINE__, 'Something went wrong with parsing the CONDITION tag. Returning the error response.', 1);
         return $error_response;
     }
     $pick = ($condition_value == $test_value) ? $element : '';
   }
   elseif (array_key_exists('name', $attributesArray)) // this ~SHOULD~ just trigger if the NAME value is present, and ~NOT~ NAME and (VALUE|CONTAINS|EXISTS)
   {
     runDebug(__FILE__, __FUNCTION__, __LINE__, 'Parsing a CONDITION tag with only the NAME attribute.', 2);
     $condition_name = (string)$element['name'];
     $test_value = get_client_property($convoArr, $condition_name);
     $path = "li[@value=\"$test_value\"]|li[not(@*)]";
     runDebug(__FILE__, __FUNCTION__, __LINE__, "search string = $path", 4);
     $choice = $element->xpath($path);
     $pick = $choice[0];
     runDebug(__FILE__, __FUNCTION__, __LINE__, 'Found a match. Pick = ' . print_r($choice, true), 4);
   }
   else // nothing matches
   {
     runDebug(__FILE__, __FUNCTION__, __LINE__, 'No matches found. Returning default error response.', 1);
     return $error_response;
   }
   $children = (is_object($pick)) ? $pick->children() : null;
   if (!empty ($children))
   {
     $response = parseTemplateRecursive($convoArr, $children, $level + 1);
   }
   else
   {
     $response[] = (string) $pick;
   }
   $response_string = implode_recursive(' ', $response);
   return $response_string;
 } 
```

我怀疑可能有更好、更优雅的方式来做到这一点（我的生活故事，真的），但上述工作符合预期。任何改进建议都将被欣然接受，并仔细考虑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T16:00:03.743

请注意，我没有使用`SimpleXML`，因为 imho`DOMDocument`更好，更强大。从 PHP5 开始，两者都[`DOMDocument`](http://php.net/manual/en/class.domdocument.php)可用。[`DOMXPath`](http://php.net/manual/en/class.domxpath.php)

我创建了一个简单的解析器类，它解析提供的文档以获取不同样式的条件：

```
class AIMLParser
{
    public function parse($data)
    {
        $internalErrors = libxml_use_internal_errors(true);

        $dom = new DOMDocument();
        $dom->loadHTML($data);
        $xpath = new DOMXPath($dom);

        $templates = array();

        foreach($xpath->query('//template') as $templateNode) {
            $template = array(
                'text' => $templateNode->firstChild->nodeValue, // note this expects the first child note to always be the textnode
                'conditions' => array(),
            );

            foreach ($templateNode->getElementsByTagName('condition') as $condition) {
                if ($condition->hasAttribute('name') && $condition->hasAttribute('value')) {
                    $template['conditions'] = $this->parseConditionsWithoutChildren($template['conditions'], $condition);
                } elseif ($condition->hasAttribute('name')) {
                    $template['conditions'] = $this->parseConditionsWithNameAttribute($template['conditions'], $condition);
                } else {
                    $template['conditions'] = $this->parseConditionsWithoutAttributes($template['conditions'], $condition);
                }
            }

            $templates[] = $template;
        }

        libxml_use_internal_errors($internalErrors);

        return $templates;
    }

    private function parseConditionsWithoutChildren(array $conditions, DOMNode $condition)
    {
        if (!array_key_exists($condition->getAttribute('name'), $conditions)) {
            $conditions[$condition->getAttribute('name')] = array();
        }

        $conditions[$condition->getAttribute('name')][$condition->getAttribute('value')] = $condition->nodeValue;

        return $conditions;
    }

    private function parseConditionsWithNameAttribute(array $conditions, DOMNode $condition)
    {
        if (!array_key_exists($condition->getAttribute('name'), $conditions)) {
            $conditions[$condition->getAttribute('name')] = array();
        }

        foreach ($condition->getElementsByTagName('li') as $listItem) {
            $conditions[$condition->getAttribute('name')][$listItem->getAttribute('value')] = $listItem->nodeValue;
        }

        return $conditions;
    }

    private function parseConditionsWithoutAttributes(array $conditions, DOMNode $condition)
    {
        foreach ($condition->getElementsByTagName('li') as $listItem) {
            if (!array_key_exists($listItem->getAttribute('name'), $conditions)) {
                $conditions[$listItem->getAttribute('name')] = array();
            }

            $conditions[$listItem->getAttribute('name')][$listItem->getAttribute('value')] = $listItem->nodeValue;
        }

        return $conditions;
    }
} 
```

它的作用是在文档中搜索`template`节点并遍历它们。对于每个`template`节点，它会找出条件的样式。基于此，它选择条件的正确解析函数。在遍历所有模板后，它会返回一个已解析的数组，其中包含您需要的所有信息（我认为）。

要解析一些文档，您可以这样做：

```
$parser = new AIMLParser();
$templates = $parser->parse($someVariableWithTheContentOfTheDocument); 
```

演示：[http ://codepad.viper-7.com/JPuBaE](http://codepad.viper-7.com/JPuBaE)

# delphi - Delphi AnsiString 操作 - PAnsiChar 损坏？

> ID：15015376
> 
> 赞同：1
> 
> 时间：2013-02-22T01:28:37.250
> 
> 标签：delphi, pointers, delphi-xe2, ansistring

我使用以下方法来移动和操作`AnsiString`. 它在大多数情况下都有效，但有时指向字符串的指针会停止运行。给定以下代码：

```
var
  s: AnsiString;
  p: PAnsiChar;
  offset, idx, cnt: Integer;
begin
  s := 'some>very>long>string>with>field>delimiters>';
  p := @s[1];
  offset := 1;

  // find the 5th field
  cnt := 5;
  repeat
    idx := AnsiString.AnsiPos('>', p);
    Inc(p, idx);
    Inc(offset, idx);
    Dec(cnt);
  until cnt = 0;

  // insert a new field after the 5th field
  Insert(AnsiString('something new>'), s, offset);

  // skip other fields
  // insert other values
  // repeat
end; 
```

调试时，就在`repeat..until`循环完成后，您可以查看检查器并看到`p = 'field>delimiters>'`. `Insert()`声明后，`s = 'some>very>long>string>with>something new>field>delimiters>'`并`p = 'something new>field>delimiters>'`在检查员。这正如预期的那样。

我的真实字符串有几千个字符长。这种在字符串中移动并添加新字段的方法工作了几十次，然后突然停止工作。 `p`调用后不再在字符串前面显示插入的值`Insert()`。 `p`好像不知道`s`变了。。。

为什么在大多数语句之后`p`正确引用一个字符，并在一些调用后突然停止工作？`s``Insert()``Insert()`

*（我在输入问题时发现了问题的答案。现在答案似乎很明显，但在我为这个问题苦苦挣扎时却并非如此。也许发布问题和答案会对其他人有所帮助......）*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T01:31:57.327

当您调用 时，如果没有足够的额外连续内存来扩展其当前内存位置的缓冲区，`Insert()`内存管理器会将 移动到内存中的新位置。`AnsiString`这将`p`指向旧的内存位置，该位置不保存修改后的字符串，并且可能会导致访问冲突。

`p`在每个`Insert()`语句修复问题后添加一行代码以重新初始化。

```
var
  s: AnsiString;
  p: PAnsiChar;
  offset, idx, cnt: Integer;
begin
  s := 'some>very>long>string>with>field>delimiters>';
  p := @s[1];
  offset := 1;

  // find the 5th field
  cnt := 5;
  repeat
    idx := AnsiString.AnsiPos('>', p);
    Inc(p, idx);
    Inc(offset, idx);
    Dec(cnt);
  until cnt = 0;

  // insert a new field after the 5th field
  Insert(AnsiString('something new>'), s, offset);
  p := @s[offset];                                 // <- this fixes the issue

  // skip other fields
  // insert other values
  // repeat
end; 
```

# java - 需要帮助使用 Karaf 的 features-maven-plugin maven 插件... osgi

> ID：15015378
> 
> 赞同：0
> 
> 时间：2013-02-22T01:28:51.653
> 
> 标签：java, maven, osgi, apache-karaf

我的目标是为我的多模块 Maven 项目创建一个 features.xml，并收集各种功能所需的所有必需的 jar。我需要通过 file: 而不是 mvn 来解析 bundle jars:

我尝试使用 features:generate-features-xml 目标。首先，没有关于属性文件格式的文档。其次，它创建了全部由 mvn 解析的包：例如

```
<feature name='spring-jms' version='3.1.0.RELEASE'>
  <bundle>mvn:org.springframework/spring-tx/3.1.0.RELEASE</bundle>
  <feature version='3.1.0.RELEASE'>spring-core</feature>
  <bundle>mvn:org.codehaus.jackson/jackson-core-asl/1.9.9</bundle>
  <bundle>mvn:org.springframework/spring-jms/3.1.0.RELEASE</bundle>
</feature> 
```

我的第一个问题是有没有办法通过 file: 而不是 mvn: 访问捆绑包？例如

```
<bundle>file:some/path/spring-tx.jar</bundle> 
```

管他呢。

第二个问题：收集所有必需的 jar 文件的最佳方法是什么？我一直在使用 maven 程序集插件，但这似乎不是最理想的。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:17:51.123

您可以使用文件格式来处理功能文件中的包，但 maven 功能插件仅支持 maven 解析。

应用程序的最终用户无法访问互联网是很典型的。您仍然可以使用 Maven 分辨率。您有两个主要选择：

*   使用 karaf features 插件从功能创建 maven repo。然后，您可以将此目录添加到 org.ops4j.pax.url.mvn.cfg 中的 maven 存储库列表中
*   从 karaf 2.3 开始，您可以使用 kar 文件。kar 文件是 maven repo 的 zip 文件和指向内部功能文件的指针。您可以将 kar 文件放入 karaf 的部署文件夹中，它将安装该功能

这样做的好处是您的功能文件始终基于工件的 maven id。你只会改变你交付罐子的方式。因此，如果您有 Internet 或 maven repo 访问权限，您可以简单地使用功能文件（例如在开发中）。

# sql - 确定 SQL 查询是否具有命名参数的最佳方法

> ID：15015381
> 
> 赞同：1
> 
> 时间：2013-02-22T01:29:07.667
> 
> 标签：sql, sql-server, regex

我已经通过 Google 和 Stack Overflow 进行了大量搜索，如果有答案，我无法提出一个搜索查询来提供我正在寻找的答案。

我正在构建一个函数模块以在我的 ASP.net 网站中使用，以处理连接到 Microsoft SQL Server DB 和执行查询的所有繁琐工作。我目前正在研究执行查询的函数，并决定允许一个可选的函数参数，它是一个 SQL 参数数组。

在传递给它们的可选 SQL 参数的函数中，我想检查传递的 SQL 查询是否有命名参数。如果 SQL 查询中有命名参数，请确保确实传递了可选的 SQL 参数。如果 SQL 查询中没有命名参数，请确保没有传递任何 SQL 参数。例如：

*   SQL 查询 = `SELECT * FROM MyTable WHERE ID = @TheID`→ 函数调用必须有 SQL 参数。
*   SQL 查询 = `SELECT GETDATE()`→ 函数调用不能有 SQL 参数。

***我对所有人的问题是***“搜索”作为命名参数的 SQL 查询的字符串的最佳方法是什么（不知道参数的名称）。我对只在字符串中搜索“@”字符持谨慎态度，因为我在某处读到可能有一个以该字符命名的列（例如`[name@domain]`）。也许我可以使用正则表达式来搜索“=”，然后是任意数量的空格，然后是“@”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T01:53:42.757

没有理由你不能使用这个`@`角色。名称中不应该有一个`@`，因为它是一个变量而不是一个列。你不能有一个名为的变量`@(var@iable)`

查看[sp_executesql](http://msdn.microsoft.com/en-us/library/ms188001.aspx)。这是一个很好的例子，它做的事情与你正在尝试做的事情非常相似

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T01:56:46.930

对于.net，

```
 function checkQuery (byVal myQuery As String)

    return not instr(myQuery,"@") == 0
end function 
```

如果您的查询包含“@”，则返回 true

# windows-7 - Windows 7 - 文件共享 - 所有权 - 如何将 OWNER 通过网络的访问限制为只读（病毒防护）？

> ID：15015382
> 
> 赞同：0
> 
> 时间：2013-02-22T01:29:09.277
> 
> 标签：windows-7, file-sharing, virus

我在家里的网络中有两台计算机连接在一起。我在两者上使用相同的名称和密码登录。在 Windows XP 中，我习惯于让每台计算机以只读方式访问另一台计算机上的文件夹。原因：如果病毒感染了一个，它就不能感染另一个。

但是在 Windows 7 中，我发现用户的本地访问和同一用户的网络访问之间没有相同的区别。

文件夹的 OWNER 拥有完全控制权，即使在网络上也是如此。

或者，我以“管理员”为所有者进行了测试，并为我的帐户提供了只读访问权限。正如预期的那样，这意味着我必须“提升”才能写入文件夹。但同样，我看不到一种方法来指定本地我应该能够在不提升到管理员的情况下进行写作。太不方便了。

此功能是通过网络防御病毒的一个重要方面，因此必须有办法做到这一点。如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T01:31:10.890

禁用简单共享，然后将共享的属性（在共享选项卡下，而不是安全性下）设置为拒绝写访问。

要禁用简单共享：控制面板（外观和个性化）/文件夹选项，查看选项卡，滚动到底部，清除“使用共享向导（推荐）”复选框。

# authorize.net - 从现有的 ARB -authorize.net 创建新交易

> ID：15015383
> 
> 赞同：0
> 
> 时间：2013-02-22T01:29:11.833
> 
> 标签：authorize.net

我有会员在我的网站上注册，创建了一个“ARB”，所以他们按月付费......然后我打电话给他们并追加销售服务，这可能是一个完全不同的价格，而且他们是一次性的......

因此，如果我有一个人每月支付 9.99 美元（ARB），那么我的销售团队会让他同意 300 美元的服务。我如何从 ARB 向他收取一次性费用？我是否创建了一个新的 ARB 但不知何故让它只收费一个月？

重点是不要再向客户索要信用卡，有人可以帮我吗？这是 CIM 是什么，因为我没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T04:11:01.907

你不能用 ARB 做你想做的事。这是为了一致的定期付款：在一段时间内相同的金额。如果您希望能够在不再次获取他们的信用卡信息的情况下返回并向客户收费，您将需要使用 CIM，它允许您创建付款配置文件以进行收费。否则，您必须再次获取他们的信用卡信息，然后您才能使用 AIM 进行一次性付款。

# c# - 开始写入后无法设置此属性...我什么时候开始写入的？

> ID：15015384
> 
> 赞同：1
> 
> 时间：2013-02-22T01:29:12.117
> 
> 标签：c#, post, oauth, httpwebrequest, dotnetopenauth

我正在向在线交易 REST API 发出 OAuth 1.0a 请求。据我所知，以下代码是发出请求的方式，但我收到一条“此属性在写入开始后无法设置”消息`request.ContentLength = postData.Length;`......我不明白为什么。如果这不是在 OAuth 验证的 Web 请求发出之前将 POST 数据添加到它的方法，那是什么？

```
var request = consumer.PrepareAuthorizedRequest(new DotNetOpenAuth.Messaging.MessageReceivingEndpoint(new Uri(this.EndPointAddress, relativeUri), method), this.AccessToken);
request.Method = (method == DotNetOpenAuth.Messaging.HttpDeliveryMethods.PostRequest) ? "POST" : "GET";
if (postValues != null && postValues.Count > 0)
{
    //There is POST data associated with this request, include it
    var postData = KVPCollectionToString(postValues);
    request.ServicePoint.Expect100Continue = false;
    request.ContentLength = postData.Length;
    Logger.Trace(t => t("POST Data: {0}", postData));
    using (var stream = request.GetRequestStream())
    {
        var pBytes = System.Text.Encoding.UTF8.GetBytes(postData);
        stream.Write(pBytes, 0, pBytes.Length);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T01:47:29.853

简短回答：如果您想在 OAuth 请求中传递其他信息，您应该使用其他重载之一来[`PrepareAuthorizedRequest`](http://docs.dotnetopenauth.net/v3.4/html/O_T_DotNetOpenAuth_OAuth_ConsumerBase_PrepareAuthorizedRequest.htm). 您可以为添加到请求的方法提供 POST 参数列表。

更长的答案：

该`PrepareAuthorizedRequest`方法将在您返回之前写入请求`HttpWebRequest`。这意味着您无法在此之后更改内容长度。

要亲自查看此内容，您可以深入研究 DotNotOpenAuth 源代码。如果你看一下这个[`Channel`](https://www.google.com/search?q=Channel.cs%20dotnetopenauth&rlz=1C1CHFX_enUS462US462&oq=Channel.cs%20dotnetopenauth&aqs=chrome.0.57j62.5010&ie=UTF-8)类，给定你`PrepareAuthorizedRequest`调用的参数，你最终会在`Channel.InitializeRequestAsPost`. 你会在这里注意到两件事：

*   您不必将方法设置为 POST，DotNetOpenAuth 会为您执行此操作。
*   To supply parameters in the request, you should be passing them into `PrepareAuthorizedRequest` using one of the other overloads which take dictionaries of name/value pairs.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T01:32:26.800

看起来您正在尝试写入请求流而不是响应字符串，您不能只修改请求响应。

# ios - 在 iOS 上使用 HTML 5 播放 Youtube

> ID：15015386
> 
> 赞同：0
> 
> 时间：2013-02-22T01:29:23.440
> 
> 标签：ios, html, youtube, html5-video

我正在尝试将 YouTube 视频加载到 HTML 5 标记中。
我遇到的问题是我不知道“src”属性应该是什么。在 YouTube 上使用视频的 URL 似乎不起作用，该 URL 似乎检索整个页面而不仅仅是一个视频文件。我已经能够复制和粘贴 YouTube 自己的标签（通过查看页面源代码），他们在他们的页面上使用，但这不是一个非常有效或长期的解决方案。有更好的解决方案吗？我尝试使用 YouTube 的 API，但无论我做什么，它似乎总是拉入播放器的 Flash 播放器版本（这当然不适用于 iOS。）我在这里遗漏了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T01:33:24.943

这篇博文可能会有所帮助：[http ://apiblog.youtube.com/2010/07/new-way-to-embed-youtube-videos.html](http://apiblog.youtube.com/2010/07/new-way-to-embed-youtube-videos.html)

建议使用以下代码：

```
<iframe class="youtube-player" type="text/html" width="640" height="385"
        src="http://www.youtube.com/embed/VIDEO_ID" frameborder="0">
</iframe> 
```

iframe 将自动检测 HTML5 功能并使用它们；如果没有，它使用 Flash 作为后备。

# gdb - SIGSEV 错误 (gdb)

> ID：15015388
> 
> 赞同：0
> 
> 时间：2013-02-22T01:29:52.073
> 
> 标签：gdb, line, segmentation-fault

我目前正在运行一个可以编译但运行时崩溃的 c++ 文件。

当我运行程序时，我打开调试器并得到以下行：

> 程序收到信号 SIGSEGV，分段错误。/lib/libc.so.1 中的 strcat () 中的 0xff0ab210

我不知道那条线是什么意思。

你可以解释吗？

编辑：

我收到了关于我如何在程序中使用 strcat 的回复。我所使用的只是与 atoi 方法一起使用，以便将字符串转换为十六进制数。

Edit2：我在使用 strcat 库的代码上看到了一些东西，它是 .append 函数。那会是问题的原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T01:34:11.593

如果 seg 错误来自 strcat，则很可能发生以下情况之一：

1.  您的源是一个非空终止的 C 字符串（格式错误的字符串）。
2.  目标字符串中分配的内存量不足以同时存储源和目标 + 1（最后的 null）。

检查这两种情况是否都包括在内，希望您不会再看到 SIGSEGV。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T01:31:04.470

那是分段错误。通常这意味着您正在尝试访问尚未分配的内存。由于您使用`strcat`的是我猜测目标字符串尚未分配或分配的内存不足。

# tdd - RSpec & Shoulda 单行描述输出

> ID：15015399
> 
> 赞同：1
> 
> 时间：2013-02-22T01:30:36.090
> 
> 标签：tdd, rspec2, shoulda

RSpec 中的单线，例如...

```
it { should validate_presence_of(:title) } 
```

...产生以下描述性输出：

```
"should require title to be set" 
```

此示例的匹配器中的[代码行](https://github.com/thoughtbot/shoulda-matchers/blob/master/lib/shoulda/matchers/active_model/validate_presence_of_matcher.rb#L36)没有在输出前加上“should”，因此必须由 RSpec 注入。

我想为我的单行代码一起删除“应该”前缀，但找不到 RSpec 配置选项或 RSpec 代码中执行注入的位置。

过去有人用 RSpec 做过这个吗？

# linux - Linux中的热感知调度程序

> ID：15015403
> 
> 赞同：4
> 
> 时间：2013-02-22T01:31:01.333
> 
> 标签：linux, linux-kernel, scheduling, scheduler

目前我正在为我的大学项目制作一个温度感知版本的 linux。现在我必须创建一个温度感知调度程序，它可以考虑处理器温度并执行一些调度。是否有任何通用方法来获取处理器内核的温度，或者我可以以任何方式将 coretemp 驱动程序与 linux 内核集成（我在互联网上没有找到这样做的方法）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T01:43:20.730

lm-sensors 只是使用内核导出的一些设备文件来获取 CPU 温度，您可以读取这些设备文件作为内核中的支持变量来获取温度信息。就调度程序而言，我不会从头开始编写一个，而是从内核 CFS 实现开始，并在您的情况下修改负载均衡器检查以包括温度（目前它使用一个指标，即从一个核心移动任务的计算成本在缓存问题等方面与另一个方面......我不确定你是否想保留这个）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T03:20:15.470

温度控制非常困难。困难在于[热容量](http://en.wikipedia.org/wiki/Heat_capacity)和电导。读取温度非常容易。如何控制它取决于系统模型。[卡尔曼滤波器](http://en.wikipedia.org/wiki/Kalman_filter)或一些更高阶的滤波器会有所帮助。你不知道，

1.  热源。
2.  与传感器的距离。
3.  传感器数量。
4.  控制元素，如风扇。

如果只测量其`CPU`本身，硬盘驱动器可能会在 10 分钟前过热，但热量现在才到达 CPU。在这种情况下节流`CPU`不会有帮助。只有获得系统良好的**热模型**，才能控制热量。但是，您说您对系统一无所知？我看不到调度程序本身如何做到这一点。

我从事移动**冷冻机**应用程序的工作，操作员将*冰淇淋*托盘等从冷冻机装载到卡车上。传感器和控制元件之间非常小的距离会对控制系统造成严重破坏。此外，如果可能，您希望立即读取环境温度。温度控制有很多`lag`。较小的距离可能会使读数延迟 5-15 分钟（即热量传递 1 厘米需要 5-15 分钟）。

我看不出你所提议的实用性。如果你想在 PC 上使用它，那么显卡、硬盘驱动器、电源、声卡等会产生与 CPU 一样多的热量。您不能对 PC 进行一般建模；也许您可以使用 Apple 产品。我不认为你会取得很大的成功，但你会从尝试中学到很多东西！

# windows - Windows 语言包与本地化版本

> ID：15015406
> 
> 赞同：1
> 
> 时间：2013-02-22T01:31:07.717
> 
> 标签：windows, testing, windows-7, localization

无论语言如何，我都想测试我的软件在 Windows 上的运行情况。本地化安装 Windows 7 和通过语言包更改语言的安装之间有区别吗？仅更改语言包以确认我的软件工作是否足够，还是我需要安装本地化版本？特别是我想确保 API 使用的代码页发生了变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:50:50.627

相当于，使用语言包是绝对安全的。不过，我有点担心您对代码页的评论——Windows 7 本身以 Unicode 运行（Windows 95/98/ME 没有并依赖于代码页，但这已经从 Windows XP 改变了），现在看来不可想象使用 Unicode 进行开发，还是您正在做一些非常具体的事情，需要您使用非 Unicode 编码？

如果这澄清了事情，在 Windows XP 及更高版本上，API 的所有 ANSI 版本（以 A 结尾）只是简单地包装 Unicode API（以 W 结尾），转换为 Unicode 并在退出时返回 ANSI。

# java - CameraAPI 打开后通过意图发送图像

> ID：15015409
> 
> 赞同：0
> 
> 时间：2013-02-22T01:31:23.807
> 
> 标签：java, android, memory, camera

我正在尝试为 android 手机构建一个功能，该功能将打开 CameraAPI，然后将捕获的图片发送到新活动。

在这个活动中，我需要它来显示图像的预览，然后保存。

我怎么能这样做而不必将图像保存到 SD 卡？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:11:05.653

您可以将图像存储为位图，然后将其转换为字节数组，然后通过下面的代码传输到其他活动

```
 Bitmap bitmapPicture= "PICTURE FROM CAMERA";
 ByteArrayOutputStream bytes = new ByteArrayOutputStream();
 bitmapPicture.compress(Bitmap.CompressFormat.JPEG, 40, bytes); 
```

然后通过 Intent

```
 Intent imagepass = new Intent(Cam.this,Preview.class);
 imagepass.putExtra("imagepass", bytes.toByteArray());
 startActivity(imagepass); 
```

在其他活动中，我们必须接收字节数组并转换为位图并通过 imageview 显示

```
 Bundle extras = getIntent().getExtras();
    byte[] byteArray = extras.getByteArray("imagepass");
    Bitmap bmp = BitmapFactory.decodeByteArray(byteArray, 0, byteArray.length);

    ImageView iv=(ImageView) findViewById(R.id.imgvw2);
    iv.setImageBitmap(bmp); 
```

您将不得不使用自定义相机控制希望这会有所帮助。

# php - 为什么我的代码无法与 phpmyadmin 连接？

> ID：15015413
> 
> 赞同：-5
> 
> 时间：2013-02-22T01:31:53.503
> 
> 标签：php, mysql

我已经这样做了。我能发现的是，我放在表单中的所有内容都没有插入到 phpmyadmin 的表中。希望可以有人帮帮我。谢谢你 ：）

```
$icode=$_POST["icode"];
$iqty=$_POST["iqty"];
$curr_date = date("Y-m-d");
$iexp=$_POST["iexp"];
$ibankin=$_POST["ibankin"];

switch($icode)
{
    case "1" : $price = 16.00; $iitem="Ayam"; break;
    case "2" : $price = 7.00; $iitem="Daging"; break;
    case "3" : $price = 8.00; $iitem="Ikan"; break;
    default : $price = 0.00; $item="Invalid Code"; break;
}

$sales = $price * $iqty;
echo "<br>$curr_date";
echo "<br>$iitem";
echo "<br>$price";
echo "<br>$sales";
echo "<br>$iexp";
echo "<br>$ibankin";

mysql_query("insert into new (D_date, D_sales, D_expenses, D_bankin, D_item)
        values ('$curr_date',$sales,$iexp,$ibankin,$iitem)"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T01:34:13.173

您需要在尝试插入的字符串值周围加上单引号。

尝试这个：

```
 mysql_query("insert into new (D_date, D_sales, D_expenses, D_bankin, D_item)
    values ('$curr_date','$sales','$iexp','$ibankin','$iitem')"); 
```

这对您有用，但是在将它们放入数据库之前，请先转义您从用户那里获取的所有值。

# angularjs - 如何在 AngularJs 中设置全局 http 超时

> ID：15015416
> 
> 赞同：76
> 
> 时间：2013-02-22T01:32:11.137
> 
> 标签：angularjs

我知道我可以每次都设置超时：

```
$http.get('path/to/service', {timeout: 5000}); 
```

...但我想设置一个全局超时以保持我的代码干燥。

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2013-03-29T11:42:23.917

这可以通过最前沿的 angular.js（使用 git master 4ae46814ff 测试）来实现。

您可以使用请求 http 拦截器。像这样。

```
 angular.module('yourapp')
  .factory('timeoutHttpIntercept', function ($rootScope, $q) {
    return {
      'request': function(config) {
        config.timeout = 10000;
        return config;
      }
    };
 }); 
```

然后在 .config 中注入 $httpProvider 并执行以下操作：

```
$httpProvider.interceptors.push('timeoutHttpIntercept'); 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-02-22T09:18:33.953

**更新**： $http 将不尊重在 httpProvider 中设置的超时默认设置（请参阅评论）。可能的解决方法：[https ://gist.github.com/adnan-i/5014277](https://gist.github.com/adnan-i/5014277)

原答案：

```
angular.module('MyApp', [])
  .config(['$httpProvider', function($httpProvider) {
    $httpProvider.defaults.timeout = 5000;
}]); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-08-07T19:18:54.233

感谢您的帖子和更新！

在专门研究这个问题时`$resource`，我想我会详细说明我的发现：

*   此问题已记录在跟踪器中，并且在 Angular 1.1.5 中，支持将超时属性传递给`$http`请求：

[https://github.com/angular/angular.js/issues/2190](https://github.com/angular/angular.js/issues/2190) [http://code.angularjs.org/1.1.5/docs/api/ngResource.$resource](http://code.angularjs.org/1.1.5/docs/api/ngResource.$resource)

*   对于我们这些使用早期版本的人，特别是我使用 angular 1.0.6，可以在第 396 行编辑 angular-resource.js 的源文件，您将找到`$http`可以自己为所有人添加超时属性的调用资源请求。

*   由于没有提及并且我必须测试 Stewie 的解决方案，当确实发生超时时，区分错误和中止/超时的方法是检查“状态”参数。它将返回`0`超时而不是说`404`：

    ```
    $http.get("/home", { timeout: 100 })
    .error(function(data, status, headers, config){
            console.log(status)
        } 
    ```

*   由于只有少数情况需要使用超时而不是全局设置，因此我将请求包装在一个`$timeout`函数中，如下所示：

    ```
    //errorHandler gets called wether it's a timeout or resource call fails

    var t = $timeout(errorHandler, 5000);
    myResource.$get( successHandler, errorHandler )   
    function successHandler(data){
        $timeout.cancel(t);
        //do something with data...
    }

    function errorHandler(data){
        //custom error handle code
    } 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-02T12:44:12.890

我有同样的要求，我正在使用 AngularJS 1.0.7。我想出了下面的代码，因为上述解决方案对我来说似乎都不可行（在我希望超时在一个地方是全局的意义上是可行的）。基本上，我屏蔽了原始的 $http 方法并`timeout`为每个`$http`请求添加并覆盖其他快捷方法，例如`get`, `post`, ... 以便他们使用新的 masked `$http`。

以下代码的[JSFiddle ：](http://jsfiddle.net/manikantag/4SCfD/)

```
/**
 * @name ngx$httpTimeoutModule
 * @description Decorates AngularJS $http service to set timeout for each
 * Ajax request.
 * 
 * Implementation notes: replace this with correct approach, once migrated to Angular 1.1.5+
 * 
 * @author Manikanta G
 */
;(function () {
    'use strict';

    var ngx$httpTimeoutModule = angular.module('ngx$httpTimeoutModule', []);

    ngx$httpTimeoutModule.provider('ngx$httpTimeout', function () {
        var self = this;
        this.config = {
            timeout: 1000 // default - 1 sec, in millis
        };

        this.$get = function () {
            return {
                config: self.config
            };
        };
    });

    /** 
     * AngularJS $http service decorator to add timeout
     */
    ngx$httpTimeoutModule.config(['$provide',  function($provide) {

        // configure $http provider to convert 'PUT', 'DELETE' methods to 'POST' requests
        $provide.decorator('$http', ['$delegate', 'ngx$httpTimeout', function($http, ngx$httpTimeout) {
            // create function which overrides $http function

            var _$http = $http;

            $http = function (config) {
                config.timeout = ngx$httpTimeout.config.timeout;
                return _$http(config);
            };
            $http.pendingRequests = _$http.pendingRequests;
            $http.defaults = _$http.defaults;

            // code copied from angular.js $HttpProvider function
            createShortMethods('get', 'delete', 'head', 'jsonp');
            createShortMethodsWithData('post', 'put');

            function createShortMethods(names) {
                angular.forEach(arguments, function(name) {
                    $http[name] = function(url, config) {
                        return $http(angular.extend(config || {}, {
                            method : name,
                            url : url
                        }));
                    };
                });
            }

            function createShortMethodsWithData(name) {
                angular.forEach(arguments, function(name) {
                    $http[name] = function(url, data, config) {
                        return $http(angular.extend(config || {}, {
                            method : name,
                            url : url,
                            data : data
                        }));
                    };
                });
            }

            return $http;
        }]);

    }]);

})(); 
```

对上述模块添加依赖，通过配置来配置超时时间`ngx$httpTimeoutProvider`，如下：

```
angular.module('App', ['ngx$httpTimeoutModule']).config([ 'ngx$httpTimeoutProvider', function(ngx$httpTimeoutProvider) {
    // config timeout for $http requests
    ngx$httpTimeoutProvider.config.timeout = 300000; // 5min (5 min * 60 sec * 1000 millis)

} ]); 
```

# c# - 将文件从一个目录移动到另一个目录

> ID：15015425
> 
> 赞同：3
> 
> 时间：2013-02-22T01:33:15.073
> 
> 标签：c#, directory, move

我用 DotNetZip 创建了一个 zip 文件/文件夹。我正在尝试将该文件从原始目录/文件夹移动到另一个，例如我的文档。到目前为止，我已经完成了以下操作，但它给了我一个错误，说它找不到路径的一部分。

```
private static void Move()
{
    try
    {
        Directory.Move(@"Debug\Settings.zip", IO.Paths.Enviroment.MyDocuments);
    }
    catch(Exception ex)
    {
        Console.WriteLine(ex.Message);
    }
} 
```

更新：所以我玩了一下，笑了不是因为我修好了它，而是因为它很奇怪。我同时使用`File.Move()`and`Directory.Move()`并更改`both.Move(@"Debug\Settings.zip",...);`为`both.Move(@"Settings.zip",...);`然后得到一个错误说`Cannot create a file when that file already exists.`

![目录树](../Images/e0b9fe24172bb089b9c3544248e8f45c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T01:35:01.387

虽然使用[`Directory.Move`](http://msdn.microsoft.com/en-us/library/system.io.directory.move.aspx)移动文件可能看起来很奇怪（我会使用它[`File.Move`](http://msdn.microsoft.com/en-us/library/system.io.file.move.aspx)），但[Jean-Philippe Leclerc](https://stackoverflow.com/users/613568/jean-philippe-leclerc)指出它会起作用。

问题在于路径`Debug\Settings.zip`：

所有相对路径都相对于工作目录。默认情况下，工作目录是执行程序集（您的程序）的文件夹，而在调试时，它是`bin\Debug`您项目的子文件夹。因此，您的路径`Debug\Settings.zip`扩展为如下路径：

```
C:\..\MyProject\bin\Debug\Debug\Settings.zip 
```

这可能不是你的意思。你的意思是`"Settings.zip"`。

它是 ZIP 的事实是无关紧要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T01:36:54.543

**`could not find part of the path`**- 错误似乎`Relative Path`您的文件`Settings.Zip`不是有效路径！

* * *

您需要使用`File.Move`，`Directory.Move`将目录的全部内容移动到不同的文件夹。

`File.Move`：仅将文件移动到指定位置

```
private static void Move()
        {
            try
            {
                File.Move(@"Debug\Settings.zip", System.Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments));
            }
            catch(Exception ex)
            {
                Console.WriteLine(ex.Message);
            }
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T01:37:40.997

使用**System.Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments)**获取您的 MyDocuments 路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T07:14:43.000

固定的！问题首先是`"Debug\Settings.zip"`应该是`"Settings.zip"`或`@"Settings.zip"`最终目标不应该只是，`System.IO.File.Move(@"Settings.zip", System.Environment.GetFolderPath(System.Environment.SpecialFolder.Desktop));`而是`System.IO.File.Move(@"Settings.zip", System.Environment.GetFolderPath(System.Environment.SpecialFolder.Desktop) + @"\Settings.zip");`基本上，在目标字符串的末尾添加文件名和文件扩展名。

# opengl-es - Raspberry Pi 上 3D 图形的红色/系统绑定

> ID：15015432
> 
> 赞同：0
> 
> 时间：2013-02-22T01:34:05.537
> 
> 标签：opengl-es, raspberry-pi, rebol3, red, red-system

对于刚开始在 Raspberry Pi 上进行 Red/System 编程的人，访问 GPU 进行 3D 渲染的最佳方式是什么？这种方法也可以用于树莓派上的 Rebol3 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-20T19:00:48.147

我对 Red/System 的 OpenGL 绑定将是起点：

[http://red.esperconsultancy.nl/Red-OpenGL](http://red.esperconsultancy.nl/Red-OpenGL)

我目前正在为 Raspberry Pi 扩展它。当前绑定适用于桌面 OpenGL。对于 Raspberry Pi 和其他小型平台，我正在开发 OpenGL-ES 绑定。此外，OpenGL 需要目标平台上的环境。该绑定有多个后端，例如 SDL，但这些在 Raspberry Pi 上不起作用，因为它使用 EGL 与 Broadcom 定义的自己的环境相结合。我也在为这些开发额外的后端。

Red 的绑定，包括完成 Raspberry Pi 支持后的绑定，可用于基于我的 Red/REBOL 3 桥接的 REBOL 3 扩展：

[http://red.esperconsultancy.nl/Red-REBOL-3](http://red.esperconsultancy.nl/Red-REBOL-3)

但是，编写这样的扩展是一项额外的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-28T04:11:36.760

Kaj de Vos 的答案中的网站不再有效。

您可能会发现它的镜像很有用： [https ://github.com/red/RS-fossil-mirror](https://github.com/red/RS-fossil-mirror)

或者 red/code 仓库： [https ://github.com/red/code/tree/master/Library/OpenGL](https://github.com/red/code/tree/master/Library/OpenGL)

# interface-builder - UIPopoverController without interface builder?

> ID：15015436
> 
> 赞同：1
> 
> 时间：2013-02-22T01:34:18.760
> 
> 标签：interface-builder, uipopovercontroller

Are there any tutorials on UIPopoverController or creating UIPopovers without using interface builder?

I want to learn what is happening first before I use IB. All of the tutorials I have seen have been with interface builder.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T09:45:48.767

I learned very fast with the sample code "Popover" at the Xcode library. It shows with very simple coding how set up a popover and present it.

# asp.net - ASP.NET 内存转储包含完整 html 页面的字符串是否正常？

> ID：15015439
> 
> 赞同：2
> 
> 时间：2013-02-22T01:34:31.450
> 
> 标签：asp.net, sitecore, windbg, dump, large-object-heap

我们有一种情况，ASP.NET 工作进程间歇性地使用 100% 的 CPU。在分析 perfmon 结果和内存转储后，我们看到垃圾收集器正在大量使用 CPU 时间的迹象。

使用 WinDbg，我们看到 LOH 充满了包含 HTML 页面的完整页面的字符串。字符串的**!gcroot**通常找不到任何根。问题是这在 ASP.NET 应用程序上是正常的还是对于我们构建网站的方式更具体？

需要注意的是，这个 ASP.NET 网站是一个基于 Sitecore 的网站。我们知道 Sitecore 会缓存 HTML 输出，但据我了解，Sitecore 不会缓存整个页面，而只会缓存渲染级别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T01:46:13.873

完整的 html 页面在内存中是正常的，因为特别是[当页面缓冲区打开时（默认情况下），asp.net 在内存中构建页面](http://msdn.microsoft.com/en-us/library/system.web.ui.page.buffer.aspx)，并在页面完全渲染后发送它到浏览器。

现在在某些情况下[，我看到程序员使用页面的渲染功能](https://stackoverflow.com/questions/883922/modify-html-output-at-server-side-in-asp-net)来获取该 html，然后搜索和替换一些字符串。所以在这种情况下，也可以在内存中找到完整的 html 页面。

现在，如果您看到您的 cpu 为 100%，请检查是否出现崩溃。如果不是，那么您可能有一些繁重的计算，或者很多[linq 查询](https://stackoverflow.com/questions/2749183/linq-to-sql-too-much-cpu-usage-what-happens-when-there-are-multiple-users)，或类似的东西。

# ember.js - 如何在 ember.js RC1 中手动调用路由

> ID：15015442
> 
> 赞同：1
> 
> 时间：2013-02-22T01:34:49.803
> 
> 标签：ember.js

我有以下控制器，我想使用 send 冒泡一个事件

```
App.PersonController = Ember.ObjectController.extend({
  page: function(page) {
    var model = PersonApp.Page.create({id: page});
    this.send("person.page", model); //should bubble up ...
  }
}); 
```

这是我的路线设置

```
PersonApp.Router.map(function(match) {
    this.resource("person", { path: "/" }, function() {
        this.route("page", { path: "/page/:page_id" });
    }); 
}); 
```

这是简单的页面模型（基本上是垫片）

```
PersonApp.Page = Ember.Object.extend({                                                                                                 
}); 
```

虽然我正在使用路由“person.page”并且我正在传递一个有效的模型，但我收到以下错误（似乎路由器没有这个路由？）

未捕获的错误：没有处理事件“person.page”。

如果它有助于调试我在控制器内部发现的控制器/路由器关系，如果我转储 this.get('target') ...

> _debugContainerKey：“路由器：主”

如果我进一步挖掘......并打印这个

this.get('target').get('router')

我在 currentHandlerInfos 数组下看到一个带有我的路由的路由器......虽然我不确定我是否应该这么深

...另一个小更新

如果我这样做（完全成熟），它似乎会修改 window.location 但我在路线上的模型/设置控制器钩子永远不会被击中

this.get('target').get('router').transitionTo(route, model);

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T09:42:10.140

我认为， send 仅用于路由事件。假设您的控制器会像这样调用发送：

```
//in the controller
this.send("personPage", model);

// a matching Route
App.PersonRoute = Ember.Route.extend({
  events : {
    personPage : function(page){
      // this should be called 
    }
  }
}); 
```

对于您的情况，您需要利用 transitionTo （我认为您对路由器属性的访问太多了。Ember.Router 的路由器实例再次具有路由器属性。非常令人困惑:-)）。

```
this.get("target").transitionTo("person.page", model); 
```

# erlang - Erlang gen_udp 将数据包发送到 IP 地址？

> ID：15015450
> 
> 赞同：1
> 
> 时间：2013-02-22T01:36:03.113
> 
> 标签：erlang, udp, ip-address

我尝试使用以下代码进行简单测试，以通过 Internet 发送数据包。我确实检查了本地主机版本是否适用于以下命令并且它确实有效，但如果我用真实的互联网地址替换本地主机（127.0.0.1）它就不起作用，我的。我只是在客户端得到 0 并且服务器端没有任何变化，尽管使用 localhost 与服务器端相同。

服务器端：

`udp_test:start_server().`

客户端：

`udp_test:client(40).`

很简单，但是当我用我的 IP 地址替换 127.0.0.1 时，我什么也得不到（我也关闭了防火墙）。我的家庭网络的基本拓扑结构包括一个无线调制解调器（使用 dsl），我的计算机通过无线 USB 卡连接。网络上大约还有另外两台活动计算机。我认为这可能与连接有关。

我还想知道如何修改代码以便我可以键入`udp_test:client(40,127.0.0.1).` 并更改客户端函数以接受 udp_test 中的两个参数？我尝试简单地执行`client(N,ip)`和更改函数`gen_udp:send(Socket, "ip",,)`，但出现了不匹配子句错误。

```
-module(udp_test).
-export([start_server/0, client/1]).

start_server() ->
    spawn(fun() -> server(4000) end).

%% The server         
server(Port) ->
    {ok, Socket} = gen_udp:open(Port, [binary]),
    io:format("server opened socket:~p~n",[Socket]),
    loop(Socket).

loop(Socket) ->
    receive
    {udp, Socket, Host, Port, Bin} = Msg ->
        io:format("server received:~p~n",[Msg]),
        N = binary_to_term(Bin),
        Fac = fac(N),
        gen_udp:send(Socket, Host, Port, term_to_binary(Fac)),
        loop(Socket)
    end.

fac(0) -> 1;
fac(N) -> N * fac(N-1).

%% The client

client(N) ->
    {ok, Socket} = gen_udp:open(0, [binary]),
    io:format("client opened socket=~p~n",[Socket]),
    ok = gen_udp:send(Socket, "127.0.0.1", 4000, 
              term_to_binary(N)),
    Value = receive
        {udp, Socket, _, _, Bin} = Msg ->
            io:format("client received:~p~n",[Msg]),
            binary_to_term(Bin)
        after 2000 ->
            0
        end,
    gen_udp:close(Socket),
    Value. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T06:09:56.657

写 {127,0,0,1} 而不是“127.0.0.1”。

[IP地址](http://www.erlang.org/doc/man/inet.html#type-ip_address)

# file - 如何在 Files.walkFileTree 期间防止 AccessDeniedException？

> ID：15015451
> 
> 赞同：3
> 
> 时间：2013-02-22T01:36:12.743
> 
> 标签：file, java-7, nio2

我正在尝试使用 Java 1.7 nio。当我打电话

Files.walkFileTree(source[i], tc);

其中 source[i] 是我的 Windows 文件系统上的任何文件夹，而 tc 是 SimpleFileVisitor，我得到一个 java.nio.file.AccessDeniedException。我检查了文件夹和文件夹内容，并确保所有用户都允许读取、写入和执行。

我可以使用 File 很好地访问该文件。为什么 walkFileTree 访问文件有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T03:07:01.913

我找到了解决这个问题的方法。我覆盖了 visitFile 方法，它错误地引用了文件路径。

# python - 是否有任何单个函数可以打印可迭代的值？

> ID：15015452
> 
> 赞同：24
> 
> 时间：2013-02-22T01:36:14.633
> 
> 标签：python, iterator

假设我有一个可迭代的：

`var = "ABCDEF"`

我得到这样的迭代：

`it = itertools.combinations(var,2)`

是否有任何单个函数可以打印可迭代的所有值，例如

`printall(it)`

而不是使用`for`循环？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-22T01:38:40.727

这取决于你想要什么，如果你想打印出所有的值，你需要计算它们 - 一个可迭代的不保证在它们都被请求之前计算这些值，所以实现这一点的最简单方法[是清单](http://docs.python.org/3/library/functions.html#func-list)：

```
print(list(iterable)) 
```

这将以正常列表格式打印出项目，这可能是合适的。如果您希望每个项目都在新行上，最好的选择是，正如您所提到的，一个简单的 for 循环：

```
for item in iterable:
    print(item) 
```

如果您不需要特定格式的数据，而只需要可读性（例如，并非全部在一行上），您可能需要[查看`pprint`模块](http://docs.python.org/3/library/pprint.html)。

最后一个选项，我真的不觉得是最佳的，但为了完整性而提及，在 3.x 中是可能的，其中[函数`print()`非常](http://docs.python.org/3/library/functions.html#print)灵活：

```
print(*iterable, sep="\n") 
```

在这里，我们[将可迭代对象解包](http://docs.python.org/2/tutorial/controlflow.html#unpacking-argument-lists)为参数`print()`，然后将分隔符设为换行符（与通常的空格相反）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-22T01:40:41.137

您可以使用该`str.join`方法并将可迭代的每个元素加入新行。

```
print('\n'.join(it)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T02:11:05.517

您可以使用 format 允许每个元素按照您的意愿进行格式化：

```
>>> print '\n'.join('{:>10}'.format(e) for e in iter([1,2,'1','2',{1:'1'}]))
         1
         2
         1
         2
  {1: '1'} 
```

每个元素不一定是字符串，但`__repr__`如果不是字符串则必须有方法。

然后，您可以轻松编写所需的功能：

```
>>> def printall(it,w): print '\n'.join('{:>{w}}'.format(e,w=w) for e in it)
>>> printall([1,2,'3','4',{5:'6'}],10)
         1
         2
         3
         4
  {5: '6'} 
```

我正在使用一个列表，但任何可迭代的都可以。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-14T11:29:54.693

您可以使用itertools 中的[chain()](https://docs.python.org/3/library/itertools.html#itertools.chain)函数为 var 数据创建迭代器，然后使用迭代器的 * 运算符解包

```
>>> from itertools import chain
>>> var = 'ABCDEF'
>>> print(*chain(var))
A B C D E F
>>> print(*chain(var), sep='\n')
A
B
C
D
E
F 
```

如果您只需要遍历现有数据并再次打印出来，您可以使用星号运算符 *

```
>>> print(*var)
A B C D E F
>>> print(*var, sep='\n')
A
B
C
D
E
F 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-04T23:16:19.797

如果您坚持一个解决方案，它在没有循环的情况下进行迭代`for`并*适用*于无限迭代器：

```
from more_itertools import consume

def printall(it):
    consume(map(print, it)) 
```

而不是`for`我们`consume`这里的循环。
请注意，在这种情况下，迭代器在打印时被消耗。

当然，这也适用于无限迭代器：

```
from itertools import count

printall(count()) 
```

只是为了好玩。:)

# variables - 使用 onclick 时，coffeescript 中的变量值不会改变

> ID：15015460
> 
> 赞同：1
> 
> 时间：2013-02-22T01:37:24.233
> 
> 标签：variables, onclick, coffeescript

我有以下 Coffeescript 代码：

```
for name, data of statistics
    row = document.createElement 'tr'
    row.onclick = ->
        alert name 
```

但是，当我编译并运行它（在大型网页的上下文中）时，它会提醒相同的名称，无论我单击哪一行。它似乎在记住变量，就好像它是常数一样。

我究竟做错了什么？

编辑：

我发现了这个问题，但我不确定如何解决它：Javascript/Coffeescript 在循环结束之前不会评估“名称”变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T02:12:20.990

您定义的函数（并分配给该行的 onclick 属性）都可以访问该函数（名称）之外的相同变量。在循环结束时， name 有一个值（循环中的最后一项，正如您所提到的），因此每个 onclick 函数都会提醒该值。

您可以通过将“名称”绑定到一个不变的值来解决此问题。[这个问题](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)提供了一种解决方案。[这个问题](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)有一些有用的背景值得一读。

# language-agnostic - 与软件开发有关的“端口”一词是什么意思？

> ID：15015466
> 
> 赞同：4
> 
> 时间：2013-02-22T01:38:02.647
> 
> 标签：language-agnostic, definition

我正在阅读一本关于 ASP.NET MVC 的书，它指出：

> “NVelocity 是 Java Apache Velocity 模板引擎的一个端口，而 NHaml 是 Ruby on Rails Haml 引擎的一个端口”。

在这种情况下，“端口”一词是什么意思？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T01:39:23.130

来自Wikipedia 上的[移植（软件工程）条目：](http://en.wikipedia.org/wiki/Porting)

> 在软件工程中，移植是调整软件的过程，以便可以为不同于最初设计的计算环境创建可执行程序[*或库]（例如[**不同的语言*，]不同的CPU，操作系统或第三方库）..
> 
> ..“港口”一词源自拉丁语portare，意思是“携带”。当代码与特定操作系统[*或语言*]或体系结构不兼容时，必须将代码“携带”[或“移植”]到新系统。

因此，“一个端口”是“移植”的结果，“端口”有很*多种*。

在某些情况下，一个移植可能是*“仅在精神上”*，大量借鉴了原始实现的*思想，但不共享任何代码；*库通常会进一步分歧以利用目标语言功能。

另一方面，应用程序端口——尤其是那些被设计为可在不同“UNIX”环境之间移植的端口——可能共享除了构建过程之外的所有内容。

# javascript - 按钮不会更改 JQuery UI 选项卡中的选项卡

> ID：15015467
> 
> 赞同：0
> 
> 时间：2013-02-22T01:38:20.170
> 
> 标签：javascript, jquery

我有一个网页，其中包含在第二个到第四个选项卡中加载的 iFrame 的 JQuery 选项卡。我的问题出在我添加到第一个选项卡的按钮中。我希望该按钮在按下时更改为下一个选项卡。

编辑1：这是一个显示我的问题的提琴手。[http://jsfiddle.net/lochalan/AXa9J/](http://jsfiddle.net/lochalan/AXa9J/)

网页：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Student Application</title>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
<script src="/user/tabs.js" type="text/javascript"></script>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css"> 
            html {
                font-size:10px;
            }

            .iframetab {
                width:100%;
                height:auto;
                border:0px;
                margin:0px;
                position:relative;
                top:-13px;
            }

            .ui-tabs-panel {
                padding:5px !important;
            }

            .openout {
                float:right;
                position:relative;
                top:-28px;
                left:-5px;
            }
        </style>
</head>

<body>
    <table width="100%" cellpadding="0" cellspacing="0" border="0">
    <tr><td>
    <img src="img/logo960x100moodle.png" width="960" height="92" alt=""><br>
    </td></tr>
    </table>

<div id="tabs">
  <ul>
    <li><a href="#tabs-1">Instructions</a></li>
    <li><a class="tabref" href="#tabs-2" rel="/user/application-tab.php">Student Information</a></li>
    <li><a class="tabref" href="#tabs-3" rel="/user/emergency-tab.php">Emergency Contact</a></li>
    <li><a class="tabref" href="#tabs-4" rel="/user/healthform-tab.php">Health Form</a></li>
  </ul>
  <div id="tabs-1" class="tabMain">
    <h2>Welcome to QSI Shekou!</h2>
        <p>This application is designed to give the school all the information needed to make an informed decision as to whether QSI is the best school for your child. We believe all children can be successful and we are proud that you have choosen QSI Shekou as that place. In the next few minutes, you will be presented with 3 seperate application forms. The first application gathers the needed biographical information about your child. The second form provides the school with emergency contact information and instructions in the event the school needs to contact someone on your child's behalf. The third form is our health form. This provides the school with information about your child's health in order to help us make QSI Shekou a fun and safe place to learn and grow.</p>
        <p><strong>Remember to give the following documents to the admissions department:</strong></p>
            <ul>
                <li>Immunization records (copy)</li>
                <li>Health / Emergency Form (Found on our Website)</li>
                <li>Previous School Records (copy)</li>
                <li>Student's Passport (copy)</li>
                <li>Student's Visa (copy)</li>
                <li>Mother's Passport (copy)</li>
                <li>Mother's Visa (copy)</li>
                <li>Father's Passport (copy)</li>
                <li>Father's Visa (copy)</li>
                <li>3 Student Passport Photos</li>
            </ul>       
        <button class="nexttab" href="#"><strong>Let's get started!</strong></button>
  </div>
  <div id="tabs-2">
  </div>
  <div id="tabs-3">
  </div>
  <div id="tabs-4"> 
  </div>
</div>

</body>
</html> 
```

Javascript / JQueryUI：

```
$(document).ready(function() {
    var $tabs = $('#tabs').tabs();

    $(".nexttab").click(function() {
    var selected = $("#tabs").tabs("option", "selected");
    $("#tabs").tabs("option", "selected", selected + 1);
    });

//get selected tab
    function getSelectedTabIndex() {
        return $tabs.tabs('option', 'selected');
    }

//get tab contents
    beginTab = $("#tabs ul li:eq(" + getSelectedTabIndex() + ")").find("a");
    loadTabFrame($(beginTab).attr("href"),$(beginTab).attr("rel"));

     $("a.tabref").click(function() {
        loadTabFrame($(this).attr("href"),$(this).attr("rel"));
     });

//tab switching function
    function loadTabFrame(tab, url) {
        if ($(tab).find("iframe").length == 0) {
            var html = [];
            html.push('<div class="tabIframeWrapper">');
            html.push('<div class="openout"><a href="' + url + '"><img src="data/world.png" border="0" alt="Open" title="Remove iFrame" /></a></div><iframe class="iframetab" src="' + url + '">Load Failed?</iframe>');
            html.push('</div>');
            $(tab).append(html.join(""));
            $(tab).find("iframe").height($(window).height()-80);
        }
    return false;
    }

}); 
```

为什么我的按钮不会更改选项卡？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T01:53:08.623

使用`active`选项选择当前或更改选项卡

```
var selected = $("#tabs").tabs("option", "active");
$("#tabs").tabs("option", "active", selected + 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T02:41:43.190

这里有一些问题，不幸的是，我愿意在论坛上介绍。

如果您打算使用 jQueryUI，那么我建议您使用[ThemeRoller](http://jqueryui.com/themeroller/)。做一个 UI 主题并使用它为你生成的 CSS。这些类的命名非常直观，它将帮助您识别您的功能正在处理什么。使用带有 Firebug 插件的 Firefox，以便您进行调试。你走在正确的轨道上，但你对一些核心概念仍然模糊不清。

[jQuery 选项卡 API](http://api.jqueryui.com/tabs/)
[jQueryUI ThemeRoller](http://jqueryui.com/themeroller/)

# python - 迭代多维 numpy 数组中的向量

> ID：15015471
> 
> 赞同：2
> 
> 时间：2013-02-22T01:38:44.907
> 
> 标签：python, numpy

我有一个 3xNxM numpy 数组 a，我想遍历最后两个轴：a[:,x,y]。不优雅的方法是：

```
import numpy as np
a = np.arange(60).reshape((3,4,5))
M = np. array([[1,0,0],
               [0,0,0],
               [0,0,-1]])

for x in arange(a.shape[1]):
    for y in arange(a.shape[2]):
        a[:,x,y] = M.dot(a[:,x,y]) 
```

这可以用nditer完成吗？这样做的目的是对每个条目执行矩阵乘法，例如 a[:,x,y] = M[:,:,x,y].dot(a[:,x,y])。另一种 MATLAB 风格的方法是将 a 重塑为 (3,N*M) 并将 M 重塑为 (3,3*N*M) 并采用点积，但这往往会占用大量内存。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T02:41:34.543

虽然玩弄这些形状可能会使您想要完成的工作更加清晰，但无需过多思考即可处理此类问题的最简单方法是[`np.einsum`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.einsum.html)：

```
In [5]: np.einsum('ij, jkl', M, a)
Out[5]: 
array([[[  0,   1,   2,   3,   4],
        [  5,   6,   7,   8,   9],
        [ 10,  11,  12,  13,  14],
        [ 15,  16,  17,  18,  19]],

       [[  0,   0,   0,   0,   0],
        [  0,   0,   0,   0,   0],
        [  0,   0,   0,   0,   0],
        [  0,   0,   0,   0,   0]],

       [[-40, -41, -42, -43, -44],
        [-45, -46, -47, -48, -49],
        [-50, -51, -52, -53, -54],
        [-55, -56, -57, -58, -59]]]) 
```

此外，它通常附带绩效奖金：

```
In [17]: a = np.random.randint(256, size=(3, 1000, 2000))

In [18]: %timeit np.dot(M, a.swapaxes(0,1))
10 loops, best of 3: 116 ms per loop

In [19]: %timeit np.einsum('ij, jkl', M, a)
10 loops, best of 3: 60.7 ms per loop 
```

* * *

**EDIT** `einsum`是非常强大的巫术。您还可以执行 OP 在下面的评论中提出的要求，如下所示：

```
>>> a = np.arange(60).reshape((3,4,5))
>>> M = np.array([[1,0,0], [0,0,0], [0,0,-1]])
>>> M = M.reshape((3,3,1,1)).repeat(4,axis=2).repeat(5,axis=3)
>>> np.einsum('ijkl,jkl->ikl', M, b)
array([[[  0,   1,   2,   3,   4],
        [  5,   6,   7,   8,   9],
        [ 10,  11,  12,  13,  14],
        [ 15,  16,  17,  18,  19]],

       [[  0,   0,   0,   0,   0],
        [  0,   0,   0,   0,   0],
        [  0,   0,   0,   0,   0],
        [  0,   0,   0,   0,   0]],

       [[-40, -41, -42, -43, -44],
        [-45, -46, -47, -48, -49],
        [-50, -51, -52, -53, -54],
        [-55, -56, -57, -58, -59]]]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T01:51:21.267

```
for x in np.arange(a.shape[1]):
    for y in np.arange(a.shape[2]):
        a[:,x,y] = M.dot(a[:,x,y]) 
```

相当于

```
a = np.dot(M,a.swapaxes(0,1)) 
```

* * *

```
In [73]: np.dot(M,a.swapaxes(0,1))
Out[73]: 
array([[[  0,   1,   2,   3,   4],
        [  5,   6,   7,   8,   9],
        [ 10,  11,  12,  13,  14],
        [ 15,  16,  17,  18,  19]],

       [[  0,   0,   0,   0,   0],
        [  0,   0,   0,   0,   0],
        [  0,   0,   0,   0,   0],
        [  0,   0,   0,   0,   0]],

       [[-40, -41, -42, -43, -44],
        [-45, -46, -47, -48, -49],
        [-50, -51, -52, -53, -54],
        [-55, -56, -57, -58, -59]]]) 
```

* * *

解释：

对于多维数组，在 的最后一个轴[和 的倒数第二个](http://docs.scipy.org/doc/numpy/reference/generated/numpy.dot.html#numpy-dot)`np.dot(M,a)` [轴上执行求和积。`M``a`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.dot.html#numpy-dot)

`a`形状为 (3,4,5)，但我们想对形状为 3 的轴求和。由于倒数第二个轴将被求和，我们需要`a.swapaxis(0,1)`-- 形状为 (4,3,5 ) -- 将 3 移动到倒数第二个轴。

`M`具有形状 (3,3)，`a.swapaxis(0,1)`具有形状 (4,3,5)。删除最后一个轴`M`和倒数第二个轴`a.swapaxis(0,1)`留下 (3,) 和 (4,5)，因此返回的结果`np.dot`是一个形状为 (3,4,5) 的数组 - 正是我们想。

# javascript - Pagemethods(webservices) 上的 Firebug (firefox) 注入

> ID：15015472
> 
> 赞同：0
> 
> 时间：2013-02-22T01:38:53.817
> 
> 标签：javascript, jquery, web-services

在我开发一些 Web 应用程序时，对我来说，使用 Web 服务与服务器进行交互是最佳选择，而我喜欢用客户端（JQuery）来做其余的事情。但是当我测试我的代码时，我遇到了一个巨大的漏洞，我不知道如何防止它。

问题是我可以轻松地注入 javascript 并运行任何功能，包括来自 firefox 的 firebug 工具的 webmethods。这是已知的事情，应该采取哪些措施来防止它。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T01:41:48.403

这根本不是一个洞。客户端只能在他们自己的计算机上从您那里下载的页面上运行 JavaScript 代码。它对您的网站完全没有影响。

至于他们通过 JavaScript 发出请求的能力——嗯，他们也可以通过浏览器发出请求。有什么不同？只需确保您的服务器正确验证所有请求——它应该尽可能将任何请求视为恶意请求。

# testing - Google Analytics 中 AB 测试期间的子域跟踪

> ID：15015475
> 
> 赞同：1
> 
> 时间：2013-02-22T01:39:39.137
> 
> 标签：testing, google-analytics, analytics

我正在 www.gunnars.com 的类别页面上运行 AB 测试，我看到**来自主页的夸大推荐数据**。
当前启用了子域跟踪，因为该站点具有多个子域，包括一次结帐。我们使用 Tealium 作为标签管理器，在 Tealium 中的 GA 代码如下所示：我们做错了什么？

```
//tealium universal tag - utag.sender.7001 ut4.0.##UTVERSION##, Copyright ##UTYEAR## Tealium.com Inc. All Rights Reserved.
var _gaq = _gaq || [];
try{
(function(id,loader,u){
  try{u=utag.o[loader].sender[id]={}}catch(e){u=utag.sender[id]};
  u.ev={'view':1,'link':1};
  u.max_custom=10;
  u.clearVar=function(){for(var i=1;i<=u.max_custom;i++){_gaq.push([u.prefix+'_deleteCustomVar',i])}};
  u.domain="##UTVARconfig_domain##" || utag.loader.lh();
  u.prefix="##UTVARconfig_prefix##";
  u.prefix=((u.prefix)?u.prefix+'.':'');
  u.ga1="##UTVARconfig_accountprimary##";
  u.setallowlinker=##UTVARconfig_setallowlinker##;
  u.inpage_linkid=##UTVARconfig_inpagelinkid##;
  if(u.inpage_linkid){_gaq.push(['_require', 'inpage_linkid', '//www.google-analytics.com/plugins/ga/inpage_linkid.js'])};
  _gaq.push([u.prefix+'_setAccount',u.ga1]);
  u.anonymizeIp="##UTVARconfig_anonymizeip##";
  if(u.anonymizeIp==="true"){_gaq.push(['_gat._anonymizeIp'])};
  _gaq.push([u.prefix+'_setDomainName',u.domain]);
  if(u.setallowlinker || u.domain=='none'){_gaq.push([u.prefix+'_setAllowLinker', true])};
##UTGEN##
  u.send=function(a,b,c,d,e,f,g){
    if(u.ev[a]||typeof u.ev.all!="undefined"){
      u.a=a;
      ##UTEXTEND##
      for(c in utag.loader.GV(b)){if(typeof u.map[c+":"+b[c]]!="undefined"){b[c+":"+b[c]]=b[c]}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-18T20:57:36.880

如果您可以使用 Universal Analytics，除了不需要更改子域的跟踪脚本之外，您还可以创建过滤视图，如下所示： [https ://coderwall.com/p/ygzyfg](https://coderwall.com/p/ygzyfg)

本质上：管理员>查看（+新建）>过滤器（+新建）>“仅包含”+“到主机名的流量”+“包含”+“subdomain.host.com”

# xmlbeans - java.lang.NoClassDefFoundError: javax/xml/stream/XMLStreamException 在 jboss 上部署时

> ID：15015477
> 
> 赞同：1
> 
> 时间：2013-02-22T01:40:04.463
> 
> 标签：xmlbeans

我有一个奇怪的问题，从 3 天开始就会让我发疯。我正在使用 wsdl 文件中的轴生成客户端存根（xmlbeans），然后使用它来调用 Ms CRM Web 服务。我的 web 服务调用在 eclipse 中运行良好（已将生成的 xml 资源添加到类路径），当我将所有内容导出到我的 jboss 服务器时，我收到此错误：原因是 'java.lang.reflect.InvocationTargetException' java.lang.NoClassDefFoundError ：javax/xml/stream/XMLStreamException

XMLStreamException 在 xmlbeans-2.3.jar 文件中，该文件包含在服务器端的依赖项中，所以我不明白为什么它在部署到 jboss 时停止工作。

JDK 版本与 lib jar 完全相同。

请有任何想法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-03-04T11:22:39.617

适用于版本 <= 3.17 (Java 6)：

此错误表明 XMLEventFactory 类不提供 POI 所依赖的功能。这可能有多种不同的原因：

过时的 xml-apis.jar、stax-apis.jar 或 xercesImpl.jar：Java 5 和更低版本需要这些库，但实际上并不需要符合规范的 Java 6 实现，因此请尝试从类路径中删除这些库。如果这不可行，请尝试升级到这些 jar 文件的较新版本。运行 IBM Java 6（可能作为 WebSphere Application Server 的一部分）：IBM Java 6 不提供 XML 标准所需的所有接口，似乎只有 IBM Java 7 提供了正确的接口，因此请尝试升级您的 JDK。

# php - SplFileObject::READ_CSV 似乎没有正确读取 CSV 文件 - 忽略附件“

> ID：15015480
> 
> 赞同：5
> 
> 时间：2013-02-22T01:40:28.200
> 
> 标签：php, csv, splfileobject

在问这个问题之前，我已经阅读了文档并广泛搜索了这个网站。

```
$file = new SplFileObject("/var/www/qacentre/compliance/compliance.csv");
$file->setFlags(SplFileObject::READ_CSV);
foreach ($file as $row) {

} 
```

CSV 行示例；

`"ABEL, TAMMY 454454","End of: ABEL, TAMMY 454454",QP544454,28/10/2012 11:41,"0811 unlawfully use, possess","STEPHENS, JEREMY 54544454",LINK OPERATIONS,Located details incorrect,Entity: FORD FALCON Reg #: Colour: White`

我已经回显了输出，但它似乎无法识别外壳字符（“）。`SetCSVControl`尽管我使用的是默认外壳，但我尝试使用它。我还尝试在其中转义外壳字符`SetCSVControl`（因为我无法控制我正在导出的 CSV 文件）。

例如，当我打印第一列的结果时，应该是 (ABEL, TAMMY 454454) 我正在接收 ("ABEL)。

我读过这可能是我的语言环境设置的问题（en-GB，en-US；q=0.8，en；q=0.6）？

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-16T09:15:19.697

你可以使用 [SplFileObject::fgetcsv](http://php.net/manual/en/splfileobject.fgetcsv.php)

```
 public array SplFileObject::fgetcsv ([ string $delimiter = "," [, string $enclosure = "\"" [, string $escape = "\\" ]]] ) 
```

它在示例中说；

```
<?php
$file = new SplFileObject("data.csv");
while (!$file->eof()) {
    var_dump($file->fgetcsv());
}
?> 
```

或者

```
<?php
$file = new SplFileObject("animals.csv");
$file->setFlags(SplFileObject::READ_CSV);
foreach ($file as $row) {
    list($animal, $class, $legs) = $row;
    printf("A %s is a %s with %d legs\n", $animal, $class, $legs);
}
?> 
```

笔记：

> %s 表示字符串，%d 是整数

在您的具体情况下

```
$file = new SplFileObject("/var/www/qacentre/compliance/compliance.csv");
$file->setFlags(SplFileObject::READ_CSV);
foreach ($file as $row) {
var_dump($row);
} 
```

或者你可以

```
<?php

    $file = new SplFileObject("/var/www/qacentre/compliance/compliance.csv");
    while (!$file->eof()) {
        var_dump($file->fgetcsv());
    }
?> 
```

# windows-7 - 取消组合 jpg 图像的 powerpoint 对象

> ID：15015484
> 
> 赞同：0
> 
> 时间：2013-02-22T01:41:18.343
> 
> 标签：windows-7, powerpoint, office-2007

有没有办法将保存的 powerpoint jpg 文件的对象取消组合？就像使用 powerpoint 制作的文本上的矩形形状并将图像保存为 jpg 一样，有没有办法分离矩形形状并查看文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T01:43:16.400

jpg 文件是平面的。它不在乎是人脸照片还是转换后的PowerPoint；您想要的信息不再出现在文件中。

# r - 提高 R 重新编码任务的速度

> ID：15015485
> 
> 赞同：1
> 
> 时间：2013-02-22T01:41:24.210
> 
> 标签：r, python-2.7

这个问题有多个步骤，所以请耐心等待。

**前提** 我创建的脚本重新编码了一个包含 43000 列的电子表格，每列都是一个包含 177 个观察值的唯一变量。观察结果都是不同的，都是十进制数。

然后将每个单独的变量重新编码为两组；基于截止点。这个截止点是根据我之前编写的脚本生成的。每个变量/列都有一个截止点 - 因此截止点是唯一的，并且来自 43000 个截止数字的列表。基于此，列中的数字随后被重新编码为两组；1 或 0 - 取决于它们是 > 还是 <。请参见下面的示例：

到目前为止，我的做法是使用 R plyr 包，例如：

```
Genedata$SPOCK1.202363_at_recode[Genedata$SPOCK1.202363_at<= 8.2244399999999995] <- "0"
Genedata$SPOCK1.202363_at_recode[Genedata$SPOCK1.202363_at> 8.2244399999999995] <- "1"
Genedata_Recoded$SPOCK1.202363_at_recode <- factor(Genedata$SPOCK1.202363_at_recode) 
```

在这种情况下，变量是 :`SPOCK1.202363_at`并且截止值是 8.2244399999999995

但是，鉴于变量名称和截止值都随每个单独的变量而变化，我不知道如何`apply`在 R 中使用该函数。

因此，我目前正在使用 PyPer 一个可以调用 R 函数的 Python 模块。使用占位符`%s`，我迭代地替换每个变量名和截止值。

**问题**

1) 目前打开 CSV 文件需要很长时间 --> 我认为保存为二进制文件或矩阵会加快速度。然而，这不是优先事项。

2）迭代；有没有办法通过使用 plyr 包的 recode 函数来使用具有两个变化变量的 apply 函数。

3）当前迭代所用的时间似乎随变量非线性增加。对于 1000 个变量，大约需要 30 秒，但对于 43000 个变量，它似乎变慢了。我不知道这是什么原因。也许是一个解释？

4）有没有办法使用多处理包轻松并行化迭代任务，从而进一步提高速度

**更新：**针对为什么“0”和“1”，数字或非数字无关紧要。我就是这么选的。最终，我分析的下一部分采用两组，无论是否为数字并处理它。

**更新 2：**改写前提更清楚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T06:37:20.427

想法#1：为什么不：

```
Genedata$SPOCK1.202363_at_recode <- factor( Genedata$SPOCK1.202363_at <= 8.2244399999999995, 
                                      labels=c("0", "1") ) 
```

这样你就不需要处理不等式两次。`factor`如果您可以将其作为逻辑向量接受，则可以跳过该呼叫：

```
Genedata$SPOCK1.202363_at_recode <-  Genedata$SPOCK1.202363_at <= 8.2244399999999995 
```

想法#2：对于名为“X”的矩阵的多行，这肯定会更快：

```
X <- (X < rep( colMeans(X), each=nrow(X) ) ) 
```

你可以这样做：

```
Genedata[ , cols_to_process] <- ( Genedata[ , cols_to_process] < 
                                  rep( cutoff_vector, 
                                         each=nrow(Genedata[ , cols_to_process]) ) ) 
```

请注意，这基本上是@flodel 的评论所暗示的，因为他将列转换为行并依赖于参数回收，然后恢复原始结构。关于并行化选项，我认为这个相当小的数据集不值得付出努力。这在一台 5 年的机器上花了大约 3 分钟：

```
 dfrm <- data.frame(matrix(rnorm(43000*170), 170) )
 cutoff <- rnorm(43000, 0, 0.2)
 system.time( dfrm[ , 1:43000] <- ( dfrm[ , 1:43000] < 
                                   rep( cutoff, 
                                          each=170 ) ) )
#   user  system elapsed 
#129.052  57.449 185.660 
```

转换为矩阵可能会大大加快速度：

```
 mtx <- matrix(rnorm(43000*170), 170) 
 system.time( mtx <- t(1*(t(mtx) > cutoff) )  )
 #  user  system elapsed 
 # 0.226   0.133   0.358 
 mtx <- matrix(rnorm(43000*170), 170)
 system.time( mtx[ , 1:43000] <- ( mtx[ , 1:43000] < 
                                   rep( cutoff, 
                                          each=170 ) ) )
 #  user  system elapsed 
 # 0.852   0.001   0.849 
 #Now do it all at once............
 system.time( mtx <- mtx < rep( cutoff, each=170 ) ) 
  # user  system elapsed 
  #0.095   0.000   0.094 
```

# java - Java 版本在 Websphere 中意味着什么？

> ID：15015486
> 
> 赞同：1
> 
> 时间：2013-02-22T01:41:31.930
> 
> 标签：java, websphere

我将开发面向 WebSphere 8.5 服务器的企业应用程序。WebSphere 8.5 与 Java EE 6 和 Java SE 7 一起工作。

那么，就代码开发而言，这意味着什么？Java EE 只是一组附加的企业库吗？Java EE 6 是否意味着它使用 Java 6 语法？我能否在 8.5 服务器上使用 Java 7 语法并仍然使用 Java EE 6 提供的框架和 Web 服务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T01:57:46.827

Java EE 实际上是各种技术的一组规范。每个规范通常都有一个 API（例如：javax.servlet.*、javax.ejb.* 等，由不同的供应商实现（例如：IBM websphere、JBoss、Weblogic 等）。这个想法是您只需学习和编写一次代码，但您可以使用您的代码（进行一些调整）和您对各种供应商实施的了解。

当您编译您的战争时，您通常必须在您的类路径中包含（仅用于编译目的 - 不一定打包）特定版本的 java ee api 组件（例如：java-servlet-2.5）。API 组件通常依赖于特定版本的 Java SE（例如：如果 API / 供应商实现使用泛型，则需要 Java SE 5 或更高版本）

[Java EE 需要向后兼容](http://www.oracle.com/technetwork/java/javaee/javaee-faq-jsp-135209.html#apps)，因此如果您针对 Java EE 6 API 编译和打包您的战争，它将在 Java EE 7 容器上运行。

您不一定必须使用 Java SE 7 API 在 Java EE 7 上运行您的代码，您始终可以针对较旧版本的 Java EE API（因此较旧的 Java SE）编译您的战争。仅当您针对最新版本的 API 进行编译时，新功能才可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T16:58:11.377

> 那么，就代码开发而言，这意味着什么？

这意味着，您应该了解 Java SE 才能使用 Java EE 标准创建应用程序。Java EE 基于 Java SE。

[Java SE 7 教程](http://docs.oracle.com/javase/tutorial/)
[Java EE 6 教程](http://docs.oracle.com/javaee/6/tutorial/doc/)

> Java EE 只是一组附加的企业库吗？

嗯，简化了很多事情......是的。

> Java EE 6 是否意味着它使用 Java 6 语法？我能否在 8.5 服务器上使用 Java 7 语法并仍然使用 Java EE 6 提供的框架和 Web 服务？

您可以在 Java EE 6 应用程序中使用 Java SE 7 语法。但是您也可以使用 Java SE 6 语法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T01:59:55.383

Java EE 规范确实针对特定的 Java SE 版本。例如，JSR 316 说：`Java EE 6 is the Enterprise Edition of version 6 of the Java platform, and thus will be built on Java SE 6.`个别规范可能仍会选择与较低版本的 Java SE 兼容，但绝不会与较高版本兼容。Java EE 实现是否实际运行在为其指定的更高 Java SE 版本上取决于实现。

通过@Arjan Tijms

# scala - 使用 scala.util.Try 进行理解时快速失败

> ID：15015495
> 
> 赞同：8
> 
> 时间：2013-02-22T01:41:47.720
> 
> 标签：scala, exception, try-catch

我真的很喜欢`scala.util.Try`Scala 2.10，它与 for-comprehension 一起工作的方式使得处理多个可能很容易出错的步骤。

例如，我们可以使用下面的代码来确保仅当且仅当一切都在控制之中并且我们正确地获取值时才打印出这两个数字。

```
def tryA: Try[Int] = {....}
def tryB: Try[Int] = {....}

for {
  a <- tryA
  b <- tryB
} { 
  println (s"We got:${a+b}")
} 
```

但我担心的一个问题是这段代码实际上忽略了任何异常，这意味着它看起来像下面的 try-cactch 块：

```
try {
  // .....
} catch {
  case _: Exception => // Swallow any exception
} 
```

据我所知，有一种说法是这种代码是难闻的，因为没有人会注意到发生了异常。

我想要实现的是，仍然使用`for`确保在`println`一切正常的情况下唯一执行，但是如果任何步骤中有任何异常，它都会炸毁并直接抛出异常。

目前这里是我如何做到这一点，但它似乎不太优雅，因为它引入了一个新`Try[Unit]`对象，所以我想知道如何才能使这段代码更好？

例如，是否可以摆脱`result`变量和`result.get`语句，但仍然抛出异常？

```
def tryA: Try[Int] = {....}
def tryB: Try[Int] = {....}

val result = for {
  a <- tryA
  b <- tryB
} yield { 
  println (s"We got:${a+b}")
}
result.get 
```

# 更新

为了让事情更清楚，这是这个问题中第一个代码的 Scala REPL 的结果。

```
scala> def tryA: Try[Int] = Success(1)
tryA: scala.util.Try[Int]

scala> def tryB: Try[Int] = Failure(new Exception("error"))
tryB: scala.util.Try[Int]

scala> for {
     |   a <- tryA
     |   b <- tryB
     | } { 
     |   println (s"We got:${a+b}")
     | }

scala> 
```

我们可以看到这里什么都没有发生，即使`tryB`是一个`Failure`例外。我想得到的是抛出一个异常，并且没有引入新`Try[Unit]`对象`yield`，这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T02:39:21.583

您可以使用`recover`：

```
import scala.util.Try

def tryEven = Try { val i = (math.random * 1000).toInt; if (i % 2 != 0) throw new Exception("odd") else i }

def tryEvenOrNeg1 = Try { val i = (math.random * 1000).toInt; if (i % 2 != 0) throw new Exception("odd") else i } recover { case exx: Exception => -1 }

scala> for (a <- tryEven; b <- tryEvenOrNeg1) yield println(s"Got $a, $b")
res1: scala.util.Try[Unit] = Failure(java.lang.Exception: odd)

scala> for (a <- tryEven; b <- tryEvenOrNeg1) yield println(s"Got $a, $b")
res2: scala.util.Try[Unit] = Failure(java.lang.Exception: odd)

scala> for (a <- tryEven; b <- tryEvenOrNeg1) yield println(s"Got $a, $b")
res3: scala.util.Try[Unit] = Failure(java.lang.Exception: odd)

scala> for (a <- tryEven; b <- tryEvenOrNeg1) yield println(s"Got $a, $b")
Got 542, -1

scala> for (a <- tryEven; b <- tryEvenOrNeg1) yield println(s"Got $a, $b")
res5: scala.util.Try[Unit] = Failure(java.lang.Exception: odd)

scala> for (a <- tryEven; b <- tryEvenOrNeg1) yield println(s"Got $a, $b")
res6: scala.util.Try[Unit] = Failure(java.lang.Exception: odd)

scala> for (a <- tryEven; b <- tryEvenOrNeg1) yield println(s"Got $a, $b")
Got 692, 750 
```

我删除了`resNN`反映的`Success(())`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T03:31:14.750

好吧，我忘了我们在 Scala 中总是有隐式转换。;-)

所以我们可以自己实现这个行为，它会创建比`yield`版本更多的对象，但我认为这段代码的意图要清楚得多。

```
implicit class BlowUpTry[T](current: Try[T])  {

  def throwIfFailed: Try[T] = current match {
    case Success(value)     => current
    case Failure(exception) => throw exception
  }

}

def tryA: Try[Int] = Success(1)
def tryB: Try[Int] = Failure(new Exception("error"))

for {
  a <- tryA.throwIfFailed
  b <- tryB.throwIfFailed
} {
  println(s"We got ${a + b}")
} 
```

# c - 在 C 中标记用户输入（存储在 **arg 中）？

> ID：15015496
> 
> 赞同：0
> 
> 时间：2013-02-22T01:42:05.193
> 
> 标签：c, pointers, tokenize, argv, getc

我正在尝试编写一个类似 shell 的简单接口，它接受用户输入（通过 char）并通过指向指针 * 的指针存储它（正是 argv 的工作原理）。这是我的代码：

```
char input[100];
char **argvInput;
char ch;
int charLoop = 0;
int wordCount = 0;

argvInput = malloc(25 * sizeof(char *));

while((ch = getc(stdin))) {
    if ((ch == ' ' || ch == '\n') && charLoop != 0) {
        input[charLoop] = '\0';
        argvInput[wordCount] = malloc((charLoop + 1) * sizeof(char));
        argvInput[wordCount] = input;
        charLoop = 0;
        wordCount++;

        if (ch == '\n') {
            break;
        }

    } else if (ch != ' ' && ch != '\n') {
          input[charLoop] = ch;
          charLoop++;
        } else {
            break;
        }
    } 
```

如果我通过 argvInput 循环：

```
int i = 0;
for (i = 0; i < wordCount; i++)
    printf("Word %i: %s\n", i, argvInput[i]); 
```

argvInput[i] 的所有值都是最后一个输入赋值。所以如果我输入：“快乐的日子快到了”，循环的输出是：

```
Word 0: soon
Word 1: soon
Word 2: soon
Word 3: soon
Word 4: soon 
```

我不知所措。显然每个循环都覆盖了以前的值，但我盯着屏幕，无法弄清楚为什么......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T01:45:36.887

This line is your bane:

```
 argvInput[wordCount] = input; 
```

Doesn't matter that you allocate new space, if you're going to replace the pointer to it with another one (i.e. `input`).

Rather, use `strncpy` to extract parts of the `input` into `argvInput[wordCount]`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T02:01:28.497

`argvInput[wordCount] = input;`只是使指针`argvInput[wordCount]`指向内存，`input`而不是将输入内容复制到新分配的内存中。您应该使用 memcpy 或 strcpy 来更正您的程序。

分配指针后，内存状态如下图所示。分配的内存`malloc((charLoop + 1) * sizeof(char));`，即图中灰色的内存，您的程序无法再访问，这将导致一些内存泄漏问题。请注意这一点。

![在此处输入图像描述](../Images/3c7b46e314449c692c5c0baea7c1beb4.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T04:41:27.413

我建议使用 %p 而不是 %s 打印您的 argvInput 指针，以识别此问题：`printf("Word %i: %p\n", i, (void *) argvInput[i]);`

你注意到它打印的值是什么？这与 argv 的行为有何不同？尝试打印 argv 的指针：`for (size_t x = 0; x < argc; x++) { printf("Word %zu: %p\n", x, (void *) argv[x]); }`

既然您已经观察到问题，解释它可能会变得更容易。

此代码分配内存，并将指向该内存的指针存储在 argvInput[wordCount] 中：（`argvInput[wordCount] = malloc((charLoop + 1) * sizeof(char));`顺便说一下，sizeof char 在 C 中*始终*为1，因此您不必要地乘以 1）。

此代码用指向输入的指针替换了指向已分配内存的指针：`argvInput[wordCount] = input;`...因此，您的所有项目都包含指向同一数组的指针：输入，并且您分配的内存泄漏，因为您失去了对它的引用。显然，这是有问题的路线；它不会做你最初认为它会做的事情。

建议您将 malloc 调用替换为 strdup 调用，并删除有问题的行。我不喜欢这个建议，因为 strdup 不在 C 标准中，所以它不需要存在。

strncpy 会起作用，但它不必要地复杂。strcpy 保证也能正常工作，因为分配的目标数组足够大以存储字符串。因此，我建议将有问题的行替换为`strcpy(argvInput[wordCount], input);`.

另一个没有详细解释的选项是strtok。似乎最好暂时不要探索它，因为它需要对您的代码进行太多修改。

我对这段代码有一点要挑剔：`char ch; ch = getc(stdin);`是错误的。getc 返回一个 int 是有原因的：任何成功读取的字符都将以 unsigned char 值的形式返回，它不可能是负数。如果 getc 遇到 EOF 或错误，它将返回一个负值。将返回值分配给 ch 后，如何区分错误和成功？

你有没有想过如果第一个字符是''会发生什么？目前，您的代码将跳出循环。如果您的代码要模仿常见的 argv 解析行为，这似乎是一个错误。调整此代码来解决您的问题可能是一个好主意：

```
for (int c = getc(stdin); c >= 0; c = getc(stdin)) {
    if (c == '\n') {
        /* Terminate your argv array and break out of the loop */
    }
    else if (c != ' ') {
        /* Copy c into input */
    }
    else if (charLoop != 0) {
        /* Allocate argvInput[wordCount] and copy input into it,
         * reset charLoop and increment wordCount */
    }
} 
```

# kendo-ui - Kendo UI Mobile - Assigning a data's literal value to javascript variable using Kendo's templates

> ID：15015497
> 
> 赞同：1
> 
> 时间：2013-02-22T01:42:28.440
> 
> 标签：kendo-ui

I'm using Kendo's templates and am trying to assign the literal contents of my object's "value" field to a javascript variable. Example of what I'm trying to do is given below:

```
# var a = (#= data.value #) # 
```

I keep getting an invalid template error.. is this possible to do with Kendo's templates?

Thank you

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T06:20:40.190

只需使用

```
# var a = data.value #
//and later you will have it available 
#if(a=="foo"){#
//...
#}# 
```

你应该明白了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T05:28:52.433

请像下面这样使用。您应该能够在 Kendo 模板中获取 JavaScript 值。

```
#var a = data.value # 
```

不要忘记标记为答案！

# tableview - UITableView Segue

> ID：15015506
> 
> 赞同：2
> 
> 时间：2013-02-22T01:43:28.937
> 
> 标签：tableview, segue

Im trying to make a small project. Could someone help me understand why the segue does not work?

```
#import "CarTableViewController.h"
#import "CarTableViewCell.h"
#import "CarDetailViewController.h"

@interface CarTableViewController ()

@end

@implementation CarTableViewController

@synthesize carMakes = _carMakes;
@synthesize carModels = _carModels;
@synthesize carImages = _carImages;

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.carMakes = [[NSArray alloc]
                     initWithObjects:@"Chevy",
                     @"BMW",
                     @"Toyota",
                     @"Volvo",
                     @"Smart", nil];

    self.carModels = [[NSArray alloc]
                      initWithObjects:@"Volt",
                      @"Mini",
                      @"Venza",
                      @"S60",
                      @"Fortwo", nil];

    self.carImages = [[NSArray alloc]
                      initWithObjects:@"chevy_volt.jpg",
                      @"mini_clubman.jpg",
                      @"toyota_venza.jpg",
                      @"volvo_s60.jpg",
                      @"smart_fortwo.jpg", nil];

    // Uncomment the following line to preserve selection between presentations.
    // self.clearsSelectionOnViewWillAppear = NO;

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    // self.navigationItem.rightBarButtonItem = self.editButtonItem;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return _carModels.count;
}

#pragma mark - Table view data source

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"carTableCell";

    CarTableViewCell *cell = [tableView
                              dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[CarTableViewCell alloc]
                initWithStyle:UITableViewCellStyleDefault
                reuseIdentifier:CellIdentifier];
    }

    // Configure the cell...
    cell.makeLabel.text = [self.carMakes
                           objectAtIndex: [indexPath row]];

    cell.modelLabel.text = [self.carModels
                            objectAtIndex:[indexPath row]];

    UIImage *carPhoto = [UIImage imageNamed:
                         [self.carImages objectAtIndex: [indexPath row]]];

    cell.carImage.image = carPhoto;

    return cell;
} 
```

The code work´s fine, and loads a tableView, but I need to go to CarDetailViewControler and I´m using the following code, but it does not work.

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"ShowCarDetails"])
    {
        CarDetailViewController *detailViewController =
        [segue destinationViewController];

        NSIndexPath *myIndexPath = [self.tableView
                                    indexPathForSelectedRow];

        detailViewController.carDetailModel = [[NSArray alloc]
                                               initWithObjects: [self.carMakes
                                                                 objectAtIndex:[myIndexPath row]],
                                               [self.carModels objectAtIndex:[myIndexPath row]],
                                               [self.carImages objectAtIndex:[myIndexPath row]],
                                               nil];
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T01:52:40.680

在情节提要中，您是否使用了单元原型？如果是这样，您是否从原型控制拖动到目标视图控制器并创建命名的segue？

您使用的方法要求在情节提要中完全定义 segue，这意味着 segue 的触发器与单元原型相关联。

您可以使用以下方法手动触发 segue：

```
[self performSegueWithIdentifier:@"ShowCarDetails" sender:self]; 
```

在你的：

`tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath`作为备选。

# android - Best way to save Web page settings for mobile devices?

> ID：15015508
> 
> 赞同：0
> 
> 时间：2013-02-22T01:44:16.197
> 
> 标签：android, ios, local-storage, webpage, web-storage

I am going to be modifying a mobile Web page that offers various services. I wish to make it so that the user can change what services can be accessed via settings that would be stored on the user's mobile device. Please can somebody let me know what would be the best way to do so. It would be mainly for iOS and Android devices.

Thank you

# objective-c - 来自 RGBA 的 UIImage 具有 Alpha 变为白色

> ID：15015513
> 
> 赞同：1
> 
> 时间：2013-02-22T01:45:10.283
> 
> 标签：objective-c, alpha, rgba

我正在制作一个军事战略游戏。当我的游戏中的一支军队占领了一个领土时，我希望能够改变地图上领土的颜色，以便它显示该领土的新控制者。这是我拥有的更改区域图像的代码：

例如，我会写这一行：

```
UIImage *newImg = [self imageOfTerritoryWithNewArmy:@"japan" AndOldTerritoryImage:[UIImage imageNamed:@"ireland.gif"]]; 
```

这是其余的代码：

```
-(UIImage *)createImageWithRGB:(NSArray *)colorData width:(NSInteger)width height:(NSInteger)height{
    unsigned char *rawData = malloc(width*height*4);
    for (int i=0; i<width*height; ++i)
    {
        CGFloat red;
        CGFloat green;
        CGFloat blue;
        CGFloat alpha;
        UIColor *color = colorData[i];
        if ([color respondsToSelector:@selector(getRed:green:blue:alpha:)]) {
            [color getRed:&red green:&green blue:&blue alpha:&alpha];
        } else {
            const CGFloat *components = CGColorGetComponents(color.CGColor);
            red = components[0];
            green = components[1];
            blue = components[2];
            alpha = components[3];
        }
        if(alpha > 0){
            rawData[4*i] = red * 255;
            rawData[4*i+1] = green * 255;
            rawData[4*i+2] = blue * 255;
            rawData[4*i+3] = alpha * 255;
        }
        else{
            rawData[4*i] = 255;
            rawData[4*i+1] = 255;
            rawData[4*i+2] = 255;
            rawData[4*i+3] = 0;
        }
    }

    CGDataProviderRef provider = CGDataProviderCreateWithData(NULL,
                                                          rawData,
                                                          width*height*4,
                                                          NULL);
    CGColorSpaceRef colorSpaceRef = CGColorSpaceCreateDeviceRGB();
    CGBitmapInfo bitmapInfo = kCGBitmapByteOrderDefault;
    CGColorRenderingIntent renderingIntent = kCGRenderingIntentDefault;
    CGImageRef imageRef = CGImageCreate(width,
                                    height,
                                    8,
                                    32,
                                    4*width,colorSpaceRef,
                                    bitmapInfo,
                                    provider,NULL,NO,renderingIntent);
    UIImage *newImage = [UIImage imageWithCGImage:imageRef];
    return newImage;
}

- (NSArray *)getRGBAsFromImage:(UIImage*)image atX:(int)xx andY:(int)yy count:(int)count{
NSMutableArray *result = [NSMutableArray arrayWithCapacity:count];

// First get the image into your data buffer
CGImageRef imageRef = [image CGImage];
NSUInteger width = CGImageGetWidth(imageRef);
NSUInteger height = CGImageGetHeight(imageRef);
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
unsigned char *rawData = (unsigned char*) calloc(height * width * 4, sizeof(unsigned char));
NSUInteger bytesPerPixel = 4;
NSUInteger bytesPerRow = bytesPerPixel * width;
NSUInteger bitsPerComponent = 8;
CGContextRef context = CGBitmapContextCreate(rawData, width, height,
                                             bitsPerComponent, bytesPerRow, colorSpace,
                                             kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);
CGColorSpaceRelease(colorSpace);

CGContextDrawImage(context, CGRectMake(0, 0, width, height), imageRef);
CGContextRelease(context);

// Now your rawData contains the image data in the RGBA8888 pixel format.
int byteIndex = (bytesPerRow * yy) + xx * bytesPerPixel;
for (int ii = 0 ; ii < count ; ++ii)
{
    CGFloat red   = (rawData[byteIndex]     * 1.0) / 255.0;
    CGFloat green = (rawData[byteIndex + 1] * 1.0) / 255.0;
    CGFloat blue  = (rawData[byteIndex + 2] * 1.0) / 255.0;
    CGFloat alpha = (rawData[byteIndex + 3] * 1.0) / 255.0;
    byteIndex += 4;

    UIColor *acolor = [UIColor colorWithRed:red green:green blue:blue alpha:alpha];
    [result addObject:acolor];
}

free(rawData);

return result;
}

-(UIColor *)colorOfArmy:(NSString *)army{
UIColor *color;
army = [army stringByReplacingOccurrencesOfString:@"\a" withString:@""];
if([army isEqual:@"france"]){
    color = [[UIColor alloc] initWithRed:0.3137254 green:0.3686274 blue:0.9058823 alpha:1];
}
if([army isEqual:@"germany"]){
    color = [[UIColor alloc] initWithRed:0.6352941 green:0.4313725 blue:0.3372549 alpha:1];
}
if([army isEqual:@"uk"]){
    color = [[UIColor alloc] initWithRed:0.8941176 green:0.4235294 blue:0.4941176 alpha:1];
}
if([army isEqual:@"italy"]){
    color = [[UIColor alloc] initWithRed:0.5137254 green:0.1215686 blue:0.4745098 alpha:1];
}
if([army isEqual:@"ussr"]){
    color = [[UIColor alloc] initWithRed:0.3607843 green:0.0823529 blue:0.1215686 alpha:1];
}
if([army isEqual:@"japan"]){
    color = [[UIColor alloc] initWithRed:0.9215686 green:0.6156862 blue:0.3137254 alpha:1];
}
if([army isEqual:@""]){
    color = [[UIColor alloc] initWithRed:0.1215686 green:0.2823529 blue:0.1607843 alpha:1];
}
if(color == nil){
    NSLog(@"the problem was %@", army);
}
return color;
}

-(UIImage *)imageOfTerritoryWithNewArmy:(NSString *)army AndOldTerritoryImage:(UIImage *)oldImg{
CGImageRef image = oldImg.CGImage;
NSInteger width = CGImageGetWidth(image);
NSInteger height = CGImageGetHeight(image);
NSArray *rgba = [self getRGBAsFromImage:oldImg atX:0 andY:0 count:width * height];
NSMutableArray *fixedRGBA = [[NSMutableArray alloc] init];
UIColor *armyColor = [self colorOfArmy:army];
for(UIColor *pixel in rgba){
    CGFloat red;
    CGFloat green;
    CGFloat blue;
    CGFloat alpha;
    if ([pixel respondsToSelector:@selector(getRed:green:blue:alpha:)]) {
        [pixel getRed:&red green:&green blue:&blue alpha:&alpha];
    } else {
        const CGFloat *components = CGColorGetComponents(pixel.CGColor);
        red = components[0];
        green = components[1];
        blue = components[2];
        alpha = components[3];
    }
    red = red * 255;
    green = green * 255;
    blue = blue * 255;
    if(alpha > 0){
        if(red < 50 && green < 50 && blue < 50){
            [fixedRGBA addObject:pixel];
        }
        else{
            [fixedRGBA addObject:armyColor];
        }
    }
    else{
        [fixedRGBA addObject:pixel];
    }
}
return [self createImageWithRGB:fixedRGBA width:width height:height];
} 
```

我遇到的问题是，当再次绘制图像时，由于 alpha 值为 0 而曾经为空白的所有像素都显示为白色。我怎样才能让这些像素仍然显示为清晰的像素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T16:54:46.327

创建图像时，您应该指定它包含一个 Alpha 通道。也就是说，而不是：

```
CGBitmapInfo bitmapInfo = kCGBitmapByteOrderDefault; 
```

采用：

```
CGBitmapInfo bitmapInfo = kCGBitmapByteOrderDefault | kCGImageAlphaLast; 
```

有关更多信息，请参阅[CGImage 接口规范](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGImage/Reference/reference.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T01:53:54.483

我相信您的 else 子句是您想要将颜色设置为清除的地方

```
 if(alpha > 0){
        rawData[4*i] = red * 255;
        rawData[4*i+1] = green * 255;
        rawData[4*i+2] = blue * 255;
        rawData[4*i+3] = alpha * 255;
    }
    else{
        rawData[4*i] = 255;
        rawData[4*i+1] = 255;
        rawData[4*i+2] = 255;
        rawData[4*i+3] = 255;
    } 
```

您必须将最后一个分配更改为 0

```
 if(alpha > 0){
        rawData[4*i] = red * 255;
        rawData[4*i+1] = green * 255;
        rawData[4*i+2] = blue * 255;
        rawData[4*i+3] = alpha * 255;
    }
    else{
        rawData[4*i] = 255;
        rawData[4*i+1] = 255;
        rawData[4*i+2] = 255;
        rawData[4*i+3] = 0;
    } 
```

# java - 队列实现，入队方法不起作用

> ID：15015516
> 
> 赞同：2
> 
> 时间：2013-02-22T01:45:45.980
> 
> 标签：java, queue

我正在尝试编写自己的队列类。我的入队方法只是将一个对象入队，然后如果我尝试将其他任何东西入队，几乎就像忽略它一样。这是我的代码：

```
public class myQueue {

    private Node front;
    private Node back;
    private int s;

    public myQueue() {
            front = null;
            back = null;
            s = 0;
    }

    public void enqueue(Object x) {
        if( isEmpty() )
            back = front = new Node(x);
        else
            back = back.next = new Node(x);
        s++;
    }

    public Object dequeue() {
        Object x;
        if( isEmpty() ) { System.out.println("nothing to dequeue.\nqueue empty."); }
        x = front.data;
        s--;
        return x;
    }

    public boolean isEmpty() {
        if(s == 0)
            return true;
        else
            return false;
    }

    public void printQueue() {
        if ( isEmpty() )
            System.out.println("empty queue");
        else {
            Node temp = back;
            while(temp != null) {
                System.out.println(temp);
                temp = temp.next;
            }
        }   
    }

} 
```

这是我尝试将一些对象排队的主要方法：

```
public static void main(String[] args) {
    int a = 5;
    String b = "yo";
    Object c = 5.5;                
    int d = 2;
    String e = "Pen";
    Object f = 9.2;

    myQueue q = new myQueue();

    q.enqueue(a);
    q.enqueue(b);
    q.enqueue(c);
    q.enqueue(d);
    q.enqueue(e);
    q.enqueue(f);

    System.out.println("\n");

    q.printQueue();
} 
```

然后我得到的输出是：

> 数据：9.2

关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T01:49:35.443

当你打印时，你从队列的后面开始，你应该从前面开始：

```
 Node temp = front; // <<< replacing back by front
        while(temp != null) {
            System.out.println(temp);
            temp = temp.next;
        } 
```

如果您从队列的后面开始，您将只打印队列的最后一个元素......

我的修复结果：

```
data : 5
data : yo
data : 5.5
data : 2
data : Pen
data : 9.2 
```

# java - 中心坐标，等边三角形

> ID：15015518
> 
> 赞同：0
> 
> 时间：2013-02-22T01:46:03.377
> 
> 标签：java, implementation

我当前的三角形类看起来像：

```
public class TriangleEquilateral {
    private Point cornerA;
    private Point cornerB;
    private Point cornerC;
    private double x1 = 0;
    private double y1 = 0;
    private double x2 = 10;
    private double y2 = 0;
    private double x3 = 5;
    private double y3 = Math.sqrt(75);

    public TriangleEquilateral(){
        cornerA = new Point(x1,y1);
        cornerB = new Point(x2,y2);
        cornerC = new Point(x3,y3);
    }

    public TriangleEquilateral(double X1,double Y1,double X2,double Y2,double X3,double Y3){
        x1 = X1;
        y1 = Y1;
        x2 = X2;
        y2 = Y2;
        x3 = X3;
        y3 = Y3;

        cornerA = new Point(X1,Y1);
        cornerB = new Point(X2,Y2);
        cornerC = new Point(X3,Y3);
    }

    public boolean isEquilateral(){
        double lengthAB = Math.sqrt(Math.pow(x1-x2,2) + Math.pow(y1-y2,2));
        double lengthBC = Math.sqrt(Math.pow(x2-x3,2) + Math.pow(y2-y3,2));
        double lengthCA = Math.sqrt(Math.pow(x3-x1,2) + Math.pow(y3-y1,2));

        boolean isEquilateral = false;
        if(lengthAB == lengthBC && lengthBC == lengthCA && lengthCA == lengthAB){
            isEquilateral = true;
        }
        System.out.println(lengthAB);
        System.out.println(lengthBC);
        System.out.println(lengthCA);
        return isEquilateral;
    }

    public double sideLength(){
        double sL = 0;
        if(this.isEquilateral() == true){
            sL = Math.sqrt(Math.pow(x1-x2,2) + Math.pow(y1-y2,2));
        }
        return sL;
    } 
```

如何确定等边三角形中点的坐标？我知道中点是**x = (base/2)** , **y = heigth/2**但这仅在基础水平时才有效（两个角具有相同的 y 值）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T01:55:06.190

对于等边三角形，三角形圆心坐标与其内圆圆心坐标相同。

[在 Wikipedia 上](http://en.wikipedia.org/wiki/Incircle_and_excircles_of_a_triangle#Coordinates_of_the_incenter)查找内圆中心的公式：

```
{ (aXa+bXb+cXc)/(a+b+c), (aYa+bYb+cYc)/(a+b+c) } 
```

因为`a = b = c`，很容易看出，等边三角形的中心坐标很简单

```
{ (x0+x1+x2)/3, (y0+y1+y2)/3 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T01:54:42.943

这更像是一道数学题，而不是一道 java 题。无论如何，要找到重心：

```
x = (x1 + x2 + x3) / 3
y = (y1 + y2 + y3) / 3 
```

# python - 集合中的正则表达式

> ID：15015520
> 
> 赞同：1
> 
> 时间：2013-02-22T01:46:09.320
> 
> 标签：python, regex, set

我想执行以下操作并打印指示的行：

```
a=set(['bye', 'hits', 'hi'])
if r'.i*' in a:
  print "This is what I want to see."
else:
  print "Sadly, this is what I actually see." 
```

不幸的是，`in`关键字没有在集合上执行正则表达式搜索。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T01:49:13.400

可悲的是，你需要一个循环：

```
import re
a = {'bye', 'hits', 'hi'}
if any(re.match(r'.i*',s) for s in a):
   print "see this" 
```

我用过`re.match`，但不清楚你是想要那个还是`re.search`.

*注意：* 所有`r'my string'`表示的是*原始字符串*，而不是*正则表达式*。使用原始字符串可确保正常的转义序列（以 开头的`\`）不会被转义。这在正则表达式中很有用，因为该`re`模块还使用了转义序列。通过使用原始字符串，可以避免对字符串进行双重转义（例如`'a\\double escaped string'`）。

# java - 责任链设计模式混乱

> ID：15015522
> 
> 赞同：4
> 
> 时间：2013-02-22T01:46:21.507
> 
> 标签：java, design-patterns, factory, chain-of-responsibility

我理解责任链模式的概念，但也许我用错了。

我有几种类型的产品，并且我有一个控制器来控制为每种类型的产品显示的界面。用户选择产品类型，每个控制器负责显示相应的界面并与之交互。

为此，我使用了责任链模式，我认为这听起来不太好。我正在做的是创建一个控制器链，一旦我得到产品类型请求，我只需将它传递给控制器​​链并让适当的控制器实现请求。

但是在思考的时候，同样可以使用一个简单的工厂来实现，但是有很多条件语句。

**您如何看待在这种情况下使用责任链？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T21:12:41.850

对我来说，这项任务绝对不是责任链。
通常在责任链中，链元素的顺序很重要，但在这里并非如此。

我会尝试执行以下操作。
创建某种注册表，其中包含一个带有 productType 键和控制器值的映射。

示例实现：

```
class ControllerRegistry
{
  //declaration for map and constructor

  public void Register(string productType, IProductController controller)
  {
    _map.Add(productType, controller);
  }

  public IProductController Find(string productType)
  {
    return _map[productType];
  }
} 
```

`ControllerRegistry.Register`在应用程序启动期间，您应该通过调用方法注册所有控制器。
您可以通过调用`ControllerRegistry.Find`方法获得适当的控制器。
与责任链相比，如果产品类型的数量很大，您将避免性能损失。

**编辑**
相同的任务主题[处理多种消息类型的设计模式](https://stackoverflow.com/questions/1477471/design-pattern-for-handling-multiple-message-types)

# php - preg_replace_callback 中的更多变量

> ID：15015523
> 
> 赞同：0
> 
> 时间：2013-02-22T01:46:23.250
> 
> 标签：php

我需要执行以下操作：

```
$grp = 'something';
$output = preg_replace_callback('/((f|ht)tp)(.*?)(.gif|.png|.jpg|.jpeg)/', function($in){
  return '<a href="'.$in[0].'" class="post-user-img fancybox" '.$grp.'><img src="'.serve_external_image($in[0]).'" alt="" /></a>';
}, $output); 
```

但是，我不能传递`$grp`给`return`代码的一部分。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T01:50:11.183

`use`在匿名函数声明中使用

```
function(...) use($grp) { ... } 
```

[http://php.net/manual/en/functions.anonymous.php](http://php.net/manual/en/functions.anonymous.php)

ps：这是一种 php 创建闭包的奇怪方式：-S

# c# - 如何在 .NET 框架中找到字体的通用名称？

> ID：15015525
> 
> 赞同：2
> 
> 时间：2013-02-22T01:47:26.637
> 
> 标签：c#, .net, fonts

我正在寻找一种方法来使用 .NET 框架查找给定字体的通用面孔名称（无衬线、衬线、等宽、草书、幻想）。我的首选语言是 C#，但我已经编写源代码近 15 年了，所以如果你能给我一个任何现代语言的例子，我可以自己翻译它。

**[编辑-澄清]**

我需要一种方法来确定任何给定对象属于哪个**通用**字体系列（Sans-Serif、Serif、Monospace、Cursive 或 Fantasy……甚至可能是 Symbol） 。`System.Drawing.Font`

例如，如果我从以下代码行创建字体：

```
System.Drawing.Font font = new System.Drawing.Font( "Serif", 12f, System.Drawing.GraphicsUnit.Point ); 
```

生成的字体可能是 12 磅的“Times New Roman”字体。但我不想要“Times”或“New Roman”甚至“Times New Roman”，我需要知道它在“Serif”家族中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T02:26:27.430

你可以和`linq`

[这](http://en.wikipedia.org/wiki/List_of_Microsoft_Windows_fonts)`font`是您正在寻找的 Microsoft的新列表。

例子：

*   **无衬线** *或* **衬线**=`Microsoft Sans Serif`
*   **等宽**=`Batang`

```
var font = FontFamily.Families
                     .Where(c => c.Name == "Microsoft Sans Serif")
                     .FirstOrDefault(); 
```

**更新：**

继承人你正在寻找泛型字体

[http://msdn.microsoft.com/en-us/library/system.drawing.fontfamily.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.fontfamily.aspx)

```
var font = FontFamily.GenericMonospace; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T03:26:17.353

这是一种印刷字体分类，不能直接从 Windows 字体 api 函数中获得。一个可能的后门是 GetFontData()，它允许您直接访问字体的 TrueType 表。那里有很多信息，但是我不知道有这种确切的信息可用。您可以在表格[的规格中自行查看。](https://developer.apple.com/fonts/TTRefMan/RM06/Chap6.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T01:51:22.677

> 一种查找*给定*字体的通用面孔名称的方法。

假设您有一个[`Font`](http://msdn.microsoft.com/en-us/library/system.drawing.font.aspx)对象，您可以像这样获得字体系列名称：

```
Font font;
string familyName = font.FontFamily.Name; 
```

*   [`FontFamily`文件](http://msdn.microsoft.com/en-us/library/system.drawing.fontfamily.aspx)
*   [构建字体](http://msdn.microsoft.com/en-us/library/4kxs7tfz.aspx)

* * *

回应您的编辑和评论：据我所知，*没有*关于字体类型的信息存储在字体中。例如，我可以设计一种字体并将其归类为 Fantasy，而您将字体归类为 Sans-serif。因为对于每个类的含义没有明确的定义，所以它不是字体的属性。

有一个系统范围的默认等宽字体、无衬线字体和衬线字体（通过`FontFamily`），但这不会告诉您是否*有任何*字体有衬线。使用`font.Style`你可以找出字体是否是草书，下划线等。通过[这个答案](https://stackoverflow.com/a/225027/146622)，你可以找出字体是否是等宽的。

# c++ - 创建指向“this”对象的指针

> ID：15015536
> 
> 赞同：0
> 
> 时间：2013-02-22T01:49:30.357
> 
> 标签：c++, constants

我似乎在尝试创建指向“this”的指针的项目中遇到问题，其中“this”是 C++ 列表中的第一个 LinkedList。第一个对象中包含数据，第二个对象中有数据……等等，`this->m_next`直到`NULL`

编译器向我吐出这个：

`linkedlist.hpp:55:22: error: invalid conversion from âconst LinkedList<int>* constâ to âLinkedList<int>*â [-fpermissive]`

我究竟做错了什么？

```
template <typename T>  
int LinkedList<T>::size() const
{
  int count = 0;
  LinkedList* list = this; // this line is what the compiler is complaining about

  //adds to the counter if there is another object in list
  while(list->m_next != NULL)
  {
    count++;
    list = list->m_next;
  }
  return count;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T01:52:29.470

成员函数标记为`const`。这意味着`this`也是`const`如此。你需要做：

```
const LinkedList<T>* list = this; // since "this" is const, list should be too
//               ^
//               |
//               Also added the template parameter, which you need, since "this"
//               is a LinkedList<T> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T01:51:52.810

尝试改变

```
LinkedList* list = this; // this line is what the compiler is complaining about 
```

到

```
LinkedList<T> const * list = this; 
          ^^^ ^^^^^ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T01:52:41.553

改变

```
LinkedList* list = this; 
```

到

```
const LinkedList<T>* list = this; 
^^^^^           ^^^ 
```

由于您的**函数定义为`const`**，因此`this`指针自动**为类型`const LinkedList<T>*`**

因此，您**不能将`const`指针分配给非`const`指针**，从而解释错误。

如果您尝试非参数，缺失`<T>`可能会给您带来错误。`int`

# c++ - 如何使用带有可变参数的动态转换？

> ID：15015538
> 
> 赞同：0
> 
> 时间：2013-02-22T01:49:44.477
> 
> 标签：c++, c++11, variadic-templates

我有一个适用于 2 个参数的 functor_wrapper 类，我无法将其泛化为可变参数模板参数。

特别是，在将 2 个参数中的这一行转换为可变参数时，我无法正确获取语法：

**2 参数代码**

```
return m_cb( dynamic_cast<T const&>( t ), dynamic_cast<U const&>( u )); 
```

**破碎的可变参数代码**

```
return m_cb( dynamic_cast<I const&>( t ), 
                            dynamic_cast<typename... const& Cs>( u... )); 
```

对于任何想知道的人，这个包装类是 multiple_dispatch 类的一部分。为了向客户端提供通用类型/接口，我有这个 Functor_Wrapper 类和 operator() ，它采用父类类型。调度时，我通过`dynamic_cast<>`将参数向下转换为正确的类型。

**更新**

我刚刚意识到我还有另一个问题：我的虚拟 operator()`Parent_Functor_Wrapper`需要转换为 n 个参数，`P const&`所以我需要以某种方式展开签名！

这同样适用于 operator() in 的具体实现`Functor_Wrapper`。

**更新 2**

发布完整的代码，以便更好地理解编程上下文。

**更新 3**

接受[ildjam 的回答](https://stackoverflow.com/a/15015663/975129)，因为它解决了最初的问题。我需要更多地考虑如何处理纯虚拟运算符（）。同时，如果您注释掉下面的代码`#define USE_VARIADICS`并运行硬编码版本，则可以正常工作。如果我无法解决此问题，我将发布一个单独的问题。

**代码**

```
#include <typeinfo>
#include <functional>
#include <stdexcept>
#include <cassert>
#include <map>
#include <array>
#include <iostream>

#define USE_VARIADICS
#ifdef USE_VARIADICS
template<typename P,typename R,typename... Cs>
struct Parent_Functor_Wrapper
{
        using cb_func = std::function<R(P const&, P const& )>;

        virtual R operator()( P const&, P const& ) = 0;
};

// parent class, return type, concrete classes...
template<typename P,typename R,typename I,typename... Cs>
struct Functor_Wrapper :
        public Parent_Functor_Wrapper<P,R,Cs...>
{
        using cb_func = std::function<R(I const&, Cs const& ...)>;
        cb_func  m_cb;

        // dynamic_cast<typename... const& Cs>( u... ) -> dynamic_cast<Cs const&>(u)...
        Functor_Wrapper( cb_func cb ) : m_cb( cb ) { }
        virtual R operator()( P const& t, Cs const& ... u ) override
        {
                return m_cb( dynamic_cast<I const&>( t ), 
                        dynamic_cast<Cs const&>( u )...);
        }
};
#else
template<typename P,typename R>
struct Parent_Functor_Wrapper
{
        using cb_func = std::function<R(P const&, P const& )>;

        virtual R operator()( P const&, P const& ) = 0;
};

template<typename P,typename R,typename T,typename U>
struct Functor_Wrapper :
        public Parent_Functor_Wrapper<P,R>
{
        using cb_func = std::function<R(T const&, U const&)>;
        cb_func  m_cb;

        Functor_Wrapper( cb_func cb ) : m_cb( cb ) { }
        virtual R operator()( P const& t, P const& u ) override
        {
                return m_cb( dynamic_cast<T const&>( t ), dynamic_cast<U const&>( u ));
        }
};
#endif

template<typename T,unsigned N>
struct n_dimension
{
        using type = typename n_dimension<T,N-1>::type;
};

template<typename T>
struct n_dimension<T,1>
{
        using type = std::tuple<T>;
};

template<typename K>
K gen_key( K* p=nullptr, size_t idx=0 )
{
        return *p;
};

template<typename K,typename T,typename... Ts>
K gen_key( K* p=nullptr, size_t idx=0 )
{
        K m_instance;
        if ( p==nullptr )
                p = &m_instance;
        *(p->begin() + idx) = typeid( T ).hash_code();
        gen_key<K,Ts...>( p, ++idx );
        return m_instance;
};

template<typename F,typename P,typename... Cs>
struct multiple_dispatcher { multiple_dispatcher() { } };

template<typename F,typename P,typename I,typename... Cs>
struct multiple_dispatcher<F,P,I,Cs...>
{
        using functor_type = Parent_Functor_Wrapper<P,std::string>;
        using key_type     = std::array<size_t,F::n_dimension::val>;
        using map_type     = std::map<key_type,functor_type*>;
        using value_type   = typename map_type::value_type;

        map_type   m_jump_table;

        multiple_dispatcher( std::initializer_list<value_type> const& cb_mapping )
        {
                for( const auto& p : cb_mapping )
                        m_jump_table.insert( p );
        }

        template< typename T, typename U >
        typename F::return_type operator()( T& x, U& y )
        {
                auto k = key_type{ { x.get_id(), y.get_id() } };
                auto func = m_jump_table.at( k );
                return (*func)( x, y );
        }

        size_t size() const { return m_jump_table.size(); }
};

// =============================================================================

struct A { virtual ~A() { } 
        virtual size_t get_id() const { return typeid( A ).hash_code(); }
};
struct B : public A { virtual ~B() { } 
        virtual size_t get_id() const override { return typeid( B ).hash_code(); }
};
struct C : public A { int x; virtual ~C() { } 
        virtual size_t get_id() const override { return typeid( C ).hash_code(); }
};

struct Functor_Pairs
{
        using return_type = std::string;
        enum n_dimension { val = 2 };

  static std::string MyFn(A const& arg1, A const& arg2) { return "A,A"; }
  static std::string MyFn(A const& arg1, B const& arg2) { return "A,B"; }
  static std::string MyFn(A const& arg1, C const& arg2) { return "A,C"; }
  static std::string MyFn(B const& arg1, A const& arg2) { return "B,A"; }
  static std::string MyFn(B const& arg1, B const& arg2) { return "B,B"; }
  static std::string MyFn(B const& arg1, C const& arg2) { return "B,C"; }
  static std::string MyFn(C const& arg1, A const& arg2) { return "C,A"; }
  static std::string MyFn(C const& arg1, B const& arg2) { return "C,B"; }
  static std::string MyFn(C const& arg1, C const& arg2) { return "C,C"; }
};

// =============================================================================

std::string (*MyFun_aa)(A const&, A const&) = &Functor_Pairs::MyFn;
std::string (*MyFun_ab)(A const&, B const&) = &Functor_Pairs::MyFn;
std::string (*MyFun_ac)(A const&, C const&) = &Functor_Pairs::MyFn;
std::string (*MyFun_ba)(B const&, A const&) = &Functor_Pairs::MyFn;
std::string (*MyFun_bb)(B const&, B const&) = &Functor_Pairs::MyFn;
std::string (*MyFun_bc)(B const&, C const&) = &Functor_Pairs::MyFn;
std::string (*MyFun_ca)(C const&, A const&) = &Functor_Pairs::MyFn;
std::string (*MyFun_cb)(C const&, B const&) = &Functor_Pairs::MyFn;
std::string (*MyFun_cc)(C const&, C const&) = &Functor_Pairs::MyFn;

Functor_Wrapper<A,std::string,A,A>   w_aa( MyFun_aa );
Functor_Wrapper<A,std::string,A,B>   w_ab( MyFun_ab );
Functor_Wrapper<A,std::string,A,C>   w_ac( MyFun_ac );
Functor_Wrapper<A,std::string,B,A>   w_ba( MyFun_ba );
Functor_Wrapper<A,std::string,B,B>   w_bb( MyFun_bb );
Functor_Wrapper<A,std::string,B,C>   w_bc( MyFun_bc );
Functor_Wrapper<A,std::string,C,A>   w_ca( MyFun_ca );
Functor_Wrapper<A,std::string,C,B>   w_cb( MyFun_cb );
Functor_Wrapper<A,std::string,C,C>   w_cc( MyFun_cc );

// =============================================================================

int main( int argc, char* argv[] )
{
        B  b;
        C  c;

        A& arg1 = b;
        A& arg2 = c;

        using md_type = multiple_dispatcher<Functor_Pairs,A,B,C>;
        using K       = md_type::key_type;

        md_type  md
        {
                std::make_pair( gen_key<K,A,A>(), &w_aa ),
                std::make_pair( gen_key<K,A,B>(), &w_ab ),
                std::make_pair( gen_key<K,A,C>(), &w_ac ),
                std::make_pair( gen_key<K,B,A>(), &w_ba ),
                std::make_pair( gen_key<K,B,B>(), &w_bb ),
                std::make_pair( gen_key<K,B,C>(), &w_bc ),
                std::make_pair( gen_key<K,C,A>(), &w_ca ),
                std::make_pair( gen_key<K,C,B>(), &w_cb ),
                std::make_pair( gen_key<K,C,C>(), &w_cc )
        };

        std::cerr << "N = " << md.size() << std::endl;
        std::cerr << "RESULT = " << md( arg1, arg2 ) << std::endl;

        assert( !std::string( "B,C" ).compare( md( arg1, arg2 )) );

#if 0
        std::cerr << typeid( A ).hash_code() << std::endl;
        std::cerr << typeid( B ).hash_code() << std::endl;
        std::cerr << typeid( C ).hash_code() << std::endl;
#endif

        return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T02:04:50.830

你需要改变：

```
dynamic_cast<typename... const& Cs>( u... ) 
```

到：

```
dynamic_cast<Cs const&>( u )... 
```

前者（除了无效的语法）试图扩展`Cs`为单个`dynamic_cast`，而后者将每种类型扩展`Cs`为自己的`dynamic_cast`.

话虽如此，我不认为你`override`会工作，因为你的基地的`operator()`签名是`R operator()( P const&, P const& )`，而你的派生的签名不是（除非`Cs const&...`巧合地扩展成`P const&`）......

# opencv - 使用 OpenCV 捕获多播 UDP 视频流

> ID：15015540
> 
> 赞同：2
> 
> 时间：2013-02-22T01:50:04.783
> 
> 标签：opencv, udp, video-streaming, video-capture, emgucv

我有一个多播 UDP 视频流，我需要我的 OPenCV (Emgu) 2.4.x 应用程序来捕获和处理（“客户端”）。

在客户端，我可以使用 VLC 捕获流（udp://xx.yy.zz.aaa:1234，但是我的应用程序无法捕获这个 udp 流。我的代码很简单（

```
Capture cap = new Capture ("udp://@212.1.1.1:1234"); 
```

ps 我已经尝试过 2/o @ 也在那个地址上尝试了 rtp。没运气 ：-/

OpenCV 是否直接允许“捕获”UDP 流？还是我需要在客户端上运行 VLC 以将视频重新流式传输为 rtp 或 http 或其他......？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T21:06:01.167

我终于想通了并分享，希望可以帮助其他人，

```
Capture cap = new Capture ("udp://@212.1.1.1:1234"); 
```

**不要忘记@符号！**

在 UDP 流上成功创建了捕获，但是访问捕获属性会导致它异常并导致错误。

长话短说，UDP 流似乎不会流式传输设备属性，因此您可能需要在其他地方获取它或对其进行编码。

另外需要注意的是，由于 FPS（每秒帧数）不可靠，如果不是完全不正确，您可能需要使 FPS 可调，尤其是在循环轮询流时。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:56:17.123

```
IplImage* frame;
CvCapture* pCapture;
pCapture = cvCaptureFromFile("udp://ip:port/path");
frame = cvQueryFrame(pCapture); 
```

如果您没有 videoInput 库，这也可以完成工作

# ios - segue 不适用于 UITableViewCell alloc，但 dequeueReusableCellWithIdentifier

> ID：15015543
> 
> 赞同：3
> 
> 时间：2013-02-22T01:50:22.293
> 
> 标签：ios, uitableview, segue

我在 UINavigationController 中使用带有 UITableView 的故事板。在这个 UITableView 中，使用了具有内部属性的自定义 tableViewCell。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    CustomTableViewCell *cell = nil;

    if (SYSTEM_VERSION_LESS_THAN(@"6.0") ) {

        //iOS 6.0 below
        cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
    }
    else {
        //iOS 6.0 above

        cell = [tableView dequeueReusableCellWithIdentifier:@"Cell" forIndexPath:indexPath]; //work segue

    } 
```

上面的代码适用于 push segue。但不是当我使用

```
 cell = [[CustomTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];   //not work segue 
```

我使用这种分配方法来保存单元格的数据以防止重用单元格。

这只是 alloc 与 deque .. 方法的区别。我错过了什么？

编辑）我知道不使用 dequeReusableCell 方法对于性能原因是不利的。但是，细胞的数量不会很多。这就是我不需要 deque 方法的原因。

1.  “不工作”的意思是“不执行推送转场”，而不是崩溃。

    它显示的单元格与使用 dequeReusable 方法时相同，除了单元格右侧的公开指示图标。指示器图标来自故事板设置。

    当我触摸单元格时，单元格突出显示为蓝色，但没有执行推送。

2.  CustomTableViewCell 有 4 个属性。这与 UITableViewCell 完全不同。用户在 DetailViewController 设置属性（将 segue 推到此）。该单元格没有 IBOutlet 参考。在 MasterViewController（具有 tableView）中，cellForRowAtIndexPath 方法返回 CustomTableViewCell 上面的代码。

3.  cellForRowAtIndexPath 方法在 CustomTableViewCell 上的指示器左侧添加一个开/关按钮，并为单元格设置一个标签号。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T19:51:49.870

的使用`dequeueReusableCellWithIdentifier`使您能够使用原型单元。如果您使用`initWithStyle`instead of `dequeueReusableCellWithIdentifier`，那么您不会，因此您也会丢失为这些单元格原型定义的任何 segue、披露指示符和其他 UI 外观。

如果你决定走这条路，你将不得不走“老派”（即做我们在单元原型之前都做过的事情）并编写自己的`didSelectRowForIndexPath`. 但是，如果您已经定义了该 segue，假设您将其称为“SelectRow”，那么您`didSelectRowForIndexPath`可以执行以下操作：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

    [self performSegueWithIdentifier:@"SelectRow" sender:cell];
} 
```

如果您需要披露指示符，则您的自定义单元例程（或`cellForRowAtIndexPath`）必须手动设置。如果你添加它

```
cell.accessoryType = UITableViewCellAccessoryDetailDisclosureButton; 
```

然后你需要手动处理它：

```
- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

    [self performSegueWithIdentifier:@"SelectAccessory" sender:cell];
} 
```

底线，你可以让它工作，但你只是做了很多额外的工作，失去了出列单元的性能和内存优势。我衷心鼓励您重新考虑不使用`dequeueCellWithIdentifier`.

# batch-file - 抓取包含常量和其他变量的文本行中的变量

> ID：15015547
> 
> 赞同：0
> 
> 时间：2013-02-22T01:51:07.283
> 
> 标签：batch-file

我想将其用作下面代码的变量，而不是 ClassName=in 1.txt 之后的变量，我想要介于两者之间的变量：

EntryText=船沉了！|网格 AO 77| **抓取变量 HERE** , *（注意最后的逗号）*

所以在以第二个 | 结尾的文本行之后抓取 和逗号之前。

变量之前的文本行将是相同且恒定的，**除了**“网格”之后可能有一个单词或不同的两对字母和数字，或者字母和数字的任何混合，直到 |

因此，我尝试将其用作变量，介于两者之间：

EntryText=沉船！|网格*（字母或数字的任意组合）* | **（变量）**，*（逗号）*

所以抓住第二个| 和逗号。比你。

```
@echo off

copy 2.txt 2.txt-backup

setlocal enableDelayedExpansion

>2.txt (
for /f "tokens=1* delims=:" %%A in ('findstr /n "^" 2.txt-backup') do (
    ( echo !ln!| findstr "^Type=206$" >NUL && set ln=ln ) || (
        set "ln=%%B"
        if "!ln:~0,6!"=="Class=" (
            findstr /c:"ClassName=!ln:~6!" "E:\Dropbox\New folder\Log_*.txt" >"E:\Dropbox\New folder\null" && (
                echo Class=ShipDummy
                set "ln=Type=206"
            )
        )
        if #!ln!==# (echo;) else echo !ln!
    )
  )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T03:20:23.057

```
for /f "tokens=3 delims=|" %%C in ("%%B") do for /f "tokens=1 delims=," %%D in ("%%C") do echo %%D 
```

# java - Eclipse 中不需要的死代码警告

> ID：15015548
> 
> 赞同：7
> 
> 时间：2013-02-22T01:51:17.097
> 
> 标签：java, eclipse, dead-code

以下代码在 Eclipse 中给了我一个“死代码”警告：

```
private void add(Node<E> n, E element) {
        Node<E> e = new Node<E>(element);
        if (n == null)
            root = e;
        else if (n.compareTo(e) > 0)
            if (n.hasLeft())
                add(n.getLeft(), element);
            else
                n.setLeft(e);
        else if (n.hasRight())
            add(n.getRight(), element);
        else
            n.setRight(e);
        balance(e);
    } 
```

警告出现在`root = e;`.

我查找了死代码，发现它是代码帽没有效果，因此会被 java 编译器忽略。

但是，这个根是我班级中的一个私有字段，因此我的程序功能有必要这样做。

编译器真的会忽略这一点吗？我怎么能阻止它？为什么它认为它是死代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T02:03:21.740

如果`root`是您的类中包含`add`您发布的方法的私有字段，那么，正如您所说，`root = e;`Eclipse IDE 不应将该行视为死代码。

编译器应该可以正常工作......这只是一个 IDE 警告。

我的猜测是 Eclipse 会执行某种代码遍历（类似于循环复杂度工具）来确定代码路径并找到“死代码”和“无法访问的代码”。

我会尝试刷新，然后在 IDE 中进行清理和构建。如果这不能解决它，Eclipse 可能只会对死代码发出“误报”警告。不会是第一次......我同时使用 Eclipse 和 IntelliJ IDEA，并且之前看到这两个 IDE 都错误地警告代码。但是，尽管有 IDE 警告，我的代码仍然可以正常编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T02:03:47.130

可能有两个问题：首先：问题是行根没有“用于”任何东西。在 findbugs 中，同样的错误被称为“死存储”，根据[findbugs](http://findbugs.sourceforge.net/bugDescriptions.html#DLS_DEAD_LOCAL_STORE)的含义：

> 该指令为局部变量赋值，但在任何后续指令中都不会读取或使用该值。通常，这表示错误，因为从未使用过计算的值。

请注意，这里的关键字是“经常”。

我会检查并确保 root 正在按照您的预期使用，如果是的话，正如 Philip Tenn 所提到的，它可能是误报。

第二：您的问题可能与[这个问题](https://stackoverflow.com/questions/5230738/java-compiler-stop-complaining-about-dead-code?rq=1)有关。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T02:14:50.793

由于来源不足以找到确切的原因，我猜它与 Eclipse 中与死代码相关的问题有关。您可以[在此处](https://bugs.eclipse.org/bugs/show_bug.cgi?id=336544)和[此处](https://bugs.eclipse.org/bugs/show_bug.cgi?id=370787)查看一些问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-15T05:51:37.863

看看你的 if 条件。

```
Node<E> e = new Node<E>(element);
if (n == null) {
    // dead code here
} 
```

这段代码已经死了，因为它*总是*`n == null`错误的。您刚刚在上一行创建了一个新实例（无条件地）。新对象永远不会为空。*`Node<E>`*

# r - 散点图的非参数分位数回归曲线

> ID：15015556
> 
> 赞同：14
> 
> 时间：2013-02-22T01:51:48.337
> 
> 标签：r, regression, scatter-plot, quantile

`IV=time`我用,创建了一个散点图（多组 GRP）`DV=concentration`。我想将分位数回归曲线添加`(0.025,0.05,0.5,0.95,0.975)`到我的图中。

顺便说一句，这就是我创建散点图的方法：

```
attach(E)  ## E is the name I gave to my data
## Change Group to factor so that may work with levels in the legend
Group<-as.character(Group)
Group<-as.factor(Group)

## Make the colored scatter-plot
mycolors = c('red','orange','green','cornflowerblue')
plot(Time,Concentration,main="Template",xlab="Time",ylab="Concentration",pch=18,col=mycolors[Group])

## This also works identically
## with(E,plot(Time,Concentration,col=mycolors[Group],main="Template",xlab="Time",ylab="Concentration",pch=18))

## Use identify to identify each point by group number (to check)
## identify(Time,Concentration,col=mycolors[Group],labels=Group)
## Press Esc or press Stop to stop identify function

## Create legend
## Use locator(n=1,type="o") to find the point to align top left of legend box
legend('topright',legend=levels(Group),col=mycolors,pch=18,title='Group') 
```

因为我在这里创建的数据是我的较大数据的一小部分，所以它看起来可以近似为一个矩形双曲线。但我还不想称我的自变量和因变量之间存在数学关系。

我认为`nlrq`从包`quantreg`中可能是答案，但是当我不知道我的变量之间的关系时，我不明白如何使用该函数。

我从一篇科学文章中找到了这张图，我想做完全相同的图： ![目标](../Images/5f15dcbee05caf3046e142f749b69593.png)

再次感谢您的帮助！

**更新**

[Test.csv](https://www.dropbox.com/s/8won4dz0bxk29qk/Test.csv) 有人指出我的样本数据不可重现。这是我的数据示例。

```
library(evd)
qcbvnonpar(p=c(0.025,0.05,0.5,0.95,0.975),cbind(TAD,DV),epmar=T,plot=F,add=T) 
```

我也试过 qcbvnonpar::evd，但曲线似乎不是很平滑。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T15:54:08.083

也许看看 quantreg:::rqss 来平滑样条曲线和分位数回归。抱歉，示例数据不太好：

```
set.seed(1234)
period <- 100
x <- 1:100
y <- sin(2*pi*x/period) + runif(length(x),-1,1)

require(quantreg)
mod <- rqss(y ~ qss(x))
mod2 <- rqss(y ~ qss(x), tau=0.75)
mod3 <- rqss(y ~ qss(x), tau=0.25)
plot(x, y)
lines(x[-1], mod$coef[1] + mod$coef[-1], col = 'red')
lines(x[-1], mod2$coef[1] + mod2$coef[-1], col = 'green')
lines(x[-1], mod3$coef[1] + mod3$coef[-1], col = 'green') 
```

![在此处输入图像描述](../Images/824720db2cc77266d2c34a35182188f9.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-28T15:45:35.480

我过去经常挣扎，`rqss`我的问题几乎总是与分数的顺序有关。

您在不同的时间点进行了多次测量，这就是您获得不同长度的原因。这对我有用：

```
dat <- read.csv("~/Downloads/Test.csv")

library(quantreg)
dat <- plyr::arrange(dat,Time)
fit<-rqss(Concentration~qss(Time,constraint="N"),tau=0.5,data = dat)
with(dat,plot(Time,Concentration))
lines(unique(dat$Time)[-1],fit$coef[1] + fit$coef[-1]) 
```

![在此处输入图像描述](../Images/9a9d0ce9b688c007a9c9ecb3cc9ea9c8.png)

在拟合模型之前对数据框进行排序似乎是必要的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-06T16:30:53.720

如果你想要`ggplot2`图形...

我以@EDi 的示例为基础。我增加了`x`and ，`y`这样分位数线的摆动就不会那么大了。由于这种增加，我需要在一些调用中 使用`unique(x)`代替。`x`

这是修改后的设置：

```
set.seed(1234)
period <- 100
x <- rep(1:100,each=100)
y <- 1*sin(2*pi*x/period) + runif(length(x),-1,1)

require(quantreg)
mod <- rqss(y ~ qss(x))
mod2 <- rqss(y ~ qss(x), tau=0.75)
mod3 <- rqss(y ~ qss(x), tau=0.25) 
```

这是两个地块：

```
# @EDi's base graphics example
plot(x, y)
lines(unique(x)[-1], mod$coef[1] + mod$coef[-1], col = 'red')
lines(unique(x)[-1], mod2$coef[1] + mod2$coef[-1], col = 'green')
lines(unique(x)[-1], mod3$coef[1] + mod3$coef[-1], col = 'green') 
```

[![在此处输入图像描述](../Images/8de1fc18867ff1832659b1838e382e0e.png)](https://i.stack.imgur.com/GjljO.png)

```
# @swihart's ggplot2 example:
## get into dataset so that ggplot2 can have some fun:
qrdf <- data.table(x       = unique(x)[-1],
                   median =  mod$coef[1] +  mod$coef[-1],
                   qupp   = mod2$coef[1] + mod2$coef[-1],
                   qlow   = mod3$coef[1] + mod3$coef[-1]
)

line_size = 2
ggplot() +
  geom_point(aes(x=x, y=y),
             color="black", alpha=0.5) +
  ## quantiles:
  geom_line(data=qrdf,aes(x=x, y=median),
            color="red", alpha=0.7, size=line_size) +
  geom_line(data=qrdf,aes(x=x, y=qupp),
            color="blue", alpha=0.7, size=line_size, lty=1) +
  geom_line(data=qrdf,aes(x=x, y=qlow),
            color="blue", alpha=0.7, size=line_size, lty=1) 
```

[![在此处输入图像描述](../Images/efc028a44a0afb93a275ed187a10fc80.png)](https://i.stack.imgur.com/7yy7T.png)

# arrays - 从对象的 Arraylist 中获取值 - 处理

> ID：15015560
> 
> 赞同：0
> 
> 时间：2013-02-22T01:52:21.250
> 
> 标签：arrays, object, arraylist, processing

我正在制作一个虚拟宠物游戏，现在我正在尝试将饥饿包括在内，但是我不确定如何使吃功能起作用。我试图通过增加食物的营养价值来降低它。此值位于存储在 arraylist 中的对象中。

有没有办法参考

```
 int nutrition(int eaten) {
    nutrition = nutrition - eaten;
    return nutrition; 
```

（吃掉的 int 稍后会传入）

里面

```
ArrayList items;

void setup() {
    items = new ArrayList();
}

void draw() {
    for (int i = items.size() - 1; i >=0; i --) {
      Food food = (Food) items.get(i);
      food.display();
      if (food.finished()) {
        items.remove(i);
      }
    }
  }

  void mouseClicked() {
    items.add(new Food(mouseX, mouseY, 1));
  }

((Food)items.get(i)).nutrition(); 
```

[http://www.java-forums.org/new-java/2370-how-return-object-arraylist.html](http://www.java-forums.org/new-java/2370-how-return-object-arraylist.html) 我试过用这个，但处理无法找到我。我相信这是因为我在课堂上不存在，只存在于主草图中。如果是这样，我会找到一种方法将 i 放入方法中。也许使用返回。

如果有人知道更好的方法来做到这一点，我将不胜感激。

代码

```
Creature creature;
ArrayList items;
Hand hand;
String data[];
int gameInfo[];
int tempData[];
boolean haveFood;

void setup() {
  size(100, 100);
  smooth();
  noCursor();
  String data[] = loadStrings("save.txt");
  String[] tempData = split(data[0], ',');
  gameInfo = int(tempData);
  for (int i = 0; i < data.length; i++) { 
    creature = new Creature(gameInfo[0], gameInfo[1], gameInfo[2], gameInfo[3]);
    haveFood = false;
    hand = new Hand();
    items = new ArrayList();
  }
}

  void draw() {
    background(255);
    for (int i = items.size() - 1; i >=0; i --) {
      Food food = (Food) items.get(i);
      food.display();
      if (food.finished()) {
        items.remove(i);
      }
    }
    creature.whatWant();
    creature.whatDo(haveFood);
    hand.draw();
  }

  void mouseClicked() {
    items.add(new Food(mouseX, mouseY, 1));
    haveFood = true;
  }

class Creature {
  int hunger;
  int age;
  int gender;
  int asleep;
  boolean idle;
  char want;
  char request;

  Creature(int _gender, int _age, int _hunger, int _asleep) {
    gender = _gender;
    age = _age;
    hunger = _hunger;
    asleep = _asleep;
    idle = true;
  }  

  void whatWant() {
    if (hunger == 50) {
      want = 'H';
    }
  }

  void whatDo(boolean food) {
    if (idle == true) {
      switch(want) {
      case 'H':
        if (food == true) {
          creature.eat();
        }
        else 
          request = 'F';
        ask();
      }
    }
    else
    {
      println("IDLE");
    }
  }

  void ask() {
    if (request == 'F') {
      println("HUNGRY");
    }
  }
  void eat() {
    println("EAT");
((Food)items.get(i)).nutrition();
  }
}

class Food {
  float posX;
  float posY;
  int nutrition;

  Food(float _posX, float _posY, int rating) {
    posX = _posX;
    posY = _posY;
    nutrition = rating;
  }

  void display() {
    rect(posX, posY, 10, 10);
  }

  boolean finished() {
    if (nutrition < 0) {
      return true;
    }
    else {
      return false;
    }
  }

  int nutrition(int eaten) {
    nutrition = nutrition - eaten;
    return nutrition;
  }
}

class Hand {
  int posX;
  int posY;

  Hand() {
    posX = mouseX;
    posY = mouseY;
  }

  void draw() {
    rectMode(CENTER);
    point(mouseX, mouseY);
  }
} 
```

其中 save.txt 是一个 txt 文件，包含 1,1,50,1,1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:53:56.447

不幸的是，我无法提供一个很好的详细答案。您的项目结构及其代码有很多令人困惑的事情。

与此同时，你在 Creature 的`eat()`函数中遇到了语法错误。尝试这个：

```
 void eat() {
    println("EAT");
    //((Food)items.get(i)).nutrition();
    for(int i = 0 ; i < items.size(); i++){
      Food yummy = (Food)items.get(0);
      yummy.nutrition(hunger);
    }
  } 
```

上述工作是因为项目在顶部声明，因此在整个草图的范围内可见（换句话说，全局）。我不确定这是否是故意的，或者您计划在生物和食物之间建立什么关系。

上面可以用更懒（但不太常见/明显）的方式编写，如下所示：

```
 void eat() {
    println("EAT");
    //((Food)items.get(i)).nutrition();
    for(Object yummy : items) ((Food)yummy).nutrition(hunger);
  } 
```

我假设这个生物会根据它的饥饿程度来喂食。我想在某个时候这个生物应该是饱的，所以你也可以`hungry`根据它从食物等中获得的营养来更新它的属性。

另外，为了测试，我添加了非常有营养的食物：P

```
items.add(new Food(mouseX, mouseY, 10000)); 
```

# c++ - 实例化基类 - Win32 对话框类

> ID：15015563
> 
> 赞同：0
> 
> 时间：2013-02-22T01:52:38.023
> 
> 标签：c++, windows, winapi, derived-class

我有三个类... Base、Derived 1 和 Derived 2。基类包含一个静态 LONG( this * )，它在静态函数中用于处理窗口消息。我遇到的问题是，当我声明多个派生类时，基类中的静态 LONG 在第二个派生类声明时发生更改......这是实现：

BaseDialog.h：

```
class CBaseDialog;

typedef void(CBaseDialog::*fpMessageHandler)(HWND hDlg,WPARAM wParam,LPARAM lParam);

struct t_MessageEntry
{
    fpMessageHandler MsgHandler;
};

/////////////////////////////// MACROS

#define IMPLEMENT_MESSAGE_HANDLER(base,derived) void derived::AddHandler(UINT MessageId, void(derived::*Handler)(HWND hDlg,WPARAM wParam,LPARAM lParam))\
                                                {\
                                                    AddMessageHandler(MessageId, (void(base::*)(HWND hDlg,WPARAM wParam,LPARAM lParam))Handler);\
                                                }\

#define DECLARE_MESSAGE_HANDLER(derived) void AddHandler(UINT MessageId, void(derived::*Handler)(HWND hDlg,WPARAM wParam,LPARAM lParam));\
                                         void HandleManager(void);\

#define BEGIN_MESSAGE_MAP(derived) void derived::HandleManager(void) {

#define ADD_MESSAGE_HANDLER(message,handler) AddHandler(message, handler);

#define END_MESSAGE_MAP() }

#define ENABLE_MESSAGE_MAP() HandleManager();

class CBaseDialog  
{

    public:

        std::map<UINT,t_MessageEntry>               m_MessageMap;
        std::map<UINT,t_MessageEntry>::iterator m_MessageMapIterator;

        CBaseDialog(int nResId, HWND hParent=NULL);
        virtual ~CBaseDialog();

        int DoModal(void);

        static BOOL CALLBACK DialogProcStatic(HWND hDlg, UINT message, WPARAM wParam, LPARAM lParam);
        BOOL CALLBACK DialogProc(HWND hDlg, UINT message, WPARAM wParam, LPARAM lParam);

        void OnOK(void);
        void OnCancel(void);

        void AddMessageHandler(UINT MessageId, void(CBaseDialog::*Handler)(HWND hDlg,WPARAM wParam,LPARAM lParam));

    protected:

        int m_nResId;
        HWND m_hParent;

        static HWND m_hWindow;
        static long m_lSaveThis;
};

BaseDialog.cpp:

HWND CBaseDialog::m_hWindow = NULL;
long CBaseDialog::m_lSaveThis = 0; // Changes on second declaration of derived class

CBaseDialog::CBaseDialog(int nResId, HWND hParent)
{
    m_lSaveThis = (long)this; /// store this pointer

    m_nResId = nResId;
    m_hParent = hParent;

}

CBaseDialog::~CBaseDialog()
{
    m_hWindow = NULL;
    m_lSaveThis = 0;
}

int CBaseDialog::DoModal(void)
{   
    HWND hWnd = CreateDialog( GetModuleHandle( NULL ), MAKEINTRESOURCE( m_nResId ), m_hParent, ( DLGPROC )DialogProcStatic );
    return 0; 
}

void CBaseDialog::AddMessageHandler(UINT MessageId, void(CBaseDialog::*MsgHandler)(HWND hDlg,WPARAM wParam,LPARAM lParam))
{
    t_MessageEntry MessageEntry;
    MessageEntry.MsgHandler = MsgHandler;

    m_MessageMap.insert(std::map<UINT,t_MessageEntry>::value_type(MessageId, MessageEntry)); /// insert key & data to map
}

BOOL CALLBACK CBaseDialog::DialogProcStatic(HWND hDlg, UINT uMsg, WPARAM wParam, LPARAM lParam)
{
    if(m_hWindow == NULL)
    {
        m_hWindow = hDlg;
    }

    CBaseDialog *pThis = (CBaseDialog*)m_lSaveThis; /// typecast stored this-pointer to CBaseDialog pointer

    return pThis->DialogProc( hDlg, uMsg, wParam, lParam );
}
BOOL CALLBACK CBaseDialog::DialogProc(HWND hDlg, UINT message, WPARAM wParam, LPARAM lParam)
{
    m_MessageMapIterator = m_MessageMap.find(message); /// find message entry by key

    if(m_MessageMapIterator == m_MessageMap.end()) /// check if message entry available
    {
        return 0;
    }
    else
    {
        t_MessageEntry MessageEntry = (*m_MessageMapIterator).second; /// dereference iterator and get message entry

        void (CBaseDialog::*MessageHandler)(HWND hDlg,WPARAM wParam,LPARAM lParam);

        MessageHandler = MessageEntry.MsgHandler;

        (this->*MessageHandler)(hDlg, wParam, lParam); /// execute function

        return 0;
    }
}
void CBaseDialog::OnOK(void)
{
    EndDialog(m_hWindow, IDOK);
}

void CBaseDialog::OnCancel(void)
{
    EndDialog(m_hWindow, IDCANCEL);
}

Outliner.h:
#include "BaseDialog.h"

class COutlinerDlg : public CBaseDialog  
{
public:
    COutlinerDlg( int nResId, HWND hParent=NULL );
    virtual ~COutlinerDlg();

    void Initialize( LPCWSTR strRootName )
    {
        m_strRootName = strRootName;
    }

public:
    VOID Resize( RECT rc );
    HWND GetHWND(){ return m_hWindow; }
    HWND GetTREEDLG(){ return m_hTreeDlg; }
    BOOL GetVisible(){ return m_bVisible; }
    VOID SetVisible( BOOL b ){ m_bVisible = b; }
    BOOL GetDragging(){ return m_bDragging; }
    VOID SetDragging( BOOL b ){ m_bDragging = b; }
    VOID SetParentHWND( HWND hWnd ){ m_hParent = hWnd; }
    HWND GetParentHWND(){ return m_hParent; }
    BOOL Show( DWORD dwFlags ){ return ShowWindow( m_hWindow, dwFlags ); }

    HRESULT BuildOutlinerFromDirectory( LPCWSTR rootName, LPCWSTR directory );
    HRESULT BuildChildDirectory( LPCWSTR child );
protected:
        void On_WM_INITDIALOG( HWND hDlg, WPARAM wParam, LPARAM lParam );
        void On_WM_COMMAND( HWND hDlg, WPARAM wParam, LPARAM lParam );
        void On_WM_NOTIFY( HWND hDlg, WPARAM wParam, LPARAM lParam );
        void On_WM_LBUTTONDOWN( HWND hDlg, WPARAM wParam, LPARAM lParam );
        void On_WM_LBUTTONUP( HWND hDlg, WPARAM wParam, LPARAM lParam );
        void On_WM_MOUSEMOVE( HWND hDlg, WPARAM wParam, LPARAM lParam );
        void On_WM_PAINT( HWND hDlg, WPARAM wParam, LPARAM lParam );
        void On_WM_SIZE( HWND hDlg, WPARAM wParam, LPARAM lParam );
        void On_WM_CLOSE( HWND hDlg, WPARAM wParam, LPARAM lParam );

        DECLARE_MESSAGE_HANDLER(COutlinerDlg);

private:

    // Tree Root name
    LPCWSTR m_strRootName;

    // Directory 
    LPCWSTR m_strDirectory;

    // Dialog Dimensions
    RECT m_rcDlg;

    TV_ITEM m_tvi;
    TV_INSERTSTRUCT m_tvinsert;   // struct to config out tree control
    HTREEITEM m_hTISelected;
    HTREEITEM m_hTIParent;           // Tree item handle
    HTREEITEM m_hTIBefore;           // .......
    HTREEITEM m_hTIRoot;             // .......
    HIMAGELIST m_hImageList;      // Image list array hadle
    bool m_bSelected;

    // for drag and drop
    HWND m_hTreeDlg;
    HTREEITEM m_hTIHitTarget;
    TVHITTESTINFO m_tvht; 
    POINTS m_ptsPos;
    bool m_bDragging;

    bool m_bVisible;

    // for lable editing
    HWND m_hEdit;   
};

Outliner.cpp:
#include "Outliner.h"

IMPLEMENT_MESSAGE_HANDLER( CBaseDialog, COutlinerDlg )

BEGIN_MESSAGE_MAP( COutlinerDlg )
    ADD_MESSAGE_HANDLER( WM_INITDIALOG, &COutlinerDlg::On_WM_INITDIALOG )
    ADD_MESSAGE_HANDLER( WM_COMMAND, &COutlinerDlg::On_WM_COMMAND )
    ADD_MESSAGE_HANDLER( WM_NOTIFY, &COutlinerDlg::On_WM_NOTIFY )
    ADD_MESSAGE_HANDLER( WM_LBUTTONDOWN, &COutlinerDlg::On_WM_LBUTTONDOWN )
    ADD_MESSAGE_HANDLER( WM_LBUTTONUP, &COutlinerDlg::On_WM_LBUTTONUP )
    ADD_MESSAGE_HANDLER( WM_MOUSEMOVE, &COutlinerDlg::On_WM_MOUSEMOVE )
    ADD_MESSAGE_HANDLER( WM_PAINT, &COutlinerDlg::On_WM_PAINT )
    ADD_MESSAGE_HANDLER( WM_CLOSE, &COutlinerDlg::On_WM_CLOSE )
END_MESSAGE_MAP( )

COutlinerDlg::COutlinerDlg( int nResId, HWND hParent ) : CBaseDialog( nResId, hParent )
{
    ENABLE_MESSAGE_MAP( );

    m_hTISelected = m_hTIParent = m_hTIBefore = m_hTIRoot = m_hTIHitTarget = NULL;
    m_hImageList = NULL;
    m_bSelected = m_bDragging = false;
    m_bVisible = true;
    m_hTreeDlg = NULL;
    ZeroMemory( &m_tvi, sizeof( TV_ITEM ) );
    ZeroMemory( &m_tvinsert, sizeof( TV_INSERTSTRUCT ) );
    ZeroMemory( &m_tvht, sizeof( TVHITTESTINFO ) );
    ZeroMemory( &m_ptsPos, sizeof( POINTS ) );
}

COutlinerDlg::~COutlinerDlg( )
{
    m_hWindow = NULL;
    m_lSaveThis = 0;
}
void COutlinerDlg::On_WM_INITDIALOG( HWND hDlg, WPARAM wParam, LPARAM lParam )
{
...
} 
```

这段代码来自我在代码项目中在线找到的一个演示，我认为......

我可以实例化基类，以便在声明 Outliner 的新实例时不会覆盖静态 LONG 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T02:53:24.170

即使你实例化了基类，`static long m_lSaveThis;`当你实例化一个新的 Outliner 时它的值仍然会改变。

原因：由于`m_lSaveThis`是静态的，它在内存中只有一个副本，并且您的 Base 类构造函数中的这段代码 `m_lSaveThis = (long)this;`将为 CBaseDialog 或 COutlinerDlg 的每个实例调用，因为 COutlinerDlg 从 CBaseDialog 继承，因此它也调用其构造函数。使用此代码，`m_lSaveThis`将仅指向您创建的最新实例，无论是基类还是派生类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T02:13:19.653

在这里，您使用的`static long m_lSaveThis`静态声明对于类的所有实例都是通用的（它是类级别而不是实例级别）。那么为什么要使用静态呢？我认为如果您声明`m_lSaveThis`没有静态，您的要求可以达到。

```
protected:
  long m_lSaveThis;

CBaseDialog::CBaseDialog(int nResId, HWND hParent)
{
  m_lSaveThis = (long)this; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-02T08:06:09.967

有我的代码，声明一个静态地图对象来处理类实例和窗口句柄。下面的头文件显示了示例代码：

```
CDialogBase
{
   ...
   static BOOL CALLBACK DialogProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam);
   static std::map<HWND, CDialogBase*> m_mapInstance; 
} 
```

并像这样实现 DialogProc：

```
BOOL CALLBACK CDialogBase::DialogProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam)
{
    CDialogBase * pThis = NULL;
    std::map<HWND, CDialogBase*>::iterator it = m_mapInstance.find(hwnd);
    if (it != m_mapInstance.end())
    {
        pThis = m_mapInstance[hwnd];
    }

    switch (msg)
    {
        case WM_INITDIALOG:
        {
            if (pThis != NULL)
            {
                m_mapInstance.erase(hwnd);
                pThis = NULL;
            }

            if (lParam == NULL)
            {
                return FALSE; //Should start dialog by DialogBoxParam and lParam must not be null.
            }

            pThis = (CDialogBase*)lParam;

            m_mapInstance.insert(std::map<HWND, CDialogBase*>::value_type(hwnd, pThis));            

            pThis->OnInitDialog();
        }
        break;
        case WM_DESTROY:
        {
            if (pThis != NULL)
            {
                pThis->OnDestroy();
                m_mapInstance.erase(hwnd);
            }
        }
        default:            
        break;
    }
    if(pThis != NULL)
        return pThis->OnDefaultDialogProc(msg, wParam, lParam);  //Must implement this function and default return FALSE.
    else 
        return FALSE;

} 
```

并且，显示对话框：

```
UINT CDialogBase::DoModal(HINSTANCE hInst, HWND hParent, UINT nDlgID)
{
    m_nDialogResourceID = nDlgID;
    return ::DialogBoxParam(hInst, MAKEINTRESOURCE(nDlgID),
        hParent, DialogProc, (LPARAM) this);
} 
```

我希望这对你有帮助。

# linux - Linux 消息队列 - 多个接收者

> ID：15015572
> 
> 赞同：2
> 
> 时间：2013-02-22T01:53:23.963
> 
> 标签：linux, unix, ipc, message-queue

我最近一直在调查和使用 linux 消息队列，并且遇到了一些我不太明白为什么会发生的事情！

如果我们有两个正在运行的程序都在无限循环中使用 msgrcv() 来检查消息然后发送两条消息，那么第一个运行的程序将接收第一条消息，而第二个程序将接收第二条消息？如果您继续发送消息，则它会在每个接收者之间交替。

显然，我知道一旦一个程序读取了消息，它就会从队列中删除，但是如果它们都在无限检查，谁/如何决定谁将接收消息？

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T02:11:15.473

简短的回答是内核决定。

长答案是，这是由[Linux 内核](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=blob;f=ipc/msg.c#l812)[中的`do_msgrcv()`](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=blob;f=ipc/msg.c#l812)调用处理的。如果没有可用的消息，则调用者将被放入队列中，直到有消息可用。不能保证像你描述的那样来回走动，因为这完全取决于每次`msgrcv()`调用的时间，但在你的情况下，它可能几乎一直都是这样。

# linux - kdump 磁盘大小的最佳实践是什么

> ID：15015576
> 
> 赞同：4
> 
> 时间：2013-02-22T01:53:51.243
> 
> 标签：linux, memory, crash-dumps

我们有一`redhat 6`台服务器和内存`64GB`，我们正在计划配置`kdump`，我对应该设置的磁盘大小感到困惑。Redhat 建议它会是`memory + 2% more`（这意味着大约 66GB 磁盘空间）。我需要你的建议，我应该为 kdump 定义的最佳大小是多少。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T03:43:02.620

首先，除非 Redhat 支持人员告诉您，否则不要启用 kdump。KDumps 并没有真正产生对大多数 Linux '客户'有用的东西。

其次，kdump 可以（可能）将 RAM 的全部内容转储到转储文件中。如果您有 64GB 的 RAM ..AND.. 触发 kdump 时它已满，那么是的，您的 kdump 文件的空间将需要 RH 建议的空间。也就是说，大多数问题都可以通过部分 kdump 来识别。RH 支持之前甚至说过要在发送文件之前对文件执行“head -c”以减小文件大小。通常将其缩减到前 64MB。

最后，请记住在完成对问题的故障排除后禁用 kdump。这不是您希望在任何高于“开发/测试”级别的系统上不断运行的东西。最重要的是记住在发生 kdump 后清除此空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T08:00:51.833

除非系统有足够的内存，否则 kdump 崩溃恢复服务将无法运行。有关最低内存要求的信息，请参阅 Red Hat Enterprise Linux 技术功能和限制比较表的最低要求部分。启用 kdump 后，最低内存要求会随着为其保留的内存量而增加。此值由用户确定，当使用 crashkernel=auto 选项时，默认为 128 MB 加上每 TB 物理内存 64 MB（即，对于具有 1 TB 物理内存的系统，总共 192 MB ）。

在 Red Hat Enterprise Linux 6 中， crashkernel=auto 仅在系统具有 4 GB 或更多物理内存时才保留内存。

要配置为 kdump 内核保留的内存量，请以 root 身份在文本编辑器中打开 /boot/grub/grub.conf 文件，并将 crashkernel=M（或 crashkernel=auto）参数添加到内核列表选项

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-08T02:25:34.073

我以前也有同样的问题。

为 kdump 内核保留的内存量可以通过以下方案估算：

> 要保留的基本内存 = 128MB
> ，为系统中存在的每 TB 物理 RAM 添加额外的 64MB。因此，例如，如果系统有 1TB 的内存，则将保留 192MB (128MB + 64MB)。

所以我相信 128MB 在你的情况下就足够了。

您可能想查看此链接[在 RHEL6.2（及更高版本）内核上配置 crashkernel](https://access.redhat.com/solutions/59432)

# c# - 表达式中的模型与 ViewData 中的模型不同

> ID：15015577
> 
> 赞同：0
> 
> 时间：2013-02-22T01:53:53.507
> 
> 标签：c#, asp.net-mvc-4

我对 ViewModel 上的编辑视图有一点问题。当我第一次将我的编辑视图发布到服务器时，它需要再次返回编辑视图，并使用已附加数据库 ID 的相同 ViewModel。

这是相应控制器中的 Edit 方法：

```
[HttpPost]
public ActionResult Edit(InvoiceDetailsViewModel invoice) {
  using (var context = new HyperContext(WebSecurity.CurrentUserId)) {
    if (ModelState.IsValid) {
      if (invoice.ID == 0) {
        var dbItem = Mapper.Map<eu.ecmt.RecruitmentDatabase.Models.Invoice>(invoice);
        context.Invoices.Add(dbItem);
        context.SaveChanges();
        var newInvoice = Mapper.Map<InvoiceDetailsViewModel>(dbItem);
        FillViewBag(context, newInvoice);
        newInvoice.Description = "TEST";
        return PartialView(newInvoice);
      }
      else {
        context.Entry(Mapper.Map<eu.ecmt.RecruitmentDatabase.Models.Invoice>(invoice)).State = System.Data.EntityState.Modified;
        context.SaveChanges();
        return Content(Boolean.TrueString);
      }
    }
    FillViewBag(context, invoice);
    return PartialView(invoice);
  }
} 
```

这里的相关部分`invoice.ID`是 0，发票被保存到 DB 以获取 ID 并返回到 Edit 视图。在那个观点中，我得到了这些线作为初学者：

```
@model eu.ecmt.RecruitmentDatabase.ViewModels.InvoiceDetailsViewModel

@using (Html.BeginForm("Edit", "Invoice", FormMethod.Post, new { id = "invoices-edit-form" })) {
    @Html.ValidationSummary(true)

    <script type="text/javascript">
        $(document).ready(function () {
            //$("#tabs").tabs();
            InitProfileUI();
        });
    </script>
    if (Model.ID != 0) {
        <script type="text/javascript">
            $(document).ready(function () {
                LoadList('/InvoiceDetail/List/@Model.ID', '', 'invoice-details');
            });
        </script>
    }
    <fieldset>
        <legend>Edit contract</legend>

        @Html.HiddenFor(m => m.ID)
        @Html.HiddenFor(m => m.InvoiceNumber)
        @Html.HiddenFor(m => m.Created)
        @Html.HiddenFor(m => m.CreatedBy)
        @Html.HiddenFor(m => m.Modified)
        @Html.HiddenFor(m => m.ModifiedBy) 
```

首次渲染此视图时，包含`LoadList`调用的脚本元素不在输出中。当表单发布并使用更新的视图模型呈现视图时，该元素在输出中。但是，包含发票 ID 的隐藏字段仍然显示 0。因此，从本质上讲，这里发生的是 ViewData 字典中的模型对象是正确的版本，表达式中使用的对象似乎成为另一个更旧的版本。

有人愿意解释这一点并指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:13:16.637

[根据这篇文章](https://stackoverflow.com/questions/4710447/asp-net-mvc-html-hiddenfor-with-wrong-value)，这似乎是设计行为。

摘要：HTMLHelper 将首先使用 POST 中的值，然后将使用来自实际模型的值。在控制器方法中将它们从 ModelState 中删除就可以了：

```
[HttpPost]
public ActionResult Edit(InvoiceDetailsViewModel invoice) {
  using (var context = new HyperContext(WebSecurity.CurrentUserId)) {
    if (ModelState.IsValid) {
      if (invoice.ID == 0) {
        ModelState.Remove("ID");
        ModelState.Remove("Created");
        ModelState.Remove("CreatedBy");
        ModelState.Remove("Modified");
        ModelState.Remove("ModifiedBy");
        var dbItem = Mapper.Map<eu.ecmt.RecruitmentDatabase.Models.Invoice>(invoice);
        context.Invoices.Add(dbItem);
        context.SaveChanges();
        invoice = Mapper.Map<InvoiceDetailsViewModel>(dbItem);
        FillViewBag(context, invoice);
        return PartialView(invoice);
      }
      else {
        context.Entry(Mapper.Map<eu.ecmt.RecruitmentDatabase.Models.Invoice>(invoice)).State = System.Data.EntityState.Modified;
        context.SaveChanges();
        return Content(Boolean.TrueString);
      }
    }
    FillViewBag(context, invoice);
    return PartialView(invoice);
  }
} 
```

# java - maven会自动将jar文件打包成war文件吗？

> ID：15015584
> 
> 赞同：-1
> 
> 时间：2013-02-22T01:54:47.063
> 
> 标签：java, apache, maven

我使用了某人的源代码及其 jar 库。当我构建战争文件上传到我的服务器时，我经常遇到 NoClassDefFound 错误，因为库不在工件中。我了解到（或在某处无意中听到）maven 会自动将所需的所有内容打包到 war 文件中（取决于运行目标）。是这样吗？

我需要知道，这样我才能花时间学习 Maven。如果是这样，任何快速和肮脏的教程？:)，谢谢堆。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T01:58:17.610

Maven 比快速更脏。（在这里插入粗俗。）

[五分钟](http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html)内的 Maven 是最快的，最脏的。

Maven 将传递依赖项打包到 war 文件中，除非另有配置。

# java - 创建 JApplet MadLibs 游戏

> ID：15015585
> 
> 赞同：1
> 
> 时间：2013-02-22T01:54:47.643
> 
> 标签：java, image, swing, japplet

我正在创建一个 JApplet MadLibs 游戏，但我添加的图像填满了整个页面，因此我的标签和 JTextField 被阻止。我只希望徽标位于小程序顶部的中心。

我的代码：

```
import java.awt.*;
import javax.swing.*;
import javax.swing.JApplet;
import java.awt.event.*;
import java.net.URL;

public class MadLibs extends JApplet implements ActionListener {
  JLabel label1 = new JLabel("A Proper First Name: ");
  JLabel label2 = new JLabel("A Pet: ");
  JLabel label3 = new JLabel("A Personal Attribute: ");
  JLabel label4 = new JLabel("An Adjective: ");
  JLabel label5 = new JLabel("A Verb: ");
  JTextField jtf1 = new JTextField();
  JTextField jtf2 = new JTextField();
  JTextField jtf3 = new JTextField();
  JTextField jtf4 = new JTextField();
  JTextField jtf5 = new JTextField();
  JButton jb = new JButton("Create!");
  JLabel madlib = new JLabel("");
  Container con = getContentPane();
  private Image image;

  public void init() {
     image = getImage(getDocumentBase(), "MadLibsLogo.gif");
     jb.addActionListener(this);
     con.add(label1);
     con.add(jtf1);
     con.add(label2);
     con.add(jtf2);
     con.add(label3);
     con.add(jtf3);
     con.add(label4);
     con.add(jtf4);
     con.add(label5);
     con.add(jtf5);
     con.add(jb);
     con.add(madlib);
  }
  public void actionPerformed(ActionEvent e) {
     madlib.setText(jtf1.getText() + " had a little " + jtf2.getText() + "/nIts " + jtf3.getText() + " was " + jtf4.getText() +
        " as snow/nAnd everywhere that " + jtf1.getText() + jtf5.getText() + "/nThe " + jtf2.getText() + " was sure to go.");
     repaint();
  }
  public void paint(Graphics g)
  {
     g.drawImage(image, 0, 0, 229, 73, this);
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T01:56:45.197

不要重写 JApplet 的paint 方法，实际上重写任何顶级窗口的paint 方法通常是一个坏主意，除非您确定需要这样做，不关心或需要双精度Swing 图形提供的缓冲，并了解这可能会影响 GUI 的边框和子组件。

为什么不简单地将图像放在 ImageIcon 和 JLabel 中，然后将 JLabel 放在您希望显示图像的位置？

编辑：您似乎在不考虑布局的情况下向 contentPane 添加了许多组件。您是否在未发布的代码中某处更改了默认 BorderLayout 的布局？

**编辑 2** 你说：

> 不，我还没有……我还没有进入布局。我将如何更改 BorderLayout 以使所有内容都对齐？

如果您没有更改布局，那么您看到的唯一可能就是添加到 contentPane 的最后一个组件，madLib JLabel。您需要将 JPanel 层叠在一起，每个 JPanel 都有自己的布局管理器。例如，继续使用 BorderLayout 离开 contentPane，在 BorderLayout.NORTH 或 PAGE_START 位置添加带有图像的徽标 JLabel。然后将 GUI 的大部分主体添加到放置 BorderLayout.CENTER 的 JPanel 中。阅读各种布局管理器并与它们一起玩，因为这是学习如何使用它们的最佳方式。

# php - 查询选中的复选框

> ID：15015592
> 
> 赞同：0
> 
> 时间：2013-02-22T01:56:01.263
> 
> 标签：php, mysql, sql

我有两个页面 search.php 和 load.php ...在 search.php 我有复选框，我使用 jquery 将复选框传递给 load.php

```
<div class="checkBoxes">
<input type="checkbox" name="art[]" value="1" >Digital Art <br />
<input type="checkbox" name="art[]" value="2" >Traditional Art <br />
<input type="checkbox" name="art[]" value="3">Photography <br />
</div>

<script language="javascript">
$(document).ready(function(e) {
    $(".btn_advancedsearch").click(function(){
        $('#content').fadeIn(1500);
        $("#content").load("/search/advancedsearch.php?type="+ $("[name='type']:checked").val()+"&category="+$("input[type='checkbox']").val());
        window.scroll(0,0);
    });
});
</script> 
```

在 load.php 中我正在使用`$category=$_REQUEST['category'];`，现在我想编写查询以从复选框中获取所有选定的类别，但我不知道如何......我尝试了这个查询，但它不起作用 `$sql = "SELECT * FROM art WHERE categoryID IN (implode(',', $category))";`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T02:15:24.950

好的，找到了解决方案。我不确定代码，但你可以更改，有些人会这样说：

```
jQuery(document).ready(function($) {
    $(":checkbox").bind("click", function(event) {
    if ($(this).is(':checked')) {
        var checked = $(this).val();
        $(".btn_advancedsearch").hide();
        $("#content").load('/search/advancedsearch.php?type=' + checked);
        $('#content').fadeIn(1500);
        window.scroll(0,0);
    }
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T04:42:16.533

这是因为`$("[name='type']:checked").val()`将返回您的数组对象，您不能直接将其作为查询字符串参数传递。执行以下步骤
1\. 获取选中的复选框值并将它们以逗号分隔在一个变量中（使用单引号，因此可以直接在查询中使用）_eg。'1','2','3'
2\. 通过查询字符串传递这个值
3\. 在你的选择查询中使用这个值——当你使用`in`操作符时，你可以直接把这个值作为`select * from table name where col in (valueYouReceived)`

**代码：**
JS 中的某处——当你点击按钮时`$(".btn_advancedsearch").click(function(){`

```
...
...
var selectedValues = "'";
$('input[type=checkbox]').each(function() {
  if($(this).prop('checked'))
  {
     selectedValues += $(this).val()+"',";
  }
});
selectedValues = selectedValues.substring(0, selectedValues.length-1);  // To remove last comma (,) 
```

*只需“alert()”这个值，看看你得到了什么`alert(selectedValues)`*

现在将此变量作为查询参数传递

```
$("#content").load("/search/advancedsearch.php?type="+selectedValues+"&category="+$("input[type='checkbox']").val()); 
```

在 php 部分获取值，因为你得到它

```
$category=$_REQUEST['category']; 
```

在你的 sql 查询中使用这个值

```
"SELECT * FROM art WHERE categoryID IN ($category)"; 
```

希望这可以帮助！！

# php - 将可变文本嵌入到 php/html 网页中

> ID：15015596
> 
> 赞同：1
> 
> 时间：2013-02-22T01:56:28.583
> 
> 标签：php, javascript, html, ajax

我正在尝试创建一个网页，该网页的区域显示不同的文本，具体取决于单击的链接。我在点击命令上查看了 if else 代码、嵌入对象。

这是我整理的一些基本代码。有人可以让我知道我是否在正确的轨道上或哪里出错了。我也认为我需要使用 AJAX，但我对此并不熟悉。

任何帮助将不胜感激。

```
<table width="80%" cellspacing="0" cellpadding="0" align="center">
   <tr>
       <td>
           <div align="center">
              <a href="#Step1" class="menuNav">
                  <strong>Step 1</strong>
              </a>
           </div>
        </td>
        <td>
           <div align="center">
              <a href="#Step2" class="menuNav">
                  <strong>Step 2</strong>
              </a>
           </div>
         </td>
         <td>
           <div align="center">
              <a href="#Step3" class="menuNav">
                  <strong>Step 3</strong>
              </a>
           </div>
         </td>
       </tr>
    </table>

    <br />

    <object type="text/html" width="80" height="150" border="thin">
       <?php
         if( onclick = "#Step1" ) {
            echo (i hope this work );
         } else { }
       ?>
    </object> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T02:16:06.243

您的意思是为不同的链接显示不同的区域吗？这是代码的样子：

```
<table width="80%" cellspacing="0" cellpadding="0" align="center">
   <tr>
<?php
switch ($_GET['step']) {
case 1:
?>
       <td>
           <div align="center">
              <a href="#Step1" class="menuNav">
                  <strong>Step 1</strong>
              </a>
           </div>
        </td>
<?php
break;
case 2:
?>
        <td>
           <div align="center">
              <a href="#Step2" class="menuNav">
                  <strong>Step 2</strong>
              </a>
           </div>
         </td>
<?php
break;
case 3:
?>
         <td>
           <div align="center">
              <a href="#Step3" class="menuNav">
                  <strong>Step 3</strong>
              </a>
           </div>
         </td>
<?php
break;
}
       </tr>
    </table> 
```

这是为不同的 url 显示标记的不同部分的一种非常简单的方法。然后，您可以让您的用户转到不同的链接以显示不同的块（/script.php?step=1 等）

# orchardcms - ajax 响应果园中的通知

> ID：15015603
> 
> 赞同：3
> 
> 时间：2013-02-22T01:56:59.963
> 
> 标签：orchardcms

我正在使用 ajax 请求在我的项目中获取 PartialViews 之一。我想通过 INotifier 传递一条消息。Cuttently 我正在使用 HttpStatusCodeResult`return new HttpStatusCodeResult(204, "Message");`传递有关错误的信息，但不令人满意的解决方案。

```
 $(this).load($(this).attr("href"), function (response, status, xhr) {
        if (xhr.status == 204) {
            // show message
        }
    }); 
```

我想知道这可以通过`INotifier.Error()`在 ActionResult 中使用标准来实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T21:34:00.093

没有。默认通知器不适用于 AJAX 请求。它的作用是将通知排队在一个临时集合中。然后在请求结束时将排队的通知写入客户端 - 推送到`Layout.Messages`区域。

在您的情况下，最好`INotifier`按照所需的逻辑实现您自己的。这是一个实现起来非常简单的接口，因此实际上并没有那么多工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-03-23T09:23:51.093

我不需要实现 INotifier，我只在我的 PartialView 中放置了这个：

```
@Display(WorkContext.Layout.Zones["Messages"]) 
```

现在消息不会在主区域中呈现（在使用主题的 Layout.cshtml 中），但可以放置在 PartialView 中的任何位置，例如在受影响的表下。

# xcode - Xcode 不会编译或索引项目

> ID：15015605
> 
> 赞同：0
> 
> 时间：2013-02-22T01:57:18.673
> 
> 标签：xcode, macos

我在 Xcode 中使用 C++ 编程已经有一段时间了。就在最近，Xcode 根本没有索引我的项目。它将开始索引，但会立即挂起而不继续。

![索引项目挂起](../Images/d072f95693d1e7d9015b2bd3fcb0570d.png)

尝试编译项目时，编译器也会挂起。

![编译项目挂起](../Images/6edf3a8a326abb254fcf70fa72b1df79.png)

我已尝试清除派生数据（以及与此相关的所有组织者数据），但没有任何效果。我没有做任何事情来开始这个问题，它完全随机出现。

每次我尝试编译项目时，控制台都会吐出一个错误（您可以在下面查看）。当我停止编译时它会停止

> 2/21/13 8:44:56.383 PM Xcode：DVTAssertions：/SourceCache/IDEXcode3ProjectSupport/IDEXcode3ProjectSupport-2108/Xcode3Sources/XcodeIDE/Frameworks/DevToolsBase/pbxcore/SpecificationTypes/XCGccMakefileDependencies.m:87 中的警告详细信息：无法加载依赖项输出来自“/Users/Walker/Library/Developer/Xcode/DerivedData/HelloWorld-hinpckyvtyjoqgcoykprkexcwzvn/Build/Intermediates/HelloWorld.build/Debug/HelloWorld.build/Objects-normal/x86_64/ship.d”的内容。错误：错误域 = NSCocoaErrorDomain 代码 = 260 “文件“ship.d”无法打开，因为没有这样的文件。” UserInfo=0x403ea95c0 {NSFilePath=/Users/Walker/Library/Developer/Xcode/DerivedData/HelloWorld-hinpckyvtyjoqgcoykprkexcwzvn/Build/Intermediates/HelloWorld.build/Debug/HelloWorld.build/Objects-normal/x86_64/ship.d，NSUnderlyingError=0x403e9e960 " 操作无法完成。没有这样的文件或目录"}。用户信息：{ NSFilePath = "/Users/Walker/Library/Developer/Xcode/DerivedData/HelloWorld-hinpckyvtyjoqgcoykprkexcwzvn/Build/Intermediates/HelloWorld.build/Debug/HelloWorld.build/Objects-normal/ x86_64/ship.d"; NSUnderlyingError = "Error Domain=NSPOSIXErrorDomain Code=2 \"无法完成操作。没有这样的文件或目录\""; }。函数：void XCGccMakefileDependenciesParsePathsFromRuleFile(NSString *, void (^) (NSString *)) Thread: {name = (null), num = 15} 请在 bugreport.apple.com 提交错误，并附上此警告消息以及您可以提供的任何有用信息。操作无法完成。没有这样的文件或目录\””; }。函数：void XCGccMakefileDependenciesParsePathsFromRuleFile(NSString *, void (^)(NSString *)) 线程：{name = (null), num = 15} 请在 bugreport.apple.com 提交错误，并附上此警告消息和任何有用的信息提供。操作无法完成。没有这样的文件或目录\””; }。函数：void XCGccMakefileDependenciesParsePathsFromRuleFile(NSString *, void (^)(NSString *)) 线程：{name = (null), num = 15} 请在 bugreport.apple.com 提交错误，并附上此警告消息和任何有用的信息提供。

[我在http://bugreport.apple.com](http://bugreport.apple.com)提交了一个错误报告，但是已经几天了，我还没有得到任何消息。如果您需要*任何*其他信息，我很乐意提供。谢谢！

PS：当我说挂起时，它不动。在我退出 Xcode 之前，它并不慢或者它只是完全冻结（当再次启动它时会发生同样的事情）。我也尝试过重新安装 Xcode

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-22T02:28:01.170

我假设您使用的是 LLVM 4.2。如果是这样，您的优化级别是什么？我之前遇到过类似的问题，将其设置为“无”解决了它。

# android - 安装我的应用程序时出现“解析包时出现问题”

> ID：15015606
> 
> 赞同：4
> 
> 时间：2013-02-22T01:57:21.210
> 
> 标签：android, eclipse, apk

我不得不重新安装我的电脑。现在，当我在虚拟设备上从 Eclipse 启动我的应用程序时，它工作正常。但是，当我创建一个发行版时，*.apk 文件的大小只有以前的一半，*并且给出了一个

> “解析包时出现问题”

尝试在我的手机（Android 版本 4.1.2）上安装新的 .apk 时出现错误消息。

我的清单包含

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" /> 
```

我安装了最新的 Android SDK 工具等以及 API v8、v15 和 v17。在“Project Build Target”（项目属性）中，API 15 被选中。低于我手机上的那个，所以这个错误消息的常见解决方案似乎不适用于我的情况。

该发行版使用默认的 proguard-android-optimize.txt 。

.apk 的大小减半的事实让我怀疑 proguard，但即使我从其配置文件中删除了所有选项，问题仍然存在。我很困惑。

# javascript - onclick 函数有时不会触发其事件

> ID：15015607
> 
> 赞同：2
> 
> 时间：2013-02-22T01:57:37.263
> 
> 标签：javascript, onclick

我的应用程序中出现问题。当用户单击`div`应该触发事件的事件时，有时（大约 1/10）什么都不会发生 -`onclick`事件没有被触发，其他时候一切顺利。这很奇怪……

在简短的代码中，我可以复制该问题：

```
<html>

<head>
<style type="text/css">
  .links:hover{
    text-decoration: underline;
    cursor: pointer;
  }
</style>
</head>

<body>
  <span id="init_panel" style="visibility:visible; position:absolute; left:0px; top:0px;"></span>
  <script type="text/javascript">
  function init_match(){
    alert("in init_match()");
    //...
  }
  var flag=true;
  function loop(){
    if (flag){
        var div = document.getElementById("init_panel");
        var HTML = "<div class='links' onclick='init_match();'><font color='black'><b>new match!</b></font></div><br />";
        if (div.innerHTML!=HTML){
            div.innerHTML=HTML;
        }
        setTimeout(loop, 1000);
    }
    else{
        div.innerHTML="";
    }
  }
  loop();
  </script>
</body>

</html> 
```

我需要用JavaScript更改一系列div的内容和对应的链接；这就是为什么我需要一个类似的代码。我希望有人能澄清如何在事件中避免这个问题，我非常感谢任何帮助！

*编辑以添加以下信息：*

我添加了以下js代码：

```
document.onclick = my_handler;
function my_handler() {
    alert("the document was clicked!");
} 
```

结果是：在另一个onclick失败的同时，这个document.onclick也失败了。这很奇怪！我想更新 div 的内容，而不会在他们的 onclick 事件上失败......

可以看到此错误的 jsfiddle 的最新版本位于：http:
[//jsfiddle.net/grSDs/3/](http://jsfiddle.net/grSDs/3/)

不同浏览器的成功率和失败率会随着脚本直接运行或通过 jsfiddle 接口运行（不同情况下的成功率从 ~90% 到 ~0%）而变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:04:21.263

最后，经过多次尝试，我找到了解决方案：

我不得不更换这条线：

```
var HTML = "<div class='links' onclick='init_match();'><font color='black'><b>new match!</b></font></div><br />"; 
```

经过：

```
var HTML = "<div class=\"links\" onclick=\"init_match();\"><font color=\"black\"><b>new match!</b></font></div><br>"; 
```

因为当我插入第一行时，该 div 的 innerHTML 会自动更改为第二行。因此，当代码将我的 HTML（第一个字符串）与自动生成的 div.innerHTML（第二个字符串）进行比较时，程序正在刷新 div.innerHTML，即使它应该是安静的，有时也会断开链接。

代码的逻辑是正确的，并且该错误具有非常奇怪的行为，并且是非逻辑解决方案。

奇怪的是，javascript 更改`<br />`为`<br>`（为什么？）并且它也更改了引号。

# javascript - 当用户确认错误（取消）时如何取消选择列表中的选定选项

> ID：15015611
> 
> 赞同：3
> 
> 时间：2013-02-22T01:58:01.413
> 
> 标签：javascript, dom

我有这个 JavaScript 代码：

```
function change(varam){
    if(confirm("Select this option?"))
    {

    } else {
        if(varam=="1")
        {
            alert("Return selected to NO");
        } else {
            alert("Return selected to YES");
        }
    }

} 
```

和 HTML 代码：

```
<select id="sel" name="sel" onchange="change(this.value)">
    <option value="1">YES</option>
    <option value="0">NO</option>
</select> 
```

**我想要的是：**

假设选择的默认值为**YES**。如果用户选择**NO**，是否要更改为**NO**会出现确认框，如果选择“OK”，则选择**NO**选项，如果选择“CANCEL”则不选择**NO**选项，而是返回到**YES**选项被选中。反之亦然。

看到这个小提琴：http: [//jsfiddle.net/CtxUy/](http://jsfiddle.net/CtxUy/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T02:06:16.897

您可以遍历选项并选择具有该`selected`属性的选项。如果没有，请选择第一个（在没有`selected`属性的情况下始终是默认值）。

```
var select = document.getElementById('sel');
var options = select.options;
options[0].selected = true; // preemptively select the first option

for (var i = 0, l = options.length; i < l; i++) {
    if (options[i].hasAttribute('selected')) {
        options[i].selected = true;
        break;
    }
} 
```

[**演示**](http://jsfiddle.net/f5jbF/)

**参考资料：** [`HTMLSelectElement`](https://developer.mozilla.org/en-US/docs/DOM/HTMLSelectElement) , [`HTMLOptionElement`](https://developer.mozilla.org/en-US/docs/DOM/HTMLOptionElement).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T02:09:41.563

如果您只关心这两个元素，则可以手动设置值：

```
if(varam=="1")
{
    document.getElementById('sel').value = 0;
} else {
    document.getElementById('sel').value = 1;
} 
```

如果可能有其他值，您可以做的是跟踪最初选择的值，并在他们拒绝确认时将选择器值设置回该值，或者在他们确认时覆盖该存储的值。

像这样：http: [//jsfiddle.net/CtxUy/2/](http://jsfiddle.net/CtxUy/2/)

# xcode - 许多按钮和自动布局

> ID：15015612
> 
> 赞同：1
> 
> 时间：2013-02-22T01:58:14.253
> 
> 标签：xcode, cocoa-touch, autolayout

这是我的情况。我想将许多按钮放在一个视图中，例如计算器应用程序。它应该适用于不同的屏幕尺寸，3.5 英寸和 4 英寸。

我希望 4 英寸视图有更大的按钮，而 3.5 英寸视图有更小的按钮，间距合适。

但是，我有几个问题。

1) 当视图有很多组件和约束时，Xcode 会明显变慢。所以编辑这样的视图是相当耗时的过程。编辑这样的视图也不容易。

2）约束太多，我想尽量减少约束的数量。但是，我可以删除一些，但不能删除其他的。

那么这种情况下的最佳实践是什么？写代码更好？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T02:12:39.913

通常，您会尽可能多地使用 IB。就您而言，由于您的计算机性能似乎受到限制，因此我建议您使用可视格式语言以编程方式进行约束。

# magento - 将横幅添加到 Magento 产品页面

> ID：15015613
> 
> 赞同：0
> 
> 时间：2013-02-22T01:58:16.123
> 
> 标签：magento, magento-1.7

大家好，我正在寻求您的专业知识。我正在一家magento商店工作，我想在我的产品页面上添加一个横幅，就像所附的图片一样。这个横幅在每个产品页面上都需要不同，所以我想要一种方法，我可以浏览我的计算机以获取图像或将 url 添加到图像位置。我在想我需要创建一个属性，然后在 Admin > Catalog > Manager Product > Images 列表下，我将能够像添加新的图像产品一样拉入横幅。这是正确的做法吗？如果是，我如何在我的模板上指定将添加横幅的位置（即在页面顶部）。我试图找到一些我可以添加的代码，所以它知道当我有这个属性时可以把它放在那个位置。任何帮助将非常感激

谢谢

阿里

![在此处输入图像描述](../Images/8ab3292183ab7981ba8d1e464653ca45.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:21:39.850

您好，您可以简单地为使用横幅图像的产品创建一个新属性，您可以在产品视图页面上使用该属性，并且横幅将根据管理员中指定的每个横幅属性值显示在产品页面上。这将在使用中非常简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T05:51:30.757

抱歉，如果没有实际代码，您将无法获得太多帮助。但这是一个你可以使用的想法：

是的，你的想法是正确的。尽管更优雅的方法是在图像网格中添加一个选项作为（横幅）。这将允许您使用 magento 中现有图像处理和处理系统的强大功能。一旦完成；只需在产品视图页面的模板文件中添加代码（我不确定这是企业版还是社区版，或者您使用的是主题。最好启用开发人员调试器选项以查看模板文件路径）。

就添加此代码而言，这应该相当简单。您只需要检查是否有任何图像被标记为“横幅”。然后做一些调整以适应页面，它应该可以工作。

# python - 水平方向的 Numpy 棒阵列

> ID：15015615
> 
> 赞同：2
> 
> 时间：2013-02-22T01:58:37.237
> 
> 标签：python, numpy

我有两个具有相同行数的 numpy 数组 A 和 B。我想要一个新的数组 C，它是 B 在右侧附加的 A。我找不到执行此操作的函数。我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T02:06:22.297

```
>>> import numpy as np
>>> a = np.array([[1, 2, 3], [4, 5, 6]])
>>> b = np.array([[7, 8, 9], [10, 11, 12]])
>>> np.hstack( (a, b) )
array([[ 1,  2,  3,  7,  8,  9],
       [ 4,  5,  6, 10, 11, 12]]) 
```

# xamarin.ios - 未找到 MonoTouch SupportedInterfaceOrientations

> ID：15015616
> 
> 赞同：1
> 
> 时间：2013-02-22T01:58:44.533
> 
> 标签：xamarin.ios, screen-rotation

在带有 SDK 6.1 的 MonoTouch 6.0.10 中，我在 tabbarcontroller 和 navigationcontroller 中有以下内容：

```
public override bool ShouldAutorotate()
{
    return true;
}

public override UIInterfaceOrientationMask SupportedInterfaceOrientations()
{
    var orientations = ParentViewController.GetSupportedInterfaceOrientations();
    foreach ( var controller in ViewControllers )
        orientations = orientations & controller.GetSupportedInterfaceOrientations();
    return orientations;
} 
```

在 AppDelegate 我有：

```
public override UIInterfaceOrientationMask GetSupportedInterfaceOrientations (UIApplication application, UIWindow forWindow)
{
    return UIInterfaceOrientationMask.All;
} 
```

在 FinishedLaunching 我有：

```
window.RootViewController = tabController; 
```

在 tabbarcontroller 和 navigationcontroller 中，这会出现“HelloWorld.TabController.SupportedInterfaceOrientations() 被标记为覆盖但找不到合适的覆盖方法 (CS0115)”形式的错误。

任何建议表示赞赏！

账单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T02:45:15.887

`UIViewController`定义`GetSupportedInterfaceOrientations`您可以在您的`UITabBarController`和`UINavigationController`子类中覆盖的内容。

C# 编译器错误消息（和您的代码）显示您缺少`Get`前缀。

# c++ - 应用程序因 _Unwind_Resume 中止错误而崩溃

> ID：15015618
> 
> 赞同：7
> 
> 时间：2013-02-22T01:58:52.417
> 
> 标签：c++, linux, gcc, boost, stl

调用堆栈：

```
#0 0x00007faf7fdb8ed5 in raise () from /lib/libc.so.6
#1 0x00007faf7fdba3f3 in abort () from /lib/libc.so.6
#2 0x00007faf8063c294 in _gnu_cxx::_verbose_terminate_handler () from /usr/lib/libstdc++.so.6
#3 0x00007faf8063a696 in ?? () from /usr/lib/libstdc++.so.6
#4 0x00007faf8063988b in ?? () from /usr/lib/libstdc++.so.6
#5 0x00007faf8063a458 in _gxx_personality_v0 () from /usr/lib/libstdc++.so.6
#6 0x00007faf800eacb3 in ?? () from /lib/libgcc_s.so.1
#7 0x00007faf800ead78 in _Unwind_Resume () from /lib/libgcc_s.so.1
#8 0x0000000000a0ea6c in ~ServletRequest (this=0x7faf60a156c0) at ../myapp/servlets/server.cpp:124
#9 0x00000000009d8be2 in boost::detail::sp_counted_impl_p<MyApp::ServletRequest>::dispose (this=<value optimized out> at /usr/include/boost/checked_delete.hpp:34
#10 0x00000000006f5569 in ~shared_count (this=<value optimized out> at /usr/include/boost/smart_ptr/detail/sp_counted_base_gcc_x86.hpp:145
#11 0x00000000009d4a59 in MyApp::Dispatcher::request (this=0x19413b8, req={px = 0x7faf732dfc70, pn = {pi = 0x7faf732dfb60}}) at /usr/include/boost/smart_ptr/shared_ptr.hpp:169
#12 0x00000000009afd9e in boost::detail::function::void_function_ref_invoker1<MyApp::Dispatcher, void, boost::shared_ptr<MyLib::HTTP::ServerRequest> >::invoke (function_obj_ptr=<value optimized out>, a0=<value optimized out> at ../libtriton/mordor/mordor/http/servlet.h:28
#13 0x0000000000cd2bb3 in boost::function1<void, boost::shared_ptr<MyLib::HTTP::ServerRequest> >::operator() (this=<value optimized out>, a0=<value optimized out> at /usr/include/boost/function/function_template.hpp:1013 
```

任何人都遇到过这个问题，可以解释为什么中止发生了`_Unwind_Resume`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T03:41:54.437

写了一个简单的测试来模拟这个问题：

```
class A {
public:
    typedef boost::shared_ptr<A> ptr;
    A(std::string name = "default") : m_name(name) { }
    void throwInDestor() {
        if (m_name == "throwInDestructor")
            throw 34;
    }
    ~A(){
        throwInDestor();
    };
    void throwName() {
        throw m_name;
    }

    std::string m_name;
};

void callfunc(A::ptr a) {
    a->throwName();
}

void callf1(A::ptr a) {
    A::ptr b(new A("throwInDestructor"));
    callfunc(a);
}

void callf2() {
    A::ptr a(new A("call2"));
    callf1(a);
}

int main() {
    try {
        try {
            callf2();
        } catch (...) {
            std::cout << "inner: " << boost::diagnostic_information(boost::current_exception()) << std::endl;
        }
    } catch (...) {
        std::cout << "outer: " << boost::diagnostic_information(boost::current_exception()) << std::endl;
    }
} 
```

用g++编译，`_Unwind_Resume`成功重现错误。通过在's 的析构函数`_Unwind_Resume`中捕获异常可以忽略该错误，见下文：`class A`

```
~A(){
    try {
        throwInDestor();
    } catch (...) {
        std::cout << "A::~A: " << boost::diagnostic_information(boost::current_exception()) << std::endl;
    }
}; 
```

`std::string`异常被抛出，并在 main 函数中找到了 catch 处理程序。然后在异常传播到 main 时进行清理工作时发生崩溃，`callf1`因为`std::string`第一个异常正在展开并进行清理工作，但在in function`int`的析构函数中抛出了异常。因此，解决方案可以在 's 的析构函数中立即捕获异常，如上所述。`A``callf1``int``A`

我不知道它为什么有效，但它确实有效。

# ruby-on-rails - 在 Rails 3.2 的 DO 块内显示错误消息

> ID：15015620
> 
> 赞同：0
> 
> 时间：2013-02-22T01:59:23.557
> 
> 标签：ruby-on-rails, rails-activerecord

嗨，我有 2 个相互关联的模型：

**项目采购管理计划** `has_many: items`

**物品** `belongs_to :project_procurement_management_plan`

`project_procurement_management_plan.rb`：

```
class ProjectProcurementManagementPlan < ActiveRecord::Base
  attr_accessible :attachment, :agency_id, :user_id, :year, :status, :code, :prepared_by, 
                  :submitted_by, :items_attributes, :pmo_end_user, :attachments_attributes,
                  :category_id, :combine_in_app, :mode_of_procurement_id, :contract_type_id, 
                  :estimated_budget, :created_at, :updated_at, :currency

  has_many :items, dependent: :destroy, :order=>"created_at ASC"

  accepts_nested_attributes_for :items, :reject_if => lambda { |a| a[:category_id].blank? }, 
                                        :allow_destroy => true

  validate :equality, :reduce=>true

  def equality
    self.items.each do |item|
    errors.add(:base, "Quantity must be equal to the breakdown of quantity!") if item.months != item.qty
    end
  end
end 
```

`item.rb`：

```
class Item < ActiveRecord::Base
  attr_accessible :code, :description, :estimated_budget, 
                  :project_procurement_management_plan_id, :quantity, :unit, :category_id, 
                  :combine_in_app, :mode_of_procurement_id, :contract_type_id, :january, 
                  :february, :march, :april, :may, :june, :july, :august, :september, :october, 
                  :november, :december

  belongs_to :project_procurement_management_plan

  def months
     total = january + february + march + april + may + june + july + august + 
             september + october + november + december
  end

  def qty
     self.quantity
  end
end 
```

由于我将动作从 item 传递到另一个模型，所以我使用`self`. 验证在项目采购管理计划文件中。我也知道`each do`第一个模型`equality`方法中的块是我有多个/冗余错误显示消息的原因。有没有办法在不使用`each do`块的情况下将动作从模型传递到模型？

我试过了：

```
def equality
    item = self.items
    errors.add(:base, "Quantity must be equal to the breakdown of quantity!") if item.months != item.qty
end 
```

但没有运气。它说`undefined method 'months'`。或者有什么方法可以只显示一次错误消息，尽管它在`each do`块内。

**PS：我将茧用于嵌套属性（项目）**

谢谢。任何解决方法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T06:14:57.920

您应该验证`Item`模型本身中的项目，它将帮助您了解哪些项目有验证错误。但是，如果您只想将错误与`ProjectProcurementManagementPlan`您相关联，则可以这样做：

```
def equality
  self.items.each do |item|
    if item.months != item.qty
      errors.add(:base, "Quantity must be equal to the breakdown of quantity!")
      return
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-22T05:57:39.297

要显示一次错误消息，您可以尝试：

```
def equality
    self.items.each do |item|
    unless errors.find.include?("Quantity must be equal to the breakdown of quantity!")
    {
    errors.add(:base, "Quantity must be equal to the breakdown of quantity!") if item.months != item.qty && errors.!include?
    break
    }
    end
  end 
```

# mysql - 结合更新和选择查询

> ID：15015621
> 
> 赞同：1
> 
> 时间：2013-02-22T01:59:29.243
> 
> 标签：mysql

我有两个 MySQL 工作正常，我正在尝试找到一种方法将它们组合成一个查询。

首先，它选择员工的 ID。

```
SELECT 'ID' FROM `employee` ORDER BY ID DESC LIMIT 1; 
```

假设它返回 ID 100；

然后更新ID为100的员工数据

```
UPDATE 'LOG' SET `TIME_EXIT`='2013/02/22' WHERE `ID`='100'; 
```

我可以在一个查询中完成所有操作吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T02:03:05.733

只需将它们加在一起：

```
UPDATE LOG SET TIME_EXIT = '2013/02/22' 
WHERE ID = (
              SELECT ID
              FROM employee
              ORDER BY ID DESC
              LIMIT 
            ); 
```

但是根据当前的代码，它只会更新最后一个`employee`，您需要`employee`使用其他标识符来选择正确的标识符，以确保您拥有正确的标识符。

```
UPDATE LOG SET TIME_EXIT = '2013/02/22' 
WHERE ID = (
              SELECT ID 
              FROM employee 
              WHERE NAME = 'JOHN SMITH' 
              ORDER BY ID DESC 
              LIMIT 1
            ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T14:45:36.063

现在已经几个月了，但也许可以帮助您或其他人通过 google 找到它……</p>

如果要更新同一选定表中的字段，请使用：

```
UPDATE LOG SET
    TIME_EXIT = '2013/02/22' 
WHERE ID = (
        SELECT ID
        FROM (
            SELECT ID
            FROM LOG
            WHERE whatEverYouWantToCheck = whateverYouNeed
        ) AS innerResult 
    ) 
```

因此，您从子选择中选择 id。如果您尝试直接对它进行子选择，mySQL 会显示您的错误消息`You can't specify target table 'log' for update in FROM clause`，但是这样您将子查询隐藏在子查询中，这似乎很好。不要忘记`AS innerResult`避免收到错误消息`#1248 - Every derived table must have its own alias`。如果您执行类似`SELECT COUNT(*)`或`SELECT CONCAT('#', ID)`

# python - Python - 文件 I/O 代码中的列表理解

> ID：15015626
> 
> 赞同：5
> 
> 时间：2013-02-22T02:00:07.780
> 
> 标签：python, list, io

我想使用列表理解复制以下代码的功能：

```
with open('file.txt', 'w') as textfile:
    for i in range(1, 6):
        textfile.write(str(i) + '\n') 
```

我尝试了以下方法：

```
with open('file.txt', 'w') as textfile:
    textfile.write(str([i for i in range(1, 6)]) + '\n') 
```

但它（可以理解）打印`[1, 2, 3, 4, 5]`，而不是单行上的一个数字。

对于“你为什么要这样做？”，我没有答案；我只是想看看有没有可能。谢谢！

**编辑**：谢谢大家的回复；出于某种原因，我的印象是列表推导总是封装在`[]`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T02:01:48.303

一种方法是[`file.writelines()`](http://docs.python.org/3.3/library/io.html#io.IOBase.writelines)：

```
with open('file.txt', 'w') as textfile:
    textfile.writelines(str(i) + "\n" for i in range(1, 6)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T02:01:14.833

```
textfile.write('\n'.join(str(i) for i in range(1,6))) 
```

*几乎*是一样的东西。这将留下一个尾随换行符。如果你需要，你可以这样做：

```
textfile.write(''.join('{}\n'.format(i) for i in range(1,6))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T02:18:10.500

Also, if you're writing text that will be consumable by some other application, more often than not you're writing CSV, and the `csv` module makes these things easy.

(In this case you only have a single value per line, so this may not be needed.)

```
import csv

with open("file.txt", "wb") as out_f:
    writer = csv.writer(out_f)
    writer.writerows([[i] for i in range(1, 6)]) 
```

**NOTE** The `csv` module will take care of converting *int* to *str* for you.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T03:45:49.797

你也可以试试

```
with open('/tmp/foo.txt','w') as f:
    [f.write(str(i)+' ') for i in range(0,10)] 
```

以@monkut 或@mgilson 为例

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-01T01:15:43.157

请尝试以下方法：

```
open('/tmp/foo.txt','w').writelines(f'{i}\n' for i in range(10)) 
```

# c# - 需要删除对象：在函数中实现 Dispose 或创建对象？

> ID：15015631
> 
> 赞同：7
> 
> 时间：2013-02-22T02:00:45.750
> 
> 标签：c#, garbage-collection, idisposable

我有一些对象可以读取文件，将数据保存在数组中并进行一些操作。顺序是创建对象A，对对象A进行操作。创建对象B，对对象B进行操作……每个对象读取的数据可能在10MB左右。所以最好的选择是在对每个对象进行操作后删除每个对象。假设我希望我的程序分配大约 10 MB 的内存，而不是 10MB * 1000 个对象 = 1GB

对象类似于：

```
class MyClass
{  
    List<string[]> data;

    public MyClass(string datafile)
    {
        using (CsvReader csv = new CsvReader(new StreamReader(datafile), true))
        {
            data = csv.ToList<string[]>();
        }
    }

    public List<string> Operate()
    {
    ...
    }

} 
```

我的问题是：我应该实施处置吗？并执行以下操作：

```
List<string> results = new List<results>();

using (MyClass m = new MyClass("fileM.txt"))
            {
                results.AddRange(m.Operate());
            }

using (MyClass d = new MyClass("fileD.txt"))
            {
                results.AddRange(d.Operate());
            }

... 
```

我已经读过，当您使用非托管资源（套接字、流等）时，建议实施 Disposable，但在我的班级中，我只有大数据数组。

另一种方法是为每个对象创建函数（我想 GC 会自动删除在函数中创建的对象）：

```
List<string> results = new List<results>();
results.AddRange(myFunction("fileM.txt"));
results.AddRange(myFunction("fileD.txt"));

public List<string> myFunction(string file)
{
MyClass c = new MyClass(file);
return results.AddRange(c.Operate());
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T02:04:21.267

`IDisposable`等在这​​里不会帮助你，因为它不会导致任何东西被收集。在这种情况下，也许最好的方法是使用*池*来减少分配 - 本质上成为您自己的内存管理器。例如，如果您`List<string>`很大，您可以通过重新使用列表来避免很多数组 - 显然，在清除它们之后。如果您调用`.Clear()`，则不会重置支持数组 - 它只是设置一个逻辑标记以将其视为空。在您的特定情况下，您的许多对象将是个人`string`；这比较棘手，但至少它们很小，应该可以在零代收集。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T02:05:17.247

在你的情况下，我会分配一个缓冲区数组。例如，一次分配一个 10 MB 的数组，然后用您想要的数据填充它。然后，当您到达下一个对象时，只需重用该数组。如果您需要更大的数组，您可以分配一个新的更大的数组并使用它。垃圾收集器最终会移除您较小的垃圾收集器。

你也可以使用 a `List<T>`，它会在内部做同样的事情（分配一个数组，保持它直到它变得太小，分配一个新的）。就`Clear`在创建下一个对象之前。

请注意，您*不能强制*¹垃圾收集器收集对象。`IDisposable`确实仅用于清理非托管资源，因为垃圾收集器不知道它们，或者关闭（文件）句柄。调用`Dispose`不保证（或暗示）对象已从内存中删除。

但是，如果您什么都不做，您的代码仍然是正确的并且可以正常工作。垃圾收集器负责在需要时删除未使用的对象，并确保始终有足够的内存可用。要让收集器完成其工作，您唯一要做的就是放弃对旧对象的任何引用（通过覆盖它们或将它们设置为`null`，或让它们超出范围）。

¹）您可以通过调用强制垃圾收集器收集您的数据[`GC.Collect()`](http://msdn.microsoft.com/en-us/library/xe0c2357.aspx)。但是，*不*建议这样做。让垃圾收集器自己解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T02:28:20.960

如果您使用的是 .NET 4.0 或更高版本，请查看[BlockingCollection](http://msdn.microsoft.com/en-us/library/dd267312.aspx)类。[采用 Int32 参数](http://msdn.microsoft.com/en-us/library/dd267301.aspx)的构造函数允许您指定集合大小的上限。[Add](http://msdn.microsoft.com/en-us/library/dd287137.aspx)和Take方法用作节流阀[。](http://msdn.microsoft.com/en-us/library/dd287085.aspx)仅当未达到上限时，添加才会成功。如果有，它会阻塞。仅当项目存在时才会成功。如果不存在任何项目，它将阻塞，直到有一个可用。当然，该类具有这些方法的一些变体，因此请全面检查文档以查看哪些（如果有）有意义。

# javascript - 单击子元素时防止包含元素的执行事件

> ID：15015632
> 
> 赞同：0
> 
> 时间：2013-02-22T02:00:51.717
> 
> 标签：javascript, jquery, html, css

*   我所有的元素都是绝对定位的
*   item2 包含在 item1 中
*   当我点击 item2 时，默认行为是先点击 item2，然后点击 item1
*   当我单击 item2 时，我可以以某种方式阻止对 item1 执行的任何操作吗？

请点击 fiddle 中的 item2

我的小提琴：

[http://jsfiddle.net/z9Unk/59/](http://jsfiddle.net/z9Unk/59/)

HTML

```
<div class="item1">
  item1
</div>
<div class="item2">
    item2
</div>
<div class="item3">
    item3
</div> 
```

CSS：

```
item1 {
    position:absolute;
    width:150px;
    height:150px;
    background-color:red;
    top:5%;
}

.item3, .item2 {
    position:absolute;
    width:50px;
    height:50px;
    background-color:green;
    top:8%;
    left:1%;
    display:none;
}

.item3 {
    top:18%;
} 
```

JS：

```
var item1 = $(".item1");
var item2 = $(".item2");
var item3 = $(".item3");

item1.hover(
    function() {
      item2.show();
      item3.show();
    },
    function() {
      item2.hide();
      item3.hide();
    }

);

item2.hover(
    function() {
      item3.hide();
    },
    function() {
    }

);

item2.click(
    function() {
        alert("Perform some function");
    }
);

item1.click(
    function() {
        alert("Perform item1 function");
    }
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T02:12:29.573

您可以防止事件在 DOM 树中冒泡，防止任何父处理程序收到事件通知。

DOM 3 级事件：[stopPropagation](https://developer.mozilla.org/en-US/docs/DOM/event.stopPropagation)

IE6-8 你可以添加`return false`事件处理程序或`window.event.cancelBubble = true`

如果你使用jquery，可以[`event.stopPropagation`](http://api.jquery.com/event.stopPropagation/)在所有浏览器中使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T02:03:32.863

只需返回 false：

```
item2.click(
    function() {
        alert("Perform some function");
        return false;
    }
);

item1.click(
    function() {
        alert("Perform item1 function");
        return false;
    }
); 
```

阅读本文：[什么是“返回错误；” 做？](https://stackoverflow.com/q/10729198/601179)

# c++ - emacs：在另一个实例中自动打开相应的文件

> ID：15015634
> 
> 赞同：3
> 
> 时间：2013-02-22T02:01:06.433
> 
> 标签：c++, emacs

我想要类似于[Emacs C++ 的东西，打开相应的头文件](https://stackoverflow.com/questions/3509919/emacs-c-opening-corresponding-header-file)，除了我想要

1）*始终*自动打开相应的表头；和

2）在另一个 emacs 实例中执行此操作（如果有人提出了一个使所有其他 emacs 实例执行此操作的解决方案，那也可以。）

请注意，我在终端模式下使用 emacs，所以我不能做[https://superuser.com/questions/102163/how-to-split-emacs-over-a-dual-monitor](https://superuser.com/questions/102163/how-to-split-emacs-over-a-dual-monitor)（或者至少我不知道如何）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T13:06:27.343

2) 的一个简单解决方案是 `server-mode`在第二个终端中运行一个启用了的 emacs 实例，并使用`server-eval-at`.

要启动从站，请运行：

```
$ emacs --eval '(progn (setq server-name "ff-slave") (server-mode 1))' 
```

然后使用以下代码命令它：

```
(require 'server)
(require 'find-file)

(defun command-ff-slave ()
  (interactive)
  (save-excursion
    (let ((b (ff-other-file-name)))
      (if (null b)
          (message "Found no other file")
          (server-eval-at "ff-slave"
                          `(find-file ,b)))))) 
```

从主 emacs 实例调用`command-ff-slave`应该在从服务器上的新缓冲区中打开任何相关文件。

# javascript - 将随机 Javascript 更改为顺序旋转

> ID：15015637
> 
> 赞同：0
> 
> 时间：2013-02-22T02:01:20.727
> 
> 标签：javascript

所以我试图用javascript顺序旋转一些文本片段。下面的代码是随机的，我的 javascript 是 zilch。有人可以指导我如何使这种轮换顺序吗？谢谢！

网站建在 Concrete5 中。 [http://www.travelus.com.au/about-us/trial](http://www.travelus.com.au/about-us/trial)

```
<head>
<script type="text/javascript">
//messages keep each message on one line 
var messages=new Array(
'message 1',
'message 2',
'message 3',
'message 4.'
)
//timer in seconds
var timer=5;
function firstMessage(){
newMessage()
setInterval ( "newMessage()", timer*1000 );
}
function newMessage()
{
var randno=Math.floor(Math.random()*(messages.length));
var elem =document.getElementById("msg");
elem.innerHTML = messages[randno];
}
</script>
</head>
<body onload="firstMessage()">
<div id="msg">There is supposed to be some content in this box, but you need Javascript to see it...</div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T02:07:29.860

试试这个，变量 i 维护要显示的当前元素的索引。到达消息末尾后，它会重置回 0。

```
var i=0;
function newMessage()
{
  if(i===messages.length)
  {
    i=0;
  }
 var elem =document.getElementById("msg");
 elem.innerHTML = messages[i];
 i=i+1;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T02:07:49.323

现在，您的消息是`randno`随机选择的，该变量通过生成随机数随机选择您的一条消息。为了使其连续（和旋转，我假设你会喜欢它），你需要创建一个范围高于`newMessage`函数的变量——基本上在函数调用之外。

为此，您需要执行以下操作：

```
var index = 0;
function newMessage()
{
    index = (index + 1) % messages.length
    var elem =document.getElementById("msg");
    elem.innerHTML = messages[index];
} 
```

该`%`符号是一个模数，它为您提供 index 的新值除以您拥有的消息数的余数，因此您的数字永远不会高于您拥有的消息数。这称为[模运算](http://en.wikipedia.org/wiki/Modular_arithmetic)或时钟运算。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T02:05:37.147

```
elem.innerHTML = messages[0];
messages.push(messages.shift()); 
```

# visual-studio - 脚本：文件中的全局替换

> ID：15015638
> 
> 赞同：1
> 
> 时间：2013-02-22T02:01:26.590
> 
> 标签：visual-studio, scripting, replace, global

是否可以使用脚本在 Visual Studio 中实现与全局替换选项相同的效果？

我需要在大量文件中执行一些全局替换，目前我正在使用 MS Visual Studio 在文件中进行查找替换（全局替换）。是否可以使用在 Windows 机器上运行的脚本来实现这一点？与 VS 选项相比，使用建议的脚本的结果是否会有任何影响或差异？

我很早就失去了编写脚本的能力，因此可能需要对此事进行一些复习。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:41:22.887

如果您有 PowerShell，那么使用 Get-ChildItem 和我编写的名为[Replace-FileString.ps1](http://www.windowsitpro.com/article/scripting/Replacing-Strings-in-Files-Using-PowerShell-126454)的脚本非常简单。这篇博文举了一个例子：

[http://www.wintellect.com/cs/blogs/jrobbins/archive/2012/12/10/automatically-updating-sln-files-to-vs-2012.aspx](http://www.wintellect.com/cs/blogs/jrobbins/archive/2012/12/10/automatically-updating-sln-files-to-vs-2012.aspx)

这是另一个例子：

Get-ChildItem -path D:\Path -filter *.txt -recurse | Replace-FileString.ps1 -pattern '找到我' -replacement '替换我' -overwrite

上述命令将获取 D:\Path （和子目录）中的所有 *.txt 文件，并且对于每个 .txt 文件，它将字符串“find me”（不带引号）替换为“replace me”（不带引号） ）。Replace-FileString.ps1 脚本的 -overwrite 参数用包含替换字符串的文件覆盖原始文件。

账单

# c++ - 为什么我缺少模板参数？

> ID：15015641
> 
> 赞同：1
> 
> 时间：2013-02-22T02:01:32.297
> 
> 标签：c++

我创建了一个模板并给它一个默认类型：

```
template <typename T = unsigned>
class Network {
    // ...
} 
```

但是，当我尝试实例化一个`Network`对象时

```
Network nw; 
```

我收到一个错误：

```
app.cpp:60:9: error: missing template arguments before 'nw' 
```

第 60 行是`Network nw;`. `T`如果我指定该类型应默认为`unsigned`未明确提及类型时，为什么我会丢失模板参数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T02:05:40.690

它仍然是一个模板类型，所以它仍然需要尖括号：

```
Network<> nw; 
```

恼人的？是的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-22T02:05:42.840

它仍然需要：

```
Network<> nw; 
```

即使它是默认的，它仍然需要像模板一样被调用。

# rest - 有没有更好的宁静界面？

> ID：15015642
> 
> 赞同：1
> 
> 时间：2013-02-22T02:01:43.530
> 
> 标签：rest, restful-url, restful-architecture

```
GET https://api.website.com/v1/project/employee;company-id={company-id},
title={title-id}?non-smoker={true|false}&<name1>=<value1>&<name2>=<value2>&<name3>=<value3> 
```

其中：company-id 是必需的，title 是可选的 name/value 可以是任何过滤条件。

有没有更好的方法来定义接口？

此 API 不应创建员工对象。它用于获取属于特定公司并具有特定标题和其他过滤条件的员工对象数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:24:17.577

> 这个 api 应该获取满足属于特定公司的给定标准的员工对象，具有特定的职位和一些其他过滤条件。

就我个人而言，我只会将您的 URI 设计为`http://acme.com/employee/?company=X&title=Y&non-smoker=Z&T=U`. 我不会硬说公司是强制性的：您的 API 将更容易更改。

但是，您应该考虑到少数“大”请求比大量小请求要快得多。此外，可以有效地缓存 URI 表示。因此，通常最好使用基于 ID 的 URI（因为有更多机会再次询问它们）。因此，您可以获取公司的完整员工列表（以及有关公司本身的其他数据），`http://acme.com/company/X`然后在客户端对其进行过滤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T11:32:30.087

我不知道是否有更好的方法，因为它通常取决于您使用的技术及其习语。

但是，这是我喜欢的两种不同的 URI 设计（以及为什么）

```
#1 GET https://api.website.com/v1/project/employee/{company-id}?title={title-id}&non-smoker={true|false}&<name1>=<value1>&<name2>=<value2>&<name3>=<value3>

#2 GET https://api.website.com/v1/project/company/{company-id}/employee?title={title-id}&non-smoker={true|false}&<name1>=<value1>&<name2>=<value2>&<name3>=<value3> 
```

正如您在两个示例中看到的那样，我从**查询字符串**中提取了 company-id 。我更喜欢在**路径信息**中添加强制参数来区分它们。然后，在第二个 URI 中，员工资源嵌套在公司中。这样您就可以很容易地猜到您可以检索特定公司的所有员工，这在第一个示例中并不明显。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T02:05:58.433

您是否正在创建一个新的员工对象？如果是这样，那么 POST（创建）更合适。一个很好的线索是您在 URL 中推送的所有数据。所有这些都应该在 POST 对象的主体中。

# html - 尽管缺少文本，但强制垂直对齐？

> ID：15015647
> 
> 赞同：0
> 
> 时间：2013-02-22T02:02:59.390
> 
> 标签：html, css, vertical-alignment

我想将一个`display:inline-block`元素垂直居中`vertical-align:middle`。问题是它不会在绝对中心垂直对齐，直到文本到达该点。

见：http: [//jsbin.com/afojew/1/edit](http://jsbin.com/afojew/1/edit)

这可行，但有点 hacky： http: [//jsbin.com/afojew/2/edit](http://jsbin.com/afojew/2/edit) 编辑：^ 不太好用，但这确实可行：http: [//jsbin.com/afojew/3/edit](http://jsbin.com/afojew/3/edit)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T02:39:47.810

之前有人问过这个问题 - 我刚刚读过它，它包含了你需要知道的关于这个问题的所有内容：[Vertically align text in a div](https://stackoverflow.com/questions/2939914/vertically-align-text-in-a-div)

# c# - WCF Rest JSON 服务 400 错误请求

> ID：15015651
> 
> 赞同：0
> 
> 时间：2013-02-22T02:03:20.487
> 
> 标签：c#, .net, wcf, bad-request

所以我写了我的第一个 WCF 项目，似乎它使用我的浏览器和 jquery 工作，但后来我写了一个客户端，事情有点搞砸了......实际上似乎我对那个客户端所做的一切都会导致 400 错误的请求响应。 ..所以我读了一些帖子，发现一个很好的整理方法是使用提琴手，然后开始四处挑选......

由于提琴手无法识别我的客户，我使用我的客户将数据直接发送给它...... [https://docs.google.com/file/d/0ByOtHJSZT_GtNHZqTVZMdVVqZEU/edit?usp=sharing](https://docs.google.com/file/d/0ByOtHJSZT_GtNHZqTVZMdVVqZEU/edit?usp=sharing) 你可以看到截图在这里。

正如我所看到的，唯一不同的是一些标题的泄漏（这对我来说似乎并不真正有用）并且一个使用内容类型作为应用程序/jsonp另一个文本/html（我认为这是主要问题） . 不好的是我在发送请求之前设置了 content-type 标头，但是没有结果，请注意在右侧面板中您仍然可以看到 application/json。我越来越糊涂了。

```
 private void SendSelectedFile()
    {
        string url = "http://" + WindowsFormsApplication1.Properties.Settings.Default.HostAddress + "/Service1.svc/rest/PostFileToServer";
        string jsonMsg = "{\"fileContentAsBase64String\":\"" + this.textBox1.Text + "\",\"where\":\"D:\\Temp.dwg\"}";
        byte[] buffer = System.Text.Encoding.UTF8.GetBytes(jsonMsg);

        HttpWebRequest wr = WebRequest.Create(new Uri(url)) as HttpWebRequest;
        wr.Method = "POST";
        wr.ContentType = "application/json; charset=utf-8";
        wr.ContentLength = buffer.Length;
        //wr.TransferEncoding = "UTF-8";
        System.IO.Stream rs = wr.GetRequestStream();
        rs.Write(buffer , 0, buffer.Length);
        rs.Close();

        WebResponse response = wr.GetResponse();
    } 
```

这是服务的接口

```
 [WebInvoke(
        Method = "POST",
        ResponseFormat = WebMessageFormat.Json,
        RequestFormat = WebMessageFormat.Json,
        BodyStyle = WebMessageBodyStyle.Wrapped,
        UriTemplate = "/PostFileToServer"
    )]
    Boolean PostFileToServer(string fileContentAsBase64String, string where); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T09:11:11.537

我测试了您的代码，并将 400 缩小到传递给您的`where`成员的值：

```
string jsonMsg = "{\"fileContentAsBase64String\":\"" + this.textBox1.Text + "\",\"where\":\"D:\\Temp.dwg\"}"; 
```

我猜您正在尝试传递 value `D:\Tempdwg`，但反斜杠 \T 似乎被服务器解释为转义序列。尝试对该值进行 base64 编码，或对其进行双重转义`\\\\`

![WCF Trace shows that it had an error deserializing the JSON string, right around the character ](../Images/32c47140b1b2d699394fd39ea2242bf9.png)

# facebook - Facebook Like Box 仅适用于一种浏览器

> ID：15015654
> 
> 赞同：0
> 
> 时间：2013-02-22T02:03:35.097
> 
> 标签：facebook, syntax-error, facebook-likebox

我一直试图在一个适用于多个浏览器（chrome）的网站上获得一个类似框，但我似乎无法让它工作。我试过 FireFox、Safari、IE，什么都没有。我可以让默认的 Like Box 示例正常工作，但是当我使用以下代码时没有任何问题：

```
<iframe src="https://www.facebook.com/plugins/likebox.php?id=114521595255240&width=292&height=300&show_faces=false&colorscheme=light&stream=true&border_color&header=true" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:292px; height:300px;" allowTransparency="true"></iframe> 
```

我也试过：

```
<iframe src="https://www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2Forlaborersapprenticeship&amp;width=292&amp;height=427&amp;show_faces=false&amp;colorscheme=light&amp;stream=true&amp;border_color&amp;header=true" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:292px; height:427px;" allowTransparency="true"></iframe> 
```

我尝试使用 http: 和 https:。我尝试使用 & 代替`&amp;`任何帮助将不胜感激。

谢谢迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T04:30:19.773

尝试这样做

```
<div class="fb-like-box" 
data-href="https://www.facebook.com/yourfacebookpage" 
data-width="462" 
data-height="400" 
data-show-faces="false" 
data-colorscheme="dark" 
data-stream="true" 
data-border-color="#333333" 
data-header="false"> 
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T14:07:54.410

确保页面是活动的并且有内容。如果没有活动帖子，浏览器将没有任何内容可提取，因此不会显示点赞框。另外，尝试将 html 代码编码为对我有帮助`&`的完整 html 代码。`&amp;`

# javascript - 在 div 之间查找显示元素时出现刮擦错误

> ID：15015659
> 
> 赞同：0
> 
> 时间：2013-02-22T02:04:11.363
> 
> 标签：javascript, jquery, web-scraping

我正在网站上进行一些抓取，在将所有内容放入一个对象后，我试图打印其中找到的价格，但由于某种原因，我无法通过对象数组，也无法确定错误。

一切都存储在`price`其中，然后我尝试使用它来检查它`.each`，`.forEach`但我得到的只是错误：

我有一个变量`$pagina`，它是一个 jQuery 对象：

```
var $pagina = $(data); 
```

`$pagina`包含网站的整个 html。

```
var price = $pagina.find('#sub-graph-1 .price'); 
```

此时，`price`包含一个像这样的数组`[<div class=​&quot;price">​129</div>​,<div class=​&quot;price">​172​&lt;/div>​]`，我想要的是在它们之间获取这些数字，`divs`所以我尝试：

```
 price.forEach(function () {
        console.log( $(this).html() );
    }); 
```

我得到：

> TypeError: Object [object Object] 没有方法'forEach'

`.each`知道我缺少什么也会发生同样的情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T02:06:44.383

如果`$pagina`是一个 jQuery 对象，它将是`each`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T02:07:52.287

您需要使用 jQuery utils 函数

```
$.each(price, function(){
    ...
}); 
```

[**文档**](http://api.jquery.com/jQuery.each/)

# nhibernate - 此 SelectClauseVisitor 不支持表达式类型“NhSumExpression”

> ID：15015662
> 
> 赞同：3
> 
> 时间：2013-02-22T02:04:39.913
> 
> 标签：nhibernate, linq-to-nhibernate

我有一个可以在 LinqPad 中运行的查询，但不能在 NHibernate LINQ 中运行。[我在 NHibernate Jira NHibernate NH-2865](https://nhibernate.jira.com/browse/NH-2865)上发现了一个类似的错误，但我认为这可能是一个不同的错误，我正在寻找可能的替代方案。

在 LinqPad 中使用默认 LINQ to SQL 的查询如下所示：

```
from ticket in LotteryTickets
  group tiket by ticket.ticketType into g

 select new
 {
     TicketType = g.Key,
     TotalWinningTickets = g.Count(b => b.WinAmount != 0),
     TotalWon = g.Sum(b => b.WinAmount * b.ticketWeight),
     TotalTickets = g.Count(),
 } 
```

有多种其他方法可以计算 TotalWinningTickets，例如`TotalWinningTickets = g.Sum(t => t.WinAmount > 0 ? 1 : 0)`或`g.Sum(t => t.WinAmount == 0 ? 0 : 1)`

现在，使用 NHibernate LINQ，我无法在不更改基础数据库表的情况下使其正常工作。我的替代方法是添加一个名为 HasWon 的表列，并将其设置为 0 表示假，1 表示真。这确实有效，但我觉得除了修改数据库表之外还有更好的方法。也许是使用计算字段的子选择。我的 NHibernate LINQ 最终看起来像这样：

```
from ticket in session.Query<Ticket>()
group ticket by ticket.TicketType into g
select new ReportRow
{
    TicketType = g.Key,
    TotalWinningBets = g.Sum(t => t.HasWon),
    TotalTickets = g.Count(),
    TotalWon = g.Sum(t => t.WinAmount * t.WagerWeight)
}; 
```

我实际上想要做的是在我的 NHibernate 查询中选择多个 Select COUNT，但基于不同的标准。最奇怪的是，NHibernate在生成的 SQL中将所有我`Count(t => t.???)`错误地转换为。`COUNT(*)`

LinqPad 生成以这种方式工作的 SQL： SELECT SUM( (CASE WHEN [t1].[WinAmount] > @p3 THEN @p4 ELSE @p5 END)) AS [value]

希望有更好的方法。

# signals - 信号量：你能在等待之前发出信号吗？

> ID：15015665
> 
> 赞同：4
> 
> 时间：2013-02-22T02:05:06.003
> 
> 标签：signals, semaphore, wait

我正在为一个类进行概念性伪代码信号量分配。

我想知道是否可以在某个进程调用 wait() 之前在信号量上调用 signal()。例如：

```
Shared data:
Semaphore x = 0;

Process 1:
    wait(x);
    print("I'm Process 1, and Process 2 has already printed!");
    terminate();

Process 2:
    print("I'm Process 2!");
    signal(x);
    terminate(); 
```

上面的假设是不能保证哪个进程首先运行，但我们希望打印语句以正确的顺序执行（进程 2 在进程 1 之前）。如果进程 1 启动，它将等待 x。然后进程 2 将进行打印，向 x 发出信号，并允许进程 1 进行打印。

但是，如果进程 2 启动，它将在进程 1 等待它之前发出 x 信号。期望的结果是 x 现在将被“预先通知”进程 1，以便它会直接跳过 wait(x) 语句。这真的会发生吗？还是会出现某种错误，因为您无法发出没有人在等待的信号量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T07:31:40.690

信号量的 wait() 和 signal() 定义如下

```
**wait**(Semaphore S)
{
   while S<=0
     ; //no operation
   S--;
}
**signal**(S)
{
   S++;
} 
```

在您的代码中，信号量初始化为零（Semaphore x = 0），如果您尝试等待它，该进程将被阻塞，正如您从等待的定义中看到的那样。这意味着第一个进程永远不会继续调用 signal() 从第二个过程。

如果第二个进程首先执行（signal()），则信号量的值会增加 1，因此任何等待此的进程都可以继续等待。（即，进程 2 得到 wait()，它会立即继续）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T02:13:16.167

据此，您不必获取它[。](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Semaphore.html#release%28%29)我认为正确地构建代码是程序员的工作。在这种情况下，由于您不等待第二个进程中的信号量，它可能会出现故障。

# java - 使用反射访问不可见的类

> ID：15015675
> 
> 赞同：61
> 
> 时间：2013-02-22T02:05:46.177
> 
> 标签：java, class, reflection, package-private

我正在尝试使用反射获取不可见类的实例，即 AKA 包私有类。我想知道是否有办法切换修饰符以使其公开，然后使用`Class.forName`. 当我现在尝试这样做时，它会阻止我说我做不到。不幸的是，没有该类`setAccesible`的方法`Class`。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-02-22T02:28:21.787

**嵌套类**- 在其他类中定义的类（包括静态和非静态类）
**内部类**- 非静态嵌套类（内部类的实例需要外部类的实例存在）

##非嵌套（顶级）类

根据您的问题，我们知道您要访问的构造函数不是公开的。所以你的班级可能看起来像这样（`A`班级在一些与我们不同的包中）

```
package package1;

public class A {
    A(){
        System.out.println("this is non-public constructor");
    }
} 
```

要创建此类的实例，我们需要访问要调用的构造函数，并使其可访问。完成后，我们可以使用`Constructor#newInstance(arguments)`创建实例。

```
Class<?> c = Class.forName("package1.A");
//full package name --------^^^^^^^^^^
//or simpler without Class.forName:
//Class<package1.A> c = package1.A.class;

//In our case we need to use
Constructor<?> constructor = c.getDeclaredConstructor();
//note: getConstructor() can return only public constructors
//so we needed to search for any Declared constructor

//now we need to make this constructor accessible
constructor.setAccessible(true);//ABRACADABRA!

Object o = constructor.newInstance(); 
```

* * *

##嵌套和内部类

如果要访问嵌套（静态和非静态）类，`Class.forName`则需要使用语法：

```
Class<?> clazz = Class.forName("package1.Outer$Nested"); 
```

`Outer$Nested`说`Nested`类是在类中声明的`Outer`。嵌套类与方法非常相似，它们可以访问其外部类的所有成员（包括私有成员）。

但是我们需要记住，内部类的实例存在需要其外部类的实例。通常我们通过以下方式创建它们：

```
Outer outer = new Outer();
Outer.Inner inner = outer.new Inner(); 
```

因此，当您看到内部类的每个实例都有关于其外部类的一些信息时（对该外部实例的引用存储在`this$0`字段中，更多信息：[在调试 Java 时，如果一个变量在 IntelliJ IDEA 中具有名称“this$0”，这意味着什么？ ?](https://stackoverflow.com/questions/28462849/what-does-it-mean-if-a-variable-has-the-name-this0-in-intellij-idea-while-deb/28462949#28462949) )

因此，在创建`Inner`类实例时，`Constructor#newInstance()`您需要将第一个参数引用作为`Outer`类实例传递（以模拟`outer.new Inner()`行为）。

这是一个例子。

在包1

```
package package1;

public class Outer {
    class Inner{
        Inner(){
            System.out.println("non-public constructor of inner class");
        }
    }
} 
```

在包 2

```
package package2;

import package1.Outer;
import java.lang.reflect.Constructor;

public class Test {
    public static void main(String[] args) throws Exception {

        Outer outerObject = new Outer();

        Class<?> innerClazz = Class.forName("package1.Outer$Inner");

        // constructor of inner class as first argument need instance of
        // Outer class, so we need to select such constructor
        Constructor<?> constructor = innerClazz.getDeclaredConstructor(Outer.class);

        //we need to make constructor accessible 
        constructor.setAccessible(true);

        //and pass instance of Outer class as first argument
        Object o = constructor.newInstance(outerObject);

        System.out.println("we created object of class: "+o.getClass().getName());

    }
} 
```

##静态嵌套类

静态嵌套类的实例不需要 Outer 类的实例（因为它们是静态的）。所以在他们的情况下，我们不需要寻找构造函数`Outer.class`作为第一个参数。而且我们不需要将外部类的实例作为第一个参数传递。换句话说，代码将与非嵌套（顶级）类的代码相同（也许除了在引用嵌套类时需要添加 use`$`而不是`.`在类名中的事实`Class.forName()`like `Class.forName("some.package.Outer$Nested1$NestedNested")`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T02:15:03.037

`Class.forName`应该管用。如果该类位于`"package.access"`安全属性中的包层次结构列表中，那么您将需要使用适当的权限（通常是所有权限；或者没有安全管理器）执行操作。

如果您尝试使用`Class.newInstance`，请不要。`Class.newInstance`处理异常很差。而是得到一个`Constructor`并调用`newInstance`它。如果没有异常跟踪，很难看出您遇到了什么问题。

与以往一样，大多数但不是所有反射的使用都是坏主意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-26T05:03:33.370

我们最近发布了一个库，它对通过反射访问私有字段、方法和内部类有很大帮助：[BoundBox](https://github.com/stephanenicolas/boundbox)

对于像这样的课程

```
public class Outer {
    private static class Inner {
        private int foo() {return 2;}
    }
} 
```

它提供了如下语法：

```
Outer outer = new Outer();
Object inner = BoundBoxOfOuter.boundBox_new_Inner();
new BoundBoxOfOuter.BoundBoxOfInner(inner).foo(); 
```

要创建 BoundBox 类，您唯一要做的就是编写`@BoundBox(boundClass=Outer.class)`，`BoundBoxOfOuter`该类将立即生成。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-12-09T04:16:51.177

您可以使用[Manifold 的](https://github.com/manifold-systems/manifold) **@Jailbreak**进行直接的、类型安全的 Java 反射：

```
Foo foo = new @Jailbreak Foo();

public class Foo {
    Foo() {...}

    private void yodog() {...}
} 
```

这里`@Jailbreak`使编译器能够像 public 一样安全地解析构造函数，而 Manifold 在后台为您生成高效的反射代码。

此外，您可以`@Jailbreak`用来访问和构造不可见的类：

```
com.abc. @Jailbreak Bar bar = new com.abc. @Jailbreak Bar();

package com.abc;
// package-private class
class Bar {
    Bar() {...}
} 
```

对于隐藏类访问，Java 的注解语法要求将类与其包分开注解。

更一般地，您可以`@Jailbreak`用于任何类型的反射：

```
@Jailbreak Foo foo = new Foo();
foo.yodog(); 
```

`@Jailbreak`解锁编译器中的 foo 局部变量，以便直接访问`Foo`'s 层次结构中的所有成员。

同样，您可以将**jailbreak()**扩展方法用于一次性使用：

```
foo.jailbreak().yodog(); 
```

通过该`jailbreak()`方法，您可以访问`Foo`层次结构中的任何成员。

了解有关[歧管](http://manifold.systems/)的更多信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-26T07:53:02.583

如果最新版本中的值为空，我需要从旧版本的对象中复制字段的值。我们有这两个选项。

核心Java：

```
for (Field f : object.getClass().getSuperclass().getDeclaredFields()) {
    f.setAccessible(true);
  System.out.println(f.getName());
  if (f.get(object) == null){
    f.set(object, f.get(oldObject));
  }
} 
```

使用 Spring [org.springframework.beans.BeanWrapper]：

```
BeanWrapper bw = new BeanWrapperImpl(object);
PropertyDescriptor[] data = bw.getPropertyDescriptors();
for (PropertyDescriptor propertyDescriptor : data) {
  System.out.println(propertyDescriptor.getName());
  Object propertyValue = bw.getPropertyValue(propertyDescriptor.getName());
  if(propertyValue == null )
    bw.setPropertyValue( new PropertyValue(propertyDescriptor.getName(),"newValue"));
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-09T09:57:13.167

不得不在Android上做类似的事情是我想出的：

```
/**
 * To fix issues with wrong edge-to-edge bottom sheet top padding and status bar icon color…
 * …we need to call [BottomSheetDialog.EdgeToEdgeCallback.setPaddingForPosition] which is a private function from a private class.
 * See: https://github.com/material-components/material-components-android/issues/2165
 */
fun adjustBottomSheet(aDialog : BottomSheetDialog) {
    // Get our private class
    val classEdgeToEdgeCallback = Class.forName("com.google.android.material.bottomsheet.BottomSheetDialog\$EdgeToEdgeCallback")
    // Get our private method
    val methodSetPaddingForPosition: Method = classEdgeToEdgeCallback.getDeclaredMethod("setPaddingForPosition", View::class.java)
    methodSetPaddingForPosition.isAccessible = true
    // Get private field containing our EdgeToEdgeCallback instance
    val fieldEdgeToEdgeCallback = BottomSheetDialog::class.java.getDeclaredField("edgeToEdgeCallback")
    fieldEdgeToEdgeCallback.isAccessible = true
    // Get our bottom sheet view field
    val fieldBottomField = BottomSheetDialog::class.java.getDeclaredField("bottomSheet")
    fieldBottomField.isAccessible = true
    // Eventually call setPaddingForPosition from EdgeToEdgeCallback instance passing bottom sheet view as parameter
    methodSetPaddingForPosition.invoke(fieldEdgeToEdgeCallback.get(aDialog),fieldBottomField.get(aDialog))
} 
```

此外，您可能希望确保 proguard 不会丢弃您尝试访问的方法：

```
# Needed for now to fix our bottom sheet issue from 
com.google.android.material:material:1.4.0-alpha02
-keep class com.google.android.material.bottomsheet.BottomSheetDialog$EdgeToEdgeCallback {
    private void setPaddingForPosition(android.view.View);
} 
```

# java - Slick2D 的热插拔渲染方法

> ID：15015676
> 
> 赞同：0
> 
> 时间：2013-02-22T02:05:49.820
> 
> 标签：java, slick2d, hotswap

我正在尝试使用 Slick2D 框架在 Eclipse 中进行代码热交换。问题是我不能在里面做`BasicGame#render(GameContainer gc, Graphics g)`，虽然我可以在里面做`BasicGame#update(GameContainer gc)`。问题可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T05:11:03.320

热交换代码并不总是有效。从 Eclipse 文档中：

> 请注意，某些更改（例如新的或删除的方法、类变量或内部类）不能热交换，具体取决于特定 VM 提供的支持。

# sql - 写入平面文件时，如何更改存储为字符串值的日期格式？

> ID：15015684
> 
> 赞同：0
> 
> 时间：2013-02-22T02:06:19.410
> 
> 标签：sql, date, ssis, etl

我有一个包含以下流程的 SSIS 包。该包有两个数据流任务。

### 数据流任务 1：

在第一个数据流任务中，涉及不同数据库中多个表的存储过程的输出被写入数据库中的两个表。

### 数据流任务 2：

在第二个数据流任务中，将上述表之一的输出写入平面文件。

包中涉及的所有表都有一个**`BirthDate`**数据类型的列名**`VARCHAR(10)`**。此列包含格式为 YYYYMMDD 的字符串形式的日期值。

写入平面文件的数据以*`YYYY-MM-DD`*. 但是，我希望将日期值以格式写入平面文件*`MM-DD-YYYY`*

### 问题：

1.  如何*`MM-DD-YYYY`*在平面文件中实现日期格式？

2.  我是否需要将列数据类型从 VARCHAR(10) 更改为表中的其他数据类型？我在各种数据库中有很多表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:36:02.000

.NET Framework 有一些非常好的字符串操作功能，脚本转换可以轻松解决这个问题。将脚本转换组件添加到您的数据流；在脚本转换编辑器的输入列部分中，确保包含`BirthDate`在可用输入列网格中并将其 UsageType 设置为`ReadWrite`. 然后，这段 C# 代码会将您的 YYYYMMDD 字符串转换为 MM-DD-YYYY：

```
public override void Input0_ProcessInputRow(Input0Buffer Row)
{
    DateTime birthDate = DateTime.ParseExact(
        Row.BirthDate, 
        "yyyyMMdd",
        System.Globalization.CultureInfo.InvariantCulture);
    Row.BirthDate = birthDate.ToString("MM-dd-yyyy");
} 
```

关于您的第二个问题：理想情况下，如果您将日期存储在数据库中，**则应该**使用适当的数据类型。您可能想在您的组织中询问为什么所有这些 BirthDate 列都被定义为`VARCHAR`- 当时可能有一个很好的理由。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T03:35:32.873

对于类似的情况，我使用数据转换工具，无需更改源表数据类型。它有助于维护源表和目标表的完整性。

![在此处输入图像描述](../Images/27e9ca1bc0431e2aca2db049f5863256.png)

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T02:39:52.863

如果它总是`YYYYMMDD`- 也就是说，像*20130221*这样的零填充，我只会使用简单的字符串函数：

```
SUBSTRING([Birthdate],5,2) + '-' 
+ SUBSTRING([Birthdate],7,2) + '-' 
+ SUBSTRING([Birthdate],1,4) 
```

我同意使用实际`datetime`或`date`数据类型会更好。但如果你不能或不会，那么像这样的简单表达对我来说似乎是最简单的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T02:40:03.157

Here's one solution. Optimally, you should alter the column to the correct data type:

```
SELECT CONVERT(VARCHAR, CONVERT(DATETIME, wrongtypecol, 120), 110) AS date 
FROM   tbl 
```

[See the demo](http://sqlfiddle.com/#!3/5a6f6/1)

# perl - 如何在 Perl 中使用特定的外部子程序

> ID：15015688
> 
> 赞同：-1
> 
> 时间：2013-02-22T02:06:44.143
> 
> 标签：perl, subroutine

我有一个包含几个子例程的 pm 文件。以下是脚本“myscript.pm”的示例：

```
sub a();
sub b();
sub c();

a();      #this can not be deleted in my situation in this pm file. 

sub a() {
 print 'a';
}

sub b() {
 print 'b';
}

sub c() {
 print 'c';
}

sub d() {
 print 'd';
} 
```

在另一个脚本“running.pl”中，我想从 myscript.pm 调用 c 子例程。以下是脚本：

```
use myscript qw(b);
b(); 
```

我得到的结果将是 `ab`. 然而，这不是我的本意。我期待`b`结果。我想知道如何在不运行的情况下从 myscript.pm 调用 b 子例程`a();`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T02:33:41.797

Loading a module is simply executing it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T11:57:50.637

a() 将始终在加载模块时运行，因为您在模块中显式调用它。

你为什么以这种方式运行 a() ？您不应该将 Myscript 用作脚本和库。

相反，将调用 a() 的代码移动到单独的文件中并运行它而不是 Myscript。将其重命名为 MyLibrary，并将新文件命名为 Myscript。现在在调用 b() 的文件中，导入 Mylibrary 而不是 Myscript。

# ruby-on-rails - Rails get record count from array

> ID：15015690
> 
> 赞同：0
> 
> 时间：2013-02-22T02:07:08.073
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

I use the following query to return a list of records

```
Rating.find(:all, :conditions => ["rating_set = ? and product_id = ?", 1, 2186417]) 
```

which returns:

`[#<Rating id: 5, label: "Good", rating: 3.0, created_at: "2013-02-20 08:11:36", updated_at: "2013-02-20 08:11:36", recommendation_id: 2186417, notes: "exact match", rating_set: 1, product_id: 2186417>, #<Rating id: 6, label: "Good", rating: 3.0, created_at: "2013-02-20 08:11:36", updated_at: "2013-02-20 08:11:36", recommendation_id: 2054442, notes: "", rating_set: 1, product_id: 2186417>, #<Rating id: 7, label: "Fair", rating: 2.0, created_at: "2013-02-20 08:11:36", updated_at: "2013-02-20 08:11:36", recommendation_id: 2403501, notes: "", rating_set: 1, product_id: 2186417>, #<Rating id: 8, label: "Bad", rating: 3.0, created_at: "2013-02-20 08:11:36", updated_at: "2013-02-20 08:11:36", recommendation_id: 2344645, notes: "", rating_set: 1, product_id: 2186417>]`

How can I get a count for each rating label. For example, how many records out of the total are "Good" or how many are "Bad" etc.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T02:14:41.440

You can do that in at least 2 ways.

**SQL**

```
klass = Rating.where(rating_set: 1, product_id: 2186417])
good_count = klass.where(label: 'Good').count
bad_count = klass.where(label: 'Bad').count 
```

**Array**

```
ratings = Rating.where(rating_set: 1, product_id: 2186417]).all
good_count = ratings.count { |r| r.label == 'Good' }
bad_count = ratings.count { |r| r.label == 'Bad' } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T05:58:16.310

You could try a group by:

```
Rating.where(:rating_set => 1, :product_id => 2186417).group(:label).count.each{ |k,v| puts "#{k} #{v}" } 
```

Resource: [http://guides.rubyonrails.org/active_record_querying.html#group](http://guides.rubyonrails.org/active_record_querying.html#group)

# javascript - 如何制作双向 Web 应用程序？

> ID：15015692
> 
> 赞同：-1
> 
> 时间：2013-02-22T02:07:27.647
> 
> 标签：javascript, jquery, web, bidirectional

例如：如果我创建一个聊天室，我如何收听`message`来自服务器的消息？我不想以设定的时间间隔查询服务器。我可以使用任何库来执行此操作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T02:10:31.273

查找[socket.io](http://socket.io/)。它完全符合您的需求，并且完全使用 JavaScript。对于其他语言，还有其他框架；但是你不能用 Apache 来做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T02:48:48.793

我最近使用建立在 socket.io 之上的[juggernaut构建了一个应用程序。](https://github.com/maccman/juggernaut)虽然主宰作者现在推荐使用不同的方法[EventSource](http://blog.alexmaccaw.com/killing-a-library)，但它仍然是一个优秀、可靠的库。

对于一个新应用程序，您可能最好直接使用 EventSource 而不是 juggernaut，但实际上您可能希望通读那里的源代码以了解人们如何解决此问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T02:25:01.020

xmpp? 我读过这是大多数聊天网站中使用的技术，有用于 php 和 javascript 的可用库

# linux - Linux root shell "#" 和 "sh-4.2 #" 的区别

> ID：15015696
> 
> 赞同：1
> 
> 时间：2013-02-22T02:07:45.680
> 
> 标签：linux, bash, shell

在 linux 中运行 root shell 和“sh-4.2#”有什么区别？我实际上是在尝试缓冲区溢出攻击来启动 root shell。当我使用“bin/zsh”并执行攻击时，我可以使用“#”提示符获取根目录。但是当使用 /bin/bash 时，我会得到一个带有“sh-4.2#”提示的 shell。只是想知道区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T02:19:20.833

您似乎对一些基本概念感到困惑，但我猜想不同之处在于`sh-4.2#`提示符是以 root 身份登录的 Bourne shell (/bin/sh)，而“正常”的 root shell 可能是 Bourne再次外壳（/bin/bash）。Bash 的语法是 sh 的超集，但如果你不做太多的 shell 脚本，它们几乎可以互换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T02:10:40.987

您的`$PS1`变量已更改。尝试`echo $PS1`查看您正在使用的提示。除此之外，应该没有什么不同。

# haskell - 在 Haskell 中为类型别名导出 Eq 和 Show

> ID：15015698
> 
> 赞同：2
> 
> 时间：2013-02-22T02:07:48.340
> 
> 标签：haskell, functional-programming, typeclass

我有以下类型别名

```
data    Bindable  = Const Value 
                      | Variable Location
                    | Func Function
                    | Proc
              deriving (Eq, Show)                                   

type Function = Argument -> Store -> Value 
```

但是编译器给了我一个错误

```
No instance for (Show Function)
arising from the 'deriving' clause of a data type declaration
Possible fix:
add an instance declaration for (Show Function)
or use a standalone 'deriving instance' declaration,
   so you can specify the instance context yourself
When deriving the instance for (Show Bindable) 
```

我可以为函数定义 Show & Eq 吗？如果没有，那么解决方案是什么？我应该将 Eq 和 Show 定义为 Argument、Store 和 Value 吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T02:19:10.263

Type class instances may only be defined for "real" types, as defined by a `data` or `newtype` declaration. A `type` declaration is a "fake" type—just an abbreviation for a longer type.

But that's just problem #1 in this case. Problem #2 is that even if you do this...

```
newtype Function = Function (Argument -> Store -> Value) 
```

...there might still be no truly useful `Show` instance for `Function`. How do turn a function into a string? There are two strategies. First, the "just give up" strategy:

```
instance Show Function where
    show _ = "<some Function, no clue what it does>" 
```

Second, the "canonical example" strategy, where you apply the `Function` to some canonical `Argument` and `Store` and show these together with the `Value` result:

```
instance Show Function where
    show (Function fn) = "Function: " 
                      ++ show defaultArgument 
                      ++ " -> " 
                      ++ show defaultStore
                      ++ " -> " 
                      ++ show (fn defaultArgument defaultStore) 
```

The idea here is to display the `Function` as one particular argument/value mapping of it that might help you identify it more precisely than just using the same constant string for all of them. Whether this helps or not depends on what your functions do.

But now we have problem #3: neither of these obeys the intent/contract of the `Show` and `Read` classes, which is that `read (show x)` is equivalent to `x`. (People do often ignore this intent, however, just because they want to print *something* and `Show` is the quickest ticket. So much that, as Thomas DuBuisson points out, there's a standard module `Text.Show.Functions` that implements the "just give up" strategy.)

As for the `Eq` class, the answer is that it's just impossible in general to compare two functions for equality. (If I recall correctly, it's equivalent to solving the Halting Problem, but don't quote me on that.) If your solution requires you to compare functions for equality, you need a new solution...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-22T02:12:48.000

只需导入`Text.Show.Functions`. 你`type`只是一个别名，错误消息说它找不到 Show for`(->)`的实例，但该模块中有一个实例可用。

```
Prelude> import Text.Show.Functions
Prelude Text.Show.Functions> show (+1)
"<function>" 
```

# android - 自定义进度不确定水平，没有拐角半径

> ID：15015703
> 
> 赞同：1
> 
> 时间：2013-02-22T02:08:21.533
> 
> 标签：android, progress-bar

我有一个自定义进度不确定水平的 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<animation-list
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:oneshot="false">
    <item android:drawable="@drawable/p1" android:duration="200" />
    <item android:drawable="@drawable/p2" android:duration="200" />
    <item android:drawable="@drawable/p3" android:duration="200" />
</animation-list> 
```

与 p1 p2 p3 是可绘制的 3 个图像......但结果如下所示

[http://nu1.upanh.com/b1.s35.d3/00e5e91ffd3e130e92a25b450a125399_53446391.screenshot20130222085912.png](http://nu1.upanh.com/b1.s35.d3/00e5e91ffd3e130e92a25b450a125399_53446391.screenshot20130222085912.png)

我想要不确定的没有角半径，如下图所示

[http://nu0.upanh.com/b3.s34.d4/783c89efa40fa4b95a64b3ca0e9e38a5_53446390.screenshot20130222085920.png](http://nu0.upanh.com/b3.s34.d4/783c89efa40fa4b95a64b3ca0e9e38a5_53446390.screenshot20130222085920.png)

请帮我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-27T16:28:22.510

你可能想看看这个： http: [//mikinw.blogspot.co.uk/2015/05/indeterminate-progressbar-with-rounded.html](http://mikinw.blogspot.co.uk/2015/05/indeterminate-progressbar-with-rounded.html)

你可以设置任何你想要的形状。

# android - 在 attrs.xml 和 theme.xml 中的 attr 中获取布局集

> ID：15015704
> 
> 赞同：0
> 
> 时间：2013-02-22T02:08:40.873
> 
> 标签：android, android-resources

这是我的属性：

```
<attr name="taskTimePickerLayout" format="reference" /> 
```

以下是在themes.xml 中的设置方式：

```
<item name="taskTimePickerLayout" type="reference">@layout/task_time_picker_holo</item> 
```

我想使用 attr 中的布局来膨胀布局，我该怎么做？我尝试将`R.attr.taskTimePickerLayout`其用作充气机的资源，但这会引发 ResourceNotFoundException。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T02:28:46.607

将这段代码放入您的活动（或片段）中：

```
TypedValue typedValue = new TypedValue();
getTheme().resolveAttribute(R.attr.taskTimePickerLayout, typedValue, true);
setContentView(typedValue.resourceId); 
```

确保在执行此代码之前将主题应用于 Activity。

这段代码的基本作用是根据应用于当前上下文的主题解析参考 R.attr.taskTimePickerLayout。typedValue.resourceId 是解析引用的值（在本例中为 @layout/task_time_picker_holo 的布局 id）。这也适用于所有其他参考（可绘制、颜色等）

# .htaccess - mod_rewrite 和 .htaccess 可能没有运行……或者我是个白痴

> ID：15015706
> 
> 赞同：1
> 
> 时间：2013-02-22T02:09:13.920
> 
> 标签：.htaccess, mod-rewrite

我已经看到了人们遇到的大约 100 个不同的 mod_rewrite 和 .htaccess 问题，但到目前为止，我还没有解决我的问题。

我设置了一台运行 10.8.2 的新计算机 macbook pro。这不使用 MAMPP 或类似的东西，只是 Apache 的本机安装。一切似乎都很好，并且似乎与我的另一台机器相同，但据我所知，没有发生 url 重写。

我已经检查了重写模块是否已加载...确实如此，我已将 Allow all and all that stuff 添加到我的各种 .conf 文件中，但没有任何效果。我只是对下一步要尝试什么失去了看法。

我不知道这是否重要，但我已经启用了 VirtualHosts，如果您将 /index.php/ 放在 URL 中，我正在处理的网站确实会加载。

我会发布任何人需要看到的任何代码，只要让我知道你需要什么。

这是 .htaccess 文件（在另一台机器上工作）

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt) 
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

我的虚拟主机

```
NameVirtualHost *:80

ServerRoot "/Users/admin/Sites/dir"

<VirtualHost *:80>
   DocumentRoot mysite/awareness-thing
   ServerName awareness.test.dev
</VirtualHost> 
```

编辑：这是我的 httpd.conf 文件的要点：[https ://gist.github.com/JoeCianflone/f580f7dd75d7e10f05a0](https://gist.github.com/JoeCianflone/f580f7dd75d7e10f05a0)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:54:15.250

似乎有两个问题：

我将 .htaccess 文件更改为：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-s
RewriteCond %{REQUEST_FILENAME} !-l 
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/index\.php$
RewriteRule ^.*$ index.php [NC,L] 
```

我将我的 vhost.conf 更改为：

名称虚拟主机 *:80

```
ServerRoot "/Users/admin/Sites/site"

<Directory "/Users/admin/Sites/site"> 
    Options Indexes FollowSymLinks MultiViews 
    AllowOverride All 
    Order allow,deny 
    Allow from all 
</Directory>

<VirtualHost *:80>
    DocumentRoot 2403_awareness-campaign
    ServerName test.awareness-campaign.dev
</VirtualHost> 
```

只是一个问题的组合，使这对我来说是一个重要的 WTF 时刻。

# svm - 我如何知道支持向量机中 predict() 函数预测的类概率？

> ID：15015710
> 
> 赞同：30
> 
> 时间：2013-02-22T02:10:14.387
> 
> 标签：svm, scikit-learn

我如何知道样本属于支持向量机中 Scikit-Learn 的 predict() 函数预测的类的概率？

```
>>>print clf.predict([fv])
[5] 
```

有什么功能吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-12-26T03:44:53.353

一定要阅读[文档的这一部分，](http://scikit-learn.org/stable/modules/svm.html#scores-and-probabilities)因为其中涉及一些微妙之处。另见[Scikit-learn predict_proba 给出错误答案](https://stackoverflow.com/questions/17017882/scikit-learn-predict-proba-gives-wrong-answers)

基本上，如果您有一个包含大量数据的多类问题，predict_proba 就像之前建议的那样效果很好。否则，您可能不得不使用不会从决策函数中产生概率分数的排序。

这是使用 predict_proba 获取字典或类别与概率列表的一个很好的主题：

```
model = svm.SVC(probability=True)
model.fit(X, Y)
results = model.predict_proba(test_data)[0]

# gets a dictionary of {'class_name': probability}
prob_per_class_dictionary = dict(zip(model.classes_, results))

# gets a list of ['most_probable_class', 'second_most_probable_class', ..., 'least_class']
results_ordered_by_probability = map(lambda x: x[0], sorted(zip(model.classes_, results), key=lambda x: x[1], reverse=True)) 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-02-22T07:30:05.817

使用 clf.predict_proba([fv]) 获取每个类别的预测概率列表。但是，此功能并非适用于所有分类器。

关于您的评论，请考虑以下几点：

```
>> prob = [ 0.01357713, 0.00662571, 0.00782155, 0.3841413, 0.07487401, 0.09861277, 0.00644468, 0.40790285]
>> sum(prob)
1.0 
```

概率总和为 1.0，因此乘以 100 得到百分比。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-02-22T08:26:45.880

在创建 SVC 类以通过设置计算概率估计时`probability=True`：

[http://scikit-learn.org/stable/modules/generated/sklearn.svm.SVC.html](http://scikit-learn.org/stable/modules/generated/sklearn.svm.SVC.html)

然后`fit`像往常一样打电话，然后`predict_proba([fv])`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-29T03:44:53.970

为了更清楚的答案，我再次发布来自 scikit-learn for svm 的信息。

> 不用说，Platt 缩放中涉及的交叉验证对于大型数据集来说是一项昂贵的操作。此外，概率估计可能与分数不一致，因为分数的“argmax”可能不是概率的argmax。（例如，在二元分类中，根据 predict_proba，可以通过 predict 将样本标记为属于概率 < 1/2 的类别。） Platt 的方法也存在理论问题。如果需要置信度分数，但不一定是概率，则建议设置probability=False 并使用decision_function 而不是predict_proba。

对于随机森林、AdaBoost、Gradient Boosting 等其他分类器，在 scikit-learn 中使用 predict 函数应该没问题。

# javascript - 检查数组是否包含与新数组具有相同值的数组

> ID：15015712
> 
> 赞同：0
> 
> 时间：2013-02-22T02:10:29.573
> 
> 标签：javascript

有什么方法可以检查数组是否包含具有特定值的数组？

就像，我有这个数组

```
 drawn[0] = [0,0] 
```

后来我想检查是否仍然包含`[0,0]`，所以我会做类似的事情

```
 drawn[0] == [0,0] 
```

但这只是返回一个`false`，为什么？而且，更重要的是，我应该怎么做呢？即使我尝试`[0,0] == [0,0]`我也会得到`false`回报？

请注意，数组并不总是零......

附言。我不想使用任何外部库，所以请保持纯 ol' javascript

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T02:15:41.690

每个人都说你不能比较数组，因为它们是对象。那是真实的。您有几个可行的解决方案，包括嵌套循环（公然或抽象）。其他人也提出了这个建议。

一个可能更简单的替代方法是比较`toString`两个数组的值：

```
drawn[0].toString() == [0,0].toString() 
```

这确实要求数组内容的顺序相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T02:13:18.190

JavaScript 中的数组只有在它们是同一个对象时才彼此相等。

您需要进行内容检查：

```
if (drawn[0].every(function(item) { return item === 0; })) {
    // all entries are zero.
} 
```

也可以看看：[`Array.every()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/every)

或者在您的特定情况下，只需：

```
if (drawn[0][0] === 0 && drawn[0][1] === 0) {
    // equal to [0, 0]
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T02:14:12.720

使用 for 循环检查，您无法与简单的比较进行比较，因为它比较的是引用而不是值：

```
[0]    !== [0]    // true
[0][0] ==  [0][0] //true 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T02:13:51.833

对象（包括数组）通过对象标识进行比较。每次编写`[0, 0]`时都会创建一个新数组；所以他们注册为不同的对象。您需要自己遍历元素并检查元素是否相同。

# python - Amazon ec2 中 pika-rabbitmq 的良好心跳间隔

> ID：15015714
> 
> 赞同：2
> 
> 时间：2013-02-22T02:10:39.180
> 
> 标签：python, rabbitmq, heartbeat, pika

我正在为 rabbitmq 使用最新的 pika 库（0.9.9+）。我对 rabbitmq 和 pika 的用法如下：

1.  作为工人，我有长时间运行的任务（大约 5 分钟）。这些任务从rabbitmq 获取它们的请求。请求很少出现，即请求之间有很长的空闲时间。
2.  我之前面临的问题与空闲连接（由于空闲连接导致的连接关闭）有关。所以，我在 pika 中启用了心跳。
3.  现在心跳的选择是个问题。Pika 似乎是一个单线程库，其中心跳接收和确认恰好在请求时间范围之间完成。
4.  因此，如果设置的心跳间隔小于回调函数用于执行其长时间运行计算的时间，则服务器不会收到任何心跳确认并关闭连接。
5.  所以，我假设最小心跳间隔应该是阻塞连接中回调函数的最大计算时间。

对于亚马逊 ec2 来说，什么是好的心跳值可以防止它关闭空闲连接？

此外，有些人建议使用 rabbitmq keepalive（或 libkeepalive）来维护 tcp 连接。我认为在 tcp 层管理心跳要好得多，因为应用程序不需要管理它们。这是真的吗？与 RMQ 心跳相比，keepalive 是一个好方法吗？

我看到有些人建议使用多个线程和队列来处理长时间运行的任务。但这是长时间运行任务的唯一选择吗？在这种情况下必须使用另一个队列是非常令人失望的。

先感谢您。我想我已经详细说明了这个问题。让我知道我是否可以提供更多详细信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-13T16:39:49.550

如果您不喜欢使用 pika，这个[线程](https://lists.launchpad.net/openstack/msg15111.html)帮助我实现了您使用 kombu 尝试做的事情：

```
#!/usr/bin/env python
import time, logging, weakref, eventlet
from kombu import Connection, Exchange, Queue
from kombu.utils.debug import setup_logging
from kombu.common import eventloop
from eventlet import spawn_after

eventlet.monkey_patch()

log_format = ('%(levelname) -10s %(asctime)s %(name) -30s %(funcName) '
              '-35s %(lineno) -5d: %(message)s')
logging.basicConfig(level=logging.INFO, format=log_format)
logger = logging.getLogger('job_worker')
logger.setLevel(logging.INFO)

def long_running_function(body):
    time.sleep(300)

def job_worker(body, message):
    long_running_function(body)
    message.ack()

def monitor_heartbeats(connection, rate=2):
    """Function to send heartbeat checks to RabbitMQ. This keeps the
       connection alive over long-running processes."""
    if not connection.heartbeat:
        logger.info("No heartbeat set for connection: %s" % connection.heartbeat)
        return
    interval = connection.heartbeat
    cref = weakref.ref(connection)
    logger.info("Starting heartbeat monitor.")

    def heartbeat_check():
        conn = cref()
        if conn is not None and conn.connected:
            conn.heartbeat_check(rate=rate)
            logger.info("Ran heartbeat check.")
            spawn_after(interval, heartbeat_check)
    return spawn_after(interval, heartbeat_check)

def main():
    setup_logging(loglevel='INFO')

    # process for heartbeat monitor
    p = None

    try:
        with Connection('amqp://guest:guest@localhost:5672//', heartbeat=300) as conn:
            conn.ensure_connection()
            monitor_heartbeats(conn)
            queue = Queue('job_queue',
                          Exchange('job_queue', type='direct'),
                          routing_key='job_queue')
            logger.info("Starting worker.")
            with conn.Consumer(queue, callbacks=[job_worker]) as consumer:
                consumer.qos(prefetch_count=1)
                for _ in eventloop(conn, timeout=1, ignore_timeouts=True):
                    pass
    except KeyboardInterrupt:
        logger.info("Worker was shut down.")

if __name__ == "__main__":
    main() 
```

我剥离了我的领域特定代码，但本质上这是我使用的框架。

# objective-c - Objective C 内存崩溃，UIImageView

> ID：15015716
> 
> 赞同：1
> 
> 时间：2013-02-22T02:10:44.657
> 
> 标签：objective-c, memory, uiimageview, uiimage

我的应用程序在 UIImageView 内分配并显示图像。这发生在 viewDidLoad 的 24 个 imageViews 上。这些图像是从 50 个图像的列表中随机分配的。视图控制器从主屏幕被推送到模态。第一次加载需要一段时间。如果我很幸运，该视图会第二次加载。第三次，它几乎总是崩溃。我尝试将图像大小调整为 200 像素左右。我尝试使用以下方式分配图像：

```
 image1 = [UIImage imageNamed:@"image1.png"];

    [self.imageView setImage: image1]; 
```

还有：

```
 NSString *imagePath = [[NSBundle mainBundle] pathForResource:@"image1" ofType:@"png"];

    image1 = [[UIImage alloc] initWithContentsOfFile:imagePath]; 
```

这第二个似乎只会让事情变得更糟。

我还尝试使用 Instruments 运行该应用程序，它无法识别任何内存泄漏。

我真的不知道还能去哪里。这个应用程序代表了***巨大***的时间投资，我真的很想看到这个问题得到解决......非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T03:01:33.803

从磁盘加载较小版本图像的最有效方法是：不使用`imageNamed:`，而是使用 Image I/O 框架通过调用`CGImageSourceCreateThumbnailAtIndex`. 这是我书中的例子：

```
NSURL* url =
    [[NSBundle mainBundle] URLForResource:@"colson"
                            withExtension:@"jpg"];
CGImageSourceRef src =
    CGImageSourceCreateWithURL((__bridge CFURLRef)url, nil);
CGFloat scale = [UIScreen mainScreen].scale;
CGFloat w = self.iv.bounds.size.width*scale;
NSDictionary* d =
    @{(id)kCGImageSourceShouldAllowFloat: (id)kCFBooleanTrue,
     (id)kCGImageSourceCreateThumbnailWithTransform: (id)kCFBooleanTrue,
     (id)kCGImageSourceCreateThumbnailFromImageAlways: (id)kCFBooleanTrue,
     (id)kCGImageSourceThumbnailMaxPixelSize: @((int)w)};
CGImageRef imref =
    CGImageSourceCreateThumbnailAtIndex(src, 0, (__bridge CFDictionaryRef)d);
UIImage* im =
    [UIImage imageWithCGImage:imref scale:scale
                  orientation:UIImageOrientationUp];
self.iv.image = im;
CFRelease(imref); CFRelease(src); 
```

要求 UIImageView 显示比 UIImageView 本身更大的图像是一种巨大的内存浪费，因为全尺寸图像的位图必须保存在内存中。Image I/O 框架生成较小的版本，甚至无需将整个原始图像作为位图解压缩到内存中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T02:42:32.587

我曾经遇到过这个问题，来自常规网站的图像比我使用的视图大得多。如果我没记错的话，这些图像正在被解压缩到它们的全分辨率，然后适合图像视图，这会占用你的内存。在显示它们之前，我必须先将它们缩小到图像视图大小。添加 CoreGraphics.framework 并使用此类创建一个图像对象以与您的图像视图一起使用。我在网上找到了它并对其进行了一些调整以寻找相同的答案，但不记得在哪里，所以感谢发布原件的那个人，无论他们是谁。

ImageScale.h

```
#import <Foundation/Foundation.h>

@interface ImageScale : NSObject

+ (UIImage*)imageWithImage:(UIImage*)sourceImage scaledToSize:(CGSize)newSize;

@end 
```

ImageScale.m

```
#import "ImageScale.h"

@implementation ImageScale

+ (UIImage*)imageWithImage:(UIImage*)sourceImage scaledToSize:(CGSize)newSize
{
    CGFloat targetWidth = newSize.width;
    CGFloat targetHeight = newSize.height;

    CGImageRef imageRef = [sourceImage CGImage];
    CGBitmapInfo bitmapInfo = CGImageGetBitmapInfo(imageRef);
    CGColorSpaceRef colorSpaceInfo = CGImageGetColorSpace(imageRef);

    if (bitmapInfo == kCGImageAlphaNone) {
        bitmapInfo = kCGImageAlphaNoneSkipLast;
    }

    CGContextRef bitmap;

    if (sourceImage.imageOrientation == UIImageOrientationUp ||  sourceImage.imageOrientation == UIImageOrientationDown) {
        bitmap = CGBitmapContextCreate(NULL, targetWidth, targetHeight, CGImageGetBitsPerComponent(imageRef), CGImageGetBytesPerRow(imageRef), colorSpaceInfo, bitmapInfo);

    } else {
        bitmap = CGBitmapContextCreate(NULL, targetHeight, targetWidth, CGImageGetBitsPerComponent(imageRef), CGImageGetBytesPerRow(imageRef), colorSpaceInfo, bitmapInfo);

    }

    if (sourceImage.imageOrientation == UIImageOrientationLeft) {
        CGContextRotateCTM (bitmap, M_PI_2); // + 90 degrees
        CGContextTranslateCTM (bitmap, 0, -targetHeight);

    } else if (sourceImage.imageOrientation == UIImageOrientationRight) {
        CGContextRotateCTM (bitmap, -M_PI_2); // - 90 degrees
        CGContextTranslateCTM (bitmap, -targetWidth, 0);

    } else if (sourceImage.imageOrientation == UIImageOrientationUp) {
        // NOTHING
    } else if (sourceImage.imageOrientation == UIImageOrientationDown) {
        CGContextTranslateCTM (bitmap, targetWidth, targetHeight);
        CGContextRotateCTM (bitmap, -M_PI); // - 180 degrees
    }

    CGContextDrawImage(bitmap, CGRectMake(0, 0, targetWidth, targetHeight), imageRef);
    CGImageRef ref = CGBitmapContextCreateImage(bitmap);
    UIImage* newImage = [UIImage imageWithCGImage:ref];

    CGContextRelease(bitmap);
    CGImageRelease(ref);

    return newImage; 
}

@end 
```

# c++ - 如何更改按钮颜色？

> ID：15015718
> 
> 赞同：0
> 
> 时间：2013-02-21T23:40:39.420
> 
> 标签：c++, winapi

我正在使用 Embarcadero VCL c++ IDE for windows OS 开发一个 GUI 应用程序。作为该项目的一部分，我必须根据外部状态更改按钮的颜色。我知道 windows32 API 不允许更改按钮的颜色。您能否建议我，如何更改按钮颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T06:22:17.910

你想改变按钮的背景颜色，还是它的文本颜色？

由于 windows 使用视觉主题已有一段时间了，如果您已加载 commctrl 并包含清单文件，则将使用默认（当前）主题绘制按钮。

我可以看到的选项包括（a）自定义绘制背景（b）在正常绘制过程中更改文本颜色（c）绘制没有主题的按钮（即绘制“平面”按钮）。

您可以简单地绘制一个位图按钮，根据按钮的状态更改位图。您还可以使用单个位图，根据状态使用 HSL 或 HSV 颜色空间对其进行着色。

至于平面类型的按钮，我认为你可以改变它的背景颜色，就像你可以改变文本的颜色一样——通过在标准绘制过程中进行干预并从 3D_FACE （或其他任何颜色）更改颜色是，我忘了）任何你想要的。

如果您查看 Windows XP 附带的计算器，您会看到更改文本颜色的示例。

CodeProject.com 可能有很多文章可以帮助完成这项工作。:)

# html - HTML5 进度元素脚本

> ID：15015720
> 
> 赞同：1
> 
> 时间：2013-02-22T02:11:17.530
> 
> 标签：html, progress

我正在尝试显示一个 HTML5 进度元素来显示大图像文件的下载进度。

我已经检查了这个论坛上已经发布的类似问题的一些答案，但他们似乎没有直接回答这个问题（或者更可能只是我的无知）或者他们变得非常技术性，因此远远超出了我的范围。

我已经下载了一个 HTML5 / JavaScript 示例文件，该文件显示了基本方法（参见下面的代码），但我不知道如何将此脚本链接到我的图像下载。

任何建议将不胜感激。

```
<!DOCTYPE html>
<html>
<head>
<title>Developer Drive | Displaying the Progress of Tasks with HTML5 | Demo</title>
<script type="text/javascript">

var currProgress = 0;

var done = false;

var total = 100;

function startProgress() {

var prBar = document.getElementById("prog");

var startButt = document.getElementById("startBtn");

var val = document.getElementById("numValue");

startButt.disabled=true;

prBar.value = currProgress;

val.innerHTML = Math.round((currProgress/total)*100)+"%";

currProgress++;

if(currProgress>100) done=true;

if(!done)
setTimeout("startProgress()", 100);

else    
{
document.getElementById("startBtn").disabled = false;
done = false;
currProgress = 0;
}
}
</script>
</head>
<body>

<p>Task progress:</p>
<progress id="prog" value="0" max="100"></progress> 
<input id="startBtn" type="button" value="start" onclick="startProgress()"/>
<div id="numValue">0%</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T21:24:44.957

如果您正在寻找跟踪`XMLHttpRequest`（可能是加载图像或其他任何内容）的进度，[Adobe 有一个很好的例子](https://blogs.adobe.com/webplatform/files/XHRProgressSample.html?file=XHRProgressSample.html)。`Ctrl+U`是你的朋友 ：）

基本上，你会想要这样做：

```
var xhr = new XMLHttpRequest();
xhr.onprogress = function(e){

  // This tests whether the server gave you the total number of bytes that were
  // about to be sent; some servers don't (this is config-dependend), and
  // without that information you can't know how far along you are
  if (e.lengthComputable)
  {

    // e.loaded contains how much was loaded, while e.total contains
    // the total size of the file, so you'll want to get the quotient:
    progressBar.value = e.loaded / e.total * 100;

  }
  else
  {
    // You can't know the progress in term of percents, but you could still
    // do something with `e.loaded`
  }
}; 
```

[Mozilla 的开发者网站有更多详细信息](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest#Monitoring_progress)，如果您想看看可以做什么。

希望这对你来说已经足够了:)

* * *

PS：现在想来，我觉得没有理由不使用`e.total`as `progressBar.max`，干脆推`e.loaded`入`progressBar.value`

# php - 行级权限和 Laravel 应用程序结构

> ID：15015725
> 
> 赞同：2
> 
> 时间：2013-02-22T02:12:14.957
> 
> 标签：php, laravel, permissions

我想询问其他关于 Laravel 应用程序业务逻辑代码结构的意见，主要是关于行级别的权限。

对于那些不知道的人，Laravel 是一个 PHP 的 MVC 框架，很像 Rails。

为了便于理解，让我们假设一个多租户应用程序，其中每个用户都有自己的相册和图片，到目前为止一切正常。

*   现在，每个用户都可以邀请其他人协作（通过上传照片）到他的相册中。
*   上传图片的相册所有者和合作者都可以删除或更新有关该图片的信息。
*   只有所有者可以编辑相册并邀请新的协作者。
*   如果合作者愿意，他们可以将自己从相册中删除。

Pinterest 应该是类似的一个很好的例子，但我们的应用程序可能要复杂 3 到 4 倍。问题是：我应该在哪里处理这种逻辑？

Laravel 提出了拥有存储库、实体和服务的方法，我不完全理解，可能是因为缺乏好的例子。因此，满足这些最后期限的明显首选是将所有内容都放在控制器上（ew！）。现在，深入研究重构，有很多可能的方法可以使我们的代码不“意大利面”：

*   我见过人们在行级别实现 ACL（看起来有点愚蠢和矫枉过正）
*   可以将模型转变为行为感知对象，而不仅仅是数据容器，例如`$album->add_photo($photo)`并检查该功能的权限
*   也可以覆盖模型的保存方法并在那里进行这些检查
*   或者，遵循 Laravel 提出的具有独立关注层的道路

我想拥有类似的方法`$album->can_be_edited_by($user)`可以简化在不允许的路线上显示 404 错误、隐藏视图的链接以及在保存模型之前进行验证

您会推荐哪一个，是否有人知道不使用 .NET 的存储库、实体和服务的任何简单但易于理解的示例？谢谢！

**编辑：**我猜一个完整的 ACL 系统会导致过多的开销，因为每个用户可能有数千个资源关联，但每种关联只有一个角色。例如，图片有一个`uploader_id`，相册有一个`owner_id`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-22T05:51:14.843

我可能是错的，但我认为 ACL 是基于 OBJECT 的权限（即，用户可以或不能删除 GENERAL 中的照片）。您想要的是更多基于模型的自定义权限（如您所说的行级别），即用户可以删除他们自己创建的照片（特定的照片）。

我认为大多数 Laravel 包都是为基于对象的权限而设计的，但不是[https://github.com/deefour/authorizer](https://github.com/deefour/authorizer) - 这是一个很棒的隐藏宝石。我们没有在我们的项目中使用它，但我发现它确实涵盖了我们需要的所有基础。

我们的应用程序拥有非常高级的模型权限，我将它们分散在我的模型中，但我采用了非常以模型为中心的方法，这不一定是非常“laravel-esque”。在您的删除示例中，我将覆盖模型中的删除方法或侦听雄辩的事件并在那里阻止它。如果你必须阻止对某些属性的读/写，你甚至可以通过扩展验证器或使用自定义 mutators/getter、序列化程序或监听事件来做到这一点。更多关于在我的问题/答案中添加业务逻辑的地方：[https ://stackoverflow.com/a/27804817/796437](https://stackoverflow.com/a/27804817/796437)

我仍在努力寻找*最好*的方法，如果我这样做了，我会更新这个 - 但我想我会发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-16T07:18:08.477

在 Laravel 中，您可以使用[策略](https://laravel.com/docs/5.3/authorization)或解决方案，例如[Symfony Voters](http://symfony.com/doc/current/security/voters.html)。对于 Laravel 存在相同的包 - [Laravel Simple Voters](https://github.com/maximkou/laravel-simple-voters)。

使用它，您可以检查对自定义对象的访问，如下所示：

```
Access::isGranted('edit', $post) // current user can edit this post? 
```

例如，如果您希望检查对控制器的请求，您可以将此逻辑放入中间件中。

# android - 运行Tab时如何使动态设置的textView出现？

> ID：15015732
> 
> 赞同：0
> 
> 时间：2013-02-22T02:12:47.820
> 
> 标签：android, android-tabhost, textview

让我试着详细解释我的问题。我有 5 个选项卡，我的选项卡类在我的应用程序的启动屏幕之后运行，并且将显示第一个选项卡。

在我的第一个选项卡中，我有一个包含 TextView 的类，该类将在某些条件下显示某些文本（与用户在另一个类中键入的配置文件相关）。

```
TextView duration = (TextView)view.findViewById(R.id.duration);
duration.setText(durationNumber);

if(week <= 12)
{
durationNumber = "Less than 12 weeks";
}

else 
{
durationNumber = "More than 12 weeks";
} 
```

当我运行我的应用程序时，文本不会出现，除非我导航到其他选项卡并返回到第一个选项卡。我用谷歌搜索并找不到解决方案。我试过使用 SharedPreferences 但它没有用。也许我做错了。

为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T02:28:21.327

的初始值是`durationNumber`多少？是`null`在 if-else 循环中设置之前吗？如果是，`null`那么 TextView 将不会出现（因为没有要显示的值）。

`TextView`在 if-else 循环之后，您必须再次设置文本。试试这个...

```
TextView duration = (TextView)view.findViewById(R.id.duration);
if(week <= 12) {
   durationNumber = "Less than 12 weeks";
} else {
   durationNumber = "More than 12 weeks";
}
duration.setText(durationNumber); 
```

# android - Android模拟器4.0.3通过Webview在网站中输入文本时崩溃

> ID：15015734
> 
> 赞同：0
> 
> 时间：2013-02-22T02:12:55.540
> 
> 标签：android, webview, emulation

我制作了一个简单的 Android 应用程序，它试图通过单击按钮打开一个 URL（任何带有输入的 URL 都可以）。我使用的代码是这样的：

```
btnTest = (Button)findViewById(R.id.btnTest);
    btnTest.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            HelloActivity.this.startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.google.com")));
        }
    }); 
```

问题是在运行平台 4.0.3 的 Android 模拟器中，每次我尝试使用软键盘将文本输入网络时，模拟器都会崩溃。在运行 Platform 2.3.3 的模拟器中不会出现此问题。我试过很多网站，它的行为都是一样的。

顺便说一句，这是 logcat ：

```
02-22 09:35:51.434: I/ActivityManager(81): START {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.eatmicco.Training/.HelloActivity} from pid 212
02-22 09:35:51.444: D/PermissionCache(36): checking android.permission.READ_FRAME_BUFFER for uid=1000 => granted (623 us)
02-22 09:35:51.704: D/dalvikvm(81): GC_FOR_ALLOC freed 149K, 7% free 11999K/12871K, paused 79ms
02-22 09:35:51.714: I/dalvikvm-heap(81): Grow heap (frag case) to 11.914MB for 129616-byte allocation
02-22 09:35:51.844: D/dalvikvm(81): GC_FOR_ALLOC freed 745K, 13% free 11380K/12999K, paused 68ms
02-22 09:35:51.913: D/dalvikvm(478): Not late-enabling CheckJNI (already on)
02-22 09:35:51.944: I/ActivityManager(81): Start proc com.eatmicco.Training for activity com.eatmicco.Training/.HelloActivity: pid=478 uid=10048 gids={1015}
02-22 09:35:51.954: D/(81): HostConnection::get() New Host Connection established 0xbdd28, tid 123
02-22 09:35:52.094: W/NetworkManagementSocketTagger(81): setKernelCountSet(10048, 1) failed with errno -2
02-22 09:35:52.124: D/OpenGLRenderer(212): Flushing caches (mode 1)
02-22 09:35:52.334: V/PhoneStatusBar(151): setLightsOn(true)
02-22 09:35:52.533: W/InputManagerService(81): Starting input on non-focused client com.android.internal.view.IInputMethodClient$Stub$Proxy@415554e8 (uid=10013 pid=212)
02-22 09:35:52.533: D/(478): HostConnection::get() New Host Connection established 0x15c708, tid 478
02-22 09:35:52.593: D/OpenGLRenderer(212): Flushing caches (mode 0)
02-22 09:35:52.704: I/Process(81): Sending signal. PID: 478 SIG: 3
02-22 09:35:52.704: I/dalvikvm(478): threadid=3: reacting to signal 3
02-22 09:35:52.714: I/dalvikvm(478): Wrote stack traces to '/data/anr/traces.txt'
02-22 09:35:53.004: I/ActivityManager(81): Displayed com.eatmicco.Training/.HelloActivity: +1s114ms
02-22 09:35:53.154: W/NetworkManagementSocketTagger(81): setKernelCountSet(10013, 0) failed with errno -2
02-22 09:35:54.204: I/ActivityManager(81): START {act=android.intent.action.VIEW dat=http://www.google.com cmp=com.android.browser/.BrowserActivity} from pid 478
02-22 09:35:54.573: I/ActivityManager(81): Start proc com.android.browser for activity com.android.browser/.BrowserActivity: pid=491 uid=10002 gids={3003, 1015}
02-22 09:35:54.673: W/NetworkManagementSocketTagger(81): setKernelCountSet(10002, 1) failed with errno -2
02-22 09:35:54.933: I/ActivityThread(491): Pub com.android.browser;browser: com.android.browser.provider.BrowserProvider2
02-22 09:35:54.984: I/ActivityThread(491): Pub com.android.browser.home: com.android.browser.homepages.HomeProvider
02-22 09:35:54.984: I/ActivityThread(491): Pub com.android.browser.snapshots: com.android.browser.provider.SnapshotProvider
02-22 09:35:55.193: I/Process(81): Sending signal. PID: 491 SIG: 3
02-22 09:35:55.193: I/dalvikvm(491): threadid=3: reacting to signal 3
02-22 09:35:55.303: I/dalvikvm(491): Wrote stack traces to '/data/anr/traces.txt'
02-22 09:35:55.553: D/dalvikvm(491): GC_CONCURRENT freed 257K, 4% free 9281K/9607K, paused 8ms+4ms
02-22 09:35:55.603: E/ActivityThread(491): Failed to find provider info for com.google.settings
02-22 09:35:55.603: E/ActivityThread(491): Failed to find provider info for com.google.settings
02-22 09:35:55.693: I/Process(81): Sending signal. PID: 491 SIG: 3
02-22 09:35:55.693: I/dalvikvm(491): threadid=3: reacting to signal 3
02-22 09:35:55.813: I/dalvikvm(491): Wrote stack traces to '/data/anr/traces.txt'
02-22 09:35:55.893: D/dalvikvm(491): GC_FOR_ALLOC freed 191K, 4% free 9475K/9799K, paused 34ms
02-22 09:35:55.943: D/dalvikvm(491): GC_FOR_ALLOC freed 5K, 4% free 9647K/9991K, paused 31ms
02-22 09:35:55.993: D/dalvikvm(491): GC_FOR_ALLOC freed <1K, 4% free 9818K/10183K, paused 42ms
02-22 09:35:56.023: D/dalvikvm(491): GC_FOR_ALLOC freed <1K, 4% free 9989K/10375K, paused 35ms
02-22 09:35:56.073: D/dalvikvm(491): GC_FOR_ALLOC freed 1K, 4% free 10162K/10567K, paused 32ms
02-22 09:35:56.114: D/dalvikvm(491): GC_FOR_ALLOC freed <1K, 3% free 10504K/10759K, paused 33ms
02-22 09:35:56.163: E/libEGL(491): call to OpenGL ES API with no current context (logged once per thread)
02-22 09:35:56.183: D/ShaderProgram(491): couldn't load the vertex shader!
02-22 09:35:56.183: E/libEGL(491): call to OpenGL ES API with no current context (logged once per thread)
02-22 09:35:56.183: D/ShaderProgram(491): couldn't load the vertex shader!
02-22 09:35:56.183: E/libEGL(491): call to OpenGL ES API with no current context (logged once per thread)
02-22 09:35:56.183: D/ShaderProgram(491): couldn't load the vertex shader!
02-22 09:35:56.183: E/libEGL(491): call to OpenGL ES API with no current context (logged once per thread)
02-22 09:35:56.183: D/ShaderProgram(491): couldn't load the vertex shader!
02-22 09:35:56.183: E/libEGL(491): call to OpenGL ES API with no current context (logged once per thread)
02-22 09:35:56.183: D/ShaderProgram(491): couldn't load the vertex shader!
02-22 09:35:56.193: I/Process(81): Sending signal. PID: 491 SIG: 3
02-22 09:35:56.193: I/dalvikvm(491): threadid=3: reacting to signal 3
02-22 09:35:56.233: I/dalvikvm(491): Wrote stack traces to '/data/anr/traces.txt'
02-22 09:35:56.383: D/dalvikvm(491): GC_FOR_ALLOC freed 20K, 3% free 10896K/11143K, paused 57ms
02-22 09:35:56.393: D/WebViewTimersControl(491): onBrowserActivityResume
02-22 09:35:56.393: D/WebViewTimersControl(491): Resuming webview timers, view=com.android.browser.BrowserWebView@41313558
02-22 09:35:56.403: W/BaseUi(491): mMainView is already attached to wrapper in attachTabToContentView!
02-22 09:35:56.413: W/BaseUi(491): mContainer is already attached to content in attachTabToContentView!
02-22 09:35:56.433: V/NFC(491): this device does not have NFC support
02-22 09:35:56.543: D/libEGL(491): loaded /system/lib/egl/libGLES_android.so
02-22 09:35:56.593: D/libEGL(491): loaded /system/lib/egl/libEGL_emulation.so
02-22 09:35:56.593: D/(491): HostConnection::get() New Host Connection established 0x1ec618, tid 491
02-22 09:35:56.643: D/libEGL(491): loaded /system/lib/egl/libGLESv1_CM_emulation.so
02-22 09:35:56.643: D/libEGL(491): loaded /system/lib/egl/libGLESv2_emulation.so
02-22 09:35:56.703: I/Process(81): Sending signal. PID: 491 SIG: 3
02-22 09:35:56.703: I/dalvikvm(491): threadid=3: reacting to signal 3
02-22 09:35:56.793: W/EGL_emulation(491): eglSurfaceAttrib not implemented
02-22 09:35:56.823: D/OpenGLRenderer(491): Enabling debug mode 0
02-22 09:35:56.823: I/dalvikvm(491): Wrote stack traces to '/data/anr/traces.txt'
02-22 09:35:57.214: I/Process(81): Sending signal. PID: 491 SIG: 3
02-22 09:35:57.214: I/dalvikvm(491): threadid=3: reacting to signal 3
02-22 09:35:57.273: I/dalvikvm(491): Wrote stack traces to '/data/anr/traces.txt'
02-22 09:35:57.313: I/ActivityManager(81): Displayed com.android.browser/.BrowserActivity: +2s785ms
02-22 09:35:57.733: E/chromium(491): external/chromium/net/disk_cache/backend_impl.cc:1107: [0222/093557:ERROR:backend_impl.cc(1107)] Critical error found -8
02-22 09:35:57.893: D/dalvikvm(491): GC_CONCURRENT freed 65K, 3% free 11348K/11591K, paused 3ms+21ms
02-22 09:35:57.963: D/dalvikvm(491): GC_FOR_ALLOC freed 10K, 3% free 11337K/11591K, paused 60ms
02-22 09:35:57.963: I/dalvikvm-heap(491): Grow heap (frag case) to 11.765MB for 656656-byte allocation
02-22 09:35:57.993: W/chromium(491): external/chromium/net/disk_cache/storage_block-inl.h:119: [0222/093558:WARNING:storage_block-inl.h(119)] Failed data load.
02-22 09:35:57.993: W/chromium(491): external/chromium/net/disk_cache/storage_block-inl.h:119: [0222/093558:WARNING:storage_block-inl.h(119)] Failed data load.
02-22 09:35:58.003: W/chromium(491): external/chromium/net/disk_cache/storage_block-inl.h:119: [0222/093558:WARNING:storage_block-inl.h(119)] Failed data load.
02-22 09:35:58.033: W/chromium(491): external/chromium/net/disk_cache/storage_block-inl.h:119: [0222/093558:WARNING:storage_block-inl.h(119)] Failed data load.
02-22 09:35:58.053: E/chromium(491): external/chromium/net/disk_cache/entry_impl.cc:904: [0222/093558:ERROR:entry_impl.cc(904)] Failed to save user data
02-22 09:35:58.053: E/chromium(491): external/chromium/net/disk_cache/entry_impl.cc:904: [0222/093558:ERROR:entry_impl.cc(904)] Failed to save user data
02-22 09:35:58.143: D/dalvikvm(491): GC_FOR_ALLOC freed 0K, 3% free 11979K/12295K, paused 121ms
02-22 09:35:58.263: W/Tab(491): Failed to save back/forward list for http://www.google.com
02-22 09:35:58.883: W/NetworkManagementSocketTagger(81): setKernelCountSet(10048, 0) failed with errno -2
02-22 09:36:03.363: D/dalvikvm(165): GC_CONCURRENT freed 118K, 3% free 9760K/9991K, paused 4ms+5ms
02-22 09:36:04.403: D/(165): HostConnection::get() New Host Connection established 0x1e7f50, tid 165
02-22 09:36:04.773: D/dalvikvm(165): GC_FOR_ALLOC freed 143K, 3% free 9844K/10119K, paused 224ms
02-22 09:36:04.803: I/dalvikvm-heap(165): Grow heap (frag case) to 10.241MB for 591376-byte allocation
02-22 09:36:04.913: D/dalvikvm(165): GC_FOR_ALLOC freed 9K, 4% free 10412K/10759K, paused 99ms
02-22 09:36:05.053: D/dalvikvm(165): GC_CONCURRENT freed <1K, 4% free 10413K/10759K, paused 3ms+4ms
02-22 09:36:05.623: D/dalvikvm(151): GC_CONCURRENT freed 174K, 29% free 9975K/13959K, paused 4ms+16ms
02-22 09:36:05.803: D/dalvikvm(81): GC_CONCURRENT freed 278K, 12% free 11569K/12999K, paused 5ms+28ms
: E/(): Device disconnected 
```

谁能告诉我这里有什么问题？

谢谢

# vaadin - 如何在eclipse中运行demo vaadin dashboard-demo

> ID：15015741
> 
> 赞同：2
> 
> 时间：2013-02-22T02:13:20.087
> 
> 标签：vaadin

如何在 Eclipse 中运行演示 vaadin dashboard-demo。我已经从 github 下载了他们的项目？ [https://github.com/vaadin/dashboard-demo.git](https://github.com/vaadin/dashboard-demo.git)

我正在使用eclipse版本juno wtp

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-03T03:33:19.730

1.  下载 zip ( [https://github.com/vaadin/dashboard-demo](https://github.com/vaadin/dashboard-demo) )
2.  提取dashboard-demo-master.zip
3.  Eclipse: File-> Import-> Maven -> Existing Maven Projects (点击next)
4.  对于根目录：使用 pom.xml 浏览“dashboard-demo-master”目录（点击完成）
5.  右键单击eclipse项目“quicktickets-dashboard”运行为-> maven install
6.  下载源代码后运行方式-> 在服务器上运行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T15:14:20.847

[https://vaadin.com/forum/-/message_boards/view_message/2489264?_19_delta=20&_19_keywords=&_19_advancedSearch=false&_19_andOperator=true&cur=1](https://vaadin.com/forum/-/message_boards/view_message/2489264?_19_delta=20&_19_keywords=&_19_advancedSearch=false&_19_andOperator=true&cur=1)

此处有关此 QuickTickets 演示源的博客

# r - 如何创建具有多列条件的单个虚拟变量？

> ID：15015744
> 
> 赞同：1
> 
> 时间：2013-02-22T02:13:38.387
> 
> 标签：r, categories, binary-data, indicator, dummy-data

我正在尝试根据数据集中的 7 个变量（col9-15）中的一个或多个是否具有特定值（35），在我的数据集中有效地创建一个二进制虚拟变量（1/0），但是我不想测试所有列。

虽然 as.numeric 通常是理想的，但我一次只能使用一列：

```
data$indicator <- as.numeric(data$col1 == 35) 
```

知道如何修改上述代码，以便如果`data$col9`-`data$col15`是“35”，那么我的指标变量取 1？

谢谢！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T02:28:15.590

您可以`rowSums`像这样使用（矢量化解决方案）：

```
set.seed(123)
dat <- matrix(sample(c(35,1:100),size=15*20,rep=T),ncol=15,byrow=T)
cbind(dat,rowSums(dat[,9:15] == 35) > 0)
   [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13] [,14] [,15] [,16]
 [1,]   29   79   41   89   94    4   53   90   55    46    96    45    68    57    10     0
 [2,]   90   24    4   33   96   89   69   64  100    66    71    54    60    29    14     0
 [3,]   97   91   69   80    2   48   76   21   32    23    14    41    41    37    15     0
 [4,]   14   23   47   26   86    4   44   80   12    56    20    12    76    90    37     0
 [5,]   67    9   38   27   82   45   81   82   80    44    76    63    71    35    48     1
 [6,]   22   38   61   35   11   24   67   42   79    10    43    99    90    89    17     0
 [7,]   13   65   34   66   32   18   79    9   47    51    60    33    49    96    48     0
 [8,]   89   92   61   41   14   94   30    6   95    72    14    55    96    59    40     0
 [9,]   65   32   31   22   37   99   15    9   14    69    62    90    67    74    52     0
[10,]   66   83   79   98   44   31   41    1   18    85    23    24     7    24    73     0
[11,]   85   50   39   24   11   39   57   21   44    22    50    35    65    37    35     1
[12,]   53   74   22   41   26   63   18   87   75    67    62    37    53    88    58     0
[13,]   84   31   71   26   60   48   26   57   92    91    27    32    99    62    94     0
[14,]   47   41   66   15   57   24   97   60   52    40    88    36    29    17    17     0
[15,]   48   25   21   68    4   70   35   41   82    92    28    97    73    69     5     0
[16,]   39   48   56   70   92   62   43   54    5    26    40    19    84    15    81     0
[17,]   55   66   17   63   31   73   40   97   97    73    25    22    59    27    53     0
[18,]   79   16   40   47   87   93   89   68   95    52    58    33    35     2    50     1
[19,]   87   35    7   16   77   74   98   47    7    65    76    13    40    22     5     0
[20,]   39    6   22    5   67   30   10    7   88    76    82    99    10    10    80     0 
```

**编辑**

我替换`cbind`by `transform`。由于该列将是布尔值，因此我将其强制为 0/1。

```
 transform(dat,x=as.numeric((rowSums(dat[,9:15] == 35) > 0))) 
```

结果是一个data.frame。（通过变换从矩阵强制转换）

**EDIT2**（由@flodel 建议）

```
data$indicator <- as.integer(rowSums(data[paste0("col", 9:15)] == 35) > 0) 
```

`data`OP的data.frame在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T02:30:16.310

申请救援:)

```
# this sample data frame is pre-loaded
mtcars

# test whether any of the values in the
# 2nd - 5th columns of mtcars equal four..

# save the result into a new vector..
indicator.col <- 
    apply( 
        mtcars[ , 2:5 ] , 
        1 ,
        FUN = function( x ) max( x == 4 ) 
    )

# ..that quickly binds onto mtcars
# and bind it with the original mtcars
mtcars2 <- cbind( mtcars , indicator.col )

# look at your result
mtcars2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T04:01:29.793

你也可以试试这个（从agstudy的答案中借用样本数据）

```
> set.seed(123)
> dat <- matrix(sample(c(35,1:100),size=15*20,rep=T),ncol=15,byrow=T)

#Create indicator initialized with 0.
> indicator <- rep(0, nrow(dat))
#Replace the elements at indices which are equal to rows in dat where you find 35
> indicator[which(dat[,9:15]==35)%%nrow(dat)] <- 1
#bind the indicator to original data
> cbind(dat, indicator)
                                                    indicator
 [1,] 29 79 41 89 94  4 53 90  55 46 96 45 68 57 10         0
 [2,] 90 24  4 33 96 89 69 64 100 66 71 54 60 29 14         0
 [3,] 97 91 69 80  2 48 76 21  32 23 14 41 41 37 15         0
 [4,] 14 23 47 26 86  4 44 80  12 56 20 12 76 90 37         0
 [5,] 67  9 38 27 82 45 81 82  80 44 76 63 71 35 48         1
 [6,] 22 38 61 35 11 24 67 42  79 10 43 99 90 89 17         0
 [7,] 13 65 34 66 32 18 79  9  47 51 60 33 49 96 48         0
 [8,] 89 92 61 41 14 94 30  6  95 72 14 55 96 59 40         0
 [9,] 65 32 31 22 37 99 15  9  14 69 62 90 67 74 52         0
[10,] 66 83 79 98 44 31 41  1  18 85 23 24  7 24 73         0
[11,] 85 50 39 24 11 39 57 21  44 22 50 35 65 37 35         1
[12,] 53 74 22 41 26 63 18 87  75 67 62 37 53 88 58         0
[13,] 84 31 71 26 60 48 26 57  92 91 27 32 99 62 94         0
[14,] 47 41 66 15 57 24 97 60  52 40 88 36 29 17 17         0
[15,] 48 25 21 68  4 70 35 41  82 92 28 97 73 69  5         0
[16,] 39 48 56 70 92 62 43 54   5 26 40 19 84 15 81         0
[17,] 55 66 17 63 31 73 40 97  97 73 25 22 59 27 53         0
[18,] 79 16 40 47 87 93 89 68  95 52 58 33 35  2 50         1
[19,] 87 35  7 16 77 74 98 47   7 65 76 13 40 22  5         0
[20,] 39  6 22  5 67 30 10  7  88 76 82 99 10 10 80         0 
```

# asp.net-mvc - 配置响应过滤器的责任

> ID：15015745
> 
> 赞同：4
> 
> 时间：2013-02-22T02:13:38.233
> 
> 标签：asp.net-mvc, filter, decorator

**背景**

我正在考虑整合`CompressFilter`from

[从 MVC 中生成的 HTML 中删除多余的空格](https://stackoverflow.com/q/855526/141172)

进入我自己的代码。在此之前，我想测量在`CompressFilter`. 由于我[不能使用 Visual Studio Profiler](https://stackoverflow.com/q/13081515/141172)，我决定创建一个简单的流包装器

```
private class BenchmarkStream : Stream
{
    Stream inner;

    public BenchmarkStream(Stream inner)
    {
        if (inner == null) throw new ArgumentException("inner");
        this.inner = inner;
    }

    public override void Write(byte[] buffer, int offset, int count)
    {
        Stopwatch sw = Stopwatch.StartNew();
        inner.Write(buffer, offset, count);
        sw.Stop();
        Debug.WriteLine("Compressed " + count + " bytes in " + 
           sw.ElapsedMilliseconds + "ms");
    }
    // Rest of implementation removed for brevity
} 
```

像这样使用

```
response.Filter = new BenchmarkStream(
                    new GZipStream(response.Filter, CompressionMode.Compress)); 
```

**问题**

我是否负责处理我的流`inner`，或者 ASP.Net 运行时是否有一种机制会这样做？

的代码`CompressFilter`没有显式处理`GZipStream`或`DeflateStream`分配给`response.Filter`，但我看不到运行时如何处理`inner`.

我是否正确地假设`GZipStream`并`DeflateStream`负责处理它组成的流？

# mysql - 按三列排序表

> ID：15015749
> 
> 赞同：-2
> 
> 时间：2013-02-22T02:14:41.647
> 
> 标签：mysql, sorting, multiple-columns

寻找一种按三个条件对订单进行排序的方法。我可以毫无问题地得到其中两个。示例表：

```
Buyer  Qty  Item_ID
James  1    12345
Jack   1    34564
John   3    13445
Kevin  1    83243
Bill   2    23434
Jack   3    23423 
```

所以这里的诀窍是先对买家进行分组，
然后是数量，然后是 item_id

Jack 有两个订单需要分组，然后拉到一起发货 其余订单需要按数量分组，然后按 item_ID 排序

输出如下：

```
Buyer  Qty  Item_ID
Jack   1    34564
Jack   3    23423
James  1    12345
Kevin  1    83243
Bill   2    23434
Bob    2    23444
John   3    13445 
```

买家不需要排序，只需按数量、item_id 分隔的 Jacks 订单对多个订单进行分组。我们每天收到 100 个订单，来自同一买家的多个订单。具有相同数量商品的订单需要按 item_id 排序，以简化将库存从房间一端拉到另一端的过程。似乎将买家分组会起作用，但还没有弄清楚。

迄今为止最合理的查询：

```
 select * FROM orders
    WHERE printed = 0 
    AND status = 'completed' 
    AND address_name <> '' 
    group by buyer
    ORDER BY qty, id; 
```

此查询跳过来自同一买家的多个订单，并将其余订单正确排序。

我已经成功实施了答案 1，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:29:50.463

以下查询将为您提供所需的确切结果。在内部查询中，它生成相同买方实例的计数。然后它与买方列中的原始表连接。然后按相同买方实例的计数降序和其他列升序对其进行排序。

```
SELECT table1.buyer, qty, item_id 
FROM orders table1,
  (SELECT buyer, COUNT(*) as count FROM orders GROUP BY buyer) as table2
  WHERE table1.buyer = table2.buyer 
  ORDER BY count DESC, qty, item_id; 
```

参考这个[小提琴](http://sqlfiddle.com/#!2/6cccc/29)。

# c# - C# POCO 多对多关系，找不到 Tablename_Fieldname

> ID：15015751
> 
> 赞同：0
> 
> 时间：2013-02-22T02:14:49.807
> 
> 标签：c#, entity-framework-4, many-to-many

我有一个简单的 Company、Location 表结构和一个多对多 CompanyLocation 表，如下所示：

```
create table Company 
(
    CompanyId bigint not null identity,
    CompanyName varchar(50),
    --other fields
    constraint PK_Company primary key (CompanyId)
)

create table Location
(
    LocationId int not null identity,
    LocationName varchar(50),
    --other fields
    constraint PK_Location primary key (LocationId)
)

create table CompanyLocation
(
    CompanyId bigint not null,
    LocationId int not null,
    constraint PK_CompanyLocation primary key (CompanyId, LocationId),
    constraint FK_CompanyLocation_Company foreign key (CompanyId) references Company(CompanyId),
    constraint FK_CompanyLocation_Location foreign key (LocationId) references Location(LocationId)
) 
```

所以我的多对多表是一个“正确的”仅键表。我的 POCO 类是这样定义的：

```
public class Company
{
    public long CompanyId { get; set; }
    public string CompanyName { get; set; }
    //more fields

    public virtual List<Location> Locations { get; set; }
}

public class Location
{
    public int LocationId { get; set; }
    public string LocationName { get; set; }
    //more fields

    public virtual List<Company> Companies { get; set; }
} 
```

它编译 find，当我运行它时，在我加载公司后，如果我访问 Company.Locations.anything，我会收到以下错误：

```
Invalid column name 'Location_LocationID'.
Invalid column name 'Company_CompanyId'. 
```

我知道我可以手动映射这些，但我正在尝试遵循配置实体框架的约定来创建 POCO 多对多关系。我对这个模型做错了什么？

-shnar

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:37:09.623

您需要有一个包含 Location_LocationID 和 Company_CompanyId 字段的连接表才能利用 EF 约定。虽然我没有设法使用 Fluent API 映射来启动和运行它，但我已经尝试过并且遇到了同样的错误，就像 EF 忽略了我的 Fluent API 映射一样。

问候

# d3.js - 确保 d3 数据元素与 id 匹配？

> ID：15015752
> 
> 赞同：19
> 
> 时间：2013-02-22T02:14:50.040
> 
> 标签：d3.js

我有一个带有一堆多边形的现有 svg。每个多边形都有一个唯一的 id，每个 id 都有一些相关的数据。

我的问题是：如果我做自然 d3 加入：

```
d3.selectAll("polygon").data(array_of_data) 
```

无论如何要确保与多边形关联的数据元素是正确的？

还是我只需要保持与`array_of_data`所选多边形的顺序相同的顺序？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-22T03:13:25.320

D3 的`data()`函数接受一个可选的第二个参数，旨在提供数据和 DOM 节点之间的这种对应关系。试试这个：

```
d3.selectAll('polygon').data(array_of_data, function(d) { return d.id; }); 
```

的第二个参数`data()`是一个回调函数，当使用数据调用时，它返回将每个 DOM 节点绑定到其对应数据的键。如果不提供这样的功能，D3 就别无选择，只能使用索引将数据绑定到 DOM 节点。

# java - HTML 和 JSP 将命令绑定到选项表单

> ID：15015753
> 
> 赞同：0
> 
> 时间：2013-02-22T02:14:50.800
> 
> 标签：java, html, jsp, html-select

我在尝试将操作绑定到 HTML 选择选项时遇到了一点问题。目前我有：

```
<select name ="delivery ">
    <p><option value="1"</p>Free Delivery</option>                            
    <p><option value="2"</p>Next-day</option>                        
</select> 
```

如果按下选项一，那么我想`${cart.subtotal}`保持相同的值，但如果按下选项 2，那么`${cart.subtotal + 3.50}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T03:38:09.930

首先更改条目`<p><option value="1"</p>Free Delivery</option>`喜欢

`<option value="1">Free Delivery</option>`

其次，如果你使用 jQuery 来绑定动作，那么 jQuery 代码应该是：

```
$("select[name='delivery']").change(function() {
//do something here
}); 
```

同时删除不必要的空间

从`<select name ="delivery ">`

将其更改为`<select name ="delivery">`

# php - 如何根据选定的单选按钮更改 html 段落文本？

> ID：15015757
> 
> 赞同：-4
> 
> 时间：2013-02-22T02:15:09.653
> 
> 标签：php, jquery, mysql, modal-dialog

我一直在用 PHP 和 MySQL 开发一个课程管理系统。我最近遇到了一个问题。我创建了一个基本网页 ( `EditCompletion.php`)。基本上，我想做的是在该页面上有一个链接，该链接打开一个 jQuery 模态窗口，并且在该模态窗口内应该是 3 个单选按钮、一个小的描述段落（单击新单选按钮时会发生变化）和一个提交按钮。这就是我希望它的工作方式：

我希望能够选择一个学生 ( `CERTAIN SELECTED STUDENT`) 和一个课程 ( `CERTAIN SELECTED LESSON`)，然后我希望能够单击 EditCompletion.php 上的链接，然后打开 jQuery 模态窗口。然后我希望能够从以下选项中进行选择：

```
Unlock - (Description Paragraph - Are you sure your want to unlock (CERTAIN SELECTED LESSON) for (CERTAIN SELECTED STUDENT))?

Exempt - (Description Paragraph - Are you sure you want to exempt (CERTAIN SELECTED STUDENT) from (CERTAIN SELECTED LESSON))?

Master - (Description Paragraph - Are you sure you want to master (CERTAIN SELECTED STUDENT) out of (CERTAIN SELECTED LESSON))? 
```

`THE CERTAIN SELECTED`将显示为`CURRENT SELECTED [WHATEVER]`. 例如，`SELECT STUDENT JOHN DOE`然后`LESSON 1`单击`EditCompletion.php`链接以打开模式。我想使用单选按钮选择一个选项，单击“保存”后，MySQL 数据库将被更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T02:48:38.840

像这样的东西？

```
<?php 
            for($samples as $sample){
        echo '<a onclick="return (confirm(\'..message here.. for '.$sample['name']. 'about'.$sample['lesson'].'\'))? true: false;">Action</a>';

            }
        ?> 
```

# c++ - 在 C++ 中使用按值返回覆盖赋值运算符

> ID：15015758
> 
> 赞同：1
> 
> 时间：2013-02-22T02:15:09.787
> 
> 标签：c++, overloading, operator-keyword

考虑：

```
 class MyObject{
    public:
     MyObject();
     MyObject(int,int);
     int x;
     int y;
     MyObject operator =(MyObject rhs);
    };
    MyObject::MyObject(int xp, int yp){
     x = xp;
     y = yp;
    }
    MyObject MyObject::operator =(MyObject rhs){
     MyObject temp;
     temp.x = rhs.x;
     temp.y = rhs.y;
     return temp;
    }

    int main(){
     MyObject one(1,1);
     MyObject two(2,2);
     MyObject three(3,3);
     one = two = three;
     cout << one.x << ", " << one.y;
     cout << two.x << ", " << two.y;
     cout << three.x << ", " << three.y;

    } 
```

通过这样做，一、二和三中的变量 x 和 y 不变。我知道我应该更新 MyObject 的成员变量并使用按引用返回并返回 *this 以获得正确的行为。但是， one = two = three 中的返回值实际发生了什么？return temp 实际上在链中的哪个位置结束，例如一步一步？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T02:43:46.253

调用赋值运算符

```
two = three 
```

返回一个临时对象作为右值。这是类型`MyObject`并传递给赋值运算符的下一个调用

```
one = t 
```

（我`t`用来指代临时对象。）

不幸的是，这不会编译，因为赋值运算符需要一个引用`MyObject&`，而不是类型的右值`MyObject`。

（由于各种原因，您的代码也无法编译，包括大写`Class`和拼写错误。）

但是，如果您要定义一个采用右值的赋值运算符（即按值、常量引用或`MyObject&&`如果使用 C++11 时实际上按右值引用采用参数），则调用将起作用并且临时对象将是复制到函数中。在内部，将进行分配并返回另一个临时对象。

然后最终的临时对象将超出范围，即不再存在。将无法访问其内容。

* * *

感谢 Joachim Pileborg 和 Benjamin Lindley 的有益评论。

* * *

回答更多细节的请求：`MyObject`是一个类类型，C++ 标准包括一个关于类类型临时对象生命周期的完整部分（第 12.2 节）。那里详细介绍了各种复杂的情况，我不会全部解释。但基本概念如下：

1.  C++ 有*表达式的概念。*表达式与声明和语句一起是构成程序代码的基本单元。例如，函数调用`f(a,b,c)`是一个表达式，或者像`a = b`. 表达式可能包含其他表达式：`a = f(b,c)`，嵌套在赋值表达式中的函数调用。C++ 还引入了*全表达式*的概念。在前面的例子中，`c`是表达式的一部分，`f(b,c)`也是 的一部分`a = f(b,c)`，如果它没有嵌套在另一个表达式中，我们说那`a = f(b,c)`是*词法上包含的完整表达式`c`*。

2.  该标准定义了可以创建临时对象的各种情况。一种这样的情况是从函数调用中*按值返回对象（也称为**返回 prvalue*，§6.6.3）。

3.  该标准规定，当包含它的完整表达式已被完全评估时，此类临时对象的生命周期结束：

    > [...] 临时对象作为评估完整表达式 (1.9) 的最后一步被销毁，该完整表达式 (从词法上) 包含它们的创建点。[...]

    （注意。标准接着定义了这个规则的几个例外。然而，你的赋值运算符的返回值的情况并不是这样的例外。）

4.  现在，**一个对象（类类型）被销毁是什么意思？**这首先意味着它的析构函数被调用（§12.2/3）。这也意味着无法再安全地访问该对象的存储空间。因此，如果您在完整表达式的评估结束之前以某种方式设法将临时对象的地址存储在指针中，那么在评估结束后取消引用该指针通常会导致未定义的行为。

5.  在实践中，这在许多情况下可能意味着以下内容——我在一个可能的场景中描述了临时对象的整个生命周期：

    1.  为了提供临时存储空间，编译器确保在输入包含完整表达式的函数时分配足够的堆栈空间（这发生在实际评估完整表达式之前）。
    2.  在赋值表达式的求值过程中，会创建临时值。编译器确保调用其构造函数来初始化为其分配的空间。
    3.  然后可以在评估它所属的完整表达式的过程中访问或修改临时的内容。
    4.  当表达式已被完全评估时（在您的情况下，这一时刻对应于包含赋值表达式的行的末尾），临时的析构函数被调用。之后，访问为其分配的内存不再安全，尽管实际上该空间将继续作为当前堆栈帧的一部分，直到完成所有这些操作的函数的评估完成。
6.  But, again, this is only an example of what *may* happen. The creation of temporaries is in many situations not actually required. The compiler may perform optimizations that mean the temporary is never actually created. In this case, the compiler must nevertheless ensure that it *could have been* be created, e.g. it must ensure that the required constructors and destructors exist (they may never be called though).

# java - 如何强制子类在java中设置变量？

> ID：15015771
> 
> 赞同：27
> 
> 时间：2013-02-22T02:16:47.770
> 
> 标签：java, conceptual

我有一个类，它定义了给定屏幕的所有基本参数。从这里开始，应用程序中的每个屏幕都是它的子类。我需要**每个**屏幕（即子类）在其实现中设置变量的值（即，每个屏幕必须定义它在导航树中的级别）。

此外，理想情况下，这个变量应该是`final`在子类中设置的时候（我意识到这可能是不可能的）。

解决此问题的最佳方法是什么？有没有办法在 Java 中正确执行这种类型的行为？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-22T03:04:08.193

@pst 的评论导致了这个解决方案。

> 这不能用变量来完成。但是抽象类可以要求实现一个特定的方法：这个方法可以返回适用的值

从声明`abstract`函数到设置或返回变量，您可以强制任何子类正确实现它。

接下来，必须由外部类的每个子类调用该函数。这意味着它必须在外部类的某个地方完成。这可以在外部类的无参数构造函数中完成，而不必担心子类调用`super`：

> 注意：如果构造函数没有显式调用超类构造函数，Java 编译器会自动插入对超类的无参数构造函数的调用。如果超类没有无参数构造函数，则会出现编译时错误。Object 确实有这样的构造函数，所以如果 Object 是唯一的超类，则没有问题。 [（Java 文档：超级）](http://docs.oracle.com/javase/tutorial/java/IandI/super.html)

基于此，此解决方案将保持并正确**强制**设置变量，只要：

1.  在超类中没有创建其他构造函数（因此不能在子类中使用 super 来调用不同的构造函数）
2.  超类中的所有其他构造函数仍然在内部调用默认构造函数

编码：

**超类：**

```
public abstract class SuperClass {
    // Variable all inner classes must set
    static int myVar = 0;

    public SuperClass() {
        myVar = giveValue();
    }

    public abstract int giveValue();
} 
```

**子类：**

```
public class SubClass extends SuperClass {

    @Override
    public int giveValue() {
        return 5; // individual value for the subclass
    }

} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-22T02:23:56.443

与其强制子类实例初始化字段，不如遵循组合策略，让父类构造函数采用实现接口的参数，该接口提供您希望初始化的字段。

```
class Screen {
  final Configuration config;
  Screen(Configuration config) {
    this.config = config;
  }
  // or
  Screen(ConfigFactory configFactory) {
    this.config = configFactory.make();
  }
}

interface ConfigFactory {
  Configuration make();
} 
```

我会告诫不要要求子类实例初始化配置，比如使用抽象方法实现。父类构造函数中的赋值发生在子类实例初始化之前，*隐式地*使配置的正确计算成为静态。

如果计算不是静态的，您可能会冒空引用或 NullPointerExceptions 被跟随您的开发人员（或者您自己，如果您的内存不够完美）。让你的合作者（和你自己）更容易，并使约束明确。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-11-15T13:54:14.573

正如@Ketan 在@BT 的回答中提到的那样，从构造函数调用可覆盖的方法并不是特别好的做法（[https://help.semmle.com/wiki/display/JAVA/Non-final+method+invocation+in +构造函数](https://help.semmle.com/wiki/display/JAVA/Non-final+method+invocation+in+constructor)）

避免此问题的一种方法是为该字段设置一个抽象的（受保护的）吸气剂。因此超类不再具有该字段，但仍然可以在超类中使用 getter 访问它。每个子类都必须声明该字段，因为它必须覆盖抽象 getter。

**超类：**

```
public abstract class SuperClass {

  public SuperClass() {}

  protected abstract int getMyVar();

  public void functionUsingMyVar(){
     int a = 12 + getMyVar();
  }
} 
```

**子类1：**

```
public class SubClass1 extends SuperClass {

  private int myVar;

  public SubClass1() {
     super();
     myVar = 1;
  }

  @Override
  protected int getMyVar(){
     return myVar;
  }

} 
```

**子类2：**

```
 public class SubClass2 extends SuperClass {

  private int myVar;

  public SubClass2() {
     super();
     myVar = 1;
  }

  @Override
  protected int getMyVar(){
     return myVar;
  }

} 
```

而不是超类（其中 giveValue() 是可覆盖的并在构造函数中调用）：

```
public abstract class SuperClass {

  private int myVar;

  public SuperClass() {
     myVar = giveValue();
  }

  protected abstract int giveValue();

  public void functionUsingMyVar(){
     int a = 12 + myVar;
  }
} 
```

# android - TelephonyManager.getLine1Number 不返回任何内容

> ID：15015776
> 
> 赞同：0
> 
> 时间：2013-02-22T02:17:16.803
> 
> 标签：android, telephonymanager

我有一个为 android 制作的应用程序，它使用 TelephonyManager 获取线路号

```
((TelephonyManager)getSystemService(TELEPHONY_SERVICE)).getLine1Number() 
```

我有正确的权限

```
<uses-permission android:name="android.permission.READ_PHONE_STATE"/> 
```

我的 Galaxy Ace 工作正常，但在我的 Galaxy SIII 中我什么也得不到。可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T17:05:26.283

这取决于 SIM 卡。

我也有同样的问题。您应该检查是否可以获得该号码，如果没有，请向用户询问；）

# c++ - error LNK2019: unresolved external symbol (simple code)

> ID：15015779
> 
> 赞同：1
> 
> 时间：2013-02-22T02:17:41.040
> 
> 标签：c++

this is a pretty simple code that just is coming up with an error even though I have it written the same way other people doing the same code have it

> 1>assigntment5.obj : error LNK2019: unresolved external symbol "class std::basic_string,class std::allocator > __cdecl promptForString(class std::basic_string,class std::allocator >)" (?promptForString@@YA?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@V12@@Z) referenced in function _main 1>c:\users\aweb\documents\visual studio 2010\Projects\Assignment5\Debug\Assignment5.exe : fatal error LNK1120: 1 unresolved externals

the .cpp file

```
#include <iostream>
#include <string>
#include "anw65_Library.h"

using namespace std;

string promptForString(string prompt);

int main()
{
string name = promptForString("What is the filename?: ");

system("pause");
return 0;
} 
```

the .h file

```
#include <iostream>
#include <iomanip>
#include <string>

using namespace std;

static string promptFromString(string prompt)
{
string filename;
cout << prompt;
cin >> filename;
return filename;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T02:21:01.487

你从不定义`prompt**For**String`，你定义了`prompt**From**String`。拼写很重要。还：

1.  为什么要在 .h 文件中定义函数？只需在此处声明它们并在 .cpp 文件中定义它们（除非它们是模板）。
2.  不要放入`using namespace <whatever>`头文件。您只是在破坏包含您的标头的任何内容的全局名称空间。
3.  您无需将该功能标记为`static`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T02:22:35.093

这一行：

```
string promptForString(string prompt); 
```

在您的 .cpp 文件中导致问题。*它是通过外部*链接向前定义一个功能。但是，您的标题的功能是：

```
static string promptFromString(string prompt)
{
... 
```

这里的重要部分是`static`. `static`意味着它具有*内部*链接。要么摆脱 ，要么`static`摆脱前向声明，因为函数不能同时具有内部和外部链接。

编辑：另外，Ed S. 很好地发现了您的错字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T02:23:24.850

当您在文件中定义`promptForString()`时，您从 main 函数调用。`promptFromString()``.h`

您可能想要更改其中一个定义。

# css - How to get nav links(buttons) in header next to image

> ID：15015782
> 
> 赞同：0
> 
> 时间：2013-02-22T02:17:54.623
> 
> 标签：css, button, header, nav

I have my nav inside the header. I have an image in the corner and want the navigation links, which I made as buttons, on the right, but higher up within the white box. I had a problem with the header not resizing when i shrunk the page but I fixed that, but now the buttons are off the header. They also do not resize when I shrink the page. Help is greatly appreciated. Thanks. The url is [http://tolitakeover.com](http://tolitakeover.com)

Here is html:

```
<header>
    <nav> 
        <ul>
            <li><a href="contact.html" class="button">Contact</a></li>
            <li><a href="" class="button">Blog</a></li>
            <li><a href="events.html" class="button">TBD</a></li>               
            <li><a href="affiliates.html" class="button">Affiliates</a></li>
            <li><a href="events.html" class="button">Events</a></li>
        </ul>
    </nav>
</header> 
```

Here is css:

```
nav{
   background:url('http://tolitakeover.com/images/toliheader.fw.png');
   background-size: 40% 100%;
   margin-left: 5%;
   width: 90%;
   height: 100%;
   background-repeat: no-repeat; 
   background-color:white;
}

nav ul{
   padding-top:20%;
   padding-right:3%;
   height:60%;
}

nav li{
    display:inline;
   float:right;
   padding-right:1%;
   padding-top:-50px;
}

nav ul li a,
   nav ul li a:visited{
   background-color: white;
   color: black;
   display:block;
}

nav ul li a:hover{
   text-decoration:none;
   background-color:white;
   color:black;
}

.button {
   display: inline-block;
   text-decoration: none;
   color: black;
   font-weight: bold;
   background-color: lightgray;
   padding: 5px 20px;
   margin-left:3%;
   margin-right:3%;
   font-size: 1.15em;
   border: 1px solid red;
   -webkit-border-radius: 5px;
   -moz-border-radius: 5px;
   border-radius: 5px;
   text-shadow: 0px -1px 0px rgba(0,0,0,.5);
   -webkit-box-shadow: 0px 6px 0px lightgray, 0px 3px 15px rgba(0,0,0,.4), inset 0px 1px 0px       rgba(255,255,255,.3), inset 0px 0px 3px rgba(255,255,255,.5);
   -moz-box-shadow: 0px 6px 0px lightgray, 0px 3px 15px rgba(0,0,0,.4), inset 0px 1px 0px rgba(255,255,255,.3), inset 0px 0px 3px rgba(255,255,255,.5);
   box-shadow: 0px 6px 0px lightgray, 0px 3px 15px rgba(0,0,0,.4), inset 0px 1px 0px rgba(255,255,255,.3), inset 0px 0px 3px rgba(255,255,255,.5);} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T03:04:02.087

如果你要走那条路，你会改用“clearfix”，从标题中清除导航类？

理想情况下，他应该在上面设置三个类，例如：#menu #container clearfix #navigation 这将允许他也控制他的徽标，因为现在它在#nav 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T02:40:37.727

你有很多事情要做。

问题，你从哪里得到这个样式表？这对你正在尝试做的事情来说是个坏消息。我什至不知道从哪里开始解释这个......

我建议您从头开始使用一个漂亮干净的响应模板，例如：

[http://www.initializr.com/](http://www.initializr.com/)

当您说“重新调整大小”页面时，您的意思是当它降级为移动设备或平板电脑时？你的 CSS 中没有这方面的规则。

另外，查看您的 CSS，我建议您阅读一下：[http ://css-tricks.com/the-difference-between-id-and-class/](http://css-tricks.com/the-difference-between-id-and-class/)

# c# - 用于 MMORPG 的 C# 服务器，异步线程安全

> ID：15015784
> 
> 赞同：0
> 
> 时间：2013-02-22T02:18:04.607
> 
> 标签：c#, asynchronous, thread-safety

如果我的 MMORPG 服务器有 1 个线程运行异步套接字和异步数据包处理程序，并且在该 1 个线程中我有一个包含游戏中所有实体的静态世界。

如果说异步数据包处理程序收到攻击消息，会导致任何线程问题，导致搜索世界中的实体以找出目标。

同时，静态 World Proc 方法增加了包含怪物实体的字典的大小，添加了额外的怪物。

如果这都在同一个线程上，服务器会爆炸吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T03:01:57.290

> 服务器会爆炸吗？

是的，您可能会遇到问题（“explode”），因为异步内容在不同的线程上运行（即使您没有显式创建该线程）并且它可能与您同时访问共享对象（世界）主线程。许多数据结构（包括字典）不是为这种情况设计的，可能会崩溃或返回错误的答案。

典型的方法是使用锁来保护您的共享对象：在修改它之前获取锁，进行任何修改，然后释放锁。这样，一次只有一个线程访问世界（及其字典），因此一切都保持一致。避免了爆炸。

另一种方法是切换到更同步的网络形式，例如避免完成处理程序，而是等待每个玩家的消息，然后对输入进行操作。这可以非常简单地完成，但简单的方法有缺点：任何一个慢速玩家都可以减慢整个过程。很遗憾，您可能不得不以一种或另一种方式处理一些复杂性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T02:33:07.063

如果我在一行中给出答案。服务器会爆炸。由于网络活动和游戏逻辑在同一个线程中。正如您所提到的，您将需要高网络使用率。

如果你看一下[F#](http://www.tryfsharp.org/) ，我真的很喜欢。它有你需要的所有东西。据我从问题中得到。很少有像集合更改这样的事情，并且默认情况下异步是语言。即便是[Nodejs](http://nodejs.org/)也值得一试。但同样，这一切都取决于要求。虽然我试图解释一些可以帮助你做出决定的关键词。

非阻塞：这意味着线程不会被事件阻塞。它不会等待函数等待另一个函数执行。但这并不意味着你不能阻止它。在任何情况下，它都是单线程。

Async：有点像这样。但是在 C# 5 中，异步带有关键字，因此您不必执行编程的线程部分。

并行处理：在游戏开发中并行处理很重要。现在，您可以使用多线程或只使用[TPL](http://msdn.microsoft.com/en-us/library/dd460717.aspx)。

对于基于 UI（有很多对象）的游戏，我强烈建议您分离处理线程和 UI 线程以改善用户体验。否则 FPS 会在您处理数据时下降。

让我知道是否需要任何进一步的信息。

如果您不关心它，服务器将不会关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T04:32:29.440

如果在同一个线程上，那么没有。如果您在单个线程上完成提到的所有工作，那么就没有问题。但是，如前所述，如果您正在跨线程访问“共享”对象实例，那么是的，将会出现问题，并且需要锁定（使用“lock(){...}”块）。

随着用户群的增加，如果对传入请求使用非阻塞事件模型，则必须密切关注生成的线程数或事件消息。

在一个不同但相关的注意事项上，请关注这个基于 C# 的 MMO 服务器（支持脚本）：[https](https://dreamspace.codeplex.com/) ://dreamspace.codeplex.com/ - 它可能很快就会对 MMO 游戏创建者有很大帮助（将支持 Construct 2 默认）。

# ios - controlling a marker's info window

> ID：15015785
> 
> 赞同：2
> 
> 时间：2013-02-22T02:18:08.517
> 
> 标签：ios, google-maps-sdk-ios

Does anyone have ideas of how to style the info window's text and background. They're the lollipops that show when you touch on a pin?

Also, I'm looking for a creative way to programmatically force the info window to display. Any suggestions?

Thanks...

p.s. Yay! It's here!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:36:57.010

`GMSMapView.h`的`GMSMapViewDelegate`：

```
/**
* Called when a marker is about to become selected, and provides an optional
* custom info window to use for that marker if this method returns a UIView.
* If you change this view after this method is called, those changes will not
* necessarily be reflected in the rendered version.
*
* The returned UIView must not have bounds greater than 500 points on either
* dimension.  As there is only one info window shown at any time, the returned
* view may be reused between other info windows.
*
* @return The custom info window for the specified marker, or nil for default
*/
- (UIView *)mapView:(GMSMapView *)mapView markerInfoWindow:(id<GMSMarker>)marker; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T21:22:39.353

谷歌的文档并没有给出这个明显的答案，因此扩展了上面@s12chung 的指导，这里是如何以编程方式使信息窗口可见（对于其他试图这样做的人）

```
GMSMarkerOptions *pin = [[GMSMarkerOptions alloc] init];
self.mapView.selectedMarker = [self.mapView addMarkerWithOptions:pin]; 
```

# sql - How to reference CLR UDTs when creating a table

> ID：15015787
> 
> 赞同：2
> 
> 时间：2013-02-22T02:18:16.350
> 
> 标签：sql, sql-server-2008, sqlclr

I have no idea why there is very little documentation on this so I'll ask here.

I have created some user defined data types and would like to use them when creating a table. However I have no idea what the syntax is for calling to them.

Yes I know it's best to STAY AWAY from them but I'm in a position where I am forced to work with them.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T02:23:10.150

您可以像使用内置类型一样使用用户定义类型 (UDT)。

*   [定义 UDT 表和列](http://msdn.microsoft.com/en-us/library/ms131076.aspx)

> **在表中创建 UDT 列没有特殊语法。您可以在列定义中使用 UDT 的名称，就好像它是一种内在 SQL Server 数据类型一样。**
> 
> 下面的 CREATE TABLE Transact-SQL 语句创建一个名为 Points 的表，其中包含一个名为 ID 的列，该列定义为一个 int 标识列和该表的主键。第二列名为 PointValue，数据类型为 Point。此示例中使用的模式名称是 dbo。请注意，您必须具有指定架构名称所需的权限。如果省略模式名称，则使用数据库用户的默认模式。
> 
> ```
> CREATE TABLE dbo.Points 
> (
>     ID int IDENTITY(1,1) PRIMARY KEY, 
>     PointValue Point
> ) 
> ```

*   [在 SQL Server 中注册用户定义的类型](http://msdn.microsoft.com/en-us/library/ms131079.aspx)

# visual-c++ - vc++ 64bit program crashes on a new operator when consume several GBs of memory

> ID：15015788
> 
> 赞同：0
> 
> 时间：2013-02-22T02:18:39.967
> 
> 标签：visual-c++, crash, 64-bit, new-operator

I have written a 64bit program which consumes a large bunk of memory. When it consumes several GB of memory, it causes an error on a new operator. But in fact there is still several GB of free memory on this machine to spend. And other program runs correctly with much more memory than this one. And I have enabled compilation option /Zm2000 and link option /LARGEADDRESSAWARE. What is the cause then?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T02:24:07.877

即使您还有几 GB 的空闲空间，您也必须记住，内存可能会变得*支离破碎*。如果没有可用于满足您的请求的*连续*块，则分配将失败并出现异常。

# java - 设计一个 Java 类以正确显示分数

> ID：15015789
> 
> 赞同：0
> 
> 时间：2013-02-22T02:18:46.747
> 
> 标签：java, fractions

我创建了一个分数类，它可以执行各种操作，例如加法、乘法、除法、减法、最大公分母等......

有一部分我迷路了。

我需要创建一个方法，在分母上返回分子的字符串版本，使用连字符将它们分开，我需要连字符等于分母的长度，并且分子要居中。

例如：

分数 3/4 将是 3，其下有一个连字符，而 4 在连字符下

像 5/50000 这样的东西将是 5 居中于 5 个连字符中的第 3 个之上，然后是连字符下的 50000。

为了计算我需要的连字符数，我想出了：

```
int hyphenLength = String.valueOf(this.denominator).length(); 
```

到目前为止，我唯一想做的就是在 String 中运行一个 for 循环，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T02:34:19.547

如果您只是问“如何根据 int 值创建 n 个连字符”，您可以考虑以下一些方法：

Java中没有直接的方法可以做到。您有一些方法可以做，最简单的方法是如您所说，通过 for 循环：

```
for (int i = 0; i < hyphenLength; ++i) {
  resultStringBuilder.append('-');
} 
```

另一种方法是使用 Arrays.fill()：

```
char[] hyphenArray = new char[hyphenLength];
Arrays.fill(hyphenArray, '-');
String resultString = new String(hyphenArray); 
```

如果您可以使用 Apache Commons Langs，您可以使用 StringUtils.leftPad() 或 rightPad()：

```
String resultString = StringUtils.leftPad("myData", hyphenLength, '-'); 
```

# javascript - Why does boolean true have toJSON method in IE?

> ID：15015792
> 
> 赞同：2
> 
> 时间：2013-02-22T02:19:19.990
> 
> 标签：javascript, internet-explorer, internet-explorer-8, cross-browser, jquery-ui-widget

This is a weird IE quirk. Here are the steps:

1.  Go to [msn.com](http://msn.com) in Internet Explorer 8
2.  Pull up dev tools
3.  Switch Browser Mode to "IE8 Compat View"
4.  Switch Document Mode to "IE7 Standards"
5.  Switch to Script tab
6.  run the following script: `true.toJSON()`

it returns `true`. No other browser does this. It's giving me issues because it's causing the tooltip widget of jQueryUI to fail for IE because at some point it passes a boolean value of `true` to `$.isEmptyObject()`. Normally passing in `true` would just return `true` but since `true` now has a method associated with it (`toJSON`) it is returning `false` and breaking the widget.

I noticed there are some sites (like Google) that you can try to do the same test and `true.toJSON()` just breaks without returning anything. What is this weird `toJSON` method and how do I get rid of it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T02:33:35.370

From [the `jQuery.isEmptyObject()` documentation](http://api.jquery.com/jQuery.isEmptyObject/):

> The argument should always be a plain JavaScript Object as other types of object (DOM elements, primitive strings/numbers, host objects) may not give consistent results across browsers.

In other words, fix the tooltip widget.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T02:23:03.433

`toJSON`是一种方法，如果在对象上定义，则指定对其进行操作的方式`JSON.stringify`。查看[MDN](https://developer.mozilla.org/en/docs/JSON#toJSON%28%29_method)了解更多详情。

# ios6 - 在 iAd 中使用 ios6 约束

> ID：15015794
> 
> 赞同：1
> 
> 时间：2013-02-22T02:19:25.347
> 
> 标签：ios6, iad, autolayout

我想使用约束来布局我的视图......它应该看起来像这样：

在纵向模式下： ![在此处输入图像描述](../Images/cef080857cc0637a6ee9a330ae955053.png)

在横向模式下： ![在此处输入图像描述](../Images/8298b33745b095848bc74505cd4bfa78.png)

到目前为止，我的代码是为了约束：

```
[self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[profilHeader]|"
                                                                      options:0
                                                                      metrics:nil
                                                                        views:NSDictionaryOfVariableBindings(profilHeader)]];
    [self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[_ad]|"
                                                                      options:0
                                                                      metrics:nil
                                                                        views:NSDictionaryOfVariableBindings(_ad)]];
    [self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[_tableView]|"
                                                                      options:0
                                                                      metrics:nil
                                                                        views:NSDictionaryOfVariableBindings(_tableView)]];
    [self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|-0-[profilHeader(100)][_ad(50)][_tableView]-0-|"
                                                                      options:0
                                                                      metrics:nil
                                                                        views:NSDictionaryOfVariableBindings(profilHeader, _ad, _tableView)]]; 
```

如果我不将 (50) 放在 _ad 旁边，则 _tableView 将超过它。

当然，除了 _ad 的 (50) 之外，当横向显示时，它不会将 tableView 向上移动 18px （因为 Ad 将是 480x32）...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T04:23:32.777

当方向改变时，您需要设置“广告”的高度：

```
- (void)updateViewConstraints{
  [super updateViewConstraints];

  [self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[_profilHeader]|"
                                                                    options:0
                                                                    metrics:nil
                                                                      views:NSDictionaryOfVariableBindings(_profilHeader)]];
  [self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[_ad]|"
                                                                    options:0
                                                                    metrics:nil
                                                                      views:NSDictionaryOfVariableBindings(_ad)]];
  [self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[_tableView]|"
                                                                    options:0
                                                                    metrics:nil
                                                                      views:NSDictionaryOfVariableBindings(_tableView)]];
  [self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|-0-[_profilHeader(100)][_ad][_tableView]-0-|"
                                                                    options:0
                                                                    metrics:nil
                                                                      views:NSDictionaryOfVariableBindings(_profilHeader, _ad, _tableView)]];

  //remove the existing constraint
  [self.view removeConstraint:self.heightConstraint];
  //set the height according to orientation
  if(UIInterfaceOrientationIsPortrait(self.interfaceOrientation)){
    self.heightConstraint=[NSLayoutConstraint constraintWithItem:_ad attribute:NSLayoutAttributeHeight relatedBy:0 toItem:nil attribute:0 multiplier:1.0 constant:50];
  }
  //landscape
  else{
    self.heightConstraint=[NSLayoutConstraint constraintWithItem:_ad attribute:NSLayoutAttributeHeight relatedBy:0 toItem:nil attribute:0 multiplier:1.0 constant:32];
  }
  [self.view addConstraint:self.heightConstraint];
} 
```

# java - How to refactor procedural start-up code?

> ID：15015795
> 
> 赞同：2
> 
> 时间：2013-02-22T02:19:27.993
> 
> 标签：java, android, refactoring

I have a class (Android Activity) which handles start-up of my application. The application has some pretty complex start-up rules. Right now it looks like a bunch of spaghetti and I'm looking for strategies for refactoring it.

It's honestly such a mess I'm having problems hacking it down to provides pseudo code. In general there are some rules for start-up that are basically codified in logic:

Steps:

1.  Check for error on last exit and flush local cache if necessary
2.  Download settings file
3.  Parse settings and save settings to local native format
4.  Using the values in settings, do a bunch of 'house keeping'
5.  Using a value in settings, download core data component A
6.  Parse component A and load up local cache

During this logic, its also updating the user interface. All of this is handled in a zig-zagging, single monolithic class. Its very long, its got a bunch of dependencies, the logic is very hard to follow and it seems to touch way too many parts of the application.

Is there a strategy or framework that can be used to break up procedural start-up code?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T02:38:12.740

嗯。根据您的步骤，我看到了各种不同的“担忧”：

1.  读取和保存设置。
2.  从服务器下载设置和组件（不确定这里的“组件”是什么）。
3.  读取和实例化组件。
4.  刷新和读取缓存。
5.  家政服务（不太确定这一切意味着什么）。
6.  UI 更新（也不确定这需要什么）。

您可以尝试按照上述方式将代码拆分为各种对象，例如：

1.  设置阅读器
2.  服务器通信管理器 (?)
3.  组件阅读器
4.  缓存

不确定 5 和 6，因为我没有太多的事情要做。

关于框架，有各种各样的框架，比如前面提到的 Roboguice，可以帮助进行依赖注入。这些可能会派上用场，或者手动执行此操作可能更容易。不过，我认为在考虑依赖注入之前，您需要解开代码。依赖注入框架所做的只是为您初始化对象——您必须首先确保对象有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T02:29:17.080

没有更多细节，我能想到的唯一建议是将结构良好的功能背后的各个步骤分组，这些功能只做一件事和一件事。

您的 6 个步骤看起来是您的 init 函数应该具有的 6 个函数的良好开端。如果#2 是同步的（我对此表示怀疑），我会将#2、#3 合并到一个`getSettings`函数中。

# c - xcode LLVM 中的大小优化

> ID：15015796
> 
> 赞同：1
> 
> 时间：2013-02-22T02:20:01.037
> 
> 标签：c, xcode, gcc, compiler-construction, llvm

我正在 os x 10.7.5 上用 xcode 4.5.1 编译一个 C 库。

使用 xcode LLVM 编译的库的大小比我使用普通 gcc 编译它时要大得多，makefile 传递相同的优化参数 -Os（没有 xcode 的终端）。GCC 生成 130K 二进制文件，而苹果 LLVM 生成 300K 二进制文件。相同的源代码相同的编译器选项。

无论我查看二进制文件的 iphone 模拟器版本、arm7 版本还是 arm 7s 版本，在使用 xcode 编译时，我仍然会得到大约 300K 的二进制文件。我在 .a 和 .o 对象上使用了 nm ，其中没有不需要的额外符号。

我记得我的库使用运行 gcc 的早期版本的 xcode 编译到 170K。

我还没有读到苹果 LLVM/clang 编译器产生更大的可执行文件的任何地方，所以我的猜测是我可能没有正确使用 xcode 中的优化设置。例如，无论我在 Xcode 中使用设置 -Os 还是 -O0，我都会得到同样大 300K 的二进制大小。更令人困惑的是，我的调试二进制文件比我的发布版本小。调试有 -O0 设置。

显然我错过了一些东西。

欢迎任何减少我的二进制大小的建议。

谢谢，

爸爸

# ruby-on-rails - Rails 在 HAML 中添加空格

> ID：15015800
> 
> 赞同：0
> 
> 时间：2013-02-22T02:20:21.663
> 
> 标签：ruby-on-rails, form-helpers

好的，我在下面遇到了这类问题，每次我所做的只是让 haml 不清理输出，但这不起作用。我尝试过使用原始的、安全的 html，但这些都没有帮助。

这就是我所说的

```
def call_form 
  "SOME STRING #{"LOL"} SOME OTHER STRING"
end 
```

在我看来，我使用`!= call_form`

这是 HTML 中的输出：

```
"
      SOME STRING LOL SOME OTHER STRING
      " 
```

我如何摆脱 Rails 不断添加的所有空白

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T01:48:15.983

我的表格有问题。我忘记在我的 HTML 中关闭一个元素，这就是为什么实际上添加空间的是浏览器。无论如何，感谢您的帮助。我很感激。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T04:45:43.770

要删除所有空格，您可以使用[strip](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-strip)：

```
1.9.3p194 :001 > call_form = "
1.9.3p194 :002">       SOME STRING LOL SOME OTHER STRING
1.9.3p194 :003">       "
 => "\n      SOME STRING LOL SOME OTHER STRING\n      " 
1.9.3p194 :004 > call_form.strip
 => "SOME STRING LOL SOME OTHER STRING" 
```

# angularjs - AngularJS $watch 莫名其妙地改变观察值的值

> ID：15015801
> 
> 赞同：0
> 
> 时间：2013-02-22T02:20:26.340
> 
> 标签：angularjs, watch, directive

我正在尝试实现 and 的动画`ng-show`版本`ng-hide`；我最初尝试使用`jQueryUI.toggle('slide', …)`，但由于`$watch`多次触发，我的元素正在切换，然后立即切换（有时不止一次）。但我在 AngularJS 的 github 问题中看到这是 $watch 的预期行为（脏检查）。

所以我想，好吧，这个小效果——你该死，我会明确地显示或隐藏而不是简单的切换：我把它分解来检查 $watch 的值，`newValue`如下所示：

```
scope.$watch(condition, function myShowHideAction(newValue,oldValue) {
    if ( newValue !== oldValue ) {
        if (newValue) {
            elm.show("slide", { direction: direction }, "slow");
        } else {
            elm.hide("slide", { direction: direction }, "slow");
        }
    }
} 
```

点燃它，我看到了什么？切换！

在输入一些控制台日志后，我发现在 $watch 的循环期间我的条件值正在以某种方式发生变化（它迭代了 6 次而不是仅仅一次，但这不应该在这里也不应该在那里）。`newValue`但是，实际范围参数的值不会像's一样在中途改变（因为它不应该改变） 。

到底他妈发生了什么？

[普朗克](http://plnkr.co/edit/0CMdW3?p=preview)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T07:30:14.967

发生这种情况的原因是因为您的所有信息框共享相同的范围。如果您`console.log(scope)`在 mySlide 指令链接函数中添加一个语句，您会看到它在相同范围内创建了多次。因此，您在同一范围内有多个针对相同条件的手表。

恐怕您的代码不是最容易遵循的，但问题似乎在第 87 行的 my-map.js 中。`$compile(elm.contents())(scope);`您可能应该`$compile(elm.contents())(scope.$new());`为该信息框创建一个隔离范围，而不是这样做。

# java - Android将自定义的alertview转换为位图？

> ID：15015808
> 
> 赞同：0
> 
> 时间：2013-02-22T02:21:27.013
> 
> 标签：java, android

我想拍摄自定义警报视图的图像。我已经使用 buildDrawingCache 将 LinearLayout 转换为位图并且工作正常，但是当我尝试将自定义警报视图（使用 RelativeLayout）转换为位图时，它给了我一个错误。

//将视图转换为图像

```
private String getLayoutBitmap() {
        RelativeLayout view = (RelativeLayout) findViewById(R.id.glayer);
        view.setDrawingCacheEnabled(true);
        view.buildDrawingCache();
        Bitmap bikeBm = view.getDrawingCache();

        File filePath = getFileStreamPath("twitterimage1.jpg");
        // delete saved image
        if (new File(filePath.toString()).delete()) {
            Log.i("INTERNAL_STORAGE_IMG_FILE", "deleted");
        }

        try {
            // Use the compress method on the Bitmap object to write image to
            // the OutputStream
            FileOutputStream fos = openFileOutput("twitterimage1.jpg",
                    Context.MODE_WORLD_READABLE);

            // Writing the bitmap to the output stream
            bikeBm.compress(Bitmap.CompressFormat.JPEG, 100, fos);
            fos.close();
        } catch (Exception e) {
            Log.e("saveToInternalStorage()", e.getMessage());
        }
        return filePath.toString();
    } 
```

//例外

```
02-22 11:18:37.758: E/AndroidRuntime(21822): FATAL EXCEPTION: main
02-22 11:18:37.758: E/AndroidRuntime(21822): java.lang.NullPointerException
02-22 11:18:37.758: E/AndroidRuntime(21822):    at com.bike.app.ScoreClass.getLayoutBitmap(ScoreClass.java:435)
02-22 11:18:37.758: E/AndroidRuntime(21822):    at com.bike.app.ScoreClass.initShareIntent(ScoreClass.java:475)
02-22 11:18:37.758: E/AndroidRuntime(21822):    at com.bike.app.ScoreClass.access$0(ScoreClass.java:460)
02-22 11:18:37.758: E/AndroidRuntime(21822):    at com.bike.app.ScoreClass$2.onClick(ScoreClass.java:156)
02-22 11:18:37.758: E/AndroidRuntime(21822):    at android.view.View.performClick(View.java:3620)
02-22 11:18:37.758: E/AndroidRuntime(21822):    at android.view.View$PerformClick.run(View.java:14292)
02-22 11:18:37.758: E/AndroidRuntime(21822):    at android.os.Handler.handleCallback(Handler.java:605)
02-22 11:18:37.758: E/AndroidRuntime(21822):    at android.os.Handler.dispatchMessage(Handler.java:92)
02-22 11:18:37.758: E/AndroidRuntime(21822):    at android.os.Looper.loop(Looper.java:137)
02-22 11:18:37.758: E/AndroidRuntime(21822):    at android.app.ActivityThread.main(ActivityThread.java:4507)
02-22 11:18:37.758: E/AndroidRuntime(21822):    at java.lang.reflect.Method.invokeNative(Native Method)
02-22 11:18:37.758: E/AndroidRuntime(21822):    at java.lang.reflect.Method.invoke(Method.java:511)
02-22 11:18:37.758: E/AndroidRuntime(21822):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
02-22 11:18:37.758: E/AndroidRuntime(21822):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
02-22 11:18:37.758: E/AndroidRuntime(21822):    at dalvik.system.NativeStart.main(Native Method) 
```

# bash - 浮点导致 Bash 整数除法

> ID：15015809
> 
> 赞同：55
> 
> 时间：2013-02-22T02:21:31.990
> 
> 标签：bash, bc

我的服务器上有一个备份脚本，它执行备份的 cron 作业，并向我发送备份文件的摘要，包括新备份文件的大小。作为脚本的一部分，我想将文件的最终大小除以 (1024^3) 以从文件大小（以字节为单位）中获得以 GB 为单位的文件大小。

由于 bash 没有浮点计算，我正在尝试使用管道来 bc 来获得结果，但是我对基本示例感到困惑。

我试图让 Pi 的值达到一定的比例，但是，

即使以下工作：

```
~ #bc -l
bc 1.06.95
Copyright 1991-1994, 1997, 1998, 2000, 2004, 2006 Free Software Foundation, Inc.
This is free software with ABSOLUTELY NO WARRANTY.
For details type `warranty'.
4/3
1.33333333333333333333
22/7
3.14285714285714285714
q
0
quit 
```

非交互式版本不起作用：

```
#echo $(( 22/7 )) | bc
3 
```

这有效：

```
#echo '22/7' | bc -l
3.14285714285714285714 
```

但我需要使用变量。因此，以下内容不起作用：

```
#a=22 ; b=7
#echo $(( a/b )) | bc -l
3 
```

我显然在 Bash 中使用变量的语法中遗漏了一些东西，并且可以在我误解的内容上使用一些“指针”。

正如 DigitalRoss 所说，我可以使用以下内容：

```
#echo $a / $b | bc -l
3.14285714285714285714 
```

但是我不能使用复杂的表达式，例如：

```
#echo $a / (( $b-34 )) | bc -l
-bash: syntax error near unexpected token `('
#echo $a / (( b-34 )) | bc -l
-bash: syntax error near unexpected token `('
#echo $a / (( b-34 )) | bc -l
-bash: syntax error near unexpected token `(' 
```

有人可以给我一个正确的语法来获得具有复杂算术表达式的浮点结果吗？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-02-22T02:35:43.403

Just double-quote (`"`) the expression:

```
echo "$a / ( $b - 34 )" | bc -l 
```

Then bash will expand the `$` variables and ignore everything else and `bc` will see an expression with parentheses:

```
$ a=22
$ b=7
$ echo "$a / ( $b - 34 )" 
22 / ( 7 - 34 )

$ echo "$a / ( $b - 34 )" | bc -l
-.81481481481481481481 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-04-07T23:36:43.950

请注意，您`echo $(( 22/7 )) | bc -l`实际上使 bash 计算 22/7，然后将结果发送到 bc。因此，整数输出不是 bc 的结果，而只是提供给 bc 的输入。

尝试`echo $(( 22/7 ))`不通过管道将其连接到 bc，您会看到。

# excel - 循环并选择下一个单元格excel宏

> ID：15015815
> 
> 赞同：0
> 
> 时间：2013-02-22T02:22:34.953
> 
> 标签：excel, vba

您好，希望一切都好:) 无法弄清楚如何循环和选择下一个单元格，因此当 h3:z3 范围内的单元格为空时，它将停止 :)

它正在做的是从 h3 中选择值粘贴到 b3 运行另一个宏，该宏在 e3 中给出一个订单号，然后将其复制并粘贴到 h4 中，然后它将转到 I3 中的下一个单元格粘贴到 b3 中的下一个单元格从 e3 复制结果并粘贴到 I4 并做同样的事情

谢谢

```
For Each cell In Range("H3:Z3")

If IsEmpty(cell.Value) Then Exit For
'select ammount and place in lookup
Range("H3").Select
Selection.Copy
Range("B3").Select
Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
    :=False, Transpose:=False

' fill in order numbers
bulkON_Click

'select order and past under postcode
Range("E3").Select
Application.CutCopyMode = False
Application.CutCopyMode = False
Selection.Copy
Range("H4").Select
ActiveSheet.Paste

Loop 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T03:44:01.617

我可能会在此代码中更改很多内容。这应该让你开始。

对于初学者来说，`For`循环需要一个`Next`语句，而不是 a `Loop`(用于`Do`块。此外，您应该不惜一切代价避免复制/粘贴，以支持将值直接写入目标单元格。

我假设单元格“B3”和“E3”是恒定的，并且您正在迭代 H3:Z3 中的单元格并计算一些值以放入 H4:Z4 中的相应单元格中。

```
For Each Cell In Range("H3:Z3")

    If Cell.Value = vbNullString Then Exit For
    'select ammount and place in lookup
    Range("B3").Value = Cell.Value  '<< no need to "copy & paste", just write the value directly
    ' fill in order numbers
    bulkON_Click

    'insert the value under postcode
    ' this OFFSET refers to the cell 1 row below the "Cell"
    Cell.Offset(1, 0).Value = Range("E3").Value

Next 
```

# c - 使用 OpenMP 进行数值积分逼近

> ID：15015818
> 
> 赞同：1
> 
> 时间：2013-02-22T02:22:54.020
> 
> 标签：c, multithreading, openmp

我有一些 C OpenMP 代码，它使用中点规则来近似 sin(x)+1 的积分。当我有一个或两个线程时，代码可以工作，但是当我超过两个线程时，近似值是不正确的。下面是我的代码。

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <omp.h>
int main(){
int numPartitions = 10;
double interval = 0, integral = 0, a = 0, b = 0;
int i = 0, j = 0, tid=0; 
interval=5*M_PI/(double)numPartitions;
double start = omp_get_wtime();
#pragma omp parallel num_threads(4)
    {
    #pragma omp for firstprivate(b,a,tid) reduction(+:integral)
            for (i = 0; i < numPartitions; i++) 
            {
                tid=omp_get_thread_num();
                b = a;
                a = a+interval;
                integral += ((sin(((b+a)/2))+1)*(interval));   
            }
     }
double end = omp_get_wtime();
printf("Estimate of integral is: %10.8lf\n", integral);
printf("Time=%lf\n", end-start);
return 0; 
```

}

任何关于我做错了什么的见解将不胜感激。-谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:01:59.683

使用您的代码，您需要 b 和 a 来为所有线程获取正确的值。

> b = i * 间隔；
> 
> a = b + 区间；

此外，您在计算积分时引入了额外的翻牌

> **积分 += ((sin(((b+a)/2))+1)*(interval));**
> 
> 改为积分 += sin((b+a)/2) + 1.0;
> 
> 在 for 循环之后
> 
> 积分 *= 区间；

# ios - 在iOS中，运行循环和显示刷新之间有关系吗？

> ID：15015821
> 
> 赞同：2
> 
> 时间：2013-02-22T02:23:14.337
> 
> 标签：ios, objective-c, cocoa-touch

在iOS中，运行循环和显示刷新之间有关系吗？如果有怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T02:45:30.557

Apple 的[*iOS 视图编程指南*/ 视图和窗口架构 / 视图架构基础 / 视图绘图周期](http://developer.apple.com/library/ios/documentation/windowsviews/conceptual/viewpg_iphoneos/WindowsandViews/WindowsandViews.html#//apple_ref/doc/uid/TP40009503-CH2-SW10)说：

> 当您的视图内容发生变化时，您不会直接重绘这些更改。相反，您使用`setNeedsDisplay`or`setNeedsDisplayInRect:`方法使视图无效。这些方法告诉系统视图的内容发生了变化，下次有机会需要重新绘制。**在启动任何绘图操作之前，系统会一直等到当前运行循环结束。**此延迟使您有机会一次性使多个视图无效、从层次结构中添加或删除视图、隐藏视图、调整视图大小和重新定位视图。您所做的所有更改都会同时反映。

（强调补充。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T02:50:44.487

Apple 有一个非常好的 WWDC 2012 视频，详细描述了当前 CATransaction 提交和绘制发生以及动画开始时每个运行循环结束时发生的情况。您可能还喜欢阅读我书中对“重绘时刻”的技术性较低的解释：

[http://www.aeth.com/iOSBook/ch17.html#_drawing_animation_and_threading](http://www.apeth.com/iOSBook/ch17.html#_drawing_animation_and_threading)

# android-spinner - 无法在 Android 的 TableRow 中更改 Spinner 的宽度

> ID：15015822
> 
> 赞同：1
> 
> 时间：2013-02-22T02:23:19.273
> 
> 标签：android-spinner, android-tablelayout

我在 TableRow 中放置了一个 TextView 和一个 Spinner，但我无法更改 Spinner 的宽度。当我把它放在 RelativeLayout 中时，一切正常，我可以设置自定义宽度、wrap_content 或 match_parent 但是当我把它放在 TableRow 中时，无论我做什么，它都有一个恒定的宽度。谁能告诉我如何使它成为 TableRow 中的 match_parent？

```
<TableLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/logo" >

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/text"
            android:textSize="18sp" />

        <Spinner
            android:id="@+id/spinner1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:drawSelectorOnTop="true"
            android:entries="@array/items"
            android:prompt="@string/prompt"
            android:textSize="18sp" />
    </TableRow>
</TableLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-02T17:48:29.830

对于微调器：

安卓：layout_weight="1"

这对我有帮助。

# javascript - 在 for 循环中创建动态变量以访问数组

> ID：15015824
> 
> 赞同：0
> 
> 时间：2013-02-22T02:23:32.283
> 
> 标签：javascript

我有多个具有相同前缀名称的数组。

```
 var region1 = ['01','02','03','04','05','06','07'];
    var region2 = ['08','09','11','12'];
    var region3 = ['13'];
    var region4 = ['14','22'];
    var region5 = ['10','15','16','17','18','19','20'];
    var region6 = ['21','23','24'];
    var region7 = ['25','26','27','28','29','30'];
    var region8 = ['31','33','36','37','38','39'];
    var region9 = ['32','34','35','40','41','42','43','44','45','46','47'];
    var prefecture = "33"; 
```

根据县值我想显示区域

```
 if(region1.indexOf(prefecture) != -1){
        $('.region1').show();
        $('a.region1').addClass('regionSelect');
    }
    else if(region2.indexOf(prefecture) != -1){
        $('.region2').show();
        $('a.region2').addClass('regionSelect');
    }
    else if(region3.indexOf(prefecture) != -1){
        $('.region3').show();
        $('a.region3').addClass('regionSelect');
    }
    else if(region4.indexOf(prefecture) != -1){
        $('.region4').show();
        $('a.region4').addClass('regionSelect');
    }
    else if(region5.indexOf(prefecture) != -1){
        $('.region5').show();
        $('a.region5').addClass('regionSelect');
    }
    else if(region6.indexOf(prefecture) != -1){
        $('.region6').show();
        $('a.region6').addClass('regionSelect');
    }
    else if(region7.indexOf(prefecture) != -1){
        $('.region7').show();
        $('a.region7').addClass('regionSelect');
    }
    else if(region8.indexOf(prefecture) != -1){
        $('.region8').show();
        $('a.region8').addClass('regionSelect');
    } 
```

这工作正常

但是我尝试这样来最小化代码。

```
 for(var i=1; i<=9; i++){
        if('region'+i.indexOf(prefecture) != -1){
            $('.region'+i).show();
                $('.region'+i).addClass('regionSelect');
        }
    } 
```

它说 i.indexOf 没有定义

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T02:27:48.477

使用数组而不是变量。

```
var regions = [
 ['01','02','03','04','05','06','07'],
 ['08','09','11','12'],
 // and so on
] 
```

然后按索引选择

```
for(var i=0; i<9; i++){
    if(regions[i].indexOf(prefecture) != -1){
        $('.region'+(i+1)).show()
                          .addClass('regionSelect');
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T02:28:23.287

我在这里看到了很多问题，当已经有其他出色的数据结构（例如数组和对象）可用于服务于这个确切目的时，人们尝试使用“动态变量”名称。

```
var region = {
    "1": ['01','02','03','04','05','06','07'],
    "2": ['08','09','11','12'],
    "3": ['13'],
    /* snip */
}; 
```

* * *

```
for(var i=1; i<=9; i++){
    if(region[i].indexOf(prefecture) != -1){
        $('.region'+i).show();
            $('.region'+i).addClass('regionSelect');
    }
} 
```

如果您绝对必须使用动态变量名，则不能使用`var`. 如果它们是全局的（on `window`），您可以这样做，然后通过`window['region' + i]`. *我根本*不推荐这个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T02:28:12.143

您需要使用语法来引用变量附加到的对象来引用它的子对象，如果它们在全局范围内`[]`，您可以尝试...`window`

```
for(var i=1; i<=9; i++){
    if(window['region'+i].indexOf(prefecture) != -1){
        $('.region'+i).show();
            $('.region'+i).addClass('regionSelect');
    }
} 
```

否则，我希望`this['region'+i].indexOf etc...`也能工作

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-22T02:26:22.980

优先级问题。

你需要写

```
('region'+i).indexOf(prefecture) 
```

否则理解为

```
'region'+(i.indexOf(prefecture)) 
```

正如下面的 FelixKling 所指出的，这可以修复语法错误，但不会起作用，因为您会在字符串`"region1"`等中寻找县。检查其他答案以了解如何真正编码。

# android - 在 Fragment 中吐司，应该使用 getActivity() 还是 getAcitivity().getApplicationContext()？

> ID：15015828
> 
> 赞同：8
> 
> 时间：2013-02-22T02:24:01.450
> 
> 标签：android

对不起我的新手问题，我只是找不到谷歌和stackoverflow的答案..我刚开始学习android，希望可以为android知识建立一个良好的基础。我想知道如果我在片段中创建 toast.maketext 应该在下面使用哪个。getActivity() 还是 getAcitivity().getApplicationContext()？

我都试过了，效果很好。。

```
btn1.setOnClickListener(new View.OnClickListener() {            
@Override
public void onClick(View v) {
 Toast.makeText(getActivity(), "hello",Toast.LENGTH_LONG).show();
 Toast.makeText(getActivity().getApplicationContext(),"Hello",Toast.LENGTH_LONG).show();
}
}); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-22T02:45:57.420

对于与用户界面相关的调用，请使用 Activity 上下文。

请参阅 Reto Meier 的解释： [https ://stackoverflow.com/a/987503/534471](https://stackoverflow.com/a/987503/534471)

# php - 如何在php中实现循环并计算值

> ID：15015831
> 
> 赞同：0
> 
> 时间：2013-02-22T02:24:34.593
> 
> 标签：php, arrays, loops

作为一个 php 初学者，我遇到了在 php 中计算数组元素的问题

```
$effect=array("a"=>array(1,2),"b"=>array(1,2),"c"=>array(1,2)); 
```

我只想把结果变成这样

```
$effect['a'][0]=$effect['a'][0]/$effect['a'][1];
$effect['b'][0]=$effect['b'][0]/$effect['b'][1]; 
$effect['c'][0]=$effect['c'][0]/$effect['c'][1]; 
```

除了一一做这个，如何用**foreach**或其他循环方式 做这个计算

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T02:30:45.937

你的数组语法有点不对劲。应该是`$effect['a'][0]`。

循环是微不足道的，并且[`foreach`](http://php.net/foreach)是正确的想法。
您可以使用它来遍历所有字母：

```
 foreach ($effect as $letter => $numbers) {

     ...

 } 
```

然后将您的分配/除法行放入循环中，用变量替换固定等`'a'`。`'b'``$letter`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T02:32:54.883

You need something like this?

```
foreach ($effect as $key => $val)
{

    $results[$key] = $val[0] / $val[1];

}

print_r($results); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T02:36:23.367

Also one counter-intuitive thing in PHP, is that arrays are passed by value by default. You can use & to get a reference to the array

```
$effects =array("a"=>array(1,2),"b"=>array(1,2),"c"=>array(1,2));
foreach ( $effects as $key => &$effect ) {
   $effect[0] = $effect[0]/$effect[1];
   unset($effect);
}
print_r( $effects ); 
```

# vb.net - 如何杀死 CMD 进程？

> ID：15015838
> 
> 赞同：-1
> 
> 时间：2013-02-22T02:25:18.173
> 
> 标签：vb.net, exit, kill

这是我为我的应用程序制作的简单代码行。基本上`Button_2`运行“batchfile.bat”。现在，我很好奇如何`Button_1`结束“batchfile.bat”或关闭 CMD，因为这就是“batchfile.bat”运行的原因。任何帮助表示赞赏，谢谢。

```
Public Class Form1 
    Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) 
        Handles Button2.Click 
        Process.Start("C:\batchfile.bat") 
    End Sub

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs)
        Handles Button1.Click
        (MY DESIRED CODE TO KILL CMD HERE) 
    End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:08:06.800

如有疑问，请阅读[文档](http://msdn.microsoft.com/en-us/library/system.diagnostics.process_methods%28v=vs.71%29.aspx)。您可能正在寻找[`Kill`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.kill%28v=vs.71%29.aspx)方法。

# time - 如何检查现在时间是否介于 AutoIt 中的给定时间之间

> ID：15015841
> 
> 赞同：3
> 
> 时间：2013-02-22T02:25:50.743
> 
> 标签：time, autoit

我正在尝试检查`Now`时间是否介于 13:00 和 17:00 之间。我认为该`_Datediff`功能（使用`_dateadd()`and `_NowTimeCalc()`）不会起作用。

[AutoIt](http://en.wikipedia.org/wiki/AutoIt)中是否有一些我缺少的库函数？还是我必须编写一个手动函数比较`@Hour`and `@min`？

我正在做这样的事情：

```
Func CheckTime($sStart, $sEnd)
    $s = StringSplit($sStart, ":")
    $e = StringSplit($sEnd, ":")
    $s[1] = Int($s[1])
    $s[2] = Int($s[2])
    $e[1] = Int($e[1])
    $e[2] = Int($e[2])
    $result = False

    If $s[0] <= 0 And $e <= 0 Then
        ConsoleWrite("Wrong Time Format")
        Exit
    EndIf

    If $s[1] <= @HOUR And $e[1] >= @HOUR Then
        If @HOUR >= $s[1] And @MIN > $s[2] Then
            If @HOUR <= $e[1] And @MIN < $e[2] Then
                $result = True
            EndIf
        EndIf
    EndIf
    Return $result
EndFunc  ; ==>CheckTime 
```

现在开始时间<结束时间时工作正常，但我正在寻找的是一些好的方法而不是手动检查。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T13:58:17.783

使用标准用户定义函数 (UDF)，您可以尝试使用以下内容：

```
#region    ;************ Includes ************
#include <Array.au3>
#include <Date.au3>
#endregion    ;************ Includes ************

ConsoleWrite(_timeBetween(@HOUR & ':' & @MIN, '10:05', '12:09'))

Func _timeBetween($cTime, $sTime, $eTime)
    If Not _DateIsValid('2000/01/01 ' & $cTime) Then Return -1
    If Not _DateIsValid('2000/01/01 ' & $sTime) Then Return -2
    If Not _DateIsValid('2000/01/01 ' & $eTime) Then Return -3

    ;~  ConsoleWrite(_DateDiff('s', '2000/01/01 ' & $cTime & ':00', '2000/01/01 ' & $sTime & ':00') & @CRLF)
    ;~  ConsoleWrite(_DateDiff('s', '2000/01/01 ' & $cTime & ':00', '2000/01/01 ' & $eTime & ':00') & @CRLF)

    If _DateDiff('s', '2000/01/01 ' & $cTime & ':00', '2000/01/01 ' & $sTime & ':00') < 0 And _
       _DateDiff('s', '2000/01/01 ' & $cTime & ':00', '2000/01/01 ' & $eTime & ':00') > 0 Then

        Return 1
    Else
        Return 0
    EndIf

EndFunc  ; ==>_timeBetween 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-18T20:24:08.913

一个对我有用的更简单的版本 - 只使用 hh:mm 格式的字符串比较

```
#include <Date.au3>

Func _timeBetween( $sTime, $eTime)
    Return (_NowTime(4) < $eTime) And (_NowTime(4) > $eTime)
EndFunc  ; ==>_timeBetween

MsgBox(0, "daytime","is day = " & _timeBetween("08:00"."23:00") ) 
```

# css - 理解 div 和 CSS

> ID：15015842
> 
> 赞同：1
> 
> 时间：2013-02-22T02:25:58.833
> 
> 标签：css, html

我想如果你有一个css height:100% 的div，那么任何嵌套在其中的div 只会占用其父div 的空间。情况似乎并非如此。

我正在尝试在我的 Flash 游戏的网页上添加页眉和页脚。我不想有任何垂直滚动，内容应该占据整个页面。我有一个div格式如下

```
<div id="wrapper">
    <div id="header"></div>
    <div id="swfcontent"></div>
    <div id="footer"></div>
</div> 
```

我让包装器有 100% 的高度，然后我让页眉有 3% 的高度，swfcontent 的 95% 的高度和页脚的 2% 的高度。这可行，但不希望有一个随浏览器大小缩放的标题。它会使我的标志缩放并被扭曲。

我想做的是让页眉和页脚的静态像素大小为 20 和 10 像素。然后 swf 将占用所有剩余空间，即 100%。但是，这会使页面增长并具有垂直缩放。

如何将页面设置为具有 20 像素的页眉、10 像素的页脚和占用所有剩余空间且没有垂直滚动的 swf。如果浏览器被缩放，这当然必须仍然有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T02:28:36.560

默认情况下 a `<div>`is `position:static`，它不会建立新的定位上下文。子元素的所有宽度、高度和位置都与 div 本身无关，而是与当前定位的父元素相关。

要使您的 div 建立新的坐标系，请将其设置为`position:relative`or`position:fixed`或`position:absolute`。

# automation - 从 Twitter 中抓取关键字的最佳方法是什么？

> ID：15015843
> 
> 赞同：0
> 
> 时间：2013-02-22T02:26:07.110
> 
> 标签：automation, twitter, scrape

我有一个脚本的想法，我想在 Twitter 上的比赛中使用它。我要构建的脚本将从推文（我正在关注的人）中抓取关键字，然后在找到它们时自动执行操作。

我的问题是，构建此脚本的最佳方法是什么？我应该为网页或 API 编写脚本以获得更快的结果吗？我需要脚本可靠且速度非常快，因为我将在比赛中使用它。理想情况下，我希望脚本在推文在线发布前几秒钟获取关键字（如果可能），以便有更好的获胜机会。

想法和建议？顺便说一句，我不是开发人员，但我计划在获得必要信息后聘请某人为我构建此脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T07:42:16.890

无需抓取网页。使用 API。他们有一个 REST API，或者你可以使用[twitter4j 之](http://twitter4j.org)类的东西。我建议看看他们的网站，看看例子，看看它是否符合你想做的事情。

根据我的经验，推文会在网站上更新之前显示在 API 中。

# android - 解组可打包数组时出现 ClassCastException

> ID：15015848
> 
> 赞同：3
> 
> 时间：2013-02-22T02:26:45.137
> 
> 标签：android, fragment, parcelable, badparcelableexception

我基本上是在尝试在状态之间保存一组位图。

我的片段的 onSaveInstanceState：

```
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putParcelableArray(SELECTED_IMAGES_ARRAY_BUNDLE, galleryAdapter.getImageBitmaps());
} 
```

在它的 onCreateView 中，我这样检索数组：

```
savedInstanceState.setClassLoader(Bitmap.class.getClassLoader());
Bitmap[] savedSelectedImages = (Bitmap[]) savedInstanceState.getParcelableArray(SELECTED_IMAGES_ARRAY_BUNDLE); 
```

这经常工作，除了当 Android 操作系统进行一些内存管理时，如果它在后台运行会杀死我的进程，然后当我回到它时尝试恢复它。

这是我得到的错误：

```
AndroidRuntime(4985): Caused by: java.lang.ClassCastException: android.os.Parcelable[] cannot be cast to android.graphics.Bitmap[] 
```

我认为这与没有正确设置类加载器有关，但我尝试了一切，似乎无法让它工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T05:26:50.770

您好不建议将位图放在需要额外处理时间的捆绑包中。并且消耗大量内存.. 强烈建议传递路径或将图像保存在外部存储中，并将绝对路径捆绑到图像文件....在 SO [Bundle Bitmap](https://stackoverflow.com/questions/4352172/how-do-you-pass-images-bitmaps-between-android-activities-using-bundles/7890405#7890405)中检查这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T02:52:02.670

您可以执行类似的操作。其中 p 是您的可打包列表。最后将位图列表转换回数组。

```
List<Parcelable> pList = Arrays.asList(p);
        ArrayList<Bitmap> bList = new ArrayList<Bitmap>();
        for(Parcelable px : pList){
            bList.add((Bitmap)px);
        } 
```

# python - 如何添加要存储在变量中的数字？

> ID：15015850
> 
> 赞同：-3
> 
> 时间：2013-02-22T02:27:00.400
> 
> 标签：python, python-3.x

这是我必须解决的问题：编写一个程序来对用户输入的一系列数字求和。该程序应首先提示用户要对多少数字求和。然后它应该输入每个数字并打印总和。这是我到目前为止所拥有的：

```
def excercise13():

print("Programming Excercise 13")
print("This program adds a series of numbers.")
while True:
    try:
        numberTimes = float(input("Enter how many numbers will be added: "))
    except ValueError:
        print("Invalid input.")
    else:
        break
numberTimes = int(numberTimes)
while True:
    try:
        for i in range(1,(numberTimes+1)):
            ("""I don't know what to put here""")
    except ValueError:
        print("Invalid input.")
    else:
        break
totalSum =
print("The sum of",nums,"is:",totalSum)
print()

excercise13() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T02:38:07.807

我将根据您的代码逐个代码块地介绍解决方案。

```
def excercise13():

    currentnumber = 0 
```

这里我们创建函数`excercise13()`并设置`currentnumber`为0

```
 print("Programming Excercise 13")
    print("This program adds a series of numbers.")
    while True:
        try:
            numberTimes = int(input("Enter how many numbers will be added: "))
        except ValueError:
            print("Invalid input.")
        else:
            break 
```

你应该使用`int`而不是`float.`你能想象做一个过程 3.5 次吗？这也减少了你之前的重复。

```
 for x in range(numbertimes): #More pythonic way.
        new_number = input ("Please enter a number to be added.")
        currentnumber += new_number 
```

上面的代码块使程序要求一个新的数字`numbertimes`次。然后它将这个数字添加到`currentnumber`

```
 totalSum = currentnumber
    print("The sum of",nums,"is:",totalSum)
    print() 
```

这将设置`totalSum`为决赛`currentnumber`

```
excercise13() 
```

这将启动您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T02:35:25.470

Python has this functionality built in as the `sum` function.

```
def makesum():    
    try:
        numbers = input('Enter the numbers to sum, comma seperated: ')
        print 'The sum is {0}'.format(sum(numbers))
    except:
        print 'Input invalid. Try again.'
        makesum()

makesum() 
```

# algorithm - 无法复制 Josephus 置换的讲师输出

> ID：15015853
> 
> 赞同：0
> 
> 时间：2013-02-22T02:27:17.290
> 
> 标签：algorithm, permutation, discrete-mathematics, josephus

我在数据结构课程中，无法重现讲师给出的示例数据。该问题是经典的 Josephus 问题，用户提供了成员数、步长间隔和起始位置。

具体来说，我被告知有 99 人，从 23 日开始，数到 5 点，应该让 84 人成为最后一个站着的人。

我想出：65。我再次运行时认为输入可能是 99 人，从 5 开始，间隔为 23。结果：42。

我的分配解决方案涉及一个循环链表，但是这个 c 代码在所有情况下都会产生相同的输出：

```
#include <stdio.h>

int josephus(int n, long k)
{
  if (n == 1)
    return 1;
  else
  /* The position returned by josephus(n - 1, k) is adjusted because the
   *        recursive call josephus(n - 1, k) considers the original position 
   *               k%n + 1 as position 1 */
 return (josephus(n - 1, k) + k-1) % n + 1;
}

int main()
{
int n = 99;
int k = 23;
printf("The chosen place is %d\n", josephus(n, k) + 5);
return 0;
} 
```

再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:33:37.350

拉福尔认为倒计时是跨过的。即，从 1 开始，数到 2 将首先杀死第 4 个人。文本中确实有一个例子。这并不直观，而且 LaFore 似乎是唯一这样计算的作者。

# backbone.js - 在使用咖啡脚本在骨干木偶中渲染我的收藏对象时遇到问题

> ID：15015854
> 
> 赞同：1
> 
> 时间：2013-02-22T02:27:26.633
> 
> 标签：backbone.js, coffeescript, marionette

我无法让 ItemView 呈现我在 testMap 中定义的值。我想要的只是将 1、2、3 动态插入到`<ol class='test-list'>`标签中，`<li>`这样我的 html 看起来就像

```
<ol class="test-list">
   <li>1</li>
   <li>2</li>
   <li>3</li>
</ol> 
```

我错过了什么？

```
testMap = 
  a: '1'
  b: '2'
  c: '3'

class TestLayout extends Layout
  template: require '/test_template'
  regions:
    body: 'section'
  events:
    'click #testme': 'test'
  test: -> app.vent.trigger 'test'

class TestItemView extends ItemView
  template: require '/test-item'
  serializeData: -> {testMap}

class TestListView extends CollectionView
  tagName: 'ol'
  className: 'test-list'
  itemView: TestItemView

module.exports = class TestPlugin extends Application
  testList: null
  initialize: =>
    @test = new Collection
    app.vent.on 'test', @showTest, @
  showTest: ->
    app.layout.test.show @layout = new TestLayout
    @layout.body.show @testList= new TestListView collection: @test 
```

我的名为 test-item 的 Html 文件如下所示：

```
<span class='test'>
  <%= @testMap %>
</span> 
```

我所有的全局变量都在扩展文件中定义。

我认为这里的罪魁祸首是我无法让我的收藏绑定到我的 itemView。因此，当我调用`@showTest`函数时，我什么也得不到，因为我的 testMap 对象没有与我的`@test`变量对话。我怎样才能把这两个对象结婚？

```
@layout.body.show @listView = new TestListView collection: @test 
```

# javascript - MVC：在 JSON 响应中传递 HTML 模板而不是单独的资源？

> ID：15015855
> 
> 赞同：0
> 
> 时间：2013-02-22T02:27:41.950
> 
> 标签：javascript, model-view-controller, templates, asynchronous

我打算使用 Backbone 或 Angular 编写一个 Web 应用程序。我们希望将“小部件”从服务器推送到客户端（即，半复杂、动态但很大程度上自主的 UI 元素……可能类似于流行的 TodoMVC 应用程序）。所以我们需要发送一个模板、一些 javascript（控制器等）、可能是 CSS 和 JSON 数据（模型）。

我们正在讨论如何发送所有信息。可以有多少，应该在 JSON 中封装什么？

是否可以从传递的数据中创建文件？即，我们可以提取 CSS 并将规则应用于我们的文档吗？我相信以这种方式运行 javascript 会更容易。

我的印象是能够缓存模板很重要......这是否需要将其作为（单独的）资源加载，而不是作为一些巨大的 JSON 对象的一部分？

至于 CSS，它需要在插入 DOM 之前加载（所以我们不想要一个承诺）。在 JSON 中传递我们的 CSS 规则并以某种方式提取它们是否有意义（甚至可能）？

**编辑**：为了更全面地描述我正在使用的内容，我只关注前端。可以自定义后端以发送我们想要的资源 - 他们将根据前端的需求对其进行优化。我们的后端堆栈包括 MongoDB、Tapestry、ActiveMQ。

需要发送的有效负载将是将 Mac Dashboard Widget 或 Windows Gadget 等内容推送到浏览器所需的所有资源。所以 HTML、CSS、Javascript 和数据都会被发送过来。我们希望事情变得敏捷并尽可能减少服务器请求，因为其中一些有效负载可能会变得有些大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T03:16:42.323

您的问题相当模糊，答案可能会通过在不同的构建平台上编码而改变。您选择的应用程序设计也会影响将 X 类型的应用程序实施到 X 设备所遵循的最佳实践。你知道给猫剥皮的方法不止一种。

你要发送什么信息？是不是有很多原始数据数组？它是否更多地基于文档，XML 可能更有益？如果数据存储在存储库中并且您将查询它，您将需要与您的 DBA 合作。您需要编写代码来格式化数据还是 DBMS 会以您需要的格式输出数据？

你是什​​么意思在插入之前需要加载CSS？一切都按照您指定的顺序加载，因此确保您的 CSS 在适当的时间加载应该不是问题。如果您使用的是 ASP.NET，您还可以使用[SSM](http://www.telerik.com/products/aspnet-ajax/stylesheetmanager.aspx)（样式表管理器）来为您的 CSS 提供服务，并且只加载所需的内容。如果你有很多样式表要服务，SSM 就很棒。

随着您进一步进入设计阶段，您提出的许多问题都会得到解答。为了得到一些可靠的答案，而不仅仅是猜测什么是最好的方法，你需要发布比这更多的细节。此时的任何答案都不应该对您的决定产生太大影响。他们当然不会是我的。

# python - 基于另一个数组提取一个数组部分的最有效方法

> ID：15015859
> 
> 赞同：2
> 
> 时间：2013-02-22T02:28:08.287
> 
> 标签：python, numpy, indexing

我有一个大约 1.5 亿点的时间序列。我需要放大 300 万个点。也就是说，**我需要在这 1.5 亿点时间序列中提取围绕这 300 万个感兴趣区域中的每一个的 100 个时间点**。

**试图：**

```
 def get_waveforms(data,spiketimes,lookback=100,lookahead=100):
      answer = zeros((len(spiketimes),(lookback+lookahead)))
      duration = len(data)
      for i in xrange(len(spiketimes)):
          if(spiketimes[i] - lookback) > 0 and spiketimes[i] + lookahead) < duration:
               answer[i,:] = data[(spiketimes[i]-lookback):(spiketimes[i]+lookahead)]
      return answer 
```

这会耗尽我 Mac 上的所有可用内存。如果我尝试传递 where 数组，它会爆炸`len(array) > 100000`。是否有更高效的内存或（希望）更优雅的方法来根据另一个数组提取一个数组的一部分？

**相关** [这个](https://stackoverflow.com/questions/8325089/extract-items-from-array-between-given-values-conditions?rq=1)答案是相关的。但是，我不确定如何应用它并避免循环。我会有效地用布尔矩阵的列一遍又一遍地索引时间序列向量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T04:16:53.600

您正在分配一个`200 * len(spiketimes)`浮点数组，因此对于您的 100,000 个项目，`spiketimes`应该只有大约 160 MB，这看起来并不多。另一方面，如果你去 1,000,000 `spiketimes`，一个 1.6 GB 的单个阵列对于某些系统来说可能是一个延伸。如果你有记忆，你可以用这样的方式对提取进行矢量化：

```
def get_waveforms(data, spiketimes, lookback=100, lookahead=100) :
    offsets = np.arange(-lookback, lookahead)
    indices = spiketimes + offsets[:, None]
    ret = np.take(data, indices, mode='clip')
    ret[:, spiketimes < lookback] = 0
    ret[:, spiketimes + lookahead >= len(data)] = 0
    return ret 
```

`spiketimes`太靠近边缘的处理`data`模仿了你的函数中的循环。

当您拥有如此多的数据时，明智的做法是将视图纳入其中。这很难矢量化（或者至少我还没有想出如何），但由于你没有复制任何数据，python循环不会慢得多：

```
def get_waveforms_views(data, spiketimes, lookback=100, lookahead=100) :
    ret = []
    for j in spiketimes :
        if j < lookback or j + lookahead >= len(data) :
            ret.append(None)
        else :
            ret.append(data[j - lookback:j + lookahead])
    return ret 
```

使用以下测试数据：

```
data_points, num_spikes = 1000000, 10000

data = np.random.rand(data_points)
spiketimes = np.random.randint(data_points, size=(num_spikes)) 
```

我得到这些时间：

```
In [2]: %timeit get_waveforms(data, spiketimes)
1 loops, best of 3: 320 ms per loop

In [3]: %timeit get_waveforms_views(data, spiketimes)
1 loops, best of 3: 313 ms per loop 
```

# bash - 如何将列表转置为 bash 中的表

> ID：15015860
> 
> 赞同：4
> 
> 时间：2013-02-22T02:28:09.563
> 
> 标签：bash, sed, awk

我想将项目列表（键/值对）转换为表格格式。解决方案可以是 bash 脚本、awk、sed 或其他方法。

假设我有一个很长的列表，例如：

```
date and time: 2013-02-21 18:18 PM
file size: 1283483 bytes
key1: value
key2: value

date and time: 2013-02-21 18:19 PM
file size: 1283493 bytes
key2: value

... 
```

我想用制表符或其他分隔符转换成表格格式，如下所示：

```
date and time   file size   key1    key2
2013-02-21 18:18 PM 1283483 bytes   value   value
2013-02-21 18:19 PM 1283493 bytes       value
... 
```

或像这样：

```
date and time|file size|key1|key2
2013-02-21 18:18 PM|1283483 bytes|value|value
2013-02-21 18:19 PM|1283493 bytes||value
... 
```

我已经查看了诸如这种[在 Bash 中转置文件的有效方法](https://stackoverflow.com/questions/1729824/transpose-a-file-in-bash)之类的解决方案，但似乎我在这里有不同的情况。awk 解决方案部分适用于我，它不断将所有行输出到一长列列中，但我需要将列限制为唯一列表。

```
awk -F': ' '
{ 
    for (i=1; i<=NF; i++)  {
        a[NR,i] = $i
    }
}
NF>p { p = NF }
END {    
    for(j=1; j<=p; j++) {
        str=a[1,j]
        for(i=2; i<=NR; i++){
            str=str" "a[i,j];
        }
        print str
    }
}' filename 
```

**更新**

感谢所有提供解决方案的人。其中一些看起来很有希望，但我认为我的工具版本可能已经过时并且我遇到了一些语法错误。我现在看到的是，我没有从非常明确的要求开始。感谢 sputnick 在我阐明全部要求之前第一个提供解决方案。当我写这个问题时，我度过了漫长的一天，因此不是很清楚。

我的目标是提出一个非常通用的解决方案，将多个项目列表解析为列格式。我认为该解决方案不需要支持超过 255 列。列名不会提前知道，这样解决方案将适用于任何人，而不仅仅是我。两个已知的东西是 kev/值对之间的分隔符（“：”）和列表之间的分隔符（空行）。为这些设置一个变量会很好，以便其他人可以对其进行配置以重用它。

通过查看建议的解决方案，我意识到一个好的方法是对输入文件进行两次传递。第一遍是收集所有列名，可选择对它们进行排序，然后打印标题。其次是获取列的值并打印它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T04:44:31.990

这是使用`GNU awk`. 像这样运行：

```
awk -f script.awk file 
```

内容`script.awk`：

```
BEGIN {
    # change this to OFS="\t" for tab delimited ouput
    OFS="|"

    # treat each record as a set of lines
    RS=""
    FS="\n"
}

{
    # keep a count of the records
    ++i

    # loop through each line in the record
    for (j=1;j<=NF;j++) {

        # split each line in two
        split($j,a,": ")

        # just holders for the first two lines in the record
        if (j==1) { date = a[1] }
        if (j==2) { size = a[1] }

        # keep a tally of the unique key names
        if (j>=3) { !x[a[1]] }

        # the data in a multidimensional array:
        # record number . key = value
        b[i][a[1]]=a[2]
    }
}

END {

    # sort the unique keys
    m = asorti(x,y)

    # add the two strings to a numerically indexed array
    c[1] = date
    c[2] = size

    # set a variable to continue from
    f=2

    # loop through the sorted array of unique keys
    for (j=1;j<=m;j++) {

        # build the header line from the file by adding the sorted keys
        r = (r ? r : date OFS size) OFS y[j]

        # continue to add the sorted keys to the numerically indexed array
        c[++f] = y[j]
    }

    # print the header and empty
    print r
    r = ""

    # loop through the records ('i' is the number of records)
    for (j=1;j<=i;j++) {

        # loop through the subrecords ('f' is the number of unique keys)
        for (k=1;k<=f;k++) {

            # build the output line
            r = (r ? r OFS : "") b[j][c[k]]
        }

        # and print and empty it ready for the next record
        print r
        r = ""
    }
} 
```

这是一个名为的测试文件的内容`file`：

```
date and time: 2013-02-21 18:18 PM
file size: 1283483 bytes
key1: value1
key2: value2

date and time: 2013-02-21 18:19 PM
file size: 1283493 bytes
key2: value2
key1: value1
key3: value3

date and time: 2013-02-21 18:20 PM
file size: 1283494 bytes
key3: value3
key4: value4

date and time: 2013-02-21 18:21 PM
file size: 1283495 bytes
key5: value5
key6: value6 
```

结果：

```
2013-02-21 18:18 PM|1283483 bytes|value1|value2||||
2013-02-21 18:19 PM|1283493 bytes|value1|value2|value3|||
2013-02-21 18:20 PM|1283494 bytes|||value3|value4||
2013-02-21 18:21 PM|1283495 bytes|||||value5|value6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T04:53:05.867

这不会对列结构进行任何假设，因此它不会尝试对它们进行排序，但是，所有记录的所有字段都以相同的顺序打印：

```
use strict;
use warnings;

my (@db, %f, %fields);
my $counter = 1;
while (<>) {
  my ($field, $value) = (/([^:]*):\s*(.*)\s*$/);
  if (not defined $field) {
    push @db, { %f };
    %f = (); 
  } else {
    $f{$field} = $value;
    $fields{$field} = $counter++ if not defined $fields{$field};
  }
}
push @db, \%f;

#my @fields = sort keys %fields; # alphabetical order
my @fields = sort {$fields{$a} cmp $fields{$b} } keys %fields; #first seen order

# print header
print join("|", @fields), "\n";

# print rows
for my $row (@db) {
  print join("|", map { $row->{$_} ? $row->{$_} : "" } @fields), "\n";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T04:43:33.587

这是一个纯粹的 awk 解决方案：

```
# split lines on ": " and use "|" for output field separator
BEGIN { FS = ": "; i = 0; h = 0; ofs = "|" }

# empty line - increment item count and skip it
/^\s*$/ { i++ ; next } 

# normal line - add the item to the object and the header to the header list
# and keep track of first seen order of headers
{
   current[i, $1] = $2
   if (!($1 in headers)) {headers_ordered[h++] = $1}
   headers[$1]
}

END {
   h--

   # print headers
   for (k = 0; k <= h; k++)
   {
      printf "%s", headers_ordered[k]
      if (k != h) {printf "%s", ofs}
   } 
   print "" 

   # print the items for each object
   for (j = 0; j <= i; j++)
   {
      for (k = 0; k <= h; k++)
      {
         printf "%s", current[j, headers_ordered[k]]
         if (k != h) {printf "%s", ofs}
      }
      print ""
   }
} 
```

示例输入（注意最后一项之后应该有一个换行符）：

```
foo: bar
foo2: bar2
foo1: bar

foo: bar3
foo3: bar3
foo2: bar3 
```

示例输出：

```
foo|foo2|foo1|foo3
bar|bar2|bar|
bar3|bar3||bar3 
```

**注意**：如果您的数据中嵌入了“：”，您可能需要更改此设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T03:05:02.467

## 使用[perl](/questions/tagged/perl "显示标记为“perl”的问题")

```
use strict; use warnings;

# read the file paragraph by paragraph
$/ = "\n\n";

print "date and time|file size|key1|key2\n";

# parsing the whole file with the magic diamond operator
while (<>) {
    if (/^date and time:\s+(.*)/m) {
        print "$1|";
    }

    if (/^file size:(.*)/m) {
        print "$1|";
    }

    if (/^key1:(.*)/m) {
        print "$1|";
    }
    else {
        print "|";
    }

    if (/^key2:(.*)/m) {
        print "$1\n";
    }
    else {
        print "\n";
    }
} 
```

## 用法

```
perl script.pl file 
```

## 输出

```
date and time|file size|key1|key2
2013-02-21 18:18 PM| 1283483 bytes| value| value
2013-02-21 18:19 PM| 1283493 bytes|| value 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-20T19:23:53.157

**例子：**

```
> ls -aFd * | xargs -L 5 echo | column -t
bras.tcl@      Bras.tpkg/           CctCc.tcl@       Cct.cfg      consider.tcl@
cvsknown.tcl@  docs/                evalCmds.tcl@    export/      exported.tcl@
IBras.tcl@     lastMinuteRule.tcl@  main.tcl@        Makefile     Makefile.am
Makefile.in    makeRule.tcl@        predicates.tcl@  project.cct  sourceDeps.tcl@
tclIndex 
```

# mysql - MySQL Group By 没有按我的预期工作

> ID：15015869
> 
> 赞同：0
> 
> 时间：2013-02-22T02:28:47.557
> 
> 标签：mysql

我有下表：

![MySQL 表](../Images/61b6916c3ba330674268b94043ecd9d1.png)

当我执行此查询时：

```
SELECT * 
FROM  `songs` 
GROUP BY ALBUM_ARTIST
ORDER BY ALBUM_ARTIST 
```

我得到这个结果：

![MySQL 结果](../Images/14c40c75e1b9669f444d64f1a65cb24e.png)

由于 ALBUM_ARTIST 一直向下具有相同的值，因此不应该对所有行进行分组吗？

如果我按艺术家分组，它会按预期工作。

导出到 .sql 文件后，我看到一些记录看起来像这样

（'像雨一样'，'阿黛尔'，'19'，'A\0d\0e\0l\0e\0'）

什么会导致这个？当有更多行时，我该如何解决它。

# facebook-graph-api - 在个人资料上清晰可见时未返回某些关系状态

> ID：15015873
> 
> 赞同：1
> 
> 时间：2013-02-22T02:29:07.563
> 
> 标签：facebook-graph-api, relationship, status

当使用开放图形 api 列出 - 关系状态的所有朋友时，一些朋友的关系状态返回为空。我设置了正确的权限，因为如果未设置为私有，则返回大多数朋友的 relationship_status。

有问题的朋友返回空的问题，我可以清楚地进入个人资料并查看他们的relationship_status。我四处搜索的唯一猜测是他们设置了它，所以我个人可以看到它，但其他人它是私人的？

要求的信息：

不仅在我的代码中这样做，而且在 Graph API Explorer 中也这样做。

示例：->/me?mfields=id,name,friends.uid( person querying ).fields(relationship_status)

返回设置为对我可见的人的关系，但由于某种原因，某些人我可以在他们的个人资料上查看他们的关系状态，当查询时什么都不返回？？？

# opengl-es - 获取点精灵中的视图坐标

> ID：15015877
> 
> 赞同：1
> 
> 时间：2013-02-22T02:29:26.637
> 
> 标签：opengl-es, glsl, webgl

如果您将*不同*的视图空间位置从顶点着色器传递给片段着色器，那么片段着色器可以知道片段相对于相机的位置（`0,0,0`在视图空间中）。这对于每像素照明等很有用。例如：

```
precision mediump float;
attribute vec3 vertex;
uniform mat4 pMatrix, mvMatrix;
varying vec4 pos;
void main() {
    pos = (mvMatrix * vec4(vertex,1.0));
    gl_Position = pMatrix * pos;
} 
```

但是，如果您在顶点着色器中进行渲染`gl_POINTS`和设置`gl_PointSize`，片段着色器如何确定每个片段的位置（因为在`pos`上面的示例中传递的将是精灵的中心点）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T03:59:30.313

简单的答案：*停止使用点精灵。*真的，他们太可怕了。

不太简单的答案：完全停止将视图空间位置传递给片段着色器。相反，用于`gl_FragCoord`根据[视口数据等计算视图空间位置](http://www.opengl.org/wiki/Compute_eye_space_from_window_space)。甚至还有它的示例 GLSL 代码：

```
vec4 ndcPos;
ndcPos.xy = ((2.0 * gl_FragCoord.xy) - (2.0 * viewport.xy)) / (viewport.zw) - 1;
ndcPos.z = (2.0 * gl_FragCoord.z - gl_DepthRange.near - gl_DepthRange.far) /
    (gl_DepthRange.far - gl_DepthRange.near);
ndcPos.w = 1.0;

vec4 clipPos = ndcPos / gl_FragCoord.w;
vec4 eyePos = invPersMatrix * clipPos; 
```

您需要为片段着色器提供`viewport`和`invPersMatrix`值。`gl_DepthRange`是内置的。`eyePos`就是你要找的。

可能有一种更快的方法可以利用您正在绘制屏幕对齐的四边形这一事实。这将涉及点大小和使用`gl_PointCoord`.

# ruby-on-rails - 如何为所有 Ember.js 路由指定 URL“前缀”？

> ID：15015879
> 
> 赞同：3
> 
> 时间：2013-02-22T02:29:38.990
> 
> 标签：ruby-on-rails, routing, ember.js, ember-rails

我正在将 Ember.js 集成到现有的 Rails 应用程序中。想首先使用 Ember 来执行单个控制器操作`dashboard#index`。从那里，我计划将站点的其余部分集成到 ember 应用程序中，可能基于每个控制器。

但是我在管理 ember URL 时遇到了麻烦，因为我还没有准备好将 Rails 根路由的控制权交给 Ember。

例如，我希望以下路线由 rails 处理，不带 Ember：

```
/
/login
/logout 
```

尽管：

```
/dashboard 
```

应该触发 Ember 应用程序。然后，会有各种 ember 仪表板路线，例如`/dashboard/#/favorites`和`dashboard/#/upcoming`

我已经通过资产管道设置了备用 Rails 布局和路径，但我发现如果在`prefix`诸如`/dashboard/`.

有没有一种干净的方法来设置它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-06T17:54:48.250

在您的`dashboard`控制器集中`layout false`，以便它忽略您的应用程序布局。

然后让您的`dashboard/index.html.erb`文件创建自己的布局并包含 ember 应用程序。它应该看起来像这样：

```
<!DOCTYPE html>
<html>
<head>
  <title>ember app</title>
  <%= stylesheet_link_tag  "application" %>
  <%= csrf_meta_tags %>
</head>
<body>
<%= javascript_include_tag "ember_app" %>
</body>
</html> 
```

然后在你的`assets/javascripts/`你应该有一个`ember_app.js`看起来像这样的文件：

```
//= require handlebars
//= require ember
//= require ember-data
//= require_self
//= require ./store
//= require_tree ./models
//= require_tree ./controllers
//= require_tree ./views
//= require_tree ./helpers
//= require_tree ./components
//= require_tree ./templates
//= require_tree ./routes
//= require ./router
//= require helpers

# for more details see: http://emberjs.com/guides/application/
window.DashboardApp = Ember.Application.create() 
```

我使用的一个很好的资源是[`ember-rails`](http://github.com/emberjs/ember-rails)宝石。它也有[很好的文档](https://github.com/emberjs/ember-rails/blob/master/README.md)。

# facebook - 使用 opengraph 和 curl 抓取新页面

> ID：15015886
> 
> 赞同：1
> 
> 时间：2013-02-22T02:30:48.007
> 
> 标签：facebook, curl, scrape

我正在开发一个网站，我在其中创建了一个博客，人们可以在该博客上通过他们的 Facebook 发表评论。现在我注意到每当我创建一个新博客时，评论插件都会显示一个警告“url 无法访问”。

我已经想出摆脱这个警告的方法是刮掉新的博客。

如果我在命令行上使用以下查询：

```
curl -F "id=http://www.maartenvangenechten.be/blog/post/13/" -F "scrape=true" -k https://graph.facebook.com 
```

警告消失了，但从长远来看，这不是最好的方法。我在元标记中输入的所有数据也被输出，告诉我页面被成功抓取

所以我尝试为此使用 php/libcurl：

```
$params = array(
"id"=>$url,
"scrape"=>"true");

$ch = curl_init("https://graph.facebook.com");
curl_setopt_array($ch, array(
  CURLOPT_RETURNTRANSFER=>true,
  CURLOPT_SSL_VERIFYHOST=>false,
  CURLOPT_SSL_VERIFYPEER=>false,
  CURLOPT_POST=>true,
  CURLOPT_POSTFIELDS=>$params
));
$result = curl_exec($ch);
curl_close($ch);
echo $result; 
```

现在这只输出：

```
{"id":"214022612077699","url":"http:\/\/www.maartenvangenechten.be\/blog\/post\/13\/"} 
```

并不是

```
{"url":"http:\/\/www.maartenvangenechten.be\/","type":"website","title":"Maartens Homepage","image":[{"url":"http:\/\/www.maartenvangenechten.be\/images\/general\/logo_enlighten.gif"}],"description":"Hier kan je alles vinden over mijn huidige projecten. Bekijk ook zeker de blog, waar ik de verschillende uitdagingen die ik tegenkom zal toelichten","site_name":"VangenechtenDESIGNs","admins":[{"id":"591822147","name":"Maarten Van Genechten","url":"http:\/\/www.facebook.com\/exquisitje"}],"updated_time":"2013-02-22T02:27:18+0000","id":"492686967461912","application":{"id":"482576148470885","name":"MVGPortfolio","url":"http:\/\/www.facebook.com\/apps\/application.php?id=482576148470885"}} 
```

正如我所料

似乎找不到原因

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T00:11:24.870

好的，解决了，在网上搜索了几个小时后......

我在不同的浏览器上尝试了该功能，Opera，Firefox，甚至IE都返回了预期的结果，只有Chrome给出了问题......

清除了缓存、历史记录以及通过 Chrome 存储的所有其他内容，问题就消失了。

# c# - 图形可视化

> ID：15015887
> 
> 赞同：-3
> 
> 时间：2013-02-22T02:30:53.530
> 
> 标签：c#, java, graph

我必须将输入可视化为图形。我的输入将采用以下任何一种格式。（RDF、邻接表、邻接矩阵）。我现在不关心输入的结构。我必须以图形的形式直观地表示输入。例如，如果我的 RDF 查询如下。

```
<sachin Tendulkar, plays, cricket> 
```

我必须以图形格式表示上述内容。我的输入不会是恒定的，它会不时变化。所以，我不想使用一些图形生成工具。我必须从用户那里获取输入，并根据他的输入生成图表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T02:36:12.333

You say you don't want to use "some graph generation tool", but it seems to me that the simplest approach would be to get a good tool, or graph library, and then normalise your input to whatever format the tool/library expects.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T02:36:13.697

If you try to Plot[sachin Tendulkar, plays, cricket] in a program like Mathematica the output is:

![enter image description here](../Images/4868294a03a294d075359bdf7c57146e.png)

You will need some numeric data to generate Graphs.

# windows-phone-8 - WP8 手机信号塔 API 信息

> ID：15015889
> 
> 赞同：0
> 
> 时间：2013-02-22T02:31:45.323
> 
> 标签：windows-phone-8

我正在设计一个 Windows Phone 8 应用程序，我一直在研究位置 API。但是，我只看到 GPS 的定位服务。我真的不想在我的位置应用程序中使用 GPS，我只需要一个广泛的手机信号塔信息。我想使用手机信号塔 ID 和 API 返回的任何其他信息。

目前是否有可能通过 WP8 API 获得这些信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T04:07:26.080

**不**，此功能目前在 Windows Phone SDK 中不可用。

# c# - ConfigurationManager.ConnectionStrings 从 machine.config 返回额外的连接字符串

> ID：15015892
> 
> 赞同：6
> 
> 时间：2013-02-22T02:32:12.227
> 
> 标签：c#, string, collections, connection

我正在编写一个 Windows 服务，我需要 App.config 中定义的所有连接字符串的列表。

我使用 System.Configuration.ConfigurationManager.ConnectionStrings 来获取所有连接。

它总是返回这个额外的连接：

数据源=.\SQLEXPRESS;集成安全=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;用户实例=true

我认为是在 machine.config 中添加的。

我的 App.config 是：

```
<add name="AvmPortalConnectionString"
    connectionString="Data Source=.;Initial Catalog=AvmPortal;Integrated Security=True"
    providerName="System.Data.SqlClient" /> 
```

无论如何我只能获得App.config中定义的连接字符串（不是machine.config中的那个）

我可以删除它，但我想知道是否有更清洁的方法！

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-22T02:54:18.667

尝试在添加之前添加清除：

```
<connectionStrings>
    <clear />
    <add name="AvmPortalConnectionString"
        connectionString="Data Source=.;Initial Catalog=AvmPortal;Integrated Security=True"
        providerName="System.Data.SqlClient" />
</connectionStrings> 
```

# git - git add Signed-off-by line using format.signoff 不工作

> ID：15015894
> 
> 赞同：31
> 
> 时间：2013-02-22T02:32:27.283
> 
> 标签：git, format, config

我的客户端 git 版本是 1.7.0.4。

我想在提交消息时在提交日志消息的末尾自动为提交者添加一个“签名人”行。

1.  当我设置`git config --global format.signoff true`并运行`git commit -m "modify something"`时，我在`git log`.
2.  如果我使用`git commit -m -s "modify something"`，则“签名人”确实会显示在`git log`.

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2017-10-03T02:14:29.773

`git-interpret-trailers`现在有一种简单的方法可以使用钩子和命令自动签署任何尚未签署的提交。在即将发布的 git 2.15 版本中，该命令允许简单地检查现有的签核（无论其值/作者是什么），如果还没有，则添加您的签核。截至 2017 年 10 月，所需的代码**尚未**在任何 git 版本中（但在其`master`分支中）！

将以下内容另存为`.git/hooks/prepare-commit-msg`或`.git/hooks/commit-msg`（有关差异，请参见[此处](https://git-scm.com/docs/githooks)）并使其可执行。

```
#!/bin/sh

NAME=$(git config user.name)
EMAIL=$(git config user.email)

if [ -z "$NAME" ]; then
    echo "empty git config user.name"
    exit 1
fi

if [ -z "$EMAIL" ]; then
    echo "empty git config user.email"
    exit 1
fi

git interpret-trailers --if-exists doNothing --trailer \
    "Signed-off-by: $NAME <$EMAIL>" \
    --in-place "$1" 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-01-08T23:29:22.980

默认情况下，您可以通过创建一个包含一些空行和已签名文本的文件（例如“~/MYPROJECT/git-template”）在项目中签名，如下所示：

```
Signed-off-by: Your Name <your.email@example.com> 
```

然后配置 git 以将其用作提交模板。例如：

```
git config commit.template ~/MYPROJECT/git-template 
```

确保您的项目在某处*记录*项目的签署方式。您可以将以下文本复制到您的 CONTRIBUTING.md 文件中：

> 所有贡献（包括拉取请求）都必须同意开发者原产地证书 (DCO) 版本 1.1。[这与 Linux 内核开发人员创建和使用并发布在http://developercertificate.org/](http://developercertificate.org/)上的完全相同。这是开发人员的证明，表明他或她有权提交补丁以包含在项目中。只需提交贡献就意味着此协议，但是，请在每个补丁中包含“签名者”标签（此标签是确认您同意 DCO 的传统方式）。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-02-22T07:20:32.897

Git 2.14.x/2.15 的更新：正如我在“ [Git - Detect if commit is signed off programmatically](https://stackoverflow.com/a/41361273/6309) ”中提到的，您将能够解析`Signed-off-By`一行的提交消息预告片。

> " `git interpret-trailers`" 被教导了一个 " `--parse`" 和其他一些选项，以使脚本更容易从提交日志消息中获取现有的预告片行。

请参阅[stefanct](https://stackoverflow.com/users/1905491/stefanct)对将使用的[客户端钩子](https://git-scm.com/docs/githooks#_commit_msg)的[回答](https://stackoverflow.com/a/46536244/6309)。[`commit-msg`](https://git-scm.com/docs/githooks#_commit_msg)`git interpret-trailers`

* * *

原始答案（2013）

`format.signoff`是[关于补丁](https://stackoverflow.com/a/1962112/6309)的（例如，[在这个补丁中](http://www.spinics.net/lists/git/msg133426.html)）：

```
format.signoff 
```

> 一个布尔值，允许您**[`format-patch`](http://git-scm.com/docs/git-format-patch)**默认启用 -s/--signoff 选项

它与`git commit -s`.

换句话说，您不必签署每个提交，但是当您将它们发布为供其他人使用的补丁时（如“ [git：提交补丁](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=blob;f=Documentation/SubmittingPatches;hb=HEAD)”），*那么*您应该签署它们。

有关 的确切含义`Signed-of-by`，请参阅“ [Git 中的 Sign Off 功能是做什么用的？](https://stackoverflow.com/a/35238070/6309) ”。

# ruby - Can't get awesome_print gem to work

> ID：15015897
> 
> 赞同：17
> 
> 时间：2013-02-22T02:32:47.260
> 
> 标签：ruby, rubygems, awesomeprint

[awesome_print](https://github.com/michaeldv/awesome_print) looks like a pretty nice gem, so I wanted to try it out.

I went to one of my projects and did:

```
gem install awesome_print 
```

and it says one gem installed, documentation installed, etc.

Then, while I am in that project, I went to my Rails console to try it out, but when I did a `require "awesome_print"` as their help file says, I get a "cannot load such file".

Has anyone got this to work?

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-26T13:08:22.463

像这样将它添加到您的 Gemfile 中：

```
gem 'awesome_print', :require => 'ap' 
```

我将它添加到开发组，因为这是我唯一需要它的时候。gem 没有任何其他 gem 依赖项，所以我经常将它添加到我的 Gemfile 中。

此外，将这两行添加到您的 ~/.irbrc 文件中，以设置`ap`为您的默认寻呼机：

```
require "awesome_print"
AwesomePrint.irb! 
```

但是请注意，如果您使用它，则任何未在其 Gemfile 中安装 awesome_print 的项目都会在您运行时引发此错误`rails c`：

```
cannot load such file -- awesome_print 
```

根据您的 ~/.irbrc 文件中可能包含的其他内容，这可能会导致其他副作用，例如弄乱您的提示。为了避免这些，只需将这两行添加到该文件的最后。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-02-22T06:04:29.703

`gem install`会将 gem 代码放在您的计算机上，但除非 gem 的源代码文件在您的加载路径上，`require`否则将无法找到它们。 `bundle exec`查看最近的`Gemfile.lock`并将那里列出的所有 gem 的源代码添加到您的加载路径中。Rails 初始化包括让 Bundler 为您执行此操作。

一种解决方案是添加`awesome_print`到您的`Gemfile`. 但是，这将导致您的应用程序具有`awesome_print`依赖项。`awesome_print`或者，您可以在启动 Rails 控制台并要求它之后手动将库添加到加载路径：

```
$ rails c
> $LOAD_PATH << path/to/awesome_print-x.x.x/lib
> require 'awesome_print'
> ap {foo: {bar: {baz: :qux}}} 
```

如果您使用的是 RVM，则路径可能类似于：

```
~/.rvm/rubies/ruby-x.x.x-pxxx@your_gemset_name/gems/awesome_print-x.x.x/lib 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-10-28T00:52:17.130

# 安装它：

```
$ gem install awesome_print 
```

# 如果需要，请将其包含在 GemFile 中：

```
gem 'awesome_print', :require => 'ap' 
```

# 将此行添加到文件 ~/.irbrc ：

```
require 'awesome_print'
AwesomePrint.irb! 
```

# 重新启动你的外壳！

只是一个说明：我这样做了，但它没有立即工作，可能需要重新启动计算机......或者我只需要关闭所有 shell 选项卡并再次打开终端！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-10-23T15:03:29.150

在你的机器上安装 gem

```
gem install awesome_print 
```

获取已安装的路径

```
gem which awesome_print 
```

将以下配置添加到您的`~/.irbrc`和`~/.pryrc`. 每当您触发`IRB`或`pry`会话时，这将加载 Awesome Print。

*记住`$LOAD_PATH`将保存您输入的任何内容`gem which awesome_print`

```
# ~/.irbc and ~/.pryrc

$LOAD_PATH << "~/.asdf/installs/ruby/2.6.3/lib/ruby/gems/2.6.0/gems/awesome_print-1.8.0/lib/"
require "awesome_print"
AwesomePrint.irb! 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-11T20:48:54.313

如果您想在 Gemfile 中不包含它的情况下安装它，请执行以下操作：

```
$ gem install awesome_print 
```

我遇到了一个问题，它安装成功但不在正确的目录中。

在这种情况下，只需将其放在您的 .bashrc 中，这将设置加载路径：

```
export PATH="/home/user/.gem/ruby/2.3.0/bin:$PATH"
PATH="`ruby -e 'puts Gem.user_dir'`/bin:$PATH" 
```

将**2.3.0**替换为您正在使用的 ruby​​ 版本。
将**用户**替换为您的*用户名*，或者如果您使用的是 vagrant，则替换为*vagrant*

重新加载您的 .bashrc 或退出终端以重新加载更改，然后再次安装 gem。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-21T08:18:34.667

就我而言，我在 PATH 等问题上苦苦挣扎，同时遗漏了一些明显的东西！

```
# which ruby
/usr/bin/ruby
# ruby -v
ruby 2.3.7p456 (2018-03-28 revision 63024) [universal.x86_64-darwin17]
# locate bin/ruby
/usr/bin/ruby
/usr/local/Cellar/ruby/2.7.2/bin/ruby
/usr/local/opt/ruby/bin/ruby
# /usr/local/opt/ruby/bin/ruby -v
ruby 2.7.2p137 (2020-10-01 revision 5445e04352) [x86_64-darwin17]
# 
```

啊哈！版本粗鲁。我正在运行一个旧的红宝石。谢谢，苹果！

```
# sudo mv /usr/bin/ruby /usr/bin/ruby_2.3.7
# sudo ln /usr/local/opt/ruby/bin/ruby /usr/bin/ruby 
```

解决了问题！

可能我本可以告诉我`brew`做一些事情来解决问题，但我很不耐烦。:-)

# php - PHP multilingual website xml or array

> ID：15015899
> 
> 赞同：1
> 
> 时间：2013-02-22T02:32:58.837
> 
> 标签：php, xml, arrays, multilingual

I have a website that I want to produce into a multi lingual website.

But, I am stuck. Should I use XML or PHP array? I was going to do it with XML, but when I saw this website: [php array](http://www.bitrepository.com/php-how-to-add-multi-language-support-to-a-website.html)

It looks much easier doing it this way than xml. So, I want to know if there's any pro and con between these two styles?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T02:38:59.697

您不应该使用 XML 作为语言。当您使用一些 UTF-8 标准不支持的字符时，它会分解代码。

使用 POEDIT 应用程序在 Linux 上的 GUI 中快速编辑语言并解析文件 .MO 和 .PO 更容易

请避免使用 XML 进行语言解析。这会降低你的表现。

看看这个如何使用 POEDIT： http: [//www.dev4press.com/2010/tutorials/wordpress/various/translating-plugins-or-themes-using-poedit/](http://www.dev4press.com/2010/tutorials/wordpress/various/translating-plugins-or-themes-using-poedit/)

这将生成语言 therms。

然后你需要使用`gettext`来解析和读取本地化。查看此页面的示例说明： http: [//mel.melaxis.com/devblog/2005/08/06/localizing-php-web-sites-using-gettext/](http://mel.melaxis.com/devblog/2005/08/06/localizing-php-web-sites-using-gettext/)

在 poedit 和解析 gettext 数据之后，真正的解释是：[使用 Poedit 创建 POT 文件](https://stackoverflow.com/questions/9095032/create-pot-file-with-poedit)

跳至此站点了解实际做法： http: [//www.codeforest.net/translate-and-localize-your-web-application-with-php-and-gettext](http://www.codeforest.net/translate-and-localize-your-web-application-with-php-and-gettext)

GETTEXT 速度改进与变量：[http ://mel.melaxis.com/devblog/2006/04/10/benchmarking-php-localization-is-gettext-fast-enough/](http://mel.melaxis.com/devblog/2006/04/10/benchmarking-php-localization-is-gettext-fast-enough/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T02:52:56.020

在我看来，这取决于您的网站有多大以及涉及多少翻译。

解析 XML 将花费更多时间，而不仅仅是包含一个带有定义的 php 文件，但这不会是一个交易破坏者。

我发现使用 XML 在维护方面更容易，这将允许您甚至基于页面名称或其他属性创建节点以对其内容进行排序

```
<page name="homepage">
   <tag name="tittle">Titulo</tag>
   ..
   ..
</page>
<page name="products">
   <tag name="product-title">Producto</tag>
   ..
   ..
</page> 
```

您可能还想看看 PHP 的国际化指南，以防您需要的不仅仅是多语言支持[http://php.net/manual/en/book.intl.php](http://php.net/manual/en/book.intl.php)

# python - How can I mirror Django logging to a second file temporarily?

> ID：15015902
> 
> 赞同：0
> 
> 时间：2013-02-22T02:33:27.950
> 
> 标签：python, django

I want to create task-specific log files that reflect what's happening during a particular operation, but I want these logging messages to also go to the primary Django log.

My current solution, which seems to work fine at first glance, is something like:

```
logger = getLogger("%s:%s" % (__name__, task_id))
handler = FileHandler(task_log_file)
logger.addHandler(handler)

# Work

logger.removeHandler(handler) 
```

As I said, this works, but the main issue that occurs to me is that this logger isn't really temporary -- from what I've read of `logging.Manager` each logger will just hang around indefinitely until shutdown. In this case, when I'm done I know I won't use the logger again (okay, technically I might, but that will be rare), and assuming the system is stable this could be running through hundreds of thousands of tasks.

Is there a "right" way to do this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T03:18:04.937

您可以有一种方法来**标记和清除**您的日志记录资源文件，或者只使用**单例**模式。

# php - htaccess redirect on fatal php error?

> ID：15015904
> 
> 赞同：1
> 
> 时间：2013-02-22T02:33:35.387
> 
> 标签：php, .htaccess

I'm looking for a way to redirect to an /error.php page when a fatal php error occurs. I have htaccess setup to log errors, but how can I redirect on fatal error using htaccess?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T02:42:50.777

使用带有[关闭功能的](http://php.net/manual/en/function.register-shutdown-function.php)[标头](http://php.net/manual/en/function.header.php)在致命错误时转发它们。

```
register_shutdown_function('forward_fatal');
function forward_fatal(){
    header("Location: error.php");
} 
```

# wolfram-mathematica - 消除嵌套列表中每个列表的元素

> ID：15015910
> 
> 赞同：1
> 
> 时间：2013-02-22T02:34:02.840
> 
> 标签：wolfram-mathematica, nested-lists

我想消除嵌套列表中每个列表的第三个元素。

例如，

```
 lst = { {1, 0, 0}, {1, 1, 1}, {1, 1, 4} } 
```

所以它会变成

```
 { {1, 0}, {1, 1}, {1, 1} } 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T09:20:55.163

有很多方法可以做到这一点，例如

```
lst = {{1, 0, 0}, {1, 1, 1}, {1, 1, 4}};

lst = lst[[All, {1, 2}]] 
```

> {{1, 0}, {1, 1}, {1, 1}}

或者

```
lst = Transpose[Most[Transpose[lst]]] 
```

或者，不转置

```
lst = MapThread[Delete, {lst, Table[3, {Length[lst]}]}] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T14:36:34.283

完后还有：

```
lst = #[[1;;2]] & /@ lst 
```

或者如果您只想从可能更长的子列表中删除第三个元素：

```
lst = Drop[#,{3}]& /@ lst 
```

# python - Multiplying vowels in a string

> ID：15015913
> 
> 赞同：0
> 
> 时间：2013-02-22T02:34:20.110
> 
> 标签：python

I'm attempting to take a string as input and return that same string with each vowel multiplied by 4 and a "!" added at the end. Ex. 'hello' returns, 'heeeelloooo!'

```
def exclamation(s):
'string ==> string, returns the string with every vowel repeating four times and an exclamation mark at the end'
vowels = 'aeiouAEIOU'
res = ''
for a in s:
    if a in vowels:
        return s.replace(a, a * 4) + '!' 
```

The above code just returns 'heeeello!' I also attempted it in the interactive shell with vowels equaling ('a', 'e', 'i', 'o', 'u') but using the same code resulted in this:

```
>>> for a in s:
if a in vowels:
    s.replace(a, a * 4) + '!' 
```

'heeeello!' 'helloooo!'

How can I get it to multiply each vowel and not just one of them?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T02:37:23.630

我个人会在这里使用正则表达式：

```
import re

def f(text):
    return re.sub(r'[aeiou]', lambda L: L.group() * 4, text, flags=re.I) + '!'

print f('hello')
# heeeelloooo! 
```

这样做的好处是只扫描字符串一次。（恕我直言，它在做什么是相当易读的）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-22T02:35:59.173

As is, you're looping over the string, and if the character is a vowel, you're replacing that vowel in the string with four of it and then stopping. That's not what you want to do. Instead, loop over the vowels and replace the vowel in the string, assigning the result back to the input string. When you're done, return the resulting string with an exclamation mark appended.

```
def exclamation(s):
    'string ==> string, returns the string with every vowel repeating four times and an exclamation mark at the end'
    vowels = 'aeiouAEIOU'
    for vowel in vowels:
        s = s.replace(vowel, vowel * 4)
    return s + '!' 
```

# ms-access - 将报告导出为 XML (Access)

> ID：15015929
> 
> 赞同：0
> 
> 时间：2013-02-22T02:36:49.557
> 
> 标签：ms-access, vba

我正在使用 Access 2010。我想将报告导出到 XML。（使用 vba）我正在使用：DoCmd.OutputTo acOutputReport，“rptName”，它可以工作..但它要求用户选择格式和位置。我希望它会自动..

我该怎么做？

谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T02:57:22.830

您可以使用[Application.ExportXML 方法](http://msdn.microsoft.com/en-us/library/office/ff193212%28v=office.14%29.aspx)来导出报告的数据，如下所示：

```
ExportXML acExportReport, "rptName", "C:\SomeFolder\rptName.xml" 
```

如果您想要的不仅仅是报表的数据，`ExportXML`还支持包含演示信息的选项。不过，我从未尝试过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T18:24:30.747

**DoCmd.OutputTo 方法**

OutputTo 方法在 Visual Basic 中执行 OutputTo 操作。
句法：

> .OutputTo(ObjectType, ObjectName, OutputFormat, OutputFile, AutoStart, TemplateFile, Encoding, OutputQuality)

**OutputFormat**是所需的格式：

*   acFormatASP
*   acFormatHTML
*   acFormatIIS
*   ac格式PDF
*   acFormatRTF
*   acFormatSNP
*   acFormatTXT
*   acFormatXLS
*   acFormatXPS

**OutputFile**是将项目保存到的文件名

# dynamic - 为什么我需要在关闭时使用 as Callable 来提交给执行者？

> ID：15015930
> 
> 赞同：1
> 
> 时间：2013-02-22T02:37:05.893
> 
> 标签：dynamic, concurrency, groovy

为什么以下 groovy 代码通过？

```
Executor executor = Executors.newFixedThreadPool(1)
assert executor.submit({"some value"}).get() == null
assert executor.submit({"some value"} as Callable).get() == "some value" 
```

{} instanceof Closure 何时实现 GroovyCallable 扩展 Callable ？

as关键字提供了什么黑魔法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T03:35:53.377

好吧，它看起来像是 groovy 编译器的一个特性，它喜欢在之前使用`Runnable`接口来避免.`Closure``Callable``Ambiguous method overloading call`

请查看讨论[https://issues.apache.org/jira/browse/GROOVY-4311](https://issues.apache.org/jira/browse/GROOVY-4311)和[https://issues.apache.org/jira/browse/GROOVY-3295](https://issues.apache.org/jira/browse/GROOVY-3295)

要了解该问题，您可以查看类似的无法编译的 Java 代码：

```
class MyClosure implements Runnable, Callable<String> {

    @Override public String call() throws Exception {
        return "some value";
    }

    @Override public void run() {
    }
}

ExecutorService executorService = Executors.newSingleThreadExecutor();
executorService.submit(new MyClosure()); 
```

# ios - 在自定义视图中显示作为局部变量与属性的 UITextField

> ID：15015931
> 
> 赞同：0
> 
> 时间：2013-02-22T02:37:07.043
> 
> 标签：ios

我正在模拟一个项目的快速演示，但遇到了 UITextField 的问题。

我们想要的行为是，当用户单击按钮时，应该有一个自定义视图出现，其中包含一个 UITextField 和一个 UIButton 在覆盖主视图的自定义视图中。

我在 Searchview.m 中有一个名为 Searchview 的自定义视图和以下内容。问题是当 textField 是一个属性时，它不会显示，但是当它是一个局部变量时，它会显示。任何人都可以帮助我了解正在发生的事情，以便 UITextField 显示吗？我是如何做到这一点的甚至是正确的想法（自定义 UIView 或自定义 UIControl 或模态控制器）？最后， setNeedsDisplay 在这里合适吗？

提前谢谢

```
@interface Searchview()
  @property (nonatomic, weak) UITextField *textField;
@end

- (void)drawRect:(CGRect)rect
{
  // this doesn't work
  self.textField = [[UITextField alloc] initWithFrame:CGRectMake(0.0f, 0.0f, 120.0f, 25.0f)];
  self.textField.returnKeyType = UIReturnKeyDone;
  self.textField.placeholder = @"Writer";
  self.textField.borderStyle=UITextBorderStyleBezel;
  [self.textField addTarget:self
                    action:@selector(textFieldDone:) 
          forControlEvents:UIControlEventEditingDidEndOnExit];     
  [self addSubview: self.textField];

/* this works
  UITextField *textField = [[UITextField alloc] initWithFrame:CGRectMake(10.0f, 10.0f, 120, 25)];
  textField.returnKeyType = UIReturnKeyDone;
  textField.placeholder = @"Writer";
  textField.borderStyle=UITextBorderStyleBezel;
  [textField addTarget:self
                    action:@selector(textFieldDone:) 
          forControlEvents:UIControlEventEditingDidEndOnExit];    

  [self addSubview: textField];
*/

  UIButton *mButton=[UIButton buttonWithType:UIButtonTypeRoundedRect];
  mButton.frame=CGRectMake(200.0f,10.0f,100.0f,37.0f);
  [mButton setTitle:@"search" forState:UIControlStateNormal];
  [mButton addTarget:self action:@selector(showSearchController:) forControlEvents:UIControlEventTouchUpInside];
  [self addSubview:mButton];
  [self setNeedsDisplay];

} 
```

作为属性 - 未显示： ![作为财产：](../Images/ce5b37f0bd58dd87d429d82010d283d2.png)

作为局部变量 - 显示： ![局部变量](../Images/9d01b9636240c1f5550a3f47ddbd2b10.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T02:50:04.970

```
@property (nonatomic, strong) UITextField *textField; 
```

更改`weak`为`strong`并更改`self.textFiled`为`_textField`试一试

并确保您的 textField 属性不被释放

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T04:33:32.900

当你想到它时，这很简单。ARC（大约）转换以下代码：

```
self.weakProp = [[Foo alloc] init]; 
```

相当于以下“手动引用计数”代码：

```
Foo * temp = [[Foo alloc] init];
self.weakProp = temp;
[temp release]; 
```

没有任何东西保留它，所以它被释放了。

我只能想到分配/弱 IBOutlets 的两个原因：

*   对于 VC 中的插座，因此当其视图设置为 nil 时（例如在内存警告上），它不会保留子视图。这在 iOS 6.0 中不太相关，因为视图不会在内存警告时自动释放（所以如果你这样做，你可以显式地释放它们）。
*   对于出口指向超级视图的视图（并会导致保留周期）。这是相当罕见的。

一般来说，我更喜欢`strong`IBOutlets：它们可能使对象存活的时间比必要的时间长一点，但它们`assign`比`weak`. 请注意保留周期！

# javascript - 淡出不工作

> ID：15015932
> 
> 赞同：0
> 
> 时间：2013-02-22T02:37:15.247
> 
> 标签：javascript, jquery, html, fadein, fadeout

我是网页设计的新手。我现在正在制作我的简历。我有这样的导航 div：

```
<div id="nav" class="grid_12">
    <div id="Home" class="grid_3">
        <div class="button">
            <a href="#">Home</a>
        </div>
    </div>

    <div id="Life" class="grid_3">
        <div class="button">
            <a href="#">Life</a>
        </div>
        <img src="img/someimg.jpg">
    </div>

    <div id="Portfolio" class="grid_3">
        <div class="button">
            <a href="#">Portfolio</a>
        </div>
    </div>

    <div id="Contact" class="grid_3">
        <div class="button">
            <a href="#">Home</a>
        </div>
    </div>
</div> 
```

然后我有一个导航脚本：

```
<script type="text/javascript>
    $("#nav img").hide();
    $(".button").focus(function() {
        $(this).next("img").fadeIn("slow");
    }).blur(function() {
    $(this).next("img").fadeOut("slow");
    }); 
</script> 
```

我想要它，所以当有人将鼠标悬停在按钮上时，图像将出现在其下方。它正确隐藏了图像，但淡入淡出不起作用。我不知道为什么它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T03:07:06.677

我相信您使用的是 960gs，我注意到的一件事是：您的四个 grid_3 div 嵌套在您的 grid_12 中。960gs 包括两个名为`.alpha`和的类，`.omega`用于在网格位于父网格内时修复嵌套边距。您需要将`.alpha`类放在第一个子 div 上 - 在这种情况下是您的，最后一个子 div 上`<div id="#home">`的类是您的. 这将修复您在内部嵌套的四个 grid_3 上的边距。`.omega``<div id="Contact">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T02:42:57.470

`.focus`绑定到[“焦点”](http://en.wikipedia.org/wiki/Focus_%28computing%29)事件（我链接到它是什么的描述而不是事件标准）。这在您选择或单击文本输入时最常见，但它也可以应用于其他元素。

( `mouseenter`also `mouseover`, 但前者在子元素也悬停时不会重复触发) 事件在鼠标进入元素时发生。相反的是`mouseleave`（`mouseout`）。 [http://api.jquery.com/mouseenter/](http://api.jquery.com/mouseenter/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T02:43:57.387

尝试将您的脚本放在`ready`文档的事件中：

```
<script type="text/javascript>
         $(document).ready(function(){
            $("#nav img").hide();
            $(".button").focus(function() {
                $(this).next("img").fadeIn("slow");
            }).blur(function() {
                $(this).next("img").fadeOut("slow");
            }); 
         });
</script> 
```

# html - 悬停时如何使 div 框更改颜色？

> ID：15015943
> 
> 赞同：0
> 
> 时间：2013-02-22T02:38:27.963
> 
> 标签：html, css, hover

我试图让一个白色的 div 框在悬停时变成红色，到目前为止，我的 css 中有这个：

```
#white{
width: 90px;
height: 90 px;
background-color:white;
position: absolute;
top: 10px;
left:10px;
}

a:hover #white{
color:red;
width: 90px;
height: 90 px;
position: absolute;
top: 10px;
left:10px;
} 
```

这在我的html中：

```
<div id="white">
</div> 
```

但它根本不起作用，请帮忙？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T02:45:50.317

您需要返回阅读更多有关 HTML 和 CSS 基础知识的内容。

1.  您正在定位一个不存在的链接。
2.  您没有为悬停状态设置背景颜色，那么它怎么能改变呢？您更改了 TEXT 颜色，但没有更改背景，并且您的问题说您要更改
3.  您在 90 和 px 之间有一个空格，这会破坏您的 CSS。

像这样的东西可能是你想要的：[链接](http://codepen.io/anon/pen/Jvwfh)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T02:41:18.890

问题是`a:hover #white`，您的目标是一个`<a>`标签，该标签与一个具有`id="white"`.

你想用这个：

```
#white:hover {
  ...
} 
```

您还处于您正在使用的悬停事件中`color`，而不是`background-color`.

[http://jsfiddle.net/xuj44/1/](http://jsfiddle.net/xuj44/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T02:57:18.777

这个问题已经得到解答，但似乎你在走路之前就想跑步，[http](http://w3schools.com/) ://w3schools.com/ 可能是每个前端 Web 开发人员开始学习 html/css 的地方 - 它会给你基本的基础知识语言，所以它非常值得通读每个部分。即使是季节开发人员也不得不偶尔回到它只是为了在那里慢跑记忆。祝你好运，继续努力:)

# url - ModX Revo：更新站点的基本 URL？

> ID：15015945
> 
> 赞同：4
> 
> 时间：2013-02-22T02:38:38.253
> 
> 标签：url, configuration, content-management-system, modx, modx-revolution

在选择域名之前，我为客户开发了一个站点。因此，网站页面的 URL 如下所示：

```
http://host.mynost.net/~tempname/index.php?id=8 
```

现在已经购买了一个域名，但如果我点击任何 Wayfinder 链接，它仍然使用上面的旧路径，而不是说：

```
http://domainname.com/index.php?id=8 
```

我假设这是在 config.inc.php 文件中配置的，但我不确定要更改什么。

谁能指出我正确的方向？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T05:19:50.120

您需要更改`$modx_base_url= '/'`，`/core/config/config.inc.php`如果这还不够 - 手动清理`/core/cache/`文件夹。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-15T00:36:53.790

四年后，我已经处理了几个月的同样的事情，并且非常沮丧。

对此问题的更新答案是导航到`Settings (icon) > Context`，然后选择`Key > web (right click) > Update Context > Context Settings`。

更改`http_host`（例如`localhost`）和`site_url`（例如`http://localhost/`）。

现在，从顶部菜单`Manage > Clear Cache`以及`Manage > Clear Cache > Refresh URIs`.

这就像找到一罐金子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-22T14:20:42.803

我有一个关于一些超级旧 Modx 版本的网站，我需要临时设置它以供查看，我遇到了这个问题。

我更改基本 URL 的方式是在数据库中：
**表：** `modx_context_setting`
**键：** `site_url`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T15:38:13.733

这概述了如何将 modx 移动到新位置〜这基本上是你所做的。

[http://rtfm.modx.com/display/revolution20/Moving+Your+Site+to+a+New+Server](http://rtfm.modx.com/display/revolution20/Moving+Your+Site+to+a+New+Server)

通常，您可以通过更新 config.inc.php 并清除缓存来摆脱困境，但最好通过数据库中的系统设置表查找旧路径，一些软件包确实在其中存储路径信息。

# google-maps-api-3 - 谷歌地图 api v3 投影？

> ID：15015946
> 
> 赞同：1
> 
> 时间：2013-02-22T02:38:44.500
> 
> 标签：google-maps-api-3

我想知道谷歌地图使用的是 EPSG:4326 还是 P900913 的投影？另外，如果您使用绘图工具会生成什么投影坐标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T04:32:40.823

[EPSG3857](http://wiki.openstreetmap.org/wiki/EPSG:3857)是官方名称。

> 交互式网络地图使用“球形墨卡托”系统，该系统
> 在球体上使用墨卡托投影，而不是 WGS84 椭球。

[更多信息](http://spatialreference.org/ref/sr-org/google-projection/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T02:59:06.070

> 谷歌地图为此使用墨卡托投影 [https://developers.google.com/maps/documentation/javascript/maptypes#WorldCoordinates](https://developers.google.com/maps/documentation/javascript/maptypes#WorldCoordinates)

# excel - Excel VBA 脚本：如果结束时崩溃

> ID：15015947
> 
> 赞同：1
> 
> 时间：2013-02-22T02:38:48.897
> 
> 标签：excel, vba

> **详细信息：** *在此部分中，我将根据满足的条件，使用“a”引用的单元格中的修改日期值填充“z”引用的单元格。代码在内部 End If 行崩溃。*

代码片段：

```
 If Range(x).Value =1 Then
        If Day(Range(a)) > Day(Range(b)) Then
           Range(z).Value = DateSerial(Year(Range(a)), Month(Range(a)), Day(Range(a)-1)) + TimeSerial(20,0,0)
        Else
           Range(z).Value = DateSerial(Year(Range(a)), Month(Range(a)), Day(Range(a))) + TimeSerial(20,0,0)
        End If
    ElseIf Range(y).Value =1 Then
        Range(z).Value = DateSerial(Year(Range(a)), Month(Range(a)), Day(Range(a)-1)) + TimeSerial(8,0,0)
    Else
        Range(z).Value = Range(a).Value
    End If 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T03:32:09.707

你的代码很好。您的某个范围指向无效数据时遇到问题，或者您的模块中有损坏。

您可以通过将您的穆勒导出到文本文件（在 VBA 编辑器中右键单击模块->导出）来处理损坏，然后导入到干净的工作簿中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T07:58:07.930

它似乎对我来说很好。

我知道已经创建了默认属性以使代码更简洁，并且我意识到对象*不需要*完全限定其父对象，但我并不总是信任`VBA`编译器，所以我的版本比你的稍长（我'已经使用细胞`C1`进行`C5`测试）：

```
Option Explicit

Sub FullyQualified()

With Excel.ThisWorkbook.Sheets("Sheet1")
    If .Range("C1").Value = 1 Then
        If Day(.Range("C3").Value) > Day(.Range("C4").Value) Then
           .Range("C5").Value = DateSerial(Year(.Range("C3").Value), Month(.Range("C3").Value), Day(.Range("C3").Value - 1)) + TimeSerial(20, 0, 0)
        Else
           .Range("C5").Value = DateSerial(Year(.Range("C3").Value), Month(.Range("C3").Value), Day(.Range("C3").Value)) + TimeSerial(20, 0, 0)
        End If
    ElseIf .Range("C2").Value = 1 Then
        .Range("C5").Value = DateSerial(Year(.Range("C3").Value), Month(.Range("C3").Value), Day(.Range("C3").Value - 1)) + TimeSerial(8, 0, 0)
    Else
        .Range("C5").Value = .Range("C3").Value
    End If
End With

End Sub 
```

# django - 非搜索皮卡丘垃圾桶

> ID：15015951
> 
> 赞同：-5
> 
> 时间：2013-02-22T02:39:05.340
> 
> 标签：django, angularjs, web-deployment, web-deployment-project

你好，这可能是新鲜的和绿色的。

我正在寻找建立一个响应式网络，我熟悉 django 但对 AngularJS 很陌生

我想到的后端是使用 MongoDB 的 Deployd.com

我可以知道以下的好处或坏处：

1.  与 django 相比，angularjs 作为 Web 框架

    *   从研究看来，Angular 具有很棒的数据绑定功能
2.  如果是 django，为什么？与 angular 相比，django 可以做的任何事情

    *   （其他角度难以掌握）
3.  angularjs + django 的兼容性

    *   （不要猜测，请有部署经验的人）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T02:42:58.630

Angular 是一个前端 JavaScript 框架。Django 是一个后端服务器框架。他们没有可比性。

# html - Netbeans的手写笔CSS突出显示插件？

> ID：15015953
> 
> 赞同：9
> 
> 时间：2013-02-22T02:39:11.120
> 
> 标签：html, netbeans, netbeans-plugins, stylus

Stylus CSS 预处理器很棒，但是因为我以前在 Netbeans 中编码，所以如果没有颜色突出显示就很难编码。是否有任何适用于 Stylus 的 Netbeans 插件？有的话就完美了！

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-06T15:33:58.920

[这有帮助吗？](http://www.electrictoolbox.com/netbeans-syntax-highlighting-file-extensions/)这说明如何根据文件扩展名进行语法突出显示？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-16T12:06:26.353

最后，我放弃了 Netbeans。[只需在此处从 JetBrains Jet Brains 网站](https://www.jetbrains.com/webstorm/)购买 WebStorm 版本 9 或更高版本即可。它带有 Stylus Highlighting、智能完成辅助，甚至 Stylus-to-CSS 即时转换。如果您是 PHP 开发人员，您可以使用同一开发人员的 PHPStorm

![JetBrains WebStorm](../Images/3f7fe1cbbcc561a8772f40fc23dc37a1.png)

# regex - Bash 脚本 - 需要帮助才能使匹配和替换工作

> ID：15015954
> 
> 赞同：0
> 
> 时间：2013-02-22T02:39:17.327
> 
> 标签：regex, linux, bash, shell

我正在尝试让参数替换在我的 bash 脚本中工作……我知道我搞错了……我正在尝试创建一个脚本来重命名文件的一部分。

```
#!/bin/bash
for i in *.hpp; do  mv -v "$3 ${$3/$1/$2}" ; done 
```

我得到的错误是：

```
line 2: $3 ${$3/$1/$2}: bad substitution 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T02:54:13.620

`${$3}`将尝试插入`${"CONTENTS OF $3"}`变量。更有可能是您想要`${3}`的。更有可能是您想要`${i}`的。

# msbuild - 命令行覆盖 msbuild 的 vcbuild 任务的 /Out 参数

> ID：15015956
> 
> 赞同：0
> 
> 时间：2013-02-22T02:39:24.693
> 
> 标签：msbuild

有没有办法指定输出，如

```
msbuild zlibvc.sln /t:zlibvc  /p:OUT=$(OutDir)\zlib1.dll 
```

例如，将输出从标准 zlibwapi.dll 更改为 zlib1.dll ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T14:29:05.280

对于 C# 项目，我们会在以下两个地方修改 csproject 文件，如下所示：

**前：**

```
<AssemblyName>zlibwapi.dll</AssemblyName> 
```

和

```
<OutputPath>bin\</OutputPath> 
```

**后：**

```
<ZLibAssemblyName Condition="$(ZLibAssemblyName) == '' ">zlibwapi.dll</ZLibAssemblyName>
<AssemblyName>$(ZLibAssemblyName)</AssemblyName> 
```

和

```
<ZLibOutputPath Condition="$(ZLibOutputPath) == '' ">bin\</ZLibOutputPath>
<OutputPath>$(ZLibOutputPath)</OutputPath> 
```

然后调用您的 msbuild 命令，如下所示：

```
msbuild zlibvc.sln /t:zlibvc  /p:ZLibOutputPath=$(OutDir)\ /p:ZLibAssemblyName=zlib1.dll 
```

希望这个或类似的东西也适用于 vcbuild 任务。

# ios - NSManagedObjectModel initWithContentsOfURL 偶尔返回 nil

> ID：15015957
> 
> 赞同：6
> 
> 时间：2013-02-22T02:39:39.713
> 
> 标签：ios, core-data

我正在使用 Core Data 并且在一个实时应用程序中遇到一些情况，我收到一些带有以下错误的崩溃报告：

```
Cannot create an NSPersistentStoreCoordinator with a nil model 
```

我发现这偶尔会在模拟器（以及设备）中发生，**但在任何一个上都不会一直**发生，而且我还没有找到导致它有时而不是其他时间发生的相关性。

在做了一些调试之后，我发现根本原因（从代码的角度来看）是 managedObjectModel 创建方法偶尔返回 nil。这是我在 AppDelegate 中的实现：

```
- (NSManagedObjectModel *)managedObjectModel {
    if (__managedObjectModel != nil) {
        return __managedObjectModel;
    }
    NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"AppName" withExtension:@"momd"];
    __managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];
    return __managedObjectModel;
} 
```

时不时地，我很幸运能够在崩溃发生时运行调试器，并且我已经确认正在调用上述方法，并且该`initWithContentsOfURL:`方法已执行，但返回`nil`.

谁能想到为什么`[[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL]`偶尔会回来`nil`？

# javascript - iOS 4 Safari 和 Android 2.3 浏览器 Modernizr / matchMedia / Enquire.js 缓存问题

> ID：15015965
> 
> 赞同：1
> 
> 时间：2013-02-22T02:40:04.583
> 
> 标签：javascript, ios4, modernizr, android-2.3-gingerbread, enquire.js

我正在使用 enquire.js 为我的一些响应式项目做一些基本的 toggleClass 功能。

对于 Android 2.3 及更低版本和 iOS 4 Safari 等旧版浏览器，以下示例不起作用。

我正在做一些现代化测试，如下所示。较旧的 Android 浏览器和 iOS 4 Safar 不支持 matchMedia，因此 matchMedia polyfill。

我创建了一个测试用例并使用 BrowserStack 对其进行了测试，但它在 iOS 4 及更低版本上失败了。[http://goo.gl/3a3ss](http://goo.gl/3a3ss)，或者一个可能有效也可能无效的小提琴.. [http://jsfiddle.net/jSg6X/](http://jsfiddle.net/jSg6X/)

最初这是在 Drupal 站点上使用的。在初始加载时，一切正常。如果您刷新页面或尝试转到另一个页面，则脚本在 matchMedia 测试中失败。如果您清除浏览器缓存并重新加载，它会再次起作用，但仅适用于该页面。

(函数 ($, 窗口, 文档) {

```
Modernizr.load([
    {
        test: Modernizr.mq('only all'),
        nope: 'js/respond.min.js'
    },
    {
        test: window.matchMedia,
        nope: 'js/matchMedia.js'
    },
    {
        load: 'js/enquire.min.js',
        complete: function(){
            var query = "all and (max-width:600px)";
            var $myButton1  = $(".mybutton1");
                            var $myButton2  = $(".mybutton2");
            enquire.register(query, [
            {
                match: function(){
                    $myButton1.on("click", function(){
                            $(".menu").toggleClass("showme");
                    });
                },
                unmatch: function(){
                    $myButton1.off("click");
                },
                                    match: function(){
                                            $myButton2.on("click", function(){
                                                $(".menu2").toggleClass("showme");
                                            });
                                    },
                                    unmatch: function(){
                                            $myButton2.off("click");
                                    }
            }
            ],true).listen();
        }
    }
]); 
```

})(jQuery, this, this.document);

任何帮助，将不胜感激。我不确定我是否没有正确使用 enquire.js，或者我遗漏了一些东西。

我已经创建了一个进一步简化的测试用例，并且得到了相同的结果。我使用了下面的js（没有意义，我知道，但它会在第一次加载时加载警报，仅此而已）

(函数 ($, 窗口, 文档) {

Modernizr.load([ //第一个测试需要 matchMedia polyfill { test: window.matchMedia, nope: 'js/media.match.min.js', load: 'js/enquire.min.js', callback: function( ){ 警报(“测试”); } } ]);

})(jQuery, this, this.document);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T21:55:30.057

Android 2.3 和 iOS 4 的这个 Github 问题已经在一定程度上解决了这个问题。

[https://github.com/SlexAxton/yepnope.js/issues/95](https://github.com/SlexAxton/yepnope.js/issues/95)

# jquery - jQuery 中是否有类似于 :eq() 的标准 CSS 选择器？

> ID：15015971
> 
> 赞同：27
> 
> 时间：2013-02-22T02:40:37.720
> 
> 标签：jquery, css, jquery-selectors, css-selectors

不知道有没有 CSS 选择器可以和下面这行一样（jQuery 代码）：

```
.tab_cadre_central .top:eq(0) table tbody tr td table tbody tr:eq(3) 
```

我在 CSS 中尝试过这样的事情：

```
.tab_cadre_central .top::nth-child(0) table tbody tr td table tbody nth-child:eq(3) {
    display:none;
} 
```

但它没有用。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-02-22T02:47:50.387

虽然 jQuery`:eq()`使用基于 0 的索引，但`:nth-child()`使用基于 1 的索引，因此您需要适当地增加索引：

```
.tab_cadre_central .top:nth-child(1) table tbody tr td table tbody tr:nth-child(4) 
```

但是你真的应该考虑重构那个选择器......

* * *

⚠ 值得注意的是，虽然`:eq()`和`:nth-child()`可以表现相似 - 它们肯定不一样。`:eq()`将选择集合中的第*n+1*个元素，同时`:nth-child()`将选择集合中的*所有*元素，它们是各自父项的第*n个子项。*⚠</p>

```
<div>
    <span></span>
    <span></span>
</div>
<div>
    <span></span>
</div> 
```

选择器`div span:nth-child(1)`将获取两个元素，而`div span:eq(0)`只会选择一个。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-12-14T02:37:31.917

最佳答案仅在非常严格的情况下和有限的 HTML 结构下才有效。**当您尝试通过 CSS 类或其他 trait 选择元素时，它会导致问题**。让我解释一下，在下面的代码中：

```
<div class="divWrapper">
    <div>1</div>
    <div>2</div>
    <div>3</div>
    <br>
    <div>4</div>
    <div>5</div>
    <div>6</div>
    <br>
    <div>7</div>
    <div>8</div>
    <div>9</div>
</div> 
```

假设我们想在`.divWrapper`浅蓝色背景中给出第 7 个 div，如果你认为这会起作用，那你就错了：

```
.divWrapper > div:nth-child(7) {
  background: lightblue;
} 
```

发生这种情况是因为即使我们选择了作为 div 的子元素，`:nth-child()`实际上不仅将 div 计算在内，而且将该范围内的所有 HTML 元素都计为有效子元素，因此上面的代码绘制了第 6 个 div 而不是第 7 个，因为它考虑了`<br>`中间的标签作为一个有效的孩子。如果您要添加新的 HTML 元素，这会使事情变得非常混乱并破坏您网站的预期设计。

这就是为什么我推荐使用`:nth-of-type()`，如果你试图定位一个 CSS 类或其他属性，就像`:eq()`在 jQuery 中一样。

这可以完成工作：

```
.divWrapper > div:nth-of-type(7) {
  background: lightblue;
} 
```

您可以在此代码笔中看到此示例：[https](https://codepen.io/techbawz/pen/ZEYpBPe) ://codepen.io/techbawz/pen/ZEYpBPe或者您可以直接在此答案上运行代码。

希望这可以帮助。

```
.divWrapper {
  width:100%;
  text-align: center;
}

.divWrapper > div {
  color: white;
  width: 50px;
  height: 20px;
  background: black;
  display: inline-block;
  margin: .5em;
}

/* We paint the first div withing divWrapper green. Works fine! So far... */
.divWrapper > div:nth-child(1) {
  background: green;
}

/* We try to paint the 7th div red. It doesn't work, because our selector is not only considering all divs that are childs of divWrapper, but also the <br> tags that are HTML tags which are children of divWrapper  */
.divWrapper > div:nth-child(7) {
  background: red;
}

/* using nth-of-type, our selector DOES paint the 7th div */
.divWrapper > div:nth-of-type(7) {
  background: lightblue;
}
```

```
<div class="divWrapper">
    <div>1</div>
    <div>2</div>
    <div>3</div>
    <br>
    <div>4</div>
    <div>5</div>
    <div>6</div>
    <br>
    <div>7</div>
    <div>8</div>
    <div>9</div>
</div>
```

# perl - 将函数应用于大型数据集的最快方法

> ID：15015974
> 
> 赞同：0
> 
> 时间：2013-02-22T02:40:54.507
> 
> 标签：perl, function, module, performance

我想知道将函数转换应用于数据集（或列向量）中的每个值的最快方法（就执行时间而言）是什么。以下代码符合，我想知道它是否可以提高效率。

```
#!/usr/bin/perl

use 5.10.0;
use String::Nysiis qw(nysiis);

open( my $l,  '<', 'Strings.txt' )          or die "Can't open locations: $!";
open( my $o,  '>', 'NYSIIS.txt' )          or die "Can't open locations: $!";

while ( my $line = <$l> ) {
  my $transform = nysiis($line);
  print "$line,$transform,\n" ;
  print( $o ("$line,$transform"),"\n" );

}
close $o; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T02:51:48.933

不，只是微信号。

*   不要自动冲洗。
*   将整个文件加载到内存中。
*   如果`nysiis`不关心换行符，请不要咀嚼。
*   不要打印两次。改为使用`tee`。（好的建议期。）

您可以通过并行化获得收益。

# c# - 实体框架 ObjectStateManager 未定义

> ID：15015975
> 
> 赞同：0
> 
> 时间：2013-02-22T02:41:16.750
> 
> 标签：c#, entity-framework

我有一个分布式数据库，我认为在更新时触发事件可能会很好，以便所有用户立即更新他们的数据并找到这篇不错的文章；[英孚活动](http://romiller.com/2009/06/28/entity-framework-events/)

我从[这篇文章](http://msdn.microsoft.com/en-us/data/jj205424)中相信上下文被定义为实体容器名称，在我的例子中是“CertsModelContainer”

但是，当我尝试时；

```
using (CertsModelContainer db = new CertsModelContainer())
{
    db.ObjectStateManager.ObjectStateManagerChanged += (sender, e) =>
    {
        Console.WriteLine(string.Format(
            "ObjectStateManager.ObjectStateManagerChanged | Action: {0}, Object: {1}",
            e.Action,
            e.Element));
    };
} 
```

Visual Studio 通知我 CertsModelContainer 不包含“ObjectStateManager”的定义

我不确定为什么会发生这种情况以及如何解决它，有人可以帮助我吗？
（我正在使用 EF5 并使用 ModelFirst 来生成我的数据库，如果这有什么不同？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T02:45:38.310

CertsModelContainer 是 DbContext 还是 ObjectContext？只有后者有 ObjectStateManager。

如果您正在使用交易，您可以使用 Transaction.TransactionCompleted

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T18:46:40.240

如果您的 CertsModelContainer 是 DbContext，则可以将其强制转换为 IObjectContextAdapter 以访问 ObjectStateManager。

例如：

```
using (CertsModelContainer db = new CertsModelContainer())
{
    ((IObjectContextAdapter)db).ObjectStateManager.ObjectStateManagerChanged += (sender, e) =>
    {
        Console.WriteLine(string.Format(
            "ObjectStateManager.ObjectStateManagerChanged | Action: {0}, Object: {1}",
            e.Action,
            e.Element));
    };
} 
```

# c++ - 无法在 Xcode 中使用 ifstream

> ID：15015976
> 
> 赞同：1
> 
> 时间：2013-02-22T02:41:18.217
> 
> 标签：c++, xcode, ifstream

我是 C++ 的新手，到处都对此进行了研究，但似乎无法弄清楚如何编译它，也不知道为什么。它适用于 Visual C++，但不适用于 Xcode。错误似乎在输入流上。有什么建议么？

错误读取 - “未定义模板的隐式实例化'std::_basic_ifstream >'

```
#include <iostream>
#include <iostream>
#include <string>
using namespace std;

int main()
{
    cout  << "The file is providing the data.";
    ifstream myFile("/Users/me/Desktop/somewords.txt"); // * error

    int i;
    string s;
    double d;
    myFile >> i >> s >> d;
    cout << "here is your data " << endl;
    cout << i << endl << s << endl << d << endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T02:42:42.917

您忘记了`#include <fstream>`，实际上定义了您所有`ifstream`优点的头文件。您包括`<iostream>`了两次（或至少尝试过），也许其中之一本来就是`<fstream>`？

# ruby - Ruby Net::HTTPS SSL 握手错误

> ID：15015983
> 
> 赞同：0
> 
> 时间：2013-02-22T02:41:59.113
> 
> 标签：ruby, openssl, net-http

我有以下代码

```
uri = URI.parse( 'https://my.fancy.uri/with/some/path.ext' )

https = Net::HTTP.new( uri.host, uri.port )
https.use_ssl = true
https.verify_mode = OpenSSL::SSL::VERIFY_PEER
store = OpenSSL::X509::Store.new
store.add_file( File.join( Rails.root, 'config', 'crt', 'correct_ca.crt' ) )
https.cert_store = store

request = Net::HTTP::Post.new( uri.request_uri )
request.set_form_data post_data
request.basic_auth( 'HTTP_USER', 'HTTP_PASS' )
response = https.request( request ) 
```

这会产生一个错误：`OpenSSL::SSL::SSLError: SSL_read:: ssl handshake failure`

我完全被难住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T03:11:32.957

显然 Ruby 在握手期间并没有检查所有的 ssl 版本。我对此了解不多，但补充说：

```
https.ssl_version = :TLSv1 
```

解决了这个问题。

# android - 在 Android 中为 ListView 解析 XML

> ID：15015985
> 
> 赞同：0
> 
> 时间：2013-02-22T02:42:05.507
> 
> 标签：android, xml, parsing, listview

我目前正在为 android listview 解析 xml。我能够解析并获取我的列表视图的数据。但是，如果我想从该 XML 中获取特定数据怎么办。嗯，就像在 SQL“select * from [table] where id = 1”中执行某些操作一样。类似的东西......我怎样才能用我的 XML 做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:23:34.427

```
public class XMLParsing_DisplayListviewActivity extends Activity {
    String res1         = null;
    InputStream is      = null;
    StringBuilder sb    = null;

    public String[] mCD;
    public String[] mTitle;
    public String[] mArtist;
    public String[] mCountry;
    public String[] mCompany;
    public String[] mPrice;
    public String[] mYear;

    ListView listview;

    ProgressDialog mDialog = null; // thread code
    private Runnable viewOrders; // thread code
    private Thread thread1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        listview=(ListView)findViewById(R.id.listview);

        mDialog = new ProgressDialog(this); // thread code
        mDialog.setMessage("Please wait...");

        viewOrders = new Runnable(){
        public void run(){
            load();
            runOnUiThread(returnRes);
        }
    };
    thread1 = new Thread(null, viewOrders, "Background"); // thread
    thread1.start(); // thread code
    mDialog.show();

}

private Runnable returnRes = new Runnable(){
    public void run(){
        mDialog.cancel();
         for(int i=0;i<mCD.length;i++){
                System.out.println("======================");
                System.out.println("Title :- "+mTitle[i]);
                System.out.println("Artist :- "+mArtist[i]);
                System.out.println("Country :- "+mCountry[i]);
                System.out.println("Company :- "+mCompany[i]);
                System.out.println("Price :- "+mPrice[i]);
                System.out.println("Year :- "+mYear[i]);
            }

         listview.setAdapter(new CustomAdapter(XMLParsing_DisplayListviewActivity.this));       

    }
};

public void load() {
    //mLoading = true;
    Document doc = null;
    HttpURLConnection urlConnection = null;
    URL url = null;
    try {
        //url = new URL(urlString.toString());
        url = new URL("http://www.xmlfiles.com/examples/cd_catalog.xml");
        urlConnection = (HttpURLConnection) url.openConnection();
        urlConnection.setRequestMethod("GET");
        urlConnection.setDoOutput(true);
        urlConnection.setDoInput(true);
        urlConnection.connect();
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        doc = db.parse(urlConnection.getInputStream());
    } catch (Exception e) {
        System.out.println("e"+e.toString());
    }
    try {
        NodeList nodes = doc.getElementsByTagName("CD");
        // iterate the employees

        mCD=new String[nodes.getLength()];
        mTitle=new String[nodes.getLength()];
        mArtist=new String[nodes.getLength()];
        mCountry=new String[nodes.getLength()];
        mCompany=new String[nodes.getLength()];
        mPrice=new String[nodes.getLength()];
        mYear=new String[nodes.getLength()];

        for (int i = 0; i < nodes.getLength(); i++) {
           Element element = (Element) nodes.item(i);

           NodeList cd = element.getElementsByTagName("CD");
           Element line = (Element) cd.item(0);
           mCD[i]=getCharacterDataFromElement(line);               

           NodeList title = element.getElementsByTagName("TITLE");
           line = (Element) title.item(0);
           mTitle[i]=getCharacterDataFromElement(line);
           //System.out.println("catcatcatmidmidmidmidName: " + getCharacterDataFromElement(line));

           NodeList artist = element.getElementsByTagName("ARTIST");
           line = (Element) artist.item(0);
           mArtist[i]=getCharacterDataFromElement(line);
           //System.out.println("salary: " + getCharacterDataFromElement(line));

           NodeList country = element.getElementsByTagName("COUNTRY");
           line = (Element) country.item(0);
           mCountry[i]=getCharacterDataFromElement(line);

           NodeList company = element.getElementsByTagName("COMPANY");
           line = (Element) company.item(0);
           mCompany[i]=getCharacterDataFromElement(line);

           NodeList price = element.getElementsByTagName("PRICE");
           line = (Element) price.item(0);
           mPrice[i]=getCharacterDataFromElement(line);

           NodeList year = element.getElementsByTagName("YEAR");
           line = (Element) year.item(0);
           mYear[i]=getCharacterDataFromElement(line);

        }
    }
    catch (Exception e) {
        e.printStackTrace();
    }
}

  public static String getCharacterDataFromElement(Element e) {
    Node child = e.getFirstChild();
    if (child instanceof CharacterData) {
       CharacterData cd = (CharacterData) child;
       return cd.getData();
    }
    return "?";
  }

  public class CustomAdapter extends BaseAdapter {
    private Context mContext;
    Application app;
    private LayoutInflater inflater=null;

    public CustomAdapter(Context c) {
        mContext = c;
         inflater = (LayoutInflater)mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }   

    public int getCount() {
        return mTitle.length;

    }

    public Object getItem(int position) {
        return null;
    }

    public long getItemId(int position) {
        return 0;
    }

    // create a new ImageView for each item referenced by the Adapter
    public View getView(int position, View convertView, ViewGroup parent) {

        View vi=convertView;
        if (convertView == null)        
             vi = inflater.inflate(R.layout.list, null);

        TextView txt=(TextView)vi.findViewById(R.id.txtview_title);
        TextView txt1=(TextView)vi.findViewById(R.id.txtview_artist);
        TextView txt2=(TextView)vi.findViewById(R.id.txtview_country);
        TextView txt3=(TextView)vi.findViewById(R.id.txtview_company);
        TextView txt4=(TextView)vi.findViewById(R.id.txtview_price);
        TextView txt5=(TextView)vi.findViewById(R.id.txtview_year);

        txt.setText("Title : " + mTitle[position]);
        txt1.setText("Artist : " + mArtist[position]);
        txt2.setText("Country : " + mCountry[position]);
        txt3.setText("Company : " + mCompany[position]);
        txt4.setText("Price : " + mPrice[position]);
        txt5.setText("Year : " + mYear[position]);

        return vi;
    };
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T02:56:05.013

您应该只解析 xml 文件一次并从中创建一个数组或对象列表。一旦你把所有的东西都放在内存上，你就可以使用数组来用[ArrayAdapter](http://developer.android.com/reference/android/widget/ArrayAdapter.html)填充你的列表。数组中的位置可以作为你的id。如果您希望对象的属性是 id 而不是位置，那么您可以相应地对数组进行排序。

# java - do-while 循环无法正常工作

> ID：15015995
> 
> 赞同：2
> 
> 时间：2013-02-22T02:43:34.753
> 
> 标签：java, do-while

好的，所以基本上我很难找出为什么这不能像我认为的那样工作，并且需要帮助才能获得正确的输出。我已经尝试过几种方法来弄乱这种格式，但没有任何效果，我真的不明白为什么。以下是说明，然后是我的来源：

## 指示

编写一个循环，从标准输入中读取字符串，其中字符串为“land”、“air”或“water”。读入“xx​​xxx”（五个 x 字符）时循环终止。忽略其他字符串。循环后，您的代码应打印出 3 行：第一行由字符串“land:”组成，后跟读入的“land”字符串数，第二行由字符串“air:”组成，后跟“ air" 字符串读入，第三个由字符串 "water:" 后跟读入的 "water" 字符串的数量组成。每个字符串都应打印在单独的行上。

假设变量 stdin 的可用性，它引用与标准输入关联的 Scanner 对象。

## 资源：

```
int land = 0;
int air = 0;
int water = 0;

do
{
     String stdInput = stdin.next();
        if (stdInput.equalsIgnoreCase("land"))
        {
            land++;
        }else if (stdInput.equalsIgnoreCase("air"))
        {
            air++;
        }else if (stdInput.equalsIgnoreCase("water"))
        {
            water++;
        }
}while (stdin.equalsIgnoreCase("xxxxx") == false); // I think the issue is here, I just dont't know why it doesn't work this way
System.out.println("land: " + land);
System.out.println("air: " + air);
System.out.println("water: " + water); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T02:46:55.903

您正在存储用户信息，`stdInput`但您的 while 检查`stdin`。试试这个方法

```
String stdInput = null;

do {
    stdInput = stdin.next();

    //your ifs....

} while (!stdInput.equalsIgnoreCase("xxxxx")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-27T02:38:41.890

## 这工作:)

**我刚刚将此代码提交给 codelab，它工作得很好。**

编写一个循环，从标准输入中读取字符串，其中字符串为“land”、“air”或“water”。当读入“xx​​xxx”（五个 x 字符）时循环终止。其他字符串被忽略。循环后，您的代码应打印出 3 行：第一行由字符串“land:”组成，后跟读入的“land”字符串数，第二行由字符串“air:”组成，后跟“ air" 字符串读入，第三个由字符串 "water:" 后跟读入的 "water" 字符串的数量组成。每个字符串都应打印在单独的行上。

```
int land = 0;
int air = 0;
int water = 0;
String word = "";
while(!(word.equals("xxxxx"))) {
 word = stdin.next();
if(word.equals("land")) {
    land++;
}else if(word.equals("air")) {
    air++;
}else if(word.equals("water")) {
    water++;
} 
}
System.out.println("land:" + land);
System.out.println("air:" + air);
System.out.println("water:" + water); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T02:46:50.580

我想你想要`stdInput.equalsIgnoreCase("xxxxx") == false`而不是`stdin.equalsIgnoreCase("xxxxx") == false`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T02:47:08.543

你是对的 - 问题出在你指出的地方。解决方案是*不再*从标准输入读取：

此外，您必须在循环`stdInput` *之前*声明，以便其范围达到 while 条件：

```
String stdInput = null;
do {
    stdInput = stdin.next();
    // rest of code the same
} while (!stdInput.equalsIgnoreCase("xxxxx")); 
```

另一种方法是 for 循环：

```
for (String stdInput = stdin.next(); !stdInput.equalsIgnoreCase("xxxxx"); stdInput = stdin.next()) {
    // rest of code the same
} 
```

# jquery - 使用 jQuery Masonry “加载更多帖子”

> ID：15015996
> 
> 赞同：2
> 
> 时间：2013-02-22T02:43:40.497
> 
> 标签：jquery, append

我已经为自定义页面模板（Wordpress）实现了 Masonry。我已经规定只显示前 10 个帖子。但是，我想创建一个“加载更多”链接，以便显示接下来的 10 个帖子，依此类推，直到 Masonry 到达最后一个帖子。

我对 append 方法以及如何正确使用它的语法不太了解。例如，如果容器是#newsContainer 并且每个图块是 .newsContainerPost，我将如何正确地将它放入（下）？

```
$('#append').click(function(){
  var $boxes = $( boxMaker.makeBoxes() );
  $container.append( $boxes ).masonry( 'appended', $boxes );
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T00:52:59.987

您需要采取一些步骤来实现这一点。首先，您需要使用[AJAX](http://api.jquery.com/jQuery.ajax/)调用您的数据库并获取项目（在本例中为帖子）。您很可能希望返回一个 JSON 字符串，该字符串可以被解析以构建您的帖子的 HTML 标记。一个例子是：

```
$.ajax({
    type: "POST",
    url: "path/to/load-more.php",
        context: document.body,
        success: function(data) {
            if(!data){
                 //possible errors
                 return false;
            }
            var posts = JSON.parse(data);
            var container = document.getElementById('container')
            for(var i in posts){
               var post = posts[i];
               //now post will have info like post.image, post.title
               //post.excerpt, and whatever else you put in the php script
               //build the post with HTML and append it to the container
               //and [reload masonry][2] eaxmple
               var div = document.createNode('div');
               var h1 = document.createNode('h1');
               h1.innerHTML = post.title;
               div.appendChild(h1);
               container.appendChild(div);
               container.masonry( 'reload' );                   
            }
        }
    }); 
```

其次，您需要将`load-more.php`10 个帖子作为 JSON 字符串返回。您将需要[在引擎之外运行 WP 循环](http://css-tricks.com/snippets/wordpress/run-a-loop-outside-of-wordpress/)。

```
<?php
    // Include WordPress
    define('WP_USE_THEMES', false);
    require('/server/path/to/your/wordpress/site/htdocs/blog/wp-blog-header.php');
    query_posts('showposts=10');
    $arr = new array();
while ($wp_query->have_posts()) : $wp_query->the_post();
    //put in whatever info you want from the post in a new
    //array index
    $arr[the_ID()]['title'] = the_title();
endwhile;

return json_encode(arr); 

?> 
```

将 ajax 调用放在一个函数中，并在要加载更多的事件上调用该函数；比如点击一个按钮，或者滚动到页面底部。

我希望这有帮助。