# StackOverflow 问答 12677000-12677999

# .net - 如何使用 XPath 伪造一个不存在的 XML 节点？

> ID：12677000
> 
> 赞同：1
> 
> 时间：2012-10-01T16:10:20.880
> 
> 标签：.net, xml, xpath

我知道这是一个奇怪的问题！

该要求是由于现有代码期望 XPath 查询的结果是单个节点。不幸的是，由于我们无法控制的因素，我们目前无法更改代码（除非不存在解决方法，这可能意味着我们将不得不推迟发布）。

就我而言，XPath 当前返回一个整数值（计数）：

```
count(/someNode/node) 
```

代码使用`XPathNavigator.SelectSingleNode()`方法，当然，因为结果不是节点而失败。

相反，我需要 XPath 来返回一个节点，尽管它是一个假的。是否可以？请注意，因为使用了 .NET，所以 XPath 必须是 1.0（而不是 2.0）。

PS 而且，是的，我们会尽快研究重构有问题的代码！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T16:45:05.370

XPath 在输入文档中选择节点，它不能创建新节点或“假”节点，所以我认为如果你想评估`count(/someNode/node)`你需要使用`Evaluate`方法[http://msdn.microsoft.com/en-us/的表达式library/2c16b7x8.aspx](http://msdn.microsoft.com/en-us/library/2c16b7x8.aspx)而不是`SelectSingleNode`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T18:36:09.950

如果您需要 XPath 表达式返回其文本内容等于 的值的节点`count(/someNode/node)`，您可以这样做：

```
"(//text() | //*/@*)[. = count(/someNode/node)]" 
```

这可能非常低效，具体取决于您的输入文档是什么样的；如果输入文档中没有包含正确数字的文本节点，它很可能会失败。但是在某些情况下，它可以解决问题，并且可以帮助您避免延迟发布。

For example, if your input XML is small, and the range of possible values for the `count(...)` is limited, and if you are able to make changes to the XML, then you could include extra text or attribute nodes in your input XML to make sure the needed numbers are available.

# git - 从 bash 脚本中退出 git log

> ID：12677002
> 
> 赞同：7
> 
> 时间：2012-10-01T16:10:26.167
> 
> 标签：git, bash, mingw, pager

我正在尝试编写一个“实时 git log”bash 脚本。这是到目前为止的代码：

```
#!/bin/sh
while true;
do
    clear
    git log --graph -10 --all --color --date=short --pretty=format:"%Cred%x09%h %Creset%ad%Cblue%d %Creset %s %C(bold)(%an)%Creset"
    sleep 3
done 
```

我的问题是 git log 使用寻呼机，您必须按`q`退出，否则它将永远坐在那里。有没有办法在 bash 中对退出命令进行编码？我尝试呼应 q，但没有运气。（我在这里看到另一篇建议 echo "q" > /dev/console 的帖子——但我的环境中没有开发控制台）

系统：win7 box - 使用 mingw (1.7.6.msysget.0) 模拟 bash

**更新**

这是完成的脚本

```
#!/bin/sh
while true;
do
    clear
    git log \
    --graph \
    --all \
    --color \
    --date=short \
    -40 \
    --pretty=format:"%C(yellow)%h%x20%C(white)%cd%C(green)%d%C(reset)%x20%s%x20%C(bold)(%an)%Creset" |
    cat -
    sleep 15
done 
```

-40 是个人品味。将其更改为适合您和终端屏幕尺寸的任何数字。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-01T16:16:30.627

Adding --no-pager is the way to go.:

```
git --no-pager log 
```

So the full command would be

```
git --no-pager log --graph -10 --all --color --date=short --pretty=format:"%Cred%x09%h %Creset%ad%Cblue%d %Creset %s %C(bold)(%an)%Creset" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-01T16:15:35.333

试试下面的代码：

```
git log \
    --graph -10 \
    --all \
    --color \
    --date=short \
    --pretty=format:"%Cred%x09%h %Creset%ad%Cblue%d %Creset %s %C(bold)(%an)%Creset" |
    cat - 
```

**编辑**

`| cat -`并非特定于 git，当您有一个寻呼机并且您想要打印到时，它适用于每个用例`STDOUT`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T16:12:51.653

设置，在您的脚本中：

```
export PAGER= 
```

会成功的

# php - Zend_Service_Twitter - 准备好 API v1.1

> ID：12677004
> 
> 赞同：14
> 
> 时间：2012-10-01T16:10:44.687
> 
> 标签：php, zend-framework, twitter, twitter-oauth

Zend_Service_Twitter 组件仍然适用于 Twitters API v1.0，它将在 2013 年 3 月 5 日弃用。所以我想让我的新网站准备好 Twitter API 交互 v1.1。v1.0 一切正常，但如果我将 URL 从 更改为`/1/`失败`/1.1/`，HTTP 标头代码 400 和 JSON 错误消息：（`Bad Authentication data`代码：215）

为了让请求和访问令牌保持不变并且已经工作没有任何更改，但是如果我想验证这样的凭据，我会收到上面描述的错误：

```
// Take a look for the code here: http://framework.zend.com/manual/1.12/en/zend.oauth.introduction.html
$accessToken = $twitterAuth->getAccessToken($_GET, unserialize($_SESSION['TWITTER_REQUEST_TOKEN']));

// I have a valid access token and now the problematic part
$twitter = new Zend_Service_Twitter(array(
    'username' => $accessToken->getParam('screen_name'),
    'accessToken' => $accessToken
));
print_r($twitter->account->verifyCredentials()); 
```

我将 verifyCredentials 的代码`Zend/Service/Twitter.php`从那个更改为：

```
public function accountVerifyCredentials()
{
    $this->_init();
    $response = $this->_get('/1/account/verify_credentials.xml');
    return new Zend_Rest_Client_Result($response->getBody());
}

// to

public function accountVerifyCredentials()
{
    $this->_init();
    $response = $this->_get('/1.1/account/verify_credentials.json');
    return Zend_Json::decode($response->getBody());
} 
```

现在我在`return Zend_Json[...]`这一行之前添加了：

```
print_r($this->_localHttpClient->getLastRequest());

// And I get this output of it:

GET /1.1/account/verify_credentials.json HTTP/1.1
Host: api.twitter.com
Connection: close
Accept-encoding: gzip, deflate
User-Agent: Zend_Http_Client
Accept-Charset: ISO-8859-1,utf-8
Authorization: OAuth realm="",oauth_consumer_key="",oauth_nonce="91b6160db351060cdf4c774c78e2d0f2",oauth_signature_method="HMAC-SHA1",oauth_timestamp="1349107209",oauth_version="1.0",oauth_token="hereismytoken",oauth_signature="hereisavalidsignature" 
```

正如你所看到的`oauth_consumer_key`（`realm`也）是空的。那可能是错误吗？我该如何解决这个错误（因为更严格的新 API 版本？）？以某种方式设置是否可以`oauth_consumer_key`？如果是，我该如何管理？

编辑：我还发现了关于 Zend 框架问题跟踪器的错误报告：http: [//framework.zend.com/issues/browse/ZF-12409](http://framework.zend.com/issues/browse/ZF-12409)（也许做一个赞成？）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-14T17:40:10.773

对于 ZF 1.12.3，解决方法是在 oauthOptions 选项中传递 consumerKey 和 consumerSecret，而不是直接在选项中传递。

```
 $options = array(
            'username' => /*...*/,
            'accessToken' => /*...*/,
            'oauthOptions' => array(
                'consumerKey' => /*...*/,
                'consumerSecret' => /*...*/,
            )
        ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T16:18:07.773

当您等待在 Zend_Twitter_Service 组件中修复此问题时，您可以执行以下解决方法：

您需要将*customerKey*和*customerSecret*发送到 Zend_Service_Twitter

```
$twitter = new Zend_Service_Twitter(array(
                'consumerKey' => $this->consumer_key,
                'consumerSecret' => $this->consumer_secret,
                'username' => $user->screenName,
                'accessToken' => unserialize($user->token)
)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-12T12:52:29.053

```
 $this->_session = new Zend_Session_Namespace('auth_twitter');
    $config = Zend_Registry::get('config')->twitter->toArray();
    $access_tokenSession = unserialize($this->_session->access_token);

    $accessToken = new Zend_Oauth_Token_Access();
    $accessToken->setToken($access_tokenSession->oauth_token);
    $accessToken->setTokenSecret($access_tokenSession->oauth_token_secret);

    $temp = array();
    $temp['oauthOptions']['consumerKey'] = $config['consumerKey'];
    $temp['oauthOptions']['consumerSecret'] = $config['consumerSecret'];
    $temp['accessToken'] = $accessToken;
    $temp['username'] = $access_tokenSession->screen_name;

    $this->_twitter = new Zend_Service_Twitter($temp, null);

    $this->_twitter->account->accountVerifyCredentials()->toValue() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T14:56:47.547

今天我有同样的问题 - Zend Framework 与 API 1 一起工作。

我创建了新类

```
class Zend_Service_Twitter11 extends Zend_Service_Twitter 
```

并覆盖我需要的功能。

```
statusUpdate
statusReplies 
```

ETC

# objective-c - iOS 6 无需用户交互即可发送电子邮件

> ID：12677005
> 
> 赞同：4
> 
> 时间：2012-10-01T16:10:46.353
> 
> 标签：objective-c, email, ios6

首先，我正在开发一个内部应用程序，所以我不需要 App Store 的批准。我知道它永远不会被接受，但这是我们的用户共享应用程序的某些内容的业务规则，但使用默认消息和主题，因此他们无法编辑这些字段..

在 iOS 5 之前，我能够通过视图层次结构导航并使字段不可编辑。但是对于 iOS 6，以及另一个进程上的邮件，我不能再这样做了。我需要阻止视图进行编辑（我在所有邮件视图上放置了一个视图，标题栏除外，它可以工作，但是当用户尝试取消电子邮件时，我的视图阻止弹出框删除或保存草稿）或在没有 UI 的情况下发送电子邮件（我能够在 iOS 4 或 5 上使用基于 Stealth Messenger 的代码 (https://github.com/0xced/Stealth-Messenger/) 来做到这一点，但现在它没有不工作）。

我尝试了使用私有 API 和 Objective-C 运行时所能做的一切。我可以通过发送电子邮件来关闭视图，但电子邮件本身没有发送。

有谁能够帮我？有人做过吗？

提前致谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T16:15:16.337

看看这个：[从 iOS 后台发送电子邮件](https://stackoverflow.com/questions/10185756/send-email-in-background-from-ios)

> IOS不支持后台发邮件。[...] 作为替代方案，您应该为此实现 WebService [...]

可能最好的选择是利用一些服务器代码并使用 NSURLRequest 调用它。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:00:37.970

我在我的应用程序中执行此操作。我在使用 PearPHP 邮件模块发送 SMTP 邮件的网络服务器上有一个简单的 PHP 脚本。PHP 脚本接受一些传入变量，例如 $toAddress、$subject、$message，然后连接到 SMTP 服务器并将邮件发送出去。

不幸的是，您不能继承 MFMailComposeViewController，如果您使用某种 Invisible UIView 来阻止字段，那只是一种可能已被破坏的解决方法。（他们做了同样的事情，能够在 NumberPad 键盘上插入“.”）

# regex - 正则表达式字数 - 匹配带有撇号的单词

> ID：12677008
> 
> 赞同：0
> 
> 时间：2012-10-01T16:10:57.353
> 
> 标签：regex

我正在尝试使用正则表达式计算单词，其模式如下：
`@"\\w+"`

这有效，但是它与它匹配：

*   它
*   s

有没有更好的方法来匹配包含标点符号的单词？

此外，标点符号包围的单词，例如`'word'`也应该匹配（没有'）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:14:45.587

测试此类情况的一种方法是：

```
@"\\w+(?:'\\w+)?" 
```

所以它会同时匹配`its`and `it's`，但只匹配`its`in `its'`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T16:29:22.310

我发现这种风格可读，这是带有连字符的。

`'?([a-zA-z'-]+)'?`

这是没有连字符的

`'?([a-zA-z']+)'?`

如果您想通过视觉反馈进行快速而肮脏的正则表达式测试，您可以使用众多在线正则表达式测试工具之一，我喜欢[rubular.com](http://www.rubular.com/)（即使对于非 ruby​​ 正则表达式测试）

# azure - 'Lucene.Net.Store.FSDirectory' 的类型初始化程序引发异常' 错误

> ID：12677009
> 
> 赞同：1
> 
> 时间：2012-10-01T16:10:58.460
> 
> 标签：azure, lucene.net

我正在使用 Azure Library for Lucene.net (ALL) 在我的测试 Azure 帐户上创建和搜索索引。

已设置 Blob 存储并能够使用 Azure 门户和 Azure 存储资源管理器访问它。

在将索引写入 blob 存储以及读取我在本地创建并手动向上移动的 Lucene.net 索引时遇到问题。

似乎在倒退，因为最初我能够看到 ALL 能够创建 write.lock，但首先要做的是......

现在我得到一个'Lucene.Net.Store.FSDirectory'的类型初始化器抛出异常'错误。

我正在使用 blob 存储连接字符串，如下所示： DefaultEndpointsProtocol=http; 帐户名=; 帐户密钥=;

现在失败的代码是：

```
var account = CloudStorageAccount.Parse(BlobStorageConnectionString);
AzureDirectory azureDirectory = new AzureDirectory(account, indexByName); 
```

注意：是的，我可能应该从配置文件中读取；只是试图让它正常工作，并且帐户 var 似乎有效。

关于我应该调查什么的想法？

# android - 开发支持蓝牙的跨移动应用程序的最佳方法是什么？

> ID：12677027
> 
> 赞同：8
> 
> 时间：2012-10-01T16:12:24.837
> 
> 标签：android, ios, java-me, bluetooth, cross-platform

我在[此处](http://phonegap.com/about/feature)阅读了有关 Phonegap 的本机功能支持的信息。显然，它没有提到蓝牙支持。我未能找到或定位任何其他具有跨移动平台开发支持的平台。结果，我目前面临*两个选择*。

1.  为所有平台独立构建（非常痛苦的选择）

2.  找到合适的跨平台开发解决方案（我还没有找到）。

我的问题是；对于那里的移动开发人员，您建议我采用哪个选项，一个未在此处列出？如果可能的话，还有助于详细说明利弊。

非常感谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T16:34:17.980

> 为所有平台独立构建（非常痛苦的选择）

以我的经验，这是迄今为止最*不*痛苦的选择，而不仅仅是蓝牙。当您获得真正的生产产品时，处理泄漏的跨平台抽象的开销往往超过收益。构建出色的 iPhone 应用程序。构建出色的 Android 应用程序。你可以分享很多 UI 设计（虽然不是全部）。您可以共享大部分数据结构设计。可以分享一些内部架构。您可以共享任何网络协议（特别是如果您使用 JSON 设计它们）。但要避免代码共享，避免为最小公分母而拍摄。还差得很远。。。。

对于某些类型的项目，在平台之间共享一些 C++ 代码是有意义的。当您超出最基本的应用程序时，尝试用 JavaScript 开发这些东西是一种挫败感。在移动 JavaScript 中破解一些有效的东西很容易。很难让它在所有平台上看起来和工作都很好；比一开始就在本地编写它们要困难得多。

关于此的更多讨论：

*   [移动开发 - 原生 VS 跨平台 VS JavaScript](https://stackoverflow.com/questions/8865277/mobile-development-native-vs-cross-platform-vs-javascript/8866170#8866170)
*   [如何在 Android 和 iOS 之间共享代码](https://stackoverflow.com/questions/3665386/how-to-code-sharing-between-android-and-ios/5234868#5234868)（我在这里讨论如何共享大型、已建立的 C++ 代码库。但这不适用于新开发。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T16:44:14.160

您将 iOS 列为您想要的平台之一。在 iOS 上，任何通用蓝牙通信（除了蓝牙 LE 或通过 Gamekit、耳机或键盘进行的通信）仅适用于 Apple MFi 程序被许可人。要获取有关此许可证的任何详细信息，您需要先申请 Apple 的 MFi 计划。AFAIK，没有第 3 方或跨平台工具链可以在 iOS 上为您提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-21T09:17:34.610

我不相信 OP 谈论的是 iOS 应用程序到设备的通信，而是点对点蓝牙通信。Apple MFi 程序许可的要求是否适用？

如果是这样，Android 或 Windows Phone 8 上的点对点蓝牙 API（和硬件）是否与 iOS 兼容？如果是这样，通过 JSON 传递数据是否应该相当直接地用于构建跨移动应用程序？

恕我直言，对于简单的商业应用程序，如果您想充分利用每个平台上的可用资源并符合它们不同的 UI 设计原则，那么为每个平台构建原生应用程序是一种方法。

# php - 为什么我的 Profiling/Benchmarking 显示的性能比 Google Chrome Devtool 好得多

> ID：12677029
> 
> 赞同：2
> 
> 时间：2012-10-01T16:12:30.800
> 
> 标签：php, google-chrome, solr, benchmarking, laravel

我正在对我的应用程序进行基准测试，以查看我在哪里提高了网站的性能。我正在使用 PHP 框架 Laravel 并针对 Solr 执行搜索。基准测试是通过`microtime()`使用 Laravel 的`Profiler`类进行比较和记录来完成的。

**我的基准测试结果：**

```
Start function                                         msec
Creating the query                                     2.50196456909 msec
Executing query and getting results (PHP & Solr)       37.4531745911 msec
    \->Executing query (as reported by Solr QTime)     21 msec
Processing Solr results                                11.666059494 msec 
```

**Chrome 的网络标签**

```
Latency time reported by Chrome:                       196ms 
```

![在此处输入图像描述](../Images/adba33cca030a4b4003605fb9af8d173.png)

**问题：**`Waiting` Chrome ( ) 报告的时间与我记录的时间似乎有 130 毫秒 (~300%) 的差异。似乎是什么导致了这种差异，我应该如何摆脱它？

*唯一没有包含在我的基准测试中的是`json_encode()`最终数组在`return`将其发送到浏览器之前所花费的时间。*

另外，我应该如何减少`connecting`时间，为什么这么长？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:26:19.160

Chrome 会报告从请求点到浏览器渲染完成的基准，而 Laravel 基准配置文件仅涵盖服务器内。所以肯定会有区别。

# android - 为什么我在我的 android 应用程序中得到错误的计算结果？

> ID：12677031
> 
> 赞同：0
> 
> 时间：2012-10-01T16:12:37.333
> 
> 标签：android, double

在我的应用程序中，我使用它来计算一个数字：

```
double result = ((a * a) + (b * b) - (2 * a * b)); 
```

如果 a 例如 a = 2 和 b = 3.9，那么结果应该是 3.61。但是，当我显示“结果”时，我得到的数字是 3.610000000000001。

这里有什么问题？我该如何纠正这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T16:28:17.190

您可以使用以下构造格式化输出值：

```
String result;
twoDForm = new DecimalFormat("#0.00");
result = twoDForm.format(value); 
```

在此之后，结果您将获得 X.XX 格式的值

# xml - 如何在 SDL Tridion 中保留 xml 文件的处理指令？

> ID：12677032
> 
> 赞同：7
> 
> 时间：2012-10-01T16:12:37.210
> 
> 标签：xml, tridion, processing-instruction

我正在尝试在组件 xml 的源视图中向我的 xml 文件添加处理指令。例如：

```
<?altova_sps C:\Users\src\sps\2012\spsfile.sps?>
<my_element xmlns="uuid:8d903098-e607-4d96-90a7-14d2d188dab7">
  ...
</my_element> 
```

点击保存后，Tridion CME 自动删除了处理指令。有没有办法改变这种行为？

（我想添加处理指令，以便我可以使用 WebDAV 在 Authentic View 中使用 XMLSpy 打开 xml 文件）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T00:55:31.960

我对此进行了一些研究，但我不相信这可以在 CMS 中完成。但是，您可以通过创建 HTTPModule 或代理或某种形式来实现此目的，这些形式将向 CME 的 /webdav 目录发出的请求和响应进行转换。

从概念上讲，当 XMLSpy 发出请求时，新模块将根据作为组件的项目和它所基于的模式将所需的指令预先添加到 XML。然后，当您保存（POST）数据时，它需要再次将其剥离。这将使 XML 结构保持 SDL Tridion 所需的格式。

希望有帮助

克里斯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T23:47:04.513

我将其发布为一个想法-尽管我无法让它完全按照您的意愿行事。我已经编写了一个 EventHandler 来操作 XMLSpy 收到的 XML（以及此时包括 CME 在内的所有客户端）

```
using System;
using System.Text;
using System.Xml;
using Tridion.ContentManager.Extensibility.Events;
using Tridion.ContentManager.Extensibility;
using Tridion.ContentManager.ContentManagement;
using System.IO;

namespace UrbanCherry.Net.SDLTridion.EventHandlers
{
    [TcmExtension("AppendAuthenticHeaders")]
    public class AppendAuthenticHeaders : TcmExtension
    {
        public AppendAuthenticHeaders()
        {
            Subscribe();
        }

        public void Subscribe()
        {
            EventSystem.Subscribe<Component, LoadEventArgs>(AppendAuthenticHeader, EventPhases.Processed);
        }

        private void AppendAuthenticHeader(Component source, LoadEventArgs args, EventPhases phase)
        {
            if (source.ComponentType != ComponentType.Multimedia)
            {
                XmlDocument newXml = new XmlDocument();
                newXml.LoadXml("<?altova_sps C:\\Users\\src\\sps\\2012\\spsfile.sps?>" + source.Content.OuterXml);
                source.Content = newXml.DocumentElement;
            }
        }

    }
} 
```

我尝试操作输出（通过替换字符串），它确实通过 WebDAV 显示在 XMLSpy 中。我遇到的问题是添加处理指令不在 DocumentElement 范围内，因此永远不要将其添加到新的 XML 中。

所以我知道这并不能解决您的挑战 - 但也许其他人知道一个事件，当通过 WebDAV 磁带以类似方式加载 XML 时，该事件将允许您附加指令。

希望其他人可以帮助您关闭这个 - 如果我有时间，我会再挖掘一点

# mysql - 如何从命令行导入 MySQL 转储 WITH 覆盖

> ID：12677037
> 
> 赞同：22
> 
> 时间：2012-10-01T16:12:49.303
> 
> 标签：mysql, import, overwrite

我用谷歌搜索了很多，我什么也没找到！

```
[root@someday backups]# mysql -u username_1 -p db_1 < tables_to_import/tables.sql 
ERROR 1050 (42S01) at line 19: Table 'ps_customer' already exists 
```

与`mysql -f`是相同的。我希望简单地导入那个 .sql 并重写那个表，有人可以帮我吗？

ps 我知道当您导出数据库时，您可以选择“DROP TABLE”选项，但如果我有备份，没有此声明？我怎么能强迫？谢谢

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2015-07-17T19:05:48.107

当您执行 mysqldump 添加 --add-drop-table （如提到的 twihoX ）。然后像往常一样进行导入。所以像：

```
mysqldump --add-drop-table -u user -p db_1 > dumpfile.sql

mysql -u user -p db_1 < dumpfile.sql 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-01T16:29:52.797

您是否要覆盖整个数据库？如果是这样，您可以手动删除所有表，然后运行导入脚本。这在 phpmyadmin 中很容易做到。如果您使用的是 CLI，最快的方法是使用`DROP DATABASE databasename`然后`create database`，尽管我认为您必须为任何非 root 用户重新授予权限。

另一种选择是打开您的转储文件并`DROP TABLE tablename`在每个 CREATE TABLE 命令之前添加。您可以使用一些聪明的正则表达式轻松地做到这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-17T16:15:25.437

我建议 --add-drop-table 选项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-11-19T01:24:52.993

我知道这个问题有点老了，它已被标记为已正确回答，我只想在这里为那些在导出时不使用 --add-drop-table 的人（比如我）添加这个。

您可以做的是登录 MySQL 并删除您计划覆盖的表，然后在导入时使用 --force。

所以登录MySQL

```
mysql -h HOSTNAME - USERNAME -p 
```

然后告诉mysql你想使用哪个数据库

```
mysql> use DATABASE_NAME 
```

删除要覆盖的表

```
mysql> DROP TABLE my_images; 
```

Then you are ready to import, so log out of mysql and back to where your SQL file was uploaded and run the following command

```
$ mysql --force -uDB_USER -p DB_NAME < myuploadedfile.sql 
```

This will force MySQL to continue importing any new tables and ignore the 'table already exists error'

# c# - 用于页面框架的 C# WPF VisualTree

> ID：12677042
> 
> 赞同：0
> 
> 时间：2012-10-01T16:13:10.843
> 
> 标签：c#, wpf, tabcontrol, visualtreehelper

使用 WPF、C# 和选项卡式页面窗口。我正在尝试循环浏览表单上的所有控件，但使用 VisualTreeHelper 无法做到这一点。

如果我有一个带有 TabControl 的窗口，并且该选项卡控件上有三个 TabItems，那么从视觉上看，一切正常......

但是，如果我尝试使用可视化树助手，它只会根据活动的单个页面公开内容，而不是所有可能的页面。

关于如何确认所有页面上的内容的任何想法，即使一次只能“可见”一个？

我希望它是我想念的非常简单的东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:23:29.470

如果你翻看TabControl的模板，你会发现TabControl的内容只会是被选中的TabItem：

```
Content="{TemplateBinding TabControl.SelectedContent}" 
```

这样做是为了优化 TabControl 的性能。由于 tabItems 中的其他控件不在视图中，因此无法在`Visual tree`. 但是，它们确实存在于`Logical Tree`. 此链接可能会让您入门 -[探索 WPF 逻辑和可视化树](http://blog.lab49.com/archives/217 "探索 WPF 逻辑和可视化树")

或者作为一种解决方法，请参阅此，在 TabControl 中切换选项卡时保留 Visual 树 - [Persist Visual Tree](http://www.codeproject.com/Articles/212233/Persist-the-Visual-Tree-when-switching-tabs-in-the "持久化视觉树")

# javascript - 为什么 Addthis 分享按钮在没有服务器的情况下不起作用？

> ID：12677043
> 
> 赞同：1
> 
> 时间：2012-10-01T16:13:14.477
> 
> 标签：javascript, jquery, html, share, addthis

这是我的[Addthis](http://www.addthis.com/)代码：

```
 <script type="text/javascript" src="addthis_widget.js"></script>
 <script type="text/javascript">
      var addthis_config = {
           services_expanded: 'facebook, twitter'
 }
 </script>

 <a addthis:services_compact="facebook,twitter" addthis:services_expanded="facebook,twitter" addthis:url="#" class="addthis_button" href="#"><img id="btn_share" name="btn_share" style="cursor:pointer;" src="path to image" alt="Share" /></a> 
```

如果我将此[Addthis](http://www.addthis.com/)代码放在简单的 HTML 文件中并尝试通过任何服务器运行，例如在我使用 Apache 的情况下。并尝试通过 localhost/myaddthis.html 从浏览器运行，而不是正常工作（显示正确的弹出窗口以共享到 facebook 和 twitter 的特定链接）。

但问题是：当我尝试直接在浏览器中运行简单的 html 文件时，它只显示图像，不显示正确的 addthis 共享弹出窗口。

它只是一个简单的 .HTML 文件（文件内没有服务器端代码），而不是为什么它在没有服务器的情况下无法运行。

我想在没有服务器的情况下使用此代码。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T14:34:13.377

您可能通过将它们作为本地文件打开而不是从 Web 服务器加载它们来查看您的页面。因此，浏览器中页面的 URL 不是以 http:// 开头，而是以 C:\ 或 file:// 开头

[这是通过 http:// - http://i.imgur.com/IDGUD.png](http://i.imgur.com/IDGUD.png)查看时 AddThis 按钮的外观

这是使用 file:// 查看的相同文件 - [http://i.imgur.com/gpCco.png](http://i.imgur.com/gpCco.png)

我们目前在我们的代码中使用无协议 URL - 以 // 而不是 http:// 或 https:// 开头的 URL - 以确保我们的 SSL 实现无需额外工作即可交叉兼容。但是，如果您使用 file:// 协议加载测试页面，它会导致 CSS 和其他 JavaScript 文件无法加载，因为它会在您的本地计算机上而不是我们的 Web 服务器上查找它们。

我已经向我们的开发人员提交了一张票，为使用他们的文件系统而不是 Web 服务器预览页面的人们修复此问题，但在他们能够实现之前，您应该了解如果使用该文件，按钮将不会显示： // 协议或使用网络服务器来测试您的网站在浏览器中的显示方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T17:34:40.447

我相信这是正常的，因为 AddThis 是在社交网站上分享东西。如果您不在服务器上，您将无法共享内容，因为它是本地文件。

它可能在 addThis 代码中检查服务器。如果它不是服务器，则不必共享。

如果你问我，这是常识，但我可能是错的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T18:10:32.743

Addthis 将检查当前 url -`http://localhost/etc.`是一个有效的位置，但`file://path/to/yourfile.html`不是。

# javascript - 无法为某些属性创建 Dojo 自定义小部件

> ID：12677049
> 
> 赞同：0
> 
> 时间：2012-10-01T16:13:35.947
> 
> 标签：javascript, dojo, dijit.form

我正在尝试为电子邮件地址创建自定义 ValidationTextBox 小部件。我们的系统中有许多区域使用电子邮件地址输入，我想创建一个具有默认正则表达式、无效消息等的小部件。问题是有两个属性：占位符和 maxlength 似乎没有得到添加到我的扩展课程中。我的代码如下：

```
define([
    "dojo/_base/declare", // declare
    "dijit/form/ValidationTextBox",
    "dojo/_base/lang"
], 
function(declare, ValidationTextBox, lang){  

    return lang.mixin(ValidationTextBox, {
    invalidMessage: "Please enter a valid email address.",
    missingMessage: "Please enter a valid email address.",
    regExp : "[a-zA-Z0-9._%-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$",
    maxlength : 50,
    placeholder : 'Your Email'
    });
}); 
```

如果我在我的页面上使用它，无效消息可以正常工作，但是在我使用它的任何地方，我都看不到占位符，也没有应用 maxlength。除了 lang.mixin 方法之外，我还尝试使用此处说明的声明方法： [http](http://www.sitepen.com/blog/2010/07/01/creating-and-enhancing-dojo-classes/) ://www.sitepen.com/blog/2010/07/01/creating-and-enhancing-dojo-classes/ . 我得到相同的结果。

知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T17:39:03.597

请参阅您在[http://jsfiddle.net/phusick/eLkwb/中描述的两个选项](http://jsfiddle.net/phusick/eLkwb/)

使用[`dojo/_base/lang::extend`](http://livedocs.dojotoolkit.org/dojo/_base/lang#extend)代替`mixin`：

```
lang.extend(ValidationTextBox, {
    invalidMessage: "Please enter a valid email address.",
    missingMessage: "Please enter a valid email address.",
    pattern: "[a-zA-Z0-9._%-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$",
    required: true,
    maxLength: 3,
    placeHolder : 'Your Email'
}); 
```

另请注意：

*   `regExp`已弃用，请`pattern`改用
*   属性区分大小写：所以`placeHolder`,`maxLength`
*   确保`dojo/parser::parse()`在扩展发生之后（用于标记实例化）
*   `maxLength`由于某种原因不起作用（请参阅`declare`下面的解决方法）

**通过子类**化实现相同的功能：

```
define([
    "dojo/_base/declare",
    "dijit/form/ValidationTextBox"
], function(
    declare,          
    ValidationTextBox
) {

    return declare([ValidationTextBox], {
        postCreate: function() {
            // a workaround to make maxLength working
            this.inherited(arguments);            
            this.set("maxLength", this.maxLength);
        },            
        invalidMessage: "Please enter a valid email address.",
        missingMessage: "Please enter a valid email address.",
        pattern: "[a-zA-Z0-9._%-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$",
        required: true,
        maxLength: 3,
        placeHolder : 'Your Email'
    });
}); 
```

# ms-access - VBA 等到表单打开

> ID：12677051
> 
> 赞同：3
> 
> 时间：2012-10-01T16:13:38.317
> 
> 标签：ms-access, ms-access-2007, vba

我在 Access 项目中有以下 VBA：

```
DoCmd.OpenForm "Importing"
' Some CPU-intensive code 
```

问题是，在密集部分完成之前，我只会得到一个白屏。

在执行其余代码之前，如何等到表单打开？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T16:15:48.830

对不起，伙计们，我刚刚找到了答案（其中一个是谷歌搜索一段时间，发布到 SO，然后立即找到答案）：

```
DoCmd.OpenForm "Importing"
DoEvents
' Some CPU-intensive code 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T16:26:46.853

为了完整起见，您还可以使用以下功能，我不记得我从哪里得到它，但我没有写它：

```
Function IsLoaded(ByVal strFormName As String) As Boolean
' Returns True if the specified form is open in Form view or Datasheet view.
' Use form name according to Access, not VBA.
' Only works for Access
    Dim oAccessObject As AccessObject

    Set oAccessObject = CurrentProject.AllForms(strFormName)
    If oAccessObject.IsLoaded Then
        If oAccessObject.CurrentView <> acCurViewDesign Then
            IsLoaded = True
        End If
    End If

End Function 
```

然后在您的代码中：

```
 DoCmd.OpenForm "Importing"
    Do While Not ISLoaded("Importing")
        DoEvents
    Loop 
```

# mysql - 在 LEFT JOIN 中有效地使用 OR 语句

> ID：12677054
> 
> 赞同：2
> 
> 时间：2012-10-01T16:13:44.540
> 
> 标签：mysql, performance, optimization, query-optimization

所以我有这个查询

```
SELECT * FROM b 
   LEFT JOIN n ON b.id = n.id 
   LEFT JOIN nr ON (b.pid <> 0 AND b.pid = nr.vid) 
        OR (b.pid = 0 AND n.vid = nr.vid) 
```

但是对该查询的 EXPLAIN 语句会显示，为了在连接中执行 OR，它需要搜索 nr 表中的所有条目，即使 nr.vid 是该表的主键并且 b 上有索引.pid 和 n.vid..

关于如何提高效率的任何建议？

**解释结果**

```
1, 'SIMPLE', 'b', 'ref', 'PRIMARY,r_rID', 'r_rID', '197', 'const,const', 48, 'Using where; Using temporary; Using filesort'
1, 'SIMPLE', 'n', 'eq_ref', 'PRIMARY,nst,nnc,ut,uid', 'PRIMARY', '4', 'b.nid', 1, 'Using where'
1, 'SIMPLE', 'nr', 'ALL', '', '', '', '', 335654, ''
1, 'SIMPLE', 'tn', 'ref', 'nid', 'nid', '4', 'n.nid', 1, '' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T16:27:49.777

我不确定，但它可能有用：

```
SELECT * FROM b 
   LEFT JOIN n ON b.id = n.id 
   LEFT JOIN nr as nr1 ON b.pid <> 0 AND b.pid = nr1.vid      
   LEFT JOIN nr as nr2 ON b.pid = 0 AND n.vid = nr2.vid 
```

也许，mysql 无法理解您的表达式是互斥的。理论上，这个查询应该和你的一样。

# iphone - 如何控制 UINavigationBar 标题中的标题字体

> ID：12677059
> 
> 赞同：1
> 
> 时间：2012-10-01T16:14:07.727
> 
> 标签：iphone, objective-c, ios, uinavigationcontroller, title

我有导航栏控制器，我想在其中显示文本。但是每次的文字都不一样。最少 5 个字符，最多 60 个字符。我希望所有角色都可见。如何设置 UINavigation Bar 标题的最小和最大字体大小？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T16:39:00.180

这是答案

```
UILabel *bigLabel = [[UILabel alloc] init];
bigLabel.text = @"1111111122222233333344444455555556666777888899999000000";
bigLabel.backgroundColor = [UIColor clearColor];
bigLabel.textColor = [UIColor whiteColor];
bigLabel.font = [UIFont boldSystemFontOfSize:20];
bigLabel.adjustsFontSizeToFitWidth = YES;
[bigLabel sizeToFit];

self.navigationItem.titleView = bigLabel; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T16:19:20.663

您需要在 UINavigationBar 上设置 titleView。您可以使用任何正常的 UILabel 设置将其设置为 UILabel。

# python - 是否有 IDE/实用程序来重构 Python * 导入以使用标准 module.member 语法？

> ID：12677061
> 
> 赞同：26
> 
> 时间：2012-10-01T16:14:09.533
> 
> 标签：python, syntax, ide, refactoring, readability

我最近的任务是维护一堆使用量`from module import *`相当大的代码。

这个代码库已经变得足够大，以至于导入冲突/命名模糊/“这个函数到底是从哪里来的，好像有八个导入的模块有一个同名？！”主义变得越来越普遍。

展望未来，我一直在使用显式成员（即`import module ... module.object.function()`，使我所做的维护工作更具可读性。

但我想知道：**是否有一个 IDE 或实用程序可以健壮地解析 Python 代码并将 * import 语句重构为模块 import 语句，然后将完整的模块路径添加到对该模块成员的所有引用上？**

我们没有`inspect`大量使用元编程/反射//monkeypatching，所以如果前面的 IDE/util 在这些事情上表现不佳，那没关系。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T12:34:01.473

不是一个完美的解决方案，但我通常做的是：

1.  打开 Pydev
2.  删除所有`*`导入
3.  使用`optimize imports`命令 ( `ctrl+shift+o`) 重新添加所有导入

大致解决问题:)

* * *

如果您想自己构建解决方案，请尝试[http://docs.python.org/library/modulefinder.html](http://docs.python.org/library/modulefinder.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T02:06:19.973

**以下是提到的其他相关工具：**

*   直接使用[AST](http://docs.python.org/library/ast.html)，这是非常低级的供您使用。
*   使用[modulefinder](http://docs.python.org/library/modulefinder.html)可能有很多你正在寻找的样板代码，
*   [绳索](http://rope.sourceforge.net/)，一个重构库（@Lucas Graf），
*   [自行车修理工](http://bicyclerepair.sourceforge.net/)，一个重构库
*   使用的[logilab-astng](http://www.logilab.org/856)库`pylint`

**更多关于皮林特**

`pylint`是一个非常好的工具`ast`，它已经能够告诉你代码中哪里有`from somemodule import *`语句，以及告诉你哪些导入是不必要的。

例子：

```
# next is what's on line 32
from re import * 
```

这会抱怨：

```
W: 32,0: Wildcard import re
W: 32,0: Unused import finditer from wildcard import
W: 32,0: Unused import LOCALE from wildcard import
... # this is a long list ... 
```

**寻求解决方案？**

请注意，在上面的输出`pylint`中为您提供了行号。这可能需要一些努力，但是重构工具可以查看那些特定的警告，获取行号，导入模块并查看`__all__`列表，或者使用沙盒`execfile()`语句查看模块的全局名称（这会`modulefinder`有所帮助吗？也许吧。 ..)。使用来自的全局名称列表和抱怨`__all__`的名称，您可以拥有两个并继续获得差异。将具有通配符导入的行替换为特定导入。`pylint``set()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-11T17:08:41.770

为此，我编写了一些重构工具。[Star Namer](https://github.com/SurpriseDog/Star-Wrangler#star-namer)将检查所有通配符`*`导入的脚本，并将它们替换为要导入的实际函数。

用法：`./star_namer.py module_filename script_filename`

* * *

将所有星形导入转换为实际名称后，您可以使用[from_to_import.py](https://github.com/SurpriseDog/Star-Wrangler#from_to_importpy)来修复它们。这是它的工作原理：

1.  通过[pylint](https://www.pylint.org/#install)运行脚本并计算所有当前未定义的单词。

2.  `from modname import`从脚本中删除所有行。

3.  再次通过 pylint 运行脚本并比较未定义单词的差异。

4.  通过 pylint 的*json*输出（以相反的顺序），它确定要进行替换的确切位置并将其插入`modname.`正确的位置。

我认为这种方法会更加健壮，通过将语法处理卸载到为其设计的高级实用程序，而不是尝试使用正则表达式自己遍历所有文本。

用法：`from_to_import.py script_name modname`

它将向您显示在进行更改之前要进行哪些更改。按`y`保存。到目前为止，我发现的主要问题是插入`modname.`文本导致的文本对齐问题，这会使注释未对齐，并且不能很好地处理别名函数名`(from ... import quickrun as qrun)`

此处的完整文档：[https ://github.com/SurpriseDog/Star-Wrangler](https://github.com/SurpriseDog/Star-Wrangler)

# c# - Treeview 选择的节点值为空

> ID：12677068
> 
> 赞同：0
> 
> 时间：2012-10-01T16:14:43.950
> 
> 标签：c#, null, treeview

你好stackoverflow用户希望你能帮助我。

我用我的数据库中的一些数据填充了一个树视图控件。它在所有创建的节点上都可以正常工作，但现在我需要存储在节点中的类别 ID。这是我如何制作节点的简短描述。

```
 TreeNodeCollection nodes = new TreeNodeCollection();
        TreeNode tn = new TreeNode();
        tn.Text =  "<span onclick='return false;'>"+ c.Category_Name +"</span>";
        tn.Value = c.Category_Id.ToString();
        nodes.Add(tn); 
```

然后，当我尝试再次为此处的示例获取值时，我将从数据库中删除节点，我需要选择的类别 ID。

```
 protected void btnDeleteCategory_Click(object sender, ImageClickEventArgs e)
{
    TreeView1.Nodes.Remove(TreeView1.SelectedNode);
    string categoryId = TreeView1.SelectedNode.Value;
    // run delete method
} 
```

但现在 SelectedNode.Value 是 emty **" "**。但在我设置它的价值之前。我在想当它填充树视图时它可能是什么东西，但看不到它应该在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:21:51.813

在删除节点之前捕获 id。

```
string categoryId = TreeView1.SelectedNode.Value;
TreeView1.Nodes.Remove(TreeView1.SelectedNode); 
```

# php - 在php中上传脚本

> ID：12677073
> 
> 赞同：-1
> 
> 时间：2012-10-01T16:15:01.777
> 
> 标签：php, file-upload

> **可能重复：**
> [无法在 PHP 中上传文件](https://stackoverflow.com/questions/10270261/unable-to-do-file-upload-in-php)

我正在尝试学习用 PHP 编写文件上传脚本。我不知道为什么这不起作用。请看一看

* * *

```
<?php
$name=$_FILES["file"]["name"];

if(isset($name)) {
    if(!empty($name)) {
        echo $name;
    }
    else {
        echo 'Please choose a file';
    }
}
?> 
```

* * *

它给出了一条错误消息`Notice: Undefined index: file in`

* * *

html部分是

* * *

```
<form action="submissions.php" method="POST" enctype="multipart/form-data">
<input type="file" name="file" id="file" /> 
<input type="submit" name="submit" value="Submit" /></form> 
```

* * *

我在 Windows 上使用 wamp。错误的原因可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T16:23:55.153

您需要在执行 PHP 代码之前检查表单是否已提交：

```
<?php
if (isset($_POST["submit"]) && $_POST["submit"] === "Submit") {

    if (isset($_FILES["file"]["name"])) {
        $name = $_FILES["file"]["name"];

        if(!empty($name)) {
            echo $name;
        }
        else {
            echo 'Please choose a file';
        }
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T16:33:08.557

线索在错误消息中。FILES 数组中不存在索引“文件”。猜测是因为您在提交表单之前有此代码？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T16:25:54.730

首先检查它是否存在，

```
if(isset($_FILES['FormFieldNameForFile']) && $_FILES['FormFieldNameForFile']['size']>0){ # will be 0 if no file uploaded 
```

然后检查您对字段组件的使用。

```
$_FILES['userfile']['name']  # The original name of the file on the client machine. 
$_FILES['userfile']['type']  # The mime type of the file, if the browser provided this information. An example would be "image/gif". This mime type is however not checked on the PHP side and therefore don't take its value for granted. 
$_FILES['userfile']['size']  # The size, in bytes, of the uploaded file. 
$_FILES['userfile']['tmp_name']  # The temporary filename of the file in which the uploaded file was stored on the server. 
$_FILES['userfile']['error']  # The error code associated with this file upload 
```

# c++ - 转换运算符转换为仅在模板参数中不同的类？

> ID：12677081
> 
> 赞同：1
> 
> 时间：2012-10-01T16:15:19.593
> 
> 标签：c++, templates, casting

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:18:16.117

```
template<class T0> operator A<T0> ... 
```

Without the template argument, its a conversion to `A<T1>`, i.e. a no-op.

# image - 如何在 elgg 中使用选择表单（例如复选框）中的图像

> ID：12677083
> 
> 赞同：0
> 
> 时间：2012-10-01T16:15:23.543
> 
> 标签：image, forms, selection, elgg

如何在 elgg 中以这样的选择形式使用图像？这是我想要做的示例图像：

![在此处输入图像描述](../Images/db0f2630a179941aaf1eb9fb8fdfbd19.png)

太感谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T01:36:27.073

您可以使用纯 HTML 创建复选框，或使用[input/checkbox](https://github.com/Elgg/Elgg/blob/1.8/views/default/input/checkbox.php)或[input/checkboxes](https://github.com/Elgg/Elgg/blob/1.8/views/default/input/checkboxes.php)视图为您生成它。所有这些都允许您使用任意 HTML 作为标签，因此您可以使用 IMG 元素。

# java - Jtable在同一行中左右对齐文本

> ID：12677089
> 
> 赞同：0
> 
> 时间：2012-10-01T16:15:48.403
> 
> 标签：java, swing, jtable

**试图在 Jtable 上实现这一点。**

我试图对齐两个单词，例如一个在左侧，另一个在右侧，但在同一行。

```
String html="<html><div style='float:left;width:50%;'>left</div><div style='float:right;width:50%;'>right</div></html>";
Object rowData[][] = { { html, "Column2-data"}}; 
```

不幸的是，它没有用。我也尝试使用**p**标签和**字体**标签。

**请帮助我如何使用 HTML 标签实现这一点。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T17:52:42.467

您可以创建自己的表格单元格渲染器以使 JTable 中的文本居中

```
public class CenterCellRenderer extends DefaultTableCellRenderer {
        @Override
        public Component getTableCellRendererComponent(JTable table,
                Object value, boolean isSelected, boolean hasFocus, int row,
                int column) {
            JLabel renderedLabel = (JLabel) super
                    .getTableCellRendererComponent(table, value, isSelected,
                            hasFocus, row, column);
            renderedLabel.setHorizontalAlignment(JLabel.CENTER);
            return renderedLabel;
        }
    } 
```

要为整个表格使用此表格单元格渲染器：

```
TableCellRenderer renderer = new CenterCellRenderer();
table.setDefaultRenderer(Object.class, renderer); 
```

要定义特定于列的渲染器，您需要定义一个`JTable`覆盖该`getCellRenderer`方法的子类

```
table = new JTable(...) {
    public TableCellRenderer getCellRenderer(int row, int column) {
        if (column == 2) {
            return renderer;
        }
        // else...
        return super.getCellRenderer(row, column);
    }
}; 
```

既然我已经对您的问题进行了更多思考，我会将文本分为两列。如有必要，您可以使用右对齐单元格渲染器将第二列中的文本右对齐，该渲染器类似于我为居中文本创建的渲染器。

# java - Java的BitmapFactory给出了OutOfMemory Exception，想要> 12mb ...不知道为什么它太大了

> ID：12677091
> 
> 赞同：0
> 
> 时间：2012-10-01T16:15:55.113
> 
> 标签：java, android

我的 android 设备的位图工厂出现 OOM 错误。

```
Out of memory on a 12582928-byte allocation. 
```

这对我来说很奇怪。它非常大。文件本身是平板电脑上的图像罐并下载。所以图像可能在上限达到 1.2meg jpg 左右。

在它说错误之后，它会吐出 AndroidRuntime 错误日志以显示致命异常：

```
10-01 11:53:52.512: E/AndroidRuntime(31023): FATAL EXCEPTION: Thread-7893
10-01 11:53:52.512: E/AndroidRuntime(31023): java.lang.OutOfMemoryError
10-01 11:53:52.512: E/AndroidRuntime(31023):    at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
10-01 11:53:52.512: E/AndroidRuntime(31023):    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:582)
10-01 11:53:52.512: E/AndroidRuntime(31023):    at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:380)
10-01 11:53:52.512: E/AndroidRuntime(31023):    at com.bentley.cordova.plugins.ImageOps.createThumbnailForPath(ImageOps.java:43)
10-01 11:53:52.512: E/AndroidRuntime(31023):    at com.bentley.cordova.plugins.ImageOps.execute(ImageOps.java:20)
10-01 11:53:52.512: E/AndroidRuntime(31023):    at org.apache.cordova.api.PluginManager$1.run(PluginManager.java:192)
10-01 11:53:52.512: E/AndroidRuntime(31023):    at java.lang.Thread.run(Thread.java:856) 
```

我确实有很多同时使用此功能的图像处理。我认为 BitMapFactory 根本没有因为运行的不同线程而过度工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T16:19:41.540

> 所以图像可能在上限达到 1.2meg jpg 左右。

这不是真的。A`32bit bitmap`将需要`width * height * 4`字节才能被分配。`recycle`当您不需要它时，请记住您的位图。如果可以的话，也对其进行下采样

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T16:25:12.430

请考虑这样一个事实，即 1.2 MB JPEG 图像的位图表示可能很容易（取决于其压缩率）超过 12 MB。

当使用 32 位颜色时，位图至少需要宽度 * 高度 * 4 个字节来表示。

即使单个实例不超过 12MB 标记，以线程方式运行它也可能超过 JVM 分配的最大堆大小。

# android - 将项目导入 Eclipse 时项目描述无效

> ID：12677093
> 
> 赞同：22
> 
> 时间：2012-10-01T16:15:59.860
> 
> 标签：android, eclipse

我知道这个问题已经[在这里](https://stackoverflow.com/questions/6084056/invalid-project-description-importing-from-git-repo-problem)发布了，但这并不能解决我的问题。

我从 github 分支中提取了一个项目，当我尝试导入它时：`File->Import->General->Existing projects into workspace`然后`Select root directory`在这里，当我单击`Finish`按钮时，我得到了`Invalid project description`。

我将项目拉到一个名为的文件夹中，该文件夹包含我在 Eclipse 中导入`Android`的项目的主文件夹。`MyAndroidProject`

我不知道这里有什么问题。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-01-24T13:18:10.447

我知道我迟到了，但以防万一其他人被困在这一点上，就像几分钟前的我一样：您可以尝试文件>导入>现有 Android 代码到工作区。我有想要直接在我的工作区中导入的 Git 存储库。尽管如此，我还是需要选中**将项目复制到工作区**选项才能使其正常工作。

**编辑**

我刚刚查看了上述评论之一的链接，建议将 File>Import>General>Existing Project into Workspace。我应该提一下，就我而言，eclipse 项目元数据不受版本控制，因此无法将导入作为现有项目！此解决方案适用于没有 .project 文件等的现有 android 代码。

**编辑 2**

再说一句：我最近意识到这个问题似乎只有在*项目根目录*也是*存储库根目录*时才会发生，就像这样：

```
workspace  
└─ project root  
   └┬ .git
    ├ src
    └ ... 
```

当我将项目移动到低一级目录时，问题就消失了。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-07-08T12:51:44.363

只需将项目文件夹移动一个目录（在目录中创建另一个文件夹并将您的项目复制到该文件夹​​中。现在使用这个新创建的版本导入项目。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-09T05:36:41.433

有同样的问题，将工作区更改为项目上方的一个目录，然后导入项目。为我工作

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-30T08:06:04.483

我刚刚阅读了这个非常古老的问题。问题出在 Eclipse 特定文件夹中。

只需删除 .settings 和 .project 并重新导入。

# php - Code Igniter 中的临时表并不总是可用？

> ID：12677100
> 
> 赞同：2
> 
> 时间：2012-10-01T16:16:15.913
> 
> 标签：php, mysql, codeigniter, e-commerce, temp-tables

代码点火器 - PHP - Mysql。我在一个购物网站上工作，由于每个产品有大量的产品和客户定价选项（包括每个用户的不同价格的折扣等），所以在客户登录时创建了一个临时表。该表正在成功创建，但是当我浏览该站点时，它并不总是保持不变。

例如，如果我在站点的每个页面上运行一个查询说“从 Temp_Products 选择 *”，它会返回一个空集或说 Temp_Products 在某些页面上不存在。

我无法弄清楚问题出在哪里，似乎没有特定的模式或触发器导致此问题。

此外，电子商务网站通常如何实施目录和库存？任何信息都会有帮助！！

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:44:30.517

在数据库中创建一个表
：id - id_user - id_table
之后，在会话中放入允许您检索表项的字段。
创建一个库，允许您与 db es: Mytable 中的数据进行对话，并在此库中创建一些函数，从会话中的字段开始自动获取 db 上的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:51:27.457

如果您使用临时表，则存在一些缺陷。

首先，如果你使用持久连接（你永远不应该这样做），临时表将在 Ci-sessions 之间共享，因为持久连接在 CI-sessions 之间共享。这可能不是你想要的。

如果您不使用持久连接（您应该这样做），则临时表仅适用于当前请求。因为当 CI 实例在每个请求结束时停止时，它会清理其数据库连接，从而删除该连接的所有临时表。

在您的情况下，您可能需要使用会话 ID 作为键的“普通”表。不要忘记在会话结束后清理会话特定条目。这并不容易，因为 codeigniter 为此使用了一些延迟的垃圾收集机制。因此，您可能需要一个 cronjob 定期检查会话是否存在并对此采取行动。

# spring - HttpSession 为 SPRING_SECURITY_CONTEXT 返回了空对象

> ID：12677104
> 
> 赞同：10
> 
> 时间：2012-10-01T16:16:36.397
> 
> 标签：spring, spring-security, saml-2.0, opensaml, spring-saml

我正在尝试将[Spring Saml 库](http://static.springsource.org/spring-security/site/extensions/saml/index.html)集成到示例 Web 应用程序中，使用 Shibboleth 作为 IDP。我能够加载登录页面，登录并显示索引页面。

问题是当我点击其他链接时，webapp 将我重定向到登录页面，然后 IDP 识别我并重定向到请求的页面（如果网络速度很快，很难看到这一点）。就像我没有登录 Spring 安全性一样。

我检查了日志，发现了这个：

> org.springframework.security.web.context.HttpSessionSecurityContextRepository - HttpSession 返回了 SPRING_SECURITY_CONTEXT 的空对象 将创建一个新的。

这是 web.xml

```
<!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/spring/root-context.xml
        /WEB-INF/spring/security/securityContext.xml
    </param-value>
</context-param>
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<!-- Creates the Spring Container shared by all Servlets and Filters -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<!-- Processes application requests -->
<servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

<!-- Custom error pages -->
<error-page>
    <error-code>400</error-code>
    <location>/errors/missing-en.html</location>
</error-page>
<error-page>
    <error-code>401</error-code>
    <location>/errors/restricted-en.html</location>
</error-page>
<error-page>
    <error-code>403</error-code>
    <location>/errors/restricted-en.html</location>
</error-page>
<error-page>
    <error-code>404</error-code>
    <location>/errors/missing-en.html</location>
</error-page>
<error-page>
    <error-code>500</error-code>
    <location>/errors/missing-en.html</location>
</error-page>
<error-page>
    <error-code>503</error-code>
    <location>/errors/missing-en.html</location>
</error-page> 
```

和 securityContext

```
<beans xmlns="http://www.springframework.org/schema/beans" 
xmlns:security="http://www.springframework.org/schema/security" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/security 
        http://www.springframework.org/schema/security/spring-security-3.1.xsd 
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context.xsd">

<!-- Enable autowiring -->
<context:annotation-config />
<context:component-scan base-package="org.springframework.security.saml" />

<security:http pattern="/logout.jsp" security="none" />
<security:http pattern="/login.jsp" security="none" />
<security:http pattern="/index.html" security="none" />

<security:http entry-point-ref="samlEntryPoint">
    <security:intercept-url pattern="/**" access="IS_AUTHENTICATED_FULLY" />
    <security:custom-filter before="FIRST" ref="metadataGeneratorFilter" />
    <security:custom-filter after="BASIC_AUTH_FILTER" ref="samlFilter" />
</security:http>

<bean id="samlFilter" class="org.springframework.security.web.FilterChainProxy">
    <security:filter-chain-map path-type="ant">
        <security:filter-chain pattern="/saml/login/**" filters="samlEntryPoint" />
        <security:filter-chain pattern="/saml/logout/**" filters="samlLogoutFilter" />
        <security:filter-chain pattern="/saml/SSO/**" filters="samlWebSSOProcessingFilter" />
        <security:filter-chain pattern="/saml/SSOHoK/**" filters="samlWebSSOHoKProcessingFilter" />
        <security:filter-chain pattern="/saml/SingleLogout/**" filters="samlLogoutProcessingFilter" />
    </security:filter-chain-map>
</bean>

<!-- Handler deciding where to redirect user after successful login -->
<bean id="successRedirectHandler" class="org.springframework.security.web.authentication.SavedRequestAwareAuthenticationSuccessHandler">
    <property name="defaultTargetUrl" value="/" />
</bean>
<!-- Use the following for interpreting RelayState coming from unsolicited response as redirect URL: <bean id="successRedirectHandler" class="org.springframework.security.saml.SAMLRelayStateSuccessHandler"> 
    <property name="defaultTargetUrl" value="/" /> </bean> -->

<!-- Handler for successful logout -->
<bean id="successLogoutHandler" class="org.springframework.security.web.authentication.logout.SimpleUrlLogoutSuccessHandler">
    <property name="defaultTargetUrl" value="/logout.jsp" />
</bean>

<!-- Register authentication manager with SAML provider -->
<security:authentication-manager alias="authenticationManager">
    <security:authentication-provider ref="samlAuthenticationProvider" />
</security:authentication-manager>

<!-- Logger for SAML messages and events -->
<bean id="samlLogger" class="org.springframework.security.saml.log.SAMLDefaultLogger" />

<!-- Central storage of cryptographic keys -->
<bean id="keyManager" class="org.springframework.security.saml.key.JKSKeyManager">
    <constructor-arg value="/WEB-INF/spring/security/myKeystore.jks" />
    <constructor-arg type="java.lang.String" value="betfair" />
    <constructor-arg>
        <map>
            <entry key="tomcat" value="betfair" />
        </map>
    </constructor-arg>
    <constructor-arg type="java.lang.String" value="tomcat" />
</bean>

<!-- Entry point to initialize authentication, default values taken from properties file -->
<bean id="samlEntryPoint" class="org.springframework.security.saml.SAMLEntryPoint">
    <property name="defaultProfileOptions">
        <bean class="org.springframework.security.saml.websso.WebSSOProfileOptions">
            <property name="includeScoping" value="false" />
        </bean>
    </property>
</bean>

<!-- IDP Discovery Service -->
<bean id="samlIDPDiscovery" class="org.springframework.security.saml.SAMLDiscovery">
    <property name="idpSelectionPath" value="/WEB-INF/security/idpSelection.jsp" />
</bean>

<!-- Filter automatically generates default SP metadata -->
<bean id="metadataGeneratorFilter" class="org.springframework.security.saml.metadata.MetadataGeneratorFilter">
    <constructor-arg>
        <bean class="org.springframework.security.saml.metadata.MetadataGenerator" />
    </constructor-arg>
</bean>

<!-- The filter is waiting for connections on URL suffixed with filterSuffix and presents SP metadata there -->
<bean id="metadataDisplayFilter" class="org.springframework.security.saml.metadata.MetadataDisplayFilter" />

<!-- IDP Metadata configuration - paths to metadata of IDPs in circle of trust is here -->
<!-- Do no forget to call iniitalize method on providers -->
<bean id="metadata" class="org.springframework.security.saml.metadata.CachingMetadataManager">
    <constructor-arg>
        <list>

            <bean class="org.springframework.security.saml.metadata.ExtendedMetadataDelegate">
                <constructor-arg>
                    <bean class="org.opensaml.saml2.metadata.provider.FilesystemMetadataProvider">
                        <constructor-arg>
                            <value type="java.io.File">/WEB-INF/spring/security/shibboleth.xml</value>
                        </constructor-arg>
                        <property name="parserPool" ref="parserPool" />
                    </bean>
                </constructor-arg>
                <constructor-arg>
                    <bean class="org.springframework.security.saml.metadata.ExtendedMetadata">
                    </bean>
                </constructor-arg>
            </bean>
            <bean class="org.springframework.security.saml.metadata.ExtendedMetadataDelegate">
                <constructor-arg>
                    <bean class="org.opensaml.saml2.metadata.provider.FilesystemMetadataProvider">
                        <constructor-arg>
                            <value type="java.io.File">/WEB-INF/spring/security/localhost_sp.xml</value>
                        </constructor-arg>
                        <property name="parserPool" ref="parserPool" />
                    </bean>
                </constructor-arg>
                <constructor-arg>
                    <bean class="org.springframework.security.saml.metadata.ExtendedMetadata">
                        <property name="local" value="true" />
                        <property name="alias" value="localhost" />
                        <property name="securityProfile" value="metaiop" />
                        <property name="sslSecurityProfile" value="pkix" />
                        <property name="signingKey" value="tomcat" />
                        <property name="encryptionKey" value="tomcat" />
                        <property name="tlsKey" value="tomcat" />
                        <property name="requireArtifactResolveSigned" value="false" />
                        <property name="requireLogoutRequestSigned" value="false" />
                        <property name="requireLogoutResponseSigned" value="false" />
                    </bean>
                </constructor-arg>
            </bean>
        </list>
    </constructor-arg>      
    <!-- OPTIONAL used when one of the metadata files contains information about this service provider -->
    <property name="hostedSPName" value="localhost"/>
    <!-- OPTIONAL property: can tell the system which IDP should be used for authenticating user by default. -->
    <!-- <property name="defaultIDP" value="http://localhost:8080/opensso"/> -->
</bean>

<!-- SAML Authentication Provider responsible for validating of received SAML messages -->
<bean id="samlAuthenticationProvider" class="org.springframework.security.saml.SAMLAuthenticationProvider">
    <!-- OPTIONAL property: can be used to store/load user data after login -->
    <!-- <property name="userDetails" ref="bean" /> -->
</bean>

<!-- Provider of default SAML Context -->
<bean id="contextProvider" class="org.springframework.security.saml.context.SAMLContextProviderImpl" />

<!-- Processing filter for WebSSO profile messages -->
<bean id="samlWebSSOProcessingFilter" class="org.springframework.security.saml.SAMLProcessingFilter">
    <property name="authenticationManager" ref="authenticationManager" />
    <property name="authenticationSuccessHandler" ref="successRedirectHandler" />
</bean>

<!-- Processing filter for WebSSO Holder-of-Key profile -->
<bean id="samlWebSSOHoKProcessingFilter" class="org.springframework.security.saml.SAMLWebSSOHoKProcessingFilter">
    <property name="authenticationManager" ref="authenticationManager" />
    <property name="authenticationSuccessHandler" ref="successRedirectHandler" />
</bean>

<!-- Logout handler terminating local session -->
<bean id="logoutHandler" class="org.springframework.security.web.authentication.logout.SecurityContextLogoutHandler">
    <property name="invalidateHttpSession" value="false" />
</bean>

<!-- Override default logout processing filter with the one processing SAML messages -->
<bean id="samlLogoutFilter" class="org.springframework.security.saml.SAMLLogoutFilter">
    <constructor-arg ref="successLogoutHandler" />
    <constructor-arg ref="logoutHandler" />
    <constructor-arg ref="logoutHandler" />
</bean>

<!-- Filter processing incoming logout messages -->
<!-- First argument determines URL user will be redirected to after successful global logout -->
<bean id="samlLogoutProcessingFilter" class="org.springframework.security.saml.SAMLLogoutProcessingFilter">
    <constructor-arg ref="successLogoutHandler" />
    <constructor-arg ref="logoutHandler" />
</bean>

<!-- Class loading incoming SAML messages from httpRequest stream -->
<bean id="processor" class="org.springframework.security.saml.processor.SAMLProcessorImpl">
    <constructor-arg>
        <list>
            <ref bean="redirectBinding" />
            <ref bean="postBinding" />
            <ref bean="artifactBinding" />
            <ref bean="soapBinding" />
            <ref bean="paosBinding" />
        </list>
    </constructor-arg>
</bean>

<!-- SAML 2.0 WebSSO Assertion Consumer -->
<bean id="webSSOprofileConsumer" class="org.springframework.security.saml.websso.WebSSOProfileConsumerImpl" />

<!-- SAML 2.0 Holder-of-Key WebSSO Assertion Consumer -->
<bean id="hokWebSSOprofileConsumer" class="org.springframework.security.saml.websso.WebSSOProfileConsumerHoKImpl" />

<!-- SAML 2.0 Web SSO profile -->
<bean id="webSSOprofile" class="org.springframework.security.saml.websso.WebSSOProfileImpl" />

<!-- SAML 2.0 Holder-of-Key Web SSO profile -->
<bean id="hokWebSSOProfile" class="org.springframework.security.saml.websso.WebSSOProfileConsumerHoKImpl" />

<!-- SAML 2.0 ECP profile -->
<bean id="ecpprofile" class="org.springframework.security.saml.websso.WebSSOProfileECPImpl" />

<!-- SAML 2.0 Logout Profile -->
<bean id="logoutprofile" class="org.springframework.security.saml.websso.SingleLogoutProfileImpl" />

<!-- Bindings, encoders and decoders used for creating and parsing messages -->
<bean id="postBinding" class="org.springframework.security.saml.processor.HTTPPostBinding">
    <constructor-arg ref="parserPool" />
    <constructor-arg ref="velocityEngine" />
</bean>

<bean id="redirectBinding" class="org.springframework.security.saml.processor.HTTPRedirectDeflateBinding">
    <constructor-arg ref="parserPool" />
</bean>

<bean id="artifactBinding" class="org.springframework.security.saml.processor.HTTPArtifactBinding">
    <constructor-arg ref="parserPool" />
    <constructor-arg ref="velocityEngine" />
    <constructor-arg>
        <bean class="org.springframework.security.saml.websso.ArtifactResolutionProfileImpl">
            <constructor-arg>
                <bean class="org.apache.commons.httpclient.HttpClient" />
            </constructor-arg>
            <property name="processor">
                <bean id="soapProcessor" class="org.springframework.security.saml.processor.SAMLProcessorImpl">
                    <constructor-arg ref="soapBinding" />
                </bean>
            </property>
        </bean>
    </constructor-arg>
</bean>

<bean id="soapBinding" class="org.springframework.security.saml.processor.HTTPSOAP11Binding">
    <constructor-arg ref="parserPool" />
</bean>

<bean id="paosBinding" class="org.springframework.security.saml.processor.HTTPPAOS11Binding">
    <constructor-arg ref="parserPool" />
</bean>

<!-- Initialization of OpenSAML library -->
<bean class="org.springframework.security.saml.SAMLBootstrap" />

<!-- Initialization of the velocity engine -->
<bean id="velocityEngine" class="org.springframework.security.saml.util.VelocityFactory" factory-method="getEngine" />

<!-- XML parser pool needed for OpenSAML parsing -->
<bean id="parserPool" class="org.opensaml.xml.parse.BasicParserPool" scope="singleton" /> 
```

任何的想法？

谢谢伊曼纽尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T13:02:31.100

I've experienced the same problem. After debugging realized that SecurityContext is cleared before it's persisted. After googling I found this: [https://jira.springsource.org/browse/SEC-2027](https://jira.springsource.org/browse/SEC-2027) Moving to spring security version 3.1.2 solved it for me.

I hope it will help someone.

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-10-02T16:51:44.747

如果您对使用 Spring 并不特别，或者您可以先尝试一些可行的方法，然后再转到 Spring，这里有一个很好的教程。我试过这个，它有效：

[http://fczaja.blogspot.com/2012/06/idp-initiated-sso-and-identity.html](http://fczaja.blogspot.com/2012/06/idp-initiated-sso-and-identity.html)

博客作者 Filip 反应迅速，如有必要，您可以从他那里得到澄清。

# web-crawler - Googlebot 会抓取元素的属性标签吗？

> ID：12677108
> 
> 赞同：0
> 
> 时间：2012-10-01T16:16:45.447
> 
> 标签：web-crawler, attr, google-crawlers

有谁知道谷歌是否会重视元素属性标签中的内容？

是否有任何文件支持或反驳这一点？还是内容*需要**可见*？

例如，是否不推荐这样做（属性中的数据将在稍后使用 javascript 显示在页面上）：

```
<div class="myclass" 
    info="here is info about this subject"
    tags="here are tags"
    bio="here is my biography">
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:12:44.617

据我所知，元素属性没有被索引。例如，尝试在网站（使用 site:）中搜索一个您知道不显示且仅在 mailto: 属性中的电子邮件地址。谷歌不会找到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T12:27:12.360

我不确定您所说的“赋予权重”是什么意思（您是指 SEO 方面的吗？）但是 Google 和其他 SE 会抓取微数据并将其用于 SERP 结果。

有一个可接受的语法，您可以在此处找到[http://schema.org](http://schema.org)。谷歌和必应/雅虎会识别和使用它，我认为其他人也会（如果不是现在比将来，因为这是当前的标准）

如果您询问的是 SEO 的含义，那么根据个人经验，我可以说：

A. 这将提高点击率，从而通过最大化您当前 SERP 位置的潜力和提高未来排名来帮助您进行 SEO，因为更多的访问者将以多种直接和不恰当的方式帮助 SEO（更多流量 = 更多社交信号，更多有机链接等...）

B. 向 SE 提供更多信息通常是一件非常好的事情。我在实施微数据元素后看到了改进，但我在参与其他 SEO 实践时也这样做了，所以我真的可以说有多少增长是完全受到微数据的启发......

# c++ - 我认为我有一个 stackoverflow（已达到 SDL 表面限制）

> ID：12677112
> 
> 赞同：0
> 
> 时间：2012-10-01T16:17:03.073
> 
> 标签：c++, sdl, stack-overflow

所以我使用sdl，我试图制作一个360个不同旋转的精灵表，使用SDL_GetError：“宽度或高度太大”对于我的精灵表，其中每个单独的图像都是63x63像素，我想要的尺寸是宽度= 63x360高度 = 63

什么是解决这个问题的正确方法？我不应该使用精灵表技术吗？或者我可以以某种方式增加表面的最大内存使用量？

```
SDL_Surface * p = SDL_CreateRGBSurface(SDL_SWSURFACE,newWidth*MODERATION,newHeight,BPP,0xFF0000,0xFF00,0xFF,0xFF000000);
std::cout<< SDL_GetError() << '\n'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:29:05.347

将精灵组织成 2D 数组，例如`36 x 10`. 索引会稍微复杂一些，但您会降低宽度。请注意，它抱怨的是“宽度或高度”，而不是总内存使用量。

# ruby-on-rails - Rails：将代码从一个 html.erb 文件粘贴到另一个文件会产生错误：nil:NilClass 的未定义方法“url”

> ID：12677114
> 
> 赞同：0
> 
> 时间：2012-10-01T16:17:12.900
> 
> 标签：ruby-on-rails

我有代码：

```
<a href="http://<%= @app.url %>"><h1><%= @app.name %></h1></a> 
```

在 show.html.erb 中运行良好。但是，当我将该代码粘贴到 newsfeed.html.erb 时，它会给出以下错误消息：

```
NoMethodError in Reviews#newsfeed

undefined method `url' for nil:NilClass 
```

通过阅读其他类似的问题，我认为我需要对 reviews_controller.rb 进行更改。这是（我认为）该文件中的相关代码：

```
def newsfeed
    @reviews = Review.all
end 
```

以及主AppsController中的相关代码

```
require 'Review'

class AppsController < ApplicationController
...
def show

 @app = App.find_by_name(params[:id])
 respond_to do |format|
   format.html # show.html.erb
   format.json { render :json => @app }
 end
end 
```

我相信解决方案是在 def newsfeed 下面添加一些代码，但我不确定要添加什么。或者也许这甚至不是解决方案。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:18:52.270

@app 为零。在显示动作中，您将其设置为

```
@app = App.find_by_name(params[:id]) 
```

但是您忘记将其添加到新闻源操作中！

# java - 使用 Java 声音 API 正确设计 VAD 界面？

> ID：12677119
> 
> 赞同：2
> 
> 时间：2012-10-01T16:17:36.770
> 
> 标签：java, interface, voice, audio

VAD 代表语音活动检测。我有一个 VAD 算法，它可以工作。

如何让它呈现在 Java sound API 的思想中？

我的几个想法是：

1)`TargetDataLine`每次检测到语音时创建并允许消费者处理线路创建和读取创建的线路。

不确定线路是否适用于此。

2)`AudioInputStream`每次检测到语音时创建并允许消费者处理流创建并读取它。

3) 有一个常数`TargetDataLine`，每次检测到语音时发送打开/启动/其他事件。

哪个最美？

# c++ - Ubuntu 中的 execl() 参数

> ID：12677120
> 
> 赞同：8
> 
> 时间：2012-10-01T16:17:38.940
> 
> 标签：c++, c, linux, ubuntu, exec

我正在学习 linux 编程，遇到了非常有用的 exec 函数。但问题是 exec 函数参数非常混乱，我无法掌握哪个参数用于什么目的。在下面的代码`execl()`中，函数是从通过创建的子调用`fork()`的，最后一个参数 ( `NULL`)的目的是什么`execl()`？

```
execl("/bin/ls","ls","-l",NULL); 
```

如果有人能解释`NULL`论证和其他论证的目的是什么以及`exec()`家庭功能论证的目的，那对我有很大帮助！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-01T16:25:47.427

创建未定义的行为。这不是对`execl`. 正确的调用可能是：

```
execl( "/bin/ls", "ls", "-l", (char*)0 ); 
```

最后一个参数*必须*是`(char*)0`，否则您有未定义的行为。第一个参数是可执行文件的路径。以下参数出现在`argv`执行的程序中。这些参数的列表以`(char*)0`;结尾。这就是被调用函数知道已到达最后一个参数的方式。例如，在上面的示例中，可执行文件 at`"/bin/ls"`将替换您的代码；在其中`main`，它将具有`argc`等于 2、具有`argv[0]`等于`"ls"`和`argv[1]`等于`"-l"`。

在这个函数之后，你应该有错误处理代码。（`execl`当它返回时总是返回-1，所以你不需要测试它。它只在出现某种错误时返回。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T16:19:06.780

这些`exec`函数是可变的：它们采用可变数量的参数，以便您可以将可变数量的参数传递给命令。函数需要`NULL`用作标记来标记参数列表的结尾。

在可变参数函数中有一个循环，它将遍历可变数量的参数。这些循环需要终止条件。在某些情况下，例如`printf`，参数的实际数量可以从另一个参数中推断出来。在其他函数中，`NULL`用于标记列表的结束。

另一种选择是为参数*数量*添加一个额外的函数参数，但这会使代码更脆弱，需要程序员管理一个额外的参数，而不是简单地总是使用 a`NULL`作为最终参数。

您还将看到`(char *) 0`用作标记：

```
execl("/bin/ls", "ls", "-l", (char *) 0); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-19T12:05:42.673

在`/usr/include/libio.h`中，由于 gcc 2.8（很久以前）`NULL`被定义为**null（**为内置函数保留），在此之前，由于`NULL`未传递类型，因此与在某种情况下`(void *)0`无法区分，例外情况是在这种情况下定义了if定义为 0。`(char *)0``varargs``__cplusplus``NULL`

特别是如果您有 64 位架构，安全的做法是明确使用`(void *)0`定义为与任何指针兼容的指针，而不依赖于`#defines`标准库中可能出现的任何狡猾的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-10T21:39:47.287

结束参数的**目的**`(char *) 0`是终止参数。如果缺少它，可能会导致未定义的行为。手册页将**execl**签名定义为：

```
int execl(const char *path, const char *arg, ...); 
```

*path*：要调用的程序的位置，要调用的程序。

*arg* , ...*: 可以认为是 arg0, arg1, ..., argn。

在您的情况下`execl( "/bin/ls", "ls", "-l", (char*)0 );`是正确的函数调用。

“ *bin/ls* ” 要调用的程序

“ *ls* ” 程序名称

“ *-l* ”是该程序的参数，称为

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-27T05:14:04.467

POSIX 函数的 glibc-2.34 实现`execl`如下所示。

```
/* Copyright (C) 1991-2021 Free Software Foundation, Inc.
   This file is part of the GNU C Library.

   The GNU C Library is free software; you can redistribute it and/or
   modify it under the terms of the GNU Lesser General Public
   License as published by the Free Software Foundation; either
   version 2.1 of the License, or (at your option) any later version.

   The GNU C Library is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
   Lesser General Public License for more details.

   You should have received a copy of the GNU Lesser General Public
   License along with the GNU C Library; if not, see
   <https://www.gnu.org/licenses/>.  */

#include <unistd.h>
#include <errno.h>
#include <stdarg.h>
#include <sys/param.h>
#include <stddef.h>

/* Execute PATH with all arguments after PATH until
   a NULL pointer and environment from `environ'.  */
int
execl (const char *path, const char *arg, ...)
{
  ptrdiff_t argc;
  va_list ap;
  va_start (ap, arg);
  for (argc = 1; va_arg (ap, const char *); argc++)
    {
      if (argc == INT_MAX)
    {
      va_end (ap);
      errno = E2BIG;
      return -1;
    }
    }
  va_end (ap);

  /* Avoid dynamic memory allocation due two main issues:
     1\. The function should be async-signal-safe and a running on a signal
        handler with a fail outcome might lead to malloc bad state.
     2\. It might be used in a vfork/clone(VFORK) scenario where using
        malloc also might lead to internal bad state.  */
  ptrdiff_t i;
  char *argv[argc + 1];
  va_start (ap, arg);
  argv[0] = (char *) arg;
  for (i = 1; i <= argc; i++)
    argv[i] = va_arg (ap, char *);
  va_end (ap);

  return __execve (path, argv, __environ);
}
libc_hidden_def (execl) 
```

第一个循环计算`argc`的参数个数`execl`（包括第一个参数`path`）。第一个循环的条件是`va_arg (ap, const char *)`。如果您使用`0`作为最后一个参数，宏将扩展为：

```
const char* temp = 0;
...
return temp; 
```

以这种方式分配的任何标量零值都是错误的。所以使用`0`作为最后一个参数将终止循环。

第二个循环形成`argc`-length 参数数组，`argv`。请注意，每个参数都`char*`在分配时显式转换。在`0`作为最后一个参数的情况下，`argv`宏扩展的结果值就像你写的一样：

```
char* p = 0;
argv[i] = p;
... 
```

同样，这绝对是一个零值，并且将在 execve 内的循环条件中评估为 false。不受欢迎的意见，但`0`作为最后一个论点使用在`execl`技术上是正确的。您不必强调`int (32-bit) -> char* (64-bit)`“它是实现并且可能不会用零填充”转换 bs，因为 va_arg 是一个宏 - 它在现场*定义*a并分配给它，这保证它会有一个错误的逻辑值。`char*``0`

# vb.net - Visual Studio 2012 资源路径

> ID：12677130
> 
> 赞同：0
> 
> 时间：2012-10-01T16:18:08.613
> 
> 标签：vb.net, visual-studio-2012

您能告诉我如何在 Visual Studio 2012 中读取和写入包含在我的项目（资源）中的 txt 文件吗？它在资源中，但似乎 My.Resources 不起作用。

# sql - SQL：修改具有唯一值的查询结果行

> ID：12677133
> 
> 赞同：2
> 
> 时间：2012-10-01T16:18:30.733
> 
> 标签：sql, sqlite

我有一个**sqlite**查询，它返回类似于以下内容的列 [字母，数字]：

```
("a", 1) 
("a", 2)
("b", 3)
("c", 3) 
```

如果字母不同，我想将数字列检索为 0。它是如何完成的？

预期输出：

```
("a", 1) 
("a", 2)
("b", 0)
("c", 0) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:26:09.020

怎么样（[SQL小提琴](http://sqlfiddle.com/#!5/701d0/2)）：

```
SELECT Q.letter, 
    CASE WHEN (SELECT COUNT(*) FROM (query) QQ WHERE QQ.letter = Q.letter) = 1 THEN 0 
         ELSE Q.number
    END AS number
FROM (query) Q 
```

请注意，将“查询”替换为生成您的第一个结果的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T16:29:50.260

您可以使用子查询：

```
select t1.col1,
  case when t2.cnt > 1 then t1.col2 else 0 end col2
from table1 t1
left join
(
  select count(*) as cnt, col1
  from table1 
  group by col1
) t2
  on t1.col1 = t2.col1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!7/b3fd9/8)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T16:38:32.347

```
SELECT tba.mychar
-- if tbu.mychar is null, then the letter is not unique
--   when it happens, the letter is not "unique" thus use the number column
--   else use zero for "unique" letters
, CASE WHEN tbu.mychar IS NULL THEN tba.mynum ELSE 0 END AS newnum
FROM mytab tba
LEFT JOIN (
    -- this subquery only returns the letters that don't repeat
    SELECT mychar
    FROM mytab
    GROUP BY mychar
    HAVING COUNT(*) = 1
) AS tbu ON tba.mychar=tbu.mychar 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T16:38:36.893

可以使用包含 2 个单独语句的 UNION ALL 来执行此操作（一个用于重复字母，一个用于仅出现一次的字母）：

```
 SELECT letter, number
    FROM tableName
    WHERE letter IN (
        SELECT letter
        FROM tableName
        GROUP BY letter
        HAVING COUNT(1) > 1
    )
UNION ALL
    SELECT letter, 0
    FROM tableName
    WHERE letter IN (
        SELECT letter
        FROM tableName
        GROUP BY letter
        HAVING COUNT(1) = 1
    ) 
```

# wordpress - 如何在 nginx 上对 WordPress 做 AB 测试？

> ID：12677135
> 
> 赞同：0
> 
> 时间：2012-10-01T16:18:41.477
> 
> 标签：wordpress, nginx

我有一个在 nginx 上运行的大流量 WordPress 站点，我想对 UX/主题更改进行一些 AB 测试。放置此逻辑并确保在监控时将传入流量分成 50/50 的最佳位置在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:24:55.230

[这些插件](http://wordpress.org/extend/plugins/tags/ab-testing)在您进行 A/B 测试时应该很有用。它们包括测试配置和监控。我以前成功地使用过Optimizely。

# iphone - 将纵向视图控制器推到横向视图控制器上？

> ID：12677137
> 
> 赞同：1
> 
> 时间：2012-10-01T16:18:50.663
> 
> 标签：iphone, objective-c, ios, xcode

我正在尝试将仅纵向视图控制器推送到允许纵向或横向的控制器上。我遇到的问题是，如果用户处于横向模式并且我将新控制器推到它上面，它将保持横向模式并且看起来一切都搞砸了。当新的视图控制器被推上时，如何强制方向更改为纵向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T17:59:12.893

KDaker 的回答是正确的，但您可以考虑的另一个选择是，当您的方向不是您想要的时，您是否可以限制导航。这不一定是一个好主意，但在某些情况下它可以很好地工作。一个例子是，如果您有一个视频，当旋转到横向时变成全屏并覆盖您的导航返回按钮，直到它返回到纵向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T16:42:07.250

在 iOS 5 和任何东西之前，你不能“强制”从一个视图到另一个视图的方向。您可以仅支持项目的一种方向，但随后允许自动旋转。因此，在您的情况下，您只能允许自动旋转并等待用户旋转设备。

在 iOS 6 中，他们改变了方向处理的工作方式，变得更加灵活。你现在有这些方法：

`- (NSUInteger)supportedInterfaceOrientations`

`- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation`

使用这些，您可以以您喜欢的任何方向呈现您的视图控制器，因为它在前一种方法中受支持。

希望这可以帮助。

# silverlight - 隐藏共享点中的可见文件

> ID：12677140
> 
> 赞同：0
> 
> 时间：2012-10-01T16:18:57.083
> 
> 标签：silverlight, sharepoint, permissions, web-parts

我们公司在 excel/图像文件中有一些数据，我们希望通过我们的共享点门户向我们的员工提供这些数据。但是，我们不希望他们能够下载文件或将它们复制/粘贴到他们的 PC 上。

对于这个问题，我编写了一个 silverlight 应用程序来显示 excel 文件并禁用选择/复制功能。所以现在我们将文件上传到一个文档库，让这个库对所有用户“可见”。我们有一个 Web 部件可以访问该库并将加密形式的链接传递给 Silverlight 应用程序以进行显示。从 webpart 页面，用户看不到实际文件的链接。我们将为用户提供指向此 Web 部件页面的链接，而不是文档库本身。

但是，如果用户转到“所有站点内容”页面，他仍然可以轻松查看文档库并下载文件。

我的问题是：有没有一种方法可以在不让用户拥有下载链接的情况下查看文件？如果有更好的方法，我也想知道。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:14:25.273

从“所有站点内容页面”隐藏库的一种相对简单的方法是将其隐藏。您无法从 UI 执行此操作，但您可以更改列表实例（如果您自己构建列表定义和实例）以将列表创建为隐藏，或者您可以使用 SharePoint Designer 打开列表/库并检查列表设置中的“从浏览器中隐藏”。

或者，您可以使用 SharePoint 命令行管理程序将列表标记为隐藏：

```
$w = get-spweb http://yoursite
$l = $w.Lists["yourlistname"]
$l.Hidden = $true
$l.Update() 
```

请注意，如果用户知道库的 URL，隐藏库并不会阻止用户浏览它。通过开发人员代理/网络嗅探器（如 Fiddler），即使使用 Silverlight，如果真的想要，也可以找出库的 url。即使将链接传递给加密的 Silverlight 应用程序，Silverlight 应用程序本身也可能必须访问完整的 url，因此它们是可跟踪的。

# artificial-intelligence - 针对每个 AI 领域列出的每个必要条件

> ID：12677147
> 
> 赞同：1
> 
> 时间：2012-10-01T16:19:07.567
> 
> 标签：artificial-intelligence

是的，人工智能领域是非常广阔的领域。我浏览了 AI 的 wiki 页面并阅读了它的不同领域。我认为任何热心的初学者都可以根据他/她的兴趣选择其中一个领域来进入人工智能，但在进入之前，拥有相应领域的必备条件总是好的。

对于任何 AI 初学者（比如我）来说，针对每个 AI 领域列出这些必备条件是非常有用的，这样他就可以一次刷新他的知识并开始实际领域。请有人在这里列出它们吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T06:37:22.020

这个问题没有一个简单的答案。所需的知识程度取决于您想进入适用领域的深度。

以使用简单的神经网络 API 为例，几乎没有任何先决条件。要知道神经网络是否适用于特定问题或编写自己的神经网络，您至少需要具备高中水平的数学知识才能理解神经网络的内部结构和限制（或者您可以尝试全部记住）。为了能够争论和理解特定方法的论点，您可能需要大学水平的数学。

如果你想了解更多关于 AI 及其不同领域的知识（并了解需求），我建议你参加 AI 入门课程或你感兴趣的子领域的课程。Coursera.org 是提供此类课程的不错网站（而且它是免费的）。许多课程会在您注册之前为您提供先决条件列表。

根据我的经验，人工智能许多领域的主要先决条件是统计、线性代数或微积分。

对数据结构和算法的正确理解对于人工智能的大多数领域（以及一般编程）也非常重要。

我认为与其让某人在这里放一张所有先决条件的巨大表格，不如选择一个看起来很有趣的子领域，参加入门课程，看看你是否理解它。您始终可以学习先决条件。

如果您没有高中数学知识，那么在考虑 AI 之前先上一两门数学课程可能是个好主意。

# php - 如何组合多维数组中的数组和计数值？

> ID：12677152
> 
> 赞同：0
> 
> 时间：2012-10-01T16:19:43.603
> 
> 标签：php, arrays, multidimensional-array

我是 php 的初学者，整天都在寻找解决方案，但没有成功。

我有以下数组：

```
$data = Array
(
[0] => Array
    (
        [my_id] => 1
        [my_post_id] => 123
        [my_status] => 1
        [my_rating] => 5
    )

[1] => Array
    (
        [my_id] => 2
        [my_post_id] => 123
        [my_status] => 1
        [my_rating] => 4
    )

[2] => Array
    (
        [my_id] => 3
        [my_post_id] => 123
        [my_status] => 1
        [my_rating] => 5
    )

[3] => Array
    (
        [my_id] => 4
        [my_post_id] => 456
        [my_status] => 1
        [my_rating] => 5
    )

[4] => Array
    (
        [my_id] => 5
        [my_post_id] => 456
        [my_status] => 1
        [my_rating] => 3
    )
) 
```

并希望合并具有相同“my_post_id”的数组并计算具有相同“my_post_id”的“my_status”和“my_rating”的值。

最后，我想要以下数组：

```
 $data = Array
(
[0] => Array
    (
        [my_post_id] => 123
        [my_status] => 3
        [my_rating] => 14
    )

[1] => Array
    (
        [my_post_id] => 456
        [my_status] => 2
        [my_rating] => 8
    )
) 
```

我可以使用以下代码获得具有唯一“my_post_id”的数组，但我不知道如何计算其他值。

```
$out = array();
    foreach( $data as $row ) {
        $out[$row['my_post_id']] = $row;
    }
    $array = array_values( $out ); 
```

任何帮助将非常感激。

丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:38:47.357

这将产生您正在寻找的数组：

```
$out = array();
foreach( $data as $row ) {
    if (!isset($out[$row['my_post_id']])) {
        $out[$row['my_post_id']] = Array( "my_id"=>$row['my_id'],
                                          "my_status" => $row["my_status"],
                                          "my_rating" => $row["my_rating"]);
    }
    else {
        $out[$row['my_post_id']]["my_status"] += $row["my_status"];
        $out[$row['my_post_id']]["my_rating"] += $row["my_rating"];
    }

} 
```

结果是：

```
Array
(
    [123] => Array
        (
            [my_id] => 1
            [my_status] => 3
            [my_rating] => 14
        )

    [456] => Array
        (
            [my_id] => 4
            [my_status] => 2
            [my_rating] => 8
        )

) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T16:40:13.213

尝试以下 - 未经测试的代码

```
foreach($data as $key => $val){
    if(!array_search($val['my_post_id'],$newArray)){
        $newArray[]=array('my_post_id' => $val['my_post_id'], 
                          'my_status' => $val['my_status'],
                          'my_rating' => $val['my_rating']);
    }else{
        $myIndex=array_search($val['my_post_id'],$newArray);
        $newArray[$myIndex]['my_status']+=$val['my_status'];
        $newArray[$myIndex]['my_rating']+=$val['my_rating'];
    }
} 
```

# c# - 在 DataSource 上找不到 DataMember 属性“Type”

> ID：12677156
> 
> 赞同：2
> 
> 时间：2012-10-01T16:19:55.290
> 
> 标签：c#, data-binding

我为 XML 反序列化创建了以下类：

```
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
[System.Xml.Serialization.XmlRootAttribute(Namespace = "", IsNullable = false)]
public class ProgrammingConfiguration
{
    private uint versionField;
    private byte[] eLFImageField;
    private PreferenceType[] preferencesField;
    private ProgrammingConfigurationProtectFlashAfterProgramming   protectFlashAfterProgrammingField;

    //XML version
    public uint Version
    {
        get { return this.versionField; }
        set { this.versionField = value; }
    }

    //ELF image
    [System.Xml.Serialization.XmlElementAttribute(DataType = "base64Binary")]
    public byte[] ELFImage
    {
        get { return this.eLFImageField; }
        set { this.eLFImageField = value; }
    }

    //Preference
    [System.Xml.Serialization.XmlArrayItemAttribute("Preference", IsNullable = false)]
    public PreferenceType[] Preferences
    {
        get { return this.preferencesField; }
        set { this.preferencesField = value; }
    }

    //Protect flash after programming
    public ProgrammingConfigurationProtectFlashAfterProgramming ProtectFlashAfterProgramming
    {
        get { return this.protectFlashAfterProgrammingField; }
        set { this.protectFlashAfterProgrammingField = value; }
    }
}

//Preference Type
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
public partial class PreferenceType
{
    private string tagField;
    private PreferenceTypePrecedence precedenceField;
    private ValueType valueField;

    public string Tag
    {
        get { return this.tagField; }
        set { this.tagField = value; }
    }

    public PreferenceTypePrecedence Precedence
    {
        get { return this.precedenceField; }
        set { this.precedenceField = value; }
    }

    public ValueType Value
    {
        get { return this.valueField; }
        set { this.valueField = value; }
    }
}

//Precedence Type
[System.SerializableAttribute()]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public enum PreferenceTypePrecedence
{
    XML,
    [System.Xml.Serialization.XmlEnumAttribute("Target,XML")]
    TargetXML,
    Target,
}

//Value Type
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
public partial class ValueType
{
    private string lengthField;
    private object itemField;
    private ItemChoiceType itemElementNameField;

    [System.Xml.Serialization.XmlElementAttribute(DataType = "integer")]
    public string Length
    {
        get { return this.lengthField; }
        set { this.lengthField = value; }
    }

    [System.Xml.Serialization.XmlElementAttribute("AutoIncrement", typeof(ValueTypeAutoIncrement))]
    [System.Xml.Serialization.XmlElementAttribute("HexBinary", typeof(string))]
    [System.Xml.Serialization.XmlElementAttribute("Integer", typeof(string))]
    [System.Xml.Serialization.XmlElementAttribute("String", typeof(string))]
    [System.Xml.Serialization.XmlChoiceIdentifierAttribute("ItemElementName")]
    public object Item
    {
        get { return this.itemField; }
        set { this.itemField = value; }
    }

    [System.Xml.Serialization.XmlIgnoreAttribute()]
    public ItemChoiceType ItemElementName
    {
        get { return this.itemElementNameField; }
        set { this.itemElementNameField = value; }
    }
}

//Autoincrement data
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public partial class ValueTypeAutoIncrement
{
    private string minimumField;
    private string maximumField;
    private ValueTypeAutoIncrementOverflowBehaviour overflowBehaviourField;

    public string Minimum
    {
        get { return this.minimumField; }
        set { this.minimumField = value; }
    }

    public string Maximum
    {
        get { return this.maximumField; }
        set { this.maximumField = value; }
    }

    public ValueTypeAutoIncrementOverflowBehaviour OverflowBehaviour
    {
        get { return this.overflowBehaviourField; }
        set { this.overflowBehaviourField = value; }
    }
}

//Overflow behaviour
[System.SerializableAttribute()]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public enum ValueTypeAutoIncrementOverflowBehaviour
{
    Wrap,
    Exception,
}

//Data type
[System.SerializableAttribute()]
[System.Xml.Serialization.XmlTypeAttribute(IncludeInSchema = false)]
public enum ItemChoiceType
{
    AutoIncrement,
    HexBinary,
    Integer,
    String,
}

//ProtectFlashAfterProgramming
[System.SerializableAttribute()]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true)]
public enum ProgrammingConfigurationProtectFlashAfterProgramming
{
    True,
    False,
} 
```

我想创建 2 个绑定源，一个用于 datagridview，一个用于文本框。我尝试了以下方法：

```
 ProgrammingConfiguration pc = new ProgrammingConfiguration();

        XmlSerializer serializer = new XmlSerializer(typeof(ProgrammingConfiguration));

        //Reading the XML document requires a FileStream.            
        Stream reader = new FileStream(filename, FileMode.Open);

        //Call the Deserialize method to restore the object's state.
        pc = (ProgrammingConfiguration)serializer.Deserialize(reader);

        reader.Close();

        bindingsource.DataSource = pc;
        bindingsource.DataMember = "Preferences";

        bsV.DataSource = bindingsource;
        bsV.DataMember = "ItemElementName"; 
```

该程序无法在 bsV.DataMember = "ItemElementName" 行运行。请有任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T03:15:29.257

改变：

```
bindingsource.DataSource = pc; 
```

到：

```
bindingsource.DataSource = new List { pc }; 
```

我不知道为什么，但 PropertyManager 不喜欢链接属性，但 CurrencyManager 喜欢。使用 IEnumerable 将欺骗并强制 BindingContext 创建 CurrencyManager 而不是用于绑定单个对象的 PropertyManager。该问题与 BindingSource 无关，您可以将网格的 DataSource 属性设置为列表，将 DataMember 设置为 Preferences。

您也不必使用 BindingSource 绑定到文本框。

只需使用：

```
textBox.DataBindings.Add(list, "Preferences.ItemElementName"); 
```

至于 Value.Maximum 的使用：

```
textBoxMaximum.DataBindings.Add(list, Preferences.Value.Maximum);
textBoxMaximum.DataBindings.Add(bindingSource, Value.Maximum); 
```

# java - 通配符上的Java通用混淆

> ID：12677158
> 
> 赞同：0
> 
> 时间：2012-10-01T16:20:13.137
> 
> 标签：java

我正在学习通用并在某些时候受到打击。这是我的课

```
public class MyValidator{

    private Class providerClass;

    public MyValidator(Container container){
       setProviderClass(container.getInstanc(ValidationProvider.class),"my.providerClass");
   }

    public void setProviderClass(Class<? extends ValidationProvider> providerClass)
    {
        this.providerClass = providerClass;
    }

} 
```

容器的签名是

```
 <T> T getInstance(Class<T> type, String name)
Gets an instance of the given dependency which was declared in ContainerBuilder. 
```

容器是我正在使用的平台的内置 DI 机制，但是当我从构造函数内部调用 setter 方法时，我在 Eclipse 中遇到以下异常

> MyValidator 类型中的方法 setProviderClass(Class) 不适用于参数 (ValidationProvider)

我知道我没有正确遵守合同，但不知道如何做到这一点。我的意图是在运行时设置类，它应该接受所有那些暗示`ValidationProvider`这是一个接口的暗示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:35:07.717

getInstance(Class type, String name) 返回 T not Class -> ValidationProvider 的实例而不是类对象。

这就是异常消息所说的：您需要一个 Class 对象，但您正在传递一个 ValidationProvider 对象。

# iphone - iOS 设备上的仪器 - 无法符号化，因为应用程序未出现在下拉列表中

> ID：12677160
> 
> 赞同：2
> 
> 时间：2012-10-01T16:20:23.550
> 
> 标签：iphone, ios, instruments, symbolicate

我在设备上运行了时间分析器。我最终得到了一个痕迹，但没有符号。因此，按照[此答案](https://stackoverflow.com/questions/2776466/missing-symbol-names-when-profiling-iphone-application-with-instruments)中的建议，我尝试重新符号化。但是，二进制文件的下拉列表是空的。请参阅屏幕截图。如何将符号放入我的跟踪中？

有关符号化分析器运行的一般说明，请参见[此处](https://stackoverflow.com/questions/2776466/missing-symbol-names-when-profiling-iphone-application-with-instruments)。但是这个特殊问题没有得到解决。 ![在此处输入图像描述](../Images/b0783d41e897db84cb8e0abd8514f319.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:27:29.620

如果你有 dSYM 和应用程序包，你可以使用我写的这个符号化工具来快速符号化你的应用程序的地址。

```
symbolication your.app.dSYM your.app.trace 
```

符号化版本将打印到 STDOUT。为获得最佳效果，请将 .app 与 .dSYM 保存在同一文件夹中。

[https://github.com/Imperiopolis/Symbolication](https://github.com/Imperiopolis/Symbolication)

您也可以使用 GDB 手动符号化问题行。用 GDB 打开你的 dSYM，然后运行

```
set print symbol-filename on
p/a address 
```

# php - 使用 Joomla 展示产品

> ID：12677161
> 
> 赞同：2
> 
> 时间：2012-10-01T16:20:26.110
> 
> 标签：php, joomla

我的问题可能是一个愚蠢的问题。但需要得到专家的帮助。我曾与 Magento 合作过，因此通过使用 Magento，我们可以简单地处理这项工作。但是我们最近有一个新项目，不幸的是他们要求使用 Joomla 开发系统，他们需要添加产品并需要在他们的网站上显示。他们不需要处理购物车和支付相关的东西，但他们需要动态处理产品。

我的运气不好，我被分配到这个开发中并且坚持如何以简单的方式做到这一点，因为这是我第一次使用 Joomla。欢迎所有的想法。我试图在互联网上找到一些解决方案，但我找不到任何解决方案:(

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T16:21:52.370

使用[Virtuemart](http://virtuemart.net/)，Joomla 组件作为目录，它有一个模板系统，就像 Magento。一切都可能是学习的挑战，但我实际上认为 Magento 比 Virtuemart 更难掌握。

[论坛](http://forum.virtuemart.net/index.php?PHPSESSID=0019be890c5ca34f2c1cf54ae830dca8&board=130.0)还可以，就是有点缺光彩。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T16:43:26.910

我一直使用[JoomShopping ，因为我发现后端比](http://extensions.joomla.org/extensions/e-commerce/shopping-cart/5378)[VirtueMart](http://extensions.joomla.org/extensions/e-commerce/shopping-cart/129)之类的要简单得多。但是 VirtueMart 可能更适合您的需求。您可能还对[HikaShop](http://extensions.joomla.org/extensions/e-commerce/shopping-cart/14275)或[redShop 感兴趣](http://extensions.joomla.org/extensions/e-commerce/shopping-cart/11571)。

每个都有其优点和缺点，因此可能值得测试每个以查看您更喜欢哪个。

希望这可以帮助

# jquery - 使用 cookie 持久化动态添加的 jQuery 选项卡

> ID：12677162
> 
> 赞同：0
> 
> 时间：2012-10-01T16:20:28.517
> 
> 标签：jquery, asp.net, dynamic, cookies, tabs

我试图找出在我的网页中保持（静态和动态）jQuery 选项卡状态的最佳方法。当网页加载时，默认情况下会有一个选项卡。用户可以选择添加/删除选项卡。我知道如果我们在初始化选项卡时启用 cookie 选项，我们可以保持静态选项卡的状态。

问题是：“如何保持动态添加的 jQuery 选项卡的状态？”。

我现在正在考虑的一个选项是在添加动态选项卡时（以及在内容更改时）在 cookie 中存储/更新动态选项卡的内容，并在刷新页面时检索 cookie 以重新创建选项卡。

我想知道是否有更好的方法来做到这一点？也许是 jQuery 中的一些标准/内置功能或插件？

感谢您的帮助。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:52:43.293

这可以分为两个概念；如何/在哪里存储会话 ID（因为没有更好的术语）以及数据存储在哪里。

您可以只使用[ASP.Net 会话状态](http://msdn.microsoft.com/en-us/library/ms178581%28v=vs.100%29.aspx)并很快完成。

您可以创建自己的唯一 ID，并将数据保存在服务器端的数据库/xml 中，并在需要时通过 Ajax 检索数据。

您可以将此信息存储在[cookie](http://www.electrictoolbox.com/jquery-cookies/)中。

您可以将此信息存储在[Local Storage](http://coding.smashingmagazine.com/2010/10/11/local-storage-and-how-to-use-it/)中。

请注意，每个人都有自己的安全问题，cookie 通常不安全，因此如果用户可以重命名某些内容或将用户可识别的数据放入其中，cookie 通常会不受欢迎。

# unix - Unix uniq, sort & cut 命令删除重复行

> ID：12677167
> 
> 赞同：3
> 
> 时间：2012-10-01T16:20:44.907
> 
> 标签：unix, sorting, command, cut, uniq

如果我们有以下结果：

```
Operating System,50
Operating System,40
Operating System,30
Operating System,23
Data Structure,87
Data Structure,21
Data Structure,17
Data Structure,8
Data Structure,3
Crypo,33
Crypo,31
C++,65
C Language,39
C Language,19
C Language,4
Java 1.6,16
Java 1.6,11
Java 1.6,10
Java 1.6,2 
```

我只想比较第一个字段（书名），并删除除每本书的第一行之外的重复行，它记录了最大的数字。所以结果如下：

```
Operating System,50
Data Structure,87
Crypo,33
C++, 65
C Language,39
Java 1.6,16 
```

谁能帮助我，我怎么能使用 uniq、sort & cut 命令？可能使用 tr、head 或 tail？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T00:41:01.560

在这种情况下最优雅似乎

```
rev input | uniq -f1 | rev 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T16:47:05.900

这可以通过不同的方式完成，但我试图将自己限制在您建议的工具中：

```
cut -d, -f1 file | uniq | xargs -I{} grep -m 1 "{}" file 
```

或者，如果您确定第一列中的单词不超过 2 个相同的字符，您可以简单地使用：`uniq -w3 file`。这告诉`uniq`比较不超过前三个字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T16:51:15.253

```
awk -F, '{if(P!=$1)print;p=$1}' your_file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T00:35:39.893

如果您的输入已排序，则可以`GNU awk`这样使用：

```
awk -F, '!array[$1]++' file.txt 
```

结果：

```
Operating System,50
Data Structure,87
Crypo,33
C++,65
C Language,39
Java 1.6,16 
```

如果您的输入未排序，则可以`GNU awk`这样使用：

```
awk -F, 'FNR==NR { if ($2 > array[$1]) array[$1]=$2; next } !dup[$1]++ { if ($1 in array) print $1 FS array[$1] }' file.txt{,} 
```

结果：

```
Operating System,50
Data Structure,87
Crypo,33
C++,65
C Language,39
Java 1.6,16 
```

# firefox - Firefox 扩展获取 google pagerank 和 alexa 排名

> ID：12677168
> 
> 赞同：1
> 
> 时间：2012-10-01T16:20:46.350
> 
> 标签：firefox, firefox-addon, alexa

我正在创建一个 Mozilla Firefox 工具栏来显示当前网站的 PageRank 和 Alexa 排名。我知道的一种方法是`XMLHttpRequest`在我的 JavaScript 文件中使用我的网站服务器上托管的 PHP 页面获取信息。

PHP 类有这个功能：

```
function check($page) {

// Open a socket to the toolbarqueries address, used by Google Toolbar
$socket = fsockopen("toolbarqueries.google.com", 80, $errno, $errstr, 30);

// If a connection can be established
if($socket) {
  // Prep socket headers
  $out = "GET /tbr?client=navclient-auto&ch=".$this->checkHash($this->createHash($page)).
          "&features=Rank&q=info:".$page."&num=100&filter=0 HTTP/1.1\r\n";
  $out .= "Host: toolbarqueries.google.com\r\n";
  $out .= "User-Agent: Mozilla/4.0 (compatible; GoogleToolbar 2.0.114-big; Windows XP 5.1)\r\n";
  $out .= "Connection: Close\r\n\r\n";

  // Write settings to the socket
  fwrite($socket, $out);

  // When a response is received...
  $result = "";
  while(!feof($socket)) {
    $data = fgets($socket, 128);
    $pos = strpos($data, "Rank_");
    if($pos !== false){
      $pagerank = substr($data, $pos + 9);
      $result += $pagerank;
    }
  }
  // Close the connection
  fclose($socket);

  // Return the rank!
  return $result;
} 
```

**有没有更好的方法在我的自定义 Firefox 工具栏中获得页面排名而无需托管 PHP 服务？**

```
 // Create a url hash
function createHash($string) {
$check1 = $this->stringToNumber($string, 0x1505, 0x21);
  $check2 = $this->stringToNumber($string, 0, 0x1003F);

$factor = 4;
$halfFactor = $factor/2;

  $check1 >>= $halfFactor;
  $check1 = (($check1 >> $factor) & 0x3FFFFC0 ) | ($check1 & 0x3F);
  $check1 = (($check1 >> $factor) & 0x3FFC00 ) | ($check1 & 0x3FF);
  $check1 = (($check1 >> $factor) & 0x3C000 ) | ($check1 & 0x3FFF);  

  $calc1 = (((($check1 & 0x3C0) << $factor) | ($check1 & 0x3C)) << $halfFactor ) | ($check2 & 0xF0F );
  $calc2 = (((($check1 & 0xFFFFC000) << $factor) | ($check1 & 0x3C00)) << 0xA) | ($check2 & 0xF0F0000 );

  return ($calc1 | $calc2); 
```

}

// 为哈希创建校验和

```
function checkHash($hashNumber)
{
  $check = 0;
$flag = 0;

$hashString = sprintf('%u', $hashNumber) ;
$length = strlen($hashString);

for ($i = $length - 1;  $i >= 0;  $i --) {
  $r = $hashString{$i};
  if(1 === ($flag % 2)) {
    $r += $r;
    $r = (int)($r / 10) + ($r % 10);
  }
  $check += $r;
  $flag ++;
}

$check %= 10;
if(0 !== $check) {
  $check = 10 - $check;
  if(1 === ($flag % 2) ) {
    if(1 === ($check % 2)) {
      $check += 9;
    }
    $check >>= 1;
  }
}

return '7'.$check.$hashString; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T05:42:57.947

如果您的 PHP 代码只发出 HTTP 请求，那么您也可以从 Firefox 扩展发出相同的请求：

```
var request = new XMLHttpHeader();
request.open("http://toolbarqueries.google.com/tbr?client=navclient-auto&ch=...");
request.setRequestHeader("User-Agent", "Mozilla/4.0 (compatible; GoogleToolbar 2.0.114-big; Windows XP 5.1)");
request.send(); 
```

但是，您应该澄清对 Google 服务器的这种使用（尤其是伪装成 Google 工具栏）是否符合他们的服务条款。否则，您可能会发现自己面临法律诉讼，或者至少会突然改变此 Web 服务的工作方式。

至于散列函数：显然，您可以将此算法转换为 JavaScript（从外观上看非常简单）或四处搜索以查看是否有人已经这样做了。例如，我发现[了这个基于 JS 的哈希算法实现](http://userscripts.org/scripts/review/117727)（它是一种不同的算法，前缀为 8 而不是 7，但请注意，此前缀不是由哈希函数返回的，而是那里的 URL 的一部分）。

# java - 从 Esper + 套接字开始

> ID：12677169
> 
> 赞同：3
> 
> 时间：2012-10-01T16:20:59.243
> 
> 标签：java, sockets, esper, complex-event-processing

我是 Esper 的新手，我想得到一些帮助。我已经设法将 Esper 与 CSV 文件一起使用，但现在我需要使用 Java 对象作为通过套接字发送的事件，而且我在 Internet 上找不到简单的示例来用作指南。

有没有人基于它们的一些简单的例子？

无论如何，我把我正在努力工作的代码放在这里。当我运行它时没有任何反应，似乎套接字连接不起作用。

服务器类（它还包含事件类）。应该发送事件：

```
import java.io.* ;
import java.net.* ;

class Server {

static final int PORT=5002;

    public Server( ) {
        try {
            ServerSocket skServer = new ServerSocket( PORT );
            System.out.println("Listening at " + PORT );
            Socket skClient = skServer.accept();        
            System.out.println("Serving to Esper");
            OutputStream aux = skClient.getOutputStream();
            ObjectOutputStream flux = new ObjectOutputStream( aux );
            int i = 0;
            while (i<10) {
                flux.writeObject( new MeteoEvent(i,"A") );
                i++;
                }
            flux.flush();
            skClient.close();
            System.out.println("End of transmission");
            } catch( Exception e ) {
            System.out.println( e.getMessage() );
        }
    }

    public static void main( String[] arg ) {
        new Server();
    }

    class MeteoEvent{

        private int sensorId;
        private String GeoArea;

        public MeteoEvent() {
        }

        public MeteoEvent(int sensorid, String geoarea) {
            this.sensorId = sensorid;
            this.GeoArea = geoarea;
        }

        public int getSensorId() {
            return sensorId;
        }

        public void setSensorId(int sensorId) {
            this.sensorId = sensorId;
        }

        public String getGeoArea() {
            return GeoArea;
        }

        public void setGeoArea(String geoArea) {
            GeoArea = geoArea;
        }   
    }
} 
```

还有基于 Esper 的课程。

```
import java.io.File;
import java.io.IOException;
import java.sql.SQLException;
import java.util.Date;
import java.util.HashMap;
import java.util.Map;

import com.espertech.esper.client.Configuration;
import com.espertech.esper.client.EPAdministrator;
import com.espertech.esper.client.EPRuntime;
import com.espertech.esper.client.EPServiceProvider;
import com.espertech.esper.client.EPServiceProviderManager;
import com.espertech.esper.client.EPStatement;
import com.espertech.esper.client.EventBean;
import com.espertech.esper.client.UpdateListener;
import com.espertech.esper.event.map.MapEventBean;
import com.espertech.esperio.socket.EsperIOSocketAdapter;
import com.espertech.esperio.socket.config.ConfigurationSocketAdapter;
import com.espertech.esperio.socket.config.DataType;
import com.espertech.esperio.socket.config.SocketConfig;

public class Demo {

    public static class CEPListener implements UpdateListener {

        private String tag;
        public CEPListener (String tag)
        {
            this.tag = tag;
        }

public static void main(String[] args) throws IOException, InterruptedException {
        Configuration configuration = new Configuration();

        Map<String, Object> eventProperties = new HashMap<String, Object>();
        eventProperties.put("sensorId", int.class);
        eventProperties.put("GeoArea", String.class);
        configuration.addEventType("MeteoEvent", eventProperties);

        ConfigurationSocketAdapter socketAdapterConfig = new ConfigurationSocketAdapter();

        SocketConfig socketConfig = new SocketConfig();
        socketConfig.setDataType(DataType.OBJECT);
        socketConfig.setPort(5002);
        socketAdapterConfig.getSockets().put("MeteoSocket", socketConfig);

        EPServiceProvider cepService = EPServiceProviderManager.getProvider("MeteoSocket",configuration);

        EPRuntime cepServiceRT = cepService.getEPRuntime();

        EPAdministrator cepAdmin = cepService.getEPAdministrator();

        EsperIOSocketAdapter socketAdapter = new EsperIOSocketAdapter (socketAdapterConfig, "MeteoSocket");
        socketAdapter.start();

        EPStatement stmt = cepAdmin.createEPL("insert into JoinStream select * from MeteoEvent");

        EPStatement outputStatementX = cepAdmin.createEPL("select * from JoinStream");

        outputStatementX.addListener(new CEPListener("JS"));

        cepService.initialize();

        Object lock = new Object();
        synchronized (lock)
        {
                lock.wait();
         }
} 
```

如果有人需要一些时间来帮助我，请提前非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T08:26:38.237

问题解决了！Esper 开发人员列表非常有用。[我通过位于此处](http://svn.codehaus.org/esper/esper/trunk/esperio-socket/src/test/java/com/espertech/esperio/socket/)的测试类学习了如何使用 Esper + 套接字

此致！

# java - 将字节写入文件而不擦除现有字节

> ID：12677170
> 
> 赞同：9
> 
> 时间：2012-10-01T16:21:01.950
> 
> 标签：java, java-io

> **可能重复：**
> [在 Java 文件中间写入字节的最佳方法](https://stackoverflow.com/questions/181408/best-way-to-write-bytes-in-the-middle-of-a-file-in-java)

我有一个需要写入字节的文件。

我知道我需要在文件中的哪个位置**插入**特定字节。为了清楚起见，我需要在文件中间写入字节而不擦除任何现有字节。然后整个操作应该增加文件的长度。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T16:36:39.260

这样做的唯一方法是移动当前在路上的字节。根据您必须执行此操作的频率以及文件的大小，创建一个新文件、复制现有文件并在此过程中插入新字节通常是一个更好的主意。

如果您需要不经常更新文件，或者文件很小（最多可能 100 kb），您可以使用[RandomAccessFile](http://docs.oracle.com/javase/6/docs/api/java/io/RandomAccessFile.html)：

1.  使用该方法扩展文件，`setLength()`将要插入的字节数添加到该`length()`方法返回的任何内容中。
2.  如果您有足够的内存，请创建一个`byte[]`保存从插入点到文件前一个结尾的所有字节。
3.  `seek()`在插入点调用位置
4.  调用`readFully()`以填充您的临时数组
5.  在插入点调用`seek()`位置 + 要插入的字节数
6.  调用`write()`以在此时写入您的缓冲区
7.  调用`seek()`以在插入点重新定位
8.  调用 `write() 写入新字节

如果在第 2 步中无法创建足够大的数组，则必须在循环中使用较小的缓冲区执行第 3-6 步。为了提高效率，我至少会使用 64k 缓冲区。

# java - 如何正确删除SVN控制下的Java包？

> ID：12677171
> 
> 赞同：3
> 
> 时间：2012-10-01T16:21:01.240
> 
> 标签：java, svn, eclipse-indigo, subversive

我有一个 Java 项目，并且正在使用带有 Subversive SVN 插件的 Eclipse (Indigo)。我已成功设置用于项目存储库的远程 SVN 服务器。

我最近决定不再需要一个包含一些未使用类的包。所以我做了以下事情：

1.  我从包资源管理器中删除了包及其所有内容
2.  然后我右键单击我的项目的根目录，然后转到团队 >> 与存储库同步
3.  我发现新删除的包显示在同步 SVN 面板下的更改列表中，右键单击该包，然后选择“提交”。我的想法是，“*我已经在本地删除了包，现在我想将这些删除更改提交到服务器。* ”

*未*提交更改，我收到一条错误消息（我没有查看...），现在这是我在包资源管理器中看到的内容（`net.appuzi.domain.loads.http`包是我删除的包）：

![在此处输入图像描述](../Images/1dd1417fbb8063b620418bb6bda83d25.png)

现在，如果我回到 Team >> Synchronize with Repository，我会看到这样的包：

![在此处输入图像描述](../Images/34ed4dcf29ae1f2070baf3e690f52788.png)

如果我选择两个 Java 源并尝试“覆盖并提交”它们，我会收到以下错误：

```
Some of selected resources were not committed.
svn: Commit failed (details follow):
svn: '/<path-to-my-project>/MyProject/src/main/java/net/appuzi/domain/loads/http/HttpMethod.java' is not under version control 
```

所以我的直接问题是：如何“同步”我的本地工作副本和 repo，以便这个已删除的包不再存在于任何一个中（在服务器端，我致力于trunk/）。

除了那个直接的问题，这是我当前的阻止程序，我想下一个合乎逻辑的问题是：*在 SVN 中删除受版本控制的包的正确程序是什么？*“ 提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T19:56:18.047

在尝试删除之前，请尝试确保您的本地文件与远程文件相同。这样，检测到的唯一更改是删除整个文件，Eclipse 不会对冲突感到困惑。只需根据需要更新或恢复，然后再次尝试删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-21T08:32:18.400

试试这个：

1.  删除包。
2.  在项目资源管理器中右键单击您的项目。
3.  转到“团队”并单击“更新到 HEAD。
4.  再次转到“团队”并单击“提交...”。

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T16:26:58.740

我之前遇到过类似的问题，我所做的只是提交父文件夹。在你的情况下“src”。取回这些文件并再次删除它们，这次提交父文件夹。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-08T03:15:58.787

只需使用*Svn repository explore*删除文件夹，然后更新项目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-21T18:58:24.357

我有一个类似的问题，包从 SVN 存储库中删除，但仍然出现在 Eclipse 的同步视图中。我的 Eclipse 中安装了 subversion 插件。为了解决我的问题，我断开了项目与 SVN 的连接（右键单击项目 --> 团队 --> 断开连接...），同时选择选中“同时从文件系统中删除 SVN 元信息”选项。

断开连接后，我将项目重新连接到 SVN，再次与存储库同步，并且已删除的包/文件在同步视图中不再可见。

# unix - 在 unix 中使用 sed 查找和替换

> ID：12677172
> 
> 赞同：2
> 
> 时间：2012-10-01T16:21:01.803
> 
> 标签：unix, sed

> **可能重复：**
> [在 sed 替换中使用斜杠](https://stackoverflow.com/questions/5864146/use-slashes-in-sed-replace)

我需要找到以下字符串`/a/b/c`并将其替换为`/r/s/t`

它是一个字符串而不是一个文件夹

`/sam/pam/nancy` --> `/tim/cook/iphone`

我在目录中，只需要更新具有此行的多个文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T16:24:39.797

用于`sed`就地更改文件。例如：

```
sed -i 's|/a/b/c|/r/s/t|g' *.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T16:41:11.387

```
perl -pi -e 's/\/a\/b\/c/\/r\/s\/t/g' file_name 
```

# objective-c - Core Data UndoManager 发送奇怪的 NS

> ID：12677174
> 
> 赞同：4
> 
> 时间：2012-10-01T16:21:15.547
> 
> 标签：objective-c, core-data, nsundomanager

我正在开发的应用程序允许用户管理一些资产。用户可以在屏幕上创建/删除/编辑/拆分/移动资产。用户需要能够撤消所有这些步骤。

资产是用核心数据管理的（是的，`undoManager`是实例化的）。

对于这些操作中的每一个，我都使用这对创建撤消分组：

```
beginUndoGrouping ... endUndoGrouping

Here's a simple example (sequence 1):
// SPLIT
- (void) menuSplitPiece: (id) sender
{
    [self.managedObjectContext.undoManager beginUndoGrouping];
    [self.managedObjectContext.undoManager setActionName:@"Split"];
    //... do the split
    [self.managedObjectContext.undoManager endUndoGrouping];
    // if the user cancels the split action, call [self.managedObjectContext.undoManager undo] here;
} 
```

我对编辑做同样的事情：如果用户取消编辑，那么我在`endUndoGrouping`.

一切都很顺利，只有一个例外：**除了我创建的组之外，Core Data 还创建了其他一些我无法控制的组**。这就是我的意思：

我注册接收 NSUndoManagerDidCloseUndoGroupNotification 通知，如下所示：

```
- (void) registerUndoListener
{
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(didCloseUndoGroup:)
                                               name:NSUndoManagerDidCloseUndoGroupNotification object:nil];
...} 
```

我使用这些通知来刷新撤消按钮并显示由于某些操作而被撤消的操作的名称：例如 Undo Split

然而，`didCloseUndoGroup`对于上面的每个操作（例如第 1 节，在 endUndoGrouping 之后）被调用/通知两次：

在第一次通知时，`self.managedObjectContext.undoManager.undoActionName`包含我设置的撤消操作名称，这是我所期望的，而第二次`undoActionName`是一个空字符串。

作为一种解决方法，我尝试简单地撤消名称为空的操作（假设它们不是我的并且我不需要它们），并查看我是否遗漏了任何东西。

现在，`didCloseUndoGroup`看起来像这样

```
- (void) didCloseUndoGroup: (NSNotification *) notification
{
...
    if ([self.managedObjectContext.undoManager.undoActionName isEqualToString:@""]){
        [self.managedObjectContext.undoManager undo];
    }
    [self refreshUndoButton]; // this method displays the name of the undo action on the button
...
} 
```

它神奇地起作用，我可以使用“撤消”撤消任何命令，任何数量的层。但这不是它应该工作的方式......

在此之前我尝试过的其他几件事：

1.  [self.managedObjectContext processPendingChanges] 在打开任何分组之前。它仍在发送两个通知。
2.  我尝试的另一件事是 disableUndoRegistration / enableUndoRegistration。这产生了一个异常：“无效状态，使用太多嵌套撤消组调用撤消”

以上都没有帮助我“隔离”我之前提到的神秘群体。

我不应该收到两次 NSUndoManagerDidCloseUndoGroupNotification 通知。或者，我应该吗？有没有更好的方法来处理这种情况？

**更新** 这是最终奏效的。以前，我一收到通知就会自动撤消无名组。这就是导致问题的原因。现在，我撤消所有操作，直到到达我的目标组，然后对该组进行最后一次撤消。

“undoManagerHelper”只是一个堆栈管理系统，它为每个压入堆栈的命令生成一个唯一的 ID。我使用这个唯一的 ID 来命名该组。

```
- (BOOL) undoLastAction
{
    NSString *lastActionID = [self.undoManagerHelper pop]; // the command I'm looking for
    if (lastActionID == nil) return false;

    //... undo until there is nothing to undo or self.managedObjectContext.undoManager.undoActionName equals lastActionID

    //the actual undo here
    if ([currentActionID isEqualToString: lastActionID] && [self.managedObjectContext.undoManager canUndo]){
        [self.managedObjectContext.undoManager undo];
    }
    return true;
}

- (void) beginUndoGroupingWithName: (NSString *) name
{

    [self.managedObjectContext processPendingChanges];
    [self.managedObjectContext.undoManager beginUndoGrouping];
    NSString *actionID = [self.undoManagerHelper push: name];
    [self.managedObjectContext.undoManager setActionName:actionID];
}

- (void) closeLastUndoGrouping
{
    [self.managedObjectContext.undoManager endUndoGrouping];
    [self.managedObjectContext processPendingChanges];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:52:31.267

根据 beginUndoGrouping 的文档 - [https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSUndoManager_Class/Reference/Reference.html](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSUndoManager_Class/Reference/Reference.html) - “默认情况下，撤消组在事件循环的开始，但您可以使用此方法开始自己的撤消组，并将它们嵌套在其他组中。” 未命名组是包含所有操作的默认撤消组，听起来您应该根据您的情况忽略未命名组。

# regex - 使用通配符匹配任何字符的正则表达式

> ID：12677178
> 
> 赞同：28
> 
> 时间：2012-10-01T16:21:24.663
> 
> 标签：regex

我是正则表达式的新手，我正在尝试想出一些与下面的文本匹配的东西：

ABC: (z) 1999 年 1 月 2 日 \n

笔记：

*   文本将始终以“ABC：”开头
*   ':' 和 (z) 之间可能有零个、一个或多个空格。
*   (z) 的变体也是可能的 - (zz)、(zzzzzz).. 等，但总是包含在“()”中的非数字字符
*   (z) 和 jan 之间可能有零个、一个或多个空格
*   jan 可以是 jan、january 等
*   date 可以是任何格式，并且可能/可能不包含其他文本，所以我真的很想知道是否有一个正则表达式可以用来捕获在 '(z)' 和 '\n 之间找到的任何内容'

任何帮助是极大的赞赏！谢谢

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-10-01T16:25:45.053

以下应该有效：

```
ABC: *\([a-zA-Z]+\) *(.+) 
```

解释：

```
ABC:            # match literal characters 'ABC:'
 *              # zero or more spaces
\([a-zA-Z]+\)   # one or more letters inside of parentheses
 *              # zero or more spaces
(.+)            # capture one or more of any character (except newlines) 
```

要根据以下评论获得所需的分组，您可以使用以下内容：

```
(ABC:) *(\([a-zA-Z]+\).+) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T16:41:54.437

在不知道您正在使用的确切正则表达式实现的情况下，我只能提供一般性建议。（我将使用 perl 的语法，因为这就是我所知道的，某些语言需要调整）

看着`ABC: (z) jan 02 1999 \n`

*   首先要匹配的是 ABC：所以使用我们的正则表达式是`/ABC:/`

*   您说 ABC 始终位于字符串的开头，因此`/^ABC/`将确保 ABC 位于字符串的开头。

*   `\s`您可以使用（注意大小写）指令匹配空格。对于所有指令，您可以将一个或多个与`+`（或 0 个或多个与`*`）匹配

*   您需要避免使用`(`and`)`因为它是保留字符。所以`\(\)`

*   您可以匹配任何非空格或换行符`.`

*   你可以匹配任何东西，`.*`但你需要小心你不要太贪婪并捕获所有东西。

所以为了捕捉你所问的。我会用`/^ABC:\s*\(.+?\)\s*(.+)$/`

我读为：

> 以 ABC 开头：
> 
> 可能有一些空格
> 
> 有 （
> 
> 有一些字符
> 
> 有 ）
> 
> 可能有一些空格
> 
> 然后捕获所有内容，直到行尾（即`$`）。

我强烈建议保留以下关于 [http://www.cheatography.com/davechild/cheat-sheets/regular-expressions/的内容的副本](http://www.cheatography.com/davechild/cheat-sheets/regular-expressions/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T16:28:50.297

这应该满足您的要求。

`ABC:\s*(\(\D+\)\s*.*?)\\n`

这是一些测试[http://www.regexplanet.com/cookbook/ahJzfnJlZ2V4cGxhbmV0LWhyZHNyDgsSBlJlY2lwZRiEjiUM/index.html](http://www.regexplanet.com/cookbook/ahJzfnJlZ2V4cGxhbmV0LWhyZHNyDgsSBlJlY2lwZRiEjiUM/index.html)

进一步阅读正则表达式：[http ://www.regular-expressions.info/characters.html](http://www.regular-expressions.info/characters.html)

# ajax - 延迟复选框组的 JSF AJAX 侦听器

> ID：12677179
> 
> 赞同：3
> 
> 时间：2012-10-01T16:21:26.117
> 
> 标签：ajax, jsf

我有一个Checkbox Group（`h:selectManyCheckbox`），并在检查或未选中盒子时，有一个Ajax事件要开火。这很简单`f:ajax`，例如`f:ajax execute="@form" event="click"`。

我想增强它在*每次*点击后不重新执行。相反，我想要一个空闲延迟，这样如果用户快速连续单击三个框，则只有一个往返而不是三个。

有没有办法让 JSF AJAX 侦听器（`f:ajax`）在这样的延迟后触发？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T18:43:33.623

如果您还没有使用 JSF 2.2，您可以使用 JS `setTimeout()`/`clearTimeout()`来使 onclick 超时，并在再次单击时清除任何先前设置的。

例如

```
<h:selectManyCheckbox ... styleClass="delayClick">
    <f:selectItems ... />
    <f:ajax ... />
</h:selectManyCheckbox> 
```

基本上（也有一点 jQuery 的帮助）

```
$(".delayClick input").each(function(index, input) {
    var onclick = input.onclick;
    input.onclick = null;

    $(input).on("click", function(event) {
        delay(function() { onclick.call(input, event); }, 1000);
    });
});

var delay = (function() {
    var timer = 0;

    return function(callback, timeout) {
        clearTimeout(timer);
        timer = setTimeout(callback, timeout);
    };
})(); 
```

如果您已经使用 JSF 2.2，请`delay`设置`<f:ajax>`.

```
<h:selectManyCheckbox ...>
    <f:selectItems ... />
    <f:ajax ... delay="1000" />
</h:selectManyCheckbox> 
```

# git - 无法让 github 的 webhook URL 在我的服务器上工作

> ID：12677180
> 
> 赞同：0
> 
> 时间：2012-10-01T16:21:28.300
> 
> 标签：git, github, centos

我的工作流程很简单：

1.  当地的：

`mkdir testrepo && git init && git add . && git commit -m 'commit X' && git push -u origin master`

很好，我在 github 上的 repo 得到了更新。

1.  开发服务器：

`git clone github_repo_url`

我已经设置了一个帖子接收挂钩，如此[处](https://help.github.com/articles/post-receive-hooks)所述。

当我从本地推送更改时，存储库会更新，但我在服务器端的脚本`<?php git pull`不起作用。如果我 ssh 服务器并使用 执行它`php github.php`，脚本确实会执行 a`git pull`并且服务器上的文件正在更新。

我也试过`<?php $output = shell_exec('git pull'); echo $output;`，但同样的事情。我推送，repo 得到更新，即使 post-receive 钩子设置正确，开发服务器也不会拉取（我可以通过 RequestBin 看到）。

github.php - 755 权限。所有者不是 root，但如果我这样做，`chown username:group github.php`我会收到 500 错误。

如果/当我运行脚本时，它不要求输入密码，没有可以停止脚本的对话框。我只是不明白。

在`git pull`以 root 身份手动登录，而在该目录中的 ssh 上：

```
git pull
remote: Counting objects: 5, done.
remote: Compressing objects: 100% (2/2), done.
remote: Total 3 (delta 0), reused 3 (delta 0)
Unpacking objects: 100% (3/3), done.
From github.com:test/testrepo
   0e678d9..88b3237  master     -> origin/master
Updating 0e678d9..88b3237
Fast-forward
 test.html |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)
root@echo [/home/username/public_html/dev/testrepo]# 
```

并完成了工作。我的文件已更新。

**请问有什么想法吗？**

难道是apache不能自己运行php脚本？此外，如果我 ssh 进入服务器但不是使用 root，并且我尝试运行 php 脚本，我会得到一个 Permission denied (publickey)。致命：远端意外挂断

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T21:39:49.067

您可能会尝试的另一件事是通过 https 输入您的用户名和密码，如下所示

> [https://username:password@github.com/user/reponame.git](https://username:password@github.com/user/reponame.git)

这样你就不必真正进入 SSH。这是你从远程 repo 服务器拉取的时候。添加遥控器时，请确保添加这些参数。

否则，在您的服务器上创建一个 ssh 密钥并将其与 GitHub 链接作为部署密钥。确保在创建 ssh 密钥时没有输入密码。否则，您将遇到与现在相同的问题，因为它没有通过身份验证阶段。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T20:17:08.920

这是因为当您不执行“git pull”时，必须输入密码。当您登录（ssh）时，我认为您无需密码即可访问。见这个链接：[http ://wiki.mediatemple.net/w/(gs):GitHub](http://wiki.mediatemple.net/w/(gs):GitHub)

这个链接指导：[http ://seancoates.com/blogs/deploy-on-push-from-github](http://seancoates.com/blogs/deploy-on-push-from-github)

# c# - 如何在父视图中添加或编辑子项

> ID：12677187
> 
> 赞同：1
> 
> 时间：2012-10-01T16:21:53.247
> 
> 标签：c#, html, asp.net-mvc, razor

我是 MVC 的新手。我分两部分显示父视图详细信息，详细信息和子列表。但现在我想在同一个视图中添加另一个孩子到这个父母的可能性。我使用：控制器

```
public ViewResult Details(long id)
    {
        Parent x = db.Parent.Find(id);
        return View(x);
    } 
```

看法 ：

```
@model  MyProject_v0_2.Models.Parent

<table id="details">
....
</table>

<table id="lstChild">
    @foreach (var item in Model.Child)
            {...}
</table> 
```

我想在这里添加一个按钮，让我在这个视图中添加一个孩子。我可以添加一个我显示或不显示所有子数据的表格，但我不知道我要保存它。将来我需要更改一些 Parent 属性，所以我不能更改模型类型。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:24:04.230

查看[以下文章](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)，该文章说明了如何实现此任务的好方法。它在客户端使用 javascript 添加/删除行。它还使用一个自定义`Html.BeginCollectionItem`帮助器，允许为集合输入字段名称生成非顺序索引。

# opencv - opencv中用于RGB颜色混合的3D矩阵乘法

> ID：12677188
> 
> 赞同：4
> 
> 时间：2012-10-01T16:22:00.427
> 
> 标签：opencv, matrix

我正在尝试在 opencv 中执行 RGB 颜色混合操作。我的图像包含在 MxNx3 Mat 中。我想将它与 3x3 矩阵相乘。在 Matlab 中，我执行以下操作： *将图像从 MxNx3 展平为 MNx3 *将 MNx3 矩阵乘以 3x3 颜色混合矩阵 *重塑回 MxNx3

在 Opencv 中，我想做以下事情：

```
void RGBMixing::mixColors(Mat &imData, Mat &rgbMixData)
{
   float rgbmix[] = {1.4237, -0.12364, -0.30003, -0.65221, 2.1936, -0.54141, -0.38854, -0.47458, 1.8631};
   Mat rgbMixMat(3, 3, CV_32F, rgbmix);
   // Scale the coefficents
   multiply(rgbMixMat, 1, rgbMixMat, 256);
   Mat temp = imData.reshape(0, 1);
   temp = temp.t();
   multiply(temp, rgbMixMat, rgbMixData);
} 
```

这会编译但会产生异常：

> OpenCV 错误：输入参数的大小不匹配（该操作既不是“数组运算数组”（其中数组具有相同的大小和相同的通道数），也不是“数组运算标量”，也不是“标量运算数组”）在 arithm_op 文件 C:/slave/WinI nstallerMegaPack/src/opencv/modules/core/src/arithm.cpp 中，第 1253 行终止在抛出 'cv::Exception' 实例后调用
> what(): C:/slave/ WinInstallerMegaPack/src/opencv/modules/core/src/arithm.cpp: 1253: error: (-209) 该操作既不是'array op array'（其中数组具有相同的大小和相同的通道数），也不是' array op scalar'，也不是函数 arithm_op 中的'scalar op array'
> 
> 此应用程序已请求运行时以不寻常的方式终止它。请联系应用程序的支持团队以获取更多信息。

* * *

更新1：

这是似乎有效的代码：

```
void RGBMixing::mixColors(Mat &imData, Mat&rgbMixData)
{
    Size tempSize;
    uint32_t channels;

    float rgbmix[] = {1.4237, -0.12364, -0.30003, -0.65221, 2.1936, -0.54141, -0.38854, -0.47458, 1.8631};
    Mat rgbMixMat(3, 3, CV_32F, rgbmix);
    Mat flatImage = imData.reshape(1, 3);
    tempSize = flatImage.size();
    channels = flatImage.channels();
    cout << "temp channels: " << channels << " Size: " << tempSize.width << " x " << tempSize.height << endl;
    Mat flatFloatImage;
    flatImage.convertTo(flatFloatImage, CV_32F);
    Mat mixedImage = flatFloatImage.t() * rgbMixMat;
    mixedImage = mixedImage.t();
    rgbMixData = mixedImage.reshape(3, 1944);
    channels = rgbMixData.channels();
    tempSize = rgbMixData.size();
    cout << "temp channels: " << channels << " Size: " << tempSize.width << " x " << tempSize.height << endl;
} 
```

但是生成的图像是扭曲的。如果我跳过两个矩阵的乘法并分配

```
mixedImage = flatFloatImage 
```

生成的图像看起来很好（只是没有混合颜色）。所以我一定做错了什么，但我越来越接近了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T17:58:06.270

我在这里看到了几件事：

1.  为了缩放系数，OpenCV 支持标量乘法，因此`multiply(rgbMixMat, 1, rgbMixMat, 256);`您应该直接使用`rgbMixMat = 256 * rgbMixMat;`.

2.  如果这就是您的全部代码，那么您没有正确初始化或为 赋值`imData`，因此该行`Mat temp = imData.reshape(0, 1);`可能会崩溃。

3.  假设这`imData`是一个 MxNx3（3 通道 Mat），您希望将其重塑为 MNx3（1 通道）。根据[文档](http://opencv.willowgarage.com/documentation/cpp/core_basic_structures.html?highlight=reshape#cv-reshape)，当您编写时，`Mat temp = imData.reshape(0, 1);`您是说您希望通道数保持不变，并且行应该是 1。相反，它应该是：

    `Mat myData = Mat::ones(100, 100, CV_32FC3); // 100x100x3 matrix`

    `Mat myDataReshaped = myData.reshape(1, myData.rows*myData.cols); // 10000x3 matrix`

4.  你为什么要转置`temp = temp.t();`？

5.  当您编写时`multiply(temp, rgbMixMat, mixData);`，这是[每个元素的产品](http://opencv.willowgarage.com/documentation/cpp/core_operations_on_arrays.html#cv-multiply)。你想要矩阵产品，所以你只需要这样做`mixData = myDataReshaped * rgbMixMat;`（然后重塑它）。

**编辑：**如果你不使用转置，它会崩溃，因为你这样做`imData.reshape(1, 3);`而不是`imData.reshape(1, imData.rows);`

尝试

```
void RGBMixing::mixColors(Mat &imData, Mat&rgbMixData)
{
    Size tempSize;
    uint32_t channels;

    float rgbmix[] = {1.4237, -0.12364, -0.30003, -0.65221, 2.1936, -0.54141, -0.38854, -0.47458, 1.8631};
    Mat rgbMixMat(3, 3, CV_32F, rgbmix);

    Mat flatImage = imData.reshape(1, imData.rows*imData.cols);
    Mat flatFloatImage;
    flatImage.convertTo(flatFloatImage, CV_32F);

    Mat mixedImage = flatFloatImage * rgbMixMat;

    rgbMixData = mixedImage.reshape(3, imData.rows); 
} 
```

# performance - Hector API SliceQuery 与 ColumnQuery 性能

> ID：12677191
> 
> 赞同：0
> 
> 时间：2012-10-01T16:22:22.013
> 
> 标签：performance, cassandra, hector

我正在编写一个使用 Hector 访问 Cassandra 数据库的应用程序。在某些情况下，我只需要查询一列，而在某些情况下，我需要一次查询多列。编写一个采用列名数组并使用 SliceQuery 返回列列表的方法在代码方面是最简单的，但我想知道与使用 ColumnQuery 相比，将 SliceQuery 用于一列是否存在重大缺陷。

简而言之，对于一列使用 ColumnQuery 而不是 SliceQuery 是否有足够的（或任何）性能优势，值得额外的代码单独处理一列的情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T17:58:11.130

通过查看 Hector 的代码，使用 ColumnQuery ( *ThriftColumnQuery.java* ) 和 SliceQuery ( *ThriftSliceQuery.java* ) 之间的区别在于发送不同的 thrift 命令 - “get”或“get_slice”（分别）。

我没有找到关于 Cassandra 的服务器如何实现这些操作的确切文档，但是我快速浏览了 Cassandra 的源代码，在检查了*CassandraServer.java*之后，我得到的印象是“get”操作更多地用于客户端比查询单个列时更好的性能更方便：

*   对于“get”请求，`SliceByNamesReadCommand`会创建并执行一个实例。
*   对于“get_slice”请求（假设您使用的是 Hector 的`setColumnNames`方法而不是`setRange`），`SliceByNamesReadCommand`将为每个想要的列创建一个实例，然后执行（尽管该行只读取一次）。

最重要的是，据我所知，创建一些用于处理多个列的集合的（可忽略不计的）开销并不多。但是，如果您仍然担心，我相信在您的 DAO 中使用 Hector 时，以不同方式处理这两种情况应该不会太难。

希望我能提供帮助。

# javascript - 将 AutoPostBack="true" 添加到 DropDownList 并单击项目时，它会将我发送到“找不到资源”页面

> ID：12677198
> 
> 赞同：0
> 
> 时间：2012-10-01T16:22:51.623
> 
> 标签：javascript, asp.net, postback

我无法从 DropDownList 中获取用户选择的值。我发现我需要回发才能重置我的值并能够重新分配。（我在页面控件中尝试过诸如 ClientIDMode="static" 之类的操作并执行 "var dropDownList= $(<%= ddlNewCaseFiles.ClientID %>).val() ）但是似乎没有任何效果。所以我在我的标题：

```
 <script runat="server">
    protected void ddlCaseFilesNew_SelectedIndexChanged(object sender, EventArgs e)
    {
        hidNewCaseFile.Value = ddlCaseFilesNew.SelectedItem.Value;
    }
</script> 
```

它似乎正在选择更新的值。但是由于某种原因，当我单击某个项目时，它会将我发送到“找不到资源”页面。我猜如果我在我的 DropDownList 中添加一个 Updatepanel 它可能会修复它？（因为它只是回发我的 dropDownList）。但我遇到了麻烦。

这是我的下拉列表：

```
<div id="ddlFiles">
        <label>
            Select new CaseFile:</label>
        <asp:DropDownList runat="server" ID="ddlCaseFilesNew" DataSourceID="dsCaseFiles"
            DataTextField="Display" DataValueField="FileID" 
            OnPreRender="ddl_PreRender" Width="300px" AutoPostBack="true" 
            onselectedindexchanged="ddlCaseFilesNew_SelectedIndexChanged"/>
    </div> 
```

我试图在这里实现它，但我得到一个“UpdatePanel 没有名为“dropDownList”的属性名称”。任何帮助都会非常感激。：

```
<asp:UpdatePanel runat="server" ID="UpdatePanel1">
        <asp:DropDownList runat="server" ID="ddlCaseFilesNew" DataSourceID="dsCaseFiles"
            DataTextField="Display" DataValueField="FileID" OnPreRender="ddl_PreRender" Width="300px"
            AutoPostBack="true" onselectedindexchanged="ddlCaseFilesNew_SelectedIndexChanged" />
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="ddlCaseFilesNew" EventName="SelectedIndexChanged" />
        </Triggers>
    </asp:UpdatePanel> 
```

按要求预渲染：

```
 protected void ddl_PreRender(object sender, EventArgs e)
{
    DropDownList ddl = (DropDownList)sender;
    try
    {
        if (ddl.Items[0].Value != "-1")
            ddl.Items.Insert(0, new ListItem("--Select--", "-1"));
    }
    catch
    {
        ddl.Items.Insert(0, new ListItem("--Select--", "-1"));
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T16:45:41.767

```
if you wanna have it in the update panel 

you should add the  the hidNewCaseFile control inside ContentTemplate  tags

Example : 

 in the header 

  <script runat="server">
        protected void   DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
        {
            hidNewCaseFile.Text = ddlCaseFilesNew.SelectedItem.Value;
        }

    </script>

in the body 

    <asp:UpdatePanel ID="UpdatePanel1" runat="server">

        <ContentTemplate>

            <asp:Label runat="server" ID="hidNewCaseFile" Text="Label"></asp:Label>
            <asp:DropDownList ID="ddlCaseFilesNew" AutoPostBack="true" runat="server" OnSelectedIndexChanged="DropDownList1_SelectedIndexChanged">
        <asp:ListItem>Uae</asp:ListItem>
        <asp:ListItem>KSA</asp:ListItem>
        <asp:ListItem>Lebanon </asp:ListItem>

    </asp:DropDownList>

        </ContentTemplate>

    </asp:UpdatePanel> 
```

还要确保你有 `<asp:ScriptManager runat="server"> </asp:ScriptManager >`

在使用更新面板之前

# c - C 中的 intmax_t 数据类型

> ID：12677199
> 
> 赞同：-1
> 
> 时间：2012-10-01T16:22:53.767
> 
> 标签：c, visual-studio, types

> **可能重复：**
> [C++11：intptr_t/int_ptr_t、intmax_t/int_max_t？](https://stackoverflow.com/questions/7895420/c11-intptr-t-int-ptr-t-intmax-t-int-max-t)

我在 Visual Studio 上使用 C 平台。我想知道 intmax_t 数据类型仅用于基于 Linux 的编程，或者它也受 C 语言（ANSI 语言）支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:28:33.133

好吧，两者`intmax_t`和`uintmax_t`都是 C99 的一部分，但*有些*编译器实际上需要填充类似[this](http://msinttypes.googlecode.com/svn/trunk/stdint.h)（或[this](http://www.azillionmonkeys.com/qed/pstdint.h)）的东西才能使用它们。引用[主页](https://code.google.com/p/msinttypes/)：

> 这个项目填补了Microsoft Visual Studio`stdint.h`的缺席。`inttypes.h`这些文件被 ISO/IEC 标准化为 C99 标准库的一部分。如果您想通过 Microsoft Visual Studio 编译或使用符合 C99 的项目，您可能会发现缺少这些标头。

# cruisecontrol.net - Cruise Control.NET 禁用构建异常电子邮件

> ID：12677203
> 
> 赞同：0
> 
> 时间：2012-10-01T16:23:20.873
> 
> 标签：cruisecontrol.net

如果出现编译错误并且错误已得到修复，我有 CruiseControl.NET 设置发送电子邮件：

```
<notifications>
  <notificationType>Change</notificationType>
</notifications> 
```

但是，如果无法访问源代码存储库，这也会发送一封电子邮件。这是意料之中的，因为服务器每晚都会重新启动。

如何将警报电子邮件限制为仅编译错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T07:07:11.230

> 如果无法访问源代码存储库，这也会发送一封电子邮件

您可以使用**sourceControlErrorHandling**标签（发生源代码管理错误时采取的措施）

```
 <maxSourceControlRetries>3</maxSourceControlRetries>
  <sourceControlErrorHandling>ReportOnRetryAmount</sourceControlErrorHandling> 
```

将**ReportOnRetryAmount**设置为较高的值会降低您的异常构建电子邮件。

*参考：“项目配置块”文档。* [http://www.cruisecontrolnet.org/projects/ccnet/wiki/Project_Configuration_Block](http://www.cruisecontrolnet.org/projects/ccnet/wiki/Project_Configuration_Block)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T05:59:34.737

我不认为 CC.NET 能够将“通常”的构建失败与源代码不可用区分开来。通知类型可以是以下之一：`{'Always', 'Change', 'Failed', 'Success', 'Fixed', 'Exception'}`。我不确定我能区分`Failed`和`Exception`- 可能，第一个是构建失败，包括单元测试失败等，而另一个是指 CC.NET 自己的代码失败。

无论如何，如果我是你，我会做以下事情之一：

*   尝试通知类型（以防万一）
*   确保在服务器重新启动时不会触发构建过程，例如，如果您配置了夜间构建，您可以安排它们在服务器重新启动后运行

# java - iText：如何在同一文档中插入背景图像以刷新响应

> ID：12677207
> 
> 赞同：8
> 
> 时间：2012-10-01T16:23:53.170
> 
> 标签：java, itext

我正在创建 PDF 并写入流作为响应。在写入流之前，我想在所有页面中添加背景图像作为水印，以便通过响应刷新的 PDF 文档是最后一个带有水印的文档。

嗨，这是我的代码示例。任何帮助将不胜感激

```
private static String generatePDF(HttpServletRequest request, HttpServletResponse   response, String fileName) throws Exception
{
    Document document = null;
    PdfWriter writer = null;
    FileOutputStream fos = null;
    try
    {
       fos = new FileOutputStream(fileName);
       Document document = new Document(PageSize.A4);
       writer = PdfWriter.getInstance(document, fos);
       document.open();

       /**
        * Adding tables and cells and other stuff required
        **/

       return pdfFileName;
  } catch (Exception e) {
       FileUtil.deleteFile(fileName);
       throw e
  } finally {
    if (document != null) {
        document.close();
    }
    fos.flush();
  }
} 
```

我现在想使用以下代码添加背景图像并将输出 PDF 写入同一流

```
PdfReader sourcePDFReader = null;
try
{
   sourcePDFReader = new PdfReader(sourcePdfFileName);
   int noOfPages = sourcePDFReader.getNumberOfPages();
   PdfStamper stamp = new PdfStamper(sourcePDFReader, new FileOutputStream(destPdfFileName));
   int i = 0;
   Image templateImage = Image.getInstance(templateImageFile);
   templateImage.setAbsolutePosition(0, 0);
   PdfContentByte tempalteBytes;
   while (i < noOfPages) {
       i++;
       tempalteBytes = stamp.getUnderContent(i);
       tempalteBytes.addImage(templateImage);
   }
   stamp.close();
   return destPdfFileName;
} catch (Exception ex) {
   LOGGER.log(Level.INFO, "Error when applying tempalte image as watermark");
} finally {
     if (sourcePDFReader != null) {
         sourcePDFReader.close();
     }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-10-12T15:49:44.000

我使用布鲁诺的第一种（推荐）方法解决了这个问题。

1）使用事件创建页面事件助手`onEndPage`：

```
class PDFBackground extends PdfPageEventHelper {

    @Override
    void onEndPage(PdfWriter writer, Document document) {
        Image background = Image.getInstance("myimage.png");
        // This scales the image to the page,
        // use the image's width & height if you don't want to scale.
        float width = document.getPageSize().getWidth();
        float height = document.getPageSize().getHeight();
        writer.getDirectContentUnder()
                .addImage(background, width, 0, 0, height, 0, 0);
    }

} 
```

2）在创建你的作家时，注册你的页面事件助手：

```
PdfWriter writer = PdfWriter.getInstance(document, new FileOutputStream(file));
writer.setPageEvent(new PDFBackground()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-18T14:54:57.193

我已经用布鲁诺的第二个选项解决了这个问题。这是代码。

```
public static String addBackgroundImageToPDF(ByteArrayOutputStream bos, String destPdfFileName, String templateImageFile)
{
  PdfReader sourcePDFReader = null;
  try
  {
        sourcePDFReader = new PdfReader(bos.toByteArray());
        int noOfPages = sourcePDFReader.getNumberOfPages();
        PdfStamper stamp = new PdfStamper(sourcePDFReader, new FileOutputStream(destPdfFileName));
        int i = 0;
        Image templateImage = Image.getInstance(templateImageFile);
        templateImage.setAbsolutePosition(0, 0);
        PdfContentByte tempalteBytes;
        while (i < noOfPages)
        {
              i++;
              tempalteBytes = stamp.getUnderContent(i);    
              tempalteBytes.addImage(templateImage);  
        }
         stamp.close();
        return destPdfFileName;
  }
  catch (Exception ex)
  {
        LOGGER.log(Level.INFO, "Error when applying template image as watermark");
  }
  finally
  {
        if (sourcePDFReader != null)
        {
              sourcePDFReader.close();
        }
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T06:26:18.360

您可以在两个选项之间进行选择：

1.  在页面事件中使用背景图片（到 'under'`onEndPage(`方法中的内容）/
2.  在内存中创建第一个 PDF，然后使用您发布的代码在第二遍中添加背景图像。

我更喜欢选项1。

# html - HTML对象库/拉

> ID：12677214
> 
> 赞同：0
> 
> 时间：2012-10-01T16:24:09.973
> 
> 标签：html, vba, web-scraping

我在 HTML 网页中有以下代码，我正在尝试通过 vba 引擎使用 html 对象库从该标记中提取值：

```
<input name="txtAdd_Line1" disabled="disabled" size="30" maxLength="50" value="123 N 1ST ST"/> 
```

我想我必须使用`.getelementsbytagname`or `.getelementsbyname`，但我不确定如何获取价值。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:43:18.777

这是一个带有注释的示例，替换为您的实际地址：

```
Sub Example()
    'Declare needed variables
    Dim ie, elements
    Dim x As Long
    'Create IE Applction
    Set ie = CreateObject("InternetExplorer.Application")
    'Navigate to the website
    ie.navigate "C:\test.html" 'Substitute your actual address
    'Wait for website to finish loading
    Do While ie.ReadyState <> 4
    Loop

    'Find the elements
    Set elements = ie.document.getelementsbyName("txtAdd_Line1")
    'Display the value of each returned element
    For x = 0 To elements.Length - 1
        MsgBox elements(x).Value
    Next
    'Quit IE
    ie.Quit
End Sub 
```

根据您的评论，很可能只是查看文档并没有检索到您想要的树的实际层，试试这个：

```
Set HTMLDoc = ie.document.frames("MainFrame").document 
With HTMLDoc 
    'This returns an (object) which contains an array of all matching elements
    a = .getElementsByName("txtAdd_Line1")
end with
For x = 0 to a.length
    msgbox a(x).value
next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-25T19:00:47.643

您可以使用 CSS 选择器`input[name='txtAdd_Line1']`。这表示带有带有 value`input`属性的标签的元素。`name``'txtAdd_Line1'`

CSS 选择器：

[![CSS 选择器](../Images/36046a15ee8af135b34bbb71e74d62e6.png)](https://i.stack.imgur.com/Squu7.png)

您使用例如的[`.querySelector`](https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector)方法应用 CSS 选择器`document`

```
Msgbox ie.document.querySelector("input[name='txtAdd_Line1']").innerText 
```

# javascript - this.value 只返回前两个字符

> ID：12677215
> 
> 赞同：1
> 
> 时间：2012-10-01T16:24:10.217
> 
> 标签：javascript, jquery

我正在尝试使用 bm-user-label 类查找所有元素的值，并将其放入 javascript 数组中。但是，当我这样做时，我只会得到值字段的前两个字符。例如：

```
value="30bb3825e8f631cc6075c0f87bb4978c" 
```

我被退回

```
30 
```

DOM 看起来像

```
<li value="30bb3825e8f631cc6075c0f87bb4978c" class="cboxElement bm-user-label">first</li> 
```

我的javascript是：

```
var com_labels = $('.bm-user-label').map(function() {
     return(this.value);
}).get(); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T16:28:36.907

为了遵循 doctype 标准，您应该将数据属性用于非本地属性：

```
<li data-value="30bb3825e8f631cc6075c0f87bb4978c" class="cboxElement bm-user-label">first</li> 
```

并像这样查询它：

```
var com_labels = $('.bm-user-label').map(function() {
     return($(this).data('value'));
}).get(); 
```

[http://jsfiddle.net/sTdWY/](http://jsfiddle.net/sTdWY/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T16:26:15.370

`<li>`元素未定义为具有值。您应该`this.getAttribute("value")`改为使用此属性。

# javascript - 为软件渲染器实现 z 缓冲的最快方法？

> ID：12677218
> 
> 赞同：0
> 
> 时间：2012-10-01T16:24:33.933
> 
> 标签：javascript, html5-canvas, zbuffer, scanline

我正在实现一个 javascript 软件渲染器（用于学术目的）。它处理将 3d 对象表示为三角形，并处理从 3d 空间到 2d 空间的透视投影。

到目前为止，我使用 `lineTo`and`fillRect`来表示屏幕上的顶点和线条。我什`lineTo`至曾经做过扫描线三角形填充。（你可以在[这里](http://www.itu.dk/people/tdbe/webStorm/sandbox_2/index.html)查看项目）

到目前为止，FPS已经相当不错了。但任务的最后一部分是实现 z-Buffering :P。据我所知，这样做的唯一方法是停止使用填充我的三角形`lineTo`，并用 1px 线条数组或 1px 正方形数组填充它们。（因为在我绘制每个“像素”之前，我必须检查深度缓冲区，看看我是否应该实际绘制它。）

问题是，用小矩形或线条填充三角形很慢。将所有内容降至 2FPS。所以我的问题是，有什么方法可以绘制一个像素而不是一条细线（可能更快）？

或者，我还能做些什么来加快速度？我的目标是让它旋转得足够快以演示原理。（6-10fps就足够了）

干杯。

[编辑] 在等待答案的同时，我将继续修改我的三角形填充函数以绘制 4px 大小的“像素”而不是 1px。但这会看起来参差不齐...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:00:17.810

看看这个：http: [//jsfiddle.net/ZXjAM/2/](http://jsfiddle.net/ZXjAM/2/)

```
// points 0,1,2,3 front face
var fAvgZ = (cube.processPoints[0].colorZ + 
    cube.processPoints[1].colorZ + 
    cube.processPoints[2].colorZ + 
    cube.processPoints[3].colorZ) / 4 / 20;

// points 0,2,4,6 top
var tAvgZ = (cube.processPoints[0].colorZ + 
    cube.processPoints[2].colorZ + 
    cube.processPoints[4].colorZ + 
    cube.processPoints[6].colorZ) / 4 / 20;

// points 4,5,6,7 rear
var reAvgZ = (cube.processPoints[4].colorZ + 
    cube.processPoints[5].colorZ + 
    cube.processPoints[6].colorZ + 
    cube.processPoints[7].colorZ) / 4 / 20;

// points 1,3,5,7 bottom
var bAvgZ = (cube.processPoints[1].colorZ + 
    cube.processPoints[3].colorZ + 
    cube.processPoints[5].colorZ + 
    cube.processPoints[7].colorZ) / 4 / 20;

// points 2,3,6,7 right side
var rAvgZ = (cube.processPoints[2].colorZ + 
    cube.processPoints[3].colorZ + 
    cube.processPoints[6].colorZ + 
    cube.processPoints[7].colorZ) / 4 / 20;

// points 0,1,4,5 left side
var lAvgZ = (cube.processPoints[0].colorZ + 
    cube.processPoints[1].colorZ + 
    cube.processPoints[4].colorZ + 
    cube.processPoints[5].colorZ) / 4 / 20;

var layers = [{key:0, val:fAvgZ},
          {key:1, val:fAvgZ},
          {key:2, val:tAvgZ},
          {key:3, val:tAvgZ},
          {key:4, val:reAvgZ},
          {key:5, val:reAvgZ},
          {key:6, val:bAvgZ},
          {key:7, val:bAvgZ},
          {key:8, val:rAvgZ},
          {key:9, val:rAvgZ},
          {key:10, val:lAvgZ},
          {key:11, val:lAvgZ}];

var outLay = layers.sort(function(a,b){
    return (a.val - b.val);
});

for(var i = 0; i < outLay.length; i++)
{
    var k = outLay[i].key;
    ...
} 
```

这绝不是对点值进行平均/排序的最有效方法，并且可以使用立方体的预先存在的属性用更少的代码行来完成，但基本概念保持不变。

我正在找到平均 z-index 并使用它来假设分层顺序。显然，这并不适用于所有情况，但对于简单的多面体，它应该就足够了。

这可以简化为：

```
var layers = [];
for (var i = 0; i < cube.sides.length; i++){
    var side = cube.sides[i];
    var avg = (cube.processPoints[side.a].colorZ + 
               cube.processPoints[side.b].colorZ + 
               cube.processPoints[side.c].colorZ) / 3 / 20;                   
    layers.push({key:i, val:avg});
}

var outLay = layers.sort(function(a,b){
    return (a.val - b.val);
}); 
```

似乎确实有一些边缘案例存在快速订购问题。

这似乎更准确：http: [//jsfiddle.net/ZXjAM/4/](http://jsfiddle.net/ZXjAM/4/)

```
var layers = [];
for (var i = 0; i < 12; ++i){
    var side1 = cube.sides[i];
    var side2 = cube.sides[++i];
    var avg = (cube.processPoints[side1.a].colorZ + 
               cube.processPoints[side1.b].colorZ + 
               cube.processPoints[side1.c].colorZ + 
               cube.processPoints[side2.a].colorZ + 
               cube.processPoints[side2.b].colorZ + 
               cube.processPoints[side2.c].colorZ) / 6;                   
    layers.push({key:i-1, val:avg});
    layers.push({key:i, val:avg});
}

var outLay = layers.sort(function(a,b){
    return (a.val - b.val);
}); 
```

# jquery - 同位素图像堆叠在 ie9 NOT Safari/Chrome/Firefox

> ID：12677219
> 
> 赞同：1
> 
> 时间：2012-10-01T16:24:35.247
> 
> 标签：jquery, jquery-isotope

我希望这是一个简单的解决方法。我的网站[http://www.solcroft.co.uk/portfolio/](http://www.solcroft.co.uk/portfolio/)在 Safari/Firefox/Chrome 中使用 jquery 同位素过滤完美呈现，但在 IE9 中没有。所有的图像似乎相互叠加。有任何想法吗？非常感谢任何帮助。

# matlab - MatLab：Fisher 线性判别式 K > 2

> ID：12677222
> 
> 赞同：2
> 
> 时间：2012-10-01T16:24:42.407
> 
> 标签：matlab, machine-learning

我正在尝试在 matlab 中为 K(Class) > 2 实现 Fisher 的线性判别函数，我不太确定 K > 2 场景的算法。我知道 Matlab 有内置函数，但我想在不使用它们的情况下实现它。

如果有人可以清除算法，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T12:38:21.520

这是一些示例伪代码：

*N = 案例数量 c = 类别数量 Priors = 每个类别每个案例的先验概率向量 Target = 每个案例每个类别维度的目标标签 Data = Features x Cases。*

获取每个数据点的目标标签：

```
T = Targets(:,Cases);      % Target labels for each case 
```

计算每个类的平均向量和公共协方差矩阵：

```
classifier.u = [mean(Data(:,(T(1,:)==1)),2),mean_nan(Data(:,(T(2,:)==1)),2),....,mean_nan(Data(:,(T(2,:)==c)),2];   % Matrix of data means
classifier.invCV = cov(Data'); 
```

使用类均值向量和公共协方差矩阵获取判别值：

```
A1=classifier.u;
B1=classifier.invCV;
D = A1'*B1*Data-0.5*(A1'*B1.*A1')*ones(d,N)+log(Priors(:,Cases)); 
```

函数将产生 c 判别值。然后将案例分配给具有最大判别值的类。

# python - Python - 循环遍历一个字符串，一次拉出 1 个字符，然后再拉出 2 个字符

> ID：12677227
> 
> 赞同：1
> 
> 时间：2012-10-01T16:25:10.607
> 
> 标签：python

问题：

我有一串数字，我们称之为strNumbers。我需要遍历这个字符串，一个字符一个字符地对每个数字进行计算，直到某个点。那时，我需要开始一次提取两个数字并对这两个数字进行计算。到目前为止，这是我想出的，正如您所看到的，我已经弄清楚如何遍历循环拉单个字符没有问题。我也知道我需要一个计数器来确定我何时需要开始一次拉两个字符，但是现在怎么办？任何帮助表示赞赏，谢谢。

```
for i in strNumbers:    
    intNumber = int (i)
    **do math on intNumber*
    **print result**
    count = count +1
    if count == 5:
        ?? 
```

编辑：我决定使用两个单独的循环来完成这项任务，但是我遇到了另一个问题。下面的代码抛出一个 TypeError: Can't convert 'int' object to str 隐式地在 line, number = int(strTail[i:i+2])

```
for i in strTail:
    number = int(strTail[i:i+2])
    intRooted = int( math.sqrt(number))
    strDecoded += str(intRooted) 
```

从逻辑上讲，这似乎正是我想要做的，我把数字拉到位置'i'和i前面的第一位置。我在这里想念什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T16:30:04.290

您可以将字符串视为单独访问每个字符（或一次访问两个）的数组。因此，一旦达到指定的数量，您就可以设置一个标志，告诉您的循环开始一次接收两个字符。

```
i=0
offset = 1
while i <len(str_numbers):
    if offset>1:
        int_number = int(str_numbers[i:i+offset])
    else:
        int_number = int(str_numbers[i])
    if i==5:
        offset=2
    i+=offset 
```

编辑：我只是想到了一种不那么令人困惑的方法：

```
offset=1
i=0
while i<len(str_numbers):
    if i==5:
        offset=2
    int_number = int(str_numbers[i:i+offset])
    i+=offset 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T16:29:23.427

```
>>> my_nums = [1,2,3,4,5,6,7,8,9]
>>> dbl_nums = [[my_nums[i],my_nums[i+1]] for i in range(5,len(my_nums),2)] #double up numbers with index >= 5
>>> sngl_nums = map(lambda x:x*2,my_nums[:5]) #perform some math on single numbers for index < 5
>>> dbl_nums = map(lambda x:x[0]+x[1],dbl_nums) # do some math on 2 nums
>>> print dbl_nums # (6+7 , 8+9 )
[13, 17]
>>> print sngl_nums #(2*1,2*2,2*3,2*4,2*5)
[2, 4, 6, 8, 10]
>>> print sngl_nums+dbl_nums  #combined back into one list
[2, 4, 6, 8, 10, 13, 17] 
```

将一串数字转换为列表

```
my_nums = map(int,num_str)
>>> map(int,"123")
[1, 2, 3] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T16:34:55.563

如果你已经知道你想要的单个字符的数量，那么你可以做两个循环：

```
for s in strNumbers[:count]:
    do_something

indices = range(len(strNumbers))
for i in indices[count::2]:
    s = strNumbers[i:i+2]
    do_something_else 
```

或者

```
for (s1, s2) in zip(strNumbers[count::2], srtNumbers[count+1::2]):
    s = s1+s2
    do_something_else 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T16:53:27.800

我们可以在相关问题中使用一些代码，“[如何在 Python 中将列表拆分为大小均匀的块？](https://stackoverflow.com/a/1751478/953482) ”。首先将您的字符串分成一位数部分和两位数部分，并根据需要进行分块。

```
def chunks(l, n):
    return [l[i:i+n] for i in range(0, len(l), n)]

strNumbers = "123456789012345"
single_part = chunks(strNumbers[:5], 1)
double_part = chunks(strNumbers[5:], 2)
string_numbers = single_part + double_part
numbers = [int(x) for x in string_numbers]
print numbers
#result: [1, 2, 3, 4, 5, 67, 89, 1, 23, 45] 
```

# c# - 检查方法是否使用 PInvoke

> ID：12677230
> 
> 赞同：4
> 
> 时间：2012-10-01T16:25:29.763
> 
> 标签：c#, pinvoke, system.reflection, methodbase

无论如何要检查方法是否使用 PInvoke ？我正在使用 MethodBase 遍历程序集中的所有方法，但我想检查该方法是否使用 PInvoke。这是我正在使用的代码：

```
 foreach (MethodBase bases in mtd.GetType().GetMethods())
 {
      //check if the method is using pinvoke
 } 
```

另外，如果可能的话，有什么方法可以检查正在使用的 DLL 和正在调用的函数/入口点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T16:27:48.687

您可以检查方法是否用[DllImportAttribute](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.dllimportattribute%28v=vs.100%29.aspx#Y1600)修饰。如果是这样，它正在使用 PInvoke。

```
foreach (MethodBase methodBase in mtd.GetType().GetMethods())
{
    if (methodBase.CustomAttributes.Any(cad => cad.AttributeType == typeof(DllImportAttribute))
    {
         // Method is using PInvoke
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T15:20:12.773

您可以使用此扩展方法：

```
 public static bool IsPinvoke(this MethodBase method)
    {
        return method.Attributes.HasFlag(MethodAttributes.PinvokeImpl);
    } 
```

# c# - 如果 (textBox1.Text == ("admin")) + (textBox2.Text == ("admin)) 在 C#

> ID：12677232
> 
> 赞同：0
> 
> 时间：2012-10-01T16:25:41.840
> 
> 标签：c#

我想使用一个命令，该命令将在一个“If”中包含两个“textboxes.Text”。我的意思是当我执行此命令时：

`If (textBox1.Text == ("admin")) + (textBox2.Text == ("admin))`或者这 `If (textBox1.Text == ("admin) , textBox2.Text == admin))` 是不对的。

主要代码是：

```
 private void Label_Click(object sender, EventArgs e)
     {
         if (textBox2.Text == ("admin")) + (textBox1.Text == ("admin"))
         {
             Label.Text = "right";
         }
         else
         {
             Label.Text = "wrong";
             errorProvider1.SetError(errorprovider, "Wrong Username or Password");
         } 
```

即我想做的事情是，如果两个文本框之一是错误的，标签将显示密码或用户名错误......有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T16:30:04.103

语句的语法`if`是：

```
if (condition) body 
```

您当前的代码是：

```
if (textBox2.Text == ("admin")) + (textBox1.Text == ("admin")) 
```

……这是`textBox2.Text == ("admin")`当作条件，然后试图`+ (textBox1.Text == ("admin"))`用作身体，这是无效的。问题是：

*   你过早关闭条件
*   您对“和”使用了错误的运算符

此外，您无缘无故地在字符串文字周围加上括号，从而降低了可读性。所以你真正想要的是：

```
if (textBox2.Text == "admin" && textBox1.Text == "admin") 
```

请注意，其他答案建议使用`||`而不是`&&`- 这将是一个 OR 条件，如果*任何*一个文本框的值为`admin`. 我怀疑这不是你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T16:28:29.380

检查[C# Operators](http://msdn.microsoft.com/en-us/library/6a71f45d%28v=vs.110%29.aspx)上的 MSDN 页面。

您正在寻找`||`（条件或）或`&&`（条件与）。

条件运算符的另一个名称是“短路”，因为它们只在需要时评估第二个条件。换句话说，`a && b`当 , when`a`为假时，整个表达式必须为假，因此不计算表达式 b。当`b`有副作用或`a`暗示评估是否安全时，这一点很重要`b`。例子：

```
if (MethodA() && MethodB()) //... 
```

此处，仅当 MethodA 返回 true 时才调用 MethodB。

```
if (o != null && o.Equals(p)) //... 
```

这是安全的（也很常见），因为它使我们免于`NullReferenceException`o 为 null 的情况。

`|`您还可以将这些运算符 (和)的非短路版本`&`与布尔表达式一起使用，但这种情况非常罕见，以至于大多数程序员乍一看会误认为它；如果您希望代码始终评估两个表达式，最好更明确。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T16:27:42.167

```
if (textBox1.Text == "admin" && textBox2.Text == "admin")
    Label.Text = "right";
else
    Label.Text = "wrong"; 
```

`&&`是布尔 AND 运算符。 `||`是布尔 OR 运算符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T16:28:12.377

```
if(textBox2.Text == "admin" && textBox1.Text == "admin")
{
    //both admin
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T16:28:36.290

好像你需要一个简单的或？使用双竖管 ||

```
private void Label_Click(object sender, EventArgs e)
{
        if (textBox2.Text == ("admin") || textBox1.Text == ("admin"))
        {
            Label.Text = "right";
        }
        else
        {
            Label.Text = "wrong";
            errorProvider1.SetError(errorprovider, "Wrong Username or Password");
        }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-01T16:28:39.683

```
 private void Label_Click(object sender, EventArgs e)
    {
        if ((textBox2.Text == "admin") || (textBox1.Text == "admin"))
        {
            Label.Text = "right";
        }
        else
        {
            Label.Text = "wrong";
            errorProvider1.SetError(errorprovider, "Wrong Username or Password");
        }
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-01T16:28:56.053

您需要使用“and”运算符，即 C# 中的“&&”。

```
if (textBox1.Text == ("admin")) && (textBox2.Text == ("admin)) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-01T16:29:19.343

你的表达不正确。正确的语法是

```
if (A && B) { ... } 
```

所以在你的情况下应该是

```
if(textBox1.Text.Equals("admin") && textBox2.Text.Equals("admin")) { ... } 
```

如果这个逻辑让您感到困惑，您可能需要阅读一些有关布尔代数的内容。

请注意我们都建议的其他更改 - 您有额外的括号，也应该`Equals()`用于字符串比较。

# mysql - 删除 MySQL 存档数据库

> ID：12677233
> 
> 赞同：1
> 
> 时间：2012-10-01T16:25:42.243
> 
> 标签：mysql, database, windows, archive

我在 Windows 2003 服务器上运行 MySQL 5.0。当我收到此错误时，我正试图删除存档数据库：

删除数据库时出错（不能 rmdir './database_name/', errno: 17）

服务器上每个存档数据库的每个目录中都有 ARM 和 ARN 文件。据我所知，这些是在优化期间生成的。

手动删除这些文件是否安全，以便 mysql 中的 drop 命令正常执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:32:29.797

这可能意味着例如 - 数据库目录包含一些不属于 mysql 数据库的文件。例如 .empty 文件。

# android - FragmentManager.findFragmentByTag 返回 null

> ID：12677244
> 
> 赞同：1
> 
> 时间：2012-10-01T16:26:13.667
> 
> 标签：android, android-fragments, actionbarsherlock, progressdialog, android-support-library

我正在使用 Android 支持库 (v4) 和 ActionBarSherlock。我正在尝试以编程方式关闭进度对话框。我编写了一个小型实用程序类来帮助进行对话管理。

该对话框从`AsyncTask.onPreExecute`. 它会正确显示。然后我通过旋转设备来触发配置更改，这会破坏活动（onDestroy 调用`AsyncTask.cancel(true)`）。`AsyncTask.onCancelled`被调用，并且在我试图关闭对话框的这个方法中。但什么也没有发生。以下是显示和关闭对话框的辅助函数：

```
 public abstract class DialogHelperActivity extends SherlockFragmentActivity {

        protected void showProgressDialog(final String msg, final String tag){      
            FragmentTransaction ft = this.getSupportFragmentManager().beginTransaction();
            DialogFragment dialogFragment = ProgressDialogFragment.newInstance(msg);

            ft.add(dialogFragment, tag);
            ft.disallowAddToBackStack();
            ft.commitAllowingStateLoss(); //If I try with regular commit(), exceptions are thrown.
        }

        protected void closeDialog(final String tag){
            FragmentManager fm = this.getSupportFragmentManager();
            Fragment dialogFragment = fm.findFragmentByTag(tag);        

            if(dialogFragment != null){
                FragmentTransaction ft = fm.beginTransaction();
                ft.remove(dialogFragment);
                ft.commitAllowingStateLoss();
            } else {
                System.err.println("dialog not found!"); //This line is hit always
            }               
        }

        public static class ProgressDialogFragment extends SherlockDialogFragment {     

            static ProgressDialogFragment newInstance(final String msg) {
                ProgressDialogFragment adf = new ProgressDialogFragment();
                Bundle bundle = new Bundle();

                bundle.putString("alert-message", msg);

                adf.setArguments(bundle);
                return adf;
            }

            @Override
            public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                this.setCancelable(false);
                int style = DialogFragment.STYLE_NORMAL, theme = 0;
                setStyle(style,theme);
            }

            @Override
            public Dialog onCreateDialog(Bundle savedInstanceState) {
                Bundle bundle = this.getArguments();

                String message = bundle.getString("alert-message");

                ProgressDialog dialog = new ProgressDialog(getActivity());
                if(message != null){
                    dialog.setMessage(message);
                }

                dialog.setCancelable(false);
                dialog.setIndeterminate(true);

                return dialog;
            }       
        }

    } 
```

旋转设备后，AsyncTask 被取消。我`closeDielog`从`onPostExecute`也从打来电话`onCancelled`。对话框永远不会关闭，因为找不到标签 ID（`findFragmentByTag`返回 null）。我对此感到困惑。`showProgressDialog`该标签是我的实现活动中的静态字符串，因此在调用和之间不会丢失或更改它`closeDialog`。

任何想法/提示/建议将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T10:09:54.710

问题是我正在取消`AsyncTask`活动中的`onDestroy`. 这可以摆脱 bg 线程，但`AsyncTask.onCancelled`没有地方关闭片段，因为它在活动被破坏后运行。在此之前，会创建一个新活动，并且片段管理器会恢复一个新对话框（即使它是使用 创建的`setRetainInstance(false)`，我猜这是默认设置）。

通话时间线是这样的：

1.  屏幕旋转触发配置更改
2.  旧活动进入`onDestroy`，取消异步任务。
3.  旧对话框进入`onDetach`。
4.  新活动被创建。
5.  创建新对话框，附加到新活动并显示。
6.  旧任务`onCancel`执行，调用`closeDialog`，但未找到标记。

我的错误是假设字符串标签在应用程序上下文中全局识别了一个片段，但事实证明，片段管理器分配的实际片段 ID 是片段标签/ID 及其活动 ID 的组合。当 Activity 被销毁时，它们的 Fragment 被分离，并且在此之后，即使具有相同标签/ID 的新 Fragment 在前台，因为它附加到不同的 Activity，当旧的 Activity 时，Fragment Manager 会返回 null调用 findFragmentByTag。

然而，这个标签/id 足以让新片段传递旧片段的参数包。这种二元性令人困惑，但它也启用了一个 hack：我们可以在其回调中使用“已取消”标志填充片段的参数包，在`onStop`回调中查询它，`onResume`如果找到标志，它会调用解除自身。这样我就可以有一个概念上属于 AsyncTask 的进度对话框，并随之消亡。

# python - 扭曲的 adbapi cp_reconnect 不起作用

> ID：12677246
> 
> 赞同：4
> 
> 时间：2012-10-01T16:26:15.333
> 
> 标签：python, mysql, twisted

我有一个与 MySQL 数据库对话的旋风网络服务。当一段时间没有活动时（我猜超过 8 小时），我收到以下错误，直到我重新启动 Web 服务：

> _mysql_exceptions.OperationalError: (2006, 'MySQL server has gone away')

我看过[这篇关于 cp_reconnect 的帖子](https://stackoverflow.com/questions/7656499/twisted-mysqldb-and-2006-mysql-server-has-gone-away-using-twisted-adbapi)，我在创建连接池时已经实现了这个：

```
pool = adbapi.ConnectionPool("MySQLdb", host=self.host, user=self.user,
    passwd=self.password, db=self.database, cursorclass=MySQLdb.cursors.DictCursor,
    cp_reconnect=True) 
```

我原以为这会修复它，而且似乎有一段时间了，但现在我在服务器上没有活动一段时间后再次看到“MySQL 服务器已消失”错误。

我已经阅读[了有关 wait_timeout 的 MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_wait_timeout)，我可以按照我想的方式修复它，但是为什么 cp_reconnect 功能对我不起作用？我将 adbapi 文档解释为如果您指定 cp_reconnect 参数，adbadpi 将处理 MySQL 发送的错误并为您重新尝试查询。所以基本上你不必直接在你的代码中处理错误。我误解了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T08:00:55.343

几年前我一直在寻找解决方案。我在网上某处找到并解决的解决方案是 subclassing`ConnectionPool`和 overriding `_runInteraction`，您可以在其中强制重新连接特定的错误代码。一个快速的谷歌搜索将我带到这个网站：[http](http://www.gelens.org/2009/09/13/twisted-connectionpool-revisited/) ://www.gelens.org/2009/09/13/twisted-connectionpool-revisited/包含代码。我再也不用考虑死掉 MySQL 连接了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T16:54:47.840

在对扭曲的邮件列表进行了一些讨论并查看了扭曲的错误跟踪器之后，事实证明这是一个尚未修复的已知错误。

这是[邮件列表讨论](http://twistedmatrix.com/pipermail/twisted-python/2012-October/026104.html)的链接。

这是[扭曲的错误跟踪器问题](http://twistedmatrix.com/trac/ticket/4964)的链接。

可能的解决方案：

1.  增加服务器上的 wait_timeout 值。
2.  [覆盖上面引用](http://www.gelens.org/2009/09/13/twisted-connectionpool-revisited/)的 ConnectionPool 类中的方法。
3.  在每个连接中设置一个定期“ping”以使其保持活动状态。
4.  自己修复 adbapi 中的 bug。

其中，我可能会选择#1。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-03T13:46:19.073

链接[http://www.gelens.org/2009/09/13/twisted-connectionpool-revisited/](http://www.gelens.org/2009/09/13/twisted-connectionpool-revisited/)不再起作用，甚至 Web 存档版本也不起作用。这里是 Twistar 1.3 的摘录，它引用了相同的解决方案：

[https://pypi.python.org/pypi/twistar](https://pypi.python.org/pypi/twistar)

```
class ReconnectingMySQLConnectionPool(adbapi.ConnectionPool):
    """
    This connection pool will reconnect if the server goes away.  This idea was taken from:
    http://www.gelens.org/2009/09/13/twisted-connectionpool-revisited/
    """
    def _runInteraction(self, interaction, *args, **kw):
        try:
            return adbapi.ConnectionPool._runInteraction(self, interaction, *args, **kw)
        except MySQLdb.OperationalError, e:
            if e[0] not in (2006, 2013):
                raise
            log.err("Lost connection to MySQL, retrying operation.  If no errors follow, retry was successful.")
            conn = self.connections.get(self.threadID())
            self.disconnect(conn)
            return adbapi.ConnectionPool._runInteraction(self, interaction, *args, **kw) 
```

# asp.net - 如何在jquery中绑定datalist

> ID：12677249
> 
> 赞同：0
> 
> 时间：2012-10-01T16:26:27.363
> 
> 标签：asp.net, visual-studio-2010, jquery, datalist

我想在 jquery 中绑定我的数据列表。这是我的客户端代码：

```
<head>
     <script src="jss/jquery.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(function () {

            $.ajax({
                type: "POST",
                url: "WebForm1.aspx/GetProducts",
                data: '{}',
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: OnSuccess,
                failure: function (response) {
                    alert(response.d);
                },
                error: function (response) {
                    alert(response.d);
                }
            });
        });

        function OnSuccess(response) {
            $("[id*=dlOnFrontPageProducts]").attr("border", "1");
            var xmlDoc = $.parseXML(response.d);
            var xml = $(xmlDoc);
            var customers = xml.find("Table1");
            var row = $("[id*=dlOnFrontPageProducts] tr:last-child").clone(true);
            $("[id*=dlOnFrontPageProducts] tr:last-child").remove();
            $.each(customers, function () {
                alert(this);
                var customer = $(this);
                $(".Name", row).html(customer.find("Name").text());
                $(".BrandName", row).html(customer.find("BrandName").text());
                $(".MarketPrice", row).html(customer.find("MarketPrice").text());
                $(".CurrencyShortName", row).html(customer.find("CurrencyShortName").text());
                $(".Price", row).html(customer.find("Price").text());
                $(".WindowImageUrl", row).html(customer.find("WindowImageUrl").text());
                $(".SaleCount", row).html(customer.find("SaleCount").text());
                $(".IsActive", row).html(customer.find("IsActive").text());
                $("[id*=dlOnFrontPageProducts]").append(row);
                row = $("[id*=dlOnFrontPageProducts] tr:last-child").clone(true);
            });
        }

    </script>

</head>
<body>
    <asp:DataList runat="server" ID="dlOnFrontPageProducts" RepeatColumns="4" RepeatDirection="Horizontal"
        RepeatLayout="Table" EnableTheming="True" OnItemDataBound="dlChanceProducts_ItemDataBound">
        <ItemTemplate>
            <div class="box-product fixed">
                <div class="prod_hold">
                    <a class="wrap_link" href="ProductDetail.aspx?prid=<%# Eval("ProductId") %>"><span
                        class="images">
                        <asp:Image runat="server" ID="imgWindow" /></span> </a>
                    <div class="pricetag_small">
                        <span class="old_price">
                            <%# Eval("MarketPrice")%><%# Eval("CurrencyShortName")%></span> <span class="new_price">
                                <%# Eval("Price", "{0:n}")%>
                                <%# Eval("CurrencyShortName")%></span>
                    </div>
                    <div class="info">
                        <h3>
                            <%# Eval("Name") %></h3>
                        <p>
                            <%# Eval("BrandName")%></p>
                        <a class="add_to_cart_small" href="/core/ajaxresult.aspx?act=prod&prid=<%#Eval("ProductId")%>">
                            Sepete Ekle</a> <a class="wishlist_small" href="#">Listeme Ekle</a> <a class="compare_small"
                                href="#">Karşılaştır</a>
                    </div>
                </div>
            </div>
            <div class="clear">
            </div>
        </ItemTemplate>
    </asp:DataList>
</body> 
```

我返回的数据是正确的，但 datalist 没有绑定。你有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-10T12:42:49.107

这是我的代码，请检查您的代码并进行适当的更改并获得答案

## ASP.NET 代码：

```
<asp:DataList ID="dlCustomers" runat="server" RepeatLayout="Table" RepeatColumns="3"
                            CellPadding="3" CellSpacing="3" HeaderStyle-VerticalAlign="Top">
                            <ItemStyle HorizontalAlign="Center" />
                            <ItemTemplate>
                                <table cellpadding="3" cellspacing="3" border="1" style="width: 310px; height: 100px; border: thin 2px #428bca; color: black; background-color: #EEEEEE">
                                    <tr>
                                        <td style="text-align: center; background-color: cyan; color: black">
                                            <b><span class="plot"><%# Eval("PlotNumber") %> </span></b>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Seasoncode:<span class="Season"><%# Eval("Seasoncode") %> </span>
                                            <br />
                                            Village: <span class="Village"><%# Eval("Village") %></span><br />
                                            Planting Date: <span class="PlantingDate"><%# Eval("PlantingDate")%></span><br />
                                            Plant: <span class="Planttype"><%# Eval("Planttype")%></span> &nbsp;&nbsp;
                                            Crop: <span class="CropType"><%# Eval("CropType")%></span> &nbsp;&nbsp;
                                            Nursery: <span class="NurseryType"><%# Eval("NurseryType")%></span><br />
                                            Cutas Setts: <span class="CutasSetts"><%# Eval("CutasSetts")%></span><br />
                                            Seed Supply: <span class="SeedSupply"><%# Eval("SeedSupply")%></span><br />
                                            Cutas Bulk: <span class="CutasBulk"><%# Eval("CutasBulk")%></span><br />
                                            Cane Supply: <span class="CaneSupply"><%# Eval("CaneSupply")%></span><br />
                                        </td>
                                    </tr>
                                </table>
                            </ItemTemplate>
                        </asp:DataList> 
```

**jQuery代码： -**

* * *

```
function plot_details(paramstr) {
            $("[id*=dlCustomers]").hide();

            $.ajax({
                type: "POST",
                url: "CommonView.aspx/GetCustomers",
                data: "{'paramstr': '" + paramstr + "', 'procname': '" + 'DBSP_Get_PartyPlotView' + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: OnSuccess,
                failure: function (response) {
                    alert(response.d);
                },
                error: function (response) {
                    alert(response.d);
                }
            });
        }

        function OnSuccess(response) {
            var xmlDoc = $.parseXML(response.d);
            var xml = $(xmlDoc);
            var customers = xml.find("Table");
            var repeatColumns = parseInt("<%=dlCustomers.RepeatColumns == 0 ? 1 : dlCustomers.RepeatColumns %>");
            var rowCount = Math.ceil(customers.length / repeatColumns);
            var i = 0;

            while (i < repeatColumns * rowCount) {
                var row = $("[id*=dlCustomers] tr").eq(0).clone(true);
                for (var j = 0; j < repeatColumns; j++) {
                    var customer = $(customers[i]);
                    if (customer.length == 0) {
                        $("table:last", row).remove();
                    } else {
                        $(".plot", row).eq(j).html(customer.find("PlotNumber").text());
                        $(".Season", row).eq(j).html(customer.find("Seasoncode").text());
                        $(".Village", row).eq(j).html(customer.find("Village").text());
                        $(".PlantingDate", row).eq(j).html(customer.find("PlantingDate").text());
                        $(".Planttype", row).eq(j).html(customer.find("Planttype").text());
                        $(".CropType", row).eq(j).html(customer.find("CropType").text());

                        $(".NurseryType", row).eq(j).html(customer.find("NurseryType").text());
                        $(".Variety", row).eq(j).html(customer.find("Variety").text());
                        $(".CutasSetts", row).eq(j).html(customer.find("CutasSetts").text());
                        $(".CutasBulk", row).eq(j).html(customer.find("CutasBulk").text());
                        $(".SeedSupply", row).eq(j).html(customer.find("SeedSupply").text());
                        $(".CaneSupply", row).eq(j).html(customer.find("CaneSupply").text());
                    }
                    i++;
                }
                $("[id*=dlCustomers]").append(row);
            }
            $("[id*=dlCustomers] tr").eq(0).remove();
            $("[id*=dlCustomers]").show();
        } 
```

# c# - 使用 C# 和 ASP 操作类似于 jQuery 的 HTML DOM

> ID：12677250
> 
> 赞同：0
> 
> 时间：2012-10-01T16:26:33.150
> 
> 标签：c#, asp.net, dom

我有一个包含从数据库填充的表的页面。它看起来有点像这样：

```
System   Jan   Feb   Mar   Apr   May   Jun   Jul   Aug   Sep  Oct   Nov   Dec
1        x     x     x     x     x     x     x     x     x    x     x     x
2        x     x     x     x     x     x     x     x     x    x     x     x
6        x     x     x     x     x     x     x     x     x    x     x     x 
```

表格中的每个单元格（即上图中的每个“x”）都包含一个用户需要在其中输入值的文本框。我使用列标题和系统编号（例如“feb2”、“mar6”、“oct1”）动态地为每个文本框分配一个 ID。

页面底部是一个保存按钮，当按下该按钮时，将更新数据库中所有系统和所有月份的值。

**我的问题是：如何在不知道文本框 ID 的情况下获取文本框的值并调用 sql 函数来更新值？**

这是我想用 jQuery（我更熟悉的一种语言）做的一个例子：

```
function saveValues(){
    var rows = $("#SystemTargetsTable tr:not(:first-child)"); // skip the header row
    var systemID;
    var jan, feb, mar, apr, may, jun, jul, aug, sep, oct, nov, dec;

    rows.each(function(index) {        
    systemID = $(this).attr('id').substring(6);

    jan = $('#Jan' + systemID).val();
    feb = $('#Feb' + systemID).val();
    mar = $('#Mar' + systemID).val();
    apr = $('#Apr' + systemID).val();
    may = $('#May' + systemID).val();
    jun = $('#Jun' + systemID).val();
    jul = $('#Jul' + systemID).val();
    aug = $('#Aug' + systemID).val();
    sep = $('#Sep' + systemID).val();
    oct = $('#Oct' + systemID).val();
    nov = $('#Nov' + systemID).val();
    dec = $('#Dec' + systemID).val();

    //ONCE I HAVE THE VALUES FOR EACH MONTH I WOULD LIKE TO CALL AN UPDATE STATEMENT USING THE SYSTEM ID. ONLY OF COURSES I CANNOT DO TIS FROM JAVASCRIPT!
  }); 
} 
```

感谢您的时间。我希望这一切都有意义！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T17:47:56.543

在不知道唯一列的 ID 的情况下，您无法更新和 sql 表行，在您的情况下是系统列。
这是我所做的：
当您使用动态文本框为每一行填充表格时，您分配文本框的 id = 该行的系统 id 值。

```
<asp:TextBox ID="System.ID_Value(FromDB)"  value="Month_Value_(value from DB)" runat="server"></asp:TextBox>

then on the click event of the save button 

 protected void Button1_Click(object sender, EventArgs e)
    {
        foreach (var row in Table1.Rows)
        {
            string[] allkeys = Request.Form.AllKeys;
            foreach (string key in allkeys)
            {
                if (key.ToUpper().StartsWith("System_ID"))
                {
                    var ID = Convert.ToInt32(key.Split('_')[1]);           
                }
                if (key.ToUpper().StartsWith("MOnth_Value"))
                {
                    var Jan = Convert.ToInt32(key.Split('_')[2]);
                    var feb = Convert.ToInt32(key.Split('_')[3]);
                }
                // and so on then you call the update method
            }  
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T16:48:58.613

使用 runat="server" 属性和提供 ID 来控制此表服务器，例如；tbl1，然后循环通过表行

> ```
>  for (var i = 0; i<tbl1.Rows.Count; i++)
>              {
>                  var txtJan = tbl1.Rows[i].FindControl("Jan" + i.ToString()); 
> ```
> 
> `var janValue =txtJan.Text;`
> 
> ```
>  } 
> ```

# c# - 在实体框架 linq 查询中将字符串转换为 int 并处理解析异常

> ID：12677256
> 
> 赞同：12
> 
> 时间：2012-10-01T16:27:24.603
> 
> 标签：c#, linq, entity-framework

我有这个问题，我有一个购买表

```
Purchases(Date DateTime, Number string) 
```

我想要的是创建一条新记录，所以我需要 Max(Number)，这里的问题是 Number 是一个**字符串**，我试过了

```
Purchases.Select(X=>int.Parse(X.Number)).Max() 
```

但它可能会引发异常，我创建了一个自定义`ToInt()`扩展，所以当我使用

```
Purchases.Select(X=>X.Number.ToInt()).Max() 
```

它抛出一个异常，说我的 ToInt() 不能与著名的 ToString() 相同的 linq 查询一起使用

所以我的**问题**是：有没有办法在 linq 查询和处理异常的同时将字符串转换为 int 或将自定义函数集成到 linq 查询！

这是我的扩展

```
 public static int ToInt(this string s)
    {
        try
        {
            return int.Parse(s);
        }
        catch
        {
        }
        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-01T16:52:36.367

第一种方式：

```
var numbers = Purchases.Select(x => x.Number).ToList();

int temp;
int max = numbers.Select(n => int.TryParse(n, out temp) ? temp : 0).Max();

Console.WriteLine("Max: {0}", max); 
```

第二种方式：

```
int temp2;
int max2 = Purchases.Select(x => x.Number).ToList().Select(n => int.TryParse(n, out temp2) ? temp2 : 0).Max();

Console.WriteLine("Max 2: {0}", max2); 
```

关键在于`.ToList()`这两种方式。它从数据库中获取所有`string`数据，因此当您调用`int.TryParse`结果时，数据库查询已经运行，因此它使用的是纯 CLR 代码，而不是尝试转换`int.TryParse`为 SQL 查询。我在我的一个沙盒项目中创建了一个 EF 上下文并验证了它的工作原理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T16:35:16.280

我不明白你为什么不想要这个例外，因为如果你的强制转换失败，那么这意味着你的应用程序出了点问题（或者至少，我明白了）。我也不明白为什么要将应该是数字的内容保存为数据库中的字符串。通常，您会将其保留为数字，这样您以后就不必处理此类问题，如果有人尝试插入错误的值，您将在插入时失败。

但是 - 如果你确实想让这条线正常工作，你应该使用`int.TryParse`如果成功转换的值将返回 true 并将值放入 'out' 成员中，该成员将不在查询中。像这样：

```
int tmp;
Purchases.Select(X=>int.TryParse(X.Number, out tmp) ? tmp : 0).Max() 
```

而不是“0”，而是放置一些不会与您的逻辑混淆的默认值。

# javascript - .show 元素和 .hide 元素

> ID：12677257
> 
> 赞同：0
> 
> 时间：2012-10-01T16:27:27.297
> 
> 标签：javascript, jquery

我有这个问题：

*   我有 6 个“外部”div，每个里面都有一个 img 标签。
*   每个 6 个 div 后面是另一个 div，每个 6 个 div 的内容

我希望当我单击一个“外部”div 时隐藏所有外部 div 并向我显示下一个 div 内容。

这就是功能。它在那里工作[http://jsfiddle.net/Weinz/jdFRw/4/](http://jsfiddle.net/Weinz/jdFRw/4/)

但是在测试站点上只隐藏 .outerDiv 不显示下一个 .innerDiv

```
$(function() {
    $(".outerDiv").click(function() {
        $(".outerDiv").hide();
        $(".innerDiv").hide();
        $(this).next("div").show();
    });
    $(".innerDiv").click(function() {
        $(".outerDiv").show();
        $(".innerDiv").hide();
    });
}); 
```

真正的html代码是这样的

```
<div class="block outerDiv"><a href="#"><img src="images/placeholder.jpg" width="165" height="74" alt="Temp" /></a></div>
     <div class="container innerDiv" style="display:none;"> 
```

我认为问题出在 .next 上，但我尝试了不同的选项，但没有任何效果。

如果我没有在 innerDiv 中设置显示，它可以工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:34:35.860

尝试这个

```
$(function() {
$(".outerDiv").click(function() {
    $(".outerDiv").hide();
    $(".innerDiv").hide();
    $(this).next("div").show().css('display', 'block');
});
$(".innerDiv").click(function() {
    $(".outerDiv").show();
    $(".innerDiv").hide();
}); 
```

});

# java - 拆分问题（字符串正则表达式）

> ID：12677262
> 
> 赞同：1
> 
> 时间：2012-10-01T16:27:55.667
> 
> 标签：java, regex, string, exception, split

嗨，我在下面的代码中遇到问题（文件属于 File 类）：

```
String[] fileNameSplit = file.getName().split(".");
String fileType = fileNameSplit[(fileNameSplit.length - 1)]; 
```

它总是在 -1 处抛出 ArrayOutOfBoundsExecption，表明 fileNameSplit 为 0。当我取出 -1 时，它仍然显示 ArrayOutOfBoundsException 但现在为 0，这意味着它是空的。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T16:29:38.393

这是因为`.`它是一个接受“任何字符”的[*元字符。*](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)它将字符串的每个字符都视为分隔符，“吃掉”其全部内容。

像这样逃避点：

```
String[] fileNameSplit = file.getName().split("\\."); 
```

或使用字符类，如下所示：

```
String[] fileNameSplit = file.getName().split("[.]"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T16:29:08.077

采用`\\.`

`String[] fileNameSplit = file.getName().split("\\.");`

由于`regex`和`String`彼此不协调，`\`需要使用第一个来使编译器意识到它不是`dot(.)`一个正则表达式，第二个`\`是使 java 编译器`\`按字面意思理解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T16:29:30.640

请注意，该`split`方法的参数是一个正则表达式。在正则表达式中，点有一个特殊的含义：匹配*任何*字符。

*要从字面上*使用点，您需要对其进行转义：

```
`String[] fileNameSplit = file.getName().split("\\.");` 
```

该`split`方法的[文档。](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)

# java - 两个线程在运行时如何进行通信？

> ID：12677263
> 
> 赞同：7
> 
> 时间：2012-10-01T16:27:59.247
> 
> 标签：java, multithreading, concurrency

我一直在尝试自学并发性，但遇到了一个问题。我知道两个 Java 线程可以通过`wait()`和相互通信`notify()`。但是，这需要一个线程处于非活动状态，并且基本上“只是坐在那里”，直到另一个线程将其唤醒。

是否可以让两个线程同时运行并且仍然让它们监听来自另一个的通知？这将通过并发技术还是类似的东西来完成`ActionListener`？

例如，我正在测试的项目基本上是一个网格，不同的实体在不同的单元格中游荡。当两个实体碰巧进入同一个单元格时，我希望一个实体通知另一个实体并基于此发生不同的事情（例如，问候：“你好！”）。但就目前而言，使用等待/通知范式，其中一个线程/实体必须简单地坐在一个单元中，等待另一个进入；他们都不能四处走动。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T16:30:06.443

有几种方法可以在线程之间进行通信。使用最常见的方法，您可以使用实例变量在线程之间共享信息，但您必须注意只从一个线程写入或同步对共享变量的任何更新。或者，您可以使用为线程间通信或在线程之间传递原始数据而设计的管道 I/O 流。一个线程将信息写入流，而另一个线程读取它。

这是一个示例方法，它将从慢速网络连接读取输出并使用线程将其转储到 System.out。

```
 public void threads() throws IOException {
    final PipedOutputStream outputForMainThread = new PipedOutputStream();
    new Thread(new Runnable() {
        @Override
        public void run() {
            while(moreDataOnNetwork()) {
                byte[] data = readDataFromNetwork();
                try {
                    outputForMainThread.write(data);
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
    }).start();
    BufferedReader reader = new BufferedReader(new InputStreamReader(new PipedInputStream(outputForMainThread)));
    for(String eachLine = reader.readLine(); eachLine != null; eachLine = reader.readLine()) {
        System.out.println(eachLine);
    }
} 
```

但是，听起来您几乎想要一种事件回调机制，其中一个线程（您的用户界面线程）在另一个线程检测到特定条件时得到通知。根据您的平台，其中大部分内容都已包含在内。例如，使用 Android，您可以有一个线程来确定网格实体已移动。它将向主用户界面线程发送更新以重新绘制屏幕。这样的更新可能类似于：

```
public void gridEntityDidUpdate(final Point fromLocation, final Point toLocation) {
    Activity activity = getMainActivity();
    activity.runOnUiThread(
            new Runnable() {
                @Override
                public void run() {
                    updateScreen(fromLocation, toLocation);
                    if(pointsAreCoincedent(fromLocation, toLocation)) {
                        System.out.println("Hello there!");
                    }
                }
            }
    );
}

private void updateScreen(Point fromLocation, Point toLocation) {
    //Update the main activity screen here
} 
```

在这种情况下，您有一个后台线程来计算所有屏幕上元素的位置，并在元素位置发生变化时通知主线程。有一种提取方法可以确定 2 个点是否重合或相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T16:34:52.847

您可以使用`Erlang` **语言**在它们自己的地址空间中安全地进行通信，并**作为**线程的更好和安全的替代方案。`Processes``Java`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T18:14:33.017

> 我一直在尝试自学并发性，但遇到了一个问题。我知道两个 Java 线程可以通过 wait() 和 notify() 相互通信。

“经典”Java 线程教程在早期就教授等待/通知。回到 Java 1.1、1.2 的时间框架，这就是全部。

但是，如果您可以获得 Brian Goetz 的优秀“Java Concurrency in Practice”的副本，等待/通知直到第 IV 部分高级主题中的第 14 章“构建自定义同步器”才讨论。我在这里严重解释，但我得到的印象是“如果你已经阅读了之前的 300 页，并且到目前为止讨论的构建块都没有满足你的需求，那么你可以尝试使用等待/通知来构建你自己的”。

我的观点是，等待/通知虽然非常重要，但可能不是开始学习并发的最佳场所。这个问题（生产者/消费者，ExecutorService）中的一些答案/评论是指在 Java 5 中添加的更高级别的并发构建块。即使这些东西是后来添加的，它也是你应该首先学习的东西。

回到你的问题 - 这里有几个想法：

如果这是一个 GUI 应用程序并且您想让后台线程做一些工作，请查看[SwingWorker](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)。我已经成功使用 SwingWorker（第 9.3.3 节），其中后台线程从阻塞队列（第 5.3 节）读取消息并通过调用更高级别的“发布”方法通知 GUI 线程。没有“等待/通知”——至少在我的代码中没有。

如果应用程序不是基于 Swing 的，并且您希望不同的线程并行执行任务并偶尔相互发送消息，请考虑[ZeroMQ](http://www.zeromq.org) “充当并发框架的套接字库”。使用 ZeroMQ，每个线程都在运行一个读取和处理消息的事件循环。线程可以通过向自己发送消息来安排自己的线程上的工作。它可以通过向该线程（套接字）发送消息来安排工作/通知不同的线程。

无论如何，祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T16:37:04.173

尝试使用`ThreadManager`类，它具有`List<Thread>`并且有点像信号量对象。您的线程应该能够从那里找到并引用其他线程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T16:37:35.417

> 是否可以让两个线程同时运行并且仍然让它们监听来自另一个的通知？

只要他们不等待，他们就可以同时做某事。如果他们似乎只是在等待对方，那么你最好用一个线程。（使用多线程并不总是更好）

> 这会通过并发技术还是像 ActionListener 之类的东西来实现？

更有可能是您如何分解问题的设计问题。当线程之间的交互最少时，线程工作得最好。如果它们高度依赖于彼此，则应考虑使用更少的线程。

> 但就目前而言，使用等待/通知范式，其中一个线程/实体必须简单地坐在一个单元中，等待另一个进入；

我根本不明白你为什么需要在这里等待/通知。当他们在同一个牢房中时，我会让他们四处走动并互相发送消息。

# asp.net-mvc - Razor 动态渲染用户定义的标签

> ID：12677264
> 
> 赞同：0
> 
> 时间：2012-10-01T16:28:03.430
> 
> 标签：asp.net-mvc, razor

我怎样才能实现以下目标？

```
 @foreach (var responsible in new List<string>{"receiver", "sender"})
    {
      <@responsible>
           ...
      </@responsible>
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T16:30:49.660

以下应该有效：

```
@foreach (var responsible in new List<string>{"receiver", "sender"})
{
    @Html.Raw(string.Format("<{0}>", responsible))
        @:Hello world
    @Html.Raw(string.Format("</{0}>", responsible))
} 
```

顺便说一句，如果您正在使用 Razor 构建 XML，请立即停止并使用 XML 解析器。例如，编写一个自定义 Xml 操作结果，该结果将传递给您的模型，并负责生成它。Razor 适用于 HTML，而不是其他任何东西。

# plugins - 为什么我的 Joomla 用户插件没有被调用？

> ID：12677265
> 
> 赞同：0
> 
> 时间：2012-10-01T16:28:03.420
> 
> 标签：plugins, joomla2.5

我为 Joomla 编写了一个小型用户插件！这应该根据用户组更改登录时的返回 url。但是，它甚至没有被调用。我究竟做错了什么？

```
class plgUserPluginName extends JPlugin
{
    /**
    * This method should handle any login logic and report back to the subject
    *
    * @param    array   $user       Holds the user data
    * @param    array   $options    Array holding options (remember, autoregister, group)
    *
    * @return   boolean True on success
    * @since    1.5
    */
    public function onUserLogin($user, $options = array())
    {
        $user = JFactory::getUser();
        $db = JFactory::getDBO();
        $db->setQuery(
            'SELECT link_id FROM '.$db->quoteName('#__mt_links') .
            ' WHERE '.$db->quoteName('user_id').' = '.$db->quote($user->id)
        );
        $link_id = $db->loadResult();
        if(!$link_id){
            $db->setQuery(
               'SELECT group_id FROM '.$db->quoteName('#__user_usergroup_map') .
               ' WHERE '.$db->quoteName('user_id').' = '.$db->quote($user->id)
            );
            $group_id = $db->loadResult();
            if($group_id == somegroupid) $options['return'] = 'abc';
            elseif($group_id == someothergroupid) $options['return'] = 'xyz';
        }
        return true;
    }
} 
```

我的xml是：

```
<?xml version="1.0" encoding="utf-8"?>
<extension version="2.5" type="plugin" group="user">
    <name>plg_user_pluginname</name>
    <version>1.0.0</version>
    <description>PLG_USER_PLUGINNAME_XML_DESCRIPTION</description>
    <files>
        <filename plugin="pluginname">pluginname.php</filename>
        <filename>index.html</filename>
    </files>
    <languages>
        <language tag="en-GB">en-GB.plg_user_pluginname.ini</language>
        <language tag="en-GB">en-GB.plg_user_pluginname.sys.ini</language>
    </languages>
    <config>        
    </config>
</extension> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T10:58:04.717

我不确定以下两个中的哪一个解决了它，但是

a) 我将我的插件重命名为 plgUserPluginname 而不是 plgUserPluginName (小 n 代表名称) b) 我将可访问性从 Registered 更改为 Public

现在正在调用它！

# netty - Reslet Netty 配置 - 线程池大小

> ID：12677266
> 
> 赞同：0
> 
> 时间：2012-10-01T16:28:05.163
> 
> 标签：netty, restlet

我已经设置了 Restlet 并为我的项目工作，没有太多问题。我决定通过 Netty 出售这些服务，并且我已经成功地设置了它而没有太多问题。我通过以下代码强制 Restlet 使用 Netty：

```
Engine.getInstance().getRegisteredServers().add(0, new org.restlet.ext.netty.HttpServerHelper(null)); 
```

这同样运作良好，但我想调整为 HTTP 处理提供的线程数。以前使用过 Jetty，我正在使用

```
Series<Parameter>   params = restletServer.getContext().getParameters();
params.add("minThreads", ...);
params.add("maxThreads", ...); 
```

但是，我不确定如何在netty中配置线程池的大小。

任何人都可以帮助阐明这个主题。

谢谢大家，

贾瓦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:02:26.510

Netty 连接器已在 2.1 版中删除。它仅在 2.0 中是实验性的。

如果可能，您应该迁移到 2.1 版，或者至少使用 Simple 或 Jetty 连接器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T08:02:11.827

为什么这个连接器被移除了？似乎 Netty 是全球最快的框架之一（[http://www.techempower.com/blog/2013/03/28/framework-benchmarks/](http://www.techempower.com/blog/2013/03/28/framework-benchmarks/) ）......在这个比较中使用restlets也可能很有趣。 ..

关于泽维尔

# iphone - iPhone 5 视图框架更改

> ID：12677270
> 
> 赞同：2
> 
> 时间：2012-10-01T16:28:14.023
> 
> 标签：iphone, ios, uiview, autoresize, iphone-5

我目前正在开发的应用程序有大量的浏览量。有些是 webviews，有些是普通的 UIViews，有大量的子视图。现在 iPhone 5 已经问世了，如何才能*最有效地*改变整个应用程序的框架大小以同时支持 4 英寸和 3.5 英寸设备？我当然可以使用一大堆 if-else 语句并为每个视图布局多个帧大小，但是*最好、最有效*的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T17:11:22.893

*最有效*的方法是使用提供的布局机制之一：

1.  **Autoresizing** – 每个`UIView`都有属性`autoresizingMask`，通过将其设置为一个或多个值（使用`|`运算符），您可以告诉视图在其父视图的大小发生变化时如何表现。基本选项：

    *   `UIViewAutoresizingFlexible...`
        *   `...Width`
        *   `...Height`
        *   `...LeftMargin`
        *   `...RightMargin`
        *   `...TopMargin`
        *   `...BottomMargin`
2.  **Auto Layout** – iOS 6 中的新功能，它提供了更复杂（非常复杂）的视图属性之间的关系机制。基本上它是自动调整大小的超集，并且有一些长文档。*我不推荐给你。*

# sql - UNION ALL 后的 CTE

> ID：12677273
> 
> 赞同：2
> 
> 时间：2012-10-01T16:28:28.360
> 
> 标签：sql, sql-server, common-table-expression

此查询不起作用：

```
WITH a AS 
(SELECT 1 AS c1)
SELECT
    *
FROM
    a 

UNION ALL

WITH b AS 
(SELECT 1 AS c1)
SELECT
    *
FROM
    b 
```

你能帮忙吗？

实际查询使用表，但在示例中不是必需的。

非常感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T16:30:41.720

```
;WITH a AS 
(SELECT 1 AS c1), 
b AS 
(SELECT 1 AS c1)
SELECT
    *
FROM
    a 
UNION ALL
SELECT
    *
FROM
    b 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T11:19:09.990

简单的答案：你打破了查询;-)

让我解释：

*   UNION 关键字接受 2 个“查询”并将它们合二为一。
*   WITH 关键字不能在查询中使用，它只对一个查询有效
*   WITH 可用于定义多个 CTE

所有这些的结果是您希望在 UNION 查询之前定义两个 CTE（a 和 b）。将 WITH 放在 UNION 查询中会破坏 UNION（因为 WITH 总是在查询之外（之前）。

# django - Django SessionWizardView 页面重新加载后跳回第一步

> ID：12677275
> 
> 赞同：1
> 
> 时间：2012-10-01T16:28:31.217
> 
> 标签：django, django-forms, django-formwizard

我正在使用一个`SessionWizardView`管理两种表格的人。例如，当我在最后一步重新加载页面时，我又回到了第一步，必须再次输入所有字段。

这是预期的行为吗？如果是这样，是否有可能回到我重新加载页面之前的步骤？当然，所有字段都应相应填写。

```
class ManufacturingCalculatorWizard(SessionWizardView):
  def get_template_names(self):
    TEMPLATES = {
        "blueprint": "manufacturing/forms/select_blueprint.haml",
        "calculator": "manufacturing/forms/calculator.haml"
    }

    return [TEMPLATES[self.steps.current]]

  def done(self, form_list, **kwargs):
    form_data = [form.cleaned_data for form in form_list]
    rcontext = RequestContext(self.request, { 'data' : calculate_manufacturing_job(form_data) })
    return render_to_response('manufacturing/forms/result.haml', rcontext) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T18:19:51.370

在方法之后呈现的页面`done`不是向导的一部分，因此当您重新加载它时，django 将尝试重定向到第一页作为向导的新会话。

如果您想将最后一步添加为预览和确认页面之类的内容，您可以使用虚拟表单添加新步骤并使用模板显示适当的数据。要从前面的步骤中获取数据，您可以使用视图的[get_context_data](https://docs.djangoproject.com/en/dev/ref/contrib/formtools/form-wizard/#django.contrib.formtools.wizard.views.WizardView.get_context_data)方法，使用先前表单的清理数据构建上下文。

# ssl - 在非阻塞套接字上，使用 openssl 0.9.8m 及更高版本实现重新协商

> ID：12677280
> 
> 赞同：2
> 
> 时间：2012-10-01T16:28:40.247
> 
> 标签：ssl, openssl

openssl 在 0.9.8m 及更高版本中添加了安全重新协商。我该如何处理这种情况？在服务器中，使用非阻塞套接字，说 SSL_accept 完成。现在服务器将检查套接字是否变得可读。如果是这样，那么有两种可能性，要么套接字变得可读，因为客户端发送了一些请求，要么客户端重新协商了连接。SSL_MODE_AUTO_RETRY 不适用，因为我了解非阻塞套接字。如果客户端发送请求，则需要调用 SSL_Read。如果客户端重新协商，则必须调用 SSL_accept。如果我在客户端重新协商时调用 SSL_read，它会返回 SSL_ERROR_SSL。那么我如何确定我应该做 SSL_accept 还是 SSL_read。再次调用 SSL_read 会返回相同的错误。

感谢您的任何输入

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T04:48:37.540

我猜您正在使用 C。您将不得不检查错误代码并在最后保持会话状态。如果案例是success 或needsRead 或needsWrite，您将不得不调用相应的函数。最初将状态设置为需要接受。接受功能将根据会话自动决定是否需要读取或写入。

```
 int retCode = SSL_get_error(ssl, retNum);
  switch (retCode) {
     case SSL_ERROR_NONE:
    return "success";
         case SSL_ERROR_WANT_READ:
    LOG_DEBUG("SSL_ERROR_WANT_READ");
    return "needsRead";

     case SSL_ERROR_WANT_WRITE:
    return "needsWrite";

    case SSL_ERROR_ZERO_RETURN:
    case SSL_ERROR_SSL:
    case SSL_ERROR_SYSCALL:
         return "socket should be closed";
} 
```

# java - java中的StartWithLetter和EndWithLetter

> ID：12677283
> 
> 赞同：0
> 
> 时间：2012-10-01T16:28:51.337
> 
> 标签：java

我正在做一个 java 活动，如果名称以字母 AG 开头并以字母 Hz 结尾，则输出无效继承我的代码：

```
if(str.startsWith("a")){
System.out.print("Invalid Name! ");
}
if(str.endsWith("z")){
System.out.print("Invalid Name!");
} 
```

现在我如何在 if else 语句中实现字母 ag 和 hz 声明谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T16:41:30.543

你可以这样做：

```
if (str.matches("[a-gA-G].*[h-zH-Z]")) {
   System.out.print("Invalid Name! ");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T16:54:45.253

您也可以在此处使用 ASCII 值。AZ 范围从 65 到 90（大写）。我在这里使用了硬编码值，直接来自 ASCII 表只是为了向您介绍概念示例代码：

```
String strUpperCase=str.toUpperCase();

    char start=str.charAt(0);
    char end=str.charAt(strUpperCase.length()-1);

    if((start>=65 && start<=71) || (end>=72 && end<=90)){
        System.out.println("Invalid name");
    } 
```

# java - java.util.Scanner 是如何工作的？

> ID：12677284
> 
> 赞同：1
> 
> 时间：2012-10-01T16:28:53.743
> 
> 标签：java, java.util.scanner, tokenize

我有一种简单的语言，它由像这样的模式组成

```
size(50*50)
start(10, 20, -x)
forward(15)
stop 
```

这是海龟绘图语言的一个例子。我需要正确标记它。以上是源代码实例。语句和表达式用换行符分隔。我将我的扫描仪设置为使用换行符等分隔符。我预计`next("start")`吃掉字符串“start”，然后我发出`next("(")`吃第一个括号。然而，它似乎做了一些超出我预期的事情。扫描仪是否已经根据分隔符将上述内容分解为标记和/或我是否需要以不同的方式处理？对我来说，第一行的“start”、“(”、“50”、“*”、“50”和“)”将构成单独的标记，这似乎是一个未实现的期望。如何用尽可能少的代码标记上述内容？我目前不需要写分词器，我正在写一个解释器，所以我目前不想花时间在分词上，我只是喜欢 Scanner 在这里和我一起工作。

我的`useDelimiter`电话如下：

```
Scanner s ///...
s.useDelimiter(Pattern.compile("[\\s]&&[^\\r\\n]")); 
```

发出第一个`next`电话会给我整个文件内容。没有上面的调用，它给了我整个第一行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T16:33:01.190

要编写正确的解析器，您需要以正式语法定义您的语言。相信我，你想要正确地做到这一点，否则你会在下游遇到问题。

您可能可以将标记表示为最低级别的正则表达式，但首先您需要清楚您的语法，即词汇结构中标记的组合。您可以将其表示为递归函数（方法），称为产品。每个生产功能都可以使用扫描仪来测试它是否正在查看它想要的令牌。但是扫描仪会消耗输入并且您无法反转。

如果您使用过 Scanner，您会发现以下不合适的地方：

1.  它总是会根据正则表达式解析一个token，

    1.1 因此，即使您确实获得了可以使用的令牌，您也必须编写更多代码来准确确定它是什么令牌

    1.2 你可能无法将你的语言语法表示为一个大表达式

2.  你不能重发。前瞻解析器（像您这样的许多语法都需要）需要能够先查看输入流，然后根据需要决定不使用输入并让另一个令牌解析器函数使用它。

我建议您自己编写字符词法分析器，并遍历字符串/字符数组而不是流。然后你可以重新上弦。

否则，请使用现成的词法分析器/解析器框架，如[yacc](http://en.wikipedia.org/wiki/Yacc)或[Coco/R](http://www.ssw.uni-linz.ac.at/coco/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T16:38:19.057

类[`java.io.StreamTokenizer`](http://docs.oracle.com/javase/7/docs/api/java/io/StreamTokenizer.html)可能更适合。[在递归下降解析器](http://en.wikipedia.org/wiki/Recursive_descent_parser)的这个[例子](https://sites.google.com/site/drjohnbmatthews/enumerated-functions)中使用它。

附录：*和**类**之间的主要区别是什么* ？`StreamTokenizer` *`Scanner`*

 **两者都可以进行解析器所需的[*词法分析*](http://en.wikipedia.org/wiki/Lexical_analysis)。`StreamTokenizer`重量更轻，但仅限于四个预定义的元令牌。`Scanner`更加灵活，但使用起来有些麻烦。这是两者的[比较以及后者的](https://stackoverflow.com/a/2082174/230513)[变化](https://stackoverflow.com/a/2080499/230513)。**

# java - 从 html 表中的特定列获取值

> ID：12677286
> 
> 赞同：0
> 
> 时间：2012-10-01T16:28:57.267
> 
> 标签：java, javascript, jquery, html

我有一个控制器设置，视图包含一个包含一些信息的表。当在 jsp 页面上按下提交按钮时，我想从表中的第二列获取信息，以便我可以在控制器中处理该信息。表中的行可以从 2 到 100 不等，所以我一直在寻找可以从第二列获取值的东西，而与行数无关。我想从 td 类 urltext 中提取信息。我做了我的研究，但我找不到任何与此相关的信息，所以任何想法都会受到高度赞赏。谢谢。

```
<table name="urlTable" id="urlList"  style="width:100%; overflow: scroll;">
<tr>
    <th>Select</th>
    <th>URL</th>
</tr>
<c:forEach var="urlList" items="${command.urlList}">
<tr>
    <td><input type="checkbox" name="chk"/></td>
    <td class="urlText"><input class="urlValue" type="text" value="${urlList}" style="font-size: 13px; border: none;" size="85px;" readonly="readonly"/></td>
</tr>
</c:forEach>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:34:20.180

让我们从我们应该使用的`thead`和`tbody`元素开始。

```
<table name="urlTable" id="urlList"  style="width:100%; overflow: scroll;">

    <thead>
        <tr>
            <th>Select</th>
            <th>URL</th>
        </tr>
    </thead>
    <tbody>
        <c:forEach var="urlList" items="${command.urlList}">
        <tr>
            <td><input type="checkbox" name="chk"/></td>
            <td class="urlText"><input class="urlValue" type="text" value="${urlList}" style="font-size: 13px; border: none;" size="85px;" readonly="readonly"/></td>
        </tr>
        </c:forEach>
    </tbody>

</table> 
```

然后只需针对`tbody`. 我假设您的目标是`input`.

```
var inputs = $("#urlList > tbody > tr > td:nth-child(2) > input"); 
```

我不知道你现在想对输入做什么。如果您想要一个值数组，请执行此操作。

```
var vals = inputs.map(function() { 
                         return this.value; 
                      }).toArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T16:36:31.387

你可以试试这个：

```
var values = [];
$('#urlList .urlvalue').each(function(){
    var val = $(this).val();
    values.push(val);
}); 
```

数组值具有表中的所有输入值。

# ruby-on-rails - Rails：未初始化的常量 User::UserAlbum？

> ID：12677287
> 
> 赞同：0
> 
> 时间：2012-10-01T16:28:57.827
> 
> 标签：ruby-on-rails

嗨，我目前正在尝试建立一个附有许多用户的相册，并且我正在尝试修复它们之间的关系，以便它是多对多的（一个用户 + 多个相册，一个相册 + 多个用户）。但是，我在触摸模型和迁移后尝试加载 show.html.erb 时收到错误消息。请帮忙！！

错误：

`uninitialized constant User::UserAlbum`

显示.html.erb

```
<% provide(:title, "Welcome, #{@user.name}!") %>

<div>
    You currently have <%= pluralize(@user.albums.count, "album") %>
</div>

<div>
    <%= link_to "Create a new album!", new_user_album_path(@user) %>
</div>

<div>
<% if @user.albums.any? %>
hey
<% else %>
boo
<% end %> 
</div>

<%= link_to "Back", users_path %> 
```

专辑模特

```
class Album < ActiveRecord::Base
  attr_accessible :avatar, :name, :description
  has_many :user_albums
  has_many :users, :through => :user_albums
  has_many :photos
end 
```

用户模型

```
class User < ActiveRecord::Base

  has_secure_password
  attr_accessible :email, :name, :password, :password_confirmation
  validates_presence_of :password, :on => :create

  validates_format_of :name, :with => /[A-Za-z]+/, :on => :create
  validates_format_of :email, :with => /\A([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})\Z/i, :on => :create
  validates_length_of :password, :minimum => 5, :on => :create

  has_many :user_albums
  has_many :albums, :through => :user_albums
  accepts_nested_attributes_for :albums

end 
```

照片模型（可能没必要看这个）

```
class Photo < ActiveRecord::Base
  belongs_to :album
end 
```

user_albums 模型

```
class UserAlbums < ActiveRecord::Base
 belongs_to :album
 belongs_to :user
end 
```

图式

```
ActiveRecord::Schema.define(:version => 20121001160745) do

create_table "albums", :force => true do |t|
  t.string   "name"
  t.datetime "created_at",  :null => false
  t.datetime "updated_at",  :null => false
  t.string   "description"
end

create_table "photos", :force => true do |t|
  t.string   "avatar_file_name"
  t.string   "avatar_content_type"
  t.integer  "avatar_file_size"
  t.datetime "avatar_updated_at"
  t.datetime "created_at",          :null => false
  t.datetime "updated_at",          :null => false
  t.integer  "album_id"
end

create_table "user_albums", :force => true do |t|
  t.datetime "created_at", :null => false
  t.datetime "updated_at", :null => false
  t.integer  "user_id"
  t.integer  "album_id"
end

create_table "users", :force => true do |t|
  t.string   "name"
  t.string   "email"
  t.datetime "created_at",      :null => false
  t.datetime "updated_at",      :null => false
  t.string   "password_digest"
end 
```

结尾

用户控制器

类用户控制器 < 应用控制器

```
 def index
      @users = User.all

      respond_to do |format|
        format.html
        format.json { render json: @users }
      end
    end

    def new
      @user = User.new

      respond_to do |format|
        format.html # new.html.erb
        format.json { render json: @user }
      end
    end 

    def create
      @user = User.new(params[:user])

      respond_to do |format|
        if @user.save
          format.html { redirect_to @user, notice: 'User successfully created.' }
          format.json { render json: @user, status: :created, location: @user }
        else
          format.html { render action: 'new' }
          format.json { render json: @user.errors, status: :unprocessable_entity }
        end
      end
    end

    def show
      @user = User.find(params[:id])
    end

    def update
      @user = User.update_attributes(params[:user])
      if @user.save
        format.html { redirect_to @user, notice: 'User successfully updated.'}
        format.json { render json: @user, status: :created, location: @user }
      else
        format.html { render action: 'edit' }
        format.json { render json: @user.errors, status: :unprocessable_entity }
      end
    end

end 
```

解决方案：我的 UserAlbums 模型是复数而不是 UserAlbum。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:32:01.613

你有`UserAlbum`模特吗？

如果没有 - 您需要创建一个以使您的关联有效。

```
class UserAlbum < ActiveReocrd::Base
  belongs_to :user
  belongs_to :album
end 
```

# html - 基于 CSS 的下拉菜单不显示 iOS 设备

> ID：12677295
> 
> 赞同：6
> 
> 时间：2012-10-01T16:29:23.883
> 
> 标签：html, css

我有一个网站的下拉菜单，它在桌面浏览器上运行良好，但在 iPad 或 iPhone 设备上不运行。但是它确实可以运行，但可以在 android 设备上运行。我有一个具有相同导航结构的类似站点，并且在该站点上运行良好。

网址是 www.aiimconference.org。这是导航结构和 CSS 的示例。这里也是完美运行的网站。我一直在这个网站上使用相同的结构。www.aiim.org。

```
<ul>
<li><a href="/conference">Home</a></il>
<li class="expandable"><a href="/conference">Program</a>
   <ul>
      <li class="expandable"><a href="/conference">Program</a></il>
      <li class="expandable"><a href="/conference">Program</a></il>
    </ul>
</il>
<li class="expandable"><a href="/conference">Connect</a></il>
<li class="expandable"><a href="/conference">Register</a></il>
<li class="expandable"><a href="/conference">Sponsors</a></il>
<li class="expandable"><a href="/conference">Venue</a></il>
</ul>

.mainNav li.expandable > a /* dropdown */{
   background: url("/assets/sites/aiimconference/www/conf2013/styles/css_img/layout/dropdown.jpg") no-repeat center right;
   padding-right: 16px;
   padding-bottom: 4px;}

.mainNav ul li.expandable li.expandable > a /* flyout */ {
   background-image: url("/assets/sites/aiimconference/www/conf2013/styles/css_img/layout/flyout.png") !important;
   background-repeat: no-repeat;
   background-position: 95% 50%;

. mainNav{
    margin: 0 auto;
    text-align: center;
    background: #007287 url(/assets/sites/aiimconference/www/conf2013/images/layout/main- nav-bkgd.jpg) repeat-x bottom;
    font-family: franklin-gothic-urw-condensed, arial, sans-serif;
    font-size: 20px;
    line-height: 20px;
    text-transform: uppercase;
    margin-top: 30px;

.mainNav ul ul li:hover > a { 
     background-color:#006372;}

.mainNav span {
     display:block; 
     position:absolute; 
     right:9999px; 
     top:-35px;}

.mainNav ul li:hover > ul {
     left:-1px; 
     top:30px; 
     z-index:-1;}
.mainNav ul ul li:hover > ul {
     left:100%; 
     top:auto; 
     margin-top:-31px; /*margin-left:-10px;*/ 
     z-index:10;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T20:35:53.503

据我所知，您不应该在移动设备上使用“悬停”CSS 选择器，因为这是由光标触发的，而您没有光标，因为您也没有鼠标。您可以尝试点击并按住，但我不确定。

解决这个问题的更好方法是使用媒体查询来显示并使其仅在移动设备上以某种方式起作用。我建议您通过单击父项来触发下拉菜单，或者以不同的方式显示菜单（子菜单已经打开或类似的东西）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T12:13:54.150

我无法确认这一点，但我怀疑如果不是使用左侧定位来隐藏下拉导航，而是使用

```
visibility: hidden;
height: 0;
opacity: 0; 
```

隐藏它和

```
visibility: visible;
height: auto;
opacity: 1; 
```

为了展示它，它应该与移动 safari 和移动 chrome 一起使用。

# php - php 检查字符串的格式是否正确

> ID：12677296
> 
> 赞同：0
> 
> 时间：2012-10-01T16:29:28.310
> 
> 标签：php, string

寻找有关如何在 PHP 中验证字符串的帮助。

我的字符串包含：

*   4 个数字
*   1 封信
*   5 个数字

所有在一个条目，所以喜欢`1234A12345`。

在插入数据库之前，我需要确保/验证这一点。

有一个向导可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T16:31:47.110

这是一个非常简单的正则表达式：

```
/^\d{4}[a-zA-Z]\d{5}$/ 
```

如果[您以前没有在 PHP 中使用过正则表达式。](http://php.net/manual/en/function.preg-match.php)

# google-chrome-extension - 在 Chrome 扩展中修改 Omnibox 建议优先级

> ID：12677314
> 
> 赞同：4
> 
> 时间：2012-10-01T16:30:11.950
> 
> 标签：google-chrome-extension, omnibox

我正在编写一个 Google Chrome 扩展程序，它将使用关键字`\\`作为多功能框触发器。这运行良好，并且我实现了大部分预期的结果，除了 Omnibox 的优先级总是`file://`在建议我的应用程序之前建议。

我已阅读有关在浏览器中更改多功能框建议优先级的方法（使用键盘手动选择等）。但是在扩展代码中是否有任何更改建议顺序，这样如果扩展部署在任何浏览器上，`\\`会在它建议之前触发我的扩展`file://`？

欢迎任何帮助或朝着正确的方向前进。

# facebook - 如何在没有 publish_stream 权限的情况下发布签到（使用对话框）？

> ID：12677316
> 
> 赞同：1
> 
> 时间：2012-10-01T16:30:38.140
> 
> 标签：facebook, permissions, dialog, checkin

我想从应用程序发布签入，并且我已阅读签入[文档](https://developers.facebook.com/docs/reference/api/checkin/)以使用 HTTP POST 请求执行此操作。现在我想这样做，但没有 publish_stream 权限。我可以用[Dialogs](https://developers.facebook.com/docs/reference/javascript/FB.ui/) (JavaScript SDK) 做同样的事情吗？我尝试使用 FB.ui 方法，但我不知道如何正确执行。

FB.ui({方法：'feed'，消息：'我的消息'，地点：'110506962309835'});

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T11:22:46.510

Feed 对话框不带`place`参数——Facebook 说，这是“设计使然”。（请参阅此错误报告：[https](https://developers.facebook.com/bugs/428651263853608) ://developers.facebook.com/bugs/428651263853608 ）

所以如果你想发布签到，恐怕没有办法，你必须使用API​​并代表用户发帖，首先请求许可。

# android - 用于在 android 中显示传入/发送的短信的 UI

> ID：12677318
> 
> 赞同：1
> 
> 时间：2012-10-01T16:30:44.787
> 
> 标签：android, sms

我在我的应用程序中包含了消息传递功能。但我不确定如何显示传入/发送的消息。任何人都可以帮助我了解消息应用程序的 UI 是如何构建的，例如[goSMSPro](https://play.google.com/store/apps/details?id=com.jb.gosms&hl=en)吗？我可以考虑在 ScrollView 中使用 LinearLayout，并在接收或发送消息时添加 TextView，或者使用 ListView。这种方法是否正确，如果不是，是否有更好的方法？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:30:54.960

据我说，使用在 LinerLayout 中添加 TextViews，无论何时收到新消息，*都不是最简单的*方法。使用[ListView](http://developer.android.com/guide/topics/ui/layout/listview.html)显示消息。ListViews 仅用于此类目的，并且会大大减轻您的头痛。如果您想以对话的形式显示消息，您可以根据发送者和接收者将每行中的文本对齐。

每当收到新消息时，只需调用**`notifyDatasetChanged()`**ListView，消息就会得到更新。

# jquery - JQuery UI 选项卡折叠除一个选项卡之外的所有选项卡

> ID：12677325
> 
> 赞同：2
> 
> 时间：2012-10-01T16:31:24.997
> 
> 标签：jquery, jquery-ui

我有一个简单的 JQuery UI 选项卡菜单正在工作，我对其进行了设置，以便除第一个（主页）之外的所有链接都将展开/折叠，并且单击“主页”项只会重定向到同一页面。

```
 $("#tabs").tabs({
    collapsible: true,
    select: function(event, ui) {
        if (ui.index == 0){//home
            window.location.href = 'test.html';
        }
    }
}); 
```

虽然这可行，但当“主页”选项卡处于活动状态时，并且您第一次单击任何其他选项卡时，两个选项卡都会出于某种原因应用活动类。这只是第一次发生。再次选择相同的选项卡或其他选项卡不会导致该问题。我不知道如何解决这个问题。

[你可以在这里看到演示](http://www.ephantom.net/test.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:38:43.550

尝试在选择器上使用 first()。这是参考：[http ://api.jquery.com/first/](http://api.jquery.com/first/)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T16:47:04.153

2个问题：

1.  您的“#”href 导致错误
2.  没有 home 参考似乎也会导致错误。

[http://jsfiddle.net/D7kqG/3/](http://jsfiddle.net/D7kqG/3/)似乎具有您想要的功能-您只需将“home” div 设置为没有高度/宽度即可看起来像您想要的那样。

编辑：本来预计这会起作用：

[http://jsfiddle.net/D7kqG/4/](http://jsfiddle.net/D7kqG/4/)

（即在单击时折叠主页选项卡）但它没有添加类......

好吧，这应该正是你想要的：http: [//jsfiddle.net/D7kqG/5/](http://jsfiddle.net/D7kqG/5/)

它会自动折叠和展开主页选项卡的内容 div。

# coldfusion - Application.cfc 将值扩展到子文件夹

> ID：12677326
> 
> 赞同：2
> 
> 时间：2012-10-01T16:31:27.123
> 
> 标签：coldfusion, application.cfc

我目前正在更新我的一些 Coldfusion 应用程序，并且正在寻找一种保持某些结构的好方法。

目前，它的设置是这样的

> ```
> ApplicationRoot/Application.cfc (handles things like login, init etc..)
> ApplicationRoot/Admin (I want exact same var's as parent folder, but few extra checks to ensure the user has admin rights) 
> ```

目前，该设置适用于每个目录中的应用程序文件（并且确实有效），但是通过再次声明应用程序/会话范围等所有内容会变得混乱。有没有更好的办法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T16:53:49.997

在`Application.cfc`admin 子目录中，扩展父目录中的那个，例如：

```
component extends="ApplicationProxy" {

    // eg: if you need to do something different in the local onApplicationStart:
    public void function onApplicactionStart(){
        super.onApplicationStart();
        // stuff that's different from the parent goes here
    }    

    // if there's nothing different for a given handler, then don't have one in here: the super one will still fire

    // otherwise override each handler in a similar fashion to the onApplicationStart above, with:
    // a) a call to its super equivalent
    // b) anything that needs overriding

} 
```

在您的基本目录中，添加`ApplicationProxy.cfc`，因此：

```
component extends="Application" {

} 
```

这样做的原因是 sub`Application.cfc`不能有`extends="Application"`，因为这看起来像是一个循环引用。但是，没有更好的“合格”方式来识别基本目录中的 Application.cfc，因此需要一个代理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T16:41:19.570

我会在 RequestStart() 上的 Application.cfc 中尝试这样的事情：

```
<cffunction name="onRequestStart" returnType="boolean" output="false" hint="I handle page requests." >
  <cfargument name="requestname" type="string" required="true" >

  <cfif FileExists(GetDirectoryFromPath(arguments.requestname) & '/admin.cfm')>
    <cfinclude template="#GetDirectoryFromPath(arguments.requestname)#/admin.cfm">
  </cfif>
</cffunction> 
```

然后，在您想要设置自定义变量的每个目录中，放置一个 admin.cfm 文件。在这个 admin.cfm 文件中，只需放置一堆标签，或者您想要设置会话和应用程序变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T16:59:16.173

您也可以检查一下用户正在执行的目录，然后运行额外的代码。因此，例如，在您的主 application.cfc onRequestStart() 中，您可以说“当前请求是对 admin 文件夹吗？” 好的，运行包含所有安全功能的函数 X。如果您愿意，您甚至可以将此代码作为附加函数包含在您的 application.cfc 中。

或者，如果您通过执行扩展的东西来使用其他答案之一，您将希望在您希望其他代码运行的每个函数中放置一个 super.function() 调用。例如，使用 onRequest start，在 sub-Application.cfc onRequestStart() 开头的 super.onRequestStart() 可以在子级启动之前调用父级内容。

我个人更喜欢第一种方法，因为当您确实只有一个应用程序时，它可以保持整洁。

# c++ - 仅当我的程序访问内存时，Visual Studio 中的数据断点才会中断

> ID：12677327
> 
> 赞同：0
> 
> 时间：2012-10-01T16:31:37.207
> 
> 标签：c++, visual-studio-2010, breakpoints

如果我在 Visual Studio 中在我的应用程序正在使用的某个内存上设置数据断点，并且该内存被再次释放，如果其他应用程序使用我的程序的内存，数据断点会中断吗？

如果这有什么不同的话，我正在工作`C++`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T16:36:27.540

数据断点基于虚拟地址，因此其他进程无法访问它，除非通过类似`WriteProcessMemory`的东西（我很确定）也不会触发断点（因为在这种情况下，写入完成通过内核代码，它不会设置断点）。

# python - 凯撒密码第 2 部分

> ID：12677330
> 
> 赞同：-1
> 
> 时间：2012-10-01T16:31:53.173
> 
> 标签：python, encryption

Caeser Cypher Part II - 好的，这是我上周工作的一个进步，现在需要制作一个完全工作的 ceasar cypher，它可以通过某个移位值来加密一个句子。我不知道下一步该怎么做..任何人都可以帮忙，还有为什么我在字母表第 19 行运行回溯错误，python 说我定义时没有定义“字母表”？

```
sentence = raw_input('Enter a sentence to be encrypted')
shift = input('Enter a shift value')

def createDict (shift):
    alphabet = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ ,'

alphaList=[]
for letter in alphabet:
    alphaList.append(letter)

alphaDict={}
for letter in alphaList:
    valueLetterIndex = (alphaList.index(letter) + shift)%len(alphaList)
    valueLetter = alphaList[valueLetterIndex]
    alphaDict[letter] = valueLetter 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T16:38:13.017

`alphabet`您在函数内部创建了一个局部变量`createDict()`，但是...

*   你永远不会调用这个函数
*   即使您这样做了，`alphabet`也不会在您尝试访问它的全局范围内定义

尝试删除`createDict`函数定义并取消缩进`alphabet`定义行：

```
sentence = raw_input('Enter a sentence to be encrypted')
shift = input('Enter a shift value')

alphabet = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ ,'

alphaDict={}
for letter in alphabet:
    valueLetterIndex = (alphabet.index(letter) + shift)%len(alphabet)
    valueLetter = alphabet[valueLetterIndex]
    alphaDict[letter] = valueLetter 
```

或者，也许您实际上打算将所有内容都包含在该函数中，在这种情况下，您需要为`alphabet`定义下方的所有内容添加一定程度的缩进。

作为旁注，您可以将您的`alphaList`构造简化为`list(alphabet)`，或者只使用`alphabet`而不是`alphaList`按照凯文的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T18:45:57.787

```
def ceasar(s, n):
    # The characters in skipchars are not changed. Expand to your liking.
    skipchars = ' .,?/!@#$%^&*()[]{}'
    s = s.lower()
    t = ord('a')
    out = ''
    for c in s:
        if not c in skipchars:
            out += chr((ord(c)-t+n)%26 + t)
        else:
            out += c
    return out 
```

为了测试它，我们使用 13 作为偏移量：

```
In [21]: ceasar('This is a test.', 13)
Out[21]: 'guvf vf n grfg.'

In [22]: ceasar('guvf vf n grfg.', 13)
Out[22]: 'this is a test.'

In [23]: 'guvf vf n grfg.'.encode('rot13')
Out[23]: 'this is a test.' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T18:41:07.873

为什么要使用`createDict()`函数？这很奇怪。你根本不使用它。其次，我喜欢 iPython。这是非常宝贵的工具。

```
 6 
  7 alphaList=[]
----> 8 for letter in alphabet:
  9   alphaList.append(letter)
  10 

  NameError: name 'alphabet' is not defined 
```

你现在看到了。我认为有一种更简单的方法可以做到这一点。您是否尝试过内置函数`ord()`和`chr()`简单列表。

```
list = list('Your string')
text_to_encode = raw_input('Prompt') 
text_to_encode = list(text_to_encode)
for i in text_to_encode:
    in = (ord(text_to_encode)-65)
    code = (ord(text_to_encode)-65) 
    if in+code > 26:
        foo = code - in
        text_to_encode[i] = foo
    else:
        foo = code+in 
```

这只是伪代码。尝试类似的东西。这仅适用于小写字母。对于大写字母，您必须添加一些 elif。

# jquery - Jquery File-Upload Multipart发送单个文件选择

> ID：12677332
> 
> 赞同：2
> 
> 时间：2012-10-01T16:31:56.020
> 
> 标签：jquery, file-upload, submit

以下代码试图强加一组定制的要求，如下所述。我正在使用

[Jquery 文件上传小部件在这里](http://blueimp.github.com/jQuery-File-Upload/)：

我正在尝试将上传限制为文件集结构，并将此文件集作为单个多部分 HTTP 上传发送到我们的服务器。我已设法通过绑定到“fileuploadchange”来强制执行此文件集，其中用户仅限于将某些文件类型添加到上传队列（在这种情况下，他们一次只能上传 1 个 TXT 文件和 1 个 WAV 文件，不允许其他组合）。我的问题是使用绑定到“fileuploadsubmit”来启动上传。如果用户在单个选择实例中同时选择 TXT 和 WAV 文件，则可以正常工作，但是如果他们选择每个文件作为单个文件选择实例，则仅上传选择的第二个文件。

```
.bind('fileuploadsubmit', function (e, data) {
        if($(".template-upload").length == 2){
            if(sent > 3){
                alert("Upload processing in progress. To upload another File-Set, please reset the form.");
                return false;
            }else if(sent == 3){
                sent++;
                return false;
            }else{
                if((data.files.length == 2)&&(sent == 0)){//Both files selected at once and work fine.
                    all_data = data;
                    sent = 2;
                }

                if(sent == 0){//get 1st file from single file selection and add to Global all_data variable for submission
                    all_data = data;
                    sent++;
                    return false;
                }else if(sent == 1){//get 2nd file from single file selection and add to Global all_data variable for submission
                    all_data['files'].push(data['files'][0]);
                    all_data['context'].push(data['context'][0]);
                    all_data['paramName'].push(data['paramName'][0]);
                    sent++;
                }

                if(sent == 2){//Only send when 2 files have been prepared in Global all_data variable
                    $("#loader_response").html("UPLOADING....");
                    sent++;
                    var jqXHR = all_data.submit();
                }
            }
        }else{
            alert("Only a file-set can be uploaded." + file_set_message);
            return false;
        }
    }) 
```

任何帮助将不胜感激，使其按需要工作。

提前致谢。

编辑：修复问题如下：

```
 }else if(sent == 1){//get 2nd file from single file selection and add to Global all_data variable for submission
                data['files'].push(all_data['files'][0]);
                data['context'].push(all_data['context'][0]);
                data['paramName'].push(all_data['paramName'][0]);
                sent++;
              } 
```

后跟一个 data.submit() 不是 all_data.submit()

进一步编辑： data.submit() 更改会导致 JQuery“递归过多”错误。一起删除提交调用，因为它将在方法正确结束时默认调用。

# c++ - 何时必须/应该在 static_cast 上使用 dynamic_cast？

> ID：12677334
> 
> 赞同：4
> 
> 时间：2012-10-01T16:32:01.560
> 
> 标签：c++, casting

我想知道何时*必须*或*应该*在 static_cast 上使用 dynamic_cast，并附上示例。我读过[这个 SO question](https://stackoverflow.com/questions/332030/when-should-static-cast-dynamic-cast-and-reinterpret-cast-be-used "这")，但它并没有真正提供任何具体的例子。我假设大多数示例将涉及多态类类型。目前我知道在 static_cast 上使用 dynamic_cast 的唯一原因是如果我不能 100% 确定我正在使用的具体类型。

其他一些想法：

*   横向转换（在多重继承中）
*   在虚拟继承层次结构中转换为基类
*   在使用多重继承的类中转换为“最正确”的继承类型时，指针是否会改变（如果使用 static_cast）？

“如果类型未知”的原因是唯一的原因吗？如果没有，有人可以提供示例来说明为什么必须或应该在 static_cast 上使用 dynamic_cast 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T16:37:08.710

一般来说，`dynamic_cast`在层次结构中转换时应该使用，无论如何。一个可能的例外是从派生类转换为基类（当然是指针或引用）。`static_cast`否则，您在层次结构中使用的唯一时间是分析器说您必须使用的时候。

`static_cast`更常用于与 a 相互转换`void*`，或确保空指针常量的类型正确，或用于不涉及指针或引用的转换（例如 `static_cast<double>( someInt )`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T16:47:41.123

`dynamic_cast`即使您知道动态类型也必须使用的一种情况是从*虚拟*基转换为派生更多的类型时：

```
struct A { };
struct B : virtual A { };
struct C : virtual A { };
struct D : B, C { };

A * p = new D;
D * q = dynamic_cast<D*>(p); 
```

原因当然是虚拟基础只在运行时确定。

的另一个用途`dynamic_cast`是通过强制转换来发现派生最多的对象的地址[to`void*`](https://stackoverflow.com/q/8123776/596781)，尽管这是否是必要的语言特性尚不完全清楚。（我设法[设计了一个用例](https://stackoverflow.com/a/11885604/596781)，但它主要是学术性的。）

# django - Nginx 和 uWSGI 剥离 HTTP_AUTHORIZATION

> ID：12677335
> 
> 赞同：4
> 
> 时间：2012-10-01T16:32:08.823
> 
> 标签：django, nginx, uwsgi

我正在使用 API，似乎 Nginx 和 uWSGI 正在删除我传递的 HTTP_AUTHORIZATION 标头。

我将 curl POST 发送到运行 Django 的 API 服务器。当我让 Django 打印出 request.META 列表时，我看到 HTTP_AUTHORIZATION 丢失了。

Nginx 配置包含这些：

```
uwsgi_pass_header HTTP_AUTHORIZATION;
uwsgi_pass_request_headers on; 
```

但是做这两个pass似乎没有任何影响。

知道为什么会有这种剥离......它发生在 Nginx 级别、uWSGI 级别还是 Django 级别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T20:44:05.303

尝试将下划线更改为 curl 帖子中`HTTP_AUTHORIZATION`的破折号`HTTP-AUTHORIZATION`。

默认情况下，nginx 将带有下划线的标头标记为无效并忽略无效标头。

您可以使用 nginx 指令来允许标头中使用下划线`underscores_in_headers on;`或不忽略带有`ignore_invalid_headers off;`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-11-03T00:00:30.370

我有一个类似的问题，并将以下设置添加到我的 nginx 配置的位置部分：

```
uwsgi_pass_header Authorization;
uwsgi_pass_request_headers on; 
```

请注意我使用的值`uwsgi_pass_header`是`Authorization`.

使用这些设置，我的应用程序开始接收身份验证标头，而不会来自 nginx 的警告。

# c - matlab c s函数的数组输出

> ID：12677340
> 
> 赞同：0
> 
> 时间：2012-10-01T16:32:21.490
> 
> 标签：c, matlab

我一直在为 simulink 编写一个 c s-function 块。我希望我的输出作为一个数组

```
//
FILE *datafile;      
datafile = fopen("datafile.dat","r");
pwork[0] =  datafile;

//

//
static void mdlOutputs(SimStruct *S, int_T tid)
{
    real_T       *y = ssGetOutputPortSignal(S,0);
    real_T *a;
    real_T *b;
    real_T *c;
    void** pwork = ssGetPWork(S);
    fscanf(pwork[0],"%f %f %f",y[0],y[1],y[2]);

}
// 
```

但它不是那样工作的。我想问题在于分配 y[1] 和 y[2]..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T16:51:22.200

我不了解 Matlab，但我知道`scanf`调用的参数应该是*指针*，除非`real_T`已经将类型定义为指针，否则它将不起作用。

此外，您正在使用`fscanf`which 来读取`FILE`指针。

我不知道这是否可行，请尝试以下方法：

```
sscanf(pwork[0], "%f %f %f", &y[0], &y[1], &y[2]); 
```

# titanium - 如何在 Titanium studio iPhone 应用程序中更改应用程序的显示名称？

> ID：12677345
> 
> 赞同：1
> 
> 时间：2012-10-01T16:32:38.840
> 
> 标签：titanium

考虑到我已将我的新钛 iPhone 项目命名为`MyApp`. 所以我的应用程序图标下的名称显示为`MyApp`，现在我想将其更改为`MyApp1`。

我如何实现这一目标？

我尝试在 tiapp.xml 文件中重命名名称标签，但它没有用。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T18:16:06.980

我很确定这就是您更改名称的方式。编辑`tiapp.xml`名称后，转到`Project > Clean`并选择项目。然后重建。另一种选择是使用您想要的名称创建一个新项目并复制资源目录。

# javascript - 无法访问任何 XPCOM 组件

> ID：12677348
> 
> 赞同：3
> 
> 时间：2012-10-01T16:32:52.393
> 
> 标签：javascript, firefox-addon, xul, xpcom

我正在学习 XPCOM 上的 XUL School 入门。我在访问组件时遇到问题。无论我尝试访问什么组件，例如（来自 MDN）：

```
// xpconnect to cookiemanager
// get the cookie manager component in JavaScript
var cmgr = Components.classes["@mozilla.org/cookiemanager;1"].getService();
cmgr = cmgr.QueryInterface(Components.interfaces.nsICookieManager); 
```

我不断收到错误“TypeError：Components.classes 未定义。”。其他地方说这可能是其他附加组件有问题的问题，所以我在安全模式下重新启动了 Firefox，但我仍然遇到了这个问题。

这里的其他问题似乎与此类似，说明组件需要在清单文件中注册；但是，这些似乎是指用户添加的组件。这是这里的情况吗？我究竟做错了什么？

编辑：我安装了 XPCOMViewer，我可以看到组件在那里。当我使用 XPCOMViewer 生成 JavaScript 来访问组件时，它提供的内容与我在上面发布的完全相同。这里到底发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:55:02.280

试试这个：

```
const {Cc,Ci,Cu} = require("chrome");
var cmgr = Cc["@mozilla.org/cookiemanager;1"].getService();
cmgr = cmgr.QueryInterface(Ci.nsICookieManager); 
```

# qt - 孩子面前的父母 qwidget

> ID：12677352
> 
> 赞同：0
> 
> 时间：2012-10-01T16:33:10.840
> 
> 标签：qt, operating-system

我有一个带有几个 qwidget 的程序，每个都是一个单独的窗口，每个都是同一个 qmainwindow 的子窗口。

如果我单击它，我希望父窗口位于其他窗口的前面（就像任何操作系统上的通常行为一样）。它适用于 X11，但不适用于 Windows 和 OSX。

我应该怎么办 ？

顺便说一句，在 X11 上，所有不同的窗口都分别出现在任务栏中（在 Windows 上不是这种情况）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:01:54.200

您应该使用[QMdiArea](http://doc.qt.digia.com/4.7-snapshot/qmdiarea.html)。可以在[此处](http://doc.qt.digia.com/4.7-snapshot/mainwindows-mdi.html)或[此处](http://www.codeprogress.com/cpp/libraries/qt/qtClasses.php?item=QMdiArea)找到示例应用程序。

# django - 是否可以通过 South 数据迁移来迁移 Django 内置模型（例如 auth.user）？

> ID：12677354
> 
> 赞同：2
> 
> 时间：2012-10-01T16:33:20.337
> 
> 标签：django, django-south

我必须更新 Django 应用程序中的 auth.user 记录以翻转某些用户的“is_staff”位。我*可以*使用 SQL 脚本来执行此操作，但如果我可以使用 South 数据迁移会更方便。

但是，每当我尝试执行`manage.py datamigration auth whatever`South 时，都会在`lib/python2.7/site-packages/django/contrib/auth/migrations`. 这是否意味着无法使用南数据迁移来迁移用户数据？还是我缺少某种解决方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T17:08:26.393

是的，这可以使用以下`SOUTH_MIGRATION_MODULES`设置：[http ://south.readthedocs.org/en/0.7.6/settings.html#south-migration-modules](http://south.readthedocs.org/en/0.7.6/settings.html#south-migration-modules)

> 应用程序的替代迁移模块字典。默认情况下，应用程序会在“.migrations”中查找它们的迁移，但如果您有特定于项目的迁移集，您可以在此处覆盖它。

例如

```
SOUTH_MIGRATION_MODULES = {
    'auth': 'myproject.migrations.auth',
} 
```

# objective-c - 更改窗口背景颜色

> ID：12677356
> 
> 赞同：1
> 
> 时间：2012-10-01T16:34:07.643
> 
> 标签：objective-c, macos, cocoa

我想每秒更改一次窗口的背景颜色，所以这是我的代码：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(newColor) userInfo:nil repeats:YES];
}

-(void)newColor {
    int r;
    r = (arc4random()%250)+1;
    NSLog(@"%i", r);

    int g;
    g = (arc4random()%250)+1;
    NSLog(@"%i", g);

    int b;
    b = (arc4random()%250)+1;
    NSLog(@"%i", b);

    NSColor *theColor = [NSColor colorWithDeviceRed:(int)r green:(int)g blue:(int)b alpha:(float)1.0];
    [_window setBackgroundColor:theColor];
} 
```

我认为我的问题在于用变量定义颜色，但我不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:57:18.640

我建议您进行以下更改..

```
#define ARC4RANDOM_MAX      0x100000000

-(void)newColor:(NSTimer *)sender {
//Give your void an NSTimer argument so you have to ability to invalidate the timer if you ever want to.
    float r = ((float)arc4random() / ARC4RANDOM_MAX);
    float g = ((float)arc4random() / ARC4RANDOM_MAX);
    float b = ((float)arc4random() / ARC4RANDOM_MAX);

//These will generate random floats between zero and one. NSColor wants floats between zero and one, not ints between 0-255.

    NSLog(@"R: %f | G: %f | B: %f",r,g,b);

    if (r >= 0.5 && g >= 0.5 && b >= 0.5) {
        [sender invalidate];
    }
//Example of invalidating sender

    NSColor *theColor = [NSColor colorWithDeviceRed:r green:g blue:b alpha:1.0f];
    [_window setBackgroundColor:theColor];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:08:29.903

只需如下更改您的`newColor`方法

```
-(void)newColor
{
    int r;
    r = (arc4random()%250)+1;
    NSLog(@"%i", r);

    int g;
    g = (arc4random()%250)+1;
    NSLog(@"%i", g);

    int b;
    b = (arc4random()%250)+1;
    NSLog(@"%i", b);

    float red = (float)r/255;
    float blue = (float)b/255;
    float green = (float)g/255;

    NSLog(@"red-%f, blue-%f, green-%f",red, blue, green);
    NSColor *theColor = [NSColor colorWithDeviceRed green:green blue:blue alpha:1.0];
    [_window setBackgroundColor:theColor];
} 
```

# javascript - HTML5 Canvas 可调整大小的多边形

> ID：12677361
> 
> 赞同：0
> 
> 时间：2012-10-01T16:34:36.733
> 
> 标签：javascript, html, mobile, canvas

我需要一个基于屏幕宽度/高度调整大小的对角多边形颜色填充。这里的绿色背景填充：[http](http://rhiwifi.co/bus) ://rhiwifi.co/bus是一个使用旋转 DIV 的原型。该 DIV 是屏幕的 200%，因此它超出了移动界面的边界，并且没有正确填充屏幕底部。

如何绘制一个可调整大小的多边形，顶部是对角线，底部是矩形？或者有没有更简单的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T16:48:27.517

我只是将纵坐标存储为比例值，而不是绝对像素。

也就是说，我会使用 [0..1] 范围内的数字来定义一个点。然后，您只需将其乘以画布尺寸即可获得像素尺寸。

例如，您想绘制一个占据画布左上角 1/4 的矩形，因此定义它：“0,0,0.5,0.5” - 然后您可以根据逗号拆分为一个数组。然后，您可以将数组中的每个元素乘以画布大小，以获得最终坐标。

例如，2d OpenGL 视口使用标准化坐标，其中 0,0 是屏幕的中心，-1,-1 是左上角，1,1 是右下角。这样，openGL 只需乘以窗口大小即可获得像素值。

# ruby-on-rails - 我应该先学习 ruby 还是直接使用 ruby on rails 以希望自动获得基础知识？

> ID：12677363
> 
> 赞同：0
> 
> 时间：2012-10-01T16:34:43.050
> 
> 标签：ruby-on-rails, ruby

我应该先学习 ruby​​ 还是直接使用 ruby​​ on rails 以希望自动获得基础知识？在接下来的 2 个月里，我需要用 ruby​​ 扩展一个项目，我的背景是 7 年的 PHP 开发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T16:37:40.413

要熟悉 ruby​​（并且为了好玩），一定要阅读[Why's (poignant) guide to ruby](http://mislav.uniqpath.com/poignant-guide/)​​ 。然后潜入 Rails 并查看[Ryan Bates 的 Railscasts](http://railscasts.com/)上的精彩视频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:07:02.567

绝对是Ruby优先。然后它可能会变成你不需要Rails :)

在学习过程中，您需要了解您的代码在各种 Ruby 版本上的表现。

您当然可以使用 RVM 或 rbenv，但是您可以直接在浏览器中运行您的代码。

请参阅[CIBox.org](http://cibox.org/)。

**免责声明：**我是 CIBox.org 的作者。请不要将此视为广告:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T16:42:02.923

Ruby first [http://tryruby.org](http://tryruby.org)这是一个交互式 ruby​​ 学习工具。

然后是 Rails For Zombies 或 Railstutorial.org

# ios - 为每个 UITableViewCell 设置 UIButton.imageView.image

> ID：12677364
> 
> 赞同：0
> 
> 时间：2012-10-01T16:34:45.813
> 
> 标签：ios, xcode, uitableview

我使用界面生成器创建了一个自定义单元格，它有两个标签和一个 UIButton。我在 cellForRowAtIndexPath 或 willDisplayCell 中设置每个标签的文本没有问题。但是，设置 UIButton 的图像在任何地方都有问题。我认为这些问题与我不完全理解的单元重用/缓存有关。

这是我当前主要使用 willDisplayCell 的代码，但我也尝试将大部分代码移动到 cellForRowAtIndexPath 并获得相同的结果：

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
    UIButton *check = (UIButton*) [cell.contentView viewWithTag:1];
    UIButton *check2 = (UIButton*) [cell.selectedBackgroundView viewWithTag:1];
    UILabel *from = (UILabel*) [cell.contentView viewWithTag:2];
    UILabel *subject = (UILabel*) [cell.contentView viewWithTag:3];

    // Configure the cell...
    Message *rec = (Message*) Records[indexPath.row];
    if(rec.Checked)
        check.imageView.image = [UIImage imageNamed:@"Checkedbox.png"];
    else
        check.imageView.image = [UIImage imageNamed:@"Checkbox.png"];
    check2.imageView.image = check.imageView.image;
    from.text = rec.From;
    subject.text = rec.Subject;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
    return cell;
} 
```

在上面的代码中，check2 为 nil，我也尝试过不使用它，但最近才添加它作为修复的尝试。

我基本上是在构建一个消息列表（收件箱）并想要像 GMail 这样的复选框。在复选框按钮的单击事件中，我有：

```
- (IBAction)CheckClicked:(id)sender
{
    UITableViewCell *cell = (UITableViewCell*) [[sender superview] superview];
    NSIndexPath *indexPath = [[self tableView] indexPathForCell:cell];
    Message *rec = (Message*) Records[indexPath.row];
    rec.Checked = !rec.Checked;
    [cell setNeedsLayout];
    [cell.contentView setNeedsLayout];
    [cell setNeedsDisplay];
    [cell.contentView setNeedsDisplay];
    [self.tableView reloadData];
} 
```

我知道上面所有的 setNeedsLayout 和 setNeedsDisplay 调用都是多余的，我主要只是让它们在那里显示什么不起作用。只有 reloadData 至少会重绘/刷新每个单元格，即使大多数示例说单元格上的 setNeedsLayout 应该有效。

单击时复选框会正确更改，但是如果我选中一个单元格，然后单击以突出显示该单元格，则未选中该复选框，直到视图滚动到屏幕外然后返回。我认为问题与选定与未选定的视图不同有关，但除此之外不知道要检查什么。

**编辑：**由于大多数教程使用与此类似的代码，这也是我也尝试过的，但在这种用法中，图像永远不会改变，直到单元格滚动并返回屏幕，即使我可以设置断点并看到 cellForRowAtIndexPath 正在在我的点击事件中调用 reloadData 后再次调用每个单元格，并且它正确地将图像设置为检查我检查的项目：

```
- (IBAction)CheckClicked:(id)sender
{
    UITableViewCell *cell = (UITableViewCell*) [[sender superview] superview];
    NSIndexPath *indexPath = [[self tableView] indexPathForCell:cell];
    Message *rec = (Message*) Records[indexPath.row];
    rec.Checked = !rec.Checked;
    [self.tableView reloadData];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
    // NOTE: In my testing cell is never NULL, so I have no checking here.

    UIButton *check = (UIButton*) [cell.contentView viewWithTag:1];
    UILabel *from = (UILabel*) [cell.contentView viewWithTag:2];
    UILabel *subject = (UILabel*) [cell.contentView viewWithTag:3];

    // Configure the cell...
    Message *rec = (Message*) Records[indexPath.row];
    if(rec.Checked)
        check.imageView.image = [UIImage imageNamed:@"Checkedbox.png"];
    else
        check.imageView.image = [UIImage imageNamed:@"Checkbox.png"];
    from.text = rec.From;
    subject.text = rec.Subject;

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:12:05.030

不确定这是否是一个好的答案，但它似乎有效，也许是 Apple 想要的方式。

我从另一个 SO answer [UITableViewCell Reuse and Images Re-render](https://stackoverflow.com/questions/11232992/uitableviewcell-reuse-and-images-re-render?rq=1)那里得到了这个想法，他们为每种不同的样式使用了多个原型。

因此，我在 IB 中创建了 2 个原型单元，一个带有选中的图像，一个带有未选中的图像。然后将我的代码更新为：

```
- (IBAction)CheckClicked:(id)sender
{
    UITableViewCell *cell = (UITableViewCell*) [[sender superview] superview];
    NSIndexPath *indexPath = [[self tableView] indexPathForCell:cell];
    Message *rec = (Message*) Records[indexPath.row];
    rec.Checked = !rec.Checked;
    [self.tableView reloadData];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    Message *rec = (Message*) Records[indexPath.row];

    UITableViewCell *cell;
    if(rec.Checked)
        cell = [tableView dequeueReusableCellWithIdentifier:@"CheckedCell"];
    else
        cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];

    UILabel *from = (UILabel*) [cell.contentView viewWithTag:2];
    UILabel *subject = (UILabel*) [cell.contentView viewWithTag:3];

    from.text = rec.From;
    subject.text = rec.Subject;

    return cell;
} 
```

我能想到的是“重用”单元格支持某些更改，但不支持其他更改。所以它支持 UILabel 控件中的不同文本，但不支持 UIButton 控件中的不同图像。我读过有人发现背景颜色和字体样式等某些属性存在问题，所以也许这只是这些方面的另一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T16:42:32.863

你有没有尝试过

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = nil;
    // Try to dequeue
    cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
    // If nothing to dequeue, create your CustomCell
    if(!cell){
        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:nil options:nil];
        for(id currentObject in topLevelObjects){
            if([currentObject isKindOfClass:[CustomCell class]]){
                cell = (CustomCell *)currentObject;
                break;
            }
        }
    }
    UIButton *check = (UIButton*) [cell.contentView viewWithTag:1];
    UIButton *check2 = (UIButton*) [cell.selectedBackgroundView viewWithTag:1];
    UILabel *from = (UILabel*) [cell.contentView viewWithTag:2];
    UILabel *subject = (UILabel*) [cell.contentView viewWithTag:3];

    // Configure the cell...
    Message *rec = (Message*) Records[indexPath.row];
    if(rec.Checked)
        check.imageView.image = [UIImage imageNamed:@"Checkedbox.png"];
    else
        check.imageView.image = [UIImage imageNamed:@"Checkbox.png"];
    check2.imageView.image = check.imageView.image;
    from.text = rec.From;
    subject.text = rec.Subject;
    return cell;
} 
```

不使用`tableView:willDisplayCell:forRowAtIndexPath:`？然后在每次单击时`[self.tableView reloadData];`调用，导致 tableView 刷新并调用`cellForRowAtIndexPath:`所有可见的索引路径...

# actionscript-3 - flash：绘图和擦除

> ID：12677367
> 
> 赞同：0
> 
> 时间：2012-10-01T16:34:58.153
> 
> 标签：actionscript-3, flash

我正在为我的 Flash 应用程序开发一个实时图形编辑器。在编辑器 T 中有绘图和擦除工具。绘图是在单独的绘图层上组织的。在鼠标移动时，坐标被推入向量。最后用户释放鼠标后，绘图层被清除，曲线在显示区域被绘制。擦除以相同的方式完成。有一个擦除层：带有`blendMode=BlendMode.ERASE`（显示区域`blendMode=BlendMode.LAYER`）的精灵作为子元素添加到显示区域。擦除没问题，我在擦除层上画曲线。

但是这里我有一个明显的问题：如果擦除层上有东西我会画，擦除区域将保持擦除。所以，在我在显示层上画了一些东西之后，我试图在擦除层上画出透明度：

```
eraseLayer.graphics.lineStyle(thickness, 0, 0);
eraseLayer.graphics.drawPath(....); 
```

在那之后，图像的一部分仍然被擦除。问题是我如何“绘制”透明度？

先感谢您！

**UPD：**请注意，在这里处理位图不是一个选项，因为我需要进行缩放。

**UPD2：**仍然擦除层可以是位图

# eclipse - 在 Eclipse 启动时禁用插件

> ID：12677369
> 
> 赞同：12
> 
> 时间：2012-10-01T16:35:11.487
> 
> 标签：eclipse, plugins, startup, metrics

我刚刚为 Eclipse 安装了一个插件，但结果 Eclipse 将不再启动。它说“有一个错误”或一些这样的无用信息。

如何在不加载插件的情况下启动 Eclipse，以便实际卸载有问题的软件？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-01T22:57:06.660

正如另一个人提到的，您可以尝试 -clean 选项。但是，如果它仍然无法加载并且您需要恢复安装，则不应**简单**地删除磁盘上的插件。如果 Eclipse 认为有一个插件，然后突然将其删除，那么您将来会遇到各种各样的问题。

最好的方法是使用 Eclipse 导向器（一个管理应用程序）来恢复您的安装（它随 Eclipse 一起安装）。您需要知道要恢复到以前的修订版本。您可以在 /p2/org.eclipse.p2.engine/profileRegistry/ 中查看 Eclipse 安装的所有先前版本，其中配置文件名称可能类似于 SDKProfile。在这里，您将看到许多配置文件。每一个都代表 Eclipse 安装的前一个状态。找到您想要恢复到的修订版（它们都应该有时间戳），然后从 Eclipse 的根目录执行以下命令：

./eclipse -application org.eclipse.equinox.p2.director -revert 1611571876423 -repository [https://download.eclipse.org/releases/2020-12](https://download.eclipse.org/releases/2020-12)

显然，将修订版替换为您也想恢复的修订版。这就是说，请将我的 Eclipse 安装恢复为 1611571876423，如果您需要任何依赖项，请查看 [https://download.eclipse.org/releases/2020-12（Eclipse](https://download.eclipse.org/releases/2020-12) 4.18）。如果您为不同版本的 Eclipse 执行此操作，请根据需要更改 URL。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-01T22:42:19.820

尝试使用该`-clean`选项启动 Eclipse。

或者尝试~~删除~~移动管脚和特征。

发布错误消息比“出现错误”更有用。查看日志文件或尝试从控制台开始并在此处发布错误消息。

编辑：Irbull 是对的。当然不要删除文件，只需将它们移动到另一个目录中，以便您可以将它们移回。他的解决方案听起来很有帮助，而且更加专业。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-10-11T19:44:52.040

检查 Eclipse Indigo 设置的这个图像：

![Eclipse 靛蓝设置](../Images/d6fe90bddfbecccf41a7ea7e95bda49e.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-01T16:45:38.503

您可以尝试从插件目录中移动插件。我不认为有任何“安全模式”的方式来启动 Eclipse。

一旦您可以启动到 Eclipse，您可以通过转到帮助/关于 Eclipse/已安装的软件/安装历史记录来单独禁用插件并恢复您的安装。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-08-23T20:40:49.497

如果您非常确定应该删除什么，您应该尝试的第一种方法就是删除相关的 jar。我已经尝试过这种方法来删除一堆难以摆脱的邪恶插件。一定要为那些你要删除的人准备一个面包

# c++ - 数据断点会影响 Visual Studio 中的编译代码吗？

> ID：12677370
> 
> 赞同：2
> 
> 时间：2012-10-01T16:35:11.400
> 
> 标签：c++, visual-studio-2010, debugging, breakpoints

我知道插入普通断点可以稍微改变编译的代码，但数据断点也是如此吗？我看不出它们如何在逻辑上与代码“内联”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T16:41:23.377

据我所知，断点并没有改变编译的代码，普通的断点或数据断点都没有。

该程序正在使用编译器进行编译，然后调试器使用已编译的可执行文件运行。

被更改的代码是内存中的代码。调试器将可执行文件加载到内存并在那里更改代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T17:05:34.393

如果您指的是“变量监视”或“内存断点”，您要求调试器在变量或内存区域发生更改时中断，那么这是通过要求您的 CPU 监视该内存地址来实现的/所有写访问的范围，并闯入调试器以让它决定是否中断每次写入。（我不知道 CPU/调试器是如何实现这一点的，只是它确实做到了）。

这不会修改内存的内容或内存中的可执行代码。

# python - Django中复杂多模型查询的优化

> ID：12677371
> 
> 赞同：0
> 
> 时间：2012-10-01T16:35:14.930
> 
> 标签：python, django, django-models, many-to-many, django-orm

我需要轻松控制在哪个站点上显示哪些产品，并且由于产品很多，我还想通过类别、生产商和标签设置产品站点。因此，如果产品 OR（其类别及其生产者及其一个标签）链接到该站点，我会在该站点上显示该产品。我最终得到的代码如下（简化）：

```
from django.db.models import Model, ManyToManyField, ForeignKey, BooleanField

class Site(Model):
    enabled = BooleanField()

class Producer(Model):
    sites = ManyToManyField(Site)

class Category(Model):
    sites = ManyToManyField(Site)

class Tag(Model):
    sites = ManyToManyField(Site)

class Product(Model):
    producer = ForeignKey(Producer)
    category = ForeignKey(Category)
    tags     = ManyToManyField(Tag)
    sites    = ManyToManyField(Site)

    def get_site_ids(self):
        if self.sites.exists():
            return list(self.sites.values_list('id', flat=True))
        else:
            p = list(self.producer.sites.values_list('id', flat=True))
            c = list(self.category.sites.values_list('id', flat=True))
            t = sum([list(tag.sites.values_list('id', flat=True)) for tag in self.tags.all()], [])
            ids = set.intersection(set(p), set(c), set(t))
            return ids 
```

我的问题是如何优化`get_sites`方法？是否可以加入一些查询？

* * *

更新：我只对将由搜索引擎索引和存储的站点 ID 感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:13:23.240

`select_related`是的，您可以使用和/或减少 Django 中的查询数量`prefetch_related`。

但是，`select_related`仅适用于外键和一对一关系。由于您的 Product 模型中有 ManyToMany，因此您应该使用它[`prefetch_related`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#prefetch-related)来减少 Product.get_sites() 中的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T16:51:48.613

You should try and do everything you want to do on the database level if possible. Something like this should get you started.

```
from django.db.models import Sum
self.objects.select_related("producer__sites",
                            "category__sites",
                            "tags__sites",
                            "sites").annotate(tag_count=Sum("tags__sites__id")) 
```

`select_related` returns the `Product` model with the producer, category, tags and sites references filled. This also includes the `sites` reference in producer, category and tags. This make Django do less queries to the database.

`annotate` adds an attribute to the returned `Model` instance named `tag_count` that has the Sum of tags_*sites*_id in it.

The Django [QuerySet Reference](https://docs.djangoproject.com/en/dev/ref/models/querysets/) might be a good help because I don't know the exact nature of what you want to have returned.

# ios - -[__NSCFDictionary setObject:forKey:]：变异方法发送到不可变对象

> ID：12677373
> 
> 赞同：4
> 
> 时间：2012-10-01T16:35:19.500
> 
> 标签：ios, nsmutabledictionary

运行以下代码时，`[dict setValue:@"null" forKey:@"name"];`不断崩溃。我在这里搜索，发现其他帖子是由不使用`NSMutableDictionary`. 但是我正在使用这个。

`name`如果是，为什么它会在这条线上崩溃`null`？

```
NSMutableArray *tempCustomers = [[NSMutableArray alloc] init];
for (NSMutableDictionary *dict in [[json objectForKey:@"data"] mutableCopy]) {
    if ([dict objectForKey:@"name"] == [NSNull null]) {
        [dict setValue:@"null" forKey:@"name"];
    }
    [tempCustomers addObject:dict];
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-01T17:10:51.727

我最终使用了这个。我猜这就是**deepMutableCopy**是什么？

```
NSMutableArray *tempCustomers = [[NSMutableArray alloc] init];
for (NSMutableDictionary *dict in [[json objectForKey:@"data"] mutableCopy]) {
    if ([dict objectForKey:@"name"] == [NSNull null]) {
        NSMutableDictionary *tempDict = [[NSMutableDictionary alloc] init];
        tempDict = [dict mutableCopy];

        [tempDict setValue:@"null" forKey:@"name"];
        [tempCustomers addObject:tempDict];
    } else {
        [tempCustomers addObject:dict];
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T17:01:25.127

也许 mutableCopy 不是“deepMutableCopy”，我的意思是，你只是枚举了可变对象，但是这个集合中的对象不是可变的（从我的评论中复制）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-18T08:31:33.613

创建新数组`[[NSMutableArray alloc]initWithArray:[json objectForKey:@"data"]]`并在 for 循环中使用它

而是在`[json objectForKey:@"data"]`将其替换为新阵列时运行。它应该是这样的：

```
NSMutableArray *tempCustomers = [[NSMutableArray alloc] init];
NSMutableArray *search = [[NSMutableArray alloc]initWithArray:[json objectForKey:@"data"]];
for (NSMutableDictionary *dict in search)
{
    if ([dict objectForKey:@"name"] == [NSNull null])
    {
        [dict setValue:@"null" forKey:@"name"];
    }
    [tempCustomers addObject:dict];
} 
```

# delegates - 委托方法上的 Resharper 注释？

> ID：12677376
> 
> 赞同：5
> 
> 时间：2012-10-01T16:35:30.373
> 
> 标签：delegates, annotations, resharper

我正在尝试为 Commons.Logging 创建外部注释文件。它实际上是 log4net 配置的直接副本，但让我感到困惑的是如何用适当的方式装饰以下代码[`StringFormatMethodAttribute`](http://www.jetbrains.com/resharper/webhelp/Code_Analysis__String_Formatting_Methods.html)：

```
public interface ILog
{
  void Error(Action<FormatMessageHandler> formatMessageCallback);
}

public delegate string FormatMessageHandler(string format, params object[] args);

// usage
log.Error(m => m(
  "my expensive to calculate argument is: {0}",
    CalculateMessageInfo()) ); 
```

该属性仅对构造函数和方法有效，有没有办法将它强制到这个用例上？

# post - 在 Elgg 的博客文章页面中添加更多信息

> ID：12677382
> 
> 赞同：0
> 
> 时间：2012-10-01T16:35:49.827
> 
> 标签：post, blogs, elgg

我需要你宝贵的帮助。例如，如果我想在博客文章页面中显示描述和带有标签的摘录，我该怎么办？默认情况下，我只能看到一个信息。

在 /mod/blog/views/default/object/blog.php 我发现了这个：

如果 ($full) {

$body = elgg_view('output/longtext', array( 'value' => $blog->description, // 它只显示描述（如果我输入 "excertp" 它会显示摘录） 'class' => 'blog-邮政'， ））;

如何添加其他信息和标签作为摘录，例如，显示？

太感谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T21:56:59.033

你有两个选择：

1.  扩展视图
2.  覆盖视图

在您的情况下，我建议您覆盖视图（编辑核心文件绝不是一个好主意！）

我建议查看 Elgg 的视图文档：

[http://docs.elgg.org/wiki/Engine/Views#Overriding_views_in_plugins](http://docs.elgg.org/wiki/Engine/Views#Overriding_views_in_plugins)

请参阅有关在插件中覆盖视图的部分。

您基本上需要创建一个新插件，我们称之为“blogtweaks”。

（有关插件开发的更多信息，请参见：[http](http://docs.elgg.org/wiki/Plugin_development) ://docs.elgg.org/wiki/Plugin_development ）

然后，在以下位置创建您的自定义视图文件：

```
/mod/blogtweaks/views/default/object/blog.php 
```

此文件的内容将覆盖原始内容，因此只需复制原始博客视图 (/mod/blog/views/default/object/blog.php) 的内容，然后编辑到您喜欢的内容。

# dropbox - 在 delta API 中获取大量条目

> ID：12677384
> 
> 赞同：1
> 
> 时间：2012-10-01T16:36:13.913
> 
> 标签：dropbox, dropbox-api, dropbox-php, chdropboxsync

我有一个应用程序，我在其中使用 delta API 来跟上用户的元数据更改。我有一个用户，我得到了很多条目，并且光标不断变化。已经 2 天了，我仍然在不断获得新的光标，它的“has_more”为真。到目前为止，我已经处理了大约 400,000 个条目，只有 17,000 个条目是带有元数据的条目，所有其他条目都是删除条目。

这是正常行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T04:09:26.393

您应该访问[https://www.dropbox.com/developers](https://www.dropbox.com/developers)并单击`API Support`以报告此问题。这似乎应该优化。

# jquery - jQuery图像滑块标题问题，显示错误

> ID：12677389
> 
> 赞同：0
> 
> 时间：2012-10-01T16:36:36.480
> 
> 标签：jquery, slider, image-gallery

我几乎让它工作了，只是第一个和第二个标题搞砸了，我不知道为什么！我玩过 if 语句和 :visible 选择器等，看看是什么让它发生了变化，但无法理解。
你可以看到我的意思这个小提琴：jsfiddle.net/MrLuke/QSj4k/33

如果它显示第一个标题，但第二个不会显示，或者它将显示第三个标题代替第二个标题，并显示它第三个。这让我很困惑。似乎第一个和第二个标题搞砸了，之后的任何其他标题都会正确显示。

```
//DISPLAY OR HIDE FIRST CAPTION
var title = $('.slide:not("first")').children('img').attr('title');
if (title == "") {
    $('#slide_caption').fadeOut(); //HIDE CAPTION IF NO ALT TEXT
} else {
    $('#slide_caption').fadeIn();
    $('#slide_caption').html('<span>' + title + '</span>'); //SHOW ALT TEXT CAPTION
}

(function imageTransition() {
setTimeout(function() {
    $('.slide:visible').fadeOut("slow"); // FADE OUT VISIBLE IMAGE
    if ($('.slide:visible').next('.slide').size("slow") < 1) {
        $('.slide:first').fadeIn(); // FADE IN FIRST IMAGE    

        var title = $('.slide:visible').children('img').attr('title');
        if (title == "") {
            $('#slide_caption').fadeOut(); //HIDE CAPTION IF NO TITLE TEXT
        } else {
            $('#slide_caption').fadeIn();
            $('#slide_caption').html('<span>' + title + '</span>'); 
        }
    } else {
        $('.slide:visible').next('.slide').fadeIn("slow"); // FADE IN NEXT IMAGE 

        var title = $('.slide:visible').next('.slide').children('img').attr('title');
        if (title == "") {
            $('#slide_caption').fadeOut(); //HIDE CAPTION IF NO TITLE TEXT
        } else {
            $('#slide_caption').fadeIn();
            $('#slide_caption').html('<span>' + title + '</span>'); 
        }               

    }

    imageTransition(); //TRIGGER FUNCTION AGAIN
}, Speed); //Xms INTERVAL BEFORE FUNCTION RUNS AGAIN
})(); 
```

这是查看图像是否具有标题属性的部分，然后将其插入到跨度标记之间以显示标题：

```
var title = $('.slide:visible').children('img').attr('title');
        if (title == "") {
            $('#slide_caption').fadeOut(); //HIDE CAPTION IF NO ALT TEXT
        } else {
            $('#slide_caption').fadeIn();
            $('#slide_caption').html('<span>' + title + '</span>'); 
        } 
```

**和 HTML：**

```
<div id="slide_wrapper">

    <p id="slide_controls">
        <span id="prev-but"><img src="http://webbossuk.com/admin/JS/webboss-slider/imgs/but_prev.png" alt="Previous" /></span>
        <span id="next-but"><img src="http://webbossuk.com/admin/JS/webboss-slider/imgs/but_next.png" alt="Next" /></span>
    </p>

<div id="image-container">  

    <div class="slide">
        <img class="slide_img" src="http://www.webbossuk.com/uploads/features_banner_shop.jpg" alt="Slide 1" title="" />
    </div>

    <div class="slide">
        <a href="#">
        <img class="slide_img" src="http://www.webbossuk.com/uploads/features_banner_podcasts.jpg" alt="Slide 2" title="2" />
        </a>
    </div>

    <div class="slide">
        <img class="slide_img" src="http://www.webbossuk.com/uploads/features_banner_page_ed.jpg" alt="Slide 3" title="3" />
    </div>

    <div class="slide">
        <img class="slide_img" src="http://www.webbossuk.com/uploads/features_banner_members.jpg" alt="Slide 4" title="4" />
    </div>

    <div class="slide">
        <img class="slide_img" src="http://www.webbossuk.com/uploads/features_banner_more.jpg" alt="Slide 5" title="5" />
    </div>

    <p id="slide_caption"><span></span></p>
</div>

</div>​ 
```

我已经提到过它，但以防万一，这是查看一个活生生的例子（和问题）[的小提琴](http://jsfiddle.net/MrLuke/QSj4k/33)
谁能明白为什么第一个和第二个标题不像其他标题那样工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:23:25.883

这里

[http://jsfiddle.net/QSj4k/35/](http://jsfiddle.net/QSj4k/35/)

我在第一张幻灯片中添加了标题，在第二张幻灯片中，您有一个锚标签，我删除了它并且它可以工作。我还没有测试第一个标题是空的

刚刚测试了第一次空它的工作原理，你只是有那个额外的锚。由于那个锚 img 不再是 .slide 的 .children()(这是直接的孩子)，所以它不起作用

如果你真的想要锚然后用 .find 替换 .children 就像这里 [http://jsfiddle.net/QSj4k/37/](http://jsfiddle.net/QSj4k/37/)

# android - Android App“回家”后不会重新打开

> ID：12677391
> 
> 赞同：-2
> 
> 时间：2012-10-01T16:36:42.677
> 
> 标签：android, background, android-homebutton

当用户回家时，是否有某种方法可以“杀死”我的应用程序，单击图标不会在按下主页或关闭屏幕后将应用程序带回来。我必须在 eclipse 中重新运行该应用程序才能让它出现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T16:45:08.053

你不应该那样做。而是实现 onStart 和 onResume。请阅读此[线程](https://stackoverflow.com/questions/4553605/difference-between-onstart-and-onresume?rq=1)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T16:41:52.097

试试这两种方法......

**-**使用`System.exit(0)`的`onDestroy()`方法`Activity`。

**-**您可以`finish()`在方法上使用`onDestroy()`方法`Activity`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T19:01:05.220

目前尚不清楚您要做什么，或者出了什么问题。一般来说，当用户回家然后回到您的应用程序时，恢复或重新启动您的应用程序应该没有问题。

是不是你的代码在使用非空参数调用 onCreate() 时崩溃了？

一般来说，您的代码流应该是：

**onCreate**（捆绑保存状态）：如果保存状态为空，则您的活动从头开始。如果非空，它会在之前被杀死后重新启动。savedstate 包应该包含足够的信息，以允许您的活动从中断的地方继续。

**onStart** ()：Activity即将出现在屏幕上。我倾向于不打扰实现这一点。

**onResume** ()：Activity即将开始接受用户输入。这是启用 gps、传感器、后台线程或任何其他可能消耗资源的好时机。如果以上都不适用，那么我不会费心去实现它。

**onSaveInstanceState** (savedstate)：你的活动可能会消失，它可能很快就会被杀死。您必须将足够的信息保存到 savedstate 包中，以便以后重新启动您的应用程序。

**onPause** ()：您的活动即将变为非活动状态。现在是时候关闭你在 onResume() 中启动的任何东西了。**重要提示**：这*可能*是您在应用被终止之前收到的最后一个电话，所以现在是保存任何用户偏好或其他长期状态的时候了。

**onStop** ()：您的活动正在离开屏幕。不能保证这实际上会被调用。出于这个原因，我很少费心去实现它。

**onDestroy** ()：你的活动即将消失。关闭你在 onCreate() 中启动的任何东西。不能保证这实际上会被调用。

# domain-driven-design - 领域驱动设计：服务和验证

> ID：12677396
> 
> 赞同：1
> 
> 时间：2012-10-01T16:36:58.993
> 
> 标签：domain-driven-design

我遵循领域驱动的设计规则来设计一个系统。我对服务、外部系统和验证有疑问。

聚合必须与其他系统的 Web 服务交互以进行验证并提供信息。我不确定允许聚合访问外部单词是否是个好主意。如果我创建一个服务来访问外部服务，我很难强制执行不变量和验证。如果我将所有逻辑都放在聚合中，这听起来不是一个好主意，但这些问题似乎消失了。

为了使问题更容易理解，假设有一个用户聚合，它必须发送一封电子邮件以确保电子邮件正确（在我的实际问题中，我必须与外部 Web 服务进行通信）

```
public class User {
    public User (Long id, String name, String email) {...}
    public changeEmail(String newEmail) {...}
    ...
}

public interface EmailValidatorService {
    /**
    * Sends a test email
    */
    public verifyEmail(String email) throws EmailException;
} 
```

我不确定这是否是一个好主意，或者电子邮件验证逻辑是否应该是用户聚合的一部分。也许它可能是一项服务并且用户聚合可以使用它......但这听起来也不是一个好主意。

如果它是用户聚合的一部分，它将承担额外的责任，如果它是一项服务，我看不到执行域规则的简单方法。¿ 如果开发人员使用 changeEmail 而不通过服务验证它怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T18:56:27.413

您有几个选项可以实现此场景。一种是让处理此特定用例的应用程序服务调用验证功能：

```
class UserService
{
  EmailValidatorService emailValidatorService;
  UserRepository userRepository;

  public void changeUserEmail(string currentEmailAddress, string newEmailAddress)
  {
    var user = this.userRepository.GetByEmail(currentEmailAddress);
    if (user == null)
       throw ...;

    this.emailValidatorService.verifyEmail(newEmailAddress);

    user.changeEmail(newEmailAddress);

    // commit, etc...
  }
} 
```

应用程序服务是注入此类验证规则的方便场所 - 需要调用外部服务或聚合无法轻松访问的服务。更一般地说，应用程序服务可以是一种“后备”机制，用于处理纯 DDD 方法不太适合的情况。此外，无论您使用域模型还是[事务脚本](http://martinfowler.com/eaaCatalog/transactionScript.html)之类的东西，应用程序服务都可以存在。

另一种选择是在 User 类的 changeEmail 方法中为聚合提供验证器：

```
class User
{
  string emailAddress;

  public void changeEmail(string newEmailAddress, EmailValidatorService validator)
  {
    validator.verifyEmail(newEmailAddress);
    this.emailAddress = newEmailAddress;
  }
} 
```

这里的好处是聚合封装了与电子邮件地址更改相关的所有逻辑。因此，客户端代码不能在不提供验证器的情况下更改电子邮件地址——这是应用程序服务方法无法强制执行的。此外，这与通过依赖注入引用验证器服务的用户聚合不同，后者通常不受欢迎。相反，这是一种即时依赖注入。

在此特定场景中要考虑的另一件事是您希望执行的验证的性质。一个特点是，如果一个电子邮件地址在某一时刻有效，那么它将来可能不再有效。这意味着您已经需要制定工作流程来处理具有无效电子邮件地址的现有用户。如果该逻辑已经存在，为什么还要费心确保域中的验证呢？毕竟，即使验证器服务确保电子邮件地址有效且处于活动状态，也不能保证用户会访问它。

# sql - 一个 SQL 查询中不同结果的多个 WHERE 条件

> ID：12677400
> 
> 赞同：-1
> 
> 时间：2012-10-01T16:37:04.653
> 
> 标签：sql, count

将 3 个 SQL 查询组合成一个返回我想要的所有内容的简单查询时，我遇到了一个大问题。有什么方法可以将这些简单的 sql 查询合并为一个吗？

查询1：

```
SELECT COUNT(FieldID) AS "CountA"
FROM table WHERE Rezervovany = 0 AND Prodany = 0 
```

查询2：

```
SELECT COUNT(FieldID) AS "CountB"
FROM table WHERE Rezervovany = 1 AND Prodany = 0 
```

查询3：

```
SELECT COUNT(FieldID) AS "CountC"
FROM table WHERE Prodany = 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T16:40:37.727

您可以将条件放在聚合函数`case`内的子句中：`count`

```
SELECT Count(CASE 
               WHEN rezervovany = 0 AND prodany = 0 THEN fieldid 
               ELSE NULL 
             END) AS "CountA", 
       Count(CASE 
               WHEN rezervovany = 1 AND prodany = 0 THEN fieldid 
               ELSE NULL 
             END) AS "CountB", 
       Count(CASE 
               WHEN prodany = 1 THEN fieldid 
               ELSE NULL 
             END) AS "CountC" 
FROM   table 
```

请记住，`count`仅计算非空值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T16:38:37.610

如果你想一个接一个地获取行，你可以这样做：

```
SELECT COUNT(FieldID) AS "CountA" FROM table WHERE Rezervovany = 0 AND Prodany = 0
union
SELECT COUNT(FieldID) AS "CountB" FROM table WHERE Rezervovany = 1 AND Prodany = 0
union
SELECT COUNT(FieldID) AS "CountC" FROM table WHERE Prodany = 1 
```

[参考（对于 MySQL）](http://dev.mysql.com/doc/refman/5.0/en/union.html)

# c++ - 具有多个父项的 Qt 树模型

> ID：12677404
> 
> 赞同：4
> 
> 时间：2012-10-01T16:37:28.097
> 
> 标签：c++, qt

我想构建一棵树，其中一个元素可以引用另一个元素。我要构建的树是这样的：

```
A
|--- B
|--- C
|    |--- D
|    |--- E
|
|--- F
     |--- P    //this is a "pointer" to C
          |--- D   //first child of C
          |--- E   //second child of C 
```

我发现[了这个](https://stackoverflow.com/questions/9712559/dag-directed-acyclic-graph-qabstractitemmodel)和[这个](http://www.qtcentre.org/threads/26204-QTreeView-display-of-graph-%28multiple-parents-of-item%29)关于我的问题但是在那里没有找到解决方案。

问题是在我的`QAbstractItemModel`. 复制元素是不可能的，它可能是一个巨大的子树（我也希望它们在改变时保持同步）。

一个项目在模型中可以有多个父级（真正的父级，以及当前指向它的项目），我如何确定当前正确的父级？目前我只有一个`Item*`存储在 中`QModelIndex`，但是当`Item*`当前`D`我无法确定索引是指`D`低于`C`还是低于的元素`P`。

我希望有一些方法可以解决 Qt 项目模型中的一对 N 父子映射。我希望有一些方法可以做到这一点，否则我将需要实现我自己非常想避免的小部件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T16:55:28.750

您不需要为此编写自定义小部件。

一种解决方案是包装您的`Items`，以便模型中的每个条目不仅包含一个`Item*`标记，而且还包含一些标记，以跟踪其在树中的位置。每个节点现在都是一个单独的实体（因此您可以轻松实现`parent()`），但多个节点可以引用同一个`Item`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:14:05.453

对于每个项目，您可以存储一个指向其父项的指针。当您将子节点添加到节点时，您可以将引用`this`作为参数提供给其构造函数，并且您可以将项目的父项设置为该引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T13:02:21.683

谢谢大家，我只实现了一个具有多个父项的树视图。正如 Tom W 所说，将我的模型数据包装到 treeitem 中。

# android - 如何每 30 分钟运行某种重复任务？

> ID：12677408
> 
> 赞同：1
> 
> 时间：2012-10-01T16:37:35.750
> 
> 标签：android, android-asynctask, scheduled-tasks

我需要设置某种重复任务以每 30 分钟运行一次以进行一些检查和更新。

像小部件（属于应用程序的一部分）每 30 分钟更新一次（如果以这种方式设置）。我有一个单独的应用程序，它只是一个小部件，另一个应用程序没有小部件。是否可以在不运行应用程序的情况下每 30 分钟更新一次小部件（例如作为应用程序一部分的小部件）？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T16:50:39.503

我建议使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)并设置重复警报。这是我找到的一些[示例代码。](http://www.java2s.com/Code/Android/Core-Class/Exampleofschedulingoneshotandrepeatingalarms.htm)这是[另一个](http://android-er.blogspot.com/2010/10/schedule-repeating-alarm.html).

# django - 如何在多个基于类的视图中使用相同的上下文变量

> ID：12677410
> 
> 赞同：1
> 
> 时间：2012-10-01T16:37:50.353
> 
> 标签：django, django-views

我想在许多基于类的视图中使用相同的上下文变量，并使用我对 Python 的基本知识，我通过创建超类和使用多重继承来做到这一点：

```
class ContextCommonToManyViews():
    def addToContext(self, context): 
        context['form'] = FormForManyPages()
        context['username'] = self.request.user.username
        context['available_in_many_views'] = something
        return context

class ViewA(ListView, ContextCommonToManyViews):
    model = ModelA

    def get_context_data(self, **kwargs):
        context = super(ViewA, self).get_context_data(**kwargs)
        context = self.addToContext(context)
        context['specific_to_view'] = 'ViewA here'
        return context

class ViewB(ListView, ContextCommonToManyViews):
    model = ModelB

    def get_context_data(self, **kwargs):
        context = super(ViewB, self).get_context_data(**kwargs)
        context = self.addToContext(context)
        context['specific_to_view'] = 'ViewB here'
        return context 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:29:10.037

像这样的 mixin 可能更干净：

```
class ContextCommonToManyViews(object):
    def get_context_data(self, request, **kwargs):
        context = super(ContextCommonToManyViews, self).get_context_data(request, **kwargs)
        context['form'] = FormForManyPages()
        context['username'] = self.request.user.username
        context['available_in_many_views'] = something
        return context

class ViewA(ContextCommonToManyViews, ListView):
    model = ModelA

class ViewB(ContextCommonToManyViews, ListView):
    model = ModelB

    def get_context_data(self, request, **kwargs):
        context = super(ViewB, self).get_context_data(request, **kwargs)
        context.update({'specific_to_B': 'some_value'})
        return context 
```

# php - 移动数组内部指针超过最大执行时间

> ID：12677411
> 
> 赞同：1
> 
> 时间：2012-10-01T16:38:00.473
> 
> 标签：php, arrays, calendar

我正在尝试构建一个显示 3 个迷你日历月的日历系统。上个月，这个月，下个月。

下面的代码应该只是将数组指针移动到当前月份。我以为它在星期五（9 月 28 日）工作，但是今天早上（10 月 1 日）它在日志中导致以下错误： `PHP Fatal error: Maximum execution time of 30 seconds exceeded`

我怀疑这是一个新的月份与它有什么关系，但我正在抓住想法。我希望有人能看到我在这里做错了什么，因为这对我来说都是正确的。

```
$thisMonth = date('m', time());

$arrMonths = array('01' => '一月', '02' => '二月', '03' => '三月', '04' => '四月',
                    '05' => '五月', '06' => '六月', '07' => '七月', '08' => '八月',
                    '09' => '九月', '10' => '十月', '11' => '十一月', '12' => '十二月');

而（键（$arrMonths）！== $thisMonth）
    下一个（$arrMonths）；
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T16:45:17.117

这是因为您使用的是严格的比较运算符：

```
while (key($arrMonths) !== $thisMonth) 
    next($arrMonths); 
```

`!==`正在尝试匹配密钥的类型和内容；在这种情况下，因为您已经用单引号声明了它们，所以您的键是字符串。它无法进行类型比较（您正在将字符串与整数进行比较），因此它进入了无限循环。

要修复它，只需使用更宽松的比较运算符：

```
while (key($arrMonths) != $thisMonth) 
    next($arrMonths); 
```

感谢@MiDo - 我实际上弄错了：

```
the return value of date('m', time()); is a string and the keys are integers when they are >= 10. 
```

# javascript - 正则表达式 URL 必须是格式：http://host.domain/scriptname.extension，没有查询字符串

> ID：12677416
> 
> 赞同：0
> 
> 时间：2012-10-01T16:38:19.837
> 
> 标签：javascript, asp.net, regex, url

URL 必须采用以下形式：[http://host.domain/scriptname.extension](http://host.domain/scriptname.extension)，无查询字符串。即，这是一个有效的 URL：[http://abc.axx.loc:8000/abcd.aspx](http://abc.axx.loc:8000/abcd.aspx)。我试着像下面那样做，但效果不好，有人可以帮忙吗？谢谢。

```
var RegExp = /((h|H)(t|T)(t|T)(p|P)|(h|H)(t|T)(t|T)(p|P)(s|S)):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?\/\w+\.\w+$/; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:46:10.813

这个问题有点模糊，但试试这个：

```
/http:\/\/(\w+)\.(\w+)\/(\w+)\.(\w+)/i 
```

[http://rubular.com/r/Vnoxj11cEC](http://rubular.com/r/Vnoxj11cEC)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T16:46:29.673

尝试以下操作：

```
var RegExp = /^https?:\/\/\w+\.\w+\/\w+\.\w+(:\d+)?$/i 
```

这将在您提供的模型中有效`http`地使用不区分大小写的 url 。`https`

final `i`（它被命名为修饰符）为不区分大小写的技巧做了所有的魔法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T17:31:49.137

```
/((h|H)(t|T)(t|T)(p|P)|(h|H)(t|T)(t|T)(p|P)(s|S)):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?\/\w+\.\w+$/.test("http://abc.axx.loc:8000/abcd.aspx") 
```

工作表。但是，有几点：

*   你不应该命名那个变量`RegExp`- 那是 JS 正则表达式的构造函数，不应该被覆盖
*   使用不区分大小写的正则表达式来绕过那个丑陋的`(h|H)`... 方案
*   `\S+`匹配所有非空白字符，这几乎是 URL 中的所有内容。这可能允许您不想要的查询字符串。
*   你似乎忘记了字符串开始锚点

我建议

```
/^https?:\/\/(\w+(:\w+)?@)?[\w.]+(:\d+)?\/\w+\.\w+$/i 
```

或使用用户登录省略该部分，只允许`@`和`:`在域中：

```
/^https?:\/\/[\w.:@]+\/\w+\.\w+$/i 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-01T16:51:20.917

```
var RegExp = /^https?\/\/[\w\-\.]+(:\d+)?\/[\w\-]+\.[\w\-]+$/i; 
```

注意 // 块 [\w\-\.]+ 用于主机和域组合之后。它应该匹配 host.domain 以及 host.subdomain1.subdomain2.domain 等。

开头和结尾的 ^ 和 $ 很重要，因此它匹配字符串的开头和结尾。

还要注意 \w\- 的使用，因为单独的 \w 是不够的，因为它不捕获破折号。

# javascript - ES5 Strict 作为完全静态范围的语言有什么好处？

> ID：12677423
> 
> 赞同：4
> 
> 时间：2012-10-01T16:38:43.180
> 
> 标签：javascript, ecmascript-5, specifications

与默认语言（ES5 Default）不同，JavaScript 的严格模式（ES5 Strict）提供了使语言完全静态作用域的限制。由于这些违规行为，默认语言不是完全静态范围的：

*   对未声明变量的赋值动态地创建隐含的全局变量，
*   语句（对象在 JavaScript中`with`是动态的，因此 JS 引擎在评估之前无法知道哪些名称是对象的属性，哪些名称绑定到环境），
*   `eval`调用可以动态添加名称到环境中，
*   操作员可以从环境中`delete`动态删除名称（适用于隐含的全局变量，以及通过 eval 调用添加的变量）。

来源：[http ://www.youtube.com/watch?v=Kq4FpMe6cRs&t=42m48s](http://www.youtube.com/watch?v=Kq4FpMe6cRs&t=42m48s)

我可以看到完整的静态作用域有助于提高性能，因为 JS 引擎可以在评估之前绑定变量（或至少其中大部分）（到词法环境中的名称）。另外，我想，该程序变得更具可读性并且不太可能引起混淆。

但是，我对完全静态范围的好处的理解并不像我希望的那样完整。

# google-maps-api-3 - 谷歌地图业务 api v3 覆盖未经授权的警报

> ID：12677425
> 
> 赞同：1
> 
> 时间：2012-10-01T16:38:58.753
> 
> 标签：google-maps-api-3

我们最近升级了我们的应用程序以使用谷歌地图 API v3 的商业版。根据：

[https://developers.google.com/maps/documentation/business/guide#URLs](https://developers.google.com/maps/documentation/business/guide#URLs)

我们必须授权我们应用程序的所有最终用户（那些运行我们部署的服务器端代码的用户）使用我们的地图实现。

如果用户尝试将我们的代码部署到其 fqdn 未包含（由我们）在 google 门户网站上的授权 URL 列表中的服务器上，他们会在页面加载时看到以下警报：

```
Google has disabled use of the Maps API for this application.  
This site is not authorized to use the Google Maps client ID 
provided.  If you are the owner of this applicattion, you can 
learn more about registereing URLs here: https://
developers.google.com/maps/documentation/business/
guide#URLs 
```

并且地图功能显然不起作用。这一切都很好，但信息有点不友好。是否可以用我们可以定义的东西替换这个警报？例如“您似乎在运行未经授权的版本，请通过 xxx@yyy.com 联系我们”。

否则，在获取地图 javascript 库之前我们可以执行一些测试，让我们在那里显示一个警报对话框吗？

谢谢！

# windows - Active Directory 用户在离开我们的办公域时无法访问桌面和我的文档

> ID：12677428
> 
> 赞同：0
> 
> 时间：2012-10-01T16:39:06.177
> 
> 标签：windows, active-directory, windows-server-2008

我们的一位办公室用户需要将他的计算机带回家工作，显然他不在我们的办公室域中。他能够登录到他的域帐户，但看不到他的桌面和我的文档。刷新桌面会看到错误：

```
\\nydc1\..\..... is not accessible. You might not have permission to use the network resource. 
```

奇怪的是，我们有另一个用户需要做同样的事情，但在家工作时能够看到他缓存的桌面版本和我的文档。当然，两个用户都属于同一个域，并且两台机器都拥有全新安装的 Window 7 Professional。

我需要在域控制器上配置组策略或设置吗？请帮忙！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:11:49.583

好的，我想通了。这实际上不是 AD 问题。用户的计算机没有在控制面板中启用脱机文件访问。一旦启用，他现在就可以离线访问文件。

# google-app-engine - 如何缓存 RSS 提要？

> ID：12677430
> 
> 赞同：0
> 
> 时间：2012-10-01T16:39:09.367
> 
> 标签：google-app-engine, caching, rss

我使用来自 GAE NDB 数据存储的最新 10 条记录生成 RSS 提要。数据库中的记录每周更新一次。每次用户请求显示 RSS 提要时，如何避免对数据存储的查询？即如何缓存它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T16:42:54.527

您可以使用 memcache 来避免每次都访问数据存储。您可能知道查询不会缓存在 NDB 中。

[https://developers.google.com/appengine/docs/python/memcache/usingmemcache](https://developers.google.com/appengine/docs/python/memcache/usingmemcache)

```
def get_data():
  data = memcache.get('key')
  if data is not None:
      return data
  else:
      data = self.query_for_data()
      memcache.add('key', data, 60)
      return data 
```

因此，换句话说，尝试从 memcache 中获取数据，如果失败，则从数据存储中获取数据，然后将其添加到 memcache 中以备下次使用。

上面的示例使用 60 秒超时（.add 调用中的值 60）只需保留该参数即可让数据在 memcache 允许的情况下持续存在。

也来自一个类似的问题：[NDB Caching When Using Projected Queries](https://stackoverflow.com/questions/12128424/ndb-caching-when-using-projected-queries)

> key.get() 将被缓存并从缓存中检索，但 query.get() 不会从缓存中检索。 [https://developers.google.com/appengine/docs/python/ndb/cache](https://developers.google.com/appengine/docs/python/ndb/cache)
> 
> 来自文档：查询不会在任何缓存中查找值。但是，如果缓存策略如此，查询结果将被写回上下文缓存（但永远不会写回 Memcache）。

因此，如果您通过密钥获取，您将自动从 NDB 缓存中获取（如果可用），但我没有亲自使用过。

因此，构建您的 RSS 内容并在渲染之前将其保存到内存缓存中。然后，当您更新它创建的内容时，只需使缓存版本无效（请参阅文档），以便下一个请求将从数据存储中获取它，然后您可以将其放回缓存中。

# data-binding - 更改下拉更改 Knockout Js 上的可观察值

> ID：12677431
> 
> 赞同：12
> 
> 时间：2012-10-01T16:39:12.253
> 
> 标签：data-binding, knockout.js, observable

如果车辆是新的或使用过的，我有这个下拉菜单。

```
<select name="VehicleType" id="vehicleTypeDropdown" data-bind="value: VehicleType">    
    <option value="New" selected="selected">Nuevo</option>
    <option value="Used">Usado</option>
</select> ` 
```

这个输入：

```
<input type="text" name="Mileage" data-bind="disable: VehicleType() === 'New',value:  Mileage" class="input-large"> ` 
```

如果选择的下拉列表中的值是新的，则必须禁用输入，如果使用，则应启用输入，但如果我输入一个值，observable 将获取该值，如果我将下拉值更改为 new，则 observable 必须为零.

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-01T16:56:58.157

在视图模型中手动订阅是处理此类问题的好方法。订阅可能如下所示：

```
this.VehicleType.subscribe(function(newValue) {
    if (newValue === "New") {
        this.Mileage(0);
    }
}, this); 
```

这是一个使用它的示例：http: [//jsfiddle.net/rniemeyer/h4cKC/](http://jsfiddle.net/rniemeyer/h4cKC/)

**的HTML：**

```
<select name="VehicleType" id="vehicleTypeDropdown" data-bind="value: VehicleType">
    <option value="New" selected="selected">Nuevo</option> 
    <option value="Used">Usado</option> 
</select>

<input type="text" name="Mileage" data-bind="disable: VehicleType() === 'New', value: Mileage" class="input-large">
<hr/>

<pre data-bind="text: ko.toJSON($root, null, 2)"></pre> 
```

**JS：**

```
var ViewModel = function() {
    this.VehicleType = ko.observable();
    this.Mileage = ko.observable();

    this.VehicleType.subscribe(function(newValue) {
        if (newValue === "New") {
            this.Mileage(0);
        }
    }, this);
};

ko.applyBindings(new ViewModel()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-02T21:51:49.383

如果您使用的是[ko 映射插件](http://knockoutjs.com/documentation/plugins-mapping.html)，您可以拦截新对象的创建并在那里设置订阅。如果您有一个完整的项目列表，并且您想在某些事情发生变化时执行一项操作。

这是购物车订单项的视图模型（属性，例如`qty`、`sku`、`description`、`price`）。

```
// View Model for an item in my shopping cart
var CartItemViewModel = function(data) 
{
    // map all the properties
    // we could map manually if we want, but that's the whole point of
    // the mapping plugin that we don't need to
    ko.mapping.fromJS(data, {}, this);

    // subscribe to qty change
    this.qty.subscribe(function (newValue)
    {
        alert('qty now ' + this.qty());
        // UpdateCart()

    }, this);    

    // add computed observables if needed
    // ....
} 
```

当您使用映射插件更新（或创建）模型时，您指定对于名为“items”的属性，数组中的每个元素都应使用您指定的“create”函数创建。

```
 var mapping =
    {
        'items':
        {
            // map cart item 
            create: function (options)
            {
                return new CartItemViewModel(options.data);
            }
        }
    };

    var data = ......  // get your data from somewhere

    // update the CartViewModel using the mapping rules
    ko.mapping.fromJS(data, mapping, rrvm.CartViewModel); 
```

# c# - C#.NET - IIS 服务器问题和删除 HTTP 响应标头

> ID：12677432
> 
> 赞同：-1
> 
> 时间：2012-10-01T16:39:19.960
> 
> 标签：c#, iis, http-headers

我正在用 C#.NET 编写一个网站，并希望删除 HTTP 响应标头中包含的服务器信息。我正在运行 Windows 7 并运行 IIS 7.5。

现在我有两个问题。第一个问题是，每当我使用 HttpFox 获取响应标头时，服务器都被列为 ASP.NET Development Server 10 而不是 IIS 7.5

第二个问题是我无法删除服务器部分。我尝试安装 URLScan 并将 RemoveServerHeader 配置修改为 1 以使其隐藏。我尝试从 IIS 停止 HTTP 响应标头服务。我尝试按照本文“[删除 HTTP 响应标头以隐藏您的框架](http://www.britishdeveloper.co.uk/2010/08/hide-http-headers-server-x-powered-by.html)”和其他类似的文章以编程方式更改它。但是，每当我使用 HttpFox 运行网站时，服务器部分都保持不变。

请问我该怎么做才能解决这个问题？这非常重要，因为它是我论文的一部分。

任何帮助是极大的赞赏 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T04:54:27.920

有 2 个地方正在添加标题。IIS 和您的 ASP.NET 或 WCF 等应用程序端。

不确定 Visual Studio 内置网络服务器，但是无论如何它都不会在生产中使用，那何必呢？您还可以在 Visual Studio 中配置您的 Web 项目以使用本地 IIS 或 IISExpress 而不是 VS bultin。（请参阅属性/Web 选项卡）您可以从 IIS 管理 GUI 中删除 IIS 端标头。

根据 ASP.NET，您可以连接到 PreSendRequestHeaders 事件处理程序并查看那里有什么，如果您愿意，可以删除。在 WCF 中类似，您可以选择删除响应标头，但方式不同（消息拦截器）。

# google-maps-api-3 - 在具有半径覆盖的地图上绘制邮政编码或邮政编码

> ID：12677440
> 
> 赞同：1
> 
> 时间：2012-10-01T16:40:24.843
> 
> 标签：google-maps-api-3

我正在尝试为特定国家/地区绘制邮政编码或邮政编码（自国际以来）。我有一个包含城市的电子表格和我们商店所在的一些邮政编码。我希望能够在地图上绘制所有邮政编码，并且半径覆盖范围可以说是 50 英里。我怎样才能做到这一点？我很想有一个动态的解决方案，我可以将设置应用于多个国家..

# asp.net - 如何禁用日历控件上的选定日期？

> ID：12677442
> 
> 赞同：0
> 
> 时间：2012-10-01T16:40:45.333
> 
> 标签：asp.net, calendar-control

```
<asp:Calendar ID="Calendar1" runat="server"></asp:Calendar> 
```

// 如何禁用 Calendar1 上的选定日期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:43:29.753

这是你的工作代码？我看不到选择的任何日期，您必须使用控件的 SelectedDates 属性。

这是 W3 的一个很好的参考：http: [//www.w3schools.com/aspnet/control_calendar.asp](http://www.w3schools.com/aspnet/control_calendar.asp)

# memcached - 无法让 Enyim.Caching MemcachedClient 与 Couchbase 一起使用

> ID：12677445
> 
> 赞同：0
> 
> 时间：2012-10-01T16:40:52.213
> 
> 标签：memcached, couchbase, enyim, enyim.caching

我意识到 Couchbase 为他们的 memcached 服务器提供了一个客户端，但我试图让 enyim.caching 客户端工作。

这是我使用 Couchbase 客户端（有效）的琐碎 c# 代码，然后与 enyim MemcachedClient 几乎相同：

```
class Program
{
    static void Main(string[] args)
    {
        var client = new CouchbaseClient();

        client.Store(StoreMode.Set, "somekey", "somevalue");

        var somevalue = client.Get<string>("somekey");

        Console.WriteLine(somevalue);
        Console.ReadLine();

        var mclient = new MemcachedClient();
        mclient.Store(StoreMode.Set, "Hello", "World");
        var myVal = mclient.Get<string>("Hello");
        Console.WriteLine(myVal);
        Console.ReadLine();
    }
} 
```

这是我的 app.config：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <configSections>
      <section name="couchbase" type="Couchbase.Configuration.CouchbaseClientSection, Couchbase"/>
      <sectionGroup name="enyim.com">
        <section name="memcached" type="Enyim.Caching.Configuration.MemcachedClientSection, Enyim.Caching" />      
      </sectionGroup>
    </configSections>
    <couchbase>
      <servers bucket="default" bucketPassword="myPassword">
        <add uri="http://127.0.0.1:8091/pools"/>
      </servers>
    </couchbase>
<enyim.com>
  <memcached>
    <servers>
      <add address="127.0.0.1" port="8091" />
    </servers>
    <socketPool minPoolSize="10" maxPoolSize="100" connectionTimeout="00:10:00" deadTimeout="00:02:00" />
    <authentication type="Enyim.Caching.Memcached.PlainTextAuthenticator, Enyim.Caching" zone="" userName="Administrator" password="myPassword" />
  </memcached>
</enyim.com>
<startup>
  <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
</startup>  
</configuration> 
```

当我单步执行代码时，Couchbase 客户端似乎工作正常。Get 方法按预期返回“somevalue”。该代码还愉快地单步执行 MemcachedClient 代码，但是当我单步执行 Store 方法时，它会挂起 10 秒（我认为这是超时），然后 myVal 值返回为 null。没有错误被抛出。

我怀疑问题围绕`zone`配置中 memcached 的身份验证节点中的值。在 enyim.caching 源代码（从 Github 检索）中的 DemoApp 代码中，从未指定 zone，但如果未提供 zone，enyim 会抛出错误 - 即 DemoApp 无法按原样工作，因为 zone 没有t 提供。

我不确定这是否是问题所在，但我知道我不能将区域排除在外，但我不知道该值使用什么。我见过一个使用“AUTHZ”的例子，但这似乎没有任何区别。

有人看到我在这里做错了吗？任何帮助表示赞赏！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:32:34.867

好的 - 我知道发生了什么。我回到 Couchbase 控制台，发现我唯一的数据桶是 Couchbase 类型的。因此，我创建了一个 Memcached 类型的新数据桶。我注意到这种存储桶类型不需要身份验证。我确实必须给它一个新的端口。

一旦我对配置文件进行了最小的更改，enyim.caching MemcachedClient 代码就可以完美运行！

这是我的新 enyim.caching 配置内容现在的样子：

```
<enyim.com>
  <memcached>
    <servers>
      <add address="127.0.0.1" port="8095" />
    </servers>
    <socketPool minPoolSize="10" maxPoolSize="100" connectionTimeout="00:10:00" deadTimeout="00:02:00" />
  </memcached>
</enyim.com> 
```

我会尽快将此答案标记为解决方案。希望这可以帮助某人避免犯我愚蠢的错误。:)

更新：

查看评论，了解 John Zablocki 提供的另一种解决方案。谢谢约翰！

# c# - 如何在 C# 中并行处理输入直到某些条件为真

> ID：12677455
> 
> 赞同：4
> 
> 时间：2012-10-01T16:41:17.383
> 
> 标签：c#, parallel-processing, while-loop

我正在使用位于（例如） a`StreamReader`或`SqlDataReader`. 该接口公开了一个方法，`GetNext()`如果有任何剩余对象，或者没有剩余对象，该方法将返回一个对象`null`。

```
public interface ICollectionWidget<T>
{
    T GetNext(); // Returns a T if there are any left, or null if there aren't
} 
```

我需要并行处理`T`返回的每个，并在返回`GetNext()`时停止处理 。我不太确定这是如何完成的（使用 TPL 或其他）。我需要一种并行！显然，当我得到 a 时，我不希望任何仍在处理的线程完成，我只是不想添加任何新的处理 - 然后在所有线程完成它们正在做的事情时退出“循环” .`GetNext()``null``while``null`

任何人都可以帮忙吗？如果我的问题没有意义，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T16:48:02.623

请注意，您所展示的“收藏”通常是通过`IEnumerable<T>`. 如果您可以控制 API 本身，我会使用`IEnumerable<T>`而不是`GetNext()`基于 - 的迭代方法。但是，如果您不这样做，则执行转换很简单...

我将包装此 API 以将其公开为`IEnumerable<T>`. 然后你可以使用`Parallel.ForEach`：

```
private IEnumerable<T> EnumerateWidgets<T>(ICollectionWidget<T> widgets)
{
    T element = widgets.GetNext();
    while (element != null)
    {
        yield return element;
        element = widgets.GetNext();
    }
} 
```

然后你可以使用：

```
Parallel.ForEach(EnumerateWidgets(widgetCollection), widget =>
{
     // Process widget here
}); 
```

这将在枚举您的小部件时防止线程问题（因为枚举器将是单线程的），但允许您并行处理您的集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T16:49:47.913

只需制作一个迭代器：

```
public interface ICollectionWidget<T>
{
    IEnumerable<T> GetItems();
}

public class CollectionWidget : ICollectionWidget<int>
{
    public IEnumerable<int> GetItems()
    {
        var i = 0;

        while (i++ < 10)
        {
            yield return i;
        }
        yield break;
    }
} 
```

并将其用于`Parallel`：

```
 var widget = new CollectionWidget();

        Parallel.ForEach(widget.GetItems(), i => Console.WriteLine(i)); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-01T16:49:32.560

你也可以使用

```
Task.Factory.StartNew() 
```

# java - 如何找出文件当前是否在 Java 中增长（独立于操作系统）

> ID：12677460
> 
> 赞同：4
> 
> 时间：2012-10-01T16:41:28.407
> 
> 标签：java, windows, file, filesystems

我试图找到一种跨平台的方式来可靠地判断文件是否已完成复制（通过外部进程）。

以前，在 OSX/Linux 上，我只是在检查

```
File file = new File("path/to/file");
file.length() 
```

然后等待几秒钟并再次检查它是否已更改。

然而，这在 Windows 上不起作用，因为该方法总是返回完整文件的大小（即它最终将被复制一次的大小）。

我也试过检查 lastModified 时间戳，但这似乎也没有改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T16:45:50.413

一种选择是尝试使用“附加”打开文件进行写入`FileOutputStream`- 如果可以这样做，则另一个进程不太可能*也在*写入文件。当然，您不需要写入任何数据 - 只需创建流。

（编辑以删除已经存在的问题，即使用`lastModified`.）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:21:49.803

我最终通过在两个不同的时间点计算文件的校验和和哈希（而不是长度）并检查它们是否已更改以确定文件是否仍在被写入来解决这个问题。

# ruby - 专门的 ruby 正则表达式

> ID：12677462
> 
> 赞同：1
> 
> 时间：2012-10-01T16:41:47.347
> 
> 标签：ruby, regex

我有一个具有 reg ex 的 ruby​​ 脚本，以排除 [] 之间的文本。例如以下：

`[29-5-10 : 10.05 | key=3.6]`

如果在文件中，前面的表达式只存在一次，我的 reg ex 工作得很好。我需要一个解决以下问题的reg ex：

`[29-5-10 : 10.05 | key=3.6]`

`[29-5-10 : 10.05 | key=3.6]`

...布拉..布拉

`[29-5-10 : 10.05 | key=3.6]`

我现在的注册前是`/\[(.*)\]/`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T16:42:51.707

尝试将其更改为以下内容：

```
/\[([^\]]*)\]/ 
```

您当前行为的问题`.*`是贪婪，因此您将从第一个匹配`[`到最后一个`]`。通过更改`.*`为`[^\]]*`you 将仅匹配不是`]`.

或者，您可以使用`.*?`代替`.*`，它是惰性的（匹配尽可能少的字符）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T16:58:27.547

正如 FJ 提到的，您需要一个不贪婪的匹配器。

```
s = '[29-5-10 : 10.05 | key=3.6] [29-5-10 : 10.05 | key=3.6]'
m = s.scan( /\[([^\]]*)\]/ ).flatten
p *m 
```

将返回

```
"29-5-10 : 10.05 | key=3.6"
"29-5-10 : 10.05 | key=3.6" 
```

## 在此处查看[现场演示](http://cibox.org/slivu/stackoverflow?file=specialized-ruby-regular-expression.rb&lang=ruby&run=true)

# php - 查询中的 UNION 语句

> ID：12677463
> 
> 赞同：1
> 
> 时间：2012-10-01T16:41:49.413
> 
> 标签：php, mysql

我写了一个查询，但出现以下错误，有什么想法吗？！

错误 ：

```
Warning: mysql_num_rows(): supplied argument is not a valid MySQL result resource in E:\AppServ\www\admin\index.php on line 545 
```

代码 ：

```
 require_once '../_db/databaseConnect.php';
                    $db = new databaseConnect();
                    $db->connect();
                    $queryResult = mysql_query("(SELECT * FROM tabelcomments WHERE publishStatus = 2) UNION (SELECT appTitleFa FROM tableapps WHERE appID = '$appID');");
                    for ($dataCnt = 0; $dataCnt < mysql_num_rows($queryResult); $dataCnt++) 
                      {
                         //codes...
                      }
                    $db->close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T16:45:12.110

a 的两个部分都`UNION`应该返回**相同数量**和**相同类型的列**。

最有可能的是，您的`tabelComments`表包含的列多于从`tableApps`联合的第二部分中的表返回的单个列。

您可以通过显式选择适当的列`tableComments`或将虚拟列添加到`UNION`部件来解决此问题。

例子

```
SELECT NULL as dummycol1, comment FROM tablecomment
UNION SELECT appTitleFa, NULL as dummycol2 FROM tableapps 
```

# c#-3.0 - 将字符串 [，] 转换为字节以在 c#.net 中通过套接字发送

> ID：12677467
> 
> 赞同：0
> 
> 时间：2012-10-01T16:41:55.527
> 
> 标签：c#-3.0

> **可能重复：**
> [如何在 C# 中将 int[,] 转换为 byte[]](https://stackoverflow.com/questions/3322473/how-to-convert-an-int-to-byte-in-c-sharp)

我想通过套接字发送一个二维字符串数组（string[n，m]），它必须转换为字节数组。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:00:53.090

您可以使用前 8 个字节来存储数组的维度：

```
public static byte[] ToByteArray(string[,] input)
{
    using (var stream = new MemoryStream())
    using (var writer = new BinaryWriter(stream, Encoding.UTF8))
    {
        var rows = input.GetLength(0);
        var cols = input.GetLength(1);
        writer.Write(rows);
        writer.Write(cols);
        for (int i = 0; i < rows; i++)
        {
            for (int j = 0; j < cols; j++)
            {
                writer.Write(input[i, j]);
            }
        }
        return stream.ToArray();
    }
} 
```

并将字节数组转换回二维字符串数组：

```
public static string[,] FromByteArray(byte[] input)
{
    using (var stream = new MemoryStream(input))
    using (var reader = new BinaryReader(stream, Encoding.UTF8))
    {
        var rows = reader.ReadInt32();
        var cols = reader.ReadInt32();
        var result = new string[rows, cols];
        for (int i = 0; i < rows; i++)
        {
            for (int j = 0; j < cols; j++)
            {
                result[i, j] = reader.ReadString();
            }
        }
        return result;
    }
} 
```

# mysql - 出现外文字母

> ID：12677472
> 
> 赞同：1
> 
> 时间：2012-10-01T16:42:09.350
> 
> 标签：mysql, character-encoding

我有一个包含几个关键字翻译的数据库。

我正在访问这些翻译，并且在许多法语单词中，有些字符没有出现在英语中。例如重音 e。（我稍后会翻译成其他语言，我相信同样的问题也会出现。）

请记住，这些翻译来自 MySQL 数据库，有没有办法解决这个问题？我尝试将字符集从 utf-8 更改为 iso 8859-1，但这没有任何区别。

任何指导都会受到热烈欢迎！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:44:55.740

通过[http://msdn.microsoft.com/en-us/library/ms186939.aspx](http://msdn.microsoft.com/en-us/library/ms186939.aspx)，我会说

VARCHAR(n) CHARSET ucs2 是最接近的等价物。但我没有看到很多人使用这个，更多的人使用：

VARCHAR(n) CHARSET utf8 据我所知，utf8 和 ucs2 两个字符集都允许使用相同的字符，只是编码不同。所以任何一个都应该工作，我可能会选择后者，因为它使用得更频繁。

MySQL 的 unicode 支持存在一些限制，这些限制可能适用于您的用例，也可能不适用于您的用例。有关 MySQL 的 unicode 支持的更多信息，请参阅[http://dev.mysql.com/doc/refman/5.0/en/charset-unicode.html 。](http://dev.mysql.com/doc/refman/5.0/en/charset-unicode.html)

复制自：[mysql等效数据类型](https://stackoverflow.com/questions/2214901/mysql-equivalent-data-types)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T16:48:31.317

我会将客户端编码设置为 UTF-8 和数据库排序规则 utf8_bin。您如何在数据库中准确插入单词？您是自动翻译单词并插入它们还是手动进行。您还可以将连接排序规则设置为 UTF8。

- - - - 更新 - - - -

要在 PHP 中强制执行字符集连接，只需在连接后添加以下内容：

```
mysql_query('SET NAMES utf8'); 
```

如果它不起作用，请尝试在您的脚本中也将字符集强制为 utf8。

```
mysql_query('SET CHARACTER SET utf8'); 
```

并记住在修改后清理所有数据并重新插入，然后再尝试对数据库进行任何调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T16:51:36.843

那么 ISO 8859-1 实际上在字符集中有一个重音 e。听起来，您的数据库中有 UTF8 字符，但是结果中那些讨厌的外来字符不能很好地变成纯英文字符。你可以用[collat​​ion](http://dev.mysql.com/doc/refman/5.5/en/charset-collate.html)做到这一点。将您的结果整理成类似[latin1_swedish_ci](http://www.collation-charts.org/mysql60/mysql604.latin1_swedish_ci.html)的内容。

我相信 vars 中还有一个条目可以设置，因此您不必在每个查询中指定合并，但我懒得查找它：p

# .htaccess - 使用 .htaccess 从 URL 中删除单词/目录

> ID：12677475
> 
> 赞同：0
> 
> 时间：2012-10-01T16:42:15.547
> 
> 标签：.htaccess, url, redirect, rewrite

目前我的单页 URL 如下所示：

```
http://website.com/post/6268/some-post-title 
```

帖子编号和标题是使用 PHP 生成的。我想要做的是从 URL 中删除以下部分：

```
/post/6268/ 
```

使它看起来像这样：

```
http://website.com/some-post-title 
```

我试图做的是将以下行添加到 .htaccess 文件中，但是它不起作用：

```
RewriteRule ^post/(.*)/(.*)$ /$1 
```

我在这里查看了许多问题以及我发现的其他一些论坛主题，但我无法找到解决方案。

.htaccess 文件中的行实际上声明：

```
RewriteRule ^post/(.*)/(.*)$ view.php?pid=$1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:32:00.913

“删除 URL 的一部分”是完全模棱两可的。您是否希望这样浏览器永远不会在其 URL 地址栏中看到此内容，即使他们在 URL*中*键入了您要删除的目录？您是否只想给他们删除单词的较短 URL 并在内部*将它们添加回来*，以便 URL 指向的现有资源可以提供内容，或者是否存在错误的 URL 与额外目录中的额外目录您只需要在服务器内部删除的 URL，以便正确的资源（无目录）可以提供内容？

如果是前者，那么你就走在了正确的轨道上：

```
RewriteRule ^post/[0-9]+/(.+)$ /$1 [L,R=301] 
```

最后一件事，您只需`R=301`要从方括号中删除标志。但是对于第二件事，您正在放弃`6268`来自 URL 的 ，当服务器看到对 的请求时`/some-post-title`，它不知道该帖子 ID 应该是什么。

# regex - 雅虎管道中的正则表达式以选择特定单词之前的所有内容

> ID：12677477
> 
> 赞同：1
> 
> 时间：2012-10-01T16:42:25.247
> 
> 标签：regex, yahoo-pipes

如何在雅虎管道中制作正则表达式以消除从字段开头到特定单词的所有内容？

我正在从 youtube 上获取 rss，

[http://www.youtube.com/rss/search/%s.rss](http://www.youtube.com/rss/search/%s.rss)

并希望提取视图计数并将其添加为单独的字段。视图计数位于描述字段中，并显示为：

```
<div><span style="color:#666666;font-size:11px;">Views:</span>
431</div> 
```

在这种情况下，我需要提取的数字是 431。

谢谢，
彼得罗

PS：以下是最近搜索的描述的一部分。我没有放整个代码，因为它太长了。

```
<div style="font-size:12px;margin:3px 0px;"><span>a frankly shoddy cover of Susan Cadogan&#39;s big hit! Reminds me of my first &#39;squeeze&#39; at The Hummingbird under 18&#39;s sesh, monkey boots, (couldn&#39;t afford Docs),fred perry t shirt and stapress &#39;champagne&#39; 2 tone trousers robbed from Nelson House....................</span></div></td>
<td style="font-size:11px;line-height:1.4em;padding-left:20px;padding-top:1px;" width="146" valign="top"><div><span style="color:#666666;font-size:11px;">From:</span>
<a rel="nofollow" target="_blank" href="http://www.youtube.com/channel/UCZ0m4ZjZMNdOl4uyvrQm-yw">TheLastMehari</a></div>
<div><span style="color:#666666;font-size:11px;">Views:</span>
431</div>
<div style="white-space:nowrap;text-align:left;"><img style="border:0px none;margin:0px;padding:0px;vertical-align:middle;font-size:11px;" align="top" alt="" src="http://gdata.youtube.com/static/images/icn_star_empty_11x11.gif"> <img style="border:0px none;margin:0px;padding:0px;vertical-align:middle;font-size:11px;" align="top" alt="" src="http://gdata.youtube.com/static/images/icn_star_empty_11x11.gif"> <img style="border:0px none;margin:0px;padding:0px;vertical-align:middle;font-size:11px;" align="top" alt="" src="http://gdata.youtube.com/static/images/icn_star_empty_11x11.gif"> <img style="border:0px none;margin:0px;padding:0px;vertical-align:middle;font-size:11px;" align="top" alt="" src="http://gdata.youtube.com/static/images/icn_star_empty_11x11.gif"> <img style="border:0px none;margin:0px;padding:0px;vertical-align:middle;font-size:11px;" align="top" alt="" src="http://gdata.youtube.com/static/images/icn_star_empty_11x11.gif"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:45:20.563

也许是这样的？[http://rubular.com/r/boubtEmP4s](http://rubular.com/r/boubtEmP4s)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T16:48:15.653

替换部分应该是这样的：

```
^.*Views:\D*(\d+).*$ 
```

...更换零件将只是

```
$1 
```

换句话说，您将`Views:`仅用非数字符号捕获与字符串分隔的所有数字 - 并丢弃所有其余数字。

更新：您应该启用`/s`修饰符才能使其正常工作。另一种方法是使用“通用”字符类而不是`.`：

```
^[\s\S]*Views:\D*(\d+)[\s\S]*$ 
```

更换部件应保持不变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T18:09:37.450

最后，我最终合并了这两个建议，并使用：

```
^[\s\S]*Views:\<\/span\>\s*(\d+)[\s\S]*$ 
```

# javascript - 如何防止对网站内容的授权使用？

> ID：12677482
> 
> 赞同：-1
> 
> 时间：2012-10-01T16:42:56.420
> 
> 标签：javascript, asp.net, html, amazon-s3

过去，我们公司有一项协议，当地新闻机构可以在我们的网站上嵌入我们拥有的一些地图。他们会在地图中使用 iFrame，并且有人告诉我，我们有一些逻辑可以防止新闻网站以外的任何人做同样的事情（可能通过某种推荐代理）？

我们最近已将地图应用程序转移到托管在 Amazon S3 上，并将 iFramed 转移到我们自己的页面中。防止未经授权的嵌入的话题再次出现。

我无法访问以前的代码来查看这是如何完成的，但我假设这是对上一个 aspx 页面的某种标题检查。现在地图应用程序在 S3 上完全是静态的，我不相信这样的事情是可能的。

任何人都可以强调或指出我可以搜索的方向吗？我的搜索都没有发现任何有用的东西（可能只是使用了错误的关键字）。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:47:12.957

最可靠的方法是使用 JavaScript（启用时）

```
if(top != self) alert("Y U EMBED IN FRAME?"); 
```

甚至还有一篇关于该主题的维基百科文章[http://en.wikipedia.org/wiki/Framekiller](http://en.wikipedia.org/wiki/Framekiller)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T20:45:19.853

好的，所以有人为我清除了这一切。之前的“逻辑”只是将 HTTP Referrer 标头列入白名单。有了这些信息，我可以缩小搜索范围，并在 Amazon 的 S3 常见问题解答 [http://aws.amazon.com/s3/faqs/#How_can_I_control_access_to_my_data_stored_on_Amazon_S3上找到以下内容](http://aws.amazon.com/s3/faqs/#How_can_I_control_access_to_my_data_stored_on_Amazon_S3)

# bash - 在反引号内进行比较

> ID：12677483
> 
> 赞同：0
> 
> 时间：2012-10-01T16:43:06.323
> 
> 标签：bash

是否可以在 bash 脚本中执行类似于以下操作的操作？：

```
totaltrackseval=`if [[ $totaltracks -ge 0]]; then; echo '-N $totaltracks'; else; echo 'elsetext'; fi` 
```

如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T16:50:12.653

这将做你想要的。你几乎第一次就做对了。请注意，我用你的单引号代替了双引号。变量替换在单引号内不起作用。此外，当您使用括号进行测试时，它们需要在内部填充空格。

```
totaltrackseval=`if [ $totaltracks -ge 0 ];
                then
                    echo "-N $totaltracks"
                else
                    echo "elsetext"
                fi` 
```

如果您更喜欢单行实现：

```
totaltrackseval=`if [ $totaltracks -ge 0 ]; then echo "-N $totaltracks"; else echo "elsetext"; fi` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T16:51:37.007

你可以这样做，像这样：

```
totaltrackseval=`bash -c "if [[ $totaltracks -ge 0 ]]; then echo '-N $totaltracks'; else echo 'elsetext'; fi"` 
```

测试：

```
nelson@sev:~$ totaltracks=5
nelson@sev:~$ totaltrackseval=`bash -c "if [[ $totaltracks -ge 0 ]]; then echo '-N $totaltracks'; else echo 'elsetext'; fi"`
nelson@sev:~$ echo $totaltrackseval
-N 5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T17:09:07.857

另一种方法，使用两种类型的参数扩展。我假设它`totaltracks`要么未设置，要么具有非负整数值。

```
# Use an alternate value for totaltracks if it is set
totaltrackseval=${totaltracks:+-N $totaltracks}

# Use a default text if totaltrackseval still has no value
: ${totaltrackseval:=elsetext} 
```

# ubuntu - 局域网计算机之间的 Beanstalk 和时间同步

> ID：12677488
> 
> 赞同：0
> 
> 时间：2012-10-01T16:43:42.917
> 
> 标签：ubuntu, time, beanstalkd

长话短说，我的工具对我的 MySQL 数据库服务器的打击太大了，我遇到了很多问题。因此，我创建了一组工具（PHP 和 Ruby），它们使用 Beanstalk 将我想要在 DB 上完成的工作传达给一组始终运行的 DB 连接。Beanstalk 管用于传入作业和回复。

但是，我已将 ExpireTime 添加到我的数据库请求的作业数据中。本质上，如果 DB 请求作业没有在相当短的时间窗口内执行，则根本不会执行请求。无论如何，请求任务都会自行超时，因此有一个较短的时间窗口可以防止 DB 执行脚本执行一堆永远不会使用的 DB 请求。

只要一切都在一台机器上，这一切都很好。现在我将它扩展到第二台机器，我立即遇到了请求被视为已过期的问题。

任务的当前到期时间是 10 秒——对于我试图完成的简单数据库请求来说，这已经相当长了。如果我将 10 秒增加到足够大的数字，那么数据库请求会快速执行并且不会出现问题。

所以我怀疑这个问题归结为一台计算机认为它是 12:00:XX 而另一台认为它是 12:00:YY 并且 XX 和 YY 之间的差异至少是 8 或 9 秒。

我在局域网中使用 Ubuntu 12.04 桌面和服务器。我用 Ruby (1.8.7) 和 PHP (5.3.10-1ubuntu3.4) 编写程序，使用这个 Beanstalk 队列作为一种 DB 连接池以及一个任务队列，用于在分布式中执行项目/站点相关任务方式。对于 PHP，我使用 pheanstalk，对于 Ruby，我使用 beankstalk-client gem。

我考虑过的一个技巧是创建一个豆茎管，执行数据库请求的计算机大约每秒一次输出它的当前时间。然后，将请求放入队列的分布式计算机将需要获取该作业（并释放它 - 而不是删除它）以获得最新的时间戳。这是粗略的并且（我相信）会导致冲突——即请求等待获取当前时间的作业数据——因为我增加了我添加到此的计算机数量。

我希望这个论坛上的某个人有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:31:14.787

“正确”的解决方案是在机器上设置一个 NTPd 守护程序（或至少定期运行该程序`ntpdate -s _servername_`），以便服务器时钟正确，并在它不对齐时不断得到纠正。

# php - 变量总是重置

> ID：12677489
> 
> 赞同：0
> 
> 时间：2012-10-01T16:43:56.603
> 
> 标签：php, html

我正在使用表单创建一个类似于 mastermind 的游戏。我的问题是我有一个变量 $attempts，我希望每次用户猜测一个数字时它都会增加，但它似乎总是重置为零，所以我的尝试次数将始终显示为 1。如果有帮助，这里是我正在使用的代码：

```
$black = 0;
$white = 0;
$answer = array(1,2,3,4);
$tries = array();
$attempts = 0;
if ($process == true)
{
$guess = str_split($_POST['guess']);
if ($guess == $answer)
{
    $black = 4;
} else
{
    for ($i=0;$i<4;$i++)
    {
        if ($guess[$i] == $answer[$i])
        {
            $black = $black + 1;
            $white = $white - 1;
        }
    }
    $result = array();
    foreach ($guess as $val)
    {
        if (($key = array_search($val, $answer))!==false)
        {
            $result[] = $val;
            unset($answer[$key]);
        }
    }
    $count = count($result);
    $white = $white + $count;
}
}
$chance = implode(" ",$guess);
$attempts += 1;
$try = $attempts.".".$chance.".".$white.".".$black;
array_push($tries, $try); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:49:31.980

您是否在每次猜测时都提交表单？如果是这样，您需要设置一个会话变量，例如：

```
$_SESSION['attempts'] += 1; 
```

只是为了澄清一些你*似乎*遗漏的东西。php 脚本是在服务器上运行的代码，它生成要发送给客户端的文档（通常是 html）。因此，跨请求的交互性不是很高。如果您希望代码在客户端运行，您需要使用 Javascript。Javascript 的好处是不需要在客户端和服务器之间通过 Internet 传递信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T16:48:37.400

`$attempts`始终等于 1，因为它不在循环内，它在最后声明，您只是在其现有值 (0) 上加 1。你需要把它放在合适的地方（就在`{`我认为的最后一个上面），它应该可以工作。

此外，您似乎使用不同的方法来添加一个，例如`$black + 1`and `$attempts += 1;`。使用 $variable++，它更容易理解并阻止由此产生的任何错误。

# git - 如何将某些提交移动到新分支

> ID：12677493
> 
> 赞同：2
> 
> 时间：2012-10-01T16:44:24.070
> 
> 标签：git, git-branch, git-commit

我有提交 X 和 2 提交之后。我应该只将 X 移动到新分支。我怎样才能做到这一点？
（而且我的仓库也在远程仓库中，我不认为它到底是什么，但我不会得到“分离
的头”）非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:11:15.680

如果提交 X 是您要移植到新分支的唯一提交并且该分支是新的，则只需从该提交启动新分支。

```
$ git branch newbranch COMMIT_HASH 
```

如果您想将提交 X 移动到现有分支并且提交 X 不一定适合分支历史记录，那么您可以[选择](http://www.kernel.org/pub/software/scm/git/docs/git-cherry-pick.html)提交

```
$ git cherry-pick COMMIT_HASH 
```

# javascript - Javascript 正则表达式匹配字符串

> ID：12677495
> 
> 赞同：0
> 
> 时间：2012-10-01T16:44:32.910
> 
> 标签：javascript, regex, match

函数中的输入或点（总是沿线）：

> 华盛顿，T. 冲 3 码到 MT0

我想得到文本“ `to the MT0`”

“MT”将与 var 匹配，或者`homeacrynm`我`awayacrynm`将在函数调用之前初始化。这是我到目前为止所尝试的：

```
getEndSpotEugene: function(spot)
    {
        var regex = new RegExp("to the +("+homeacrynm+"|"+awayacrynm+")?([0-9]{1,2})","g");
        var matches = spot.match(regex);
        if (matches)
        {
            pos = matches[matches.length-1]
            matches = pos.match(/to the ([A-Z]+)?([0-9]{1,2})/);
            if (!matches[1])
            {
                matches=[pos,"V",50];   
            }
        }
        else
        {
            return -1;  
        }
        var acr = matches[1];
        var yard = matches[2];
        if (acr == homeacrynm) 
            return "H"+yard;
        else
            return "V"+yard;
    }, 
```

例如（一个简单的案例）：

```
homeacrynm = "MT"
var giveMe = getEndSpotEugene("Washington, T. rush for 3 yards to the MT11") 
```

`giveMe`应该是 H11 但它不是出于某种原因。

我也不太确定哪里错了。你们有没有看到我遗漏的东西？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:54:59.433

我做了一些日志并像这样明确声明 homeacrynm 和 awayacrynm ：

```
 var homeacrynm = "MT";
  var awayacrynm = "H";
  var getEndSpotEugene = function(spot)
  {
      var regex = new RegExp("to the +("+homeacrynm+"|"+awayacrynm+")?([0-9]{1,2})","g");
      console.log(regex);
      var matches = spot.match(regex);
      console.log(matches);
      if (matches)
      {
          pos = matches[matches.length-1]
          matches = pos.match(/to the ([A-Z]+)?([0-9]{1,2})/);
          if (!matches[1])
          {
              matches=[pos,"V",50];   
          }
      }
      else
      {
          return -1;  
      }
      var acr = matches[1];
      var yard = matches[2];
      console.log(acr);
      console.log(yard);          
      if (acr == homeacrynm) 
          return "H"+yard;
      else
          return "V"+yard;
  } 
```

奇怪的是，我得到了你所期望的H11！你得到什么？

# d - 如何在类中使用 std.functional.memoize？

> ID：12677498
> 
> 赞同：6
> 
> 时间：2012-10-01T16:44:56.467
> 
> 标签：d

我无法弄清楚如何在类中使用 memoize 函数。

```
import std.functional;

class A {
    int slowFunc(int a, int b) {
        return 0;
    }

    alias memoize!slowFunc fastFunc;
}

void main() {
    auto a = new A;
    a.fastFunc(1,2);
} 
```

尝试编译时出现错误：错误：需要'this'来访问成员slowFunc

我将如何进行这项工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T19:30:47.913

它实际上还不支持这一点。我们可以提出增强请求。这是我的实验实现：

```
import std.stdio;
import std.traits;
import std.typecons;
import std.datetime;

template isClassStruct(alias fun)
{
    enum bool isClassStruct = (is(fun == class) || is(fun == struct));
}

mixin template memoize(alias fun, uint maxSize = uint.max)
    if (isClassStruct!(__traits(parent, fun)))
{
    ReturnType!fun opCall(ParameterTypeTuple!fun args)
    {
        static ReturnType!fun[Tuple!(typeof(args))] memo;
        auto t = tuple(args);
        auto p = t in memo;
        if (p) return *p;
        static if (maxSize != uint.max)
        {
            if (memo.length >= maxSize) memo = null;
        }

        mixin("auto r = this." ~ __traits(identifier, fun) ~ "(args);");
        memo[t] = r;
        return r;
    }    
}

class A 
{
    int slowFunc(int a, int b) 
    { 
        int result;
        foreach (_; 0 .. 1024)
        {
            result += a;
            result += b;
        }
        return result;
    }

    mixin memoize!slowFunc fastFunc;
}

enum CallCount = 2048;

void main() 
{
    A a = new A;

    auto sw1 = StopWatch(AutoStart.yes);
    foreach (x; 0 .. CallCount)
    {
        a.slowFunc(100, 100);  // 11232 usecs
    }
    sw1.stop();
    writeln(sw1.peek.usecs);

    auto sw2 = StopWatch(AutoStart.yes);
    foreach (x; 0 .. CallCount)
    {
        a.fastFunc(100, 100);  // 302 usecs
    }
    sw2.stop();
    writeln(sw2.peek.usecs);
} 
```

时间注释当然是针对我的机器的。:)

# php - what is the purpose of the extra asterisks in php comments?

> ID：12677507
> 
> 赞同：22
> 
> 时间：2012-10-01T16:45:22.890
> 
> 标签：php, comments, standards, pear

I've (finally) been reading up on PEAR (php) coding standards.

What is the purpose of commenting like this:

```
/** 
*   Here is my comment
*   I Wrote this in a haiku
*   But why put the stars?
*/ 
```

As opposed to this:

```
/* 
   Here is a comment
   No haiku or 
   anything special, but it still works!
*/ 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-01T16:50:56.007

The `/** stuff */` document is also referred to as [DocBlock](http://en.wikipedia.org/wiki/PHPDoc#DocBlock) notation.

It's used to document PHP functions, classes, etc.

```
/** 
* A test function
*
* @param  foo $bar
* @return baz
*/
function test(foo $bar) { return new baz; } 
```

Some editors make good use of this to perform their Code Insight feature, a very powerful tool that reduces the time you have to spend looking at your old function declarations. Aptana and Zend Studio have this feature, probably others as well.

You can also use it in combination with [Reflection](http://au.php.net/manual/en/reflectionclass.getdoccomment.php) to do some sort of AOP, doing runtime inspection of the DocBlock above your declarations. In fact, Doctrine uses it to build an [object attribute map](http://docs.doctrine-project.org/en/2.0.x/reference/basic-mapping.html) for their "Active Record" implementation.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T16:49:58.830

The double asterisk comment is used sometime by certain documentation systems. The documentation system will proccess the block and look for certain keywords like @author or @var.

Single asterisk comments wil be treated as // comments.

See PhpDoc [http://www.phpdoc.org/docs/latest/guides/types.html](http://www.phpdoc.org/docs/latest/guides/types.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-01T16:49:29.810

I agree with ajon and Quentin. Mainly it's readability. However,there is one more thing.

There are automatic documentation generators (like doxygen ).

They require some particular comment formatting to include these comments into documentation. I believe this style of commenting is used exactly for this purpose (look at following doxygen documentation page - [http://www.doxygen.nl/manual/docblocks.html](http://www.doxygen.nl/manual/docblocks.html))

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-01T16:46:09.770

Readability.

It clearly highlights the commented section to people reading the code.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-01T16:47:06.897

I think it is mostly just for appearance/readability. Imagine you have a very long comment section that extends beyond one screen. Then seeing those asterisks lets you know it is part of a comment even if you can't see the beginning and end.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-04-15T11:06:17.587

If you use the excellent free text editor jEdit for editing your PHP it highlights the code in different colours to show what is a verb, what is a variable etc.

If you comment out a block with /* ... */ everything inside the block goes orange, making it difficult to read the code.

If you instead comment it out with /** ... */ then it changes everything in the block to a different set of colours that still highlight the different parts of the code, meaning the code remains very readable.

PS. If you use Notepad or similar to edit your PHP code then I strongly suggest that you get jEdit. It will save you a huge amount of time and frustration. Things like automatically indicating the start and end of { } , ( ) etc.

# sql - 用于在数据库中插入数据的简单 sql 查询

> ID：12677512
> 
> 赞同：-6
> 
> 时间：2012-10-01T16:45:58.900
> 
> 标签：sql

我正在处理与数据库的事务。

我想写一个 sql 查询，它只插入那些从 101 开始的数字。

```
sql = "insert into tablex (data) where values (101123)";
sql = "insert into tablex (data) where values (10100)";  
sql = "insert into tablex (data) where values (101125)"; 
```

所有插入都应该使用仅以 101 开头的值。
它不应输入其他值，例如：

```
sql = "insert into tablex (data) where values (105232)"; 
```

数字 101123、10100、101123、105232 来自带有某些程序的文本文件。我只想在表格中插入那些以 101 开头的数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T16:50:01.283

听起来您想使用`LIKE`（[SQL Fiddle Demo](http://sqlfiddle.com/#!2/e79a0/1)）进行过滤

```
insert into yourtable (col1)
select yourColumn
from yourtable
where yourColumn LIKE '101%' 
```

# android - 无法将多个文件附加到 Android 中的电子邮件

> ID：12677513
> 
> 赞同：2
> 
> 时间：2012-10-01T16:46:05.150
> 
> 标签：android, android-intent, email-attachments

我想将多个文件附加到电子邮件中。

首先，我正在准备`Uri`'s 列表。

```
void prepareListOfUri()
{
    listOfUri = new ArrayList<Uri>();
    File fileTemp = new File(android.os.Environment.getExternalStorageDirectory(), "BuyNowImages");
    fileTemp.mkdirs();

    for (int i = 0; i < listOfImageView.size(); i++)
    {
        try
        {
            ByteArrayOutputStream bos = new ByteArrayOutputStream();
            Drawable drawable = listOfImageView.get(i).getDrawable();
            Bitmap bitmapPicked = ((BitmapDrawable) drawable).getBitmap();
            bitmapPicked.compress(CompressFormat.JPEG, 75, bos);
            byte[] image = bos.toByteArray();
            File file = new File(fileTemp, "buynow_product" + i + ".jpg");
            file.createNewFile();
            // write the bytes in file
            FileOutputStream fo = new FileOutputStream(file);
            fo.write(image);
            Uri uri = Uri.parse("file://" + file.getAbsolutePath());
            listOfUri.add(i, uri);
        } catch (Exception e)
        {
            // TODO: handle exception
            e.printStackTrace();
        }
    }
} 
```

并用于附加和发送电子邮件

```
void sendMultipleAttachments()
    {
        try
        {
            Intent intentEmail = new Intent(Intent.ACTION_SEND);
            intentEmail.setType("text/plain");
            String[] recipients = new String[] { "" };

            intentEmail.putExtra(Intent.EXTRA_EMAIL, recipients);
            intentEmail.putExtra(Intent.EXTRA_SUBJECT, "subject of email");
            intentEmail.putExtra(Intent.EXTRA_TEXT, "body of email");
            intentEmail.setType("image/jpeg");
            intentEmail.putParcelableArrayListExtra(Intent.EXTRA_STREAM, listOfUri);
            startActivity(intentEmail);
        } catch (android.content.ActivityNotFoundException ex)
        {
            Toast.makeText(this, "There are no email clients installed.", Toast.LENGTH_SHORT).show();
            ex.printStackTrace();
        } catch (Exception e)
        {
            e.printStackTrace();
            Toast.makeText(this, "Exception " + e.getMessage(), Toast.LENGTH_SHORT).show();
        }
    } 
```

我已经`Uri`通过单独发送每个文件来检查 's 的列表是否准备得很好。但是在使用上面的代码发送多个文件时，我得到了以下信息`Exception`。

```
Key android.intent.extra.STREAM expected Parcelable but value was a java.util.ArrayList.  The default value <null> was returned. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T05:02:01.860

而不是`Intent.ACTION_SEND`我使用`Intent.ACTION_SEND_MULTIPLE`它并且它有效。

来自[开发者文档](http://developer.android.com/reference/android/content/Intent.html#ACTION_SEND_MULTIPLE)：

> 活动行动：将多个数据传递给其他人。像`ACTION_SEND`，除了数据是多个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:23:02.043

您可以使用意图数组和使用意图数组的 startActivity。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-12T18:01:00.253

如果（AndroidUtil.isValidaEmail（电子邮件））{

```
 Intent intent = new Intent(Intent.ACTION_SEND_MULTIPLE);

        BitmapFactory.Options options = new BitmapFactory.Options();  
        options.inPreferredConfig = Bitmap.Config.ARGB_8888;      
        Bitmap bmp = BitmapFactory.decodeByteArray(Produto.getTodosProdutos().get(0).getAnexo(), 0, Produto.getTodosProdutos().get(0).getAnexo().length, options); 

        String path = Images.Media.insertImage(getActivity().getContentResolver(), bmp,"title", null);
        Uri screenshotUri = Uri.parse(path);

        ArrayList<Uri> uris = new ArrayList<Uri>();

        uris.add(screenshotUri);            

        intent.putExtra(Intent.EXTRA_EMAIL, new String[] { emailRemetente });
        intent.putExtra(Intent.EXTRA_SUBJECT, assuntoMontado);
        intent.putExtra(Intent.EXTRA_TEXT, corpoGeralEmail);
        intent.putExtra(Intent.EXTRA_STREAM, uris);
        intent.setType("text/rfc822");
        startActivityForResult(Intent.createChooser(intent, "Choose an Email client :"), 0);

        isEnviado = true;

    }else{

        AndroidUtil.createDialog(getActivity(), R.style.DialogStyle, "Alerta", "Email invalido").show();

    } 
```

# extjs - Extjs 4.1 检查更改监听器

> ID：12677522
> 
> 赞同：2
> 
> 时间：2012-10-01T16:46:34.463
> 
> 标签：extjs, extjs4.1

处理菜单检查项目事件的正确方法是什么？

我有这个菜单：

```
 {
      xtype: 'button',
      id: 'types_btn',
      autoWidth: true,
      text: 'Types',
      menu: {
              xtype: 'menu',
              frame: true,
              id: 'types_menue',

              items: [
                       {
                         xtype: 'menucheckitem',
                         id: 'f_type',
                         text: 'first',
                         listeners: {
                            checkchange: {
                                    fn: me.onFirstButtoncheckchange,
                                    scope: me
                                    }
                                      }
                       },
                       {
                        xtype: 'menucheckitem',
                        id: 's_type',
                    text: 'second',
                         listeners: {
                            checkchange: {
                                    fn: me.onSecondButtoncheckchange,
                                    scope: me
                                    }
                                      }
                       } 
```

然后是函数：

```
onFirstButtoncheckchange: function(menucheckitem, checked, options) {

    var t = Ext.getCmp('f_type');
               if (t.checked)
                   goToFunction(???);
                 .
                 .
    },
 onSecondButtoncheckchange: function(menucheckitem, checked, options) {

    var t = Ext.getCmp('s_type');
               if (t.checked)
                   goToFunction(???);
                 .
                 .
    }, 
```

1-无论如何使用一个侦听器并在其中收集所有不同的功能？

2- 如您在代码中所见，如何将当前项目发送到 goToFunction()？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:52:20.977

只需为每个菜单检查项创建一个处理程序：

```
items: [{
    xtype: 'menucheckitem',
    text: 'select all' ,
    id: 'first' ,
    listeners: {
        checkchange: me.myHandler
    }
},{
    xtype: 'menucheckitem',
    text: 'select specific' ,
    id: 'second' ,
    listeners: {
        checkchange: me.myHandler
    }
}] 
```

您的处理程序定义如下：

```
myHandler: function (menucheckitem, checked, opts) {
    switch (menucheckitem.getId ()) {
        // Here handles the first
        case 'first':
            if (checked) {
                console.log ('First checked!');
                goToFunction ();
            }
            break;
        // Here handles the second
        case 'second':
            if (checked) {
                console.log ('Second checked!');
                goToFunction ();
            }
            break;
        default:
            console.log ('Whatever!');
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-24T10:57:45.317

看起来听众不会经常被触发。您可以改用 checkHandler 配置。

# macos - Adobe AIR 运行时

> ID：12677529
> 
> 赞同：1
> 
> 时间：2012-10-01T16:47:18.550
> 
> 标签：macos, actionscript-3, air, adobe, codesign

我有`Mac OS`一个 .app，它是 .app 的结果`AIR app installer`。

我想对这些文件进行代码设计，然后像`.dmg`文件或安装程序一样重新分发应用程序。

问题是，如果您知道是否可以制作安装程序或首先检查是否安装的东西`AIR runtime`，然后安装我的应用程序。（喜欢`.NET framework CLIENT profile`）

# jquery - 给定列上的数据表自定义排序功能

> ID：12677532
> 
> 赞同：1
> 
> 时间：2012-10-01T16:47:36.690
> 
> 标签：jquery, datatables

我正在使用 jquery 数据表，我需要通过首先显示复选框来按包含复选框的第一列对数据进行排序

```
oTable =  $('#userTable', context).dataTable(
{
    "sAjaxSource":'/ajax/getdata/',
    "fnServerData": function ( sSource, aoData, fnCallback, oSettings ) 
    {
        oSettings.jqXHR = $.ajax( 
        {
            "dataType": 'json',
            "type": "POST",
            "url": sSource,
            "data": params,
            "success" :  function(data)
            {
                fnCallback(data);
                fnSortBySelected();
            } 
        });
    }
});

var fnSortBySelected = function()
{
    var oSettings = oTable.fnSettings();
    var i = 0; 

    $('td:first-child input[type=checkbox]',oTable).sort(function(a, b)
    {
        if(a.checked) 
            oTable.fnUpdate( oSettings.aoData[i]._aData, i, 0);
        else 
            oTable.fnUpdate( oSettings.aoData[i+1]._aData, i, 0);
        i++;       
    });
} 
```

* * *

感谢您的时间，这是我到目前为止所尝试的：

```
 oTable =  $('#userTable', context).dataTable({
"sAjaxSource":'/ajax/getdata/',
"fnServerData": function ( sSource, aoData, fnCallback, oSettings ) {
oSettings.jqXHR = $.ajax( {
           "dataType": 'json',
           "type": "POST",
           "url": sSource,
           "data": params,
           "success" :  function(data){
               fnCallback(data);
               fnSortBySelected();
           } 
        } );
}

 });

var fnSortBySelected = function()
{
    var oSettings = oTable.fnSettings();
    var i = 0; 

    $('td:first-child input[type=checkbox]',oTable).sort(function(a, b){
        if(a.checked) 
             oTable.fnUpdate( oSettings.aoData[i]._aData, i, 0);
        else 
             oTable.fnUpdate( oSettings.aoData[i+1]._aData, i, 0);
         i++;       
    } );

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:06:29.280

我通过在每个选定的复选框上创建一个隐藏列（第一列索引 0）来使用士力架的答案，我将相应的隐藏列设置为“选定”，然后我对该隐藏列和名字列上的表进行排序

隐藏第一列使用

```
oTable.fnSetColumnVis( 0, false ); 
```

对于每个单击的复选框，请执行此操作

```
$('input[tyope=checkbox]',oTable).each(function(){
  var aPos = oTable.fnGetPosition($(this).parents('tr:first').get(0));
  oTable.fnUpdate( 'selected',aPos, 0 );
  $(this).attr('checked', true);  
}); 
```

然后打电话

```
oTable.fnSort( [ [0,'desc'],[2,'asc']] ); 
```

谢谢你们的帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T11:51:08.600

只需为您的列添加正确的 aoColumnDefs：

```
oTable =  $('#userTable', context).dataTable(
{
    "aoColumnDefs": [
        { "sSortDataType": "dom-checkbox", "aTargets": [ 0 ] }
    ],
    ..... 
```

请参阅[数据表列](http://datatables.net/usage/columns)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T16:59:57.733

也许你可以试试这个：

```
$(document).ready(function() {
  var oTable = $('#example').dataTable();

  // Sort immediately with columns 0 and 1
  oTable.fnSort( [ [0,'asc'], [1,'asc'] ] );
} ); 
```

# javascript - 拖动项目时触发的单击事件 (Firefox)

> ID：12677534
> 
> 赞同：7
> 
> 时间：2012-10-01T16:47:45.430
> 
> 标签：javascript, jquery, backbone.js, twitter-bootstrap, jquery-ui-sortable

当我单击一个项目时，我可以通过[bootstrap-editable](http://vitalets.github.com/bootstrap-editable/)编辑该字段。
当我拖放项目时，我可以通过[jquery.ui.sortable](http://jqueryui.com/demos/sortable/#connect-lists)更改项目的位置。

使用谷歌浏览器一切正常。
通过使用 Firefox `15.0.1`，我遇到了以下问题。

移动项目后，会出现编辑字段的弹出窗口。
我想这个事件是由于事件传播造成的。
我试图修复它，但没有成功……</p>

这是我的代码：

```
 onSortReceive: function (e, ui) {
        this.$(ui.item[0]).trigger('drop', this.options.taskType);
        // TODO just on firefox there is a issue related to bootstrap-editable
        // it shows the popup even if there is e.stopPropagation() here
        // the only way to fix this issue is to re-render the view
        e.stopPropagation(); // it makes no difference 
        this.render(); // it fix the problem 
                       // but I want to avoid to re-render the view
    }, 
```

有关完整代码，您可以继续：
[https ://github.com/antonioJs/CoCoTask/pull/21/files](https://github.com/antonioJs/CoCoTask/pull/21/files)

对于工作版本，您可以继续：
[http](http://computerone.altervista.org/CoCoTask/) ://computerone.altervista.org/CoCoTask/ （问题出在 Firefox 上）

知道如何解决问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:31:12.540

好的，这是我找到的一种工作方式。`taskItem.js`替换为`onRender`以下代码：

```
 onRender: function () {
        var sortInAction = false;
        this.$el.find('label').mouseup(function(e) {
          sortInAction = 'absolute' === $(e.target).closest('li').css('position');
        }).click(function(e) {
            if (sortInAction)
              e.stopImmediatePropagation();
        }).editable({
            type: 'textarea',
            name: 'task-name',
            validate: this.editTaskName,
            template: '<textarea rows="3"></textarea>'
        });
    }, 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:20:51.220

您应该 e.preventDefault()`mouseup`事件，而不是`sortreceive` `jquery.ui`事件。也许这样的事情会起作用（未经测试）：

```
'mouseup li': 'liMouseUp'

/* ... */

liMouseUp: function(e) {
    if ($(e.target).is('.ui-draggable-dragging')) {
        e.preventDefault();
    }
} 
```

# javascript - 在js中打印数组值

> ID：12677535
> 
> 赞同：4
> 
> 时间：2012-10-01T16:47:47.940
> 
> 标签：javascript, arrays, string, code-translation

我正在尝试创建一个函数，它将通过一个数组运行并将它的值收集到一个看起来像这样的字符串：'[1,2,3]'。在某些情况下，我还需要它根据给定的索引仅显示数组的一部分。例如：从索引 0 打印到索引 1 的数组 [1,2,0] 将如下所示：'[1,2]'。出于某种原因，我的函数根本不提供任何输出。这里是：

```
function Tower(size, isFull) {
    this.count = 0;
    this.tower = new Array(size);

    this.add = function(disk) {
        this.tower[this.count++] = disk;
    };

    if (isFull) {
        for (var i = 1; i <= size; i++) {
            this.add(i);
        };
    }

    this.canAdd = function(disk) {
        return this.count == 0 || this.tower[this.count - 1] > disk;
    };

    this.getTopDiskValue = function() {
        return (this.count > 0) ? this.tower[this.count - 1] : 0;
    };

    this.popTop = function() {
        return this.tower[--this.count];
    };

    this.isFull = function() {
        return this.count == this.tower.length;
    };

    this.printable = function() {
        var output = "[";
        for (var i = 0; i < this.count; i++) {
            output += "" + this.tower[i] + ',';
        }
        return output.substring(0, output.length() - 1) + (output.length() > 1 ? ']' : "");
    };
} 
```

我希望 printable() 函数返回字符串，以便代码：

```
var tower = new Tower(3,true);
alert(tower.printable()); 
```

将弹出一个带有文本“[1,2,3]”的警告框。该对象是 Java 的翻译。顺便说一句，它在 java 中效果很好，我猜翻译并不完美。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T16:49:46.817

你做的事情太复杂了。

假设您有一个数组声明为

```
var array = [1, 2, 3]; 
```

你得到想要的字符串

```
return '['+array.join(',')+']'; 
```

You don't need pop or add functions, they're also native (and heavily optimized) :

```
var last = array.pop()
array.push(newItem); 
```

Reference :

*   [join](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join)
*   [pop](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/pop)
*   [push](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)

Note that all browsers offer a console, in which you'll find a detailed explanation of your errors. Have a look for example at the [Chrome Developer Tools](https://developers.google.com/chrome-developer-tools/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T16:50:47.487

use the `Array.join()` method:

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join)

* * *

```
this.printable = function() {
    var output = new Array();
    for (var i = 0; i < this.count; i++) {
        output.push(this.tower[i]);
    }
    return output.length == 0 
        ? "" 
        : "[" + output.join(",") + ']';
}; 
```

or if it's as simple as it looks:

```
this.printable = function() {
    return this.count == 0 
        ? "" 
        : "[" + this.tower.join(",") + ']';
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T16:53:10.390

JavaScript is not Java - you don't get the length of an array or string by calling its `.length()` method, but just by retrieving its `.length` property. The exception which is thrown when you try to invoke the number is what crashes your script and prevents the alert. This would work:

```
this.printable = function() {
    var output = "[";
    for (var i = 0; i < this.count; i++) {
        output += "" + this.tower[i] + ',';
    }
    return output.substring(0, output.length - 1) + (output.length > 1 ? ']' : "");
}; 
```

However, you just can use the native [`.join()` method](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join) to concatenate the array's values. Also, you should add your methods on the prototype of your `Tower` objects:

```
Tower.prototype.printable = function() {
    if (this.count)
        return "[" + this.tower.slice(0, this.count).join(",") + "]";
    else
        return "";
}; 
```

Btw: Usually this method is named `toString` - not only for convenience, but also it would get used when a Tower object is casted to a string value.

# popup - GWTP - 清除 PopoupSlot

> ID：12677537
> 
> 赞同：0
> 
> 时间：2012-10-01T16:48:00.363
> 
> 标签：popup, presenter, gwtp

我是 gwtp 编程新手，使用 popupslot 时遇到问题：我有几个嵌套的演示者。一位演示者显示了一个弹出对话框。每次显示此演示者时，都会显示弹出对话框 - 包括。最后一个字段值。

如何清除 PopupSlot？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T02:17:19.677

为了隐藏弹出对话框，您必须调用`popupView.hide()`. 如果希望下次弹出时清除该弹出框，则必须在调用该`hide()`方法之前清除表单字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:55:15.123

As I understand you have presenter A that add PresenterWidget B to popup slot. Every time Presenter A is revealed PresenterWidget B revealed too.

The reason of such behavior is that you add PreseneterWidget B to popup slot on one of life-cycle method. Check your onReveal and prepareFromRequest methods. They are called every time your presenter becomes visible. May be you should add some condition or move addToPopupSlot call to other place.

# .net - 这是很好的 VB.Net 编码语法吗？

> ID：12677540
> 
> 赞同：0
> 
> 时间：2012-10-01T16:48:04.720
> 
> 标签：.net, vb.net

我需要检查两个文本框 textbox_price 和 textbox_quantity 是否包含数值或根本没有值，如果，给出具体的错误消息。textbox_item 只允许使用非数字字符。目前使用 OR 的以下串联并且它有效，但我想知道这是否有效且良好。如您所见，支票很长且难以阅读。帮助表示赞赏。

```
If textbox_item.Text = "" Or textbox_price.Text = "" Or textbox_quantity.Text = "" Or          IsNumeric(textbox_price.Text) = False Or IsNumeric(textbox_quantity.Text) = False Or IsNumeric(textbox_item.Text) = True Then
        MsgBox("Please fill out every textbox with valid data", MsgBoxStyle.Information, "Invalid entry")
        textbox_price.Text = ""
        textbox_item.Text = ""
        textbox_quantity.Text = ""
        Exit Sub
    End If 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T17:01:54.693

仅查看`If...Then`语句的逻辑（而不是您希望执行的代码），我会将其更改为：

```
If textbox_item.Text = "" OrElse textbox_price.Text = "" OrElse textbox_quantity.Text = "" OrElse _
    IsNumeric(textbox_price.Text) = False OrElse IsNumeric(textbox_quantity.Text) = False OrElse IsNumeric(textbox_item.Text) = True Then
    'Code to execute goes here
End If 
```

基本上，在每种情况下都将其更改`Or`为。`OrElse`这样，只要满足其中一个条件，就不会检查其他条件。

`OrElse`这是一篇用 VB .NET解释的简短文章：

[MSDN - OrElse 运算符](http://msdn.microsoft.com/en-us/library/ea1sssb2%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T17:04:45.227

我希望看到一个长的 If..Then..ElseIf 链，因此错误消息可以针对问题。

```
If textbox_Item.Text = "" Then
    msgbox(errmsg1)
Elseif Not IsNumberic(textbox_Item.Text) Then
    msgbox(errmsg2)
Elseif .... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T17:58:39.720

您可能想检查 IsNumeric 的实现在幕后做了什么。我也质疑你在 If 块之后在做什么。如果您打算在检查后使用该值，最好只使用 Decimal.TryParse （或您想要使用的任何数字 tryparse ）并在 else 子句中发送验证提示：

```
Dim price As Decimal
Dim quantity As Integer
Dim item as As Double

If Decimal.TryParse(textbox_price.text, price) 
   AndAlso Integer.TryParse(textbox_quantity.Text, quantity)
   AndAlso Double.TryParse(textbox_item.Text, item) Then
   '' Do something with the values
Else
   '' Send validation prompt
End If 
```

此选项的优点是您不会两次解析该值（IsNumeric 和 TryParse）。我记得， IsNumeric 尝试解析，但只是将结果丢弃。如果您想要结果，请使用 TryParse。TryParse 还处理空字符串和空字符串，因此您自己也不需要明确地进行这些测试。

# c# - 发送任何方法作为参数以获取元数据

> ID：12677543
> 
> 赞同：3
> 
> 时间：2012-10-01T16:48:09.747
> 
> 标签：c#, .net

有没有办法将***任何***方法作为参数发送？我需要对所有类型的方法都这样做，而不是关心签名和返回。说这样的话（糟糕的代码，只是为了这个想法）：

```
public class Foo
{
...
void TestMethod(DontKnowWhatToPutHere theDelegate) {}
...
}

...

foo.TestMethod(-foo.AnotherMethod(1,2)-);
foo.TestMethod(-foo.AnotherMethod("I don't care method signature nor returning type")-); 
```

我尝试使用`Action`as 参数进行操作，但没有成功。

**我需要做**的是将***任何***方法发送到函数，然后使用反射来获取方法名称和参数，所以如果你们有其他方法可以弄清楚，我也很乐意听到。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T16:50:15.330

不，编译器必须始终能够识别要转换为的特定委托，并且没有与所有方法签名兼容的单一委托类型。您可以通过使用`Action`,等，然后`Action<T>`,等来获得很长的路要走...但即使在涉及和参数时也会失败。此外，还需要考虑重载解决方案。`Action<T1, T2>``Func<TResult>``Func<T1, TResult>``out``ref`

此外，您的语法正在传递方法调用的*结果*，这与首先传递方法不同。（这忽略了`-`前缀/后缀，这似乎是虚构的语法。）

您*可以*使用`Expression<Action>`并包装方法调用：

```
void TestMethod(Expression<Action> action)
{
    ...
} 
```

然后：

```
foo.TestMethod(() => foo.AnotherMethod(1,2)); 
```

然后，您可以在其中`TestMethod`查看表达式树以找出它是一个方法调用，计算出目标、参数等。有关更多信息，请参阅[表达式树的 MSDN 页面。](http://msdn.microsoft.com/en-us/library/bb397951.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T16:51:36.143

您可以传递[MethodInfo](http://msdn.microsoft.com/ru-ru/library/system.reflection.methodinfo.aspx)对象

```
void TestMethod(MethodInfo methodInfo, object methodObject, object[] parameters)
{
    methodInfo.Invoke(methodObject, parameters);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T16:51:52.680

```
public class Foo
{
   void TestMethod(Action<int, int> theDelegate) {}
   void TestMethod(Action<string> theDelegate) {}
}

foo.TestMethod(() => foo.AnotherMethod(1,2));
foo.TestMethod(() => foo.AnotherMethod("I don't care method signature nor returning type")); 
```

# python - 如何使用 FileField 在 django 中浏览服务器端文件？

> ID：12677546
> 
> 赞同：4
> 
> 时间：2012-10-01T16:48:15.617
> 
> 标签：python, django

如题，我有表格

```
file = forms.FileFIeld(widget = forms.FIleInput()) 
```

但这允许我浏览客户端计算机上的文件。我想向我展示我自己的服务器端文件。我完全了解安全风险。这是我的个人项目，不会被其他任何人使用（以防有人对我大喊大叫）。它不必只是相同的机制。我只想从表单中获取这个名字。不得上传或下载任何内容。

这将作为另一个服务器应用程序的文件选择。

如果无法浏览整个计算机，如何指定可以存储文件以供进一步浏览的目录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T17:21:07.990

如果你想建立一个系统来远程访问你计算机上的文件，你可以使用 ftp 或 ssh 来完成。

如果您需要访问特定目录中的文件，您可以将它们放在 django 的`static`一部分，并让[django 为您提供静态内容](https://docs.djangoproject.com/en/1.2/howto/static-files/)。然而，这不是 django 的预期设计，您不妨使用 Apache 提供 http 服务器的文件。

如果你正在寻找构建一个 google docs/dropbox 类型的网络服务，那么 django 可以作为一个网络框架来帮助你。但是，您需要运行某种本地索引并使用[PyLucene](https://docs.djangoproject.com/en/1.2/howto/static-files/)之类的东西将所有文件元数据索引添加到您的数据库中，然后将相同的文件上传到在线或您的服务文件夹中的可下载[路径。](http://aws.amazon.com/s3/)`static`这本身不是 Django 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T16:59:42.460

您可以通过模型浏览存储的文件。

假设你的模型是这样声明的

```
import os
class Document(models.Model):
    name = models.CharField(max_length=64)
    doc_file = models.FileField(upload_to='documents') 
```

您可以像任何其他字段一样获取文件

```
names = []
# To browse your saved file, get the containing models
documents = Document.objects.all()
for doc in documents:
    # This is how you get the URL of the file field
    url = doc.doc_file.url
    # If you need the path of the stored file (in the server)
    doc_path = doc.doc_file.path
    # get name and size of the file
    name, size = doc.doc_file.name.split(os.path.sep)[-1], doc.doc_file.size
    names.append(name)
#process your file names
... 
```

然后，您只需处理 URL，例如，将其显示给您的用户。

# android - 片段没有正确地膨胀布局

> ID：12677547
> 
> 赞同：1
> 
> 时间：2012-10-01T16:48:17.607
> 
> 标签：android, layout, android-fragments, inflate, android-tablelayout

我有一个使用`TableLayout`. 我正在动态地`TableRows`将`TableLayout`. 我已经将布局创建为片段，但是当我将该片段添加到我的片段时，`FragmentActivity`它给了我以下错误：

```
Binary XML file line #25: Error inflating class fragment 
```

这是我的代码：

```
 public class TodayPriceList extends Fragment {
    LinearLayout llTop = null;
    LinearLayout llPriceList = null;
    RelativeLayout rlPriceTableHeading = null;
    TableLayout priceTableHedaer = null;
    TableLayout tlPriceList = null;
    ScrollView svGridScroll = null;
    TableRow row;
    TextView tvSymbol = null;
    TextView tvSharevolume = null;
    TextView tvOpen = null;
    TextView tvHigh = null;
    TextView tvLow = null;
    TextView tvLastTrade = null;

    TextView symbol,shareVol,open,high,low,lastTrade;
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        View view = inflater.inflate(R.layout.todaypricelist, container, false);
        llTop = (LinearLayout)view.findViewById(R.id.ll_top);
        llPriceList = (LinearLayout)view.findViewById(R.id.ll_priceList);
        rlPriceTableHeading = (RelativeLayout)view.findViewById(R.id.rl_priceTable_heading);
        llPriceList = (LinearLayout)view.findViewById(R.id.ll_priceList);
        tlPriceList = (TableLayout)view.findViewById(R.id.priceTable);
        priceTableHedaer = (TableLayout)view.findViewById(R.id.priceTableHedaer);
        svGridScroll = (ScrollView)view.findViewById(R.id.ScrollView11);
        tvSymbol = (TextView)view.findViewById(R.id.tvSymbol);
        tvSharevolume = (TextView)view.findViewById(R.id.tvSharevolume);
        tvOpen = (TextView)view.findViewById(R.id.tvOpen);
        tvHigh = (TextView)view.findViewById(R.id.tvHigh);
        tvLow = (TextView)view.findViewById(R.id.tvLow);
        tvLastTrade = (TextView)view.findViewById(R.id.tvLastTrade);

        //fillPriceTable(container);
        priceTableHedaer.addView(tvSymbol);
        priceTableHedaer.addView(tvSharevolume);
        priceTableHedaer.addView(tvOpen);
        priceTableHedaer.addView(tvHigh);
        priceTableHedaer.addView(tvLow);
        priceTableHedaer.addView(tvLastTrade);

        //define array data
        String[] dummy=new String[]{"AEL.N000","48.56","16.00","15.00","16.00","18.00"};

        //Converting to dip unit
                int dip = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_PX,
                        (float) 1, getResources().getDisplayMetrics());

                for (int i = 0; i < 100; i++) {

                    row=new TableRow(container.getContext());
                    int rowcount=i%2;
                    if(rowcount>0){
                        row.setBackgroundColor(Color.parseColor("#E0F8F7"));
                    }
                    symbol = new TextView(container.getContext());
                    //t1.setTextColor(getResources().getColor(R.color.yellow));
                    shareVol = new TextView(container.getContext());
                    //t2.setTextColor(getResources().getColor(R.color.dark_red));
                    open=new TextView(container.getContext());
                    high=new TextView(container.getContext());
                    low=new TextView(container.getContext());
                    lastTrade=new TextView(container.getContext());

                    symbol.setText(dummy[0]);
                    shareVol.setText(dummy[1]);
                    open.setText(dummy[2]);
                    high.setText(dummy[3]);
                    low.setText(dummy[4]);
                    lastTrade.setText(dummy[5]);

                    symbol.setWidth(55*dip);
                    shareVol.setWidth(30*dip);
                    open.setWidth(30*dip);
                    high.setWidth(30*dip);
                    low.setWidth(30*dip);
                    lastTrade.setWidth(30*dip);

                    symbol.setGravity(android.view.Gravity.CENTER_VERTICAL);
                    shareVol.setGravity(android.view.Gravity.CENTER_VERTICAL);
                    open.setGravity(android.view.Gravity.CENTER_VERTICAL);
                    high.setGravity(android.view.Gravity.CENTER_VERTICAL);
                    low.setGravity(android.view.Gravity.CENTER_VERTICAL);
                    lastTrade.setGravity(android.view.Gravity.CENTER_VERTICAL);

                    symbol.setTextSize(12);
                    shareVol.setTextSize(12);
                    open.setTextSize(12);
                    high.setTextSize(12);
                    low.setTextSize(12);
                    lastTrade.setTextSize(12);

                    symbol.setHeight(20*dip);
                    symbol.setPadding(5, 0, 0, 0);

                    row.addView(symbol);
                    row.addView(shareVol);
                    row.addView(open);
                    row.addView(high);
                    row.addView(low);
                    row.addView(lastTrade);

                    tlPriceList.addView(row, new TableLayout.LayoutParams(
                            LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));

                }
                rlPriceTableHeading.addView(priceTableHedaer);
         svGridScroll.addView(tlPriceList);
         llPriceList.addView(svGridScroll);
         llTop.addView(rlPriceTableHeading);
         llTop.addView(llPriceList);
     return view;
    }

} 
```

这是我的 layout.xml 文件

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
     android:id="@+id/ll_top"
     >

    <RelativeLayout
        android:id="@+id/rl_priceTable_heading"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#E6E6E6" >
<TableLayout

                    android:id="@+id/priceTableHedaer"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:stretchColumns="*"
                    android:shrinkColumns="*" 
                    android:weightSum="50">

    <TableRow >
    <TextView android:id="@+id/tvSymbol"
            android:layout_width="70dip"

            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:gravity="center|left"
            android:text="@string/symbol"
            android:textStyle="normal"
            android:textColor="#2E2EFE"
            android:textSize="11dip"
            android:paddingLeft="5dip"

            >
        </TextView>

        <TextView
            android:id="@+id/tvSharevolume"
            android:layout_width="45dip"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_toRightOf="@+id/tvSymbol"
            android:gravity="center|left"
            android:text="@string/sharevolume"
            android:textColor="#2E2EFE"
            android:textSize="11dip"
            android:textStyle="normal"
             >

        </TextView>

        <TextView
            android:id="@+id/tvOpen"
            android:layout_width="35dip"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_toRightOf="@+id/tvSharevolume"
            android:gravity="center|left"
            android:text="@string/open"
            android:textColor="#2E2EFE"
            android:textSize="11dip"
            android:textStyle="normal" />

        <TextView
            android:id="@+id/tvHigh"
            android:layout_width="45dip"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_toRightOf="@+id/tvOpen"
            android:gravity="center|left"
            android:text="@string/high"
            android:textColor="#2E2EFE"
            android:textSize="11dip"
            android:textStyle="normal" />

        <TextView
            android:id="@+id/tvLow"
            android:layout_width="45dip"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_toRightOf="@+id/tvHigh"
            android:gravity="center|left"
            android:text="@string/low"
            android:textColor="#2E2EFE"
            android:textSize="11dip"
            android:textStyle="normal" />

        <TextView
            android:id="@+id/tvLastTrade"
            android:layout_width="45dip"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_toRightOf="@+id/tvLow"
            android:gravity="center|left"
            android:text="@string/lastTrad"
            android:textColor="#2E2EFE"
            android:textSize="11dip"
            android:textStyle="normal" />

        </TableRow>
        </TableLayout>

    </RelativeLayout>
    <LinearLayout android:id="@+id/ll_priceList"
        android:layout_height="wrap_content" android:layout_width="wrap_content">
        <ScrollView android:id="@+id/ScrollView11"
            android:layout_width="wrap_content" android:layout_height="wrap_content"
            android:fillViewport="true">

                <TableLayout
                    xmlns:android="http://schemas.android.com/apk/res/android"
                    android:id="@+id/priceTable"
                    android:layout_width="wrap_content"
                    android:background="#FFFFFF"

                    android:stretchColumns="*"
                    android:shrinkColumns="*" 
                    android:layout_height="50dip">
                </TableLayout>

        </ScrollView>
    </LinearLayout>
</LinearLayout> 
```

编辑：这是解决问题的更新代码。

```
 public class TodayPriceList extends Fragment {
    TableLayout tlPriceList = null;
    TableRow row;
    TextView tvSymbol = null;
    TextView tvSharevolume = null;
    TextView tvOpen = null;
    TextView tvHigh = null;
    TextView tvLow = null;
    TextView tvLastTrade = null;

    TextView symbol,shareVol,open,high,low,lastTrade;
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        View view = inflater.inflate(R.layout.todaypricelist, container, false);

        tlPriceList = (TableLayout)view.findViewById(R.id.priceTable);
        tvSymbol = (TextView)view.findViewById(R.id.tvSymbol);
        tvSharevolume = (TextView)view.findViewById(R.id.tvSharevolume);
        tvOpen = (TextView)view.findViewById(R.id.tvOpen);
        tvHigh = (TextView)view.findViewById(R.id.tvHigh);
        tvLow = (TextView)view.findViewById(R.id.tvLow);
        tvLastTrade = (TextView)view.findViewById(R.id.tvLastTrade);

        //define array data
        String[] dummy=new String[]{"AEL.N000","48.56","16.00","15.00","16.00","18.00"};

        //Converting to dip unit
                int dip = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_PX,
                        (float) 1, getResources().getDisplayMetrics());

                for (int i = 0; i < 100; i++) {
                   row = new TableRow(tlPriceList.getContext());
                   int rowcount=i%2;
                    if(rowcount>0){
                        row.setBackgroundColor(Color.parseColor("#E0F8F7"));
                    }
                    symbol = new TextView(tlPriceList.getContext());
                    //t1.setTextColor(getResources().getColor(R.color.yellow));
                    shareVol = new TextView(tlPriceList.getContext());
                    //t2.setTextColor(getResources().getColor(R.color.dark_red));
                    open=new TextView(tlPriceList.getContext());
                    high=new TextView(tlPriceList.getContext());
                    low=new TextView(tlPriceList.getContext());
                    lastTrade=new TextView(tlPriceList.getContext());

                    symbol.setText(dummy[0]);
                    shareVol.setText(dummy[1]);
                    open.setText(dummy[2]);
                    high.setText(dummy[3]);
                    low.setText(dummy[4]);
                    lastTrade.setText(dummy[5]);

                    symbol.setWidth(55*dip);
                    shareVol.setWidth(30*dip);
                    open.setWidth(30*dip);
                    high.setWidth(30*dip);
                    low.setWidth(30*dip);
                    lastTrade.setWidth(30*dip);

                    symbol.setGravity(android.view.Gravity.CENTER_VERTICAL);
                    shareVol.setGravity(android.view.Gravity.CENTER_VERTICAL);
                    open.setGravity(android.view.Gravity.CENTER_VERTICAL);
                    high.setGravity(android.view.Gravity.CENTER_VERTICAL);
                    low.setGravity(android.view.Gravity.CENTER_VERTICAL);
                    lastTrade.setGravity(android.view.Gravity.CENTER_VERTICAL);

                    symbol.setTextSize(12);
                    shareVol.setTextSize(12);
                    open.setTextSize(12);
                    high.setTextSize(12);
                    low.setTextSize(12);
                    lastTrade.setTextSize(12);

                    symbol.setHeight(20*dip);
                    symbol.setPadding(5, 0, 0, 0);

                    row.addView(symbol);
                    row.addView(shareVol);
                    row.addView(open);
                    row.addView(high);
                    row.addView(low);
                    row.addView(lastTrade);

                    tlPriceList.addView(row, new TableLayout.LayoutParams(
                          LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));

                }

     return view;
    }

} 
```

![这是我尝试使用它开发的屏幕。 除了这个，还有其他内存有效的方法来开发它吗？](../Images/c8239c8a03269d4146240457bb3b8bfc.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T06:10:36.770

Bellow the *Binary XML file line #25: Error inflating class fragment* in logcat 应该是真正问题的解释。问题是您错误地使用了膨胀的布局，并且您遇到了一种情况，即您将具有父级的视图添加到将抛出一个父级的同一父级`IllegalStateException`（因为必须首先从该层次结构中删除位于视图层次结构中的视图然后添加）。

在`onCreateView`你膨胀布局文件，然后搜索视图。现在由于某些未知的原因，您尝试再次将这些视图（它们已经在布局中作为 a 的子级`TableRow`）添加到它们在布局中具有的同一个父级，这是错误的。`LinearLayout`你在 的末尾做同样的事情`onCreateView`，你已经将它`ScrollView`添加到了，`LinearLayout`但然后再次尝试将相同的视图添加到`LinearLayout`，这是错误的。

如果布局中有这些视图，则无需**再次**添加这些视图，只需添加在该`for`循环中构造的新行。

同样添加 100`TableRows`和 6 个孩子也不起作用，你会在内存不足的情况下杀死应用程序，会有很多视图要渲染。`ListView`如果您在布局中需要那么多行，请改用 a 。

# php - 如何使用 jQuery 或 php 从 Instagram 令牌获取访问令牌

> ID：12677551
> 
> 赞同：3
> 
> 时间：2012-10-01T16:48:33.843
> 
> 标签：php, jquery, instagram

我是 Instagram API 的新手，我发现一些问题与了解如何获取访问令牌有关。

我所做的是在 instagram 上注册，创建了一个应用程序，并使用了客户端 ID 和重定向 url，当我将以下内容发布到浏览器中时，它会给我一个 code=token

[https://api.instagram.com/oauth/authorize/?client_id=65c3052cc4494f87bc7f941b61b1f3f5&redirect_uri=http://www.chillwebdesign.co.uk/feedcube/instagram&response_type=code](https://api.instagram.com/oauth/authorize/?client_id=65c3052cc4494f87bc7f941b61b1f3f5&redirect_uri=http://www.chillwebdesign.co.uk/feedcube/instagram&response_type=code)

回复

[http://www.chillwebdesigns.co.uk/feedcube/instagram/?code=462318f96370433eac29a5f845aa0829](http://www.chillwebdesigns.co.uk/feedcube/instagram/?code=462318f96370433eac29a5f845aa0829)

从这里我如何获得访问令牌？

```
<div class="pics"></div>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">

$.ajax({
        type: "GET",
        dataType: "jsonp",
        cache: false,
        url: "https://api.instagram.com/v1/users/[UserID]/media/recent/?access_token=[CODE]",
        success: function(data) {

        for (var i = 0; i < 10; i++) {
            $(".pics").append("<a target='_blank' href='" + data.data[i].link + "'><img src='" + data.data[i].images.low_resolution.url +"'></img></a>");
        }
        }

    });
});

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-12T23:18:40.577

该流程在[http://instagram.com/developer/authentication/](http://instagram.com/developer/authentication/)上有详细记录。您已完成第 2 步，现在进入第 3 步，在此您将临时代码交换为长期访问令牌。

此交换的 URL 是[https://api.instagram.com/oauth/access_token](https://api.instagram.com/oauth/access_token)，您需要根据文档发布 client_id、client_secret、grant_type、redirect_uri 和代码。cURL 是最好的方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-01T20:45:19.400

这是我为获取 Instagram API 访问令牌而构建的简单 Web 界面。

[http://jelled.com/instagram/access-token](http://jelled.com/instagram/access-token)

# assembly - 自动检测违反程序集调用约定

> ID：12677553
> 
> 赞同：4
> 
> 时间：2012-10-01T16:48:38.127
> 
> 标签：assembly, embedded, calling-convention

如果手工编码的汇编代码包含违反平台的汇编调用约定，汇编器（或静态分析器）是否有办法发出警告？

我使用的平台是带有 GNU GAS 汇编器的 ARMv7A。问题的原因是我写的一个错误，我的函数没有推送/弹出所需的寄存器（ARM 上的 r4-r11）upun 进入/退出。寄存器被丢弃，导致调用者崩溃（幸运的是，自动化测试检测到了这个错误）。简化程序：

```
my_function:
    mov     r4, #42  @Trash register r4 in violation of calling convention
    bx      lr       @Return from function

caller:
    ...
    mov r4, #4        @Initialise register r4, to be used later
    bl my_function    @Call my_function with no arguments
    mov r0, r4        @Set argument r0 as r4 (== 42, but should be 4)
    bl other_function @Call other_function with (the now trashed) argument r0 
```

ARM 调用约定：http: [//infocenter.arm.com/help/topic/com.arm.doc.ihi0042d/IHI0042D_aapcs.pdf](http://infocenter.arm.com/help/topic/com.arm.doc.ihi0042d/IHI0042D_aapcs.pdf)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T01:09:06.837

我不认为有这样的工具。期望汇编程序员非常清楚他们在做什么。

但是，如果您真的很喜欢它，您可以开发这样的工具。

在其中，您需要解析汇编源代码并识别修改必须由子程序保留的寄存器的指令。保存/恢复这些寄存器的指令同上。

您还需要弄清楚子程序的开始和结束位置。开头可以通过注意标签来识别，指定进入子程序的入口点，被定义为 public/global/whatever，基本上，它应该由链接器从外部可见。另一种可能的启发式方法是看到在调用指令中使用了标签，或者任何与之等效的标签。同样，您可以通过注意它们执行返回的指令或序列来确定子程序的结束。

在某些情况下，很难弄清楚开始和结束，或者寄存器是否真正被丢弃或保存。其中一些可以通过额外的启发式方法来解决。其余的默认情况下会导致警告。最好有误报、误报，然后反过来。如果代码很小，那么判断警告是否有意义应该很容易。

对于此任务，您应该考虑一些脚本或脚本语言，它们可以很好地处理字符串、支持正则表达式并支持“标准”容器和使用它们的算法（搜索/排序/等）。Perl 和 Python 可以很好地完成这项工作。我不建议在 C 或 C++ 中执行此操作，因为您需要在开发过程中重写并丢弃许多小块。编译是一个额外的障碍，尽管它可能很小。调试低级代码或模板并不好玩。

# django - Django/S3/Boto：如何加密文件？

> ID：12677556
> 
> 赞同：2
> 
> 时间：2012-10-01T16:48:49.253
> 
> 标签：django, encryption, amazon-s3, boto

使用“原始” Django S3 Boto API 有一个`key.set_contents_from_file`方法可以接受一个`encrypt_key=True`参数，以便您的数据以加密格式存储在 S3 中。我想获得相同的功能，但使用（更方便的）S3BotoStorage（您可以将其与普通的 Django FileField 一起使用）。不幸的是，虽然我似乎找不到任何与`encrypt_key`S3BotoStorage 等效的东西；我是否遗漏了什么，或者存储不能加密文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T17:02:28.310

有一个开放的拉取请求将此功能添加到`S3BotoStorage` [https://bitbucket.org/david/django-storages/pull-request/17/include-support-for-s3s-server-side](https://bitbucket.org/david/django-storages/pull-request/17/include-support-for-s3s-server-side)但它不存在于任何当前发布的版本。

# javascript - 将远程 HTML 中的图像 URL 解析为 JSON

> ID：12677558
> 
> 赞同：4
> 
> 时间：2012-10-01T16:49:00.373
> 
> 标签：javascript, jquery, json, asp-classic, xmlhttprequest

我希望创建一个类似于 LinkedIn 和 Facebook 的 URL 共享器，您可以在其中粘贴一个 URL 并使用可用图像的滚动条拉动远程内容以使用？

![领英示例](../Images/89170600edf23433fd44ffebb0bdfc87.png)

基本上我的想法是我需要使用我的服务器端 XMLHTTP 脚本从远程 URL 中提取 HTML，然后我希望能够检查任何图像（超过一定的宽度/高度 - 例如没有加载跨像素。）

是否可以将所有远程 HTML 加载为可转义的 JSON，然后使用 Jquery 检查是否有合适的图像粘贴在滚动条中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:00:45.600

由于同源策略，您不能直接执行此操作，您将能够使用 iframe 获取网页但您无法读取其内容。您需要简单的服务器脚本作为代理。如果您使用 php 并且它允许将 url 作为文件打开，您将能够使用它：

```
<?php 

if (isset($_GET['url'])) {
   echo json_encode(get_file_contents($_GET['url']));
} 
```

然后使用 ajax，您可以使用 url 获取页面，您可以使用 jquery 作为解析器。

```
$.getJSON('fetch.php', {url: "http://google.pl"}, function(html) {
   $(html).find('img');
}); 
```

# jquery-ui - Jquery UI Datepicker - 如果当前日期是星期六或星期日，则禁用周末后的第一个星期一

> ID：12677561
> 
> 赞同：2
> 
> 时间：2012-10-01T16:49:07.983
> 
> 标签：jquery-ui, datepicker

我有一个日期选择器，如果是星期六或星期日，我想禁用周末之后的星期一....这可能吗？

我想我必须找到一种方法：

1.  查找当前日期（天）
2.  如果是周六或周日，则使用条件语句禁用下周一。也许最简单的方法是有两个条件。因此，如果它的星期六然后在两天后禁用，如果它的太阳然后在 1 天后禁用？？？

对此非常感谢的任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T01:47:22.260

您可以通过创建一个新的日期对象来找到当前日期：

```
var today = new Date(); 
```

然后，您可以使用`beforeShowDay`功能`datepicker`来禁用以下星期一，如您使用条件描述的那样：

这是我制作的一个工作小提琴：http: [//jsfiddle.net/MadLittleMods/DfAYY/](http://jsfiddle.net/MadLittleMods/DfAYY/)

```
var today = new Date(); // Go ahead and change the current day (year, month, day)

// If today is Saturday or Sunday then no Monday for you
function noFollowingMonday(thisDate) {
    // Sunday = 0, Saturday = 6;
    if(today.getDay() == 0 || today.getDay() == 6)
    {
        // Monday = 1
        // Only Mondays - that are after today - and is the first monday after today
        if (thisDate.getDay() == 1 && today.getDate() < thisDate.getDate() && Math.abs(today.getDate() - thisDate.getDate()) < 7)
        {
            return [false, "", "Unavailable"];
        }
    }

    return [true, "", "Choose"];

}

$('#datepicker').datepicker({
    beforeShowDay: noFollowingMonday
}); 
```

# c# - 基于 Windows 8 XAML 的游戏中的键盘处理

> ID：12677562
> 
> 赞同：3
> 
> 时间：2012-10-01T16:49:18.317
> 
> 标签：c#, xaml, windows-8, windows-runtime

我正在使用 C# 和 XAML 为 Windows 应用商店创建游戏。我所有的游戏对象都有一个画布，用于描述它们的视图。这些画布将显示在画布 (gameRoot) 中。

我想根据他按下的键移动我的玩家（例如 W 是向上）。这是我的显示页面：

```
<Page
x:Class="Labyrinth_XAML.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:Labyrinth_XAML"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d">

<Canvas x:Name="gameRoot"  KeyDown="gameRoot_KeyDown_1">
    <Button>Vakanu</Button>
</Canvas>

</Page> 
```

我在我的事件处理程序中创建了一个断点，并且 KeyDown 事件永远不会触发。经过一番谷歌，我想通了，如果我在 Canvas 事件中创建一个 Button 将会触发。但是如果我删除，事件将不会触发。如果我单击按钮外的任何位置，事件将永远不会再次触发。

我的问题是：如何创建一个键盘事件处理程序，每次我在页面中按下一个键时都会触发它，而不取决于哪个元素具有焦点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T19:25:14.507

您可以订阅 Window.Current.CoreWindow.KeyDown/Up 事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-10T16:56:19.110

如果您想处理整个页面的按键事件，无论焦点如何。将此 c# 代码添加到您的构造函数中：

```
Window.Current.CoreWindow.KeyDown += CoreWindow_KeyDown; 
```

这将使您订阅页面上发生的任何 keyDown 事件。当然还要添加处理程序：

```
void CoreWindow_KeyDown(Windows.UI.Core.CoreWindow sender,     Windows.UI.Core.KeyEventArgs args)
    {
        //Do Something Here.

    } 
```

您可以对 KeyUp 事件执行相同的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T19:26:03.940

不久前曾遇到过类似的问题。您必须将 Canvas 的“Focusable”属性设置为 true。为了给你的画布焦点，你需要调用 Canvas 的 Focus() 函数。

请参阅[MSDN Focus Overview](http://msdn.microsoft.com/en-us/library/aa969768.aspx)确实帮助我理解它。

# ruby-on-rails-3 - Rails 语言环境命名空间差异的大小写

> ID：12677563
> 
> 赞同：0
> 
> 时间：2012-10-01T16:49:24.337
> 
> 标签：ruby-on-rails-3, rails-i18n

我使用 Rails I18n 功能。我的语言环境是命名空间，例如：en-ZA。

当我运行我的模型规范时，它会选择 activerecord 语言环境。当我运行我的控制器规范时，它会在我的 activerecord 语言环境中获取。当我运行我的验收（全栈）测试时——它也会在 activerecord 语言环境中进行测试——除了一项测试。

当我一次运行整个套件时——所有通过的测试现在都失败了，因为它找不到我的 activerecord 语言环境——它抱怨的命名空间都是小写的。

当我将语言环境 yml 文件中的命名空间更改为 en-za - 测试通过 - 但其他人失败，现在正在寻找 en-ZA 语言环境（注意大写位）。

当我运行整个套件时，它怎么会改变它是在寻找小写的命名空间还是正确的大小写命名空间？

此外 - 当我只运行验收测试时 - 只有一个失败的测试尝试使用错误的大小写访问 activerecord 语言环境......

这很奇怪 - 我不知道在哪里更改或设置它应该始终使用 en-ZA（而不是 en-za）。

我的默认语言环境设置为 en-ZA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:02:21.610

我无法找出错误的来源 - 但找到了一个简单的解决方案：

我所有的语言环境只使用小写字母。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:49:11.363

试着看看你的`config/initializers/i18n.rb`- 可能有一些 available_locales 是大写的吗？

# jquery - jQuery - Kendo UI Grid - 大量列

> ID：12677569
> 
> 赞同：3
> 
> 时间：2012-10-01T16:49:37.093
> 
> 标签：jquery, grid, kendo-ui

我有一个具有大量列 (50) 的 Kendo UI 网格。尽管用户可能只会选择几个列来查看，但他/她需要能够从 50 列中的任何一个列中进行选择。不幸的是，在大多数显示器上，剑道网格列菜单将大于显示器。有没有办法使列菜单可滚动或在列菜单中设置子菜单（包含列组）？

另外，我发现 kendo Grid 组件的初始创建使用列菜单构建 50 列的速度很慢。在最初隐藏所有列时甚至是这样。如果可以解决上述视图问题，请告诉我是否还有办法帮助提高性能。提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:08:52.043

您可以使用 CSS 来降低列菜单的高度并添加滚动条：

```
.k-group .k-group
{
  height: 100px;
  overflow: auto;
} 
```

这是一个演示：http: [//jsbin.com/ebenay/1/edit](http://jsbin.com/ebenay/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-23T09:07:23.890

API 允许您在列定义上使用**.Locked(true)锁定一个或多个列。**此外，设置水平滚动和打开和关闭列客户端的能力。检查所有这些[https://demos.telerik.com/aspnet-mvc/grid/frozen-columns的示例](https://demos.telerik.com/aspnet-mvc/grid/frozen-columns)

# git - 通过 GIT 将 Orchard.Source 部署到 Azure

> ID：12677574
> 
> 赞同：6
> 
> 时间：2012-10-01T16:50:00.610
> 
> 标签：git, azure, nuget, orchardcms, azure-web-app-service

**根据迄今为止给出的答案，**更新这个问题已经发展并得到了扩展。****

 **我想要两件事：（1）Visual Studio 作为我的 Orchard 开发环境和（2）GIT 作为我推送到 Azure 的手段。为此，我下载了 Orchard.Source 发行版而不是 Orchard.Web 发行版。

因此，我使用 GIT 将 Orchard.Source.1.5.1 发行版从本地计算机上的存储库发布到 Azure 网站（预览技术）。部署工作正常，但 Azure 上的后续构建失败，因为它无法确定应该构建哪个解决方案：

> > 远程：无法确定要构建哪个解决方案文件。C:\DWASFiles\Sites\MySite\VirtualDirectory0\site\repository\src\Orchard.sln, C:\DWASFiles\Sites\MySite\VirtualDirectory0\site\repository\src\Orchard.Azure\Orchard.Azure.sln, C: \DWASFiles\Sites\MySite\VirtualDirectory0\site\repository\src\Orchard.Azure\Orchard.Azure.Web\Modules\Orchard.ContentTypes\Orchard.ContentTypes.sln, C:\DWASFiles\Sites\MySite\VirtualDirectory0\site\存储库\src\Orchard.Azure.Tests\Orchard.Azure.Tests.sln, C:\DWASFiles\Sites\MySite\VirtualDirectory0\site\repository\src\Orchard.Web\Modules\Orchard.ContentTypes\Orchard.ContentTypes.sln . 远程：错误 - 更改已提交到远程存储库，但您的网站未更新。

该转储中列出的第一个解决方案 Azure 就是它应该使用的解决方案。我如何告诉 Azure？

在 David Ebbo 的帮助下，我现在明白我问错了问题：

1.  使用“.deployment”配置文件解决了问题，并且
2.  指向“正确”的 Visual Stuio 解决方案是不正确的！要通过 GIT 部署到 Azure，我必须指向一个项目文件（在本例中为 Orchard.Web.csproj）：

    [配置]
    项目 = src/Orchard.Web/Orchard.Web.csproj

这让我走得更远，但我的下一个问题是我故意从我的 GIT 存储库中省略了 Orchard.Source 的“lib”文件夹。我错误地认为，如果我为 Orchard.sln 启用“nuget restore”，Azure 中项目文件的构建将获取所需的依赖项。

在 Sebastien 的帮助下，我现在了解到启用 nuget 可能是一场艰苦的战斗，因为一些 Orchard 3rd 方依赖项已经由 Orchard 团队进行了源代码级别的自定义。简而言之，如果我想使用 Orchard.Source 发行版快速启动并运行 - 那么我只需将“lib”文件夹提交到我的 GIT 存储库中（该死！）。

当我通过 GIT 对 Azure 进行下一次推送时，我的编译仍然失败 - 但至少错误数量大大减少了。我认为它现在唯一不高兴的是：

```
For OrchardFramework.csproj:
   Could not find assemblies: Castle.Core, Casstle.DynamicProxy2
   Missing type or namespace: Castle, AbstractLoggerFactory, DefaultProxyBuilder 
```

如果我能克服这个问题，我最终可能会两全其美：Visual Studio 开发环境（由于 Orchard.Source 发行版）和支持 GIT 的 Azure 推送。有人知道最后一个问题可能是什么吗？

ps Orchard.Source 发行版中有一个“ClickToBuildAzurePackage.cmd”文件，该文件是在创建“GIT 推送到 Azure”之前创建的。这个小批处理文件试图复制 GIT 推送到 Azure 现在提供的大部分工作。我可能会更多地探索该选项，但当然理想的情况是依赖新的 Azure 内置功能。

**更新 2**：事实证明，这仅仅是因为`lib/*/Castle Windsor 2.0/bin/*`被`.gitignore`. 在强制输入这些文件之后，整个事情现在构建和部署！现在唯一的问题是该网站在我访问它时没有给出响应。如有必要，我将把它变成一个单独的问题。照原样，我认为这个特定问题得到了回答。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T18:18:44.047

您可以使用存储库根目录中的 .deployment 文件指定要部署的项目。有关更多信息，请参阅[https://github.com/projectkudu/kudu/wiki/Customizing-deployments](https://github.com/projectkudu/kudu/wiki/Customizing-deployments)。

此外，请参阅[https://github.com/AzureWebSites/OrchardCMS](https://github.com/AzureWebSites/OrchardCMS)以获取在 Azure 网站中运行的 Orchard 存储库示例（但它有点过时）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T16:39:00.293

Orchard 没有将 Nuget 用于其依赖项，这意味着这些库已签入源代码控制系统，如果按源代码部署，则需要它们。

大卫·海登 (David Hayden) 有一个关于使用 Git Publishing 在 Windows Azure 网站上安装 Orchard 的非常好的教程：[http ://www.davidhayden.me/blog/git-publishing-orchard-cms-to-windows-azure](http://www.davidhayden.me/blog/git-publishing-orchard-cms-to-windows-azure)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-13T20:28:42.730

以下是我们的高级步骤和常见问题。

# 高级步骤

1.  将 Orchard 源克隆到**SomeDirectory**
2.  将 .deployment 文件添加到 SomeDirectory（例如，来自 PowerShell，`ni –t f .deployment`）

**检查点**：SomeDirectory 现在将包含：

```
.git
.deployment 
lib 
src 
.gitignore 
build.cmd 
ClickToBuild.cmd 
ClickToBuildAzurePackage.cmd 
CREDITS.txt 
DeleteModuleBinaries.cmd 
LICENSE.txt 
Orchard.proj 
```

3.  接下来，在 SomeDirectory 中打开开发人员命令提示符。
4.  运行`build precompiled`。

**检查点**：SomeDirectory 现在将包含另外两个子目录：

```
build 
buildtasks 
```

5.  接下来，打开您的 .deployment 文件...

...并添加以下内容：

```
[config] 
project = build/precompiled 
```

6.  添加、提交和推送您的文件到 GitHub（或任何地方）。
7.  创建一个新的 Windows Azure 网站。
8.  从版本控制 > GitHub > 等中选择部署。
9.  等待部署完成。
10.  测试...

通过 FTP 查看您的 Azure 网站将显示以下内容：

![ftp](../Images/7de0a0c38e96863d7bbc5cb8cdc31d14.png)

通过浏览器查看您的站点将显示：

![网络](../Images/464cc501b4fdf4f504940fa55fe6b257.png)

# 常见问题

1.  如果你有一个忽略 build/ 目录的 .gitignore 文件，你必须让 git 强制添加预编译文件夹中的所有内容（App_Data 和 Media 除外，因为它们将包含我们从 Orchard UI 添加的实时内容）。

例子：

```
git add –-f  bin/*
git add –-f Config/*
git add –-f Core/*
git add –-f Modules/*
git add –-f Themes/*
git add –-f CREDITS.txt
git add –-f Global.asax
git add –-f LICENSE.txt
git add –-f Refresh.html
git add –-f Web.config
(Yes. Git is case sensitive). 
```

2.  如果您在添加、删除、排除或包含新文件后忘记保存 .csproj 文件，则 Git Deploy 将抱怨找不到某些文件。**

# java - SWT - 从不同的类关闭对话窗口

> ID：12677576
> 
> 赞同：0
> 
> 时间：2012-10-01T16:50:09.097
> 
> 标签：java, dialog, swt

让我试着更好地解释我在说什么。

主 GUI 有一个按钮，单击该按钮会打开对话框 A 对话框 A 的 OK 按钮在主 GUI 中运行一个方法

```
public void widgetSelected(SelectionEvent e) {
       baseDialog.startPrintOperation();
} 
```

当`baseDialog.startPrintOperation()`方法完成时，我希望对话框 A 关闭。

如何从不同类中的方法关闭对话框 A？

**编辑**

这是对话框 A 中的 okButton

```
okButton.addSelectionListener(new SelectionAdapter() {
     @Override
     public void widgetSelected(SelectionEvent e) {
        getPlotterSelection();
        getSpinnerValue();
        Runnable r = new Runnable() {
           public void run() {
              baseDialog.startPrintOperation();
           }
          };

          if(Display.getCurrent() != null) {
             r.run();
          }
          else {
             Display.getDefault().asyncExec(r);
          }
      }
  }); 
```

这里是printOperation方法中需要关闭Dialog A的部分。这个方法在MAIN GUI类中

```
finally {
           plotOp.removeOperationListener(this);
           plotOp = null;
           Display.getDefault().asyncExec(new Runnable() {
              public void run() {
                 removeAllTableRows();
                 plotRequestCompleted = true;
                 THIS is where I want to close Dialog A;
              }
           });
        }
     }
  });
  session.queueOperation(plotOp); 
```

} // 结束 startPrintOperation()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:06:38.247

`Dialog.public boolean close()`完成打印调用后调用。

# matlab - 在matlab中以不同颜色在同一图中绘制多个直方图

> ID：12677578
> 
> 赞同：6
> 
> 时间：2012-10-01T16:50:13.303
> 
> 标签：matlab, plot, histogram

我有一个 600x24 矩阵 a，我想在同一图中制作每列的直方图，但在 MATLAB 中使用不同的颜色，我使用了以下代码，但它没有给我彩虹色，我使用了以下代码，请帮忙

```
col = hsv(24);

hold on;

for m = 1:24
hist(a(:,m), 50);
h = findobj(gca,'Type','patch');
set(h,'FaceColor', col(m,:),'EdgeColor',col(m,:));
alpha(0.3);
end

hold off; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T18:17:47.417

MATLAB`hist()`函数适用于矩阵，并分别处理矩阵的每一列。该`bar()`函数可用于自己绘制直方图，并适当地为条目着色。因此，您应该能够使用

```
[h,x] = hist(a,50); % histogram of every column and the bins vector
bar(x,h);           % plot histograms

% create a legend
l = cell(1,24);
for n=1:24, l{n} = num2str(n), end;
legend(l); 
```

# android - Android SQLite 数据库希腊字符

> ID：12677582
> 
> 赞同：0
> 
> 时间：2012-10-01T16:50:44.487
> 
> 标签：android, sqlite

我正在使用使用 RazorSQL 在我的 Win PC 中构建的 SQLite 数据库。该数据库包含希腊字符，并且我的 PC 中的所有查询都返回正确的格式。

我将 db 从我的 PC 复制到 Android 模拟器并开始使用它，但包含希腊字符的 varchar 字段值显示为“？”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:59:39.093

根据您尝试使用的字体，它可能无法映射到希腊字符。Android 的默认字体在这里[http://www.google.com/webfonts/specimen/Droid+Sans](http://www.google.com/webfonts/specimen/Droid+Sans)。我不是希腊语专家，但我会尝试更改为希腊字体，看看是否能解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T08:01:19.320

再次感谢您的回复。问题在于 RazorSQL。（已经发布到 Razor）我使用 SQLiteman 填充数据库，一切正常。

# javascript - Javascript条件动态表单不输入字段

> ID：12677600
> 
> 赞同：0
> 
> 时间：2012-10-01T16:51:45.707
> 
> 标签：javascript, cascadingdropdown, dynamic-forms

我有以下表格。其目的是查看选择了什么状态并将该值传递给脚本，该脚本将动态添加更多具有自动递增 ID 的下拉框以存储在数据库中。我没有脚本错误，但动态字段不会弹出到位。顺便说一句，这是基于 Rob 在这里的工作，[http://www.web-design-talk.co.uk/58/adding-unlimited-form-fields-with-jquery-mysql/#comment-70752](http://www.web-design-talk.co.uk/58/adding-unlimited-form-fields-with-jquery-mysql/#comment-70752)。任何人都可以看到我正在做的任何错误。

```
<html>
<head>
<title>Form</title>
<script type="text/javascript" src="../lib/jquery/jquery-1.8.1.min.js"></script>
</head>

<body>

<form id="Form" name="Form" method="post" action="Form.php">
<fieldset>
<legend>Form</legend>

<label>Operations State: </label>
<select name="StateID" id="StateID">
<option value="">Select a State</option>
<option value="CA">CA</option>
<option value="NY">NY</option>
<option value="PA">PA</option>
</select>
<br>
<div id="container">
<p id="add_field">
<label><a href="#" onclick="getClass(StateID.value)">Add A Class Code</a></label>Please select a Class Code
</p>
</div>

</fieldset>
</form>

<script>
var i = 0;

function getClass(str){
var StateID = $("#StateID").val();

$('p#add_field').on('click', function(){
i += 1;

$('#container').before
if (StateID == "CA"){
    ('<label>Select a Class Code</label>' + '<select name="ClassCode[]" id="ClassCode_' + i + '">' + '<option value="1">1</option><option value="2">2</option><option value="3">3</option>' + '</select><br>')
}

else if (StateID == "NY"){
    ('<label>Select a Class Code</label>' + '<select name="ClassCode[]" id="ClassCode_' + i + '">' + '<option value="4">4</option><option value="5">5</option><option value="6">6</option>' + '</select><br>')
}

else if (StateID == "PA"){
    ('<label>Select a Class Code</label>' + '<select name="ClassCode[]" id="ClassCode_' + i + '">' + '<option value="7">7</option><option value="8">8</option><option value="9">9</option>' + '</select><br>')
}

else{
}

});     
}

</script>

</body>
</html> 
```

先感谢您！

经过一些编辑，我想出了以下...

```
<script>

var i = 0;

function getClass(){
var StateID = $("#StateID").val();

$('p#add_field').on('click', function(){
i += 1;

if (StateID == "CA"){
$('#container').before(
'<label>Select a Class Code</label>' + '<select name="ClassCode[]" id="ClassCode_' + i + '">' + '<option value="1">1</option><option value="2">2</option><option value="3">3</option>' + '</select><br>')
}

else if (StateID == "NY"){
$('#container').before(
'<label>Select a Class Code</label>' + '<select name="ClassCode[]" id="ClassCode_' + i + '">' + '<option value="4">4</option><option value="5">5</option><option value="6">6</option>' + '</select><br>')
}

else if (StateID == "PA"){
$('#container').before(
'<label>Select a Class Code</label>' + '<select name="ClassCode[]" id="ClassCode_' + i + '">' + '<option value="7">7</option><option value="8">8</option><option value="9">9</option>' + '</select><br>')
}   

else{
}

})
}

</script> 
```

此版本确实会看到 StateID 并随着每个新添加相应地更改下拉框。唯一的问题是，随着 ID 的自动增加（例如 ClassCode_1、ClassCode_2 等），它还增加了输出到页面的字段数。如果能解决这个问题，那就太棒了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:01:50.713

您错误地设置了“getClass()”函数。您的代码的编写方式是作为参数传递给 jQuery，并且*没有*被声明为全局函数。所以只需声明它：

```
function getClass(str) {
  // ...
} 
```

一旦你这样做了，我*认为*你会想要更改添加内容的代码，以便添加完整的单个 DOM 元素。用 a或其他东西包围你的`<label>`and 。`<select>``<span>`

此外，“i”必须是一个全局变量，否则每次调用该函数时它都会从 0 开始。将其声明移到“getClass”之外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T17:38:32.567

你有相当多的尝试在这里发生；我会把事情简化为基础，这样你就可以看到发生了什么。

你有一个本质上是点击处理程序（`onclick`在 HTML 中）的东西，它似乎试图将其他点击处理程序附加到段落标记。我想这不是你想要的。您正在使用 jQuery，因此当 jQuery 可以为您管理所有这些时，没有必要为您的点击添加 onclick 属性。

步骤应该是：

1.  单击链接时，检查状态下拉列表的值是什么。
2.  删除之前注入 DOM 的所有下拉菜单。
3.  向 DOM 中注入一个新的下拉菜单，选项取决于值。

看看**这个[Fiddle](http://jsfiddle.net/7QYgg/2/)**，它希望能把一切都归结为基础。这就是我认为你所追求的，虽然我不确定你想用递增的 ID 做什么——我必须让你自己判断！

# excel - 将填充的列复制到同一行另一列中的空字段

> ID：12677607
> 
> 赞同：1
> 
> 时间：2012-10-01T16:52:09.033
> 
> 标签：excel, outlook

我有一个导出的 Outlook 联系人列表，其中包含大约 1800 封电子邮件。一个列 (Col A) 中的电子邮件字段仅填写了大约一半的联系人，而另一列 (Col B) 的“显示名称”包含其他联系人的电子邮件地址。但是，“显示名称”列还包含除电子邮件地址之外的其他数据，因此我想避免覆盖 Col A 中的现有电子邮件。

所以，我想找到一种方法，只用 Col B 的数据填充 Col A 中的空白字段。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T16:56:10.793

在第三列中，输入此代码....

```
=IF(A1 <> "",A1,B1) 
```

然后，将其应用于所有 1800 行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T17:08:10.967

您还可以使用嵌套在 if 语句中的 ISBLANK 函数并将两列连接到第三列中，如下所示： =CONCATENATE(IF(ISBLANK(A2),B2,A2),B2)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T17:10:37.423

如果您尝试将 Col. B 中的所有内容放入空的 Col. A 中，则可以在宏中使用此 VBA 代码：

* * *

```
 Sub macro1()

    Dim theSheet As Worksheet
    Dim theRange As Range
    Dim emailLocation As Integer
    Dim output As String

    Set theSheet = Sheets("Sheet1")

    Set theRange = Range("A1:A" & theSheet.UsedRange.Rows.Count)

    For Each theCell In theRange

        If theCell = "" Then

            emailLocation = InStr(1, theCell.Offset(0, 1), "(")
            output = Mid(theCell.Offset(0, 1), emailLocation)
            theCell.Value = output

        End If

    Next

End Sub 
```

无论工作表包含多少行数据，此宏都应该起作用

# google-chrome-extension - Chrome 扩展忽略 XMLHttpRequest.withCredentials 字段

> ID：12677608
> 
> 赞同：3
> 
> 时间：2012-10-01T16:52:22.913
> 
> 标签：google-chrome-extension, xmlhttprequest, session-cookies

我正在开发一个 Chrome 扩展程序，可以在各种站点上生成 XMLHttpRequest，但我注意到我的浏览器忽略了“withCredentials”字段。无论设置为 true 还是 false，响应总是相同的，并且包含通过浏览器的简单 url 导航请求的网页。

显现：

```
"background": {
    "scripts": ["jquery.min.js", "daemon.js"],
    "persistent": true
},
"permissions": [
    "<all_urls>"
] 
```

daemon.js 内部：

```
var xhr = new XMLHttpRequest();
xhr.open("GET", 'http://stackoverflow.com/', true);
xhr.withCredentials = false;
xhr.onload = function(e) {
    $('body').html(xhr.responseText);
}
xhr.send(); 
```

尽管将 withCredentials 设置为 false，这将返回在某些 DOM 元素中使用我的用户名加载的 stackoverflow.com。我的问题是：

1.  这是按预期工作的行为吗？
2.  如果是，是否有解决方法？从扩展内部发出 http 请求但忽略 cookie 或其他会话信息？（更新：忽略所有凭证信息，如客户端证书或 http 身份验证）

我正在使用最新的 (22.0.1229.79 m) Chrome。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T12:00:20.130

是的，这^(（发送凭据的操作）)是预期行为。[XMLHttpRequest 2 级规范 #withCredentials](http://www.w3.org/TR/XMLHttpRequest/#the-withcredentials-attribute)说（这是本 节的最后一行）：

> withCredentials 属性在获取同源资源时无效。

显然，在具有足够权限（清单文件）的 Chrome 扩展程序的上下文中运行的代码会导致该属性的行为与请求来自同一来源的行为相同。

我检查了从后台页面获取请求是否解决了任何问题，并得出结论认为它没有帮助。如果其他站点支持 CORS（通过标头），则解决方案是不在`"permissions"`清单文件的部分提及该站点。[此答案](https://stackoverflow.com/questions/11327593/google-chrome-extension-prevent-cookie-on-jquery-ajax-request-or-use-a-chome-e/11327842#11327842)中突出显示了所有其他选项。

如果没有一种方法令人满意，那么问题二的答案是“不，没有解决方法”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-15T12:26:44.733

您需要在 Chrome 扩展程序中将 API 端点列入白名单。例子：

```
{
  "name": "My extension",
  ...
  "host_permissions": [
    "https://stackoverflow.com/"
  ],
  ...
} 
```

请参阅[请求跨域权限](https://developer.chrome.com/docs/extensions/mv3/xhr/#requesting-permission)

# dojo - 使用 DOJO 对 JSON 进行排序并在 Tree 中显示

> ID：12677617
> 
> 赞同：2
> 
> 时间：2012-10-01T16:52:56.070
> 
> 标签：dojo

我正在学习 DOJO 1.6。

我有数据

```
var data = [
        { FirstName: 'xyz', Lastname: 'QSD', rollNo: '1', EntryDate: '2012-09-11T17:35:31.835+02:00' },
        { FirstName: 'abc', Lastname: 'qgr', rollNo: '2', EntryDate: '2012-08-11T17:35:31.835+02:00' }
        { FirstName: 'ert', Lastname: 'fgd', rollNo: '3', EntryDate: '2012-18-11T17:35:31.835+02:00' }
    ]; 
```

我想根据姓氏或 EntryDate 对其进行排序并以树格式显示。

提前致谢。

* * *

多根数据

```
data: [
            { id: 'world', name:'The earth', type:'planet', population: '6 billion'},
            { id: 'AF', name:'Africa', type:'continent', population:'900 million', area: '30,221,532 sq km',
                    timezone: '-1 UTC to +4 UTC', parent: 'world'},
                { id: 'EG', name:'Egypt', type:'country', parent: 'AF' },
                { id: 'KE', name:'Kenya', type:'country', parent: 'AF' },
                    { id: 'Nairobi', name:'Nairobi', type:'city', parent: 'KE' },
                    { id: 'Mombasa', name:'Mombasa', type:'city', parent: 'KE' },
                { id: 'SD', name:'Sudan', type:'country', parent: 'AF' },
                    { id: 'Khartoum', name:'Khartoum', type:'city', parent: 'SD' },
            { id: 'AS', name:'Asia', type:'continent', parent: 'world' },
                { id: 'CN', name:'China', type:'country', parent: 'AS' },
                { id: 'IN', name:'India', type:'country', parent: 'AS' },
                { id: 'RU', name:'Russia', type:'country', parent: 'AS' },
                { id: 'MN', name:'Mongolia', type:'country', parent: 'AS' },
            { id: 'OC', name:'Oceania', type:'continent', population:'21 million', parent: 'world'},
            { id: 'EU', name:'Europe', type:'continent', parent: 'world' },
                { id: 'DE', name:'Germany', type:'country', parent: 'EU' },
                { id: 'FR', name:'France', type:'country', parent: 'EU' },
                { id: 'ES', name:'Spain', type:'country', parent: 'EU' },
                { id: 'IT', name:'Italy', type:'country', parent: 'EU' },
            { id: 'NA', name:'North America', type:'continent', parent: 'world' },
            { id: 'SA', name:'South America', type:'continent', parent: 'world' }
        ], 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T19:42:38.483

Javascript`Array`有一个原生函数，称为`sort`. 这将按字母顺序对值进行现成的排序。为了对非字符串值进行排序，我们需要提供一个排序函数。像这样，关于`Lastname`：

```
data.sort(function(a,b) {
    var _A=a.Lastname.toLowerCase(), 
        _B=b.Lastname.toLowerCase();

    if (_A < _B) //sort string ascending
      return -1 
    if (_A > _B)
      return 1
    return 0 //default return value (no sorting)
}); 
```

如果您按日期排序，则需要初始化`_A`和`_B`到`Date`.

但是，如果您的目标是`data`在 a 中表示 a `dijit.Tree`，则可以使用内置方法对 a 进行排序`Store`，让我们将其包装`data`成 a`dojo/data/ItemFileReadStore`并在树中显示。树将有一个模型，使用`ItemFileWriteStore`- 以便可以修改项目：

```
var sortableStore = new dojo.data.ItemFileReadStore({
    data: {
        identifier: 'rollNo',
        items: data
    },
    comperatorMap: {
        'EntryDate' : function(a,b) {
            var _A = new Date(a), _B = new Date(b);
            if(_A > _B) return 1;
            else if(_A == _B) return 0;
            else return -1;
        }
}); 
```

在设置 'sort' 参数时使用 'store.fetch()' API，您可以控制返回项目的顺序。您将必须创建一个函数的 ComperatorMap 的 EntryDate，`Array.sort()`以便对其进行正确排序。请参阅[文档](http://dojotoolkit.org/reference-guide/1.8/dojo/data/ItemFileReadStore.html#custom-sorting)。

```
var model = new dijit.tree.ForestStoreModel({
    rootLabel: 'Names',
    store: new dojo.data.ItemFileWriteStore({
        data: {
            identifier: 'rollNo',
            items: data, 
  // blank, initially - can fill in with 'data' to show non-sorted items until sort is called
            label: 'FirstName'
        }
    }) // blank itemsstore
});

var tree = new dijit.Tree({
    model: model
}); 
```

好的，一切就绪 - 但问题`.fetch`是，它使用回调（onComplete）运行并且难以以递归方式控制。相反，放入[THIS FIDDLE](http://jsfiddle.net/k5FXr/5/)中的功能会复制存储数据，然后通过本机数组排序对其进行排序 - 而不是使用`SimpleQueryEngine`.

这将证明提供更可靠的结果 - 但确实会混淆 DnD 控制器和持久标志..

看看 store 如何对`fetch`这里返回的项目进行排序：[fiddle](http://jsfiddle.net/AnxBW/)。然而，这一次只对一个“级别”进行排序，并且不执行深度排序。
IMO：**排序的正确实现是服务器端排序，直接在数据库查询**中。

[http://dojotoolkit.org/reference-guide/1.8/dojo/data/ItemFileReadStore.html#custom-sorting](http://dojotoolkit.org/reference-guide/1.8/dojo/data/ItemFileReadStore.html#custom-sorting)

[http://dojotoolkit.org/reference-guide/1.8/dijit/Tree.html](http://dojotoolkit.org/reference-guide/1.8/dijit/Tree.html)

# codeigniter - 使用 CodeIgniter 进行实时搜索？

> ID：12677618
> 
> 赞同：0
> 
> 时间：2012-10-01T16:53:02.150
> 
> 标签：codeigniter

我对 CI 有 2 个视图：标题和内容。

在我的控制器中，我加载我的标题，执行查询，然后将其加载到控制器中。这是带回我所有的内容。

但是，我的标题中有一个搜索栏，我希望它在用户输入时，我希望它在他们输入时过滤页面上的内容。

无论如何都可以在不不断执行数据库查询的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:57:34.553

是的，您进行一次数据库查询并缓存所有结果，然后使用自动完成来查询您的缓存存储。根据可搜索的内容，这可能可行，也可能不可行。[如果您有一个包含数百万条记录的庞大数据集，那么依赖像Memcached](http://memcached.org/)这样的数据库缓存会更有意义- 如果您正在搜索地理位置或类似的东西，您可能希望依赖对[Solr](http://en.wikipedia.org/wiki/Apache_Solr)实例的 Ajax API 调用。

# android - 加载列表视图时如何实现进度条？- 安卓

> ID：12677621
> 
> 赞同：0
> 
> 时间：2012-10-01T16:53:10.887
> 
> 标签：android, listview, android-asynctask, progress-bar

我有一项活动，其中 RSS 提要从网站加载并显示在列表视图中。问题是将内容加载到列表视图中需要几秒钟。我想实现一个进度条来通知用户加载数据。

下面是显示RSS提要的代码..

```
public class RSS extends ListActivity {
    List<String> headlines;
    List<String> links;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_rss);

     // Initializing instance variables
        headlines = new ArrayList<String>();
        links = new ArrayList<String>();

        try {
            URL url = new URL("http://feeds.pcworld.com/pcworld/latestnews");

            XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
            factory.setNamespaceAware(false);
            XmlPullParser xpp = factory.newPullParser();

                // We will get the XML from an input stream
            xpp.setInput(getInputStream(url), "UTF_8");

            boolean insideItem = false;

                // Returns the type of current event: START_TAG, END_TAG, etc..
            int eventType = xpp.getEventType();
            while (eventType != XmlPullParser.END_DOCUMENT) {
                if (eventType == XmlPullParser.START_TAG) {

                    if (xpp.getName().equalsIgnoreCase("item")) {
                        insideItem = true;
                    } else if (xpp.getName().equalsIgnoreCase("title")) {
                        if (insideItem)
                            headlines.add(xpp.nextText()); //extract the headline
                    } else if (xpp.getName().equalsIgnoreCase("link")) {
                        if (insideItem)
                            links.add(xpp.nextText()); //extract the link of article
                    }
                }else if(eventType==XmlPullParser.END_TAG && xpp.getName().equalsIgnoreCase("item")){
                    insideItem=false;
                }

                eventType = xpp.next(); //move to next element
            }

        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (XmlPullParserException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        // Binding data
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, headlines);

        setListAdapter(adapter);

    }
    private InputStream getInputStream(URL url) {
        // TODO Auto-generated method stub
           try {
               return url.openConnection().getInputStream();
           } catch (IOException e) {
               return null;
             }
    }
    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub
        Uri uri = Uri.parse((String) links.get(position));
           Intent intent = new Intent(Intent.ACTION_VIEW, uri);
           startActivity(intent);
    }
} 
```

那么有人可以在加载数据时帮助我实现一个简单的进度条吗？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:55:43.290

您应该为此使用[异步任务](http://www.vogella.com/articles/AndroidPerformance/article.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T16:55:56.037

您应该使用 AsyncTask 来执行所有下载内容。然后在 AsyncTask 的 onProgessUpdate 方法中，将适配器刷新到 listview。

```
class LoadingTask extends AsyncTask<URL, Integer, Integer> {
    ProgressDialog mDialog;
    BaseAdapter mAdapter
    public LoadingTask(Context context, BaseAdapter adapter) {
        mDialog = new ProgressDialog(context);
        mAdapter = adapter;
        // Do your dialog stuff here
    }

    @Override
    public Integer doInBackground(URL... urls) {
        int result = 0; // number of loaded entities

        while (needsToDownload) {
            // Do your downloading here

            updateProgress(result / urls.length);
        }

        return result;
    }

    @Override
    public void onProgressUpdate(Integer... ints) {
        mDialog.setProgress(ints[0]);
        mAdapter.notifyDatasetChanged()
    }

    public void onPostExecute(Integer result) {
        mDialog.dismiss()
        Toast.makeToast(context, "Loaded " + result  + " urls...", 1).show();
    }
} 
```

# jquery - 使用 Codeigniter 上的 jQuery AJAX 在 jQuery 选项卡中加载一段 html

> ID：12677625
> 
> 赞同：3
> 
> 时间：2012-10-01T16:53:34.693
> 
> 标签：jquery, ajax, .htaccess, codeigniter, tabs

我在这里是因为我无法使用 JQuery AJAX 在 JQuery 选项卡中加载一段 html 代码（包含客户端数据的表单）。我尝试使用 JQuery .load()、.append() .html()，但无法在 JQuery 选项卡中加载简单的 html 表单。我使用**codeigniter**并且在控制器中有一些功能：其中一个名为***findClient***创建一个 CI 分页，它有一个包含无线电输入的表。

```
class Management extends CI_Controller {

function __construct(){
    parent::__construct();  
    $this->load->library('myclients');
    session_start();
}

function index($clientsFound=0){
      ...
  ...       
}

public function findCliente(){
    // generate a pagination, in a table. each row have a radio, 
    // and hads a rispective id of that record
} 
```

当我单击提交按钮时，在 tab-1.... 我调用 JQuery AJAX

```
$('#fm_submit_report').click(function(event){
            event.preventDefault();
            var form_data = {
                id_client: $('input:checked').val(),
                ci_csrf_token: $.cookie("ci_csrf_token")
            };
            var form = $(this);
            $.ajax({
                url: 'management/createReport',
                type: 'POST',
                async : false,
                data: form_data,
                dataType: 'html',
                success: function(dati, stato){
                    $('#tabs').tabs('select',4);
                    alert('Creation of a Report');
                    console.log('stato: '+stato+'   received data: '+dati);
                    $('#create_report').load(dati);
                    alert('end of load');
                },
                error: function(xhr) {

                var message = 'Errore nell\'invio del form: ';
                var status = xhr.status;
                var text = xhr.statusText;

                message += status + ': ' + text;

                $('<div class="error"/>').text(message).
                appendTo(form);

                }
            });
            return false; 
```

这个 ajax 将 cient id 传递给***createReport()***方法。如你所见，此方法使用*myclients*库获取客户端信息，并在传递此信息后，在“*一段 html 代码*”中创建一个包含客户端数据的表单

```
public function createReport(){
    $client=$this->myclients->findClientById($this->input->post('id_cliente'));
    $data['client'] = $client;
 // this is a client information to pass in the view to generate the form, that will load in a tab

   $hthmlcode=$this->load->view('create_report', $data);
   // create_view is the html form 

 echo $htmlcode;
}

}/* End of function createReport */ 
```

要在 JQuery 选项卡中加载的 html 代码是这样的

```
<table>
<tr>
    <td>                                                         
        <table style="margin-top:0" cellpadding="0" cellspacing="0" border="0">
            <?php echo form_open('management/storeReport') ?>
            <tr>
                <td class="report_left"><h2>Visit Date</h2></td>
                <td class="report_dx"><?php echo form_input('data_visita', '', 'class="data", id="datepickervisita"'); ?></td>
            </tr>
            [ ...cut ...]
            </tr>
        </table>
        <?php echo form_input($btnInviaReport); ?>

        <?php echo form_close(); ?>
        <div class="error_report"></div>
    </td>  
</tr>    
</table>
</div> 
```

但不幸的是，html 中的代码没有加载到第 5 个选项卡中......并且帖子返回整个页面（而不是我的 html 表单）！

我注意到，在firebug控制台中，我在ajax的url中设置的*控制器/方法*的路径是错误的，在我设置的fatc中

```
url: 'management/createReport' 
```

但在控制台中，我看到帖子被发送到这个地址：

```
http://_local_ip_/management/management/createReport 
```

但是，显然，如果我不设置控制器（只设置 url:'createReport'），返回变量“dati”将为空，因为我调用了未定义控制器的方法

```
success: function(dati, stato) 
```

我怀疑，我的*.htaccess*文件是造成这个麻烦的原因（为什么控制器的名称重复两次，当调用 ajax 时？？？）

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    RewriteCond %{ENV:REDIRECT_STATUS} 200
    RewriteRule .* - [L]

    RewriteRule ^(system|application) - [F,L]

    #When your application folder isn't in the system folder
    #This snippet prevents user access to the application folder
    #Submitted by: Fabdrol
    #Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^public.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.

    ErrorDocument 404 /index.php
</IfModule> 
```

public 是我的项目的文件夹，它在系统目录之外......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:00:26.000

我解决了这个问题。问题是 JQuery AJAX 函数中的 url 条目，实际上而不是

```
 url: 'management/createReport', 
```

我在我的库***Myjavascript/getSubmitRadio()***中创建了一个函数，它将一个字符串传递给控制器​​，并返回整个 JQuery 函数。JQuery 函数是我传递给标题视图的字符串

```
 // -=[ Get the javascript code to insert in the header, to esecute a JQuery Submit on a specified form ]=-    
   $submitReportForm = $this->myjavascript->getSubmitRadio('fm_submit_report', 'input:checked', site_url('management/createReport')); 
```

在我有一个完整的自定义 jquery 脚本加载到视图中之后，以便拥有：

```
$('#fm_submit_report').click(function(event){
            event.preventDefault();
            var form_data = {
                id_cliente: $('input:checked').val(),
                ci_csrf_token: $.cookie("ci_csrf_token")
            };
            $.ajax({
                url: 'http://10.0.0.135/management/createReport.html ',
                type: 'POST',
                async : false,
                data: form_data,
                dataType: 'html',
                success: function(dati, stato){
                    $('#tabs').tabs('select',4);
                    alert('Creazione report per il cliente scelto');
                    console.log('stato: '+stato+'   dati ricevuti: '+dati);
                    $('#create_report').html(dati);
                    alert('Fine caricamento');
                },
                error: function(xhr) {

                var message = 'Errore nell\'invio del form: ';
                var status = xhr.status;
                var text = xhr.statusText;

                message += status + ': ' + text;

                $('<div class="error"/>').text(message).
                appendTo(form);

                }
            });
            return false;

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:36:53.177

根据[CodeIgniter 文档](http://codeigniter.com/user_guide/general/views.html)（见最底部）`$this->load->view()`有第三个参数：

> 还有第三个可选参数可让您更改函数的行为，以便它以字符串形式返回数据，而不是将其发送到浏览器。如果您想以某种方式处理数据，这可能很有用。如果将参数设置为 true（布尔值），它将返回数据。默认行为是 false，将其发送到您的浏览器。

您的代码中还有一个错字仅供参考。

改用这个：

```
$htmlcode=$this->load->view('create_report', $data, TRUE);
echo $htmlcode; 
```

# regex - 正则表达式提取查询字符串

> ID：12677627
> 
> 赞同：3
> 
> 时间：2012-10-01T16:53:56.173
> 
> 标签：regex, perl

我对正则表达式比较陌生，可以使用一些帮助。有人可以提供正则表达式（我正在使用 Perl）从 URL 中提取查询字符串吗？我尝试了以下但得到一个空字符串：

```
my $string = 'http://www.google.com?queryArg1=1&queryArg2=2';
$string =~ s/^(.*)?//; 
```

理想情况下，此示例将提供以下字符串：queryArg1=1&queryArg2=2

如果你能把它变成一个哈希，那就更棒了：

```
my $hash = {queryArg1 => 1,
            queryArg2 => 2}; 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T17:19:09.130

```
use URI qw( );

my $uri = 'http://www.google.com?queryArg1=1&queryArg2=2';
$uri = URI->new($uri);

my $query = $uri->query();
say $query;

my %form = $uri->query_form();
say "$_: $form{$_}"
   for keys(%form); 
```

使用平面散列显然不能处理重复的参数，并且会丢失参数顺序。加载[URI::QueryParam](http://search.cpan.org/perldoc?URI::QueryParam)会为 URI 对象添加更多方法，如果您需要这些方法，您会发现这些方法很有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T18:36:10.667

> 如果你能把它变成一个哈希，那就更棒了

这很简单：

```
use CGI();
my $url = 'http://www.google.com?queryArg1=1&queryArg2=2';
my $hash = {};
if( $url =~ /\?(.*)$/ ) {
    my $cgi = CGI->new($1);
    $hash = $cgi->Vars;
} 
```

没有自行车，只有 1 个简单的正则表达式和标准模块 CGI

# php - PHP MySQL call Store Procedure with parameters

> ID：12677628
> 
> 赞同：0
> 
> 时间：2012-10-01T16:53:56.360
> 
> 标签：php, mysql, stored-procedures

In my php application i need to call a stored procedure from MySQL

the procedure i have created is this.

```
DROP PROCEDURE IF EXISTS _proc.usp_hotel_rooms_mLoadByPrimaryKey;
CREATE PROCEDURE _proc.`usp_hotel_rooms_mLoadByPrimaryKey`(
_HTR_ID INT(11),
_HTR_TYPE_ID INT(11)
 )
 BEGIN

SELECT
    HTR_ID,
    HTR_NAME,
    HTR_TYPE_ID
FROM hotel_rooms_m
WHERE
    (HTR_ID = _HTR_ID AND HTR_TYPE_ID=_HTR_TYPE_ID)
  ;

 END; 
```

I need to pass the parameters _HTR_ID and _HTR_TYPE_ID,so i tried it like this

```
<?php 
$con = mysql_connect("localhost","user","user")or die(mysql_error());
$db =  mysql_select_db("_proc") or die(mysql_error());
$par1 = "1";
$par2 = "2";
$dbh->query("CAST usp_hotel_rooms_mLoadByPrimaryKey($par1, $par2, @OutPut)");
 $dbh->query("SELECT @OutPut"); 
echo $dbh;
?> 
```

this is the error i am getting `Call to a member function query() on a non-object in D:\xampp\htdocs\_proc\index.php on line`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:58:19.560

您似乎混淆了一些样式：也不`mysql_connect`返回`mysql_select_db`对象，并且`mysql_*`不推荐使用所有函数。您的`$dbh->query`陈述似乎建议使用 mysqli 或 PDO 进行数据库连接。

您可能希望使用 mysqli 或 PDO 打开一个连接，然后将其分配给您的`$dbh`变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T00:17:09.677

你的代码在这里

```
 <?php 
    $dbh = new PDO('mysql:host=localhost;dbname=_proc', "user", "user");
    $par1 = "1";
    $par2 = "2";
    $dbh->query("CAST usp_hotel_rooms_mLoadByPrimaryKey($par1, $par2, @OutPut)");
    $dbh->query("SELECT @OutPut"); 
    echo $dbh;
    ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T17:02:43.710

You have to use

your connection string like this using mysqli

```
$mysqli = new mysqli(  "HOST", "USR", "PWD", "DBNAME" ); 
```

Here is the link for tutors [Mysql stored procedures with php](http://www.joeyrivera.com/2009/using-mysql-stored-procedures-with-php-mysqlmysqlipdo/)

# cryptography - Are there Ciphers that get smaller?

> ID：12677633
> 
> 赞同：-1
> 
> 时间：2012-10-01T16:54:27.487
> 
> 标签：cryptography, encryption

I'm playing around with text transformations - ciphers. From all that I have surveyed it seems that all of these algorithms either break even in terms of transformed message length, or get larger. Are there any known algorithms/text transformations that when applied to a message actually make the message smaller (not counting the key, of course)?

For instance, RSA, when you encode the message, makes the encrypted message quite a bit larger than the original. Is there any such thing as that only the message becomes smaller, instead of larger, after (encryption, transformation, etc whatever you want to call it)?

I'm not doing this as part of security, so whether or not it's hackable is not of any interest to me.

P.S. I've done a lot of research in this area already through search engines (google, wikipedia, etc) but I have found no results. I don't want to say that such a technique doesn't exist without at least posting the question publicly first.

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T17:26:57.600

压缩试图使输入更小。显然无损压缩不会使每个输入更小，因为那是[不可能](http://matt.might.net/articles/why-infinite-or-guaranteed-file-compression-is-impossible/)的。

如果需要，您可以加密压缩的输入。原则上压缩和加密是正交的概念，但在某些情况下，压缩文本的长度可以用来[攻击系统](https://security.stackexchange.com/a/19914/3826)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T17:06:59.517

起初我想到了语言转换。一些英文短语翻译成一个中文符号。这不是一个严格的数学例子，但我想它是合格的。

或者，从位角度来看，不可能在 1 位中加密/编码 2 位信息。

# objective-c - CGBitmapContextGetData - can't copy data to the returned block of memory

> ID：12677634
> 
> 赞同：0
> 
> 时间：2012-10-01T16:54:31.043
> 
> 标签：objective-c, core-graphics, memcpy, cgbitmapcontextcreate

I am drawing `RGBA` data onto the screen using `CGBitmapContextCreate` and `CGContextDrawImage`. When I try to create `bitmapcontext` using `CGBitmapContextCreate`(`pixelBuffer`,...) where I have already`malloc`'ed `pixelBuffer` and placed my data there, this works just fine.

However, I would like Core Graphics to manage its own memory so I would like to pass `NULL` to `CGBitmapContextCreate`, and then get the pointer to the memory block used by calling `CGBitmapContextGetData`, and copying my `RGBA` buffer to the aforementioned block using `memcpy`. However, my `memcpy` fails. Please see my code below. Any idea what I am doing wrong?

```
gtx = CGBitmapContextCreate(NULL, screenWidth, screenHeight, bitsPerComponent, bytesPerRow, colorSpace, kCGImageAlphaNoneSkipLast);
void *data = CGBitmapContextGetData(gtx);
memcpy(data, pixelBuffer, area*componentsPerPixel);
CGContextRef currentContext = UIGraphicsGetCurrentContext();
CGImageRef image = CGBitmapContextCreateImage(gtx);
CGContextTranslateCTM(currentContext, 0, screenHeight);
CGContextScaleCTM(currentContext, 1.0, -1.0);
CGContextDrawImage(currentContext, currentSubrect, image); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:44:15.477

根据我的所有研究，使用 drawrect 频繁/重复绘制是一个坏主意，所以我决定转向基于 UIImageView 的绘图，正如对其他 SO [question的回复中所建议的那样](https://stackoverflow.com/questions/11261450/)

这是另一个关于为什么 UIImageView 比 drawrect 更有效的答案。

基于上述情况，我现在使用 UIImageView 而不是 drawrect 并且看到更好的绘图性能。

# sql - 存储过程动态 T-SQL 查询无法正常工作

> ID：12677635
> 
> 赞同：2
> 
> 时间：2012-10-01T16:54:30.963
> 
> 标签：sql, tsql, sql-server-2008-r2

我正在使用 SQL Server 2008 R2，但我的动态 T-SQL 查询遇到了问题。我相信这与我的语法有关，但是当从动态 T-SQL 上下文中取出时，它可以在新的查询窗口中运行。当作为存储过程运行时，有时会出现以下错误：

> *选择列表中的列`dbo.Birds.weight`无效，因为它既不包含在聚合函数中，也不包含在`GROUP BY` 子句中。*

T-SQL 代码：

```
set @sql =
N'select FLOOR(dbo.Birds.weight * @INPUTconversion)*@INPUTinterval as ''Weight'',
COUNT(1) as ''Count''
FROM dbo.Birds
WHERE
weight >= @INPUTminwgt AND 
weight <= @INPUTmaxwgt
GROUP BY FLOOR(weight*@INPUTconversion) 
order by weight asc'

set @params =
N'@INPUTminwgt float, 
@INPUTmaxwgt float, 
@INPUTconversion float,
@INPUTinterval float';

exec sp_executesql @sql, @params,  
@INPUTminwgt = @BirdMinWeight, 
@INPUTmaxwgt = @BirdMaxWeight,
@INPUTconversion = @conversion,
@INPUTinterval = @interval; 
```

权重到小数点后 1000 位（例如 3.154）

```
@INPUTconversion = 1/interval 
```

查询应返回按间隔分组的最小和最大重量参数之间的权重（例如，0.1 间隔将类似于 1.1、1.2、1.3、1.4，其中包含该重量跨度内的总鸡数）

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T17:02:39.987

In the group by, `*@INPUTintervals` is missing.

It should be `GROUP BY FLOOR(dbo.Birds.weight * @INPUTconversion)*@INPUTinterval`

Also,you can't use the alias `weight` in your `where` and `order by`, you have to use `FLOOR(dbo.Birds.weight * @INPUTconversion)*@INPUTinterval` or `dbo.Birds.weight` cause here it's ambiguous which one you need.

```
set @sql =
N'select FLOOR(dbo.Birds.weight * @INPUTconversion)*@INPUTinterval as ''Weight'',
COUNT(1) as ''Count''
FROM dbo.Birds
WHERE
dbo.Birds.weight >= @INPUTminwgt AND 
dbo.Birds.weight <= @INPUTmaxwgt
GROUP BY FLOOR(weight*@INPUTconversion) *@INPUTinterval
order by FLOOR(weight*@INPUTconversion) *@INPUTinterval asc' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:07:34.940

我的猜测是，它并没有完全认识到 dbo.Birds.Weight 与查询底部的“重量”相同。这当然很有趣，我不太清楚*为什么*会这样，但这可能会奏效：

```
set @sql = N'
SELECT 
  FLOOR(b.weight * @INPUTconversion) * @INPUTinterval as [Weight],
  COUNT(*) as ''Count''
FROM  dbo.Birds b
WHERE b.weight >= @INPUTminwgt 
AND   b.weight <= @INPUTmaxwgt
GROUP BY FLOOR(b.weight * @INPUTconversion) * @INPUTinterval
ORDER BY FLOOR(b.weight * @INPUTconversion) * @INPUTinterval' 
```

# ssas - 数据透视表字段列表错误 - 由于数据库中的结构更改，当前会话不再有效

> ID：12677636
> 
> 赞同：0
> 
> 时间：2012-10-01T16:54:33.650
> 
> 标签：ssas, olap, pivot-table, cube, office-web-components

我有一个分析服务数据库。多维数据集存储模式为 MOLAP，主动缓存设置为关闭。所有维度、度量和分区都将 MOLAP 设置为存储模式，并将主动缓存设置为关闭。

当我通过 Excel 或 SQL Server Management Studio 连接到多维数据集时，一切正常。

但是用户通过网页连接到立方体。我们使用 Office Web Components。他们工作正常，直到最近，用户在过滤维度，展开，折叠等时随机遇到以下错误......：由于数据库中的结构更改，当前会话不再有效

首先数据透视表返回空白。当他们尝试刷新数据时，他们会收到以下错误消息。

![错误](../Images/f78d61771876803dbc2a4185d87d2e1c.png)

帮助。

谢谢，

莫娜

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T23:37:28.717

我通常以这种方式构建多维数据集：PREFIX_YYYYMMDD。这样，当我构建新版本的多维数据集时，我仍然可以使用旧版本的多维数据集。

然后我使用简单的 UPDATE 语句更改连接字符串（来自 XmlData 方法）以更改多维数据集名称......

你能恢复到备份，旧版本的多维数据集吗？

我绝对喜欢 Office Web Components / SSAS。我认为它们是迄今为止微软推出的最酷的产品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:57:21.423

如果它不是一个巨大的 olap db，我建议以完全处理模式（非增量）处理 db。

# java - 在文本字段中键入时同时更新文本区域

> ID：12677638
> 
> 赞同：4
> 
> 时间：2012-10-01T16:54:47.470
> 
> 标签：java, swing, jtextfield, jtextarea

我想在输入文本字段的同时更新我的​​文本区域，但是我在输入时延迟了 1 次击键，即当我按下一个键时会显示上一个键。这是我的片段

```
private void jTextField1KeyTyped(java.awt.event.KeyEvent evt)
{         
    String a = jTextField1.getText();
    jTextArea1.setText(a);            
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-01T17:25:17.697

我不建议使用`KeyListeners`

只需在`DocumentListener`您的`JTextField`via 中添加一个：

```
textField.getDocument().addDocumentListener(new DocumentListener() {

            @Override
            public void insertUpdate(DocumentEvent de) {
            }

            @Override
            public void removeUpdate(DocumentEvent de) {
            }

            @Override
            public void changedUpdate(DocumentEvent de) {
            }
        }); 
```

在每个方法 ( `insertUpdate`,`removeUpdate`和`changedUpdate`) 中简单地调用来设置你的`JTextArea`via的文本`setText()`：

```
textArea.setText(textField.getText()); 
```

这是我做的一个例子：

```
import java.awt.BorderLayout;
import javax.swing.*;
import javax.swing.event.DocumentEvent;
import javax.swing.event.DocumentListener;

public class Test {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new Test().createAndShowUI();
            }
        });
    }

    private void createAndShowUI() {
        final JFrame frame = new JFrame("Test");

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        initComponents(frame);

        frame.setResizable(false);
        frame.pack();
        frame.setVisible(true);
    }

    private void initComponents(JFrame frame) {
        final JTextField jtf = new JTextField(20);
        final JTextArea ta = new JTextArea(20,20);

        ta.setEditable(false);

        jtf.getDocument().addDocumentListener(new DocumentListener() {

            @Override
            public void insertUpdate(DocumentEvent de) {
                ta.setText(jtf.getText());
            }

            @Override
            public void removeUpdate(DocumentEvent de) {
                ta.setText(jtf.getText());
            }

            @Override
            public void changedUpdate(DocumentEvent de) {
            //Plain text components don't fire these events.
            }
        });

        frame.getContentPane().add(jtf, BorderLayout.WEST);
        frame.getContentPane().add(ta, BorderLayout.EAST);
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-01T17:03:20.337

您应该在`keyReleased`事件而不是在事件下执行此操作`keyTyped`，它将根据您的需要工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T16:59:28.093

在更新 TextArea 之前，您需要等到处理 TextField 上的事件。在 TextField 处理完新键入的字符之前，您的代码会更新 TextArea。因此，在 TextArea 中设置的文本是后面的一个键击。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T17:11:00.873

您可以通过在方法中引用方法来尝试使用递归（但要避免循环）。

# jsf - 是否可以从 JSF 操作转发到 Siteminder login.fcc？

> ID：12677644
> 
> 赞同：0
> 
> 时间：2012-10-01T16:55:13.830
> 
> 标签：jsf, forward, siteminder

我的应用程序有一个“自定义”（JSF）登录页面。我的公司使用 Siteminder 进行身份验证。因此，为了使用“自定义”页面登录到 Siteminder，我必须有一个表单，该表单使用适当的表单字段（用户名/密码和几个 Siteminder 特定的隐藏字段）发布到 /login.fcc。

我正在尝试做的是继续利用 JSF 的表单验证等，并且仍然发布到 login.fcc。

这是我的自定义表单的精简版：

```
<rich:messages />
    <h:form id="adminLogin" prependId="false">
    <h:panelGrid columns="2" styleClass="center">
       <h:outputLabel value="HUB USERNAME:" />
       <h:inputText id="USER" label="Username" size="12" required="true" />
       <h:outputLabel value="HUB PASSWORD:" />
       <h:inputSecret id="PASSWORD" label="Password" size="12" required="true" />
       <input type="hidden" name="target" value="#{loginController.smTarget}" />
       <input type="hidden" name="smagentname" value="#{loginController.smAgentName}" />
     </h:panelGrid>
   <h:panelGroup layout="block" styleClass="max-width button-panel">
     <a4j:commandButton id="adminLoginBtn" value="LOGIN"
       styleClass="login-btn" 
       action="#{loginController.managerLogin}" />
   </h:panelGroup>
</h:form> 
```

请注意，我对 target 和 smagentname 字段使用了标准隐藏输入。这是因为我不需要在控制器中为这些字段同时设置 setter 和 getter。我只是希望控制器在页面呈现时提供值。

我的控制器方法如下所示：

```
public void managerLogin()
{
    LoginController.LOG.debug("manager is logging in...");
    LoginController.LOG.debug("user: " + getRequestParameterValue("USER"));
    LoginController.LOG.debug("smagent: " + getRequestParameterValue("smagentname"));
    LoginController.LOG.debug("target: " + getRequestParameterValue("target"));

    forwardTo(LoginController.SM_LOGIN_FCC);
} 
```

您可以看到我正在记录除密码字段之外的所有字段的值，并且它们都在我的日志中正确打印......所以我知道我正在获取这些值。我的“forwardTo()”方法只是获取 ExternalContext 并在其上调用 dispatch()...传递到 login.fcc 页面的路径（即“/forms/login.fcc”）。

当我在表单中输入值并单击登录按钮时，我会在控制台中看到我的值，但我会在浏览器中收到 404 消息。

我可以手动将“/forms/login.fcc”页面放在地址行中，并且 GET 呈现 login.fcc 页面没有问题。但我当然不想呈现我想执行 Siteminder 登录（通过 POST）的 login.fcc (GET)。

我的理解是，所有请求参数都可以通过我期望这工作的转发过程获得。

我可以采用相同的表单并将其取消 JSF 化...并使登录按钮只需提交表单（其操作将是 /forms/login.fcc 通过 POST 并且它也可以正常工作，但随后我松开了JSF 提供的表单/字段验证的好处。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-18T18:53:05.427

使用以下过程：

*   遵循 SiteMinder 重定向
*   发送您的凭据（用户名/密码）
*   再次关注 SiteMinder 重定向
*   发送 SiteMinder cookie

这是一篇详细解释该过程的文章：

*   [如何连接到 SiteMinder 受保护的资源](http://www.codeproject.com/Articles/80314/How-to-Connect-to-a-SiteMinder-Protected-Resource)

# asp.net - 如何加快 Visual Studio 2010 中的编译时间

> ID：12677645
> 
> 赞同：2
> 
> 时间：2012-10-01T16:55:14.143
> 
> 标签：asp.net, visual-studio-2010

我在 Visual Studio 2010 中有一个非常大的网站解决方案，其中包含许多 Web 表单和用户控件。问题是每次我编译这个网站，都需要超过 5 分钟才能完成。如果出现错误，当我修复它并再次构建时，编译将从头开始并编译以前编译的组件。我尝试了命令行命令 asp_compiler.exe 只用了 10 秒。那么，visual studio compile 和 asp_compiler 命令有什么区别，如何加快 Visual Studio 编译器的速度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T06:19:59.197

在aspnet_compiler中，有一个命令行-c强制aspnet_compiler从头开始编译，我认为visual studio会在调用aspnet_compiler时添加这个开关（参数），但我不知道如何强制vs不这样做

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T17:27:21.453

asp_compiler 没有做 vs 正在做的事情。原因

慢机器就是其中之一。

防病毒软件阻碍，将源放在特定路径中并将其排除在 A/V 中

将您的代码分解为单独的 dll，并尽量减少一个可以接触另一个的位置。

# php - 如何在 Wordpress 中从查询的对象 ID 设置 $userID

> ID：12677647
> 
> 赞同：0
> 
> 时间：2012-10-01T16:55:29.747
> 
> 标签：php, string, wordpress

我正在编辑一个模板以尝试向我的页面添加一些条件逻辑。

页面模板显示与用户相关的主题。

我想添加一段代码，它将从我们正在查看的页面中获取用户名，然后将其用于我的条件语句的字符串中。

我整理的代码如下，但它破坏了我的页面，所以我做错了。

```
<?php global
// I query the ID and try and set that to the $userID - I think I am doing this  wrong, but when I echo the ID it gets the correct info.
$userID = get_queried_object()->ID; 
// This is the string I create using the userID which should be from the query above
$memberstatus = get_user_meta($userID,'member_status',true); 

 ?> 
```

稍后我使用 IF 语句来使用 thsi 结果（我知道它有效），所以我不会发布它们。我的问题是试图让上述工作。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:57:50.560

该死，看起来当我从 php 中删除“全局”时它可以工作！我认为 global 必须在这个...啊，好吧

# c++ - 如何在 C++ 中检查对象的类？

> ID：12677657
> 
> 赞同：1
> 
> 时间：2012-10-01T16:56:04.937
> 
> 标签：c++, class, testing

假设我有一个基类对象的向量，但使用它来包含许多派生类。我想检查该向量的成员是否属于特定类。我怎么做？我可以考虑制作一个接受基类参数的派生类模板，但我不确定如何将类与对象进行比较。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T17:05:30.733

如果您的基类有一些虚拟成员（即它是多态的，我认为在这种情况下应该是这样），您可以尝试[向下](http://www.go4expert.com/forums/showthread.php?t=19642)转换每个成员以找出它的类型（即使用`dynamic_cast`）。

否则，您可以使用[RTTI](http://en.wikipedia.org/wiki/Run-time_type_information)（即[`typeid`](http://www.cplusplus.com/reference/std/typeinfo/type_info/)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:00:26.550

您可以使用[dynamic_cast](http://en.wikipedia.org/wiki/Dynamic_cast)

但是，如果您需要这样做，那么您可能遇到了设计问题。你应该使用多态性或模板来解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T17:31:12.193

看看这个例子：

```
#include <iostream>
using namespace std;

#include <typeinfo>

class A
{
public:
    virtual ~A()
    {
    }
};

class B : public A
{
public:
    virtual ~B()
    {
    }
};

void main()
{
    A *a = new A();
    B *b = new B();

    if (typeid(a) == typeid(b))
    {
        cout << "a type equals to b type\n";
    }
    else
    {
        cout << "a type is not equals to b type\n";
    }

    if (dynamic_cast<A *>(b) != NULL)
    {
        cout << "b is instance of A\n";
    }
    else
    {
        cout << "b is not instance of A\n";
    }

    if (dynamic_cast<B *>(a) != NULL)
    {
        cout << "a is instance of B\n";
    }
    else
    {
        cout << "a is not instance of B\n";
    }

    a = new B();

    if (typeid(a) == typeid(b))
    {
        cout << "a type equals to b type\n";
    }
    else
    {
        cout << "a type is not equals to b type\n";
    }

    if (dynamic_cast<B *>(a) != NULL)
    {
        cout << "a is instance of B\n";
    }
    else
    {
        cout << "a is not instance of B\n";
    }
} 
```

# wcf - 动态添加服务引用

> ID：12677667
> 
> 赞同：0
> 
> 时间：2012-10-01T16:56:49.450
> 
> 标签：wcf, wcf-data-services, wcf-binding, wcf-client

我们可以在不使用 Visual Studio 中的添加引用的情况下动态地将服务引用添加到项目中吗？元数据的 Wsdl 导入是否有助于实现这一目标，有人可以帮助我动态加载服务并将其附加到项目并在 wcf 中使用客户端，或者建议我实现这一目标的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T17:21:07.770

.NET 框架有一个专门用于此的命名空间，称为[System.ServiceModel.Discovery](http://msdn.microsoft.com/en-us/library/system.servicemodel.discovery.aspx)。从高层次上讲，您使用[DiscoveryClient](http://msdn.microsoft.com/en-us/library/system.servicemodel.discovery.discoveryclient.aspx)可以找到可用的服务。

为了能够使用[DiscoveryClient](http://msdn.microsoft.com/en-us/library/system.servicemodel.discovery.discoveryclient.aspx)定位服务，需要通过[AnnouncementClient](http://msdn.microsoft.com/en-us/library/system.servicemodel.discovery.announcementclient.aspx)类发送服务信息。此类允许服务发布公告消息。从文档中：

> 公告消息包含有关服务的信息，例如其完全限定的合同名称、服务运行的任何范围以及服务想要发送的任何自定义元数据。

这些类应该是为动态服务发现和使用提供管道所需的一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:39:35.187

如果您尝试使用现有的第三方端点（不受您控制的服务），.NET 框架中至少提供了两种方法。

1.  [元数据交换客户端](http://msdn.microsoft.com/en-us/library/system.servicemodel.description.metadataexchangeclient.aspx)
2.  [元数据解析器](http://msdn.microsoft.com/en-us/library/system.servicemodel.description.metadataresolver.aspx)

MetadataExchangeClient 将连接到 MEX/wsdl 端点并返回代表服务元数据的对象集合。

如果您将 MEX/wsdl 端点和要解析的类型传递给 MetadataResolver，它将返回已知服务的配置。这允许您导入连接设置，而无需预先指定。

要查看还有什么可用的，请探索[System.ServiceModel.Description](http://msdn.microsoft.com/en-us/library/ms195528.aspx)命名空间。它具有上述两个类以及与动态服务解析相关的其他类。

编辑：这能够为我检索元数据：

```
MetadataExchangeClient client = new MetadataExchangeClient(
    new Uri("http://localhost:22948/Service1.svc?wsdl"),
    MetadataExchangeClientMode.HttpGet);
var response = client.GetMetadata(); 
```

# c# - 在自定义 C# PowerShell Cmdlet 中识别是否指定了 -Verbose

> ID：12677670
> 
> 赞同：11
> 
> 时间：2012-10-01T16:56:54.257
> 
> 标签：c#, powershell, cmdlet

我有一个自定义 C# PowerShell Cmdlet（继承自 Cmdlet 基类），我希望能够确定在运行 Cmdlet 时是否指定了“-Verbose”参数。我意识到当指定-Verbose 参数时WriteVerbose 会输出，但我想在指定-Verbose 时实际执行一些其他代码（即，当指定-Verbose 时不输出Console.Write 值）。

谢谢，

约翰

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-01T18:01:08.517

检查 cmdlet 的绑定参数，如下所示：

```
if (this.MyInvocation.BoundParameters.ContainsKey("Verbose"))
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-11T21:12:29.877

经过大量挖掘，这对我有用。Visual Studio 2013，Powershell 3.0 C# cmdlet 使用 PsCmdlet 命名空间。导入模块 .\mytest.dll，然后是 mytest -verbose

```
blnVerbose = this.MyInvocation.Line.ToLower().Contains("-verbose"); 
```

# .net - 如何为 .NET 可移植类库创建单元测试程序集？

> ID：12677673
> 
> 赞同：29
> 
> 时间：2012-10-01T16:57:06.313
> 
> 标签：.net, mstest, portable-class-library

我正在尝试对我创建的可移植类库进行单元测试，并且我想确保它正在使用它所针对的相同框架子集进行测试。

[根据 Visual Studio ALM + Team Foundation Server 博客](http://blogs.msdn.com/b/visualstudioalm/archive/2012/06/18/visual-studio-2012-rc-what-s-new-in-unit-testing.aspx)，MSTest 单元测试框架在 Visual Studio 2012 RC 中转换为 PCL；但是，我无法创建可移植类库，然后在 VS2012 RTM 中引用 MSTest 框架。

*   在“参考”对话框中浏览显示没有单元测试组件被注册为与 PCL 兼容。
*   在项目文件中添加手动 GAC 参考会`Microsoft.VisualStudio.QualityTools.UnitTestFramework`产生参考未找到构建错误。
*   添加手动直接程序集引用以`C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\ReferenceAssemblies\v4.0\Microsoft.VisualStudio.QualityTools.UnitTestFramework.dll`产生构建警告，指出 UnitTestFramework 程序集引用了不兼容的`mscorlib`版本。

*我确实发现（感谢早期的*回答）有一个项目`Unit Test Library (Windows Store apps)`类型在. 这种项目类型创建了一个小型的无 UI Windows 应用商店应用程序......完整的清单和一切。它也不允许我指定我所针对的框架 - 它似乎仅适用于 Windows Store 应用程序。*`C:\Program Files (x86)\Microsoft SDKs\Windows\v8.0\ExtensionSDKs\MSTestFramework\11.0\References\CommonConfiguration\neutral\Microsoft.VisualStudio.TestPlatform.UnitTestFramework.dll`*

 *在*潜在的错误*假设下，我应该使用单元测试程序集来测试我的可移植类库项目，这些程序集的目标是与被测库相同的框架子集......

**如何为 .NET 可移植类库创建单元测试程序集？**

（我对也针对 PCL 的其他框架持开放态度，我只是目前不知道除 MSTest 之外的其他解决方案已考虑到这一点。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-19T13:16:31.813

xUnit 现在支持 PCL 单元测试；[http://xunit.github.io/](http://xunit.github.io/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-27T17:53:42.573

据我所知，目前没有用于联合的 PCL 库。

但我在 github 上发现了这个项目，它看起来很有希望，并且正是你需要的目标：

[https://github.com/jbtule/PclUnit](https://github.com/jbtule/PclUnit)

它遵循与 Nunit 相同的单元测试风格，但也从 XUnit 中借用了一些东西，所以它应该很容易适应它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-03T19:28:14.803

最近跟进这个问题，我试图为一个新的解决方案设置东西，我`Portable Class Library`现在有一个可以单元测试的东西。我不记得我之前究竟尝试过什么，但这是我现在正在做的事情：

*   Visual Studio 高级版 2013 更新 4
*   一个项目类型`Portable Class Library`
*   一个 Windows 窗体项目
*   一个通用应用程序，由一个 Windows、一个 Windows Phone 和一个`....Shared`项目组成
*   一个单元测试项目

通用的`...Shared`项目除了一个`App.xaml`文件之外是空的，所以到目前为止还没有真正使用。

所有包含 UI 的项目都引用 type 的项目`Portable Class Library`，并且它们都使用相同的代码工作。

Unit Test项目也引用`Portable Class Library`了.`References``Add reference``Solution``Projects`

解决方案结构如下图所示：

[![在此处输入图像描述](../Images/23c3e1c3f666ac46337e7a9da83b377c.png)](https://i.stack.imgur.com/4URRV.png)

去年我试图让整个 PCL 单元测试工作正常时，我并不完全确定问题出在哪里，但现在它似乎可以正常工作。

如果需要，请随时询问更多信息，如果可能，我会尽力提供帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T17:39:31.903

便携式测试库位于此处（对我而言）的 Windows 8 SDK 下：

```
C:\Program Files (x86)\Microsoft SDKs\Windows\v8.0\ExtensionSDKs\MSTestFramework\11.0\References\CommonConfiguration\neutral\Microsoft.VisualStudio.TestPlatform.UnitTestFramework.dll 
```

你会看到它有一个 Assert 类和必要的 [TestXXX] 属性。如果我创建一个 Portable Library 项目并添加对该程序集的引用，Visual Studio 的测试资源管理器将显示标有 [TestMethod] 属性的测试，但它不会执行它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-06T22:52:01.730

我有一个适用于 Windows Store 和 Windows Phone 的通用应用程序，其中包含一个带有我的 ViewModel 的 PCL。我刚刚创建了一个单元测试项目并将视图模型添加为“链接文件”。这只是一个小测试，用于检查 hello world 应用程序中的字符串，但它似乎有效。

只有时间会证明这个解决方案是否满足我未来的测试需求。*

# iphone - 防止注册中的 segue 呈现

> ID：12677676
> 
> 赞同：0
> 
> 时间：2012-10-01T16:57:13.347
> 
> 标签：iphone, objective-c, ios, xcode

我正在创建一个用户注册表单。我通过故事板设计了 UI 界面，并让注册按钮动作呈现标签栏 segue。如果表单验证有错误或注册过程中出现错误，我想阻止注册显示 segue。由于某种原因，它不起作用。任何解决这个问题？？？

![在此处输入图像描述](../Images/74c821a0bc4d6b79229048e9376dcb71.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:09:12.880

不要将 segue 直接连接到按钮。而是在注册视图控制器和注册后目标 vc 之间连接它。给它一个标识符，例如“ValidationPassedSegue”。

然后，在按钮按下...

```
- (void)registrationButtonPressed:(id)sender {

    // do validation
    if (validationPassed == YES) {
        [self performSegue:@"ValidationPassedSegue"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T03:58:42.397

尝试类似：

```
-(IBAction)buttonPressed:(id)sender{

  if(canSignUp){
      UIViewController *viewController = [self.storyboard instantiateViewControllerWithIdentifier:@"SignUpViewContoller"];
      [self.navigationController pushViewController:viewContoller animated:YES];
  }

} 
```

# android - 使用异步任务获取当前位置

> ID：12677680
> 
> 赞同：0
> 
> 时间：2012-10-01T16:57:32.087
> 
> 标签：android, location

我试图使用异步任务获取当前位置，此代码在没有异步任务的情况下工作正常，但是当我使用异步任务尝试它时，它显示 NO Location Found 并且抱歉没有找到地址。这是我的代码请帮助我提前感谢

```
public class MainActivity extends Activity {
/** Called when the activity is first created. */
String addressString;    
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
        new Getlocation().execute(); 
```

}

// 异步任务的开始

```
class Getlocation extends AsyncTask<String, String, String> {

    ProgressDialog p;

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub

       p = new ProgressDialog(MainActivity.this);                   
         p.setMessage("Please Wait Retrieving data..");     
         p.setTitle(" ");                                       
         p.setIcon(R.drawable.settings2);                       
         p.show();                                               
    }
    @Override
    protected String doInBackground(String... params) {
        Looper.prepare();

          LocationManager locationManager; 

            String context = Context.LOCATION_SERVICE; 
            locationManager = (LocationManager)getSystemService(context); 

            Criteria crta = new Criteria(); 
            crta.setAccuracy(Criteria.ACCURACY_FINE); 
            crta.setAltitudeRequired(false); 
            crta.setBearingRequired(false); 
            crta.setCostAllowed(true); 
            crta.setPowerRequirement(Criteria.POWER_LOW); 
            String provider = locationManager.getBestProvider(crta, true); 

         //String provider = LocationManager.GPS_PROVIDER; 
            Location location = locationManager.getLastKnownLocation(provider); 
            updateWithNewLocation(location); 
           LocationListener locationListener = new LocationListener() 
         { 

         @Override 
         public void onLocationChanged(Location location) { 
         updateWithNewLocation(location); 
         } 

         @Override 
         public void onProviderDisabled(String provider) { 
         updateWithNewLocation(null); 
         } 

         @Override 
         public void onProviderEnabled(String provider) { 
         } 

         @Override 
         public void onStatusChanged(String provider, int status, Bundle extras) { 
         } 

         };
         locationManager.requestLocationUpdates(provider, 2000, 10, locationListener); 
         Looper.loop();

        return addressString;
    }
     @Override
        protected void onPostExecute(String result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result); 
            p.dismiss();                    

    }   }
 private void updateWithNewLocation(Location location) { 
     String latLong;
     TextView myLocation; 
      addressString = "Sorry  No Address Found"; 
     if(location!=null) { 
    double lat = location.getLatitude(); 
     double lon = location.getLongitude(); 
     latLong = "Lat:" + lat + "\nLong:" + lon; 
     double lattitude = location.getLatitude(); 
     double longitude = location.getLongitude(); 
     Geocoder gc = new Geocoder(this,Locale.getDefault()); 
     try { 
     List<Address> addresses= gc.getFromLocation(lattitude, longitude, 1); 
     StringBuilder sb = new StringBuilder(); 
     if(addresses.size()>0) { 
     Address address=addresses.get(0);
     for(int i=0;i<address.getMaxAddressLineIndex();i++)
     sb.append(address.getAddressLine(i)).append("\n");
     sb.append(address.getLocality()).append("\n"); 
     sb.append(address.getPostalCode()).append("\n"); 
     sb.append(address.getCountryName()); 

     } 
     addressString = sb.toString(); 
     } 
     catch (Exception e) { 
     } 
     } else { 
     latLong = " NO Location Found "; 
     } 
Toast.makeText(getApplicationContext(), "Current Position is :\n"+ latLong + "\n"+  addressString ,Toast.LENGTH_LONG).show();
  //  myLocation.setText("Current Position is :\n"+ latLong + "\n"+  addressString ); 
        }

} 
```

//这是我的日志猫

```
 10-01 22:34:13.720: E/WindowManager(2868): Activity com.example.sc.MainActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@411dd3c8 that was originally added here
10-01 22:34:13.720: E/WindowManager(2868): android.view.WindowLeaked: Activity com.example.sc.MainActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@411dd3c8 that was originally added here
10-01 22:34:13.720: E/WindowManager(2868):  at android.view.ViewRootImpl.<init>(ViewRootImpl.java:374)
10-01 22:34:13.720: E/WindowManager(2868):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:292)
10-01 22:34:13.720: E/WindowManager(2868):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:224)
10-01 22:34:13.720: E/WindowManager(2868):  at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:149)
10-01 22:34:13.720: E/WindowManager(2868):  at android.view.Window$LocalWindowManager.addView(Window.java:547)
10-01 22:34:13.720: E/WindowManager(2868):  at android.app.Dialog.show(Dialog.java:277)
10-01 22:34:13.720: E/WindowManager(2868):  at com.example.sc.MainActivity$Getlocation.onPreExecute(MainActivity.java:68)
10-01 22:34:13.720: E/WindowManager(2868):  at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:586)
10-01 22:34:13.720: E/WindowManager(2868):  at android.os.AsyncTask.execute(AsyncTask.java:534)
10-01 22:34:13.720: E/WindowManager(2868):  at com.example.sc.MainActivity.onCreate(MainActivity.java:51)
10-01 22:34:13.720: E/WindowManager(2868):  at android.app.Activity.performCreate(Activity.java:5008)
10-01 22:34:13.720: E/WindowManager(2868):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
10-01 22:34:13.720: E/WindowManager(2868):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
10-01 22:34:13.720: E/WindowManager(2868):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
10-01 22:34:13.720: E/WindowManager(2868):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
10-01 22:34:13.720: E/WindowManager(2868):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
10-01 22:34:13.720: E/WindowManager(2868):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-01 22:34:13.720: E/WindowManager(2868):  at android.os.Looper.loop(Looper.java:137)
10-01 22:34:13.720: E/WindowManager(2868):  at android.app.ActivityThread.main(ActivityThread.java:4745)
10-01 22:34:13.720: E/WindowManager(2868):  at java.lang.reflect.Method.invokeNative(Native Method)
10-01 22:34:13.720: E/WindowManager(2868):  at java.lang.reflect.Method.invoke(Method.java:511)
10-01 22:34:13.720: E/WindowManager(2868):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-01 22:34:13.720: E/WindowManager(2868):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-01 22:34:13.720: E/WindowManager(2868):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:06:47.627

[这看起来像经典的“在非Looper](http://developer.android.com/reference/android/os/Looper.html)线程中创建 Handler ”异常。基本上，您正在创建一个 Handler 来接收位置消息到您的 LocationListener 对象，该对象是在它自己的线程中创建的。`doInBackground()`一旦方法返回，运行的线程就会死掉。因此，LocationManager 正在向死线程中的死对象发送数据，并且您会遇到异常。

Loopers 的一个很好的示例在这里：

[Looper 的目的是什么以及如何使用它？](https://stackoverflow.com/questions/7597742/android-what-is-the-purpose-of-looper-and-how-to-use-it)

如果放在`Looper.prepare()`顶部`doInBackground()`和`Looper.loop()`底部，则可以继续使用 AsyncTask。 `Looper.loop()`只是一个空的 while 循环，它将使您的线程永远打开。

为了让它死掉，**你必须在你的线程中调用 Looper.myLooper().quit() 来杀死它。** 最简单的方法是立即`Looper.prepare()`通过调用 Looper.myLoop() 来保存 Looper。然后在要停止更新时调用的方法中将其杀死。

```
class LooperAsyncTask extends AsyncTask<Void, Void, Void> {

    private mThreadLooper;

    @Override
    protected String doInBackground(String... params) {
      Looper.prepare();
      mThreadLooper = Looper.myLooper();
      **setup code**
      Looper.loop();
    }

    public void stopUpdates() {
      **cleanup code**
      if(mThreadLooper != null)
        mThreadLooper.quit();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:33:18.463

您的 LocationManager 和 LocationListener 不需要在 AsyncTask 中。它们应该在 Activity 中（或者如果您想在 Activity 之间共享它们，则 Activity 引用的其他类）。

在 AsyncTask 中注册 LocationListener 不是正确的方法，因为该侦听器与 AsyncTask 一起死亡，因此不会在附近侦听更新。

顺便说一句，您的 updateWithNewLocation() 方法正在创建一个它没有使用的 TextView。

通过在 updateWithNewLocation() 中调用 Toast，您实际上是在不在 UI 线程上运行的[doInBackground](http://developer.android.com/reference/android/os/AsyncTask.html#doInBackground%28Params...%29)中调用它，因此，除非您在实例化 AsyncTask 时传入上下文，否则 Toast 的设置会很时髦。

如果这是一个缓慢的过程，那么当您的 Activity 捕获位置更改时，您可以在 AsyncTask 中反向地理编码，然后通过将 doInBackground 反向地理编码的结果传递给在 UI 线程上运行的[onPostExecute](http://developer.android.com/reference/android/os/AsyncTask.html#onPostExecute%28Result%29)来显示 Toast（或更新 TextView）因此可以安全轻松地更新视图并显示 Toast。

```
class ReverseGeocodeAsyncTask extends AsyncTask<Void, Void, Void> {

    private Location location;

    public ReverseGeocodeAsyncTask(Location l) { location = l; }

    @Override
    protected String doInBackground(String... params) {
     //do reverse geocoding and return the result
    }

     @Override
     protected void onPostExecute(String result) {
        // update the UI with the result of the reverse geocoding                   
    }
} 
```

# xml - 如何批量加载 XML 数据

> ID：12677683
> 
> 赞同：0
> 
> 时间：2012-10-01T16:57:42.660
> 
> 标签：xml, db2, etl, varchar

我有 265,000 个文件要加载到数据库表中。每个文件都有一个类似 XML 的结构并代表一个记录。我今天需要将所有文件加载到一个不使用任何 XML 数据类型的表中：all `varchar(265)`. 我正在使用 ETL 工具加载文件，但加载 50,000 个文件需要 2 天时间

我怎样才能做到这一点需要数周才能完成？我是 DB2 LUW v9.7。

# c# - .NET IL 字节码优化器

> ID：12677684
> 
> 赞同：7
> 
> 时间：2012-10-01T16:57:43.710
> 
> 标签：c#, .net, optimization, bytecode, il

我正在尝试用 C# .NET 和 Mono 编写用于游戏的优化代码。（是的，我有正当理由使用 C# 而不是 C++）。

我注意到 C# 似乎没有正确优化其运算符。运算符的运行速度是使用 Vector4 数学手动内联代码的两倍。以下是我在运行 9999999 次的 .NET 4.5 中进行的一些简单基准测试：

```
// Test 1
for (uint i = 0; i != 9999999; ++i)// 230 MS
{
  vector += vector2;
  vector2 -= vector;
}

// Test 2
for (uint i = 0; i != 9999999; ++i)// 185 MS
{
  vector = vector.Add(ref vector2);
  vector2 = vector2.Sub(ref vector);
}

// Test 3
for (uint i = 0; i != 9999999; ++i)// 116 MS
{
  vector.X += vector2.X;
  vector.Y += vector2.Y;
  vector.Z += vector2.Z;
  vector.W += vector2.W;
  vector2.X -= vector1.X;
  vector2.Y -= vector1.Y;
  vector2.Z -= vector1.Z;
  vector2.W -= vector1.W;
}

// EDIT Test 1 SOLVED ----------------------------------
// When the Operators are created like so, they actually perform the BEST!
// Sry MS for complaining :(...  Although SIMD support would be nice :)
struct Vector4
{
    public static Vector4 operator +(Vector4 p1, Vector4 p2)
{
    p1.X += p2.X;
    p1.Y += p2.Y;
    p1.Z += p2.Z;
    p1.W += p2.W;
    return p1;
}

public static Vector4 operator -(Vector4 p1, Vector4 p2)
{
    p1.X -= p2.X;
    p1.Y -= p2.Y;
    p1.Z -= p2.Z;
    p1.W -= p2.W;
    return p1;
}
}

for (uint i = 0; i != 9999999; ++i)// 75 MS
{
  vector += vector2;
  vector2 -= vector;
} 
```

我想知道是否有任何 .NET IL 优化器工具？我看过，但还没有真正找到任何东西。或者更清楚一点，无论如何优化我的 C# 代码或 IL 代码以提高性能。

我真的很想看到操作员以至少 185 毫秒的速度执行。它也只对它有意义。

**这是用于测试的应用程序的链接：** [下载](http://www.reign-studios.com/Share/PerformanceTest45.zip)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T18:29:38.423

您自己的答案和评论都强烈暗示了为什么调用 .Add 比使用加法运算符更快。

的语义`+`是操作数保持不变。做 1 +2 你不会期望 1 之后有 3 的值，对吗？所以要遵循最不意外的规则，各种实现中的加法运算符都遵循这种语义。

这也意味着vector4的加法运算符需要创建一个新的Vector4对象。这个新对象的内存可能已经被分配（例如堆栈），但这并没有多大帮助，因为当它被分配给任何返回类型被分配给时，我们将不得不复制该值。

Add 实例方法的语义不同于加法运算符。它会改变其中一个实例，因此不必创建新对象。

您发布的答案中加法运算符的语义等同于`add`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T18:16:22.767

我找到了解决我的问题的方法......虽然我仍然想要任何关于 .NET IL 优化器的信息。另外，知道为什么使用运算符实际上比自己手动倾斜代码要快，这会很有趣？

要在 .NET 上使用 Vector4 运算符获得最佳性能，请执行以下操作：

```
public static Vector4 operator +(Vector4 p1, Vector4 p2)
{
    p1.X += p2.X;
    p1.Y += p2.Y;
    p1.Z += p2.Z;
    p1.W += p2.W;
    return p1;
}

public static Vector4 operator -(Vector4 p1, Vector4 p2)
{
    p1.X -= p2.X;
    p1.Y -= p2.Y;
    p1.Z -= p2.Z;
    p1.W -= p2.W;
    return p1;
} 
```

**不要这样做：**

```
public static Vector4 operator +(Vector4 p1, Vector4 p2)
{
    return new Vector4(p1.X+p2.X, p1.Y+p2.Y, p1.Z+p2.Z, p1.W+p2.W);
}
//ect... 
```

# php - 基于文件的会话的零星问题

> ID：12677685
> 
> 赞同：0
> 
> 时间：2012-10-01T16:57:45.833
> 
> 标签：php, session, session-storage

在几年没有问题之后，我最近不得不将站点上的会话存储从 cookie 切换到基于本机文件的会话，因为出现了很多超出会话限制 (4kb) 的错误。尽管这或多或少地解决了问题，但登录后不久就会丢失会话的零星问题。最常见的问题是登录，然后在导航到另一个页面时立即注销。这是一个奇怪的，任何正确方向的指针将不胜感激！

# php - 在每次提交到 MSSQL 的文本末尾插入 PHP 表单

> ID：12677688
> 
> 赞同：0
> 
> 时间：2012-10-01T16:57:55.333
> 
> 标签：php, sql-server

大家好，我之前发布过关于`<br>`在我的文本开头插入的内容，我们已经解决了这个问题。（[这是我以前的代码帖子](https://stackoverflow.com/questions/12409583/form-submission-adds-a-br-in-front-of-the-beginning-text-in-the-form)）我按照建议更改了代码

```
$x = preg_replace("/<br>/i","\n",$x); 
```

到

```
 $x = preg_replace("/^<br(\/|)>/i","\n",$x); 
```

这可以阻止`<br>`在开头插入，但现在它在末尾插入一个。我该如何阻止这种情况发生？

**解决方案**

`$x = preg_replace("/^<br(\/|)>/i","\n",$x);`
千斤顶解决方案---`//$x = preg_replace('#^<br(\/|)>+|<br(\/|)>+$#i', "\n", $x);`
除了原始 preg_replace 之外的我的修复

`$x= preg_replace("/(^)?(<br\s*\/?>\s*)+$/","\n", $x);`

**更新**

它不再在`<br>`每次提交时添加，但现在`<br>`在文本之后有两个仅显示在数据库中并且没有在编辑器中显示。我需要摆脱这些休息！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:04:23.883

这应该这样做，匹配`<br>`，`<br/>`或者`<br />`在开始或结束：

```
preg_replace('#^<br(\s*/)?>|<br(\s*/)?>$#i', "\n", $str); 
```

标签匹配： * 文字`<br` * 可选空格，后跟正斜杠

中间`|`的 用于表示替代条件（即`OR`）。

**编辑**

代替`<br(\s*/)?>`你也可以写`<br(\/|)>`你以前的。

**编辑 2**

`+`只需在每个模式后面添加即可匹配​​多次出现：

```
preg_replace('#^<br(\/|)>+|<br(\/|)>+$#i', "\n", $str); 
```

# android - 在模拟器中找不到 EGLConfig，gpu 模拟为真

> ID：12677690
> 
> 赞同：4
> 
> 时间：2012-10-01T16:58:06.737
> 
> 标签：android, andengine, gpu

我正在使用 AndEngine 并且总是得到错误：

> “java.lang.IllegalArgumentException：未找到 EGLConfig！”

当我在模拟器中运行我的应用程序时。GPU 仿真在硬件配置中设置为 true。它也发生在所有 sdk 上。我的应用在手机上运行良好。有人有什么建议吗？:)

**编辑：**这是我在ubuntu中设置显卡的问题，现在一切都很好:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:13:23.230

我之前遇到过同样的问题，我通过以下方式解决了它：

1.  我下载了最后两个 API（API 15 和 API 16）
2.  我用 Eclipse JUNO 安装了 ADT 20.0.3
3.  我安装了最新版本的平台工具（修订版 14）和 sdk-tools（修订版 20.0.3）
4.  我为这些平台下载了基于 Intel Atom x86 的新系统映像（请注意这会导致 API 15 和 16 在 ARM 上不起作用（至少对我来说不起作用））。
5.  正如您在创建 AVD 时提到的启用 GPU 仿真。

注意：您可以使用 SDK 管理器完成所有这些操作。如果不是这种情况，因为您的国家/地区被阻止（无法访问 Google 存储库），您将不得不使用代理并获取直接链接，顺便说一句，这就是我的情况。:)

这应该足够了，我认为这是您开发 Android 可以拥有的最佳配置，尽管您的问题可以通过应用语句 1 和 4 来解决。祝你好运！！！

PD：如果你想测试一些在以前的 API 版本中使用 OpenGL 2.0 的应用程序（例如 Froyo），你必须在实体手机中进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:31:06.190

这是我在 Ubuntu 12.04 中的显卡设置的问题：P

# lisp - 如何找到lisp中发生堆栈溢出的位置？

> ID：12677692
> 
> 赞同：0
> 
> 时间：2012-10-01T16:58:08.917
> 
> 标签：lisp, clisp

我得到：`*** - Program stack overflow. RESET`在 REPL 中运行一些 lisp。我已经看到了关于如何修改堆栈大小的各种建议，但是......我如何才能找到导致溢出的函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:27:45.600

看来答案可能是否定的，或者至少不容易。

看到这个：[Re：堆栈溢出->进入调试器？](http://osdir.com/ml/lisp.clisp.general/2002-02/msg00114.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T16:49:44.597

唯一的方法是在到达断点时运行`gdb`并设置中断`SP_ueber`并使用。`call back_trace_out(0,0)`

# ruby-on-rails-3 - 我需要什么数据库复制模型？

> ID：12677697
> 
> 赞同：0
> 
> 时间：2012-10-01T16:58:38.167
> 
> 标签：ruby-on-rails-3, postgresql, replication, master-slave

我在带有本地 Postgres 数据库的 Rails 3 上。我们要做的是将整个数据库实时复制到第二台服务器上。我们正在考虑使用八达通。

我对我正在寻找的模型以及主从模型如何应用感到困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T17:04:44.977

Postgres 9.1 及更高版本带有内置的流复制（用于主从配置）。查看[http://www.postgresql.org/docs/9.2/static/warm-standby.html#STREAMING-REPLICATION](http://www.postgresql.org/docs/9.2/static/warm-standby.html#STREAMING-REPLICATION)了解有关配置和设置的更多信息。

还有其他第三方配置解决方案，但我会从那里开始，看看是否满足您的需求。

# bash - 在智能手机上镜像 bash shell 以进行 Rails 调试

> ID：12677704
> 
> 赞同：1
> 
> 时间：2012-10-01T16:58:59.633
> 
> 标签：bash, ssh, mirroring

在使用 Rails 应用程序（服务器、vim、应用程序根 shell 等）时，我有几个 shell 实例处于活动状态。我想利用我电脑旁边的空闲智能手机，它上面也有一个很好的 SSH 客户端。有没有办法可以在远程终端上镜像我的一个本地机器 shell 的输出，以便我可以`debugger`在我的应用程序中击中一行时快速监控？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T17:06:04.843

试试[GNU 屏幕](http://www.gnu.org/software/screen/)。在您的计算机上启动屏幕并将智能手机连接到计算机。在手机上安装外壳后，使用 . 附加到正在运行的屏幕`screen -x`。然后输出将同时出现在手机和计算机的终端上。screen 的学习曲线有点陡峭，但对于像您（和许多其他人）这样的目的来说，它是一个很棒的程序。

# mysql - MySQL选择日期等于今天（以日期时间为数据类型）

> ID：12677707
> 
> 赞同：119
> 
> 时间：2012-10-01T16:59:17.407
> 
> 标签：mysql

我正在尝试运行一个 mysql select 语句，它查看今天的日期，只返回当天注册的结果。我目前尝试了以下方法，但它似乎不起作用。

```
SELECT users.id, DATE_FORMAT(users.signup_date, '%Y-%m-%d') 
    FROM users 
    WHERE users.signup_date = CURDATE() 
```

我已经修改了我的`SELECT`声明，谢谢大家。

`SELECT id FROM users WHERE DATE(signup_date) = CURDATE()`

* * *

## 回答 #1

> 赞同：235
> 
> 时间：2012-10-01T17:07:27.457

```
SELECT users.id, DATE_FORMAT(users.signup_date, '%Y-%m-%d') 
FROM users 
WHERE DATE(signup_date) = CURDATE() 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-10-01T17:09:02.710

如果你有它的`signup_date`字段，这个查询将使用索引

```
SELECT users.id, DATE_FORMAT(users.signup_date, '%Y-%m-%d') 
    FROM users 
    WHERE signup_date >= CURDATE() && signup_date < (CURDATE() + INTERVAL 1 DAY) 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-10-01T17:07:21.353

听起来您需要将格式添加到`WHERE`：

```
SELECT users.id, DATE_FORMAT(users.signup_date, '%Y-%m-%d') 
FROM users 
WHERE DATE_FORMAT(users.signup_date, '%Y-%m-%d') = CURDATE() 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/ce623/2)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-22T21:31:19.407

您可以在一天中的整个时间使用`CONCAT`with ，然后使用in条件进行过滤：`CURDATE()``BETWEEN``WHERE`

```
SELECT users.id, DATE_FORMAT(users.signup_date, '%Y-%m-%d') 
FROM users 
WHERE (users.signup_date BETWEEN CONCAT(CURDATE(), ' 00:00:00') AND CONCAT(CURDATE(), ' 23:59:59')) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-30T04:30:45.840

这是查找日期的简单代码

```
SELECT users.id, DATE_FORMAT(users.signup_date, '%Y-%m-%d') 
FROM users 
WHERE DATE_FORMAT(users.signup_date, '%Y-%m-%d') = CURDATE() 
```

# java - Mockito 的基本模拟场景

> ID：12677708
> 
> 赞同：0
> 
> 时间：2012-10-01T16:59:22.087
> 
> 标签：java, testing, mocking, mockito

我开始使用 java Mockito 框架和模拟概念。您能向我解释如何测试这个基本场景吗？

有一个用例 A，它有一个公共方法（计算）和几个私有/受保护的方法。在计算中间的某个地方，另一个用例称为 (B)。为了调用 B，必须准备很多参数。B 也产生相当复杂的输出。我想以这样一种方式准备测试，以便我能够用我自己的存根替换对 B 的实际调用——这是非常微不足道的情况。但是，A 只有一个公共方法计算，我不希望在同一个包中进行测试以访问受保护的方法。重新设计类 A 可能带来的麻烦多于缓解 - 它不是我设计的，代码的不同部分之间存在一些关系，这使得使用公共方法创建新类有点奇怪。

你能告诉我一些建议或指出一些读物吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:18:41.680

为了使用 Mockito（或任何其他模拟框架）用您自己的替换实际的 B，您*必须*能够通过创建构造函数手动注入 B

```
public A(B b) { localB = b; } 
```

通过创建一个方法

```
public void setB(B b) { localB = b; } 
```

或者通过使用一些自动注入框架。

但是，如果 B 被完全封装和隐藏并且无法更改，那么您可以针对 B 编写测试以显示给定的已知输入 B 返回预期的输出

然后针对 A 进行测试，即给定已知输入 A.calculate() 是否给出预期输出。

如果您可以证明 B 的行为符合预期并且 A 的行为符合预期，那么您不需要显式地证明 A 正确地调用了 B，因为您正在隐式测试它。

* * *

已编辑，因为@david wallace 的咖啡比我少或睡眠多！

您不必注入**模拟**B。如果有帮助，您可以注入实际的 B，但首先*创建*[一个间谍](http://mockito.googlecode.com/hg-history/1.5/javadoc/org/mockito/Mockito.html) **`a.getB();`**

 **```
B spyB = spy(new B());
//maybe stub the method return here    
A a = new A(spyB);
a.calculate();
verify(spyB).complicatedThingForCalculate("a", "lot", "of", "specified", "parameter"); 
```

进一步编辑：正如评论中指出的那样，使用 Mock 比使用间谍要好得多。从文档中：

> 真正的间谍应该小心谨慎地偶尔使用，例如在处理遗留代码时。

所以我把它包括在这里，因为你说你不想/有自由改变 A 和 B。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:27:10.367

据推测，您的 A 类创建了 B 类的实例。这总是会导致可测试性问题，因为很难让它创建一个模拟实例。处理此问题的一个非常好的方法是允许为 B 类注入工厂类。这是[我关于此主题的 wiki 帖子中的“模式 2”](http://code.google.com/p/mockito/wiki/MockingObjectCreation)**

# c++ - 是否可以通过列表初始化调用用户定义的转换函数？

> ID：12677711
> 
> 赞同：6
> 
> 时间：2012-10-01T16:59:36.363
> 
> 标签：c++, c++11, implicit-conversion, list-initialization

这个程序合法吗？

```
struct X { X(const X &); };
struct Y { operator X() const; };

int main() {
  X{Y{}};   // ?? error
} 
```

在[n2672](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2672.htm)之后，并由[缺陷 978](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2009/n3006.html#978)修改，**13.3.3.1 [over.best.ics]**具有：

> 4 - 但是，当考虑构造函数或用户定义的转换函数的参数时，它是 13.3.1.7 [...] 的候选 [...] 当初始化器列表只有一个元素并且转换到某个类 X或对（可能是 cv 限定的）X 的引用被认为是 X [...] 的构造函数的第一个参数，仅考虑标准转换序列和省略号转换序列。

这似乎很反常。结果是使用列表初始化强制转换指定转换是非法的：

```
void f(X);
f(Y{});     // OK
f(X{Y{}});  // ?? error 
```

据我了解[n2640](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2640.pdf)，列表初始化应该能够替换直接初始化和复制初始化的所有用途，但似乎没有办法`X`从`Y`仅使用列表初始化的类型对象构造类型对象：

```
X x1(Y{});  // OK
X x2 = Y{}; // OK
X x3{Y{}};  // ?? error 
```

这是标准的实际意图吗？如果不是，它应该如何阅读或阅读？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T17:40:37.733

13.3.3.1p4 的初衷是描述如何应用 12.3p4 中的要求：

> 4 - 最多一个用户定义的转换（构造函数或转换函数）隐式应用于单个值。

在[缺陷 84](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#84)之前，13.3.3.1p4*几乎*是纯粹的信息：

> 4 - 在通过用户定义转换进行初始化的上下文中（即，当考虑用户定义转换函数的参数时；参见 13.3.1.4 [over.match.copy]、13.3.1.5 [over.match.conv] )，只允许标准转换序列和省略号转换序列。

这是因为 13.3.1.4 第 1 段第 2 条和 13.3.1.5p1b1 将候选函数限制为`S`产生类型的类上的函数`T`，其中`S`是初始化表达式的类类型，`T`是被初始化对象的类型，因此没有纬度用于插入另一个用户定义的转换序列。（13.3.1.4p1b1 是另一回事；见下文）。

缺陷 84 修复了`auto_ptr`漏洞（即`auto_ptr<Derived> -> auto_ptr<Base> -> auto_ptr_ref<Base> -> auto_ptr<Base>`通过两个转换函数和一个转换构造函数），通过限制类复制初始化的第二步中构造函数的单个参数允许的转换顺序（这里取的构造函数`auto_ptr<Base>`，`auto_ptr_ref<Base>`不允许使用一个转换函数来转换它的参数`auto_ptr<Base>`）：

> 4 - 但是，当考虑作为 13.3.1.3 [over.match.ctor] 候选的用户定义转换函数的参数时，当在类复制初始化的第二步中调用以复制临时文件时，或通过 13.3.1.4 [over.match.copy]、13.3.1.5 [over.match.conv] 或 13.3.1.6 [over.match.ref] 在所有情况下，只允许标准转换序列和省略号转换序列。

[n2672](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2672.htm)然后添加：

> [...] 由 13.3.1.7 [over.match.list] 当初始化器列表作为单个参数传递或初始化器列表只有一个元素并且转换为某个类 X 或引用（可能是 cv 限定）时X 被认为是 X 的构造函数的第一个参数，[...]

这显然令人困惑，因为 13.3.1.3 和 13.3.1.7 候选的唯一转换是构造函数，而不是转换函数。 [缺陷 978](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2009/n3006.html#978)纠正了这一点：

> 4 - 但是，当考虑构造函数或用户定义的转换函数的参数时 [...]

这也使得 13.3.1.4p1b1 与 12.3p4 一致，否则它将允许在复制初始化中无限应用转换构造函数：

```
struct S { S(int); };
struct T { T(S); };
void f(T);
f(0);   // copy-construct T by (convert int to S); error by 12.3p4 
```

那么问题是指 13.3.1.7 的语言是什么意思。 `X`正在复制或移动构造，因此该语言不包括应用用户定义的转换来达到其`X`参数。 `std::initializer_list`没有转换功能，因此该语言必须旨在应用于其他事物；如果不打算排除转换函数，则必须排除转换构造函数：

```
struct R {};
struct S { S(R); };
struct T { T(const T &); T(S); };
void f(T);
void g(R r) {
    f({r});
} 
```

列表初始化有两个可用的构造函数；`T::T(const T &)`和`T::T(S)`。通过排除复制构造函数（因为它的参数需要通过用户定义的转换序列进行转换），我们确保只`T::T(S)`考虑正确的构造函数。在没有这种语言的情况下，列表初始化将是模棱两可的。将初始值设定项列表作为单个参数传递的工作方式类似：

```
struct U { U(std::initializer_list<int>); };
struct V { V(const V &); V(U); };
void h(V);
h({{1, 2, 3}}); 
```

编辑：经历了所有这些之后，我发现[Johannes Schaub](https://stackoverflow.com/users/34509/johannes-schaub-litb)[的讨论](https://groups.google.com/d/msg/comp.lang.c++/C-DccEq1Axs/gXht8SCv3ckJ)证实了这一分析：

> 这旨在为列表初始化排除复制构造函数，因为因为我们被允许使用嵌套的用户定义转换，所以我们总是可以通过首先调用复制构造函数然后像我们对另一个执行相同的操作来生成一个模棱两可的第二个转换路径转换。

* * *

好的，关闭提交缺陷报告。我将提议拆分 13.3.3.1p4：

> 4 - 但是，当考虑作为候选的构造函数或用户定义转换函数的参数时：
> 
> *   由 13.3.1.3 [over.match.ctor] 在类复制初始化的第二步中调用以复制临时文件时，或
> *   在所有情况下，通过 13.3.1.4 [over.match.copy]、13.3.1.5 [over.match.conv] 或 13.3.1.6 [over.match.ref]，
> 
> 只考虑标准转换序列和省略号转换序列；当考虑作为`X`13.3.1.7 [over.match.list] 候选的类的构造函数的第一个参数时，当将初始值设定项列表作为单个参数传递或初始值设定项列表只有一个元素时，用户定义的转换仅当其用户定义的转换由转换函数指定时才考虑to`X`或 reference to （可能是*cv*限定的） 。`X`[*注意：*因为在列表初始化的上下文中，隐式转换序列中允许有多个用户定义的转换，所以这个限制是必要的，以确保`X`使用单个参数调用的转换构造函数`a`that 不是类型`X`或派生自 的类型，对于使用本身构造的临时对象调用`X`的构造函数并不模棱两可。*——尾注*]`X``X``a`

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T19:08:19.893

XCode 4.4 附带的 clang 3.1 版本同意您的解释并拒绝`X{Y{}};`。和我一样，在重新阅读了标准的相关部分几次之后，FWIW。

如果我修改`X`的构造函数以采用两个参数，两者都是 type `const X&`，则 clang 接受 statement `Y y; X{y,y}`。（如果我尝试`X{Y{},Y{}}`...它会崩溃）。这似乎与 13.3.3.1p4 一致，后者要求仅针对单元素情况跳过用户定义的转换。

似乎最初仅在已经发生*另一个用户定义的转换的情况下才添加对标准和省略号转换序列的限制。*或者至少这就是我阅读[http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#84](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#84)的方式。

有趣的是，标准如何小心地将限制*仅*应用于复制初始化的第二步，该步骤从已经具有正确类型的临时复制（并且可能通过用户定义的转换获得！）。然而对于列表初始化，似乎不存在类似的机制......*

# linux - RSH：端口用完

> ID：12677712
> 
> 赞同：0
> 
> 时间：2012-10-01T16:59:37.673
> 
> 标签：linux, port, rhel, rsh

我遇到了一个问题，即使用 RSH 远程启动脚本时端口不足。

我有一个需要运行的脚本，该脚本已推送到每台服务器。我有一个服务器列表（hostfilelist）

基本上，我有一个简单的循环，可以并行运行它们。

```
for host in `cat hostfilelist`; do
rsh $host ksh script.ksh &
done 
```

问题是有 2k 台服务器，我达到了 512 的限制（假设 RSH 的端口范围是 512-1023，基于我已阅读的文档）。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T20:11:58.153

使用您的代码，您不仅会遇到 rsh 的“安全”端口限制，而且您还可能会遇到文件描述符限制（检查`ulimit -n`）；每个网络连接也使用一个文件描述符。

您对代码所做的是通过 hostfilelist 并为每个主机运行一个 rsh 命令，该命令与＆符号一起放在后台（在源服务器上）。这些连接中的每一个都在后台保持打开状态，直到远程主机上的脚本完成。

在这种情况下，最好将脚本的执行放在每个远程主机的后台执行，这样您的 rsh 命令会在启动远程作业后立即返回，从而再次释放网络连接（和端口）。为此，请将代码中的第二行重写为

`rsh $host "ksh script.ksh &"`

但是，如果事情发生得太快，您可能仍然会遇到端口重用问题（请参阅 netstat 输出上的 TIME_WAIT 状态）。

我强烈建议放弃 rsh 并改用 ssh。

# python - 在 Django 中运行长时间运行的任务同时立即将页面返回给用户的正确方法是什么？

> ID：12677715
> 
> 赞同：1
> 
> 时间：2012-10-01T16:59:47.820
> 
> 标签：python, django, multithreading

我正在编写一个小型 Django 网站，该网站将为用户提供一种删除 Flickr 上所有联系人的方法。

这主要是一个学习[Selenium](http://seleniumhq.org/)的练习，而不是真正有用的东西——因为 Flickr API 不提供删除联系人的方法，我使用 Selenium 让实际的 Web 浏览器执行实际删除联系人的操作。

因为这可能需要一段时间，所以我想向用户显示一条消息，说明正在删除，然后在删除完成时通知他们。

在 Django 中，立即将网页返回给用户的正确方法是什么，同时在服务器上执行在页面返回后继续执行的任务？

我的 Django 视图函数是否会使用[Python 线程模块](http://docs.python.org/library/threading.html#module-threading)使删除代码在另一个线程中运行，同时将页面返回给用户？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T17:02:20.517

Consider using some task queues - one of the most liked by Django community solution is to use Celery with RabbitMQ.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T19:16:54.243

一旦我需要这个，我就设置了另一个 Python 进程，它将通过 xmlrpc 与 Django 通信——这个另一个进程将处理长请求，并能够回答每个请求的状态。Django 视图将调用该其他进程（通过 xmlrpc）对作业进行排队，并查询作业状态。我在 django 中创建了几个正确的 json 视图来查询 xmlrpc 进程 - 并使用 javascript 异步调用这些视图（又名 Ajax）来更新 html 页面

# ios - 从方法访问实例变量

> ID：12677716
> 
> 赞同：0
> 
> 时间：2012-10-01T16:59:52.097
> 
> 标签：ios, xcode

程序目标：在 viewController 上输入数字。当用户点击提交按钮时，用户输入的数据将被传递到不同的类以显示在不同的 viewController 上。

问题：我试图`numberList`在实例方法 ( ) 中访问实例变量 ( `-(void)insertNewNumber:(Numbers *)tempNumber`)，但它从来没有给我正确的输出。但是当我通过协议方法访问同一个变量时`UITableViewDataSource`，我得到了正确的答案。我通过在实例方法和协议方法中使用 NSLog 来解决这个问题。

由于我已声明`numberList`为`property`变量，因此我认为我可以从程序中的任何位置访问它并获取存储在其中的正确值。`0`但是当从实例方法调用 NSLog 语句时，编译器会返回它们。当来自协议方法的 NSLog 语句时，显示了正确的结果。

请帮助我理解为什么会发生这种情况以及如何从程序中的任何方法将元素添加到数组中。

谢谢！

这是我正在处理的相关代码：

数字.h：

```
@interface Numbers:NSObject

@property (strong, retain) NSString *ID;
@property (strong, retain) NSInteger *number;

@end 
```

数字.m

```
@implementation Numbers

@synthesize ID, number;

@end 
```

DisplayNumbers.h

```
#import <UIKit/UIKit.h>
#import "Numbers.h"

@interface DisplayNumbers : UIViewController <UITableViewDataSource, UITableViewDelegate>

@property (strong, nonatomic) NSMutableArray *numberList;

- (void)insertNewNumber:(Numbers *)tempNumber;

@end 
```

DisplayNumbers.m:

```
@implementation DisplayNumbers

@synthesize numberList;

- (void)viewDidLoad
{
    [super viewDidLoad];

    numberList = [[NSMutableArray alloc] init]; 

    Numbers *num0 = [[Numbers alloc] init];
    Numbers *num1 = [[Numbers alloc] init];

    num0.ID = [NSString stringWithFormat:@"ID 0"];
    num0.number = 1111111111;

    num1.ID = [NSString stringWithFormat:@"ID 1"];
    num0.number = 2222222222;

    [numberList addObject:num0];    
    [numberList addObject:num1]; 
```

}

```
- (void)insertNewNumber:(Numbers *)tempNumber
{
    NSLog(@"numberList.count (in -(void)insetNewNumber) = %d", numberList.count);
    [numberList addObject:tempNumber];
    NSLog(@"numberList.count (in -(void)insetNewNumber) = %d", numberList.count);
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSLog(@"numberList.count (in -(NSInteger)tableView:...) = %d", numberList.count);            
    Numbers *temp = [[Numbers alloc] init];
    temp.ID = @"hi";
    temp.Number = 1234;

    [numberList addObject:temp];

    NSLog(@"numberList.count (in -(NSInteger)tableView:...) = %d", numberList.count);                
   return numberList.count;
}

@end 
```

编辑 1：调用`insertNewNumber:`. 正在从不同的类调用此方法。

输入编号.h：

```
#import <UIKit/UIKit.h>
#import "DisplayNumbers.h"

@interface InputNumber:UIViewController

@property (retain, strong) NSInteger *enteredNumber;
-(void)enteredNumber;

@end 
```

输入数字.m

```
@implementation InputNumber

@synthesize enteredNumber;
-(void)enterNumber
{
    DisplayNumber *temp = [[DisplayNumber alloc] init];
    [temp insertNewNumber:enteredNumber];
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T17:54:01.840

由于您在方法中分配了 numberList ，`ViewDidLoad`因此请务必**在**调用.`insertNewNumber`**`ViewDidLoad`**

 **我相信

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    Numbers *temp = [[Numbers alloc] init];
    temp.ID = @"hi";
    temp.Number = 1234;
    [self insertNewNumber:temp];
   return contactList.count;
} 
```

有效，对吧？

如果您需要`insertNewNumber`在调用 to 之前调用您的方法，请`ViewDidLoad`分配您的 numberList

```
numberList = [[NSMutableArray alloc] init]; 
```

在重载的`initWithNibName:bundle:`方法中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:58:33.450

您的代码没有名为`numberList`. 您需要像这样调用该属性：

```
self.numberList = [NSMutableArray array]; 
```

无需分配/初始化，因为您已经在使用强引用。

每次引用该`numberList`对象时，都需要使用`self.numberList`.

```
[self.numberList addObject:num0];
[self.numberList addObject:num1]; 
```**

# google-app-engine - Google App Engine 未更新已部署的文件

> ID：12677728
> 
> 赞同：10
> 
> 时间：2012-10-01T17:01:05.777
> 
> 标签：google-app-engine

谷歌应用引擎提供旧版本文件时遇到了一些奇怪的问题。我在我的一个 servlet 中包含了一些日志记录，并在过去 24 小时内多次部署到谷歌应用引擎。但是，每次 servlet 运行时，我都没有看到我添加的日志记录，而是看到了该文件的先前版本的日志。

我尝试过更改版本并重新部署，但这似乎无法解决问题。

如果有区别，我正在使用带有应用引擎插件的 Eclipse Juno。

任何想法我可以尝试或我可能做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-18T04:28:28.363

我最近遇到了类似的问题，我通过登录`appengine.google.com>MyAppIdentifier>(Main)>Versions`并选择当前版本作为默认版本来解决这个问题。

这不仅应该为您提供最新版本，还应该使用最新版本进行日志查看和其他管理任务。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-01T20:58:17.603

在日志中，确保您检查的是正确的版本：

![应用引擎控制台日志中的版本](../Images/59cf190451a64c70ee919f31648afe42.png)

否则重新部署到一个全新的版本，并直接从*版本*部分下的版本 url 明确检查该版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T07:48:37.173

确保在进行更改后重新部署您的应用程序之前，通过按 Eclipse 控制台窗口上“清除控制台”按钮旁边的双十字按钮来删除启动和删除所有已终止的启动......我希望这能解决您的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-19T01:50:55.410

* * *

**December 2020 Answer**

* * *

Not sure if this is an account or billing specific setting, but I found that App Engine started not updating to my latest app deploy once I reached `50 Versions` in my App Engine list.

After deleting a bunch of old versions (taking down to 30) on next deploy it picked up my latest changes immediately.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-28T19:28:20.550

还要确保您的项目正确编译并且不包含任何错误。我遇到这个问题基本上是因为我正在部署旧的编译代码，而它给了我一个错误“你的项目中有错误，你确定要部署吗？”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-19T01:41:07.903

我尝试了所有关于 SO 的建议，但最终，我找到了最好的解决方案。

因为我转移了域名和虚拟主机，我忽略了更改我的域的资源记录。在确保我的代码与应用程序 (appname.appspot.com) 正常工作后，我创建了一个自定义域，位于`Console menu > App Engine > Settings > Custom domains`

[![自定义域](../Images/fc6b70a9f9517301853ef48434514087.png)](https://i.stack.imgur.com/gyq2y.png)

添加自定义域后，请确保将域设置的 CNAME www 别名更改为规定值（对我来说是 ghs.googlehosted.com）。

自从更改了 CNAME 值后，我的所有后续部署都会立即更新。希望这对您和所有其他人都有效。快乐编码！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-06T05:12:27.607

1.  这可能是由于缓存问题。尝试通过添加查询参数来重新加载网站。例如`<website-url>?q=1`，看看是否反映了变化

2.  打开 url -> **latest-version-number** -dot- **website-url**。最新版本号可以通过点击侧边栏的版本菜单项获得，如下图

[![最新版本号](../Images/e67bb2a87ccbfc4bc44d1a69aeeb2b28.png)](https://i.stack.imgur.com/LuQYP.png)

3.  如果您的源代码中有 app.yaml 文件。尝试删除与缓存和部署相关的标头并检查以确认其缓存问题。缓存标头可以采用以下形式 `Cache-Control: public, max-age=604800, immutable`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-19T14:39:38.563

gcloud（在python中的列表中）在app.yaml中的'skip_files'行有问题，因此您可以尝试使用应用引擎部署应用程序的旧方法，使用appcfg.py而不是gcloud。[在https://cloud.google.com/appengine/docs/standard/python/tools/uploadinganapp](https://cloud.google.com/appengine/docs/standard/python/tools/uploadinganapp)中查看如何

# c++ - 如何正确删除向量中的对象

> ID：12677729
> 
> 赞同：4
> 
> 时间：2012-10-01T17:01:07.843
> 
> 标签：c++, memory-leaks, vector

在我的简单游戏引擎中，我有一个包含指向实体的指针的向量。每个实体都分配有新的关键字。为了在我的实体上调用函数，我使用了一个迭代器，所以在删除我的实体时，我想我也会使用一个迭代器，如下所示：

```
vector<Entity*>::iterator iter;
for (iter = gameEntitys.begin(); iter != gameEntitys.end();) {
    delete (*iter);
    ++iter;
} 
```

但是我现在有一个可怕的内存泄漏，所有分析工具都指向这条线`delete (*iter);`

显然有什么问题，但是我删除向量中包含的实体的正确方法是什么（并清除另一个场景的向量）。据我所知，使用`gameEntitys.clear();`是无用的，因为它只删除向量的元素，而不是实际调用它们的删除，因为它们是指针而不是实际数据。

编辑：我一直在看评论。Entity 类不是多态的，也没有任何子类。如果我停止使用动态内存并拥有一个普通的非指针实体数组会更有意义吗？

我知道存在内存泄漏的原因是，当应用程序启动时，内存使用量在崩溃之前会飙升至 2gb 以上。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T17:07:28.393

最有可能的是，内存泄漏来自您`Entity`或其子类之一的析构函数：您正在`delete`正确执行操作，因此析构函数本身一定有问题。一个常见的问题是在多态类层次结构中没有使析构函数成为虚拟的。

你对调用的无用也是绝对正确的`gameEntitys.clear()`：它会通过“忘记”对它们的引用来“批发”你的对象。

如果您使用的是 C++11，请考虑更改要使用的定义[`std::unique_ptr`](http://en.cppreference.com/w/cpp/memory/unique_ptr)

```
std::vector<std::unique_ptr<Entity> > gameEntitys; 
```

这将使您无需手动管理条目的内存，同时让您将指向派生类对象的指针保存在`vector`. 如果你使用`unique_ptr`，调用`gameEntitys.clear()`将破坏向量元素指向的项目。

处理的向量`unique_ptr`有些不同（例如，插入新项目需要格外小心，有关详细信息，请参阅[此答案](https://stackoverflow.com/q/3283778/335858)），但我认为简化内存管理的积极意义弥补了轻微的不便。

**编辑：**由于您的`Entity`类不是多态的，请考虑切换到`std::vector<Entity>`，除非您打算稍后切换到多态层次结构。

# visual-studio - Webdeploy System.Runtime.Serialization.SerializationException: Member 'ClassName' was not found

> ID：12677735
> 
> 赞同：1
> 
> 时间：2012-10-01T17:01:55.993
> 
> 标签：visual-studio, entity-framework, iis-7, web-deployment, webdeploy

When im doing a webdeploy at visual studio 2012 and select the option *update database* I get the following error at my server log:

```
User: 
Client IP: xxxx
Content-Type: application/msdeploy
Version: 9.0.0.0
MSDeploy.VersionMin: 7.1.600.0
MSDeploy.VersionMax: 9.0.1631.0
MSDeploy.Method: Sync
MSDeploy.RequestId: 36abe7a7-87e3-4ffb-a46f-b5918da1e651
MSDeploy.RequestCulture: nl-NL
MSDeploy.RequestUICulture: en-US
ServerVersion: 9.0.1631.0
Skip: objectName="^configProtectedData$"
Provider: auto, Path: 
A tracing deployment agent exception occurred that was propagated to the client. Request ID '36abe7a7-87e3-4ffb-a46f-b5918da1e651'. Request Timestamp: '1-10-2012 17:39:41'. Error Details:
System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> System.Runtime.Serialization.SerializationException: Member 'ClassName' was not found.
   at System.Runtime.Serialization.SerializationInfo.GetElement(String name, Type& foundType)
   at System.Runtime.Serialization.SerializationInfo.GetString(String name)
   at System.Exception..ctor(SerializationInfo info, StreamingContext context)
   --- End of inner exception stack trace ---
   at System.RuntimeMethodHandle._SerializationInvoke(Object target, SignatureStruct& declaringTypeSig, SerializationInfo info, StreamingContext context)
   at System.Runtime.Serialization.ObjectManager.CompleteISerializableObject(Object obj, SerializationInfo info, StreamingContext context)
   at System.Runtime.Serialization.ObjectManager.FixupSpecialObject(ObjectHolder holder)
   at System.Runtime.Serialization.ObjectManager.DoFixups()
   at System.Runtime.Serialization.Formatters.Binary.ObjectReader.Deserialize(HeaderHandler handler, __BinaryParser serParser, Boolean fCheck, Boolean isCrossAppDomain, IMethodCallMessage methodCallMessage)
   at System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Deserialize(Stream serializationStream, HeaderHandler handler, Boolean fCheck, Boolean isCrossAppDomain, IMethodCallMessage methodCallMessage)
   at System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Deserialize(Stream serializationStream, HeaderHandler handler, Boolean fCheck, IMethodCallMessage methodCallMessage)
   at Microsoft.Web.Deployment.Base64EncodingHelper.DeserializeHelper(BinaryFormatter formatter, Byte[] buffer)
   at Microsoft.Web.Deployment.Base64EncodingHelper.Deserialize(String str, Exception& handledException)
   at Microsoft.Web.Deployment.SerializationHelper.Deserialize(String str)
   at Microsoft.Web.Deployment.SqlDacPacProvider.ProcessExeOutput()
   at Microsoft.Web.Deployment.SqlDacPacProvider.RunExecutableAsync(String exeName, String arguments, Int32 waitInterval, Int32 retryAttempts)
   at Microsoft.Web.Deployment.SqlDacPacProvider.Add(DeploymentObject source, Boolean whatIf)
   at Microsoft.Web.Deployment.DeploymentObject.Add(DeploymentObject source, DeploymentSyncContext syncContext)
   at Microsoft.Web.Deployment.DeploymentSyncContext.HandleAdd(DeploymentObject destObject, DeploymentObject sourceObject)
   at Microsoft.Web.Deployment.DeploymentSyncContext.SyncChildren(DeploymentObject dest, DeploymentObject source)
   at Microsoft.Web.Deployment.DeploymentSyncContext.SyncChildrenOrder(DeploymentObject dest, DeploymentObject source)
   at Microsoft.Web.Deployment.DeploymentSyncContext.ProcessSync(DeploymentObject destinationObject, DeploymentObject sourceObject)
   at Microsoft.Web.Deployment.DeploymentObject.SyncToInternal(DeploymentObject destObject, DeploymentSyncOptions syncOptions, PayloadTable payloadTable, ContentRootTable contentRootTable, Nullable`1 syncPassId)
   at Microsoft.Web.Deployment.DeploymentAgent.HandleSync(DeploymentAgentAsyncData asyncData, Nullable`1 passId)
   at Microsoft.Web.Deployment.DeploymentAgent.HandleRequestWorker(DeploymentAgentAsyncData asyncData)
   at Microsoft.Web.Deployment.DeploymentAgent.HandleRequest(DeploymentAgentAsyncData asyncData) 
```

What might be causing this issue?

The error Visual studio gives me is: Error 2 Web deployment task failed. ((1-10-2012 18:54:34) An error occurred when the request was processed on the remote computer.)

(1-10-2012 18:54:34) An error occurred when the request was processed on the remote computer. The server experienced an issue processing the request. Contact the server administrator for more information. 0 0 Database

--FIX--

For some reason my installation of Webdeploy 3 did not work well (tried reinstalling too) with ms authentication, created a sql auth connectionstring and it resolved the issue.

# unrealscript - Issue with configuring conTEXT to compile for Unrealscript

> ID：12677736
> 
> 赞同：0
> 
> 时间：2012-10-01T17:02:03.887
> 
> 标签：unrealscript, context-editor

I have been going through Rachel Cordone's Unreal Development Kit Game Programming with UnrealScript Beginner's Guide book and having an issue using the conTEXT text editor. As per instructed through the book I have followed all the steps to configure it but it won't compile once I press `F9` - considering the last step to configure is to set the Enivronment Options/Execute Keys section. Here are the steps the book lays out (just that certain tab):

*   7) Now we are going to set up the conText to compile code. On the Execute Keys tab, click on Add, then type `.uc` into the Extensions field that comes up.
*   8) Once that's done four keys, `F9` through `F12`, will show up in the User Exec Keys window. Let's click on `F9` to make it convenient. Once clicked the option on the right become available.
*   9) For the Execute line, click on the button to the right of the field and navigate to out UDK installation's `Binaries\Win64` folder, and select `UDK.exe`. For Start In, copy the Execute line but leave out `UDK.exe`.
*   10) In the Parameters field, type "`make`" without the quote marks. This tells `UDK.exe` that we want to compile code instead of opening the game.
*   11) Change Save to All Files Before Execution.
*   12) Check Capture Console Output and Scroll Console to the Last Line...

Then all I have to do is press `F9` and it will compile - but it doesn't! It gives me:

```
No user command associated with extension '.uc'
Use 'Environment Options/Execute Keys' dialog to assign commands. 
```

It seems it is not registering the changes no matter what I do (yes I clicked apply before saying okay but even still nothing). Any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:56:19.863

说明可能已过时。您需要选择“.uc”条目，点击“编辑”，然后将其更改为“uc”。

此外，如果您使用`UDK.com`而不是`UDK.exe`控制台输出将直接进入 Context 而不是进入单独的弹出窗口。

# testing - 并行运行 Selenium 测试

> ID：12677740
> 
> 赞同：-1
> 
> 时间：2012-10-01T17:02:35.517
> 
> 标签：testing, selenium, junit, parallel-processing

我有硒测试需要 1 分钟才能完成。如果我想运行这 1000 次，我必须等待 16 个小时。有什么方法可以并行运行 5 个测试，以便在 3 小时内完成？我生成了一个 JUnit 测试脚本并尝试使用多个线程运行，但它们最终使用相同的 Firefox 窗口。我不想在网格上运行它，因为运行 5 Firefox 窗口不是资源密集型。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:18:52.203

通过使用以下逻辑，您可以并行运行您的 junit 案例。

```
Class[] cls={test1.class,test2.class,test3.class,test4.class};
JUnitCore.runClasses(new ParallelComputer(true,false),cls); 
```

在上述方法中，ParallelComputer() 的第一个参数表示类，第二个参数表示方法。在这里，我正在并行运行类，但不是方法。

ParallelComputer 类文档

[http://junit-team.github.io/junit/javadoc/4.10/org/junit/experimental/ParallelComputer.html](http://junit-team.github.io/junit/javadoc/4.10/org/junit/experimental/ParallelComputer.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T08:49:25.577

试试这个例子 [http://mycila.googlecode.com/svn/sandbox/src/main/java/com/mycila/sandbox/junit/runner/](http://mycila.googlecode.com/svn/sandbox/src/main/java/com/mycila/sandbox/junit/runner/) 要启动的文件是 MySuite.java。对我来说效果很好。

# html - 如何在 Google 地球中的 KML 文件之间切换或在点集之间切换

> ID：12677743
> 
> 赞同：1
> 
> 时间：2012-10-01T17:02:38.483
> 
> 标签：html, kml, google-earth, google-earth-plugin

所以基本上我有一个我加载的 KML 文件，并且我在那里展示了 2 组不同的点。但是，我希望能够一次呈现一个集合，我认为最简单的方法是将集合拆分为 2 个不同的 KML 文件，然后根据集合加载适当的文件，或者如果有其他方式这样做，它也可以为我工作。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:22:10.537

[虽然 kaliatech 的答案是正确且有用的，但它也比这种方法](http://code.google.com/apis/ajax/playground/#fetch_kml_(interactive,_checkboxes))有点矫枉过正且难以实施。这是一个 Google 示例，通过复选框切换各种 KML 文件的加载。

您需要做的就是将 kmls 的文件名更改为红色/黄色/绿色，或者将代码更改为更适合您使用的名称 - 取决于您感觉的舒适程度以及您想要的最终结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:00:39.430

如果您熟悉 JavaScript 并且可以使用[Google Earth API](https://developers.google.com/earth/) ，则有多种方法可以做到这一点。

如果文件夹具有已知 ID，则这是在 KML 文件中隐藏/显示文件夹的示例：

```
var showFolder = true;
google.earth.fetchKml(gePlugin, kmlUrl, function(rootKmlFeature) {
      if (rootKmlFeature) {

        var myFolderEl = rootKmlFeature.getElementById('#myFolderId');
        if (showFolder) {
            myFolderEl.setVisibility(true);
        }
        else {
            myFolderEl.setVisibility(false);
        }
      }
}); 
```

根 KmlFeature 始终是一个 KmlContainer，它提供了查找子元素的方法。请注意，可能很难知道您是否需要使用“getElementById”或“getElementByUrl”。谷歌文档不是特别清楚：

*   [https://developers.google.com/earth/documentation/reference/interface_kml_container](https://developers.google.com/earth/documentation/reference/interface_kml_container)

一旦你引用了文件夹（或相关的 KmlFeature），你就可以动态地设置可见性（和许多其他属性）以响应 UI 事件或其他任何东西。

* * *

**编辑**（在您发表评论后）

fetchKml 回调（在 HTML 中）为您提供加载的 kmlObject。根据您希望触发显示/隐藏交互的方式，您可能希望将该 kmlObject 存储在更高（可能是全局）范围内。然后，当用户按下按钮或其他任何操作时，您可以执行以下操作：

```
function displayPlacemark1(visible) {

  var baseUrl = 'https://sites.google.com/' + 'site/shahinkmlexamples/experiment/bombs12.kml';

  var placemark = kmlObject.getElementByUrl('#placemark1');
  placemark.setVisibility(visible);
} 
```

相应地，在您的 KML 文件中，您希望向地标添加一个 id 属性。IE

```
...
<Placemark id="placemark1">
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T12:14:57.473

上述解决方案描述了使用 JavaScript 的 Google Earth API 方法。

纯 KML 解决方案是通过 ListStyle 将单选按钮添加到 KML 中的文件夹，然后将每组点放在子文件夹或 NetworkLink 链接中。您可以通过在最初不希望显示的其他子文件夹上添加*<visibility>0</visibility>*元素来使其中一组默认可见。另一个技巧是在名称或描述中使用说明来选择单选按钮以查看其他集合的第一个功能是空的。您可以[在 Google Earth 的 Google Maps Overlay 中](http://www.gelib.com/google-maps.htm)找到它。

*为 Container 指定radioFolder*时，一次只能看到 Container 的一项。

下面是使用带有两组点的*radioFolder的 KML 示例：*

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
  <Document>

    <Style id="rf">
      <ListStyle>
        <listItemType>radioFolder</listItemType>
      </ListStyle>
    </Style>

    <Folder>
      <name>Radio A visible by default</name>
      <description>Select which folder to see</description>
      <styleUrl>#rf</styleUrl>
      <Folder>
      <name>Folder A</name>
      <Placemark>
        <name>Radio A</name>
        <Point>
          <coordinates>-121.9921875, 37.44140625</coordinates>
        </Point>
      </Placemark>
      </Folder>

      <Folder>
      <name>Folder B</name>
      <visibility>0</visibility>
      <Placemark>
        <name>Radio B</name>
        <visibility>0</visibility>
        <Point>
          <coordinates>-121.9921875, 37.265625</coordinates>
        </Point>
      </Placemark>
      </Folder>

    </Folder>    
  </Document>
</kml> 
```

参考： [https ://developers.google.com/kml/documentation/kmlreference#listItemType](https://developers.google.com/kml/documentation/kmlreference#listItemType)

# jquery - Double quotes in Jquery

> ID：12677745
> 
> 赞同：4
> 
> 时间：2012-10-01T17:02:45.860
> 
> 标签：jquery, double-quotes

I have read several posts regarding usinq quotes in jQuery and have not been able to form my own query. I have to check a span tag for a particular string. The string i am searching for is: role="alert" (it has double quotes around the word alert.

```
$("span:contains('role="alert"')").each(function() {        
        alert($(this).text());
    }); 
```

Can someone provide a query for this?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-01T17:03:37.053

```
$("span:contains('role=\"alert\"')") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T17:06:29.467

您可以简单地使用：

```
​$('span[role="alert"]')​​​​​​​​​​​​​​​​​​​.each(function() {        
    alert($(this).text());
}); 
```

# arrays - Oracle存储过程使用数组作为表插入参数

> ID：12677746
> 
> 赞同：3
> 
> 时间：2012-10-01T17:02:46.600
> 
> 标签：arrays, oracle, parameters

我一直在寻找一个明确的例子，但没有运气。对不起，如果它已经被回答。

我正在尝试做一些非常简单的事情——一个存储过程，它将接受输入并将它们插入到一个表中。我希望它采用多行数组并一次完成所有插入。

我认为这很简单，但我还没有找到一个可以展示给我的例子。

在很多例子中，我看到人们创建了一个函数来返回数组——这是我必须做的吗？

到目前为止，我有：

```
CREATE OR REPLACE TYPE my_type  is table of  ( name varchar2(20), phone varchar2(10));

CREATE OR REPLACE PROCEDURE customer.insert_mydata(v_my_data my_type )
AS
BEGIN

   BEGIN
 insert into mytable(Name, phone)
 values (v_my_data.name, v_my_data.phone) ; 
      COMMIT;
   END;
EXCEPTION
   WHEN OTHERS
   THEN
      ROLLBACK;
---error logging      );
END; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-01T17:44:33.913

这是您想要实现的示例。

让我们创建一个对象类型，它将包含类似`name`的`phone`属性。

```
CREATE OR REPLACE TYPE my_object as object(
   name varchar2(20),
   phone varchar2(10)
); 
```

现在让我们创建一个元素`my_object`类型的集合：

```
CREATE OR REPLACE TYPE my_table is table of my_object; 
```

现在我们的程序将把作为集合传入的数据插入到一个特定的表中：

```
CREATE OR REPLACE PROCEDURE insert_mydata(v_my_data my_table)
AS
BEGIN
  forall i in 1..v_my_data.count
    insert into Some_Table(name, phone)         -- 
      values(v_my_data(i).name, v_my_data(i).phone);
END; 
```

示范：

```
SQL> create table Some_table(
  2    name varchar2(20),
  3    phone varchar2(10)
  4  );

Table created

SQL> select * from some_table;

NAME                 PHONE
-------------------- ----------

SQL> 
SQL> declare
  2    l_col_data my_table;
  3  begin
  4    select my_object('Name'
  5                  ,  '(123)23') bulk collect into l_col_data
  6      from dual
  7    connect by level <=11;
  8  
  9    insert_mydata(l_col_data);
 10  end;
 11  /

PL/SQL procedure successfully completed

SQL> commit;

Commit complete

SQL> select * from some_table;

NAME                 PHONE
-------------------- ----------
Name                 (123)23
Name                 (123)23
Name                 (123)23
Name                 (123)23
Name                 (123)23
Name                 (123)23
Name                 (123)23
Name                 (123)23
Name                 (123)23
Name                 (123)23
Name                 (123)23

11 rows selected 
```

* * *

回复评论

我想您的 Oracle 版本是 11g 之前的版本。因此，要解决此错误（`PLS-00436 "implementation restriction".`），您可以使用内联视图插入数据：

```
 forall i in 1..v_my_data.count
    insert into (select name, phone from some_table) <--
      values(v_my_data(i).name, v_my_data(i).phone); 
```

或者，如果要插入的表的列数和插入的值相同，则尽量不要在插入语句中指定表的列名：

```
 forall i in 1..v_my_data.count
    insert into some_table                           <--
      values(v_my_data(i).name, v_my_data(i).phone); 
```

或使用`FOR .. LOOP.. END LOOP`构造：

```
 for i in 1..v_my_data.count
  loop
    insert into Some_Table(name, phone)         -- 
      values(v_my_data(i).name, v_my_data(i).phone);
  end loop; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T00:23:57.033

```
insert into mytable(Name, phone)
select name, phone
from TABLE(v_my_data); 
```

# css - 重复向输出元素添加/附加类

> ID：12677756
> 
> 赞同：1
> 
> 时间：2012-10-01T17:04:00.867
> 
> 标签：css, class, xslt, append

我基本上有一个这样的 XML 输入结构：

```
...
<box type="rectangle" class="someOriginalClass">
    <background bgtype="solid" />
    <animation order="3" />
    ... children
</box> 
```

并想将其转换为

```
<div class="someOriginalClass rectangle solid animated order3">
    ...children
</div> 
```

请注意，既不需要背景也不需要动画，这是一个简化的示例，这意味着可以有更多这样的属性，具有更多属性。同样，动画和背景在其他地方被重用。

到目前为止，我的 XSLT 代码是：

```
<xsl:template match="box">
    <div class="{@someOldClass} {@type}">
        <xsl:apply-templates select="./*" />
    </div>
</xsl:template>

<xsl:template match="background">
    <xsl:attribute name="class">
      <xsl:value-of select="@bgtype"/>
    </xsl:attribute>
</xsl:template>

<xsl:template match="animation">
    <xsl:attribute name="class">
      animated order<xsl:value-of select="@order"/>
    </xsl:attribute>
</xsl:template> 
```

这段代码的问题是每个模板都完全覆盖了类属性，忽略了已经包含的类。

**为了解决这个问题，我尝试过：**

a) 重写旧类 => value-of 只获取输入 XML 类 (someOldClass)

```
<xsl:template match="animation">
    <xsl:attribute name="class">
      <xsl:value-of select="../@class"/>
      animated order<xsl:value-of select="@order"/>
    </xsl:attribute>
</xsl:template> 
```

b) 而是在模板之间使用 params => 只传递一次更改，一种方式

```
<xsl:template match="box">
    <div class="{@someOldClass} {@type}">
        <xsl:apply-templates select="./*">
            <xsl:with-param name="class" select="concat(@someOldClass,' ',@type)"/>
        </xml:apply-templates>
    </div>
</xsl:template>

<xsl:template match="animation">
    <xsl:param name="class"/>
    <xsl:attribute name="class">
      <xsl:value-of select="$class"/>
      animated order<xsl:value-of select="@order"/>
    </xsl:attribute>
</xsl:template> 
```

你看，我缺少一个可以处理任意数量的类更新并且冗余最小的解决方案。顺便说一句，我是 XSLT 初学者，所以也许有一些我还没有遇到过的命中注定的功能。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T17:20:50.587

我以前用过这个。我不确定您的 XML 是什么样的，但这可能有助于您走上正确的道路。

```
<xsl:template match="box">
<xsl:param name="boxType" />
<li>
    <xsl:variable name="boxClass">
        <xsl:value-of select="$boxType"/>
        <xsl:if test="@class1 = 1"> class1</xsl:if>
        <xsl:if test="@class2 = 1"> class2</xsl:if>
        <xsl:if test="@class3 = 1"> class3</xsl:if>
        <xsl:if test="@class4 = 1"> class4</xsl:if>
        <xsl:if test="@last = 1"> lnLast</xsl:if>
    </xsl:variable>
    <xsl:attribute name="class">
        <xsl:value-of select="$boxClass"/>
    </xsl:attribute>
</li>
</xsl:template> 
```

# python - pinax 错误：没有名为调试工具栏的模块

> ID：12677758
> 
> 赞同：11
> 
> 时间：2012-10-01T17:04:02.320
> 
> 标签：python, django, pinax

我正在使用 pinax 开发一个项目，django 1.3.1 已经成功安装了 virtualenv、pinax 和其他要求并激活它使用`pinax-admin.py setup_project mysite`.

该项目创建成功，但每次运行`manage.py syncdb`时，命令行都会返回错误`no module named debug-toolbar`。

我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-01T17:24:33.957

您需要安装[django-debug-toolbar](https://github.com/django-debug-toolbar/django-debug-toolbar)。

```
pip install django-debug-toolbar 
```

# xampp - 如何将地址重定向到 XAMPP 中的另一个地址？

> ID：12677760
> 
> 赞同：0
> 
> 时间：2012-10-01T17:04:25.400
> 
> 标签：xampp

是否可以`localhost`将 解析为另一个地址而不是`127.0.0.1`，例如：`www.example.com`在 XAMPP 中？

如果可能的话，我可以在哪个配置文件中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T17:15:39.037

是的你可以。

编辑您的主机文件，为地址添加一个新行，例如：

`127.0.0.1 www.example.com`

在 linux 上，文件在`/etc`Windows 上，文件在`C:\windows\system32\drivers\etc`

如果您想拥有不同的站点，`localhost`并且`www.example.com`您必须为[虚拟主机](http://httpd.apache.org/docs/2.2/vhosts/name-based.html)设置您的网络服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:19:51.587

您实际上可以向（不知道该调用什么）`/etc/hosts`文件添加一个条目。它位于`C:\Windows\system32\drivers\etc\hosts`。您需要以管理员权限运行记事本，然后编辑文件并添加如下条目：

```
# Makes `localhost` go to stackoverflow.com
64.34.119.12    localhost 
```

然后`localhost`将解析为您本地计算机上的该 IP 地址。

但我**看**不出你如何在 XAMPP 中设置它，因为它不是 DNS 服务器。（即使是，操作系统更可能更喜欢`localhost`. `127.0.0.1`）

此外，您不能将其指向域名，因为它不是 CNAME 记录。

* * *

注意：正如您指出的关键字`resolve`，我假设您在谈论 DNS 条目。

# performance - Sqlite追加数据性能线性下降，这个可以解决吗？

> ID：12677761
> 
> 赞同：4
> 
> 时间：2012-10-01T17:04:29.637
> 
> 标签：performance, sqlite

我有一个测试设置来将行写入数据库。每个事务插入 10,000 行，没有更新。每一步都比最后一步花费更长的线性时间。前十步执行提交的时间如下（以毫秒为单位）

568、772、942、1247、1717、1906、2268、2797、2922、3816、3945

到将 10,00 行添加到 500,000 行的表时，提交需要 37149 毫秒！

*   我没有外键约束。

*   我发现使用 WAL 可以提高性能（给出上图），但仍然是线性退化

*   PRAGMA Synchronous=OFF 无效

*   PRAGMAlocking_mode=EXCLUSIVE 无效

*   在没有附加索引和附加索引的情况下运行。产生了大致恒定的时间差，因此仍然是线性退化。

我还有其他一些设置

*   设置自动提交（假）
*   PRAGMA page_size = 4096
*   PRAGMA journal_size_limit = 104857600
*   PRAGMA count_changes = 关闭
*   PRAGMA 缓存大小 = 10000
*   Schema 有 Id INTEGER PRIMARY KEY ASC，其插入是增量的，由 Sqlite 生成

完整架构如下（我已经运行了有索引和没有索引，但已经包含）

```
create table if not exists [EventLog] (
Id INTEGER PRIMARY KEY ASC, 
DocumentId TEXT NOT NULL, 
Event TEXT NOT NULL, 
Content TEXT NOT NULL, 
TransactionId TEXT NOT NULL, 
Date INTEGER NOT NULL, 
User TEXT NOT NULL)

create index if not exists DocumentId ON EventLog (DocumentId)

create index if not exists TransactionId ON EventLog (TransactionId)

create index if not exists Date ON EventLog (Date) 
```

这是使用在 windows 环境中运行的 sqlite-jdbc-3.7.2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T18:25:58.870

SQLite 表和索引[在内部组织为 B-Trees](http://www.sqlite.org/fileformat2.html)。在表中，Rowid 是排序键。（你`INTEGER PRIMARY KEY`是 Rowid。）

* * *

如果您插入的 ID 不大于表中已有的最大 ID，则不会附加记录，而是插入树中间的某个位置。当在一个事务中插入足够多的记录时，如果 ID 的分布是随机的，这意味着几乎数据库中的每一页都必须重写。

为了避免这种情况，

1.  按递增顺序插入 ID；或者
2.  插入 ID，`NULL`以便 SQLite 选择下一个值；或者
3.  `INTEGER UNIQUE`通过将其声明为（或仅`INTEGER`当您不需要额外的检查/索引）来防止 SQLite 使用您的 ID 字段为 Rowid ，从而使表排序独立于您的 ID。

* * *

在索引的情况下，插入具有随机分布的索引字段需要在随机位置更新索引。与表一样，当在一个事务中插入足够多的记录时，这意味着几乎索引中的每一页都必须重写。

当您加载大量数据时，建议在没有任何索引的情况下执行此操作，然后再重新创建它们。（与其他一些数据库不同，SQLite 没有暂时禁用索引的功能；只需删除它们。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T14:37:51.333

FYI, although I haven't limited the structure in terms of the content of the key, in 99.999% of cases, it will be a guid. So to resolve the performance issue I just wrote an algorithm for generating sequential guids using a time based value for the first 8 hex digits. This worked very well, even if blocks of guids are generated using early time values.

# javascript - javascript中使用正则表达式的千位分隔符

> ID：12677766
> 
> 赞同：0
> 
> 时间：2012-10-01T17:04:53.430
> 
> 标签：javascript, regex

我正在使用此正则表达式使文本框允许包含 6 位数字和两位小数的数字：

```
var regEx = /^\d{0,6}(,\d{0,2})?$/ 
```

现在，我想让它允许同样的事情，但有千位分隔符。例如：我希望 1321,54 为 1.321,54。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:08:52.770

以下应该作为正则表达式解决方案：

```
/^\d{1,3}(\.?\d{3})?(,\d{0,2})?$/ 
```

请注意，我将千位分隔符设为可选，如果您希望它是强制性的，只需`?`删除`\.?`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:09:35.670

那么，你想要这个吗？

```
/^(\d{1,3}\.\d{3}|\d{0,6})(,\d{0,2})?$/ 
```

它只是增加了 4、5 或 6 个小数点前数字在通常位置用点分隔的情况。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-01T17:07:39.807

请参阅[`number_format`PHPJS](http://phpjs.org/functions/number_format:481)以获取 PHP 的 JavaScript 端口`number_format`，这正是您正在寻找的。

# asp.net - 如何覆盖 AjaxToolkit CalendarExtender 日期到字符串的转换？

> ID：12677770
> 
> 赞同：1
> 
> 时间：2012-10-01T17:05:20.510
> 
> 标签：asp.net, localization, calendarextender

我正在使用 Microsoft Ajax Toolkit[`CalendarExtender`](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Calendar/Calendar.aspx)控件，将日历下拉功能添加到常规文本框：

```
<asp:TextBox ID="edStartDate" runat="server" />
<asp:CalendarExtender ID="CalendarExtender1" runat="server" 
      TargetControlID="edStartDate" /> 
```

这适用于大多数客户端语言环境。似乎该控件执行服务器请求以将 a`DateTime`转换为本地化的`String`.

例如，今天（2012 年 10 月 1 日）在阿拉伯语中显示良好`15/11/33`：

![在此处输入图像描述](../Images/852201d789748099614b12e2ecf14823.png)

并且在下索布语中也显示良好`1\. 10\. 2012`：

![在此处输入图像描述](../Images/29b4929fb7ff9cdd2e3ac80728ee7b40.png)

* * *

但是[某些语言环境在 .NET 中无法正确显示](https://stackoverflow.com/questions/8234365/net-date-to-string-gives-invalid-strings-in-vista-pseudo-cultures) **`1////10////2012`**：

![在此处输入图像描述](../Images/9f18f4b003c29e2592efc5f6489faacc.png)

在这种情况下，我需要某种`OnFormatDate`事件，我可以将日期的正确本地化提供给字符串。这导致了我的问题：

> 如何覆盖 AjaxToolkit CalendarExtender 日期到字符串的转换？

* * *

**注意：**不要将问题与示例混淆。

*   我在问如何自定义日期到字符串的转换`CalendarExtender`
*   即使我没有处理 .NET 中的错误，它也不会改变我的问题
*   即使我不处理 a `CalendarExtender`，我仍然在问这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:29:36.427

在你的页面......在它的顶部......你有类似的东西：

```
<%@ Page Language="C#" AutoEventWireup="true" %> 
```

添加类似的东西（例如西班牙语）......

```
<%@ Page Language="C#" AutoEventWireup="true" UICulture="es" Culture="es-MX" %> 
```

在你的脚本管理器中

```
EnableScriptLocalization="true" EnableScriptGlobalization="true" 
```

几乎会覆盖本地设置...

但我猜你只想在 CalendarExtender 中设置这个属性：

`Format="yyyy-MM-dd"`或者`Format="dd/MM/yyyy"` 或者你喜欢的...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:54:08.087

我使用了与本机 Win32 应用程序相同的解决方案。

使用`CalendarExtender`“*短日期”*格式 ( **`d`**)。修复是解决 .NET 中的错误：

```
String format = CultureInfo.CurrentCulture.DateTimeFormat.ShortDatePattern;

format = FixDotNetDateTimeFormatStringsBug(format);

CalendarExtender1.Format = format; //starts as "d", the "Short date" format 
```

使用我们的辅助修复器：

```
public String FixDotNetDateTimeFormatStringBug(String format)
{
   //The bug in .NET is that it assumes "/" in a date pattern means "the date separator".
   //What .NET doesn't realize is that the locale strings returned by Windows
   // are the *Windows* format strings. 
   //The bug is exposed in locale's that use two slashes as for their date separator:
   //      dd//MM//yyyy
   //Which .NET misinterprets to give:
   //      30////11////2011
   //when really it should be taken literally to be:
   //      dd'//'MM'//'yyyy
   //which is what this fix does:

   return = format.Replace("/", "'/'");
} 
```

或者，如果您喜欢更简洁：

```
CalendarExtender1.Format = FixDotNetDateTimeFormatStringsBug(
      CultureInfo.CurrentCulture.DateTimeFormat.ShortDatePattern); 
```

> **注意**：任何代码都会发布到公共领域。无需归属。

# ios - UICollection View - Segue - 确实选择了特定的单元格，LOG

> ID：12677775
> 
> 赞同：5
> 
> 时间：2012-10-01T17:05:37.187
> 
> 标签：ios, nsdictionary, segue, uistoryboardsegue, uicollectionview

我开始使用 UICollectionview 来加载定制的相册，相册加载得很好，数据来自我的服务器（SQL-JSON-NSARRAY-NSDictionary）并且被填充到单元格中就好了，但是现在我当用户选择该单元格以加载具有该图像的全尺寸新 UIVIewController 时会喜欢它（以便他们可以查看/打印/共享等）

但是，我陷入了“准备继续”方法中，因为我无法从该特定单元格中提取任何信息

作为现在的测试，我只想让 NSLOG 说“用户选择了专辑标题 %@”

到目前为止，这是我的代码，任何帮助将不胜感激......

```
#import "AlbumViewController.h"
#import "AlbumCustomCell.h"
#import "PhotosInAlbumsViewController.h"

@interface AlbumViewController ()

@end

@implementation AlbumViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    /// Grab Photo Album information (pics,title,date) From Server

    NSString *myURL1 = [ NSString stringWithFormat:         @"http://mywebsiteaddress.com/index.php"];
    NSData *data = [NSData dataWithContentsOfURL: [NSURL URLWithString:myURL1]];
    NSError *error;
    NSDictionary *json = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];
    NSArray *items = [json objectForKey:@"users"];
    photoalbumarray = items;
   // NSLog(@"%@", photoalbumarray);
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

-(NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView {
    return 1;

}

-(NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section {
  return [photoalbumarray count];
}

-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *cellID = @"CelliD";
    AlbumCustomCell *myCell = (AlbumCustomCell *) [collectionView dequeueReusableCellWithReuseIdentifier:cellID forIndexPath:indexPath];
    // this above states to setup the cell using the Identifier I specified in Sotry board, so that cell is constantly reused

    if (indexPath.section == 0) { 
         NSDictionary *item = [photoalbumarray objectAtIndex:[indexPath row]];
myCell.titleincell.text = [item objectForKey:@"title"]; // this puts the title in the cell
        teststring = [item objectForKey:@"title"];

        myCell.dateincell.text = [item objectForKey:@"date"]; // this puts the date in the     data label in the cell

      //  myCell.imageincell1.image = [UIImage imageNamed:[item objectForKey:@"img1"]]; // this puts the picture in the cell
         myCell.imageincell2.image = [UIImage imageNamed:[item objectForKey:@"img2"]]; // this puts the picture in the cell
         myCell.imageincell3.image = [UIImage imageNamed:[item objectForKey:@"img3"]]; // this puts the picture in the cell

        // IMAGE 1
        NSString *picture1 = [item objectForKey:@"img1"];
        NSURL *imageURL1 = [NSURL URLWithString:picture1];
        NSData * imageData1 = [NSData dataWithContentsOfURL:imageURL1];
        UIImage * image1 = [UIImage imageWithData:imageData1];
        myCell.imageincell1.image = image1;

    myCell.imageincell1.alpha = 0.0;
    [UIView animateWithDuration:1.5 animations:^{
        myCell.imageincell1.alpha = 1.0;
    }];

    // IMAGE 2
    NSString *picture2 = [item objectForKey:@"img2"];
    NSURL *imageURL2 = [NSURL URLWithString:picture2];
    NSData * imageData2 = [NSData dataWithContentsOfURL:imageURL2];
    UIImage * image2 = [UIImage imageWithData:imageData2];
    myCell.imageincell2.image = image2;

    myCell.imageincell2.alpha = 0.0;
    [UIView animateWithDuration:1.5 animations:^{
        myCell.imageincell2.alpha = 1.0;
    }];

    // I MAGE 3
    NSString *picture3 = [item objectForKey:@"img3"];
    NSURL *imageURL3 = [NSURL URLWithString:picture3];
    NSData * imageData3 = [NSData dataWithContentsOfURL:imageURL3];
    UIImage * image3 = [UIImage imageWithData:imageData3];
    myCell.imageincell3.image = image3;
    myCell.imageincell3.alpha = 0.0;
    [UIView animateWithDuration:1.5 animations:^{
        myCell.imageincell3.alpha = 1.0;
    }];

}
return myCell;
}

// SEGUE TRANSITION FROM ALBUMS TO PHOTO
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"showPhotoAlbum"]) {
        NSLog(@"Prepare for Segue to load Specific Photo Album");
        NSLog(@"User Selected this cell or the name of the title in the cell which comes from a NSDictionary =>");
// EXAMPLE NSLOG TO SHOW =>  User Selected - Album Name
// Where album name is actually the album name grabbed form the server based on the selected row
    }
}

@end 
```

这样你就可以看到我的来自服务器的 JSON 数据进来了，这里是

```
2012-10-01 13:02:53.856 CB Photo[3957:907] (
        {
        date = "2012-10-01 07:23:01";
        id = 1;
        img1 = "http://b2fdev.ca/demo/CBPhoto/pic1.jpg";
        img2 = "http://b2fdev.ca/demo/CBPhoto/pic2.jpg";
        img3 = "http://b2fdev.ca/demo/CBPhoto/pic3.jpg";
        title = "Paul and Jenna's Wedding 2012";
    },
        {
        date = "2012-10-01 05:23:23";
        id = 2;
        img1 = "http://core1.ca/wp-content/themes/custom-community/images/block4.png";
        img2 = "http://core1.ca/wp-content/themes/custom-community/images/block3.png";
        img3 = "http://core1.ca/wp-content/themes/custom-community/images/block2.png";
        title = "Core 1";
    }
) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-09T20:39:20.377

你是这个意思？

```
NSArray *indexPaths = [self.collectionView indexPathsForSelectedItems];
DetailViewController *destViewController = segue.destinationViewController;

NSIndexPath *index = [indexPaths objectAtIndex:0];

NSLog(@"%d", index.section * 2 + index.row); 
```

数组中的此打印索引 2 x 任意数组；

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-11T13:18:41.343

我这样做的方式是在我的集合视图控制器中保留一个私有成员变量：

```
NSInteger selectedPhotoIndex; 
```

每次用户在集合视图中选择某些内容时，它都会更新：

```
- (void)collectionView:(UICollectionView *)collectionView 
            didSelectItemAtIndexPath:(NSIndexPath *)indexPath {
    selectedPhotoIndex = indexPath.row;
} 
```

然后我只是在我的`prepareForSegue`方法中使用它。应用于您的案例，它看起来像这样：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([[segue identifier] isEqualToString:@"ShowPhotoAlbum"]) {
        NSLog(@"User selected %@", [[photoalbumarray objectAtIndex:selectedPhotoIndex] objectForKey:@"title");
        // ... find the right detail VC, set its data, set up delegate etc.
    }
} 
```

这很简单，因为在这种情况下，我在集合视图中只有一个部分。如果您有多个部分，只需维护一个`NSIndexPath`实例，而不是简单的整数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T18:15:11.800

要在数据源中获取所选元素，您可以使用：

```
[self.collectionView indexPathsForSelectedItems]; 
```

它返回一个 indexPath 数组。然后你可以像这样配置目标视图控制器：

```
NSArray *indexPaths = [self.collectionView indexPathsForSelectedItems];
ViewController *destinationViewController = (ViewController *)segue.destinationViewController;
destinationViewController.myPropertyToSet = [self.photoalbumarray objectAtIndex:[[test objectAtIndex:0] row]]; // You may have to store it in a proper NSindexPath object before or cast it 
```

我只得到索引 0 但您可以请求 indexPaths 数组中返回的任何索引。另外不要忘记确保数组不为空（通常不应该，但以防万一）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-16T04:59:04.107

也可以使用 sender 参数

`- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender`

发件人将是启动 segue 的 UICollectionViewCell 或子类。

这可以帮助清理您的代码。

因此，作为原始问题中提供的代码的示例

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    [super prepareForSegue:segue sender:sender];

    id destination = segue.destinationViewController;

    if ([sender isKindOfClass:[AlbumCustomCell class]])
    {
        AlbumCustomCell *cell = sender;
        // set something on destination with a value from the cell
    }
} 
```

# eclipse - 限制 Eclipse 中可用的字体

> ID：12677776
> 
> 赞同：0
> 
> 时间：2012-10-01T17:05:38.517
> 
> 标签：eclipse, fonts, eclipse-plugin, birt

我有一个自定义版本的 Eclipse，它带有一个自定义版本的 BIRT 插件。

我希望将 BIRT 报表设计器中可供选择的字体列表限制为指定的有限字体集。目前可选择的字体列表是系统上安装的所有字体。

我已经看到可以在运行时为 BIRT 引擎可用的字体编辑 fontConfig.xml 文件，但我想限制 Eclipse UI 的下拉菜单中可供选择的字体

有没有办法限制这个列表（仅适用于 BIRT 报表设计器）？

干杯，罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T11:36:40.423

看起来无法完成 - 需要对 BIRT 进行更改/修补。

org.eclipse.birt.report.designer.core\src\org\eclipse\birt\report\designer\util\DEUtil.getSystemFontNames 是为下拉菜单检索字体的点，它直接从 Eclipse 中读取（显示）环境

# hibernate - hibernate.cfg.xml 放在哪里？

> ID：12677783
> 
> 赞同：48
> 
> 时间：2012-10-01T17:06:29.673
> 
> 标签：hibernate, hibernate.cfg.xml

我的项目是这样的：

```
/src/main/java
     -thegamers
         -app.java
         -hibernateutil.java 
```

有人能告诉我把hibernate.cfg.xml放在哪里吗？

因为我收到了这个错误：

```
Initial SessionFactory creation failed.org.hibernate.HibernateException: hibernate.cfg.xml not found
Exception in thread "main" java.lang.ExceptionInInitializerError
    at thegamers.HibernateUtil.buildSessionFactory(HibernateUtil.java:17)
    at thegamers.HibernateUtil.<clinit>(HibernateUtil.java:8)
    at thegamers.App.main(App.java:15)
Caused by: org.hibernate.HibernateException: hibernate.cfg.xml not found
    at org.hibernate.util.ConfigHelper.getResourceAsStream(ConfigHelper.java:170)
    at org.hibernate.cfg.Configuration.getConfigurationInputStream(Configuration.java:2149)
    at org.hibernate.cfg.Configuration.configure(Configuration.java:2130)
    at thegamers.HibernateUtil.buildSessionFactory(HibernateUtil.java:13)
    ... 2 more 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2015-03-30T17:31:36.550

**配置文件`hibernate.cfg.xml`需要在`classpath`.**

这可以通过不同的方式完成，具体取决于您的项目。

*   对于**web-app WAR**项目（您在 Servlet 容器中运行程序）：将其放入`WEB-INF/classes`将起作用，因为`WEB-INF/classes`当应用程序在容器中运行时，文件在类路径中可见。

*   对于**Maven**风格的项目（不在 Servlet 容器中运行程序）：将其放入`/src/main/resources/`将起作用

*   否则，请在`src/`目录中尝试。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-04-15T16:58:31.300

我正在使用 maven，直到我将 hibernate.cfg.xml 放入`src/main/resources`.

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-10-01T17:11:00.193

在您的项目的根目录：（`/src`至少默认情况下）

如何知道是否`/src`是源目录？
当您创建一个新的 Java 类时，它包含在一个包中（通常它与创建它的目录的名称相同）。因此，在您的班级声明中，您可以看到如下内容：

```
package foo;

class MyClass{ 
```

在默认 IDE 设置中，该类应位于`/src/foo/MyClass.java`. 如您所见，在这种情况下`/src`充当根源目录。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-01T17:22:59.330

如果它不是网络项目，那么明确地这样做

```
new Configuration().configure( "pth/to/hibernate.cfg.xml").buildsessionfactory() 
```

希望这可能会有所帮助

@SiB 指出了一个链接（mkyong 的网站）。那里解释得很好。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-01T17:14:37.397

该文件假设进入您的目录的根`/src`目录，虽然`/src`没有部署，但其中的所有内容都是构建/复制出来的`WEB-INF/classes`IS 部署。Hibernate 需要项目`cfg.xml`中的文件来**加载**`classpath`其配置设置，您的`WEB-INF`目录不在您`classpath`的.

 **该[线程](http://www.mkyong.com/hibernate/how-to-load-hibernate-cfg-xml-from-different-directory/)将告诉您如何从任何不同的路径加载 hibernate.cfg.xml。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-05-24T05:56:57.387

如果您使用的是 Eclipse，请转到 Project -> Properties -> Java Build Path -> Source。您可以添加放置文件的新文件夹，或将文件移动到现有文件夹。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-11T14:52:41.567

CMD+N/CTR+N 当你在 Eclips 上时，它会打开一个对话框，你必须复制点击 Hibernate 文件夹。它将打开带有 XML 扩展名的文件列表。选择 cfg.xml 并单击继续，完成后！点击完成。Eclips 现在将在 cfg.xml 文件中添加类名称并将其显示在 SRC 文件夹下。国标

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-21T13:12:35.483

放置`hibernate.cfg.xml`在`src/`文件夹下或在代码中明确提及路径：

```
new Configuration.configure("path of hibernate.cfg.xml").buildsessionfactory() 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2017-09-07T14:56:06.500

尝试将其放入“ `src/main/resources`”目录。**

# ruby-on-rails - Rspec、Paperclip、Fabrication、有效对象而不保存到文件系统

> ID：12677786
> 
> 赞同：3
> 
> 时间：2012-10-01T17:06:50.167
> 
> 标签：ruby-on-rails, rspec, paperclip, ruby-on-rails-3.2

我有一个带有回形针 3.2 的 rails 3.2 应用程序，并且我有一个具有所需回形针附件（拇指）的模型。如何在不将文件保存到文件系统或 S3 的情况下创建有效对象。我目前拥有的内容如下，但这会在每次运行时保存到文件系统中。有没有办法在不每次都上传的情况下获得有效的剧集？

## 模型：

```
class Episode
  include Mongoid::Document
  include Mongoid::Paperclip
  has_mongoid_attached_file :thumb
  validates_attachment_presence :thumb
end 
```

## 规格：

```
require 'spec_helper'

describe Episode do
  it "has a valid factory" do
    Fabricate.build(:episode).should be_valid
  end
end 
```

## 制造商：

```
Fabricator(:episode) do
  thumb { File.open(File.join(Rails.root, 'spec', 'fabricators', 'assets', 'thumb.jpg'))}
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T12:02:36.200

发现这个：

[http://room118solutions.com/2011/05/25/stubbing-paperclip-during-testing/](http://room118solutions.com/2011/05/25/stubbing-paperclip-during-testing/)

对于 Paperclip 3.0：Paperclip 3.0 发生了一些重大变化，您现在应该使用如下内容：

规范/支持/stub_paperclip_attachments.rb

```
module Paperclip
  class Attachment
    def save
      @queued_for_delete = []
      @queued_for_write = {}
      true
    end

  private
    def post_process
      true
    end
  end

  # This is only necessary if you're validating the content-type
  class ContentTypeDetector
  private
    def empty?
      false
    end
  end
end 
```

# java - 隐藏枚举常量

> ID：12677790
> 
> 赞同：0
> 
> 时间：2012-10-01T17:06:54.330
> 
> 标签：java, api

我将枚举作为按顺序遍历树结构的指南（迭代器使用这些枚举常量来决定如何遍历树）：

```
/**
 * The result type of an {@link IVisitor} implementation.
 * 
 * @author Johannes Lichtenberger, University of Konstanz
 */
public enum EVisitResult {
  /** Continue without visiting the siblings of this node. */
  SKIPSIBLINGS,

  /** Continue without visiting the descendants of this node. */
  SKIPSUBTREE,

  /** Continue traversal. */
  CONTINUE,

  /** Terminate traversal. */
  TERMINATE,

  /** Pop from the right sibling stack. */
  SKIPSUBTREEPOPSTACK
} 
```

然而，最后一个枚举常量仅用于内部访问者，不应该被使用公共 API 的用户使用。有什么想法可以隐藏“SKIPSUBTREEPOPSTACK”吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T17:12:27.260

您所能做的就是记录不应该使用它。

另一种方法是使用接口

```
public interface EVisitResult {
}

public enum PublicEVisitResult implements EVisitResult {
  /** Continue without visiting the siblings of this node. */
  SKIPSIBLINGS,

  /** Continue without visiting the descendants of this node. */
  SKIPSUBTREE,

  /** Continue traversal. */
  CONTINUE,

  /** Terminate traversal. */
  TERMINATE,
}

enum LocalEVisitResult implements EVisitResult {
  /** Pop from the right sibling stack. */
  SKIPSUBTREEPOPSTACK
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T17:44:49.920

如果你想要公共 API 和内部实现的枚举，你可以有 2 个枚举

```
private enum InternalFoo
    foo1
    foo2
    foox

private void doFoo(InternalFoo foo)
    switch(foo)
        case foo1
        ...

-----

public enum Foo
    foo1(InternalFoo.foo1)
    foo2(InternalFoo.foo2)
    // no foox

    InternalFoo internal;
    Foo(InternalFoo internal){ this.internal=internal; }

public void doFoo(Foo foo)
    doFoo(foo.internal); 
```

# asp.net - 是否可以触发 __doPostBack 两次？

> ID：12677793
> 
> 赞同：0
> 
> 时间：2012-10-01T17:07:00.137
> 
> 标签：asp.net, postback

我正在维护一个似乎以某种方式重复记录的 ASP .Net 应用程序，例如使用页面添加用户。我无法重现，但我发现一些代码在提交时会做一些疯狂的事情：

```
if(crazy-code()){
    __doPostBack() // 2nd
} 
```

和疯狂代码也做类似的事情

```
function crazy-code()
{
    ...
    __doPostBack() // 1st
    ...
    return true;
} 
```

为了找出导致问题的这段代码，我一直在尝试触发这两个，`__doPostBack`但我无法做到。理论上，应该总是发生的是当它触发 (1st)`__doPostBack`时，它应该发送请求并在之后停止/忽略任何客户端代码。如果`__doPostBack`被解雇两次，会是什么原因？浏览器？速度？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:27:50.293

我能够创建一个测试代码。在 FF 和 chrome 中似乎工作正常（1 次提交），但 IE9（和兼容版本）似乎达到了 1、2 或 3 次。注意： submit() 导致回发。案例 1\. Javascript 页面延迟：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>testing</title>
    <script type="text/javascript">
        function submitForm() {
            document.forms[0].submit();
            alert("delay");
            document.forms[0].submit();
        }
    </script>
</head>
<body>
    <form id="form1" name="form1" runat="server">
    <div>
        <asp:TextBox ID="TextBox1" runat="server" Width="220px"></asp:TextBox>
        <button onclick="submitForm(this)">CLICK</button>
        <br />
        <asp:Label ID="Label1" runat="server"></asp:Label>
    </div>
    </form>
</body>
</html> 
```

后面的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    if(IsPostBack)
    {
        incrementVal();
    }
}

private void incrementVal()
{
    var val = (int)(Session["val_" + TextBox1.Text] ?? 0);
    val++;
    Label1.Text += TextBox1.Text + ": " + val.ToString("00") + " - " + DateTime.Now.ToLongTimeString() + "<br/>";
    Session["val_" + TextBox1.Text] = val;
} 
```

![在此处输入图像描述](../Images/b4766da4f15602f48f8beea6288605b1.png)

案例 2：响应缓慢

删除 JS 警报：

```
function submitForm() {
    document.forms[0].submit();
    document.forms[0].submit();
} 
```

在服务器端添加延迟：

```
if(IsPostBack)
{
    incrementVal();
    Thread.Sleep(500);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:35:54.240

**__doPostBack()**调用将提交表单，它不应该调用第二个。

我可能是错的，但我认为如果您在网页上点击“提交”并在页面重新加载后点击“F5”，您可以重现您的问题。根据浏览器的不同，它会询问“重新发送来自数据？”之类的问题。选择“是”并检查您的记录是否重复。

无论如何，我认为您需要在服务器端插入数据时添加对重复值的检查。

# c# - 在 RowFilter 中，如何选择 C# 中的所有表格列？

> ID：12677799
> 
> 赞同：2
> 
> 时间：2012-10-01T17:07:23.067
> 
> 标签：c#, rowfilter

这是我的代码...

这里我有一个文本框。编写某些文本时会自动匹配字符串并查找所有行..

现在..但是在我的代码中..这里仅使用“ClientName”过滤我想从所有列中搜索该文本..

如何指定 RowFilter 中的所有列请给我解决方案

```
 private void txtSearch_TextChanged(object sender, EventArgs e)
    {
      dv.RowFilter = "ClientName Like '%" + txtSearch.Text + "%'";
      dgClientMaster.DataSource = dv;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-01-30T04:08:07.103

按照 Furqan Safdar 的代码，我得到了下面的解决方案对我来说很好。

```
StringBuilder sb = new StringBuilder();
foreach (DataGridViewColumn column in DGridView_Main.Columns)
{
  sb.AppendFormat("CONVERT({0}, System.String) LIKE '%{1}%' OR ", column.Name, TxtBx_FilterKeywordForGridView.Text);
}
sb.Remove(sb.Length - 3, 3);
(DGridView_Main.DataSource as DataTable).DefaultView.RowFilter = sb.ToString(); 
```

我希望它也能帮助其他人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T17:14:43.613

试试这个代码：

```
private void txtSearch_TextChanged(object sender, EventArgs e)
{
    StringBuilder sb = new StringBuilder();

    foreach (DataColumn column in dv.Table.Columns)
    {
        sb.AppendFormat("{0} Like '%{1}%' OR ", column.ColumnName, txtSearch.Text);
    }

    sb.Remove(sb.Length - 3, 3);
    dv.RowFilter = sb.ToString();
    dgClientMaster.DataSource = dv;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-15T09:56:28.030

你可以试试

```
dv.RowFilter = "[Column1] + [Column2] + [Column3]" + " Like '%" + txtSearch.Text + "%'"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T17:09:13.503

您需要指定要搜索的列，并用`OR`子句分隔，如下所示：

```
dv.RowFilter = "ClientName Like '%" + txtSearch.Text + "%' OR ClientNickName Like '%" + txtSearch.Text + "%'"; 
```

此外，您需要转义单引号，否则您将遇到查询中断或 SQL 注入问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-06T03:48:00.987

```
private void txtSearch_TextChanged(object sender, EventArgs e)
{
    List<string> columns = dataGrid1.Columns.Select(x => "[" + x.Header + "]").ToList();
    string query = String.Format("{0} Like '%{1}%'", String.Join("+", columns), txtSearch.Text);
    dv.RowFilter = query;
} 
```

# bash - 循环移动文件不起作用

> ID：12677800
> 
> 赞同：0
> 
> 时间：2012-10-01T17:07:25.367
> 
> 标签：bash

我有一个这样的早晨，没有任何计划。我需要一次将文件按 1,000 个块移动到目标目录

我想像这样遍历我的文件

```
for i in `find . -name '*XML'`
   for((b=0; b<1000; b++))
   do
   mv $i targetdirect/
   done
done 
```

但是我得到一个“-bash：语法错误，靠近意外的标记‘完成：”错误。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T17:09:19.540

第二个`for`循环是语法错误。你也应该双引号`"$i"`。

一次移动 1000 个文件是什么意思？大概是这样的？

```
find . -name '*.XML' -print0 | xargs -r0 -n 1000 mv -t targetdirect 
```

`-print0`和对应的`xargs -0`是处理任意文件名的 GNU 扩展。这是有效的，因为空字符是 Unix 上文件名中的无效字符；因此，可以安全地用作文件名之间的分隔符。对于常规命名的文件（文件名中没有引号，没有换行符等），这可能看起来很偏执，但这是有据可查的做法和[常见问题解答](http://mywiki.wooledge.org/BashFAQ/095)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:09:06.767

你的第一个`for`循环没有对应的`do` （你有两个`done`，但只有一个`do`。）

# c# - 使用列表查找日期子集 >

> ID：12677803
> 
> 赞同：1
> 
> 时间：2012-10-01T17:07:34.633
> 
> 标签：c#

在 C# 中，我有一个`List<Tuple<DateTime,Double>>`命名的时间序列。我正在尝试从时间序列中计算一些基本统计数据（平均值和诸如此类）和日期子集。例如，我想计算平均值：

*   一个月（即今天到 1 个月前）
*   三个月
*   六个月
*   一年

我的想法是使用循环遍历上述每一项并从时间序列中删除日期，然后将数据减少为我感兴趣的元组。不过，这似乎效率很低……

有人对我如何做到这一点有任何想法吗？LINQ会这样做吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:15:09.367

这里是 1 个月，3 或 6 个月也一样：

```
var dataForOneMonth = dataList.Where(t => t.Item1 >= DateTime.Now.AddMonths(-1) 
                           && t.Item1 <= DateTime.Now);

 var sum = dataForOneMonth.Sum(t => t.Item2);
 var avg = dataForOneMonth.Average(t => t.Item2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T17:11:05.953

我不明白为什么 Linq 不能这样做（尽管这并不意味着它是最好的方法）。像这样的东西，在我的脑海中，可能会起作用：

```
// Assign some tuple data to 'dataList'
List<Tuple<DateTime,Double>> dataList = SomeTupleData

// Filter all the rows to just the dates desired.
dataList
  .Where(row => row.Item1 >= startDate && row.Item1 <= endDate)
  .Average(row => row.Item2) 
```

# html - 如何让文本很好地坐在旋转的 div 元素中

> ID：12677806
> 
> 赞同：0
> 
> 时间：2012-10-01T17:07:39.127
> 
> 标签：html

对于我正在制作的网站，我想要一个漂亮的旋转“导航”栏，只是页面顶部的简单链接。

我得到的代码：

```
div.home
{
position: absolute;
top: 0px;
left: 700px;
height: 150px;
width: 40px;
background-color: #313131;
-webkit-transform: rotate(45deg);
margin-top: -36px;
text-transform: rotate(45deg);
} 
```

和：

```
<div class="home">
Home
</div> 
```

这使得文本在元素的顶部聚集在一起。理想情况下，我希望它位于元素的底部，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:19:02.677

我不知道你到底想要什么，但这些可能会有所帮助

```
<div class="home">
  <div class="text">    
    Home
  </div>
</div>​

div.home
{
 position: absolute;
 top: 30px;
 left: 700px;
 height: 150px;
 width: 40px;
 background-color: #313131;
 -webkit-transform: rotate(45deg);
 margin-top: -36px;
 -webkit-text-transform: rotate(90deg);
}
.text{
  margin-top:100px;
 font-size:26px;
 -webkit-transform: rotate(-90deg);
 color:white;
} 
```

[演示](http://jsfiddle.net/afshinprofe/RQVWY/) ​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:10:34.827

不要转换文本。`transform`（和`-ms-transform`，`-webkit-transform`等等）包括旋转文本并在新位置接收鼠标事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T17:19:28.160

我不知道这是否正是您遇到的问题，但将`top`值更改为`'30px'`.

[演示](http://jsfiddle.net/T6FFQ/)

# javascript - shopify 产品网格 clearfix

> ID：12677807
> 
> 赞同：0
> 
> 时间：2012-10-01T17:07:47.547
> 
> 标签：javascript, css, shopify

对于我的产品网格，clearfix 自动将高度设置为 80 像素。但是，当您再次单击收藏链接时，它会正确显示。

为什么会这样？shopify 中是否有某种现金？

# android - 如何在 Android GraphView 中放置标记

> ID：12677808
> 
> 赞同：1
> 
> 时间：2012-10-01T17:08:00.743
> 
> 标签：android, graph, marker

这个问题特定于开源 GraphView 库。(https://github.com/jjoe64/GraphView)

有人用它在其中添加标记吗？

我想用它创建一个实时心电图。并且需要在用户按下按钮时创建一条垂直线。我喜欢 GraphView 库，因为它简单且支持实时连续数据流。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T08:21:45.927

这是不可能的。

您应该查看 Graphview ( [https://github.com/jjoe64/GraphView](https://github.com/jjoe64/GraphView) ) 的源代码。代码真的很简单。

来看看方法`onDraw()`。`GraphView.java`在那里你应该能够画线......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T16:48:41.403

我已经解决了这个问题，这是诀窍。

*   添加另一个系列，添加两个点 (x, min_y_value) 和 (x, max_y_value) ... 其中 x 是您要添加标记的水平位置。

显然它包括一些处理，因为线是连续图..当我使用连续图时..我在我的图上运行那个标记线，即（x，max_y_value），当我需要绘制标记时，我把它拉下来像 (x, min_y_value) 然后以相同的 x 值 (x, max_y_value) 以直线向上拉回。显然，图形顶部会有一条可见线，您可以通过一些叠加层来隐藏它。

# routing - 是否有在 IE < 8 上运行的 Sammy.js 的替代方案？

> ID：12677810
> 
> 赞同：2
> 
> 时间：2012-10-01T17:08:05.407
> 
> 标签：routing, client-side, sammy.js

目前我正在使用[Sammy.js](http://sammyjs.org/)进行客户端路由。

尽管它在现代浏览器中运行良好，但在 IE < 8 中无法运行。不幸的是，我还需要它在 IE 6 和 IE 7 中运行......

我一直在寻找替代方案，但还没有找到我希望的接近 Sammy.js 的任何东西。

那么：是否有 Sammy.js 的替代品，它的工作方式几乎相同（来自其 API），但成功支持 IE 6 和 IE 7？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T01:07:16.640

是的，在 IE7-IE6 中还有一种路由选择：[jQuery BBQ: Back Button & Query Library](http://benalman.com/projects/jquery-bbq-plugin/)

# java - Ant 目标失败：Antlib 或 Ivy 问题？

> ID：12677816
> 
> 赞同：27
> 
> 时间：2012-10-01T17:08:30.247
> 
> 标签：java, ant, ivy

> **可能重复：**
> [Ivy 无法解决依赖关系，无法找到原因](https://stackoverflow.com/questions/9853851/ivy-fails-to-resolve-a-dependancy-unable-to-find-cause)

我正在尝试运行以下构建任务（`initIvy`）：

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="myproject-build" default="package" basedir=".." xmlns:ivy="antlib:org.apache.ivy.ant">
    <property file="build/build.properties"/>
    <property environment="env"/>

    <!-- Ant library path, including all of its plugins. -->
    <path id="ant.lib.path">
        <fileset dir="${env.ANT_HOME}/lib" includes="*.jar"/>
    </path>

    <!-- CONFIGURE IVY -->
        <taskdef resource="org/apache/ivy/ant/antlib.xml"
            uri="antlib:org.apache.ivy.ant" classpathref="ant.lib.path"/>

    <!-- Use Ivy tasks to resolve dependencies into the local Ivy cache. -->
    <target name="initIvy">
        <!-- Initialize Ivy and connect to host repository. -->
        <echo message="Initializing Apache Ivy and connecting to the host repository."/>
        <ivy:settings url="${ivy.std.repo.settings.url}" realm="${ivy.std.repo.realm}" username="${ivy.std.repo.username}" passwd="${ivy.std.repo.password}"/>

        <!-- Clear/flush the Ivy cache. -->
        <echo message="Cleaning the local Ivy cache for the current build."/>
        <ivy:cleancache/>
    </target>

    <!-- Rest of buildfile omitted for brevity. -->

</project> 
```

当我运行时，`ant -buildfile build.xml initIvy`我得到以下输出：

```
Buildfile: /<path-to-my-project>/build/build.xml
    [taskdef] Could not load definitions from resource org/apache/ivy/ant/antlib.xml. It could not be found.

initIvy:
    [echo] Initializing Apache Ivy and connecting to the host repository.

BUILD FAILED
/<path-to-my-project>/build/build.xml:81: Problem: failed to create task or type antlib:org.apache.ivy.ant:settings
    Cause: The name is undefined.
    Action: Check the spelling.
    Action: Check that any custom tasks/types have been declared.
    Action: Check that any <presetdef>/<macrodef> declarations have taken place.
    No types or tasks have been defined in this namespace yet

This appears to be an antlib declaration. 
Action: Check that the implementing library exists in one of:
    -/<path-to-my-ANT_HOME>/lib
    -/home/myUser/.ant/lib
    -a directory added on the command line with the -lib argument 
```

当我转到 ${ANT_HOME}/lib 时，我看不到任何标有“antlib*.jar”的 JAR。

所以我*猜*我下载了一个不包含 Antlib 的 Ant 版本，而现在我使用的是 Ivy（它使用 Antlib），构建过程是否令人窒息？

如果这是一个 Antlib 问题，那么我相信我想要一个可用的发行版[here](http://ant.apache.org/antlibs/bindownload.cgi)。如果是这样，有人可以确认我应该使用哪一个（仅包含 Antlib 而没有其他任何内容），并确认安装它的过程；即，是否就像将正确的 JAR 放入 ${ANT_HOME}/lib 一样简单？等等。

如果这是常春藤问题，那么有人可以为我指出正确的方向吗？

如果这既不是 Antlib 也不是 Ivy，同上上面的问题。提前致谢！

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-10-01T17:14:31.627

我认为您可能缺少 Apache IVY 库。从这里下载 - [apache ivy](http://ant.apache.org/ivy/download.cgi)将 jar 复制到你的 ant lib 目录中。

例如（根据需要更改版本号）：

1.  下载并安装 Ant（例如`C:\Apps\Tools\apache-ant-1.9.7`）。
2.  下载并解压 Ivy（例如，`C:\Users\UserName\Downloads\apache-ivy-2.4.0`）
3.  复制`C:\Users\UserName\Downloads\apache-ivy-2.4.0\ivy-2.4.0.jar`到`C:\Apps\Tools\apache-ant-1.9.7\lib`.

Ant 配置为使用 Ivy。

# c# - 在 C# 中反序列化 JSON

> ID：12677817
> 
> 赞同：-1
> 
> 时间：2012-10-01T17:08:34.570
> 
> 标签：c#, javascript, .net, json

我知道这个问题被问得令人作呕，但现有的答案对我来说并不是特别有帮助。最好的是将[JSON 反序列化为 C# 动态对象？](https://stackoverflow.com/questions/3142495/)，但我不想创建一个对象，我想创建一个字典。

我像这样序列化我的数据，并且我想反序列化为完全相同的数据结构：

```
 public static string AugDictToJSON(Dictionary<string, List<Dictionary<string, object>>> dict)
    {
        return string.Join(",", dict.Select(
            d => string.Format("{{ \"{0}\" : [ {1} ] }}", d.Key,
                string.Join(",", d.Value.Select(i => SubAugDictToJSON(i)).ToArray())
            )).ToArray());
    }

    public static string SubAugDictToJSON(Dictionary<string, object> dict)
    {
        return string.Join(",", dict.Select(
                d => string.Format("{{ \"{0}\" : \"{1}\" }}", d.Key, d.Value.ToString())
            ).ToArray());
    } 
```

* * *

编辑：解决方案如下（来自接受的答案）：

```
public static Dictionary<string, List<Dictionary<string, object>>> JSONToAugDict(string json)
{
    return JsonConvert.DeserializeObject<Dictionary<string, List<Dictionary<string, object>>>>(json);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T17:15:13.787

我建议使用 NuGet 包“ [Newtonsoft.Json](http://nuget.org/packages/Newtonsoft.Json) ”。

WebAPI 使用此包进行序列化/反序列化，速度非常快。更多信息可以在这里找到：http: [//james.newtonking.com/pages/json-net.aspx](http://james.newtonking.com/pages/json-net.aspx)

```
var results = JsonConvert.DeserializeObject<dynamic>(json); 
```

或者，作为一个字典：

```
var result = JsonConvert.DeserializeObject<IDictionary<string, object>>(json); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T17:44:49.513

我尝试使用 Json.NET 为我正在开发的应用程序进行类似的操作（取自我自己的问题：[将 json 字符串反序列化为对象 - Silverlight](https://stackoverflow.com/q/10115151/218159)）

**JSON**：

```
{
    "disclaimer": "This data is collected from various providers and provided free of charge for informational purposes only, with no guarantee whatsoever of accuracy, validity, availability or fitness for any purpose; use at your own risk. Other than that - have fun, and please share/watch/fork if you think data like this should be free!",
    "license": "Data collected from various providers with public-facing APIs; copyright may apply; not for resale; no warranties given.",
    "timestamp": 1334183999,
    "base": "USD",
    "rates": {
                "AED": 3.6732,
                "AFN": 48.400002,
                "ALL": 106.669998,
             }
} 
```

**将保存数据的对象：**

```
public class ExchangeData
{
    public string disclaimer { get; set; }
    public string license { get; set; }
    public string timestamp { get; set; }
    public string @base { get; set; }
    public Dictionary<string, double> rates { get; set; }
} 
```

**创建数据结构：**

```
StreamReader reader = new StreamReader(args.Result);
ExchangeData data = JsonConvert.DeserializeObject<ExchangeData>(reader.ReadToEnd()); 
```

希望能帮助到你！

# c# - 如何以编程方式监视已打开的串行端口上的活动？

> ID：12677818
> 
> 赞同：0
> 
> 时间：2012-10-01T17:08:48.700
> 
> 标签：c#, java

是否有允许“嗅探”另一个应用程序正在使用的串行端口上发生的事情的库或代码示例（最好是 C# 或 Java，但不是必需的）？就像这个软件一样：

[http://www.eltima.com/products/serial-port-monitor/](http://www.eltima.com/products/serial-port-monitor/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:57:39.403

这是不可能的。您需要更改驱动程序或编写端口仿真器才能执行此操作。

# objective-c - 处理时间线上的空白

> ID：12677829
> 
> 赞同：4
> 
> 时间：2012-10-01T17:09:20.060
> 
> 标签：objective-c, ios, core-data

我正在寻求一些帮助，以理清我将如何处理提要时间线中的空白的逻辑，就像您在各种 Twitter 客户端中看到的一样。但是，我没有创建 Twitter 客户端，因此它不会特定于该 API。我正在使用我们自己的 API，因此我也可以对 API 进行一些更改以适应这一点。

我将每个提要项保存在 Core Data 中。为了持久性，我想保留提要项目。假设我从我的服务器获取 50 个提要项目。下次用户启动应用程序时，我会请求最新的提要项目，我会返回 50 个提要项目，并执行获取以在表格视图中显示提要项目。

两个服务器请求之间可能已经经过了足够长的时间，以至于两组提要项之间存在时间间隔。

```
50 new feed items (request 2)
----- gap ------
50 older feed items (request 1)
* end of items in core data - just load more * 
```

我通过比较提要项的最旧时间戳`request 2`与来自`request 1`. 如果最旧的时间戳`request 2`大于来自的最新时间戳，`request 1`我可以假设存在间隙，我应该显示一个带有按钮的单元格以加载 50 个以上。如果最旧的时间戳`request 2`小于或等于`request 1`间隙中的最新时间戳已被填充，则无需显示加载器。

我的第一个问题是围绕跟踪是否显示“加载更多”单元格的整个逻辑。我怎么知道在哪里显示这个差距？我是否将其存储为与`NSManagedObject entity`我的提要项目相同的额外布尔值+位于上述两者之间的时间戳，然后相应地更改 UI？这里会有另一个更好的解决方案吗？

我的第二个问题与多个差距有关：

```
50 new feed items 
----- gap ------
174 older feed items
----- gap ------
53 older feed items
* end of items in core data - just load more * 
```

我想在这种情况下使用 an 会有所帮助，`NSManagedObject entity`这样我就可以在我的核心数据中进行定期提取，如果它们出现在对象中，然后将它们显示为加载单元格并相应地删除它们（如果任何之间不再存在间隙组间隙）。

我最终希望在经过一定时间后擦除这些对象，因为用户可能不会及时返回那么久，如果他们这样做了，如果需要，我总是可以从我的服务器中获取它们。

非常感谢任何人对此主题的任何经验和建议！

# c++ - C++ char* 比较如何工作？

> ID：12677837
> 
> 赞同：3
> 
> 时间：2012-10-01T17:09:46.943
> 
> 标签：c++

```
#include <iostream>

int main() {
    if ("zabc" < "def") {
        std::cout << "Less.\n";
    }
} 
```

上面的代码打印`Less.`. 我知道这不是`char*`在 C++ 中比较 s 的正确方法，但是上面的代码如何打印`Less.`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T17:12:46.680

该代码比较两个字符串的地址。形式上，这是未指定的行为，因为它们不是同一数组的元素，但在这种情况下，它可能说的是实话：第一个字符串的地址低于第二个字符串。但是你不能指望那个...

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-01T17:13:29.100

您只是在比较地址。您需要使用[strcmp](http://www.cplusplus.com/reference/clibrary/cstring/strcmp/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T17:11:45.337

它正在比较地址。对于某些特定编译器编译的此代码的某些特定调用，“zabc”恰好位于比“def”低的地址。（它也可能位于更高的地址，具体取决于编译器，甚至可能针对同一可执行文件的不同调用。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-01T17:15:30.080

当你这样做时，编译器会分配两个 char 数组，一个用于“def”，一个用于“zabc”。这是在编译时完成的。

由于“zabc”是在“def”之前定义的，你的编译器可能会给第一个更小的地址，尽管这是一个未定义的行为。稍后比较地址时，“zabc”“更小”。您应该看到，如果您执行下一个操作，您仍然会打印“Less”。

```
 if ("def" < "zabc") {
    std::cout << "Less.\n";
} 
```

# ffmpeg - FFmpeg 流转码

> ID：12677839
> 
> 赞同：0
> 
> 时间：2012-10-01T17:10:02.413
> 
> 标签：ffmpeg, flash-media-server

我有一个流应用程序，它显示从 Flash 媒体服务器发送的流。我想获取该流并使用 ffmpeg 将其转码为具有不同比特率的输出流。

使用ffmpeg可以完成这种事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:57:10.413

这将从提要中获取输入，并将其转码为具有默认音频和视频编解码器的 MKV 文件，以及 1024k 比特率的视频流（音频比特率使用“-ab”指定）：

```
ffmpeg -i "http://my_server/video_feed" -b 1024k output.mkv 
```

对于实时提要，试试这个（不确定它是否有效，我现在没有 ffmpeg 来测试它）：

```
ffmpeg -i "http://my_server/input_video_feed" -b 1024 -f flv "http://my_server/output_video_feed" 
```

这应该会创建一个 FLV 提要。

# mysql - 加入 3 个 mySQL 表的最佳方法

> ID：12677840
> 
> 赞同：2
> 
> 时间：2012-10-01T17:10:08.870
> 
> 标签：mysql, database, join, subquery

我有一个标签名称，我需要从标签表中获取标签 id，然后在分类表中查找与标签 id 匹配的所有 id，然后获取与分类表中的 id 匹配的所有项目。我可以在 1 个查询中完成所有操作，还是需要一个子查询？这是一个数据库结构的例子

```
tags database
tid, tag

tags taxonomy database
id, wid, tid

items databse
wid, * 
```

我有来自标签数据库的标签，我需要从标签数据库中获取 tid，然后从分类数据库中返回所有 wid，其中 tid 等于我们刚刚获取的值，然后从项目数据库中返回 *。我可以通过运行 2 个单独的查询来完成这项工作，但我希望只用 1 个来完成。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T17:12:48.617

您可以只`JOIN`使用表格：

```
select *
from tags tg
left join taxonomy tx
    on tg.tid = tx.tid
left join items i
    on tx.wid = i.wid 
```

如果您不熟悉`JOIN`语法，这里有一篇好文章：

[JOIN 的可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:14:14.560

试试这个：

```
SELECT *
FROM tags t
INNER JOIN taxonomy t2 ON t2.tid = t.tid
INNER JOIN items i ON i.wid = t2.wid 
```

Note that this will return data only for rows that match in all 3 tables.

# c# - 枚举 IQueryable 时中断循环

> ID：12677841
> 
> 赞同：0
> 
> 时间：2012-10-01T17:10:13.707
> 
> 标签：c#, sql-server-2008, entity-framework-4, foreach, iqueryable

我有以下代码：

```
var docs = ctx.Documents.Select(a => 
    new { a.ID, Content = a.Document, a.LastModified, CreatedDate = a.Created });

foreach (var doc in docs)
{
    if (Utility.ContinueDocumentPreview)
    {
        _createFile(doc.ID, doc.Content, doc.CreatedDate, doc.LastModified);
        _fireProgress(++counter, count);
    }
    else
    {
        break;
    }
} 
```

Utility.ContinueDocumentPreview 标志设置为假，当用户在此进程运行时点击取消按钮。问题是当标志为假并且代码应该跳出循环时，我得到一个 SQL 超时异常。

我做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T17:13:51.660

您*可以*在循环*之前*`.ToList`执行 SQL ，但这取决于您从数据库中获取的数据量。它可能会同时产生一个大的 SQL 查询，因此请对其进行大量测试，以确保获得您喜欢的性能。

 *```
// You can add .ToList() here:
var docs = ctx.Documents.Select(a => new { a.ID, Content = a.Document, a.LastModified, CreatedDate = a.Created }).ToList();

// Or, you can add .ToList() here:
foreach (var doc in docs.ToList())
{
    if (Utility.ContinueDocumentPreview)
    {
        _createFile(doc.ID, doc.Content, doc.CreatedDate, doc.LastModified);
        _fireProgress(++counter, count);
    }
    else
    {
        break;
    }
} 
```*

# regex - 我可以安全地使用哪些字符在正则表达式中表达自定义含义

> ID：12677848
> 
> 赞同：1
> 
> 时间：2012-10-01T17:10:58.503
> 
> 标签：regex, windows, language-agnostic, filesystems

我的应用程序中的用户将使用正则表达式来指定应用程序应采用哪些文件以及应排除哪些文件，例如包含匹配的文件`foo.*\.txt`

然而，有时过滤器需要使用只有应用程序在运行时才能知道的值。例如，如果过滤器是`foo[SPECIALVALUEHERE].*\.txt`并且特殊值恰好是 bar，则实际过滤器将是`foobar.*\.txt`

哪些字符可用于指定 [SPECIALVALUEHERE]？我想为了避免歧义，它不能是正则表达式中的特殊/保留字符，也不能是文件中出现的字符。客户的另一个要求是它必须是一个（或最多两个或三个）字符，所以像 %SPECIALVALUE% 这样的东西是不可能的。

我可以为此目的使用哪个字符或字符组合的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:16:42.527

在正则表达式（字符类之外）中只有 12 个具有特殊含义的符号，应该转义：

*   单字符：`.`
*   字符串开始/结束锚点：`^ $`
*   量词：`+ * ?`
*   捕获组分隔符：`( )`
*   量词开始分隔符：`{`
*   字符类开头分隔符：`[`
*   交替符号：`|`
*   最后一个转义符号本身：`\`

要转义它们（=特殊含义的条带），只需在它们前面加上`\`符号。要分隔正则表达式的特殊部分，您可以使用任何非特殊和非字母数字符号：`#`并`~`立即想到。)

作为旁注，在 Perl 中，您可以使用`\Q...\E`运算符自动引用正则表达式的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T17:41:26.747

例如，在 Windows 上，您可以使用`=`它不是正则表达式中的特殊字符，但不允许在文件名中使用（[这里是一个不能在 Windows 文件名中使用的字符表](http://www.mtu.edu/umc/services/web/resources/cms/characters-to-avoid.html)）。然后，您可以将 = 替换为您需要的内容。

否则在 unix 系统上会很混乱，因为任何字节序列都可以不受限制地成为文件名的一部分，[这里有一个关于 serverfault 的参考问题](https://serverfault.com/questions/150740/linux-windows-unix-file-names-which-characters-are-allowed-which-are-unesc)，因此，即使语言不可知，您至少应该决定要使用哪些系统正则表达式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T17:58:54.710

我用双花括号来处理这类事情。我使用的任何正则表达式方言都不能识别花括号内的任何内容，因此它不是正则表达式中的有效字符串。 `foo{{SPECIALVALUEHERE}}\.txt`

# javascript - 表格行之间的轻松比较

> ID：12677857
> 
> 赞同：2
> 
> 时间：2012-10-01T17:11:31.280
> 
> 标签：javascript, jquery, datatable

我正在使用 DataTables JQuery 插件，我想问以下两个问题。

*   是否可以在每列的末尾（动态）计算 MIN 或 MAX 或 AVG 值？

    例如：

    > A/AABC
    > 
    > L1 2 3 4
    > 
    > L2 3 4 5

    如果我想打印第 3 行，每个列的最小值应该是：

    > L3 2 3 4

*   是否可以创建另一列 D 来包含每一行的公式结果？例如`Di = Ai + Bi`？

    根据上面的示例，结果表应如下所示：

    > L1 2 3 4 5
    > 
    > L2 3 4 5 7

我可以通过 DataTables 以某种方式执行这些操作，还是必须在将数据传递给 DataTables 之前准备好数据？

谢谢。

PS：

我想我需要类似于这个[trirand.net/examples/grid/functionality/footer/default.aspx](http://trirand.net/examples/grid/functionality/footer/default.aspx)的东西，但是对于 DataTables 插件。除此之外，我还需要一些行公式。– 意大利腊肠刚刚编辑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T18:28:53.957

最后一列使用 mRender ( [http://datatables.net/ref#mRender](http://datatables.net/ref#mRender) )。mRender，当用作函数时，可以访问行的数据源对象（第三个参数），因此您可以轻松地进行快速求和，然后返回计算值:-)。

# string - 选择在命令行中给出的 XSLT 参数的字符串

> ID：12677861
> 
> 赞同：0
> 
> 时间：2012-10-01T17:11:57.837
> 
> 标签：string, xslt, xpath, parameters, xalan

我正在使用 XSLT 参数在运行时使用 Xalan-C 在属性中设置绝对路径。基本上，我的输入 XML 是这样的：-

```
<root xmlns="initial">
  <!-- document goes here -->
</root> 
```

我的样式表是：-

```
<xsl:stylesheet version="1.0" xmlns:s="initial" xmlns="final" />

  <xsl:param name="default_data_location">/path/to/some/location</xsl:param>

  <xsl:template match="//s:*">
    <xsl:element name="{local-name()}" namespace="final">
      <xsl:attribute name="dataLocation">
        <xsl:value-of select="concat($default_data_location, '/datafile')"/>
      </xsl:attribute>
    </xsl:element>
  </xsl:template>

  <!-- rest of the stylesheet -->

</xsl:stylesheet> 
```

因此，当我运行它时，我想要的输出 XML 为：-

```
Xalan foo.xml foo.xsl 
```

应该是（这是有效的部分）：-

```
<root xmlns="final" dataLocation="/path/to/some/location/datafile">
  <!-- document goes here -->
</root> 
```

当我运行它时： -

```
Xalan -p default_data_location /some/other/path foo.xml foo.xsl 
```

它应该是（这是不起作用的部分）：-

```
<root xmlns="final" dataLocation="/some/other/path/datafile">
  <!-- document goes here -->
</root> 
```

但是，如果我尝试在命令行中设置此参数，它会给我以下 XML：-

```
<root xmlns="final" dataLocation="/datafile">
  <!-- document goes here -->
</root> 
```

我应该做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:50:04.623

参数值似乎是一个 XPath 表达式，因此您需要确保传入一个 XPath 字符串，并且您可能需要双引号以确保命令行 shell 不会进入您的方式，因此这样做`Xalan -p default_data_location "'/some/other/path'" foo.xml foo.xsl`应该可以工作。至少这是我在[http://xml.apache.org/xalan-c/commandline.html](http://xml.apache.org/xalan-c/commandline.html)上阅读的文档，我没有要测试的 Xalan-C。

# c - C中的多个管道，程序等待输入

> ID：12677865
> 
> 赞同：0
> 
> 时间：2012-10-01T17:12:21.227
> 
> 标签：c, pipe, piping

我尝试编辑我的帖子，因为它存在一些问题。

我仍然迷路，试图多管我的程序。当我运行该程序时，它会进入一个只需要一些输入的状态 - 就像，也许是因为我没有在我的管道过程中获得第二个程序的输入。

我试图遵循这篇文章中的代码：[C 中的这个多管道代码有意义吗？](https://stackoverflow.com/questions/948221/does-this-multiple-pipes-code-in-c-makes-sense)

我的代码如下所示：

```
int status;
int newpipe[2];
int oldpipe[2];

pid_t pid;
int countcmds = 0;
while (firstCmd != NULL) {
    printf("En iteration \n");
    if (firstCmd -> next != NULL) {
        pipe(newpipe);
    }
    pid = fork();

    if(pid == 0){
        if (firstCmd -> prev != NULL) {
            dup2(oldpipe[0],0);
            close(oldpipe[0]);
            close(oldpipe[1]);
        }
        if (firstCmd -> next != NULL) {
            close(newpipe[0]);
            dup2(newpipe[1],1);
            close(newpipe[1]);
        }
        char** file = firstCmd -> cmd;
        char* specfile = *file;
        execvp(specfile, file);
    }
    else{
        waitpid(pid, &status, 0);
        if (firstCmd -> prev != NULL) {
            close(oldpipe[0]);
            close(oldpipe[1]);
        }
        if(firstCmd -> next != NULL){
            oldpipe[0] = newpipe[0];
            oldpipe[1] = newpipe[1];
        }
        countcmds++;
        firstCmd = firstCmd -> next;
    }
}
if(countcmds){
    close(oldpipe[0]);
    close(oldpipe[1]);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T18:38:28.640

你的`execvp(cmd,numberFile);`论点很遥远，原型是：

```
int execvp(const char *file, char *const argv[]); 
```

不知道你的`cmd`样子，但你正在`int`为第二个参数提供一个。

inside看起来也很可疑，因为您似乎正在为第一个参数提供完整的参数列表 `execvp`。`execute_piping()`

注意： `char *argv[]`表示这`argv`是一个指向的指针数组`char`。我在任何地方都看不到，但是您应该展示什么是结构`Cmd`和`ShellCmd`结构。

我从你的代码中得到了这些警告：

```
gash.c:33: warning: passing argument 1 of ‘execvp’ from incompatible pointer type
gash.c:33: warning: passing argument 2 of ‘execvp’ makes pointer from integer without a cast 
```

修复警告是个好主意，警告是你的朋友。

# c# - C# metro - 后台任务刷新不到 15 分钟

> ID：12677871
> 
> 赞同：2
> 
> 时间：2012-10-01T17:12:46.263
> 
> 标签：c#, background, microsoft-metro, task

我有一个`BackgroundTask`刷新动态磁贴。我使用`TimeTrigger`但我需要比 15 分钟更快的刷新。我读到这是不可能的，但官方应用社交使用它来显示用户朋友的个人资料图片，所以必须存在某种方式。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T19:50:14.290

也许您应该使用**磁贴通知队列**，它可以帮助您显示多达 5 个通知，就像应用程序 Social 一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T18:46:33.310

此示例向您展示了如何执行此操作：

[http://code.msdn.microsoft.com/windowsapps/Tile-Update-every-minute-68dbbbff](http://code.msdn.microsoft.com/windowsapps/Tile-Update-every-minute-68dbbbff)

它基本上在接下来的几个小时内每分钟创建 ScheduledTileNotifications。当该时间结束时，BackgroundTask 会再次创建 ScheduledTileNotifications。

# java - Java 中的 XML 请求/响应

> ID：12677875
> 
> 赞同：1
> 
> 时间：2012-10-01T17:12:57.810
> 
> 标签：java, xml, api

我有一个我想用来获取数据的 API。为了获取数据，我必须以 XML 格式发送请求，并且响应将以 XML 格式发送。有没有人有任何示例如何使用 Java 发送请求以及如何在 Java 中解码响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T17:28:35.333

好吧，我有你想要的......但我会要求你使用以下 API......

*   `JAXP`和`JAXB`
*   `Castor`

**-**下面的代码片段方法接受`url`网络服务器和`xmlQuery`

**-**我已使用`NameValuePair`发送 XML 请求

**-**请用客户端**替换**，我已经使用它需要自定义证书才能访问此站点。``MySSLSocketFactory.getNewHttpClient();``Http`

**这是我的项目中的代码，它发送一个 XML req 并返回一个 XML resp：**

```
public String postData(String url, String xmlQuery) {

        final String urlStr = url;
        final String xmlStr = xmlQuery;
        final StringBuilder sb = new StringBuilder();

        Thread t1 = new Thread(new Runnable() {

            public void run() {

                HttpClient httpclient = MySSLSocketFactory.getNewHttpClient();

                HttpPost httppost = new HttpPost(urlStr);

                try {

                    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(
                            1);
                    nameValuePairs.add(new BasicNameValuePair("xml", xmlStr));

                    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                    HttpResponse response = httpclient.execute(httppost);

                    Log.d("Vivek", response.toString());

                    HttpEntity entity = response.getEntity();
                    InputStream i = entity.getContent();

                    Log.d("Vivek", i.toString());
                    InputStreamReader isr = new InputStreamReader(i);

                    BufferedReader br = new BufferedReader(isr);

                    String s = null;

                    while ((s = br.readLine()) != null) {

                        Log.d("YumZing", s);
                        sb.append(s);
                    }

                    Log.d("Check Now", sb + "");

                } catch (ClientProtocolException e) {

                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                } 
            }

        });

        t1.start();
        try {
            t1.join();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        System.out.println("Getting from Post Data Method " + sb.toString());

        return sb.toString();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:20:24.590

看看下面的讨论，[如何在 java 中发送 HTTP 请求？](https://stackoverflow.com/questions/1359689/how-to-send-http-request-in-java) 对于 xml 中的响应，请确保将 mime-type 设置为 application/xml。希望这能回答你的问题。

# grails - 无法将 GSP 参数绑定到控制器中的命令对象

> ID：12677876
> 
> 赞同：2
> 
> 时间：2012-10-01T17:13:01.190
> 
> 标签：grails, grails-2.0, grails-controller

我的控制器是这样的：

```
class UserController{
    def register= {UserCommand command ->
        println params
        println command.dump()
        // do something ..........

    }
}
class UserCommand {
    String username
    static constraints = {
        username nullable: false
    }

} 
```

我的 gsp 文件有一个名为：“command.username”的输入（文本）的表单，提交表单后，我可以看到参数打印出来，但我的命令对象是空的，我认为命令对象应该自动绑定当您将参数数据传递过来时，它会与参数数据一起使用，我错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T18:55:28.957

绑定到命令对象会将参数中的键与命令对象上的属性匹配，这与从参数绑定到域对象的工作方式相同。表单中的属性应该命名为`username`，而不是`command.username`。`command.username`会尝试绑定`username`到.`command``UserCommand`

# linux - Find & Xargs 通过 bash 脚本复制和重命名

> ID：12677877
> 
> 赞同：1
> 
> 时间：2012-10-01T17:13:01.617
> 
> 标签：linux, bash, command-line, find, xargs

我有一个包含图像的文件夹，我需要将它们复制到其他地方，删除正在进行的特殊字符。可以说我有这个

```
Folder1/ImageÑ%1.jpg
Folder1/ImageÑ%1-70x70.jpg
Folder1/ImageÑ%2.jpg
Folder1/ImageÑ%2-70x70.jpg
Folder1/ImageÑ%3.jpg
Folder1/ImageÑ%3-100x100.jpg
Folder1/ImageÑ%4.jpg
Folder1/ImageÑ%4-100x100.jpg 
```

而且我只想将名称中没有“-70x70”或“-100x100”的文件复制到Folder2，并像这样（没有任何特殊字符）：

```
Folder2/Image1.jpg
Folder2/Image2.jpg
Folder2/Image3.jpg
Folder2/Image4.jpg 
```

我设法复制了文件，但我不知道如何在同一步骤中重命名文件（并删除特殊字符）。我认为它正在使用 SED，但我不知道如何。

```
find Folder1 -type f -regextype posix-extended \( ! -regex '.+\-[0-9]{2,4}x[0-9]{2,4}\.jpg' \) -print0 |  xargs -0 cp -p --target-directory=Folder2 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T17:17:14.997

要去除奇怪的字符，我建议你[排毒](http://detox.sourceforge.net/)

然后 ：

```
find Folder1 \( ! -name 'Image*-70x70*' -a ! -name 'Image*-100x100*' \) |
    xargs -i% cp -p % Folder2 
```

**编辑**

找到解释：

*   这个`!`字符是一个*否定*
*   `-a`选项是一个`AND`条件
*   括号是用来包围条件的

**编辑2**

按照您的要求即时执行（用于替换奇怪的字符）：

```
find Folder1 \( ! -name 'Image*-70x70*' -a ! -name 'Image*-100x100*' \) \
    -exec bash -c '
        file=$(echo "$1" | perl -pe "s/\303\221%/_weird_/g")
        cp -p "$1" "Folder2/$file"
    ' -- {} \; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T18:10:42.710

这可能对你有用：

```
#!/bin/bash
DIR=/your/Folder1
DEST=/your/Folder2

for f in `ls -1 $DIR | grep .jpg | egrep -v ".+\-[0-9]{2,4}x[0-9]{2,4}\.jpg"`
do
        f=$(basename $f)
        F=$(echo "$f" | sed "s/[^A-Z|a-z|0-9|\.]//g;")
        cp -p "$DIR/$f" "$DEST/$F"
done 
```

如果需要，可以使用 MV 代替 CP。

**已编辑**

这将只获得您必须复制的文件：

```
ls -1 $DIR/*.jpg | egrep -v ".+\-[0-9]{2,4}x[0-9]{2,4}\.jpg 
```

**basename**命令仅获取文件名以替换奇怪的字符并准备移动 **sed**如果不是字母和数字（以及文件扩展名的点），它将替换所有字符

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T17:54:12.653

大概是这样的？

```
for file in Folder1/*.jpg; do
  case $file in
    *-70x70.jpg | *-100x100.jpg) ;;
    *) cp "$file" "Folder2/Image${file#Folder1/Image?}" ;;
  esac
done 
```

该构造从 的值的开头`${variable#pattern}`删除任何匹配项。该模式匹配文字文本（然后我们预先添加静态部分）和一个任意字符。`pattern``$variable``Folder1/Image?``Folder1/Image``Image`

如果违规字符不是单个字节，请尝试将问号加倍作为开始；这将匹配两个任意字符（或字节，如果您的语言环境等是这样配置的）。但是，如果您有一个组合的 Unicode 序列，则需要的远不止这些——用于表示文件名的实际字节的十六进制转储将有助于诊断这一点。无论如何，您可以简单地从另一端修剪，尽管这会涉及更多；

```
 *) base=${file#Folder1/}
     prefix=${base%%[0-9]*}
     cp "$file" "Folder2/Image${base#$prefix}" ;; 
```

变体`${variable%pattern}`从结尾而不是开头修剪，将`#`or加倍`%`会导致外壳修剪最长的匹配项而不是最短的匹配项。（我相信最长可能匹配是 Bash 扩展？）

# javascript - 将 SVG 文本更改为 css 自动换行

> ID：12677878
> 
> 赞同：12
> 
> 时间：2012-10-01T17:13:04.143
> 
> 标签：javascript, css, svg, d3.js, word-wrap

以下代码用于显示 javascript 树形图的文本标签。

```
nodeEnter.append("svg:text")
        .attr("x", function(d) { return d._children ? -8 : -48; }) /*the position of the text (left to right)*/
        .attr("y", 3) /*the position of the text (Up and Down)*/

        .text(function(d) { return d.name; }); 
```

这使用 svg，它没有自动换行能力。我如何改变这个做一个正常的段落

这样我就可以使用 css 来换行它。如何制作此常规文本而不是 svg 文本？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-08-11T22:15:39.123

这是使用 D3 自动换行文本的示例代码：

```
var nodes = [
    {title: "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut"}
]

var w = 960, h = 800;

var svg = d3.select("body").append("svg")
    .attr("width", w)
    .attr("height", h);

var vSeparation = 13, textX=200, textY=100, maxLength=20

var textHolder = svg.selectAll("text")
    .data(nodes)
    .enter().append("text")
    .attr("x",textX)
    .attr("y",textY)
    .attr("text-anchor", "middle")
    .each(function (d) {
        var lines = wordwrap(d.title, maxLength)

        for (var i = 0; i < lines.length; i++) {
            d3.select(this).append("tspan").attr("dy",vSeparation).attr("x",textX).text(lines[i])
        }
    });

function wordwrap(text, max) {
    var regex = new RegExp(".{0,"+max+"}(?:\\s|$)","g");
    var lines = []

    var line
    while ((line = regex.exec(text))!="") {
        lines.push(line);
    } 

    return lines
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-01T19:14:57.653

你可能想要使用 SVG foreignObject 标签，所以你会有这样的东西：

```
nodeEnter.append("foreignObject")
    .attr("x", function(d) { return d._children ? -8 : -48; }) /*the position of the text (left to right)*/
    .attr("y", 3) /*the position of the text (Up and Down)*/
    .attr("width", your_text_width_variable)
    .attr("height", your_text_height_variable)
    .append("xhtml:body")
    .append("p")
    .text(function(d) { return d.name; }); 
```

这是 Mike Bostock 的一个要点，它帮助了我：[https ://gist.github.com/1424037](https://gist.github.com/1424037)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-04T16:15:53.787

`foreignObject`IE 不支持，Chrome 也不支持过渡。如果这些限制没问题，那么我建议使用`foreignObject`，因为您可以获得 HTML+CSS 的所有格式。

如果您需要支持 IE 或转换，那么我建议使用 D3 插件，例如[D3plus](https://github.com/alexandersimoes/d3plus)。它使文本换行变得非常容易。

```
d3plus.textwrap()
  .container('selector')
  .draw(); 
```

查看[文档](https://github.com/alexandersimoes/d3plus/wiki/Text%20Wrapping)以了解其所有功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-07T11:14:35.480

您可以使用 D3.js 使用此通用函数将 svg:text 元素中的文本包装成多个 svg:tspan 子元素（每行一个 tspan）：

```
 function wrapText(text, width) {
        text.each(function () {
            var textEl = d3.select(this),
                words = textEl.text().split(/\s+/).reverse(),
                word,
                line = [],
                linenumber = 0,
                lineHeight = 1.1, // ems
                y = textEl.attr('y'),
                dx = parseFloat(textEl.attr('dx') || 0), 
                dy = parseFloat(textEl.attr('dy') || 0),
                tspan = textEl.text(null).append('tspan').attr('x', 0).attr('y', y).attr('dy', dy + 'em');

            while (word = words.pop()) {
                line.push(word);
                tspan.text(line.join(' '));
                if (tspan.node().getComputedTextLength() > width) {
                    line.pop();
                    tspan.text(line.join(' '));
                    line = [word];
                    tspan = textEl.append('tspan').attr('x', 0).attr('y', y).attr('dx', dx).attr('dy', ++linenumber * lineHeight + dy + 'em').text(word);
                }
            }
        });
    } 
```

你可以像这样使用它：

```
svg.selectAll('text').call(wrapText, 100); 
```

# svd - SVD优化公式

> ID：12677879
> 
> 赞同：1
> 
> 时间：2012-10-01T17:13:13.907
> 
> 标签：svd

有谁知道什么凸优化公式（目标函数）导致矩阵X（n乘p）的奇异值分解或主成分分析？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:51:44.013

对于范数一的 u 和 v，最大奇异值可以计算为 u^TX v 的最大值。

考虑到奇异值是矩阵 X^T X 的特征值的平方根，可以从瑞利商导出另一个公式。在这种情况下，最大奇异值可以看作 ||Xv 的最大值|| 对于 v 单位范数。其余的奇异值可以从[min-max 原理推导出来](http://en.wikipedia.org/wiki/Min-max_theorem#Min-max_principle_for_singular_values)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T11:19:00.010

特征值（奇异值）最大化瑞利商——这就是前几个奇异值的迭代方法的工作原理。此外，对于 rank-r 近似，维基百科[SVD](http://en.wikipedia.org/wiki/Singular_value_decomposition)引用了 Eckart-Young 定理：
SVD 最小化 |M - Mr| 在 Frobenius 范数中（相当非凸的）秩-r 矩阵集合中的 Mr。
另请参阅[pca-lda-cca-and-pls](https://stats.stackexchange.com/questions/23353/pca-lda-cca-and-pls)下的表格。

# symfony - 尝试创建 Admin Bundle 类的 Symfony 错误

> ID：12677881
> 
> 赞同：0
> 
> 时间：2012-10-01T17:13:22.133
> 
> 标签：symfony, sonata-admin

我正在尝试使用 SonataAdminBundle 来启动和运行一些后端管理功能，但我的第一个配置类遇到了障碍。

我已将以下内容添加到 app/config/config.yml

```
services:
    sonata.admin.sport:
        class: Clarity\CoachTimeBundle\Admin\SportAdmin
        tags:
            - { name: sonata.admin, manager_type: orm, group: General, label: Sports}
        arguments: [null, Clarity\CoachTimeBundle\Entity\Sport, null] 
```

并在路径 src/Clarity/CoachTimeBundle/Admin/SportAdmin.php 中定义了以下类

```
<?
namespace Clarity\CoachTimeBundle\Admin;

use Sonata\AdminBundle\Admin\Admin;
use Sonata\AdminBundle\Datagrid\ListMapper;
use Sonata\AdminBundle\Datagrid\DatagridMapper;
use Sonata\AdminBundle\Validator\ErrorElement;
use Sonata\AdminBundle\Form\FormMapper;

class SportAdmin extends Admin
{
    protected function configureFormFields(FormMapper $formMapper)
    {
        $formMapper
            ->add('name');
    }

    protected function configureDatagridFilters(DatagridMapper $datagridMapper)
    {
        $datagridMapper
            ->add('name');
    }

    protected function configureListFields(ListMapper $listMapper)
    {
        $listMapper
            ->addIdentifier('name');
    }

    public function validate(ErrorElement $errorElement, $object)
    {
        $errorElement
            ->with('name')
                ->assertMaxLength(array('limit' => 255))
            ->end();
    }
} 
```

当我尝试清除缓存并运行应用程序时，出现以下错误：自动加载器预期类“Clarity\CoachTimeBundle\Admin\SportAdmin”将在文件“src//Clarity/CoachTimeBundle/Admin/SportAdmin.php”中定义。找到文件但类不在其中，类名或命名空间可能有错字。

谢谢，安德鲁

# php - 评论中的@params 是什么？以及如何在 IDE 7.0 for PHP 中启用下拉菜单

> ID：12677883
> 
> 赞同：1
> 
> 时间：2012-10-01T17:13:25.683
> 
> 标签：php, netbeans, ide, comments

我发现，通过使用@desc、@params 等描述函数来进行评论是一种很好的做法，但是这个过程被称为什么以及如何在 IDE 7.0 中启用此功能的下拉菜单，我在编写 @ 并点击 control+ 时空间，它说没有建议，有什么想法吗？如何启用它？我在一个视频中看到有人使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T17:46:45.623

我猜你是用 /* 而不是 /** 开始评论部分。如果你只做一个 * 出于某种原因自动完成不会出现。至少 7.2 是这样，我没有安装 7.0。

# android - 奇怪的 R.java 问题导致可绘制资源未正确加载

> ID：12677889
> 
> 赞同：5
> 
> 时间：2012-10-01T17:14:10.207
> 
> 标签：android, drawable

我有一些自定义可绘制对象，但不幸的是，当我尝试在设备上运行该应用程序时，未加载可绘制对象。

*   我试图清理工作区......同样的问题。
*   我试图删除并重新导入清理 .metadata 文件夹的项目......同样的问题。
*   我试图删除 autogen 文件 R.java... 什么都没有。
*   我试图改变使用的图像......什么都没有。
*   我已经更改了名称...操作，这次有问题的可绘制开始工作，但同样的问题发生在另一个图像上。

通过各种测试，我注意到未加载的图像始终是第一个

```
public static final class drawable {...} 
```

在自动生成的文件中`R.java`

详细来说，地址为0x7f020000的资源图片：

```
public static final int bt_a_1=0x7f020000; 
```

这些地址是按字母顺序分配的 **，所以我已经解决了简单地添加另一个`a1.png`在项目中未使用的名为的图像。**

使用这种解决方法一切正常，但我不知道这个荒谬问题的原因是什么。

**编辑**

这是自 HoneyComb 版本更改 Ia971bb242ceac5e8f9346094009a10f356399ab9 以来已修复的 Android 问题

该问题是由于低级资源缓存冲突错误而发生的。

更多信息： [https ://android-review.googlesource.com/#/c/15815/](https://android-review.googlesource.com/#/c/15815/)

此问题可能发生在所有操作系统早于 HoneyComb 的设备中......为了避免这些设备中的错误，请使用我描述的相同策略。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T17:23:02.880

这是一个已知问题，我想它已在 Honeycomb 中解决。

[http://code.google.com/p/android/issues/detail?id=20283](http://code.google.com/p/android/issues/detail?id=20283)

# ios - UIImagePickerController: [PLImageScrollView release]: 消息发送到释放的实例

> ID：12677893
> 
> 赞同：0
> 
> 时间：2012-10-01T17:14:33.187
> 
> 标签：ios, cocos2d-iphone, automatic-ref-counting, uiimagepickercontroller, ios6

我正在编写一个使用 Cocos2D 并打开 ARC 的 iOS6 应用程序（Cocos 作为静态库链接，而不是在 ARC 下）。我可以使用以下代码展示相机：

```
cameraController = [[UIImagePickerController alloc] init];
// set other properties of camera
cameraController.delegate = psImageLayer;
psImageLayer.imagePicker = cameraController;
[[CCDirector sharedDirector] presentViewController:cameraController animated:YES completion:nil]; 
```

`psImageLayer`我用这段代码关闭了相机：

```
- (void) imagePickerController: (UIImagePickerController *) picker
didFinishPickingMediaWithInfo: (NSDictionary *) info {
    // do something with image
    [[CCDirector sharedDirector] dismissViewControllerAnimated:YES completion:nil];
} 
```

当我关闭相机时，应用程序崩溃并出现以下错误：`*** -[PLImageScrollView release]: message sent to deallocated instance 0x2494f4f0`我很确定这`PLImageScrollView`是一个 iOS 类，因为我没有编写它。

我的问题似乎与[此处](http://www.cocoabuilder.com/archive/cocoa/312282-release-sent-to-deallocated-instance-under-arc-how.html)发布的问题非常相似，但他的解决方案涉及修改拥有委托的类。在这种情况下， UIImagePickerController 是类，不能修改。

PhotoShareImageLayer 头文件的相关部分贴在下面：

```
// PhotoShareImageLayer.h (this is what psImageLayer is)
@interface PhotoShareImageLayer : CCLayer <UIImagePickerControllerDelegate, UINavigationControllerDelegate>

@property(nonatomic, retain) UIImagePickerController *imagePicker;
@property(nonatomic, retain) UIImage *currentImage;

@end 
```

关于如何阻止此错误发生的任何想法？谢谢。

编辑：我已经尝试过的事情清单。

*   子类化 UIImagePickerController 并添加`- (void)viewWillDisappear:(BOOL)animated { [super viewWillDisappear:animated]; [self setDelegate:nil]; }`

编辑 2：崩溃不会发生在`imagePickerController:didCancel`. 仅在拍照时，或在相机中按下“重拍”时。“Retake”没有 UIImagePickerDelegate 方法（只有“Cancel”和“Use”）。

编辑 3：在继续编写更多应用程序后，看来这个问题并不是相机独有的。关闭 Twitter、Facebook、联系人等的模式视图时会发生相同（或非常相似）的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-20T17:49:06.367

我相信这是苹果内部实现的问题`PLImageScrollView`。我正在调整 UIScrollView 的 setDelegate 方法，这会在使用 UIImagePicker 时导致崩溃（尽管它似乎只是在您选择照片时，而不是在您取消时）。我最终看到的问题是 scrollViewDidScroll: 方法被发送到真正的委托（通过我的拦截器），但它已经被释放了。

这向我表明 PLImageScrollView 的委托正在被解除分配而没有被取消。通过创建自己`strong`对真正代表的引用，我解决了一半的问题。这可能会导致其他实现中的内存泄漏，但这至少比崩溃要好。

# uiimage - 自动淡入 xcode 中的图像

> ID：12677895
> 
> 赞同：0
> 
> 时间：2012-10-01T17:14:41.057
> 
> 标签：uiimage, xcode4.3, nstimer

您好，我可以自动淡出图像。我将如何设法自动淡入图像。

这是我的代码。

。H

```
@property (assign) IBOutlet UIImageView *cbizFadeImage; 
```

.m

```
- (void)viewDidLoad {
//Fade Image Out
CGRect aboutNicheImageFrame = cbizFadeImage.frame;
aboutNicheImageFrame.origin.y = self.view.bounds.size.height;

// iOS4+
[UIView animateWithDuration:0.5
                      delay:2.0
                    options: UIViewAnimationCurveEaseOut
                 animations:^{
                     cbizFadeImage.alpha = 0;

                 }
                 completion:^(BOOL finished){
                     NSLog(@"Done!");
                 }];
} 
```

好的，我可以通过将 CurveEaseOut 更改为 CurveEaseIn 来淡入图像。但是现在我想淡出图像。所以图像会先缓入然后再缓出。我会使用 if 语句吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T18:30:05.267

我能够使用 UIViewAnimationCurveEaseInOut。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:26:00.270

而不是 UIViewAnimationCurveEaseInOut，将其用于选项：

```
options:UIViewAnimationOptionCurveEaseOut 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-24T16:32:51.903

我认为您真正要求的是 UIViewKeyframeAnimationOptionAutoreverse 像这样使用...

```
Image.alpha = 0;
[UIView animateKeyframesWithDuration:5.0 delay:0.0        options:UIViewKeyframeAnimationOptionAutoreverse |     UIViewKeyframeAnimationOptionRepeat animations:^{
[UIView addKeyframeWithRelativeStartTime:0.9 relativeDuration:0.0     animations:^{
Image.alpha = 1;
}];
[UIView addKeyframeWithRelativeStartTime:0.0 relativeDuration:0.0     animations:^{
Image.alpha = 0;
}];
} completion:nil]; 
```

# html - 我的 div 大于窗口的宽度

> ID：12677898
> 
> 赞同：9
> 
> 时间：2012-10-01T17:14:50.220
> 
> 标签：html, css

这是`css`我的`div`。我希望背景填满整个屏幕，但它比我的屏幕分辨率大，所以会出现一个底部滚动条

```
.hero-unit {
  padding:60px;
  margin-top: 60px;
  background: url("../img/bar2.jpg") no-repeat scroll 0;
  height:233px;
  width:100%;
  left:0px;
  background-size: cover;
  position:absolute;
  background-color:#eeeeee;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T17:39:10.113

您可以使用 box-sizing

```
-webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
-moz-box-sizing: border-box;    /* Firefox, other Gecko */
box-sizing: border-box; 
```

这使得当您添加填充、边距或边框时，它不会影响宽度。（这不适用于 IE7 及以下版本）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T17:16:28.913

您正在向已经 100% 的宽度添加填充。

您需要做的（如果您使用百分比）是将填充更改为百分比并使其加起来为 100%。

例如：

```
padding:5%;
width:90%; 
```

* * *

我还找到了使用溢出的替代方法：隐藏来删除滚动条。这不会解决您的问题，因为填充仍然会溢出窗口，只是不可见。

```
html, body
{
    width:100%;
}

body
{
    overflow:hidden;
} 
```

[请参阅此处](http://jsfiddle.net/YRDD5/1/)的 jsfiddle 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T17:15:43.047

`padding`如果有必要删除然后减少`width`。

尝试将它们保持在百分比中，例如

```
padding:5%; /*desired value*/
width:80%; /*desired value*/ 
```

当它们被添加时，它应该小于或等于 100%。如果你也`margin`考虑过。（假设`margin:5%;`）

例如：

```
<----------------100%---------------->
  margin | padding|   div   |padding | margin
|<--5%-->|<--5%-->|<--80%-->|<--5%-->|<--5%-->| 
```

这与水平（宽度）或垂直（高度）调整相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T17:17:08.053

这可能是由于主体的边距和填充。

将此块添加到您的身体，看看它是否有帮助：

```
body {
  margin: 0;
  padding: 0;
} 
```

此外，您正在为已经 100% 的元素定义填充，使其大于主体。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-22T07:33:26.307

由于不透明度为 0 的元素通常会发生水平溢出。您也看不到该元素，但它会导致水平溢出。将以下代码添加到 css.

```
body {
overflow-x: hidden;
}
.hidden-thing {
position: absolute;
left: 100%;
width: 50px;
height: 50px;
opacity: 0;
} 
```

# ios - 从 2 个 UIImage 和标签创建 UIImage

> ID：12677904
> 
> 赞同：4
> 
> 时间：2012-10-01T17:15:15.503
> 
> 标签：ios, uiimage, uilabel

我有一个大`UIImage`的。在这个`UIImage`我又得到了一个，女巫实际上是一个面具。还有一个 - 我克服`UILabel`了这个面具！女巫是图片的文字。

我想将所有这些部分合二为一`UIImage`，将其保存到相机胶卷中！

我该怎么做？

UPD。我应该如何添加`UITextView`？

我发现：

```
[[myTextView layer] renderInContext:UIGraphicsGetCurrentContext()]; 
```

但是这种方法并没有将 myTextView 放在正确的位置。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-01T18:37:58.547

创建两个`UIImage`对象和一个`UILabel`对象然后使用`drawInRect:`方法

```
//create image 1

UIImage *img1 = [UIImage imageNamed:@"image1.png"];

//create image 2    

UIImage *img2 = [UIImage imageNamed:@"image2.png"];

// create label

UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 50,50 )];

//set you label text

[label setText:@"Hello"];

// use UIGraphicsBeginImageContext() to draw them on top of each other

//start drawing
UIGraphicsBeginImageContext(img1.size);

//draw image1

[img1 drawInRect:CGRectMake(0, 0, img1.size.width, img1.size.height)];

//draw image2

[img2 drawInRect:CGRectMake((img1.size.width - img2.size.width) /2, (img1.size.height- img2.size.height)/2, img2.size.width, img2.size.height)];

//draw label

[label drawTextInRect:CGRectMake((img1.size.width - label.frame.size.width)/2, (img1.size.height - label.frame.size.height)/2, label.frame.size.width, label.frame.size.height)];

//get the final image

UIImage *resultImage  = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext(); 
```

其中包含您的所有图像和标签作为一张图像`resultImage`。`UIImage`之后，您可以将其保存在您想要的任何位置。

希望有帮助...

# ruby-on-rails - Heroku RoR 应用程序的持续集成服务器

> ID：12677905
> 
> 赞同：2
> 
> 时间：2012-10-01T17:15:28.583
> 
> 标签：ruby-on-rails, heroku, continuous-integration

我们的 RoR 应用需要 Heroku 上的 CI。  

我们想使用附加组件。我不介意花几块钱来避免复杂性/分心。

我看到它基本上是 Railsonfire 与 Tddium

在选择使用其中一种与另一种时，我们应该考虑哪些因素？

在下面的链接中提出了类似的问题，但似乎这是在创建上述附加组件之前。 [使用 Git 和 Heroku 进行适当的持续集成和持续部署](https://stackoverflow.com/questions/3127194/proper-continuous-integration-and-continuous-deployment-with-git-and-heroku)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T21:20:06.050

另一个选择是[CircleCi](https://circleci.com)，虽然它还没有出现在 Heroku 附加市场中，但它非常容易。

我个人认为速度是主要考虑因素。您的团队移动的速度与您获得通知的速度有关，而针对速度进行优化的平台将产生重大影响。

此外，在慢速平台上，测试可能会随机失败（例如，如果按钮在 3 秒内没有出现，Cucumber 可能会失败，这在慢速平台上可能不会很快发生）。

我是[CircleCi](https://circleci.com)的创始人，我们制作了一个非常快速的 CI 解决方案（比您提到的两种服务都快）。它很容易设置（一键式），虽然它不在 Heroku 市场中（还）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T21:29:21.553

我给你的一个考虑是……呃……考虑是支持。我对 Tddium 团队一无所知，但我知道几个月前我尝试 Rails On Fire 时被支持所震撼。我问了一些疯狂的问题（我做疯狂的事情），弗洛里安立即在电子邮件和 Twitter 上回复了帮助和建议。

然后，当我决定不使用该服务时，因为它不支持一个边缘案例功能，他实现了该功能！我已经有几个星期没有使用它了，他亲自回信给我说：“嘿，我们终于有了你认为有用的功能。”

我已经使用 Hudson/Jenkins 多年，并且知道您对复杂性的含义。但我也认为在另一端有人是非常关键的，RailsOnFire 团队至少目前做得很好。

# objective-c - 在 NSDictionary 中存储 UIColors 并检索它们？

> ID：12677907
> 
> 赞同：3
> 
> 时间：2012-10-01T17:15:38.317
> 
> 标签：objective-c, ios, nsarray, uicolor

我需要为给定的索引返回一个特定的 UIColor。
我试图基本上将 UIColors 存储为 NSArrays

> TypeColors = [[NSDictionary alloc] initWithObjectsAndKeys:
> 
> **@"1"** , [NSArray arrayWithObjects:[NSNumber numberWithFloat:0.5],[NSNumber numberWithFloat:0.5],[NSNumber numberWithFloat:0.5],[NSNumber numberWithFloat:1.0], nil],
> 
> **@"5"** , [NSArray arrayWithObjects:[NSNumber numberWithFloat:1.0],[NSNumber numberWithFloat:0.5],[NSNumber numberWithFloat:0.1],[NSNumber numberWithFloat:1.0], nil] , nil]; //nil 表示对象和键的结束。

在这里，我想从该字典中检索 UIColor ：

```
a = 5;
NSArray* colorArray = [TypeColors objectForKey:a];
UIColor* color = [UIColor colorWithRed:[colorArray objectAtIndex:0]
green:[colorArray objectAtIndex:1] blue:[colorArray objectAtIndex:2] 
alpha:[colorArray objectAtIndex:3]]; 
```

它总是给我一个零，有人知道为什么吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:20:15.033

将其更改为

```
UIColor* color = [UIColor colorWithRed:[[colorArray objectAtIndex:0] floatValue]
green:[[colorArray objectAtIndex:1] floatValue] blue:[[colorArray objectAtIndex:2] floatValue] 
alpha:[[colorArray objectAtIndex:3] floatValue]]; 
```

要发送的参数是 cgfloat 而不是 NSNumber

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T17:24:29.110

两件事情：

1）事物的顺序`initWithObjectsAndKeys`是对象，然后是它们的键。是的，直觉上是倒退。

2) 键不是整数`5`而是`NSString` `@"5"`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-06T05:03:41.497

您需要先将 UIcolor 转换为 Nsstring，然后再将其保存在字典中，如下所示：

```
 -(NSString *)convertColorToString :(UIColor *)colorname
    {
    if(colorname==[UIColor whiteColor] )
    {
       colorname= [UIColor colorWithRed:1 green:1 blue:1 alpha:1];
    }
    else if(colorname==[UIColor blackColor])
    {
       colorname= [UIColor colorWithRed:0 green:0 blue:0 alpha:1];
    }
    else
    {
        colorname=colorname;
    }
    CGColorRef colorRef = colorname.CGColor;
    NSString *colorString;
    colorString=[CIColor colorWithCGColor:colorRef].stringRepresentation;
    return colorString;
} 
```

当您想从字典中获取值时，您需要将字符串转换为颜色，如下所示

```
 -(UIColor *)convertStringToColor :(NSDictionary *)dicname :(NSString *)keyname
{
    CIColor *coreColor = [CIColor colorWithString:[dicname valueForKey:keyname]];
    UIColor *color = [UIColor colorWithRed:coreColor.red green:coreColor.green blue:coreColor.blue alpha:coreColor.alpha];
    //NSLog(@"color name :%@",color);
    return color;
} 
```

前：

这里 dicSaveAllUIupdate 是我的字典，我在其中保存了视图背景颜色。

```
 [dicSaveAllUIupdate setObject:[self convertColorToString: self.view.backgroundColor] forKey:@"MAINVW_BGCOLOR"]; 
```

我将按如下方式进行检索

```
self.view.backgroundColor=[self convertStringToColor:retrievedDictionary:@"MAINVW_BGCOLOR"]; 
```

希望这对你有帮助...

# mysql - 未加载库：/usr/local/mysql/lib/libmysqlclient.18.dylib (LoadError)

> ID：12677911
> 
> 赞同：3
> 
> 时间：2012-10-01T17:15:55.480
> 
> 标签：mysql, ruby-on-rails-3, macos

我很长一段时间都遇到了rails问题，我尝试了很多我在这里发现的类似问题的答案，但是虽然其中一些对一些错误有效，但我一直卡住并且无法解决这个问题，我尝试了大多数解决方案对于我发现并最终决定问自己的类似问题，此错误仅在启动此特定项目的服务器时发生，而服务器为新的空 rails 项目正常启动：

```
$ rails server
/Users/celorisoli/.rvm/gems/ruby-1.9.2-p320/gems/mysql2-0.3.11/lib/mysql2.rb:9:in    `require': dlopen(/Users/celorisoli/.rvm/gems/ruby-1.9.2-p320/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle, 9): Library not loaded: /usr/local/mysql/lib/libmysqlclient.18.dylib (LoadError)
Referenced from: /Users/celorisoli/.rvm/gems/ruby-1.9.2-p320/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle
Reason: no suitable image found.  Did find:
/usr/local/mysql/lib/libmysqlclient.18.dylib: mach-o, but wrong architecture
/usr/local/mysql/lib/libmysqlclient.18.dylib: mach-o, but wrong architecture
/usr/lib/libmysqlclient.18.dylib: mach-o, but wrong architecture - /Users/celorisoli/.rvm/gems/ruby-1.9.2-p320/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle
from /Users/celorisoli/.rvm/gems/ruby-1.9.2-p320/gems/mysql2-0.3.11/lib/mysql2.rb:9:in `<top (required)>'
from /Users/celorisoli/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/runtime.rb:68:in `require'
from /Users/celorisoli/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
from /Users/celorisoli/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/runtime.rb:66:in `each'
from /Users/celorisoli/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/runtime.rb:66:in `block in require'
from /Users/celorisoli/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/runtime.rb:55:in `each'
from /Users/celorisoli/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler/runtime.rb:55:in `require'
from /Users/celorisoli/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.1/lib/bundler.rb:128:in `require'
from /Users/celorisoli/logbook/config/application.rb:7:in `<top (required)>'
from /Users/celorisoli/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.6/lib/rails/commands.rb:53:in `require'
from /Users/celorisoli/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.6/lib/rails/commands.rb:53:in `block in <top (required)>'
from /Users/celorisoli/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.6/lib/rails/commands.rb:50:in `tap'
from /Users/celorisoli/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.6/lib/rails/commands.rb:50:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

大多数答案有助于解决“找不到图像”的问题，但是这里的错误如下：

```
Reason: no suitable image found.  Did find: 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-15T21:29:26.663

您需要找到 libmysqlclient.18.dylib 实际在您的机器上的位置，并使用正确的路径更新捆绑包。

例如，我的错误信息是：

> /Users/rbotzer/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': dlopen(/Users/rbotzer/.rvm /gems/ruby-1.9.3-p392/gems/mysql-2.9.1/lib/mysql/mysql_api.bundle, 9)：库未加载：libmysqlclient.18.dylib (LoadError)

我将 libmysqlclient.18.dylib 定位在 /usr/local/mysql-5.6.16-osx10.7-x86_64/lib/libmysqlclient.18.dylib

现在更新捆绑包：

> sudo install_name_tool -change libmysqlclient.18.dylib /usr/local/mysql-5.6.16-osx10.7-x86_64/lib/libmysqlclient.18.dylib ~/.rvm/gems/ruby-1.9.3-p392/gems/ mysql-2.9.1/lib/mysql/mysql_api.bundle

这解决了我的问题。

# objective-c - Objective C - 块代码不按顺序执行？

> ID：12677912
> 
> 赞同：0
> 
> 时间：2012-10-01T17:16:04.293
> 
> 标签：objective-c, ios, uitableview, client-server, afnetworking

我正在尝试在单元格进入视图时将数据加载到应用程序中，这样一旦他们按下单元格的附件按钮，它将加载数据。

我的问题是我正在使用 AFNetworking 并且我正在使用这个块代码：

```
[Request fullRequestWithBlock:^(NSArray *detailedReqFromWeb, NSError *error) {
        if (error) {

            [[[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Error", nil) message:[error localizedDescription] delegate:nil cancelButtonTitle:nil otherButtonTitles:NSLocalizedString(@"OK", nil), nil] show];
        } else {

            NSArray *objs = [NSArray arrayWithObjects: [detailedReqFromWeb objectAtIndex: 0], [detailedReqFromWeb objectAtIndex: 1], [detailedReqFromWeb objectAtIndex: 2], [detailedReqFromWeb objectAtIndex: 3], [detailedReqFromWeb objectAtIndex: 4], [detailedReqFromWeb objectAtIndex: 5], nil];
            NSArray *keys = [NSArray arrayWithObjects:@"Risk", @"Destination", @"Source", @"Customer", @"Subcategory", @"Deployment", nil];

            NSMutableDictionary *detailsforRequestDictionary = [[NSMutableDictionary alloc] initWithObjects:objs forKeys:keys];

            [request addEntriesFromDictionary: detailsforRequestDictionary];

            NSLog(@"%@ Finished Loading", [idNumbers objectAtIndex:row]);
            cell.accessoryType = UITableViewCellAccessoryDetailDisclosureButton;

        }

    } forID: [[idNumbers objectAtIndex:row] substringFromIndex:1]]; 
```

因此，基本上，一旦加载数据，我就会尝试将附件类型从指示器更改为显示按钮，这样我就可以转到另一个视图，在该视图中将显示我加载的数据。

我的问题是它在完成加载之前将 cell.accessoryType 更改为按钮。调试 NSLog 在实际完成加载时实际输出。

仅在加载完成后才启用按钮的最佳方法是什么？我猜这个请求没有被主线程处理。为什么会通知我请求已完成处理以便我可以切换附件类型？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T17:39:59.790

除非您不回收单元格，否则您永远不应该保留单元格引用，因为它所代表的数据会随着用户滚动而改变。正确的方法是在主队列上调度一个块，以更新节/行坐标中的表条目。然后，您的代码会检查该单元格是否可见，然后对其进行更新。它还会以其他方式记录状态，以便在表格滚动时应用正确的状态。

# java - 在 java 中，有没有简单的方法可以在 swing 组件上的文本中添加“发光”？

> ID：12677920
> 
> 赞同：3
> 
> 时间：2012-10-01T17:17:12.190
> 
> 标签：java, swing, text, paint, glow

使摆动组件上的纯文本在背景中具有发光效果的最简单方法是什么？

示例：从![http://i.imgur.com/3jtUm.png](../Images/b9e0e44a928850a35187b613bdd91c21.png)->![http://i.imgur.com/hXTOf.png](../Images/cba00afc09872376f1ffd40a3ff9082d.png)

差异可能不是那么明显，但第二张图片中肯定有发光。提前致谢。顺便说一句，我在java中找不到这个问题的任何答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T17:20:37.630

最简单的方法可能是在*其自身的模糊版本之上*绘制文本。模糊版本将在边缘周围提供“发光”。

在绘制模糊版本以获得正确效果时，您可能需要尝试正确的模糊量和透明度级别。

有关模糊技术，请参阅：[如何模糊图像？](https://stackoverflow.com/questions/1589760/how-do-i-blur-an-image)

# php - PHP Cookie 不起作用

> ID：12677921
> 
> 赞同：4
> 
> 时间：2012-10-01T17:17:13.653
> 
> 标签：php, cookies

我正在尝试访问我刚刚在同一域的其他页面中设置的 cookie，但它不起作用。当我这样做`echo $_COOKIE`时，新页面上的数组为空，但包含创建页面上的 cookie。

这是 /PROC/LOGIN.PROC.PHP 中的代码

```
//Set the cookie for 1 year.
setcookie("username", $username, time()+365*24*60*60);
setcookie("password", $password, time()+365*24*60*60); 
```

这是 /INC/HEADER.INC.PHP 中的代码

```
if (isset($_COOKIE['username']) && isset($_COOKIE['password'])) {
include("pages/user.header.pages.php"); 
```

但是，当我尝试设置 cookie 或仅在 header.inc.php 中显示数组时，该数组为空。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-01T17:19:31.907

您需要[根据文档](http://php.net/setcookie)`path`将 cookie 的值设置为域的根目录：

```
setcookie("username", $username, time()+365*24*60*60, '/'); 
```

否则，它将被设置为当前工作目录，这是`/PROC/`您的示例。因此，只有其中的脚本`/PROC/`才能使用该 cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-29T15:17:47.203

Check out, your PHP setcookie definition is done before declare HEADs. If not, the cookie is not stored.

So take control of your cookies at the beginning of code, before sending headers or other HTML entities.

# jsf - Primefaces DataTable ajax不更新除自身之外的任何组件

> ID：12677924
> 
> 赞同：0
> 
> 时间：2012-10-01T17:17:20.410
> 
> 标签：jsf, jsf-2, primefaces

```
<h:form id="form">
        <p:messages />
        <p:panel header="Análise">
            <h:outputText value="Mês da análise: " />

            <p:selectOneMenu value="#{report005.selectedMes}">
                <f:selectItems var="data" value="#{report005.analiseMeses}" itemLabel="#{report005.formataDataCombo(data)}" />
                <f:convertDateTime pattern="MM/yyyy" />
            </p:selectOneMenu>

            <p:commandButton value="Análises" update="analiseTable" actionListener="#{report005.loadAnalise()}" />

            <p:dataTable id="analiseTable" var="pes" value="#{report005.analiseModel}" selection="#{report005.selectedAnalise}" emptyMessage="Não há registros...">

                <p:column selectionMode="multiple" style="width:18px" />

                <p:ajax event="rowSelectCheckbox" listener="#{report005.loadAnaliseProduto()}" update="produtosmanycheck" />

                <p:column headerText="Código">  
                    #{pes.cod_analise}  
                </p:column>

                <p:column headerText="Nome">  
                    #{pes.dsc_analise}  
                </p:column>

                <p:column headerText="Descrição">  
                    #{pes.dsc_resumida_acao}  
                </p:column>

                <p:column headerText="Planejamento">
                    <h:outputText value="#{pes.dat_planejamento_analise}">
                        <f:convertDateTime pattern="dd/MM/yyyy" />
                    </h:outputText>
                </p:column>

            </p:dataTable>
        </p:panel>
        <p:panel header="Produto Gerencial">

            <p:selectManyCheckbox id="produtosmanycheck" value="#{report005.selectedProduto}" layout="pageDirection">
                <f:selectItems id="teste" value="#{report005.produtos}" />
            </p:selectManyCheckbox>

        </p:panel>
        <p:commandButton value="Enviar" action="#{report005.send}" ajax="false" />
    </h:form> 
```

当 AJAX 事件“rowSelectCheckbox”被触发时，它没有找到要更新的“produtosmanycheck”组件，向我返回以下错误：

> javax.faces.FacesException：找不到从“form:analiseTable”引用的标识符为“produtosmanycheck”的组件。在 org.primefaces.util.ComponentUtils.findClientIds(ComponentUtils.java:251) 在 org.primefaces.util.AjaxRequestBuilder.addIds(AjaxRequestBuilder.java:102) 在 org.primefaces.util.AjaxRequestBuilder.update(AjaxRequestBuilder.java:90 )

我已经尝试过= :form:produtosmanycheck, form:produtosmanycheck, :produtosmanycheck, produtosmanycheck

我也尝试删除 FORM id ...没有成功...

我究竟做错了什么？除了 DataTable 之外，我无法更新任何组件...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T03:13:08.957

您可以`produtosmanycheck`使用 `:form:produtosmanycheck`

编辑：嵌套表单将*无法*正常工作，并会出现各种 DOM 问题，例如您遇到的问题。找出一种方法将视图组件分成单独的表单，然后尝试上述命名的访问。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T14:31:38.450

我将发布我自己的答案（最后我提出了嵌套的`forms`想法）以及投票给@kolossus，因为他基本上是正确的并且不知道嵌套`forms`的。

嵌套`forms`不仅仅是 JSF 的“东西”（从@JordanDenison 的回答中可以看出），它是 HTML 的一般规则——> HTML`forms`中禁止嵌套！

您可能想[在 HTML 中阅读此嵌套表单](https://stackoverflow.com/q/379610/1317692)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-01T22:35:34.513

您是否尝试将 id “produtosmanycheck”放在父 p:panel 元素而不是 p:selectManyCheckbox 本身？

表单嵌套永远不应该在 JSF 中完成，即使前缀 ID 为 false，因为它会导致意外或没有行为。

# java - AHP 算法仅适用于 3 个标准

> ID：12677925
> 
> 赞同：1
> 
> 时间：2012-10-01T17:17:37.833
> 
> 标签：java, algorithm, ahp

我正在尝试实现 AHP（分析层次过程）算法来计算标准的权重（使用特征向量）。例如，我想买一部智能手机。我的标准是：颜色、内存、交货。为了计算权重，我必须在标准之间进行成对比较。我会将颜色与内存进行比较，颜色与交付进行比较，将内存与交付进行比较。为了比较 2 个标准，我们使用从 9 到 1/9 的比例。例如我比较颜色和记忆：如果我认为颜色比记忆更重要 4 次，我会使用 4，如果颜色和记忆一样重要，我会使用 1，如果颜色不如记忆重要 4 次，我使用 1/4=0.25。
为了计算权重，我必须建立一个矩阵：

```
 color       memory       delivery

color     1           value1       value2

memory    1/value1      1          value3 

delivery  1/value2   1/value3       1 
```

在我的情况下，矩阵是 3x3，因为我只有 3 个标准。该程序适用于 3 个标准，但不适用于 4、5 或更多。构建矩阵后，我可以计算特征向量来给我权重。任何建议都将不胜感激。先感谢您！

这是 Criteria 类的代码：

```
public class Criteria
{
public static void main(String[] args)
{
    AHP ahp=new AHP();

    int n;
    int NUMBER_COMPARISON;
    Scanner keyboard=new Scanner(System.in);

    System.out.println("Enter the number of criteria");
    System.out.println("n=");
    n=keyboard.nextInt();
    NUMBER_COMPARISON=(n*n-n)/2;

    double [][] a=new double[n][n];
    String [] criteria=new String[n];
    double [] p=new double[NUMBER_COMPARISON];//used to hold the values of comparisons

    System.out.println("Enter the criteria:");
    for(int i=0; i<n;i++)
    {
        System.out.print("Criterion "+(i+1)+":");
        criteria[i]=keyboard.next();
    }

    System.out.println("Enter the comparison");
        int m=0; 
        for(int i=0; i<n;i++)
        {
            for(int j=i+1; j<n;j++)
            {
                System.out.println("Compare "+criteria[i]+" with "+criteria[j]+":");
                p[m]=keyboard.nextDouble();
                m++;
            }
        }

    a=ahp.initialize_matrix(p);
    ahp.show_matrix(a);
   }    
} 
```

这是 AHP 类的代码：

```
public class AHP
{
public static double[][] initialize_matrix(double[] p)
{
    //initialize the matrix a
    double a[][]=new double[p.length][p.length];    
    int k=0;        
    for(int i=0; i<p.length; i++)
    {
        for(int j=0; j<p.length;j++)
        {
            if(i==j)
                a[i][j]=1;
            else if(i<j)
            {

                a[i][j]=p[k];
                k++;
            }

            else if(i>j)
                a[i][j]=1/a[j][i];
        }
    }
    return a;
}

public static void show_matrix(double[][] b )
{
    //display the elements of the matrix a
    System.out.println("\nThe matrix a is:");
    for(int i=0; i<b.length;i++)
    {
        for(int j=0; j<b[i].length; j++)
            System.out.print(b[i][j]+"    ");
        System.out.println();   
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:11:36.747

从分析的角度来看，initialize_matrix 方法中的变量 j 和 i 总是在数组边界内。但是，有变量 k，可以增加 p.length^2 倍。由于您还使用此变量来访问数组 p，因此它必须是 < p.length。

我认为您想在位置 k 处添加值，但每行都在线。我建议在内部 for 循环完成后将 k 设置为零。

编辑：正如预测的那样......

n = 4 的输出：

输入标准数量 n= 4 输入标准： 标准 1：a 标准 2：b 标准 3：c 标准 4：d 输入比较 比较 a 与 b：0.3 比较 a 与 c：0.1 比较 a 与 d：0.6 比较b 与 c：0.5 比较 b 与 d：0.8 比较 c 与 d：0.2

The matrix a is: 1.0 0.3 0.1 0.6 0.5 0.8
3.3333333333333335 1.0 0.3 0.1 0.6 0.5
10.0 3.3333333333333335 1.0 0.3 0.1 0.6
1.6666666666666667 10.0 3.3333333333333335 1.0 0.3 0.1
2.0 1.6666666666666667 10.0 3.3333333333333335 1.0 0.3
1.25 2.0 1.6666666666666667 10.0 3.3333333333333335 1.0

方法

```
public static double[][] initialize_matrix(double[] p)
{

    double a[][]=new double[p.length][p.length];    
    int k=0;        
    for(int i=0; i<p.length; i++)
    {
        k = 0;

        for(int j=0; j<p.length;j++)
        {
            if(i==j)
                a[i][j]=1;
            else if(i<j)
            {

                a[i][j]=p[k];
                k++;
            }

            else if(i>j)
                a[i][j]=1/a[j][i];
        }
    }
    return a;
} 
```

如果您将问题标记为已回答，我将不胜感激。

# cqrs - 为什么 CQRS 存储库发布事件，而不是事件存储？

> ID：12677926
> 
> 赞同：10
> 
> 时间：2012-10-01T17:17:41.283
> 
> 标签：cqrs

根据[http://cre8ivethought.com/blog/2009/11/12/cqrs--la-greg-young](http://cre8ivethought.com/blog/2009/11/12/cqrs--la-greg-young)负责使用事件发布者发布事件的组件是存储库。

我的问题很简单：为什么会这样？

在这篇博文中，我们被告知：

> 域存储库负责发布事件，这通常在单个事务中，同时将事件存储在事件存储中。

我本来希望这是事件存储的一项任务：一旦存储了一个事件（或多个事件），它就会被发布。

那么为什么它在存储库中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T17:59:32.980

您的域模型不知道存储机制。另一方面，它必须确保发布适当的事件，无论您使用事件存储、经典 SQL 存储还是任何其他持久性方式。

如果您依赖事件存储来发布事件，那么您将与存储机制紧密耦合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-14T13:55:12.237

存储和发布事件必须是原子指令，因为如果两个操作之一失败，则此事件的侦听器将与事件的生产者不同步。

与从事件存储中发布事件相比，还有另一种（更昂贵的）解决方案，即使用 2pc 事务（两阶段提交）。

你可以在这里找到更多有趣的信息：[https ://cqrs.wordpress.com/documents/building-event-storage/](https://cqrs.wordpress.com/documents/building-event-storage/)

# go - 创建字符串到列表的映射

> ID：12677934
> 
> 赞同：72
> 
> 时间：2012-10-01T17:18:22.750
> 
> 标签：go

我想创建一个字符串到`container/list.List`实例的映射。这是正确的方法吗？

```
package main

import (
    "fmt"
    "container/list"
)

func main() {
    x := make(map[string]*list.List)

    x["key"] = list.New()
    x["key"].PushBack("value")

    fmt.Println(x["key"].Front().Value)
} 
```

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2012-10-01T18:19:43.650

每当我想使用 a 时`List`，我发现切片是正确的选择，例如

```
package main

import "fmt"

func main() {
    x := make(map[string][]string)

    x["key"] = append(x["key"], "value")
    x["key"] = append(x["key"], "value1")

    fmt.Println(x["key"][0])
    fmt.Println(x["key"][1])
} 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2017-12-27T22:18:32.137

我最喜欢的声明字符串映射到字符串切片的语法：

```
mapOfSlices := map[string][]string{
    "first": {},
    "second": []string{"one", "two", "three", "four", "five"},
    "third": []string{"quarter", "half"},
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-01T19:49:01.180

您所写的内容在技术上没有任何错误，但您应该定义自己的类型`map[string]*list.List`以避免一些陷阱，例如尝试`.Front()`在 nil 指针上调用方法。或者让它`map[string]list.List`避免这种情况。list.List 只是一对指针和一个长度值；在你的地图中使用 list.List 指针只是在空列表的情况下添加一个 nil 指针的额外情况。在任何一种情况下，您都应该为此用例定义一个新结构。

我倾向于这样写： [http ://play.golang.org/p/yCTYdGVa5G](http://play.golang.org/p/yCTYdGVa5G)

# apache - 此网页有重定向循环

> ID：12677936
> 
> 赞同：0
> 
> 时间：2012-10-01T17:18:34.153
> 
> 标签：apache, .htaccess, error-handling

好吧，所以我尝试强制使用 www。或允许没有 www。. 它不起作用，所以我将其全部从 .htaccess 文件中取出并重新上传。现在，当我尝试查看该网站时，我收到以下错误消息：

> 此网页有重定向循环

这需要多长时间才能刷新并且不再显示此错误消息？我尝试清除我的 cookie 并刷新我的 DNS。它还在那里。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T17:50:58.453

也许看看这个上一个问题的答案：[.htaccess 更改需要多长时间才能生效？](https://stackoverflow.com/questions/7836845/how-long-does-it-take-for-htaccess-changes-to-take-effect)

对 .htaccess 的更改应立即生效。重新检查明显的事情可能会有所帮助（服务器上的文件确实是正确的 .htaccess 等）

Apache 关于此事的帮助页面：[http ://httpd.apache.org/docs/2.2/configuring.html#htaccess](http://httpd.apache.org/docs/2.2/configuring.html#htaccess)

# sql - 匹配列中的子字符串

> ID：12677941
> 
> 赞同：1
> 
> 时间：2012-10-01T17:19:05.573
> 
> 标签：sql, sql-server, performance, tsql

首先，我为这里的糟糕格式道歉。

其次，我应该预先说更改表模式不是一种选择。

所以我有一个表定义如下：

**Pin** varchar
**OfferCode** varchar

Pin 将包含以下数据：
abc、
abc123

OfferCode 将包含以下数据：
123
123~124~125

我需要一个查询来检查 Pin/OfferCode 组合的计数，当我说 OfferCode 时，我的意思是由波浪号分隔的单个项目。

例如，如果有一行看起来像`abc, 123`，另一行看起来像`abc,123~124`，并且我搜索`Pin=abc,OfferCode=123`我的魔杖的计数以获得计数 = 2。

显然我可以做一个类似的查询：
`SELECT count(1) from MyTable (nolock) where OfferCode like '%' + @OfferCode + '%' and Pin = @Pin`

在这里使用`like`非常昂贵，我希望可能有更有效的方法。

我也在研究使用拆分字符串解决方案。我有一个`SplitString(string,delim)`将返回 table的表值函数`OutParam`，但我不太确定如何将它应用于表列和字符串。*这甚至值得追求吗？*看起来它会贵得多，但我无法获得一个可行的解决方案来与该`like`解决方案进行比较。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:23:37.270

> 像这里一样使用非常昂贵，我希望可能有更有效的方法

有效的方法是规范化模式并将每个模式放在`OfferCode`自己的行中。

然后您的查询更像是（尽管您可能需要根据您的架构使用交集表）：

```
select count(*)
from MyTable 
where OfferCode = @OfferCode 
    and Pin = @Pin 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T17:44:25.907

如果您的报价代码不是 3 位数，则您的 like/% 解决方案可能会出现错误（如果有报价代码 123 和 1234，则搜索 like '%123%' 将返回两者，这是错误的）。您可以通过这种方式使用您的字符串函数：

```
SELECT Pin, count(1) 
FROM MyTable (nolock) 
CROSS APPLY SplitString(OfferCode,'~') OutParam 
WHERE OutParam.Value = @OfferCode and Pin = @Pin
GROUP BY Pin 
```

如果你有一张相对较小的桌子，你可能会摆脱这个。如果您正在处理大量行或遇到性能问题，则按照 RedFilter 的建议对其进行规范化会更有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T19:33:40.573

这是解决`like`此问题的一种方法，这是在搜索分隔字符串同时避免该问题时获得精确匹配的标准`'%123%' matches '123' and '1234'`：

```
-- Create some test data
declare @table table (
      Pin varchar(10) not null
    , OfferCode varchar(100) not null
)
insert into @table select 'abc', '123'
insert into @table select 'abc', '123~124'

-- Mock some proc params
declare @Pin varchar(10) = 'abc'
declare @OfferCode varchar(10) = '123'

-- Run the actual query
select count(*) as Matches
from @table
where Pin = @Pin
    -- Append delimiters to find exact matches
    and '~' + OfferCode + '~' like '%~' + @OfferCode + '~%' 
```

如您所见，我们将分隔符添加到搜索字符串以及搜索字符串以查找匹配项，从而避免其他答案提到的错误。

我非常怀疑字符串拆分功能是否会产生更好的性能，但使用一些[最近建议](http://bradsruminations.blogspot.com/2010/01/delimited-string-tennis-again-final.html)`like`的方法可能值得一两次测试。如果您仍然有不可接受的性能，您有几个选择：

**更新：**

*   尝试在`OfferCode`（或[计算的持久列](http://msdn.microsoft.com/en-us/library/ms189292.aspx)）上的索引`'~' + OfferCode + '~'`。与 SQL Server 不会将索引与`like`通配符一起使用的神话相反，这[*实际上可能会有所帮助*](http://blogs.msdn.com/b/varund/archive/2009/11/30/index-usage-by-like-operator-query-tuning.aspx)。
*   查看[全文搜索](http://msdn.microsoft.com/en-us/library/ms142571.aspx)。
*   使用字符串拆分器创建此表的规范化版本。使用此表计算您的计数。根据一些时间表或事件（触发器等）更新此表。
*   如果您有一些标准搜索词，请预先计算这些词的计数并定期存储它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T17:52:09.800

实际上，LIKE 条件比进行任何类型的字符串操作和比较的成本要低得多。

[http://www.simple-talk.com/sql/performance/the-seven-sins-against-tsql-performance/](http://www.simple-talk.com/sql/performance/the-seven-sins-against-tsql-performance/)

# iphone - 不平衡的调用和缺少根视图控制器错误

> ID：12677944
> 
> 赞同：0
> 
> 时间：2012-10-01T17:19:27.360
> 
> 标签：iphone, objective-c, cocoa-touch, ios5, xcode4.2

这是我的基本故事板布局

```
 MY MAIN Navigation Controller 
if ( abc )
--Push Segue-> [Series of View Controllers] -Modal Segue-> My ViewContrller 
else
-- Modal Segue->  My ViewContrller 
```

我收到这些警告。

```
 Applications are expected to have a root view controller at the end of application launch 
```

我应该怎么做才能避免它们

```
NSLog(@"%@" , self.window.rootViewController.self); gives me <UINavigationController: 0x7435610> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T17:24:47.357

在 if else 之外为您的导航控制器分配一个根视图，编译器永远无法确定您是否真的在 if/else 内部得到了有效的东西，即使您总是应该它永远不会看起来，我认为是因为 if/ 的方式else 被编译。或在 if/else 之外声明一个指向 null 的指针，然后将指针分配给 if else 结果的位置。

![在此处输入图像描述](../Images/e973c1824e0ba33bc01a6fed2fe0be3a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:25:22.070

在您的 AppDelegate 类中，您应该初始化一个 UIWindow，可能是 UIWindow *window

在行之前`[window makeKeyAndVisible]`，您应该设置`window.rootViewController = MAIN_VIEW_HERE;`

# api - 如何使用 Twitter Api 来获取我拥有的 Twitter 关注者数量？

> ID：12677949
> 
> 赞同：0
> 
> 时间：2012-10-01T17:19:41.673
> 
> 标签：api, twitter

我想使用 twitter api 来获取我拥有的 Twitter 关注者的数量并记录该信息。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T17:30:12.087

查看 twitters [REST API 文档](https://dev.twitter.com/docs/api/1.1)——它通常非常好。

在您的情况下，您想要开始的是

```
GET /followers/ids.json?screen_name=<your screen name goes here>&cursor=-1 
```

这将返回一个 JSON 文档，其中包含前 5000 个关注者。您可以计算“ids”数组中的项目数。如果有更多页的结果，“next_cursor”键将非零。如果是这样，请将其用作“光标”参数并再次调用 API。重复，直到你找到所有的追随者。

# javascript - 如何从 JSON Schema 默认构造 JavaScript 对象？

> ID：12677953
> 
> 赞同：7
> 
> 时间：2012-10-01T17:20:01.767
> 
> 标签：javascript, json, jsonschema

我已经开始在我的 C# 代码中使用 Newtonsoft.Json.Schema.JsonSchemaGenerator 以及各种属性来帮助保持我的客户端脚本干燥。我想做的是根据服务器的模式创建一个默认的初始化对象客户端。例如，当用户单击“New Foo”以将新条目添加到表中时，这将很有用。

显然，我可以对其进行编码以迭代 .Properties 并构建新对象，这就是我目前正在做的事情。但是，我宁愿避免重新发明任何轮子。

除了我还没有意识到我需要的其他漂亮东西之外，是否有任何用于处理 JSON 模式的 JS 库？

* * *

2013 年 1 月 29 日更新

有些人试图回答我的问题并且已经偏离了基础，因此收到了来自 SO 社区的一些负面反馈。所以让我试着澄清一下。这是挑战：

*   在 JS 客户端脚本中，您有一个表示另一个对象的 JSON **Schema**的对象。比方说，这来自服务器通过 JSON.NET 并且是 C# 类的表示。

*   现在，在 JS 客户端脚本中，基于 JSON **Schema**创建这些对象之一。对象中的每个字段/属性都必须根据架构默认初始化，包括所有包含的对象！

*   奖励：使用 MVVM（例如 Knockout）将此新对象绑定到 UI。更改某些字段以响应用户输入。

*   将此新对象发送到服务器。服务器端代码会将其添加到集合、数据库表等中。（是的，对象将使用 Ajax 作为 JSON 发送——我们可以假设）

*   **没有重复**！定义类的唯一位置是服务器端代码（在我的示例中为 C#）。这包括所有元数据，例如默认值、描述文本、有效范围等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-02-28T19:36:26.650

是的（我用 NodeJS 试过）：

[JSON 架构默认值](https://www.npmjs.com/package/json-schema-defaults)

链接已更新。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-29T04:38:20.450

我认为...您必须使用两种方式绑定您的 HTML 代码...因此，一旦您的客户端更改，您将获得您的服装 js 文件。

在这里查看淘汰赛 js。

[淘汰 JS 链接](http://knockoutjs.com/)

并在 C# 代码上使用：$("#urlhidden").val() 或 Document.GetElemenyByID("#urlhidden").val()。

在这里您将获得数组/列表或文本框值

将 json 与 Ko 一起使用

为淘汰赛 js 创建新的视图模型，您将在上面的链接中了解它。

并创建一个 json 调用，如：

```
 self.LoadMAS_Client = function () {

        try {

            var params = { "clientID": ClientId };

            $.ajax({
                type: "POST",
                url: "http://" + ServerString + "/Services/LogisticsAppSuite-Services-Web-Services-MasClientService.svc/Json/GetAllLevelSubClients",
                contentType: 'application/json',

                data: JSON.stringify(params),
                dataType: 'json',
                async: false,
                cache: false,
                success: function (response) {

              // in response u will get the data.and use as per your requirement.

                  eg.   self.SelectedClient(response.your value);

                },
                error: function (ErrorResponse) {

                }

            });
        }
        catch (error) {

        }
    }; 
```

=================================新更新================ ========================== 我认为..你可以做的一种方法...在 C# 代码中获取 xml 格式的数据并转换为 json字符串...检查以下代码 // 将字符串 xml 中包含的 XML 节点转换为 JSON 字符串

```
XmlDocument doc = new XmlDocument();
doc.LoadXml(xml);
string jsonText = JsonConvert.SerializeXmlNode(doc);

// To convert JSON text contained in string json into an XML node
XmlDocument doc = (XmlDocument)JsonConvert.DeserializeXmlNode(json); 
```

# arrays - 用另一个减去 NX1 矩阵的一个元素

> ID：12677958
> 
> 赞同：2
> 
> 时间：2012-10-01T17:20:34.160
> 
> 标签：arrays, matlab, subtraction

我有下面的 nX1 矩阵，这里的 n 很大，我要进行下面的运算——（第二项）减去（第一项），即 (2.25555-1.45656),(4.74096-2.25555),(440.0000-4.74096 ) 等等....对于剩余的 'n' 行数

> 1.45656
> 2.25555
> 4.74096
> 440.00000
> 0.02000
> 550.7
> 0.268

我做了以下事情，但它只给出一个值

```
[n,m]=size(a)
for i=1,n
    delta_g12(i)=(g_12(i+1)-g_12(i));
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T17:31:29.430

最简单的，类似 Matlab 的方法是使用一个名为的内置函数`diff`：

```
 delta_g12 = diff(g_12); 
```

* * *

但是你的方式也是可以的。您的代码几乎是正确的，错误在第一行：

```
 for i=1,n 
```

解释器会忽略`,n`并且就像您写的那样：

```
 for i=1 
```

相反，您应该使用冒号运算符：

```
[n,m]=size(a)
for i=1:n
    delta_g12(i)=(g_12(i+1)-g_12(i));
end 
```

# iphone - Monotouch，从附加了 UIlabel 的 UIImageView 创建一个 jpg

> ID：12677961
> 
> 赞同：1
> 
> 时间：2012-10-01T17:20:44.007
> 
> 标签：iphone, xamarin.ios, uiimageview, uilabel, jpeg

使用 Monotouch，我有一个带有一些 UIlabels 的 UIImageView，基本上它是一个带有一些文本的图像，就像一张明信片。我想获取此图像和文本并创建一个结合了两者的 jpg/png。

我不知道该怎么做。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T18:53:03.093

Craig Dunn 有一篇文章概述了如何以[编程方式进行屏幕截图](http://conceptdev.blogspot.com/2009/10/monotouch-screen-capture-in-c-code.html)。它更老了，但我认为它仍然可以工作。

核心思想是

```
 UIGraphics.BeginImageContext(View.Frame.Size); 
   var ctx = UIGraphics.GetCurrentContext();
   if (ctx != null)
   {
      View.Layer.RenderInContext(ctx);
      UIImage img = UIGraphics.GetImageFromCurrentImageContext();
      UIGraphics.EndImageContext();
   } 
```

# ruby-on-rails - jQuery UI 滑块 + Rails + SimpleForm

> ID：12677963
> 
> 赞同：2
> 
> 时间：2012-10-01T17:20:59.887
> 
> 标签：ruby-on-rails, jquery-ui, simple-form

我正在尝试在 Rails 3.2的[simple_form中插入一个](https://github.com/plataformatec/simple_form)[jQuery UI 滑块。](http://jqueryui.com/demos/slider/)

我创建了一个新的输入类`app/inputs/slider_input.rb`

```
class SliderInput < SimpleForm::Inputs::Base
  def input
    "<div class='slider-input'></div>#{@builder.hidden_field(attribute_name, input_html_options)}"
  end
end 
```

这里`_form.html.erb`

```
<%= simple_form_for(@post, :html => {:class => 'form-horizontal' }) do |f| %>
  <%= f.input :name %>
  <%= f.input :rating, :as => :slider, :input_html => { :value => '6' } %>
  <%= f.input :telephone %>
  <%= f.button :submit, :class => 'pull-right' %>
<% end %> 
```

问题是生成的代码是：

```
<div class="controls">
<div class="slider-input ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all">
    <a href="#" class="ui-slider-handle ui-state-default ui-corner-all"></a>
</div>
<input type="hidden" value="10" name="post[rating]" id="post_rating" class="slider required"></div> 
```

如何`6`在隐藏字段中传递默认值？目前默认值为 10，不知道为什么，可能是 javascript：

```
$(document).ready(function() {
    $(".slider-input").slider({
            min: 1,
            max: 10,
            values: [ 6 ],
            step: 0.5,
            slide: function(event, ui) {
                $(this).next('input').val(ui.value);
                $(this).parent().find('span.slider-value').html(ui.value);
            }
    });
}); 
```

另外，这是实现自定义滑块输入的最佳方式吗？对不起，我是 Rails 新手。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-10T09:48:24.837

看起来您只是错误地初始化了滑块，使用`values`而不是`value`.

以下是设置一个值的方法：

```
$( ".selector" ).slider({ value: 10 }); 
```

以下是设置多个值的方法：

```
$( ".selector" ).slider({ values: [ 10, 25 ] }); 
```

查看[jquery API](http://api.jqueryui.com/slider/#option-value)文档以获取有关设置值的更多文档。

# ajax - 如何验证ajax形式的输入

> ID：12677965
> 
> 赞同：1
> 
> 时间：2012-10-01T17:21:03.077
> 
> 标签：ajax, forms, validation

我有这个带有名称、电子邮件和消息的 ajax 表单，我想验证输入：

```
<script type="text/javascript">
$(document).ready(function(){
   $form = $('form');
   $form.submit(function(){
         $.post($(this).attr('action'), $(this).serialize(), function(response){
      $("#inlocuire").fadeOut(1000, function () {
            $(this).html("<img src='images/de_multumire.png'/>").fadeIn(2000);
        });

        var message = $('textarea[name=message]').val('');
        var name = $('input[name=name]').val('');
        var email = $('input[name=email]').val('');
      },'json');
      return false;
   });

}); 
```

我试图引入这个功能，但它不起作用：

```
$('#form_id').ajaxForm({
        beforeSubmit: validate
    });

    function validate(formData, jqForm, options) {
        var name = $('input[name=name]').fieldValue();
        var email = $('input[name=email]').fieldValue();
        var message = $('textarea[name=message]').fieldValue();

        if (!name[0]) {
            alert('Please enter a value for name');
            return false;
        }
        if (!email[0]) {
            alert('Please enter a value for email');
            return false;
        }
        if (!message[0]) {
            alert('Please enter a value for message');
            return false;
        }

        else {
        // here to send the form
                      } 
```

表格工作正常...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T18:38:30.763

对于那些和我有同样问题的人：http: [//docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

# javascript - 如何使用 replaceChild 和 getElementById() 来切换使用的 xsl

> ID：12677968
> 
> 赞同：0
> 
> 时间：2012-10-01T17:21:48.380
> 
> 标签：javascript, xml, ajax, xslt

所以，我正在处理一个在 xml 上使用 xsl 来创建 html 表的页面。当有人单击按钮时，我希望 xsl 用于更改。我正在研究 javascript，我认为我已经很接近了，但我就是做错了。

```
function sort()
{
  xsl=loadXMLDoc("sort.xsl");
  xsltProcessor=new XSLTProcessor();
  xsltProcessor.importStylesheet(xsl);
  sortedDocument = xsltProcessor.transformToFragment(xml,document);
  document.replaceChild(sortedDocument,getElementById('content'));
} 
```

我可以很容易地让它与 appendChild 一起工作，但它会在最后添加新表，而不是用新的排序表替换当前表。

现在，使用 replaceChild() 方法，我不断收到错误消息：“getElementById”未定义

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T17:23:57.273

修改后的行：你错过了`document`.

```
 //-----------\/
  document.replaceChild(sortedDocument, document.getElementById('content')); 
```

# magento - 更改重复产品的 Magento 默认状态

> ID：12677971
> 
> 赞同：3
> 
> 时间：2012-10-01T17:22:06.413
> 
> 标签：magento, duplicates, default, status

我安装了一个 Magento 商店，当产品在后端重复时，Magento 默认将其状态设置为禁用。我不希望这种情况发生，复制的产品也应该从原始产品复制其状态。

在[这篇文章](https://stackoverflow.com/questions/4656481/make-a-new-product-active-by-default-in-magento)中，给出了部分解决方案。我知道在哪里可以找到 config.xml 并进行必要的更改。但是，我在哪里放置这样一个观察者类？我应该使用/创建哪个文件，这是否需要对 config.xml 输入进行任何更改？

或者有人有这个问题的整体解决方案吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:10:34.740

尝试这个：

创建：app/code/local/MagePal/EnableDuplicateProductStatus/etc/config.xml

```
<?xml version="1.0"?>
<config>
    <modules>
        <MagePal_EnableDuplicateProductStatus>
            <version>1.0.1</version>
        </MagePal_EnableDuplicateProductStatus>
    </modules>

    <global>
        <models>
            <enableduplicateproductstatus>
                <class>MagePal_EnableDuplicateProductStatus_Model</class>
            </enableduplicateproductstatus>
        </models>
         <events>
            <catalog_model_product_duplicate>
                <observers>
                    <enableduplicateproductstatus>
                        <type>singleton</type>
                        <class>enableduplicateproductstatus/observer</class>
                        <method>productDuplicate</method>
                    </enableduplicateproductstatus>
                </observers>
            </catalog_model_product_duplicate>
        </events>
    </global>
</config> 
```

创建：app/code/local/MagePal/EnableDuplicateProductStatus/Model/Observer.php

```
class MagePal_EnableDuplicateProductStatus_Model_Observer 
{
    /**
     * Prepare product for duplicate action.
     *
     * @param Varien_Event_Observer $observer
     * @return object
     */
    public function productDuplicate(Varien_Event_Observer  $observer)
    {
        $newProduct = $observer->getEvent()->getNewProduct();
        $newProduct->setStatus(Mage_Catalog_Model_Product_Status::STATUS_ENABLED);

        return $this;
    }
} 
```

创建：app/etc/modules/MagePal_EnableDuplicateProductStatus.xml

```
 <?xml version="1.0"?>
    <config>
           <modules>
                  <MagePal_EnableDuplicateProductStatus>
                          <active>true</active>
                          <codePool>local</codePool>
                  </MagePal_EnableDuplicateProductStatus>
           </modules>
    </config> 
```

然后清除缓存并尝试复制产品。

阅读更多 @ ：

[http://magento4u.wordpress.com/2009/06/08/create-new-module-helloworld-in-magento/](http://magento4u.wordpress.com/2009/06/08/create-new-module-helloworld-in-magento/)

[http://www.magentocommerce.com/wiki/5__-_modules_and_development/0__-_module_development_in_magento/customizing_magento_using_event-observer_method](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/customizing_magento_using_event-observer_method)

[在 magento 中默认激活新产品](https://stackoverflow.com/questions/4656481/make-a-new-product-active-by-default-in-magento)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-15T16:04:48.770

我在此代码上发现错误并找出以下解决方案：

在 app/code/local/MagePal/EnableDuplicateProductStatus/etc/config.xml 更改

```
<method> duplicateProduct </method> 
```

至

```
<method>productDuplicate</method> 
```

# php - PHP Do While 循环中的 SQL 更新命令

> ID：12677973
> 
> 赞同：1
> 
> 时间：2012-10-01T17:22:12.310
> 
> 标签：php, sql, do-while

我有一个名为 projects 的 SQL 数据库，其中包含 post_id、feature_image、order 和 Landscape 字段。景观是所有密集目的的一个类别。

作为我要达到的功能的广泛概述；

页面加载 1 个记录集获取所有分类的 post_id#（1、2、4、5、8、12...等）并重新编号，具体为 1、2、3、4、5...等每个 post_id# 的重新编号将然后在一个名为 order 的字段中向 SQL 发送更新，该字段将采用这些值。然后 2 个记录集（一个奇数，一个偶数）加载不是 post_id，而是 order# 和所有相关信息（在本例中为特色图像），并在屏幕上输出两列图片，这些图片基于任何类别的正确顺序加载。

我知道我可以通过 post_id 订购，这**不是**问题。我特别希望能够在页面加载时将所有数字重新排序为数字 1、2、3、4、5、6 等。

我只发布了 if 语句的第一部分，因为我知道不是它的那部分搞砸了。一切都适用于变量等，唯一的问题是我无法让该死的变量在字段顺序下发送到数据库。我在这方面工作了太久，现在不知道我做错了什么。没有错误，只是订单字段在数据库中保持为 NULL。

我将为任何可以修复此代码或告诉我为什么我在做所有事情时都做低音的人举办一场纸牌游行，并且有更好的方法可以做到这一点。

```
<?php
if (!function_exists("GetSQLValueString")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
{
if (PHP_VERSION < 6) {
$theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
}

$theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

switch ($theType) {
case "text":
  $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
  break;    
case "long":
case "int":
  $theValue = ($theValue != "") ? intval($theValue) : "NULL";
  break;
case "double":
  $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
  break;
case "date":
  $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
  break;
case "defined":
  $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
  break;
}
return $theValue;
}
}

mysql_select_db($database_connTest, $connTest) or die("cannot select database");
$query_RS_Odd = "SELECT projects.post_id, projects.feature_image, projects.`order` FROM projects WHERE projects.landscape = 'landscape'";
$RS_Odd = mysql_query($query_RS_Odd, $connTest) or die(mysql_error());
$row_RS_Odd = mysql_fetch_assoc($RS_Odd);
$totalRows_RS_Odd = mysql_num_rows($RS_Odd);
?>

<?php do {
if ($row_RS_Odd['post_id'] == 1){ 
    $resort_next = 1;
    mysql_query("UPDATE projects SET order=".$resort_next." WHERE post_id=".$row_RS_Odd['post_id']."");
    echo $row_RS_Odd['post_id'];
    echo $resort_next;
}
else {
echo 'No records found';
}
 } while ($row_RS_Odd = mysql_fetch_assoc($RS_Odd)); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T17:29:43.500

`order`尽管您在语句中正确引用了 mysql 保留字`select`，但您忘记在`update`语句中这样做：

```
mysql_query("UPDATE projects SET order=".$resort_next." WHERE post_id=".$row_RS_Odd['post_id'].""); 
```

应该：

```
mysql_query("UPDATE projects SET `order`=".$resort_next." WHERE post_id=".$row_RS_Odd['post_id'].""); 
```

请注意，这些`mysql_*`函数已弃用，您应该真正切换到 PDO / mysqli 和准备好的语句。

# php - 向 wordpress 后分页添加范围

> ID：12677974
> 
> 赞同：0
> 
> 时间：2012-10-01T17:22:19.480
> 
> 标签：php, wordpress, loops, pagination

我有一些很长的帖子，有些超过 50 页（），当使用 wp_link_pages 时，它给了我 50 个内部帖子链接，显然这不可用。

我需要向 wp_link_pages 函数添加一个范围，因为现在我们输出 50 个分页链接。

输出应如下所示： ...45*6*78...

我已经有了添加范围的逻辑，但现在我需要弄清楚如何将它添加到现有的 wp_link_pages 函数中？

这是示例函数：

```
function limitPagination(){
    $displayPages = 5;
    $firstPage = 1;
    $lastPage = $numpages > 5;

    while($numpages > $displayPages){
        if(($pageNow > $firstPage +2) && ($pageNow < $lastPage - 2)){
            echo (($pageNow - 2).($pageNow - 1).$pageNow.($pageNow + 1).($pageNow + 2));
        }
    }
} 
```

这是我需要将示例函数添加到的函数：

```
// Add prev and next links to a numbered link list

function custom_wp_link_pages( $args = '' ) {
    $defaults = array(
        'before' => '<p id="post-pagination">' . __( 'Pages:' ), 
        'after' => '</p>',
        'text_before' => '',
        'text_after' => '',
        'next_or_number' => 'number', 
        'nextpagelink' => __( 'Next page' ),
        'previouspagelink' => __( 'Previous page' ),
        'pagelink' => '%',
        'echo' => 1
       );

    $r = wp_parse_args( $args, $defaults );
    $r = apply_filters( 'wp_link_pages_args', $r );
    extract( $r, EXTR_SKIP );

    global $page, $numpages, $multipage, $more, $pagenow;

    $output = '';
    if ( $multipage ) {
        if ( 'number' == $next_or_number ) {
            $output .= $before;
            for ( $i = 1; $i < ( $numpages + 1 ); $i = $i + 1 ) {
                $j = str_replace( '%', $i, $pagelink );
                $output .= ' ';
                if ( $i != $page || ( ( ! $more ) && ( $page == 1 ) ) )
                    $output .= _wp_link_page( $i );
                else
                    $output .= '<span class="current-post-page">';

                $output .= $text_before . $j . $text_after;
                if ( $i != $page || ( ( ! $more ) && ( $page == 1 ) ) )
                    $output .= '</a>';
                else
                    $output .= '</span>';
                }
        $output .= $after;
            } else {
                if ( $more ) {
                    $output .= $before;
                    $i = $page - 1;
                    if ( $i && $more ) {
                        $output .= _wp_link_page( $i );
                        $output .= $text_before . $previouspagelink . $text_after . '</a>';
                        }
                        $i = $page + 1;
                        if ( $i <= $numpages && $more ) {
                           $output .= _wp_link_page( $i );
                           $output .= $text_before . $nextpagelink . $text_after . '</a>';
                        }
                        $output .= $after;
                    }
                }
            }
        if ( $echo )
        echo $output;
        return $output;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T17:36:28.820

目标函数中的钩子是这样的：

```
$r = apply_filters( 'wp_link_pages_args', $r ); 
```

这意味着运行`limitPagination`你挂钩的函数`wp_link_pages_args`。这也意味着您的`limitPagination`函数必须接受`$r`作为参数并返回修改后的`$r`而不是回显输出。

# asp.net-mvc - 在自定义 RoleProvider 中首先使用 EF 代码会导致许多数据访问异常的原因是什么？

> ID：12677975
> 
> 赞同：1
> 
> 时间：2012-10-01T17:22:23.427
> 
> 标签：asp.net-mvc, entity-framework, ef-code-first, asp.net-mvc-4, roleprovider

我的角色提供者看起来像下面的类（删节）。我在 VS 2012 的 IIS Express 和 SQL 2012 Express 上运行，并且在此角色提供程序代码中出现大量看似随机的异常。

```
public class Educ8RoleProvider : RoleProvider
{
    private readonly Educ8DbContext _dbContext = new Educ8DbContext();
    private readonly Authorization _authorization;
    public Educ8RoleProvider()
    {
        _authorization = new Authorization(_dbContext);
    }
    public override void Initialize(string name, System.Collections.Specialized.NameValueCollection config)
    {
        try
        {
            base.Initialize(name, config);
        }
        catch (Exception ex)
        {
            ErrorSignal.FromCurrentContext().Raise(ex);
            throw;
        }
    }
    public override bool IsUserInRole(string username, string roleName)
    {
        return GetRolesForUser(username).Any(r => r.ToLower() == roleName);
    }
    public override string[] GetRolesForUser(string username)
    {
        return _authorization.GetRolesForMember(username).Select(r => r.Name).ToArray();
    }
} 
```

这是我的`Authorization`课堂示例：

```
public class Authorization
{
    private readonly Educ8DbContext _dbContext;
    private readonly IMemberRepository _memberRepository;
    private readonly IRoleRepository _roleRepository;
    private readonly IMemberRoleRepository _memberRoleRepository;
    public Authorization(Educ8DbContext context)
    {
        _dbContext = context;
        _memberRepository = new MemberRepository(_dbContext);
        _roleRepository = new RoleRepository(_dbContext);
        _memberRoleRepository = new MemberRoleRepository(_dbContext);
    }
    public IQueryable<Role> GetRoles()
    {
        return _roleRepository.ListAll();
    }
    public IQueryable<Role> GetRolesForMember(int memberId)
    {
        var roleIds = _memberRoleRepository.ListAll()
            .Where(mr => mr.MemberId == memberId)
            .Select(mr => mr.RoleId);
        return _roleRepository.ListAll()
            .Where(r => roleIds.Contains(r.Id));
    }
} 
```

每小时我会遇到大约两到三个以下异常。重新启动项目立即解决问题，直到下一个。

*   不允许更改“ConnectionString”属性。连接的当前状态为关闭。
*   创建模型时不能使用上下文。
*   基础提供程序在打开时失败。

值得注意的是，在项目的其他任何地方，我的数据访问问题绝对为零。

任何关于可能导致这种情况的建议都将受到欢迎。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T21:40:03.213

Gert Arnold 的评论走在了正确的轨道上。你必须意识到`RoleProvider`作为单例运行。每次重新启动应用程序时，都会构造一个此类的新实例。只要您的应用程序正在运行，它就会一直使用这个单一实例。

在我意识到这个类作为单例运行之前，我曾经得到与你的问题相同类型的异常。掌握了这些知识后，消除这些异常就不难了：

```
public class Educ8RoleProvider : RoleProvider
{
    //private readonly Educ8DbContext _dbContext = new Educ8DbContext();
    //private readonly Authorization _authorization;
    public Educ8RoleProvider()
    {
        //_authorization = new Authorization(_dbContext);
    }

    private Authorization GetAuthorization()
    {
        return new Authorization(new Educ8DbContext());
    }

    public override void Initialize(string name, NameValueCollection config)
    {
        try
        {
            base.Initialize(name, config);
        }
        catch (Exception ex)
        {
            ErrorSignal.FromCurrentContext().Raise(ex);
            throw;
        }
    }
    public override bool IsUserInRole(string username, string roleName)
    {
        return GetRolesForUser(username)
            .Any(r => r.ToLower() == roleName);
    }
    public override string[] GetRolesForUser(string username)
    {
        return GetAuthorization().GetRolesForMember(username)
            .Select(r => r.Name).ToArray();
    }
} 
```

从本质上讲，您要确保每个方法调用都`RoleProvider`使用全新的`DbContext`实例。这样，`RoleProvider`单身人士就不会挂在`DbContext`过时的单身人士身上。

# cocoa - NSWindow 忽略鼠标/键盘事件

> ID：12677976
> 
> 赞同：2
> 
> 时间：2012-10-01T17:22:29.563
> 
> 标签：cocoa, events, user-controls, nswindow, nswindowcontroller

此时我正在开发一个由 main 组成的 Cocoa 应用程序，`NSWindowController`其中显示了所有应用程序数据以及一些其他数据`NSWindowControllers`，例如公式，当用户需要编辑或向主`NSWindowController`窗口添加更多数据时.

我的问题是，当我需要在这些公式中添加或编辑数据时，main`NSWindowController`不能有任何类型的用户交互，以防止 main`NSWindowController`显示的信息发生任何变化。

我已经尝试过`-(void)setIgnoresMouseEvents:(BOOL)flag`，但是这个解决方案使主 NSWindowController 对交互完全透明，使任何意外点击，与任何窗口交互，从而隐藏应用程序。

有谁知道更好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:14:13.860

我终于找到了我想要的东西：

```
[NSApp runModalForWindow:(NSWindow *)aWindow]; 
```

这样，我可以阻止与母窗口的任何交互，直到我关闭子窗口并执行以下操作：

```
[NSApp stopModal]; 
```

使它再次变得活跃。

# android - 如何在 Android 设备上安全地保存 SharedPreference？

> ID：12677978
> 
> 赞同：0
> 
> 时间：2012-10-01T17:22:42.320
> 
> 标签：android, encryption, obfuscation, sharedpreferences, proguard

我有一些 SharedPreferences 我想尽可能安全地保存在设备本身上。我对安全性一无所知，但我通过一些研究发现我想要的是一种叫做“混淆器”的东西。那正确吗？这与“加密”有什么不同，还是我想两者都做？我还发现我可以使用[AESObfuscator](http://developer.android.com/guide/google/play/licensing/adding-licensing.html#impl-Obfuscator)或[ProGuard](http://developer.android.com/tools/help/proguard.html)。有什么区别？还有更多选择吗？我应该使用哪个？

我显然对安全性非常陌生，因此任何教程或其他参考资料都会有所帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T18:12:24.907

在这种情况下，混淆器不会为您做任何事情，因为它本质上所做的只是将变量重命名为非人类可读的名称。

您要做的是在数据保存到您的数据时对其`SharedPreferences`进行加密，并在您从中读取数据时对其进行解密。

这个想法的一个例子[Encrypted SharedPrefs](https://github.com/sveinungkb/encrypted-userprefs)，我不能说我之前没有使用过它有多有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T03:12:04.097

链接的[AESObfuscator](http://developer.android.com/guide/google/play/licensing/adding-licensing.html#impl-Obfuscator)使用静态密钥加密字符串，以便可以将它们保存到共享首选项中，并且它们是什么并不立即显而易见。这与诸如 ProGuard 之类的代码混淆器不同，后者会破坏代码中的方法和变量名称，从而使其更难进行逆向工程。它被称为“混淆”而不是“加密”，因为密钥在应用程序中，并且很容易反转（通过提取密钥和解密）。共享首选项混淆会使读取和修改字符串变得更加困难，但并非不可能。如果您可以接受该级别的保护，请使用此方法。使用代码混淆也是一个好主意，因此您希望同时使用这两种方法。

使解密字符串“不可能”的唯一受支持的方法是让用户在每次使用应用程序时输入密码并从中派生加密密钥。这可行，但不用说，它对用户不是很友好。如果你有兴趣，这里有[一些细节](http://nelenkov.blogspot.com/2012/04/using-password-based-encryption-on.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T18:20:58.757

唯一安全的方法是不在设备上保留任何敏感信息——如果它在那里，它将被提取，只要它的价值超过工作人员的时间（第三世界国家的熟练孩子真的很便宜，在金钱和丰富的时间）。您可能会看到这是如何使用 OAuth 完成的 - 该技术允许将 3rd 方应用程序（例如）登录到 twitter，而不会损害安全凭证（或应用程序曾经看到它们）

一个很好的图书馆是： [http ://code.google.com/p/oauth-signpost/](http://code.google.com/p/oauth-signpost/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T18:02:24.477

当我需要在 Java 文件中“隐藏”一些 URL 时，我对这个问题进行了一些研究。在您的情况下，它将是某种用于加密您的字符串的密钥。问题是任何人都可以使用某种逆向工程来读取 Java/Android 中的整个代码。有时它很容易，而像 ProGuard 这样的混淆器让它变得更难一些。因此，任何人都可以看到您的加密密钥。有一些（付费）混淆器甚至可以隐藏 Java 文件中的字符串，但我不确定它们有多可靠。
简而言之 - 将您的字符串保存在您的服务器上的设备之外，并在您的设备和服务器之间使用某种安全连接 (SSL)。或者您可以要求您的服务器对其进行加密并将其发送回给您。如果您将密钥保存在设备上，您将永远无法确定是否有人会使用逆向工程来读取它。

# android - Android-在选项卡之间切换后退按钮（选项卡导航操作栏）？

> ID：12677980
> 
> 赞同：2
> 
> 时间：2012-10-01T17:22:58.817
> 
> 标签：android, android-fragments, android-actionbar, android-fragmentactivity

我正在开发一个安卓应用程序。我在选项卡导航模式下有一个操作栏，三个选项卡调用要在框架视图容器中替换的片段。

我的问题是：如果用户在一个选项卡中生成一个后台堆栈，然后切换到另一个选项卡，如果在此状态下按下后退按钮-然后弹出后台堆栈，但**选项卡不会更改**，这会导致片段重叠（属于 Tab1 的 backstack 片段被弹出/添加，但 Tab2 仍然被选中，它的片段也是如此）。

有没有办法让操作栏选项卡对后退按钮做出反应，使其与片段后退堆栈平行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:57:21.527

`addBackStack("MainTab");`我通过使用我在 中选择的名称 ( )将选项卡添加到 backstack 来解决它`TabListener`，然后覆盖 Activity 中的`onBackPressed()`方法以在弹出 backstack 时识别选项卡何时更改（通过获取 top`BackStackEntry`的名称) 并`actionBar.setSelectedNavigationItem(position)`相应地使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T17:24:56.880

而不是使用`addToBackStack()`，覆盖`onBackPressed()`您的活动中的方法以自定义您希望后退键的行为方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-17T06:55:51.120

这对我有用:)

```
@Override
public void onBackPressed() {
    if (viewPager.getCurrentItem() == 0) {
        super.onBackPressed();
    }else {
        viewPager.setCurrentItem(0);
    }
} 
```

# python - Python：字符串索引超出范围

> ID：12677983
> 
> 赞同：1
> 
> 时间：2012-10-01T17:23:04.837
> 
> 标签：python, string, indexing, range, syntax-error

我看过很多以前提出的问题，但仍然找不到任何可以帮助我的东西。这是我为反转句子而编写的代码。我本可以使用 split() 函数，但无论如何我都试图不使用它。

```
s='abcdef ghij klmn op qrst uv w xy z'
s=s[::-1]
print s
j=0
p=''
while(j<len(s)):
    a=''
    while(s[j]!=''):
        a=a+s[j]
        j+=1
    p.append(a[::-1])
    j+=1
print p 
```

它在 while 括号中给了我一个字符串索引超出范围错误。为什么？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T17:26:56.173

因为在第二个 while 循环中，您正在递增`j`而不检查您是否已经结束。

此外，`s[j]!=''`对于字符串将始终如此。如果您可以在字符串上使用索引运算符，则意味着存在字符。否则没有。

例如：

```
s = ''
s[0]  # IndexError, there are no characters so there can be no index

s = 'x'
s[0]  # Will be x and s[1] will give the same error as above 
```

* * *

您的代码的一个更简单的版本（不是真正的 Pythonic，使用列表和使用会更好`' '.join()`）：

```
s = 'abcdef ghij klmn op qrst uv w xy z'
print s

p = ''
i = 0
word = ''
while i < len(s):
    c = s[i]
    if c == ' ':
        if p:
            p = word + ' ' + p
        else:
            p = word

        word = ''
    else:
        word += c
    i += 1

print p 
```

以及带有拆分的干净/简单的 Pythonic 版本：

```
s = 'abcdef ghij klmn op qrst uv w xy z'
print s
p = ' '.join(s.split()[::-1])
print p 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T17:36:07.807

我想你想这样做： -

```
s='abcdef ghij klmn op qrst uv w xy z'
s=s[::-1]
print s
j=0
p=[]
while(j<len(s)):
    a=''
    while(j<len(s) and s[j]!=' '):
        a=a+s[j]
        j+=1
    p.append(a[::-1])
    j+=1
print ' '.join(p) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T17:28:22.370

您的问题在于这个内部循环：

```
while(s[j]!=''):
    a=a+s[j]
    j+=1 
```

这个循环允许`j`超过 的长度`s`，你可能想在这里添加一个额外的条件来防止这种情况（我还删除了不必要的括号）：

```
while j < len(s) and s[j] != '':
    a=a+s[j]
    j+=1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T17:27:57.300

```
while(s[j]!=''):
        a=a+s[j]
        j+=1 
```

这是问题所在..您的最后一个字符是`z`..当它到达那里时，您的while条件为真..它会尝试递增`j`到下一个索引..超出范围..

您可能也可以将此条件移动到您的`outer`while 循环中。因为您需要同时检查这两个条件...在您的情况下，这两个条件都必须为真。

# c - 为什么这个 y/n 程序没有输出

> ID：12677984
> 
> 赞同：0
> 
> 时间：2012-10-01T17:23:05.400
> 
> 标签：c, string, conditional, stdin

我有一个小 C 程序的问题。它输出一个问题（见下面的代码），我可以将其输入（y 和 n），但随后什么也没有发生，即使它是为了根据输入的输入（y 或 n）打印一些东西。但是，在我的问题之后没有输出任何内容，程序就退出了。这是代码：

```
#include <stdio.h>

int main()
{
        char string [80];
        static char y;
        static char n;
        printf( "ARE YOU SHAQIRI? [y/n]: " );
        scanf( "%s", string );
        if ("%s" == "y")
                printf("That's impossible. YOU CANNOT BE SHAQIRI YOU IDIOT");
        else if ("%s" == "n")
              printf("I thought not.");
        fflush ( stdin );
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T17:26:00.123

您的比较中有两个问题`if ("%s" == "y")`：

*   `"%s"`是你的`scanf` *格式字符串*。如果`scanf`成功读取输入，则结果在您的变量中：`string`。
*   不要`==`用来比较字符串。你应该使用`strcmp`.

因为您在两个测试中都使用了这种形式的比较，所以`if`两个分支都不会执行，并且您看不到任何输出。

也别叫`fflush`了`stdin`。你可能打算`fflush(stdout)`在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T17:25:25.293

这不是您在 C 中比较字符串的方式，您需要使用`strcmp`. 此外，您需要比较变量`string`，而不是`"%s"`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T18:03:10.793

`scanf()`将返回值存储在第二个参数中。见[这里](http://www.cplusplus.com/reference/clibrary/cstdio/scanf/)。其次，您正在错误地比较字符串...使用[strcmp](http://www.cplusplus.com/reference/clibrary/cstring/strcmp/)

我只是把它扔在那里，以简化你的程序：

1.  使用单个字符存储单个字符输入
2.  你可以按照你现在想要的方式保持你的条件“==”
3.  删除了标准输入的 fflush，无论如何你都不应该这样做。
4.  为非 'y'/'n' 输入值添加了“catch all”案例。

这是修改后的代码：

```
#include <stdio.h>  
int main() {
    char input;
    printf( "ARE YOU SHAQIRI? [y/n]: " );
    input = getchar();
    if (input == 'y')
        printf("That's impossible. YOU CANNOT BE SHAQIRI YOU IDIOT");
    else if (input == 'n')
        printf("I thought not.");
    else
        printf("Not valid input...");
    return 0; 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-15T05:36:14.320

C 没有用于比较 char 数组的内置运算符，因此您调用`strcmp`，如下所示：

```
if(strcmp(string, "yes") == ) 
{
    /* User said yes */
} 
```

确保`#include <string.h>`

# web-services - Web 服务配置异常 LightSwitch

> ID：12677986
> 
> 赞同：1
> 
> 时间：2012-10-01T17:23:11.367
> 
> 标签：web-services, deployment, visual-studio-lightswitch

我在使用客户端使用 Web 服务使用部署应用程序时遇到问题。我关注了这篇文章

[http://code.msdn.microsoft.com/windowsdesktop/LightSwitch-Consuming-Web-c54979e0](http://code.msdn.microsoft.com/windowsdesktop/LightSwitch-Consuming-Web-c54979e0)

我尝试将其添加`ServiceReferences.ClientConfig`到`Web.config`相应的 serviceModel 部分，但我的应用程序的某些部分停止工作，但没有异常...

当应用程序尝试使用 WS 时，它会给我这个消息

```
Error al ejecutar la pantalla.
Detalles del error: [SFxConfigLoaderMultipleEndpointMatchesWildcard1]
Argumentos: ServiceAuxiliar.IAuxiliar
Las cadenas de recursos de depuración no están disponibles. La clave y los argumentos suelen proporcionar suficiente información para diagnosticar el problema. Vea http://go.microsoft.com/fwlink/?linkid=106663&Version=5.0.10411.00&File=System.ServiceModel.dll&Key=SFxConfigLoaderMultipleEndpointMatchesWildcard1 
```

# install4j - 是否可以从许可协议窗口中删除“install4j”文本

> ID：12677987
> 
> 赞同：3
> 
> 时间：2012-10-01T17:23:12.420
> 
> 标签：install4j

Install4j 让您可以选择在安装期间包含许可协议窗口。不幸的是，Next, Cancel 按钮上方的行前面带有单词“install4j”。有什么办法可以去掉这个吗？（注意：Destination 窗口似乎做同样的事情。所以真的有从所有拥有它的窗口中删除此行前缀的方法吗？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T08:12:10.257

转到安装程序-> 屏幕和操作并选择安装程序。

然后您可以禁用“将 install4j 水印添加到安装程序屏幕”属性或填写“自定义水印文本”属性。

# flash - 纺车？

> ID：12677998
> 
> 赞同：0
> 
> 时间：2012-10-01T17:23:38.970
> 
> 标签：flash, actionscript

我正在闪存中制作一个计数器。效果就像一台老虎机，有一列，其中包含两个带有数字的精灵（9,0,1,2,3,4,5,6,7,8）。我正在检查它们中的每一个的 y 位置，如果它们小于某个 y 值，那么我将它向下移动到另一个下方，以便它变得连续。无论如何 - 我有一个每 100 毫秒运行一次的计时器，每次它触发时都会将值更新 1。然后我想让数字滚动到那个位置，但是一切都很快，所以它一直来回跳动 =没有无缝循环。

有任何想法吗？

**更新说明**

该值不会仅增加 1，而是会在“tick”中增加“inpValue”。我将有 x 个股票代码，计数到一个递增的值（每次我的计时器触发时，例如每 100 毫秒），例如该值可以是“1.03”，下次计时器触发时它可以是类似的“1.14”。我把这个数字分成三个“列”=tickers，每个ticker都有它的值；股票 1：1 股票 2：1 股票 3：4

当ticker3 获得下一个“0”-value = 10 时，ticker2 应该更新为“2”，依此类推。问题是让数字滚动，所以如果数字第一次是“4”，下一次是“2”，它实际上应该滚动浏览那个之间的所有数字，依此类推，而不是跳回来排。

因此，例如，如果我将代码停止在值“1.14”，那应该是代码停止的值。

**编辑：代码**

```
package gui {
import flash.events.Event;
import com.greensock.TweenMax;
import com.greensock.easing.Linear;
import com.greensock.TweenLite;

import flash.display.MovieClip;
import flash.display.Sprite;

public class Ticker extends Sprite {

    public var windowBg_mc:MovieClip;

    private var _stepValue:int = 0;

    public var row1:MovieClip;
    public var row2:MovieClip;
    private var _activeRow:MovieClip;

    public var stopBtn:MovieClip;

    public function Ticker() {
        init(0);
    }

    private function init(val:int):void{

        this.addEventListener(Event.ENTER_FRAME, updateConnection);

        _stepValue = val;

        TweenMax.to(row2, 0, {tint: 0xff0000});

        _activeRow = row1;

        var yMoveTarget_num:Number = -(Number(_stepValue) * 34);

        TweenLite.to(_activeRow, 5, {y: yMoveTarget_num, ease: Linear.easeNone});

        updateConnection(null);
    }

    private function updateConnection(e:Event):void{

        if(_activeRow.y <= -342){
            _activeRow.y = 340;
            if( _activeRow == row1 ){
                _activeRow = row2;
            }else{
                _activeRow = row1;
            }
        }

        if( _activeRow == row1 ){
            row2.y = row1.y + 340;
        }else{
            row1.y = row2.y + 340;
        }

    }

    public function tick(inpValue:int):void{

        if(_stepValue == inpValue) return;

        var oldValue : int = _stepValue;
        _stepValue = inpValue;

        if( _stepValue < oldValue ){
            //target must be change here
        }

        var yMoveTarget_num:Number = -(Number(_stepValue) * 34);
        TweenLite.to(_activeRow, .4, {y: yMoveTarget_num, ease: Linear.easeIn});
    }

}
} 
```

而“tick”是每 100 毫秒调用一次的方法。