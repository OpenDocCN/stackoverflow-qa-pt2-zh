# StackOverflow 问答 16024000-16024999

# python - 程序超出运行时间限制，同时在 python 中找到非常大的因素

> ID：16024000
> 
> 赞同：0
> 
> 时间：2013-04-15T20:16:52.933
> 
> 标签：python

我正在尝试做一个问题来找到一个数字的因素。这个数字非常非常大。

我正在使用的代码如下：

```
def factors(n):
    result = []

    for i in range(1, n + 1):
        if n % i == 0:
            result.append(i)

    return result

print factors(5000000) 
```

如果我将数字更改为较小的数字，程序运行良好，但是当我增加数字时，它会引发错误。有没有什么办法解决这一问题 ？谢谢。

# javascript - 带有拉丁语和土耳其语字符的javascript中的正则表达式

> ID：16024001
> 
> 赞同：5
> 
> 时间：2013-04-15T20:16:53.793
> 
> 标签：javascript, regex, replace, turkish

我正在尝试替换所有非拉丁语/土耳其语字符，但是出了点问题，我找不到它。

例如：

```
var texto = '*istediğiniz*';
if (texto.match(/[^a-zA-Z0-9şŞıİçÇöÖüÜĞğ\- ]/g)){

    //only letters, numbers and turkish letters are allowed
    texto = texto.replace(/[^a-zA-Z0-9şŞıİçÇöÖüÜĞğ\- ]/g, ''); 
}

console.log(texto); 
```

结果，我的话输出不正确：`istediiniz`. 输出应该是`istediğiniz`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T20:26:00.430

将您的 javascript 文件编码为`utf-8`并将您的元标记更新为：

```
<meta http-equiv="content-type" content="text/html;charset=utf-8" /> 
```

# ios - 移动 UITableviewCell 时设置不透明度

> ID：16024004
> 
> 赞同：1
> 
> 时间：2013-04-15T20:16:59.830
> 
> 标签：ios, uitableview

在编辑模式下移动表格中的单元格时，单元格的不透明度设置为半透明。这是自动完成的，无需我进行任何设置。我想改变它，所以它不会改变不透明度。我需要单元格不透明，以便子视图清晰可见。我已经查看了单元格的`setSelected`、`setHighlighted`和`setBackgroundColor`方法，但是当我开始移动单元格时不会调用这些方法。

有任何想法吗？

谢谢

# objective-c - 使用 3 位小数格式化 cctime

> ID：16024005
> 
> 赞同：-2
> 
> 时间：2013-04-15T20:17:05.130
> 
> 标签：objective-c, cocos2d-iphone

我试图以秒为单位格式化此字符串，后跟 3 个小数点，例如 1.123。
我该怎么做呢？

```
-(void)update:(ccTime)dt {
totalTime += dt*1000;
currentTime = (int)totalTime;
if (myTime < currentTime)
{
    myTime = currentTime;
    [timeLabel setString:[NSString stringWithFormat:@"%i", myTime]];
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T20:21:49.007

您可以使用

```
 [NSString stringWithFormat:@"%.3f", someFloatOrDouble]; 
```

# c# - 如何查找 C# 类的内部属性？受保护？受保护的内部？

> ID：16024006
> 
> 赞同：10
> 
> 时间：2013-04-15T20:17:07.910
> 
> 标签：c#, system.reflection

如果我有一个`MyClass`如下的 C# 类：

```
using System.Diagnostics;

namespace ConsoleApplication1
{
    class MyClass
    {
        public int pPublic {get;set;}
        private int pPrivate {get;set;}
        internal int pInternal {get;set;}
    }
    class Program
    {
        static void Main(string[] args)
        {
            Debug.Assert(typeof(MyClass).GetProperties(
                System.Reflection.BindingFlags.Public |
                System.Reflection.BindingFlags.Instance).Length == 1);
            Debug.Assert(typeof(MyClass).GetProperties(
                System.Reflection.BindingFlags.NonPublic |
                System.Reflection.BindingFlags.Instance).Length == 2);
            // internal?
            // protected?
            // protected internal?
        }
    }
} 
```

上面编译的代码在没有任何断言失败的情况下运行。NonPublic 返回 Internal 和 Private 属性。[BindingFlags](http://msdn.microsoft.com/en-us/library/system.reflection.bindingflags.aspx)上似乎没有其他可访问性类型的标志。

如何获取仅包含内部属性的列表/数组？在相关说明中，但对于我的应用程序来说不是必需的，受保护或受保护的内部呢？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-15T20:36:29.397

当您使用 获取属性信息时，您可以分别`BindingFlags.NonPublic`使用`GetGetMethod(true)`和找到 getter 或 setter。`GetSetMethod(true)`然后，您可以检查（方法信息的）以下属性以获取确切的访问级别：

*   `propertyInfo.GetGetMethod(true).IsPrivate`意味着私人的
*   `propertyInfo.GetGetMethod(true).IsFamily`表示受保护
*   `propertyInfo.GetGetMethod(true).IsAssembly`意味着内部
*   `propertyInfo.GetGetMethod(true).IsFamilyOrAssembly`意味着受保护的内部
*   `propertyInfo.GetGetMethod(true).IsFamilyAndAssembly`意味着私人保护

当然，同样`GetSetMethod(true)`如此。

请记住，让其中一个访问器（getter 或 setter）比另一个更受限制是合法的。如果只有一个访问器，它的可访问性就是整个属性的可访问性。如果两个访问器都在那里，那么*最*容易访问的访问器会为您提供整个属性的可访问性。

用于`propertyInfo.CanRead`查看是否可以调用`propertyInfo.GetGetMethod`，使用`propertyInfo.CanWrite`用于查看是否可以调用`propertyInfo.GetSetMethod`。如果访问器不存在（或者如果它是非公共的并且您要求公共访问器），则and`GetGetMethod`方法`GetSetMethod`返回。`null`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-15T20:28:24.833

请参阅MSDN 上的[这篇文章](http://msdn.microsoft.com/en-us/library/ms173183.aspx)。

相关报价：

> C# 关键字 protected 和 internal 在 IL 中没有任何意义，也不会在反射 API 中使用。IL 中对应的术语是 Family 和 Assembly。要使用反射识别内部方法，请使用 IsAssembly 属性。要识别受保护的内部方法，请使用 IsFamilyOrAssembly。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-15T20:27:05.153

`GetProperties`with `System.Reflection.BindingFlags.NonPublic`flag 返回所有这些：`private`, `internal`,`protected`和`protected internal`.

# php - 如何让 HAproxy 返回下一个数据库服务器的 IP 地址？

> ID：16024011
> 
> 赞同：0
> 
> 时间：2013-04-15T20:17:19.567
> 
> 标签：php, mysql, haproxy

我想使用 HAproxy 来检查我的数据库服务器是否在线，而不是通过 HAproxy 框实际路由请求。有什么方法可以连接到 HAproxy 并让它返回一个数据库主机 IP 地址？

例如：从 webserver #1 我连接到端口 3306 上的 HAproxy。HAproxy 在 3306 上侦听并从 db 主机列表（循环）中回显 DB Host #1。然后从 webserver#1 我直接连接到 DB 主机#1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:24:29.870

您可以直接在 PHP 中执行此操作。

尝试这样的事情：

```
function get_connectable_host(array $hosts, $port, $timeout = 3)
{
    // Optionally randomise the order of the input array
    // This should help to ensure a relatively even distribution over time
    shuffle($hosts);

    // Create some vars
    $socks = $w = array();
    $r = $e = null;
    $flags = STREAM_CLIENT_CONNECT | STREAM_CLIENT_ASYNC_CONNECT;

    // Loop over the list of host addresses and send connect attempts to them
    // Store the host address with the created socket resource
    foreach ($hosts as $host) {
        $address = "tcp://$host:$port";
        $sock = stream_socket_client($address, $n, $s, $timeout, $flags);
        $socks[(int) $sock] = array($host, $sock);
        $w[] = $sock;
    }

    // Wait for at least one of the sockets to connect
    if (!stream_select($r, $w, $e, $timeout)) {
        return false; // Nothing connected successfully after the timeout
    }

    // Get the ID of the first socket that connected
    $result = (int) current($w);

    // Loop over the sockets and disconnect them all
    foreach ($socks as $sock) {
        stream_set_blocking($sock[1], 0); // set non-blocking or FIN will block
        stream_socket_shutdown($sock[1], STREAM_SHUT_RDWR);
        fclose($sock[1]);
    }

    // Return the successfully connected host address
    return $socks[$result][0];
}

$hosts = array(
    '192.168.0.1',
    '192.168.0.2',
    '192.168.0.3'
);
$port = 3306;
$timeout = 3; // Max number of seconds to wait for a connection

$hostToUse = get_connectable_host($hosts, $port, $timeout); 
```

这应该从提供的成功连接的数组中获取第一台主机的 IP 地址，并且一旦成功连接就会立即返回 - 它不会等待所有套接字返回，并且只有在所有套接字都返回时才会达到超时的主机无法连接。

本质上，这正是您希望 HAproxy 直接在 PHP 中为您做的事情。

使这项工作真正重要的部分是[`stream_socket_client()`](http://php.net/stream-socket-client)和。`STREAM_CLIENT_ASYNC_CONNECT`[`stream_select()`](http://php.net/stream-select)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T20:21:28.050

您始终可以运行此查询来确定主机名：

```
SHOW VARIABLES WHERE Variable_name = 'hostname'; 
```

[https://serverfault.com/a/129646/52951](https://serverfault.com/a/129646/52951)

# jquery - 使用 jQuery 旋转一个 div

> ID：16024015
> 
> 赞同：1
> 
> 时间：2013-04-15T20:17:30.110
> 
> 标签：jquery, html, jquery-animate, animate.css

我希望能够使用 jQuery 旋转一个 Div。我用纯 CSS 创建了效果 - 见这里

[http://jsfiddle.net/9twvF/](http://jsfiddle.net/9twvF/)

```
<div class="clientcontainer">
    <div class="clientcard hl">
        <div class="front face">Front Panel</div>
        <div class="back face center">Back Panel</div>
    </div>
</div>

.clientcontainer {
    position: relative;
    display: inline-block;
    width: 240px;
    height: 240px;
}

.clientcontainer {
    -webkit-perspective: 1000px;
    -moz-perspective: 1000px;
    -o-perspective: 1000px;
    -ms-perspective: 1000px;
    perspective: 1000px;
}

.clientcard {
    width: 100%;
    height: 100%;
    -webkit-transform-style: preserve-3d;
    -webkit-transition: all 0.5s linear;
    -moz-transform-style: preserve-3d;
    -moz-transition: all 0.5s linear;
    -o-transform-style: preserve-3d;
    -o-transition: all 0.5s linear;
    transform-style: preserve-3d;
    transition: all 0.5s linear;
    -ms-transform-style: preserve-3d;
    -ms-transition: all 0.5s linear;
}

.clientcontainer:hover .hl, .clientcontainer.hover_effect .hl {
    -webkit-transform: rotateY(-180deg);
    -moz-transform: rotateY(-180deg);
    -o-transform: rotateY(-180deg);
    -ms-transform: rotateY(-180deg);
    transform: rotateY(-180deg);
}

.face {
    position: absolute;
    width: 100%;
    height: 100%;
    -webkit-backface-visibility: hidden;
    -moz-backface-visibility: hidden;
    -o-backface-visibility: hidden;
    -ms-backface-visibility: hidden;
    backface-visibility: hidden;
    background-color: yellow;
    font-weight: bold;
}

.face.back {
    display: block;
    -webkit-transform: rotateY(180deg);
    -webkit-box-sizing: border-box;
    -moz-transform: rotateY(180deg);
    -moz-box-sizing: border-box;
    -o-transform: rotateY(180deg);
    -o-box-sizing: border-box;
    -ms-transform: rotateY(180deg);
    -ms-box-sizing: border-box;
    transform: rotateY(180deg);
    box-sizing: border-box;
    text-align: center;
    background-color: green;
    border: 1px solid #666;
} 
```

但不是使用 CSS 而是悬停在上面。我希望 jQuery 能够以相同的效果为 div 设置动画，但它可以通过单击按钮来实现。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:30:14.090

抱歉，我开始玩东西并想出了如何做到这一点

[http://jsfiddle.net/9twvF/5/](http://jsfiddle.net/9twvF/5/)

```
<div class="clientcontainer">
    <div class="clientcard hl">
        <div class="front face">Front Panel</div>
        <div class="back face center">Back Panel</div>
    </div>
</div>

<a href="#" id="rotate">rotate</a>

.clientcontainer {
    position: relative;
    display: inline-block;
    width: 240px;
    height: 240px;
}

.clientcontainer {
    -webkit-perspective: 1000px;
    -moz-perspective: 1000px;
    -o-perspective: 1000px;
    -ms-perspective: 1000px;
    perspective: 1000px;
}

.clientcard {
    width: 100%;
    height: 100%;
    -webkit-transform-style: preserve-3d;
    -webkit-transition: all 0.5s linear;
    -moz-transform-style: preserve-3d;
    -moz-transition: all 0.5s linear;
    -o-transform-style: preserve-3d;
    -o-transition: all 0.5s linear;
    transform-style: preserve-3d;
    transition: all 0.5s linear;
    -ms-transform-style: preserve-3d;
    -ms-transition: all 0.5s linear;
}

.face {
    position: absolute;
    width: 100%;
    height: 100%;
    -webkit-backface-visibility: hidden;
    -moz-backface-visibility: hidden;
    -o-backface-visibility: hidden;
    -ms-backface-visibility: hidden;
    backface-visibility: hidden;
    background-color: yellow;
    font-weight: bold;
}

.face.back {
    display: block;
    -webkit-transform: rotateY(180deg);
    -webkit-box-sizing: border-box;
    -moz-transform: rotateY(180deg);
    -moz-box-sizing: border-box;
    -o-transform: rotateY(180deg);
    -o-box-sizing: border-box;
    -ms-transform: rotateY(180deg);
    -ms-box-sizing: border-box;
    transform: rotateY(180deg);
    box-sizing: border-box;
    text-align: center;
    background-color: green;
    border: 1px solid #666;
}

$("#rotate").click(function() {
    $(".clientcard").css({
     '-webkit-transform' : 'rotateY(-180deg)',
     '-moz-transform' : 'rotateY(-180deg)',  
      '-ms-transform' : 'rotateY(-180deg)',  
       '-o-transform' : 'rotateY(-180deg)',  
          'transform' : 'rotateY(-180deg)'
    });
}); 
```

以防万一有人想要答案。我还会看看 jquery flip，它可能比我所做的更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T20:23:14.450

试试[jQuery Flippy](http://blog.guilhemmarty.com/flippy/)。我认为它应该可以帮助你实现你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T20:31:41.457

只需将 div 点击事件连接到 css 样式更改就可以了。

```
 $("div.button").click( function() {
     $("div.background").css('-webkit-transform', 'rotateY(-190deg)')
 }); 
```

# iphone - 如何设置 UIButtonTypeRoundedRect 按钮的背景颜色？

> ID：16024017
> 
> 赞同：1
> 
> 时间：2013-04-15T20:17:42.393
> 
> 标签：iphone, ios, uibutton

我试过`tintColor = [UIColor redColor]`了，它完成了这项工作，但它只在按下按钮时显示预期的颜色。

在[UIButtonTypeRoundedRect 类型的 UIButtons 的着色中，](https://stackoverflow.com/questions/2088254/coloration-of-uibuttons-of-type-uibuttontyperoundedrect)他们回答了同样的问题，但是您需要一个图像来实现它，**有没有办法在没有图像的情况下做到这一点？**

*   这就是我想要的：[图片](https://i.stack.imgur.com/uvNqn.png)

*   这是我使用图像得到的： [图像](https://i.stack.imgur.com/l2Aom.png)

记住...**没有图像！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:17:34.230

使用图像是一种方法，但我想您已经清楚在您的问题中您不希望使用图像。这是我以编程方式创建和着色的按钮。

```
UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];
btn.frame = CGRectMake(100, 100, 100,50);
[btn setTitle:@"Hello" forState:UIControlStateNormal];
[btn setBackgroundColor:[UIColor colorWithRed:128.0/255.0f green:0.0/255.0f blue:0.0/255.0f alpha:0.7]];
btn.frame = CGRectMake(100.0, 100.0, 120.0, 50.0);//width and height should be same value
btn.clipsToBounds = YES;

btn.layer.cornerRadius = 20;//half of the width
btn.layer.borderColor=[UIColor redColor].CGColor;
btn.layer.borderWidth=2.0f;

[self.view addSubview:btn]; 
```

您可以随心所欲地更改`[UIColor ColorWithRed:`wo，甚至可以使用`[UIColor redColor]`或任何其他您想做的事情。

这是一个屏幕截图：

![在此处输入图像描述](https://i.stack.imgur.com/TTYzA.png)

无法为圆形按钮添加背景颜色，将按钮类型更改为自定义，然后使用石英芯设置圆形按钮。因此，将其添加到您的项目中并将其导入到 .m 中，它应该可以工作。希望这对你有用。

要将按钮更改为类似于您显示的图像的内容，请将框架更改为：

```
btn.frame = CGRectMake(50.0, 100.0, 200.0, 50.0); 
```

并将半径更改为：

```
btn.layer.cornerRadius = 7; 
```

应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T20:24:12.023

您可以创建一个方法来`UIImage`从 a生成一个`UIColor`，然后将返回的图像设置为按钮的背景，例如：

```
- (UIImage *)imageWithColor:(UIColor *)color {
    CGRect rect = CGRectMake(0, 0, 1, 1);
    UIGraphicsBeginImageContext(rect.size);
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetFillColorWithColor(context, [color CGColor]);

    CGContextFillRect(context, rect);
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return image;
}

UIImage *image = [self imageWithColor:[UIColor colorWithRed:151.0/255.0
                                                      green:36.0/255.0
                                                       blue:40.0/255.0
                                                      alpha:1.0]];
[self.button setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
[self.button setBackgroundImage:image forState:UIControlStateNormal];
self.button.layer.cornerRadius = 6.0;
self.button.layer.borderWidth = 1.0;
self.button.layer.borderColor = [UIColor darkGrayColor].CGColor;
self.button.clipsToBounds = YES; 
```

使用这个我得到

![在此处输入图像描述](https://i.stack.imgur.com/sb76h.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T08:12:54.793

我应该这样做：

从 Internet 下载按钮图像或自己创建图像，使其看起来像您想要的样子。Photoshop 可能是您最好的选择。确保您有**透明背景**并将其保存为 .png。然后将其添加到您的 xcode 项目中。制作按钮：

```
UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];
    [btn setBackgroundImage:[UIImage imageNamed:@"yourImage.png"] forState:UIControlStateNormal];
    [btn addTarget:self action:@selector(buttonAction)
         forControlEvents:UIControlEventTouchDown];
    [btn setTitle:@"Use it!" forState:UIControlStateNormal];
    btn.contentHorizontalAlignment = UIControlContentHorizontalAlignmentCenter;
    btn.titleLabel.font = [UIFont systemFontOfSize:20];
    btn.frame = CGRectMake(position and size of your button);
    [self.view addSubview:btn]; 
```

yourImage.png 需要替换为您的图像名称。

这`buttonAction`是您的按钮在被点击时执行的操作。如果你只是添加：

```
- (void) buttonAction
{

} 
```

在文件中的任何位置，您在这些括号之间添加的任何内容都将被执行。

确保按钮的大小与 按钮的大小相同`CGRect`，以确保它看起来没有被拉长或任何您不希望它看起来像的东西。

如果您有任何问题，请随时问他们。

希望这对你有帮助

# c# - 为自定义控件使用绑定时如何允许默认值

> ID：16024028
> 
> 赞同：2
> 
> 时间：2013-04-15T20:18:58.823
> 
> 标签：c#, wpf, xaml, .net-4.0, styles

全部，我正在开发我们的自定义控件，该控件具有`Border`以下`Background`设置

```
<LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
    <GradientStop Color="#FFF7F7F7" Offset="0.164" />
    <GradientStop Color="#FFDBDBDB" Offset="0.664" />
    <GradientStop Color="#FFB3B3B3" Offset="0.978" />
</LinearGradientBrush> 
```

但是，我想允许用户覆盖它。我创建了 type 的依赖属性`Brush`，但是我无法弄清楚如何绑定到背景，同时在 XAML 中仍然具有此默认值。这甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T20:22:14.337

看看[TemplateBinding 标记扩展](http://msdn.microsoft.com/en-us/library/ms742882.aspx)

```
<Style TargetType="{x:Type your:YourControl}">
    <Setter Property="Background">
        <Setter.Value>
            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                <GradientStop Color="#FFF7F7F7" Offset="0.164" />
                <GradientStop Color="#FFDBDBDB" Offset="0.664" />
                <GradientStop Color="#FFB3B3B3" Offset="0.978" />
            </LinearGradientBrush>
        </Setter.Value>
    </Setter> 
```

然后在您的默认 ControlTemplate 的某些部分：

```
<Border Background="{TemplateBinding Background}">
  ....
</Border> 
```

这将允许消费者覆盖默认背景，同时保持样式定义的背景：

```
<your:YourControl/> <!-- Will use default Background -->

<your:YourControl Background="Green"/> <!-- will have Green background --> 
```

# java - Android 上的 HtmlUnit 问题

> ID：16024029
> 
> 赞同：0
> 
> 时间：2013-04-15T20:18:59.747
> 
> 标签：java, android, htmlunit

我在 Android 上使用 HtmlUnit 时遇到问题。

```
protected Boolean doInBackground(Void... params) {
    WebClient webClient = new WebClient();
    return true;
} 
```

这个简单的代码会导致强制关闭并导致以下错误：

```
04-15 20:07:28.266: E/dalvikvm(856): Could not find class 'com.gargoylesoftware.htmlunit.WebClient', referenced from method com.synkronus.deeproute.LoginActivity$UserLoginTask.doInBackground 
```

稍后：

```
04-15 20:07:30.031: E/AndroidRuntime(856): FATAL EXCEPTION: AsyncTask #1
04-15 20:07:30.031: E/AndroidRuntime(856): java.lang.RuntimeException: An error occured while executing doInBackground()
04-15 20:07:30.031: E/AndroidRuntime(856):  at android.os.AsyncTask$3.done(AsyncTask.java:200)
04-15 20:07:30.031: E/AndroidRuntime(856):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
04-15 20:07:30.031: E/AndroidRuntime(856):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
04-15 20:07:30.031: E/AndroidRuntime(856):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
04-15 20:07:30.031: E/AndroidRuntime(856):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
04-15 20:07:30.031: E/AndroidRuntime(856):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
04-15 20:07:30.031: E/AndroidRuntime(856):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
04-15 20:07:30.031: E/AndroidRuntime(856):  at java.lang.Thread.run(Thread.java:1096)
04-15 20:07:30.031: E/AndroidRuntime(856): Caused by: java.lang.NoClassDefFoundError: com.gargoylesoftware.htmlunit.WebClient
04-15 20:07:30.031: E/AndroidRuntime(856):  at com.synkronus.deeproute.LoginActivity$UserLoginTask.doInBackground(LoginActivity.java:204)
04-15 20:07:30.031: E/AndroidRuntime(856):  at com.synkronus.deeproute.LoginActivity$UserLoginTask.doInBackground(LoginActivity.java:1)
04-15 20:07:30.031: E/AndroidRuntime(856):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
04-15 20:07:30.031: E/AndroidRuntime(856):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
04-15 20:07:30.031: E/AndroidRuntime(856):  ... 4 more 
```

我的困惑源于“找不到类 'com.gargoylesoftware.htmlunit.WebClient'”错误，即使我已将 HtmlUnit jar 添加到 Eclipse 中的构建路径中并且我可以清楚地看到“缺失”类我的引用库中的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T14:54:07.530

我在某个地方读到你不应该在 Android 下使用 HTMLUnit，因为它非常大（10+ jars）但我可能是错的

# c# - 拆分字符串时令人困惑的错误

> ID：16024030
> 
> 赞同：3
> 
> 时间：2013-04-15T20:19:00.947
> 
> 标签：c#, asp.net-mvc-3, split

我有这行代码：

`string[] ids = Request.Params["service"].Split(",");`

中的值`Request.Params["service"]`是：`"1,2"`

为什么我得到：

```
Error   1   The best overloaded method match for 'string.Split(params char[])' has some invalid arguments
Error   2   Argument 1: cannot convert from 'string' to 'char[]' 
```

这对我来说毫无意义......

错误发生在等号右侧的所有内容上

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-15T20:20:30.797

您需要传递一个字符 ( `System.Char`)，而不是`string`:

```
string[] ids = Request.Params["service"].Split(','); 
```

没有重载[`String.Split`](http://msdn.microsoft.com/en-us/library/y7h14879.aspx)需要 a`params string[]`或 single `string`，这是使您的代码正常工作所必需的。

如果你想用一个字符串（或多个字符串）分割，你需要使用 a`string[]`并指定分割选项：

```
string[] ids = Request.Params["service"].Split(new[]{","}, StringSplitOptions.None); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T20:20:24.537

您必须将重载与[`params Char[]`](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)：

```
string[] ids = Request.Params["service"].Split(','); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T20:41:10.373

正如其他人在这里所说，您提供的 (",") 双引号表示一个字符串，Split 函数接受一个字符数组或 char[]。使用 (',') ，单引号表示一个字符。您还可以传递 StringSplitOptions，如果您碰巧在 string[] 中得到空值，则需要一个 char[] 与它一起传递，如下所示。

```
 string splitMe = "test1,test2,";
        string[] splitted1 = splitMe.Split(',');
        string[] splitted2 = splitMe.Split(new char[]{','},StringSplitOptions.RemoveEmptyEntries);
        //Will be length 3 due to extra comma
        MessageBox.Show(splitted1.Length.ToString());
        //Will be length 2, Removed the empty entry since there was nothing after the comma
        MessageBox.Show(splitted2.Length.ToString()); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-15T20:20:36.077

在行 `Request.Params["service"].Split(",");`

你正在分裂`","`而不是`','`

该`.Split()`方法采用字符数组，而不是字符串

# asp.net-mvc-3 - 我在提交 MVC 3 时丢失了数据

> ID：16024034
> 
> 赞同：0
> 
> 时间：2013-04-15T20:19:17.590
> 
> 标签：asp.net-mvc-3, object, submit

我有一个带有实体框架的 MVC 3 应用程序。

在我的页面中，我使用了一个自定义模型，其中包含我使用的所有对象。页面完美呈现，但是当我按下提交按钮时，我的对象丢失了数据。

这是我的自定义模型：

```
public class ControleAcessoModel
{    
    private List<Controle> controles = new List<Controle>();

    public GRUPO_ACESSO_TB grupo_acesso_tb { get; set; }
    public List<Controle> Controles 
    {
        get 
        { 
            return controles; 
        } 
    }

    public void AddTela(byte id, string nome)
    {
        Controle ctrl = new Controle();
        ctrl.ID_TELA = id;
        ctrl.NM_TELA = nome;
        controles.Add(ctrl);
    }

    public class Controle
    {
       public bool Selecionado { get; set; }
       public byte ID_TELA { get; set; }
       public string NM_TELA { get; set; }
       public bool FL_SALVAR { get; set; }
       public bool FL_ALTERAR { get; set; }
       public bool FL_EXCLUIR { get; set; }
    }
} 
```

这是我的 Razor Html 代码：

```
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <table>
        <tr>
            <th>Salvar</th>
            <th>Editar</th>
            <th>Excluir</th>
            <th>Tela</th>
        </tr>
        @foreach (var item in Model.Controles)
        {
        <tr>
            <td style="text-align: center">
                @Html.EditorFor(modelItem => item.FL_SALVAR)
            </td>
            <td style="text-align: center">
                @Html.EditorFor(modelItem => item.FL_ALTERAR)
            </td>
            <td style="text-align: center">
                @Html.EditorFor(modelItem => item.FL_EXCLUIR)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.NM_TELA)
            </td>
        </tr>
        }
        </table>        
        <p>
            <input type="submit" value="Salvar" />
        </p>
} 
```

这是我的创建代码，我将数据放在数据库中。在这部分，我的对象 controleacessomodel 是空的。

```
[HttpPost]
public ActionResult Create(ControleAcessoModel controleacessomodel, byte id)
{
    if (ModelState.IsValid)
    {
        for (int i = 0; i < controleacessomodel.Controles.Count; i++)
        {
            if (ValidaSelecao(controleacessomodel.Controles[i]))
            {
                PERMISSAO_GRUPO_ACESSO_TELA_TB permissao = new PERMISSAO_GRUPO_ACESSO_TELA_TB();
                permissao.ID_GRUPO_ACESSO = controleacessomodel.grupo_acesso_tb.ID_GRUPO_ACESSO;
                permissao.ID_TELA = controleacessomodel.Controles[i].ID_TELA;
                permissao.FL_SALVAR = controleacessomodel.Controles[i].FL_SALVAR;
                permissao.FL_ALTERAR = controleacessomodel.Controles[i].FL_ALTERAR;
                permissao.FL_EXCLUIR = controleacessomodel.Controles[i].FL_EXCLUIR;
                db.PERMISSAO_GRUPO_ACESSO_TELA_TB.AddObject(permissao);
            }
        }                
        db.SaveChanges();
        return RedirectToAction("Edit", "GrupoAcesso", new { id = id });
    }

    return View(controleacessomodel);
} 
```

为什么我的对象在提交后是空的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T20:49:17.203

不可能使用`Foreach`循环构造，因为生成的 id 将不正确，因此 MVC 无法将值映射回模型。您需要改用`for`循环：

```
@for (int i = 0 ; i < Model.Controles.Count; i++)
{
<tr>
    <td style="text-align: center">
        @Html.EditorFor(m => m.Controles[i].FL_SALVAR)
    </td>
    <td style="text-align: center">
        @Html.EditorFor(m => m.Controles[i].FL_ALTERAR)
    </td>
    <td style="text-align: center">
        @Html.EditorFor(m => m.Controles[i].FL_EXCLUIR)
    </td>
    <td>
        @Html.DisplayFor(m => m.Controles[i].NM_TELA)
    </td>
</tr>
} 
```

Phil Haack 写了一篇很好的[博客文章](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)。Scott Hanselman 也写了一篇不错[的文章](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)。

# vb.net - 我正在尝试添加和更新数据库我的代码的添加部分工作正常，但更新给我一个错误，说无效的列名

> ID：16024037
> 
> 赞同：-3
> 
> 时间：2013-04-15T20:19:24.560
> 
> 标签：vb.net

```
Private Sub Btnadd_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Btnadd.Click
    Dim cmd As New SqlCommand
    If Not cnn.State = ConnectionState.Open Then
        'open connection if it is not yet open
        cnn.Open()
    End If

    cmd.Connection = cnn
    'check whether add new or update
    If Me.Txtproductname.Tag & "" = "" Then
        'add new 
        'add data to table
        cmd.CommandText = "INSERT INTO stock(product_name, product_id, unit,price, item_type, date_in) " & _
                        " VALUES('" & Me.Txtproductname.Text & "','" & Me.Txtproductid.Text & "','" & _
                        Me.txtunit.Text & "','" & Me.txtprice.Text & "','" & _
                        Me.Txtitem_type.Text & "','" & Me.txtdate_in.Text & "')"
        cmd.ExecuteNonQuery()
    Else
        'update data in table
        cmd.CommandText = "UPDATE stock " & _
                    " SET product_name=" & Me.Txtproductname.Text & _
                    ", product_id='" & Me.Txtproductid.Text & "'" & _
                    ", unit='" & Me.txtunit.Text & "'" & _
                    ", price='" & Me.txtprice.Text & "'" & _
                    ", item_type='" & Me.Txtitem_type.Text & "'" & _
                    ", date_in='" & Me.txtdate_in.Text & "'" & _
                    " WHERE product_name=" & Me.Txtproductname.Tag
        cmd.ExecuteNonQuery()
    End If
    'refresh data in list
    RefreshData()
    'clear form
    Me.Btnclear.PerformClick()

    'close connection
    cnn.Close()
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T20:24:31.380

错误可能在您查询的这一部分

```
 SET product_name=" & Me.Txtproductname.Text & 
```

它没有用单引号括起来。

但是让我说，这种插入或更新的方式确实是错误的。

*   首先，如果您的任何文本字段包含单引号，则会出现语法错误
*   其次，您将代码暴露给用户编写的任何恶意文本 [参见 Sql Injection](https://stackoverflow.com/questions/332365/how-does-the-sql-injection-from-the-bobby-tables-xkcd-comic-work)

处理更新或插入的正确方法是通过参数化查询。
例如，这可以用于更新

```
cmd.CommandText = "UPDATE stock " & _
                  " SET product_name=@prodName " & _
                  ", product_id=@prodID" & _
                  ", unit=@unit" & _
                  ", price=@price" & _
                  ", item_type=@itemType" & _
                  ", date_in=@date" & _
                  " WHERE product_name=@prodTag"
cmd.Parameters.AddWithValue("@prodName", Me.Txtproductname.Text)
cmd.Parameters.AddWithValue("@prodID", Me.Txtproductid.Text)
cmd.Parameters.AddWithValue("@unit", Me.txtunit.Text)
cmd.Parameters.AddWithValue("@price", Me.txtprice.Text)
cmd.Parameters.AddWithValue("@itemType", Me.Txtitem_type.Text)
cmd.Parameters.AddWithValue("@date", Me.txtdate_in.Text)
cmd.Parameters.AddWithValue("@prodTag", Me.Txtproductname.Tag)
cmd.ExecuteNonQuery() 
```

通过这种方式，您可以让框架代码处理文本框的正确解析，并防止将意外命令传递到数据库的任何可能性。

除此之外，我想询问您的数据库字段是否真的都是字符串类型。
有些字段似乎是不同类型的，例如`date_in`和`price`。
如果这些字段不是文本类型，那么您应该添加一个转换

```
cmd.Parameters.AddWithValue("@date", Convert.ToDateTime(Me.txtdate_in.Text)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T20:24:47.190

您在更新`'`后忘记了单引号。`product_name`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T20:27:28.533

听起来可能很愚蠢，但它没有指定无效的列名吗？

您是否需要在 SET 和 Where 子句中围绕 product_name 的值进行单个抽动？

# windows - 无法使用 pymssql 将 Unicode 发送到 SQL Server

> ID：16024041
> 
> 赞同：4
> 
> 时间：2013-04-15T20:19:59.310
> 
> 标签：windows, unicode, python-2.7, pymssql

我在通过 pymssql 向 SQL Server 发送 unicode 时遇到问题：

```
In [1]:     import pymssql
            conn = pymssql.connect(host='hostname', user='me', password='password', database='db')
            cursor = conn.cursor()

In [2]:     s = u'Monsieur le Curé of the «Notre-Dame-de-Grâce» neighborhood'

In [3]:     s
Out [3]:    u'Monsieur le Cur\xe9 of the \xabNotre-Dame-de-Gr\xe2ce\xbb neighborhood'

In [4]:     cursor.execute("INSERT INTO MyTable VALUES(%s)", s.encode('utf-8'))
            cursor.execute("INSERT INTO MyTable VALUES(" + s.encode('utf-8') + "')")
            conn.commit() 
```

两个执行语句在 SQL Server 端产生相同的乱码文本：

```
'Monsieur le CurÃ© of the Â«Notre-Dame-de-GrÃ¢ceÂ» neighborhood' 
```

也许我的编码方式或语法有问题。有人建议使用存储过程，但我希望不必走那条路。

[这](https://stackoverflow.com/questions/4791114/python-to-mssql-encoding-problem)似乎是一个非常相似的问题，没有真正的回应。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T22:03:49.410

最终改用 pypyodbc 。需要一些帮助来[连接](https://stackoverflow.com/questions/16024956/connecting-to-sql-server-with-pypyodbc)，然后使用[doc recipe](https://code.google.com/p/pypyodbc/wiki/A_HelloWorld_sample_to_access_mssql_with_python)来执行语句：

```
import pypyodbc
conn = pypyodbc.connect("DRIVER={SQL Server};SERVER=my_server;UID=MyUserName;PWD=MyPassword;DATABASE=MyDB")
cur = conn.cursor
cur.execute('''INSERT INTO MyDB(rank,text,author) VALUES(?,?,?)''', (1, u'Monsieur le Curé of the «Notre-Dame-de-Grâce» neighborhood', 'Charles S.'))
cur.commit() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-30T21:25:56.087

遇到与 pymssql 相同的问题，不想切换到 pypyodbc

对我来说，删除任何口音是没有问题的，因为我只需要名字作为参考。所以这个解决方案可能并不适合所有人。

```
import unicodedate
firstName = u'René'
firstName = unicodedata.normalize('NFKD', firstName).encode('ascii', 'ignore')
print firstName 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-27T02:54:38.307

以下代码示例已经过测试和验证，可以使用 pymssql 2.1.1 与 Python 2.7.5 和 Python 3.4.3 一起使用。

对于使用 UTF-8 编码保存的 Python 源文件：

```
# -*- coding: utf-8 -*-
import pymssql

cnxn = pymssql.connect(
    server='localhost',
    port='52865',
    user='sa',
    password='whatever',
    database='myDb')
crsr = cnxn.cursor()
crsr.execute("INSERT INTO MyTable (textcol) VALUES (%s)", (u'Monsieur le Curé of the «Notre-Dame-de-Grâce» neighborhood'))
cnxn.commit()
crsr.close()
cnxn.close() 
```

对于使用“ANSI”（Windows-1252）编码保存的 Python 源文件：

```
# -*- coding: windows-1252 -*-
import pymssql

cnxn = pymssql.connect(
    server='localhost',
    port='52865',
    user='sa',
    password='whatever',
    database='myDb')
crsr = cnxn.cursor()
crsr.execute("INSERT INTO MyTable (textcol) VALUES (%s)", (u'Monsieur le Curé of the «Notre-Dame-de-Grâce» neighborhood'))
cnxn.commit()
crsr.close()
cnxn.close() 
```

请注意，两个样本之间的唯一区别是声明源文件编码的第一行。

需要明确的是，接收 INSERT 的表是：

```
CREATE TABLE [dbo].[MyTable](
    [id] [int] IDENTITY(1,1) NOT NULL,
    [textcol] [nvarchar](255) NULL,
PRIMARY KEY CLUSTERED 
(
    [id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-25T06:42:50.547

这是对我有用的东西：

```
# -*- coding: utf-8 -*-
import pymssql
conn = pymssql.connect(host='hostname', user='me', password='password', database='db')
cursor = conn.cursor()

s = u'Monsieur le Curé of the «Notre-Dame-de-Grâce» neighborhood'

cursor.execute("INSERT INTO MyTable(col1) VALUES(%s)", s.encode('latin-1', "ignore"))
conn.commit()
cursor.close()
conn.close() 
```

*MyTable*是排序规则：Latin1_General_CI_AS 并且其中的列*col1*是 varchar(MAX) 类型

我的环境是：SQL Server 2008 & Python 2.7.10

# r - 在 R 中应用：对自己先前的结果进行操作的递归函数

> ID：16024046
> 
> 赞同：5
> 
> 时间：2013-04-15T20:20:18.233
> 
> 标签：r, apply, cumsum

如何应用在按行操作时可以“看到”前面结果的函数？

这出现了很多，但我目前的问题需要学生的运行总数，如果总数没有达到 5，则重置。

示例数据：

```
> df

row   Student Absent Consecutive.Absences                             
1        A       0                    0                              
2        A       1                    1                              
3        A       1                    2                              
4        A       0                    0 <- resets to zero if under 5
5        A       0                    0                              
6        A       1                    1                              
7        A       1                    2                              
8        A       1                    3                              
9        B       1                    1 <- starts over for new factor (Student)
10       B       1                    2                              
11       B       0                    0                              
12       B       1                    1                              
13       B       1                    2                              
14       B       1                    3                              
15       B       1                    4                              
16       B       0                    0                              
17       B       1                    1                              
18       B       1                    2                              
19       B       1                    3                              
20       B       1                    4                              
21       B       1                    5                              
22       B       0                    5 <- gets locked at 5
23       B       0                    5                              
24       B       1                    6                              
25       B       1                    7 
```

我试过用一个巨大的移位向量矩阵来做到这一点。

我已经尝试使用 apply 系列函数来执行此操作，其中一半什么都不做，另一半达到 16GB 的 RAM 并使我的计算机崩溃。

我试过直接循环，需要 4 个多小时（这是一个大数据集）

令我困扰的是这在 Excel 中是多么容易。通常，R 在速度和可写性方面都围绕 Excel 运行，这让我相信我在这里遗漏了一些基本的东西。

甚至忘记这个更具挑战性的（“锁定在 5”）功能，我什至无法获得重置的 cumsum。我无法想到像这样对 ave 进行分组的因素组合：

```
Consecutive.Absences = ave(Absent, ..., cumsum) 
```

显然，对学生进行分组只会给出总累积缺勤 - 它“记住”孩子因 ave 中的拆分和重组而缺席的间隙。

所以正如我所说，我在 R 中不知道该怎么做的核心是：
如何应用一个在按行操作时可以“看到”前面结果的函数？

在 Excel 中很容易：

```
C3 = IF($A3=$A2,$B3+$C2,$B3)*$B3 
```

此 excel 函数显示时没有 5-absence 锁定，以便于阅读。

一旦我弄清楚如何应用一个函数来查看 R 中相同函数的先前结果，我将能够找出其余的。

提前感谢您的帮助——这在我的许多应用程序中都非常有用！

真的，山姆

* * *

更新：
谢谢大家关于如何识别学生是否连续缺勤 5 次的想法！

但是，这在 STUDENTS 表的数据库中很容易做到。我需要知道的是学生在出勤记录本身中连续缺勤的次数，例如“我们在计算其他汇总统计数据时是否计算这个特定的出勤记录？”

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T21:02:52.243

如果您希望在使用前一个元素的值的同时将函数应用于向量中的每个元素，您可能需要查看“Reduce”，并将累积参数设置为 True

这是一个例子：

```
##define your function that takes two parameters
##these are the 'previous' and the 'current' elements
runSum <- function(sum, x){
    res = 0
    if (x == 1){
        res = sum + 1
    }
    else if (x == 0 & sum < 5){
        res = 0
    }
    else{
        res = sum
    }
    res
}

#lets look at the absent values from subject B
x = c(1, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1)

Reduce(x=x, f=runSum, accumulate=T) 
# [1] 1 2 0 1 2 3 4 0 1 2 3 4 5 5 5 6 7 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T20:52:06.117

识别一次或多次运行 5 的学生相当容易：

```
 tapply(dfrm$Absent, dfrm$Student, function(x) rle(x)$value[rle(x)$length >=5] )
$A
integer(0)

$B
[1] 1 
```

在结果中查找“1”的任何值：

```
tapply(dfrm$Absent, dfrm$Student, function(x) 1 %in% rle(x)$value[rle(x)$length >=5] )
    A     B 
FALSE  TRUE 
```

我也努力通过减少解决方案（但优先于@kithpradhan）：

```
ave(dfrm$Absent, dfrm$Student, 
           FUN= function(XX) 
              Reduce(function(x,y) if( x[1] >= 5){  y+x[1]
                                           } else{ x[1]*y+y } ,  #Resets to 0 if y=0
                 XX, accumulate=TRUE) 
    )
#[1] 0 1 2 0 0 1 2 3 1 2 0 1 2 3 4 0 1 2 3 4 5 5 5 6 7 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-26T10:21:09.627

作为记录，您还可以创建自己的`Reduce`-derivative 接收`f`and `x`，并应用于`f(x)`其输出，直到达到`x == f(x)`or `maxiter`：

```
ireduce = function(f, x, maxiter = 50){
  i = 1
  while(!identical(f(x), x) & i <= maxiter) {x = f(x); i = i+1}; x
} 
```

# sql - SQL Server 转置（可能是转置？）多行到一列

> ID：16024049
> 
> 赞同：0
> 
> 时间：2013-04-15T20:20:26.670
> 
> 标签：sql, sql-server, transpose, unpivot

我的情况是这样的：

我有 400 名用户（行）回答 76 个问题（列）的调查。这些用户在数据库中已经有一个 ID。我创建了一个表格，其中包含每个公司的问题，每个问题都有自己的 ID。所以现在我需要将问题 ID 与每个用户 ID 的答案结合起来。

当我导入时，列标题需要是：

```
User ID   |  Question ID  |  Answer
xxxxxxx   | xxxxxxxxxxxxx | xxxxxxxxxx 
```

代替：

```
User ID  |  Question ID 1 | Question ID 2 | Question ID 3 | etc...
xxxxxx   | xxxxx          | xxxxx         | xxxxx         | ... 
```

感谢您提供任何和所有帮助，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T20:25:54.287

听起来您想取消数据透视。根据您的 SQL Server 版本，可以通过多种方式完成此操作。

如果您使用的是 SQL Server 2005+，则可以使用将列转换为行的 UNPIVOT 函数：

```
select userid, questionid, answer
from yourtable
unpivot
(
  answer
  for questionId in (QuestionId1, QuestionId2)
) unpiv; 
```

如果您使用的是 SQL Server 2008+，则可以使用 UNPIVOT 函数，但也可以使用 CROSS APPLY 和 VALUES 将数据从列转换为行：

```
select t.userid, c.questionid, c.answer
from yourtable t
cross apply
(
  values 
    ('QuestionId1', QuestionId1),
    ('QuestionId2', QuestionId2),
    ...
) c (questionId, answer); 
```

然后，如果您有未知数量的列需要转换为行，那么您可以使用动态 SQL 来获取结果：

```
DECLARE @colsUnpivot AS NVARCHAR(MAX),
   @query  AS NVARCHAR(MAX)

select @colsUnpivot = stuff((select ','+quotename(C.name)
         from sys.columns as C
         where C.object_id = object_id('yourtable') and
               C.name != 'userid'
         for xml path('')), 1, 1, '')

set @query 
  = 'select userid, questionid, answer
     from yourtable
     unpivot
     (
        answer
        for questionid in ('+ @colsunpivot +')
     ) u'

exec(@query); 
```

作为旁注，当您执行这种类型的转换时，被转换为行的列的数据必须是相同的数据类型。例如，如果 Question1 和 Question2 是不同的数据类型，那么您需要在 unpivot 之前转换它们，类似于：

```
select userid, questionid, answer
from
(
  select userid, 
    cast(questionid1 as varchar(10)) questionid1,
    cast(questionid2 as varchar(10)) questionid2
  from yourtable
) src
unpivot
(
  answer
  for questionId in (QuestionId1, QuestionId2)
) unpiv; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T20:36:54.230

您可以在 MSSQL 2005 或更高版本中使用 unpivot：

```
SELECT [User ID], [Question ID], [Question Reponse]
FROM 
   (SELECT [User ID], [Question 1], [Question 2]
   FROM pvt) p
UNPIVOT
   ([Question Reponse] FOR [Question ID] IN 
      ([Question 1], [Question 2])
)AS unpvt; 
```

来自：[用户 ID] int ,[问题 1] VARCHAR(100) ,[问题 2] VARCHAR(100)

结果：

```
| USER ID | QUESTION ID | QUESTION REPONSE |
--------------------------------------------
|       1 |  Question 1 |             Blah |
|       1 |  Question 2 |         BlahBlah |
|       2 |  Question 1 |         MoreBlah |
|       3 |  Question 1 |      No Response |
|       3 |  Question 2 |             Else | 
```

[SQL小提琴](http://sqlfiddle.com/#!3/ab643/1)

# c# - 是否可以为 Sharepoint 中的所有列表项操作创建一个表单页面？

> ID：16024054
> 
> 赞同：1
> 
> 时间：2013-04-15T20:20:59.367
> 
> 标签：c#, sharepoint-2010

抱歉，如果这属于 SP SE，请迁移。

如果我的术语不正确，我会提前道歉，这对我来说是全新的。我有一个我正在帮助维护的 Sharepoint。Sharepoint 具有构成 Sharepoint 上的 Sharepoint 列表/列表项的自定义代码 (WSP)，这些是通过代码 (.net C#) 创建的。据我所见，除了创建用于创建新列表项和定义列表项的表单外，您还为每个列表项操作设置了 url（即，当您单击列表项旁边的复选框时，功能区栏有用于“查看”和“编辑”的按钮，理论上您应该将其设置为表单页面 url，例如 ViewItem.aspx、EditItem.aspx 等）。我可以创建一个不同的页面来查看列表项，并创建一个不同的页面来编辑我的自定义列表的列表项，

创建一个与编辑页面完全相同的逻辑的副本页面，加上几行额外的代码来禁用字段一旦被填充，这似乎是非常多余的。还有其他方法（例如以某种方式更改由 Sharepoint 生成的查询字符串，以便我可以添加自己的标志以指示用户正在“查看”表单而不是编辑它）？我能够使用同一页面进行编辑和新表单，因为当您编辑列表项时 SP 将列表项“ID”添加到查询字符串参数中，但我没有看到我可以关闭的参数以指示表单应该以“查看”模式打开。

# python - 在 Python 中获取 numpy/scipy 中的日志比率

> ID：16024055
> 
> 赞同：1
> 
> 时间：2013-04-15T20:21:01.727
> 
> 标签：python, numpy, floating-point, scipy, logarithm

我正在尝试计算两个对数值的比率，`a`然后`b`将其转换回非对数值。由于这些是对数值，因此比率`c`为：

```
from numpy import *
c = a - b
# convert to non-log value
val = exp(c) 
```

考虑这个例子：

```
a = -336929.42757
b = -334216.16795 
```

由于这些是对数值，因此比率为：

```
c = -2713.259620000026 
```

然后我将比率转换为非对数值并得到`0`：

```
val = exp(c) 
```

我怎样才能避免这种情况？在没有这种行为的情况下，获取两个日志的比率并转换回非日志的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T20:31:05.030

好吧，您期望的数字太小而无法使用`float`. 例如，在我的系统中：

```
In : sys.float_info.min_exp
Out: -1021 
```

因此，你得到 0.0

如果您只想将其与某个截止值进行比较，您仍然可以使用结果 0。在您的情况下，“真实”不可表示的数字与 0 一样好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T20:35:44.760

问题显然是 exp(-2713.259620000026) 不能很好地用浮点数表示。但由于您知道号码的日志，您可以执行以下操作：

```
c10 = c/log(10.) 
```

所以

```
x = 10**c10 
```

或者，但将整数和小数部分分开：

```
x = 4.29 x 10^(-1179) 
```

# version-control - 在云中发布 TFS

> ID：16024057
> 
> 赞同：0
> 
> 时间：2013-04-15T20:21:21.450
> 
> 标签：version-control, tfs, azure-devops

我一直在云中测试 TFS，并通过一个测试项目对其进行了设置。目前没有使用 Git。我的问题与发布到我们的远程服务器有关。我有一个驱动器映射并通过 VPN 连接，并且通过文件系统发布工作。似乎发布是从我的本地解决方案而不是中央存储库中的解决方案进行的。这允许将签出的文件发布到生产环境。我原以为会从中央存储库发布，并且只发布签入的文件。

发布过程是否应该从中央仓库移动文件？或者，我做错了什么？

如果没有，TFS 中是否有控制只发布批准/测试的生产文件，并且只发布签入的文件？例如，阻止发布并在文件被签出时通知开发人员。

我已经很久没有使用 SCM 了，所以请多多包涵。谢谢你的耐心。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:24:22.397

我认为您需要调查 TFS 中内置的构建服务，因为这将允许您仅使用签入的源代码生成构建。可以在[此处](http://msdn.microsoft.com/en-us/magazine/jj721597.aspx)找到使用 TFS 云执行此操作的指南。

# java - 将值从 Java 传递给 javascript

> ID：16024065
> 
> 赞同：0
> 
> 时间：2013-04-15T20:21:40.100
> 
> 标签：java, javascript, applet

我有以下 Java 小程序。它获取用户选择的文件的绝对文件路径：

```
import java.awt.*;
import java.awt.event.*;
import java.io.*;
import javax.swing.*;
import java.awt.Color;
/*
   <OBJECT classid="clsid:8AD9C840-044E-11D1-B3E9-00805F499D93" 
           width=150 height=100 
 codebase="http://java.sun.com/products/plugin/1.3/jinstall-13-win32.cab#Version=1,3,0,0"> 
     <PARAM NAME="code" value="FileApplet.class">
   </OBJECT>
 */

public class fileabs extends JApplet
{
   private JTextField tfCount;
   final JFileChooser fc = new JFileChooser();

  public void init() {
      setBackground(Color.WHITE);
        JPanel p = new JPanel( new FlowLayout(FlowLayout.CENTER, 15, 15));
        p.add(new JLabel("Select File: "));
        tfCount = new JTextField(50);
        tfCount.setEditable(false);
        p.add(tfCount);
        JButton b2 = new JButton("Browse...");
        p.add(b2);
        b2.addActionListener( new ActionListener(){
            public void actionPerformed(ActionEvent ae) {
               tfCount.setText("dsds");
                int returnVal = fc.showOpenDialog(fileabs.this);
                tfCount.setText(fc.getSelectedFile().getAbsolutePath());
            }
        } );

        // p.add(label);
        add(p);
    }
} 
```

但是，我需要能够将其发送到另一种语言（python/django）的表单。我将如何获取绝对路径的值，以便可以在 javascript 中解析它？现在，我无法访问该路径，即使它显示在小程序中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:35:46.190

您应该考虑使用[LiveConnect](http://jdk6.java.net/plugin2/liveconnect/#JAVA_TO_JS)，它允许小程序与页面中的 JavaScript 交互，反之亦然。

以下代码`setPath`使用单个参数调用页面中的全局 JavaScript 函数：

```
netscape.javascript.JSObject.getWindow(appletInstance)
    .call("setPath", new Object[] { path }); 
```

小程序必须在参数`mayscript`设置为或者`true`或`mayscript`允许使用 LiveConnect 的情况下启动。

# c++ - std::fstream::write && std::fstream::putc std::ios::binary

> ID：16024071
> 
> 赞同：0
> 
> 时间：2013-04-15T20:21:53.833
> 
> 标签：c++, fstream

我怀疑我什至没有使用创建和打开二进制 I/O 文件`std::fstream`

```
BinarySearchFile::BinarySearchFile(std::string file_name){

    // concatenate extension to fileName
    file_name += ".dat";

    // form complete table data filename
    data_file_name = file_name;

    // create or reopen table data file for reading and writing
    binary_search_file.open(data_file_name, std::ios::binary);  // create file

    if(!binary_search_file.is_open()){

        binary_search_file.clear();
        binary_search_file.open(data_file_name, std::ios::out | std::ios::binary);
        binary_search_file.close();
        binary_search_file.open(data_file_name), std::ios::out | std::ios::in | std::ios::binary | std::ios::ate;
    }

   try{
       if(binary_search_file.fail()){
            throw CustomException("Unspecified table data file error");
       }
   }
   catch (CustomException &custom_exception){  // Using custom exception class
       std::cout << custom_exception.what() << std::endl;
       return;
   }    

} 
```

我相信这是真的，因为我正在写数据

```
void BinarySearchFile::writeT(std::string attribute){
    try{
        if(binary_search_file){
             binary_search_file.write(attribute.c_str(), attribute.length());
        }else if(binary_search_file.fail()){
             throw CustomException("Attempt to write attribute error");
        }

    }
    catch(CustomException &custom_exception){  // Using custom exception class
        std::cout << custom_exception.what() << std::endl;
        return;
    }
} 
```

但该文件是具有可读文本数据的标准文本文件。我想以二进制格式（2字节字符）编写字符串的字符或字符本身。我正在尝试操作`std::fstream`类似于[RandomAccessFile](http://docs.oracle.com/javase/6/docs/api/java/io/RandomAccessFile.html)。

***_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* *_* __ *_* __ *_* __ _ *_* __ *_* __**

问题是：我是否正确创建了文件，为什么我没有看到写入的二进制数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:27:31.460

您确实正确创建了文件。你有一个误解，有两种文件，二进制文件和文本文件。取而代之的是两种 I/O 操作，text like`operator<<`和 binary like `write`。

您没有看到两个字节字符的原因是它`std::string`只有一个字节字符。如果您想要两个字节字符，请使用`std::wstring`.

# ruby-on-rails - 如何将 API 密钥（一些随机字符串）从模型代码移动到 config/initializers 文件夹？

> ID：16024072
> 
> 赞同：0
> 
> 时间：2013-04-15T20:21:56.710
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我对如何做到这一点有点困惑。所以我有一个 API 密钥 api_key = 9173917789173 但我不想直接放入模型中，而是想在 config/initializers 文件夹中的某个位置定义它，然后只想在模型中使用该变量。

这个怎么做 ？

这是我的代码的样子 app/models/user.rb

```
class User < ActiveRecord::Base
def get_api_data
    use_data = http://example.com/?key=9173917789173
end 
```

我想成功

```
class User < ActiveRecord::Base
def get_api_data
    use_data = http://example.com/?key=API_KEY
end 
```

我想在 config/initializers 中定义 API_KEY

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T05:05:48.343

`config/initializers`在like中创建一个具有任何名称的文件`api.rb`。正如@Blue Smith 所说，您可以在其中将 API_KEY 作为全局常量：

```
API_KEY = 9173917789173 
```

或者您可以将其存储在 rails 配置中，例如

```
Rails.application.config.api_key = 9173917789173 
```

或者您可以将其保存为模型类中的常量：

```
User::API_KEY = 9173917789173 
```

# eclipse - 如何在 Eclipse 的 eGit 中的子模块内提交更改？

> ID：16024083
> 
> 赞同：4
> 
> 时间：2013-04-15T20:22:42.213
> 
> 标签：eclipse, git, egit, git-submodules

所以 Eclipse 的 git 插件 - eGit - 已经支持子模块一段时间了（他们在 2012 年 2 月 15 日的 1.3 版本中添加了支持，所以现在已经一年多了）。我刚刚开始使用它们。我可以毫无问题地添加子模块，我可以在子模块内为我的本地补丁创建和签出一个分支。我还可以在子模块中创建提交。

但是如何使用指向新提交的指针更新主存储库？当我选择“更新子模块”时，它会将我恢复到在添加子模块时签出的原始提交（当您认为这样做时，这并不奇怪`git submodule update`）。当我点击“同步子模块”时，它似乎根本没有做任何事情。

那么有没有办法让主仓库使用 eGit 知道子模块中的新提交？我非常清楚如何从命令行执行此操作，但我仍在尝试从 eGit 中找出是否可行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:03:04.490

修改子模块后，在父 repo 级别上完成的 Egit 状态应该检测到该子模块已更改。
( `git status`, -- 或`gitsubmodule status` [在 JGit 中实现](http://download.eclipse.org/jgit/docs/jgit-2.3.1.201302201838-r/apidocs/org/eclipse/jgit/api/Git.html#submoduleStatus%28%29)-- 将检测子模块中的任何更改)

由于子模块的“修改”状态，即使没有其他文件（父仓库的）发生更改，您也应该能够在父仓库中提交。
该提交，在[.gitmodules 文件](http://git-scm.com/docs/gitmodules.html)中记录一个新的 SHA1并在工作树中记录一个[特殊条目](https://stackoverflow.com/questions/1992018/git-submodule-update-needed-only-initially/2227598#2227598)，将在父 repo 中记录该子模块的新状态。

# javascript - MTurk 上的 jQuery，为什么 Chrome 会报告“不安全的 JavaScript 尝试使用 URL 访问框架”？

> ID：16024085
> 
> 赞同：4
> 
> 时间：2013-04-15T20:22:54.260
> 
> 标签：javascript, jquery, iframe, cross-domain, mechanicalturk

我在 MTurk HIT 中使用 jQuery 做一些事情，我猜其中一个是罪魁祸首。我不需要从 iframe 访问周围的文档，所以如果我是，我想知道发生在哪里以及如何阻止它！

否则，MTurk 可能会做一些不正确的事情（他们使用 5 个字符的标记`&amp;`例如，他们使用 5 个字符的标记来分隔 iframe URL 中的 URL 参数，因此他们肯定会做不正确的事情）。

以下是可能导致问题的片段。所有这些都来自嵌入在 MTurk HIT**（和相关）页面中的 iframe：

1.  我将我的 JS 嵌入到`$(window).load()`. 据我了解，我需要使用它而不是`$(document).ready()`因为后者不会等待我的 iframe 加载。如果我错了，请纠正我。

2.  我还在运行 RegExp.exec`window.location.href`来提取 workerId。

如果这是重复的，我提前道歉。确实 - 在写完这篇文章之后，SO似乎对此做出了很好的猜测：[调试“不安全的javascript尝试访问带有URL的框架......”](https://stackoverflow.com/questions/8069795/debugging-unsafe-javascript-attempt-to-access-frame-with-url)。如果我在你之前弄清楚，我会回答这个问题。

获得有关在哪里了解此类事情的良好高级参考资料会很棒。它不适合我知道的任何主题 - 也许了解跨站点脚本以便我可以避免它？

** 如果您不知道，MTurk HIT 是人们在 MTurk 上执行任务的工作单元。[如果您导航到http://mturk.com](http://mturk.com)，您可以很快看到它们的外观并查看 HIT，

我已经从 inject.js 文件将代码跟踪到 jquery 中运行的以下块：

`try { isHiddenIFrame = !isTopWindow && window.frameElement && window.frameElement.style.display === "none"; } catch(e) {}`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-17T01:45:19.447

我通过 Chrome 在 MechanicalTurk 中运行 jQuery 时遇到了类似的问题。我的解决方案是下载我想要的 jQuery JS 文件，然后将它们上传到安全的亚马逊 S3 服务。
然后，在我的 HIT 中，我在他们的新家[https://s3.amazonaws.com](https://s3.amazonaws.com)调用了 .js 文件。

有关如何按照 chrome 标准使代码“安全”的提示在这里：http: [//developer.chrome.com/extensions/contentSecurityPolicy.html](http://developer.chrome.com/extensions/contentSecurityPolicy.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-11T02:51:34.067

这不是您问题的直接答案，但我们的实验室通过要求工作人员单击 iframe 内打开一个单独的弹出窗口的按钮，成功地规避了（阅读 hack）这个问题。在弹出窗口中，您可以自由使用 jQuery 和您想要的任何其他标准 JS 资源，而不会触发任何 AMT 的安全警报。这种方法的另一个好处是允许工作人员在全尺寸浏览器窗口中查看您的任务，而不是 AMT 的微型嵌入式 iframe。

# cuda - 将对象复制到设备？

> ID：16024087
> 
> 赞同：16
> 
> 时间：2013-04-15T20:23:08.870
> 
> 标签：cuda

我可以将 C++ 对象复制到设备吗？

说我有：

```
class CudaClass
{
public:
int* data;
CudaClass(int x) {
    data = new int[1]; data[0] = x;
}
};

__global__ void useClass(CudaClass cudaClass)
{
    printf("%d" cudaClass.data[0]);
};

int main()
{
    CudaClass c(1);
} 
```

现在如何将“c”复制到设备内存并启动内核“useClass”？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-15T20:41:19.237

是的，您可以将对象复制到设备以在设备上使用。当对象嵌入了指向动态分配区域的指针时，该过程需要一些额外的步骤。

有关所涉及内容的讨论，请参见[我的回答。](https://stackoverflow.com/questions/15431365/cudamemcpy-segmentation-fault/15435592#15435592)该答案还有一些与之相关的示例代码答案。

此外，在您的类定义中，如果您希望某些功能在设备上可用，您应该适当地装饰这些功能（即可能使用`__device__ __host__`）；

**编辑：**为了回答一个问题（现已删除），这是我可以根据提供的代码提出的最简单的示例代码：

```
#include <stdio.h>

class CudaClass
{
public:
int* data;
CudaClass(int x) {
    data = new int[1]; data[0] = x;
}
};

__global__ void useClass(CudaClass *cudaClass)
{
    printf("%d\n", cudaClass->data[0]);
};

int main()
{
    CudaClass c(1);
    // create class storage on device and copy top level class
    CudaClass *d_c;
    cudaMalloc((void **)&d_c, sizeof(CudaClass));
    cudaMemcpy(d_c, &c, sizeof(CudaClass), cudaMemcpyHostToDevice);
    // make an allocated region on device for use by pointer in class
    int *hostdata;
    cudaMalloc((void **)&hostdata, sizeof(int));
    cudaMemcpy(hostdata, c.data, sizeof(int), cudaMemcpyHostToDevice);
    // copy pointer to allocated device storage to device class
    cudaMemcpy(&(d_c->data), &hostdata, sizeof(int *), cudaMemcpyHostToDevice);
    useClass<<<1,1>>>(d_c);
    cudaDeviceSynchronize();
    return 0;
} 
```

为了简洁/清晰起见，我省略了通常的 cuda 错误检查。

回答这个问题，您不能使用基于设备的类中的指针直接从主机分配存储。这是因为 cudaMalloc 需要一个普通的基于主机的指针存储，例如你得到的：

```
int *hostdata; 
```

cudaMalloc 无法使用其存储已在设备上的指针。这将不起作用：

```
cudaMalloc(&(d_c->data), sizeof(int)); 
```

因为它需要在主机代码中取消引用设备指针 (d_c)，这是不允许的。

# sql - 一个gridview中2个数据库搜索的asp.net合并结果

> ID：16024092
> 
> 赞同：0
> 
> 时间：2013-04-15T20:23:23.287
> 
> 标签：sql, gridview, data-binding, datasource

我有来自 2 个第三方提供商的 2 个数据库。两个数据库都有一个具有通用唯一标识符 (UI) 的表。我想通过为 DB2 检索的唯一标识符列表的结果显示 DB1 的 table1 过滤器。

并在gridview中显示结果。

最初的想法是在 DB1 的虚拟表中插入 db2 UI，然后通常选择 db1.table1 - JOIN Virtualtable 或 where in。但考虑到每个页面回发都会发生搜索，这将是一个非常缓慢的过程。

是否可以在gridview.databinding期间过滤掉代码中的结果？或其数据源数据绑定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:40:09.327

我找到了一个解决方案：我不使用标记页面 Datasource，我在后面的代码中使用 DataTable。使用标准 sqlcommand 和 sqldatareader 填充数据表。然后在 datareader.read 时，我会跳过那些 UI 与 DB2 中的“好”UI 列表不匹配的行。然后将 GridView 绑定到数据表。它甚至可以与我没想到的 gridview 分页一起使用。

# c# - Active Directory 角色提供程序上的错误

> ID：16024094
> 
> 赞同：0
> 
> 时间：2013-04-15T20:23:31.073
> 
> 标签：c#, asp.net-mvc-4, active-directory

我一直在解决这个问题一段时间，似乎找不到任何有效的解决方案......我试图让我的活动目录在我的项目上工作，但我不断收到以下错误。也许这是一件简单的事情，就在我的脑海中。有人对这个方向有什么建议吗？

说明：处理服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。

解析器错误消息：无法加载类型“ActiveDirectoryRoleProvider”。

源错误：

```
Line 33:         <clear />
Line 34:         <add name="ActiveDirectoryRoleProvider" connectionStringName="ADConnectionString" connectionUsername="username"
Line 35:              connectionPassword="password" attributeMapUsername="sAMAccountName" type="ActiveDirectoryRoleProvider" />
Line 36:       </providers>
Line 37:     </roleManager> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-10T10:20:57.427

如果您创建了自己的 ActiveDirectoryRole 提供程序，请确保您在名称和类型上的拼写与类的名称相同，删除命名空间以便正确解析。

```
e.g. remove the namespace of the ff:

namespace yourproject.module {
public class ActiveDirectoryRoleProvider: RoleProvider
{ ... }

to make it appear
public class ActiveDirectoryRoleProvider: RoleProvider 
```

# c# - 需要一些帮助在我的游戏中实现碰撞，有两个单独的类

> ID：16024095
> 
> 赞同：1
> 
> 时间：2013-04-15T20:24:09.403
> 
> 标签：c#, xna

我要做的是在背景后面绘制矩形并进行本质上的碰撞检测。然而，我不确定我能如何实现它。我考虑过这样，当精灵接近这些矩形时，它们的速度会越来越慢，直到它们停下来，但那会奏效吗？抱歉，如果我听起来有点耳后，我对 C# 还很陌生，并且正在尝试自学。任何帮助，将不胜感激。

所以我有一个 CharacterSprite 类（walkingsprite），所有关于帧的东西只是我实现的一个行走动画序列。

```
namespace walkingsprite
{
class AnimatedSprite
{
    //keyboard
    KeyboardState currentKBState;
    KeyboardState previousKBState;

    Texture2D spriteTexture;

    float timer = 0f;
    float interval = 200f;
    int currentFrame = 0;
    int spriteWidth = 32;
    int spriteHeight = 48;
    int spriteSpeed = 2;

    Rectangle sourceRect;

    Texture2D obst;
    Rectangle obst1;

    Obstruction obstruction1;

    Vector2 position;
    Vector2 origin;

    public Vector2 Position
    {
        get { return position; }
        set { position = value; }
    }

    public Vector2 Origin
    {
        get { return origin; }
        set { origin = value; }
    }

    public Texture2D Texture
    {
        get { return spriteTexture; }
        set { spriteTexture = value; }
    }

    public Rectangle SourceRect
    {
        get { return sourceRect; }
        set { sourceRect = value; }
    }

    public int SpriteSpeed
    {
        get { return spriteSpeed; }
        set { spriteSpeed = value; }
    }

    public AnimatedSprite(Texture2D texture, int currentFrame, int spriteWidth, int spriteHeight)
    {
        this.spriteTexture = texture;
        this.currentFrame = currentFrame;
        this.spriteWidth = spriteWidth;
        this.spriteHeight = spriteHeight;
    }

    public void HandleSpriteMovement(GameTime gameTime)
    {
        previousKBState = currentKBState;
        currentKBState = Keyboard.GetState();

        sourceRect = new Rectangle(currentFrame * spriteWidth, 0, spriteWidth, spriteHeight);

        ////////////////////////////////////////////////////////////////////
        if (currentKBState.GetPressedKeys().Length == 0)
        {
            if (currentFrame > 0 && currentFrame < 4)
            {
                currentFrame = 0;
            }

            if (currentFrame > 4 && currentFrame < 8)
            {
                currentFrame = 4;
            }

            if (currentFrame > 8 && currentFrame < 12)
            {
                currentFrame = 8;
            }

            if (currentFrame > 12 && currentFrame < 16)
            {
                currentFrame = 12;
            }
        }
        ////////////////////////////////////////////////////////////////////

        //sprintin
        if (currentKBState.IsKeyDown(Keys.Space))
        {
            spriteSpeed = 2;
            interval = 100;
        }
        else 
        {
            spriteSpeed = 1;
            interval = 200;
        }
        ///////////////////////////////////////////////

        if (currentKBState.IsKeyDown(Keys.Down) == true)
        {
            AnimateDown(gameTime);
            if (position.Y < 575)
            {
                position.Y += spriteSpeed;
            }
        }

        ////////////////////////////////////////////////////

        if (currentKBState.IsKeyDown(Keys.Up) == true)
        {
            AnimateUp(gameTime);
            if (position.Y > 25)
            {
                position.Y -= spriteSpeed;
            }
        }
        //////////////////////////////////////////////////////////

        if (currentKBState.IsKeyDown(Keys.Right) == true)
        {
            AnimateRight(gameTime);
            if (position.X < 780)
            {
                position.X += spriteSpeed;
            }
        }
        ////////////////////////////////////////////////////////////////////
        if (currentKBState.IsKeyDown(Keys.Left) == true)
        {
            AnimateLeft(gameTime);
            if (position.X > 0)
            {
                position.X -= spriteSpeed;

            }
        }
        origin = new Vector2(sourceRect.Width / 2, sourceRect.Height / 2);

    }
        ////////////////////////////////////////////////////////////////////

    public void AnimateRight(GameTime gameTime)
    {
        if (currentKBState != previousKBState)
        {
            currentFrame = 9;
        }

        timer += (float)gameTime.ElapsedGameTime.TotalMilliseconds;

        if(timer > interval)
        {
            currentFrame++;

            if(currentFrame > 11)
            {
                currentFrame = 8;
            }
            timer = 0f;
        }

    }
    ////////////////////////////////////////////////////////////////////

    public void AnimateUp(GameTime gameTime)
    {
        if (currentKBState != previousKBState)
        {
            currentFrame = 13;
        }
        timer += (float)gameTime.ElapsedGameTime.TotalMilliseconds;

        if (timer > interval)
        {
            currentFrame++;

            if (currentFrame > 15)
            {
                currentFrame = 12;
            }
            timer = 0f;
        }
    }
    //////////////////////////////////////////

    public void AnimateDown(GameTime gameTime)
    {
        if (currentKBState != previousKBState)
        {
            currentFrame = 1;
        }
        timer += (float)gameTime.ElapsedGameTime.TotalMilliseconds;

        if (timer > interval)
        {
            currentFrame++;

            if (currentFrame > 3)
            {
                currentFrame = 0;
            }
            timer = 0f;
        }
    }

    ////////////////////////////////////////////////////

       public void AnimateLeft(GameTime gameTime)
    {
        if (currentKBState != previousKBState)
        {
            currentFrame = 5;
        }
        timer += (float)gameTime.ElapsedGameTime.TotalMilliseconds;

        if (timer > interval)
        {
            currentFrame++;

            if (currentFrame > 7)
            {
                currentFrame = 4;
            }
            timer = 0f;
        }
    }
  }
   } 
```

我有一个障碍类。

```
 namespace walkingsprite
 {
class Obstruction
{
    Texture2D obst;
    Rectangle obstRec1;

    public Rectangle ObstRec1
    {
        get { return obstRec1; }
        set { obstRec1 = value; }
    }

    public Texture2D Obst
    {
        get { return obst; }
        set { obst = value; }
    }

    public Obstruction(Texture2D texture, Rectangle rec)
    {
        this.obstRec1 = rec;
        this.obst = texture;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:10:30.747

XNA 已经有一个`Rectangle`类，如果一个矩形与另一个矩形碰撞，则返回一个方法。

一个例子：

```
Rectangle rec1 = new Rectangle(0, 0, 10, 10);
Rectangle rec2 = new Rectangle(5, 5, 10, 10);
rec1.Intersects(rec2); //Return true if a rectangle intersects another one 
```

人们通常做的是 a `List`of`Rectangle`并一个一个地测试以知道它们是否发生碰撞，或者他们实施 a[`QuadTree`](http://en.wikipedia.org/wiki/Quadtree)但一开始有点困难。

的一个`List`例子`Rectangle`：

```
List<Rectangle> allObjects = new List<Rectangle>();
Rectangle rec1 = new Rectangle(0, 0, 10, 10);
Rectangle rec2 = new Rectangle(10, 15, 10, 10);
Rectangle mainCharRec = new Rectangle(10, 20, 10, 10);

allObjects.Add(rec1);
allObjects.Add(rec2); 
```

要测试主角矩形是否与其他一些矩形相交，您可以使用这样的 foreach 方法：

```
foreach (Rectangle rec in allObjects)
     if(mainCharRec.Intersects(rec))
          return true;
return false; 
```

关于变慢，我认为您可以对对象设置一个矩形，对“近距离区域”设置另一个矩形，当角色进入该区域时，您会按照您给该区域的距离减慢他的速度，例如，如果您有一个每边大 10 像素的矩形，当角色与更大的矩形碰撞时，他会失去 spriteSpeed/10 的步长，直到他停下来。当值太低时，它变为0：

```
if (spriteSpeed < 0.5)
     spriteSpeed = 0;
else
    spriteSpeed -= spriteSpeed/10; 
```

# php - 在移动网站上有一个链接，可以绕过主网站上 .htaccess 文件的移动重定向

> ID：16024103
> 
> 赞同：0
> 
> 时间：2013-04-15T20:24:38.317
> 
> 标签：php, html, .htaccess

我有一个网站的 2 个版本。一个普通的网站和一个 Jquery 移动网站。我运行一个 defaultrewite.php 模板并从 MYSQL 数据库中提取我的内容。

我希望能够将链接放到我的移动网站上，该链接可以转到主网站？

每次我从移动设备（例如 iphone）访问主网站时，.htaccess 文件都会将我发送到移动网站。

下面是我的 .htaccess 文件的代码。

谢谢

```
RewriteEngine on
RewriteRule ^/?([a-z0-9-_]*)$ default-rewrite.php?page=$1 [L]
RewriteCond %{REQUEST_URI} !^http://sonae.co.za/.*$
RewriteCond %{HTTP_USER_AGENT} "android|blackberry|ipad|iphone|ipod|iemobile|opera   mobile|palmos|webos|symbian|googlebot-mobile" [NC]
RewriteRule ^(.*)$ http://mobile.sonae.co.za/ [L,R=302] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:32:09.080

在第二个上方添加一行`RewriteRule`：

```
RewriteCond %{QUERY_STRING} !nomobile 
```

然后，您可以通过将其包含在查询字符串中来允许移动设备访问常规站点，例如

```
http://sonae.co.za/foo/bar?nomobile 
```

这通过要求字符串不存在于查询字符串中来工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T20:33:30.133

让链接通过重定向页面，如果他们单击该链接，则设置一个名为 use_desktop 的 cookie：

```
$url = $_GET['redirect_url'];
setcookie('use_desktop', 1, time() + 60*60*24*30, '/');
header("Location: $url");
exit; 
```

然后加

```
RewriteCond %{HTTP:Cookie} !(^|;\ *)use_desktop=([^;\ ]+) 
```

作为重写规则之前的另一个条件。

这将比查询字符串更好，因为一旦查询字符串消失（即他们点击链接），他们将被重定向回移动版本，这让他们继续使用桌面版本，直到他们点击“使用移动链接”，它将通过重定向器并删除该 cookie。

# android - 在Android上，调用removeView时如何避免闪烁？

> ID：16024107
> 
> 赞同：2
> 
> 时间：2013-04-15T20:24:47.283
> 
> 标签：android, flicker

我有两个重叠的 ImageView，我正在调用 removeView() 来删除后面的那个。当我这样做时，我看到闪烁 - 被删除的视图被短暂地绘制在另一个视图的顶部，然后它消失了。

我曾尝试在删除之前调用 setVisibility(View.GONE) 和 setVisibility(View.INVISIBLE)，但都没有帮助。

我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T04:36:00.293

我和你遇到了同样的问题。最后我删除了`removeView()`并使用了 `setVisibility(View.GONE)`. 这避免了闪烁。但我不确定是否`setVisibility(View.GONE)`equals `removeView()`。附上文档：

> setVisibility(View.GONE)：这个视图是不可见的，它不占用任何空间用于布局目的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-15T10:45:44.637

我找到了这个简单的解决方法，它首先将视图隐藏，然后**在延迟后将**`View.Gone`其完全删除以节省内存。

 **```
v.visibility = View.GONE
val handler =  Handler(Looper.getMainLooper())
handler.postDelayed({
    if(v.parent != null)
        wm.removeView(v)
    }, 300) 
```

如果你每次都创建一个新的 View 对象，这个方法是可以的；但是如果您稍后要再次添加先前创建的视图（相同的引用），那么您需要小心，因为该视图可能尚未被删除（`addView`如果是这种情况，调用将给出错误）。也许你可以先停止处理程序（通过使处理程序全局并调用`handler.removeCallbacksAndMessages(null)`）然后检查`v.parent != null`使用`addView`or `updateView`。**

# c - 需要常量表达式

> ID：16024108
> 
> 赞同：0
> 
> 时间：2013-04-15T20:24:50.503
> 
> 标签：c, variables, embedded, mplab

```
 unsigned char rtc_time[6] = { pThis->hoursTens, pThis->hoursUnits, pThis->minutesTens, pThis->minutesUnits, pThis->secondsTens, pThis->secondsUnits }; 
```

不编译。我收到错误（6 次）：**需要常量表达式**

每个变量都声明为无符号字符。我尝试过强制转换为 (const) ，但没有成功。

这是 MPLAB X IDE，C 语言，使用 Hi-Tech-PICC 编译器 v9.65PL1。

问题是什么？

当我如下定义变量时它可以工作，但我需要使用上面的变量。

```
 unsigned char rtc_time[6] = { 0x1, 0x2, 0x3, 0x4, 0x5, 0x6 }; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T20:27:12.800

您不能使用其值在编译时未知的值来初始化数组。你的值`struct`在编译时是未知的，所以不是`const`表达式。
而`0x1`, `0x2`, ... 是`const`可以在编译时计算的表达式。

您可以声明一个数组，然后在运行时设置值，例如

```
unsigned char rtc_time[6];
...
rtc_time[0] = pThis->hoursTens;
//go on 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T20:29:07.947

当表达式由计算值组成时，您必须将它们作为语句而不是初始化器来执行。

```
...
unsigned char rtc_time[6];
...
rtc_time[0] = pThis->hoursTens;
rtc_time[1] = pThis->hoursUnits;
. . . 
```

# java - 使用 JTextField 的可重用删除确认

> ID：16024109
> 
> 赞同：0
> 
> 时间：2013-04-15T20:25:01.050
> 
> 标签：java, swing, user-input, confirmation

我正在尝试提供一个删除对象的确认窗口，该窗口要求用户在文本字段中输入“删除”一词以确认他们的操作，然后单击标有“删除”的按钮。此外，它还将具有标准的“取消”按钮。

以下是我想要的基本思想，但我不确定如何正确返回布尔值：

```
public static boolean confirmDelete(String msg) {
    JPanel panel = new JPanel();
        JPanel sPanel1 = new JPanel();
            JPanel ssPanel1 = new JPanel();
                ssPanel1.setLayout(new BoxLayout(ssPanel1, BoxLayout.Y_AXIS));
                    JLabel lbl = new JLabel(msg);
                    confirm = new JTextField(10);
                ssPanel1.add(lbl);
                ssPanel1.add(confirm);
            JPanel ssPanel2 = new JPanel();
                ssPanel2.setLayout(new BoxLayout(ssPanel2, BoxLayout.Y_AXIS));
                    JButton ok = new JButton("Delete");
                        ok.addActionListener(new ActionListener() {
                            @Override
                            public void actionPerformed(ActionEvent arg0) {
                                if(confirm.getText().toLowerCase().equals("delete")) {
                                    //Set the returned value to true;
                                } else {
                                    alertMsg("Invalid input. Please try again.");
                                }
                            }
                        });
                    JButton cancel = new JButton("Cancel");
                        cancel.addActionListener(new ActionListener() {
                            @Override
                            public void actionPerformed(ActionEvent arg0) {
                                //Set the returned value to false;
                            }
                        });
                ssPanel2.add(ok);
                ssPanel2.add(cancel);
            sPanel1.add(ssPanel1);
            sPanel1.add(ssPanel2);
        panel.add(sPanel1);

    JFrame deleteFrm = new JFrame("Confirm Delete");
    deleteFrm.setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);

    //Add content to the window.
    deleteFrm.setContentPane(panel);

    //Display the window.
    deleteFrm.pack();

    deleteFrm.setVisible(true);
} 
```

基本上，我想使用该行调用此窗口`boolean deleteItem = ClassName.confirmDelete(msg);`并让它返回布尔值以说明他们是否正确确认了删除状态。如何设置它以返回代码示例中描述的布尔值（这是一种伪代码，因为它显然不正确）。像上面提到的那样，这甚至可以通过单行调用来实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T20:30:14.950

改用 JOptionPane .. 获取用户选择结果然后决定逻辑代码会更容易.. 看这里例如[JOptionPane YES/No Options Confirm Dialog Box Issue -Java](https://stackoverflow.com/questions/8689122/joptionpane-yes-no-options-confirm-dialog-box-issue-java) 或这里 [谷歌搜索结果：JOPtionPane 示例](https://www.google.co.il/search?biw=1366&bih=643&q=joptionpane%20example&oq=JOption&gs_l=serp.3.2.0l10.7635.11449.0.12917.36.16.0.3.3.10.130.1559.7j8.15.0...0.0...1c.1.9.serp._zZ3OyrBYjU)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T21:59:25.467

[我在这里](http://www.roseindia.net/java/example/java/swing/ShowInputDialog.shtml)找到了我的问题的答案，它比我想象的要简单得多。结果，我想出了以下代码来返回一个我想要的布尔值，而无需构建我自己的窗口所涉及的所有工作：

```
public static boolean confirmDelete(String msg) {
    String str = JOptionPane.showInputDialog(msg);
    if(str != null && str.toLowerCase().equals("delete")) return true;
    return false;
} 
```

Elior 的回答虽然不是我想要的，但确实为我指明了正确的方向，因此 +1。不知道我是如何错过`showInputDialog()`JOptionPane 的方法的，但它基本上是我正在寻找的（不仅仅是确认是/否；数据对于这么简单的事情来说太敏感了）。

编辑：添加了`str != null &&`否则它会`nullPointerException`在取消时抛出一个。

# sql - SQL Azure 中的内部版本号

> ID：16024110
> 
> 赞同：1
> 
> 时间：2013-04-15T20:25:11.170
> 
> 标签：sql, azure, azure-sql-database, assemblyinfo, auto-versioning

我有一个 Azure Web 服务和随附的 sql-azure db，它们都需要公开版本号。该服务很简单：更新组装信息以根据修订和构建生成，然后公开它。

我怎样才能在数据库中做类似的事情？我曾经玩过一个自动递增的数字，但是即使我两次部署相同的位，它也会增加“版本”，并且不能保证具有相同位的服务器之间的连续性。而且，因为它是 sql-azure，我不相信我可以从 assemblyinfo 中提取值，可以吗？

如果我可以公开服务显示的相同内部版本号，那就太好了，但这不是必需的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T03:42:15.053

1.  在数据库中有一个版本表
2.  使用[自定义 MSBuild 任务](http://weblogs.asp.net/bradleyb/archive/2005/12/02/432150.aspx)获取内部版本号
3.  您可以使用[FileUpdate MSBuild 社区任务更新带有内部版本号的](https://stackoverflow.com/questions/8658972/using-msbuild-i-want-to-update-a-config-file-with-values-from-teamcity)['MERGE'](http://benchmarkitconsulting.com/colin-stasiuk/2009/02/27/merge-statement-upsert-with-working-example/)的 sql 文件
4.  作为部署的一部分执行它。

现在，您将在数据库和程序集中拥有相同的版本号。

# sql-server - SSIS - 导入文件，其列填充为子标题（在某些行上省略）

> ID：16024118
> 
> 赞同：0
> 
> 时间：2013-04-15T20:25:44.003
> 
> 标签：sql-server, ssis

我正在导入一个格式类似于报告的 Excel 文件 - 也就是说，对于它所属的每组行，某些列仅填充一次，例如：

```
 CaseID  |Date     |Code
     157207 |         |
            |8/1/2012 |64479
            |8/1/2012 |Q9967
            |8/1/2012 |99203 
```

我需要捕获其中一个组标题（在上面的示例中为 CaseID）并将其用于字段为空白的后续行，然后保存我遇到的下一个值。我添加了一个变量 (User::CurrentCaseId) 和一个脚本转换，代码如下：

```
public class ScriptMain : UserComponent
{
    string newCaseId;

    public override void Input0_ProcessInputRow(Input0Buffer Row)
    {
        if (!Row.CaseIDName_IsNull && Row.CaseIDName.Length > 0)
            newCaseId = Row.CaseIDName;
        else
            newCaseId = "DetailRow";
    }

    public override void PostExecute()
    {
        base.PostExecute();
            if (newClaimNumber != "DetailRow")
                Variables.CurrentCaseId = newCaseId;
    } 
```

基本上，我正在尝试读取存在的值并将其保存在此变量中。我使用条件拆分来丢弃只有 CaseID 的行，然后使用派生列将变量值放入新列以完成详细信息行。唉，该值始终为空白（在派生列之后放置一个数据查看器）。我修改了脚本以始终将变量设置为固定字符串 - 派生列仍然是空白的。

这似乎是一个不错的计划……我在 MS 论坛中收到了一些反馈，您不能在同一个数据流任务中设置变量值并使用它的新值。如果是这样，我能想到的唯一解决方案是在存在时将 CaseID 写入表中，并在不存在时将其读回。我真的很讨厌用几百万行（多个 Excel 工作表）来做这件事。有更好的想法吗？

最好的，斯科特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:18:38.410

这对您来说是一个很好的起点。

1.  我使用以下文件作为源。将其保存到 C:\Temp\5.TXT

> ```
> CaseID  |Date     |Code
> 157207  |         |
>       |8/1/2012 |64479
>       |8/1/2012 |Q9967
>       |8/1/2012 |99203
> 157208  |         |
>       |9/1/2012 |77779
>       |9/2/2012 |R9967
>       |9/3/2012 |11203 
> ```

1.  在控制流表面上放置一个 DFT。
2.  将脚本组件作为源放在 DFT 上

    3.1。转到输入和输出部分

    3.2\. 添加输出。将其名称更改为 MyOutput。

    ```
     3.2.1 Add the following output columns - CaseID, Date, Code
     3.2.1 The data types are four-byte unsigned integer [DT_UI4], string [DT_STR], string [DT_STR] 
    ```

3.  现在转到脚本//编辑脚本。把下面的代码。确保添加

> 使用 System.IO；

到命名空间区域。

```
 public override void CreateNewOutputRows()
{

    string[] lines = File.ReadAllLines(@"C:\temp\5.txt");

    int iRowCount = 0;
    string[] fields = null;
    int iCaseID = 0;
    string sDate = string.Empty;
    string sCode = string.Empty;

    foreach (string line in lines)
    {
        if (iRowCount == 0)
        {
            iRowCount++;
        }
        else
        {
            fields = line.Split('|');
            //trim the field values
            for (int i = 0; i < fields.Length; i++)
            {
                fields[i] = fields[i].Trim();
            }

            if (!fields[0].Equals(string.Empty))
            {
                iCaseID = Convert.ToInt32(fields[0]);
            }
            else
            {
                MyOutputBuffer.AddRow();

                MyOutputBuffer.CaseID = iCaseID;
                MyOutputBuffer.Date = fields[1];
                MyOutputBuffer.Code = fields[2];
            }
        }
    }
} 
```

}

1.  测试你的代码：在你放置 Script 组件的地方添加一个 Union All 组件。将 Script 组件的输出连接到 Union All 组件。放置数据查看器。

希望这对您有所帮助。请告诉我们。我今天回答了一个类似的问题；请也检查一下。这可能有助于巩固这个概念 - 恕我直言。

# android - Android SimpleCursorAdapter ListView 错误

> ID：16024119
> 
> 赞同：0
> 
> 时间：2013-04-15T20:25:46.563
> 
> 标签：android, android-listview, simplecursoradapter

我一直在搞乱 SimpleCursorAdapter 和 Listview 并得到不同的结果。起初我在我的列表视图上得到了一些结果，但是布局并不好，所以我决定修改它。然而，这似乎毁了一切，现在 APP 不断崩溃并出现空指针异常类型错误，我似乎无法弄清楚。

我的列表视图的 XML

```
 <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/linearLayout1" >

        <ListView
            android:id="@+id/list"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true" >

        </ListView>

    </RelativeLayout>

</RelativeLayout>

</ScrollView> 
```

我的活动课与 ListActivity

```
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.playerdata);
    //list = (ListView) findViewById(R.id.list);

    mDbHelper = new PlayerDbAdapter(this);
    mDbHelper.open();
    fillData();
    registerForContextMenu(getListView());
}

 private void fillData() {
    Cursor players = mDbHelper.fetchAllPlayers();
    startManagingCursor(players);

    // Create an array to specify the fields we want to display in the list (only TITLE)
    String[] from = new String[]{PlayerDbAdapter.KEY_TITLE,PlayerDbAdapter.KEY_BODY};

    // and an array of the fields we want to bind those fields to (in this case just text1)
    int[] to = new int[]{R.id.playerPosition,R.id.playerName};

    // Now create a simple cursor adapter and set it to display
    SimpleCursorAdapter playerlist = 
        new SimpleCursorAdapter(this, R.layout.playerinfo , players, from, to);
    setListAdapter(playerlist);
} 
```

日志猫

```
04-15 20:09:07.326: E/AndroidRuntime(600): FATAL EXCEPTION: main
04-15 20:09:07.326: E/AndroidRuntime(600): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{your.dissertation.project/your.dissertation.project.PlayersActivity}: java.lang.NullPointerException
04-15 20:09:07.326: E/AndroidRuntime(600):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1544)
04-15 20:09:07.326: E/AndroidRuntime(600):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1638)
04-15 20:09:07.326: E/AndroidRuntime(600):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-15 20:09:07.326: E/AndroidRuntime(600):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:928)
04-15 20:09:07.326: E/AndroidRuntime(600):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-15 20:09:07.326: E/AndroidRuntime(600):  at android.os.Looper.loop(Looper.java:123)
04-15 20:09:07.326: E/AndroidRuntime(600):  at android.app.ActivityThread.main(ActivityThread.java:3647)
04-15 20:09:07.326: E/AndroidRuntime(600):  at java.lang.reflect.Method.invokeNative(Native Method)
04-15 20:09:07.326: E/AndroidRuntime(600):  at java.lang.reflect.Method.invoke(Method.java:507)
04-15 20:09:07.326: E/AndroidRuntime(600):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-15 20:09:07.326: E/AndroidRuntime(600):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-15 20:09:07.326: E/AndroidRuntime(600):  at dalvik.system.NativeStart.main(Native Method)
04-15 20:09:07.326: E/AndroidRuntime(600): Caused by: java.lang.NullPointerException
04-15 20:09:07.326: E/AndroidRuntime(600):  at android.app.Activity.setContentView(Activity.java:1657)
04-15 20:09:07.326: E/AndroidRuntime(600):  at android.app.ListActivity.ensureList(ListActivity.java:312)
04-15 20:09:07.326: E/AndroidRuntime(600):  at android.app.ListActivity.getListView(ListActivity.java:297)
04-15 20:09:07.326: E/AndroidRuntime(600):  at your.dissertation.project.PlayersActivity.<init>(PlayersActivity.java:27)
04-15 20:09:07.326: E/AndroidRuntime(600):  at java.lang.Class.newInstanceImpl(Native Method)
04-15 20:09:07.326: E/AndroidRuntime(600):  at java.lang.Class.newInstance(Class.java:1409)
04-15 20:09:07.326: E/AndroidRuntime(600):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
04-15 20:09:07.326: E/AndroidRuntime(600):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1536)
04-15 20:09:07.326: E/AndroidRuntime(600):  ... 11 more 
```

**我的光标类**

```
 public Cursor fetchAllPlayers()
  {
    return this.mDb.query("players", new String[] { "_id", "Player_Name", "Player_Position" }, null, null, null, null, null);
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T21:17:50.107

你很接近，但我看到了几个问题：

1.  startManagingCursor 已弃用。您应该改用 CursorLoader。这在 Android 培训课程[Loading Data in the Background 中有](http://developer.android.com/training/load-data-background/index.html)记录。这不会导致您的 RuntimeException，但这是不好的编程习惯。
2.  您的 ListView 和 SimpleCursorAdapter 的设置需要工作。您犯了一个错误，这在使用 SimpleCursorAdapter 的人中很常见。构造函数的参数是

```
SimpleCursorAdapter（上下文，item_layout_file，光标，from_columns，to_fields）

```

在哪里

*   **上下文**是一个上下文对象
*   **item_layout_file**是一个 layout.xml 文件，其中包含列表视图的*一个项目或行*的布局。在您的情况下，此布局文件将包含一个 TextView（或两个？），而*不是*ListView。您正在创建一个绑定到 ListView 的对象，而不是 ListView 本身。
*   **游标**是包含数据的游标
*   **from_columns**是一个包含列名的字符串数组
*   **to_fields**是一个整数数组，包含项目布局文件中视图对象的资源 ID。

此外，还有这些要求：

*   from_columns中的元素数量必须与**to_fields中的元素数量****相同**。**我怀疑这是导致错误的原因**。
*   **光标**必须包含名为“_ID”的列。

但是，**from_columns**不必包含光标中的所有列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T21:55:16.977

改变
`String[] from = new String[]{PlayerDbAdapter.KEY_TITLE,PlayerDbAdapter.KEY_BODY};`

到

```
String[] from = new String[]{PlayerDbAdapter.KEY_TITLE}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T22:14:01.747

你`ListView`应该有一个 id`android:id="@android:id/list"`不是`android:id="@+id/list"`

# ajax - 一个站点有多个 AngularJS 应用程序？

> ID：16024130
> 
> 赞同：4
> 
> 时间：2013-04-15T20:26:30.563
> 
> 标签：ajax, angularjs, javascript-framework, angularjs-routing

我正在开发一个可以分解为几个主要页面的网站。这些页面可以被认为是彼此隔离的，除了它们共享会话数据（即会话 ID 和登录用户名）。

最初，我打算使用 ng-view 将站点构建为 SPA（即，将页面变成 AngularJS 视图）。但是，我认为以这种方式实施我的网站没有任何好处。并且它需要额外的时间和努力才能使其支持 SEO（[使 AJAX 应用程序可抓取](https://developers.google.com/webmasters/ajax-crawling/)）。

采用一种不会带来任何好处甚至会产生额外工作量的方法似乎不太聪明。所以我想，我为什么不把我网站的主页做成单独的AngularJS应用程序。需要被搜索引擎索引的网站部分只是其中一些应用程序的初始屏幕，所以我不需要为 SEO 做额外的工作。（注意：初始屏幕由 Django 服务器呈现，带有供搜索引擎抓取的数据，因此它们是非空白的。）

对于每个应用程序，它可能有也可能没有自己的一组部分，这取决于它的要求。

例子：

```
mydomain.com/item_page/1234 (load "item" app)
mydomain.com/dashboard (load "dashboard" app)
mydomain.com/account (load "account" app and default to "tab_1" view)
mydomain.com/account#tab_1 (load "tab_1" view of "account" app)
mydomain.com/account#tab_2 (load "tab_2" view of "account" app)
mydomain.com/post_item (load "post" app) 
```

这只是我的随机想法，我还没有看到任何由多个 AngularJS 应用程序组成的 AngularJS 示例。我想知道：

1.  一个站点方法的多个 AngularJS 应用程序是否可行？我应该注意哪些注意事项？野外有没有采用这种方法的示例站点？
2.  如果可行，我如何在应用程序之间共享会话数据？

**请注意，这篇文章是关于一个站点的多个 AngularJS 应用程序，而不是同一页面上的多个 AngularJS 应用程序。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T21:19:48.020

这样的做法没有任何问题，只要你下载的 JS 脚本的大小保持足够小，并保证良好的缓存。此类应用程序的示例之一可以是 GitHub（它们不使用 Angular，但方法是相同的）。当您访问 GitHub 上的问题页面时，它会加载一个 html 页面、常见的 Github JS 库和页面特定的 JS 代码。页面内的导航和操作由该单页特定脚本处理。如果您转到其他部分（如代码），则会加载带有新页面特定 JS 代码的新页面。另一个例子是亚马逊 AWS 控制台，他们甚至对不同的页面使用不同的框架。（GitHub 和 Amazon 都不使用 Angular，但这种方法适用于任何基于 JS 的框架，甚至适用于 GWT）。

至于在页面之间共享一些会话数据，您可以使用内联脚本或隐藏元素将这些信息直接嵌入页面本身。例如，当您的服务器生成页面时，它还应该在页面中生成一些会话信息。另一种方法是下载一次会话数据，并将它们存储在本地存储/会话存储中。

# grails - Grails Command 对象应该放在项目结构中的什么位置？

> ID：16024133
> 
> 赞同：11
> 
> 时间：2013-04-15T20:26:38.443
> 
> 标签：grails, groovy, command-objects

我在 domain/my/package/name 中有一个名为 LoginCommand 的类

```
class LoginCommand {

    String emailAddress
    String password

} 
```

我的问题是为什么会在我的数据库中为 grails 中的 ***Command 对象自动生成一个表？这些命令对象是否应该放置在 /domain 之外，以避免 hibernate/orm 自动生成表。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-15T20:42:49.267

他们不应该进去`grails-app/domain`；它们不是域类。将它们放在`src/groovy`. 或者，一个常见的约定是将命令类放在与使用它的控制器相同的文件中。

请查看 grails 手册中的[“约定优于配置”](http://grails.org/doc/latest/guide/gettingStarted.html#conventionOverConfiguration)部分，以了解其中的内容。

# matlab - 在matlab中创建一个随机采样两个向量的向量

> ID：16024136
> 
> 赞同：0
> 
> 时间：2013-04-15T20:26:46.843
> 
> 标签：matlab

如何创建一个由其他两个向量的随机抽样组成的向量？

例如

向量 1 [1, 3, 4, 7]，向量 2 [2, 5, 6, 8] 随机向量 [从向量 1 或 2（值 1 或 2）随机抽取，从向量 1 或 2 随机抽取（值 3）或5）...等]

最后，如何让 matlab 重复这个过程 n 次来绘制结果分布？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:34:39.230

有很多方法可以做到这一点。一种可能性是：

```
tmp=round(rand(size(vector1)))
res = tmp.*vector1 + (1-tmp).*vector2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T22:05:02.463

如果我理解您的问题，那么您正在选择两个随机数。首先你决定是选择向量1还是向量2；接下来，您从所选向量中选择一个元素。

以下代码利用了 vector1 和 vector2 长度相同的事实：

```
N = 1000;
sampleMatrix = [vector1 vector2];
M = numel(sampleMatrix);
randIndex = ceil(rand(1,N)*M); % N random numbers from 1 to M
randomNumbers = sampleMatrix(randIndex); % sample N times from the matrix 
```

然后，您可以显示结果，例如

```
figure; hist(randomNumbers); % draw a histogram of numbers drawn 
```

当vector1 和vector2 有不同的元素时，就会遇到问题。如果你将它们连接起来，你最终会更频繁地从较长的向量中挑选元素。解决此问题的一种方法是从两个数组中创建随机抽样，然后在它们之间进行选择：

```
M1 = numel(vector1);
M2 = numel(vector2);
r1 = ceil(rand(1,N)*M1);
r2 = ceil(rand(1,N)*M2);
randMat = [vector1(r1(:)) vector2(r2(:))]; % two columns, now pick one or the other
randPick = ceil(rand(1,N)*2);
randomNumbers = [randMat(randPick==1, 1); randMat(randPick==2, 2)]; 
```

在重新阅读时，也许您只想为向量的所有元素选择“从 1 或 2 中选择元素 1”，然后选择“从 1 或 2 中选择元素 2”等。在这种情况下，做

```
N=numel(vector1);
randPick = ceil(rand(1,N)*2);
randMat=[vector1(:) vector2(:)];
randomNumbers = [randMat(randPick==1, 1); randMat(randPick==2, 2)]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T20:51:18.173

更一般地说，如果 X 是一个矩阵，并且对于每一行，您想从随机选择的列中抽取样本，您可以使用循环来执行此操作：

```
y = zeros(size(X,1),1);
for ii = 1:size(X,1)
    y(ii) = X(ii,ceil(rand*size(X,2)));
end 
```

您可以通过 sub2ind 使用巧妙的索引来避免循环：

```
idx_n = ceil(rand(size(X,1),1)*size(X,2));
idx   = sub2ind(size(X),(1:size(X,1))',idx_n);
y = X(idx); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T20:41:04.030

要获得一个混合样本，您可以使用以下代码片段的想法（不是最佳的，但可能足够清晰）：

```
a        = [1, 3, 4, 7];
b        = [2, 5, 6, 8];
selector = randn(size(a));
sample   = a.*(selector>0) + b.*(selector<=0); 
```

对于`n`示例，将上面的代码放在一个`for`循环中：

```
for k=1:n
    % Sample code (without initial "samplee" assignments)
    % Here do stuff with the sample
end; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-17T17:29:45.583

这个问题可以使用函数[datasample](https://de.mathworks.com/help/stats/datasample.html)来解决。将两个向量合并为一个并应用该函数。与其他答案中的手工版本相比，我更喜欢这种方法。它为您提供了更大的灵活性来选择您真正想要的东西，同时是一个单线。

# meteor - 如何在集合更新时重新呈现模板

> ID：16024138
> 
> 赞同：0
> 
> 时间：2013-04-15T20:26:54.803
> 
> 标签：meteor

鉴于此模板

```
<template name="content">
  {{#each children}}
    I'm a child
  {{/each}}
  <button name="create">Create</button>
</template> 
```

和这段代码

```
Template.content.children = ->
  Children.find({_id: {$in: Session.get('parent').children}})

Template.content.events
  'click button' : (event) ->
    child = Children.insert({created_at: new Date()})
    Parents.update(Session.get('parent')._id, {$push: {children: child}}) 
```

如何让模板自动更新？如果发现如果我将“父”会话变量更改为其他内容，然后返回原始会话变量，它就可以工作，我确实看到了所有的孩子，但我希望它是自动的。

基本上，我只想在插入新孩子时自动更新一个孩子列表。但显然，我在这里做错了什么......也许这根本不是正确的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-02T17:55:20.683

这应该有效：

```
dep = new Deps.Dependency()

Template.content.children = ->
  dep.depend()
  Children.find({_id: {$in: Session.get('parent').children}})

Template.content.events
  'click button' : (event) ->
    child = Children.insert({created_at: new Date()})
    Parents.update(Session.get('parent')._id, {$push: {children: child}})
    dep.changed() 
```

我真的不知道为什么您的初始代码不会自动更新，因为集合中的更改会导致依赖函数的反应性，所以这种方法只是强制反应性。

**编辑**

我看到这个问题很老了，因为它低于 1.0，所以 Meteor 变化很大，所以它可能是旧版本的状态。我的回复适用于 0.8.0 版。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T00:58:40.617

尝试这个

```
Template.content.children = ->
  parent = Session.get('parent')
  Children.find({_id: {$in: parent.children}}) 
```

# vim - 删除给定模式周围的所有内容

> ID：16024143
> 
> 赞同：0
> 
> 时间：2013-04-15T20:27:08.937
> 
> 标签：vim, command-line

我有一个文本文件，其中包含由制表符分隔的几列，并且有数千行是这样的：

```
Foo  Bar  foo@bar.com  01.01.0001  SomeMoreStuff 
```

现在我想只提取电子邮件，`foo@bar.com`在这种情况下。

`vim`使用或任何其他 CLI 工具删除电子邮件前后的所有内容最简单的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T20:36:39.100

以下命令将打印第三列：

```
cut -f3 file_name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T20:33:37.227

使用**awk**；

```
awk '$0=$3' file 
```

使用纯**vim**

试试这一行：

```
:%s/.*\t\([^@]\+@[^\t]\+\).*/\1/ 
```

如果您确定电子邮件位于第 3 列，您也可以尝试：

```
:%s/\v([^\t]*\t){2}([^\t]+).*/\2/ 
```

或者如果你喜欢使用**vim + awk** :)

```
:%!awk '$0=$3' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T20:34:33.417

对于命令行，一个简单的 awk 就可以完成这项工作：

```
awk '{print $3}' inFile 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-15T20:40:37.090

在 Vim 中，我可以通过使用一个简单的宏来避免不得不提出可靠替换的严峻前景。

首先，录制宏：

```
qq
0
d2f<tab> <-- this is a tab key
f<tab>   <-- this is a tab key
D
q 
```

其次，将下面一行中的宏应用到缓冲区的末尾：

```
:+1,$norm @q 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T20:38:29.923

在 bash 中：

```
while read -a ARRAY; do echo ${ARRAY[2]}; done < input 
```

perl 在 awk 模式下

```
perl -lane 'print $F[2]' input 
```

# r - 如何使用 R 创建 ADBUDG 经济学营销模型

> ID：16024145
> 
> 赞同：1
> 
> 时间：2013-04-15T20:27:13.173
> 
> 标签：r, google-analytics, analytics

所以我试图重新创建[这篇博](http://blogs.adobe.com/digitalmarketing/industries/media-and-entertainment/your-paid-search-is-cannibalizing-your-natural-search-use-r-to-predict-how-much-you-should-be-spending/)文，但作者没有给出非常详细的使用**R**的步骤。

所以，我有[这组数据](http://pastebin.com/rA5pSMzr)，其中包含电子商务网站的付费搜索总支出、品牌支出、非品牌支出、付费点击（简称为点击）、自然访问、总访问、访问者和交易。

我试图自己做第一部分，并得到了这个输出：

```
> fit <- lm(organic.visits ~ visits + clicks +visitors + transactions, data=mydata)
> summary(fit)

Call:
lm(formula = organic.visits ~ visits + clicks + visitors + transactions, 
    data = mydata)

Residuals:
    Min      1Q  Median      3Q     Max 
-5916.6 -1100.9  -237.4   811.6  8444.0 

Coefficients:
               Estimate Std. Error t value Pr(>|t|)    
(Intercept)  7028.56997  502.55911  13.986  < 2e-16 ***
visits          1.15842    0.04406  26.295  < 2e-16 ***
clicks          0.46578    0.09884   4.712 3.39e-06 ***
visitors       -1.13322    0.04442 -25.513  < 2e-16 ***
transactions   -1.11505    0.19823  -5.625 3.49e-08 ***
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1

Residual standard error: 1903 on 399 degrees of freedom
Multiple R-squared:  0.8236,    Adjusted R-squared:  0.8219 
F-statistic: 465.8 on 4 and 399 DF,  p-value: < 2.2e-16 
```

首先：我想知道我这样做是否正确，或者是否有更好的方法来做到这一点。

第二：我想知道如何做文章的第二部分，即 ADBUDG 经济营销模型。我试图在网上搜索，但没有找到任何有用的信息来帮助完成这部分分析。作者没有给出如何做的任何指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T19:02:00.060

首先，您需要将自然搜索点击设置为自变量（在“~”左侧），并将其他变量设置为因变量（其中付费搜索点击应该是其中之一）。

然后查看付费搜索点击的估算值，了解它们如何影响自然搜索。

要找到 ADBUDG 模型参数的最佳估计值，您需要使用某种求解器。首先创建方程 (b + (ab) * 花^c / (d + 花 ^ c))，然后通过从实际值中减去 ADBUDG 预测值来计算每个点的误差。然后，您可以使用 Excel 的求解器或 R 中的求解器来找到最小化总平方误差的 a、b、c 和 d。

a 为您提供上限，b 为您提供基于数据的下限。

# asp.net - 在 PostBack 的 DataBinding 之后在 GridView 内的 UpdatePanel 内调用 TextBox 的 TextChanged 事件

> ID：16024146
> 
> 赞同：0
> 
> 时间：2013-04-15T20:27:27.620
> 
> 标签：asp.net, ajax, gridview, updatepanel, postback

我在 GridView 内部的 UpdatePanel 中有一个 TextBox。UpdatePanel 的目的是在调用 TextChanged 事件时更新 TextBox（就像我的[上一个问题](https://stackoverflow.com/questions/15945998/textboxchanged-event-not-firing-in-update-panel)一样）。

这是我在阅读该主题后开始工作的。但我现在遇到的问题是我必须在 PostBack 向 GridView 添加新数据，并且以下新行不会触发 TextChanged 事件。只有 GridView 中的第一行可以。

因此，我想在 RowCreated 事件中为 TextChanged 事件设置 EventHandler，以便在创建新行之前设置处理程序，但我似乎仍然在这里遗漏了一些东西。任何线索都会很高兴地采取:)

PS：如果您想查看我的一些代码，我现在必须参考上一个问题中的代码，因为我目前在家。我明天一上班就可以发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:00:18.643

笨蛋我又来了！在代码隐藏中，AsyncPostback 从未到达 gridview 在回发时构建新行的部分。因此，TextChanged 事件仅发生在第一行，因为它是唯一在没有回发发生时也构建的行。

这里棘手的部分是在 AsyncPostback 中找出最后一次 Page_Load 是否通过 PostBack 调用。我想我通过一种非常肮脏的方式解决了它：在 PostBack 上，我在 Page_Load 中向 hiddenField 写入了某个值。之后我检查了该值是否仍在 hiddenField 中。如果是这样，那么我知道在 AsyncPostback 中我必须走 PostBack 的路线，如果不是，则不是。

如果有人想出更好的方法来实现这一点，欢迎您赐教:)

# ios - UIButton 上奇怪的 CAGradientLayer 错误

> ID：16024150
> 
> 赞同：1
> 
> 时间：2013-04-15T20:27:32.720
> 
> 标签：ios, uibutton, quartz-core, cagradientlayer

我正在尝试对我的 ios 应用程序中的所有按钮应用一个小渐变。我为 UIButton 创建了一个类别，在其中添加了这个函数，它基本上为按钮添加了字幕、边框和渐变层。

该函数在视图中调用确实加载：

```
- (void)viewDidLoad
{
  [super viewDidLoad];
  [_myButton buttonWithSubtitle:@"test subtitle"];

} 
```

和类别功能

```
- (void)buttonWithSubtitle:(NSString*)subtitleText
{
  UILabel *subTitle = [[UILabel alloc] initWithFrame:CGRectMake(80, 20, 100, 30)];
  [subTitle setText:subtitleText];
  [subTitle setTextColor:[UIColor colorWithRed:(144.0 / 255.0) green:(144.0 / 255.0) blue:(144.0 / 255.0) alpha:1.0]];
  [subTitle setBackgroundColor:[UIColor clearColor]];
  [subTitle setFont:[UIFont fontWithName:@"American Typewriter" size:12]];
  [self.titleLabel setFrame:CGRectMake(30, 20, 100, 30)];

  [self setTitle:@"Main title" forState:UIControlStateNormal];
  [self addSubview:subTitle];

  CAGradientLayer *btnGradient = [CAGradientLayer layer];
  btnGradient.frame = self.bounds;
  btnGradient.colors = [NSArray arrayWithObjects:
                        (id)[[UIColor colorWithRed:255.0f / 255.0f green:255.0f / 255.0f blue:255.0f / 255.0f alpha:1.0f] CGColor],
                        (id)[[UIColor colorWithRed:234.0f / 255.0f green:234.0f / 255.0f blue:234.0f / 255.0f alpha:1.0f] CGColor],
                        nil];

  [self.layer setMasksToBounds:YES];
  [self.layer setCornerRadius:5.0f];
  [self.layer setBorderWidth:0.8f];
  [self.layer setBorderColor:[[UIColor colorWithRed:200.0f / 255.0f green:200.0f / 255.0f blue:200.0f / 255.0f alpha:1.0f] CGColor]];

  [self.layer insertSublayer:btnGradient atIndex:0];
} 
```

我的问题是，当调用上述函数时，渐变清晰可见，并且按钮具有所需的设计。但是，我也有一个没有字幕的按钮类型，我使用下面的其他类别功能进行设置。

```
- (void)defaultButton
 {
  CAGradientLayer *btnGradient = [CAGradientLayer layer];
  btnGradient.frame = self.bounds;
  btnGradient.colors = [NSArray arrayWithObjects:
                        (id)[[UIColor colorWithRed:255.0f / 255.0f green:255.0f / 255.0f blue:255.0f / 255.0f alpha:1.0f] CGColor],
                        (id)[[UIColor colorWithRed:234.0f / 255.0f green:234.0f / 255.0f blue:234.0f / 255.0f alpha:1.0f] CGColor],
                        nil];

  [self.layer setMasksToBounds:YES];
  [self.layer setCornerRadius:5.0f];
  [self.layer setBorderWidth:0.8f];
  [self.layer setBorderColor:[[UIColor colorWithRed:200.0f / 255.0f green:200.0f / 255.0f blue:200.0f / 255.0f alpha:1.0f] CGColor]];

  [self.layer insertSublayer:btnGradient atIndex:0];
} 
```

像以前一样使用在 viewdidload 中调用的这个函数会导致按钮完全没有渐变或背景（按钮有清晰的背景颜色。我可以通过按钮看到我的视图控制器的视图背景）。

```
- (void)viewDidLoad
{
  [super viewDidLoad];
  [_myButton defaultButton];

} 
```

我所有的按钮都设置为带有图像和默认标题的自定义按钮。谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:07:02.903

发现了问题，虽然我不知道为什么带字幕的代码有效，但问题是，启用自动布局后，您的按钮在 viewDidLoad 方法期间还没有框架。

当按钮有图层时必须稍后应用渐变，例如在方法中

```
viewDidLayoutSubviews 
```

请参阅：[无法在 iOS6 中使用启用的故事板自动布局执行自定义 UIButton](https://stackoverflow.com/questions/13368197/cant-do-custom-uibutton-in-ios6-with-enabled-storyboard-autolayout)

# javascript - 在 jQuery.when 期间忽略超时

> ID：16024153
> 
> 赞同：0
> 
> 时间：2013-04-15T20:27:47.133
> 
> 标签：javascript, jquery, jquery-deferred

我有一些与 .when 调用并行运行的 jQuery ajax 请求。我想忽略那些在超时后没有返回的。

这是它的一个简单形式：

```
var ajax1 = $.ajax({url: url1,
    timeout: 1000,
    success: function() {
        console.log("1 done");
    }
});

var ajax2 = $.ajax({url: url2,
    timeout: 1000,
    success: function() {
        console.log("2 done");
    }
});

$.when(ajax1, ajax2).done(function() {
    console.log("all done");
}); 
```

在上面的例子中，如果 url1 没有 1 秒响应，我仍然想达到“全部完成”。我知道如何在每个 ajax 调用中捕获超时错误，但我不知道如何将错误标记为已忽略。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T20:30:55.443

如果您想要完成 ajax 调用的所有方式（成功、错误、超时等），而不仅仅是成功完成的方式，您不能只使用[`.always()`](http://api.jquery.com/deferred.always/)而不是：`.done()`

```
$.when(ajax1, ajax2).always(function() {
    console.log("all done");
}); 
```

传递给`.always()`回调的参数可用于确定 ajax 调用的成功或错误类型。

# ruby-on-rails - 如何改回 first_app 目录？

> ID：16024154
> 
> 赞同：0
> 
> 时间：2013-04-15T20:27:49.880
> 
> 标签：ruby-on-rails, ruby

我是 Ruby 的新手，我正在努力学习 Hartl 教程。今天早上我遇到了几个问题，我担心我可能会让其中一个变得更糟。

我在教程中做得很好，直到我到达第 1 章的 Heroku 部署部分并意识到我还没有设置 Sublime Text 2 “subl”命令，以便我的终端可以与 Sublime Text 交互。

然后我继续追查如何让 subl 命令工作。在试图弄清楚这一点时，我遇到了这个线程（[在终端中安装 Sublime Text 的命令行工具 'subl'，权限被拒绝？](https://stackoverflow.com/questions/10196449/installing-sublime-texts-command-line-tool-subl-in-terminal-permission-denie)）并继续将目录更改为“mkdir bin”，以便我可以运行“sudo ln -s "/Applications/Sublime Text 2.app/Contents/SharedSupport/bin/subl" /usr/bin/subl" 并让我的 subl 命令行工作。

好吧，当我输入“sudo ln -s ....”行时，它要求输入密码，基本上说我应该小心我在做什么。鉴于此，我只想返回我的“first_app”目录并尝试以不同的方式解决问题。唯一的问题是，当我点击“cd first_app”时，它告诉我没有这样的文件或目录......我现在开始有点吓坏了......

1.  我怎样才能回到 first_app 目录？确定它没有消失吗？！<--最重要！！
2.  如果我能回到 first_app 目录，我怎么能得到 subl 命令行，以便我可以继续部署等等......？

在我尝试度过这个非常令人沮丧的阶段时，我们非常感谢任何和所有的帮助。

更新：**我刚刚把它改回了 first_app 目录**——让这个 subl 命令行工作的最好方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:45:53.150

根据您所在的目录，如果您尝试这样做`cd first_app`，它可能不是您当前所在目录的子目录。

一些基本的 linux 命令可以帮助您：

```
cd .. <-- Moves up a level
pwd   <-- Shows where you currently are in the directory structure
ls    <-- Shows files/folders that exist in the directory you are in. 
```

# ios - iCloud ios 邮件联系人

> ID：16024158
> 
> 赞同：0
> 
> 时间：2013-04-15T20:28:06.077
> 
> 标签：ios, contacts, icloud

我想开发一个 iOS 应用程序，它可以访问我的 iCloud 邮件联系人。我可以这样做吗，Apple 允许这样的编码吗？或者可能有一些私有API？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T00:28:41.267

苹果为此公开了[地址簿框架](http://developer.apple.com/library/ios/#documentation/AddressBook/Reference/AddressBook_iPhoneOS_Framework/_index.html)。具体来说，请[在此处](http://developer.apple.com/library/ios/#documentation/AddressBook/Reference/ABGroupRef_iPhoneOS/Reference/reference.html#//apple_ref/doc/uid/TP40007211)阅读如何查找特定组，例如 iCloud。

# objective-c - 在 Mac 上使用 ZXingObjC 创建 QR 条码

> ID：16024161
> 
> 赞同：4
> 
> 时间：2013-04-15T20:28:13.720
> 
> 标签：objective-c, macos, cocoa, qr-code

我正在尝试使用[http://github.com/TheLevelUp/ZXingObjC](http://github.com/TheLevelUp/ZXingObjC)在我的 Mac 应用程序上创建 QR 码。

它适用于每种条形码类型，但在 QRcode 上返回 nil！“结果”和“错误”都是空的。这是我的代码：

```
NSError* error = nil;
ZXMultiFormatWriter* writer = [[ZXMultiFormatWriter alloc] init];
ZXBitMatrix* result = [writer encode:@"12345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678"
                              format:kBarcodeFormatQRCode
                               width:1750
                              height:1750 hints:[[ZXEncodeHints alloc] init] error:&error];
if (result) {
    CGImageRef image = [[ZXImage imageWithMatrix:result] cgimage];
    self.image.image = [[NSImage alloc] initWithCGImage:image size:NSMakeSize(1750, 1750)];
} else {

    NSLog(@"error: %@", error);
} 
```

它有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-17T18:31:37.317

我遇到过同样的问题。这是解决方法。

1.  打开文件`ZXingObjC\qrcode\encoder\ZXEncoder.m`

2.  找到这一行：`int minPenalty = NSIntegerMax;`。上面一定有一个警告：**从 'long' 到 'int' 的隐式转换将 9223372036854775807 更改为 -1**。这就是问题的原因。在我的 64 位 Mac 上`NSIntegerMax`返回并获得价值（因为类型不能存储这么大的数字）。`9223372036854775807``minPenalty``-1``int`

3.  替换`NSIntegerMax`by `INT_MAX`。它应该返回正确的值：`2147483647`. `NSIntegerMax`根据[这个问题](https://stackoverflow.com/questions/4800015/what-is-the-maximum-value-of-nsinteger)的答案，这就是 32 位机器上返回的数字。

4.  运行应用程序，您将获得您的二维码！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T01:06:41.577

尝试使用另一种方法，而不是使用 HINTS，仅使用：
`[writer encode:@"yourmeganumber" format:kBarcodeFormatQRCode width:xxxx height:xxxx error:&error];`

这对我有用
尝试让我知道

# ios - 在 IOS 中解析嵌套的 JSON 代码

> ID：16024163
> 
> 赞同：0
> 
> 时间：2013-04-15T20:28:24.093
> 
> 标签：ios, json, parsing, nsarray, nsmutabledictionary

我正在尝试在 iOS 中解析以下 JSON 代码。JSON 代码由编号为 0 到 x 的游戏数组组成。我一直在四处寻找，但似乎找不到任何具有这种格式的 JSON 的示例。

```
{
"command":"show_my_games",
"0":{"gameid":"7","foruserid":"16","againstuserid":"0","casefor":"","caseagainst":"","status":"0","argumentid":"7","againstusername":null,"forusername":"Gem","argument":"argument 1"},
"1":{"gameid":"8","foruserid":"15","againstuserid":"16","casefor":"","caseagainst":"","status":"0","argumentid":"23","againstusername":"Gem","forusername":"Nick","argument":"argument 2"},
"2":{"gameid":"9","foruserid":"18","againstuserid":"16","casefor":"","caseagainst":"","status":"0","argumentid":"26","againstusername":"Gem","forusername":"Nick","argument":"argument 3"}
} 
```

我创建了一个游戏对象，对于 JSON 数组中的每个项目，我想创建一个新的游戏对象，并将其添加到游戏数组中。我在解析 JSON 时遇到问题，我将不胜感激任何帮助或建议。

我尝试使用的代码是

```
 NSMutableDictionary *json = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&err];

            for (NSMutableDictionary * gameItem in json) {
                Game *obj = [Game new];
                obj.GameID=[gameItem objectForKey:@"gameid"];
                obj.Argument=[gameItem objectForKey:@"argument"];
                obj.CaseFor=[gameItem objectForKey:@"casefor"];
                obj.CaseAgainst=[gameItem objectForKey:@"caseagainst"];
                obj.CaseForOwner=[gameItem objectForKey:@"forusername"];
                obj.CaseAgainstOwner=[gameItem objectForKey:@"againstusername"];
                obj.CaseForOwnerID=[gameItem objectForKey:@"foruserid"];
                obj.CaseAgainstOwnerID=[gameItem objectForKey:@"againstuserid"];
                //add to the players game array
                [myGameArray addObject:obj];

            }
            NSLog(@"array: %@", myGameArray); 
```

当我尝试从 JSON 数组中提取数据时，我收到以下错误。-[__NSCFString objectForKey:]：无法识别的选择器发送到实例 0x1f06f4e0

提前致谢，

缺口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:16:43.410

由于键的对象`command`不是字典，因此代码正在中断。

您可以像这样修改代码。

```
 for (NSString *key in json){
        id object = json[key];
        if ([object isKindOfClass:[NSDictionary class]]) {
           Game *obj = [Game new];
           obj.GameID=[gameItem objectForKey:@"gameid"];
           obj.Argument=[gameItem objectForKey:@"argument"];
           obj.CaseFor=[gameItem objectForKey:@"casefor"];
           obj.CaseAgainst=[gameItem objectForKey:@"caseagainst"];
           obj.CaseForOwner=[gameItem objectForKey:@"forusername"];
           obj.CaseAgainstOwner=[gameItem objectForKey:@"againstusername"];
           obj.CaseForOwnerID=[gameItem objectForKey:@"foruserid"];
           obj.CaseAgainstOwnerID=[gameItem objectForKey:@"againstuserid"];
           //add to the players game array
          [myGameArray addObject:obj];
    } 
```

我建议`initWithDictionary:(NSDictionary *)dictionary`在你的`Game`课堂上做一个更简洁的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T21:23:47.707

您需要将类型 gameItem " `NSMutableDictionary`" 更改为 " `id`" 并添加检查 -`if ([gameItem isKindOfClass: [NSDictionary Class]])`在这种情况下初始化 " `obj`"

# python - 错误 - __init__() 正好采用 2 个参数（1 个给定）

> ID：16024166
> 
> 赞同：3
> 
> 时间：2013-04-15T20:28:31.377
> 
> 标签：python

我正在尝试从另一个 .py 初始化类（extraropt），但它给了我一个错误，我已经搜索过但我没有找到解决方案。

这是我调用的一个 py 的代码：

**主要.py：**

```
class GameWindow(ui.ScriptWindow):
    def __init__(self, stream):
        import extraop

        exec 'extraop.extraropt().Show(stream)' 
```

这是我试图调用的一个 py 的代码（仅限 init 和 del）：

**外部操作.py**

```
class extraropt(ui.Window):
    def __init__(self, stream):
        ui.Window.__init__(self)
        self.BuildWindow()
        self.stream=stream
    def __del__(self):
        ui.Window.__del__(self) 
```

它给出了这个错误：

```
Error - __init__() takes exactly 2 arguments (1 given) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T20:33:41.283

在行

```
exec 'extraop.extraropt().Show(stream)' 
```

您`extraropt.__init__()`通过创建`extraopt`. 在您的代码中，您表明`extraropt.__init__()`需要第二个 ( `stream`) 参数，因此您必须将其传入。

```
extraop.extraropt(stream).Show() 
```

顺便说一句，你没有理由`exec`像我上面那样做而不是明确地调用它。您也没有理由`__del__()`定义一个方法，因为`__del__()`无论如何您只调用父方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T20:31:03.897

您需要以这种方式初始化父级：

```
super(extraropt, self).__init__(stream) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-15T20:31:18.217

该`stream`行中的变量`exec 'extraop.extraropt().Show(stream)'`应该传递给`extraropt`类的构造函数，如下所示：

```
exec 'extraop.extraropt(stream).Show()' 
```

# ios - AFHTTPClient 成功和失败块中的 CFRunLoopRunInMode()

> ID：16024169
> 
> 赞同：0
> 
> 时间：2013-04-15T20:28:45.340
> 
> 标签：ios, objective-c, objective-c-blocks, afnetworking, cfrunloop

我试图用来`CFRunLoopRunInMode()`避免在`[AFHTTPClient getPath:...]`完成块中返回。

**我的代码如下所示：**

```
NSLog(@"start");
__block BOOL someCondition = NO;
AFHTTPClient *client = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:@"http://domain.com"]];
[client getPath:@"my/path" parameters:nil success:^(AFHTTPRequestOperation *operation, id responseObject) {
    NSLog(@"success");
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    dispatch_async(dispatch_get_main_queue(), ^{
        NSLog(@"async log");
        someCondition = YES;
    });
    while (!someCondition) {
        CFRunLoopRunInMode(kCFRunLoopDefaultMode, 0.5, YES);
    }
    NSLog(@"failure");
}]; 
```

**我预计输出是：**

```
start
async log
failure 
```

**但相反，我只得到：**

```
start 
```

`CFRunLoopRunInMode()`返回`kCFRunLoopRunHandledSource`，但调度队列从不执行提交的块。如果我在完成块之外运行相同的代码，则输出符合预期。

我无法弄清楚**为什么**从完成块运行时调度队列没有被处理。

**有人可以解释一下为什么会这样吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:35:23.463

> 我无法弄清楚为什么从完成块运行时调度队列没有被处理。

因为您没有“运行”调度队列（没有“运行”调度队列之类的东西）。你运行了运行循环。调度队列是相关的，但是是另一回事。在串行队列（如 main）上一次只能运行一个块。在您的块完成之前，不能安排其他块。GCD 中没有 API 可以规避这一点。这通常是一件非常好的事情，因为它为运行循环操作中并不总是存在的队列操作提供了确定性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-10T09:35:15.420

AFNetwork 的成功和失败块都调度在主队列中，你在失败块中写入的异步块也调度在主队列中。

在故障块完成之前，您的 GCD 同步块将运行。因为'while'条件永远不会为假，所以失败块永远不会完成，也永远不会有机会被执行。

# php - 基于 PHP 中的日期选择器动态进行查询

> ID：16024176
> 
> 赞同：0
> 
> 时间：2013-04-15T20:29:06.007
> 
> 标签：php, sql

我试图在日期选择器中显示用户选择的 2 个日期之间的一些数据，但我没有找到正确编写查询的方法。，总是得到这个错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'BETWEEN2013-04-14AND2013-04-15GROUP BY created_at ORDER BY created_at' at line 1 
```

这是我到目前为止写的：

```
$sd=$_POST['sd'];
$ed=$_POST['ed'];

$query = mysql_query("SELECT count(name) As Subscribers,CAST(`created_at` AS DATE) As Date FROM gcm_users WHERE created_at BETWEEN".$_POST['sd']."AND".$_POST['ed']."GROUP BY created_at ORDER BY created_at")or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T20:30:41.430

添加空格：

```
$query = mysql_query("SELECT count(name) As Subscribers,CAST(`created_at` AS DATE) As Date FROM gcm_users WHERE created_at BETWEEN '".$_POST['sd']."' AND '".$_POST['ed']."' GROUP BY created_at ORDER BY created_at")or die(mysql_error()); 
```

# python - 根据python中子列表的索引对列表列表进行排序

> ID：16024179
> 
> 赞同：0
> 
> 时间：2013-04-15T20:29:18.767
> 
> 标签：python, list, indexing, sublist

我在一个更大的脚本中间，需要按子列表的索引来排序一个列表。我的根列表包含对应于 [纬度、经度、海拔、距离] 的数字子列表。我需要在子列表中按距离对根列表进行排序。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T20:32:43.443

您可以使用 an[`operator.itemgetter`](http://docs.python.org/3/library/operator.html?highlight=operator.itemgetter#operator.itemgetter)根据列表的元素对列表进行排序：

```
import operator
lst = [...]
lst.sort(key=operator.itemgetter(3)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T20:32:12.310

您需要明确说明您希望列表排序的值是什么；在您的情况下，您的列表中每个元素的第 4 个元素。一种方法是使用方法`key`的关键字参数`sort`并向其传递一个提取该元素的函数（lambda）：

```
>>> l = [[1,2,3,3],[1,2,3,2],[1,2,3,1]]
>>> l.sort(key=lambda s: s[3])
>>> l
[[1, 2, 3, 1], [1, 2, 3, 2], [1, 2, 3, 3]]
>>> 
```

# java - 为什么是 myArrayList.size(); 产生不正确/巨大的数字？

> ID：16024180
> 
> 赞同：0
> 
> 时间：2013-04-15T20:29:21.417
> 
> 标签：java, for-loop, arraylist, binary

基本上，我正在尝试编写一个将数字从基数 2 转换为基数 10 的程序。我尝试做的是将本网站上“加倍方法”下列出的过程转换为 for 循环，但由于某种原因，数字我越来越大了。

基本公式是（2 * previousTotal）+（保存用户输入二进制数的ArrayList的currentDigit）=previousTotal。

因此，对于二进制的 1011001，数学将是：

*   (0 x 2) + 1 = 1
*   (1 x 2) + 0 = 2
*   (2 x 2) + 1 = 5
*   (5 x 2) + 1 = 11
*   (11x 2) + 0 = 22
*   (22 x 2) + 0 = 44
*   (44 x 2) + 1 = 89

然而，控制台打印出 6185 作为结果。我认为这可能与我使用字符的 ArrayList 有关，但是 charWhole.size() 返回 7，这是用户二进制数中有多少位。只要我做 charsWhole.get(w); 但是，我开始得到大数字，例如 49。我非常感谢一些帮助！

我写出了这个循环，根据我在整个代码中放置的一些打印语句和我的变量 addThis 似乎是问题所在。控制台打印出最终总数为 6185，而以 10 为底的 1011001 实际上是 89。

```
public static void backto2(){
    System.out.println("What base are you coming from?");
    Scanner backToB10 = new Scanner(System.in);
    int bringMeBack = backToB10.nextInt();

    //whole
    System.out.println("Please enter the whole number part of your number.");
    Scanner eachDigit = new Scanner(System.in);
    String theirNumber = eachDigit.nextLine();

    String str = theirNumber;
    ArrayList<Character> charsWhole = new ArrayList<Character>();
    for (char testt : str.toCharArray()) {
      charsWhole.add(testt);
    }

    System.out.println(theirNumber); // User's number
    System.out.println(charsWhole); // User's number separated into elements of an ArrayList
    System.out.println(charsWhole.size()); // Gets size of arrayList, comes out as 7 which seems fine.

    int previousTotal = 0, addThis = 0, q =0;
    for( int w = 0; w < charsWhole.size(); w ++) {
        addThis = charsWhole.get(w); //current digit of arraylist PROBLEM           
        q = previousTotal *2;
        previousTotal = q + addThis; // previous total gets updated
        System.out.println(q);
        System.out.println(addThis);

        System.out.println(q + " and " + addThis + "equals " + previousTotal);

    }

    System.out.println(previousTotal); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T20:34:21.587

您正在尝试将字符添加到整数。隐式转换使用字符的 ASCII 值，因此“1”被转换为 49，而不是 1，因为 49 是字符“1”的代码。减去“0”得到实际的整数值。

```
addThis = charsWhole.get(w) - '0'; 
```

这是有效的，因为数字 0-9 在 ASCII 中表示为代码 48-57，因此实际上，对于“1”，您将减去 49-48 得到 1。

当字符超出允许的字符范围时，您仍然必须处理情况。

**编辑**

Java 使用 Unicode，但对于数字 0-9 的代码而言，ASCII 和 Unicode 中的代码是相同的（48 到 57，或 0x30 到 0x39）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T20:32:50.330

问题是您使用的是字符而不是它们代表的数值。在行

```
addThis = charsWhole.get(w); 
```

的值`addThis`是字符的 ascii 值。对于“0”，这是 48。请改用：

```
addThis = Integer.parseInt(charsWhole.get(w)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T20:41:24.847

解决相同问题的另一个建议：

```
addThis = charsWhole.getNumericValue(w); 
```

请参阅[此处](http://www.tutorialspoint.com/java/lang/character_getnumericvalue.htm)了解更多信息。

# jquery - 从列表中删除几个选择选项

> ID：16024181
> 
> 赞同：2
> 
> 时间：2013-04-15T20:29:22.507
> 
> 标签：jquery

代码从数据库中读取值，并根据它从选择列表中删除选项。我已经设法使用 jQuery 函数 filter().remove 来删除不必要的选项，但我不知道如何删除任意选项，而不是这样。例如如何删除 2,3,4,5 选项？选择看起来像这样：

```
<select name="year">
<option value="1">First</option>
<option value="2">Second</option>
<option value="3">Third</option>
<option value="4">Fourth</option>
<option value="5">Fifth</option>
<option value="6">Sixth</option>
</select> 
```

以及删除选项的代码：

```
$(document).ready(function(e) {
$('[name=year] option').filter(function(){
return parseInt(this.value) <4 
}).remove();    }); 
```

此代码删除所有值低于 4.Tnx 的选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T20:39:32.247

我将使用您的原始方法，并构建一个要删除的值数组，如下所示：

```
var ary = [2,3,4,5];
$('[name=year] option').filter(function () {
    return ($.inArray(parseInt(this.value),ary) > -1);
}).remove(); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/vpV3q/2/)**

# ios - NSMutableArray 调试

> ID：16024182
> 
> 赞同：0
> 
> 时间：2013-04-15T20:29:23.303
> 
> 标签：ios, objective-c, debugging, nsmutablearray

我现在阅读了 Apple 关于集合的指南，并尝试查看他们的代码。当我一步一步看代码时，我看到了一些奇怪的东西

![在此处输入图像描述](https://i.stack.imgur.com/d0133.png)

为什么在右列中的字符串不在其索引下？为什么字符串`@"222"`显示为`nil`？

# racket - DrRacket 自动完成没有看到我的源代码中定义的函数

> ID：16024184
> 
> 赞同：10
> 
> 时间：2013-04-15T20:29:28.627
> 
> 标签：racket

我正在将 Racket 和 DrRacket 用于一个小项目（我正在尝试学习两者并使用它们来教我的一个朋友一些函数式编程）。

我刚刚发现了自动完成功能（C-/），它与库函数一起工作得很好，但它看不到我自己的函数。

我还添加了

```
(provide (all-defined-out)) 
```

在我的源文件的开头（我认为自动完成功能可能看不到符号，因为它们没有被导出）但这并不能解决问题。

DrRacket REPL 中的所有符号都可以访问（我可以评估我的功能并且它们工作正常）。

你能告诉我如何解决这个问题吗？我需要配置一些东西吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T22:25:55.037

我可以确认 DrRacket 目前以这种方式工作。我能给出的最佳建议是提交功能请求（使用“帮助”菜单中的“提交错误报告”），然后交叉手指。

# javascript - 在 JQuery 中访问两个不同的按钮

> ID：16024185
> 
> 赞同：2
> 
> 时间：2013-04-15T20:29:29.630
> 
> 标签：javascript, jquery, html

我是 Web 开发新手，现在正在学习 JQuery。我在这里有一个疑问。这是来自 W3Schools.com 的代码。我想知道如果我在这里再添加一个按钮，我怎样才能只为第一个按钮的点击事件运行这个 JavaScript。

```
<!DOCTYPE html>
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
</script>
<script>
$(document).ready(function(){
  $("button").click(function(){
    $("p").hide();
  });
});
</script>
</head>

<body>
<h2>This is a heading</h2>
<p>This is a paragraph.</p>
<p>This is another paragraph.</p>
<button>Click me</button>
<br />
<button>Second Button</button>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:30:50.123

您可以向按钮添加一个 ID，并通过像这样选择（如果按钮 ID 为“submitForm”）在该 ID 上放置一个点击事件`$("#submitForm")`

实际上，您可以通过多种方式使用 jquery 选择元素，请查看：[http ://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

在您的具体示例中，如果您不想将 ID 放在按钮上，则可以使用 :first 仅访问第一个，如下所示`$("button:first")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T20:34:23.760

改变

```
 $("button").click(function(){
    $("p").hide();
  }); 
```

至

```
 $("button").eq(0).click(function(){
    $("p").hide();
  }); 
```

这只会绑定到第一个按钮的点击事件。请参阅[http://api.jquery.com/eq/](http://api.jquery.com/eq/)。

**[jsFiddle 示例](http://jsfiddle.net/j08691/FXhZ8/)**

# java - 使用 SpriteBatch 时的 LibGDX 模板缓冲区

> ID：16024188
> 
> 赞同：3
> 
> 时间：2013-04-15T20:29:34.423
> 
> 标签：java, opengl-es, libgdx, sprite, stencil-buffer

这是我之前的问题和帖子的延续，请参见[此处](https://stackoverflow.com/questions/15594596/seemlessly-layering-transparent-sprites-in-opengl-es)。感谢我在那里收到的答案，我觉得我能够更接近我的目标，以及进一步学习 OpenGL，但在弄清楚使用模板缓冲区的基础知识后不久，我遇到了一个问题.

似乎当我将精灵绘制到模板缓冲区时，它会绘制整个正方形区域，而不是像我无知地希望的那样仅绘制不完全透明的像素。我隐约明白为什么会这样，但我不确定解决方案在哪里。我已经对模板本身进行了很多试验，并且我修改了 spritebatch 用来丢弃低 alpha 片段的着色器，但我似乎看不到更大的图景。

作为问题的直观示例，我将继续使用我在上一个问题中使用的示例。现在，试图在彼此上画两个圆圈（所以它们完美融合，没有重叠），我得到了这个：

![模板测试](https://i.stack.imgur.com/tnz5W.png)

所以，基本上，有没有办法让我使用 LibGDX 的 Sprite 和 SpriteBatch 功能在复杂形状上使用模板缓冲区（圆圈仅用作示例），还是我需要寻找替代路线？

**编辑 ：：**

```
 Gdx.gl.glClearColor(1, 1, 1, 1);
    Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT | GL20.GL_DEPTH_BUFFER_BIT);

    Gdx.gl.glEnable(GL20.GL_BLEND);
    Gdx.gl.glBlendFunc(GL20.GL_SRC_ALPHA, GL20.GL_ONE_MINUS_SRC_ALPHA);
    Gdx.gl.glEnable(GL20.GL_DEPTH_TEST);
    Gdx.gl.glDepthMask(true);

    batch.begin();
    sprite.draw(batch);
    sprite2.draw(batch);
    batch.end();

    Gdx.gl.glDisable(GL20.GL_DEPTH_TEST); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-07T07:06:51.667

模板编写/测试发生在片段级别。当你画一个圆时，你实际上是在画一个四边形的片段，每个片段可能有纹理，也可能没有纹理。问题在于 GPU 在对片段进行模板测试时并不关心您在片段中写入的颜色。因此，您需要丢弃片段以停止对四边形中您不想写入模板值的部分进行模板写入。

TL;DR 使用“如果（gl_FragColor.a < 0.01）丢弃；” 在片段着色器中确保生成一圈片段（和模板值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T20:54:05.107

Mby 这有帮助。我通过混合和深度测试解决了同样的问题。首先，您需要清晰的深度和颜色位。

```
Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT); 
```

然后你需要启用一些 gl 特性：

```
Gdx.gl.glEnable(GL20.GL_BLEND);
Gdx.gl.glBlendFunc(GL20.GL_SRC_ALPHA, GL20.GL_ONE_MINUS_SRC_ALPHA);
Gdx.gl.glEnable(GL10.GL_DEPTH_TEST);
Gdx.gl.glDepthMask(true); 
```

之后，您可以绘制对象。在我的项目smtng中是这样的：

```
shapeRenderer.setColor(c.getR(), c.getG(), c.getB(), FIELD_ALPHA);
shapeRenderer.filledCircle(p.getPos().x + s.getOffset().x, ApplicationEnv.SCREEN_HEIGHT - p.getPos().y + s.getOffset().x, b.getRadius()); 
```

重要的！绘制后，您为 spriteBatch（或其他）调用 end() 并禁用 depth_test 功能：

```
Gdx.gl.glDisable(GL10.GL_DEPTH_TEST); 
```

结果： [之前](https://dl.dropboxusercontent.com/u/30140314/before.PNG) [之后](https://dl.dropboxusercontent.com/u/30140314/after.PNG)

# python-2.7 - 如何在 ubuntu 12.10 上安装 python-Orange

> ID：16024191
> 
> 赞同：0
> 
> 时间：2013-04-15T20:29:50.753
> 
> 标签：python-2.7

```
sudo apt-get install python-Orange 
```

或者

```
sudo apt-get install python-orange 
```

不工作

```
sudo python setup.py install
sudo python setup.py build 
```

也不能正常工作。

有人可以帮忙吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-28T22:05:30.143

[Python 有两个工具可以轻松安装Python 包索引](https://pypi.python.org/pypi)中列出的所有程序，也称为 PyPi：它们是 easy_install 和 pip。两者都检索最新版本的 Orange（以及任何其他定期更新其 PyPi 条目的包）。

我在 Ubuntu 12.04 (LTS) 上使用 `pip install orange`. 你会看到很多日志行表明 Pip 正在为你下载和编译 Orange。只需等待。当 pip 准备好后，启动 python 并尝试`import orange`. 如果可行，请退出 python 并尝试使用 GUI `python /usr/local/lib/python2.7/dist-packages/Orange/OrangeCanvas/orngCanvas.pyw`（您可能想为那个创建一个 shell 别名或 bash 脚本 :-)

注意：在 12.04 上，我需要先升级 'distribute' 本身，`sudo easy_install -U distribute`但 pip 清楚地表明了这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T05:51:13.867

[https://pypi.python.org/pypi/Orange/2.6/](https://pypi.python.org/pypi/Orange/2.6/)

您需要将该页面上下载的 tarball 解压缩到一个文件夹，然后将目录更改为该文件夹。然后**sudo python setup.py...**说明将起作用（但您应该在“安装”之前“构建”应用程序）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-24T09:39:06.377

转到给定的链接“ [https://pypi.python.org/pypi/Orange/2.6/](https://pypi.python.org/pypi/Orange/2.6/) ”下载包并使用给定命令解压缩文件安装

```
python setup.py build
python setup.py install 
```

注意：- 在安装过程中确保您的网络正常工作，因为它会下载所需的软件包。此外，它可能会在安装时要求 C++ 或 gcc 编译器，并且可能会终止，只需仔细阅读错误并安装需要在 ubuntu 中管理的突触包中的包。

# ruby - 在 Mac OSX 10.5 上安装 RVM

> ID：16024192
> 
> 赞同：1
> 
> 时间：2013-04-15T20:29:54.817
> 
> 标签：ruby, macos, rvm, upgrade

需要在本地使用 SASS/Compass，但是我这台机器上的旧 Mac OSX 上的 Ruby 不兼容：`sass requires Ruby version >= 1.8.7.`. 经过研究，似乎我需要 RVM，但无法找到如何在我的计算机上安装它，以便我可以升级我的 Ruby。

试过这个，例如：

```
\curl -L https://get.rvm.io | bash -s stable --ruby 
```

返回这个：

```
curl: (60) SSL certificate problem, verify that the CA cert is OK. Details:
error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed
More details here: http://curl.haxx.se/docs/sslcerts.html 
```

谁能给我一步一步的说明如何做到这一点？请记住，我对终端不是很熟练，所以任何复制和粘贴的片段都会有所帮助。非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T04:09:24.990

您需要更新您的证书：

```
cert_dir="$( openssl version -d | awk -F'"' '{print $2}' )"
mkdir -p "$cert_dir"
security find-certificate -a -p /Library/Keychains/System.keychain > "$cert_dir/cert.pem"
security find-certificate -a -p /System/Library/Keychains/SystemRootCertificates.keychain >> "$cert_dir/cert.pem" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T00:05:50.753

我想你可以尝试`insecure`添加`~/.curlrc`：

```
echo insecure >> ~/.curlrc 
```

避免证书问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-15T23:57:23.187

尝试在 curl 选项中添加 -k。

# java - 在某些情况下可以使用 Thread.suspend() 吗？

> ID：16024193
> 
> 赞同：0
> 
> 时间：2013-04-15T20:29:59.513
> 
> 标签：java, multithreading, unit-testing, junit, abort

我想在 java 程序中运行 jUnit 测试用例并在超时后停止运行。为了执行测试，我使用 JUnitCore 的 run(Request) 方法。

测试类包含需要大量时间和/或不会终止的方法。因此，我希望能够停止执行。

但是，jUnit 的 pleaseStop 标志只在测试用例完成后才考虑，方法不能被中断并且内容（例如可以关闭的已用 IO 资源）是未知的。此外，我想避免使用流程。

**有没有其他方法可以停止单个测试用例的执行？**

**在我不在线程之间共享任何资源的情况下**使用 Thread.suspend() 可以吗？****

 **（我已经阅读了 [为什么不推荐使用 Thread.stop、Thread.suspend 和 Thread.resume？](http://docs.oracle.com/javase/6/docs/technotes/guides/concurrency/threadPrimitiveDeprecation.html)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:50:26.313

> 在我不在线程之间共享任何资源的情况下使用 Thread.suspend() 可以吗？

我会说，对于*测试*，使用不推荐使用的`Thread.suspend()`方法应该没问题。我认为重申它被弃用的原因很重要。您可以在线程持有锁时暂停线程，这可能会极大地改变您的代码操作方式，甚至导致死锁。

如果可能的话，我会考虑使用其他机制来实现相同的行为。

引用 javadocs：

> 已弃用。此方法已被弃用，因为它本质上容易死锁。如果目标线程在暂停时对保护关键系统资源的监视器持有锁，则在目标线程恢复之前没有线程可以访问该资源。如果将恢复目标线程的线程在调用 resume 之前尝试锁定此监视器，则会导致死锁。这种死锁通常表现为“冻结”进程。有关详细信息，请参阅为什么不推荐使用 Thread.stop、Thread.suspend 和 Thread.resume？。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T20:54:37.447

您可以在单个测试上使用 timeout 参数，或者在一个类中的所有测试上使用 Timeout 规则。请参阅此处的文档[Timeout-for-tests](https://github.com/junit-team/junit/wiki/Timeout-for-tests)。**

# ruby - 带有消费者线程和作业队列的 Ruby Sinatra

> ID：16024197
> 
> 赞同：1
> 
> 时间：2013-04-15T20:30:16.087
> 
> 标签：ruby, multithreading, sinatra

我正在尝试创建一个非常简单的宁静服务器。当它收到请求时，我想在队列上创建一个可以由另一个线程处理的新作业，同时当前线程向客户端返回响应。

我看着 Sinatra，但还没有走得太远。

```
require 'sinatra'
require 'thread'

queue = Queue.new

set :port, 9090

get '/' do
  queue << 'item'
  length = queue.size
  puts 'QUEUE LENGTH %d', length
  'Message Received'
end

consumer = Thread.new do
  5.times do |i|
    value = queue.pop(true) rescue nil
    puts "consumed #{value}"
  end
end

consumer.join 
```

在上面的示例中，我知道消费者线程只会运行几次（与应用程序的生命周期相反），但即使这对我也不起作用。

有更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T20:46:39.170

您的主要问题是您对[`Queue#pop`](http://ruby-doc.org/stdlib-2.0/libdoc/thread/rdoc/Queue.html#method-i-pop). 您正在传递`true`，这导致它*不会*暂停线程并引发异常，您可以使用`nil`. 因此，您的消费者线程会循环五次，然后才能发生任何其他事情。

您需要将该行更改为

```
value = queue.pop 
```

以便线程等待新数据被推送到队列中。

您还需要`consumer.join`从末尾删除该行，因为一旦您将调用更改为`pop`.

（此外，这不是您的主要问题的一部分，但看起来您想要[`printf`](http://ruby-doc.org/core-2.0/Kernel.html#method-i-printf)而不是`puts`打印队列长度时）。

# c# - 无法在桌面应用程序后面的代码中绑定网格视图

> ID：16024198
> 
> 赞同：2
> 
> 时间：2013-04-15T20:30:16.663
> 
> 标签：c#, winforms, data-binding, datagridview, desktop-application

我有一个列出所有客户的网格视图。

我将它绑定在放置在 MDI 子级中的 Form 的加载时间中。

网格视图中的列是在设计时预定义的。

我的`Form_Load()`活动代码是：

```
try
{
       cn = db.createConnection();
       if (cn.State == System.Data.ConnectionState.Open)
       {
           cn.Close();
       }
       cn.Open();
       cmd = new OleDbCommand("Select BillNo,PartyName,City,State,FORMAT(BillDt,'dd-mm-yyyy') as BillDt from BillMaster", cn);
       da = new OleDbDataAdapter(cmd);
       ds = new DataSet();
       da.Fill(ds);
       cn.Close();

       dataGridView1.AutoGenerateColumns = false;
       dataGridView1.DataSource = ds.Tables[0];
       for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
       {
            dataGridView1.Rows[i].Cells[0].Value = ds.Tables[0].Rows[i]["BillNo"].ToString();
            dataGridView1.Rows[i].Cells[1].Value = ds.Tables[0].Rows[i]["PartyName"].ToString();
            dataGridView1.Rows[i].Cells[2].Value = ds.Tables[0].Rows[i]["City"].ToString();
            dataGridView1.Rows[i].Cells[3].Value = ds.Tables[0].Rows[i]["State"].ToString();
            dataGridView1.Rows[i].Cells[4].Value = ds.Tables[0].Rows[i]["BillDt"].ToString();
        }

   }
   catch (Exception ex)
   {
        MessageBox.Show(ex.Message.ToString());
   }
   finally
   {
       cn.Close();
       da.Dispose();
       ds.Dispose();
       cmd.Dispose();
   }

} 
```

我通过放置断点来检查程序的执行。数据在 DataSet 和即时窗口中完全作为数据库获取，网格的特定单元格的值显示了确切的值，但问题是当加载表单时，网格仍然为空。并创建与从数据库中获取的行数相同的空白行数。

我应该怎么做才能解决这个错误。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T06:16:49.040

```
try
{
   cn = db.createConnection();
   if (cn.State == System.Data.ConnectionState.Open)
   {
       cn.Close();
   }
   cn.Open();
   cmd = new OleDbCommand("Select BillNo,PartyName,City,State,FORMAT(BillDt,'dd-mm-yyyy') as BillDt from BillMaster", cn);
   da = new OleDbDataAdapter(cmd);
   ds = new DataSet();
   da.Fill(ds);
   cn.Close();

   dataGridView1.AutoGenerateColumns = true;
   dataGridView1.DataSource = ds.Tables[0];

   //Or you can use
   //dataGridView1.DataSource = ds.Tables[0].DefaultView;    

   }
   catch (Exception ex)
   {
    MessageBox.Show(ex.Message.ToString());
   }
   finally
   {
   cn.Close();
   da.Dispose();
   ds.Dispose();
   cmd.Dispose();
  }

  } 
```

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T20:34:42.973

改变

```
dataGridView1.AutoGenerateColumns = false; 
```

到`true`. 消除

```
for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
   {
        dataGridView1.Rows[i].Cells[0].Value = ds.Tables[0].Rows[i]["BillNo"].ToString();
        dataGridView1.Rows[i].Cells[1].Value = ds.Tables[0].Rows[i]["PartyName"].ToString();
        dataGridView1.Rows[i].Cells[2].Value = ds.Tables[0].Rows[i]["City"].ToString();
        dataGridView1.Rows[i].Cells[3].Value = ds.Tables[0].Rows[i]["State"].ToString();
        dataGridView1.Rows[i].Cells[4].Value = ds.Tables[0].Rows[i]["BillDt"].ToString();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T20:34:47.230

第一件事，也许我错过了一些东西，但是：

这是多余的，我会删除它，它可能是问题的一部分

```
 for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
   {
        dataGridView1.Rows[i].Cells[0].Value = ds.Tables[0].Rows[i]["BillNo"].ToString();
        dataGridView1.Rows[i].Cells[1].Value = ds.Tables[0].Rows[i]["PartyName"].ToString();
        dataGridView1.Rows[i].Cells[2].Value = ds.Tables[0].Rows[i]["City"].ToString();
        dataGridView1.Rows[i].Cells[3].Value = ds.Tables[0].Rows[i]["State"].ToString();
        dataGridView1.Rows[i].Cells[4].Value = ds.Tables[0].Rows[i]["BillDt"].ToString();
    } 
```

这应该已经解决了

```
dataGridView1.DataSource = ds.Tables[0]; 
```

# javascript - 如何根据用户文本输入 JQuery 更改按钮文本

> ID：16024199
> 
> 赞同：-2
> 
> 时间：2013-04-15T20:30:35.570
> 
> 标签：javascript, jquery, jquery-ui, button, jquery-autocomplete

我有一个按钮和一个 JQuery 自动完成功能。我想让它像这样工作：

```
if(input=='') {
    button.text = "hello";
}
else {
    button.text = "world";
} 
```

我不知道如何将其合并到我的脚本中，以便按钮根据自动完成输入的状态实时更改。

任何想法都会很棒。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:07:52.483

您可以像这样将事件处理程序绑定到文本字段的`keyup`事件：

```
$('#inputWrapper').on('keyup', '#tags', function() {
    if($(this).val() == '') {
        $('button.addButton').text('Hello');
    } else {
        $('button.addButton').text('World');
    }
}); 
```

这是一个更新的[小提琴](http://jsfiddle.net/r4emt/8/)。

# boost - boost 给了我错误的 UTC

> ID：16024201
> 
> 赞同：0
> 
> 时间：2013-04-15T20:30:43.517
> 
> 标签：boost, time

当我打电话

```
boost::posix_time::ptime utctime = boost::posix_time::microsec_clock::universal_time();
std::cout << "UTC time is " << boost::posix_time::to_simple_string(utctime) << std::endl; 
```

boost 给了我 8:28 pm，而当地时间是 4:28 pm，UTC 时间应该是 9:28 pm。我机器上的时区是正确的。可能是什么原因？

# javascript - 我正在寻找一些 JQuery 来运行相当精细的下拉选择/执行功能

> ID：16024202
> 
> 赞同：-3
> 
> 时间：2013-04-15T20:30:43.603
> 
> 标签：javascript, jquery, drop-down-menu

我有一个由包含多个选项的无序列表组成的下拉菜单。选择一个选项后，我希望此选项填充头部选择框 (li class="first") 替换“我是...”文本。然后可以按下“Go”按钮来打开该特定选项的 href。这是html：

```
 <div class="dropNavOne" class="gradient">
    <ul>
    <li class="first"><a href="#">I am a...</a>
        <ul class="menu_body1">
            <li><a href="#">Option 1</a></li>
            <li><a href="#">Option 2</a></li>
            <li><a href="#">Option 3</a></li>
            <li><a href="#">Option 4</a></li>
            <li><a href="#">Option 5</a></li>
            <li><a href="#">Option 6</a></li>
            <li><a href="#">Option 7</a></li>
            <li><a href="#">Option 8</a></li>
            <li><a href="#">Option 9</a></li>
            <li class="last"><a href="#">Option 10</a></li>
        </ul>
    </li>
    </ul>
    </div>
    <a href="#"><div class="goButtonOne" class="gradient">Go</div></a> 
```

如果这是可能的，请告诉我......谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:41:21.973

这里有一些你会发现在写这篇文章时有用的指针。可能有一些插件可以直接满足您的要求，但另一方面，这听起来很简单，您可以自己完成。

*   对无序列表中的隐藏和显示元素使用类
*   设置 DOM 就绪处理程序以将事件处理程序添加到您的页面
*   附加一个点击事件以显示您的菜单（可能按班级，因此您可以一次显示许多项目）
*   附加一个点击事件来隐藏你的菜单
*   使用 html 注入方法来修改元素的内部 HTML

您当然可以为此使用 jQuery。与它一起工作很愉快，写这样的东西将是一个很好的第一次练习。

# web-applications - 我可以使用 Micro Cloud Foundry 和 Rackspace 云服务器制作自己的 Heroku 吗？

> ID：16024209
> 
> 赞同：0
> 
> 时间：2013-04-15T20:30:55.663
> 
> 标签：web-applications, heroku, application-server, rackspace

我希望像在 Heroku 上一样简单地将应用程序部署到我自己的云服务器上，Micro Cloud Foundry 是一种可行的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-26T19:52:11.503

这取决于您的需求。

**方法一**

如果您需要自己的 CloudFoundry 实例，您可以[下载微型实例](http://docs.cloudfoundry.com/docs/running/micro_cloud_foundry/)并将其用作您的私有 PaaS。这是一个简单的 Ubuntu 虚拟机，上面有服务。

优点：

*   您可以将其部署在您想要的任何公共或私有云上。
*   运行和使用便宜。

缺点：

*   并非所有功能都可用
*   您将快速最大化您的虚拟机

**方法二**

[您可以从 Pivotal](http://www.cloudfoundry.com/use)或[AppFog](https://www.appfog.com)购买 CloudFoundry 作为服务。这些服务的优点和缺点与滚动您自己的服务相同。

**方法三**

您可以在您最喜欢的 IaaS 平台（Amazon、WMWare、OpenStack）上[部署完整的 CloudFoundry实例。](http://docs.cloudfoundry.com/docs/running/deploying-cf/)

优点：

*   所有的权力和控制权在你手中

缺点：

*   可能很难安装（我使用 CF v2.0 没有成功）
*   运行起来可能很昂贵

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-13T18:23:25.963

我无法告诉您有关微云代工的信息，但您可能还想查看[dokku-alt](https://github.com/dokku-alt/dokku-alt)。它基本上是一个类似设置的自托管heroku。

为主机环境启动一个运行 Ubuntu 14.04 的虚拟机。登录并运行 Dokku-alt 安装程序脚本，开始通过 git 推送应用程序。加上一些命令，例如添加卷和数据库。这非常容易。

# facebook - Heroku - 应用程序错误，但日志中没有错误

> ID：16024212
> 
> 赞同：0
> 
> 时间：2013-04-15T20:30:59.163
> 
> 标签：facebook, node.js, heroku

我正在使用 Node.js 破解 Heroku 上的 Facebook 应用程序。当我自己使用该应用程序时，它完全按照我的预期工作。当我向它发送另一个开发人员/测试人员时，会显示标准的 Heroku “应用程序错误”消息。当我检查日志时，甚至没有开发人员对应用页面发出 GET 请求的日志，更不用说错误了。

他告诉我，他在浏览器状态栏中看到的最后一件事是“等待 .herokuapp.com”，这意味着 Facebook 访问了该应用程序，但日志不支持这一理论。

还有另一种查看 Heroku 错误的方法吗？有什么我必须打开才能看到更多吗？我必须修改设置才能让其他人使用该应用程序？

**更新：**更多的环顾四周让我检查网络流量。他得到一个 503 服务不可用，然后是错误页面。仍然想知道为什么这会发生在他的机器上，而不是我的机器上。

**更新：**在 handle_facebook_request 方法中插入了一些错误检查代码。

```
req.facebook.app(function(err, app) {
    if(err !== null) {
        var errorMessage = "Error getting app: " + util.inspect(err['error']);
        console.log(errorMessage);
    }
    // rest of req.facebook.me, and rendering code
} 
```

这给了我一个“不支持的获取请求”，类型为“GraphMethodException”，代码为 100。所以现在我可以查看一些内容了！我希望 Heroku 至少提到该请求已被尝试过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T16:48:13.447

我在使用支持 heroku / node.js 创建的新 facebook 应用程序时遇到了同样的问题。

经过几次尝试和测试，我看到我收到消息“不支持的获取请求”，输入“GraphMethodException”和代码 100，因为我的 facebook 应用程序使用沙盒模式。

当我禁用沙箱时，我在 heroku 上的应用程序运行良好。

# android - Android 从应用拖放到应用

> ID：16024221
> 
> 赞同：2
> 
> 时间：2013-04-15T20:31:23.230
> 
> 标签：android, mobile, drag-and-drop, mobile-application, samsung-mobile

在 Windows 中，可以使用[OLE 拖放](http://msdn.microsoft.com/en-us/library/96826a87%28v=vs.100%29.aspx)从应用程序拖放到应用程序。

这可能与新的多窗口 Android 风格有关吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T20:34:16.887

不，您不能从一个应用程序拖放到另一个应用程序上。

# php - 我可以从类外部获取受保护变量的值吗？

> ID：16024224
> 
> 赞同：1
> 
> 时间：2013-04-15T20:31:34.497
> 
> 标签：php, mysqli

我想从配置文件中获取我的变量。

首先，我有一堂课：

```
var $host;
var $username;
var $password;
var $db; 
```

现在我有这个：

```
protected $host = 'localhost';
protected $username = 'root';
protected $password = '';
protected $db = 'shadowcms'; 
```

这在我的 mysqli 连接的 __construct 函数中使用

但现在我需要在类本身中插入值，而不是从配置文件中获取它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T20:34:53.837

受保护的成员不能直接从类外部访问。

如果您需要这样做，您可以提供[访问器](http://cstruter.com/blog/272)来获取/设置它们。您还可以将它们声明为公开并直接访问它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T20:33:45.840

[http://php.net/manual/en/language.oop5.visibility.php](http://php.net/manual/en/language.oop5.visibility.php)

> 声明为受保护的成员只能在类本身内以及被继承类和父类访问。

换句话说，在您的配置类中，您定义了受保护的属性。它们只能通过继承该配置类来（直接）访问。

```
class ConfigBase
{
  protected $host = 'localhost';
}

class MyConfig 
{
  public function getHost()
  {
    return $this->host;
  }
}

$config = new MyConfig();
echo $config->getHost(); // will show `localhost`
echo $config->host; // will throw a Fatal Error 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T20:37:04.367

您可以将 getter 与变量一起使用，例如

```
public function get($property) {
    return $this->$property;
} 
```

然后你可以做

`$classInstance->get('host');`

例如。

# mysql - MyISAM和InnoDB之间的mysql索引使用差异

> ID：16024226
> 
> 赞同：6
> 
> 时间：2013-04-15T20:31:38.073
> 
> 标签：mysql, indexing, innodb, myisam

我有这些小桌子，`item`并且`category`：

```
CREATE TABLE `item` (
  `id` mediumint(8) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(150) NOT NULL,
  `category_id` mediumint(8) unsigned NOT NULL,
  PRIMARY KEY (`id`),
  KEY `name` (`name`),
  KEY `category_id` (`category_id`)
) CHARSET=utf8

CREATE TABLE `category` (
  `id` mediumint(8) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(150) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `name` (`name`)
) CHARSET=utf8 
```

我已经插入了 100 个类别和 1000 个项目。

如果我运行这个：

```
EXPLAIN SELECT item.id,category.name AS category_name FROM item JOIN category ON item.category_id=category.id; 
```

然后，如果表的引擎是 InnoDB 我得到：

```
+----+-------------+----------+-------+---------------+-------------+---------+--------------------+------+-------------+
| id | select_type | table    | type  | possible_keys | key         | key_len | ref                | rows | Extra       |
+----+-------------+----------+-------+---------------+-------------+---------+--------------------+------+-------------+
|  1 | SIMPLE      | category | index | PRIMARY       | name        | 452     | NULL               |  103 | Using index |
|  1 | SIMPLE      | item     | ref   | category_id   | category_id | 3       | dbname.category.id |    5 | Using index |
+----+-------------+----------+-------+---------------+-------------+---------+--------------------+------+-------------+ 
```

然而，如果我切换到 MyISAM（使用`alter table engine=myisam`），我会得到：

```
+----+-------------+----------+--------+---------------+---------+---------+-------------------------+------+-------+
| id | select_type | table    | type   | possible_keys | key     | key_len | ref                     | rows | Extra |
+----+-------------+----------+--------+---------------+---------+---------+-------------------------+------+-------+
|  1 | SIMPLE      | item     | ALL    | category_id   | NULL    | NULL    | NULL                    | 1003 |       |
|  1 | SIMPLE      | category | eq_ref | PRIMARY       | PRIMARY | 3       | dbname.item.category_id |    1 |       |
+----+-------------+----------+--------+---------------+---------+---------+-------------------------+------+-------+ 
```

我的问题是，为什么处理索引的方式会有这种差异？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T20:42:59.290

在 InnoDB 中，任何二级索引内部都包含表的主键列。所以列 (name) 上的索引*名称*隐含在列 (name, id) 上。

这意味着 EXPLAIN 将您对类别表的访问显示为“索引扫描”（这在*类型*列中显示为“索引”）。通过扫描索引，它还可以访问 id 列，用于在第二个表 item 中查找行。

然后它还利用 (category_id) 上的项目索引，它实际上是 (category_id, id)，并且只需读取索引即可为您的选择列表获取 item.id。根本不需要阅读表格（这在*Extra*列中显示为“使用索引”）。

MyISAM 不会以这种方式存储主键和辅助键，因此无法获得相同的优化。对类别表的访问是类型“ALL”，这意味着表扫描。

我希望对 MyISAM 表项的访问将是“ref”，因为它使用 (category_id) 上的索引查找行。但是，如果表中的行数很少，或者`ANALYZE TABLE item`自创建索引后还没有完成，优化器可能会得到不正确的结果。

* * *

重新更新：

看起来优化器更喜欢索引扫描而不是表扫描，所以它借此机会在 InnoDB 中进行索引扫描，并将类别表放在第一位。优化器决定重新排序表，而不是按照您在查询中给它们的顺序使用表。

在 MyISAM 表中，无论它选择首先访问哪个表，都会进行一次表扫描，但是通过将类别表放在第二位，它会连接到类别的主键索引而不是项目的二级索引。优化器更喜欢查找而不是唯一键或主键（类型“eq_ref”）。

# visual-studio - Visual Studio 2012 上的 xna 无法正常工作

> ID：16024230
> 
> 赞同：0
> 
> 时间：2013-04-15T20:32:05.387
> 
> 标签：visual-studio, xna

所以我按照[如何在 Visual Studio 2012 上安装 XNA 游戏工作室中的步骤进行操作？](https://stackoverflow.com/questions/10881005/how-to-install-xna-game-studio-on-visual-studio-2012)现在我看到了 xna 选项，但在选择时我收到此错误“对象引用未设置为对象实例”；任何建议（我在win7 64上使用vs2012 Ultimate 64）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:41:08.833

你应该看看这个：[http ://ryan-lange.com/xna-game-studio-4-0-visual-studio-2012/](http://ryan-lange.com/xna-game-studio-4-0-visual-studio-2012/)

Í如果它不起作用，我想把你送到 Monogame 项目。这是 xna 库，来自 mono 的人们可以移植到 Android、Ios、Windows 8 等。如果您在 Visual Studio 2012 上安装 xna 时遇到问题，只需使用 Monogame。它是完美的解决方案:)

# ios - 在 iOS 上横向打印 PDF

> ID：16024233
> 
> 赞同：0
> 
> 时间：2013-04-15T20:32:12.607
> 
> 标签：ios, xcode, pdf, airprint

我正在开发一个可以打印创建的 PDF 的应用程序。PDF 是 11 x 8.5，所以我需要它来打印横向模式，但是我在正确设置该方向时遇到了问题。这是我的印刷品。

```
- (void)printit {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

    NSString *documentsDirectory = [paths objectAtIndex:0];

    NSString *pdfPath = [documentsDirectory stringByAppendingPathComponent:selectedCountry];
    NSData *pdfData = [NSData dataWithContentsOfFile:pdfPath];

    UIPrintInteractionController *pic = [UIPrintInteractionController sharedPrintController];
    if  (pic && [UIPrintInteractionController canPrintData:pdfData] ) {
        pic.delegate = self;
        UIPrintInfo *printInfo = [UIPrintInfo printInfo];
        printInfo.outputType = UIPrintInfoOutputGeneral;
        printInfo.jobName = selectedCountry;
        printInfo.duplex = UIPrintInfoDuplexNone;
        pic.printInfo = printInfo;
        pic.showsPageRange = YES;
        pic.printingItem = pdfData;
               void (^completionHandler)(UIPrintInteractionController *, BOOL, NSError *) =
        ^(UIPrintInteractionController *pic, BOOL completed, NSError *error) {
                       if (!completed && error)
                NSLog(@"FAILED! due to error in domain %@ with error code %u",
                      error.domain, error.code);
        };
        //if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
        //    [pic presentFromBarButtonItem:self.printButton animated:YES
        //                completionHandler:completionHandler];
      //  }
   // else {
            [pic presentAnimated:YES completionHandler:completionHandler];
       // }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T03:40:47.960

你有没有试过这个：

```
printInfo.orientation = UIPrintInfoOrientationLandscape; 
```

确保在将 UIPrintInfo 分配给 UIPrintInteractionController 之前添加它——

```
pic.printInfo = printInfo; 
```

希望这可以为您解决问题。

# android - 如何使用 eclipce 为 android 配置弹出图像？

> ID：16024235
> 
> 赞同：0
> 
> 时间：2013-04-15T20:32:14.123
> 
> 标签：android, eclipse, popup, imageview

我正在处理一个 ImageViews 列表，虽然我希望每个都被点击，但图像会以弹出窗口的形式出现。目前取得了不错的效果，但工作量很大，我为每个图像创建了一个新的 xml 文件，因此使用 onclicklistener，每次单击 ImageView 时，都会打开另一个布局 xml，但我只想打开一个弹出图像。谁能帮我？

这是可能的xml：

资源/布局/main.xml

```
 <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent" >

<ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="match_parent"
    android:layout_height="353dp"
    android:layout_marginTop="150dp" >

    <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="100dp"
    android:orientation="vertical" >

   <Button
   android:id="@+id/button1"
   android:layout_width="fill_parent"
   android:layout_height="100dp"
   android:text="@string/popup1" />

   <Button
   android:id="@+id/button2"
   android:layout_width="fill_parent"
   android:layout_height="100dp"
   android:text="@string/popup2" />

   <Button
   android:id="@+id/button3"
   android:layout_width="fill_parent"
   android:layout_height="100dp"
   android:text="@string/popup3" />

   <Button
   android:id="@+id/button4"
   android:layout_width="fill_parent"
   android:layout_height="100dp"
   android:text="@string/popup4" />

   <Button
   android:id="@+id/button5"
   android:layout_width="fill_parent"
   android:layout_height="100dp"
   android:text="@string/popup5" />
   </LinearLayout>
   </ScrollView>
   </FrameLayout> 
```

水库/布局/开胃酒

```
 <ImageView
   android:id="@+id/ivcarnes"
   android:layout_width="364dp"
   android:layout_height="410dp"
   android:layout_gravity="center"
   android:contentDescription="@string/panecestino"
   android:src="@drawable/panecestinoim" />

   <Button
   android:id="@+id/btclose"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:layout_gravity="right"
   android:layout_marginRight="85dp"
   android:layout_marginTop="150dp"
   android:text="@string/close"
   android:textStyle="bold"/>
   </FrameLayout> 
```

这是我的代码：Main.java

```
 import android.os.Bundle;
   import android.app.Activity;
   import android.content.Intent;
   import android.view.Menu;
   import android.view.View;
   import android.widget.*;

   public class Main extends Activity {

   Button button1, button2, button3, button4, button5;

   @Override
   protected void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.main);

            button1 = (Button)
            findViewById(R.id.button1);
            button2 = (Button)
            findViewById(R.id.button2);
            button3 = (Button)
            findViewById(R.id.button3);
            button4 = (Button)
            findViewById(R.id.button4);
            button5 = (Button)
            findViewById(R.id.button5);

   button1.setOnClickListener(new View.OnClickListener() {

   @Override
   public void onClick(View Arg0) {

   Intent testegrafico = new
   Intent(Main.this,Aperitivos.class);
   Main.this.startActivity(testegrafico);
   Main.this.finish();
   }});
   }

   @Override
   public boolean onCreateOptionsMenu(Menu menu) {

   getMenuInflater().inflate(R.menu.main, menu);
   return true;
   }} 
```

开胃酒.java

```
 import android.os.Bundle;
   import android.app.Activity;
   import android.content.Intent;
   import android.view.Menu;
   import android.view.View;
   import android.widget.*;

   public class Aperitivos extends Activity {

   Button btclose;

   @Override
   protected void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.aperitivos);

   btclose = (Button)
   findViewById(R.id.btclose);

   btclose.setOnClickListener(new View.OnClickListener() {

   @Override
   public void onClick(View Arg0) {

   Intent testegrafico = new
   Intent(Aperitivos.this,Main.class);
   Aperitivos.this.startActivity(testegrafico);
   Aperitivos.this.finish();
   }
   });
   }

   @Override
   public boolean onCreateOptionsMenu(Menu menu) {

   getMenuInflater().inflate(R.menu.main, menu);
   return true;
   }

   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:40:40.673

```
package br.com.example.locandaristorante;

import android.os.Bundle;
import android.app.Activity;
import android.graphics.drawable.Drawable;
import android.view.Gravity;
import android.view.MotionEvent;
import android.view.View;
import android.view.ViewGroup;
import android.widget.*;

public class Main extends Activity {

Button button1, button2, button3, button4, button5;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

            button1 = (Button)
            findViewById(R.id.button1);
            button2 = (Button)
            findViewById(R.id.button2);
            button3 = (Button)
            findViewById(R.id.button3);
            button4 = (Button)
            findViewById(R.id.button4);
            button5 = (Button)
            findViewById(R.id.button5);

            button1.setOnClickListener(new Button.OnClickListener() {

 @Override
 public void onClick(View arg0) {
     View popupView = new View(Main.this);
     final PopupWindow popupWindow = new PopupWindow(popupView,
     ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT);
     Drawable drawable = getResources().getDrawable(R.drawable.panecestinoim);

     popupWindow.setBackgroundDrawable(drawable);
     popupWindow.setHeight(600);
     popupWindow.setWidth(400);      
     popupWindow.setTouchable(true);
     popupWindow.setFocusable(true);
     popupWindow.setTouchInterceptor(new View.OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                // TODO Auto-generated method stub
                popupWindow.dismiss();
                return false;
            }
        });

     popupWindow.showAtLocation(findViewById(R.id.button1), Gravity.CENTER, 0, 0);

                }
            });
}} 
```

# javascript - Javascript 和服务定位器，包括 js 文件

> ID：16024237
> 
> 赞同：0
> 
> 时间：2013-04-15T20:32:24.687
> 
> 标签：javascript, service-locator

我创建了一个服务定位器类来访问我的 javascript 应用程序中的不同服务类，但我不确定服务定位器在 javascript 中的效果如何，因为我必须在每个页面上包含包含文件。

例如，我的服务定位器中有两个服务，但是如果我只需要访问页面上的一个服务，那么我仍然需要包含两个 js 文件。那是好的javascript设计吗？两个正确包含不会显着影响性能，但是如果我用 10 个服务扩展我的服务定位器，那么我需要包含 12 个 js 文件，即使我可能只需要在一个页面上访问一个或两个。我如何在javascript中以最好的方式做到这一点？

这是我的服务定位器代码：

```
function serviceFactory() {
    this.constructor = function () {
        this.retailService = new retailService();
        this.outlookService = new outlookService();
    }

    this.constructor();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:47:24.537

有几种解决方案可以在需要时动态包含您的脚本。

1.  [要求JS](http://requirejs.org/)
2.  [头.js](http://headjs.com/)
3.  [$.getScript()](http://api.jquery.com/jQuery.getScript/)

但是您应该注意，浏览器缓存很多，这意味着一旦他们下载了某些内容，他们将在一段时间内不再执行此操作（具体多长时间取决于浏览器和网络服务器配置）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-07T21:26:33.253

我相信您在编写的代码中混合了两个概念。服务定位器不处理服务实例化。它允许记录系统可用的服务。

从这个意义上说，服务定位器应该类似于

```
var ServiceLocator = new function () {
    var self = this;
    var services = {};

    self.register = function (key, service) {
        services[key] = service;
    };

    self.resolve = function (key) {
        return services[key];
    };
}; 
```

然后，需要创建和注册服务，但是由于每个页面需要不同的服务，因此预先构建它们的工厂将无法正常工作。你可以让服务注册自己像

```
var RetailService = function () {
    // service definition        
};
ServiceLocator.register('retailService', new RetailService()); 
```

# css - 使用 CSS 生成的内容（即伪元素）是否比添加更多 DOM 元素更有效（即解析/渲染更快）？

> ID：16024238
> 
> 赞同：24
> 
> 时间：2013-04-15T20:32:25.260
> 
> 标签：css, performance, dom, pseudo-element, shadow-dom

为了让我的移动网络应用程序保持精简和高效，我试图在任何给定时间限制 DOM 上的元素数量。我打算限制使用 DOM 元素的一种方法是尽可能使用伪元素`:before`和`:after`元素来生成内容。

例如，不是用这样的元数据表示一个列表项：

```
<dd class="item">
    <div class="name">Name</div>
    <div class="desc">Description</div>
    <div class="location">Location</div>
    <div class="genre">Genre</div>
</dd> 
```

我可以像这样表示它（并使用该`content:`属性来显示元数据）：

```
<dd class="child" 
    data-name="Name" 
    data-desc="Description" 
    data-location="Location" 
    data-genre="Genre">
</dd> 
```

因此，一个 DOM 元素具有数据属性，而不是 5 个单独的元素和可以说是更清晰的标记。
在这里演示：http: [//jsfiddle.net/quc8b/2/](http://jsfiddle.net/quc8b/2/)

这种技术真的会提高性能吗？我的想法是，使用更少的 DOM 元素，javascript 应该可以更快地解析，并且我应该能够更快地添加/删除列表项节点。但是渲染（即绘画、布局和回流）会更快吗？换句话说，CSS 生成的内容渲染/解析是否比传统元素和文本节点更快或更有效？

浏览器如何在渲染树和文档树中内部处理 CSS 生成的内容对我来说是未知的（也许是影子 DOM？）。有没有讨论这个的文章？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2018-02-22T23:50:43.540

我也有兴趣弄清楚这一点。所以我做了一个简单的小测试用例。

我创建了两个 html 页面进行比较：

**A. 伪选择器：**

*   HTML：其中 50.000 个：`<p>paragraph</p>`

*   CSS：`p:before { display: inline-block; width: 10px; height: 10px; margin-right: 5px; background-color: red; content: ""; }`

**B. 许多 DOM 元素：**

*   HTML：其中 50.000 个：`<p><span class="icon"></span> paragraph</p>`

*   CSS：`.icon { display: inline-block; width: 10px; height: 10px; margin-right: 5px; background-color: red; }`

* * *

## 测试：

我使用了在 2015 Macbook Pro 上运行的 Chrome Devtools 性能监视器。

### Test1：“开始分析并重新加载页面”

选项 B 是输家约 400 毫秒。解析需要 2452 毫秒，而“伪”变体需要 2033 毫秒。我将这个测试运行了 3 次，结果相似。

[![截屏](https://i.stack.imgur.com/sDQrQ.png)](https://i.stack.imgur.com/sDQrQ.png)

### Test2：调整窗口大小

为了测量重新布局，我开始了单独的录制，通过从全屏更改为半屏（使用窗口管理器中的快捷键）调整了浏览器窗口的大小 3 次

“许多 DOM 元素”是赢家，渲染时间为 1136 毫秒，而“伪元素”则为 1463 毫秒。

[![在此处输入图像描述](https://i.stack.imgur.com/EZ5wn.png)](https://i.stack.imgur.com/EZ5wn.png)

### 测试3：回流

我试图通过使用这段 Javascript 测量页面高度来引起回流：`document.body.offsetHeight;`

但这从来没有花费超过 4 毫秒的时间来执行……没有足够的时间来可靠地测量性能。

显然 50.000 个元素不足以导致该区域的任何显着放缓。

PS：考试选的不是很科学，只是我最先想到的

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-04-15T20:44:08.060

> 请注意，**这个答案是多年前给出的**。下面列出的许多陈述不再有效。在提供应该可访问的内容时，仍然不鼓励使用伪元素。

我不知道伪元素的性能，但我担心您将性能置于一切之上。

与“真实” DOM 节点相比，伪元素具有相当大的缺点：

*   它们不能过渡或动画
*   您不能使用 Javascript 动态更改它们的外观
*   它们对搜索引擎来说远没有那么“重要”
*   在调试方面它们很麻烦
*   它们的数量仅限于一个元素`:before`和一个`:after`元素
*   它们不能包含 HTML 标记，例如链接或其他容器
*   你伤害了内容和外观分离的概念
*   一些 HTML 元素不能有伪元素

如需进一步阅读，请参阅[Tag-Wiki](https://stackoverflow.com/tags/pseudo-element/info)

我敢肯定还有更多。另一方面是某种性能提升，我相信这将是微不足道的。

# c# - 存储库的 Web 服务等效名称

> ID：16024248
> 
> 赞同：0
> 
> 时间：2013-04-15T20:33:10.783
> 
> 标签：c#, web-services

我想知道这个类应该叫什么名字。

我想编写调用第三方 Web 服务的类，封装它们，并公开它们以在我自己的项目中使用。下面是类。

```
public class SForceService{

   public SForceService(ISForceRepository sForceRepository ){}

  //other logic here
}

public class SForceRepository{
    ISForceWrapper iSForceWrapper;
   IWebCfgManager webCfgManager;

   public SForceRepository(ISForceWrapper iSForceWrapper, IWebCfgManager webCfgManager){
     this.iSForceWrapper=iSForceWrapper;
      this.webCfgManager=webCfgManager;
   }

   //CRUD operation methods below
   public Contact GetContactById(int id){

     GetSessionId();

     var sql= "SELECT * FROM Contact WHERE id =" + id;
     return iSForceWrapper.Query<Contact>(sql).FirstOrDefault();
   }

   //create update, delete, etc
} 
```

在 Web 服务的上下文中，名称 , 是`SForceRepository`一个合适的名称吗？

# php - codeigniter - 在视图中检索控制器变量（使用 $this）

> ID：16024257
> 
> 赞同：9
> 
> 时间：2013-04-15T20:33:50.127
> 
> 标签：php, codeigniter, codeigniter-2

在我的控制器中，我有一个要在视图中使用的公共变量。

```
public $header = array("show_menu"=>true); 
```

传统我会将变量作为数组传递给`load->view("incl_header",$header)`函数，但是我注意到在我看来，我可以像这样检索控制器的变量：

```
echo  $this->header['show_menu']; 
```

在我的视图文件中检索这样的变量是否有任何问题？

我正在使用 codeigniter 2.1.3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T12:31:37.820

可以这样做。

如果您使用 var_dump($this)，您可以看到视图中可用的所有变量。

这不是在您的视图中检索变量的正常 codeigniter 方式。

这在 codeigniter 的未来版本中可能会发生什么变化，因此在使用此方法时必须牢记这一点。

# wordpress - 通过 .htaccess 在显示的 URL 中隐藏子目录？

> ID：16024271
> 
> 赞同：0
> 
> 时间：2013-04-15T20:34:38.590
> 
> 标签：wordpress, .htaccess, mod-rewrite

我客户的域名指向/public_html；他的网站位于/public_html/wp。我有一个重定向到 /public_html/wp 的 .htaccess：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www\.)?somedmain\.com$
RewriteCond %{REQUEST_URI} !^/wp/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /wp/$1 [L]
RewriteCond %{HTTP_HOST} ^(www\.)?somedmain\.com$
RewriteRule ^$ /wp/ [L] 
```

但是，当用户导航到某个页面时，该 url 显示为 somedmain.com/wp/permalink。

我一直在想如何在 url 中隐藏“wp”；那可能吗？
感谢您的任何提示....

# c# - 当虚拟路径发生页面加载并且图像已经在根文件夹中时，我无法设置图像

> ID：16024281
> 
> 赞同：0
> 
> 时间：2013-04-15T20:35:07.480
> 
> 标签：c#, asp.net

当使用虚拟路径加载页面并且图像已经在根文件夹中时，我无法设置图像。

以下是两个文件

默认2.aspx

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default2.aspx.cs" Inherits="Default2" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
        <div>
            <asp:Image ID="Image1" runat="server" />
        </div>
    </form>
</body>
</html> 
```

Default2.aspx.cs

```
protected void Page_Load(object sender, EventArgs e)
{
    Image1.ImageUrl = "~/abc.jpg";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T20:36:21.540

尝试[`ResolveUrl`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.resolveurl.aspx)：

```
Image1.ImageUrl = ResolveUrl("~/abc.jpg"); 
```

# powershell - PowerShell 3.0 - 将亲和度设置为每个用户进程的 CPU

> ID：16024282
> 
> 赞同：1
> 
> 时间：2013-04-15T20:35:08.200
> 
> 标签：powershell, set, cpu, affinity

我在这里的第一篇文章。我正在使用 powerShell 编写脚本，目标是为每个用户的进程设置一定数量的 CPU 线程，使用这里的论坛，我能够找到大部分答案，甚至让我的脚本运行，除了，如果它设置了亲和力，它将它设置为每个进程，而不仅仅是我需要的用户。这是代码（带注释）：

```
# GET LIST of all process running
$pList = get-wmiobject win32_process

# loop through created array and get the OWNER of the processes
foreach ($p in $pList) {
    #If "myUserName" is found:
    if ($p.getowner().User -eq 'myUserName') {
        # get process name
        $procName = $p.ProcessName
        # trim STRING to remove EXE
        $procName = $procName.Replace('.exe','')
        # use get-process to make array of processes run by "myUserName"
        $activeProc = Get-Process -name $procName
        # Loop to set affinity for each process

        foreach ($i in $activeProc){
            $i.ProcessorAffinity=0xFE
        }
    }
} 
```

当我执行这个命令时，所有的进程都设置为新的线程数，有什么建议可以让它只为特定用户调整线程吗？

非常感谢你们！这很紧急。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-18T12:52:39.967

在 PowerShell 4.0 版中，您可以使用cmdlet`-IncludeUserName`上的参数。`Get-Process`获得进程列表后，您可以使用`Where-Object`cmdlet 进行过滤，该 cmdlet 具有默认别名`?`.

```
Get-Process -IncludeUserName | Where-Object -FilterScript { $PSItem.UserName -match 'system' }; 
```

或者速记可能如下所示：

```
gps -inc | ? { $_.UserName -match 'system' }; 
```

**注意**：使用该`-IncludeUserName`参数需要特权提升。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T21:13:52.863

通过调用`get-process -name $procName`，您可以找到与用户运行的进程*同名的所有进程。*

而不是使用`ProcessName`，使用`ProcessId`。

# wpf - Web 性能达不到标准……什么是新的“Microsoft Way”？

> ID：16024289
> 
> 赞同：1
> 
> 时间：2013-04-15T20:35:48.230
> 
> 标签：wpf, windows, silverlight, platform

寻求意见。我正在开发一个中等规模的 3 层 ASP.NET 项目（.NET 2.0 和 Visual Studio 2005），其中包含 Unix 后端的 Oracle、一些强大的 MS Web 服务器和 IE 浏览器客户端。性能很差，而且用户觉得 UI 看起来也过时了。我们可能很快就有机会从头开始重新设计和重写整个应用程序，我想知道当前或推荐的 MS 平台是什么。

几年前，当 MS 将 Silverlight 的支持降级为支持 Windows 8 和 Windows Phone 的“HTML5”时，我参与了 WPF 和 Silverlight 的另一份合同。我并不想在 Silverlight 甚至 WPF 将存在多长时间之间引发一场激烈的战争，但我正在寻找一些现代替代方案，截至今天，2013 年 4 月。我们无法解决的一个要求是我们可以不要在整个客户组织的每台用户 PC 上安装一些东西。

我自己在 WinForms 和 C# 方面的背景比上述任何一个都多，但无论我转向哪里，似乎在 WinForms 中开发任何新的 LOB 应用程序都不再做太多事情了。

应用服务器平台和应用程序通过远程桌面运行时发生了什么？开发桌面应用程序并部署到应用程序服务器，然后在每个用户的桌面上放置一个快捷方式，甚至像我们过去那样映射驱动器号，是否仍然有意义？

您的 0.02 美元将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T20:44:36.143

我肯定会考虑将其作为一个内部网站。

UI 将是 HTML5，对您需要的每个功能使用“单页应用程序”(SPA)。每个功能都将在用户需要时加载的页面上。浏览器中的 javascript/ajax 代码将与反馈需要显示的原始数据的 Web 服务器交互。

使用 Active Directory，您可以获得完全的安全性和每个人的自定义。

如果您需要大量交互性，那么您还需要考虑在组合中包含 SignalR。（这是“新”MS 工具之一！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T20:41:53.427

如果您无法在最终用户的 PC 中安装任何东西，那么请使用 ASP.Net。其他任何东西都需要安装。

您可以通过拥有优秀的设计师和大量的 javascript 来使 Web 应用程序对用户更具吸引力。无法与 WPF 的功能和美感相提并论，但这是您最好的选择。

WPF 是 .Net 框架的一部分，没有安装它就无法运行。

Silverlight 也可以是一个选项，但它仍然需要安装（尽管最小，4 MB，不到 2 分钟的安装），但无论如何都要安装。

WinRT 仅适用于 Windows 8。较低版本（Vista、XP、7）不支持。所以我认为目前还不是一个选择（当然，除非您的所有用户都拥有 Windows 8）。

不，winforms 不是一种选择。它也是 .Net 框架的一部分，即使您可以安装它，也不必处理它的局限性，因为您可以使用许多更好的技术。

# python - 从 Python 中的另一个函数调用函数中多个值的最佳方法

> ID：16024291
> 
> 赞同：0
> 
> 时间：2013-04-15T20:35:57.710
> 
> 标签：python, function, return, call

最近在使用 Python tkinter GUI 和 sqlite 3 构建项目时，我在 Python 编程中发现了很多问题。其中一个问题是***从 python 中的另一个函数调用函数中的多个值的最佳方法是什么？***同时，我对函数中的重调和调用值进行了一些研究，我知道在python函数中它可以允许返回多个值，但是，在调用时，我希望它专门调用我返回的值，例如`return (x,y,z)`，我真的不知道我该怎么称呼它。

这是我项目中的一些代码，请随时给我关于我的代码和我上面提出的问题的任何建议

第一个功能

```
def taskUpdateB():
    conn = sqlite3.connect("zzzsqlite.db")
    booking = conn.cursor()

    index = sOLB.curselection()
    selTask = sOLB.get(index)
    bookinID = selTask[-2]

    getBookID = booking.execute('''SELECT bookingID FROM booking 
                        WHERE bookingID=?''', (bookinID,))    

    taUp = Toplevel()
    taUp.title("Task Update")
    taskLabel = Label(taUp, text ="Task Update", font=('Times', 20))
    taskLabel.grid(row=0)

    showLabel = Label(taUp, text ="Please Select and Enter Infomation Below", font=('Times', 18))
    showLabel.grid(row=1)

    var = IntVar()
    var = 0
    fullRadio = Radiobutton(taUp, text="Fully", variable=var, value=1, command = taskUpdCom)
    fullRadio.grid(row=2, sticky=W)

    partRadio = Radiobutton(taUp, text="Partly", variable=var, value=2, command = taskUpdCom)
    partRadio.grid(row=3, sticky=W)

    notRadio = Radiobutton(taUp, text="Unable", variable=var, value=3, command = taskUpdCom)
    notRadio.grid(row=4, sticky=W)

    noteLabel = Label(taUp, text ="Note:", font=('Times', 16))
    noteLabel.grid(row=5, sticky=W)
    noteBox = Text(taUp, width=30, height =20, font=('Arial', 12,), highlightbackground='black')
    noteBox.grid(row=6)

    comButton = Button(taUp, text ="Task Complete and Send Invoice", command = taskUpdCom)
    comButton.grid(row =7)

    booking.close()
    return (var, noteBox, showLabel, bookinID) 
```

第二个功能

```
 def taskUpdCom():
        a = taskUpdateB
        #get the data from the update list
        var = taskUpdateB.var()
        noteBox = taskUpdateB.noteBox()
        showLabel = taskUpdateB.showLabel()
        bookinID = taskUpdateB.bookinID()

    selProg = str(var.get())
    if selProg == 0:
        showLabel["text"] = ("***Please Select Task Progress Below***")
    elif noteBox.get() == "":
        showLabel["text"] = ("***Please Enter Task Note Below***")
    else:
        conn = sqlite3.connect("zzzsqlite.db")
        update = conn.cursor()
        wriUpda = zzzsqliteTable.addUpdate(bookinID, selProg, noteBox)
        conn.commit()
        updata.close()
        taskUpdateB.noteBox.delete(0, END)
        tkinter.messagebox.showinfo("Notification","Your task has been updated and removed from the list")
        try:
            deIndex = taskUpdateB.index()#The item selected from task update delete it from the list.... will still in the database.
            sOLB.delete(deIndex)
        except IndexError:
            pass 
```

请原谅我的代码还没有完全完成，有点凌乱......

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T20:37:53.433

这不是函数的工作方式。您可能想要调用该函数，然后在调用范围内解压缩结果。

```
var, noteBox, showLabel, bookinID = taskUpdateB() 
```

虽然函数确实是 Python 中的对象，但它们不是有状态的处理器或其他东西，它们只是直接返回结果然后消失（好吧，除非你在做一些花哨的事情，但你不是）。

# android - Android - 线性布局背景“超过”视图

> ID：16024292
> 
> 赞同：1
> 
> 时间：2013-04-15T20:35:59.107
> 
> 标签：android, layout, background, views

我正在尝试将简单的渐变背景应用于我的主要 LinearLayout。我的问题是背景拒绝留在背景中，而是决定也覆盖我的视图（在这种情况下为 TextViews 和 Buttons）。我做错了什么/我错过了什么？谢谢你的帮助！

主要布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/mainLinearLayout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/bg_gradient"
android:orientation="vertical" 
>

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Select the PC to communicate with..." />

<TextView
    android:id="@+id/textViewStatus"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Status" />

<RadioGroup
    android:id="@+id/radioGroupDevices"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

</RadioGroup>  

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/btnBack"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="&lt;&lt;" />

    <Button
        android:id="@+id/btnVolDown"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="-" />

    <Button
        android:id="@+id/btnPlayPause"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="|>" />

    <Button
        android:id="@+id/btnVolUp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="+" />

    <Button
        android:id="@+id/btnNext"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text=">>" />

   </LinearLayout>

</LinearLayout> 
```

可绘制/bg_gradient.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <gradient android:angle="270" android:endColor="#181818" android:startColor="#616161"/>

    <stroke android:width="1dp" android:color="#343434" />
</shape> 
```

结果（来自 Eclipse xml 编辑器的屏幕截图，但在实际手机上看起来相同） [http://s14.directupload.net/images/130415/q8q6hcmn.png](http://s14.directupload.net/images/130415/q8q6hcmn.png)

如您所见，文本行和按钮似乎至少部分被背景覆盖。我也尝试使用普通的黑色背景，但结果相同。所有视图都在黑雾后面显得“模糊”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:15:48.473

看来您正在为 android 版本 3 或更高版本进行开发......所以在这个版本和主题之上的版本中设置了诸如控件似乎具有透明背景......

尝试将控件（按钮，文本视图）背景更改为一些哈希颜色值

例如：-`android:background="#ffaaff"`

现在你不需要改变你的代码......试一试吧......

对于您的按钮，请将其放入您的代码中以使其透明...

```
v.setBackgroundColor(0x0000FF00 ); 
```

希望这对你有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T20:44:25.947

我没有看到你的按钮被你的渐变污染。至于最上面的文本 - 默认情况下 TextView 背景是透明的，因此可以通过它看到容器的背景，这是正常的。

# c++ - 对操作员“删除”的调用是同步的吗？

> ID：16024296
> 
> 赞同：18
> 
> 时间：2013-04-15T20:36:13.430
> 
> 标签：c++, memory-management, asynchronous

我想知道对运营商的调用是否`delete`是同步的。换句话说，如果我这样做：

```
delete p; 
```

C++ 标准是否保证只有在此调用完成执行后才会释放内存？或者调用是异步的并且只是为操作系统安排一个任务来释放这个内存，一旦它决定这是最好的时间？

如果第一种情况是有效的，那么这是否意味着我们必须实现自己的异步删除器工具？我问是因为我会说大多数时候我们（程序员）并不关心内存何时被准确释放，因此我们不希望我们的代码冻结并等待这个（很可能很昂贵？）系统调用完成，而是安排删除任务并立即继续执行。C++ 是否提供任何标准工具（可能通过标准库？）来做到这一点而无需重新发明轮子？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-15T20:40:46.950

`delete`是同步的。现在，这并不意味着底层内存实际上在那个时候被操作系统释放了，而是从 C++ 系统的角度来看，它的行为就像。

> 我问是因为我会说大多数时候我们（程序员）并不关心内存何时被完全释放

但`delete`主要不是关于内存，它与以确定性方式调用析构函数同样重要——它是一种通用的资源释放机制，不限于内存。在这里，具有同步*性很*重要，否则 C++ 的核心方面之一[——RAII——](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)将无法工作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-15T20:42:39.563

没有什么能保证`delete p;`将内存释放回操作系统 - 永远。事实上，在相当多的（大多数？）实现中，它不会做任何事情。

但是，调用时发生的确切*情况*`delete`会有所不同——在某些情况下，它几乎是即时的（只需将块链接到可用内存块的列表）。在其他情况下，它会做更多的工作：销毁对象，并可能在当前空闲列表中搜索可以与被释放的块合并的相邻块。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-15T20:37:24.537

就您而言，一切都按照您的预期进行，没有隐藏的陷阱或陷阱。`T * p = new T; delete p;`无论发生在什么情况下，您都可以说这是正确的。

鉴于操作系统通常必须同时为各种进程和线程分配内存，您可以假设该问题已得到正确解决。

更正式地说，18.6.1.4/1（“数据竞赛”）说：

> 为了确定数据竞争的存在， 的库版本`operator new`、 global 的用户替换版本`operator new`和 C 标准库函数的`calloc`行为`malloc`应该就像它们只访问和修改返回值引用的存储一样。的库版本`operator delete`、用户替换版本`operator delete`和 C 标准库函数的`free`行为就像它们只访问和修改了它们的第一个参数引用的存储一样。

关于“阻塞性”：这一切都归结为 C 库的分配函数的作用。除了“此函数返回指向某个内存的指针”之外，没有指定任何内容。它如何提供内存分配取决于平台。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T20:42:22.867

无论如何，C/C++ 中的免费调用已经非常快了。在这方面，您没有理由延迟删除它，以便在更合适的时间进行。为此目的，您需要做的任何簿记都将抵消实际的免费通话时间。

如果你的析构函数做更多的工作，比如关闭数据库连接的套接字，那么你可以在以后做这种类型的工作，但这应该是一个例外情况。

# android - Dialog 或 DialogFragment 中的 Activity 中的 dispatchTouchEvent() 是否有等价物

> ID：16024297
> 
> 赞同：6
> 
> 时间：2013-04-15T20:36:13.540
> 
> 标签：android, dialog, touch-event, android-dialogfragment

我需要拦截应用程序中的所有触摸事件以监视自定义活动超时。

目前我`dispatchTouchEvent()`在我的活动中使用，但如果我在屏幕上有一个对话框，则不会调用它。有谁知道是否有任何方法可以在存在对话框的情况下获得相同的功能？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2017-02-13T12:34:37.173

为了`dispatchTouchEvent()`在 DialogFragment 中使用，覆盖`onCreateDialog`并返回一个自定义`Dialog`（`dispatchTouchEvent`在您的自定义 DialogFragment 中）。

例如，在 DialogFragment 中单击外部时关闭键盘：

```
@NonNull
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    return new Dialog(getActivity(), getTheme()) {
        @Override
        public boolean dispatchTouchEvent(@NonNull MotionEvent motionEvent) {
            if (getCurrentFocus() != null) {
                InputMethodManager inputMethodManager = (InputMethodManager) getContext().getSystemService(Context.INPUT_METHOD_SERVICE);
                inputMethodManager.hideSoftInputFromWindow(getCurrentFocus().getWindowToken(), 0);
            }
            return super.dispatchTouchEvent(motionEvent);
        }

    };
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-21T10:05:43.017

每个人都享受 Kotlin 版本：

```
abstract class BaseDialogFragment : DialogFragment() {

    override fun onCreateDialog(savedInstanceState: Bundle?): Dialog {
        return object : Dialog(requireContext()){
            override fun dispatchTouchEvent(ev: MotionEvent): Boolean {
                // do your thing here
                return super.dispatchTouchEvent(ev)
            }
        }
    }

} 
```

# ruby-on-rails - Rails CSV 生成

> ID：16024298
> 
> 赞同：0
> 
> 时间：2013-04-15T20:36:15.160
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, csv, export-to-csv

如何按列而不是按行将数据添加到 csv 文件。

我目前拥有的：

```
 def self.as_csv(rating_id)
    CSV.generate do |csv|
      csv << ["set_id","item_id", "aggregated_rating", "related_item_id", "rating", "time"]
      product_ids = RatingSet.find(rating_id).products
      product_ids.each do |product|
       recommendation_ids =Recommendation.find(:all, :joins => :products, :conditions => ["product_id = ? and rating_set = ?", product.id, rating_id])
        recommendation_ids.each do |recommendation|
          Rating.find(:all, :conditions => ["recommendation_id = ? and rating_set = ? and product_id = ?", recommendation.id, rating_id, product.id]).each do |rating|
           time_updated = (rating.updated_at)
            csv <<  [rating_id, product.id, product.rating, recommendation.id, rating.rating, time_updated]
          end
        end
      end
    end
  end 
```

这基本上为每组数据生成新行，例如：

```
102 4433175 2.4 10391793    1   2013-03-26 18:33:40 UTC 
102 4433175 2.4 10391794    1   2013-03-26 18:33:40 UTC 
102 4433175 2.4 12526899    1   2013-03-26 18:33:40 UTC 
102 4433175 2.4 19235377    1   2013-03-26 18:33:40 UTC 
```

如何通过添加新列而不是行来生成它：

```
102 4433175 2.4 10391793    1   10391794    1   12526899    1   19235377    1   2013-03-26 18:33:41 UTC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T03:33:38.137

你可以使用`group_by`.

如果性能不是问题，您也可以这样做

```
 def self.as_csv(rating_id)
    CSV.generate do |csv|
      csv << ["set_id","item_id", "aggregated_rating", "related_item_id", "rating", "time"]
      product_ids = RatingSet.find(rating_id).products
      product_ids.each do |product|
       recommendation_ids =Recommendation.find(:all, :joins => :products, :conditions => ["product_id = ? and rating_set = ?", product.id, rating_id])
        recommendation_ids.each do |recommendation|
          rattings = Rating.find(:all, :conditions => ["recommendation_id = ? and rating_set = ? and product_id = ?", recommendation.id, rating_id, product.id]).map { |r| [r.ratting, r.updated_at] }.flatten
            csv << ([rating_id, product.id, product.rating, recommendation.id] + rattings)
          end
        end
      end
    end
  end 
```

# android - UI 后退按钮 Android

> ID：16024300
> 
> 赞同：-3
> 
> 时间：2013-04-15T20:36:22.647
> 
> 标签：android

我有以下代码可以返回到我的应用程序的上一页。

```
Button wback = (Button)  findViewById(R.id.wback);
wback.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
                    mpButtonClick.start();
        finish();   

    } 
```

我也有按钮按下的声音。但是按钮不起作用，应用程序停留在原处，几乎没有做任何事情。我之前遇到过错误，但这是由于按钮名称不正确造成的。

我要返回的上一页是一个活动，它在我的清单中标记如下：

```
<action android:name="com.shade.waz.CLEARSCREEN" /> 
```

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T20:40:07.640

首先，打电话`mpButtonClick.start();`，然后`finish();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T20:40:45.730

那是因为`finish();`将完成您的活动并关闭它。如果您的上一个页面是一个片段，那么您应该将 backstack 弹出到该页面，否则您将需要提供更多信息。

下面是一个弹出 backstack 的例子：

```
FragmentManager ft = getFragmentManager();
    ft.popBackStack("splash", FragmentManager.POP_BACK_STACK_INCLUSIVE); 
```

# compilation - 使用 erl.exe 编译 Erlang 模块

> ID：16024304
> 
> 赞同：0
> 
> 时间：2013-04-15T20:36:36.770
> 
> 标签：compilation, erlang, erlang-shell

我对 Erlang 非常陌生，我正在尝试编译我的第一个 Erlang 模块并且收到一个错误，即不存在这样的文件，尽管它确实存在。

`useless.erl`非常感谢任何关于为什么我 erl.exe 无法编译的建议。

提前谢谢了！

erl.exe 命令提示符（注意模块实际上包含 useless.erl）

```
1> filename:absname("C:/Users/modules"). 
"C:/Users/modules"
2> c(useless). 
useless.erl:none: no such file or directory 
```

（没用的.erl）

```
-module(useless).
-export([add/2, hello/0, greet_and_add_two/1]).

add(A,B) ->
A + B.

%% Shows greetings.
%% io:format/1 is the standard function used to output text.
hello() ->
io:format("Hello, world!~n").

greet_and_add_two(X) ->
hello(),
add(X,2). 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T21:56:12.560

使用该表单，您需要执行`erl`与您尝试编译的模块相同的目录。`c`使用函数时可以指定文件路径。`.beam`这将在您的当前目录中创建一个文件：

```
Erlang R16B (erts-5.10.1) [source] [64-bit] [smp:8:8] [async-threads:10] [hipe] [kernel-poll:false] [dtrace]

Eshell V5.10.1  (abort with ^G)
1> c("stackoverflow/passfun.erl").
{ok,passfun}
2> passfun:some_func().
hello 
```

# c# - 如何在 C# 字符串属性中插入 HTML 标签？

> ID：16024313
> 
> 赞同：2
> 
> 时间：2013-04-15T20:37:24.987
> 
> 标签：c#, asp.net-mvc-3

不知道怎么可能，但我在课堂上有这个：

```
public string TextNotIncluded 
{ 
    get
    { 
        return ("which is <u>not</u> included in the Quote");
    }
} 
```

和正在显示在我的视图中，而不是没有下划线的单词`<u>`。`</u>`我对 C# 不熟悉。

谁能提供一个快速的答案？

谢谢。

**编辑：**

在我看来，我只是这样称呼它：`@MyClass.TextNotIncluded`。在我的情况下，用它包裹起来`@Html.Raw`效率不高，因为我在几十个视图中都散布了它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-15T20:39:51.427

这样做从根本上没有错，但它可能不会呈现您所期望的方式。

您可以`@Html.Raw`按照其他人的建议使用，但我认为最好以表明它可能包含 html 的方式明确声明您的模型。您可能希望为此使用[`MvcHtmlString`](http://msdn.microsoft.com/en-us/library/system.web.mvc.mvchtmlstring%28v=vs.108%29.aspx)该类：

```
public MvcHtmlString TextNotIncluded 
{ 
    get { return MvcHtmlString.Create("which is <u>not</u> included in the Quote"); }
} 
```

然后在您看来，您可以使用：

```
@Model.TextNotIncluded 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-15T20:39:41.620

如果您使用的是 Razor，则默认情况下字符串是 HTML 编码的 - 您需要使用`Html.Raw`来关闭编码：

```
@Html.Raw(x.TextNotIncluded) 
```

在 ASPX 引擎中，您将使用`<%= %>`

```
<%= x.TextNotIncluded %> - this gives you the raw text
<%: x.TextNotIncluded %> - this HTML-encodes your text - you don't want this. 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-15T20:39:14.000

要输出原始 HTML，请使用[`Raw`](http://msdn.microsoft.com/en-us/library/gg480740%28v=vs.98%29.aspx)HTML 帮助程序：

```
@Html.Raw(TextNotIncluded) 
```

这个助手不对输入进行 HTML 编码，所以使用它时要小心。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-15T20:41:02.200

您需要对字符串进行 HTML 编码。大多数人都推荐 MVC 方法，但我会让它更独立于表示层。

```
public string TextNotIncluded { 
    get { 
        return System.Web.HttpUtility.HtmlEncode("which is <u>not</u> included in the Quote"); 
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-15T20:46:05.630

你可以使用

```
@Html.Raw(Model.TextNotIncluded) 
```

或者

```
@MvcHtmlString.Create(Model.TextNotIncluded) 
```

在你看来。

但最好更改属性的返回类型：

```
public MvcHtmlString TextNotIncluded
{
    get
    {
        return MvcHtmlString.Create("which is <u>not</u> included in the Quote");
    }
} 
```

# matlab - 如何去除应用 ADAPTIVETHRESH 时产生的粗边框 - Wellner 的自适应阈值

> ID：16024316
> 
> 赞同：0
> 
> 时间：2013-04-15T20:37:34.420
> 
> 标签：matlab, image-processing

参考下面提到的链接： -

图片1：![在此处输入图像描述](https://i.stack.imgur.com/EcJM2.png)

图片2：![在此处输入图像描述](https://i.stack.imgur.com/3nkft.png)

图 2 是应用`adapthisteq`后跟**Wellner 的自适应阈值后得到的**

有人可以帮我去掉那个粗边框吗，因为在处理图像时，图像边框的坐标也被提取​​了。我试过了，`imclearborder`但那些接触边界的静脉也被移除了。

此外，我的印象是，与图 1 相比，图 2 中的静脉图案的尺寸有所增加。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:54:17.590

你提供的图片大小不一样。但下面的代码是一般的想法：

代码：

```
hand = imread('hand.png'); % this the hand
hand = hand(1:235,1:309);
thresh = imread('thresh.png'); % this is the "veined" image with the large border
thresh = thresh(:,:,1);

thresh(hand < 100) = 256;

figure, imshow(thresh) 
```

输出：

![在此处输入图像描述](https://i.stack.imgur.com/6wvwI.jpg)

基本上，只要在拳头上做一个简单的门槛。通过逻辑索引选择这些点。然后，将“脉络”图片中这些索引的值设置为白色值（1 或 256，取决于它是否合乎逻辑）。

此外，如果您提供的图像尺寸相同且对齐，右侧的轻微黑色边框区域将消失。我还建议使用`imdilate`with`imerode`来摆脱小块。

# php - 将 jquery 函数从表单提交转换为 php 数组结果

> ID：16024319
> 
> 赞同：0
> 
> 时间：2013-04-15T20:37:51.987
> 
> 标签：php, jquery, jquery-plugins, foreach

我正在尝试使用[ImageResolver](https://github.com/mauricesvay/ImageResolver)插件并将其调整为与 php 数组一起使用。

将代码剥离到此会返回没有表单的图像：

```
$(function(){

    var url = $('#url').val();
    ImageResolver.resolve(url, function(image){
        if (image) {
            $('#result').html('<img src="' + image + '" alt="">');
        } else {
            $('#result').html('<h2>No image found</h2>');
        }

});
}); 
```

我想调整它以在 php foreach 循环中工作。结果将在下一个`class='result'`div 上被替换。IE：页面加载了查询中的url后，该函数将解析url，如果找到则返回图片链接。我猜我需要使用`(each)`or `this()`，但我无法弄清楚。

有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T00:12:49.930

```
 <script src="ImageResolver/URI.min.js"></script>
        <script src="ImageResolver/ImageResolver.js"></script>

    <?
        $javascriptarray = 'var urls = [';
        $counter=0;
        foreach (array('http://www.apple.com/','http://github.com/','http://www.test.com/') as $url) 
        {
            if ($counter++ > 0) $javascriptarray .= ',';
            $javascriptarray .= '"'.$url.'"';
        }
        $javascriptarray .= '];';   
    ?>
<script>    
<?=$javascriptarray?>

//The ImageResolver will try all the resolvers one after the other
//in the order of their registration

//Resolvers that guess the image URL
ImageResolver.register(new FileExtensionResolver());
ImageResolver.register(new ImgurPageResolver());
ImageResolver.register(new NineGagResolver());
ImageResolver.register(new InstagramResolver());

//Resolvers that need extra ajax requests
ImageResolver.register(new ImgurAlbumResolver());
ImageResolver.register(new OpengraphResolver());
ImageResolver.register(new WebpageResolver());

//Some jQuery code to make the demo work
//Use a crossdomain proxy (required by some plugins)
$.ajaxPrefilter('text', function(options) {
    options.url = "http://furious-stream-4406.herokuapp.com?src=" + encodeURIComponent(options.url);
});

$(function(){

var length = urls.length,
url = null;
    for (var i = 0; i < length; i++) {
            url = urls[i];
            ImageResolver.resolve(url, function(image){
            if (image) {
                $('#result').append('<img src="' + image + '" alt=""><br>');
            } else {
                $('#result').append('<h2>No image</h2>');
                //$('#result').append('<h2>No image found for ' + url + '</h2>');
            }
        }); 
    }
}); 

</script> 
```

注意因为 ImageResolver.resolve() 异步工作，您可能会得到意想不到的结果。在上一个调用完成之前再次调用 ImageResolver.resolve() 将`$('#result').append('<h2>No image found for ' + url + '</h2>');`通过示例将 url 更改为您上次调用的 url。为了防止这种情况，您需要在 for 循环中初始化一个新的解析器。请参阅：[Javascript 原型和实例创建](https://stackoverflow.com/questions/5837795/javascript-prototypes-and-instance-creation)

# ruby-on-rails - 为 Rails 中的 JSON 解析应用猴子补丁

> ID：16024330
> 
> 赞同：1
> 
> 时间：2013-04-15T20:39:04.383
> 
> 标签：ruby-on-rails, json, patch

我正在尝试处理 BigCommerce API 返回无效 JSON 对象的边缘情况问题，从而导致未配对的八位字节，如下所述：[JSON 文本必须至少包含两个八位字节](https://stackoverflow.com/questions/8390256/a-json-text-must-at-least-contain-two-octets)

我相信解决方案是部署代码（来自该线程）：

```
module JSON
  def self.parse_nil(json)
    JSON.parse(json) if json && json.length >= 2
  end
end

parsed = JSON.parse_nil(json) 
```

我在哪里部署此代码以应用补丁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:54:56.943

像这样的补丁通常被添加到目录中的一个空`.rb`文件中`/config/initializers`（参见[这里](https://stackoverflow.com/questions/3420680/monkey-patching-in-rails-3)的例子）。请注意，补丁不应包含最后一行：

```
parsed = JSON.parse_nil(json) 
```

这是为了演示目的而添加的。

# ant - Closure-Compiler-ant-task 的属性文件

> ID：16024332
> 
> 赞同：0
> 
> 时间：2013-04-15T20:39:09.410
> 
> 标签：ant, google-closure-compiler

我正在使用闭包编译器通过 ant 任务缩小 javascript。我的构建文件变得杂乱无章。另外，我没有缩小开发环境中的 javascript 文件。目前我在两个地方声明了 javascript 文件。一次`build.xml`在 Closure Compiler Ant Task 中，另一个在 FreeMarker 模板页面中，用于未缩小的版本。我想将 javascript 文件的声明移动到文件中的逗号分隔值中`.properties`。如何配置 Closure Compiler Ant Task 以便从属性文件中读取？

```
 <target name="minimize-javascript" description="Create a minified version of the various JS scripts using Closure Compiler">
    <taskdef name="jscomp" classname="com.google.javascript.jscomp.ant.CompileTask">
    <classpath refid="jars.classpath"/>
    </taskdef>
    <jscomp compilationLevel="simple"
        debug="false" output="${web.dir}/resources/js/minimized.js">

        <sources dir="${web.dir}/resources/js/src/deps/jquery/1.8.3/">
            <file name="jquery-1.8.3.js"/>
        </sources>
        <sources dir="${web.dir}/resources/js/src/deps/jquery/ui/1.8.24">
            <file name="jquery-ui.js"/>
            <file name="jquery.ui.core.js"/>
            <file name="jquery.ui.widget.js"/>
            <file name="jquery.ui.tabs.js"/>
            <file name="jquery.ui.sortable.js"/>
            <file name="jquery.ui.selectable.js"/>
            <file name="jquery.ui.resizable.js"/>
            <file name="jquery.ui.position.js"/>
            <file name="jquery.ui.mouse.js"/>
            <file name="jquery.ui.droppable.js"/>
            <file name="jquery.ui.draggable.js"/>
            <file name="jquery.ui.dialog.js"/>
            <file name="jquery.ui.button.js"/>
            <file name="jquery.effects.core.js"/>
            <file name="jquery.effects.drop.js"/>
        </sources>
    </jscomp>
</target> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T14:36:09.157

不知道你是否解决了你的问题——你可以从 a 开始`fileset`，它可以获取所有的 .js 文件，而不是一个一个地声明它们。

```
<fileset dir="${web.dir}/resources/js/src/deps/jquery/ui/1.8.24">
      <include name="**/*.js"/>
</fileset> 
```

这意味着您不需要属性文件。

# objective-c - 将 UIButton 状态传递给另一个 ViewController

> ID：16024336
> 
> 赞同：0
> 
> 时间：2013-04-15T20:39:22.700
> 
> 标签：objective-c, uibutton

我`FirstViewController`以编程方式创建了 X 个 UIButton，其中 X=我的数组中的节点数。在这个视图控制器中，用户可以在切换到`SecondViewController`. 我需要将按钮状态发送到 SVC，但问题是按钮共享相同的名称并且仅由它们的`tag`.

```
if (((FirstViewController *)self.presentingViewController).scoreButton.selected == YES)
{

} 
```

上面的代码似乎不起作用，我认为是因为不包含标签。是否有另一种方法来调用识别其标签并读取其`selected`状态的 UIButton？

# zend-framework2 - Params 插件魔术方法功能

> ID：16024339
> 
> 赞同：0
> 
> 时间：2013-04-15T20:39:40.323
> 
> 标签：zend-framework2

为什么params插件魔术函数默认转发路由？

为什么 zf 不能从下面的示例中的参数中获取函数？

```
public function __invoke($param = null,$type='Route', $default = null)
{
    if ($param === null) {
        return $this;
    }
    $type = 'from'.ucfirst($type); 
    // Need to check function exist, if not must throw some error
    return $this->$type($param, $default);
} 
```

示例使用

```
$this->params('name','post');
$this->params('token','get');
$this->params('action'); // this will return from route like default one. 
```

我怎样才能像这样扩展默认参数插件？这是一个好的举措吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:08:03.823

默认参数总是从路由中获取。这是因为 ZF2 鼓励人们进行大量手动路由。这既是出于速度目的，也是出于 SEO 目的。

```
$this->params('paramname', 'defaultValueIfNotFound'); 
```

在您需要来自请求的特定区域的参数的情况下，您也可以使用 params-plugin 本身来执行此操作。但这已经被@Matsemann大大解释了

*   [如何在 Zend Framework 2 中访问 Route/Post/Get/etc 参数](https://stackoverflow.com/questions/12077126/how-to-access-route-post-get-etc-parameters-in-zend-framework-2)

您可以扩展 params 插件，但您应该使用第三个参数作为附加选项。但请记住，另一种方法更简洁，并且最终需要更少的插件工作。没有`switch`-statement只是为了得到一个参数;）

# sql - 带参数的sql注入

> ID：16024341
> 
> 赞同：-1
> 
> 时间：2013-04-15T20:39:44.523
> 
> 标签：sql, sql-injection

以下是否暴露了 Sql Injection 攻击向量？如果确实如此，我该如何预防？

```
@bookId = '1234;' + 'Drop table Books;'
Select * from Books where bookId = @bookId 
```

它不会像这样执行吗？：

```
Select * from Books where bookId = 1234; Drop table Books; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T20:40:45.610

不，它不会。这不是参数化的工作方式。参数化不是字符串连接。

此代码将尝试查找 id 为 的书`1234;Drop table Books;`。如果`bookId`是`integer`.

你是安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T21:32:40.897

您可能还会发现这很有用：[http ://crypto.stanford.edu/cs142/lectures/16-sql-inj.pdf](http://crypto.stanford.edu/cs142/lectures/16-sql-inj.pdf)

# javascript - 如何在 jQuery 中组合这三个代码块并更优雅/高效地编写它们？

> ID：16024343
> 
> 赞同：-1
> 
> 时间：2013-04-15T20:39:53.393
> 
> 标签：javascript, jquery

我有以下三个代码块，想知道是否可以以某种方式将它们组合起来，这样我就不必一遍又一遍地编写相同的代码。对不起，如果我解释这个有趣。我只想学习尽可能优雅/高效地写作。

HTML

```
<a href="#" id="download-1">Tweet to Download</a></li>
<a href="#" class="download1">Download</a></li>

<a href="#" id="download-2">Tweet to Download</a></li>
<a href="#" class="download2">Download</a></li>

<a href="#" id="download-3">Tweet to Download</a></li>
<a href="#" class="download3">Download</a></li> 
```

# 1

```
 // Download 1
  $('#download-1').tweetAction({
    url: 'download1',
    text: 'Download 1',
    via: 'twittersn'
  },function(){
    // When the user closes the pop-up window:

    $('a.download1')
      .addClass('active')
      .attr('href','download1.psd');
  }); 
```

# 2

```
 // Download 2
  $('#download2').tweetAction({
    url: 'download2',
    text: 'Download 2',
    via: 'twittersn'
  },function(){
    // When the user closes the pop-up window:

    $('a.download2')
      .addClass('active')
      .attr('href','download2.psd');
  }); 
```

# 3

```
 // Download 3
  $('#download3').tweetAction({
    url: 'download3',
    text: 'Download 3',
    via: 'twittersn'
  },function(){
    // When the user closes the pop-up window:

    $('a.download3')
      .addClass('active')
      .attr('href','download3.psd');
  }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T20:46:25.183

只需包含在一个函数中，因此：

```
function tweetFunc(id) {
    $('#download-' + id).tweetAction(
        {
            url: 'download' + id,
            text: 'Download ' + id,
            via: 'twittersn'
        },
        function() {
            // When the user closes the pop-up window:
            $('a.download' + id)
                .addClass('active')
                .attr('href','download' + id + '.psd')
            ;
        }
    );
}

for(i = 1; i <= 3; i++) {
    tweetFunc(i);
} 
```

要使其正常工作，您需要同步下载 id 属性的格式：是它`download-X`还是`downloadX`？

# opencv - opencv 向轮廓添加矩形边界框

> ID：16024344
> 
> 赞同：0
> 
> 时间：2013-04-15T20:40:05.377
> 
> 标签：opencv

我已经从图像中找到了轮廓现在我想将一个矩形边界框分别应用于轮廓我也希望计数应该被着色这里是我正在使用的代码

```
int main ()
{

    CvSeq*contours=0;
    CvSeq* canny_contours = 0;
    CvMemStorage*storage=cvCreateMemStorage(0);
    CvMemStorage* canny_storage = cvCreateMemStorage(0);

    IplImage*a=cvLoadImage("lisc.jpg");
    IplImage*b(cvCreateImage(cvGetSize(a),IPL_DEPTH_8U,1)); 
    IplImage*c(cvCreateImage(cvGetSize(b),IPL_DEPTH_8U,1));
    IplImage*d(cvCreateImage(cvGetSize(c),IPL_DEPTH_8U,1));

    cvCvtColor(a,b,CV_RGB2GRAY);
    cvThreshold(b,c,128,255,CV_THRESH_BINARY);
    cvCanny(c,d,50,150,3);

    cvFindContours(c,storage,&contours,sizeof(CvContour), 
        CV_RETR_EXTERNAL, CV_CHAIN_CODE);
    cvFindContours(d, canny_storage, &canny_contours, sizeof(CvContour),
                   CV_RETR_EXTERNAL, CV_CHAIN_CODE);
    cvDrawContours(c,contours,cvScalar(255,255,255), cvScalarAll(255), 100);

    //for( ; canny_contours != 0; canny_contours = canny_contours->h_next )
    //{
    //     CvScalar color = CV_RGB( rand()&200, rand()&200, rand()&200 );

    /* replace CV_FILLED with 1 to see the outlines */

    cvDrawContours( d, canny_contours, cvScalar(rand()&200,rand()&200,rand()&200), 
        cvScalarAll(rand()&200),1);

    //}

    cvNamedWindow("rola",CV_GUI_NORMAL);
    cvNamedWindow("meaow0",CV_GUI_NORMAL);
    cvShowImage("rola",c);
    cvShowImage("meaow0",d);
    cvWaitKey(0);
    cvReleaseImage(&c);
    cvReleaseImage(&d);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T00:36:32.167

我不熟悉 C 风格的 API。但也许你可以使用以下功能。

```
Rect r = cvBoundingRect(points,0); 
```

在 C++ 中，点是“std::vector<cv::Point>”。

[http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=boundingrect#boundingrect](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=boundingrect#boundingrect)

# javascript - lastModified() 函数返回当前日期和时间

> ID：16024346
> 
> 赞同：7
> 
> 时间：2013-04-15T20:40:10.200
> 
> 标签：javascript

我的问题是：为什么当我在网页上使用“document.lastModified”时，它会返回当前日期和时间，而不是上次修改此页面的时间......有什么想法吗？提前致谢 ：）

实际代码是：

```
<script type="text/javascript"> document.write("Page was last modified on: " + document.lastModified);</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-03-08T19:24:25.110

我今天做了一个实验。我将以下脚本放在我的服务器上的一个文件中，该文件最后一次修改是在 1 月 1 日：

```
 var theDate = new Date(document.lastModified).toISOString().substr(5, 5).replace('-', '');
document.write(theDate); 
```

并请来访者告诉我他们看到了什么。103 表示他们看到“0101”，即预期的字符串，8 表示他们看到“0308”，即当前日期。所有不好的答案都来自 Android、Chrome/7[12] 用户。其他 Android 用户也提供了很好的答案 (22)，通常是使用早期版本的 Chrome。然而，有 10 位 Android Chrome/72 用户看到了好日子。

根据这个小样本，Android Chrome 71+ 版本肯定有问题，但它是随机的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T20:49:04.983

因为您当前正在修改它。[例如](http://w3schools.com/js/tryit.asp?filename=tryjs_events)，检查一下。

要根据您的要求进行这项工作，请查看[此链接](http://answers.yahoo.com/question/index?qid=20091202150609AAC9bkV)和[此链接](http://www.codingforums.com/archive/index.php/t-58508.html)

从外部链接复制：

> 把它放在页面底部：

```
 <script type="text/javascript" src="js_lus.js"></script> 
```

> 随意命名文件。示例：js_lus.js 确保 src="" 路径对于所有页面都是正确的。

```
function lastModified() {
    var modiDate = new Date(document.lastModified);
    var showAs = modiDate.getDate() + "-" + (modiDate.getMonth() + 1) + "-" + modiDate.getFullYear();
    return showAs
}

function GetTime() {
    var modiDate = new Date();
    var Seconds

    if (modiDate.getSeconds() < 10) {
        Seconds = "0" + modiDate.getSeconds();
    } else {
        Seconds = modiDate.getSeconds();
    }

    var modiDate = new Date();
    var CurTime = modiDate.getHours() + ":" + modiDate.getMinutes() + ":" + Seconds
    return CurTime
}

document.write("Last updated on ")
document.write(lastModified() + " @ " + GetTime());
document.write(" [D M Y 24 Hour Clock]")
document.write(""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-03T17:21:24.957

我在使用 PHP 编程时遇到了这个问题。就我而言，问题是由于 PHP 是一种服务器端语言，因此每次调用页面时都会重新呈现页面，从而重置 javascript 代码，询问何时编辑。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-09-03T05:19:39.757

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html><head><title>Last Modified Date</title></head><body>
Last modified:
<script language="JavaScript">
var testlast=document.lastModified;
document.write(" "+testlast.substr(0,10));
</script><br>
</body></html> 
```

该代码应返回源文档的上次修改日期。过去总是如此。正在更改的“文档”是网页的显示形式，而不是源。第 3 行应该获取文档的修改日期，该日期在页面显示之前、期间或之后都不会改变。所以“testlast”应该是源的修改日期，而不是当前日期。当我将源代码放在我的 Macintosh 上并从我的“本地主机”访问它时，这段代码可以正常工作。

# asp.net - 作为 Windows 服务托管的 c# WCF Restful Web 服务的跨源资源共享

> ID：16024347
> 
> 赞同：9
> 
> 时间：2013-04-15T20:40:11.857
> 
> 标签：asp.net, wcf, c#-4.0, rest, cors

我有一个作为 Windows 服务托管的 WCF Restful 服务。我想为我的服务添加跨域支持。但是，当我使用 global.asax 文件时，我可以轻松地做到这一点。但我想将我的服务托管为 Windows 服务。

我创建了一个项目，将我的服务托管为 Windows 服务。现在我面临的问题是，我现在无法添加跨域支持。我尝试了通过 app.config 文件找到的所有可能的解决方案，但没有一个可行。我在这些链接上尝试了解决方案：

[点网技巧](http://www.dotnet-tricks.com/Tutorial/wcf/X8QN260412-Calling-Cross-Domain-WCF-Service-using-Jquery.html)

[启用-cors.org](http://enable-cors.org/)

我尝试通过在每个服务合同方法中调用以下函数来设置代码中的标头。

```
private static void SetResponseHeader()
{
WebOperationContext.Current.OutgoingResponse.Headers.Add("Access-Control-Allow-Origin", "*");
WebOperationContext.Current.OutgoingResponse.Headers.Add("Cache-Control", "no-cache, no-store");
WebOperationContext.Current.OutgoingResponse.Headers.Add("Access-Control-Request-Methods", "GET, POST, PUT, DELETE, OPTIONS");
WebOperationContext.Current.OutgoingResponse.Headers.Add("Access-Control-Allow-Headers", "Content-Type, Accept");
} 
```

界面：

```
namespace ReaderService
{
[ServiceContract]
public interface INFCReader
{
    [OperationContract]
    [WebInvoke(UriTemplate = "GetLogin", Method = "POST")]
    GetLoginResults GetLogin(DisplayRequest dispRequest);
} 
```

这里 DisplayRequest 是一个类。

请帮助各位。让我知道是否有人想查看任何其他代码。

非常感谢。

编辑：：：：：：：

非常感谢托马斯的回复。我创建了一个实现 IDispactchMessageInspector 的类 MessageInspector。我在 MessageInspector 类中有以下代码。

```
public class MessageInspector : IDispatchMessageInspector
{
    public object AfterReceiveRequest(ref Message request, IClientChannel channel, InstanceContext instanceContext)
    {
        HttpContext.Current.Response.AddHeader("Access-Control-Allow-Origin", "*");
        if (HttpContext.Current.Request.HttpMethod == "OPTIONS")
        {
            HttpContext.Current.Response.AddHeader("Cache-Control", "no-cache");
            HttpContext.Current.Response.AddHeader("Access-Control-Allow-Methods", "GET, POST");
            HttpContext.Current.Response.AddHeader("Access-Control-Allow-Headers", "Content-Type, Accept");
            HttpContext.Current.Response.AddHeader("Access-Control-Max-Age", "1728000");
            HttpContext.Current.Response.End();
        }
        return null;
    }
} 
```

我现在得到的错误是——“对象引用未设置为对象的实例。” 错误在上述代码的这一行

```
HttpContext.Current.Response.AddHeader("Access-Control-Allow-Origin", "*"); 
```

我要做的就是为我的 Web 服务添加 CORS 支持。如果我做得正确，请告诉我。或者有没有其他方法可以做到这一点。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-16T14:38:39.663

终于找到了我的查询的解决方案。

都在这里。[支持跨域资源](http://dhvik.blogspot.co.uk/2011/06/supporting-cross-origin-resource.html)

很好的一步一步的解释。我想我自己永远也想不通。

**代码：**

创建 2 个类，如下所示：

1.  `MessageInspector`实施`IDispatchMessageInspector`.
2.  `BehaviorAttribute`实施`Attribute`,`IEndpointBehavior`和`IOperationBehavior`.

带有以下详细信息：

```
//MessageInspector Class
using System;
using System.ServiceModel;
using System.ServiceModel.Channels;
using System.ServiceModel.Dispatcher;
using System.ServiceModel.Description;
namespace myCorsService
{
  public class MessageInspector  : IDispatchMessageInspector
  {
    private ServiceEndpoint _serviceEndpoint;

    public MessageInspector(ServiceEndpoint serviceEndpoint)
    {
      _serviceEndpoint = serviceEndpoint;
    }

    /// <summary>
    /// Called when an inbound message been received
    /// </summary>
    /// <param name="request">The request message.</param>
    /// <param name="channel">The incoming channel.</param>
    /// <param name="instanceContext">The current service instance.</param>
    /// <returns>
    /// The object used to correlate stateMsg. 
    /// This object is passed back in the method.
    /// </returns>
    public object AfterReceiveRequest(ref Message request, 
                                          IClientChannel channel, 
                                          InstanceContext instanceContext)
    {
      StateMessage stateMsg = null;
      HttpRequestMessageProperty requestProperty = null;
      if (request.Properties.ContainsKey(HttpRequestMessageProperty.Name))
      {
        requestProperty = request.Properties[HttpRequestMessageProperty.Name]
                          as HttpRequestMessageProperty;
      }

      if (requestProperty != null)
      {
        var origin = requestProperty.Headers["Origin"];
        if (!string.IsNullOrEmpty(origin))
        {
          stateMsg = new StateMessage();
          // if a cors options request (preflight) is detected, 
          // we create our own reply message and don't invoke any 
          // operation at all.
          if (requestProperty.Method == "OPTIONS")
          {
            stateMsg.Message = Message.CreateMessage(request.Version, null);
          }
          request.Properties.Add("CrossOriginResourceSharingState", stateMsg);
        }
      }

      return stateMsg;
    }

    /// <summary>
    /// Called after the operation has returned but before the reply message
    /// is sent.
    /// </summary>
    /// <param name="reply">The reply message. This value is null if the 
    /// operation is one way.</param>
    /// <param name="correlationState">The correlation object returned from
    ///  the method.</param>
    public void BeforeSendReply(ref  Message reply, object correlationState)
    {
      var stateMsg = correlationState as StateMessage;

      if (stateMsg != null)
      {
        if (stateMsg.Message != null)
        {
          reply = stateMsg.Message;
        }

        HttpResponseMessageProperty responseProperty = null;

        if (reply.Properties.ContainsKey(HttpResponseMessageProperty.Name))
        {
          responseProperty = reply.Properties[HttpResponseMessageProperty.Name]
                             as HttpResponseMessageProperty;
        }

        if (responseProperty == null)
        {
          responseProperty = new HttpResponseMessageProperty();
          reply.Properties.Add(HttpResponseMessageProperty.Name,
                               responseProperty);
        }

        // Access-Control-Allow-Origin should be added for all cors responses
        responseProperty.Headers.Set("Access-Control-Allow-Origin", "*");

        if (stateMsg.Message != null)
        {
          // the following headers should only be added for OPTIONS requests
          responseProperty.Headers.Set("Access-Control-Allow-Methods",
                                       "POST, OPTIONS, GET");
          responseProperty.Headers.Set("Access-Control-Allow-Headers",
                    "Content-Type, Accept, Authorization, x-requested-with");
        }
      }
    }
  }

  class StateMessage
  {
    public Message Message;
  }
}

//BehaviorAttribute Class
using System;
using System.ServiceModel.Channels;
using System.ServiceModel.Description;
using System.ServiceModel.Dispatcher;

namespace OpenBetRetail.NFCReaderService
{
  public class BehaviorAttribute : Attribute, IEndpointBehavior,
                                 IOperationBehavior
  {        
    public void Validate(ServiceEndpoint endpoint) { }

    public void AddBindingParameters(ServiceEndpoint endpoint,
                             BindingParameterCollection bindingParameters) { }

    /// <summary>
    /// This service modify or extend the service across an endpoint.
    /// </summary>
    /// <param name="endpoint">The endpoint that exposes the contract.</param>
    /// <param name="endpointDispatcher">The endpoint dispatcher to be
    /// modified or extended.</param>
    public void ApplyDispatchBehavior(ServiceEndpoint endpoint, 
                                      EndpointDispatcher endpointDispatcher)
    {
      // add inspector which detects cross origin requests
      endpointDispatcher.DispatchRuntime.MessageInspectors.Add(
                                             new MessageInspector(endpoint));
    }

   public void ApplyClientBehavior(ServiceEndpoint endpoint,
                                   ClientRuntime clientRuntime) { }

   public void Validate(OperationDescription operationDescription) { }

   public void ApplyDispatchBehavior(OperationDescription operationDescription,
                                     DispatchOperation dispatchOperation) { }

   public void ApplyClientBehavior(OperationDescription operationDescription,
                                   ClientOperation clientOperation) { }

   public void AddBindingParameters(OperationDescription operationDescription,
                             BindingParameterCollection bindingParameters) { }

  }
} 
```

在此之后，您需要做的就是将此消息检查器添加到服务端点行为。

```
ServiceHost host = new ServiceHost(typeof(myService), _baseAddress);
foreach (ServiceEndpoint EP in host.Description.Endpoints)
            EP.Behaviors.Add(new BehaviorAttribute()); 
```

谢谢大家帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T01:33:15.120

我相信在 WCF 世界中最接近[Application_BeginRequest的是](http://msdn.microsoft.com/en-us/library/ee255086%28v=bts.10%29.aspx)[Message Inspectors](http://msdn.microsoft.com/en-us/library/aa717047.aspx)：

> 消息检查器是一个可扩展性对象，可以在服务模型的客户端运行时中使用，并以编程方式或通过配置调度运行时，并且可以在收到消息之后或发送消息之前检查和更改消息。

为了使用自定义消息检查器，您必须：

1.  创建一个实现**IDispatchMessageInspector**接口的类（您的自定义检查器）
2.  将自定义检查器添加到服务的**DispatchRuntime.MessageInspectors**集合

[在这里](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.idispatchmessageinspector.aspx)，您可以找到有关如何执行此操作的更多信息和一些示例代码。

# forms - 在文本框中输入输入时验证文本字段

> ID：16024348
> 
> 赞同：0
> 
> 时间：2013-04-15T20:40:16.407
> 
> 标签：forms, validation, drupal

我正在尝试实现一个注册表单，要求用户输入所需的登录 ID。用户在文本框中输入所需的登录 ID。

我想对此文本框执行验证，以查看所需的登录 ID 是否可用，而无需提交表单。

验证应该在第 5 个字符输入到文本框中之后开始进行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:08:24.307

您应该验证输入的完整用户名。这也将减少您的客户端服务器交互，从而也为您提供性能。

您可以使用 jQuery 的 ajax 方法。这将调用您的服务器端代码，您可以通过查询数据库从那里进行检查，并将日期发送回客户端。

HTML：

```
<input type="text" id="username" onblur="checkUsername(this);"/> 
```

Javascript：

```
function checkUsername(element){
    $.ajax({
    url: server_url,
    data : element.value
    }).done(function(data) { //json object returned from server
        if(data.true){
           //allowed
        }else{
           alert("select another username");
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T20:46:03.250

您可以使用[客户端验证](http://drupal.org/project/clientside_validation)模块。该模块在提交表单之前进行验证并显示错误消息

# process - Fiddler 报告来自进程 avp:2016 的所有内容

> ID：16024350
> 
> 赞同：1
> 
> 时间：2013-04-15T20:40:31.980
> 
> 标签：process, fiddler, antivirus

我在家里和工作中都安装了 Fiddler。在家里，它告诉我网络会话的实际过程。在工作中，无论会话来自哪个浏览器或进程，它都只会显示 avp:2016。

有谁知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:37:41.183

发生这种情况是因为所有流量都通过 AVP.exe 重定向。

*“为什么？”* 你问？

因为您已经安装了一个防病毒包（例如卡巴斯基），它将自己的代理注入到每个进程中，以便它可以尝试扫描流量以查找病毒或恶意软件。（我认为这是一个糟糕的想法，性能/安全比很差，但许多 AV 公司都这样做。）

如果您在 AV 设置中禁用该选项（通常称为“网络安全”或类似名称），则流量的来源将不再被隐藏。

# actionscript-3 - 瓷砖网格上的基于回合的运动，孤立的瓷砖

> ID：16024358
> 
> 赞同：0
> 
> 时间：2013-04-15T20:40:40.683
> 
> 标签：actionscript-3, flash-cs5

这是用 as3 和 FlashPunk 编写的。

我的问题？我有一个可以在 4 个方向上移动 4 个瓷砖的坦克；北、南、东、西。

图片可在[http://www.aroderick.com/isolatedTiles.jpg找到](http://www.aroderick.com/isolatedTiles.jpg)

我从一个方形网格（图像上的 Lt 灰色）开始，并使用一个数组从方形网格中标记出菱形图案（图像上的红色），这是所有可能的移动选择，因为坦克只能移动4个方向4个空格。图像上带有数字的图块是您在游戏中看到的实际图块，数字是“col-row”数字。

更复杂的地方是，我还从有障碍物（水、树木、山脉）的钻石上移除了瓷砖，这反过来又增加了到达障碍物之外的瓷砖的移动成本。

在这一点上我应该提到这是基于 A* 算法并使用 A* 进行移动，但这些是在选择目标图块之前需要建立的移动选择。

我的问题是孤立的瓷砖超出了坦克的移动能力，并且它们自己与瓷砖连接的主要移动区域隔离开来，并为 A* 提供完整的路径，并且坦克可以从一个瓷砖移动到下一个瓷砖。

有没有一种简单、优雅的方式来处理（摆脱）这些流氓瓷砖？

我尝试了一个规则系统，即；

```
 //same row going east           
    if(ob.row == co.row && ob.row == startNode.row && ob.col < co.col && ob.col > startNode.col && ob.c  <  co.c ) 
    {
        extraCost = co.c;
        reason = 1;
        break;
    }
    //same row going west
    else if(ob.row == co.row && ob.row == startNode.row && ob.col > co.col && ob.col < startNode.col && ob.c  <  co.c ) 
    {
        extraCost = co.c;
        reason = 2;
        break;
    } 
```

其中“c”aa 属性表示乌鸦飞行时的瓷砖移动“成本”。但这些似乎产生的问题与解决的问题一样多。

```
 //reusable tile grid
    public static function makeTileGrid(entityLoc:Point,moveGrid:Array,travelMax:int,tsize:int = 64):Array
    {
        //node list
        var nodeLst:Array = [];
        //counter
        var tileCount:int = 0;
        //for tile naming
        var co_ordX:String = "";
        var co_ordY:String = "";
        if(moveNode == null) var moveNode:Object;
        //subtract the tile range from the current location
        //tile range times two because you can go forewards 
        //or backwards tRange spaces
        for (var col:int = travelMax * 2; col >=0;col--)
        {
            //placeX is an x value so you must multiply both row and tRange by the tile width
            var placeX:Number = entityLoc.x - (travelMax*64 - col*64);
            //trace(placeX);
            for(var row:int = travelMax * 2; row >=0;row--)
            {
                var placeY:Number = entityLoc.y - (travelMax*64 - row*64);

                //trace(moveGrid[col]);

                //use tile grid map array
                if(moveGrid[tileCount] == 1)
                {
                    //use coordinates for the name value e.g. 
                    co_ordX = col.toString();
                    co_ordY = row.toString();
                    moveNode = {col:col,row:row,obst:false,node:co_ordX+"-"+co_ordY,nX:placeX,nY:placeY,ph:0,h:0,g:0,f:0,c:0};
                    nodeLst.push(moveNode);                                             
                }
                tileCount ++;               
            }   
        }
        return nodeLst;
    } 
```

我的网格代码。如果。

多谢你们，

詹姆士-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:23:33.447

我认为您应该在该网格上使用有限的（距离方面的）广度优先 A* 搜索，障碍物在算法中充当墙壁。这将生成一组可到达的节点，每个节点都具有可用的 distance_left 属性，从而不会列出您的“孤立图块”。您的代码似乎只是将菱形图案从起始位置和通道矩阵中取出，而没有实际检查路径距离。

```
public static function getReachableTiles(startTile:Point,distance:int):Array {
    var d:Dictionary=new Dictionary(); // will hold visited tiles point by point
    var o:Object={d:distance,px:startTile.x,py:startTile.y}; // a simple object info
    // add fields as necessary
    var a:Array=new Array(); // output array
    a.push(o);
    d[startTile.y*256+startTile.x]=o; // the simplest hash. You have to ensure 
    // these never overlap for different pairs of [x,y], and the same hash
    // function is used across this method
    while (distance>0) {
        for each (o in a) {
            if (o.d!=distance) continue; // already parsed
            var to:Object={d:distance-1,px:o.x-1,py:o.y};
            if (Game.isPassable(to.x,to.y)&&!d[to.y*256+to.x]) {
                // a new cell, and is valid for the tank to pass
                // "isPassable" returns true if (x,y) corresponds to a passable and 
                // valid position. For example, (-1,2) might return false as it's off borders
                d[to.y*256+to.x]=to; // add to dictionary - a parsed cell
                a.push(to); // and to output
            }
            // doing the same for 3 other possible moves
            to={d:distance-1,px:o.x,py:o.y-1};
            if (Game.isPassable(to.x,to.y)&&!d[to.y*256+to.x]) {
                d[to.y*256+to.x]=to;
                a.push(to);
            }
            to={d:distance-1,px:o.x+1,py:o.y};
            if (Game.isPassable(to.x,to.y)&&!d[to.y*256+to.x]) {
                d[to.y*256+to.x]=to;
                a.push(to);
            }
            to={d:distance-1,px:o.x,py:o.y+1};
            if (Game.isPassable(to.x,to.y)&&!d[to.y*256+to.x]) {
                d[to.y*256+to.x]=to;
                a.push(to);
            }
        } // okay, entire array was parsed for new cells
        distance--; // we've iterated A* once more, lessen the distance
    }
    // at this point, we've iterated A* "distance" times, return
    return a;
} 
```

您需要为您的变量结构调整此代码段，这样这`Game.isPassable()`将是一个有效的调用，并且在您绘制的地图下会有实际的网格。注意，`startTile`是一组基于网格的坐标，而不是基于像素的。希望这可以帮助。

# excel - VLOOKUP 仅在匹配行时返回 1 或 0

> ID：16024362
> 
> 赞同：0
> 
> 时间：2013-04-15T20:40:53.767
> 
> 标签：excel, vlookup

我有一个我刚做的vlookup

`=VLOOKUP(D5,Sheet1!$B$3:$M$591,3,FALSE)`

它将一张表中的一列与另一张表中的另一列相匹配。当我通过将其更改为进行测试时：`=VLOOKUP(D5,Sheet1!$B$3:$M$591,1,FALSE)`它返回与我正在搜索的相同的值。

如果我进一步测试它：

`=VLOOKUP(D5,Sheet1!$B$3:$M$591,2,FALSE)`

它从 sheet1 返回我需要的相应值。

但我真正需要的是第 3 列，它是一个数字，当我使用时：

`=VLOOKUP(D5,Sheet1!$B$3:$M$591,3,FALSE)`

我得到的唯一数字是 1 或 0。即使这些数字不是正确的。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:44:28.630

> 它返回与我正在搜索的相同的值。

因为您已将列索引设置为“1”，即 VLOOKUP 公式正在搜索的列。

> 但我真正需要的是第 3 列，它是一个数字，当我使用时：
> 
> =VLOOKUP(D5,Sheet1!$B$3:$M$591,3,FALSE)

请发布您的工作簿或工作簿数据示例，我们可以提供帮助。没有看到你的数据，就不可能说。

# css - 结合 :first-line :before

> ID：16024366
> 
> 赞同：2
> 
> 时间：2013-04-15T20:40:59.280
> 
> 标签：css, css-selectors, pseudo-element

可以结合伪元素 :first-line 和 :before? 实际上，除了第一行之外，我想在任何 ap 行之前都有一个字符。我尝试：

```
p:first-line:before{content:""}   
p:before{content:"["} 
```

但它不起作用。

谢谢你的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T20:50:39.550

目前不可能像你一样链接它们，我也想不出一种方法来将内容附加到段落的每一行，除了第一行只使用 CSS。此外，该`content`属性[仅](http://css-tricks.com/css-content/)与`:before`and一起使用`:after`。

[请参阅http://www.w3schools.com/css/css_pseudo_elements.asp](http://www.w3schools.com/css/css_pseudo_elements.asp)上的“多个伪元素”部分，了解如何有效地组合伪元素：

```
p:first-letter {
    color:#ff0000;
    font-size:xx-large;
}
p:first-line {
    color:#0000ff;
    font-variant:small-caps;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T03:28:01.280

不可能有两个连续的伪元素；[CSS 2.1](http://www.w3.org/TR/CSS2/selector.html#selector-syntax)语法和选择器的[CSS3 语法](http://www.w3.org/TR/css3-selectors/#selector-syntax)都禁止这样做。

W3C CSS Validator 不会报告`p:first-line:before`错误，但这是一个错误；我重新打开了一个[错误报告](https://www.w3.org/Bugs/Public/show_bug.cgi?id=160)。（如果使用双冒号语法，则不会触发该错误`p::first-line::before`：验证器说“伪元素 ::first-line 不能出现在上下文 css21 [first-line::before] 中”。）

在这种情况下，即使该构造有效且受支持，它也无济于事。使用`:before`on`:first-line`毫无意义，因为在第一行的开头插入内容与在元素的开头插入内容相同。

并且`p:before`表示在 的内容开始处的伪元素，而`p`不是在 的每个渲染行的开始处`p`。使用 CSS 无法在元素的每一行的开头插入字符。

# c# - 如何从列表创建 Excel 文件 使用 Microsoft.Office.Interop.Excel

> ID：16024371
> 
> 赞同：1
> 
> 时间：2013-04-15T20:41:16.157
> 
> 标签：c#, excel, c#-4.0, excel-interop

我有一个包含一些值的列表，我还有一个 TextBox，我必须在其中写一个数字，然后我需要构建一个 Excel，其中包含许多来自 List 的值的工作表。换句话说，例如：List 有 1000 个值，然后我在 TextBox 中输入 100，所以我需要生成一个包含许多工作表的 Excel 文件，因为 List 中的值在这种情况下迭代在 TextBox 中输入的值将是一个包含 10 个工作表的 Excel 文件，每个工作表有 100 个单元格。很明显？如何使用 Microsoft.Office.Interop.Excel 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:11:30.667

对于工作表：

```
//get the first workbook in an application
Workbook WB = Application.Workbooks[0]; //Or any other workbook you preffer

Now loop the following for each list of strings you have (each list to a worksheet)
    Worksheet WS = (Worksheet)WB.Worksheets.Add(); //this command adds worksheets
    Range R = WS.Range["A1"];  //or any other cell you like

    //now for cells
    for (int i = 0; i < YourStringList.Count; i++) //I believe you can manage to separate the lists yourself
    {
        R.Offset[i, 0].Value = YourStringList[i];
    }
End of the loop 
```

# java - 乘法，最小数和该最小数的位置

> ID：16024372
> 
> 赞同：3
> 
> 时间：2013-04-15T20:41:17.947
> 
> 标签：java

我有一个作业，我已经写了前两部分，我只是不知道如何找到最小的数字。我应该提到它在 jFrame (gui) 中。它应该看起来像这样：

![在此处输入图像描述](https://i.stack.imgur.com/d6DUa.jpg)

假设我有一个数字列表（10 5 8 7 4 9），我想知道数字 7 在哪个位置。我该怎么做？在过去的一个小时里，我一直被困在这个问题上。：/这是我到目前为止所拥有的：

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    String s = jTextField1.getText();
    String[]divide = s.split(" ");
    int[] number = new int[10];
    int sum = 1;
    for(int i = 0; i<10; i++)
    {
        number[i] = Integer.parseInt(divide[i]);
        sum = sum * number[i];
    }
    jTextField2.setText(Integer.toString(sum));
}                                        

private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {                                         
   String s = jTextField1.getText();
    String[]divide = s.split(" ");
    Arrays.sort(divide);
    jTextField3.setText(divide[0]);
}                                        

private void jButton3ActionPerformed(java.awt.event.ActionEvent evt) {                                         

    public static int findMin(ArrayList<Integer> n)
{
int minValue = Integer.MAX_VALUE; 
int minIndex = -1;
for(int i = 0; i < n.size(); i++){
    if(n.get(i) < minValue){
        minIndex = i;
    }
}
return minIndex; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T20:44:47.313

当您找到最小值的索引时，您应该更新`minValue`.

```
public static int findMin(ArrayList<Integer> n) {
    for(int i = 0; i < n.size(); i++){
        if(n.get(i) < minValue){
            minIndex = i;
            minValue = n.get(i);   //Update here
        }
    }
    return minIndex;
} 
```

您的代码总是将第*i 个*元素与`int minValue = Integer.MAX_VALUE;`您从未更改过的元素进行比较。

将其添加到语句下方`if`将对其进行更新，您将获得所需的结果。

# c# - KinectColorViewer SDK 1.7

> ID：16024382
> 
> 赞同：0
> 
> 时间：2013-04-15T20:42:07.537
> 
> 标签：c#, wpf, visual-studio-2012, kinect, kinect-sdk

我正在尝试使 KinectColorViewer 与 SDK 1.7 一起使用，但没有成功。只有当我手动将像素从相机复制到图像元素时，我才能显示视频图片。

我有以下 XAML：

```
<Page
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
  xmlns:k="http://schemas.microsoft.com/kinect/2013"
  xmlns:WpfViewers="clr-namespace:Microsoft.Samples.Kinect.WpfViewers;assembly=Microsoft.Samples.Kinect.WpfViewers" x:Class="KinectD.Camera"
  mc:Ignorable="d" 
  d:DesignHeight="300" d:DesignWidth="500"
Title="Camera">

<Grid>
    <k:KinectUserViewer k:KinectRegion.KinectRegion="{Binding ElementName=kinectRegion}" Height="100" HorizontalAlignment="Center" VerticalAlignment="Top" />
    <k:KinectSensorChooserUI HorizontalAlignment="Center" VerticalAlignment="Top" x:Name="sensorChooserUi" />

    <k:KinectRegion x:Name="kinectRegion">
        <Grid>
            <k:KinectCircleButton Label="Menu" HorizontalAlignment="Right" Height="200" VerticalAlignment="Top" Click="MenuButtonOnClick" >
                <StackPanel>
                    <Image Source="Images/smile.png" Height="30"/>
                </StackPanel>
            </k:KinectCircleButton>

        </Grid>
    </k:KinectRegion>
    <WpfViewers:KinectColorViewer HorizontalAlignment="Left" Height="240" Margin="10,10,0,0" VerticalAlignment="Top" Width="320" Kinect="{Binding ElementName=sensorChooserUi, Mode=OneWay, Path=Kinect}"/>

</Grid> 
```

和 XAML.CS：

```
public partial class Camera : Page
{
    #region "Kinect"
    private KinectSensorChooser sensorChooser;
    #endregion

    public Camera()
    {

        this.InitializeComponent();
        // initialize the sensor chooser and UI
        this.sensorChooser = new KinectSensorChooser();
        //Assign the sensor chooser with the sensor chooser from the mainwindow. 
        //We are reusing the sensorchoosing declared in the first window that can in contact with kinect
        this.sensorChooser = Generics.GlobalKinectSensorChooser;
        //subscribe to the sensorChooserOnKinectChanged event
        this.sensorChooser.KinectChanged += SensorChooserOnKinectChanged;
        //Assign Kinect Sensorchooser to the sensorchooser we got from our static class
        this.sensorChooserUi.KinectSensorChooser = sensorChooser;
        // Bind the sensor chooser's current sensor to the KinectRegion
        var regionSensorBinding = new Binding("Kinect") { Source = this.sensorChooser };
        BindingOperations.SetBinding(this.kinectRegion, KinectRegion.KinectSensorProperty, regionSensorBinding);
    }

    private void SensorChooserOnKinectChanged(object sender, KinectChangedEventArgs args)
    {
        bool error = false;
        if (args.OldSensor != null)
        {
            try
            {
                args.OldSensor.DepthStream.Range = DepthRange.Default;
                args.OldSensor.SkeletonStream.EnableTrackingInNearRange = false;
                args.OldSensor.DepthStream.Disable();
                args.OldSensor.SkeletonStream.Disable();

                args.OldSensor.ColorStream.Disable();
            }
            catch (InvalidOperationException)
            {
                // KinectSensor might enter an invalid state while enabling/disabling streams or stream features.
                // E.g.: sensor might be abruptly unplugged.
                error = true;
            }
        }

        if (args.NewSensor != null)
        {
            try
            {
                args.NewSensor.DepthStream.Enable(DepthImageFormat.Resolution640x480Fps30);
                args.NewSensor.ColorStream.Enable(ColorImageFormat.RgbResolution640x480Fps30);
                args.NewSensor.SkeletonStream.Enable();
            }
            catch (InvalidOperationException)
            {
                error = true;
                // KinectSensor might enter an invalid state while enabling/disabling streams or stream features.
                // E.g.: sensor might be abruptly unplugged.
            }
        }

        if (!error)
            kinectRegion.KinectSensor = args.NewSensor;
    }

    private void MenuButtonOnClick(object sender, RoutedEventArgs e)
    {
        //Unsubscribe to the sensorchooser's  event SensorChooseronkinectChanged
        this.sensorChooser.KinectChanged -= SensorChooserOnKinectChanged;
        (Application.Current.MainWindow.FindName("_mainFrame") as Frame).Source = new Uri("MainMenu.xaml", UriKind.Relative);
    }
} 
```

在教程中，我正在关注（[http://channel9.msdn.com/Series/KinectQuickstart/Camera-Fundamentals](http://channel9.msdn.com/Series/KinectQuickstart/Camera-Fundamentals)）讲师只是将 KinectColorViewer 放到屏幕上，设置路径并且它正在工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T02:22:50.647

程序集中的`KinectColorViewer`可用在`KinectWpfViewers`“Kinect Explorer”示例中使用，这是了解它的使用和行为方式的最佳位置。从这个示例中，您将发现在 XAML 中初始化查看器的正确方法以及必要的绑定。

从您发布的代码中，您似乎将 Kinect 本身（对硬件的引用）绑定到`KinectColorViewer`，这不是它所期望的。您需要设置对`KinectSensorManager`类的引用，该类是`KinectWpfViewers`程序集的一部分。

这是一个简化的 XAML，带有`KinectColorViewer`

```
<Window x:Class="Microsoft.Samples.Kinect.KinectExplorer.KinectWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:Microsoft.Samples.Kinect.KinectExplorer"
        xmlns:kt="clr-namespace:Microsoft.Samples.Kinect.WpfViewers;assembly=Microsoft.Samples.Kinect.WpfViewers"
        Title="Kinect Explorer" Width="812" Height="768">
    <Grid>
        <kt:KinectColorViewer x:Name="ColorViewer" KinectSensorManager="{Binding KinectSensorManager}" CollectFrameRate="True" RetainImageOnSensorChange="True" />
    </Grid> 
</Window> 
```

然后，您的 XAML.CS 构造函数将类似于：

```
public KinectWindow()
{
    this.viewModel = new KinectWindowViewModel();

    // The KinectSensorManager class is a wrapper for a KinectSensor that adds
    // state logic and property change/binding/etc support, and is the data model
    // for KinectDiagnosticViewer.
    this.viewModel.KinectSensorManager = new KinectSensorManager();

    Binding sensorBinding = new Binding("KinectSensor");
    sensorBinding.Source = this;
    BindingOperations.SetBinding(this.viewModel.KinectSensorManager, KinectSensorManager.KinectSensorProperty, sensorBinding);

    // Attempt to turn on Skeleton Tracking for each Kinect Sensor
    this.viewModel.KinectSensorManager.SkeletonStreamEnabled = true;

    this.DataContext = this.viewModel;

    InitializeComponent();
} 
```

查看“Kinect Explorer”示例以获取完整的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T21:14:39.137

我在使用 KinectSensorManager 时遇到了同样的问题。事实证明，您需要调用 Microsoft.Samples.Kinect.Wpf.Viewers 而不仅仅是 kinect.dll、kinect.toolkit.dll 和 kinect.controls.dll。但是，当我实现 KinectSensorManager 时，KinectUI 和 SensorChooser 停止在我的 xaml 接口上工作。

# ruby-on-rails - 谷歌 oauth 失败，在 rails omniauth 中出现 401 未授权

> ID：16024392
> 
> 赞同：1
> 
> 时间：2013-04-15T20:43:04.260
> 
> 标签：ruby-on-rails, devise, ruby-on-rails-3.2, omniauth, google-oauth

我正在尝试使用设计和omniauth 向google oauth2 进行身份验证。我按照omniauth文档中的规定虔诚地设置了回调，甚至使用了相同的确切代码。[https://github.com/plataformatec/devise/wiki/OmniAuth:-概述](https://github.com/plataformatec/devise/wiki/OmniAuth%3a-Overview)

我将代码上传到 github：**[https ://github.com/kiranjulapalli/devisetest](https://github.com/kiranjulapalli/devisetest)**

我被重定向到登录，当我选择我的帐户时，我再次被重定向到登录页面。我在这里想念什么？

这是日志：

```
Started GET "/users/auth/google_oauth2/callback?state=3baa394efe9c586b30fgfc05b1f618af04b7728d0d75c3c1&code=4/HxV9O
37jKYgxg10EWDntdfewZTz3.4kqevOMEweMTshQV0ieZDArQUdYefAI" for 127.0.0.1 at 2013-04-15 16:36:01 -0400
Processing by Users::OmniauthCallbacksController#google_oauth2 as HTML
  Parameters: {"state"=>"3baa394efe9c586b30fgfc05b1f618af04b7728d0d75c3c1", "code"=>"4/HxV9O
37jKYgxg10EWDntdfewZTz3.4kqevOMEweMTshQV0ieZDArQUdYefAI"}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (2.0001ms)
  MOPED: 127.0.0.1:27017 QUERY        database=devisetest_development collection=users selector={"$query"=>{"email"
=>"myemailaddress@gmail.com"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil
(0.9999ms)
Completed 401 Unauthorized in 24ms
#custom log statements
logger::Find if this user exists
logger::Return user
logger:Got call back
logger:User persisted 
```

我的 routes.rb 文件：

```
Devisetest::Application.routes.draw do
  devise_for :users, :controllers => { :omniauth_callbacks => "users/omniauth_callbacks" }
  resources :users
  root :to => 'home#index'
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T01:31:23.767

您要求您的用户在登录之前通过电子邮件进行确认。（从 :confirmable 参数到您的 user.rb 中设计）

您可以通过 rails 控制台删除 :confirmable 或手动为 user.confirmed_at 分配一个值（例如 Time.now）。

您还应该在布局中的某处显示 flash[:notice]，您会看到：“已成功通过 Google 帐户进行身份验证。您必须在继续之前确认您的帐户。”

它看起来像： [总是得到 401 Unauthorized with new install of Rails + Devise](https://stackoverflow.com/questions/14005500/always-getting-401-unauthorized-with-new-install-of-rails-devise) 是一个类似的问题。

# ruby - Ruby：如何链接方法数组（或拆分字符串）中指定的方法？

> ID：16024393
> 
> 赞同：4
> 
> 时间：2013-04-15T20:43:10.143
> 
> 标签：ruby, methods, chaining

当方法调用被指定为数组时，如何在 Ruby 中链接方法？

例子：

```
class String
  def bipp();  self.to_s + "-bippity"; end
  def bopp();  self.to_s + "-boppity"; end
  def drop();  self.to_s + "-dropity"; end
end

## this produces the desired output
##
puts 'hello'.bipp.bopp.drop #=> hello-bippity-boppity-dropity

## how do we produce the same desired output here?
##
methods   =   "bipp|bopp|drop".split("|")
puts 'world'.send( __what_goes_here??__ ) #=> world-bippity-boppity-droppity 
```

[Ruby 纯粹主义者注意：本示例采用了风格自由。有关分号、括号、注释和符号的首选用法说明，请随时查阅 Ruby 样式指南（例如，https://github.com/styleguide/ruby）]

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-15T20:48:01.357

Try this:

```
methods   =   "bipp|bopp|drop".split("|")
result = 'world'
methods.each {|meth| result = result.send(meth) }
puts result 
```

or, using [inject](http://ruby-doc.org/core-2.0/Enumerable.html#method-i-inject):

```
methods = "bipp|bopp|drop".split("|")
result = methods.inject('world') do |result, method|
  result.send method
end 
```

or, more briefly:

```
methods = "bipp|bopp|drop".split("|")
result = methods.inject('world', &:send) 
```

By the way - Ruby doesn't need semicolons `;` at the end of each line!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T20:58:50.637

```
methods   =   "bipp|bopp|drop".split("|")
result = 'world'
methods.each {|meth| result = result.method(meth).call }
puts result #=> world-bippity-boppity-dropity 
```

或者

```
methods = "bipp|bopp|drop".split("|")
methods.each_with_object('world') {|meth,result| result.replace(result.method(meth).call)} #=> world-bippity-boppity-dropity 
```

# javascript - 将表格中的多次点击发布到不同的连续输入文本框

> ID：16024394
> 
> 赞同：0
> 
> 时间：2013-04-15T20:43:21.887
> 
> 标签：javascript, html, input, onclick

我有以下部分完成的代码示例，单击任何表格单元格都会填充第一个`input`文本框。我想在表格中点击第二次和第三次来填充第二次和第三次输入字段。如果单击第四个文本单元格，它会通过从第一个字段填充等来开始计数。

该功能还有一个小错误，即页面首次加载时，它无法识别第一次鼠标单击。需要第二次单击来填充第一个字段。

提前感谢您帮助我解决这个问题并从中学习。:)

```
<html>
<head>
    <style>
        td:hover { cursor: hand; color: blue; font-weight: bold; background: #FFDE00; }
    </style>
</head>

<body >

    <p>Click on a cell to have it populate the text fields below<p>

    <table border="1" onclick="populateFields()" style=font-size:11; cellspacing="1" cellpadding="5">
        <tr><td>apple</td><td>orange</td><td>banana</td><td>peach</td></tr>
        <tr><td>tomato</td><td>potato</td><td>onion</td><td>garlic</td></tr>
        <tr><td>chicken</td><td>fish</td><td>beef</td><td>pork</td></tr>
    </table>

    <form>
        <p>The cells you clicked on contain this data:</p>
        <input type="text" name="item1" id="txtCellData"></input>
        <input type="text" name="item2" id="textCellData2"></input>
        <input type="text" name="item3" id="textCellData3"></input>
    </form>

    <script> 
        function populateFields(){
            //put all tds in an array
            var alltds = document.getElementsByTagName("td");

            //go through each item in the array
            for (var i in alltds) {
              alltds[i].onclick = function (){
                txtCellData.value = this.innerHTML;
              }
            }
        }

        function setThis(value) {
            document.getElementById("txtCellData").value = value;
        }
    </script> 

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:10:19.990

为你创造了一个小提琴。看看这段[代码](http://jsfiddle.net/chauhangs/b3GuX/6/)

```
<body onload=populateFields() >

<p>Click on a cell to have it populate the text fields below<p>

<table border="1" onclick="populateFields()" style=font-size:11; cellspacing="1" cellpadding="5">
    <tr><td>apple</td><td>orange</td><td>banana</td><td>peach</td></tr>
    <tr><td>tomato</td><td>potato</td><td>onion</td><td>garlic</td></tr>
    <tr><td>chicken</td><td>fish</td><td>beef</td><td>pork</td></tr>
</table>

<form>
    <p>The cells you clicked on contain this data:</p>
    <input type="text" name="item1" id="txtCellData"></input>
    <input type="text" name="item2" id="textCellData2"></input>
    <input type="text" name="item3" id="textCellData3"></input>
    </form></body>
<script>
var index=0;
function populateFields(){
        //put all tds in an array
        var alltds = document.getElementsByTagName("td");

        //go through each item in the array
        for (var i in alltds) {
          alltds[i].onclick = function (){

             if(index==1){txtCellData.value = this.innerHTML;}
                else{
                    setThis(this.innerHTML);
                    }
          }
        }

        if(index<3){
             index++;
            }else{
                   index = 1;
                  }
            alert(index);

}

    function setThis(value) {
        document.getElementById("textCellData"+index).value = value;
    }

    </script> 
```

# sql - t-sql 多个记录的单个默认值

> ID：16024395
> 
> 赞同：0
> 
> 时间：2013-04-15T20:43:27.597
> 
> 标签：sql, sql-server-2008, database-design, triggers

我有一个 MSSQL Server 2008 表，它将多张照片与房屋相关联，如下所示：

```
HouseID - with foreign key to House table
PhotoID - with foreign key to Photo table 
```

一切都很好，对 PhotoID 有一个独特的约束，因此一张照片不能与多个房子相关联。

我想为房屋记录指定一张默认照片。该表是这样更新的

```
HouseID
PhotoID
isDefault 
```

问题是房子的一组照片只能有一个 isDefault = 1。

在 MSSQL Server 2008 中，如何确保给定的 House ID 只有一个 isDefault = 1，而其他记录是 isDefault = 0？使用触发器更好，还是有更好的方法？如果是触发器，对确保优化的语法有什么建议吗？

最后，我需要它来处理插入和更新事件。

更新：

以下工作就像一个魅力。注释？

```
CREATE VIEW HousePhoto_isDefault AS 
SELECT yourSchema.HousePhoto.houseID, yourSchema.HousePhoto.isDefault
FROM yourSchema.HousePhoto WHERE isDefault = 1
GO

CREATE UNIQUE CLUSTERED INDEX idx_HousePhoto_isDefault
ON HousePhoto_isDefault (houseID)
GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:11:15.373

> 在 MSSQL Server 2008 中，如何确保给定的 House ID 只有一个 isDefault = 1，而其他记录是 isDefault = 0？

为什么是的，正如[Yves Samèr在](https://stackoverflow.com/users/1480391/yves-samere)[这个答案](https://stackoverflow.com/a/15776793/119477)中指出的那样， 您可以使用过滤索引

```
CREATE UNIQUE INDEX photo_isDefault 
    ON Photos(HouseID) WHERE isDefault = 1 
```

[演示](http://sqlfiddle.com/#!3/e1361/1)

产生的错误是

> 无法在具有唯一索引“photo_isDefault”的对象“dbo.Photos”中插入重复的键行。：插入照片（houseID，isDefault）值（1,1）

您也可以选择使用 INDEXED VIEW 或者正如您所指出的，触发器也可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T20:51:36.297

正如您所描述的，您需要使用触发器。

但是，我认为，如果您对数据结构进行小幅更改，则可以使用常规约束来进行。与其存储`isDefault`在照片级别，不如存储`DefaultPhotoId`在房屋级别。这样一来，无论您做什么，您都不能拥有超过一张默认照片。

如果要确保有默认值，请将其设置为`NOT NULL`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T21:14:23.953

我实际上认为触发器可能是矫枉过正。只需使用 CASE 语句。这是 UPDATE 语句的示例（用您使用的任何脚本语言替换变量）：

```
UPDATE HousePhoto
SET isDefault = 
(
    CASE
        WHEN
            (PhotoID = @PhotoID)
        THEN
            1
        ELSE
            0
    END
)
WHERE HouseID = @HouseId 
```

当然，您总是可以只使用两个查询。

```
 UPDATE HousePhoto SET isDefault = 0 WHERE HouseID = @HouseID
  UPDATE HousePhoto SET isDefault = 1 WHERE HouseID = @HouseID AND PhotoID = @PhotoID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T15:04:29.317

还有另一种方法：使用“反向”FK：

![ER模型](https://i.stack.imgur.com/ZX49a.png)

[[SQL 小提琴]](http://sqlfiddle.com/#!3/afdfe/1)

重要的是要注意[**识别**](https://stackoverflow.com/a/13295288/533120)关系的使用和由此产生的复合 PK 在`Photo`:中`{HouseId, PhotoNo}`。这有两个目的：

*   确保如果照片是某些房子的默认照片，则它必须属于*同一*房子。
*   使 FK 成为`House`复合材料。由于其中一个 FK 字段也在 PK ( `HouseId`) 中，因此它不能为 NULL，因此拥有另一个*可以*为 NULL ( `DefaultPictureNo`) 的字段至关重要。如果*任何*FK 字段为 NULL，则不会强制执行 FK，这允许我们在存在此类循环 FK 的情况下插入新数据^(1时打破先有鸡还是先有蛋的问题。)

与使用`isDefault`标志和相关的过滤索引相比，这种方法进行了以下权衡：

*   PRO：避免额外字段的开销。如果图片的总数与默认图片的数量相比非常高，这可能很重要。
*   缺点：使`Photo`PK 使用自动增量变得不切实际。
*   缺点：如果您在存在此类循环 FK 的情况下尝试使用声明性引用操作（例如 ON DELETE CASCADE），MS SQL Server 会报错。您需要使用触发器实现引用操作。这是一个 MS SQL Server 的怪癖，通常不适用于其他 DBMS。
*   [TIE：对集群](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)的干扰较少，`Picture`代价是对集群的干扰更多`House`。²
*   PRO：它适用于不支持过滤索引的 DBMS（这里不是很重要，但值得一提）。

* * *

*¹ ie 可以让我们在不立即设置默认图片的情况下插入房子，这是不可能的，因为这是一个新房子，还没有图片。*

*²二级索引在聚簇表中可能很昂贵，并且 FK in`House`将需要一个支持索引。*

# http - 无法访问 EC2 (AWS) 上的端口 8080

> ID：16024397
> 
> 赞同：4
> 
> 时间：2013-04-15T20:43:34.153
> 
> 标签：http, amazon-web-services, amazon-ec2

我刚刚启动了一个新的 AWS EC2 实例。在实例的安全组中，我添加了一个新规则来打开端口 8080。根据另一篇文章，我还停止了实例上的 iptables 服务。所以理论上这个端口应该是敞开的。

我在 8080 上启动了我的 RESTful 服务，并且能够通过 curl 在本地访问它。

当我远程使用 curl 时，我收到一条错误消息，说它无法连接到主机。

我还应该检查什么以查看 8080 是否真正打开？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:06:04.860

> 我在 8080 上启动了我的 RESTful 服务，并且能够通过 curl 在本地访问它。

你的 RESTful 服务基于什么样的技术？

如今，许多框架仅在[localhost](http://en.wikipedia.org/wiki/Localhost) ( `127.0.0.1`) 上侦听，无论是默认情况下还是通过它们的示例，例如，请参见规范的[Node.js](http://nodejs.org/)之一（无论如何，我意识到端口`8080`提示 Java/Tomcat）：

```
var http = require('http');
http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('Hello World\n');
}).listen(1337, '127.0.0.1');
console.log('Server running at http://127.0.0.1:1337/'); 
```

通过启动它生成的日志消息是*Server running at http://127.0.0.1 : **1337** /* - 强调的部分是这里的关键，即服务器已配置为`127.0.0.1`仅侦听 IP 地址，而您正在尝试连接到它通过您的公共[Amazon EC2 IP 地址](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-instance-addressing.html)。

# user-agent - 用户代理阻止 Mac / Gecko-20100101？

> ID：16024398
> 
> 赞同：0
> 
> 时间：2013-04-15T20:43:34.667
> 
> 标签：user-agent

我有一个特别烦人的 Mac 用户正在向我发送垃圾邮件。这是用户代理

> Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:9.0) Gecko/20100101 Firefox/9.0"

你会建议通过 htaccess 阻止它吗？以下是足够的还是 Gecko/20100101 是一个常见的用户代理？

```
RewriteEngine On
RewriteCond %{HTTP_USER_AGENT} Gecko/20100101 [NC]
RewriteRule ^ - [F,L] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-16T23:11:09.600

不，这真的不是一个好方法。首先，您阻止了在运行 OSX 10.6 的 Mac 上使用该版本 Firefox 的所有人。其次，当他切换到另一个浏览器继续拖钓你时，你并没有阻止他。只需阻止 IP 地址，或发出 cookie，当用户重新访问该站点时返回令牌，如果令牌属于违规者，则自动将其添加到黑名单中。如果问题非常普遍，您还可以阻止拒绝 cookie 的用户，以确保他不能仅仅关闭 cookie 来规避这种情况。对于持久性或知识渊博的害虫，当然有解决方法，但是在 99.9% 的情况下，这将摆脱它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-09T20:15:09.077

Firefox 本身的 UA 字符串分为四个部分：

Mozilla/5.0 (平台; rv:geckoversion) Gecko/geckotrail Firefox/firefoxversion

Mozilla/5.0 是表示浏览器与 Mozilla 兼容的通用标记，并且在当今几乎所有浏览器中都很常见。

平台描述了浏览器运行的本机平台（例如 Windows、Mac、Linux 或 Android），以及它是否是手机。Firefox OS 手机只说“移动”；网络是平台。请注意，平台可以由多个“;”分隔的标记组成。有关详细信息和示例，请参见下文。

rv:geckoversion 表示 Gecko 的发行版本（如“17.0”）。在最近的浏览器中，geckoversion 与 firefoxversion 相同。

Gecko/geckotrail 表示浏览器是基于 Gecko 的。

在桌面上，geckotrail 是固定字符串“20100101”

Firefox/firefoxversion 表示浏览器为 Firefox，并提供版本（如“17.0”）。

从移动端的 Firefox 10 开始，geckotrail 与 firefoxversion 相同

# java - 我的 Java 服务器的相对路径

> ID：16024401
> 
> 赞同：3
> 
> 时间：2013-04-15T20:43:45.363
> 
> 标签：java, directory, relative-path

我正在尝试在我的服务器中创建一个文件。我已经发送了一张图片，我想在我的服务器的文件夹中创建该图片，但使用相对路径。

```
String filePath = "C:\\Users\\Administrador\\Desktop\\Proyecto\\clienteServidor\\Server\\folder\\image.jpg";
File imageFile = new File(filePath);
... 
```

我正在使用绝对路径。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T22:10:31.223

对目录进行硬编码很少有利于编码。如果您的代码中有错字会发生什么。使用组合`./`或`./*`

甚至使用

```
new File(MyClass.class.getProtectionDomain().getCodeSource().getLocation().getPath()); 
```

这是解释[here](https://stackoverflow.com/a/320595/1684254)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-15T21:02:59.930

这是可行的，但正如 Dmitry 所说，它可能不适用于每台服务器。`SecurityManager`如果您的 webapp 有权写入该文件夹，则应咨询 class。否则你会得到一个例外。

一种方法是通过`ServletContext`：

```
URL webAppRoot = this.getServletConfig().getServletContext()
    .getResource("/images/new-image.jpg"); 
```

这将指向您的`${tomcat}/webapps/mywebapp/images/new-image.jpg`.

另一种方法是通过`ProtectionDomain`：

```
URL runningClassLocation = this.getClass().getProtectionDomain()
    .getCodeSource().getLocation(); 
```

但这很可能会给你`jar:file://...myapp.jar!/my/package/servlet.class`。

获得 URL 后，将其转换为`File`并将任何相对路径附加到图像文件夹。

**更新：** 我同意吉姆的观点，并强调这样做只是为了学术目的。`uploads`Java 与 PHP 不同，因此您的 Web 应用程序的文件夹中不应该有文件夹。通常这是通过允许管理员级别的用户指定为应用程序的存储需求而保留的文件夹的文件路径来完成的。

# string - 格式化 URL 字符串

> ID：16024403
> 
> 赞同：0
> 
> 时间：2013-04-15T20:43:51.410
> 
> 标签：string, formatting, python-3.3

我有一个已去除标点符号的城市列表，我需要正确格式化 URL。我的列表是 ['New', 'York', 'NY'] 和 ['Lansing', 'MI'] 我需要格式化查询，以便参数分配由 (&) 符号和城市中的单词分隔由 (+) 号分隔。

例如，它应该类似于 www.url.com/origin=New+York+NY&destination=Lansing+MI

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T20:48:46.487

From [the urllib docs](http://docs.python.org/3.0/library/urllib.parse.html#urllib.parse.urlencode):

> Convert a mapping object or a sequence of two-element tuples to a “percent-encoded” string

So

```
urllib.parse.urlencode({
  'origin'      : ' '.join(['New', 'York', 'NY']),
  'destination' : ' '.join(['Lansing', 'MI'])
}) 
```

yields

```
'origin=New+York+NY&destination=Lansing+MI' 
```

* * *

That documentation references the obsolete RFC 2396, but the differences between RFC 3986 and 2396 do not affect query string composition.

# facebook-c#-sdk - 在 ac#MVC 4 项目类中使用 WebBrowser？

> ID：16024409
> 
> 赞同：0
> 
> 时间：2013-04-15T20:44:11.223
> 
> 标签：facebook-c#-sdk

我需要打开 C# 的**FACEBOOK**身份验证弹出页面，但我如何在 secudanry 类（不是控制器）中执行此操作？

```
 private Uri GenerateLoginUrl(string extendedPermissions)
    {
        // for .net 3.5
        var parameters = new Dictionary<string, object>();
         //parameters["client_id"] = appId;
        // dynamic parameters = new ExpandoObject();
        parameters["client_id"] = this.appId;
        parameters["redirect_uri"] = "https://www.facebook.com/connect/login_success.html";

        // The requested response: an access token (token), an authorization code (code), or both (code token).
        parameters["response_type"] = "token";

        // list of additional display modes can be found at http://developers.facebook.com/docs/reference/dialogs/#display
        parameters["display"] = "popup";

        // add the 'scope' parameter only if we have extendedPermissions.
        if (!string.IsNullOrWhiteSpace(extendedPermissions))
            parameters["scope"] = extendedPermissions;

        // generate the login url
        var fb = new FacebookClient();
        return fb.GetLoginUrl(parameters);
    } 
```

大多数教程都说我们需要用户 WebBrowser.Navigate 并将 url 放在这个函数上，但我不能使用它。

```
webBrowser.Navigate(GenerateLoginUrl("manage_pages")); 
```

# java - WebView 上的 setMinimumScale

> ID：16024417
> 
> 赞同：0
> 
> 时间：2013-04-15T20:44:45.680
> 
> 标签：java, android, webview

我有一个使用此代码操作的 webView：（这一切都很好）

```
WebView myWebView = (WebView) findViewById(R.id.stats_webview);
myWebView.getSettings().setBuiltInZoomControls(true);
myWebView.setPadding(0,0,0,0);
myWebView.setInitialScale(getScale()); 
```

从这个方法中得到初始比例

```
private int getScale(){
    Display display = ((WindowManager)
    getSystemService(StatsActivity.WINDOW_SERVICE)).getDefaultDisplay(); 
    Point size = new Point();
    display.getSize(size); 
    int width = size.x;
    Double val = new Double(width)/new Double(720);
    val = val * 100d;
    return val.intValue();
} 
```

一切正常，加载视图略微缩小以适应我的 720 像素网络源的屏幕。问题是一旦有人放大，他们就不能一直缩小到初始比例。它们只能缩小到 1 的比例，因此它们无法将整个页面放回屏幕上。我找到了对 setMinimumScale 方法的引用，但它似乎不再可用。我只是缺少一个包含文件还是有新的方法来完成这个？

我试过了：

```
myWebView.setMinimumScale(getScale()); 
```

和

```
myWebView.getSettings().setMinimumScale(getScale()); 
```

但两者都不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:01:41.190

如果可以选择编辑 HTML 文件，则可以使用 viewport 元标记。检查[文档](http://developer.android.com/guide/webapps/targeting.html)以获取更多详细信息。

# php - 运行 php-cgi 进程

> ID：16024418
> 
> 赞同：1
> 
> 时间：2013-04-15T20:44:45.907
> 
> 标签：php, nginx

今天早些时候我的 nginx 服务器是 100% CPU 使用率，使用所有 CPU 的进程是 php-cgi。

我使用此命令登录并杀死所有 php-cgi。

```
kill -s 9 PID 
```

现在重新启动服务器后无法正常工作，我看到消息“未指定输入文件。”。我用谷歌搜索这条消息，但没有任何效果，我想我只是再次启动 php-cgi，但找不到如何启动它。

更新

如果我运行 top 命令，我可以看到 php-cgi 正在运行

```
1049 root      20   0  336m  20m  10m S  0.0  0.3   0:00.37 httpd                                                                                                                      
1051 apache    20   0  219m 5472  608 S  0.0  0.1   0:00.55 httpd                                                                                                                      
1080 root      20   0 20888 1180  592 S  0.0  0.0   0:00.02 crond                                                                                                                      
1182 root      20   0 19256  976  384 S  0.0  0.0   0:00.00 nginx                                                                                                                      
1183 nginx     20   0 19856 3176 1364 S  0.0  0.1   0:05.65 nginx                                                                                                                      
2326 apache    20   0  337m  13m 2512 S  0.0  0.2   0:02.07 httpd                                                                                                                      
2331 apache    20   0  337m  13m 2564 S  0.0  0.2   0:02.10 httpd                                                                                                                      
2696 root      20   0 96656 3820 2944 S  0.0  0.1   0:00.18 sshd                                                                                                                       
2701 root      20   0 12084 1696 1336 S  0.0  0.0   0:00.03 bash                                                                                                                       
2808 apache    20   0  337m  12m 1988 S  0.0  0.2   0:00.22 httpd                                                                                                                      
2864 root      20   0 12632 1228  948 R  0.0  0.0   0:00.29 top                                                                                                                        
2908 ulisses   20   0  183m  11m 6704 S  0.0  0.2   0:00.07 php-cgi 
```

运行 ps aux 命令，同时显示 cgi-php

```
root      1049  0.0  0.3 344532 20700 ?        Ss   14:39   0:00 /usr/sbin/httpd
apache    1051  0.0  0.0 224920  5472 ?        S    14:39   0:00 /usr/sbin/httpd
root      1080  0.0  0.0  20888  1180 ?        Ss   14:39   0:00 crond
root      1182  0.0  0.0  19256   976 ?        Ss   14:43   0:00 nginx: master process /usr/sbin/nginx -c /etc/nginx/nginx.conf
nginx     1183  0.0  0.0  19856  3176 ?        S    14:43   0:05 nginx: worker process                   
apache    2326  0.0  0.2 345492 13900 ?        S    16:56   0:02 /usr/sbin/httpd
apache    2331  0.0  0.2 345480 13944 ?        S    16:57   0:02 /usr/sbin/httpd
root      2696  0.0  0.0  96656  3820 ?        Ss   17:41   0:00 sshd: root@pts/0 
root      2701  0.0  0.0  12084  1696 pts/0    Ss   17:42   0:00 -bash
apache    2808  0.0  0.2 345164 12848 ?        S    17:52   0:00 /usr/sbin/httpd
ulisses   2929  0.8  0.1 187732 11976 ?        S    18:06   0:00 /usr/bin/php-cgi -c /var/www/vhosts/teclasap.com.br/etc/php.ini
root      2932  0.0  0.0  10480   932 pts/0    R+   18:06   0:00 ps aux 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-13T02:07:55.103

您可以通过以下方式杀死所有 php-cgi

```
sudo killall -9 php-cgi 
```

# javascript - 带有 Javascript 的网页执行带有参数的 Python 脚本

> ID：16024420
> 
> 赞同：0
> 
> 时间：2013-04-15T20:44:54.040
> 
> 标签：javascript, python, html, arguments

我在同一个目录中有三个文件。一个是 python 脚本，它采用 argumenet。一种是带有 javascript 的 html 页面。最后一个是源 .wav 文件。

```
./myfolder/sound_manipulation.py
./myfolder/volume_slider.html
./myfolder/the_song.wav 
```

sound_manipulation.py 文件可以像这样执行：

```
python sound_manipulation.py -v 50 
```

它会根据 the_song.wav 生成一个新的 wav 文件 new_song.wav，但只有原始音量的 50%。

另一方面，volume_slider.html 包含一个从 0 到 100% 的滑块，以及一个调用 onclick javascript 函数 update_vol() 的按钮；

到目前为止，update_vol() 会提醒滑块的值，仅此而已。

```
function update_vol() {
    var vol = document.getElementById('vol_slider').value;
    alert(vol);
} 
```

但我希望 update_vol() 使用 vol 实际执行 python 脚本。

我怎样才能做到这一点？

另外，当执行“python sound_manipulation.py -v 50”时，如何将new_song.wav的位置返回给volume_slider.html？

请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:56:51.203

最简单粗暴的一次性 cgi 脚本可能会解决您的问题。

设置一个 cgi 脚本/环境以`volume`从用户那里获取值/然后使用`subprocess`模块来处理 .wav 文件并将其发送回用户。如果您需要更多，请构建您自己的网络应用程序。

```
import cgi
import subprocess
import sys
form = cgi.FieldStorage()
volume = form.getfirst('volume') #read from form 'volume'

subprocess.call(['python', 'sound_manipulation.py', '-v', volume])

with open('new_song.wav', 'rb') as wav_file:
    print("Content-Type: audio/wav\n")
    sys.stdout.write(wav_file.read()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T20:54:06.070

嗯，好吧，我猜你运气不好。浏览器脚本*不能*在你的系统上执行任何东西（所以没有 Python 脚本）。我相信你可以想象，这可能会带来巨大的安全风险——这正是微软的 ActiveX 遇到的麻烦。

我假设您想为该脚本创建一个图形界面，因此您也可以：

*   如果您绝对需要 HTML，请执行与 Python 脚本等效的 JavaScript
*   或者在QT、GTK等中创建接口。顺便说一句，Python 可以轻松做到这一点！

# git - 无法签出修改过的文件

> ID：16024422
> 
> 赞同：2
> 
> 时间：2013-04-15T20:44:57.460
> 
> 标签：git

我的存储库中的所有文件都在索引中显示为已修改。我不知道这是怎么发生的，我一直在尝试从索引中删除修改后的文件，但我无法这样做。

我尝试了以下方法：

```
git checkout -- .
git reset --hard HEAD 
```

我什至尝试单独签出一个文件，但即便如此，当我`git status`之后它仍然显示为已修改。

```
git checkout -- path/to/file.txt 
```

您对正在发生的事情有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T20:48:20.047

文件可能会自动更改行尾（检查结果`git config core.autocrlf`）。
我总是尝试将[特定设置保持为 false](https://stackoverflow.com/questions/2333424/distributing-git-configuration-with-the-code/2354278#2354278)。

您还有其他可以在结帐或重置时应用的自动更改，即在[`.gitattributes`文件](http://git-scm.com/docs/gitattributes.html)中声明的各种内容驱动程序（如`core.eol`、[或`text`](https://stackoverflow.com/a/11011701/6309)）。

关于权限自动更改，请尝试

```
git config core.filemode false 
```

[“从 git 中的未暂存更改中删除说“旧模式 100755 新模式 100644”的文件](https://stackoverflow.com/q/1257592/6309)中的更多详细信息”

# algorithm - 加权voronoi图的参考算法？

> ID：16024428
> 
> 赞同：12
> 
> 时间：2013-04-15T20:45:44.097
> 
> 标签：algorithm, data-structures, geometry, voronoi

有人可以向我指出如何构建（乘法和/或加法）加权 voronoi 图的参考实现，该图最好基于 Fortune 的 voronoi 算法？

**我的目标**：给定一组点（每个点都有一个权重）和一组边界边（通常是一个矩形），我想使用 python 或 processing.org-framework 构建一个加权 voronoi 图。这是一个[例子](http://www.nytimes.com/interactive/2008/05/03/business/20080403_SPENDING_GRAPHIC.html?_r=0)。

**到目前为止我所做的工作**：到目前为止，我已经实现了 Fortune 的算法以及[Michael Balzer 的论文](http://graphics.uni-konstanz.de/publikationen/2005/voronoi_treemaps/Balzer%20et%20al.%20--%20Voronoi%20Treemaps.pdf)中提出的“centroidal voronoi tessellation” 。算法 3 说明了如何调整权重，但是，当我实现这个时，我的几何不再起作用了。为了解决这个问题，必须更新扫描线算法以考虑权重，但到目前为止我还无法做到这一点。因此，我想看看其他人是如何解决这个问题的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-16T01:07:59.590

对于加性加权 Voronoi 图：[请记住，维度 n 中的幂图只是维度 n+1 中的（n 未加权）Voronoi 图](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.104.678&rep=rep1&type=pdf)。

为此，请记住，如果将任何常数添加到坐标中，点集的 Voronoi 图是不变的，因此加权 Voronoi 图可以使用坐标写为非加权 Voronoi 图，例如在 2D 中提升到3D:
(x_i, y_i, sqrt(C - w_i))
其中 w_i 是种子的权重，C 是任意大的常数（实际上，一个小到足以使 C-w_i 为正的常数）。
计算图表后，只需丢弃最后一个组件。

因此，基本上，与您的问题相比，您只需要找到一个能够处理维度为 n+1 的 Voronoi 图的库。CGAL 可以做到这一点。这也使得实现变得非常容易。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T00:20:09.097

这种计算并不容易，但它在 CGAL 中是可用的。请参阅[此处的手册页。](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/packages.html#part_X)

* * *

![来自 CGAL 手册](https://i.stack.imgur.com/bpalY.png)

* * *

另见[有效计算几何](https://www-sop.inria.fr/prisme/ECG/)项目，它采用并支持 CGAL：

* * *

          ![莫妮克](https://i.stack.imgur.com/QjJDB.gif)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-01-07T13:42:47.817

对于到中心的距离用乘法因子加权的情况，几乎没有“现成的”开源代码。据我所知，当前的 CGAL 包都没有涵盖这种情况。

Takashi Ohyama 色彩绚丽的网站提供了 java 实现 [http://www.nirarebakun.com/voro/emwvoro.html](http://www.nirarebakun.com/voro/emwvoro.html) ，使用简单算法（欧几里得距离和曼哈顿距离）最多可以得到 100 个点。还有一篇论文描述了这种简单的交集算法和 O(n^3) 时间内的近似实现，作为 TerraView 的插件。但是，我在 TerraView / TerraLib 存储库中找不到此插件的来源： [http ://www.geoinfo.info/geoinfo2011/papers/mauricio1.pdf](http://www.geoinfo.info/geoinfo2011/papers/mauricio1.pdf)

Aurenhammer 和 Edelsbrunner 描述了一个最佳的 n^2 时间算法，但我不知道可用的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T20:53:02.333

如果您愿意深入研究[Octave](http://www.gnu.org/software/octave/doc/interpreter/Voronoi-Diagrams.html)，您可以参考他们的[库](http://www.gnu.org/software/octave/download.html)中提供的代码。

# android - 运行 4.1.2 的三星 Galaxy Note 10 上的操作栏选项卡

> ID：16024438
> 
> 赞同：2
> 
> 时间：2013-04-15T20:46:10.423
> 
> 标签：android, android-actionbar, actionbarsherlock

我有一个应用程序在纵向模式下使用带有 3 个选项卡的操作栏。除了在三星 Galaxy Note 10 上运行时选项卡不居中之外，所有工作都有效，而是左对齐。

相同的应用程序代码在具有不同操作系统版本（例如 4.0.2、4.2.0 等）的其他设备上运行良好

任何建议将不胜感激。谢谢。

![在此处输入图像描述](https://i.stack.imgur.com/Eqweu.png)

# c# - C# 中的 MVVM 存储状态

> ID：16024439
> 
> 赞同：2
> 
> 时间：2013-04-15T20:46:11.697
> 
> 标签：c#, wpf, mvvm, viewmodel

我正在将 MVVM 与 WPF 一起使用，但我很难理解这种设计模式背后的概念。

我有一个“myclass”对象，它是应用程序的状态（它存储从存储库加载的数据）。我的应用程序的所有页面都将使用这些数据，并且对象应该在它们之间同步。

我的第一种方法是使用单例类将这些数据存储在服务层中。所以，所有的 ViewModel 都应该调用这个服务来获取数据。任何修改都应该调用这个服务，并且会触发一个事件来同步所有视图。

我现在想知道将这些数据存储在模型层中是否会更好......最好的选择是什么？

编辑：添加更多信息：存储的数据是加载到解决方案中的项目列表。由于必须只有一个解决方案，因此我将其实现为单例。must 可以交互地加载、更改或删除任何项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:43:00.030

据我了解，服务只是抽象了一个功能（访问文件系统，访问数据库......），它实现了一个给定的接口，`VM`然后在需要该功能时可以使用该接口。

然而，模型**包含**您的应用程序的业务逻辑以及任何有助于执行该业务逻辑的东西（如果需要，可以/不能实现[INPC](http://msdn.microsoft.com/en-gb/library/system.componentmodel.inotifypropertychanged.aspx)）

所以本质上你使用一个服务来完成某件事然后放手，一个模型对你的应用程序来说更加根深蒂固

对于您给定的用例，我会将存储的信息存储在模型中并`INPC`在其上实现，以便在另一个 ViewModel 对模型进行更改时自动通知 ViewModel。

# python - 在 Python 3 中安装 Ephem 包

> ID：16024443
> 
> 赞同：3
> 
> 时间：2013-04-15T20:46:27.447
> 
> 标签：python, windows, cygwin, pyephem

我想在 Windows XP 下的 Python 3.3.0 版本中安装*ephem*包。

我首先从系统命令提示符尝试了*pip install ephem路由。*该过程中止，并显示错误消息*Unable to find vcvarsall.bat*。

对于这样的困难，我在网上阅读了先前的建议。之后我在我的计算机中安装了*mingw32 ，将**C:\MinGW\bin*添加到*PATH*变量中，并为*Lib / distutils*提供了一个名为*distutils.cfg*的新文件和内容：

```
[build]
compiler=mingw32 
```

现在运行任何安装命令（*pip*， *easy_install* 和*setup.py*都工作相同）以下错误结果：

```
C:\MinGW\bin\gcc.exe -mno-cygwin -mdll -O -Wall -Ilibastro-3.7.5 -IC:\Python33\
include -IC:\Python33\include -c extensions/_libastro.c -o build\temp.win32-3.3\
Release\extensions\_libastro.o

cc1.exe: error: unrecognised command line option '-mno-cygwin'

error: command 'gcc' failed with exit status 1 
```

我试图理解和解决问题，但没有成功。我什至无法在代码中找到建立这些值的位置。

¿ 有人可以提供任何帮助吗？¿ *ephem*是否会是在*3.3.0 文档中**安装 Python 模块*时提到的“并非所有扩展都可以使用 MinGW 或 Cygwin 构建，但许多扩展都可以。”的案例之一？

 *提前致谢

帕科

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T22:28:06.240

这是一个非常有用的 Python 包的 Windows 二进制文件页面：[http](http://www.lfd.uci.edu/~gohlke/pythonlibs/) ://www.lfd.uci.edu/~gohlke/pythonlibs/ 。

它包括[pyephem](http://www.lfd.uci.edu/~gohlke/pythonlibs/#pyephem)的二进制文件。*

# android - 方向更改时如何在 ViewPager 中保存 Fragments 的状态

> ID：16024447
> 
> 赞同：0
> 
> 时间：2013-04-15T20:47:04.140
> 
> 标签：android, android-fragments, android-fragmentactivity

我有一个实现 ActionBarSherlock 的应用程序，它主要由 ViewPager 组成，具有不同的片段内容（对于每个页面），带有 ViewPager 指示器。

这是我扩展 SherlockFragmentActivity 的 Activity 的 onCreate 方法

```
// Assume that tabs,sources,types are string arrays e.g. tabs = ["tab1","tab2","tab3"]
// types = ["listview","listview","webview"]
// according to the type of each tab, the type of content of the fragment associated to that tab is determined (e.g. WebView or ListView)
@Override
public void onCreate(Bundle savedInstanceState) {

super.onCreate(savedInstanceState);
super.setContentView(R.layout.main);

srcContext = getBaseContext();
srcActivity = SaudiActivity.this;

int selectPos = 0;

Intent sender = getIntent();

FragmentPagerAdapter mAdapter = new NewsListAdapter(
            getSupportFragmentManager());
ViewPager pager = (ViewPager) findViewById(R.id.pager);
pager.setAdapter(mAdapter);

TabPageIndicator indicator = (TabPageIndicator) findViewById(R.id.indicator);
    indicator.setViewPager(pager);
    pager.setOffscreenPageLimit(tabs.length);
    pager.setCurrentItem((tabs.length - 1));
    currentPosition = (tabs.length - 1);

    indicator.setOnPageChangeListener(new ViewPager.OnPageChangeListener() {
        @Override
        public void onPageSelected(int position) {
            currentPosition = position;
            if ((type[position] == "listview" || type[position]
                    .equals("listview")) && loaded[position] == false) {
                loaded[position] = true;
                getNews(listViews[position], position);
            }
        }

        @Override
        public void onPageScrolled(int position, float positionOffset,
                int positionOffsetPixels) {
        }

        @Override
        public void onPageScrollStateChanged(int state) {
        }
    });

    getSupportActionBar().setCustomView(R.layout.logo);
    getSupportActionBar().setDisplayShowCustomEnabled(true);
    getSupportActionBar().setDisplayHomeAsUpEnabled(false);
    getSupportActionBar().setDisplayShowTitleEnabled(false);
    getSupportActionBar().setDisplayShowHomeEnabled(false);

    Context ctx = getSupportActionBar().getThemedContext();

    SourcesAdapter adapter = new SourcesAdapter(ctx,
    R.layout.navigation_list_item, src_name, icons, src_value);

} 
```

这是我的新闻列表适配器（创建片段），

```
 public static class MyViewHolder {
    public TextView title;
    public ImageView icon;
}

class NewsListAdapter extends FragmentPagerAdapter {

    public NewsListAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        return new NewsFragment(MyActivity.this, position);
    }

    // This is the number of pages -- 5
    @Override
    public int getCount() {
        return tabs.length;
    }

    // This is the title of the page that will apppear on the "tab"
    public CharSequence getPageTitle(int position) {
        return tabs[position];
    }

}

public List<NewsItem> NewsItems; 
```

最后是我的 NewsFragment：

```
public static class NewsFragment extends Fragment {

    private int position;

    public NewsFragment() {
    }

    public NewsFragment(Context ctx, int pos) {
        this.position = pos;
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,

    Bundle savedInstanceState) {
        View view = null;
        if (type[position].equals("listview")) {
            // Put a ListView in the Fragment
        } else {
            // Put a WebView in the Fragment
        }
        return view;
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T00:03:47.807

让片段通过覆盖 onSaveInstanceState 并将必要的值放入 outState 来处理它的状态。使用 savedInstanceState 在 onCreateView 中恢复该状态。另外我很确定如果你使用 Actionbarsherlock 片段需要扩展 SherlockFragment 而不是 Fragment。

# wcf - wcf client certificate validation

> ID：16024455
> 
> 赞同：2
> 
> 时间：2013-04-15T20:47:58.867
> 
> 标签：wcf

We have a wcf service hosted in IIS. We like to restrict the client callers to known clients so we implemented a custom X509CertificateValidator. The service is configured with WSHttpBinding binding and IIS set to SSL and require client certificate. Everything is working as expected.

However, we found that we have other aspx pages hosted within the same site that should not require client certificate. It breaks our usage pattern.

I read that turning the IIS setting from Required Client Certificate to Accept Client certificate does not work. I tried this out, while still passing in the client cert from client and it seems to invoke my custom validator. However, using wcf proxy library, I'm unable to call it without a client cert to verify not passing one in.

If "accept client certificate" is not an option, what is the best alternative? Adding some type of message inspector?

Thanks very much in advance.

# haskell - 在 Haskell Web 应用程序中管理加密随机数生成器

> ID：16024461
> 
> 赞同：3
> 
> 时间：2013-04-15T20:48:13.170
> 
> 标签：haskell, yesod

我正在编写一个应用程序，我希望能够通过 Web API 向客户端提供 RSA 加密令牌。

我正在使用RSA[`crypto-pubkey`库](http://hackage.haskell.org/packages/archive/crypto-pubkey/0.1.3/doc/html/Crypto-PubKey-RSA.html)，例如：

```
encrypt :: CPRG g
    => g          -- ^ random number generator.
    -> OAEPParams -- ^ OAEP params to use for encryption.
    -> PublicKey  -- ^ Public key.
    -> ByteString -- ^ Message to encrypt
    -> (Either Error ByteString, g) 
```

就我而言，消息是用于加密令牌的 AES 内容密钥。我可以使用提供 AES 计数器模式实现[`CPRG`](http://hackage.haskell.org/packages/archive/crypto-random-api/0.2.0/doc/html/Crypto-Random-API.html)的库创建一个实例：`cprng-aes`

```
makeSystem :: IO AESRNG 
```

这与 Yesod 在其`ClientSession`模块中使用的实现相同。我已经看过了，它在 an 后面存储了一个全局实例，`IORef`并使用它来实现一个函数，用于在`atomicModifyIORef`调用中生成初始化向量。

这没关系，因为该函数只是从生成器中提取一些字节并返回它们，将新的 CPRG 实例写回 IORef。但是 RSA API 需要 `CPRG`直接传递一个实例，即使我可以在调用 中执行我的令牌生成`atomicModifyIORef`，它也可能是一个成本更高的操作并导致争用问题。

我的一个想法是在调用加密 API 之前提前从全局实例中提取足够的数据，并将其包装在`CPRG`由 a 支持的实例中`ByteString`，但这有点脆弱，因为它需要事先了解内部结构令牌生成过程的内容——内容密钥大小、RSA 填充等，可能会因所选参数而异。

在多线程客户端-服务器应用程序中使用纯函数（如上述 RSA API）所需的随机数生成器时，管理它们的最佳选择是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:33:40.143

*如果数字表明您需要这个*，我建议使用 CPRG 实例池。可能值得先做一些基本的分析，看看简单的 atomicModifyIORef 方法是否会成为瓶颈。

对于池，您可以使用[http://hackage.haskell.org/package/resource-pool](http://hackage.haskell.org/package/resource-pool)或[http://hackage.haskell.org/package/pool-conduit](http://hackage.haskell.org/package/pool-conduit)（基于资源池）。

# php - Advanced MySQL area costs

> ID：16024462
> 
> 赞同：1
> 
> 时间：2013-04-15T20:48:15.853
> 
> 标签：php, mysql

I am a little familar with MySQL but thinking about implementing this feature makes my brain hurt. I need a system where you can set the "cost" of an area say between the coordinates X=20 Y=20 WIDTH=20 HEIGHT=20 at cost of 15 per pixel, now if you place another area within this area, say at X=25, Y=25, WIDTH=10, HEIGHT=10 at cost of 5 per pixel the previous area is broken down into 4 parts and the middle is wiped in favor of this area.

I would also like to be able to calculate the "cost" of an area between certain pixels. Hope I've explained that in a manner most of you will understand. I have no idea where to start.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:00:46.530

我会通过优先存储所有区域然后逐个像素地获取成本来解决这个问题。

因此，单个像素的成本为：

```
select c.*
from costs c
where PIXELX between c.x and c.x + c.deltax and PIXELY between c.y + c.deltay
order by priority desc
limit 1 
```

要将其扩展到像素区域，您可以将该区域扩展为一组像素。我建议有一张`numbers`桌子来帮助解决这个问题：

```
select x.num as x, y.num as y
from numbers x cross join
     numbers y
where x.num between PIXELX and PIXELX and DELTAX and
      y.num between PIXELY and PIXELY and DELTAY 
```

现在，结合这些想法来获得给定像素的所有可能成本：

```
select x.num as x, y.num as y, max(priority) as maxpriority
from numbers x cross join
     numbers y join
     costs c
     on x.num between c.x and c.x + c.deltax and y.num between c.y + c.deltay
where x.value between PIXELX and PIXELX and DELTAX and
      y.value between PIXELY and PIXELY and DELTAY
group by x.num, y.num 
```

最后，为给定的优先级加入成本：

```
select sum(c.cost)
from (select x.num as x, y.num as y, max(priority) as maxpriority
      from numbers x cross join
           numbers y join
           costs c
           on x.num between c.x and c.x + c.deltax and y.num between c.y + c.deltay
      where x.value between PIXELX and PIXELX and DELTAX and
            y.value between PIXELY and PIXELY and DELTAY
      group by x.num, y.num
    ) xyp join
    costs c
    on  xyp.x between c.x and c.x + c.deltax and xyp.y between c.y + c.deltay and
        xyp.maxpriority = c.priority 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-16T13:52:46.230

> 考虑实现这个功能让我的大脑受伤

对，我的也是！嗯……这听起来确实很熟悉——因为它以前在百万美元主页上[做过](http://www.milliondollarhomepage.com/ "百万美元主页")

也许您可以改为使用或调整预制解决方案，例如[Gpix](http://www.tufat.com/script63.htm "画质")或谷歌“像素广告脚本”。

# c++ - 为什么在这种情况下不会隐式生成 operator= 和复制构造函数？

> ID：16024464
> 
> 赞同：0
> 
> 时间：2013-04-15T20:48:36.897
> 
> 标签：c++, constructor, compiler-errors, constants, copy-constructor

我有一个这样的结构：

```
/* Renderable definition */
    struct Renderable
    {
        Renderable(VertexBufferPtr vertexBuffer, const Mat4& wvpMatrix, const Mat4& worldMatrix, const Vec4& diffuseColor, const float specularFactor) : 
                    mVertexBuffer(vertexBuffer), mTransform(wvpMatrix, worldMatrix), mMaterial(diffuseColor, specularFactor)
        {
        }

        /* Transform definition */
        struct Transform
        {
            Transform(const Mat4& wvpMatrix, const Mat4& worldMatrix) : mWVPMatrix(wvpMatrix), mWorldMatrix(worldMatrix)
            {
            }

            const Mat4 mWVPMatrix;
            const Mat4 mWorldMatrix; 
        };

        /* Material definition */
        struct Material
        {
            Material(const Vec4& diffuseColor, const float specularFactor) : mDiffuseColor(diffuseColor), mSpecularFactor(specularFactor)
            {
            }

            const Vec4 mDiffuseColor;
            const float mSpecularFactor;
        };

        const VertexBufferPtr mVertexBuffer;
        const Transform mTransform;
        const Material mMaterial;
    };

    /* RenderQueue definition */
    typedef std::vector<Renderable> RenderQueue; 
```

当我尝试在我的代码中使用它时；

```
RenderQueue CreateRenderQueue(const Scene* scene);

....

RenderQueue renderQueue(CreateRenderQueue(activeScene)); 
```

我收到以下编译错误：

```
c:\program files (x86)\microsoft visual studio 10.0\vc\include\xutility(2514): error C2582: 'operator =' function is unavailable in 'Renderable' 
```

经过一番挖掘，我意识到这是因为我没有定义赋值运算符和复制构造函数。然后我就这样做了，瞧！它编译...

....我的问题是，为什么赋值运算符和复制构造函数不是由编译器隐式生成的？（vs2010）我没有定义它们，所以肯定会生成它们吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T20:50:51.960

你有常量类成员对象，所以你不能分配它们。不过，应该生成一个复制构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T21:11:07.757

请参阅[此问题的答案](https://stackoverflow.com/questions/563221/is-there-an-implicit-default-constructor-in-c)，其中说明了隐式默认构造函数的条件（强调我的）：

> 如果您不定义*构造函数*，编译器将为您定义一个默认构造函数。

您定义了一个构造函数，因此隐式默认构造函数不再可用，由您来定义一个。

事实上，相同答案下面的几行为类的所有基本方法给出了相同的规则：

> 如果没有定义析构函数/复制构造函数/赋值运算符，编译器会为您构建其中之一

# jquery - jquery alert 一个然后两个然后一个然后两个...等等

> ID：16024469
> 
> 赞同：0
> 
> 时间：2013-04-15T20:49:04.507
> 
> 标签：jquery, random, alert

> ```
> <script>
> function oneortwo(){
> var num = Math.floor((Math.random()*2)+1);
> alert(num);
> }
> </script>
> <button onclick="oneortwo()">click</button> 
> ```

上面的脚本是随机化一和二。我想提醒一个，然后是两个，然后是一个，然后是两个......等等。如果一个被警告，下一个值将是两个，反之亦然。基本上，如果已经发出警报，我不希望重复以前的值。任何帮助将不胜感激。谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T20:51:25.400

```
var num = Math.floor((Math.random() * 2) + 1);
function oneortwo(){
    num = num == 1 ? 2 : 1;
    alert(num);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T20:53:39.853

像这样？

```
var counter = Math.floor((Math.random()*2)+1); // initially random
function oneortwo(){
    counter = (counter == 2) ? 1 : 2; 
    alert(num);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T20:52:50.547

为了保持最初的“随机性”，这应该可行。

```
var num;
function oneortwo() {
    if (num == 1) num = 2;
    else if (num == 2) num = 1;
    else num = Math.floor((Math.random() * 2) + 1);
    alert(num);
} 
```

# events - How do I determine which DataView generated an event?

> ID：16024471
> 
> 赞同：2
> 
> 时间：2013-04-15T20:49:04.930
> 
> 标签：events, slickgrid, dataview

I'm implementing filtering via the HeaderRow of my grids, and I've run across a problem I can't seem to solve.

All the examples that show dataView Event handlers employ global variables to identify the related grid, such as in:

```
gridQMsgsDataView.onRowCountChanged.subscribe(rowCountChanged);

(...elsewhere...)

function rowCountChanged(e, args) {
    grid.updateRowCount();   //'grid' is a global variable assigned to a slickGrid.
    grid.render();
} 
```

Unlike in the examples that I find, I'm creating slickjGrids and dataViews dynamically at runtime, and keep their reference variables in a list as I create them.

I can't tell at compile time how many there will be, thus I can't use something like the global "grid" variable to reference the relevant dataview and/or slickgrid.

So I have two questions, and appreciate any insight:

when my rowCountChanged handler is called...

A) How do I know which dataView generated the event?

B) Once I know that, how do I know which slickgrid that dataView is associated with?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-18T06:47:06.943

**a)** `rowCountChanged`在dataGrid的上下文中调用；回调中的 dataGrid 也是如此`this`，或者使用 B 中描述的相同闭包）

**B)**使用闭包，即使多个网格（显示）绑定到同一个 dataView（这只是可能的，因为 dataView*不*与特定的 Grid 关联）。

当您使用 dataView（或稍后分配）创建网格时，在同一范围内（`grid`可用），使用辅助函数订阅回调以包围网格：

```
function watchRowCountChanges(grid, dataView) {
  dataView.onRowCountChanged.subscribe(function (e, args) {
    grid.updateRowCount();   // `grid` is a _local_ variable
    grid.render();

    console.log(grid.name, this === dataView); // true story, use either!
  });
}

// elsewhere...

var grid1 = new Slick.Grid(element1, dataView, columns1, options1);
grid1.name = 'grid1';
watchRowChanges(grid1, dataView);

var grid2 = new Slick.Grid(element2, [], columns2, options2);
grid2.name = 'grid2';
grid2.setData(dataView);
watchRowChanges(grid2, dataView); 
```

当行数改变时：

```
grid1 true
grid2 true 
```

# javascript - 在线报价单 - Wordpress

> ID：16024475
> 
> 赞同：0
> 
> 时间：2013-04-15T20:49:13.937
> 
> 标签：javascript, html, wordpress, forms

我正在尝试为网站创建一个带有 javascript 计算的在线表单。

我的第一步是在 excel 中创建表单/表格。然后我使用在线服务将表格转换为 html。我现在有了生成的 html 代码，这很棒，但我看到这些字段不是表单中的“可编辑”。我尝试在转换之前删除电子表格中的“样本”数据，但这些字段仍然不可编辑？

任何建议将不胜感激。谢谢

```
<style type="text/css">
    table.tableizer-table {
    border: 1px solid #CCC; font-family: <?php echo $tableFont ?>;
    font-size: 12px;
} 
.tableizer-table td {
    padding: 4px;
    margin: 3px;
    border: 1px solid #ccc;
}
.tableizer-table th {
    background-color: #104E8B; 
    color: #FFF;
    font-weight: bold;
}
</style><table class="tableizer-table">
<tr class="tableizer-firstrow"><th>Date</th><th>Amount of Delegates ½ Day Conference @ R 240 pp</th><th>Amount of Delegates Full Day Conference @ R 260 pp</th><th>Menu No</th><th>Price pp for Menu       (1-7: R70, 8-10 R85, 11: R105, 12: R85)</th><th>Total persons for Meals </th><th>Amount of Single Rooms @ R 480 pp</th><th>Amount of Double Rooms @ R 720 pp</th><th>Total for the day</th></tr>
 <tr><td>4/14/2013</td><td>2</td><td>4</td><td>5</td><td>70</td><td>6</td><td>3</td><td>3</td><td>R 5,540.00</td></tr>
 <tr><td>4/15/2013</td><td>1</td><td>5</td><td>8</td><td>85</td><td>6</td><td>3</td><td>3</td><td>R 5,650.00</td></tr>
 <tr><td>4/16/2013</td><td>0</td><td>6</td><td>11</td><td>105</td><td>6</td><td>3</td><td>3</td><td>R 5,790.00</td></tr>
 <tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
 <tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
 <tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
 <tr><td>Grand Total  for the conference</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>R 16,980.00</td></tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:05:49.083

我不明白你所说的不可编辑是什么意思，但我猜你的意思是他们有静态数据。如果是这样，那么您需要插入`<input type="text" />`元素。

我提供了一个示例[jsfiddle.net/trajce/6jAAU](http://jsfiddle.net/trajce/6jAAU/)。
这是示例 HTML：

```
<table>
<tr>
    <td>
        Name:
    </td>
    <td>
        <input tyle="text" id="name"/>
    </td>
</tr>
    <tr>
    <td>
        Surname:
    </td>
    <td>
        <input tyle="text" id="surname"/>
    </td>
</tr>
</table> 
```

# perl - Perl并行迭代2个数组的方法

> ID：16024480
> 
> 赞同：9
> 
> 时间：2013-04-15T20:49:25.613
> 
> 标签：perl

我用了

```
Use List::MoreUtils qw(each_array);
my $it = each_array( @input_dump_arr, @created_dump_arr);
while ( my ($first, $second) = $it->()) {
} 
```

这可以在默认的 perl 配置中工作吗？一个更广泛的问题是是否有编写“便携式”perl 脚本的指南？我是 Perl 的新手，只是想弄清楚 cpan 是否实际上类似于 boost 库对 c++ 的作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T21:12:14.250

它不是一个核心模块（意味着它没有与 perl 捆绑在一起），但它是一个相对常见的模块。我会毫不犹豫地使用它。

如果您*真的很*偏执，它可能不可用，假设数组的**大小相同**，您可以使用以下内容：

```
for my $i (0 .. $#array1) {
  my $first  = $array1[$i];
  my $second = $array2[$i];
} 
```

不过好在 each_array() 是用纯 perl 实现的，所以你也可以查看 List/MoreUtils.pm 的源代码并复制粘贴相关的子程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T05:58:46.983

您可能希望使用这种更简单的模块`each_arrayref`功能重写。`each_array`是这个函数的多余包装器，它使用原型来引用作为参数传递的数组。

它的功能与模块版本相同，只是它不检查它接收到的参数，并且返回的迭代器不检查它是否没有参数或`'index'`.

```
use strict;
use warnings;

sub each_array {

  my @copy = @_;
  my $i;
  my $max;

  for (map scalar @$_, @copy) {
    $max = $_ unless defined $max and $max > $_;
  }

  sub {
    return $i if @_ and shift eq 'index';
    my $new_i = defined $i ? $i + 1 : 0;
    return if $new_i >= $max;
    $i = $new_i;
    return map $_->[$i], @copy;
  }
}

my @array1 = qw/ A B C /;
my @array2 = qw/ D E F G /;

my $iter = each_array(\@array1, \@array2);

while (my @values = $iter->()) {
  printf "%d: %s\n", $iter->('index'), join ', ', map $_ // 'undef', @values;
} 
```

**输出**

```
0: A, D
1: B, E
2: C, F
3: undef, G 
```

当然，您可以简单地`each_arrayref`从`List::MoreUtils`模块中获取代码。它是独立的，将保证与您现有代码的兼容性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T20:57:28.553

有一些模块直接与 Perl 本身一起分发。它们通常被称为“核心模块”。你总是可以使用这些。`List::Util`是其中之一，但`List::MoreUtils`不是。

但是，是[CPAN](http://www.cpan.org)`List::MoreUtils`上可用的模块。CPAN 通常被认为是“Perl 的标准库”，类似于 C++ 的“标准库”。大多数人认为要求他们的应用程序的用户从 CPAN 安装某些模块是可以的，特别是如果它们是使用良好的模块。

`List::MoreUtils`绝对是一个很好用的模块。它已经存在了一段时间。我所知道的所有主要 Linux 发行版都包含它的打包版本。

因此，如果您的目标不是 100% 独立于非核心模块，那么我强烈建议您继续使用`List::MoreUtils`CPAN 上提供的大多数其他优质模块。这就是 Perl 摇滚的原因。

有点题外话：我不得不承认我更喜欢`pairwise`（也来自`List::MoreUtils`）恰好两个数组，因为它的行为更像`map`. 对于您的示例：

```
use List::MoreUtils qw(pairwise);
pairwise { do_stuff($a, $b) } @input_dump_arr, @created_dump_arr; 
```

# javascript - Javascript，有不同的按钮调用不同的功能

> ID：16024483
> 
> 赞同：0
> 
> 时间：2013-04-15T20:49:37.593
> 
> 标签：javascript, button

我有两种不同的功能遵循这种格式

```
$("button1").click(function(){ .... });
$("button2").click(function(){ .... }); 
```

我以为我可以像这样创建具有不同 ID 值的按钮......

```
<button id="button1">Button1</button>
<button id="button2">Button1</button> 
```

然后这个按钮将调用任何具有与其相关的正确 ID 值的函数......

但由于某种原因，它不起作用。难道我做错了什么？有不同的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T20:51:37.770

用于`#`访问 id：

```
$('#button1').click... 
```

并访问类，使用一个点：

```
$('.myclass').click(...) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T20:51:44.220

```
$("#button1").click(function(){ .... });
$("#button2").click(function(){ .... }); 
```

您需要 # 字符来记下 JQuery 中的 id

# wordpress - 在 wordpress 上使用 wp_nav_menu

> ID：16024484
> 
> 赞同：3
> 
> 时间：2013-04-15T20:49:39.990
> 
> 标签：wordpress

我在使用 wp_nav_menu 时遇到问题，我正在尝试为 WP 创建自己的主题，现在我已将该代码放入我的 functions.php 文件中，

```
function register_my_menu() {
  register_nav_menu('header-menu',__( 'Header Menu' ));
}
add_action( 'init', 'register_my_menu' ); 
```

正如指南所说，现在当我试图将它结合到我的设计中时，我在 wp_nav_menu 函数中传递的参数并没有真正做任何事情，我真的不明白为什么，我试图玩它但它没有似乎有些事情发生了变化。`

```
wp_nav_menu( array( 'items_wrap'      => '<ul id="danny" class="danny">%3$s</ul>','theme_location' => 'header-menu' ) ); 
```

`这与我的工作无关，我作为参数添加的输出保持不变，有人知道吗？我错过了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:43:54.940

为什么不注册你的菜单，你只需要像这样使用'menu'参数：

```
wp_nav_menu( array( 'items_wrap'      => '<ul class="%2$s danny" id="danny">%3$s</ul>','menu' => 'header-menu' ) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T20:54:29.163

再看一眼 Codex：[http ://codex.wordpress.org/Function_Reference/wp_nav_menu](http://codex.wordpress.org/Function_Reference/wp_nav_menu)

不要传递该标记，而是尝试使用 menu_class 和 menu_id 的参数。例如：

```
<?php wp_nav_menu( array( 'theme_location' => 'header-menu', 'menu_class' => 'danny', 'menu_id' => 'danny' ) ); ?> 
```

# reporting-services - 在 Excel 中呈现时报告服务出现错误

> ID：16024485
> 
> 赞同：0
> 
> 时间：2013-04-15T20:49:58.863
> 
> 标签：reporting-services, reporting

我正在使用 Windows 文件共享来分发来自报告服务的报告。报表要在 Excel 中呈现，并将呈现的 excel 文件放在共享服务器上。我收到错误：**写报告失败 Report1_@timestamp：在呈现报告期间发生错误。**该报告在 .cvs 中呈现时确实有效，我尝试了 Excel 2003，但由于行限制而出现错误。有没有人见过这个？提前感谢您的建议！

# regex - 如何使用 XQuery 中的 replace() 函数替换一个或多个空白字符？

> ID：16024486
> 
> 赞同：2
> 
> 时间：2013-04-15T20:50:07.213
> 
> 标签：regex, xquery

我需要使用 replace() 函数在 XQuery 中用单个破折号替换多个空白字符。

```
$input: 'abc   def   123'
Desired Output: 'abc-def-123' 
```

我试过了：

```
replace($input, '/s*', '-') 
```

和

```
replace($input, '/s.*', '-') 
```

但这些不起作用。我知道 normalize-space() 但我想要一个更通用的功能。

谢谢！- 丹

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T21:17:35.153

你有斜线错误的方式：

```
replace($input, '\s*', '-') 
```

~~此外，根据 XQuery 中的实现，这可能会在每两个非空格字符之间插入一个破折号（`\s*`允许 0 个字符，因此允许任何空匹配）。~~

[**编辑：**正如 Oliver Hallam 在评论中指出的那样，[XQuery 规范](http://w3.org/TR/xpath-functions/#func-replace)实际上要求如果模式可能导致零长度匹配，则会引发错误。]

因此，您可能想要/必须使用`+`（这意味着 1 个或多个字符）来代替：

```
replace($input, '\s+', '-') 
```

顺便说一句，您的其他尝试（使用固定斜杠）将匹配单个空格字符以及后面的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T17:21:03.433

两个额外的解决方案：

**一个简单的 XPath 1.0 表达式**：

```
translate(normalize-space($vInput), ' ', '-') 
```

**还有一个 XPath 2.0 表达式，它不仅替换了空格组，还替换了任何标点符号或分隔符组**：

```
replace($vInput, '(\p{P}|\p{Z})+', '-') 
```

# php - 注意：未定义的偏移量：2 或者如何一直获取硬盘空间

> ID：16024488
> 
> 赞同：-1
> 
> 时间：2013-04-15T20:50:36.883
> 
> 标签：php, size, hdd

```
$harddrive_out = format_bytes(kb2bytes($harddrive[2])).'<small> / '.format_bytes(kb2bytes($harddrive[1])).' <small>('.calculate_percentage(kb2bytes($harddrive[2]), kb2bytes($harddrive[1])).'% Free)</small></small>'; 
```

这一行给了我那个错误

我从[http://www.installgentoo.net/](http://www.installgentoo.net/)获得了这段代码， 它显然对他们有用。我正在使用 Windows，他们可能正在使用 linux

如果这是一个 Windows 问题，我怎么能做一些适用于 Windows 和 linux 的东西（它总是得到正确的 HDD，所以我不使用类似的东西，`disk_total_space("C:")`因为所有的网络服务器可能都没有它在 C 驱动器上。

如果您想要我正在使用的方法

```
function format_bytes($bytes){ 
    if ($bytes < 1024){ return $bytes; } 
    else if ($bytes < 1048576){ return round($bytes / 1024, 2).'KB'; } 
    else if ($bytes < 1073741824){ return round($bytes / 1048576, 2).'MB'; } 
    else if ($bytes < 1099511627776){ return round($bytes / 1073741824, 2).'GB'; } 
    else{ return round($bytes / 1099511627776, 2).'TB'; } 
} 

    function kb2bytes($kb){ 
    return round($kb * 1024, 2); 
} 

function calculate_percentage($used, $total){ 
    return @round(100 - $used / $total * 100, 2); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:58:14.773

该通知通知您，在

```
 $harddrive[2] 
```

**2**不是有效索引。

所以尝试通过以下方式检查：

```
if(isset($harddrive[2])) // do your magic with that... 
```

# javascript - 带有到期回调的jquery倒计时计时器？

> ID：16024491
> 
> 赞同：0
> 
> 时间：2013-04-15T20:50:45.267
> 
> 标签：javascript, jquery

我使用[keith-wood](http://keith-wood.name/countdown.html)插件生成计数计时器。
它工作正常，但是在使用回调选项时我遇到了问题

```
 $(document).ready(function(){ 

            function timerdone(){
                alert('welcome');
            }
                    $('#id').countdown({
                                 until: +300, 
                                 compact: true,
                                 onExpiry: timerdone,
                                 format: 'HMS'
                             });  
                }) 
```

对于上面的示例，它可以正常工作，但是将变量传递给回调函数时会出现问题，页面调用函数一旦加载

```
$(document).ready(function(){ 
                function timerdone(msg){
                    alert(msg);
                }
                        $('#id').countdown({
                                     until: +300, 
                                     compact: true,
                                     onExpiry: timerdone('welcome'),
                                     format: 'HMS'
                                 });  
                    }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T20:53:46.393

```
onExpiry: function() {
    timerdone('welcome');
}, 
```

不要调用您的函数，而是使用匿名函数将其作为引用传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T21:21:37.340

扩展@Brad M的答案-

您在 JS 中犯了一个相对常见的错误——而不是传递对函数的引用，而是调用它并传递它的返回值。

例如

```
// in the following, onExpiry is expecting a function reference 
// (also called a function handle). The function will be invoked
// later on.

...
onExpiry: timerdone,
// this worked fine, you were passing a reference to the function

onExpiry: timerdone(), 
// this MISTAKE is something many people do. It is invoking the function (with
// no arguments) and then sending the function's return value for <onExpiry>

onExpiry: timerdone('welcome'),
// this was your MISTAKE. Same as above, you're invoking the function instead
// of sending the function reference as is expected. You're invoking
// the function with 1 argument, but the argument isn't the issue. The issue
// is that you're invoking the function and sending its result (return
// value) as <onExpiry> 
// 
// There are different ways to fix it, @Brad's solution is a good one. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-12T11:04:23.760

```
var counter = $('#counter');

var due = new Date();
due.setHours(due.getHours()+24);
due.setSeconds(due.getSeconds() + 3);

var dueMinus24Hours = new Date(due);
dueMinus24Hours.setHours(due.getHours()-24);

var timeout = dueMinus24Hours-new Date();

setTimeout(function() {
    counter.countdown('option', { format: 'HMS' });
}, timeout);

counter.countdown({
        until: due,
        format: 'OD',
        padZeroes: true
    }); 
```

# java - 降雨图 - 文本字段填充数组

> ID：16024493
> 
> 赞同：0
> 
> 时间：2013-04-15T20:50:55.513
> 
> 标签：java, arrays, swing, jtextfield, jtextarea

我必须创建一个程序来接受当天的用户输入和当天的降雨量。我有 3 个课程 - 降雨查看器、降雨图表和降雨框架。到目前为止，在 Rainfall Frame 中，我已经创建了 GUI，并设置了动作侦听器以将用户输入添加到 JTextArea。但是，它只列出一个输入，我需要它列出 31 天全部初始化为 0，然后在用户输入月份的日期和降雨量时进行更新。

```
/**
 * Action listener class for reading in data and processing it
 * when the Add reading button is clicked.
 */
class AddReadingListener implements ActionListener
{
    public void actionPerformed(ActionEvent event)
    {
        // Fetch the new reading details
        int newDay = Integer.parseInt(dayEntryField.getText());
        double newRain = Integer.parseInt(rainEntryField.getText());
        // Clear the input
        dayEntryField.setText("");
        rainEntryField.setText("");
        dataArea.setText(newDay + ": " + newRain + " cm" + "\n");
    }
} 
```

目前，用户输入未存储在数组中。我在 Rainfall Chart 类中创建了数组。

```
/**
 * Constructor: initializes the rainfall array to 0s.
 */
public RainfallChart()
{
    rainfall = new double[32];    // 31+1 as will not use element 0
    for(int i=0;i<rainfall.length;i++)
    {
        rainfall[i] = 0;
    }
} 
```

在程序结束时，我需要它在文本区域中绘制一个关于用户提交的值的条形图。目前我想知道如何将用户输入从 Rainfall Frame 类中的 JTextField 传输到 Rainfall Chart 类中的数组。

编辑：

在降雨框架类中创建数组 -

```
private void getArray()
{
    int i;
    int[ ] a = new int[32];
    for(i=0;i<a.length;i++)
    {
        a[i] = Integer.parseInt(rainEntryField.getText());
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:02:23.943

你可以做这样的事情......

在类雨帧类中创建一个数组（例如“a”），并在其中存储每 31 天的降雨量值...

在类雨量图表中创建类雨量框架的对象...

使用对象访问数组'a'元素使用对象...

# javascript - 将 JS 数组传递给新数组

> ID：16024501
> 
> 赞同：1
> 
> 时间：2013-04-15T20:51:32.613
> 
> 标签：javascript

对不起，非常基本的问题，我是新来的。

如果我有一个数组并将其传递给一个新变量（newArray = oldArray），然后从 newArray 中删除一个元素，它似乎也会影响 oldArray。

我的猜测是它只是创建了对同一变量的新引用，因此存储在 oldArray 中的数据现在有两个标识符？

如果是这样，我实际上如何将 oldArray 中的元素传递到 newArray 中，以便 newArray 独立于 oldArray？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:53:32.307

> 我的猜测是它只是创建了对同一变量的新引用，因此存储在 oldArray 中的数据现在有两个标识符？

对，你的新变量和旧变量都指向*同一个*数组。通过一个引用（变量）对数组进行的操作通过另一个引用自然可见，因为只有一个数组。

为避免这种情况，您必须制作数组的*副本*。有几种方法可以做到这一点，其中一种是使用[`slice`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice)：

```
var newArray = oldArray.slice(0); 
```

`slice`返回从给定索引开始的数组的浅表副本。如果你给它 index `0`，它会复制整个数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T20:53:18.367

最快的方法是使用数组函数返回一个新的数组实例。通常，我使用：

```
var newArray = oldArray.slice(0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T20:53:21.843

在这种情况下，您必须使用 slice 方法克隆数组：

```
newArray = oldArray.slice(0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T20:53:27.430

正如您所了解的，当您复制数组变量时，您复制了对原始变量的引用。

这是制作真实副本的一个习惯 -从第一个元素请求[切片](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice)

```
 var newArray = oldArray.slice(0); 
```

# java - 如何处理用户而不是处理 IP 地址？

> ID：16024502
> 
> 赞同：1
> 
> 时间：2013-04-15T20:51:35.677
> 
> 标签：java, p2p

我打算用 Java 7 编写一个 P2P 聊天应用程序，其中我们有一个联系人列表（就像在 Skype 之类的应用程序中一样）。然后，我们可以要求每个连接的联系人开始聊天会话（就像在 Skype 中一样）。但是 Java Socket 实现要求我们提供另一个端点的 Ip-Adress。这导致我有两个主要问题：

*   管理动态 IP 地址：特别是在其他端点用户连接之前
*   管理其他用户每次都可以简单地使用另一台计算机的事实

那么，你能建议我什么解决方法？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T20:57:50.313

用户应该使用一些 ID 来标识自己，例如使用电子邮件地址或登录名。

您必须在系统中创建一些“固定点”，例如给定的 IP 地址或域名，客户端可以在其中注册自己（您可以在那里存储用户 ID）。

每次更改 IP 地址时，客户端都会在服务器上更新它，因此请求联系信息的其他客户端将获得新的 IP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T06:06:24.637

您可以依靠一些外部基础设施进行识别。例如，可以使用 OpenPGP 签名的消息和密钥来识别发送者。PGP 密钥经过签名和信任，并且存在用于验证的 PGP 密钥集中存储库。在这种情况下，IP 地址无关紧要，但发件人仍然需要知道将消息发送到哪里，即您仍然需要一个目录（一些具有已知地址的服务器）来维护 IP<->用户映射。

# c# - 模拟数据访问层 Rhino mock

> ID：16024506
> 
> 赞同：0
> 
> 时间：2013-04-15T20:51:49.737
> 
> 标签：c#, unit-testing, mocking, rhino-mocks

如何使用 Rhino 模拟模拟数据访问层我有以下类：

```
 public interface IDataAccess
{
    int ExecuteNoneQuery(SqlConnection connection, string storedProcedureName,
                         IEnumerable<SqlParameter> sqlParameters);

}

public class DataAccess : IDataAccess
    {
     public int ExecuteNoneQuery(SqlConnection connection, string storedProcedureName,
                                    IEnumerable<SqlParameter> sqlParameters)
      {
         using (SqlCommand command = connection.CreateCommand())
        {
                // do some stuff
                return command.ExecuteNonQuery();

        }
    }
}

 public class DbOperation<T>
    {
        private IDataAccess _access;

        public DbOperation(IDataAccess access)
        {
            _access = access;
        }

        public int Insert(T item, SqlConnection connection,string spName)
        {
            IDbObjectFactory<T> parametersFactory = new SqlParameterFactory<T>();
            var parameters = (IList<SqlParameter>)parametersFactory.GetDbObject(item);
            return _access.ExecuteNoneQuery(connection, spName, parameters);
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T20:49:00.997

这是一个带有一些解释的示例：

测试案例：
WHEN`ExecuteNoneQuery`类的方法`DataAccess`被调用
THEN`command.ExecuteNonQuery()`应该被调用：

```
// 1\. Create `SqlCommand` Mock:
var command = MockRepository.GenerateMock<SqlCommand>();

// 2\. Create `SqlConnection` Stub:
var connection = MockRepository.GenerateStub<SqlConnection>();

// 3\. Setup connection.CreateCommand() to return mocked command:
connection
    .Stub(c => c.CreateCommand())
    .Return(command);

// 4\. Do test action:
var dataAccess = new DataAccess();
dataAccess.ExecuteNoneQuery(connection, null, null);

// Assert command.ExecuteNonQuery() has been called:
command.AssertWasCalled(c => c.ExecuteNonQuery()); 
```

希望能解释一下如何使用 Rhino Mock。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T10:26:45.277

我假设您想通过模拟 DataAccess 来测试 DbOperation。

```
public void TestInsert()
    {
        var dataAccess = MockRepository.GenerateMock<IDataAccess>();

        var dbOperation = new DbOperation<string>(dataAccess);
        var sqlConnection = new SqlConnection();
        dbOperation.Insert("blah", sqlConnection, "MySP");

        dataAccess.AssertWasCalled(a => a.ExecuteNoneQuery(
            Arg.Is(sqlConnection), 
            Arg.Is("MySP"), 
            Arg<IEnumerable<SqlParameter>>.Is.Anything));
    } 
```

理想情况下，您甚至可能想要注入`IDbObjectFactory<T>`，以便您可以测试 DbOperation 和 sqlParameterFactory 之间的交互 ​​- 因此您还可以检查是否`ExecuteNoneQuery`使用 sqlParameterFactory 将返回的确切参数调用。

# web-applications - 如何获取主页喜欢的页面列表（粉丝页面）？

> ID：16024512
> 
> 赞同：1
> 
> 时间：2013-04-15T20:52:06.657
> 
> 标签：web-applications, facebook-like, facebook-page

在 Facebook 页面（即页面 ​​XYZ）中，时间线中的元素之一是“喜欢”框，显示 XYZ 喜欢的页面。此框中通常有一个“查看全部”的链接，您可以在其中查看所有页面的列表（链接指向：[https](https://www.facebook.com/browse/fanned_pages/?id=xxx) ://www.facebook.com/browse/fanned_pa​​ges/?id=xxx ）

我应该使用 API 的哪个字段/连接来检索此页面列表？我在 API 文档中查找了它，但找不到我应该用来获取它的字段/连接。

非常感谢，古斯塔沃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T22:40:32.097

我不确定它是否在文档中，但它是对使用访问令牌的调用 ，它以 JSON 格式返回喜欢`/<PAGE ID>/likes`的事物列表以及页面的名称、ID 和类别`<PAGE ID>`

例子：`https://graph.facebook.com/278905338821044/likes?access_token=<ACCESS TOKEN>`

```
{
  "data": [
    {
      "category": "Internet/software", 
      "name": "Facebook Security", 
      "id": "31987371885"
    }, 
 // removed the rest
} 
```

# sql-server - MS Access 中的链接表需要一个超链接列

> ID：16024515
> 
> 赞同：3
> 
> 时间：2013-04-15T20:52:31.197
> 
> 标签：sql-server, ms-access, linked-tables

我最近将一个表从 MS Access 2003 移到 SQL Server 2005 中。然后在 Access DB 中，我创建了一个链接到 SQL Server 中的表的链接表以替换原始表。

到目前为止，一切都很好。除了一个例外。有几个列在 Access 中具有超链接数据类型，但现在是 VARCHAR(MAX)。从我从在线研究中可以看出，没有办法将链接表中的一列更改回超链接。

所以我要问的是 1) 有谁知道得更好吗？可以将链接表中的列改回超链接吗？或 2) 有没有人知道一个好的解决方法？用户的应用程序似乎需要超链接数据类型才能正常工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T21:39:32.790

作为一种解决方法，将链接存储在 SQL Server 文本字段中，格式为*"display text#URL#"*，例如。...

```
Stack Overflow#https://stackoverflow.com/# 
```

然后使用带有绑定到该文本字段的文本框的表单，并将文本框的*Is Hyperlink*属性设置为*Yes*。

这可能不是你的想法。但由于 SQL Server 不提供与 Access 的超链接数据类型对应的对象，因此这是我发现的最佳解决方法。

# node.js - 动态异步并行任务

> ID：16024516
> 
> 赞同：0
> 
> 时间：2013-04-15T20:52:37.523
> 
> 标签：node.js, asynchronous, coffeescript

语境：

我获取了一些“用户”。我想在返回响应之前了解更多关于这些特定用户的信息，因此我获取所有用户的详细信息并将其添加到结果中......然后在所有请求完成后返回结果。我在使用`parallel`通话时遇到问题：

```
async = require 'async'

# Assume I don't know how many users are here. Test data.
users = [
    name: 'user1'
  ,
    name: 'user2'
]

# Fake add some extra data to the user.
fetchUser = (name, cb) ->

  setTimeout (->
    user = 
      name: name
      email: name + '@email.com'
    cb user
  ), 1 * 1000

fetchUsers: (userList, cb) ->

  result = 
    count: userList.length 
    users: []

  # runInParallel = []
  # for user in userList
  #   fetchUsers(user.name) # Yea, not going to work either.
  #
  # async.parallel runInParallel

  async.parallel [
    fetchUser('user1') # Yea, how do I build an array of a function?
    fetchUser('user2')
  ], (err, user) ->
    #console.log 'returned user ' + user.name # If this calls back once, then this won't work....
    if !err
      result.users.push user

    cb result

# Do it.
fetchUsers users, (result) ->
  console.log result 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:33:18.300

你可以简单地做一张地图。我用本机 js 编写它，但你明白了。

```
var usersFetchFunctions = users.map(function (user) {
  return function () { ... }
});

async.parallel(usersFetchFunctions, function (err) { ... }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T21:40:54.457

不要使用 async.parallel，使用 async.each [http://caolan.github.io/async/docs.html#each](http://caolan.github.io/async/docs.html#each)

```
async.each userList, fetchUser, (err, users) -> 
```

# iphone - 对我的应用程序中的按钮进行排序，类似于 iOS 多任务处理

> ID：16024518
> 
> 赞同：-3
> 
> 时间：2013-04-15T20:52:40.993
> 
> 标签：iphone, ios, swipe

我想将按钮动态添加到我的应用程序的特殊区域。用户可以向左或向右滑动以在按钮之间导航，就像在 iOS 多任务中一样。

![在此处输入图像描述](https://i.stack.imgur.com/qfWoa.jpg)

我只想创建一个与 iOS 多任务处理完全相同的区域。我怎样才能做到这一点？我将使用哪些组件，如何在 google 中搜索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:47:50.387

多任务区域是一个带有 pagingEnabled = YES 的 UIScrollView。您可以使用集合视图来填充滚动视图，也可以自己手动布置内容。如果会有很多动态内容，那么集合视图可能是要走的路，因为它完成了表格视图所做的可重用单元格的事情。

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html)

# service - 使用 C# 在 ssl 上的 web 服务 (asmx)

> ID：16024522
> 
> 赞同：0
> 
> 时间：2013-04-15T20:53:03.880
> 
> 标签：service, web

我有一个调用各种 Web 服务的 Web 应用程序。目前我没有任何 ssl 连接。我想使用ssl。

我的问题是哪种方式最好使用 ssl 1\. 每当请求到来时，验证凭据反抗客户端是否更好？或 2\. 一旦认证证书并用于 subsequest Web 服务调用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T16:44:07.907

据我所知，asmx Web 服务是无状态的，因此您可以尝试创建一个登录方法，该方法可以返回使用 md5 或任何加密算法加密的安全令牌，并在您的方法中传递该令牌，您可以使用各种安全算法看，没有必要在每个方法中要求登录名和密码，您也可以考虑在 auth 令牌上实施和过期策略。

关于 ssl，您只能在登录方法中配置，我认为不需要后续方法。

还有另一种方法可以实现 HMAC 您可以只生成一次然后您可以将 HMAC 签名附加到请求并验证该请求，如果服务器计算的签名与 on 匹配，则需要保存该计算的签名message 表示该消息已被授权。

有关更多信息，您可以查看[这篇文章](http://www.piotrwalat.net/hmac-authentication-in-asp-net-web-api/)，我认为适用于 aspx Web 服务

# css - 更改超链接的 CSS 选择器

> ID：16024523
> 
> 赞同：0
> 
> 时间：2013-04-15T20:53:08.537
> 
> 标签：css

我想在我的代码中使用 Style 标记更改超链接的 CSS 选择器，但不知道该怎么做。

我知道我可以使用具有类似语法的外部 CSS

```
a:link {color:#FF0000;} 
```

但是我想在 span 元素的 style 属性中使用它，比如

```
<span class="Button1a" style="padding: 15px 20px; a:color: #fff;">
<span class="Button1a" style="padding: 15px 20px; a.color: #fff;">
<span class="Button1a" style="padding: 15px 20px; a>color: #fff;">
<span class="Button1a" style="padding: 15px 20px; color: #fff;"> 
```

以上似乎都不适合我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T20:55:17.513

您在 withing`style`属性中使用了不正确的选择器。

```
style="padding: 15px 20px; a:color: #fff;">
                           ^ 
```

像这样使用它

```
<span class="Button1a" style="padding: 15px 20px; color: #fff;"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T20:55:34.567

该选择器匹配`<a>`标签，但您有`<span>`元素。无论哪种方式，您的`style`属性只需要包含选择器块的内容：

```
<span class="Button1a" style="padding: 15px 20px; color: #fff;"> 
```

我不建议将属性放置在属性内`style`。它不能很好地扩展并且难以维护。改用样式表：

```
.Button1a {
    padding: 15px 20px;
    color: #fff;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T20:55:53.023

Fis of all element`style`仅适用于该元素，您无法以这种方式更改子样式。

仅更改继承的值

仅针对您的特定问题的解决方案：

```
<span id="parent">
    <a href="#" style="color: #000">Link</a>
</span> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T21:01:12.800

部分解决方案，因为它不能直接完成。
您必须以某种形式的 CSS`color: inherit;`附加到`a`要修改的标签。包括在内，您可以使用以下方法修改它的颜色：

```
<span style="color: #fff;">
    <a href="#">Link</a>
</span> 
```

# jquery - 在轮播/滑块中的特定幻灯片图像上播放音频剪辑？

> ID：16024528
> 
> 赞同：0
> 
> 时间：2013-04-15T20:53:28.223
> 
> 标签：jquery

我有一个带有 3 张图像的基本滑块。在这 3 个图像中，我有 1 个动画 gif，其中还有一个与之链接的音频剪辑。我希望只有在动画 gif 幻灯片出现时才能播放音频剪辑（音频剪辑只有 3 秒长）。我将如何在 jQuery 中解决这个问题？

HTML：

```
<div id="carousel-main" class="carousel slide">
  <div class="carousel-inner">
    <div class="active item">
       <img src="image-1.jpg" alt="">
    </div>
    <div class="item">
       <img src="animated.gif" alt="">
       <embed src="audio/clip.mp3"></embed>
    </div>
    <div class="item">
       <img src="image-3.jpg" alt="">
    </div>
  </div>
</div> 
```

JS：

```
$('#carousel-main').carousel({interval: 3200}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:29:41.100

首先，转换`embed`成`audio`... 如果你要使用 HTML5 标记，不妨让它正确。

```
<audio src="audio/clip.mp3"></audio> 
```

其次，试试这个功能：

```
function playClip(){
    if($('.item').eq(1).hasClass('active')){
         $(this).next().get(0).play();
    }
} 
```

如果正确的幻灯片处于活动状态，这将播放剪辑，但您需要将此调用与轮播的旋转同步：

```
window.setInterval(playClip,3200); 
```

理论上，这应该将音频与轮播同步，每次轮播移动时运行该函数，如果第二个处于活动状态，则播放剪辑。未经测试，但应该可以工作。

# java - Java读取.csv文件并获取java.lang.ArrayIndexOutOfBoundsException：3并且不知道为什么

> ID：16024537
> 
> 赞同：0
> 
> 时间：2013-04-15T20:53:59.203
> 
> 标签：java, arrays, csv, indexoutofboundsexception

我正在为我正在尝试完成的程序撞墙。我确定答案很简单，但我就是想不出解决方案。

当我写入 csv 文件时它可以工作，但是从它读取时，如果 csv 文件中有 3 个以上的对象，我会收到 ArrayIndex 错误，但三个或更少，它不会引发错误。

以下是我写入文件的代码：

无效 saveDataToFile() {

```
 String op = "";

    try {
        FileWriter fw = new FileWriter(filename);
        for (int i =0 ; i< library.length ; i++)
            if(library[i]!=null)
            fw.write(library[i].getDetailsCSV().toString()+"\n");
        fw.write(op.toString());
        fw.close();
    }
    catch(Exception e) {
        System.out.println("ERROR : "+e);
    }
    System.out.println("saveDataToFile()");

} 
```

下面是读取文件的代码：

无效加载数据从文件（）{

```
 try{
        File fi = new File(filename);
        FileReader fr = new FileReader(fi);
        char[] buffer = new char[(int)fi.length()];
        fr.read(buffer);
        fr.close();

        String all = new String(buffer);
        String[] ip = all.split("\n");

        for (int i=0; i<ip.length; i++){ 
            String[] op = ip[i].split(",");

            String author = op[0];
            String title = op[1];
            int isbn = Integer.parseInt(op[2]);
            String s = op[3];
            boolean h = Boolean.parseBoolean(op[3]);

            for(int j=0; j<op.length; j++){
                if(author.equals("Dickens"))
                    library[i] = new title(author,isbn);
                else if(author.equals("Lumas"))
                    library[i] = new title(author,isbn,s);
                else if(author.equals("Orwell"))
                    library[i] = new title(author,isbn,h);

            }
        }

    }
    catch(Exception e) {
        System.out.println("ERROR : "+e);
    }
            System.out.println("loadDataFromFile()");
    } 
```

library[] 数组的大小为 10。我尝试了 System.out.println(op.length); 和 System.out.println(ip.length); 从 read 方法和 ip.length 是 10 和 op.length 是 3 （不管有多少对象实际保存到 csv 文件，即即使它已满）。

如果有人能看到我明显遗漏的东西，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:57:50.583

我猜这个循环正在打破它：

```
 for(int j=0; j<op.length; j++){
            if(make.equals("Ford"))
                cars[i] = new Ford(model,year);
            else if(make.equals("Mazda"))
                cars[i] = new Mazda(model,year,colour);
            else if(make.equals("Toyota"))
                cars[i] = new Toyota(model,year,h);

        } 
```

如果您的行数超过 3 行，则此循环将失败，因为您使用的是 i 而不是 j。不确定这个循环试图做什么，但那部分肯定会失败。

此外，如果 op.length 为 3，则索引 3 将不存在，因为 Java 数组的索引是从 0 而不是 1。

# c++ - “未定义的函数引用”但在标题中定义并与库链接！Eclipse 和 Mingw

> ID：16024539
> 
> 赞同：1
> 
> 时间：2013-04-15T20:54:04.913
> 
> 标签：c++, eclipse, mingw, linker-errors

我正在尝试构建一个具有许多依赖项的项目。为简单起见，假设 2 个项目“数学”和“物理属性”依赖于“数学”。这些项目构建在库静态和 dll 中。所以我们需要获取 libMathematics.a、Mathematics.dll、libPhysicalProperties.a 和 .dll .. .所以“PhysicalProperties”需要Boost和libMathematics.a ...我正在使用Eclipse Indigo，工具链是MingW 4.5.0。

“数学”的构建工作但不是“物理属性”的构建，它给出了链接器错误：“数学”中的“未定义的函数引用......”

我检查了依赖关系，但一切正常，函数确实被声明和定义，并且库数学被链接。我还检查了 libMathematics.a 中的符号，发现了链接器没有找到的函数......所以如果你有想法，我会很高兴读到你吗？以下是构建时的错误：

```
//===========================================================================

Building file: ../WaveTools.cpp
Invoking: GCC C++ Compiler
g++ -I"C:\Users\StageTahar\Desktop\Lucid\Common\Includes" -I"C:\Boost/include/Boost-1_49/" -O0 -g3 -Wall -c -fmessage-length=0 -MMD -MP -MF"WaveTools.d" -MT"WaveTools.d" -o "WaveTools.o" "../WaveTools.cpp"
Finished building: ../WaveTools.cpp

Building target: ElectromagneticWave.dll
Invoking: GCC C++ Linker
g++ -s -L"C:\Users\StageTahar\Desktop\Lucid\Common\Libraries" -L"C:\Boost/lib" -shared -Wl,--out-implib=libElectromagneticWave.a -o "ElectromagneticWave.dll"  ./ElectromagneticWaveImplementation.o ./WaveTools.o   -lMathematics -lboost_wserialization-mgw45-mt-d-1_49
./ElectromagneticWaveImplementation.o: In function `ZNK11JonesVectorIfE12getIntensityEv':
C:\Users\StageTahar\Desktop\Lucid\Engines\ElectromagneticWave\Debug/../WaveDefinitions.h:124: undefined reference to `float norm<float>(ComplexT<float> const&)'

//========================================================================================= 
```

# android - JSON 数据未加载到自定义列表视图中

> ID：16024542
> 
> 赞同：0
> 
> 时间：2013-04-15T20:54:15.847
> 
> 标签：android, json, android-listview, android-custom-view

我无法使用我的 json 响应加载自定义列表视图。这是我的代码。

```
// my activity

public class LocalExploreActivity extends Activity {

ListView lvEvents;
    JSONAdapter adapter;

    JSONArray eventResponseArray; 

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_local_explore);
lvEvents = (ListView) findViewById(R.id.eventsList);
    adapter = new JSONAdapter (LocalExploreActivity.this,eventResponseArray);
    lvEvents.setAdapter(adapter);

}

private void getEventsList() throws JSONException {

    JSONObject jsonObjSend = new JSONObject();
    JSONObject jsonObjRecv = HttpGetClient.SendHttpPost(URL);

    eventResponseArray = jsonObjRecv.getJSONArray("events");
    System.out.println("events array issssssssssss "+eventResponseArray);
    System.out.println("array len "+eventResponseArray.length());
    JSONObject parkObj;
    JSONObject activityObj;
    JSONArray sessionArray;

    for (int i = 0; i < eventResponseArray.length(); i++) {
        JSONObject eventDetails = eventResponseArray.getJSONObject(i);

        parkObj = eventDetails.getJSONObject("park");

        activityObj = eventDetails.getJSONObject("activity");

        eventName = eventDetails.getString("name");
        System.out.println("the eventName is 33333 "+eventName);

        eventFee = eventDetails.getString("fee");
        System.out.println("the eventFee is 33333 "+eventFee);

        SharedPreferences prefs = getPreferences(MODE_PRIVATE);
        EventModel.PREF_EVENTNAME = prefs.getString(eventName, eventName);

        EventModel.PREF_EVENTFEE = prefs.getString(eventFee, eventFee);

    }
}

}

// my Adapter

public class JSONAdapter extends BaseAdapter implements ListAdapter{

private final Activity activity;
private final JSONArray jsonArray;

protected JSONAdapter (Activity activity, JSONArray jsonArray) {
    assert activity != null;
    assert jsonArray != null;

    this.jsonArray = jsonArray;
    this.activity = activity;
}

@Override public int getCount() {
    if(null==jsonArray) 
        return 0;
    else
        return jsonArray.length();
}

@Override public JSONObject getItem(int position) {
    if(null==jsonArray) return null;
    else
        return jsonArray.optJSONObject(position);
}

@Override public long getItemId(int position) {
    JSONObject jsonObject = getItem(position);

    return jsonObject.optLong("id");
}

@Override public View getView(int position, View convertView, ViewGroup parent) {
    if (convertView == null)
        convertView = activity.getLayoutInflater().inflate(R.layout.custom_events_list, null);

    TextView txtEventName = (TextView)convertView.findViewById(R.id.eventTitleTV);
    TextView txtEventFee = (TextView)convertView.findViewById(R.id.eventPriceTV);  

    JSONObject json_data = getItem(position);  
    System.out.println("the json data received is 111111111 "+json_data);
    if(null!=json_data ){
        String eventName = null;
        String eventFee = null;
        try {
            eventName = json_data.getString("name");
            eventFee=json_data.getString("fee");
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        txtEventName.setText(eventName); 
        txtEventFee.setText(eventFee);
    }

    return convertView;
}

} 
```

当我在调试模式下运行应用程序并检查以下代码中的值时，adapter = new JSONAdapter (LocalExploreActivity.this,eventResponseArray);

数组为空。需要帮忙！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:00:49.157

您似乎没有在`eventResponseArray`任何地方初始化，所以它当然是空的。

# grails - 如何避免 GSP 中的 groovy 代码？

> ID：16024553
> 
> 赞同：1
> 
> 时间：2013-04-15T20:55:01.537
> 
> 标签：grails, gsp

我必须根据超过 4 行 groovy 代码的某些逻辑来显示复选框是否选中...我不喜欢在 GSP 页面中编写它..有任何 taglib 或某种方式我可以提取GSP 页面之外的逻辑。我可以在其中访问模型对象和请求对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T23:59:12.017

TagLib 是放置逻辑的好地方，您可以将所需的属性作为属性传递并进行测试：

```
class MyTagLib {
  static namespace = "my"

  def somecheckbox= { attrs ->
      def model = attrs.remove('model')
      if() { //tests goes here
          //you can also test if you need to mark the checkbox as checked
          if() {
              attrs.checked = "checked"
          }
          out << g.checkbox(attrs: attrs) //remaining attrs will be applied to the checkbox
      }
  }

} 
```

**我的视图.gsp**

```
<my:somecheckbox model="${model}" name="checkboxname" value="${checkboxValue}" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T14:29:56.710

你有（至少）3个选项：

**模型属性**

如果您只是为单个页面或单个控制器执行复杂逻辑，请执行控制器方法中的逻辑并通过布尔值将布尔结果传递给视图：

```
// in your controller
def myAction() {
    [shouldDrawCheckbox: shouldDrawCheckBox(...)]
}

private boolean shouldDrawCheckBox(/* info for decision making */) {
    // decision making
} 
```

**服务方式**

如果您要从多个控制器访问相同的逻辑，您可以将`shouldDrawCheckBox`方法提取到服务中，然后再次将结果传递给模型。

```
class MyController {
    def myService

    def myAction() {
        [shouldDrawCheckbox: myService.shouldDrawCheckbox(...)]
    }
}

class MyService {
    boolean shouldDrawCheckBox(...) {
        // logic!
    }
} 
```

**自定义标签库**

如果您想避免通过模型传递决策，或者如果逻辑更普遍适用，您可以创建自定义标记库。

```
class MyTaglib {
    static namespace = "my"

    def myCheckbox = { attrs ->
        // extract decision info from the attrs
        // perform logic with info
        if (shouldDrawCheckbox)
            out << g.checkbox(attrs: attrs)
        }
    }
} 
```

在您看来：

```
<my:myCheckbox whateverYourAttribsAre="value" name="..." value="..."/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T21:05:31.817

理想情况下，逻辑应该转到gsp 并在对象`renders`中设置标志的控制器。`model`如果 gsp 是模板的子级，则标志必须通过。当我们在 grails 中有适当的绑定框架时，​​视图层中的 DOM 操作并不理想。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T21:05:50.643

使用`g:`命名空间。[http://grails.org/doc/2.2.x/ref/Tags/checkBox.html](http://grails.org/doc/2.2.x/ref/Tags/checkBox.html)

```
<g:checkBox name="myCheckbox" value="${condition}" /> 
```

没有比这更简单的了。所有的逻辑都应该在控制器内部完成。

您在页面上需要的所有数据都可以由控制器传递。只需返回一个`Map`.

```
class MyController {
    def index() {
        def someCondition = true
        [request:request, condition:someCondition]
    }
} 
```

# php - PHP MySQL 查询 - 加法

> ID：16024558
> 
> 赞同：2
> 
> 时间：2013-04-15T20:55:22.213
> 
> 标签：php, mysql, formulas

我正在研究一个公式，我根据其他单元格的值在一行和一列中添加多个值。例如，我有以下工作代码：

```
$result = mysql_query("SELECT School,SUM(Wins + Losses) as total FROM tennis GROUP BY School");
 echo "<table border='1'>
<tr>
<th>School</th>
<th>Score</th>
</tr>";

while($row = mysql_fetch_array($result))
  {
  echo "<tr>";
  echo "<td>" . $row['School'] .  "</td>";
  echo "<td>" . $row['total'] .  "</td>";
  echo "</tr>";
  } 
```

但是，我想添加更多列，这些列也是其他行/列的总和，并且不知道如何执行此操作，同时仍将所有内容按“学校”列分组。我本质上想要的是以下内容，但代码不正确：

```
$result = mysql_query("SELECT School,SUM(Wins + Losses) as 1sttotal FROM tennis WHERE Event='1st Singles', SUM(Wins + Losses) as 2ndtotal FROM tennis WHERE Event='2nd Singles' GROUP BY School");
 echo "<table border='1'>
<tr>
<th>School</th>
<th>1st Singles</th>
<th>2nd Singles</th>
</tr>";

while($row = mysql_fetch_array($result))
  {
  echo "<tr>";
  echo "<td>" . $row['School'] .  "</td>";
  echo "<td>" . $row['1sttotal'] .  "</td>";
  echo "<td>" . $row['2ndtotal'] .  "</td>";
  echo "</tr>";
  } 
```

我是 PHP 新手，所以我不确定设置它的正确/最佳方式。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:58:31.537

这是您应该用来获取 2 个总数的查询：

```
SELECT 
    School,
    SUM(IF(Event='1st Singles', Wins + Losses, 0)) as 1sttotal,
    SUM(IF(Event='2nd Singles', Wins + Losses, 0)) as 2ndtotal
FROM tennis 
GROUP BY School; 
```

看看它是如何根据`event`列添加的？诀窍是通过条件执行（ ）在子句中传递`WHERE`过滤器`SELECT``IF`

其他可能性使用`CASE WHEN`：

```
SELECT 
    School,
    SUM(
        CASE 
            WHEN Event='1st Singles' THEN Wins + Losses
            ELSE 0
        END
    ) as 1sttotal,
    SUM(
        CASE 
            WHEN Event='2nd Singles' THEN Wins + Losses
            ELSE 0
        END
    ) as 2ndtotal
FROM tennis 
GROUP BY School; 
```

# .net - .NET 用实际值替换占位符文本的最有效方法？

> ID：16024559
> 
> 赞同：6
> 
> 时间：2013-04-15T20:55:25.303
> 
> 标签：.net, replace

我有一个要发送给许多用户的模板文本（简报文本）；在文本中有一些占位符，如{{firstname}}、{{lastname}}等。

`.Replace(..)`用实际值、连接或`RegExp`或其他方法替换占位符会更有效 吗？

.NET 语言。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T21:01:02.190

由于您将`.Replace()`多次调用，因此使用它可能更有效`StringBuilder.Replace()`，因为`StringBuilder`它[针对多次修改进行了优化](http://msdn.microsoft.com/en-us/library/3h5afh4w.aspx)。

如果您在占位符的格式方面具有灵活性，我认为[DotLiquid](http://dotliquidmarkup.org/)将是一个很好的选择。他们可能已经针对这种情况优化了文本处理，尽管它还支持其他高级语法，因此可能存在开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-23T19:44:32.623

我最近测试了比较标准的 dotnet 方式

1.  `string.Replace.Replace.Replace`- 内存效率最低，但略快于`StringBuilder`

2.  `StringBuilder.Replace.Replace.Replace`2 倍内存效率，`string.Replace`但速度稍慢

3.  `string.Format("{0},{1},{2}", x, y, z)`与内存效率相比，内存效率降低了约 20%，`StringBuilder`但速度提高了 2 倍以上`string.Replace.Replace.Replace`

# mysql - 跨多个相似视图的 MySQL 查询

> ID：16024562
> 
> 赞同：1
> 
> 时间：2013-04-15T20:55:41.040
> 
> 标签：mysql, sql, reporting

我正在尝试编写一个复合许多 MySQL 视图的查询。我使用的 MySQL 版本是 Amazon 的 AWS RDS 服务提供的最新版本。这些视图如下所示：

视图 1：“AAA 事件计数”

*   Col1：时间戳
*   Col2：计数

视图 2：“BBB 事件计数”

*   Col1：时间戳
*   Col2：计数

我有大约 100 个这样的观点。

我想要一个查询，使这些数据看起来像这样：

*   Col1：时间戳
*   Col2：计数
*   Col3：事件类型

这意味着数据将如下所示：

```
2013-01-01T00:00:00Z    10     BBB
2013-01-01T00:00:00Z    10     AAA
2013-04-10T00:00:00Z    26     AAA
2013-04-10T00:05:00Z    28     AAA 
```

时间戳不会是唯一的，但时间 + 事件类型的组合是唯一的。

我尝试了各种各样的方法，但没有什么能满足我的需求。性能不是问题，因为这些是摘要报告，而不是 OLTP 查询。

有什么建议可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T23:36:52.860

从 View1 中选择 Col1、Col2、“AAA”作为 Col3

联合所有

从 View2 中选择 Col1、Col2、“BBB”作为 Col3

联合所有

从 View3 中选择 Col1、Col2、“CCC”作为 Col3

联合所有

. . .

等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T17:40:34.343

在上面的人的帮助下，最终结果如下所示：

```
Select * from 
(
  (SELECT PointInTime, (Col1+Col2+Col3) as Failures, "ApiName1" FROM Table1)
  union all 
  (SELECT PointInTime, (Col1+Col2+Col3) as Failures, "ApiName2" FROM Table2)
  order by PointInTime
) as X; 
```

子查询的使用让我可以根据需要确定最终的列名。

这给出的结果如下所示：

```
PointInTime    FailedBuckets     API
2013-01-01            0          ApiName1
2013-01-01            1          ApiName2
2013-01-02            0          ApiName1
2013-01-02            1          ApiName2 
```

# .net - 来自自定义控件的 wpf 依赖属性错误

> ID：16024565
> 
> 赞同：1
> 
> 时间：2013-04-15T20:56:01.993
> 
> 标签：.net, wpf, vb.net, custom-controls, dependency-properties

我有一个依赖属性，它是基于文本框的自定义控件的一部分：在 wpf 4.5、vb.net 4.5、Visual Studio 2012 中。

这是属性声明：

```
#Region "DEPENDENCY PROPERTIES -- ItemsSource"
    Public Property ItemsSource As IEnumerable
        Get
            Return GetValue(ItemsSourceProperty)
        End Get
        Set(ByVal value As IEnumerable)
            SetValue(ItemsSourceProperty, value)
        End Set
    End Property
    Public ReadOnly ItemsSourceProperty As DependencyProperty = DependencyProperty.Register( _
                    "ItemsSource", GetType(DependencyObject), GetType(AutoCompleteTextBox), _
                    New FrameworkPropertyMetadata(Nothing, FrameworkPropertyMetadataOptions.None, _
                    New PropertyChangedCallback(AddressOf OnItemSourceChanged)))
#End Region 
```

然后我在一个小示例项目中声明自定义控件进行测试（自定义控件在同一个项目中的另一个项目中）

这是带有自定义控件的主窗口的 xaml：

```
<Window x:Class="MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:krisis="clr-namespace:Krisis.Controls;assembly=Krisis.Controls"
    Title="MainWindow" Height="350" Width="525" x:Name="MyWindow"
    DataContext="{Binding RelativeSource={RelativeSource Self}}">
    <Grid>
        <krisis:AutoCompleteTextBox ItemsSource="{Binding Collection, Mode=TwoWay}"  Width="497" MinHeight="35" FontSize="18" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="10,41,10,243"/>
    </Grid>
</Window> 
```

但是 xaml 编辑器在 customcontrol 行下划线并抛出以下错误：

> 错误 1 ​​无法在“AutoCompleteTextBox”类型的“ItemsSource”属性上设置“绑定”。只能在 DependencyObject 的 DependencyProperty 上设置“绑定”。

有人可以帮我解决导致此错误的原因吗，我无法弄清楚我的依赖属性声明在哪里出错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:04:44.200

`DependencyProperty`必须`Shared`在`VB`或`Static`在_`C#`

例子：

```
Public Property ItemsSource As IEnumerable
    Get
        Return GetValue(ItemsSourceProperty)
    End Get
    Set(ByVal value As IEnumerable)
        SetValue(ItemsSourceProperty, value)
    End Set
End Property

Public Shared ReadOnly ItemsSourceProperty As DependencyProperty = DependencyProperty.Register( _
                "ItemsSource", GetType(DependencyObject), GetType(AutoCompleteTextBox), _
                New FrameworkPropertyMetadata(Nothing, FrameworkPropertyMetadataOptions.None, _
                New PropertyChangedCallback(AddressOf OnItemSourceChanged))) 
```

# java - 从模板生成 HTML 电子邮件

> ID：16024567
> 
> 赞同：3
> 
> 时间：2013-04-15T20:56:25.997
> 
> 标签：java, html, xml, email, birt

我正在开发应用程序需要生成用户特定电子邮件的功能。这将使用电子邮件模板在用户级别进行设置或配置，该模板基本上包含 SQL 查询、列模型、数据类型、主题、页眉、页脚等。该模板用作电子邮件的数据集和布局。

现在使用这个 XML 模板，我需要生成 HTML 电子邮件。应用程序将读取 XML，执行 SQL 查询，然后将结果集与列模型匹配。超出此; 是否有任何框架或 API 可以帮助从 Java 对象生成 HTML 响应（格式良好的 css 表），或者必须使用原始 HTML 标签（等）进行烹饪？

我也在研究 BIRT 或 Jasper 是否可以提供 HTML 响应，但它们似乎不是为此而设计的。如果有人有为此类用例构建解决方案的经验，请告诉我。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-15T21:03:58.870

看看[百里香](http://www.thymeleaf.org/)。它是一个 HTML 模板引擎。

就这么简单：

```
ClassLoaderTemplateResolver resolver = new ClassLoaderTemplateResolver();
resolver.setTemplateMode("HTML5");
resolver.setSuffix(".html");
TemplateEngine templateEngine = new TemplateEngine();
templateEngine.setTemplateResolver(resolver);
final Context context = new Context(Locale.CANADA);
String name = "John Doe";
context.setVariable("name", name); 
// add more objects from your ResultSet

final String html = templateEngine.process("myhtml", context); 
```

使用 myhtml.html 文件：

```
<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-3.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <title>My first template with Thymeleaf</title>
</head>
<body>
    <p th:text="${name}">A Random Name</p> 
</body>
</html> 
```

在这里，占位符会将元素中的值`${name}`替换为您在.`A Random Name``<p>``context`

至于您读取和生成表格的要求，`Thymeleaf`提供构造以根据需要循环多次（即，只要您有剩余数据）。例子：

```
<tr th:each="prod : ${allProducts}"> 
```

将遍历`allProducts`，在每次迭代时将每个对象分配给变量`prod`。查看教程和文档了解更多信息。

请注意，您必须自己编写 HTML。

看看[这个答案](https://stackoverflow.com/questions/1547334/how-to-export-jasper-report-to-html)以通过生成 HTML 报告`Jasper`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-15T21:07:35.773

您可以使用 XSLT 将 XML 转换为 HTML。您的 SQL 查询结果必须预先作为 XML 插入。

# iframe - IE10，相同的域 IFRAME 和样式 shset

> ID：16024572
> 
> 赞同：1
> 
> 时间：2013-04-15T20:57:00.773
> 
> 标签：iframe, internet-explorer-10

在我的应用程序中，我通过 iframe 将一个页面包含在另一个页面中。我正在这里制作一个快速原型，所以我现在不想花更多时间来实现一些更高级的东西]。

除了 Windows 7 上的 IE10 之外，一切看起来都不错。据我所知，iframe 的样式表被添加到页面样式表的级联中，并导致奇怪的显示错误。我有点傻眼，这甚至是可能的。

如果我注释掉 iframe，一切都会正确呈现。

我还可以看到样式在 iframe 加载时发生变化：

预 iframe：[http ://screencast.com/t/8qcl2U4Uuy](http://screencast.com/t/8qcl2U4Uuy)

后 iframe：[http ://screencast.com/t/fzR9esWsq](http://screencast.com/t/fzR9esWsq)

还有其他人经历过这样的奇怪行为吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T22:13:10.267

感谢你的回复。我的同事实际上能够帮助我将其追溯到 IE10 开发人员工具栏的问题。

我能够创建一个复制问题的文件：[https ://dl.dropboxusercontent.com/u/1686497/iframe.zip](https://dl.dropboxusercontent.com/u/1686497/iframe.zip)

如果您打开索引，您会注意到主体上没有边距。当您打开该页面并在 Windows 7 上的 IE10 (10.0.9200.16540) 中打开 F12 开发人员工具栏时（至少），您会看到正文被填充并且父窗口字体切换到 Times。希望这对某人有帮助！

# php - 将来自 mySQL 的 PDO 请求输出到下拉选择器列表中

> ID：16024573
> 
> 赞同：0
> 
> 时间：2013-04-15T20:57:03.200
> 
> 标签：php, mysql, forms, pdo

我有一个包含 2 列的表，我希望仅将其中一列输出到下拉选择器列表中，底部有一个按钮。我正在使用 PDO 连接到数据库，此代码正在运行，但它只为我提供了每行的所有详细信息的数组。

```
<?php
/* Execute a prepared statement by binding PHP variables */
$username = "mydb";
$password = "mydb"; 
$member = $_SESSION['SESS_MEMBER_ID'];
try {
    $dbh = new PDO('mysql:host=;dbname=mydb', $username, $password);
    $sth = $dbh->prepare('SELECT list_name FROM lists WHERE member_id = :member_id ');
    $sth->execute(array('member_id' => $member));
    $result = $sth->fetchAll();

  if ( count($result) ) { 
    foreach($result as $row) {
      print_r($row);
    }   
  } else {
    echo "No rows returned.";
  }
} catch(PDOException $e) {
    echo 'ERROR: ' . $e->getMessage();
}
?> 
```

这是到目前为止的工作代码，如何将输出从数组更改为带有按钮的选择器下拉列表？即使是滚动框列表也可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:11:24.553

您只是想在下拉框中显示查询结果。这只是 html 取决于一些变量。而不是显示这样的结果：

```
foreach($result as $row) {
   print_r($row);
} 
```

你应该用 PHP 显示一个 HTML 标签，如下所示：

```
print '<select id="your_list">';
    foreach ($result as $row) {
    print '<option value="'.$row['list_name'].'">'.$row['list_name'].'</option>';
    }
print '</select>';
print '<input type="submit" value="Submit">'; 
```

如果您希望能够提交此表单并获取值，则必须用带有正确选项的表单标签将其包围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T21:00:46.563

您可以通过列名访问数组中的元素，例如`$row['list_name']`

就像是：

```
<select name='x'>

<?php   
    foreach($result as $row) {
        echo "<option value='".$row['list_name']."'>".$row['list_name']."</option>";
    }
?>

</select> 
```

# delphi - MagTek 读卡器在 TChromium 网络浏览器中处理时不工作

> ID：16024574
> 
> 赞同：-1
> 
> 时间：2013-04-15T20:57:05.903
> 
> 标签：delphi, delphi-xe, tchromium, cardreader

我正在使用第 3 方网络服务来处理信用卡付款。

当我通过谷歌浏览器刷信用卡时，会检测到并处理付款。

但是，当我尝试通过内置的 Delphi Web 浏览器 TChromium 刷信用卡时，什么也没有发生。

无法弄清楚为什么它不起作用是我需要在 TChromium 浏览器上设置的任何设置？

**更新**

我已经验证读卡器读取数据并将其发布到选择的任何字段/组件。

我发现 Chrome 和 TChromium 网络浏览器的一个区别是，当我在 TChromium 网络浏览器中处理卡片时，它会在处理卡片后自动跳到下一个 html 组件。在 Chrome 中没有发生这种情况的地方，它只是停留在选择的当前字段/组件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T21:59:25.473

问题标题具有误导性，但只是因为我不明白经过一番调查后发生了什么，我才能够解决问题。我希望这个答案有一天可能对某人有用，尽管它是一个非常孤立的问题。

所以我发现 MagTek 阅读器将信用卡数据读取到字段中，然后发送一个“Enter”按钮。

我目前正在使用的程序有一个选项，当按下 Enter 键时，它会发送一个 Tab，以便用户可以通过 Enter 键进入下一个字段。

因此，该程序拦截了 MagTek 阅读器启动的输入键，并将其替换为干扰支付过程的标签。

# iphone - Cocos2d: Initializing layers by node - class is nil

> ID：16024575
> 
> 赞同：0
> 
> 时间：2013-04-15T20:57:17.177
> 
> 标签：iphone, ios, objective-c, cocos2d-iphone

I am a Cocos2d beginner so although there is a bit much code here. Some with experience should be able to see what I am doing wrong here. It Crashes on the `NSAssert` in `backgroundLayer` when I try to get a instance of the `GameBackground class` that is added as a child to this layer in the `+(id)scene` class method. It crashes cause it is `Nil` ( the `GameBackground` class). But I thought i initialized it in the `+(id)scene` method when asking for it´s `node`? But please correct me, my thinking is fuzzy regarding this matter.

```
static GameLayer *sharedGameLayer = nil;
+(id) scene
{
    CCScene *scene = [CCScene node];

    //GameLayer* layer = [GameLayer node];
    //[scene addChild:layer];

    CCNode *backgroundLayer = [GameBackground node];
    [scene addChild:backgroundLayer z:1 tag:LayerTagBackgroundLayer];

    CCLayer *cocosObjectsLayer = [HelloWorldLayer node];
    [scene addChild:cocosObjectsLayer z:2 tag:LayerTagGameLayer];

    CCLayer *userTouchInterface = [GameUserTouchInteface node];
    [scene addChild:userTouchInterface z:3 tag:LayerTagUILayer];
    return scene;
}

// To access this scene: MultiLayerScene* sceneLayer = [MultiLayerScene sharedLayer];
+ (GameLayer *) sharedLayer
{
    NSAssert(sharedGameLayer = nil, @"sharedGameLayer not available.");
    //if (sharedGameLayer == nil) sharedGameLayer = [[GameLayer alloc] init];
    return sharedGameLayer;
}

-(id) init
{
    NSLog(@"init called");
    self = [super init];
    if (self)
    {
        NSAssert(sharedGameLayer == nil, @"another GameLayer is already in use!");
        sharedGameLayer = self;

        // uncomment if you want the update method to be executed every frame
        //[self scheduleUpdate];
    }
    return self;
}

// MultiLayerScene* sceneLayer = [MultiLayerScene sharedLayer];
// To access this scene: GameBackgroundLayer* backgroundLayer = [sceneLayer backgroundLayer];
-(GameBackground *) backgroundLayer
{
    CCNode *layer = [self getChildByTag:LayerTagBackgroundLayer];
    NSAssert([layer isKindOfClass:[GameBackground class]], @"%@: not a BackgroundLayer!", NSStringFromSelector(_cmd));
    return (GameBackground *)layer;
} 
```

Then trying to get an instance of the background layer from another class:

```
 GameBackground *backgroundLayer = [GameLayer sharedLayer].backgroundLayer;
    [backgroundLayer runAction:sequence]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:41:01.950

I'm guessing the assertion that is failing is.-

```
NSAssert(sharedGameLayer = nil, @"sharedGameLayer not available."); 
```

You're assigning `nil` to `sharedGameLayer` instead of comparing (`==`). Also, you've commented the line where you set `sharedGameLayer`. Just guessing here, but you may want to do something like this.-

```
+(id) scene
{
    CCScene *scene = [CCScene node];

    sharedGameLayer = [GameLayer node];
    [scene addChild:layer];

    return scene;
} 
```

Leave your `static` constructor as clean as possible.

```
+ (GameLayer *) sharedLayer
{
    return sharedGameLayer;
}

-(id) init
{
    NSLog(@"init called");
    self = [super init];
    if (self)
    {
        CCNode *backgroundLayer = [GameBackground node];
        [self addChild:backgroundLayer z:1 tag:LayerTagBackgroundLayer];

        CCLayer *cocosObjectsLayer = [HelloWorldLayer node];
        [self addChild:cocosObjectsLayer z:2 tag:LayerTagGameLayer];

        CCLayer *userTouchInterface = [GameUserTouchInteface node];
        [self addChild:userTouchInterface z:3 tag:LayerTagUILayer];

        // uncomment if you want the update method to be executed every frame
        //[self scheduleUpdate];
    }
    return self;
} 
```

Create your nodes tree in the `init` method, and add them as children of your root layer (`sharedGameLayer`) instead of scene object.

# c# - 无法隐式转换类型“Newtonsoft.Json.Linq.JObject”

> ID：16024576
> 
> 赞同：5
> 
> 时间：2013-04-15T20:57:21.893
> 
> 标签：c#, json

我需要返回一个 json 对象，但出现以下错误：

> 错误 1 ​​无法将类型“Newtonsoft.Json.Linq.JObject”隐式转换为“System.Collections.Generic.IEnumerable<Newtonsoft.Json.Linq.JObject>”。存在显式转换（您是否缺少演员表？）

谁能帮我解决这个错误？

```
public static IEnumerable<JObject> GetListOfHotels()
{
    const string dataPath = "https://api.eancdn.com/ean-services/rs/hotel/v3/list?minorRev=99&cid=55505&apiKey=key&customerUserAgent=Google&customerIpAddress=123.456&locale=en_US&currencyCode=USD&destinationString=washington,united+kingdom&supplierCacheTolerance=MED&arrivalDate=12/12/2013&departureDate=12/15/2013&room1=2&mberOfResults=1&supplierCacheTolerance=MED_ENHANCED";
    var request           = WebRequest.Create(dataPath);
    request.Method        = "POST";
    const string postData = dataPath;
    var byteArray         = Encoding.UTF8.GetBytes(postData);
    request.ContentType    = "application/json";
    request.ContentLength  = byteArray.Length;
    var dataStream = request.GetRequestStream();
    dataStream.Write(byteArray, 0, byteArray.Length);
    dataStream.Close();

    var response = request.GetResponse();
    var responseCode = (((HttpWebResponse) response).StatusDescription);

    var responseStream = response.GetResponseStream();

    var responseReader = new StreamReader(responseStream, Encoding.UTF8);
    var responseString = responseReader.ReadToEnd();

    var root = JObject.Parse(responseString);

    return root;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T20:59:57.200

问题是您试图返回 a `JObject`，但由于函数的当前签名，编译器假定它需要`IEnumerable<JObject>`返回 a 。

因此，您需要将函数的签名从期望更改为`IEnumerable<JObject>`：

```
public static IEnumerable<JObject> GetListOfHotels() 
```

`JObject`改为接受 a ：

```
public static JObject GetListOfHotels() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-04T06:49:05.687

当使用 Ext.Direct 客户端代理从 Sencha ExtJS 4 数据存储中调用 Ext.Direct for .NET 服务器端堆栈时，我遇到了同样的异常。此服务器端堆栈引用 Newtonsoft.Json.dll .NET 程序集 (.NET 4.0)。我的 Ext.Direct 商店在抛出此异常时正在传递商店中的 sorters 和 groupers 属性中的嵌套对象。我通过在花括号周围添加方括号来修复它。如果您想了解原因，可以在此处下载框架：[https](https://code.google.com/p/extdirect4dotnet/) ://code.google.com/p/extdirect4dotnet/ 。

**旧的（抛出异常）：**

```
Ext.define('MyApp.store.Hierarchy', {
    extend : 'Ext.data.Store',
    model : 'R.model.Hierarchy',
    sorters: { 
        property: 'namespace_id',
        direction: 'ASC' 
    },
    remoteSort: true,
    groupers: {
        property: 'namespace_id',
        direction: 'ASC'
    },
    remoteGroup: true,
    proxy: {        
        type: 'direct',
        directFn: Tree_CRUD.read,
        reader: {
            root: 'data'
        }
    }
}); 
```

**新的（通过包括括号修复）：**

```
Ext.define('MyApp.store.Hierarchy', {
    extend : 'Ext.data.Store',
    model : 'R.model.Hierarchy',
    sorters: [{ 
        property: 'namespace_id',
        direction: 'ASC' 
    }],
    remoteSort: true,
    groupers: [{
        property: 'namespace_id',
        direction: 'ASC'
    }],
    remoteGroup: true,3
    proxy: {        
        type: 'direct',
        directFn: Tree_CRUD.read,
        reader: {
            root: 'data'
        }
    }
}); 
```

# java - 如何将创建的对象添加到android中的arraylist

> ID：16024584
> 
> 赞同：0
> 
> 时间：2013-04-15T20:58:19.547
> 
> 标签：java, android, arraylist

我已经在 canvas 方法中创建了对象。但是我需要有关如何创建数组列表并将这四个对象添加到数组列表中的帮助，以便它们不断出现。我已经查看了[arraylist](http://developer.android.com/reference/java/util/ArrayList.html) Heres 代码，任何帮助将不胜感激。

```
public class BouncingBallView extends View {

    private int xMin = 0;          // This view's bounds
    private int xMax;
    private int yMin = 0;
    private int yMax;
    private int xMin1 = 0;          // This view's bounds
    private int xMax1;
    private int yMin1 = 0;
    private int yMax1;
    private int xMin2 = 0;          // This view's bounds
    private int xMax2;
    private int yMin2 = 0;
    private int yMax2;
    private int xMin3 = 0;          // This view's bounds
    private int xMax3;
    private int yMin3 = 0;
    private int yMax3;

    private float ballRadius = 80;
    private float ballRadius2 = 80;// Ball's radius
    private float ballX = ballRadius + 20;  // Ball's center (x,y)
    private float ballY = 10;//ballRadius + 40;
    private float ballX1= ballRadius2 + 30;
    private float ballY1 = 15;
    private float ballX2 = ballRadius + 20;  // Ball's center (x,y)
    private float ballY2 = 10;//ballRadius + 40;
    private float ballX3 = ballRadius + 20;  // Ball's center (x,y)
    private float ballY3 = 10;//ballRadius + 40;
    private float ballSpeedX = 50;  // Ball's speed (x,y)
    private float ballSpeedX1= 25;
    private float ballSpeedY = 30;
    private float ballSpeedY1= 15;
    private float ballSpeedX2 = 40;  // Ball's speed (x,y)
    private float ballSpeedX3= 20;
    private float ballSpeedY2 = 20;  // Ball's speed (x,y)
    private float ballSpeedY3= 10;
    private RectF ballBounds;      // Needed for Canvas.drawOval
    private RectF ballBounds2;
    private RectF ballBounds3;  
    private RectF ballBounds4;  
    private Paint paint;           // The paint (e.g. style, color) used for drawing

    // Constructor
    public BouncingBallView(Context context) {
        super(context);
        ballBounds = new RectF();
        ballBounds2 = new RectF();
        ballBounds3 = new RectF();
        ballBounds4 = new RectF();
        paint = new Paint();
    }

    // Called back to draw the view. Also called by invalidate().
    @Override
    protected void onDraw(Canvas canvas) {
        ballBounds2.set(10, ballY1, 50, ballY1+40);
        paint.setColor(Color.BLUE);
        canvas.drawRoundRect(ballBounds2,6,6, paint);
        // Draw the ball
        ballBounds.set(10, ballY, 50, ballY+40);
        paint.setColor(Color.RED);
        canvas.drawRoundRect(ballBounds,6,6, paint);

        ballBounds3.set(10, ballY2, 50, ballY2+40);
        paint.setColor(Color.YELLOW);
        canvas.drawRoundRect(ballBounds3,6,6, paint);

        ballBounds4.set(10, ballY3, 50, ballY3+40);
        paint.setColor(Color.GREEN);
        canvas.drawRoundRect(ballBounds4,6,6, paint);

        // Update the position of the ball, including collision detection and reaction.
        update();

        // Delay
        try {  
            Thread.sleep(30);  
        } catch (InterruptedException e) { }      
        invalidate();  // Force a re-draw
    }

    // Detect collision and update the position of the ball.

    private void update() {
        // Get new (x,y) position
        //ballX += ballSpeedX;
        ballY += ballSpeedY;
        ballY1 += ballSpeedY1;
        ballY2 += ballSpeedY2;
        ballY3 += ballSpeedY3;
        // Detect collision and react
        //  if (ballX + ballRadius > xMax) {
        //   ballSpeedX = -ballSpeedX;
        // ballX = xMax-ballRadius;
        //   } 
        // else if (ballX - ballRadius < xMin) {
        //     ballSpeedX = -ballSpeedX;
        //   ballX = xMin+ballRadius;
        // }

        if (ballY + ballRadius > yMax) {
            ballSpeedY = -ballSpeedY;
            ballY = yMax - ballRadius;
        } else if (ballY - ballRadius < yMin) {
            ballSpeedY = -ballSpeedY;
            ballY = yMin + ballRadius;
        }
        if (ballY1 + ballRadius2 > yMax1) {
            ballSpeedY1 = -ballSpeedY1;
            ballY1 = yMax1 - ballRadius2;
        } else if (ballY1 - ballRadius2 < yMin1) {
            ballSpeedY1 = -ballSpeedY1;
            ballY1 = yMin1 + ballRadius2;
        }
        if (ballY2 + ballRadius2 > yMax2) {
            ballSpeedY2 = -ballSpeedY2;
            ballY2 = yMax2 - ballRadius2;
        } else if (ballY2 - ballRadius2 < yMin2) {
            ballSpeedY2 = -ballSpeedY2;
            ballY2 = yMin2 + ballRadius2;
        }
        if (ballY3 + ballRadius2 > yMax3) {
            ballSpeedY3 = -ballSpeedY3;
            ballY3 = yMax3 - ballRadius2;
        } else if (ballY3 - ballRadius2 < yMin3) {
            ballSpeedY3 = -ballSpeedY3;
            ballY3 = yMin3 + ballRadius2;
        }
    }

    // Called back when the view is first created or its size changes.
    @Override
    public void onSizeChanged(int w, int h, int oldW, int oldH) {
        // Set the movement bounds for the ball
        xMax = w-1;
        yMax = h-1;
        xMax1= w-1;
        yMax1= h-1;
        xMax2 = w-1;
        yMax2 = h-1;
        xMax3 = w-1;
        yMax3 = h-1;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T22:08:16.003

此代码位于您的构造函数中。

```
ArrayList<RectF> ballBoundArray = new ArrayList<RectF>();
ballBoundArray.add(ballBounds);
ballBoundArray.add(ballBounds2);
ballBoundArray.add(ballBounds3);
ballBoundArray.add(ballBounds4); 
```

编辑：如果您希望在构造函数之外可以访问数组列表，请将其定义为具有其他球边界的私有或公共变量。

# angularjs - 使用 angularjs 传递无线电值

> ID：16024588
> 
> 赞同：0
> 
> 时间：2013-04-15T20:58:34.193
> 
> 标签：angularjs, radio-button

我有一个包含一组单选按钮（3 个选项）的表单，我正在使用 angular 和 ng-repeat 指令来填充 html：

```
<div ng-repeat="fruit in fruitbasket">
  <input type="radio" name="fruit" data-ng-model="fruit.isSelected">{{fruit.id}}
</div> 
```

水果篮的控制器内部是这样的：

```
$scope.fruitbasket = [{isSelected: false, id: "Orange", value: "1"}, {isSelected: true, id: "Pear", value: "2"}, {isSelected: false, id: "Apple", value: "3"}] 
```

视图中的选项是 Orange、Pear 和 Apple，但是在选择一个之后，我想传递数字“值”

不知道如何在角度上做到这一点，我尝试了几件事，但没有成功。每次传递的值显示为`nil`

对象的连接元素如何从 Angularjs 中的单选按钮传递？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:40:54.077

这是你如何做到的：

1.  isSelected 不是必需的。水果篮不是模型的一部分，只有选定的水果才是。

    ```
    $scope.fruitbasket = [
        {id: "Orange", value: "1"},
        {id: "Pear", value: "2"},
        {id: "Apple", value: "3"}
    ];

    $scope.model={selectedFruit:2}; 
    ```

2.  将值 ( **fruit.value** ) 分配给每个选项并将其绑定到您的模型 ( **model.selectedFruit** )

    ```
    <input value="{{fruit.value}}" data-ng-model="model.selectedFruit" type="radio" name="fruit" > {{fruit.id}} 
    ```

查看[这个有效的 plnkr 示例](http://plnkr.co/edit/6E1YDfpcQ67qHTizc11v?p=preview)。

# magento - 在 Magento 中设置用于客户的优惠券代码

> ID：16024605
> 
> 赞同：1
> 
> 时间：2013-04-15T20:59:48.400
> 
> 标签：magento, coupon

我正在将系统与 Magento 集成。

当我创建订单时，如果我的非 Magento 系统指示该订单确实有优惠券，我想将优惠券代码标记为该客户的“已使用”，这样下次他尝试使用它时，Magento 就会知道该客户已经用过了。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T16:51:12.733

我设法这样做：

```
 $coupon = mage::getModel('salesrule/coupon')->load($code, 'code');
 $coupon->setTimesUsed($coupon->getTimesUsed()+1);
 $coupon->save();

 $rule = Mage::getModel('salesrule/rule')->load($coupon->getRuleId());
 $rule->setTimesUsed($rule->getTimesUsed()+1);
 $rule->save();

 $couponUsage = Mage::getResourceModel('salesrule/coupon_usage');
 $couponUsage->updateCustomerCouponTimesUsed($customerId,$coupon->getCouponId()); 
```

感谢这篇文章： [Magento - 待付款时标记为已使用的单张优惠券](https://stackoverflow.com/questions/13268938/magento-single-coupon-marqued-as-used-when-payment-pending)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T21:25:01.863

将购物车规则设置`Uses per Customer`为 1。

- - 编辑 - -

如果您想在代码中应用优惠券，则可以执行以下操作：

```
$coupon_code = "YOUR_CODE";

Mage::getSingleton('checkout/cart')
    ->getQuote()
    ->setCouponCode($coupon_code)
    ->collectTotals()
    ->save(); 
```

# c++ - 关于 CUDA 中的 const 指针和参数传递

> ID：16024606
> 
> 赞同：1
> 
> 时间：2013-04-15T20:59:49.707
> 
> 标签：c++, c, cuda, nvidia

nvcc 如何处理内核中的 const 指针？

根据 nvidia 的说法，在参数传递期间为指针添加 const 和**restrict**可以启用 NVCC 进行积极优化，这是否严格遵循 C/C++ 方式？

假设 A 是指向数据缓冲区的指针，该缓冲区可能会被其他线程/流频繁更新，但在此测试内核调用期间内容不会被修改：

```
test<<<blocks, threads>>>(const int *__restrict__ A, int *__restrict__ B); 
```

那么 NVCC 能否保持这一点的正确性：在每次内核调用时加载 A 中的更新数据，而不是加载一些预先缓存的过时数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T10:38:23.947

`const`像 C++ 一样工作。`const`变量不能更改，编译器会在编译时对其进行检查。编译器仅检查给定范围的 const 正确性，因为可以使用 C 样式转换更改 constness。

`restrict`以 C 方式工作。当您将指针标记为限制时，编译器假定这些指针没有别名。这是你给定的事实，编译器不会检查这个事实是否正确。

谈到您的问题，NVCC 不会确保内核启动之间全局内存写入和读取的正确性。由于内核启动在 CUDA 中是异步的，因此您必须确保修改这些内存空间的内核不会同时执行。您可以通过同步内存副本和/或`cudaDeviceSynchronize()`. 如果您同时启动这些内核，则无法确保在来自其他内核的访问之前，不同内核的所有更改都已提交到全局内存。

# facebook - 站点 URL 不接受 uni.me TLD

> ID：16024608
> 
> 赞同：0
> 
> 时间：2013-04-15T21:00:04.583
> 
> 标签：facebook, comments, facebook-apps

因为我在我的个人 wordpress 博客中使用 facebook 评论插件，所以我必须创建一个 facebook 应用程序才能让评论插件工​​作。

我刚刚遇到了 Facebook 应用程序集成不接受**uni.me** TLD 但它接受**.com** TLD 的问题，这给了我一条错误消息

```
Error
There was a problem saving your changes. Please try again later. 
```

有什么想法可以解决这个问题。自从我早些时候能够使用 .uni.me TLD 以来，似乎在一些 facebook 开发者平台更新后问题已经开始，但是当我在删除应用程序后停用我的帐户并使用新的 facebook 帐户重新创建应用程序时，它显示了问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T15:39:19.787

1.  第一种可能性是您没有使用正确的 DNS 将域指向页面，而是使用 url 转发或 iframe。通常用于二级域的情况。
2.  另一种可能性是在您的 html 代码中，元数据未正确或正确定义：

    > `<meta property='og:url'> content="[link-has-to-be-the-same-as-in-fb-app]"/>`

3.  或者，Facebook 刚刚像[Google 一样封锁了该域名](http://productforums.google.com/forum/#!topic/apps/CYJih44r6Ps)

# asp.net - 使用 HTTP 处理程序 ASP.Net 调整图像大小，一些图像未显示

> ID：16024612
> 
> 赞同：5
> 
> 时间：2013-04-15T21:00:17.217
> 
> 标签：asp.net, ihttphandler

我在我的智慧在这里结束。

我有一个 HTTP 处理程序 (ImageHandler.ashx) 发送图像（调整大小），它是一个标准 HTTP 处理程序（使用可重用的 true 和 false 进行尝试），它使用 Image.GetThumbnailImage 来调整大小并返回缩略图。

我有一个带有 html 图像控件的表的 asp Datalist 控件。

```
 <asp:DataList ID="listImg" runat="server" RepeatColumns="4" RepeatDirection="Horizontal"
        ShowFooter="false" ShowHeader="false">
        <ItemTemplate>
            <table width="220px">
                <tr width="100%">
                    <td>
                        <img src="Scripts/ImageHandler.ashx?width=125&image=Upload/<%# DataBinder.Eval(Container.DataItem, "photo") %>"                              
                    </td>
                </tr>
            </table>
        </ItemTemplate>
    </asp:DataList> 
```

如您所见，处理程序需要的参数是宽度和图像路径。

此 Datalist 绑定到提供要显示的图像列表的数据表 (ImageData)。

到目前为止一切都说得通，现在是问题所在 - 假设我正在加载 5 张图像，即我的 ImageData DataTable 有 5 行，假设只显示 3-4 张图像，剩下的只是想出一个红色的 X，就像你没有图像时一样。现在，如果您查看代码并导航到图像 src，例如 -

```
 http://localhost:3540/Scripts/ImageHandler.ashx?width=150&image=Upload/Test123.jpg 
```

你会看到图像，它们都没有丢失的图像。重新加载，他们回来了。

我在 Firefox 中运行它并打开了 Firebug，当我查看图像选项卡时，所有图像都根据 Firebug 返回（状态 200 OK，我在响应选项卡中看到图像），就像 Web 服务器不显示一些其中。请注意，处理/加载时间最长的图像并不总是丢失，而是一些随机图像。

这里会发生什么？

谢谢你。

**编辑 1** - 添加处理程序代码（原始），我们继承了此代码。我已经从这里的代码中删除了缓存，但仅供参考的缩略图一旦生成就会被缓存。

```
 public class ImageHandler : IHttpHandler{
public int _width;
public int _height;
public int _percent;
public string imageURL;

public void ProcessRequest(HttpContext context)
{
    try
    {
        Bitmap bitOutput;

        string appPath = Convert.ToString(System.Configuration.ConfigurationManager.AppSettings["ImagePath"]);

        String strArquivo = appPath + context.Request.QueryString["image"].Replace("/", "\\");

        if (!(String.IsNullOrEmpty(context.Request["width"])))
        {
            Bitmap bitInput = GetImage(context);

           if (SetHeightWidth(context, bitInput))
            { bitOutput = ResizeImage(bitInput, _width, _height, _percent); }
            else { bitOutput = bitInput; }

            context.Response.ContentType = "image/jpeg";
            bitOutput.Save(context.Response.OutputStream, System.Drawing.Imaging.ImageFormat.Jpeg);
        }

        return;

    }
    catch (Exception ex) { /*HttpContext.Current.Response.Write(ex.Message);*/ }
}

/// <summary>
/// Get the image requested via the query string. 
/// </summary>
public Bitmap GetImage(HttpContext context)
{
    try
    {
        if (context.Cache[("ImagePath-" + context.Request.QueryString["image"])] == null)
        {
            string appPath = Convert.ToString(System.Configuration.ConfigurationManager.AppSettings["ImagePath"]);

            appPath = appPath + context.Request.QueryString["image"].Replace("/", "\\");
            Bitmap bitOutput;
            imageURL = appPath;

            bitOutput = new Bitmap(appPath);
            return bitOutput;
        }
        else
        {
            return (Bitmap)context.Cache[("ImagePath-" + context.Request.QueryString["image"])];
        }

    }
    catch (Exception ex) { throw ex; }
}    

/// <summary>
/// Set the height and width of the handler class.
/// </summary>
public bool SetHeightWidth(HttpContext context, Bitmap bitInput)
{
    try
    {
        double inputRatio = Convert.ToDouble(bitInput.Width) / Convert.ToDouble(bitInput.Height);

        if (!(String.IsNullOrEmpty(context.Request["width"])) && !(String.IsNullOrEmpty(context.Request["height"])))
        {
            _width = Int32.Parse(context.Request["width"]);
            _height = Int32.Parse(context.Request["height"]);
            return true;
        }
        else if (!(String.IsNullOrEmpty(context.Request["width"])))
        {
            _width = Int32.Parse(context.Request["width"]);
            _height = Convert.ToInt32((_width / inputRatio));
            if (_width == 400 &&_height > 500)
            {
                _height = 500;
                _width = Convert.ToInt32(500 * inputRatio);
            }
            else if (_width == 125 && _height > 200)
            {
                _height = 200;
                _width = Convert.ToInt32(200 * inputRatio);
            }
            return true;
        }
        else if (!(String.IsNullOrEmpty(context.Request["height"])))
        {
            _height = Int32.Parse(context.Request["height"]);
            _width = Convert.ToInt32((_height * inputRatio));
            return true;
        }
        else if (!(String.IsNullOrEmpty(context.Request["percent"])))
        {
            _height = bitInput.Height;
            _width = bitInput.Width;
            _percent = Int32.Parse(context.Request["percent"]);
            return true;
        }
        else
        {
            _height = bitInput.Height;
            _width = bitInput.Width;
            return false;
        }

    }
    catch (Exception ex) { throw ex; }
}

/// <summary>
/// Resizes bitmap using high quality algorithms.
/// </summary>
public static Bitmap ResizeImage(Bitmap originalBitmap, int newWidth, int newHeight, int newPercent)
{
    try
    {
        if (newPercent != 0)
        {
            newWidth = Convert.ToInt32(originalBitmap.Width * (newPercent * .01));
            newHeight = Convert.ToInt32(originalBitmap.Height * (newPercent * .01));
        }

        Bitmap inputBitmap = originalBitmap;
        Bitmap resizedBitmap = new Bitmap(newWidth, newHeight, PixelFormat.Format64bppPArgb);

        Graphics g = Graphics.FromImage(resizedBitmap);
        g.CompositingQuality = System.Drawing.Drawing2D.CompositingQuality.HighQuality;
        g.CompositingMode = System.Drawing.Drawing2D.CompositingMode.SourceCopy;
        g.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBicubic;
        Rectangle rectangle = new Rectangle(0, 0, newWidth, newHeight);
        g.DrawImage(inputBitmap, rectangle, 0, 0, inputBitmap.Width, inputBitmap.Height, GraphicsUnit.Pixel);
        g.Dispose();

        return resizedBitmap;

    }
    catch (Exception ex) { throw ex; }
}

public bool IsReusable
{
    get
    {
        return true;
    }
}} 
```

**编辑 2**如果有人希望测试整个事情，这里是从预定义文件夹中随机选取图像以创建 aspDataList (listImg) 绑定到的 DataTable (ImageData) 的代码 -

```
 System.IO.DirectoryInfo dirInfo = new System.IO.DirectoryInfo(Server.MapPath("Upload"));
        System.IO.FileInfo[] files = dirInfo.GetFiles();

        int fileCount = files.Length;

        System.Data.DataTable ImageData = new System.Data.DataTable();
        System.Data.DataColumn dCol = new System.Data.DataColumn("photo");
        ImageData.Columns.Add(dCol);

        System.Random rnd = new Random();
        int nxtNumber = 0;

        System.Data.DataRow dRow = null;

        string fileName = string.Empty;

        for (int i = 0; i < 20; i++)
        {
            dRow = ImageData.NewRow();
            nxtNumber = rnd.Next(fileCount);
            while (!files[nxtNumber].Extension.Equals(".jpg"))
            {
                nxtNumber = rnd.Next(fileCount);
            }
            fileName = files[nxtNumber].Name;

            dRow["photo"] = fileName;

            ImageData.Rows.Add(dRow);
        }
        listImg.DataSource = ImageData;
        listImg.DataBind(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T14:19:33.293

好吧，有趣的是——服务器上的相同代码以更可预测的方式运行，我可能仍然有一些丢失的图像，但现在它就像平均从 30-40 中丢失 1 个，而在每 5 个中丢失 1 个我当地的环境。由于这些请求是异步的，它是否与运行它的机器的实际 CPU 有关，与我那可怜的笔记本电脑相比，服务器更适合处理多个请求？

无论哪种方式我都修改了代码，所以此时不​​涉及调整大小，处理程序代码只是获取调整大小的图像，此时一切都很好。

谢谢大家的意见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-22T14:30:37.903

我认为您的实际代码在 img 标签末尾包含 /> ？？？如果没有，您可以尝试先添加它并重新测试。

不是真正的答案，但您可以尝试将 img 标签更改为 asp:Label 并将文件名显示为文本，而不是显示图像只是为了查看数据表是否正确构建。正如您在直接访问图像处理程序时能够看到图像一样，我会说它与代码隐藏中的数据表构造有关。

当我做过类似的事情时，我通常将图像存储在 SQL DB 中，并使用图像处理程序在查询字符串中返回带有记录 ID 的图像。这意味着您将返回一个现有的记录表，而不必根据文件夹的内容创建一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-14T16:17:11.580

尝试编码 url 的查询字符串，例如：

```
http://localhost:3540/Scripts/ImageHandler.ashx?width=150&image=Upload/Test123.jpg 
```

网址编码为

```
http://localhost:3540/Scripts/ImageHandler.ashx?width%3D150%26image%3DUpload%2FTest123.jpg 
```

# jquery - 文本区域中的JQuery onkey up功能

> ID：16024613
> 
> 赞同：2
> 
> 时间：2013-04-15T21:00:30.467
> 
> 标签：jquery, html

我的 HTML 中有一个字段，我想根据某些验证规则检查它的大小和值。这是jQuery代码：

```
$(function(){
    $('#id_title').keyup(function() {
        data = $(this).val();    
        if (data == "    ") {
            $('#output').text("The title can not be spaces");
            $('#SubmitAction').attr("disabled", true);
        } else {
            if (data.length < 5) {
                $('#output').text("The title can not be shorter than 5 characters");
                $('#SubmitAction').attr("disabled", true);   
            } else {
                if (data.length > 30) {
                    $('#output').text("The title can not exceed 30 characters");
                    $('#SubmitAction').attr("disabled", true);
                }
            }
        }
        data = $(this).val();
    });
}); 
```

问题是，当它进入任何 if 块时，即使用户正确完成了信息，它也会卡住。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:11:43.647

`disabled`是一个属性，要修改属性，您应该使用`prop`method 而不是`attr`. `$.trim`您可以使用 jQuery实用函数并检查值的长度，而不是使用空字符。

```
$('#id_title').keyup(function() {
    var val = $.trim(this.value), 
        error = '';

    if ( val.length === 0 ) {
       error = "The title can not be empty");
    } else if ( val.length < 5 || val.length > 30 ) {
       error = "The title can not be shorter than 5 characters and exceed 30 characters";
    }

    $('#output').text(error);
    $('#SubmitAction').prop("disabled", error.length);
}); 
```

请注意，在 keyup 上验证文本输入对用户不友好，用户输入一个字符，并且在第一个`keyup`事件中您显示错误。我建议改用`blur`事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T21:07:19.290

在任何 if 函数被禁用后，您需要再次启用输入字段

```
$(function(){
      $('#id_title').keyup(function(){
        var data = $(this).val();    
        if( data == "    "){
        $('#output').text("The title can not be spaces");
        $('#SubmitAction').attr("disabled", true);
        }
        else {
          if(data.length < 5){
          $('#output').text("The title can not be shorter than 5 characters");
          $('#SubmitAction').attr("disabled", true);   
          }
            else{
              if(data.length > 30){
              $('#output').text("The title can not exceed 30 characters");
              $('#SubmitAction').attr("disabled", true);
              } else $('#SubmitAction').attr("disabled", false);
            }

        }
        data = $(this).val();

    });
      }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T21:08:08.010

在第一次使用`var`你的变量时，`var data = $(this).val();`是本地的。然后您应该设置`disabled`为`false`用户正确完成信息的时间，如下所示：

```
$(function(){
  $('#id_title').keyup(function(){
    data = $(this).val();
    if( data == "    "){
    $('#output').text("The title can not be spaces");
    $('#SubmitAction').attr("disabled", true);
    }
    else {
      if(data.length < 5){
      $('#output').text("The title can not be shorter than 5 characters");
      $('#SubmitAction').attr("disabled", true);   
      }
        else{
          if(data.length > 30){
          $('#output').text("The title can not exceed 30 characters");
          $('#SubmitAction').attr("disabled", true);
          }else{
               $('#SubmitAction').attr("disabled", false);
          }
        }

    }
    data = $(this).val();

});
  }); 
```

# angularjs - AngularJS 数据使用模式

> ID：16024622
> 
> 赞同：0
> 
> 时间：2013-04-15T21:01:08.843
> 
> 标签：angularjs

我是 angularjs 的新手，在我的应用程序中我正在进行 REST API 调用，返回的响应存储为模型对象。对于我的观点，我创建了一个单独的视图模型对象，因为来自 API 的响应不能在 UI 中使用。

这是一个正确的方法吗？请注意，我使用了两种不同的模型 -> 一个从服务器获取数据，另一个用作 UI 支持模型。这类似于 Java 框架中的支持 bean 和 DAO 对象。

请告知这种方法是否可行或是否应该改变。如果有怎么办？

**更新在**[http://jsfiddle.net/LGEKX/](http://jsfiddle.net/LGEKX/) 中说明了这个问题

```
function mycontroller($scope){
//The view model is populated by a seperate method
var viewmodel = populateViewModel();
$scope.viewmodel = viewmodel;
}

function populateViewModel(){
//Call service to update local model
var backendModel = serviceCall();
//Invoke conversion service
var converteModel = convertBackEndModel(backendModel);
}

function serviceCall(){
//Service method calls server side API and the data returned is returned in success     callback
 $http({method: 'GET', url: '/someUrl'}).
  success(function(data, status, headers, config) {
    return data;
 }).
 error(function(data, status, headers, config) {
  ...
  });

 }

 function convertBackEndModel(data){
   //This takes the data returned from API call as input and creates a view model
  //which will be used for angularjs view (in HTML)
var viewModel = {};
 viewModel.name = backendModel.backendName;
 //Though this is simple, actual code has lots of logic which basically converts one    JSON structure to another
 } 
```

在我的 HTML 中

```
<div ng-app>
<div ng-controller="mycontroller">
    <!-- Binding to viewmodel from the HTML-->
    <div ng-model="viewmodel.name"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T23:25:11.107

这是一个简单的模式，使用 $http 调用服务器，然后使用 html 绑定到范围变量

```
 $http({
               url: "http://localhost/people/1"
           }).success(function (data, status, headers, config) {
               if (data) {
                   $scope.person = data;
               }
           });

<div>{{person.firstName}}</div> <!-- one way -->
<input ng-model='person.firstName' /> <!-- two way --> 
```

我认为您可能需要单独的 DTO 的唯一原因是 GET 和 PUT 服务使用不同的类，在这种情况下，您将需要处理数据。

# javascript - 使用 Rails 3.2.1 设计 + client_side_validations

> ID：16024626
> 
> 赞同：1
> 
> 时间：2013-04-15T21:01:36.863
> 
> 标签：javascript, ruby-on-rails, devise, form-for, client-side-validation

我最近发布了一个问题，寻求有关如何让 client_side_validations gem 与 Devise 一起使用的帮助。我收到了 gem 的作者的及时回复，尝试使用不同版本的 gem，这暂时解决了我的问题。

但是我现在只能触发电子邮件地址字段。我可以从表单后注入的 javascript 中看到它正在引用表单中的其他字段，但它似乎没有触发任何错误消息。这是我的代码：

**宝石文件**

```
gem 'client_side_validations', :github => 'bcardarella/client_side_validations', :branch => '3-2-stable' 
```

**用户.rb**

```
 validates :email, :presence => { :message =>  "An email address is required."}, :uniqueness => { :message => "Email address has already been taken."}
  validates :first_name, :presence => { :message => "A first name is required."}
  validates :last_name, :presence => { :message => "A last name is required."}
  validates :privacy_policy, :acceptance => { :message => "Please accept the Privacy policy."} 
```

**形式**

```
<h1>Sign up</h1>

<%= link_to(user_omniauth_authorize_path(:facebook), :class => "btn btn-primary btn-fb-large btn-large") do %>
    <div class="icon"><span></span><i class="icon-facebook"></i></div><div class="divider"></div>Sign in with Facebook
<% end %>

<%= form_for(resource, :validate => true, :as => resource_name, :url => registration_path(resource_name)) do |f| %>

  <%= f.label :first_name %>
  <%= f.text_field :first_name, :validate => true %>

  <%= f.label :last_name %>
  <%= f.text_field :last_name, :validate => true %>

  <%= f.label :email %>
  <%= f.email_field :email %>

  <%= f.label :password %>
  <%= f.password_field :password, :validate => true %>

  <%= f.label :password_confirmation %>
  <%= f.password_field :password_confirmation %>

  <%= f.label :privacy_policy, :class => 'checkbox' do %>
  <%= f.check_box :privacy_policy %>I agree to the <%= link_to "Privacy policy", privacy_path %><% end %>

  <%= f.submit "Sign up", :class => 'btn' %>
<% end %> 
```

**注入脚本**

```
<script>//<![CDATA[
if(window.ClientSideValidations===undefined)window.ClientSideValidations={};window.ClientSideValidations.disabled_validators=[];window.ClientSideValidations.number_format={"separator":".","delimiter":","};if(window.ClientSideValidations.patterns===undefined)window.ClientSideValidations.patterns = {};window.ClientSideValidations.patterns.numericality=/^(-|\+)?(?:\d+|\d{1,3}(?:\,\d{3})+)(?:\.\d*)?$/;if(window.ClientSideValidations.forms===undefined)window.ClientSideValidations.forms={};window.ClientSideValidations.forms['new_user'] = {"type":"ActionView::Helpers::FormBuilder","input_tag":"<div class=\"field_with_errors\"><span id=\"input_tag\" /><label for=\"\" class=\"message\"></label></div>","label_tag":"<div class=\"field_with_errors\"><label id=\"label_tag\" /></div>","validators":{"user[first_name]":{"presence":[{"message":"A first name is required."}]},"user[last_name]":{"presence":[{"message":"A last name is required."}]},"user[email]":{"uniqueness":[{"message":"has already been taken","case_sensitive":true,"allow_blank":true},{"message":"Email address has already been taken.","case_sensitive":true}],"format":[{"message":"is invalid","with":/^[^@\s]+@([^@\s]+\.)+[^@\s]+$/,"allow_blank":true},{"message":"is invalid","with":/^([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})$/i}],"presence":[{"message":"An email address is required."}]},"user[password]":{"presence":[{"message":"can't be blank"}],"confirmation":[{"message":"doesn't match confirmation"}],"length":[{"messages":{"minimum":"is too short (minimum is 6 characters)","maximum":"is too long (maximum is 128 characters)"},"allow_blank":true,"minimum":6,"maximum":128}]},"user[privacy_policy]":{"acceptance":[{"message":"Please accept the Privacy policy.","accept":"1"}]}}};
//]]></script> 
```

我已经尝试了可以​​在 Google 上找到的所有搜索结果，并探索了与 Devise 相关的所有途径，但没有运气。

我在浏览器控制台中没有收到 JS 错误。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T12:30:26.890

我在开发一个应用程序时遇到了类似的错误。我认为您应该将您的 rails 版本升级到 3.2.6。它会解决你的问题

# php - 做了一个php变量，现在不能运行

> ID：16024628
> 
> 赞同：1
> 
> 时间：2013-04-15T21:01:55.670
> 
> 标签：php, variables

是的，我必须制作一个变量，如下所示。

```
$questionID = '$quizinfo[\'Q' . $ques_num . '_ID\']'; 
```

但是现在代码在任何地方显示时都不会运行，例如 $quizinfo['Q1_ID'] 而不是获取 php 在其后面获得的变量。

我需要这样做，因为测验中有 15 个问题和我持有的身份证，我每次都更改号码以获得新的身份证号码，但它没有得到他们我该如何解决？

检查它我把它。

```
echo $quizinfo['Q1_ID']; 
```

它工作正常，所以我需要做什么才能让它工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T21:04:01.227

**尝试：**

```
$questionID = $quizinfo['Q' . $ques_num . '_ID']; 
```

它应该工作。

**当你写：**

```
$questionID = '$quizinfo[\'Q' . $ques_num . '_ID\']'; 
```

`$quizinfo[…]`不解释。它被视为一个字符串。

**也可以看看：**

*   [字符串中的 PHP 变量](http://www.jcxsoftware.com/jcx/node/2335)
*   [PHP - 在字符串中连接或直接插入变量](https://stackoverflow.com/questions/5605965/php-concatenate-or-directly-insert-variables-in-string)
*   [PHP：字符串中的变量没有连接](https://stackoverflow.com/questions/7036931/php-variables-in-strings)
*   [PHP：注意字符串中的变量](http://www.gerd-riesselmann.net/php-beware-of-variables-inside-strings)
*   [将 PHP 变量与字符串文字混合](https://stackoverflow.com/questions/5368890/mixing-php-variable-with-string-literal)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T21:04:21.837

既然只是php，为什么要转义呢？

```
$questionID = $quizinfo['Q' . $ques_num . '_ID']; 
```

应该这样做。另外，您`]'`最后应该替换为`']`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T21:05:07.533

我认为您正在寻找为数组索引使用变量：

```
$index = "Q{$ques_num}_ID";
echo $quizinfo[$index]; 
```

您遇到的问题是您已将整个表达式变成了一个字符串，其中包含一个数字，因此没有执行数组查找。

顺便说一句：拥有人类可读的索引对人类来说很好，但对计算机来说不是必需的。除非您特别需要这样做，否则我会更改它，以便它只是数字索引 - 它会简化您的代码。

# mysql - MySQL：如何使用 INNER JOIN 进行转换

> ID：16024632
> 
> 赞同：0
> 
> 时间：2013-04-15T21:02:30.273
> 
> 标签：mysql, sql

是否可以用`INNER JOIN`s 编写此查询？

```
SELECT links.product_id AS entity_id, products.sku, links.`linked_product_id` AS     linked_entity_id, products2.`sku` AS linked_skus
FROM catalog_product_entity AS products,
    catalog_product_link AS links,
    catalog_product_entity AS products2
WHERE links.`product_id` = products.`entity_id`
    AND links.`linked_product_id` = products2.`entity_id` 
```

另外，`catalog_product_link`有一个 column `type_id`，我想只获得最后带有条件的`type_id`值的行，但它不起作用。我该如何去只获取记录？`1``AND catalog_product_link.type_id = 1``type_id=1`

我遇到了一个问题，当我添加`WHERE links.type_id=1`到语句中时，结果是错误的。下面的所有`product_id`内容都是相同的数字（相同的 entity_id/product_id），并且下面的所有内容`sku`都是 NULL。`linked_product_id`并且`linked_skus`是正确的。

更多信息：

`catalog_product_entity`

```
| entity_id | sku | ... |
-------------------
|    1      | abc |     |
|    2      | qwe |     |
|    3      | yui |     | 
```

`catalog_product_link`

```
| product_id (same as entity_id) | linked_product_id | type_id |
----------------------------------------------------------------
|               1                |         5         |    1    |
|               1                |         6         |    1    |
|               2                |         1         |    2    |
|               3                |         1         |    1    |
|               3                |         2         |    1    |
|               3                |         4         |    1    | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:08:57.110

就像是...

```
SELECT
    p.sku,
    l.product_id AS entity_id, l.linked_product_id AS linked_entity_id
FROM catalog_product_entity AS p
     INNER JOIN catalog_product_link AS l
         ON p.entity_id= l.product_id
WHERE l.type_id = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T16:03:32.203

```
SELECT 
   links.product_id AS entity_id, 
   products.sku, 
   links.linked_product_id AS linked_entity_id, 
   products2.sku AS linked_skus
FROM catalog_product_link AS links
INNER JOIN 
  catalog_product_entity AS products ON products.entity_id = links.product_id
INNER JOIN 
  catalog_product_entity AS products2 ON products2.entity_id = links.linked_product_id
WHERE links.type_id = 1 
```

# regex - Powershell Get-Content -> Foreach-Object -> -replace ->Out-File 在每个文件的开头添加一个字符（0x00）

> ID：16024633
> 
> 赞同：4
> 
> 时间：2013-04-15T21:02:32.820
> 
> 标签：regex, powershell

我有一个在文件中执行正则表达式替换的函数。问题是它会在它接触的每个文件的开头添加一个字符（0x00）（即使是那些它找不到匹配的文件！）。由于我正在编辑**csproj**文件，MSBuild 给了我这个错误：

```
error MSB4025: The project file could not be loaded. '.', hexadecimal value 0x00, is an invalid character. Line 2, position 1. 
```

这是我的功能：

```
function fileStringRegExReplace ([string] $fileToChange, [string] $oldString, [string] $newString) {
    echo "f" | xcopy "$fileToChange" "$fileToChange.og.cs" /Y /Q

    $file = Get-Content "$fileToChange.og.cs" | 
        Foreach-Object {
            $_ -replace $oldString, $newString
        } |
        Out-File "$fileToChange"

    Remove-Item "$fileToChange.og.cs"
} 
```

如何替换我想要的行而不更改文件的任何其他部分？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T21:28:10.010

听起来像是在文件开头写了一个BOM。`-Encoding ASCII`您可以使用参数 on将编码设置为 ASCII（没有 BOM）`out-file`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-25T10:21:32.163

[Out-File](https://technet.microsoft.com/en-us/library/hh849882.aspx)的默认编码是**UTF-16**`Unicode`的 Windows 语言。只写ASCII集合中的字符时，UTF-16基本上有在每个字符前面加一个字节的效果。这解释了为什么 Visual Studio 抱怨字节。**`0x00``0x00`**

 **您尝试修改的 csproj 文件的 XML 声明为**UTF-8**，因此请使用`-Encoding UTF8`Out-File 中的选项。

不要使用 ASCII 编码，一旦 csproj 文件中包含非 ASCII 字符，这将导致问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-03T17:17:11.813

我遇到了同样的问题，在使用 a`ForEach`替换文本后，我遇到了问题。

对于我的解决方案，我只想找到最后一个`</Target>`并添加 append another `<Target></Target>`。

我尝试了这种方法，并且由于某种原因文件大小增加了一倍，并且`0x00`错误也失败了`Line: 2, Position: 1`。

我必须将此解决方案归功于@Matt，因为我自己可能不会弄清楚正则表达式：[https ://stackoverflow.com/a/28437855/740575](https://stackoverflow.com/a/28437855/740575)

这让我可以优雅地不使用这种`ForEach`方法。你应该在这个解决方案的某个地方找到你的答案。

```
$replaceVar = "<Target> ... </Target" ;
# NOTE: -Raw will read the entire file in as a string, without doing that
#       everything gets read in as an array of lines
$file = Get-Content file.csproj -Raw ;
$newFile = $file -replace "(?s)(.*)</Target>(.*)", "$1$replaceVar$2" ;

# csproj is UTF8
$newFile | Out-File -Encoding UTF8 "new.csproj" ; 
```

解决方案适用于 Visual Studio 和`msbuild.exe`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T21:05:09.810

尝试用 set-content 替换 out-file。**

# java - 带有 Google Maps API 示例项目的 MainActivity.java 中的错误

> ID：16024634
> 
> 赞同：0
> 
> 时间：2013-04-15T21:02:37.867
> 
> 标签：java, android, google-maps

我正在尝试使用 Google Play 服务的 Google Maps 演示，但在两行示例代码中返回错误。返回错误的代码如下：

```
new DemoDetails(R.string.circle_demo, R.string.circle_description,
                CircleDemoActivity.class), 
```

第一行的错误是“构造函数 MainActivity.DemoDetails(int, int, Class) 未定义。” 第二个错误是“CircleDemoActivity 无法解析为类型”。

这可能是一件微不足道的事情，我是 Android 开发的新手，所以请原谅我缺乏专业知识。

这是 MainActivity.java 中的其余代码：

```
/*
* Copyright (C) 2012 The Android Open Source Project
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/

package com.example.mapdemo;

import android.app.ListActivity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ListAdapter;
import android.widget.ListView;

import com.example.mapdemo.view.FeatureView;

/**
 * The main activity of the API library demo gallery.
 * <p>
 * The main layout lists the demonstrated features, with buttons to launch them.
 */
public final class MainActivity extends ListActivity {

/**
 * A simple POJO that holds the details about the demo that are used by the List Adapter.
 */
private static class DemoDetails {
    /**
     * The resource id of the title of the demo.
     */
    private final int titleId;

    /**
     * The resources id of the description of the demo.
     */
    private final int descriptionId;

    /**
     * The demo activity's class.
     */
    private final Class<? extends FragmentActivity> activityClass;

    public DemoDetails(
            int titleId, int descriptionId, Class<? extends FragmentActivity> activityClass) {
        super();
        this.titleId = titleId;
        this.descriptionId = descriptionId;
        this.activityClass = activityClass;
    }
}

/**
 * A custom array adapter that shows a {@link FeatureView} containing details about the demo.
 */
private static class CustomArrayAdapter extends ArrayAdapter<DemoDetails> {

    /**
     * @param demos An array containing the details of the demos to be displayed.
     */
    public CustomArrayAdapter(Context context, DemoDetails[] demos) {
        super(context, R.layout.feature, R.id.title, demos);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        FeatureView featureView;
        if (convertView instanceof FeatureView) {
            featureView = (FeatureView) convertView;
        } else {
            featureView = new FeatureView(getContext());
        }

        DemoDetails demo = getItem(position);

        featureView.setTitleId(demo.titleId);
        featureView.setDescriptionId(demo.descriptionId);

        return featureView;
    }
}

private static final DemoDetails[] demos = {new DemoDetails(
        R.string.basic_map, R.string.basic_description, BasicMapActivity.class),
        new DemoDetails(R.string.camera_demo, R.string.camera_description,
                CameraDemoActivity.class),
        new DemoDetails(R.string.events_demo, R.string.events_description,
                EventsDemoActivity.class),
        new DemoDetails(R.string.layers_demo, R.string.layers_description,
                LayersDemoActivity.class),
        new DemoDetails(
                R.string.locationsource_demo, R.string.locationsource_description,
                LocationSourceDemoActivity.class),
        new DemoDetails(R.string.uisettings_demo, R.string.uisettings_description,
                UiSettingsDemoActivity.class),
        new DemoDetails(R.string.groundoverlay_demo, R.string.groundoverlay_description,
                GroundOverlayDemoActivity.class),
        new DemoDetails(R.string.marker_demo, R.string.marker_description,
                MarkerDemoActivity.class),
        new DemoDetails(R.string.polygon_demo, R.string.polygon_description,
                PolygonDemoActivity.class),
        new DemoDetails(R.string.polyline_demo, R.string.polyline_description,
                PolylineDemoActivity.class),
        new DemoDetails(R.string.circle_demo, R.string.circle_description,
                CircleDemoActivity.class),
        new DemoDetails(R.string.tile_overlay_demo, R.string.tile_overlay_description,
                TileOverlayDemoActivity.class),
        new DemoDetails(R.string.options_demo, R.string.options_description,
                OptionsDemoActivity.class),
        new DemoDetails(R.string.multi_map_demo, R.string.multi_map_description,
                MultiMapDemoActivity.class),
        new DemoDetails(R.string.retain_map, R.string.retain_map_description,
                RetainMapActivity.class),
        new DemoDetails(R.string.raw_mapview_demo, R.string.raw_mapview_description,
                RawMapViewDemoActivity.class),
        new DemoDetails(R.string.programmatic_demo, R.string.programmatic_description,
                ProgrammaticDemoActivity.class)};

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ListAdapter adapter = new CustomArrayAdapter(this, demos);

    setListAdapter(adapter);
} 
```

谢谢。

编辑：应用程序崩溃了，我认为是因为谷歌地图与模拟器不兼容，但这是运行它时的 logcat：

`04-10 18:40:31.338: W/dalvikvm(2959): Unable to resolve superclass of Lcom/example/mapdemo/BasicMapActivity; (75) 04-10 18:40:31.396: W/dalvikvm(2959): Link of class 'Lcom/example/mapdemo/BasicMapActivity;' failed 04-10 18:40:31.396: E/dalvikvm(2959): Could not find class 'com.example.mapdemo.BasicMapActivity', referenced from method com.example.mapdemo.MainActivity.<clinit> 04-10 18:40:31.396: W/dalvikvm(2959): VFY: unable to resolve const-class 117 (Lcom/example/mapdemo/BasicMapActivity;) in Lcom/example/mapdemo/MainActivity; 04-10 18:40:31.396: D/dalvikvm(2959): VFY: replacing opcode 0x1c at 0x000d 04-10 18:40:31.447: W/dalvikvm(2959): Exception Ljava/lang/NoClassDefFoundError; thrown while initializing Lcom/example/mapdemo/MainActivity; 04-10 18:40:31.477: W/dalvikvm(2959): Class init failed in newInstance call (Lcom/example/mapdemo/MainActivity;) 04-10 18:40:31.477: D/AndroidRuntime(2959): Shutting down VM 04-10 18:40:31.477: W/dalvikvm(2959): threadid=1: thread exiting with uncaught exception (group=0x40a71930) 04-10 18:40:31.536: E/AndroidRuntime(2959): FATAL EXCEPTION: main 04-10 18:40:31.536: E/AndroidRuntime(2959): java.lang.ExceptionInInitializerError 04-10 18:40:31.536: E/AndroidRuntime(2959): at java.lang.Class.newInstanceImpl(Native Method) 04-10 18:40:31.536: E/AndroidRuntime(2959): at java.lang.Class.newInstance(Class.java:1319) 04-10 18:40:31.536: E/AndroidRuntime(2959): at android.app.Instrumentation.newActivity(Instrumentation.java:1054) 04-10 18:40:31.536: E/AndroidRuntime(2959): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097) 04-10 18:40:31.536: E/AndroidRuntime(2959): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230) 04-10 18:40:31.536: E/AndroidRuntime(2959): at android.app.ActivityThread.access$600(ActivityThread.java:141) 04-10 18:40:31.536: E/AndroidRuntime(2959): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234) 04-10 18:40:31.536: E/AndroidRuntime(2959): at android.os.Handler.dispatchMessage(Handler.java:99) 04-10 18:40:31.536: E/AndroidRuntime(2959): at android.os.Looper.loop(Looper.java:137) 04-10 18:40:31.536: E/AndroidRuntime(2959): at android.app.ActivityThread.main(ActivityThread.java:5041) 04-10 18:40:31.536: E/AndroidRuntime(2959): at java.lang.reflect.Method.invokeNative(Native Method) 04-10 18:40:31.536: E/AndroidRuntime(2959): at java.lang.reflect.Method.invoke(Method.java:511) 04-10 18:40:31.536: E/AndroidRuntime(2959): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793) 04-10 18:40:31.536: E/AndroidRuntime(2959): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560) 04-10 18:40:31.536: E/AndroidRuntime(2959): at dalvik.system.NativeStart.main(Native Method) 04-10 18:40:31.536: E/AndroidRuntime(2959): Caused by: java.lang.NoClassDefFoundError: com.example.mapdemo.BasicMapActivity 04-10 18:40:31.536: E/AndroidRuntime(2959): at com.example.mapdemo.MainActivity.<clinit>(MainActivity.java:98) 04-10 18:40:31.536: E/AndroidRuntime(2959): ... 15 more`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:10:05.207

缺少 CircleDemoActivity。添加它，这应该可以解决您的问题。

或者从您的文件中删除对它的所有引用...

# python - 接受有价值和无价值的选项

> ID：16024635
> 
> 赞同：3
> 
> 时间：2013-04-15T21:02:38.070
> 
> 标签：python, argparse

我有一个小脚本，我需要它能够接受带值和不带值的参数。

```
./cha.py --pretty-xml
./cha.py --pretty-xml=5 
```

我有这个。

```
parser.add_argument('--pretty-xml', nargs='?', dest='xml_space', default=4) 
```

但是当我在 xml_space 中使用 --pretty-xml 时将是“无”。如果我不在 xml_space 中写入此参数，则存储默认值。我需要完全相反的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T15:42:22.390

使用`const`关键字：

```
import argparse
parser = argparse.ArgumentParser()
parser.add_argument("--pretty-xml", nargs="?", type=int, dest="xml_space", const=4)
print(parser.parse_args([]))
print(parser.parse_args(['--pretty-xml']))
print(parser.parse_args(['--pretty-xml=5'])) 
```

结果是

```
Namespace(xml_space=None)
Namespace(xml_space=4)
Namespace(xml_space=5) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T21:09:10.877

省略`default`参数并改用自定义`Action`：

```
class PrettyXMLAction(argparse.Action):
    def __call__(self, parser, namespace, values, option_string=None):
        if not values:
            values = 4
        setattr(namespace, self.dest, values)

parser.add_argument('--pretty-xml', nargs='?', type=int, dest='xml_space', action=PrettyXMLAction) 
```

演示：

```
>>> parser = argparse.ArgumentParser()
>>> parser.add_argument('--pretty-xml', nargs='?', type=int, dest='xml_space', action=PrettyXMLAction)
PrettyXMLAction(option_strings=['--pretty-xml'], dest='xml_space', nargs='?', const=None, default=None, type=None, choices=None, help=None, metavar=None)
>>> parser.parse_args('--pretty-xml'.split())
Namespace(xml_space=4)
>>> parser.parse_args('--pretty-xml=5'.split())
Namespace(xml_space=5)
>>> parser.parse_args(''.split())
Namespace(xml_space=None) 
```

# django - 如何在 Django 中的 URL 以外的其他地方将参数传递给 HttpResponseRequest

> ID：16024636
> 
> 赞同：0
> 
> 时间：2013-04-15T21:02:38.387
> 
> 标签：django, url, django-context

我正在尝试在 Django 中编写一个重定向到自身的表单，显示会根据您在表单中输入的内容而变化。为此，我在后端检索 POST 数据并希望以这种方式显示一条消息：`{% if message %} {{ message }} {% endif %}` 问题是如何传递`message`参数。

我知道我可以使用

```
#urls.py
url(r'^form/(?P<message>)$', 'app.form', name='form')

#views.py
...my_message...
return HttpResponseRedirect(reverse('app:form', args=(my_message,)) 
```

但它会在 url 中显示消息，这不适合我的目的。你知道我怎么能做到并隐藏在我的后端，比如

```
#views.py
return HttpResponseRedirect(reverse('app:form'), {'message': my_message}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:13:06.230

使用[会话](https://docs.djangoproject.com/en/1.5/topics/http/sessions/)来存储消息——甚至是内置的[消息框架](https://docs.djangoproject.com/en/1.5/ref/contrib/messages/)。

# graph - 仙人掌图未正确显示

> ID：16024637
> 
> 赞同：2
> 
> 时间：2013-04-15T21:02:43.867
> 
> 标签：graph, monitoring, rrdtool, rrd, cacti

希望在那里能与你们所有的仙人掌专家取得联系。我曾尝试在 Cacti 论坛网站上发布相同的问题，但近一周后没有答案。希望在这里能有更多的运气。

我对 Cacti 很陌生，在过去的几天里，我一直在安装、配置等。

我现在处于需要将需要监控的系统（称为扩散）连接到仙人掌的阶段。Diffusion 是一个基于 java 的推送引擎，我的目标是绘制服务器公开的特定 MBean。

我创建了 Perl 脚本，以正确的方式为我提供所需的信息，并构建了一个图形模板来显示来自与线程池相关的 4 个数据源的数据。

到目前为止，这些值是固定的，因此结果始终是 0、3、8 和 10（4 个数据源，转储到 4 个 rrds）。

出于某种原因，虽然我能看到的唯一一条线是返回 0 的线，并且图形的大小在 0 和 1 之间，但我希望看到其他线以及图形的大小在 0 和上面的某个值之间10.

![在此处输入图像描述](https://i.stack.imgur.com/JJUbj.png)

为了清楚起见，日志（调试级别）没有显示任何警告，数据收集似乎运行良好，并且在创建源、模板等时我没有来自仙人掌的“抱怨”。

任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T15:18:35.677

经过几次尝试更改各种参数后，我设法通过简单地将图形类型更改为 GAUGE 来解决问题。

现在似乎工作得很好。

# java - 读取字符串作为对变量的引用

> ID：16024639
> 
> 赞同：2
> 
> 时间：2013-04-15T21:02:47.187
> 
> 标签：java, string, reference

我想从我的类数据源中读取一个参数：

```
public class Datasource {
public final static String M = "M"; 
public final static String M_SHEET ="Config";
public final static String M_LOC = "C6";
public final static int M_DEFAULT = 2; // default value
...
} 
```

通过使用方法changeParameters：

```
public static void changeParameter(String param, double value) {
    String parameter = param.toUpperCase(); // uppercase to match the final variable from Datasource

    InputStream inp = new FileInputStream(Datasource.EXCELFILENAME);
    // Excelconnection
    Workbook wb = WorkbookFactory.create(inp);
    String sheetName = "Datasource." + parameter + "_SHEET";
    Sheet sheet = wb.getSheet(sheetName);
    String excelCell = "Datasource." + parameter + "_LOC";
    int rowInt = getRow(excelCell);
    Row row = sheet.getRow(rowInt);
    int cellInt = getCell(excelCell);
    Cell cell = row.createCell(cellInt);
    cell.setCellValue(value);
    // Write the output to a file
    FileOutputStream fileOut = new FileOutputStream(Datasource. EXCELFILENAME);
    wb.write(fileOut);
    fileOut.close();
} 
```

getRow 和 getCell 都以字符串作为参数来获取 Excelrow 和 Excelcolumn。有谁知道我如何才能知道字符串 sheetName 和 excelCell 不被视为字符串，而是作为对来自数据源的字符串的引用（例如，访问“C6”而不是“Datasource.M_LOC”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:08:03.953

您可以为此使用反射。

```
Class clazz = DataSource.class;
Field field = clazz.getField("M_LOC"); // use getDeclaredField if the field isn't public
String str = (String)field.get(null); // it's a static field, so no need to pass in a DataSource reference 
```

或者，在 DataSource 中放置一个 hashmap，其中字段名称作为键，字段值作为值。

我相信`getField`并且`getDeclaredField`是线性时间方法，所以如果可能的话，你应该缓存它们的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T21:09:02.343

如果您要通过字符串引用事物，为什么要将它们存储为单独的变量？为什么不使用`Map<String, String>`? 这样，当您需要访问由 引用的字符串时`"Datasource.M_LOC"`，您可以使用

```
Map<String,String> referenceMap;
...
referenceMap.get(parameter+"_LOC"); 
```

# c# - 在实体框架中分配实体键

> ID：16024642
> 
> 赞同：0
> 
> 时间：2013-04-15T21:03:08.873
> 
> 标签：c#, entity-framework

我对实体框架中实体键的分配有非常精确的认识。

当您将变量设置为实体的实体键时，如果您先执行代码或先执行模型，它会将列设置为标识，但是如果我在模型第一类的默认构造函数中将实体键分配为 0，会发生什么英孚做吗？

EF 会注意到它是自动赋值并忽略我在构造函数中设置的默认值吗？

或者我不应该在检索数据时分配实体键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:47:55.490

到目前为止，我还没有看到第一种情况，即绝对没有其他方法可以设置`EntityKey`对象。但我假设您指的不是那个，而是设置一个 key *value*。

当主键由数据库生成时（标识列），几乎不需要设置主键值。如果您希望 EF 插入一个实体，则无需设置主键，而是将其设置[`EntityState`](http://msdn.microsoft.com/en-us/library/system.data.entitystate.aspx)为`Added`（直接或间接）。

我可以想到一种设置主键值很有用的场景：使用[存根实体](http://blogs.msdn.com/b/alexj/archive/2009/06/19/tip-26-how-to-avoid-database-queries-using-stub-entities.aspx)。例如，假设您知道必须删除 id 值为 3 的对象 A，但尚未从数据库中获取对象 A。所以没有可以改变状态的对象`Deleted`。在这种情况下，您可以通过创建仅填充其 Id 值的存根实体 A 来防止与数据库的往返，将其附加到上下文`Deleted`并保存更改。

# internet-explorer-8 - 背景图像显示正常，但在 IE8 中除外

> ID：16024643
> 
> 赞同：0
> 
> 时间：2013-04-15T21:03:22.547
> 
> 标签：internet-explorer-8

我在这里遇到了一个真正的问题，我无法解决。已经建立了一个响应式站点，并且在容器 div 中设置的淡奶油重复背景图像仅在 IE8 中没有显示在我的 11 个站点页面中的两个上 - 在“主页”页面和“信息”页面上 - 。您会看到深棕色背景设置在身体中，但看不到容器中的淡奶油。有任何想法吗？已经在很多其他浏览器中查看过，还不错。只是不是IE8！

这是引入背景图像的样式表代码：

```
body{background:#4f4a39 url(../img/bgdark.png) repeat}

.container{background:#c9c0ae url(../img/bgpale.jpg) repeat} 
```

和[网站的链接](http://europewidebuilders.co.uk/dining.html)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:17:26.230

“主页”和“信息”页面都`<div class='footer'>`没有`<div class='container'>`. 对于其他页面，最后一个 div 上的此页脚类已`clear: both`指定。这确保了容器 div 有一个高度。在“信息”和“主页”页面上，容器 div 没有高度。一个简单的解决方法是将页脚添加到两个页面？如果那是不可能的。将 'clear: both' 添加到容器 div 内最后一个 div 的 css 类中。

# c++ - 谁能解释为什么 srand(time(0) 中有一个 0？

> ID：16024645
> 
> 赞同：-5
> 
> 时间：2013-04-15T21:03:36.903
> 
> 标签：c++, srand

我刚开始用 C++ 编程，遇到了`srand(time(0))`. 谁能解释为什么有一个 0 in `srand(time(0))`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:06:05.663

因为这是 C`time`函数的签名：它需要一个指向存储时间的位置的指针，或者为 null。在这种情况下`0`，与文字空指针相同（这意味着不要将时间存储在备用位置）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T21:05:29.233

它使用当前时间值为随机数生成器播种，因此每次运行程序时它都会获得一个新值。

0 相当于 NULL。参数 to`time()`采用指向 a 的指针，`time_t`结果也可以存储在其中。

# .net - Slow Cheetah AfterTargets="TransformAllFiles" 在本地工作，而不是在构建服务器上

> ID：16024650
> 
> 赞同：1
> 
> 时间：2013-04-15T21:04:00.853
> 
> 标签：.net, cruisecontrol.net, msbuild-4.0, slowcheetah

我正在使用 Slow Cheetah 为控制台应用程序转换 app.config 文件。在构建期间，我还调用此应用程序。最初我使用构建后事件，但后来我意识到 Slow Cheetah 转换在构建后事件之后运行，所以我使用了这里解释的解决方案：

[SlowCheetah 在构建后事件后执行](https://stackoverflow.com/questions/12424047/slowcheetah-executes-after-post-build-events)

所以基本上，在我的迁移项目中，我有以下部分（用于诊断的回声/类型）

```
<Target Name="AfterBuild" AfterTargets="TransformAllFiles">
    <Exec Command="Echo $(OutputPath)" />
    <Exec Command="Type $(OutputPath)Migrations.exe.config" />
    <Exec Command="$(OutputPath)Migrations.exe" />
</Target> 
```

这在当地很有效。但是，当部署到 CI 服务器（CruiseControl + MSBuild 4.0）时，我观察到奇怪的行为。这些任务现在“在”Slow Cheetah 之前运行。为了验证我“输入”配置文件，我可以看到它没有被转换。但是，一旦构建完成并进入构建框，我会在同一位置看到已转换的文件。

因此，Slow Cheetah 正在完成其工作，但出于某种原因，这些任务运行后。有什么建议可以解决吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T21:43:51.383

好的，所以我想通了。事实证明，它在本地也不起作用。它只是在 VS 2010 IDE 中我没有每次都运行干净的构建，所以它正在拾取已经转换的文件。

为了解决它，我最终运行了 MSBuild 命令行，当我这样做时，我注意到最后一个目标运行是`ScReplaceAppConfigItem`. 我试图用它`AfterTargets`来强制我的任务运行，但它没有帮助。我的任务仍然在以前运行。

使它起作用的原因实际上是使用了较旧的`DependsOnTargets`属性：

```
<Target Name="AfterBuild" DependsOnTargets="ScReplaceAppConfigItem">
  <Exec Command="Echo $(OutputPath)" />
  <Exec Command="Type $(OutputPath)Migrations.exe.config" />
  <Exec Command="$(OutputPath)Migrations.exe" />
</Target> 
```

# c++ - C++ 读取 txt 文件 CSV 值

> ID：16024653
> 
> 赞同：0
> 
> 时间：2013-04-15T21:04:15.903
> 
> 标签：c++, visual-c++, csv, file-io

我知道这篇文章以前是关于堆栈溢出的，我结合了各种教程；但为什么这段代码会导致执行错误 - 它确实编译。

```
void leaderBoard::loadFromFile(void)
{
    string line;
    ifstream leaderBoardFile ("leaderboard.data");
    vector<string> playerInfoVector;
    if (leaderBoardFile.is_open())
    {
        while ( leaderBoardFile.good() )
        {
            playerInfoVector.clear();
            getline (leaderBoardFile,line);
            std::string input = line;
            std::istringstream ss(input);
            std::string token;
            //cout << line << endl;

            while(getline(ss, token, ',')) {
                //for current line;
                playerInfoVector.push_back(token);
            }

            string firstName = playerInfoVector.at(0);
            string stringAge = playerInfoVector.at(1);
            string stringScore = playerInfoVector.at(2);

            //int age;
            //stringstream(stringAge) >>    age;
            //int score;
            //stringstream(stringScore) >>  score;
            //addScore(firstName,age,score);
            ////stringstream(stringAge) >> age;

            ////Add text to vector (push back)
            playerInfoVector.clear();
        }
        leaderBoardFile.close();
    }

    else cout << "Unable to open file";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:07:07.287

是的，很多次

```
 while ( leaderBoardFile.good() )
    {
        playerInfoVector.clear();
        getline (leaderBoardFile,line); 
```

应该

```
 while ( getline (leaderBoardFile,line) )
    {
        playerInfoVector.clear(); 
```

令人难以置信的是，这个错误重复了多少次。您实际上在第二个 while 循环中做对了，那么为什么在第一个循环中错了呢？

不幸的是，有些教程也弄错了。

添加检查您的向量中确实有三个项目也是明智的。像这样的东西

```
 if (playerInfoVector.size() < 3)
        {
            cerr << "Not enough items in player info vector\n";
            exit(1);
        }
        string firstName = playerInfoVector.at(0);
        string stringAge = playerInfoVector.at(1);
        string stringScore = playerInfoVector.at(2); 
```

# python - 将python摊铺机安装到ubuntu

> ID：16024654
> 
> 赞同：0
> 
> 时间：2013-04-15T21:04:19.627
> 
> 标签：python, ubuntu, paver

我正在尝试使用此命令将 paver 安装到 ubuntu (12.04)

```
sudo apt-get install python-paver 
```

我收到此错误消息

```
Reading package lists... Done
Building dependency tree       
Reading state information... Done
E: Unable to locate package python-paver 
```

那么如何在ubuntu中安装摊铺机呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T21:06:43.923

从[文档](https://github.com/paver/paver/blob/master/README.rst#installation)中：

要使用 pip 安装，请执行以下操作：

```
$ pip install -U Paver 
```

使用 easy_install 安装：

```
$ easy_install -U Paver 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-21T02:43:05.817

我刚刚将一个新的 Debian 软件包上传到[我的 Launchpad PPA](https://launchpad.net/~eighthave/+archive/flexget)，用于 Ubuntu 精确、量子、稀有、俏皮和可信赖。我也刚刚将它上传到[官方 Debian 仓库](http://packages.debian.org/search?keywords=python-paver)，所以它应该再次成为官方 Debian 和 Ubuntu 仓库的一部分。

# android - 有没有办法找出显示了所有应用程序屏幕？

> ID：16024656
> 
> 赞同：0
> 
> 时间：2013-04-15T21:04:22.897
> 
> 标签：android, live-wallpaper

我正在为 Android 创建动态壁纸，但遇到了手动滚动的问题（不使用 onOffsetsChanged 方法）。滚动就像一个魅力，除了一个，但非常不愉快的副作用 - 当用户打开“AllApps”屏幕并且这个屏幕是半透明的（就像在 Xperia 手机上一样）时，壁纸会继续对触摸事件做出反应用户使用他/她安装的应用程序和滚动浏览屏幕。

我知道如果这个屏幕是半透明的，从壁纸的“观点”来看，没有任何改变。它继续渲染并继续处理所有触摸事件。

所以，问题是 - 有没有办法追踪用户打开“AllApps”屏幕并停止处理触摸事件直到该屏幕关闭的时刻？有任何想法吗？

# facebook-graph-api - Facebook 访问令牌已过期 - iOS 6 社交框架

> ID：16024658
> 
> 赞同：9
> 
> 时间：2013-04-15T21:04:33.027
> 
> 标签：facebook-graph-api, ios6, facebook-access-token

我正在制作一个基于 iOS6 Social Framework 的应用程序......它运行良好，但几个月后出现了一个奇怪的错误。

我将 JSON Facebook 数据导入到 NSDictionary 的 NSLog 是：

```
profiledictionary: {
error = {
code = 190;
"error_subcode" = 463;
message = "Error validating access token: Session has expired at unix time 1365610034\. The current unix time is 1366032783.";
type = OAuthException; 
```

似乎我的访问令牌已过期，但 iOS6 社交框架不应该自动处理它吗？

关于如何解决它并避免将来出现此类问题的任何想法，以便我可以安全地发布一个真正的应用程序？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-16T20:40:15.147

终于明白了……有必要检查 NSDictionary 是否有一个名为“error”的对象（在这种情况下，Facebook 错误有关令牌已过期），如果是，则调用一个方法来更新 ACAccount：

```
if([self.profileDictionary objectForKey:@"error"]!=nil)
{
[self attemptRenewCredentials]; 
}

-(void)attemptRenewCredentials{
    [self.accountStore renewCredentialsForAccount:(ACAccount *)self.facebookAccount completion:^(ACAccountCredentialRenewResult renewResult, NSError *error){
        if(!error)
        {
            switch (renewResult) {
                case ACAccountCredentialRenewResultRenewed:
                    NSLog(@"Good to go");
                    [self getFacebookAccount];
                    break;
                case ACAccountCredentialRenewResultRejected:
                    NSLog(@"User declined permission");
                    break;
                case ACAccountCredentialRenewResultFailed:
                    NSLog(@"non-user-initiated cancel, you may attempt to retry");
                    break;
                default:
                    break;
            }

        }
        else{
            //handle error
            NSLog(@"error from renew credentials%@",error);
        }
    }];
} 
```

# javascript - 如何修改此 javascript 以忽略查询字符串中的任何数据？

> ID：16024659
> 
> 赞同：0
> 
> 时间：2013-04-15T21:04:33.417
> 
> 标签：javascript, facebook, url, url-rewriting, facebook-like

本质上，我有这个网站，其内容会根据用户在查询字符串中输入的内容而变化。

当用户输入 mysite.com/?1 时，它会为 1 加载内容，为 2 加载 /?2

我的问题是我的页面中有一个类似 Facebook 的按钮，为了使其正常工作，我编写了以下 js 代码：

```
<script type="text/javascript">
    var sUrl = window.location;
    document.getElementById('fbcom').setAttribute('href', sUrl);
</script> 
```

这将获取 url 并允许用户喜欢与技术上一个文件不同的内容。

我的问题是，当用户在 facebook 上喜欢例如 /?1 时，如果有人在他们的新闻源上单击此链接并决定他们也喜欢它，从技术上讲，他们会喜欢页面 /?1 - 以及所有额外的 facebook url 末尾的代码，因此返回 /?1 之类的尚未注册。

当它们从 facebook 定向时，如何修改上述代码以忽略 url 末尾的任何 facebook 垃圾？

重要提示：ID /?1 可以是从 1 位到 4 位的任何数字，例如 /?1234 我目前的 JS 能力很差。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:10:27.337

您可以组合您实际想要保留的[属性`location`](https://developer.mozilla.org/en-US/docs/DOM/window.location#Properties)`protocol`- 这似乎是,`host`和`pathname`：

```
var sLoc = window.location;
var sUrl = sLoc.protocol + '//' + sLoc.host + sLoc.pathname; 
```

您也可以只使用`pathname`as [relative-from-root](https://stackoverflow.com/q/5559578/)：

```
var sUrl = window.location.pathname; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T21:07:38.180

你可以用正则表达式做到这一点：

```
var sUrl = window.location.toString().replace(/^(.*?)(\?.*)?$/, '$1'); 
```

# css - 如何解决 Firefox 中的这种视觉故障？

> ID：16024661
> 
> 赞同：1
> 
> 时间：2013-04-15T21:04:55.443
> 
> 标签：css, firefox, tabs, less, visual-glitch

我正在开发一个小型 LESS 前端库，我将在未来的项目中使用它。我还计划在它完成并推断有用时以开源许可证发布它。

这个库将包括花哨的 Chrome 风格的标签。当前使用 CS3 边框半径的实现相当粗糙，并且基于我在互联网上找到的小提琴，它根本不支持非 webkit 浏览器。由于它将用于各种各样的项目，因此我必须使其与大多数主要浏览器兼容。经过一些调整后，它在 FF 和 Chrome 上看起来几乎一样，但在 Firefox 上它有一些视觉故障。

相关的LESS源部分：

```
// Tabs
.fancy-tabs(@tab-color; @active-tab-color; @hover-tab-color; @click-tab-color)
{
    margin: 0;
    list-style-type : none;
    line-height : 35px;
    max-height: 35px;
    overflow: hidden;
    display: inline-block;
    padding-right: 20px;

    >li
    {
        .fancy-tab(@tab-color; @active-tab-color; @hover-tab-color; @click-tab-color);
    }
}

.fancy-tab(@tab-color; @active-tab-color; @hover-tab-color; @click-tab-color)
{
    // Links
    a
    {
        // To make the other parts of the tab clickable
        padding: 0 1em;
        margin: 0 -1em;

        display: inline-block;
        // max-width:100%;
        overflow: hidden;
        text-overflow: ellipsis;
        text-decoration: none;
        color: inherit;
    }

    // Styling the tab
    float : left;
    margin : 5px -10px 0;
    border-top-right-radius: 25px 170px;
    border-top-left-radius: 20px 90px;
    padding : 0 30px 0 25px;
    height: 170px;
    background: @tab-color;
    position : relative;
    box-shadow: 0 10px 20px rgba(0,0,0,.5);
    max-width : 200px;
    .transition(all .2s);

    // Indent the first child
    &:first-child
    {
        margin-left: 10px;
    }

    // Fancy rounding
    &:before, &:after{
        content : '';
        background : @transparent;
        height: 20px;
        width: 20px;
        border-radius: 100%;
        border-width: 10px;
        top: 0px;
        border-style : solid;
        position : absolute;
        .transition(inherit);
    }

    &:before{
        border-color : @transparent @tab-color @transparent @transparent;
        .rotate(48deg);
        left: -23px;
    }

    &:after{
        border-color : @transparent @transparent @transparent @tab-color;
        .rotate(-48deg);
        right: -17px;
    }

    // Colorize active tab

    &:active{
      background: @click-tab-color;
    }

    &:hover:before{
      border-color : @transparent @hover-tab-color @transparent @transparent;
    }

    &:hover:after{
      border-color : @transparent @transparent @transparent @hover-tab-color;
    }

    &:active:before{
        border-color : @transparent @click-tab-color @transparent @transparent;
    }

    &:active:after{
        border-color : @transparent @transparent @transparent @click-tab-color;
    }

    &.ac
    {
        z-index: 2;
        background: @active-tab-color !important;

        &:before{
            border-color : @transparent @active-tab-color @transparent @transparent;
        }

        &:after{
            border-color : @transparent @transparent @transparent @active-tab-color;
        }
    }

    // Applying pointer effects
    .hover(highlight, @hover-tab-color);
    .click(highlight, @click-tab-color);
} 
```

小提琴使用编译的 CSS：http: [//jsfiddle.net/kdani3/G9QE9/1/](http://jsfiddle.net/kdani3/G9QE9/1/)

我认为这个问题很可能与 Gecko 的边界半径渲染引擎有关，但我不知道任何解决方法。

**截屏：**

![：](https://i.stack.imgur.com/bkArm.png)

# python - 在 Python (3.3) 中生成相关数据

> ID：16024677
> 
> 赞同：15
> 
> 时间：2013-04-15T21:05:54.660
> 
> 标签：python, r, numpy, scipy, correlation

在 R 中有一个函数（`cm.rnorm.cor`来自 package `CreditMetrics`），它获取样本数量、变量数量和相关矩阵以创建相关数据。

Python中是否有等价物？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-15T23:20:07.750

类的方法[`multivariate_normal`](https://numpy.org/doc/stable/reference/random/generated/numpy.random.Generator.multivariate_normal.html)是你想要的功能。`Generator``numpy.random`

例子：

```
import numpy as np
import matplotlib.pyplot as plt

num_samples = 400

# The desired mean values of the sample.
mu = np.array([5.0, 0.0, 10.0])

# The desired covariance matrix.
r = np.array([
        [  3.40, -2.75, -2.00],
        [ -2.75,  5.50,  1.50],
        [ -2.00,  1.50,  1.25]
    ])

# Generate the random samples.
rng = np.random.default_rng()
y = rng.multivariate_normal(mu, r, size=num_samples)

# Plot various projections of the samples.
plt.subplot(2,2,1)
plt.plot(y[:,0], y[:,1], 'b.', alpha=0.25)
plt.plot(mu[0], mu[1], 'ro', ms=3.5)
plt.ylabel('y[1]')
plt.axis('equal')
plt.grid(True)

plt.subplot(2,2,3)
plt.plot(y[:,0], y[:,2], 'b.', alpha=0.25)
plt.plot(mu[0], mu[2], 'ro', ms=3.5)
plt.xlabel('y[0]')
plt.ylabel('y[2]')
plt.axis('equal')
plt.grid(True)

plt.subplot(2,2,4)
plt.plot(y[:,1], y[:,2], 'b.', alpha=0.25)
plt.plot(mu[1], mu[2], 'ro', ms=3.5)
plt.xlabel('y[1]')
plt.axis('equal')
plt.grid(True)

plt.show() 
```

结果：

[![散点图](https://i.stack.imgur.com/BGcIs.png)](https://i.stack.imgur.com/BGcIs.png)

另请参阅SciPy Cookbook 中的[CorrelatedRandomSamples](http://www.scipy.org/Cookbook/CorrelatedRandomSamples)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-15T22:14:16.047

如果您将协方差矩阵 Cholesky 分解`C`为`L L^T`，并生成一个独立的随机向量`x`，那么`Lx`将是一个具有协方差的随机向量 `C`。

```
import numpy as np
import matplotlib.pyplot as plt
linalg = np.linalg
np.random.seed(1)

num_samples = 1000
num_variables = 2
cov = [[0.3, 0.2], [0.2, 0.2]]

L = linalg.cholesky(cov)
# print(L.shape)
# (2, 2)
uncorrelated = np.random.standard_normal((num_variables, num_samples))
mean = [1, 1]
correlated = np.dot(L, uncorrelated) + np.array(mean).reshape(2, 1)
# print(correlated.shape)
# (2, 1000)
plt.scatter(correlated[0, :], correlated[1, :], c='green')
plt.show() 
```

![在此处输入图像描述](https://i.stack.imgur.com/pKG0M.png)

参考：见[Cholesky 分解](http://en.wikipedia.org/wiki/Cholesky_decomposition#Monte_Carlo_simulation)

* * *

如果您想生成两个系列，`X`并且`Y`，具有特定的[（皮尔逊）相关系数](http://en.wikipedia.org/wiki/Correlation_and_dependence#Pearson.27s_product-moment_coefficient)（例如 0.2）：

```
rho = cov(X,Y) / sqrt(var(X)*var(Y)) 
```

你可以选择协方差矩阵

```
cov = [[1, 0.2],
       [0.2, 1]] 
```

这使得`cov(X,Y) = 0.2`, 和方差, `var(X)`and`var(Y)`都等于 1。所以`rho`等于 0.2。

例如，下面我们生成成对的相关序列`X`和`Y`1000 次。然后我们绘制相关系数的直方图：

```
import numpy as np
import matplotlib.pyplot as plt
import scipy.stats as stats
linalg = np.linalg
np.random.seed(1)

num_samples = 1000
num_variables = 2
cov = [[1.0, 0.2], [0.2, 1.0]]

L = linalg.cholesky(cov)

rhos = []
for i in range(1000):
    uncorrelated = np.random.standard_normal((num_variables, num_samples))
    correlated = np.dot(L, uncorrelated)
    X, Y = correlated
    rho, pval = stats.pearsonr(X, Y)
    rhos.append(rho)

plt.hist(rhos)
plt.show() 
```

![在此处输入图像描述](https://i.stack.imgur.com/18Gob.png)

如您所见，相关系数通常接近 0.2，但对于任何给定的样本，相关性很可能不会完全为 0.2。

# c++ - 从 Windows 7 任务栏中禁用“Aero Blur”（使用 C++？）

> ID：16024678
> 
> 赞同：4
> 
> 时间：2013-04-15T21:05:59.470
> 
> 标签：c++, windows, winapi, user-interface, taskbar

不久前我发现了一个小程序，它可以让我禁用 Aero Blur，同时保持主题附带的透明度。该程序几乎可以处理所有内容，但任务栏似乎仍然模糊了恰好位于其下方的所有内容。

这种奇怪的行为让我开始在 C++ 中试验 DWM api。可悲的是，这并没有真正帮助我，因为无论我使用什么功能——比如`DwmEnableBlurBehindWindow()`——，它们都不会以我想要的方式真正影响任务栏。我什至尝试将任务栏所有者“窗口”的 alpha 级别调低，但遗憾的是这也不起作用 - 它使任务栏*图标*也变得透明，这对我来说是一个禁忌，它实际上并没有消除模糊它只是让效果变弱了。

看来我的技能不足以完成这项任务，我在问你 - 如何从 Windows 7 任务栏中删除 Aero 模糊？（可能使用 C++）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:49:03.957

删除可以的透明度，否则转到

通过右键单击桌面进行个性化。

转到主题，个性化主题，

并找到透明度/不透明度。如果您想要没有模糊并启用透明度，请将其设为 100%

否则禁用透明度。

你可以通过使用注册表做 twiks 来使用 c++ 来做到这一点。

Windows 注册表编辑器版本 5.00

```
[HKEY_CURRENT_USER\Software\Microsoft\Windows\DWM]
"Composition"=dword:00000000
"CompositionPolicy"=dword:00000000
"ColorizationColor"=dword:6b74b8fc
"ColorizationColorBalance"=dword:00000008
"ColorizationAfterglow"=dword:6b74b8fc
"ColorizationAfterglowBalance"=dword:0000002b
"ColorizationBlurBalance"=dword:00000031
"ColorizationGlassReflectionIntensity"=dword:00000032
"ColorizationOpaqueBlend"=dword:00000000
"EnableAeroPeek"=dword:00000001
"AlwaysHibernateThumbnails"=dword:00000000 
```

这是 Windows 7 的值，

如果你在这里改变，你会得到结果。它包含您需要更改的所有内容。

您可以更改这三个 ColorizationBlurBalance、ColorizationGlassReflectionIntensity、ColorizationOpaqueBlend 的值

我认为那会做:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T18:13:49.877

我找到了一个可以消除模糊的小程序。

[链接到 DeviantArt](http://dblake1.deviantart.com/art/Taskbar-Blur-Toggle-0-2-0-412358153)

# google-chrome-devtools - Ctrl-S 在 Chrome 开发工具 Sources 选项卡中具体做什么？

> ID：16024682
> 
> 赞同：1
> 
> 时间：2013-04-15T21:06:18.083
> 
> 标签：google-chrome-devtools

Chrome 开发工具 Sources 标签的本地保存功能非常强大。

但是，我不能完全说出实际发生了什么样的变化。

实际激活了哪些更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T19:26:27.693

Ctrl-S 将您的更改应用到 v8。因此，动态页面行为将根据更改的代码以不同的方式工作。

文件标题中的星号表示文件中的最近更改尚未发送到 v8.8。

如果您想在重新加载页面后查看更改，则必须将更改的文件保存到 Web 服务器获取它的位置。您可以在上下文菜单的帮助下做到这一点。

# mysql - MySQL：在视图中的选择中选择？

> ID：16024683
> 
> 赞同：0
> 
> 时间：2013-04-15T21:06:23.783
> 
> 标签：mysql, join, view

我正在尝试为我的数据库重建一个*视图*，这是我正在构建的曲棍球统计应用程序。

我的情况是这样的：我正在记录得分的数据，每个`IndividualScoreHockey`都有一个 `TeamId`和`GameId`。有了这些数据，我可以把它拿到`MatchFixture`桌子上，用`GameId`来确定哪两支球队正在比赛中。

因此，在我对 的看法中`AllScoringPlays`，我想创建一个标题为的专栏`OpponentId`，它会告诉我反对`TeamId`的团队的成员`Goal`。所以我相信我需要使用from查询`MatchFixture`表并比较在哪里or不等于from和(ISH) 等于(MF)`TeamId``IndividualScoreHockey``HomeTeamId``AwayTeamId``TeamId``IndividualScoreHockey``GameId``Id`

我不确定如何创建一个执行此操作的子查询，我相信它会类似于以下内容：

`SELECT (HomeTeamId OR AwayTeamId) AS OpponentId FROM MatchFixture WHERE Id = foo AND (HomeTeamId != bar OR AwayTeamId != bar)`

现在，我的观点是这样的：

```
CREATE VIEW `AllScoringPlays` AS
SELECT 
    `ISH`.`GameId` AS `GameId`,
    `ISH`.`TeamId` AS `TeamId`,
    `MF`.`SeasonId` AS `SeasonId`,
    `ISH`.`Goal` AS `GoalId`,
    `ISH`.`P_Assist` AS `P_AssistId`,
    `ISH`.`S_Assist` AS `S_AssistId`,
    `ISH`.`Time` AS `Time`,
FROM
    (((((`IndividualScoreHockey` `ISH`
    join `User` `UG` ON ((`ISH`.`Goal` = `UG`.`Id`)))
    join `Team` `T` ON ((`T`.`Id` = `ISH`.`TeamId`)))
    join `MatchFixture` `MF` ON ((`ISH`.`GameId` = `MF`.`Id`)))
    left join `User` `UPA` ON ((`ISH`.`P_Assist` = `UPA`.`Id`)))
    left join `User` `USA` ON ((`ISH`.`S_Assist` = `USA`.`Id`)))
ORDER BY `ISH`.`Period` , `ISH`.`Time` 
```

这是我必须使用的数据的粗略图

`MatchFixture`：

## 身份证 | 季节 ID | 联赛ID | 主队ID | 客队ID | 日期

`IndividualScoreHockey`：

## 身份证 | 团队 ID | 游戏ID | 目标 | P_Assist | S_辅助 | 时间

（`Goal`、`P_Assist`和`S_Assist`columns 是归因于该得分游戏的玩家的 ID）

我对视图真的很陌生，所以我不确定在哪里执行这个子查询。或者也许我可以加入，我不确定。任何帮助将非常感激。如果我在这里屠杀了任何东西，请随时发表评论，我可以尝试更好地解释它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T22:02:42.710

如果我理解您的查询正确，您可以在您已经加入的记录中找到`OpponentId`您想要的 as`HomeTeamId`或as 。然后，您只需将其添加到您选择的字段列表中即可获得您想要的结果：`AwayTeamId``MatchFixture``MF`

```
CASE WHEN MF.HomeTeamId = ISH.TeamId THEN MF.AwayTeamId ELSE MF.HomeTeamId
END AS OpponentId 
```

# sitecore - Sitecore：关注 Sitecore Query 中的关系链接

> ID：16024684
> 
> 赞同：0
> 
> 时间：2013-04-15T21:06:24.850
> 
> 标签：sitecore, sitecore6

我有一个与标准 Sitecore 意义上的“文档”不对应的项目结构。它对应于数据项。

我的项目具有的关系之一如下：

```
Person -> State -> Country 
```

一个人有一个到一个州的链接字段，而一个州有一个到一个国家的链接字段。

我的问题是：如何编写查询来检索所有最终链接到某个缩写国家的人？

我对如何在 Sitecore Query 中执行此操作感到困惑。我目前的解决方案是使用 LINQ 和几个查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T22:36:41.193

假设这些项目之间的链接是使用参考字段创建的，例如 Droplink、Treelist、Droptree 等，您可以使用 Sitecore Links 数据库遍历参考/引荐来源。

这是一个以国家/地区项目开头并获取任何引用状态的示例（未经测试）。对状态执行相同的查询以获取任何推荐人。结果将添加到通用`List<Item>`集合中。

```
List<Item> peopleList = new List<Item>();

var countryReferences = Globals.LinkDatabase.GetReferences(countryItem);
var referringStates = countryReferences.Select(c => c.GetTargetItem()).Where(c => c.Template.Key == "state");
foreach (var state in referringStates)
{
    var stateReferences = Globals.LinkDatabase.GetReferences(state);
    var referringPeople = stateReferences.Select(s => s.GetTargetItem()).Where(s => s.Template.Key == "person");
    foreach (var person in referringPeople)
    {
        peopleList.Add(person);
    }
} 
```

# cognos - Cognos 报告在钻取到另一个报告期间变得疯狂

> ID：16024686
> 
> 赞同：1
> 
> 时间：2013-04-15T21:06:30.583
> 
> 标签：cognos

我有一个 Cognos Express 版本 9.5 报告，其中在列表列上定义了钻取，打开第二个报告，将对应的数据项值作为参数传递给它。

第二个报告正确打开，显示使用钻取期间收到的参数过滤的数据。

问题是第二个报告在不同的几秒钟内需要永远打开和冻结我的浏览器......这很奇怪，因为这个问题仅在打开第二个报告时发生，而不是在打开它时直接填写可选参数迅速的...

使用浏览器调试器（f12）我注意到`http://my_server/p2pd/servlet/dispatch`在打开第二个报告之前被调用了数百次，这就是导致浏览器冻结的原因......

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T03:41:35.683

尝试使用“Drill Through Assistant”来帮助调试您的 Drill-Through 定义。

[这是 IBM 站点的链接，描述了如何使用钻取助手。](http://pic.dhe.ibm.com/infocenter/cx/v9r5m0/index.jsp?topic=/com.ibm.swg.im.cognos.ug_cra.9.5.0.doc/ug_cra_id23558AccessDTAssistant.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:11:35.870

将我的报告迁移到 COGNOS 10.1.1 解决了这个问题......

# objective-c - 用于弹出窗口的 Cocoa 库，其标题与值不同

> ID：16024688
> 
> 赞同：1
> 
> 时间：2013-04-15T21:06:42.927
> 
> 标签：objective-c, cocoa

我正在寻找解决这个问题的最佳方法。我有一个弹出按钮，里面有 4 个条目。我希望用户能够更改它们，但是当弹出按钮更改并且我访问所选值时，它将是我的预定义值，而不是他们自定义的值。

**例子**

```
|Value1|
|Value2|
|Value3|
|Value4| 
```

是我的预定义。他们可能会将它们更改为

```
|1Value|
|2Value|
|3Value|
|4Value| 
```

但是，当他们选择时，`3Value`我需要查看代码`Value3`。

是否已经存在支持此功能的库？如果不是，那么做这样的事情的最佳方法是什么？这适用于 Mac OS X 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:55:00.890

在`NSPopUpButton`你会发现一个属性`indexOfItem`。只需使用索引来识别项目。

```
NSArray *original = // the values of the original items 
NSInteger *selected = [popUpButton indexOfItem:popUpButton.selectedItem];
id originalItem = [original objectAtIndex:selected]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T20:18:21.997

我最终将 coredata 与 a`apieKey`和`displayValue`. 然后，我在需要时使用获取请求来获取密钥（原始值）。

# jquery - 使用 jQuery 动态显示覆盖元素？

> ID：16024690
> 
> 赞同：0
> 
> 时间：2013-04-15T21:06:52.333
> 
> 标签：jquery, html, css

所以我正在尝试使用 jQuery 在我的图像顶部动态显示“Pin this”按钮。问题是，当按钮显示时，它会将实际图像推过去。这是实时视图：

[http://codepen.io/anon/pen/rGAzy](http://codepen.io/anon/pen/rGAzy)

通过将位置更改为绝对位置来解决问题，但这样做会将按钮一直带到顶部。我想测试的页面之一是[http://fstoppers.com/500px-announces-a-new-portfolio-system-and-new-prices](http://fstoppers.com/500px-announces-a-new-portfolio-system-and-new-prices)

我从其他人那里继承了主题，所以如果我将其更改为具有绝对位置，它将出现在整个网站上。

我在处理这个问题时都错了吗？如何使用动态按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:10:21.320

确实是绝对的，但要添加`position: relative;`到父`p`标签。

[http://codepen.io/anon/pen/gvKzE](http://codepen.io/anon/pen/gvKzE)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T21:10:25.643

这是最好的解决方案，无需额外的 Javascript，只需更改您的 html 结构：

```
<div id="container" style="position: relative;">
    <img />
    <div class="pin-button" style="position: absolute;">
    </div>
</div> 
```

# php - 使用 Simple HTML DOM 提取“a”URL

> ID：16024692
> 
> 赞同：0
> 
> 时间：2013-04-15T21:06:56.683
> 
> 标签：php, simple-html-dom

我有这个代码用于从表中抓取团队名称

```
$url = 'http://fantasy.premierleague.com/my-leagues/303/standings/';
$html = @file_get_html($url);
//Cut out the table
$FullTable = $html->find('table[class=ismStandingsTable]',0);
//get the text from the 3rd cell in the row 
$teamname = $FullTable->find('td',2)->innertext;
echo $teamname; 
```

这很有效..并给出了这个输出....

```
<a href="/entry/110291/event-history/33/">Why Always Me?</a> 
```

但是当我添加这些行时..

```
$teamdetails = $teamname->find('a')->href;
echo $teamdetails; 
```

我得到完全空白的输出。

知道为什么吗？我正在尝试将`/entry/110291/event-history/33/`as 作为一个变量，并将 the`Why Always Me?`作为另一个变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:09:30.707

```
$teamdetails = $teamname->find('a')->href;
               ^^^^^^^^^---- never defined in your code 
```

我也看不到您的“工作”代码可能如何工作。你也没有`$teamname`在那里定义，所以你永远不会得到一个空/未定义变量的输出，这是......没有输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T21:14:09.623

而是这样做：

```
$tdhtml = DOMDocument::loadHTML($teamdetails);
$link = $tdhtml->getElementsByTagName('a');

$url = $link->item(0)->attributes->getNamedItem('href')->nodeValue; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T22:56:51.193

您的示例中的问题是 $teamname 是一个字符串，您将其视为 simple_html_dom_node

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T21:25:06.913

Marc B 是对的，我知道您不必初始化变量，但他说您正在尝试访问所述变量的属性：

```
$teamdetails = $teamname->find('a')->href;
           ^^^^^^^^^---- never defined in your code 
```

这本质上是：

```
$teamname = null;
$teamname->find('a')->href; 
```

# wordpress - 谷歌字体在谷歌浏览器中看起来像垃圾

> ID：16024694
> 
> 赞同：2
> 
> 时间：2013-04-15T21:07:01.660
> 
> 标签：wordpress, fonts, cross-browser, typography

bit.ly/ZwCln9

我有 3-4 种 Google Web 字体，它在 IE/FF 中看起来很新鲜，但在 Chrome 中字体不稳定且粗糙。我读过您可以将svg文件或其他东西下载到服务器上吗？我正在使用 Wordpress，需要逐步帮助，因为我很烂。

我从哪里获取文件以及通过 ftp 将它们上传到哪里？我在 CSS 中使用的代码是什么？

感谢您所有的帮助 ：）

![在此处输入图像描述](https://i.stack.imgur.com/g7CTU.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T22:06:35.997

如果您不想，则不需要使用 SVG。字体在所有浏览器中看起来永远不会相同，因为每个浏览器都使用不同的引擎。但是，您始终可以重置以使其看起来尽可能接近。这是一个快速重置，您可以在 css 文件的顶部添加它来解决此问题。

```
h1,h2,h3,h4,h5,h6 {
    font-size: 100%;
    font-weight: normal
} 
```

或者你可以得到一个完整的 CSS 重置，比如 YUI 重置或 Normalize。

# sql - 在 SQL SERVER 中显示同一表中的行之间的差异

> ID：16024697
> 
> 赞同：3
> 
> 时间：2013-04-15T21:07:05.227
> 
> 标签：sql, sql-server, tsql, sql-server-2005

我正在使用 SQL Server 2005。

我有一个表，每次更改某个字段时都会有一个行存档。我必须生成一个报告，显示为每个员工更改的字段。

我的表架构：

```
tblEmp(empid, name, salary, createddate) 
```

我的表格数据：

```
Row 1: 1, peter, 1000, 11/4/2012
Row 2: 1, peter, 2000, 11/5/2012
Row 3: 1, pete, 2000, 11/6/2012
Row 4: 1, peter, 4000, 11/7/2012 
```

根据员工 Peter（员工 id 1）的上述数据，输出（更改）将是：

结果集：

```
1, oldsalary: 1000 newsalary: 2000 (changed on 11/5/2012)
1, oldname: peter newname: pete (changed on 11/6/2012)
1, oldname: pete newname: peter, oldsalary:2000, newsalary: 4000 (changed on 11/7/2012) 
```

我正在尝试提出会产生上述结果集的 sql。

我试图做一些类似于此线程中第一个答案的事情：[如何获得列字段的两行之间的差异？](https://stackoverflow.com/questions/634568/how-to-get-difference-between-two-rows-for-a-column-field)

但是，它没有走到一起，所以想知道是否有人可以提供帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T21:48:55.620

您正在逐列查看差异。这建议使用`unpivot`. 以下内容会随着列中的每次更改以及先前的值和日期创建输出：

```
DECLARE @t TABLE(empid INT,name SYSNAME,salary INT,createddate DATE);

INSERT @t SELECT 1, 'peter', 1000, '20121104'
UNION ALL SELECT 1, 'peter', 2000, '20121105'
UNION ALL SELECT 1, 'pete',  2000, '20121106'
UNION ALL SELECT 1, 'peter', 4000, '20121107';

with cv as (
      select empid, createddate, col, val
      from (select empid, CAST(name as varchar(8000)) as name,
                   CAST(salary as varchar(8000)) as salary, createddate
            from @t
           ) t
      unpivot (val for col in (name, salary)) as unpvt
     ),
    cvr as (
     select cv.*,
            ROW_NUMBER() over (partition by empid, col order by createddate) as seqnum_all
     from (select cv.*, ROW_NUMBER() over (partition by empid, col, thegroup order by createddate) as seqnum_group
           from (select cv.*,
                        (ROW_NUMBER() over (partition by empid, col order by createddate) -
                         ROW_NUMBER() over (partition by empid, col, val order by createddate)
                        ) as thegroup
                 from cv
                ) cv
          ) cv
     where seqnum_group = 1
    ) -- select * from cvr
select cvr.*, cvrprev.val as preval, cvrprev.createddate as prevdate
from cvr left outer join
     cvr cvrprev
     on cvr.empid = cvrprev.empid and
        cvr.col = cvrprev.col and
        cvr.seqnum_all = cvrprev.seqnum_all + 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T21:25:00.277

也许这些加入了[CTE](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)的[`ROW_NUMBER`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)+ [`CASE`](http://msdn.microsoft.com/en-us/library/ms181765.aspx)：

```
WITH cte  AS 
(
  SELECT empid,
         name,
         salary, 
         rn=ROW_NUMBER()OVER(PARTITION BY empid ORDER BY createddate)
  FROM   tblemp
) 
SELECT oldname=CASE WHEN c1.Name=c2.Name THEN '' ELSE C1.Name END,
       newname=CASE WHEN c1.Name=c2.Name THEN '' ELSE C2.Name END,
       oldsalary=CASE WHEN c1.salary=c2.salary THEN NULL ELSE C1.salary END,
       newsalary=CASE WHEN c1.salary=c2.salary THEN NULL ELSE C2.salary END
FROM cte c1 INNER JOIN cte c2 
ON c1.empid=c2.empid AND c2.RN=c1.RN + 1 
```

[**Sql-Fiddle 演示**](http://sqlfiddle.com/#!3/bdf6e/1/0)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T21:26:33.653

```
DECLARE @t TABLE(empid INT,name SYSNAME,salary INT,createddate DATE);

INSERT @t SELECT 1, 'peter', 1000, '20121104'
UNION ALL SELECT 1, 'peter', 2000, '20121105'
UNION ALL SELECT 1, 'pete',  2000, '20121106'
UNION ALL SELECT 1, 'peter', 4000, '20121107';

;WITH x AS
(
  SELECT empid, name, salary, createddate, rn = ROW_NUMBER() OVER 
  (PARTITION BY empid ORDER BY createddate)
  FROM @t
  -- WHERE empid = 1 -- for example
)
SELECT LTRIM(
  CASE WHEN x.salary <> y.salary THEN 
    'oldsalary: ' + RTRIM(x.salary)
    + ' newsalary: ' + RTRIM(y.salary)
  ELSE '' END
  + CASE WHEN x.name <> y.name THEN 
    ' oldname: ' + x.name
    + ' newname: ' + y.name
  ELSE '' END
  + ' (changed on ' + CONVERT(CHAR(10), y.createddate, 101) + ')')
FROM x INNER JOIN x AS y
ON x.rn = y.rn - 1
AND x.empid = y.empid
AND
(
 x.salary <> y.salary 
 OR x.name <> y.name
); 
```

但是，除非您有一个 where 子句来定位特定`empid`的 ，否则输出不是很有用，除非它还包括`empid`. [SQLfiddle 演示](http://sqlfiddle.com/#!3/4ec5f/4)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-28T01:30:53.893

根据您的解释，更改此表时创建触发器会更容易，然后使用您期望的结果创建表，因为您在那一刻拥有旧值和新值，所以应该没有问题得出您期望的结果。

# java - 未找到本机 UnsatisfiedLinkError 异常 Android JNI 的实现

> ID：16024699
> 
> 赞同：4
> 
> 时间：2013-04-15T21:07:08.117
> 
> 标签：java, android, android-ndk, java-native-interface

我正在尝试为 Android 应用程序实现 LAME，但我不断收到错误消息：

```
W/dalvikvm(2472): No implementation found for native     Lcom/example/android/audio/util/LameWrapper;.init (IIIII)V

java.lang.UnsatisfiedLinkError: init
     at com.example.android.audio.util.LameWrapper.init(Native Method)
     at com.example.android.audio.util.LameWrapper.init(LameWrapper.java:22)
     at com.example.android.audio.util.Recorder$1.run(Recorder.java:51) 
```

我按照答案的步骤（[Lame MP3 Encoder compile for Android](https://stackoverflow.com/questions/8632835/lame-mp3-encoder-compile-for-android)）。我能够生成 libmp3lame.so 文件。它被放置在**/libs/armeabi**

我还创建了**Android.mk**文件：

```
LOCAL_PATH := $(call my-dir)
LOCAL_C_INCLUDES := $(LOCAL_PATH)

include $(CLEAR_VARS)

LAME_LIBMP3_DIR := lame-3.99.5_libmp3lame

LOCAL_MODULE    := mp3lame
LOCAL_SRC_FILES := $(LAME_LIBMP3_DIR)/bitstream.c $(LAME_LIBMP3_DIR)/fft.c         $(LAME_LIBMP3_DIR)/id3tag.c $(LAME_LIBMP3_DIR)/mpglib_interface.c $(LAME_LIBMP3_DIR)/presets.c $(LAME_LIBMP3_DIR)/quantize.c $(LAME_LIBMP3_DIR)/reservoir.c $(LAME_LIBMP3_DIR)/tables.c $(LAME_LIBMP3_DIR)/util.c $(LAME_LIBMP3_DIR)/VbrTag.c $(LAME_LIBMP3_DIR)/encoder.c $(LAME_LIBMP3_DIR)/gain_analysis.c $(LAME_LIBMP3_DIR)/lame.c $(LAME_LIBMP3_DIR)/newmdct.c $(LAME_LIBMP3_DIR)/psymodel.c $(LAME_LIBMP3_DIR)/quantize_pvt.c $(LAME_LIBMP3_DIR)/set_get.c $(LAME_LIBMP3_DIR)/takehiro.c $(LAME_LIBMP3_DIR)/vbrquantize.c $(LAME_LIBMP3_DIR)/version.c

include $(BUILD_SHARED_LIBRARY) 
```

我使用**-javah**创建了**com_example_android_audio_LameWrapper.h**文件。我使用 .h 创建**com_example_android_audio_util_LameWrapper.c**：

```
JNIEXPORT void JNICALL Java_com_example_android_audio_util_LameWrapper_init(
    JNIEnv *env, jclass cls, jint inSamplerate, jint outChannel,
    jint outSamplerate, jint outBitrate, jint quality) {
    if (glf != NULL) {
        lame_close(glf);
        glf = NULL;
    }
    glf = lame_init();
    lame_set_in_samplerate(glf, inSamplerate);
    lame_set_num_channels(glf, outChannel);
    lame_set_out_samplerate(glf, outSamplerate);
    lame_set_brate(glf, outBitrate);
    lame_set_quality(glf, quality);
    lame_init_params(glf);
} 
```

实际的 java 包装器**LameWrapper.java**：

```
public class LameWrapper {
    public static void init(int inSamplerate, int outChannel,
        int outSamplerate, int outBitrate) {
        init(inSamplerate, outChannel, outSamplerate, outBitrate, 7);
    }

    public native static void init(int inSamplerate, int outChannel,
        int outSamplerate, int outBitrate, int quality); 
```

我创建了一个“Recorder.java”对象以加载到 mp3lame 库中。记录器对象有一个“开始”方法，它调用来自 LameWrapper 的函数。

```
public class Recorder {
    static {
    System.loadLibrary("mp3lame");
    }

    public void start(){

        //starts a thread, sets some values

        LameWrapper.init(RECORDER_SAMPLERATE, 2, RECORDER_SAMPLERATE, 32);
    } 
```

然后我在 MainActivity 中调用 Recorder 对象。

我搜索了很多堆栈溢出，但找不到答案。通常对于“未找到实现错误”，文件命名不正确。但是，我相当确定我正确命名了这些包。

有人能指出我正确的方向吗？任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T16:14:16.597

我至少可以看出这不起作用的一个原因：您的`LOCAL_SRC_FILES`变量不包括`com_example_android_audio_util_LameWrapper.c`. 修复它，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-13T07:20:32.070

[这](http://developer.android.com/training/articles/perf-jni.html)可能会有所帮助。

搜索此部分未找到本机 LFoo;.myfunc ()V 的实现。

# java - Java Servlet 检查文件是否存在或创建它

> ID：16024711
> 
> 赞同：0
> 
> 时间：2013-04-15T21:08:05.863
> 
> 标签：java, servlets

通过以下检查，我得到一个错误...因为我尝试加载一个不存在的文件...我怎样才能安全地进行此检查？

```
File file = new File(getClass().getResource("/file.xml").getFile());

if(file.exists()==false){

    //CREATE THE FILE

    }

    else{

    //UPDATE THE FILE
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T21:16:25.977

`Class.getResource()`使用类加载器返回`WEB-INF/lib`webapp 目录中的 jar 中的资源 URL，或者在 webapp中的 jar 中`WEB-INF/classes`。你不能也不能假设这是一个文件。一个 webapp 通常被部署为一个 war 文件。而且无论如何，这场战争的内容必须保持只读。

如果要写入文件，请使用 webapp 外部目录中的文件 IO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T21:13:09.360

如果您查看 的 API `Class.`[`getResource()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getResource%28java.lang.String%29)，您会看到如果此文件不存在，它会返回 null。所以你只需要这样做：

```
URL url = getClass().getResource("/file.xml");
if(url == null) {
    // File does not exist
}
else {
    // File exists
} 
```

正如人们所说，不能保证您能够写入该目录中的文件，因此当您写入时，请确保它是到外部位置。

# mysql - 将datagrid视图连接到vb.net中的数据库

> ID：16024717
> 
> 赞同：0
> 
> 时间：2013-04-15T21:08:15.247
> 
> 标签：mysql, vb.net

好的，所以我尝试使用数据网格视图显示我的 MYSQL 数据库中的所有内容。但我得到的是不工作，有人可以帮助我的代码

```
 Public Sub dataview()
    DataGridView1.DataSource = ""
    Dim bindingSource1 As New BindingSource()
    Try
    Dim cmd As New MySqlCommand("SELECT * FROM upload", db_con)

    With Me.DataGridView1
        .AutoGenerateColumns = True

        bindingSource1.DataSource = cmd
        .DataSource = bindingSource1

        .AutoSizeRowsMode = DataGridViewAutoSizeRowsMode.DisplayedCellsExceptHeaders
        .BorderStyle = BorderStyle.Fixed3D
        .EditMode = DataGridViewEditMode.EditOnEnter
    End With
        DataGridView1.DataSource = bindingSource1
    Catch ex As Exception
        MessageBox.Show("something went wrong")
    End Try 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-17T02:51:52.183

```
Public Sub dataview()
DataGridView1.DataSource = ""
Dim bindingSource1 As New BindingSource()
Try
Dim cmd As New MySqlCommand("SELECT * FROM upload", db_con)

With Me.DataGridView1
    .AutoGenerateColumns = True

    bindingSource1.DataSource = cmd
    .DataSource = bindingSource1

    .AutoSizeRowsMode = DataGridViewAutoSizeRowsMode.DisplayedCellsExceptHeaders
    .BorderStyle = BorderStyle.Fixed3D
    .EditMode = DataGridViewEditMode.EditOnEnter
End With
    DataGridView1.DataSource = bindingSource1
Catch ex As Exception
    MessageBox.Show("something went wrong")
End Try 
```

试试这个^^

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T21:14:18.483

您不能简单地将 MySqlCommand 传递给 BindingSource。
您应该使用 MySqlDataAdapter 类型的对象来获取命令并填充 DataSet/DataTable。该 DataTable/DataSet 应该用作您的数据源`bindingSource1`

```
Dim cmd As New MySqlCommand("SELECT * FROM upload", db_con)
Dim da = New MySqlDataAdapter (cmd)
Dim dt = New DataTable()
da.Fill(dt)
bindingSource1.DataSource = dt ' here assign the DataTable'

With Me.DataGridView1
    .AutoGenerateColumns = True
    .DataSource = bindingSource1
    .....
End With 
```

# javascript - 如何使用 Ace 突出显示多行？

> ID：16024721
> 
> 赞同：6
> 
> 时间：2013-04-15T21:08:25.063
> 
> 标签：javascript, syntax-highlighting, cloud9-ide, ace-editor

此处类似问题中提到的旧方法如下：

```
var editor = ace.edit("editor");
var Range = ace.require('ace/range').Range;
editor.setReadOnly(true);
editor.setTheme("ace/theme/github");
editor.getSession().setMode("ace/mode/javascript");
editor.getSession().addMarker(new Range(1, 0, 15, 0), "ace_active_line", "background"); 
```

不幸的是，它不起作用，您可以在此处看到：

[http://jsbin.com/acotuv/1/edit](http://jsbin.com/acotuv/1/edit)

有什么建议么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-15T21:27:47.153

好像`addMarker`函数的签名被改变了

```
var Range = ace.require('ace/range').Range // get reference to ace/range
...
editor.session.addMarker(
    new Range(1, 0, 15, 0), "ace_active-line", "fullLine"
 );` 
```

工作正常，见[http://jsbin.com/acotuv/3/edit](http://jsbin.com/acotuv/3/edit)

# java - Java：TextField 侦听器不起作用

> ID：16024724
> 
> 赞同：-1
> 
> 时间：2013-04-15T21:08:28.450
> 
> 标签：java, swing, listener

我的代码如下：

```
package playingwithjava;

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
/**
 *
 * @author user
 */
public class Window extends JFrame implements ActionListener{
    //init stuff
    Container ca=getContentPane();
    GridBagLayout gridLayout= new GridBagLayout();
    GridBagConstraints lol=new GridBagConstraints();

    //actual important stuff

    JButton done=new JButton("Done!");
    JTextField text=new JTextField("",25);
    JLabel label=new JLabel("Your name is:");

    public Window(int x,int y)
    {
        super("Playing With Java");
        setSize(x,y);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        ca.setLayout(gridLayout);
        //start of the code
        lol.gridx=0;lol.gridy=0;
        ca.add(label,lol);

        lol.gridx=0;lol.gridy=1;
        text.addActionListener(this);
        ca.add(text,lol);

        lol.gridx=1;lol.gridy=1;
        //done.setEnabled(false);
        done.addActionListener(this);
        ca.add(done,lol);

        //ending
        setContentPane(ca);
        setVisible(true);
    }
    @Override
    public void actionPerformed(ActionEvent event)
    {
        if(event.getSource()==done)
        {
            JOptionPane.showMessageDialog(null,"Hello, "+text.getText()+"!","Hi!",JOptionPane.NO_OPTION);
        }
        if(event.getSource()==text)
        {
            JOptionPane.showMessageDialog(null,"a","Hi!",JOptionPane.NO_OPTION);

        }
    }
} 
```

我不明白为什么当我更改 TextField 中的文本时什么都没有发生。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T21:15:26.467

当您按下 Enter 键时，将调用 ActionListener。

要侦听文本字段中的更改，您应该使用 DocumentListener。有关详细信息，请参阅[如何编写文档侦听器](http://docs.oracle.com/javase/tutorial/uiswing/events/documentlistener.html)。

# .net - 在计算字段中的 sharepoint 2007 过滤器中渲染失败

> ID：16024728
> 
> 赞同：0
> 
> 时间：2013-04-15T21:08:59.167
> 
> 标签：.net, sharepoint

我正在尝试按列表中的 url 过滤，但出现此错误，

```
<!---RENDER FAILED--> 
```

以下是代码

```
 http://cgydv14690:8001/sites/dev/FCEE%20Documents/Forms/All%20Documents.aspx?FilterName=ColourClasification&FilterMultiValue=Green;Red 
```

如果我以这种方式应用过滤器，`FilterField1=ColourClasification&FilterValue1=Green`它会完美运行。当我尝试使用它来过滤两个或更多标准时，它只是失败了。

这可能是因为它是一个计算列吗？

这是我需要解决的问题，有一个称为颜色分类的列，这是一个计算的列，基于公式将显示四个值，绿色，红色，黄色而不是在公式中，我需要过滤除除对于“不在公式中”，我认为没有 != 在网址中使用。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T04:52:36.260

Sharepoint 不支持此功能，因此我必须想出另一种方法来完成此操作。

# angularjs - 如何从属性指令更改元素的范围？

> ID：16024730
> 
> 赞同：3
> 
> 时间：2013-04-15T21:09:10.110
> 
> 标签：angularjs, angularjs-directive, angularjs-scope

```
<input type='text' ng-model='foo' my-dir='customFunction' />
{{foo}}

.directive('myDir',function(){
     scope:{ customFunc : "&myDir"},
 }); 
```

现在范围将被覆盖`myDir`并且 foo 不会在屏幕上更新。但是每个具有`my-dir`属性的控件仍然应该`customFunction`在一个孤立的范围内。

可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T22:04:08.210

正如上面评论中提到的，一个指令可能不会在任何地方都有效。如果该指令将与其他指令（如 ng-model、ng-repeat 等）一起使用，则隔离作用域可能不起作用。下面是一个使用[$eval](http://docs.angularjs.org/api/ng.$rootScope.Scope#$eval)且不创建新范围的指令示例：

```
<div ng-controller="MyCtrl">
  <input type='text' ng-model='foo' my-dir='customFunction'>
  <br>foo={{foo}}
</div>

app.directive('myDir', function() {
    return {
        link: function(scope, element, attrs) {
            scope.$eval(attrs.myDir);
        },
    }
});

function MyCtrl($scope) {
    $scope.customFunction = alert('hi');
    $scope.foo = '22';
} 
```

[小提琴](http://jsfiddle.net/mrajcok/FM4Fh/)

另请参阅[在 AngularJS 中编写指令时，我如何决定是否需要新的作用域、新的子作用域或新的隔离作用域？](https://stackoverflow.com/questions/14914213/when-writing-a-directive-how-do-i-decide-if-a-need-no-new-scope-a-new-child-sc)

# sharepoint - 在 Windows 8 应用程序中检索 PerformancePoint 仪表板

> ID：16024732
> 
> 赞同：0
> 
> 时间：2013-04-15T21:09:11.647
> 
> 标签：sharepoint, performancepoint

我正在使用 SharePoint 2013 和 Windows 8 应用程序。

是否可以通过应用程序连接到 PerformancePoint 仪表板并显示仪表板、带有钻取/钻取选项的图表等项目？

我对 SP 2013 和 PerformancePoint 没有真正的经验，仪表板将由其他人创建。我需要连接到它并检索项目。

你能指出我的教程方向吗？

谢谢，安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T15:48:17.680

不知道您的 Windows 8 应用程序很难回答这个问题。要真正按照预期使用 PerformancePoint，Windows 8 应用程序需要通过 SQL Server Analysis Services (SSAS) 数据立方体公开数据。

如果是这样，您可以基于多维数据集的数据构建 PerformancePoint 仪表板。如果您没有 SSAS 多维数据集，PerformancePoint 可能不适合您。

我建议阅读 MSDN 上的这篇文章，以了解 PerformancePoint、[SharePoint 2013 中的 PerformancePoint Services](http://msdn.microsoft.com/en-us/library/ee559635.aspx)的概述。

# html - 如何将 unix 文本文件 awk 到预定义的 html 代码？

> ID：16024733
> 
> 赞同：1
> 
> 时间：2013-04-15T21:09:13.050
> 
> 标签：html, unix, awk

我不知道 HTML（非常尴尬，但从来没有需要）。当谈到 UNIX 时，我非常有洞察力，但是我对我的这项任务感到非常困惑。我知道我需要做什么，但我正经历着最艰难的开始。

我的 hwk12 目录中有以下文件：

*   名册.html
*   名册.txt
*   示例.html
*   样本.txt

以下是 roster.html 文件的内容：

```
<html>
<body>
<table border=2>
<tr><th>Name</th><th>Username</th><th>Email</th></tr>
  <tr>
    <td>Nikhil Banerjee</td>
    <td>nbanerje</td>
    <td><a href="mailto:zetapsi796@hotmail.com">zetapsi796@hotmail.com</a></td>
  </tr>
  <tr>
    <td>Jeff Nazarian</td>
    <td>jnazaria</td>
    <td><a href="mailto:jeff.nazarian@asu.edu">jeff.nazarian@asu.edu</a></td>
  </tr>
  <tr>
    <td>Anna Melzer</td>
    <td>amelzer</td>
    <td><a href="mailto:anna.melzer@asu.edu">anna.melzer@asu.edu</a></td>
  </tr>
  <tr>
    <td>Jose Garcia</td>
    <td>jgarcia</td>
    <td><a href="mailto:garcia-j@msn.com">garcia-j@msn.com</a></td>
  </tr>
  <tr>
    <td>Jillian Testa</td>
    <td>jtesta</td>
    <td><a href="mailto:jillian.testa@asu.edu">jillian.testa@asu.edu</a></td>
  </tr>
  <tr>
    <td>Clayton Lengelzigich</td>
    <td>clengelz</td>
    <td><a href="mailto:clayton.lengel-zigich@asu.edu">clayton.lengel-  
zigich@asu.edu</a></td>               
  </tr>
  <tr>
    <td>Ashley Bennett</td>
    <td>abennett</td>
    <td><a href="mailto:ashley.bennett@asu.edu">ashley.bennett@asu.edu</a></td>
  </tr>
  <tr>
    <td>Ann Frost</td>
    <td>afrost</td>
    <td><a href="mailto:ann.frost@asu.edu">ann.frost@asu.edu</a></td>
  </tr>
  <tr>
    <td>Timothy Whipple</td>
    <td>twhipple</td>
    <td><a href="mailto:tweed@asu.edu">tweed@asu.edu</a></td>
  </tr>
  <tr>
    <td>Wei Shen</td>
    <td>wshen</td>
    <td><a href="mailto:shenwei58@hotmail.com">shenwei58@hotmail.com</a></td>
  </tr>
  <tr>
    <td>Cari Mahon</td>
    <td>cmahon</td>
    <td><a href="mailto:cari.mahon@asu.edu">cari.mahon@asu.edu</a></td>
  </tr>
  <tr>
    <td>Alberto Salas</td>
    <td>asalas</td>
    <td><a href="mailto:alberto2504@msn.com">alberto2504@msn.com</a></td>
  </tr>
  <tr>
    <td>Dorothy Haskett</td>
    <td>dhaskett</td>
    <td><a href="mailto:dorothy.haskett@asu.edu">dorothy.haskett@asu.edu</a></td>
  </tr>
  <tr>
    <td>Criss Bradbury</td>
    <td>cbradbur</td>
    <td><a href="mailto:crissbradbury@hotmaiil.com">crissbradbury@hotmaiil.com</a></td>
  </tr>
  <tr>
    <td>Steve Ellermann</td>
    <td>sellerma</td>
    <td><a href="mailto:cis494@ellermann.com">cis494@ellermann.com</a></td>
  </tr>
  <tr>
    <td>Zewdie Bekele</td>
    <td>zbekele</td>
    <td><a href="mailto:zewdiea@aol.com">zewdiea@aol.com</a></td>
  </tr>
  <tr>
    <td>Frederic Diziere</td>
    <td>fdiziere</td>
    <td><a href="mailto:fsd@asu.edu">fsd@asu.edu</a></td>
  </tr>
  <tr>
    <td>Matt Bowes</td>
    <td>mbowes</td>
    <td><a href="mailto:matt.bowes@asu.edu">matt.bowes@asu.edu</a></td>
  </tr>
  <tr>
    <td>Jasen Meece</td>
    <td>jmeece</td>
    <td><a href="mailto:jasen.meece@sun.com">jasen.meece@sun.com</a></td>
  </tr>
  <tr>
    <td>Aaron Carpenter</td>
    <td>acarpent</td>
    <td><a href="mailto:aaron.carpenter@asu.edu">aaron.carpenter@asu.edu</a></td>
  </tr>
  <tr>
    <td>Binqin Xi</td>
    <td>bxi</td>
    <td><a href="mailto:binqin.xi@asu.edu">binqin.xi@asu.edu</a></td>
  </tr>
  <tr>
    <td>Yinting Chan</td>
    <td>ychan</td>
    <td><a href="mailto:yin.chen@asu.edu">yin.chen@asu.edu</a></td>
  </tr>
  <tr>
    <td>Michael Evans</td>
    <td>mevans</td>
    <td><a href="mailto:michael.evans@asu.edu">michael.evans@asu.edu</a></td>
  </tr>
  <tr>
    <td>Herman Beringer</td>
    <td>hberinge</td>
    <td><a href="mailto:jber@cox.net">jber@cox.net</a></td>
  </tr>
  <tr>
    <td>Andrew Jolley</td>
    <td>ajolley</td>
    <td><a href="mailto:andrew@andrewjolley.com">andrew@andrewjolley.com</a></td>
  </tr>
  <tr>
    <td>Michael Raby</td>
    <td>mraby</td>
    <td><a href="mailto:mike1071@yahoo.com">mike1071@yahoo.com</a></td>
  </tr>
  <tr>
    <td>Hajar Alaoui</td>
    <td>halaoui</td>
    <td><a href="mailto:hajar6@hotmail.com">hajar6@hotmail.com</a></td>
  </tr>
  <tr>
    <td>Anne Lemar</td>
    <td>alemar</td>
    <td><a href="mailto:anne.lemar@asu.edu">anne.lemar@asu.edu</a></td>
  </tr>
  <tr>
    <td>Russell Crotts</td>
    <td>rcrotts</td>
    <td><a href="mailto:Russell.Crotts@asu.edu">Russell.Crotts@asu.edu</a></td>
  </tr>
  <tr>
    <td>Dan Mazzola</td>
    <td>dmazzola</td>
    <td><a href="mailto:dan.mazzola@sun.com">dan.mazzola@sun.com</a></td>
  </tr>
  <tr>
    <td>Bill Boyton</td>
    <td>bboyton</td>
    <td><a href="mailto:boytonb@earthlink.net">boytonb@earthlink.net</a></td>
  </tr>
</table>
</body>
</html> 
```

以下是 roster.txt 文件的内容：

```
Whipple Timothy tweed@asu.edu Shen    Wei     shenwei58@hotmail.com
Mahon   Cari    cari.mahon@asu.edu Salas   Alberto alberto2504@msn.com
Haskett Dorothy dorothy.haskett@asu.edu Bradbury        Criss  
crissbradbury@hotmaiil.com Ellermann       Steve  
cis494@ellermann.com Bekele  Zewdie  zewdiea@aol.com Diziere Frederic 
fsd@asu.edu Bowes   Matt    matt.bowes@asu.edu Meece   Jasen  
jasen.meece@sun.com  Carpenter       Aaron   aaron.carpenter@asu.edu
Xi      Binqin  binqin.xi@asu.edu Chan    Yinting yin.chen@asu.edu
Evans   Michael michael.evans@asu.edu Beringer        Herman 
jber@cox.net Jolley  Andrew  andrew@andrewjolley.com Raby    Michael
mike1071@yahoo.com Alaoui  Hajar   hajar6@hotmail.com Lemar   Anne   
anne.lemar@asu.edu Crotts  Russell Russell.Crotts@asu.edu Mazzola Dan 
dan.mazzola@sun.com Boyton  Bill    boytonb@earthlink.net 
```

以下是 sample.html 文件的内容：

```
<html>
<body>
<table border=2>
<tr><th>Name</th><th>Username</th><th>Email</th></tr>
  <tr>
    <td>Michael Raby</td>
    <td>mraby</td>
    <td><a href="mailto:mike1071@yahoo.com">mike1071@yahoo.com</a></td>
  </tr>
  <tr>
    <td>Hajar Alaoui</td>
    <td>halaoui</td>
    <td><a href="mailto:hajar6@hotmail.com">hajar6@hotmail.com</a></td>
  </tr>
  <tr>
    <td>Anne Lemar</td>
    <td>alemar</td>
    <td><a href="mailto:anne.lemar@asu.edu">anne.lemar@asu.edu</a></td>
  </tr>
  <tr>
    <td>Russell Crotts</td>
    <td>rcrotts</td>
    <td><a href="mailto:Russell.Crotts@asu.edu">Russell.Crotts@asu.edu</a></td>
  </tr>
  <tr>
    <td>Dan Mazzola</td>
    <td>dmazzola</td>
    <td><a href="mailto:dan.mazzola@sun.com">dan.mazzola@sun.com</a></td>
  </tr>
  <tr>
    <td>Bill Boyton</td>
    <td>bboyton</td>
    <td><a href="mailto:boytonb@earthlink.net">boytonb@earthlink.net</a></td>
  </tr>
</table>
</body>
</html> 
```

以下是sample.txt文件的内容：

```
Raby    Michael mike1071@yahoo.com
Alaoui  Hajar   hajar6@hotmail.com
Lemar   Anne    anne.lemar@asu.edu
Crotts  Russell Russell.Crotts@asu.edu
Mazzola Dan     dan.mazzola@sun.com
Boyton  Bill    boytonb@earthlink.net 
```

我不是因为我喜欢 UNIX 并且我想自己学习它而要求有人为我做这件事。每次我看到这段 HTML 代码时，我都会把自己的 #$$#& 搞糊涂。我需要帮助开始。

作业提示如下：

您将编写一个名为 ~/hwk12/mk_html.awk 的 nawk(1) 脚本，它将文本文件（sample.txt 和 roster.txt）转换为 Web 浏览器可以读取的 html 页面。我在 sample.html 文件中为您提供了输出，该文件在下面复制（请注意每个缩进级别如何深两个空格）：

同样，我不希望有人为我这样做。我只是对文本文件中的数据如何在没有实际 HTML 代码的情况下附加到 HTML 表中感到困惑。有人可以帮我开始吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:19:34.803

看起来您需要在脚本中定义必要的 HTML 标记。html 文件的内容将是以下几行：

```
<tr>
    <td>$first $last</td>
    <td>$username</td>
    <td><a href="mailto:$email">$email</a></td>
</tr> 
```

这些标签定义了一个表格行。您可以使用 awk 从文本文件中解析变量并使用它们来填充 html。其他 html 标记可以作为静态文本复制粘贴到输出 html 文件中。

编辑：您可以这样做以获取名字和姓氏并打印到 html 文件。

```
last = $1
first = $2
print "  <tr>"
print "    <td>" first " " last "</td>"
print "  </tr>" 
```

您只需要扩展它以获取电子邮件和用户名。

# c++ - 比较字符串的模板

> ID：16024735
> 
> 赞同：0
> 
> 时间：2013-04-15T21:09:13.630
> 
> 标签：c++, templates

我正在尝试编写自己的模板来比较字符串，但我不知道它应该如何工作，尽管我已经完成了一些教程。我在编译过程中仍然遇到这个错误，我不知道如何解决它： `unreference to CSearch<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::equal_to<char> >::Add(int, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)`

这是我到目前为止所拥有的：

```
template <typename _Type, typename _Comparator = std::equal_to<typename _Type::value_type> >
    class CSearch {
 public:
// default constructor

CSearch() : cmp(_Comparator()) {
};
// constructor with comparator parameter

CSearch(const _Comparator &_cmp) : cmp(_cmp) {
};

// destructor (if needed)

~CSearch() {

};

void Add(int id,
        const _Type & needle);
set<int> Search(const _Type & hayHeap) const;

_Comparator cmp;

 private:
// empty copy constructor
// empty operator =
};

class CharComparator {
public:

CharComparator(bool caseSensitive = true)
: m_CaseSensitive(caseSensitive) {
}

bool operator () (const char & a, const char & b) const {
    return m_CaseSensitive ? a == b : toupper(a) == toupper(b);
}
private:
bool m_CaseSensitive;
};

int main(int argc, char** argv) {
CSearch <string> test1;
test1 . Add(0, "hello");
test1 . Add(1, "world");
test1 . Add(2, "rld");
test1 . Add(3, "ell");
test1 . Add(4, "hell");
return 0;

CSearch <string, bool (*)(const char &, const char &)> test2 ( upperCaseCompare );
test2 . Add    ( 0, "hello" );
test2 . Add    ( 1, "world" );
test2 . Add    ( 2, "rld" );
test2 . Add    ( 3, "ell" );
test2 . Add    ( 4, "hell" );
printSet ( test2 . Search ( "HeLlO WoRlD!" ) );
// 0, 1, 2, 3, 4
printSet ( test2 . Search ( "hallo world!" ) );
// 1, 2

CSearch <string, CharComparator> test3 ( CharComparator ( false ) );
test3 . Add    ( 0, "hello" );
test3 . Add    ( 1, "world" );
test3 . Add    ( 2, "rld" );
test3 . Add    ( 3, "ell" );
test3 . Add    ( 4, "hell" );
printSet ( test3 . Search ( "heLLo world!" ) );
// 0, 1, 2, 3, 4
printSet ( test3 . Search ( "Well, templates are hell" ) );
// 3, 4

CSearch <vector<int> > test4;
static const int needleA [] = { 1, 6, 1, 6, 9, 12 };
static const int needleB [] = { 9, 12, 7 };
static const int hayHeap [] = { 1, 6, 1, 6, 1, 6, 9, 12, 8 }; 
test4 . Add    ( 0, makeVector ( needleA ) );
test4 . Add    ( 1, makeVector ( needleB ) );
printSet ( test4 . Search ( makeVector ( hayHeap ) ) );
// 0

CSearch <vector<string> > test5;
static const string needleX  [] = { "Prague", "Bern", "Rome" };
static const string needleY  [] = { "London", "Prague", "Bern" };
static const string needleZ  [] = { "London", "Rome" };
static const string cityHeap [] = { "Berlin", "London", "Prague", "Bern", "Rome", "Moscow" }; 
test5 . Add    ( 0, makeVector ( needleX ) );
test5 . Add    ( 1, makeVector ( needleY ) );
test5 . Add    ( 2, makeVector ( needleZ ) );
printSet ( test5 . Search ( makeVector ( cityHeap ) ) );
// 0, 1
} 
```

您能否告诉我，如何定义该模板以能够处理我在其中声明的所有类型`main`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:22:02.743

这是您错误的重要部分。

`Undefined reference to CSearch<...>::Add(int, std::basic_string<...> ) const&`

这意味着您的代码*引用*了一些函数`CSearch`，如下所示：

```
void Add(int id, const _Type & needle); 
```

但该功能似乎没有被*定义*。

如果您已在其他源文件中定义，[请将其移至头](https://stackoverflow.com/questions/495021)文件r。

# oracle - 从 Oracle 抽样，需要确切数量的结果（样本子句）

> ID：16024737
> 
> 赞同：5
> 
> 时间：2013-04-15T21:09:15.050
> 
> 标签：oracle, sample, random-sample

我正在尝试从 Peoplesoft 数据库中随机抽取人口样本。在线搜索使我认为 select 语句的 Sample 子句可能是我们使用的可行选项，但是我无法理解 Sample 子句如何确定返回的样本数。我查看了此处的 Oracle 文档：http: [//docs.oracle.com/cd/E11882_01/server.112/e26088/statements_10002.htm#i2065953](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_10002.htm#i2065953)

但是上面的参考资料只讨论了用于创建示例的语法。我提出问题的原因是我需要了解样本百分比如何确定返回的样本量。似乎它将随机数应用于您要求的百分比，然后使用种子数来计算每“n”条记录。我们的要求是我们提取准确数量的样本，例如，它们是随机选择的，并且它们代表整个表（或者至少是我们使用过滤器选择的数据分组）

在 10200 个项目的总体中，如果我需要大约 100 个项目的样本，我可以使用以下语句：

```
SELECT * FROM PS_LEDGER SAMPLE(1) --1 % of my total population
WHERE DEPTID = '700064' 
```

但是，我们需要提取准确数量的样本（在本例中为 100），因此我可以选择一个几乎总是返回比我需要的数量多的样本大小，然后将其修剪 IE

```
SELECT Count(*) FROM PS_LEDGER SAMPLE(2.5) --this percent must always give > 100 items
WHERE DEPTID = '700064' and rownum < 101 
```

我对此的担忧是，我的样本不会统一代表整个人口。例如，如果示例函数在创建自己的随机生成的种子后只提取每 N 条记录，那么选择 rownum < 101 将切断从表底部选择的所有记录。我正在寻找的是一种从表中准确提取 100 条记录的方法，这些记录是随机选择的，并且相当代表整个表。请帮忙！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T06:48:10.710

借用 jonearles 的示例表，我看到了完全相同的东西（在 OEL 开发人员图像上的 11gR2 中），通常得到的值`a`严重偏向`1`; 对于小样本量，我有时根本看不到任何东西。通过我在评论中提到的额外随机化/限制步骤：

```
select a, count(*) from (
    select * from test1 sample (1)
    order by dbms_random.value
)
where rownum < 101
group by a; 
```

......我跑了三趟：

```
 A   COUNT(*)
---------- ----------
         1         71
         2         29

         A   COUNT(*)
---------- ----------
         1        100

         A   COUNT(*)
---------- ----------
         1         64
         2         36 
```

`1`是的，100% 真的像第二轮一样回来了。倾斜本身似乎是相当随机的。我尝试使用`block`似乎没什么区别的修饰符，也许令人惊讶 - 我可能认为在这种情况下它会变得更糟。

这可能会更慢，尤其是对于小样本量，因为它必须覆盖整个表格；但确实给了我相当一致的分裂：

```
select a, count(*) from (
    select a, b from (
        select a, b, row_number() over (order by dbms_random.value) as rn
        from test1
    )
    where rn < 101
)
group by a; 
```

通过三轮我得到：

```
 A   COUNT(*)
---------- ----------
         1         48
         2         52

         A   COUNT(*)
---------- ----------
         1         57
         2         43

         A   COUNT(*)
---------- ----------
         1         49
         2         51 
```

...看起来更健康一些。当然是 YMMV。

* * *

[这篇 Oracle 文章](https://blogs.oracle.com/datamining/entry/to_sample_or_not_to_sample)介绍了一些抽样技术，如果您的数据传播和您对“代表性”的要求需要它，您可能还想评估该`ora_hash`方法以及分层版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T05:13:12.440

您不能相信`SAMPLE`从表中返回一组真正随机的行。该算法似乎是基于表的物理特性。

```
create table test1(a number, b char(2000));

--Insert 10K fat records.  A is always 1.
insert into test1 select 1, level from dual connect by level <= 10000;

--Insert 10K skinny records.  A is always 2.
insert into test1 select 2, null from dual connect by level <= 10000;

--Select about 10 rows.
select * from test1 sample (0.1) order by a; 
```

多次运行最后一个查询，您几乎不会看到任何 2。如果您按字节而不是按行进行测量，这可能是一个准确的样本。

这是一个偏斜数据的极端例子，但我认为这足以表明它`RANDOM`不像手册所暗示的那样起作用。正如其他人所建议的那样，您可能想要`ORDER BY DBMS_RANDOM.VALUE`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-17T15:19:20.140

我一直在摆弄一个类似的问题。首先，我设置了不同 Stratum 的样本量。在你的情况下，它只有一个。（'700064'）。因此，在 with 子句或临时表中，我这样做了：

```
Select DEPTID, Count(*) SAMPLE_ONE 
FROM PS_LEDGER  Sample(1)
WHERE DEPTID = '700064' 
Group By DEPTID 
```

这告诉您预期的 1% 样本中的记录。让我们称之为 TABLE_1

然后我这样做了：

```
Select 
Ceil (Rank() over (Partition by DEPTID Order by DBMS_RANDOM.VALUE)
            / (Select SAMPLE_ONE From TABLE_1) STRATUM_GROUP
,A.*
FROM PS_LEDGER 
```

做另一张桌子。那么你得到的是大约随机样本集。1% 的大小。

因此，如果您的原始表包含 1000 条记录，您将获得 100 个随机样本集，每组中有 10 个项目。

然后，您可以随机选择其中之一进行测试。

不确定我是否已经很好地解释了这一点，但它对我有用。我在一张拥有超过 1000 万条记录的桌子上设置了 168 个 Stratum，效果非常好。

如果您需要更多解释或可以改进这一点，请不要犹豫。

问候

# vb.net - 创建一个没有整个框架的 .NET 应用程序？

> ID：16024739
> 
> 赞同：2
> 
> 时间：2013-04-15T21:09:21.273
> 
> 标签：vb.net, winforms, dll, frameworks, reference

我正在 vb.NET 中创建一个轻量级应用程序，并且想知道是否可以创建一个使用 .NET 2.0 框架内的某些 dll 的应用程序，而无需实际使用框架本身。

例如，我是否可以从应用程序将引用的 .NET 目录中获取 dll（并且只有它引用的那些 dll），将它们放入应用程序目录内的文件夹中，然后将引用路径更改为该新位置？这样，当应用程序安装在没有安装 .net 框架的电脑上时，可以将 dll 压缩并复制到新安装的应用程序目录中。

这听起来可能有点令人困惑，如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:13:50.640

你不太可能做到这一点。

有一个叫做 .net 框架客户端配置文件的东西，用于创建不需要整个框架但您仍然需要安装的轻量级 .net 应用程序。

如果您需要一个不依赖任何东西的独立 exe，我建议您使用 Delphi 之类的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T21:16:38.743

[.NET 3.5 和 .NET 4 中有客户端配置文件](http://msdn.microsoft.com/en-us/library/cc656912.aspx)的概念。这是 .NET 的子集，是客户端必须拥有的最小必要部分，以便能够运行针对客户端配置文件的 .NET 应用程序。

在定位客户资料时，您可以使用的功能有更[详细的概述](http://msdn.microsoft.com/library/cc656912%28v=vs.100%29.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T21:21:30.230

除非您迁移到 .Net 4 或更高版本，否则您需要客户端计算机上的完整框架。话虽如此，您的目标是哪个操作系统？较新的 MS 操作系统通常已经安装了 .Net 框架。

# json - 与getJSON（）相反？

> ID：16024740
> 
> 赞同：0
> 
> 时间：2013-04-15T21:09:23.960
> 
> 标签：json, send

我有一个调查网络应用程序，目前我正在使用这种方法从一个站点获取数据：

```
$.getJSON("http://quicksurvey.herokuapp.com/api/surveys/:token/ask.json",function(result){...} 
```

其中 :token 是从我抓取的那个 url 发送的不同数据。

现在，我需要做一些类似的事情......但相反。我想将 json 数据发送到某个 URL，即这个：

```
http://quicksurvey.herokuapp.com/questions/:token/answer.json?value=:value 
```

在哪里 :token 和 :value 我将用我页面中的值换掉。所以基本上，无论第一个 url (quicksurvey.herokuapp.com/api) 正在做什么来向我发送数据，我都需要在我的应用程序中这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:15:11.530

听起来您只需要打印您的 JSON 并将其转义，以便您可以将其添加到 URL。

# web - 从网站内启动 Web Inspector/Firebug？

> ID：16024748
> 
> 赞同：0
> 
> 时间：2013-04-15T21:10:24.150
> 
> 标签：web, web-inspector

是否可以通过网页上的锚点/按钮启动浏览器的本机网络检查器或开发人员工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:17:50.530

不，这是不可能的。也许如果您有该特定浏览器的扩展程序，它可能是可能的。查看[chrome 开发人员文档](http://developer.chrome.com/extensions/devtools.html)了解更多详细信息。

# c# - 显式收集 DynamicMethod

> ID：16024753
> 
> 赞同：1
> 
> 时间：2013-04-15T21:10:32.127
> 
> 标签：c#, .net, reflection, garbage-collection, reflection.emit

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.reflection.emit.dynamicmethod.aspx)：

> 您可以使用 DynamicMethod 类在运行时生成和执行方法，而无需生成动态程序集和动态类型来包含该方法。由即时 (JIT) 编译器创建的可执行代码在回收 DynamicMethod 对象时被回收。动态方法是生成和执行少量代码的最有效方式。

我有以下代码：

```
Type returnType = typeof(string);
Type[] argTypes = { typeof(string), typeof(IEnumerable<string>) };

var dynamicMethod = new DynamicMethod("DynamicMethod1", returnType, argTypes);
ILGenerator ilGen = dynamicMethod.GetILGenerator();
const string Returned = "returned";
ilGen.Emit(OpCodes.Ldstr, Returned);
ilGen.Emit(OpCodes.Ret);

var handler =
    (Func<string, IEnumerable<string>, string>)
    dynamicMethod.CreateDelegate(typeof(Func<string, IEnumerable<string>, string>)); 
```

即，我用一些简单的主体创建动态方法，然后我想将委托保存到静态属性。在多次调用此委托后，我想回收/收集方法并用另一个主体重新创建它（我编写了解释语言，将我的自定义语法解释为 MSIL 字节码 - 类似于编译器）并将新委托保存到静态属性。

我如何明确收集/回收动态方法？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-18T19:18:39.667

您不能显式处理 DynamicMethod，因为它没有实现 IDisposable 接口。但是，您可以告诉 GarbageCollector 何时需要收集：`System.GC.Collect();`

[根据MSDN](http://msdn.microsoft.com/en-us/library/xe0c2357.aspx)，这“强制所有代的立即垃圾收集”

# jquery - hybridauth 与 jquery mobile 有问题？

> ID：16024764
> 
> 赞同：0
> 
> 时间：2013-04-15T21:11:27.027
> 
> 标签：jquery, jquery-ui, jquery-mobile, hybridauth

有没有人在启用 jQueury 移动的网站上使用 Hybridauth 遇到问题？我在移动检测上加载了一个移动版本的页面，而不是常规的桌面版本，所以它使用所有相同的配置文件和脚本，但只是拒绝在移动版本上工作。

使用“对话框”数据角色时，相同的对话框页面会在原始页面上打开，因此我必须关闭相同的对话框两次，并且不会进行任何身份验证。但是，当不使用“对话”数据角色而使用“页面”数据角色时，我会收到覆盖消息“加载页面错误”

有没有人遇到过类似的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T10:17:27.603

可能是您尝试通过导致跨域问题的 javascript 进行身份验证。您必须让浏览器将整个页面重定向到 twitter/facebook/other 或在另一个窗口中打开它。尝试在 iframe 中执行此操作会导致相同的问题。

至少避免使用 js 和 iframe 让您能够处理跨域问题，即使可能，这也是非常棘手的问题。

此外，在用户按下登录后，该页面无论如何都会重定向回您的页面。

# java - 分数计算器

> ID：16024765
> 
> 赞同：0
> 
> 时间：2013-04-15T21:11:29.630
> 
> 标签：java

好的，所以，我对java很陌生。
我正在为一个我长期搁置的项目设计一个分数计算器。不过，就我自己的知识而言，我想知道如何做到这一点。

该程序应该要求每个玩家掷骰子，并将其添加到之前的掷骰中。
我假设一个while循环可以完成这个，但每次它通过循环时，它都会将变量重置为当前滚动。因此，我无法得到总...

下面是一些代码：

```
 static int players;
    static String p1;
    static String p2;
    static String p3;
    static String p4;
    static int maxScore;
    static int roll1;
    static int roll2;
    static int roll3;
    static int roll4;
    static int total1;
    static int total2;
    static int total3;
    static int total4;
    public static void main(String[] args) {
    Scanner keyboard = new Scanner(System.in);
    System.out.print("Enter number of players: ");
    players=keyboard.nextInt();
    System.out.print("Enter Maximum Score: ");
    maxScore=keyboard.nextInt();
    if(players==2){                    //will add more ifs when i get the code right
        System.out.println("Please enter players names.");
        System.out.print("Player 1: ");
        p1=keyboard.next();
        System.out.print("Player 2: ");
        p2=keyboard.next();
        System.out.println(p1 + "\t \t " + p2 + "\n"
        + "_______ \t _______ \n" );  //displays scorecard look with players names

        {

        while (total1 < maxScore && total2<maxScore) { 
        //scorecard quits when maxScore is reached by either player
        int roll;
        total1=(roll+roll1); 

        System.out.print("");
        roll=keyboard.nextInt(); //asks for current roll

        System.out.print("\n"+"_____"+"\n");
        System.out.print(roll+"+"+"\n"+roll1+"\n"+"_____"+"\n"+(roll+roll1)+"\n");
        /*i want this to display total score + last roll and then 
        *total it again on the next line*/
        roll1=roll;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:19:52.337

如果我正确阅读了您的问题，那么解决方案是

```
total1+=(roll+roll1); 
```

这与

```
total1= total1+(roll+roll1); 
```

您只是没有将卷添加到总价值中！

另外需要注意的是，将实例变量设置为 public 和 static 并不是一个好主意。如果它们是私有的而不是静态的会更好。例如

```
 private int players; 
```

希望答案有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T21:45:53.347

Java 编程进度的一些提示：

1.  该变量`roll`没有任何作用。`roll1`，依此类推，将存储每个玩家的最后一卷。

2.  如果可能的话，初始化你的变量。应该避免依赖默认值，因为它可能会在您学习时给您带来问题（`NullPointerException`有时会拜访您）。

3.  在你的循环中，你有`total1=(roll+roll1);`. 这是错误的。在程序到达这一点时，您的变量 ,`total1`尚未初始化。由于它们是整数，它们被（默默地）初始化为 0，因此此时会产生 0，这并没有多大作用。在此之后，您继续检索卷。换一种方式试试，先滚动，然后加起来。`roll``roll1``total1`

4.  您提到您是 Java 新手，但是，在未来的某个时候，您可能会考虑使用数组来实现这个相同的程序。您会注意到它为您节省了很多您现在编写的重复代码。

总结并翻译成代码指南（适用于 2 名玩家）：

```
public class MyScoreCalculator {
    static String p1 = "";
    static String p2 = "";
    static int maxScore = 0;
    static int roll1 = 0;
    static int roll2 = 0;
    static int total1 = 0;
    static int total2 = 0;

    public static void main(String[] args) {
        Scanner keyboard = new Scanner(System.in);
        // Dialogue to get data...
        // Display scorecard look with players names

        while (total1 < maxScore && total2 < maxScore) { 
            //scorecard quits when maxScore is reached by either player
            roll1 = keyboard.nextInt(); // ask for current roll

            System.out.println(total1 + "+");
            System.out.println(roll1);
            System.out.println("_____");
            System.out.println(roll1 + total1);

            total1 = total1 + roll1;

            // Do the same for next player.
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T21:51:52.507

您的 total1 计算应该`total1 += roll`在新的滚动输入之后发生。此外，如果 roll1 代表最后一卷，请相应地命名变量，它更具可读性。

由于您有很多参与者，因此请尝试抽象概念并将输入与“会计”分开。例如，您可以创建一个 PlayerScore 类，其中包含总和最后一个输入（以及玩家的姓名），并使用一个负责添加和保存最后一个输入以及漂亮打印信息的方法。然后，您可以收集 PlayerScore 并对其进行迭代，询问当前滚动并更新信息。

# jquery - 浮动DIV

> ID：16024768
> 
> 赞同：0
> 
> 时间：2013-04-15T21:11:49.877
> 
> 标签：jquery, css, html, timeline

好吧，这更像是如何调用它来找到它的问题:) 将带有短篇故事 DIV 的新闻线创建到像旧 facebook 时间线这样的列中，但是超过两行，我发现的大多数链接都像上面描述的 fb 时间线。[link01](http://htun.me/labs/timeline.php)或[link02](http://www.9lessons.info/2012/01/facebook-timeline-design-using-jquery.html) 但我更感兴趣的是创建类似的东西： ![例子](https://i.stack.imgur.com/9XKpG.jpg)

在 stackoverflow 上检查了很多信息，但我们要回到上面描述的 fb 两列。有人对这种结构有经验或想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T21:14:11.873

阅读您的问题后，您会立即想到两个 jQuery 插件。

*   [jQuery Masonry](http://masonry.desandro.com/) - jQuery 的动态布局插件。CSS 的另一面是浮动的。
*   [Wookmark](http://www.wookmark.com/jquery-plugin) - 用于创建瀑布网格布局的 Javascript。

这两个插件都将能够帮助您获得您正在寻找的布局/结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T21:14:36.900

据我所知，这称为*mozaic布局，您可以使用***[masonry js](http://masonry.desandro.com/)**实现类似的效果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T21:19:49.023

查看[960 网格系统](http://960.gs/)。您最多可以将内容拆分为 16 列。它确实是完全在 CSS 中完成的最灵活的解决方案。你将不得不在这个中投入更多的工作，因为它只是一个“基础”而不是一个插件。

# php - 上传后创建缩略图，PHP

> ID：16024770
> 
> 赞同：1
> 
> 时间：2013-04-15T21:12:09.483
> 
> 标签：php, image, upload, thumbnails

我已经在我的页面上实现了图片的文件上传，并试图以某种方式生成缩略图，以便单击它们以通过 fancybox 进行查看。上传有效，但我创建缩略图的功能无效。（这包含在我的 upload.php 中，就在“move_uploaded_file”之后：

```
<?php
$src = $subdir.$fileupload['name'];

function make_thumb($src) 
{

$source_image = imagecreatefromjpeg($src);    //For testing purposes only jpeg now
$width = imagesx($source_image);
$height = imagesy($source_image);
$desired_width = 220;

$desired_height = floor($height * ($desired_width / $width));

$virtual_image = imagecreatetruecolor($desired_width, $desired_height);

imagecopyresampled($virtual_image, $source_image, 0, 0, 0, 0, $desired_width, $desired_height, $width, $height);

header("Content-type: image/jpeg");
imagejpeg($virtual_image, realpath('./Thumbnails/filename.jpg'));    //Temporary filename, will be changed
}
?> 
```

仅供参考，这是一项作业，由于我是 php 初学者，我确实使用了 google，但在我的情况下找不到问题。可能是我对php的理解欠缺太多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:16:08.720

使用此`img_resize`功能，它适用于最流行的图像格式

```
 function img_resize($src, $dest, $width, $height, $rgb = 0xFFFFFF, $quality = 100)
   {
        if (!file_exists($src))
            return false;

        $size = getimagesize($src);

        if ($size === false)
            return false;

        $format = strtolower(substr($size['mime'], strpos($size['mime'], '/') + 1));
        $icfunc = "imagecreatefrom" . $format;
        if (!function_exists($icfunc))
            return false;

        $x_ratio = $width / $size[0];
        $y_ratio = $height / $size[1];

        $ratio = min($x_ratio, $y_ratio);
        $use_x_ratio = ($x_ratio == $ratio);

        $new_width = $use_x_ratio ? $width : floor($size[0] * $ratio);
        $new_height = !$use_x_ratio ? $height : floor($size[1] * $ratio);
        $new_left = $use_x_ratio ? 0 : floor(($width - $new_width) / 2);
        $new_top = !$use_x_ratio ? 0 : floor(($height - $new_height) / 2);

        $isrc = $icfunc($src);
        $idest = imagecreatetruecolor($width, $height);

        imagefill($idest, 0, 0, $rgb);

        if (($format == 'gif') or ($format == 'png')) {
            imagealphablending($idest, false);
            imagesavealpha($idest, true);
        }

        if ($format == 'gif') {
            $transparent = imagecolorallocatealpha($idest, 255, 255, 255, 127);
            imagefilledrectangle($idest, 0, 0, $width, $height, $transparent);
            imagecolortransparent($idest, $transparent);
        }

        imagecopyresampled($idest, $isrc, $new_left, $new_top, 0, 0, $new_width, $new_height, $size[0], $size[1]);

        getResultImage($idest, $dest, $size['mime']);

        imagedestroy($isrc);
        imagedestroy($idest);

        return true;
    }

    function getResultImage($dst_r, $dest_path, $type)
    {
        switch ($type) {
            case 'image/jpg':
            case 'image/jpeg':
            case 'image/pjpeg':
                return imagejpeg($dst_r, $dest_path, 90);
                break;
            case 'image/png';
                return imagepng($dst_r, $dest_path, 2);
                break;
            case 'image/gif';
                return imagegif($dst_r, $dest_path);
                break;
            default:
                return;
        }
    } 
```

# c - 如何正确使用 SIGALRM？

> ID：16024774
> 
> 赞同：3
> 
> 时间：2013-04-15T21:12:44.010
> 
> 标签：c

我编写了这段代码，我必须使用警报信号 ( `SIGALRM`) 来让程序打印“我还活着”的消息。每 3 秒。

但它不起作用，它只会在我按下 CTR-C 时发送消息“我还活着”，我猜我没有把 SIGALRM 功能放在正确的位置，你能帮帮我吗？

```
#include <stdlib.h>
#include <signal.h>
#include <stdio.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/wait.h>

unsigned Count = 0; //Counts the number of times it receives the signal SIGINT.
void mypause(int sign); //prototype of the function my pause.

void mypause(int sign) {
  signal(SIGALRM, mypause); //Set alarm clock for 3 seconds.
  alarm(3);
  printf("I'm Alive");
  signal(SIGINT, mypause);
  switch (sign) {
  case SIGINT:
    printf("\nPressed CTR-C\n");
    printf("I'm running, waiting for a sign\n");
    Count++;
    break;
  case SIGQUIT:
    printf("\nPressed CTR-\\n");
    printf("You pressed CTR-C %d times", Conta);
    exit(0); //Exit program.
    break;
  }
}

int main() {
  signal(SIGALRM, mypause);
  signal(SIGINT, mypause);
  signal(SIGQUIT, mypause);
  printf("\nI'm running waiting for a signal\n");
  while (1) {}
  return (0);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T21:43:14.170

也许添加`alarm(3)`你的`main()`？

# java - 如何在从 Maven 运行集成测试之前启动 GAE/J 开发服务器？

> ID：16024782
> 
> 赞同：2
> 
> 时间：2013-04-15T21:13:22.043
> 
> 标签：java, google-app-engine, maven, integration-testing

我想从[KindleIT](http://www.kindleit.net/maven_gae_plugin/)切换到[Google 的 App Engine](https://developers.google.com/appengine/docs/java/tools/maven) [Maven](http://maven.apache.org/)插件。使用 KindleIT 插件时，我在预集成测试阶段启动了 GAE 开发服务器。一旦集成测试在集成后测试中完成，我就会关闭开发服务器。我们正在使用[surefire 插件](http://maven.apache.org/surefire/maven-surefire-plugin/)来运行我们的单元和集成测试。

```
<plugin>
  <groupId>net.kindleit</groupId>
  <artifactId>maven-gae-plugin</artifactId>
  <version>0.9.5</version>
  <executions>
    <execution>
      <id>gae-start</id>
      <phase>pre-integration-test</phase>
      <goals>
        <goal>start</goal>
      </goals>
    </execution>
    <execution>
      <id>gae-stop</id>
      <phase>post-integration-test</phase>
      <goals>
        <goal>stop</goal>
      </goals>
    </execution>
  </executions> 
</plugin> 
```

我这样做是因为我想对本地运行的 GAE 应用程序运行集成测试。**我如何使用 Google 的 App Engine 插件做同样的事情？**

```
<plugin>
  <groupId>com.google.appengine</groupId>
  <artifactId>appengine-maven-plugin</artifactId>
  <version>${gae.version}</version>
</plugin> 
```

我想使用类似的东西

```
mvn appengine:devserver 
```

目标。但这只是在前台启动开发服务器。我希望 Maven 在测试之前在后台启动开发服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T23:31:55.663

官方插件尚不支持此功能，但我们正在努力，我希望尽快将其纳入快照版本。我会及时通知你，但这个问题是我跟踪我的工作的地方： [https ://code.google.com/p/appengine-maven-plugin/issues/detail?id=5](https://code.google.com/p/appengine-maven-plugin/issues/detail?id=5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-10T09:19:44.110

使用 maven-jetty-plugin。这个插件启动 jettty 实例并运行你的 war/gae 项目。

您可以在预集成测试阶段运行此插件，然后运行集成测试，在集成测试后阶段，服务器将关闭。

我正在使用 gae 应用程序，并且可以很好地使用这个插件。

这是我的配置，希望对你有帮助：

```
 <plugin>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>maven-jetty-plugin</artifactId>
            <version>6.1.15</version>
            <configuration>
                <contextPath>/</contextPath>
                <scanIntervalSeconds>3</scanIntervalSeconds>
                <stopKey>foo</stopKey>
                <stopPort>9999</stopPort> 
                <connectors>
                    <connector implementation ="org.mortbay.jetty.nio.SelectChannelConnector" >
                        <port>${deploy.server.port}</port>
                        <maxIdleTime>60000</maxIdleTime>
                    </connector>
                </connectors>
            </configuration>
            <executions>
                    <execution>
                            <id>start-jetty</id>
                            <phase>pre-integration-test</phase>
                            <goals>
                                    <goal>run</goal>
                            </goals>
                            <configuration>
                                    <scanIntervalSeconds>0</scanIntervalSeconds>
                                    <daemon>true</daemon>
                            </configuration>
                    </execution>
                    <execution>
                            <id>stop-jetty</id>
                            <phase>post-integration-test</phase>
                            <goals>
                                    <goal>stop</goal>
                            </goals>
                    </execution>
            </executions>
        </plugin>
     </plugins> 
```

此外，也许你会在执行时发现这个执行：线程“关闭”中的异常 java.lang.NoClassDefFoundError: org/apache/jasper /runtime/JspApplicationContextImpl

这将解决将此依赖项添加到您的 pom.xml

```
 <dependency>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>jsp-2.1</artifactId>
            <version>6.0.0</version>
          </dependency> 
```

# javascript - 在二维数组中动态创建索引

> ID：16024783
> 
> 赞同：0
> 
> 时间：2013-04-15T21:13:27.473
> 
> 标签：javascript, arrays, dynamic, indexing

这个脚本有一些问题。它遍历一个二维数组并将每个对应的索引加在一起。所以基本上 arr[0][1] + arr[0][2] + arr[0][3] ... arr[1][1] + arr[1][2] + arr[1][3 ] ...ETC。

这第一个工作正常。所以我的逻辑没问题。我的问题是我无法动态创建索引。我认为推动不会起作用，因为我在这里对值求和。

```
var cat_stats_week_radar = [[0,0,0,0,0,0,0,0,0,0,0,0,0,0]];

    for (var i = 0; i < cat_stats_week.length; i++) {
        for (var j = 0; j < cat_stats_week[0].length; j++) {
            cat_stats_week_radar[0][j] += +(cat_stats_week[i][j]);
        }

} 
```

* * *

这个不起作用，我没有收到错误，只是一堆 NaN 值。

```
var cat_stats_week_radar = [[]];

    for (var i = 0; i < cat_stats_week.length; i++) {
        for (var j = 0; j < cat_stats_week[0].length; j++) {
            cat_stats_week_radar[0][j] += +(cat_stats_week[i][j]);
        }

} 
```

* * *

这是我正在使用的数组。

要添加的数组：

```
var cat_stats_week = [
[0,0,0,0,0,0,0,1,0,0,0,0,0,0],
[0,0,0,0,0,0,1,0,0,0,0,0,0,0],
[0,0,0,0,0,0,0,0,0,0,0,0,0,0],
[0,0,0,0,0,0,1,0,0,0,0,0,0,0],
[0,0,0,0,0,0,0,0,0,0,0,0,1,0],
[0,0,0,0,0,0,0,0,0,0,0,0,1,0],
[0,0,1,0,0,0,0,0,0,0,0,0,0,0]
]; 
```

* * *

结果数组：

```
var cat_stats_week_radar = [[0, 0, 1, 0, 0, 0, 2, 1, 0, 0, 0, 0, 2, 0]]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:18:18.123

您需要使用正确数量的零对其进行初始化：

```
var cat_stats_week_radar = [[]];

for (var i = 0; i < cat_stats_week[0].length; i++) {
    cat_stats_week_radar[0].push(0);
} 
```

并使用[Underscore.js](http://underscorejs.org/)：

```
_.map(_.zip.apply(null, cat_stats_week), function(a) {
    return _.reduce(a, function(a, b) {
        return a + b
    })
}); 
```

# c# - 在浏览桌面应用程序中的数据网格视图文本框列时，我们可以使用 Tab 键触发任何事件吗

> ID：16024785
> 
> 赞同：0
> 
> 时间：2013-04-15T21:13:35.947
> 
> 标签：c#, gridview, desktop-application, setfocus, datagridviewtextboxcell

我有一个类型为数据网格视图文本框列的网格视图。

网格中有以下字段。

```
Sr.No | Description | HSNCode | Qty | Rate | Amount 
```

Sr.No 和 Amount 在程序中生成。

我的问题是，当我使用`tab`键在网格中导航时，我想检查“数量”和“速率”是否包含任何值。

即，如果用户输入描述，则无需输入“数量”和“费率”，就会跳转到我通过“数量 * 费率”生成值的金额字段，但我想检查“费率”或“数量”是否为没有输入，那么我想转移对其中任何一个的控制权。

我找到了适用于鼠标点击的解决方案，代码如下：

```
private void grdData_CellClick(object sender, DataGridViewCellEventArgs e)
{
    if (e.ColumnIndex == 5)
    {
       if (Convert.ToString(grdData.Rows[e.RowIndex].Cells[4].Value).Equals(""))
       {
           grdData.ClearSelection();
           grdData.Rows[e.RowIndex].Cells[4].Selected = true;
       }
    }
} 
```

当用户单击“金额”字段时，这非常有效，但是如果我想要相同的解决方案怎么办`tab key`。

我怎样才能找到解决方案？我应该为网格使用哪个事件。？

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:18:32.903

您可以尝试 CellLeave/CellValidating 事件。我对编码有点生疏，但我相信这对你来说是可行的。

# html - youtube 嵌入 HTML5 代码

> ID：16024787
> 
> 赞同：0
> 
> 时间：2013-04-15T21:13:44.870
> 
> 标签：html, iframe, youtube, rss

`<tr> <th> <iframe width="560" height="315" src="'+link1+'?autoplay=1;" frameborder="0" allowfullscreen type="application/x-shockwave-flash" allowscriptaccess="always"></iframe> </th> </tr>`

其中链接 1 = http://www.youtube.com/watch?v=bPDW7hj1yfs

但是我的 iframe 没有显示任何内容。请帮助并告诉我哪里出错了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:27:47.740

您只需要以下内容：

```
<iframe width="560" height="315" src="http://www.youtube.com/embed/QZTArNJYHLU?autoplay=1" frameborder="0" allowfullscreen></iframe> 
```

问题可能只是您如何将链接注入嵌入代码。

# javascript - 如何产生具有 2 个整数的浮点数？

> ID：16024788
> 
> 赞同：-3
> 
> 时间：2013-04-15T21:13:50.420
> 
> 标签：javascript, floating-point, int

```
var ratings = 3193;
var reviews = 9;

var average = parseFloat(ratings) / reviews;  //I want a floating point number at the end. 
```

这是正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:15:42.547

All numbers in JavaScript are double-precision 64-bit binary format IEEE 754\. There is no need to typecast "integers" into "floats" as you would expect it from C/C++ and other languages. You need `parse*` only if you handle strings.

See also:

*   [Number value](http://www.ecma-international.org/ecma-262/5.1/#sec-4.3.19)

    > primitive value corresponding to a double-precision 64-bit binary format IEEE 754 value

*   [`parseInt`](http://www.ecma-international.org/ecma-262/5.1/#sec-15.1.2.2), [`parseFloat`](http://www.ecma-international.org/ecma-262/5.1/#sec-15.1.2.3) (both take a string as parameter)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T21:19:16.240

转换不是必需的。JavaScript 会自动在类型之间进行转换。并且数字实际上并未在内部表示为整数。无论如何，它们都是浮点数。

因此，最简单的解决方案应该具有预期的效果：

```
var ratings = 3193;
var reviews = 9;
var average = ratings/reviews; 
```

您在示例中所拥有的内容会导致引擎转换`ratings`为字符串并将该字符串解析为双精度（理论上会导致它必须以开头的值），然后再将其视为计算中的分子。

# python - 为什么这个递归代码有效？

> ID：16024792
> 
> 赞同：1
> 
> 时间：2013-04-15T21:13:54.543
> 
> 标签：python, function, recursion, arguments

```
def permutation(li,result=[]):
    print(li, result)               # I added this print statement as a diagnostic.
    if li == [] or li == None:      # As coded, I expected each recursive call to
        return                      # reinitialize 'result=[]' because there is no
                                    # second argument being passed in the recursive
    if len(li) == 1:                # call below.
        result.append(li[0])
        print(''.join(result))
        result.pop()
        return

    for i in range(0,len(li)):
        result.append(li[i])
        permutation(li[:i] + li[i+1:])          # I would have thought that the
       #permutation(li[:i] + li[i+1:], result)  # recursive call needed to be this.
        result.pop()        

test=list('123')
permutation(test) 
```

结果：

```
['1', '2', '3'] []
['2', '3'] ['1']
['3'] ['1', '2']
123
['2'] ['1', '3']
132
['1', '3'] ['2']
['3'] ['2', '1']
213 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:17:17.570

因为`result`是一个[可变](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)列表。简而言之，如果您将项目附加到列表中，则该项目仍然存在，除非该列表或该项目被垃圾收集。在您的代码中，`result`指向声明为`permutation`函数的默认参数的相同列表对象。您不会`result`在每次调用`permutation`函数时都建立一个新列表。因为您为每个排列推送/弹出项目，您可能会认为（看起来）您的函数是“无状态的”，但事实并非如此。

# ruby-on-rails - 实例化使用 STI 的子类的最佳方法

> ID：16024794
> 
> 赞同：0
> 
> 时间：2013-04-15T21:14:08.777
> 
> 标签：ruby-on-rails, ruby-on-rails-3, instantiation, single-table-inheritance

我在我的应用程序中使用单表继承，并且在如何最好地实例化子类方面遇到了困境。假设我们有一个类`Dwelling`，子类`Apartment`和`House`。现在`Dwelling`与另一个类相关联`Neighborhood`。

模型/住宅

```
belongs_to :neighborhood 
```

模特/邻里

```
has_many :dwellings 
```

假设我已经按如下方式实例化了一个新社区，并且我想创建一个`House`

```
n = Neighborhood.new 
```

以下哪一个是正确的方法？

```
n.dwellings.build 

House.new 
```

如果我使用第一种方法进行实例化，我必须填写住所`:type`。但是使用第二种方法我必须输入外键。我还读到我不应该通过它的父类实例化一个子类，这样就可以立即排除`n.dwellings.build`这个建议是否正确？任何指导将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T22:17:18.077

我想添加

```
has_many :apartments 
has_many :houses 
```

与**Neighborhood模型中的****:has_many :dwellings**一起解决您的问题。

 **```
n = Neighborhood.new 
```

现在你可以使用

```
n.houses.build 
```

或者

```
h = House.new
n.houses << h 
```**

# java - 递归反向数组打印

> ID：16024797
> 
> 赞同：0
> 
> 时间：2013-04-15T21:14:15.543
> 
> 标签：java, recursion

我在一个答案中看到了这个算法，现在我怀疑是一个带有两个参数的递归函数，一个整数数组和一个整数。目标是打印数组，但以相反的顺序，我测试它并且它有效！但我不知道为什么......这是功能

```
public static void reverse(int[] a, int position) {
          // BASE
          if (position == a.length)  return;
          // RECURSIVE

          reverse(a, position + 1);

          System.out.println(a[position]);
        }

} 
```

如果条件为真，返回不代表程序会结束吗？如果它是假的，该函数将在不打印数字的情况下进行递归调用，或者不？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:21:10.557

该`return`声明并不意味着程序将结束。这意味着该方法的特定调用结束。

下一条语句是递归调用。`position`它不断调用自己，从数组的长度到每个可能`0`的长度。因此，代码第一次通过递归调用是在最后一个递归方法返回之后，`position`现在位于数组的末尾。然后它打印最后一个字符。它返回，并且具有先前`position`值的先前递归调用打印倒数第二个字符，依此类推，直到对递归方法的原始调用打印第一个字符，然后就完成了。

例如对于长度为 3 {10, 11, 12} 的数组

```
reverse(a, 0)
    reverse(a, 1)
        reverse(a, 2)
            reverse(a, 3)
            base case; return
        print a[2] "12"
    print a[1] "11"
print a[0] "10"
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T21:20:21.083

`return`不是“退出”声明。`return`将程序返回到调用方法的位置并执行下一行。`System.exit(0)`将结束您的程序并停止所有执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T21:35:41.717

这背后的关键概念是，您需要了解**堆栈**是如何工作的。对函数的每次调用都是一个堆栈，不管它是从其他函数调用还是从它自己调用。

# ios - 同时动画两个 UIView 子视图不起作用

> ID：16024798
> 
> 赞同：2
> 
> 时间：2013-04-15T21:14:18.337
> 
> 标签：ios, xcode, uiview, uiviewcontroller, core-animation

出于某种原因，我无法为两个子视图位置设置两个动画。我写了以下

```
[self addChildViewController:self.photosViewController];
[self.photosViewController.view setFrame:CGRectMake(0, -self.view.frame.size.height,    self.view.frame.size.width, self.view.frame.size.height)];

[self.view addSubview:self.photosViewController.view];

[UIView animateWithDuration:1 delay:0
                        options:UIViewAnimationOptionCurveEaseIn
                     animations:^{

                         [self.stepsView setFrame:CGRectMake(0, self.view.frame.size.height, self.view.frame.size.width, self.view.frame.size.height)];
                         [self.photosViewController.view setFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
                     }
                     completion:^(BOOL finished) {
                         if (finished) {

                             button.tag = 0;
                         }
                     }]; 
```

`self.stepsView`是一个`IBOutlet` `UIView`并且`self.photosViewController.view`是一个已添加到视图中的子视图控制器视图。

使用当前代码只有`self.PhotosViewController.view`动画。但是，如果我注释掉我添加子视图控制器视图的行，`subview`那么`self.stepsView`动画正确。

即使我在调用此方法之前添加子视图控制器及其视图，也会发生相同的错误。

几个月前我遇到另一个应用程序时需要帮助，不得不做一个肮脏的黑客来解决它，现在想解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T21:06:32.667

In the section on view animation in the [View Programming Guide](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009503-CH1-SW2) there is a [specific mention](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/AnimatingViews/AnimatingViews.html#//apple_ref/doc/uid/TP40009503-CH6-SW25) of how to animate subviews.

Basically, you should use `transitionWithView:duration:options:animations:completion:` rather than `animateWithDuration:delay:options:animations:completion:`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:31:25.987

第一个视图将不可见，因为它的 origin.y 超出了可见视图的高度。如果在动画开始时它不可见，那么您当然什么也看不到。

第二个视图更改为填满屏幕。同样，您看到的内容取决于它的初始位置。

# java - 仅对较大的输入文件失败：FileServiceFactory getBlobKey throws IllegalArgumentException

> ID：16024801
> 
> 赞同：0
> 
> 时间：2013-04-15T21:14:24.307
> 
> 标签：java, google-app-engine, blobstore

我有一个将 CSV 转换为 XML 文件的 Google App Engine 应用程序。它适用于较小的 XML 输入，但拒绝为较大的输入 XML 完成文件。在一个长期运行（多天的持续时间）任务中，在最终确定之前多次读取 XML，并将生成的 csv 文件写入其中。我的问题不同于这个[FileServiceFactory getBlobKey throws IllegalArgumentException](https://stackoverflow.com/questions/15251092/fileservicefactory-getblobkey-throws-illegalargumentexception)，因为我的代码在使用小输入文件的生产和开发中都可以正常工作。所以这并不是说我在关闭/完成之前忽略了写入文件。但是，当我尝试从更大的 XML 文件中读取数据时。输入 XML 文件约为 150MB，而生成的 5 个 CSV 文件集每个都小得多（可能每个 10MB）。我保留了新 csv 文件的文件 url，甚至尝试用一些静态代码关闭它们，但我只是重现了相同的错误，即

```
java.lang.IllegalArgumentException: creation_handle: String properties must be 500 characters or less.  Instead, use com.google.appengine.api.datastore.Text, which can store strings of any length.
    at com.google.appengine.api.datastore.DataTypeUtils.checkSupportedSingleValue(DataTypeUtils.java:242)
    at com.google.appengine.api.datastore.DataTypeUtils.checkSupportedValue(DataTypeUtils.java:207)
    at com.google.appengine.api.datastore.DataTypeUtils.checkSupportedValue(DataTypeUtils.java:173)
    at com.google.appengine.api.datastore.Query$FilterPredicate.<init>(Query.java:900)
    at com.google.appengine.api.datastore.Query$FilterOperator.of(Query.java:75)
    at com.google.appengine.api.datastore.Query.addFilter(Query.java:351)
    at com.google.appengine.api.files.FileServiceImpl.getBlobKey(FileServiceImpl.java:329) 
```

但我知道这不是字符串/文本数据类型的问题，因为我已经在使用类似长度的文件服务 url 来成功尝试使用较小的文件。对于我上面链接的其他 stackoverflow 帖子来说，这也不是问题。我还尝试在完成之前写最后一篇毫无意义的文章，以防万一它会像对另一篇文章一样有所帮助，但这没有任何区别。所以我真的没有办法调试这个......这是我的文件关闭代码不起作用。[它与http://developers.google.com/appengine/docs/java/blobstore/overview#Writing_Files_to_the_Blobstore](http://developers.google.com/appengine/docs/java/blobstore/overview#Writing_Files_to_the_Blobstore)上的 Google 操作方法示例非常相似 。

```
log.info("closing out file 1");
try {
    //locked set to true
    FileWriteChannel fwc1 = fileService.openWriteChannel(csvFile1, true);
    fwc1.closeFinally();
} catch (IOException ioe) {ioe.printStackTrace();}

// You can't get the blob key until the file is finalized
BlobKey blobKeyCSV1 = fileService.getBlobKey(csvFile1);
log.info("csv blob storage key is:" + blobKeyCSV1.getKeyString());
csvUrls[i-1] = blobKeyCSV1.getKeyString();
break; 
```

在这一点上，我只想完成我有 URL 但不能的新 blob 文件。我怎样才能解决这个问题，还有，可能是什么原因？同样，我的代码适用于小文件（〜60 kB），但〜150MB的输入文件失败）。感谢您就导致此问题的原因或如何解决此问题提供任何建议！另外，我的未定稿文件在被删除之前会保留多久？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T04:04:14.930

这个问题是 Java MapReduce 和 Files API 中的一个错误，最近由 Google 修复。在此处阅读公告：groups.google.com/forum/#!topic/google-appengine/NmjYYLuSizo

# android - 通过命令行启动没有数据的 Android 模拟器

> ID：16024803
> 
> 赞同：1
> 
> 时间：2013-04-15T21:14:38.233
> 
> 标签：android, command-line, android-emulator

我试图弄清楚如何在没有数据连接或飞行模式的情况下启动模拟器，任何一个都可以。我正在测试我的应用程序以防止数据丢失，但是我需要将其原子化。因此，我尝试通过命令行启动没有数据的模拟器，或者编写 bash 脚本来启动模拟器，关闭数据，然后运行单元测试。

已解决 - 根据建议

```
#! /usr/bin/expect

set timeout 10
spawn telnet localhost 5554
expect "OK"
send "gsm data off\n"
send "quit\n" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T22:13:06.860

快速而肮脏的方法可能是制作一个在启动时启动并关闭数据的应用程序，然后运行模拟器并安装该应用程序。然而，这确实存在不一致的可能性。

要让模拟器没有网络，您可以做的另一件事是[远程登录到模拟器](http://developer.android.com/tools/devices/emulator.html#telephony)并关闭数据。为了使其自动化，我使用批处理文件和 vbscript 制作了一个简单（粗略）的示例，以向 telnet 提供命令，因为我的工作机器运行的是 Windows。

批处理文件：

```
@echo off
emulator -avd YOURAVDNAMEHERE
timeout /t 10
telnet_turn_data_off.vbs 
```

`telnet_turn_data_off.vbs`：

```
set oShell=CreateObject("WScript.Shell")

oShell.Run "telnet localhost 5554", 9
WScript.sleep 500

oShell.Sendkeys "gsm data off{ENTER}"
WScript.sleep 500

oShell.Sendkeys "gsm voice off{ENTER}"
WScript.sleep 500

oShell.Sendkeys "quit{ENTER}"
WScript.sleep 500

oShell.Sendkeys "quit{ENTER}"
WScript.sleep 500 
```

如果在 Linux 或 Mac OS 上运行，[**expect**](http://www.osix.net/modules/article/?id=30)应该能够编写 telnet 脚本（如对问题的编辑所示）。

还值得注意的是，在较旧的仿真器（例如 2.2）上，[关闭数据可能无济于事](https://code.google.com/p/android/issues/detail?id=3838)。我上面的例子是用 4.2 模拟器测试的，它似乎正确地切断了数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T22:10:47.617

我通常使用物理硬件而不是模拟器进行测试，但如果您找不到启用飞行模式的选项，您可以在启动模拟器之前简单地断开计算机与互联网的连接。您的计算机没有互联网=您的模拟器没有互联网。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T06:32:48.783

使用以下步骤..

转到日食

Window->show view->other->android->Devices 现在选择您正在运行的模拟器，然后再次选择

去，

Window->show view->other->android->Emulator Control Now in that..set Data to Unregister from Home

从设备和模拟器

在设备或模拟器中转到，

设置 -> 无线和网络 -> 飞行模式 -> 确定

# jquery - 如何在第一个 jquery 方法之后获取 outerHTML？

> ID：16024805
> 
> 赞同：0
> 
> 时间：2013-04-15T21:15:06.747
> 
> 标签：jquery

任何人都知道如何从这一点获取外层HTML？....

```
 $("#sectionA tr[data-testlog='"+variableName+"']").first().outerHTML; 
```

返回一个未定义的....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:19:56.567

`outerHTML`是一个 DOM 属性，因此您首先必须访问包装在 jQuery 对象中的 DOM 元素

您可以使用`each`

```
$(/*any jquery stuff*/).each(function(idx, domEl) {
    console.log(domEl.outerHTML);
}); 
```

如果您知道您只有一个匹配项，或者只想获得第一个元素，您应该这样做：

```
$(SELECTOR)[0].outerHTML // or access any other **DOM** property 
```

在你的情况下：

```
$("#sectionA tr[data-testlog='"+variableName+"']")[0].outerHTML 
// first() would be redundant and unnecessary 
```

基本上，您可以将 jquery 对象视为围绕 DOM 元素数组的包装器，它添加了使开发人员满意的大量功能，并且功能跨浏览器兼容。

根据[MDN](https://developer.mozilla.org/en-US/docs/DOM/element.outerHTML) ， outerHTML 支持：

```
Firefox (Gecko): 11    since 2012-03-13
Chrome: 0.2            since 2008-09-02
Internet Explorer 4.0  since 1997
Opera 7                since 2003-01-28
Safari 1.3             since 2006-01-12 
```

或者正如**akluth**建议的另一个问题，你可以

```
// select your element
$(SELECTOR)
// clone it (outside the dom of the page)
.clone()
// wrap it in another element
.wrap('<div>')
// get the parent - basically the wrapper you just added
.parent()
// and get its inner html - all the html your SELECTOR initially selected
.html();

// all in one line
$(SELECTOR).clone().wrap('<div>').parent().html(); 
```

这将是一个由 jQuery 完成的更昂贵的操作，但也将是一个跨浏览器的解决方案。`outerHTML`可能（或可能不）在所有浏览器/平台上得到同等支持。

# wso2 - 无法初始化 WSO2 治理注册表？

> ID：16024813
> 
> 赞同：0
> 
> 时间：2013-04-15T21:15:29.707
> 
> 标签：wso2, wso2greg

我正在尝试为 wso2 治理注册表自定义 index.jsp。我正在尝试获取已添加到注册表中的所有服务的列表。而且我还想添加一些功能，比如在 index.jsp 中搜索服务。我正在尝试初始化注册表对象？我想知道如何获取注册表对象。有人可以建议我怎么做吗？这样一旦我可以得到 Registry 对象，我将使用 Resource 对象在 Registry 中进行搜索。

资源治理文件夹 = registry.get("/_system/governance");

但是如何获取该注册表对象？

我试过 Registry registry = initialize(); 这没有用。谁能帮我 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T17:16:41.380

您可以找到[[1]](https://svn.wso2.org/repos/wso2/carbon/platform/branches/4.1.0/products/greg/4.6.0/modules/samples/ws-client/src/org/wso2/carbon/registry/ws/client/sample/SampleWSRegistryClient.java)来初始化注册表对象。

```
Registry governanceRegistry = GovernanceUtils.getGovernanceUserRegistry(registry, userName);

ServiceManager serviceManager = new ServiceManager(governanceRegistry);

Service[] services = serviceManager.getAllServices(); 
```

查找有关 Governance Registry[文档](http://docs.wso2.org/wiki/display/Governance453/Services+with+Governance+API)的更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:46:39.567

您使用的 GREG 版本是什么？如果您使用最新的 GREG (4.5.3) 服务也被视为可配置治理工件，因此您可以关注[http://ajithvblogs.blogspot.com/2013/02/how-to-invoke-custom-artifacts -using.html](http://ajithvblogs.blogspot.com/2013/02/how-to-invoke-custom-artifacts-using.html)获取服务列表。

如果您使用的是旧版本的 GREG，您可能必须使用相应的管理服务来列出服务。

# imagemagick - ImageMagick 命令行将 PNG 转换为具有透明度的 EPS

> ID：16024814
> 
> 赞同：5
> 
> 时间：2013-04-15T21:15:33.437
> 
> 标签：imagemagick, png, transparency, eps

I am trying to do a simple conversion from a transparent PNG file to EPS with transparency and currently my command looks like this:

convert "image1.png" "image1.eps"

It looks like all I am getting is a black image. Any ideas?

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-11T11:11:11.300

将 PNG 转换为 EPS 不仅仅是简单的格式转换。它从光栅图像变为矢量图像，因此必须对光栅图像进行“[跟踪](http://en.wikipedia.org/wiki/Image_tracing)”。用于执行此操作的流行命令行工具是[potrace](http://potrace.sourceforge.net/)。安装（`potrace`及其组件工具`mkbitmap`）后，您可以这样做：

```
convert image1.png image1.bmp
mkbitmap image1.bmp -o image1.pgm
potrace image1.pgm -e -o image1.eps 
```

调用`mkbitmap`将彩色图像转换为更适合跟踪的灰度图。这将产生一个在白色背景上带有黑线的 eps。如果您需要全彩色跟踪，[inkskape](https://inkscape.org/en/)是一个用于执行此操作的 GUI 工具，inkscape 用户自制了一个命令行工具来执行此操作，可以在[这里找到](http://www.inkscapeforum.com/viewtopic.php?p=44911)

# events - Mvvm TextBox KeyDown 事件

> ID：16024821
> 
> 赞同：3
> 
> 时间：2013-04-15T21:15:59.633
> 
> 标签：events, mvvm, keydown

我想知道如何在 ViewModel 中使用 MVVM 处理 KeyDown 事件。

我有一个 TextBox，当用户按下不是数字的键时，不应允许输入。我通常会像这样使用 Code behind（不是完整的代码，只是一个简单的例子）：

```
private void textBox1_KeyDown(object sender, System.Windows.Forms.KeyEventArgs e)
{

    // Determine whether the keystroke is a number from the top of the keyboard.
    if (e.KeyCode < Keys.D0 || e.KeyCode > Keys.D9)
    {
        e.Handled = true;
    }
} 
```

现在我想用命令把它放在我的 ViewModel 中。我是 MVVM 的新手，我现在只使用 Bindings（效果很好:)），但我根本不知道如何使用命令......

我的 TextBox 看起来像这样：

```
<TextBox Text="{Binding MyField, Mode=TwoWay}"/> 
```

视图模型：

```
private string _myfield;
public string MyField{
  get { return _myfield; }
  set { 
    _myfield= value;
    RaisePropertyChanged( ()=>MyField)
  }
} 
```

但是只有当我离开 TextBox + 我无权访问输入的密钥时，才会调用 setter。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-06-17T12:53:50.990

我知道我的回答迟了，但如果有人有类似的问题。你必须像这样设置你的文本框：

```
<TextBox Text="{Binding MyField, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-06-09T07:05:35.547

以下适用于处理 TextBox 中的“Enter”键：

```
<TextBox Text="{Binding UploadNumber, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
    <TextBox.InputBindings>
        <KeyBinding 
          Key="Enter" 
          Command="{Binding FindUploadCommand}" />
    </TextBox.InputBindings>
</TextBox> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-15T21:34:08.750

我通过使用交互触发器来做到这一点。（本示例使用 MVVM_Light 框架进行命令绑定）

这是一个例子：

```
<textBox Text="{Binding MyField}">
     <i:Interaction.Triggers>
         <i:EventTrigger EventName="KeyDown">
             <cmd:EventToCommand Command="{Binding MyCommandName}" CommandParameter="YouCommandParameter"/>
         </i:EventTrigger>
      </i:Interaction.Triggers>
<TextBox/> 
```

在视图模型中创建一个名为 MyCommandName 的 ICommand 对象，并将它们添加到 xaml 的顶部：

```
 xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
 xmlns:cmd="http://www.galasoft.ch/mvvmlight" 
```

您不必使用 mvvm-light 命令。这正是我使用的，我喜欢它，因为它允许我使用 ICommand 接口的 CanExecute 方法

希望这可以帮助

# html - 选中没有空格的大量文本

> ID：16024822
> 
> 赞同：1
> 
> 时间：2013-04-15T21:16:03.407
> 
> 标签：html, css, loops, marquee

对于一个艺术展览，我试图利用一个本地托管的网页来无限滚动有关它附近的作品的信息。

到目前为止，我已经提出了使用垂直选取框设置为慢速的想法，以便人们可以阅读它。在鼠标悬停时，它会停止，然后在鼠标离开空间时启动。

（理想情况下，它允许用户上下滚动，然后在输入超时时恢复选取框。虽然这是问题＃2）

Prob #1 是 Marquee 等到最后一行清除顶部，然后再从底部开始循环。对于慢速选取框重复的页面，这意味着页面在很长一段时间内完全没有文本，直到它再次开始循环。

**Prob#1** 如何让 Marquee 在最后一行之后立即循环？

**Prob#2** 如何让文本在交互超时之前暂时可滚动？

现在我更关心#1

**资源：**

我一直在使用带有代码的基本选框工具 [http://www.quackit.com/html/codes/stop_marquee.cfm](http://www.quackit.com/html/codes/stop_marquee.cfm)

我一直在寻找更好的代码，但在循环问题之前它仍然有相同的空白区域 [http://remysharp.com/2008/09/10/the-silky-smooth-marquee/comment-page -3/](http://remysharp.com/2008/09/10/the-silky-smooth-marquee/comment-page-3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-19T14:38:24.113

字幕不能循环，直到整个句子或文本消失。最好的选择是 jquery 滚动条。你可以在这个网站上查看。[http://perekhid.te.ua](http://perekhid.te.ua)

看这里：

[http://jscroller2.markusbordihn.de/example/endless/](http://jscroller2.markusbordihn.de/example/endless/)

# mysql - SQL Server 中是否有等效的 SQL_CALC_FOUND_ROWS？

> ID：16024824
> 
> 赞同：5
> 
> 时间：2013-04-15T21:16:10.530
> 
> 标签：mysql, sql-server, tsql

我有这个 mssql 查询：

```
with RESULT as(select  TITLE, URL, ROW_NUMBER() over (order by URL) as SeqValue from WEBSITE 
select * from RESULT where SeqValue>=20 and SeqValue<=40 
```

我想知道如果 where 语句不存在，此查询将返回多少条记录。我尝试`select count(*) from RESULT`并尝试了`@@ROWCOUNT`许多其他方式，但没有奏效。我需要选择的标题和 URL，最后我需要选择的总记录。

例如，在 mysql 查询中，我有 prepareStatement 使用[`SQL_CALC_FOUND_ROWS`](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_found-rows)：

```
select SQL_CALC_FOUND_ROWS TITLE, URL from WEBSITE limit ?, ?

and after this select i have:

select FOUND_ROWS() 
```

在此示例中，返回值是 mysql 查询的总记录。总记录与 LIMIT 相同，但没有 LIMIT 指令。我将数据库从 mysql 转换为 mssql，我对此有疑问。请帮我...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-23T10:27:37.237

尝试从 MySQL 迁移到 SQL SERVER 时，我也有同样的担忧，解决方案是将其注入您的查询中：

```
COUNT (*) OVER () AS ROW_COUNT 
```

ROWCOUNT 出现在结果中的所有行中，然后它只剩下让您从第一行结果（如果存在）中检索 ROW_COUNT 并且不要忘记重置结果指针等瞧;-)。

例如：

```
select COUNT (*) OVER () AS ROW_COUNT, URL from WEBSITE limit ?, ? 
```

我希望它会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T21:26:17.947

“RESULT”将包括 WEBSITE 中的每条记录，对吗？所以只需“从网站中选择计数（*）”。

我希望

```
 with result as(...what you have...)
 select count(*) from result; 
```

也要工作，做一些不必要的工作。那不是你想要的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T16:01:28.980

尝试：

```
declare @row_count int
select @row_count = count(*), URL from WEBSITE limit ?, ?
select @row_count 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-07T10:28:44.883

我知道为时已晚，但可以对分页和限制有所帮助。

```
WITH paging AS (SELECT ROW_NUMBER() OVER(ORDER BY {$sortField} {$sortOrder}) as rowId, count(1) over() as ROW_COUNT, key FROM {$table})
SELECT * FROM {$table} result INNER JOIN paging ON result.key = paging.key WHERE rowId BETWEEN {$start} and {$end} 
```

它具有排序字段的属性，排序顺序和键用于连接原始表。start 和 end 是分页的值。

`ROW_COUNT`现在，您拥有必填字段的字段记录总数。它也是从 1 开始，而不是从 0 开始。

# scala - Scala计数具有特定属性的地图对象

> ID：16024825
> 
> 赞同：0
> 
> 时间：2013-04-15T21:16:14.283
> 
> 标签：scala, scala-collections, counting

我已经`referrals: Map[String, Referral]`并且正在寻找计算这些引用对象中有多少具有特定阶段属性的最佳方法。

```
case class Referral(
    name: String,
    phase: String
) 
```

我需要计算有多少`phase`等于“phase1”。

我已经能够简单地在地图上循环以使用“phase1”收集推荐并将它们放入一个 Iterable，但我有一种预感，这是一个不必要的额外步骤，但我无法理解如何流畅地执行此操作。

```
val phase1_refs = for (ref <- referrals.values if ref.phase == "phase1") yield ref.name
val phase1_count = phase1_refs.size 
```

使用 for 获取 phase1_refs 大小的语法是什么？我一直在对值使用过滤器，但一直让自己感到困惑。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:59:23.950

利用

```
referrals.values.count(_.phase == "phase1") 
```

# ms-access - Microsoft Access 2010 打开目录中的所有文件

> ID：16024826
> 
> 赞同：0
> 
> 时间：2013-04-15T21:16:16.500
> 
> 标签：ms-access, vba

我正在创建一个 MS Access 2010 数据库。我正在使用 API 来执行以前版本的 MS Access 中的通用对话框控件打开目录并选择文件的操作。我的客户希望我能够在用户单击文件夹时打开目录中的所有文件（因此用户不会单击文件，而只是单击文件夹）。在使用 API 出现的通用对话框控件中单击文件夹时，我找不到偶数触发。

谁能告诉我在 MS ACCESS 2010 中使用 API 进行通用对话框控件时如何打开目录中的所有文件（它们将是 .pdf 文件）？

我正在使用的 API 调用在这里： [http ://access.mvps.org/access/api/api0001.htm](http://access.mvps.org/access/api/api0001.htm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:22:01.387

使用 Microsoft.Scripting.Runtime 中的 FileSystemObject（必须添加对项目的引用）。以下子将给定文件夹中所有 pdf 文件的字符串名称添加到集合中。从对话框中获取文件夹路径（使用文件夹选择选项，而不是文件选择）

```
Sub GetFolderPDFFiles(FolderPath As String, Col As Collection)

    Dim FS As New FileSystemObject
    Dim Dir As Folder
    Dim Arq As File

    Set Dir = FS.GetFolder(FolderPath)

    For Each Arq In Dir.Files
        If UCase(Right(Arq.Name, 4)) = ".PDF" Then
            Call Col.Add(Arq.Path)
        End If
    Next

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-30T13:08:59.433

这对我很有用......它会提示对话框选择文件夹并打开 .pdf 文件。它还将列出 Table1 中的所有文件。

```
 Option Compare Database 
```

> '函数选择文件所在的文件夹：

```
 Function ChooseFolder() As String

        Dim fldr As FileDialog
        Dim sItem As String

        Set fldr = Application.FileDialog(msoFileDialogFolderPicker)
        With fldr
            .Title = "Select a Folder"
            .AllowMultiSelect = False
            .InitialFileName = strPath
            If .Show <> -1 Then GoTo NextCode
            sItem = .SelectedItems(1)
        End With

    NextCode:
        ChooseFolder = sItem
        Set fldr = Nothing

    End Function 
```

> 输入例程以打开并列出文件夹中的 pdf 文件（它还会查找子文件夹中的文件）：

```
 Sub Open_List_Files()

    'Declare the variables
    Dim objFSO As Scripting.FileSystemObject
    Dim objFolder, objTopFolder As Scripting.Folder
    Dim strTopFolderName As String, ProjectF As String
    Dim i As Long

    ' call the function to select the folder
    Call Módulo1.ChooseFolder

    'Create an instance of the FileSystemObject
    Set objFSO = CreateObject("Scripting.FileSystemObject")

    'Get the top folder
    Set objTopFolder = objFSO.GetFolder(ChooseFolder)

    'Call the RecursiveFolder routine
    Call RecursiveFolder(objTopFolder, True)

End Sub

Sub RecursiveFolder(objFolder As Scripting.Folder, IncludeSubFolders As Boolean)

    'Declare the variables
    Dim objFile As Object
    Dim objSubFolder As Scripting.Folder
    Dim DBStr, filepath As String

    'Loop through each file in the folder
    For Each objFile In objFolder.Files
    On Error Resume Next

    If InStr(objFile.Name, ".pdf") Then

    DBStr = "INSERT INTO Table1 ([File Name]) " & _
            " VALUES (" & _
            "'" & objFile.Name & "', " & "');"

    CurrentDb.Execute DBStr

    'open the file
    Application.FollowHyperlink objFile

    End If

    Next objFile

    'Loop through files in the subfolders
    If IncludeSubFolders Then
        For Each objSubFolder In objFolder.SubFolders
            Call RecursiveFolder(objSubFolder, True)
        Next objSubFolder
    End If

End Sub 
```

运行 Open_List_Files() 宏就可以了！:)

# c# - 使用 RowFilter 属性在数据视图中创建复合条件以等于由空值输入的值

> ID：16024827
> 
> 赞同：0
> 
> 时间：2013-04-15T21:16:17.590
> 
> 标签：c#, asp.net

我很确定我在这个问题上查找了我能做的所有事情，但我无法弄清楚我做错了什么。我在想我做错了不止一件事，所以我可以使用任何帮助您可能会看到需要改进的地方。我需要用户在页面上输入他们的客户 ID，以便在单击提交按钮时填充的调查列表框。提交应该只检索客户已关闭的事件并仅返回这些事件并生成一条消息，说明没有任何事件可供他们调查。我知道我在 rowfilter = 部分没有正确引用我的引号，因此非常感谢任何帮助。
我应该使用数据视图来过滤行，以便只显示该客户的已关闭事件。我应该将 rowfilter 属性设置为复合条件，其中 customerID 等于他们输入的文本框，并且 DateClosed 不为空。

```
protected void btnGetIncidents_Click(object sender, EventArgs e)
{
    DataView IncidentsTable = (DataView)SqlDataSource1.Select(DataSourceSelectArguments.Empty);
    IncidentsTable.RowFilter = "CustomerID = 'txtCustomerID.Text + And DateClosed is Not Null'";
    DataRowView row = (DataRowView)IncidentsTable[0];

    if (IncidentsTable.Count > 0)
    {
        this.DisplayIncidents();
        this.Enable(true);
        lstIncident.Focus();
    }
}
private void DisplayIncidents()
{
    lstIncident.Items.Add(new ListItem("--Select an Incident--"));
    foreach (DataRowView row in IncidentsTable)
    {
        Incident i = new Incident();
        i.IncidentID = Convert.ToInt32(row["IncidentID"]);
        i.ProductCode = row["ProductCode"].ToString();
        i.DateClosed = Convert.ToDateTime(row["DateClosed"]);
        i.Title = row["Title"].ToString();
        lstIncident.Items.Add(new ListItem(i.CustomerIncidentDisplay(), i.IncidentID.ToString()));
    }
    lstIncident.SelectedIndex = 0;
} 
```

错误消息说此消息=无法对 System.Int32 和 System.String 执行“=”操作。在我的 rowfilter 线上。

是的，我知道有更好的方法，但我按照使用此和我提到的其他元素所需的说明进行操作。但是，如果您有时间了解什么是更好的方式来提醒您，我会很乐意提供意见。我已经在这上面添加了白发，所以任何帮助，你都是我的英雄。谢谢。
如果我需要包括任何其他部分，请告诉我，我只是不认为它应该是六英里长。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-07T05:30:02.380

尝试这个：

```
IncidentTable.RowFilter = "CustomerID ="+txt_CustomerID.Text+ 
                          "AND DateClosed IS NOT NULL"; 
```

它对我有用...

# java - 如果缺少配置，则重定向到设置

> ID：16024831
> 
> 赞同：0
> 
> 时间：2013-04-15T21:16:32.753
> 
> 标签：java, servlets, web-applications, servlet-3.0

我正在尝试使用 servlet 3.0 创建一个基本的 java web 应用程序。现在，我的应用程序需要运行一个基本的设置页面/表单，以便它知道在哪里存储配置文件等。什么是实现这个的好方法？

我在考虑一个过滤器，但由于我无法进行重定向，这似乎是错误的方式。

建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:26:15.777

在我看来，这`Filter`将是一个很好的方法来完成你想要完成的事情：

```
@WebFilter
public class ConfigFilter implements Filter {
    @Inject
    private SessionBean session;

    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
        String requestURI = ((HttpServletRequest) request).getRequestURI();
        if(!session.hasConfig() && !requestURI.startsWith("/configWizard.xhtml")) {
            ((HttpServletResponse) response).sendRedirect("/configWizard.xhtml");
        }
        else {
            chain.doFilter(request, response);
        }
    }

    @Override
    public void destroy() {
    }

    @Override
    public void init(FilterConfig filterConfig) throws ServletException {
    }
} 
```

# css - 使用媒体查询时在 Chrome 中出现奇怪的浮动渲染

> ID：16024837
> 
> 赞同：2
> 
> 时间：2013-04-15T21:16:58.663
> 
> 标签：css, google-chrome, css-float, media-queries

我已经构建了一个简单的响应式菜单，默认情况下是垂直布局的，但如果分辨率大于 400 像素，我会水平布局。

在垂直方向上，我只是简单地使用and`display: block`来做水平版本（因为我希望它们到达包装纸的边缘）。`float: left``:first-child``float: right``:last-child`

如果您以足够宽的分辨率检查小提琴，您应该会看到三个水平放置的红色框。调整 iframe 的大小，它们应该更改为垂直布局。现在，这是我的问题，当您将 iframe 调整回水平布局时，`:last-child`菜单项将无法在 Ubuntu 12.10 下的 Chrome 版本 26.0.1410.63 中正确呈现（我没有尝试过其他版本的 Chrome），它可以正常工作火狐虽然。

[http://jsfiddle.net/G2h9U/](http://jsfiddle.net/G2h9U/)

这对我来说似乎是一个 Chrome 错误，但有没有人遇到过同样的情况并且有解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T23:08:04.140

看起来 Chrome 的问题已经存在了一段时间。

[https://bugs.webkit.org/show_bug.cgi?id=53166](https://bugs.webkit.org/show_bug.cgi?id=53166)

另一个有同样问题的堆垛机。

[Webkit 浮动和显示](https://stackoverflow.com/questions/6560629/webkit-float-and-display)

# jquery - 在悬停时突出显示具有多个 div 的 td，取消突出显示其中一个 div

> ID：16024838
> 
> 赞同：0
> 
> 时间：2013-04-15T21:17:01.617
> 
> 标签：jquery, css, toggle, highlight

这是我之前提出的问题之一的扩展。 [如果 <td> 内部有多个 <div>，则 <td> 上悬停效果的 CSS 无法正常工作](https://stackoverflow.com/questions/15971600/css-on-hover-effect-on-a-td-does-not-wok-properly-if-td-has-multiple-divs#comment22772573_15971600)

我有一个里面有多个 div 的 td 是代码

```
 <td>
  <div style="display:inline-block; border:1px solid red">left</div>
   <div style="display:inline-block">
   <div style="display:inline-block; border:1px solid blue">top left</div>
   <div id="imgMapDiv"style="display:inline-block; border:1px solid green">top right</div>
   <div>bottom </div>  
  </div>
</td> 
```

这是我的 CSS

#MyTable td:hover { 背景: #cccccc; }

我想要实现的目标：当我的鼠标进入 TD 时，应该突出显示整个列 - 我已经得到了这部分。

但是，当鼠标进入 id 为 imgMapDiv 的 div 时，因为那是一个超链接，整个 TD 应该不突出显示。- 这是部分，我有问题。

我已经尝试了一些 jQuery 方法来切换类 - 但是一旦 TD 失去突出显示类，它就再也不会回来了。我在这里寻找 CSS only 或 CSS javascript 、 jquery 解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:27:57.627

这是一个示例：
检查我的[小提琴](http://jsfiddle.net/trajce/rP2sn/1/) 我更新了它。
您必须根据需要对其进行修改：

```
$("#imgMapDiv").mouseenter(function(){
  $(this).parents('td').removeClass('someclass');
}).mouseleave(function(){
  $(this).parents('td').addClass('someclass');
}); 
```

我用这个[技巧](https://stackoverflow.com/questions/12747903/remove-css-hover-style)。
我添加了一个类以`<td class="someclass">`
将悬停附加到该类，`td.someclass:hover { background: #cccccc; }`
然后`mouseenter()`删除该类，然后`mouseleave()`重新添加它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T21:28:03.827

您尝试过哪些 jQuery 方法？您是否尝试过 jQuery 的[mouseenter()](http://api.jquery.com/mouseenter/)和[mouseleave()](http://api.jquery.com/mouseleave/)为内部 div 设置处理程序？您可以在内部 div 的 mouseleave() 上恢复您的 TD 类，通过[parents('td')](http://api.jquery.com/parents/)访问它。

# cassandra - 从地图中选择特定值

> ID：16024839
> 
> 赞同：16
> 
> 时间：2013-04-15T21:17:02.560
> 
> 标签：cassandra, cql, cql3

我正在尝试创建一个包含 20,000 多列的 WIDE Column Table

最初我想我会使用：

```
CREATE TABLE details (
   key TEXT,
   detail map<TEXT, TEXT>
   PRIMARY KEY (KEY)
  ); 
```

插入此表工作正常

```
UPDATE details SET detail = detail + { 'col1': '12'} where key='123' ;
UPDATE details SET detail = detail + { 'col20000': 'ABCD'} where key='123' ; 
```

但是，我想阅读一个单独的细节：

```
 select detail[col1] where key='123' 
```

执行此查询时，我收到以下错误：

```
 no viable alternative at input '[' 
```

这会奏效吗，还是我需要不同的方法？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-17T13:34:35.047

集合是您一次获取所有数据的小组。

如果您想在更精细的级别访问元组，并且仍然能够询问“给定键的所有数据对是什么”，您应该使用如下表：

```
CREATE TABLE details (
  key TEXT,
  detail_key text,
  detail_value text,
  PRIMARY KEY (key, detail_key)
); 
```

这将允许`SELECT * FROM details WHERE key = ?`以及`SELECT * FROM detail WHERE key = ? AND detail_key = ?`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-17T06:39:44.683

基本上，cassandra 尚不支持此功能。

看到这个[cql3 集合](http://www.datastax.com/dev/blog/cql3_collections)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-26T19:40:15.130

您可以使用[用户定义类型](https://docs.datastax.com/en/cql/3.3/cql/cql_reference/cqlCreateType.html?hl=type)而不是[地图类型](https://docs.datastax.com/en/cql/3.3/cql/cql_using/useMap.html?hl=map)。尝试以这种方式定义表：

```
CREATE TYPE detailtype (
    col1 TEXT,
    col2 TEXT
);

CREATE TABLE details (
   key TEXT,
   detail frozen<detailtype>,
   PRIMARY KEY (KEY)
); 
```

然后可以通过这种方式查询：

```
select detail.col1 where key='123'; 
```

# proxy - SignalR .net 客户端连接到集线器，但不能 hubProxy.Invoke()

> ID：16024842
> 
> 赞同：3
> 
> 时间：2013-04-15T21:17:06.117
> 
> 标签：proxy, signalr

我有一个独特的情况。我开发了一个 MVC 4 网站和连接到托管 SignalR 集线器的网站的 .NET 客户端。hubConnection 对象成功连接到集线器。但是，如果我调用 hubProxy.Invoke("Test").Wait(); ，则创建的 hubProxy 对象根本不会返回。我的集线器只是返回一个布尔值 true；

有趣的是，当我通过 VS 和 IIS express 在本地运行网站和 .net 客户端时，一切正常。当我在完整的 2008R2 IIS 7.5 服务器和笔记本电脑上的 .net 客户端上运行网站时，它失败了。或者更恰当地说，线程只是在 HubProxy.Invoke("Test").Wait() 处停止并且永远不会返回（它只是继续运行）。

更有趣的部分是当我开始运行 Fiddler 以查看发生了什么或调用是否通过 Web 服务器时，问题随后自行解决，一切正常。

似乎以某种方式充当我的 .net 客户端代理的提琴手使 hubProxy.Invoke() 工作。如果我需要代理，我会认为我的 HubConnection 对象会失败？能够成功连接到集线器连接只是为了意识到线程似乎永远运行试图调用集线器代理上的函数，这有点误导？

谁能澄清这种行为？以及关于我需要做什么才能在.net 客户端正确创建 HubConnection/Proxy 以调用服务器上的方法的任何建议？

此外，这可能相关也可能不相关。我注意到，如果我将我的网站托管为：
http{s}//mywebsiteserver/mywebsite”并且我可以通过网络浏览器以这种方式浏览，它不会作为信号器连接字符串工作。我必须使用完全合格的http{s}//mywebsiteserver.mydomainname.xyz/mywebsite 的 DNS 名称

有什么建议么？

谢谢！麦克风

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T02:23:37.673

在我看来，在启动或发出任何其他 HTTP 请求*之前*[`ServicePointManager.DefaultConnectionLimit`](http://msdn.microsoft.com/en-us/library/system.net.servicepointmanager.defaultconnectionlimit.aspx)，您需要在 .NET 客户端中将其设置为大于其默认值 2 的值。我发现 10 是运行单个 SignalR 的合理限制。*`HubConnection``HubConnection`*

 *通常，SignalR 将只有 2 个或更少的并发 HTTP 连接，但情况并非总是如此。我发现运行 Fiddler 有时会隐藏这个问题，但我不知道为什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-21T20:46:21.200

另一种解释可能是您需要仔细检查您的网址。

假设您的中心位于**site.com**上，并且您有一个从**www.site.com**到 site.com的**301 重定向。**

 **然后 SignalR 在您使用时可能似乎建立了连接

```
_hubConnection = new HubConnection("http://www.yoursite.com/signalr"); 
```

但在这种情况下，您必须使用

```
_hubConnection = new HubConnection("http://yoursite.com/signalr"); 
```

否则 _hubConnection.Start 似乎工作，但 _proxy.Invoke 没有。我自己犯了这个错误。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-28T17:47:21.310

在我的情况下，我收到此 Web 请求错误“请求失败，HTTP 状态 417：预期失败。”

我在客户端使用解决了这个问题：

```
ServicePointManager.Expect100Continue = false; 
```

阅读更多： http: [//www.codeproject.com/Articles/94235/The-request-failed-with-HTTP-status-417-Expectatio](http://www.codeproject.com/Articles/94235/The-request-failed-with-HTTP-status-417-Expectatio)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-23T15:21:54.880

还要确保您在服务器上定义的方法不是静态的。我自己也遇到了这个问题。***

# jquery - jQuery 表单验证引擎无法在 equals 上正常工作

> ID：16024849
> 
> 赞同：5
> 
> 时间：2013-04-15T21:17:37.260
> 
> 标签：jquery, forms, jquery-validation-engine

我刚刚下载了 jQuery 插件表单验证引擎。到目前为止一切正常，直到我检查密码是否匹配。如果密码字段和确认密码字段都留空，则不会出现错误消息“字段不匹配”，这很好，因为它们匹配。但是，当我在密码文本框中输入内容并在确认文本框中输入相同的密码时，错误消息会一直显示“字段不匹配”，而显然它们确实如此。

HTML：

```
<form id = "signup">
  <label>Password:</label>
  <input type = "password" name = "txtPassword" id = "txtPassword" class = "validate[required,minSize[6],maxSize[50]]"/>
  <label>Confirm Password:</label>
  <input type = "password" name = "txtCPassword" id = "txtCPassword" class = "validate[required,equals[txtPassword]]"/>
</form> 
```

我的 JS 文件：

```
$(document).ready(function(){
    $("#signup").validateEngine();
}); 
```

在我的 HTML 文件中，我有指向验证 css 样式以及验证引擎和 en 语言的链接。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T20:34:34.823

我找到了我的问题的解决方案。出于某种原因，我必须输入具有相同 id 的元素，因此它没有采用我想要的输入字段的值。:P 简单但危险的编程错误。如果其他人遇到此问题，请确保您的 id 是唯一的！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-21T14:01:22.120

你可以试试这个：

```
<form id = "signup">
  <label>Password:</label>
  <input type = "password" name = "txtPassword" id = "txtPassword" class = "validate[required,minSize[6],maxSize[50]]"/>
  <label>Confirm Password:</label>
  <input type = "password" name = "txtCPassword" id = "txtCPassword" class = "validate[required,equals[txtPassword]]"/>
</form>

$("#signup").validationEngine(); 
```

..确保你的 jQuery`validation`不是`validate`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-18T08:48:19.823

如果你想检查**确认密码验证**，那么你可以使用

```
<label>Password:</label>
<input type="password" id="password" name="password"  class="validate[required]"/>

<label>Confirm Password:</label>   
<input type="password" id="confirm_password" name="confirm_password"  class="validate[required,equals[password]]"/> 
```

# sql - 按 LONG 列查询

> ID：16024857
> 
> 赞同：1
> 
> 时间：2013-04-15T21:18:33.840
> 
> 标签：sql, oracle11g

我们即将安装一个大型项目，我正在编写 SQL 脚本来进行一些安装验证。正在修改的某些视图仅在查询中有所不同，而不是在名称或列数上。

这些很难验证，因为 dba_views 将查询文本存储在 LONG 列中。通常，我会使用这样的查询：

```
select *
  from dba_views
 where name = 'LOCKED_DOCUMENTS_V'
   and instr(upper(text), 'TLP') > 0; 
```

查看视图是否包含特定的文本字符串，它是代码，但这不适用于长列。

到目前为止，我唯一想到的是可以从 dba_views 检查 text_length，但最好检查实际查询。

关于如何在将在 SQL*Plus 中执行的 SQL 脚本中执行此操作的任何想法？

谢谢，丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:35:25.663

嘿，我会使用 DBMS_METADATA.GET_DDL，如下所示：

```
select 
   dbms_lob.instr(clob_contents,'TLP')
from 
   (select 
        dbms_metadata.get_ddl('VIEW','LOCKED_DOCUMENTS_V', 'SCHEMA') clob_contents 
    from 
        dual) get_clob 
```

这将使您获得该位置-只要它> 0，您就很高兴它在那里。

# ajax - 使用 IE7、8 和 9 进行 Ajax 跨域调用

> ID：16024860
> 
> 赞同：0
> 
> 时间：2013-04-15T21:18:50.467
> 
> 标签：ajax, cross-domain

我需要使用 Ajax 对查询数据库的 PHP 文件进行调用。PHP 与 HTML 文件位于不同的域中，因此我当前的代码在 IE、7、8 和 9 中不起作用。以下是在另一个域上调用 php 的示例。

```
 $.post('http://other-domain.com/promo_subscribe.php', subscribeData, function(data){

    }

 $.get('http://other-domain.com/misc/promo_getstate.php', {
                crossDomain : true,
                cache:false,
                email: emailaddress,
                country: 'DE',
                lang: lang,
                source: 'Spring_dly'
            }, function (test) {

            } 
```

对我来说最好的选择是什么？是否需要后端更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:33:53.350

我不确定这是否专门回答了您的问题，但您可以使用 IE 进行跨域调用。它们需要使用 XDomainRequest 对象并且有一些特殊的考虑。这里有更多有用的信息：

[IE8/9 中带有 jQ​​uery 和 XDomainRequest 的 CORS](https://stackoverflow.com/questions/11487216/cors-with-jquery-and-xdomainrequest-in-ie8-9)

# objective-c - XCode 调试器奇怪的行为

> ID：16024861
> 
> 赞同：1
> 
> 时间：2013-04-15T21:18:50.980
> 
> 标签：objective-c, xcode, debugging

我有一个我正在尝试调试的 iPhone 应用程序。

我的一种方法仅在执行代码时返回错误值，在调试器中它很好。

```
int finalResponse = 0;
finalResponse = [data getInteger:@"final_response"]; 
```

然后在调试器中

```
p finalResponse  
(int) $0 = 130450628

p [data getInteger:@"final_response"]
(int) $1 = 0 
```

我期待 0 值，另一个是垃圾。我不明白为什么它会根据我执行函数的方式产生不同的结果。

编辑：

getInteger 返回一个 int 它使用一个底层的 c 库，它返回一个 (const void*)，就像这样

```
int* value = get_dictionary_value("final_response", dictionary);
int val = (int) *value;
return val; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T21:43:46.413

[名称不佳 - 不应该有`get`前缀]`getInteger:`方法是否会执行诸如将索引推进到 的任何操作`data`？

还是`getInteger:`返回一个 NSNumber？

如何`getInteger:`实施？

仅凭该代码，很难说。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:59:31.773

有时我在使用发布版本进行调试时会遇到奇怪的调试行为；确保您使用正确的构建阶段进行调试。

# visual-studio-2010 - 无法从 'cv::Mat' 转换为 'void *'

> ID：16024863
> 
> 赞同：0
> 
> 时间：2013-04-15T21:19:07.263
> 
> 标签：visual-studio-2010, opencv

似乎我是唯一一个使用 Opencv 2.4.3 遇到这个问题的人。

[http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html](http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html) 该官网公布了以下代码：

```
Size patternsize(8,6); //interior number of corners
Mat gray = ....; //source image
vector<Point2f> corners; //this will be filled by the detected corners

//CALIB_CB_FAST_CHECK saves a lot of time on images
//that do not contain any chessboard corners
bool patternfound = findChessboardCorners(gray, patternsize, corners,
        CALIB_CB_ADAPTIVE_THRESH + CALIB_CB_NORMALIZE_IMAGE
        + CALIB_CB_FAST_CHECK);

if(patternfound)
  cornerSubPix(gray, corners, Size(11, 11), Size(-1, -1),
    TermCriteria(CV_TERMCRIT_EPS + CV_TERMCRIT_ITER, 30, 0.1));

drawChessboardCorners(img, patternsize, Mat(corners), patternfound); 
```

`gray`是`Mat`, 直接用作`void*`

但在我的视觉工作室 2010 上，它一直说错误

```
Error   1   error C2664: 'cvFindChessboardCorners' : cannot convert parameter 1 from 'cv::Mat' to 'const void *'    22 
```

而且，我尝试了以下方法，但仍然是同样的错误。

```
static_cast<void*>(gray)
Error   1   error C2440: 'static_cast' : cannot convert from 'cv::Mat' to 'void *'  21

(void*)gray
Error   1   error C2440: 'type cast' : cannot convert from 'cv::Mat' to 'void *'    21 
```

我正在使用 OpenCV 2.4.3。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:24:47.430

OpenCV 文档中的示例代码使用 C++ 接口 ( `findChessboardCorners`)。您正在调用 C 接口 ( `cvFindChessboardCorners`)。如果您可以使用 C++ 接口，我强烈推荐它。我认为您应该能够使用 C++ 接口，因为如果您的代码编译为 C，我认为它不会抱怨强制转换为 void 指针（尽管我可能错了！）。

注意：根据命名空间，您可能必须像这样调用函数：

`cv::findChessboardCorners`

您应该能够直接传递您的`gray`对象而无需任何强制转换。

# c# - 具有分组集合标题单击的 ListView (Windows Store/Caliburn)

> ID：16024864
> 
> 赞同：0
> 
> 时间：2013-04-15T21:19:13.007
> 
> 标签：c#, windows-store-apps, winrt-xaml, caliburn.micro

我有一个绑定到 CollectionViewSource 的 ListView，它是分组的。我希望标题是可点击的，但是如何使用 MVVM - Caliburn 做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T04:57:26.167

在这种情况下，您应该能够使用[Message.Attach](https://caliburnmicro.codeplex.com/wikipage?title=All%20About%20Actions)语法。这是您从项目模板中修改`DataTemplate`in的方式：`GroupedItemsPAge``Grid App`

```
<DataTemplate>
    <Grid Margin="7,7,0,0">
        <Button
            AutomationProperties.Name="Group Title"
            cal:Message.Attach="[Event Click] = [Action OnHeaderClick($dataContext)]"
            Style="{StaticResource TextPrimaryButtonStyle}">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="{Binding Title}" Margin="3,-7,10,10" Style="{StaticResource GroupHeaderTextStyle}" />
                <TextBlock Text="{StaticResource ChevronGlyph}" FontFamily="Segoe UI Symbol" Margin="0,-7,0,10" Style="{StaticResource GroupHeaderTextStyle}"/>
            </StackPanel>
        </Button>
    </Grid>
</DataTemplate> 
```

现在单击标题将调用`OnHeaderClick`视图模型中的方法。

# sql - 需要一个存储过程来使用临时表中的行作为 AND 条件

> ID：16024874
> 
> 赞同：0
> 
> 时间：2013-04-15T21:19:53.820
> 
> 标签：sql

如果我有一个包含如下数据的表：

```
Search Criteria Table
=================================
Group              Name
=======            =======
Surgeon            Hannibal
Anesthesiologist   Murdock
Perfusionist       Face
Nurse              BA

Data Tables
=================================
CaseId      Patient
=========   ===========
1           Colonel Lynch
2           Roderick Decker
3           Captain Crane

CaseId     PersonnelGroup       PersonnelName
=========  ================     =============
1          Surgeon              Hannibal
1          Anesthesiologist     Tawnia Baker
2          Perfusionist         Face
2          Surgeon              Hannibal
2          Anesthesiologist     Murdock
2          Nurse                BA
3          Surgeon              Frankie Santana
3          Anesthesiologist     Murdock
3          Nurse                BA
4          Surgeon              Frankie Santana
4          Anesthesiologist     Tawnia Baker
4          Perfusionist         Amy Allen
4          Nurse                BA
5          Surgeon              Hannibal
5          Anesthesiologist     Murdock
5          Perfusionist         Face
5          Nurse                BA 
```

我想编写一个程序，该程序将根据标志向我显示这些人员中的任何一个人处理过该案例的案例，或者他们所有人都从事过该案例的工作。希望我在上面添加的数据反映了这一点，但我想在设置“where any”模式时返回所有 5 种情况，并且只在设置“where all”模式时返回情况 5。

我知道如果我将 3 个表连接在一起，我会回答“任何地方”部分，但不确定如何做“所有地方”部分。那有意义吗？

是否可以在单个语句中执行？我通过传入我拆分成表的分组对列表来获取搜索条件表。我可以控制数据如何传递到 proc 中，因此如果需要更改它也可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:31:19.370

这是一种方法：

```
select c.caseId
from cases c 
     SearchCriteria sc left outer join
     on sc.PersonnelName = c.Name and
        sc.PersonnelGroup = c.Group
group by c.caseId
having (@flag = 'all') and (count(*) = (select COUNT(sc.PersonnelName) from SearchCriteria) or
       (@flag = 'any') and count(sc.PersonnelName) > 0 
```

# android - 读取具有数组列表的文件时出现数字格式异常

> ID：16024876
> 
> 赞同：0
> 
> 时间：2013-04-15T21:20:00.473
> 
> 标签：android

我在标题中收到此错误。我从编辑文本字段创建 2 个数组列表并将它们保存在 xls 文件中。

保存：

```
File sdCard = Environment.getExternalStorageDirectory();
File directory = new File (sdCard, "MyFiles");
directory.mkdirs();            
File file = new File(directory, filename);

FileOutputStream fos;

try {
   fos = new FileOutputStream(file);
      BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(fos));
   bw.write(mydata+"\t"+myweight+"\n");
   bw.flush();
   bw.close();
    } catch (IOException e2) {
       e2.printStackTrace();
        }//catch 
```

并加载：

```
 File sdCard = Environment.getExternalStorageDirectory();
        File directory = new File (sdCard, "MyFiles");
        File file = new File(directory, filename);

        String s;
        FileInputStream fis;

       try {
          fis = new FileInputStream(file);
             BufferedReader br = new BufferedReader(new InputStreamReader(fis));
             do {
                 s = br.readLine();
                 if (s != null)
                     {
                     data.add(Double.parseDouble(s));
                     weight.add(Double.parseDouble(s));
                     }
                 } while (s != null);
           } catch (IOException e) {
              e.printStackTrace();
               }
    } 
```

它在“data.add(Double.parseDouble(s));”行中显示了数字格式异常。

另外，例如，我在 2 个字段 1,10 和 2,20 中输入，文件包含一个具有 [1.0, 2.0] [1.0, 2.0] 的单元格

其他数据？以及如何将数据放在 2 列中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:43:46.897

保存数据的代码只存储一个包含两个数字的文本行，由制表符分隔。当您的代码读取文件时，您会读取整行，试图解析文本，这显然是不可解析的（有一个选项卡）。

您应该迭代编写每一行的数组。然后， read 方法应该拆分读取的字符串并分别解析每个子字符串。

问候。

让我们试着解释一下我会做什么[未编译]：

```
File sdCard = Environment.getExternalStorageDirectory();
File directory = new File (sdCard, "MyFiles");
directory.mkdirs();            
File file = new File(directory, filename);

FileOutputStream fos;

try {
    fos = new FileOutputStream(file);
    BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(fos));
    //I assume mydata and myweight are both List<Double>... with same size
    for(int i = 0; i < mydata.size(); i++){
        bw.write(mydata.get(i)+"\t"+myweight.get(i)+"\n");
    }        
    bw.flush();
    bw.close();
} catch (IOException e2) {
    e2.printStackTrace();
}//catch 
```

...

```
File sdCard = Environment.getExternalStorageDirectory();
File directory = new File (sdCard, "MyFiles");
File file = new File(directory, filename);

String s;
FileInputStream fis;

try {
    fis = new FileInputStream(file);
    BufferedReader br = new BufferedReader(new InputStreamReader(fis));
    do {
        s = br.readLine();
        if (s != null)
        {
            String[] splitLine = s.split("\\t");
            data.add(Double.parseDouble(splitLine[0]));
            weight.add(Double.parseDouble(splitLine[1]));
        }
    } while (s != null);
} catch (IOException e) {
     e.printStackTrace();
} 
```

# c# - 为什么在 finally 块上重新抛出捕获的异常

> ID：16024886
> 
> 赞同：1
> 
> 时间：2013-04-15T21:20:31.173
> 
> 标签：c#, exception, exception-handling

今天看到这段代码：

```
get
{
   Exception ex = null;
   try
   {
       try { OnCurrentRead(); }
       catch (Exception _) { ex = _; }
       return base.Current;
   }
   finally { if (ex != null) throw ex; }
} 
```

我想知道这种异常处理有什么需要。删除堆栈跟踪？

捕获从 OnCurrentRead() 引发的异常并将其分配给局部变量。该属性返回，但在 finally 块上，如果发现局部变量被分配了异常对象，则抛出此异常。基本上哪个

与下面的代码有什么区别？

```
get
{
   try
   {
      OnCurrentRead();
      return base.Current;
   }
   catch(Exception ex) { throw ex; }
} 
```

还是这个？

```
get
{
   OnCurrentRead();
   return base.Current;
} 
```

**更新**

似乎第一个代码示例确保在每种情况下都会调用 base.Current（它是一个属性），无论 OnCurrentRead() 是否引发异常。这意味着它的行为不同于我提供的其他两个代码替代方案，其中**base.Current**不会在 OnCurrentRead() 引发异常的情况下被调用。

我的问题是这种异常处理是否仅用于实现对 base.Current 的调用，或者它与返回值然后在 finally 块上引发异常的某些语言规范有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:27:10.813

在原始代码中，if`Current`是一个属性，它的实现*将*在异常被重新抛出之前执行。

在您提出的两个替代方案中，如果抛出异常，`Current` *则不会执行任何可能的实现。*`OnCurrentRead()`

也就是说，恕我直言，原始代码有一些严重的代码气味。我更喜欢您的第二种选择（但从技术上讲，它不等同于原始选择）。

# c# - 获取字符串输入并创建一个 int 数组

> ID：16024888
> 
> 赞同：-3
> 
> 时间：2013-04-15T21:20:41.863
> 
> 标签：c#

如何获取字符串输入并将其转换为 int 数组？

```
string input = Console.ReadLine();
int numb = Convert.Toint32(input);          
int[] intArray = // what do i write here to make it take the "input" length, and put the input into an int array? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:29:38.987

您没有提供太多详细信息，但如果输入是逗号分隔的数字列表，您可以这样做：

```
string input = "1,2, 3,4  ,5 ,6";  // string to simulate input
int[] numbers = input.Split(new char[] {','})
                     .Select(s => int.Parse(s))
                     .ToArray(); 
```

如果逗号之间的任何字符串不是有效整数，这显然会爆炸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T21:34:35.843

要获取输入的长度，您可以执行以下操作：

```
 string input = Console.ReadLine();
    int numb = input.Length;
    int[] intArray = new int[1];
    intArray[0] = numb; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T21:31:21.307

您可以通过两种不同的方式从字符串中获取数组。

您可以使用 split 方法，将字符串分解为子字符串数组 - 然后您必须解析该数组的每个元素。这可能是您想要的，因为您似乎想要一个整数数组；

或者您可以将字符串转换为字节数组。[在这个问题中已经讨论了这样做的方法](https://stackoverflow.com/questions/472906/net-string-to-byte-array-c-sharp)。然后，您将这些值转换为您认为合适的整数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T21:32:09.063

```
string input = Console.ReadLine();
int numb = Convert.ToInt32(input);
int[] intArray = new int[numb];
for (int i; i < intArray.length; i++)
{
   intArray[i] = numb;
} 
```

# php - PDO 多次获取同一查询

> ID：16024889
> 
> 赞同：3
> 
> 时间：2013-04-15T21:20:47.823
> 
> 标签：php, pdo, fetch

我正在使用 PDO::FETCH_ASSOC 从数据库中获取结果。问题是我在同一个文件中做了两次。这是一个已知问题吗？什么是替代方案？

这是我的代码：

```
FIRST TIME

while($row = $ordersQuery->fetch(PDO::FETCH_ASSOC)) 
        {
            $totalAmount += $row['clientPrice']/100; 
        }
        echo $totalAmount;

SECOND TIME

    while($row = $ordersQuery->fetch(PDO::FETCH_ASSOC)) 
            {
    ....
    } 
```

每当我删除第一个提取时，第二个都可以正常工作。如果我两者都有，第二个不会返回任何东西。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T21:23:27.970

您不能像这样多次从数据库中获取数据。改为这样做：

```
$orders = $ordersQuery->fetchAll(PDO::FETCH_ASSOC);

...

foreach ($orders as $val) {
    // stuff 1
}

...

foreach ($orders as $val) {
    // stuff 2
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T21:27:42.940

使用 fetchAll() 将返回一个数组。然后，您可以根据需要循环多次：

$orders = $ordersQuery->fetchAll(PDO::FETCH_ASSOC);

# matlab - google-code-prettify 不适用于 matlab 代码

> ID：16024890
> 
> 赞同：1
> 
> 时间：2013-04-15T21:20:47.770
> 
> 标签：matlab, google-code-prettify

我正在使用 google-code-prettify 包来突出显示我的 matlab 代码，但是突出显示看起来不像 matlab 样式的着色。我的最小工作示例：

```
<!DOCTYPE html>
<html>
<head>
   <link href="prettify/prettify.css" type="text/css" rel="stylesheet" />
   <script src="prettify/prettify.js" type="text/javascript"></script>
   <script src="prettify/run_prettify.js" type="text/javascript"></script>
</head>
<body>
      <pre class="prettyprint lang-matlab">
      <code>
      i=1;
      if i==2
         i=1;
      end
      while(1)
         a=5;
      end
      %test comment
      </code>
      </pre>
</body>
</html> 
```

例如，在上面的例子中，`%test comment`没有以绿色突出显示，但是一些行被突出显示，例如 while 循环。难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T02:05:03.060

你不需要两者`prettify.js`或`prettify.css`当你使用`run_prettify.js`. 只需添加`?lang=matlab`到`run_prettify.js`URL，它就会加载您需要的所有 JS 和 CSS。

[http://code.google.com/p/google-code-prettify/wiki/GettingStarted](http://code.google.com/p/google-code-prettify/wiki/GettingStarted)说

> 你可以加载JavaScript吗？和 CSS 用于通过一个 URL 进行美化
> 
> ...
> 
> 例如
> 
> ```
> <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js?lang=css&skin=sunburst"></script> 
> ```
> 
> 指定`lang`参数以同时加载 CSS 语言扩展和 skin 参数以加载*旭日形*皮肤。

所以你`<head>`应该看起来像

```
<head>
   <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js?lang=matlab" type="text/javascript"></script>
</head> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T21:26:26.483

您需要包含 matlab 语言处理程序：

```
<script src="https://google-code-prettify.googlecode.com/svn/trunk/src/lang-matlab.js"></script> 
```

# c# - 列表 列出 C# I've googled and seen conversions to List<Object>. But I think my case is different. I have the following: public class Entry { [XmlText] public string DataLogEntry { get 问问题 问问题 2013-04-15T21:20:50.990 131 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I've googled and seen conversions to List<Object>. But I think my case is different. I have the following: public class Entry { [XmlText] public string DataLogEntry { get; set; } } and used like this: public class EndLot { [XmlElement("Entry")] public List<Entry> Items; } So if I have list of strings ie. List<string> EndLotLines How can I create an instance of EndLot with this list. Am trying to: List<Entry> Items = (List<Entry>)EndLotLines; Read-Only string in settings bundle I've added a Settings.bundle, however while displaying version numbers I'd like the fields to be read-only. I've seen a few suggestions that say to change the type from text to title, but when I do this, the settings entry isn't displayed. c#.netlist 4 3 回答 3 This answer is useful 8 使用 Linq 的Select方法： var items = EndLotLines.Select(s => new Entry { DataLogEntry = s }).ToList(); 于 2013-04-15T21:22:47.843 回答 This answer is useful 2 您必须Entry从每个字符串创建新实例。写这个有意义吗？ Entry e = (Entry)"whatever"; 不，您可以使用： Items = EndLotLines.Select(s => new Entry { DataLogEntry = s }).ToList(); 于 2013-04-15T21:23:43.773 回答 This answer is useful 1 尝试以下操作： var endLot = new EndLot { Items = EndLotLines.Select(e => new Entry { DataLogEntry = e }).ToList(); }; 于 2013-04-15T21:24:09.070 回答 Related 3 sql - 每天选择 50 个随机文件 6 javascript - 如何更新数组值javascript？ 1 ios - SQLite 路径 iOS 0 node.js - socket.io、节点集群、express、带 redis 的会话存储 0 mouseenter - 在 VML 地图中的状态上悬停时，MouseEnter 事件不会间歇性触发 1 iphone - plist 文本中的项目符号 1 mysql - Grails 应用程序似乎持有对陈旧数据库连接的引用 1 database - How to dynamically connect to a database 1 c - How to restart a posix thread from another thread (monitor thread in my case) 2 android - 如何用字符串数组填充 ListView？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：16024891
> 
> 赞同：2
> 
> 时间：
> 
> 标签：c#, .net, list

I've googled and seen conversions to `List<Object>`. But I think my case is different. I have the following:

```
public class Entry
{
    [XmlText]
    public string DataLogEntry { get; set; }
} 
```

and used like this:

```
public class EndLot
{
    [XmlElement("Entry")]
    public List<Entry> Items;
} 
```

So if I have list of strings ie.

```
List<string> EndLotLines 
```

How can I create an instance of `EndLot` with this list. Am trying to:

```
List<Entry> Items =  (List<Entry>)EndLotLines; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T21:22:47.843

使用 Linq 的[`Select`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.select.aspx)方法：

```
var items = EndLotLines.Select(s => new Entry { DataLogEntry = s }).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T21:23:43.773

您必须`Entry`从每个字符串创建新实例。写这个有意义吗？

```
Entry e = (Entry)"whatever"; 
```

不，您可以使用：

```
Items = EndLotLines.Select(s => new Entry { DataLogEntry = s }).ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T21:24:09.070

尝试以下操作：

```
var endLot = new EndLot
{
   Items = EndLotLines.Select(e => new Entry { DataLogEntry = e }).ToList();
}; 
```

# iphone - 设置包中的只读字符串

> ID：16024893
> 
> 赞同：8
> 
> 时间：2013-04-15T21:21:00.887
> 
> 标签：iphone, ios, xcode, ipad

我添加了一个 Settings.bundle，但是在显示版本号时，我希望这些字段是只读的。

我已经看到一些建议将类型从文本更改为标题，但是当我这样做时，设置条目不会显示。

![在此处输入图像描述](https://i.stack.imgur.com/L8ZXk.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T07:09:50.223

```
 <array>    
            <dict>
                <key>Type</key>
                <string>PSGroupSpecifier</string>
                <key>Title</key>
                <string>version</string>
            </dict>
            <dict>
                <key>DefaultValue</key>
                <string>1.1</string>
                <key>Key</key>
                <string>version</string>
                <key>Title</key>
                <string>version</string>
                <key>Type</key>
                <string>PSTitleValueSpecifier</string>
            </dict>
        </array> 
```

我可以在 root.plist 中使用上述字典添加只读变量“版本”。您是否设置了使用标题说明符？或者尝试添加上面的字典。在您的 root.plist 中，这将在您的设置中以组样式添加只读标题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-12T10:18:05.570

要在其中显示 Title 属性，`Settings.bundle`您还需要添加“默认值”（它可能为空）。

在这里查看答案：[https ://stackoverflow.com/a/22712746/1757229](https://stackoverflow.com/a/22712746/1757229)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-15T17:42:50.127

您需要将类型从 PSTextFieldSpecifier 更改为 PSTitleValueSpecifier。

# asp.net - 来自远程 URL 的表单身份验证发布

> ID：16024896
> 
> 赞同：0
> 
> 时间：2013-04-15T21:21:12.670
> 
> 标签：asp.net, post, login, forms-authentication, query-string

而不是直接进入我的表单身份验证登录页面：[https](https://sub.domain.org/forms/Login/default.aspx?ReturnUrl=xyz)
://sub.domain.org/forms/Login/default.aspx?ReturnUrl=xyz 并手动输入用户名/密码：

我想知道是否可以从单独的页面发布到 asp.net 表单身份验证 url

示例文件：
[https ://sub.domain.org/forms/tests/login.html](https://sub.domain.org/forms/tests/login.html)

```
<html><head><title>Test Page...</title></head> 
   <body>Connecting... 
   <form name="login" method="post" action="https://sub.domain.org/forms/Login/default.aspx"> 
   <input type="hidden" name= "username" value="someusername"> 
   <input type="hidden " name="password" value="somepassword"> 
   </form><script language="JavaScript"> 
   document.login.submit(); 
   </script></body></html> 
```

但是，所有这些都是重定向到登录页面。 [https://sub.domain.org/forms/Login/default.aspx](https://sub.domain.org/forms/Login/default.aspx)
似乎没有创建会话cookie。

我正在尝试在门户身份验证和我的 webforms 身份验证之间实现类似的功能。该门户支持运行一些类似上面的代码。

任何帮助将不胜感激。

更新：这是基于表单身份验证的登录应用程序的 web.config 部分：[https ://sub.domain.org/forms/Login/default.aspx](https://sub.domain.org/forms/Login/default.aspx)

```
<system.web>
    <compilation debug="true" targetFramework="4.0" />

  <machineKey
    validationKey="3404677AC408C9E2EED87F8418FE2DD0D2AB8D0E824F5B53AC9133F7CC7152F4388E614C267D6DB04638CF6D1C19E55EB052FFD4273DEA04863829E1BFE9CDE4"
    decryptionKey="C9668F6C98502220633033B21818EE57D6F903FC48C2A94B5EC99B8BC1F3F411"
    validation="SHA1" decryption="AES" />

</system.web> 
```

发布到登录 url 的页面没有 web.config。这是一个简单的 html 页面：[https](https://sub.domain.org/forms/tests/login.html) ://sub.domain.org/forms/tests/login.html 如上所示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:45:15.460

我为你挖掘这个。 [http://petesbloggerama.blogspot.com.au/2006/10/cross-application-forms-authentication.html](http://petesbloggerama.blogspot.com.au/2006/10/cross-application-forms-authentication.html)

看来您需要为表单添加 authent web.config

```
enableCrossAppRedirects="true" 
```

您还需要放置一些必须在应用程序之间匹配的身份验证密钥。

希望这可以防止您出现重定向问题。

# jquery - Use of $.noop in jQuery UI destroy method

> ID：16024897
> 
> 赞同：1
> 
> 时间：2013-04-15T21:21:23.820
> 
> 标签：jquery, jquery-ui

jQuery UI implement destroy method. I don't understand purpose of using $.noop called with `this_.destroy()` at the beginning of method:

```
destroy: function() {
    this._destroy();
    //other code here...
    {...}
},
_destroy: $.noop, 
```

Could someone explain it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:39:56.157

在 jQuery 1.9 中，`_destroy`添加了该方法，因此小部件不必调用基本`destroy`方法。[http://bugs.jqueryui.com/ticket/5056](http://bugs.jqueryui.com/ticket/5056)

由于该方法是可选的，所以默认定义为`$.noop`，定义为

```
$.noop = function(){}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T21:26:18.850

`$.noop`只是一个占位符功能。在 javelin.js（facebook 的 javascript 库）中，它被称为“手袋”。有多种用途，有时显式传递一个什么都不做的函数比什么都不传递更有意义。

用这个例子想想我的意图。

```
$.ajax({
    url: 'something.asmx',
    success: $.noop,
    error: $.noop,
    complete: $.noop
}); 
```

显然，这样做的唯一目的是将数据发送到服务器并忽略所有可能的情况。将此与以下内容进行比较，其中意图不明确。

```
$.ajax({
    url: 'something.asmx'
});
// future developer thinks, "hey, should this require some callback? 
```

# c# - Java 对象创建与 C# 的比较

> ID：16024902
> 
> 赞同：0
> 
> 时间：2013-04-15T21:21:41.633
> 
> 标签：c#, java, android, json, object

我正在创建一个移动应用程序，在其中我使用用 C# 编写的 web 服务来创建 JSOn，它被发送到用 Java 编写的应用程序，在网站上的 C# 中，我使用以下内容创建一个新对象：

```
new { success = true } 
```

但是在Java中我似乎不能做同样的事情，如果我不能做同样的事情，那么在Java中最好的选择是什么？

为了说明这一点，这是我在网站上的一种网络方法：

```
[WebMethod]
public object getNode(int intId)
{
    DynamicNode node = new DynamicNode(intId);

    object page = new 
    {
        id = node.Id,
        parentId = node.Parent.Id,
        name = node.Name,
        title = node.GetPropertyValue("title"),
        summary = node.GetPropertyValue("summary"),
        body = node.GetPropertyValue("body"),
        updateDate = node.UpdateDate.ToString(),
        createDate = node.CreateDate.ToString()
    };

    return page;
} 
```

如果有人可以帮助我，我将非常感激！

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:30:54.560

```
public class Page{

    int id;
    int parentId;
    String name;
    String title;
    String summary;
    String body;
    String updateDate;
    String createDate;

    public Page(int id, int parentId, String name, String title, String summary, String body, String update Date, String createDate)
    {
        this.id = id,
        this.parentId = parentId;
        this.name = name;
        this.title = title;
        this.summary = summary;
        this.body = body;
        this.updateDate = updateDate;
        this.createDate = createDate;
    }

}

...

Page page = new Page(1, 2, "name", "title", "summary", "body", "updateDate", "createDate");

... 
```

# excel - 使用将 Worksheet_activate 和 _deactivate 添加到现有工作表

> ID：16024905
> 
> 赞同：0
> 
> 时间：2013-04-15T21:21:58.013
> 
> 标签：excel, vba, self-modifying

我发现 Siddharth Rout 的用于添加新工作表和代码的出色代码，但我的需要有点不同。

我想将激活代码添加到现有工作表。我尝试用该工作表名称代替使用该`.Name`属性，删除

```
Set ws = Worksheets.Add 
```

并替换`ws.Name`为我现有的工作表名称“工作”。它在那个时候爆炸。

使用现有示例中的代码检查 ws 对象显示 ws 对象的属性 Name 是一个简单的字符串，因此无法使用我现有的工作表的名称代替让我感到困惑。

为什么：

现有工作表“工作”最初是在没有激活代码的情况下创建的。它在这个多页多功能系统中的许多步骤中被大量使用，如果用户手动选择它，我想防止用户更改它 - 有理由让他在暂停交互期间查看它，做出决定 - - 但当我的 VBA 往返于它之间时，让它不受保护。

所以，我想插入保护工作表的激活代码——取消保护的停用代码可以是工作表的永久部分，不会造成伤害——因此，只要用户决定手动查看工作表，就可以保护工作表，每当我的 VBA 允许用户交互时，然后在用户离开工作表并返回交互时通过其 Deactivate 删除/更改该代码，因此它通常可以免费供我的代码使用，否则每次我的代码切换到它时都不会添加保护.

我将创建并永久保留 Unprotect deactivate 代码 - 不会造成伤害 - 所以它不会改变自己（这是一个可怕的禁忌）。如何？

对不起所有的话。我在 VBA 中用谷歌搜索“自我修改代码”的时间没有找到好的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T22:24:56.720

如果您只想暂时捕获另一个工作表上的事件，则可以使用类模块。如果您想将代码永久添加到工作表代码中，则需要使用@Sorceri 提到的 VBA 可扩展性内容。

使用类模块捕获工作簿的事件

在类模块中（名称：SheetEvent）

```
Public WithEvents Sheet As Worksheet

Public Sub Capture(ByVal Worksheet As Worksheet)
Set Sheet = Worksheet
End Sub

Private Sub Class_Terminate()
Set Sheet = Nothing
End Sub

Private Sub Sheet_Activate()
Debug.Print "Sheet_Activate Fired! (Sheet:" & Sheet.Name & ")"
End Sub

Private Sub Sheet_Change(ByVal Target As Range)
Debug.Print "Sheet_Activate Fired! (Sheet:" & Sheet.Name & " Target:" & Target.Address & ")"
End Sub

Private Sub Sheet_Deactivate()
Debug.Print "Sheet_Deactivate Fired! (Sheet:" & Sheet.Name & ")"
End Sub 
```

在一个模块中：

```
Public S As SheetEvent

Sub Main()
Set S = New SheetEvent
S.Capture ThisWorkbook.Worksheets("Sheet1")

End Sub 
```

此方法的问题在于，如果您的 VBA 出现错误或停止执行，您将需要重新启动它。

使用上面的示例，如果您运行`Main()`然后从 Sheet1 切换到 Sheet2 并返回，或者更改 Sheet1 中的任何单元格，您将在即时窗口中收到一条消息。

如果通过在工作表之间“弹跳”表示您正在激活工作表以读取（或设置一些单元格）然后重新激活前一个工作表，您可能会发现使用工作表对象更容易（更快）。

```
Dim Sheet1 As Worksheet
Dim Sheet2 As Worksheet

Set Sheet1 = ThisWorkbook.Worksheets("Sheet1")
Set Sheet2=  ThisWorkbook.Worksheets("Sheet2") 
```

使用上面的代码，您可以通过这两个对象访问 sheet1 和 sheet2 中的数据。不必先激活任何一个（即使也隐藏了）

# file - CodeIgniter 上传多个文件

> ID：16024912
> 
> 赞同：0
> 
> 时间：2013-04-15T21:22:23.900
> 
> 标签：file, codeigniter, upload

控制器

```
$config['upload_path'] = '../ci/assets/images/';
$config['allowed_types'] = 'gif|jpg|png';
$config['max_size'] = '1000';
$config['max_width'] = '1024'; 
$config['max_height'] = '768';

//load upload library
$this->load->library('upload', $config);

//load mPhoto model
$this->load->model("carstock_model"); 

//Check to see if upload was activated if/then/else statement
if (! $this->upload->do_upload())
{
    $error = array('error' => $this->upload->display_errors()); 
    $this->load->view('admin_view.php', $error);
} 
else 
{
    for($i=1; $i<6; $i++) {
        $data = array('upload_data' => $this->upload->data()); 
        $data2 = $this->input->post(NULL, TRUE); //returns POST items with XSS filter
        $filename = $data['upload_data']['file_name']; //obtain the upload filename
        $data2['picture' .$i]= $filename .$i; //get and set the filename

        // $data2['PhotoFilenameLarge']=$filename; //get and set the filename
        $this->carstock_model->insertData($data2); //add the db
    }

    $this->load->view('upload_success', $data); //display the success view
} 
```

看法

```
...    
<input name="userfile" type="file" multiple="multiple" />
... 
```

模型

```
public function insertData($data){
$this->db->insert("carstock", $data); //active record
} 
```

问题是在 mysql 中传递文件时仅将最后选择的图像作为输入并存储错误的名称。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T10:36:30.903

```
for($i = 0;$i<=2;$i++){
    $name = 'image_0'.$i;

    if(isset($_FILES[$name])){
        $this->upload->do_upload($name);
        $data = $this->upload->data();
        dump($data['file_name']);
    }else{
        // do nothing
} // end of for loop 
```

转储($data['file_name']); 将转储文件名。但是您必须为每个字段选择文件

# scala - Anorm Scala executeUpdate 和 executeInsert 之间的区别

> ID：16024916
> 
> 赞同：4
> 
> 时间：2013-04-15T21:22:37.823
> 
> 标签：scala, anorm

我一直在为 using`executeUpdate()`和`executeInsert()`.

在下面的代码中，我使用了`executeInsert()`

```
def addEntry(day: DateMidnight, create_time: DateTime, points: Long, src: String) = DB.withTransaction { implicit connection => 

    Logger.debug("I got here")
    SQL(
      """
        INSERT INTO density_cache(day_of, create_time, points, src) 
           VALUES ({day_of}, {create_time}, {points}, {src})
      """
    ).on(
      'day_of       -> day,
      'create_time  -> create_time,
      'points       -> points,
      'src          -> src
    ).executeInsert()
    Logger.debug("Got to 2nd step")
} 
```

我遇到以下问题：Java.lang.RuntimeException: TypeDoesNotMatch(Cannot convert 2013-04-15 13:58:46.0:class java.sql.Timestamp to Long for column ColumnName(density_cache.day_of,Some(day_of)))

但是当我切换到 时`executeUpdate()`，它工作正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T06:49:35.990

不同之处在于`executeInsert`它将返回自动生成的密钥（如果有的话）。

[Anorm，简单的 SQL 数据访问 => 执行 SQL 查询](http://www.playframework.com/documentation/2.0.1/ScalaAnorm)

> 如果您要插入具有自动生成的`Long`主键的数据，您可以调用`executeInsert()`. 如果您有多个生成的密钥，或者它不是一个 Long，`executeInsert`可以传递一个`ResultSetParser`来返回正确的密钥。

在您的情况下，我猜/假设您没有自动递增的主键，因此它不适用于`executeInsert()`. 如果你有，那么你可能必须传递`ResultSetParser`正确类型的 a 。

# c# - 使用泛型进行类型转换

> ID：16024920
> 
> 赞同：0
> 
> 时间：2013-04-15T21:22:57.397
> 
> 标签：c#, generics

假设我有一个具体的类——“Giraffe”，它实现了“IMammal”。在我的场景中，我可以像这样创建一个通用存储库和工厂：

```
public MammalFactory : IMammalFactory
{
    public IMammalRepository<T> GetMammalRepo<T>() where T: IMammal, new()
    {
        return new MammalRepository<T>();
    }
} 
```

MammalRepository 现在可以是 Giraffe 或 Antelope 类型，只要它们都实现了 IMammal。到目前为止，一切都很好。

但是，我不能使用这样的表达式（不会编译也不能强制转换）：

```
Func<IMammalRepository<IMammal>> = () => this.factory.GetMammalRepo<Giraffe>(); 
```

我的类之间有一个非常相似的方法，我想将它们分解为：

```
//called from different implementations
public void FeedAnimalInternal(Func<IMammalRepository<IMammal>> repo, Action<IMammal> doIt)
{
    var animalRepo = repo();
    var animals = animalRepo.GetAnimals(); //might be giraffe or might be something else
    foreach (var animal in animals) { doIt(animal); }
} 
```

首先，为什么 Func<> （第一个）不能编译？这是协方差的事情吗？接下来，知道如何完成类似于我正在尝试做的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T21:30:04.097

是的，这是一个协方差的事情。如果你`IMammalRepository`这样定义：

```
public interface IMammalRepository<out T> where T : IMammal
{
    // ...
} 
```

这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T21:34:22.640

查看 Eric Lippert关于[协变和逆变的](http://blogs.msdn.com/b/ericlippert/archive/2007/10/16/covariance-and-contravariance-in-c-part-one.aspx)[博](http://social.msdn.microsoft.com/Search/en-US?query=Covariance%20and%20Contravariance%20in%20C#&beta=0&rn=Fabulous%20Adventures%20In%20Coding&rq=site%3ablogs.msdn.com/b/ericlippert/&ac=4)文。我认为这是一个十集的系列。

# java - 如何使用 Java 小程序获取绝对文件路径

> ID：16024925
> 
> 赞同：0
> 
> 时间：2013-04-15T21:23:26.053
> 
> 标签：java, javascript, applet, liveconnect

我正在尝试在网络浏览器中获取绝对文件路径。我了解到使用纯 HTML 和 javascript 是不可能的，而 Java 小程序是最好的途径。不幸的是，我对 Java 的了解充其量只是初级的。到目前为止，我有这个 java 代码：

```
import java.awt.*;
import java.awt.event.*;
import java.io.*;
import javax.swing.*;
import java.awt.Color;
/*
   <OBJECT classid="clsid:8AD9C840-044E-11D1-B3E9-00805F499D93" 
           width=150 height=100 
 codebase="http://java.sun.com/products/plugin/1.3/jinstall-13-win32.cab#Version=1,3,0,0"> 
     <PARAM NAME="code" value="FileApplet.class">
   </OBJECT>
 */

public class fileabs extends JApplet
{
   private JTextField tfCount;
   final JFileChooser fc = new JFileChooser();

  public void init() {
      setBackground(Color.WHITE);
        JPanel p = new JPanel( new FlowLayout(FlowLayout.CENTER, 15, 15));
        p.add(new JLabel("Select File: "));
        tfCount = new JTextField(50);
        tfCount.setEditable(false);
        p.add(tfCount);
        JButton b2 = new JButton("Browse...");
        p.add(b2);
        b2.addActionListener( new ActionListener(){
            public void actionPerformed(ActionEvent ae) {
               tfCount.setText("dsds");
                int returnVal = fc.showOpenDialog(fileabs.this);
                tfCount.setText(fc.getSelectedFile().getAbsolutePath());
            }
        } );

        // p.add(label);
        add(p);
    }

  public String getFilePath() {
    return tfCount.getText();
  }
} 
```

从我在[http://jdk6.java.net/plugin2/liveconnect/#JS_TO_JAVA](http://jdk6.java.net/plugin2/liveconnect/#JS_TO_JAVA)读到的内容，我可以从 javascript 调用小程序方法，所以我想出了这个测试网页：

```
<html>
    <head>
    </head>
    <body>
        <applet id="fileabs" archive="fileabs.jar" code="fileabs" width="960" height="60"></applet>
        <a href="#;" onclick="test()">Test</a>
    <script>
        test = function() {
            alert(fileabs.getFilePath());
        };
    </script>
    </body>
</html> 
```

但是，在萤火虫控制台中，我得到：

类型错误：fileabs.getFilePath 不是函数

我觉得我错过了一些明显的东西。谁能帮我弄清楚我在这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T01:22:11.953

您需要首先获取对小程序 DOM 元素的引用。尝试 `alert(document.getElementById('fileabs').getFilePath());`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T17:34:46.397

The code works as written. The issue turned out to be a cached version of the applet that didn't have the method I was calling.

# java - Java - 使用 DefaultHttpClient 使用 Web 服务

> ID：16024930
> 
> 赞同：0
> 
> 时间：2013-04-15T21:23:34.747
> 
> 标签：java, web-services, http, jakarta-ee, soap

好的，我最近问了一个关于使用 Java 使用 Web 服务的问题，而我遇到了多个编译错误。

在过去的 7 个小时里，我确实花了 7 个小时试图让这个工作正常进行，并在网上进行研究。但是 Java Web 服务调用有很多不同的风格，对于像我这样的新手来说几乎不可能找到与我的场景相关的信息。

我现在至少可以正确编译以下代码。

**进口**

```
import java.util.List;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.ArrayList;

import org.apache.http.HttpResponse;
import org.apache.http.HttpStatus;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair; 
```

**代码**

```
 HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost("http://vogellac2dm.appspot.com/register");

    try {
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
        nameValuePairs.add(new BasicNameValuePair("registrationid", "123456789"));
        post.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        HttpResponse response = client.execute(post);
        BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
        String line = "";
        while ((line = rd.readLine()) != null) {
            System.out.println(line);
        }

    } catch (IOException e) {
        e.printStackTrace();
    } 
```

现在，我有一个 .NET WSDL [http://webservices.vm.vmc/ExampleService.asmx?WSDL](http://webservices.vm.vmc/ExampleService.asmx?WSDL)

我想调用接受 5 个字符串参数的方法“AddEmployee”。

所以从逻辑上讲，我会：

1.  将我的 HttpPost 值更改为 WSDL URL。
2.  输入“AddEmployee”的方法名称。**（不确定如何/在哪里？）**
3.  我认为 nameValuePairs.add 每个参数（名称，值）将使用一次**？**

预先感谢您的任何帮助。

* * *

* * *

**编辑**

在没有透露任何详细信息的情况下，我创建了一个我想要调用的示例。这是一个简单服务的 WSDL，它有 1 个方法，接受 3 个字符串参数，并返回一个字符串。

```
<wsdl:definitions xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tm="http://microsoft.com/wsdl/mime/textMatching/" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/" xmlns:tns="https://webservices.vm.vmc/ClientSmart" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:http="http://schemas.xmlsoap.org/wsdl/http/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" targetNamespace="https://webservices.vm.vmc/ClientSmart">
  <wsdl:types>
    <s:schema elementFormDefault="qualified" targetNamespace="https://webservices.vm.vmc/ClientSmart">
      <s:element name="AddEmployee">
        <s:complexType>
          <s:sequence>
            <s:element minOccurs="0" maxOccurs="1" name="string1" type="s:string"/>
            <s:element minOccurs="0" maxOccurs="1" name="string2" type="s:string"/>
            <s:element minOccurs="0" maxOccurs="1" name="string3" type="s:string"/>
          </s:sequence>
        </s:complexType>
      </s:element>
      <s:element name="AddEmployeeResponse">
        <s:complexType>
          <s:sequence>
            <s:element minOccurs="0" maxOccurs="1" name="AddEmployeeResult" type="s:string"/>
          </s:sequence>
        </s:complexType>
      </s:element>
    </s:schema>
  </wsdl:types>
  <wsdl:message name="AddEmployeeSoapIn">
    <wsdl:part name="parameters" element="tns:AddEmployee"/>
  </wsdl:message>
  <wsdl:message name="AddEmployeeSoapOut">
    <wsdl:part name="parameters" element="tns:AddEmployeeResponse"/>
  </wsdl:message>
  <wsdl:portType name="ExampleServiceSoap">
    <wsdl:operation name="AddEmployee">
      <wsdl:input message="tns:AddEmployeeSoapIn"/>
      <wsdl:output message="tns:AddEmployeeSoapOut"/>
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="ExampleServiceSoap" type="tns:ExampleServiceSoap">
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="AddEmployee">
      <soap:operation soapAction="https://webservices.vm.vmc/ClientSmart/AddEmployee" style="document"/>
      <wsdl:input>
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:binding name="ExampleServiceSoap12" type="tns:ExampleServiceSoap">
    <soap12:binding transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="AddEmployee">
      <soap12:operation soapAction="https://webservices.vm.vmc/ClientSmart/AddEmployee" style="document"/>
      <wsdl:input>
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap12:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="ExampleService">
    <wsdl:port name="ExampleServiceSoap" binding="tns:ExampleServiceSoap">
      <soap:address location="http://localhost:4729/POSWebServices/ExampleService.asmx"/>
    </wsdl:port>
    <wsdl:port name="ExampleServiceSoap12" binding="tns:ExampleServiceSoap12">
      <soap12:address location="http://localhost:4729/POSWebServices/ExampleService.asmx"/>
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:38:55.267

有多种方法可以为 Web 服务生成客户端。如果您可以访问 wsdl（看起来像您），我建议您使用 Apache Axis 之类的工具为您生成客户端类。

[http://axis.apache.org/axis/java/index.html](http://axis.apache.org/axis/java/index.html)

下载 Axis 后，您可以运行一个简单的命令来生成客户端类：

java org.apache.axis.wsdl.WSDL2Java wsdlName

# javascript - JQuery 显示/隐藏字段第一次无法正常工作

> ID：16024931
> 
> 赞同：0
> 
> 时间：2013-04-15T21:23:35.457
> 
> 标签：javascript, jquery, hidden-field

我在这段代码中遇到了一些问题。它有效，但只有在我单击单选按钮后，它才会受到两次影响。当我第一次单击该按钮时，它不起作用，但是如果我再次单击它，它就会起作用。难道我做错了什么？有没有更好的方法来做到这一点？

```
function hide(){
   $(document).ready(function(){
      $("input[id$='yes']").click(function(){
         $("div#hidden").fadeOut(2000);
      });
   });
}; 
```

这就是我的标题中的内容。我有另一个，就像它被称为 show() 一样，它受另一个单选按钮的影响。当您单击一个时，它会隐藏一个 div，当您单击另一个时，它会显示它。

这是影响脚本是否隐藏或显示 div 的单选按钮。

```
<input type="radio" name="field1" id="yes" value="Y" onClick="hide();" />Yes 
```

再一次，还有另一个就像它一样，只是它不是。现在，被隐藏的 div 是：

```
<div id="hidden"><input type="text" name="extrafield1" id="no_box" size="20" maxlength="20" /></div> 
```

同样，当单击 No 单选按钮时，它应该出现，当单击 Yes 单选按钮时，它应该隐藏。它可以工作，但您必须单击单选按钮两次。

此代码段在页面加载时隐藏了 div：

```
function loadHidden(){
    $("div#hidden").hide();
}

<body onLoad="loadHidden()"> 
```

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:34:18.950

您在 hide 函数中定义了 document.ready 事件，因此在文档首次加载时未注册 click 函数的事件。试试这样的结构：

```
$(document).ready(function(){
    $("input[id$='yes']").click(function(){
        $("div#hidden").fadeOut(2000);
    });

    $("input[id$='no']").click(function(){
        $("div#hidden").fadeIn(2000);
    });
}); 
```

这样，当文档准备好时，点击事件就全部设置好了，并且您不需要单选按钮上的 onClick 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T21:34:38.923

看起来`hide()`是造成了问题。试试这个[小提琴](http://jsfiddle.net/NNy95/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T21:57:55.610

只需将您的逻辑写入 document.ready 中的元素点击事件即可。

尝试这个：

```
$(document).ready(function(){
  $(':radio[name=field1]').change(function () {
     if($(this).val()=='Y'){
       $("div#hidden").fadeOut(2000);
     }
     else{
       $("div#hidden").fadeIn(2000);
     }
  });
}); 
```

# java - 在 textview 中使用链接跨度

> ID：16024937
> 
> 赞同：0
> 
> 时间：2013-04-15T21:23:48.400
> 
> 标签：java, android, hyperlink, textview, spannable

我有一个以编程方式在 B 类中创建的文本视图。当 A 类调用它时。

它添加文字说“我去了商店”，我需要“the”这个词作为链接。这是我在 B 类中使用的

```
sb.setSpan(new MyClickableSpan(Word), start, start+Word.length(), Spannable.SPAN_INCLUSIVE_INCLUSIVE); 
```

这是调用类 MyClickableSpan

```
public class MyClickableSpan extends ClickableSpan {
private String word;

public MyClickableSpan(String word) {
    this.word = word;
}

@Override
public void onClick(View widget) {

    Log.d("Spaannnned",word);

}
} 
```

因此，当单击此链接时，它会显示在我的日志中。

但我需要它在 A 类中运行一个函数并传入单词。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:26:38.550

将您的“A 类”实例提供给 的构造函数`MyClickableSpan`，将其保存在数据成员中，然后从您的`onClick()`方法中使用它。

或者，使用[Otto 之类的事件总线](http://square.github.io/otto/)，让 onClick() 发送一条“A 类”订阅的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T22:06:41.763

只需向您的跨度添加一个点击侦听器接口：

```
public class MyClickableSpan extends ClickableSpan {
public interface SpanClickListener
{
     public void onSpanClicked(View widget, MyClickableSpan span);
}
private String word;
private SpanClickListener clickListener;

public MyClickableSpan(String word, SpanClickListener listener) {
    this.word = word;
    clickListener = listener;
}
public String getWord() { return word; }

@Override
public void onClick(View widget) {
        Log.d("Spaannnned",word);
        if (clickListener != null) clickListener.onSpanClicked(widget, this);
    }
} 
```

然后，在您的活动中：

```
MyClickableSpan span = new MyClickableSpan("Hello!", new MyClickableSpan.SpanClickListener() {
           @Override
           public void onSpanClicked(View widget, MyClickableSpan span)
           {
                Toast.makeText(context, span.getWord(), Toast.LENGTH_SHORT);
           }
        };
....
//add your span to the Spannable or whatever you want. 
```

# javascript - 如何克隆 JavaScript 类实例？

> ID：16024940
> 
> 赞同：21
> 
> 时间：2013-04-15T21:24:07.413
> 
> 标签：javascript, jquery

如何克隆 JavaScript 类实例？

我尝试了普通的 jQuery 扩展，但这只是返回一个香草对象。我查看了堆栈上的许多其他答案，但找不到如何克隆实例。

```
function Parent(name) {
    this.name = name;
}

Parent.prototype.sayHello = function() {
    console.log('Hello my name is ' + this.name);
}

function Child(name) {
    Parent.call(this, name);
}

Child.prototype = Object.create(Parent.prototype);

var child = new Child('Billy');

var clone = $.extend(true, {}, child);
clone.name = 'Bob';

child.sayHello();
clone.sayHello();

console.log(child instanceof Child);
console.log(clone instanceof Child); 
```

[http://jsfiddle.net/39gjA/](http://jsfiddle.net/39gjA/)

我希望克隆是深度/递归的。IE 所有作为对象的属性也会被克隆。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-15T22:15:17.593

> 如何克隆 JavaScript 类实例？

如果实例是在构造函数中大量使用闭包创建的，那几乎是不可能的。我们现在可能永远不会设置哪些内部值，以及如何重现这样的设置。因此，最简单的方法是，如果每个类都提供一个`clone`知道该做什么的函数。

> 普通的 jQuery 扩展只返回一个香草对象

不一定，它会返回您传入的内容。使用

```
var clone = $.extend(true, Object.create(Object.getPrototypeOf(child)), child); 
```

相反，您的`instanceof`使用将正常工作。请注意，这`true`表示“深层”副本，可能是也可能不是您想要的。此外，`$.extend`它也会愉快地复制可枚举的继承属性，因此您可能需要使用更复杂的`extend`函数。

或者根本没有 jQuery，只复制自己的、可枚举的属性并且只使用浅拷贝：

```
var clone = Object.assign(Object.create(Object.getPrototypeOf(child)), child); 
```

但同样，并非所有对象都可以通过这种方式克隆，请参阅上面的第一点。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-05-03T07:09:30.283

这将创建一个具有相同原型（类）和相同属性（包括可枚举性/可写性/getters/setters 等）的对象的副本：

```
function clone(obj) {
  return Object.create(
    Object.getPrototypeOf(obj), 
    Object.getOwnPropertyDescriptors(obj) 
  );
} 
```

（见[这里](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyDescriptors)）

它不一定适用于内置对象。例如`Array.isArray(clone([]))`is `false`, 并`clone(function () {})()`表示它不是一个函数，但对于用户创建的对象（类实例或对象文字）它可以正常工作。

要进行深度克隆，您必须遍历属性描述符并递归地克隆值：

```
function deepClone(obj) {
  if (obj === null || typeof obj !== "object")
    return obj
  var props = Object.getOwnPropertyDescriptors(obj)
  for (var prop in props) {
    props[prop].value = deepClone(props[prop].value)
  }
  return Object.create(
    Object.getPrototypeOf(obj), 
    props
  )
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T02:22:36.227

你应该尝试这样的事情：

```
function clone_object(o){
    var n=Object.create(
        Object.getPrototypeOf(o),
        Object.getOwnPropertyNames(o).reduce(
            function(prev,cur){
                prev[cur]=Object.getOwnPropertyDescriptor(o,cur);
                return prev;
            },
            {}
        )
    );
    if(!Object.isExtensible(o)){Object.preventExtensions(n);}
    if(Object.isSealed(o)){Object.seal(n);}
    if(Object.isFrozen(o)){Object.freeze(n);}

    return n;
} 
```

叙述：

1.  `Object.create`使用原型和属性对象创建新对象。
2.  对于要克隆的对象的原型，使用原始对象的原型，使用`Object.getPrototypeOf`.
3.  要创建属性对象，请遍历原始对象（使用`getOwnPropertyNames`）自己的属性，并检索每个使用的属性描述符`getOwnPropertyDescriptor`。
4.  将原始对象的可扩展性/密封/冻结特性应用于克隆。

这不会深度克隆其值本身就是对象的属性。这留给读者作为练习......YMMV。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T00:56:13.800

我认为不一定需要使用类（或函数实例），您可以扩展原型以应用 OOP。我的建议是扩展原型而不是创建类。jQuery 用于 DOM，但不适用于高级对象处理，因此虽然 $.extend 在某些情况下对于复杂的东西可能会有所帮助，但有更高级的库。

您可以使用 CloneJS 之类的库轻松处理可扩展对象： [https ://npmjs.org/package/clonejs](https://npmjs.org/package/clonejs)

只需包含此脚本：http: [//quadroid.github.io/clonejs/cdn/clone.min.js](http://quadroid.github.io/clonejs/cdn/clone.min.js)

并尝试他们自己的例子：

```
/// Forget about classes.    
//  Instead of creating class (function), create prototype (object):
var $duck = $object.clone({
    name: 'Unnamed',
    quack: function(){
        console.log( this.name +' Duck: Quack-quack!');
    }
});
$duck.quack();//Unnamed Duck: Quack-quack!

/// Inheritance is simple: 
var $talkingDuck = $duck.clone({
    quack: function(){
        this.applySuper('quack');
        console.log('My name is '+ this.name +'!');
    }       
});

/// Forget about the `new` operator, use .create() method instead:
var donald = $talkingDuck.create({name: 'Donald'});
donald.quack();// Donald Duck: Quack-quack! My name is Donald!

/// Forget about the `instanceof` operator, use JS native 
//  .isPrototypeOf() method instead:
$duck.isPrototypeOf(donald);// true 
```

另外我认为 Backbone.js 应用了原型的扩展而不是创建类。他们使用 _.extend

更多参考资料： [http :](http://www.2ality.com/2011/11/javascript-classes.html) [//www.2ality.com/2011/11/javascript-classes.html http://underscorejs.org/#extend](http://underscorejs.org/#extend)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-09T02:44:04.977

我很想看到有人将此方法与其他在使用本机 JavaScript 的 JavaScript 中克隆类实例的方法进行基准测试。

```
// Defining a class
function MyClass(args) {

  this.foo = "bar";
}
// Avoid duplicate instances of class methods in RAM by adding them to the class prototype like this
MyClass.prototype.method = method;
MyClass.prototype.clone = clone;

// Define what your methods do
function method() {

  console.log(this.foo);
}

function clone() {

  var classScope = this;

  // Get the prototype of your class. This will create an object that has one key for every method in your class. I'm not sure if this will go up the prototype chain if you have subclasses. Someone ought to edit this answer to clarify that.
  var miniMe = Object.getPrototypeOf(this);

  // Iterate the properties of your class--all the internal key-value pairs that do get duplicated in RAM each time you instantiate the class.
  Object.keys(this).forEach(iterate);

  function iterate(key, index, list) {

      // Add each property to your clone
      miniMe[key] = classScope[key];
    }
    // Return the clone
  return miniMe;
}

// Instantiate your class
var me = new MyClass();
// Clone it
var miniMe = me.clone();

// Run some tests
Object.keys(Object.getPrototypeOf(me)).forEach(iterate);
Object.keys(me).forEach(iterate);

function iterate(property, index, list) {

  if (!miniMe.hasOwnProperty(property))
    throw new Error("miniMe does not have property " + property);
}

// Change the value of miniMe.foo and make sure it didn't impact the value of me.foo
miniMe.foo = "baz";
if (me.foo === miniMe.foo)
  throw new Error("me.foo should not equal miniMe.foo, because we changed its value");
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-15T23:54:06.263

**编辑**：当您知道要克隆哪种对象时，可以按照我的示例进行操作：

在您的示例中，您可以简单地执行以下操作：

```
var child = new Child('Billy');
var clone = new Child();
for (var prop in child) { 
  clone[prop] = child[prop];
} 
```

我已经更新了你的[jsFiddle](http://jsfiddle.net/nmoliveira/39gjA/1/)

# mysql - apache httpd 和 mysql 提供了很多 TIME_WAIT

> ID：16024941
> 
> 赞同：1
> 
> 时间：2013-04-15T21:24:08.513
> 
> 标签：mysql, apache, netstat, time-wait

我们正在运行一个有很多访问者的传统 LAMP 平台（没有数字）。在我们的网络服务器上，我们没有得到很多 TIME_WAIT。我用谷歌搜索了很多，并且认为我了解 TIME_WAIT 的工作原理。但我还没有弄清楚这对我们来说是否真的是一个问题。

我继续调查的原因是我们的网络服务器一天多次出现问题，甚至无法提供静态文件。传送某些文件最多可能需要 30 秒。然后几分钟后，他们在毫秒内交付。同时其他静态和动态页面以毫秒为单位交付。

我知道问题可能是由于多种不同的原因造成的。但在寻找其他地方的问题之前，我想多探索一下这个领域。

**问题**

*   我的 TIME_WAIT:sa 有问题吗？
*   我能做些什么来减少它们？

这是服务器的一些输出。

首先我在谷歌搜索后做了一些调整，它们并没有改变任何东西。

```
[root@web]# cat /proc/sys/net/ipv4/tcp_tw_reuse
1
[root@web]# cat /proc/sys/net/ipv4/tcp_fin_timeout
30
[root@web]# cat /proc/sys/net/ipv4/tcp_keepalive_intvl
30
[root@web]# cat /proc/sys/net/ipv4/tcp_keepalive_probes
5 
```

一些 netstat 输出

```
[root@web]# date
Mon Apr 15 23:08:17 CEST 2013
[root@web]# netstat -an|awk '/tcp/ {print $6}'|sort|uniq -c
      1 CLOSE_WAIT
     39 CLOSING
    117 ESTABLISHED
     45 FIN_WAIT1
      3 FIN_WAIT2
      5 LAST_ACK
     14 LISTEN
     20 SYN_RECV
   1155 TIME_WAIT
[root@web]# netstat --numeric-hosts |grep "mysql" |wc -l
377
[root@web]# netstat --numeric-hosts |grep "mysql.*TIME_WAIT" |wc -l
361
[root@web]# netstat --numeric-hosts |grep "http" |wc -l
1039
[root@web]# netstat --numeric-hosts |grep "http.*TIME_WAIT" |wc -l
842
[root@web]# date
Mon Apr 15 23:08:21 CEST 2013 
```

我在 mysql 服务器上没有看到任何问题。

```
[root@mysql]# netstat -an|awk '/tcp/ {print $6}'|sort|uniq -c
     21 ESTABLISHED
      7 LISTEN
    128 TIME_WAIT
[root@mysql]# netstat --numeric-hosts |grep "mysql" |wc -l
147
[root@mysql]# netstat --numeric-hosts |grep "mysql.*TIME_WAIT" |wc -l
127
show proceslist - displays about 10 sleep processes 
```

**我发现一些有用的链接**

[http://antmeetspenguin.blogspot.se/2008/10/timewait-in-netstat.html](http://antmeetspenguin.blogspot.se/2008/10/timewait-in-netstat.html) [http://www.speedguide.net/articles/linux-tweaking-121](http://www.speedguide.net/articles/linux-tweaking-121)

# c# - 价值类型的代码契约

> ID：16024943
> 
> 赞同：1
> 
> 时间：2013-04-15T21:24:13.390
> 
> 标签：c#, c#-4.0, clr, code-contracts

我刚刚开始使用代码合约，虽然很有希望，但它们似乎在值类型方面有一些限制。例如：

```
public struct Wrap<T>
    where T : class
{
    readonly T value;
    public Wrap(T value)
    {
        Contract.Requires(value != null);
        this.value = value;
    }
    public T Value
    {
        get
        {
            Contract.Requires(Value != null);
            return value;
        }
    }
    [Pure]
    [ContractInvariantMethod]
    void Invariant()
    {
        Contract.Invariant(value != null);
    }
    public static T BigError()
    {
        Contract.Ensures(Contract.Result<T>() != null);
        var x = default(Wrap<T>);
        Contract.Assert(x.Value != null);
        return x.Value;
    }
} 
```

Wrap.BigError 清楚地说明了这个问题。此示例编译并 ccheck 验证 4 个断言，但断言在运行时显然会失败。其中一些断言是多余的，我插入它们只是为了确保验证者在指定点检查这些属性。

[我没有看到这种事情在MS 的代码合同文档中](http://research.microsoft.com/en-us/projects/contracts/userdoc.pdf)被列为已知问题，但它似乎太明显了，不能作为遗漏。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:19:08.143

原来问题是结构中指定的不变量。如果删除不变量，则会得到预期的错误。与 MS 的文档相反，静态检查器似乎确实考虑了结构不变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T23:01:33.293

您的 Value 属性的吸气剂合同中有一些奇怪的东西。您递归地要求 this.Value != null。我确定你的意思是别的，例如

```
Contract.Ensures( Contract.Result<T>() != null ); 
```

有了这个修复，规范对我来说看起来非常合理。检查器（包括运行时）的限制是您始终可以创建结构的默认值，我们无法检查这些默认值的不变量。因此，检查是以默认值的构造为模的。

# tfs - GetService 抛出错误：“找不到路径的一部分 'E:\TFSWorkItemTrackingCache\v11”

> ID：16024945
> 
> 赞同：0
> 
> 时间：2013-04-15T21:24:18.170
> 
> 标签：tfs, tfs-sdk

我正在尝试`WorkItemStore`从`TfsTeamProjectCollection`实例返回。

代码很简单：

```
TfsTeamProjectCollection tfs = new TfsTeamProjectCollection(new Uri(this.Path), new NetworkCredential(this.UserName, pwd, this.Domain));

tfs.Authenticate();

WorkItemStore store = (WorkItemStore)tfs.GetService(typeof(WorkItemStore)); 
```

但是在调用 GetService 时该行出错。传回的错误内容如下：

> “找不到路径 'E:\TFSWorkItemTrackingCache\v11 的一部分”

TFS 实例所在的服务器上没有这样的路径，即使添加文件夹也没有什么区别。

这是怎么回事，我怎样才能摆脱这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:30:41.917

发现了问题。有人将此添加到 web.config add key="WorkItemTrackingCacheRoot" value="E:\TFSWorkItemTrackingCache"

# d3.js - Web 的交互式数据可视化

> ID：16024947
> 
> 赞同：0
> 
> 时间：2013-04-15T21:24:19.323
> 
> 标签：d3.js

因此，我阅读了作者网站上的“Web 交互式数据可视化”一书的前八章。但是我仍然需要更多的知识来专门学习如何在运行时获取数据以及如何在单击它们时更新图表等等。它们在本书的其他章节中。

但是在博客中它说这里是一个免费的“预览”：

[http://ofps.oreilly.com/titles/9781449339739/](http://ofps.oreilly.com/titles/9781449339739/)

然后在 GiuHub 上我还找到了下一章的源代码[https://github.com/alignedleft/d3-book/tree/master/chapter_09](https://github.com/alignedleft/d3-book/tree/master/chapter_09)

那我还需要买那本书吗？我担心在线提供的内容是否真的只是“预览”，但看起来不像..

有人试过那个资源吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T23:45:24.167

这本书与 OFPS 非常相似。我买这本书是为了让它离线（在 iPad 中）可用，并支持作者和社区。我认为你可以用 OFPS 做得很好，但如果你要买一本 D3 书，那就买这本。

# c++ - 模板静态变量 = 未定义的引用

> ID：16024951
> 
> 赞同：1
> 
> 时间：2013-04-15T21:24:32.507
> 
> 标签：c++

此代码在 MSVC 中运行良好，但根据 gcc-4.7.2 C++11，链接器会出现以下问题。它出什么问题了

[演示](http://ideone.com/uJiCw0)

错误：

```
/home/r7Qecv/ccEZjv1w.o: In function `main':
prog.cpp:(.text.startup+0xa): undefined reference to `Foo<long>::s'
prog.cpp:(.text.startup+0x17): undefined reference to `Foo<int>::s'
prog.cpp:(.text.startup+0x2c): undefined reference to `Foo<long>::s'
collect2: error: ld returned 1 exit status 
```

代码

```
#include <iostream>
#include <stack>

using namespace std;

template<class T>
class Foo{
public:
    T a;
    static T s;
};
template<>
int Foo<int>::s;
template<>
long Foo<long>::s;
int main(){

    Foo<int> f;
    Foo<long> f2;
    f.a=4;
    f.s=6;
    f2.a=8;
    std::cout<<f2.s;
    f2.s=11;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T21:29:56.443

你还没有实例化你的静态成员，你只是声明了它们。

这样做（或类似的）：

```
template<>
int Foo<int>::s = 0;
template<>
long Foo<long>::s = 0; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T21:32:25.343

答案是，您需要初始化静态成员才能使其成为定义：

14.7.3p13

> 如果声明包含初始化器，则模板的静态数据成员的显式特化是定义；否则，它是一个声明。

# python - 使用 python 和 webkit 从网站下载文件时出现 HTTP 错误 500：服务器错误

> ID：16024955
> 
> 赞同：0
> 
> 时间：2013-04-15T21:24:53.843
> 
> 标签：python, python-2.7, pyqt, qtwebkit

我正在尝试从网站 www.nsf.gov 下载文件。在浏览器中，首先我必须发出搜索请求。然后，我必须单击导出文件选项来下载文件。

如果，我尝试手动执行，首先我必须粘贴搜索请求的 url。然后，我需要将导出 url 粘贴到浏览器中。如果我不执行第一个过程，它会给我以下消息：

**服务器错误**

此服务器遇到内部错误，导致它无法满足您的请求。最可能的原因是配置错误。请让管理员在服务器的错误日志中查找消息。

因此，以编程方式使用 Webkit 我执行以下操作，但它仍然给我以下错误：

urllib2.HTTPError：HTTP 错误 500：服务器错误。

请帮助我......我现在为此苦苦挣扎了一个星期。这是我的代码：

```
#!/usr/bin/env python

import sys
import signal

from optparse import OptionParser
from PyQt4.QtCore import *
from PyQt4.QtGui import *
from PyQt4.QtWebKit import QWebPage

from bs4 import BeautifulSoup
import urllib2
import shutil
import urlparse
import os

class Crawler( QWebPage ):
    def __init__(self,url_name,file_name):
        QWebPage.__init__( self )
        self._url =   url_name      
    self._file = file_name

    def crawl( self ):
        signal.signal( signal.SIGINT, signal.SIG_DFL )
        self.connect( self, SIGNAL( 'loadFinished(bool)' ), self._finished_loading )
        self.mainFrame().load( QUrl( self._url ) )

    def _finished_loading( self, result ):
        file = open( self._file, 'w' )
        file.write( self.mainFrame().toHtml() )
        file.close()
    self.process( self.mainFrame().toHtml())
    file_download('http://www.nsf.gov/awardsearch/ExportResultServlet?exportType=txt','result.txt')
        sys.exit( 0 )

    def process(self,content):

    html_doc=content
    soup = BeautifulSoup(html_doc)
    soup=soup.prettify()

def main():
    url_name='http://www.nsf.gov/awardsearch/advancedSearchResult?PIId=&PIFirstName=&PILastName=&PIOrganization=&PIState=&PIZip=&PICountry=&ProgOrganization=&ProgEleCode=&BooleanElement=All&ProgRefCode=&BooleanRef=All&Program=&ProgOfficer=&Keyword=&AwardNumberOperator=Range&AwardNumberFrom=1&AwardNumberTo=20000&AwardAmount=&AwardInstrument=&ActiveAwards=true&OriginalAwardDateOperator=&StartDateOperator=&ExpDateOperator='
    file_name='NSF Award Search: Advanced Search Results1.html'
    app = QApplication( sys.argv )
    crawler = Crawler(url_name,file_name)
    crawler.crawl()
    sys.exit( app.exec_() )

def file_download(url, fileName):

    r = urllib2.urlopen(urllib2.Request(url))
    try:
        fileName = fileName
        with open(fileName, 'wb') as f:
            shutil.copyfileobj(r,f)
    finally:
        r.close()

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T22:20:42.840

你可以这样做，但你需要先设置'queryText'变量，你需要这个字符串变量来搜索内容......
你可以使用这个URL进行测试，其中'body'是查询字符串：

[http://www.nsf.gov/awardsearch/ExportResultServlet?exportType=txt&queryText=body&ActiveAwards=true](http://www.nsf.gov/awardsearch/ExportResultServlet?exportType=txt&queryText=body&ActiveAwards=true)

然后你需要在你的代码中使用这个参数来获取数据，让我们调用查询：

```
def _finished_loading( self, result, query ):
    URL = 'http://www.nsf.gov/awardsearch/ExportResultServlet?exportType=txt&queryText=' + query + '&ActiveAwards=true'
    file = open( self._file, 'w' )
    file.write( self.mainFrame().toHtml() )
    file.close()
    self.process( self.mainFrame().toHtml())
    file_download(URL,'result.txt')
    sys.exit( 0 ) 
```

# sql-server - 使用 pypyodbc 连接到 SQL Server

> ID：16024956
> 
> 赞同：10
> 
> 时间：2013-04-15T21:24:55.073
> 
> 标签：sql-server, python-2.7, pyodbc, pypyodbc

我需要使用 Python 2.7 将 unicode 发送到 SQL Server。我[用 pymssql 失败了](https://stackoverflow.com/questions/16024041/unable-to-send-unicode-cleanly-to-sql-server-using-pymssql)。我现在正在尝试开始`pypyodbc`工作（而不是`pyodbc`），因为它提供了[工作 unicode 示例](https://code.google.com/p/pypyodbc/wiki/A_HelloWorld_sample_to_access_mssql_with_python)。问题是示例中的连接字符串看起来不像我认识的任何东西。我看着[这个](https://github.com/jiangwen365/pypyodbc/blob/master/sqlservertests.py)，经过一些试验和错误，构造了这个字符串：

```
conn = pypyodbc.connect("DRIVER={SQL Server};SERVER='MyServer';UID='me';PWD='MyPassword';DATABASE='db'") 
```

重新`DatabaseError`关注连接字符串：

```
C:\Anaconda\lib\site-packages\pypyodbc.pyc in __init__(self, connectString, autocommit, ansi, timeout, unicode_results, readonly, **kargs)
---> 2 conn = pypyodbc.connect("DRIVER={SQL Server};SERVER='MyServer';UID='me';PWD='password';DATABASE='db'")

C:\Anaconda\lib\site-packages\pypyodbc.pyc in __init__(self, connectString, autocommit, ansi, timeout, unicode_results, readonly, **kargs)
---> 2273         self.connect(connectString, autocommit, ansi, timeout, unicode_results, readonly)

C:\Anaconda\lib\site-packages\pypyodbc.pyc in connect(self, connectString, autocommit, ansi, timeout, unicode_results, readonly)
---> 2321         check_success(self, ret)

C:\Anaconda\lib\site-packages\pypyodbc.pyc in ctrl_err(ht, h, val_ret, ansi)
---> 919                 raise DatabaseError(state,err_text)

DatabaseError: (u'08001', u'[08001] [Microsoft][ODBC SQL Server Driver][DBNETLIB]SQL Server does not exist or access denied.') 
```

我知道我的凭据是正确的，因为我已经使用它们通过 pymssql 成功连接。我错过了什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-15T21:31:18.800

`server`从连接字符串的、`uid`、`pwd`和`database`属性中删除单引号：

```
conn = pypyodbc.connect("DRIVER={SQL Server};SERVER=MyServer;UID=me;PWD=password;DATABASE=db") 
```

由于`pypyodbc`提到了与 的兼容性`pyodbc`，请花一点时间查看[pyodbc 连接字符串文档](https://code.google.com/p/pyodbc/wiki/ConnectionStrings)和[pyodbc.connect()](https://code.google.com/p/pyodbc/wiki/Module#Functions)示例。我在 pyodbc 中使用这种语法：

```
cnxn = connect(driver='{SQL Server}', server='localhost', database='test', uid='me', pwd='me2') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-12T14:42:50.250

在连接字符串中省略端口号 (1433)，从 Linux 客户端（但不是 Windows 7）向我抛出了错误。这可能是一个配置问题，但我没有时间去追它。

把它放在那里，以防它帮助别人。

# d3.js - 我是否错误地映射或嵌套了这些数据？

> ID：16024961
> 
> 赞同：1
> 
> 时间：2013-04-15T21:25:06.460
> 
> 标签：d3.js

我正在寻找一些关于如何修复如何将我的数据可视化为条形图的指示。我创建了一个随时间出现的数据的小倍数可视化。由于数据收集方式的性质，数据具有某些属性。例如，您可以在下面看到 .csv 的摘录，其中`group`和`date`重复：

```
group,date,totals
acid,1641,8438
acid,1641,0
acid,1641,0
beef,1641,977.85
beef,1641,0
beef,1641,0
beef,1641,164
beef,1641,5.25
bird,1641,121
bird,1641,0
bird,1641,12
bird,1641,1558
bird,1641,729
bird,1641,1680
bird,1641,0
bird,1641,343
bird,1641,3
bird,1641,2092
bird,1641,0
bird,1641,0
bird,1641,107
bird,1641,2679
bird,1641,167
bird,1641,649
boar,1641,41
boar,1641,13
cheese,1641,13
cheese,1641,22
cheese,1641,1071
cheese,1641,17195 
```

（您可以在[此处查看整个数据集](https://github.com/hepplerj/stanford-history/blob/master/people/mtpoleskey/revised.csv)。）

我遇到的问题`date`是共享 a 的任何地方，而不是对`totals`列求和，而是将数据堆叠在一起。例如，请参阅：

![条形图](https://i.stack.imgur.com/xlpme.png)

我正在努力将数据显示为单个条形图。（我有一个 y 轴无法正确缩放的次要问题）。我曾尝试使用[nest](https://github.com/mbostock/d3/wiki/Arrays#-nest)来解决多年来的问题（这适用于`groups`），但我似乎无法使用`date`.

到目前为止，这是我的代码：

```
var margin = {top: 20, right: 30, bottom: 30, left: 50},
    width = 400 - margin.right - margin.left,
    height = 150 - margin.top - margin.bottom,
    parse = d3.time.format("%Y").parse;

// scales
var x = d3.time.scale().range([0, width]),
    y = d3.scale.linear().range([0, height]),
    yscaled = d3.scale.linear().range([height, 0]);

// load data
d3.csv("revised.csv", function(error, data) {

  // nest values by group
  var groups = d3.nest()
      .key(function(d) { return d.group; })
      .entries(data);

  // parse dates and numbers, assume values are sorted by date
  // compute the maximum totals per group
  groups.forEach(function(s) {
    s.values.forEach(function(d) { d.date = parse(d.date); d.totals = +d.totals; });
    s.maxtotals = d3.max(s.values, function(d) { return d.totals; });
  });

  // compute the minimum and maximum date across groups
  x.domain([
    d3.min(groups, function(s) { return s.values[0].date; }),
    d3.max(groups, function(s) { return s.values[s.values.length - 1].date; })
  ]);
  // y.domain([0, d3.max(data, function(d) { return d.totals; })]);

  // add an SVG element for each group
  var svg = d3.select("body").selectAll("g")
      .data(groups)
    .enter().append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom);

  var canvas_g = svg.append("g")
      .attr("transform", "translate(" + margin.left + "," + margin.top + ")")
      .each(function(d) {
          var g = d3.select(this);
          g.append("g");
        // .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

        y.domain([0, d3.max(d.values, function(r) { return r.totals; })]);
        yscaled.domain([0, d3.max(d.values, function(r) { return r.totals; })]);

      // Draw the charts.

        g.selectAll("rect.aevents")
          .data(d.values)
        .enter().append("rect")
          .attr("height", function(p) {return y(p.totals)})
          .attr("width", 5)
          .attr("x", function(p, q) {return x(p.date)})
          .attr("y", function(p) {return height - y(p.totals)})
          // .on("click", function(p) {console.log(p.date)})
          .attr("class", "bar");
      });

  // draw x axis
  canvas_g.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(d3.svg.axis().scale(x).orient("bottom"));

  // draw y axis
  canvas_g.append("g")
      .attr("class", "y axis")
      .call(d3.svg.axis().scale(yscaled).orient("left"));

  // add a small label for the group name
  svg.append("text")
      .attr("x", width + 40)
      .attr("y", height + 15)
      .attr("text-anchor", "end")
      .text(function(d) { return d.key; });

}); 
```

我应该以不同的方式遍历数据吗？或者，我是否需要以某种方式重组数据？先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T04:29:37.943

首先，您可以阅读[此](https://stackoverflow.com/a/15914716/1041692)答案，如果您想了解更多信息，它将对您有所帮助`d3.nest()`。

对于您的问题，一个好的方法是首先使用嵌套元素`d3.nest()`，然后将组映射到所需的形式。这使：

```
function formatData(inputData){ 
    var array = d3.nest()
        .key(function(d){return d.group})
        .key(function(d){return d.date})
        .entries(inputData)
        .map(function(d){
            var group = d.key
            var values = d.values.map(function(dd){
                var date = dd.key
                var total = 0
                dd.values.forEach(function(ddd){
                    total = total + ddd.totals        
                })
                return {date:date, totals:total}
            })
            return {'group':group, 'values':values}
        })
    obj = {}
    array.forEach(function(d){
        obj[d.group] = d.values
    })
    return obj
} 
```

是使用`inputData`加载的数据`d3.csv()`。这样你可以得到最好的`nest()`和 `map()`

如果您只想为牛肉绘制条形图，您现在可以执行以下操作：

var beefData = formatData(myInput).beef

jsFiddle：http: [//jsfiddle.net/chrisJamesC/FJmMD/3/](http://jsfiddle.net/chrisJamesC/FJmMD/3/)

# sql-server - T-SQL 查询 XML 数据

> ID：16024963
> 
> 赞同：1
> 
> 时间：2013-04-15T21:25:09.703
> 
> 标签：sql-server, xml, tsql

我有以下格式化的 XML：

```
<ROOT>
 <table1>
  <row ID="1".... \>
 </table1>
 <table2>
  <row ID="1".... \>
 </table2>
...
</ROOT> 
```

我想生成一个返回的查询：

```
TableName
table1
table2 
... 
```

换句话说，每个节点下的值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:49:19.443

```
 DECLARE @data XML;

SET @data = 

N'
<root>
 <table1>
  <row ID="1"/>
 </table1>
 <table2>
  <row ID="1"/>
 </table2>
</root>';

SELECT
    T.myAlias.value('fn:local-name(..)', 'nvarchar(50)') as ParentOf_RowElement_Name
FROM 
    @data.nodes('//row') AS T(myAlias)

;

ParentOf_RowElement_Name
--------------------------------------------------
table1
table2 
```

或者

```
DECLARE @data XML;

SET @data = 

N'
<root>
 <table1>
  <row ID="1"/>
 </table1>
 <table2>
  <row ID="1"/>
 </table2>
</root>';

SELECT
    T.myAlias.value('fn:local-name(.)', 'nvarchar(50)') as ChildOf_RootElement_Name
FROM 
    @data.nodes('//root/*') AS T(myAlias)
;

ChildOf_RootElement_Name
--------------------------------------------------
table1
table2 
```

# php - Lighty (Lighttpd) 虚拟主机配置

> ID：16024964
> 
> 赞同：2
> 
> 时间：2013-04-15T21:25:15.143
> 
> 标签：php, ruby-on-rails, virtualhost, lighttpd

我想用 PHP 设置 Lighty 在我的开发环境中使用 3 个不同的域名：

1.  example1.domain.com
2.  example2.domain.com
3.  example4.domain.com

我已经使用 Homebrew 安装了 PHP 5.4 和 Lighty，我的目标是在开发过程中使用类似 Rails 的解决方案来启动/停止 Web 服务器。本质上，我想要：

```
$ rails s 
```

表现得像：

```
$ lighttpd -D -f lighttpd.conf 
```

我已经让服务器运行，并指向 localhost:8000，但由于某些资产以上述域为前缀，因此某些资产无法正确加载。

所以对于我的问题，我如何正确配置具有上述域的虚拟主机的 Lighty？

这是我当前的 Lighty 配置：

```
server.bind = "0.0.0.0"
server.port = 8000
server.document-root = CWD + "/public"
server.errorlog = CWD + "/lighttpd.error.log"
accesslog.filename = CWD + "/lighttpd.access.log"

index-file.names = (
  "index.php",
  "index.html",
  "index.htm",
  "default.htm"
)

server.modules = (
  "mod_fastcgi",
  "mod_accesslog",
  "mod_rewrite"
)

fastcgi.server = (
  ".php" => ((
    "bin-path" => "/usr/local/bin/php-cgi",
    "socket" => CWD + "/php5.socket"
  ))
)

mimetype.assign = (
  ".css"        =>  "text/css",
  ".gif"        =>  "image/gif",
  ".htm"        =>  "text/html",
  ".html"       =>  "text/html",
  ".jpeg"       =>  "image/jpeg",
  ".jpg"        =>  "image/jpeg",
  ".js"         =>  "text/javascript",
  ".png"        =>  "image/png",
  ".swf"        =>  "application/x-shockwave-flash",
  ".txt"        =>  "text/plain"
)

# Making sure file uploads above 64k always work when using IE or Safari
# For more information, see http://trac.lighttpd.net/trac/ticket/360
$HTTP["useragent"] =~ "^(.*MSIE.*)|(.*AppleWebKit.*)$" {
  server.max-keep-alive-requests = 0
}

# Vhost settings
$HTTP["host"] =~ "example[0-9]+.domain.com" {
  server.document-root = CWD + "/public"
  server.errorlog = CWD + "/lighttpd.error.log"
  accesslog.filename = CWD + "/lighttpd.access.log"
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T09:34:05.400

我有 2 个想法，您可以使用类似的东西[`mod_simple_vhost`](https://redmine.lighttpd.net/projects/lighttpd/wiki/Docs_ModSimpleVhost)或在主配置中设置根文档目录。

所以，像：

```
 $HTTP["host"] =~ "^example([0-9])\.domain\.com$" {
        server.document-root = CWD + "/example%1/"
    } 
```

或使用`mod_simple_vhost`，这是一个示例配置：

```
 server.modules += ( "mod_simple_vhost" )

    simple-vhost.server-root   = CWD + "/"
    simple-vhost.document-root = $HTTP["host"] + "/"
    simple-vhost.default-host  = "domain.com" 
```

这将把页面放在，比如说，`example1.domain.com`在`/CWD/example1.domain.com/`。如果这不起作用，请尝试`simple-vhost.document-root = CWD + "/" + $HTTP["host"] + "/"`。

但是，如果您遇到 DNS 问题，请编辑主机文件并添加域，或者配置您的名称服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:38:35.070

如果它们都使用与主服务器配置相同的设置，则无需配置任何虚拟主机。您应该能够将域添加到您的主机文件中，以便将它们定向回您的计算机，而不是指向真正的 domain.com。在 mac 和 linux 上的 /etc/hosts 或 Windows 上的 C:\Windows\System32\drivers\etc\hosts 中添加：

```
127.0.0.1   example1.domain.com
127.0.0.1   example2.domain.com
127.0.0.1   example3.domain.com 
```

# c# - 在自定义 NuGet 包中提供卸载选项

> ID：16024965
> 
> 赞同：0
> 
> 时间：2013-04-15T21:25:24.130
> 
> 标签：c#, nuget, nuget-package, nuget-server

创建自定义 NuGet 包时，我们如何提供卸载 NuGet 包的选项，该选项会删除作为包的一部分提供的引用/静态文件。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:55:48.323

您可以通过提供`uninstall.ps1`脚本来做到这一点。有关更多详细信息，请参阅[文档](http://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-package#Automatically_Running_PowerShell_Scripts_During_Package_Installation_and_Removal)。

# r - R kmeans 对象的集合

> ID：16024969
> 
> 赞同：0
> 
> 时间：2013-04-15T21:25:38.483
> 
> 标签：r, list, collections, vector, k-means

我是 R 新手，我的大部分经验都是在 Java 中。我正在尝试执行以下操作：

```
clusterWeeks <- function()
{
  kmV = list()               #a list of kmeans objects from each week
  for(i in 1:5)
  {
    windows()
    kmV.append(clusterData(i))     #clusterData(i) returns a kmeans object
  }
} 
```

由于某种原因，这不起作用。我希望能够通过以下方式访问对象`kmV[1], kmV[2], ... kmV[5]`

1.  R 中适合此任务的数据结构是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T21:35:42.847

您需要创建一个列表来保存每个单独的对象。否则，您只是覆盖并仅返回最后一个：

```
clusterWeeks <- function()
{
  kmV = vector("list", 5)         # a 5 element list of empty items
  for(i in 1:5)
  {
    windows()
    kmV[[i]] <- clusterData(i)    #clusterData(i) returns a kmeans object
  }
} 
```

您显然来自一种`object.function`语法可接受的语言，但这在 R 中不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T21:36:22.837

根据您的代码，这是我要做的：

```
clusterWeeks <- function(){
  kmV <- c()
  for(i in 1:5)
  {
    kmV <- c(kmV, i)
  }
  return(kmV)
} 
```

小例子：

```
test <- clusterWeeks()
test[2]
2 
```

# php - Gravatar 上的 get_headers() 返回 200 而不是 404

> ID：16024971
> 
> 赞同：2
> 
> 时间：2013-04-15T21:25:52.707
> 
> 标签：php, http-headers, get-headers

我正在传递一个应该生成 404 错误的 URL，使用 PHP 的`get_headers()`. 事实上，如果我使用 URL 作为链接，我的浏览器会出现 404 错误。如果我使用 URL（指向图像文件）作为 img `src`，我的浏览器的“网络”选项卡会显示 404 错误状态。但是当我看到我的响应返回`print_r`的结果时！那是怎么回事？`@get_headers( $uri )``HTTP/1.0 200 OK`

这是网络服务器本身的东西吗？如果是这样，我应该与服务器支持人员沟通什么（如果有的话）以让他们解决问题？

**更新**

我正在测试的 URL 是一个 gravatar URL：http: [//0.gravatar.com/avatar/4d445fd58bf07d406345bac336c3b836 ?s=96&d=404&r=G](http://0.gravatar.com/avatar/4d445fd58bf07d406345bac336c3b836?s=96&d=404&r=G)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:58:28.340

我做了一个测试，我得到的是 404 而不是 200。

```
 $url = 'http://0.gravatar.com/avatar/4d445fd58bf07d406345bac336c3b836?s=96&d=404&r=G';
  var_dump(get_headers($url, 0));
  /* array (size=11)
  0 => string 'HTTP/1.0 404 Not Found' (length=22)
  1 => string 'Cache-Control: max-age=300' (length=26)
  2 => string 'Content-Type: text/html; charset=utf-8' (length=38)
  3 => string 'Date: Tue, 16 Apr 2013 13:46:12 GMT' (length=35)
  4 => string 'Expires: Tue, 16 Apr 2013 13:51:12 GMT' (length=38)
  5 => string 'Last-Modified: Fri, 28 Sep 2012 05:18:58 GMT' (length=44)
  6 => string 'Server: nginx' (length=13)
  7 => string 'Via: 1.1 varnish' (length=16)
  8 => string 'X-Varnish: 3241507148 3241041069' (length=32)
  9 => string 'Content-Length: 13' (length=18)
  10 => string 'Connection: close' (length=17)
  */ 
```

我做了一些搜索，似乎 get_headers() 的行为主要取决于 PHP 版本。

但是可以通过更改 HTTP 上下文选项来更改它（请参阅：[HTTP 上下文选项](http://www.php.net/manual/en/context.http.php)）

## 编辑

这是一个非常相似的问题：[PHP get_headers() 报告的标题与 CURL 不同](https://stackoverflow.com/questions/12210816/php-get-headers-reports-different-headers-than-curl)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:53:46.250

被发送到的 URL`get_headers()`具有 html 转义的实体，特别`&amp;`是而不是实际的`&`& 符号。**尽管它`get_headers()`**最初的用途 ( `<img src='{$url}'... />`) 并不介意 html 实体编码版本，但这对 . 该解决方案只是`&`在构建 URL 时使用。

*Gravatar有效性检查的具体应用*

由于我在检查 Gravatar 的有效性时遇到了这个问题，而且我使用的代码在一些或多或少的“官方”文档中，所以我发布这个以防其他人遇到同样的问题和想要一个剪切和粘贴的解决方案。

```
$url = "$host/avatar/";
$url .= $email_hash;
$url .= '?s='.$size;
$url .= '&d=404';

$gravatar_response_code = wp_cache_get( $email_hash );
if ( false === $gravatar_response_code ){
    $response = wp_remote_head ( $url );
    if ( is_wp_error( $response ) ){
        $gravatar_response_code = "error";
    } else {
        $gravatar_response_code = $response['response']['code'];
    }

    wp_cache_set( $email_hash, $gravatar_response_code, '', 300 );
}

if ( '200' == $gravatar_response_code )
    $avatar = "<img alt='{$safe_alt}' src='{$url}' class='avatar avatar-{$size} photo' height='{$size}' width='{$size}' />"; 
```

*请注意，某些功能和`wp_cache_get()`是WordPress 特定的功能。HTTP API的方法将调用，甚至取决于可用的方法，因此它是 100% 相关的，并且表现出与此处记录的相同的行为。`wp_remote_head()``wp_cache_set()``wp_remote_head()``curl``get_headers()``fopen()`*

# javascript - 返回 Javascript/JQuery 中 div 位置的 x 值

> ID：16024972
> 
> 赞同：0
> 
> 时间：2013-04-15T21:25:55.183
> 
> 标签：javascript, jquery, css

基本上我有一个无序列表，每个列表元素里面都有一个 div，可以在该列表元素内左右滑动。所有这些都可以正常工作，但我希望能够比较 div 的 x 位置，以便如果任何两个在 x 轴上重叠，它们都会变成红色。

```
function checkForOverlap(){
  $("ul#jobs").each(function(){
        var   $this = $(this);
              job = $this.children(":first");
              sib = $this.siblings(":first").children(":first");
        console.log(job.width()+" "+job.css("left"));
        });
} 
```

我的想法是，如果我能得到一个的左边，我可以将它加上它的宽度与其兄弟的左边进行比较。所有 job.css("left") 返回的是

```
auto 
```

有没有办法获取 div 的 x 位置？有没有办法将所有 div x 坐标比较在一起，或者我应该将每个坐标与其兄弟姐妹进行比较（列表是可排序的，因此我可以移动所有元素并检查每个兄弟姐妹的每个元素）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:33:14.353

我看到这个问题，因为有 x 位置吗？是的。它被称为 object.offsetLeft。但是，您必须小心，因为该偏移量的 x 值在其父级内。这意味着父级有一个偏移量，如果您将所有父级的偏移量相加，您将获得屏幕的 x 值或偏移量。

```
function checkForOverlap(){
  $("ul#jobs").each(function(v){
      v.offsetLeft //for the elements offest
      v.parent.offsetLeft // for the parent's offset
        });
} 
```

# c# - SQL 执行错误。将数据类型 nvarchar 转换为 real 时出错

> ID：16024974
> 
> 赞同：1
> 
> 时间：2013-04-15T21:25:56.670
> 
> 标签：c#, sql

目前，我正在对开始失败的 SQL Server 2008 查询进行故障排除。这是查询：

```
SELECT     TOP (100) PERCENT dbo.tblBenchmarkData.FieldDataSetID, dbo.tblBC.BCID, CAST(dbo.tblBenchmarkData.DataValue AS float(8)) AS DataValue, 
                  dbo.tblBC.BCMnemonic, dbo.tblDataType.DataTypeMnemonic
FROM         dbo.tblFieldDataSet RIGHT OUTER JOIN
                  dbo.tblBenchmarkData ON dbo.tblFieldDataSet.FieldDataSetID = dbo.tblBenchmarkData.FieldDataSetID LEFT OUTER JOIN
                  dbo.tblBC LEFT OUTER JOIN
                  dbo.tblDataType ON dbo.tblBC.DataTypeID = dbo.tblDataType.DataTypeID RIGHT OUTER JOIN
                  dbo.tblZEGCode ON dbo.tblBC.BCID = dbo.tblZEGCode.BCID ON dbo.tblBenchmarkData.ZEGCodeID = dbo.tblZEGCode.ZEGCodeID
WHERE     (dbo.tblDataType.DataTypeID = '{5951994B-BF47-4117-805D-B8F85FAB76A8}') AND (dbo.tblFieldDataSet.OriginalFieldDataSetID IS NULL) AND 
                  (dbo.tblFieldDataSet.Duplicate = 0)
ORDER BY dbo.tblBC.BCMnemonic, DataValue 
```

当我删除强制转换并执行查询时，它返回大约 1 400 000 行，因此我获取 DataValue 结果并针对此输出运行一个小型 C# 程序以验证所有数据实际上是数字：

```
List<String> lstLinesOfFile = new List<string>();
Int64 intLineCounter = 0;
ReadFile("data.txt");
double dblNum;

foreach (string strValue in lstLinesOfFile)
{
   bool isNum = double.TryParse(strValue, out dblNum);

   if (!isNum)
   {
      Debug.WriteLine("Line: " + Convert.ToString(intLineCounter) + ", Value = " + strValue);
   }
   intLineCounter++;
} 
```

该程序表明没有不是数字的数据行，所以有人对我为什么会收到此错误有任何建议吗？TIA。

更新：
这是我为验证它是否正在检查每一行数据而编写的代码：

```
List<String> lstLinesOfFile = new List<string>();
Int64 intLineCounter = 0;
ReadFile("data.txt");
double dblNum;

foreach (string strValue in lstLinesOfFile)
{
   bool isNum = double.TryParse(strValue, out dblNum);

   if (!isNum)
   {
      Debug.WriteLine("Line: " + Convert.ToString(intLineCounter) + ", Value = " + strValue);
   }
   else
   {
       Debug.WriteLine("Line: " + Convert.ToString(intLineCounter) + ", Number = " + strValue);
   }
   intLineCounter++;
} 
```

这给出了如下结果：

```
....

Line: 241564, Number = 1843.2
Line: 241565, Number = 18430
Line: 241566, Number = 18430.9
Line: 241567, Number = 18431.6
Line: 241568, Number = 18433.9
Line: 241569, Number = 1844.52

.... 
```

更新 2：从完整的原始视图粘贴上面的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T03:46:14.687

出现此问题是因为有数量惊人的奇数字符串将通过`ISNUMERIC()`测试但无法`CAST()`浮动（并且可能仍可通过 转换`double.TryParse`）。我知道的三个是：

*   '+'
*   '。'
*   '-'

这是捕获其中一些的一种方法：

```
SELECT DataValue
FROM   dbo.tblBenchData
WHERE  ISNUMERIC('0'+DataValue) = 0 
```

奇怪的是，这将要么正确转换，要么拒绝其中大多数而不会出错：

```
SELECT CAST('0'+DataValue As float(8)) As DataValue
FROM   dbo.tblBenchData
WHERE  ISNUMERIC('0'+DataValue) = 0 
```

尽管如此，仍有一些奇怪的案例可以通过。

* * *

好的，我忘记了这个技巧不喜欢有效的负值。

而且，至于“其他”奇怪的情况，我真的不记得它们了，我也从来没有在任何地方看到过它们（真的很烦，我知道）。然而，大多数问题字符串来自各种不同的数值解析器如何看待所谓的“退化情况”，即单个字符串。

因此，尝试解决这两个问题的一种方法是预先检查长度为 1 的字符串，然后对其进行特殊处理。因此，将您的原始查询更改为这样的内容应该可以：

```
;WITH cteBench As
(
    SELECT  *
        ,   CASE
                WHEN DataValue IN('-','.','+')  THEN '0'
                WHEN Len(DataValue) = 1 AND DataValue BETWEEN '0' And '9'
                                                THEN DataValue
                WHEN Len(DataValue) = 1         THEN ''
                WHEN DataValue LIKE '-%'        THEN DataValue
                ELSE                    '0'+DataValue
            END As FixedDataValue
    FROM    dbo.tblBenchmarkData.DataValue
)
SELECT     TOP (100) PERCENT cteBench.FieldDataSetID, dbo.tblBC.BCID, CAST(cteBench.FixedDataValue AS float(8)) AS DataValue, 
                  dbo.tblBC.BCMnemonic, dbo.tblDataType.DataTypeMnemonic
FROM         dbo.tblFieldDataSet RIGHT OUTER JOIN
                  cteBench ON dbo.tblFieldDataSet.FieldDataSetID = cteBench.FieldDataSetID LEFT OUTER JOIN
                  dbo.tblBC LEFT OUTER JOIN
                  dbo.tblDataType ON dbo.tblBC.DataTypeID = dbo.tblDataType.DataTypeID RIGHT OUTER JOIN
                  dbo.tblZEGCode ON dbo.tblBC.BCID = dbo.tblZEGCode.BCID ON cteBench.ZEGCodeID = dbo.tblZEGCode.ZEGCodeID
WHERE     (dbo.tblDataType.DataTypeID = '{5951994B-BF47-4117-805D-B8F85FAB76A8}')
 AND      (dbo.tblFieldDataSet.OriginalFieldDataSetID IS NULL)
 AND      (dbo.tblFieldDataSet.Duplicate = 0)
 AND      ISNUMERIC(FixedDataValue) = 1
ORDER BY dbo.tblBC.BCMnemonic, DataValue 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T22:26:06.130

使用它来确定哪些值不能被 SQL 解析

```
select * from tblBenchData where ISNUMERIC(DataValue) = 0 
```

或这个

```
select * from tblBenchData where DataValue like '%[a-Z]%' 
```

我的猜测是文化问题（例如“，”与“。”）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T23:56:52.657

您在该查询中有右外连接和左外连接语法；但是您在右/左连接表上使用了 where 子句。这有点讨厌，可能没有按照您的预期进行。

我会先看看什么 DataSetID 在`tblBenchData`表中以 null 形式返回。

就像是：

```
SELECT *
  FROM tblDataSet
  WHERE DataSetID NOT EXISTS IN (SELECT DataSetID FROM tblBenchData) 
```

接下来，我猜你在复制/粘贴上遗漏了一些东西，因为`ON`左外连接没有条件`tblBenchCode`。您能否提供正在使用的实际查询？

旁注：我不完全确定你为什么拥有这`TOP(100) PERCENT`件作品。我知道在视图定义中允许 order by 是一个不可靠的技巧，但它在今天毫无意义，在您提供的查询中当然毫无意义......除非这是一个古老的 SQL 服务器。

* * *

另一种可能性是，正如 Loud 指出的那样，您一年前的问题表明您的值是[科学记数法](https://stackoverflow.com/a/9136951/2424)......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T23:30:42.483

上面的SELECT TOP (100) PERCENT dbo.tblBenchmarkData.FieldDataSetID, dbo.tblBC.BCID...其实就是一个叫做qryFieldParameterBCNumericLookup的视图。当我执行这个命令时：

```
SELECT TOP 100 * FROM MyDatabase.dbo.qryFieldParameterBCNumericLookup 
```

我得到错误：

```
Msg 8114, Level 16, State 5, Line 1
Error converting data type nvarchar to real. 
```

当我执行这些命令中的任何一个时，它们都可以正常工作，没有错误：

```
SELECT * FROM MyDatabase.dbo.qryFieldParameterBCNumericLookup
SELECT TOP 50 * FROM MyDatabase.dbo.qryFieldParameterBCNumericLookup
SELECT TOP 1000 * FROM MyDatabase.dbo.qryFieldParameterBCNumericLookup 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T21:55:37.213

乍一看，您似乎没有将 c# 代码连接到 sql 查询。

下面的行将 1stLinesOffline 设置为一个空的字符串列表，但您从未将其设置为其他任何内容，因此 for 循环将永远不会运行。

列表 lstLinesOfFile = new List();

我希望看到

列表 1stLinesOfFile = mySqlResults;

其中 mySqlResults 是 SQL 的结果数据集。

# c - /usr/bin/ld: 使用 makefile 编译时找不到 -lc

> ID：16024978
> 
> 赞同：38
> 
> 时间：2013-04-15T21:26:07.307
> 
> 标签：c, gcc, makefile

上下文优先：我有一个头文件（event.h）、一个名为 event.c 的程序和主程序 main.c。该程序将被编译，首先生成一个目标程序（event.o），然后在一个单独的文件夹中生成一个静态库（libevent.a），然后是可执行程序work1.exe

为此，我创建了这个 makefile：

```
work1 : main.c libevent.a
    gcc -static main.c -L./lib -levent -o work1 -Wall

event.o: event.c
gcc -c event.c -Wall

libevent.a: event.o
ar rcs lib/libevento.a event.o 

clean: 
rm work1 *.o 
```

执行makefile的结果会导致这个错误：

```
 $ make
 gcc -c event.c -Wall
 ar rcs lib/libevent.a event.o 
 gcc -static main.c -L./lib -levent -o work1 -Wall
 /usr/bin/ld: cannot find -lc
 collect2: ld returned 1 exit status
 make: *** [work1] Error 1 
```

知道这里发生了什么吗？有没有办法在不安装任何东西的情况下编译它？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-04-15T21:49:51.883

具体错误如下：

```
/usr/bin/ld: cannot find -lc 
```

链接器找不到静态链接库所需的 C 库。您可以通过调用来尝试查看`libc.a`您的系统上是否已经存在`locate libc.a`。如果返回，请添加一个适当的库标志，指向包含`libc.a`.

如果`libc.a`没有安装，如果你想静态编译你的库，很遗憾你需要安装这个库。既然你说你在 CentOS 上，你应该可以用`yum install glibc-static`.

# node.js - 从 Heroku 上的 Node 应用程序连接到在 Windows Azure 上运行的 MongoDB

> ID：16024980
> 
> 赞同：2
> 
> 时间：2013-04-15T21:26:12.657
> 
> 标签：node.js, mongodb, azure, heroku, azure-connect

我创建了一个使用 mongodb 数据库的节点应用程序，但我不知道如何连接到在虚拟机上运行的数据库。因为穷，我决定把我的mongodb数据库放在Windows Azure上的虚拟机上。我的 Node 应用程序托管在 heroku 服务器上，现在我想将两者连接在一起。如何将节点应用程序连接到 mongodb 数据库？

这是我用来创建我的 mongodb 数据库的指南：http: [//docs.mongodb.org/ecosystem/tutorial/install-mongodb-on-linux-in-azure/](http://docs.mongodb.org/ecosystem/tutorial/install-mongodb-on-linux-in-azure/)

我猜当我调用“mongoose.connect([URL])”时，我需要将从上面的指南中获得的连接 URL (mongodb://mongodbrs.cloudapp.net:27018) 放入我的节点应用程序中。这是正确的吗？如果是这样，我将如何使用 Windows azure 虚拟机进行身份验证？

#穷人问题

# image - Rich Snippet 测试工具中未显示人物的照片

> ID：16024987
> 
> 赞同：0
> 
> 时间：2013-04-15T21:26:40.150
> 
> 标签：image, schema.org, microdata, google-rich-snippets

我试图用该`Person`对象为 Google 结果实现丰富的片段。我们列出了医生，因此我们选择了`Person`对象。一切都很好，例如，标题、地址、隶属关系。唯一不起作用的是照片。

我已按照[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=146646](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=146646)中提到的说明进行操作，其中提到应该使用照片参数。

我的照片微数据代码是

```
<img itemprop="photo" src="http://medeasy.in/web/images/doctorImages250/y5v9fna4nx11t542s4.jpg" alt=""> 
```

丰富网页摘要测试工具会显示照片参数的图像 URL，但照片不会显示在丰富网页摘要工具上。

有人可以建议我做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T12:45:11.757

你在做什么没有错误。只有您对预期行为的解释。您只是告诉蜘蛛什么图像是医生的照片，这取决于谁渲染结果以显示图像。例如，谷歌不会显示这张图片，我不知道有哪个搜索引擎会。

~~如果您真的希望在搜索结果中显示照片，您应该考虑将每个页面与医生的 Google+ 个人资料相关联。~~

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-01T03:58:34.357

更新：

截至目前，谷歌已停止搜索结果中的作者身份片段，因此不会显示与网站链接的 Google+ 个人资料中的任何图像。

谢谢

# google-chrome - Chrome 无法正确显示页面（jQuery 移动 css）

> ID：16024988
> 
> 赞同：0
> 
> 时间：2013-04-15T21:26:52.687
> 
> 标签：google-chrome, jquery-mobile, cross-browser

当我检查以下所有主流浏览器（如 Firefox、Safari、Opera、IE 等）的链接时，我可以很容易地看到该页面，但 Chrome 不理解 jQuery CSS 样式......我的版本是 26.0.1410.64 m，我是使用 Windows 7

[https://www.weg2g.com/application/abovezest/trip-to-Costa-Rica-131230T81dc.html](https://www.weg2g.com/application/abovezest/trip-to-Costa-Rica-131230T81dc.html)

https可以是原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T22:05:00.317

是的，那是你的问题。如果您查看右侧的地址栏，则会有一个盾牌图标，上面写着

> 此页面包含来自未经身份验证来源的脚本

当包含有问题的脚本时，尝试像这样删除协议：

```
<link rel="stylesheet" href="//code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.css" />
<link rel="stylesheet" type="text/css" href="//dev.jtsage.com/cdn/datebox/latest/jquery.mobile.datebox.min.css" /> 
<script src="//code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="//code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.js"></script>
<script type="text/javascript" src="//dev.jtsage.com/cdn/datebox/latest/jquery.mobile.datebox.min.js"></script> 
```

# ember.js - Ember Data：你如何渲染“hasMany”数据？

> ID：16024996
> 
> 赞同：1
> 
> 时间：2013-04-15T21:27:45.877
> 
> 标签：ember.js, ember-data

我无法渲染模型的“hasMany”部分。我似乎和[这个人](https://stackoverflow.com/questions/15601118/how-to-render-hasmany-relationship-data)有类似的问题，但我仍然不知道该怎么办。

这是相关的JS：

```
 App.Router.map(function() {
        this.resource('account', function() {
            this.resource('transaction', {
                path: '/transaction/:transaction_id'
            });
        });
    });

    App.AccountIndexRoute = Ember.Route.extend({

        model: function() {
            return App.Account.find();
        }
    });

    App.TransactionRoute = Ember.Route.extend({

        model: function() {
            return App.Transaction.find();
        }
    });

    App.Store = DS.Store.extend({
        revision: 12,
        adapter: 'DS.FixtureAdapter'
    });

    App.Account = DS.Model.extend({
        title: DS.attr('string'),
        transactions: DS.hasMany('App.Transaction')
    });

    App.Account.FIXTURES = [
        {
            id: 1,
            title: 'Your account',
            transactions: [1, 2, 3]
        }];

   App.Transaction = DS.Model.extend({
        date: DS.attr('date'),
        name: DS.attr('string'),
        amount: DS.attr('number'),
        paidWith: DS.attr('string'),
        account: DS.belongsTo('App.Account')
    });

    App.Transaction.FIXTURES = [
        {
            id: 1,
            date: new Date(2012, 04, 17),
            name: 'Item 1',
            amount: 10,
            paidWith: 'credit card',
            account_id: 1
        },
        {
            id: 2,
            date: new Date(2012, 04, 01),
            name: 'Item 2',
            amount: 50,
            paidWith: 'cash',
            account_id: 1
        },
        {
            id: 3,
            date: new Date(2012, 03, 28),
            name: 'Item 3',
            amount: 100,
            paidWith: 'bank transfer',
            account_id: 1
        }
    ]; 
```

和模板：

```
<script type="text/x-handlebars" id="account/index">
<h2>Transactions</h2>
<table>
    <thead>
        <tr>
           <th>Date</th>
           <th>Item</th>
           <th>Amount</th>
       </tr>
    </thead>
    <tbody>
    {{#each model}}
        {{#each transaction in transactions}}
          <tr>
              <td>{{date transaction.date}}</td>
              <td>{{#linkTo 'transaction' this}}{{transaction.name}}{{/linkTo}}</td>
              <td>&pound;{{transaction.amount}}</td>
          </tr>
        {{/each}}
    {{/each}}
    </tbody>
</table>
</script> 
```

有人可以提供帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T22:10:45.187

只需进行一些更改即可使用。

*   中的每个条目`App.Transaction.FIXTURES`都应指定一个`account`属性而不是`account_id`
*   除非您在其他地方定义了一些`{{date}}`助手，`{{date transaction.date}}`否则将无法正常工作。替换为刚刚`{{transaction.date}}`
*   而不是`{{#linkTo 'transaction' this}}`应该是`{{#linkTo 'transaction' transaction}}`- 因为`this`是对`account.index controller`

在此处发布代码的工作副本：http: [//jsfiddle.net/mgrassotti/bfwhu/2/](http://jsfiddle.net/mgrassotti/bfwhu/2/)

```
<script type="text/x-handlebars" id="account/index">
<h2>Transactions</h2>
<table>
    <thead>
        <tr>
           <th>Date</th>
           <th>Item</th>
           <th>Amount</th>
       </tr>
    </thead>
    <tbody>
    {{#each model}}
        {{#each transaction in transactions}}
          <tr>
              <td>{{transaction.date}}</td>
              <td>{{#linkTo 'transaction' transaction}}{{transaction.name}}{{/linkTo}}</td>
              <td>&pound;{{transaction.amount}}</td>
          </tr>
        {{/each}}
    {{/each}}
    </tbody>
</table>
</script>

App = Ember.Application.create({});

App.Router.map(function() {
        this.resource('account', function() {
            this.resource('transaction', {
                path: '/transaction/:transaction_id'
            });
        });
    });

App.IndexRoute = Ember.Route.extend({
  redirect: function() {
    this.transitionTo('account');
  }
});
    App.AccountIndexRoute = Ember.Route.extend({

        model: function() {
            return App.Account.find();
        }
    });

    App.TransactionRoute = Ember.Route.extend({

        model: function() {
            return App.Transaction.find();
        }
    });

    App.Store = DS.Store.extend({
        revision: 12,
        adapter: 'DS.FixtureAdapter'
    });

    App.Account = DS.Model.extend({
        title: DS.attr('string'),
        transactions: DS.hasMany('App.Transaction')
    });

    App.Account.FIXTURES = [
        {
            id: 1,
            title: 'Your account',
            transactions: [1, 2, 3]
        }];

   App.Transaction = DS.Model.extend({
        date: DS.attr('date'),
        name: DS.attr('string'),
        amount: DS.attr('number'),
        paidWith: DS.attr('string'),
        account: DS.belongsTo('App.Account')
    });

    App.Transaction.FIXTURES = [
        {
            id: 1,
            date: new Date(2012, 04, 17),
            name: 'Item 1',
            amount: 10,
            paidWith: 'credit card',
            account: 1
        },
        {
            id: 2,
            date: new Date(2012, 04, 01),
            name: 'Item 2',
            amount: 50,
            paidWith: 'cash',
            account: 1
        },
        {
            id: 3,
            date: new Date(2012, 03, 28),
            name: 'Item 3',
            amount: 100,
            paidWith: 'bank transfer',
            account: 1
        }
    ]; 
```

# php - 使用代理跨域发布

> ID：16024999
> 
> 赞同：1
> 
> 时间：2013-04-15T21:27:49.880
> 
> 标签：php, jquery, curl, proxy, cross-domain

这当然有效，但是当我添加参数时它不会

```
<?php
    //set POST variables
    $url = $_POST['url'];
    unset($_POST['url']);
    $fields_string = "";
    //url-ify the data for the POST
    foreach($_POST as $key=>$value) {
            $fields_string .= $key.'='.$value.'&';
    }
    $fields_string = rtrim($fields_string,'&');
    //open connection
    $ch = curl_init();
    //set the url, number of POST vars, POST data
    curl_setopt($ch,CURLOPT_URL,$url);
    curl_setopt($ch,CURLOPT_POST, 1);
    curl_setopt($ch,CURLOPT_POSTFIELDS,$fields_string);
    //execute post
    $result = curl_exec($ch);
    //close connection
    curl_close($ch); 
```

当我尝试使用 jquery 进行 ajax 调用时，

```
 var data = "url=http://www.domain/ajax/set.php&id=1413&index=0&action=add";
        $.ajax({
            url: "proxy.php",
            data: data,
            type: "POST",
            success: function(data, textStatus, jqXHR) {
                console.log('Success ' + data);

            },
            error: function(jqXHR, textStatus, errorThrown) {
                console.log('Error ' + jqXHR);
            }
        }); 
```

那应该返回 null 或 "selected" 。. . `selected`如果第一次运行成功并尝试再次运行，但都返回 null，`success`当然不包括这个词。

我很确定参数是正确的，我用邮递员检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:33:25.190

```
set.php&id=1413
       ^ 
```

你的意思？

```
set.php?id=1413
       ^ 
```