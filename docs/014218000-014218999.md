# StackOverflow 问答 14218000-14218999

# algorithm - # 特征较大时改进的迭代缩放方法

> ID：14218004
> 
> 赞同：1
> 
> 时间：2013-01-08T15:10:07.037
> 
> 标签：algorithm, machine-learning

在对数线性模型中，我们可以使用 IIS 找到最大熵解。我们通过找到一个参数来更新参数，该参数使模型对特征的期望和经验期望匹配。但是，等式中有一个 exp（所有特征的总和）。我的问题是，当特征的数量很大（比如 10000）时，所有特征的总和会很容易爆炸。我们如何用数值方法解决这个问题？对我来说这似乎是不可能的，因为即使计算 exp(50) 也会失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T15:33:14.057

在对数空间中进行计算，并使用一个`logsumexp`操作（借用自[scikit-learn](https://github.com/scikit-learn/scikit-learn/blob/master/sklearn/utils/extmath.py#L223)）：

```
// Pseudocode for 1-d version of logsumexp:
// computes log(sum(exp(x) for x in a)) in a numerically stable way.
def logsumexp(a : array of float):
    amax = maximum(a)
    sum = 0.
    for x in a:
        sum += exp(x - amax)
    return log(sum) + amax 
```

这个求和可以在主循环开始之前完成一次，因为在优化时特征值不会改变。

旁注：IIS 相当老式。[大约 10 年来](http://acl.ldc.upenn.edu/W/W02/W02-2018.pdf)，几乎每个人都在使用 L-BFGS-B、OWL-QN 或 (A)SGD 来拟合对数线性模型。

# c++ - 循环创建对象

> ID：14218005
> 
> 赞同：1
> 
> 时间：2013-01-08T15:10:11.377
> 
> 标签：c++, pointers, for-loop

这是一个创建`Clustering`对象并按值返回的方法。

```
Clustering ClusteringGenerator::makeOneClustering(Graph& G) {
    int64_t n = G.numberOfNodes();
    Clustering zeta(n);
    cluster one = zeta.addCluster();
    for (node v = G.firstNode(); v <= n; ++v) {
        zeta.addToCluster(one, v);
    }
    return zeta;
} 
```

此循环多次调用该方法并将指向返回值的指针添加到向量中。

```
 int z = 3
    for (int i = 0; i < z; ++i) {
        // FIXME: why is zeta the same each iteration?
        Clustering zeta = clusterGen.makeOneClustering(G);
        DEBUG(&zeta);
        clusterings.push_back(&zeta);
    } 
```

DEBUG 语句的输出是

```
0x7fff4ff894d0
0x7fff4ff894d0
0x7fff4ff894d0 
```

所以这意味着`&zeta`在每次迭代中都是相同的指针。为什么？如何获得所需的结果（`Clustering`每次迭代创建一个对象并将其记住在向量中）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T15:15:26.833

因为`zeta`是一个自动变量（循环中的那个，另一个也是局部变量，但本质上并没有错`ClusteringGenerator::makeOneClustering`），一旦当前循环迭代结束，它就不再存在（并且`zeta`' 的析构函数已经称为）。因此，编译器可以自由地将其底层存储重新用于更多变量（例如`zeta`来自下一个循环迭代的变量），并且不这样做是非常愚蠢的。

同样，您的代码也容易出错，因为它将局部变量的地址存储在容器中，尽管该变量在 之后不再存在，`push_back`如上所述。

为了解决这个问题，要么只使用 a`std::vector<Clustering>`并将这些东西按值放入，或者，如果你真的需要存储指针（可能是因为你不使用/从 C++11 的移动语义中获利，并且担心复制开销） ，然后动态分配这些循环对象，以防止它们被自动销毁。但是在后一种情况下（无论如何，您应该彻底过度考虑其用法，因为`Clustering`似乎可以很好地复制）您应该使用某种智能指针来处理动态分配的对象的正确销毁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T15:25:25.183

你可以定义

```
std::vector<Clustering> clusterings; 
```

然后使用

```
clusterings.push_back(clusterGen.makeOneClustering(G)); 
```

如果您使用的是 c++11 并且集群是可移动的，您甚至不会生成副本。此解决方案更快，您不必处理原始指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T15:22:28.697

那是因为你打印出你创建的变量的地址，而且它总是一样的。向量也是如此。您存储的是地址而不是实际值。如果要存储该值，请尝试使用它。

```
clustering.push_back(zeta); 
```

现在您存储的是值而不是地址....

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-08T15:21:06.563

```
Clustering * ClusteringGenerator::makeOneClustering(Graph& G) {
    int64_t n = G.numberOfNodes();
    Clustering * zeta = new Clustering(n);
    cluster one = zeta.addCluster();
    for (node v = G.firstNode(); v <= n; ++v) {
        zeta.addToCluster(one, v);
    }
    return zeta;
} 
```

此循环多次调用该方法并将指向返回值的指针添加到向量中。

```
int z = 3
for (int i = 0; i < z; ++i) {
    // FIXME: why is zeta the same each iteration?
    Clustering * zeta = clusterGen.makeOneClustering(G);
    DEBUG(zeta);
    clusterings.push_back(zeta);
} 
```

# cocos2d-iphone - 'class' 没有可见的@interface 声明选择器'selector'

> ID：14218011
> 
> 赞同：2
> 
> 时间：2013-01-08T15:10:30.750
> 
> 标签：cocos2d-iphone

我正在关注“Learn Cocos2D”，在第 4 章中我遇到了以下指令：

在 GameLayer 的 init 方法中，在 scheduleUpdate 之后添加对接下来讨论的 initSpiders 方法的调用：

```
-(id) init {
if ((self=[super init])) {
...
       [self scheduleUpdate];
       [self initSpiders];
   }
   return self;
} 
```

我收到 ARC 错误消息：“GameLayer”没有可见的@interface 声明选择器“initSpiders”

我在该行收到相同的消息：self resetSpiders

我错过了什么？到那时，一切都构建并运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:16:15.477

This issue derives from the fact that the `initSpiders` and `resetSpiders` are not declared in your class interface and are defined in the `.m` file after the point where they are used.

If they are not missing altogether, you can fix this in either of 2 ways:

1.  move the definition of the `initSpiders` and `resetSpiders` methods above your `init` method and the errors will disappear;

2.  add a declaration for both methods in the `@interface` of the class.

(If you do both, it will also work)

Check your code to see if the implementation for those methods is available.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T15:31:06.707

您的错误似乎是您也没有遵循本书的下一部分。完成下一部分应该允许您编译代码而不会出现这样的警告。

本书该部分的更完整摘录是：

> 然后在 GameScene`init`方法中添加对`initSpiders`接下来讨论的方法的调用，就在后面`scheduleUpdate:`

```
-(id) init  { 
    if ((self = [super init])) 
    { 
        … 96  CHAPTER 4:  Your First Game 
        [self scheduleUpdate]; 
        [self initSpiders]; 
    } 
    return self;  
} 
```

> 之后，将相当多的代码添加到`GameScene`类中，从 `initSpiders`清单 4-8 中的方法开始，它正在创建蜘蛛精灵。
> 
> **清单 4-8。** *为了更容易访问，蜘蛛精灵被初始化并添加到 CCArray*

```
-(void) initSpiders 
{ 
    CGSize screenSize = [[CCDirector sharedDirector] winSize]; 
    // using a temporary spider sprite is the easiest way to get the image's size 
    CCSprite* tempSpider = [CCSprite spriteWithFile:@"spider.png"]; 
    float imageWidth = [tempSpider texture].contentSize.width; 
    // Use as many spiders as can fit next to each other over the whole screen width. 
    int numSpiders = screenSize.width / imageWidth; 
    // Initialize the spiders array using alloc. 
    spiders = [[CCArray alloc] initWithCapacity:numSpiders]; 
    for (int i = 0; i < numSpiders; i++) 
    { 
        CCSprite* spider = [CCSprite spriteWithFile:@"spider.png"]; 
        [self addChild:spider z:0 tag:2]; 

        // Also add the spider to the spiders array. 
        [spiders addObject:spider]; 
    } 
    // call the method to reposition all spiders 
    [self resetSpiders]; 
} 
```

# javascript - jquery.scrollTo.js 在 5 个 div 之后没有水平滑动

> ID：14218015
> 
> 赞同：1
> 
> 时间：2013-01-08T15:10:41.060
> 
> 标签：javascript, html, scroll, horizontal-scrolling

我有一点问题。如果有超过 5 个 div，我有一个不会水平滚动的水平滚动条。我已经在这个网站上找到了另一个帖子，但它似乎不适用于这个。有人能帮我吗？

所以问题是在第 5 次 DIV 之后，它们是垂直的，并且应该是水平的！

**javascript文件是：**

jquery.scrollTo.js

jquery-1.3.1.min.js（如果需要我可以上传它们）

**以及上一篇文章的网址：**

[jquery.scrollTo.js 滑动不超过 5 个 div](https://stackoverflow.com/questions/10498154/jquery-scrollto-js-is-not-sliding-more-then-5-divs)

**jsFiddle 站点（没有 jquery 文件！）**

[http://jsfiddle.net/wuZYA/](http://jsfiddle.net/wuZYA/)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" 
    "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Scroll Horizontally</title>

<script type="text/javascript" src="js/jquery-1.3.1.min.js"></script>
<script type="text/javascript" src="js/jquery.scrollTo.js"></script>

<script>

$(document).ready(function() {

    $('a.panel').click(function () {

        $('a.panel').removeClass('selected');
        $(this).addClass('selected');

        current = $(this);

        $('#wrapper').scrollTo($(this).attr('href'), 800);      

        return false;
    });

    $(window).resize(function () {
        resizePanel();
    });

});

function resizePanel() {

    width = $(window).width();
    height = $(window).height();

    mask_width = width * $('.item').length;

    $('#debug').html(width  + ' ' + height + ' ' + mask_width);

    $('#wrapper, .item').css({width: width, height: height});
    $('#mask').css({width: mask_width, height: height});
    $('#wrapper').scrollTo($('a.selected').attr('href'), 0);

}

</script>

<style>

body {
    height:100%;
    width:100%;
    margin:0;padding:0;
    overflow:hidden;
}

#wrapper {
    width:100%;
    height:100%;
    position:absolute;
    top:0;left:0;
    background-color:#ccc;
    overflow:hidden;
}

    #mask {
        width:500%;
        height:100%;
        background-color:#eee;
    }

    .item {
        width:20%;
        height:100%;
        float:left;
        background-color:#ddd;
    }

    .content {
        width:400px;
        height:300px;
        top:20%;
        margin:0 auto;
        background-color:#aaa;
        position:relative;
    }

    .selected {
        background:#fff;
        font-weight:700;
    }

    .clear {
        clear:both;
    }

</style>
</head>
<body>

<div id="wrapper">
    <div id="mask">

        <div id="item1" class="item">

            <a name="item1"></a>
            <div class="content">item1 
                <a href="#item1" class="panel">1</a> | 
                <a href="#item2" class="panel">2</a> | 
                <a href="#item3" class="panel">3</a> | 
                <a href="#item4" class="panel">4</a> | 
                <a href="#item5" class="panel">5</a> |
                <a href="#item6" class="panel">6</a>
            </div>
        </div>

        <div id="item2" class="item">
            <a name="item2"></a>
            <div class="content">item2 <a href="#item1" class="panel">back</a></div>
        </div>

        <div id="item3" class="item">
            <a name="item3"></a>
            <div class="content">item3 <a href="#item1" class="panel">back</a></div>
        </div>

        <div id="item4" class="item">
            <a name="item4"></a>
            <div class="content">item4 <a href="#item1" class="panel">back</a></div>
        </div>

        <div id="item5" class="item">
            <a name="item5"></a>
            <div class="content">item5 <a href="#item1" class="panel">back</a></div>
        </div>

        <div id="item6" class="item">
            <a name="item6"></a>
            <div class="content">item5 <a href="#item1" class="panel">back</a></div>
        </div>

    </div>
</div>

</body>
</html> 
```

# d3.js - .each() 带过滤器

> ID：14218016
> 
> 赞同：3
> 
> 时间：2013-01-08T15:10:42.323
> 
> 标签：d3.js, typeerror

我正在查看另一个stackoverflow问题，并尝试了以下方法：

```
d3.selectAll(links.filter(function(db) {
  return db.source.id == 'foo'
})).each(function(p) {
      console.log (p.source.id)
    }) 
```

并发现它返回了一个

> TypeError：无法读取未定义的属性“源”

即使过滤后的选择作为具有 .source.id 值的适当对象数组返回（此示例使用 D3 的力导向网络中的标准链接符号）。

我只是好奇为什么这行不通。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T15:33:12.447

确保您清楚您正在使用以下两种方法中的哪一种：

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter) https://github.com/mbostock/d3/wiki/Selections#wiki-filter

d3.selectAll 函数接受选择器字符串或 DOM 节点数组。你的情况是哪一个？

[https://github.com/mbostock/d3/wiki/Selections#wiki-d3_selectAll](https://github.com/mbostock/d3/wiki/Selections#wiki-d3_selectAll)

请记住， selection.each() 回调函数中的变量 p 对应于绑定到选择中的元素的数据。

[https://github.com/mbostock/d3/wiki/Selections#wiki-each](https://github.com/mbostock/d3/wiki/Selections#wiki-each)

* * *

更新

您的 links 变量似乎是一组常规 JavaScript 对象。这是不正确的，因为该`d3.selectAll`函数需要一个 DOM 节点数组（或选择器字符串）。有趣的是，如果您使用常规数组作为参数，它不会抱怨；例如，您仍然可以调用该`selection.each`方法：

> selection.each(函数)
> 
> 为当前选择中的每个元素调用指定的函数，传入当前数据 d 和索引 i，以及当前 DOM 元素的 this 上下文。几乎所有其他运算符都在内部使用此运算符，并可用于为每个选定元素调用任意代码。通过在回调函数中使用 d3.select(this)，可以使用 each 运算符递归处理选择。

但是，因为选择不是真正选择绑定了数据的 DOM 节点，所以您会看到函数中的第一个参数（通常为 d，在您的情况下为 p）将是未定义的。

第二个参数，索引 i，仍将对应于我们正在迭代的原始数组的索引。这就是为什么`d3.selectAll(links).each(function(p, i) { console.log(links[i].source.id); })`为你工作的原因。它基本上与这个（非 d3）JavaScript 表达式相同：`links.forEach(function(v, i) { console.log(links[i].source.id); })`

您正在查看的另一个简化示例：

```
// anti-pattern:
var arr = ['a', 'b', 'c'];
d3.selectAll(arr)
    .each(function(d, i) {
      console.log(d, i, arr[i]);
    }); 
```

哪个记录到控制台：

```
undefined 0 "a"
undefined 1 "b"
undefined 2 "c" 
```

因此，相反，如果您尝试检查强制导向布局中的链接，您可以选择代表这些链接的 DOM 节点。以 D3 库中包含的标准力示例为例：http: [//d3-example.herokuapp.com/examples/force/force.htm](http://d3-example.herokuapp.com/examples/force/force.htm)并从控制台运行以下命令：

```
d3.selectAll('line')
    .each(function(d, i) {
      console.log(d.source.index);
    }); 
```

# php - 有没有办法使用 cmyk 配色方案将图像保存为 pdf？

> ID：14218019
> 
> 赞同：1
> 
> 时间：2013-01-08T15:10:57.753
> 
> 标签：php

我必须保存一个文件才能进入打印机，理想情况下它是带有 cmyk 的 pdf。有没有办法做到这一点？现在我有一个图像文件，但现在必须手动保存...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:25:50.283

ImageMagick 可以将图像格式转换为 PDF，PHP 有一个文档齐全的插件可以使用它。至于 ImageMagick 本身是否可以生成 CMYK PDF 文件，我不确定，因为这不是我必须自己做的事情，但这至少应该让你朝着正确的方向前进。

# android - 剑道 UI 移动按钮

> ID：14218021
> 
> 赞同：0
> 
> 时间：2013-01-08T15:11:04.187
> 
> 标签：android, listview, button, kendo-ui, listviewitem

我正在尝试在我的移动应用程序上使用 kendo ui 移动框架。我必须在列表视图中动态创建按钮，并且还必须在单击功能上创建按钮。

如果我在 html 正文中编写，一切正常，并且按钮在单击功能时表现正常。

```
<ul data-role="listview" data-style="inset" id="genericListView">
   <li>
        <input type="text">sample
             <a data-align="right" data-role="button" data-click="browse" id="browse"></a>
        </input>
   </li>
</ul> 
```

但如果我写如下：

```
$('#genericListView').append('<li id="' + result[i].ListItemID + '"><input name="' + result[i].ListItemElementText + '"type="' + result[i].ListItemElementType + 
                        '" id="' + result[i].ListItemElementID + '">' + result[i].ListItemElementText + '<a data-align="left" data-role="button" id="' + result[i].ListItemElementBrowsableID + 
                        '" data-click="' + funcName + '"></a></input></li>'); 
```

按钮看起来像屏幕上的标签，当然点击功能不起作用。

我也尝试添加按钮

1.输入和按钮标签（不工作）

1.  使用 document.createElement 创建按钮并尝试设置属性（不工作）

2.  $('ul').listview('刷新'); （附加后，不工作）

3.  .trigger('创建'); （附加后，不工作）

    我认为这是 android css （在 kendoui 移动框架中）的错误，因为它在 iOS 设备上正常工作。任何想法如何解决这个问题？还是我想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:31:46.763

固定的：

```
$('#' + result[i].ListItemElementBrowsableID).kendoMobileButton({ 
                                click: function (event) {
                                    alert('foo');
                                }
                            }); 
```

如果您使用 kendoMobileButton 选项，则锚按钮看起来像一个按钮，并且在用户按下按钮时可以表现，[这](https://stackoverflow.com/questions/11852980/kendo-ui-mobile-trouble-calling-function-on-button-click?rq=1)是相同的解决方案。

# oracle - SQL Developer 调试所有对包的调用

> ID：14218027
> 
> 赞同：3
> 
> 时间：2013-01-08T15:11:13.307
> 
> 标签：oracle, debugging, plsql, oracle-sqldeveloper

我的 Oracle 数据库上有一个包，我已经为调试编译它并在其中设置断点。从 SQL Developer 中，我可以按 ctrl+shift+F10 来运行调试并选择我要运行的过程。这一切都很好。

是否可以捕获运行此包并达到我的断点的任何实例？例如，如果我们的 C# 应用程序中的用户单击一个按钮，它会调用此包中的一个过程。我希望 SQL Developer 打破该过程，让我使用应用程序提供的参数逐步完成包。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T15:26:28.063

根据[SQL Developer Documentation](http://www.oracle.com/technetwork/issue-archive/2007/07-nov/o67sql-101793.html)，您应该能够使用远程调试来调试单个会话，但是您必须更改您的客户端应用程序，以便它调用 PL/SQL 过程来预先初始化调试。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-08T15:56:35.507

怎么办？？？

与其寻找如何捕获运行此过程的实例，不如关注如何通过将异常块添加到包中的过程来捕获过程引发的错误。

例如添加

```
...
exception
  when others then
   insert into error_table(userid, error) values 
   (SYS_CONTEXT  ('USERENV', 'TERMINAL') ,
    SQLCODE ||' ' || SQLERRM );
   commit; 
```

因此，如果发生任何错误，它将插入异常，并将在 error_table 中插入一条记录。

问候

# sql - 根据周从数据库中获取值

> ID：14218039
> 
> 赞同：0
> 
> 时间：2013-01-08T15:11:43.900
> 
> 标签：sql, ms-access

我有一个数据库，其中包含一个包含多个字段的表，其中一个字段作为 DateTime 字段。现在我想做的是根据一周选择从数据库中获取一些行，所以我想根据用户从下拉列表中选择的一周来选择它们。（第 1 周、第 2 周...）这些记录稍后将显示在图表中。数据库中的日期在access数据库中显示如下（exp:07-JAN-13）。那么有人知道sql查询应该是什么样的吗？以及如何按周进行这种选择？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:14:45.753

您可以将日期格式化为周数：

```
 Format(Date(),"ww") 
```

这意味着您可以查询该格式。

```
 SELECT ADateTime FROM ATable
 WHERE Format(ADateTime,"ww")=2 
```

参考： http: [//office.microsoft.com/en-ie/access-help/format-property-date-time-data-type-HA001232739.aspx](http://office.microsoft.com/en-ie/access-help/format-property-date-time-data-type-HA001232739.aspx)

# c++ - 为地图赋值的最有效方法

> ID：14218042
> 
> 赞同：15
> 
> 时间：2013-01-08T15:11:50.910
> 
> 标签：c++, dictionary, std, stdmap, c++-standard-library

哪种给地图赋值的方法最有效？还是它们都针对相同的代码进行了优化（在大多数现代编译器上）？

```
 // 1) Assignment using array index notation
   Foo["Bar"] = 12345;

   // 2) Assignment using member function insert() and STL pair
   Foo.insert(std::pair<string,int>("Bar", 12345));

   // 3) Assignment using member function insert() and "value_type()"
   Foo.insert(map<string,int>::value_type("Bar", 12345));

   // 4) Assignment using member function insert() and "make_pair()"
   Foo.insert(std::make_pair("Bar", 12345)); 
```

（我知道我可以对编译器输出进行基准测试和检查，但是现在出现了这个问题，我手边唯一的东西就是我的手机......呵呵）

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-08T15:20:53.743

`[]`首先，和之间存在语义差异`insert`：

*   `[]`将**替换**旧值（如果有）
*   `insert`将**忽略**新值（如果旧值已经存在）

因此，将两者进行比较通常是没有用的。

关于插入版本：

*   `std::map<std::string, int>::value_type` **3和4之间** `std::pair<std::string const, int>`没有（重要的）区别
*   `std::make_pair("Bar", 12345)`比`std::pair<std::string, int>("Bar", 12345)`因为该`std::string`类型是一个完整的类，具有要在复制上执行的操作并且`"Bar"`只是一个字符串文字（因此只是一个指针副本）而便宜；但是，由于最后您确实需要创建`std::string`... 这将取决于您的编译器的质量

一般来说，我会推荐：

*   `[]`用于更新
*   `insert(std::make_pair())`用于忽略重复

`std::make_pair`不仅更短，而且还尊重 DRY 准则：不要重复自己。

* * *

不过，为了完整起见，最快（也是最简单的）将是[`emplace`](http://en.cppreference.com/w/cpp/container/map/emplace)（启用 C++11）：

```
map.emplace("Bar", 12345); 
```

它的行为是 的`insert`，但它就地构造新元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T15:21:08.657

1) 可能比其他方法稍慢，因为`std::map::operator[]`首先默认创建对象，如果它不存在，然后返回一个引用，您可以使用`operator=`它来设置所需的值，即两个操作。

2-4) 应该是等价的，因为`map::value_type`它是相同类型的 typedef `std::pair`，因此`make_pair`也是等价的。编译器应该同样对待这些。

另请注意，如果您需要检查是否存在（例如，根据它是否存在执行特殊逻辑）然后还插入它，则可以进一步提高性能，方法`map::lower_bound`是首先获得元素应该在哪里的提示，所以`map::insert`不必`map`再次搜索整个：

```
 // get the iterator to where the key *should* be if it existed:
 std::map::iterator hint = mymap.lower_bound(key);

 if (hint == mymap.end() || mymap.key_comp()(key, hint->first)) {
     // key didn't exist in map
     // special logic A here...

     // insert at the correct location
     mymap.insert(hint, make_pair(key, new_value));
 } else { 
     // key exists in map already
     // special logic B here...

     // just update value
     hint->second = new_value;
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T15:24:54.047

您的第一种可能性：`Foo["Bar"] = 12345;`与其他人的语义有些不同——如果不存在（与其他人一样），它将插入一个新对象，但如果不存在则*覆盖*当前内容（`insert`如果该密钥已经存在，其他人使用将失败） .

就速度而言，它有可能比其他速度慢。当您插入一个新对象时，它会创建一个具有指定键和默认构造的 value_type 的对，然后分配正确的 value_type。其他人都构造了正确的键和值对并插入该对象。然而，公平地说，我的经验是差异很少显着（对于较旧的编译器，它更重要，但对于较新的编译器则非常小）。

接下来的两个是等价的。您只是使用两种不同的方式来命名同一类型。在运行时，它们之间根本没有区别。

第四个使用模板函数（make_pair），理论上*可能*涉及额外级别的函数调用。不过，如果您仔细确保编译器完全*没有*进行任何优化（尤其是内联）（可能），我会很惊讶地看到与此有真正的区别。

底线：第一个通常会比其他的慢一点（但并非总是如此，也不会慢很多）。其他三个几乎总是相等的（例如：通常期望任何合理的编译器为所有三个生成相同的代码），即使第四个速度较慢有理论上的理由。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T15:47:10.097

尽管已经有几个很好的答案，但我认为我不妨做一个快速基准测试。每个运行 500 万次，并使用 c++11 的 chrono 来测量它所花费的时间。

继承人的代码：

```
#include <string>
#include <map>
#include <chrono>
#include <cstdio>

// 5 million
#define times 5000000

int main()
{
    std::map<std::string, int> foo1, foo2, foo3, foo4, foo5;
    std::chrono::steady_clock::time_point timeStart, timeEnd;
    int x = 0;

    // 1) Assignment using array index notation
    timeStart = std::chrono::steady_clock::now();
    for (x = 0; x <= times; x++)
    {
        foo1[std::to_string(x)] = 12345;
    }
    timeEnd = std::chrono::steady_clock::now();
    printf("1) took %i milliseconds\n", (unsigned long long)std::chrono::duration_cast<std::chrono::milliseconds>(timeEnd-timeStart).count());

    // 2) Assignment using member function insert() and STL pair
    timeStart = std::chrono::steady_clock::now();
    for (x = 0; x <= times; x++)
    {
        foo2.insert(std::pair<std::string, int>(std::to_string(x), 12345));
    }
    timeEnd = std::chrono::steady_clock::now();
    printf("2) took %i milliseconds\n", (unsigned long long)std::chrono::duration_cast<std::chrono::milliseconds>(timeEnd-timeStart).count());

    // 3) Assignment using member function insert() and "value_type()"
    timeStart = std::chrono::steady_clock::now();
    for (x = 0; x <= times; x++)
    {
        foo3.insert(std::map<std::string, int>::value_type(std::to_string(x), 12345));
    }
    timeEnd = std::chrono::steady_clock::now();
    printf("3) took %i milliseconds\n", (unsigned long long)std::chrono::duration_cast<std::chrono::milliseconds>(timeEnd-timeStart).count());

    // 4) Assignment using member function insert() and "make_pair()"
    timeStart = std::chrono::steady_clock::now();
    for (x = 0; x <= times; x++)
    {
        foo4.insert(std::make_pair(std::to_string(x), 12345));
    }
    timeEnd = std::chrono::steady_clock::now();
    printf("4) took %i milliseconds\n", (unsigned long long)std::chrono::duration_cast<std::chrono::milliseconds>(timeEnd-timeStart).count());

    // 5) Matthieu M.'s suggestion of C++11's emplace
    timeStart = std::chrono::steady_clock::now();
    for (x = 0; x <= times; x++)
    {
        foo5.emplace(std::to_string(x), 12345);
    }
    timeEnd = std::chrono::steady_clock::now();
    printf("5) took %i milliseconds\n", (unsigned long long)std::chrono::duration_cast<std::chrono::milliseconds>(timeEnd-timeStart).count());

    return 0;
} 
```

500 万次迭代的输出为：

```
1) took 23448 milliseconds
2) took 22854 milliseconds
3) took 22372 milliseconds
4) took 22988 milliseconds
5) took 21356 milliseconds 
```

海合会版本：

```
g++ (Built by MinGW-builds project) 4.8.0 20121225 (experimental) 
```

我的机器：

```
Intel i5-3570k overclocked at 4.6 GHz 
```

**EDIT1：修复了代码并重新进行了基准测试。**

**EDIT2：添加了 Matthieu M. 对 C++11 的 emplace 的建议，他是对的，emplace 是最快的**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T15:21:04.653

第三个是最佳选择（恕我直言），但 2、3 和 4 是相等的。

```
// 3) Assignment using member function insert() and "value_type()"
Foo.insert(map<string,int>::value_type("Bar", 12345)); 
```

为什么我认为第三个是最佳选择：您*只执行一个*操作来插入值：只需插入（好吧，也有搜索），您可以知道值是否被插入，检查`second`返回值的成员并且实现授权不覆盖该值。

的使用`value_type`也有好处：您不需要知道映射类型或键类型，因此对模板编程很有用。

最糟糕的（恕我直言）是第一个：

```
// 1) Assignment using array index notation
Foo["Bar"] = 12345; 
```

您正在调用`std::map::operator[]`wich 创建一个对象并返回对它的引用，然后`operator =`调用映射的对象。您正在为插入执行两项操作：首先是插入，其次是分配。

它还有另一个问题：你不知道值是被插入还是被覆盖。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-08T15:27:24.157

如果该关键位置没有对象，则：

[`std::map::emplace`](http://en.cppreference.com/w/cpp/container/map/emplace)是最有效的。 `insert`是第二个（但会非常接近）。 `[]`效率最低。

`[]`，如果那里没有对象，平凡的构造一。然后它调用`operator=`.

`insert`对`std::pair`参数进行复制构造函数调用。

但是，在地图的情况下，`map.insert( make_pair( std::move(key), std::move(value) ) )`将接近`map.emplace( std::move(key), std::move(value) )`.

如果关键位置有对象，则`[]`调用`operator=`，而`insert`/`emplace`将销毁旧对象并创建一个新对象。 `[]`在这种情况下很容易便宜。

最后，这取决于`operator=`您的密钥和价值与复制构造、微不足道的构造与析构函数的成本是多少。

在树形结构中查找事物的实际工作`std::map`将非常接近相同，这并不好笑。

# java - 地图数据 java OSM

> ID：14218046
> 
> 赞同：-1
> 
> 时间：2013-01-08T15:11:56.207
> 
> 标签：java, google-maps, gis, openstreetmap

我是打开街道地图和 GIS 的新手。是否有可用于开放街道地图的 java API？据我所见，它们是针对编辑地图的，我只想检索数据并显示它。如果我理解正确，我应该：发送一个 http 请求接收 XML 解析这个 XMl（不知何故？）将它渲染为一个地图（任何图书馆推荐？）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T23:13:58.700

您是否可以简单地显示预渲染图块，或者您是否需要将数据处理成一些新的可视化格式？如果是前者，您可以[从 Tileserver](http://wiki.openstreetmap.org/wiki/Deploying_your_own_Slippy_Map#Sources_of_tiles)获取 PNG 。[如果是后者，是的，你会从Overpass](http://wiki.openstreetmap.org/wiki/Overpass_API)之类的东西中查询 XML 数据，然后由你来解析 XML 数据并用它做事。

我发现 XSLT 是一种很好的方式来指定如何将原始 XML 转换为更适合的形式（[这是我提供的一个简单的 OSM XSLT](https://github.com/danstowell/pubdensity/blob/master/osm_pub_csv.xslt)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-16T10:40:10.070

你试过 JOSM 吗？它是开源桌面应用程序，主要目的是编辑 OSM 数据，但我用它在我自己的 GUI 中显示地图。我已经对 JOSM ( [https://github.com/zmau/josm](https://github.com/zmau/josm) ) 做了一个分支，并且在那里我启用了禁用它自己的 GUI，并进行了一些其他调整。之后，我将他们的 MapView 控件放到了我的摇摆窗口上（在我的项目中，它引用了这个分叉的 JOSM 变体），并成功地在上面显示了一张地图。（如果您查看我的 fork 中的提交，您会发现比您需要的更改更多，因为我使用 josm 在某些非常特定的设备上显示地图，而您不需要。）

# android - Android 上的智能卡读卡器，通过 WiFi 或 USB

> ID：14218047
> 
> 赞同：0
> 
> 时间：2013-01-08T15:12:01.783
> 
> 标签：android, credit-card, smartcard

我已经在谷歌上搜索过，我可以找到旧信息（大部分），但没有解决方案。[可以通过 USB 与智能卡读卡器（如http://betteroffer.files.wordpress.com/2011/05/chip_pin_02.jpg](http://betteroffer.files.wordpress.com/2011/05/chip_pin_02.jpg)）和 Android 设备（三星 Galaxy SII）进行通信（如果读卡器有）和/或 Wifi + Manucture 的 SDK。

有人做过类似的整合吗？

任何想法将不胜感激。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:24:21.497

我想有线访问的机会很小：即使是大多数平板电脑也无法播放 USB 主机，而只能模拟 PC 的驱动器。第一个检查是，将 USB 记忆棒连接到智能手机并查看是否可以访问文件。智能手机-> 智能卡耦合的最简单（直接）方法是 NFC，但支持它的智能手机型号绝对是少数，如果您的卡仅基于联系人，那么您就不走运了。WiFi可以在中间智能单元上工作，但我不知道智能卡读卡器直接支持WiFi。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-29T06:39:08.880

好吧，也许你也可以看看 Syncotek 智能[卡读卡器](http://www.syncotek.com/product/card_reader_1.html)，比如 Syncotek SC-600P 型号，它是一款内置天线的 USB 智能卡读卡器，用于非接触式标签访问，读卡距离可达 50 mm（取决于标签类型），我认为这个可能支持 Android 设备。

# openssl - 如何使用受信任的中间 CA 证书验证客户端证书？

> ID：14218055
> 
> 赞同：5
> 
> 时间：2013-01-08T15:12:19.253
> 
> 标签：openssl, ssl-certificate, digital-certificate, client-certificates

我有由 CA1 证书签名的客户端证书“A”。CA1 证书由根证书签名。

现在我有了 CA1 证书（可信）并收到了客户端证书（不可信）。在验证期间，我只需要使用 CA1（受信任）验证客户端证书的信任路径。我没有 /receive 根证书。

是否可以进行此验证？

我正在使用 Openssl 1.0.0g 版本库。如果有人知道如何做到这一点，请与我分享。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T07:22:15.880

由于您已经给出了标签，因此`ssl-certificate`我假设您在 SSL 连接期间需要这样的验证来进行服务器证书验证或客户端证书验证。

实现此目的的一种简单方法是使用 OpenSSL API [SSL_CTX_set_verify](http://www.openssl.org/docs/ssl/SSL_CTX_set_verify.html#)设置验证回调。

要点是，每次在证书验证过程中遇到错误时都会调用此回调，因此在您的情况下，当找不到 root 时，将使用错误调用此回调`X509_V_ERR_UNABLE_TO_GET_ISSUER_CERT`。您还`X509_STORE_CTX *`可以从中获取到目前为止已验证的证书的详细信息。使用此机制，您可以在代码中实现适当的逻辑，以查看您的最终实体和中间 CA 证书是否正确，如果发现正确，您可以从回调中返回成功，这将向 OpenSSL 发出信号以继续进行验证没有失败的验证。

* * *

**来自 OpenSSL 文档的更多详细信息：**

verify_callback 函数用于控制设置 SSL_VERIFY_PEER 标志时的行为。它必须由应用程序提供并接收两个参数：preverify_ok 指示是否通过了相关证书的验证（preverify_ok=1）或未通过（preverify_ok=0）。x509_ctx 是指向用于证书链验证的完整上下文的指针。

从最深的嵌套级别（根 CA 证书）开始检查证书链，并向上工作到对等方的证书。在每个级别检查签名和颁发者属性。每当发现验证错误时，错误号都会存储在 x509_ctx 中，并在 preverify_ok=0 时调用 verify_callback。通过应用 X509_CTX_store_* 函数 verify_callback 可以找到有问题的证书并执行其他步骤（参见示例）。如果没有发现证书错误，则在进入下一个级别之前调用 verify_callback 并设置 preverify_ok=1。

verify_callback 的返回值控制着进一步验证过程的策略。如果 verify_callback 返回 0，则验证过程立即以“验证失败”状态停止。如果设置了 SSL_VERIFY_PEER，则会向对等方发送验证失败警报​​，并终止 TLS/SSL 握手。如果 verify_callback 返回 1，则继续验证过程。如果 verify_callback 始终返回 1，则 TLS/SSL 握手不会因验证失败而终止，并且将建立连接。然而，调用进程可以使用 SSL_get_verify_result(3) 或通过维护自己的由 verify_callback 管理的错误存储来检索最后一个验证错误的错误代码。

如果未指定 verify_callback，则将使用默认回调。它的返回值与 preverify_ok 相同，因此如果设置了 SSL_VERIFY_PEER，任何验证失败都将导致 TLS/SSL 握手终止并发出警报消息。

# xml - Looking for the right way to merge multiple xml files by transforming xml to xml using xslt

> ID：14218059
> 
> 赞同：1
> 
> 时间：2013-01-08T15:12:39.370
> 
> 标签：xml, xslt, xslt-1.0

I'm muddling my way through learning XSLT and have a challenge where I need ultimately to filter and sort over 100 products that I can only retrieve 20 at a time from a webservice. I have been able to pull those products successfully and manipulate them but only in their original batches, not as if they are one list. So I've tried to transform the separate files into one as follows.

Combining multiple files like this one:

A.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<productSearchResponse>
    <products>
        <product>
            <code>A1</code>
            <item> SAUVIGNON RESERVA</item>
            <country>Spain</country>
            <region>Penedes</region>
            <category>Red</category>
            <style>Full-bodied</style>
        </product>
        <product>
            <code>A2</code>
            <item>RESERVE RIESLING</item>
            <country>France</country>
            <region>Alsace</region>
            <category>White</category>
            <style>Aromatic</style>
        </product>
        <product>
            <code>A3</code>
            <item>GAMAY</item>
            <country>Canada</country>
            <region>Ontario</region>
            <category>Red</category>
            <style>Medium-bodied</style>
        </product>
    </products>
</productSearchResponse> 
```

... with this one:

B.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<productSearchResponse>
    <products>
        <product>
            <code>B1</code>
            <item>BOURGOGNE CHARDONNAY</item>
            <country>France</country>
            <region>Burgundy</region>
            <category>White</category>
            <style>Light</style>
        </product>
        <product>
            <code>B2</code>
            <item>ONTARIO RIESLING II</item>
            <country>Canada</country>
            <region>Ontario</region>
            <category>White</category>
            <style>Off-dry</style>
        </product>
        <product>
            <code>B3</code>
            <item>WEST COAST CAB SAUV</item>
            <country>USA</country>
            <region>California</region>
            <category>Red</category>
            <style>Full-bodied</style>
        </product>
    </products>
</productSearchResponse> 
```

...to get a new xml file that looks like this one: all.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<productSearchResponse>
    <products>
        <product>
            <code>A1</code>
            <item> SAUVIGNON RESERVA</item>
            <country>Spain</country>
            <region>Penedes</region>
            <category>Red</category>
            <style>Full-bodied</style>
        </product>
        <product>
            <code>A2</code>
            <item>RESERVE RIESLING</item>
            <country>France</country>
            <region>Alsace</region>
            <category>White</category>
            <style>Aromatic</style>
        </product>
        <product>
            <code>A3</code>
            <item>GAMAY</item>
            <country>Canada</country>
            <region>Ontario</region>
            <category>Red</category>
            <style>Medium-bodied</style>
        </product>
        <product>
            <code>B1</code>
            <item>BOURGOGNE CHARDONNAY</item>
            <country>France</country>
            <region>Burgundy</region>
            <category>White</category>
            <style>Light</style>
        </product>
        <product>
            <code>B2</code>
            <item>ONTARIO RIESLING II</item>
            <country>Canada</country>
            <region>Ontario</region>
            <category>White</category>
            <style>Off-dry</style>
        </product>
        <product>
            <code>B3</code>
            <item>WEST COAST CAB SAUV</item>
            <country>USA</country>
            <region>California</region>
            <category>Red</category>
            <style>Full-bodied</style>
        </product>
    </products>
</productSearchResponse> 
```

I have tried using this

ABC.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="ABC.xsl"?>
<essentials>
    <webservice filename="A.xml"/>
    <webservice filename="B.xml"/>
    <!-- etc -->
</essentials> 
```

with this

ABC.xsl

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" version="1.0"  indent="yes"/>
    <xsl:template match="/">
        <output>
            <xsl:for-each select="/essentials/webservice">
                <xsl:for-each select="document(@filename)/productSearchResponse/products/product">
                    <product>
                        <code>
                            <xsl:value-of select="code"/>
                        </code>
                        <item>
                            <xsl:value-of select="item"/>
                        </item> 
                        <country>
                            <xsl:value-of select="country"/>
                        </country>  
                        <region>
                            <xsl:value-of select="region"/>
                        </region>   
                        <category>
                            <xsl:value-of select="category"/>
                        </category>                 
                        <style>
                            <xsl:value-of select="style"/>
                        </style>
                    </product>              
                </xsl:for-each> 
            </xsl:for-each>
        </output>
    </xsl:template>
</xsl:stylesheet> 
```

.... but end up with this in the browser:

A1 SAUVIGNON RESERVASpainPenedesRedFull-bodiedA2RESERVE RIESLINGFranceAlsaceWhiteAromaticA3GAMAYCanadaOntarioRedMedium-bodiedB1BOURGOGNE CHARDONNAYFranceBurgundyWhiteLightB2ONTARIO RIESLING IICanadaOntarioWhiteOff-dryB3WEST COAST CAB SAUVUSACaliforniaRedFull-bodiedC1BURGUNDY PINOT NOIRFranceBurgundyRedMedium-bodiedC2CALIFORNIAN WHITEUSACaliforniaWhiteOff-dryC3CANADIAN REDCanadaOntarioRedFull-bodied

Firebug shows that behind the scenes the result is the desired xml. Where I'm getting stumped is: How can I get the result into a form that I can use, that I can treat as regular xml and do further transformations upon? And have I found the right approach or am I barking up the wrong tree, making this somehow too complicated?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:21:57.973

Well XML to XML transformation directly in the browser is usually not a good way to use that form of transformation, most browsers or at least Mozilla browsers assume your target format is something like XHTML or SVG the browser knows to render. In your case it is not, so all Firefox does is show the unstyled content of text nodes.

And of course your code can be simplified:

```
<xsl:template match="/">
  <productSearchResponse>
    <products>
      <xsl:copy-of select="document(essentials/webservice/@filename)//product"/>
    </products>
  </productSearchResponse>
</xsl:template> 
```

That will however not change the rendering in Firefox/Mozilla.

# php - 带有参数的paypal返回和IPN url

> ID：14218061
> 
> 赞同：0
> 
> 时间：2013-01-08T15:12:53.217
> 
> 标签：php, paypal

这是我提交的用于向贝宝定期付款的表格

```
 <form name='_xclick' id='_xclick' action='https://www.sandbox.paypal.com/cgi-bin/webscr' method='post'>
        <input type='hidden' name='cmd' value='_xclick-subscriptions'>
        <input type='hidden' name='business' value='sandboxusername@gmail.com'>
        <input type='hidden' name='currency_code' value='EUR'>
        <input type='hidden' name='no_shipping' value='1'>
        <input type='hidden' name='a3' value='5.00'>
        <input type='hidden' name='p3' value='1'>
        <input type='hidden' name='t3' value='M'>
        <input type='hidden' name='custom' value='customerId=F5C151'>
        <input type='hidden' name='src' value='1'>
        <input type='hidden' name='sra' value='1'>
        <input type='hidden' name='item_name' value='Lev haolam package'>
        <input type='hidden' name='cancel_return' value='mydomainsuccess?pplstatus=0&customerId=F5C151'>
        <input type='hidden' name='return' value='mydomainsuccess?pplstatus=1&customerId=F5C151'>
        <input type='hidden' name='notify_url' value='mydomainsuccess?pplstatus=1&customerId=F5C151'>
        </form> <form name='_xclick' id='_xclick' action='https://www.sandbox.paypal.com/cgi-bin/webscr' method='post'>
        </form> 
```

问题是当客户从贝宝回来时，他确实回到了成功页面，但我没有取回额外的参数......我得到的只是

```
?auth=AawipXhP8kGL5tRWEYuMZDowOdxbyXhwGGShlkbdAgL1wnIV5jMHw1QImcj0KmiFUyhrU6kw4mfc3fJPJ3leDZQ&form_charset=UTF-8 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T15:17:22.100

try the field rm (return method). 2 = post

```
<input type='hidden' name='rm' value='2'> 
```

Than you should get back the parameters as POST.

# c# - Google OAuth 登录在本地工作，在生产服务器上失败

> ID：14218062
> 
> 赞同：1
> 
> 时间：2013-01-08T15:12:56.143
> 
> 标签：c#, asp.net-mvc, oauth

我有一个正在开发的网站，我刚刚发布到 beta 版（目前与生产在同一台服务器上——这是一个个人项目）。用户可以选择使用 MVC 4 SimpleMembership 提供程序通过 OAuth 使用 Google、Facebook 或 Twitter 帐户登录。

当我从本地机器上的 ASP.NET 开发服务器操作它时，这一切都非常有效。但是，在 beta 站点上， OAuthWebSecurity.VerifyAuthentication().IsSuccessful 为 false（基本上意味着身份验证失败）。Twitter 和 Facebook 工作得很好。

没有代码改变，所以我想一定有一些特定于环境的东西。我检查了 OAuthWebSecurity.VerifyAuthentication() 的返回值，但我没有看到任何信息可以告诉我为什么它失败或如何修复它。

**关于问题可能是什么或如何从 Google 获取某种错误消息的任何想法？**我检查了 AuthenticationResult 对象，那里没有任何帮助。

**编辑：**我最初的问题也发布了所有相关代码，但我在 Visual Studio 中创建了一个新的全新 MVC 4 Internet 应用程序，取消注释 AuthConfig.cs 中的行以启用 Google 登录并将其推送到生产环境。同样的事情发生了，所以这不是我的代码的问题（因此我从问题中删除了它）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T08:15:01.770

因此，在为此我失去了大部分头发之后，我终于弄清楚我服务器上的系统时钟是在未来的一天设置的。将其设置回正确的时间可以解决问题。

# sql - SQL 查询语法错误中的 Google Analytics trackEvents

> ID：14218074
> 
> 赞同：1
> 
> 时间：2013-01-08T15:13:29.793
> 
> 标签：sql, character-encoding, special-characters, urlencode, varchar

使用 SQL 查询我正在尝试编写 trackEvents onclick 函数，但结果完全错误，我不知道如何转义查询中的特殊字符。

这就是我想要得到的：

```
<a href="http://domain.com/download.pdf" onclick="_gaq.push(['_trackEvent','Download', 'PDF', 'Test Tracking']);">Test tracking</a> 
```

使用此查询：

```
SELECT
'<a href="' + downloadurl + '" class="pdf" onclick="_gaq.push(["_trackEvent",
"Download", "PDF", "' + prd.title + '"]);">Download</a>' as targetWebsite

FROM product prd

WHERE
id = @dbid@
and downloadurl <> '' 
```

电流输出：

```
<a href="http://domain.com/download.pdf" class="pdf" onclick="_gaq.push([" _trackevent",="" "download",="" "pdf",="" "title"]);"="">Download</a> 
```

我想知道如何转义单引号，也许会找出为什么那里有 '=' 字符和额外的引号。我尝试了各种方法，包括一个 javascript 函数来使 sql 字符串不那么复杂，但它没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:31:24.650

如果您想出现单引号而不是双引号，则将单引号加倍，例如

```
DECLARE @downloadurl VARCHAR(50)
DECLARE @title VARCHAR(50)
SET @downloadurl = 'http://domain.com/download.pdf'
SET @title = 'Test Tracking'

SELECT
'<a href="' + @downloadurl + '" class="pdf" onclick="_gaq.push([''_trackEvent'',
''Download'', ''PDF'', ''' + @title+ ''']);">Download</a>' as targetWebsite 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/d41d8/7570)

# ant - Ant-Contrib 等于忽略大小写

> ID：14218076
> 
> 赞同：1
> 
> 时间：2013-01-08T15:13:33.693
> 
> 标签：ant, ant-contrib

有没有办法检查两个值是否相互相等而不管大小写？例如“myValue”等于“myvalue”不区分大小写。

```
<if>
    <equals arg1="myValue" arg2="myvalue" />
    <then>
        ...
    </then>
</if> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T17:55:11.633

ant-contrib 很烂。它通常会导致意大利面条式的代码非常难以阅读 - 并且需要人们添加 ant-contrib jars。
您通常最好让 ant 成为蚂蚁……它不是一种脚本语言，而是构建步骤的简单声明。如果你想变得花哨，你可以通过在 java 中编写你自己的任务来做到这一点，你将拥有一个 IDE、调试器和单元测试。

在 ant 中，您将使用`<condition>`任务执行此操作，特别`<equals>`是`casesensitive="false"`设置属性，然后根据该属性有条件地运行目标。例如，运行这个家伙`ant -Darg1="foo" -Darg2="foo"`

```
<?xml version="1.0" encoding="utf-8"?>
<project name="condition" default="condition-true" basedir=".">

<condition property="strings-match">
    <equals arg1="${arg1}" arg2="${arg2}" casesensitive="false"/>
</condition>

<target name="display-props">
    <echo>"arg1 = ${arg1}"</echo>
    <echo>"arg2 = ${arg2}"</echo>
    <echo>"strings-match = ${strings-match}"</echo>
</target>

<target name="condition-true" depends="display-props" if="${strings-match}">
    <echo>true</echo>
</target>
</project> 
```

我知道这不能回答你的问题，特别是关于 ant-contrib。我什至会进一步误入歧途，说我永远不会制作新的 ant 文件（更喜欢 gradle 或 maven）有趣的阅读：

*   [蚂蚁发明者的沉思](http://web.archive.org/web/20040602210721/x180.net/Articles/Java/AntAndXML.html)
*   [蚂蚁风格的元素](http://wiki.apache.org/ant/TheElementsOfAntStyle)（未维护）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-13T12:29:30.757

您可以`casesensitive="false"`像这样使用参数：

```
<if>
    <equals arg1="myValue" arg2="myvalue" casesensitive="false" />
    <then>
        ...
    </then>
</if> 
```

来源：[https ://ant.apache.org/manual/Tasks/conditions.html](https://ant.apache.org/manual/Tasks/conditions.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T21:11:21.220

我打赌你可以使用`<matches>`条件来做到这一点。条件可以将`<matches>`字符串与正则表达式进行比较，并且可以不区分大小写。只需使您匹配正则表达式的字符串。

就在我的脑海中：

```
<property name="arg1" value="MY_VALUE"/>
<property name="arg2" value="my_value"/>
<if>
    <matches
        string="${arg1}"
        pattern="^${arg2}$"
        casesensitive="false">
    <then>
          <echo>${arg1} and ${arg2} are the same, but may differ in case</echo>
    </then>
</if> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-08T18:34:32.897

我不认为你可以在`<if>`. 但是，您可以添加一个小的 javascript。

```
<script language="javascript"> 
  <![CDATA[
  // getting value for myValue
  myValue = test.getProperty("myValue");  
  // TODO add some check here to handle empty property value
  // convert to uppercase 
  valueUpper = myValue.toUpperCase();  
  // store the result in a new property 
  test.setProperty("myValue.upper",valueUpper); 
   ]]> 
</script>

<if>
    <equals arg1="${myValue.upper}" arg2="MYVALUE" />
    <then>
        ...
    </then>
</if> 
```

*注意*：`test`引用您的 ant 项目名称。

或者，您可以寻找另一个 ant-contrib 函数`propertyRegex`。由于我没有找到一个工作示例如何利用它将字符串转换为大写或小写，我认为 javascript 是更好的选择。

# php - 将变量放入函数中

> ID：14218079
> 
> 赞同：0
> 
> 时间：2013-01-08T15:13:49.240
> 
> 标签：php, function, variables

```
<?php
echo test(); 
$a = "123";

function test(){
global $b;
b =$a;
return $b;
}
?> 
```

我想从另一个表单中获取值，所以我设置了一个函数，但是为什么不能在 test() 中显示值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T15:15:25.663

因为`$a`超出范围，在函数调用之后声明并且您有语法错误。你需要`global $a`.

```
$a = "123";
echo test( ); 

function test( ) {
    global $a;
    $b = $a;
    return $b;
} 
```

**结果**

```
123
```

看看[变量范围](http://php.net/manual/en/language.variables.scope.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T15:21:04.290

首先，您不能像这样填充变量：`b = $a`您需要使用正确的 PHP 语法，所以：`$b = $a`.

其次，“njk”是正确的，您需要将变量声明为全局变量，因为它超出了范围，因此 using`global $a`将起作用。

最后，只有在调用函数之前预先定义变量时它才会起作用，所以它看起来是这样的：

```
$a = 123;

function test() {

  global $a;

  $b = $a;

  return $b;

}

echo test(); 
```

这将返回这个结果：

```
123 
```

希望有帮助。

# c# - .Net 4.0 WPF 应用程序中的应用程序挂起（可能是 LoaderLock 问题？）

> ID：14218080
> 
> 赞同：2
> 
> 时间：2013-01-08T15:13:50.827
> 
> 标签：c#, .net, freeze, debugdiag

我有一个 .Net 4.0 WPF 应用程序，它有时似乎挂起（每天 1-2 次）。该应用程序与监视用户活动有关，因此使用了许多本机调用（例如 EnumWindows、GetForegroundWindow、GetLastInputInfo 等）。该应用程序还使用 SQL Server CE 4.0 数据库来存储一些信息。

我已经设法从这些挂起的 4 到 5 个中获得崩溃转储，它们看起来都非常相似，但我仍在努力找出问题的原因。

我在下面包含了对最新故障转储的 DebugDiag 分析结果。在此之前大约 20 秒的故障转储显示了完全相同的结果。由此看来，有 2 个线程导致其他线程等待它们。

17 - 该线程正在向 CE 数据库中插入一些数据。我看不出这个线程会挂起的任何原因。

22 - 我不知道这个线程在堆栈跟踪中做了什么。

该应用程序在多个地方大量使用 System.Threading.Tasks 来启动任务以处理各种事件，因此可能会有相当多的线程。从一些阅读来看，Thread 22 似乎是 LoaderLock 问题，但我通过 DllImport 使用标准 Windows API 调用，并且没有任何自定义 c++ 代码（这似乎通常会导致此问题）。

任何建议或指示将不胜感激，因为此刻我有点卡住了！

我无法发布完整的 DebugDiag 结果，因为它太大了，但这里是最重要的部分：

```
**Analysis Summary:**

***Warning***

Detected possible blocking or leaked critical section at ntdll!LdrpLoaderLock owned by thread 22 

Impact of this lock
43.59% of threads blocked
(Threads 0 9 17 18 24 25 28 29 30 31 32 33 34 35 36 37 38)
The following functions are trying to enter this critical section
ntdll!LdrGetDllHandleEx+200
ntdll!LdrGetDllHandleByName+38
ntdll!LdrLockLoaderLock+6d
ntdll!LdrGetProcedureAddressEx+42d
ntdll!LdrShutdownThread+72
ntdll!LdrUnloadDll+2b
ntdll!LdrpInitializeThread+8d

The following module(s) are involved with this critical section

C:\Windows\System32\ntdll.dll from Microsoft Corporation

***Warning***

The following threads in are waiting to enter a .NET Lock which thread 17 is currently holding
( 7 8 10 11 13 14 15 16 19 )
23.08% of threads blocked

**Analysis Details:**

***Locked critical section report***
Critical Section    ntdll!LdrpLoaderLock  
Lock State   Locked 
Lock Count   17
Recursion Count   1
Entry Count   0
Contention Count   161
Spin Count   0
Owner Thread   22
Owner Thread System ID   14788

***Threads which appear to be causing hangs***

***Thread 22 - System ID 14788***
Entry point   ntdll!RtlUserThreadStart+1d 
Create time   08/01/2013 12:45:08 
Time spent in user mode   0 Days 00:00:00.00 
Time spent in kernel mode   0 Days 00:00:00.00 

This thread is not fully resolved and may or may not be a problem. Further analysis of these threads may be required.

Function   Source 
ntdll!NtWaitForSingleObject+a    
KERNELBASE!WaitForSingleObjectEx+79    
ShellExtension!CoreWaitForThreadEx+106    
ShellExtension!_COS_CLIENT_OPERATION_CONTROLLER::COSRemoveAutoResumeTrOps+378    
ShellExtension!_COS_CLIENT_OPERATION_CONTROLLER::~_COS_CLIENT_OPERATION_CONTROLLER+45    
ShellExtension!DllInstall+11a5e    
ShellExtension!DllInstall+69f4    
ShellExtension!DllInstall+6b4e    
ntdll!LdrpUnloadDll+27d    
ntdll!LdrUnloadDll+4a    
KERNELBASE!FreeLibrary+1d    
ole32!CClassCache::CDllPathEntry::CFinishObject::Finish+28   d:\w7rtm\com\ole32\com\objact\dllcache.cxx @ 3394 
ole32!CClassCache::CFinishComposite::Finish+46   d:\w7rtm\com\ole32\com\objact\dllcache.cxx @ 3504 
ole32!CClassCache::FreeUnused+db   d:\w7rtm\com\ole32\com\objact\dllcache.cxx @ 5430 
ole32!CoFreeUnusedLibrariesEx+3b   d:\w7rtm\com\ole32\com\objact\dllapi.cxx @ 175 
user32!UserCallWinProc+19f    
user32!DispatchMessageWorker+143    
ole32!CDllHost::STAWorkerLoop+68   d:\w7rtm\com\ole32\com\objact\dllhost.cxx @ 957 
ole32!CDllHost::WorkerThread+d7   d:\w7rtm\com\ole32\com\objact\dllhost.cxx @ 834 
ole32!CRpcThread::WorkerLoop+1e   d:\w7rtm\com\ole32\com\dcomrem\threads.cxx @ 257 
ole32!CRpcThreadCache::RpcWorkerThreadEntry+1a   d:\w7rtm\com\ole32\com\dcomrem\threads.cxx @ 63 
kernel32!BaseThreadInitThunk+d    
ntdll!RtlUserThreadStart+1d 

***Thread 17 - System ID 14164***
Entry point   ntdll!RtlUserThreadStart+1d 
Create time   08/01/2013 12:32:00 
Time spent in user mode   0 Days 00:00:00.936 
Time spent in kernel mode   0 Days 00:00:03.338 

This thread is not fully resolved and may or may not be a problem. Further analysis of these threads may be required.

.NET Call Stack

Function
DomainBoundILStubClass.IL_STUB_PInvoke() 
System.Data.SqlServerCe.SqlCeConnection..ctor() 
System.Data.SqlServerCe.SqlCeProviderFactory.CreateConnection() 
System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Initialize(System.Data.Linq.Provider.IDataServices, System.Object) 
System.Data.Linq.DataContext.Init(System.Object, System.Data.Linq.Mapping.MappingSource) 
Company.MyApplication.Application.Bootstrapper+<>c__DisplayClass7.b__5(Microsoft.Practices.Unity.IUnityContainer) 
Microsoft.Practices.Unity.InjectionFactory+<>c__DisplayClass2.<.ctor>b__0(Microsoft.Practices.Unity.IUnityContainer, System.Type, System.String) 
Microsoft.Practices.ObjectBuilder2.FactoryDelegateBuildPlanPolicy.BuildUp(Microsoft.Practices.ObjectBuilder2.IBuilderContext) 
Microsoft.Practices.ObjectBuilder2.BuildPlanStrategy.PreBuildUp(Microsoft.Practices.ObjectBuilder2.IBuilderContext) 
Microsoft.Practices.ObjectBuilder2.StrategyChain.ExecuteBuildUp(Microsoft.Practices.ObjectBuilder2.IBuilderContext) 
Microsoft.Practices.Unity.UnityContainer.DoBuildUp(System.Type, System.Object, System.String, System.Collections.Generic.IEnumerable`1) 
Microsoft.Practices.Unity.UnityContainer.DoBuildUp(System.Type, System.String, System.Collections.Generic.IEnumerable`1) 
Microsoft.Practices.ServiceLocation.ServiceLocatorImplBase.GetInstance(System.Type, System.String) 
Microsoft.Practices.ServiceLocation.ServiceLocatorImplBase.GetInstance[[System.__Canon, mscorlib]]() 
Company.MyApplication.Application.Services.Timers.PersistedTimerService.AddIdlePeriod(System.DateTime, System.DateTime) 
System.EventHandler`1[[System.__Canon, mscorlib]].Invoke(System.Object, System.__Canon) 
Company.MyApplication.Application.IdleDetection.SystemIdleDetector.CheckSystemState(Int32, Boolean, System.DateTime) 
Company.MyApplication.Application.IdleDetection.SystemIdleDetector+<>c__DisplayClass3.b__1(System.Object, System.Timers.ElapsedEventArgs) 
System.Timers.Timer.MyTimerCallback(System.Object) 
System.Threading.ExecutionContext.runTryCode(System.Object) 
System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode, CleanupCode, System.Object) 
System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean) 
System.Threading._TimerCallback.PerformTimerCallback(System.Object) 

Full Call Stack

Function   Source 
ntdll!NtWaitForSingleObject+a    
ntdll!RtlpWaitOnCriticalSection+e8    
ntdll!RtlEnterCriticalSection+d1    
ntdll!LdrLockLoaderLock+6d    
KERNELBASE!GetModuleFileNameW+96    
sqlceme40!LoadResourceDll+1d3    
sqlceme40!InitResourceDll+2b    
sqlceme40!DllAddRef+1f    
clr!DoNDirectCall__PatchGetThreadCall+7b    
0x000007ff`001e81fa    
0x000007ff`001e4b6d    
0x000007ff`0048326c    
System_Data_Linq_ni+1fca99    
System_Data_Linq_ni+1653d1    
0x000007ff`00481a08    
0x000007ff`001c4a7f    
0x000007ff`001c4937    
0x000007ff`001b8650    
0x000007ff`001b7c31    
0x000007ff`001b7428    
0x000007ff`001b7244    
0x000007ff`001d74e6    
0x000007ff`001d745b    
0x000007ff`004933d9    
0x000007ff`0004bea9    
0x000007ff`0048c620    
0x000007ff`00493068    
System_ni+260561    
mscorlib_ni+382f68    
clr!CallDescrWorker+84    
clr!CallDescrWorkerWithHandler+a9    
clr!MethodDesc::CallDescr+2a1    
clr!ExecuteCodeWithGuaranteedCleanupHelper+152    
clr!ReflectionInvocation::ExecuteCodeWithGuaranteedCleanup+1a5    
mscorlib_ni+371651    
mscorlib_ni+3ecda7    
clr!CallDescrWorker+84    
clr!CallDescrWorkerWithHandler+a9    
clr!DispatchCallDebuggerWrapper+74    
clr!DispatchCallNoEH+7c    
clr!AddTimerCallback_Worker+85    
clr!VirtualCallStubManager::GenerateResolveCacheElem+aa    
clr!FullSegmentIterator+194    
clr!DomainFile::Activate+375    
clr!COMArrayInfo::GetReference+12b    
clr!AddTimerCallbackEx+77    
clr!ThreadpoolMgr::AsyncTimerCallbackCompletion+49    
clr!UnManagedPerAppDomainTPCount::DispatchWorkItem+181    
clr!ThreadpoolMgr::NewWorkerThreadStart+2e5    
clr!ThreadpoolMgr::WorkerThreadStart+3b    
clr!Thread::intermediateThreadProc+7d    
kernel32!BaseThreadInitThunk+d    
ntdll!RtlUserThreadStart+1d 

***Examples of threads waiting on thread 22***

***Thread 0 - System ID 12068***
Entry point   ntdll!RtlUserThreadStart+1d 
Create time   08/01/2013 12:30:17 
Time spent in user mode   0 Days 00:00:08.190 
Time spent in kernel mode   0 Days 00:00:03.026 

This thread is not fully resolved and may or may not be a problem. Further analysis of these threads may be required.

.NET Call Stack

Function 
System.Windows.Forms.UnsafeNativeMethods.GetModuleHandle(System.String) 
DomainBoundILStubClass.IL_STUB_PInvoke(System.String) 
System.Windows.Forms.Application.get_ComCtlSupportsVisualStyles() 
System.Windows.Forms.ProfessionalColorTable.get_ColorTable() 
System.Windows.Forms.ProfessionalColorTable.FromKnownColor(KnownColors) 
System.Windows.Forms.ToolStripProfessionalRenderer.RenderToolStripDropDownBackground(System.Windows.Forms.ToolStripRenderEventArgs) 
System.Windows.Forms.ToolStripProfessionalRenderer.OnRenderToolStripBackground(System.Windows.Forms.ToolStripRenderEventArgs) 
System.Windows.Forms.ToolStrip.OnPaintBackground(System.Windows.Forms.PaintEventArgs) 
System.Windows.Forms.ToolStripDropDownMenu.OnPaintBackground(System.Windows.Forms.PaintEventArgs) 
System.Windows.Forms.Control.PaintWithErrorHandling(System.Windows.Forms.PaintEventArgs, Int16) 
System.Windows.Forms.Control.WmPaint(System.Windows.Forms.Message ByRef) 
System.Windows.Forms.Control.WndProc(System.Windows.Forms.Message ByRef) 
System.Windows.Forms.ToolStrip.WndProc(System.Windows.Forms.Message ByRef) 
System.Windows.Forms.ToolStripDropDown.WndProc(System.Windows.Forms.Message ByRef) 
System.Windows.Forms.NativeWindow.Callback(IntPtr, Int32, IntPtr, IntPtr) 
DomainBoundILStubClass.IL_STUB_ReversePInvoke(Int64, Int32, Int64, Int64) 
MS.Win32.UnsafeNativeMethods.DispatchMessage(System.Windows.Interop.MSG ByRef) 
DomainBoundILStubClass.IL_STUB_PInvoke(System.Windows.Interop.MSG ByRef) 
System.Windows.Threading.Dispatcher.PushFrameImpl(System.Windows.Threading.DispatcherFrame) 
System.Windows.Application.RunInternal(System.Windows.Window) 
Company.MyApplication.Application.Program.Main() 

Full Call Stack

Function   Source 
ntdll!NtWaitForSingleObject+a    
ntdll!RtlpWaitOnCriticalSection+e8    
ntdll!RtlEnterCriticalSection+d1    
ntdll!LdrGetDllHandleEx+200    
ntdll!LdrGetDllHandle+1c    
KERNELBASE!GetModuleHandleForUnicodeString+26    
KERNELBASE!BasepGetModuleHandleExW+d6    
KERNELBASE!GetModuleHandleW+1e    
clr!DoNDirectCall__PatchGetThreadCall+7b    
System_Windows_Forms_ni+35b406    
System_Windows_Forms_ni+34d9a6    
System_Windows_Forms_ni+3215f9    
System_Windows_Forms_ni+321378    
System_Windows_Forms_ni+c80860    
System_Windows_Forms_ni+ef939b    
System_Windows_Forms_ni+31fb6f    
System_Windows_Forms_ni+a42080    
System_Windows_Forms_ni+347df2    
System_Windows_Forms_ni+34c96f    
System_Windows_Forms_ni+331339    
System_Windows_Forms_ni+31e9dc    
System_Windows_Forms_ni+2c9495    
System_Windows_Forms_ni+330cfc    
System_Windows_Forms_ni+bc1d50    
clr!UMThunkStubAMD64+77    
user32!UserCallWinProcCheckWow+163    
user32!DispatchClientMessage+c3    
user32!_fnDWORD+2d    
ntdll!KiUserCallbackDispatcherContinue    
user32!NtUserDispatchMessage+a    
user32!DispatchMessageWorker+55b    
clr!DoNDirectCall__PatchGetThreadCall+7b    
WindowsBase_ni!?MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen@@20051M1M120N1M08120N <PERF> (WindowsBase_ni+0x1403f0)    
WindowsBase_ni!?MS.Internal.IO.Zip.ProgressiveCrcCalculatingStream..ctor@@200301128L80126509+1a    
PresentationFramework_ni+3886df    
0x000007ff`001b03fa    
clr!CallDescrWorker+84    
clr!CallDescrWorkerWithHandler+a9    
clr!MethodDesc::CallDescr+2a1    
clr!ClassLoader::RunMain+228    
clr!Assembly::ExecuteMainMethod+ac    
clr!SystemDomain::ExecuteMainMethod+452    
clr!ExecuteEXE+43    
clr!CorExeMainInternal+c4    
clr!CorExeMain+15    
mscoreei!CorExeMain+41    
mscoree!CorExeMain_Exported+57    
kernel32!BaseThreadInitThunk+d    
ntdll!RtlUserThreadStart+1d 

***Thread 38 - System ID 15180***
Entry point   ntdll!LdrInitializeThunk+e 
Create time   08/01/2013 13:53:47 
Time spent in user mode   0 Days 00:00:00.00 
Time spent in kernel mode   0 Days 00:00:00.00 

This thread is waiting on critical section ntdll!LdrpLoaderLock which is owned by thread 22

Function   Source 
ntdll!NtWaitForSingleObject+a    
ntdll!RtlpWaitOnCriticalSection+e8    
ntdll!RtlEnterCriticalSection+d1    
ntdll!LdrpInitializeThread+8d    
ntdll!LdrpInitialize+9f    
ntdll!LdrInitializeThunk+e    

***Examples of threads waiting on thread 17***

***Thread 10 - System ID 11748***
Entry point   ntdll!RtlUserThreadStart+1d 
Create time   08/01/2013 12:30:24 
Time spent in user mode   0 Days 00:00:00.951 
Time spent in kernel mode   0 Days 00:00:05.818 

This thread is waiting to enter a .NET Lock which thread 17 is currently holding

.NET Call Stack

Function 
System.Threading.Monitor.Enter(System.Object) 
Company.MyApplication.Application.Services.Timers.PersistedTimerService.AddIdlePeriod(System.DateTime, System.DateTime) 
System.EventHandler`1[[System.__Canon, mscorlib]].Invoke(System.Object, System.__Canon) 
Company.MyApplication.Application.IdleDetection.SystemIdleDetector.CheckSystemState(Int32, Boolean, System.DateTime) 
Company.MyApplication.Application.IdleDetection.SystemIdleDetector+<>c__DisplayClass3.b__1(System.Object, System.Timers.ElapsedEventArgs) 
System.Timers.Timer.MyTimerCallback(System.Object) 
System.Threading.ExecutionContext.runTryCode(System.Object) 
System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode, CleanupCode, System.Object) 
System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean) 
System.Threading._TimerCallback.PerformTimerCallback(System.Object) 

Full Call Stack

Function   Source 
ntdll!NtWaitForMultipleObjects+a    
KERNELBASE!WaitForMultipleObjectsEx+e8    
kernel32!WaitForMultipleObjectsExImplementation+b3    
clr!WaitForMultipleObjectsEx_SO_TOLERANT+91    
clr!Thread::DoAppropriateAptStateWait+56    
clr!Thread::DoAppropriateWaitWorker+1b1    
clr!Thread::DoAppropriateWait+73    
clr!CLREvent::WaitEx+c1    
clr!AwareLock::EnterEpilogHelper+ca    
clr!AwareLock::EnterEpilog+63    
clr!AwareLock::Contention+219    
clr!JITutil_MonContention+104    
0x000007ff`004932f8    
0x000007ff`0004bea9    
0x000007ff`0048c620    
0x000007ff`00493068    
System_ni+260561    
mscorlib_ni+382f68    
clr!CallDescrWorker+84    
clr!CallDescrWorkerWithHandler+a9    
clr!MethodDesc::CallDescr+2a1    
clr!ExecuteCodeWithGuaranteedCleanupHelper+152    
clr!ReflectionInvocation::ExecuteCodeWithGuaranteedCleanup+1a5    
mscorlib_ni+371651    
mscorlib_ni+3ecda7    
clr!CallDescrWorker+84    
clr!CallDescrWorkerWithHandler+a9    
clr!DispatchCallDebuggerWrapper+74    
clr!DispatchCallNoEH+7c    
clr!AddTimerCallback_Worker+85    
clr!VirtualCallStubManager::GenerateResolveCacheElem+aa    
clr!FullSegmentIterator+194    
clr!DomainFile::Activate+375    
clr!COMArrayInfo::GetReference+12b    
clr!AddTimerCallbackEx+77    
clr!ThreadpoolMgr::AsyncTimerCallbackCompletion+49    
clr!UnManagedPerAppDomainTPCount::DispatchWorkItem+181    
clr!ThreadpoolMgr::NewWorkerThreadStart+2e5    
clr!ThreadpoolMgr::WorkerThreadStart+3b    
clr!Thread::intermediateThreadProc+7d    
kernel32!BaseThreadInitThunk+d    
ntdll!RtlUserThreadStart+1d

Thread 15 - System ID 8644
Entry point   ntdll!RtlUserThreadStart+1d 
Create time   08/01/2013 12:31:54 
Time spent in user mode   0 Days 00:00:00.686 
Time spent in kernel mode   0 Days 00:00:03.338 

This thread is waiting to enter a .NET Lock which thread 17 is currently holding

.NET Call Stack

Function 
System.Threading.Monitor.Enter(System.Object) 
Company.MyApplication.Application.Services.Timers.PersistedTimerService.PauseTimer(Company.MyApplication.Services.DataContracts.Timing.ITimerIdentifier, Company.MyApplication.Services.DateTimeWithZone) 
Company.MyApplication.Application.Services.Timing.TimerActivityMonitor.CallEndActionIfNoFurtherActivity(Company.MyApplication.Services.DataContracts.Timing.ITimerIdentifier, Company.MyApplication.Services.DateTimeWithZone, System.Action`1, Company.MyApplication.Services.DataContracts.TimeEntrySubmissions.ITimeEntrySubmission) 
Company.MyApplication.Application.Services.Timing.TimerActivityMonitor.RunEndAction(Company.MyApplication.Services.DataContracts.Timing.ITimerIdentifier, Company.MyApplication.Services.DateTimeWithZone, System.Action`1, System.Timers.Timer, Company.MyApplication.Services.DataContracts.TimeEntrySubmissions.ITimeEntrySubmission) 
Company.MyApplication.Application.Services.Timing.TimerActivityMonitor.RegisterTimerEndAction(Company.MyApplication.Services.DataContracts.Timing.ITimerIdentifier, Company.MyApplication.Services.DateTimeWithZone, System.Action`1, System.TimeSpan, Company.MyApplication.Services.DataContracts.TimeEntrySubmissions.ITimeEntrySubmission) 
Company.MyApplication.Application.Services.Timing.EventDrivenTimingService`1[[Company.MyApplication.Services.EventTypes.ApplicationEventType, Company.MyApplication.Services]].PauseTiming(Company.MyApplication.Services.DataContracts.Timing.ITimerIdentifier, Company.MyApplication.Services.DateTimeWithZone, System.TimeSpan, Company.MyApplication.Services.DataContracts.TimeEntrySubmissions.ITimeEntrySubmission) 
Company.MyApplication.Application.Services.Timing.EventDrivenTimingService`1[[Company.MyApplication.Services.EventTypes.ApplicationEventType, Company.MyApplication.Services]].PerformItemAction(Company.MyApplication.Services.DataContracts.Timing.ITimerIdentifier, Company.MyApplication.Services.DateTimeWithZone, Company.MyApplication.Application.Services.Timing.TimerAction, System.TimeSpan, Company.MyApplication.Services.DataContracts.TimeEntrySubmissions.ITimeEntrySubmission) 
Company.MyApplication.Application.Services.Timing.EventDrivenTimingService`1+<>c__DisplayClass3[[Company.MyApplication.Services.EventTypes.ApplicationEventType, Company.MyApplication.Services]].b__0() 
System.Threading.Tasks.Task.Execute() 
System.Threading.ExecutionContext.runTryCode(System.Object) 
System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode, CleanupCode, System.Object) 
System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean) 
System.Threading.Tasks.Task.ExecuteWithThreadLocal(System.Threading.Tasks.Task ByRef) 
System.Threading.Tasks.Task.ExecuteEntry(Boolean) 
Company.MyApplication.Tools.Tasks.LimitedConcurrencyLevelTaskScheduler.b__3(System.Object) 
System.Threading.QueueUserWorkItemCallback.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem() 
System.Threading.ThreadPoolWorkQueue.Dispatch() 
System.Threading._ThreadPoolWaitCallback.PerformWaitCallback() 

Full Call Stack

Function   Source 
ntdll!NtWaitForMultipleObjects+a    
KERNELBASE!WaitForMultipleObjectsEx+e8    
kernel32!WaitForMultipleObjectsExImplementation+b3    
clr!WaitForMultipleObjectsEx_SO_TOLERANT+91    
clr!Thread::DoAppropriateAptStateWait+56    
clr!Thread::DoAppropriateWaitWorker+1b1    
clr!Thread::DoAppropriateWait+73    
clr!CLREvent::WaitEx+c1    
clr!AwareLock::EnterEpilogHelper+ca    
clr!AwareLock::EnterEpilog+63    
clr!AwareLock::Contention+219    
clr!JITutil_MonContention+104    
0x000007ff`0049414b    
0x000007ff`0049401d    
0x000007ff`00493e13    
0x000007ff`00493c99    
0x000007ff`00493b87    
0x000007ff`004905f9    
0x000007ff`0049046d    
mscorlib_ni+abde22    
mscorlib_ni+382f68    
clr!CallDescrWorker+84    
clr!CallDescrWorkerWithHandler+a9    
clr!MethodDesc::CallDescr+2a1    
clr!ExecuteCodeWithGuaranteedCleanupHelper+152    
clr!ReflectionInvocation::ExecuteCodeWithGuaranteedCleanup+1a5    
mscorlib_ni+371651    
mscorlib_ni+ab8685    
mscorlib_ni+ab8480    
0x000007ff`004902e1    
mscorlib_ni+3bc183    
mscorlib_ni+3bb813    
mscorlib_ni+3bb665    
clr!CallDescrWorker+84    
clr!CallDescrWorkerWithHandler+a9    
clr!MethodDesc::CallDescr+2a1    
clr!MethodDescCallSite::Call+35    
clr!QueueUserWorkItemManagedCallback+44    
clr!VirtualCallStubManager::GenerateResolveCacheElem+aa    
clr!FullSegmentIterator+194    
clr!DomainFile::Activate+375    
clr!ManagedPerAppDomainTPCount::DispatchWorkItem+e6    
clr!ThreadpoolMgr::NewWorkerThreadStart+2e5    
clr!ThreadpoolMgr::WorkerThreadStart+3b    
clr!Thread::intermediateThreadProc+7d    
kernel32!BaseThreadInitThunk+d    
ntdll!RtlUserThreadStart+1d 
```

# javascript - 如何对服务器进行 JavaScript 同步调用？

> ID：14218081
> 
> 赞同：5
> 
> 时间：2013-01-08T15:13:50.757
> 
> 标签：javascript, jquery, ajax, sync

> **可能重复：**
> [如何让 jQuery 执行同步而不是异步的 AJAX 请求？](https://stackoverflow.com/questions/133310/how-can-i-get-jquery-to-perform-a-synchronous-rather-than-asynchronous-ajax-re)

我有一个返回初始化数据的方法。它首先检查 sessionStorage。如果它在那里没有找到数据，它会调用服务器来获取数据。这是代码：

```
function getInitializationData() {

// Check local storage (cache) prior to making a server call.
// Assume HTML 5 browser because this is an Intranet application.
if (!sessionStorage.getItem("initialData")) {

    // The browser doesn't have the initialization data,
    // so the client will call the server to get the data.
    // Note: the initialization data is complex but 
    // HTML 5 storage only stores strings. Thus, the
    // code has to convert into a string prior to storage.
    $.ajax({
        url: "../initialization.x",
        type: "POST",
        dataType: "json",
        timeout: 10000,
        error: handleError,
        success: function(data) { sessionStorage.setItem("initialData", JSON.stringify(data)); } 
    });
}

// convert the string back to a complex object
return JSON.parse(sessionStorage.getItem("initialData"));
} 
```

问题是成功函数几乎总是在方法返回后执行。如何使服务器调用同步，以便成功函数必须在 getInitializationData 方法的返回语句之前执行？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T15:18:19.343

利用**`async: false`**

```
function getInitializationData() {

// Check local storage (cache) prior to making a server call.
// Assume HTML 5 browser because this is an Intranet application.
if (!sessionStorage.getItem("initialData")) {

    // The browser doesn't have the initialization data,
    // so the client will call the server to get the data.
    // Note: the initialization data is complex but 
    // HTML 5 storage only stores strings. Thus, the
    // code has to convert into a string prior to storage.
    $.ajax({
        url: "../initialization.x",
        type: "POST",
        dataType: "json",
        timeout: 10000,
        async: false,
        error: handleError,
        success: function(data) { sessionStorage.setItem("initialData", JSON.stringify(data)); } 
    });
}

// convert the string back to a complex object
return JSON.parse(sessionStorage.getItem("initialData"));
} 
```

# c - pcap 初始化的 Valgrind 错误

> ID：14218085
> 
> 赞同：0
> 
> 时间：2013-01-08T15:14:07.793
> 
> 标签：c, valgrind, freebsd, pcap

我正在尝试在 FreeBSD 上使用 Valgrind 并遇到一些问题。这是输出

```
==4764== Memcheck, a memory error detector
==4764== Copyright (C) 2002-2012, and GNU GPL'd, by Julian Seward et al.
==4764== Using Valgrind-3.8.0 and LibVEX; rerun with -h for copyright info
==4764== Command: driver -i
==4764== 
==4764== 
==4764== HEAP SUMMARY:
==4764==     in use at exit: 33,852 bytes in 4 blocks
==4764==   total heap usage: 12 allocs, 8 frees, 171,894 bytes allocated
==4764== 
==4764== LEAK SUMMARY:
==4764==    definitely lost: 0 bytes in 0 blocks
==4764==    indirectly lost: 0 bytes in 0 blocks
==4764==      possibly lost: 0 bytes in 0 blocks
==4764==    still reachable: 33,852 bytes in 4 blocks
==4764==         suppressed: 0 bytes in 0 blocks
==4764== Rerun with --leak-check=full to see details of leaked memory
==4764== 
==4764== For counts of detected and suppressed errors, rerun with: -v
==4764== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
==4765== Syscall param ioctl(generic) points to uninitialised byte(s)
==4765==    at 0x3196CBC: __sys_ioctl (in /lib/libc.so.7)
==4765==    by 0x1A40469: ??? (in /lib/libpcap.so.8)
==4765==    by 0x1A3ED18: pcap_activate (in /lib/libpcap.so.8)
==4765==    by 0x1A3F43A: pcap_open_live (in /lib/libpcap.so.8)
==4765==    by 0x1822DB7: pcap_init (pcaputil.c:77)
==4765==    by 0x120FE6A: driver_init (recfm.c:387)
==4765==    by 0x402633: main (driver.c:224)
==4765==  Address 0x7ff000270 is on thread 1's stack
==4765==  Uninitialised value was created by a stack allocation
==4765==    at 0x1A3FED0: ??? (in /lib/libpcap.so.8)
==4765== 
==4765== Conditional jump or move depends on uninitialised value(s)
==4765==    at 0x1A408DD: ??? (in /lib/libpcap.so.8)
==4765==    by 0x1A3ED18: pcap_activate (in /lib/libpcap.so.8)
==4765==    by 0x1A3F43A: pcap_open_live (in /lib/libpcap.so.8)
==4765==    by 0x1822DB7: pcap_init (pcaputil.c:77)
==4765==    by 0x120FE6A: driver_init (recfm.c:387)
==4765==    by 0x402633: main (driver.c:224)
==4765==  Uninitialised value was created by a heap allocation
==4765==    at 0x1008DAB: malloc (vg_replace_malloc.c:274)
==4765==    by 0x1A4013E: ??? (in /lib/libpcap.so.8)
==4765==    by 0x1A3ED18: pcap_activate (in /lib/libpcap.so.8)
==4765==    by 0x1A3F43A: pcap_open_live (in /lib/libpcap.so.8)
==4765==    by 0x1822DB7: pcap_init (pcaputil.c:77)
==4765==    by 0x120FE6A: driver_init (recfm.c:387)
==4765==    by 0x402633: main (driver.c:224)
==4765== 
==4765== Warning: noted but unhandled ioctl 0x20004269 with no size/direction hints   This could cause spurious value errors to appear.   See README_MISSING_SYSCALL_OR_IOCTL for guidance on writing a proper wrapper.Syscall param ioctl(generic) points to uninitialised byte(s)
==4765==    at 0x3196CBC: __sys_ioctl (in /lib/libc.so.7)
==4765==    by 0x1A40291: ??? (in /lib/libpcap.so.8)
==4765==    by 0x1A3ED18: pcap_activate (in /lib/libpcap.so.8)
==4765==    by 0x1A3F43A: pcap_open_live (in /lib/libpcap.so.8)
==4765==    by 0x1822DB7: pcap_init (pcaputil.c:77)
==4765==    by 0x120FE6A: driver_init (recfm.c:387)
==4765==    by 0x402633: main (driver.c:224)
==4765==  Address 0x7fefffd14 is on thread 1's stack
==4765==  Uninitialised value was created by a stack allocation
==4765==    at 0x1A3FEF8: ??? (in /lib/libpcap.so.8)
==4765== 
==4765== Syscall param ioctl(generic) points to uninitialised byte(s)
==4765==    at 0x3196CBC: __sys_ioctl (in /lib/libc.so.7)
==4765==    by 0x1A40C98: ??? (in /lib/libpcap.so.8)
==4765==    by 0x1823277: pcap_init (pcaputil.c:98)
==4765==    by 0x120FE6A: driver_init (recfm.c:387)
==4765==    by 0x402633: main (driver.c:224)
==4765==  Address 0x7ff000454 is on thread 1's stack
==4765==  Uninitialised value was created by a stack allocation
==4765==    at 0x1822C10: pcap_init (pcaputil.c:61)
==4765== 
--4765-- WARNING: unhandled syscall: 522
--4765-- You may be able to write your own handler.
--4765-- Read the file README_MISSING_SYSCALL_OR_IOCTL.
--4765-- Nevertheless we consider this a bug.  Please report
--4765-- it at http://valgrind.org/support/bug_reports.html.

...repeated a bunch of times 
```

最后一个警告，一遍又一遍地重复，但我认为这不一定是问题，对吧？更令人担忧的是我认为的另一个问题。

看起来我的程序仍在后台运行，但我显然没有从 valgrind 得到好的报告。它提到的违规行之一是 pcaputil:77

如下：

```
pd=pcap_open_live(__intf, snaplen, 1, 512, ebuf) 
```

哪里`_intf`是 a `char *`，`snaplen`是一个`int`，并且`ebuf`是一个`char ebuf[SIZE] = {0};`数组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T04:27:26.007

实际上，这只是 Valgrind-for-FreeBSD 并没有真正理解一些 ioctl。OS X 上存在同样的问题（并且可能存在于所有其他 *BSD 上）；请参阅[Valgrind 错误 312989](https://bugs.kde.org/show_bug.cgi?id=312989)（他们使用 KDE 的错误数据库；他们实际上并没有超过 300,000 个错误 :-)）。

FreeBSD 的修复将是类似的，尽管出于某种原因，他们决定遵循“将所有内容从包含文件复制到 Valgrind 源”的 Linux 约定，而不是“只包含系统头文件”的达尔文约定; 这意味着头文件需要做更多的工作。我会询问 FreeBSD Valgrind 的维护者，达尔文方法是否更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:00:39.980

好吧，Valgrind 有一个错误。FreeBSD 中有一个系统调用无法处理。可能是 pcap 调用的东西。这有可能正在传播并导致 Valgrind 说 pcap 正在跳过未初始化的数据。甚至有可能您的程序运行良好，只是 Valgrind 有问题。最好的方法是添加你自己的 ioctl 包装器，修补 valgrind，看看它是否仍然很糟糕。或者您可以使用 pcap 的替代方案，它不使用它正在使用的任何系统调用。

抱歉，如果这不是一个简单的解决方案。

# magento - 向 sales_flat_quote_item 添加新字段并保存数据

> ID：14218086
> 
> 赞同：0
> 
> 时间：2013-01-08T15:14:10.817
> 
> 标签：magento

`sales_flat_quote_item`我在表中创建了一个名为“wiid”的新列。当任何产品表单愿望清单添加到购物车时，我想在此字段中保存数据。所以，这是我的 MageWishlist_Model_Item：

```
$quote_item  = Mage::getModel('sales/quote_item')->load($cart->getQuote()->getItemByProduct($product)->getId());
//I log() this $quote_item and is returning the correct object
$quote_item_id = $quote_item->getId();
//Is returning the correct quote item id  from database
$wishlist_item_id = $this->getId();
//Is returnig the correct wishlist item id 
$quote_item->setWiid($wishlist_item_id);
$quote_item->save(); 
```

问题出在上面的最后两行。它没有保存在数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:25:09.860

每次在数据库上添加新字段时，都必须在后端刷新“缓存存储”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-09T11:54:05.940

你必须这样做。

直接使用sql语句：

```
$write = Mage::getSingleton('core/resource')->getConnection('core_write');
$query = "UPDATE sales_flat_quote_item SET your_field_here = '" . $yourContent . "' where item_id = ". $itemId;
$write->query($query); 
```

或者，您必须获取报价模型并遍历以下项目，而不是获取 quote_item 模型：

```
$quote = Mage::getModel('sales/quote')->load($quoteId);
$items = $quote->getAllItems();
foreach ($items as $item){
    $item->setWild("your_content_here");
    $item->save();
} 
```

# sparql - 属性路径深度在 jena sparql 中是否实际可用？

> ID：14218087
> 
> 赞同：3
> 
> 时间：2013-01-08T15:14:13.997
> 
> 标签：sparql, jena

我在耶拿有以下查询。

```
PREFIX edge: <http://test.com/edge#>
PREFIX property: <http://test.com/property#>
select  distinct ?supertype ?subtype where{
?supertype edge:uses{1,3} ?subtype.
?subtype (edge:extends | edge:implements)+ ?supertype. } 
```

这在芝麻中工作正常，但在耶拿我得到以下错误：

在第 1 行第 163 列遇到“”{“”{“”。期待以下之一：

此外，我尝试将其设置为使用 sparql 1、1.1 和 ARQ 语法，但总是出现相同的错误。虽然相同的查询在 sesame2 中有效。所以我的问题是，Jenas sparql 的语法是否略有不同，还是不受支持？（我从[http://jena.sourceforge.net/ARQ/property_paths.html](http://jena.sourceforge.net/ARQ/property_paths.html)假设它是受支持的。）

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T18:43:32.220

Jena 现在是一个 Apache 项目 - 网站是[http://jena.apache.org/](http://jena.apache.org/)。SF 文档是遗留的，用于维护旧链接。

{} 语法不是 SPARQL 1.1 的一部分（它已被删除）

您可以使用 Syntax.syntaxARQ 来获取包含 {}/ 的扩展语法

您可以使用[http://www.sparql.org/query-validator.html](http://www.sparql.org/query-validator.html)进行检查。

# windows-8 - 如何从 ref ^ 指针转换为原始指针？

> ID：14218091
> 
> 赞同：1
> 
> 时间：2013-01-08T15:14:21.323
> 
> 标签：windows-8, microsoft-metro, windows-runtime, c++-cx

在 WindowsRT / Metro 中，如何将 ref ^ 指针转换为原始指针？

例如，我想将一个指向控件的指针传递给旧的 C 样式回调，它期望参数为`void*`：

`// this = type derived from Windows::UI::Xaml::Controls::Page
SetCallback(this);`

但是，我收到一个错误：

> 无法将参数 1 从“MyProject::MainPage ^const”转换为“void *”

如何转换`MainPage`为原始指针（没有 C 样式/reinterpret_casts）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T16:45:12.557

A`T^`可以`T*`使用`reinterpret_cast`^((*))转换为其对应的指针类型。最简单、正确的代码是将 a 转换`T^`为`Object^`然后转换为`IInspectable*`：

```
IInspectable* AsInspectable(Platform::Object^ o)
{
    return reinterpret_cast<IInspectable*>(o);
} 
```

`IInspectable*`可转换为`void*`，尽管您确实需要注意 COM 生命周期规则（我不知道您打算对此做什么`void*`，所以我无法在此提出任何具体建议）。

我在[“戴帽子的类型”一文中详细讨论了这顶帽子。](http://blogs.msdn.com/b/vcblog/archive/2012/09/17/cxxcxpart02typesthatwearhats.aspx) 您可能会发现其中一些信息很有帮助。

* * *

(*) 您要求一种不使用 的方法`reinterpret_cast`，但该限制没有意义： `reinterpret_cast`是执行此转换的受支持方法。

# java - Oracle EBS 无法在 firefox 上加载小程序

> ID：14218092
> 
> 赞同：0
> 
> 时间：2013-01-08T15:14:25.463
> 
> 标签：java, oracle, firefox, runtime

我通常使用 IE 来访问 oracle ebs .. 但有时我想使用 firefox 在 oracle ebs 中工作..

我应该怎么做才能让我的 Firefox 能够加载 ebs 表单（基于 Web 的菜单已打开但没有表单）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-09-01T05:50:22.113

您可以使用 Firefox 版本 2.0.0.1，其中 applet 仍在工作。现在新版本的 java 不支持旧的 firefox 版本，因此需要根据给定的 DOC ID 2188898.1 在您的服务器上应用补丁来升级 Java Web 启动技术

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-14T15:00:19.243

您应该开始使用 Oracle 的[Java Web Start](https://blogs.oracle.com/ebstech/java-web-start-now-available-for-ebs-121-and-122)。这将帮助您在大多数现代浏览器中运行 Oracle Forms。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-08T22:30:56.487

Firefox ESR 版本目前仍然支持 java 插件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-19T07:49:30.683

我们在 Windows 7 电脑上使用 Internet Explorer 11 启动它。它需要一个旧的 java 版本和一个从 oracle 安装的插件，但它可以启动并且可以打开表单

# ruby-on-rails - 用户为管理员时保存对象时的不同行为

> ID：14218097
> 
> 赞同：2
> 
> 时间：2013-01-08T15:14:34.920
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, model, admin

我用 Rails (3.2.8) 创建了一个在线调查工具。答案和响应保存在不同的对象中（实际上超过 15 种不同的模型）我使用 devise 作为用户管理系统。

完成所有访谈后，管理员可以在验证每个用户访谈的内容时修改用户响应。我希望每当管理员验证或修改响应时，将名为“admin_modified”的属性设置为 true。

我知道在 MVC 中我不应该在模型中访问用户属性，但是只有当登录的用户是管理员而不修改每个有 save/create/update_attributes 命令的地方时，如何才能将此属性设置为 true 15不同的型号？

有没有一种简单而正确的方法来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:30:19.690

为什么不存储哪个管理员修改/验证了对象，而不是简单地显示它是否被修改的布尔值？

以下是我将如何实现它：

在 User 中，创建一个方法`modify_form_object`，甚至`modify_form_object_as_admin`采用对象和新属性。你会这样称呼它：

```
@user.modify_form_object(form_object, new_attributes) 
```

它会设置对象的`admin_id`, 并使用属性更新对象。

* * *

或者，您可以覆盖 ActiveRecord 的保存方法，检查是否`current_user`是管理员，如果该字段存在，则分配该字段。

# javascript - HTML隐藏图像 - 如何在显示之前下载和调整大小？

> ID：14218098
> 
> 赞同：0
> 
> 时间：2013-01-08T15:14:39.450
> 
> 标签：javascript, html, image

> **可能重复：**
> [JavaScript 预加载图像](https://stackoverflow.com/questions/3646036/javascript-preloading-images)

我正在使用 JS 在页面加载后的某个时间设置 img.hidden=false 。这会导致图像下载并调整 img 元素的大小——我想避免这种情况（我使用内联样式 width:2em 来调整图像大小）。其次，当我更改 img 源时，第二张图片下载时会有一点延迟。

如何在页面上显示之前下载我的图像...？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T15:23:13.927

先下载图片然后触发动作，用jquery这样：

```
 var i = document.createElement('img'); // or new Image()
  // may be you need to set the element id...
  i.id = 'your id';
  // here handle on load event
  $(i).load(function() {

       // finally the new image is loaded, you can trigger your action
       $('#container').append($(this));

  });
  // This is the last step, set the url and start the image download.
  i.src = 'http://www.hostname.com/yourimage.jpg'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T15:34:38.523

没有 jQuery（如果需要）：

```
var imageNode = new Image(); // or document.createElement('img');

imageNode.onload = function(e) {
    // Code for appending to the DOM
    document.getElementById('container').appendChild(this);
};

imageNode.src = 'path/to/image.jpg'; 
```

* * *

如果你的 img 标签已经存在，像这样：

```
<img id='myimg' alt=''> 
```

在 JavaScript 中使用：

```
var imageNode = document.getElementById('myimg'); 
```

代替：

```
var imageNode = new Image(); 
```

*请记住，代码需要在 img 标记之后或 DOM 准备好/加载时执行。否则代码执行时不存在*

# css - Safari 额外的左侧输入填充

> ID：14218100
> 
> 赞同：0
> 
> 时间：2013-01-08T15:14:45.570
> 
> 标签：css, google-chrome, input, safari

[http://screencast.com/t/ltPiCJwBaqT](http://screencast.com/t/ltPiCJwBaqT)

是否可以在 Safari 中删除这一像素？两个字段都没有应用任何 CSS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:18:46.483

您可以使用填充设置输入的样式：

```
input {
    padding-left: 1px;
    padding-right: 1px;
} 
```

如果您没有设置样式，浏览器会采用标准样式，并且它可能因浏览器而异（正如您所指出的）。

我上面的示例需要调整，您甚至可能需要添加或多或少的填充。

# apc - APC 缓存不工作

> ID：14218109
> 
> 赞同：2
> 
> 时间：2013-01-08T15:15:16.690
> 
> 标签：apc

最近切换到 VPS，在无缝过渡后，我意识到我的 APC opCode 缓存不再工作，我收到以下消息：

没有可用的缓存信息。APC 似乎没有运行。

尝试上传最新版本的新 PHP 脚本，但没有变化。我是否必须运行全新安装，或者我的服务器上的设置可能导致它不再工作？作为 VPS，我的托管公司将收取费用来解决此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-01T13:17:17.630

您可以检查[运行时配置以获取](http://php.net/manual/en/configuration.php)[apc.enabled](http://php.net/manual/en/apc.configuration.php#ini.apc.enabled)的值。如果启用了缓存，它应该是：

`apc.enabled = 1`

您可以使用 `phpinfo();` 检查此变量，或执行 `ini_get('apc.enabled');`

如果未设置为 1，则必须在文件或 apache中[设置](http://php.net/manual/en/configuration.changes.php)它。`php.ini``httpd.conf`

# methods - 如何使用其键名作为字符串变量调用方法（动态确定键参数）？

> ID：14218117
> 
> 赞同：0
> 
> 时间：2013-01-08T15:15:38.003
> 
> 标签：methods, ruby-on-rails-3.2, metaprogramming

这是一个 Ruby 问题，尽管我在 Rails 上下文中使用它。

我需要调用一个方法，在该方法中我使用字符串变量为其键（参数名称）赋值。

例如我得到：

```
MyRailsModelClass.where(key_of_my_method: my_value) 
```

我想让这更有活力。我可以像这样“my_rails_model_class”.classify 创建一个 MyRailsModelClass

我需要使 key_of_my_method 更具动态性并将其替换为变量。我正在考虑类似的事情：

```
"my_rails_model_class".classify.where(my_key.to_sym => my_value) 
```

有人有线索吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:18:08.917

实际上，分类方法是不够的。您需要在应用任何类方法之前进行常量化。

我以这种方式解决了它（因为它更有效；而分类确实调用了更多方法：camelize(singularize(table_name.to_s.sub())：

```
"my_rails_model_class".camelize.constantize.where("my_key".to_sym == my_value).first 
```

但你可以这样做更长的方式：

```
"my_rails_model_class".classify.constantize.where("my_key".to_sym == my_value).first 
```

# python - 如何从导入的成员函数中获取对象？

> ID：14218118
> 
> 赞同：0
> 
> 时间：2013-01-08T15:15:38.630
> 
> 标签：python, ctypes, member

在下面的代码示例中，我希望能够`dll`在辅助函数中使用该对象。

```
def HelperFunc():
    # How to use dll here?
    pass

def LoadMyDLL():
    dll = ctypes.CDLL( "libmydll.so" )
    dll.HelperFunction = HelperFunction
    return dll

dll = LoadMyDLL()
dll.HelperFunc() 
```

我显然可以将它作为参数传递给`HelperFunc`，但是我正在导入这个函数，假装它包含在 dll 中，重复调用是不干净`dll.HelperFunc(dll)`的。`dll`

我还可以将`dll`对象存储到全局变量中。然后我需要添加保护以避免加载 dll 两次，保持加载单个 dll。

但是有没有办法`dll`从内部获得`HelperFunc`，或者让它默默地通过？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T15:56:40.297

为了避免全局变量，您可以使用闭包或具有静态方法的对象来保存和重用 dll。

```
def LoadMyDLL(dll = ctypes.CDLL( "libmydll.so" )):
    def closure():
        return dll
    return closure

dll = LoadMyDLL()() 
```

与使用 dll 绑定的 helper func 相同：

```
def HelperFunc():
    dll = LoadMyDLL()()
    # and use the dll 
```

**更新**

上面的答案有效，不是因为闭包，而是因为全局函数 LoadMyDLL 中的默认关键字参数 dll。

当函数 LoadMyDLL 被定义为全局函数时，此默认关键字参数 (dll = ...) 被初始化一次。这意味着有一个非常简单的解决方案：

```
def LoadMyDLL(dll = ctypes.CDLL( "libmydll.so" )):
    return dll

dll = LoadMyDLL() # get the dll, which has already been initialized 
```

并在辅助函数中：

```
def HelperFunc():
    dll = LoadMyDLL() # get the dll again
    # and use the same dll 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T15:28:08.150

所以人们经常忘记（或从不知道）的一件事是函数也具有属性并且它们是完全可变的。所以你可以这样做：

```
def LoadMyDLL():
    dll = ctypes.CDLL("libmydll.so")
    dll.HelperFunction = HelperFunction
    dll.HelperFunction.dll = dll
    return dll 
```

但这会产生一个问题：`dll.HelperFunction.dll is HelperFunction.dll`. 因此，无论您最后一次调用`LoadMyDLL`是什么，都将`CDLL`是附加到`HelperFunction`. 如果您没有在上下文之外使用 HelperFunction，`dll.HelperFunction()`那么我建议您执行以下操作：不要创建`HelperFunc`的属性`dll`，只需`HelperFunction(dll)`在需要的地方调用。如果你想修改它，`dll`因为 Python 是通过引用传递的，它会这样做。如果您不相信我并希望我发布示例代码，我很乐意用插图对其进行编辑。

**免责声明**一般来说，你似乎在做的事情对我来说根本不正确。如果您想做这样的事情，我建议创建一个将`CDLL`对象存储为的类`self.dll`并`HelperFunction`在该类上创建一个方法。然后您可以`self.dll`从该方法访问。当然，设计是你的决定，我看不到其余的代码，但后者对我来说似乎更自然（我猜对很多其他人来说也是如此）。

**编辑**只是由于下面的讨论，我想就如何考虑构建我建议的类提供一个想法（即使上述内容被接受）。

```
class DLLHelper(object):
    def __init__(self, static_object=None, helper_function=None):
        self.dll = ctypes.CDLL(static_object or "libmydll.so")

    def HelperFunction(self):
        # do stuff with self.dll

    def OtherRelatedFunction(self):
        # do stuff with self.dll and self.HelperFunction

dll = DLLHelper()
dll.HelperFunction() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T15:28:13.540

```
def HelperFunc():
    HelperFunc.dll.OtherFunction()

def LoadMyDLL():
    dll = ctypes.CDLL( "libmydll.so" )
    HelperFunction.dll = dll
    dll.HelperFunction = HelperFunc
    return dll

dll = LoadMyDLL()
dll.HelperFunc() 
```

将是一种方法。肯定有更好的方法，但是...

# android - New gms.maps.MapView rendering lags a bit when in a ListView?

> ID：14218124
> 
> 赞同：7
> 
> 时间：2013-01-08T15:15:48.600
> 
> 标签：android, google-maps, surfaceview, android-maps, android-maps-v2

I'm trying to put an instance of the new MapView in a ListView. New mapview being:

```
com.google.android.gms.maps.MapView 
```

I'm turning all interactions off, and setting a fixed height for the view:

```
GoogleMapOptions options = new GoogleMapOptions();
    options.mapType(GoogleMap.MAP_TYPE_NORMAL);
    options.compassEnabled(false);
    options.rotateGesturesEnabled(false);
    options.scrollGesturesEnabled(false);
    options.tiltGesturesEnabled(false);
    options.zoomControlsEnabled(false);
    options.zoomGesturesEnabled(false);

mMapView = new MapView(getActivity(), options);
mMapView.setLayoutParams(new AbsListView.LayoutParams(
    AbsListView.LayoutParams.MATCH_PARENT,
    200));
mMapView.setEnabled(false);
mMapView.setFocusable(false);
getListView().addHeaderView(mMapView);
getListView().addAdapter(simpleArrayAdapter); 
```

This works, but if I scroll the listview quickly, it looks like the mapview rendering lags a bit, so you can see a small area of black pixels in the direction of scrolling.

It almost seems as if this is some kind of synchronization issue, as I'm guessing the mapview with opengl is fast enough to render in response to my scrolls. Also, the old MapView+MapActivity would perform fine in the same setup.

Below is a picture of the gap that appears when you scroll quickly. After a short time, the mapview will catch up and render ok again.

![enter image description here](../Images/3780a63077b361646000a1f45668da88.png)

Any ideas on this?

Thanks

----- Update ---------

This issue looks to be the same as:

[ViewPager with Google Maps API v2: mysterious black view](https://stackoverflow.com/questions/13837697/viewpager-with-google-maps-api-v2-mysterious-black-view)

I could not get the fix documented there to work in this setup, though.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-20T07:22:12.540

如果您的目标 API 13>，请将其放入您的清单中

```
<application android:hardwareAccelerated="true"/> 
```

# grails - 如何将 GSP 呈现为字符串？

> ID：14218133
> 
> 赞同：4
> 
> 时间：2013-01-08T15:16:09.337
> 
> 标签：grails, groovy, grails-2.0

对于我的电子邮件时事通讯，我需要将 GSP（时事通讯的 HTML）呈现为`String`，因此我可以将其传递给我的电子邮件方法。我在 Stack Overflow 上找到了许多解决方案，但我不知道哪一个最适合与 Grails 2.2（最新版本）一起使用。

那么你的意见是什么？如果不将 GSP`String`呈现为 HTTP 响应，您将如何将其呈现为？

谢谢和最好的问候。

帕特里克

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-08T15:59:12.840

在 Grails 2.x 中，您可以将 a 注入`groovyPageRenderer`到服务中。这允许您通过其`render()`方法呈现您想要的任何视图或模板。

有关更多信息，请查看[Haki 先生的这篇精彩帖子](http://mrhaki.blogspot.com/2012/03/grails-goodness-render-gsp-views-and.html)。

另请注意，如果您使用的是[Mail 插件](http://grails.org/plugin/mail)，您可以[为您的电子邮件正文使用视图](http://gpc.github.com/grails-mail/docs/guide/3.%20Sending%20Email.html#3.2%20Message%20Content)。

# javascript - Select class in class

> ID：14218140
> 
> 赞同：1
> 
> 时间：2013-01-08T15:16:18.670
> 
> 标签：javascript, jquery, css-selectors

I have this table:

```
<table>
    <tr class="unique_1">
       <td></td>
       <td></td>
       <td class="status_td"></td>
    </tr> 
    <tr class="unique_2">
       <td></td>
       <td></td>
       <td class="status_td"></td>
    </tr> 
    <tr class="unique_3">
       <td></td>
       <td></td>
       <td class="status_td"></td>
    </tr> 
    <tr class="unique_4">
       <td></td>
       <td></td>
       <td class="status_td"></td>
    </tr> 
</table> 
```

Now I want to select `<td class="status_td">` in `<tr class="unique_3">`. The `<tr>`'s unique id is inside a variable.

What I have so far is:

```
$(trClass + '> .status_td').html('Some data'); 
```

`trClass` contains the unique ID (`.unique_3`)

But this doesn't work, does anyone have an solution for my problem?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T15:24:13.950

这是[小提琴](http://jsfiddle.net/svineet/KLcLE/)。

您必须添加`.`到的开头，`trClass`以便 jQuery 知道它是一个类。对其他人来说，我的小提琴在没有空间的情况下工作！

```
$('.'+trClass + '> .status_td').html('Some data'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T15:18:31.983

```
var trClass = "unique_3";

var item = $("." + trClass + " > .status_td"); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-08T15:19:31.520

您正在将 附加到您尝试选择`>`的类名，这导致 jQuery 搜索选择器字符串。这显然没有选择正确的，因为 DOM 中不存在“unique_3>”类。`<tr>``.unique_3> .status_td``td`

只需删除子选择器并选择`$(trClass + ' .status_td')`即可。

# nsxmlparser - How to use NSXMLParser to parser with same name

> ID：14218143
> 
> 赞同：0
> 
> 时间：2013-01-08T15:16:38.723
> 
> 标签：nsxmlparser

This is my xml code:

```
<root><article>
   <title>Test media</title>
   <media>
     <thumbnail>thumbnail1.png</thumbnail>
     <full>full1.png</full>
     <title>thumb1</title>
  </media>
  <media>
     <thumbnail>thumbnail2.png</thumbnail>
     <full>full2.png</full>
     <title>thumb2</title>
  </media>
  <media>
     <thumbnail>thumbnail3.png</thumbnail>
     <full>full3.png</full>
     <title>thumb3</title>
  </media></article></root> 
```

How I can get all info (thumbnail,full,title) of the media nodes and title. Thanks !

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T07:45:52.667

您可以使用 NSXMLParser 类的以下方法。当你得到标签的开始和结束时，你可以按照你需要的方式放置你的逻辑。

```
/---when the start of an element is found---
-(void)  parser:(NSXMLParser *) parser 
 didStartElement:(NSString *) elementName 
 namespaceURI:(NSString *) namespaceURI 
 qualifiedName:(NSString *) qName
 attributes:(NSDictionary *) attributeDict
{
    if( [elementName isEqualToString:@"media"])
    {
        if (!soapResultsPortFolio)
        {
            soapResultsPortFolio = [[NSMutableString alloc] init];
        }
        elementFoundPortFolio = TRUE;
        NSLog(@"Registration...%@",soapResultsPortFolio);
    }
    else if([elementName isEqualToString:@"thumbnail"])
    {
        elementFoundPortFolio = TRUE;
    }
    else if([elementName isEqualToString:@"full"])
    {
        elementFoundPortFolio = TRUE;
    }
    else if([elementName isEqualToString:@"title"])
    {
        elementFoundPortFolio = TRUE;
    }

}

 //---when the end of element is found---
-(void)parser:(NSXMLParser *)parser 
didEndElement:(NSString *)elementName 
 namespaceURI:(NSString *)namespaceURI 
qualifiedName:(NSString *)qName
{
    if ([elementName isEqualToString:@"media"])
    {          
        NSLog(@"display the soap results%@",soapResultsPortFolio);
    }
    else if([elementName isEqualToString:@"thumbnail"])
    {          
        //Perform required action
    }
    else if([elementName isEqualToString:@"full"])
    {
        //Perform required action
    }
    else if([elementName isEqualToString:@"title"])
    {
        //Perform required action
    }

    [soapResultsPortFolio setString:@""];
    elementFoundPortFolio = FALSE;
} 
```

# asp.net-mvc-3 - Telerik Popup for MVC3 Extension Fails on Windows 2003 Server

> ID：14218149
> 
> 赞同：0
> 
> 时间：2013-01-08T15:17:07.607
> 
> 标签：asp.net-mvc-3, telerik, telerik-mvc

I have a telerik popup window that loads a partial view. This popup works on my laptop but does not work on Windows 2003 Server. What I noticed when debugging the code on 2003 server is that the **ActionResult LogOn()** method continues to get called as if in a loop. This does not happen on my Windows 7 laptop. The popup window loads but the partial view does not show in the popup. It works fine on my laptop. Any ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T03:51:36.387

这导致了解决方案。

[http://bradkingsley.com/mvc3-visual-studio-2010-error-microsoft-jscript-runtime-error-not-implemented/](http://bradkingsley.com/mvc3-visual-studio-2010-error-microsoft-jscript-runtime-error-not-implemented/)

JScript 不在服务器上并导致此问题。

# android - Android AutoCompleteTextView，如何选择它在下拉列表中显示的内容？

> ID：14218154
> 
> 赞同：0
> 
> 时间：2013-01-08T15:17:39.620
> 
> 标签：android, autocompletetextview

我想以某种方式更改 AutoCompleteTextView 以盲目地建议它在它的 ArrayAdapter 中的所有内容（我正在使用在线资源来提供文本完成建议，因此它永远不会是一个非常大的数组）。有没有办法做到这一点（制作一个自定义数组，或过滤器......或其他东西），或者我应该以某种方式滚动我自己的自定义编辑视图，只显示我想要的任何内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:52:52.380

> 我想以某种方式更改 AutoCompleteTextView 以盲目地建议它在 ArrayAdapter 中的所有内容

我猜您只想使用`AutoCompleteTextview`的外观和行为而不实际过滤项目。现在我不确定我是否正确地记得自动完成过程，但我认为你可以扩展`AutoCompleteTextView`并覆盖该[`performFiltering()`](http://developer.android.com/reference/android/widget/AutoCompleteTextView.html#performFiltering%28java.lang.CharSequence,%20int%29)方法以不做任何事情（在那里小部件调用`filter()`适配器上的方法来限制其中的项目）。然后在您的应用程序中使用该自定义小部件而不是默认小部件。

如果这不起作用，请制作一个自定义适配器并创建自己的`Filter`（您将在`getFilter()`适配器的方法中返回），它只是忽略过滤。

但我发现你想做的事情有点奇怪。

# java - AspectJ pointcut to method call (even if it's called on external libraries)

> ID：14218155
> 
> 赞同：1
> 
> 时间：2013-01-08T15:17:49.510
> 
> 标签：java, aop, aspectj, ajdt

I'm having some difficulties using AJDT. One of the things I would like to have it's a record of every method called on a given type, for instance, LinkedList. What I observed it's that using the pointcut below, I can just intersect method calls to any method called add to any instance that implements the Collection interface:

```
pointcut CollectionAddCallPointcut(): call(* java.util.Collection+.add(..)); 
```

As far as I can see, that excludes method calls made in external libraries, but those would be very usefull to me. How can I solve this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T04:33:47.957

你有两个选择：

1.  使用[加载时间编织](https://www.eclipse.org/aspectj/doc/next/devguide/ltw.html)。这将编织所有类，因为它们由类加载器加载。唯一的警告是编织到 jdk 类中是很棘手的。
2.  对要应用切入点的所有库执行编译时编织。

# android - Let eclipse / app 'forget' the previous layout?

> ID：14218156
> 
> 赞同：0
> 
> 时间：2013-01-08T15:17:54.977
> 
> 标签：android, eclipse, layout

Simple question: How do I let eclipse/my app forget the previous layout?

More specific: I would like my android app not to go back to the original or 'home' layout when pressing back after it went in fullscreen mode. Instead, it should close the app or just do nothing.

I hope the answer is simple too, there must be some code to block this?

thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:36:45.133

```
 @Override
 public boolean onKeyDown(int keyCode, KeyEvent event)  {
   if (keyCode == KeyEvent.KEYCODE_BACK) {

  //do whatever you want here

}} 
```

# gac - Why does GACUtil claim to install an assembly to the GAC but fail in reality?

> ID：14218158
> 
> 赞同：4
> 
> 时间：2013-01-08T15:18:05.580
> 
> 标签：gac

I have an assembly: **SomeAssembly.dll**

I have GACUtil's folder on my path: **C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin\NETFX 4.0 Tools**

I change to the folder where SomeAssembly.dll is, execute

```
GACUtil /i SomeAssembly.dll 
```

The response is:

```
Microsoft (R) .NET Global Assembly Cache Utility.  Version 4.0.30319.1
Copyright (c) Microsoft Corporation.  All rights reserved.

Assembly successfully added to the cache 
```

I check **C:\Windows\Assembly**, but my assembly does not appear to be there.

I return to my command window (which I note has **Administrator** rights) and type:

```
GACUtil /l SomeAssembly.dll 
```

and the response confirms...

```
Microsoft (R) .NET Global Assembly Cache Utility.  Version 4.0.30319.1
Copyright (c) Microsoft Corporation.  All rights reserved.

The Global Assembly Cache contains the following assemblies:

Number of items = 0 
```

So It seems SomeAssembly.dll is not in the GAC

**Why?**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T17:38:56.330

使用时不要`.dll`使用扩展名`gacutil /l`，它应该正确报告您的程序集。

另外，我怀疑可能会发生某种 32/64 位混淆。当您`C:\Windows\Assembly`通过 Windows 资源管理器查看时，您可能只看到 32 位 GAC。

[**更新：**看起来 .NET 4 将 GAC 程序集存储在其中，`C:\Windows\Microsoft.NET\assembly`因此您只能在 .NET 中看到 CLR v2.0 程序集`C:\Windows\assembly`。]

要查看 (v2 CLR) GAC 目录的真实内容，请在不使用 Explorer shell 扩展的情况下查看它 - 一种快速的方法是将驱动器映射到目录`subst`并通过它查看它，例如：

```
C:\>subst G: c:\Windows\assembly
C:\>start G: 
```

# java - How to handle Resource validation in REST webservices?

> ID：14218159
> 
> 赞同：21
> 
> 时间：2013-01-08T15:18:08.887
> 
> 标签：java, rest, jpa, jersey, bean-validation

I'm building a REST webservice in Java using Spring, Jersey and Hibernate (JPA).

Now I'm trying to add support for validation in my resources. JSR-303 (Bean validation) naturally appeared as a suitable choice (I'm using Hibernate Validator which is the reference implementation of JSR-303). However, I'm trying to consolidate some concepts first.

It seems to me that there are at least two kinds of possible validations:

*   **Regular validation on fields**, e.g. check that a property isn't null, check if a `String` property is a valid e-mail, check if an `Integer` property is greater than `10`, etc. This is working as expected. I've registered a JAX-RS ExceptionMapper which maps `javax.validation.ConstraintViolationException`'s into proper HTTP responses.
*   **Data Integrity Validation**

I'll explain what I mean exactly by "Data Integrity Validation" with an example. This happens when there are relationships between two or more resources. Imagine two resources: a `Product` and a `Category`. A `Product` **has** a `Category`. When the client sends to the server the representation of the `Product` to create (a POST HTTP request), it must inform the `Category` of the product. The client must know the categories beforehand, of course. Imagine in JSON something like:

```
{
   "quantity": "10",
   "state": "PRODUCED",
   "category": {
      "id": "123"
   }
} 
```

Well, the category with id `123` might not exist. If we try to insert this into the database, obviously we get a foreign key related exception. So I assume we have to validate these issues and return a proper message to the client, just as in regular property validations.

* * *

Now, my main questions are:

1.  Right now I'm performing the validation in the Data Access level, through JPA's integration with Bean Validation. Should the validations be done **before/after serializations processes**, **before/after database operations** or **both**?
2.  **How to handle *Data Integrity Validations*?** Manually? (i.e. explicitly consulting the database checking data integrity) Or should we just try to insert it anyway and then catch database (or DAO) exceptions? Bean Validation has nothing to do with this kind of validation, right?
3.  If you have any experience with JAX-RS/REST and Bean Validation I would be glad if you let me know. Using groups?

*These questions are somewhat related to Java, but I was also hoping to get some new perspectives on these matters. Some technology independent ones. :) It would be great if you could provide your own solutions for these problems on your REST webservices.*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T12:53:38.633

该解决方案最终成为`JacksonJaxbJsonProvider`实现 JAX-RS`MessageBodyReader`和`MessageBodyWriter`. 我受到了惊人[的 dropwizard 方法的](https://github.com/dropwizard/dropwizard/blob/master/dropwizard-jersey/src/main/java/io/dropwizard/jersey/jackson/JacksonMessageBodyProvider.java)启发。在这个提供程序中，我们需要以某种方式注入一个 Validator 实例（我使用 Spring 进行注入，使用 Hibernate Validator 进行 JSR-303 实现）。如果您使用 Hibernate ORM，请不要忘记禁用实体验证，否则您将验证同一个实体两次。不过，这可能是我们想要的。

然后，在这个 subclassed中，我验证对象并使用来自验证器的错误`MessageBodyReader`抛出一个自定义。`InvalidEntityException`我还创建了一个 JAX-RS `ExceptionMapper<InvalidEntityException>`，它将每个映射`InvalidEntityException`到正确的 HTTP 响应。在我的例子中，我返回了一个错误请求和一个包含错误描述的 JSON 对象。

请注意，此 MessageBodyReader 检查`@Valid`和`@Validated`注释。这意味着它正确地支持组。这很重要，因为我们可能不想在整个应用程序中进行相同类型的验证。一个例子是当我们想要进行部分更新（PUT）时。或者，例如，一个 id 属性在 POST 请求中必须为空，但在其他任何地方都非空。

数据完整性验证尚未完全处理。但是我计划捕获数据库异常并将它们转换为我自己的域异常（例如 a `DataIntegrityException`），因为它似乎更有效并且与我松散耦合。

* * *

**更新：**

从 JAX-RS 2 开始，推荐的方法是使用它的 Bean Validation 支持。在这里查看：[https ://jersey.java.net/documentation/latest/bean-validation.html](https://jersey.java.net/documentation/latest/bean-validation.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-21T10:01:46.647

您现在可以使用 Jersey 2.0 通过 JSR-303/JSR-349 验证资源参数。

[https://jersey.java.net/documentation/latest/bean-validation.html#d0e9301](https://jersey.java.net/documentation/latest/bean-validation.html#d0e9301)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T16:13:04.507

您可以使用`jersey filters`，您可以在其中对您的请求数据进行一些验证。

> 那么，id 为 123 的类别可能不存在。如果我们尝试将其插入数据库，显然我们会得到与外键相关的异常。

对于这种情况，可以依赖数据访问级别的验证。但是如果你想同步响应你的客户端，通常最好让这个业务逻辑通过一些服务 API 暴露出来。即你可能有一个类似的API `isValidCategory(int id)`，它可以在比DAO更高的级别上查询，这样你就不必等到数据访问层遇到错误/异常。显然，这仍然意味着数据库查找（取决于您的系统），但是使用缓存或其他机制优化它以改善您的响应时间是完全不同的问题。

谈到 bean 验证器，您可以看一下[Hibernate Validator](http://docs.jboss.org/hibernate/validator/4.0.1/reference/en/html_single/)，它是一个 JSR 303 实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-15T07:25:55.970

[Oval](https://sebthom.github.io/oval/)是评估对象的最佳包。生成单元测试断言和自动化测试非常有用。

# java - Android virtual device creation

> ID：14218160
> 
> 赞同：0
> 
> 时间：2013-01-08T15:18:16.020
> 
> 标签：java, android, eclipse

I am novice at android development. Have problem with creating Android Virtual Device (AVD). When I go to Eclipse -> Android Virtual Device Manager -> Device Definitions -> Choose any device from list -> Create AVD... window for AVD creation appears. However, for any options I have OK button unclickable. Why I face this problem? How can I solve it?

Thanks for any help in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:25:42.417

您必须在 AVD 创建窗口中选择兼容的目标版本才能启用 OK 按钮。如果您没有兼容版本，请尝试更新您的 SDK（如果没有）并安装所有可用更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T15:31:23.420

您必须使用 SDK 管理器下载所需的文件。确保目标匹配（如果您已下载 17 级 API，则必须选择 API lvl 17 作为新 AVD 的目标）几个小时前已[在此处回答了相同的问题](https://stackoverflow.com/questions/14216622/not-able-to-create-avd/14216721#14216721)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T15:33:36.940

确保您已设置“AVD 名称”、“RAM”、“VM 堆”和“内部存储”。还要确保您选择的设备与 Target API 兼容，新设备与旧 API 不兼容

# php - How to increase timeout for xDebug when debugging a php script

> ID：14218161
> 
> 赞同：0
> 
> 时间：2013-01-08T15:18:17.313
> 
> 标签：php, vim, xdebug, vim-plugin

I have a long script that I need to debug using the terminal (more than 300K lines).

Unfortunately after a minute or less it gives me a time out error message before reaching a breaking point.

This is the error message I get:

```
Connection closed, stop debugging (<class 'socket.timeout'>, timeout('timed out',), <traceback object at 0x248c9e0>) 
```

I use Vim in order to debug, it works fine when the break points are closer to the script's beginning.

I searched the [documentation](http://xdebug.org/docs/all) but I couldn't find where to set the time out.

UPDATE:

I use this [plugin](https://github.com/ludovicPelle/vim-xdebug) for vim and my xDebug version it's 2.1.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T09:17:14.473

我设法解决了这个问题 - 在 ~/.vim/plugin/debugger.py 的第 666 行或附近

```
socket.setdefaulttimeout(5) 
```

将其更改为更多

```
socket.setdefaulttimeout(15) 
```

这具有将超时从 5 秒更改为 15 秒的效果，这对我来说已经足够了，但对您而言，也许您想将其更改为

```
socket.setdefaulttimeout(30) 
```

30 秒。

此外 - 等待 Xdebug 连接的 5 秒超时让我非常恼火，所以我也将其更改为 15 - 这是在我的第 556 行

```
serv.listen(15) 
```

然后，我希望小连接消息也能反映这一点，所以我在第 551 行更新了这个（微不足道的）

```
print 'waiting for a new connection on port '+str(self.port)+' for 15 seconds...' 
```

# javascript - DIV 作为 CSS 属性

> ID：14218163
> 
> 赞同：0
> 
> 时间：2013-01-08T15:18:21.683
> 
> 标签：javascript, jquery, html, parallax

对于我即将到来的项目，我使用 parallaxjs 效果。如您所知，它使用多个 css 背景层来改变滚动位置。我想要的是，我使用 div 层而不是 css 定义的背景。

```
function Move(){ 
    var pos = $window.scrollTop(); //position of the scrollbar

    //if the first section is in view...
    if($firstBG.hasClass("inview")){
        //call the newPos function and change the background position
        $firstBG.css({'backgroundPosition': newPos(50, windowHeight, pos, 900, 0.3)}); 
    } 
```

有没有办法让一个 div 层（例如一个灯箱）而不是背景图像 css？感谢你的回答！

# c# - 添加指向外部数据库中表的外键

> ID：14218165
> 
> 赞同：2
> 
> 时间：2013-01-08T15:18:27.593
> 
> 标签：c#, entity-framework, mapping

我有带有（id，...）的数据库 ObjectTypes。我希望在我的模型（EF 4）中在某些表外键中添加来自我的数据库的引用以引用 objectTypes.dbo.ObjectTypes 字段。我怎样才能做到这一点？

```
 public class KOATUUContext : DbContext
{
    static KOATUUContext()
    {
        Database.SetInitializer<KOATUUContext>(null);
    }

    public KOATUUContext()
        : base("KOATUU")
    {
    }

    public DbSet<KOATUU> KOATUUs { get; set; }
    public DbSet<Region> Regions { get; set; }
    public DbSet<TerType> TerTypes { get; set; }
    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Configurations.Add(new KOATUUMap());
        modelBuilder.Configurations.Add(new RegionMap());
        modelBuilder.Configurations.Add(new TerTypeMap());
        base.OnModelCreating(modelBuilder);

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:22:42.553

我认为这也是不可能的，但这篇文章似乎用一个可行的解决方案讨论了同样的问题：

[使实体框架模型跨越多个数据库](https://stackoverflow.com/questions/6036357/making-an-entity-framework-model-span-multiple-databases)

# linux - 回滚生产部署

> ID：14218167
> 
> 赞同：1
> 
> 时间：2013-01-08T15:18:31.743
> 
> 标签：linux, deployment, continuous-deployment, continuous-delivery

我即将自动部署到测试服务器和生产。

我有一个 ci-server（构建、编译、junit）和一个工件存储库管理器（存储要部署/发布的构建）。

目前我可以使用脚本部署到测试服务器（使用 ci-server 执行）。当前没有回滚、数据库备份或数据库更新。所有服务器都有 Suse (linux)。

我想知道是否有更好的部署方式，具有回滚能力？也许是其他免费软件工具？否则，即使只是一些注释也有助于弄清楚我必须做些什么才能进行回滚并且不会弄乱生产。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T22:27:36.107

回滚包含关系数据库的应用程序非常棘手。传统上，这是通过在升级之前执行的备份恢复来完成的。

一种更现代的方法是将数据库迁移工具（例如[liquibase](http://www.liquibase.org/)）集成到应用程序的安装过程中。[liquibase](http://www.liquibase.org/)跟踪对数据库架构的每次更改，使其能够生成用于升级和回滚的脚本。

# postgresql - postgres 如何处理位数据类型？

> ID：14218170
> 
> 赞同：2
> 
> 时间：2013-01-08T15:18:35.800
> 
> 标签：postgresql, data-mining, vectorization, computation

*我有一个带有bit(2000)*类型的列*向量*的表。db 引擎如何处理此值的*AND*和*OR*操作？它是否只是简单地划分为 32 位块（或分别为 64 位），然后分别比较每个块，最后简单地将结果连接在一起？或者它只是作为两个字符串处理？

 ***我的意思是预测哪个用例会更快。我有一个键值数据（用户项）。

```
userID | itemID
U1     | I1
U1     | Ix
Un     | Ij 
```

对于每个用户，我想计算 n 个最近邻居的列表（例如，使用[jaccard 索引](http://en.wikipedia.org/wiki/Jaccard_index)）。

```
select my_jaccard(select itemID from table where userID=U1,select itemID from table where userID=U2) 
```

我的解决方案 - 我将输入数据解析为用户向量表，其中向量的类型为 bit(2000)，在表示特定项目的位置上为 1。

```
userID | vector
U1     | 00.......01
U1     | 0..1.....00
Un     | 00..1..1..0 
```

在这张桌子上我只是做

```
select vector1&vector2 
```

关键是每个用户最多只有 10 条记录的所有项目，即向量最多有 10 个活动位。我认为，解析整个位向量只是为了找到活动位需要更多的计算资源，而不是简单地将 user1 的这 10 个值与 user2 的 10 个值相互比较。

使用将很少位设置为 1 的长位向量是否更快，或者将原始值用作一个集合并将两个集合一起比较是否更好？（一套最多10个项目）

我同时使用 psql v8.2 和 v9.x

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T17:04:11.253

对位类型的位操作在内部处理为，呃，位操作。以下是“and”代码的作用，例如：

```
p1 = VARBITS(arg1);
p2 = VARBITS(arg2);
r = VARBITS(result);
for (i = 0; i < VARBITBYTES(arg1); i++)
    *r++ = *p1++ & *p2++; 
```

（所以它实际上是 8 位块。）

所以我认为这应该很快。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T17:04:17.923

源代码似乎是逐字节比较的。[在 PostgreSQL 源代码](http://doxygen.postgresql.org/)中搜索函数“bit_and”和“bit_or”。（我似乎没有直接链接到函数的自然方式。）

bit_and() 的摘录，varbit.c 的第 1205 到 1209 行

```
p1 = VARBITS(arg1);
p2 = VARBITS(arg2);
r = VARBITS(result);
for (i = 0; i < VARBITBYTES(arg1); i++)
    *r++ = *p1++ & *p2++; 
```***

# jsp - 在JSP中返回主页后登录用户的信息消失了

> ID：14218171
> 
> 赞同：0
> 
> 时间：2013-01-08T15:18:37.547
> 
> 标签：jsp, redirect, login

![在此处输入图像描述](../Images/e826c9768ce157be1ba210dff7202e5f.png)![在此处输入图像描述](../Images/450dee7a9d83f39b38b52ab6d78374cb.png)![在此处输入图像描述](../Images/15c6a92b40ae4a00feb7d69b5c01fbdd.png)

在以下代码中登录后，用户可以查看自己的信息，然后单击添加/删除或编辑按钮并重定向到相应的页面。但是在他编辑信息并按下“查看菜单”按钮后，他被重定向回来，但他的信息不再可见，只是表格的标题。从上到下的第一张图片是用户登录时的视图，第二张是他添加新菜单时的视图，第三张是当他再次进入主屏幕时发生的情况。用户添加信息后如何更新“查看菜单”。

```
<%@ page language="java" import="java.sql.*" import="java.text.*" errorPage="" %>
<%
String myname = (String)session.getAttribute("username");

Connection conn = null;
Class.forName("com.mysql.jdbc.Driver").newInstance();
conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/test","root",     "root");

ResultSet rsLoginFunction = null;
PreparedStatement psLoginFunction=null;

    String sUserID=request.getParameter("username");
String sPassword=request.getParameter("password");
String message="User login successfully ";

try{
  String sql = "SELECT menu.name, menu.info, menu.price FROM menu INNER JOIN clients ON     menu.username = clients.username where clients.username=? and clients.password=?";
psLoginFunction=conn.prepareStatement(sql);
psLoginFunction.setString(1,sUserID);
psLoginFunction.setString(2,sPassword);

rsLoginFunction=psLoginFunction.executeQuery();

session.setAttribute("username", sUserID);

if(rsLoginFunction.next())
{
  String username=rsLoginFunction.getString("menu.name")+"     "+rsLoginFunction.getString("menu.info");

 }
else
{
  message="No user or password matched" ;
  response.sendRedirect("Login.jsp?error="+message);
}
}
catch(Exception e)
{
    e.printStackTrace();
}

/// close object and connection
try{
     if(psLoginFunction!=null){
         psLoginFunction.close();
     }
     if(rsLoginFunction!=null){
         rsLoginFunction.close();
     }

     if(conn!=null){
      conn.close();
     }
}
catch(Exception e)
{
    e.printStackTrace();
}

%> 
```

这是客户信息页面

```
<%@ include file="include/common.jsp"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>

<script type="text/javascript">

function del() {
    if (confirm("Do You Want to Delete this Menu?")) {
    } else {
        return false;
    }
}
</script>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title></title>
<link rel="stylesheet" href="images/style.css" type="text/css"
charset="utf-8" />
</head>
<body>
<%

    menu_slno1 = request.getParameter("menu_slno");
    if (menu_slno1 != null)
        menu_slno = Integer.parseInt(menu_slno1);
    delete_menu = request.getParameter("delete_menu");

    if ("yes".equals(delete_menu)) {
        MenuId = request.getParameter("MenuId");
        x = stmt1
                .executeUpdate("Delete from menu where MenuId="
                        + MenuId);
    }
%>

<center><h2>VIEW MENU</h2></center>

<center><table width="736" height="97" border="1"></center>
    <%
        if (x == 1) {
    %>
    <tr bgcolor="gray">
        <th height="35" colspan="9"><div align="center">
                Menu deleted successfully!
            </div></th>
    </tr>
    <%
        }
    %>
    <tr bgcolor="gray">
        <td><div align="center">
                <strong>Menu ID</strong>
            </div></td>
        <td><div align="center">
                <strong>Name </strong>
            </div></td>
        <td><div align="center">
                <strong>Info</strong>
            </div></td>
        <td><div align="center">
                <strong>Price</strong>
            </div></td>
        <td colspan="2"><div align="center">
                <strong>Action</strong>
            </div></td>
    </tr>
    <%

     String sUserID=request.getParameter("username");
      session.setAttribute("username", sUserID);
        int icount = 0;
        rs = stmt.executeQuery("SELECT menu.menuID, menu.name, menu.info,     menu.price, menu.RestaurantID  FROM menu INNER JOIN clients ON menu.username =     clients.username where menu.username='" +sUserID+ "'");

        while (rs.next()) {
            //menu_slno = rs.getInt("menu_slno");
            MenuId = rs.getString("MenuId");
        %>
    <tr>
        <td><div align="center"><%=++icount%></div></td>

        <td><%=rs.getString("Name")%></td>
        <td><%=rs.getString("Info")%></td>
        <td><%=rs.getDouble("Price")%></td>

        <td><div align="center">
                <a href="edit_menu.jsp?MenuId=<%=MenuId%>">Edit</a>
            </div></td>
        <td><div align="center">
                <a
                    href="view_menu.jsp?delete_menu=yes&MenuId=    <%=MenuId%>&MenuId=<%=MenuId%>"
                    onclick="return del()">Delete</a>
            </div></td>
    </tr>
    <%
        }
    %>
</table>
<a href="add_menu.jsp">Add Menu</a>

</body>
</html> 
```

以及用户添加新信息的最后一页（不编辑或删除只是添加新信息）

```
<%@ include file="include/common.jsp"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title></title>
<link rel="stylesheet" href="images/style.css" type="text/css"
charset="utf-8" />

<script language="javascript">
function validate(menu) {

//  request.setAttribute("user","<username>");
//  String user=request.getAttribute("user");
//  while (username.equals(sUserID))

        if (menu.Name.value.length == 0) {
        alert("Please enter Menu Name!");
        menu.Name.focus();
        return false;
    }

    if (menu.Info.value.length == 0) {
        alert("Please enter Menu Info!");
        menu.Info.focus();
        return false;
    }

    if (menu.Price.value.length == 0) {
        alert("Please enter price!");
        menu.Price.focus();
        return false;

    }

    return true;

}
</script>

</head>
<body>

<h2>ADD MENU</h2>
<form name="menu" id="menu" action="db_add_menu.jsp"
    method="post" onSubmit="return validate(this)">
    <table width="332" height="252" border="0" align="center"
        cellpadding="2" cellspacing="2">
        <tr>
            <th height="33" colspan="2"><div align="center">
                    <%
                        menu = (String)     session.getAttribute("menu");
                        session.removeAttribute("menu");
                        if (menu != null)
                            out.print(menu);

                    %>
                </div></th>
        </tr>

        <tr>
            <th>Menu Name</th>
            <td><input name="Name" type="text" class="text"
                id="Name" value="" /></td>
        </tr>
        <tr>
            <th>Menu Info</th>
            <td><input name="Info" type="text" class="text"
                id="Info" value="" /></td>
        </tr>
        <tr>
            <th>Menu Price</th>
            <td><input name="Price" type="text" class="text"
                id="Price" value="" /></td>
        </tr>

        <tr>
            <td class="submission" colspan="2"><div align="center">
                    <input name="s" type="submit" class="button" value="ADD" /> <input
                        name="Reset" type="reset"     class="button" value="RESET" />
                </div></td>
        </tr>
        <tr>
            <th class="submission" colspan="2"><div align="center">
                    <a href="view_menu.jsp">View Menu</a>
                </div></th>
        </tr>
    </table>

</form>

</body>
</html> 
```

如果您需要，最后一页是添加信息的功能：

```
<%@ include file="include/common.jsp" %>

<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"     "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
body>

<%

 String myname = (String)session.getAttribute("username");

    MenuId = request.getParameter("MenuId");
    Name = request.getParameter("Name");
    Info = request.getParameter("Info");
    RestaurantID = request.getParameter("RestaurantID");

    menu_price1 = request.getParameter("Price");
    if (menu_price1 != null || !"".equals(menu_price1))
        Price = Double.parseDouble(menu_price1);

    pstmt = con
            .prepareStatement("Insert into     menu(MenuId,Name,Info,Price,RestaurantID) values(?,?,?,?,?)");
    pstmt.setString(1, MenuId);
    pstmt.setString(2, Name);
    pstmt.setString(3, Info);
    pstmt.setDouble(4, Price);
    pstmt.setString(5, myname);
    pstmt.executeUpdate();

    con.close();
    session.setAttribute("menu", "Menu added successfully");
    response.sendRedirect("add_menu.jsp");
%>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:40:01.013

问题似乎是您的初始 JSP 以两种不同的方式启动：

1) 当用户登录时，JSP 传递了用户凭据，如下所示：

```
String sUserID=request.getParameter("username");
String sPassword=request.getParameter("password"); 
```

2) 但是，当用户保存他/她的编辑时，我没有看到它们传递回初始 JSP。他们也不应该。在页面之间传递凭据不是一个好主意。

我的建议是重新考虑您的身份验证逻辑。通常这是在应用程序级别进行管理，而不是在每页的基础上进行管理。因此，虽然我不建议将此用于生产代码，但您可能能够摆脱以下情况：

*   成功登录后，将用户凭据保存在会话中。
*   首先检查会话的凭据。如果它们不存在，则检查请求参数。

# c++ - 如何在 C++ 中使用 waitformultipleobject

> ID：14218173
> 
> 赞同：0
> 
> 时间：2013-01-08T15:18:38.433
> 
> 标签：c++, windows, sockets, waitformultipleobjects

我正在尝试编写一个等待客户端连接的代码。一旦它连接到客户端，它应该开始读取文件并发送它。

我需要通知套接字句柄，即如果连接从客户端丢失，它会通知我，以便我可以尝试重新连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:16:09.213

如果连接丢失，则由*客户端*重新连接。服务器不连接或重新连接到客户端。

如果您的服务器只是分发一个文件，您需要做的就是接受连接并将它们传递给一个处理程序，该处理程序将在某个时候调用[TransmitFile()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740565%28v=vs.85%29.aspx)并进行清理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:21:41.600

我假设关于等待客户端连接和发送文件的部分只是为了澄清，你已经开始工作了。如果没有，那里有很多关于[套接字](http://www.c-worker.ch/tuts/wstut_op.php#winsockstarten)和[文件 I/O](http://www.cplusplus.com/doc/tutorial/files/)的教程。

在您的情况下，检测客户端是否仍然连接应该很简单。由于您的服务器在建立连接后立即发送文件，因此客户端将在套接字打开后立即开始读取。-function`read`阻塞，只要连接打开并且没有接收到数据。如果连接关闭，它将返回读取 0 字节。此时您知道连接已终止，您可以尝试重新连接。

如果您不是永久地从套接字读取但保持它打开以供将来通信，您应该查看[`select`-function](http://www.c-worker.ch/tuts/select.php#select)，它允许监视一个或多个套接字并在其中一个有更新时通知您（例如新数据可用或连接关闭）

# cordova - 将移动网站转换为 jQuery mobile + Phonegap

> ID：14218176
> 
> 赞同：-1
> 
> 时间：2013-01-08T15:18:48.453
> 
> 标签：cordova, jquery-mobile

我目前有一个移动网站，我正在将其转换为使用 jQuery mobile 和 Phonegap。这是我第一次同时使用 Phonegap 和 jQuery mobile。我正在使用 $.mobile.changePage('www.mysite.com/index.php'); 过渡到新页面。是否可以从 index.php 调用 Camera 函数，还是必须直接在本机 Phonegap 文件中调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:24:07.897

我认为这是可能的，但苹果不会批准你的应用程序。正确的方法是在本地拥有 html、css 和 javascript，并使用 XHR 调用从服务器获取 JSON 或 XML 数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T15:32:20.660

jQuery mobile 在PhoneGap 方面存在许多问题，性能不佳，页面导航不佳，其他方面也很糟糕......尝试另一个框架，尽管jqm 是可能的。

# android - 如何在更短的时间内解压缩大型 zip 文件并写入 SDCARD

> ID：14218178
> 
> 赞同：7
> 
> 时间：2013-01-08T15:18:48.483
> 
> 标签：android, iphone, android-ndk, zip, unzip

要解压缩 zip 文件，我通过引用[this](https://stackoverflow.com/questions/7697466/unzip-a-zipped-file-on-sd-card-in-android-application)使用了包 java.util.zip* 中的类，它可以正常工作，但是解压缩 40MB 的文件需要 59 秒。当我在 iPhone 项目上尝试相同的 zip 文件时（*我们正在为两个平台开发应用程序 - Android 和 iPone 并且具有解压缩 zip 文件并将解压缩的内容保存到 SDCARD-Android 或文档目录 - iPhone 的功能*），只需要 14 秒。iphone 应用程序使用[ziparchive](http://code.google.com/p/ziparchive/)。

所以我的问题是：

1.从上面的实验可以看出，Java 中对 SDCARD 的解压和文件写入操作比 iPhone 应用程序消耗更多时间，所以我决定使用 C/C++ 级别的使用 NDK 的解压和文件写入操作。这是正确的选择吗？

2.我在 google、stackoverflow 和一些建议使用[minizip](http://www.winimage.com/zLibDll/minizip.html)上进行了搜索，但对于如何在 android 中使用 minizip 没有足够的帮助。有人尝试过适用于 android 的 minizip 吗？

3.我还尝试**了libz的NDK开发**来实现我的目标，因为Libz被添加到NDK中但不知道如何使用它。有人在 NDK 中尝试过 libz 吗？

4.Java 或 C/C++ 中是否有任何其他框架可以解压缩大型 zip 文件并在更短的时间内将它们写入 SDCARD？

请帮我。

**这是我的 Java 解压缩代码：**

```
public String unzip() {

    String result;

    try {

        FileInputStream fin = new FileInputStream(this.filePath);
        ZipInputStream zin = new ZipInputStream(fin);
        ZipEntry ze = null;

        while ((ze = zin.getNextEntry()) != null) {

            Log.v("Unzip", "Unzipping " + ze.getName());

            if (ze.isDirectory()) {
                _dirChecker(ze.getName());
            } else {

                // Read 16 k at a time 
                byte[] buffer = new byte[16*1024];
                 int read;

                FileOutputStream fout = new FileOutputStream(this.location+ "/" + ze.getName());

                while ((read = zin.read(buffer)) != -1)
                {
                    fout.write(buffer, 0, read);
                }

                zin.closeEntry();
                fout.close();
            }

        }

        zin.close();
        result = "success";

    } catch (Exception e) {
        Log.e("unzip", "unzip", e);
        result = "failure";
    }

    return result;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T12:58:14.487

你为什么不试试这个代码。它工作得很棒

```
 String zipname = "data.zip";
FileInputStream fis = new FileInputStream(zipname);
ZipInputStream zis = new ZipInputStream(new BufferedInputStream(fis));
ZipEntry entry;

while ((entry = zis.getNextEntry()) != null) {
  System.out.println("Unzipping: " + entry.getName());

  int size;
  byte[] buffer = new byte[2048];

  FileOutputStream fos = new FileOutputStream(entry.getName());
  BufferedOutputStream bos = new BufferedOutputStream(fos, buffer.length);

  while ((size = zis.read(buffer, 0, buffer.length)) != -1) {
    bos.write(buffer, 0, size);
  }
  bos.flush();
  bos.close();
}
zis.close();
fis.close(); 
```

}

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T01:00:43.723

所有的解压缩代码最终都在 zlib 中。Android 核心库中没有“deflate”压缩的 Java 实现。

java.util.Zip 应该比“本机”解压缩慢的唯一原因是文件 I/O 做得不好，例如某些东西正在使用非常小的缓冲区。查看从问题链接的代码，这正是正在发生的事情——它在单个字节上运行。

关于该解决方案的评论之一提供了一个使用 4K 缓冲区的补丁。把它放进去，看看你的表现会发生什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T15:42:47.070

尝试将 40Mb 文件写入 SDCard 并测量花费的时间。（几乎）所有 zip 存档支持库的免费（甚至付费）实现都基于相同的 zlib 代码，这在解压缩过程中占用了大部分处理速度。Java 代码应该比原生代码慢得多，所以我建议尝试 NDK 解压缩。此外，尝试以零压缩级别解压缩存档将使您猜测解压缩代码需要多少时间以及仅在数据复制上花费多少时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-10T11:04:30.430

```
public boolean unzip(String zipfilepath, String destinationdir) {

            try {
                FileInputStream fis = new FileInputStream(zipfilepath);
                ZipInputStream zis = new ZipInputStream(new BufferedInputStream(fis));
                ZipEntry entry;

                while ((entry = zis.getNextEntry()) != null) {
                  System.out.println("Unzipping: " + entry.getName());

                  int size;
                  byte[] buffer = new byte[2048];

                  FileOutputStream fos = new FileOutputStream(destinationdir+ "/" + entry.getName());
                  BufferedOutputStream bos = new BufferedOutputStream(fos, buffer.length);

                  while ((size = zis.read(buffer, 0, buffer.length)) != -1) {
                    bos.write(buffer, 0, size);
                  }
                  bos.flush();
                  bos.close();
                }
                zis.close();
                fis.close();
                return true;
                }catch(Exception e){
                    return false;
                }
        }

String zipfilepath = context.getFilesDir().getPath()+"/"+myfile.zip;
String  destinationdir = context.getFilesDir().getPath();

unzip(zipfilepath, destinationdir); 
```

# php - 提交所有表单字段时如何在codeigniter中上传图像？

> ID：14218185
> 
> 赞同：0
> 
> 时间：2013-01-08T15:19:14.427
> 
> 标签：php, html, image, codeigniter, upload

我想知道如何在使用 codeigniter 时上传图像并将其名称保存在数据库中，我为此使用了简单的表单标签，例如，

```
 <form  action="" name="add" enctype="multipart/form-data" method="post">

   <label for="img">Image: </label> <input type="file" name="image" />

   <label for="title">Title: </label> <input type="text" name="photo_title" value="" />

   <label for="description">Description: </label>
   <textarea name="photo_description">   </textarea>

   <label for="photo_category">Category </label>
     <select name="photo_category">
          <option value="select_one">Please Select..</option>
           <option value="fun">Fun</option>
      </select>
     <input type="submit" value="Add" />

   </form> 
```

我检查了手册，但无法理解他们在做什么，请任何人帮助我为此创建一个控制器功能，该功能将在数据库中插入所有值并上传图像文件。

谢谢，沙鲁克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:55:13.520

通过使用

```
 $this->upload->initialize($config); 
```

代替

```
 $this->load->library('upload', $config); 
```

谢谢，

沙鲁克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T15:31:21.860

```
public function upload() {

    $this->load->library('form_validation');

    $this->form_validation->set_rules('photo_title', 'Photo Title', 'required');
    $this->form_validation->set_rules('photo_description', 'Photo Description', 'required');
    $this->form_validation->set_rules('photo_category', 'Photo Category', 'required');

    if ($this->form_validation->run() == TRUE) {

        $data = array(
               'photo_title' => $this->form_validation->set_value('photo_title'),
               'photo_description' => $this->form_validation->set_value('photo_description'),
               'photo_category' => $this->form_validation->set_value('photo_category'),,
        );
        $this->db->insert('table_name', $data);

        // Start Upload Picture
        if (!empty($_FILES['image']['name'])) {
            $config['upload_path'] = ''.$_SERVER['DOCUMENT_ROOT'].'/upload_path/';
            $config['allowed_types'] = 'gif|jpg|png';
            $config['max_size'] = '5000';
            $config['max_width']  = '2000';
            $config['max_height']  = '2000';
            $config['encrypt_name'] = TRUE;
            $config['remove_spaces'] = TRUE;

            $this->load->library('upload', $config);

            if ($this->upload->do_upload('image')) {

                $data = array('upload_data' => $this->upload->data());
                $data = $this->upload->data();

                $this->db->select('id');
                $this->db->from('table_name');
                $this->db->order_by('id', 'DESC');
                $this->db->limit(1);
                $query = $this->db->get();
                $row = $query->row();

                $data1 = array(
                   'shirt' => $data['file_name'],
                );
                $this->db->where('id', $row->id);
                $this->db->update('table_name', $data1);

            }

        }

    };

} 
```

# c - 为什么不接受（）阻止？

> ID：14218188
> 
> 赞同：4
> 
> 时间：2013-01-08T15:19:25.270
> 
> 标签：c, linux, sockets, tcp

我是 Linux (UNIX) 套接字下的套接字编程新手。我在 Internet 上找到了以下代码，用于为每个连接生成一个线程的 tcp 服务器。但是它不起作用。accept() 函数立即返回，并且不等待连接。我究竟做错了什么 ？

这是代码

```
int main(int argv, char *args[])
{
    struct sockaddr_in addr;
    int sd, port;

    port = htons(SERVER_PORT);

    /*--- create socket ---*/
    sd = socket(PF_INET, SOCK_STREAM, 0);
    if ( sd < 0 )
        panic("socket");

    /*--- bind port/address to socket ---*/
    memset(&addr, 0, sizeof(addr));
    addr.sin_family = AF_INET;
    addr.sin_port = port;
    addr.sin_addr.s_addr = INADDR_ANY;                   /* any interface */
    if ( bind(sd, (struct sockaddr*)&addr, sizeof(addr)) != 0 )
        panic("bind");

    /*--- make into listener with 10 slots ---*/
    if ( listen(sd, 10) != 0 )
        panic("listen")

    /*--- begin waiting for connections ---*/
    else
    {   int sd;
        pthread_t child;
        FILE *fp;

        while (1)                         /* process all incoming clients */
        {
            sd = accept(sd, 0, 0);     /* accept connection */
            fp = fdopen(sd, "wr+");           /* convert into FILE* */
            pthread_create(&child, 0, servlet, fp);       /* start thread */
            pthread_detach(child);                      /* don't track it */
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T15:21:53.350

您正在隐藏`sd`变量，传递一个无效的套接字`accept()`，导致它立即失败。

它可能会返回`EBADF`以指示错误的文件描述符。如果您检查代码中的返回值，您会注意到。

您应该启用更多编译器警告，以捕获此类内容。使用 GCC，您可以使用该`[-Wshadow](http://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#index-Wshadow-395)`选项来启用此类警告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T15:21:53.547

您没有检查`accept()`call 的返回值。它很可能会返回错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T15:22:48.437

有一个 sd 变量的重新定义

```
int sd; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T15:31:11.607

一些问题：

1) 你在 panic("listen") 上少了一个逗号

2）您声明“sd”两次（一次在 main() 一次在 else）

```
#include <stdio.h>
#include <pthread.h>
#include <sys/socket.h>
#include <sys/types.h>
#include <netinet/in.h>
#include <netinet/ip.h>

#define SERVER_PORT 30000

int main(int argv, char *args[])
{
    struct sockaddr_in addr;
    int sd, port;

    port = htons(SERVER_PORT);

    /*--- create socket ---*/
    sd = socket(PF_INET, SOCK_STREAM, 0);

    /*--- bind port/address to socket ---*/
    memset(&addr, 0, sizeof(addr));
    addr.sin_family = AF_INET;
    addr.sin_port = port;
    addr.sin_addr.s_addr = INADDR_ANY;                   /* any interface */

    bind(sd, (struct sockaddr*)&addr, sizeof(addr));

    /*--- make into listener with 10 slots ---*/
    listen(sd, 10);

    /*--- begin waiting for connections ---*/
    pthread_t child;
    FILE *fp;

    while (1)                         /* process all incoming clients */
    {
        printf("before accept\n");
        sd = accept(sd, 0, 0);     /* accept connection */
        fp = fdopen(sd, "wr+");           /* convert into FILE* */
        //pthread_create(&child, 0, servlet, fp);       /* start thread */
        //pthread_detach(child);                      /* don't track it */
        printf("After accept\n");
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T15:46:18.913

它们是对变量 sd 的重新定义。

```
int sd; // at line 3 and 26 
```

# excel - 导出到 CSV 会导致#name？

> ID：14218195
> 
> 赞同：1
> 
> 时间：2013-01-08T15:19:38.620
> 
> 标签：excel, csv, formatting

我有一个 excel 文件，其中有很多带有值的文件。我有一些如下所示的值：

++++comme ca

现在，当我将此文件转换为 .csv 时，使用 excel 2010 它转换为 =++++comme ca，通过添加等号并将 is 作为公式处理并显示 #name?。

您知道如何使用实际显示的值导出到 csv。我尝试了很多方法，将其保存为 xls，然后代替 xlsx 进行操作。我什至尝试将列转换为文本格式，但这仍然不起作用

这方面的任何线索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T15:22:55.067

文本格式不会更改字段中的基本值，仅用于显示目的。如果您想强制将某些内容视为纯文本，则需要在值前面加上 a `'`，例如`'++++ comme ca`。`'`它将告诉 Excel**不要**尝试将该值解释为公式或其他特殊值 - 它只会吐出“字符串”。

# android - Android 视频从 ADT/eclipse 播放，但当我正常启动我的应用程序时不播放

> ID：14218199
> 
> 赞同：0
> 
> 时间：2013-01-08T15:20:05.363
> 
> 标签：android, eclipse, video, adt

我有一个测试应用程序，它在启动时只播放视频，当我从 ADT/eclipse 启动应用程序时它按预期工作，但是当我从 Nexus 7 上的应用程序列表中正常打开应用程序时，它不会播放视频直到我将平板电脑旋转到水平...（只要您更改方向，它就会重新启动视频，但视频不会自行启动）

这是代码：

```
 public class MainActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.activity_main);
     VideoView video = (VideoView) findViewById(R.id.myvideo);
     video.setVideoPath("/sdcard/head.3gp");
     video.requestFocus();
     video.start();
    }
} 
```

我已经用模拟器和运行 Jelly Bean 的 Nexus 7 对此进行了测试，

问题：为什么通过 ADT 启动时行为会有所不同？我是否错过了 ADT 为我做的需要进行的初始化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:53:11.573

当您从设备运行应用程序时，它可能只是在后台暂停，因此会自行恢复，而不是从头开始。要强制应用程序从头开始启动，请尝试通过设置菜单强制停止应用程序，然后重新启动它。

也就是说，让应用程序从暂停状态恢复是大多数设备上极为常见的事件，因此您需要确保当用户从后台状态恢复应用程序时，您的应用程序行为正常，而不仅仅是从新启动.

# wpf - ObservableCollection 也在 Catch 之后删除项目

> ID：14218203
> 
> 赞同：0
> 
> 时间：2013-01-08T15:20:27.727
> 
> 标签：wpf, observablecollection, entity-framework-5

我的项目是 WPF 项目，我使用以下代码删除 SelectedProducer 表单 ProducerCollection (ObservableCollection)。

```
 try
   {
       context.Producers.Remove(SelectedProducer);
       context.SaveChanges();
   }
   catch
   {
       messageService.Show("Error");
   } 
```

这是我的收藏和 SelectedProducer 属性：

```
 public ObservableCollection<DAL.Domain.Producer> ProducerCollection
    {
        get { return GetValue<ObservableCollection<DAL.Domain.Producer>>(ProducerCollectionProperty); }
        set { SetValue(ProducerCollectionProperty, value); }
    }
    public static readonly PropertyData ProducerCollectionProperty = RegisterProperty("ProducerCollection", typeof(ObservableCollection<DAL.Domain.Producer>));

    [Model]
    public DAL.Domain.Producer SelectedProducer
    {
        get { return GetValue<DAL.Domain.Producer>(SelectedProducerProperty); }
        private set { SetValue(SelectedProducerProperty, value); }
    }
    public static readonly PropertyData SelectedProducerProperty = RegisterProperty("SelectedProducer", typeof(DAL.Domain.Producer)); 
```

但通过这种方式，当发生错误时，集合也会删除 SelectedProdcuer。如何处理这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:26:58.933

这种行为是意料之中的——你从集合中删除一个项目，如果数据库调用失败，它就不会神奇地重新出现。您可以手动将项目重新插入到 catch 块中，或者从数据库中重新获取整个集合。

您也可以重试保存，直到成功，但在没有任何上下文的情况下很难判断最佳选择是什么。

# c# - LdapConnection 和 LDAPS 出现错误 0x80005000

> ID：14218204
> 
> 赞同：0
> 
> 时间：2013-01-08T15:20:28.807
> 
> 标签：c#, asp.net, ldap, ldapconnection

在开始之前，我已经[使用 LDAPS 连接访问了未知错误 (0x80005000)](https://stackoverflow.com/questions/9993928/unknown-error-0x80005000-with-ldaps-connection)并更改了我的代码，虽然它确实解决了问题，但它似乎*神秘*地回来了。

这是好东西：

```
public static bool Authenticate(string username, string password, string domain)
{
    bool authentic = false;

    try
    {
        LdapConnection con = new LdapConnection(
            new LdapDirectoryIdentifier(Host, Port));
        if (IsSSL)
        {
            con.SessionOptions.SecureSocketLayer = true;
            con.SessionOptions.VerifyServerCertificate = ServerCallback;
        }
        con.Credential = new NetworkCredential(username, password);
        con.AuthType = AuthType.Basic;
        con.Bind();
        authentic = true;
    }
    catch (LdapException)
    {
        return false;
    }
    catch (DirectoryServicesCOMException)
    { }
    return authentic;
}

public static bool IsSSL
{
    get
    {
        return ConnectionString.ToLower().Contains("ldaps");
    }
}

public static string ConnectionString
{
    get
    {
        if (string.IsNullOrEmpty(_connectionString))
            _connectionString = CompleteConfiguration.GetLDAPConnectionString();

        return _connectionString;
    }
    set { _connectionString = value; }
}

public static int Port
{
    get
    {
        var x = new Uri(ConnectionString);
        int port = 0;
        if (x.Port != -1)
        {
            port = x.Port;
        }
        else
        {
            port = x.OriginalString.ToLower().Contains("ldaps")
                       ? 636
                       : 389;
        }
        return port;
    }
}

public static string Host
{
    get
    {
        var x = new Uri(ConnectionString);
        return x.Host;
    }
}

private static bool ServerCallback(LdapConnection connection, X509Certificate certificate)
{
    return true;
} 
```

这是坏事：当我尝试对应用程序进行身份验证时，我收到以下错误，确切地说这是由 con.Bind() 行触发的：

[COMException (0x80005000): 未知错误 (0x80005000)] System.DirectoryServices.DirectoryEntry.Bind(Boolean throwIfFail) +378094 System.DirectoryServices.DirectoryEntry.Bind() +36 System.DirectoryServices.DirectoryEntry.get_NativeObject() +31 Complete.Authentication .GCAuthentication.Authenticate(String username, String password, String domain) 在 c:\Builds\6\Idealink.Open.Pancanal\Panama Canal\Sources\Idealink.Open\Complete.Authentication\GCAuthentication.cs:27 Complete.Authentication。 AuthenticationFactory.ValidateUserLdap(String username, String password, String domain, Boolean isValid, String usernameWithDomain) 在 c:\Builds\6\Idealink.Open.Pancanal\Panama Canal\Sources\Idealink.Open\Complete.Authentication\AuthenticationFactory.cs： 93

这很令人困惑，因为似乎某些用户帐户有效而其他用户帐户无效。但是，当我将上述代码放在一个隔离的测试环境中时，它每次都会成功，无论我使用哪个帐户。当我将它放回带有 ASP.NET 和 IIS 的 Windows 2008 R2 服务器时，它如上所述失败。但失败是一致的——账户总是失败或成功，从这个角度来看，没有随机性。

LDAP 服务器必须使用 LDAPS 而不是 LDAP 访问，这就是我们不能使用 DirectoryEntry 对象的原因 - LDAP 服务器由客户端控制，因此不能以任何方式重新配置或更改。我们只是想在 Web 表单上捕获用户名/密码，然后在 LDAP 服务器上使用 BIND 来检查凭据。

我们正在使用 .NET 3.5，目前无法升级，所以我恭敬地询问，如果您的主要建议和论点是升级，那么请推迟您的贡献。

谢谢，希望能帮到你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:04:59.360

像这样的东西对你有用吗..？

```
const string Domain = "ServerAddress:389";
const string constrParts = @"OU=Users,DC=domain,DC=com";
const string Username = @"karell";
PrincipalContext principalContext = new PrincipalContext(ContextType.Domain, Domain, constrParts);
UserPrincipal userPrincipal = UserPrincipal.FindByIdentity(principalContext,  username); 
```

这是一个非常好的站点，可以提供很好的参考和示例 [DirectoryServices DirectoryEntry](http://www.java2s.com/Code/CSharp/Web-Services/DirectoryServicesDirectoryEntry.htm)

对于 SSL 连接，您可以执行以下操作

```
const int ldapInvalidCredentialsError = 0x31;
const string server = "your_domain.com:636";
const string domain = "your_domain.com";

try
{
    using (var ldapSSLConn = new LdapConnection(server))
    {
        var networkCredential = new NetworkCredential(username, password, domain);
        ldapSSLConn.SessionOptions.SecureSocketLayer = true;
        ldapSSLConn.AuthType = AuthType.Negotiate;
        ldapSSLConn.Bind(networkCredential);
    }

    // If the bind succeeds, the credentials are valid
    return true;
}
catch (LdapException ldapEx)
{
    // Invalid credentials a specific error code
    if (ldapEx.ErrorCode.Equals(ldapInvalidCredentialsError))
    {
        return false;
    }

    throw;
} 
```

[MSDN 无效 LDAP 错误代码列表](http://support.microsoft.com/kb/218185)

# ffmpeg - 处理带空格的文件名时，我的媒体转换器应用程序崩溃

> ID：14218205
> 
> 赞同：0
> 
> 时间：2013-01-08T15:20:30.960
> 
> 标签：ffmpeg, wxpython

我编写了一个使用 ffmpeg 转换媒体文件（.wav、.avi、.mp3 等）的应用程序。它仅适用于没有空格的文件名。当遇到带有空格的文件名时，应用程序会立即关闭。有人能告诉我我用来调用 ffmpeg 的字符串是否正确，还是需要转义一些字符？下面是代码片段：

```
...
...
...

#Select Media
os.chdir("c:\\d-Converter\\ffmpeg\\bin")
wrkdir = os.getcwd()
filelist = os.listdir(wrkdir)
self.formats1 = []

for filename in filelist:
    (head, filename) = os.path.split(filename)
    if filename.endswith(".avi") or filename.endswith(".mp4") or filename.endswith(".flv") or filename.endswith(".mov") or filename.endswith(".mpeg4") or filename.endswith(".mpeg") or filename.endswith(".mpg2") or filename.endswith(".wav") or filename.endswith(".mp3"):
            self.formats1.append(filename)
    self.format_combo1=wx.ComboBox(panel, size=(140, -1),value='Select Media', choices=self.formats1, style=wx.CB_DROPDOWN, pos=(300,50))

    self.Bind(wx.EVT_COMBOBOX, self.fileFormats, self.format_combo1)

...
...
...

def fileFormats(self, e):
    myFormats = {'audio': ('Select Format','.mp3', '.ogg', '.wav', '.wma'), 'video': ('Select Format','.flv','.mpg', '.mp4', '.mpeg')}
    bad_file = ['Media not supported']
    myFile = self.format_combo1.GetValue()
    f_exten = (x for x in myFormats['audio'] + myFormats['video'] if myFile.endswith(x))
    extension = f_exten.next()

    if extension in myFormats['audio']:
        self.format_combo2.SetItems(myFormats['audio'])

    elif extension in myFormats['video']:
        self.format_combo2.SetItems(myFormats['video'])
    else:
        self.format_combo2.SetItems(bad_file)
...
...
...

def convertButton(self, e):

    unit1 = self.format_combo1.GetValue()
    if unit1:
        unit1 = self.repl_Wspace(unit1)

    #Media Formats
    unit2 = self.format_combo2.GetValue()
    unit3 = self.format_combo3.GetValue()
    unit4 = None
    unit5 = self.format_combo5.GetValue()
    bitRate = self.format_combo6.GetValue()
    unit6 = bitRate
    if unit3 == '-qmax':
        unit4 = self.format_combo4.GetValue()
    else:
        pass

    os.chdir("c:\\d-Converter\\ffmpeg\\bin")
    wrkdir = os.getcwd()

    newfile = unit1
    stripped = newfile.strip('mpeg3aviovfl4w2c.') #Strips the extension from the original file name

    progname='c:\\d-Converter\\ffmpeg\\bin\\ffmpeg.exe' + ' -i '

    preset1_a='-vn -ar 44100 -ac 2 -ab'
    preset1_b='-f mp3 '
    preset_mp3='.mp3'

    chck_unit1 = self.my_endswith(unit1)

    while True:    
        if unit5 == 'video to mp3':

            if unit6 == 'k/bs' or unit6 == '':
                amsg = wx.MessageDialog(None, 'You must select a bit rate.', 'Media Converter', wx.ICON_INFORMATION)
                amsg.ShowModal()
                amsg.Destroy()
                break

            elif unit5 == 'video to mp3' and unit6 != 'k/bs' or unit6 != '':
                self.button.Disable()
                self.button2.Enable()
                self.format_combo1.Disable()
                self.format_combo2.Disable()
                self.format_combo3.Disable()
                self.format_combo4.Disable()
                self.format_combo5.Disable()
                self.format_combo6.Disable()
                startWorker(self.LongTaskDone, self.LongTask3, wargs=(progname, wrkdir, unit1, preset1_a, unit6, preset1_b, stripped, preset_mp3))
                break
            elif unit1 != unit1.endswith(".mpg") or unit1.endswith(".mpeg") or unit1.endswith(".avi") or unit1.endswith(".mp4") or unit1.endswith(".flv"):
                bmsg = wx.MessageDialog(None, 'You must select a valid format to convert to .mp3.', 'Media Converter', wx.ICON_INFORMATION)
                bmsg.ShowModal()
                bmsg.Destroy()
                break

        else:
            pass

        if unit1 == 'Select Media' or unit1 == '':
            amsg = wx.MessageDialog(None, 'You must select a media file!', 'Media Converter', wx.ICON_INFORMATION)
            amsg.ShowModal()
            amsg.Destroy()
            break

        elif unit2 == 'Select Format' or unit2 == '' or unit2 == chck_unit1:
            amsg = wx.MessageDialog(None, 'You must select a valid format', 'Media Converter', wx.ICON_INFORMATION)
            amsg.ShowModal()
            amsg.Destroy()
            break

        elif unit3 == 'Select Quality' or unit3 == '':
            amsg = wx.MessageDialog(None, 'You must select quality', 'Media Converter', wx.ICON_INFORMATION)
            amsg.ShowModal()
            amsg.Destroy()
            break

        elif unit3 != 'Select Quality' or unit3 != '':
            self.format_combo5.Disable()

            if unit3 == '-qmax':
                if unit4 == '0' or unit4 == '':
                    amsg = wx.MessageDialog(None, 'You must select number between 1-8.', 'Media Converter', wx.ICON_INFORMATION)
                    amsg.ShowModal()
                    amsg.Destroy()
                    break
                else:
                    self.button.Disable()
                    self.button2.Enable()
                    self.format_combo1.Disable()
                    self.format_combo2.Disable()
                    self.format_combo3.Disable()
                    self.format_combo4.Disable()
                    self.format_combo5.Disable()
                    startWorker(self.LongTaskDone, self.LongTask2, wargs=(progname,wrkdir,unit1,unit3,unit4,stripped,unit2))
                    break
            elif unit3 == '-sameq':
                self.button.Disable()
                self.button2.Enable()
                self.format_combo1.Disable()
                self.format_combo2.Disable()
                self.format_combo3.Disable()
                self.format_combo4.Disable()
                self.format_combo5.Disable()
                startWorker(self.LongTaskDone, self.LongTask, wargs=(progname,wrkdir,unit1,unit3,stripped,unit2))
                break   

def LongTask(self, progname, wrkdir, unit1, unit3, stripped, unit2):
    convert_file1 = progname + wrkdir + '\\' + unit1 + ' ' + unit3 + ' ' + stripped + unit2
    self.statusbar.SetStatusText("Converting: " + unit1 + "...")
    os.system(convert_file1)
    print convert_file1

def LongTask2(self, progname, wrkdir, unit1, unit3, unit4, stripped, unit2):
    convert_file2 = progname + wrkdir + '\\' + unit1 + ' ' + unit3 + ' ' + unit4 + ' ' + stripped + unit2
    self.statusbar.SetStatusText("Converting: " + unit1 + "...")
    os.system(convert_file2)

...
...
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:26:12.480

不要`os.system`用来执行你的命令。相反，使用`subprocess`, 将每个参数作为参数列表中的单独条目：

```
import subprocess
progname='c:\\d-Converter\\ffmpeg\\bin\\ffmpeg.exe'
subprocess.check_call([progname, '-i', ... other args here]) 
```

这将确保您的参数不会被错误地解释，并且不易受到注入攻击。

# java - Java - Collection.remove() 在不同的条件下表现不同

> ID：14218209
> 
> 赞同：1
> 
> 时间：2013-01-08T15:20:40.603
> 
> 标签：java, collections, iterator

这是对我之前的问题的跟进：

[集合 - Iterator.remove() 与 Collection.remove()](https://stackoverflow.com/questions/14200489/collection-iterator-remove-vs-collection-remove)

下面两段代码，显然只有一行不同，但一个抛出异常，另一个不抛出异常。你能解释一下区别吗？

```
 List<String> list = new ArrayList<String>
(Arrays.asList("noob1","noob2","noob3"));

System.out.println(list);

for (String str : list) {
    if (str.equals("noob2")) {
        list.remove(str);
    }
} 
```

运行良好，但如果我将条件更改为

```
if (!str.equals("noob2")) 
```

代码抛出异常！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T15:24:48.413

在这种情况下会发生什么是您正在删除第二个列表元素。

```
List<String> list = new ArrayList<String>
        (Arrays.asList("noob1", "noob2", "noob3", "noob4"));

System.out.println(list);

for (Iterator<String> iterator = list.iterator(); iterator.hasNext(); ) {
    String str = iterator.next();
    if (str.equals("noob3")) {
        System.out.println("Checking "+str);
        list.remove(str);
    }
}
System.out.println(list); 
```

印刷

```
[noob1, noob2, noob3, noob4]
Checking noob1
Checking noob2
Checking noob3
[noob1, noob2, noob4] 
```

通过删除倒数第二个元素，您将大小减少到您已迭代的元素数量。

```
// from ArrayList.Itr
    public boolean hasNext() {
        return cursor != size;
    } 
```

这会导致循环在执行并发修改检查之前提前退出`next()`。如果您删除任何其他元素`next()`，则会调用并获得 CME。

顺便说一句，也绕过检查的东西是

```
for (Iterator<String> iterator = list.iterator(); iterator.hasNext(); ) {
    String str = iterator.next();
    System.out.println("Checking "+str);
    if (str.equals("noob2")) {
        list.remove("noob1");
        list.remove("noob3");
    }
} 
```

只要集合的大小与它所达到的索引相同，就不会执行检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T15:23:51.763

for 循环只是列表迭代器扫描的简化语法。如果列表在其下被修改，迭代器可能会抛出异常，但不能保证。由于 hasNext，迭代器通常会提前处理一个元素，从而使第一种情况不太可能受到列表修改的影响。当“noob2”被移除时，迭代器已经知道“noob3”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T15:23:53.597

我想这个例外是因为你试图改变你正在循环的集合......而不是因为`if`条件。

我建议您创建一个仅包含验证条件的项目的**新列表。**将它们添加到新列表中，避免更改原始集合。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T15:29:31.140

实际上，您永远不应该在“随意”迭代期间删除集合的元素。当您必须在某个循环中修改您的集合时，您必须使用`iterator`它们来进行这些操作。

```
 public class Test {
        public static void main(String... args) {
            List<String> list = new ArrayList<String>(Arrays.asList("noob1", "noob2", "noob3"));

            System.out.println(list);

            for (Iterator<String> iterator = list.iterator(); iterator.hasNext();) {
                String str = iterator.next();
                if (!str.equals("noob2")) {
                    iterator.remove();
                }
            }
            System.out.println(list);
        }
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-08T15:32:36.413

这是因为您正试图从`Collection`您当前正在迭代的对象中删除。做一个小的改动，你可以做你想做的事：

```
 String[] strValues = {"noob1","noob2","noob3"}; // <<< Array
 List<String> list = new ArrayList<String>(Arrays.asList(strValues));

 System.out.println(list);

 for (String str : strValues) { // << List is duplicate of array so can iterate through array
     if (!str.equals("noob2")) {
         list.remove(str);
     }
 } 
```

那应该行得通。希望

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-08T15:33:32.740

好吧，您的第一个案例不会抛出异常，因为当您删除索引 1 处的元素时，迭代器在索引 2 处为 Iterator.hasNext() 返回 false。

```
Iterator<String> itr = list.iterator();
    while(itr.hasNext()){
        String s= itr.next();
        if(s.equals("noob2")){
            list.remove(s); // size of the list is 2 here 
            System.out.println(itr.hasNext());// this returns false as it doesn't have anything at index 2 now.(on 2nd iteration )
        }
    } 
```

您可以使用简单的 for 循环清楚地测试它：

```
for (int i=0; i<list.size(); i++) {
        if (list.get(i).equals("noob2")) {
            System.out.println(list.get(i));
            System.out.println(list.size());
            list.remove(list.get(i));
            System.out.println(list.size());
        }
    } 
```

输出：

```
[noob1, noob2, noob3]
noob2
3
2 
```

注意删除元素后列表的大小，增加后失败。**2<2**这是错误的

# css - 将 :nth-of-type 应用于伪选择器而不是类或元素类型（没有 jQuery 甚至 JS）

> ID：14218213
> 
> 赞同：3
> 
> 时间：2013-01-08T15:20:53.253
> 
> 标签：css, css-selectors, pseudo-class

我有这个：

```
<ol>
<li class="letter">
<li class="letter">
<li>
<li>
<li>
<li>
<li>
<li>
<li>
<li>
<li>
<li>
<li>
<li>
</ol> 
```

我希望不属于“字母”类的前 9 个 li 元素以某种方式设置样式。所以，我的想法是，我选择那些不是“字母”类的，然后选择使用`nth-of-type`：

```
li:not(.letter):nth-of-type(-n+9):before { ... } 
```

但是，这会选择前 9 个而不考虑类，我使用的结果相同：

```
li:nth-child(-n+9):before { ... } 
```

我看到了基于`E:nth-of-type`和进行选择的示例`.c:nth-of-type`。怎么就停在那里了？`nth-of-type`为什么我不能像关闭元素或类一样使用关闭伪类来构建选择？（或者我能以某种方式吗？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T15:25:32.480

因为这里的“类型”一词`:nth-of-type()`特指“元素类型”，仅此而已。

即使是你看到的符合`:nth-of-type()`类选择器的例子也做错了。它们实际上是通过其元素类型的第 n 个兄弟而不是其类来匹配的。类选择器的意思是“只有当它有这个类时才匹配这个元素”，并且在计算兄弟姐妹时实际上并没有考虑。这就是为什么您在示例中使用两个选择器获得相同结果的原因。

使用当前的选择器规范，您无法选择与选择器的复杂组合匹配的第 n 个同级，因此在不了解或控制 HTML 结构的情况下，使用 CSS 目前无法实现您想要实现的目标。当然，如果您知道只有前两个`li`元素将拥有该类，那么您可以这样做

```
li:nth-child(n+2):nth-child(-n+9)::before { ... } 
```

但是，如果您的 HTML 结构会有所不同，那么这并不是很有用。

[`:nth-match()`在 Selectors 4 中针对此特定目的提出](http://www.w3.org/TR/selectors4/#the-nth-match-pseudo)了建议，但还没有关于实现的消息。所以现在，当谈到纯 CSS 时，你不走运。

# razor - 这里使用哪种算法对密码进行哈希处理？

> ID：14218214
> 
> 赞同：2
> 
> 时间：2013-01-08T15:21:02.730
> 
> 标签：razor, asp.net-mvc-4, security, hash-function

我正在使用 Webmatrix.WebData.Security 库来控制我网站的登录/注册功能。CreateUserAndAccount() 方法对用户提供的密码进行哈希处理，并将其存储在表 pages_Membership 中。我无法理解该方法如何对其进行哈希处理。有人可以帮我指出正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T15:33:12.560

假设您使用的是 SimpleMembershipProvider，您可以在 CodePlex 上查看源代码。

实际代码在[System.Web.Helpers.Crypto](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/1962da8fcfe4#src/System.Web.Helpers/Crypto.cs)`HashPassword`的方法中

# java - 如何将 java GAE local_db.bin 从一台计算机复制到另一台计算机？

> ID：14218217
> 
> 赞同：0
> 
> 时间：2013-01-08T15:21:03.907
> 
> 标签：java, google-app-engine, gwt, google-cloud-datastore

我正在和朋友一起开发一个 Web 应用程序。他启动了该项目，并且拥有用于测试的正确本地数据存储。我需要将此数据存储复制到我的本地应用程序，但不知道如何。我已经尝试将他的`local_db.bin`and复制`datastore-indexes-auto.xml`到我的`appengine-generated`文件夹中，但没有成功。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:46:22.207

您描述的问题通常发生在应用程序的新版本与 local_db.bin 文件不兼容时，或者当您升级到新的 App Engine SDK 时。

最好的解决方案是使用 Mercurial 或 Git，并在存储库中包含 local_db.bin 文件。然后您可以签入所有更改，它将使 local_db.bin 与代码更改保持同步。还要确保团队的所有成员都使用相同的 SDK。

# ruby-on-rails-3 - 如何在 Rails 引擎中创建关注点？

> ID：14218223
> 
> 赞同：7
> 
> 时间：2013-01-08T15:21:14.810
> 
> 标签：ruby-on-rails-3, ruby-on-rails-plugins

我正在尝试在引擎内部创建一个关注点，以便在将安装此引擎的主应用程序中添加/覆盖此功能。问题是我遇到了问题，包括引擎模块中的问题。Rails 似乎找不到它。

这是我的`post.rb`文件`app/models/blorgh/post.rb`：

```
module Blorgh
  class Post < ActiveRecord::Base
    include Blorgh::Concerns::Models::Post
  end
end 
```

这是我`post.rb`关心的问题`lib/concerns/models/post.rb`：

需要'active_support/关注'

```
module Concerns::Models::Post
  extend ActiveSupport::Concern

  # 'included do' causes the included code to be evaluated in the
  # conext where it is included (post.rb), rather than be 
  # executed in the module's context (blorgh/concerns/models/post).
  included do
    attr_accessible :author_name, :title, :text
    attr_accessor :author_name
    belongs_to :author, class_name: Blorgh.user_class
    has_many :comments

    before_save :set_author

    private
    def set_author
      self.author = User.find_or_create_by_name(author_name)
    end
  end

  def summary
    "#{title}"
  end

  module ClassMethods
    def some_class_method
      'some class method string'
    end
  end
end 
```

当我运行测试/虚拟对象时，我得到了这个错误：未初始化的常量 Blorgh::Concerns

这是我的 blorgh.gemspec：

```
$:.push File.expand_path("../lib", __FILE__)

# Maintain your gem's version:
require "blorgh/version"

# Describe your gem and declare its dependencies:
Gem::Specification.new do |s|
  s.name        = "blorgh"
  s.version     = Blorgh::VERSION
  s.authors     = ["***"]
  s.email       = ["***"]
  s.homepage    = "***"
  s.summary     = "Engine test."
  s.description = "Description of Blorgh."

  s.files = Dir["{app,config,db,lib}/**/*"] + ["MIT-LICENSE", "Rakefile", "README.rdoc"]
  s.test_files = Dir["test/**/*"]

  s.add_dependency "rails", "~> 3.2.8"
  s.add_dependency "jquery-rails"

  s.add_development_dependency "sqlite3"
end 
```

有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-09T23:57:03.887

使用引擎时，您需要跟踪加载顺序，尤其是在更改主应用程序的行为时。假设你的引擎被称为“engine_name”，你应该有这个文件：**engine_name/lib/engine_name/engine.rb**。这是包含您的关注的一个地方。

```
Bundler.require

module EngineName
  class Engine < ::Rails::Engine
    require 'engine_name/path/to/concerns/models/post'

    initializer 'engine_name.include_concerns' do
      ActionDispatch::Reloader.to_prepare do
        Blorgh::Post.send(:include, Concerns::Models::Post)
      end
    end

    # Autoload from lib directory
    config.autoload_paths << File.expand_path('../../', __FILE__)

    isolate_namespace EngineName
  end
end 
```

这样你可以确保一切都正常加载，但是使用 Concerns 时要非常小心，并且可能通过重构 Blorgh::Post 来重新考虑使用依赖注入来处理不同的配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T01:22:15.780

This is happening because in Rails 3 the lib directory is not being automatically looked at to find classes. Your can either update config.autoload_paths to add the lib directory to it in the engine or you can move concerns/models/post.rb out of the lib directory and into app/models where it will be automatically found.

# vb.net - 如何在 VB 中以编程方式编辑 SSIS 包？

> ID：14218229
> 
> 赞同：1
> 
> 时间：2013-01-08T15:21:40.907
> 
> 标签：vb.net, ssis

我们已经创建了一个作为 SSIS 包的工作流程，并希望找到一种访问此代码的方法，以便通过 vb.net 我们可以动态访问和运行该代码。例如，我们想更改正在使用的数据源，或者更改现有包的列映射，然后从 vb.net 应用程序执行它们。请告知执行此操作的最佳方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:44:14.937

您会发现有些任务很容易，而有些则不然。

一般来说，您会对阅读[集成服务开发人员指南](http://msdn.microsoft.com/en-us/library/ms136025.aspx)感兴趣。特别感兴趣的是以编程方式[构建包](http://msdn.microsoft.com/en-us/library/ms345167.aspx)和以编程方式[运行和管理包](http://msdn.microsoft.com/en-us/library/aa337077.aspx)。

例如，从 VB.NET[运行包](http://msdn.microsoft.com/en-us/library/ms136090%28v=sql.105%29.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)

```
Imports Microsoft.SqlServer.Dts.Runtime

Module Module1

  Sub Main()

    Dim pkgLocation As String
    Dim pkg As New Package
    Dim app As New Application
    Dim pkgResults As DTSExecResult

    pkgLocation = _
      "C:\Program Files\Microsoft SQL Server\100\Samples\Integration Services" & _
      "\Package Samples\CalculatedColumns Sample\CalculatedColumns\CalculatedColumns.dtsx"
    pkg = app.LoadPackage(pkgLocation, Nothing)
    pkgResults = pkg.Execute()

    Console.WriteLine(pkgResults.ToString())
    Console.ReadKey()

  End Sub
End Module 
```

要以编程方式更改连接管理器，它相当于 VB.NET

```
ConnectionManager item = ep.Connections["MyConnectionManagerName"]
item.ConnectionString = @"Provider=SQLNCLI10.1;Data Source=Server1;Initial Catalog=ABC;Integrated Security=SSPI;"; 
```

改变列映射，这就是有趣的地方，对于有趣的词的所有定义。我有一个提炼的例子，但它需要一些工作，你会想要真正理解整个对象模型（我希望你喜欢 COM）。[EzAPI](http://sqlsrvintegrationsrv.codeplex.com/releases/view/21238)可能会在该领域提供一些帮助。

# websphere - webshpere 应用程序服务器未将状态更改为已启动

> ID：14218230
> 
> 赞同：0
> 
> 时间：2013-01-08T15:21:44.323
> 
> 标签：websphere, startup

我在 RAD 中创建了新的 WAS 6.0 和 6.1 服务器，它们开始正常，我在 WAS 控制台中收到文本“Server1 open for business”。但他们不会在服务器选项卡中将其状态更改为“已启动”。

只有当状态更改为“已启动”时，我才能发布我的应用程序。我严重卡在这里..有人请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T06:55:36.653

问题已经解决了！

双击 RAD 中的 WAS 服务器并在属性窗口中，将“服务器连接类型和管理端口”从 RMI 更改为 SOAP。现在服务器在启动时应该正常运行。

我不确定它是如何工作的，但这解决了问题：D

# css - IE8 不显示嵌入的网络字体——在任何网站上

> ID：14218231
> 
> 赞同：3
> 
> 时间：2013-01-08T15:21:46.893
> 
> 标签：css, internet-explorer-8, webfonts, embedded-fonts

据我了解，IE 8 应该显示嵌入字体，但是我的版本替换了通用字体——不仅用于我的代码，而且在其他网站上，即使 CSS 被正确地 IE 破解（例如，[此示例](http://www.alistapart.com/d/css3-bling-in-the-real-world/examples/blingv2.html)显示所有 IE -我的属性（阴影等），嵌入字体除外）。

我想知道IE8中是否有会导致这种情况的设置？我在一个严重锁定的工作计算机上（这就是我使用 IE8 的原因），所以这可能与它有关，尽管我不确定为什么这会特别影响字体。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T15:28:55.057

来自[http://msdn.microsoft.com/en-us/library/ms533034(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms533034(v=vs.85).aspx)

*   在查看菜单上，单击选项，然后单击安全选项卡。
*   选择自定义并单击设置。
*   滚动到下载部分。
*   将字体下载设置从禁用更改为启用。

# php - iCal 与数据库同步

> ID：14218232
> 
> 赞同：0
> 
> 时间：2013-01-08T15:21:48.930
> 
> 标签：php, iphone, calendar, icalendar, caldav

假设我有一个生成 iCal 日历 (file.ics) 的 PHP 文件，我将这个文件导入到我的智能手机中。

我的问题是：如何将智能手机上所做的更改与托管 iCal 文件的服务器同步？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:28:30.817

同步不像导入数据那样简单明了，这里不能用“简单的步骤”来描述。iPhone 上有一个 API 可以访问日历数据，通过它你应该检查数据，了解哪些记录在本地和远程服务器上被更改，并决定要复制什么、删除什么、哪里有冲突等。

# ruby-on-rails - Rails 3 - 搜索、HABTM 和分类

> ID：14218233
> 
> 赞同：1
> 
> 时间：2013-01-08T15:21:51.297
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我正在使用 RailsCasts (#111) 中的高级搜索表单，但我想添加在带有集合复选框的子类别中搜索的可能性。

```
class Category < ActiveRecord::Base
  # post_id, food_id, pet_id
class Food < ActiveRecord::Base
  # id, name
class Pet < ActiveRecord::Base
  # id, name
class Post < ActiveRecord::Base
  # id, title. 
```

在我的 search.rb 模型中，我尝试了：

```
posts = posts.where(food_ids: food_ids) if food_ids.present? 
```

我创建了一个名为：Subcategorysearch.rb 的新模型，与 Categoty.rb 完全相同，但它仅用于搜索请求。里面有：post_id、food_id、pet_id。

无论有没有新模型，我总是得到：

ActiveRecord::StatementInvalid in Searches#show SQLite3::SQLException：没有这样的列：posts.food_ids

提前谢谢。

**编辑**：

当我创建一个新帖子时，子类别不在帖子表中，而是在类别表中。我需要使帖子搜索能够使用集合复选框过滤子类别。

**编辑 2**

我尝试了很多东西，但我觉得我有点迷路了。

“真正的”问题是执行像 Railscasts #111 - Advanced Search Form 之类的搜索引擎，并使用带有“分类”的 Railscasts #17 - HABTML Checkboxes 之类的东西。

我需要的最终结果是，例如：搜索帖子并能够使用复选框集合过滤结果：

```
Post tile = My first post
Food = Name 1
Pet = Name 2 
```

...

然后，仅显示包含“我的第一篇文章”之类的标题、“名称 1”之类的食物或 ID 之类的帖子，对于宠物也是如此。

再次，提前感谢您的支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:26:51.920

您在 where 子句键中使用`food_ids`而不是。`food_id`从错误中您可以理解，posts 表没有 food_ids 列，它有一个 food_id 列。

尝试：

```
posts = posts.where(food_id: food_ids) if food_ids.present? 
```

# grails - 尝试在 Grails 中保存 DomainObject 时，ID 设置为 NULL

> ID：14218234
> 
> 赞同：0
> 
> 时间：2013-01-08T15:21:50.873
> 
> 标签：grails, grails-orm, grails-2.0

我有两个与下面的类 Foo 具有相同结构的域对象

```
class Foo {

    static mapping = {
        id column: "old_id_column"
        prop1 column: "old_prop_1"
        ... some more properties ...
    }
}

class Bar {
    ... looks the same as Foo ...
} 
```

在类的控制器中，我尝试完成同样的事情，创建一个新对象并将其保存到数据库中。

当我这样做时

```
class FooController {

    def methodName() {
        final Foo foo = new Foo()
        foo.prop1 = "val1"
        foo.prop2 = val2
        etc.

        foo.save(flush: true)
    }
} 
```

一切正常，但是当我尝试在 BarController 中执行相同操作时，出现以下异常

**无法将值 NULL 插入列“old_id_column”、表“System.db.Bar”；列不允许空值。**

我正在尝试对遗留数据库进行建模，所以很明显我在底层数据库的配置中遗漏了一些东西，但我找不到任何东西。关于可能引发此异常的事情的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T16:02:55.167

您需要指定一个生成器

IE

```
id generator:'assigned', column: 'old_id_column', type: 'string' 
```

请参阅文档@http: [//grails.org/doc/latest/ref/Database%20Mapping/id.html](http://grails.org/doc/latest/ref/Database%20Mapping/id.html)

# visual-studio-2012 - 为什么 Visual Studio 2012 和 ReSharper 7 忘记显示 Intellisense 工具提示？

> ID：14218237
> 
> 赞同：5
> 
> 时间：2013-01-08T15:21:53.687
> 
> 标签：visual-studio-2012, resharper, intellisense

我注意到我的 VS2012 安装中有一个奇怪的行为。我使用 VS2012 Pro 和 ReSharper 7。Intellisense 只是不再显示代码建议。我在研究中发现了一些相关问题，但它们的设置总是略有不同，没有一个可以解决我的问题：

***Intellisense 正在工作，但它不再显示`tooltip`关于选定的成员函数/属性。***

如果我看一下 C# Text Editor Settings

```
Tools -> Options -> Text Editor -> C# -> General 
```

大多数情况下，两个必要的框**自动列表成员**和**参数信息**被选中。但是，Intellisense 中的代码建议不起作用。有时，当我查看所描述的设置时，它们是**unselected**。

选择它们将使代码建议像在 VS2010 中一样工作，但只有一次。当我之后检查设置时，它们很可能仍被选中，但代码建议不再起作用。

有些人建议删除`%AppData%\Roaming\Microsoft\VisualStudio\11.0`文件夹，这对我不起作用。我还尝试重置所有更改，这也没有任何帮助。

```
Tools -> Import and Export Settings -> Reset 
```

到底是什么让 Visual Studio*忘记*了它的设置并触发了这种不合理的行为？

**-编辑-**

我按`CTRL`++显示代码`Alt`建议`Space`。但是，每次我想查看建议时，我都必须按下该快捷方式。如果可能，每次都必须能够自动显示它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:52:09.743

我遇到了类似的问题，但我一直忽略了一个小的 ReSharper Intellisense 设置。我会仔细检查你是否`Symbol completion`在

> 锐化 | 选项 | 智能感知 | 完成字符

用截图查看[答案](https://stackoverflow.com/a/14462608/3619)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T14:56:50.153

感谢所有提示，我弄清楚了我所缺少的：

我必须启用“完成外观”->“显示摘要”。

我也接受了 Anthonys 的回答，因为他链接到了一个详细的帖子，其中包含显示所有必要步骤的屏幕截图。（虽然那里没有提到我缺少的东西）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T06:59:28.297

ReSharper 使用它自己的代码建议来覆盖 Visual Studio 的建议，这可能是 Visual Studio 设置中的建议可能被禁用的原因。请在 ReSharper -> 选项 -> 环境 -> IntelliSense 中检查 ReSharper 选项。也许他们在那里被关闭了。如果您的 ReSharper 选项已打开但您仍然没有智能感知，请访问[http://www.jetbrains.com/support/获得 ReSharper 的支持](http://www.jetbrains.com/support/)

# c# - 从基类继承并将继承类型提供给被覆盖的方法

> ID：14218239
> 
> 赞同：2
> 
> 时间：2013-01-08T15:21:58.117
> 
> 标签：c#, inheritance

我有一个基类，它的方法可以被覆盖。如果我从这个基类继承一个类，我怎样才能让方法返回继承的类型？

喜欢：

```
public class ClassA : BaseClass
{
    public override ClassA TestMethod(...)
    {
        // ...
    }   
} 
```

我需要手动向基类提供类型吗？或者我可以让它自动提供那种类型吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T15:26:18.453

您可以使用泛型类型来执行此操作。

```
public class BaseClass<T> where T : BaseClass<T> {
    public abstract T TestMethod(...);
}

public class ClassA : BaseClass<ClassA>
{
    public override ClassA TestMethod(...)
    {
        // ...
    }   
} 
```

你为什么需要它？可能会导致更合适的答案...

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-08T16:10:09.170

您想要的功能有一个名称；这是**返回类型协方差**。

C# 不支持它的原因如下：

[为什么 C# 在实现接口时不允许继承返回类型](https://stackoverflow.com/questions/1319663)

其他答案都建议您使用 C# 版本的奇怪重复模板模式来解决您的问题。我的观点是，这种模式带来的问题多于解决的问题。有关详细信息，请参阅我关于该主题的文章：

[http://blogs.msdn.com/b/ericlippert/archive/2011/02/03/curiouser-and-curiouser.aspx](http://blogs.msdn.com/b/ericlippert/archive/2011/02/03/curiouser-and-curiouser.aspx)

解决此问题的更好方法是使用此模式：

```
abstract class Animal
{
    protected abstract Animal ProtectedGetMother();

    public Animal GetMother()
    {
      return this.ProtectedGetMother();
    }
}
class Cat : Animal
{
    protected override Animal ProtectedGetMother()
    {
      do the work particular to cats here
      make sure you return a Cat
    }
    public new Cat GetMother()
    {
      return (Cat)this.ProtectedGetMother();
    }
 } 
```

问题是您不能覆盖具有不同返回类型的虚拟方法。所以不要。创建一个具有不同返回类型的全新方法，*并使虚拟方法成为类层次结构的实现细节*。

`Cat : Animal<Cat>`这种技术比这种“猫是猫的动物”的胡说八道要容易理解大约十亿倍。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T15:29:52.233

您可以以通用方式执行此操作：

```
public abstract class Base
{
    public abstract T AbstractTestMethod<T>() where T : Base;

    public virtual T VirtualTestMethod<T>() where T : Base, new()
    {
        return new T();
    }
}

public class ClassA : Base
{
    public override ClassA AbstractTestMethod<ClassA>()
    {
        return new ClassA();
    }

    public override ClassA VirtualTestMethod<ClassA>()
    {
        return new ClassA();
    }
} 
```

使用虚拟方法的行为不像使用抽象方法那么严格。使用抽象方式，您可以强制开发人员自行实现该方法。使用虚拟方式，您可以告诉他们诸如*“满足我的约束并随意使用默认行为”之*类的内容。

# oracle - ORA-01861: 使用存储过程时文字与格式字符串不匹配

> ID：14218243
> 
> 赞同：-1
> 
> 时间：2013-01-08T15:22:12.623
> 
> 标签：oracle

我正在尝试在存储过程中执行以下语句

```
execute immediate 'insert into tmp_vw(TMP_SRC, SNAP_DATE) 
                   select TMP_SRC,Max(SNAP_DATE) as SNAP_DATE 
                   from tmp_demand group by TMP_SRC' 
```

> ORA-01861: 文字与格式字符串不匹配

SNAP_DATE 的类型为 Date，值的格式为“2001-01-01”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:31:57.430

您必须将 TMP_DEMAND.SNAP_DATE 作为 varchar2。

例如。

```
SQL> create table tmp_vw(TMP_SRC varchar2(20), SNAP_DATE date);

Table created.

SQL> create table tmp_demand(TMP_SRC varchar2(20), SNAP_DATE varchar2(20));

Table created.

SQL> alter session set nls_date_format ='yyyy-mm-dd';

Session altered.

SQL> insert into tmp_demand select 'a', sysdate from dual;

1 row created.

SQL> alter session set nls_date_format ='dd/mm/yyyy';

Session altered.

SQL> insert into tmp_vw(TMP_SRC, SNAP_DATE) select TMP_SRC,Max(SNAP_DATE) as SNAP_DATE from tmp_demand group by TMP_SRC;
insert into tmp_vw(TMP_SRC, SNAP_DATE) select TMP_SRC,Max(SNAP_DATE) as SNAP_DATE from tmp_demand group by TMP_SRC
                                                      *
ERROR at line 1:
ORA-01861: literal does not match format string 
```

您也需要将临时表更改为最新以避免错误。

# java - 将值从 JSP 传递到 Struts 中的动作类

> ID：14218249
> 
> 赞同：0
> 
> 时间：2013-01-08T15:22:28.547
> 
> 标签：java, struts, liferay, struts-config

在下面的代码示例中，我试图将 param1 值从我的 jsp 传递给 myaction 类。当用户单击文件号时，我试图传递文件号以及 param1 值。

```
<display:table   name="sessionScope.List" requestURI="${urlRepDetails}" pagesize='<%= pagesize %>' sort="list" class="displaytag" defaultsort="3" defaultorder="ascending"  >
<display:column href="/myaction.do?param1=xyz"paramId="fileNumber" paramProperty="fileNumber" property="fileNumber" title= 'fileNumber" %>' sortable="true" headerClass="sortable" class="tabel-border"/>
</display:table> 
```

在我的行动课上，我正在做的是：

```
if(request.getParameter("param1")=="xyz"){
String REQUEST_NO = request.getParameter("fileNumber");
nextView=callMethod(mapping, form, request, response, REQUEST_NO);
} 
```

但是值 param1 没有传递，并且在单击超链接时控件甚至没有转到动作类。我的应用程序是在 liferay 中设计的。通常我将动作类称为

```
<display:table   name="sessionScope.List" requestURI="${urlDetail}" pagesize='<%= pagesize %>' sort="list" class="displaytag" defaultsort="3" defaultorder="ascending"  >
    <display:column href="${urlDetails}"paramId="fileNumber" paramProperty="fileNumber" property="fileNumber" title= 'fileNumber" %>' sortable="true" headerClass="sortable" class="tabel-border"/>
    </display:table> 
```

在我的jsp中我也有：

```
<liferay-portlet:renderURL var="urlDetails">
  <liferay-portlet:param name="_xyz" value="/myaction.do" />
  <liferay-portlet:param name="table_select" value="abcd" />
</liferay-portlet:renderURL> 
```

在行动类中：

```
if(request.getParameter("table_select")!=null && request.getParameter("table_select").equals("abcd")){
                        String REQUEST_NO = request.getParameter("fileNumber");
                        nextView = callMethod(mapping, form, request, response, REQUEST_NO); 
```

我需要知道如何将值直接从 href 传递给我的动作类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-28T15:10:25.497

您给出的 ActionClass 路径似乎有问题

/myaction.do

确保您在 href 中提供的路径相对于 struts-config 文件是正确的。

# php - 使用 .submit 和漂亮的 url 调用页面 jquery

> ID：14218250
> 
> 赞同：0
> 
> 时间：2013-01-08T15:22:29.693
> 
> 标签：php, jquery, url-rewriting

我需要从搜索栏中调用一个 php 页面，只使用漂亮的 url 而没有 ?q=blahblah 参数。

```
<form id='searchForm' method="GET" action="/search/">
   <input type="text" name="q" id='idInputWhat' value='' />
   <input id='formSubmit' type="submit" value="go"/>
</form>

$('#formSubmit').on('click', function(e) {
// some validations here
..
// submit
$('#searchForm').submit();
}); 
```

这将生成一个 URL，例如：example.com/search/?q=blahblah 我的目标是生成一个 URL，例如 example.com/search/q/blahblah

我在想类似的东西

```
 $('#formSubmit').on('click', function(e) {
     var nice_url = encodeURIComponent($("#idInputWhat").val());
     $('#searchForm').attr('action', 'search/'+nice_url);
     $("#idInputWhat").remove();
    // submit
    $('#searchForm').submit();
}); 
```

但它似乎不起作用，我不确定这是最好的方法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:28:18.983

如果您要刷新页面，为什么不这样做：

```
$('#formSubmit').on('click', function(e) {
    var nice_url = encodeURIComponent($("#idInputWhat").val());
    window.location = 'search/' + nice_url;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T15:59:54.690

我刚刚发现 .on() 不起作用.. 它可以与 .live() 一起使用，即使它已被弃用并且我正在使用 jquery 1.8。

# jquery - jQuery 点击处理程序性能 - 附加到类或每个元素

> ID：14218256
> 
> 赞同：1
> 
> 时间：2013-01-08T15:23:12.570
> 
> 标签：jquery, performance, click, handler

所以我通过 ajax 加载了 x 行数据。在每一行的末尾，我添加了一个编辑按钮，该按钮将有一个点击处理程序来//做一些事情。

```
$newTr.append(
    $("<img/>", {
        title: "edit task",
        "class": "edit clickable changeTask",
        src: "../../images/edit.png"
    })
) 
```

我应该将点击处理程序附加到类：

```
$(document).on("click", ".changeTask", function(){ //do stuff 
```

或者我应该将它附加到每个img：

```
$newTr.append(
    $("<img/>", {
        title: "edit task",
        "class": "edit clickable changeTask",
        src: "../../images/edit.png",
        click: function() {
            //do stuff
        }
    })
) 
```

注意：这是一个严格的性能问题。两种方式都有效。另外，如果您能指出一种自己测试这种事情的方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T15:25:48.003

用你的话来说，“将它附加到课堂上”会更快。

请注意，您实际上正在做的是将单个处理程序附加到，该处理程序通过使用事件冒泡来侦听在任何元素`document`上触发的事件。`.changeTask`

这与第二个示例不同，在第二个示例中，您将单独的事件处理程序附加到*每个* `<img />`.

这里唯一潜在的性能影响是如果您要触发*数千个*事件`click`，因为处理程序`document`必须检查每个事件以查看它是否相关。如果可能，将处理程序尽可能靠近元素（因为它必须过滤更少的垃圾）。 *这在 99.99999% 的情况下是无关紧要的。*

# python - Python：建议如何组织 Python 项目。一些问题

> ID：14218259
> 
> 赞同：0
> 
> 时间：2013-01-08T15:23:13.710
> 
> 标签：python, coding-style

首先感谢，我知道堆栈溢出充满了这个论点（但我们可以考虑一个审查问题）。我有一些关于组织 Python 项目的问题。

从这个[链接](https://stackoverflow.com/questions/391879/organising-my-python-project)我找到了这个不错的模式

```
/myproject
   /__init__.py # This makes it a Python package and importable.
   /evaluate.py # Contains the code to actually do calculations.
   /main.py # Starts the application
   /ui.py # Contains the code to make a pretty interface 
```

从这个[网站](http://effbot.org/pyfaq/what-is-init-py-used-for.htm) `__init__.py`通常是空的

我的问题是：

1.  假设你有一个函数（def foo）。foo 位于 evaluate.py 还是 main.py？
2.  如果 foo 位于`main.py`（或`evaluate.py`）evaluate.py（或 main.py）包含什么？
3.  有时我发现`utilities.py`和/或`module.py`。什么实用程序.py/module.py 包含？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:29:26.837

从我的编码风格：： `main.py`总是做一些简单的事情，从外部环境初始化变量并加载配置文件。并包装实际的逻辑事物。例如：

```
from evaluate import actual_things
def run():
    ...
    actual_things()
    ...

if __name__ == '__main__':
    init()
    load_from_config()
    run() 
```

问：有时我会找到utilities.py 和/或module.py。什么实用程序.py/module.py 包含？- 答：：`utilities.py`或`utils.py`经常是帮手。如编解码、加密等。

问：如果 foo 位于 main.py（或评估.py）中，评估.py（或 main.py）包含什么？A:你必须指出 foo 是做什么的，根据 foo 的功能，我们将 foo 定位到某个地方。如果 foo 是业务相对函数，则 foo 应该位于 evaluate.py 中。

问：假设你有一个函数（def foo）。foo 位于 evaluate.py 还是 main.py？答：见上文。

最后，我认为最好的了解方法是从整体上学习一个项目。您将知道 QA 无法提供什么帮助。

# php - 如何检查一个类是否属于某个命名空间

> ID：14218261
> 
> 赞同：7
> 
> 时间：2013-01-08T15:23:16.003
> 
> 标签：php, oop, namespaces

我想知道 PHP 是否提供了一种本地方式来检查一个类（实例）是否属于某个命名空间。

这并不重要，只是为了让您了解我是如何提出这个问题的：

使用 ZF2，我有一个事件处理程序`onDispatch`。但是，对于任何模块的任何控制器的*每次分派都会调用此处理程序。**显然，如果这个*模块的控制器正在被调度，我只想在这个处理程序中执行一个动作。

所以我想检查控制器是否在我模块的命名空间内。

顺便说一句，我使用类名（`strpos($className, 'ModuleName\Controller') !== false`）上的字符串比较暂时解决了这个问题。我想使用`substr()`or`strncmp()`或类似的东西比 性能更好`strpos()`，但在我的情况下并不重要。

提前致谢！

// 编辑：为了清楚起见，我正在寻找类似的东西：

```
// $foo is an instance of MyApp\Controller\Moo
is_in_namespace('MyApp\Controller', $foo); // true 
```

或者

```
// $foo is an instance of MyApp\Controller\Moo
get_namespace($foo) === 'MyApp\Controller'; // true 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T15:37:33.180

您可以使用[`get_class()`](http://php.net/get_class)获取对象的类，然后您可以使用`strops()`它来查找它是否包含命名空间。没有等效的`get_namespace()`功能。

例子：

```
function is_in_namespace($namespace, $object) {
    return strpos(get_class($object), $namespace . '\\') === 0;
} 
```

```
function get_namespace($object) {
    $class = get_class($object);
    $pos = strrpos($class, '\\');
    return substr($class, 0, $pos);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T15:26:50.860

您可以使用常量`__NAMESPACE__`来获取当前的命名空间

```
namespace MyProject;

echo '"', __NAMESPACE__, '"'; // outputs "MyProject" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-25T01:58:07.120

是的，ReflectionClass 有[getNamespaceName](https://www.php.net/manual/en/reflectionclass.getnamespacename.php) ()：

```
(new \ReflectionClass($foo))->getNamespaceName(); 
```

# iphone - IOS API 在 Twitter 上获取用户名可用性

> ID：14218263
> 
> 赞同：0
> 
> 时间：2013-01-08T15:23:23.583
> 
> 标签：iphone, twitter

我想从我的 iPhone 应用程序访问 twitter，并想检查用户名是否可用..??? 是否有任何 API 可用于获取用户名的可用性。

阿赫扎尔纳齐尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:30:36.260

检查`username`Twitter 中是否存在 a。

此 API 返回有效信息：[http ://api.twitter.com/1/users/show.xml?screen_name=testuser](http://api.twitter.com/1/users/show.xml?screen_name=testuser)

# ios - 动画视图后 UIButton 未捕获触摸

> ID：14218264
> 
> 赞同：0
> 
> 时间：2013-01-08T15:23:28.990
> 
> 标签：ios, animation, uibutton

在我的程序中，由于软键盘覆盖了页面底部的 UITextField，我使用以下代码为 self.view 设置动画。

```
- (IBAction)moveViewUp:(UITextField *)textField
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.25];
    self.view.frame = CGRectMake(0,-150,320,400);
    [UIView commitAnimations];

} 
```

以下代码将视图带回原始位置。

```
- (IBAction)moveViewDown:(UITextField *)textField
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.25];
    self.view.frame = CGRectMake(0,0,320,400);
    [UIView commitAnimations];

} 
```

但是一旦执行了这两个方法，屏幕看起来就很正常了，屏幕中的 UIButton 停止捕获对其的任何触摸。

任何提示将不胜感激。

# css - CSS背景图像精灵位置过渡在IE10中的方向不同

> ID：14218265
> 
> 赞同：4
> 
> 时间：2013-01-08T15:23:30.043
> 
> 标签：css, css-transitions, internet-explorer-10

我正在创建一个带有背景图像精灵的链接按钮，它在：悬停时转换。它在除 IE 之外的所有浏览器中都运行良好，它似乎重置了过渡方向。

[在此处查看 jsFiddle 演示](http://jsfiddle.net/aZqEa/4)或在此处查看[IE10 的视频](http://screencast.com/t/FD4jvGu9rWSo)或在此处查看 css 内联：

```
.button {
  background:url('http://blackspike.com/temp/icon-github.svg') 0 0 no-repeat; width: 30px; height: 30px; display: block; 
  -webkit-transition: background-position 0.3s ease; 
  -moz-transition: background-position 0.3s ease; 
  -ms-transition: background-position 0.3s ease; 
  transition: background-position 0.3s ease; 
}

.button:hover {background-position: 0 -30px} 
```

预期的行为是它平稳地向上过渡然后向下过渡。就像 Fill 行为以某种方式搞砸了？

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T19:24:32.930

它看起来像一个错误，原始背景位置没有被正确记住以转换回，或者类似的。

我不知道 IE10 这样做的确切原因，但您可以通过将背景位置显式设置为垂直偏移值的非零值来修复它。例如：

```
.button { background-position: 0 1px; } 
```

[http://jsfiddle.net/aZqEa/22/](http://jsfiddle.net/aZqEa/22/)

# objective-c - CGImageRef | 内存消耗 | 泄漏

> ID：14218272
> 
> 赞同：0
> 
> 时间：2013-01-08T15:23:58.707
> 
> 标签：objective-c, cocoa, quartz-graphics, cgimageref

我需要捕获桌面图像并处理其 RGB 数据，我正在使用 Quartz API 来做同样的事情，

我面临的问题是，高内存使用率，

请参考功能，

**在此处编辑，此函数通过 pThread 调用；像这样的东西，**

```
void ImageProcessing::thread(){  
NSAutoreleasePool *pool=[[NSAutoreleasePool alloc]init];  
ImgRef sImageRef  

while( active){  
**strong text**
if ([currentWnd getCurrentRGBImage:&currentImg]){
   /*  do something here */
}

}
[pool release];

}
-(bool)getCurrentRGBImage:(ImgRef *)pImgRef{

    CGImageRef pCGImageRef;
    pCGImageRef = [self getDesktopImage];

    if ( !pCGImageRef ){
        NSLog(@" got NULL Image ");

        CGImageRelease(pCGImageRef);
        pCGImageRef = NULL;

        return NO;
    }

    // Create a bitmap rep from the image...

    size_t width  = CGImageGetWidth(pCGImageRef);
    size_t height = CGImageGetHeight(pCGImageRef);
    int bytesPerRow = CGImageGetBytesPerRow(pCGImageRef);
    int bytesPerPixel = CGImageGetBitsPerPixel(pCGImageRef)/8;

    CGDataProviderRef provider = CGImageGetDataProvider(pCGImageRef);

    CFDataRef pData = CGDataProviderCopyData(provider);
    const uint8_t* bytes = (const uint8_t *)CFDataGetBytePtr(pData);

    /***** ------------- *********

     Copy RAW Bytes to pImgRef

     ****************************/

    CGDataProviderRelease(provider);
    CFRelease(pData);

    CGImageRelease(pCGImageRef);
    pCGImageRef = NULL;

    return YES;

} 
```

和 getDesktopImage 功能是

```
-(CGImageRef)getDesktopImage{
    CGImageRef screenShot;

        screenShot = CGWindowListCreateImage(CGRectInfinite, kCGWindowListOptionOnScreenOnly, kCGNullWindowID, kCGWindowImageDefault);

    return screenShot;
} 
```

问题是，总体而言，此函数消耗大量内存，*pImgRef 有一个且只有一个实例，只有像素，RGB 操作，

我指的是Mac Activity Monitor的内存使用情况，它可靠吗？

[CGDataProviderRelease](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGImage/Reference/reference.html)的文档文档提到应用程序需要保持保留和释放它，所以我正在调用 CGDAtaProviderRelease 但在控制台 **malloc 引用计数下溢中获取消息，以便在 auto_refcount_underflow_error 上进行调试**

我不应该调用 CGDataProviderRelease() 吗？如果我评论我没有收到这条消息，所以不确定它是在 Quartz 中还是在我的代码中，

此外，这个函数正在消耗大量内存，如果我检查活动监视器，假设它真的在使用这么多内存是否安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:14:31.720

由于您不保留、创建或复制数据提供者，因此不应释放它。

我没有看到任何会导致过多内存消耗的东西，但是您遗漏了一些代码。

# asp.net - 如何为搜索引擎优化动态创建的 PDF？

> ID：14218277
> 
> 赞同：2
> 
> 时间：2013-01-08T15:24:11.640
> 
> 标签：asp.net, pdf, seo

我的网站包含一个 PDF 文档的存储库/库，这些文档是使用数据库中的故事动态生成的。

这些文档可通过链接访问，例如 /library.aspx?docid=1234，该链接通常通过电子邮件或社交媒体网站分发。

如何在 Google 搜索（或任何其他搜索引擎）上获取这些文档的内容？

理想情况下，我想，数据库中的各个故事将由谷歌搜索，并且链接将指向上面的文档 url。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:50:11.887

Google 允许您提交您的网址。

[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=1352276](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=1352276)

为了在所有搜索引擎上获取它，我会创建带有 PDF 链接的页面，并将这些链接包含在我的站点地图中。

# c# - 计时器（线程）会在任务重新执行的等待期之前完成他的任务吗？

> ID：14218280
> 
> 赞同：0
> 
> 时间：2013-01-08T15:24:19.393
> 
> 标签：c#, multithreading, timer

只是想知道计时器（线程）是否会在任务重新执行的等待期之前完成执行他的任务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T15:29:17.153

[请参阅System.Threading.Timer](http://msdn.microsoft.com/en-us/library/system.threading.timer%28v=vs.110%29.aspx)中的备注：

> 定时器执行的回调方法应该是可重入的，因为它是在 ThreadPool 线程上调用的。如果计时器间隔小于执行回调所需的时间，或者如果所有线程池线程都在使用并且回调多次排队，则可以在两个线程池线程上同时执行回调。

所以对于 System.Threading.Timer 答案是否定的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T15:39:31.787

正如@Clemens 所说，`System.Threading.Timer`继续滴答作响！

如果你想防止重入，你可以使用一个`Monitor`，或者只是一个像这样的标志：

```
int _TimerLock = 0;

void TimerTickSafe( object state )
{
    if ( Interlocked.CompareExchange( ref _TimerLock, 1, 0 ) != 0 ) return;
    try
    {
        TimerTick();
    }
    finally
    {
        Interlocked.Exchange( ref _TimerLock, 0 );
    }
} 
```

If the timer ticks again while the previous tick is still running, the new tick will be silently ignored.

# actionscript-3 - 没有播放声音

> ID：14218281
> 
> 赞同：0
> 
> 时间：2013-01-08T15:24:21.797
> 
> 标签：actionscript-3

```
var sound:Sound = new Sound(new URLRequest("Phone.wav"))
sound.play(0, 20); 
```

为什么声音不播放？没有错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T17:14:34.380

Flash 不支持使用`Sound`该类加载外部 WAV 文件，仅支持 MP3。我不知道为什么它没有给出任何错误，但我自己并没有`Sound`太多地使用这个类，所以它可能是正常的。

对此有三种解决方案。首先，如果您将 WAV 作为`Sound`对象导入到库中，则支持 WAV。如果您使用 Flash IDE，这可能是最佳选择。如果您不使用 IDE，则可以使用 Flex 的 [Embed] 标签嵌入文件，如果您使用 Flex SDK 编译它。

否则，可以将您的声音转换为 MP3 文件并照常加载：

```
var sound:Sound = new Sound(new URLRequest("Phone.mp3"));
sound.play(0, 20); 
```

或者，如果您更喜欢使用 WAV，您可以使用[as3wavsound](http://code.google.com/p/as3wavsound/)库。[这是一个概述如何使用它的教程。](http://active.tutsplus.com/tutorials/media/quick-tip-play-external-wav-files-in-as3/)

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T05:15:28.390

你需要`SoundChannel`试试这个。

```
var soundChann:SoundChannel;
var sound:Sound = new Sound(new URLRequest("Phone.wav"))
soundChann = sound.play(); 
```

# android - 广播接收者和服务之间的关系

> ID：14218284
> 
> 赞同：0
> 
> 时间：2013-01-08T15:24:34.633
> 
> 标签：android, android-service, android-broadcast

我对服务和广播接收器感到困惑。这两者之间有什么关系？为什么我们在启动服务时必须调用广播接收器。谁能解释一下这两个元素之间的概念

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:34:56.940

启动服务时不必**注册广播接收器。**也就是说，即使您没有注册 BroadcastReceiver，我们的 Service 也会按预期工作。两者之间没有**必然的**依赖关系。

正如 Gridtestmail 所解释的，服务是您希望在后台运行的进程，而无需与用户交互。

当您希望**收到**有关发生某些事件的通知时，将注册 BroadcastReceiver - 例如，发现新的蓝牙设备或接收来电。如果你注册了一个 BroadcastReceiver 来接收来电，那么`onReceive()`只要有来电，就会调用你的 Receiver 的方法，这样你就可以处理它了。同样，对于其他**事件检测**的东西。

我希望你现在清楚这个概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T15:27:35.780

服务：如果您想在后台做某事，即使应用程序关闭，它也将始终在后台运行。您可以在单独的过程中创建它，也可以根据需要将您的服务提供给其他应用程序。下载任何内容或音乐就是很好的例子

广播接收器：通常系统会发送一些信息，如果您愿意，您的应用可以通过注册接收这些信息。当事情发生时，您可以使用 onReceive 方法做您想做的事情。示例是系统将在新短信到达或启动完成时发送 BroadcastReceiver

示例：[服务和广播接收器](http://www.vogella.com/articles/AndroidServices/article.html)

# c++ - 在 flex 错误 C++ 中定义结构

> ID：14218289
> 
> 赞同：0
> 
> 时间：2013-01-08T15:24:48.250
> 
> 标签：c++, flex-lexer

我想在 flex 程序中定义一个结构：

```
%{

#include <math.h>
#include <string>
#include <vector>
#include <iostream>
#include <map>

struct Node{
    string action;
    vector<Node> vecini[];
};

%} 
```

即使我包含向量和字符串，我仍然会收到以下错误：错误：“字符串”没有命名类型错误：字段“vecini”的类型不完整

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T15:26:05.503

对字符串和向量使用完全限定的名称，例如：

```
std::string action;
^^^^^^^^^^^ 
```

请注意，字符串和向量仅在`std`命名空间中定义，因此您需要指定完全限定名称来告诉编译器在哪个命名空间下找到它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T15:27:01.913

vector 和 string 都在`std`命名空间中，因此您应该将其添加到这些类型的成员变量的声明中。将代码更改为：

```
%{

#include <math.h>
#include <string>
#include <vector>
#include <iostream>
#include <map>

struct Node{
    std::string action;
    std::vector<Node*> vecini[];
};

%} 
```

编辑：（感谢Kerrek SB）：您也不能将Node的向量定义为Node的成员。而是使用指向节点的指针向量，如下所示：`std::vector<Node*> vecini[];`

# r - 将所有日期的字符串日期转换为 R 日期 FAST

> ID：14218297
> 
> 赞同：11
> 
> 时间：2013-01-08T15:25:15.823
> 
> 标签：r, date, posix

这已经被问了好几次没有明确的答案：我想将“YYYY-mm-dd”形式的 R 字符串转换为`Date`. 该`as.Date`功能非常缓慢。 [在 R 中将字符转换为日期 *quickly*](https://stackoverflow.com/questions/12898318/convert-character-to-date-quickly-in-r)提供了一种解决方案，该解决方案`fasttime`适用于 1970 年以后的日期。我的问题是我需要转换从 1900 年开始的日期，其中大约有 1 亿个。我必须经常这样做，所以速度很重要。还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-08T15:49:58.653

`date`我可以通过使用包得到一点加速：

```
library(date)
set.seed(21)
x <- as.character(Sys.Date()-sample(40000, 1e6, TRUE))
system.time(dDate <- as.Date(x))
#    user  system elapsed 
#    6.54    0.01    6.56 
system.time(ddate <- as.Date(as.date(x,"ymd")))
#    user  system elapsed 
#    3.42    0.22    3.64 
```

您可能想查看它使用的 C 代码，看看是否可以根据您的具体情况对其进行修改以使其更快。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-08T09:40:38.187

不久前我遇到了类似的问题，并提出了以下解决方案：

1.  将字符串转换为**因子**（如果还不是因子）
2.  **将因子**的水平转换为日期****
***   **使用因子**的索引向量**将转换后的水平**展开为解******

 ****扩展 Joshua Ulrich 的示例，我得到了（我的笔记本电脑上的时间较慢）

```
library(date)
set.seed(21)
x <- as.character(Sys.Date()-sample(40000, 1e6, TRUE))
system.time(dDate <- as.Date(x))
#    user  system elapsed 
#    12.09   0.00   12.12 
system.time(ddate <- as.Date(as.date(x,"ymd")))
#    user  system elapsed 
#    6.97    0.04    7.05 
system.time({
    xf <- as.factor(x)
    dDate <- as.Date(levels(xf))[as.integer(xf)]
})
#    user  system elapsed 
#    1.16    0.00    1.15 
```

在这里，一旦 x 足够大，第 2 步不依赖于 x 的长度，并且第 3 步的伸缩性非常好（简单向量索引）。瓶颈应该是第 1 步，如果数据已经作为一个因素存储，则可以避免。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-02-17T01:21:48.150

'lubridate' 包中的功能`parse_date_time`也非常快：

```
library(date)
library(lubridate)
set.seed(21)
x <- as.character(Sys.Date()-sample(40000, 1e6, TRUE))
system.time(date1 <- as.Date(x))
#  user  system elapsed 
# 12.86    0.00   12.94 
system.time(date2 <- as.Date(as.date(x,"ymd"))) # from package 'date'
#  user  system elapsed 
#  4.82    0.00    4.85 
system.time(date3 <- as.Date(parse_date_time(x,'%y-%m-%d'))) # from package 'lubridate'
#  user  system elapsed 
#  0.27    0.00    0.26 
all(date1 == date2)
#  TRUE
all(date1 == date3)
#  TRUE 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-05-16T11:45:49.217

考虑令人难以置信的快速`anytime`库，它适用于 1970< 问题。它使用 Boost date_time C++ 库并提供函数`anytime()`和`anydate()`用于转换。比较：

```
require(anytime)        #anydate()
require(lubridate)      #parse_date_time()
require(microbenchmark) #microbenchmark()

set.seed(21)
test.dd <- as.Date("2018-05-16") - sample(40000, 1e6, TRUE) #1 mln. random dates

microbenchmark(
    strptime(test.dd, "%Y-%m-%d"),                     #basic strptime
    parse_date_time(test.dd, orders = "ymd"),          #lubridate (POSIXct class)
    as.Date(parse_date_time(test.dd, orders = "ymd")), #lubridate + date class conversion
    anydate(test.dd),                                  #anytime library
    times = 10L, unit = "s"
) 
```

结果/输出：

```
Unit: seconds
                                             expr          min           lq         mean       median           uq          max neval cld
                    strptime(test.dd, "%Y-%m-%d") 10.177406012 10.472527403 1.064532e+01 10.621221596 10.819156870 11.288330598    10   c
         parse_date_time(test.dd, orders = "ymd")  4.541542019  4.603663894 4.844961e+00  4.869800287  5.055844972  5.128409226    10  b 
as.Date(parse_date_time(test.dd, orders = "ymd"))  4.461140695  4.568415584 4.867837e+00  4.739026273  5.080610126  5.532028490    10  b 
                                 anydate(test.dd)  0.000000755  0.000004909 5.777500e-06  0.000005664  0.000006042  0.000012839    10 a 
```

ps 对于使用*时间序列*，请考虑`flipTime`库。`anytime`它具有所有必需的工具，并且几乎与转换目的一样快：

```
require(devtools)
install_github("Displayr/flipTime") 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-05-14T09:34:56.303

进一步加速：您已经使用 data.table。因此，使用您的日期创建一个查找表并将它们与您的数据合并。

```
library(lubridate)
library(data.table)

y <- seq(as.Date('1900-01-01'), Sys.Date(), by = 'day')
id.date <- data.table(id = as.character(y), date = as.Date(y), key = 'id')

set.seed(21)
x <- as.character(Sys.Date()-sample(40000, 1e6, TRUE))

system.time(date3 <- as.Date(parse_date_time(x,'%y-%m-%d'))) # from package 'lubridate'
#  user  system elapsed 
#  0.15  0.00   0.15  

system.time(date4 <- id.date[setDT(list(id = x)), on='id', date])
#  user  system elapsed 
#  0.08  0.00   0.08

all(date3 == date4)
# TRUE 
```

这是一种解决方法，但我相信这就是 data.table 的用途。我不知道上面提到的时间/日期包内部是基于算法还是基于查找表（哈希表）。

对于较大的数据集，只要涉及字符操作，这往往很慢，我会考虑切换到查找参考表。****

# actionscript-3 - 数据网格中的 Flex 按钮数组

> ID：14218298
> 
> 赞同：0
> 
> 时间：2013-01-08T15:25:16.180
> 
> 标签：actionscript-3, apache-flex, datagrid, flexicious

我有一个 ExtendedAdvancedDataGrid，其中有一列有切换按钮（这是 mxml 代码的片段）：

```
<columns:ExtendedAdvancedDataGridColumn id="toggle" sortable="false" editable="false" headerText="Sort" dataField="include_order" columnWidthMode="fixed" width="60">
    <columns:itemRenderer>
        <fx:Component>
            <mx:VBox verticalAlign="middle" horizontalAlign="center">
                <s:ToggleButton id="sortToggle" label="OFF" width="55" color="white" chromeColor="red"  selected="false" click="outerDocument.sortToggle_click(event)"/>
            </mx:VBox>
        </fx:Component>
    </columns:itemRenderer>
</columns:ExtendedAdvancedDataGridColumn> 
```

当用户单击其中一个按钮时，它会调用函数 sortToggle_click()。我希望该功能能够访问列表中 SECOND 按钮的标签，无论单击哪个按钮。如何访问函数中的特定按钮标签？

谢谢。

# java - 在 xml 模式中为具有值列表的属性使用 keyref

> ID：14218299
> 
> 赞同：8
> 
> 时间：2013-01-08T15:25:19.577
> 
> 标签：java, xml, xsd, schema, xerces

我正在尝试设计一个模式来验证已在应用程序中使用的 xml 格式（重新设计 xml 的空间不大）。

我正在尝试利用 xml 模式字典的 key 和 keyref 元素来验证身份约束。

一个特殊的问题是 xml 建模一对多关系的方式

```
<spaceships>
    <spaceship guns="gun1 gun2 gun3"/>
</spaceships>
<guns>
    <gun id="gun1"/>
    <gun id="gun2"/>
    <gun id="gun3"/>
</guns> 
```

我在我的架构中想出了这对密钥/密钥引用

```
<xs:key name="gunKey">
    <xs:selector xpath="guns/gun" />
    <xs:field xpath="@id" />
</xs:key>

<xs:keyref name="gunRef" refer="gunKey">
    <xs:selector xpath="spaceships/spaceship" />
    <xs:field xpath="@guns" />
</xs:keyref> 
```

这不适用于 xerces 抗议：

> 对于元素的身份约束，未找到值为“gun1 gun2 gun3”的键“gunRef”。

无论如何在模式中表示列表的值是逗号分隔的对另一个实体的引用列表并且仍然可以获得身份约束验证的好处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:35:25.850

恐怕您不能为属性创建这样的引用，`guns="gun1 gun2 gun3"`因为`gun1 gun2 gun3`它是一个简单的字符串，不会自动分为 3 个单独的部分。

**编辑 1：**如果您想匹配此类属性，请查看此 QA：[XML 模式；来自有效属性值列表的多个](https://stackoverflow.com/questions/8688864/xml-schema-multiple-from-a-list-of-valid-attribute-values)

# css - 选择箭头样式更改

> ID：14218307
> 
> 赞同：196
> 
> 时间：2013-01-08T15:25:46.507
> 
> 标签：css, select

我正在尝试用我自己的图片替换选择的箭头。我将选择包含在具有相同大小的 div 中，我将选择的背景设置为透明，并且在 div 的右上角包含一张图片（与箭头大小相同）作为背景。

它仅适用于 Chrome。

![在此处输入图像描述](../Images/bc1bfa2a997618e2832ef3402190e4ce.png)

我怎样才能让它在 Firefox 和 IE9 中工作，我得到这个：

![在此处输入图像描述](../Images/5aca2cac16b9f9d0ff4eba6ada2d9323.png)

```
.styled-select {
  width: 100px;
  height: 17px;
  overflow: hidden;
  overflow: -moz-hidden-unscrollable;
  background: url(images/downarrow_blue.png) no-repeat right white;
  border: 2px double red;
  display: inline-block;
  position: relative;
}

.styled-select select {
  background: transparent;
  -webkit-appearance: none;
  width: 100px;
  font-size: 11px;
  border: 0;
  height: 17px;
  position: absolute;
  left: 0;
  top: 0;
}

body {
  background-color: #333333;
  color: #FFFFFF;
}

.block label {
  color: white;
}
```

```
<HTML>

<HEAD>
</HEAD>

<BODY>
  <p/>
  <form action="/prepareUpdateCategoryList.do?forwardto=search">

    <fieldset class="block" id="searchBlock">
      <p>
        <label style="width:80px">Class</label>
        <div class="styled-select">
          <select property="voucherCategoryClass">
    		<option value="0">Select </option>
    		<option value="7382">steam </option>
    	</select>
        </div>

      </p>
    </fieldset>
  </form>
</BODY>

</HTML>
```

* * *

## 回答 #1

> 赞同：181
> 
> 时间：2013-01-08T15:32:19.910

你有没有尝试过这样的事情：

```
.styled-select select {
    -moz-appearance:none; /* Firefox */
    -webkit-appearance:none; /* Safari and Chrome */
    appearance:none;
} 
```

尚未测试，但应该可以工作。

**编辑**：看起来 Firefox 直到 35 版才支持此功能（[在此处阅读更多信息](https://bugzilla.mozilla.org/show_bug.cgi?id=649849)）

[这里](https://stackoverflow.com/questions/4142619/how-to-make-select-element-be-transparent-in-chrome/)有一个解决方法，看看`jsfiddle`那个帖子。

* * *

## 回答 #2

> 赞同：143
> 
> 时间：2017-02-07T10:20:05.313

我已经使用类似于 Julio 的答案的自定义箭头设置了 a `select`，但是它没有设置宽度并使用 a`svg`作为背景图像。（`arrow_drop_down`来自material-ui图标）

```
select {
  -webkit-appearance: none;
  -moz-appearance: none;
  background: transparent;
  background-image: url("data:image/svg+xml;utf8,<svg fill='black' height='24' viewBox='0 0 24 24' width='24' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/><path d='M0 0h24v24H0z' fill='none'/></svg>");
  background-repeat: no-repeat;
  background-position-x: 100%;
  background-position-y: 5px;
  border: 1px solid #dfdfdf;
  border-radius: 2px;
  margin-right: 2rem;
  padding: 1rem;
  padding-right: 2rem;
} 
```

[![在此处输入图像描述](../Images/299c9390083c53372c468cdbd541346b.png)](https://i.stack.imgur.com/T1Mca.png)

如果您还需要它在 IE 中工作，请将 svg 箭头更新为 base64 并添加以下内容：

```
select::-ms-expand { display: none; }

background-image: url(data:image/svg+xml;base64,PHN2ZyBmaWxsPSdibGFjaycgaGVpZ2h0PScyNCcgdmlld0JveD0nMCAwIDI0IDI0JyB3aWR0aD0nMjQnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc+PHBhdGggZD0nTTcgMTBsNSA1IDUtNXonLz48cGF0aCBkPSdNMCAwaDI0djI0SDB6JyBmaWxsPSdub25lJy8+PC9zdmc+); 
```

为了更容易调整箭头的大小和间距，请使用此 svg：

```
url("data:image/svg+xml,<svg width='24' height='24' xmlns='http://www.w3.org/2000/svg'><path d='m0,6l12,12l12,-12l-24,0z'/><path fill='none' d='m0,0l24,0l0,24l-24,0l0,-24z'/></svg>"); 
```

它在箭头的两侧没有任何间距。

* * *

## 回答 #3

> 赞同：59
> 
> 时间：2014-12-24T20:16:11.107

只使用一个类：

```
select {
    width: 268px;
    padding: 5px;
    font-size: 16px;
    line-height: 1;
    border: 0;
    border-radius: 5px;
    height: 34px;
    background: url(http://cdn1.iconfinder.com/data/icons/cc_mono_icon_set/blacks/16x16/br_down.png) no-repeat right #ddd;
    -webkit-appearance: none;
    background-position-x: 244px;
} 
```

[http://jsfiddle.net/qhCsJ/4120/](http://jsfiddle.net/qhCsJ/4120/)

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2014-09-17T15:37:56.573

这是一个优雅的修复，它使用跨度来显示值。

布局是这样的：

```
<div class="selectDiv">
   <span class="selectDefault"></span>
   <select name="txtCountry" class="selectBox">
      <option class="defualt-text">-- Select Country --</option>
      <option value="1">Abkhazia</option>
      <option value="2">Afghanistan</option>
   </select>
</div> 
```

[提琴手](http://jsfiddle.net/narensrinivasans/FpNxn/1/)

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2017-04-01T09:22:41.833

这尤其适用于那些使用 Bootstrap 并在最新浏览器版本中测试过的用户：

```
select {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  /* Some browsers will not display the caret when using calc, so we put the fallback first */ 
  background: url("http://cdn1.iconfinder.com/data/icons/cc_mono_icon_set/blacks/16x16/br_down.png") white no-repeat 98.5% !important; /* !important used for overriding all other customisations */
  background: url("http://cdn1.iconfinder.com/data/icons/cc_mono_icon_set/blacks/16x16/br_down.png") white no-repeat calc(100% - 10px) !important; /* Better placement regardless of input width */
}
/*For IE*/
select::-ms-expand { display: none; }
```

```
<link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.css" rel="stylesheet"/>

<div class="container">
  <div class="row">
    <div class="col-xs-6">
      <select class="form-control">
       <option>Option 1</option>
       <option>Option 2</option>
       <option>Option 3</option>
      </select>
    </div>
  </div>
</div>
```

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2014-03-30T21:08:55.517

检查这个它很hacky，就这么简单：

*   设置`-prefix-appearance`为`none`删除样式
*   用于`text-indent`将内容向右“推”一点
*   最后，设置`text-overflow`为空字符串。所有超出其宽度的东西都将变成……什么都没有！这包括箭头。

现在你可以自由地以任何你想要的方式来设计它:)

```
.selectParent {
  width: 80px;
  overflow: hidden;
}

.selectParent select {
  text-indent: 1px;
  text-overflow: '';
  width: 100px;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  padding: 2px 2px 2px 2px;
  border: none;
  background: transparent url("http://cdn1.iconfinder.com/data/icons/cc_mono_icon_set/blacks/16x16/br_down.png") no-repeat 60px center;
}
```

```
<div class="selectParent">
  <select>
    <option value="1">Option 1</option>
    <option value="2">Option 2</option>
  </select>
</div>
```

[在 JSFiddle 上查看](http://jsfiddle.net/AEt5k/1/)

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2021-04-28T09:02:01.030

```
/* FIX OF UGLY SELECT */
SELECT {
    background: url("data:image/svg+xml,<svg height='10px' width='10px' viewBox='0 0 16 16' fill='%23000000' xmlns='http://www.w3.org/2000/svg'><path d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/></svg>") no-repeat;
    background-position: calc(100% - 0.75rem) center !important;
    -moz-appearance:none !important;
    -webkit-appearance: none !important; 
    appearance: none !important;
    padding-right: 2rem !important;
} 
```

调整变量以匹配您的表单样式。

铬合金：

[![在此处输入图像描述](../Images/b7f46cc4334a9d68d81e8f8b98cd949d.png)](https://i.stack.imgur.com/lmfdR.png)

火狐：

[![在此处输入图像描述](../Images/eb5f709d19527e466271f2b3cea51d71.png)](https://i.stack.imgur.com/sf4do.png)

歌剧：

[![在此处输入图像描述](../Images/6c035a67f388dca99682dbf552be40de.png)](https://i.stack.imgur.com/3taSo.png)

边缘：

[![在此处输入图像描述](../Images/ef041b2e6fb70f47c1053c90903f947d.png)](https://i.stack.imgur.com/gGIBo.png)

ps Form & Input 通过 Bootstrap 4 设计

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2021-04-03T00:17:31.223

```
.select{
  -webkit-appearance: none;
  -moz-appearance: none;
  background-image: url("data:image/svg+xml;utf8,<svg fill='black' height='24' viewBox='0 0 24 24' width='24' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/><path d='M0 0h24v24H0z' fill='none'/></svg>");
  background-repeat: no-repeat;
  background-position-x: 98%;
  background-position-y: 50%;
} 
```

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2015-09-20T11:50:01.387

使用 CSS 设置标签样式并使用指针事件：

```
<label>
<select>
   <option value="0">Zero</option>
   <option value="1">One</option>
</select>
</label> 
```

并且相对的CSS是

```
label:after {
    content:'\25BC';
    display:inline-block;
    color:#000;
    background-color:#fff;
    margin-left:-17px;   /* remove the damn :after space */
    pointer-events:none; /* let the click pass trough */
} 
```

我在这里只使用了向下箭头，但您可以设置带有背景图像的块。这是一个丑陋的小提琴样本： [https ://jsfiddle.net/1rofzz89/](https://jsfiddle.net/1rofzz89/)

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2016-03-18T06:09:08.720

它适用于所有浏览器：

```
select {
    width: 268px;
    padding: 5px;
    font-size: 16px;
    line-height: 1;
    border: 0;
    border-radius: 5px;
    height: 34px;
    background: url(http://cdn1.iconfinder.com/data/icons/cc_mono_icon_set/blacks/16x16/br_down.png) no-repeat right #ddd;
    appearance:none;
    -moz-appearance:none; /* Firefox */
    -webkit-appearance:none; /* Safari and Chrome */
    background-position-x: 244px;

} 
```

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2021-01-10T07:21:19.617

我想澄清一些在我思考之前没有人提到的事情。

1.  首先获取您的`svg`图像或图标
2.  `<svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M4 10.127L12 18.127L20 10.127H4Z" fill="#8E8E93"/> </svg>` 在那里你会得到一些像这些尝试找到它的xml代码。
3.  在这段代码之后过去`data:image/svg+xml;utf8,`
4.  将填充颜色替换`fill="#8E8E93"`为此`fill="%238E8E93"`如果要添加十六进制颜色，则应更改`#`为`%23`

这是html代码：

```
<fieldset>
  <label for="editName">Country</label>
  <select class="ra-select">
    <option value="bangladesh" selected>Bangladesh</option>
    <option value="saudi arabia">Saudi Arabia</option>
    <option value="us">Uinited State Of America</option>
    <option value="india">India</option>
  </select>
</fieldset> 
```

这是css代码：

```
.ra-select {
   width: 30%;
   padding: 10px;
   /* Replace Default styling (arrow) */
   appearance: none;
   -webkit-appearance: none;
   -moz-appearance: none;
   background-image: url('data:image/svg+xml;utf8,<svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 10.127L12 18.127L20 10.127H4Z" fill="%238E8E93"/></svg>');
   background-repeat: no-repeat;
   background-position-y: 50%;
   background-position-x: 98%;
}

.ra-select:focus,
.ra-select:hover {
   outline: none;
   border: 1px solid #bbb;
}

.ra-select option {
   background-color: #fff;
} 
```

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2020-11-09T18:09:44.693

这样做：

```
select {

    background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNSIgaGVpZ2h0PSIyNSIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2U9IiNiYmIiPjxwYXRoIGQ9Ik02IDlsNiA2IDYtNiIvPjwvc3ZnPg==) !important;
    background-repeat: no-repeat !important;
    background-position-x: 100% !important;
    background-position-y: 50% !important;

    -webkit-appearance: none !important;
    -moz-appearance: none !important;
    -ms-appearance: none !important;
    -o-appearance: none !important;
    appearance: none !important;
}
select::-ms-expand {
    display: none;
}
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2020-12-16T15:38:22.517

你可以使用这个。其测试代码

```
 select {
    background: url(http://cdn1.iconfinder.com/data/icons/cc_mono_icon_set/blacks/16x16/br_down.png) no-repeat right !important;
    appearance: none !important;
    background-size: 25px 25px !important;
    background-position: 99% 50% !important;
} 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-12-03T16:50:59.193

我已经提到了这篇[文章](https://stackoverflow.com/a/28274325/905915)，它就像魅力一样，除了它没有在 IE 浏览器中隐藏箭头。

> 但是添加以下内容会隐藏 IE 中的箭头：

```
&::-ms-expand {
      display: none;
    }
```

> 完整的解决方案（sass）

```
$select-border-color: #ccc;
$select-focus-color: green;

select {

    cursor: pointer;
    /* styling */
    background-color: white;
    border: 1px solid $select-border-color;
    border-radius: 4px;
    display: inline-block;
    font: inherit;
    line-height: 1.5em;
    padding: 0.5em 3.5em 0.5em 1em;

    /* reset */
    margin: 0;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    -webkit-appearance: none;
    -moz-appearance: none;

    background-image: linear-gradient(45deg, transparent 50%, $select-border-color 50%),
    linear-gradient(135deg, $select-border-color 50%, transparent 50%),
    linear-gradient(to right, $select-border-color, $select-border-color);
    background-position: calc(100% - 20px) calc(1em + 2px),
    calc(100% - 15px) calc(1em + 2px), calc(100% - 2.5em) 0.5em;
    background-size: 5px 5px, 5px 5px, 1px 1.5em;
    background-repeat: no-repeat;

    /* Very imp: hide arrow in IE */
    &::-ms-expand {
      display: none;
    }

    &:-moz-focusring {
      color: transparent;
      text-shadow: none;
    }

    &:focus {
      background-image: linear-gradient(45deg, $select-focus-color 50%, transparent 50%),
      linear-gradient(135deg, transparent 50%, $select-focus-color 50%), linear-gradient(to right, $select-focus-color, $select-focus-color);
      background-position: calc(100% - 15px) 1em, calc(100% - 20px) 1em, calc(100% - 2.5em) 0.5em;
      background-size: 5px 5px, 5px 5px, 1px 1.5em;
      background-repeat: no-repeat;
      border-color: $select-focus-color;
      outline: 0;
    }
  }
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-11-07T11:49:26.037

简单的箭头和干净的代码

```
select {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    border: none;
    background: transparent url(http://cdn1.iconfinder.com/data/icons/cc_mono_icon_set/blacks/16x16/br_down.png) no-repeat 100% center;
    padding-right: 25px;
} 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2020-11-23T22:24:44.617

[这里](https://codepen.io/samgermain-the-sasster/pen/jOrgpEL)有几个例子

它基于[这个答案](https://stackoverflow.com/a/28274325/6331353)，但我在列表中添加了一个以制作更简约的设计

```
select.moreMinimal {

    background-color: inherit;
    display: inline-block;
    font: inherit;
    padding: 0 2.2em 0 1em;    
    margin: 0;      
    cursor: pointer;

    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    -webkit-appearance: none;
    -moz-appearance: none;
  }

select.moreMinimal {
    background-image:
      linear-gradient(45deg, transparent 50%, gray 50%),
      linear-gradient(135deg, gray 50%, transparent 50%);
    background-position:
      calc(100% - 20px), 
      calc(100% - 15px);
    background-size:
      5px 5px,
      5px 5px;
    background-repeat: no-repeat;
}

//TODO: Probably shouldn't be focus, cause when you click it again it's still green
select.moreMinimal:focus {
    background-image:
        linear-gradient(45deg, green 50%, transparent 50%),
        linear-gradient(135deg, transparent 50%, green 50%);
    background-position:
        calc(100% - 15px),
        calc(100% - 20px);
    background-size:
        5px 5px,
        5px 5px;
    background-repeat: no-repeat;
    border-color: green;
    outline: 0;
} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-10-21T13:52:58.217

你也可以试试这个：

[这是它的图片！](https://i.stack.imgur.com/4F8vf.png)

并且还运行代码片段！

CSS，然后是 HTML：

```
 #select-category {
            font-size: 100%;
            padding: 10px;
            padding-right: 180px;
            margin-left: 30px;
            border-radius: 1000000px;
            border: 1px solid #707070;
            outline: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background: transparent;
            background-image: url("data:image/svg+xml;utf8,<svg fill='black' height='34' viewBox='0 0 24 24' width='24' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/><path d='M0 0h24v24H0z' fill='none'/></svg>");
            background-repeat: no-repeat;
            background-position-x: 100%;
            background-position-y: 5px;
            margin-right: 2rem;
        }
```

```
 <select id="select-category">
                    <option>Category</option>
                    <option>Category 2</option>
                    <option>Category 3</option>
                    <option>Category 4</option>
                    <option>Category 5</option>
                    <option>Category 6</option>
                    <option>Category 7</option>
                    <option>Category 8</option>
                    <option>Category 9</option>
                    <option>Category 10</option>
                    <option>Category 11</option>
                    <option>Category 12</option>
                </select>
```

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2019-08-28T14:00:34.653

假设 selectDrop 是您的 HTML 标记中存在的类。因此，这么多代码足以更改默认箭头图标：

```
.selectDrop{
      background: url(../images/icn-down-arrow-light.png) no-repeat right #ddd; /*To change default icon with provided image*/
      -webkit-appearance:none; /*For hiding default pointer of drop-down on Chrome*/
      -moz-appearance:none; /*For hiding default pointer of drop-down on Mozilla*/
      background-position-x: 90%; /*Adjust according to width of dropdown*/
    } 
```

# testing - 在播放框架自动测试模式（无头浏览器）中使用时单击/clickAndWait selenese 命令失败

> ID：14218320
> 
> 赞同：1
> 
> 时间：2013-01-08T15:26:19.887
> 
> 标签：testing, selenium, playframework, selenium-ide, playframework-1.x

在为 webapp（基于 playframework）编写一些验收测试时，我对一些 selenium 命令的使用感到困惑。

当我使用此命令在浏览器中运行时，click/clickAndWait 运行良好。

```
play run 
```

当我使用此命令在命令提示符（无头浏览器）中运行时失败。

```
play auto-test 
```

我在单击之前尝试了一些命令，例如 pause、waitForElementPresent、waitForPageToLoad

我的按钮代码是：

```
<button class="btn btn-green" name="Next">
Next
<i class=" icon-chevron-right"></i>
</button> 
```

我使用了以下 selenese 命令

```
click('name=Next') or `clickAndWait('name=Next')`
or click('css=button[name="Next"]')
click('//button[@name='Next']') 
```

这些命令在浏览器模式下工作，但如果我们在自动测试模式下运行则会**失败。**

我得到的错误：对于单击命令的 clickAndWait 命令`Timed out after 30000ms` ，它在下一页的下一步中失败`assertTitle`。由于实际值仍然是旧页面。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T22:39:59.017

只需为您的按钮分配一个 id`<button class="btn btn-green" name="Next" id="next-button">`并使用它`clickAndWait('next-button')`。

老答案：

在您的 HTML 标记中，名称是“next”，只有小写字母，在您的 selenese 代码中，“Next”以大写字母开头。所以这些是不同的值，测试无法工作。请将“下一步”更改为“下一步”。

# php - php链接代码 - 分开代码

> ID：14218325
> 
> 赞同：0
> 
> 时间：2013-01-08T15:26:36.343
> 
> 标签：php, wordpress, seo, hyperlink

嗨，我需要一些关于我的 wordpress 主题代码的帮助。

```
 <a href="<?php echo $link; ?>">
  <?php
  global $post;
  foreach(get_the_tags($post->ID) as $tag) {
  echo ' <li>'.$tag->name.', </li>';
  }
  ?>
  </a> 
```

编码

```
<?php echo $link; ?> 
```

这是一个已经在页面上的网站的链接，链接部分很好用，唯一的问题是我希望链接（用作关键字/锚文本的标签）对出站链接是 seo 友好的

需要做哪些改变？随时为 seo 增加链接 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:34:46.800

编辑：反映您的代码更改。

代码看起来仍然一样......我认为它应该看起来像这样：（我可能完全错了）:)

```
 <?php
  global $post;
  foreach(get_the_tags($post->ID) as $tag) {
  echo ' <li>'.$tag->name.'</li>';
  }
  ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T15:48:32.150

如果您希望每个标签都使用相同的链接，那么这是一个解决方案：

```
<ul>
  <?php
    global $post;
    foreach( get_the_tags($post->ID) as $tag ) {
      echo '<li><a href="' . $link . '?>" title="A title for the link">' . $tag->name . '</a></li>';
    }
  ?>
</ul> 
```

请注意：我已经添加了无序列表的开始和结束元素，因为这些元素丢失了，这些也可以是有序列表的开始和结束。

# windows - 如何在一个月的多天使用 schtasks.exe 创建任务

> ID：14218328
> 
> 赞同：2
> 
> 时间：2013-01-08T15:26:40.397
> 
> 标签：windows, command-line, cmd, scheduled-tasks, windows-task-scheduler

我尝试使用命令行创建这个计划任务：

![在此处输入图像描述](../Images/56284d88d8fdd3e93911c76b6991b9e3.png)

![在此处输入图像描述](../Images/970e81906ba60861adb5a8ec04792bfd.png)

我试过：

> schtasks.exe /Create /tn test1 /tr notepad.exe /sc montly /m jan,feb /d 12,27

但似乎/d只能获取一个参数，例如：/d 12

如何创建与向导中相同的任务？我想创建一个每 1 月和 2 月 12 日和 27 日运行的任务。

谢谢，英巴尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:40:05.573

我发现这样做的唯一方法是使用 xml 并将其作为参数传递给 /create 命令。

# c# - 当我使用 c# 在 DataGridView 中选择一行时搜索文件

> ID：14218329
> 
> 赞同：0
> 
> 时间：2013-01-08T15:26:47.020
> 
> 标签：c#, winforms

我正在使用 C# 在 Windows 窗体中工作。

我目前正在从事一个项目，我希望能够从我的 datagridview (DGV) 中选择一行，并从该选定的行中尝试从文件夹中找到一个 CSV 文件。

For example if I select a row from my first DGV the programme should automatically recognise that the cell in column 4 is the folder directory name of where the CSV file is located in my documents, and when that row is selected it automatically displays the csv file在第二辆 DGV 中。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:45:02.020

1.  将处理程序附加到 DataGridView.CellMouseClick 事件[链接](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellmouseclick.aspx)
2.  从 DataGridViewCellMouseEventArgs 参数获取行索引。
3.  从单击行内的第 4 列获取数据
4.  打开文件并将所有数据放入第二个 DGV

# java - 使用所有元素的二维数组排序

> ID：14218338
> 
> 赞同：0
> 
> 时间：2013-01-08T15:27:07.313
> 
> 标签：java, arrays

我现在正在我的程序中处理这段代码，似乎问题出在我停止第二维内部循环的那一行。

这是数组的示例输出

*   9 6 6
*   7 6 4
*   4 8 5

当我运行此代码时，输​​出是：

*   4 4 6
*   5 6 6
*   7 8 9

我的预期输出是：

*   4 4 5
*   6 6 6
*   7 8 9

一个数字：“6”不在正确的位置。这是因为当我尝试运行在 for 循环上方有嵌套 for 循环的部分时，它只运行一次，因此它只检查第一列而不是到达 6 所在的第三列。问题是我需要限制该循环只读取从row#0 column#0到row#2 column#0的最高数字。

我该如何解决这个问题？我想过使用一维数组并将所有二维数组元素放入其中并对其进行排序，然后将其放回二维数组并再次打印，但这不会使我的代码解决对二维数组进行排序所需的过程。

```
public static void sortArray(){
    int x = len-1, y = len-1;
    int iKey=0,jKey=0;
    int cnt=0;
    do{
        cnt++;
        if(y==-1){
            x--;
            y=len-1;
        }
        System.out.println(cnt+".)"+x+"-"+y);
        int hi = -1;
        for(i = 0;i <= x; i++)
            for(j = 0;j <= y; j++){
                if(twodiArray[i][j]>hi){
                    hi = twodiArray[i][j];
                    iKey = i;
                    jKey = j;
                }
            }

        int temp = twodiArray[iKey][jKey];
            twodiArray[iKey][jKey] = twodiArray[x][y];
            twodiArray[x][y] = temp;
            //dispArray();
        y--;
    }while(cnt<9);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:47:40.750

问题出在您搜索最大元素的循环中。假设您有数组 5x5 和`x=1`和`y=1`。然后你循环将只检查以下元素：[0][0]、[0][1]、[1][0]、[1][1]。但它也应该检查 [0][2]、[0][3]、[0][4]。

使用您之前的代码，您只检查了以下单元格：

```
XX...
XX...
.....
.....
..... 
```

但是你需要检查这些：

```
XXXXX
XX...
.....
.....
..... 
```

所以你需要这样的东西：

```
for(i = 0;i <= x; i++) {
    int upper; // How many elements we need to check on current row.
    if (i != x) {
       upper = len - 1; // We are not in last row, so check all elements.
    } else {
       upper = y; // On the last row we need to check only elements up to y.
    }
    for(j = 0;j <= upper; j++){
        if(twodiArray[i][j]>hi){
            hi = twodiArray[i][j];
            iKey = i;
            jKey = j;
        }
    }
} 
```

我的代码完全检查每一行，直到最后一行。

**编辑**

如果您使用：

```
for (int i = 0; i <= x; i++) {
    for (int j = 0; j <= y; j++) {
        ...
    }
} 
```

然后你只在（0,0）中左上角和（y，x）中右下角的recangle上迭代。例如 x = 4，y = 3：

```
XXX...
XXX...
XXX...
XXX...
...... 
```

但是您的目标是在最后一行之前完成每一行。因此，完全检查第 0 行、第 1 行和第 2 行以及第 3 行中的 3 个元素。我的代码做到了。`upper`显示我们需要检查除最后​​一行之外的所有行中的多少值`len - 1`（检查整行）。最后一个是`y`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:17:46.290

就个人而言，为了避免混淆，我会将其视为一维数组。

```
// I'm assuming that columnCount and rowCount are stored somewhere
public int getNthElement(int index) {
    int colIndex = index % columnCount;
    int rowIndex = (index - colIndex) / rowCount;
    return twodiArray[rowIndex][colIndex];
}

public void setNthElement(int index, int value) {
    int colIndex = index % columnCount;
    int rowIndex = (index - colIndex) / rowCount;
    twodiArray[rowIndex][colIndex] = value;
}

public void sortArray(int[][] array) {
    int elementCount = rowCount * columnCount;
    int curIndex = elementCount - 1;

    while (curIndex >= 0) {
        int highestIndex = -1;
        int highestValue = 0;

        for (int i = 0; i <= curIndex; i++) {
            int nthValue = getNthElement(i);
            if (nthValue > highestValue) {
                highestIndex = i;
                highestValue = nthValue;
            }
        }

        int swapValue = getNthElement(curIndex);
        setNthElement(curIndex, highestValue);
        setNthElement(highestIndex, swapValue);

        curIndex--;
    }
} 
```

您可以看到我仍然使用 2D 数组并且从未使用实际的 1D 数组，但是这段代码索引到数组*中，就好像它是*1D 数组一样。（希望这在你的教授眼中是有效的）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T15:51:45.297

您的交换代码（以 开头`int temp = twodiArray`）位于主迭代循环之外。它需要移动到最里面的循环内。

顺便说一句，您可以在不存储索引的情况下进行交换。

# jsf-2 - 可以与 IBM WebSphere 7.0 一起使用的 MyFaces 的最新版本是什么

> ID：14218340
> 
> 赞同：1
> 
> 时间：2013-01-08T15:27:12.760
> 
> 标签：jsf-2, websphere, myfaces

我正在使用 IBM WebSphere 7.0 和 MyFaces 2.0.7 作为共享库安装。

因为 PrimeFaces 存在问题（例如，p:messages autoUpdate 不起作用），我正在考虑升级到更新版本（这不是微不足道的，因为这必须是公司团队的决定）。

那么，我的问题是，哪个是最新版本的 MyFaces 可以与 IBM WebSphere 7.0 一起使用？目前的最新版本是 2.1.10，但根据问题的答案[Can JSF 2.0 be used with Websphere application server version 7.x](https://stackoverflow.com/questions/1718934/can-jsf-2-0-be-used-with-websphere-application-server-version-7-x/10249636#10249636) MyFaces 从 2.1 开始的版本将不适用于 WebSphere 7.0。

有人设法运行 2.1.x 版吗？如果是这样，哪个版本，并且需要做一些额外的事情？正如我所说，我已经成功配置了共享库，类似于文章中的解决方案：[http ://wasbehindtheglass.blogspot.co.uk/2011/11/myfaces-20-and-websphere-application.html](http://wasbehindtheglass.blogspot.co.uk/2011/11/myfaces-20-and-websphere-application.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:31:55.023

**MyFaces Core 2.1.10**与 IBM WebSphere 7.0 配合得很好。

可以在[MyFaces Core 2.1.10](https://issues.apache.org/jira/secure/ReleaseNote.jspa?projectId=10600&version=12323259)中找到发行说明。

# android - 在没有 IDE 的 MacOSX 上打开 Avd Manager

> ID：14218341
> 
> 赞同：0
> 
> 时间：2013-01-08T15:27:13.553
> 
> 标签：android, avd

这似乎是一个很简单的问题，但我不知道该怎么做。

[这个](https://stackoverflow.com/questions/8119282/dont-see-android-sdk-and-avd-manager-when-execute-android-tool-command)问题建议我需要打开“android”unix exec 文件并传入一些参数。但是，如果我能找出哪些参数，我会被诅咒的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:32:18.660

从命令行类型：

```
$>emulator -avd yourAvdName.avd 
```

您需要安装 Android SDK 才能执行此操作（并在环境中正确配置 AVD 等）。

至少在没有安装 Android SDK 的情况下，您无法运行模拟器，您不一定需要 IDE，但您确实需要 SDK。

如果您想在不使用 IDE 的情况下访问 SDK 工具，可以在命令行中键入：

```
$>android 
```

# android - Android SurfaceView 线程

> ID：14218347
> 
> 赞同：0
> 
> 时间：2013-01-08T15:27:30.237
> 
> 标签：android, surfaceview

我创建了包含圆圈的自定义 SurfaceView。我想使用触摸事件旋转这个圆圈。但我不明白 SurfaceView 的线程何时必须暂停和恢复。如果线程必须在应用程序处于活动状态时始终运行或仅在圆圈旋转时运行？？？我运行 LunarLander 示例，并在应用程序处于活动状态时始终运行此应用程序线程。是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:05:12.990

`SurfaceView`没有自己的线程，可以由后台线程绘制。

有区别

*你应该保持线程运行吗？*

好吧，这取决于线程是否有一点。如果你需要保持它运行。显然，如果你不需要，你不应该。

如果线程必须接收触摸事件，我建议您将其保持打开状态

# c++ - 从 Eclipse IDE 运行 C++ 应用程序

> ID：14218349
> 
> 赞同：1
> 
> 时间：2013-01-08T15:27:35.883
> 
> 标签：c++, eclipse, configuration, output, post-build-event

我正在使用 Eclipse IDE。我这里有一些基本的源代码，包括头文件。一直使用 cygwin 作为 C++ 编译器。它编译我的应用程序并且不会产生任何错误。但是我在 IDE 的控制台上看不到输出。当我自己运行可执行文件时，它会产生输出。如何配置 Eclipse IDE 以将输出重定向到 IDE 的控制台？

这就是我得到的全部：

```
15:40:11 **** Incremental Build of configuration Debug for project GetCompiled ****
make all 
Building target: GetCompiled.exe
Invoking: Cygwin C++ Linker
g++  -o "GetCompiled.exe"  ./Compiling.o   
cygwin warning:
  MS-DOS style path detected: D:\Aristotelis\C++\GetCompiled\Debug
  Preferred POSIX equivalent is: /cygdrive/d/Aristotelis/C++/GetCompiled/Debug
  CYGWIN environment variable option "nodosfilewarning" turns off this warning.
  Consult the user's guide for more details about POSIX paths:
    http://cygwin.com/cygwin-ug-net/using.html#using-pathnames
Finished building target: GetCompiled.exe

15:40:12 Build Finished (took 702ms) 
```

选择要运行的应用程序： ![在此处输入图像描述](../Images/26ae3a08239d56574ebfaf0e742eb879.png)

我尝试通过选择作为 C++ 应用程序运行来从 IDE 运行 exe 文件，但它不会产生任何输出。此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:43:26.150

Eclipse/CDT 不会在每次构建后自动运行您的应用程序。您需要通过菜单 Run->Open Run->Run 或使用键盘快捷键 Crtl+F11，然后再次检查控制台窗口。

一项高级功能是将您的应用程序设置为**构建后事件**。为此，请转到您的构建设置并找到适当的子菜单并在那里输入您的 application.exe 的名称（我现在还没有 Eclipse）。使用此设置，应用程序将在每次成功构建后自动启动。**如果您进行自动化单元测试**，这会派上用场。

# asp.net-mvc - 从 Ajax Post 操作加载 jqGrid

> ID：14218352
> 
> 赞同：2
> 
> 时间：2013-01-08T15:27:48.907
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jqgrid, jqgrid-asp.net

我有一个简单的报告页面 - 几个文本框，当输入和提交数据时，我想在同一页面上异步加载 jqgrid。我正在使用 JQGrid 的 MVC 版本。

没有 jqgrid 我可以加载表格数据，我的视图如下所示

```
@using (Ajax.BeginForm("GetReport", new AjaxOptions {UpdateTargetId = "result", HttpMethod = "Post" }))
{
        <div class="editor-label">Start Date</div>
    <div class="editor-field">@Html.Editor("StartDate", "DateTime")</div>

    <div class="editor-label">End Date</div>
    <div class="editor-field">@Html.Editor("EndDate", "DateTime")</div>

    <input type="submit" value="Submit" />
}

<div id="result"></div> 
```

而不是结果是一个表，我想在它的位置显示一个 jqGrid。定义如下的 jqGrid。

```
@Html.Trirand().JQGrid(Model.ReportGrid, "ReportGrid") 
```

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T17:01:04.530

我将说明我将如何做到这一点，我认为这也适用于您（我构建了许多带有 MVC3 后端的 jqGrid。

您已经有了 HTML 组件，或者您可以使用类似的东西。

```
<div id="ExampleGridContainer" >
    <table id="ExampleGridName"  class="scroll" cellpadding="0" cellspacing="0" ></table>
    <div id="ExampleGridPager" class="scroll" style="text-align:center;"></div>
</div> 
```

然后对于您的 Javascript，您需要包含对两者的引用（在此示例中，我使用英语作为我的位置）

```
<script src="@Url.Content("~/Scripts/trirand/i18n/grid.locale-en.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/trirand/jquery.jqGrid.min.js")" type="text/javascript"></script> 
```

如果它是您的 _Layout.chtml 之一或其中之一，您可以将其包含在您的页面上

然后在视图的脚本部分中，您可以构建类似于

```
<script type="text/javascript">
    $(document).ready(function () {

    //initalize jqGrid
    $('#ExampleGridName').jqGrid({
        datatype: 'json',
        url: '/ControllerName/ActionName',
        colNames: [ 'ColumnOneName', 'ColumnTwoName']
        colModel: [
        { name: 'ColumnOneName', //etc}
        { name: 'ColumnTwoName', //etc}
        ],
        pager: $('#ExampleGridPager'),
        rowNum: 5,
        rowList: [5,10,20],
        sortname: 'ColumnOneName',
        //etc
        //rest of grid settings
    });
});
</script> 
```

现在在上面的示例中`datatype: 'json'`，`url:`当显示视图并处理 ready 事件时填充属性，您的网格将转到 URL 并查找数据。如果您想稍后在另一个操作之后执行此操作，或者动态重复它，您可以从`datatype: 'local',`and no`url:`属性开始。

当需要设置这些属性并重新加载网格时，您可以：

```
//set the `datatype:` and `url:` properties and load the grid
$('#ExampleGridName').jqGrid('setGridParam', { datatype: 'json', url: '/ControllerName/ActionName' }).trigger('reloadGrid', [{ page: 1}]);

//reload the grid if the `datatype:` and `url:` properties are already configured
$('#ExampleGridName').jqGrid().trigger('reloadGrid', [{ page: 1}]); 
```

在您的控制器上，您将拥有一个能够响应数据请求并以 JSON 格式生成结果的操作。这绝不是一个基本示例，说明如何使用具有动态加载的 MVC3 jqGrid 启动和运行，并且还有许多更高级的过滤、搜索等选项。

```
public ActionResult ActionName(string sidx, string sord, int page, int rows, bool _search, string filters)
{
 //load data from somthing, 
IQuerable<Object> results = database.getresults //whatever you want to populate a set of data really

int totalRecords = results.Count();

var pagedResults = results.OrderBy(sidx + " " + sord).Skip((page -1) * rows).Take(rows);

    var jsonData = new
    {
        total = (totalRecords + rows - 1) / rows,
        page = page,
        records = totalRecords,
        rows = (
            from tempValue in pagedResults.ToList()                    
            select new
            {
                cell = new string[] {       
                    tempValue.ColumnOneValue,
                    tempValue.ColumnTwoIntValue.ToString(),
                    //Etc
            }).ToArray()

    };
    return Json(jsonData, JsonRequestBehavior.AllowGet);
}//ActionName 
```

这将是显示 jqGrid 并在其他操作/事件之后与其动态交互的一种非常基本的方式。`enter code here`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T19:24:00.593

经过一番挣扎后，我就是这样做的。我有一个主要的观点和一个部分的观点。最初，主视图不包含局部视图。提交数据时，会加载部分视图。

我的报告.cshtml

```
@{
    ViewBag.Title = "Report";
}
<h2>Report</h2>  
<br />    
@using (Ajax.BeginForm("GetReportData", new AjaxOptions { UpdateTargetId = "result", HttpMethod = "Post", InsertionMode = InsertionMode.Replace}))
{

     <div class="editor-label">Start Date</div>
    <div class="editor-field">@Html.Editor("StartDate", "DateTime")</div>

    <div class="editor-label">End Date</div>
    <div class="editor-field">@Html.Editor("EndDate", "DateTime")</div>

    <input type="submit" value="Submit" />
}

<div id="result">

</div> 
```

然后我有 Grid-MyReportPartial.cshtml 的部分视图

```
@model MyGridModel
@using Trirand.Web.Mvc    
<link href="@Url.Content("~/Content/theme/ui.jqgrid.css")" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="@Url.Content("~/Scripts/trirand/i18n/grid.locale-en.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/trirand/jquery.jqGrid.min.js")"></script>

<br />
 @Html.Trirand().JQGrid(Model.Grid, "ReportGrid") 
```

我的控制器具有以下内容

```
 public ActionResult MyReport()
        {
            var gridModel = new Models.Grid.EmpHeadcountGridModel();
            var grid = gridModel.MyGrid;
            SetupHeadCountGrid(grid, DateTime.Now.ToShortDateString(), DateTime.Now.ToShortDateString());
            return View(gridModel);
        }
        public ActionResult GetReportData(string startdate ,string enddate)
        {
            var gridModel = new Models.Grid.MyGridModel();
            var grid = gridModel.EmpHeadcountGrid;
            SetupHeadCountGrid(grid,costcenterid,startdate,enddate);

            return PartialView("MyReportPartial",gridModel);

        }

        private void SetupHeadCountGrid(JQGrid grid,int costcenterid,string startdate,string enddate)
        {
            grid.ID = "ReportGrid";
            grid.DataUrl = Url.Action("GetHeadcountData") + "?startdate=" + startdate + "&enddate=" + enddate;
        }

       public JsonResult GetHeadcountData(string startdate, string enddate)
        {
            DateTime startdt = DateTime.Parse(startdate);
            DateTime enddt = DateTime.Parse(enddate + " 23:59:59");

            var gridModel = new Models.Grid.MyGridModel();

            var query= { soem query using date criteria}
            gridModel.MyGrid.DataSource = query;
            return gridModel.MyGrid.DataBind();
        } 
```

# knockout.js - 如果没有容器元素的绑定不适用于可排序

> ID：14218353
> 
> 赞同：1
> 
> 时间：2013-01-08T15:27:55.820
> 
> 标签：knockout.js, knockout-sortable

我从 rniemeyer 修改了一个 JSFiddle 来说明问题：http: [//jsfiddle.net/mTqMt/1/](http://jsfiddle.net/mTqMt/1/)

```
 <div class="container" data-bind="sortable: groupOrItems">
    <!--ko if: type=='Group'-->
    <div>
      <div class="title" data-bind="text: name()"></div>
      <!--here I would actually have a nested sortable-->
    </div>
    <!--/ko-->
    <!--ko if: type=='Item'-->
    <div class="item" data-bind="text: name()"></div>
    <!--/ko-->
  </div> 
```

Firebug 说：“TypeError：node is null”在 knockout-latest.debug.js 中的第 546 行

我用“foreach”而不是“sortable”尝试了它，然后它起作用了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T16:08:11.187

可排序绑定和 jQuery UI 可排序确实需要一个父元素来抓取您正在排序的内容。

您至少希望将整个“项目”包装在一个元素中，例如：

```
 <div class="container" data-bind="sortable: groupOrItems">
    <div>
      <!--ko if: type=='Group'-->
      <div>
        <div class="title" data-bind="text: name()"></div>
        <!--here I would actually have a nested sortable-->
      </div>
      <!--/ko-->
      <!--ko if: type=='Item'-->
      <div class="item" data-bind="text: name()"></div>
      <!--/ko-->
    </div>
  </div> 
```

更新：http: [//jsfiddle.net/rniemeyer/FSYYb/](http://jsfiddle.net/rniemeyer/FSYYb/)

# actionscript-3 - AS3 视差滚动闪烁一些影片剪辑

> ID：14218355
> 
> 赞同：1
> 
> 时间：2013-01-08T15:27:59.667
> 
> 标签：actionscript-3

嗨，我是 actionscript 3 游戏开发的新手，我正在使用图像的 31 x 500 像素高度和宽度的 Continue Background 但是问题。是当我尝试运行我的 SWF 文件时，移动的对象闪烁 2 次我不知道为什么它会发生在这里是代码：如果有人想要 swf 文件的演示，我会将它上传到某个地方并给它

```
import flash.display.MovieClip;

var br:MovieClip=new MovieClip();
 var br1:MovieClip=new MovieClip();
 br=new Branch();
br1=new Branch();
 br1.x=br.width;
addChild(br);

stage.addEventListener(Event.ENTER_FRAME, moveScroll); 
function moveScroll(e:Event):void{
br.x -= 10;  
br1.x -= 10;  

if(br.x < -br.width){
br.x = br.width;
}else if(br1.x < -br1.width){
br1.x = br1.width;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:22:07.357

您正在初始化 br var 两次。改为这样做（假设 Branch 是一个库对象）：

```
var br:Branch = new Branch();
var br1:Branch = new Branch(); 
```

# javascript - 节点：Windows 中的命令行

> ID：14218362
> 
> 赞同：4
> 
> 时间：2013-01-08T15:28:19.087
> 
> 标签：javascript, node.js, command-line

我正在使用 Windows 中的节点编写一个基本的命令行实用程序。这是文件`kevin.js`

```
#!/usr/bin/env node
console.log("Hello"); 
```

下面是我的 package.json

```
{
  "name": "kevin",
  "version": "0.0.0",
  "preferGlobal": "true",
  "bin":{
    "kevin":"kevin.js"
  }
} 
```

当我执行`node kevin.js`它的工作。`npm link`命令也可以正常工作。但是当我尝试执行我的命令`kevin`时，它不会执行，而是在记事本中打开文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T16:20:07.270

您可以使用命令创建 kevin.cmd（或 kevin.bat）来运行您的工具（例如：node kevin.js）并将其放在系统 PATH 中的某个位置。这就是大多数工具所做的（如 uglifyjs、less 等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T15:42:47.433

您可以将文件扩展名与默认的“运行时”环境相关联。

在这里查看我的解释：[https ://stackoverflow.com/a/6818266/330315](https://stackoverflow.com/a/6818266/330315)

完成后，您只需在命令行中键入“kevin”，它将使用 node.js 执行

# javascript - 检测页面上是否有动画

> ID：14218363
> 
> 赞同：3
> 
> 时间：2013-01-08T15:28:19.560
> 
> 标签：javascript, jquery, animation, jquery-animate

我知道`:animated`选择器，但目前正在遇到（可能是少数几个）旧 IE 的性能问题（如图）。我觉得这可能是我测试***ANY* Page Animation**的方式。

目前我正在循环一个区间，核心测试是**`$('*').is(':animated')`**. 这**`$('*')`**就是我担心的......但由于我不知道在我的插件下面动画的 divs / etc 是什么，我不知道该怎么做！

```
var testAnimationInterval = setInterval(function () {

    if ( ! $('*').is(':animated') ) {  // all done animating
        clearInterval(testAnimationInterval);

        animationsFinished();  // callback function
    }
}, 300);

function animationsFinished() {
    // do whatever
} 
```

有没有人找到更好/不同的方法？尤其是在性能方面？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T15:35:30.690

所有 jQuery 动画计时器都存储在数组中[`$.timers`](https://github.com/jquery/jquery/blob/master/src/effects.js#L715)。一种选择是检查`length`属性`$.timers`是否大于零：

```
if ($.timers.length > 0) {
    // something is animating
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T15:33:30.620

我认为在动画开始时将元素推送到数组中会更有效，并在动画完成后将其从数组中删除。或者更好的是，在动画开始时增加一个变量，并在完成后将其减少 1。如果变量是`0`，则当前不应运行动画。

所以，一些伪代码：

```
var animatingElements = 0;

function animationStart(){ // Add this function in your animation start events;
    animatingElements++;
}

function animationEnd(){ // Add this function  in your animation end events;
    animatingElements--;
}

if (animatingElements === 0) {
    clearInterval(testAnimationInterval);
} 
```

当然，这是假设您可以访问启动/捕获动画结尾的代码。

# visual-studio-2010 - 从 svn 切换到 tfs Visual Studio 2010

> ID：14218371
> 
> 赞同：0
> 
> 时间：2013-01-08T15:29:06.650
> 
> 标签：visual-studio-2010, svn, version-control, tfs

我们正在从 SVN 迁移到 TFS。我从 SVN 获得了最新的代码到本地文件夹，并将灵魂签入到 TFS。现在我想回到 SVN 以从 SVN 获取最新更新的文件。我确实在 Visual Studion 2010 中取消了 TFS 的解决方案。我还将工具 --> 选项 --> 源代码控制插件从 Visual Studio 2010 更改为 SVN。但我看不到“SVN 更新”以从 SVN 获取最新文件. 如何在源控件之间切换？我想从 SVN 获取最新文件并检查对 TFS 的更改。请告诉我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:50:49.460

你有两个选择，要么：

a) “Checkout for Edit” TFS 文件夹中的所有文件。然后将最新代码的 SVN 导出到该文件夹​​中。然后执行“ [TFPT /uu](http://aka.ms/tfpt) ”撤消所有未更改的编辑。对待处理的更改进行审查并将其签入 TFS。

b) 从 TFS 和 SVN 中删除所有内容导出您的存储库并将其全部重新添加到 TFS。

# sql-server-2008 - 查询语法在标识符“PIVOT”附近无效

> ID：14218372
> 
> 赞同：1
> 
> 时间：2013-01-08T15:29:09.833
> 
> 标签：sql-server-2008, c#-4.0, entity-framework-4

我正在尝试在 Entity Framework 4 中运行动态 SQL 查询

我将查询创建为字符串，它变成了这样：

```
SELECT 
    NodeID 
    ,RowID 
    ,[Comment]
    ,[Subject]
    ,[Text] 
FROM 
    (SELECT 
        nr.Node_ID as NodeID 
        ,nr.ID as RowID 
        ,f.Name 
        ,d.Value 
    FROM NoteNode.dbo.[NodeRows] AS nr 
    LEFT JOIN NoteNode.dbo.[NodeData] AS d ON nr.ID = d.NodeRow_ID 
    LEFT JOIN NoteNode.dbo.[NodeFields] AS f ON f.ID = d.Field_ID 
    WHERE nr.Node_ID = (1) ) AS x 
    PIVOT 
    ( 
        MAX(Value) 
        for Name IN ([Comment],[Subject],[Text]) 
    ) AS p 
```

直接在 MSSQL Studio 中运行此代码可以完美运行，完全没有问题。但是，当我尝试使用实体框架运行此代码时：

```
var DataRecords = new ObjectQuery<DbDataRecord>(dataQuery, (ObjectContext) _db.ObjectContext()); 
```

它不起作用，并给我以下错误：

> {“查询语法无效。靠近标识符‘PIVOT’，第 17 行，第 31 列。”}

试图弄乱语法，并清除所有换行符和制表符，但我一直回到这个错误。

有任何想法吗？

仅供参考：我愿意接受有关如何将其转换为 LINQ/LAMBDA 的建议，或者我是否应该以完全不同的方式进行此操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T16:04:41.460

您不能`ObjectQuery`用于执行原始 SQL。改为使用`ObjectContext.ExecuteStoreQuery`。

# python - 在 python 中的列表列表中选择一个列表，类似于 Mathematicas 'All'

> ID：14218373
> 
> 赞同：0
> 
> 时间：2013-01-08T15:29:14.383
> 
> 标签：python

我有一个格式列表：

```
cool_list = [[1, 2, 3, [4, 5, 6, 7]], [1, 2, 3, [4, 5, 6, 7]]] 
```

在现实世界中，数字是不同的，并且具有一定的意义。

我将如何`[4, 5, 6, 7]`从 中的所有数据中选择列表`cool_list`？我认为mathematica等价物类似于`cool_list[[All],4]`

**编辑：**
输出应该是

```
[[4, 5, 6, 7],
[4, 5, 6, 7]] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T15:34:14.547

要将 [4, 5, 6, 7] 的所有列表放入列表中：

```
[x[3] for x in cool_list] 
```

然后输出是：

```
[[4, 5, 6, 7], [4, 5, 6, 7]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T15:31:28.377

如果我说对了，你会寻找

```
third_items = [x[3] for x in cool_list]
last_items = [x[-1] for x in cool_list] 
```

# android - 超出 EditText 限制时提醒用户

> ID：14218378
> 
> 赞同：2
> 
> 时间：2013-01-08T15:29:31.117
> 
> 标签：android, android-edittext, android-alertdialog

我想将 EditText 字段限制为 150 个字符，我可以很容易地做到这一点。但是，当用户尝试超过该限制时，我还需要通过键入（即第 151 个字符）或粘贴超过 150 个字符来提醒用户。

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T15:31:51.423

通过 EditText 的方法添加一个[TextWatcher 。](http://developer.android.com/reference/android/text/TextWatcher.html)`addTextChangedListener()`只需为您的用例实施适当的方法。也许显示一个警报对话框？

```
EditText text = (EditText) findViewById(R.id.text);
text.addTextChangedListener(new TextWatcher()
{
    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after)
    {
        if (s.length() > n)
        {
            new AlertDialog.Builder(MyActivity.this).setTitle("Character limit exceeded").setMessage("Input cannot exceed more than " + n + " characters.").setPositiveButton(android.R.string.ok, null).show();
        }
    }

    @Override
    public void afterTextChanged(Editable s)
    {
    }

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count)
    {
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T15:38:07.110

为什么要麻烦，只需将提示属性设置为“最多 150 个字符”

```
android:hint="Max. 150 characters" 
```

![在此处输入图像描述](../Images/72abcfbf29698ce1e30ae2a79a4752fb.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T15:47:10.347

最好通过此属性将字符数限制为 150，

[http://androidblogger.blogspot.com/2009/01/numeric-edittext-and-edittext-with-max.html](http://androidblogger.blogspot.com/2009/01/numeric-edittext-and-edittext-with-max.html)

安卓：m​​axLength="150"

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-25T02:25:50.153

我看到了很多好的解决方案，但我想给出一个我认为更完整和用户友好的解决方案，其中包括：

1、限制长度。2，如果输入更多，给一个回调来触发你的吐司。3，光标可以在中间或尾部。4，用户可以通过粘贴字符串输入。5、始终丢弃溢出输入并保持原点。

在这里：[https ://stackoverflow.com/a/46922794/2468360](https://stackoverflow.com/a/46922794/2468360)

# c# - BackgroundWorker 奇怪的案例（程序没有响应）

> ID：14218384
> 
> 赞同：3
> 
> 时间：2013-01-08T15:29:36.897
> 
> 标签：c#, winforms, backgroundworker

我的 Windows 窗体应用程序中有一个后台工作人员。但奇怪的是，_DoWork() 完成后程序没有响应，我什么也做不了。

这就是我正在做的事情。

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    excelOperation(fileName);   
}

private void button1_Click(object sender, EventArgs e)
{
    OpenFileDialog fDialog = new OpenFileDialog();
    fDialog.Title = "Open Excel File";
    fDialog.Filter = "Excel Files|*.xls;*.xlsx";
    fDialog.InitialDirectory = @"C:\";

    if (fDialog.ShowDialog() == DialogResult.OK)
    {
        fileName = fDialog.FileName;
        backgroundWorker1.RunWorkerAsync();
    }
} 
```

而 excelOperation() 是用 excel 文件操作的东西。

当我不使用 _DoWork() 时，我的意思是当我不使用 BackgroundWorker 时，没有问题。我不知道出了什么问题。

**编辑 - 完整代码：**

```
private void excelOperation(string sFile)
    {
        string str_merged = "";

        if (sFile != "")
        {
            int rCnt = 0;
            int cCount = 0;

            dataGridView1.ColumnCount = 3;
            dataGridView1.Columns[0].Name = "Makina Kodu";
            dataGridView1.Columns[1].Name = "Malzeme Kodu";
            dataGridView1.Columns[2].Name = "Üretilecek adet";

            try
            {
                System.Threading.Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo("en-US");//excel dil hatası için
                System.Globalization.CultureInfo dil;
                dil = new System.Globalization.CultureInfo("tr-TR"); //toUpper türkçe karakter hatası için

                Excel.Application xlApp;
                Excel.Workbook xlWorkBook;
                Excel.Worksheet xlWorkSheet;
                Excel.Range range;
                //Excel.Range mergeRange;
                ArrayList al = new ArrayList();

                string str = "";

                xlApp = new Excel.ApplicationClass();
                xlWorkBook = xlApp.Workbooks.Open(sFile, 0, true, 5, "", "", true, Microsoft.Office.Interop.Excel.XlPlatform.xlWindows, "\t", false, false, 0, true, 1, 0);
                xlWorkSheet = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(5);
                range = xlWorkSheet.UsedRange;
                string[,] excelArray = new string[range.Rows.Count, range.Columns.Count];

                int temp = range.Rows.Count - 1;
                Fcount = range.Rows.Count;

                temp[] t = new temp[range.Rows.Count];

                for (rCnt = 3; rCnt <= range.Rows.Count; rCnt++)
                {
                    for (cCount = 1; cCount <= range.Columns.Count; cCount++)
                    {

                        str = (range.Cells[rCnt, 15] as Excel.Range).Value2.ToString();

                        if (str == "TOPL. ADET") // satırlar arasında ki siyah başlıkları ayırmak için
                        {
                            rCnt = rCnt + 2;
                            str = "123";
                        }

                        //değerimiz #N/A yani null ise a string değerini atıyoruz 
                        if (str == "-2146826246")
                        {
                            str = "herhangi bi string";
                        }
                        if (IsNumeric(str)) // değerimiz null ise IsNumeric fonk na yollayıp doğruluyoruz
                        {
                            if ((range.Cells[rCnt, cCount] as Excel.Range).Value2 != null && (range.Cells[rCnt, cCount] as Excel.Range).Value2 != "")
                            {
                                str = (range.Cells[rCnt, cCount] as Excel.Range).Value2.ToString();
                                excelArray[rCnt - 1, cCount - 1] = str;

                                if (cCount == 1) { t[rCnt - 3].col_A = str; }
                                if (cCount == 4) { t[rCnt - 3].col_B = "00001"; }
                                if (cCount == 15) { t[rCnt - 3].col_C = str; }

                                if (cCount == 1) { str_merged = str; } //merged cell leri hafızada tutuyoruz

                            }
                            else // hafızadaki merged cell leri array imze atıyoruz
                            {
                                if (cCount == 1) { t[rCnt - 3].col_A = str_merged; }
                            }
                        }
                    }
                    string[] row = { t[rCnt - 3].col_A, t[rCnt - 3].col_B, t[rCnt - 3].col_C };
                    if (row[1] != null)
                    {
                        DataRow dr = dt.NewRow();
                        dr["malzeme"] = row[0];
                        dr["makine"] = row[1];
                        dr["miktar"] = row[2];
                        dt.Rows.Add(dr);
                    }
                    int percentage = 0;
                    percentage = rCnt * 100 / range.Rows.Count;
                    backgroundWorker1.ReportProgress(percentage);
                }

                bool hataVarMi = false;
                for (int i = 0; i < t.Length; i++)
                {
                    if (t[i].col_B == null || t[i].col_B == "")
                    {
                        continue;
                    }
                    DataSet ds = DBClass.Default.SelectCommand("select STOK_KODU from TBLSTSABIT where STOK_KODU = '" + t[i].col_B + "'");
                    if (ds.Tables[0].Rows.Count == 0)
                    {
                        hataVarMi = true;
                        textBox1.Text += t[i].col_B.ToString() + "\r\n";
                    }
                }
                if (hataVarMi)
                {
                    formHeight("buyuk");
                    groupBox1.Visible = true;
                    lblDurum.Text = "Mamul Kodu Hatası!";
                }
                else
                {
                    formHeight("kucuk");
                    btnNetsis.Enabled = true;
                    lblDurum.Text = "Veriler aktarıldı. Netsis'e kaydetme işlemi yapabilirsiniz. ";
                }
                btnDurdur.Visible = false;
                //xlApp.Application.Quit();
            }
            catch (Exception ex)
            {
                btnDurdur.Visible = false;
                MessageBox.Show(ex.ToString());
            }
        }
    }

private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        try
        {
            dataGridView1.DataSource = dt;
        }
        catch (Exception ex)
        { 

        }
        return;
    }

private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {
        excelOperation(fileName);   

    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T15:35:53.300

不要填写`DataGridView`你的后台线程。填充`DataTable`对象或自定义对象的集合。并将其分配给事件处理程序`DataSource`上的 DataGridView 。`RunWorkerCompleted`

样本：

```
private void button1_Click(object sender, EventArgs e)
{
    OpenFileDialog fDialog = new OpenFileDialog();
    //...
    if (fDialog.ShowDialog() == DialogResult.OK)
        backgroundWorker1.RunWorkerAsync(fDialog.FileName);
}

private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    string fileName = (string)e.Argument;
    // fill foos from excel
    List<Foo> foos = excelOperation(fileName);    
    e.Result = foos;
}

private void backgroundWorker1_RunWorkerCompleted(object sender, 
                                                  RunWorkerCompletedEventArgs e)
{
    dataGridView1.DataSource = (List<Foo>)e.Result;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T15:38:25.330

这是一个类似问题的链接：

[BackgroundWorker 和 COM 互操作的问题](http://social.msdn.microsoft.com/Forums/en-US/clr/thread/c3618c98-24b3-4aa6-ad32-61763cdee006/)

如果您手动创建线程并更改线程的单元状态怎么办？也许，这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T15:35:30.313

`excelOperation`可能您正在挂起 UI 线程，锁定该方法内的一些 UI 控件 。

我看到你写的是你正在填充一个网格或类似的东西。你怎么样？您应该在一些背景变量上完成这项工作，并在工作完成后将其分配给网格的数据源或您需要的任何地方。

**编辑：**只需阅读lazyberezovsky的答案

# java - 如何使 E1 += E2 非法而 E1 = E1 + E2 合法？

> ID：14218385
> 
> 赞同：13
> 
> 时间：2013-01-08T15:29:35.977
> 
> 标签：java, expression, concatenation, variable-assignment

我一直在阅读 Bloch 和 Gafter 的 Java Puzzlers 并进入了谜题 10 (Tweedledee)。这个谜题的本质是

> 为变量提供声明，`x`这样`i`这是一个合法的声明：
> 
> ```
> x = x + i; 
> ```
> 
> 但这不是：
> 
> ```
> x += i; 
> ```

根据这本书，解决方案看起来像这样：

```
Object x = "Buy ";
String i = "Effective Java!"; 
```

该书声称，在`+=`运算符中，只有当左侧表达式具有 type 时，右侧表达式才可以是任何类型`String`。但是，我尝试运行此代码，它编译并运行没有任何问题。

然后我深入研究了 Java 语言规范。第 15.26.2 节讨论了两种情况：左侧表达式是数组访问表达式时，以及不是。如果左侧操作数表达式不是数组访问表达式，则 JLS 不会说明左侧表达式是字符串。如果是，这部分适用：

> 如果 T 是引用类型，那么它必须是 String。因为 String 类是 final 类，所以 S 也必须是 String。因此，对于复合赋值运算符，从不需要简单赋值运算符有时需要的运行时检查。
> 
> ❖ 数组组件的保存值和右手操作数的值用于执行复合赋值运算符（必须是+=）指示的二元运算（字符串连接）。如果此操作突然完成，则赋值表达式出于同样的原因突然完成并且不发生赋值。

这里的 T 是在编译时确定的左侧操作数的类型，S 是选定的数组组件。所以我想我会把我的代码修改成这样：

```
Object[] x = {new Object()};
String i = "Effective Java!";
x[0] += i; 
```

但是即使这段代码编译和运行也没有任何问题，即使它甚至`new Object()`不是远程的`String`.

为什么会这样？这是否意味着 Java 编译器偏离了 JLS？还有可能以某种方式解决原来的难题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T17:06:46.490

尝试使用 javac < 1.4.2，它也可以在那里工作。

这是不同版本之间的变化。1.4.2 的更改（x += i；之前允许，之后不允许）：
[http ://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4642850](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4642850)

这是正确的，因为 JLS 2\. 版本定义：

> 所有复合赋值运算符都要求两个操作数都是基本类型，除了 +=，如果左手操作数是 String 类型，它允许右手操作数是任何类型。

7 的更改（x += i；以前不允许，以后允许）：
[http ://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4741726](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4741726)

自 JLS 3\. 版以来这是正确的（请参阅[http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.26](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.26)之前的先决条件已删除）

* * *

只是一个小编辑：我看不到任何方法可以修复/解决 Java 7.0_10 中的难题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T15:40:50.473

我有以下内容，它将给定的解决方案显示为正确答案：

```
public class testIt
{
  public static void main(String args[])
  {
    new testIt();
  }

  public testIt()
  {
    Object x = "Buy";
    String i = "Effective Java!"

    x += i;

    x = x + i;
  }
} 
```

当我编译这个我得到

```
testIt.java:  incompatible types
found:     java.lang.Object
required:  java.lang.String;

  x += i;
  ^
1 error 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T15:39:39.680

在 Java 6 中，你可以说

```
Object x = 1;
String i = "i";
x = x + i; // compiles
x += i; // doesn't compile in Java 6, but does in Java 7.
System.out.println(x); 
```

* * *

> 为什么会这样？

一样

```
x[0] = x[0] + i; 
```

使用 Java 7 编译

```
Object[] x = {new Object()};
String i = "Effective Java!";
x[0] +=  i;
System.out.println(x[0]); 
```

印刷

```
java.lang.Object@a62b39fEffective Java! 
```

但不适用于 Java 6 更新 37

```
 Error:Error:line (25)java: src\Main.java:25: incompatible types
found   : java.lang.Object
required: java.lang.String 
```

> 这是否意味着 Java 编译器偏离了 JLS？

我怀疑这意味着 Java 6 不遵循当前的 JLS。它可能确实符合旧版本。

> 还有可能以某种方式解决原来的难题吗？

有一个提示。这编译

```
char ch = '0';
ch *= 1.1; 
```

这不

```
char ch = '0';
ch = ch * 1.1; 
```

# ios - 本地化设置包

> ID：14218386
> 
> 赞同：3
> 
> 时间：2013-01-08T15:29:45.663
> 
> 标签：ios, localization, ios5.1, settings.bundle, localizable.strings

我的应用程序的语言是英语和德语。我已将我的设置包本地化为德语。

我的页面之一（在 Settings.app 中）包含主题。我已按英文字母顺序（Topics.plist）将它们添加到 settings.bundle 中。我有 Topics.strings 将每个主题翻译成德语。当然题目的顺序和英文一样，这是不正确的。

有没有办法解决它？

**编辑：** 我需要某种方法将此 plist 读入数组，对其进行排序，然后将其返回到 settings.bundle。我不确定是否可以直接写入 Settings.bundle。

该行：
BOOL 成功 = [dict writeToFile:[[NSBundle mainBundle] pathForResource:@"Settings.bundle/Topics" ofType:@"plist"] atomically:YES];

此行在 iPhone 4S 5.1.1 上返回 YES，在 iPhone 5 6.0.2 上返回 NO。我猜苹果在 iOS6 中修复了这个问题，对吗？

请帮我解决我的问题，并使 Settings.bundle 中的主题以英文和德文的字母顺序显示。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T17:37:33.817

当您将包中的主题加载到数组中时，请按字母顺序对它们进行排序，然后再将它们用作表的数据源。有关示例，请参[见此代码。](https://developer.apple.com/library/ios/#samplecode/InternationalMountains/Listings/Classes_RootViewController_m.html#//apple_ref/doc/uid/DTS40008756-Classes_RootViewController_m-DontLinkElementID_8)

# mercurial - 使用“hg push”时如何解决“放弃交易”？

> ID：14218390
> 
> 赞同：40
> 
> 时间：2013-01-08T15:30:00.707
> 
> 标签：mercurial, sourceforge

我们使用*sourceforge*项目。当我们尝试推动时，mercurial abort ：

```
$ hg push

pushing to ssh://<user>@hg.code.sf.net/p/loremipsum/code
searching for changes
remote: abort: abandoned transaction found - run hg recover!
abort: unexpected response: empty string 
```

当我们尝试恢复时，它不起作用：

```
$ hg recover
no interrupted transaction available 
```

该项目的其他程序员也有同样的问题。我们是迷路的。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-08-21T08:15:50.293

就我而言，我不得不跑

```
hg recover 
```

在我推送到的**远程机器上。**它解决了问题，我可以从我的机器上推送更改。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-04T07:08:21.297

[您可以通过 ssh ( https://sourceforge.net/p/forge/documentation/Shell%20Service/](https://sourceforge.net/p/forge/documentation/Shell%20Service/) )登录到 sourceforge 。进入您的 hg 文件夹，例如 /home/hg/p/YOURPROJECTNAME/code，在`hg recover`此处运行。然后一切正常。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-08-24T13:24:56.683

如果您使用的是**bitbucket.com** **云**解决方案并收到此错误，您需要打开一张票，以便它们`hg recover`在他们的服务器上运行。

他们在回答这种类型的票方面非常快。

# .net - 在 VB 中对垃圾收集委托进行了调用

> ID：14218391
> 
> 赞同：1
> 
> 时间：2013-01-08T15:30:05.387
> 
> 标签：.net, vb.net

我一直在使用我找到的这个关键挂钩脚本，但在我的程序中使用它几秒钟后，我仍然收到错误消息。错误说：

> 对“System.Windows.Forms!System.Windows.Forms.NativeMethods+EditStreamCallback::Invoke”类型的垃圾收集委托进行了回调。

```
Public Class Keyboard
    Private Declare Function SetWindowsHookEx Lib "user32" Alias "SetWindowsHookExA" (ByVal Hook As Integer, ByVal KeyDelegate As KDel, ByVal HMod As Integer, ByVal ThreadId As Integer) As Integer
    Private Declare Function CallNextHookEx Lib "user32" (ByVal Hook As Integer, ByVal nCode As Integer, ByVal wParam As Integer, ByRef lParam As KeyStructure) As Integer
    Private Declare Function UnhookWindowsHookEx Lib "user32" Alias "UnhookWindowsHookEx" (ByVal Hook As Integer) As Integer
    Private Delegate Function KDel(ByVal nCode As Integer, ByVal wParam As Integer, ByRef lParam As KeyStructure) As Integer
    Public Shared Event Down(ByVal Key As String)
    Public Shared Event Up(ByVal Key As String)
    Private Shared Key As Integer
    Private Shared KHD As KDel
    Private Structure KeyStructure : Public Code As Integer : Public ScanCode As Integer : Public Flags As Integer : Public Time As Integer : Public ExtraInfo As Integer :
    End Structure
    Public Sub CreateHook()
        KHD = New KDel(AddressOf Proc)
        Key = SetWindowsHookEx(13, KHD, System.Runtime.InteropServices.Marshal.GetHINSTANCE(System.Reflection.Assembly.GetExecutingAssembly.GetModules()(0)).ToInt32, 0)
    End Sub

    Private Function Proc(ByVal Code As Integer, ByVal wParam As Integer, ByRef lParam As KeyStructure) As Integer

        If (Code = 0) Then
            Select Case wParam
                Case &H100, &H104 : RaiseEvent Down(Feed(CType(lParam.Code, Keys)))
                Case &H101, &H105 : RaiseEvent Up(Feed(CType(lParam.Code, Keys)))
            End Select
        End If
        Return CallNextHookEx(Key, Code, wParam, lParam)

    End Function

    Public Sub DiposeHook()
        UnhookWindowsHookEx(Key)
        MyBase.Finalize()
    End Sub

    Private Function Feed(ByVal e As Keys) As String
        Select Case e
            Case 65 To 90
                If Control.IsKeyLocked(Keys.CapsLock) Or (Control.ModifierKeys And Keys.Shift) <> 0 Then
                    Return e.ToString
                Else
                    Return e.ToString.ToLower
                End If
            Case 48 To 57
                If (Control.ModifierKeys And Keys.Shift) <> 0 Then
                    Select Case e.ToString
                        Case "D1" : Return "!"
                        Case "D2" : Return "@"
                        Case "D3" : Return "#"
                        Case "D4" : Return "$"
                        Case "D5" : Return "%"
                        Case "D6" : Return "^"
                        Case "D7" : Return "&"
                        Case "D8" : Return "*"
                        Case "D9" : Return "("
                        Case "D0" : Return ")"
                    End Select
                Else
                    Return e.ToString.Replace("D", Nothing)
                End If
            Case 96 To 105
                Return e.ToString.Replace("NumPad", Nothing)
            Case 106 To 111
                Select Case e.ToString
                    Case "Divide" : Return "/"
                    Case "Multiply" : Return "*"
                    Case "Subtract" : Return "-"
                    Case "Add" : Return "+"
                    Case "Decimal" : Return "."
                End Select
            Case 32
                Return " "
            Case 186 To 222
                If (Control.ModifierKeys And Keys.Shift) <> 0 Then
                    Select Case e.ToString
                        Case "OemMinus" : Return "_"
                        Case "Oemplus" : Return "+"
                        Case "OemOpenBrackets" : Return "{"
                        Case "Oem6" : Return "}"
                        Case "Oem5" : Return "|"
                        Case "Oem1" : Return ":"
                        Case "Oem7" : Return """"
                        Case "Oemcomma" : Return "<"
                        Case "OemPeriod" : Return ">"
                        Case "OemQuestion" : Return "?"
                        Case "Oemtilde" : Return "~"
                    End Select
                Else
                    Select Case e.ToString
                        Case "OemMinus" : Return "-"
                        Case "Oemplus" : Return "="
                        Case "OemOpenBrackets" : Return "["
                        Case "Oem6" : Return "]"
                        Case "Oem5" : Return "\"
                        Case "Oem1" : Return ";"
                        Case "Oem7" : Return "'"
                        Case "Oemcomma" : Return ","
                        Case "OemPeriod" : Return "."
                        Case "OemQuestion" : Return "/"
                        Case "Oemtilde" : Return "`"
                    End Select
                End If
            Case Keys.Return
                Return Environment.NewLine
            Case Else
                Return "<" + e.ToString + ">"
        End Select
        Return Nothing
    End Function
End Class 
```

# javascript - twitter 引导选项卡和 getBBox

> ID：14218395
> 
> 赞同：1
> 
> 时间：2013-01-08T15:30:09.970
> 
> 标签：javascript, twitter-bootstrap, svg, d3.js

考虑以下示例：http: [//jsfiddle.net/emepyc/gVNRc/](http://jsfiddle.net/emepyc/gVNRc/)

```
 <body>
  <ul class="nav nav-tabs">
    <li><a href="#plot" data-toggle="tab">Main</a></li>
  </ul>

  <div class="tab-content">
    <div id="plot" class="tab-pane">
    </div>
  </div>
 </body> 
```

当“plot”div元素在bootstrap控件下时，bbox报错为：SVGRect {height: 0, width: 0, y: 0, x: 0}

但是将 div 元素移到外面......

```
 <body>
    <div id="plot">
    </div>
 </body> 
```

... bbox 正确报告为：SVGRect {height: 146, width: 848, y: 180, x: 56}

有人知道这里发生了什么吗？

米；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T01:15:36.367

好的，所以看起来这个对话已经在其他地方进行了...... [https://groups.google.com/forum/?fromgroups=#!topic/d3-js/dW_pt5vs7kE](https://groups.google.com/forum/?fromgroups=#!topic/d3-js/dW_pt5vs7kE)

事实上，已经提到`tab-pane`如果选项卡窗格是第一个`active`选项卡窗格，如果在 div 中初始化 svg 将如何正确显示。

[http://jsfiddle.net/SzVrs/8/](http://jsfiddle.net/SzVrs/8/)

```
 <ul class="nav nav-tabs">
    <li class="active"><a href="#plot" data-toggle="tab">Main</a></li>
    <li><a href="#plotThickens" data-toggle="tab">Other</a></li>
  </ul>
  <div class="tab-content">
    <div id="plot" class="tab-pane active"></div>
    <div id="plotThickens" class="tab-pane">
        <div class="alert">
          <p>The plot thickens!</p>
      </div>
    </div>
  </div> 
```

但是如果 svg 元素不在第一个`active`选项卡内怎么办？

这是一种方法：删除 svg 元素，并在单击引导导航的 href 时重建它。

[http://jsfiddle.net/3LhtX/10/](http://jsfiddle.net/3LhtX/10/)

```
 $('a[data-toggle="tab"]').on('shown', function (e) {
   $('svg').remove();
   var svg = plot();
   BB(svg);
 }); 
```

# powershell - 日志文件输出未捕获所有数据

> ID：14218403
> 
> 赞同：1
> 
> 时间：2013-01-08T15:30:19.690
> 
> 标签：powershell

对于 Powershell v2

我有以下代码（它只是我一直在处理的大量代码的一部分）。整个地方都有写主机，我被要求看看我是否可以把它放到一个日志文件中。使用此链接，我已按照步骤操作并尝试了许多其他操作，但我无法使所有输出正常工作：

[在 Powershell 中创建日志文件](https://stackoverflow.com/questions/7834656/create-log-file-in-powershell)

很多东西都没有出现在日志文件中 - 它在日志文件中只是空白，但在屏幕上显示了输出 - 即：

1.  任何 WMI 调用输出 - 即

    > @(Get-WmiObject -Class Win32_OperatingSystem | 选择 Caption, BuildNumber, CountryCode, CSDVersion, CSName, InstallDate, @{Name=”Physical Memory Free”;Expression={“{0:N1}GB” -f($ *.FreePhysicalMemory/ 1mb)}}, @{Name=”分页文件中的可用空间”;Expression={“{0:N1}GB” -f($* .FreeSpaceInPagingFiles/1mb)}}, @{Name=”可用虚拟内存”;表达式={“{0:N1}GB”-f($_.FreeVirtualMemory/1mb)}} | 格式列表）

2.  刚刚运行的任何命令：即`net localgroup administrators`

还有更多，但似乎主要是所有 WMI 调用。

以下是有问题的代码部分：

网络部分：

```
$forward = nslookup $computername

$reverse = [System.Net.Dns]::GetHostByName($computername) | select -Expa AddressList | select -Expa ipaddresstostring | % { nslookup $_ }

LogWrite "Doing forward lookup: "
$forward
LogWrite `r`n
LogWrite "Doing reverse lookup: "
$reverse

#$computername = gc env:computername
#$serverName = SV180515

$NicConfig = Get-WmiObject -Class Win32_NetworkAdapterConfiguration -ComputerName $computername
$myCol = @()
ForEach ($Nic in $NicConfig)
{
    If ($Nic.IPAddress -ne $null)
    {
        $myObj = "" | Select-Object Description, DHCPEnabled, IPAddress, IPSubnet, DefaultIPGateway, DNSServers, WINSServers, NICModel, SpeedDuplex
        $myObj.Description = $Nic.Description
        $myObj.DHCPEnabled = $Nic.DHCPEnabled
        $myObj.IPAddress = $Nic.IPAddress
        $myObj.IPSubnet = $Nic.IPSubnet
        $myObj.DefaultIPGateway = $Nic.DefaultIPGateway
        $myObj.DNSServers = $Nic.DNSServerSearchOrder
        $myObj.WINSServers = $Nic.WINSPrimaryServer,$Nic.WINSSecondaryServer
        $registry = [Microsoft.Win32.RegistryKey]::OpenRemoteBaseKey([Microsoft.Win32.RegistryHive]::LocalMachine, $computername)
        $baseKey = $registry.OpenSubKey("SYSTEM\CurrentControlSet\Control\Class\{4D36E972-E325-11CE-BFC1-08002BE10318}")
        $subKeyNames = $baseKey.GetSubKeyNames()
        ForEach ($subKeyName in $subKeyNames)
        {
            $subKey = $baseKey.OpenSubKey("$subKeyName")
            $ID = $subKey.GetValue("NetCfgInstanceId")
            If ($ID -eq $Nic.SettingId)
            {
                $componentID = $subKey.GetValue("ComponentID")
                If ($componentID -match "ven_14e4")
                {
                    $myObj.NICModel = "Broadcom"
                    $requestedMediaType = $subKey.GetValue("RequestedMediaType")
                    $enum = $subKey.OpenSubKey("Ndi\Params\RequestedMediaType\Enum")
                    $myObj.SpeedDuplex = $enum.GetValue("$requestedMediaType")
                }
                ElseIf ($componentID -match "ven_8086")
                {
                    $myObj.NICModel = "Intel"
                    $SD = $subKey.GetValue("*SpeedDuplex")
                    $enum = $subKey.OpenSubKey("Ndi\Params\*SpeedDuplex\Enum")
                    $myObj.SpeedDuplex = $enum.GetValue("$SD")
                }
                ElseIf ($componentID -match "b06bdrv")
                {
                    $myObj.NICModel = "Broadcom"
                    $SD = $subKey.GetValue("*SpeedDuplex")
                    $enum = $subKey.OpenSubKey("BRCMndi\Params\*SpeedDuplex\Enum")
                    $myObj.SpeedDuplex = $enum.GetValue("$SD")
                }
                Else
                {
                    $myObj.NICModel = "unknown"
                    $myObj.SpeedDuplex = "unknown"
                }
            }
        }
        $myCol += $myObj
    }
}
$myCol 
```

WMI 位：

```
#Check for local groups on server
net localgroup administrators

#checking event log for errors
LogWrite "Checking System Event log for errors"
Get-Eventlog system -newest 2000 | where {$_.entryType -match "Error"} | Format-Table TimeWritten, EventID, Message -auto

LogWrite `

LogWrite "Checking Application Event log for errors"
Get-Eventlog application -newest 2000 | where {$_.entryType -match "Error"} | Format-Table TimeWritten, EventID, Message -auto

Get-WMIObject Win32_LogicalDisk | Select SystemName,DriveType,DeviceID,VolumeName,@{Name=”size(GB)”;Expression={“{0:N1}” -f($_.size/1gb)}},@{Name=”freespace(GB)”;Expression={“{0:N1}” -f($_.freespace/1gb)}},@{Name=”Percentage(%) Free”;Expression={“{0:0}%” -f($_.freespace*100/$_.size)}}| Format-Table -AutoSize

$pagefilesize = Get-WmiObject win32_pagefile | ForEach-Object {$_.FileSize/1gb}

#LogWrite "Page File is set to"$pagefilesize"GB"

#check pagefile is systemed managed - if it is set to 0 then it is system managed
$PageFileSystem = Get-WmiObject Win32_PageFileSetting

if ($PageFileSystem.MaximumSize -eq "0")
{
LogWrite "Page File is System Managed and set to"$pagefilesize"GB"
}
else
{
LogWrite "*********ERROR - Page File is not System Mangaged*********"
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T15:50:12.067

运行 powershell.exe -file script.ps1 *> c:\log.txt 这应该在日志文件中写入所有输出和错误

或者，您可以使用 start-transcript ：

```
start-transcript -path c:\temp\mylog.txt
.\myscript.ps1
stop-transcript 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T17:10:34.600

您是否考虑过在函数中收集脚本？然后你可以运行脚本中的函数`Out-File -Append`来记录它。替换`Write-Host`为，`Write-Output`因为 write-host 是交互式 cmdlet。然后在你的运行命令中提供 logpath。这是一个示例：

无标题2.ps1

```
param($logpath)

function test {
$service = Get-Service | where {$_.status -eq "Running" } 
$service | ft name, status -auto
Write-output "hey"
ping 10.0.0.1

net localgroup
}

if($logpath) {
    #Run functions in script
    test | Out-File -Append $logpath
} else {
    #Run functions in script
    test
} 
```

然后我在 cmd/bat 中使用以下命令运行它：

```
powershell.exe -noprofile -file Untitled2.ps1 -logpath "c:\users\graimer\desktop\testlog.txt" 
```

或在 powershell 中：

```
.\Untitled2.ps1 -logpath "c:\users\graimer\desktop\testlog.txt" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T11:19:35.030

另一个答案可能是在执行脚本后捕获缓冲区内容。看这里：http: [//blogs.msdn.com/b/powershell/archive/2009/01/10/capture-console-screen.aspx](http://blogs.msdn.com/b/powershell/archive/2009/01/10/capture-console-screen.aspx)

# c - C中2的负幂

> ID：14218409
> 
> 赞同：4
> 
> 时间：2013-01-08T15:30:45.543
> 
> 标签：c

我试图避免`pow`在 C中使用。

`pow(2,16)`可以写成`1<<16`，但是我怎么表示`pow(2,-16)`呢？如果我这样做`1/(1<<16)`，我得到 0。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T15:34:14.553

您可以将该[`ldexp`](http://pubs.opengroup.org/onlinepubs/009696899/functions/ldexp.html)函数用于两个的浮点幂，例如`ldexp(1, -16)`.

您可以期望这将是有效的，并利用您的平台将浮点数存储为尾数加二进制指数（如果适用）的事实`1 << 16`，因此如果您愿意，这就是积分表达式的道德模拟。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T15:34:03.850

负幂表示将一个数乘以幂，然后取反。

您遇到的问题相当简单：如果您从整数开始，这一切都将通过整数数学来完成，在这种情况下，当您反转时只有两种可能的结果：1/1 显然会给出 1\. 1/(任何 > 1) 都会给出 0。

要获得有意义的结果，您通常需要转换为浮点数，以便可以表示小数结果：`1/(double)(1<<16)`或`1.0/(1<<16)`.

或者，您可以只`pow`从标准库中使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T15:35:37.690

确保使用浮点数，而不是整数：

```
#include <stdio.h>
#include <math.h>

int main(int argc, char **argv) {
  printf("%f %f\n", pow(2,3), pow(2,-3));

  printf("%d %f\n", (1<<3), 1.0/(1<<3));

  return 0;
} 
```

结果：

```
bf@bf-laptop:~/playground$ ./test
8.000000 0.125000
8 0.125000 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T15:35:19.460

`1/(1<<16)`一切都是如此`int`，它类型转换为整数结果，因此得到 as `0`。你为什么不输入 cast to`float`并查看结果。

```
(float)1.0/(1<<16) 
```

# linux - 如何在不停止执行其他 shell 脚本的情况下监视后台运行的进程

> ID：14218410
> 
> 赞同：0
> 
> 时间：2013-01-08T15:30:45.307
> 
> 标签：linux, bash, process, ssh

这听起来可能是重复的。但我想说我面临的情况没有讨论。

我有一个应用程序，我需要在 linux 启动期间启动它（在我的 ARM 设备上）。然而，在启动过程中有很多脚本，我试图在一个脚本中引入应用程序。

我想在后台运行它并在它退出时保持一个监视器我想调用另一个脚本。我保留了脚本代码如下

```
# To start the application                                                
echo "Starting...."                                               
appName &                                                         
echo "Application Started"
appPid=$!                                                          
while kill -0 $appPid                                              
do                                                                 
    sleep 1                                                        
done                                                            
wait $appPid                                                    
exitstatus="$?" 
```

但发生的是当它被执行时。未加载启动序列中的其他脚本，我无法从键盘发出 TERM 和 INT 信号

我是脚本新手。我知道我犯了一个愚蠢的错误，但我无法弄清楚自己。

我还阅读了有关陷阱的信息，但我只是想知道在上述情况下要遵循的最佳做法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:50:17.470

您的 init 脚本应该异步调用另一个脚本。这个其他脚本应该同步调用目标。当目标退出时，在那里做任何你需要做的事情。

**初始化文件**

```
/bin/daemon.sh < /dev/null >/dev/null 2>&1 & 
```

**守护进程**

```
appName
exitstatus=$?
/usr/bin/app-terminated.sh 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:12:04.520

这将修复您的挂起启动：

```
 echo "Starting...."
    (
      appName &
      appPid=$!
      echo "Application Started"

      wait $appPid
      exitstatus="$?"
      # more commands here
    ) & 
```

您不需要“kill -0”循环和“等待”，它们或多或少做同样的事情（虽然等待效率更高）。"( ) &" 启动一个在后台运行的子shell，因此您的启动过程不会挂起。由于“等待”的限制，您必须启动该过程并在同一个子外壳中等待它。

这种结构对于启动/监视/重新启动有问题的守护程序很有用，在这里可能有点矫枉过正，最好不要直接放在启动脚本中。如果您只想在启动时运行一次应用程序，并在退出时运行一次脚本/报告，则更简单的方法是按顺序运行进程：

```
(
  echo "Starting application"
  appName
  exitstatus="$?" 
  # more commands here
) & 
```

# java - 数组上的正则表达式匹配（Java）

> ID：14218412
> 
> 赞同：0
> 
> 时间：2013-01-08T15:30:52.323
> 
> 标签：java, regex, arrays, function

在 Java 中，我有一个`String[]`文件路径。我需要一个函数来获取`String[]`返回值，其中包含与指定正则表达式匹配的所有字符串。

Java 是否有一个内置函数或者我必须自己做这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T15:38:18.757

Java SE 中没有这样的函数来处理字符串数组。但是，如果您直接使用文件系统，那么您可以使用

```
 String[] files  = new File("dir").list(new FilenameFilter() {
        @Override
        public boolean accept(File dir, String name) {
            return name.matches(regex);
        }
    }); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-08T15:38:41.813

你必须做一个循环并逐个字符串检查

```
public static void main(String args[]) {
    String[] a = {"1", "a", "b" };
    List<String> b = new ArrayList<String>();
    for (int i=0; i<a.length; i++) {
        if (a[i].matches("(a|b)")) { // matches uses regex
            System.out.println("Match " + a[i]);
            b.add(a[i]);
        }
    }
} 
```

点赞乞丐：

```
public static void main(String args[]) {
    String[] a = {"1", "a", "b" };
    String [] res;
    List<String> b = new ArrayList<String>();
    Pattern p = Pattern.compile("(a|b)");
    Matcher m;
    for (int i=0; i<a.length; i++) {
        m = p.matcher(a[i]);
        if (m.matches()) {
            System.out.println("Match " + a[i]);
            b.add(a[i]);
        }
    }
    res = (String[]) b.toArray();
} 
```

更清洁：

```
private static String[] getMatches(String[] strings) {
    Pattern p = Pattern.compile("(a|b)");
    List<String> matches = new ArrayList<String>();

    for (String s : strings) {
        if (p.matcher(s).matches()) {
            matches.add(s);
        }
    }

    return (String[]) matches.toArray();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T16:31:42.487

我要做的一件事是将字符串数组变成一个列表对象。

```
List<String> listFiles = Arrays.asList(strFiles); 
```

正如 beder 所指出的，迭代 for 循环示例可能是最简单和最安全的方法。

仅使用标准库的唯一其他方法是创建一个迭代器对象并从列表中删除任何不匹配的元素。

```
//Sudo-code
Iterator<String> iterator = listFiles.iterator();
Pattern pattern = new Pattern("foo");
while(iterator.hasNext()){
    String file = iterator.next();
    Matcher matcher = pattern.matcher(file);
    if(!matcher.matches()){
        iterator.remove();
    }
} 
```

在标准库之外，您可能想看看一些函数式编程库。Apache-commons、Guava 和 lambdaJ 是唯一能想到的。

匹配器只是一个谓词函数，因此您可以轻松地环绕称为过滤器的高阶函数。此示例是使用 apache-commons 语法编写的。他们如何制作谓词和闭包对象有一些样板。如果您想要更清洁的东西，请使用 lambbdaJ，因为它构建在 hamcrest 之上。

```
public class MatchesPattern implements Predicate{
    Pattern pattern;
    public MatchesPattern(String strPattern){
        this.pattern = new Pattern(strPattern);
    }

    @Override
    public boolean evaluate(Object input) {

        if( input instanceof String){
            Matcher matcher = pattern.matcher((String)input);
            return matcher.matches();
        }
        return false;
    }
}

public void foo(String[] strFiles){
    List<String> files = Arrays.asList(strFiles);
    CollectionUtils.filter(files, new MatchesPattern("bar"));
} 
```

# php - 处理并发的当代 PHP 模式，或者这不是问题？

> ID：14218413
> 
> 赞同：1
> 
> 时间：2013-01-08T15:30:52.170
> 
> 标签：php, concurrency

上一次我涉足 php 是在 2004 年，当时 nukephp 的日子里，可以在脚本读取文件、增加文件并将其写回的地方创建计数器。那时，当我编写这些类型的脚本时，我并不担心锁定文件并在下一个请求 die() 时如果它无法获得锁定。

现在我。我相信你们中的很多人都是。那么当代现代 Web 开发人员如何处理这个问题呢？是否有新的系统方法来解决它？据我所知，Ajax 本身并没有提出解决此问题的方法。它似乎只是关于异步请求，没有关于服务器应该如何处理两个客户端同时使用两个单独的值更新文件。

无论如何，在 PHP 的世界中，有没有机制、模型、模式、架构可以让我回到我曾经感觉到的原子性的幻觉？如果我想更现代地创建诸如 stackexchange/utube 评论之类的 Web 服务，我应该使用任何资源吗？

编辑：如何使用 php 中的框架创建一个简单的计数器脚本，该框架提供无锁货币，并且不依赖数据库来处理协调事务，以及可以处理文件系统上的数据的东西（此数据是非结构化的，不需要在数据库中）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:23:12.833

呃......不想打破它，但寻求“无锁并发平面文件更新”就像试图在地狱中寻找飞猪溜冰一样。

解决方案*lock files*在过去 8 年中没有改变，而且很可能永远不会改变。这是根本。要么使用锁，要么使用数据库。数据没有结构并不重要，您可能*已经在*使用数据库，因此要么在某处的表中创建一个字段，要么创建一个更健壮的结构，以允许您比一个更深入地研究您的数据简单地统计自任意日期以来的所有点击量。

```
TABLE Articles
  ID INT PK
  ...

TABLE Viewcount
  Date        DATE  PK
  Article_ID  INT   PK
  NumViews    INT

INSERT INTO Viewcount (Date, Article_ID, NumViews)
  VALUES(TODAY(), 12345, 1)
  ON DUPLICATE KEY UPDATE NumViews=NumViews+1 
```

需要注意的是，如果您使用像 C 这样的编译语言，您可以编写一个守护程序来坐在该文件上并增加它，但您基本上只是将锁定文件移动到位于 RAM 中某处的布尔值。

# google-apps-script - 如何组织 addCallBack 元素以及何时/何处存储列表框中选择的值

> ID：14218414
> 
> 赞同：0
> 
> 时间：2013-01-08T15:30:51.983
> 
> 标签：google-apps-script

我创建了一个自动填充 UI 的代码。当我在列表框中选择一个项目时，它会启动一个查找要填充的数据的函数。我认为问题来自层次结构：列表框在 grid1 中，grid1 在面板中。如何使用回调元素以及为什么......我真的不明白为什么要使用它并且谷歌文档并不完整。添加数据的单击按钮运行良好，但我不明白为什么 changehandler 变量是“未定义” 这是我的代码：

```
 var submissioSSKey = 'XXXXXX';//Change this key to your spreadsheet key
//creation de l'interface d'ajout des déchets

function addWasteData() {
  var app = UiApp.createApplication().setTitle('Ajout de déchet').setHeight(400).setWidth(500);
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var wasteListSheet = ss.getSheetByName("Registre déchets");
  //1\. creation d'une grille pour structurer la app:
  var mypanel = app.createVerticalPanel().setId('mainPanel'); 
  var grid1 = app.createGrid(2, 3).setId('grid1').setStyleAttribute("border","3px double #CCCCCC");
  var grid2 = app.createGrid(3, 3).setStyleAttribute("border","1px solid #CCCCCC");
  var grid3 = app.createGrid(3, 3).setStyleAttribute("border","1px solid #CCCCCC");
  var grid4 = app.createGrid(3, 3).setStyleAttribute("border","1px solid #CCCCCC");

  //2.Labels informatifs
  grid1.setWidget(0, 0, app.createLabel('Déchet'))
  .setWidget(0, 1, app.createLabel('Quantité'))
  .setWidget(0, 2, app.createLabel('Unités'));

  grid2.setWidget(0, 0, app.createLabel('Prix'))
  .setWidget(0, 1, app.createLabel('€ / unit'))
  .setWidget(1, 0, app.createLabel('Traitement'))
  .setWidget(1, 1, app.createLabel('Transport'))
  .setWidget(1, 2, app.createLabel('Location'));

  grid3.setWidget(0, 0, app.createLabel('Dates'))
  .setWidget(1, 0, app.createLabel('Enlèvement'))
  .setWidget(1, 1, app.createLabel('Facture'))
  .setWidget(2, 1, app.createLabel('Entrée donnée'));

  grid4.setWidget(0, 0, app.createLabel('Codes'))
  .setWidget(0, 1, app.createLabel('déchet'))
  .setWidget(1, 0, app.createLabel('Regroupement'))
  .setWidget(1, 1, app.createLabel('Valorisation'))
  .setWidget(1, 2, app.createLabel('Élimination'));
  // text box et listes
  grid1
  .setWidget(1, 0, app.createListBox().setName('waste').setId('waste'))
  .setWidget(1, 1, app.createTextBox().setName('quantity').setId('quantity'))
  .setWidget(1, 2, app.createListBox().setId('unitListBox').setName('unit').addItem("tonnes").addItem("m³"));

  grid2.setWidget(2, 0, app.createTextBox().setName('Trait').setId('trait'))
  .setWidget(2, 1, app.createTextBox().setName('Transport').setId('transport'))
  .setWidget(2, 2, app.createTextBox().setName('Location').setId('location'));

  grid3.setWidget(2, 0, app.createDateBox().setId('enlevement').setName('enlevement'))
  .setWidget(2, 1, app.createDateBox().setId('facture').setName('facture'))
  .setWidget(2, 2, app.createDateBox().setId('inputdb').setName('inputdb'));

  grid4.setWidget(0, 2, app.createTextBox().setName('codedechet').setId('codedechet'))
  .setWidget(2, 0, app.createTextBox().setName('regroupement').setId('regroupement'))
  .setWidget(2, 1, app.createTextBox().setName('valorisation').setId('valorisation'))
  .setWidget(2, 2, app.createTextBox().setName('elimination').setId('elimination'));

  app.createTextBox().setName('info').setId('info');

  //3.définir la variable des éléments de la app pour modification dans le script
  var wasteListBox = app.getElementById("waste").setName('waste');
  var unitListBox = app.getElementById("unitListBox");
  var info = app.getElementById("info");
  var mybutton = app.createButton('Ajouter');
  //4\. creation de serveur d'évènement
  // liste deroulante déchet
  var handlerList = app.createServerChangeHandler('selectListHandler');
  handlerList.addCallbackElement(wasteListBox); //est ce bon? c est ici que ça coince
  wasteListBox.addChangeHandler(handlerList);
  // envoi des données
  var handler = app.createServerClickHandler('insertDataWaste');
  handler.addCallbackElement(mypanel)  //ici ça fonctionne
  mybutton.addClickHandler(handler); 

  //Ajout de les données déchets au menu déroulant, texte box, etc:

  //Ajout des données dans la listbox
   numItemList1 = wasteListSheet.getLastRow()-1;//-1 pour exclure la dernière ligne qui est vide
  //get the item array
  list1ItemArray = wasteListSheet.getRange(2,1,numItemList1,1).getValues();
  //Add the items in ListBox
  for(var i=0; i<list1ItemArray.length; i++){
    wasteListBox.addItem(list1ItemArray[i][0])
  }

  //creation de l'interface et affichage
   mypanel.add(grid1)
  .add(grid2)
  .add(grid3)
  .add(grid4)
  .add(mybutton);
  app.add(mypanel);
  //return app;   <-- ne fonctionne pas :/
  SpreadsheetApp.getActiveSpreadsheet().show(app);
}

//test du fonctionnement du choix dans la liste en faisant apparaitre le le choix dans le text box traitement
  function selectListHandler(z)  {
  var app = UiApp.getActiveApplication();
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var wasteListBox = z
  var wasteListSheet = ss.getSheetByName("Registre déchets");
  var traitBox = app.getElementById('trait')
  var transport = app.getElementById('transport');
  var location = app.getElementById('location');
  traitBox.setValue(rechercheDechet( wasteListBox,ss,wasteListSheet,11));
  return app;
}

//Insertion des donénes lors du clic sur le boutton de soumission
function insertDataWaste(o){
  var app = UiApp.getActiveApplication();
  var intitule = o.parameter.waste;
  var qty = o.parameter.quantity;
  var codeDechet = o.parameter.codedechet;
  var unit = o.parameter.unit;
  var trait = o.parameter.Traitement;
  var trans = o.parameter.Transport;
  var loc = o.parameter.Location;
  var fac = o.parameter.facture;
  var enlev = o.parameter.enlevement;
  var input = o.parameter.inputdb;
  var regr = o.parameter.regroupement;
  var valo = o.parameter.valorisation;
  var elim = o.parameter.elimination;
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sheet = ss.getSheetByName("Data"); //.getActiveSheet() supprimé
  var lastRow = sheet.getLastRow();
  var targetRange = sheet.getRange(lastRow+1, 1, 1, 13).setValues([[intitule,codeDechet,qty,unit,trait,trans,loc,fac,enlev,input,regr,valo,elim]]);
  return app;
} 
```

和寻找功能：

```
function rechercheDechet(value,doc,sheet,column) {
  var sh = sheet;
  var ss = doc;
  var last = sh.getLastRow(); 
  var range = sh.getRange(2, 1, last-1, column).getValues(); 
   {
  for (var i = 0; i < range.length; i++) {
    if (range[i] == value) {
      return value;
    }
  }
  return;
}

} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:13:53.393

Here is the solution by Serge Insas for search function, thanks to you. In the listbox, the items added that contains a "+" create a bug. I replaced it by words. Then it was working.

```
 function rechercheDechet(value,doc,sheet,column) {
      var sh = sheet;
      var ss = doc;
      var last = sh.getLastRow(); 
      var lastCol = sh.getLastColumn()
      var range = sh.getRange(2, 1, last-2, lastCol ).getValues(); // on prend toute la ligne de données
      for (var i = 0; i < range.length; i++) {
        if (range[i][0].toString().match(value) == value) { // on compare la 1ere colonne avec le nom
        Logger.log('trouvé '+value +'  i='+i)
          return range[i][10]; //et on prend la colonne prix (indice 0 dans le comptage dans une array >> 10 pour col 11) 
        }
      }
      return;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T17:16:54.627

将父小部件用作 CallBackElement 而不是特定的小部件要容易得多......

在您的代码中，我会像这样使用网格 1（您提出问题的地方）

```
 handlerList.addCallbackElement(grid1); //est ce bon? c est ici que ça coince 
```

代替

```
handlerList.addCallbackElement(wasteListBox); //est ce bon? c est ici que ça coince 
```

因为 wasteListBox 是您要填充的列表本身（我认为）......无论如何，作为一般规则，回调元素必须包含您想要获取值的小部件，因此层次结构中的较高层是最佳选择。为什么不使用 panel1 以确保您确定？

关于您对`return app`不工作的评论，这是正常的，并且[在文档中有明确说明](https://developers.google.com/apps-script/uiapp#DisplayingSpreadsheet)

**EDIT1：**我在您的代码中发现的另一个问题：搜索函数（rechercheDechet）返回一个称为`value`数组的变量，您通过将其分配给文本框来使用它......这不应该工作......

解释一下：当您使用`getValues()`二维数组读取电子表格中的范围时，然后在 for 循环中迭代数组的行以测试数组（一维）和字符串值之间的相等性（这将始终也失败了……）。最后，该函数返回一个与电子表格中的行（实际上是其中的一部分）相对应的数组。请注意，即使您只选择一列，该值仍将是 2D，要摆脱它，只需使用`range[i][0]`例如获取范围中的第一个单元格或`range[i].toString()`使其...一个字符串！

J'espère avoir été clair，希望足够清楚。我尝试了您的代码的副本，它似乎正在处理一些小的更改，尽管我的 SS 中没有任何数据可以显示；-)

**EDIT2：**还有另一个问题，它涉及`selectListHandler(z)`您使用服务器处理程序调用的函数：在这种情况下，变量`z`是所谓的`event`，即 UI 返回的编码数据。但是你使用`z`'*原样*'作为函数的第一个参数，`rechercheDechet`这应该是一个`range`......那里相当混乱......我建议你参考事件参数的[文档示例](https://developers.google.com/apps-script/uiapp?hl=en#ServerHandlers)或使用记录器来查看它内容`Logger.log(e.parameter)`。很难解释此答案范围内的所有内容

# c# - 获取 FileDialog 初始目录

> ID：14218416
> 
> 赞同：-1
> 
> 时间：2013-01-08T15:30:54.637
> 
> 标签：c#, .net

我正在使用 a`OpenFileDialog`让用户选择一个文件。某处的对话框保存了最后一个查找目录，我想提取它，这是否可能。

在我的应用程序的开始屏幕上，我希望最新的查找目录显示所有（有效）文件。

Ofc 我可以在用户第一次/最后一次使用对话框并保存它时以某种方式读出它，但我的想法是 Windows 必须将它保存在某个地方，所以为什么不直接使用它。有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:37:27.503

财产`InitialDirectory`呢？

[在这里您可以找到](http://msdn.microsoft.com/en-us/library/system.windows.forms.filedialog.initialdirectory.aspx)可以阅读此内容的 msdn 页面：

> InitialDirectory 属性通常使用以下来源之一设置：
> 
> *   **以前在程序中使用的路径，可能从最后的目录或文件操作中保留**。
>     
>     
> *   从持久源读取的路径，例如应用程序设置、注册表或应用程序中的字符串资源。
>     
>     
> *   标准的 Windows 系统和用户路径，例如 Program Files、MyDocuments、MyMusic 等（您可以使用 GetFolderPath 方法获取）
>     
>     
> *   与当前应用程序相关的路径，例如其启动目录（您可以使用 Application 对象上的属性获取）。

# routes - ZF2 中的默认语言路由

> ID：14218417
> 
> 赞同：0
> 
> 时间：2013-01-08T15:30:58.443
> 
> 标签：routes, zend-framework2

在 Zend Framework 2 应用程序中，我有两种语言，“nl”（默认）和“en”。'nl' 的请求网址如下：

```
/controller/action 
```

对于“en”，例如：

```
/en/controller/action 
```

首先，我想将默认语言路由/重写为：

/nl/控制器/动作

为了能够随后使用分段路由，例如：

```
[:lang/[:controller/[:action]]] 
```

我用下面的正则表达式路线尝试了这个（负面展望）

```
'lang' => array(
    'type' => 'Zend\Mvc\Router\Http\Regex',
    'options' => array(
        'regex' => '/(?!en)(.*)',
        'spec'  => '/nl$2',
     ),
), 
```

（此路由不应映射到控制器/动作，而应仅将 url 重写为新的）

但我得到：

```
Page not found.

The requested controller could not be mapped to an existing controller class. 
```

什么是正确运行的路线？还是使用 Web 服务器重写更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T23:28:56.293

路线应该是

```
/[:lang/[:controller/[:action]]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:47:59.980

不需要正则表达式路由，以下也可以。语言段是可选的。在我的应用程序中，它只能是“en”，如果省略，默认为“nl”：

```
'router' => array(
        'routes' => array(
            'home' => array(
                'type' => 'Literal',
                'options' => array(
                    'route'    => '/',
                    'defaults' => array(
                        'controller' => 'Application\Controller\Index',
                        'action'     => 'index',
                    ),
                ),
                'may_terminate' => true,
                'child_routes' => array(
                    'language' => array(
                        'type'    => 'Segment',
                        'options' => array(
                            'route'    => '[:lang/]',
                            'constraints' => array(
                                'lang'       => 'en',
                            ),
                            'defaults' => array(
                                'lang' => 'nl',
                            ),
                        ),
                    ),
                ),
            ),
        ),
    ), 
```

# sql - SQL Server 2012 - 删除选择子句中的右空格

> ID：14218418
> 
> 赞同：1
> 
> 时间：2013-01-08T15:31:04.820
> 
> 标签：sql, sql-server, sql-server-2012

我们将数据库从 IBM Informix 更改为 SQL Server。`varchar`我们的 ERP 作为默认行为保存所有数据，其中正确的空格填充's的列大小。

Informix 没有返回这些正确的空格，但现在使用 SQL Server，它为所有选择返回这些正确的空格，这是一个大问题。

我尝试使用`SET ANSI_PADDING OFF`，但我仍然得到正确的空间。

有人知道我的问题的解决方案吗？

我想删除所有选择中所有 varchar 列的所有正确空格。

tks。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T22:49:47.777

如果我理解你的话，你的应用程序中有所有的 SQL 代码，你不想经历并改变它并将应用程序推出。如果您不想这样做，除了创建某种劫持 sql server 调用并转换它们的应用程序之外，您还需要清理数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T22:58:22.560

如果您的 ERP 需要保留空间以使其正常运行，我能看到的唯一解决方案是将所有选择查询更新为`RTRIM`数据。

这可能只是您更改数据库系统所必须付出的代价。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T15:32:49.613

如何使用`RTRIM`？

```
SELECT RTRIM(ColumnName)
FROM tableName 
```

如果要更新这些列以删除尾随空格，

```
UPDATE tableName
SET columnName = RTRIM(columnName) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T15:32:52.013

使用 RTRIM() 函数或将数据类型更改为 varchar() 或 nvarchar()

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T15:33:08.197

您是否尝试过修剪查询中的空格，如下所示？

[在 SELECT 语句（MS SQL）中，如何修剪字符串](https://stackoverflow.com/questions/179625/in-a-select-statementms-sql-how-do-you-trim-a-string)

# python - 简单的for循环和打印

> ID：14218424
> 
> 赞同：-1
> 
> 时间：2013-01-08T15:31:10.193
> 
> 标签：python, for-loop

我正在使用 Python 2.7

我正在做一些非常基本的练习，这是我的代码：

```
def main():
    print """Program computes the value of an investment 
    carried 10 years into the future"""
    principal = input("Enter the principal: ")
    apr = input("Provide (in decimal format) the annual percentage rate: ")
    for i in range(10):
        principal = principal * (1 + apr)
        print "The value in 10 years will be: $", principal

main() 
```

代码正在运行，但我希望输出只是最终结果。我现在得到的是一个接一个地打印循环的所有 10 个步骤。

我该如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T15:34:34.100

Python 对缩进敏感；也就是说，它使用文本块的缩进级别来确定循环内的代码行（例如，而不是 {} 大括号）。

因此，为了将打印语句移出循环（如上一个答案），只需减少缩进

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-08T15:33:17.863

您可以将打印语句移出循环：

```
for i in range(10):
    principal = principal * (1 + apr)

print "The value in 10 years will be: $", principal 
```

这意味着 principal 的值将在 for 循环内计算，然后 principal 的值将被打印（仅一次），因为它在 for 循环之外。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-08T15:34:24.937

将打印移出循环后。或者干脆完全避免它：

```
principal *= (1 + apr)**10
print print "The value in 10 years will be: $", principal 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-08T15:34:15.887

您的 print 语句位于 for 循环内。它需要在循环之外。

您可以通过减少 print 语句的缩进来做到这一点，从而将其置于循环之外。

```
for i in range(10):
        principal = principal * (1 + apr)
print "The value in 10 years will be: $", principal #See the indentation here 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-08T15:43:51.440

只需减少 print 语句以将其放在循环之外。

此外，您应该考虑将“input”更改为“raw_input”并将其包装在“int()”周围

```
principal = raw_input("Enter the principal: ")
try:
    principal = int(principal)
except ValueError:
    print "Warning ! You did not input an integer !" 
```

# ios - 如何制作iOS简单的文字动画？

> ID：14218431
> 
> 赞同：1
> 
> 时间：2013-01-08T15:31:29.113
> 
> 标签：ios, animation, xcode4.5

简单的 iOS 文本/标签动画的最佳解决方案是什么？细节：用户需要在iOS屏幕上看到一个标签，其文本从数组de 10-15个单词，一个单词被白屏分隔，显示时间为800-900 ms，显示时间为白色屏幕为 500 毫秒。有一种注意力测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T16:18:34.933

如果你只想闪词，你可以使用`NSTimer`or just [`performSelector`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html#//apple_ref/occ/instm/NSObject/performSelector%3awithObject%3aafterDelay%3a)：

```
@interface ViewController ()

@property (nonatomic, strong) NSArray *words;
@property (nonatomic) NSUInteger wordIndex;

@end

@implementation ViewController

static CGFloat const kWordShowInterval = 0.8;
static CGFloat const kWordHideInterval = 0.4;

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.words = @[@"one", @"two", @"three", @"four"];
    self.wordIndex = 0;

    [self showWord];
}

- (void)showWord
{
    if (self.wordIndex >= [self.words count])
        return;

    self.wordLabel.text = self.words[self.wordIndex];

    [self performSelector:@selector(hideWord)
               withObject:nil
               afterDelay:kWordShowInterval];
}

- (void)hideWord
{
    self.wordLabel.text = nil;

    self.wordIndex++;
    if (self.wordIndex < [self.words count])
    {
        [self performSelector:@selector(showWord)
                   withObject:nil
                   afterDelay:kWordHideInterval];
    }
    else
    {
        // all done, go ahead and invoke whatever you want to do when done presenting the words
    }
}

@end 
```

如果你想对文本的出现或消失做一些动画（例如淡入或淡出），你可以将它与一个[`animateWithDuration`](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW111)或其他动画结构结合起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T15:49:08.517

通常核心动画是最好的方法。查看[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Introduction/Introduction.html)

# nsmutablearray - 从 plist 中读取字典数组

> ID：14218437
> 
> 赞同：0
> 
> 时间：2013-01-08T15:31:50.347
> 
> 标签：nsmutablearray, nsarray, plist, nsdictionary

嗨，我正在尝试从 plist 中读取值，这就是我的 plist 看起来像 atm

```
<plist version="1.0">
<array>
    <dict>
        <key>Title</key>
        <string>Mickey Mouse</string>
        <key>Image</key>
        <string>mickeymouse.png</string>
        <key>Hint1</key>
        <string>Hint 1</string>
        <key>Hint2</key>
        <string>Hint 2</string>
        <key>Hint3</key>
        <string>Hint 3</string>
    </dict>
    <dict>
        <key>Title</key>
        <string>Peter Pan</string>
        <key>Image</key>
        <string>peterpan.png</string>
        <key>Hint1</key>
        <string>Hint 1</string>
        <key>Hint2</key>
        <string>Hint 2</string>
        <key>Hint3</key>
        <string>Hint 3</string>
    </dict>
</array>
</plist> 
```

这是我正在使用的代码但是它只是崩溃了。

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
NSString *questionNumber = [NSMutableString stringWithFormat:@"Item 0"];
NSString *path = [[NSBundle mainBundle] pathForResource:@"Level1" ofType:@"plist"];
NSMutableArray *array = [[NSMutableArray alloc] initWithContentsOfFile:path];
NSDictionary *questionNumberDictionary = [array objectForKey:questionNumber];
NSString *questionTitle = [questionNumberDictionary objectForKey:@"Title"];
NSString *questionImage = [questionNumberDictionary objectForKey:@"Image"];
NSString *questionHint1 = [questionNumberDictionary objectForKey:@"Hint1"];
NSString *questionHint2 = [questionNumberDictionary objectForKey:@"Hint2"];
NSString *questionHint3 = [questionNumberDictionary objectForKey:@"Hint3"]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T15:42:18.680

您在以下行有问题

**`NSDictionary *questionNumberDictionary = [array objectForKey:questionNumber];`**

而不是您需要使用 for 循环遍历数组

```
 NSString *path = [[NSBundle mainBundle] pathForResource:@"Level1" ofType:@"plist"];
    NSMutableArray *array = [[NSMutableArray alloc] initWithContentsOfFile:path];

    for (NSDictionary *dict in array) {
        NSString *questionTitle = [dict objectForKey:@"Title"];
        NSString *questionImage = [dict objectForKey:@"Image"];
        NSString *questionHint1 = [dict objectForKey:@"Hint1"];
        NSString *questionHint2 = [dict objectForKey:@"Hint2"];
        NSString *questionHint3 = [dict objectForKey:@"Hint3"];

    } 
```

这将解决您的问题。

# c# - 使用横向和纵向文档

> ID：14218443
> 
> 赞同：1
> 
> 时间：2013-01-08T15:32:04.870
> 
> 标签：c#, itextsharp

我目前正在编写一个pdf api。有一种方法可以将具有不同方向的选定页面合并到一个文档中。在运行时，如果所选页面是横向的，我想像那样合并，但目前显示的所有内容都有纵向。

我在网上查看了几个帖子，但没有一个有帮助。

这是我目前拥有的：

```
public static void MergePDF(string source, string destination, PageCollection pages) {
        try {
            PdfReader reader = new PdfReader(new RandomAccessFileOrArray(source), null);

            Document doc = new Document();
            PdfWriter writer = PdfWriter.GetInstance(doc, new FileStream(destination, FileMode.Create));
            doc.Open();
            PdfContentByte contentByte = writer.DirectContent;

            foreach (Page page in pages) {
                float width = reader.GetPageSize(page.Number).Width;
                float height = reader.GetPageSize(page.Number).Height;

                PdfImportedPage pdfImportedPagepage = writer.GetImportedPage(reader, page.Number);

                doc.NewPage();
                if (width > height) {
                    doc.SetPageSize(PageSize.A4.Rotate());
                } else {
                    doc.SetPageSize(PageSize.A4);
                }
                iTextSharp.text.Rectangle psize = reader.GetPageSizeWithRotation(page.Number);

                switch (psize.Rotation) {
                    case 0:
                        contentByte.AddTemplate(pdfImportedPagepage, 1f, 0, 0, 1f, 0, 0);
                        break;
                    case 90:
                        contentByte.AddTemplate(pdfImportedPagepage, 0, -1f, 1f, 0, 0, reader.GetPageSizeWithRotation(page.Number).Height);
                        break;
                    case 180:
                        contentByte.AddTemplate(pdfImportedPagepage, -1f, 0, 0, -1f, 0, 0);
                        break;
                    case 270:
                        contentByte.AddTemplate(pdfImportedPagepage, 0, 1.0F, -1.0F, 0, reader.GetPageSizeWithRotation(page.Number).Width, 0);
                        break;
                    default:
                        break;
                }

            }

            doc.Close();

        } catch (Exception ex) {

        }
    } 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T15:34:40.080

```
if (width > height) {
                    doc.SetPageSize(PageSize.A4.Rotate()); 
```

你已经告诉你的程序，如果它比它高（横向）宽，那么它应该被旋转为纵向。只需删除该旋转段

```
 switch (psize.Rotation) {
                    case 0:
                        contentByte.AddTemplate(pdfImportedPagepage, 1f, 0, 0, 1f, 0, 0);
                        break;
                    case 90:
                        contentByte.AddTemplate(pdfImportedPagepage, 0, -1f, 1f, 0, 0, reader.GetPageSizeWithRotation(page.Number).Height);
                        break;
                    case 180:
                        contentByte.AddTemplate(pdfImportedPagepage, -1f, 0, 0, -1f, 0, 0);
                        break;
                    case 270:
                        contentByte.AddTemplate(pdfImportedPagepage, 0, 1.0F, -1.0F, 0, reader.GetPageSizeWithRotation(page.Number).Width, 0);
                        break;
                    default:
                        break; 
```

这部分正在计算页面的方向以了解旋转多少，如果您删除它，所有页面将完全按原样导入。如果您离开，它将全部旋转以垂直定位

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T16:39:40.593

根据 MKL 的建议，这很有效：

```
 Document doc = new Document();
            PdfCopy copy = new PdfCopy(doc, new FileStream(destination, FileMode.Create));
            doc.Open();

            foreach (Page page in pages) {
                doc.NewPage();
                copy.AddPage(copy.GetImportedPage(reader, page.Number));
            } 
```

谢谢。

# symfony - 在教义查询中使用数组集合作为参数

> ID：14218444
> 
> 赞同：5
> 
> 时间：2013-01-08T15:32:13.463
> 
> 标签：symfony, doctrine-orm

我有一个状态对象的 ArrayCollection，现在我想将其用作 WHERE 子句中的 IN 参数以进行学说查询。这是我的查询代码：

```
$query = $repository->createQueryBuilder('r')
                ->join('r.applicationStatus', 's')
                ->where('r.submitted IS NOT NULL')
                ->andWhere('r.created >= :date')                  
                ->andWhere('r.created < :date2')
                ->andWhere('s IN (:status)') // Here's the In statement
                ->orderBy('r.created', 'DESC')                
                ->setParameter('date', $appSearch->getDateFrom())
                ->setParameter('date2', $end)
                ->setParameter('status', $appSearch->getApplicationStatus()) //Here's the array collection
                ->getQuery(); 
```

但是查询返回零记录。为了让它工作，我必须手动遍历 $appSearch->getApplicationStatus() arraycollection 并在一个新的数组中获取状态 ID，以便查询目前产生正确的结果 - 这感觉非常低效。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T15:53:26.503

你应该这样做：

```
$statusId = array();

foreach ($appSearch->getApplicationStatus() as $status) {
    $statusId[] = $status->getId();
}

// ... Your query:
->andWhere('s.id IN (:status)')
->setParameter('status', $statusId) 
```

事实上，我认为 Doctrine 不能通过给出一个对象来过滤某些东西，它不能比较它，所以你需要使用这些对象的一个​​字段，这里是我的例子中的 id ......并且比较整数更轻你的数据库！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-08T16:44:58.810

它在控制器中工作正常。

```
$users =  $em->getRepository('EventekUserBundle:User')->getQueryf($events->getSecretariats()->toArray()) ; 
```

在存储库中=>

```
class UserRepository extends \Doctrine\ORM\EntityRepository
{

    public function getQueryFromCollection( $users)
    {
        $qb = $this->createQueryBuilder('u')
            ->select('u')
            ->andWhere('u in (:users)')
            ->setParameter('users',  $users);
        return $qb->getQuery();
    }
} 
```

# html - 将父节点拉伸到其内容宽度

> ID：14218445
> 
> 赞同：0
> 
> 时间：2013-01-08T15:32:15.710
> 
> 标签：html, css, dom, width

```
<div style='width:100%;background-color:green;padding:10px;'>
  <div style='width: 5000px;background-color:red; padding:5px;'>
  </div>
</div> 
```

[http://jsfiddle.net/8xqwW/2/](http://jsfiddle.net/8xqwW/2/)

外部 div 固定在窗口的 100%，而内部 div 以全宽呈现。

有没有办法让外部 div 伸展到内部宽度（如果它很大），同时保持至少 100% 的窗口（如果内部 div 很小）？

我不能使用**overflow-x:scroll** - 只允许滚动窗口。**min-width:100%**也没有解决我的问题。

如果不存在解决方案，我可以使用 JS 调整大小事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T15:34:56.220

尝试`display:table`外部div

# php - UNSET 不会永久删除/取消设置数组值

> ID：14218453
> 
> 赞同：0
> 
> 时间：2013-01-08T15:32:36.880
> 
> 标签：php, google-maps, unset

我有以下用于 Google 地图应用程序的脚本。有关特定地点的信息通过 ajax 发送到 $array 数组，然后添加到 $SESSION['infomarker']。这部分工作正常。但是用户也应该能够删除一个地方（如果他们后悔输入）。

这由 removeElementWithValue() 函数处理，该函数将位置 lat 和 lng 作为参数（此示例脚本中的 $val1 和 $val2）。包含“val1”和“val2”值的数组就会消失，就像它们应该的那样。但是，当我将 $val1 和 $val2 变量更改为 'val3' 和 'val4' 时，包含 'val1' 和 'val2' 的数组返回，而包含 'val3' 和 'val4' 的数组未设置。

我认为 unset() '取消设置'有问题的数组是好的，还是我需要做其他事情？

```
<?php
session_start();

if(isset($_POST['lat']) && !empty($_POST['lat']) ) {
$array = array(
                'titel' => $_POST['titel'], 
                'comment' => $_POST['comment'], 
                'lat' => $_POST['lat'], 
                'lng' => $_POST['lng'] 
                );

$_SESSION['infomarker'][] = $array;

   }    

  $val1 = 'val1';

  $val2 = 'val2';

  $newarray = removeElementWithValue($_SESSION['infomarker'], "titel", "comment", $val1, $val2);

 function removeElementWithValue($array, $key1, $key2, $value1, $value2){
 foreach($array as $subKey => $subArray){
      if($subArray[$key1] == $value1) {
      if($subArray[$key2] == $value2) 

         unset($array[$subKey]);

      }

   }
return $array;

}

print_r($newarray); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T15:37:27.780

您正在修改`$array`传递给您的`removeElementWithValue`方法的内容。您正在将`$_SESSION`数组传递给方法。

`unset`通过从`$array`. 但是，您的方法实际上是接收`$_SESSION`变量的副本，因为 PHP 将按值而不是按引用传递数组。

您可以`$array`在函数声明中为变量添加前缀 (&) 字符，这将通知 PHP 通过引用将该变量传递给函数，并将导致对函数内部数组所做的任何修改都会更改源数组( `$_SESSION`)。

澄清：

调用函数会在该方法的“堆栈”中创建一个范围。默认情况下，PHP 按值传递所有内容（对于那些想争辩说对象是通过引用传递的人——他们不是。对对象的引用是按值传递的）。

这意味着什么？嗯，这比看起来容易。拿下面的代码：

```
function myfunc($value) {
  $value = $value + 1;
}

$testing = 1;
myfunc($testing);
var_dump($testing); 
```

这将输出`int(1)`. 请注意，即使我们在函数内部增加值 - 结果不会改变`$testing`变量。这是因为`$testing`变量是在堆栈内的不同范围内声明的。就 PHP 所见，当我们调用方法时，我们实际上调用了 this `myfunc(1)`（注意数字而不是变量）。变量的值是从内存中获取的，然后将该值传递给方法。

这就是传递引用派上用场的地方。您可以通过在函数定义中的任何参数前加上一个符号来指示 PHP 通过引用传递，因此您会得到：

```
function myfunc(&$value) {
  $value = $value + 1;
}

$testing = 1;
myfunc($testing);
var_dump($testing); 
```

添加简单的 & 符号现在将使此代码打印`int(2)`。

**那么有什么区别呢？**好吧，你会记得我第一次说我们基本上是在打电话`myfunc(1)`。第二次，我们有效地调用`myfunc(0xff940ac4)`where`0xff940ac4`是`$testing`变量的内存地址。现在，我们对方法内部所做的任何更改都`$value`将更改内存地址处的数据`0xff940ac4`，而不是“复制”到此方法范围内的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T15:36:11.287

也就是说，因为在 PHP 中，默认情况下数组不是按引用传递，而是按值传递。因此，您正在使用的函数将从`$array`函数内部删除值。但这不会修改功能。如果你想有这种行为，你应该让 PHP 传递值[by-reference](http://php.net/manual/en/language.references.pass.php)。

您可以通过更改函数定义来做到这一点，如下所示：

```
function removeElementWithValue(&$array, $key1, $key2, $value1, $value2)
{ ... } 
```

# linux - 指定分隔符以将数据分成列

> ID：14218470
> 
> 赞同：2
> 
> 时间：2013-01-08T15:33:31.577
> 
> 标签：linux, shell, ubuntu, awk

我有一组数据名称 Book.txt，我想在 shell 中显示它们。但是我在尝试使用特定分隔符将我的数据分组时遇到问题

Book.txt 包含：

```
Harry Potter 1:Author1:100
Lord Of The Rings:Author2:200 
```

我可以使用以下代码在 Book.txt 中显示数据：

```
awk -F':' '{print $1 "\t" $2}' ./Book.txt 
```

但是我希望它们在列中很好地排列，所以我尝试使用管道列

```
awk -F':' '{print $1 "\t" $2}' ./Book.txt | column -s "/t" 
```

但是当我尝试它时，它似乎不起作用。我不能使用 column -t 因为我的标题有空格并且它充当分隔符。我想改用“制表符”作为分隔符

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T15:39:10.533

可以直接使用`column`命令吗？

`column -s ":" -t Book.txt`

结果：

```
Harry Potter 1     Author1  100
Lord Of The Rings  Author2  200 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T15:50:29.397

这说明了标题和最后一列的删除：

```
$ cat file 
Book Header
Harry Potter 1:Author1:100
Lord Of The Rings:Author2:200

$ awk -F':' -v OFS=':' '{print $1, $2}' file | column -s: -t
Book Header
Harry Potter 1     Author1
Lord Of The Rings  Author2 
```

# android - 在视图页面片段中显示地图 v2 NullPointerException

> ID：14218474
> 
> 赞同：-1
> 
> 时间：2013-01-08T15:33:54.287
> 
> 标签：android

两三天以来，我一直在尝试在视图页面中实施 google map v2。我只收到 NullPointerException 错误。我不知道我做错了什么。我想要的是在 2 个片段之间滑动两次，其中一个是地图。另一个片段只是一个文本视图（还不重要）。

这是我的代码：

```
public class MainActivity extends FragmentActivity {

SectionsPagerAdapter mSectionsPagerAdapter;

/**
 * The {@link ViewPager} that will host the section contents.
 */
ViewPager mViewPager;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Create the adapter that will return a fragment for each of the three
    // primary sections of the app.
    mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());

    // Set up the ViewPager with the sections adapter.
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}} 
```

FragmentPagerAdapter：

```
public class SectionsPagerAdapter extends FragmentPagerAdapter {

public SectionsPagerAdapter(FragmentManager fm) {
    super(fm);
}

@Override
public Fragment getItem(int position) {

    if (position < 1) {
        Test_Fragment f = new Test_Fragment(position);
        return f;
    }
    else {
        Fragment_Map f = new Fragment_Map(position);
        return f;
    }
}

@Override
public int getCount() {
    // Show 2 total pages.
    return 2;
}

@Override
public CharSequence getPageTitle(int position) {
    switch (position) {
    case 0:
        return "Test Fragment";
    case 1:
        return "Map Fragment";
    }
    return null;
}
      } 
```

地图片段：

```
public class Fragment_Map extends Fragment {

GoogleMap mMap;

private int fragmentNR;

public Fragment_Map(int nr) {
    this.fragmentNR = nr;
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    if (mMap == null) {
        // Try to obtain the map from the SupportMapFragment.
        mMap = ((SupportMapFragment)getFragmentManager().findFragmentById(R.id.map)).getMap();

        if (mMap != null) {
            setUpMap();
        }
    }
    return (RelativeLayout) inflater.inflate(R.layout.fragment_map, container, false);
}

private void setUpMap() {
    mMap.addMarker(new MarkerOptions().position(new LatLng(0, 0)).title("Marker"));
}
    } 
```

main.xml 看起来像

```
<android.support.v4.view.ViewPager xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/pager"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<android.support.v4.view.PagerTitleStrip
    android:id="@+id/pager_title_strip"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="top"
    android:background="#33b5e5"
    android:paddingBottom="4dp"
    android:paddingTop="4dp"
    android:textColor="#fff" />

    </android.support.v4.view.ViewPager> 
```

最后是 fragmentmap.xml

```
 <?xml version="1.0" encoding="utf-8"?>
     <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
      xmlns:tools="http://schemas.android.com/tools"
      android:layout_width="match_parent"
      android:layout_height="match_parent">

      <fragment xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.google.android.gms.maps.SupportMapFragment"/>

       </RelativeLayout> 
```

来自 logcat 的错误消息显示：

```
 01-08 15:16:11.726: E/AndroidRuntime(781): FATAL EXCEPTION: main
     01-08 15:16:11.726: E/AndroidRuntime(781): java.lang.NullPointerException
     01-08 15:16:11.726: E/AndroidRuntime(781):  atswipe.views2.Fragment_Map.onCreateView(Fragment_Map.java:39)
     01-08 15:16:11.726: E/AndroidRuntime(781):     at android.support.v4.app.Fragment.performCreateView(Fragment.java:1460)
     01-08 15:16:11.726: E/AndroidRuntime(781):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:911)
     01-08 15:16:11.726: E/AndroidRuntime(781):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
     01-08 15:16:11.726: E/AndroidRuntime(781):     at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:682)
     01-08 15:16:11.726: E/AndroidRuntime(781):     at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
     01-08 15:16:11.726: E/AndroidRuntime(781):     at android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:461)
     01-08 15:16:11.726: E/AndroidRuntime(781):     at android.support.v4.app.FragmentPagerAdapter.finishUpdate(FragmentPagerAdapter.java:141)
     01-08 15:16:11.726: E/AndroidRuntime(781):     at android.support.v4.view.ViewPager.populate(ViewPager.java:1012)
     01-08 15:16:11.726: E/AndroidRuntime(781):     at android.support.v4.view.ViewPager.populate(ViewPager.java:881)
     01-08 15:16:11.726: E/AndroidRuntime(781):     at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1366)
     01-08 15:16:11.726: E/AndroidRuntime(781):     at android.view.View.measure(View.java:15172)
     01-08 15:16:11.726: E/AndroidRuntime(781):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4816)
     01-08 15:16:11.726: E/AndroidRuntime(781):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
     01-08 15:16:11.726: E/AndroidRuntime(781):     at android.view.View.measure(View.java:15172)
    01-08 15:16:11.726: E/AndroidRuntime(781):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:833)
    01-08 15:16:11.726: E/AndroidRuntime(781):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
    01-08 15:16:11.726: E/AndroidRuntime(781):  at android.view.View.measure(View.java:15172)
    01-08 15:16:11.726: E/AndroidRuntime(781):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4816)
    01-08 15:16:11.726: E/AndroidRuntime(781):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
    01-08 15:16:11.726: E/AndroidRuntime(781):  at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2148)
    01-08 15:16:11.726: E/AndroidRuntime(781):  at android.view.View.measure(View.java:15172)
    01-08 15:16:11.726: E/AndroidRuntime(781):  at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1850)
    01-08 15:16:11.726: E/AndroidRuntime(781):  at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1102)
    01-08 15:16:11.726: E/AndroidRuntime(781):  at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1275)
    01-08 15:16:11.726: E/AndroidRuntime(781):  at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1000)
    01-08 15:16:11.726: E/AndroidRuntime(781):  at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4214)
    01-08 15:16:11.726: E/AndroidRuntime(781):  at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
    01-08 15:16:11.726: E/AndroidRuntime(781):  at android.view.Choreographer.doCallbacks(Choreographer.java:555)
    01-08 15:16:11.726: E/AndroidRuntime(781):  at android.view.Choreographer.doFrame(Choreographer.java:525)
    01-08 15:16:11.726: E/AndroidRuntime(781):  at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
    01-08 15:16:11.726: E/AndroidRuntime(781):  at android.os.Handler.handleCallback(Handler.java:615)
    01-08 15:16:11.726: E/AndroidRuntime(781):  at android.os.Handler.dispatchMessage(Handler.java:92)
    01-08 15:16:11.726: E/AndroidRuntime(781):  at android.os.Looper.loop(Looper.java:137)
    01-08 15:16:11.726: E/AndroidRuntime(781):  at android.app.ActivityThread.main(ActivityThread.java:4745)
    01-08 15:16:11.726: E/AndroidRuntime(781):  at java.lang.reflect.Method.invokeNative(Native Method)
    01-08 15:16:11.726: E/AndroidRuntime(781):  at java.lang.reflect.Method.invoke(Method.java:511)
    01-08 15:16:11.726: E/AndroidRuntime(781):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
    01-08 15:16:11.726: E/AndroidRuntime(781): at    com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
    01-08 15:16:11.726: E/AndroidRuntime(781): at dalvik.system.NativeStart.main(Native Method)
    01-08 15:21:11.768: I/Process(781): Sending signal. PID: 781 SIG: 9 
```

我该如何解决这个问题？有任何想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:37:40.960

你必须初始化你的地图。我在 SherlockFragment 中使用了它，但也许对你有用。

```
@Override
public void onActivityCreated(Bundle savedInstanceState)
{
    super.onActivityCreated(savedInstanceState);
    mapView.onCreate(savedInstanceState);
    try {
        MapsInitializer.initialize(getActivity());
    } catch (GooglePlayServicesNotAvailableException e) {
        e.printStackTrace();
    }
    GoogleMap map=mapView.getMap();
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
{
    View myFragmentView = inflater.inflate(R.layout.fragment_mapsearch, container, false);
    mapView = (MapView) myFragmentView.findViewById(R.id.mapSearchView);

    return myFragmentView;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-27T12:11:09.007

这是我的解决方案：

在`MainActivity`其中扩展`FragmentActivty`：

```
public class MainActivity extends FragmentActivity implements {

private static final int RQS_GooglePlayServices = 0;
SecondFragment sFragment;
Map mapFragment;
SectionsPagerAdapter mySectionsPagerAdapter;
ViewPager myViewPager;
GoogleMap myMap;
String provider;
LocationManager lm;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);

    setSectionPagerAdapter();       
}

public void setSectionPagerAdapter() {
    mySectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());

    myViewPager = (ViewPager) findViewById(R.id.pager);
    myViewPager.setAdapter(mySectionsPagerAdapter);
}

public void initMap() {
    mapFragment = (Map)mySectionsPagerAdapter.getItem(0);
    mapFragment.smf = (SupportMapFragment)getSupportFragmentManager().findFragmentById(R.id.googleMap);

    myMap = mapFragment.smf.getMap();
    myMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);
    myMap.setMyLocationEnabled(true);
    myMap.getUiSettings().setAllGesturesEnabled(false);
    myMap.getUiSettings().setZoomControlsEnabled(false);

    lm = (LocationManager)getSystemService(LOCATION_SERVICE);
    provider = LocationManager.GPS_PROVIDER;

    Location location = lm.getLastKnownLocation(provider);

    if(provider != null ) {
        onLocationChanged(location);
    }
    lm.requestLocationUpdates(provider, 0, 0, this); 
}

... 
```

该类`Fragment`看起来像：

```
public class Map extends Fragment {

public SupportMapFragment smf;
MainActivity mainActivity = (MainActivity) getActivity();

public Map(int position) {
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    View v = inflater.inflate(R.layout.fragment_map, container, false);

                mainActivity.initStart();
}

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);
     try {
            mainActivity = (MainActivity) activity;
        } catch (ClassCastException e) {
            throw new ClassCastException(activity.toString() + "Error!");
        }
}
} 
```

`SectionPagerAdapter`：_

```
public class SectionsPagerAdapter extends FragmentPagerAdapter {

private  Map f1;
private  SecondFragment f2;

public SectionsPagerAdapter(FragmentManager fm) {
    super(fm);
}

@Override
public Fragment getItem(int position) {

    if(position == 0) {
        if (f1 == null) {               
            f1 = new Map(position);         
        }           
        return f1;      
    }       
    else {
        if (f2 == null) {               
            f2 = new SecondFragment(position);          
        }           
        return f2;  
    }
}

@Override
public int getCount() {
    // Show 2 total pages.
    return 2;
}

@Override
public CharSequence getPageTitle(int position) {
    switch (position) {
    case 0:
        return "Map";
    case 1:
        return "Second Fragment";
    }
    return null;
}
} 
```

# actionscript-3 - Flex RichText 有时会显示锯齿状文本

> ID：14218477
> 
> 赞同：0
> 
> 时间：2013-01-08T15:34:01.177
> 
> 标签：actionscript-3, apache-flex, flex4, flash-builder

我正在使用 Flash Builder 4.7 中的 Flex/CS3 构建 iPad 应用程序。制作 iPad 应用程序。但是，在进行测试时，有些人开始告诉我，某些屏幕的 RichText sparks 元素显示的文本呈锯齿状，而不是平滑。

然而，它只是偶尔发生。如果您返回该屏幕，则文本看起来不错。任何想法为什么会发生这样的事情？大多数时候，无论是在我的本地开发机器上，还是在平板电脑上查看 iPad 应用程序时，一切看起来都很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:26:31.700

问题在于，在某些情况下，它会一遍又一遍地添加多个包含完全相同文本的富文本组件，这意味着我会有几层相同的内容，当它们重叠时，它会在大多数设备上看起来像素化。

我已经让应用程序变得更智能一点，而不是添加已经存在的内容，它看起来很棒。谢谢。

# php - 如果 jquerymobile 中的变量为真，则使用 javascript 打开一个弹出窗口

> ID：14218479
> 
> 赞同：0
> 
> 时间：2013-01-08T15:34:13.983
> 
> 标签：php, jquery-mobile, popup

如果变量为真，我会打开一个弹出窗口。我使用了这个脚本，但不起作用

```
echo "<script type=\"text/javascript\">
function doStuffRegister() {
    $( "#popupBasic2" ).popup( 'open');     
}
 </script>";
 // ... my code ...

if(!$_SESSION[page][admin])  { 
    echo "<a href=\"#popupBasic2\" data-rel=\"popup\" data-role=\"button\">click and Open popup</a>";  // this runs
} else {
echo("<script>doStuffRegister();</script>");  // this not runs
}

 //... my code .... 

echo "<div data-role=\"popup\" id=\"popupBasic2\" class=\"formpopup\" >"
."<a href=\"#home\" data-rel=\"back\" data-role=\"button\" data-theme=\"a\" data-icon=\"delete\" data-iconpos=\"notext\" class=\"ui-btn-right\">Close</a>"
  //  ."... my html code ..."
    ."</div>"; 
```

有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:37:26.890

您可能想在 DOM 加载后尝试调用该函数。您在创建元素之前调用该函数....根据我在上面看到的内容。

希望有帮助。

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T15:11:39.423

```
 if($showpopup) {

echo "<script>"
."$( document ).on( \"pageinit\", function() {"
    ."$( \".popupBrand\" ).on({  "
    ."popupbeforeposition: function() {"
    ."var maxHeight = $( window ).height() - 60 + \"px\";"
    ."$( \".popupbrand img\" ).css( \"max-height\", maxHeight );"
    ."}"
    ."});"
."});"
."</script>";

echo "<div data-role=\"popup\" id=\"popupBrand\" data-overlay-theme=\"a\" data-theme=\"d\" data-corners=\"false\">"
    // ."<a href=\"#\" data-rel=\"back\" data-role=\"button\" data-theme=\"a\" data-icon=\"delete\" data-iconpos=\"notext\" class=\"ui-btn-right\">Close</a>"
."<img class=\"popupbrand\" src=\"$filebrand\" style=\"max-height:512px;\" alt=\"\">"
."</div>";

echo "<script>"
." $(document).on(\"pageshow\", function() {"
." setTimeout(function () {"
    ."$('#popupBrand').popup('open');"
."}, 10); "// delay above zero
."});"
."$(document).on(\"click\", function() {"
."$('#popupBrand').popup('close');" 
."});  "
    ."</script> ";
  } 
```

运行良好，我可以在任何地方单击关闭弹出窗口。

# shell - Shell 脚本和 -e 参数

> ID：14218486
> 
> 赞同：0
> 
> 时间：2013-01-08T15:34:28.603
> 
> 标签：shell

我正在编写一个 shell 脚本，它创建一个数据库并将值存储到 database.file 中的键中。

我有一个测试引起了我的注意，我想知道为什么会这样。

```
./shellscript put key -e 
```

预期的行为将创建一个文件：

```
key <-> -e 
```

由于某种原因，我的 shell 脚本甚至无法捕获“-e”，甚至在打印 $1 时，将 -e 作为第一个参数传递。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:02:39.447

让我猜猜。你在你的 shell 脚本中使用“echo”来打印命令行参数吗？如果是：更换每个

```
echo foobar 
```

经过

```
printf '%s\n' foobar 
```

现在问题消失了吗？（根据您的“回声”版本，它解释 `-e`和/或`-n`作为选项，而不是作为参数。）

# c++ - 如何按第一个字符串对字符串对的向量进行分组？

> ID：14218488
> 
> 赞同：3
> 
> 时间：2013-01-08T15:34:34.297
> 
> 标签：c++, string, vector

我有一个包含字符串对的向量：

```
vector<pair<string, string>> list; 
```

我想对`list[n].second`具有相同的字符串进行分组`list[n].first`

```
const size_t nbElements = list.size();
for (size_t n = 0; n < nbElements ; n++)
{
    const string& name = list[n].first;
    const string& type = list[n].second;
} 
```

* * *

考虑这个例子：

```
(big; table) (normal; chair) (small; computer) (big; door) (small; mouse) 
```

将导致：

```
(big; table, door) (normal; chair) (small; computer, mouse) 
```

* * *

你知道怎么做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T15:39:36.647

你可以使用一个[`std::map`](http://en.cppreference.com/w/cpp/container/map)

* * *

例子：

```
#include <boost/algorithm/string/join.hpp>
#include <boost/format.hpp>

#include <iostream>
#include <map>
#include <vector>

int main() {
    // define original data
    std::vector<std::pair<std::string, std::string> > v = 
            {{"a", "b"}, {"a", "c"}, {"b", "a"}, {"b", "d"}, {"c", "e"}};

    // populate map
    std::map<std::string, std::vector<std::string> > grouped;
    for (auto it = v.begin(); it != v.end(); ++it) {
        grouped[(*it).first].push_back((*it).second);
    }

    // output        
    for (auto it = grouped.begin(); it != grouped.end(); ++it) {
        std::cout << boost::format("(%s: %s)\n")
                % (*it).first 
                % boost::algorithm::join((*it).second, ", ");
    }
} 
```

[输出是：](http://liveworkspace.org/code/8YOMq%240)

```
(a: b, c)
(b: a, d)
(c: e) 
```

* * *

请注意，此代码使用 C++11 功能（初始化列表、auto 关键字）。看看上面的链接示例是否成功编译。

为了自己编译它，请确保您使用的编译器支持这些功能或将它们替换为适当的 C++03 等效项。

例如，这里是迭代器类型（使用`auto`上面代码中的关键字美化）：

```
// the iterator on the vector `v`
std::vector<std::pair<std::string, std::string> >::iterator it_v;

// the iterator on the map `grouped`
std::map<std::string, std::vector<std::string> >::iterator it_grouped; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T15:40:02.657

您可能需要一个多图。

```
std::multimap<std::string, std::string> items;
items.insert("Big", "Chair");
items.insert("Big", "Table");
items.insert("Small", "Person");

for(auto i = items.begin(); i!=items.end; i++)
{
  std::cout<<"["<<i->first<<" , "<<i->second<<"]"<<std::endl;
} 
```

输出：

```
[Big, Chair]
[Big, Table]
[Small, Person] 
```

# blackberry-10 - 上传图片到服务器 blackberry 10 qml

> ID：14218492
> 
> 赞同：1
> 
> 时间：2013-01-08T15:34:42.170
> 
> 标签：blackberry-10, blackberry-cascades

我需要将图像上传到服务器我使用文件选择器来获取图像，我附上了我的示例代码，但它不起作用

我的文件选择器代码

```
 `   Button {
                    text: "Change Profile Image"
                    onClicked {
                         filePicker.open();
                    }                   
                       attachedObjects: [
                        FilePicker {
                            id: filePicker
                            property string selectedFile
                            type: FileType.Picture
                            onFileSelected: {
                                selectedFile = selectedFiles[0]
                                image.imageSource = selectedFile
                                   _settings.showToast( selectedFile);
                                  _settings.isUpdate(selectedFile);
                            }
                        }
                   ]` 
```

我在 C++ 中的图像更新代码

```
 `void Settings::isUpdate(QString selectedFile){

    QString path("asset:///Icon/mess.jpg");

    //php script that receives the image

    QNetworkRequest requete(QUrl("http://192.168.1.176:2222/api?type=uploadimages&name=IMG_00000001.jpg&pin=123456")); //our server with php-script

    QByteArray boundary = "-------------------------87142694621188";
    QFile file(path);
    if (!file.open(QIODevice::ReadOnly))
    {
        qDebug()<<"erreur read image";
        return;
    }
    QByteArray fileContent(file.readAll());
    QByteArray data = "--" + boundary + "\r\n";
    data += "Content-Disposition: form-data; name=\"data\"; filename=\"IMG_00000001.jpg\";\r\n";
    data += "Content-Type: image/jpg\r\n\r\n" + fileContent + "\r\n";
    data += "--" + boundary + "--\r\n";

    requete.setRawHeader("Content-Type", "multipart/form-data; boundary=" + boundary);
    requete.setRawHeader("Content-Length", QString::number(data.size()).toAscii());
    file.close();
    qDebug() <<"data"<< data.size();
    QNetworkAccessManager *am = new QNetworkAccessManager(this);
    QNetworkReply *reply = am->post(requete,"&data="+data);
    QObject::connect(am, SIGNAL(finished(QNetworkReply*)), this, SLOT(replyFinished(QNetworkReply*))); 
```

}

```
 void Settings::replyFinished(QNetworkReply *reply)
          {
         reply->open(QIODevice::ReadOnly);
         if(reply->error() == QNetworkReply::NoError)
           {
                QByteArray str=(reply->readAll());
                 QString response = QString::fromUtf8(str.data(), str.size());
                   qDebug()<<" re "<<response;
                      }

                      else
                       qDebug()<<"error response server";
                      }` 
```

我可以得到响应，但无法将图像上传到服务器

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T06:37:13.200

```
QString body = "" ;

const QUrl url("http://someurl.to/make/the/post" );
 QHttpMultiPart *multiPart = new QHttpMultiPart(QHttpMultiPart::FormDataType);
 QHttpPart textPartData;
 body = "" ;
 QTextStream(&body) << "";
 textPartData.setHeader(QNetworkRequest::ContentTypeHeader, "application/json; charset=utf-8");
 textPartData.setHeader(QNetworkRequest::ContentDispositionHeader, QVariant("form-data; name=\"data\""));
 textPartData.setBody(body.toAscii());

     for(int i=0; i< number_of_files_to_send ; i++){
             QHttpPart imagePart;
             QString header_body = "";
             QTextStream(&header_body) << "form-data; name=\"" << name_of_the_file << "\"; filename=\"" << name_of_the_file << ".jpg\"" ;
             imagePart.setHeader(QNetworkRequest::ContentDispositionHeader, QVariant(header_body));
             imagePart.setHeader(QNetworkRequest::ContentTypeHeader, QVariant("image/jpeg"));

             //prepare file for upload
             QString filepath;
             QTextStream(&filepath) << FunkyPigeonBlackberry::getInstance()->dataModelProductDetails()->custom_image(i).value("cut_image").toString();

             // pack the new file
             QFile *file = new QFile(filepath);
             file->open(QIODevice::ReadOnly);
             imagePart.setBodyDevice(file);
             file->setParent(multiPart); // we cannot delete the file now, so delete it with the multiPart
             multiPart->append(imagePart);
     }

 multiPart->append(textPartData);
 multiPart->append(textPartProductDetails);
 multiPart->append(textPartDataDelivery);

 QNetworkRequest request(url);

 QNetworkReply* reply = m_networkAccessManager->post(request, multiPart);
 connect(reply, SIGNAL(finished()), this, SLOT(onNetworkResponse())); 
```

# java - 在数组文本文件中搜索字符串

> ID：14218502
> 
> 赞同：0
> 
> 时间：2013-01-08T15:35:10.320
> 
> 标签：java, arrays, algorithm, search

我拿了一个文本文件并将其放在一个数组中。但是，我想在数组中搜索一个字符串（单词）。就我而言，我想使用扫描仪从用户那里获取输入，然后在数组中搜索字符串匹配。怎样才能完成这样的任务？

```
public static void main(String[]args) throws IOException
{
    //Scanner scan = new Scanner(System.in);
    //String stringSearch = scan.nextLine();
    List<String> words = new ArrayList<String>();
    BufferedReader reader = new BufferedReader(new FileReader("File1.txt"));
    String line;
    while ((line = reader.readLine()) != null) {
                    words.add(line);        
        }
        reader.close();
        System.out.println(words);
} 
```

我的输出：

```
[CHAPTER I. Down the Rabbit-Hole, Alice was beginning to get very tired of sitting by her sister on the, bank, and of having nothing to do:] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:39:47.630

```
for(int i = 0; i < words.size(); i++){
  if(words.get(i).equals(string)){
     found!!
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T15:41:27.583

您可以使用 List 中的 .contains() 函数。它将在每个元素上使用参数的 .equals() 方法

```
words.contains("your_string") 
```

刚刚意识到您正在为每个索引保存一行，而不是一个单词。在这种情况下：

```
for(String sLine : words) {
    if (sLine.contains("your_string")) {
         System.out.println("Got a match");
         break;
     }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T15:41:55.903

其他人建议的`equals()`方法只有在你每行一个单词的情况下才有效。尝试遍历列表并查看一个（或多个）字符串是否[包含（单词）](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#contains%28java.lang.CharSequence%29)您要查找的单词？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T15:45:54.580

你可以像这样用扫描仪做一些事情

```
Scanner sc = new Scanner(new File("File1.txt"));
String targetString = "whatYouWant";
String testString = sc.next();
while(sc.hasNext())
{
    if(testString.equals(targetString))
        hooray!
} 
```

这不是一个完整的解决方案，但希望这将指导您找到一个可行的解决方案。

# sql - 访问链接表管理

> ID：14218515
> 
> 赞同：0
> 
> 时间：2013-01-08T15:35:45.577
> 
> 标签：sql, ms-access

这里有一个简单的问题，这个问题随着时间的推移而增长。我有 50 多个访问数据库，每个都链接到 SQL 2000 服务器。我需要将它们切换到 SQL 2008，但我不想只是切换它们，我想让它们指向一个源，如果表从一台服务器移动到另一台服务器，我可以稍后调整它所以我只需在一个配置文件中进行更改，而不是打开每个令人头疼的数据库。

我尝试创建一个访问数据库然后链接到该数据库，但您只能链接到访问数据库中的其他本地表，而不是链接表。

有关解决此问题的任何想法，以便我可以创建配置文件或以某种方式单程通过？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:45:26.447

您可以通过代码更新链接（注释[http://wiki.lessthandot.com/index.php/Link_All_SQL_Server_Tables](http://wiki.lessthandot.com/index.php/Link_All_SQL_Server_Tables)），还可以使用 DSN 或 FileDSN，其中包含：

```
[ODBC]
DRIVER=SQL Server
UID=User
AutoTranslate=No
DATABASE=Test
WSID=ComputerName
APP=Microsoft Office 2010
Trusted_Connection=Yes
SERVER=ComputerName\Instance
Description=test2 
```

FileDSN 也适用于传递查询，因此您只需编辑内容即可。但是，您需要复制到中心位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:08:50.413

由于Access会缓存一定数量的信息（具体取决于您使用的版本），您可能会发现在修改DSN后，您必须访问每个数据库才能更新链接信息。

# spring - 如何正确地将多个 url 模式映射到 spring 调度程序？

> ID：14218516
> 
> 赞同：2
> 
> 时间：2013-01-08T15:35:50.837
> 
> 标签：spring, rest, servlets, spring-mvc

我想向 Spring 应用程序添加休息服务。调度程序当前配置为仅提供 *.do 路径，这与休息路径并不真正兼容，所以我添加了一个额外的模式，像这样

```
<servlet-mapping>
    <servlet-name>timetabling</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>timetabling</servlet-name>
    <url-pattern>*.do</url-pattern>
</servlet-mapping> 
```

当我点击休息控制器时，我看到了

```
08-01-2013 15:26:13,075 [23198170@qtp-12556818-9] org.springframework.web.servlet.PageNotFound  1080 WARN  No mapping found for HTTP request with URI [/timetabling/rest/] in DispatcherServlet with name 'timetabling' 
```

如果我像这样更改映射

```
<servlet-mapping>
    <servlet-name>timetabling</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

我明白了

```
08-01-2013 15:28:33,664 [13327669@qtp-4725080-0] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  220 DEBUG Returning handler method [public java.lang.String edu.ucl.isd.timetabling.web.controller.RestController.test(javax.servlet.http.HttpServletRequest)] 
```

这让我怀疑我指定映射的方式有问题，但我看不到它是什么。不幸的是，我不能使用第二种形式，因为这会破坏应用程序的其他区域，我需要单独的映射，任何人都可以发现问题吗？

为了完整起见，这是我的休息服务的一个片段，但是看到这确实可以与根映射正常工作，我认为问题不在这里

```
@Controller
@RequestMapping("/rest")
public class RestController {

    @RequestMapping(value="/", method = RequestMethod.GET)
    public @ResponseBody String test() {
         return "rest service is alive";
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T17:14:51.603

在您的控制器上使用 @RequestMapping("/") 在您的方法上使用请求的`@RequestMapping("/rest")`servlet 映射将被正确分派到您的方法 not ，如果您想访问您的 test() 方法，那么最好删除来自控制器的 @RequestMapping 并将其仅保留在方法上。`/rest/*``/rest/rest/``test()``/rest/``/rest`

# c# - C# ... 通过 USB/iTunes 连接到 iPhone - 可能吗？

> ID：14218517
> 
> 赞同：0
> 
> 时间：2013-01-08T15:35:52.480
> 
> 标签：c#, iphone, ios4, iphone-sdk-3.0, itunes-sdk

有谁知道是否可以使用 读取/编辑 iPhone 的联系人列表`C#`，假设 iPhone 是通过 USB 电缆/iTunes 插入 Windows PC 的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:27:22.487

您可以使用 CFManzana / Manaza 或 MobileDevice dll 来连接 iPhone。下面是一个如何做到这一点的例子。

```
// this variable will be declared in your class .

public static string devicename;

CFManzana.iDevice
phone = New iDevice();
phone.connect += phone_connect;

void phone_connect(object sender, ConnectEventArgs args)
        {
// here your will add your exception handling details.
           }

// now extract your device details.

devicename = phone.getDeviceName or phone.CopyValue("DeviceName"); \\it all depends what version of Manzana you have downloaded.

//now assign the value to the field 

this.txtname.text = devicename; 
```

* * *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-09T18:32:50.800

如果你想通过 USB 从 Windows 连接到 iOS 设备，你可以尝试我维护的 imobiledevice-net NuGet 包。例如，要列出当前连接到您的 PC 的所有 iOS 设备，您可以这样做：

```
ReadOnlyCollection<string> udids;
int count = 0;

var idevice = LibiMobileDevice.Instance.iDevice;
var lockdown = LibiMobileDevice.Instance.Lockdown;

var ret = idevice.idevice_get_device_list(out udids, ref count);

if (ret == iDeviceError.NoDevice)
{
    // Not actually an error in our case
    return;
}

ret.ThrowOnError();

// Get the device name
foreach (var udid in udids)
{
    iDeviceHandle deviceHandle;
    idevice.idevice_new(out deviceHandle, udid).ThrowOnError();

    LockdownClientHandle lockdownHandle;
    lockdown.lockdownd_client_new_with_handshake(deviceHandle, out lockdownHandle, "Quamotion").ThrowOnError();

    string deviceName;
    lockdown.lockdownd_get_device_name(lockdownHandle, out deviceName).ThrowOnError();

    deviceHandle.Dispose();
    lockdownHandle.Dispose();
} 
```

# android - 想使用ViewPager，无法识别android.support.*？

> ID：14218519
> 
> 赞同：5
> 
> 时间：2013-01-08T15:35:52.840
> 
> 标签：android, android-viewpager, android-support-library

**编辑**对不起所有的图片。我试图让你最好地了解我在哪里。

我正在尝试[`ViewPager`](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)处理我的应用程序，但它无法识别[`Support Library`](http://developer.android.com/tools/extras/support-library.html#Downloading)我在 SDK 管理器中下载的应用程序。

我正在为 SDK 版本 10 编写代码。这是我的屏幕截图`SDK Manager`：

![在此处输入图像描述](../Images/56a0f3bb11dec34c9e523e950d964724.png)

安装`Android Support Library`最新版本`Tools`后，我转到**帮助>>检查更新**。运行此之后，我收到如下所示的两个弹出窗口。

![在此处输入图像描述](../Images/cc28a54bd1a5cdfda8d80e7268fe06a4.png)

弹出窗口说它在该`Problem Occured`站点找不到存储库。我在第一次开始开发此应用程序时安装了[`Sequoyah Natice Code Support`](http://www.eclipse.org/sequoyah/documentation/native_debug.php)它，但从未使用过它。我试图重新安装包以摆脱这个弹出窗口，但它不会让我因为它已经安装。

![在此处输入图像描述](../Images/42c7a0147e7110694529619a75c5fe74.png) ![在此处输入图像描述](../Images/f823c692a1c280f9dc6d15b1740ec288.png)

在我的代码中，我在尝试`import android.support.v4.view.ViewPager;`. 屏幕截图如下。当我将光标悬停在这`import`条线上时，它说`The import android.support.v4 cannot be resolved.`

![在此处输入图像描述](../Images/0adfcf404cab7098d6a7336cf898063f.png)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-08T15:43:59.357

要将 Android 支持库添加到现有的 Android 项目：

*   右键单击您的项目
*   点击`Android Tools`
*   点击`Add Support Library`

这应该负责设置`android-support`jar，以便项目可以使用它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-06-18T19:12:13.287

**对于 Android Studio 1.2.2**

*   从文件层次结构中右键单击您的项目（应该说“应用程序”）
*   从菜单中选择“打开模块设置”
*   单击“依赖项”选项卡
*   点击底部的加号按钮
*   选择“库依赖”
*   搜索/选择您想要的支持库
*   点击确定

# vb.net - 使用绑定到数据视图的文本框提交从 Windows 窗体添加的数据？

> ID：14218527
> 
> 赞同：0
> 
> 时间：2013-01-08T15:36:06.397
> 
> 标签：vb.net, dataview

这是我在这里的第一篇文章，如果我违反规则并需要稍后澄清一些事情，请原谅我。我的问题是我正在使用 Visual Basic 2008 并且有一个 Windows 窗体，该窗体具有多个绑定到数据视图的文本框。我能够很好地编辑数据，并将数据提交到 SQL 2005 express 数据库。此外，只要我不退出程序，我就可以添加一条持续存在的记录。一旦我编辑新记录就会丢失。因此，基本上，正在提交编辑，但没有添加。这是我正在使用的代码。感谢您的时间和考虑。

```
Private Sub frmMain_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
  Me.Cursor = Cursors.WaitCursor

  Try
    cn = New SqlConnection(sConnString)
    cn.Open()

    ' Open the Master table
    da = New SqlDataAdapter("SELECT * FROM CAMaster;", cn)
    ds = New DataSet
    da.Fill(ds, "Master")
    dv = New DataView(ds.Tables("Master"))
    cm = CType(Me.BindingContext(dv), CurrencyManager)
    dv.AllowNew = True
    dv.AllowEdit = True
    dv.AllowDelete = True

    ' Bind the form Textboxes to the Master table dataview and assign formatting
    Dim ctl As Control
    For Each ctl In Controls
      If TypeOf ctl Is TextBox Then
        If ctl.Tag <> "" Then
          Select Case ctl.Tag
            Case "Date"
              ctl.DataBindings.Add("Text", dv, ctl.Tag, True, DataSourceUpdateMode.OnValidation, False, "MM/dd/yyyy")
            Case Else
              ctl.DataBindings.Add("Text", dv, ctl.Tag, True, DataSourceUpdateMode.OnValidation, False, "C2")
          End Select
        End If
      End If
    Next

  Catch ex As Exception
    MsgBox(ex.Message, MsgBoxStyle.Exclamation, "Form Load Error")
    End
  End Try

  Me.Cursor = Cursors.Default
End Sub

Private Sub cmdAdd_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmdAdd.Click
  Try
    dv.RowFilter = ""
    dv.AddNew()
  Catch ex As Exception
    MsgBox(ex.Message, MsgBoxStyle.Information, "Add Error")
  End Try
End Sub

Private Sub cmdOk_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmdOk.Click
  Me.Cursor = Cursors.WaitCursor

  Dim i As Integer

  Try
    Me.Validate()
    cm.EndCurrentEdit()
    cb = New SqlCommandBuilder(da)
    da.Update(ds, "Master")
    ds.Tables("Master").AcceptChanges()

  Catch ex As Exception
    MsgBox(ex.Message)
  End Try

  SetButtons(True)

  If mbAddNewFlag Then
    Me.cmbDate.SelectedItem = Me.txtDate.Text
  End If

  Me.Cursor = Cursors.Default
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:31:08.673

我终于找到了导致我的问题的原因。我有一个容器内的日期文本框。要访问容器内的文本框，您必须以不同的方式引用它。所以它永远不会被数据绑定到文本框。为了解决我的问题，我将文本框移到了容器外，并且原始帖子中的代码有效。我不明白为什么我在尝试更新数据集时没有收到异常。但是，话又说回来，我不了解 VB.net 的很多内容。

# jquery - 当可能具有相同的类时，如何使 .toggle 仅对 1 个元素产生影响

> ID：14218529
> 
> 赞同：2
> 
> 时间：2013-01-08T15:36:07.980
> 
> 标签：jquery

所以我有以下标记

```
<div class="item-w">
    <div class="item-g">
        <div class="item-name">Aircraft Docs (ARROW)</div>
        <div class="item-action">Check</div>
    </div>
    <div class="item-name">Aircraft Docs (ARROW)</div>
    <div class="item-action">Check</div>
</div>    
<div class="item-w">
    <div class="item-g">
        <div class="item-name">Weight &#38; Balance</div>
        <div class="item-action">Check</div>
    </div>
    <div class="item-name">Weight &#38; Balance</div>
    <div class="item-action">Check</div>
</div> 
```

而且我想在单击“item-w”时显示/隐藏“item-g”，但仅适用于该特定“item-w”div中的“item-g”。

我正在使用的 jQuery 如下：

```
<script type="text/javascript">
    $(document).ready(function() {
        $(".item-g").hide();
    });

    $(function()
      {
      $(".item-w").toggle(function()
                          { // first click shows green
                          $(".item-g").fadeIn('fast');
                          },
                          function()
                          { // next click hides green
                          $(".item-g").fadeOut('fast');
                          });
      });
</script> 
```

我也尝试了以下方法，但无济于事：

```
<script type="text/javascript">
    $(document).ready(function() {
        $(".item-g").hide();
    });

    $(function()
      {
      $(".item-w").toggle(function()
                          { // first click shows green
                          $(this).next(".item-g").fadeIn('fast');
                          },
                          function()
                          { // next click hides green
                          $(this).next(".item-g").fadeOut('fast');
                          });
      });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:38:28.963

`next`选择被选元素的直接下一个兄弟，但是在你的标记`.item-g`中是一个子元素，你可以使用`find`or`children`方法。另请注意，`toggle`不推荐使用方法，您可以使用`click`和`fadeToggle`方法来代替。

```
$(".item-w").click(function() { 
    $(this).find(".item-g").fadeToggle('fast');
    // $(".item-g", this).fadeToggle('fast');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T15:39:03.703

使用以下内容：

```
 $(this).children(".item-g").animation_function(); 
```

所以只有 的子元素`this`受到影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T16:30:57.080

用这个：

```
$(function()
{
   $(".item-w").toggle(function()
   { // first click shows green
      $(this).find(".item-g").fadeIn('fast');
   },
   function()
   { // next click hides green
      $(this).find(".item-g").fadeOut('fast');
   });
}); 
```

如果你感到困惑，我做了一个 jsfiddle。

[http://jsfiddle.net/MatthewDavis/WnB62/](http://jsfiddle.net/MatthewDavis/WnB62/)

# entity-framework - 首先使用实体 框架和代码删除/替换引用的值

> ID：14218533
> 
> 赞同：0
> 
> 时间：2013-01-08T15:36:21.307
> 
> 标签：entity-framework, code-first

在 Code First 模型中，我设置了一个包含属性 List<Claim> Claims 的 DbSet<User>。当我在用户上调用 Claims.Clear() 然后在存储库上调用 savechanges() 时，链接被删除，但声明仍然存在于数据库中。它不再被其他任何东西引用。我该如何删除它？

我在尝试用具有相同唯一 ID 的类似声明替换声明列表中的条目时遇到类似问题。然后我无法保存，因为它已经存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:51:02.477

我认为这个问题回答了你关于如何删除的问题 - 特别是在不强制加载的情况下：

[实体框架代码先用级联删除](https://stackoverflow.com/questions/5520418/entity-framework-code-first-delete-with-cascade)

# asp.net - Asp.Net Singleton 数据访问层

> ID：14218534
> 
> 赞同：0
> 
> 时间：2013-01-08T15:36:23.440
> 
> 标签：asp.net, asp.net-mvc-4

我一直在玩 MVC4，我创建了一个数据访问层，它目前是一个单例。

我的问题是，这是个好主意吗？我的层中有一个轮询方法，这是我将其设为单例的主要原因（此轮询方法检查数据库，然后使用信号器更新 UI）

我还认为使用单例是一个好主意，这样我就可以缓存数据，但我现在有点不确定，这个单例如何处理 400 个并发用户？

任何帮助都会很棒！

代码 -

```
 public class DataAccessLayer
{
    private static DataAccessLayer _instance;

    public static DataAccessLayer Instance
    {
        get
        {
            lock (_instance)
            {
                if (_instance == null)
                    _instance = new DataAccessLayer();

                return _instance;
            }
        }
    }

}

public class HomeController : Controller
{
    public ActionResult GetUsers()
    {
        return View(DataAccessLayer.Instance.GetUsers());
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:11:40.530

您将不得不处理单例或静态类的线程问题。锁定有帮助，但它会使事情变慢，特别是因为您没有检查实例是否在锁定之前已经设置。

此外，很难对代码进行单元测试。

我建议`DataAccessLayer`使用构造函数在控制器中设置一个实例。IoC 容器或自定义控制器工厂可用于创建类实例并将其传递给控制器​​。

为了更容易进行单元测试/模拟，`IDataAccessLayer`为具体类实现一个接口并将其用作控制器构造函数中的参数类型。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-08T15:41:54.810

在这种情况下，单例是不必要的。在这里使用 DataAccessLayer 作为静态类更合适：

```
public class HomeController : Controller
{
    public ActionResult GetUsers()
    {
        return View(DataAccessLayer.GetUsers());
    }
} 
```

# jquery - 如何使用 width() 改变图像的宽度？

> ID：14218536
> 
> 赞同：1
> 
> 时间：2013-01-08T15:36:42.850
> 
> 标签：jquery, width

我环顾了 SO 和互联网，但无法找到明确的答案。这是一个新手 jQuery 问题。:)

如何使用 .width() 获取 div 的宽度，例如 #imgwrap，并在 img src 中输出该宽度...我正在使用 Automattic 的 Jetpack 来动态调整图像大小。

谢谢！

`<img src="http://i2.wp.com/google.com/intl/en_ALL/images/logos/images_logo_lg.gif?resize=[widthgoeshere],205" />`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T15:40:18.163

```
jQuery("img").attr("src","http://i2.wp.com/google.com/intl/en_ALL/images/logos/images_logo_lg.gif?resize="+jQuery("#imgwrap").width()+",205"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T15:44:01.330

jQuery 中的大多数 getter 都有一个配对的 setter。两者的区别在于你是否提供论据。在宽度的情况下，如果你想设置它，你可以提供一个宽度参数

```
 var divWidth = $('#myDivID').width();
 $('#imageID').width(divWidth); 
```

**编辑** 好的，在评论之后你只需要设置 src 属性。`attr(attributeName,value)`您可以使用该方法设置任何属性

在您的情况下，attributeName 将是`'src'`并且 value 是来自以下示例的 ùrl`，类似于

```
 var divWidth = $('#myDivID').width(),
     url = "http://i2.wp.com/google.com/intl/en_ALL/images/logos/images_logo_lg.gif?resize=" + divWidth + ",205";
 $('#imageID').attr('src', url); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T15:40:06.380

```
var divWidth = $('#myDivID').width();
$('#imageID').css('width',divWidth); 
```

应该管用

# sql - 查询中多次 SUM(fieldX) 的性能

> ID：14218538
> 
> 赞同：0
> 
> 时间：2013-01-08T15:36:45.373
> 
> 标签：sql, performance, sum

我在 VB 中生成了一个很大的请求，它可能会变得很大......而且速度也很慢。

我有 3 种类型的碎片（1,2,3），我想要一包碎片的平均湿度所以请求的标头看起来像：

```
SELECT package.id,
CASE WHEN Sum(package.totalPce) = 0 THEN 0 ELSE 
    Sum(nbTooHumid * package.totalPce) / Sum(package.totalPce) END as tooHumid, 
```

然后我用 nbTooDry 代替 nbTooHumid 做同样的事情，并将 HumidOk 作为第三个。

另外，我也计算其他字段，也除以 Sum(package.totalPce)。

所以，我或多或少打了 10 次电话：

```
Sum(package.totalPce) 
```

我想知道是否是一件事减慢了我的请求，因为我的请求太长了，它的执行时间在 5 秒到 2 分钟之间变化。

编辑：阅读戈登的回答后，我将添加一个细节。

我从子请求中获得了 nbTooHumid 字段，并且我想在请求中获取的每个包都必须使用 UNION 从其他包中合并。

而且pieces 表有数百万个条目，所以，是的，这是IO 的问题。

我将添加一个更完整的示例，以便您全面了解我的请求是什么样的。

```
SELECT package.id,
CASE WHEN Sum(package.totalPce) = 0 THEN 0 ELSE 
    Sum(nbTooHumid * package.totalPce) / Sum(package.totalPce) END as tooHumid,
manyOtherFields
FROM 
((SELECT count(*) as totalPce, otherFields
FROM pieces 
WHERE idPackage = X and date between '2012-01-01' and '2012-01-11')
UNION
(SELECT ...)
) 
```

请注意，这只是我的请求的平均格式，我没有使用确切的语法或字段名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:42:44.117

性能问题肯定取决于您使用的数据库。

不过，总的来说，数字函数比查询所需的数据操作要快得多、快得多。所以，我真的怀疑这是性能问题。

高度可变的执行时间表明了两件事之一。正在使用的服务器正忙，从而减慢您的查询速度。在这种情况下，您不能对慢查询做太多事情。第二个是长跑是第一次跑，然后跑得更快。这是因为数据库正在缓存内存中加载表。它不必为后续查询执行 I/O。

但是，如果您真的需要性能方面的帮助，您应该发布整个查询。

# c# - 如果列名和顺序不同，如何从 csv 插入数据以访问 db

> ID：14218539
> 
> 赞同：1
> 
> 时间：2013-01-08T15:36:48.480
> 
> 标签：c#, sql, visual-studio, ms-access, csv

它使用 c# 编程。我正在选择 csv 文件并将其插入到访问数据库中。我说过，csv 文件中有 6 列，如 ID、FName、LName、地址、邮政编码、单元格编号，顺序相同。在访问中，我的列是 FirstName、LastName、S_NO、zip_code（以相同的顺序）。如果列名不同以及顺序不同，我如何导入此 csv 文件以访问 db。我该如何实现这个？请建议。我尝试了以下代码：

```
enter code here 
```

数据集 da = new DataSet(); 尝试 {

```
 da = this.ConnectCSV(strCSVFile);
            string connstring = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\EmpApp\\EmpData.accdb;";
            OleDbConnection conn = new OleDbConnection(connstring);
            OleDbCommand cmd = new OleDbCommand();
            cmd.CommandType = CommandType.Text;
            conn.Open();
            for (int i = 0; i <= da.Tables["Ss"].Rows.Count - 1; i++)
            {

                for (int j = 1; j <= da.Tables["Ss"].Columns.Count - 1; j++)
                {
                    cmd.CommandText = "Insert  into EMP_DOWNLOAD ( ID,Company_name,month_billed,year,start_date,end_date,Designation"
                      + ")  values(" + (i + 1) + ",'" 
                      + da.Tables["Ss"].Rows[i].ItemArray.GetValue(0) + "',"
                      + da.Tables["Ss"].Rows[i].ItemArray.GetValue(8) + 
                      da.Tables["Ss"].Rows[i].ItemArray.GetValue(9) + ")";                        
                    cmd.Connection = conn;
                    cmd.ExecuteNonQuery();
                 }
            }
        }

        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
        finally
        {
            btnUpload.Enabled = false;
        }
enter code here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:09:41.390

使用 MS Access，您可以直接从 CSV 运行到表格：

```
INSERT INTO EMP_DOWNLOAD (ID, Forename, LastName, Address, Zip_Code ) 
SELECT  ID, FName, LName, Address, Zipcode
FROM [Text;Database=z:\docs\;HDR=yes].[importfilename.csv] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T16:51:18.140

我将使用 Linq 语句将您的文本分开并创建参数对象的数组，然后遍历数组，将参数添加到发送到数据库的每个插入语句中。

像这样

```
var csvParams = (from line in System.IO.File.ReadLines("fileName.csv")
            from cell in line.Split(',').AsEnumerable()
            select new[]
            {
                new OleDbParameter("@fn", cell[1]),
                new OleDbParameter("@ln", cell[2]),
                new OleDbParameter("@sn", cell[3]),
                new OleDbParameter("@zc", cell[4])
            });

using( OleDbConnection conn = new OleDbConnection("CONNECTION STRING GOES HERE"))
{
    foreach (var person in csvParams)
    {
        using (OleDbCommand cmd = conn.CreateCommand())
        {
            cmd.CommandText = "INSERT INTO People(FirstName, LastName, S_NO, zip_code) VALUES (@fn, @ln, @sn, @zc)";
            cmd.Parameters.AddRange( (OleDbParameter[]) person);
            cmd.ExecuteNonQuery();
        }

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T16:09:20.847

您可以为不需要的字段传递 null ..

# sql - 如何在没有 CRC32 的非整数键上实现进程分区？

> ID：14218540
> 
> 赞同：2
> 
> 时间：2013-01-08T15:36:50.890
> 
> 标签：sql, ruby, postgresql, partitioning

我正在使用 Ruby 客户端处理 PostgreSQL，我想使用 SHA-1 哈希 id 对表进行分区，例如

```
 id                    
------------------------------------------
 fe935b318f6976afdec83fa7339ff2069b0bc0c3
 d67948e38a645fd5ffdde6dab4dc627b2b19d1b1
 0d304f5134b0a46c2248a34c3e9c50ad2b547fdf 
```

[进程分区](http://miyagijournal.com/articles/8-process-partitioning-in-distributed-systems)是将数据集划分为 N 个部分，并将每个部分分配给 N 个进程之一。如果您在 RDBMS 中有**整数键，这很简单：**

```
select * from items_to_be_processed where MOD(id, N) = ASSIGNED_PARTITION 
```

[Ryan Smith](https://twitter.com/ryandotsmith)建议，如果你有字符串键，你可以在它们上使用 CRC32 来获取整数，然后是模数 - 但是，假设你的键大部分是均匀分布的（就像我认为它会使用 SHA-1 哈希），这会不会更容易？对于`N = 4`，例如：

```
select * from items_to_be_processed where id < ASSIGNED_PARTITION_1
select * from items_to_be_processed where id < ASSIGNED_PARTITION_2 and id >= ASSIGNED_PARTITION_1
select * from items_to_be_processed where id < ASSIGNED_PARTITION_3 and id >= ASSIGNED_PARTITION_2
select * from items_to_be_processed where id >= ASSIGNED_PARTITION_4 
```

所以也许如果`N = 2`，那么

```
select * from items_to_be_processed where id < '8888888888888888888888888888888888888888'   <- process 1
select * from items_to_be_processed where id >= '8888888888888888888888888888888888888888'  <- process 2 
```

给定 N，我如何计算分区点（`8888888888888888888888888888888888888888`分`ffffffffffffffffffffffffffffffffffffffff`成两半，可能我什至没有正确计算）？我应该在 SQL (Postgres) 中还是在 Ruby 客户端中进行调用？

PS。灵感来自 MongoDB 食谱中的[随机属性思想。](http://cookbook.mongodb.org/patterns/random-attribute/)

**更新**

`888...`上面的计算不正确 - 这是一种在 Ruby 中执行此操作的方法，感谢 Carl Norum 的回答让我更接近：

```
>> 'f'*40
=> "ffffffffffffffffffffffffffffffffffffffff"
>> a = 0xffffffffffffffffffffffffffffffffffffffff
=> 1461501637330902918203684832716283019655932542975
>> b = a / 2
=> 730750818665451459101842416358141509827966271487
>> '%x' % b
=> "7fffffffffffffffffffffffffffffffffffffff"
>> '%x' % (b + 1)
=> "8000000000000000000000000000000000000000" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T15:53:48.210

那计算不正确。您的示例类似于以 10 为底的数字`9999`并说将其除以`2`yield `5555`。相当：

```
0xffffffffffffffffffffffffffffffffffffffff 
```

小于一：

```
0x10000000000000000000000000000000000000000 
```

将该数字划分为范围很容易。对于您的 N=2 示例，一半的键小于：

```
0x8000000000000000000000000000000000000000 
```

一半大于或等于。对于 N=4，类似：

```
ASSIGNED_PARTITION_1 = 0x4000000000000000000000000000000000000000
ASSIGNED_PARTITION_2 = 0x8000000000000000000000000000000000000000
ASSIGNED_PARTITION_3 = 0xc000000000000000000000000000000000000000 
```

如果您尝试使用较小的数字进行分区（例如您可以轻松地以 10 为基数编写的分区），您会看到发生了什么。

我不确定这些比较对你会有什么影响——这些都是*很大*的数字。恐怕我不是红宝石或 SQL 专家。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T16:18:09.940

您只需要散列的前*n 个*字符，具体取决于分区数。如果最多 16 则只有第一个字符：

```
select *
from items_to_be_processed
where left(id, 1) < '4'

select *
from items_to_be_processed
where left(id, 1) between '4' and '7' 
```

无需转换为整数。

然后你可以在*n*左边的字符上建立一个索引，让它变得小而快：

```
create index index_name on items_to_be_processed (left(id, 1)) 
```

* * *

有必要`left()`在子句中使用表达式，`where`以使计划者使用与此答案的评论相反的建议的小索引。这就是我在 9.2 中测试的方式：

```
create table itbp (id char(32));

insert into itbp
select md5(a::text)
from generate_series(1, 100000) s(a)
; 
```

我使用 md5 而不是 sha1 只是为了创建一个更简单的测试，因为 postgresql 的默认安装中没有 sha1 函数。

```
create index itbp_left_1_id_index on itbp (left(id, 1));

analyze itbp; 
```

我没有忘记在测试之前进行分析。现在两个解释：

```
explain select *
from itbp
where left(id, 1) between '4' and '7'
;
                                             QUERY PLAN                                              
-----------------------------------------------------------------------------------------------------
 Bitmap Heap Scan on itbp  (cost=529.17..1979.74 rows=24663 width=33)
   Recheck Cond: (("left"((id)::text, 1) >= '4'::text) AND ("left"((id)::text, 1) <= '7'::text))
   ->  Bitmap Index Scan on itbp_left_1_id_index  (cost=0.00..523.00 rows=24663 width=0)
         Index Cond: (("left"((id)::text, 1) >= '4'::text) AND ("left"((id)::text, 1) <= '7'::text))

explain select *
from itbp
where id >= '4' and id < '8'
;
                         QUERY PLAN                         
------------------------------------------------------------
 Seq Scan on itbp  (cost=0.00..2334.00 rows=24784 width=33)
   Filter: ((id >= '4'::bpchar) AND (id < '8'::bpchar)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T16:12:43.027

您想要做的是将 id 转换为整数以进行分区。这是一种简单的方法，假设 id 值是均匀分布的，您可以使用前两位数来获取 0 到 255 之间的值：

```
select substring(t.id, 1, 2)::bit(8)::int as IntHash,
       t.*
from t 
```

然后，您可以使用模算术定义范围，例如：

```
select (substring(t.id, 1, 2)::bit(8)::int)%8 as WhichOfEightPartitions
from t 
```

这是假设哈希 id 存储为字符串。

对此的基本想法来自this [post](http://postgresql.1045698.n5.nabble.com/Hex-to-Dec-Conversion-td3218223.html)，在“tom Lane”的回复中。这显然是未记录的行为，但它确实适用于 SQLFiddle。

# java - 授权标头的 Grails Base64 解码在解码时格式错误

> ID：14218542
> 
> 赞同：2
> 
> 时间：2013-01-08T15:36:53.430
> 
> 标签：java, grails, encoding, groovy, base64

我有一个 grails 控制器，它 base64 对授权标头进行解码。我使用 CURL 从 PHP 脚本发送了这个。

```
curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
curl_setopt($ch, CURLOPT_USERPWD, "testindia01@test.com:india123"); 
```

我的 grails 控制台日志显示：

```
Authorization raw: Basic dGVzdGluZGlhMDFAdGVzdC5jb206aW5kaWExMjM=, isBase64: true
Authorization decoded: ´"q—ïÕ—•πë•Ñ¿≈—ïÕ–πçΩ¥È•πë•Ñƒ»Ã 
```

在上述情况下，我使用的是 Commons Base64 类，但使用 Groovy 内置的 decodeBase64 会产生相同的结果。

进来的 Authorization raw 是正确的。如果我复制它并通过 PHP 的 ecode 推送它，那么它会正确解码。

```
echo base64_decode('dGVzdGluZGlhMDFAdGVzdC5jb206aW5kaWExMjM='); 
```

如果我将字符串直接复制到控制器中，例如

```
def decode = new String(Base64.encodeBase64("dGVzdGluZGlhMDFAdGVzdC5jb206aW5kaWExMjM=")) 
```

然后这也正确解码。

我通过请求获取标头

```
def auth = request.getHeader("Authorization") 
```

我测试它是一个有效的base64字符串

```
Base64.isBase64(auth) 
```

只是解码失败。我试过改变解码的编码。

def 解码 = new String(auth.decodeBase64(), "UTF-8")

以及 ISO-8859-1 和 Windows-1252 等其他编码，但每次都会返回不同的格式错误的字符串。

我还尝试在 CURL 请求上手动设置 Accept-Encoding。

我没有想法:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:46:26.823

这是因为“基本”已包含在 getHeader 返回值中。如果我把它去掉它就可以了。Base64.isBase64 仅检查字符是否在 base64 字母表中，因此“基本”必须是。

# ajax - 使用来自用户的 JSON 通信隐藏 AJAX

> ID：14218547
> 
> 赞同：1
> 
> 时间：2013-01-08T15:37:11.680
> 
> 标签：ajax, json, gwt, security

我们目前正在开发一个使用带有 JSON 的 AJAX 与服务器通信的 Web 客户端。客户端基于gwt，通信通过https。

浏览器工具可以轻松检查通信 - 是否有一些合理的方法可以向用户隐藏它，即保护协议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T15:53:00.780

除了所有浏览器使用的标准身份验证和加密技术外，无论您想出什么方法，都必须由您的 JavaScript 客户端启动。这意味着一个好的黑客可以解构你的 JavaScript 并弄清楚你是如何提交数据的。

安全通常与试图拦截通信或冒充合法用户的第三方或试图访问他们不应该访问的地方的恶意用户打交道。一旦你验证了一个用户是合法的，你为什么要试图对用户隐藏用户的数据？也许你可以描述你的用例。

编辑：

防止机器人的唯一方法是在工作流程的某个地方（即在提交重要数据之前）提出一个只有人类才能回答的问题（例如验证码）。这对用户来说通常很烦人，但没有其他办法。既然您建立了一个游戏平台，请让您的设计师提出一些有趣的验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T18:01:47.230

只是为了完善安全清单

1) HTTPS - 你已经设置好了 :)

2) Json 和 XSS/XSRF 网络安全 -

```
https://developers.google.com/web-toolkit/articles/security_for_gwt_applications#json-xsrf
https://developers.google.com/web-toolkit/articles/security_for_gwt_applications#json 
```

3) BOT 攻击 - 一个不错的验证码 - [GWT Widget 中的验证码](https://stackoverflow.com/questions/8506100/captcha-in-gwt-widget)

4) 其他 - [https://groups.google.com/forum/?fromgroups=#!topic/google-web-toolkit/_gViO5aZ-WQ](https://groups.google.com/forum/?fromgroups=#!topic/google-web-toolkit/_gViO5aZ-WQ)

# codeigniter - Tank Auth: 无法选择指定的数据库 : xxxx

> ID：14218549
> 
> 赞同：0
> 
> 时间：2013-01-08T15:37:20.233
> 
> 标签：codeigniter, tankauth

我正在尝试使用 Tank Auth。我成功地在我的数据库中创建了坦克表，但是当我加载页面时，它给了我这个错误：

```
Unable to select the specified database : testdb 
```

我试图用谷歌搜索解决方案，但似乎是 WAMP 问题。但我只想在这里仔细检查一下是否有人已经解决了这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:42:11.570

这确实看起来像是您的开发环境的问题。您确定您已正确配置数据库吗？

[尝试使用HeidiSQL](http://www.heidisql.com/)`config/database.php`等工具中定义的设置连接到数据库

# c# - 绑定 DataSet 和 GridView (c#)。我的代码有什么问题？

> ID：14218560
> 
> 赞同：0
> 
> 时间：2013-01-08T15:37:46.287
> 
> 标签：c#, asp.net, gridview, db2, database-connection

我的 aspx 页面上的按钮，单击时必须从**DB2 Database**中获取结果。我正在使用 ODBC 连接。单击**它时不显示任何值**，也不显示任何错误消息。**我的代码有什么问题？**

```
using (OdbcConnection odbcConnection = new OdbcConnection(db2con))
{
OdbcDataAdapter adapter = new OdbcDataAdapter(queryString, db2con);
DataSet dataSet = new DataSet();
try
{
odbcConnection.Open();
adapter.Fill(dataSet);
GridView1.DataSource = dataSet;
GridView1.DataBind();
GridView1.Visible = true;
}
catch (Exception)
{
Label1.Text = "fail";
}
} 
```

* * *

查询=`select * from schema.student`

* * *

连接字符串=`Driver={IBM DB2 ODBC DRIVER};database=demo;hostname=xx.xx.xx.xx;protocol=TCPIP;port=50000;uid=db2admin;pwd=xxxx;`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:57:23.310

尝试

```
GridView1.DataSource = dataSet.Tables[0]; 
```

# php - 如何基于下拉选项构建动态查询？

> ID：14218561
> 
> 赞同：0
> 
> 时间：2013-01-08T15:37:46.907
> 
> 标签：php, jquery, mysql

编辑：

SQL

```
$valuefromjs = $_REQUEST['var'];
$result6 = "SELECT DISTINCT $valuefromjs FROM persons ORDER BY $valuefromjs ASC";
$result7 = mysql_query($result6);
$num = mysql_num_rows($result7);  

$dataRanges[0] = array('dataRanges');       
        for ($i=1; $i<($num+1); $i++)
        {
        $dataRanges[$i] = array( (int) mysql_result($result7, $i-1) );
        }

echo json_encode($dataRanges); 
```

HTML

```
<select id="combo2" class="combo" data-index="2"></select> 
```

jQuery

```
$('#1combo').on('change', function () {
var jsonVar = $.ajax({
url : "visits/comboquery.php?var="+$(this).val(), 
dataType: "json",
async: false,
success: function(response) {
}
}).responseText;
for (var i=1; i<objVar.length;i++)
    {
    $('#combo2').html("<option value="+objVar[i]+">"+objVar[i]+"</option>");
    }
}); 
```

问题：

我有一个包含查询结果的数组。现在我需要结果是组合 2 选项，有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:51:59.027

据我了解，combo1 的选择将定义为构建combo2 运行哪个查询。

问题：用于构建combo2 的PHP 是在服务器端解析的，即PHP 代码总是在页面到达用户浏览器并且您的javascript 开始执行时完成执行。

如果您有一组有限的可能查询可以生成秒组合（应该是这种情况，因为 combo1 具有有限数量的选项），您可以创建所有这些查询，每个都有不同的 id，并保持它们隐藏（css “显示：无”）。

```
<select id="firstCombo2" class="combo2">
    ...
</select>
<select id="secondCombo2" class="combo2">
    ...
</select> 
```

等等

现在，当用户从 combo1 中进行选择时，您可以决定要显示哪一个隐藏的 combo2（css "display: block"）。

```
$('select#combo1).on("change", function(){
    $('select.combo2').css('display','none'); //hide all combo2's
    if($(this).val()=='Opt1'){
            $('select#firstCombo2').css('display','block');
    }else if($(this).val()=='Opt2'){
            $('select#secondCombo2').css('display','block');
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T17:54:52.793

您应该使用 AJAX 来解决您的问题。在combo1 onChange 上调用AJAX 调用到您的服务器并发送combo1 的选定值。然后在您的 php 代码中使用从 AJAX 请求接收到的值运行查询，并使用字符串中的选项构造一个新的组合框并回显该字符串。您可以使用该 AJAX 响应来填充新的 combo2。

# android - 使用 rawQuery 增加 SQL 字段

> ID：14218563
> 
> 赞同：0
> 
> 时间：2013-01-08T15:38:05.200
> 
> 标签：android, sqlite

这可能很容易解决，但是我在更新 Android 中的 SQL 字段时遇到问题：以下查询不包含任何语法错误，但是当我运行应用程序时，它会崩溃：

```
db.rawQuery("UPDATE "+ TABLE_NAME + " SET "+ FIELD_TO_UPDATE + " = " + FIELD_TO_UPDATE + 1, null); 
```

这是日志：

```
01-08 16:45:01.269: E/AndroidRuntime(1118): FATAL EXCEPTION: main
01-08 16:45:01.269: E/AndroidRuntime(1118): android.database.sqlite.SQLiteException: no such column: smsSent1: , while compiling: UPDATE users SET smsSent = smsSent1 
```

基本上，最后一个`+1`被视为连接而不是总和，我如何使用`+`运算符来增加`SMS_SENT`字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T15:50:34.160

试试这个

```
db.rawQuery("UPDATE "+ TABLE_NAME + " SET "+ FIELD_TO_UPDATE + " = " + FIELD_TO_UPDATE + "+1", null); 
```

# javascript - if条件的Javascript格式

> ID：14218565
> 
> 赞同：6
> 
> 时间：2013-01-08T15:38:07.827
> 
> 标签：javascript, jquery

> **可能重复：**
> [根据值列表检查变量是否相等](https://stackoverflow.com/questions/4728144/check-variable-equality-against-a-list-of-values)
> [Javascript：使用 OR 操作数比较 SINGLE 值与 MULTIPLE 值](https://stackoverflow.com/questions/13959064/javascript-comparing-single-value-against-multiple-values-with-or-operands)

首先，我是 javascript 方面的新手。请让我知道是否有任何简单的方法可以格式化以下代码。

```
if( fileName== 'doc' || fileName=='docx' || fileName=='xls' || fileName=='xlsx' || fileName=='ppt' || fileName=='pdf' ){

Do something

} else{

    Do something

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-08T15:41:31.330

```
var SUPPORTED_FILE_EXTENSIONS = ['doc', 'docx', 'xls', 'xlsx', 'ppt', 'pdf'];

if(SUPPORTED_FILE_EXTENSIONS.indexOf(fileName) != -1){
    //Do Something
} else {
    //Do Something Else
} 
```

[Array.indexOf()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf) - 请注意，这还包括有关为旧版浏览器 (IE IE) 添加向后兼容性支持的信息。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-08T15:42:19.317

```
var validTypes = /docx?|xlsx?|ppt|pdf/;

if (fileName.match(validTypes)) {
    ...
} 
```

`?`注意：正则表达式中的问号 ,表示前一个字符是可选的，因此它可以同时匹配`doc`，而`docx`竖线`|`, 表示`or`它将匹配`doc`or`xls`等​​。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-08T15:43:38.873

也许像

```
var filenames = ['doc','docx','xls','xlsx','ppt','pdf'];
if(filenames.indexOf(fileName) >= 0 ) {
  // Do something
} else {
    // Do something else
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T15:42:04.043

Maybe`switch`语句是最快的选择之一：

```
switch (fileName) {
    case "doc":
    case "docx":
    ...
        // ...
    default:
        // else
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T15:44:39.480

您可以重新格式化它以使代码更易于阅读：

```
if( fileName == 'doc' || 
    fileName == 'docx' || 
    fileName == 'xls' || 
    fileName == 'xlsx' || 
    fileName == 'ppt' || 
    fileName == 'pdf' ){
    Do something
} else{
    Do something
} 
```

或者，您可以使用诸如 [`jQuery.inArray()`](http://api.jquery.com/jQuery.inArray/)or之类的结构来减少代码的重复性[`array.indexOf()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)：

```
var arr = ['doc', 'docx', 'xls', 'xlsx', 'ppt', 'pdf'];
if (jQuery.inArray(fileName, arr) > -1){
    Do something
} else{
    Do something
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-08T16:13:07.657

创建数组更容易阅读。加上使用 jQuery 的 $.inArray() 方法。它的工作原理与 .indexOf() 类似，另外一个好处是它与旧版本的 IE 兼容，旧版本的 IE 缺少很多数组函数。

# android - 单击 MainActivity 中的按钮并转到 MainActivity2 上的屏幕

> ID：14218566
> 
> 赞同：-7
> 
> 时间：2013-01-08T15:38:11.657
> 
> 标签：android, button, click

我作为一个Android编程的菜鸟，我不明白，太多的解决方案，例子，我太沮丧了。

我有 MainActivity 和 MainActivity2，对于我拥有的每一个，activity_main.xml 和 activity_main2.xml

在图形布局的 activity_main.xml 中，我添加了一个按钮，我想单击它并继续 MainActivity2，以查看 activity_main2.xml 屏幕。

谁能帮我举个例子。我想不通:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:41:38.990

在您的 onCreate 方法中，您应该执行以下操作：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(Bundle savedInstanceState);
    setContentView(R.layout.activity_main);

    Button btn = findViewById(R.id.your_button_id);
    btn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            startActivity(new Intent(MainActivity.this, MainActivity2.class));
        }

    }
} 
```

这`your_button_id`是您的按钮的 ID，`MainActivity`上面的代码告诉按钮`startActivity`何时按下按钮。在这种情况下，新活动是`MainActivity2`。

有关更多信息，您应该阅读可用的教程：http: [//developer.android.com/training/basics/firstapp/index.html](http://developer.android.com/training/basics/firstapp/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T15:49:32.610

我强烈建议你看看Travis 的[这些视频教程](http://thenewboston.org/list.php?cat=6)。它们非常有用，结构良好且易于理解，是任何初学者的良好开端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T15:41:45.463

使用 Intend 调用另一个 Activity。在清单中，您必须添加第二个活动。

**在第一个活动中**

```
 Button btListe = (Button)findViewById(R.id.Button_Liste);
    btListe.setOnClickListener(new OnClickListener() 
    {   public void onClick(View v) 
        {   
            Intent intent = new Intent(FirstActivity.this, SecondActivity.class);
            startActivity(intent);   
        }
    }); 
```

**教程**如果您正在寻找教程，[请参见此处](http://www.java-samples.com/showtutorial.php?tutorialid=1525)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T15:49:42.890

活动主：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
 xmlns:android="http://schemas.android.com/apk/res/android"
   android:orientation="vertical"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent">
  <Button
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:text="Go to Activity Two"
   android:id="@+id/btnActTwo">
  </Button>
  </LinearLayout> 
```

活动二：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
 xmlns:android="http://schemas.android.com/apk/res/android"
 android:orientation="vertical"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent">
<TextView
 android:id="@+id/textView1"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 android:text="This is Activity Two">
</TextView>
</LinearLayout> 
```

主要活动：

```
public class MainActivity extends Activity implements OnClickListener{

Button btnActTwo;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    btnActTwo = (Button) findViewById(R.id.btnActTwo);
    btnActTwo.setOnClickListener(this);

}

public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.btnActTwo:
        Intent intent = new Intent (this, ActivityTwo.class);
        startActivity (intent);
        break;
    default:
        break;
    }
}
} 
```

活动二：

```
public class ActivityTwo extends Activity {

protected void onCreate (Bundle savedInstanceState) {
    super.onCreate (savedInstanceState);
    setContentView (R.layout.activity_two);
}

} 
```

# mysql - mysql：转身喜欢

> ID：14218567
> 
> 赞同：0
> 
> 时间：2013-01-08T15:38:16.697
> 
> 标签：mysql, sql-like

我有一张这样的桌子

```
身份证、头衔
1、你好世界
2、世界你好
```

我喜欢搜索与这个 php 表达式匹配的所有 id：

```
$searchstring = "hello world is yours"
if (strstr($searchstring,mysql(title)){echo found} 
```

在mysql中我经常使用这个：

```
select id from table where title LIKE '%....%' 
```

但我需要它的另一面：

```
select id from table where "hello word is yours" LIKE %title% 
```

结果必须是 id 1 "hello word"

谁能告诉我正确的语法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T15:39:28.057

```
select id from table
where 'hello word is yours' LIKE concat('%', replace(title, ' ', '%'), '%') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T15:46:08.240

作为替代方案，您可以考虑使用[全文搜索](http://dev.mysql.com/doc/refman/5.0/en/fulltext-boolean.html)。如果您创建一个 FTS 索引，它可能会更有效，并且会提供直观的搜索字符串：

```
SELECT id FROM tablename WHERE MATCH (title)
      AGAINST ('hello world is yours' IN BOOLEAN MODE); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T15:39:46.837

利用`CONCAT`

```
select id 
from tableName
where 'hello word is yours' LIKE CONCAT('%',title,'%') 
```

# jquery - 附加 CDATA 标记时编码的 HTML 标记

> ID：14218569
> 
> 赞同：0
> 
> 时间：2013-01-08T15:38:18.463
> 
> 标签：jquery, encoding, html-parsing, cdata, html-encode

在我的页面中，有一个 div，我必须在其中显示来自 javascript 的 html。所以在 javascript 中，我附加了 CDATA 标记，以便将 html 显示为数据。以下是我使用的代码

```
var htmlCode = '<h>testing html</h>';
htmlCode = '<![CDATA[' + htmlCode+ ']]>';
$('myDiv').html(htmlCode); 
```

当我将它分配给 div 的 html 时，这实际上显示`testing html]]>`为最后一个`>`转换为。`&gt;`任何想法如何克服这个问题

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T15:57:14.367

`CDATA`在 XML 文件中使用。这意味着里面的内容被视为文本。jQuery`.html()`变成`<![CDATA[<h`，`<!--[CDATA[<h-->`这是一个注释。然后它会忽略结束`</h>`标签，因为缺少开始标签。因此，它显示`testing html]]>`.

如果要将 HTML 显示为文本，只需使用`.text()`而不是`.html()`. 它会为您转义它，以便浏览器不会解析它。

```
var htmlCode = '<h>testing html</h>';
$('#myDiv').text(htmlCode); 
```

**编辑：您说您***希望*解析HTML ，然后使用`.html`.

```
var htmlCode = '<h>testing html</h>';
$('#myDiv').text(htmlCode); 
```

在这两种情况`CDATA`下*都不*需要。

# zend-framework - Zend 中方法链的代码风格

> ID：14218571
> 
> 赞同：1
> 
> 时间：2013-01-08T15:38:26.713
> 
> 标签：zend-framework

以前曾在这里（[http://framework.zend.com/issues/browse/ZF-11135](http://framework.zend.com/issues/browse/ZF-11135)）提出过这个问题，但 Zend 没有做出任何回应，所以它必须归结为大众或多数决定。

我问的原因是因为我工作的公司规模不断扩大，拥有标准风格显然是一种明智的做法。

从上面链接的示例中忽略的一个示例是每行多个方法，即

```
$this->setAction()->setMethod()->etc()
    ->etc()->andSoForth(); 
```

这有助于符合线路长度。

那么你个人的看法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T12:19:52.577

方法链在长行上可能有点难以理解，但是如果在每个方法调用之前添加一个返回，那么它是完全可读的，并且可以避免重复键入类变量。

关于在[http://framework.zend.com/issues/browse/ZF-11135](http://framework.zend.com/issues/browse/ZF-11135)提出的问题- 第一个和第二个代码示例是相同的 - 他们应该表现出不同吗？

# css - 显示中div的水平居中：表格行

> ID：14218572
> 
> 赞同：1
> 
> 时间：2013-01-08T15:38:27.090
> 
> 标签：css, html, centering

我的布局由显示为表格的 div、3 个表格行和每行最多 5 个表格单元格组成。我的问题是双重的：1）如果表格中的单元格少于五个，我无法弄清楚如何将表格单元格居中。2）我无法弄清楚如何保持完整性连续少于 5 个时的形状。

一行中的单元格数量是可变的（在 3 到 5 之间），我必须使用 div——我不能使用真实的表格。

这是一个代码笔：http: [//codepen.io/Jaemaz/full/aCboe](http://codepen.io/Jaemaz/full/aCboe)

这是来源：

**HTML：**

```
<div class="focus-container">
  <div class="focus-row">
    <div class="focus-element  circle">
      <span class="ng-scope">
        Option A
      </span>
      </div>
      <div class="focus-element  circle">
        <span class="ng-scope">
          Option B
        </span>
      </div>
      <div class="focus-element  circle">
        <span class="ng-scope">
          Option C
        </span>
      </div>
      <div class="focus-element  circle">
        <span class="ng-scope">
          Option D
        </span>
      </div>
      <div class="focus-element  circle">
        <span class="ng-scope">
          Option E
        </span>
      </div>
  </div>
  <div class="focus-row">
    <div class="focus-element  circle" ng-class="{unknown: unknown, square: square, circle: circle, selected: selected, shouldHaveBeenSelected: shouldHaveBeenSelected, shouldNotHaveBeenSelected: shouldNotHaveBeenSelected}" ng-click="click()" ng-transclude="" focuschoice="" identifier="F" enabled="true">
      <span class="ng-scope">
        Option F
      </span>
  </div>
  </div>
</div> 
```

CSS：

```
.focus-container {
width: 560px;
height: auto;
display: table;
background-color: #000;
border-spacing: 15px;
table-layout: fixed;
-moz-user-select: none;
-khtml-user-select: none;
-webkit-user-select: none;
user-select: none;
}

.focus-row {
width: 100%;
height: 100%;
display: table-row;
}

.focus-element {
width: 90px;
height: 90px;
display: table-cell;
color: #fff;
background: #808080;
border: 2px solid #BFBFBF;
vertical-align: middle;
text-align: center;
font-family: "Ubuntu", Arial, Helvetica, sans-serif;
font-size: 14px;
text-shadow: 0px 2px 1px rgba(0, 0, 0, 1);
max-width: 94px;
}

.focus-element.circle {
-moz-border-radius: 94px;
-webkit-border-radius: 94px;
border-radius: 94px;
} 
```

截屏： ![在此处输入图像描述](../Images/f6f1bd020299b080b6d44d84091d4b65.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:45:55.717

表不会这样做，但表中的表会。1）在外部表中使用单单元格行，在每个单元格中使用新表，并在行内居中内表。2）您可以在内表中的每个单元格上使用固定（或某些相对）宽度和高度。

添加：这将适用于 display:table 以及 old-school table。最外层表的每一行应该只有一个单元格，并且在该单元格中放置内表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T00:38:29.577

基于@Jojje 的建议，答案在于在 div 结构中创建一个额外的“内部”级别（显示：表）。解决方案在 CodePen 上：http: [//codepen.io/Jaemaz/pen/spbKf](http://codepen.io/Jaemaz/pen/spbKf)

如果 Codepen 消失，这里是 HTML 和 CSS 示例：

**HTML**

```
<div class="focus-container">
  <div class="focus-row">
    <div class="inner">
      <div class="focus-element circle">
        <span>ahem</span>
      </div>
    </div>
  </div>
  <div class="focus-row">
    <div class="inner">
      <div class="focus-element circle">
        <span>hello</span>
      </div>
      <div class="focus-element circle">
        <span>there</span>
      </div>
    </div>
  </div>
  <div class="focus-row">
    <div class="inner">
      <div class="focus-element circle">
        <span>what</span>
      </div>
      <div class="focus-element circle">
        <span class="content">is</span>
      </div>
      <div class="focus-element circle">
        <span>happening</span>
      </div>
      <div class="focus-element circle">
        <span>happening</span>
      </div>
      <div class="focus-element circle">
        <span>happening</span>
      </div>
    </div>
  </div>
</div> 
```

**CSS**

```
.focus-container {
  width: 560px;
  background-color: #000;
  padding: 5px;
}

.focus-container .focus-row {
  height: 110px;
  background-color: #000
}

.focus-container .focus-row .inner {
  display: table;
  margin: 0 auto;
  height: 110px;
}

.focus-container .focus-row .inner .focus-element {
  float: left;
  text-align: center;
  margin: 0 auto;
  width: 94px;
  height: 94px;
  background-color: #009900;
}

.focus-container .focus-row .inner .focus-element span {
  margin-top: 40px;
  display: block;
}

.focus-container .focus-row .inner .circle {
  -moz-border-radius: 94px;
  -webkit-border-radius: 94px;
  border-radius: 94px;
  margin: 8px; 
```

# eclipse - Eclipse 中是否有文本片段操纵器插件或功能？

> ID：14218580
> 
> 赞同：1
> 
> 时间：2013-01-08T15:38:54.900
> 
> 标签：eclipse, eclipse-plugin, ide

所以我正在编写一些代码，其中很多代码可以通过将一些包含项目列表的文本转换为 Java 代码来生成。使用正则表达式转换文本似乎可以解决问题。所以我写了三个正则表达式，而不是按顺序应用时会将我的项目列表转换为我想要的代码。

问题是，我必须将其中大约 20 个列表转换为 20 个不同的类。今天早上我想，“我希望有某种 Eclipse 插件，我可以编写一个简短的 Perl 脚本将其存储到一个按钮中，然后突出显示一些文本，然后让该 Perl 脚本操作并替换突出显示的文本。然后我可以建立一个常见的文本操作器库，可以为我节省大量时间。”

有这样的东西存在吗？

# php - 在 php 联系表单中要求上传文件

> ID：14218588
> 
> 赞同：1
> 
> 时间：2013-01-08T15:39:05.830
> 
> 标签：php, file-upload, contact-form, required

我已经整理了一个包含多个文本字段和 3 个文件上传的联系表。代码如下：

```
<?php

$websitename=""; 
$allowtypes=array("jpg", "tif", "pdf" );
$myemail="...";
$priority="3"; 
$allowattach="3"; 
$max_file_size="1024";
$max_file_total="3072";
$submitvalue=" Submit "; 
$resetvalue=" Reset ";
$defaultsubject="Registration"; 
$use_subject_drop=false;
$subjects=array("Department 1", "Department 2", "Department 3");
$emails=array("dept_1@domain.com", "dept_2@domain.com", "dept_3@domain.com");
$thanksmessage="Thank you for submitting your registration!"; 

function get_ext($key) { 
    $key=strtolower(substr(strrchr($key, "."), 1));
    $key=str_replace("jpeg", "jpg", $key);
    return $key;
}

function phattach($file, $name, $boundary) {

    $fp=fopen($file, "r");
    $str=fread($fp, filesize($file));
    $str=chunk_split(base64_encode($str));
    $message="--".$boundary."\n";
    $message.="Content-Type: application/octet-stream; name=\"".$name."\"\n";
    $message.="Content-disposition: attachment; filename=\"".$name."\"\n"; 
    $message.="Content-Transfer-Encoding: base64\n";
    $message.="\n";
    $message.="$str\n";
    $message.="\n";

    return $message;
}

function clean_msg($key) {
    $key=str_replace("\r", "", $key);
    $key=str_replace("\n", "", $key);
    $find=array(
        "/bcc\:/i",
        "/Content\-Type\:/i",
        "/Mime\-Type\:/i",
        "/cc\:/i",
        "/to\:/i"
    );
  $key=preg_replace($find, "", $key);
  return $key;
}

$error="";
$sent_mail=false;

If($_POST['submit']==true) {
    extract($_POST, EXTR_SKIP);

        If(trim($firstname)=="") { 
            $error.="You did not enter your first name!<br />";
        }
        If(trim($lastname)=="") { 
            $error.="You did not enter your last name!<br />";
        }
        If(trim($dateofbirth)=="") { 
            $error.="You did not enter your date of birth!<br />";
        }
        If(trim($streetaddress)=="") { 
            $error.="You did not enter your address!<br />";
        }
        If(trim($postalcode)=="") { 
            $error.="You did not enter your postal code!<br />";
        }
        If(trim($city)=="") { 
            $error.="You did not enter your city!<br />";
        }
        If(trim($country)=="") { 
            $error.="You did not enter your country!<br />";
        }
        If(trim($videolink)=="") { 
            $error.="You did not enter a video link!<br />";
        }
        If(trim($email)=="") { 
            $error.="You did not enter your email!<br />";
        } 
            Elseif(!preg_match("/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,})+$/", $email)) {
            $error.="Invalid email address.<br />";
        }

        If(trim($emailsubject)=="") {
            $emailsubject=$defaultsubject;
        }

        If($allowattach > 0) {

            If((array_sum($_FILES['attachment']['size'])) > ($max_file_total*1024)) {

                $error.="The max size allowed for all your files is ".$max_file_total."kb<br />";

            } Else {

                For($i=0; $i <= $allowattach-1; $i++) {

                    If($_FILES['attachment']['name'][$i]) {

                        If(!in_array(get_ext($_FILES['attachment']['name'][$i]), $allowtypes)) {

                            $error.= "Invalid file type for your file: ".$_FILES['attachment']['name'][$i]."<br />";

                        } Elseif(($_FILES['attachment']['size'][$i]) > ($max_file_size*1024)) {

                            $error.= "Your file: ".$_FILES['attachment']['name'][$i]." is too big.<br />";

                        }   
                    } 
                }
            }
        }

    If($error) {

        $display_message=$error;

    } Else {

        If($use_subject_drop AND is_array($subjects) AND is_array($emails)) {
            $subject_count=count($subjects);
            $email_count=count($emails);

            If($subject_count==$email_count) {

                $myemail=$emails[$emailsubject];
                $emailsubject=$subjects[$emailsubject];
            }
        }

        $boundary=md5(uniqid(time()));

        $headers="Return-Path: <".clean_msg($email).">\n";
        $headers.="From: ".clean_msg($yourname)." <".clean_msg($email).">\n";
        $headers.="X-Mailer: PHP/".phpversion()."\n";
        $headers.="X-Sender: ".$_SERVER['REMOTE_ADDR']."\n";
        $headers.="X-Priority: ".$priority."\n"; 
        $headers.="MIME-Version: 1.0\n";
        $headers.="Content-Type: multipart/mixed; boundary=\"".$boundary."\"\n";
        $headers.="This is a multi-part message in MIME format.\n";

        $message = "--".$boundary."\n";
        $message.="Content-Type: text/html; charset=\"iso-8859-1\"\n";
        $message.="Content-Transfer-Encoding: quoted-printable\n";
        $message.="\n";
        $message.="<br /><br />First Name:<br />";
        $message.=clean_msg(nl2br(strip_tags($firstname)));
        $message.="<br /><br />Last Name:<br />";
        $message.=clean_msg(nl2br(strip_tags($lastname)));
        $message.="<br /><br />Date of Birth:<br />";
        $message.=clean_msg(nl2br(strip_tags($dateofbirth)));
        $message.="<br /><br />Street Address:<br />";
        $message.=clean_msg(nl2br(strip_tags($streetaddress)));
        $message.="<br /><br />Postal Code:<br />";
        $message.=clean_msg(nl2br(strip_tags($postalcode)));
        $message.="<br /><br />City:<br />";
        $message.=clean_msg(nl2br(strip_tags($city)));
        $message.="<br /><br />Country:<br />";
        $message.=clean_msg(nl2br(strip_tags($country)));
        $message.="<br /><br />Email:<br />";
        $message.=clean_msg(nl2br(strip_tags($email)));
        $message.="<br /><br />Website:<br />";
        $message.=clean_msg(nl2br(strip_tags($website)));
        $message.="<br /><br />Videolink:<br />";
        $message.=clean_msg(nl2br(strip_tags($videolink)));
        $message.="<br /><br />Video Password:<br />";
        $message.=clean_msg(nl2br(strip_tags($password)));
        $message.="<br /><br />Links:<br />";
        $message.=clean_msg(nl2br(strip_tags($link1)));
        $message.="<br />";
        $message.=clean_msg(nl2br(strip_tags($link2)));
        $message.="<br />";
        $message.=clean_msg(nl2br(strip_tags($link3)));
        $message.="<br /><br /><br />";
        $message.="\n";

        If($allowattach > 0) {

            For($i=0; $i <= $allowattach-1; $i++) {

                If($_FILES['attachment']['tmp_name'][$i]) {

                    $message.=phattach($_FILES['attachment']['tmp_name'][$i], $_FILES['attachment']['name'][$i], $boundary);

                }   
            }
        }

        $message.="--".$boundary."--\n";

        If(!mail($myemail, clean_msg($emailsubject), $message, $headers)) {

            Exit("An error has occured, please report this to the website administrator.\n");

        } Else {

            $sent_mail=true;            
        }
    }
} 
```

这可能不是很漂亮，但似乎可以解决问题。但我不知道的是，当没有或没有足够的文件选择上传时如何给出错误消息。我以不同的方式尝试了以下命令，有时它根本不做任何事情，有时它显示错误消息，即使选择了文件。

1.

```
if((!empty($_FILES["attachment"])) && ($_FILES['attachment']['error'] == 0)) { 
        $error.="You did not submit all the required files!<br />";
    } 
```

2.

```
} if (isset ($_FILES['attachment']['name']) && !empty ($_FILES['attachment']['name'])) {

                            $error.= "Please attach all the required files!<br />"; 
```

3.

```
if ($_FILES["attachment"]["error"] ==4) {
            $error.="You need to attach the required files.<br />";
        } 
```

4.

```
 foreach($_FILES as $file) {
        if($file['error'] == 0 && $file['size'] ==0) {
        $error.="You did not submit all the required files!<br />";
    }
} 
```

如何实现仅在选择上传的文件少于 3 个时才显示的错误警告？

所以，我包括了这个：

```
<script type="text/javascript">
  function check_form(){
var all_ok=1;
      var errors="";
if(document.getElementById('firstname').value == ''){}
           all_ok=0;
           errors+="You did not enter your first name!<br />";
        }
if(document.getElementById('lastname').value == ''){}
           all_ok=0;
           errors+="You did not enter your last name!<br />";
        }
if(document.getElementById('dateofbirth').value == ''){}
           all_ok=0;
           errors+="You did not enter your date of birth!<br />";
        }
if(document.getElementById('streetaddress').value == ''){}
           all_ok=0;
           errors+="You did not enter your address!<br />";
        }
if(document.getElementById('postalcode').value == ''){}
           all_ok=0;
           errors+="You did not enter your postal code!<br />";
        }
if(document.getElementById('city').value == ''){}
           all_ok=0;
           errors+="You did not enter your city!<br />";
        }
if(document.getElementById('country').value == ''){}
           all_ok=0;
           errors+="You did not enter your country!<br />";
        }
if(document.getElementById('videolink').value == ''){}
           all_ok=0;
           errors+="You did not enter your video link!<br />";
        }
if(document.getElementById('email').value == ''){}
           all_ok=0;
           errors+="You did not enter your email!<br />";
        }
if(document.getElementById('attachment').value == ''){}
           all_ok=0;
           errors+="You did not attach all the required files!<br />";
        }

    if(all_ok){
           document.getElementById('theform').submit();
      }else{
           alert(errors);
      }
  }
  </script> 
```

并将提交更改为：

```
<input type="submit" onclick='check_form()' value="<?=$submitvalue;?>" /> &nbsp;
            <input type="reset" value="<?=$resetvalue;?>" /> 
```

它什么都不做？我也尝试添加

```
If(trim($_FILES["attachment"])=="") { 
            $error.="You did not attach all the required files!<br />";
        } 
```

在 php 中，但即使选择了文件，这也会给我一条错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:45:23.187

为什么不使用 javascript 在提交之前检查表单？就像是：

```
 <button onclick='check_form()'>SEND FORM</button> 
```

然后在`head`标签中类似：

```
 <script>
  function check_form(){
      var all_ok=1;
      var errors="";
      if(document.getElementById('firstname').value == ''){}
           all_ok=0;
           errors+="Please fill the first name of the form<br/>";
      }
      // more ifs to check the other inputs
      if(all_ok){
           document.getElementById('form_id').submit();
      }else{
           alert(errors);
           //if you want to make it more pretty than an alert you can use a 
           //empty div and put the errors inside of it.
           //document.getElementById('errors_div').innerHTML='<p>'+errors+'</p>'; 
      }

  }
  </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T18:08:33.400

我添加了

```
If(($_FILES['attachment']['size'][$i]) == (0)) {
$error.= "A required attachment is missing!<br />";
} 
```

后

```
For($i=0; $i <= $allowattach-1; $i++) 
```

这会为每个丢失的文件生成一条错误消息。

感谢 Naryl 的贡献。

# c# - 如何处理解析 Json.NET 中的随机程序集和类名

> ID：14218589
> 
> 赞同：0
> 
> 时间：2013-01-08T15:39:07.050
> 
> 标签：c#, json, json.net, copy-protection

我使用 Json.NET 进行序列化和反序列化，TypeNameHandling 设置为`TypeNameHandling.All`. 这会将类型和程序集写入 json 文件，例如`"$type":"Testing.Utils.Entry, TestAssembly"`.

但是，当我们保护可执行文件时，这些名称会更改，每次我们保护它时都会更改。所以，我想让 Json.NET`Testing.Utils.Entry, TestAssembly`在运行时自动解析它。此名称可以完全更改，例如也可以更改为 ' `ABC.DEF`' 而不是 ' `ABC.DEF.GHI`'。

因为我希望条目保存一致，所以`ABC.DEF`运行时的 ' ' 类型应始终存储到`Testing.Utils.Entry`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:39:25.387

为了将来的参考，我设法使用`SerializationBinder`带有`BindToName`and`BindToType`函数来解决这个问题。

# python - Creating dynamic ABC class based on user defined class

> ID：14218591
> 
> 赞同：5
> 
> 时间：2013-01-08T15:39:09.947
> 
> 标签：python, python-3.x, abstract-class, introspection

I'm writing an plugin framework and I want to be able to write a decorator `interface`, which will convert user class to ABC class and substitute all methods with abstractmethods. I cannot get it working and I suppose the problem is connected with wrong mro, but I can be wrong.

I basically need to be albe to write:

```
@interface
class X:
    def test(self):
        pass

x = X() # should fail, because test will be abstract method. 
```

substituting methods with their abstract versions is straightforward (you have to iterate over func's and replace them with `abc.abstractmethod(func)`), but I've got problem with creating dynamic type, which will be an `ABCmeta` metaclass.

Right now I've got something like:

```
from abc import ABCMeta

class Interface(metaclass=ABCMeta):
    pass

def interface(cls):
    newcls = type(cls.__name__, (Interface, cls), {})
    # substitute all methods with abstract ones
    for name, func in inspect.getmembers(newcls, predicate=inspect.isfunction):
        setattr(newcls, name, abstractmethod(func))
    return newcls 
```

but it doesnot work - Ican initialize class X without errors.

With standard usage of ABC in Python, we can write:

```
class X(metaclass=ABCMeta):
    @abstractmethod
    def test(self):
        pass

x = X() # it will fail 
```

How can I create dynamic type in Python3, which will behave like it will have metaclass `ABCmeta` and will substitute all functions with abstract ones?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T16:11:25.620

The trick is not to use `setattr` to reset each of the attributes, but *instead* to pass those modified attributes to the `type` function as a dictionary:

```
import inspect
from abc import ABCMeta, abstractmethod

class Interface(metaclass=ABCMeta):
    pass

def interface(cls):
    attrs = {n: abstractmethod(f)
             for n, f in inspect.getmembers(cls, predicate=inspect.isfunction)}

    return type(cls.__name__, (Interface, cls), attrs)

@interface
class X(metaclass=ABCMeta):
    def test(self):
        pass

x = X()
# does fail:
# Traceback (most recent call last):
#   File "test.py", line 19, in <module>
#     x = X() # should fail, because test will be abstract method.
# TypeError: Can't instantiate abstract class X with abstract methods test 
```

# c++ - C ++如何将x64位应用程序转换为x86

> ID：14218593
> 
> 赞同：0
> 
> 时间：2013-01-08T15:39:10.243
> 
> 标签：c++, build, x86, 64-bit

我有几个关于 x64 和 x86 系统的问题

我在 qt 4.7 中编写了一个 C++ 应用程序，通常我将 int 用于整数等。

那么如果我想将此应用程序转换为 x64bit，我该怎么办？

我应该使用不同的编译器选项构建它还是应该在我的代码中更改某些内容

另一个问题，如果我下载一个开源应用程序并在 Linux 中构建它，它将是 x64 还是 x86 架构，**我的意思是如果我在 x64bit Linux 中构建源代码，我将获得一个 x64 应用程序，如果我在 x86bit Linux 中构建源代码，我将获取 x86 应用程序**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:47:36.877

构建的类型应该取决于您正在构建的编译器和体系结构。

也就是说，应该（应该）编写代码，以便支持具有不同位深度的构建。

例如，如果您使用 声明整数变量`long`，则变量的大小会有所不同（取决于架构）。如果您改为使用`std::int32_t`or声明它`std::int64_t`，则在架构之间切换时大小将保持不变。

除了位深度之外，您还应该确保任何依赖于字节序的代码继续正确运行（除了位深度和字节序之外，可能还有其他因素需要注意）。

总之，您可能只是在新架构上重新编译代码并且它可以工作，或者您可能需要进行一些编辑。我想这取决于你的代码做什么以及它是如何编写的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T15:48:47.970

是的，您可能只需要重新编译它。在（大多数？）64 位架构上，int 的大小仍然是 32 位。

你的第二个问题的答案是，除非你告诉编译器，否则它可能会为你编译它的平台构建。打字`uname -m`会告诉你那是哪一个。

# c# - 将 xml 文件中的属性应用于表单

> ID：14218597
> 
> 赞同：0
> 
> 时间：2013-01-08T15:39:22.700
> 
> 标签：c#, xml, forms

> **可能重复：**
> [C# 加载 XML 文件](https://stackoverflow.com/questions/14141268/c-sharp-loading-a-xml-file)

我的程序有问题。我需要阅读一些 xml 文件，其中我有表单属性，我需要在运行（加载）它时将其应用于我的程序。我得到了这段代码，但在运行时它给了我一个错误（对象引用未设置为对象的实例）。我现在迷路了，真的不知道如何将这些设置从 xml 应用到我的程序中。

```
<Form>
   <Size>
     <Width>558</Width> 
     <Height>537</Height> 
   </Size>
   <Text>XML saving</Text> 
   <Name>Test_name</Name> 
</Form> 
```

```
 public formaENA()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        XDocument newDoc = XDocument.Load(@"C:\testXML.xml");

        var form = from size in newDoc.Descendants("Size")
                    select new
                    {
                        Width = Convert.ToInt32(size.Element("Width").Value),
                        Height = Convert.ToInt32(size.Element("Height").Value)           
                    };

        foreach(var size in form)
        {
            formaENA.ActiveForm.Width = size.Width;
            formaENA.ActiveForm.Height = size.Height;              
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:59:53.037

那么你得到这个错误是因为你没有初始化formaENA。在分配任何属性之前尝试创建该表单。

```
 formaENA frm = new formaENA();
    foreach(var size in form)
    {
        frm.Width = size.Width;
        frm.Height = size.Height;              
    }
    frm.Show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:01:27.037

在我看来，您还没有初始化formaENA。如果它没有名为 ActiveForm 的静态属性，您应该得到一个空指针异常。

# c# - 安装了 .Net 4.5 但不能在 Visual C# 中使用 ZipFile 类

> ID：14218602
> 
> 赞同：30
> 
> 时间：2013-01-08T15:39:35.603
> 
> 标签：c#, .net, visual-studio-2012, compression, zipfile

我是 Visual Studio 编程的新手。

我最近将 .Net 4.0 升级到 4.5，以便使用 System.IO.Compression 下的 ZipFile 类，但安装完成后，Visual Studio（我使用的是 2012）仍然无法将 ZipFile 识别为类名。

我确保 .Net 4.5 出现在控制面板程序列表中，并且我的 C# 解决方案将 .Net Framework 4 设置为目标框架。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-01-08T15:42:53.413

请参阅MSDN 上的[ZipFile 类](http://msdn.microsoft.com/en-us/library/system.io.compression.zipfile.aspx)。它显示所需的框架版本是 4.5。修复框架版本后，检查您是否添加了对`System.IO.Compression.FileSystem.dll`程序集的引用并向您的类添加了 using`System.IO.Compression`指令。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-08T15:42:23.313

您还需要引用 System.IO.Compression.FileSystem.dll 程序集。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-11-20T15:26:23.443

只是为了进一步澄清前面的答案，这里是如何手动将引用添加到 Web.config：

```
<configuration>
  <system.web>
    <compilation targetFramework="4.5">
      <assemblies>
        <add assembly="System.IO.Compression, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.IO.Compression.FileSystem, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
      </assemblies>
    </compilation>
  </system.web>
</configuration> 
```

或者到 *.csproj：

```
<Project ...>
  <ItemGroup>
    <Reference Include="System.IO.Compression, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089, processorArchitecture=MSIL" />
    <Reference Include="System.IO.Compression.FileSystem, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089, processorArchitecture=MSIL" />
  </ItemGroup>
</Project> 
```

这些文件可以在 C:\Windows\Microsoft.NET\assembly\GAC_MSIL\ 中找到，子文件夹还包含有关版本、文化和 PublicKeyToken 的必要信息。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-08T15:41:28.670

您需要将当前项目的目标框架从.Net 4 更改为.Net 4.5。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-06-13T08:03:13.580

**.NET 4.5 中的新功能**

*Zip 压缩改进以减小压缩文件的大小。请参阅 System.IO.Compression 命名空间。*

> 添加**System.IO.Compression**程序集作为对您项目的引用。您可能还希望引用**System.IO.Compression.FileSystem**程序集来访问*ZipArchive 类*的三个扩展方法（来自 ZipFileExtensions 类） ：CreateEntryFromFile、CreateEntryFromFile 和 ExtractToDirectory。这些扩展方法使您能够将条目的内容压缩和解压缩到文件中。

样本

```
const string zipFilePath = @"C:\apps\Sample Pictures.zip";

using (FileStream zipFileToOpen = new FileStream(zipFilePath, FileMode.Open))
using (ZipArchive archive = new ZipArchive(zipFileToOpen, ZipArchiveMode.Read)) {

        foreach (var zipArchiveEntry in archive.Entries)
            Console.WriteLine(
                "FullName of the Zip Archive Entry: {0}", zipArchiveEntry.FullName
            );
} 
```

参考资料：http:
[//msdn.microsoft.com/en-us/library/ms171868.aspx](http://msdn.microsoft.com/en-us/library/ms171868.aspx)
[http://www.tugberkugurlu.com/archive/net-4-5-to-support-zip-file-manipulation-out开箱即用](http://www.tugberkugurlu.com/archive/net-4-5-to-support-zip-file-manipulation-out-of-the-box)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-11-19T09:19:58.620

对于 Windows Phone 8.1，使用 NuGet 将 Microsoft 压缩包添加到您的项目并引用它。

如果您有一个较旧的 WP8 项目，您可能使用了不同的包，该包会与 WP8.1 附带的 .NET 4.5 的一部分的 System.IO.Compression dll 产生冲突。您需要摆脱它并使用与 .NET 4.5 协调工作的 Microsoft Compression。我就是这样过来的！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-03-24T15:58:01.977

在我的情况下，我需要**手动删除所有以*System.IO.Compression***开头的 dll 引用，然后一一添加所需的引用（*System.IO.Compression.FileSystem*等），即使我只写了一个 using 语句

```
using System.IO.Compression; 
```

我希望这可以帮助别人

# objective-c - 让两个图像以随机顺序出现iOS

> ID：14218605
> 
> 赞同：1
> 
> 时间：2013-01-08T15:39:46.523
> 
> 标签：objective-c, ios, xcode

我是社区的新手，所以如果我的问题不清楚，请告诉我。我正在尝试在 iPAD 上进行选择反应练习。有两张图像应该随机出现在屏幕的左右两侧，用户将通过点击对应于出现图像位置的按钮来响应。这是问题所在，我尝试使用以下方式让这两个图像以随机顺序出现：

```
- (void) viewDidAppear:(BOOL)animated
{
   for(int n = 1; n <= 20; n = n + 1)
   {
      int r = arc4random() % 2;
      NSLog(@"%i", r);
      if(r==1)
      {
        [self greenCircleAppear:nil finished:nil context: nil];
      }
      else
     {
        [self redCircleAppear:nil finished:nil context: nil];
     }
  }
} 
```

但是，仅运行一组动画时会生成 20 个随机数。有没有办法让动画在下一个循环开始之前在每个循环中完成运行？任何帮助表示赞赏，在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:24:25.143

当您说“只运行一组动画”时，我假设这意味着`greenCircleAppear`并`redCircleAppear`开始出现图像序列并且用户按下按钮。如果是这种情况，我建议不要使用`for`循环，`viewDidAppear`而是`viewDidAppear`初始化当前状态并调用呈现下一个动画的方法。动画完成后，让它调用呈现下一个动画的方法。这些方面的东西：

将此添加到界面：

```
@interface ViewController ()

@property NSInteger currentIteration;

@end 
```

这是在实现中：

```
- (void)viewDidAppear:(BOOL)animated {
    self.currentIteration = 0;
    [self showNextAnimation];
}

- (void)greenCircleAppear:(id)arg1 finished:(id)arg2 context:(id)arg3 {
    //perform animation
    NSLog(@"green");
    [self showNextAnimation];
}

- (void)redCircleAppear:(id)arg1 finished:(id)arg2 context:(id)arg3 {
    //perform animation
    NSLog(@"red");
    [self showNextAnimation];
}

- (void)showNextAnimation {
    self.currentIteration = self.currentIteration + 1;
    if (self.currentIteration <= 20) { //you should replace '20' with a constant
        int r = arc4random() % 2;
        NSLog(@"%i", r);
        if(r==1)
        {
            [self greenCircleAppear:nil finished:nil context: nil];
        }
        else
        {
            [self redCircleAppear:nil finished:nil context: nil];
        }
    }
    else {
        //do what needs to be done after the last animation
    }
} 
```

# javascript - 图片的 JavaScript 加载进度

> ID：14218607
> 
> 赞同：53
> 
> 时间：2013-01-08T15:39:49.310
> 
> 标签：javascript, image, html, progress

JS中有没有办法在加载图像时获取加载图像的进度？我想使用 HTML5 的新 Progress 标签来显示加载图像的进度。

我希望有类似的东西：

```
var someImage = new Image()
someImage.onloadprogress = function(e) { progressBar.value = e.loaded / e.total };
someImage.src = "image.jpg"; 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2014-03-23T16:53:06.707

这样，您可以在 Image() 对象上添加 2 个新函数：

```
 Image.prototype.load = function(url){
        var thisImg = this;
        var xmlHTTP = new XMLHttpRequest();
        xmlHTTP.open('GET', url,true);
        xmlHTTP.responseType = 'arraybuffer';
        xmlHTTP.onload = function(e) {
            var blob = new Blob([this.response]);
            thisImg.src = window.URL.createObjectURL(blob);
        };
        xmlHTTP.onprogress = function(e) {
            thisImg.completedPercentage = parseInt((e.loaded / e.total) * 100);
        };
        xmlHTTP.onloadstart = function() {
            thisImg.completedPercentage = 0;
        };
        xmlHTTP.send();
    };

    Image.prototype.completedPercentage = 0; 
```

在这里，您使用加载功能并将图像附加到 div 上。

```
var img = new Image();
img.load("url");
document.getElementById("myDiv").appendChild(img); 
```

在加载状态期间，您可以使用 来检查进度百分比`img.completedPercentage`。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-05-16T19:32:27.437

塞巴斯蒂安的回答非常好，这是我见过的最好的这个问题。但是，有一些可能的改进。我使用他的代码修改如下：

```
Image.prototype.load = function( url, callback ) {
    var thisImg = this,
        xmlHTTP = new XMLHttpRequest();

    thisImg.completedPercentage = 0;

    xmlHTTP.open( 'GET', url , true );
    xmlHTTP.responseType = 'arraybuffer';

    xmlHTTP.onload = function( e ) {
        var h = xmlHTTP.getAllResponseHeaders(),
            m = h.match( /^Content-Type\:\s*(.*?)$/mi ),
            mimeType = m[ 1 ] || 'image/png';
            // Remove your progress bar or whatever here. Load is done.

        var blob = new Blob( [ this.response ], { type: mimeType } );
        thisImg.src = window.URL.createObjectURL( blob );
        if ( callback ) callback( this );
    };

    xmlHTTP.onprogress = function( e ) {
        if ( e.lengthComputable )
            thisImg.completedPercentage = parseInt( ( e.loaded / e.total ) * 100 );
        // Update your progress bar here. Make sure to check if the progress value
        // has changed to avoid spamming the DOM.
        // Something like: 
        // if ( prevValue != thisImage completedPercentage ) display_progress();
    };

    xmlHTTP.onloadstart = function() {
        // Display your progress bar here, starting at 0
        thisImg.completedPercentage = 0;
    };

    xmlHTTP.onloadend = function() {
        // You can also remove your progress bar here, if you like.
        thisImg.completedPercentage = 100;
    }

    xmlHTTP.send();
}; 
```

主要是我添加了一个 mime 类型和一些小细节。按照塞巴斯蒂安的描述使用。效果很好。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2017-02-13T04:39:24.043

只是为了增加改进，我修改了朱利安的答案（这反过来又修改了塞巴斯蒂安的）。我已将逻辑移至函数而不是修改`Image`对象。这个函数返回一个`Promise`用 URL 对象解析的，它只需要作为标签的`src`属性插入。`image`

```
/**
 * Loads an image with progress callback.
 *
 * The `onprogress` callback will be called by XMLHttpRequest's onprogress
 * event, and will receive the loading progress ratio as an whole number.
 * However, if it's not possible to compute the progress ratio, `onprogress`
 * will be called only once passing -1 as progress value. This is useful to,
 * for example, change the progress animation to an undefined animation.
 *
 * @param  {string}   imageUrl   The image to load
 * @param  {Function} onprogress
 * @return {Promise}
 */
function loadImage(imageUrl, onprogress) {
  return new Promise((resolve, reject) => {
    var xhr = new XMLHttpRequest();
    var notifiedNotComputable = false;

    xhr.open('GET', imageUrl, true);
    xhr.responseType = 'arraybuffer';

    xhr.onprogress = function(ev) {
      if (ev.lengthComputable) {
        onprogress(parseInt((ev.loaded / ev.total) * 100));
      } else {
        if (!notifiedNotComputable) {
          notifiedNotComputable = true;
          onprogress(-1);
        }
      }
    }

    xhr.onloadend = function() {
      if (!xhr.status.toString().match(/^2/)) {
        reject(xhr);
      } else {
        if (!notifiedNotComputable) {
          onprogress(100);
        }

        var options = {}
        var headers = xhr.getAllResponseHeaders();
        var m = headers.match(/^Content-Type\:\s*(.*?)$/mi);

        if (m && m[1]) {
          options.type = m[1];
        }

        var blob = new Blob([this.response], options);

        resolve(window.URL.createObjectURL(blob));
      }
    }

    xhr.send();
  });
}

/*****************
 * Example usage
 */

var imgContainer = document.getElementById('imgcont');
var progressBar = document.getElementById('progress');
var imageUrl = 'https://placekitten.com/g/2000/2000';

loadImage(imageUrl, (ratio) => {
  if (ratio == -1) {
    // Ratio not computable. Let's make this bar an undefined one.
    // Remember that since ratio isn't computable, calling this function
    // makes no further sense, so it won't be called again.
    progressBar.removeAttribute('value');
  } else {
    // We have progress ratio; update the bar.
    progressBar.value = ratio;
  }
})
.then(imgSrc => {
  // Loading successfuly complete; set the image and probably do other stuff.
  imgContainer.src = imgSrc;
}, xhr => {
  // An error occured. We have the XHR object to see what happened.
});
```

```
<progress id="progress" value="0" max="100" style="width: 100%;"></progress>

<img id="imgcont" />
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-06-09T00:00:41.793

实际上，在最新的 chrome 中你可以使用它。

```
$progress = document.querySelector('#progress');

var url = 'https://placekitten.com/g/2000/2000';

var request = new XMLHttpRequest();
request.onprogress = onProgress;
request.onload = onComplete;
request.onerror = onError;

function onProgress(event) {
  if (!event.lengthComputable) {
    return;
  }
  var loaded = event.loaded;
  var total = event.total;
  var progress = (loaded / total).toFixed(2);

  $progress.textContent = 'Loading... ' + parseInt(progress * 100) + ' %';

  console.log(progress);
}

function onComplete(event) {
  var $img = document.createElement('img');
  $img.setAttribute('src', url);
  $progress.appendChild($img);
  console.log('complete', url);
}

function onError(event) {
  console.log('error');
}

$progress.addEventListener('click', function() {
  request.open('GET', url, true);
  request.overrideMimeType('text/plain; charset=x-user-defined');
  request.send(null);
});
```

```
<div id="progress">Click me to load</div>
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-01T06:35:34.577

对于 xmlhttpreq v2 检查，使用：

```
var xmlHTTP = new XMLHttpRequest();
if ('onprogress' in xmlHTTP) {
 // supported 
} else {
 // isn't supported
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-31T10:05:28.327

这是 Julian Jensen 代码的一个小更新，以便在加载后能够在 Canvas 中绘制图像：

```
xmlHTTP.onload = function( e ) {
        var h = xmlHTTP.getAllResponseHeaders(),
            m = h.match( /^Content-Type\:\s*(.*?)$/mi ),
            mimeType = m[ 1 ] || 'image/png';
            // Remove your progress bar or whatever here. Load is done.

        var blob = new Blob( [ this.response ], { type: mimeType } );
        thisImg.src = window.URL.createObjectURL( blob );

         thisImg.onload = function()
            {
                if ( callback ) callback( this );
            };
    }; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-13T15:07:35.807

如果要处理加载的图像，则必须再添加一项功能，因为

```
thisImg.src = window.URL.createObjectURL(blob) 
```

刚刚开始将图像作为线程处理。

您必须向负载原型的主体添加一个新的函数，例如

```
 this.onload = function(e)
  {
    var canvas = document.createElement('canvas')

    canvas.width = this.width
    canvas.height = this.height

    canvas.getContext('2d').drawImage(this, 0, 0)
   } 
```

这让我头疼地意识到:)

# tree - 如何在redis中实现一个文件夹层次树？

> ID：14218608
> 
> 赞同：3
> 
> 时间：2013-01-08T15:39:49.747
> 
> 标签：tree, redis

我正在寻找一种在 redis 中实现分层文件/文件夹树并能够轻松移动节点的有效方法。

```
/
  a/
     a1
     a2
     b/
        b1
        b2
        c/
           c1
  x/
     x1
     y/
        y1 
```

我想存储上面的树并轻松地进行诸如

```
move node /a/b/c to /foo/a/b/c 
move node /a/b/c to /x/c
delete node /a/b 
```

指向现有实现模型等的指针会有所帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T23:03:54.407

我设计的模式有助于轻松添加、移动和重命名节点和条目

```
# **enode** a hierarchical directory in redis
# A folder/node structure where nodes can have sub-nodes and entries. 
# Entries can have tags.
#
# Each entry gets an enodeid and an entryid
# enodeid - The id of the directory that contains the entry
# entryid - The id of this entry within this enode/directory
#
# The data schema is as follows
#   enodeid:kids -  Sorted set containing the kids for each directory
#                   The topmost node is a string "root" and not a number
#                   The sort score is actually the enodeid of the corresponding kid
#                   so if /a has an enodeid of 2 and is a kid of root the entry is
#                   root:kids [2, "a"]
#                   If a directory /a/b exists and has an enodeid of 4 than
#                   2:kids = [4, "b"] - here 2 is the enodeid of '/a'
#
#   enodeid:meta -  Hash entry containing the name and parent of an enodeid
#                   2:meta = {name: "a", parentid: "root"}
#                   4:meta = {name: "b", parentid: 2}
#
#   enode.next.id - Unique enode id's
#
#   entry.next.id - Unique entry id's
#
#   enodeid:entries -   Sorted set containing the entries in a directory
#                       The sort score is the sequence number of the entry withi the directory
#                       moveEntry moves the entry up/down within this
#
#   enodeid.entry.num - Unique entry id's for a given enodeid
#
#   enodeid:tags -  Sorted list of tags
#                   Score is tagcount, memeber is tag
#
#   enodeid:axs -   List of usernames that have access to this folder 
```

# c - C：如何 shmat 结构？

> ID：14218615
> 
> 赞同：2
> 
> 时间：2013-01-08T15:40:08.523
> 
> 标签：c, unix, gcc, shared-memory

我有一个看起来像这样的结构：

```
struct data {
  int code;
  char name[25], fnum[8];
}; 
```

然后我尝试将它用作这样的共享内存：

```
int dataSID = shmget(100002, sizeof(struct data), IPC_CREAT | 0666); 
```

并像这样附加它：

```
struct data *com = shmat(dataSID, 0, 0); 
```

最后我尝试填充这样的值：

```
(*com).code = 1;
scanf("%s", (*com).name); 
```

我在`scanf`.

我究竟做错了什么？

是否`shmat`为结构正确分配内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:05:32.077

对于字符数组，您始终可以使用**strcpy()**或**strncpy()**。其中 strncpy() 被推荐，它有助于避免缓冲区溢出。

# joomla - 是子类别可以有多个父类别..？

> ID：14218616
> 
> 赞同：1
> 
> 时间：2013-01-08T15:40:09.060
> 
> 标签：joomla, joomla2.5, joomla-extensions

我需要为多个父类别创建一个子类别，下面的草图将解释更多：

```
 ---------        ----------
   |CATEGORY|       |CATEGORY|
   ---------        ----------
       |________________|
                 |
            ----------
            |CATEGORY|
            ---------- 
```

我找到了几个扩展，但它们都适用于多个类别的项目，有什么方法可以做到这一点或任何扩展允许我们这样做，请专家指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:08:31.997

我认为您打算为（主）菜单而不是文章类别执行此操作？

不能两次链接到菜单，因为菜单项需要父项。

但是您可以执行以下操作（更像是一种解决方法）并创建：

```
-Cat1
 --Cat1.1
-Cat2
 --Cat2.1 
```

如果 Cat1.1 是您要指向的类别，您可以选择 Cat2.1。并为“菜单项类型”选择“别名”。现在您可以从列表中选择 Cat1.1，您就完成了。现在您已经创建了一个指向系统中不同类别的子菜单。

# c++ - 调整 MDI 选项卡式组的大小

> ID：14218619
> 
> 赞同：0
> 
> 时间：2013-01-08T15:40:18.387
> 
> 标签：c++, mfc, tabs, resize

使用 C++、MFC，我有一个带有 MDI 选项卡组的应用程序。我已经编写了代码来 1 个投票 0answers 21 个视图以编程方式创建新标签组并移动标签。这一切都很好。

但是我无法设置我制作的标签组的大小。默认情况下，组的大小是可用空间的一半。我在选项卡控件类上找不到官方大小方法。所以我在组控件上尝试了 SetWindowPos() 和 MoveWindow() 。这似乎有影响，但不是完全的影响。

例如，假设我希望 A 组占框架窗口区域的 10%，而 B 组占 90%。当我调用 SetWindowPos() 或 MoveWindow() 时，我得到了大约 30%:70% 而不是我要求的 10%:90%。它似乎想按我说的做，但它正在与之抗争。

我还尝试事先调用选项卡控件的 AutoSizeWindow(FALSE) 方法。
但这没有帮助。

有任何想法吗？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:59:54.717

好吧，我的错。MoveWindow() 工作正常。我只是没有注意到每个选项卡组都需要一个具有自己来源的矩形。（每个左边都是 0） 我试图设置框架窗口坐标中的矩形。

# macos - 如何找出 NSWindow 的任何部分当前是否可见（不仅仅是订购）

> ID：14218625
> 
> 赞同：7
> 
> 时间：2013-01-08T15:40:41.500
> 
> 标签：macos, cocoa, custom-controls, nswindow

我有一个每秒更新一次的 NSWindow 以显示当前时间。

这张图是处理器密集型的，我想避免在窗口**完全**被其他窗口遮挡时这样做。

不幸的是， [NSWindow isVisible] 不显示窗口是否在屏幕上实际可见，而只显示它是否**在屏幕**上。这意味着如果窗口在窗口列表中但被其他窗口完全遮挡 isVisible == YES，我的自定义 drawRect 被调用，我最终将所有内容绘制到一个从未使用过的缓冲区中。

有什么方法可以检测 Window 及其内容是否在屏幕上**实际可见？**

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-03-20T04:28:07.320

在 10.9 上，您可以使用 NSWindow 的 -occlusionState 和相关的委托方法。

从发行说明：

> 如果窗口的全部内容（包括标题栏和工具栏）被另一个不透明窗口 100% 覆盖，则窗口被视为被遮挡。如果 Windows 被命令离开屏幕、最小化到 Dock 或其他空间，它们也会被遮挡。部分遮挡算作“可见”。</p>

例子：

```
- (void)windowDidChangeOcclusionState:(NSNotification *)notification
{
    if ([[notification object] occlusionState]  &  NSWindowOcclusionStateVisible) {
        // visible
    } else {
        // occluded
    }
} 
```

# php - 如何在没有包的情况下初始化类，自动加载

> ID：14218628
> 
> 赞同：0
> 
> 时间：2013-01-08T15:40:48.347
> 
> 标签：php, autoload, psr-0

```
require_once __DIR__.'/lib/Symfony/Component/ClassLoader/UniversalClassLoader.php';

use Symfony\Component\ClassLoader\UniversalClassLoader;

$loader = new UniversalClassLoader();
$loader->registerNamespace('Test', __DIR__ . '/lib');
$loader->register();

$router = new Test\Router; 
```

但是，如果我不想在初始化类时添加命名空间 Test，这可能吗？

喜欢： $router = 新路由器；

...

```
<?php
namespace Test;

class Router
{
    public function __construct() {
        echo __CLASS__;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:43:39.413

添加另一个使用语句，如您在顶部看到的：

`use Test\Router;`

现在你可以：

`$router = new Router();`

# django - Django：内置包含标签与自定义包含标签

> ID：14218632
> 
> 赞同：14
> 
> 时间：2013-01-08T15:40:56.490
> 
> 标签：django, django-templates

[Django 的内置包含标签](https://docs.djangoproject.com/en/1.5/ref/templates/builtins/#include)和[自定义包含标签](https://docs.djangoproject.com/en/1.5//howto/custom-template-tags/#inclusion-tags)有什么区别？

我已经阅读了文档，两者似乎都实现了相同的目标：渲染一个模板，并将其传递给上下文或变量。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-08T15:57:24.450

它们服务于不同的目的。该`include`标签仅包含来自现有模板的完整内容且未经修改。自定义包含标记将上下文传递给一个函数，该函数可以包含在将上下文传递给模板之前对上下文进行操作的逻辑。

例如，也许我有一个将在多个页面上显示的面板。面板的模板需要通过上下文传递一些特定的查询。包含面板的页面不需要这些上下文变量来做其他任何事情。如果我在标签中包含面板模板`include`，我将不得不在包含面板的每个视图中编写这些查询，并将它们作为上下文变量传递。

或者，我可以编写一个自定义包含标签，其中包含查询并将它们传递给面板的模板。通过使用自定义包含标记，我不需要重复代码以在包含面板的每个视图中生成其上下文。我的视图将包含更少的代码，并且不会因为仅由面板使用的上下文变量而变得杂乱无章。

尽管您在某种意义上是正确的，即简单地传递未经处理的上下文的自定义包含标签将与`include`标签相同。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-08T17:21:46.157

需要将模板分成更小的文件？使用**包含标签**（为了可读性和可维护性以及 DRY）

需要在渲染模板之前包含更多代码吗？使用**包含标签**（获取更多数据，添加一些业务逻辑.. 它真的就像另一个没有 url 的小视图。它就像一个模板函数）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-04T08:11:41.377

原则上，dgel 和 YardenST 的回答提出的观点是正确的。此外，查看 django 的代码可以很好地了解这两个选项在性能上的比较。

使用[默认模板加载](https://docs.djangoproject.com/en/1.10/ref/templates/api/#loader-types)器时，两者绝对没有区别。两者最终都会调用该[`InclusionTag` `render()`](https://github.com/django/django/blob/1.10.6/django/template/library.py#L218)函数，该函数又会调用[`Loader` `get_contents()`](https://github.com/django/django/blob/1.10.6/django/template/loaders/filesystem.py#L25)从文件系统打开模板文件的模板。`render()`仅在文件用于循环模板的情况下缓存文件。

附带说明一下，使用[django.template.loaders.cached.Loader](https://docs.djangoproject.com/en/1.10/ref/templates/api/#django.template.loaders.cached.Loader)可能会产生性能差异。

最后，关于 dgel 建议在不同视图中使用包含标记作为通用上下文：当 html 标记位于跨多个视图的单个基本模板中时，很有可能避免渲染包含模板的额外开销，通过使用[ContextMixin](https://docs.djangoproject.com/en/1.10/ref/class-based-views/mixins-simple/#django.views.generic.base.ContextMixin)。这是一个非常常见的渲染场景，例如。基本模板中的主菜单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-01T05:22:17.370

就在我最近遇到了这个问题，因为我试图找到最好的路线 -`include`与`inclusion tag`- 当没有真正的额外逻辑可能进入`inclusion tag`.

我选择了`inclusion tag`以下原因：

1.  模板中更紧凑和可读的标记

    ```
    <!-- include -->
    {% include "path/to/funky.html" with arg1=arg1 arg2=arg2 %} 
    ```

    对比

    ```
    <!-- inclusion tag -->
    {% funky arg1 arg2 %} 
    ```

2.  更易于维护代码，如果您必须向标签添加自定义逻辑，那么添加很容易
3.  它强制您使用范围正确的模板变量，因此`inclusion tag`不能从父视图继承变量，使其对奇怪的错误更具弹性

# c++ - GLM 相机 X、Y 旋转引入 Z 旋转的问题

> ID：14218637
> 
> 赞同：3
> 
> 时间：2013-01-08T15:41:14.787
> 
> 标签：c++, matrix, camera, rotation, glm-math

所以我在使用 GLM 库在 OpenGL 和 C++ 中实现的相机时遇到了问题。我的目标相机类型是可以轻松探索 3D 世界的飞行相机。我已经设法让相机工作得很好，它很好而且很流畅，环顾四周，运动似乎很好而且正确。

我似乎遇到的唯一问题是沿相机的 X 和 Y 轴的旋转（向上和向下看）引入了一些围绕它的 Z 轴的旋转。这导致世界在旅行时轻微滚动。

例如......如果我在相机前面有一个方形四边形并以圆周运动移动相机，就像用你的头环顾四周一样，一旦运动完成，四边形将略微滚动如果你歪了头。

我的相机目前是一个组件，我可以将其附加到场景中的对象/实体上。每个实体都有一个“框架”，它基本上是该实体的模型矩阵。Frame 包含以下属性：

```
glm::mat4 m_Matrix;
glm::vec3 m_Position;
glm::vec3 m_Up;
glm::vec3 m_Forward; 
```

然后相机使用这些来创建适当的 viewMatrix，如下所示：

```
const glm::mat4& CameraComponent::GetViewMatrix()
{
    //Get the transform of the object
    const Frame& transform = GetOwnerGO()->GetTransform();

    //Update the viewMatrix
    m_ViewMatrix = glm::lookAt(transform.GetPosition(), //position of camera
                           transform.GetPosition() + transform.GetForward(), //position to look at
                           transform.GetUp()); //up vector

    //return reference to the view matrix
    return m_ViewMatrix; 
} 
```

现在......这是我在 Frame 对象中的旋转 X 和 Y 方法，我猜这就是问题所在：

```
void Frame::RotateX( float delta )
{
    glm::vec3 cross = glm::normalize(glm::cross(m_Up, m_Forward)); //calculate x axis

    glm::mat4 Rotation = glm::rotate(glm::mat4(1.0f), delta, cross);

    m_Forward = glm::normalize(glm::vec3(Rotation * glm::vec4(m_Forward, 0.0f))); //Rotate forward vector by new rotation

    m_Up = glm::normalize(glm::vec3(Rotation * glm::vec4(m_Up, 0.0f))); //Rotate up vector by new rotation
}

void Frame::RotateY( float delta )
{
    glm::mat4 Rotation = glm::rotate(glm::mat4(1.0f), delta,  m_Up);    

    //Rotate forward vector by new rotation
    m_Forward = glm::normalize(glm::vec3(Rotation * glm::vec4(m_Forward, 0.0f))); 
} 
```

所以在那里的某个地方，有一个我一直在寻找试图解决的问题。我已经搞砸了几天，尝试随机的事情，但我得到相同的结果，或者 z 轴旋转是固定的，但出现了其他错误，例如不正确的 X、Y 旋转和相机移动。

我看了一下云台锁，但据我了解，这个问题对我来说似乎不太像云台锁。但我可能错了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T05:56:57.687

存储当前俯仰/偏航角并即时生成相机矩阵，而不是尝试在中间向量上累积微小变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-03T21:29:39.920

在您的 RotateY 函数中，将其更改为：

```
glm::mat4 Rotation = glm::rotate(glm::mat4(1.0f), delta,  m_Up); 
```

对此：

```
glm::mat4 Rotation = glm::rotate(glm::mat4(1.0f), delta,  glm::vec3(0,1,0)); 
```

# python - 交换列表中实体的位置

> ID：14218638
> 
> 赞同：3
> 
> 时间：2013-01-08T15:41:16.710
> 
> 标签：python

我有以下示例列表

```
 x= [['True_304', 'false_2'], ['True_702', 'false_2_1'], ['True_204', 'false_222_2']] 
```

我想交换实体的位置，以便第二个实体是第一个，第一个是第二个。基本上，类似：

```
 x= [['false_2', 'True_304'], ['false_2_1', 'True_702'], ['false_222_2', 'True_204']] 
```

有没有更简单的方法来做到这一点？任何想法都会有所帮助。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T15:43:07.117

您可以使用列表推导：

```
>>> x = [['True_304', 'false_2'], ['True_702', 'false_2_1'], ['True_204', 'false_222_2']]
>>> [[b, a] for [a, b] in x]
[['false_2', 'True_304'], ['false_2_1', 'True_702'], ['false_222_2', 'True_204']] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:24:55.293

如果您的列表大于 2，例如 12 个元素：

```
for e in x:
    e.reverse() 
```

# delphi - Teller Scan 230 检查扫描仪设备 - Delphi 所需的 API 文档或示例

> ID：14218640
> 
> 赞同：1
> 
> 时间：2013-01-08T15:41:23.260
> 
> 标签：delphi, usb

我最近买了一台二手的 TellerScan 230，这是一种由 www.digitalcheck.com 制造的支票扫描设备，它通过 USB 连接进行连接。

我下载了驱动程序和一个演示程序，但是我找不到任何 api 工具包。

任何人都可以帮助我与此设备进行通信。我使用 Delphi XE2，但是除了包含源代码之外的任何其他演示都可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:35:57.780

您必须从[此处](http://www.e-maillogic.com/digitalcheck/digitalcom/tsenhacements.htm)向供应商请求 api 工具包。

该 api 以[`this`](http://www.digitalcheck.com/drivers_demo/api_webdoc.pdf)文档为特色，这是一个`ActiveX`带有 VB、.net、C、C++ 示例的控件。

# c# - XCopy 不适用于 UseShellExecute = false

> ID：14218642
> 
> 赞同：1
> 
> 时间：2013-01-08T15:41:25.840
> 
> 标签：c#, batch-file, xcopy

我正在尝试使用 System.Diagnostics.Process 从 .net/c# 运行批处理文件。不知何故，它不执行批处理文件的 xcopy 命令。

示例批处理文件：

```
#copy test to test2 including sub directories
xcopy c:\test\ c:\test2 
```

C#代码：

```
 public void RunMSIBatchFile(string _workingDirectory, string batchFileName)
    {
        var process = new Process
        {
            StartInfo =
            {

                UseShellExecute = false,
                RedirectStandardOutput = true,
                WorkingDirectory = _workingDirectory,
                FileName = _workingDirectory + batchFileName,
                CreateNoWindow = true,
                RedirectStandardError = true
            }
        };

        process.OutputDataReceived += ProcessOutputDataReceived;
        process.Start();
        process.BeginOutputReadLine();
        process.WaitForExit(Convert.ToInt32(CommandTimeOut.TotalMilliseconds));
    } 
```

如果我将 UseShellExecute 更改为 true，那么它可以工作，但似乎无法捕获标准输出。

有没有人遇到过这样的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:19:18.097

我已经测试了您的确切代码，并且似乎能够很好地接收数据。但是，由于读取是异步进行的，因此有可能在您读取所有数据*之前*`WaitForExit(...)`返回。似乎数据的结束是由传递给事件处理程序的属性为null 发出的。*`Data``DataReceivedEventArgs``OutputDataReceived`*

 *还值得注意的是，如果`xcopy`请求用户输入（例如，在目标中存在同名文件的情况下），似乎没有返回任何数据。您可能希望在批处理文件中检查这一点，或者还处理来自标准错误流的数据。*

# php - 当个人使用“导出为 PDF/CSV”时，PHPMyADmin 使用的功能是什么？

> ID：14218644
> 
> 赞同：0
> 
> 时间：2013-01-08T15:41:27.017
> 
> 标签：php, sql, csv, phpmyadmin

我有一个关于 PHPMyAdmin 的简单问题，即我想知道 PHPMyAdmin 在使用“导出为 PDF/CSV”时使用的 SQL 命令。

通常，当您应用命令/函数时，PHPMyAdmin 会让您知道它使用的函数（通常显示在页面顶部），但是，当您使用“导出”选项卡时，此窗口会被您的输出混淆。

我的问题很简单——PHPMyAdmin 使用的“导出为 PDF/CSV”功能是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:50:27.320

它不仅仅是一个功能......它调用一个新的 Excel 工作簿并用数据动态填充它。这可以通过多种方式实现，但最流行的可能是 PHPExcel 扩展
[PHPExcel](http://phpexcel.codeplex.com)

# c - eclipse中的“statemenet没有效果”错误

> ID：14218647
> 
> 赞同：1
> 
> 时间：2013-01-08T15:41:36.333
> 
> 标签：c, eclipse

我有这行代码，

```
newCust.idNumber == ID; 
```

ID 的值是字符串类型并且已经分配，​​newCust 是我的结构的名称，idNumber 是我的结构中的一个字符串，我想将 ID 的值分配给结构的 ID 号，知道为什么这行代码是“无效的声明”请。我正在使用 eclipse，我是 C 编程的初学者

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T15:43:06.963

这是因为`==`比较两个值，并丢弃该比较的结果。尽管像这样的表达式语句在 C 中是完全合法的，但它们非常不寻常，并且经常作为您输入错误的指标。这就是编译器警告您的原因。

**编辑：**

> 我也尝试了=，然后我得到了这个错误，从类型分配给类型时不兼容`char[60]`的类型`char *`

你不能像这样分配字符串：你需要使用`strcpy`，像这样：

```
strcpy(newCust.idNumber, ID); 
```

确保它`newCust.idNumber`足够长，可以将`ID`其与其空终止符放在一起，即假设`newCust.idNumber`，`char[60]`的值`ID`必须为 59 个字符或更少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T15:42:53.070

因为您正在进行比较并丢弃结果。你可能想要

```
newCust.idNumber = ID; 
```

注意单个等号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T15:43:03.607

`==`检查是否相等，它不是赋值运算符。

而且由于您不检查支票的返回码，Eclipse（正确地）对您大喊大叫。

# c# - 在关闭子窗体时调用 form_load() 函数

> ID：14218656
> 
> 赞同：-2
> 
> 时间：2013-01-08T15:41:53.463
> 
> 标签：c#

我正在创建一个当前有 3 种形式的应用程序，

*   父表单 - 接受用户的登录详细信息，验证，如果成功隐藏自身并打开子表单。
*   第一个子表单 - 在表单加载时连接到数据库获取数据并显示它。单击新条目并打开另一个子窗体。
*   第二个子表单 - 用户为数据库中的新条目输入新数据，成功时会出现一个成功消息框。然后用户可以单击关闭按钮，此表单将自行隐藏并显示第一个子表单。

我想要做的是找到某种方式重新加载第一个孩子表单，关闭你的第二个孩子表单。这将导致其中显示的记录被刷新，从而显示刚刚使用第二个子表单创建的新条目。

请指导我如何实现这一目标。

这是我用来处理隐藏事件的代码。

在登录事件的主窗体中 = true

```
cpanel child = new cpanel(); //create new isntance of form, cpanel is the 1st child form
child.FormClosed += new FormClosedEventHandler(child_FormClosed); //add handler to catch when child form is closed
child.Show(); //show child
this.Hide(); //hide parent

void child_FormClosed(object sender, FormClosedEventArgs e)
        {
            //when child form is closed, the parent reappears
            MessageBox.Show("You have been logged out.");
            Application.Exit();
        } 
```

在第二个孩子形式中，我有这样的东西

```
private void button3_Click(object sender, EventArgs e)
        {
            this.Close();

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:45:28.333

使你`ChildForm1`成为主要形式：

```
Application.EnableVisualStyles();
Application.SetCompatibleTextRenderingDefault(false);

using(var loginForm = new LoginForm())
    if (loginForm.ShowDialog() != DialogResult.OK)
        return;

Application.Run(new ChildForm1()); 
```

并`ChildFrom2`从`ChildForm1`表格中显示：

```
Hide(); // you really don't need to hide main form

using(var childForm2 = new ChildForm2())
{
    if (childForm2.ShowDialog() == DialogResult.OK)
    {
        // update ChildForm1 with data from ChildForm2
    }    
}

Show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T17:32:55.177

**你可以使用这个：**

在关闭前的第二个孩子表格中：

```
childForm1.refresh() 
```

在第一个孩子形式：

```
public static void refresh() //You can use it with parameters too
{
  //do something
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T14:53:17.440

好的，我终于解决了这个问题，并发布了解决方案，希望有一天它可以帮助有类似问题的人。

实际的解决方案真的很简单，这就是需要做的。

将此行添加到子表单中，在第二表单的受保护部分中的某个位置，而不是在方法内部，以便它始终存在。

```
cpanel child = new cpanel(); 
```

第二种形式的关闭按钮方法内部需要是这样的。

```
private void button3_Click(object sender, EventArgs e)
        {
            child.Show();
            this.Hide(); //hide parent
        } 
```

这将使您在更新内容后单击 2nd Form 的 Close 按钮​​时获得更新的 1st Form。

# javascript - 为什么 DOMWindow 类型的 null 和 undefined？

> ID：14218670
> 
> 赞同：10
> 
> 时间：2013-01-08T15:42:29.873
> 
> 标签：javascript, phantomjs

当您在浏览器或 Node.js 中运行以下代码时，您会得到注释中列出的预期结果：

```
Object.prototype.toString.call(undefined); // "[object Undefined]"
Object.prototype.toString.call(null); // "[object Null]" 
```

但是，当您在 PhantomJS 中运行该代码时，`[object DOMWindow]`两种情况都会输出。

这看起来很奇怪，因为`undefined`和`null`都是原生类型。该`typeof`操作符似乎像在其他环境中一样工作（包括`typeof null === "object"`怪癖），因此看起来 PhantomJS 至少具有未定义类型的概念：

```
typeof undefined; // "undefined" 
```

它还声称`Object.prototype.toString`包含本机代码，这可能表明 Phantom 本身没有做任何修改实现（我不知道是否是这种情况 - 我无法在源代码中找到任何有用的东西):

```
Object.prototype.toString.toString(); // "function toString() { [native code] }" 
```

那么为什么 PhantomJS 不使用（或至少公开）正确的`[[Class]]`属性值`null`and `undefined`，有没有办法改变它？我知道我可以使用不同的方法来确定类型，但我宁愿不必这样做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T02:16:26.037

这是两件事的结合。脚本在网页中执行，因此全局对象就是`window`对象，如下所示：

```
console.log(this.toString()); // [object DOMWindow] 
```

此外，该版本的 JavaScript 实现存在一个问题，它在上述情况下伪造了对象原型链。

这可能会在未来的某个版本中得到修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T02:33:46.547

我承认我有点到达这里，但[MDN 文章`Object.toString()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/toString)提到：

> 从 JavaScript 1.8.5 开始，在 null 上调用的 toString() 返回 [object Null]，undefined 返回 [object Undefined]，如 ECMAScript 第 5 版和后续勘误表中所定义。请参阅[使用 toString 检测对象类型](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/toString#Using_toString_to_detect_object_type)。

然后，链接部分描述了`Object.prototype.toString(null)`您正在使用的构造。因此，它似乎能够明智地进行字符串化`null`，并且`undefined`是 PhantomJS 引擎（Apple 的 JavaScriptCore，谁知道哪个版本）尚未实现的对 Javascript 的新（-ish）添加/更正。也就是说，这在 Safari 6 中可以正常工作，因此可能值得将其报告为错误，要求符合 ES5。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-09T02:56:38.383

如果只是这两种类型，我认为你可以用这个来解决你的问题。

```
Object.prototype.toString = function(obj){

    if(typeof(obj) == "undefined"){
        return "[object Undefined]";
    }

    if(typeof(obj) == "null"){
        return "[object Null]";
    }

    return obj.toString();

} 
```

# jquery - 使用 jquery 从外部域检索 jsonp 数据

> ID：14218671
> 
> 赞同：0
> 
> 时间：2013-01-08T15:42:34.193
> 
> 标签：jquery, ajax, json, jsonp

我使用我在互联网上获得的示例代码，jquery 部分是：

```
$.ajax({
     url: punctis_content_url + "?url=" + encodeURIComponent(document.URL),
     dataType: 'jsonp',
     success:function(json){
         alert(json);
     },
     error:function(){
         alert("Error");
     }
     }); 
```

远程服务器上的php是：

```
 $arr = array('URL' => $trackUrl, 'param2' => "element2");
    echo($_GET['callback']."(".json_encode($arr).");"); 
```

这工作正常，我从 jquery 得到警报，如果我直接调用我得到的服务器脚本：`jsonp1357658534513({"URL":"http:\/\/infoabout.me\/punctis\/punctis.php","param2":"element2"});`

问题是，回调代码是如何生成的？它是什么意思？以及如何从该 json 中检索数据（URL 和 param2），因为仅使用 json.URL 不起作用。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:08:56.883

`json`在这种情况下是一个 javascript 对象。只需从其属性中提取数据。

```
alert(json.URL) // $trackUrl value
alert(json.param2) // element2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:22:18.837

jsonp 是通过包装由 javascript 函数调用生成的 json 字符串创建的，PHP 示例如下：

```
$callbackFunction = $_GET['callback'];
echo $callbackFunction . "(" . json_encode($object) . ")"; 
```

现在，一旦检索到 jsonp，就会调用该函数，该函数可以使用 jQuery、dojo 或其他 js 框架等自动连接，或者硬编码，例如，您可以编写以下函数，它将在你的具体情况。祝你好运！

```
function jsonp1357658534513(string){
    console.log(string);
} 
```

# python - 从网络检索响应并使用 Python 打印

> ID：14218672
> 
> 赞同：2
> 
> 时间：2013-01-08T15:42:34.957
> 
> 标签：python, tornado

我有个问题。我用 Python（Tornado Web 服务器）编写了这部分代码：

```
if command == 'RESTARTNWK':
        op_group = "A3"
        op_code = "E0"
        netid = hextransform(int(nid), 16)
        packet_meta = "*%s;%s;%s;#"
        pkt_len = hextransform(0, 2)

        packet = packet_meta % (op_group, op_code, pkt_len)
        packet = packet.upper()

        op_group_hex=0xA3
        op_code_hex=0xE0

        cmdjson = packet2json(op_group_hex,op_code_hex, packet)

    mynet_type="ztc"

    print("\t\t " + packet + "\n")

    #TODO : -write command into db  
    ts = datetime.datetime.now().isoformat()
    mynet_type ="ztc" 
    self.lock_tables("write", ['confcommands'])
self.db.execute("INSERT INTO confcommands (network_id, ntype, timestamp, command) \
                              VALUES (%s,%s,%s,%s)", nid, mynet_type, ts, cmdjson)
    self.unlock_tables();

    # TODO: - open the /tmp/iztc file in append mode
    cmdfile = open('/tmp/iztc', 'a')
    #       - acquire a lock  "only for the DB case, it's easier"
    #       - write the packet 
    cmdfile.write(netid + "\t"+ mynet_type + "\t"+ ts + "\t"+  cmdjson +"\n");
    #       - release the lock "only for the DB case, it's easier"
    #       - close the file
    cmdfile.close()

    if command == 'RESTARTNWK':
        opcodegroupr = "A4"
        opcoder = "E0"

    #Code for retrieving the MAC address of the node
    como_url = "".join(['http://', options.como_address, ':', options.como_port,
                        '/', ztc_config, '?netid=', netid,
                        '&opcode_group=', opcodegroupr, 
                        '&opcode=', opcoder, '&start=-5m&end=-1s'])
    http_client = AsyncHTTPClient()
    response = yield tornado.gen.Task(http_client.fetch, como_url)

    ret = {}
    if response.error:
        ret['error'] = 'Error while retrieving unregistered sensors'
    else:
        for line in response.body.split("\n"):
            if line != "": 
                value = int(line.split(" ")[6])

    ret['response'] = value
    self.write(tornado.escape.json_encode(ret))
    self.finish() 
```

在这段代码中，我收到了用户的重启网络命令。经过一些设置后，我将相关命令写入名为 confcommands 的 db 表中。服务器将读取此命令并将重新启动信号发送到指定的网络。

在此之后，如果一切正常，网络会重新向我发送回复。我通过对我的服务器 (como) 的 http 请求读取了此响应，并等待异步响应。

响应是由网络写入的，我必须在数据包中找到它。价值反应是第六个要素。数据包的其他信息是操作组和操作码、响应的网络以及其他信息。

然后我为用户编写响应。

我不知道这段代码是否正确......可以这样吗？结构在我看来是正确的......

谢谢大家的任何建议！

# c# - Bound ItemsControl 在显示前未更新

> ID：14218673
> 
> 赞同：0
> 
> 时间：2013-01-08T15:42:39.770
> 
> 标签：c#, wpf, data-binding

我有一个`UserControl`由几个 bound`ItemsControl`和 组成的`strings`，并且根据按下的按钮，显示不同的数据。`Button`以下是的点击事件之一的示例：

```
private void LeftPreviousScoresButton_Click(object sender, RoutedEventArgs e)
{
    if (m_previousScoresWindow.Visibility == Visibility.Visible)
    {
        m_previousScoresWindow.Hide();
    }
    else
    {
        WindowTitle = "Left Side";
        PreviousScoresA = m_previousLeftWristErosionScoresReaderA;
        PreviousScoresB = m_previousLeftWristErosionScoresReaderB;

        m_previousScoresWindow.Show();
    }
} 
```

有几个这样的点击事件监听器分配`WindowTitle`, `PreviousScoresA`, 和`PreviousScoresB`相关的数据。然后`UserControl`像这样绑定到它们：

```
<ItemsControl Height="Auto" Width="Auto"
              ItemsSource="{Binding ElementName=ParentForm, Path=PreviousScoresA}" 
              Grid.Row="1" />

<ItemsControl Height="Auto" Width="Auto"
              ItemsSource="{Binding ElementName=ParentForm, Path=PreviousScoresB}" 
              Grid.Row="2" />

<TextBlock FontSize="16" FontWeight="Bold" Height="25" 
           Margin="5" HorizontalAlignment="Center" Foreground="Black" 
           Text="{Binding ElementName=ParentForm, Path=PreviousScoresWindowTitle}" /> 
```

但是，当打开窗口时，旧数据会显示一秒钟，然后再用当前数据更新。我什至尝试在调用时添加这些调用`Hide()`，`Window`但似乎没有帮助：

```
WindowTitle = String.Empty;
PreviousScoresA = new ObservableCollection<PreviousScoreData>();
PreviousScoresB = new ObservableCollection<PreviousScoreData>(); 
```

有什么方法可以确保`Show()`在绑定数据更新之前不会调用它？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:16:31.750

看起来您正在使用`ObservableCollection`，永远不应该重新初始化集合。相反，它应该被清除然后添加新值；这有助于在使用`ObservableCollection`.

根据您的代码示例，这有点像在黑暗中拍摄；如果您在隐藏时清除集合，然后用新值重新填充它们，那么您应该获得所需的效果：

```
private void LeftPreviousScoresButton_Click(object sender, RoutedEventArgs e)
{
  if (m_previousScoresWindow.Visibility == Visibility.Visible)
  {
    m_previousScoresWindow.Hide();
    WindowTitle = string.Empty;
    PreviousScoresA.Clear();
    PreviousScoresB.Clear();
  }
  else
  {
    WindowTitle = "Left Side";

    // do not re-initialize the collection; clear and add new values
    // PreviousScoresA = m_previousLeftWristErosionScoresReaderA;
    // PreviousScoresB = m_previousLeftWristErosionScoresReaderB;
    ReFillScores(PreviousScoresA, m_previousLeftWristErosionScoresReaderA);
    ReFillScores(PreviousScoresB, m_previousLeftWristErosionScoresReaderB);

    m_previousScoresWindow.Show();
  }
}

private void ReFillScores (ObservableCollection<PreviousScoreData> collection, IEnumerable<PreviousScoreData> values)
{
  collection.Clear();
  foreach(PreviousScoreData d in values)
  {
    collection.Add(d);
  }
} 
```

# php - 带暂停的 MYSQL 选择

> ID：14218675
> 
> 赞同：1
> 
> 时间：2013-01-08T15:42:45.963
> 
> 标签：php, mysql

我们正在制作一个完美运行的 php 电子邮件。

从数据库中选择所有用户并向他们发送电子邮件是不错的选择。

但是，由于有大量的电子邮件需要发送，我们希望开始和暂停带有 [1000] 的电子邮件事务，以免服务器过载。

> 例子：
> 
> 选择：1000；
> 
> 暂停 MYSQL
> 
> 选择另外 1000 个；
> 
> 暂停 MYSQL
> 
> 等等。

我阅读了有关 START TRANSACTION、COMMIT 和 ROLLBACK 功能的信息，我认为我实现了这一点。

有人可以帮我在 ROLLBACK 交易之前暂停 100 秒吗？

我不知道该怎么办..

到目前为止我得到了什么[前缀代码]..

> $最大=1000；
> 
> $发送=0；
> 
> $回滚=假；
> 
> mysql_query('开始交易;');
> 
> $query = mysql_query("SELECT DISTINCT mail_id, customers_email_address newsletters WHERE ORDER BY mail_id ASC");
> 
> 而($result=mysql_fetch_array($query){
> 
> > 如果（$回滚==真）{
> > 
> > > > $回滚=假；
> > > > 
> > > > mysql_query("回滚；");
> > 
> > }
> > 
> > [-----发送电子邮件的脚本-----]
> > 
> > $发送++；
> > 
> > 如果（ $max == $send ）{
> > 
> > > > mysql_query("提交；");
> > > > 
> > > > $回滚=真；
> > 
> > }
> 
> }

干杯杰伊

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T15:46:17.107

这里根本不需要交易——你没有更新任何东西。事实上，交易的开销在这里完全没有意义，所以我建议你把它拿出来。

你可以简单地（理论上，你可以为此编写代码）

*   从数据库中选择前 1000 行：`SELECT ... LIMIT 0, 1000`
*   将您的偏移量增加 1000
*   选择接下来的 1000 行：`SELECT ... LIMIT 1000, 1000`
*   冲洗并重复，直到从查询中返回少于 1000 行。

请注意，为了使该方法起作用，您需要按 ASC 顺序或其他方式按主键排序，以确保您不会两次获得同一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T15:45:33.890

您只需要使用 cron 来安排您的发件人脚本并发送一些电子邮件。（在 sql 中使用 LIMIT）。

它每 M 分钟会发送超过 N 封电子邮件，服务器会很高兴；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T15:55:43.880

很少有如下选项：

1）您可以实现 Cronjob。

2) 有一个php的开源小应用程序[PHPList](http://www.phplist.com/)，可以在几秒钟内集成。（我已经用过这个了，所以）

3）第3个选项，你可以使用php的[sleep功能](http://php.net/sleep)。（我不确定）

# windows-phone-7 - 电话 webbrowser.navigate 没有导航到 url

> ID：14218690
> 
> 赞同：1
> 
> 时间：2013-01-08T15:43:12.977
> 
> 标签：windows-phone-7

我正在编写我的第一个 Windows Phone 教程。我已经下载了 sdk 和更新。我正在按照下面的教程进行操作。

[教程](http://blogs.msdn.com/b/vbteam/archive/2011/02/23/how-to-create-a-mini-browser-application-for-windows-phone-7.aspx)

当我编译并单击调试时，模拟器启动并且 UI 正确显示。问题是当我点击“开始”按钮时，什么也没有发生。该应用程序应显示上面文本框中的 url。

有谁知道为什么，对不起，如果很明显，但我今天已经开始从android背景学习这个。

```
Partial Public Class MainPage
    Inherits PhoneApplicationPage

    ' Constructor
    Public Sub New()
        InitializeComponent()
    End Sub

    Private Sub url_TextChanged(sender As System.Object, e As System.Windows.Controls.TextChangedEventArgs) Handles url.TextChanged

    End Sub

    Private Sub Go_Click(ByVal sender As Object, ByVal e As RoutedEventArgs)

        Dim site As String

        site = URL.Text

        MiniBrowser.Navigate(New Uri(site, UriKind.Absolute))

    End Sub
End Class 
```

.

```
<phone:PhoneApplicationPage 
    x:Class="MiniBrowser.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d" d:DesignWidth="480" d:DesignHeight="768"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    SupportedOrientations="PortraitOrLandscape" Orientation="Portrait"
    shell:SystemTray.IsVisible="True">

    <!--LayoutRoot is the root grid where all page content is placed-->
    <Grid x:Name="LayoutRoot" Background="Transparent">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!--TitlePanel contains the name of the application and page title-->
        <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
            <TextBlock x:Name="ApplicationTitle" Text="MY FIRST APPLICATION" Style="{StaticResource PhoneTextNormalStyle}"/>
            <TextBlock x:Name="PageTitle" Text="Mini Browser" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}"/>
        </StackPanel>

        <!--ContentPanel - place additional content here-->
        <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
            <TextBox x:Name="URL" Margin="0,0,120,0" Text="http://www.xbox.com" VerticalAlignment="Top"/>
            <Button x:Name="Go" Content="Go" VerticalAlignment="Top" HorizontalAlignment="Right"/>
            <phone:WebBrowser x:Name="MiniBrowser" Margin="0,84,0,0"/>
        </Grid>
    </Grid>

    <!--Sample code showing usage of ApplicationBar-->
    <!--<phone:PhoneApplicationPage.ApplicationBar>
        <shell:ApplicationBar IsVisible="True" IsMenuEnabled="True">
            <shell:ApplicationBarIconButton IconUri="/Images/appbar_button1.png" Text="Button 1"/>
            <shell:ApplicationBarIconButton IconUri="/Images/appbar_button2.png" Text="Button 2"/>
            <shell:ApplicationBar.MenuItems>
                <shell:ApplicationBarMenuItem Text="MenuItem 1"/>
                <shell:ApplicationBarMenuItem Text="MenuItem 2"/>
            </shell:ApplicationBar.MenuItems>
        </shell:ApplicationBar>
    </phone:PhoneApplicationPage.ApplicationBar>-->

</phone:PhoneApplicationPage> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:06:51.413

哦，非常基本的错误:(

您忘记为 Button 分配 Click 事件处理程序

```
<Button x:Name="Go" Content="Go" Click="Go_Click" VerticalAlignment="Top" HorizontalAlignment="Right"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T13:04:57.380

尽管我有带有 GO 按钮的事件，但我没有看到任何事情发生，下面是代码

## XAML

```
 <Button x:Name="Go" Content="Go" HorizontalAlignment="Right" Margin="346,10,0,0" VerticalAlignment="Top" Click="Go_Click"/> 
```

## CS

私人无效Go_Click（对象发送者，RoutedEventArgs e）

```
 {
        //string site = URL.Text;
        //MiniBrowser.Navigate(new Uri(site, UriKind.Absolute));
        string site = URL.Text;
        if (String.IsNullOrEmpty(site)) return;
        if (!site.StartsWith("http://") && !site.StartsWith("https://"))
            site = "http://" + site;
        MiniBrowser.Navigate(new Uri(site, UriKind.RelativeOrAbsolute));
    } 
```

# android - 在网站和移动应用程序上使用 Google 帐户进行 SSO

> ID：14218694
> 
> 赞同：3
> 
> 时间：2013-01-08T15:43:32.920
> 
> 标签：android, authentication, single-sign-on, google-oauth

我想为我的应用程序的用户使用 SSO（单点登录），但我不明白如何将它应用到我的案例中。

总而言之，我们有：

*   一个数据库
*   一个网站
*   iPhone 应用程序/Android 应用程序

目前，可以在网站上创建一个帐户，然后使用相同的凭据从移动应用程序进行连接。移动应用程序和服务器之间的所有通信都通过 http 请求进行。

简单来说，我会首先

*   能够使用 Google 帐户对用户进行身份验证
*   为 Android 用户提供选择与其智能手机关联的 Google 帐户之一

我找到了几个信息来源：

*   [Google - 使用 OAuth 2.0 登录](https://developers.google.com/accounts/docs/OAuth2Login)
*   [Android - 记住用户](http://developer.android.com/training/id-auth/index.html)

与我在某些示例中看到的不同，我不需要向 Google 服务（如 Google Calendar 或 Tasks）发出请求，我只想对用户进行身份验证。

有人可以告诉我我需要在网站和移动应用程序上做什么。我应该将信息存储在我的数据库中吗？如何确保经过身份验证后，来自移动应用程序的所有 http 请求都来自经过身份验证的用户？

不要犹豫，请我澄清一些观点。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T19:21:38.163

由于 OAuth 是**授权**标准而不是**身份验证**标准，因此它不支持任何直接方法。但是，大多数提供程序允许您调用返回登录用户*ID的端点。*Google 将*id*作为*基本配置文件信息*的一部分返回。这一步在[第一篇文章中有描述](https://developers.google.com/accounts/docs/OAuth2Login)您已经提到有多个库可以为您简化此步骤。

因此，为了识别用户，您需要获取他的*Google 用户 ID*并将其存储/匹配到您的数据库中。

要在 Android 设备上获取用户的*id*，还有一种更简单的方法。只需按照[其文档](https://developer.android.com/google/play-services/auth.html)中的说明使用 Google Play 服务。您可以在文档最后一部分的调用响应中找到*用户 ID 。*

现在仍然存在问题，您必须将*用户 ID*从设备发送到您的 Web 服务器并验证此调用是否由您的应用程序发出。幸运的是，谷歌还为这种场景在谷歌播放服务中构建了一个方法。Android 开发者博客上[的 Tim Bray](http://android-developers.blogspot.de/2013/01/verifying-back-end-calls-from-android.html)有一篇关于此的博文。

# sql - ORA-00972: 标识符太长

> ID：14218695
> 
> 赞同：2
> 
> 时间：2013-01-08T15:43:35.370
> 
> 标签：sql, oracle, oracle11g, alias

我有一个在 Visual Studio 的查询工具中执行的查询，我收到以下错误。

ORA-00972: 标识符太长。

现在我相信我知道 oracle 有 30 字节的限制，但这是我要执行的查询。

```
 select 
          "cef_tsroma.tsrido" as "truck", 
          "cef_tsroma.dosvlg" as "rideNumber",
          "cef_v_cw_shipment.shipmentNumber" as "shipmentNumber"
   from 
          "cef_tsroma" left outer join "cef_v_cw_shipment" on "rideNumber" = "shipmentNumber"
   where 
          "truck" = '104490' 
```

不幸的是，我将无法更改数据库结构本身，因为它由另一家对数据库规范化一无所知的公司管理，或者处于他们根本不能或不应该的情况。我不知道。请注意“cef_v_cw_shipment”是一个视图。

Truck = '104490' 只是一个用于测试目的的样本整数。我尝试了各种解决方案，但正确的方法（或寻找正确的方法）似乎让我望而却步。

真诚的，我。

PS对不起，如果这是一个愚蠢的问题。

编辑：

```
select 
      "cef_tsroma"."tsrido" as "truck", 
      "cef_tsroma"."dosvlg" as "rideNumber",
      "cef_v_cw_shipment"."shipmentNumber" as "shipmentNumber"
from 
      "cef_tsroma" left outer join "cef_v_cw_shipment" on "rideNumber" = "shipmentNumber"
 where 
      "truck" = '104490' 
```

“rideNumber”现在是一个无效的标识符，我很快就会回到这个。我想我以错误的方式别名，但我不确定。Goign 找出答案。

编辑2：

```
 select 
  ct.tsrido as "truck", 
  ct.dosvlg as "rideNumber",
  cs.shipmentNumber as "shipmentNumber"
  from  "cef_tsroma" ct
  left outer join "cef_v_cw_shipment" cs
  on "rideNumber" = "shipmentNumber"
  where  "truck" = '104490' 
```

我现在使用这种语法，因为它比以前的语法更简洁、更容易理解。但是我仍然遇到 ORA-00904：“rideNumber”：无效标识符（这可能在连接行中也算作 shippingNumber。试图弄清楚这一点，谷歌返回命名提示：没有成功。仍在搜索。

编辑3：

```
 select
            ct.tsrido as truck, 
            ct.dosvlg as rideNumber,
            cs.shipmentNumber as shipment
    from
            "cef_tsroma" ct
    left outer join 
            "cef_v_cw_shipment" cs 
    on 
            ct.dosvlg = cs.shipmentNumber
    where  
            truck = '104490' 
```

现在遵循建议，这是当前的语法。它当前返回错误消息：

错误 ORA-00904: "CS"."SHIPMENTNUMBER": 标识符无效

对不起，我没有设计这个数据库>）：

编辑4/解决方案？

奇怪的是，这似乎有效。

```
 select ct."tsrido", ct."dosvlg", cs."shipmentNumber" as shipmentnumber
    from "cef_tsroma" ct 
    left outer join "cef_v_cw_shipment" cs 
    on ct."dosvlg" = cs."shipmentNumber" 
    where ct."tsrido" = '104956'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T15:46:16.133

您正在用双引号将整个 table.column 包裹起来。

```
select 
          "cef_tsroma"."tsrido" as "truck", 
          "cef_tsroma"."dosvlg" as "rideNumber",
          "cef_v_cw_shipment"."shipmentNumber" as "shipmentNumber"
from 
          "cef_tsroma" left outer join "cef_v_cw_shipment" on "rideNumber" = "shipmentNumber"
where 
          "truck" = '104490' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T15:46:41.533

引号是错误的。“cef_tsroma.tsrido”应该是“cef_tsroma”。“tsrido”...

在 edit2 上：新名称（别名）在`WHERE`or`JOIN`子句中无效。举个例子，表的列`X`可以`DUAL`重命名，但必须在`WHERE`子句中使用旧名称：

```
SELECT dummy AS "myNewName" FROM dual WHERE "myNewName" = 'X';
-- ORA-00904: "myNewName": invalid identifier

SELECT dummy AS "myNewName" FROM dual WHERE dummy = 'X';
-- X 
```

在edit3：您的表名和列名看起来像普通的Oracle 名称，不区分大小写。所以你可以删除所有的双引号：

```
select ct.tsrido         as truck,
       ct.dosvlg         as ridenumber,
       cs.shipmentNumber as shipmentnumber
  from cef_tsroma              ct 
  left join cef_v_cw_shipment  cs on ct.dosvlg = cs.shipmentnumber
 where ct.truck = '104490'; 
```

更详细地解释：Oracle 表名和列名通常不区分大小写。Oracle 以大写形式存储它们，但您可以在查询中使用它们小写、大写或任意组合。

如果用双引号将表或列名括起来，这会突然改变。然后甲骨文坚持确切的拼写。

因此，在您的情况下，表/视图`"cef_tsroma"`不存在，但是`cef_tsroma`or `CEF_TSROMA`or`"CEF_TSROMA"`确实...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T15:47:33.937

您是否尝试过在表上使用别名：

```
 select ct.tsrido as truck, 
      ct.dosvlg as rideNumber,
      cs.shipmentNumber as shipmentNumber
 from  cef_tsroma ct
 left outer join cef_v_cw_shipment cs
    on ct.dosvlg = cs.shipmentNumber
  where ct.tsrido = '104490' 
```

# php - 有没有办法解析 print_r 的输出

> ID：14218698
> 
> 赞同：3
> 
> 时间：2013-01-08T15:43:42.330
> 
> 标签：php, arrays, string, parsing

> **可能重复：**
> [创建使用 print_r 打印的数组](https://stackoverflow.com/questions/7025909/create-array-printed-with-print-r)

如何从使用print_r[打印的数组的输出创建数组？](https://stackoverflow.com/questions/7025909/create-array-printed-with-print-r) 这也有一个很好的代码示例来解决这个问题

我需要反转作为输出的错误日志`print_r($data,true)`。
示例数据如下所示：

```
Array
(
    [subject] => this is the subject
    [body] => <p>Dear user,</p><p>this is the body of the email</p>
    [from_id] => 0
    [from_email] => admin@karakas.org
    [to] => Array
        (
            [0] => Array
                (
                    [id] => 0
                    [email] => 64909
                )

        )

    [send_to_inbox] => 1
) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T15:51:14.520

在 PHP 手册`print_r_reverse()`中，注释中有一个函数：http: [//php.net/manual/en/function.print-r.php](http://php.net/manual/en/function.print-r.php)

但是`var_export()`，如果您的日志是使用`var_export()`. 这样，您只需要`eval()`检索导出的数组。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T15:59:53.953

的输出`print_r()`不是为解析而设计的；它旨在供开发人员阅读以进行调试。您不应该尝试解析它。

如果您真的必须解析这种性质的 PHP 数据转储，那么该[`var_export()`](http://php.net/manual/en/function.var-export.php)函数就是为这种事情而设计的。但是，我也不建议对此进行解析——它仍然不太可能是您的最佳解决方案。

如果您打算存储数组结构的字符串表示形式，然后再对其进行解析，则最好使用`serialize()`/`unserialize()`函数或`json_encode()`/`json_decode()`函数。

这两者都将为您提供更可靠且易于解析的数据转储格式。在这两者中，我`json_encode()`每次都会推荐，因为它不仅易于使用，而且还支持其他语言，易于手动阅读，而且结构紧凑。

简而言之，不要解析`print_r()`输出；使用`json_encode()`/`json_decode()`代替。

[http://uk1.php.net/manual/en/function.json-encode.php](http://uk1.php.net/manual/en/function.json-encode.php)

# heroku - Heroku推送被拒绝

> ID：14218704
> 
> 赞同：2
> 
> 时间：2013-01-08T15:44:00.537
> 
> 标签：heroku, sinatra, bundler

```
-----> 检测到 Ruby/Rack 应用程序
-----> 使用 Ruby 版本：ruby-1.9.3
-----> 使用 Bundler 版本 1.3.0.pre.2 安装依赖项
       运行： bundle install --without development:test --path vendor/bundle --binstubs bin/
       从 http://rubygems.org/ 获取 gem 元数据......
       从 http://rubygems.org/.. 获取 gem 元数据
^[[C^[[D^[[D/app/slug-compiler/lib/utils.rb:66:in `block (2 levels) in spawn': command='/app/slug-compiler/lib/ ../../tmp/buildpacks/ruby/bin/compile /tmp/build_22uiq5k0q45sp /app/tmp/repo.git/.cache' exit_status=0 out='' at=timeout elapsed=900.1076555252075 (Utils::TimeoutError)
    来自 /app/slug-compiler/lib/utils.rb:52:in `loop'
    来自 /app/slug-compiler/lib/utils.rb:52:in `block in spawn'
    来自 /app/slug-compiler/lib/utils.rb:47:in `popen'
    来自 /app/slug-compiler/lib/utils.rb:47:in `spawn'
    来自 /app/slug-compiler/lib/buildpack.rb:37:in `block in compile'
    来自 /app/slug-compiler/lib/buildpack.rb:35:in `fork'
    来自 /app/slug-compiler/lib/buildpack.rb:35:in `compile'
    来自 /app/slug-compiler/lib/slug.rb:497:in `block in run_buildpack'
    来自 /app/slug-compiler/lib/utils.rb:121:in `log'
    来自 /app/slug-compiler/lib/slug.rb:748:in `log'
    来自 /app/slug-compiler/lib/slug.rb:496:in `run_buildpack'
    来自 /app/slug-compiler/lib/slug.rb:125:in `block (2 levels) in compile'
    来自 /app/slug-compiler/lib/utils.rb:102:in `block in timeout'
    来自 /usr/local/lib/ruby/1.9.1/timeout.rb:58:in `timeout'
    来自 /app/slug-compiler/lib/utils.rb:102:in `rescue in timeout'
    来自 /app/slug-compiler/lib/utils.rb:97:in `timeout'
    来自 /app/slug-compiler/lib/slug.rb:114:in `block in compile'
    来自 /app/slug-compiler/lib/utils.rb:121:in `log'
    来自 /app/slug-compiler/lib/slug.rb:748:in `log'
    来自 /app/slug-compiler/lib/slug.rb:113:in `compile'
    来自 /app/slug-compiler/bin/slugc:85:in `block in '
    来自 /app/slug-compiler/lib/slug.rb:505:in `block in lock'
    来自 /app/slug-compiler/lib/repo_lock.rb:44:in `call'
    来自 /app/slug-compiler/lib/repo_lock.rb:44:in `run'
    来自 /app/slug-compiler/lib/slug.rb:505:in `lock'
    来自 /app/slug-compiler/bin/slugc:66:in `'
 ！Heroku 推送被拒绝，无法编译 Ruby/rack 应用程序

```

这是我的 Gemfile：

```
来源：rubygems
红宝石'1.9.3'
宝石'sinatra'，'1.3.3'
宝石'sinatra-contrib'，'1.3.2'
宝石'薄'，'1.5.0'
宝石'haml'，'3.1.6'
宝石'bcrypt-ruby'，'3.0.1'
宝石'mongo'，'1.8.0'
宝石'bson_ext'，'1.8.0'
宝石'mongoid'，'3.0.16'
宝石'sinatra-flash'，'0.3.0'
宝石'braintree'，'2.22.0'
宝石'faye'，'0.8.6'
#gem '小马'

```

当我改变时错误消失了

```
gem 'braintree', '2.22.0' 
```

至

```
gem 'braintree' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-29T16:21:13.010

**更新**：这个答案不起作用。唯一的选择是提出支持票。

有一个新功能可以解决这个问题：

```
$ heroku config:set COMPILE_TIMEOUT=n 
```

其中 n 是以秒为单位的数字。我使用了 n=3000（默认为 900）。

（注意：您可能需要启用[user-env-compile](https://devcenter.heroku.com/articles/labs-user-env-compile)才能使用此功能）

**更新：**请阅读有关此答案的评论以获取更新信息！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-15T13:08:26.833

对我来说，我找到的解决方案是：

*   推送我的依赖的前半部分（requirements.txt 文件的一半）
*   推送所有的 requirements.txt 文件（包括 opencv 依赖项），这个工作是因为 heroku 保留了前半部分的缓存，所以第二次安装会更快

# c# - 无法向远程 MSMQ 发送消息

> ID：14218708
> 
> 赞同：1
> 
> 时间：2013-01-08T15:44:07.923
> 
> 标签：c#, msmq

**我的 DEV 服务器**是安装了 MSMQ 的 Windows 2008 R2。**我的本地开发机器**是Windows XP，也安装了MSMQ。显然它们是 2 个不同的 MSMQ 版本。

在我的代码中，我有类似的东西

```
 MessageQueue queue = new MessageQueue(@"formatname:DIRECT=OS:MyDevServer\Private$\MyQueue", QueueAccessMode.Send);
        Message message = new Message(value, new BinaryMessageFormatter());
        queue.Send(message, MessageQueueTransactionType.Single);
        queue.Close();
        return message.Id; 
```

发送消息。我的目的是让消息出现在我的 DEV 服务器的私有队列中。

我在 DEV 服务器上创建了这个队列，权限为

*   每个人 - 获取权限，发送消息
*   我的域帐户来创建队列 - 我可以做任何事情
*   MyDevServer$ - 获取属性、获取权限、发送消息
*   匿名登录 - 发送消息

我可以毫无例外地在本地运行代码，也可以获取消息Id。在我本地的 Windows XP 的 MSMQ 上，我可以看到我有`Outgoing Queue`-> `DIRECT=OS:MyDevServer\Private$\MyQueue`-> `Queue Messages`。新消息出现在此队列中。过了一会儿，消息消失了。但是我在我的开发服务器队列中的任何地方都看不到它。

**更新：**我发现 SO 发布“ [Win2008 R2 上的 MSMQ 不会收到来自旧客户端的消息](https://stackoverflow.com/questions/2371905/msmq-on-win2008-r2-won-t-receive-messages-from-older-clients)”这解决了我的问题，上面的代码是正确的，但是目标主机阻塞了流量。

# google-app-engine - 在 GAE GO 基础模板中将 html 模板合二为一，这样结构就只有一个通用的 html/css 结构

> ID：14218711
> 
> 赞同：2
> 
> 时间：2013-01-08T15:44:13.167
> 
> 标签：google-app-engine, parsing, templates, go

在这个例子中，我有一个 main.html 模板

```
<!DOCTYPE html>
<html>
<head>
  <title>Backend</title>
  <style>
    html, body {height:100%}
  </style>
</head>
<body>
  <table border="1" width="100%" height="100%">
    <tr>
      <td colspan="2" class="td-header">
        <h1>Google GO</h1>
      </td>
    </tr>
    <tr>
      <td class="td-right-content">
       {{<parsed template from children>}}
      </td>
    </tr>
    <tr>
      <td colspan="2" class="td-header">
        <h1>Footer</h1>
      </td>
    </tr>
  </table>
</body>
</html> 
```

子部分将填充

{{}}

和

```
<table>   
  <tr>
    <th>
      Name
    </th>
    <th>
      Description
    </th>
    <th>
    </th>
  </tr>
  {{range .}}
    <tr>
      <td>
        {{.Name}}
      </td>
      <td>
        {{.Description}}
      </td>
      <td>
        <a href="/admin/forms/edit/?key={{.Key.Encode}}">Edit</a>
      </td>
    </tr>
  {{end}}
</table> 
```

在子部分的代码中对其进行解析后。我这样做是为了消除多余的 html 和 css 并轻松管理设计。谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T19:13:46.603

一个`Template`对象包含一个顶级模板（这里：父模板），它可以引用在同一对象中关联的其他模板。模板具有用于参考的名称。

这可能很棘手，因为当您使用该`ParseFiles`函数创建一个新对象时，每个模板都使用文件的基本名称命名（并且似乎无法更改该名称）。如果给定的主文件有多个可能的子文件，这可能是不切实际的，因为您通常不想给它们提供相同的名称。

解决方案是将文件手动读取为字符串，然后将其添加到显式命名的模板中（IMO 有点麻烦，但你可以接受）。

```
main_temp,_ := template.ParseFiles("main.html")

cont_s,_ := ioutil.ReadFile("content1.html")

// add a new associated template to main 
cont_temp,_ := main_temp.New("content").Parse(string(cont_s))

g := Content{"Hi"}
main_temp.Execute(os.Stdout, &g) 
```

（我跳过了示例的所有错误处理）

然后您可以`{{template}}`在父页面中使用该指令：

```
{{template "content" .}} 
```

（或任何管道而不是`.`指代给的整个对象`main_temp`）

有关更多详细信息，请参阅[文本/模板文档](http://golang.org/pkg/text/template/)

# php - 我应该自动加载所有内容，以及如何在不同的目录中自动加载命名空间

> ID：14218713
> 
> 赞同：0
> 
> 时间：2013-01-08T15:44:20.587
> 
> 标签：php, symfony, autoload

假设我的应用程序有模型、视图和控制器。如何为特定命名空间自动加载多个目录？

```
require_once __DIR__.'/lib/Symfony/Component/ClassLoader/UniversalClassLoader.php';

use Symfony\Component\ClassLoader\UniversalClassLoader;

$loader = new UniversalClassLoader();
$loader->registerNamespace('Test', __DIR__ . '/lib');
$loader->register(); 
```

假设我在 /application 中也有文件（模型，控制器）我是否需要另一个测试文件夹，然后包含应用程序，模型。

像这样;

```
Root.
Application
  Test
    Model
    Application
lib
  Test
   Other folders. 
```

或者是否有可能摆脱“测试”（命名空间文件夹）？

# java - 硒测试卡住并且没有运行

> ID：14218714
> 
> 赞同：3
> 
> 时间：2013-01-08T15:44:21.917
> 
> 标签：java, selenium, testng

我正在使用 selenium 测试一个 web 应用程序，所有用 java 编写的测试在 linux (mint mate) 上运行良好，但是当我尝试在 windows 7 上启动相同的测试时，在某些时候它会停止并且不做任何事情，似乎他们卡住了。不是所有的测试，有些运行良好。

我在两台机器上都使用 IntelliJ Idea（如果重要的话）项目和完全相同的 jdk（Linux 上的 1.7.0_07 和 Windows 上的 1.7.0_09）。

我看不出正常的测试和不正常的测试之间有任何严重的区别。我只能猜测，这个问题在 TestNG 断言中，因为在调试时它会在其中的某个地方结束。也许有人以前遇到过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T09:50:35.940

问题出在 windows 和 linux 机器上的不同版本的 firefox 中，尽管我在两者上都使用了相同版本的 selenium。如果您遇到相同的问题，请先检查版本，它可以节省您的时间。

# sql-server - IF....THEN 语句在 T-SQL 中执行 UPDATE

> ID：14218715
> 
> 赞同：3
> 
> 时间：2013-01-08T15:44:23.087
> 
> 标签：sql-server, tsql

> 免责声明：我仍在学习 SQL，所以如果我的问题是业余的，或者是一个非常简单的答案，我深表歉意。我没有受过正规培训。我在自学。谢谢。

如果 EMAIL 列为空，则会创建一个特定查询以使用 EMAIL2 列中的数据更新 EMAIL 列。此查询继续从 EMAIL3-6 列中获取数据，如果任何先前的列也为空以尝试填充 EMAIL 列。它目前的位置如下：

`update Parents set email = email2 where email = ' ' OR email is null go`

`update Parents set email = email3 where email = ' ' OR email is null go`

`update Parents set email = email6 where email = ' ' OR email is null go`

（等等）

有没有更简单的方法，使用某种 IF...THEN 类型条件来检查 EMAIL 列中的空白或 null 并根据辅助列中的数据填充它？还需要检查这些列的空白或空值，如果空白或空为真，则跳过这些列。

我很感激可以给出的任何建议。上面的查询有效，只是感觉不是最好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T16:06:53.363

您想要熟悉的一个方便的函数是[NULLIF](http://msdn.microsoft.com/en-us/library/ms177562.aspx)。在您可能希望将值视为 NULL 的情况下，它允许您简化逻辑。例如，如果应用程序将标记值“NA”放入 NULLable 列`column1`中，`NULLIF(column1, 'NA')`则将返回所有 NULL 和所有 NA 的 NULL 值。在您的情况下，我们将使用此技巧将空字符串转换为 NULL。

我们要做的另一件事是修剪所有空字符串，这样我们的 NULLIF 只需要检查 '' 的场景（而不是 ''、' '、' '、ad nauseum）。TSQL 仅提供 LTRIM 和[RTRIM](http://msdn.microsoft.com/en-us/library/ms178660%28v=SQL.105%29.aspx)，我有使用的习惯，`RTRIM`尽管从任一方向修剪空字符串都会导致我们想要的状态。`NULLIF(RTRIM(column1),'')`

使用该表达式，我们现在将正确的东西插入到[COALESCE](http://msdn.microsoft.com/en-us/library/ms190349.aspx)函数中。因此

```
UPDATE
    P
SET
    email = COALESCE(NULLIF(RTRIM(P.email2), ''), NULLIF(RTRIM(P.email3), ''), NULLIF(RTRIM(P.email4), ''))
FROM
    dbo.Parents P
WHERE
    -- This will force a table scan which can be a bad thing for performance
    -- Generally, one should avoid wrapping functions around a column and instead
    -- apply them to the thing being tested
    NULLIF(RTRIM(P.email), '') IS NULL 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T15:48:24.050

你的意思是这样的吗？

```
update Parents 
      set email = COALESCE(
                    NULLIF(LTRIM(RTRIM(email2), '')),
                    NULLIF(LTRIM(RTRIM(email3), '')),
                    NULLIF(LTRIM(RTRIM(email4), '')),
                    NULLIF(LTRIM(RTRIM(email5), '')),
                    NULLIF(LTRIM(RTRIM(email6), ''))
                  ) 
where email = ' ' OR email is null 
```

这

```
LTRIM(RTRIM(email2) 
```

将确保将“”转换为空字符串“”，因为 SQL Server 没有修剪，但有两个单独的函数`LTRIM`和`RTRIM`. 如果两个表达式相等，NULLIF 返回 null。因此，如果任何电子邮件列为 null 或只是 ' '，它将返回 null。

该`COALESCE`函数将返回第一个表达式的值，即 not `null`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T17:00:57.950

不是为了让这成为关于 COALESCE 和 NULLIF 的教程，而是为了证明@billinkc 在他的答案中提供的所有内容，这就是为什么它有效。（对不起，他回答时我正在研究解决方案）。将其放入 SSMS 并查看结果。不过，如上所示的简单更新会很好。

刚刚发现 SQL Fiddle 资源： [SQL Fiddle](http://www.sqlfiddle.com/#!3/8bd7d/5/0)

```
--Setup the temp table
DECLARE @Parents TABLE (
    ParentsId INT IDENTITY (1,1) PRIMARY KEY,
    email varchar(max),
    email2 varchar(max),
    email3 varchar(max),
    email4 varchar(max),
    email5 varchar(max),
    email6 varchar(max)
)

--This would be the pull from your real Parents Table.
INSERT INTO @Parents 
SELECT
    NULL,'test@domain.com',' ',NULL,NULL,NULL
UNION ALL
SELECT
    NULL,'   ',NULL,NULL,NULL,'test2@domain.com'
UNION ALL
SELECT
    NULL,'',NULL,NULL,NULL,'test3@domain.com'

--Look at the data before we cleanse it
SELECT * FROM @Parents

--Take a look at what COALESCE looks like before the cleanse
SELECT ParentsId, COALESCE(email2,email3,email4,email5,email6) AS NewEmail FROM @Parents

--RUN the NULLIF
UPDATE @Parents SET 
    email2 = NULLIF(email2,' '),
    email3 = NULLIF(email3,' '),
    email4 = NULLIF(email4,' '),
    email5 = NULLIF(email5,' '),
    email6 = NULLIF(email6,' ')

SELECT * FROM @Parents

--Take a look at what COALESCE looks like after the cleanse
SELECT ParentsId, COALESCE(email2,email3,email4,email5,email6) AS NewEmail FROM @Parents 
```

# c++ - 在派生类中管理线程生命周期

> ID：14218720
> 
> 赞同：1
> 
> 时间：2013-01-08T15:44:59.477
> 
> 标签：c++, multithreading, boost, boost-thread

我有一个*基*类，它充当同步事件处理的多种策略的接口。我现在想要异步处理事件的策略。为了尽量减少代码重构，每个策略都有自己的内部线程用于异步事件处理。我主要关心的是如何管理这个线程的生命周期。*派生*策略类在代码库周围构建和销毁，因此很难在策略类之外管理线程生命周期（启动/停止）。

我最终得到以下代码：

```
#include <iostream>
#include <cassert>

#include <boost/shared_ptr.hpp>
#include <boost/thread.hpp>

struct Base
{
    virtual ~Base()
    {
        std::cout << "In ~Base()" << std::endl;

        // For testing purpose: spend some time in Base dtor
        boost::this_thread::sleep(boost::posix_time::milliseconds(1000));
    }

    virtual void processEvents() = 0;

    void startThread()
    {
        if(_thread)
        {
            stopThread();
        }
        _thread.reset(new boost::thread(&Base::processEvents, this));
        assert(_thread);
    }

    void stopThread()
    {
        if(_thread)
        {
            std::cout << "Interrupting and joining thread" << std::endl;
            _thread->interrupt();
            _thread->join();
            _thread.reset();
        }
    }

    boost::shared_ptr<boost::thread> _thread;
};

struct Derived : public Base
{
    Derived()
    {
        startThread();
    }

    virtual ~Derived()
    {

        std::cout << "In ~Derived()" << std::endl;

        // For testing purpose: make sure the virtual method is called while in dtor
        boost::this_thread::sleep(boost::posix_time::milliseconds(1000));

        stopThread();

    }

    virtual void processEvents()
    {
        try
        {
            // Process events in Derived specific way
            while(true)
            {
                // Emulated interruption point for testing purpose
                boost::this_thread::sleep(boost::posix_time::milliseconds(100));
                std::cout << "Processing events..." << std::endl;
            }
        }
        catch (boost::thread_interrupted& e)
        {
            std::cout << "Thread interrupted" << std::endl;
        }
    }
};

int main(int argc, char** argv)
{
    Base* b = new Derived;
    delete b;
    return 0;
} 
```

如您所见，线程被中断并加入到*Derived*类析构函数中。许多关于 Stackoverflow 的评论认为，在析构函数中加入线程是个坏主意。*但是，考虑到必须通过Derived*类的构造/销毁来管理线程生命周期的约束，我找不到更好的主意。有人有更好的提议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T22:05:08.067

在类被销毁时释放类创建的资源是一个好主意，即使其中一个资源是线程。但是，在析构函数中执行任何重要任务时，通常值得花时间全面检查其含义。

* * *

## 析构函数

一般规则是[不要在析构函数中抛出异常](http://www.parashift.com/c++-faq/dtors-shouldnt-throw.html)。如果一个`Derived`对象在从另一个异常展开的堆栈上，并`Derived::~Derived()`抛出一个异常，那么`std::terminate()`将被调用，杀死应用程序。虽然`Derived::~Derived()`没有显式抛出异常，但重要的是要考虑到它正在调用的某些函数可能会抛出，例如[`_thread->join()`](http://www.boost.org/doc/libs/1_52_0/doc/html/thread/thread_management.html#thread.thread_management.thread.join).

如果`std::terminate()`是所需的行为，则不需要更改。但是，如果`std::terminate()`不需要，则捕获`boost::thread_interrupted`并抑制它。

```
try
{
  _thread->join();
}
catch (const boost::thread_interrupted&)
{
  /* suppressed */ 
} 
```

* * *

## 遗产

看起来继承被用于代码重用和通过将异步行为隔离到`Base`层次结构内部来最小化代码重构。但是，一些样板逻辑也在`Dervied`. 由于派生自的类`Base`已经必须更改，我建议考虑聚合或[CRTP](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)以尽量减少这些类中的样板逻辑和代码量。

例如，可以引入一个辅助类型来封装线程逻辑：

```
class AsyncJob
{
public:
  typedef boost::function<void()> fn_type;

  // Start running a job asynchronously.
  template <typename Fn>
  AsyncJob(const Fn& fn)
    : thread_(&AsyncJob::run, fn_type(fn))
  {}

  // Stop the job.
  ~AsyncJob()
  {
    thread_.interrupt();

    // Join may throw, so catch and suppress.
    try { thread_.join(); }
    catch (const boost::thread_interrupted&) {}
  }

private: 

  //  into the run function so that the loop logic does not
  // need to be duplicated.
  static void run(fn_type fn)
  {
    // Continuously call the provided function until an interrupt occurs.
    try
    {
      while (true)
      {
        fn();

        // Force an interruption point into the loop, as the user provided
        // function may never call a Boost.Thread interruption point.
        boost::this_thread::interruption_point();
      }
    }
    catch (const boost::thread_interrupted&) {}
  }

  boost::thread thread_;
}; 
```

这个帮助类可以在`Derived`的构造函数中聚合和初始化。它消除了对大部分样板代码的需求，并且可以在其他地方重用：

```
struct Derived : public Base
{
    Derived()
      : job_(boost::bind(&Base::processEvents, this))
    {}

    virtual void processEvents()
    {
      // Process events in Derived specific way
    }

private:

  AsyncJob job_;
}; 
```

另一个关键点是`AsyncJob`强制 Boost.Thread[中断点](http://www.boost.org/doc/libs/1_52_0/doc/html/thread/thread_management.html#interruption_points)进入循环逻辑。作业关闭逻辑是根据中断点来实现的。因此，在迭代期间达到中断点至关重要。否则，如果用户代码从未到达中断点，则可能会陷入死锁。

* * *

## 寿命

检查是线程的生命周期必须与对象的生命周期关联，还是异步事件处理需要与对象的生命周期关联。如果是后者，那么可能值得考虑使用线程池。线程池可以对线程资源提供更精细的控制，例如施加最大限制，以及最大限度地减少浪费线程的数量，例如线程什么都不做或花费时间创建/销毁短期线程。

例如，考虑用户创建一个包含 500 个`Dervied`类的数组的情况。处理 500 个策略需要 500 个线程吗？或者 25 个线程可以处理 500 个策略？请记住，在某些系统上，线程创建/销毁可能会很昂贵，甚至操作系统可能会施加最大线程限制。

* * *

总之，检查权衡，并确定哪些行为是可以接受的。尽量减少代码重构可能很困难，特别是在更改对代码库的各个区域有影响的线程模型时。完美的解决方案很难获得，因此请确定涵盖大多数情况的解决方案。一旦明确定义了受支持的行为，就可以修改现有代码，使其在受支持的行为范围内。

# node.js - 在 Express.js 中使用会话

> ID：14218725
> 
> 赞同：37
> 
> 时间：2013-01-08T15:45:12.577
> 
> 标签：node.js, session, express

我需要帮助来理解 Web 应用程序的会话概念。我正在使用 Express 3.0 运行 Node.js 服务器。

## 我的目标是：

*   为每个登录的用户创建一个会话

*   存储此会话并将其用于验证用户是否已登录（防止两台设备同时使用同一用户）并限制对某些页面的访问（通过将会话 ID 与其他一些数据匹配）

我将使用 MemoryStore 来保存会话（似乎最简单）。如果上述目标有意义，您能否详细解释如何实现这些目标？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-01-08T22:15:09.033

Express在 github repo 中有很好的[例子。](https://github.com/visionmedia/express/tree/master/examples)其中之一处理[身份验证](https://github.com/visionmedia/express/blob/master/examples/auth/index.js)并显示如何将用户附加到`req.session`对象。这是在`app.post('/login')`路线内完成的。

要限制对某些页面的访问，请向这些路由添加一个简单的中间件

```
function restrict(req, res, next) {
  if (req.session.user) {
    next();
  } else {
    req.session.error = 'Access denied!';
    res.redirect('/login');
  }
}

app.get('/restricted', restrict, function(req, res){
  res.send('Wahoo! restricted area, click to <a href="/logout">logout</a>');
}); 
```

正如[Brandon](https://stackoverflow.com/users/1649198/brandon)已经提到的，您不应该在生产中使用 MemoryStore。[Redis](http://redis.io/)是一个不错的选择。使用[connect-redis](https://github.com/visionmedia/connect-redis)访问数据库。示例配置如下所示

```
var RedisStore = require('connect-redis')(express);

// add this to your app.configure
app.use(express.session({
  secret: "kqsdjfmlksdhfhzirzeoibrzecrbzuzefcuercazeafxzeokwdfzeijfxcerig",
  store: new RedisStore({ host: 'localhost', port: 3000, client: redis })
})); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-08T19:35:05.473

仅当您不创建多个实例（例如使用集群模块）时，才在 express 中使用 MemoryStore。如果您要跨机器进行负载平衡，您的负载平衡器将需要使用粘性/持久会话。

如果您满足这些要求，那么您需要做的就是在登录时，在验证凭据后，设置一个会话变量以指示已登录，例如：

```
req.session.loggedIn = true; 
```

如果要检查用户是否登录，只需检查该变量。

```
if (req.session.loggedIn) {
    // user is logged in.
}
else {
    // user is not logged in.
} 
```

您提到防止单个用户一次拥有多个会话。为了实现这一点，您可能需要在数据库中存储一些指示用户已登录的内容。我警告您，由于会话过时，这可能很危险。例如，如果用户登录但从未注销怎么办？如果他们关闭浏览器窗口以使会话永远消失怎么办？

Express 没有空闲会话到期的概念。我通过将所有会话与上次访问的时间戳一起存储在数据库中来实现这样的事情，然后根据时间定期清理会话数据。但是，您还需要更新您的登录列表。

# python - Converting string of numbers and letters to int/float in pandas dataframe

> ID：14218728
> 
> 赞同：6
> 
> 时间：2013-01-08T15:45:21.840
> 
> 标签：python, pandas

I feel like there has to be a quick solution to my problem, I hacked out a poorly implemented solution using multiple list comprehensions which is not ideal whatsoever. Maybe someone could help out here.

I have a set of values which are strings (e.g. 3.2B, 1.5M, 1.1T) where naturally the last character denotes million, billion, trillion. Within the set there are also NaN/'none' values which should remain untouched. I wish to convert these to floats or ints, so in the given example (3200000000, 1500000, 1100000000000)

TIA

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T15:55:00.950

You could create a function: and [`applymap`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.applymap.html#pandas.DataFrame.applymap) it to every entry in the dataframe:

```
powers = {'B': 10 ** 9, 'M': 10 ** 6, 'T': 10 ** 12}
# add some more to powers as necessary

def f(s):
    try:
        power = s[-1]
        return int(s[:-1]) * powers[power]
    except TypeError:
        return s

df.applymap(f) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-10-04T22:37:08.783

**Setup**
*Borrowing @MaxU's `pd.DataFrame`*

```
df = pd.DataFrame({'col': ['123.456', '78M', '0.5B']}) 
```

**Solution**
Replace strings with scientific notation then use `astype(float)`

```
d = dict(M='E6', B='E9', T='E12')

df.replace(d, regex=True).astype(float)

            col
0  1.234560e+02
1  7.800000e+07
2  5.000000e+08 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-10-04T22:25:58.020

Demo:

```
In [58]: df
Out[58]:
       col
0  123.456
1      78M
2     0.5B

In [59]: d = {'B': 10**9, 'M': 10**6}

In [60]: df['new'] = \
    ...: df['col'].str.extract(r'(?P<val>[\d.]+)\s*?(?P<mult>\D*)', expand=True) \
    ...:   .replace('','1') \
    ...:   .replace(d, regex=True) \
    ...:   .astype(float) \
    ...:   .eval('val * mult')
    ...:

In [61]: df
Out[61]:
       col           new
0  123.456  1.234560e+02
1      78M  7.800000e+07
2     0.5B  5.000000e+08 
```

# c++ - 使用 Eclipse 时，如何向我的 C++ 编译的可执行文件添加图标？

> ID：14218731
> 
> 赞同：1
> 
> 时间：2013-01-08T15:45:24.813
> 
> 标签：c++, windows, eclipse

所以我正在创建一个小程序，我想为其.exe 使用自定义图标。我在 Eclipse.C/C++ 中使用 Microsoft Visual C++ 工具链 非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:49:32.857

想通了！我创建了一个名为 icon.rc 的文件并添加了以下行：

`id ICON "\path\to\icon.ico"`

它会自动编译它并将其添加到我的可执行文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:23:38.743

对于不同的操作系统，可执行图标的处理方式不同。我假设您正在编写一个 Windows C++ 程序（您的问题没有针对您的目标操作系统的标签）。在 Windows 中，图标存储在“资源”中，它可以是单独的，也可以是可执行文件的一部分。

尽管我会提供搜索建议，但我认为您需要阅读一些内容：

*   visual c++ [版本] 资源编辑器
*   eclipse windows资源图标

# c++ - 如何使用 Xlib 模拟拖动动作？

> ID：14218740
> 
> 赞同：2
> 
> 时间：2013-01-08T15:45:52.813
> 
> 标签：c++, linux, qt, x11, xlib

我有一个使用 Xlib 库在屏幕上模拟鼠标的应用程序。

我使用了 XQueryPointer 和 XWarpPointer 函数，我可以使用它们来模拟鼠标移动和单击。我的问题是我不能“拖动”一个元素（它是一个带有一些块的接口，您可以在用 C++ 编写并在 Ubuntu 上启动的 Qt 应用程序中移动这些块）。

我使用了这个提取物的许多部分：

[发送 X11 点击事件不适用于某些窗口](https://stackoverflow.com/questions/12701069/sending-x11-click-event-doesnt-work-with-some-windows)

这个功能可以帮助我吗？

```
::XGrabPointer(mDisplay, window, True,
           ButtonPressMask |
             ButtonReleaseMask |
             PointerMotionMask |
             FocusChangeMask |
             EnterWindowMask |
              LeaveWindowMask,
           GrabModeAsync,
           GrabModeAsync,
           RootWindow(mDisplay, DefaultScreen(mDisplay)),
           None,
           CurrentTime); 
```

你有什么主意吗？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-11-01T01:26:15.637

如果您可以生成子进程，您可以轻松地使用`xdotool`它，如下所示：

```
xdotool mousedown 1
sleep 0.5
xdotool mousemove_relative --sync 200 200
sleep 0.5
xdotool mouseup 1 
```

[http://www.semicomplete.com/projects/xdotool/](http://www.semicomplete.com/projects/xdotool/)

[http://tuxradar.com/content/xdotool-script-your-mouse](http://tuxradar.com/content/xdotool-script-your-mouse)

如果您想在 C 中使用库自己执行此操作，[源代码`xdotool`](https://github.com/jordansissel/xdotool)将作为一个很好的起点。`XTest`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-14T09:27:22.057

您可以通过将[XMotionEvent](https://tronche.com/gui/x/xlib/events/keyboard-pointer/keyboard-pointer.html)发送到窗口来实现此目的。X11 知道它是一个拖动事件的方法是检查状态。因此，如果状态是与 Button1Mask 的 OR，则意味着当 Button1 被按下时动作完成。

我在这里粘贴伪代码。您可能希望根据您的用例填充 XMotionEvent 的相关字段。

```
Display *OpenedDisplay = XOpenDisplay(NULL);

int ret = 0,screen = 0;
XMotionEvent xbpe;

Window dummy;
unsigned int mask,dummyUInt;
int dummyInt;

int screencount = ScreenCount(xbpe.display);
for (int i = 0; i < screencount; i++) {
    Screen *screenPointer = ScreenOfDisplay(xbpe.display, i);
    ret = XQueryPointer(xbpe.display, RootWindowOfScreen(screenPointer), &dummy, &dummy,
                        &dummyInt, &dummyInt, &dummyInt, &dummyInt, &mask);
    if (ret == True) {
      screen = i;
      break;
    }
}

xbpe.type = MotionNotify;
xbpe.display = OpenedDisplay;
xbpe.window = wid;
xbpe.root = RootWindow(xbpe.display, screen);
xbpe.subwindow = None;
xbpe.time = CurrentTime;
xbpe.x = src_x;
xbpe.y = src_y;

xbpe.state = mask;
xbpe.is_hint = NotifyNormal;
xbpe.same_screen = True; /* Should we detect if window is on the same screen as cursor? */

XWindowAttributes attr;
ret = XGetWindowAttributes(xbpe.display, wid, &attr);
if(ret == 0){
    qDebug() << wid <<"XGetWindowAttributes unsuccessfull returning early";
    return;
}
/**************************** This is key here *******************/
if(isDrag){
    xbpe.state |= Button1Mask;
}

ret = XSendEvent(xbpe.display, wid, False, PointerMotionMask|ButtonMotionMask|MotionNotify, (XEvent *)&xbpe);
XFlush(OpenedDisplay);
XCloseDisplay(OpenedDisplay); 
```

我建议浏览[xdotool](https://github.com/jordansissel/xdotool/blob/master/xdo.c#L872)的源代码。它没有专门涵盖您的问题，但为您提供了有关填充 X*Event 字段的足够信息。

# sql-server - 优化的存储过程

> ID：14218746
> 
> 赞同：0
> 
> 时间：2013-01-08T15:46:02.530
> 
> 标签：sql-server, stored-procedures, sql-server-2008-r2

我正在使用 SQL Server 2008 R2。我有这样的存储过程：

```
ALTER PROCEDURE [dbo].[GetZone]
    -- Add the parameters for the stored procedure here
@TheInsee int
AS
BEGIN
declare @Zone int

declare @CountA int
declare @CountB int
declare @CountC int
declare @CountD int
declare @CountN int
declare @CountP int
declare @CountN1 int
declare @CountN2 int
declare @CountN3 int
declare @CountN4 int
declare @CountN5 int
declare @CountN6 int

SELECT @CountA = COUNT(*) FROM LS_CLIENT_INSEE_A WHERE NO_INSEE = @TheInsee
SELECT @CountB = COUNT(*) FROM LS_CLIENT_INSEE_B WHERE NO_INSEE = @TheInsee
SELECT @CountC = COUNT(*) FROM LS_CLIENT_INSEE_C WHERE NO_INSEE = @TheInsee
SELECT @CountD = COUNT(*) FROM LS_CLIENT_INSEE_D WHERE NO_INSEE = @TheInsee
SELECT @CountN = COUNT(*) FROM LS_CLIENT_INSEE_N WHERE NO_INSEE = @TheInsee
SELECT @CountP = COUNT(*) FROM LS_CLIENT_INSEE_P WHERE NO_INSEE = @TheInsee

SELECT @CountN1 = COUNT(*) FROM LS_CLIENT_INSEE_N1 WHERE NO_INSEE = @TheInsee
SELECT @CountN2 = COUNT(*) FROM LS_CLIENT_INSEE_N2 WHERE NO_INSEE = @TheInsee
SELECT @CountN3 = COUNT(*) FROM LS_CLIENT_INSEE_N3 WHERE NO_INSEE = @TheInsee
SELECT @CountN4 = COUNT(*) FROM LS_CLIENT_INSEE_N4 WHERE NO_INSEE = @TheInsee
SELECT @CountN5 = COUNT(*) FROM LS_CLIENT_INSEE_N5 WHERE NO_INSEE = @TheInsee
SELECT @CountN6 = COUNT(*) FROM LS_CLIENT_INSEE_N6 WHERE NO_INSEE = @TheInsee

set @Zone = 
      CASE 
         WHEN @CountA >  0   THEN 1
         WHEN @CountB >  0   THEN 2
         WHEN @CountC >  0   THEN 3   
         WHEN @CountD >  0   THEN 4
         WHEN @CountN >  0   THEN 5
         WHEN @CountP >  0   THEN 6  
         WHEN @CountN1 >  0   THEN 7
         WHEN @CountN2 >  0   THEN 8
         WHEN @CountN3 >  0   THEN 9
         WHEN @CountN4 >  0   THEN 10
         WHEN @CountN5 >  0   THEN 11
         WHEN @CountN6 >  0   THEN 12   
         ELSE 1    
      END

RETURN @Zone  

END 
```

它工作正常，但是当每个表的数据非常大时，它会因为超时而挂起。我想知道我是否可以简化这个存储过程。

这个存储过程非常简单：我只是输入一个输入`@TheInsee`，当它在六个表中找到时它会在其中进行搜索。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:07:12.893

首先，由于您只检查每个表中是否至少存在一行，因此计算所有行是没有意义的。其次，如果您已经在前一个表中找到了行，那么查询所有表是没有意义的。

我会做这样的事情：

```
set @Zone = case
    when exists (select * from dbo.LS_CLIENT_INSEE_A where NO_INSEE = @TheInsee) then 1
    when exists (select * from dbo.LS_CLIENT_INSEE_B where NO_INSEE = @TheInsee) then 2
    -- etc.
    else 1
    end 
```

# java - 使用 JComboBox 作为搜索框

> ID：14218749
> 
> 赞同：0
> 
> 时间：2013-01-08T15:46:08.260
> 
> 标签：java, swing, search, jcombobox

我使用 a`JComboBox`从 sql 数据库中搜索查询。这是我的代码。

```
private void srKeyTyped(java.awt.event.KeyEvent evt){
    sr.removeAllItems();
    String sch = ((JTextField)sr.getEditor().getEditorComponent()).getText();
    String schh = "SELECT * FROM tbl WHERE name LIKE '" + sch + "%';";
    search = conn.getQuery(schh);
    try {
        while (search.next()) {
            String item = search.getString("name");
            sr.addItem(item);
        }
    } catch (SQLException ex) {
        Logger.getLogger(dataprocess.class.getName()).log(Level.SEVERE, null, ex);
    }
    sr.setSelectedItem(null);
    sr.setPopupVisible(true);

    System.out.println(sch);
} 
```

`sr`= JComboBox

但是当我在组合框中输入一个字母时，它会添加数据库中的所有项目。我开始知道它`System.out.println(sch);`总是给出一个空字符串。一旦我输入一个字母，组合框的文本字段就变成空的（我不能输入一个有两个字母的单词）。如何解决这个问题？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:01:10.253

您的问题的原因如下：

1.  `sch`总是空的是因为你在打电话`sr.removeAllItems();`之前先打电话`String sch = ((JTextField)sr.getEditor().getEditorComponent()).getText();`。这意味着`JComboBox`在您获得所选内容之前，会清除 的内容（连同所选内容）。

    `sr.removeAllItems();`解决方案：在您获得所选项目后致电。

2.  组合框变为空，因为您`sr.setSelectedItem(null);`在重新填充后最后调用。

    解决方案：如果您想要输入的文本，那么`sr.getEditor().setItem(scr);`

只有和想法，但尝试将方法的内容包含在 an 中`if statement`并检查是否`Enter key`按下。这样，方法内容只会在输入所需的字符串后执行，而不是每次按下键时执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T16:05:21.917

使用 an`ActionListener`而不是寻找按键。当组合框的选择被编辑时，它会在编辑完成时触发`ActionEvent`。

当你让这部分工作时，你应该把这个逻辑移到另一个线程，并在它返回时填充组合框的项目。否则，您的 UI 将在 SQL 查询发生时挂起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T16:30:01.400

得到了解决方案。这段代码工作正常。

```
 private void srKeyTyped(java.awt.event.KeyEvent evt){

    String sch = ((JTextField)sr.getEditor().getEditorComponent()).getText();
    String schh = "SELECT * FROM tbl WHERE name LIKE '" + sch + "%';";
    search = conn.getQuery(schh);
    sr.removeAllItems();
    try {
        while (search.next()) {
            String item = search.getString("name");
            sr.addItem(item);
        }
    } catch (SQLException ex) {
        Logger.getLogger(dataprocess.class.getName()).log(Level.SEVERE, null, ex);
    }
    System.out.println(sch);
    sr.setSelectedItem(null);
    sr.setPopupVisible(true);
    ((JTextField)sr.getEditor().getEditorComponent()).setText(sch);
  } 
```

感谢 Skepi、Kleopatra、Guillaume Polet

# windows - 在 Windows 7 上安装 behat：没有得到 autoexec

> ID：14218750
> 
> 赞同：1
> 
> 时间：2013-01-08T15:46:15.300
> 
> 标签：windows, windows-7, behat

我正在尝试在 Windows 虚拟机上安装[behat](http://behat.org)，但我遇到了 windows 命令提示符。这是我所做的：

1.  安装 xampp
2.  已安装[Composer](http://diywebdev.com/setting-up-composer-php-dependencies-manager-in-windows/)
3.  Donwloaded behat[使用 git 方法](http://docs.behat.org/quick_intro.html#method-3-git)（其他方法对我不起作用）到 C:\behat 以便 C:\behat\bin\behat.bat 和 C:\behat\bin\behat 都存在
4.  打开windows控制面板
5.  搜索“环境”
6.  点击“编辑系统环境变量”
7.  系统和安全 > 编辑系统环境变量：添加 PATH "C:\behat\bin" 的末尾

此时，我希望能够以管理员身份使用命令提示符在系统上的任何位置键入 behat，因为包含“behat.bat”的“bin”目录包含在 PATH 中，但键入“behat”会给我“无法打开输入文件 @bin_dir@\behatcd”。输入 behat.bat 也不起作用

我以前从未使用过 Windows，所以这可能很明显，但我就是不明白。

任何建议都非常感谢，谢谢。

阿尔伯特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T12:43:36.253

试着打字

```
php behat 
```

windows不知道behat是一个php文件，你需要告诉它用什么来执行它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-08T13:27:24.627

在这里，您可以找到在 Windows 机器上安装 Behat 的分步指南。[开放向导](http://openguider.wordpress.com/2013/08/01/how-to-install-behat-on-windows/)

# jquery - 如何使用 JQuery 触发原始事件

> ID：14218753
> 
> 赞同：3
> 
> 时间：2013-01-08T15:46:17.837
> 
> 标签：jquery, google-chrome-extension

很抱歉我的英语不好。

您好，我在 JQuery 中触发自定义事件时遇到了一些问题。我的问题是：

*   我尝试使用`content_scripts`API 开发 Google chrome 扩展。
*   如果我在 textArea 上按 Enter 键，我的目标网站将发布评论。
*   我需要开发一个按钮，如果我点击它会触发相同的事件。

我尝试使用[http://jsfiddle.net/](http://jsfiddle.net/)编辑器来模拟同样的事情，如下所示：

```
 $(document).ready(function(){
// this what the site do when press enter key on textarea , the submit form with ajax to publish a comment.
          $("textarea").bind("keydown",function(e){
            if(e.which == 13){
              alert("enter pressed");
            }
          });
    // this what i need to do, firing the same event when i click on my button which i added by my extension.
          $("button").click(function(){
            var e = $.Event("keydown");
            e.which = 13;
            $("textarea").trigger(e);
          });
        }); 
```

上面的代码运行没有任何问题，但是当在目标网站上应用这个模拟时没有任何动作发生。我想如果网站使用 keydown、keyup 或 keypress 事件来发布评论，所以我尝试使用所有事件类型，但我所有的尝试都失败了。我能做些什么来触发相同的原始事件，例如实际按下回车键提交评论？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:50:49.847

您可以创建一个新函数来提交您的评论并在以下情况下调用它：

*   用户在文本区域中按 ENTER
*   用户点击按钮

    ```
     $(document).ready(function(){

         function submitComment()
         {
             //Do what you want to submit the textarea text
             var comment = $("textarea").html();
         }

         $("textarea").bind("keydown",function(e){
            if(e.which == 13){
               submitComment();
            }
         });

         $("button").click(function(){
            submitComment();
         });
     }); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T15:55:22.960

为什么不尝试分离你的逻辑？这不是经过测试的代码，因此您可能不得不使用它，但是这种通用样式将起作用并完成您似乎正在尝试做的事情。

```
function myFunction()
{

    alert("enter pressed");
}

 $(document).ready(function(){
// this what the site do when press enter key on textarea , the submit form with ajax to publish a comment.
          $("textarea").bind("keydown",function(e){
             if(eventArg.which == 13){
                    myFunction();

              }
          });

    // this what i need to do, firing the same event when i click on my button which i added by my extension.
 $("button").click(function(){
         myFunction();
   });
 }); 
```

# iphone - iOS SDK 编辑 PDF 以添加图像

> ID：14218771
> 
> 赞同：0
> 
> 时间：2013-01-08T15:47:00.423
> 
> 标签：iphone, ios, pdf-generation, quartz-2d

我试图弄清楚是否有任何方法可以将图像插入到 pdf 文件的特定页面中。我正在分析这个例子[http://www.raywenderlich.com/6818/how-to-create-a-pdf-with-quartz-2d-in-ios-5-tutorial-part-2](http://www.raywenderlich.com/6818/how-to-create-a-pdf-with-quartz-2d-in-ios-5-tutorial-part-2)和其他，他们总是创建一个新的 PDF 文件。

有没有办法使用 Quartz 2D 在现有内容的 PDF 页面上方绘制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:18:10.157

似乎是一个重复的问题。看看我的问题和答案->[在 iOS 下操作现有 PDF 文档的最佳方法是什么？](https://stackoverflow.com/questions/13071069/what-is-the-best-way-to-manipulate-an-existing-pdf-document-under-ios)

# java - return 语句在数组中缺少错误

> ID：14218776
> 
> 赞同：0
> 
> 时间：2013-01-08T15:47:13.777
> 
> 标签：java, arrays, methods, return

我正在尝试基于一个简单的算法来获取数组的元素。在这个例子中，我得到了索引总和为二的元素（模块三）我写了这个方法，但是 jcreator 给了我“return statement is missing”。我该如何解决这个问题。

```
public class hw1 {

    public static void main(String[] args) {

        String[][] RaggedArray = {
                { "hello", "hi", "i", "nice", "good", "love" },
                { "what", "java", "there" }, 
                { "and", "cool", "door", "my" },
                { "time", "phone", "homework" }

        };
        System.out.println(hw_one(RaggedArray));
    }

    public static String hw_one(String[][] array) {
        String result;

        for (int row = 0; row < array.length; row++) {
            for (int column = 0; column < array[row].length; column++) {

                if ((row + column) % 3 == 2) {
                    result = array[row][column];
                }

            }
        }
        return result;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T15:49:13.043

我看不出你怎么能得到一个“`return`缺少声明”的错误，而它显然不是。

也就是说，我的编译器抱怨您正在返回一个可能未初始化的变量 ( `result`)。以下解决了该问题：

```
String result = null;
              ^^^^^^ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T15:49:49.880

您必须在使用本地变量`result`之前对其进行初始化。将其初始化为 null 或空字符串。

```
String result = null;  or  String result = ""; 
```

# sql - 为什么 Oracle 中的 (+) 语法不再使用？

> ID：14218777
> 
> 赞同：0
> 
> 时间：2013-01-08T15:47:19.953
> 
> 标签：sql, oracle, join, syntax

话题。我很困惑，真的需要一个很好的解释。

谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T15:55:13.887

现在 (+) 语法没有像早期那样被使用有几个原因：

*   Oracle 现在完全支持 ANSI 语法（早期的 Oracle 版本不是这种情况）
*   ANSI 语法在不同的 RDBMS 之间是可移植的，而 (+) 不是
*   ANSI 语法（可以说）更具可读性，因为它将连接条件与过滤条件分开
*   您不能使用 (+) 语法进行 FULL OUTER JOIN
*   ANSI 语法允许您在多个列上进行 OUTER JOIN，而 (AFAIK) 使用 (+) 语法是不可能的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T15:52:59.113

+ 表示法是 Oracle 供应商特定的形式，在供应商之间并不一致，MS SQL Server 有一个使用 * 的类似形式，这会导致巨大的混乱，我相信 * 在 = 的另一边。您说 LEFT JOIN 等的 ANSI 形式更具可读性并且是标准。

旧形式有一些更容易做的事情，所以你仍然偶尔会看到它。每次看到都想回到以前，穿上喇叭裤，希望能明白作者的意思。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T15:50:59.743

有一种方法可以在 ANSI SQL 中指定它，使用 OUTER/INNER 连接语法。

只有 Oracle 并且可能是其他供应商支持 (+) 语法，因此最好使用所有数据库都支持的语法。

# javascript - 定义为函数调用参数的函数名称不会被提升。为什么不？

> ID：14218779
> 
> 赞同：4
> 
> 时间：2013-01-08T15:47:27.640
> 
> 标签：javascript, hoisting

考虑以下代码。

```
<!DOCTYPE html>
<script>
  console.log(a);
  function a() {}
</script> 
```

请注意，`a`它似乎在定义之前已被访问。控制台输出是：（[jsfiddle](http://jsfiddle.net/anLcC/)）

```
function a() {} 
```

函数和变量名称是在任何其他代码运行之前定义的，因此 console.log 调用在这里起作用。这称为[吊装](http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting)。

但是如果函数被定义为函数调用中的参数，这不起作用。看看这段代码。

```
<!DOCTYPE html>
<script>
  function a() {}
  a(function b() {});
  console.log(b);
</script> 
```

请注意，该函数`b`是在对`a`. 不是在闭包内部，而是在调用内部。控制台输出是：（[jsfiddle](http://jsfiddle.net/8VfDB/)）

```
Uncaught ReferenceError: b is not defined 
```

我想知道为什么会这样。这是预期的行为吗？这发生在 Chrome 和 Firefox 中。

**更新：**这个[jsfiddle](http://jsfiddle.net/bkUyZ/2/)显示函数表达式中的名称在定义它们的范围内永远不可用。但是，名称是在函数本身的范围内定义的。这意味着命名函数表达式可以引用名称，但只能在函数内部。该名称也存储在函数的`name`参数中。

```
<!DOCTYPE html>
<script>
  console.log(a); // undefined
  var a = function b() {
    console.log(b); // function b() { … };
  };
  a(); // function b() { … };
  console.log(a); // function b() { … };
  console.log(a.name); // b
  console.log(b); // Uncaught ReferenceError: b is not defined
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T15:50:15.567

在内部`a(function b() {});`，函数是*函数表达式*，而不是*函数声明*（仅被提升）。你可以看看[var functionName = function() {} vs function functionName() {}](https://stackoverflow.com/q/336859/1048572)的区别。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T15:51:20.220

[EcmaScript §13 （参见](http://es5.github.com/#x13)**NOTE**下方的段落）定义了如何处理函数表达式和函数声明。

函数声明在 EnvironmentRecord 构建（[§10.5](http://es5.github.com/#x10.5)）时被实例化，因此被提升，函数表达式稍后被评估，它的可选标识符对封闭范围是不可见的。

由于这是一个函数表达式，因此它的名称对外部范围不可见。是一样的

```
a = function(){};  // valid as it is a function expression

a = function b(){};// also valid

// b is is not accessable here, same as the anonymous function, but a of course is. 
```

两者都是有效的，但 b 对外部范围不可见。但是，在函数声明中省略名称是无效的。
*函数表达式的可选标识符用于函数体内的引用目的（例如，启用递归调用）。*

更新您的更新：

第一个 console.log 产生 undefined 而不是抛出错误的原因是提升（当实例化被提升时，初始化不是）：

```
 console.log(a); // undefined
  var a = function b() {};
  console.log(a); // function b() {}

  // equals (hoisted):
  var a;
  console.log(a); // undefined
  a = function b() {};
  console.log(a); // function b() {} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T15:49:09.233

`function b()``a(function b() {});`在调用执行之前不存在。

这样，JS 不会在代码中搜索函数。另外，`function b() {}`不是函数声明，您只是将其作为参数传递。访问该功能的唯一方法是在`function a()`：

```
function a() {console.log(arguments[0])}
a(function b() {});
//function b() {} 
```

但是，这并不意味着您可以实际调用`b()`inside `a()`，因为`b()`它是在函数调用的范围内定义的`a`，而不是在函数本身中。基本上，这个名字`b`是没有用的。

# grails - Grails 和 CXF 插件 WSDL 第一种方法示例？

> ID：14218781
> 
> 赞同：1
> 
> 时间：2013-01-08T15:47:28.990
> 
> 标签：grails, soap, wsdl, cxf

您好，我需要创建一个 wsdl 第一肥皂服务的肥皂实现。有没有关于如何在 grails 项目中实现这一点的方法？

我必须创建一个 wsdl 的服务器实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T05:24:22.167

这可以通过新的 cxf 1.x 插件实现。查看 cxf 测试源中的示例：

CustomerServiceWsdlEndpoint.groovy -> [https://github.com/thorstadt/grails-cxf/blob/master/grails-app/endpoints/org/grails/cxf/test/CustomerServiceWsdlEndpoint.groovy](https://github.com/thorstadt/grails-cxf/blob/master/grails-app/endpoints/org/grails/cxf/test/CustomerServiceWsdlEndpoint.groovy)

CustomerService.wsdl -> [https://github.com/thorstadt/grails-cxf/blob/master/src/java/org/grails/cxf/test/soap/CustomerService.wsdl](https://github.com/thorstadt/grails-cxf/blob/master/src/java/org/grails/cxf/test/soap/CustomerService.wsdl)

如果这不能满足您的需求，请告诉我。

# iphone - 自定义广告横幅

> ID：14218785
> 
> 赞同：3
> 
> 时间：2013-01-08T15:47:41.857
> 
> 标签：iphone, ios, objective-c

我花了一段时间环顾四周，但似乎找不到太多关于这个主题的东西。我想制作一个像 iAd 一样的横幅，但用于我自己的应用内广告。广告会将用户带到应用程序内的视图。

这是我为展示广告横幅所做的设计。

![广告横幅设计](../Images/496bb2f1da598ec6f1bc15c7e2bdf1fb.png)

[这是我迄今为止设法实现的](http://www.youtube.com/watch?v=wkoKzZrjhZc&feature=youtu.be)。

到目前为止，我所做的事情有两个问题。

**1）我想自定义图像的顺序。**

我想要一个主广告，然后是子广告。主要广告应该首先播放，其他所有图片都应该是主要广告。那么子广告的顺序应该是随机的。我怎么能做到这一点？我可以使用当前的即时动画方式来完成它还是会有更好的解决方案？

**2）我不知道如何将图像链接到不同的地方。**

到目前为止，我拥有它，因此所有图像都运行相同的操作。我怎样才能让他们改变不同的观点？

这就是我到目前为止所拥有的。

```
@implementation SponsorBannerView{

}

@synthesize bannerImage;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect{

    //get the sponsors banners and id's. 
    DataBase * dataBase = [[DataBase alloc] init];
    [dataBase openDB];
    NSMutableDictionary *BannersAndId = [dataBase getBanners];
    NSLog(@"banner and id's : %@",BannersAndId);

    //create an id array and a banner array.
    self.poiIDs = [BannersAndId allKeys];
    self.banners = [BannersAndId allValues];

    //get the root file path for the images 
    NSArray   *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString  *documentsDirectory = [paths objectAtIndex:0];

    //create an array to hold the image 
    NSMutableArray * images = [[NSMutableArray alloc]init];

    //create an array containing all the images
    for (int i = 0; i<self.banners.count; i++) {
        NSString *tmp = [NSString stringWithFormat:@"%@/%@",documentsDirectory, self.banners[i]];
        UIImage * tmpIamge = [UIImage imageWithContentsOfFile:tmp];
        [images addObject:tmpIamge];
    }

    //cast the mutable array into an array
    NSArray *array = [NSArray arrayWithArray:images];

    //set all the banner settings 
    bannerImage=[[UIImageView alloc]init];
    bannerImage.frame=CGRectMake(0, 0, 320, 50);
    bannerImage.backgroundColor=[UIColor purpleColor];
    [bannerImage setAnimationImages:array];
    [bannerImage setAnimationDuration:6];
    [bannerImage setAnimationRepeatCount:0];
    [bannerImage startAnimating];

    //add to view. 
    [self addSubview:bannerImage];

    // add a uibutton on top of the uiimageview and assign an action for it
    UIButton* actionButton=[UIButton buttonWithType:UIButtonTypeCustom];
    actionButton.frame=CGRectMake(0, 0, 320, 50);
    [actionButton addTarget:self action:@selector(sponsorBannerAction) forControlEvents:UIControlEventTouchUpInside];

    [self addSubview:actionButton];
}

-(void) sponsorBannerAction{
    // do what ever here like going to an other uiviewController as you mentionned
    NSLog(@"Pressed");

} 
```

这是我作为主视图的子视图添加的视图。

任何帮助都会很棒。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:02:08.387

您是否需要两个数组，一个用于图像，另一个用于链接目标。

前任。img1、img2、img3 和 img1ClickedMethod、img2ClickedMethod、img3ClickedMethod

当您在按钮中交换图像时，还将按钮单击的目标更改为新方法。

即`[actionButton addTarget:self action:@selector(img1ClickedMethod) forControlEvents:UIControlEventTouchUpInside];`更改为`[actionButton addTarget:self action:@selector(img2ClickedMethod) forControlEvents:UIControlEventTouchUpInside];`

```
 - (void)nextImageFade{

        NSArray *imgArray;
imgArray = [NSArray arrayWithObjects:
@"img1.jpg",
@"img2.jpg",
@"img3.jpg",
  nil]; 
 NSArray *methodArray;
imgArray = [NSArray arrayWithObjects:
@"clicked1",
@"clicked2",
@"clicked2",
  nil];   
        UIImage *image1 = [UIImage imageNamed:[imageArray objectAtIndex:currentImg]];

        if(currentImg < [imgs count]-1){
            currentImg++;
        }else{
            currentImg = 0;
        }
        UIImage *image2 = [UIImage imageNamed:[imgArray objectAtIndex:currentImg]];

    CABasicAnimation *crossFade = [CABasicAnimation animationWithKeyPath:@"contents"];
        crossFade.delegate = self;
        crossFade.duration = 0.5;
        crossFade.fromValue = (id)image1.CGImage;
        crossFade.toValue = (id)image2.CGImage;
        [_imgView1.layer addAnimation:crossFade forKey:@"animateContents"];
        _imgView1.image = image2;
//This this may work for changing targets
        [actionButton addTarget:self action:@selector([methodArray objectAtIndex:CurrentImg]) forControlEvents:UIControlEventTouchUpInside];

        if(nextImgTimer != nil){
            [nextImgTimer invalidate];
        }

        nextImgTimer = [NSTimer scheduledTimerWithTimeInterval:5 
                                                        target:self 
                                                      selector:@selector(nextImageFade) 
                                                      userInfo:nil 
                                                       repeats:NO];
    } 
```

# javascript - 在 DOM 中存储数据 - 自定义属性或 .data()

> ID：14218788
> 
> 赞同：4
> 
> 时间：2013-01-08T15:48:08.010
> 
> 标签：javascript, jquery, html, dom, jquery-data

> **可能重复：**
> [jQuery Data vs Attr？](https://stackoverflow.com/questions/7261619/jquery-data-vs-attr)

我正在做一个项目，我计划在 DOM 中存储少量数据。我专门使用它将数值附加到 DOM 元素上，以便在其他地方轻松访问。

像这样插入自定义属性是否更好：

```
 $('#storeThingsHere').attr('data-count', superArray.length); 
```

还是利用 jquery 的 .data() 函数？

```
 $('#storeThingsHere').data("count", superArray.length); 
```

我知道两者都可以使用，但我想利用最佳实践，同时选择最有效的方法。两者之间是否有特别的好处，或者可能是另一种更好的选择来将少量数据存储在 DOM 中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T15:51:26.283

使用`data`. 任何类型都可以使用存储，`data`因为 jQuery 使用内部对象来存储它们，而只有字符串可以使用`attr`.

此外，`data()`由于它不必参考 DOM 进行设置/获取，很可能会更快，尽管我没有对此进行测试。

# objective-c - Mac OS 10.8 快速查看样式窗口

> ID：14218789
> 
> 赞同：0
> 
> 时间：2013-01-08T15:48:09.157
> 
> 标签：objective-c, cocoa

我是 Mac 和 iOS 软件开发的新手，我想知道是否有办法使用 Mac OS 10.8 快速查看窗口样式。它不是界面生成器中的选项，那么有什么方法可以通过代码来完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:01:27.303

试试看这些：

[QuickLookDownloader](http://developer.apple.com/library/mac/#samplecode/QuickLookDownloader/Introduction/Intro.html#//apple_ref/doc/uid/DTS40009082-Intro-DontLinkElementID_2) [QuickLook 编程指南](https://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/Quicklook_Programming_Guide/Introduction/Introduction.html)

# typescript - 如何从外部模块中的另一个 .ts 文件访问静态属性

> ID：14218797
> 
> 赞同：0
> 
> 时间：2013-01-08T15:48:30.523
> 
> 标签：typescript

有什么想法可以在外部模块中访问此静态属性吗？game.ts 中的 Game 类包含实际的静态属性，但模块 GameObjects 无法访问 Game

```
///<reference path="game.ts" />

    export module GameObjects {

    export class Player implements GameObject {

        color: string = Game.staticProperty;
etc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:13:43.723

如果您要从这种样式的模块中导出类，则需要像这样导入：

*游戏.ts*

```
export class Game {
    public static staticProperty = "Test";
} 
```

*播放器.ts*

```
import game = module("game");

export class Player {
    public example = game.Game.staticProperty;
} 
```

这还将生成为`require`您加载模块的语句。

# gridview - MVC Devexpress Gridview Columns，如何将多个设置添加到特定列？

> ID：14218798
> 
> 赞同：2
> 
> 时间：2013-01-08T15:48:30.677
> 
> 标签：gridview, asp.net-mvc-4, devexpress

我正在尝试向我的 mvc 网格视图列添加多个设置。我知道如何将一个特定设置应用于列。我浏览了他们的网站文档，但找不到这样的例子。我知道它可以做到，而且可能真的很容易，但在任何地方都找不到它的例子。

```
@{
 var grid = Html.DevExpress().GridView(
    settings =>
    {
        settings.Name = "gvMyGridView";
        settings.Width = System.Web.UI.WebControls.Unit.Percentage(100);
        //Allows sorting etc
        settings.CallbackRouteValues = new { Controller = "Home", Action = "MyGridPartial" };
        settings.ClientSideEvents.BeginCallback = "OnBeginCallback";

        settings.Columns.Add("ColumnA").SortOrder = DevExpress.Data.ColumnSortOrder.Ascending;
        //settings.Columns.Add("ColumnA").Width = Unit.Pixel(75);
        //As you can see above i want sort order set and the width set but am unable to do so
        settings.Columns.Add("ColumnB").Width = Unit.Pixel(175);
        settings.Columns.Add("ColumnC").Width = Unit.Pixel(175);

        //Filter settings
        settings.Settings.ShowFilterRow = true;
        settings.Settings.ShowFilterRowMenu = true;
        settings.CommandColumn.ClearFilterButton.Visible = true;

        //Inline editing 
        settings.KeyFieldName = "Id";

    });

    if (ViewData["EditError"] != null){
        grid.SetEditErrorText((string)ViewData["EditError"]);
    }
}
@grid.Bind(Model).GetHtml() 
```

我上面的例子很容易解释。也许我必须在它自己的添加属性上创建我的列，然后手动添加它。不确定，因为这是我第一次使用 MVC Devexpress Gridviews。任何意见是极大的赞赏。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-23T21:22:25.197

```
settings.Columns.Add(column =>
{
column.FieldName = "Title";
column.Width = System.Web.UI.WebControls.Unit.Percentage(30);
column.SortOrder = DevExpress.Data.ColumnSortOrder.Ascending;
//other settings for column
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-04T17:17:38.797

这是另一种方式：

```
var column = settings.Columns.Add("ColumnA", "ColumnADisplay");
column.SortOrder = DevExpress.Data.ColumnSortOrder.Ascending;
column.Width = Unit.Pixel(75); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T15:55:55.767

最终不得不自己创建专栏。

```
var column = new MVCxGridViewColumn("ColumnA", MVCxGridViewColumnType.Default);
column.Caption = "ColumnADisplay";
column.SortOrder = DevExpress.Data.ColumnSortOrder.Ascending;
column.Width = Unit.Pixel(75);        
settings.Columns.Add(column); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-30T12:11:05.240

有什么：

```
settings.Columns.Add(new MVCxGridViewColumn("ColumnA", MVCxGridViewColumnType.Default)
{
  Caption = "ColumnADisplay", 
  vSortOrder = DevExpress.Data.ColumnSortOrder.Ascending,
  Width = Unit.Pixel(75)
}); 
```

# graph - 通过匹配 N 个顶点构建无向加权图

> ID：14218801
> 
> 赞同：0
> 
> 时间：2013-01-08T15:48:41.483
> 
> 标签：graph, matching, graph-algorithm, bigdata

**问题：**
我想通过将他/她的“兴趣”与所有其他人的兴趣进行比较，为特定用户推荐前 10 个最兼容的匹配项。我正在用户之间构建一个无向加权图，其中权重 = 两个用户之间的匹配分数。

我已经有一组 N 个用户：S。对于 S 中的任何用户 U，我都有一组兴趣 I。经过很长时间（一周？）我创建一个具有一组兴趣的新用户 U，并将其添加到S. 为了为这个新用户生成一个图表，我将新用户的兴趣集 I 与 S 中所有用户的兴趣集迭代地进行比较。问题在于这个“所有用户”部分。

我们来谈谈比较兴趣的功能。对一组兴趣 I 的兴趣是一个字符串。我正在使用 WikipediaMiner 比较两个字符串/兴趣（它使用 Wikipedia 链接来推断两个字符串的相关程度。例如，Billy Jean & Thriller ==> 高匹配，Brad Pitt & Jamaica ==> 低匹配等等）。我也问过一个[关于这个](https://stackoverflow.com/questions/14219232/compare-two-strings-and-find-how-closely-they-are-related-by-meaning)的问题（看看是否有比我目前使用的更好的解决方案。

因此，上述功能花费的时间不可忽略，总的来说，当我们比较数千（可能是数百万？）用户及其数百个兴趣时，将花费大量时间。对于 100,000 个用户，我无法以这种方式在短时间内（<30 秒）进行 100,000 个用户比较。但是，我必须在 30 秒内给出前 10 条建议，可能是初步建议，然后在接下来的 1 分钟左右对其进行改进，计算改进的建议。简单地按顺序比较 1 个用户和 N 个用户太慢了。

**问题：**
请提出一种算法、方法或工具，我可以使用它来改善我的情况或解决我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:15:50.570

我只能想到一种解决问题的方法，因为以下内容的结果取决于利益之间相互关系的性质。

=>步骤：1正如你的标题所说。构建一个无向加权图，以兴趣作为顶点，将它们之间的加权匹配作为边。

=> 步骤：2 - 聚集兴趣。（最复杂的）

Kmeans 是一种常用的聚类算法，但基于 K 维向量空间。请参阅 wiki 以了解 K-means 的工作原理。它最小化所有集群的（每个点的距离总和 ^ 2 并说集群的中心）的总和。在您的情况下，没有可用的尺寸。所以尝试是否可以通过创建某种规则来应用最小化逻辑，对于两个顶点之间的距离，更高的匹配 => 更小的距离，反之亦然（wiki-miner 提供的不同匹配级别是什么？）。选择集群的平均值作为所选集中连接最多的顶点，页面排名听起来是“计算最连接的顶点”的好选择。

“配对计数 F-Measure”听起来很适合您的需要（加权图），请检查其他可用选项。

（注意：不断修改这一步，直到找到正确的聚类算法并找到正确的距离规则校准，没有找到聚类等。）

=>步骤：3 - 评估集群

从这里开始，它就像校准一些东西以满足您的需要。检查集群，重新评估：集群数量，集群间距离，集群内顶点之间的距离，集群大小，时间\精度权衡（比较最终 - 没有任何集群的匹配结果）转到：步骤 2 直到这次评估是令人满意的。

=>步骤：4 - 检查新的兴趣

遍历所有集群，计算每个集群中的连通性，根据高连通性对集群进行排序，对于排序前 x% 的集群，排序并过滤掉高度连通的兴趣。

=>step:5 - 匹配用户

使用步骤 4 中获得的兴趣反向查找所有用户的集合，比较两个用户的所有兴趣，生成分数。

=>step:6 - 除了上述之外，您还可以根据流量和内容将负载（多台机器可用于集群 machine-n 集群）分配到多个系统\处理器。

这个问题的应用是什么，预期的流量是多少？

* * *

找到新兴趣和“集群中的一组兴趣”之间的连接的另一种解决方案 C. Wiki-Miner 在一组 wiki 文档上运行，我称之为 UNIVERSE。

1：对于每个集群获取和维护（索引，lucene 可能很方便）UNIVERSE 中的“一组高相关文档”（我称之为 HRDC）。所以如果你有'N'个集群，你就有'N'个HRDC。

2：当新的兴趣出现时，为每个 HRDC 找到“与集群的连接”=“HRDC 中的兴趣命中率/UNIVERSE 中的兴趣命中率”。

3：对“Conectivity with Cluster”进行排序并选择高度连接的集群。

4：根据适合您的时间\精度权衡，将集群中的所有顶点与新兴趣或高度连接的顶点（使用页面排名）进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T21:09:46.563

一个缺陷是您将算法复杂性建立在错误的事情上。真正的问题是您必须将每个独特兴趣与其他所有独特兴趣（以及该兴趣与自身）进行比较。

如果所有的兴趣都是独一无二的，那么您可能无能为力。但是，如果您有很多重复的兴趣，您也许可以通过以下方式加速算法。

1.  创建一个图表，将每个兴趣与具有该兴趣的用户相关联。以允许快速查找的方式。

2.  创建一个图表，显示每个兴趣与其他兴趣之间的关系，同时以允许快速查找的方式。

因此，当添加新用户时，会将他们的兴趣与所有其他兴趣进行比较并存储在图表中。然后，您可以使用该信息来构建具有相似兴趣的用户列表。然后需要以某种方式过滤该用户列表以将其降到前 10 名。

最后，将该用户及其兴趣添加到用户和兴趣图表中。这是最后完成的，因此具有最密切匹配兴趣的用户不是用户自己。

注意：可能有一些统计捷径，您可以这样做：A 与 B 相关，B 与 C 相关，C 与 D 相关，因此 A 与 B、C 和 D 相关。使用这些捷径可能需要更好地了解您的比较功能的工作原理，这有点超出我的专业知识。

近似解决方案：

我之前忘了提，但是你在比较用户或兴趣时看到的是更高维度的“最近邻搜索”。这意味着，对于精确的解决方案，线性搜索通常比数据结构更有效。因此，如果您需要更快，近似值可能是最好的方法。

为了获得一个快速的近似解（不保证它有多接近），您需要一个允许快速确定哪些用户可能与新用户相似的数据结构。

构建该结构的一种方法：

1.  选择 300 个随机用户。这些将是 300 个集群的种子用户。理想情况下，您会使用最不密切相关的 300 个用户，但这可能不切实际，仍然可能明智的做法是确保无种子用户与其他用户的关系过于密切（作为比较的总和或平均值）其他用户）。
2.  然后由每个加入其代表用户与其最匹配的集群的用户填充集群。
3.  然后可以通过从该集群中挑选最密切相关的前 10 个用户来确定前 10 个用户。

如果您确保集群的数量和每个集群的用户始终非常接近 sqrt（用户数），那么您只需检查集群内的点即可获得 O(sqrt(N)) 的公平近似值。您可以通过将用户包含在其他集群中并检查每个集群的代表用户来改进该近似值。你检查的集群越多，你就越接近 O(N) 和一个精确的解决方案。虽然，可能没有办法说当前的解决方案与确切的解决方案有多接近。在检查超过总数的 log(sqrt(N)) 集群后，您可能会开始遇到递减的回报。这会让你进入 O(sqrt(N) log(sqrt(N)))。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T07:40:49.667

几个想法...

不完全是图论解决方案。

假设一组有限的兴趣。为每个用户维护一个位序列，其中每个兴趣是一个位，表示用户是否有该兴趣。对于新用户，只需将比特序列与现有用户的比特序列相乘，然后找到结果中的比特数，即可了解他们的兴趣匹配程度。

# java - 在主控制器之外创建 EventHanler

> ID：14218804
> 
> 赞同：1
> 
> 时间：2013-01-08T15:48:57.720
> 
> 标签：java, javafx-2

基于 JavaFX `EventHandler<T>`，为特定操作创建侦听器非常简单。为了争论，代码看起来像这样：

```
btn.setOnAction(new EventHandler<ActionEvent>() {
    public void handle(ActionEvent event) {
        System.out.println("Hello World");
    }
}); 
```

现在假设我想在这个事件上处理更复杂的事情（假设我需要 50-100 行代码）。我可以使用相同的方法并在我的处理程序中包含所有这些代码，从而在我的控制器中。

如果我想让这个看起来稍微干净一点，我可以实现这个`EventHandler<T>`接口。这看起来像这样：

```
public class LoginHandler implements EventHandler<ActionEvent> {

    // list of parameters passed

    public LoginHandler(ResourceBundle resources) {
        //Resources along with other paramters I need to access
        this.resources = resources;
    }

    @Override
    public void handle(ActionEvent event) {
        //...Logic goes here
        System.out.println("doing my logic here - 50 to 100 lines");
        ((Node)(event.getSource())).getScene().getWindow().hide();
    }
} 
```

这种方法有效，但我必须将所有对象（无论是按钮、标签、文本框等）和 ResourceBundle（如果试图国际化我的应用程序）作为参数传递。

有没有办法访问所有这些信息？基本上从`EventHandler`？还是将所有内容都留在控制器中的最佳做法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:20:08.343

在我看来，如果handle 方法中要完成的逻辑与视图（即FXML 中的控件）相关，则应该将其保留在控制器中。除了控制器之外，没有人必须知道 FXML 结构。如果要在扩展的 eventHandler 中做一个通用的通用逻辑，除了其他参数之外，还要将控制器实例传递给这个 eventHandler。然后将与视图相关的作业委托给控制器，例如 controller.updateView(params)。这些控制器还可以实现具有 updateView(params) 方法签名的通用接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T11:37:57.627

For use cases where you need access to UI controls I recommend to use an anonymous class as in your first example, but you can extract some methods if it gets too long/ for readability.

# ruby-on-rails - 从 ROR 模型中的另一个表中获取变量

> ID：14218808
> 
> 赞同：2
> 
> 时间：2013-01-08T15:48:58.750
> 
> 标签：ruby-on-rails, ruby, rails-models

我正在尝试让尚未填写个人资料的用户重定向到编辑页面。

我有两个表 - 用户（设计句柄）和配置文件。

Profiles 有一行名为 profile_complete

在我的用户模型中，我试图定义一个名为 profile_complete 的方法，该方法采用 profiles_complete 的布尔值并将其传回。

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me

  has_many :profiles, :dependent => :destroy

  def profile_complete?
    self.profile.profile_complete == true
  end
end 
```

但似乎无法弄清楚 profile_complete 方法中的行是什么。我已经让其他位在正确的位置工作，但无法通过任何帮助获得这个变量？干杯:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:07:31.927

```
def profile_complete?
    self.attributes.values.include?(nil) ? false : true
end 
```

# uitabbarcontroller - 如何同时使用幻灯片菜单（与 facebook 菜单相同）和标签栏

> ID：14218813
> 
> 赞同：0
> 
> 时间：2013-01-08T15:49:07.737
> 
> 标签：uitabbarcontroller

请检查下面的代码。我需要一起实现 tabbar 和 facebook 幻灯片菜单。

tabBarController.delegate = self;

```
self.leftController = [[LeftViewController alloc] initWithNibName:@"LeftViewController" bundle:nil];
RightViewController* rightController = [[RightViewController alloc] initWithNibName:@"RightViewController" bundle:nil];

// ViewController *centerController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
FirstViewController *centerController = [[FirstViewController alloc] initWithNibName:@"FirstView" bundle:nil];
self.centerController = [[UINavigationController alloc] initWithRootViewController:centerController];
IIViewDeckController* deckController =  [[IIViewDeckController alloc] initWithCenterViewController:self.centerController
                                                                                leftViewController:self.leftController
                                                                               rightViewController:rightController];
deckController.rightSize = 100;

self.window.rootViewController = deckController;

// Add the tab bar controller's view to the window and display.
[self.window addSubview:tabBarController.view]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:55:05.770

由于看起来您正在使用 IIViewDeckController，因此请查看它的 automaticUpdateTabBarItems 属性。

# iphone - iOS Facebook SDK，如何在 App 中登录，而不是在 safari

> ID：14218818
> 
> 赞同：2
> 
> 时间：2013-01-08T15:49:15.137
> 
> 标签：iphone, ios, facebook, facebook-graph-api

是否可以使用 Facebook iOS SDK 在应用程序内进行身份验证（而不是转到 Safari），并保留这些身份验证凭据以供下次启动应用程序使用？

我已经使用`Facebook SDK`示例代码`SessionLoginSample`来检查 . 它在 safari 中打开 Facebook 登录帐户……我希望它在应用程序中打开……

我没有使用`FBConnect`，因为它已过期...如何使用它 `Facebook SDK`

[https://github.com/facebook/facebook-ios-sdk](https://github.com/facebook/facebook-ios-sdk) ...其 示例代码

`https://github.com/facebook/facebook-ios-sdk/tree/master/samples/SessionLoginSample`

[这个示例代码在这里~~](https://github.com/facebook/facebook-ios-sdk/tree/master/samples/SessionLoginSample)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T17:07:21.487

Facebook iOS SDK 将在应用程序中打开，前提是您的用户使用的是 iOS 6 并且在设备中设置了他们的 Facebook 帐户。否则，它将优雅地回退到 Facebook 应用程序（如果已安装），然后仅回退到 Safari。从[SDK 文档](http://developers.facebook.com/docs/howtos/ios-6/)：

> 用户在其设备上登录 Facebook 后，可以使用本机登录对话框。如果设备未连接到 Facebook，则本机登录对话框不可用，并且权限请求将通过快速应用程序切换到 Facebook 应用程序（如果已安装）或 Safari 进行。Facebook SDK 方法 [...] 将无缝回退到这种快速应用程序切换行为。

如果您的用户既没有在他们的 iOS 6 设备上配置 Facebook，也没有安装 Facebook 应用程序，并且您仍然希望在您的应用程序中进行登录，那么您最好的选择可能是在某个执行服务器的地方拉出指向您自己的服务器的[UIWebView侧登录](http://developers.facebook.com/docs/howtos/login/server-side-login/)。

请记住，基于 UIWebView 的方法的一大缺点是您的 UIWebView 不会与 Safari 共享 cookie，因此即使用户已经在 Safari 中登录，他们仍然需要在您的应用中再次重新输入用户名和密码. 在第三方应用程序中这样做我会有点犹豫，因为无法知道他们是否在欺骗 Facebook 网站并通过网络钓鱼获取我的凭据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-19T06:31:17.907

FBSDKLoginManager *login = [[FBSDKLoginManager alloc] init]; login.loginBehavior = FBSDKLoginBehaviorWeb;

# ruby - Watir - 获取没有任何属性的图像

> ID：14218822
> 
> 赞同：1
> 
> 时间：2013-01-08T15:49:28.947
> 
> 标签：ruby, watir, watir-webdriver

我有这样的结构：

```
<div id="recaptcha_image" style="width: 300px; height: 57px;">
  <img style="display:block;" alt="Проверка по слову reCAPTCHA" height="57" width="300" src="https://www.google.com/recaptcha/api/image?c=03AHJ_VusSUxF0IYURRcVTVTjJJnUk92j-hXYsuwqvu0m5tvKFzAnwvrHlz-j_Gfqg-sUrHLj3D2DrUYNNg4uvr2BNgZqlK5vpJUJVYkkWo36I4RRmRGkYZru5kBYhzPCCn49KlH6wW_iLw6vIzv7vnhpu6ndqxb-9SkIRrVYyBwN39kg18Lov7Hc">
</div> 
```

我如何使用 watir 保存此图像（它是 recaptcha）？因为我无法通过名称、ID 或类...只能通过父 ID 访问它，但是如何访问呢？

像这样：

```
@browsers.image(:id=> '//recaptcha_image').save("cap.jpg") 
```

那么如何访问没有属性和动态路径的图像呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:54:36.380

如果您知道父级，则可以访问父级，然后获取第一张图像（因为 div 标签中只有一个图像）。因此，您可以通过以下方式获取图像元素：

```
@browsers.div(:id => 'recaptcha_image').image 
```

并保存图像：

```
@browsers.div(:id => 'recaptcha_image').image.save("cap.jpg") 
```

# matlab - matlab中的稀释矩阵

> ID：14218825
> 
> 赞同：1
> 
> 时间：2013-01-08T15:49:34.897
> 
> 标签：matlab, matrix

在 matlab 中，我需要创建一个函数的网格（冲浪）。然后我需要显示网格轮廓线。最后我需要用箭头显示轮廓线的方向。

到目前为止我有这个：

```
mesh(T); //T is the matrix [150x200] created by the function, this present me the mesh
contour(T);//this present me the contour lines
[px py]=gradient(T);//this for calculate gradient of T (px is[150x200] and also py)
contour(T), hold on, quiver(px,py), hold off //quiver is to make arrows 
```

这项工作很好，我可以看到轮廓线，但我的问题是箭头太拥挤而且我看到的不是很清楚。我需要稀释 px 和 py 但我不知道怎么做。我不知道这是我需要在渐变函数之前还是之后做的事情。我需要 px 和 py 保持在 [150x200] 上，并且可能将它们中的一些值替换为零，谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:53:09.127

我会通过仅采样其中的一个子集来“稀释”箭头 (px,py)。例如：

```
N=25; % or usea different # of points if needed
range1=unique(round(linspace(1,size(T,1),N)));
range2=unique(round(linspace(1,size(T,1),N)));
[rx ry]=meshgrid(range1,range2);
quiver(rx,ry,px(range1,range2),py(range1,range2)); %, hold off 
```

# internet-explorer-8 - 跨浏览器修复 IE8 中错误的行高

> ID：14218831
> 
> 赞同：0
> 
> 时间：2013-01-08T15:50:03.143
> 
> 标签：internet-explorer-8, typography, css

查看 IE8 中的“希望的迹象”英雄文本：[已删除]

我是否必须修改条件样式表，或者是否有更好的、与 IE8 兼容的方式来进行这种排版？

![在此处输入图像描述](../Images/e2ac3aa089f1b9a62295af56531e9aa7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:28:40.790

看起来你已经弄清楚了，但对于未来的知识寻求者，我猜整个文本被设置为某个特定的行高，尽管字体大小不同。

白色文本需要一个行高，绿色应该有另一个；或者您可以删除行高，或将其设置为正常，让浏览器自动处理不同的文本大小。

# php - 我应该使用公共设置器在类内设置私有属性值吗？

> ID：14218832
> 
> 赞同：3
> 
> 时间：2013-01-08T15:50:03.010
> 
> 标签：php, oop, class, coding-style, refactoring

假设我有一个类 Test，它有一个名为 的私有属性`$_list`和一个公共 setter。
public setter 用于从外部设置属性值。

```
class Test {
    private $_list;

    public function getList() {
        return $this->_list;
    }

    public function setList($list) {
        $this->_list = $list;
    }

    public function initialize() {
        $list = array();

        /* ... Some code that fills the $list with values etc. ... */

        // 1) Set value directly
        $this->_list = $list;

        // 2) Use public setter
        $this->setList($list);
    }
} 
```

问题是 - 我需要使用公共设置器在类内设置私有属性值吗？
哪种方式更好 - #1 或 #2？为什么？
你更喜欢哪种方式？我希望看到一个完整的答案，并解释每种方式的优缺点。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T17:20:34.707

正如上面所写，两者都是可以接受的，但正确的答案是：**宁可使用直接属性访问**，但有时您最好使用设置器。

第 1 号，（物业访问）优点：

*   易于阅读且速度稍快
*   为您提供这是对象的简单属性的方法

2号，（二传手）优点：

*   您可以对设置属性执行自定义操作（例如初始化其他属性、缓存或调用参数对象上的方法）
*   您将属性视为类的子元素，它可能已经实现了自己的逻辑。

我认为提出使用变量背后没有逻辑更重要。**如果它很简单，让它看起来很简单。**如果不是，您仍然可以使用 setter。

您也可以询问有关 getter 与属性访问的相同问题，上述内容也适用。

# java - 如何发出音符的声音？

> ID：14218833
> 
> 赞同：1
> 
> 时间：2013-01-08T15:50:06.857
> 
> 标签：java

我正在尝试编写一个可以模拟钢琴的程序。

所以我需要发出音符（Do，Re，Mi ..）。

有没有简单的方法来实现这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:52:49.370

看看下面的java库

[http://www.jfugue.org/](http://www.jfugue.org/)

在不使用第三方库或编写相当复杂的代码（可能使用 MIDI）的情况下，您所能获得的只是哔声（如果您的计算机有扬声器）

# ruby-on-rails - rails RESTful 更新

> ID：14218834
> 
> 赞同：3
> 
> 时间：2013-01-08T15:50:08.343
> 
> 标签：ruby-on-rails

在 Rails 中，您是否可以使用 URL 更新字段。那叫RESTful吗？

例如，是否应该使用与此类似的东西来更新 id=2 的工作订单的 workorder.wostatus_id？

```
http://localhost:5000/workorders/2?wostatus_id=4 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:52:02.287

您必须调用 URL 来执行任何更新，但您需要使用 POST 或 PUT 请求。POST 创建，PUT 更新，但我相信 Rails 对 PUT 使用“data-action”属性，然后实际上在幕后调用 POST。

只需将 URL 放入浏览器中，就像您提供的那样，默认情况下会执行 GET 请求，该请求永远不应该用于更改数据，只能用于检索它。

这是一个很好的教程，它解释了 REST 的基础知识：[REST API 教程](http://www.restapitutorial.com/)

[Rails 截屏视频](https://peepcode.com/products/rest-for-rails-2)的其余部分也很有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T15:53:26.293

在您提供的情况下，它不应该工作，因为更新应该通过`PUT`请求执行，尽管如果 URL 是通过请求的，`PUT`那么它应该可以工作。

记住这个想法是：

*   `GET`访问和检索数据
*   `PUT`更新数据
*   `POST`创建数据
*   `DELETE`删除数据

编辑：实际参数名称通常会因控制器实现而异，因此在您经常发现的 rails`?workorder[wostatus_id]=4`中，它将引用模型名称。

# java - 在 Java 中绘制一个不断增长的图像

> ID：14218840
> 
> 赞同：2
> 
> 时间：2013-01-08T15:50:21.270
> 
> 标签：java, image, swing, awt

我有一个应用程序，我想在其中绘制一个宽度随时间增长的图像。具体来说，应用程序监听麦克风并每 6 毫秒计算一次频谱图，我想在它进来时绘制更新的频谱图。我一直在使用`java.awt.image.BufferedImage`绘制频谱图，但仅适用于预先录制的文件，所以我有图像的固定宽度。对于流应用程序执行此操作的最佳方法是什么，我事先不知道图像的宽度？

一种可能性是只创建一个新的 BufferedImage 并在右侧增加一个像素并将数据复制过来，但每秒执行数百次似乎效率低下。或者我可以从一个相对较大的宽度开始并将右侧保持空白直到它填满，然后将宽度加倍，类似于 ArrayList 如何摊销其大小 - 我只需每秒复制几次数据，或每隔几秒一次，或以此类推。有更好的选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T16:54:17.093

我将使用您建议的内容和仅绘制整个图像的子图像并返回适当的首选大小的覆盖组件的组合。

这是一个演示代码，它显示了我的意思：

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Rectangle;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.image.BufferedImage;
import java.util.Random;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.SwingUtilities;
import javax.swing.Timer;

public class TestRecording {

    public static class MyPanel extends JPanel {

        private BufferedImage buffer = new BufferedImage(3000, 100, BufferedImage.TYPE_INT_RGB);

        private int width = 0;

        private int lastY = 50;

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);

            if (width > 0) {
                BufferedImage sub = buffer.getSubimage(0, 0, width, buffer.getHeight());
                g.drawImage(sub, 0, Math.max(0, (getHeight() - buffer.getHeight()) / 2), this);
            }

        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(width, 100);
        }

        protected void drawSomething() {
            // Here need to handle growing image
            Graphics g = buffer.getGraphics();
            g.setColor(Color.GREEN);
            int y = new Random().nextInt(buffer.getHeight());
            g.drawLine(width, lastY, width + 1, y);
            lastY = y;
            width += 1;
            Rectangle r = new Rectangle();
            r.x = getWidth();
                    // Lame hack to auto-scroll to the end
            scrollRectToVisible(r);
            revalidate();
            repaint();
        }
    }

    protected void initUI() {
        JFrame frame = new JFrame(TestRecording.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final MyPanel p = new MyPanel();
        JScrollPane scrollpane = new JScrollPane(p);
        frame.add(scrollpane);
        frame.setSize(400, 200);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
        Timer t = new Timer(20, new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                p.drawSomething();
            }
        });
        t.start();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TestRecording().initUI();
            }
        });
    }
} 
```

结果如下：

![结果](../Images/14ffd17b1ae0d4e7a2558b6554bee84f.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T15:58:15.057

可能只是缩放原始图像以获得所需的大小。

`Image`有`getScaledInstance(int width, int height, int hints)`方法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T16:20:22.447

您是否有 1）在哪里绘制它的 gui，或者 2）您是否需要真正输出图像文件（或流）？

如果 1) 只画所见。扩展 JComponent，我通常使用 JPanel 并覆盖 paintComponent 并绘制可见的内容。为了提高效率，请创建“图块” - 例如列表。恒定宽度的 BufferedImage 并从传入数据创建它们并仅将它们绘制到 gui。

2）类似的东西，但你可以使用一个宽度相对较低的图像并为其绘制新数据。满时，将其“附加”到目前创建的“左”图像（最初为空）。这样你经常修改小图像和不那么频繁的大图像。如果在填充整个右侧图像之前结束，则仅将填充的部分与左侧连接。

您可以尝试逐渐增加右图像的大小（*X，例如 *1.5 或 *2）以减少加入图像的数量，但会以使用更多内存为代价。

您可以将这些“图像”存储为字节（或 int）数组（表示 2D 的一维数组，但按列存储，而不是按行存储以进行更有效的修改），这样如果您知道需要，您可以更有效地存储它每像素一些不寻常的位数，因为某些颜色永远不会出现在结果图像中。

如果图像太大，请将其保存到磁盘并清除左侧图像，然后将它们组合在一起或单独使用。

# arm - Zedboard 上的随机数生成器 (Xilinx Zynq-7020)

> ID：14218843
> 
> 赞同：1
> 
> 时间：2013-01-08T15:50:27.560
> 
> 标签：arm, fpga, zynq

我想知道在具有 ARM 处理器和 FPGA 的 zedboard（Xilinx Zynq-7020）上生成随机数的最快方法是什么，据我了解，两者都可以做到这一点。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T02:45:17.790

如果您正在开发仅 FPGA 或裸机应用程序 + FPGA 项目，我将在 FPGA 中生成（伪）随机数。如果您使用 Linux 并构建嵌入式应用程序 + FPGA，我会在软件中生成数字。

如果您在 FPGA 中生成数字，那么您可以使用 Xilinx ISE 内置的代码模板！很可能您正在使用 ISE，因为我怀疑还有其他东西支持 Zynq。

像这样在 ISE 中生成 LFSR：从顶部的菜单中：编辑 -> 语言模板。在语言模板树视图中：（VHDL 或 Verilog）-> 综合构造 -> 编码示例 -> 计数器 -> LFSR。4 个模板之一是 32 位。您需要提供种子编号和时钟线。

如果您从 Linux 应用程序生成随机数，那么肯定有很多不同的方法可以做到这一点。在 C 应用程序中，cstdlib 中有一个 rand 函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T16:00:48.777

您可能正在寻找“线性反馈移位寄存器”或 LFSR。快速的互联网搜索将为您提供详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T12:51:14.803

线性反馈移位寄存器无疑是生成随机数的最简单方法。查看此文档：[http](http://www.xilinx.com/support/documentation/application_notes/xapp052.pdf) ://www.xilinx.com/support/documentation/application_notes/xapp052.pdf 您需要的一切都在那里。

# java - 是否有类似于 Android API 的基于事件的 Java Web 框架？

> ID：14218847
> 
> 赞同：0
> 
> 时间：2013-01-08T15:50:35.543
> 
> 标签：java, android, web-applications

如问题中所述，我正在寻找基于 Java（希望不需要完整的应用程序服务器）基于事件的 Web 应用程序开发框架。

我试过 Vaadin，它让我发疯。ZK 框架看起来很有趣，但它相当复杂，而且我所知道的复杂 MVVC 应用程序没有很好的例子，尽管 MVVC 是这个框架中的“必经之路”。

最好，我正在寻找的框架尽可能类似于 Android API，因为 API 设计得非常好，并且可以用它构建非常复杂的应用程序（即 CRUD 中的 CRUD 接口，CRUD 中的，一切都按预期工作）。

我们需要的另一件事是该框架不仅可以用于构建业务应用程序，还可以在其之上构建 Web 前端（即使需要特殊的控件/小部件）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:12:13.053

你可以试试 GWT。Google Web 工具包是使用 Java 作为开发语言和 Eclipse 作为 IDE 创建富 Web 应用程序的强大工具。GWT 提供跨浏览器能力和样板代码，因此很容易带来丰富的基于 AJAX 的小部件。当您确实需要客户端上的丰富行为功能（类似 GMail 的应用程序）时，GWT 非常有用。

它适用于 CRUD 操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T08:22:31.253

如果您想避免使用“仅服务器端”框架，您可能还需要查看 Apache Wicket 作为 JSF 的替代方案

# gzip - ScalatraServlet 与 AkkaSupport 与 GZipSupport

> ID：14218851
> 
> 赞同：0
> 
> 时间：2013-01-08T15:50:45.167
> 
> 标签：gzip, akka, scalatra

我正在尝试将 Scalatra 与 AkkaSupport 和新引入的 (2.2.0 RC2) GZipSupport 一起使用。它失败了，在我提交错误报告之前，我试图弄清楚我是否做错了什么。该代码是默认的 Scalatra/Akka 示例，包括 GZipSupport 特征：

```
package com.myapp

import _root_.akka.dispatch._
import _root_.akka.actor._

import org.scalatra._
import org.scalatra.akka.AkkaSupport

class myappServlet extends ScalatraServlet with AkkaSupport with GZipSupport {
  implicit val system = ActorSystem()

  get("/"){
    Future {
      <html><body>Hello Akka</body></html>
    }
  }
} 
```

我得到以下堆栈跟踪：

```
[ERROR] [01/08/2013 17:41:42.274] [default-akka.actor.default-dispatcher-2] [akka.dispatch.Dispatcher] STREAM
    java.lang.IllegalStateException: STREAM
at org.eclipse.jetty.server.Response.getWriter(Response.java:699)
at org.scalatra.servlet.RichResponse.writer(RichResponse.scala:80)
at org.scalatra.ScalatraBase$$anonfun$renderPipeline$1.apply(ScalatraBase.scala:301)
at scala.PartialFunction$$anon$3.apply(PartialFunction.scala:97)
at scala.PartialFunction$$anon$3.apply(PartialFunction.scala:96)
at org.scalatra.ScalatraBase$class.loop$1(ScalatraBase.scala:275)
at org.scalatra.ScalatraBase$class.renderResponseBody(ScalatraBase.scala:277)
at org.scalatra.ScalatraServlet.renderResponseBody(ScalatraServlet.scala:50)
at org.scalatra.ScalatraBase$class.renderResponse(ScalatraBase.scala:245)
at com.myapp.myappServlet.org$scalatra$akka$AkkaSupport$$super$renderResponse(triptaoServlet.scala:9)
at org.scalatra.akka.AkkaSupport$$anonfun$renderResponse$1$$anonfun$apply$1.apply(AkkaSupport.scala:61)
at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57)
at org.scalatra.DynamicScope$class.withResponse(DynamicScope.scala:50)
at org.scalatra.ScalatraServlet.withResponse(ScalatraServlet.scala:50)
at org.scalatra.servlet.AsyncSupport$$anonfun$withinAsyncContext$1.apply(AsyncSupport.scala:25)
at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57)
at org.scalatra.DynamicScope$class.withRequest(DynamicScope.scala:41)
at org.scalatra.ScalatraServlet.withRequest(ScalatraServlet.scala:50)
at org.scalatra.servlet.AsyncSupport$class.withinAsyncContext(AsyncSupport.scala:24)
at com.myapp.myappServlet.withinAsyncContext(triptaoServlet.scala:9)
at org.scalatra.akka.AkkaSupport$$anonfun$renderResponse$1.apply(AkkaSupport.scala:58)
at org.scalatra.akka.AkkaSupport$$anonfun$renderResponse$1.apply(AkkaSupport.scala:56)
at akka.dispatch.Future$$anonfun$onSuccess$1.apply(Future.scala:484)
at akka.dispatch.Future$$anonfun$onSuccess$1.apply(Future.scala:483)
at akka.dispatch.DefaultPromise.akka$dispatch$DefaultPromise$$notifyCompleted(Future.scala:943)
at akka.dispatch.DefaultPromise$$anonfun$onComplete$1.apply$mcV$sp(Future.scala:937)
at akka.dispatch.Future$$anon$4$$anonfun$run$1.apply$mcV$sp(Future.scala:386)
at akka.dispatch.Future$$anon$4$$anonfun$run$1.apply(Future.scala:378)
at akka.dispatch.Future$$anon$4$$anonfun$run$1.apply(Future.scala:378)
at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57)
at akka.dispatch.Future$$anon$4.run(Future.scala:378)
at akka.dispatch.TaskInvocation.run(AbstractDispatcher.scala:94)
at akka.jsr166y.ForkJoinTask$AdaptedRunnableAction.exec(ForkJoinTask.java:1381)
at akka.jsr166y.ForkJoinTask.doExec(ForkJoinTask.java:259)
at akka.jsr166y.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:975)
at akka.jsr166y.ForkJoinPool.runWorker(ForkJoinPool.java:1479)
at akka.jsr166y.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:104) 
```

这是一些错误还是我错过了什么？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T21:58:54.370

这是一个被核心 Scalatra 开发人员承认的错误，它在 v2.2.1 中被宣布为修复。

# c# - 布尔数组的值

> ID：14218855
> 
> 赞同：2
> 
> 时间：2013-01-08T15:50:58.520
> 
> 标签：c#

有什么方法可以检查布尔数组是否只包含真（或假）值，或者我需要像这样逐个检查它

```
for (int k = 0; k < 9; k++)
{
   if (CheckPart[k] == false) Checked = false;
} 
```

我知道这很简单并且有效，但只是出于好奇。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T15:52:01.223

如果所有元素都为真，则以下将返回真，否则将返回假：

```
var Checked = CheckedPart.All(p => p); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-08T15:52:20.117

怎么样[`Enumerable.All<TSource>`](http://msdn.microsoft.com/en-us/library/bb548541.aspx)？这返回`boolean`

```
bool Checked = CheckPart.All(p => p); 
```

> 确定序列的所有元素是否满足条件。此方法不会返回集合的所有元素。相反，它确定集合的所有元素是否满足条件。

这里有一个[`Demo`](http://ideone.com/cyi7tJ)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-08T15:52:08.817

只需使用 LINQ。

```
Checked = CheckedPart.All(x => x); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T15:52:23.643

```
if(CheckPart.Any(q => q == false))
   Checked = false; 
```

甚至更简单：

```
Checked = !CheckPart.Any(q => q == false); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T15:53:28.290

替代方法（没有 LINQ）：

```
Boolean allAreTrue = true;
for (var i = 0; i < CheckPart.Length && allAreTrue; i++){
  allAreTrue &= CheckPart[i];
} 
```

或者，使用扩展方法：

```
public static class BooleanExtender
{
    public static Boolean AllAreFalse(this Boolean[] items)
    {
        for (var i = 0; i < items.Length; i++)
            if (items[i]) return false;
        return true;
    }

    public static Boolean AllAreTrue(this Boolean[] items)
    {
        for (var i = 0; i < items.Length; i++)
            if (!items[i]) return false;
        return true;
    }
}

new Boolean[]{ ... }.AllAreTrue();
new Boolean[]{ ... }.AllAreFalse(); 
```

# ios - 获取所有连接到视图的 segue

> ID：14218860
> 
> 赞同：1
> 
> 时间：2013-01-08T15:51:11.007
> 
> 标签：ios, uigesturerecognizer, uistoryboardsegue

我的 segues 标识符包含用于查询数据库的数据。我的问题是，在加载视图后，我需要循环浏览连接到视图的所有 segue，以查看是否遵循该 segue 会导致有意义的结果（如果数据库中会有任何命中）。segues 连接到抽头识别器。

我如何四处寻找与视图相关的所有segue？从这个视图中是否也很容易获得它的标识符？

# c# - http.cache 与 EnterpriseLibrary.cache

> ID：14218866
> 
> 赞同：0
> 
> 时间：2013-01-08T15:51:29.010
> 
> 标签：c#, asp.net-mvc, caching, enterprise-library

我想重构一些现有的代码。

一个有两个动作的控制器。

每个操作调用一个存储库，该存储库位于 StronglyTyped 企业库缓存管理器之上。

存储库尝试从缓存中获取数据。如果失败，它将从数据库中获取并将其保存在缓存中。

1）您是否会将两个缓存组合成一个（非）强类型缓存，并由两个消费者处理强类型的强制转换？

2）每个FW的优缺点是什么？http.cache 与 EnterpriseLibrary.cache

还有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T17:06:30.963

企业库缓存需要更多的工作。它意味着更多的包罗万象。asp.net 缓存是特定于 asp.net 的，并且有很多您需要的功能已经内置（但它是特定于 asp.net）。一个具体示例是 ASP.NET 缓存将按原样区分会话。您必须自定义实现逻辑以区分会话缓存和企业库缓存。

现在到你的具体问题。asp.net 缓存并不是真正为 Web 场场景设计的。你在网络农场吗？我问的原因，听起来好像从您的问题来看，他们创建的提供程序可能正在访问某种缓存服务器。

# java - org.springframework.web.bind.MissingServletRequestParameterException

> ID：14218868
> 
> 赞同：2
> 
> 时间：2013-01-08T15:51:36.327
> 
> 标签：java, json, spring, spring-mvc, angularjs

向服务器端发布调用时面临问题

异常堆栈跟踪：

```
"org.springframework.web.bind.MissingServletRequestParameterException: Required int parameter 'answerId' is not present\r\n\tat org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter$ServletHandlerMethodInvoker.raiseMissingParameterException(AnnotationMethodHandlerAdapter.java:773)\r\n\tat org.springframework.web.bind.annotation.support.HandlerMethodInvoker.resolveRequestParam(HandlerMethodInvoker.java:509) 
```

Javascript 调用`controller.js`

```
$scope.saveCorrectAnswer = function(answerId) {

        var answerIdVal = 0;
        answerIdVal = answerId;
        if(document.getElementById(answerId).className == 'ico-white-check') {
            $scope.answer.correct = 'Y';
        } else{
            $scope.answer.correct = 'N';
        }

        Answer.update({answerId: answerIdVal, correct: $scope.answer.correct}, function(response) {
            // On success go to Exchange
            //$route.reload();
        }, 
```

java中服务控制器中的映射：

```
@RequestMapping(method = RequestMethod.PUT, consumes = "application/json", produces = "application/json")
@ResponseBody
public void addCorrectAnswer(@RequestParam int answerId, @RequestParam String correct) {

    getAnswerDAC().addCorrectAnswer(answerId, correct);

} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-08T18:39:37.647

@RequestParam 有一个**`required`**默认为 true 的属性。如果不需要 answerId，请按如下方式更改注解和参数类型...

```
@RequestMapping(method = RequestMethod.PUT, consumes = "application/json", produces = "application/json")
@ResponseBody
public void addCorrectAnswer(@RequestParam(required = false) Integer answerId, @RequestParam String correct) {
     getAnswerDAC().addCorrectAnswer(answerId, correct);
} 
```

编辑：由于 answerId 在您的示例中是一个原始值，因此您还需要在注释中提供 defaultValue 。提供 defaultValue 隐式地将 required 设置为 false，所以我将把它排除在示例之外......

```
@RequestMapping(method = RequestMethod.PUT, consumes = "application/json", produces = "application/json")
@ResponseBody
public void addCorrectAnswer(@RequestParam(defaultValue = 0) int answerId, @RequestParam String correct) {
     getAnswerDAC().addCorrectAnswer(answerId, correct);
} 
```

希望这可以帮助

# c++ - 一个数字，因为它是质数部分

> ID：14218882
> 
> 赞同：5
> 
> 时间：2013-01-08T15:52:24.330
> 
> 标签：c++, algorithm, primes

我必须打印出可以表示给定数字的方式数量，因为它是质数部分。

让我澄清一下：假设我得到了这个数字 7。现在，首先，我必须找到所有小于 7 的素数，即 2、3 和 5。现在，我可以有多少种方式总结这些数字（我可以多次使用一个数字）以使结果等于 7？例如，数字 7 有五种方式：

```
2 + 2 + 3
2 + 3 + 2
2 + 5
3 + 2 + 2
5 + 2 
```

我完全迷失了这项任务。首先，我想我会制作一个可用元素的数组，如下所示： { 2, 2, 2, 3, 3, 5 } (7/2 = 3, 所以 2 必须出现 3 次。3 也是如此，它有两个发生）。之后，遍历数组并选择一个“领导者”来确定我们在数组中的距离。我知道这个解释很糟糕，所以这里是代码：

```
#include <iostream>
#include <vector>

int primes_all[25] = {2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97};

int main()
{
    int number;
    std::cin >> number;

    std::vector<int> primes_used;

    for(int i = 0; i < 25; i++) {
        if(primes_all[i] < number && number-primes_all[i] > 1) {
            for(int k = 0; k < number/primes_all[i]; k++)
                primes_used.push_back(primes_all[i]);
        }
        else break;
    }

    int result = 0;

    for(size_t i = 0; i < primes_used.size(); i++) {
        int j = primes_used.size()-1;
        int new_num = number - primes_used[i];

        while(new_num > 1 && j > -1)
        {
            if(j > -1) while(primes_used[j] > new_num && j > 0) j--;

            if(j != i && j > -1) {
                new_num -= primes_used[j];

                std::cout << primes_used[i] << " " << primes_used[j] << " " << new_num << std::endl;
            }

            j--;
        }

        if(new_num == 0) result++;
    }

    std::cout << result << std::endl;

    system("pause");
    return 0;
} 
```

这根本行不通。只是因为它背后的想法是错误的。以下是有关限制的一些细节：

*   时间限制：1秒
*   内存限制：128 MB

此外，可以给出的最大数字是 100。这就是为什么我将素数数组设置为低于 100。随着给定数字变大，结果增长得非常快，稍后将需要一个 BigInteger 类，但这不是问题.

已知的几个结果：

```
Input    Result

7        5
20       732
80       10343662267187 
```

所以...有什么想法吗？这是一个组合问题吗？我不需要代码，只是一个想法。我仍然是 C++ 的新手，但我会管理

* * *

请记住，3 + 2 + 2 与 2 + 3 + 2 不同。此外，如果给定的数字本身就是质数，则不会被计算在内。例如，如果给定的数字是 7，那么只有这些和是有效的：

```
2 + 2 + 3
2 + 3 + 2
2 + 5
3 + 2 + 2
5 + 2
7 <= excluded 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T15:55:50.893

动态编程是你的朋友。

考虑数字 27。

如果 7 有 5 个结果，而 20 有 732 个结果，那么您知道 27 至少有 (732 * 5) 个结果。您可以随时使用预先计算的值来使用两个变量系统（1 + 26、2 + 25 ... 等）。您不必重新计算 25 或 26，因为您已经计算过了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T16:07:09.820

您正在搜索的概念是数字的“主要分区”。一个数的 S 分区是一种将数相加达到目标的方式；例如，1+1+2+3 是 7 的分区。如果所有加数都是素数，则该分区是素数分区。

我认为你的例子是错误的。数字 7 通常被认为有 3 个素数分区：2+2+3、2+5 和 7。加数的顺序无关紧要。在数论中，计算素数分区的函数是 kappa，所以我们会说 kappa(7) = 3。

kappa 的通常计算分两部分进行。第一部分是计算一个数的质因数之和的函数；例如，42=2·3·7，所以 sopf(42)=12。请注意，sopf(12)=5 因为总和仅超过一个数的不同因数，所以即使 12=2·2·3，也只有一个 2 包含在总和的计算中。

给定 sopf，计算 kappa 的公式很长；我会以 LaTeX 形式给出，因为我不知道如何在这里输入： \kappa(n) = \frac{1}{n}\left(\mathrm{sopf}(n) + \sum_{ j=1}^{n-1} \mathrm{sopf}(j) \cdot \kappa(nj)\right)。

如果你真的想要一个分区列表，而不仅仅是计数，@corsiKa 指出了一个动态编程解决方案。

[我在我的博客](http://programmingpraxis.com/2012/10/19/prime-partitions/)中更详细地讨论了主要分区，包括生成计数和列表的源代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T06:16:41.200

这是一个有效的实现，它使用 corsiKa 建议的动态编程，但不使用他描述的算法。

简单地说：如果`n`可以通过`k`不同的路径（包括单步路径，如果它存在）到达，并且`p`是素数，那么我们通过附加到所有路径来构造`k`路径。考虑到所有这些将产生一个详尽的有效路径列表。所以我们只是总结了如此发现的路径的数量。`n+p``p``n``n < N``N`

```
#include <iostream>

int primes_all[] = {2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97};

const int N_max = 85;
typedef long long ways;
ways ways_to_reach_N[N_max + 1] = { 1 };

int main()
{
    // find all paths
    for( int i = 0; i <= N_max; ++i ) {
        ways ways_to_reach_i = ways_to_reach_N[i];

        if (ways_to_reach_i) {
            for( int* p = primes_all; *p <= N_max - i && p < (&primes_all)[1]; ++p ) {
                ways_to_reach_N[i + *p] += ways_to_reach_i;
            }
        }
    }

    // eliminate single-step paths
    for( int* p = primes_all; *p <= N_max && p < (&primes_all)[1]; ++p ) {
        --ways_to_reach_N[*p];
    }

    // print results
    for( int i = 1; i <= N_max; ++i ) {
        ways ways_to_reach_i = ways_to_reach_N[i];

        if (ways_to_reach_i) {
            std::cout << i << " -- " << ways_to_reach_i << std::endl;
        }
    }

    return 0;
} 
```

*   演示：http: [//ideone.com/xWZT8v](http://ideone.com/xWZT8v)

将 typedef 替换`ways`为大整数类型留给读者作为练习。

# ruby-on-rails-3 - 有没有办法在生产过程中生成我们日志中发生的错误报告？Rails 3 应用程序

> ID：14218885
> 
> 赞同：0
> 
> 时间：2013-01-08T15:52:38.010
> 
> 标签：ruby-on-rails-3

似乎几乎不可能每天早上通读生产应用程序的日志来搜索错误以及发生这些错误的行。有没有我可以使用的东西，它会自动为我生成一份每日报告，说明我的应用程序中发生的任何错误以及这些错误的位置。我可以每天早上回顾一些东西而不会占用太多时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:33:12.413

我建议选择可以报告和汇总错误的服务等。有很多选择。我个人将errbit（免费，自托管）与airbrake gem（可以配置为使用它）结合使用。或者您可以注册 Airbrake 本身。或使用 Exceptional.io 或其他服务之一。

*   [https://github.com/errbit/errbit](https://github.com/errbit/errbit)
*   [https://airbrakeapp.com/pages/home](https://airbrakeapp.com/pages/home)
*   [http://www.exceptional.io/](http://www.exceptional.io/)
*   [http://newrelic.com/](http://newrelic.com/)
*   [https://www.ruby-toolbox.com/categories/exception_notification](https://www.ruby-toolbox.com/categories/exception_notification)

# ruby-on-rails - 多模型表单，使用 build 将新表单放在列表顶部

> ID：14218887
> 
> 赞同：1
> 
> 时间：2013-01-08T15:52:46.140
> 
> 标签：ruby-on-rails, ruby-on-rails-3

所以我[遵循 rails guide](http://guides.rubyonrails.org/getting_started.html#building-a-multi-model-form)，我创建了一个嵌套记录表单，huzzah，但我想知道如何让新表单出现在列表的顶部而不是底部。现在，当我每次提交表单时，嵌套模型的新空白表单都会放在列表的底部。我怎样才能让它出现在顶部？

编辑代码基本相同：

```
<% @post.tags.build %>
<%= form_for(@post) do |post_form| %>
  field 1
  field 2
  field 3
...
  <%= form.fields_for :tags do |tag_form| %>
       ...
       ...
    <%end %>
<%end %> 
```

产生了

```
 Post Field 1
   Post Field 2
   Post Field 3

    TAGS
      previously created record 1
      previously created record 2
      previously created record 3
      ...
      Blank form! 
```

但我希望我的嵌套 for 看起来像：

```
 Post Field 1
       Post Field 2
       Post Field 3

        TAGS
          Blank form!
          previously created record 1
          previously created record 2
          previously created record 3
          ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:23:37.090

这是一个假设，但我相信这是因为`@post.tags.build`将在当前存储记录的末尾添加一条新记录。您也许可以执行以下操作：

```
<% tags = [@post.tags.build] << @post.tags %>
[...]
<%= form.fields_for :tags, tags do |tag_form| %>
    [...] 
```

这种方式`fields_for`使用我们将新标签放在最前面的修改后的数组。

注意：我尚未对此进行测试，因此对于任何错误我深表歉意。我还删除了不需要更改的部分。

# jasper-reports - iReport 4.1.3：无法在 Win7 中将 jar 和文件夹添加到类路径

> ID：14218892
> 
> 赞同：0
> 
> 时间：2013-01-08T15:53:03.603
> 
> 标签：jasper-reports, ireport

我在 Windows 7 中使用 Java 5 运行 iReport 4.1.3。它曾经与 XP 完美运行。现在，当我尝试添加罐子或文件夹时，它会在日志中抛出 ArrayIndexOutOfBoundsException 。Win7是否存在兼容性问题。

我可以在不使用 GUI 的情况下修改软件中的类路径文件吗？任何指针都会有所帮助。谢谢。

这是日志：

```
 java.lang.ArrayIndexOutOfBoundsException: 3184
    at sun.awt.shell.Win32ShellFolder2.getFileChooserIcon(Win32ShellFolder2.java:748)
    at sun.awt.shell.Win32ShellFolderManager2.get(Win32ShellFolderManager2.java:248)
    at sun.awt.shell.ShellFolder.get(ShellFolder.java:221)
    at com.sun.java.swing.plaf.windows.WindowsLookAndFeel$LazyWindowsIcon.createValue(WindowsLookAndFeel.java:1873)
    at javax.swing.UIDefaults.getFromHashtable(UIDefaults.java:185)
    at javax.swing.UIDefaults.get(UIDefaults.java:130)
    at javax.swing.MultiUIDefaults.get(MultiUIDefaults.java:44)
    at javax.swing.UIDefaults.getIcon(UIDefaults.java:411)
    at javax.swing.UIManager.getIcon(UIManager.java:613)
    at javax.swing.plaf.basic.BasicFileChooserUI.installIcons(BasicFileChooserUI.java:237)
    at javax.swing.plaf.basic.BasicFileChooserUI.installDefaults(BasicFileChooserUI.java:219)
    at javax.swing.plaf.basic.BasicFileChooserUI.installUI(BasicFileChooserUI.java:135)
    at com.sun.java.swing.plaf.windows.WindowsFileChooserUI.installUI(WindowsFileChooserUI.java:126)
    at javax.swing.JComponent.setUI(JComponent.java:653)
    at javax.swing.JFileChooser.updateUI(JFileChooser.java:1755)
    at javax.swing.JFileChooser.setup(JFileChooser.java:366)
    at javax.swing.JFileChooser.<init>(JFileChooser.java:341)
    at javax.swing.JFileChooser.<init>(JFileChooser.java:300)
    at com.jaspersoft.ireport.designer.options.IReportPanel.jButtonAddClasspathItemActionPerformed(IReportPanel.java:2216)
    at com.jaspersoft.ireport.designer.options.IReportPanel.access$2000(IReportPanel.java:84)
    at com.jaspersoft.ireport.designer.options.IReportPanel$27.actionPerformed(IReportPanel.java:938)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1849)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2169)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:420)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:258)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
    at java.awt.Component.processMouseEvent(Component.java:5501)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3135)
    at java.awt.Component.processEvent(Component.java:5266)
    at java.awt.Container.processEvent(Container.java:1966)
    at java.awt.Component.dispatchEventImpl(Component.java:3968)
    at java.awt.Container.dispatchEventImpl(Container.java:2024)
    at java.awt.Component.dispatchEvent(Component.java:3803)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4212)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:3892)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:3822)
    at java.awt.Container.dispatchEventImpl(Container.java:2010)
    at java.awt.Window.dispatchEventImpl(Window.java:1778)
    at java.awt.Component.dispatchEvent(Component.java:3803)
[catch] at java.awt.EventQueue.dispatchEvent(EventQueue.java:463)
    at org.netbeans.core.TimableEventQueue.dispatchEvent(TimableEventQueue.java:104)
    at java.awt.EventDispatchThread.pumpOneEventForHierarchy(EventDispatchThread.java:242)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:157)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:149)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:110) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T17:05:24.290

看来jdk5有问题。更新到 jdk7 工作。链接在这里

[http://community.jaspersoft.com/questions/531699/unable-add-folder-options-classpath](http://community.jaspersoft.com/questions/531699/unable-add-folder-options-classpath)

# swing - 我可以使用 setValueAt() 更新 TableModel，但更改在表中不可见

> ID：14218893
> 
> 赞同：0
> 
> 时间：2013-01-08T15:53:04.370
> 
> 标签：swing, jtable, tablemodel

我可以使用 setValueAt() 更新 TableModel，但在下表中看不到更改是代码：

```
 import javax.swing.JFrame;
    import javax.swing.JDialog;
    import javax.swing.JPanel;
    import javax.swing.JScrollPane;
    import javax.swing.JTable;
    import javax.swing.table.AbstractTableModel;
    import java.awt.Dimension;
    import java.awt.GridLayout;

public class TableFTFEditDemo extends JPanel {
private boolean DEBUG = true;
JTable table;
MyTableModel tableModel=new MyTableModel();

public TableFTFEditDemo() {
    super(new GridLayout(1,0));

    table = new JTable(tableModel);
    table.setPreferredScrollableViewportSize(new Dimension(500, 70));
    table.setFillsViewportHeight(true);

    //Create the scroll pane and add the table to it.
    JScrollPane scrollPane = new JScrollPane(table);

    //Set up stricter input validation for the integer column.
    table.setDefaultEditor(Integer.class,
                           new IntegerEditor(0, 100));

//If we didn't want this editor to be used for other
//Integer columns, we'd do this:
//table.getColumnModel().getColumn(3).setCellEditor(
//  new IntegerEditor(0, 100));

    //Add the scroll pane to this panel.
    add(scrollPane);
}

class MyTableModel extends AbstractTableModel {
    private String[] columnNames ;
    private Object[][] data; 
    MyTableModel(){
    columnNames=new String[] {"First Name","Last Name","Sport","# of Seaters","Vegetarian","blank"};
    data=new Object[][] {
            {"Kathy", "Smith",
            "Snowboarding", new Integer(5), new Boolean(false),"sdf"},
            {"John", "Doe",
            "Rowing", new Integer(3), new Boolean(true),"reytry"},
            {"Sue", "Black",
            "Knitting", new Integer(2), new Boolean(false),"wwttu"},
            {"Jane", "White",
            "Speed reading", new Integer(20), new Boolean(true),"yuiyio"},
            {"Joe", "Brown",
            "Pool", new Integer(10), new Boolean(false),"ertey"}
    };
}
    public int getColumnCount() {
        return columnNames.length;
    }

    public int getRowCount() {
        return data.length;
    }

    public String getColumnName(int col) {
        return columnNames[col];
    }

    public Object getValueAt(int row, int col) {
        return data[row][col];
    }

    /*
     * JTable uses this method to determine the default renderer/
     * editor for each cell.  If we didn't implement this method,
     * then the last column would contain text ("true"/"false"),
     * rather than a check box.
     */
    public Class getColumnClass(int c) {
        return getValueAt(0, c).getClass();
    }

    public boolean isCellEditable(int row, int col) {
        //Note that the data/cell address is constant,
        //no matter where the cell appears onscreen.
        if (col < 2) {
            return false;
        } else {
            return true;
        }
    }

    public void setValueAt(Object value, int row, int col) {
        if (DEBUG) {
            System.out.println("Setting value at " + row + "," + col
                               + " to " + value
                               + " (an instance of "
                               + value.getClass() + ")");
        }

        data[row][col] = value;
        this.fireTableCellUpdated(row,col);

        if (DEBUG) {
            System.out.println("New value of data:");
            printDebugData();
        }
    }

    private void printDebugData() {
        int numRows = getRowCount();
        int numCols = getColumnCount();

        for (int i=0; i < numRows; i++) {
            System.out.print("    row " + i + ":");
            for (int j=0; j < numCols; j++) {
                System.out.print("  " + data[i][j]);
            }
            System.out.println();
        }
        System.out.println("--------------------------");
    }
}

/**
 * Create the GUI and show it.  For thread safety,
 * this method should be invoked from the
 * event-dispatching thread.
 */
private static void createAndShowGUI() {
    //Create and set up the window.
    JFrame frame = new JFrame("TableFTFEditDemo");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    //Create and set up the content pane.
    TableFTFEditDemo newContentPane = new TableFTFEditDemo();
    newContentPane.setOpaque(true); //content panes must be opaque
    frame.setContentPane(newContentPane);

    //Display the window.
    frame.pack();
    frame.setVisible(true);
}

public static void main(String[] args) {
    //Schedule a job for the event-dispatching thread:
    //creating and showing this application's GUI.
    javax.swing.SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            createAndShowGUI();
        }
    });
}
void runtable(){

    javax.swing.SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            createAndShowGUI();
            tableModel.setValueAt(new Integer(5),2,5); 
     ((AbstractTableModel)table.getModel()).fireTableCellUpdated(2,5);
        }
    });
}
 /** using this to call setValueAt from other classes*/
public void setValueAt1(Object value, int row, int col) {
     table.setValueAt(new Integer(5),row,col); 
     ((AbstractTableModel)table.getModel()).fireTableCellUpdated(row,col);   
    }
 } 
```

PS：代码取自oracle'示例..我只想知道如何在表格中反映tablemodel中所做的更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:11:48.773

您的代码按预期工作，只是您实际上并没有调用`setValueAt()`您的模型。你做的 runtable() 方法永远不会被调用。

要验证，请更改`createAndShowGUI()`为返回`newContentPane`并使用以下主要内容：

```
 static TableFTFEditDemo instance;

    public static void main(String[] args) throws Exception {
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            instance = createAndShowGUI();
        }
    });
    Thread.sleep(5000);
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            instance.tableModel.setValueAt(5, 2, 5);
        }
    });
} 
```

![截屏](../Images/00efad0559cdeede09be37f13cdc5b1f.png)

经过编程的五秒延迟后，第 2 列第 5 行的值将从“wwtu”变为“5”。

# c++ - 两个日期之间的天数 C++

> ID：14218894
> 
> 赞同：22
> 
> 时间：2013-01-08T15:53:04.857
> 
> 标签：c++, date, date-arithmetic

我看到了 C#、Java 的示例，但对于 C++，我找不到计算两个日期之间多少天的解决方案。

例如在 2012-01-24 和 2013-01-08 之间

谢谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-08T15:58:39.333

这是一种方式。

```
#include <iostream>
#include <ctime>

int main()
{
    struct std::tm a = {0,0,0,24,5,104}; /* June 24, 2004 */
    struct std::tm b = {0,0,0,5,6,104}; /* July 5, 2004 */
    std::time_t x = std::mktime(&a);
    std::time_t y = std::mktime(&b);
    if ( x != (std::time_t)(-1) && y != (std::time_t)(-1) )
    {
        double difference = std::difftime(y, x) / (60 * 60 * 24);
        std::cout << std::ctime(&x);
        std::cout << std::ctime(&y);
        std::cout << "difference = " << difference << " days" << std::endl;
    }
    return 0;
} 
```

## 我的输出

```
Thu Jun 24 01:00:00 2004
Mon Jul 05 01:00:00 2004
difference = 11 days 
```

[**这是原始作者帖子的参考**](http://www.daniweb.com/software-development/cpp/threads/7813/date-difference-in-c)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-08T21:20:13.787

将您的日期转换为整数，表示自一个纪元以来的天数，然后减去。在这个例子中我选择了[Rata Die](http://en.wikipedia.org/wiki/Rata_Die)，算法的解释可以在 < [http://mysite.verizon.net/aesir_research/date/rata.htm](http://mysite.verizon.net/aesir_research/date/rata.htm) > 找到。

```
int
rdn(int y, int m, int d) { /* Rata Die day one is 0001-01-01 */
    if (m < 3)
        y--, m += 12;
    return 365*y + y/4 - y/100 + y/400 + (153*m - 457)/5 + d - 306;
}

int days = rdn(2013, 1, 8) - rdn(2012, 1, 24); 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2015-08-10T19:54:11.427

旧问题的新答案：

使用这个[C++11/C++14 仅标头日期库](http://howardhinnant.github.io/date/date.html)，您现在可以编写：

```
#include "date.h"
#include <iostream>

int
main()
{
    using namespace date;
    using namespace std;
    auto x = 2012_y/1/24;
    auto y = 2013_y/1/8;
    cout << x << '\n';
    cout << y << '\n';
    cout << "difference = " << (sys_days{y} - sys_days{x}).count() << " days\n";
} 
```

哪个输出：

```
2012-01-24
2013-01-08
difference = 350 days 
```

如果你不想依赖这个库，你可以编写自己的，使用与上述日期库相同的日期算法。它们可在本文中找到：[chrono-Compatible Low-Level Date Algorithms](http://howardhinnant.github.io/date_algorithms.html)。本例中使用的本文算法是这样的：

```
// Returns number of days since civil 1970-01-01\.  Negative values indicate
//    days prior to 1970-01-01.
// Preconditions:  y-m-d represents a date in the civil (Gregorian) calendar
//                 m is in [1, 12]
//                 d is in [1, last_day_of_month(y, m)]
//                 y is "approximately" in
//                   [numeric_limits<Int>::min()/366, numeric_limits<Int>::max()/366]
//                 Exact range of validity is:
//                 [civil_from_days(numeric_limits<Int>::min()),
//                  civil_from_days(numeric_limits<Int>::max()-719468)]
template <class Int>
constexpr
Int
days_from_civil(Int y, unsigned m, unsigned d) noexcept
{
    static_assert(std::numeric_limits<unsigned>::digits >= 18,
             "This algorithm has not been ported to a 16 bit unsigned integer");
    static_assert(std::numeric_limits<Int>::digits >= 20,
             "This algorithm has not been ported to a 16 bit signed integer");
    y -= m <= 2;
    const Int era = (y >= 0 ? y : y-399) / 400;
    const unsigned yoe = static_cast<unsigned>(y - era * 400);      // [0, 399]
    const unsigned doy = (153*(m + (m > 2 ? -3 : 9)) + 2)/5 + d-1;  // [0, 365]
    const unsigned doe = yoe * 365 + yoe/4 - yoe/100 + doy;         // [0, 146096]
    return era * 146097 + static_cast<Int>(doe) - 719468;
} 
```

有关此算法如何工作、对其进行单元测试及其有效性范围的详细信息，请参阅[chrono-Compatible Low-Level Date Algorithms 。](http://howardhinnant.github.io/date_algorithms.html)

该算法对预测的[公历](https://en.wikipedia.org/wiki/Proleptic_Gregorian_calendar)建模，它无限期地扩展公历，向前和向后。要对其他日历（例如儒略历）建模，您将需要其他算法，[例如此处所示的](http://howardhinnant.github.io/date_algorithms.html#Example:%20Converting%20between%20the%20civil%20calendar%20and%20the%20Julian%20calendar)算法。一旦你设置了其他日历，并同步到同一个序列纪元（这些算法使用 1970-01-01 Gregorian，这也是[Unix 时间](https://en.wikipedia.org/wiki/Unix_time)纪元），你可以轻松地计算不仅在任何两个日期之间的天数，还可以在您建模的任何两个日历之间。

这使您不必在从儒略到公历转换的日期中进行硬编码。您只需要知道您的输入数据是针对哪个日历引用的。

有时，历史文献中可能不明确的日期会用[旧样式/新样式](https://en.wikipedia.org/wiki/Old_Style_and_New_Style_dates#Differences_between_Julian_and_Gregorian_dates)进行注释，以分别表示儒略历或公历。

如果您还关心日期的时间，这个[相同的日期库](http://howardhinnant.github.io/date/date.html)与库无缝集成以`<chrono>`使用`hours`, `minutes`, `seconds`,和`milliseconds`,以及获取当前日期和时间。`microseconds``nanoseconds``system_clock::now()`

如果您关心时区，则在[日期库](http://howardhinnant.github.io/date/date.html)之上编写了一个额外的（单独的）[时区库](http://howardhinnant.github.io/date/tz.html)，以使用[IANA 时区数据库](http://www.iana.org/time-zones)处理时区。如果需要，[时区库](http://howardhinnant.github.io/date/tz.html)还具有计算功能，包括[闰秒](https://en.wikipedia.org/wiki/Leap_second)。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-01-08T15:55:44.637

你可以试试[boost date_time](http://www.boost.org/doc/libs/1_52_0/doc/html/date_time.html)库

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T21:53:37.010

为避免创建自己的函数，您可以使用Boost 中的**date_time**。

# python - Cygwin 在更新时总是将 Python 2.7 恢复为 Python 2.6

> ID：14218896
> 
> 赞同：2
> 
> 时间：2013-01-08T15:53:09.980
> 
> 标签：python, cygwin

所以我在cygwin中安装了python 2.7，它运行没有任何问题。但是，当我使用 cygwin 安装新包时`setup.exe`，它会默认为 python 包选择新版本 2.6.8，如果我不切换回 2.7.2，它将卸载 python 2.7 并安装 python 2.6。我的cygwin怎么了？有什么方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T10:24:22.033

Python 2.7.3 目前是实验性的；Cygwin 当前支持的 Python 版本是 2.6.8。每次运行 Cygwin 的 setup.exe 时，它​​都会发现您安装的 Python 版本不是最新的受支持版本，并尝试将您“升级”到该版本。

注意到您有意选择了一个包的实验版本，而不是将您“升级”到稳定版本，这对于 Cygwin 的 setup.exe 来说是一个不错的功能。可悲的是它没有；您只需要记住每次运行安装程序时都更改安装列表。

（虽然如果你喜欢它，我想 Cygwin 的 setup.exe 的这种增强会受到 Cygwin 社区的欢迎；这是一个开源项目，必须有人来做这项工作！）

Cygwin 的 Python 维护者 Jason Tishler 于 2012 年 12 月宣布了实验包。引用[他的电子邮件](http://cygwin.com/ml/cygwin/2012-12/msg00265.html)：

> 我将在 2013 年 2 月 1 日或前后更新 Cygwin 以使 2.7.3-1（或更高版本）成为最新版本。

如果您喜欢关注它们，该更改将在“cygwin”和“cygwin-announce”[邮件列表中公布。](http://cygwin.com/lists.html)一旦发生这种情况，安装程序将按照您的意愿工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T16:37:30.317

我想我已经弄清楚了问题所在。在包选择窗口中，包列表上方有三个选项，分别是`keep`、`Curr`和`Exp`。默认是`Curr`，这意味着 cygwin 将为每个选定的包选择最稳定的版本。在某种程度上，python 2.6.8-2 被认为比 2.7.3-1 更稳定，然后每次都选择 2.6 版本。唯一的方法是切换到`Keep`选项，但是我们也不会更新其他包。这很烦人。

# entity-framework - 没有key属性的复合PK

> ID：14218906
> 
> 赞同：3
> 
> 时间：2013-01-08T15:53:48.140
> 
> 标签：entity-framework, entity-framework-5, composite-primary-key

我在 EF5 项目的 Code First 中使用手动映射实体，并希望将 FK 用作复合 PK。我在映射类（不是 FK）中只有导航属性，如下所述：

```
class MyMapping
{
  public virtual Mapped1 {get;set;}
  public virtual Mapped2 {get;set;}
} 
```

我不想添加像'int Mapped1FK'/'int Mapped2FK'这样的字段，但在这种情况下我找不到如何指定复合键。

我认为它应该是这样的：

```
modelBuilder.Entity<MyMapping>()
  .HasKey(k => k.Mapped1)
  .HasKey(k => k.Mapped2); 
```

或者

```
modelBuilder.Entity<MyMapping>()
  .HasKey(k => { k.Mapped1, k.Mapped2} ); 
```

但我不知道究竟是什么权利。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:04:51.407

不能将导航属性用作主键属性（无论是否复合）。关键属性必须具有原始类型 - 例如`int`or`string`或`Guid`等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T10:51:03.853

正如 Slauma 所描述的，如果不引入原始 FK 属性，就不可能做我想做的事。

所以我决定像使用普通 POCO 一样使用我的映射实体 - 继承基类

```
public int Id {get;set;} 
```

声明并将其用作PK。

此外，在其他来源中，由于架构方面的原因，建议遵循以下原则：当您将简单映射 (2 FK) 转换为复杂映射 (2FK + 自定义字段) 时，它会像项目中的任何其他实体一样成为普通实体，并且应该具有相同的约束和结构。

# c# - 这个 Resharper 对已处置关闭警告的修复是否有意义？

> ID：14218907
> 
> 赞同：6
> 
> 时间：2013-01-08T15:53:59.677
> 
> 标签：c#, .net, closures, resharper

我正在努力摆脱静态代码分析中的一些警告。在一个特定情况下，没有对`ManualResetEvent`.

有问题的代码在`Func`主线程上执行 a 并将调用线程阻塞一定的毫秒数。我意识到这听起来很奇怪，但这超出了这个问题的范围，所以请耐心等待。

假设我添加`using`如下语句：

```
object result = null;
using (var completedEvent = new ManualResetEvent(false))
{
    _dispatcher.BeginInvoke((Action)(() =>
        {
            result = someFunc;
            completedEvent.Set();  // Here be dragons!
        }));

    completedEvent.WaitOne(timeoutMilliseconds);
    return result;
} 
```

现在，我意识到这很可能会导致问题。我也碰巧使用了**Resharper**，它通过消息“访问已处置的闭包”警告我。

Resharper 建议通过将违规行更改为：

```
if (completedEvent != null)
{ 
    completedEvent.Set();
} 
```

现在，提出的解决方案让我感到困惑。在正常情况下，没有理由将变量设置为`null`语句`using`。**.NET 中的闭包是否有一些实现细节可以保证变量在`null`已关闭的变量被释放之后？**

作为一个额外的问题，什么是处理问题的好方法`ManualResetEvent`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T06:29:37.510

您正在混淆 ReSharper 的“快速修复”和“上下文操作”。当 ReSharper 提出修复某些问题时，您很可能会在那里看到一个灯泡。您在这里看不到灯泡，因为没有快速修复此警告的方法。

但除了快速修复之外，ReSharper 还具有“上下文操作”，它可以在其中为您执行一些常规任务（将它们视为小型重构）。当 ReSharper 对光标下的代码有上下文操作时，它会显示一个选择。在这里，您会看到一个名为“Check if something is not null”的上下文操作。它与警告无关，并且没有约定在处理变量后将设置为 null。

此外，当您按下 Alt-Enter 时，您会看到一个被划掉的灯泡，让您觉得 ReSharper 没有建议对此警告进行任何快速修复，但它可以通过注释禁用它。事实上，这是让这个警告轻松消失的唯一方法。但我会改写这段代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T15:55:23.247

~~我只是在几个小时前遇到了这个问题。~~

这是一个假警报。R# 不理解在设置事件之前执行将被阻塞，即使这会将处理推迟到正确的时刻。

~~IMO 这是一个很好的解决方案。只需忽略 R#。~~

`ObjectDisposedException`建议在您调用时捕获一个`completedEvent.Set()`，以防超时已过期并且事件已被处理。我认为这不会阻止 R# 警告，但它是安全的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T16:06:55.523

我认为，您必须检查 null，而且您必须捕获此异常。想象一下如果`someFunc`运行超过`timeoutMilliseconds`.

# c - 在 glInterleavedArrays 后调用 glDrawElements 不起作用

> ID：14218914
> 
> 赞同：0
> 
> 时间：2013-01-08T15:54:13.920
> 
> 标签：c, opengl

我正在编写一些 openGL 包装器并尝试运行以下代码：

```
void some_func1() {
    float vertices[] = {50.0, 50.0, 0.0, 20.0, 50.0, 0.0, 20.0, 60.0, 0.0};
    glColor3f(1.0, 0.0, 0.0);
    glInterleavedArrays(GL_V3F, 0, vertices);
}

void some_func2() {
    int indices[] = {0,1,2};
    glDrawElements(GL_TRIANGLES, 3, GL_UNSIGNED_INT, indices);
}

void parent_func() {
    some_func1();
    some_func2();
} 
```

但似乎 openGL 没有在第二个函数中调用 glDrawElements 。我的例程打开一个窗口，将其清除为黑色，并且什么也没画。奇怪的是运行这段代码

```
void some_func1() {
    float vertices[] = {50.0, 50.0, 0.0, 20.0, 50.0, 0.0, 20.0, 60.0, 0.0};
    int indices[] = {0,1,2};
    glColor3f(1.0, 0.0, 0.0);
    glInterleavedArrays(GL_V3F, 0, vertices);
    glDrawElements(GL_TRIANGLES, 3, GL_UNSIGNED_INT, indices);
}

void parent_func() {
    some_func1();
} 
```

完全按预期工作：绘制了一个红色三角形。我查看了文档并四处搜索，但我找不到 glDrawElements 不起作用的任何原因，或者如果在另一个函数中调用会以某种方式丢失数据。有任何想法吗？

仅供参考：我通过主机上的 32 位处理器 VirtualBox 在 Ubuntu 12.04 VM 上运行它，而 freeglut 正在做我的窗口处理。我还设置了 LIBGL_ALWAYS_INDIRECT=1 来解决 VM 的 3D 渲染问题。（不确定这些是否重要，但...... :)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:08:16.113

原因是，在用 绘制时`glDrawElements`，没有要绘制的有效顶点数据。调用时`glInterleavedArrays`（只是在后台进行了一堆`gl...Pointer`调用），您只是告诉 OpenGL 在哪里可以找到顶点数据，而无需复制任何内容。在绘图操作 ( ) 之前不会访问实际数据`glDrawElements`。因此，`some_func1`您正在设置一个指向局部变量的指针，该指针`vertices`在函数返回后不再存在。这不会发生在您修改过的代码中（在同一函数中设置和绘制指针）。

所以要么让这个数组在`glDrawElements`调用之前一直存在，或者更好的是，让 OpenGL 通过使用[顶点缓冲区对象](http://www.songho.ca/opengl/gl_vbo.html)并执行实际的数据复制来实际存储顶点数据本身。在这种情况下，您可能还想避免使用被严重弃用的`glInterleavedArrays`功能（无论如何，这只不过是一个简单的软件包装器`gl...Pointer`而已`glEnableClientState`）。

# jquery - fancybox ajax 加载错误

> ID：14218917
> 
> 赞同：0
> 
> 时间：2013-01-08T15:54:18.407
> 
> 标签：jquery, fancybox, fancybox-2

我正在使用 fancybox 插件加载 ajax 页面，但有时我会收到此错误：

**“无法加载请求的内容。请稍后再试。”**

```
<a href="login.html" class="login fancybox.ajax">Log In</a> 
```

我的jQuery代码是：

```
$(function(){
$('.login').fancybox();

}); 
```

# objective-c - UIViewController 内的 UIView 还是更好的方法？

> ID：14218920
> 
> 赞同：0
> 
> 时间：2013-01-08T15:54:30.093
> 
> 标签：objective-c, ios, uiview, uiviewcontroller, uiview-hierarchy

我对如何正确执行某种操作有疑问。

下图显示了一个 UIViewController，但视图的第二部分是一个自定义 UIView（带有个人资料图片、名称和显示视图按钮的那个）。使用以下代码分配子类 UIView：

```
 profileView = [[GPProfileView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, 70)];
    profileView.myTripGradientColor = YES;
    [self.view addSubview:profileView]; 
```

问题当然是 UIView 上的按钮不能显示任何视图，因为只有 UIViewController 可以将另一个 ViewController 推送到窗口（对吗？）。

UIView 在应用程序的多个地方使用，需要轻松添加，并且在整个应用程序中具有相同的行为。

在我添加按钮之前效果很好，并且我开始认为我做错了，并且必须有更好的方法来做到这一点（也许将 UIView 更改为其他内容？）。

我在想我应该可以打电话：

```
self.superview 
```

然后以某种方式获取 ViewController，这样我就可以将另一个 ViewController 推送到视图层次结构中，但是不行。

有关如何正确执行此操作的任何建议和提示？

更新：我不知道如何从按钮推送另一个 UIViewController。

在 UIView 中按下按钮时，我应该在这个方法中做什么：

```
- (void) showViewButtonTouched:(UIButton*)sender {
GPProfileSocialFriendsViewController *friendsSettings = [[GPProfileSocialFriendsViewController alloc] init];

} 
```

如何推送 GPProfileSocialFriendsViewController？

![UIViewController 内的 UIView 的图像，UIView 上有一个按钮](../Images/5f0bf929bbe18f16979f5eabc198c6a5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:11:37.287

我认为您可以在 UIViewController 上的 GPProfileView 中创建弱引用。像这样：

```
@property (weak, nonatomic) UIViewController *rootController; 
```

创建 GPProfileView 时，分配 rootController-property：

```
profileView = [[GPProfileView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, 70)];
profileView.myTripGradientColor = YES;
profileView.rootController = self;   // if view created in view controller
[self.view addSubview:profileView]; 
```

并在按钮选择器的实现中：

```
self.rootController push... // or pop 
```

这可能是不正确的，但你可以试试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T16:31:26.563

您的`- (void) showViewButtonTouched:(UIButton*)sender`方法应该在您的控制器中，并且可能会更好地命名`- (void) showView:(UIButton*)sender`，或者`- (void) showProfile:(UIButton*)sender`它清楚地表明它的作用（而不是您如何到达那里）。

管理从一个状态到另一个状态的转换不是视图的责任。如果您将您的方法移动到您的控制器，您的问题就不再存在（`self.navigationController`如果您没有这样的导航控制器，您可以轻松访问或直接推送：

`[self presentViewController:vcThatNeedsToBePushed animated:YES completion:nil];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T16:55:25.053

当按下按钮时，您可以让视图控制器推送下一个视图控制器。视图控制器可以在按钮上添加一个目标/动作，以便在 touch up inside 事件上调用视图控制器中的动作方法。

# git - 如何使工作树与 HEAD 完全匹配？（包括删除未跟踪的文件）

> ID：14218923
> 
> 赞同：2
> 
> 时间：2013-01-08T15:54:36.867
> 
> 标签：git

`git reset --hard HEAD`恢复对工作树中的文件所做的任何更改，以便它们匹配头。但是，它不会触及未跟踪的文件。 `git clean -df`删除所有未跟踪的本地文件和目录。

**是否有一种简单的方法可以使跟踪的文件与 HEAD 匹配，并且还可以删除在所有情况下都有效的未跟踪文件？**

（您不能一个接一个地运行这两个命令，因为`git reset --hard HEAD`如果存储库没有提交，则会失败。可能有一些方法可以检查是否`reset`有必要，但我想这很繁琐。）

我认为这是一个等效的问题：如何使我的工作树与`git clone`存储库的新鲜结果相同[*]？

[*] 我很高兴忽略的文件不受影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T17:11:06.080

没有单一的命令，但可以像你提到的那样使用：

```
git reset --hard HEAD && git clean -fdx 
```

陆续。这可能不适用于空存储库，但空存储库并不是 git 中的一等公民（即克隆空存储库会产生警告）。

如果您必须对空存储库进行这项工作，只需翻转命令：

```
git clean -fdx && git reset --hard HEAD 
```

`clean`应该在任何情况下运行，并且`reset`可以失败而没有后果。

# node.js - 如何解密 HMAC？

> ID：14218925
> 
> 赞同：22
> 
> 时间：2013-01-08T15:54:40.323
> 
> 标签：node.js, cryptography, hmac, sha256

我可以使用以下方法制作 HMAC：

```
var encrypt = crypto.createHmac("SHA256", secret).update(string).digest('base64'); 
```

我正在尝试使用秘密解密编码的 HMAC：

```
var decrypt = crypto.createDecipher("SHA256", secret).update(string).final("ascii"); 
```

以下不成功。如何使用密钥解密 HMAC？

我收到以下错误：

```
node-crypto : Unknown cipher SHA256

crypto.js:155
  return (new Decipher).init(cipher, password);
                        ^
Error: DecipherInit error 
```

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-01-08T15:57:37.583

HMAC 是 MAC/keyed hash，而不是密码。它不是为解密而设计的。如果要加密某些内容，请使用 AES 之类的密码，最好使用 AES-GCM 之类的经过身份验证的模式。

“解密”的唯一方法是猜测整个输入，然后比较输出。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2015-08-25T11:19:46.043

再次重申，哈希不是为解密而设计的。但是，一旦您有了哈希，您就可以通过使用相同秘密的相同加密来检查任何字符串是否等于该哈希。

```
var crypto = require('crypto')

var secret = 'alpha'
var string = 'bacon'

var hash = crypto.createHmac('SHA256', secret).update(string).digest('base64');
// => 'IbNSH3Lc5ffMHo/wnQuiOD4C0mx5FqDmVMQaAMKFgaQ='

if (hash === crypto.createHmac('SHA256', secret).update(string).digest('base64')) {
  console.log('match') // logs => 'match'
} else {
  console.log('no match')
} 
```

看起来很明显，但非常强大。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-08T16:21:13.000

正如[CodesInChaos](https://stackoverflow.com/users/445517/codesinchaos)所述，带有 SHA256 的 HMAC 只能用于散列值，这只是单向行程。如果您希望能够加密/解密，则必须使用密码，例如`aes`or `des`。

关于如何加密/解密的示例：

```
const crypto = require("crypto");

// key and iv   
var key = crypto.createHash("sha256").update("OMGCAT!", "ascii").digest();
var iv = "1234567890123456";

// this is the string we want to encrypt/decrypt
var secret = "ermagherd";

console.log("Initial: %s", secret);

// create a aes256 cipher based on our password
var cipher = crypto.createCipheriv("aes-256-cbc", key, iv);
// update the cipher with our secret string
cipher.update(secret, "ascii");
// save the encryption as base64-encoded
var encrypted = cipher.final("base64");

console.log("Encrypted: %s", encrypted);

// create a aes267 decipher based on our password
var decipher = crypto.createDecipheriv("aes-256-cbc", key, iv);
// update the decipher with our encrypted string
decipher.update(encrypted, "base64");

console.log("Decrypted: %s", decipher.final("ascii")); 
```

*注意：您必须将密码/解密保存到他们自己的变量中，并确保不要`.final`在`.update`.*

如果您想知道系统上可用的密码，请使用以下命令：

```
openssl list-cipher-algorithm 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2017-10-03T03:57:27.280

清理极简视图的代码并消除杂乱：注意：IIFE 在节点 repl “As Is”中可运行

```
!function(){

const crypto = require("crypto");

// key 
var key = crypto.createHash("sha256").digest();

 // this is the string we want to encrypt/decrypt
 var secret = "ermagherd";

 console.log("Initial: %s", secret);

// create a aes256 cipher based on our password
var cipher = crypto.createCipher("aes-256-cbc", key);

// update the cipher with our secret string
cipher.update(secret);

// save the encryption 
var encrypted = cipher.final();

console.log("Encrypted: %s", encrypted);

// create a aes267 decipher based on our password
 var decipher = crypto.createDecipher("aes-256-cbc", key);

// update the decipher with our encrypted string
decipher.update(encrypted);

console.log("Decrypted: %s", decipher.final()); //default is utf8 encoding   final("utf8") not needed for default

}()

/*  REPL Output

            Initial: ermagherd
    Encrypted: T)��l��Ʀ��,�'
    Decrypted: ermagherd
    true
*/ 
```

# javascript - 在 function.php 中包含脚本时 Moo 工具出错 - Wordpress

> ID：14218927
> 
> 赞同：0
> 
> 时间：2013-01-08T15:54:41.780
> 
> 标签：javascript, wordpress, mootools

我的 Moo Tools 脚本在我将它们放入我的 functions.php 时出错，但当我将它们放入我的 header.php 时工作正常

header.php 中的工作原理

```
<script type='text/javascript' src='http://minnebyte.com/wp-  
content/themes/mb/js/mootools-1.2-more.js?ver=3.5'></script>
<script type='text/javascript' src='http://minnebyte.com/wp-
content/themes/mb/js/mootools-fluid16-autoselect.js?ver=3.5'></script>
<script type='text/javascript' src='http://minnebyte.com/wp- 
content/themes/mb/js/mootools-1.2.1-core.js?ver=3.5'></script> 
```

什么在functions.php中不起作用

```
// Basic Scripts
function MB_scripts()  
{  
wp_deregister_script('mootools-1.2-more');
wp_register_script('mootools-1.2-more', MB_PATH.'/js/mootools-1.2-more.js');
wp_enqueue_script('mootools-1.2-more');

wp_deregister_script('mootools-fluid16-autoselect');
wp_register_script('mootools-fluid16-autoselect', MB_PATH.'/js/mootools-fluid16-    
autoselect.js');
wp_enqueue_script('mootools-fluid16-autoselect');   

wp_deregister_script('mootools-1.2.1');
wp_register_script('mootools-1.2.1', MB_PATH.'/js/mootools-1.2.1-core.js');
wp_enqueue_script('mootools-1.2.1'); 
} 
add_action( 'wp_enqueue_scripts', 'MB_scripts' ); 
```

将它们放在functions.php中不是一个好习惯吗？ [啧啧](http://wp.tutsplus.com/articles/how-to-include-javascript-and-css-in-your-wordpress-themes-and-plugins/)

链接到 [我的页面](http://minnebyte.com)

在开发者工具中查看以查看错误

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:15:04.337

您可以将其保留在那里，但您应该在 footer.php 上调用您的脚本。将脚本放在 html 文档的底部，紧挨在结束 body 标记之前是一个很好的做法。您还应该指定对脚本的依赖项。这些是必须在某个脚本之前加载的脚本。

在你的functions.php上

```
wp_register_script('mootools-1.2-more', MB_PATH.'/js/mootools-1.2-more.js');
wp_register_script('mootools-fluid16-autoselect', MB_PATH.'/js/mootools-fluid16- 
```

自动选择.js'); wp_register_script('mootools-1.2.1', MB_PATH.'/js/mootools-1.2.1-core.js');

在你的 footer.php

```
wp_enqueue_script('mootools-1.2.1');
wp_enqueue_script('mootools-1.2-more', array('mootools-1.2.1'));
wp_enqueue_script('mootools-fluid16-autoselect', array('mootools-1.2-more')); 
```

我不确定脚本顺序。根据需要调整

# c# - 向 xml 元素添加更多值

> ID：14218929
> 
> 赞同：1
> 
> 时间：2013-01-08T15:54:59.630
> 
> 标签：c#, xml, linq, linq-to-xml

我有看起来像这样的xml。我一直在尝试向 Author 元素添加更多值。

我像这样加载它：

```
XDocument cdata = XDocument.Parse(text); 
```

这是示例 xml：

```
<a xmlns="http://www" version="5.050">  
  <Books>
   <Author> Poe,Edgar Allen Homer Walden</Author>
   <Address></Address>
   <State></State>
 </Books>
 <SYSTEM type="OTHER">
   <ORGANIZATION id="" />
 </SYSTEM>
 <HMDA_INFO is_hoepa="N" is_hoepa_manual="N" />
</a> 
```

只是旁注'a'不一定总是根元素名称，有时它是b或c，所以我不能使用根名称。

尝试这样做来访问作者，但我得到序列不包含任何元素：

```
XDocument cdata = XDocument.Parse(text);
var addElement = cdata.Descendants("Books").First();
addElement.SetAttributeValue("Authors", "insert this."); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:59:19.253

下面的代码将访问作者节点

```
var addElement = cdata.Descendants("Books").First();
var authodNode = addElement.Element("Author") 
```

下面你可以找到我做过的测试

![在此处输入图像描述](../Images/3c8bfe9aa8209417aff29b81546ed56a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:24:39.830

你有两个问题。首先是`Author`一个元素，而不是属性。第二 - 你忘记了`a`元素中声明的命名空间：

```
XDocument cdata = XDocument.Parse(text);
XNamespace ns = "http://www";
var books = cdata.Descendants(ns + "Books").First();
var author = books.Element(ns + "Author"); 
author.Value = "insert this." + authors.Value; 
```

或者，如果您只想向作者元素添加新属性：

```
books.Element(ns + "Author").SetAttributeValue(ns + "Foo", "insert this."); 
```

# python - python中的排序函数

> ID：14218933
> 
> 赞同：6
> 
> 时间：2013-01-08T15:55:15.973
> 
> 标签：python, sorting

我编写了一个程序，它必须对以下内容进行排序：

```
unsorted_list=[['le', 5], ['aab', 4], ['aaa', 5]] 
```

到：

```
[['aaa', 5], ['le', 5], ['aab', 4]] 
```

它应该按数字排序。如果数字相同，则应按字母顺序排序。我有以下代码：

```
def sortItem(lista):
    ''' func for sort by item'''
    return lista[1]
sorted(unsorted_list, key=sortItem, reverse=True) 
```

不幸的是，它不返回按字母顺序排列的字符串。有什么建议怎么做吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-08T15:56:49.580

因为`x[1]`是一个整数，你可以简单地通过否定它来从最大值到最小值排序：

```
sorted(unsorted_list, key=lambda x: (-x[1], x[0])) 
```

创建的元组`key`将根据第一个元素（`-x[1]`）排序，然后是第二个元素（`x[0]`）。这完全符合您的逻辑：

*“所以，这意味着它是按数字排序的，但如果数字相同，则排序将按字母顺序排列。”*

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-08T15:56:56.787

```
In [2]: l = [['le', 5], ['aab', 4], ['aaa', 5]]

In [3]: sorted(l, key=lambda (x,y):(-y,x))
Out[3]: [['aaa', 5], ['le', 5], ['aab', 4]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-11T09:01:15.957

如果有人不熟悉 lambda 函数，这里是如何通过从头开始定义自己的函数来分解它 -

```
unsorted_list=[['le', 5], ['aab', 4], ['aaa', 5]]
def num_and_alpha(tuple):
    return (-tuple[1], tuple[0])

print sorted(unsorted_list, key=num_and_alpha) 
```

# asp.net - TemplateFields 中的控件未在 GridView 中显示

> ID：14218934
> 
> 赞同：0
> 
> 时间：2013-01-08T15:55:16.383
> 
> 标签：asp.net

在用户从下拉列表中进行一些选择后，我有一个带有一个边界字段的网格视图，该字段在代码隐藏中填充。这填充得很好，但我在 TemplateFields 中还有另外两列带有复选框。这些永远不会显示在此网格视图中。这是aspx：

```
<asp:UpdatePanel ID="clientServerUpdatePanel" runat="server">
        <ContentTemplate>
            <asp:GridView ID="clientServerGridView" runat="server" AutoGenerateColumns="False">
                <Columns>
                    <asp:BoundField HeaderText="Operating System" DataField="OS" />
                    <asp:TemplateField HeaderText="Client" >
                        <asp:ItemTemplate>
                            <asp:CheckBox runat="server" ID="clientCheckBox" Checked="false" />
                        </asp:ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Server">
                        <asp:ItemTemplate>
                            <asp:Checkbox runat="server" ID="serverCheckBox" Checked="false" />
                        </asp:ItemTemplate>
                    </asp:TemplateField>
                </Columns>
            </asp:GridView>
        </ContentTemplate>
    </asp:UpdatePanel> 
```

这是放置在单击事件处理程序中的相关代码隐藏：

```
Dim dt As DataTable = New DataTable()
dt.Columns.Add(New DataColumn("OS", System.Type.GetType("System.String")))

For Each OSItem As ListItem In Me.defaultOSesListBox.Items
    If Not OSItem.Selected Then
        Continue For
    End If

    Dim dr As DataRow = dt.NewRow()
    Dim os As String = OSItem.Text
    dr("OS") = os
    dt.Rows.Add(dr)
Next

Me.clientServerGridView.DataSource = dt
Me.clientServerGridView.DataBind() 
```

有谁知道我的问题的根源是什么？

编辑：我需要包含复选框

```
<ItemTemplate> 
```

代替

```
<asp:ItemTemplate> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:03:11.043

我发现了这个问题。我把复选框包裹在

```
<asp:ItemTemplate> 
```

应该是什么时候

```
<ItemTemplate> 
```

当我进行此更改时，问题立即得到解决。

# textmate - 如何在 Textmate 中删除 \n

> ID：14218935
> 
> 赞同：9
> 
> 时间：2013-01-08T15:55:16.787
> 
> 标签：textmate

给定一个包含新行的文件，使用 Textmate，我如何从文档中删除它们

给定一个文本文件

```
a

b

c 
```

我想结束

```
a
b
c 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-08T16:02:04.543

我会使用正则表达式`^\s*$\n`来匹配任何空行或仅包含空格字符的行。

只需在“查找”框中运行 Replace All，替换框为空即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T16:00:22.720

将“\n+”替换为“\n”（确保“正则表达式”复选框已打开）。这仅用一个替换了几个连续的换行符。

# php - 在共享主机上使用带有 Symfony 2 的资产的运行时错误

> ID：14218936
> 
> 赞同：1
> 
> 时间：2013-01-08T15:55:20.293
> 
> 标签：php, symfony, assetic

我在 ICDSoft 托管，所以我的目录结构如下所示：

```
/
    private/
        app/
        bin/
        src/
        vendor/

    www/
        www/
            bundles/
            app.php 
```

当我尝试运行`$ app/console assetic:dump`时，出现以下运行时错误：

```
[RuntimeException]
The source file "/home/thesewingdiva/private/app/../web/bundles/majorproductionssewingdivasite/js/jquery-1.8.3.min.js" does not exist. 
```

有没有办法让我告诉资产去寻找`../www/www/bundles`而不是`../web/bundles`寻找正确的资产？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:27:51.490

在`app/config/config.yml`，在**资产**部分：

```
assetic:
    ...
    read_from: "%kernel.root_dir%/../www/www"
    ... 
```

Symfony2 的 AsseticBundle 配置文档在这里：[http ://symfony.com/doc/2.0/reference/configuration/assetic.html](http://symfony.com/doc/2.0/reference/configuration/assetic.html)

# php - 使用多种分类法和日期作为自定义属性 VarChar 在 Wordpress 上进行自定义查询

> ID：14218940
> 
> 赞同：0
> 
> 时间：2013-01-08T15:55:29.583
> 
> 标签：php, mysql, wordpress

我的问题汇集了很多东西，这很可能是为什么我不能让它为它工作。

我不精通长 SQL 查询，也不是 Wordpress 的忠实粉丝，但我被要求修复特定页面上的排序，为了实现这一点，我需要按自定义属性进行排序。

我试过这个，但没有奏效：

```
$query = array(
    'post_type' => 'custom_post_type',
    'meta_key' => 'key_for_meta',

    'orderby' => 'STR_TO_DATE(meta_value, "%d/%m/%Y")',
    'order' => 'DESC',
    'first_taxonomy' => $first_taxonomy,
    'second_taxonomy' => $second_taxonomy
); 
```

这将是理想的解决方案，如果有人知道如何完成这项工作，我很想知道。

我已经尝试过，`key_for_meta`而不是`meta_value`，`orderby`并尝试指向正确的 table.column 等等。

经过大量尝试后，我失去了所有希望，并试图创建一个查询。它是这样的：

```
SELECT p.*,
m.meta_key, m.meta_value, 
tt.taxonomy as s_tax,
t.slug
FROM wp_posts AS p
INNER JOIN wp_postmeta AS m ON p.ID = m.post_id AND m.meta_key = 'key_for_meta'
INNER JOIN wp_term_relationships AS tr ON p.ID=tr.object_id
**INNER JOIN wp_term_taxonomy AS tt ON tr.term_taxonomy_id = tt.term_taxonomy_id
INNER JOIN wp_terms AS t ON tt.term_id = t.term_id**

WHERE 1 = 1
    AND wp_posts.post_type = 'custom_post_type'
    AND wp_posts.post_status = 'publish'

    **AND t.slug = '$first_taxonomy'
    AND t.slug = '$second_taxonomy'**

GROUP BY wp_posts.ID
ORDER BY STR_TO_DATE(m.meta_value, '%d/%m/%Y') ASC"; 
```

任何解决方案将不胜感激。我不在乎问题是如何解决的，我只想让它完美地工作。如果它也可以看起来不错，完美，但我放弃了。

日期的格式为 DD/MM/YYYY。根据要求，来自 wp_postmeta 的一些列：

```
meta_id    post_id    meta_key    meta_value
5101       3521       data_prova  12/01/2013
5114       3526       data_prova  02/03/2013
5165       3554       data_prova  02/03/2013 
```

此外，我还不能让分类法对我所做的查询起作用。

好消息：我让几乎所有东西都能正常工作。唯一的问题是，我无法让它与两种分类法一起使用，但如果我只尝试一种，它就可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:47:26.853

所以对于任何有同样问题的人：

我不知道如何只使用 SQL，所以我使用 WordPress 的`has_term()`. 我的解决方案如下：

```
SELECT DISTINCT p.*, 
m.meta_key, m.meta_value, 
tt.taxonomy, tt.term_id,
t.slug
FROM wp_posts AS p
INNER JOIN wp_postmeta AS m 
    ON p.ID = m.post_id 
    AND m.meta_key = 'key_for_meta'
INNER JOIN wp_term_relationships AS tr 
    ON p.ID = tr.object_id
INNER JOIN wp_term_taxonomy AS tt 
    ON tr.term_taxonomy_id = tt.term_taxonomy_id
INNER JOIN wp_terms AS t 
    ON tt.term_id = t.term_id
WHERE 1 = 1
    AND p.post_type = 'custom_post_type'
    AND p.post_status = 'publish'
    AND (
    t.slug = '$first_taxonomy'
    )
ORDER BY STR_TO_DATE(m.meta_value, '%d/%m/%Y') ASC 
```

加上这个 PHP 来启动和运行循环：

```
$posts = $wpdb->get_results($queryRaw);

if ($wpdb->num_rows > 0) {

foreach ($posts as $post) {
    $stored_post = clone $GLOBALS['post'];
    $GLOBALS['post'] = $post;

    setup_postdata($post);
    if (has_term( $first_taxonomy, 'first_taxonomy', $post->ID) && has_term( $second_taxonomy, 'second_taxonomy', $post->ID)) {
    ... 
```

其余的和往常一样。所有方法都有效，因为我正在设置全局`$post`.

如果其他人有贡献，我会留下这个问题，我很高兴看到更多关于如何处理这个问题的想法，我真的想要一个纯 Wordpress 或至少纯 SQL 解决方案（关于测试我必须使用 PHP）。

# mysql - 从sql数据库中选择最后一个条目

> ID：14218941
> 
> 赞同：0
> 
> 时间：2013-01-08T15:55:34.450
> 
> 标签：mysql, sql, select

我想从我的数据库中选择最后一个条目。

```
$sql = "SELECT LAST(time) FROM pikkertonnode_415629569";
$erg = mysql_query($sql) or die ("Can't do it");

while ($data = mysql_fetch_array($erg))
{
$x = $data['time'];
... 
```

每次我收到消息，，不能这样做”

你能帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T15:56:21.190

利用`MAX`

```
$sql = "SELECT MAX(time) AS max_time FROM `pikkertonnode_415629569`" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T15:58:15.663

如果您想要最新的完整记录，而不仅仅是一列的最大值，您可以这样做

```
SELECT * FROM pikkertonnode_415629569
order by `time` desc
limit 1 
```

如果您`time`实际上有一个专栏...

# .net - 调试 I/O 完成线程泄漏

> ID：14218942
> 
> 赞同：3
> 
> 时间：2013-01-08T15:55:40.577
> 
> 标签：.net, threadpool, windbg

我正在尝试在 .NET 应用程序中查找可能的 I/O 完成线程泄漏。我不时使用[ThreadPool.GetAvailableThreads](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.getavailablethreads.aspx)对可用 I/O 完成线程的数量进行采样。在某些时候，可用线程的数量开始从 1000 减少到 1（在几分钟内）。

一旦达到 1 个可用线程，我就看不到任何内存泄漏、错误、执行延迟或类似情况。

在windbg中，运行 !threads 时，我看到~700个线程，其中没有一个来自线程池，其中大部分都标有 XXXX（据我所知，这意味着 GC 还没有收集线程），例如: XXXX 2a4 1630 37d54610 1400 启用 00000000:00000000 004b70d8 0 Ukn (或 MTA)

这个怎么调试？如何查看完成线程的调用堆栈？

运行 !threadpool 时，我得到以下信息：

> CPU 利用率：31% 工作线程：总计：2047 运行：2047 空闲：0 MaxLimit：2047 MinLimit：2 队列中的工作请求：0 --------- ----------------- 定时器数量：4 ---------------------------- ---------- 完成端口线程：Total：1000 Free：1 MaxFree：4 CurrentLimit：999 MaxLimit：1000 MinLimit：2

然而，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:33:33.223

运行 !sos.name2ee mscorlib.dll System.Threading.Thread 并记下 MethodTable。然后运行 ​​!sos.dumpheap -mt [MT]。这将为您提供线程对象的列表。然后运行 ​​!sos.gcroot [THREADOBJ] 来查看它们的作用。

# sql-server - 如何对包含 DBNull 值的 DataGridView 控件中的列进行排序？VB.NET

> ID：14218947
> 
> 赞同：0
> 
> 时间：2013-01-08T15:55:44.710
> 
> 标签：sql-server, vb.net, datagridview

我正在尝试按包含 DBNull 值的列对 DataGridView 控件进行排序。此 DataGridView 控件绑定到 SQL Server 2012 数据库。

当我单击标题单元格（按升序排序）时，DBNull 值排在其余整数值之前，因此列中的顶部行都是空白的，然后是整数值 1,2， 3等按升序排列。

我该如何解决这个问题？我宁愿 DataGridView 控件对具有顶部值的行进行排序，然后是 DBNulls。

我试图在空白单元格中插入一个更高的值，然后对它们进行正确排序，但是当我将这些值返回给 System.DBNull.value 时，排序顺序会恢复到上面的方式。

我的代码如下：

```
If dgv.Columns(e.ColumnIndex).Name.EndsWith("Position") Then
    intSortingRunningPosition = 1000
    dgv.Sort(baseColumn, System.ComponentModel.ListSortDirection.Ascending)
    newColumn.HeaderCell.SortGlyphDirection = Windows.Forms.SortOrder.Ascending
    For Each dr As DataGridViewRow In dgv.Rows
        If dr.Cells(e.ColumnIndex).Value Is System.DBNull.Value Then 
            dr.Cells(e.ColumnIndex).Value = intSortingRunningPosition
            intSortingRunningPosition += 1
        End If
    Next
    dgv.Sort(newColumn, System.ComponentModel.ListSortDirection.Ascending)
    For Each dr As DataGridViewRow In dgv.Rows
        If dr.Cells(e.ColumnIndex).Value >= 1000 Then
            dr.Cells(e.ColumnIndex).Value = System.DBNull.Value
        End If
    Next
End If 
```

对不起，如果这令人困惑。谢谢！

更新：

我已经修改了我的代码以使用 IComparer 方法，并提出了以下内容：

```
 Public Function Compare(ByVal x As Object, ByVal y As Object) As Integer _
     Implements System.Collections.IComparer.Compare

     Dim DataGridViewRow1 As DataGridViewRow = CType(x, DataGridViewRow)
     Dim DataGridViewRow2 As DataGridViewRow = CType(y, DataGridViewRow)
     Dim CompareResult As Integer
     Dim intDGV1Cell0Value As Integer = Nothing
     Dim intDGV1Cell1Value As Integer = Nothing
     Dim intDGV2Cell0Value As Integer = Nothing
     Dim intDGV2Cell1Value As Integer = Nothing

     Try
         intDGV1Cell0Value = CInt(DataGridViewRow1.Cells(0).Value)
     Catch ex As Exception
         intDGV1Cell0Value = Int32.MaxValue
     End Try
     Try
         intDGV1Cell1Value = CInt(DataGridViewRow1.Cells(1).Value)
     Catch ex As Exception
         intDGV1Cell1Value = Int32.MaxValue
     End Try
     Try
         intDGV2Cell0Value = CInt(DataGridViewRow2.Cells(0).Value)
     Catch ex As Exception
         intDGV2Cell0Value = Int32.MaxValue
     End Try
     Try
         intDGV2Cell1Value = CInt(DataGridViewRow2.Cells(1).Value)
     Catch ex As Exception
         intDGV2Cell1Value = Int32.MaxValue
     End Try

     ' Try to sort based on the Last Name column.
     CompareResult = System.String.Compare(intDGV1Cell1Value, intDGV2Cell1Value)

     ' If the Last Names are equal, sort based on the First Name. 
         If CompareResult = 0 Then
             CompareResult = System.String.Compare(intDGV1Cell0Value, intDGV2Cell0Value)
         End If

     Return CompareResult * sortOrderModifier
 End Function 
```

空值现在根本不排序。关于我在这里做错了什么的任何想法？我敢肯定我有点不在场，因为它是......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:59:09.663

`bit`您可以向数据集添加一个名为 的字段`NullValue`，该字段适用于`0`不为空的数据列的任何条目，以及`1`任何为空的条目。

然后作为排序操作的一部分，按数据列本身和这个附加位列进行排序，这样空值自然会出现在排序中的非空值之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:22:13.107

我使用 Sort(ICompare) 方法对该数据库进行排序是相当不成功的，因为它已绑定到外部数据集。我最终修改了我的连接字符串并重新填充了数据表。

我的代码如下：

```
If DataType = "Integer" Then
    If Column = "Vehicle Number" Then
        strConnectionStringCase = "Select * From Timing ORDER BY CAST([Class] AS NVARCHAR(MAX)) " & Direction & ", CONVERT(int, RTRIM(CAST([" & Column & "] AS NVARCHAR(MAX)))) " & Direction
    End If        
ElseIf DataType = "DateTime" Then
    strConnectionStringCase = "Select * From Timing ORDER BY CASE WHEN [" & Column & "] is NULL THEN 1 ELSE 0 END, [" & Column & "] " & Direction
ElseIf DataType = "String" Then
    If Column = "Vehicle Number" Then
        strConnectionStringCase = "Select * From Timing ORDER BY LEN(CAST([" & Column & "] AS NVARCHAR(MAX))) " & Direction & ", CAST([Class] AS NVARCHAR(MAX)) " & Direction & ", CAST([" & Column & "] AS NVARCHAR(MAX)) " & Direction
    End If
End If 
```

我在标题单元格单击事件上调用此子例程。我将列名、排序方向和数据类型发送到此子例程。

此代码还允许我根据数据类型对列进行排序。如果有字母数字字符串，我可以按照类似的顺序对它们进行排序，就好像它们只是整数一样。DBNull 值始终放在排序的末尾。

谢谢您的帮助！

# udp - 使用 .NET 缓冲和处理实时多播数据

> ID：14218948
> 
> 赞同：0
> 
> 时间：2013-01-08T15:55:47.647
> 
> 标签：udp, buffer, real-time, multicast, mpeg2-ts

我正在尝试解析通过多播接收的 MPEG2-TS 数据。问题是接收方法有时会跳过数据包 - 我相信这在很大程度上取决于连续 Receive() 方法之间进行的额外处理[根据我所做的研究，如果 CPU 不在 Receive() 方法上，数据包将丢失，因此缓冲将是不立即处理的最快选择，并将其留给另一个线程完成......我对吗？]。

我目前正在使用队列来保存接收到的数据报，以便以后使用 dequeue 方法从另一个线程处理。我还切换到使用在新线程上初始化的阻塞多播接收器，而不是异步接收器，以确保没有延迟从一个线程委派到另一个线程[例如，当使用 OnReceiveFrom() 方法时]。

组播接收器的代码如下：

```
class Multicast
{
    /// <summary>
    /// The possible Operating Modes allowed for this Multicast Class File
    /// </summary>
    public enum OperationMode
    {
        Client,
        Server
    };

    private IPAddress ipAddress;
    private int portNumber;
    private int interfaceIndex;
    private Socket socket;
    private EndPoint sourceOrDestination;
    private byte[] Data;
    private OperationMode operationMode;

    public Queue<byte[]> q = new Queue<byte[]>();

    public Multicast(string ipAddress, int portNumber, int interfaceIndex, OperationMode operationMode)
    {
        if (!IPAddress.TryParse(ipAddress, out this.ipAddress))
        {
            throw new Exception("Incorrect Argument Data. Unable to parse IP Address!");
        }
        this.portNumber = portNumber;
        this.interfaceIndex = interfaceIndex;
        this.operationMode = operationMode;
    }

    public void Start()
    {
        socket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
        IPEndPoint localEndPoint = new IPEndPoint(IPAddress.Any, portNumber); // Local IP and Port (if more than one NIC interface is available, this command must be altered!

        //socket.SetSocketOption(SocketOptionLevel.Udp,SocketOptionName.Broadcast,true);
        socket.SetSocketOption(SocketOptionLevel.Udp, SocketOptionName.NoDelay, 1);
        socket.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.ReuseAddress, 1); // Allow for loopback testing 
        socket.Bind(localEndPoint); // Extremly important to bind the Socket before joining multicast groups 
        socket.SetSocketOption(SocketOptionLevel.IP, SocketOptionName.MulticastTimeToLive, Properties.Settings.Default.Network_MulticastTTL); // Set TTL (e.g.: 1 for one router hop)
        try
        {
            socket.SetSocketOption(SocketOptionLevel.IP, SocketOptionName.AddMembership, new MulticastOption(ipAddress, interfaceIndex)); // Join Multicast
        }
        catch (Exception) { }
        socket.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.ReceiveBuffer, Properties.Settings.Default.Network_FramePayloadSize);
        socket.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.SendBuffer, Properties.Settings.Default.Network_FramePayloadSize);
        //socket.SetSocketOption(SocketOptionLevel.Udp, SocketOptionName.DontFragment, 1);
        socket.DontFragment = true;

        while (true)
        {
            Data = new byte[socket.ReceiveBufferSize];
            socket.Receive(Data);

            q.Enqueue(Data);
        }
    }

    /// <summary>
    /// This function is used to stop the socket from sending/receiving further data. The socket is therefore closed.
    /// </summary>
    public void Stop()
    {
        socket.Close();
    }
} 
```

即使从字面上将所有收到的数据报转储到一个 .ts 文件中，在 VLC 中播放时，人们可能会注意到像素化和音频跳过。实际上，由于wireshark将数据包全部按顺序显示，因此网卡成功接收数据包，并且在VLC中可以毫无问题地播放流（直接打开流时）。

你会建议什么来改善结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T18:48:03.943

就像我认为您将套接字接收缓冲区限制为大约一个数据报一样。给[`SetSocketOption`](http://msdn.microsoft.com/en-us/library/1011kecd.aspx)for的值[`ReceiveBuffer`](http://msdn.microsoft.com/en-us/library/system.net.sockets.socketoptionname.aspx)应该更大，因此内核有足够的空间来为您缓冲多个输入数据报，而您的应用程序不会立即从套接字读取（例如处理您的当前输入）。将您当前的接收缓冲区大小值乘以一百。

那么你在回复评论中所说的关于字节为零的内容没有多大意义。查看您的代码 - 您没有考虑[`Receive()`](http://msdn.microsoft.com/en-us/library/8s4y8aff.aspx)（即接收到的实际字节数）的返回值，而是假设您`ReceiveBufferSize`每次都获得字节。

# visual-studio - 如何在 Teamcity Visual Studio 插件中配置 Perforce？

> ID：14218951
> 
> 赞同：0
> 
> 时间：2013-01-08T15:55:51.463
> 
> 标签：visual-studio, teamcity, perforce

Teamcity 文档说“使用标准 Perforce 环境变量作为全局变量”。这些是根据设置的`p4 set`

```
$ p4 set
P4CLIENT=aa (set)
P4EDITOR=C:\Program Files (x86)\Notepad++\notepad++.exe (set)
P4IGNORE=C:\Code\p4ignore.txt (set)
P4PASSWD=AA63AEBCFF2322ED61DB0B04D45 (set)
P4PORT=srvcrpsys52:1666 (set)
P4USER=irving.washington (set) 
```

然而，当我尝试测试连接时，Visual Studio 中的 Teamcity 给了我这个错误。这是怎么回事？

![在此处输入图像描述](../Images/36139a96e3f23bd0290749b7affba18a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:02:52.497

环境变量与“p4 set”变量并不完全相同。'p4 set' 可以在注册表中记录东西，在 Perforce 工具知道查看但其他工具可能不知道查看的地方。

尝试使用真正的环境变量，方法是进入“关于这台计算机”的开始菜单，导航到环境变量表，并在那里设置环境变量（并可能在设置后重新登录或重新启动；取决于是否您将它们设为用户环境变量或系统环境变量），然后查看 TeamCity 是否识别这些设置。

您可以说您已经设置了真正的环境变量，因为如果您这样做，命令行提示符会显示它们：

```
$ set P4 
```

请注意，这与

```
$ p4 set 
```

# wordpress - Wordpress 中所有主要类别的相同子类别

> ID：14218953
> 
> 赞同：0
> 
> 时间：2013-01-08T15:55:58.610
> 
> 标签：wordpress, categories

我对 Wordpress 中的类别有疑问。我有一个关于旅游的网站，所以有很多地方，所以我为每个地方使用类别，每个地方都有相同的一些子类别。无论如何，我只是创建一次子类别并将其应用于所有主类别，因为子类别在所有主类别中都是相同的。

例如：

1.  纽约 : 美食、夜生活
2.  伦敦 : 美食、夜生活
3.  巴黎 : 美食、夜生活

纽约、伦敦、巴黎是 1 级的主要类别，食品、夜生活是 2 级的子类别。如您所见，所有主要类别的子类别相同。因为我有很多主要的类别，所以我想找到一个快速的方法来做到这一点。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T01:46:04.673

如果要显示类别和子类别的列表，可以查看[WP codex](http://codex.wordpress.org/Template_Tags/wp_list_categories)`wp_list_categories`中的模板标签。

# matlab - 使用 matlab 的示例傅里叶描述符算法

> ID：14218956
> 
> 赞同：1
> 
> 时间：2013-01-08T15:56:04.383
> 
> 标签：matlab, image-processing

任何人都可以给/给我一个使用matlab但不使用工具箱的二维基本图像（黑白矩形和圆形）的傅立叶描述符算法的例子..真的需要你的帮助..tq

# java - Spring + Hibernate 带注释：如何将 Hibernate Session 绑定到线程？

> ID：14218957
> 
> 赞同：1
> 
> 时间：2013-01-08T15:56:05.167
> 
> 标签：java, spring, hibernate, sessionfactory

我是 Spring 新手，我正在尝试创建一个使用 Apache Tomcat 7、SQL Server、Spring MVC 和 Hibernate 3 的登录页面。我得到的错误是：

```
message Request processing failed; nested exception is org.hibernate.HibernateException: No Hibernate Session bound to thread, and configuration does not allow creation of non-transactional one here

description The server encountered an internal error that prevented it from fulfilling this request.

exception

org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.hibernate.HibernateException: No Hibernate Session bound to thread, and configuration does not allow creation of non-transactional one here
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:894)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
root cause

org.hibernate.HibernateException: No Hibernate Session bound to thread, and configuration does not allow creation of non-transactional one here
    org.springframework.orm.hibernate3.SpringSessionContext.currentSession(SpringSessionContext.java:63)
    org.hibernate.impl.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:687)
    com.accumed.protracking.repository.JpaUserInfoRepository.get(JpaUserInfoRepository.java:38)
    com.accumed.protracking.service.UserInfoServiceImpl.login(UserInfoServiceImpl.java:20)
    com.accumed.protracking.LoginController.loginAttempt(LoginController.java:36)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
    org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
    org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
    org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

这是我关心的类/配置文件：

我的仓库：

```
package com.accumed.protracking.repository;

import java.util.List;

import javax.annotation.Resource;

import org.hibernate.Query;
import org.hibernate.SessionFactory;
import org.hibernate.classic.Session;
//import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Repository;
import org.springframework.transaction.annotation.Transactional;

import com.accumed.protracking.domain.UserInfo;

@Repository("userInfoRepository")
@Transactional
public class JpaUserInfoRepository implements UserInfoRepository {

    // @Autowired
    // private SessionFactory sessionFactory;

    private SessionFactory sessionFactory;  

    public SessionFactory getSessionFactory() {
        return sessionFactory;
    }

    @Resource(name="sessionFactory")
    public void setSessionFactory(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    }

    @Override   
    @Transactional(readOnly = true)
    public UserInfo get(String domain, String username, String password) {

        Session session = sessionFactory.getCurrentSession();

        Query query = session.getNamedQuery("callUserInfoGetProcedure")
                .setParameter("domain", domain)
                .setParameter("username", username)
                .setParameter("password", password);

        List result = query.list();

        if(result.size() > 0)
            return (UserInfo) result.get(0);

        return null;
    }

} 
```

我的实体：

```
package com.accumed.protracking.domain;

import static javax.persistence.GenerationType.IDENTITY; 

import javax.persistence.*;

import org.hibernate.validator.constraints.NotEmpty;

@NamedNativeQueries({
    @NamedNativeQuery(
    name = "callUserInfoGetProcedure",
    query = "exec UserInfoGet :domain, :username, :password",
    resultClass = UserInfo.class
    )
})

@Entity
@Table(name = "userInfo")
public class UserInfo {

    @NotEmpty
    private String domainName;
    @NotEmpty
    private Boolean corpActive;
    @NotEmpty
    private int tblCorporation_Id;
    @Id
    @NotEmpty
    private int tblUser_Id;
    @NotEmpty
    private Boolean active;
    @NotEmpty
    private int admin;
    @NotEmpty
    private String username;
    @NotEmpty
    private Boolean ForcePasswordUpdate;
    @NotEmpty
    private String nameFirst;
    @NotEmpty
    private String nameLast;
    @NotEmpty
    private int use_PT_CO_Ind;
    @NotEmpty
    private int serviceLevel;

    @Column(name = "DomainName")
    public String getDomainName() {
        return domainName;
    }
    public void setDomainName(String domainName) {
        this.domainName = domainName;
    }

    @Column(name = "CorpActive")
    public Boolean getCorpActive() {
        return corpActive;
    }
    public void setCorpActive(Boolean corpActive) {
        this.corpActive = corpActive;
    }

    @Column(name = "tblCorporation_Id")
    public int getTblCorporation_Id() {
        return tblCorporation_Id;
    }
    public void setTblCorporation_Id(int tblCorporation_Id) {
        this.tblCorporation_Id = tblCorporation_Id;
    }

    @GeneratedValue(strategy = IDENTITY)
    @Column(name = "tblUser_Id")
    public int getUserId() {
        return tblUser_Id;
    }
    public void setUserId(int tblUser_Id) {
        this.tblUser_Id = tblUser_Id;
    }

    @Column(name = "Active")
    public Boolean getActive() {
        return active;
    }
    public void setActive(Boolean active) {
        this.active = active;
    }

    @Column(name = "admin")
    public int getAdmin() {
        return admin;
    }
    public void setAdmin(int admin) {
        this.admin = admin;
    }

    @Column(name = "User_Id")
    public String getUsername() {
        return username;
    }
    public void setUsername(String username) {
        this.username = username;
    }

    @Column(name = "ForcePasswordUpdate")
    public Boolean getForcePasswordUpdate() {
        return ForcePasswordUpdate;
    }
    public void setForcePasswordUpdate(Boolean forcePasswordUpdate) {
        ForcePasswordUpdate = forcePasswordUpdate;
    }

    @Column(name = "NameFirst")
    public String getFirstName() {
        return nameFirst;
    }
    public void setNameFirst(String nameFirst) {
        this.nameFirst = nameFirst;
    }

    @Column(name = "NameLast")
    public String getLastName() {
        return nameLast;
    }
    public void setLastName(String nameLast) {
        this.nameLast = nameLast;
    }

    @Column(name = "Use_PT_CO_Ind")
    public int getUse_PT_CO_Ind() {
        return use_PT_CO_Ind;
    }
    public void setUse_PT_CO_Ind(int use_PT_CO_Ind) {
        this.use_PT_CO_Ind = use_PT_CO_Ind;
    }

    @Column(name = "getServiceLevel")
    public int getServiceLevel() {
        return serviceLevel;
    }
    public void setServiceLevel(int serviceLevel) {
        this.serviceLevel = serviceLevel;
    }

} 
```

服务：

```
package com.accumed.protracking.service;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import com.accumed.protracking.domain.UserInfo;
import com.accumed.protracking.repository.UserInfoRepository;

@Service("userInfoService")
@Transactional
public class UserInfoServiceImpl implements UserInfoService {

    @Autowired
    private UserInfoRepository userInfoRepository;

    @Override
    public UserInfo login(String domain, String username, String password)
            throws AuthenticationException {
        UserInfo userInfo = this.userInfoRepository.get(domain, username, password);
        if (userInfo == null) {
            throw new AuthenticationException("Wrong domain/username/password combination.", "invalid.username");
        }

        return userInfo;
    }
} 
```

控制器：

```
package com.accumed.protracking;

import javax.servlet.http.HttpSession;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.servlet.mvc.support.RedirectAttributes;

import com.accumed.protracking.domain.UserInfo;
import com.accumed.protracking.service.AuthenticationException;
import com.accumed.protracking.service.UserInfoService;

@Controller
@RequestMapping(value = "/login")
public class LoginController {

    public static final String ACCOUNT_ATTRIBUTE = "account";

    @Autowired
    private UserInfoService userInfoService;

    @RequestMapping(method = RequestMethod.GET)
    public String initial()
    {
        return "login";
    }

    @RequestMapping(method = RequestMethod.POST)
    public String loginAttempt(@RequestParam String domain, @RequestParam String username, @RequestParam String password,
            RedirectAttributes redirect, HttpSession session) throws AuthenticationException { 

        try {
            UserInfo userInfo = this.userInfoService.login(domain, username, password);
            session.setAttribute(ACCOUNT_ATTRIBUTE, userInfo);
            return "redirect:/index.htm";
        } catch (AuthenticationException ae) {
            redirect.addFlashAttribute("exception", ae);
            return "redirect:/login";
        }
    }
} 
```

网页.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/root-context.xml</param-value>
    </context-param>

    <!-- Creates the Spring Container shared by all Servlets and Filters -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <!-- Processes application requests -->
    <servlet>
        <servlet-name>appServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>appServlet</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

</web-app> 
```

我的根上下文.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="
        http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.1.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <!-- Root Context: defines shared resources visible to all other web components -->
    <context:component-scan base-package="com.accumed.protracking.service"/>

    <tx:annotation-driven/>

    <context:component-scan base-package="com.accumed.protracking.repository" />

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
        <property name="driverClassName" value="com.microsoft.sqlserver.jdbc.SQLServerDriver"/>
        <property name="url" value="jdbc:sqlserver:***********;databaseName=***********"/>
        <property name="username" value="***********"/>
        <property name="password" value="***********"/>
    </bean>    

    <bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="dataSource"/>
        <property name="packagesToScan" value="com.accumed.protracking.domain"/>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.H2Dialect</prop>
                <prop key="hibernate.max_fetch_depth">3</prop>
                <prop key="hibernate.jdbc.fetch_size">50</prop>
                <prop key="hibernate.jdbc.batch_size">10</prop>
                <prop key="hibernate.show_sql">true</prop>
            </props>
        </property>        
    </bean>    

    <bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

</beans> 
```

我的 servlet-context.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

    <!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

    <!-- Enables the Spring MVC @Controller programming model -->
    <annotation-driven />

    <!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
    <resources mapping="/resources/**" location="/resources/" />

    <!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->
    <beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <beans:property name="prefix" value="/WEB-INF/views/" />
        <beans:property name="suffix" value=".jsp" />
    </beans:bean>

    <context:component-scan base-package="com.accumed.protracking" />   

</beans:beans> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:02:53.247

将 @Transactional 添加到服务的适当方法（或控制器，如果您没有服务层）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T16:06:41.960

看起来您的存储库/服务缺少启动事务。

你可以把它放在你的班级或每个方法上，具体取决于你想怎么做

```
@Transactional(readOnly = true) 
```

您的保存方法将 readOnly 设置为 false。

然后在您的 spring 应用程序上下文中定义以下内容。

```
<context:component-scan base-package="com.accumed.protracking.service" /> 
<tx:annotation-driven /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T19:45:47.713

您的 Repository 类似乎与注入到您的服务中的类不匹配（AccountRepository 与 UserInfoRepository）——但我怀疑问题在于您没有注入对 Hibernate 会话工厂的引用。尝试将此添加到您的存储库：

```
@Autowired
private SessionFactory sessionFactory;

public void setSessionFactory(SessionFactory sessionFactory) {
    this.sessionFactory = sessionFactory
} 
```

参考：[Spring 文档](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/orm.html#orm-hibernate-straight)。

# javascript - 添加新事件时在jQuery weekcalendar中获取userId

> ID：14218958
> 
> 赞同：1
> 
> 时间：2013-01-08T15:56:08.673
> 
> 标签：javascript, jquery, jquery-plugins

我正在使用[jQuery weekcalendar](https://github.com/themouette/jquery-week-calendar)在日历中显示 appoitments 并通过简单的点击添加新的。在`eventNew` 函数中，我尝试获取`userId`已添加约会的 。谁能告诉我如何实现这一目标？

我能够得到约会的开始和结束日期：

```
eventNew : function(calEvent, $event, FreeBusyManager, calendar) {
  var isFree = true;
  $.each(FreeBusyManager.getFreeBusys(calEvent.start, calEvent.end), function() {
    if (
      this.getStart().getTime() != calEvent.end.getTime()
      && this.getEnd().getTime() != calEvent.start.getTime()
      && !this.getOption('free')
    ){
      isFree = false;
      return false;
    }
  });

  // add the event to the database
  console.log('start of new calendar event: ' + calEvent.start);
  console.log('end of new calendar event: ' + calEvent.end);
  // how do I get the userId here?
} 
```

在[Wiki](https://github.com/themouette/jquery-week-calendar/wiki/Script-options)中，我找到了一个名为 的函数`getUserId`，但我不知道如何实现它。任何帮助表示赞赏。

编辑：日历已准备好多用户。可以为不同的用户设置事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:28:57.057

好的，我想通了。所有这些函数都被调用，但你必须自己实现它们。所以这段代码设置`userId`了事件的：

```
setEventUserId: function(userId, calEvent, calendar) {
     console.log('set eventuserid is called');
     calEvent.userId = userId;
     return calEvent;
}, 
```

然后`eventNew`你可以调用`userId`：

```
eventNew : function(calEvent, $event, FreeBusyManager, calendar) {
  var isFree = true;
  $.each(FreeBusyManager.getFreeBusys(calEvent.start, calEvent.end), function() {
    if (
      this.getStart().getTime() != calEvent.end.getTime()
      && this.getEnd().getTime() != calEvent.start.getTime()
      && !this.getOption('free')
    ){
      isFree = false;
      return false;
    }
  });

  // add the event to the database
  console.log('start of new calendar event: ' + calEvent.start);
  console.log('end of new calendar event: ' + calEvent.end);
  console.log('userId of new calendar event: ' + calEvent.userId);
}, 
```

# autotools - Shell 变量作为 autoconf 宏输入

> ID：14218959
> 
> 赞同：0
> 
> 时间：2013-01-08T15:56:09.923
> 
> 标签：autotools, autoconf

我需要在 configure.ac 上检查 Erlang 库，但 erlang 应用程序列表位于单独的文件中，我必须运行一个程序来提取该列表。

通常，我可以这样做：

```
AC_ERLANG_CHECK_LIB([app1])
AC_ERLANG_CHECK_LIB([app2]) 
```

但是，由于实际的应用程序位于单独的文件中（并且我不想在 configure.ac 上重复它们，所以我正在考虑按照以下方式进行某处：

```
DEPS=`some command that gets app1, app2`
# DEPS=app1 app2

m4_foreach_w(dep, "$DEPS", [AC_ERLANG_CHECK_LIB([dep])]) 
```

我知道“$DEPS”在这里是错误的参数，因为它需要实际的值——比如 [app1 app2]。我还知道，在调用 ./configure 之前不会对 DEPS 变量进行评估，而 m4_foreach_w 需要先验 DEPS 的值。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T17:51:09.513

你可以试试：

```
m4_foreach_w(dep, m4_esyscmd([some command that generates list]),
       [AC_ERLANG_CHECK_LIB(dep)]) 
```

我怀疑这是一个坏主意，但我无法提供有关潜在陷阱的更多细节。如果是我，我宁愿对依赖项进行硬编码或`configure.ac`使用脚本生成依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:36:44.860

这种方法对你来说可能完全是矫枉过正，但我​​只会描述它。

当您运行程序以获取列表时，将输出转换为[GNU Autogen](http://www.gnu.org/software/autogen/) .def 文件格式：

**elib.def**

```
自动生成定义 elib；

elib = { name="app1"; };
elib = { name="app2"; };

```

`autogen`然后使用这样的模板文件调用：

**根.tpl**

```
[+ autogen5 模板
m4=%s.m4
(setenv "SHELL" "/bin/sh") +]#
[+ (dne "#" "#") +]
# 宏的注释
AC_DEFUN([CHECK_MY_ELIBS],
[
[+
FOR elib "\n" +]AC_ERLANG_CHECK_LIB([[+name+]])[+ENDFOR+]
])

```

这将输出一个宏**elib.m4**：

```
...
# 宏的注释
AC_DEFUN([CHECK_MY_ELIBS],
[
AC_ERLANG_CHECK_LIB([app1])
AC_ERLANG_CHECK_LIB([app2])
])

```

`configure.ac`然后在安装 elib.m4 后调用 CHECK_MY_ELIBS `AC_CONFIG_MACRO_DIR`。

您当然可以通过其他方式（例如 perl、python）生成 elib.m4，但这并不难。

# sql - 将列值连接成逗号分隔的字符串

> ID：14218960
> 
> 赞同：-2
> 
> 时间：2013-01-08T15:56:11.250
> 
> 标签：sql, sql-server

> **可能重复：**
> [SQL Server 中的 Concat 组](https://stackoverflow.com/questions/941103/concat-groups-in-sql-server)

请看下面的表结构：

```
CREATE TABLE Person (ID INT, Name varchar(30), primary key(ID))
CREATE TABLE Warnings (ID INT, PersonID INT, Description VARCHAR(100), FOREIGN KEY (PersonID) REFERENCES Person(ID))

INSERT INTO Person (1,'Robert')
INSERT INTO Person (2,'Maria')

INSERT INTO Warnings (1,1,'Spitting')
INSERT INTO Warnings (2,1,'Punching')
INSERT INTO Warnings (3,1,'Pinching')

INSERT INTO Warnings (4,2,'Offenive words')
INSERT INTO Warnings (5,2,'Lateness') 
```

我试图得到这样的输出：

```
Name    Offences
Robert  Spitting,Punching, Pinching
Maria   Offensive words, Lateness 
```

我查看了数据透视表和以下函数：STUFF 和 QUOTENAME。我还没有找到解决方案。与一个人有关的犯罪数量是未知的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T16:00:51.673

```
SELECT
     a.[Name],
     STUFF(
         (SELECT ',' + [Description]
          FROM Warnings
          WHERE [PersonID] = a.[ID]
          FOR XML PATH (''))
          , 1, 1, '')  AS Offences
FROM Person AS a
     INNER JOIN Warnings b
        ON a.ID = b.PersonID
GROUP BY a.ID,a.[Name] 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/7b0b7/5)

# templates - Play 框架 Scala 模板中的“匹配”导致编译错误

> ID：14218964
> 
> 赞同：4
> 
> 时间：2013-01-08T15:56:34.760
> 
> 标签：templates, scala, playframework, playframework-2.0

在我的 Play 2.0 应用程序中，我有以下`match`表达式：

```
@item.level match {
    case 0 => {?}
    case 1 => {Beginner}
    case 2 => {Medium}
    case 3 => {Expert}
} 
```

但我收到错误消息

```
')' expected but 'case' found. 
```

指向最后一个花括号。

这里有什么问题？它看起来很像[文档](http://www.playframework.org/documentation/2.0.4/ScalaTemplates)中的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T15:59:34.020

这应该工作

```
@{item.level match {
    case 0 => "?"
    case 1 => "Beginner"
    case 2 => "Medium"
    case 3 => "Expert"
}} 
```

你需要外部`{}`来表明整个事情是一个 Scala 表达式。我假设这些案例具有您要输出的字符串。在这种情况下，您必须引用它们。如果它们是标识符，那么您的语法将是正确的，但是您不需要`{}`那里。

# objective-c - 从 AppDelegate 推送到特定的 viewController

> ID：14218966
> 
> 赞同：0
> 
> 时间：2013-01-08T15:56:35.727
> 
> 标签：objective-c, ios

我的应用程序层次结构如下所示：

```
tabBarController >> navigationControllers (multiple) >> viewControllers (multiple) 
```

当某个事件发生在`appDelegate`我想要在其中一个导航控制器中推送一个特定的视图控制器时。现在我有这个：

```
UINavigationController *myNavigationController = [[(UITabBarController*)self.window.rootViewController viewControllers] objectAtIndex:0];

UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle: nil];
StoreViewController *targetViewController = (StoreViewController*)[mainStoryboard instantiateViewControllerWithIdentifier:@"StoreViewController"];

[myNavigationController pushViewController:targetViewController animated:YES]; 
```

这仅在应用程序当前位于与 targetViewController 相同的 navigationController 中时才有效。无论您在应用程序中的哪个位置，我都希望它能够工作。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T17:10:35.360

在进行推送之前，您需要以编程方式切换到特定导航控制器所在的选项卡 0。

```
UITabBarController *tbc = (UITabBarController*)self.window.rootViewController;
tbc.selectedIndex = 0;
UINavigationController *myNavigationController = tbc.selctedViewController;
etc...... 
```

上面的代码假设你想从一个特定的导航控制器（选项卡 0 中的那个）推送 targetViewController，但如果你不关心哪个导航控制器推送它，那么只需删除 tbc.selectedIndex = 0 行。以下行将推送当前选择的导航控制器。我不确定你的问题，你想要哪个。

# asp.net - 将今天设置为 ASP.Net SqlDataSource 插入参数默认值

> ID：14218983
> 
> 赞同：0
> 
> 时间：2013-01-08T15:57:26.367
> 
> 标签：asp.net, parameters, default-value, sqldatasource

使用这个 ASP.Net，当用户单击 DetailsView 的“新建”按钮时，我们希望看到今天的日期出现在日期文本框中，这样他们就可以在实际插入数据之前在文本框中看到日期。

```
<InsertParameters>
    <asp:Parameter Name="ClassID" Type="Int32" />
    <asp:Parameter Name="StudentID" Type="Int32" />
    <asp:Parameter Name="Absent" Type="String" />
    <asp:Parameter Name="Late" Type="String" />
    <asp:Parameter Name="LateTimeArrivedAtSchool" Type="DateTime" />
    <asp:Parameter DbType="Date" Name="DateAttendanceTaken"  DefaultValue= "<%=DateTime.Now.ToString() %>"/>
</InsertParameters> 
```

我已经尝试使用 DefaultValue = "<%=DateTime.Now.ToString() %>" 但文本框中没有出现日期。

这是 DetailsView 中文本框的标记：

```
<asp:TemplateField 
    HeaderText="Attendance Date:" SortExpression="DateAttendanceTaken">

    <EditItemTemplate>
        <asp:TextBox 
            ID="TextBoxDateAttendanceTaken" 
            runat="server" 
            Text='<%# Bind("DateAttendanceTaken", "{0:MM/dd/yyyy}") %>'>
        </asp:TextBox>

        <asp:RequiredFieldValidator ID="RequiredFieldValidatorEditDate" runat="server" ControlToValidate="TextBoxDateAttendanceTaken" 
            ErrorMessage="Please enter the Attendance Date." Font-Bold="True" Font-Italic="True" ForeColor="Red" 
            SetFocusOnError="True" Display="Dynamic"></asp:RequiredFieldValidator>
    </EditItemTemplate>

    <InsertItemTemplate>
        <asp:TextBox 
            ID="TextBoxDateAttendanceTakenInsert" 
            runat="server" 
            Text='<%# Bind("DateAttendanceTaken", "{0:MM/dd/yyyy}") %>'>
        </asp:TextBox>

        <asp:RequiredFieldValidator ID="RequiredFieldValidatorInsertDate" runat="server" ControlToValidate="TextBoxDateAttendanceTakenInsert" 
            ErrorMessage="Please enter the Attendance Date." Font-Bold="True" Font-Italic="True" ForeColor="Red" 
            SetFocusOnError="True" Display="Dynamic"></asp:RequiredFieldValidator>
    </InsertItemTemplate>

    <ItemTemplate>
        <asp:Label 
            ID="LabelDateAttendanceTaken" 
            runat="server" 
            Text='<%# Bind("DateAttendanceTaken", "{0:MM/dd/yyyy}") %>'>
        </asp:Label>
    </ItemTemplate>

    <ItemStyle ForeColor="Blue" />
</asp:TemplateField> 
```

*** 更新 ***

我发现要让它工作，需要添加 OnDataBinding，如下所示，并确保代码隐藏文件中有一个处理程序，如下所示。

InsertItemTemplate 标记：

```
<InsertItemTemplate>
    <asp:TextBox 
        ID="TextBoxDateAttendanceTakenInsert" 
        runat="server" 
        Text='<%# Bind("DateAttendanceTaken", "{0:MM/dd/yyyy}") %>'
        OnDataBinding="TextBoxDateAttendanceTakenInsert_DataBinding">
    </asp:TextBox>

</InsertItemTemplate> 
```

代码隐藏文件中的处理程序：

```
Protected Sub TextBoxDateAttendanceTakenInsert_DataBinding(sender As Object, e As EventArgs)

    Dim txtBox As New TextBox
    txtBox = DetailsView.FindControl("TextBoxDateAttendanceTakenInsert")
    txtBox.Text = DateTime.Now.ToString("d")
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:03:56.473

您可以使用新按钮的 post back 通过抓取 ListView 的插入项并找到`TextBoxDateAttendanceTakenInsert`文本框来设置文本框。

将文本框的值设置为`DateTime.Now`.

[插入项](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.insertitem%28v=vs.100%29.aspx)

```
protected void NewButtonClick(object sender, EventArgs e)
{
    //Code to change to set Insert
    //get insert item
    object control = MyDetailsView.FindControl("TextBoxDateAttendanceTaken")
    //check for null
    if(control != null){
        TextBox tBox = (TextBox)control; //cast to TextBox
        tBox.Text = DateTime.Now.ToString(); //set text
    }
} 
```

VB：

```
Dim tBox As TextBox =  CType(MyDetailsView.FindControl("TextBoxDateAttendanceTaken"), TextBox)
tBox.Text = DateTime.Now.ToString 
```

应该这样做，它只是在每次单击 new 时将插入项中的文本框设置为当前日期时间。

# .net - 如何解决缺少的事件 ToolStripMenuItem.Showing？

> ID：14218985
> 
> 赞同：0
> 
> 时间：2013-01-08T15:57:34.023
> 
> 标签：.net, winforms, toolstripmenu

我需要知道何时显示工具条菜单项（以便在 JIT 基础上创建内容）。

我有一个潜在的非常大的东西层次结构。它可以在树形视图中导航，也可以通过“面包屑”导航，例如“音乐 > 流行音乐 > 迈克尔杰克逊 > 坏”。面包屑由工具条实现，每个级别都显示有一个 LinkLabel。当点击一个链接时，例如“音乐”，一个上下文菜单与当前项目的所有同级一起动态构建。

我试图营造一种总是加载整个层次结构的错觉。当我获取数据时，我确保获得足够的信息来呈现一个节点并知道该节点是否有子节点。如果它确实有孩子，我创建一个具有特殊含义的虚拟节点“这个项目有卸载的孩子”并将其作为唯一的孩子。这会导致树视图将节点呈现为可展开的。然后，我使用树视图的 BeforeExpand 事件来获取下一个级别并及时更新节点集合，当它实际上将被显示时。

这对树很有效，但我需要对面包屑样式的上下文菜单做同样的事情。我已经为有孩子的项目创建了一个子菜单，将我的特殊“未加载的孩子”项目放在那里。问题是我找不到让我知道该子菜单何时显示的事件。这可以通过悬停、点击、键盘导航等方式实现；如果我还没有找到更合适的钩子，我真的不想破解它。

换句话说，我需要的是与“BeforeExpand”等效的东西，但对于 ToolStripMenuItem（根据 MS 自己的命名准则，事件 btw 应该称为“NodeExpanding”，即应该使用动名词形式（“ing”）而不是而不是“Before”前缀，过去时（“Expanded”）而不是“After”前缀）。

我希望很清楚我要做什么，并且有人知道如何解决这个问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:54:12.140

事实证明我可以使用 Paint 事件。我真的不认为它会起作用，但确实如此。

如果我们对 ToolStripMenuItem 使用术语“item”，对层次结构中的逻辑节点使用“node”，我们可以将 Paint 处理程序伪编码（实际上是我的 PoC 项目中的 C# 代码）：

```
void menuItem_Paint(object sender, PaintEventArgs e)
{
    var item = (ToolStripMenuItem)sender;

    var node = item.Tag as Node;
    if (node == null || node.Parent == null || node.Parent.RealChildren)
        return;

    node = node.Parent;
    item = FindMenuItem(menu.Items, node);

    if (node != null)
        ReplaceDummyWithData(node, item);
}

void ReplaceDummyWithData(Node node, ToolStripMenuItem item)
{
    Dbug("Removing dummy: {0}", node.Label);

    // Modify logical tree..
    node.Remove(node.Children[0]);
    MakeNode(node, "Data #1");
    MakeNode(node, "Data #2");

    // Rebuild menu items..
    item.DropDownItems.Clear();
    AddMenuItems(item.DropDownItems, node.Children);
    node.RealChildren = true;
} 
```

我真的不认为这会起作用，但它似乎工作正常。我刚刚硬编码了一个无限深的层次结构，其中每个项目都有两个标记为“Data #1”和“Data #2”的孩子，但修改它并不难，因此项目是根据真实数据创建的。关键是要找出一种及时修改菜单项树的方法，这似乎是一种可以接受的方法。

FindMenuItem 是对使用给定节点标记的项目的递归搜索，

```
ToolStripMenuItem FindMenuItem(ToolStripItemCollection collection, Node node)
{
    foreach (ToolStripMenuItem item in collection)
    {
        if (item.Tag == node)
            return item;

        var found = FindMenuItem(item.DropDownItems, node);
        if (found != null) 
            return found;
    }
    return null;
} 
```

PoC 中的 MakeNode 总是会创建一个虚拟孩子，尽管在数据驱动的事情中，我将根据它是否真的有孩子来做：

```
Node MakeNode(Node parent, string label)
{
    var n = new Node(parent) { Label = label, RealChildren = false };
    new Node(n) { Label = "dummy" };
    return n;
} 
```

Node 构造函数接受父节点；也许不是最易读的代码。它来自我的 PoC，代码的目的是找出我的问题的解决方案，而不是编写在其他方面都很棒的代码！

# php - 如何在 Laravel 中执行 where 子句

> ID：14218988
> 
> 赞同：2
> 
> 时间：2013-01-08T15:57:37.127
> 
> 标签：php, laravel

我正在尝试使用 Laravel 4 中的 where 子句来调用我的数据库。听起来很简单，但我遇到了一个没有意义的错误。此调用有效：

```
return MainContact::all(); 
```

当我查看该页面时，我得到了我的数据的 JSON 表示，以及我的所有数据，正如你所期望的那样。它包括：

```
... "flag":1 ... 
```

因此，当我尝试这样做时，如 Laravel 文档中所述：

```
return MainContact::where('flag', '=', '1'); 
```

你会认为它会起作用，但事实并非如此。我已经尝试将数字作为字符串和整数，但都不起作用。我收到此错误：

```
ErrorException: Catchable Fatal Error: Object of class 
Illuminate\Database\Eloquent\Builder could not be converted to string in 
/Users/universal/Sites/universalLaser/leads/vendor/symfony/http-foundation/Symfony/
Component/HttpFoundation/Response.php line 351 
```

Laravel 4 中的 where 子句有什么变化吗？还是我不明白该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T16:00:05.837

你有没有尝试过：

```
return MainContact::where('flag', '=', '1')->get(); 
```

或更简单地说：

```
return MainContact::where_flag(1)->get(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T16:00:29.443

你需要`get()`在最后调用方法。

```
return MainContact::where('flag', '=', '1')->get(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-24T03:27:44.497

谢谢指导！

我使用类别表：

*   ID
*   姓名
*   parent_id

并通过：

```
<?php

Route::get('/', function()
{
    return Categories::where('parent_id', '>', 0);
}); 
```

返回错误是 Illuminate\Database\Eloquent\Builder 类的对象无法转换为字符串

所以我尝试 ->get() 在它工作的结束代码中。

# c# - 克隆不同对象属性的最佳方法

> ID：14218989
> 
> 赞同：4
> 
> 时间：2013-01-08T15:57:44.763
> 
> 标签：c#, reflection, cloning

我有一个需要将视图模型与数据库模型同步的 MVC3 应用程序。我发现自己编写了太多代码来在不同对象之间来回复制属性。我避免了这种情况，我可以简单地对数据模型进行子类化，但在其他时候，我发现这太限制了。

我在 Object 上开发了一些扩展方法来支持具有相似名称的属性的浅层克隆，并且效果很好。但是，我想知道是否有更有效的方法来完成同样的事情。所以我想这是要求同行评审和改进此代码的选项。

更新：我发现明确处理相关表更好。对 IsVirtual 的测试将防止在克隆期间无意中影响关系。请参阅更新的 CloneMatching 方法。其他人明确说明要更新或排除哪些属性。

```
public static class CustomExtensions
{
   public static T CloneMatching<T, S>(this T target, S source)
       where T : class
       where S : class
    {
        if (source == null)
        {
            return target;
        }
        Type sourceType = typeof(S);
        Type targetType = typeof(T);
        BindingFlags flags = BindingFlags.IgnoreCase | BindingFlags.Public | BindingFlags.Instance;

        PropertyInfo[] properties = sourceType.GetProperties();
        foreach (PropertyInfo sPI in properties)
        {
            PropertyInfo tPI = targetType.GetProperty(sPI.Name,flags);
            if (tPI != null && tPI.PropertyType.IsAssignableFrom(sPI.PropertyType) && !tPI.PropertyType.IsVirtual)
            {
                tPI.SetValue(target, sPI.GetValue(source, null), null);
            }
        }
        return target;
    }

    public static T CloneProperties<T, S>(this T target, S source, string[] propertyNames)
       where T : class
       where S : class
    {
        if (source == null)
        {
            return target;
        }
        Type sourceType = typeof(S);
        Type targetType = typeof(T);
        BindingFlags flags = BindingFlags.IgnoreCase | BindingFlags.Public | BindingFlags.Instance;

        PropertyInfo[] properties = sourceType.GetProperties();
        foreach (PropertyInfo sPI in properties)
        {
            if (propertyNames.Contains(sPI.Name))
            {
                PropertyInfo tPI = targetType.GetProperty(sPI.Name, flags);
                if (tPI != null && tPI.PropertyType.IsAssignableFrom(sPI.PropertyType))
                {
                    tPI.SetValue(target, sPI.GetValue(source, null), null);
                }
            }
        }
        return target;
    }
    public static T CloneExcept<T, S>(this T target, S source, string[] propertyNames)
       where T : class
       where S : class
    {
        if (source == null)
        {
            return target;
        }
        Type sourceType = typeof(S);
        Type targetType = typeof(T);
        BindingFlags flags = BindingFlags.IgnoreCase | BindingFlags.Public | BindingFlags.Instance;

        PropertyInfo[] properties = sourceType.GetProperties();
        foreach (PropertyInfo sPI in properties)
        {
            if (!propertyNames.Contains(sPI.Name))
            {
                PropertyInfo tPI = targetType.GetProperty(sPI.Name, flags);
                if (tPI != null && tPI.PropertyType.IsAssignableFrom(sPI.PropertyType))
                {
                    tPI.SetValue(target, sPI.GetValue(source, null), null);
                }
            }
        }
        return target;
    }
} 
```

这是我如何使用它将视图模型映射到数据模型的示例。

```
DataSession.Quote.CloneProperties(viewModel,
                new[] {"PaymentType","CardHolder","CardHolderZip","CardNumber","CardExp","CVC",
                          "AccountHolder","AccountHolderZip","ABA","Account",
                          "AccuracyAgreement","PrivacyTermsAgreement","ElectronicSignatureAgreement"}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-09-06T08:40:39.980

您可以考虑使用`Object.MemberwiseClone`方法。

> 该`MemberwiseClone`方法通过创建一个新对象来创建浅拷贝，然后将当前对象的非静态字段复制到新对象中。( [docs.microsoft](https://docs.microsoft.com/en-us/dotnet/api/system.object.memberwiseclone?view=netstandard-1.0) )

该方法受到保护。这意味着您必须`Clone`在类中实现该方法。为了让事情变得更加有趣，您也可以添加`ICloneable`到您的课程中。

```
class MyClass: ICloneable
{
    // all your code
    MyClass Clone()
    {
        return (MyClass)this.MemberwiseClone();
    }
} 
```

# activemq - activemq 连接池

> ID：14218990
> 
> 赞同：2
> 
> 时间：2013-01-08T15:57:46.617
> 
> 标签：activemq

我正在使用 ActiveMQConnectionFactory 创建连接。我只创建一个连接。我有许多线程在这个创建会话和生产者的单个连接下运行（每个线程都有自己的会话和生产者）。

我的问题是：如果我只使用一个连接，那么我应该使用连接池（PooledConnectionFactory）还是应该坚持使用 ActiveMQConnectionFactory。任何人都可以解释这两者之间的区别（可能是基本术语，因为我仍在 activemq 的学习曲线上）。

谢谢。！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T19:24:00.063

答案是，这取决于。如果您只在应用程序中使用一个 Connection 并在应用程序的整个生命周期内保持打开状态，那么通过池化连接您不会获得太多收益，但是 PooledConnectionFactory 也确实会池化 Sessions 和 Producers，因此您仍然可以获得一些不创建和销毁 Sessions 和 Producers 但是如果你不创建和销毁这些资源，那么你也不需要池化它们。

池连接的东西将创建一个连接并在闲置之前将其保持打开一段时间（可配置），因此如果您的应用程序倾向于创建连接，请使用它一段时间并关闭它，以便稍后再创建另一个连接那么游泳池可能是一个不错的选择。

最后，您需要检查您的应用程序并查看您如何使用 JMS 资源。此外，查看它是否为您带来任何性能的最佳方法是尝试它并测量与不使用它相比的结果。

# python - shlex.split 仍然不支持 unicode？

> ID：14218992
> 
> 赞同：12
> 
> 时间：2013-01-08T15:57:53.543
> 
> 标签：python, unicode, python-unicode, shlex

根据文档，在 Python 2.7.3 中，shlex 应该支持 UNICODE。但是，当运行下面的代码时，我得到：`UnicodeEncodeError: 'ascii' codec can't encode characters in position 184-189: ordinal not in range(128)`

难道我做错了什么？

```
import shlex

command_full = u'software.py -fileA="sequence.fasta" -fileB="新建文本文档.fasta.txt" -output_dir="..." -FORMtitle="tst"'

shlex.split(command_full) 
```

确切的错误如下：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/shlex.py", line 275, in split
    lex = shlex(s, posix=posix)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/shlex.py", line 25, in __init__
    instream = StringIO(instream)
UnicodeEncodeError: 'ascii' codec can't encode characters in position 44-49: ordinal not in range(128) 
```

这是我的 mac 使用来自 macports 的 python 的输出。我在使用“本机”python 2.7.3 的 Ubuntu 机器上遇到了完全相同的错误。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-08T16:07:20.940

该代码将两个实例`shlex.split()`都包装在一个对象中`unicode()`，该对象只能处理 Latin-1 字节（因此不是完整的 unicode 代码点范围）。`str()``StringIO()`

如果您仍想使用，则必须进行编码（UTF-8 应该可以）`shlex.split()`；该模块的维护者意味着`unicode()`现在支持对象，而不是拉丁 1 代码点范围之外的任何东西。

编码、拆分、解码给了我：

```
>>> map(lambda s: s.decode('UTF8'), shlex.split(command_full.encode('utf8')))
[u'software.py', u'-fileA=sequence.fasta', u'-fileB=\u65b0\u5efa\u6587\u672c\u6587\u6863.fasta.txt', u'-output_dir=...', u'-FORMtitle=tst'] 
```

一个[现已关闭的 Python 问题](http://bugs.python.org/issue742290)试图解决这个问题，但该模块非常面向字节流，并且没有实现新的补丁。现在使用`iso-8859-1`或`UTF-8`编码是我能为你想出的最好的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-13T09:02:27.037

实际上已经有五年多的补丁了。去年我厌倦了在每个项目中复制一个 ushlex 并将其放在 PyPI 上：

[https://pypi.python.org/pypi/ushlex/](https://pypi.python.org/pypi/ushlex/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-25T07:23:12.280

我用的是 Python 2.7.16，发现

> shlex 可以使用通用字符串 'xxxx'
> 
> ushlex 可以与 u'xxx' 一起使用

```
# -*- coding:utf8 -*-
import ushlex
import  shlex

command_full1 = 'software.py -fileA="sequence.fasta" -fileB="新建文本文档.fasta.txt" -output_dir="..." -FORMtitle="tst"'
print shlex.split(command_full1)

command_full2 = u'software.py -fileA="sequence.fasta" -fileB="新建文本文档.fasta.txt" - output_dir="..." -FORMtitle="tst"'
print ushlex.split(command_full2) 
```

输出：

```
['software.py', '-fileA=sequence.fasta', '-fileB=\xe6\x96\xb0\xe5\xbb\xba\xe6\x96\x87\xe6\x9c\xac\xe6\x96\x87\xe6\xa1\xa3.fasta.txt', '-output_dir=...', '-FORMtitle=tst']
[u'software.py', u'-fileA=sequence.fasta', u'-fileB=\u65b0\u5efa\u6587\u672c\u6587\u6863.fasta.txt', u'-output_dir=...', u'-FORMtitle=tst'] 
```

# batch-file - 命令提示符语法

> ID：14218993
> 
> 赞同：-1
> 
> 时间：2013-01-08T15:57:58.503
> 
> 标签：batch-file, command-prompt

谁能告诉我这个命令提示符是做什么的？我在网上找不到。

```
echo ============================================================ > %name1%\%name2% 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:01:18.210

不是提示，它是在变量命名的目录下的变量`=`名的文件中写入一行字符。`name2``name1`

# python - 通过 Django 从 Twisted 应用程序访问数据库

> ID：14218994
> 
> 赞同：0
> 
> 时间：2013-01-08T15:58:00.567
> 
> 标签：python, database, django, asynchronous, twisted

**原来的问题**

我想从 Twisted 异步应用程序中对数据库运行查询。例如添加新记录、更新某些内容或获取一些数据。

**我的提议**

我考虑在 django 中制作只有 Twisted 应用程序才能访问的特殊视图，这将对我需要的数据库执行各种操作。

在示例中，url`domain.com/server/getuserdata/{{ user_id }}/`将以某种方便的格式（json）返回有关用户的数据。

GET/POST 请求将在 Twisted 中延迟，因此它不会阻止我的 Twisted 应用程序（如果我错了，请纠正我）。

我的 Twisted 应用程序只会偶尔运行这些请求。它不是实时更新数据。实时数据将存储在 Redis 中，一旦我准备好将其存储在 Django 数据库中，我就会使用存储在 redis 中的数据向 Django 运行请求。

但是每秒仍然可能有很多来自服务器的请求（比如说从 100 到 1000）。

**我读到的另一种方法**

*   扭曲的[nadbapi](http://developer.berlios.de/projects/nadbapi/)，但它自 2007 年以来没有更新，所以我不想诚实地使用它
*   将请求存储在 Redis 中并由另一个守护程序/应用程序或 cron 运行它们。

**问题**

*   对 Django 的 GET/POST 请求使用延迟对象是一种好方法吗？
*   我能以某种方式告诉 Django Twisted 应用程序是受信任的，因此它不会像 DDOS 一样对待它吗？
*   对于这么多请求（当然使用缓存），这是否足够快？
*   这项任务有更好的方法吗？

*我是 Twisted 的新手，并且将异步应用程序与同步应用程序集成在一起，所以如果我输入了一些愚蠢的东西，我很抱歉*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:17:29.770

> 对 Django 的 GET/POST 请求使用延迟对象是一种好方法吗？

我希望我有经验来深入回答这个问题。我相信只要请求是异步的，你在扭曲的一面就会很好。我基于我对龙卷风的基本经验。应用程序必须请求 web 服务是相对常见的，而 tornado 提供了一种内置到框架中的异步方式来执行此操作。

> 我能以某种方式告诉 Django Twisted 应用程序是受信任的，因此它不会像 DDOS 一样对待它吗？

我不认为 django 天生就知道请求它的服务是什么。它不会限制速度或开箱即用的请求。它只是响应对其提出的任何请求。如果这些是它可以处理的更多请求，它将崩溃。django 可以处理多少请求取决于您的项目以及如何部署它。您可以使用 gunicorn 轻松运行它并`nginx`坐在它前面。如果它没有按预期执行，您可以启动另一个`gunicorn`实例。

> 对于这么多请求（当然使用缓存），这是否足够快？

我想没有人可以说。您可能必须自己对其进行基准测试。有许多博客文章/文章对各种 django 服务器配置进行了基准测试。

> 这项任务有更好的方法吗？

我认为这是一种比较普遍的做法。通过 django 通过 RESTful 接口公开您的方法。从twisted 发出异步请求。

# xpages - 取消隐藏面板客户端/隐藏服务器端？

> ID：14218998
> 
> 赞同：0
> 
> 时间：2013-01-08T15:58:06.587
> 
> 标签：xpages

我试图通过设置它的样式来取消隐藏面板客户端。我对style属性的初始设置是：display:none；

我想用以下代码取消隐藏它：

```
 var fileUploadPanel = dojo.byId("fileUploadPanel");
 var fileUpload1 = dojo.byId("fileUpload1");
 dojo.style(fileUploadPanel, "display", "block");
 fileUpload1.focus(); 
```

但我得到一个 javscript 错误样式为 null 或不是对象。知道为什么吗？面板应该有一个正确的样式属性吗？

同样作为后续，我需要能够使用另一个按钮再次隐藏该面板，但它必须是 SSJS。无论如何要这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T16:03:37.710

您是否尝试过使用客户端 ID？

```
 dojo.byId("#{id:fileUploadPanel}");
 var fileUpload1 = dojo.byId("#{id:fileUpload1}"); 
```