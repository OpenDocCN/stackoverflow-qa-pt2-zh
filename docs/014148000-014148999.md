# StackOverflow 问答 14148000-14148999

# gcc - 强制 solib 依赖在使用 gcc 的目录下具有非标准命名共享库的相对路径

> ID：14148004
> 
> 赞同：1
> 
> 时间：2013-01-03T22:04:37.163
> 
> 标签：gcc, linker, relative-path, absolute-path, ldd

我有一个关于在多个目录下使用非标准命名约定链接共享库的问题。我需要生成的可执行文件在可执行文件当前位置搜索共享库，但找不到命令行参数来强制执行此行为。

为了演示这种行为，只需要一个目录下的共享库。

```
gcc -shared mylib.c -o some/dir/mylib.so

gcc main.c -o main -Lsome/dir -l:mylib.so 
```

可执行文件**main**给出以下 ldd 输出：

```
ldd main
     some/dir/mylib.so (0xf76e2000) 
```

我需要的输出是：

```
ldd main
     mylib.so => some/dir/mylib.so (0xf7700000) 
```

**如果库按惯例命名为libmylib.so**而不是**mylib.so**，则可以创建此输出，如下所示：

```
mv some/dir/mylib.so some/dir/libmylib.so
gcc main.c -o main -Lsome/dir -lmylib 
```

这也会根据需要删除 ldd 列表中的路径**some/dir**。

我已经调查了 rpath 的使用，以及 ld 和 gcc 的命令行选项，但我无法找到令人满意的解决方案。在这种情况下，不能轻易更改非标准名称和目录结构的严格要求。

我的问题是如何通过 gcc 命令行选项强制库的依赖关系相对于当前目录，而不是像第二个 ldd 中那样绝对。

谢谢你的时间，我希望我已经合理地解释了这个问题。

乔恩。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T13:41:40.780

尝试在您的共享库中添加[soname ：](http://en.wikipedia.org/wiki/Soname)

```
$ gcc -shared mylib.c -o some/dir/mylib.so -Wl,-soname=mylib.so
$ gcc main.c -o main -Lsome/dir -l:mylib.so
$ LD_LIBRARY_PATH=some/dir:$LD_LIBRARY_PATH ldd main
        mylib.so => some/dir/mylib.so (0x00007fa7a4fd6000) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:01:48.953

您可以将一个魔术变量传递给 rpath 来执行此操作：`$ORIGIN`. 详情请参阅`man ld.so`。

我认为在您的情况下，该命令应如下所示（未经测试）：

```
gcc main.c -o main -Lsome/dir -lmylib -Wl,-rpath,'$ORIGIN/some/path' 
```

请注意，您不能让外壳扩展`$ORIGIN`为外壳变量。

顺便说一句，这是“rpath relative”的第一个谷歌命中。

# wordpress - wordpress 不正确的子目录转到“损坏的主页”

> ID：14148007
> 
> 赞同：1
> 
> 时间：2013-01-03T22:04:46.327
> 
> 标签：wordpress, url, subdirectory

我刚刚完成了一个网站（www.pickmixmagazine.com）。它工作正常，但我遇到的问题是，如果我转到一个不存在的子目录，例如 www.pickmixmagazine.com/unknownsubdomain，那么它将转到主页的损坏版本。

任何帮助将不胜感激

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:44:49.483

您需要设置一个 404.php 页面。

# java - 日志异常和参数

> ID：14148017
> 
> 赞同：1
> 
> 时间：2013-01-03T22:05:36.150
> 
> 标签：java, slf4j

我将 sl4j-api 1.7.2 与 slf4j-log4j12 一起使用。

我想记录这样的事情：

> 22:52:27,345 WARN [class] 无法加载用户 1 - 原因：javax.ejb.EJBException：javax.persistence.NoResultException：在 org.jboss.as.ejb3.tx.CMTTxInterceptor.handleExceptionInOurTx（CMTTxInterceptor .java:166) [jboss-as-ejb3-7.1.1.Final.jar:7.1.1.Final] 在 org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInOurTx(CMTTxInterceptor.java:230) [jboss- as-ejb3-7.1.1.Final.jar:7.1.1.Final] 在 org.jboss.as.ejb3.tx.CMTTxInterceptor.required(CMTTxInterceptor.java:304) [jboss-as-ejb3-7.1.1\. Final.jar:7.1.1.Final] ... fullstackTrace

所以我尝试了

```
try {
            //...
        } catch (Exception e) {
            logger.warn("Failed to load User {} - Reason : {}", userId, e);
        } 
```

或者

```
try {
               // ...
            } catch (Exception e) {
                logger.warn("Failed to load User {} - Reason : ", userId, e);
            } 
```

但这两种解决方案都不起作用

第一次尝试给：

> 无法加载用户 4 - 原因：javax.ejb.EJBException：javax.persistence.NoResultException：未找到查询的实体

第二 ：

```
Failed to load User 4 - Reason : 
```

有可能做到吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T22:32:21.170

检查[Logger API](http://www.slf4j.org/apidocs/org/slf4j/Logger.html)和[SL4J 常见问题解答](http://www.slf4j.org/faq.html#paramException)。您可能正在使用 1.6.0 之前的 SL4J 版本，如果您有一个参数占位符，`e`它将被解释为一个简单的对象（即 SL4J 将调用`e.toString()`），如果没有，则被忽略。

至于为什么它使用不同于 1.7.2 的版本，以前的版本可能包含在您的应用程序服务器类路径中，并且在您启动应用程序之前就已加载。

您可以尝试修复类加载问题或解决旧版本的行为。

如果您选择后一种路径，则从重载版本中您需要`warn(String msg, Throwable t))`自动扩展堆栈跟踪的版本：

```
logger.warn("Failed to load User " + userId + " - Reason",  e); 
```

或者`warn(String format, Object arg1, Object arg2)`带有为您扩展堆栈跟踪的代码。

```
if (logger.isWarnEnabled()) {
   StringWriter sw = new StringWriter();
   PrintWriter pw = new PrintWriter(sw);
   e.printStackTrace(pw);
   String expanded = sw.toString(); // stack trace as a string
   logger.warn("Failed to load User {} - Reason : {}", userId, expanded);
} 
```

# sql - 在 VS2012 和 SSDT 中设置数据库图？

> ID：14148018
> 
> 赞同：8
> 
> 时间：2013-01-03T22:05:37.500
> 
> 标签：sql, database, visual-studio-2012

当我想进入编程领域时，我正在阅读这本名为 Head First C#.NET 的书。

基本上这本书是为 VS2010 写的，但由于我的雇主给我买了 MSDN 许可证，我决定改用 VS2012。

书中的任务之一是创建一个本地数据库，并为其制作数据库图。不幸的是，从 VS2012 及更高版本开始，此功能已从 VS 本身中删除。

我已经用谷歌搜索了它，并读到它已被 SSDT 取代。因此，我安装了 SSDT，但仍然无法查看和/或创建数据库图。

“图表”功能是否从 2012 年开始完全弃用，我是否应该寻找完全不同的东西来获得我想要/需要的东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T15:32:45.420

根据[这篇文章](http://social.msdn.microsoft.com/Forums/en-US/ssdt/thread/24c9878f-e553-489d-8353-c97976eeb04e)，SSDT 中没有图表支持。

# google-drive-api - 有什么方法可以从 Google Drive API Permissions 获取电子邮件地址，以便区分 2 个同名用户？

> ID：14148021
> 
> 赞同：5
> 
> 时间：2013-01-03T22:05:45.887
> 
> 标签：google-drive-api

我从以前的帖子 [ [1](https://stackoverflow.com/questions/13635372/drive-api-external-sharing) , [2](https://stackoverflow.com/questions/11846293/value-attribute-for-permissions-resource-not-populated-in-responses) , [3](https://stackoverflow.com/questions/11240253/permissions-access) ] 中读到，由于隐私原因，Google Drive Permissions API 未显示电子邮件地址。但我正在尝试寻找一种方法来显示用户权限，其中有 2 个不同的用户同名。

使用 Google Drive 共享 UI，您可以区分两个具有相同名称的不同用户，因为它还会在他们的姓名旁边显示他们的电子邮件（如果 Google Drive UI 可以获取，我不明白为什么在 API 中无法做到这一点） .

我宁愿不必依赖现已弃用的 DocList API 从 ACL 获取电子邮件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T15:18:10.483

不幸的是，使用文档列表 API 是您目前获取电子邮件地址的唯一选择，抱歉。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-05-18T15:40:32.833

使用 v3 API yu 可以指定您请求的 fields 参数。

对于获取请求：`request.Fields = "kind,id,type,emailAddress,domain,role,allowFileDiscovery,displayName,photoLink,expirationTime,teamDrivePermissionDetails,deleted"`

对于列表请求：`request.Fields = "permissions(kind,id,type,emailAddress,domain,role,allowFileDiscovery,displayName,photoLink,expirationTime,teamDrivePermissionDetails,deleted)"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-24T07:20:45.800

```
About about = service.about().get().execute();
User user = about.getUser();            
System.out.println("user" + user.toString()); 
```

您可以打印出用户信息（JSON 字符串）。它包含电子邮件地址。

您可以解析电子邮件地址的 JSON 字符串。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-03-13T11:05:12.977

`list`不返回电子邮件，但`get`确实

```
permission = service.permissions.get(fileId,permissionId)
System.out.println("email" + permission.emailAddress); 
```

# ajax - 如何在没有 ajax 请求的情况下创建“实时”功能

> ID：14148022
> 
> 赞同：0
> 
> 时间：2013-01-03T22:05:49.723
> 
> 标签：ajax

我想创建一个网站，如果服务器上的文件被编辑（例如），用户会收到实时通知。

我可以通过 ajax 调用和 if/else 语句来检查是否有任何新内容，但我想知道是否可以通过其他方式来执行此操作，而不必求助于无限的 HTTP 请求。

还有另一种可能性吗？如果是，它将如何工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:10:23.883

是的：[http ://socket.io/](http://socket.io/)

即使它在服务器端使用 Node.JS，这也可能是个问题。

# objective-c - 如何在 Xcode 中复制菜单项？

> ID：14148024
> 
> 赞同：0
> 
> 时间：2013-01-03T22:06:09.333
> 
> 标签：objective-c, xcode, menuitem

所以我在 Xcode 中为 OS X 制作一个网页浏览应用程序，现在我正在研究历史。我的 MainMenu.xib 中有一个名为 history 的菜单，我想知道是否可以在每次用户加载新页面时添加一个菜单项（通过编码）。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T22:18:03.273

像这样的东西应该工作：

```
- (void)addHistoryItemWithTitle:(NSString *)title URL:(NSURL *)historyURL
    NSMenuItem *menuItem = [[[NSMenuItem alloc] initWithTitle:title action:@selector(goToHistoryItem:) keyEquivalent:@""] autorelease];
    menuItem.representedObject = historyURL;
    //Note: You would normally have an outlet for your History menu or use
    //      itemWithTag:, so that it works in localized versions of your app.
    NSMenuItem *historyMenuItem = [[NSApp mainMenu] itemWithTitle:@"History"];
    [[historyMenuItem submenu] addItem:menuItem];
} 
```

然后，在您的操作中，您可以检索您之前设置的 URL（或其他对象）`representedObject`：

```
- (void)goToHistoryItem:(id)sender
{
    NSURL *historyURL = [sender representedObject];
    NSLog(@"history item selected: %@", historyURL);
} 
```

# html - 使用 CSS 调整 HTML 选择的大小会破坏 Chrome 中控件的滚动条

> ID：14148026
> 
> 赞同：0
> 
> 时间：2013-01-03T22:06:21.790
> 
> 标签：html, css, google-chrome, resize, html-select

我在使用 Chrome（v23、Win 和 Ubuntu）时遇到问题。当允许选择控件调整大小时，滚动条的向下箭头停止工作——它不会滚动选项。但是，滚动条的其余功能仍然有效。

```
select {
  resize: both;
  overflow: scroll;
}​ 
```

这是一个[小提琴](http://jsfiddle.net/5He3m/)

问题：我做错了什么，还是 Chrome 错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T20:24:01.937

我的[Chromium 错误报告](http://code.google.com/p/chromium/issues/detail?id=168253)已被确认。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T22:23:53.713

`SELECT`（以及复选框，收音机）是真正由操作系统呈现的那些奇怪元素之一，而不是 HTML。通过 CSS 设置样式的能力没有得到很好的支持。

# iphone - 如何使隐形按钮后面的图像看起来像是被按下了？

> ID：14148029
> 
> 赞同：2
> 
> 时间：2013-01-03T22:06:27.063
> 
> 标签：iphone, ios, ipad, uibutton, ibaction

嗨，我有几个图像被一个不可见的按钮覆盖。当我按下隐形按钮时，有没有办法让它看起来像被按下的图像？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T22:18:11.877

您可以将图像直接放在按钮上，不需要单独的`UIImageView`.

```
[button setBackgroundImage:image forState:UIControlStateNormal];
[button setBackgroundImage:image forState:UIControlStateSelected]; 
```

还有几个`UIControlState`常数。

看看文档：

[http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIButton_Class/UIButton/UIButton.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIButton_Class/UIButton/UIButton.html)

[http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIControl_Class/Reference/Reference.html#//apple_ref/c/tdef/UIControlState](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIControl_Class/Reference/Reference.html#//apple_ref/c/tdef/UIControlState)

# html - 底部和右侧绝对定位在 IE 上不起作用

> ID：14148031
> 
> 赞同：0
> 
> 时间：2013-01-03T22:06:34.077
> 
> 标签：html, css, internet-explorer

我正在制作一个网站，我需要在其中设置文本位置`bottom`和`right`规则。`absolute`

但是好像IE9只懂`position:absolute;`而不懂`bottom:xx;`or `right:xx;`。

这是我正在谈论的图片：

IE：

![在此处输入图像描述](../Images/1cf4098c5163d2c7d483a8235b2f1909.png)

铬合金： ![在此处输入图像描述](../Images/28367e017a1072e531e73ae97d023b37.png)

HTML：

```
<div id="slides_wrapper">           
    <a href="gallery.aspx">
        <div id="gallery_slide">                                        
            <p>Gallery</p>                        
        </div>
    </a>
    <a href="sessions.aspx">
        <div id="sessions_slide">
            <p>Sessions</p>
        </div>
    </a>
    <a href="offers.aspx">
        <div id="offers_slide">
            <p>Offers</p>                        
        </div>
    </a>
    <a href="about.aspx">
        <div id="about_slide">              
            <p>About Us</p>                        
        </div>
    </a>
    <a href="contact.aspx">
        <div id="contact_slide">                
            <p>Contact Us</p>
        </div>
    </a>                
</div> 
```

该部分的CSS：

```
#slides_wrapper 
{
    text-align:center;
}

#slides_wrapper div
{
    border-radius : 5px;
    border:1px inset black;
    height:500px;
    width:120px;
    display:inline-block;
    cursor:pointer;    
    position:relative;
}

#slides_wrapper p 
{
    text-shadow :3px 3px 9px black;    
    white-space:nowrap;
    font-size:28px;
    font-family:arial;
    font-weight:bold;
    color:White;
    -webkit-transform: rotate(-90deg);
    -moz-transform: rotate(-90deg);
    -ms-transform: rotate(-90deg);
    -o-transform: rotate(-90deg);
    position:absolute;

}

#gallery_slide
{
    background: url('../img/gallery_slide.jpg') no-repeat -130px -120px;
}

#gallery_slide > p
{
   bottom:50;
    right:-20;
}

#session_slide
{
    background: url('../img/sessions_slide.jpg') no-repeat -240px 0px;
}

#session_slide > p
{
    bottom:60;
    right:-30;
}

#offers_slide 
{
    background: url('../img/offers_slide.jpg') no-repeat -300px -135px;
}

#offers_slide > p
{
    bottom:45;
    right:-20;
}

#about_slide 
{

    background: url('../img/about_slide.jpg') no-repeat -350px 0px;
}

#about_slide > p
{
    bottom:65;
    right:-35;
}

#contact_slide 
{
    background: url('../img/contact_slide.jpg') no-repeat -600px 0px;
}

#contact_slide > p
{
    bottom:75;
    right:-50;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T22:10:49.520

每当您为固定数量的像素设置样式时，请确保将“px”放在数字之后。

```
#gallery_slide > p
{
   bottom: 50px;
   right: -20px;
} 
```

我想这就是你在这里要做的。在其他情况下，您可能更喜欢使用百分比，因此您的单位将是“%”。对于 em，使用 'em'，依此类推。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T22:07:57.917

所有非零长度都需要单位。你没有，所以长度无效。IE9 的行为是正确的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-03T22:08:29.210

使用它，我相信你可以取得成果。

[http://css3pie.com/](http://css3pie.com/)

# ios - 从不同的视图控制器访问开关值

> ID：14148037
> 
> 赞同：1
> 
> 时间：2013-01-03T22:07:20.337
> 
> 标签：ios, xcode, model-view-controller, view, uiswitch

我有两个 View Controller 类**Class A**和**Class B在****Class A** 中有一个 UIswitch ，取决于它是打开还是关闭，当在 Class B 中单击按钮时，它应该会导致在 Class B 中**执行**一些**操作**。

 **我想要做的是将开关的状态保存在**A 类中**，然后将其检索到**B 类中**

在**A 类中，** 我做了以下操作来保存开关的状态

```
NSUserDefaults *switchState=[NSUserDefaults standardUserDefaults];

if(self.switch.on){
[switchState setBool:YES forKey:@"ON"];
}
else {
      if (!self.switch.on){
      [switchState setBool:NO forKey:@"OFF"];
     }

}

[[NSUserDefaults standardUserDefaults]synchronize]; 
```

在**B 类**中，我检查开关的状态并根据状态执行操作。**我在Class B**中使用了以下代码。

```
-(void)whenButtonPressed{

if([[NSUserDefaults standardUserDefaults] objectForKey:@"ON"]){

 //  Perform Some action

 }else if ([[NSUserDefaults standardUserDefaults] objectForKey:@"OFF"]){
//Perform Some other action

}
} 
```

在**A 类中，** 当开关打开或关闭时，它满足正确的**If**或**Else If**条件块

但是在**Class B**中，它只满足第一个**If**条件，而与**Class A**的结果无关， 即即使开关关闭。

谁能指出我的错误是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T22:38:47.687

你弄错了它是如何`NSUserDefaults`工作的。如果您有 1 个要为其保存状态的开关，则使用 1 个键。

按下开关时以这种方式保存：

```
NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
[userDefaults setBool:self.switch.on forKey:@"switch1"];
[userDefaults synchronize]; 
```

检索它：

```
NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
BOOL switchOn = [userDefaults boolForKey:@"switch1"];

if (switchOn) {
// switch is enabled
}
else {
// not enabled
} 
```**

# oauth-2.0 - OAuth2 中的永久访问令牌

> ID：14148039
> 
> 赞同：3
> 
> 时间：2013-01-03T22:07:31.497
> 
> 标签：oauth-2.0, box-api

是否可以使用 OAuth2 获得永久访问令牌？我想在安装过程中使用 Box 下载文件。安装会抓取特定文件夹中的所有文件。我有一个盒子帐户设置为文件夹的所有者，在 API v1 中，我可以获得一个永久的 auth_token 以在我的可执行文件中重用。但似乎使用 OAuth2 我只能获得 1 小时的访问令牌和刷新令牌。但由于最终用户实际上没有访问 Box，而且该应用程序是桌面应用程序，因此如果令牌已过期，他们将无法即时进行身份验证。我知道还有其他解决方案，但是 V1 api 让我可以做到这一点，我希望在 V1 被弃用时不会失去这个功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:16:39.663

Box 的 OAuth2 实现不会生成永久令牌。但是，就像在 V1 API 中一样，您可以为您上传的文件创建一个可供非 Box 用户访问的链接。您必须在 UI 中将共享访问权限设置为“打开”，或者通过 API 设置 json。

[文档](http://developers.box.com/docs/#files-create-a-shared-link-for-a-file)中有一个部分解释了如何做到这一点。您基本上将一个 PUT 传递给 /files/ 端点，其中包含一个小的 JSON 主体，如下所示：

```
{"shared_link": {"access": "open"}} 
```

您将返回一个 json 文件正文，其中包含完整的 shared_link 部分。像这样的东西：

```
"shared_link": {
    "url": "https://www.box.com/s/rh935iit6ewrmw0unyul",
    "download_url": "https://www.box.com/shared/static/rh935iit6ewrmw0unyul.jpeg",
    "vanity_url": null,
    "is_password_enabled": false,
    "unshared_at": null,
    "download_count": 0,
    "preview_count": 0,
    "access": "open",
    "permissions": {
        "can_download": true,
        "can_preview": true
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T10:35:07.610

您可以使用刷新令牌来获取一个持续一小时的新访问令牌和一个新的刷新令牌。

因此，您的桌面应用程序可能需要*安全地*连接到 Internet才能读/写

*   访问令牌
*   访问令牌到期日期
*   刷新令牌
*   刷新令牌到期日期**

**每个刷新令牌的有效期仅为 14 天。希望 Box 删除过期功能。

或者，按照原始建议将您的文件放在可公开访问的位置。

# iphone - 在集合视图下方添加另一个视图

> ID：14148040
> 
> 赞同：0
> 
> 时间：2013-01-03T22:07:35.623
> 
> 标签：iphone, ios6, uicollectionview

如何在 iOS6 (iphone) 中实现一个屏幕，其中屏幕的上半部分是集合视图（水平滚动），而下半部分是其他不可滚动的视图？这两种观点没有必然联系。

（顺便说一句，我已经让水平滚动单独工作）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T18:18:32.583

我通过使用视图控制器中的包含功能解决了它 - addChildViewController。观看有关 View Controller 演变的 2012 WWDC 视频了解更多信息。

# java - Java 捕获异常 FileNotFound 不起作用

> ID：14148041
> 
> 赞同：-4
> 
> 时间：2013-01-03T22:07:39.343
> 
> 标签：java, exception, try-catch

我试图捕获 FileNotFound 异常，以便我的程序在抛出异常时打印一条消息，而不是打印异常。这是我的代码：

```
import java.io.IOException;
import java.util.Scanner;
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.select.Elements;

public class SeegeeSOGFinder10
{
    public static void main(String args[]) throws InterruptedException, IOException
    {
        // Some code here

        int i = 0;

        if(choice.equalsIgnoreCase("blah"))
        {
            try
            {
                while(i < j)
                {
                    // Loop code
                    i++;
                }
            }
            catch(java.net.SocketTimeoutException e) // This is where I am having trouble, These 2 exceptions are still thrown and are printed and my message is not shown
            {
                System.out.println("Recieved HTTP timeout. Maybe we got rate limited? Slepping for 30 seconds.");
                Thread.sleep(30000);
            }
            catch(java.io.FileNotFoundException e)
            {
                System.out.println("File Not Found!");
            }

            System.out.println("Done!");
        }
        else
        {
            System.out.println("Invalid Choice");
        }
    }

    // Some more code
} 
```

代码在我遇到问题的地方被注释了，这两个错误仍然被抛出，并且我的消息没有被打印出来。我尝试将 try catch 块包含在循环内，甚至将整个程序放在 try catch 块中，结果相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T22:15:32.883

catch 只会捕获其 try 块内抛出的异常。整个方法抛出异常但没有被捕获的最可能原因是它是从其他地方抛出的，可能是这个方法在 try-catch 块之外调用的东西。

我建议将块放在方法中的所有代码周围。这样，您应该捕获异常并能够显示堆栈跟踪，包括导致异常的行号。

# c# - NHibernate.QueryException 消息：重复的关联路径

> ID：14148046
> 
> 赞同：2
> 
> 时间：2013-01-03T22:08:22.883
> 
> 标签：c#, nhibernate

我有这个代码：

```
if (pertinentDataExists) {        
    List<Entity> operatorList = new List<Operator>();
    List<Entity> newOperatorList = criteria.newOperatorList;
    foreach (Operator operator in operatorList)
    {
        operatorList.Add(operator);
    }
    queryCriteria.CreateCriteria("OperatorList").Add(Restrictions.In("Operator", operatorList));
} 
```

然后：

```
if (otherPertinentDataExists) {
    Object[] objects = new Object[criteria.newRoleTypeList.Count];                                                                                                                
    for (int  = 0; i < criteria.RoleTypeList.Count; i++) {                                                                                       
        objects[i] = criteria.RoleTypeList[i].Id;   
    }                                                                                       
    queryCriteria.CreateCriteria("OperatorList").Add(Restrictions.In("Role", objects));
} 
```

这些单独工作就好了。但是，如果这两种情况都有要添加到列表中的标准，那么我会得到：

> NHibernate.QueryException 消息：重复关联路径：OperatorList

`Role`如果已创建条件，如何添加限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T06:47:06.560

有两种选择。首先，如果可能（使用相同的方法），创建 Criteria 并将它们作为局部变量引用：

```
var operatorListCriteria = queryCriteria.CreateCriteria("OperatorList");

if ( myCondition1 )
{
  operatorListCriteria.Add(...
}
if ( myCondition2 )
{
  operatorListCriteria.Add(...
} 
```

第二，使用“别名”创建标准，然后，稍后，您可以在任何地方找到它们`GetCriteriaByAlias(aliasPath)`：

```
var aliasPath = "OperatorListAlias";
var operatorListCriteria = queryCriteria.CreateCriteria("OperatorList", aliasPath);
...
// later find them by aliasPath
var subCriteria = queryCriteria.GetCriteriaByAlias(aliasPath); 
```

*注意：同时检查`GetCriteriaByPath(associationPath)`*

# asp.net-mvc - 在 Azure 辅助角色中安装和使用 Razor 引擎

> ID：14148048
> 
> 赞同：3
> 
> 时间：2013-01-03T22:08:27.207
> 
> 标签：asp.net-mvc, razor, actionmailer, azure-worker-roles

使用 ActionMailer 呈现电子邮件视图。它利用了很好的 Razor View 引擎。我想将电子邮件的处理和呈现推送到 Azure Worker Role。

是否有人在 Azure 辅助角色中安装并使用了 Razor 视图引擎？

能否提供在 Azure 辅助角色中安装 Razor 视图引擎的链接或指针？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T19:24:20.287

我不确定它如何与 ActionMailer 一起使用，但我将 Razor 与[RazorEngine](http://nuget.org/packages/RazorEngine)库一起使用。我所要做的就是将 System.Web.Razor 库添加到工作项目中。我还在参考文献中选择了“复制本地”选项。部署为云服务时效果很好。

# javascript - 如何将 JavaScript 对象转换为实际文件以便使用 HTML5 上传

> ID：14148051
> 
> 赞同：15
> 
> 时间：2013-01-03T22:08:28.350
> 
> 标签：javascript

我有一个 JavaScript 对象，其中包含大量数据，包括几个大型 base64 编码字符串。

我们目前正在通过简单的 ajax POST 将数据发送到服务器，但由于数据太大，用户的等待时间是不可接受的。

出于这个原因，我们希望利用新的 html5 文件上传功能，并在数据上传到服务器时实际测量进度，以便在这个漫长的过程中为用户提供持续的反馈。

为了使用这个特性，这个大数组必须作为一个实际文件发送，而不是作为一个巨大的对象作为 url 参数发送。

有没有办法：

A. 将此对象转换为实际的文本文件并以这种方式发送。

或者

B. 挂钩 html5 进度 api 并实际测量此标准 ajax POST 的进度。

提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-04T01:19:20.683

可以获取一个 JavaScript 对象`myData`（您可以使用进度（在`progress`回调函数中）来更新 HTML5 进度条的值。

```
var myData = {
    data1: "Huge amount of data",
    data2: "More very large data"
};

var xhr = new XMLHttpRequest();

xhr.upload.addEventListener('progress', function (e) {
    console.log(100*(e.loaded / e.total) + '%');
}, false);

xhr.open('POST', 'url', true);

var data = new FormData();
data.append('file', new Blob([JSON.stringify(myData)],{type:'application/json'}));
xhr.send(data); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-13T19:24:58.560

转换为`Blob`object 或`File`object，然后附加到`FormData`，并使用`xhr`or`fetch`发送到服务器。

```
var data = 'some data'; //string, arrary buffer, typed array, blob, ...
var filename01 = 'abc.txt', filename02 = 'efg.txt';
var type = 'text/plain';
var fd = new FormData();

//use file object
var file = new File([data], filename01, {type:type}); //add filename here
fd.append('file01', file);

//use blob object
var blob = new Blob([data], {type:type});
fd.append('file02', blob, filename02); //add filename by append method

fetch('/server.php', {method:'POST', body:fd})
.then(function(res){
    return res.text();
})
.then(console.log)
.catch(console.error)
; 
```

# azure - Azure 保留网站到虚拟网络

> ID：14148053
> 
> 赞同：0
> 
> 时间：2013-01-03T22:08:39.177
> 
> 标签：azure, azure-web-app-service

是否可以将 Azure 网站（类型保留模式）连接到现有虚拟网络中的 VM？由于安全原因，我想将网站的连接字符串配置为 SQL Server VM 的内部 IP，而不是通过它的公共 IP。

我知道它可以与 web/workerrole 一起使用以直接连接到内部 ip，但不能选择在 webrole 中创建所有网站....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T00:26:32.673

不，我们还不支持虚拟网络，但您可以考虑在某些情况下使用服务总线中继，请查看[http://www.bradygaster.com/windowsazurewebsites-onprem-servicebus](http://www.bradygaster.com/windowsazurewebsites-onprem-servicebus)

# php - PHP 从字节中获取字符串文本

> ID：14148054
> 
> 赞同：-3
> 
> 时间：2013-01-03T22:08:41.433
> 
> 标签：php, text, byte, data-conversion

我想知道如何在 PHP 中获得一系列字节的文本表示？（基本上是 C#`Encoding.getString(string s)`方法的 PHP 版本。）

我一直在搜索谷歌，我可以找到如何将文本字符串转换为字节，但不能反过来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T22:17:44.657

在 PHP 中有这样一个方法：

```
Encoding.GetString Method (Byte[]) 
```

不是必需的，因为在 PHP 中，字符串就像 Byte[]。就是这样。所以没有这样的方法，但是您可以自己轻松编写：

```
function Encoding_GetString($stringOfBytes) {
    return (string) $byteString;
} 
```

如果要将 0-255 范围内的整数数组转换为字符串，可以使用[`chr`](http://php.net/chr),[`array_map`](http://php.net/array_map)和[`implode`](http://php.net/implode):

```
$string = implode(array_map('chr', $arrayOfByteIntegers)); 
```

# php - 使用存储过程从数据库中选择？

> ID：14148055
> 
> 赞同：1
> 
> 时间：2013-01-03T22:08:48.953
> 
> 标签：php, mysql, stored-procedures

我试图制作这样的存储过程：

```
DELIMITER $$
DROP PROCEDURE IF EXISTS get_userStatUser $$
CREATE PROCEDURE get_UserStatUser
(
IN userId INT,
OUT Played INT,
OUT Win INT,
OUT Points INT
)
BEGIN
SELECT played, win, points
INTO Played, Win, Points
FROM nf_users
WHERE id = userId;
END $$
DELIMITER ; 
```

然后我尝试像这样从中获取数据：

```
$sql = mysqli_query($connect,"CALL get_userStatUser()") or die("Query fail: " . mysqli_error());
$row = mysqli_fetch_array($sql);

$played = $row['Played'];
$win = $row['Win'];
$points = $row['Points']; 
```

但有些不对劲。我是存储过程的新手，看不到哪里出错了？我得到“查询失败：”，但没有任何错误？

任何帮助都非常感谢，并在此先感谢:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:14:21.373

存储过程需要 4 个参数

```
IN userId INT,
OUT Played INT,
OUT Win INT,
OUT Points INT 
```

鉴于您的 PHP 调用存储过程的方式，您需要重新定义以下内容：

```
DELIMITER $$
DROP PROCEDURE IF EXISTS get_userStatUser $$
CREATE PROCEDURE get_UserStatUser
(
IN userId INT
)
BEGIN
SELECT played, win, points
FROM nf_users
WHERE id = userId;
END $$
DELIMITER ; 
```

你的 PHP

```
$given_userid = 372987;
$sql = mysqli_query($connect,"CALL get_userStatUser($given_userid)") or die("Query fail: " . mysqli_error());
$row = mysqli_fetch_array($sql);

$played = $row['played'];
$win = $row['win'];
$points = $row['points']; 
```

试试看 ！！！

# php - 为什么我不能向 SQL 数据库添加大字符串？

> ID：14148064
> 
> 赞同：0
> 
> 时间：2013-01-03T22:09:37.983
> 
> 标签：php, html, sql

我有一个填写字段并提交的表单，它将所有这些添加到 SQL 数据库中的表中。为此，我有一个简短的 PHP 脚本，它获取所有的 post 值，然后将它们插入到数据库中。提交表单中的一个字段超过 7000 个字母，不会提交。如果我清除文本超过 7k 个字符的 1 描述框，它将提交。我可以手动将所有这些详细信息添加到数据库中，并且它们会按应有的方式显示在网站上。问题在于描述这么长。有没有办法解决这个问题，或者对字母的数量有限制？这是insertpost.php 中的代码。这是提交表单时调用的页面

```
 $Title = $_POST['title'];
    $LinkTitle = $_POST['linktitle'];
    $Category = $_POST['category'];
    $SubCategory = $_POST['subcategory'];
    $MainPic = $_POST['mainpic'];
    $Description = $_POST['Description'];
    $Main = $_POST['maintext'];
    $Featured = $_POST['featured'];
    $thumb = $_POST['thumbnail'];

    include 'phpincludes/dbconnection.php';

    $insertSQL = "INSERT INTO Posts (ID,Title,LinkTitle,MainPicture,ViewCount,Description,Maintext,Type,Featured,category,thumbnail) 
    VALUES('','$Title','$LinkTitle','$MainPic','0','$Description','$Main','$SubCategory','$Featured','$Category','$thumb')";

    $db->query($insertSQL) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T22:14:28.827

是的，有一个限制，您会发现它记录在 PHP 手册中的字符串[http://php.net/string](http://php.net/string)中：

> **注意：**字符串可以大到 2GB。

这要求您允许 PHP 使用那么多内存。这并不总是可以根据操作系统进行配置。更多细节，我可以建议我的博客文章的开头：[一些 PHP 内存拉伸乐趣的协议](http://hakre.wordpress.com/2011/06/09/protocol-of-some-php-memory-stretching-fun/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T22:24:47.813

正如 haskre 所建议的，这是 PHP 中字符串的限制，但它相当大，7000 个字符不应该引起问题。MySQL 中的字段大小也有更严格的限制，但是我们可以忽略这一点，因为您说您可以将条目直接保存到 MySQL 中并且它们显示正常。

您需要找出为什么它没有插入。我怀疑您的 7000 个字符中有一个字符正在破坏它，可能是引号符号或您需要转义的东西。

再次运行包含 7000 个字符的脚本并打印出 MySQL 错误，以便调试和解决。

要从 MySQL 打印错误，可以使用 *mysql_error()*。更多信息可以在[php 手册](http://php.net/manual/de/function.mysql-error.php)中找到。

# javascript - 在 JavaScript 中获取 JSON 对象的最后一个元素

> ID：14148065
> 
> 赞同：13
> 
> 时间：2013-01-03T22:09:40.610
> 
> 标签：javascript, json

我在 JavaScript 中有一个 json 对象，例如：

```
var json = {"20121207":"13", "20121211":"9", "20121213":"7", "20121219":"4"}; 
```

不知道最后一个键的名称。（按键按升序排列）

如何读取最后一个元素的值（和键）？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-03T22:14:19.377

```
var highest = json[ Object.keys(json).sort().pop() ]; 
```

`Object.keys`(ES5, shimmable) 返回对象键的数组。然后我们对它们进行排序并抓住最后一个。

您无法确保`for..in`循环中的顺序，因此我们不能完全依赖它。但是正如您所说，键是按升序排列的，我们可以简单地对它们进行排序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T22:11:27.557

试试这个：

```
var lastKey;
var json = {"20121207":"13", "20121211":"9", "20121213":"7", "20121219":"4"};
for(var key in json){
    if(json.hasOwnProperty(key)){
        lastKey = key;
    }
}
alert(lastKey + ': ' + json[lastKey]); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T22:14:59.630

如果你不需要支持旧的 JS 引擎：

```
var lastKey = Object.keys(json).sort().reverse()[0];
var lastValue = json[lastKey]; 
```

不要假设钥匙是有序的。获取键，然后对它们进行排序，然后在排序后获取最大值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T22:16:45.863

对象键通常是无序的，但是查看您正在使用的键集，我假设您正在寻找 json 键中的最高日期：

```
var json = {"20121207":"13", "20121211":"9", "20121213":"7", "20121219":"4"};

function getMaxFromKeys(json) {
    var m;
    for (var i in json) {
        if (json.hasOwnProperty(i)) {
           m = (typeof m == 'undefined' || i > m) ? i : m;
        }
    }
    return m;
}

var latestDate = getMaxFromKeys(json); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-03T22:27:05.073

ECMCA 脚本规范（javascript 规范）不要求浏览器维护对象属性的顺序。

与 for-in 相关的是 ECMCA 5 规范所说的：

> “枚举属性的机制和顺序（第一个算法中的步骤 6.a，第二个算法中的步骤 7.a）没有指定。”

与 Object.keys 方法相关：

> “如果实现为 for-in 语句定义了特定的枚举顺序，则在该算法的第 5 步中必须使用相同的枚举顺序。”

说获取最后定义的属性是没有意义的。您可以根据名称对属性进行排序并获取最后一个，但如果您想要的是顺序，则保留一个数组。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-03T09:33:34.097

```
let obj = <your_object> 
```

* * *

```
let last_key = Object.keys(obj)[Object.keys(obj).length - 1]
let last_value = <your_object>.last_key 
```

或者

```
let last_value =  Object.values(obj)[Object.values(obj).length - 1] 
```

# c++ - qt创建简单的矩形板

> ID：14148066
> 
> 赞同：0
> 
> 时间：2013-01-03T22:09:43.330
> 
> 标签：c++, qt

我想使用 QT 创建一个矩形板。此板将在执行一个步骤时更新。例如在第 x 步，单元格 5,6 中的文本从“未探索”更新为“已探索”。

我查看了 QT 文档并找到了[QGraphicsView](http://qt-project.org/doc/qt-4.8/qgraphicsview.html)类。如何使用[QGraphicsItem](http://qt-project.org/doc/qt-4.8/qgraphicsitem.html)模拟可以写入文本的单元格？

我也对替代品持开放态度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T22:18:04.253

从技术上讲，这也可以通过自定义 QTableView/Widget 来完成，但[`QGraphicsScene`](http://qt-project.org/doc/qt-4.8/qgraphicsscene.html)对于自定义图形和性能来说更加健壮。

从高级视图来看，您可以创建一个表示“单元”项的复合对象，也可以将 a 子类[`QGraphicsItem`](http://qt-project.org/doc/qt-4.8/qgraphicsitem.html)化并自己完成所有自定义绘制。

创建复合对象时，它只是一个`QGraphicsItem`“Cell”子类，其中可能包含 a[`QGraphicsRectItem`](http://qt-project.org/doc/qt-4.8/qgraphicsrectitem.html)和 a[`QGraphicsTextItem`](http://qt-project.org/doc/qt-4.8/qgraphicstextitem.html)作为成员，设置为作为父级的单元格实例。这将使子项与父单元格项一起翻译。

创建完全自定义`QGraphicsItem`的 时，您将在该方法内定义所有绘画，该[`paint()`](http://qt-project.org/doc/qt-4.8/qgraphicsitem.html#paint)方法将绘制一个矩形，并从实例上设置的值中获取文本。

# css - 为什么 Safari 以不同的方式呈现 CSS 多列布局？

> ID：14148078
> 
> 赞同：13
> 
> 时间：2013-01-03T22:10:56.433
> 
> 标签：css, google-chrome, safari, css-multicolumn-layout

我正在构建[一个网站](http://www.marie-charlot.be)并主要在 Chrome 上对其进行测试，间歇性地检查它是否仍然可以在 Firefox 上运行。

我想，由于 Chrome 和 Safari 都在 WebKit 上运行，它们会以相同的方式呈现网站。但事实并非如此。

我在 Safari 上检查该网站，我注意到我的菜单栏使用了一个无序列表`column-count`（两者都`-moz-`具有`-webkit-`相同的值），并注意到列的填充之间存在差异。

Chrome 似乎均匀地填充列，而 Safari 只是一一填充列。下面的图片说明了这一点。

铬呈现： ![镀铬渲染](../Images/6affa53af3c1043c77fd4719d8effb63.png)

Safari 呈现： ![野生动物园渲染](../Images/0be905a4c171aa2776ef1dcaff732023.png)

我非常喜欢 Chrome 呈现列的方式，所以我想知道是否有办法强制 Safari 以这种方式呈现网站，可能`html`根本不改变布局。

*注意：* Firefox 的渲染与 Chrome 相同，无需修复。我不是为 IE 开发的，所以我不知道它是如何呈现的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-06-20T14:00:12.983

我有同样的问题，但**min-height**不起作用。我在 Bootstrap .col-md-12 容器上设置了列数，这对我来说是个问题。

我添加了一个具有所需类的子 div，它运行良好

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T23:18:31.760

添加`min-height`到`<ul>`似乎可以解决问题

```
nav ul { ... min-height:50px; } /* < add */ 
```

在 PC 版 Safari 5.1.7 (7534.57.2) 上测试

这里也引用了错误：http: [//css-tricks.com/forums/discussion/12904/safari-5-1-multi-column-bug-extra-columns-appear-/p1](http://css-tricks.com/forums/discussion/12904/safari-5-1-multi-column-bug-extra-columns-appear-/p1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-29T16:28:08.767

我在 Safari 上显示高度为 1px 的列内容时遇到了类似的问题。我在元素中添加了**“最小高度：100%”**，一切看起来都很好。我在 body/html 和包含元素上也有“高度：100%”，假设这是我让它正常工作的方式。

# objective-c - IOS UITextView category set font

> ID：14148088
> 
> 赞同：-1
> 
> 时间：2013-01-03T22:11:32.090
> 
> 标签：objective-c, ios, uitextview, uifont

I created a category class which standardize the feel and look of UITextView. I manage to add border with the code below but not sure how to set font name, font color.

```
#import "UITextView+Form.h"
#import <QuartzCore/QuartzCore.h>

@implementation UITextView (Form)

-(void)standardize{
    CALayer *thisLayer = self.layer;
    thisLayer.borderWidth=3.0;
    thisLayer.borderColor=[UIColor blackColor].CGColor;

}
@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T22:15:29.430

This method should work for you:

```
-(void)standardize{
    CALayer *thisLayer = self.layer;
    thisLayer.borderWidth=3.0;
    thisLayer.borderColor=[UIColor blackColor].CGColor;

    // Set whatever point size you want
    self.font = [UIFont systemFontOfSize:10.0f];    

    // Set whatever color you want
    self.textColor = [UIColor black];
} 
```

These should help too.

UIFont class reference:

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIFont_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIFont_Class/Reference/Reference.html)

UIColor class reference:

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIColor_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIColor_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T22:14:19.547

Add these lines to your `standardize` method:

```
self.textColor = [UIColor ...]; // whatever color you want
self.font = [UIFont ...]; // whatever font you want 
```

# javascript - 使用 Javascript 更改多个 ID 的标题，从原始值计算

> ID：14148089
> 
> 赞同：1
> 
> 时间：2013-01-03T22:11:33.343
> 
> 标签：javascript, jquery

我的代码采用 TD 标签的标题，以获取字符串中两个时间之间的时间差
（即 13:01-14:03）并将其显示为新标题（属性），这仅适用于只有元素，当我有多个时，它会失败。
我怎样才能做到这一点？

```
<table>
    <thead>
        <th>First</th>
        <th>Second</th>
        <th>Third</th>
        <th>Ok</th>

    </thead>
    <tr>
        <td>1</td>
        <td>CCBB</td>
        <td class='huifa' id='calc' title='02-01-2013 13:01-14:03'>231</td>
        <td class='huifa' id='calc' title='02-01-2013 13:01-13:53'>1</td>
    </tr>

   <tr>
        <td>2</td>
        <td>CCBB</td>
        <td>342</td>
        <td>0</td>

    </tr>
</table> 
```

JS代码

```
<script>
element = document.getElementById('calc');
v = element.title
v = v.slice(11)
v = v.split('-')
totalTime = delTime(v[1],v[0]);
element.title = 'Duracion: '+totalTime
</script> 
```

我的工作代码在这里：http: [//jsfiddle.net/cespinoza/tg86a/55/](http://jsfiddle.net/cespinoza/tg86a/55/)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:17:58.370

首先，将 更改`id='calc'`为`class='calc'`。然后将您的代码更改为：

```
elements = document.getElementsByClassName('calc');
for(var i = 0; i < elements.length; i++) {
  v = elements[i].title;
  v = v.slice(11);
  v = v.split('-');
   totalTime = delTime(v[1],v[0]);
   elements[i].title = 'Duration: ' + totalTime;                             
} 
```

# backbone.js - 表单身份验证登录后如何将基本身份验证标头传递给 REST 端点？

> ID：14148090
> 
> 赞同：1
> 
> 时间：2013-01-03T22:11:41.613
> 
> 标签：backbone.js, forms-authentication, basic-authentication

我有一个建立在 .NET MVC4 之上的 Backbone/RequireJS 应用程序。我正在使用表单身份验证来针对我们的后端数据存储对用户进行身份验证，这很好用。

我们的服务层是一个 .NET Web Api 项目（RESTful API），并且使用令牌化方法进行身份验证（初始请求包括基本身份验证标头。如果身份验证成功，则响应负载包括身份验证令牌。后续请求传递令牌）。

我不确定现在如何针对我们的服务层进行身份验证。我确定我必须传递 auth 标头，但不确定如何生成令牌，因为我的 JS 中没有用户名/密码。

我应该在这里完全绕过 Forms auth，并简单地通过 SSL 发出 ajax 请求吗？我也可以 POST 到 /Account/Login 操作，并使用 Membership Provider 来验证凭据。如果成功，我可以为初始请求添加 Auth 标头并为后续请求使用身份验证令牌。

在此处添加身份验证标头/自定义令牌的示例：

```
$.ajaxSetup({
    'beforeSend': function (xhr) {
        if($.cookie("AuthToken")) {
            xhr.setRequestHeader("CustomTokenHeader", $.cookie("AuthToken"));
        } else {
            var token = methodToBase64EncodeUsernamePassword(username, password);
            xhr.setRequestHeader("Authentication", "Basic " + token);
        }

    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:13:49.460

看看这个[解决方案](https://github.com/tugberkugurlu/AdvancedWebAPI)，它基于我似乎无法再次找到的截屏视频。如果我能找到它，我会更新答案。不过，您应该能够轻松地遵循解决方案。您正在寻找的是 PerRouteMHownershipSample。我相信最佳实践是“在这里完全绕过表单身份验证，并简单地通过 SSL 发出 ajax 请求”。您想要保护的任何 api 路由都将被过滤，然后需要从您的应用程序传递一个令牌并在服务器上对其进行解码。我个人不会考虑使用表单身份验证来保护您的 api。

# asp.net - 加载程序集时遇到问题：“Microsoft.Practices.EnterpriseLibrary.Common”

> ID：14148093
> 
> 赞同：2
> 
> 时间：2013-01-03T22:11:53.140
> 
> 标签：asp.net, .net, visual-studio-2008, exception, runtime-error

我有一个 VS 2008 解决方案，其项目正在使用许多 Microsoft.Practicies 库。

**所有程序集的版本为：4.1.x

**一切正常，但是当我运行它时，出现以下运行时错误：**

> 无法加载文件或程序集“Microsoft.Practices.EnterpriseLibrary.Common，Version=5.0.414.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

**在进行构建和运行的机器上没有安装任何版本的企业库。**

对于所有程序集， “复制本地”为*true*，“特定版本”为*false 。*

我在这里做错了什么？

相关：[无法加载文件或程序集](https://stackoverflow.com/questions/8431220/could-not-load-file-or-assembly-microsoft-practices-enterpriselibrary-common-o "无法加载文件或程序集")，[强制 Visual Studio 参考](https://stackoverflow.com/questions/4149359/how-to-force-visual-studio-to-reference-local-enterprise-library-dll-file-instea "强制 Visual Studio 参考")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T23:25:05.663

Microsoft 实践库是紧密耦合的，并且一些程序集是相互依赖的。确保您已添加所需的所有库以及任何其他库依赖项

# iphone - 内部应用在应用商店被拒绝

> ID：14148104
> 
> 赞同：-5
> 
> 时间：2013-01-03T22:12:54.917
> 
> 标签：iphone, ios, distribution

我已将三个内部应用程序提交到应用程序商店，并要求用户名和密码才能访问该应用程序。但是第二次被拒绝了。我遵循以下帖子中提供的解决方案，

[内部 iPhone 企业应用程序分发的替代解决方案](https://stackoverflow.com/questions/3309835/alternative-solutions-for-in-house-iphone-enterprise-app-distribution/3790758#3790758)

[通过 App Store 分发 iPad 内部应用程序](https://stackoverflow.com/questions/13965308/ipad-in-house-app-distribution-through-app-store)

我使用警报视图来询问用户名和密码。用户名和密码保存在钥匙串中。我的应用程序是不需要互联网连接的单窗口应用程序。如何将我的应用提交到应用商店？有些人建议为应用程序实现 php 用户名和登录名。我怎样才能做到这一点？谁能解释一下？

我从苹果那里得到的原因：

> 我们发现您的应用程序是内部应用程序，适用于您组织的员工或成员。因此，它不适合 App Store。
> 
> 有关分发专有的内部应用程序的信息，请参阅 iOS 开发者企业计划。
> 
> 如果您不能（或选择不）修改您的应用程序以符合 App Store 审查指南，您可能希望构建一个 HTML5 网络应用程序。您可以直接在您的网站上分发网络应用程序；App Store 不接受或分发网络应用程序。
> 
> HTML5 是 HTML 的主要新版本，无需专有插件即可在浏览器中本地播放音频和视频。使用 HTML5，Web 应用程序的外观和行为类似于原生 iPhone 和 iPad 应用程序，并且使用 HTML5 的离线应用程序缓存，即使设备处于离线状态，Web 应用程序也可以运行。使用 Web 应用程序，您可以灵活地提供所需的功能。
> 
> 要开始使用 iPhone 或 iPad 网络应用程序，请查看 iPhone 网络应用程序入门。
> 
> 有关您可以在 iPhone 上的 Safari 中使用的 HTML 元素和属性的描述，请查看 Safari HTML 参考：简介。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T22:24:59.827

正如 Apple 建议的那样，您应该查看 iOS Developer Enterprise Program。它是专门为内部应用程序开发而创建的。

使用企业分发配置文件和证书，您可以创建可以安装在任何设备上的 .ipa 文件，而无需事先获取您计划安装的所有设备的设备 ID。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T22:27:14.847

这条线说明了一切，

> 我们发现您的应用程序是内部应用程序，适用于您组织的员工或成员。因此，它不适合 App Store。
> 
> 有关分发专有的内部应用程序的信息，请参阅 iOS 开发者企业计划。

他们不希望商店中有内部应用程序，他们希望您使用他们的企业程序。

苹果作为一家公司想要赚最多的钱，对他们来说，他们限制这种方法来赚更多的钱。然而，它只有300美元。

大学（我认为它类似于企业，但用于学术机构）将无法正常工作，因为它需要设备 id 就像 ad-hoc 一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T22:46:25.207

对于 iOS 3 程序可用：

*   **开发者**，仅提交到 App Store
*   **Enterprise**仅用于内部分发，即在您的公司仅限于您的员工，而不适用于 App Store
*   **大学**（我认为它类似于企业，但用于学术机构）

为了向您确认您不能随意使用 Enterprise，我可以告诉您，当我的公司订阅 Enterprise Program 时，Apple 有人打电话问我是否理解 Enterprise 许可证不允许在 App Store 上提交。

# php - Wordpress dynamic_sidebar() 显示不必要的值

> ID：14148106
> 
> 赞同：0
> 
> 时间：2013-01-03T22:13:14.370
> 
> 标签：php, wordpress

我有一个 wordpress 动态侧边栏。

```
 <h2 style="text-align:center; ">
                    <?php //echo dynamic_sidebar('callus'); ?>
                    <?php echo dynamic_sidebar('callus'); ?>
                </h2> 
```

并且该功能显示一切正常，但在侧边栏文本的底部显示“1”。我搜索了很多但无法调试。可能是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T22:25:37.493

如果您在使用 Wordpress 函数时遇到问题，请始终[先在 codex 中检查它](http://codex.wordpress.org/Function_Reference/dynamic_sidebar)（*提示：*在 Google 中输入`codex`后跟一个空格并将 wordpress 函数名称粘贴在那里，这通常会显示正确的页面）：

> **用法**
> 
> ```
>  <?php dynamic_sidebar( $index ); ?> 
> ```
> 
> **返回值**（布尔值）
> 
> 如果找到并调用了小部件侧边栏，则为真。如果未找到或未调用，则为假。

如您所见，不要`echo`。函数本身已经处理了输出。如果函数现在返回，比方说`true`，echo 将另外输出`1`（布尔`true`到字符串的转换，`echo`是字符串上下文）。

```
<h2 style="text-align:center; ">
    <?php echo dynamic_sidebar('callus'); ?>
          ^^^^
</h2> 
```

这`echo`不是必需的。反而：

```
<h2 style="text-align:center; ">
    <?php dynamic_sidebar('callus'); ?>
</h2> 
```

# matomo - Piwik，导出特定网址的页面访问次数

> ID：14148111
> 
> 赞同：0
> 
> 时间：2013-01-03T22:13:40.887
> 
> 标签：matomo

我使用 javascript 在我的网站上使用 javascript 进行人工页面查看，因为我需要稍后跟踪它们

```
piwikTracker.trackPageView('/lid/902095/website'); 
```

我需要能够导出上述代码执行了多少次，即 /lid/902095/website 被访问了多少次，这样我就可以在我的网站上显示一些统计信息，但是我不确定我的查询是什么API应该是，这是我的尝试：

```
?module=API&method=Actions.getExitPageUrls&idSite=2&period=day&date=today&format=JSON&token_auth=anonymous&segment=pageUrl=@%2Flid%2F902095%2Fwebsite 
```

此时返回错误“错误：已请求报告'VisitsSummary_CoreMetrics'，但现阶段不可用。您也可以禁用相关插件以避免此错误。”

我在插件部分没有看到具有该名称的插件，我的活动插件是“Actions、Dashbord、DoNotTrack、ExampleAPI、ExamplePlugin、Live、Login、Widgetize”

不确定这是否是发送到 API 的正确查询，感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T07:19:30.250

如果您想跟踪访问，请使用此 api 调用

?module=API&method=VisitsSummary.getVisits&idSite=2&period=day&date=today&format=json&token_auth=anonymous

默认情况下提供 VisitsSummary 插件

Piwik Web Essentials 是一本很好的参考书。

# r - 如何使用 R 进行基本的图像处理

> ID：14148112
> 
> 赞同：11
> 
> 时间：2013-01-03T21:12:35.493
> 
> 标签：r, image-processing

我目前正在研究将主成分分析应用于 R 中的可视数据。

在 Matlab 中，可以调用诸如“im2double”和“mat2gray”之类的命令将位图转换为数值矩阵，然后再转换回图像。

我想知道这是否可以在 R 中实现，也许是通过额外的包。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T22:06:13.917

我使用了 bioconductor 上可用的 EBImage 包（这里是[小插图](http://www.bioconductor.org/packages/release/bioc/vignettes/EBImage/inst/doc/EBImage-introduction.pdf)）来处理和操作图像：

```
# installing package if needed
source("http://bioconductor.org/biocLite.R")
biocLite("EBImage")

library(EBImage) 
f = readImage(system.file("images", "lena-color.png", package="EBImage"))
str(f)
#Formal class 'Image' [package "EBImage"] with 2 slots
#  ..@ .Data    : num [1:512, 1:512, 1:3] 0.886 0.886 0.875 0.875 0.886 ...
#  ..@ colormode: int 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T00:02:59.357

我很好奇想试试这个；显然，一个包是一个更好的解决方案，但如果你真的想坚持使用基础 R，这将加载一个 png （尽管颠倒和向后；这可能是可以修复的）。它假定存在 netpbm 工具，因此可能无法在 Windows 系统上开箱即用。

```
readPng <- function(pngFile) {
  contents <- system(paste('pngtopnm',pngFile,'| pnmtoplainpnm'),intern=TRUE)
  imgDims <- strsplit(contents[2], ' ')
  width <- as.numeric(imgDims[[1]][1])
  height <- as.numeric(imgDims[[1]][2])
  rawimg <- scan(textConnection(contents),skip=3)
  return(list(
    x=1:width,
    y=1:height,
    z=matrix(rawimg,width),
    width=width,
    height=height))
} 
```

您可以`image(img)`直接在此函数返回的列表上运行，或使用 img$z 访问每个像素的值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-23T08:37:44.367

安装包的两种方法。

1.  如果您没有像 RStudio 这样的编辑器，请通过命令行安装
2.  通过在 bash 中使用 R 命令进入 R 解释器来安装命令行。

转到可以执行 R 命令的提示。这些是基本的图像处理命令。

执行此命令安装 Bioconductor backage biocLite，这将有助于安装 EBIMage 包（此包广泛用于图像处理）

```
source("http://bioconductor.org/biocLite.R") 
```

安装 EMImage 包以使用图像处理命令。

```
biocLite("EBImage") 
```

加载 EBIMage 包以使用图像处理

```
library("EBImage")
# Reading image from computer
img=readImage(files="~/Desktop/Prog/R/tinago.JPG")
display(img)
img1=img+ 0.2 # increase brightness
img2=img- 0.2 # decrease brightness
display(img1) # Display images in browser or graphical window
display(img2) # Display images in browser or graphical window
img3= img * 0.5 # decrease contrast 
img4=img * 2    # increase contrast
display(img3); display(img4)  # show result images
img5=img^2 # increase Gamma correction
img6=img^0.7 # decrease Gamma correction
display(img5); display(img6)  # Display result images 
```

注意：readImage 读取图像。显示用于在图形窗口中查看图像。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T12:52:54.693

相对较新的软件包`tiff` 可以很好地读写 TIF 图像。
尽管如此，除了相对简单的图像处理之外，我建议使用来自哈佛-史密森学会的 ImageJ 或 SAOImage9： [http](http://www.cfa.harvard.edu/resources/software.html) ://www.cfa.harvard.edu/resources/software.html 。

我在 R 中编写了工具来进行像素合并、像素分割、Sobel & Hough 变换、脱色等，并取得了巨大的成功。最终，应用程序的选择取决于图像的大小和需要进行的处理类型。

# c - 读取atmega16启动的原因

> ID：14148114
> 
> 赞同：0
> 
> 时间：2013-01-03T22:13:41.737
> 
> 标签：c, atmega16

这是我读取 MCUCSR 寄存器并从 3 位 PORF、EXTRF、WDRF 发出警报的代码。我希望这是微不足道的，但它不起作用。

任何想法？

```
static uint8_t mcucsr __attribute__ ((section (".noinit")));

static volatile union
{
  struct
  {
    uint32_t watchdog:1;
    uint32_t powerfail:1;
    uint32_t reset:1;
    uint32_t startup:1;
  } b;
  uint32_t w;
} __attribute__ ((packed)) alarms;

static void wdinit ()
{
  mcucsr = MCUCSR;
  MCUCSR &= ~(1 << PORF);
  MCUCSR &= ~(1 << EXTRF);
  MCUCSR &= ~(1 << WDRF);
} __attribute__((naked)) __attribute__ ((section (".init3")))

int main ()
{
  alarms.b.startup = true;
  alarms.b.powerfail |= !!(mcucsr & (1 << PORF));
  alarms.b.reset     |= !!(mcucsr & (1 << EXTRF));
  alarms.b.watchdog  |= !!(mcucsr & (1 << WDRF));
  mcucsr = 0;
  ... 
```

# google-app-engine - 为什么 GAE 开发服务器需要几分钟才能启动？

> ID：14148126
> 
> 赞同：0
> 
> 时间：2013-01-03T22:14:39.060
> 
> 标签：google-app-engine, python-2.7

谷歌应用引擎开发服务器需要很长时间才能启动（10 多分钟）。在启动期间，GAE 会在 autoreload.py 和 ProtocolBuffer.py 中花费大量时间。知道为什么要花这么长时间吗？我能做些什么来加快速度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T22:35:11.750

我的本地数据存储中有大量数据。它使启动过程陷入困境。我清除了本地数据存储，现在它正在快速启动。

```
dev_appserver.py --clear_datastore myapp 
```

# video.js - 我可以强制使用 Flash 播放 MP4 吗？

> ID：14148130
> 
> 赞同：3
> 
> 时间：2013-01-03T22:15:10.537
> 
> 标签：video.js

我想放弃我想在网页上播放的 8MB MP4 文件的 HTML5 视频标签，因为它在 Windows 7/8 上的 Chrome 上一直在做奇怪的事情，但在 Chrome <= Vista 上却没有。奇怪如：

*   有时加载不出来
*   大多数时候但并不总是垂直压缩视频内容 70%
*   疯狂闪烁

这已经在我们测试过的许多不同的机器上重复了。

我可以使用一些标记来强制 MP4 仅由 Flash 播放吗？

TIA 标志

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T08:27:21.857

`techOrder`您可以使用该参数使播放器使用 Flash 。

```
<video ... data-setup='{"techOrder": ["flash"]}' ... /> 
```

[https://github.com/videojs/video.js/blob/master/docs/guides/tech.md](https://github.com/videojs/video.js/blob/master/docs/guides/tech.md)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-16T04:45:00.530

如果您想优先考虑 Flash 播放器，请先转到 video.js 或 video.min.js 文件并将 ["HTML5"],["flash"] 替换为 ["flash"],["HTML5"]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-27T12:53:42.290

尝试更换

```
 vjs.options = {

      // Default order of fallback technology
      'techOrder': ['html5','flash'], 
```

和

```
vjs.options = {

      // Default order of fallback technology
      'techOrder': ['flash','html5'], 
```

在`video.js`. 该脚本现在`flash`将优先运行，而不是 html5

# python - wxPython 更新网格单元格背景颜色

> ID：14148132
> 
> 赞同：2
> 
> 时间：2013-01-03T22:15:18.257
> 
> 标签：python, wxpython, wxwidgets

我正在使用 wxPython 编写一个小程序，它显示一个有限大小的浮点数网格，该网格并行存储为一个 numpy 数组。我希望单元格的颜色代表该单元格中数字的值，作为从红色到蓝色的平滑渐变，其中全蓝色代表网格中的最小值，全红色代表最大值。

我遇到的问题是，当我打电话时`SetCellBackgroundColour`，单元格并不总是改变，或者没有完全改变。例如，有时当我更改单元格的值时，只有部分单元格会改变颜色，或者整个单元格会变成完全蓝色或完全红色。通常，如果我给它一秒钟并在不同的单元格中单击它，它最终会找出自己并看起来是正确的。

这是我附加的事件处理程序`wx.grid.EVT_GRID_CELL_CHANGE`：

```
def onGridChange(self, evt):
    row, col = evt.GetRow(), evt.GetCol()
    value = float(self.myGrid.GetTable().GetValue(row, col))
    self.table[row][col] = value
    self.update_colors()
    evt.Skip()

def update_colors(self):
    table_min = self.table.min()
    table_max = max(table_min + 1, self.table.max()) # to avoid dividing by zero later on.
    table_range = table_max - table_min
    for row in range(self.num_rows):
        for col in range(self.num_cols):
            percentage = (self.table[row][col]-table_min)/table_range
            color = (int(255*percentage), 0, int(255*(1.-percentage)))
            self.myGrid.SetCellBackgroundColour(row, col, color) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T22:52:27.097

正如@jozzas 所指出的，`self.myGrid.ForceRefresh()`每当更新当前活动单元格之外的单元格时，我都需要在网格上运行。这解决了我的问题！谢谢！

# html - 如何在网页上并排放置三个 div 元素

> ID：14148134
> 
> 赞同：8
> 
> 时间：2013-01-03T22:15:27.027
> 
> 标签：html, css, css-float

大家好，我正在尝试建立一个网站，它有一个“div 容器”，在这个 div 中包含三个主要列，“div left”、“div middle”和“div right”。

我尝试将每列的宽度分别设置为 25%、50% 和 25% - 也将所有 div 都向左浮动 - 表格两侧各有两个图像（div 中间）。不幸的是，这三个 div 位于不同的行上，而不是并排。有没有人对此有任何提示或建议？任何帮助，将不胜感激。

注意：中间的 div（拿着表格）在添加事件时填充。

```
<div id = "container" style = "width:100%">

<div id ="left" style = "float: left; width: 25%;">
    <?php echo $this->Html->image('/img/sideart.jpg'); ?>
</div>

    <div id = "middle" style = "float: center; width: 50%; height: 100%;">
    <table cellpadding="0" cellspacing="0">
    <tr>

    </tr>

    <?php
    foreach ($events as $event): ?>

    <tr>
        <td class="actions">

        </td>
    </tr>
<?php endforeach; ?>
    </table>
    </div>

    <div id = "right" style = "float:right; width: 25%;">
        <?php echo $this->Html->image('/img/sideart2.jpg'); ?>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-03T22:18:21.773

```
<div id = "container" style = "width:100%">
    <div id ="left" style = "float:left; width: 25%;">
        <?php echo $this->Html->image('/img/sideart.jpg'); ?>
    </div>
    <div id = "middle" style = "float:left; width: 50%;">

    </div>
    <div id = "right" style = "float:left; width: 25%;">

    </div>
</div> 
```

没有浮动：中心之类的东西。通过将它们全部向左浮动，它们将彼此相邻排列。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-03T22:20:10.723

这里正在发生一些事情。

`<div>`是块级元素。这意味着，默认情况下，您将在每个换行符之后获得一个换行符。（CSS 将是`display: block`）。

您可以使它们不换行，但通过执行以下操作保留它们的间距特征：

```
display: inline-block 
```

这将使它们内联显示，但允许垂直间距，就好像它们是块级元素一样。

您尝试`float`它们是对的，但由于[CSS 盒模型](http://www.w3.org/TR/CSS2/box.html)的工作原理，任何`margin`或`border`属性都会导致它们大于您指定的百分比。（编辑：错过了`float: center`- 那不存在。它是`right`or `left`for `float`。）

如果您想继续浮动它们，您也可以尝试指定总宽度小于 100% 的宽度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T22:48:29.490

除非你需要支持 IE7，否则你不需要浮动任何东西。鉴于此标记：

```
<div id="container">
    <div>
        First Div
    </div>
    <div>
        Middle Div
    </div>
    <div>
        Last Div
    </div>
</div> 
```

这个 CSS 会给你三列 25%/50%/25%：

```
#container {
    display: table;
    width: 100%;
}
#container > div {
    display: table-cell;
    width: 25%;
}
#container > div:nth-child(2) {
    width: 50%;
} 
```

[演示](http://jsfiddle.net/robertc/Hvtqh/)。

# spring - 为什么我的 JSP 页面上不显示 Spring 验证错误？

> ID：14148138
> 
> 赞同：1
> 
> 时间：2013-01-03T22:16:00.673
> 
> 标签：spring, validation, jsp, binding, message

我正在使用 Spring 3.1.1.RELEASE。我无法在我的 JSP 上显示错误消息。这是我在控制器中使用的方法...

```
@RequestMapping(value = "/save", method = RequestMethod.POST)
public ModelAndView save(final HttpServletRequest request,
                         final Organization organization,
                         final Model model,
                         final BindingResult result) 
{
    String nextPage = "organizations/add";
    m_orgValidator.validate(organization, result);
    if (!result.hasErrors())
    {
        final boolean isUpdate = !StringUtils.isEmpty(organization.getId()); 
        // We need this clause to prevent detached entity errors.
        if (StringUtils.isEmpty(organization.getId()))
        {
            organization.setId(null);
        }   // if
        m_orgSvc.save(organization);
        final String msgKey = isUpdate ? "org.updated.successfully" : "org.added.successfully"; 
        final Object[] args = new Object[0];
        request.setAttribute(STATUS, 
                             MessageFormat.format(resourceBundle.getString(msgKey), args));

        nextPage = "landing";
    } else { 
        model.addAttribute(ORG_MODEL_NAME, organization);
    }   // if

    return new ModelAndView(nextPage);
}   // save 
```

这是我的 JSP……</p>

```
 <c:url var="action" value="/organizations/save" />
    <form:form modelAttribute="org" method="post" action="${action}">
        <form:hidden path="id" />
        <fieldset>
            <legend>Upload Fields</legend>
            <p><form:errors path="*" cssClass="error" /></p>
            <p>
                <form:label for="name" path="name">Name *</form:label><br/>
                <form:input path="name" type="text"/>
            </p> 
```

我已经通过调试验证了我的验证器正确设置了错误（result.hasErrors() = true），但是错误没有在我的页面上正确显示。有任何想法吗？如果有帮助，下面是我的验证器类。

```
@Component
public class OrgValidator implements Validator
{

    @Autowired
    private OrganizationService m_orgSvc;

    …

    public boolean supports(Class<?> clazz)
    {
        return Organization.class.isAssignableFrom(clazz);
    }

    public void validate(final Object target,
                         final Errors errors)
    {
        final Organization org = (Organization) target;

        if (org != null && !StringUtils.isEmpty(org.getEodbId()))
        {
            final String eodbId = org.getEodbId();
            final Organization foundOrg = m_orgSvc.findByEodbId(eodbId);
            if ((org.getId() == null && foundOrg != null) ||
                (org.getId() != null && foundOrg != null && !org.getId().equals(foundOrg.getId())))
            {
                errors.rejectValue("eodbId", "AlreadyExists.org.eodb.id");
            }   // if
        } else if (org == null || org != null && StringUtils.isEmpty(org.getEodbId())) { 
            errors.rejectValue("eodbId", "NotExists.org.eodb.id");   
        }   // if

        if (org == null || org.getOrganizationType() == null)
        {
            errors.rejectValue("organizationType", "Invalid.org.type");
        }   // if

        if (org == null || org.getCountry() == null)
        {
            errors.rejectValue("country", "Invalid.org.country");
        }   // if

        if (org == null || org.getState() == null)
        {
            errors.rejectValue("state", "Invalid.org.state");
        }   // if
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T02:14:45.933

原因是 BindingResult 被绑定为请求属性，其名称结尾`.organization`并尝试使用此后缀检索它，而您的模型属性名称是`org`，这就是它无法为您的模型找到错误的原因.

The fix is to name your model attribute `organization` and to use this name in the jsp also:

```
model.addAttribute("organization", organization);

<form:form modelAttribute="organization" method="post" action="${action}">
        <p><form:errors path="*" cssClass="error" /></p> 
```

# encryption - 是否可以锁定 SD 卡使其仅在特定设备上运行？

> ID：14148144
> 
> 赞同：2
> 
> 时间：2013-01-03T22:16:24.067
> 
> 标签：encryption, raspberry-pi

我希望提供一些以树莓派为平台的专有软件（但这可能适用于任何嵌入式板）。我正在寻找一种仅在该设备上可见文件系统的方法。

这可能吗？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:39:28.517

如果您的发行版支持，您可以使用 LUKS 或 dm-crypt 加密整个磁盘或卷。也可以加密磁盘上的文件或目录，同时保持文件系统可挂载（但已加扰）。如果你走后一条路线，编写自己的软件来加密文件，然后在输入密钥时解密它们，这将是一种很好的编码体验。

无论哪种方式，您都会遇到一个问题：在使用清除数据之前，必须有人输入密钥。如果密钥存储在卡上，没有什么能阻止攻击者从被盗卡中读取密钥。如果它是由人输入的，则该人需要在每次启动后手动输入密钥。

# c++ - gtest 仅在方法在 .h 中实现时才检测方法，而不是在 .cpp 中（cmake；问题发生在“make”之后）

> ID：14148145
> 
> 赞同：2
> 
> 时间：2013-01-03T22:16:26.917
> 
> 标签：c++, googletest

我一直在尝试使用 cmake 和 gtest（谷歌测试）来适应 c++。

我试图理解为什么这个设置会产生错误

```
Undefined symbols for architecture x86_64:
"Project1::foo(int&)", referenced from:
    Project1Test_MethodBarDoesAbc_Test::TestBody()      in test_project1.cpp.o
        ld: symbol(s) not found for architecture x86_64 
```

当我运行“make”时。

**当我在 .h 文件中实现方法时，一切正常；但是当我只在 .h 文件中声明方法，然后在关联的 .cpp 文件中实现它时，就会发生此错误。**

我的测试文件：**test_project1.cpp**

```
#include <iostream>
#include "gtest/gtest.h"

#include "project1.h"

// tests outside of the class
TEST(IndependentMethod, ResetsToZero2) {
    int i = 0;
    independentMethod(i);
    EXPECT_EQ(0, i);
}
//...

// The fixture for testing the class
class Project1Test : public ::testing::Test {
protected:
    // You can remove any or all of the following functions if its body
    // is empty.

    Project1Test() {
        // nothing here
    }
};

// Test case must be called the class above
TEST_F(Project1Test, MethodBarDoesAbc) {
    Project1 p;
    int i = 0;
    p.foo(i); // WHY CAN'T Project1::foo(int&) be detected here?!
    EXPECT_EQ(1, i);
} 
```

类定义：**project1.h**

```
#ifndef PROJECT1_H_
#define PROJECT1_H_

#include <iostream> // IO access

using namespace std;

class Project1 {

public:
    // why only detected if implemented here?
    // void foo(int &i) {
    //  i = 1;
    // }
    void foo(int &i);

};

void independentMethod(int &i) {
    // From experience, should be implemented in the .h, not the .cpp.
    // Otherwise, test can't find independentMethod, but WHY?
    i = 0;
}

#endif /* PROJECT1_H_ */ 
```

Project1类的实现：**project1.cpp**

```
#include <iostream>
#include "project1.h"

void Project1::foo(int &i) {
    i = 1;
}

int main() {
    // this works fine if I directly compile project1.cpp and run ./a.out
    cout << "do stuff" << endl;
    int x = 4;
    cout << x << endl;
    independentMethod(x);
    cout << x << endl;
    Project1 p;
    p.foo(x);
    cout << x << endl;
} 
```

我进行测试的过程很典型：

```
mkdir build
cd build
cmake ..
make 
```

我不知道这是否相关，但这是我项目根目录中的**CMakeLists.txt文件：**

```
cmake_minimum_required(VERSION 2.8)

# Make PROJECT_SOURCE_DIR, PROJECT_BINARY_DIR, and PROJECT_NAME available
set(PROJECT_NAME MyProject)
project(${PROJECT_NAME})

set(CMAKE_CXX_FLAGS "-g -Wall")

#set(COMMON_INCLUDES ${PROJECT_SOURCE_DIR}/include) if you want your own include/ directory
# then you can do include_directories(${COMMON_INCLUDES}) in other cmakelists.txt files

################################
# Normal files
################################
add_executable(project1 project1.cpp)

################################
# GTest
################################
# This adds another subdirectory, which has project(gtest)
add_subdirectory(lib/gtest-1.6.0)

enable_testing()

# Include the gtest library
# gtest_SOURCE_DIR is available due to project(gtest) above
include_directories(${gtest_SOURCE_DIR}/include ${gtest_SOURCE_DIR})

################################
# Unit Tests
################################
add_executable(runUnitTests test_project1.cpp)
target_link_libraries(runUnitTests gtest gtest_main)
add_test(NAME runUnitTests COMMAND runUnitTests) 
```

我觉得这个问题是由于我对实现 .cpp 与 .h 有一些误解。我知道模板化函数必须在.h 中实现，但我没有模板化任何东西。我只是想测试一下。

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T12:41:28.243

您需要在 project1.cpp 中使用您自己的代码链接到您的 runUnitTests 可执行文件。

我倾向于从project1.cpp 的内容中创建一个库，并将主函数移动到一个单独的文件中（例如main.cpp）。然后你可以做

```
add_library(project1_lib project1.cpp project1.h)
add_executable(project1 main.cpp)
target_link_libraries(project1 project1_lib)

add_executable(runUnitTests test_project1.cpp)
target_link_libraries(runUnitTests project1_lib gtest gtest_main) 
```

# c++ - 当等效元素在数组中时，为什么我的简单快速排序实现会失败？

> ID：14148146
> 
> 赞同：-1
> 
> 时间：2013-01-03T22:16:35.390
> 
> 标签：c++, sorting, quicksort

我正在做一些练习题来刷新我的旧算法课程，并且我正在尝试实现快速排序。是的，我知道我们应该在生产代码中使用`std::sort`，但这是出于教育目的:)

我有下面的代码。它在数组中的所有元素都是唯一的时候有效，但在有重复元素时无效。怎么会？我在哪里动摇了？

```
void quicksort(int arr[], int left, int right)
{
    // base case:
    if (left >= right)
        return;

    // alternative case:
    int pivot_index = (left + right)/2;
    int pivot = arr[pivot_index];

    int i = left, j = right;
    int tmp;

    while (i < j)
    {
        // scan from left until elem > pivot or left == right, 
        while (arr[i] < pivot)
            ++i;

        // scan from right until elem < pivot or right == left.
        while (arr[j] > pivot)
            --j;

        if (i < j)
        {
            tmp = arr[i];
            arr[i] = arr[j];
            arr[j] = tmp;
            ++i;
            --j;
        }
    }
    // recurse on left and right.
    if (i > left)
        quicksort(arr, left, i);
    if (i < right)
        quicksort(arr, i + 1, right);
}

void main()
{
    const int arr_size = 7;
    int arr[arr_size] = {1,2,4,3,9,5,2};
    quicksort(arr, 0, arr_size - 1);

    for (int i = 0; i < arr_size; ++i)
    {
        std::cout << arr[i] << ", ";
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T22:21:48.403

```
if (i > left)
    quicksort(arr, left, i);
if (i < right)
    quicksort(arr, i + 1, right); 
```

假设您有一个包含两个相等元素的数组。然后`i == right`，你一次又一次地对完全相同的数组进行排序，一次又一次......

当您的数组包含多个元素时，这很可能在某个时候发生。

重复元素的另一个故障点示例如下

```
int arr[5] = { 4, 8, 4, 5, 6 }; 
```

枢轴是索引 2 处的 4，在第一次扫描`i == 0`和之后`j == 2`，两个 4 被交换，`i`递增，`j`递减，所以现在`i == j == 1`，循环停止。

然后递归调用排序`{ 4, 8 }`resp `{ 4, 5, 6}`，结果排序不正确。

您可以通过分别替换至少一个扫描条件来避免该问题`arr[i] <= pivot`。`arr[j] >= pivot`，但是您需要防止超出数组（当枢轴是最大或最小元素时），最好在其中包含条件`i < j`。

如果您响应。交换时减少索引，

```
if (i < j)
{
    tmp = arr[i];
    arr[i] = arr[j];
    arr[j] = tmp;
    ++i;
    --j;
} 
```

你总是有最后一次交换可能发生在某种情况下的问题

```
... x y z ...
    ^   ^
    i   j 
```

导致`i == j`指向`y`，并且您没有关于如何`y`与枢轴进行比较的信息。

因此，您需要检查`y`和处理不同的可能性。

但是如果没有重复的元素，您的实现也是不正确的；考虑

```
{ 1, 4, 5, 6, 9, 3, 2 }
           ^
         pivot 
```

首先，`i`是递增的，直到它指向枢轴，`j`一直指向 2。这两个被交换，`i`递增，`j`递减，所以现在情况变成了

```
{ 1, 4, 5, 2, 9, 3, 6 }
              ^  ^
              i  j 
```

`arr[i] > pivot`, 和`arr[j] < pivot`, 所以交换、递增`i`、递减`j`：

```
{ 1, 4, 5, 2, 3, 9, 6 }
              ^  ^
              j  i 
```

现在`j < i`，所以循环停止，但递归调用是`quicksort(arr, 0, 5);`和`quicksort(arr, 6, 6);`，所以“排序”数组中的最后一个元素不是数组中的最大元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T22:19:28.697

如果 left == right，你没有后备。如果您没有捕获，则代码将不会执行任何操作。

# javascript - AngularJS 推送到 $resource 查询检索到的数组并保存

> ID：14148149
> 
> 赞同：5
> 
> 时间：2013-01-03T22:16:49.810
> 
> 标签：javascript, angularjs

检查下面的代码。问题在评论中。

```
angular.module('MainStreetMower.services', ['ngResource'])
.factory('Videos', function($resource) {
    return $resource('/api/jobs/1/');
});
function VideoListCtrl($scope, Videos) {
    $scope.videos = Videos.query();
    $scope.what = function() {
        // proper way to push to the videos array and $save() the new array.
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T22:40:57.393

我会说以下内容：

```
function VideoListCtrl($scope, Videos) {
    $scope.videos = Videos.query();

    $scope.what = function() {

        var newVideoData = {}; // prepare new video data here from the model
        new Videos(newVideoData).$save(function(video){
          $scope.videos.push(video);
        }); 

    }
} 
```

如果您不想刷新整个列表。或者，您可以在保存回调中重新查询集合，如果您期望来自其他来源的更改：

```
new Videos(newVideoData).$save(function(video){
   $scope.videos = Videos.query();
}); 
```

请注意，您可以`save`在类级别上使用该方法。例如，上面的代码可以重写为：

```
Videos.save(newVideoData, function(video){
   $scope.videos = Videos.query();
}); 
```

# javascript - 触发器未触发

> ID：14148150
> 
> 赞同：0
> 
> 时间：2013-01-03T22:16:51.960
> 
> 标签：javascript, jquery, html

好的，所以我已经查看了有关触发器不起作用的所有其他问题。我认为我的问题与我认为的其他问题有些不同。

我在这里监听 div 的点击：

```
$(".switch").click(function(){
    var state = ( $(this).children('.b1').is('.btn-success') ? 0 : 1 );
    $(this).attr('data-state', state  );
    $(this).children('.b1').toggleClass('btn-success');
    $(this).children('.b0').toggleClass('btn-danger');
    $(this).trigger('stateChanged', state);
}); 
```

请注意，在底部我尝试触发事件`stateChanged`，在准备好文档时我运行此功能...

```
function data_depends(){
    var key_name = urlName();
    $(document).find('[data-depends]').each(function(index){
        var depends = $(this).data("depends").split(", ");
        if(depends != null)
            if(depends[1] == "state"){
                if($(depends[0]).data("state") == "0")
                    $(this).show(500);
                else
                    $(this).hide(500);
                var a = this;
                $(depends[0]).bind("stateChanged", 
                            function(x){if(x) $(a).show(500); 
                                        else $(a).hide(500);});
            }
    });
} 
```

注意我有这个功能......

```
$(depends[0]).bind("stateChanged", function(x){if(x) $(a).show(500);
else $(a).hide(500);}); 
```

但是这个函数永远不会被调用。

这是html

```
<div class="control-group">
    <label class="control-label" for="sale">Outcome</label>
    <div class="controls">
        <div id="sale" class="btn-group switch" data-toggle="buttons-radio" data-state="0" data-persist>
            <button type="button" class="btn b1">Sale</button>
            <button type="button" class="btn b0 btn-danger">No Sale</button>
        </div>
    </div>
</div>
<div class="control-group" data-depends="#sale, state">
    <label class="control-label" for="reason">No sale reason</label>
    <div class="controls">
        <input id="reason" type="text" placeholder="No sale reason" data-persist ><br>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:28:59.827

您的函数的签名应该将事件作为第一个参数：

```
$(depends[0]).bind("stateChanged", 
    function(evt, x) { // <-- here add "evt" as first argument
        if(x) $(a).show(500);
        else $(a).hide(500);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T22:22:06.647

所以这里回到这个问题：[https ://superuser.com/questions/527761/javascript-being-cached-in-chrome](https://superuser.com/questions/527761/javascript-being-cached-in-chrome)

有时它会这样做，有时它不会。

因此，对于任何想要使用依赖于开关的输入字段的人......

PS。需要 jquery 和引导程序。

* * *

```
javascript

$(".switch").click(function(){
    var state = ( $(this).children('.b1').is('.btn-success') ? 0 : 1 );
    $(this).attr('data-state', state  );
    $(this).children('.b1').toggleClass('btn-success');
    $(this).children('.b0').toggleClass('btn-danger');
    $(this).trigger('stateChanged', state);
    //$("#" + this.id).trigger('stateChanged', state);
});

function data_depends(){
    var key_name = urlName();
    $(document).find('[data-depends]').each(function(index){
        var depends = $(this).data("depends").split(", ");
        if(depends != null)
            if(depends[1] == "!state"){
                var a = this;
                $(depends[0]).bind("stateChanged", function(evt, x){if(!x) {$(a).show(500);}else{ $(a).hide(500);}});
            }else if(depends[1] == "!state"){
                var a = this;
                $(depends[0]).bind("stateChanged", function(evt, x){if(x) {$(a).show(500);}else{ $(a).hide(500);}});
            }

    });
}

$(document).ready(function(e) {
    data_depends();
    $(".switch").trigger('stateChanged', 0);
}); 
```

* * *

```
html

<div class="control-group">
    <label class="control-label" for="sale">Outcome</label>
    <div class="controls">
        <div id="sale" class="btn-group switch" data-toggle="buttons-radio" data-state="0" data-persist>
            <button type="button" class="btn b1">Sale</button>
            <button type="button" class="btn b0 btn-danger">No Sale</button>
        </div>
    </div>
</div>
<div class="control-group" data-depends="#sale, state">
    <label class="control-label" for="reason">No sale reason</label>
    <div class="controls">
        <input id="reason" type="text" placeholder="No sale reason" data-persist ><br>
    </div>
</div> 
```

# jquery - 无法让输入与内联块 div 元素保持在同一行

> ID：14148151
> 
> 赞同：0
> 
> 时间：2013-01-03T22:16:51.573
> 
> 标签：jquery, html

我不明白为什么会这样：我有两个`div`通常并排的内联元素（一个内部带有提交按钮）。然后我想让第二个`div`不可见（`display: none;`），然后实现`slideToggle`jQuery 函数来显示/隐藏按钮。

当第二个`div`最初可见时，它们是并排的，一切正常。但是当它最初是不可见的时，单击`div`以显示按钮时，它会出现在第一个`div`.

JSFiddle：（[jsfiddle](http://jsfiddle.net/zec4S/)）

```
<div>
    <div style="display:inline-block; width:500px; background:red;" onclick="$('#button_div').slideToggle('fast');">
        <h2 style="display:inline-block;">Some text</h2>
    </div>

    <div style="display:inline-block; vertical-align:middle; display: none;" id="button_div" name="button_div">
       <input type="submit" id="create_button" name="create_button" value="Create" />
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:34:45.057

如果您通过非内联 css 向您的元素声明，则 jQuery 将在和而不是`display: inline-block;`之间切换：`inline-block``none``block`

**CSS**

```
#button_div {
    display:inline-block;
}​ 
```

**[演示](http://jsfiddle.net/zec4S/5/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T22:20:30.640

您应该使用`float:left`代替`display:inline-block`，或`visibility:hidden`代替`display:none;`。

# c++ - 从具有私有内部类 C++ 的类继承

> ID：14148154
> 
> 赞同：0
> 
> 时间：2013-01-03T22:17:19.260
> 
> 标签：c++, class, inheritance, tree, avl-tree

所以我有一个任务，我需要使用秩二叉树。不久前我已经实现了一个模板 AVL 树 (C++)，所以我想将它用作基础并添加到它。由于我不想复制代码并使用我拥有的东西，我想制作一个继承自 AVL 的等级树类。如何使用我必须创建的模板等级 AVL 树？有没有办法创建一个内部 RankNode 类并让它从 AVL 的私有 Node 类继承？

```
/* AvlTree class */
template<typename KeyType, typename DataType>
class AvlTree {
    class AvlTreeNode;
    AvlTreeNode* root;
    int treeSize;

    void clearTree(AvlTreeNode* node);
    void updateBF(AvlTreeNode*& node); //updates the BF of the nodes from the root to the given node
    void updateHeight(AvlTreeNode*& node); //updates the height of the nodes from the root to the given node
    void balanceTree(AvlTreeNode*& node);
    void rotateLeft(AvlTreeNode*& node);
    void rotateRight(AvlTreeNode*& node);
    void insertFrom(const KeyType& key, const DataType& data, AvlTreeNode*& node);
    AvlTreeNode*& findNext(AvlTreeNode*& node, AvlTreeNode*& current,AvlTreeNode*& father);
    AvlTreeNode*& treeNav(AvlTreeNode*& node);
    void deleteLeaf(AvlTreeNode*& node);
    void deleteOneSon(AvlTreeNode*& node);
    void deleteTwoSons(AvlTreeNode*& node);
    void removeFromTree(const KeyType& key, AvlTreeNode*& node);
    AvlTreeNode* find(KeyType key, AvlTreeNode*& node);
    void inOrderAux(KeyType** keys, AvlTreeNode*& node, int& i);
    void inOrderRangedAux(KeyType** keys, AvlTreeNode*& node, const KeyType& start,const KeyType& end, int& i);
    void inOrderRangedCountAux(AvlTreeNode*& node, const KeyType& start,const KeyType& end, int& i);

public:
    AvlTree();
    virtual ~AvlTree();
    //AvlTree(const AvlTree& tree);
    DataType getData(const KeyType& key);
    void setData(const KeyType& key, const DataType& data);
    void insert(const KeyType& key, const DataType& data);
    void remove(const KeyType& key);
    void inOrder(int* size, KeyType** keys); //Gets all of the values in a Keyarray inorder
    void inOrderRanged(int* size, KeyType** keys,const KeyType& start,const KeyType& end);
    bool exists(const KeyType& key);
} ;

/* AvlTreeNode class */
template<typename KeyType, typename DataType>
class AvlTree<KeyType,DataType>::AvlTreeNode {
    KeyType key;
    DataType data;
    int bf;  
    int height; //The subtree's height
    AvlTreeNode* left;
    AvlTreeNode* right;
    AvlTreeNode(KeyType key, DataType data, AvlTreeNode* left = NULL, AvlTreeNode* right = NULL):key(key), data(data), bf(0),height(0), left(left), right(right){}
    ~AvlTreeNode(){}
    friend class AvlTree<KeyType, DataType>;
}; 
```

编辑：我找到了我正在寻找的答案。我需要的代码如下所示：

```
template<typename T>
class A{
protected:
    class B{

    };
};

template<typename T>
class C : A{
protected:
    class D :A<T>::B{

    };
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T22:19:00.900

您可以将新类标记为`friend`基类（坏主意，设计方面），或者使这些私有成员受到保护（`protected`毕竟这就是目的）。

至于为什么`friend`这里不是最好的主意：首先，基类不应该关心派生类。其次，如果你想扩展某些东西，那么应该首先（或追溯）使某些东西可扩展；也就是说，它应该将可能暴露给派生类的成员标记为`protected`. 否则，类被锁定；因此，它发出简单的信号：*我的原始创建者不想让我扩展*。

# mobile - D3.js中的动画纵横比？

> ID：14148156
> 
> 赞同：1
> 
> 时间：2013-01-03T22:17:22.273
> 
> 标签：mobile, d3.js, treemap

我正在使用树图示例[http://bl.ocks.org/4063582](http://bl.ocks.org/4063582)

我想通过动画树状图的单元格以适应新的纵横比来响应移动设备上的方向变化。这是我的非工作尝试：

```
 d3.select("#rotate").on("click", function(){
    alert('rotate');

    div.style('width', height+'px').style('height', width+'px');

    treemap.size([height, width]);

    var tmp = width;
    width = height;
    height = tmp;

    node
        .transition()
        .duration(1500)
        .call(position);
  }); 
```

我的测试按钮会触发警报，但树形图中没有任何反应。这可能与树形图有关吗？

# liferay - 设置主菜单链接项（或页面名称）的“标题”属性

> ID：14148159
> 
> 赞同：1
> 
> 时间：2013-01-03T22:17:34.987
> 
> 标签：liferay, liferay-6, liferay-velocity, liferay-theme

当我将鼠标悬停在 Liferay 的主菜单项上时，我希望有工具提示。默认情况下，没有办法做到这一点。即使在`*.vm`文件中，标记也不包括链接的任何标题属性。

我试图解决的方法是为页面定义一个自定义属性。这给了我一个 Liferay 本身的界面来输入我可能想要的标题值。然后我打算使用这个值作为菜单链接的标题值。不确定这是否会起作用。

有没有更好的方法我不知道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:21:12.227

那我觉得可以用`HTML Title`for页面描述如图：

![在此处输入图像描述](../Images/ad82d4d6a5a208c44aba3ab4d0bccf25.png)

正如@Sharana 所提到的，您可以在自定义主题的标签属性中使用此（[`$nav_item.getTitle()`](https://github.com/liferaybrasil/liferay-portal-trunk/blob/6c6027230f62d49dd0e52194143fd1f295dd5798/portal-service/src/com/liferay/portal/theme/NavItem.java#L100 "通过 getTitle() 获取 `HTML Title` 的源代码")） ：`title``<a>``navigation.vm`

```
<a title="$nav_item.getTitle()" href="$nav_item.getURL()" $nav_item.getTarget()><span>$nav_item.icon() $htmlUtil.escape($nav_item.getName())</span></a> 
```

您也可以使用此 ( [`$nav_item.getLayout().getHTMLTitle($locale)`](https://github.com/liferaybrasil/liferay-portal-trunk/blob/6c6027230f62d49dd0e52194143fd1f295dd5798/portal-service/src/com/liferay/portal/theme/NavItem.java#L76 "通过 getLayout() 获取 `HTML Title` 的源代码"))：

```
<a title="$nav_item.getLayout().getHTMLTitle($locale)" href="$nav_item.getURL()" $nav_item.getTarget()><span>$nav_item.icon() $htmlUtil.escape($nav_item.getName())</span></a> 
```

我更喜欢这种方法，因为它更干净，因为它不涉及添加新的自定义字段，并且工作是使用 liferay 中已经存在的内容完成的，并且减少了对`expando`（可能这无关紧要）的调用。

希望这有助于为您提供一些指导。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:26:19.123

两种解决方案都很好。

这仅取决于工具提示文本是否需要与 html 页面标题不同。如果是这样，请转到自定义属性路线。如果没有，请重用 html 标题方法。

如果我在这里遗漏了什么，请原谅我。如果我是，请澄清。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T00:18:00.107

为什么你认为在 navigation.vm 中没有办法做到这一点？

下面是来自navigation.vm 的代码

```
<a href="$nav_item.getURL()" $nav_item.getTarget()><span>$nav_item.icon() $htmlUtil.escape($nav_item.getName())</span></a> 
```

如果您为此添加标题属性，

```
<a title="$htmlUtil.escape($nav_item.getName())" href="$nav_item.getURL()" $nav_item.getTarget()><span>$nav_item.icon() $htmlUtil.escape($nav_item.getName())</span></a> 
```

有用。

对于儿童物品也是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T17:30:00.950

正确的答案是我最初要去的方向。创建与页面相关的自定义字段，然后在速度模板中使用它。这是导航菜单的完整代码，其中`menuTitle`是我的自定义变量的名称：

```
<nav class="$nav_css_class" id="navigation">
    <h1>
        <span>#language("navigation")</span>
    </h1>

    <ul>
        #foreach ($nav_item in $nav_items)
            #if ($nav_item.isSelected())
                <li class="selected">
            #else
                <li>
            #end
                <a title="$nav_item.getLayout().getExpandoBridge().getAttribute("menuTitle")" href="$nav_item.getURL()" $nav_item.getTarget()><span>$nav_item.icon() $nav_item.getName()</span></a>

                #if ($nav_item.hasChildren())
                    <ul class="child-menu">
                        #foreach ($nav_child in $nav_item.getChildren())
                            #if ($nav_child.isSelected())
                                <li class="selected">
                            #else
                                <li>
                            #end
                                <a title="$nav_child.getLayout().getExpandoBridge().getAttribute("menuTitle")" href="$nav_child.getURL()" $nav_child.getTarget()>$nav_child.getName()</a>
                            </li>
                        #end
                    </ul>
                #end
            </li>
        #end
    </ul>
</nav> 
```

# c# - 在从 NewItemRow 插入行后将焦点设置为 NewItemRow

> ID：14148160
> 
> 赞同：1
> 
> 时间：2013-01-03T22:17:39.913
> 
> 标签：c#, wpf, devexpress

我正在使用 DevExpress XPF将数据插入我的数据库`GridControl`。`NewItemRow`

当我在最后一个单元格中按 Enter 键时，它会输入数据并返回到网格的第一行。

我想要它做的是返回到，`NewItemRow`这样用户就可以开始插入新记录而无需重新选择`NewItemRow`行。

从 NewItemRow 插入行后，如何将焦点设置到 NewItemRow？

ps：我问的是这里而不是 DevExpress 论坛，因为这里的响应要快得多：)

编辑：

这是我尝试过的一些代码，但结果完全相同：

```
void MVVMFriendlyDxgTableView_RowUpdated(object sender, DevExpress.Xpf.Grid.RowEventArgs e)
{
  if (RowUpdatedCommand != null)
  {
    if (e.Row != null)
    {
      if (RowUpdatedCommand.CanExecute(e.Row))
      {
        RowUpdatedCommand.Execute(e.Row);
        if (e.RowHandle == GridControl.NewItemRowHandle)
        {
            Dispatcher.BeginInvoke(new Action(() =>
            {
                SelectRow(GridControl.NewItemRowHandle);
            }));
            e.Handled = true;
        }
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T23:39:35.733

事实证明，我遇到的问题是由于更新数据绑定 ObservableCollection 导致刷新网格并选择了不同的行。DJKRAZE 发布的第二个代码本来可以工作，但我对数据库的调用是异步的，因此在 RowUpdated 事件完成之前没有发生。为了解决这个问题，我重写了 OnDataChanged 方法以在数据更新后选择 NewItemRow。

这是有效的结果代码。

```
protected override void OnDataChanged(bool rebuildVisibleColumns)
{
    base.OnDataChanged(rebuildVisibleColumns);
    Dispatcher.BeginInvoke(new Action(() =>
    {
        this.FocusedRowHandle = GridControl.NewItemRowHandle;
    }), null);
} 
```

谢谢您的帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T22:37:28.047

您可以简单地将网格视图的 FoucusedRow 属性设置为从 RowEventArgs 获得的新行对象实例：

```
private void MVVMFriendlyDxgTableView_RowUpdated(object sender, DevExpress.Xpf.Grid.RowEventArgs e) 
{
    if (e.RowHandle == GridControl.NewItemRowHandle)
    {
        Dispatcher.BeginInvoke(new Action(() => { viewSource.View.MoveCurrentToLast(); }));
        Dispatcher.BeginInvoke(new Action(() => { gridView.FocusedRow = e.Row; }));
        e.Handled = true;
    }
} 
```

如果出现闪烁，你可以试试这个

```
 if (e.RowHandle == GridControl.NewItemRowHandle)
    Dispatcher.BeginInvoke(new Action(() =>
    {
        MVVMFriendlyDxgTableView.FocusedRowHandle = GridControl.NewItemRowHandle;
    }), null); 
```

排序和 ObservableCollection 看这个例子 [排序一个集合 / ObservableCollection](http://www.jaider.net/archives/162-sort-a-observablecollection/)

# css - CSS flexbox 模块是否仅适用于直接子元素？

> ID：14148162
> 
> 赞同：21
> 
> 时间：2013-01-03T22:17:56.670
> 
> 标签：css, flexbox

看看我拥有并运行的网站的这个页面设计：

[http://www.jungledragon.com/image/9472/barn_owl_close-up.html](http://www.jungledragon.com/image/9472/barn_owl_close-up.html)

如您所见，这涉及经典的两列布局。事情的顺序很重要。例如，您可以直接在照片旁边看到这所关注的物种。

我现在正在为这个网站编写一个响应式设计，并面临一个挑战。想象一下在狭窄的智能手机视口上的那个页面。经典的策略是简单地将右列“堆叠”在左列下方，让用户垂直滚动。然而，就元素的排序而言，这远非理想。“物种”块将位于照片下方，用户首先必须滚动浏览评论等内容，然后才能看到照片和物种之间的关系。

我正在尝试解决这个问题，这篇解释 CSS 的 flexbox 作为一种可能的解决方案的文章听起来很有希望：

[http://www.jordanm.co.uk/post/21863299677/building-with-content-choreography](http://www.jordanm.co.uk/post/21863299677/building-with-content-choreography)

这里的想法是只使用 CSS，可以改变元素的视觉顺序，这正是我所需要的。不幸的是，从那以后我了解到这篇文章使用了过时的规范，并且几乎没有任何浏览器支持新规范：

[http://css-tricks.com/old-flexbox-and-new-flexbox/](http://css-tricks.com/old-flexbox-and-new-flexbox/)

这种对我来说是毁灭性的。尽管如此，我仍然想在概念层面提出我的问题：

我见过的所有关于 flexbox 的演示都有这样简单的标记：

```
<div id="somecontainer">
  <div id="child1"></div>
  <div id="child2"></div>
</div> 
```

接下来，将容器声明为 flexbox，方向垂直。最后，为每个子元素分配一个顺序。例如，这允许使用单个 CSS 语句将 child2 移动到 child1 之上。

现在问题来了。如果实际标记更复杂，因为有额外的层次结构在起作用怎么办？一个例子：

```
<div id="somecontainer">

  <div id="colmain">

    <div id="content1"></div>
    <div id="content2"></div>
    <div id="content3"></div>

  </div>

  <div id="colside">

    <div id="content4"></div>
    <div id="content5"></div>
    <div id="content6"></div>

  </div>

</div> 
```

如您所见，此标记具有额外的层次结构，要重新排序的实际内容块不是最高级别容器的直接子元素。他们是孩子，但不是直系孩子。

flexbox 和子元素的重新排序可以在这种情况下工作吗？例如，“content5”可以在“content1”和“content2”之间移动吗？

无论浏览器支持不佳，我都试图从概念上了解是否会支持。我问的原因是因为额外的列层次结构在标记中非常常见，如果 flexbox 重新排序仅适用于直接子级，那将是完全糟糕的。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-04T04:18:08.580

要回答您的问题标题：是的，这实际上在规范中已[明确说明：](http://www.w3.org/TR/css3-flexbox/#flex-items)

> 弹性容器的内容由零个或多个***弹性项目***组成：弹性容器的每个子项都成为弹性项目

如果规范中的措辞让您感到困惑，那是因为您的措辞有点偏离：

> 他们是孩子，但不是直系孩子。

根据定义，*孩子*是直接的……内部`div`的 s 称为*后代*，但不是孩子，因为它们没有直接嵌套在 flex 容器中。

现在，任何带有`display: flex`或被`display: inline-flex`指定为弹性容器的东西。虽然每个弹性项目都参与弹性容器的格式化上下文，但弹性项目的后代是独立格式化的，与弹性容器无关，就好像容器一开始就没有弹性一样。

因此，您不能重新排序弹性项目的后代，除非弹性项目本身也成为其后代的弹性容器，但即便如此，您也不能在此内部容器之外以及相对于外部容器的兄弟姐妹周围重新排序它们容器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-11-14T16:25:52.163

[BoltClock](https://stackoverflow.com/users/106224/boltclock)的[回答](https://stackoverflow.com/a/14151015/1529630)很好，但我想补充一点：

它是 flex 容器的（直接）子框成为 flex 项。但这些不一定对应于（直接）子元素。

一些例子：

*   弹性容器的`::before`和`::after`伪元素生成弹性项目。
*   每个直接包含在 flex 容器内的连续文本都被包裹在一个匿名的 flex 项中。
*   如果 flex 容器的子元素有`display: contents`，它将不会被渲染，并且它的子元素（flex 容器的孙子）将显示为 flex 项。

然后，如果您在 flex 容器内有一个复杂的结构，并且您希望树的叶子成为外部容器的 flex 项，您可以使用`display: contents`.

但是，note`display: contents`是最近添加的，因此尚未得到广泛支持。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T09:17:22.547

一些潜在的解决方案将是 CSS 网格布局：[http](http://dev.w3.org/csswg/css3-grid-layout/) ://dev.w3.org/csswg/css3-grid-layout/但是在撰写本文时只有 IE10 支持它：[http ://caniuse.com/css-grid](http://caniuse.com/css-grid)

和模板布局[http://www.w3.org/TR/2009/WD-css3-layout-20090402/](http://www.w3.org/TR/2009/WD-css3-layout-20090402/)

不确定是否正在开发中，或者我们是否会有另一种 flex-box 类型的东西，它有很多相似但不断变化的语法

# django - Django URL 调度程序

> ID：14148180
> 
> 赞同：-4
> 
> 时间：2013-01-03T22:19:38.410
> 
> 标签：django, url, dispatcher

我一直在开发一个新的 Django 站点，但我遇到了 url 调度程序的问题。

基本上我需要帮助才能使以下网址正常工作。

```
/site/aaa-00

/site/aaa-00-00 
```

我已经查看了 django 文档上的 URL 调度程序，现在我更加困惑了。

```
url(r'^/site/(?P<name>[-\w]+)/$', 'rollout.views.update'), 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T22:57:03.347

您的正则表达式不会完成这项工作。我希望它看起来更像：

```
^site/(?P<path>[-\w]+)/$ 
```

做你想做的事。两个主要区别：*URL 模式不应该与前导斜杠匹配*，即斜杠被剥离（或者，更准确地说，它不是 URL 的路径组件的一部分，但这越来越迂腐了）；和`?P`in 表达式应该为组取一个名字（它被转换成你的视图函数的参数）。

您可能不知道的另一件事：您`/`在 URLconf 行的末尾有一个尾随，但在您尝试匹配的 URL 中没有。请注意，默认情况下，Django（`CommonMiddleware`正在运行）将自动重定向以包含尾随`/`，除非路径已经与 URLconf 中的某些内容匹配；这可以使用[配置`APPEND_SLASH`选项](https://docs.djangoproject.com/en/dev/ref/settings/#append-slash)来控制。在您的情况下，这应该“正常工作”，尽管它会导致重定向，因此您不应发出没有尾部斜杠的 URL（或在 URLconf 中使斜杠可选）。

# jquery - 根据浏览器设置正确的 css 转换

> ID：14148182
> 
> 赞同：0
> 
> 时间：2013-01-03T22:19:45.993
> 
> 标签：jquery, css-transitions, browser-detection

我正在尝试根据浏览器添加正确的 css“转换”，这是我尝试过的，但它不起作用：

```
if ($.browser.msie) {
    var BroTrans = 'transform';
 } else
if ($.browser.webkit) {
    var BroTrans = '-webkit-transform';
 } else
if( $.browser.opera ){
    var BroTrans = '-o-transform';
 } else
if( $.browser.mozilla ){
    var BroTrans = '-moz-transform';
 }

var $img = $('img.zoom');
$img.css({
  BroTrans : 'scale(2) rotate(0.1deg)'
 }); 
```

我正在使用 jquery 1.7 所以它不是`$.browser`现在贬值的事实

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T22:22:01.480

```
var $img = $('img.zoom');
$img.css(BroTrans, 'scale(2) rotate(0.1deg)'); // ta da ? 
```

当您按照自己的方式进行操作时，会将`BroTrans`css 字段设置为该值，这**不是**您想要的。

* * *

还有一点：尽量不要一遍`var BroTans`又一遍地重复。只需在顶部定义一次：

```
 var BroTrans;
 if ($.browser.msie) {
    BroTrans = 'transform';
 } else if ($.browser.webkit) {
    BroTrans = '-webkit-transform';
 } else if($.browser.opera) {
 //... 
```

# wpf - WPF中列表框项目的自定义工具提示

> ID：14148184
> 
> 赞同：2
> 
> 时间：2013-01-03T22:19:53.100
> 
> 标签：wpf, xaml, listbox, tooltip

我有一个 ListBox 显示人才对象的 ObservableCollection。当用户将鼠标悬停在 ListBox 中的每个项目上时，我想在 ToolTip 中显示有关人才的几条信息。

我的列表框：

```
<ListBox ItemsSource="{Binding ElementName=CE_Races_racesLB, Path=SelectedItem.Talents}" ItemTemplate="{StaticResource removableTalentListTemplate}" /> 
```

项目模板：

```
<DataTemplate x:Key="removableTalentListTemplate">
    <StackPanel>
        <TextBlock FontSize="13" Text="{Binding Path=tName}" VerticalAlignment="Center" Width="175" Height="18" Grid.Column="0" />
    </StackPanel>
</DataTemplate> 
```

如果我将 ToolTipService.ToolTip="{Binding Path=Description" 添加到 TextBlock 属性，我可以显示人才的描述。但是，当我尝试像这样创建自定义工具提示时：

```
<DataTemplate x:Key="removableTalentListTemplate">
    <StackPanel>
        <TextBlock FontSize="13" Text="{Binding Path=tName}" VerticalAlignment="Center" Width="175" Height="18" Grid.Column="0" />
            <TextBlock.ToolTip>
                <ToolTip>
                    <StackPanel>
                        <TextBlock Text="{Binding Path=Description}" />
                    </StackPanel>
                </ToolTip>
            </TextBlock.ToolTip>
        </TextBlock>
    </StackPanel>
</DataTemplate> 
```

当我将鼠标悬停在 ListBox 项上时，工具提示只会显示“System.Windows.Controls.StackPanel”。我真的很想创建一个显示大量信息的漂亮工具提示，但我无法克服这个障碍。这是它现在的截图： http: [//silkforge.com/dev/ss.jpg](http://silkforge.com/dev/ss.jpg)。您看不到鼠标，但您可以在 ListBox 项“Acute Hearing I”下看到工具提示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T22:26:48.140

你试过这个吗？

```
<TextBlock Text="{Binding Path=tName}">
  <ToolTipService.ToolTip>
    <StackPanel>
      <TextBlock Text="{Binding Path=Description}" />
    </StackPanel>
  </ToolTipService.ToolTip>
</TextBlock> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T22:34:34.400

快速测试后，您的代码似乎可以正常工作。

我的测试：

xml:

```
 <Window x:Class="WpfApplication4.MainWindow"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            xmlns:local="clr-namespace:WpfApplication4"
            xmlns:Controls="clr-namespace:Liz.Common"
           Title="MainWindow" Height="300" Width="400" Name="UI" >

 <Window.Resources>
    <DataTemplate x:Key="removableTalentListTemplate">
            <StackPanel>
                <TextBlock FontSize="13" Text="{Binding Path=tName}" VerticalAlignment="Center" Width="175" Height="18" Grid.Column="0" >
                    <TextBlock.ToolTip>
                        <ToolTip Background="Blue">
                            <StackPanel>
                                <TextBlock Text="{Binding Path=Description}" Foreground="White" />
                            </StackPanel>
                        </ToolTip>
                    </TextBlock.ToolTip>
                </TextBlock>
            </StackPanel>
        </DataTemplate>
     </Window.Resources>

        <Grid>
            <ListBox ItemTemplate="{StaticResource removableTalentListTemplate}" ItemsSource="{Binding ElementName=UI, Path=Models}" />
        </Grid>
    </Window> 
```

代码：

```
public partial class MainWindow : Window
{
    private ObservableCollection<MyModel> _models = new ObservableCollection<MyModel>();

    public MainWindow()
    {
        InitializeComponent();
        Models.Add(new MyModel { tName = "Test", Description = "Hello" });
    }

    public ObservableCollection<MyModel> Models
    {
        get { return _models; }
        set { _models = value; }
    }
}

public  class MyModel : INotifyPropertyChanged
{
    private string _tName;
    private string _description;

    public string tName 
    {
        get { return _tName; }
        set { _tName = value; NotifyPropertyChanged("tName"); } 
    }

    public string Description
    {
        get { return _description; }
        set { _description = value; NotifyPropertyChanged("Description"); }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(string property)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(property));
        }
    }
} 
```

结果： ![在此处输入图像描述](../Images/a00fae8ba89759679af5cf52fc272e77.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-13T13:16:03.123

我不知道我是否遇到过与 OP 相同的问题，但对我来说麻烦的根源是以下隐式风格：

```
<Style TargetType="{x:Type ToolTip}">
   <Setter Property="ContentTemplate">
       <Setter.Value>
           <DataTemplate>
               <TextBlock TextWrapping="Wrap" Text="{Binding}" MaxWidth="600"/>
           </DataTemplate>
       </Setter.Value>
   </Setter>
</Style> 
```

这种风格的目的是消除冗长的工具提示超出可视屏幕区域，但它只适用于标准的内联工具提示。尝试创建自定义的、详细的工具提示会导致 OP 报告的“System.Windows.Controls.StackPanel”。删除这种隐式样式立即解决了问题......但是也删除了不错的 600 DIP 宽度限制。

# mysql - 如何优化这个联合查询

> ID：14148185
> 
> 赞同：0
> 
> 时间：2013-01-03T22:19:54.547
> 
> 标签：mysql

我有三个 MySQL 表。 `PRODUCT`是有两个孩子的父母，`UK_SALES`并且`AUS_SALES`. `UK_SALES`和的结构`AUS_SALES`是相同的，它们是`PRODUCT`通过产品 ID 关联的。

我想获得给定产品类别在英国和澳大利亚的销售联盟，所以我使用这个查询：

```
SELECT au.* FROM aus_sales au
INNER JOIN product p on p.id = au.id
WHERE p.category = 'electrical'

UNION ALL

SELECT uk.* FROM uk_sales uk
INNER JOIN product p on p.id = uk.id
WHERE p.category = 'electrical' 
```

现在，这很好用，但我不确定它是否是最佳的。具体来说，我认为产品表被扫描两次以将其限制为

`WHERE p.category = 'electrical'`.

真的是这样吗？或者 MySQL 是否会缓存第一个过滤器的结果以用于第二个选择？

其次，有没有更好的方法来编写这个查询？

我的产品和销售表都将包含数百万条记录，因此性能很重要。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T22:25:22.767

我想这两个表（英国和澳大利亚销售）没有重复，如果有，那只是巧合，你需要它们，所以`UNION ALL`用来避免排序（以及删除任何重复）：

```
SELECT au.* FROM aus_sales au
INNER JOIN product p on p.id = au.id
WHERE p.category = 'electrical'

UNION ALL

SELECT uk.* FROM uk_sales uk
INNER JOIN product p on p.id = uk.id
WHERE p.category = 'electrical' ; 
```

索引`product (category, id)`也将有助于执行计划，因为它将用于子查询并且`product`根本不会被访问。

# c# - 如何使用 odbc 驱动程序连接 Ms access 2010 (.accdb) 数据库

> ID：14148186
> 
> 赞同：2
> 
> 时间：2013-01-03T22:19:55.103
> 
> 标签：c#, c#-4.0, ado.net, windows-applications

谁能告诉如何将 Ms access 2010 (.accdb) 数据库与 c# 和 .NET 4.0 中的 odbc 驱动程序连接起来

我试过了

```
string connetionString = ("Driver={Microsoft Access Driver(*.mdb*.accdb)};DBQ=C:\\Users\\Administrator\\Desktop\\New folder\\MatchDetails.accdb;");

OdbcConnection myConnection = new OdbcConnection(connetionString);

try
{                   
    myConnection.Open();
    MessageBox.Show("Connection Open ! ");
    myConnection.Close();
}
catch (Exception ex)
{
    MessageBox.Show("Can not open connection ! ");
} 
```

抛出这个异常

> 错误 [IM002] [Microsoft][ODBC 驱动程序管理器] 找不到数据源名称并且没有指定默认驱动程序异常

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T22:28:19.330

您的[连接字符串](http://www.connectionstrings.com/access)中有错字：

```
string connectionString = ("Driver={Microsoft Access Driver(*.mdb, *.accdb)};DBQ=C:\\Users\\Administrator\\Desktop\\New folder\\MatchDetails.accdb;"); 
```

（注意驱动程序名称中的逗号）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-17T06:44:38.487

我看到驱动程序名称中有两个拼写错误：

1.  括号前没有空格
2.  括号内没有逗号

正确的连接字符串：

```
string connectionString = ("Driver={Microsoft Access Driver (*.mdb, *.accdb)};DBQ=C:\\Users\\Administrator\\Desktop\\New folder\\MatchDetails.accdb;"); 
```

# coffeescript - 如何使用 Grunt/Yeoman 管理和连接 CoffeeScript 文件？

> ID：14148189
> 
> 赞同：1
> 
> 时间：2013-01-03T22:20:13.300
> 
> 标签：coffeescript, gruntjs, yeoman

我是 Grunt/Yeoman 的新手，我有一个现有的应用程序，其中包含 40 多个 Coffeescript 文件，如下所示：

```
scripts/
  lib/
    ...
  common/
    ...
  util/
    ...
  app/
    views/
    models/
      A.cofffee
      B.cofffee
      C.cofffee 
```

我想按特定顺序连接它们并编译成一个文件。

所以我想说“按此顺序编译”

```
scripts/lib/some_superclass.coffee
scripts/lib/*
common/*
util/app/views/*
util/app/models/some_model_that_needs_to_be_required_first.coffee
util/app/models/* 
```

在 Grunt/Yeoman 项目中如何解决这个问题？（我真的不想把每个文件都拼出来）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T09:05:00.387

在您的`GruntFile.js`中，您应该有`coffee`如下步骤：

```
// Coffee to JS compilation
coffee: {
  compile: {
    files: {
      'temp/scripts/*.js': 'app/scripts/**/*.coffee' 
    },
    options: {
      basePath: 'app/scripts'
    }
  }
},
... 
```

通常，您应该能够：

```
 files: {
      '/path/to/destination/index.js': [
        'scripts/lib/some_superclass.coffee', 
        'scripts/lib/**/*.coffee', 
        'common/**/*.coffee',
        #...
      ] 
    }, 
```

# xml - 批处理文件命令/处理

> ID：14148190
> 
> 赞同：1
> 
> 时间：2013-01-03T22:20:29.960
> 
> 标签：xml, batch-file

我需要执行以下操作：

*   我有一个包含文本的 .xml 文件文件夹
*   我需要搜索特定的 xml 对并提取它们的值
*   我需要遍历该文件夹中的所有 .xml 文件，并将结果输出到仅包含我需要的值的单个文件中。

我将如何使用 .bat 文件来做到这一点。我有一些使用 .bat 文件的概念，但从来没有这么复杂的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T02:03:00.910

也许如果您向我们展示 .xml 文件的一般格式和您想要的特定对，我们可以向您展示您想要的批处理文件。批处理文件被写入以特定固定方式处理文件，因此在其他格式文件上没有“通用”批处理解决方案，除非其他格式不灵活。

下面是使用批处理文件处理 .xml 文件的三个示例：

[编辑 XML 文件](https://stackoverflow.com/questions/8772125/editing-xml-files/8782927#8782927)

[用于提取特定 XML 标记值的批处理文件](https://stackoverflow.com/questions/8217765/a-batch-file-to-extract-the-value-of-a-specific-xml-tag/8220420#8220420)

[如何在批处理cmd中循环遍历xml值](https://stackoverflow.com/questions/9912535/how-to-loop-through-xml-values-in-a-batch-cmd/9915014#9915014)

以下批处理文件是实现您想要的示例，假设您想要的“xml对”与上面的第二个示例相同：

```
@echo off
rem I have a folder of .xml files with text in them
cd "C:\Documents and Settings\My Name\The Folder"
rem I need to iterate through all the .xml files in that folder and output the results to a single file with just the values I need. 
(for %%a in (*.xml) do (
   call :check_lines < "%%a"
)) > "The Single File.txt"
exit /b

rem I need to search for particular xml pairs and pull their values 
rem Seek for the start of Data tag
:check_lines
   set /P line=
if not "%line%" == "<DATA>" goto check_lines

rem Copy until the end of Data tag
set /P line=
:put_lines
    if "%line%" == "</DATA>" goto end_lines
    set /P line=%line% 
goto put_lines
:end_lines
echo/
exit /B 
```

# c# - 有没有办法在网页上获取和显示正在运行的服务器进程的状态？

> ID：14148192
> 
> 赞同：0
> 
> 时间：2013-01-03T22:20:40.503
> 
> 标签：c#, javascript, asp.net, ajax

我所拥有的是服务器上的一个进程，该进程运行并需要大量时间。它本质上构建了一些数据表，这些数据表在回发时显示在页面上。

我想要的是一种在服务器进程运行时在某处记录进度的方法，并在使用完成的数据刷新之前在我正在查看的页面上报告该进度。

这甚至可能吗？我能想到的最好方法是将进度记录到服务器上的文件中，并通过 Ajax/Javascript 定期读取文件内容，但这似乎是一个杂项。

也许这可以使用多个页面或线程。我不知道。

有什么建议么？

**编辑：**
主要目标是在网页上显示某种进度条以显示上述进度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T22:26:16.200

> 这甚至可能吗？

是的，但这并不容易，也不漂亮。

> 我能想到的最好方法是将进度记录到服务器上的文件中，并通过 Ajax/Javascript 定期读取文件内容，但这似乎是一个杂项。

是的，差不多。其他选项是使用数据库来存储信息或会话，但任何可以通过 Ajax 请求以某种方式访问​​的存储位置都可以使用。毫无疑问，您会想要创建一个 Web 服务或类似的东西来抽象出您使用的任何存储方法。

[这](http://code.msdn.microsoft.com/CSASPNETBackgroundWorker-dda8d7b6/view/SourceCode)是 Microsoft 示例中该通用方法的实现。它使用 Session 来存储当前进度，并且严重依赖基于 ASP 的构造。

另一种方法完全是在客户端和服务器之间设置一个 websocket，这将允许您将信息从服务器推送到客户端。它可能会表现得更好（减少网络 IO），尽管设置起来可能并不容易。不过，我没有任何示例（或尝试过）这样的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T22:27:25.730

ajax 、 ajax 、 xhr、 jsonp，在您的流程中有里程碑，因此您可以提供状态

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T22:40:11.643

如果您正在运行的进程独立于您的页面（例如，服务器内的 shell 脚本），您可以将此脚本的中间结果写入 javascript 可访问的文本文件中（例如[http://contosoweb.com /web/log.txt](http://contosoweb.com/web/log.txt) )，并使用计时器和一些 jquery 从页面定期更新它。

这里有 jQuery Docs 中的 .Ajax 信息：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

在这里如何使用计时器：[How to set a timer in javascript](https://stackoverflow.com/questions/460474/how-to-set-a-timer-in-javascript)

# django - Django 查询集单元测试

> ID：14148199
> 
> 赞同：2
> 
> 时间：2013-01-03T22:21:39.700
> 
> 标签：django, unit-testing

我是整体单元测试的新手，想知道如何为以下功能编写单元测试。

```
from poll.models import Poll
def total():
    all_polls = Poll.objects.all()
    return all_polls.count() 
```

理想情况下，我应该在上面的函数中测试什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T22:29:25.930

测试这个特定功能没有多大意义，因为它没有做任何非常有用的事情。但是，由于您使用它作为示例，因此原则是使用一些示例数据设置系统，然后检查该函数是否返回您所期望的。因此，在这种情况下，您的测试可以创建两个 Poll 对象，然后断言该函数返回值 2。

您可能还想检查边缘情况：在这种情况下，我唯一能想到的是，当根本没有投票时它不会崩溃。因此，在插入两个轮询之前，您可以调用该函数并测试它是否返回 0；然后，添加两个实例并检查返回值 2。

不过，一般来说，您应该避免测试 Django 自己的功能：Django 自己的单元测试很好地涵盖了这一点。在这种情况下，您的函数除了调用内置方法之外什么都不做，检查`count()`函数是否返回两个确实没有意义，因为我们已经知道它会返回。

# cocos2d-iphone - 找不到将文件夹添加到项目.h后的xcode

> ID：14148200
> 
> 赞同：0
> 
> 时间：2013-01-03T22:21:41.853
> 
> 标签：cocos2d-iphone, adwhirl

我正在开发 cocos2d 应用程序并试图将 adwhirl 添加到其中。我下载了 AdWhirl sdk 并添加到项目中（将文件夹拉到所有 .h .m 文件所在的列，选中添加到目标和复制文件）。但是在我添加例如之后

```
#import "AdWhirlDelegateProtocol.h" 
```

我收到类似这样的错误 AdWhirlDelegateProtocol.h file not found

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:36:09.387

确保它`AdWhirlDelegateProtocol.h`实际上已链接到您的项目中（您应该能够在 XCode 左侧的 AdWhirl 文件夹下找到它）。

之后，您可能需要查看`Library Search Paths`下方`Build Settings`以确保它指向所有 AdWhirl 文件所在的正确路径。

您还可以检查`Header Search Paths`下方`Build Settings`以确保它没有指向不应该指向的任何地方。

# php - 奇怪的 $_SESSION 行为

> ID：14148206
> 
> 赞同：0
> 
> 时间：2013-01-03T22:22:10.233
> 
> 标签：php

我的 header.php 中有以下代码，它从 $_SESSION 获取消息并将其显示给用户，我在控制器中设置了“消息”会话变量。

```
<div id="messages">
    <?php if (isset($_SESSION["message"])):?>
    <span class="message"> <?php echo "message is ".$_SESSION["message"]?>
    </span>
    <?php endif ?>
</div> 
```

这工作正常并**显示**消息。现在我想从会话中删除“消息”变量，以便仅在一个请求中调用它，所以我添加了行 unset($_SESSION["message"]); 在结束之前，所以代码变为：

```
<div id="messages">
    <?php if (isset($_SESSION["message"])):?>
    <span class="message"> <?php echo "message is ".$_SESSION["message"]?>
    </span>
    <?php 
    unset($_SESSION["message"]);
    else :
    //for debugging
    echo "There is no message";
    endif
    ?>
</div> 
```

现在总是没有打印消息，而是总是打印“没有消息”！消息变量设置正确，正如我在删除此`unset($_SESSION["message"]);`行时所说，显示消息。

顺便说一句，我没有使用框架，只是普通的 php。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:30:17.273

看起来没有设置`$_SESSION['message']`变量的地方。如果变量未设置为任何值，则将永远不会显示任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T23:09:06.037

除非您启用了 register_globals，否则您无法取消设置 $_SESSION 变量。你可以做：

```
unset($GLOBALS[_SESSION]['message']); 
```

或者只是给它另一个值：

```
$_SESSION['message'] = false; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T22:26:54.747

你从来没有设置你的`$_SESSION["message"]`变量。所以一旦你拥有`unset()`它，它就消失了。您必须重新设置它才能使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T23:39:15.850

好的，我明白了，以某种方式在 header(Location) 之后添加 exit() 解决了它，尽管我不知道这与问题有什么关系。谢谢大家。

# android - 确定相对于地球的加速度

> ID：14148207
> 
> 赞同：-1
> 
> 时间：2013-01-03T22:22:11.560
> 
> 标签：android, position, accelerometer

我正在android中开发一个应用程序，该应用程序需要确定制动时汽车的加速度量。我已经找到了如何获得俯仰角和滚动角，但我不知道如何使用这些角度计算相对加速度坐标。

例如，如果设备位于仪表板上的底座中，它会向前倾斜 15 度，侧向倾斜 5 度。当人踩刹车时，由于刹车而产生的加速度将分布在 X、Y 和 Z 轴之间。如何使用俯仰和滚动来确定 Z 方向相对于地球的加速度？

我提供了一张图片供参考：在图片中，我试图根据 Y 轴和 Z 轴计算 Z(prime)，但是在现实世界中，我还需要使用 X 轴并计算 Y(素数）和 X（素数）。

感谢您的帮助。（很抱歉笔迹不好） ![在此处输入图像描述](../Images/c1aeaa0d8d1fdb5c7da38aa05cd14034.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T07:57:48.390

你不需要做任何事情，它已经为你完成了。

使用[线性加速度计](http://developer.android.com/guide/topics/sensors/sensors_motion.html#sensors-motion-linear)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T14:15:47.837

你是如何找到移动方向的？只需取 sqrt(x^2+y^2+z^2) -9.81) 就足够了，因为手机上的所有加速度都是由于汽车造成的。如果可能的话，应用低通滤波器来消除由于道路颠簸引起的变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T22:28:23.620

使用加速度计而不是方向传感器。

这是一些不错的 PDF，您可以在其中找到所需内容、它们之间的一些差异以及如何使用它们。

是你想要的吗？

[http://www.touchqode.com/misc/20101025_jsug/20101025_touchqode_sensors.pdf](http://www.touchqode.com/misc/20101025_jsug/20101025_touchqode_sensors.pdf)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T01:52:13.093

如果我正确理解您的问题，您可以使用以下代码得到它：

```
g = FloatMath.sqrt(x * x + y * y + z * z); 
```

这里 g 将是所有方向的给定 G 力。

# spring - 如何使用 Maven 资源过滤过滤特定文件

> ID：14148208
> 
> 赞同：7
> 
> 时间：2013-01-03T22:22:36.130
> 
> 标签：spring, maven, resources, filtering

我的 spring+maven 项目有 .properties 和 .xml 资源文件。我只想为 .properties 设置过滤，不包括所有 spring xml 配置。这是非常简单的事情：

```
 <resource>
        <filtering>true</filtering>
        <directory>${basedir}/src/main/resources</directory>
        <excludes>
            <exclude>**/*.properties</exclude>
        </excludes>
    </resource>
    <resource>
        <filtering>false</filtering>
        <directory>${basedir}/src/main/resources</directory>
        <includes>
            <include>**/*.xml</include>
        </includes>
    </resource> 
```

但现在我想将过滤器应用于一个具体的 xml 文件，比如 env-config.xml。所以问题是如何将过滤器应用于所有 .properties 文件和一个特定的 xml 文件？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-03T22:33:48.870

尝试再添加一个资源元素

```
<resource>
    <filtering>true</filtering>
    <directory>${basedir}/src/main/resources</directory>
    <includes>
        <include>path/to/file.xml</include>
    </includes>
</resource> 
```

不确定它是否有效，我现在没有 Maven。

# ios - 如何从 NSDictionary 中删除空值

> ID：14148209
> 
> 赞同：19
> 
> 时间：2013-01-03T22:22:38.403
> 
> 标签：ios, objective-c, swift, dictionary, nsdictionary

我有一个 JSON 提要：

```
{
    "count1" = 2;
    "count2" = 2;
    idval = 40;
    level = "<null>";
    "logo_url" = "/assets/logos/default_logo_medium.png";
    name = "Golf Club";
    "role_in_club" = Admin;
} 
```

问题是`"<null>"`. 在将其保存到 NSUserDefaults 之前，我无法弄清楚如何将其从 NSDictionary 中删除。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-01-03T22:41:13.610

另一种变体，没有（显式）循环：

```
NSMutableDictionary *dict = [yourDictionary mutableCopy];
NSArray *keysForNullValues = [dict allKeysForObject:[NSNull null]];
[dict removeObjectsForKeys:keysForNullValues]; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-03T22:31:29.867

遍历字典并查找任何空条目并将其删除。

```
NSMutableDictionary *prunedDictionary = [NSMutableDictionary dictionary];
for (NSString * key in [yourDictionary allKeys])
{
    if (![[yourDictionary objectForKey:key] isKindOfClass:[NSNull class]])
        [prunedDictionary setObject:[yourDictionary objectForKey:key] forKey:key];
} 
```

之后，`prunedDictionary`应该在原始字典中有所有非空项。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-31T10:47:14.977

这是包含字典和数组的字典的基于类别的递归解决方案，其中值也可以是字典和数组：

文件**NSDictionary+Dario.m**：

```
#import "NSArray+Dario.h"

@implementation NSDictionary (Dario)

- (NSDictionary *) dictionaryByReplacingNullsWithEmptyStrings {

    const NSMutableDictionary *replaced = [NSMutableDictionary new];
    const id nul = [NSNull null];
    const NSString *blank = @"";

    for(NSString *key in self) {
        const id object = [self objectForKey:key];
        if(object == nul) {
            [replaced setObject:blank forKey:key];
        } else if ([object isKindOfClass:[NSDictionary class]]) {
            [replaced setObject:[object dictionaryByReplacingNullsWithEmptyStrings] forKey:key];
        } else if ([object isKindOfClass:[NSArray class]]) {
            [replaced setObject:[object arrayByReplacingNullsWithEmptyStrings] forKey:key];
        } else {
            [replaced setObject:object forKey:key];
        }
    }
    return [NSDictionary dictionaryWithDictionary:(NSDictionary*)replaced];
}

@end 
```

文件**NSArray+Dario.m**：

```
#import "NSDictionary+Dario.h"

@implementation NSArray (Dario)

- (NSArray *) arrayByReplacingNullsWithEmptyStrings {
    const NSMutableArray *replaced = [NSMutableArray new];
    const id nul = [NSNull null];
    const NSString *blank = @"";

    for (int i=0; i<[self count]; i++) {
        const id object = [self objectAtIndex:i];

        if ([object isKindOfClass:[NSDictionary class]]) {
            [replaced setObject:[object dictionaryByReplacingNullsWithEmptyStrings] atIndexedSubscript:i];
        } else if ([object isKindOfClass:[NSArray class]]) {
            [replaced setObject:[object arrayByReplacingNullsWithEmptyStrings] atIndexedSubscript:i];
        } else if (object == nul){
            [replaced setObject:blank atIndexedSubscript:i];
        } else {
            [replaced setObject:object atIndexedSubscript:i];
        }
    }
    return [NSArray arrayWithArray:(NSArray*)replaced];
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-25T05:13:11.700

使用它从字典中删除 null

```
- (NSMutableDictionary *)recursive:(NSMutableDictionary *)dictionary {
for (NSString *key in [dictionary allKeys]) {    
    id nullString = [dictionary objectForKey:key];   
    if ([nullString isKindOfClass:[NSDictionary class]]) {
        [self recursive:(NSMutableDictionary*)nullString];
    } else {
        if ((NSString*)nullString == (id)[NSNull null])
            [dictionary setValue:@"" forKey:key];
    }
}
return dictionary;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T22:31:53.693

要删除它，请将其转换为可变字典并删除键“级别”的对象；

```
NSDictionary* dict = ....;  // this is the dictionary to modify
NSMutableDictionary* mutableDict = [dict mutableCopy];
[mutableDict removeObjectForKey:@"level"];
dict = [mutableDict copy]; 
```

如果您不使用 ARC，则需要添加一些对“发布”的调用。

**更新：**

如果您不知道`"<null>"`对象的键名，那么您必须迭代：

```
NSDictionary* dict = ....;  // this is the dictionary to modify
NSMutableDictionary* mutableDict = [dict mutableCopy];
for (id key in dict) {
    id value = [dict objectForKey: key];
    if ([@"<null>" isEqual: value]) {
        [mutableDict removeObjectForKey:key];
    }
}
dict = [mutableDict copy]; 
```

为了找到这些`"<null>"`值，我使用了字符串比较，因为`"<null>"`它是您的示例中的一个字符串。但我不确定这是否真的如此。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-11T20:59:16.793

我相信这是最节省资源的方式

// NSDictionary 上的类别实现

```
- (NSDictionary *)dictionaryByRemovingNullValues {

    NSMutableDictionary * d;
    for (NSString * key in self) {

        if (self[key] == [NSNull null]) {
            if (d == nil) {
                d = [NSMutableDictionary dictionaryWithDictionary:self];
            }
            [d removeObjectForKey:key];
        }

    }

    if (d == nil) {
        return self;
    }

    return d;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-19T13:11:38.413

我为 NSJSOn 序列化类创建了一个类别。

创建一个类别并导入类以使用其方法...

```
// Mutable containers are required to remove nulls.
if (replacingNulls)
{
    // Force add NSJSONReadingMutableContainers since the null removal depends on it.
    opt = opt || NSJSONReadingMutableContainers;
}

id JSONObject = [self JSONObjectWithData:data options:opt error:error];

if ((error && *error) || !replacingNulls)
{
    return JSONObject;
}

[JSONObject recursivelyReplaceNullsIgnoringArrays:ignoreArrays withString:replaceString];
return JSONObject; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-08-21T18:58:38.507

# Swift -`NSNull`支持嵌套

首先，我们`Dictionary`在 Swift 中使用而不是`NSDictionary`.

要删除任何嵌套级别（包括**数组**和**字典）中的****任何** 外观，请尝试以下操作：`NSNull`

 ****```
extension Dictionary where Key == String {
    func removeNullsFromDictionary() -> Self {
        var destination = Self()
        for key in self.keys {
            guard !(self[key] is NSNull) else { destination[key] = nil; continue }
            guard !(self[key] is Self) else { destination[key] = (self[key] as! Self).removeNullsFromDictionary() as? Value; continue }
            guard self[key] is [Value] else { destination[key] = self[key]; continue }

            let orgArray = self[key] as! [Value]
            var destArray: [Value] = []
            for item in orgArray {
                guard let this = item as? Self else { destArray.append(item); continue }
                destArray.append(this.removeNullsFromDictionary() as! Value)
            }
            destination[key] = destArray as? Value
        }
        return destination
    }
} 
```

[请注意，字典的键应该是`String`]

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-08-31T11:38:38.010

我为你的问题尝试了解决方案，我明白了

```
NSDictionary *dict = [[NSDictionary alloc]initWithObjectsAndKeys:@"2",@"count1",@"2",@"count2",@"40",@"idval",@"<null>",@"level",@"/assets/logos/default_logo_medium.png",@"logo_url",@"Golf Club",@"name",@"role_in_club",@"Admin", nil];
NSMutableDictionary *mutableDict = [dict mutableCopy];
for (NSString *key in [dict allKeys]) {
    if ([dict[key] isEqual:[NSNull null]]) {
        mutableDict[key] = @""; 
    }
    if([dict[key] isEqualToString:@"<null>"])
    {
        mutableDict[key] = @"";
    }
}
dict = [mutableDict copy];
NSLog(@"The dict is - %@",dict); 
```

最后答案是

```
The dict is - {
Admin = "role_in_club";
count1 = 2;
count2 = 2;
idval = 40;
level = "";
"logo_url" = "/assets/logos/default_logo_medium.png";
name = "Golf Club";
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-09-21T09:46:55.087

在你的视图控制器中添加这3个方法，并像这样调用这个方法

```
NSDictionary *dictSLoginData = [self removeNull:[result valueForKey:@"data"]];

- (NSDictionary*)removeNull:(NSDictionary *)dict {

    NSMutableDictionary *replaced = [NSMutableDictionary dictionaryWithDictionary: dict];

    const id nul = [NSNull null];
    const NSString *blank = @"";

    for (NSString *key in [dict allKeys]) {

        const id object = [dict objectForKey: key];
        if (object == nul) {
            [replaced setObject: blank forKey: key];
        } else if([object isKindOfClass: [NSDictionary class]]) {
            [replaced setObject: [self replaceNull:object] forKey: key];
        } else if([object isKindOfClass: [NSArray class]]) {
            [replaced setObject: [self replaceNullArray:object] forKey: key];
        }
    }
    return [NSDictionary dictionaryWithDictionary: replaced];
}

- (NSArray *)replaceNullArray:(NSArray *)array {

    const id nul = [NSNull null];
    const NSString *blank = @"";

    NSMutableArray *replaced = [NSMutableArray arrayWithArray:array];

    for (int i=0; i < [array count]; i++) {
        const id object = [array objectAtIndex:i];
        if (object == nul) {
            [replaced replaceObjectAtIndex:i withObject:blank];
        } else if([object isKindOfClass: [NSDictionary class]]) {
            [replaced replaceObjectAtIndex:i withObject:[self replaceNull:object]];
        } else if([object isKindOfClass: [NSArray class]]) {
            [replaced replaceObjectAtIndex:i withObject:[self replaceNullArray:object]];
        }
    }
    return replaced;
}

- (NSDictionary *)replaceNull:(NSDictionary *)dict {

    const id nul = [NSNull null];
    const NSString *blank = @"";

    NSMutableDictionary *replaced = [NSMutableDictionary dictionaryWithDictionary: dict];

    for (NSString *key in [dict allKeys]) {
        const id object = [dict objectForKey: key];
        if (object == nul) {
            [replaced setObject: blank forKey: key];
        } else if ([object isKindOfClass: [NSDictionary class]]) {
            [replaced setObject: [self replaceNull:object] forKey: key];
        } else if([object isKindOfClass: [NSArray class]]) {
            [replaced setObject: [self replaceNullArray:object] forKey: key];
        }
    }
    return replaced;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-01-03T13:23:16.953

`Swift 3.0/4.0`解决方案

以下是解决方案，当`JSON`有`sub-dictionaries`. 这将`dictionaries`遍历`-dictionaries`. `JSON`_ `NULL(NSNull) key-value`_`JSON`

```
extension Dictionary {

    func removeNull() -> Dictionary {
        let mainDict = NSMutableDictionary.init(dictionary: self)
        for _dict in mainDict {
            if _dict.value is NSNull {
                mainDict.removeObject(forKey: _dict.key)
            }
            if _dict.value is NSDictionary {
                let test1 = (_dict.value as! NSDictionary).filter({ $0.value is NSNull }).map({ $0 })
                let mutableDict = NSMutableDictionary.init(dictionary: _dict.value as! NSDictionary)
                for test in test1 {
                    mutableDict.removeObject(forKey: test.key)
                }
                mainDict.removeObject(forKey: _dict.key)
                mainDict.setValue(mutableDict, forKey: _dict.key as? String ?? "")
            }
            if _dict.value is NSArray {
                let mutableArray = NSMutableArray.init(object: _dict.value)
                for (index,element) in mutableArray.enumerated() where element is NSDictionary {
                    let test1 = (element as! NSDictionary).filter({ $0.value is NSNull }).map({ $0 })
                    let mutableDict = NSMutableDictionary.init(dictionary: element as! NSDictionary)
                    for test in test1 {
                        mutableDict.removeObject(forKey: test.key)
                    }
                    mutableArray.replaceObject(at: index, with: mutableDict)
                }
                mainDict.removeObject(forKey: _dict.key)
                mainDict.setValue(mutableArray, forKey: _dict.key as? String ?? "")
            }
        }
        return mainDict as! Dictionary<Key, Value>
    }
 } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-07-24T04:12:04.400

修改@sinh99 答案。使用新的 NSMutableDictionary 来收集非空值和子字典值。

```
 - (NSMutableDictionary *)recursiveRemoveNullValues:(NSDictionary *)dictionary {

    NSMutableDictionary *mDictionary = [NSMutableDictionary new];
    for (NSString *key in [dictionary allKeys]) {
        id nullString = [dictionary objectForKey:key];

        if ([nullString isKindOfClass:[NSDictionary class]]) {
            NSMutableDictionary *mDictionary_sub = [self recursiveRemoveNullValues:(NSDictionary*)nullString];
            [mDictionary setObject:mDictionary_sub forKey:key];
        } else {

            if ((NSString*)nullString == (id)[NSNull null]) {
                [mDictionary setValue:@"" forKey:key];
            } else {
                [mDictionary setValue:nullString forKey:key];
            }
        }
    }

    return mDictionary;
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-08-31T01:41:00.817

我正在这样做。

```
NSMutableDictionary *prunedDict = [NSMutableDictionary dictionary];
[self enumerateKeysAndObjectsUsingBlock:^(NSString *key, id obj, BOOL *stop) {
  if (![obj isKindOfClass:[NSNull class]]) {
    prunedDict[key] = obj;
  }
}]; 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-04-01T06:51:34.553

以下代码在结果在数组或字典中时都可以，您可以通过编辑代码将返回的结果更改为nil或空字符串

该函数是递归的，因此可以解析字典中的数组。

```
-(id)changeNull:(id)sender{

    id newObj;

    if ([sender isKindOfClass:[NSArray class]]){

        NSMutableArray *newArray = [[NSMutableArray alloc] init];

        for (id item in sender){

            [newArray addObject:[self changeNull:item]];

        }

        newObj = newArray;
    }

    else if ([sender isKindOfClass:[NSDictionary class]]){

        NSMutableDictionary *newDict = [[NSMutableDictionary alloc] init];

        for (NSString *key in sender){

            NSDictionary *oldDict = (NSDictionary*)sender;

            id item = oldDict[key];

            if (![item isKindOfClass:[NSDictionary class]] && ![item isKindOfClass:[NSArray class]]){

                if ([item isEqual:[NSNull null]]){
                    item = @"";

                }

                [newDict setValue:item forKey:key];

            }
            else{

                [newDict setValue:[self changeNull:item] forKey:key];

            }
        }
        newObj = newDict;
    }

    return newObj;
} 
```

导致：

```
jsonresult (
    {
        Description = "<null>";
        Id = 1;
        Name = High;
    },
        {
        Description = "<null>";
        Id = 2;
        Name = Medium;
    },
        {
        Description = "<null>";
        Id = 3;
        Name = Low;
    }
)

change null (
    {
        Description = "";
        Id = 1;
        Name = High;
    },
        {
        Description = "";
        Id = 2;
        Name = Medium;
    },
        {
        Description = "";
        Id = 3;
        Name = Low;
    }
) 
```****

# python - 如何根据python中的另一个函数自动更新函数文档字符串？

> ID：14148210
> 
> 赞同：0
> 
> 时间：2013-01-03T22:22:49.433
> 
> 标签：python, auto-update, docstring

假设我有一些函数（比如 B1、B2、B3 等）调用相同的函数 A，我想在 B1、B2、B3 的文档字符串中放入一些解释函数 A 使用的参数的文本，这些已经在函数A的文档字符串中解释了。但是我不想将A的文档字符串复制到B1，然后是B2，然后是B3，然后如果我更改函数A的文档字符串，那么我必须更改B1，B2，B3 ...再次，所以我想知道是否有某种方法可以将 B1 的部分文档字符串链接到 A 的文档字符串，这样当 A 的文档字符串更新时，B1 的相应部分也会更新。这样用户就可以直接参考函数B1的docstring获取帮助信息，而无需查看A的docstring。（实际上A的参数都是kwargs）。一个简单的例子可能如下所示：

```
def A():
    '''
    I am doctring for function A
    '''
    pass

def B1():
    '''
    I am doctring for function B1,

    followed by the same docstring as function A, which is:

    ** I would like someway I can put the docstring of A here**
    '''
    pass 
```

感谢您的帮助或将我推荐给其他链接，我尝试使用谷歌搜索，但没有找到目标信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T22:28:07.750

您可以编写一个装饰器来执行此操作：

```
def append_doc_of(fun):
    def decorator(f):
        f.__doc__ += fun.__doc__
        return f

    return decorator

def A():
    '''
    I am doctring for function A
    '''
    pass

@append_doc_of(A)
def B1():
    '''
    I am doctring for function B1,

    followed by the same docstring as function A, which is:

    '''
    pass 
```

# visual-studio-2010 - Visual Studio 2010 库链接错误

> ID：14148212
> 
> 赞同：1
> 
> 时间：2013-01-03T22:23:05.110
> 
> 标签：visual-studio-2010, linker

当我尝试在我的项目中使用 DCMTK (/MT) 库时，出现以下链接错误。我确定错误与VS2010的ws2_32.lib wsock32.lib netapi32.lib有关。但是我已经将这三个库添加到项目属性中。您可以看到已搜索库，如下所示。这些库位于 C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\lib 中。订单问题？有什么建议吗？

```
1>oflog.lib(ntelogap.obj) : error LNK2019: unresolved external symbol __imp__CopySid@12 referenced in function "bool __cdecl `anonymous namespace'::CopySid(struct _SID * *,struct _SID *)" (?CopySid@?A0x4f6604f8@@YA_NPAPAU_SID@@PAU2@@Z)

1>oflog.lib(ntelogap.obj) : error LNK2019: unresolved external symbol __imp__GetLengthSid@4 referenced in function "bool __cdecl `anonymous namespace'::CopySid(struct _SID * *,struct _SID *)" (?CopySid@?A0x4f6604f8@@YA_NPAPAU_SID@@PAU2@@Z)

1>oflog.lib(ntelogap.obj) : error LNK2019: unresolved external symbol __imp__GetTokenInformation@20 referenced in function "bool __cdecl `anonymous namespace'::GetCurrentUserSID(struct _SID * *)" (?GetCurrentUserSID@?A0x4f6604f8@@YA_NPAPAU_SID@@@Z)

1>oflog.lib(ntelogap.obj) : error LNK2019: unresolved external symbol __imp__OpenProcessToken@12 referenced in function "bool __cdecl `anonymous namespace'::GetCurrentUserSID(struct _SID * *)" (?GetCurrentUserSID@?A0x4f6604f8@@YA_NPAPAU_SID@@@Z)

1>oflog.lib(ntelogap.obj) : error LNK2019: unresolved external symbol __imp__RegCreateKeyExA@36 referenced in function "struct HKEY __ * __cdecl `anonymous namespace'::regGetKey(class OFString const &,unsigned long *)" (?regGetKey@?A0x4f6604f8@@YAPAUHKEY __@@ABVOFString@@PAK@Z)

1>oflog.lib(ntelogap.obj) : error LNK2019: unresolved external symbol __imp__RegSetValueExA@24 referenced in function "void __cdecl `anonymous namespace'::regSetString(struct HKEY __ *,class OFString const &,class OFString const &)" (?regSetString@?A0x4f6604f8@@YAXPAUHKEY __@@ABVOFString@@1@Z)

1>oflog.lib(ntelogap.obj) : error LNK2019: unresolved external symbol __imp__RegisterEventSourceA@8 referenced in function "protected: void __thiscall log4cplus::NTEventLogAppender::init(void)" (?init@NTEventLogAppender@log4cplus@@IAEXXZ)

1>oflog.lib(ntelogap.obj) : error LNK2019: unresolved external symbol __imp__DeregisterEventSource@4 referenced in function "public: virtual void __thiscall log4cplus::NTEventLogAppender::close(void)" (?close@NTEventLogAppender@log4cplus@@UAEXXZ)

1>oflog.lib(ntelogap.obj) : error LNK2019: unresolved external symbol __imp__ReportEventA@36 referenced in function "protected: virtual void __thiscall log4cplus::NTEventLogAppender::append(class log4cplus::spi::InternalLoggingEvent const &)" (?append@NTEventLogAppender@log4cplus@@MAEXABVInternalLoggingEvent@spi@2@@Z)

1>oflog.lib(ntelogap.obj) : error LNK2019: unresolved external symbol __imp__RegCloseKey@4 referenced in function "protected: void __thiscall log4cplus::NTEventLogAppender::addRegistryInfo(void)" (?addRegistryInfo@NTEventLogAppender@log4cplus@@IAEXXZ) 
```

这是 lib 搜索的详细部分：

```
1>      Searching C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\lib\ws2_32.lib:
1>      Searching C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\lib\netapi32.lib:
1>      Searching C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\lib\wsock32.lib:
1>      Searching C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\lib\libcpmtd.lib:
1>      Searching C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\lib\LIBCMT.lib:
1>      Searching C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\lib\OLDNAMES.lib:

....

1>      Searching C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\lib\msvcprtd.lib:
1>      Searching C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\lib\MSVCRTD.lib:
1>      Searching C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\lib\LIBCMTD.lib:
1>      Searching C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\lib\kernel32.lib:
1>      Searching C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\lib\user32.lib:
.... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T02:07:48.427

看起来您没有在**Advapi32.lib**中链接。将其添加到项目属性中的链接器 -> 输入 -> 附加依赖项。不要忘记为所有项目配置添加它（分别从配置和平台下拉菜单中选择“所有配置”和“所有平台”）。

# search - 有人可以用基本术语解释 2.5-opt 启发式（也称为 2h-opt）吗？

> ID：14148215
> 
> 赞同：2
> 
> 时间：2013-01-03T22:23:25.307
> 
> 标签：search, optimization, graph-theory, heuristics, traveling-salesman

我试图找到准确解释 2.5-opt 的信息，但我做不到。我已阅读 Jon Bentley 的“几何旅行推销员问题的快速算法”，以及网络上的其他几个资源。我理解 2-opt 和 3-opt。

给定边缘 AB 和 CD，2.5-opt 的一种变体似乎是在 AB 之间移动 C 我见过的另一种变体似乎意味着在 CD 之间移动 A 而另一种变体似乎意味着在 CD 之间移动 B

我唯一可以确定的是，您正在移动一个点，在没有其他点之间移动，并且不需要进行逆转。我正在寻找知识渊博的人，让我直接了解 2.5-opt 需要考虑的两个动作。

# sql - 如何捕获sproc的返回值？

> ID：14148224
> 
> 赞同：0
> 
> 时间：2013-01-03T22:24:19.010
> 
> 标签：sql, sql-server, sql-server-2008

我有一个 sproc，我无法修改它的签名，它的最后一行有一个 SELECT 语句：

```
SELECT userid = @userid 
```

其中@userid 在存储过程中声明（未传入）。有没有办法在 sproc 之外的变量中捕获 userid 的值？

如果我想通过修改最后一行来捕获两个值：

```
SELECT userid = @userid, somevar = @somevar 
```

这会影响正在使用此存储过程的任何现有代码路径（例如在 .NET 中进行的调用）吗？如果不是，我如何捕获存储过程之外的两个值？

这些捕获都将在 SQL 中完成，而不是应用程序语言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T22:31:21.167

像这样执行 SELECT 的存储过程实际上并不是发回返回值，而是发回一个结果集。在 SQL 中捕获它的一种方法是将结果插入到临时表中。

```
CREATE TABLE #MyTemp 
  (UserId INT, 
  SomeVar VARCHAR(50))

INSERT #MyTemp
  EXEC MySproc 
```

此时您可以从#MyTemp SELECT 到局部变量。

在结果中添加另一列是否会破坏任何现有的应用程序代码确实是一个很大的“取决于”。

# dynamic - 如何在 Oracle Apex 中动态设置列宽

> ID：14148226
> 
> 赞同：1
> 
> 时间：2013-01-03T22:24:34.563
> 
> 标签：dynamic, format, oracle-apex, column-width

我有两个从 PL/SQL 返回函数动态创建的经典报告。每个报表的数据一般都包含相同的数据，但它们的列名一般不同。

我希望它们垂直对齐，但列名的差异使列宽不同。我的目标是将每列的每列宽度设置为第一个或第二个报告的列中的较大值。我想我会找到每列长度中的较大者，并为此设置一个像素量。

但是，对于动态生成的报告，我将如何首先动态设置列宽？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:21:28.803

您可以使用内置于 APEX 中的 jQuery 库使用一些 Javascript 来执行此操作。

（警告：我的 Javascript 不是世界上最优雅的！）

这对我有用：

1）在页面的“函数和全局变量声明”属性中创建这个函数：

```
function setColWidths(colId) {
    var maxWidth = 0;
    $('th#'+colId).each (function (index) {
        w = $(this).width();
        maxWidth = Math.max(maxWidth,w);
        });
    $('th#'+colId).each (function (index) {
        $(this).width(maxWidth);
        });
} 
```

2）在页面的“页面加载时执行”属性中，为每一列调用函数：

```
setColWidths('COL01');
setColWidths('COL02');
setColWidths('COL03'); 
```

您也许可以增强此解决方案，以便您无需为每一列显式调用该函数。

# ios - 将 Table 更改为 Edit 模式并删除普通 ViewController 中的 Rows

> ID：14148229
> 
> 赞同：4
> 
> 时间：2013-01-03T22:24:58.077
> 
> 标签：ios, uiviewcontroller, tableview

我只是将一个表插入到一个普通的 UIViewController 中，并将委托和源组件与文件的所有者连接起来。当我将数据插入表行时，一切正常。但现在我试图找出如何删除行。

我只是看了很多其他帖子，但找不到正确的解决方案。

我试图为表中的每一行插入一个 asseccory 按钮：

```
cell.accessoryType = UITableViewCellAccessoryDetailDisclosureButton; 
```

我什至找到了按下附件按钮时将调用的方法：

```
- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath{

    NSLog(@"Accessory pressed");

    //[self tableView:tableView willBeginEditingRowAtIndexPath:indexPath];

    //[self tableView:nil canEditRowAtIndexPath:indexPath];
    //[self setEditing:YES animated:YES];
} 
```

在日志中打印了消息，但是我尝试调用的任何一种方法（注释的方法）都没有将视图更改为编辑模式。我怎么解决这个问题？

* * *

这是 UIViewController 的屏幕截图。我还没有集成导航控制器。

![在此处输入图像描述](../Images/7d9a4a58de5cd597d315287c7e2bdc01.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T22:43:47.257

为了启用表格视图的编辑模式，您可以在`UITableView`as 上调用编辑方法，

```
[self.tableView setEditing:YES animated:YES]; 
```

您必须实现`tableView:commitEditingStyle:forRowAtIndexPath:`方法来启用行的删除。为了删除您需要使用`deleteRowsAtIndexPaths:withRowAnimation:`方法的行。

例如：-

```
self.navigationItem.rightBarButtonItem = self.editButtonItem;//set in viewDidLoad

- (void)setEditing:(BOOL)editing animated:(BOOL)animated { //Implement this method
    [super setEditing:editing animated:animated];
    [self.tableView setEditing:editing animated:animated];
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath { //implement the delegate method

  if (editingStyle == UITableViewCellEditingStyleDelete) {
    // Update data source array here, something like [array removeObjectAtIndex:indexPath.row];
    [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
  }   
} 
```

有关更多详细信息，请查看[此处的苹果文档](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/ManageInsertDeleteRow/ManageInsertDeleteRow.html#//apple_ref/doc/uid/TP40007451-CH10-SW19)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T12:19:57.917

我可以解决删除行的问题。为了使它工作，我像 ACB 告诉我的那样插入了以下方法：

```
//when blue accessory button has been pressed
- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath{

    //turn into edit mode
    [tableView setEditing:YES animated:YES];    
}

- (void)setEditing:(BOOL)editing animated:(BOOL)animated{

    [super setEditing:editing animated:animated];    
}

// method to enable the deleting of rows
-(void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath{

    if (editingStyle == UITableViewCellEditingStyleDelete) {

        Activity *activity = [allActivities objectAtIndex:indexPath.row];

        // remove the item from the array
        [allActivities removeObjectAtIndex:indexPath.row];

        //delete element from database with created method
        [dataController deleteFromTable:@"activity" theElementWithID:activity._id];

        [tableView setEditing:NO animated:YES];

        // refresh the table view
        [tableView reloadData];
    }

} 
```

我在[cocoapi.wordpress.com/tag/caneditrowatindexpath上找到了这个解决方案](http://cocoapi.wordpress.com/tag/caneditrowatindexpath)

但我仍然只有一个问题。如果有人进入编辑模式，并且不会删除一行，则不可能再次关闭编辑模式。如果您切换视图并再次返回，它会自动停止，但否则它不可能，因为我没有插入 NavigationController。

有没有办法在编辑时访问行左侧的删除控件的状态？检测是否有人再次关闭删除以跳出编辑模式将很有用。

它可能不适合苹果用户指南，但我只是在我的第一个项目中，它应该可以工作。

# c++ - 为什么我在 OpenGL 中看不到 3ds Max 中对象的颜色？

> ID：14148232
> 
> 赞同：1
> 
> 时间：2013-01-03T22:25:01.883
> 
> 标签：c++, opengl, graphics, 3d, textures

我想用 Visual Studio 2010 在 OpenGL 中创建一个房间，并添加一些对象，如椅子、地毯等。我只使用纹理来设计墙壁。当我尝试从 3DS Max 导入对象时遇到一些问题。我看到了那个物体，但它全是白色的。我应该能看到它的颜色。我做错了什么？谢谢。 ![在此处输入图像描述](../Images/f3ab2d45059570f3a78ee198965d68b0.png) <-我在 3ds MAX 上的对象 ![在此处输入图像描述](../Images/b283d04948d6c3d5b9f823ab3282a1a1.png) <-OpenGL

`#include "stdafx.h" #include "tga.h" #include "glut.h" #include <gl/gl.h> #include "glm.h"`

```
int screen_width=1040;
int screen_height=580;

GLuint skyboxTexture[6];//skybox 
GLfloat fSkyboxSizeX, fSkyboxSizeY, fSkyboxSizeZ; //box size on X, Y and Z axes
GLMmodel *3dsobj;

GLfloat fGlobalAngleX, fGlobalAngleY, fGlobalAngleZ; //global rotation angles

void initOpenGL()
{
glClearColor(0.0f, 0.0f, 0.0f, 0.0f);
glShadeModel(GL_SMOOTH);
glViewport(0, 0, screen_width, screen_height);
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
gluPerspective(45.0f, (GLfloat)screen_width/(GLfloat)screen_height, 1.0f, 1000.0f);
glEnable(GL_DEPTH_TEST);
glPolygonMode(GL_FRONT_AND_BACK, GL_FILL);
glMatrixMode(GL_MODELVIEW); 

glGenTextures(6,skyboxTexture);

loadTGA("Textures\\greywall.tga",skyboxTexture[0]); 
loadTGA("Textures\\carpet2.tga",skyboxTexture[1]);  
loadTGA("Textures\\wallpaper.tga",skyboxTexture[2]);    
loadTGA("Textures\\wallpaper.tga",skyboxTexture[3]);    
loadTGA("Textures\\green.tga",skyboxTexture[4]);    
loadTGA("Textures\\wallpaper.tga",skyboxTexture[5]);    
//set skybox size
fSkyboxSizeX =60.0;
fSkyboxSizeY =9.0;
fSkyboxSizeZ =60.0;

 }

////////////////////////////////////////
// function used to create the skybox //
////////////////////////////////////////

void DrawSkybox (GLfloat sizeX, GLfloat sizeY, GLfloat sizeZ)
{
glEnable(GL_TEXTURE_2D); //enable 2D texturing

//////////////////////////////////////////////////////////////////
// please consult the orientation convention for this skybox    //
// ("orientation_convention.png" file in the "Textures" folder) //
//////////////////////////////////////////////////////////////////

//negative x plane
glBindTexture(GL_TEXTURE_2D, skyboxTexture[0]); //select the current texture
glBegin(GL_QUADS);
    glTexCoord2f(6, 6);glVertex3f(-sizeX, sizeY, -sizeZ); //assign each corner     of the texture to a 3D vertex in the OpenGL scene
    glTexCoord2f(0, 6);glVertex3f(-sizeX, sizeY, sizeZ); //(0,0) is the left lower corner, while (1,1) is the right upper corner of the texture
    glTexCoord2f(0, 0);glVertex3f(-sizeX, -sizeY, sizeZ);
    glTexCoord2f(6, 0);glVertex3f(-sizeX, -sizeY, -sizeZ);
glEnd();

//negative y plane
glBindTexture(GL_TEXTURE_2D, skyboxTexture[1]);
glBegin(GL_QUADS);
    glTexCoord2f(6, 6);glVertex3f(sizeX, -sizeY, -sizeZ);
    glTexCoord2f(0, 6);glVertex3f(-sizeX, -sizeY, -sizeZ);
    glTexCoord2f(0, 0);glVertex3f(-sizeX, -sizeY, sizeZ);
    glTexCoord2f(6, 0);glVertex3f(sizeX, -sizeY, sizeZ);
glEnd();

//negative z plane
glBindTexture(GL_TEXTURE_2D, skyboxTexture[2]);
glBegin(GL_QUADS);
    glTexCoord2f(6, 6);glVertex3f(-sizeX, sizeY, sizeZ);
    glTexCoord2f(0, 6);glVertex3f(sizeX, sizeY, sizeZ);
    glTexCoord2f(0, 0);glVertex3f(sizeX, -sizeY, sizeZ);
    glTexCoord2f(6, 0);glVertex3f(-sizeX, -sizeY, sizeZ);
glEnd();

//positive x plane
glBindTexture(GL_TEXTURE_2D, skyboxTexture[3]);
glBegin(GL_QUADS);
    glTexCoord2f(6, 6);glVertex3f(sizeX, sizeY, sizeZ);
    glTexCoord2f(0, 6);glVertex3f(sizeX, sizeY, -sizeZ);
    glTexCoord2f(0, 0);glVertex3f(sizeX, -sizeY, -sizeZ);
    glTexCoord2f(6, 0);glVertex3f(sizeX, -sizeY, sizeZ);
glEnd();

//positive y plane
glBindTexture(GL_TEXTURE_2D, skyboxTexture[4]);
glBegin(GL_QUADS);
    glTexCoord2f(6, 6);glVertex3f(sizeX, sizeY, sizeZ);
    glTexCoord2f(0, 6);glVertex3f(-sizeX, sizeY, sizeZ);
    glTexCoord2f(0, 0);glVertex3f(-sizeX, sizeY, -sizeZ);
    glTexCoord2f(6, 0);glVertex3f(sizeX, sizeY, -sizeZ);
glEnd();

//positive z plane
glBindTexture(GL_TEXTURE_2D, skyboxTexture[5]);
glBegin(GL_QUADS);
    glTexCoord2f(6, 6);glVertex3f(sizeX, sizeY, -sizeZ);
    glTexCoord2f(0, 6);glVertex3f(-sizeX, sizeY, -sizeZ);
    glTexCoord2f(0, 0);glVertex3f(-sizeX, -sizeY, -sizeZ);
    glTexCoord2f(6, 0);glVertex3f(sizeX, -sizeY, -sizeZ);
glEnd();

glDisable(GL_TEXTURE_2D); //disable 2D texuring
}

//////////////////////////////////////////////
///DrawModel                              ///
//////////////////////////////////////////////
void drawModel(GLMmodel *pmodel,char*filename,GLuint mode)
{ 
if(!pmodel)
{ 
    pmodel=glmReadOBJ(filename);
    //printf("read the model\n");
    if(!pmodel)
    { 
        exit(0); 
    }  
} 

//generate facet normal vectors for model 
glmFacetNormals(pmodel); 
//generate vertex normal vectors (called after generating facet normals) 
glmVertexNormals(pmodel,90.0);

glmDraw(pmodel,mode); 

}

void renderScene(void)
{
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
glLoadIdentity();
//place the camera 1.2 units above the negative Y plane of the skybox
gluLookAt(0.0, -fSkyboxSizeY + 1.2 , 3.0, 0.0, -fSkyboxSizeY + 1.2, -10.0, 0.0, 1.0, 0.0);

//set global rotation on the X,Y and Z axes
glRotatef(fGlobalAngleX, 1.0, 0.0, 0.0);
glRotatef(fGlobalAngleY, 0.0, 1.0, 0.0);
glRotatef(fGlobalAngleZ, 0.0, 0.0, 1.0);

//draw skybox
glPushMatrix();     
    DrawSkybox(fSkyboxSizeX, fSkyboxSizeY, fSkyboxSizeZ);
glPopMatrix();

     glTranslatef(0.0, -fSkyboxSizeY + fTreeSize, 0.0);

//draw the tree slice
/*glPushMatrix();
    DrawSingleTreeTexture(fTreeSize);
glPopMatrix();*/

glPushMatrix(); 
  // glTranslatef(-30,0 ,0);
   glRotatef(30, 0, 1, 0);
 // glTranslatef(3, -20,-200);
   //place the tree on the negative Y plane of the skybox
    glTranslatef(19, -fSkyboxSizeY + fTreeSize+10, -6);
   glScalef(0.1,0.1,0.1);
   drawModel(3dsobj,"myObj.obj",GLM_NONE|GLM_FLAT); 
glPopMatrix();

glutSwapBuffers(); //swap the buffers used in the double-buffering technique
}

void changeSize(int w, int h)
{
screen_width=w;
screen_height=h;

if(h == 0)
    h = 1;

float ratio = 1.0*w/h;

glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glViewport(0, 0, w, h);
gluPerspective(45.0f, ratio, 1.0f, 1000.0f);
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();
gluLookAt(0.0f, 0.0f, 50.0f, 0.0f, 0.0f, -1.0f, 0.0f, 1.0f, 0.0f);
}

void processNormalKeys(unsigned char key, int x, int y)
{

switch(key)
{
    case 't':
        //process
        glutPostRedisplay();
        break;
    case 27: //esc
        exit(1);
        break;
    //control the global Y rotation angle using 'a' and 'd'
    case 'a': 
        fGlobalAngleY += 1;
        if (fGlobalAngleY >= 360) //clamp the rotation angle in the [0,360) interval
            fGlobalAngleY = (GLint)fGlobalAngleY % 360;
        break;
    case 'd':
        fGlobalAngleY -= 1;
        if (fGlobalAngleY <= -360) //clamp the rotation angle in the [0,360) interval
            fGlobalAngleY = (GLint)fGlobalAngleY % 360;         
        break;
    //control the global X rotation angle using 'w' and 's'
    case 'w':
        fGlobalAngleX += 1;
        if (fGlobalAngleX >= 360) //clamp the rotation angle in the [0,360) interval
            fGlobalAngleX = (GLint)fGlobalAngleX % 360;         
        break;
    case 's':
        fGlobalAngleX -= 1;
        if (fGlobalAngleX <= -360) //clamp the rotation angle in the [0,360) interval
            fGlobalAngleX = (GLint)fGlobalAngleX % 360; 
        break;
    //control the global Z rotation angle using 'q' and 'e'
    case 'q':
        fGlobalAngleZ += 1;
        if (fGlobalAngleZ >= 360) //clamp the rotation angle in the [0,360) interval
            fGlobalAngleZ = (GLint)fGlobalAngleZ % 360; 
        break;
    case 'e':
        fGlobalAngleZ -= 1;
        if (fGlobalAngleZ <= -360) //clamp the rotation angle in the [0,360) interval
            fGlobalAngleZ = (GLint)fGlobalAngleZ % 360; 
        break;      
}

}

int main(int argc, char* argv[])
{
//Initialize the GLUT library
glutInit(&argc, argv);
//Set the display mode
glutInitDisplayMode(GLUT_DEPTH | GLUT_DOUBLE | GLUT_RGBA);
//Set the initial position and dimensions of the window
glutInitWindowPosition(100, 100);
glutInitWindowSize(screen_width, screen_height);
//creates the window
glutCreateWindow("First OpenGL Application");
//Specifies the function to call when the window needs to be redisplayed
glutDisplayFunc(renderScene);
//Sets the idle callback function
glutIdleFunc(renderScene);
//Sets the reshape callback function
glutReshapeFunc(changeSize);
//Keyboard callback function
glutKeyboardFunc(processNormalKeys);
//Initialize some OpenGL parameters
initOpenGL();
//Starts the GLUT infinite loop
glutMainLoop();
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:48:30.503

你打电话`glmDraw()`给`GLM_NONE|GLM_FLAT`你的模式。你想要`GLM_SMOOTH`并`GLM_TEXTURE`在那里。

在[GLM 的标题中](http://www.cs.manchester.ac.uk/ugt/COMP37111/glm/glm.h)，`glmDraw()`列出了 的不同模式参数：

```
GLvoid
glmDraw(GLMmodel* model, GLuint mode);
/* glmList: Generates and returns a display list for the model using
 * the mode specified.
 *
 * model    - initialized GLMmodel structure
 * mode     - a bitwise OR of values describing what is to be rendered.
 *            GLM_NONE    -  render with only vertices
 *            GLM_FLAT    -  render with facet normals
 *            GLM_SMOOTH  -  render with vertex normals
 *            GLM_TEXTURE -  render with texture coords
 *            GLM_FLAT and GLM_SMOOTH should not both be specified.  
 */ 
```

# php - 使用 ajax 和 php 更新数据库行

> ID：14148233
> 
> 赞同：0
> 
> 时间：2013-01-03T22:25:14.080
> 
> 标签：php, jquery, mysql, ajax

我对 php 和 jQuery 很陌生。我已经在网上搜索了高和低的答案，但无济于事。我正在尝试“发布”一个使用 ajax 和 php 提交给自身的编辑表单。我能够将值从 ajax.php 返回到我的表单。我也可以在它们发布后看到它们，但是 UPDATE 查询似乎不起作用。除了从选择中获取值之外，我没有将 ajax 用于其他任何事情。某处毛茸茸的，我不知道在哪里。我也不太确定我的代码，但我所拥有的似乎可以达到/围绕更新查询。任何帮助深表感谢。

这是我的 html，ajax 调用在底部：

```
<?php //require_once("_includes/session.php"); ?>
<?php require_once("_includes/connection.php"); ?>
<?php require_once("_includes/functions.php"); ?>
<?php //confirm_logged_in(); ?>
<?php include("_includes/header.php"); ?>
<?php
if(isset($_POST['submit'])) {
    //$id = $_POST['postid'];
    //$title = $_POST['title'];
    //$content = $_POST['content'];
    //printf($id);
    //printf($title);
    //printf($content);
    $errors = array();

    // Form Validation
    $required_fields = array('title', 'content');
    foreach($required_fields as $fieldname) {
        if (!isset($_POST[$fieldname]) || (empty($_POST[$fieldname]) && !is_numeric($_POST[$fieldname]))) {
            $errors[] = $fieldname;
        }
    }

    $fields_with_lengths = array('title' => 50);
    foreach($fields_with_lengths as $fieldname => $maxlength ) {
        if (strlen(trim(mysql_prep($_POST[$fieldname]))) > $maxlength) { $errors[] = $fieldname; }
    }

    if (empty($errors)) {
        // Perform Update
        $id = mysql_prep($_POST['postid']);
        $title = mysql_prep($_POST['title']); 
        $content = mysql_prep($_POST['content']);

        $query = "UPDATE posts SET
                    title = '{$title}',
                    content = '{$content}',
                WHERE id = {$id}";
        $result = mysqli_query($connection, $query);
        if (mysqli_affected_rows($connection) == 1) {
            // Success
            $message = "The post was successfully updated.";
        } else {
            // Failed
            $message = "The subject update failed.";
            $message .= "<br>" . mysqli_error($connection);
        }

    } else {
        // Errors occurred
        if (count($errors) == 1) {
            $message = "There was " . count($errors) . " error in the form.";
        } else {
            $message = "There were " . count($errors) . " errors in the form.";
        }
    }

} // End: if(isset($_POST['submit']))
?>

<section id="manageContent">
<a href="manage.php">&lt&lt Back</a>

<h2>Edit Blog Post</h2>

<form id="newPost" name="newpost" action="edit_post.php" method="post">

<label for="posttitle">Select post title to edit:</label>

<select id="titleName" name="titleName">
    <?php
    $post_set = get_all_posts();
    while ($post = mysqli_fetch_array($post_set)) {
        echo '<option value="' . htmlspecialchars($post['id']) . '">'
            . htmlspecialchars($post['title'])
            . "</option>";
    }
    ?>
</select>

<p><label for="id">id:</label> <input id="postid" name="postid" type="text"></p>

<p><label for="title">Title:</label> <input id="title" name="title" type="text" required> (max length: 50 characters)</p>

<p><b>IMPORTANT!! things to remember so content is displayed how you would like:</b></p>
<ul>
    <li>You can use &ltp&gt, &ltdiv&gt, &ltul&gt, &ltol&gt, &ltli&gt tags in your blog posts.</li>
    <li>Insert the <b>&ltjumpbreak&gt</b> tag where you would like content to stop displaying on the main blog page.</li>
    <li>Enclose all remaining content after the <b>&ltjumpbreak&gt</b> in a <b>&ltdiv class="hideAfterJumpBreak"&gt&lt/div&gt</b> tag pair. This will keep all content after the <b>&ltjumpbreak&gt</b> from displaying on the main blog page until the topic is displayed on the topic.php page.</li>
    <li>Double check that every opening tag has a closing tag.</li>
</ul>

<p><label for="content">Content:</label></p>

<p><textarea id="content" name="content"></textarea></p>

<!--<p><button type="submit" name="submit">Edit Post</button></p> -->
<input id="submit" type="submit" name="submit" value="Edit Post">

<a href="edit_post.php"><button name="cancel">Cancel</button></a>
<a href="delete_post.php"><button name="delete">Delete</button></a>
</form>

<script>
(function() {

$("select#titleName").prop("selectedIndex", -1);

// returns a single item from php
/*
$("select#title").on("change", function() {
    var post_id = this.value;
    console.log(this);
    $.ajax ({
        url: "_includes/ajax.php",
        type: "POST",
        data: {post_id : post_id},
        dataType: "text",
        success: function(response) {
            $( "input#title" ).val(response);
        },
        failure: function() {
            alert("fail");
        }
    }); 
});
*/

$("select#titleName").on("change", function() {
    var post_id = this.value;
    console.log(this);
    $.ajax ({
        url: "_includes/ajax.php",
        type: "POST",
        data: {post_id : post_id},
        dataType: "json",
        success: function(response) {
            $( "input#postid" ).val(response.post_id);
            $( "input#title" ).val(response.post_title);
            $( "textarea#content" ).val(response.post_content);
        },
        failure: function() {
            alert("fail");
        }
    }); 
});

})();
</script>
</section>

<?php include("_includes/footer.php"); ?> 
```

这是我的ajax.php：

```
<?php require_once("connection.php"); ?>
<?php require_once("functions.php"); ?>
<?php include_once("form_functions.php"); ?>
<?php
//if(isset($_POST['title'])) {
    //$post_id = $_POST['post_id'];
    //$query = "SELECT title, content
    //       FROM posts 
    //       WHERE id = '$post_id'";
    //$result = mysqli_query($connection, $query);
    //$row = mysqli_fetch_array($result);
    //echo $row['title'], $row['content'];
//}
    $post_id = $_POST['post_id'];
    $query = "SELECT *
             FROM posts 
             WHERE id = '$post_id'";
    $result = mysqli_query($connection, $query);
    $row = mysqli_fetch_array($result);
    echo json_encode(
        array("post_id" => $row['id'], 
        "post_title" => $row['title'],
        "post_content" => $row['content'])
    )

    //echo $row['title'], $row['content'];
?>

<?php mysqli_close($connection); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:32:24.253

想通了，在我的 UPDATE 帖子 SET 中，我在第二行更新后有一个逗号。也感谢大家的建议阅读。

# c++ - fstream 是否读/写移动文件指针

> ID：14148238
> 
> 赞同：6
> 
> 时间：2013-01-03T22:25:34.943
> 
> 标签：c++, fstream

这是一个简单的问题，我希望可以很容易地回答，文件流的读写操作会移动指针吗？举个例子：

```
cpos=10000;
for (i=0;i<20;i++) {
   dataFile.seekg(cpos+i,ios::beg);
   dataFile.read(carray[i],1);
} 
```

是否与（逻辑上）相同：

```
dataFile.seekg(cpos,ios::beg);    
cpos=10000;
for (i=0;i<20;i++) {
    dataFile.read(carray[i],1);
} 
```

换句话说，无论使用哪种方法， carray[] 是否包含相同的内容（我看不到第一种方法有效，所以我希望正确答案是肯定的）。如果是这样，写操作是否表现出相同的行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T22:27:01.020

是的，这就是它的工作方式。不过，您的示例并不完全相同。您的第一个示例从 10000 读取，然后是 10001，然后是 10002 等。第二个示例需要在循环外进行查找以设置初始位置。要 100% 等效，您需要让第二个示例看起来像：

```
cpos=10000;
dataFile.seekg(cpos,ios::beg);
for (i=0;i<20;i++) {
   dataFile.read(carray[i],1);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T22:27:34.207

是的，文件指针是由读写操作自动移动的。...并且**不**寻求可以**大大****提高**性能。此外，使用比使用 20 次要快得多。但是，要获得相同的语义，您需要使用一次搜索导航到适当的位置。**`file.read(ptr, 20)``file.read(ptr + i, 1)`**

 **在文件流中查找将流设置为可以继续读取或写入字符的状态：要在读/写模式下打开的流（`std::ios_base::in | std::ios_base::out`）在读取和写入之间切换，有必要引入查找。因此，每个看到都以一种有趣的方式设置可用缓冲区，如果流只是读取或写入字符序列，则不需要这样做。此外，在编写每个搜索时，至少检查是否需要写入字符以进入初始状态以进行代码转换。**

# xml - 如何使用 SVN 规范化 XML 文档和 XSLT 模板的行尾？

> ID：14148241
> 
> 赞同：1
> 
> 时间：2013-01-03T22:25:45.730
> 
> 标签：xml, svn, normalization, eol

无论用于开发的 IDE 或操作系统如何，我都需要确保以一致的行结尾签入 XML 和 XSLT 文件。我如何配置 SVN 来做到这一点，并让我的团队的其他成员也这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T22:25:45.730

打开 svn 客户端的配置文件：

```
vi ~/.subversion/config 
```

添加或取消注释以下设置：

```
[miscellany]
enable-auto-props = yes

[auto-props]
*.xml = svn:eol-style=native
*.xsd = svn:eol-style=native
*.xsl = svn:eol-style=native 
```

在团队 wiki 上记录此内容。

创建别名以转换现有文件，并与团队共享：

```
alias svn_clean='svn propset svn:eol-style "native" *; svn commit' 
```

**参考**

*   [Apache Subversion 常见问题解答：自动道具](http://subversion.apache.org/faq.html#auto-props)

*   [颠覆客户端配置](http://geronimo.apache.org/GMOxDEV/subversion-client-configuration.html)

# sql - 修改sql查询以获得不同的结果

> ID：14148245
> 
> 赞同：1
> 
> 时间：2013-01-03T22:26:12.630
> 
> 标签：sql, sql-server-2008, stored-procedures

我有这个查询：

```
SELECT p.ProjectName,
       p.Oid AS Oid,
       p.[Views] as [Views],
       COUNT(pb.BidId) AS Bids
FROM Project p
LEFT OUTER JOIN ProjectContractorBid pb ON p.Oid = pb.ProjectID
WHERE p.Oid='A8704DA9-999B-4B13-806B-E8490C480F57'
GROUP BY p.ProjectName,
         p.Oid,
         p.[Views] 
```

这将返回几乎正确的结果：

![截图 1](../Images/49f508778d81db1ea179c4f71c227bcd.png)

如您所见，投标列的数字为 3，这 3 个投标仅针对其中一个项目，但并非针对所有项目，其他项目根本没有任何投标。我想知道我应该在查询中修改什么以仅针对 p.Oid 中引用的项目显示 3，而不是针对查询中返回的每条记录。

这是项目承包商投标表：

![截图 2](../Images/83f57cdde204acfd0409bb8de7f36e9c.png)

如您所见，只有天使测试出价的值应为 3 而不是所有其他结果。请让我知道我应该修改什么。谢谢，拉齐尔

更新：项目表：

![在此处输入图像描述](../Images/af227ba91373fb2dab30f74e394ac94d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:39:30.267

我认为您需要同时加入`ProjectName`和`ProjectId`，否则该`Bids`值将与项目中的所有记录相关联，而不仅仅是具有相同的记录`ProjectName`：

```
SELECT p.ProjectName, p.Oid as Oid, p.[Views] as [Views], pb.Bids
FROM Project p    
LEFT OUTER JOIN 
(
  select count(*) Bids, ProjectID, ProjectName
  from ProjectContractorBid
  group by ProjectID, ProjectName
) pb 
  ON p.Oid = pb.ProjectID  
  AND p.ProjectName = pb.ProjectName
WHERE p.Oid='A8704DA9-999B-4B13-806B-E8490C480F57' 
```

我还切换到使用子查询来获取出价计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T22:43:45.347

在 on 条件中包含 ProjectName。

# asp.net - ASP.NET Int32 Eval error

> ID：14148251
> 
> 赞同：1
> 
> 时间：2013-01-03T22:26:23.967
> 
> 标签：asp.net, eval

I have this line:

```
<asp:HyperLink ID="awsImage" runat="server" Target="_blank" 
ImageUrl='<%# Eval("ImageURL") %>' Width='<%# Eval("ImageWidth").ToString() %>'
Height='<%# Eval("ImageHeight").ToString() %>' ></asp:HyperLink> 
```

And I get this error:

Description: An error occurred during the compilation of a resource required to service this request. Please review the following specific error details and modify your source code appropriately.

Compiler Error Message: CS0030: Cannot convert type 'string' to 'System.Web.UI.WebControls.Unit'

I also have tried simple Eval without .ToString but I get this error: This is the exact error I get if I use the Eval without .ToString

Exception Details: System.InvalidCastException: Specified cast is not valid.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T22:31:17.157

use this

```
<asp:HyperLink ID="awsImage" runat="server" Target="_blank" 
ImageUrl='<%# Eval("ImageURL") %>' 
Width='<%# Unit.Pixel(Convert.ToInt32(Eval("ImageWidth"))) %>'
Height='<%# Unit.Pixel(Convert.ToInt32(Eval("ImageHeight"))) %>' ></asp:HyperLink> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T22:30:03.577

I checked on [MSDN](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.unit.aspx). `Height` and `Width` are of type `Unit`:

```
Width='<%# new Unit((int)Eval("ImageWidth")) %>' 
Height='<%# new Unit((int)Eval("ImageHeight")) %>' 
```

or by using the static method `Unit.Pixel`

```
Width='<%# Unit.Pixel((int)Eval("ImageWidth")) %>' 
Height='<%# Unit.Pixel((int)Eval("ImageHeight")) %>' 
```

Because the expression is evaluated on the server, you have to provide the correct data type (the compiler generates the code).

# python - 从 QNetworkCookie、PyQt4 打印 cookie

> ID：14148263
> 
> 赞同：4
> 
> 时间：2013-01-03T22:27:15.610
> 
> 标签：python, qt, cookies, pyqt

我正在尝试存储从网站获得的所有 cookie，而不是打印它们。请帮助我让它工作，因为我认为我不存储任何东西，这就是为什么我没有输出任何东西的原因。

我正在谷歌网站上测试这段代码，我很确定一旦你到达那里页面，他们就会存储 cookie。

所以我试图获取所有可用的 cookie 并打印它们。这是代码：

```
#! /usr/bin/env python2.7

from PyQt4.QtCore import *
from PyQt4.QtGui import *
from PyQt4.QtNetwork import *
from PyQt4.QtWebKit import *
import sys, os, simplejson, signal

class MainWindow(QMainWindow):
    def __init__(self):
        QMainWindow.__init__(self)
        self.tabs = QTabWidget()
        self.setCentralWidget(self.tabs)
        self.settings = QSettings()
        self.numberOfTabs = 0
        self.cookies = QNetworkCookieJar()
        self.cookies.setAllCookies([QNetworkCookie.parseCookies(c)[0] for c in self.get('cookiejar')])

    def put(self, key, value):
        self.settings.setValue(key, simplejson.dumps(value))
        self.settings.sync()

    def get(self, key):
        v = self.settings.value(key)
        return simplejson.loads(unicode(v.toString())) 

    def addNewTab(self, url=QUrl('')):
        self.numberOfTabs += 1
        self.tabs.setCurrentIndex(self.tabs.addTab(Tab(QUrl(url)),'%s'%str(self.numberOfTabs)))
        self.setCookies()
        return self.tabs.currentWidget()

    def setCookies(self):
        self.put('cookiejar', [str(c.toRawForm()) for c in self.cookies.allCookies()])
        print self.get('cookiejar')

class Tab(QWebView):
    def __init__(self, url):
        QWebView.__init__(self)
        self.load(url)

if __name__ == '__main__':
    app = QApplication(sys.argv)
    browser = MainWindow()
    browser.addNewTab('https://google.com')
    browser.show()
    if signal.signal(signal.SIGINT, signal.SIG_DFL):
        sys.exit(app.exec_())
    app.exec_() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T04:46:30.000

`loadFinished`无论如何，您可能应该在检查 cookie 之前等待，也许这样的东西对您有用，在这里我重新实现`QNetworkCookieJar`并完成从那里存储和加载 cookie 的所有工作：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

import sip
sip.setapi('QString', 2)
sip.setapi('QVariant', 2)

from PyQt4 import QtCore, QtGui, QtWebKit, QtNetwork

class cookieJar(QtNetwork.QNetworkCookieJar):
    def __init__(self, cookiesKey, parent=None):
        super(cookieJar, self).__init__(parent)

        self.mainWindow = parent
        self.cookiesKey = cookiesKey
        cookiesValue    = self.mainWindow.settings.value(self.cookiesKey)       

        if cookiesValue:
            cookiesList = QtNetwork.QNetworkCookie.parseCookies(cookiesValue)
            self.setAllCookies(cookiesList)

    def setCookiesFromUrl (self, cookieList, url):
        cookiesValue = self.mainWindow.settings.value(self.cookiesKey)
        cookiesArray = cookiesValue if cookiesValue else QtCore.QByteArray()

        for cookie in cookieList:
            cookiesArray.append(cookie.toRawForm() + "\n")

        self.mainWindow.settings.setValue(self.cookiesKey, cookiesArray)

        return super(cookieJar, self).setCookiesFromUrl(cookieList, url)

class webView(QtWebKit.QWebView):
    def __init__(self, cookiesKey, url, parent=None):
        super(webView, self).__init__(parent)

        self.cookieJar = cookieJar(cookiesKey, parent)

        self.page().networkAccessManager().setCookieJar(self.cookieJar)

class myWindow(QtGui.QMainWindow):
    def __init__(self, parent=None):
        super(myWindow, self).__init__(parent)

        self.cookiesKey = "cookies"

        self.centralwidget = QtGui.QWidget(self)

        self.tabWidget = QtGui.QTabWidget(self.centralwidget)
        self.tabWidget.setTabsClosable(True)

        self.verticalLayout = QtGui.QVBoxLayout(self.centralwidget)
        self.verticalLayout.addWidget(self.tabWidget)

        self.actionTabAdd = QtGui.QAction(self)
        self.actionTabAdd.setText("Add Tab")
        self.actionTabAdd.triggered.connect(self.on_actionTabAdd_triggered)

        self.lineEdit = QtGui.QLineEdit(self)
        self.lineEdit.setText("http://www.example.com")

        self.toolBar = QtGui.QToolBar(self)
        self.toolBar.addAction(self.actionTabAdd)
        self.toolBar.addWidget(self.lineEdit)

        self.addToolBar(QtCore.Qt.ToolBarArea(QtCore.Qt.TopToolBarArea), self.toolBar)
        self.setCentralWidget(self.tabWidget)

        self.settings = QtCore.QSettings()

    @QtCore.pyqtSlot()
    def on_actionShowCookies_triggered(self):
        webView = self.tabWidget.currentWidget()
        listCookies = webView.page().networkAccessManager().cookieJar().allCookies()

        for cookie in  listCookies:
            print cookie.toRawForm()

    @QtCore.pyqtSlot()
    def on_actionTabAdd_triggered(self):
        url = self.lineEdit.text()
        self.addNewTab(url if url else 'about:blank')

    def addNewTab(self, url):
        tabName = u"Tab {0}".format(str(self.tabWidget.count()))

        tabWidget= webView(self.cookiesKey, url, self)
        tabWidget.loadFinished.connect(self.on_tabWidget_loadFinished)
        tabWidget.load(QtCore.QUrl(url))

        tabIndex = self.tabWidget.addTab(tabWidget, tabName)

        self.tabWidget.setCurrentIndex(tabIndex)

    @QtCore.pyqtSlot()
    def on_tabWidget_loadFinished(self):
        print self.settings.value(self.cookiesKey)

if __name__ == "__main__":
    import sys

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('myWindow')

    main = myWindow()
    main.resize(666, 333)
    main.show()

    sys.exit(app.exec_()) 
```

# java - 弹簧型材

> ID：14148269
> 
> 赞同：4
> 
> 时间：2013-01-03T22:28:02.787
> 
> 标签：java, spring, profile

我对 Spring Platform 有点陌生。我正在实现基于 XML 的 Spring Profiles。

我已经在 web.xml 中声明了一个配置文件，例如

```
<context-param>
<param-name>spring.profiles.active</param-name>
<param-value>dev</param-value>
</context-param> 
```

我想在我的 Java 类中获取活动配置文件值。

这是我的第一次尝试，但由于一些问题它不起作用。

```
GenericXmlApplicationContext ctx = new GenericXmlApplicationContext();
String profiles[] = ctx.getEnvironment().getActiveProfiles();
System.out.println(profiles[0]); 
```

它向我显示空值。是否知道如何在 Java 类中激活配置文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T23:00:34.393

您有一个 web.xml，这意味着您正在将其部署到 servlet 容器。弹簧存储在`ApplicationContext`里面`ServletContext`。使用 a `ServletContext`，您可以获得`ApplicationContext`如下...

```
ServletContext sc = request.getSession().getServletContext();
ApplicationContext applicationContext = WebApplicationContextUtils.getWebApplicationContext(sc); 
```

如果您想在 java 应用程序（主要方法）或测试中设置配置文件，只需为您的配置文件设置系统属性...

```
java -Dspring.profiles.active="dev" org.hyness.MyClass 
```

您的示例不起作用，因为您正在实例化不使用 web.xml 的第二个上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T22:45:37.653

创建一个 ApplicationContextAware

```
import org.springframework.beans.BeansException;
import org.springframework.context.ApplicationContext;
import org.springframework.context.ApplicationContextAware;

  public class ApplicationContextProvider implements ApplicationContextAware {
       private static ApplicationContext applicationContext = null;

        public static ApplicationContext getApplicationContext() {
            return applicationContext;
        }
        public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {
              / / Assign the ApplicationContext into a static variable
             this.applicationContext = applicationContext;
        }
} 
```

在您的 web.xml 配置为拾取的 spring xml 文件中将其注册为 bean

```
<bean id="myApplicationContextProvider" class="com.your.package.name.ApplicationContextProvider"></bean> 
```

现在从你的java类中使用

```
ApplicationContextProvider.getApplicationContext().getEnvironment().getActiveProfile() 
```

# backbone.js - 主干“at（）”在 Firebug 中返回未定义

> ID：14148271
> 
> 赞同：0
> 
> 时间：2013-01-03T22:28:11.453
> 
> 标签：backbone.js

我正在尝试观看有关如何使用 Backbone.js 和 REST 从数据库返回结果的截屏视频。我的 RESTful 服务（至少我认为它是 RESTful —— REST 对我来说是新的）正在提供您想要的 JSON 数据。在我尝试使用`at()`. 这是我的代码。

这是我的骨干：

```
(function() {
    window.App = {
        Models: {},
        Collections: {},
        Views: {},
        Router: {}  
    };

    window.template = function(id) {
        return _.template( $('#' + id).html());
    };

    var vent = _.extend({}, Backbone.Events);

    App.Router = Backbone.Router.extend({
        routes: {
            '' : 'index',
            '*other' : 'other'
        },
        index: function() {

        },
        other: function() {

        }
    });

    App.Models.Main = Backbone.Model.extend({
        defaults : {
            FName: ''
        }
    });

    App.Collections.Mains = Backbone.Collection.extend({
        model: App.Models.Main,
        url: '../leads/main_contact'
    });

    new App.Router;
    Backbone.history.start();
})(); 
```

在 Jeffrey Way 的截屏视频中使用的 Firebug 控制台中，我键入以下内容：

```
mains = new App.Collections.Mains();
mains.fetch();
mains.toJSON(); 
```

这很好用。我可以使用 Firebug 来查看那里是否有正确的数据。这是我的结果：

```
[Object { id="1023",  timestamp="2012-05-16 08:09:30",  FName="Eulàlia",  more...},... 
```

但是当我尝试访问 id 为 1023 的对象时，我得到“未定义”。我这样做：

```
mains.at(1023).get('FName'); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:36:05.400

该`at`方法检索集合中特定索引处的元素。

因此，如果您想获取位置 1023 的元素，则您的集合中需要 1023 个项目。你可能没有。

您拥有并设置为 1023 的 id 与该集合中的索引无关。

# ios - 带有“上一个”和“下一个”的工具栏，用于键盘 inputAccessoryView

> ID：14148276
> 
> 赞同：22
> 
> 时间：2013-01-03T22:28:26.923
> 
> 标签：ios, keyboard, uitextfield, uisegmentedcontrol, accessory

我一直在尝试实现这个工具栏，当顶部 textField 是 firstResponder 时，仅启用“下一步”按钮，而当底部 textField 是 firstResponder 时，仅启用“上一个”按钮。

它有点工作，但不断发生的是我需要每次点击“上一个”/“下一个”按钮两次以启用/禁用相反的按钮。

我是否遗漏了导致这种情况发生的响应者链中的某些内容？

这是我的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.topText becomeFirstResponder];
}

- (UIToolbar *)keyboardToolBar {

    UIToolbar *toolbar = [[UIToolbar alloc] init];
    [toolbar setBarStyle:UIBarStyleBlackTranslucent];
    [toolbar sizeToFit];

    UISegmentedControl *segControl = [[UISegmentedControl alloc] initWithItems:@[@"Previous", @"Next"]];
    [segControl setSegmentedControlStyle:UISegmentedControlStyleBar];
    segControl.momentary = YES;
    segControl.highlighted = YES;

    [segControl addTarget:self action:@selector(changeRow:) forControlEvents:(UIControlEventValueChanged)];
    [segControl setEnabled:NO forSegmentAtIndex:0];

    UIBarButtonItem *nextButton = [[UIBarButtonItem alloc] initWithCustomView:segControl];

    NSArray *itemsArray = @[nextButton];

    [toolbar setItems:itemsArray];

    return toolbar;
}

- (void)changeRow:(id)sender {

    int idx = [sender selectedSegmentIndex];

    if (idx == 1) {
        [sender setEnabled:NO forSegmentAtIndex:1];
        [sender setEnabled:YES forSegmentAtIndex:0];
        self.topText.text = @"Top one";
        [self.bottomText becomeFirstResponder];
    }
    else {
        [sender setEnabled:NO forSegmentAtIndex:0];
        [sender setEnabled:YES forSegmentAtIndex:1];
        self.bottomText.text =@"Bottom one";
        [self.topText becomeFirstResponder];
    }
}

-(void)textFieldDidBeginEditing:(UITextField *)textField {
    if (!textField.inputAccessoryView) {
        textField.inputAccessoryView = [self keyboardToolBar];
    }
} 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2016-05-10T04:10:33.303

这是`UIViewController`我在需要一组`UITextField`s 通过输入附件提供导航时使用的扩展。这种方法不需要使用`UITextField`委托，并且将行为添加到多个表单成为单行。还支持“完成”按钮关闭。

```
extension UIViewController {
  func addInputAccessoryForTextFields(textFields: [UITextField], dismissable: Bool = true, previousNextable: Bool = false) {
    for (index, textField) in textFields.enumerated() {
      let toolbar: UIToolbar = UIToolbar()
      toolbar.sizeToFit()

      var items = [UIBarButtonItem]()
      if previousNextable {
        let previousButton = UIBarButtonItem(image: UIImage(named: "Backward Arrow"), style: .plain, target: nil, action: nil)
        previousButton.width = 30
        if textField == textFields.first {
          previousButton.isEnabled = false
        } else {
          previousButton.target = textFields[index - 1]
          previousButton.action = #selector(UITextField.becomeFirstResponder)
        }

        let nextButton = UIBarButtonItem(image: UIImage(named: "Forward Arrow"), style: .plain, target: nil, action: nil)
        nextButton.width = 30
        if textField == textFields.last {
          nextButton.isEnabled = false
        } else {
          nextButton.target = textFields[index + 1]
          nextButton.action = #selector(UITextField.becomeFirstResponder)
        }
        items.append(contentsOf: [previousButton, nextButton])
      }

      let spacer = UIBarButtonItem(barButtonSystemItem: .flexibleSpace, target: nil, action: nil)
      let doneButton = UIBarButtonItem(barButtonSystemItem: .done, target: view, action: #selector(UIView.endEditing))
      items.append(contentsOf: [spacer, doneButton])

      toolbar.setItems(items, animated: false)
      textField.inputAccessoryView = toolbar
    }
  }
} 
```

例子：

```
let field1 = UITextField()
let field2 = UITextField()
addInputAccessoryForTextFields([field1, field2], dismissable: true, previousNextable: true) 
```

这是一个合理的[箭头图标](https://icons8.com/icons/3299/next)。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-04-20T10:22:50.920

迅速：

```
lazy var inputToolbar: UIToolbar = {
    var toolbar = UIToolbar()
    toolbar.barStyle = .default
    toolbar.translucent = true
    toolbar.sizeToFit()

    var doneButton = UIBarButtonItem(title: "Done", style: .bordered, target: self, action: "inputToolbarDonePressed")
    var flexibleSpaceButton = UIBarButtonItem(barButtonSystemItem: .flexibleSpace, target: nil, action: nil)
    var fixedSpaceButton = UIBarButtonItem(barButtonSystemItem: .fixedSpace, target: nil, action: nil)

    var nextButton  = UIBarButtonItem(image: UIImage(named: "keyboardPreviousButton"), style: .bordered, target: self, action: "keyboardNextButton")
    nextButton.width = 50.0
    var previousButton  = UIBarButtonItem(image: UIImage(named: "keyboardNextButton"), style: .Bordered, target: self, action: "keyboardPreviousButton")

    toolbar.setItems([fixedSpaceButton, nextButton, fixedSpaceButton, previousButton, flexibleSpaceButton, doneButton], animated: false)
    toolbar.userInteractionEnabled = true

    return toolbar
    }() 
```

在 UITextFieldDelegate

```
 func textFieldShouldBeginEditing(textField: UITextField) -> Bool {
    textField.inputAccessoryView = inputToolbar

    return true
} 
```

![](../Images/54e205236c3d39784cc9b6bcbae85962.png)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-01-04T13:57:07.123

好的，在查看了出色的[BSKeyboardControls 之后](https://github.com/SimonBS/BSKeyboardControls)，我尝试在 中实现分段控件的启用和禁用`textFieldDidBeginEditing`，而不是在我的`@selector`位置。我还为分段控制引入了一个变量。现在可以了。这是修改后的代码片段：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.topText becomeFirstResponder];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];

}

- (UIToolbar *)keyboardToolBar {

    UIToolbar *toolbar = [[UIToolbar alloc] init];
    [toolbar setBarStyle:UIBarStyleBlackTranslucent];
    [toolbar sizeToFit];

    self.segControl = [[UISegmentedControl alloc] initWithItems:@[@"Previous", @"Next"]];
    [self.segControl setSegmentedControlStyle:UISegmentedControlStyleBar];
    self.segControl.momentary = YES;

    [self.segControl addTarget:self action:@selector(changeRow:) forControlEvents:(UIControlEventValueChanged)];
    [self.segControl setEnabled:NO forSegmentAtIndex:0];

    UIBarButtonItem *nextButton = [[UIBarButtonItem alloc] initWithCustomView:self.segControl];

    NSArray *itemsArray = @[nextButton];

    [toolbar setItems:itemsArray];

    return toolbar;
}

- (void)changeRow:(id)sender {

    int idx = [sender selectedSegmentIndex];

    if (idx) {
        self.topText.text = @"Top one";
        [self.bottomText becomeFirstResponder];
    }
    else {
        self.bottomText.text =@"Bottom one";
        [self.topText becomeFirstResponder];
    }
}

-(void)textFieldDidBeginEditing:(UITextField *)textField {

    if (!textField.inputAccessoryView) {

        textField.inputAccessoryView = [self keyboardToolBar];
    }
    if (textField.tag) {

        [self.segControl setEnabled:NO forSegmentAtIndex:1];
        [self.segControl setEnabled:YES forSegmentAtIndex:0];
    }
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-01-03T23:07:46.567

我的建议是“不要重新发明轮子”。

在键盘上使用`Prev`和`Next`按钮在 s 之间切换`UITextView`是如此普遍，以至于您可以找到许多可以使用的良好实现。

例如，查看[BSKeyboardControl](https://github.com/SimonBS/BSKeyboardControls)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-04-26T16:53:07.500

为**Swift 3.0更新**

```
lazy var inputToolbar: UIToolbar = {
    var toolbar = UIToolbar()
    toolbar.barStyle = .default
    toolbar.isTranslucent = true
    toolbar.sizeToFit()

    var doneButton = UIBarButtonItem(title: "Done", style: .plain, target: self, action: #selector(ContactViewController.inputToolbarDonePressed))
    var flexibleSpaceButton = UIBarButtonItem(barButtonSystemItem: .flexibleSpace, target: nil, action: nil)
    var fixedSpaceButton = UIBarButtonItem(barButtonSystemItem: .fixedSpace, target: nil, action: nil)

    var nextButton = UIBarButtonItem(title: "Next", style: .plain, target: self, action: #selector(ContactViewController.keyboardNextButton))
    var previousButton = UIBarButtonItem(title: "Previous", style: .plain, target: self, action: #selector(ContactViewController.keyboardPreviousButton))

    toolbar.setItems([fixedSpaceButton, previousButton, fixedSpaceButton, nextButton, flexibleSpaceButton, doneButton], animated: false)
    toolbar.isUserInteractionEnabled = true

    return toolbar
}() 
```

进而：

```
func textFieldShouldBeginEditing(_ textField: UITextField) -> Bool {
    textField.inputAccessoryView = inputToolbar
    return true
} 
```

请记住将“ContactViewController”更改为您的视图控制器的名称。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-06-20T08:51:26.300

您还可以尝试使用 pod [UITextField-Navigation](https://github.com/T-Pham/UITextField-Navigation)：

`pod 'UITextField-Navigation'`

它向任何 UITextField添加了两个延迟加载的属性`nextTextField`。`previousTextField`您只需要`nextTextField`在界面构建器上或以编程方式指定，工具栏就会为您添加到键盘中。

以编程方式：

```
import UITextField_Navigation

let textField1 = UITextField()
let textField2 = UITextField()
textField1.nextTextField = textField2

assert(textField2 == textField1.nextTextField)
assert(textField1 == textField2.previousTextField) 
```

在界面生成器上：

[![在 Interface Builder 中连接 nextTextField](../Images/4c673f576f989313f921cd7f1b7f61c9.png)](https://i.stack.imgur.com/FS71c.png) [![在此处输入图像描述](../Images/3b8bfdb17d5c4e496cd3451a39231f55.png)](https://i.stack.imgur.com/LF3BG.gif)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-07-31T05:38:58.033

试试这个 ：-

```
- (void)viewDidLoad
{
[super viewDidLoad];
[self.topText becomeFirstResponder];
}
- (UIToolbar *)keyboardToolBar {

UIToolbar *toolbar = [[UIToolbar alloc] init];
[toolbar setBarStyle:UIBarStyleBlackTranslucent];
[toolbar sizeToFit];

UISegmentedControl *segControl = [[UISegmentedControl alloc]       initWithItems:@[@"Previous", @"Next"]];
[segControl setSegmentedControlStyle:UISegmentedControlStyleBar];
segControl.momentary = YES;
segControl.highlighted = YES;

[segControl addTarget:self action:@selector(changeRow:)  forControlEvents:(UIControlEventValueChanged)];
[segControl setEnabled:NO forSegmentAtIndex:0];

UIBarButtonItem *nextButton = [[UIBarButtonItem alloc] initWithCustomView:segControl];

NSArray *itemsArray = @[nextButton];

[toolbar setItems:itemsArray];

int idx = [sender selectedSegmentIndex];

if (idx == 1) {
    [sender setEnabled:NO forSegmentAtIndex:1];
}
else {
    [sender setEnabled:NO forSegmentAtIndex:0];
}

return toolbar;
}

- (void)changeRow:(id)sender {

int idx = [sender selectedSegmentIndex];

if (idx == 1) {
    self.topText.text = @"Top one";
    [self.bottomText becomeFirstResponder];
}
else {
    self.bottomText.text =@"Bottom one";
    [self.topText becomeFirstResponder];
}
}

-(void)textFieldDidBeginEditing:(UITextField *)textField {
if (!textField.inputAccessoryView) {
    textField.inputAccessoryView = [self keyboardToolBar];
}
} 
```

您不需要启用其他项目，因为每次键盘更改时它们都会重新初始化....

# c# - IIS ProcessRequest 抛出异常时如何在网页上显示错误消息

> ID：14148277
> 
> 赞同：0
> 
> 时间：2013-01-03T22:28:26.350
> 
> 标签：c#, asp.net, asp.net-ajax

我有一个带有 ajax 的 html 页面，它的表单返回一个触发的值：

> 从客户端检测到具有潜在危险的 Request.Form 值。

我们在 ASPX C# 代码和实现`ProcessRequest`（以及其他调用）的基类之间插入了一个包装类；包装类的主要目的是将异常记录到我们自己的日志机制中。

当我们收到无效数据错误时，我们想显示一个有意义的警报，但遇到了一个警报`PageRequestManagerParserErrorException`，虽然它告诉开发人员问题是什么，但对最终用户无用。

没用的东西：

*   `Response.write`（在其他地方记录为解析错误的原因）
*   `RegisterStartupScript`
*   `RegisterClientScriptBlock`

我看到了关于处理太大的文件上传的帖子，但它没有解决向用户输出错误消息的问题。

# php - PHP脚本将不同的文件上传到不同的服务器

> ID：14148287
> 
> 赞同：0
> 
> 时间：2013-01-03T22:29:05.160
> 
> 标签：php, process, batch-file, ftp

是否有一些 PHP 脚本或自动批量上传各种文件到远程 FTP 服务器的方法。

让我举个例子，我有一个这样的文件夹结构，其中包括文件。

```
../domain1.com/
../domain2.com/
../domain3.com/ 
```

每个域文件夹对远程服务器都有不同的 FTP 登录详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T22:31:46.683

[写一篇，多亏了PHP 的 FTP 功能](http://php.net/manual/en/ref.ftp.php)，这很简单。

这是一个将文件上传到 FTP 服务器的脚本教程，只需将一[组 FTP 服务器](http://php.net/manual/en/language.types.array.php)添加到脚本中，然后使用[foreach 循环](http://php.net/manual/en/control-structures.foreach.php)进行循环即可：

[http://www.jonasjohn.de/snippets/php/ftp-example.htm](http://www.jonasjohn.de/snippets/php/ftp-example.htm)

您的 FTP 服务器阵列可能看起来像...

```
Array =>
  [0] => Array
     [folder] => 'domain1.com',
     [ftp_server] => 'ftp.thisisdomain1.com',
     [ftp_user] => 'user',
     [ftp_pass] => 'pass',
   [1] => Array
     [folder] => 'domain2.com',
     [ftp_server] => 'ftp.thisisdomain2.com',
     [ftp_user] => 'user2',
     [ftp_pass'] => 'pass2', 
```

ETC...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T22:33:48.057

我想你可以自己写；）。它很容易。PHP 有一个[FTP 函数](http://php.net/manual/en/book.ftp.php)库。与[DirectoryIterator](http://php.net/manual/en/class.directoryiterator.php)一起，您可以创建一个很好的脚本来处理这个问题。

# r - 将日期打印格式从 yyyy-mm-dd 更改为 dd-mm-yyyy

> ID：14148288
> 
> 赞同：5
> 
> 时间：2013-01-03T22:29:05.947
> 
> 标签：r, date

我正在尝试将日期的格式从转换`yyyy-mm-dd`为`dd-mm-yyyy`格式。例如：

```
D <- "06.12.2012"  
D <- as.Date(D, "%d.%m.%Y")
D
# [1] "2012-12-06" 
```

如何将其转换为“06-12-2012”？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-03T22:30:58.437

a) 解析

```
 d <- as.Date( "06.12.2012", "%d.%m.%Y") 
```

b) 格式

```
 strftime(d, "%m-%d-%Y") 
```

或者

```
 format(d, "%m-%d-%Y") 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-03T22:38:58.093

严格来说，你不能。A`Date`是一个整数（自 1970-01-01 以来的天数），打印时看起来像一个字符串。对象的打印格式为`Date`YYYY-MM-DD，因为这是 ISO-8601 标准。

正如[@GSee](https://stackoverflow.com/users/967840/gsee)在聊天中提到的那样，您必须使用以下内容重新定义该`print.Date`方法：

```
print.Date <- function(x, max=NULL, ...) {
  if (is.null(max)) 
    max <- getOption("max.print", 9999L)
  if (max < length(x)) {
    print(format(x[seq_len(max)], "%d-%m-%Y"), max = max, ...)
    cat(" [ reached getOption(\"max.print\") -- omitted", 
      length(x) - max, "entries ]\n")
  }
  else print(format(x, "%d-%m-%Y"), max = max, ...)
  invisible(x)
} 
```

# r - 为什么 geom_freqpoly 会创建一个假的最小数据点？

> ID：14148290
> 
> 赞同：0
> 
> 时间：2013-01-03T22:29:33.903
> 
> 标签：r, ggplot2

我的数据中的最小观察值是 326。但是`geom_freqpoly`绘制了一个从*零以下*开始的频率多边形。是什么赋予了？我如何让它从一个明智的地方开始？

```
min(diamonds$price)
# [1] 326
qplot(price, data=diamonds, geom="freqpoly") 
```

![在此处输入图像描述](../Images/d6980dfc519f0e7fbe6b8316e7ffdfbc.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T01:12:08.520

您可以设置原点参数：

```
qplot(price, data=diamonds, geom="freqpoly", origin=0) 
```

![在此处输入图像描述](../Images/870c1b5d51f3e5159fce4f0a5487db82.png)

geom_freq poly() 默认使用与 geom_histogram() 相同的 stat_bin() 函数来计算多边形。您可以获得有关控制密度估计的不同有效参数的更多信息`?stat_bin()`

# scala - 将 Long 序列有效地存储在 Scala 中的文件中

> ID：14148296
> 
> 赞同：3
> 
> 时间：2013-01-03T22:30:03.543
> 
> 标签：scala, bytearray, byte, binaryfiles, binary-data

因此，我有一个关联，它将一对`Int`s 与`Vector[Long]`最大大小为 10000 的 a 相关联，并且我拥有从几十万到一百万的此类数据。我想将其存储在一个文件中，以便以后在 Scala 中处理。

`Byte`显然，以纯文本格式存储它会占用太多空间，所以我一直试图通过编写流来弄清楚如何做到这一点。但是我不太确定这是否可行，因为在我看来`byteValue()`a`Long`返回的`Byte`表示仍然是 4 个字节长，因此我不会节省任何空间？我没有太多使用二进制格式的经验。

似乎 Scala 标准库有一个`BytePickle`可能是我一直在寻找的，但后来被弃用了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T00:03:21.560

任意`Long`长度大约为 19.5 个 ASCII 数字，但只有 8 个字节长，因此如果以二进制形式编写，您将节省约 2 倍的成本。现在，可能大多数值实际上并未占用全部 8 个字节，在这种情况下，您可以自己定义一些压缩方案。

无论如何，您最好使用`java.nio.ByteBuffer`和朋友来编写块数据。二进制数据在块中读取效率最高，您可能希望文件可以随机访问，在这种情况下，您希望数据看起来像这样：

```
<some unique binary header that lets you check the file type>
<int saying how many records you have>
<offset of the first record>
<offset of the second record>
...
<offset of the last record>
<int><int><length of vector><long><long>...<long>
<int><int><length of vector><long><long>...<long>
...
<int><int><length of vector><long><long>...<long> 
```

这是一种特别方便的阅读和写作格式，`ByteBuffer`因为您提前知道所有内容将有多大。这样你就可以

```
val fos = new FileOutputStream(myFileName)
val fc = fos.getChannel // java.nio.channel.FileChannel
val header = ByteBuffer.allocate(28)
header.put("This is my cool header!!".getBytes)
header.putInt(data.length)
fc.write(header)
val offsets = ByteBuffer.allocate(8*data.length)
data.foldLeft(28L+8*data.length){ (n,d) =>
  offsets.putLong(n)
  n = n + 12 + d.vector.length*8
}
fc.write(offsets)
... 
```

在回来的路上

```
val fis = new FileInputStream(myFileName)
val fc = fis.getChannel
val header = ByteBuffer.allocate(28)
fc.read(header)
val hbytes = new Array[Byte](24)
header.get(hbytes)
if (new String(hbytes) != "This is my cool header!!") ???
val nrec = header.getInt
val offsets = ByteBuffer.allocate(8*nrec)
fc.read(offsets)
val offsetArray = offsets.getLongs(nrec)  // See below!
... 
```

有一些方便的方法`ByteBuffer`不存在，但是您可以使用隐式添加它们（这里对于 Scala 2.10；使用 2.9 使其成为普通类，删除，并提供从to`extends AnyVal`的隐式转换）：`ByteBuffer``RichByteBuffer`

```
implicit class RichByteBuffer(val b: java.nio.ByteBuffer) extends AnyVal {
  def getBytes(n: Int) = { val a = new Array[Byte](n); b.get(a); a }
  def getShorts(n: Int) = { val a = new Array[Short](n); var i=0; while (i<n) { a(i)=b.getShort(); i+=1 } ; a }
  def getInts(n: Int) = { val a = new Array[Int](n); var i=0; while (i<n) { a(i)=b.getInt(); i+=1 } ; a }
  def getLongs(n: Int) = { val a = new Array[Long](n); var i=0; while (i<n) { a(i)=b.getLong(); i+=1 } ; a }
  def getFloats(n: Int) = { val a = new Array[Float](n); var i=0; while (i<n) { a(i)=b.getFloat(); i+=1 } ; a }
  def getDoubles(n: Int) = { val a = new Array[Double](n); var i=0; while (i<n) { a(i)=b.getDouble(); i+=1 } ; a }
} 
```

无论如何，这样做的原因是您最终会获得不错的性能，当您拥有数十 GB 的数据时，这也是一个考虑因素（听起来您已经给出了数十万个长度为万）。

如果您的问题实际上要小得多，那么不要太担心它——将它打包成 XML 或使用 JSON 或一些自定义文本解决方案（或使用`DataOutputStream`and `DataInputStream`，它的性能不太好，不会给你随机使用权）。

如果您的问题实际上更大，您可以定义*两个*长列表；首先，那些将适合的`Int`，比如说，然后是那些实际上需要一个完整的`Long`（带有索引，所以你知道它们在哪里）。数据压缩是一个非常特定于案例的任务——假设你不只是想使用——`java.util.zip`所以如果没有更多关于数据是什么样子的知识，除了将它存储为弱层次结构之外，很难知道推荐什么如上所述的二进制文件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-03T23:31:08.170

请参阅 Java 的[`DataOutputStream`](http://docs.oracle.com/javase/6/docs/api/java/io/DataOutputStream.html). 它允许简单有效地写入原始类型和`Strings`字节流。特别是，你想要这样的东西：

```
val stream = new DataOutputStream(new FileOutputStream("your_file.bin")) 
```

然后，您可以使用等效[`DataInputStream`](http://docs.oracle.com/javase/6/docs/api/java/io/DataInputStream.html)方法再次从该文件读取变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T00:38:47.897

我使用`scala-io`,`scala-arm`来编写`Long`-s 的二进制流。库本身应该是一种 Scala 的做事方式，但这些不在 Scala`master`分支中——也许有人知道为什么？我不时使用它们。

1）克隆`scala-io`：

`git clone https://github.com/scala-incubator/scala-io.git`

去`scala-io/package`换成你`Build.scala`的`val scalaVersion`

`sbt package`

2）克隆`scala-arm`：

`git clone https://github.com/jsuereth/scala-arm.git`

去`scala-arm/package`换成你`build.scala`的`scalaVersion :=`

`sbt package`

3）在不太远的地方复制：

`scala-io/core/target/scala-xxx/scala-io-core_xxx-0.5.0-SNAPSHOT.jar`

`scala-io/file/target/scala-xxx/scala-io-file_xxx-0.5.0-SNAPSHOT.jar`

`scala-arm/target/scala-xxx/scala-arm_xxx-1.3-SNAPSHOT.jar`

4）启动REPL： `scala -classpath "/opt/scala-io/scala-io-core_2.10-0.5.0-SNAPSHOT.jar: /opt/scala-io/scala-io-file_2.10-0.5.0-SNAPSHOT.jar: /opt/scala-arm/scala-arm_2.10-1.3-SNAPSHOT.jar"`

5）`:paste`实际代码：

```
import scalax.io._

// create data stream
val EOData = Vector(0xffffffffffffffffL)
val data = List(
  (0, Vector(0L,1L,2L,3L))
  ,(1, Vector(4L,5L))
  ,(2, Vector(6L,7L,8L))
  ,(3, Vector(9L))  
)
var it = Iterator[Long]()
for (rec <- data) {
  it = it ++ Vector(rec._1).iterator.map(_.toLong)
  it = it ++ rec._2.iterator
  it = it ++ EOData.iterator
}

// write data at once
val out: Output = Resource.fromFile("/tmp/data")
out.write(it)(OutputConverter.TraversableLongConverter) 
```

# jquery - on Mouse-Hover Image Focused / Grid 画廊

> ID：14148297
> 
> 赞同：0
> 
> 时间：2013-01-03T22:30:07.893
> 
> 标签：jquery, fancybox, gallery, onmouseover, fancybox-2

[现场演示](http://jsfiddle.net/Doodle/d3sLj/5/embedded/result/)
![截屏](../Images/3f7916bf5684d6699ea8a1db136552f4.png)

这个概念的需要是……
有缩略图。
缩略图仍然被黑色覆盖层覆盖）。
**在将鼠标悬停在某个图像上时，它会被点亮**（或者翻转或旋转的动画将是一个奖励......哈哈）
点击时，图像通过fancybox被带到它的真实尺寸。

我已经调整了花哨的盒子脚本并且花哨的盒子功能已经发生了。

```
$(".fancybox").fancybox({
    padding : 0,
    openEffect: 'elastic',
    openSpeed: 250,

   closeEffect: 'elastic',
   closeSpeed: 450,
   closeClick: false,

    helpers : {
    overlay : {
        css : {
            'background' : 'rgba(0, 0, 0, 0.9)'
        }
    }
}

}); 
```

[工作代码](http://jsfiddle.net/GsRxs/)
我需要一些帮助来修改悬停功能（或动画）的现有代码（^_^）
干杯！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T02:45:36.397

如何在悬停时获得动画的快速示例：

```
$(".fancybox").on("mouseenter", function() {
    $(this).find("img").stop(true, true).animate({
        "opacity": 0.1
    }, "slow");

}).on("mouseleave", function() {
    $(this).find("img").stop(true, true).animate({
        "opacity": 1
    }, "slow");

}).fancybox({
    padding: 0,
    openEffect: 'elastic',
    openSpeed: 250,

    closeEffect: 'elastic',
    closeSpeed: 450,
    closeClick: false,

    helpers: {
        overlay: {
            css: {
                'background': 'rgba(0, 0, 0, 0.9)'
            }
        }
    }

});​ 
```

您的工作代码**[已更新](http://jsfiddle.net/GsRxs/1/)**

这是创建所需效果所需的基本结构。

```
... or an animation of flip or rotation would be a bonus 
```

...您是在谈论 $$$ 奖金吗？;)

# c# - 在 sql_variant 列的表值参数中传递“对象”类型的参数

> ID：14148301
> 
> 赞同：16
> 
> 时间：2013-01-03T22:30:22.243
> 
> 标签：c#, sql-server, sql-server-2012, table-valued-parameters, sql-variant

我在 SQL Server 2012 中有一个表值参数，定义为：

```
CREATE TYPE [dbo].[TVP] AS TABLE (
    [Id] [int] NOT NULL,
    [FieldName] [nvarchar](100) NOT NULL,
    [Value] [sql_variant] NOT NULL
) 
```

我用 C# 调用它，代码大致如下所示：

```
var mdItems = new DataTable();
mdItems.Columns.Add("Id", typeof(int));
mdItems.Columns.Add("FieldName", typeof(string));
mdItems.Columns.Add("Value", typeof(object));
mdItems.Rows.Add(new object[] {2, "blah", "value"}); //'value' is usually a string
SqlCommand sqlCommand = conn.CreateCommand();
sqlCommand.CommandText = "[WriteFieldValues]";
sqlCommand.CommandType = CommandType.StoredProcedure;
sqlCommand.Parameters.AddWithValue("@FieldValues", mdItems);
sqlCommand.ExecuteNonQuery(); 
```

然后我在调用时从 SQL Server 收到以下错误`ExecuteNonQuery`：

> *不支持“值”列的类型。类型是“对象”*

我发现[有人](http://social.msdn.microsoft.com/Forums/en-US/sqldataaccess/thread/85943c9b-4a11-4b62-a5d3-993dcfc63e7b)在 3 年前被确定为已知的 Microsoft 错误时遇到了同样的问题。但是，该错误的链接已损坏。有谁知道是否有关于错误状态或潜在解决方法的更新信息？就目前而言，这个错误确实扼杀了`sql_variant`字段的价值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-10-10T09:08:53.657

这篇文章已经有很多年了，但我遇到了同样的问题并找到了解决方案。如果不使用 DataTable 而是填充 SqlDataRecord 的集合，则可以将 SqlDataRecord 的数据类型设置为 SqlDbType.Variant。

```
 List<SqlDataRecord> dataTable = new List<SqlDataRecord>();
var dr = new SqlDataRecord(
                            new SqlMetaData("Id", SqlDbType.Int),
                            new SqlMetaData("Value", SqlDbType.Variant));

dr.SetInt32(0, id);
dr.SetValue(1, myObject);

dataTable.Add(dr);

[...]

SqlCommand sqlCommand = new SqlCommand("dbo.MyProc");
var structuredParam = sqlCommand.Parameters.Add("myTableParam", SqlDbType.Structured);
structuredParam.Value = dataTable; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T06:38:47.153

希望您能很好地使用这种“一刀切”的数据模型。通常，当您由于对基于集合的关系代数和可存储性的误解而尝试扩展时，它会在您的脸上炸开。也许你已经考虑过了。我不想开发关于这个模型的 ETL 或报告。

请记住，您正在尝试将对象插入到数据库引擎中，而该对象不了解底层结构。对象是如此通用，以至于对象的接收者不知道如何解释它。该对象具有属性，但只有当您有明确的说明或使用反射来识别底层类型以解包它们时，您才能访问这些属性。将对象可靠地转换为底层类型的唯一方法（我知道）是通过使用反射而不知道它的任何内容。也许一些 .Net 大师会以其他方式填补我的空白。

通用对象类型不能像这样存储为 sql_variant。甚至 sql_variant 也需要某种强类型的值。SQL Server 不会隐式使用反射来尝试找出数据类型（然后是基础数据的值）是什么。

您可以使用 System.Reflection 的 GetType 方法，然后在插入之前抛出一个 case 语句以进行相应的转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-06T01:28:00.263

不幸的是，我现在没有时间完全回答这个问题，但我可以让你走上正确的道路。

我过去所做的是，而不是使用 TVP，而是使用 XML 参数，将数据集（或任何 POCO，就此而言）序列化为 XML，将该 XML 传递到 proc，然后使用“.nodes”属性xml 变量的（和其他成员）将所需的任何内容提取到临时表、本地表变量、“工作表”等中......

这很模糊，但是如果您序列化该数据集，检查创建的 xml，并阅读在线图书中的 XML 数据类型，您可能会弄清楚如何完成您的任务。

如果这没有帮助，我明天会尝试制定一个实际的解决方案，因为我在离开这一天时刚刚遇到了这个问题。

干杯！！

# jquery - 默认情况下，如何使分组的 Kendo Grid 可折叠？

> ID：14148303
> 
> 赞同：4
> 
> 时间：2013-01-03T22:30:28.250
> 
> 标签：jquery, kendo-ui

这是我到目前为止所拥有的：

```
 $(reportTableSelector).kendoGrid({
    dataSource: dataSource,
    sortable: false,
    pageable: false,
    scrollable: false,
    columns: colModel
});

var grid = $(reportTableSelector).data("kendoGrid");
grid.collapseGroup(grid.tbody.find(">tr.k-grouping-row"));
$('tr[role*="row"]').hide(); 
```

如果我将最后三行代码放在一个`click`处理函数中，它将有效地折叠所有分组的行，但在初始化`grid`.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-04-22T15:46:57.387

一种更惯用的方法

```
var collapseAllGroups = function (grid) {
    grid.table.find(".k-grouping-row").each(function () {
        grid.collapseGroup(this);
    });
}

//On the grid
dataBound: function (e) {
    collapseAllGroups(this);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-28T18:24:05.310

当未应用分组或删除默认分组时，所选答案将导致行消失。

最好使用：

```
dataBound: function () {
    $(reportTableSelector).find('.k-icon.k-i-collapse').trigger('click');
} 
```

如此处所示：http: [//jsfiddle.net/valchev/T64Kb/](http://jsfiddle.net/valchev/T64Kb/)

（取自[http:](http://www.kendoui.com/forums/kendo-ui-web/grid/grid-collapse-exand-all-groups.aspx) //www.kendoui.c​​om/forums/kendo-ui-web/grid/grid-collapse-exand-all-groups.aspx ）

注意：我无法让 '.k-icon.k-collapse' 在 Kendo.2013.2.716 中工作，但 '.k-icon.ki-collapse' 确实有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T23:19:03.080

这是因为在初始化期间仍然没有收到数据（您可能正在使用远程数据），因此没有渲染。

您可以做`collapseGroup`的是在接收并绑定数据后调用：

```
$(reportTableSelector).kendoGrid({
    dataSource: dataSource,
    sortable: false,
    pageable: false,
    scrollable: false,
    columns: colModel,
    dataBound: function () {
        var grid = $(reportTableSelector).data("kendoGrid");
        grid.collapseGroup(grid.tbody.find(">tr.k-grouping-row"));
        $('tr[role*="row"]').hide();
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-04T02:23:27.030

```
dataBound: function (e) {
        var grid = this;
        $(".k-grouping-row").each(function (e) {
            grid.collapseGroup(this);
        });
    }, 
```

# javascript - 使用带有 d3.js 和 nvd3.js 的序数 x 轴的折线图

> ID：14148310
> 
> 赞同：6
> 
> 时间：2013-01-03T22:31:04.527
> 
> 标签：javascript, d3.js, linechart, nvd3.js

我正在尝试从数据集制作折线图，同时保持 X 轴分类。对于观察者来说，它看起来像一个折线图，观察值的 X 坐标之间的间距是等距的：

( 1 ------ 5 ------ 30 ------ 600)

现在我得到这样的东西：

(1-5------30------600)

这是我的数据集：

```
var ds1 =  [
  {
    key: 'VAR-1',
    color: '#FF7F0E',
    values: [
   { "x" : "600", "y" : 0.07706} 
 , { "x" : "30", "y" : 0.00553} 
 , { "x" : "5", "y" : 0.00919} 
 , { "x" : "1", "y" : 0.00969} 
    ]
  }
]; 
```

我尝试创建序数轴并将其设置在折线图对象中：

```
var chart =nv.models.lineChart()
             .margin({top: 10, bottom: 40, left: 60, right: 30});   
var x = d3.scale.ordinal().domain(["1","5", "30", "600"]);
chart.xAxis.scale(x);

chart.yAxis
    .tickFormat(d3.format(',.3f'));

chart.forceY([0]);

d3.select('#exampleOne')
    .datum(ds1)
    .transition().duration(500)
    .call(chart); 
```

然而，情节上似乎没有任何变化。

我想知道，是否可以在 NVD3 折线图实现中启用序数轴，或者该折线图仅用于数值数据？

PS：我是 d3.js 的新手，所以我可能在这里做错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:02:24.183

尝试为比例设置 rangeBounds([0, chartWidth])。IE

```
d3.scale.ordinal().domain(["1","5", "30", "600"]).rangeBounds([0, width]); 
```

更正：我认为您的比例需要更改，但您实际上希望绘制的线具有等距绘制的值。为此，您可能需要将发送到 lineGraph 的数据集修改为类似的内容。

```
var ds1 =  [ {
key: 'VAR-1',
color: '#FF7F0E',
values: [
{ "x" : "4", "y" : 0.07706} 
, { "x" : "3", "y" : 0.00553} 
, { "x" : "2", "y" : 0.00919} 
, { "x" : "1", "y" : 0.00969} 
]}
]; 
```

这样，虽然 x 轴中显示的值将是有序的（即 1、5、30、600），但为线绘制的值将在线性刻度上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-29T16:38:27.133

我认为您不能为 nvd3 中的任何折线图或散点图设置序数域。这些行在 models.scatter 定义中：

```
 if ( isNaN(x.domain()[0])) {
      x.domain([-1,1]);
  }

  if ( isNaN(y.domain()[0])) {
      y.domain([-1,1]);
  } 
```

显然，这将不允许此类图表中 x 或 y 比例的任何序数比例（它是折线图和大多数其他非条形图的基础）。

# php - 用户名和密码的默认值

> ID：14148312
> 
> 赞同：0
> 
> 时间：2013-01-03T22:31:11.547
> 
> 标签：php, codeigniter

我注意到在身份验证库的某些位置，人们设置了名为的私有变量

```
private $username = 'testuser';
private $password = 'testpassword'; 
```

如果您永远不会使用这些默认值，我不明白设置这些变量的用途。我能解释一下为什么有人会给这些分配测试值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:37:30.080

它们仅用于测试，IE：显示该信息的位置。

# uiview - UIView 对象的大小在自动布局下返回为零

> ID：14148317
> 
> 赞同：6
> 
> 时间：2013-01-03T22:31:22.193
> 
> 标签：uiview, ios6, storyboard, autolayout

我正在使用自动布局在 IOS6 下重新编写应用程序，但在访问 UIView 子类的大小时遇到​​问题

```
@property (weak, nonatomic) IBOutlet MyView *myView1; 
```

在

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    NSLog(@"myView1: %@",self.myView1);
} 
```

UIView 的大小在 StoryBoard 中完全定义，但在我运行代码时显示为零。这是自动布局的待办事项，还是根本没有定义子视图？我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-03T22:58:57.567

刚刚在[这里](https://stackoverflow.com/questions/13446920/how-can-i-get-a-views-current-width-and-height-when-using-autolayout-constraint?rq=1)找到了一个可能的答案。运行方法

```
[self.view setNeedsLayout];
[self.view layoutIfNeeded]; 
```

强制计算 UIViews 尺寸，导致预期值出现在日志中，并且 UIView 子类本身也知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-24T19:32:24.890

我刚刚打印了*subview*的框架。

它`0`在`viewDidLoad`.

**`viewDidLayoutSubviews`**它在回调中有一个非零值。

在里面`viewDidLoad`你应该只期望视图控制器的值`view`不为零。内部`viewDidLoad`实际上是有时您添加子视图和东西的地方。因此，期望在您为其设置约束的回调中计算框架是不正确的。

基本上需要理解的是，首先绘制一个viewController，然后随着它的生命周期事件，它的子视图将被布局

# java - 构建与 Android 客户端共享接口的 java 服务器

> ID：14148320
> 
> 赞同：0
> 
> 时间：2013-01-03T22:31:40.790
> 
> 标签：java, android, remoteobject

2 个月前，我开始开发一个需要调用远程方法并从服务器接收复杂对象（其中包含自定义字段的自定义对象）的 android 应用程序。我和我的朋友分工，所以他在 android 客户端上工作，而我在服务器上工作。在开始之前，我们构建了基础接口，提供客户端从服务器需要的功能，所以我的朋友可以轻松地编写应用程序（通过使用假类作为接口的实现），在我完成接口的实现之后在服务器端，他将建立连接并从服务器而不是假类调用函数。

现在的问题是我们找不到将这些接口从服务器传递到客户端的方法。我们尝试使用 java RMI，但失败了，因为 android 不支持 java RMI，然后我们尝试使用 JAX-WS（带有 tomcat 7），我们也失败了，因为 JAXB 无法处理接口。（[-您可以在此处查看有关 jaxb 问题的更多详细信息-](https://stackoverflow.com/questions/14111925/creating-webservice-jax-ws-with-functions-which-return-custom-types)）

我和我的朋友真的很迷茫..我们不知道如何在服务器和安卓客户端之间传递这些接口。有可能我们正在尝试做的事情吗？如果没有，还有哪些其他选项可供我们调用远程方法并从服务器接收复杂对象？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T00:03:21.760

不确定现在是否为时已晚（经过 2 个月的开发），但有些框架应该让 RPC 对您更容易（注意连接两端）。我知道的两个是 Apache Thrift（绝对可以与 Android 一起使用 - 有使用它的应用程序）或 Apache Etch（可能）。

阿帕奇节俭： [http ://thrift.apache.org/](http://thrift.apache.org/)

阿帕奇蚀刻：http: [//incubator.apache.org/etch/](http://incubator.apache.org/etch/)

关于 Evernote 选择 Thrift 的博客： [http ://blog.evernote.com/tech/2011/05/26/evernote-and-thrift/](http://blog.evernote.com/tech/2011/05/26/evernote-and-thrift/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T22:36:56.490

您可以在服务器上公开 Web 服务，以便客户端可以在需要时与服务器交互，这可能是最快的解决方案。

或者您可以编写一种 servlet 编程来从客户端获取 json 请求，对其进行处理并将 json 响应发送回客户端。如果应用程序是数据密集型应用程序，那么 JSON 对您有很大帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T02:31:01.303

如果您的应用程序仅限于服务器上的 Java 和 Android（没有其他客户端，例如 IOS）之间的通信，那么与基于 IDL 的解决方案相比，更简单的 RPC 路径是使用[jsonrpc](https://github.com/RitwikSaikia/jsonrpc)。此解决方案同时提供服务器和 Android 客户端组件。在客户端和服务器上都非常容易实现。一个限制是必须对字节数组进行编码，因为 JSON 传输不支持二进制。

# java - 如何获取具有三个值的 HashMap 值

> ID：14148331
> 
> 赞同：30
> 
> 时间：2013-01-03T22:32:47.163
> 
> 标签：java, hashmap

如果我有一个带有这样的键的 HashMap： `[pubDate, title, link]`和这样的值（示例）：

```
[Thu, 03 Jan 2013 21:50:02 +0100, Transferts - YBX : ''Je change de dimension'', http://www.link.fr/info/link_informations.html] 
```

我可以找回链接`http://www.link.fr/info/link_informations.html`吗？代码：

```
 for (int i = 0; i < nl.getLength(); i++) {
                    // creating new HashMap
                    map = new HashMap<String, String>();
                    Element e = (Element) nl.item(i);
                    // adding each child node to HashMap key => value
                    map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
                    map.put(KEY_LINK, parser.getValue(e, KEY_LINK));

                    map.put(KEY_DATE, parser.getValue(e, KEY_DATE));
                    //map.put(KEY_DESC, parser.getValue(e, KEY_DESC));

                    // adding HashList to ArrayList
                    menuItems.add(map);
 } 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2015-11-04T16:49:24.487

我刚刚遇到了同样的问题，并决定将我的密钥映射到一个[Entry](https://docs.oracle.com/javase/7/docs/api/java/util/Map.Entry.html)。这允许地图提供相同的索引功能，同时具有与键关联的多个属性。我认为创建单独的类或嵌套映射是一个更简洁的解决方案。

```
Map<String, Entry<Action, Boolean>> actionMap = new HashMap<String, Entry<Action, Boolean>>();

actionMap.put("action_name", new SimpleEntry(action, true)); 
```

以后要使用数据：

```
Entry<Action, Boolean> actionMapEntry = actionMap.get("action_name");

if(actionMapEntry.value()) actionMapEntry.key().applyAction(); 
```

我个人对此的使用是命名函数的映射。按名称选择函数后，该函数将运行，布尔值将确定处理过程中是否需要清理。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-01-03T22:37:23.403

您创建一个对象，该对象将键的所有三个子键作为属性保存。确保`equals`正确实施`hashCode`。

```
public class MyKey {
  public MyKey(String subkey1, String subkey2, String subkey3) {
    ...
  }
} 
```

使用此类对象作为地图的键：

```
Map<MyKey, String> myMap = ....;
myMap.get(new MyKey("Thu", "03 Jan 2013 21:50:02 +0100", "Transferts - YBX")); 
```

玩得开心！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-03T22:46:16.730

您还可以尝试使用类型为的嵌套哈希图， `HashMap<String, HashMap<String, HashMap<String, String>>>`然后将查询公式化为 `map.get(date).get(title).get(link)`

最好的解决方案是将这个嵌套的 hashmap 封装在您自己的类中，如下所示：

```
public class NestedHashmap {
    private Map<String, Map<String, Map<String, String>>> map;

    public NestedHashMap() { 
        map = new HashMap<String, HashMap<String, HashMap<String, String>>>;
    }

    public put(String date, String title, String link, String value){
        if(map.get(date) == null) { 
            map.put(date, new HashMap<String, HashMap<String, String>>;
        }
        if(map.get(date).get(title) == null){
            map.get(date).put(new HashMap<String, String>);
        }
        map.get(date).get(title).put(link, value);
    }

    public get(String date, String title, String link) {
        // ...mostly analogous to put...
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-03T22:41:36.370

您可以创建一个复合键，其中包含您想要的所有值。一个简单的方法可以是将构成键的值连接在一起，并由您确定不会出现在键值中的值分隔。

例如：

```
String makeCompoundKey(String pubDate, String title) {
  return pubDate + "|" + title;
}

HashMap<String,String> map = new HashMap<String,String>();

map.put(makeComoundKey(pubDate,title), link) 
```

为了避免必须选择一个不出现在任何键值中的字符的问题，来处理非字符串键并可能获得更好的性能，您可以声明一个新类来包含您的键值并覆盖`equals`and`hashCode`方法：

```
final class DateAndTitle {
  private final Date pubDate;
  private final String title;

  @Overrde
  boolean equals(Object rhs) {
    // let eclipse generate this for you, but it will probably look like ...
    return rhs != null && rhs.getClass() == getClass() &&
      pubDate.equals(rhs.pubDate) && title.equals(rhs.title);
  }

  @Overrde
  int hashCode(Object) {
    // let eclipse generate this for you...
    ...
  }
} 
```

然后你可以定义你的地图，如：

哈希映射

并使用 DateAndTitle 对象来索引您的地图。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-01-03T22:54:17.910

就我而言，我找到了另一种解决方案：创建一个 ArrayList 并将每个 for 循环中的所有链接放在上面。这要容易得多。

# c# - 将部分动态添加到 C# exe App.Config？

> ID：14148333
> 
> 赞同：1
> 
> 时间：2013-01-03T22:32:52.263
> 
> 标签：c#, asp.net, web-config, app-config

我追求的配置看起来像这样

```
 <configuration>
 <configSections>
   <section name="dwdev" type="System.Configuration.NameValueSectionHandler,System,Version=1.0.3300.0,Culture=neutral,x" />
   <section name="dwdevfin" type="System.Configuration.NameValueSectionHandler,System,Version=1.0.3300.0,Culture=neutral,x" />
</configSections>
<dwdev>
  <add key="DatabaseType" value="Student" />
  <add key="ReportDataPath" value="x" />
  <add key="ProgressDataPath" value="x" />
  <add key="DWDataConnectionString" value="Data Source=rnddb;Initial Catalog=x;User ID=x" />
  <add key="x" value="Data Source=rnddb;Initial Catalog=dwdevsystem;User ID=x;pwd=x" />
  <add key="WebServiceRoot" value="x" />
  <add key="AllowExternalUsersGroups" value="True" />
</dwdev>
<dwdevfin>
  <add key="DatabaseType" value="Finance" />
  <add key="ReportDataPath" value="x />
  <add key="ProgressDataPath" value="x" />
  <add key="x" value="Data Source=rnddb;Initial Catalog=x;User ID=x" />
  <add key="x" value="Data Source=rnddb;Initial Catalog=x;User ID=dx;pwd=x" />
  <add key="WebServiceRoot" value="x" />
  <add key="AllowExternalUsersGroups" value="True" />
</dwdevfin>
</configuration> 
```

是否可以允许用户添加其他部分？或者您是否必须通过将它们放在 configSections 中而不是像下面这样的集合来专门声明它们

```
<configSections>
<section name="Settings" type="SQLQueryOutput.MySection, SQLQueryOutput" />
</configSections>

<Settings>
<Components Name="Test">
  <Component Name="Portal" Type="Web" />
  <Component Name="Comms" Type="Web" />
  <Component Name="Scheduler" Type="WindowsService" ServiceName="LiveScheduler" />
 </Components>

 <Components Name="AnotherTest">
  <Component Name="Portal" Type="Web" />
  <Component Name="Comms" Type="Web" />
  <Component Name="Scheduler" Type="WindowsService" ServiceName="LiveScheduler" />
 </Components>
 </Settings>
 </configuration> 
```

# wcf - WCF 中具有 netTcp 和传输安全性的明文内容路由标头

> ID：14148334
> 
> 赞同：1
> 
> 时间：2013-01-03T22:33:08.137
> 
> 标签：wcf, header, nettcpbinding

我的应用程序的流量是 1) .Net 客户端到 2) F5 BigIP 负载平衡器 VIP 到 3) .Net WCF 服务节点。WCF 服务使用 netTcp 绑定，安全模式设置为传输，传输保护级别为 EncryptAndSign。我需要为负载均衡器提供一个值，它可以用来将请求路由到特定的 WCF 服务节点。该值取决于发出请求的用户，显然它必须是明文才能让负载均衡器读取它。这样的事情 - 用明文标头值包装加密的 netTcp tarnsport 有效负载 - 可能在库存 WCF 中吗？如果没有，我可以写一些自定义的东西吗？

# php - 需要使用 PHP 将 android app 生成的纬度和经度值存储到 mySQL 数据库中

> ID：14148337
> 
> 赞同：0
> 
> 时间：2013-01-03T22:33:39.370
> 
> 标签：php, android, mysql, gps, phpmyadmin

我在android中制作了一个跟踪应用程序，它成功生成了纬度和经度

但我需要使用 PHP 将 lat 和 long 存储在我的外部 mySQL 数据库中。

我在 DB 中对 lat 和 long 使用值类型“decimal(10,7)”。

任何想法如何使用 PHP 将 android 生成的 lat 和 long 存储到我的外部 mySQL 数据库中？

**我的 PHP 代码**

```
<?php 
        $lat = $_GET['lat'];
        $lng = $_GET['lng'];
        $sender=$_POST['sender'];

 $hostname = 'localhost';
 $username = 'xxxx';
 $password = 'xxxxxxx';

   $conn =  mysql_connect($hostname,$username,$password) or die('Error Please Try Again.'); 

if ($conn) { 

    mysql_select_db("android track", $conn); 

   $query2 = "INSERT INTO coor VALUES(NULL,'$sender','$lat','$lng')"; 

    if (mysql_query($query2, $conn)) 
        echo "Data Insertion Successful"; 
    else 
        echo "Oops".  mysql_error() ; 

  } 

 mysql_close();   
 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T00:57:13.433

好的，在我重写你的代码之前做几件事......

1.  您正在向 SQL 注入攻击敞开大门，因为您没有使用准备好的语句。
2.  不推荐使用 mysql PHP 接口，应该使用 mysqli 或 PDO。
3.  我假设您正在为坐标表上的主键传递 NULL。不要这样做，而是将其标记为`auto increment`并在 SQL 中明确指定您的列。
4.  坐标表的创建表语句是什么？将结果粘贴`SHOW CREATE TABLE coordinates`到您的问题中。我怀疑您`null` 在 a 列中传递了一个值，`primary key`并且永远不能为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T22:44:31.063

您可以使用以下代码将`mLat`和变量提交到服务器：`mLong`

```
String storeURL = "http://www.yourdomain.com/yourscript.php?lat=" + mLat + "&long=" + mLong;

URL getURL;
getURL = new URL(storeURL);

URLConnection connection = getURL.openConnection();
connection.connect();

InputStream input = new BufferedInputStream(getURL.openStream());
OutputStream output = new ByteArrayOutputStream();          
byte data[] = new byte[1024];

while ((count = input.read(data)) != -1) {
 output.write(data, 0, count);
}

output.flush();
output.close();
input.close();

String downloadResult = output.toString();
Log.i("LOG", downloadResult); //Your php-script can, for example, "echo("OK");" if the storing was successful 
```

当然，您仍然需要注意错误处理（没有网络连接等）。

# ruby-on-rails - 在 Rails 3.2.8 中设置 X-XSS-Protection 标头 - Rails 将标头小写

> ID：14148340
> 
> 赞同：3
> 
> 时间：2013-01-03T22:33:59.007
> 
> 标签：ruby-on-rails, internet-explorer, http-headers

我试图在 Rails 3.2.8 中将 X-XSS-Protection 标头设置为“0”，以防止 Internet Explorer 引发 XSS 错误。[在此问题](https://stackoverflow.com/questions/9090577/what-is-the-http-header-x-xss-protection/10369475#10369475)和[本文](http://blogs.msdn.com/b/ieinternals/archive/2011/01/31/controlling-the-internet-explorer-xss-filter-with-the-x-xss-protection-http-header.aspx)中查看有关标题的更多详细信息。我目前在我的应用程序控制器中使用它：

```
class ApplicationController < ActionController::Base
  before_filter :set_headers

  def set_headers
    response.headers['X-XSS-Protection'] = "0"
  end
end 
```

在开发中，这可以很好地设置标题。`curl -i http://localhost:3000`返回：

```
X-XSS-Protection: 0 
```

但在生产中，( `curl -i http://production-app.com`) 标头不正确地小写，IE 似乎忽略了它。

```
X-Xss-Protection: 0 
```

有谁知道为什么会这样？

# python - urllib2 超时

> ID：14148341
> 
> 赞同：2
> 
> 时间：2013-01-03T22:33:59.273
> 
> 标签：python, timeout, urllib2

我正在为我的代码使用 urllib2 库，我使用了很多 (urlopen) 编辑：loadurl

我的网络有问题，当我浏览网站时，有时我的浏览器会卡在“连接”到某个网站上，有时我的浏览器会返回超时

我的问题是，如果我在我的代码上使用 urllib2，当尝试连接到某个网站的时间过长时，它可能会超时，或者代码会卡在该行上。

我知道 urllib2 可以处理超时而不在代码上指定它，但它可以适用于这种情况？

谢谢你的时间

编辑 ：

```
def checker(self)
 try:
   html = self.loadurl("MY URL HERE")
   if self.ip_ != html:
(...)
 except Exeption, error:
   html = "bad" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:08:53.487

根据我的小研究，该`urllib2.urlopen()`功能是在python 2.6中添加的

因此，应该通过向`urllib2.urlopen`函数发送自定义超时来解决超时问题。代码应该是这样的；

`response = urllib2.urlopen( "---insert url here---", None, your-timeout-value)`

该`your-timeout-value`参数是一个可选参数，它以秒为单位定义超时。

编辑：根据您的评论，我知道您不需要等待太久的代码，那么您应该拥有以下代码以免卡住；

```
import socket
import urllib2

socket.setdefaulttimeout(10) 
```

`10`可以根据与连接速度和网站加载时间相关的数学公式进行更改。

# linux - Gnuplot 4.6 xtics 标签消失

> ID：14148342
> 
> 赞同：3
> 
> 时间：2013-01-03T22:34:06.573
> 
> 标签：linux, gnuplot

我决定从 4.4 迁移到最新版本的 gnuplot 到 4.6 我遇到了 x 标签在 4.6 版本中消失但在 4.4 版本中存在的问题。

这是我的脚本的精简版。

```
set key outside
set title "MY TITLE"
set timefmt "%m/%d/%Y-%H:%M:%S"
set format x "%m/%d %H:%M"
set xdata time
set ylabel "Y LABEL"
set xlabel "Time"
set grid
set xtics rotate by 90 offset 0,-5
set terminal pngcairo size 1000,500 font ",9"
set xtics font ",8.0"
set ytics font ",8.0"
set output 'test.png'
plot '-' using 1:2 with linespoints ti "legend"
01/01/2013-00:15 186557
01/01/2013-01:15 254654
01/01/2013-04:00 180146
01/01/2013-06:15 191059
e
set key inside 
```

我已经确定了这一行的问题

```
set xtics rotate by 90 offset 0,-5 
```

因为我的标签太长，偏移使它消失

如果您删除偏移量

```
set xtics rotate by 90 
```

不是标签显示，而是在图表的中间。

4.4 版用于压缩图表以为标签留出空间。

我想我对 gnuplot 的了解是有限的。有人有想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T02:20:57.680

**更新的答案**，由 Ethan Merritt 提供

更好的方法是将标签的对齐方式更改为右对齐（而不是默认居中）。

```
set xtics rotate by 90 right 
```

这可以正确计算边距，而无需硬编码边距大小

* * *

这里的标签位置对我来说似乎有点不稳定。我认为可能存在我可能会报告的错误。一种解决方法是通过以下方式显式设置“x 轴”的位置：

```
set bmargin at screen 0.2 
```

它看起来很脆弱的原因是`set bmargin at screen 0.2`，xtic 标签明显延伸到高于 xlabel 的位置。但是，如果您将该行注释掉，它们突然不会延伸到高于 xlabel 的位置。

以下是有和没有那条线的图：

![在此处输入图像描述](../Images/5580c77a98240baeebfe63208a97569c.png)

![在此处输入图像描述](../Images/bbb77303c275feab66c5ca559d393947.png)

也许 cairo/pango 会在标签的任何部分超出可见的“画布”区域的地方剪掉标签？

`postscript`作为旁注，如果我使用终端，情节似乎也大致正确......

# oracle - Amazon RDS：Oracle SQL 开发人员 - 数据库副本挂起？

> ID：14148349
> 
> 赞同：0
> 
> 时间：2013-01-03T22:34:36.867
> 
> 标签：oracle, cloud, amazon-rds

在 Amazon RDS 上创建 Oracle 实例后，我尝试按照此处针对 Oracle SQL Developer - 数据库副本的说明导入数据：

[http://aws.amazon.com/articles/Amazon-RDS/4173109646282306](http://aws.amazon.com/articles/Amazon-RDS/4173109646282306)

我的数据库大小约为 50GB。它运行良好，我可以看到 DDL 进度、数据迁移等，但现在它似乎卡在一个大约有 35 万条记录的表上。我的问题是：

1.  对于尝试过将数据库复制到 Amazon RDS for Oracle 的任何人，您的数据库有多大，需要多长时间？
2.  杀死 SQL Developer 并重新启动进程是否安全？

任何意见是极大的赞赏！

# c# - 如何更新 Windows 8 Metro 风格的 xml 文件节点？

> ID：14148351
> 
> 赞同：0
> 
> 时间：2013-01-03T22:34:55.477
> 
> 标签：c#, windows-8, microsoft-metro

我将在我的 xml 文件的父节点中添加一个新节点。此代码的单元测试显示“成功”，它正在通过但在 xml 中没有添加节点。

此外，一些测试我得到了错误；<< 访问被拒绝。（来自 HRESULT 的异常：0x80070005 (E_ACCESSDENIED)）>> 在 SaveToFileAsync 行上

我是怎么了？还有另一种方法可以做到这一点吗？

```
 public string ConnectionPath { get; set; }
    protected string XPath { get; set; }
    protected string XParentPath { get; set; }
    protected XmlDocument Source { get; set; }
    protected StorageFolder SFolder { get; set; }
    protected StorageFile SFile { get; set; }

    public RepositoryBase(string connectionPath)
    {
        this.ConnectionPath = connectionPath;
    }

     public async void Insert(T entity)
     {
        SFolder = Package.Current.InstalledLocation;
        SFile = await SFolder.GetFileAsync(this.ConnectionPath);
        var content = await FileIO.ReadTextAsync(SFile);
        if (!string.IsNullOrEmpty(content))
        {
            Source = new XmlDocument();
            Source.LoadXml(content);
        }
        var tagName = typeof(T).Name;
        if (tagName != null)
        {
            IXmlNode parentNode = Source.SelectSingleNode(XParentPath);
            if (parentNode != null)
            {
                XmlElement newNode = Source.CreateElement(tagName);
                newNode.InnerText = GetContent(entity);
                parentNode.AppendChild(newNode);
            }              
        }        
        await Source.SaveToFileAsync(SFile);
     } 
```

* PlaceRepositoryClass ;

```
 public class PlaceRepository : RepositoryBase<Place>
    {
        public PlaceRepository()
        : base("Data\\bla\\bla.xml")
        {

             XPath = "/Country[Id=1]/Cities/City[Id=1]/Places/Place";
             XParentPath = "/Country[Id=1]/Cities/City[Id=1]/Places";
         }
     } 
```

*   单元测试方法；

    ```
    [TestMethod]
    public void AppendNode()
    {
        Place place = new Place()
        {
            Id = 40,
            Name = "xxxxx",
            SummaryPath = "yyyyy",
            Logo = "xy.png",
            LogoSmall = "xy_small.png",
            Latitude = "32.423",
            Longitude = "34.23424",
            Content = new PlaceContent() { Items = new List<ContentItem>() { new ContentItem() { TextPath = "aaaa", Header = "bbbbb", AudioFilePath = "x.mp3" } } },
            Gallery = new PhotoGallery() { Photos = new List<Photo>() { new Photo() { Path = "ab.png", Text = "abab" } } }
        };

        PlaceRepository repository = new PlaceRepository();
        repository.Insert(place);
    } 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:23:28.140

您正在尝试写入作为应用程序包一部分的文件，并且该文件是只读的。您可以将文件复制到本地存储并在那里进行修改。

# php - Yii-user : 向用户添加国家列表

> ID：14148352
> 
> 赞同：0
> 
> 时间：2013-01-03T22:35:03.063
> 
> 标签：php, yii, yii-extensions

我正在使用 Yii-user，我想在用户配置文件中添加一个国家配置文件字段。

基于此示例：[http ://code.google.com/p/yii-user/wiki/FieldWidget#Example__-_Country_list](http://code.google.com/p/yii-user/wiki/FieldWidget#Example_-_Country_list)

我添加了这一行：

```
'profiles'=>array(self::HAS_MANY, 'Profile', 'country_id'), 
```

到我的 Country 类的关系数组。

我已经添加了与 Profile 模型的关系。

但我不明白我应该如何以 JSON 字符串格式填充 Widget 参数字段。

有人可以给我一个例子吗？

# java - Java，如何在我的屏幕上绘制矩形变量

> ID：14148353
> 
> 赞同：0
> 
> 时间：2013-01-03T22:35:10.057
> 
> 标签：java, compiler-errors, rectangles

我编写了一个简单的 Java 游戏，其中屏幕上有两个矩形，一个矩形移动，另一个保持静止，移动的矩形随着键盘箭头输入移动，可以向上、向下、向左或向右移动。我遇到的问题是在屏幕上绘制矩形，我的变量设置如下所示：

```
 float buckyPositionX = 0;
    float buckyPositionY = 0;
    float shiftX = buckyPositionX + 320;//keeps user in the middle of the screem
    float shiftY = buckyPositionY + 160;//the numbers are half of the screen size
//my two rectangles are shown under here
    Float rectOne = new Rectangle2D.Float(shiftX, shiftY,90,90);
    Float rectTwo = new Rectangle2D.Float(500 + buckyPositionX, 330 + buckyPositionY, 210, 150); 
```

在我的渲染方法（它包含我想在屏幕上绘制的所有东西）下，我告诉 Java 绘制我的两个矩形：

```
 public void render(GameContainer gc, StateBasedGame sbg, Graphics g) throws SlickException{
        //draws the two rectangles on the screen
        g.fillRect(rectOne.getX(), rectOne.getY(), rectOne.getWidth(), rectOne.getHeight());
        g.fillRect(rectTwo.getX(), rectTwo.getY(), rectTwo.getWidth(), rectTwo.getHeight());

   } 
```

但是我在fillRect下收到以下错误：

```
This method fillRect(float,float,float,float) in the type graphics is 
    not applicable for the arguments (double,double,double,double) 
```

这让我感到困惑，因为据我了解，它是说 fillRect 中提供的信息应该是浮点数，所以为什么它一直给我这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T22:36:51.403

这似乎是双值：

```
rectOne.getX(), rectOne.getY(), rectOne.getWidth(), rectOne.getHeight() 
```

[这些方法返回双精度值。见这里 API](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/geom/Rectangle2D.Float.html)

因为您设置了浮点值，所以只需使用这个：

```
 g.fillRect((float)rectOne.getX(), (float)rectOne.getY(), (float)rectOne.getWidth(), (float)rectOne.getHeight());
    g.fillRect((float)rectTwo.getX(), (float)rectTwo.getY(), (float)rectTwo.getWidth(), (float)rectTwo.getHeight()); 
```

# java - for循环在JSP中83之后停止输出

> ID：14148357
> 
> 赞同：1
> 
> 时间：2013-01-03T22:35:22.797
> 
> 标签：java, html, jsp, jstl

我正在尝试在 JSP 中输出 ArrayList 的内容。有趣的是，它在索引 83 之后停止输出。ArrayList 的大小是 2000。我偶然发现了这个问题，因为我首先在我的 javascript 函数中尝试了这个：

```
 document.getElementById('test').innerHTML = '<%
 for(ClassInfo classes: classList)
 {
   out.print(classes.toString());
 }

 %>'; 
```

没事了。所以我用这样的东西测试了它：

```
 document.getElementById('test').innerHTML = '<%
 for(int count = 0; count < classList.size(); count++)
 {
   out.print(classList.get(count).toString());
 }

 %>'; 
```

仍然一无所有。因此，我对其进行了调整，以查看是否可以得到任何东西：

```
document.getElementById('test').innerHTML = '<%
 for(int count = 0; count < 83; count++)
 {
   out.print(classList.get(count).toString());
 }

 %>'; 
```

它工作得很好，但在 83 之后就不行了。（即，如果我把它改成 84，什么都没有） 想说明一下吗？这是我使用 JSP 的第一天，似乎很多人将 JSTL 用于此类事情，据我了解，Tomcat v7 并没有打包。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:10:16.960

也许你可以尝试更换

```
 document.getElementById('test').innerHTML = '<%
 for(ClassInfo classes: classList)
 {
   out.print(classes.toString());
 }
 %>'; 
```

和

```
document.getElementById('test').innerHTML = '';
<% for (ClassInfo classes : classList)  { %>
document.getElementById('test').innerHTML += '<%= ""+classes %> ';
<% } %> 
```

虽然这是非常低效的（浏览器中的大量回流，多次查找测试），但它可能有助于调试。我的猜测是（如评论中所述）您的 ArrayList 中的元素为空。在此设置（“”+类）中，字符串“null”将附加到输出中。

# silverlight - 基于组合框选择将 SilverLight 5 DataGrid 列值绑定到集合中的元素

> ID：14148358
> 
> 赞同：0
> 
> 时间：2013-01-03T22:35:34.760
> 
> 标签：silverlight, datagrid, silverlight-toolkit

我有一个 silverlight viewmodel 部分，它看起来像这样：

```
class ViewModel {
    ObservableCollection<Person> People;
    ObservableCollection<Question> Questions;
    int SelectedQuestionID;
}

class Person {
    int ID;
    string Name;
    int Age;
    string Gender;
    Dictionary<int, Question> Answers;
}

class QandA {
    int ID;
    string QuestionOrAnswerText;
} 
```

我想将“Person”对象的 ObservableCollection 绑定到 DataGrid 并显示一些列。其中三列很简单：姓名、年龄、性别。第四个有点棘手。我希望第四列包含 Person.Answers 属性中的一个问题的“QuestionOrAnswerText”，该属性对应于第四列的列标题中的组合框的选定值，并且当用户更改选定值时更改在上述组合框中。组合框的 selectedvalue 属性将绑定到我的视图模型的 SelectedQuestionID 属性，我希望能够以某种方式绑定到我的 datagrid 列中的该属性以获取我的字典值。

我很难弄清楚在这种情况下要使用什么绑定路径。

这是我的 XAML 在本专栏中的样子：

```
 <sdk:DataGridTemplateColumn>
                    <sdk:DataGridTemplateColumn.HeaderStyle>
                        <Style TargetType="dataprimitives:DataGridColumnHeader">
                            <Setter Property="ContentTemplate">
                                <Setter.Value>
                                    <DataTemplate>
                                        <ComboBox DataContext="{Binding SelectedDivision}" ItemsSource="{Binding Questions}"
                                                  SelectedValue="{Binding SelectedQuestion, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                                                  SelectedValuePath="ID" DisplayMemberPath="Text"></ComboBox>
                                    </DataTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </sdk:DataGridTemplateColumn.HeaderStyle>
                    <sdk:DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Path=Answers[{Binding SelectedQuestion, RelativeSource={RelativeSource TemplatedParent}}].Text}"></TextBlock>
                        </DataTemplate>
                    </sdk:DataGridTemplateColumn.CellTemplate>
                </sdk:DataGridTemplateColumn> 
```

XAML 编辑器说我在 {Binding Path=Answers[..].Text} 中有一个问题，它期望在“.Text”部分之后有一个额外的右花括号。但是，这会使括号不平衡。

谢谢，马修

# javascript - jQuery通过数据属性选择DOM元素，其中包含多个标识符

> ID：14148368
> 
> 赞同：3
> 
> 时间：2013-01-03T22:36:09.173
> 
> 标签：javascript, jquery, html

**注意：这不是关于按数据属性查询的基本问题**

我遇到的问题是我有一些像这样的元素：

```
<div data-step="1, 4"> 
```

我已经想出了如何逐步完成每一个`[data-step]`并为它们提取`1, 4`和创建事件等。

**假设我正在尝试查询并获取这个确切的数据步骤，但我得到的只是：4**

```
$('[data-step="4"]') 
// this won't work of course

$('[data-step="1, 4"]')
// obviously this will work, but at this point I'm only given the index
// which will only be ONE of these numbers 
```

基本上给出了（例如，4）我怎样才能轻松地查询选择器出去抢`[data-step="1, 4"]`？

我能想出的只是一个循环，它遍历每个数据步骤，删除所有内容并查看是否有匹配项。可能有更简单的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T22:41:32.567

`~=`将找到具有属性的元素，该属性的值包含给定的单词，由空格分隔。也适用于您的情况。

```
$('[data-step~="4"]') 
```

`*=`将找到具有包含给定子字符串的值的属性的元素。

```
$('[data-step*="4"]') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T22:41:47.583

您也可以使用`filter`解决方案：

```
var search = 4;
$("[data-step]").filter(function() {
    return $.inArray("" + search, $(this).data("step").split(/,\s*/)) !== -1;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T22:45:50.887

您需要使用 * before = 它将返回所有包含子字符串 'value' $('[data-step*="value"]') 的数据步骤

# windows - 如何使用 cmake 在 vcproj 文件中设置属性？

> ID：14148374
> 
> 赞同：6
> 
> 时间：2013-01-03T22:36:31.890
> 
> 标签：windows, visual-studio, cmake

Visual Studio 的 vcproj 文件包含影响构建的各种设置或属性。例如，我试图转换为 cmake 的项目使用的一些项目是

```
StringPooling="true"
RuntimeLibrary="2"
TreatWChar_tAsBuiltInType="true"
WarningLevel="3"
Detect64BitPortabilityProblems="false" 
```

当然还有很多其他可以设置的。问题是如何在使用 cmake 生成项目时设置它们。除了事后编辑 vcproj 文件之外，有谁知道如何在使用 cmake 时设置这些类型的属性？我找不到任何解释如何通过 cmake 设置这些属性的内容。我唯一知道如何设置的是 cmake 专门用于（例如`PreprocessorDefinitions`或`AdditionalIncludeDirectories`）的跨平台内容。但我需要能够设置特定于 Visual Studio 的那些。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-05T01:10:18.523

对于您列出的标志，您需要将以下内容添加到您的 CMakeLists.txt：

```
if(MSVC)
  # StringPooling: true == /GF  false == /GF-
  set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} /GF")

  # RuntimeLibrary
  # 0 (MultiThreaded) == /MT
  # 1 (MultiThreadedDebug) == /MTd
  # 2 (MultiThreadedDLL) == /MD
  # 3 (MultiThreadedDebugDLL) == /MDd
  set(CMAKE_CXX_FLAGS_RELEASE "${CMAKE_CXX_FLAGS_RELEASE} /MD")
  set(CMAKE_CXX_FLAGS_DEBUG "${CMAKE_CXX_FLAGS_DEBUG} /MDd")

  # TreatWChar_tAsBuiltInType: true == /Zc:wchar_t  false == /Zc:wchar_t-
  set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} /Zc:wchar_t")

  # WarningLevel: /W<level 0 to 4> or /Wall
  set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} /W3")

  # Detect64BitPortabilityProblems: /Wp64 - Deprecated since VC++ 2010 
  set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} /Wp64")
endif() 
```

如果需要，您可以将它们组合在一个呼叫中：

```
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} /GF /Zc:wchar_t /W3 /Wp64") 
```

如果您只需要将标志添加到单个目标（例如`MyTestExe`），您可以执行以下操作：

```
set_target_properties(MyTestExe PROPERTIES COMPILE_FLAGS "/GF- /W2") 
```

通过此特定于目标的方法设置的选项将覆盖通用`CMAKE_CXX_FLAGS`变量中的任何冲突选项。

有关这些命令的更多信息，请执行以下操作：

`[cmake --help-variable "CMAKE_<LANG>_FLAGS_DEBUG"](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#variable%3aCMAKE_LANG_FLAGS_DEBUG)`
`[cmake --help-command set_target_properties](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3aset_target_properties)`
`[cmake --help-property COMPILE_FLAGS](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#prop_tgt%3aCOMPILE_FLAGS)`

[此处](http://msdn.microsoft.com/en-us/library/fwkeyyhe.aspx)列出了 Visual Studio 编译器选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T08:58:54.780

这些属性中的每一个都对应于编译器的一个命令行选项 ( `cl`)。您在 CMakeList 中设置这些命令行选项（使用变量，如`CMAKE_CXX_FLAGS`，命令`add_definitions()`和属性`COMPILE_FLAGS`），CMake 会在生成它们时自动将它们转换为 .vc[x]proj 文件中的设置。那些它不理解的只是添加为“附加命令行选项”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-14T01:21:50.553

一般来说，你可以这样做：

```
set_target_properties(target_name
                      PROPERTIES VS_GLOBAL_CAExcludePath "....") 
```

“VS_GLOBAL_ 可以设置为添加 Visual Studio 项目特定的全局变量。如果将 VS_GLOBAL_QtVersion 设置为找到的 Qt 版本 FindQt4.cmake，Qt 集成效果会更好。例如，“4.7.3””来源：[https://cmake .org/cmake/help/v3.20/prop_tgt/VS_GLOBAL_variable.html](https://cmake.org/cmake/help/v3.20/prop_tgt/VS_GLOBAL_variable.html)

# sql - 如何使用作业 ID 启用/禁用 oracle 作业

> ID：14148375
> 
> 赞同：2
> 
> 时间：2013-01-03T22:36:37.400
> 
> 标签：sql, oracle

我正在使用以下查询来启用 oracle 作业：

```
exec dbms_scheduler.disable('23'); 
```

其中“23”是我的工作 ID。但这似乎不适用于 id。我读到了，工作名称应该代替“23”。但我的工作没有名字。它只有 ID。那么如何使用作业 ID 启用它呢？还有其他要执行的命令吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T22:52:37.193

较旧的 DBMS_JOBS 有 ID，而不是调度程序的 ID。即你可能想要这个（如果你在 DBA_JOBS 视图中看到你的工作）：

```
begin
  dbms_job.broken(23, true);
  commit;
end;
/ 
```

# c++ - 如何排除故障：未定义对“非虚拟 thunk to ...”的引用

> ID：14148380
> 
> 赞同：5
> 
> 时间：2013-01-03T22:36:58.297
> 
> 标签：c++, g++

我试图弄清楚如何进一步解决这个问题。如果有意义的话，我还想知道如何安装更新版本的 ld 。所有涉及的包管理器都告诉我，我是最新的。

该代码在 ubuntu 12.04 和 12.10 上使用 g++ (4.7.2) 编译、链接和运行，但在 FC17 上编译失败并出现此错误。

```
ArchiveServiceLib/debug-posix/libArchiveLib.a(NamedIflTiffCache.o):(.rodata._ZTV26UnlockingGenericFileHandle[_ZTV26UnlockingGenericFileHandle]+0x58): undefined reference to `IHawk::EncryptedHandle::OnNewSecretKey(IHawk::IHPGP::SecretKey&)'
ArchiveServiceLib/debug-posix/libArchiveLib.a(NamedIflTiffCache.o):(.rodata._ZTV26UnlockingGenericFileHandle[_ZTV26UnlockingGenericFileHandle]+0x8c): undefined reference to `non-virtual thunk to IHawk::EncryptedHandle::OnNewSecretKey(IHawk::IHPGP::SecretKey&)' 
```

ld 的版本：

```
12.04 only reports          2.22   (no indication other than 2.22)
12.10 reports               2.22.90.20120924
fedora17 reports            2.22.52.0.1-10.fc17 20120131 
```

g++ 的版本：

```
Ubuntu 12.04    (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3
Ubuntu 12.10    (Ubuntu/Linaro 4.7.2-2ubuntu1) 4.7.2
FC 17           (GCC) 4.7.2 20120921 (Red Hat 4.7.2-2) 
```

包含此方法的所有类的声明都说：

```
../Include/IHawkLib/IHPGP.h:            virtual bool OnNewSecretKey( SecretKey &skey ) = 0;
../Include/IHawkLib/PgpPkidParser.h:            virtual bool OnNewSecretKey( SecretKey &skey )                  {return true;}
../Include/IHawkLib/EncryptedFileHandle.h:              virtual bool OnNewSecretKey( SecretKey &skey ); 
```

但这就像 g++ 忘记将虚拟部分传递给 ld 以便它可以在链接/ld 时间解决它。这似乎发生在 2002 年和 2009 年，也许还有其他几次，但在这种情况下，较新的版本似乎已经解决了这个问题。这一次，它似乎是特定于平台的，考虑到它不满意的代码，这毫无意义。

构建错误来自的用法是：

```
 std::auto_ptr<IHawk::EncryptedFileHandle> apTmgHandle (GetFileHandle(filename, true, false, pKeyServer));
    if (apTmgHandle.get()){ 
```

类派生看起来像：

```
class EncryptedFileHandle : public EncryptedHandle {
....
    // Does not mention OnNewSecretKey
....
}

class EncryptedHandle : public IHawk::GenericHandle, protected IHawk::IHPGP {
....
    virtual bool OnNewSecretKey( SecretKey &skey );  // Has a concrete implementation
....
}

class IHPGP {
....
    virtual bool OnNewSecretKey( SecretKey &skey ) = 0;
....
}

class GenericHandle {
....
    // Has no clue about OnNewSecretKey
....
} 
```

链接器命令在所有平台上都是这样的，我们正在使用 scons 并且到目前为止已经能够与平台无关....（对不起，长线，只是不想冒险把它弄乱一个错字：

```
g++ -o debug-posix/ArchiveService -g debug-posix/StdAfx.o debug-posix/ArchiveService_PosixMain.o debug-posix/WebCommands.o -L/usr/local/lib -L/usr/lib/mysql -L/home/mjones/C++/ifl/src/IHDB/debug-posix -L/home/mjones/C++/ifl/src/IHDB -L/home/mjones/C++/ifl/src/XMLib/debug-posix -L/home/mjones/C++/ifl/src/XMLib -L/home/mjones/C++/ifl/src/IHawkLib/debug-posix -L/home/mjones/C++/ifl/src/IHawkLib -L/home/mjones/C++/ifl/src/ImageCore/debug-posix -L/home/mjones/C++/ifl/src/ImageCore -L/home/mjones/C++/ifl/libraries/z39.50/ZExtensions/debug-posix -L/home/mjones/C++/ifl/libraries/z39.50/ZExtensions -L/home/mjones/C++/ifl/src/ServerGuts/debug-posix -L/home/mjones/C++/ifl/src/ServerGuts -L/home/mjones/C++/ifl/libraries/CRUSHER/debug-posix -L/home/mjones/C++/ifl/libraries/CRUSHER -L/home/mjones/C++/ifl/libraries/jsoncpp/debug-posix -L/home/mjones/C++/ifl/libraries/jsoncpp ArchiveServiceLib/debug-posix/libArchiveLib.a -lIHDB -lXMLib -lIHawk -lImageCore -lZExtensions -lServerGuts -lCrusher -ljson -lboost_filesystem-mt -lboost_thread-mt -lboost_regex-mt -lz -lMagickWand -lcrypto++ -lcppunit -llog4cplus -lyaz -lpodofo -lmysqlclient -lxerces-c -ljpeg -lpng -ltiff 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T22:52:50.833

解决问题的第一步是找到`IHawk::EncryptedHandle`定义的位置。这可以`nm`在目标文件上使用，例如：

```
nm -po *.o | c++filt | grep IHawk::EncryptedHandle | grep -v ' U ' | less 
```

如果定义来自某个库，您可以添加相应的库或在相应的目录中使用`*.a`和。`*.so`一旦符号被定位并在库中（由于未定义的引用来自库，丢失的符号也很可能在库中），您需要确保在引用它的那个。自从我看到它发生以来已经有一段时间了，但是如果该符号来自同一个库，您可能需要`ranlib`在该库上运行。

# wcf - WCF、Windows 应用商店应用和可靠会话

> ID：14148384
> 
> 赞同：0
> 
> 时间：2013-01-03T22:37:11.547
> 
> 标签：wcf, windows-store-apps, reliablesession

是否可以在 Windows 应用商店应用程序中使用 WCF 可靠会话？

我正在使用 C# 在 Visual Studio 2012 Professional 中编写一个 Windows 应用商店应用程序。我正在尝试使用会话访问 WCF 服务。我不能使用 WSHttpBinding，因为 Windows 应用商店应用程序不支持它。我发现 Windows 应用商店应用程序确实支持 NetHTTPBinding，它支持可靠会话，但我似乎无法访问绑定的 ReliableSession 属性，也无法访问将“bool可靠会话启用”作为参数的构造函数。

是否有任何支持 Windows 应用商店应用会话的绑定？

-乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T06:05:20.007

如[文档](http://msdn.microsoft.com/en-us/library/windows/apps/system.servicemodel.nethttpbinding.reliablesession.aspx)（版本信息部分）所述，`ReliableSession`属性不适用于 Windows 应用商店应用程序，即不支持 WCF 可靠会话。

[本文](http://msdn.microsoft.com/en-us/library/hh556233.aspx)介绍了 Windows 应用商店应用程序中可用的 WCF 功能的完整子集。虽然`NetHttpBinding`包括在内，`ReliableSessionBindingElement`但不是。

# entity-framework - EntityFramework 如何：从表中选择 Max(Column)、Count(*)

> ID：14148385
> 
> 赞同：1
> 
> 时间：2013-01-03T22:37:13.650
> 
> 标签：entity-framework

> **可能重复：**
> [在一个 LINQ 查询中获取两列的总和而不进行分组](https://stackoverflow.com/questions/10239987/get-sum-of-two-columns-in-one-linq-query-without-grouping)

如何使用 EF 在一次通话中选择 Max 和 Count？

```
Select Max([Column]), Count(*) from [Table] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T00:05:29.450

我认为你可以伪造它分组`0`。SQL Server 将看穿该常量 group-by 并消除它。它没有运行时成本。

问题是：EF 会正确地将其转换为 SQL 吗？鉴于跟踪记录（与良好的旧可信赖 LINQ to SQL 相比！）这是值得怀疑的。

# x11 - 配置：错误：在 Mountain Lion 中找不到 X11 库

> ID：14148387
> 
> 赞同：1
> 
> 时间：2013-01-03T22:37:24.150
> 
> 标签：x11, osx-mountain-lion, configure

我正在尝试安装[http://www.ucm.es/info/Astrof/software/rmodel/rmodel.html中描述的 FORTRAN 程序 rmodel](http://www.ucm.es/info/Astrof/software/rmodel/rmodel.html)

./configure 失败并出现以下错误：

```
phym-ssweet2:rmodel-3.2.0 seasto$ sudo ./configure F77=gfortran
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... ./install-sh -c -d
checking for gawk... no
checking for mawk... no
checking for nawk... no
checking for awk... awk
checking whether make sets $(MAKE)... yes
checking whether the Fortran 77 compiler works... yes
checking for Fortran 77 compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU Fortran 77 compiler... yes
checking whether gfortran accepts -g... yes
checking uname -s for detecting host operating system... Darwin
LDFLAGS set to... -L/opt/local/lib
checking for style of include used by make... GNU
checking for gcc... gcc
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking dependency style of gcc... none
checking for main in -lX11... no
configure: error: X11 library not found 
```

我尝试使用 ./configure 指向库`export CPPFLAGS=-I/opt/X11/include`，`export CPPFLAGS=-I/opt/X11/include LDFLAGS=-L/opt/X11/lib`但无济于事。（来自 Mountain Lion X11 库的这些建议[不能 ./configure](https://stackoverflow.com/questions/12027868/mountain-lion-x11-libraries-cant-configure)和[Mountain Lion rvm install 1.8.7 x11 错误](https://stackoverflow.com/questions/11664835/mountain-lion-rvm-install-1-8-7-x11-error)）

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T22:56:34.783

这有效：`./configure F77=gfortran LDFLAGS=-L/opt/X11/lib`. 看来关键是不要编辑 CPPFLAGS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:19:26.273

查看 config.log，您应该能够看到用于测试 X11 (conftest.c) 的程序的编译/链接行以及失败的原因。

# eclipse - Mac OS X 上的 Eclipse：快捷方式已损坏

> ID：14148393
> 
> 赞同：3
> 
> 时间：2013-01-03T22:37:40.573
> 
> 标签：eclipse, macos, keyboard-shortcuts

我对 Eclipse 很陌生，因为我开始学习 Java 编程。我的编辑器有问题。

我在带有德语键盘的 iMac 上运行 Eclipse。*“重做”*操作的键盘快捷键是`Cmd`+ `Shift`+ `Z`。当我使用此快捷方式时，右下角会弹出一个小窗口，询问我是要*“检查”*还是*“重做”* ...

在首选项中，我有三个不同的*"Inspect"*，（只有一个带有快捷方式，但它类似于`Cmd`++ `Shift`）`I`。不管怎样，我把它擦掉了。

之后我又试了一次，但同样的小窗口要求我输入*Insect*或*Redo*。现在我不知道该怎么办。

我对`Cmd`+ `R`（*“运行”*操作）有同样的问题。对于“运行”，还有另一个键盘绑定。

在 Eclipse 首选项中，我找不到位于相同快捷方式上的两个命令。或者更好的是我找到了它们，但它们是分开的。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-07-23T19:43:06.643

转到键盘快捷键首选项：

> Eclipse > 首选项 > 常规 > 键

解绑或重新绑定任何给你带来麻烦的东西。

在您的情况下，请转到并删除++的`Inspect`绑定。`Cmd``Shift``Z`

在某些情况下，删除键命令的绑定将删除它的所有绑定，所以在你这样做之后，检查`Redo`并确保它仍然与命令绑定。

# heroku - 使用 Meteor 启用 Gzip 压缩

> ID：14148395
> 
> 赞同：5
> 
> 时间：2013-01-03T22:37:48.323
> 
> 标签：heroku, gzip, meteor

使用 Meteor 时是否有一种通用的方法来启用 gzip 压缩，无论它是在本地、meteor.com 还是 heroku 上托管？如果我只想在我的 heroku 托管的 Meteor 应用程序上进行 gzip 压缩，那怎么能启用呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T03:04:23.227

在本地运行 Meteor 时，似乎没有使用 Gzip 压缩。

当您执行`meteor bundle`命令时，生成的包包含一个服务器，该服务器默认使用“gzippo”连接中间件 [1] 执行 gzip 压缩。

您可以通过解压缩 tarball 并编辑 server/server.js 来查看（和修改）服务器文件。

[1] [http://tomg.co/gzippo](http://tomg.co/gzippo)

# php - PHP 简单 BB 代码 - 结束格式化

> ID：14148399
> 
> 赞同：1
> 
> 时间：2013-01-03T22:37:59.517
> 
> 标签：php, replace, bbcode

我正在尝试为我的论坛创建一个简单的 BB 代码，例如 PHP 中的脚本。问题是，我不确定如何阻止用户发布这样的内容..

```
[b] Hahah
[b] Will make all of your text
[b] on this page bold 
```

这将显示（因为我正在替换单词）

```
<strong> Hahah
<strong> Will make all of your text
<strong> on this page bold 
```

什么是防止这种情况并在帖子底部结束标签的好方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T22:47:18.443

用 HTML 替换 BBCode 实际上并不像看起来那么容易。仅仅使用`str_replace()`永远不够好。因为，正如你所说，人们只能放置打开的标签，这样就可以改变你的布局。一个流行的“解决方案”是使用`preg_replace()`与打开和关闭标签匹配的正则表达式。但是，这对于 BBCode 标记`[url]`（例如，您可以在这些 URL 标记中插入 JavaScript）是非常不安全的。

但是，有一些库非常适合替换 BBCode。[StringParser_BBCode](http://www.christian-seiler.de/projekte/php/bbcode/index_en.html)就是其中之一。这些库不仅仅是替换。例如，它们通常会阻止畸形的 BBCode 之类`[b][i]foo[/b][i]`的变成`<strong><em>foo</strong></em>`（即畸形的 HTML）。而且，他们可以在防止 XSS 注入方面做得更多。

# c# - 查看 MVC4 应用程序的一瞥时间线时，开始请求中会发生什么？

> ID：14148405
> 
> 赞同：0
> 
> 时间：2013-01-03T22:38:37.550
> 
> 标签：c#, asp.net-mvc-4, glimpse

我是新手，也是 MVC4 的新手。

我正在尝试查看整个 MVC 应用程序的时间线，以简化我的应用程序中可能占用太多时间的区域。

我注意到的是，我的一些观点显示了开始请求和执行：授权过滤器之间的大量时间。所以，我的开始请求从 0 毫秒开始，持续时间为 0，但是我的示例中的执行：授权过滤器显示从 23 毫秒开始，那么为什么两者之间有 23 毫秒的差距？

我上传的示例远没有我查看的一些痕迹那么激烈，我看到一个在上面提到的两者之间有 1500 毫秒的差距。

关于什么会导致这样的事情的任何想法？

![在此处输入图像描述](../Images/312b51ff279c433fe99c97464fe0a68a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T22:57:16.623

在请求开始和正在执行的执行过滤器之间可能会发生很多事情。

Glimpse 并未显示每个方法及其执行时间，因为您需要像[Ants Performance Profiler](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/)这样的真正分析器。

如果您想了解所有详细信息，我建议您使用该工具，如果您只想以一种轻量级的方式查看给定请求中占用时间的内容，我建议您使用 Glimpse。

# datetime - 获取 SymLink 目标的 LastWriteTime

> ID：14148406
> 
> 赞同：1
> 
> 时间：2013-01-03T22:38:39.817
> 
> 标签：datetime, powershell

`(Get-Item $SymLink).LastWriteTime`返回的是 SymLink 的最后修改时间，而不是目标的修改时间。

如何获取目标的最后修改时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T08:48:50.877

似乎没有直接的方法，因此现在必须分两步完成-

1.  获取SymLink 目标 的*路径*
2.  从目标路径获取 LastWriteTime

要确定它是否是符号链接：[检查 SymLink](https://stackoverflow.com/a/818054/483588) - PowerShell
获取路径：

1.  使用`Dir`命令的*摘要*输出 - 可以从中截取目标信息 - 使用 RegEx。
2.  或使用本机 API 调用：[GetFinalPathNameByHandle](http://msdn.microsoft.com/en-us/library/aa364962%28VS.85%29.aspx)；请参阅：[从 PS 调用非托管代码](https://stackoverflow.com/a/142516/483588)

# c++ - 将目标 C 协议转换为 C++ 中的等效协议

> ID：14148407
> 
> 赞同：0
> 
> 时间：2013-01-03T22:38:40.840
> 
> 标签：c++, objective-c

我正在将游戏从 Obj-C 移植到 C++。并停留在我必须将 Obj-C 协议转换为 C++ 中的等效协议的地方。我很困惑在 C++ 中实现相同功能的正确方法应该是什么。

请指教。

```
@protocol A <NSObject>

    -(void) B:(NSObject*)data;

@end

@interface callBack: NSObject
{
    id<A*> delegate;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T23:22:47.327

您可以实现类似于使用纯`virtual`方法创建类的协议。符合该协议将需要覆盖这些方法。

“协议”声明

```
class ImageDelegate {
    public:
        virtual void getImage(UIImage *) = 0;
} 
```

`ImageDelegate*`然后像你一样引用`id<ImageDelegate>`

```
class ResInfoCallback : public NSObject {
    public:
       ImageDelegate *delegate;
} 
```

最后，您需要一个实现“协议”的类，这意味着覆盖`virtual`“协议”类的纯方法。

```
class YourClassConformingToTheProtocol : public ImageDelegate {
    public:
        virtual void getImage(UIImage *image) {
            //do stuff
        }
} 
```

最后，**请**使用大写的类名称。

# c - C代码中没有重复

> ID：14148408
> 
> 赞同：-4
> 
> 时间：2013-01-03T22:38:42.267
> 
> 标签：c

我想知道为什么这个 C 代码可以在没有任何重复的情况下工作，`p`因为它也会更新，但是如果我`w`输入`ind_w[i]`它需要重复？

```
#include<stdio.h>
#include<string.h>
#define MAX 132
#define MAXW 30
int Len_w[MAXW];
int Max_V(int vf[], int len);
main()
{
    char s[MAX+1], w[MAXW], *Ind_w[MAXW],*p,out[MAXW];
    int k=0, i=0, Maximum, g=0;
    p=s;
    printf("\nInsert the line....\n");
    fgets(s,MAX,stdin);

    while(sscanf(p,"%s%n",w,&k)==1){
        Len_w[i] = strlen(w);
        Ind_w[i] = p;
        p+=k;
        i++;
    }
    Maximum = Max_V(Len_w,i+1);

    for(g=0;g<=i;g++){
       if(Len_w[g] == Maximum){
           sscanf(Ind_w[g],"%s",out);
           printf("\n%s",out);
       }
    }
    return 0;
}
/*----------------------------------------------------------------------------*/
int Max_V(int vf[], int len)
{
    int j; int Max=0;
    Max=vf[0];
    for(j=0;j<len;j++)
    {
        if(vf[j]>Max)
        {
            Max=vf[j];
        }
    }
    return Max;
}
/*----------------------------------------------------------------------------*/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T22:46:26.777

```
p=s;

while(sscanf(p,"%s%n",w,&k)==1){
    Len_w[i] = strlen(w);
    Ind_w[i] = p;
    p+=k;
    i++;
} 
```

`sscanf`指向将扫描的字写入每次调用更改的起始位置的指针。所以单词一个接一个地存储在 中`w`，单词开始的位置（在数组`s`中）存储在 中`Ind_w`。

如果你存储

```
Ind_w[i] = w; 
```

您始终存储相同的地址，即`char`.`w`

# excel - Excel：替代 CEILING 以四舍五入到最接近的值

> ID：14148409
> 
> 赞同：2
> 
> 时间：2013-01-03T22:38:41.123
> 
> 标签：excel, windows-phone-7, excel-formula, ceil

通常我会问关于工作的事情，所以这里有一些不同的东西。为了尽可能以最讨厌的方式完成我的新年计划，我正在一个 excel 文件中创建一个健身计划。我会做斜坡组，这意味着我每组增加10%的重量。我使用的公式允许输入基本重量（例如上周的最大重量），并计算所有之前的组，四舍五入，向上或向下，到最接近的 2.5 公斤（酒吧每侧 1.25 公斤的盘子；可用的最小增量）。

```
=CEILING(($B13 - ($A$2 * 0.1)) - 1.25, 1.25 * 2) 
```

在这个公式中，B13 是这一组之后的下一组，A2 是基重。所以每组比后面的组少 10% 的基础重量，通过 CEILING 函数四舍五入到最接近的 2.5kg。

关键是：我要随身携带的设备是 Windows Phone 7（我知道，我知道！）。它的 Excel 程序显然不支持 CEILING 功能（或 FLOOR）。有没有办法使用支持的公式来实现这一点，根据 MS Support 的说法是：

> ABS, ACOS, AND, ASIN, ATAN, ATAN2, AVERAGE, CHOOSE, COLUMNS, CONCATENATE, COS, COUNT, COUNTA, COUNTBLANK, COUNTIF, DATE, DATEVALUE, DAVERAGE, DAY, DCOUNT, DCOUNTA, DDB, DEGREES, DGET, DMAX, DMIN, DPRODUCT, DSTDEV, DSTDEVP, DSUM, DVAR, DVARP, ERROR.TYPE, EXACT, EXP, FACT, FIND, FV, HLOOKUP, HOUR, IF, INDEX, INT, IRR, ISBLANK, ISERR, ISERROR, ISLOGICAL, ISNA, ISNONTEXT, ISNUMBER, ISTEXT, LEFT, LEN, LN, LOG, LOG10, LOOKUP, LOWER, MATCH, MAX, MID, MIN, MINUTE, MOD, MONTH, N, NA, NOT, NOW, NPER, NPV, OR, PI, PMT、功率、乘积、适当、PV、弧度、兰德、等级、速率、替换、重复、右、圆、行、秒、SIN、SLN、SQRT、STDEV、STDEVP、替代、总和、SUMIF、SUMPRODUCT、SYD、 T、TAN、时间、TIMEVALUE、TODAY、TRIM、TRUNC、UPPER、VALUE、VAR、VARP、VLOOKUP、YEAR、FALSE 和 TRUE。

对于那些想知道的人，不，我发誓我没有听起来那么孤独。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T22:44:57.380

它应该与 ROUND 功能一起使用，不是吗？只需将您的值除以 2.5，将其四舍五入到最接近的整数，然后再乘以 2.5

# c++ - C++11 std::thread::detach 和访问共享数据

> ID：14148412
> 
> 赞同：13
> 
> 时间：2013-01-03T22:38:52.383
> 
> 标签：c++, multithreading, c++11

如果您在 a`std::thread`和主线程（或任何其他线程）之间有共享变量，即使您`thread::detach()`在创建线程后立即执行该方法，您仍然可以访问这些共享变量吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-03T23:00:21.453

是的！调用后仍然可以访问全局、​​捕获和传入的变量[`detach()`](http://en.cppreference.com/w/cpp/thread/thread/detach)。

但是，如果您正在调用 detach，很可能您希望从创建线程的函数返回，从而允许线程对象超出范围。如果是这种情况，您必须注意该函数的任何本地变量都没有通过引用或指针传递给线程。

您可以`detach()`将线程视为创建线程不需要任何本地的声明。

在下面的示例中，一个线程`int`在超出范围后继续访问起始线程的堆栈上的一个。这是未定义的行为！

```
void start_thread()
{
    int someInt = 5;
    std::thread t([&]() {
        while (true)
        {
            // Will print someInt (5) repeatedly until we return. Then,
            // undefined behavior!
            std::cout << someInt << std::endl;
        }
    });

    t.detach();
} 
```

这里有一些可能的方法来防止地毯从你的线下被扫出：

*   声明在`int`需要它的任何线程的生命周期内不会超出范围的地方（可能是全局的）。
*   将共享数据声明为 a[`std::shared_ptr`](http://en.cppreference.com/w/cpp/memory/shared_ptr)并将其按值传递给线程。
*   按值（执行副本）传递到线程中。
*   将右值引用（执行移动）传递到线程中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-03T22:44:15.900

是的。分离线程只是意味着它在完成后自行清理，您不再需要，也不允许`join`这样做。

# php - 用 jQuery 确定浏览器宽度，然后调用一个（两个中的一个）.php 文件（来自同一目录）以加载一行 PHP

> ID：14148420
> 
> 赞同：1
> 
> 时间：2013-01-03T22:39:44.990
> 
> 标签：php, jquery, magento

我寻求一种使用 jquery 调用 php 文件的简单方法。

最终结果与我正在开发的 Magento 网站有关： [http](http://bouquetsco.com/flowersplants.html) ://bouquetsco.com/flowersplants.html ^^This page

此页面显示产品：连续 3 个。

```
 <?php $this->setColumnCount(3); ?>
    <?php $this->setColumnCount(2); ?> 
```

^^此 php 代码手动设置产品列数。

默认情况下，页面显示为 3 宽，在浏览器窗口重新缩小到平板电脑宽度（760 像素左右）**之前，它看起来很好。**当网站的设计是平板电脑大小（760px 左右）时，我想只显示两列产品。

为此，似乎必须使用 javascript 来确定窗口宽度，然后根据浏览器窗口宽度运行一些 php 代码......比如

这个...

```
 if ( browser-window-widith > 760) { get '3-column.php' }
    else { get '2-column.php' } 
```

这过于简单化了。这个代码逻辑会是什么样子？如何编写此功能？

此外，可以将初始 if 语句更改为：

```
 if (browser-window-width < 760) { get '2-column.php' }
    else { get '3-column.php' } 
```

=====================================

将存在两个 .php 文件（2-column.php 和 3-column.php）每个包含：

```
 <?php $this->setColumnCount(2); ?> 
```

或者

```
 <?php $this->setColumnCount(3); ?> 
```

该代码将根据浏览器窗口宽度（由 javascript 找到）调用一个文件或另一个文件，从而导致

用于显示 > 760px 的 3 列产品列表

和

用于显示 < 760px 的 2 列产品列表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:00:52.280

**我在我网站的登录页面上使用它：**

```
if(!isset($_GET['width']))
    {
        echo '<script type="text/javascript">window.location = "' . $_SERVER['PHP_SELF'] . '?width="+screen.width+"&height="+screen.height;</script>';
    }
    else
        {
            $_SESSION['screen_width'] = $_GET['width'];
            $_SESSION['screen_height'] = $_GET['height'];
        } 
```

**现在宽度和高度都保存到当前会话中，我可以在显示页面划分之前进行条件检查。**

```
if($_SESSION['screen_width']>= '1400')
   {
      $this->setColumnCount(3);
   }
   else
       {
          $this->setColumnCount(2);
       } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T22:48:37.863

您可以使用 jquery 宽度和一些 ajax 调用。

## 索引.php

```
<html>
....
<div id="somedivport"></div>
<--! if that script is used the above div will load differently depending on the width-->
</html> 
```

## 脚本.js

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
$(document).ready(function() {
    //or use this$(document).width(); 
    $("#somedivport").load(width>$(window).width()?"/3-column.php":"/2-column.php");
});
</script> 
```

编辑以减少 kloc

# java - 无法从 Java 中的字符串解析日期 (java.text.ParseException)

> ID：14148421
> 
> 赞同：4
> 
> 时间：2013-01-03T22:39:48.677
> 
> 标签：java, date, locale, simpledateformat

我正在尝试解析描述日期的字符串（法语）：

```
String dateAParser="dim 6 janv 2013 07:40:00";

    SimpleDateFormat parseur = new SimpleDateFormat("EEE dd MMMM yyyy HH:mm:ss", Locale.FRENCH);
    try{
        Date dateAllerDepart= new Date();
        dateAllerDepart=parseur.parse(dateAParser);

        System.out.println(dateAllerDepart);
    }catch(Exception e){e.printStackTrace();} 
```

它给了我这些错误：

```
java.text.ParseException: Unparseable date: "dim 6 janv 2013 07:40:00"
at java.text.DateFormat.parse(DateFormat.java:357)
at TestAvecJsoup.main(TestAvecJsoup.java:109) 
```

我认为我的 SimpleDateFormat 对象是可以的，我搜索并尝试了很多东西来解决这个问题，所以我希望你能提供一些关于如何解决它的线索。提前谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T22:51:56.397

两个小的变化，在缩写后添加句点，并使用 3 Ms 而不是 4：

```
 final String dateAParser = "dim. 6 janv. 2013 07:40:00";
    final SimpleDateFormat parseur = new SimpleDateFormat("EEE dd MMM yyyy HH:mm:ss", Locale.FRENCH); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T22:51:11.487

日期字符串“dim”和月份的第一部分似乎是这里的问题，你确定它是正确的值吗？

这工作正常。

```
 String dateAParser="06 2013 07:40:00 AM";

        SimpleDateFormat parseur = new SimpleDateFormat("dd yyyy hh:mm:ss a", Locale.FRENCH); 
```

# java - 在线程之间传递信息的最佳方式是什么？

> ID：14148422
> 
> 赞同：31
> 
> 时间：2013-01-03T22:39:51.810
> 
> 标签：java, multithreading, sockets

我想在我的程序做其他事情的时候收听服务器，当从服务器收到一条消息时，我想解释它。

我知道线程，但不确定它是如何工作的。如果我有一个线程监听服务器，我如何将该数据传递给主线程进行解释？主线程向服务器发送数据的最佳方式是什么？同步修饰符有什么用？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-03T22:41:38.307

> 如果我有一个线程监听服务器，我如何将该数据传递给主线程进行解释？主线程向服务器发送数据的最佳方式是什么？

我会用[`BlockingQueue`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html)这个。您定义一个单一`BlockingQueue`的，例如[`LinkedBlockingQueue`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/LinkedBlockingQueue.html). 然后您的侦听器类调用`queue.take()`它将等待您的服务器调用`queue.put()`。它将所有同步、等待、通知等工作留给 Java 类，而不是您自己的代码。

> 同步修饰符有什么用？

我会做一些阅读以了解更多关于这一点的信息。这不是可以用简短的 SO 响应来回答的事情。[Java 并发教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/)是一个很好的起点。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-03T23:00:35.833

如果要在主线程和处理线程之间进行同步通信，可以使用[SynchronousQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/SynchronousQueue.html)。

思路是主线程通过调用将数据传递给处理线程`put()`，处理线程调用`take()`。两者都是阻塞操作。

请注意，如果您想发回结果，那么事情可能会变得更加复杂，因为主线程必须知道结果何时准备好。[CountDownLatch](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/CountDownLatch.html)是一个很好的原语。你可以做这样的事情。

首先让我们定义一个数据结构来传递数据：

```
public class MethodCall {

    public final String methodName;

    public final Object[] args;

    public final CountDownLatch resultReady;

    public Object result;

    public MethodCall(String methodName, Object[] args) {
        this.methodName = methodName;
        this.args = args;
        this.resultReady = new CountDownLatch(1);
    }

    public void setResult(Object result) {
        this.result = result;
        resultReady.countDown();
    }

    public Object getResult() throws InterruptedException {
        resultReady.await();
        return result;
    }
} 
```

定义队列以传递数据，两个线程都可以看到：

```
public SynchronousQueue<MethodCall> methodCalls = new SynchronousQueue<MethodCall>(); 
```

从主线程调用处理线程并等待结果：

```
MethodCall call = new MethodCall(methodName, args);
methodCalls.put(call);
Object result = call.getResult(); 
```

在处理线程中，例如在`run()`方法中，您可以执行以下操作：

```
for (;;) {
    MethodCall call = methodCalls.take();
    Object res = processStuff(call.methodName, call.args);
    call.setResult(res);
} 
```

在哪里`processStuff`实现你的逻辑。当然，您也应该处理异常，处理退出案例，更改`MethodCall`为具有比`methodName`and`args`和`Object`return 更具体的东西等。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-03T22:43:47.960

阅读一些教程以了解 Java 线程。

[http://www.journaldev.com/1079/java-thread-tutorial](http://www.journaldev.com/1079/java-thread-tutorial)

您的问题似乎类似于生产者-消费者模型，您可以使用 BlockingQueue 轻松完成此任务。

[Java 阻塞队列](http://www.journaldev.com/1034/java-blockingqueue-example-implementing-producer-consumer-problem)

# symfony-2.1 - 将现有用户实体与 FOSUserBundle 一起使用

> ID：14148431
> 
> 赞同：0
> 
> 时间：2013-01-03T22:40:26.560
> 
> 标签：symfony-2.1, fosuserbundle

我正在使用现有数据库，我想使用 FOSUser 的字段

我想使用属性“usuario”而不是“用户名”

我尝试登录，但出现此错误：

```
Unknown column 't0.username' in 'field list' 
```

如何在不重命名表字段的情况下完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:50:31.420

你可能已经想通了，但以防万一......

在您的 User.php 实体类 $id 变量中添加注释：

```
* @ORM\Column(name="usuario", type="string", length=12, nullable=true) 
```

并将类型、长度和可为空的值更改为对您有意义的任何值。

# php - Safari 中的 Xcode 本地 Web 应用程序

> ID：14148433
> 
> 赞同：-1
> 
> 时间：2013-01-03T22:40:45.123
> 
> 标签：php, iphone, xcode, web

我已经制作了一个使用本地服务器（Iphone 中的 Wampserver 和 Safari）运行的 Web 应用程序（php、javascript、css 文件），我想知道是否可以在 Xcode 4 中运行 php 文件（使用 UIWebView 或使用一个 UIApplication) ?

我期待着您的回复..

编辑：事实上，我想用 safari 运行我的 xcode 项目中包含的本地 php 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T22:50:09.517

这取决于您所说的“运行”是什么意思。

如果您询问是否可以将 PHP 脚本放入您的 iOS 应用程序并让它们运行，那么不，除非将 PHP 解释器移植到 iOS 并将该解释器嵌入您的应用程序中。

如果您询问是否可以在本地服务器上运行 PHP 脚本并让 iOS 应用程序访问它们，那么可以，只要设备可以连接到 Web 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T22:45:00.323

除非您移植解释器，否则它不会运行您的 PHP 代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T22:56:04.440

您可以使用 iOS Simulator 通过 a 访问 PHP 文件`UIWebView`，它将在服务器上执行。我认为这是您想要的答案。

如果您想在设备本身上运行 PHP 文件，这是不可能的。iOS 中没有 PHP 解释器。

# jquery - 绑定键事件以运行元素的 a href

> ID：14148435
> 
> 赞同：1
> 
> 时间：2013-01-03T22:40:51.420
> 
> 标签：jquery

我有这个代码

```
<script type="text/javascript">
                          function liveeditor()
{ mywindow = window.open("/h8-html-editor", "LiveEditor", "toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=900px,height=900px");
mywindow.moveTo(15, 15);
}
   </script> 
```

我想补充的是我相信来自 jQuery Docs

```
$('#target').keydown(function() {
  alert('Handler for .keydown() called.');
}); 
```

我将如何在上面的代码中实现它？我会基本上使用 .keydown 函数创建另一个代码，其中 mywindow = window.open 代码在警报所在的位置吗？

我尝试的代码只是没有从我上面发布的代码中获取事件`function liveeditor()`

```
$(function(){
   $(window).keydown(function(event){
  if (event.which == 67) {
       event.liveeditor();
    }
  if (event.which == 69) {
       event.colorpick();
    }
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T22:45:26.843

不知道你在问什么。也许答案是这样的？

```
$('#target').click(function() {
  liveeditor(); 
}); 
```

# c# - 停止对 WebBrowser 控件导航事件的操作

> ID：14148441
> 
> 赞同：0
> 
> 时间：2013-01-03T22:41:06.653
> 
> 标签：c#, action, webbrowser-control

我在 C# 中创建了一个小的 Win Form App 并添加了 WebBrowser 组件。我想要实现的是一个小应用程序，它可以从其中包含“自定义”协议的文件加载本地 html 页面，当然也可以导航到网址。

例如，我会在我的网页中有如下条目

`'<a href="Special://905">Close&nbsp;Company</a></TD></TR>'`这将在程序中打开一个任务。

我试图实现这一点的方式是通过如下所示的导航事件

```
 private void webBrowser_Navigating(object sender, WebBrowserNavigatingEventArgs e)
       {
        if ((webBrowser.StatusText.Contains("Special")))
         {
            //For some reason the stop doesn't do much it still tries to proceed to special:123
            //diplaying can not load page..
            webBrowser.Stop();

            //Launch program here.
            MessageBox.Show("Special Command Found");
         }
       } 
```

问题是它仍然导航并说它当然找不到页面。我将 Stop 与 GoBack 交换，由于某种原因，我第一次运行它时遇到了同样的问题，然后当我在浏览器中向后选择时，它从那里开始工作。

我还尝试了导航和使用 GoBack，除了在应用程序中闪退之外，该事件在第一次之后不再触发。

有没有人知道如何解决这个问题或我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-06T13:00:42.483

而不是使用 WebBrowser.Stop(); 只需设置 e.cancel = true;

# c# - 我如何（正确）从 EWS 继承类，例如约会？

> ID：14148449
> 
> 赞同：4
> 
> 时间：2013-01-03T22:41:49.727
> 
> 标签：c#, xml-serialization, exchange-server, exchangewebservices

与以下问题相同： [https ://stackoverflow.com/questions/11294207/exchange-web-services-argumentexception-using-my-own-contact-class](https://stackoverflow.com/questions/11294207/exchange-web-services-argumentexception-using-my-own-contact-class)

我正在尝试从 Microsoft.Exchange.WebServices.Data.Appointment 编写派生类。但是，如果不抛出看似序列化的错误，就无法保存派生类。即使我不对派生类进行任何修改，也会发生这种情况。

这有效：

```
public void CreateTestAppointment() {
        Appointment appointment = new Appointment(Exchange) {
            ItemClass = "IPM.Appointment", //Exchange Specific. Dont touch unless you     know what this does. I sure as hell don't.
            Subject = string.Format("{0} Test", "Oliver")
        };
        appointment.RequiredAttendees.Add("okane@cottinghambutler.com");
        appointment.Body = new MessageBody {
            Text = "Meeting invite body text placeholder"
        };

        //Add item to the appropriate categories
        appointment.Categories.Add(string.Format("[C]{0}", "Arbitrary Client Group"));

        // Add calendar properties to the appointment.
        appointment.Start = DateTime.Now.AddMinutes(10);
        appointment.End = DateTime.Now.AddMinutes(30);

        appointment.Save(Hc360CallCalendarFolderId, SendInvitationsMode.SendOnlyToAll);
    } 
```

但这不会：

```
 public void CreateTestAppointment() {
        InheritedAppointment appointment = new InheritedAppointment(Exchange) {
            ItemClass = "IPM.Appointment", //Exchange Specific. Dont touch unless you know what this does. I sure as hell don't.
            Subject = string.Format("{0} Test", "Oliver")
        };
        appointment.RequiredAttendees.Add("okane@cottinghambutler.com");
        appointment.Body = new MessageBody {
            Text = "Meeting invite body text placeholder"
        };

        //Add item to the appropriate categories
        appointment.Categories.Add(string.Format("[C]{0}", "Arbitrary Client Group"));

        // Add calendar properties to the appointment.
        appointment.Start = DateTime.Now.AddMinutes(10);
        appointment.End = DateTime.Now.AddMinutes(30);

        appointment.Save(Hc360CallCalendarFolderId, SendInvitationsMode.SendOnlyToAll);
    } 
```

这很奇怪，因为我实际上并没有在派生类中做任何事情。

```
 public class InheritedAppointment : Microsoft.Exchange.WebServices.Data.Appointment {
    public InheritedAppointment(ExchangeService serivce)
        : base(serivce) {

    }} 
```

看起来这正在被序列化为 XML，并且某些值为 null，但我终其一生都无法弄清楚它是什么。这是原始错误

> 测试名称：TestMeetingCreation 测试全名：Hc360LibTests.UnitTest1.TestMeetingCreation 测试源：c:\Users\okane\Documents\Visual Studio 2012\Projects\HealthCheck360OutlookCallScheduleHelper\Hc360LibTests\UnitTest1.cs：第 15 行测试结果：失败测试持续时间：0:00 :00.5728502
> 
> 结果消息：测试方法 Hc360LibTests.UnitTest1.TestMeetingCreation 抛出异常：System.ArgumentException：空字符串 '' 不是有效的本地名称。结果 StackTrace：在 Microsoft.Exchange.WebServices.Data.EwsServiceXmlWriter.WriteStartElement(XmlNamespace xmlNamespace, String localName) 在 Microsoft.Exchange.WebServices.Data.PropertyBag 的 System.Xml.XmlWellFormedWriter.WriteStartElement(String prefix, String localName, String ns) .WriteToXml(EwsServiceXmlWriter writer) 在 Microsoft.Exchange.WebServices.Data.CreateRequest `2.WriteElementsToXml(EwsServiceXmlWriter writer) at Microsoft.Exchange.WebServices.Data.ServiceRequestBase.WriteBodyToXml(EwsServiceXmlWriter writer) at Microsoft.Exchange.WebServices.Data.ServiceRequestBase.WriteToXml(EwsServiceXmlWriter writer) at Microsoft.Exchange.WebServices.Data.ServiceRequestBase.EmitRequest(IEwsHttpWebRequest request) at Microsoft.Exchange.WebServices.Data.ServiceRequestBase.BuildEwsHttpWebRequest() at Microsoft.Exchange.WebServices.Data.ServiceRequestBase.ValidateAndEmitRequest(IEwsHttpWebRequest& request) at Microsoft.Exchange.WebServices.Data.MultiResponseServiceRequest`1.Execute() 在 Microsoft.Exchange.WebServices.Data.ExchangeService.InternalCreateItems(IEnumerable `1 items, FolderId parentFolderId, Nullable`1 messageDisposition, Nullable`1 sendInvitationsMode, ServiceErrorHandling errorHandling)
> at Microsoft.Exchange.WebServices.Data.Item.InternalCreate(FolderId parentFolderId, Nullable`1 messageDisposition, Nullable`1 sendInvitationsMode) at Microsoft.Exchange.WebServices.Data.Appointment.Save(FolderId destinationFolderId, SendInvitationsMode sendInvitationsMode) at HealthCheck360ExchangeLib.CallSlotRepository.CreateTestAppointment() in c:\Users\okane\Documents\Visual Studio 2012\Projects \HealthCheck360OutlookCallScheduleHelper\HealthCheck360ExchangeLib\CallSlotRepository.cs：C:\Users\okane\Documents\Visual Studio 2012\Projects\HealthCheck360OutlookCallScheduleHelper\Hc360LibTests\UnitTest1.cs:第 17 行中 Hc360LibTests.UnitTest1.TestMeetingCreation() 的第 70 行

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T12:56:19.023

似乎无法保存继承的项目。

如果您深入了解 EWS 托管 API 的代码，您会发现序列化根据 ServiceObjectDefinitionAttribute 或方法 ServiceObject.GetXmlElementNameOverride 确定 XML 中的元素名称。[Appointment 类](http://msdn.microsoft.com/en-us/library/microsoft.exchange.webservices.data.appointment%28v=exchg.80%29.aspx)继承自 Item，而Item 又继承自 ServiceObject。Appointment 类还具有 ServiceObjectDefinitionAttribute 并使用 XML 元素名称“CalendarItem”进行序列化。

因此，要使用从 Appointment 继承的类，您需要在您的类上使用 ServiceObjectDefintionAttribute，或者您必须重写 GetXmlElementNameOverride。不幸的是 ServiceObjectDefintionAttribute 和 GetXmlElementNameOverride 是内部的，所以没有办法做到这一点。

问题是为什么要使用继承类？您是否期望 Exchange 能够保存您班级的属性？在这种情况下，您可能想看看 [ExtendedProperties](http://msdn.microsoft.com/en-us/library/exchange/dd633691%28v=exchg.80%29.aspx)。

**更新：**

如果您想将扩展属性公开为您自己的类上的真实属性，您可以通过委托给一个 Appointment 对象来实现。它并不完美，但它是一种选择：

```
public class ExtendedAppointment
{
    Appointment _appointment;

    public ExtendedAppointment(Appointment appointment)
    {
        _appointment = appointment;
    }

    public Appointment Appointment { get { return _appointment; } }

    public object SomeExtendedProperty
    {
        get 
        { 
            return _appointment.ExtendedProperties[0].Value;
        }

        set
        {
            _appointment.ExtendedProperties[0].Value = value;
        }
    }
} 
```

# php - PHP PDO 准备好的语句分号

> ID：14148452
> 
> 赞同：-3
> 
> 时间：2013-01-03T22:42:08.617
> 
> 标签：php, mysql, pdo

我有一个我自己无法回答的问题。我最近遇到了一个类似于用户在[为什么 PDO::lastInsertId 返回 0 的问题？](https://stackoverflow.com/q/6558885/1940466). 像那个用户一样，我的问题通过从 PDO 准备语句的末尾删除一个分号来解决。

我想知道是否有人可以向我解释为什么上面帖子中的准备好的语句不应该用分号来终止它们。我使用了许多带有分号的 PDO 准备语句，直到几天前才出现问题。我在 PDO 文档中找不到关于分号使用的任何内容，所以我对是否有关于是否使用分号的基本原则感到困惑。在准备好的语句中使用分号总是一个坏主意吗？如果是这样，为什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T23:02:40.273

> 我想知道是否有人可以向我解释为什么上面帖子中的准备好的语句不应该用分号来终止它们。

那会很难，因为实际上您所说的完全是*错误*的。以分号结尾的准备好的语句没有问题。

所以当你想知道的时候，不要再想了。关于分号没有什么可解释的。它只是一个分隔符。例如，我可以很好地运行以下准备：

```
$stmt = $conn->prepare('
INSERT INTO config (`option`) VALUES (:option);;;;;
');
$result = $stmt->execute([':option' => "Insert Option " . uniqid() ]); 
```

使`$result`存在`bool(true)`，行被插入。你还没有分享你的代码，所以很难说你做了什么，什么失败了，但是你可以看到分号甚至是为了好玩而堆叠起来。

> 我使用了许多带有分号的 PDO 准备语句，直到几天前才出现问题。

这清楚地表明分号实际上不是问题。否则，*所有*查询必须从一开始就已经失败。

> 我在 PDO 文档中找不到关于分号使用的任何内容，所以我对是否有关于是否使用分号的基本原则感到困惑。在准备好的语句中使用分号总是一个坏主意吗？如果是这样，为什么？

因为它是 SQL 的一部分。请查阅您正在使用的数据库服务器的 SQL 文档。它确实概述了使用分号的所有荣耀细节。只是这不是 PDO 本身的一部分，因此它没有记录在 PDO 中，而是记录在您的数据库服务器中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T22:43:26.173

我的代码中到处都是分号。

他们工作正常。

您的链接问题中接受的答案是**错误**的。

# objective-c - 如何从另一个方法访问类实例

> ID：14148456
> 
> 赞同：-1
> 
> 时间：2013-01-03T22:42:52.530
> 
> 标签：objective-c, class, methods, instance

这是我的代码：

```
#import "ViewController.h"

@implementation ViewController

- (void)viewDidLoad
{
  [super viewDidLoad];

  UIView *view1 = [[UIView alloc] initWithFrame:CGRectMake(50.0, 50.0, 0, 0)];
  [self.view addSubview:view1];
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [[event allTouches] anyObject];
    if([touch.view isEqual:self]) {
        CGPoint point = [[touches anyObject] locationInView:self];
        NSLog(@"%@",NSStringFromCGPoint(point));
        self.view1.center = point;
     }
} 
```

我希望能够从 touchesMoved 方法访问“UIView”类的实例“view1”。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T23:06:35.103

您可以按照其他答案中的说明声明局部变量。但是，我认为最好在匿名类别中声明私有属性，如下所示：

```
#import "ViewController.h"

@interface ViewController ()
@property (nonatomic, strong) UIView *view1; // declares view1 as a private property
@end

@implementation ViewController 
@synthesize view1 = _view1;

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.view1 = [[UIView alloc] initWithFrame:CGRectMake(50.0, 50.0, 0, 0)];
    [self.view addSubview:self.view1];
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [[event allTouches] anyObject];
    if([touch.view isEqual:self])
    {
        CGPoint point = [[touches anyObject] locationInView:self];
        NSLog(@"%@",NSStringFromCGPoint(point));
        self.view1.center = point;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T22:56:45.240

您可以`rect1`通过将其放在`.h`文件中来创建实例变量。您可以执行以下操作：

```
@interface tempViewController : UIViewController
{
      myRect *rect1;
} 
```

然后在您的`.m`文件中，您不必再次声明它。

# linux - LINUX for java中的字符编码

> ID：14148457
> 
> 赞同：0
> 
> 时间：2013-01-03T22:42:58.853
> 
> 标签：linux, encoding, character

我们今天不得不重新编译现有的 java 代码以更改在原始代码上硬编码的目录路径 java 在 LINUX 中使用以下命令行命令重新编译

> javac -verbose -classpath /data/flexapp/maxmind/api/GeoIPJava-1.2.8/source:. CityLookupTest2.java

我们看到使用新编译代码与旧编译代码产生的输出存在差异，字节差异似乎在于双字节或国际字符。请参阅下面的粗体代码

```
[flexapp@gaalplpclu02df pp]$ cat currtrackgeo.201301031445.run1|grep 1ZY9307E6894015571
01/03/2013 14:46:43.004,TrackHTML,1ZY9307E6894015571,,92.56.217.169,en_US,,ES,51,VÃ©lez-mÃ¡laga,null,36.7726,-4.100403,0,0

[flexapp@gaalplpclu02df pp]$ cat currtrackgeo.201301031445|grep 1ZY9307E6894015571
01/03/2013 14:46:43.004,TrackHTML,1ZY9307E6894015571,,92.56.217.169,en_US,,ES,51,V?lez-m?laga,null,36.7726,-4.100403,0,0 
```

我尝试使用以下编码参数，但都导致相同的输出

```
-encoding ISO-8859-1
-encoding ISO-8859-2
-encoding UTF-8 
```

最初的程序员已经离开了，并且没有关于之前如何编译旧代码的文档。您认为这是一个用于将所有双字节字符替换为的编码参数吗？从 Ã 在这个例子中。

希望您能提供帮助，因为我不想将我的用户社区与专栏上的新变体混淆

# android - 单击按钮后膨胀选项列表

> ID：14148459
> 
> 赞同：0
> 
> 时间：2013-01-03T22:43:12.753
> 
> 标签：android

单击某个按钮后，我想增加一个像这样的选项列表。

![在此处输入图像描述](../Images/069724bb5a20aa7eeaf5697ecff10320.png)
我不喜欢称它为选项菜单，因为我没有按下“菜单”按钮。我希望这些项目像上面的一样列出..

是否可以使用相同的 .xml 文件来为我的案例创建选项菜单充气器？

```
 <?xml version="1.0" encoding="utf-8"?>
    <menu xmlns:android="http://schemas.android.com/apk/res/android" >

        <item
            android:id="@+id/first_menu_item"
            android:title="First Menu Item">
        </item>
        <item
            android:id="@+id/second_menu_item"
            android:title="Second Menu Item">
        </item>
        <item
            android:id="@+id/third_menu_item"
            android:title="Third Menu Item">
        </item>
        <item
            android:id="@+id/fourth_menu_item"
            android:title="Fourth Menu Item">
        </item>

</menu> 
```

我希望一些专家可以帮助我实现我真正想做的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T22:48:52.747

这是一个弹出菜单，记录在 API 指南中。

但是，根据您要执行的操作，它可能与 Android 设计指南不一致。我鼓励您尽可能遵循这些指南，因为这将使您的应用程序更易于使用。随着用户看到越来越多的应用程序 UI 一致性，Android 本身变得更易于使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T23:05:12.910

您可以使用[`ContextMenu`](http://developer.android.com/reference/android/view/ContextMenu.html).

活动和片段具有`registerForContextMenu()`并`onCreateContextMenu()`快速实施其中之一。如果您想使用常规 OnClickListener 打开 ContextMenu（而不是等待长点击事件），您可以[`openContextMenu()`](http://developer.android.com/reference/android/app/Activity.html#openContextMenu%28android.view.View%29)直接使用。有关详细信息和示例代码，
请参阅[菜单开发人员指南。](http://developer.android.com/guide/topics/ui/menus.html#context-menu)

如果您使用 API 11+，则可以使用[PopupMenu](http://developer.android.com/reference/android/widget/PopupMenu.html)，菜单指南中也对此进行了描述。

# ruby-on-rails - 带有 Rails / Lazy_High_Charts 的未定义方法“年”

> ID：14148463
> 
> 赞同：1
> 
> 时间：2013-01-03T22:43:42.100
> 
> 标签：ruby-on-rails, strftime, lazy-high-charts

我对 Rails 很陌生，我正在尝试在lazy_high_charts 中设置 pointStart 日期，以从我的数据库表中提取 created_at 日期。尝试格式化日期时出现以下错误，但我不确定原因：

`undefined method 'year' for "Nov 13, 2012":String`

这是我的控制器#index：

```
def index
authorize! :index, @user, :message => 'Not authorized as an administrator.'

@date = User.pluck(:created_at).first

@count = User.pluck(:sign_in_count)

@h = LazyHighCharts::HighChart.new('graph') do |f|
f.options[:title][:text] = "Number of Logins"
f.options[:chart][:defaultSeriesType] = "area"
f.options[:chart][:inverted] = false
f.options[:chart][:zoomType] = 'x'
f.options[:legend][:layout] = "horizontal"
f.options[:legend][:borderWidth] = "0"
f.series(:pointInterval => 1.day, :pointStart => @date.strftime("%b %d, %Y"), :name => 'Logins', :color => "#b00000", :data => @count)
f.options[:xAxis] = { :minTickInterval => 24 * 3600 * 1000, :type => "datetime", :dateTimeLabelFormats => { day: "%b %e"}, :title => { :text => nil }, :labels => { :enabled => true } }
  end
end 
```

我已经搞砸了一段时间，这是我能得到的最接近的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T22:48:16.287

您正在传递一个字符串，您应该在其中传递一个日期。

你可以试试这个：

```
f.series(:pointInterval => 1.day, :pointStart => @date, :name => 'Logins', :color => "#b00000", :data => @count) 
```

# c# - 用于处理 HTTP GET 请求的 WCF 服务

> ID：14148469
> 
> 赞同：2
> 
> 时间：2013-01-03T22:44:00.130
> 
> 标签：c#, wcf, .net-4.0

我需要创建一个 WCF 服务，该服务位于服务器（托管在 IIS 中）上，并侦听在某个 URL 上访问服务器的任何 HTTP GET 请求。

更具体地说，当有效的 GET 请求到达服务器时，我想检查 URL 中编码的参数。

以下是我的界面的代码：

```
[ServiceContract]
public interface IHttpHandler
{
    [OperationContract(Action = "*", ReplyAction = "*")]
    void HandleMessage(Message m);

    [OperationContract]
    [WebInvoke(UriTemplate = "HandleEchoRequest", Method = "GET")]
    string HandleEchoRequest(Stream request);
} 
```

实现代码（svc.cs文件）：

```
public void HandleMessage(Message m)
{
    //do some work
}

public string HandleEchoRequest(Stream request)
{
    //...do something here
    return "asdf";
} 
```

我可以成功命中 SVC：

```
http://localhost/HttpMessageProcessor/HttpHandler.svc 
```

但是，当附加到 W3WP 进程时，我似乎无法进入断点集。最终我想使用 HTTPS。

我在 WCF 服务项目中的 web.config 文件：

```
 <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer> 
```

客户端中的 App.config：

```
<system.serviceModel>
    <behaviors>
      <endpointBehaviors>
        <behavior name="webBehavior">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBinding_IHttpHandler" />
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://localhost/HttpMessageProcessor/HttpHandler.svc"
        behaviorConfiguration="webBehavior" binding="webHttpBinding"
        contract="Proxy.IHttpHandler" name="BasicHttpBinding_IHttpHandler" />
    </client>
  </system.serviceModel> 
```

客户端代码：

```
using (var service = new Proxy.HttpHandlerClient())
{
}

Console.ReadKey(); 
```

我尝试了两件事来查看是否可以进入代码： 1\. 点击`CTRL+F5`控制台项目以启动客户端，然后查看是否可以附加到 W3WP 进程。2.在调试模式下运行客户端，看看我是否可以指向一个URL，例如：

```
http://localhost/HttpMessageProcessor/HttpHandler.svc/HandleEchoRequest/ 
```

以上方法似乎都不起作用。

我已经在网上浏览了一些建议并尝试了一些东西，并且我依赖于我在这里提到的代码。欢迎任何建议/想法！

**编辑** 我遇到了[这个](http://social.msdn.microsoft.com/forums/en-US/wcf/thread/817bfbd7-82ef-4210-aa44-ac076540a540/)网站并实施了一个简单的解决方案，如下所示。当我在浏览器中输入以下 URL 时，我可以成功命中 HandleMessage 实现中设置的断点：

```
http://localhost/TestWCFSite/TestWCFService.svc/HandleMessage 
```

代码：

```
 [ServiceContract]
 public interface IService1
 {
     [OperationContract(Action = "*", ReplyAction = "*")]
     void HandleMessage(Message m);
 }

 public class Service1 : IService1
 {
     public void HandleMessage(Message m)
     {
        //do something here.
     }
 } 
```

服务的 App.config：

```
<system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="True"/>
          <serviceDebug includeExceptionDetailInFaults="False"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel> 
```

我的客户代码：

```
Uri baseAddress = new Uri("http://localhost/TestWCFSite/TestWCFService.svc/");
Uri endpointAddress = new Uri("http://localhost/TestWCFSite/TestWCFService.svc/HandleMessage/");
var binding = new CustomBinding(new TextMessageEncodingBindingElement(MessageVersion.None, Encoding.UTF8), new HttpTransportBindingElement());
ServiceHost service = new ServiceHost(typeof(Service1), baseAddress);
service.AddServiceEndpoint(typeof(IService1), binding, endpointAddress);
service.Open();

var message = string.Format("Service open at {0} - press a key to continue", baseAddress);

Console.WriteLine(message);
Console.ReadKey();
service.Close(); 
```

我现在的问题是尝试在 IIS 中托管它并让它处理断点命中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T22:49:11.977

假设您使用的是 Visual Studio - 如果您通过 Tools->Attach to Process... 附加会发生什么？

只是为了仔细检查，我假设您是从 WCF 服务项目而不是客户端项目附加的？（我很抱歉做出这个回答，我的代表太低了，无法发表评论。）

# c++ - 从 .NET Web 应用程序调试 bad_alloc 异常

> ID：14148471
> 
> 赞同：0
> 
> 时间：2013-01-03T22:44:17.883
> 
> 标签：c++, debugging, visual-studio-2008, unmanaged, bad-alloc

我正在将 Visual C++ 桌面应用程序转换为 .NET Web 应用程序。在这样做时，我试图保留最初在桌面应用程序中使用的后端 Visual C++ dll。为了从这些 dll 中删除全局变量，我遇到了 bad_alloc 异常的问题。这个异常似乎是随机出现的，我正在尝试使用许多 try/catch 在较低级别的代码中查明它。我尝试了以下方法，但运气不佳：

1) 从 Debug->Exceptions 启用 C++ 异常。（异常被捕获，但是调用堆栈在定位导致问题的变量甚至函数方面没有帮助）。2) 尝试在 DebugDiag 中为 VS 调试器 Web 服务器进程创建内存泄漏规则。（没有发现泄漏）。

跟踪此问题的任何其他策略都将非常有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T23:05:14.140

通常 C++ 运算符 new() 调用 C malloc() 函数。当 malloc() 返回 0 时，运算符 new 会抛出 bad_alloc。 malloc() 可能会返回 0，因为内存不足或堆损坏。

# javascript - 在 Dojo 中切换 div 的显示在 Google Chrome 中无法正常工作

> ID：14148472
> 
> 赞同：0
> 
> 时间：2013-01-03T22:44:28.140
> 
> 标签：javascript, html, css, google-chrome, dojo

我正在使用 Dojo 和 CSS 打开和关闭 HTML div，但我只在 Google Chrome 中得到了一个奇怪的结果（在 IE8+ 和最新的 FireFox 中一切都很好）。

这是使用 Dojo 1.8 的代码：

[http://jsfiddle.net/XUzCN/](http://jsfiddle.net/XUzCN/)

当您选中“显示 2”（标签或框）时，“内容 2”。div 不显示。如果取消选中“显示 3”、“内容 3”。隐藏，但“内容 2”神奇地出现了！使 div 正确显示的唯一方法是切换第一个 div“内容 1”的显示。同样，在 IE 和 FF 中一切都很好。

顺便说一句，我坚持使用 CSS 类“isVisible”和“isHidden”，因为之后我还有其他事情要做。无论如何，我已经尝试过了，但结果是一样的：

```
query("div#div" + divNum).style("display", "inline"); 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:26:47.743

几个小时后，我找到了解决问题的方法。而不是应用“display:inline”来显示隐藏的div，我只需要删除“display:none”样式。

使用我的 CSS 类，我只需要更改 ".isVisible" ：

```
.isVisible {}
.isHidden {display:none;} 
```

[http://jsfiddle.net/XUzCN/11/](http://jsfiddle.net/XUzCN/11/)

用 .isVisible 替换 .isHidden 类现在可以完美运行！

# html - HTML 对象标签 - 我可以将宽度和高度指定为百分比吗？

> ID：14148474
> 
> 赞同：4
> 
> 时间：2013-01-03T22:44:42.830
> 
> 标签：html

对象标签是否将百分比作为有效的高度和宽度？我正在查看[对象的 MDN 描述，](https://developer.mozilla.org/en-US/docs/HTML/Element/object)它说高度和宽度都在 - 中指定`CSS pixels`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T22:52:20.593

来自[HTML5 草案](http://www.w3.org/html/wg/drafts/html/master/single-page.html#attr-dim-width)：

> **作者要求**： , , , , 和 的和属性，当`width`它们`height`的属性处于图像按钮状态时，可以指定元素以给出元素视觉内容的尺寸（分别相对于标称的宽度和高度）输出介质的方向），以 CSS 像素为单位。**属性（如果指定）必须具有有效的非负整数值。**`img``iframe``embed``object``video``type``input`

 **属性的值被假定为像素，所以实际上没有办法提供百分比。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T01:32:24.060

当您使用 HTML 4.01 文档类型时，使用百分比值表示高度和宽度是有效的。它在 HTML5 中无效。

像素值在 HTML5 中是有效的，因为在标记中提供资源的内在尺寸有时可能是“语义的”。但是百分比值总是暗示这些值是表示性的，因此它们在 HTML5 中已过时，您应该使用 CSS 来提供这些百分比尺寸。**

# c# - 以编程方式更改网格设置

> ID：14148476
> 
> 赞同：0
> 
> 时间：2013-01-03T22:44:50.223
> 
> 标签：c#, xaml, windows-runtime, winrt-xaml

我有一个看起来像这样的 XAML 代码

```
<Grid>
   <Grid.RowDefinitions>
      <RowDefinition Height="140"/>
      <RowDefinition Height="*"/>
   </Grid.RowDefinitions>
   <Grid.ColumnDefinitions>
      <ColumnDefinition x:Name="primaryColumn" Width="40*"/>
      <ColumnDefinition Width="50*"/>
   </Grid.ColumnDefinitions>
   <Grid x:Name="titlepanel">
      ...
   </Grid>
   <Grid x:Name="leftgrid" Grid.Row="1">
      ...
   </Grid>
   <Grid x:Name="rightgrid" Grid.Row="0" Grid.Column="1" Grid.RowSpan="2">
      ...
   </Grid>
</Grid> 
```

是否可以在 C# 中更改 rightgrid 使其看起来像这样

```
<Grid x:Name="rightgrid" Grid.Row="1" Grid.Column="1">
   ...
</Grid> 
```

我不能只在 XAML 代码中设置，因为在某些情况下，我需要它吗？
还是我必须创建一个新页面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T22:54:53.210

在后面的代码中，要取消设置`RowSpan`，`rightgrid`您可以：

```
rightgrid.ClearValue(Grid.RowSpanProperty); 
```

同样，要将 设置`Row`为 1，您将执行以下操作：

```
rightgrid.SetValue(Grid.RowProperty, 1); 
```

来自 MSDN：

*   [清除值](http://msdn.microsoft.com/en-us/library/ms597464%28v=vs.95%29.aspx)

*   [设定值](http://msdn.microsoft.com/en-us/library/ms597473%28v=vs.95%29.aspx)

*   [Grid.RowSpanProperty](http://msdn.microsoft.com/en-us/library/system.windows.controls.grid.rowspanproperty%28v=vs.95%29.aspx)

*   [Grid.RowProperty](http://msdn.microsoft.com/en-us/library/system.windows.controls.grid.rowproperty%28v=vs.95%29.aspx)

# iis - 是否有任何理由在 vb6 中使用 DHTML 或 IIS？

> ID：14148479
> 
> 赞同：1
> 
> 时间：2013-01-03T22:45:05.290
> 
> 标签：iis, vb6, dhtml

我发现 DHTML 在 Mozilla 或 IE6+ 中不起作用。所以我问是否有任何理由在 vb6 中使用 DHTML 或 IIS？

我问这个是因为我想知道是否有任何理由或任何方式为所有浏览器使用 DHTML。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T23:47:11.013

VB6 中的旧 DHTML 应用程序项目类型现在基本上已经过时了。时间过去了，微软已经强烈反对它所基于的大多数技术。

“IIS 应用程序”（即 WebClasses）仍然可行，因为它们不依赖于许多客户端特性。不过，您可能必须在现代 IIS 版本中启用现在可选的功能才能使用它们。它们从未流行过，而 ASP.Net 是它们的继任者——它得到了微软更多的喜爱。

# ruby-on-rails - rails 2.3，邮件视图中的 link_to，

> ID：14148481
> 
> 赞同：0
> 
> 时间：2013-01-03T22:45:07.623
> 
> 标签：ruby-on-rails, actionmailer, ruby-on-rails-2

我已经设置了运行良好的邮件程序。我想在邮件正文中发送一个链接，因此鉴于邮件程序，我正在执行以下操作：

```
<%= link_to "somesite","http://www.somesite.com" %> 
```

但在发送的电子邮件中显示如下：

```
<a href="http://www.somesite.com/">somesite</a> 
```

如果我遗漏了什么，请告诉我。我已经将文件名 message.erb 更改为 message.html.erb，但这并没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T22:59:26.510

我不久前遇到了这个问题。我相信命名模板需要遵循的约定是`message.text.html.erb`. [这里](http://apidock.com/rails/v2.3.2/ActionMailer/Base)的文档似乎表明我没记错。

原因是电子邮件的 MIME 类型是从文件名中推断出来的。如果您有，`message.text.plain.erb`那么 ActionMailer 应该发送一封包含纯文本和 html 部分的多部分电子邮件。你可能需要做一些额外的事情才能做到这一点，但我*认为*你不需要，如果你有两个模板。

# python - 在迭代器中有效地使用 Acora / 存在结果？

> ID：14148483
> 
> 赞同：1
> 
> 时间：2013-01-03T22:45:17.333
> 
> 标签：python, iterator

*   我正在使用 Python 中的 acora 库来尝试在多个字符串中搜索多个关键字。
*   它有两个我可以用来搜索的功能：`findall`和`finditer`
*   `findall`返回匹配列表，有点像正则表达式 findall。
*   `finditer`返回一个迭代器，逐个查找结果

> ```
> >>> import acora
> >>> builder = acora.AcoraBuilder('ab', 'bc', 'de') 
> >>> ac = builder.build()
> >>> ac.findall('this-is-my-testing-phrase-which-has-ab-and-bc-and-de')  
> [('ab', 36), ('bc', 43), ('de', 50)] 
> ```

*   我只想知道是否有一个匹配。我不想浪费更多的处理能力，看看是否还有其他类似的东西`findall`。*因此， ab*在那里的事实已经足够好了。

我可以用迭代器找到这个吗？看看是否最多只有一场比赛？

我问这个是因为我刚刚用 2 个嵌套循环对 acora 与基本字符串匹配进行了计时，并且速度慢了 4 倍，这看起来很荒谬。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:50:44.840

刚刚意识到我基本上可以遍历 iter 对象并在结果出现时立即中断。

# windows - Windows 服务器上的 .htaccess 文件

> ID：14148489
> 
> 赞同：3
> 
> 时间：2013-01-03T22:45:29.583
> 
> 标签：windows, .htaccess, redirect, iis

我进行了研究，发现我的 htaccess 文件无法在我的新 Windows 服务器上运行。我已经看到我应该使用 web.config。

我试过了，但什么都做不了。然后我看到我可以使用 htaccess 文件，但我必须将其命名为其他名称（如 htaccess.txt）。

我试过了，但无法让它工作。后来我读到我需要将其命名为其他名称，然后更改我的“AccessFileName”。我到处都看过，但仍然完全不知道该怎么做。

任何帮助是极大的赞赏！我正在使用 Godaddy Windows 服务器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T23:19:35.180

您确实必须使用 web.config 文件。您正在使用的 GoDaddy Windows 服务器正在运行一个名为 IIS 的网络服务器程序，该程序使用 web.config 文件。.htaccess 由 Apache HTTPD 使用，它是一个不同的 Web 服务器。

上次尝试时可能遇到的绊脚石是 web.config 文件的语法与 .htaccess 文件的语法大不相同。Microsoft 有一篇关于设置 web.config 文件的[知识库文章，以及其中链接的语法参考](http://support.microsoft.com/kb/815179)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-29T07:13:37.310

我尝试了一切并找到了这个

```
<system.webServer>
<staticContent>
  <remove fileExtension=".mp4"/>
  <remove fileExtension=".m4v"/>
  <remove fileExtension=".ogg"/>
  <remove fileExtension=".ogv"/>
  <remove fileExtension=".webm"/>
  <mimeMap fileExtension=".mp4" mimeType="video/mp4" />
  <mimeMap fileExtension=".m4v" mimeType="video/m4v" />
  <mimeMap fileExtension=".ogg" mimeType="video/ogg" />
  <mimeMap fileExtension=".ogv" mimeType="video/ogg" />
  <mimeMap fileExtension=".webm" mimeType="video/webm" />
</staticContent> 
```

</system.webServer>

希望能帮助到你

# jquery - 使用 IIS 7.5 作为 VS2010.Web 服务失败的开发服务器

> ID：14148499
> 
> 赞同：0
> 
> 时间：2013-01-03T22:45:55.663
> 
> 标签：jquery, ajax, json, web-services, iis-7.5

我有一个网站，只有很少的 .aspx 页面和很少的 .asmx 服务。它与内置的 Visual Studio Web 服务器完美配合。我想在将其投入生产之前在本地 IIS 服务器 7.5 中对其进行测试。但也有一些问题。

运行网站时，它指向登录页面（http/localhost/Login.aspx），但单击登录按钮后，它没有进入主页。我发现登录服务（asmx）失败。我正在使用Jquery .Ajax，数据类型是json，用于调用webservice（.asmx）中的方法

*   我的设置

1）在 IIS 管理器中，我在站点下创建了一个文件夹，并指向项目文件的物理位置。

2）在Visual Studio中，解决方案资源管理器-->属性页-->开始选项-->我选择**自定义服务器**和基本URL：http//localhost。（没有本地IIS服务器选项可供选择。）

这是我在 chrome/Inspect 元素中得到的错误详细信息。

（请求 URL：http://localhost/ReportDataservice.asmx/ProcessLogin 请求方法：POST 状态码：500 内部服务器错误）

我是否需要更改 IIS 7.5 设置或 VS 环境？它与内置的 VS 服务器完美配合。

谢谢！

马修

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T21:14:49.270

在我更新了适用于 IIS 7.5 的 Visual Studio 2010 的补丁后，问题得到了解决。之后，Web 服务运行良好。

# visual-studio-2012 - Int2Cat - DriverVer 设置为错误的日期

> ID：14148500
> 
> 赞同：12
> 
> 时间：2013-01-03T22:46:13.710
> 
> 标签：visual-studio-2012, wdk

我正在尝试使用自动与 WDK 集成的 Visual Studio 2012 开发驱动程序。

当我尝试构建我的驱动程序时，我收到来自 Inf2Cat 应用程序的错误消息。它说：

> 错误：2> 22.9.7：\ntleg.inf 中的 DriverVer 设置为不正确的日期（不允许过时的 DriverVer）。当前日期 (UTC) 是 2013 年 1 月 3 日。

在我的 NTLeg.inf 中，我有：

```
[Version]
Signature="$WINDOWS NT$"
Class=
ClassGuid=
Provider=
DriverVer=
CatalogFile=NTLeg.cat 
```

所以，DriverVerProperty 是空的。我尝试用任何值填充它，但 Inf2Cat 报告相同的错误。我试图用当前、过去和未来的日期填充它，结果相同。我应该怎么办？

我尝试了 WDK 提供的示例，并且都报告了此错误。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-06-08T23:54:06.297

When using StampInf to automatically populate DriverVer it uses local time not GMT, but Inf2Cat defaults to verifying in GMT (UTC). See Microsoft comments and suggestions in StampInf documentation [http://msdn.microsoft.com/en-us/library/windows/hardware/ff552789(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff552789(v=vs.85).aspx)

Easiest fix is to change your driver package project settings for Inf2Cat to set `/uselocaltime`. Then the problem goes away!

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T19:30:05.683

解决了。只需要等到 UTC 日期时间和我的本地日期时间得到相同的日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T21:51:24.980

您不能将 DriverVer 留空。如此处所指定[，](http://msdn.microsoft.com/en-us/library/windows/hardware/ff547394%28v=vs.85%29.aspx)从 Windows 2000 开始需要。另请注意，日期必须指定为 mm/dd/yyyy，其中月份和日期为两位数字，年份为四位数字。最后，日期必须是包中任何文件的最近日期。我的猜测是，要求是让你绊倒的原因。

# c++ - 在编译时使用宏生成类

> ID：14148507
> 
> 赞同：0
> 
> 时间：2013-01-03T22:46:42.367
> 
> 标签：c++, macros

是否可以使用宏构造下面的类？

```
struct ModelName
{
public:
    typedef std::string type;

    static type get( const GameObject* obj )
    {
        return obj->getAttribute< type >( MODEL_NAME );
    }
}; 
```

换句话说，我想在编译时生成上面的代码，给定三个参数：`ModelName`、`MODEL_NAME`和`std::string`。那可能吗？

编辑：输入后，我意识到我可以使用模板实现我想要的。出于某种原因，我认为它行不通。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T22:51:24.027

当然：

```
#define DEFINE_ATTRIBUTE(classname, attributeName, attributeType)   \
        struct classname                                            \
        {                                                           \
            typedef attributeType type;                             \
                                                                    \
            static type get(const GameObject* const obj)            \
            {                                                       \
                return obj->getAttribute<type>(attributeName);      \
            }                                                       \
        } 
```

（缺少分号是正常的；它强制/允许在宏之后使用分号。）

如果可能，您可以考虑将其重新设计为模板。

# twitter-bootstrap - twitter bootstrap：如何混合课程？

> ID：14148509
> 
> 赞同：1
> 
> 时间：2013-01-03T22:46:59.200
> 
> 标签：twitter-bootstrap, less

我正在尝试正确使用 Bootstrap。我的 LESS 文件（在 bootstrap.css 之后加载）如下所示：

```
#page {
.container;
}
header {
    ul {
        .inline;
        .unstyled;
    }
} 
```

结果，我看到：

*   我的#page 容器有 margin-left: auto 和 margin-right: auto... 但没有宽度！
*   我的 <ul> 没有应用内联和无样式样式！

如果我直接更改我的 HTML 代码如下：

```
<div id="page" class="container">
    <header>
        <ul class="inline unstyled">
            ...
        </ul>
    </header>
</div> 
```

...一切正常。

有人知道为什么吗？

感谢您的帮助，

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T02:21:28.240

首先，Bootstrap 定义了`ul.inline`，所以试试

```
#page {
    .container;
}
header {
    ul {
        ul.inline;
        ul.unstyled;
    }
} 
```

* * *

`.container`定义为 2 个块。Less 并没有将几个块的样式组合成 mixin。不知道如何解决这个问题（对不起）。

```
.container,
.navbar-static-top .container,
.navbar-fixed-top .container,
.navbar-fixed-bottom .container {
  width: 940px;
}

.container {
  margin-right: auto;
  margin-left: auto;
  *zoom: 1;
} 
```

# apache - MAMP 2.1.1 中不存在 Apache 文件

> ID：14148512
> 
> 赞同：0
> 
> 时间：2013-01-03T22:47:32.303
> 
> 标签：apache, mamp

我最近不得不重新安装以前从未给我带来任何问题的 MAMP，但从那以后我遇到了文件没有显示并且无法写入它们的问题。然后我打开 MAMP Pro 并更改了我的 htdocs 文件夹的权限，但我仍然遇到文件在我的本地主机上消失的问题。

我检查了 Apache 日志，发现我打开或尝试打开的所有内容都重复了此消息：

[客户端 ::1] 文件不存在

我的 Apache 一直在端口 8888 上运行，因为如果我将其更改为 80，显然与我的本机 Mac 服务器（我在 Mountain Lion 上）存在冲突。

我读过一些关于 DocumentRoot 不在 httpd.config 中的内容，但我不敢碰它，因为我不知道自己在做什么。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T09:12:17.330

万一其他人遇到此问题，那是由于较早地从时间机器恢复了备份。该文件确实不存在，因为它已被替换，但路径仍然存在。希望这可以帮助某人。

# nlp - 多项朴素贝叶斯模型中文档的概率

> ID：14148516
> 
> 赞同：0
> 
> 时间：2013-01-03T22:47:52.963
> 
> 标签：nlp

遗憾的是，我无法完全理解多项朴素贝叶斯模型中文档概率公式中片段之一的含义。这是关于纸[A Comparison of Event Models for Naive Bayes Text Classication](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.65.9324)，公式 #5：

![在此处输入图像描述](../Images/66a16b89ac13d71b7df03c858a059c64.png)

有问题的片段是`P(|d_i|)`- 我无法完全理解，这个概率是什么意思？它只是第 i 个文档的概率吗？如果是，为什么它包含`|...|`操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:30:15.343

`|d_i|`是第 i 个文档中的单词数。术语`P(|d_i|)`是生成包含精确`|d_i|`单词的文档的概率。

# wcf - 如何通过 BizTalk 中的 WCF 服务通过 HTTP 接受 Http MIME 请求

> ID：14148517
> 
> 赞同：0
> 
> 时间：2013-01-03T22:47:55.117
> 
> 标签：wcf, biztalk, wcf-binding, biztalk-2010, biztalk-2009

我需要在 BizTalk 中通过 HTTP 接受 HTTP MIME 请求。

我通过使用 WCF 发布向导发布我的架构创建了一个服务，它适用于 SOAP+WSDL 信封标准，但我如何为 HTTP/MIME 多部分消息实现相同的功能？

我尝试在管道的解码阶段提供 MIME 解码器组件，但它会引发错误：

```
_415 Cannot process the message because the content type 'multipart/form-data; boundary=06047b04fd8d6d6866ed55ba' was not the expected type 'application/soap+xml; charset=utf-8'._ 
```

这是我正在使用的示例 MIME 消息：

```
POST /core/Person HTTP/1.1 
Host: server_host:server_port
Content-Length: 244508 
Content-Type: multipart/form-data; boundary=XbCY 
--XbCY
Content-Disposition: form-data; name=“Name“
QWERTY 
--XbCY Content-Disposition: form-data; name=“Phno No" 
12234 
--XbCY 
Content-Disposition: form-data; name=“Address" 
00a0d91e6fa6 
```

我可以在同一个端点使用同一个服务吗？如果是这样，我必须对我的服务进行哪些更改？

我必须使用任何自定义管道组件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-06T23:01:31.513

您将需要一个 HTTP 类型的接收端口并使用 BTSHTTPReceive.dll，因为它看起来没有 SOAP 信封。所以你基本上想要一个新的端点，而不是试图让 WCF 工作。

是的，您必须使用自定义管道组件。

此外，当您收到多部分/表单数据的 MIME 消息时，您需要阅读[如何处理提交给 BTSHttpReceive.dll 的“多部分/表单数据”消息，](http://blogs.msdn.com/b/asiabiztalk/archive/2010/12/28/how-to-process-multipart-form-data-message-submitted-to-btshttpreceive-dll.aspx)该消息将“MIME-Version：1.0”添加到消息中，以便您可以使用标准的 MIME 解码器管道组件。

```
public IBaseMessage Execute(IPipelineContext pc, IBaseMessage inmsg)
    {
        IBaseMessagePart bodyPart = inmsg.BodyPart;
        if (bodyPart!=null)
        {
            byte[] prependByteData  = ConvertToBytes(prependData);
            byte[] appendByteData   = ConvertToBytes(appendData);

            string headersString = inmsg.Context.Read("InboundHttpHeaders", "http://schemas.microsoft.com/BizTalk/2003/http-properties").ToString();
            string[] headers = headersString.Split(new Char[] {'\r','\n' }, StringSplitOptions.RemoveEmptyEntries);
            string MimeHead=String.Empty;
            bool Foundit=false;
            for (int i=0;i<headers.Length;i++)
            {
                if (headers[i].StartsWith("Content-type:", true, null))
                {
                    MimeHead = headers[i];
                    Foundit = true;
                    break;
                }
            }
            if (Foundit)
            {
                StringBuilder sb = new StringBuilder();
                sb.Append(prependData);
                sb.Append("\r\n");
                sb.Append(MimeHead);
                sb.Append("\r\n");
                prependByteData = ConvertToBytes(sb.ToString());
            }

               Stream originalStrm            = bodyPart.GetOriginalDataStream();
               Stream strm = null;

               if (originalStrm != null)
               {
                         strm             = new FixMsgStream(originalStrm, prependByteData, appendByteData, resManager);
                         bodyPart.Data    = strm;
                         pc.ResourceTracker.AddResource( strm );
               }
        }

        return inmsg;
    } 
```

如果您想更了解如何处理附件，请参阅此博客[通过 BizTalk 通过 Web 服务将二进制文档处理为 XLANGMessages](http://connectedpawns.wordpress.com/2012/11/04/processing-binary-documents-as-xlangmessages-through-biztalk-via-web-services/)

> 首先，我创建了一个自定义管道组件；使用 BinaryReader 将 MIME 编码的文档读入字节数组。请注意，您不能使用 StreamReader，因为流中的数据是 base64 编码的，并且将包含非 ASCII 字符。将字节数组转换为 Base64 编码字符串 创建类型化的 XML 文档并将 base64 编码字符串添加到其中一个元素。将 XML 文档发送回来。管道组件代码是；

```
public Microsoft.BizTalk.Message.Interop.IBaseMessage Execute(Microsoft.BizTalk.Component.Interop.IPipelineContext pc, Microsoft.BizTalk.Message.Interop.IBaseMessage inmsg)
   {
       var callToken = TraceManager.PipelineComponent.TraceIn(“START PIPELINE PROCESSING”);
       //Assumes inmsg.BodyPart.Data is MIME encoded = base64 encoded           
       BinaryReader binReader = new BinaryReader(inmsg.BodyPart.Data);
       byte[] dataOutAsBytes = binReader.ReadBytes((int)inmsg.BodyPart.Data.Length);
       binReader.Close();
       string dataOut = System.Convert.ToBase64String(dataOutAsBytes);
       TraceManager.PipelineComponent.TraceInfo(“Original MIME part received = ” + dataOut,callToken);
       // THIS IS THE AttachedDoc XML MESSAGE THAT WE ARE CREATING
       //<ns0:AttachedDocument xmlns:ns0=http://BT.Schemas.Internal/AttachedDocument>
       //    <ns0:FileName>FileName_0</ns0:FileName>
       //    <ns0:FilePath>FilePath_0</ns0:FilePath>
       //    <ns0:DocumentType>DocumentType_0</ns0:DocumentType>
       //    <ns0:StreamArray>GpM7</ns0:StreamArray>
       //</ns0:AttachedDocument>
       XNamespace nsAttachedDoc = XNamespace.Get(@”http://BT.Schemas.Internal/AttachedDocument”);
       XDocument AttachedDocMsg = new XDocument(
                                       new XElement(nsAttachedDoc + “AttachedDocument”,
                                       new XAttribute(XNamespace.Xmlns + “ns0″, nsAttachedDoc.NamespaceName),
                                           new XElement(nsAttachedDoc + “FileName”, “FileName_0″),
                                           new XElement(nsAttachedDoc + “FilePath”, “FilePath_0″),
                                           new XElement(nsAttachedDoc + “DocumentType”, “DocumentType_0″),
                                           new XElement(nsAttachedDoc + “StreamArray”, dataOut)
                                           )
                                       );
       dataOut = AttachedDocMsg.ToString();
       TraceManager.PipelineComponent.TraceInfo(“Created AttachedDoc msg = ” + AttachedDocMsg, callToken);
       MemoryStream ms = new System.IO.MemoryStream(System.Text.Encoding.ASCII.GetBytes(dataOut));
       IBaseMessage outmsg = pc.GetMessageFactory().CreateMessage();
       outmsg.Context = pc.GetMessageFactory().CreateMessageContext();
       // Iterate through inbound message context properties and add to the new outbound message
       for (int contextCounter = 0; contextCounter < inmsg.Context.CountProperties; contextCounter++)
       {
           string Name;
           string Namespace;
           object PropertyValue = inmsg.Context.ReadAt(contextCounter, out Name, out Namespace);
           // If the property has been promoted, respect the settings
           if (inmsg.Context.IsPromoted(Name, Namespace))
           {
               outmsg.Context.Promote(Name, Namespace, PropertyValue);
           }
           else
           {
               outmsg.Context.Write(Name, Namespace, PropertyValue);
           }
       }
       outmsg.AddPart(“Body”, pc.GetMessageFactory().CreateMessagePart(), true);
       outmsg.BodyPart.Data = ms;
       pc.ResourceTracker.AddResource(ms);
       outmsg.BodyPart.Data.Position = 0;
       TraceManager.PipelineComponent.TraceInfo(“END PIPELINE PROCESSING”, callToken);
       TraceManager.PipelineComponent.TraceOut(callToken);
       return outmsg;
   } 
```

# actionscript-3 - 将y值转换为预定义范围的公式？

> ID：14148518
> 
> 赞同：0
> 
> 时间：2013-01-03T22:47:57.010
> 
> 标签：actionscript-3, formulas

我有一个从 30 的最小值到 240 的最大值的图表，但我的实际 Y 值是 216-435 的范围。我正在尝试使一条可拖动的线与我的图表（30-240）上的值相对应，并且可以使用公式帮助。

这个截屏视频会有很大帮助。[http://screencast.com/t/PpVXNAtZD9Q](http://screencast.com/t/PpVXNAtZD9Q)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:53:05.747

使用百分比：

```
// Graph Range
var gMax:Number = 240;
var gMin:Number = 30;

// Y Range
var yMax:Number = 435;
var yMin:Number = 216;

var percent:Number = (actualY - yMin) / (yMax - yMin);
var corresponding:Number = percent * (gMax - gMin) + gMin; 
```

# selenium-webdriver - 取消挂起的发送错误

> ID：14148521
> 
> 赞同：2
> 
> 时间：2013-01-03T22:48:22.593
> 
> 标签：selenium-webdriver

我在 Chrome 浏览器版本 23 上运行 Selenium WebDriver 脚本。测试成功运行，没有任何错误，但有一条消息：

[0103/143909:ERROR:ipc_sync_channel.cc(378)] 取消挂起的发送 [0103/143909:ERROR:ipc_sync_channel.cc(378)] 取消挂起的发送

并且由于上述错误，测试结果为 FAILED。这是我实例化 chrome 浏览器会话的方法：

```
public static boolean setup(String browserType){
    if(browserType.equals("IE")){
        webdriver1 = new InternetExplorerDriver();
    } else if(browserType.equals("Chrome")){
        System.setProperty("webdriver.chrome.driver","path to  chromedriver.exe");
        webdriver1 = new ChromeDriver();
} 
```

感谢任何已解决此问题的人提供的任何反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T10:54:25.027

根据[https://code.google.com/p/chromedriver/issues/detail?id=159](https://code.google.com/p/chromedriver/issues/detail?id=159)它与您的浏览器尚未完成加载页面有关，而 selenium 关闭并退出驱动程序。

# cocos2d-iphone - 旧 AdWhirl 教程中的 RootViewController (cocos2d)

> ID：14148525
> 
> 赞同：1
> 
> 时间：2013-01-03T22:48:42.253
> 
> 标签：cocos2d-iphone, adwhirl

我正在尝试在我的 cocos2d 应用程序（2.1 版）中实现 AdWhirl，但所有教程都使用“RootViewController.h”。它是从 2.x 版本中删除的吗？我应该用什么来代替它？本教程例如 [http://emeene.com/2010/10/adwhirl-cocos2d-iphone/](http://emeene.com/2010/10/adwhirl-cocos2d-iphone/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:30:39.727

您可能想在[此处查看](http://googleadsdeveloper.blogspot.com/2012/09/working-with-admob-and-cocos2d-v20.html)有关如何将 AdMob 与 Cocos2D v2.0 集成的博客文章。AdWhirl 需要进行一些细微的调整才能启动并运行。

具体来说，我认为他们已经开始在那个版本的 Cocos2D 中使用导航控制器作为他们的根控制器。不过，这应该不会对您产生太大影响。就 AdWhirl 而言，您应该能够将您的 adView 添加为：

```
[[CCDirector sharedDirector].view addSubview:adBanner_]; 
```

对于 viewControllerForPresentingModalView: 方法，您可能可以使用：

```
- (UIViewController *)viewControllerForPresentingModalView {
    AppController *app = (AppController*) [[UIApplication sharedApplication] delegate];
    return [app navController];
} 
```

# html - (perl, html) 用一个提交按钮更改两个表单值？

> ID：14148526
> 
> 赞同：0
> 
> 时间：2013-01-03T22:48:46.537
> 
> 标签：html, forms, perl

我正在开发的应用程序使用变量 $mode 和 $action 进行导航。例如：

```
$mode = param('mode');
$action = param('action');

if ($mode eq 'mode1') {
  if ($action eq 'savedata') {
    &savedata();
  } elsif ($action eq 'showform') {
    &showform(); 
  }
} 
```

通常，我只需要更改操作参数，我可以使用按钮来完成。

```
$button1 = "<button type='submit' id='saveBenefit' style=\"$button_style\" name='action' class='button1' value='save'>Save</>";
$button2 = "<button type='submit' id='processBenefit' style=\"$button_style\" name='action' class='button1' value='process'>Save And Process</>"; 
```

但：

当我单击 button1 时，我希望“模式”参数保持优势，而“动作”参数保持“保存”。当我单击 button2 时，我希望模式参数为“事务”，而“操作参数”为“过程”。

如何根据单击的按钮更改多个表单值（操作和模式）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T23:36:13.053

不能不使用一些客户端脚本。但那将是愚蠢的。只需在按钮的值中包含足够的信息。您甚至不需要对表单进行任何更改：

```
$mode = 'transaction' if $action eq 'process'; 
```

# python - 使用 win32com 编辑 MS Word 标题

> ID：14148531
> 
> 赞同：2
> 
> 时间：2013-01-03T22:48:58.277
> 
> 标签：python, ms-word, win32com

我正在尝试编辑具有现有标题的 MS Word 文档的标题，使用`win32com`.
我试过这个来编辑页眉：

```
import win32com.client as win32

word = win32.gencache.EnsureDispatch('Word.Application')
doc=word.Documents.Open("C:\\a.docx")
word.Visible = True
word.ActiveDocument.Sections[0].Headers[win32.constants.wdHeaderFooterPrimary].Range.Text='test text'
word.ActiveDocument.Save()
doc.Close(False)
word.Application.Quit() 
```

但它没有效果（标题根本没有改变）！
通过 win32com 编辑 MS Word 标题的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T23:01:46.680

在这一行中使用括号而不是方括号，以及从 1 开始的索引。COM 中的一切都是函数调用或属性。

```
word.ActiveDocument.Sections(1).Headers(win32.constants.wdHeaderFooterPrimary).Range.Text='test text' 
```

# ios - 构建一个将数据存储在谷歌应用引擎（或类似）云服务器中的 iPhone 应用

> ID：14148532
> 
> 赞同：0
> 
> 时间：2013-01-03T22:49:05.497
> 
> 标签：ios, google-app-engine

我正在考虑开发一个将数据（用户、图像和其他数据）存储在云服务器中的 iPhone 应用程序。哪个是最好的服务器/系统？我只是一个初学者（我知道 Objective C 并且我已经制作了一些简单的 iPhone 应用程序）并且我对云服务器中的数据存储了解不多。网上有教程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T22:51:27.903

我建议使用 iCloud，因为它更集成在操作系统中。具体来说，这里是一个关于在 iOS 应用程序中使用 iCloud 的好教程。只要您从未决定移植到 Android，iCloud 就可以正常工作。

[http://www.raywenderlich.com/6015/beginning-icloud-in-ios-5-tutorial-part-1](http://www.raywenderlich.com/6015/beginning-icloud-in-ios-5-tutorial-part-1)

# magento - 客户帐户网址重写

> ID：14148533
> 
> 赞同：1
> 
> 时间：2013-01-03T22:49:07.763
> 
> 标签：magento, e-commerce

我是 Magento 的新手。[从http://www.mydomain.com/customer/account/](http://www.mydomain.com/customer/account/)显示客户帐户 URL 的最佳方法是什么

至

[如果我希望人们注册，请访问 http://www.mydomain.com/customer](http://www.mydomain.com/customer)或 /register？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:39:52.957

您可以尝试使用创建自定义模块

```
<global>
  <rewrite>
    <mynamespace_mymodule_customer>
        <from><![CDATA[#^/customer#]]></from>
        <to>/customer/account</to>
        <complete>1</complete>
    </mynamespace_mymodule_customer>
    <mynamespace_mymodule_register>
        <from><![CDATA[#^/register#]]></from>
        <to>/customer/register</to>
        <complete>1</complete>
    </mynamespace_mymodule_register>
     </rewrite>
</global> 
```

查看[Magento 购物篮页面的自定义 URL](https://stackoverflow.com/questions/12722841/custom-url-for-magentos-basket-page)

# c++ - 结构引用 (.) 运算符适用于 vc9 中的类名

> ID：14148534
> 
> 赞同：2
> 
> 时间：2013-01-03T22:49:08.410
> 
> 标签：c++, visual-c++

以下代码在我的 vc9 版本上编译：

```
wstring test2;
if (test2.find(L'c') == wstring.npos)
{
} 
```

但就其本身而言

```
wstring.npos; 
```

才不是。（`wstring::npos;`工作正常）在我看来，这是 100% 错误的。起初我认为可能正在构建一个 wstring 并且正在访问 npos 成员 ala `wstring().npos`，但快速尝试进入该行建议否则。用我自己的一类结果模拟同样的情况

> 警告 C4832：令牌“。” 在 UDT 'Foo' 之后是非法的

但仍然编译。

只是为了我的理智 - 这种语法不应该工作，对吧？鉴于它确实有效，为什么表达式`wstring.npos;`会失败？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T22:51:19.403

`wstring.npos`应该**不起作用**，因为它`npos`是一个`static`成员，并且可以使用范围解析运算符 ( ) 使用类名访问它，也可以使用点运算符 ( `wstring::npos`) 通过类*实例*`wstring str; str.npos;`访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T13:30:47.787

> 然后是非标准行为，老实说，这是 MSVC 所期望的

我有时感到困惑，为什么在没有检查索赔有效性的情况下就假设 MS 有罪。

**wstring.npos 无法编译**，VS 2008 和 2010 会标记错误。

为什么它不编译，在以前的帖子中已正确解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T22:52:54.647

因为 npos 是类的静态成员。

# html - 使用 datalist 进行多项选择

> ID：14148538
> 
> 赞同：26
> 
> 时间：2013-01-03T22:49:36.213
> 
> 标签：html, html-datalist

我正在使用该标签为我的搜索框创建建议列表，但我无法从数据列表中选择多个值。目前，我的 HTML 是：

```
<html>

  <form action="search_tags.php" method="GET"/>

  Search: <input type="text" multiple="multiple" name="search" list="tags" autocomplete="off" />

  <datalist id="tags">
    <option value="black">
    <option value="gold">
    <option value="grey">
    <option value="pink">
    <option value="turquoise">
    <option value="red">
    <option value="white">
  </datalist>

</html> 
```

它将为一个项目提供建议，但之后这些建议不会为我的第二个选项建议自动完成。我认为“多个”标签是我所需要的（以及在线建议的），但它似乎没有达到预期的效果。

有什么建议么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-10-15T09:44:17.987

多个当前仅适用于 input type="email" 且仅在 Chrome 和 Opera 中

看看这个极简主义的例子：

```
input{width:500px}
```

```
<input type="email" list="emails" multiple>
<datalist id="emails">
    <option value="first@example.com">
    <option value="second@example.com">
    <option value="third@example.com">
    <option value="last@example.com">
</datalist>

<br><br><br>

<input type="text" list="texts" multiple>
<datalist id="texts">
    <option value="black">
    <option value="gold">
    <option value="grey">
    <option value="pink">
    <option value="turquoise">
    <option value="red">
    <option value="white">
</datalist>
```

**第一个输入会起作用，第二个不会。**

您只需按逗号，列表将与单击输入时显示的相同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-10-16T00:20:55.503

# 超简单的jQuery工具：[Flexdatalist](https://github.com/sergiodlopes/jquery-flexdatalist)

*我想要一些更简单的东西，但据我了解，“多重”属性仅适用于电子邮件和文件，因为 HTML5 开发人员不想打开一罐蠕虫，但[开发人员正在考虑改变](https://github.com/w3c/html/issues/608#issuecomment-251683628)。在搜索完所有内容之后，我可以让它工作的唯一方法是在列表**中**获得那些花哨、有用的“#tagHere X”项目，就像在许多网站上一样。要么全有，要么全无，它解决了我同样的问题。*

不幸的是，我找不到有关如何使用**Flexdatalist**的完整说明。因此，我将包含一个带有工作示例的超级完整演练，如果它太多，请原谅......

## 1.从GitHub上的[Flexdatalist只获取](https://github.com/sergiodlopes/jquery-flexdatalist)*两个*文件

*   `jquery.flexdatalist.min.js`
*   `jquery.flexdatalist.css`（您可以改用***.min*** *.css*，但您可能想要调整 CSS）

## 2.把这两个文件放在正确的位置：

我用了：

```
[DOMAIN]/js/jquery.flexdatalist.min.js

[DOMAIN]/css/jquery.flexdatalist.css 
```

## 3.包含CSS文件

任何一个：

*   `@import "jquery.flexdatalist.css";`在您的`style.css`文件中`[DOMAIN]/css/`

或者

*   `<link href="css/jquery.flexdatalist.css" rel="stylesheet" type="text/css">` *在您`<head>`的页面标签之间`datalist`*

## `<input>`4\. 在包含您的元素的元素中包含这些属性`datalist`

*（连同您的其他属性）*

*   *`<input`*…… **`class="flexdatalist form-control" data-min-length="1" data-searchContain="true" multiple="multiple"`**_*`>`*

## 5\. 在你的后面包含*三个*JavaScript 语句`datalist`

```
<script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
<script src="js/jquery.flexdatalist.min.js"></script>
<script>
$('.flexdatalist-json').flexdatalist({
     searchContain: false,
     valueProperty: 'iso2',
     minLength: 1,
     focusFirstResult: true,
     selectionRequired: true,
});
</script> 
```

* * *

## 工作示例：

`[DOMAIN]/index.html`：

```
<!DOCTYPE html>
<html>
<head>
<title>Flexdatalist Minimalist</title>
<link href="jquery.flexdatalist.css" rel="stylesheet" type="text/css">
</head>
<body>

<input type="text" placeholder="Choose a fruit"

  class="flexdatalist form-control"
  data-min-length="1"
  data-searchContain="true"
  multiple="multiple"

list="fruit" name="my-fruit">
<datalist id="fruit">
  <option value="Apples">Apples</option>
  <option value="Bananas">Bananas</option>
  <option value="Cherries">Cherries</option>
  <option value="Kiwi">Kiwi</option>
  <option value="Pineapple">Pineapple</option>
  <option value="Zucchini">Zucchini</option>
</datalist>

<script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
<script src="jquery.flexdatalist.min.js"></script>
<script>
$('.flexdatalist-json').flexdatalist({
     searchContain: false,
     valueProperty: 'iso2',
     minLength: 1,
     focusFirstResult: true,
     selectionRequired: true,
});
</script>

</body>
</html> 
```

这里有*两个*文件：

```
[DOMAIN]/js/jquery.flexdatalist.min.js

[DOMAIN]/css/jquery.flexdatalist.css 
```

* * *

另一种具有出色文档的替代方法是：[Awesomeplete](https://leaverou.github.io/awesomplete/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-10T22:54:22.783

自定义数据列表以接受多个值：

每次输入后按**,（逗号）**，然后按**空格键**

```
var datalist = jQuery('datalist');
var options = jQuery('datalist option');
var optionsarray = jQuery.map(options ,function(option) {
        return option.value;
});
var input = jQuery('input[list]');
var inputcommas = (input.val().match(/,/g)||[]).length;
var separator = ',';

function filldatalist(prefix) {
    if (input.val().indexOf(separator) > -1 && options.length > 0) {
        datalist.empty();
        for (i=0; i < optionsarray.length; i++ ) {
            if (prefix.indexOf(optionsarray[i]) < 0 ) {
                datalist.append('<option value="'+prefix+optionsarray[i]+'">');
            }
        }
    }
}
input.bind("change paste keyup",function() {
    var inputtrim = input.val().replace(/^\s+|\s+$/g, "");
  //console.log(inputtrim);
    var currentcommas = (input.val().match(/,/g)||[]).length;
  //console.log(currentcommas);
    if (inputtrim != input.val()) {
        if (inputcommas != currentcommas) {
            var lsIndex = inputtrim.lastIndexOf(separator);
            var str = (lsIndex != -1) ? inputtrim.substr(0, lsIndex)+", " : "";
            filldatalist(str);
            inputcommas = currentcommas;
        }
        input.val(inputtrim);
    }
});
```

```
html,
body {
  display: flex;
  align-items:center;
  flex-direction: column;
  justify-content: center;
  min-height: 100%
}

label {
  display: block;
  font-size: 15px;
  padding: 10px 0;
}
input {
  border: 2px solid #1E824C;
  color: #333;
  font-size: 12px;
  padding: 5px 3px
}
small {
  display: block;
  font-size: 11px;
  padding-top: 5px;
}
```

```
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>

<label for="authors">Type authors from favorite to least favorite</label>
<input type="text" list="names-list" id="authors" value="" size="50" name="authors" placeholder="Type author names">
<small>You can type how many you want.</small>
<datalist id="names-list">
  <option value="Albert Camus">
  <option value="Alexandre Dumas">
  <option value="C. S. Lewis">
  <option value="Charles Dickens">
  <option value="Dante Alighieri">
</datalist>
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-05T18:57:38.073

[根据此](http://www.w3schools.com/tags/att_input_multiple.asp)“多个”属性仅对*电子邮件*和*文件*输入类型有效。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-09-12T15:21:34.423

我遇到了同样的问题，建议的解决方案似乎并没有解决问题。我编写了这个 Pure JS（IE11 安全）插件[UnComplete](https://github.com/09wattry/uncomplete)来创建一个有助于管理多个值的交互。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-03-03T03:17:38.990

我在不使用任何外部工具的情况下找到了另一种解决方法。

示例

```
<input type="email" class="multidatalist" multiple="multiple" name="search" list="tags" autocomplete="off" />
  <datalist id="tags">
    <option value="black">
    <option value="gold">
    <option value="grey">
  </datalist> 
```

jQuery 代码（也可以直接用 javascript 完成）

```
$(".multidatalist").focusin ( function() { $(this).attr("type","email"); });    
$(".multidatalist").focusout( function() { $(this).attr("type","textbox"); }); 
```

当您单击该框时，这基本上将输入设置为“电子邮件”类型，因此 HTML5 多数据列表正常工作。然后当您单击它时，输入会切换回“文本框”，这样您就可以提交表单而不受电子邮件限制。

这对我有用，让我不必使用更复杂的 jquery/jscript 插件。

# .net - 类级别，而不是实例，处理自定义事件？

> ID：14148540
> 
> 赞同：2
> 
> 时间：2013-01-03T22:49:44.177
> 
> 标签：.net, vb.net, delegates, event-handling, com-interop

主窗体是否有某种方法可以在不参考引发事件的 ClassB 的特定实例的情况下侦听 ClassB 的自定义事件的任何引发？

将生成事件的 ClassB 实例当前在表单知道的 ClassA 实例中匿名实例化。

***（最终更新：我对 MainForm 方法的直接调用没有按预期工作的原因是[这个问题](https://stackoverflow.com/questions/14202002/why-is-a-value-copy-of-mainform-created-when-method-is-called-or-invoked-cross-t)的已接受答案。）***

*更新我怀疑它比我想象的要复杂。以下引用解释了为什么我对 MainForm.DataReady() 的调用不起作用 - 以一种令人发狂的晦涩方式。*

> .NET 事件的魔力隐藏了这样一个事实，即当您通过 A 的实例订阅 B 的实例中的事件时，A 会被发送到 B 的 appdomain。如果 A 不是 MarshalByRef，则发送 A 的值副本。现在您有两个单独的 A 实例，这就是您遇到意外行为的原因。

[Cross AppDomain MarshallByRef vs value copy 讨论](https://stackoverflow.com/questions/1277346/net-problem-with-raising-and-handling-events-using-appdomains?rq=1)

*更新2：*

使用：

`Debug.WriteLine("SetWaitState executing with Id={0}", AppDomain.CurrentDomain.Id)`

在本地事件处理程序`MainForm.DataReady()`的上下文中执行并从显示它们每次都在相同的情况下运行。这使得不同的线程成为问题的原因——但在每种情况下都返回 false。它仍然没有意义 - 但至少自定义事件 - 根据需要冒泡 - 确实有效。`MainForm``ClassB``AppDomain``MainForm.InvokeRequired`

下面的代码说明了这些关系。

```
 Class MainForm
  private A as New ClassA

  private sub getData
    A.getData() 'Sets up the com object & callback
  end sub

  Private Sub _ClassB_HandleEvent(ResultMessage As String) Handles {some static/shared reference to ClassB}.CustomEvent
     'do something with the Message
  End Sub

End Class

Class ClassA

  public sub getData()
     Dim ComObj as New ComObject
     Call ComObj.setClient(New ClassB)
  End Sub

End Class

Class ClassB
  Implements IComObjectClient
  Public Event CustomEvent(ByVal ResultMessage As String)

  sub getdata_callback(results() as Object) handles IComObjectClient.getdata_callback
    ' Get the results
    RaiseEvent CustomEvent("Got Data") 'because calling MainForm.DataReady() doesn't work 
  end sub

End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:47:21.623

或者一起忽略代表，只在 A 类中捕获 B 类事件，并引发一个新的 A 类事件，您的主子也可以连接...

就像是...

```
 Class MainForm
        private A As ClassA

        Public Sub _ClassB_HandleEvent(ByVal ResultMessage As String)
            ' Do Something like.... TextBox1.Text &= ("Received Event Saying - " & ResultMessage) & vbCrLf
        End Sub

        Private Sub GetData()
            A = New ClassA
            AddHandler A.GotDataFromClassB, AddressOf _ClassB_HandleEvent
            A.GetData()
        End Sub
    End Class

    Public Class ClassA
        Public Event GotDataFromClassB(ByVal ResultMessage As String)
        Private B As ClassB

        Public Sub GetData()
            B = New ClassB
            AddHandler B.CustomEvent, Sub(ResultMessage As String)
                                                RaiseEvent GotDataFromClassB(ResultMessage)
                                      End Sub
            Dim ComObj as New ComObject
            Call ComObj.setClient(B)
        End Sub
    End Class

Class ClassB
  Implements IComObjectClient
  Public Event CustomEvent(ByVal ResultMessage As String)

  sub getdata_callback(results() as Object) handles IComObjectClient.getdata_callback
    ' Get the results
    RaiseEvent CustomEvent("Got Data")
  end sub
End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T23:21:43.523

主窗体是否有某种方法可以在不参考引发事件的 ClassB 的特定实例的情况下侦听 ClassB 的自定义事件的任何引发？

你可以，但你必须这样做

1.  声明一个公共的 CustomEventHandler 委托
2.  声明一个 ClassB 变量，以便您可以添加处理程序
3.  将处理程序从 MainFrom 传递到 A 类

例如

```
Public Class MainForm

    Private Sub _ClassB_HandleEvent(ByVal ResultMessage As String)
      'do something with the Message
    End Sub

    Private A As New ClassA

    Public Sub getData()

        Dim eh As New ClassB.CustomEventHandler(AddressOf _ClassB_HandleEvent) 'create the delegate
        A.getData(eh) 'Pass it to ClassA
    End Sub
End Class

Public Class ClassA

    Public Sub getData(ByVal eh As ClassB.CustomEventHandler)
        Dim b As New ClassB
        AddHandler b.CustomEvent, eh
        Call setClient(b)
    End Sub

    Public Sub setClient(ByVal b As ClassB)
        b.getdata_callback()
    End Sub

End Class

Public Class ClassB
    Delegate Sub CustomEventHandler(ByVal ResultMessage As String) 'Declare the handler
    Public Event CustomEvent As CustomEventHandler

    Sub getdata_callback()
        RaiseEvent CustomEvent("Got Data")
    End Sub

End Class 
```

# c# - 以较慢的播放速度播放 MP3 文件

> ID：14148541
> 
> 赞同：1
> 
> 时间：2013-01-03T22:49:46.193
> 
> 标签：c#, naudio

我正在制作一个 XNA 4.0 游戏，我正在使用 NAudio 播放声音，因为它比 XNA 的声音模块更强大。

我需要以较慢的速度播放 MP3 文件（以 0.75 倍或 0.5 倍速度）。我最初的想法是改变 WaveStream 的采样率。这是我正在尝试做的事情：

```
WaveStream originalWaveStream = new MP3FileReader(filepath);
WaveChannel32 volumeStream = new WaveChannel32(originalWaveStream); //So I can change the volume of the playback
WaveFormat tempFormat = new WaveFormat((int)(volumeStream.WaveFormat.SampleRate *     0.75f),(int)volumeStream.WaveFormat.BitsPerSample,(int)volumeStream.WaveFormat.Channels);
WaveFormatConversionStream tempStream = new WaveFormatConversionStream(tempFormat, volumeStream);
WaveChannel32 slowerWaveStream = new WaveChannel32(tempStream); 
```

如果我运行它，当 tempStream 的构造函数运行时，我会得到一个 MmException，上面写着“AcmNotPossible 调用 acmStreamOpen”。

我做错了什么？改变采样率是改变播放速度的唯一方法吗？有正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T07:25:33.927

您需要实现 NAudio 不提供的播放速度算法。

您的代码不起作用的原因是因为 volumeStream 是 IEEE 浮点 WaveFormat，并且您要求 ACM 重采样器输出 32 位 PCM 和浮点输入，这是它无法做到的。如果您将 WaveFormat.CreateIEEEFloatFormat 用于 tempFormat，那么这可能会“工作”。但是，除了改变播放速度之外，您还会改变音高，因此这不是一个理想的解决方案。您可以通过另一个音调偏移来补偿它，但是这种方法还有其他问题（例如在重新采样期间丢失或混叠部分频谱）。

Yuval Naveh 的开源[Practice#](http://code.google.com/p/practicesharp/)使用 NAudio 并实现变速播放。他通过[包装](http://code.google.com/p/practicesharp/source/browse/trunk/PracticeSharpApp/SoundTouch/SoundTouchSharp.cs) [SoundTouch](http://www.surina.net/soundtouch/)来做到这一点，SoundTouch是一个可以执行时间（“节奏”）拉伸的开源库。这应该会产生良好的结果，并且比尝试编写自己的算法要容易得多。

# c# - HRESULT 0x80070057 是什么意思，为什么我的程序崩溃了？

> ID：14148543
> 
> 赞同：1
> 
> 时间：2013-01-03T22:49:54.140
> 
> 标签：c#, winforms, visual-studio-2010

我编写了一个程序，它拍摄两张图像，然后在它们上运行一个算法来隔离“前景”中的一只手并将手势与已知的手势相匹配。

几天前，我用一些测试参数运行程序，只是为了测试我所做的一些调整，一切正常。从那以后我就没有碰过代码。

今天，我用两个新图像运行程序，它崩溃了，给了我错误代码`0x0`和`HRESULT=0x80070057`. 除此之外，根据工作室的说法，当我停止从 C# Visual Studio 2010 Express 进行调试时，不知何故，调试停止了。但该表单仍处于启动状态、无响应且无法关闭，即使从任务管理器中也是如此。我无法运行该程序，因为它说另一个实例仍在运行。

这可能是什么原因造成的？我可以尝试解决什么问题？我很乐意提供任何其他可能有用的细节；我相对缺乏经验，并不真正知道什么是有用的，什么是没有帮助的。

**补充：**我停下来开始工作室，这似乎解决了这个问题。不过，如果有人可以解释可能发生的事情，将不胜感激。

**另一个细节：**程序在它应该做的事情接近尾声时崩溃了。我能够开始，加载两张图片，并运行算法，但在最后一步，它在我身上崩溃了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T22:52:33.947

据我所知，错误代码意味着无法加载程序集。它已损坏或不可用。

清除`\bin`项目文件夹和 AppData (Temp) 文件夹（位于`C:\Users\your_username\AppData\Local\Temp\Temporary ASP.NET`）并查看错误是否仍然发生。

^(来源[MSDN](http://msdn.microsoft.com/de-de/library/windows/desktop/aa378137%28v=vs.85%29.aspx))

> **`E_INVALIDARG`:**一个或多个参数无效 ( `0x80070057`)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T22:56:03.023

您可能正在使用无法正确加载的程序集。为了检查哪一个可能会失败，我会推荐你​​这个实用程序：http: [//www.dependencywalker.com/](http://www.dependencywalker.com/)

它会扫描您的应用程序的依赖项并突出显示未找到的依赖项。在我的例子中是一个缺少的 C++ 程序集。

# excel - 添加近 1000 个组合框时出错

> ID：14148549
> 
> 赞同：1
> 
> 时间：2013-01-03T22:50:24.720
> 
> 标签：excel, vba, combobox

我在数据采集领域工作，我们的客户需要一种在多达 256 个输入通道上轻松设置多个设置的方法。每个通道需要 4 个组合框来表示所有可配置选项。[这是一个链接到它的样子。](http://i.imgur.com/J1BHg.jpg)

这些组合框在运行时使用以下方法循环创建：

```
Set obj = Worksheets("Synergy Setup").OLEObjects.Add(ClassType:="Forms.ComboBox.1", Link:=False, _
    DisplayAsIcon:=False, Left:=ttl_width + cell_width, Top:=ttl_height, Width:=cell_width2, Height:=cell_height) 
```

一切正常，最多约 243 个通道（或接近 1000 个组合框），然后我收到以下错误：

“自动化错误，未找到元素，错误 -2147319765”

使用 MsgBoxes 我已经确认确实是上述代码行导致了此错误，并且仅在我接近 1000 个组合框时才会发生。~~此外，发生此错误后，我的 excel 文件中的所有内容都已损坏，并且我不断收到错误消息“对象库无效或包含对无法找到的对象定义的引用”。~~（编辑：不相关）

重申一下，这只发生在大量组合框的情况下。有什么想法吗？

**编辑：我想跟进并说，对单元内组合框的更改不仅解决了我的问题，而且加快了我的设计 10 倍，令我惊讶的是，还大大简化了代码！谢谢！**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T23:06:24.607

也许您可以考虑使用*in cell 下拉列表*而不是组合框。
[就像这里描述的一样](http://office.microsoft.com/en-us/excel-help/create-or-remove-a-drop-down-list-HP010342357.aspx)。我认为它也会显示出更好的性能。

编辑：我用宏记录器捕获了一个代码（我只消除了*select*）：

```
With Range("B:B").Validation
    .Delete
    .Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:= _
    xlBetween, Formula1:="=values_colors"
    .IgnoreBlank = True
    .InCellDropdown = True
    .InputTitle = ""
    .ErrorTitle = ""
    .InputMessage = ""
    .ErrorMessage = ""
    .ShowInput = True
    .ShowError = True
End With 
```

您仍然可以捕获值的变化，看看`Worksheet_Change Event`.

# python - boto 连接在本地和 heroku python shell 中工作，但在 webapp 中失败

> ID：14148552
> 
> 赞同：1
> 
> 时间：2013-01-03T22:50:43.093
> 
> 标签：python, heroku, flask, boto

我不确定如何进一步诊断。Heroku 的 evns 配置正确。一切都在我的本地机器线上工作很有吸引力。在生产中，当我尝试使用此功能时出现内部服务器错误。

我预订了一个 live shell，那里一切正常：

```
In [5]: s3conn = boto.connect_s3(app.config["AWS_ACCESS_KEY_ID"],app.config["AWS_SECRET_ACCESS_KEY"])

In [6]: s3conn
Out[6]: S3Connection:s3.amazonaws.com

In [7]: bucket = s3conn.get_bucket(app.config["S3_BUCKET"])

In [8]: bucket
Out[8]: <Bucket: petalbucket>

In [10]: key = bucket.get_key('AGRAPH')

In [11]: key

In [12]: type(key)
Out[12]: NoneType

In [14]: key = bucket.get_key('charts/AGRAPH')

In [15]: key
Out[15]: <Key: petalbucket,charts/AGRAPH>

In [16]: seconds = 60*5

In [17]: url = key.generate_url(expires_in=seconds)

In [18]: url
Out[18]: 'https://petalbucket.s3.amazonaws.com/charts/AGRAPH?Signature=VL9Q9r0Q%2F5UbZDhW%2F%2BeUYFezSGU%3D&Expires=1357251512&AWSAccessKeyId=AKIAJBEQAKKMVPGYYNRA' 
```

代码：

```
 def download_s3(file_title):
        s3conn = boto.connect_s3(app.config["AWS_ACCESS_KEY_ID"],app.config["AWS_SECRET_ACCESS_KEY"])
        bucket = s3conn.get_bucket(app.config["S3_BUCKET"])
        key = bucket.get_key(file_title)
        seconds = 60*5
        url = key.generate_url(expires_in=seconds)
        return url 
```

heroku 日志：

```
2013-01-03T22:21:05+00:00 app[web.1]:     respiter = self.wsgi(environ, resp.start_response)
2013-01-03T22:21:05+00:00 app[web.1]:     response = self.make_response(self.handle_exception(e))
2013-01-03T22:21:05+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/newrelic-1.9.0.21/newrelic/api/web_transaction.py", line 563, in __call__
2013-01-03T22:21:05+00:00 app[web.1]:     return wrapped(*args, **kwargs)
2013-01-03T22:21:05+00:00 app[web.1]: Traceback (most recent call last):
2013-01-03T22:21:05+00:00 app[web.1]:     result = application(environ, _start_response)
2013-01-03T22:21:05+00:00 app[web.1]: 2013-01-03 22:21:05 [7] [ERROR] Error handling request
2013-01-03T22:21:05+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/gunicorn/workers/sync.py", line 105, in handle_request
2013-01-03T22:21:05+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/newrelic-1.9.0.21/newrelic/api/object_wrapper.py", line 220, in __call__
2013-01-03T22:21:05+00:00 app[web.1]:     self._nr_instance, args, kwargs)
2013-01-03T22:21:05+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/newrelic-1.9.0.21/newrelic/api/web_transaction.py", line 485, in __call__
2013-01-03T22:21:05+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/flask/app.py", line 1701, in __call__
2013-01-03T22:21:05+00:00 app[web.1]:     return self._nr_next_object(environ, start_response)
2013-01-03T22:21:05+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/flask/app.py", line 1689, in wsgi_app
2013-01-03T22:21:05+00:00 app[web.1]:     response = self.full_dispatch_request()
2013-01-03T22:21:05+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/flask/app.py", line 1360, in full_dispatch_request
2013-01-03T22:21:05+00:00 app[web.1]:     rv = self.handle_user_exception(e)
2013-01-03T22:21:05+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/flask/app.py", line 1358, in full_dispatch_request
2013-01-03T22:21:05+00:00 app[web.1]:     rv = self.dispatch_request()
2013-01-03T22:21:05+00:00 app[web.1]:     self._nr_instance, args, kwargs)
2013-01-03T22:21:05+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/newrelic-1.9.0.21/newrelic/api/object_wrapper.py", line 220, in __call__
2013-01-03T22:21:05+00:00 app[web.1]:     self._nr_instance, args, kwargs)
2013-01-03T22:21:05+00:00 app[web.1]:     return wrapped(*args, **kwargs)
2013-01-03T22:21:05+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/flask_login.py", line 496, in decorated_view
2013-01-03T22:21:05+00:00 app[web.1]:   File "/app/petalapp/views.py", line 135, in add_pci_form
2013-01-03T22:21:05+00:00 app[web.1]:     return fn(*args, **kwargs)
2013-01-03T22:21:05+00:00 app[web.1]: AttributeError: 'NoneType' object has no attribute 'generate_url'
2013-01-03T22:21:05+00:00 app[web.1]:   File "/app/petalapp/aws/tools.py", line 58, in download_s3
2013-01-03T22:21:05+00:00 app[web.1]:     url = key.generate_url(expires_in=seconds)
2013-01-03T22:21:05+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/newrelic-1.9.0.21/newrelic/api/function_trace.py", line 81, in literal_wrapper
2013-01-03T22:21:05+00:00 app[web.1]:     url =download_s3(in_file + title)
2013-01-03T22:21:05+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/newrelic-1.9.0.21/newrelic/api/pre_function.py", line 14, in wrapper
2013-01-03T22:21:05+00:00 app[web.1]:     return self.view_functions[rule.endpoint](**req.view_args)
2013-01-03T22:21:05+00:00 app[web.1]:     return self.wsgi_app(environ, start_response)
2013-01-03T22:21:05+00:00 app[web.1]:     return wrapped(*args, **kwargs)
2013-01-03T22:21:05+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/newrelic-1.9.0.21/newrelic/api/object_wrapper.py", line 220, in __call__
2013-01-03T22:21:05+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/newrelic-1.9.0.21/newrelic/api/function_trace.py", line 81, in literal_wrapper
2013-01-03T22:21:05+00:00 app[web.1]:     return wrapped(*args, **kwargs)
2013-01-03T22:21:05+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/newrelic-1.9.0.21/newrelic/api/object_wrapper.py", line 220, in __call__
2013-01-03T22:21:05+00:00 app[web.1]:     self._nr_instance, args, kwargs)
2013-01-03T22:21:05+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/newrelic-1.9.0.21/newrelic/api/transaction_name.py", line 51, in literal_wrapper
2013-01-03T22:21:05+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/flask/app.py", line 1687, in wsgi_app
2013-01-03T22:21:05+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/flask/app.py", line 1344, in dispatch_request 
```

我的预感是我不了解 boto 与 heroku 的互动。或者没有正确设置某些东西，但我无法从这些信息中看到可能是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:05:45.297

当您输入错误的文件名时（即当您查找“AGRAPH”而不是“charts/AGRAPH”时） ，堆栈建议`bucket.get_key(file_title)`返回`None`与您在上面得到的完全相同的响应

设置成什么`file_title`？这是正确的吗？我建议进行一些调试来获得它的价值。

# php - PHP/MySQL - PDO 库获取总行数

> ID：14148555
> 
> 赞同：0
> 
> 时间：2013-01-03T22:50:59.020
> 
> 标签：php, pdo

我将如何使用 PDO 库获取表中的总行数？

以下是我执行查询的方式。

```
$query = " 

"; 

try 
{ 

    $stmt = $db->prepare($query); 
    $stmt->execute(); 
} 
catch(PDOException $ex) 
{ 

    die("Failed to run query: " . $ex->getMessage()); 
} 
```

**编辑**

我应该说得更清楚，对不起，但我正在寻找获取行数的 PDO 方式......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T23:05:50.020

数据库没有行。但是，一张桌子可以。我认为您正在寻找的是一个 SQL 查询，它将计算表中的行数。你可以这样做：

```
SELECT COUNT(*) AS count FROM table 
```

如果执行该查询，结果中的计数字段将包含表中的行数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T23:10:17.580

看看[PDO](http://php.net/manual/fr/pdostatement.rowcount.php)中的行数。

1) 对删除、更新或插入查询有用

2）查看kokx的选择查询的[答案](https://stackoverflow.com/questions/14148555/php-mysql-pdo-library-get-total-number-of-rows/14148730#14148730)

# java - 如何让它仅在控制台窗口中运行？或者我可以隐藏框架窗口但仍然可以使用吗？

> ID：14148556
> 
> 赞同：0
> 
> 时间：2013-01-03T22:51:01.180
> 
> 标签：java, graphics, console, mouseevent, frame

如果您不熟悉 HoltSoft 的 Ready To Program 以及其中的控制台类，这不是您可以回答的问题。

请不要建议使用 javax.swing 中的任何东西，或者任何可以使它成为小程序的东西。我不应该使用这些。

```
import java.awt.event.*;
import java.awt.*;
import hsa.*;

public class MouseTest extends Frame
{
    int startX, startY, endX, endY;
    Console c = new Console ();
    public MouseTest ()
    {
        super ();

        MouseListener start = new MouseListener ()
        {
        public void mouseClicked (MouseEvent e)
        {
        }

            public void mouseEntered (MouseEvent e)
            {
            }

            public void mouseExited (MouseEvent e)
            {
            }

            public void mousePressed (MouseEvent e)
            {
                startX = endX = e.getX ();
                startY = endY = e.getY ();
                repaint ();
            }

            public void mouseReleased (MouseEvent e)
            {
            }
        }
        ;
        addMouseListener (start);

        MouseMotionListener end = new MouseMotionListener ()
        {
            public void mouseDragged (MouseEvent e)
            {
                endX = e.getX ();
                endY = e.getY ();
                repaint ();
            }

            public void mouseMoved (MouseEvent e)
            {
            }
        }
        ;
        addMouseMotionListener (end);

    }

    public void paint (Graphics g)
    {
        super.paint (g);
        c.clear ();
        c.setColor (Color.black);
        c.drawLine (startX, startY, endX, endY);
    }

    public static void main (String args[])
    {
        Frame frame = new MouseTest ();
        frame.setLocation (950, 100);
        frame.setSize (400, 400);
        frame.show ();
    }
} 
```

好的，它的作用是： - 打开重叠的框架窗口和控制台窗口 - 当用户在框架窗口上单击并拖动时，控制台窗口的同一位置会出现一条线

我尝试隐藏 Frame 窗口以使其看起来好像他们的用户直接在 Console 窗口上绘图，但这似乎只是禁用了框架窗口。

有没有办法让 Frame 窗口不可见但处于活动状态？如果没有，有没有办法完全取出框架窗口并将所有内容放在控制台窗口上？

是的，我需要在控制台上进行（准备编程中的 HoltSoft 控制台类）

我不能使用 JFrame，因为它在 javax.swing 中，我不允许使用它。

# wordpress - 获取Wordpress首页的ID

> ID：14148558
> 
> 赞同：16
> 
> 时间：2013-01-03T22:51:08.907
> 
> 标签：wordpress

在 Wordpress 管理设置>阅读中，您可以将“首页显示为”配置为首页的静态页面。现在我想检索设置为显示为首页的选定静态页面的 ID。我试过谷歌搜索但没有多大用处，因此我想知道是否有一个本机函数来检索这个 ID。（如果有本机直接功能，我不想编写解决方法）。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-03T23:16:18.780

用作静态页面的页面ID存储在`wp_options`WP表中，为页面的`option_name`=`page_on_front`和`option_value`=ID。因此，如果您想检索此值，只需使用`get_option('page_on_front')`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-27T13:38:49.343

我一直在寻找解决方案，您可以在其中选择一个页面作为博客存档的占位符。

您也可以这样做，但随后查询“page_for_posts”而不是“page_on_front”。所以：

```
$pageID = get_option('page_for_posts'); 
```

为这种情况做的伎俩。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T23:18:06.093

这是一个想法：

先按 Title 获取页面

```
$Page = get_page_by_title( 'test' ); 
```

然后，像这样获取ID

```
echo $Page->ID . "<br /><br />"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-02T15:04:21.003

查看静态页面的page_id最简单的方法是将静态页面更改为另一个页面，然后转到Pages并单击旧页面。page_id 显示在编辑区域上方的永久链接中。看到 page_id 后，您可以将静态页面更改为旧页面。静态页面的永久链接不显示 page_id，但对所有其他页面显示。

# android - 清除安卓下载列表

> ID：14148564
> 
> 赞同：1
> 
> 时间：2013-01-03T22:51:25.283
> 
> 标签：android, download, sd-card

我正在尝试制作一个应用程序，该应用程序将在我的设备上进行一些清理，除此之外，我希望它删除驻留在我的`Download`目录中的所有文件。我使用这样的方法来删除文件：

```
private static void deleteFiles(File path) {
    Util.Log("deleting all files underneath " + path.getName());
    if( path.exists() && path.isDirectory() ) {
        File[] files = path.listFiles();
        for(int i=0; i<files.length; i++) {
            if(files[i].isDirectory()) {
                Util.Log(files[i].getName() + " is a dir, being recursive.");
                deleteFiles(files[i]);
            }else {
                Util.Log(files[i].getName() + " is a file, deleting it.");
                files[i].delete();
            }
        }
    }
} 
```

这是正确删除文件（我已使用文件管理器验证并插入 PC）。但是，如果我在我的设备上打开股票“下载”应用程序，所有文件仍然列在那里。当我单击一个时，我会弹出一个弹出窗口，上面写着“找不到下载的文件。[再试一次] [删除]。再次按尝试将重新下载文件，按删除将删除列表中的条目。我想知道是否有一些广播或其他东西可以用来告诉这个下载应用程序我希望它与当前文件系统“刷新”或“同步”，以便它能够识别出文件已被删除。

从目录中删除图像时也会发生类似的情况，删除后`DCIM`它们仍会出现在股票“图库”应用程序中。我能够广播一个 MEDIA_MOUNTED 意图，导致 Gallery 应用程序使用当前文件“刷新”（然后正确地从 Gallery 应用程序中删除图像）。但是 MEDIA_MOUNTED 似乎不会影响下载应用程序。

是否有任何类似的方法可以告诉下载应用程序我希望它根据目录中当前存在（或不存在）的文件刷新其列表`/sdcard/Download/`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T00:17:14.167

实际上可以清除下载应用程序中的条目。您可以简单地使用`remove(id)`DownloadManager 中的方法。唯一的问题是您可能不再拥有下载文件的 referenceId。如果您有本地文件 Uri 或文件名，您可以简单地查询 DownloadManager 以获取成功下载并查找 id。看起来很麻烦，但是很管用。

# javascript - 使用 JQuery .val() 提取 HTML 值

> ID：14148567
> 
> 赞同：1
> 
> 时间：2013-01-03T22:51:30.650
> 
> 标签：javascript, jquery, html, dom

我浏览了许多关于 SO 和 Google 的帖子，我想我错过了关于 .val() 的一步或理解，因为它代表我下面的代码在 .val() 中返回未定义。非常感谢任何有关获取实际按钮值的提示。

简单地说，我有一个 HTML 按钮，我想在点击时提取该按钮的值并显示它。

HTML

```
<button type="button" name="criterianButton" id="english" class="searchButton" value="English">English</button> 
```

jQuery

```
var buttonValues = $('#english').val();

$(document).ready(function(){
    $('button').click(function(){
            $('#resultsView').append('<div class="searchResults">'+buttonValues+'</div>');
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T22:57:18.407

就放进`var buttonValues = $('#english').val();`去`$(document).ready()`。

JAVASCRIPT：

```
$(document).ready(function(){
    var buttonValues = $('#english').val();
    $('button').click(function(){
            $('#resultsView').append('<div class="searchResults">'+buttonValues+'</div>');
    });
});​ 
```

演示：

[http://jsfiddle.net/qmMhJ/](http://jsfiddle.net/qmMhJ/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T23:01:07.823

这不起作用的原因是因为您的 jQuery 选择器：

```
var buttonValues = $('#english').val(); 
```

在文档准备好之前执行。所以，就像其他一些答案所说的那样，你需要把它放在你的 $(document).ready() 调用中，它会起作用。您基本上是在浏览器知道它存在之前尝试找到该值。这是一些使其正常工作的示例代码：

```
$(document).ready(function(){
    var buttonValues = $('#english').val();
    $('button').click(function(){
        alert("the value of buttonValues = " + buttonValues);
    });
});​ 
```

这是一个[jsfiddle](http://jsfiddle.net/Tgsm4/)

如果您还有其他问题，请随时发表评论和提问！

# javascript - 为什么我的 json 引用返回未定义？

> ID：14148569
> 
> 赞同：1
> 
> 时间：2013-01-03T22:51:43.233
> 
> 标签：javascript, jquery, ajax, json

**我正在使用这个 JavaScript：**

```
$.getJSON("/aTest.json", function (jsonObj) {
    $("#testJSONBtn").click(function () {
        var val = "";
        for (var i = 0; i <= jsonObj.events.length; ++i) {
            val += jsonObj.events[i].title + ", " + jsonObj.events[i].date + ", " + jsonObj.events[i].explanation + "<br/>";
        }
        $("#JSONOutput").append(val);
    });
}); 
```

**要访问 json 文件：**

```
{
    "events":
    [
        {"title":"Okmulgee Public Schools Starts 3rd Quarter" , "date":"1-2-2013" , "explanation":"Okmulgee Public Schools begins its third quarter."},
        {"title":"Okmulgee Public Schools-Closed in Observance of Martin Luther King Jr. Holiday" , "date":"1-21-2013" , "explanation":"The Okmulgee Public Schools will be closed in observance of the Martin Luther King Jr. holiday."},
        {"title":"Okmulgee Public Schools County Professional Day" , "date":"2-1-2013" , "explanation":"Okmulgee Public Schools County Professional Day is today."}
    ]
} 
```

在最终让 IIS Express 提供 json 文件之后，我已经查看了超过一千次的语法并且看不到任何错误，但是当我尝试得到这个时，我得到：

```
Uncaught TypeError: Cannot read property 'title' of undefined 
```

它在 JavaScript/jQuery 函数的这一行出错：

```
val += jsonObj.events[i].title + ", " + jsonObj.events[i].date + ", " + jsonObj.events[i].explanation + "<br/>"; 
```

我很茫然，我研究了以下网页和 StackOverflow 问题：

[为什么我的 JSON 对象未定义？](https://stackoverflow.com/questions/13808809/why-is-my-json-object-undefined)

[JSON 返回未定义](https://stackoverflow.com/questions/5634436/json-returning-as-undefined)

[调用 Json 数据返回 undefined "](https://stackoverflow.com/questions/3651732/calling-json-data-returns-undefined)

[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

[http://www.w3schools.com/json/default.asp](http://www.w3schools.com/json/default.asp)

当与 W3Schools 的示例相匹配时，语法似乎是正确的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T22:58:11.250

你有一个额外的 = 在这里：

```
for (var i = 0; i <= jsonObj.events.length; ++i) { 
```

应该：

```
for (var i = 0; i < jsonObj.events.length; ++i) { 
```

你超出了你的数组。

# ios - 将下载进度传递给另一个 ViewController

> ID：14148574
> 
> 赞同：0
> 
> 时间：2013-01-03T22:52:07.220
> 
> 标签：ios, uitableview, progress-bar, afnetworking

我正在使用 AFNetworking，并且可以成功地从 Web 服务器下载文件。

现在我还可以使用以下代码和方法看到进度条填充：

```
_operation.outputStream = [NSOutputStream outputStreamToFileAtPath:_streamingURL append:NO];

[_operation setDownloadProgressBlock:^(NSUInteger bytesRead, long long totalBytesRead, long long totalBytesExpectedToRead) 
```

我现在的问题是：

**我可以看到另一个 ViewController 的进度吗？那将是我下载的 ViewController ？？？**

我可以将标题传递给单元格，并且 tableView 仅在数组有要提供的内容时出现。我只需要展示进度:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:37:36.653

您现在可能已经解决了这个问题，但是对于阅读本文的其他人：

我建议您创建一个充当“API 客户端”的单例类。从那里您发出下载请求，当您推送到新的 UIViewController 时，您只需向 API 客户端询问当前的下载进度。

这样你就不必弄乱通知或在 ViewControllers 之间传递一堆值。

# php - PHP 标头 - 内容类型：image/jpeg - 不适用于 Internet Explorer

> ID：14148586
> 
> 赞同：8
> 
> 时间：2013-01-03T22:52:53.267
> 
> 标签：php, header, file-get-contents

在构建 HTML 模板或修改网站时，我们都讨厌 Internet Explorer。好吧，我最近构建了一个 PHP 图像脚本来隐藏 URL 的位置。它适用于 Firefox、Chrome 甚至 Safari。

Internet Explorer 拒绝显示来自 PHP 脚本的图像。它甚至没有给出损坏的图像图标。简单的空白方块。

Android 也有同样的问题，但我可以在另一个时间解决这个问题，并且可能是相关的。

这是我的图像脚本代码：

```
$image_id = $_GET['id'];

include "mysql_connect.php";
$sql = "SELECT * FROM images WHERE code='$image_id'";
$result = mysql_query($sql);
$r=mysql_fetch_array($result);

$imagepath=$r['path'];

// Produce proper Image
header("Content-type: image/jpeg");

echo file_get_contents("$imagepath"); 
```

我在谷歌和这个网站上搜索了高低。找不到可靠的来源来解释 Internet Explorer 不显示图像的原因。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T23:01:02.557

Content-Type 标头名称是用大写的 T 编写的。我不确定这是否是问题所在，但某些浏览器在使用小写 t 编写的 Content-Type 标头时可能无法识别。因此，您应该使用：

```
header("Content-Type: image/jpeg"); 
```

其他可能有问题的事情是，当您尝试显示不是 jpeg 而是 png 或 gif 的图像时，同时提供 image/jpeg 内容类型标题。因此，您应该确保为浏览器提供正确的内容类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T23:02:28.103

Internet Explorer 使用 mime 类型`image/pjpeg`。您`pjpeg`用于 IE 和`jpeg`其他浏览器。

```
header("Content-Type: image/pjpeg"); 
```

来源：[image/pjpeg 和 image/jpeg](https://stackoverflow.com/questions/5147049/image-pjpeg-and-image-jpeg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T23:04:08.870

设置内容长度标头。

```
header("Content-Length: " . filesize($imagepath)); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-08-07T20:26:34.647

我想我知道问题是什么。

Internet Explorer 希望您使用 image/jpeg 而不是 image/jpg。

尝试这个：

```
Header("Content-Type: image/jpeg"); 
```

所有浏览器都接受这种格式，您再也不用担心了。

# html - 在 AJAX 中传递 HTML 表单值

> ID：14148589
> 
> 赞同：0
> 
> 时间：2013-01-03T22:53:05.263
> 
> 标签：html, jquery

有没有办法使用现有的ajax代码传递下面表单的“日期”输入值？我意识到目前我正在传递“peter”和“Sheffield”，但想将其切换为表单中输入的值：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<script type="text/javascript"
    src=http://code.jquery.com/jquery-latest.js>    
</script>
<script type="text/javascript">
// This functions starts the ajax to show the output from post.php
function StartAjax(ResultsId){
    $.ajax({
      type: "POST",
      url: "postTest.php",
      cache: false,
      data: "name=Peter&location=Sheffield",
      success: function(html, status){
        $("#"+ResultsId).append(html);
        $('#status').append(status);
      } 
    });
}
</script>
</head>
<body>
<h1> Run Club</h1>
testing
<form>
date: <input type="text" name="date"><br>

</form>
<a href="#" onclick="StartAjax('ResultsId');">Click Here to see updates from postTest.php</a>
<div id="ResultsId"></div>
<div id="status"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T22:54:46.457

你可以得到日期`$('input[name="date"]').val()`

因此，您的数据值将如下所示：

```
data: "name=Peter&location=Sheffield&date=" + $('input[name="date"]').val(), 
```

# php - 有没有更好的方法来重新排列这个数组？

> ID：14148592
> 
> 赞同：0
> 
> 时间：2013-01-03T22:53:26.270
> 
> 标签：php, arrays, function, variables

有没有更好（更有效的方法）让第一个和最后一个键交换这个数组中的位置？

```
 <?php 

 function jim_is_jill($user_names) {
    $user_A = $user_names[0];
    $user_B = $user_names[1];
    $user_C = $user_names[2];
    $user_D = $user_names[3];

    $new_arr = array($user_D, $user_B, $user_C, $user_A);

    return $new_arr;

 }

 $user_names = array('Jim', 'Josh', 'Jamie', 'Jill');
 print_r(jim_is_jill($user_names));
 ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T22:56:26.250

试试这个：

```
list($user_names[0],$user_names[3]) = array($user_names[3],$user_names[0]); 
```

一般来说：

```
list($a,$b) = array($b,$a); 
```

这是在不使用任何临时变量的情况下交换两个变量的最佳方式。

您还可以创建一个函数来交换任意条目：

```
function swap(&$arr,$x,$y) {
    list($arr[$x],$arr[$y]) = array($arr[$y],$arr[$y]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T22:55:59.370

像这样交换它们怎么样：

```
...
$temp = $user_names[0];
$user_names[0] = $user_names[3];
$user_names[3] = $temp;
... 
```

# r - 使用 RCurl 检索 URL 提供的日期格式与浏览器中不同

> ID：14148596
> 
> 赞同：4
> 
> 时间：2013-01-03T22:54:34.317
> 
> 标签：r, curl

我正在尝试使用 RCurl 在以下 URL 处抓取移动格式的网页：

[http://m.fire.tas.gov.au/?pageId=incidentDetails&closed_incident_no=161685](http://m.fire.tas.gov.au/?pageId=incidentDetails&closed_incident_no=161685)

使用此代码：

```
library(RCurl)
options( RCurlOptions = list(verbose = TRUE, useragent="Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US) AppleWebKit/525.13 (KHTML, like Gecko) Chrome/0.A.B.C Safari/525.13"))
inurl <- getURL(http://m.fire.tas.gov.au/?pageId=incidentDetails&closed_incident_no=161685) 
```

请注意，我尝试将用户代理设置为看起来像 Chrome 浏览器 - 无论是否这样做，我得到的结果都是相同的。当我在 Chrome 中查看 URL 时，日期格式如下：

![网页上的文字截图](../Images/a6762b2b13d3b772213a77ba65312bd7.png)

HTML 源代码与以下内容相匹配：

```
Last Updated: 24-Aug-2009 11:36<br>
First Reported: 24-Aug-2009 11:24<br> 
```

但在 R 中，在我从 URL 中检索数据后，日期的格式如下：

```
Last Updated: 2009-08-24<br>    
First Reported: 2009-08-24<br> 
```

有什么想法吗？我认为服务器正在响应浏览器/Curl 的用户代理或区域或语言或类似的东西，并返回不同的数据，但无法弄清楚我需要在 RCurl 的选项中设置什么来更改它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T02:45:07.700

看起来服务器正在期待“Accept-Language”标头：

```
library(RCurl)
getURL("http://m.fire.tas.gov.au/?pageId=incidentDetails&closed_incident_no=161685", 
       httpheader = c("Accept-Language" = "en-US,en;q=0.5")) 
```

为我工作（退货`First Reported: 24-Aug-2009 11:24<br>`等）。我通过使用[HttpFox](https://addons.mozilla.org/en-US/firefox/addon/httpfox/) Firefox 插件发现了这一点。

# java - 如何使用子字符串从缓冲阅读器中提取文本

> ID：14148599
> 
> 赞同：0
> 
> 时间：2013-01-03T22:54:50.693
> 
> 标签：java, android, bufferedreader, substring

我正在尝试使用 substrings 和 bufferedreader 提取两个标签之间的文本，但出现 indexoutofbounds 异常。使用 if 语句是因为我正在解析 5 个网页，并且我想从每个网页中读取文本，下面是我的代码：

```
 public static List<WebPage> readRawTextFile(Context ctx, int resId) {
    InputStream inputStream = ctx.getResources().openRawResource(
            R.raw.pages);

    InputStreamReader inputreader = new InputStreamReader(inputStream);
    BufferedReader buffreader = new BufferedReader(inputreader);
    String line;
    StringBuilder text = new StringBuilder();
    String txt1 = text.toString();
    try {
        int count = 0;
        while ((line = buffreader.readLine()) != null) {

            if (line.length() == 0) {
                int sURL = line.indexOf("<!--");
                int eURL = line.indexOf("-->");
                String newSub = txt1.substring(txt1.indexOf(sURL) + 1,
                        txt1.indexOf("\""));
                System.out.println(newSub);
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T22:58:23.027

看看这段代码：

```
if (line.length() == 0) {
    int sURL = line.indexOf("<!--");
    int eURL = line.indexOf("-->");
    String newSub = txt1.substring(txt1.indexOf(sURL) + 1,
            txt1.indexOf("\""));
    ...
} 
```

*如果该行为空，*您将进入该块。所以`sURL`并且`eURL`肯定会是-1。

然后你使用`txt1.indexOf(-1)`，这开始很奇怪（你为什么要使用`indexOf`并传入一个索引？） - 我强烈怀疑`indexOf`这里的两个值都将是-1，所以你将拥有：

```
String newSub = txt1.substring(0, -1); 
```

...这将失败。也不清楚你为什么要使用`txt1.substring`而不是在`line.substring`这里。

*基本上*，我认为您的代码有很多问题。您应该*非常*仔细地查看每一行，并对其进行更改，直到它真正有意义为止。然后添加单元测试...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T22:59:04.090

既然`sURL`已经是

```
int sURL = txt1.indexOf("<!--"); 
```

，那么`txt1.indexOf(sURL)`在

```
String newSub = txt1.substring(txt1.indexOf(sURL) + 1, txt1.indexOf("\"")); 
```

行，可能你的意思是：

```
String newSub = txt1.substring(sURL + 1, txt1.indexOf("\"")); 
```

那只会留下您`txt1.indexOf("\"")`以后使用的原因的谜团。

# c# - 从后面的 C# 代码更改 asp:Label 文本

> ID：14148603
> 
> 赞同：1
> 
> 时间：2013-01-03T22:55:18.980
> 
> 标签：c#, asp.net

我已经尝试了一个小时左右；只是似乎无法弄清楚。我`asp:Button`在一个 aspx 页面上有一个，需要完成几个功能，其中一个是更改`asp:Label`. 这似乎应该很简单，其他在线帖子表明我正在正确解决问题但是......

问题很简单，但它杀死了我。为了调试/故障排除，我将代码剥离为非常基础的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    allValidationMsg.Text = "Original text";
}

protected void btnRegister_Click(object sender, EventArgs e)
{
    allValidationMsg.Text = "Text changed";
} 
```

单击按钮时，没有任何反应。我敢肯定，我错过了一些简单的事情。

更新：

```
<asp:Label id="allValidationMsg" runat="server" height="22px" ForeColor="Red"></asp:Label>

<asp:Button class="navbutton" ID="btnRegister" runat="server" 
                    Text="Register User" OnClick="btnRegister_Click" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T22:58:15.693

我认为当您单击按钮时，再次调用 Page_Load 并保留原始文本。试试这个

```
protected void Page_Load(object sender, EventArgs e)
{
    if(!Page.IsPostBack)
       allValidationMsg.Text = "Original text";
} 
```

除此之外，我假设您在标记中为按钮注册了事件处理程序，因为我在您的代码隐藏中的任何地方都看不到它

```
<asp:Button id="Button1" runat="server" OnClick="btnRegister_Click" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T22:58:07.137

可能您忘记将按钮单击绑定到处理程序。

您可以在代码隐藏中执行类似的操作：

```
mybutton.Click+=btnRegister_Click; 
```

或在 aspx 中：

```
<asp:Button id="Button1"
       Text="Click here for greeting..."
       OnClick="btnRegister_Click" 
       runat="server"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T00:13:31.380

解决了; 问题似乎与使用了 CompareValidator 有关。不太明白为什么，但是当这个验证器被注释掉时，问题就解决了。有趣的是，同一页面上的RequiredField 和RegularExpression 验证器不会导致任何问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T23:11:47.410

我可以看到您在标记（案例）中写了“onclick”而不是“OnClick”。可能这是问题的原因。

**UPDATE1** 您可以尝试这样做吗（检查回发是否有效）：

```
protected void Page_Load(object sender, EventArgs e)
{
    if(!Page.IsPostBack)
    {
       allValidationMsg.Text = "Original text";
    } 
    else
    {
       allValidationMsg.Text = "After postback";
    }
} 
```

如果按下按钮后文本正在更改？

**UPDATE2**另外，请尝试对文本进行一些更改，以了解是否真正部署了新版本（以排除强缓存问题）。

**UPDATE3**您可以尝试在代码隐藏中进行绑定（并从 aspx 中删除它）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T23:19:13.177

嘿，我想我知道它是什么。在您的标记中，您的标签看起来像这样吗？

```
<asp:Label ID="Label1" runat="server" >Some text</asp:Label> 
```

你希望在你的标记中：

```
<asp:Label ID="Lable1" runat="server" text ="some text"></asp:Label> 
```

我以前也有过这种情况。如果您将标记更改为该标记。它应该工作。

# javascript - Jquery / Javascript - 长数字的数学

> ID：14148604
> 
> 赞同：0
> 
> 时间：2013-01-03T22:55:35.257
> 
> 标签：javascript, jquery, math

我的观点有几个数字：

```
var total      = '100.000.559,99';
var paymentOne = '560';
var paymentTwo = '99.999.999,99'; 
```

我改变了我的 paymentOne，所以我想重新计算它们。我将所有数字包装在：parseFloat，但我`100.000.559,99`将是`100`. 所以这行不通..

所以我的问题是，我怎样才能将它们用于数学？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T23:00:18.220

您可以使用以下方式转换为浮点数：

```
+total.split(".").join("").replace(",", ".");  // 100000559.99 
```

或使用正则表达式：

```
+total.replace(/[.,]/g, function(c) { return c === "," ? "." : "" }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T22:58:31.287

看起来您使用的是逗号而不是句点，以及根本不需要它们的句点。试试这个：

```
var total      = 100000559.99;
var paymentOne = 560;
var paymentTwo = 99999999.99; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T23:01:10.077

在解析之前，您可以执行以下操作

```
var total = '100.000.559,99';
total = total.replace( /\./g, "" ).replace( /,/g, "." ); 
```

最好将它包装在一个函数中

```
function convertToFloat( num ) {
    num = num.replace( /\./g, "" ).replace( /,/g, "." );
    return parseFloat( num );
} 
```

# actionscript-3 - AIR 调试编译错误 ANE

> ID：14148620
> 
> 赞同：0
> 
> 时间：2013-01-03T22:56:31.263
> 
> 标签：actionscript-3, air

我正在尝试调试我的空中应用程序但收到错误：

```
Process terminated without establishing connection to debugger.

invalid profile specified 'Application does not support current profile'

Launch command details:  "/Applications/Adobe Flash Builder 4.6/sdks/4.6.0 AIR 3.5/bin/adl" -runtime "/Applications/Adobe Flash Builder 4.6/sdks/4.6.0 AIR 3.5/runtimes/air/mac" -profile extendedMobileDevice -screensize 768x1004:768x1024 -XscreenDPI 132 -XversionPlatform IOS -extdir "/Users/kerepuki/Documents/Adobe Flash Builder 4.6/.metadata/.plugins/com.adobe.flexbuilder.project.ui/ANEFiles/AppName/macosx/" "/Volumes/Mobile Apps/AppName/Application/Final/bin-debug/AppName-app.xml" "/Volumes/Mobile Apps/AppName/Application/Final/bin-debug" 
```

我认为它与我尝试添加的 ANE 无关，因为我已经在一个空白项目中测试了 ANE，它工作正常。

如果我将应用程序打包并安装在 iPad 上，它可以正常工作。我在 Flash Builder 中使用 AIR 3.5，但不确定如何调试此错误消息。

我的应用程序文件以：

```
<application xmlns="http://ns.adobe.com/air/application/3.5"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T04:24:12.830

必须从应用程序描述文件中删除支持的配置文件节点。

# sql - Postgres中关系表的强制参与

> ID：14148621
> 
> 赞同：3
> 
> 时间：2013-01-03T22:56:41.523
> 
> 标签：sql, postgresql, triggers, check-constraints

代表强制参与 Postgres 的最佳方式是什么？我曾经使用 CHECK 约束或 Sybase 中的 INSERT 和 DELETE TRIGGER 来执行此操作。Postgres 不支持 CHECK 约束中的子查询，我无法正确触发。

我想找到以下替代方案：

```
ALTER TABLE member
 ADD CONSTRAINT member_in_has_address
  CHECK (EXISTS (SELECT *
                 FROM address a
                 WHERE member_id = a.member_id)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T01:59:30.180

我使用可延迟约束触发器解决 1:m 强制关系。

逻辑是：

*   插入父记录；这安排了触发器
*   插入子记录，至少一条
*   犯罪

触发器在提交之前运行，如果它不喜欢它看到的内容，可以通过引发异常来中止提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T20:00:20.597

总结一下，这个问题可以通过以下方式解决：

*   在函数中定义查询，然后从 CHECK 约束中调用它
*   定义抛出异常的函数，然后从触发器调用它
*   定义可延迟的约束触发器

我要尝试所有这些。

# php - 如何让 PDO Fetch() 作为字符串返回

> ID：14148626
> 
> 赞同：6
> 
> 时间：2013-01-03T22:57:14.060
> 
> 标签：php, arrays, pdo

如何让 PDO 将数据作为字符串而不是数组返回？我不确定这是可能的，所以如果不是，有没有办法在处理完数组后将其转换为字符串？

我返回字符串的代码是：

```
$result = $stmt->fetch(PDO::FETCH_ASSOC);
print_r($result); 
```

我尝试了不同的获取类型，例如`FETCH_CLASS` `FETCH_OBJ`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-03T23:00:54.523

你可以这样做：

```
echo $stmt->fetchColumn(); 
```

或者：

```
$result = $stmt->fetch(PDO::FETCH_ASSOC);
echo $result[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-25T06:43:54.440

```
$result = $statement->fetchColumn(); 
```

这项工作对我来说，我在这里注意到的唯一一件事是 fetchColumn() 总是引用表格上的第一列。您需要调整/重新定位表上第一列所需的唯一列，或进行 Sql 查询，即“SELECT”查询以获取所需的唯一列。谢谢

# wordpress - 为 wordpress 创建一个最近的帖子小部件，但在显示第一篇帖子的信息时遇到了问题

> ID：14148629
> 
> 赞同：0
> 
> 时间：2013-01-03T22:57:18.883
> 
> 标签：wordpress, widget

嘿伙计们，我正在制作一个小部件来显示帖子标题、该帖子的摘录及其日期。我的代码在这里：

```
public function widget( $args, $instance ) {

        extract( $args );

        $headline = $instance['headline'];
        $category = $instance['category'];
        $numberposts = $instance['numberposts'];
        $readmore = $instance['readmore'];

        echo $before_widget;

        echo $before_title;

        echo "<p class=\"headline\">$headline</p>";

        echo $after_title;

        $args = array( 'numberposts' => $numberposts, 'category_name' => $category );
        $recent_posts = wp_get_recent_posts( $args );
        foreach( $recent_posts as $recent ){
        echo '<a href="' . get_permalink($recent["ID"]) . '" title=" '.esc_attr($recent["post_title"]).'" >' .   $recent["post_title"].'</a> ';
        echo the_time('F j, Y');
        echo the_excerpt();

        } 
```

如您所见，我正在尝试调用时间和帖子的摘录。它正在工作，但它只显示日期和第一个名为“欢迎”的帖子的摘录。我希望它显示每个帖子的日期和摘录。我将在侧栏中使用小部件发布指向该站点的链接。抱歉，如果我不够清楚或需要更多信息，我对此很陌生。

[http://www.modmacro.us/wpsandbox/](http://www.modmacro.us/wpsandbox/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T01:55:30.753

第一件事：the_excerpt()，已经是一个回显语句。不是退货声明。the_date() 也一样。用“get_”作为前缀，它们会返回你需要的信息，或者你可以去掉前面的 echo 命令。

第二件事：为了使这些功能正常工作，它们需要在 Wordpress 循环中使用。

由于我们已经处于一个循环中，我们只需要确保它适当地更改 Wordpress 全局变量以反映您需要的信息..

```
foreach( $recent_posts as $recent ){
    setup_postdata(get_post($recent['ID']));
    echo '<a href="' . get_permalink() . '" title=" '.esc_attr(get_the_title()).'" >' .   get_the_title().'</a> ';
    echo get_the_time('F j, Y', $recent['ID']);
    the_excerpt();
}
wp_reset_postdata(); 
```

# android - 如何从活动中获取视图？

> ID：14148637
> 
> 赞同：0
> 
> 时间：2013-01-03T22:58:16.710
> 
> 标签：android, view, android-activity

我知道这适用于 onClick 事件处理程序：

```
public void NextPage(View view)
{
    View parentView = (View) view.getParent();
    parentView.setBackground(images[imageNumber]);
} 
```

这很好用。我能够获取被点击的 imagebutton 的父视图。我当前活动视图的背景设置为可绘制图像数组。

但是，我正在尝试使用以下方法在其他地方获得相同的视图：

```
View parentView = getWindow().getDecorView().findViewById(android.R.id.content);
parentview.setBackground(images[imageNumber]); 
```

这行不通。我相信返回的视图不是正确的视图。我可能正在了解我的主要活动。

编辑：

所以我有2个活动。我的 MainActivity 和我的 SecondActivity。在 MainActivity 中单击按钮后，我开始第二个活动：

```
Intent intent = new Intent(this, SecondActivity.class);         
startActivity(intent); 
```

在我的 SecondActivity 中，我的背景有可能发生变化。更改它的一种方法是单击 1 one 2 按钮。这是由上面的 NextPage 代码完成的，只要我可以访问正确的视图，它就可以完美地工作。

还有其他时候我想更改背景，但是，我似乎无法访问正确的视图。我不确定如何找到与 NextPage 能够找到的单击事件相同的视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:16:34.663

我在同一页面上有一个按钮，所以我抓住了那个按钮并获得了它的父视图：

```
myButton.parentView(); 
```

可能不是最好的解决方案，但是，它有效！

# java - 强制隐式数组边界检查的最便宜方法

> ID：14148638
> 
> 赞同：1
> 
> 时间：2013-01-03T22:58:19.643
> 
> 标签：java, arrays, performance, jvm, micro-optimization

假设我有一个具有以下签名的方法：

```
public int indexOf(byte[] bytes, byte toFind, int offset, int length) {
  ...
} 
```

此方法执行一些简单的操作，例如`toFind`在 [offset, offset+length) in 范围内查找字节`bytes`。我想预先检查偏移量和长度是否对`bytes`. 也就是说，偏移量和偏移量+长度以字节为单位。

显式检查类似于：

```
if (offset < 0 || offset > bytes.length - length) {
  throw ...;  // bad santa!
} 
```

似乎我可以通过执行“虚拟”数组访问来更便宜地执行此操作（就发出的字节码而言，也许还有运行时性能）：

```
public int indexOf(byte[] bytes, byte toFind, int offset, int length) {
  int dummy = bytes[offset] + bytes[offset + length - 1];
  ...
} 
```

`int dummy`如果可以的话，我想摆脱`+`它们，或者降低它们的成本。编译器不喜欢独立访问`bytes[offset];`，大概是因为这样的表达式通常没有副作用并且毫无意义（但在这种情况下并非如此）。使用 dummy int 还会导致必须抑制的编译器警告。

关于如何用最少的字节码进行更改的任何建议（运行时性能在这里也很重要，但我怀疑大多数解决方案都被优化为与丢弃未使用部分相同的东西）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T23:11:37.263

这个怎么样 ？

```
if ((bytes[offset] | bytes[offset+length-1])==0) { } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T12:49:49.707

I hope that just executing `bytes[offset]` and `bytes[offset + length - 1]` is the cheapest way. The shortest way in JVM bytecode would be just to execute these expressions and leave it on the operand stack.

However, you can't do it in Java. You also can't use `pop2` instruction (or two `pop` instructions), because `bytes[something]` is not a valid Java command. There are three potentially best ways:

1.  Use a method call like `int java.lang.Math.max(int, int)`. This adds one 3-byte [`invokestatic`](http://docs.oracle.com/javase/specs/jvms/se5.0/html/Instructions2.doc6.html#invokestatic) instruction and one 1-byte [`pop`](http://docs.oracle.com/javase/specs/jvms/se5.0/html/Instructions2.doc11.html#pop) instruction. So, it is a 4-byte overhead. You can save one byte, if you write a static dummy method with two `int` arguments and `void` result. An intelligent JVM optimizer would probably reduce this code to one [`pop2`](http://docs.oracle.com/javase/specs/jvms/se5.0/html/Instructions2.doc11.html#pop2) instruction, since `Math.max(...)` has no side effect and you discard the result by [`pop`](http://docs.oracle.com/javase/specs/jvms/se5.0/html/Instructions2.doc11.html#pop) instruction. However, I am not sure if this applies for Hotspot.
2.  Assign it to a local variable. One assign means one `istore` instruction. If you have five parameters (including `this`, because the method is not static), you use the generic 2-byte [`istore`](http://docs.oracle.com/javase/specs/jvms/se5.0/html/Instructions2.doc6.html#istore) version instead of 1-byte [`istore_<n>`](http://docs.oracle.com/javase/specs/jvms/se5.0/html/Instructions2.doc6.html#istore_n) (for n in {0, 1, 2, 3}). If you had at most three parameters, you would probably save something by reducing scope of the dummy variable.
3.  Compare it (=> generate boolean) and use an empty branch, i.e. `if ((bytes[offset] == bytes[offset+length-1])) { }`. In this case, you don't need any extra method (like max or pop2) or any extra local variable (which enlarges local variable table).

If you don't use any further optimizer and you don't modify the method signature to use less variables, the third way is probably a winner. In my simple test, it requires only 16 bytes for instrutions (some other implementations are equal, but not better) and does not require anything more in local variable table or constant pool. You probably can save several bytes by manual bytecode optimisations or by Proguard. But be careful, Proguard may optimize it too much and remove the array access. (I am not sure, but it claims in documentation that it may remove some NullPointerExceptions.)

See [https://gist.github.com/4523924](https://gist.github.com/4523924)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-19T13:36:54.057

就字节码长度而言，最便宜的方法是多个 JRE 类使用的方法，例如[`ByteBuffer`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/nio/HeapByteBuffer.java#148)：[`ArrayList`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/util/ArrayList.java#995)使用*专用检查方法*。

从 Java 9 开始，有一个用于此目的的标准方法，它也开始取代这些内部检查方法，成为此类检查的中心位置，如果 JVM 的优化器有一种优化方法，它也知道它查看：
[`Objects.checkFromIndexSize​(offset, length, bytes.length);`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Objects.html#checkFromIndexSize(int,int,int))

* * *

与其他方法相比：

*   使用带有虚拟变量的数组访问：

    ```
    public int indexOf1(byte[] bytes, byte toFind, int offset, int length) {
        int dummy = bytes[offset] + bytes[offset + length - 1];
        //...
    } 
    ```

    编译为

    ```
     0: aload_1
     1: iload_3
     2: baload
     3: aload_1
     4: iload_3
     5: iload         4
     7: iadd
     8: iconst_1
     9: isub
    10: baload
    11: iadd
    12: istore        5
    14: ... 
    ```

*   使用数组访问和虚拟分支指令

    ```
    public int indexOf2(byte[] bytes, byte toFind, int offset, int length) {
        if ((bytes[offset] | bytes[offset+length-1])==0) { }
        //...
    } 
    ```

    编译为

    ```
     0: aload_1
     1: iload_3
     2: baload
     3: aload_1
     4: iload_3
     5: iload         4
     7: iadd
     8: iconst_1
     9: isub
    10: baload
    11: ior
    12: ifne          15
    15: ... 
    ```

*   使用专用检查方法

    ```
    public int indexOf3(byte[] bytes, byte toFind, int offset, int length) {
        checkIndex(bytes, offset, length);
        //...
    }

    private void checkIndex(byte[] bytes, int offset, int length) {
       //...
    } 
    ```

    编译为

    ```
     0: aload_0
     1: aload_1
     2: iload_3
     3: iload         4
     5: invokespecial #23                 // Method checkIndex:([BII)V
     8: ... 
    ```

因此，在考虑使用它的代码时，委托会获胜。它也没有在调用方引入局部变量。只要一种以上的方法使用它，实现方法所需的额外空间就会得到回报。这样的方法通常是`private`or `static`，由没有动态调度的指令调用并在运行时内联，因此不会有性能差异。JVM 通常会内联那么小的方法，无论它们是否是热点。

在将隐式数组边界检查的性能与显式比较进行比较时，没有任何理由应该比另一个更快。它们基本上是在做同样的事情，在任何一种情况下，如果 JVM 可以证明调用者总是只传递有效数字，它就可以忽略它们。

顺便说一句，[`Buffer.checkBounds`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/nio/Buffer.java#565)引导您实现只有一个条件：

```
private void checkIndex(byte[] bytes, int offset, int length) {
    if((offset | length | (offset+length) | (bytes.length-(offset+length))) < 0)
        throw new IndexOutOfBoundsException();
} 
```

与数组访问变体不同，这也处理`length`负数的情况（但`offset+length`会产生有效的索引）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T23:07:35.623

不确定字节码长度，但如何：

```
bytes[offset] |= bytes[offset];
bytes[offset + length - 1] |= bytes[offset + length - 1]; 
```

# python - 在python中使用函数名作为变量

> ID：14148643
> 
> 赞同：2
> 
> 时间：2013-01-03T22:58:50.157
> 
> 标签：python

我有一个有趣（可能很愚蠢）的想法：如果我使用内置函数名作为变量来分配某个对象（比如整数）会发生什么。这是我尝试过的：

```
 >>> a = [1,2,3,4]
 >>> len(a)
 4
 >>> len = 1
 >>> len(a)
 Traceback (most recent call last):
   File "<stdin>", line 1, in ?
 TypeError: 'int' object is not callable 
```

似乎python不会以不同的方式对待函数和变量名。在不重新启动 python 解释器的情况下，有没有办法分配`len`回函数？还是撤消分配`len = 1`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-03T23:04:13.593

使用`del len`：

```
>>> a=[1,2,3,4]
>>> len=15
>>> len(a)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'int' object is not callable
>>> del len
>>> len(a)
4 
```

来自[docs.python.org](http://docs.python.org/2/reference/simple_stmts.html#del)：

> 删除名称会从本地或全局名称空间中删除该名称的绑定，具体取决于该名称是否出现在同一代码块中的全局语句中。如果名称未绑定，则会引发 NameError 异常

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-03T22:59:56.860

从技术上讲，您可以从`__builtin__`

```
from __builtin__ import len 
```

但是请不要命名`len`，这会让明智的程序员生气。

好的，首先不要在内置函数之后命名你的变量，其次，如果你想尊重其他函数，那么尊重命名空间

```
import time
time.asctime()
asctime = 4253
time.asctime() # Notice that asctime here is unaffected as its inside the time module(s) namespace 
```

# symfony - 当用户没有正确的角色时如何捕捉

> ID：14148647
> 
> 赞同：1
> 
> 时间：2013-01-03T22:59:03.060
> 
> 标签：symfony, user-roles

我有一个 symfony 应用程序，它利用用户角色来加快开发时间。根据我的经验，我遇到的问题是，如果他们没有与用户关联的适当角色，即使他们当前已通过身份验证，它也会将他们重定向到登录页面。

我将如何覆盖这种行为并让他们保持登录状态，只需将他们发送到一个信息页面，告诉他们需要采取哪些行动来增加他们的角色/特权？

我目前有一个这样设置的提供程序来捕获`AccessDeniedException`：

```
 website.access_denied:
    class: %website.access_denied.class%
    arguments: [ @doctrine.orm.entity_manager, @website.website ]
    tags:
      - { name: kernel.event_listener, event: kernel.exception, method: handle } 
```

然后，在我的`security.yml`，我有这样的`access_denied_handler`设置：

```
 firewalls:
    website:
        access_denied_handler: website.access_denied 
```

最后，我的课：

```
class AccessDenied implements AccessDeniedHandlerInterface
{
    public function handle(Request $request, AccessDeniedException $accessDeniedException)
    {
        // do something here
    }
} 
```

# excel - 在 Excel 中的字符串后插入空白行

> ID：14148651
> 
> 赞同：2
> 
> 时间：2013-01-03T22:59:20.923
> 
> 标签：excel, vba

我正在尝试在 excel 2010 中创建一个宏，以查找工作表中值为“所有客户”的每个单元格。每次找到该值时，我都需要在其下方插入一个空白行。认为这会很简单，但我搜索了很多论坛并尝试使用一些示例代码，但我无法让它正常工作。在 VBA 方面，我是一个完全的新手。以为我会在这里发帖，然后对 VBA 的基础知识进行一些简单的阅读。

如果有人有任何好的培训资源，也请发布。

提前致谢！

编辑：在我的 OP 中，我没有提到任何包含“所有客户”值的行理想情况下都会突出显示并以粗体、增大的字体显示。

这些操作是旧的 Crystal Report 查看/格式化程序在拉取报表时用来自动处理的。根据软件制造商的技术支持，在我们升级程序后，我了解到随着新版本程序的发布，这种格式化功能已被删除。如果在发行说明中对此进行了定义，我将不会执行升级。无论如何，这就是我在这场宏观灾难中的发现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:18:31.137

```
Public Sub InsertRowAfterCellFound()

    Dim foundRange As Range
    Set foundRange = Cells.Find(What:="yourStringOrVariant", After:=ActiveCell) 'Find the range with the occurance of the required variant

    Rows(foundRange.Row + 1 & ":" & foundRange.Row + 1).Insert 'Insert a new row below the row of the foundRange row

    foundRange.Activate 'Set the found range to be the ActiveCell, this is a quick and easy way of ensuring you aren't repeating find from the top

End Sub 
```

您可能需要在代码中添加错误处理，因为如果没有找到具有指定值的单元格，您将收到错误消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T23:22:09.173

假设这是在第一张纸上（“sheet 1”），这是一个缓慢的答案：

```
Sub InsertRowsBelowAllCustomers()

    'Set your worksheet to a variable
    Dim sheetOne as Worksheet 
    Set sheetOne = Worksheets("Sheet1")

    'Find the total number of used rows and columns in the sheet (where "All Customers" could be)
    Dim totalRows, totalCols as Integer
    totalRows = sheetOne.UsedRange.Rows.Count
    totalCols = sheetOne.UsedRange.Columns.Count

    'Loop through all used rows/columns and find your desired "All Customers"
    Dim row, col as Integer
    For row = 1 to totalRows
        For col = 1 to totalCols
            If sheetOne.Cells(row,col).Value = "All Customers" Then
                  Range(sheetOne.Cells(row,col)).Select
                  ActiveCell.Offset(1).EntireRow.Insert
                  totalRows = totalRows + 1 'increment totalRows because you added a new row
                  Exit For  
            End If 
        Next col
    Next row
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T09:08:26.633

[从我的一篇文章中](http://www.experts-exchange.com/Software/Office_Productivity/Office_Suites/MS_Office/Excel/A_2919-Using-Find-and-FindNext-to-efficiently-delete-any-rows-that-contain-specific-text.html)改编的这段代码是有效的，并且避免了循环

1.  它加粗并增加找到文本的字体大小（在整行中，正如蒂姆指出的那样，您应该指定是否仅指单元格）
2.  它在匹配项下方添加一个空白行

**代码**

```
Option Explicit

Const strText As String = "All Customers"

Sub ColSearch_DelRows()
    Dim rng1 As Range
    Dim rng2 As Range
    Dim rng3 As Range
    Dim cel1 As Range
    Dim cel2 As Range
    Dim strFirstAddress As String
    Dim lAppCalc As Long
    Dim bParseString As Boolean

    'Get working range from user
    On Error Resume Next
    Set rng1 = Application.InputBox("Please select range to search for " & strText, "User range selection", ActiveSheet.UsedRange.Address(0, 0), , , , , 8)
    On Error GoTo 0
    If rng1 Is Nothing Then Exit Sub

    'Further processing of matches
    bParseString = True

    With Application
        lAppCalc = .Calculation
        .ScreenUpdating = False
        .Calculation = xlCalculationManual
    End With

    'a) match string to entire cell, case insensitive
    'Set cel1 = rng1.Find(strText, , xlValues, xlWhole, xlByRows, , False)

    'b) match string to entire cell, case sensitive
    'Set cel1 = rng1.Find(strText, , xlValues, xlWhole, xlByRows, , True)

    'c)match string to part of cell, case insensititive
     Set cel1 = rng1.Find(strText, , xlValues, xlPart, xlByRows, , False)

    'd)match string to part of cell, case sensititive
    ' Set cel1 = rng1.Find(strText, , xlValues, xlPart, xlByRows, , True)

    'A range variable - rng2 - is used to store the range of cells that contain the string being searched for
    If Not cel1 Is Nothing Then
        Set rng2 = cel1
        strFirstAddress = cel1.Address
        Do
            Set cel1 = rng1.FindNext(cel1)
            Set rng2 = Union(rng2.EntireRow, cel1)
        Loop While strFirstAddress <> cel1.Address
    End If

    'Further processing of found range if required
    If bParseString Then
        If Not rng2 Is Nothing Then
        With rng2
        .Font.Bold = True
        .Font.Size = 20
        .Offset(1, 0).EntireRow.Insert
        End With
    End If
    End If

    With Application
        .ScreenUpdating = True
        .Calculation = lAppCalc
    End With

End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T05:56:54.320

此函数从最后一行开始并返回到第一行，在 A 列包含“所有客户”的每个单元格之后插入一个空行：

```
Sub InsertRowsBelowAllCustomers()
  Dim R As Integer
  For R = UsedRange.Rows.Count To 1 Step -1
    If Cells(R, 1) = "All Customers" Then Rows(R + 1).Insert
  Next R
End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-17T11:36:40.593

该错误是因为工作表未在使用范围内指定。我稍微更改了代码，我的文本位于 AJ 列中并在单元格上方插入一行。

```
Dim R As Integer

For R = ActiveSheet.UsedRange.Rows.Count To 1 Step -1

  If Range("AJ" & R) = "Combo" Then Rows(R).Insert

Next R 
```

# java - 从后面写文字

> ID：14148653
> 
> 赞同：-2
> 
> 时间：2013-01-03T22:59:37.367
> 
> 标签：java, bufferedreader, bufferedwriter

如标题所示，我想从后面写我的文本并输入到文本文件中。首先，我从文本文件中读取文本，接下来我想将其保存在文本文件中，但在末尾写入。我不知道如何修复我的代码。我的代码读取文本文件，并写入文本文件，但顺序相同，从头到尾。

示例它必须如何工作：

输入文本：

```
aaaaa
bbbb
ccc
dd
f 
```

输出文本：

```
f
dd
ccc
bbbb
aaaaa 
```

我的代码：

```
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.FileReader;
import java.io.FileWriter;

public class Loading {

    public static void main(String[] args) {
        try {

            BufferedReader br = new BufferedReader(new FileReader(
                    "file.txt.txt"));
            String line, txt = "";
            String[] splittedLine;
            while ((line = br.readLine()) != null) {
                txt += linia + "\n";
                splittedLine = line.split(" ");
            }
            System.out.println(txt);
            br.close();

            BufferedWriter bw = new BufferedWriter(new FileWriter("file2"));
            bw.write(txt);
            bw.newLine();
            bw.close();

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:03:21.777

您将需要一个行列表，因为您事先不知道条目的数量，因此您需要一些可以随着您的代码增长的东西。

```
List<String> lines = new ArrayList<String>(); 
```

并将所有行添加到它

```
while ((line = br.readLine()) != null) {
    lines.add(line);
} 
```

然后以相反的顺序将它们写入您的文件：

```
for(int i = lines.size() - 1; i >= 0; i--) {
    bw.write(lines.get(i));
    bw.newLine();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T23:01:00.920

读取文件到字符串

从末尾开始将字符串数据写入文件。

对于行，使用字符串数组存储文件中的数据，然后从数组的末尾遍历到开头。

这是完整的程序。

```
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.FileReader;
import java.io.FileWriter;
import java.util.ArrayList;
import java.util.List;

public class Loading {

    public static void main(String[] args) {
        try {

            BufferedReader br = new BufferedReader(new FileReader(
                    "DB.xml"));
            String line, txt = "";
            List<String> lines = new ArrayList<String>();
            while ((line = br.readLine()) != null) {
                lines.add(line);
            }
            System.out.println(txt);
            br.close();

            BufferedWriter bw = new BufferedWriter(new FileWriter("file2"));
            for(int i=lines.size()-1; i>=0; i--){
            bw.write(lines.get(i));
            bw.newLine();
            }
            bw.close();

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T23:24:26.350

您的代码错误地连接了字符串。如果您试图颠倒顺序，它需要将行文本添加到字符串的开头而不是末尾。

```
txt = line + txt + "\n";  //original: txt += linia + "\n" 
```

但最好使用 StringBuilder 对象为您处理连接。就像是...

```
StringBuilder txt = new StringBuilder();
String line;
while ((line = br.readLine()) != null) {
    txt.insert(0, line + "\n");
}
System.out.println(txt.toString()); 
```

我同意其他答案中的数组方法也可以工作，并且可能更容易阅读和维护。但 StringBuilder 方法更接近您已有的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T23:16:51.747

它应该工作：

```
package test;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.FileReader;
import java.io.FileWriter;
import java.util.ArrayList;

/**
 *
 * @author 
 */
public class Read {
        public static void main(String[] args) {
        try {

            BufferedReader br = new BufferedReader(new FileReader(
                    "D:/file.txt"));
            String line, txt = "";
            ArrayList<String> lines = new ArrayList<String>();

            while ((line = br.readLine()) != null) {
                lines.add(line);
            }

            System.out.println(txt);
            br.close();

            BufferedWriter bw = new BufferedWriter(new FileWriter("D:/file2.txt"));
            for(int i = lines.size()-1; i>=0; i--){
                bw.write(lines.get(i));
                bw.newLine();
            }
            bw.close();

        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

# django - 在模型中的 Django 中保存 404 错误的 URL

> ID：14148657
> 
> 赞同：3
> 
> 时间：2013-01-03T23:00:01.550
> 
> 标签：django, django-models, http-status-code-404

我认为收集所有 404 错误并将它们存储在模型中会很有用。

这些错误可以/应该在编写（或重写）用于设计新 Web 项目的 url 时有用。此外，正如您可能会做的那样，自动输入`http://www.domian.com/news`or`http://www.domian.com/products`或 or的人`http://www.domian.com/facebook`

当人们错误地输入链接并且您可以为其开发重定向时，它也会很有用。

我只是不知道我将如何执行这样的事情。有任何想法吗？

感谢您的建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T23:25:37.490

最简单的方法是编写处理 404 的自定义中间件。[请参阅有关中间件](https://docs.djangoproject.com/en/dev/topics/http/middleware/)的 Django文档。

一个在 404 上触发的非常简单的示例中间件类：

```
from django.http import HttpResponseNotFound

class Catch404Middleware(object):
    def process_response(self, request, response):
        if isinstance(response, HttpResponseNotFound):
            print "That was a 404!"
        return response 
```

请记住，您需要将此类安装到您`MIDDLEWARE_CLASSES`的 insettings.py 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T21:05:30.610

感谢之前的回答，我做了这个：

```
#middleware.py (Under the Analytics App)

from django.http import HttpResponseNotFound, HttpRequest
from analytics.models import Site_Error

class Catch404Middleware(object):
     def process_response(self, request, response):
         if isinstance(response, HttpResponseNotFound):
        try:
            new_save,created = Site_Error.objects.get_or_create(error=request.path)
            new_save.times += 1
            new_save.save()
        except:
           new_save = False
    return response

#models.py (Ananlytics App)

class Site_Error(models.Model):
    error = models.CharField(max_length=8000)
    times = models.IntegerField(default=0)
    timestamp = models.DateTimeField(auto_now_add=True)

    class Meta:
         ordering = ('-timestamp',)
         verbose_name = "Error"
         verbose_name_plural = "Errors"

     def __unicode__(self):
         return self.error

#in settings.py 
MIDDLEWARE_CLASSES = (
'django.middleware.common.CommonMiddleware',
'django.contrib.sessions.middleware.SessionMiddleware',
'django.middleware.csrf.CsrfViewMiddleware',
'django.contrib.auth.middleware.AuthenticationMiddleware',
'django.contrib.messages.middleware.MessageMiddleware',
'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware',
'analytics.middleware.Catch404Middleware',
) 
```

此代码会将所有请求的路径保存到`Site_Error`模型中。你可以用这个做更多的事情，所以我建议你查看[关于中间件的 Django 文档，](https://docs.djangoproject.com/en/dev/topics/http/middleware/)就像之前的答案所推荐的那样。

# objective-c - 向 UICollectionViewCell 添加阴影会减慢滚动速度

> ID：14148665
> 
> 赞同：1
> 
> 时间：2013-01-03T23:00:35.067
> 
> 标签：objective-c, uicollectionviewcell

通过将以下代码添加到 cellForItemAtIndexPath 方法，我能够成功地将阴影添加到 UICollectionViewCell

```
cell.image.layer.masksToBounds = NO;
cell.image.moviePlayerView.layer.shadowColor = [UIColor darkGrayColor].CGColor;
cell.image.moviePlayerView.self.layer.shadowOffset = CGSizeMake(0, 5);
cell.image.moviePlayerView.self.layer.shadowRadius = 2;
cell.image.moviePlayerView.layer.shadowOpacity = 0.3; 
```

但它使滚动真的很慢。我理解它在滚动时向单元格添加阴影但无法找出解决方案。：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:04:42.857

我想出了解决方案，希望这对其他人有帮助。现在我将现有图像与阴影图像合并并使用结果图像，而不是单独添加阴影。

```
UIImage* image = [image imageWithFileShadow];

- (UIImage *)imageWithFileShadow {
static CGFloat pointScale = -1.0f;
if (pointScale < 0.0f) {
    pointScale = [[UIScreen mainScreen] scale];
}

CGFloat imageWidth = (int)self.size.width;
CGFloat imageHeight = (int)self.size.height;

UIImage * shadowImage = [[UIImage imageNamed:@"FileShadowResizable"] resizableImageWithCapInsets:UIEdgeInsetsMake(20.0f, 24.0f, 29.0f, 24.0f)];
UIGraphicsBeginImageContextWithOptions(self.size, NO, pointScale);
[shadowImage drawInRect:CGRectMake(0.0f, 0.0f, imageWidth, imageHeight) blendMode:kCGBlendModeNormal alpha:1.0f];
[self drawInRect:CGRectMake(14.0f, 8.0f, self.size.width - 28.0f, self.size.height - 29.0f)];

UIImage * mergedImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

return mergedImage;
} 
```

# git - 无法添加远程（同一网络上的本地）git repo

> ID：14148676
> 
> 赞同：0
> 
> 时间：2013-01-03T23:01:13.057
> 
> 标签：git

我在同一网络上设置了 linux 服务器，当我尝试将 repo 添加到我的计算机时，我收到以下错误消息：

```
ssh: Could not resolve hostname 192.168.1.128:: nodename nor servname provided, or not known
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists. 
```

我在 mac 上使用 git tower，存储库 url 如下所示：

```
ssh://linux@192.168.1.128:/var/www/gitrepo/cm_main.git 
```

更新：（删除 ssh:// 后我收到的错误消息

```
Pushing to linux@192.168.1.128:/var/www/gitrepo/cm_main.git
Counting objects: 965, done.
Delta compression using up to 2 threads.
Compressing objects:   0% (1/946)   
Compressing objects:   1% (10/946)   
...
Compressing objects:  99% (937/946)   
Compressing objects: 100% (946/946)   
Compressing objects: 100% (946/946), done.
Writing objects:   0% (1/965)   
Writing objects:   1% (10/965)   
Writing objects:   2% (20/965)   
Writing objects:   3% (29/965)   
fatal: Unable to create temporary file '/var/www/gitrepo/cm_main.git/.git/./objects/pack/tmp_pack_XXXXXX': Permission denied
error: pack-objects died of signal 13
error: failed to push some refs to 'linux@192.168.1.128:/var/www/gitrepo/cm_main.git' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T23:05:58.897

尝试删除 ssh:// 前缀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T23:16:18.997

如果你使用`ssh://`语法，你需要 make it `ssh://user@host/path/to/repo`。您版本中的冒号是错误的。

否则，如果您没有使用显式协议，则它是`user@host:/path/to/repo`，因此您的第二个版本应该可以工作。您收到的错误消息表明存在完全不同的问题：

```
fatal: Unable to create temporary file '/var/www/gitrepo/cm_main.git/.git/./objects/pack/tmp_pack_XXXXXX': Permission denied 
```

因此，您尝试使用 ( `linux`) 推送的用户在远程存储库文件夹中没有写入访问权限。

# bash - 在执行脚本时设置 bash 变量

> ID：14148677
> 
> 赞同：0
> 
> 时间：2013-01-03T23:01:18.507
> 
> 标签：bash

我的示例脚本看起来像

```
#!/bin/bash
VAR="foo"
if [ $VAR etc etc
then etc
... 
```

有没有办法在不编写脚本的情况下调用脚本来更改 $VAR 的值？我会想象类似的东西

```
$ bash script.sh -v VAR="bar" (sorry for the invention) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T23:03:02.787

要为程序调用设置环境变量，只需在调用脚本之前将赋值添加到该行：

```
VAR=bar ./script.sh 
```

请注意，这不会覆盖脚本中设置的内容；因此在脚本中，您需要先检查它是否已设置，然后再将其设置为默认值。

如果您希望为多个调用设置此变量，则可以在 shell 中定义它，然后将其导出，以便它位于子进程的环境中：

```
$ export VAR=bar
$ ./script.sh 
```

# c# - Gtk# NodeView 彩色行

> ID：14148679
> 
> 赞同：5
> 
> 时间：2013-01-03T23:01:41.730
> 
> 标签：c#, monodevelop, gtk#

我使用 NodeView 对象以这种方式向用户输出数据（Gtk# 教程）：

```
 [Gtk.TreeNode (ListOnly=true)]
    public class MyTreeNode : Gtk.TreeNode {

            string song_title;

            public MyTreeNode (string artist, string song_title)
            {
                    Artist = artist;
                    this.song_title = song_title; 
            }

            [Gtk.TreeNodeValue (Column=0)]
            public string Artist;

            [Gtk.TreeNodeValue (Column=1)]
            public string SongTitle {get { return song_title; } }
    }

Gtk.NodeStore store;
    Gtk.NodeStore Store 
    {
        get {
                if (store == null)
                {
                    store = new Gtk.NodeStore (typeof(MyTreeNode));
                    store.AddNode (new MyTreeNode ("The Beatles", "Yesterday"));
                    store.AddNode (new MyTreeNode ("Peter Gabriel", "In Your Eyes"));
                    store.AddNode (new MyTreeNode ("Rush", "Fly By Night"));
                }
            return store;
            }
    }

protected void OnButton1Clicked (object sender, EventArgs e)
{
    // Create a column with title Artist and bind its renderer to model column 0
    nodeview1.AppendColumn ("Artist", new Gtk.CellRendererText (), "text", 0);

    // Create a column with title 'Song Title' and bind its renderer to model column 1
    nodeview1.AppendColumn ("Song Title", new Gtk.CellRendererText (), "text", 1);
        nodeview1.ShowAll ();

    nodeview1.NodeStore=Store;

} 
```

但是如何为 NodeView 的某些行着色（例如，“The Beatles” - “Yesterday”）？我尝试通过更改 NodeView 样式来做到这一点：背景、基色、前景等，但它不起作用。

编辑：我刚刚意识到，我可以通过这种方式更改列的颜色：

```
protected void OnButton1Clicked (object sender, EventArgs e)
{
    // Create a column with title Artist and bind its renderer to model column 0
    nodeview1.AppendColumn ("Artist", new Gtk.CellRendererText (), "text", 0);

    // Create a column with title 'Song Title' and bind its renderer to model column 1
    nodeview1.AppendColumn ("Song Title", new Gtk.CellRendererText (), "text", 1);
        nodeview1.ShowAll ();

    nodeview1.NodeStore=Store;
    nodeview1.Columns[0].Cells[0].CellBackgroundGdk=new Gdk.Color(0,255,0);
} 
```

但是如何更改特定单元格的颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T10:39:26.967

要逐行更改渲染属性，您有两种可能性

1.  在模型中定义属性，然后在创建单元渲染器时引用它们；或者
2.  编写自己的`TreeCellDataFunc`并将其绑定到单元格渲染器，以确保在渲染之前更改其属性。

选项 1 更快，但将您限制为静态定义的值；当渲染不仅仅取决于一个变量并且您涉及一些逻辑时，2 会更好。我将向您展示如何执行 1 并参考[Mono 文档](http://www.mono-project.com/GtkSharp_TreeView_Tutorial)了解 2。

如果要更改前景色，只需向模型添加一个新列：

```
[Gtk.TreeNode (ListOnly=true)]
public class MyTreeNode : Gtk.TreeNode 
{
    public MyTreeNode (string artist, string title, string color)
    {
        Artist = artist;
        Title = title; 
        Color = color;
    }

    [Gtk.TreeNodeValue (Column=0)]
    public string Artist;

    [Gtk.TreeNodeValue (Column=1)]
    public string Title;

    [Gtk.TreeNodeValue (Column=2)]
    public string Color;
} 
```

将有效的 Gdk 颜色表示，如“red”或“#ff0000”传递给行构造函数：

```
store.AddNode(new MyTreeNode("The Beatles", "Yesterday", "red"));
store.AddNode(new MyTreeNode("Peter Gabriel", "In Your Eyes", "black")); 
```

然后，当您构建视图时，您只需将该模型列 (2) 绑定到单元格渲染器的“前景”属性：

```
nodeview1.AppendColumn("Artist", new Gtk.CellRendererText(), 
                       "text", 0, "foreground", 2);

nodeview1.AppendColumn("Song Title", new Gtk.CellRendererText(),
                       "text", 1, "foreground", 2); 
```

就这样。

# c# - 将 IEnumerable 参数传递给 WebAPI

> ID：14148681
> 
> 赞同：15
> 
> 时间：2013-01-03T23:01:58.073
> 
> 标签：c#, jquery, asp.net-mvc, asp.net-web-api

我开始使用 WebAPI 并且大部分情况下一切顺利。我遇到了一个特定功能的问题。这个不同于另一个，因为它的唯一参数是 IEnumerable 类型。

我在 Post() 函数的第一行设置了一个断点，我正在点击该函数，但“值”参数的计数始终为 0。我验证了客户端输入的参数确实如此，在事实上，包含一个整数数组。如果我删除 [FromUri] 属性，则“values”参数为 NULL 而不是计数 0。

**如何让我的整数数组通过我的 WebAPI 函数？**

这是 WebAPI 函数：

```
[System.Web.Mvc.HttpPost]
public void Post([FromUri] IEnumerable<int> values)
{
    if (values == null || !values.Any()) return;

    int sortorder = 1;
    foreach (int photoId in values)
    {
        _horseRepository.UpdateSortOrder(photoId, sortorder);
        sortorder++;
    }
} 
```

这是 AJAX 调用（这是使用 jQuery UI 可排序功能）：

```
$(".sortable").sortable({
    update: function (event, ui) {
                var newArray = $(".sortable").sortable("toArray");

                $.ajax({
                    url: '/api/photo',
                    type: 'POST',
                    contentType: 'application/json, charset=utf-8',
                    async: true,
                    dataType: 'json',
                    data: JSON.stringify(newArray),
                    complete: function (data) { }
                });
            }
        }); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-03T23:07:32.103

```
contentType: 'application/json, charset=utf-8', 
```

应该变成（内容类型和字符集之间的分隔符是分号，而不是逗号）：

```
contentType: 'application/json; charset=utf-8', 
```

和：

```
public void Post([FromUri] IEnumerable<int> values) 
```

应该变成（POST 请求中没有 Uri 参数）：

```
public void Post(IEnumerable<int> values) 
```

现在您可以假设`newArray`（此处未显示）是一个整数数组：

```
newArray = [ 1, 2, 3 ] 
```

# html - CSS垂直对齐div中的列表项

> ID：14148682
> 
> 赞同：1
> 
> 时间：2013-01-03T23:02:01.467
> 
> 标签：html, css, vertical-alignment

我有一个白色背景的 Div 栏，我的面包屑位于其中。

在这里你可以看到一个截图：

![在此处输入图像描述](../Images/c253de4d06543681544d2476a754b441.png)

如何垂直对齐文本？

这是我的**CSS**：

```
/*  Breadcrumb  */
#breadcrumb {
    position: relative;
    background: white;
    padding: 4px;
    border-radius: 2px;
    -moz-border-radius: 2px;
    -webkit-border-radius: 2px;
    behavior: url(/scripts/PIE.htc);
    font-size: .9em;
    color: #526472;
}
#breadcrumb ul {
    margin: 0;
    padding: 0;
    list-style: none;
}
#breadcrumb li {
    float: left;
    padding-left: 5px;
}
#breadcrumb a {
    padding-right: 10px;
    background: url(../images/div_breadcrumb.gif) no-repeat right center;
    color: #526472;
    margin-right: 5px;
} 
```

还有我的**HTML**：

```
<div id="breadcrumb" class="clearfix">
    <ul>
        <li style="white-space: nowrap;"> 
            <a style="white-space: nowrap;" href="">Home</a> 
        </li>
        <li style="white-space: nowrap;"> 
            Visual collaboration solutions 
        </li>
    </ul>
    <div id="shareThis" class="fl_right"> Share: </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T23:57:18.760

Try to edit your **CSS** file, by adding `vertical-align:middle;` to your `#breadcrumb` ID, like this:

```
#breadcrumb {
    position: relative;
    background: white;
    padding: 4px;
    border-radius: 2px;
    -moz-border-radius: 2px;
    -webkit-border-radius: 2px;
    behavior: url(/scripts/PIE.htc);
    font-size: .9em;
    color: #526472;
    vertical-align:middle;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T23:13:15.653

由于代码不完整，有点难以判断，但我猜你要么缺少一些标记，要么有其他样式弄乱了你的面包屑。

以下内容可以很好地在水平行中显示项目（您的样式，我的 HTML）。

```
<html>
<head>
    <style>
        #breadcrumb         { position: relative; background: white; padding: 4px; border-radius:2px; -moz-border-radius: 2px;  -webkit-border-radius: 2px; behavior: url(/scripts/PIE.htc); font-size: .9em; color: #526472;}
        #breadcrumb ul      { margin: 0; padding: 0; list-style: none;  }
        #breadcrumb li      { float: left; padding-left: 25px;}
        #breadcrumb a       { padding-right: 10px; background: url(../images/div_breadcrumb.gif) no-repeat right center; color: #526472; margin-right: 5px;}
    </style>

</head>
<body>
<div id="breadcrumb" class="clearfix">
         <ul>
             <li>Home Visual collaboration solutions</li>
             <li>La</li>
             <li>Ti</li>
             <li>Da</li>
         </ul>
    </div>
</body>
</html> 
```

如果您正确使用了 ul 和 li 标签，您可以尝试使用 Firebug 或 Chrome 开发者工具来检测是否应用了其他样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T23:14:01.947

尝试：

```
li{display: inline} 
```

你也可以使用

```
li{display:inline-block} 
```

这样你的`li`元素就不会失去它们的块属性

这是示例：

[http://jsfiddle.net/bFe35/1/](http://jsfiddle.net/bFe35/1/)

# javascript - Onresize 事件未在调整大小时运行

> ID：14148683
> 
> 赞同：0
> 
> 时间：2013-01-03T23:02:12.400
> 
> 标签：javascript, css, wordpress, disqus

我设置了 javascript window.onresize 事件来运行其他适合 div 大小和 body 大小的函数。问题是，当通过添加注释（使用 disqus）调整屏幕大小时，其大小应该适合新主体大小的 div 不适合。我的意思是 onresize 函数没有被运行。

![在此处输入图像描述](../Images/a3e09983754be16ca0308b83b1ce1f82.png)

如您所见，右侧的 div 不会随着评论的添加而增长（见边框）。您对如何使 onresize 事件起作用有任何想法吗？

PS：当我在firefox上打开开发者工具时，div被调整大小，我不知道为什么，但是onresize事件被运行了。只有在这种情况下。

**编辑：**试图运行这个 jquery 脚本：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"                          type="text/javascript"></script>
<script>
        $(document).resize(function(){
            tamanho_barra();
        });
</script> 
```

但是，还不行。我试图将“文档”更改为随机 div，看看是否会发生某些事情，但什么也没有。我不知道有什么问题。请问你能帮帮我吗？

**Edit2**：现在在 rcabral 的帮助下工作。他告诉我在内容中添加一个背景图像，它是一个 1px 的黑点，并重复它直到页面底部。

```
#content { background:url('<?php bloginfo('template_directory'); ?>/images/gray_dot.gif') 634px 0px repeat-y; } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T02:44:14.303

您的脚本不会自动运行。您必须将它包含在 DOM 就绪时运行的函数中： $(document).ready(function() { here }); 或 $(function() { 这里 });

例如：

```
<script>
$(function() {
        $(window).resize(function(){
            $("#barra").tamanho_barra();
        });
});
</script> 
```

而且您的代码有一些错误：1.您在“调整大小”之后使用了两个左括号，而不仅仅是一个。2.你应该选择窗口而不是文件来调整大小功能。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T00:09:08.310

有一个 jQuery 插件可以让你定位 Disqus 运行的容器元素。

这是一个演示：http: [//jsfiddle.net/hansvedo/S3R7w/](http://jsfiddle.net/hansvedo/S3R7w/)

这是插件：[http ://benalman.com/projects/jquery-resize-plugin/](http://benalman.com/projects/jquery-resize-plugin/)

这是语法：

```
$('div#disqus-container').bind('resize', function(){
    // your code
}); 
```

# ruby - ElasticSearch Tire - 如何配置使用带有日期直方图方面的值字段？

> ID：14148684
> 
> 赞同：1
> 
> 时间：2013-01-03T23:02:13.463
> 
> 标签：ruby, elasticsearch, tire

我正在使用美妙的轮胎宝石。但是，我在文档中找不到如何做到这一点。基本上，我想在轮胎的 date_histogram 中添加一个值字段。但是，我似乎无法对我尝试过的所有选项感到满意。

[http://www.elasticsearch.org/guide/reference/api/search/facets/date-histogram-facet.html](http://www.elasticsearch.org/guide/reference/api/search/facets/date-histogram-facet.html)

目前可以这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:59:27.867

`value_field`您只需在构面定义选项哈希中传递 a ：

```
Tire.search 'articles' do
  query { match :title, 'foo' }
  facet 'published_on' do
    date :published_on, value_field: 'words'
  end
end 
```

我为此功能添加了一些[集成测试。](https://github.com/karmi/tire/blob/5a287819222c4e5cbce8c7a8c0f0053f85b65986/test/integration/facets_test.rb#L130-L142)

# c# - 双精度数组和网格之间的数据绑定

> ID：14148686
> 
> 赞同：1
> 
> 时间：2013-01-03T23:02:20.700
> 
> 标签：c#, wpf, xaml

我对 C#/XAML 比较陌生，并且很难进行数据绑定。我想在 C# 双数组和 XAML 网格之间进行数据绑定。

```
// This double array is filled with Square objects which are elements of the map
Square[,] worldMapGrid = new Square[4,4];

// For showing an very simple example, we can fill it like this:
worldMapGrid[0,0] = new SquareMountain();
worldMapGrid[0,1] = new SquareDesert();
worldMapGrid[0,1] = new SquarePrairie();
... 
```

我在我的 XAML 代码中有这个：

```
<UniformGrid x:Name="MapGrid" Width="600" Height="600" Columns="4" Rows="4">
    FILL WITH SQUARES HERE
</UniformGrid> 
```

在我的 ResourceDictionnary 中：

```
<Style x:Key="ButtonSquare" TargetType="{x:Type Button}">   
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Button}">
                <Viewbox>
                    <Rectangle x:Name="path1" Fill="CHANGE HERE"/>
                </Viewbox>
                <ControlTemplate.Triggers>
                    ...
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

我想用对象填充`UniformGrid`命名的 MapGrid ，并根据. 实际上，是 的视觉表示。`ButtonSquare``Fill``worldMapGrid``MapGrid``worldMapGrid`

所以我想在这两个对象之间进行数据绑定，但我正在为这个概念而苦苦挣扎。有人可以告诉我如何做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T23:31:42.527

好的，这是一个示例窗口 xaml 文件：

```
<Window x:Class="SquareUniformGrid.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:SquareUniformGrid"

    Title="MainWindow" Height="800" Width="700">

<Window.Resources>
    <local:SquareConverter x:Key="squareConverter"/>

    <DataTemplate x:Key="mountain">
        <Button Style="{StaticResource ButtonSquare}"
                Background="Black"/>
    </DataTemplate>
    <DataTemplate x:Key="desert">
        <Button Style="{StaticResource ButtonSquare}"
                Background="Brown"/>
    </DataTemplate>
    <DataTemplate x:Key="prairie">
        <Button Style="{StaticResource ButtonSquare}"
                Background="Green"/>
    </DataTemplate>

    <local:ButtonTemplateSelector x:Key="selector" Mountain="{StaticResource mountain}" Desert="{StaticResource desert}" Prairie="{StaticResource prairie}"/>
</Window.Resources>
<Grid>
    <ItemsControl Background="Gray" Margin="8" Width="600" Height="600" ItemsSource="{Binding MapGrid}" ItemTemplateSelector="{StaticResource selector}">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <UniformGrid Rows="4" Columns="4"/>
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
    </ItemsControl>
</Grid> 
```

这是相应的视图模型：

```
 public class MainWindowViewModel : INotifyPropertyChanged
{
    #region Member Variables
    private List<Square> worldMapGrid = new List<Square>();
    #endregion

    #region Ctr
    public MainWindowViewModel()
    {
        BuildWorldMap();
    }
    #endregion

    #region Public Methods

    #endregion

    #region Private Methods
    private void BuildWorldMap()
    {
        MapGrid.Add(new SquareDesert());
        MapGrid.Add(new SquareDesert());
        MapGrid.Add(new SquareDesert());
        MapGrid.Add(new SquareDesert());

        MapGrid.Add(new SquareMountain());
        MapGrid.Add(new SquareMountain());
        MapGrid.Add(new SquareMountain());
        MapGrid.Add(new SquareMountain());

        MapGrid.Add(new SquarePrairie());
        MapGrid.Add(new SquarePrairie());
        MapGrid.Add(new SquarePrairie());
        MapGrid.Add(new SquarePrairie());

        MapGrid.Add(new SquarePrairie());
        MapGrid.Add(new SquarePrairie());
        MapGrid.Add(new SquarePrairie());
        MapGrid.Add(new SquarePrairie());
    }

    private void RaisePropertyChanged(string _propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(_propertyName));
        }
    }
    #endregion

    #region Properties
    public List<Square> MapGrid
    {
        get
        {
            return this.worldMapGrid;
        }
        set
        {
            this.worldMapGrid = value;
            RaisePropertyChanged("MapGrid");
        }
    }
    #endregion

    #region INotifyPropertyChanged Members
    public event PropertyChangedEventHandler PropertyChanged;
    #endregion
} 
```

这是 DataTemplateSelector 的代码：

```
 public class ButtonTemplateSelector : DataTemplateSelector
{
    #region Member Variables

    #endregion

    #region Ctr
    public ButtonTemplateSelector()
    {

    }
    #endregion

    #region Overrides
    public override DataTemplate SelectTemplate(object item, DependencyObject container)
    {
        if (item is SquareDesert)
        {
            return Desert;
        }
        if (item is SquareMountain)
        {
            return Mountain;
        }
        if (item is SquarePrairie)
        {
            return Prairie;
        }

        return base.SelectTemplate(item, container);
    }
    #endregion

    #region Public Methods

    #endregion

    #region Private Methods

    #endregion

    #region Properties
    public DataTemplate Mountain
    {
        get;
        set;
    }

    public DataTemplate Desert
    {
        get;
        set;
    }

    public DataTemplate Prairie
    {
        get;
        set;
    }
    #endregion
} 
```

这组代码有效地绘制了一个基于 worldmapgrid 设置的带有彩色图块的统一网格。

哎呀，忘记样式了：

```
<Style x:Key="ButtonSquare" TargetType="{x:Type Button}">
    <Setter Property="Background" Value="{Binding Background, RelativeSource={RelativeSource TemplatedParent}}"/>
</Style> 
```

# internet-explorer-8 - Webshims Lib - IE8 的媒体查询

> ID：14148688
> 
> 赞同：3
> 
> 时间：2013-01-03T23:02:30.003
> 
> 标签：internet-explorer-8, polyfills

我正在尝试使用 Webshims Lib 让媒体查询在 IE8 中工作。我已经按照设置说明加载了默认的（所有）polyfill，但它似乎不起作用。

我仍然应该明确包含 html5shiv 吗？我以为 Webshims Lib 会处理它？

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-21T13:16:33.947

添加以下语句后，您需要下载`respond.js`：

```
 <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media       queries -->
 <!--[if lt IE 9]>
 <link href="css/bootstrap-ie8.css" rel="stylesheet">
 <script src="http://apps.bdimg.com/libs/html5shiv/3.7/html5shiv.min.js"></script>
  <script src="http://apps.bdimg.com/libs/respond.js/1.4.2/respond.min.js"></script>

 <![endif]--> 
```

# php - 说真的，为什么我的 sql 没有被执行'--

> ID：14148690
> 
> 赞同：-2
> 
> 时间：2013-01-03T23:02:40.450
> 
> 标签：php, sql, apache-flex

我有一个 flex 应用程序，我尝试使用它来将数据插入到我的数据库中。我完全确定我的数据到达了我的 php 文件，并且我的查询的所有变量都插入到我查询的正确位置。

但是：我的数据库中没有输入任何内容，现在已经搜索了几个小时，无论是在 flex 还是 php 中，但我找不到错误：

```
<?php
include_once("Connection.php");

$go = true;

if(isset($_GET['table'])){
    $tableNr = $_GET['table'];
} else {
    $go = false;
}

if(isset($_GET['gerechtId'])){
    $gerechtID = $_GET['gerechtId'];
} else {
    $go = false;
}

if(isset($_GET['aantal'])){
    $aantal = $_GET['aantal'];
} else {
    $go = false;
}

if($go){
$query = "INSERT INTO bestelling (Tafelnummer, StatusID)
          VALUES (". $tableNr . ", 1);

          INSERT INTO orders (bestellingID, gerechtID, aantal)
          VALUES (@@IDENTITY, " . $gerechtID . ", " . $aantal . ");";
mysql_query($query);
mysql_close();
echo($query);
}
?> 
```

我很确定它没有错误，但可以肯定的是，我的查询是否被执行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T23:04:28.010

说真的，你甚至没有检查错误。先这样做，然后你就会认真地知道：

```
mysql_query($query) or die('Serious error: '.mysql_error()); 
```

说真的，每个查询不能执行多个命令。至少在 MySQL 中没有。

此外，您应该认真停止使用 mysql_*。它已经过时且已被弃用。使用 PDO 或 MySQLi。这是一个很好的严肃教程：[http ://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)

# c# - ASP.NET eval() 总是返回 true

> ID：14148693
> 
> 赞同：0
> 
> 时间：2013-01-03T23:03:03.257
> 
> 标签：c#, asp.net, eval

我对 eval() 函数概念很陌生，所以不要在语法上评判我。

我有我的评估功能：

```
<%# Eval("BooleanVariable").ToString() == "true" ? GetAnswerWhenVariableIsTrue(Eval("Uid").ToString()) : GetAbnswerWhenVariableIsFalse(Eval("Uid").ToString())%> 
```

所以我想要的是，当布尔变量为真时调用 GetAnswerWhenVariableIsTrue 和假时 GetAbnswerWhenVariableIsFalse

我怎样才能实现它？

我用它动态地将输入控件加载到转发器中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T23:05:58.023

尝试这个

```
<%# Convert.ToBoolean(Eval("BooleanVariable")) == true ? GetAnswerWhenVariableIsTrue(Eval("Uid").ToString()) : GetAbnswerWhenVariableIsFalse(Eval("Uid").ToString())%> 
```

# python - webapp2 i18n 不工作

> ID：14148695
> 
> 赞同：0
> 
> 时间：2013-01-03T23:03:13.767
> 
> 标签：python, google-app-engine, localization, internationalization, webapp2

我完全[按照 webapp2 i18n](http://webapp-improved.appspot.com/tutorials/i18n.html)教程进行操作，完全按照那里所说的进行操作。尽管如此，当我更改语言时，我仍无法翻译我的应用程序，如教程最后部分所示。

应用程序没有更改语言，而是一直显示“Hello, World！” 在日志控制台中没有任何异常的英文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T20:04:35.250

感谢吉米的时间。当您回答时，我已经找到了解决方案，并且在写到这里之前正在对其进行测试。

当您创建 .pot 文件时，您会为每个标记为翻译的单词获得以下信息：

```
#: templates/index.html:10
msgid "msgid"
msgstr "" 
```

创建每个翻译时，您在特定语言文件夹中都有一个 .po 文件，该文件具有相同的行

```
#: templates/index.html:10
msgid "msgid"
msgstr "" 
```

我犯了一个错误，我没有把翻译放在 msgstr "" 中，而是把它放在了 "msgid" 的位置。显然它不起作用，因为 msgid 是将原始消息绑定到翻译而实际翻译是空的。

希望这对其他人有帮助。

# jquery - jQuery切换内容，多个活动条件

> ID：14148697
> 
> 赞同：1
> 
> 时间：2013-01-03T23:03:15.030
> 
> 标签：jquery, jquery-selectors, hidden, visible

我将不胜感激有关内容切换的一些帮助。

我目前有 2 个用于切换内容的选项卡 - 必须将一个选项卡设置为随时聚焦，并在所选`.content-drawer`内容可见时附加另一类活动。

虽然我在下面的工作中操作单个选项卡时工作，但在状态之间切换时活动状态不起作用，因为 :visible 条件在错误的时间触发。

有人能指出我正确的方向吗？这是我当前的[jsfiddle](http://jsfiddle.net/DcP7p/)

```
 $('.content-drawer').hide();

    $('.tab').click(function() {
        var target = $(this.rel);
            $('.content-drawer').not(target).slideUp();
            target.delay(500).slideToggle();
            $('.tabs > li.focus').removeClass('focus');
            $(this).parent().addClass('active focus');

    if ( $('.content-drawer:visible').length ) {
       $('.tabs > li.active').removeClass('active');
    }
    return false;
});​

<ul class="tabs">
   <li class="focus">
       <a href="#" rel="#calc" class="tab"><i class="icon-plus"></i>Calculator</a>
   </li>
   <li>
       <a href="#" rel="#info" class="tab"><i class="icon-info"></i>Info</a>
    </li>
</ul>

<div class="content-drawer" id="calc">
    <p>Calc Content</p>    
</div>
<div class="content-drawer" id="info">
    <p>Info Content</p>    
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T23:34:11.973

试试这个代码

```
 $('.content-drawer').hide();

$('.tab').click(function() {
    var $this = $(this);
    var target = $(this.rel);
    $this.closest('li').addClass('active focus');
    // Add the classes to the closest li of the clicked anchor
    $('.tab').not($this).closest('li').removeClass('active focus');
    // Remove the classes for the non-clicked items
    $('.content-drawer').not(target).slideUp();
    // Slideup the other contents
    target.delay(500).slideToggle();
    // Toggle the current content
    if (target.is(':visible')) {
        // Only if the target is visible remove the active class
        $this.closest('li').removeClass('active');
    } 
    return false;
});​ 
```

**[检查小提琴](http://jsfiddle.net/DcP7p/2/)**

# c# - 防止 UI 在处理数据时冻结

> ID：14148699
> 
> 赞同：0
> 
> 时间：2013-01-03T23:03:27.637
> 
> 标签：c#, java, android, multithreading, xamarin.android

我在使用 BluetoothChat 时遇到了一些问题（我相信它在 bot Java 和 MonoForAndroid 上的代码相同）示例应用程序。我已使用蓝牙模块将我的 Android 连接到微控制器。如果发送消息（只是原始字节到微控制器）它工作得很好！

微控制器流式传输恒定的串行消息，我想读取该数据。[BluetoothChat.cs](http://pastebin.com/4WtyQFjN)应用程序中有一个名为的类`MyHandler`，其代码块如下：

```
 case MESSAGE_READ:
        byte[] readBuf = (byte[])msg.Obj;
        // construct a string from the valid bytes in the buffer
        var readMessage = new Java.Lang.String (readBuf, 0, msg.Arg1);
        bluetoothChat.conversationArrayAdapter.Add(
        bluetoothChat.connectedDeviceName + ":  " + readMessage);
        break; 
```

所以我需要做的是处理传入的原始数据，然后改变一些按钮的颜色，所以我对上面的代码进行了以下更改：

```
case MESSAGE_READ:
    byte[] readBuf = (byte[])msg.Obj;

         //I have just added this code and it blocks the UI
         bluetoothChat.ProcessIncomingData(readBuff);

    break; 
```

在`BluetootChat`活动中我有这个方法：

```
 public void ProcessIncomingData(byte[] readBuf)
    {

        if (_logBox != null)
        {
            _logBox.Text += "\r\n"; //TextView

            foreach (var b in readBuf)
            {
                _logBox.Text += (uint)b + " "; //Show the bytes as int value
            }
        }
    } 
```

`

但不幸的是，我所做的更改会停止 UI，并且应用程序会在短时间内崩溃。

任何想法如何在不冻结 UI 的情况下巧妙地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T23:19:35.763

您需要将工作交给后台线程，以使 UI 线程能够自由地响应输入。不久前我写了一篇文章，概述了一些可用于执行后台线程的不同方法：[Using Background Threads in Mono For Android Applications](http://www.gregshackles.com/2011/04/using-background-threads-in-mono-for-android-applications/)

处理后台线程时要小心的一件事是，如果要对 UI 进行任何更改，则必须切换回 UI 线程。您可以使用该`RunOnUiThread()`方法执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T23:11:09.483

为要在其中发生的进程创建一个新线程。

```
public static void threadProcess()
{
    Thread thread = new Thread()
            {
                public void run()
                {
                // Process that will run in the thread
                }
            };
            thread.start();
} 
```

# wordpress - Wordpress：无法得出错误

> ID：14148702
> 
> 赞同：1
> 
> 时间：2013-01-03T23:03:49.590
> 
> 标签：wordpress, login

我这里发生了一件奇怪的事情。尝试在多种情况下实现is_wp_error，但都失败了。事情是这样的，我最后一次尝试说明了这一点：

我想通过 登录用户`wp_signon()`，检查是否有错误，如果有，显示它们。

所以我写了以下几行代码：

```
$user = wp_signon(); 
if(is_wp_error($user)){
     $result = 'Error-' .
     $user->get_error_message(); 
} else {
    $result = 'Login succeed'; 
} 
echo $result; 
```

奇怪的是，`is_wp_error()`不返回 false （所以有一个错误）。但是`$user->get_error_message();`是空的。

尝试了不同的动作。调试时，`echo is_wp_error();`返回 0。 `var_dump(wp_is_error());`返回空数组。

此外，即使给出了有效的凭据，is_wp_error() 仍然返回 true。同样在其他情况下进行测试时（以及在干净的 WP 安装上）

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:11:51.850

我浏览了`wp_signon()`代码（位于[http://core.trac.wordpress.org/browser/tags/3.5/wp-includes/user.php#L0](http://core.trac.wordpress.org/browser/tags/3.5/wp-includes/user.php#L0)）

如果传入空白的用户名或密码，则错误似乎会被清除。（该文件的第 56 和 57 行。）

# php - strpos 不会在负偏移量上向后搜索

> ID：14148704
> 
> 赞同：6
> 
> 时间：2013-01-03T23:03:57.853
> 
> 标签：php

**更新**：我正在查看文档，因为我`strrpos`认为它是`strpos`. 对不起愚蠢的错误。

根据[文档](http://php.net/manual/en/function.strrpos.php)，它说当您提供负值作为偏移量参数时，该函数将从字符串末尾开始那么多字符，向后搜索。它甚至在示例 #2 中显示了这一点。那么为什么我不能让这段代码正常工作呢？

```
$val = strpos('/imports/products/nin_avatar.png', '/', -2); 
```

我正在尝试获取字符串中最后一个正斜杠的索引，但它一直返回`false`.. 我尝试了几个不同的负偏移，但似乎都没有。难道我做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T23:06:18.087

似乎它现在可以在新版本的 PHP 中按 OP 的方式工作。

* * *

### 历史答案

PHP手册[`strpos()`](http://php.net/manual/en/function.strpos.php)说...

> 与`strrpos()`和不同`strripos()`，偏移量不能为负。

[来源](http://php.net/manual/en/function.strpos.php)。

如果您在启用警告的情况下进行开发，这将更加明显。在您的开发实例中，使用类似`error_reporting(E_ALL)`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T23:06:34.540

使用[`strrpos`](http://php.net/manual/en/function.strrpos.php)而不是[`strpos`](http://php.net/manual/en/function.strpos.php).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-18T08:27:58.163

当被问到这个问题时，我不知道文档是怎么说的，但是如果我现在看到[文档](http://php.net/manual/en/function.strpos.php)，它说最新版本 7.1.0 支持负偏移量，对于像我这样的人来说，这似乎有点混乱与此问题相同的问题

因此，到目前为止，strpos** 支持负偏移量。

** 在 7.1.0 版本中

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-10T22:19:00.667

PHP 7.1.0 中添加了对负偏移的支持

[http://php.net/manual/en/function.strpos.php](http://php.net/manual/en/function.strpos.php)

# java - Java替换所有字符串，替换所有小于3的数字

> ID：14148707
> 
> 赞同：0
> 
> 时间：2013-01-03T23:04:09.647
> 
> 标签：java

```
public static enum pie {
    APPLE_PIE1(1, 250),
    PUMPKIN_PIE1(2, 300),
    OTHER_PIE1(3, 350),
    APPLE_PIE2(4, 400),
    OTHER_PIE2(5, 450),
    PUMPKIN_PIE2(6, 500),
    APPLE_PIE3(7, 550),
    ;
    private static Map<Integer, pie> pie = new HashMap<Integer, pie>();
    static {
        for(pie pie : pie.values()) {
            pie.put(pie.getId(), pie);
        }
    }

    public static pie forId(int id) {
        return pie.get(id);
    }

    private pie(int id, double exp) {
        this.id = id;
        this.exp = exp;
    }

    public int id;
    public double exp;

    System.out.println("My favorite type of pie is " + pie.toString().toLowerCase().replaceAll("_", " ").replaceAll("2", "").replaceAll("3", "").replaceAll("4", "") + "."); 
```

示例代码被撕掉了，但是我如何让 '.replaceAll(" *number* ", "")' 用更简单的代码替换所有小于或等于 4 的数字？创建一个新的 .replaceAll 3 次是多余的。如果我做...：

```
 double number[] = {1, 2, 3, 4};

    pie.toString().toLowerCase().replaceAll("_", " ").replaceAll(number.toString(), "") + "."); 
```

...我会得到一个令人讨厌的错误。

这是错误...

```
SEVERE: An error occurred in an executor service! The server will be halted immediately.
java.util.regex.PatternSyntaxException: Unclosed character class near index 9
[D@12452e8
        ^
at java.util.regex.Pattern.error(Unknown Source)
at java.util.regex.Pattern.clazz(Unknown Source)
at java.util.regex.Pattern.sequence(Unknown Source)
at java.util.regex.Pattern.expr(Unknown Source)
at java.util.regex.Pattern.compile(Unknown Source)
at java.util.regex.Pattern.<init>(Unknown Source)
at java.util.regex.Pattern.compile(Unknown Source)
at java.lang.String.replaceAll(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T23:09:17.953

要修复您的错误，您应该替换

```
double number[] = {1, 2, 3, 4}; 
```

经过

```
String number = "[1, 2, 3, 4]"; 
```

但我不会使用 replaceAll 来做到这一点。相反，我会`label`以与其他字段类似的方式向您的枚举添加一个字段，并调用`getLabel()`而不是`toString()`，或覆盖`toString()`以返回标签：

```
public static enum pie {
    APPLE_PIE1(1, 250, "apple pie"),
    PUMPKIN_PIE1(2, 300, "pumpkin pie"),
    ...

    private int id;
    private double exp;
    private String label;

    private pie(int id, double exp, String label) {
        this.id = id;
        this.exp = exp;
        this.label = label;
    }

    public String getLabel() {
        return label;
    }

    // optional: I wouldn't do it as it would make debugging harder
    @Override
    public String toString() {
        return label;
    }
} 
```

# pex - Pex4Fun - 连接电话和网站

> ID：14148714
> 
> 赞同：1
> 
> 时间：2013-01-03T23:04:50.310
> 
> 标签：pex

我最近遇到了 Pex4Fun，恰好是通过下载 Windows Phone 应用程序。我已经使用了一段时间，并假设如果我访问 Pex4Fun 网站，我将使用与手机相同的帐户，因为我将使用与手机相同的 Windows ID 登录。这似乎没有发生。有谁知道是否有一种方法可以链接电话帐户和网站帐户/Windows ID，以便我可以在电话和网站之间切换并跟踪我的积分？

# c++ - C++ 字符串/容器分配

> ID：14148715
> 
> 赞同：4
> 
> 时间：2013-01-03T23:04:50.973
> 
> 标签：c++, string, stl

这对于 C++ 非菜鸟来说可能是显而易见的，但这让我有点难过——一个类的字符串成员是否在该类中分配了可变数量的空间？或者它只是在内部分配一个指向内存中其他空间的指针？例如在这个例子中：

```
class Parent {
    public:
    vector<Child> Children;
}

class Child {
    public:
    string Name;
} 
```

如果我创建一个“new Parent()”并添加一些具有不同长度字符串的子级，它是如何在堆上分配的？是 Parent 4 字节，Child 4 字节（或任何指针大小，加上固定大小的内部数据），然后是堆上其他地方的随机一堆字符串？还是全部捆绑在内存中？

我猜一般来说，容器类型本身总是固定大小的，并且只包含指向其可变大小数据的指针，并且这些数据总是在堆上吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T23:11:14.590

C++ 中的类总是固定大小的。当存在可变大小的组件时，例如向量的元素或字符串中的字符，它们可能被分配在堆上（对于小字符串，它们也可能嵌入到字符串本身中；这被称为*小字符串优化*）。也就是说，您的`Parent`对象将包含在堆上分配对象的`std::vector<Child>`位置`Child`（`std::vector<...>`对象本身可能会为其数据保留三个单词，但可以通过多种方式布置事物）。中的`std::string`对象`Child`分配自己的内存。也就是说，可能有相当多的内存分配。

C++ 2011 标准彻底定义了分配器，以支持将分配机制传递给对象及其所有子对象。当然，类也需要支持这种机制。如果您的`Parent`和`Child`类有合适的构造函数采用分配器并将此分配器传递给所有进行分配的成员，它将通过系统传播。这样，可以将属于一起的对象的分配安排得相当接近。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T23:11:45.030

C++ 中的类总是有固定的大小。因此`vector`，and`string`只能包含指向堆分配内存的指针*（尽管它们通常包含比一个指针更多的数据，因为它还需要存储长度）。因此，对象本身始终具有固定长度。

*因为`string`这并不完全正确。通常使用一种称为短字符串优化的优化技术。在这种情况下，小字符串被嵌入到对象内部（否则将存储指向堆数据的指针的位置），并且仅当字符串太长时才分配堆内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T23:10:46.280

是的——用你的话——容器类型本身总是固定大小的，并且只包含指向其可变大小数据的指针。

如果我们有`vector<int> vi;`，则 的大小`vi`始终是固定的，`sizeof(vector<int>)`确切地说，与 中的`int`'s的数量无关`vi`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T23:10:27.433

> 类的字符串成员是否在该类中分配可变数量的空间？

不，不是的。

> 或者它只是在内部分配一个指向内存中其他空间的指针？

不，不是的。

一个`std::string`分配wahtever`sizeof(std::string)`是。

不要混淆

1.  物体的大小
2.  对象负责的资源的大小。

# javascript - 这个递归函数是如何得到这个输出的？

> ID：14148718
> 
> 赞同：1
> 
> 时间：2013-01-03T23:05:09.667
> 
> 标签：javascript, function, recursion

有人可以解释这个递归函数的输出吗？谢谢！

```
function test(a) {
    while (a > 0) {
        a -= 1;
        test(a);
        console.log('after first invocation: ' + a);
    }
}

test(3);​ 
```

输出：

```
after first invocation: 0
after first invocation: 1
after first invocation: 0
after first invocation: 2
after first invocation: 0
after first invocation: 1
after first invocation: 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T23:16:06.427

那么代码会 100% 完成你告诉他做的事情！

```
loop 1 : 
     value of a is 3, is it bigger then 0? Yes!
     3 - 1 = 2 (why not a-- ...) 
     call function test(2)
     is 2 bigger the 0? Yes!
     2 - 1 = 1 
     call function test(1)
     is 1 bigger the 0? Yes!
     1 - 1 = 0 
     call function test(0)
     is 0 bigger then 0 ? NO!
     console.log(('after first invocation: ' + 0) 
```

我不认为我必须为每个输出都这样做，但我认为你明白了吗？

# actionscript-3 - 如何在actionscript 3中绘制位图并在需要时将其回调？

> ID：14148722
> 
> 赞同：0
> 
> 时间：2013-01-03T23:05:16.177
> 
> 标签：actionscript-3, flash, bitmap

我正在使用位图数据来保存游戏中用户的选择...但是我遇到了一个问题...我可以要求位图绘制图像...

```
 circle_clk = new circle_big;
                addChild(cicle_clk);
                circle_clk.addEventListener(MouseEvent.CLICK, cir_bitmap);
                function cir_bitmap (mEvent:MouseEvent) {
                bmpdata= new BitmapData (300, 300); 
                bmp = new Bitmap (bmpdata);
                addChild (bmp);
                bmpdata.draw(circle_clk);
                            } 
```

但是现在我需要问它在游戏结束时带回这个图像......我该怎么做？我如何绘制位图，暂时将其从舞台上移除，并在需要时将其带回..另外我怎么知道它是否真的拍了图像？..有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T00:28:28.717

将此行移至外部上下文，例如类：

```
bmpdata= new BitmapData (300, 300); 
```

然后使用您的代码：

```
circle_clk = new circle_big;
addChild(cicle_clk);
circle_clk.addEventListener(MouseEvent.CLICK, cir_bitmap);
function cir_bitmap (mEvent:MouseEvent) { 
    bmp = new Bitmap (bmpdata);
    addChild (bmp);
    bmpdata.draw(circle_clk);
} 
```

如果您需要删除位图并稍后添加它，只需将其移出舞台（例如更改 X 坐标），然后在您需要图像重新显示时将其放回需要的位置。

# visual-studio - 文本突出显示视觉辅助 x

> ID：14148728
> 
> 赞同：5
> 
> 时间：2013-01-03T23:05:45.433
> 
> 标签：visual-studio, visual-assist

我正在寻找一种方法来禁用在单击/编辑变量时突出显示的相似值的文本，即我单击`enemyValue`并在其旁边键入一些内容，它会自动突出显示所有文本。我已经搜索过，找不到任何东西。

![在此处输入图像描述](../Images/965fe1ba899d46f7b5cdaaf43a7abe8c.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T05:50:31.637

`Advanced | Refactoring`在 Visual Assist X 选项对话框的页面上取消选中“自动突出显示对光标下符号的引用” 。

按 ESC 会暂时删除高光。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T01:54:55.227

在您的 Visual Studio 中查找“VAssistX”菜单选项卡，它就在“查看”旁边，然后单击“Visual Assist X 选项”，如果尚未展开“高级”树视图，则展开，然后选择“显示”并取消选中“突出显示查找结果” .

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T08:37:12.580

也许这有帮助： http: [//www.wholetomato.com/products/features/color.asp](http://www.wholetomato.com/products/features/color.asp)

特别要注意“VAX 查找参考”颜色是在工具 | 中定义的。选项 | 环境 | 字体和颜色。在标有“显示项目”的列表框中滚动到“VA X ...”。

按下 Esc 也会禁用一些着色。

# javascript - andreasgal 的 pdf.js 不使用绝对路径加载 pdf。仅适用于相对路径

> ID：14148734
> 
> 赞同：1
> 
> 时间：2013-01-03T23:06:10.120
> 
> 标签：javascript, pdf.js

我正在使用 javascript 库来使用浏览器呈现 pdf 文件。

这是一个： [https ://github.com/mozilla/pdf.js](https://github.com/mozilla/pdf.js)

我无法使用绝对路径作为我要显示的 PDF 的路径。Altough 相对路径可以正常工作。

此调用不起作用：

```
PDFView.open("D:/Projects/Empenho/Pdf1.pdf", 0); 
```

使用相对路径，我设法让它正常工作：

`PDFView.open("https://localhost/MyPDFs/Pdf1.pdf", 0);`

**打开（）函数：**

```
function getDocument(source) {
  var workerInitializedPromise, workerReadyPromise, transport;

  if (!source.url) 
      error('Invalid parameter array, need either .data or .url');

  workerInitializedPromise = new PDFJS.Promise();
  workerReadyPromise = new PDFJS.Promise();
  transport = new WorkerTransport(workerInitializedPromise, workerReadyPromise);

  console.log(workerReadyPromise);

  workerInitializedPromise.then(function transportInitialized() {
      transport.fetchDocument(source);
  });

  return workerReadyPromise;
}; 
```

只要系统没有良好的调试系统或良好的文档，我就无法找出问题所在。

我相信有一些与 workerReadyPromise 相关的东西，因为我可以打印对象并在使用绝对 x 相对路径时看到差异。当我使用绝对路径时，workerReadyPromise 状态是：

[http://pbrd.co/10VGnuQ](http://pbrd.co/10VGnuQ) 有什么想法吗？

PS。我不确定这是否是相同的情况，但发现了这一点：

[使用绝对路径加载 pdf 文档](https://stackoverflow.com/questions/3258696/loading-a-pdf-document-using-absolute-path)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T14:15:25.217

似乎 pdf.js 使用 AJAX 获取您指定的文件。

您不能对 AJAX 请求使用本地文件路径，这似乎是您遇到问题的地方

[这个问题](https://stackoverflow.com/questions/5933834/using-ajax-to-access-web-from-local-file)的答案解释了原因。

# javascript - jQueryUI 对话框不显示

> ID：14148747
> 
> 赞同：2
> 
> 时间：2013-01-03T23:06:59.957
> 
> 标签：javascript, jquery, jquery-ui, dialog

我正在尝试使用函数生成一个 jQuery UI 对话框。该函数由 onClick 事件触发并正在执行，但由于某种原因对话框不会显示。我敢肯定这很简单。

如果可能，我更愿意以这种方式创建对话框，因为从单独的 html 页面加载对话框会导致 chrome 出现相同的来源问题。该代码是可以离线使用的浏览器扩展的一部分，因此这种方式允许在没有相同来源限制的情况下使用。

我已经创建了一个类似的这种性质的对话框，它在标签之间附加了一个参数。我已经用当前的那个试过了，但没有奏效。

我在主页中添加了最新的 jQuery ui 和 jQuery 库。

我是 javascript 和 jQuery 的新手，但如果有人能提供一些帮助，我将不胜感激。

谢谢，

乔

```
function imageSelection() {

var NewDialog = $('<div id="imageSelectionDialog"> ' +

    "<ol id= \"selectable\">" + 
        "<li class=\"ui-state-default\"><img src=\"images/stock/image1.jpg\"/></li>" + 
        "<li class=\"ui-state-default\"><img src=\"images/stock/image2.jpg\"/></li>" + 
        "<li class=\"ui-state-default\"><img src=\"images/stock/image3.jpg\"/></li>" + 
        "<li class=\"ui-state-default\"><img src=\"images/stock/image4.jpg\"/></li>" + 
        "<li class=\"ui-state-default\"><img src=\"images/stock/image5.jpg\"/></li>" + 
        "<li class=\"ui-state-default\"><img src=\"images/stock/image6.jpg\"/></li>" + 
        "<li class=\"ui-state-default\"><img src=\"images/stock/image7.jpg\"/></li>" + 
        "<li class=\"ui-state-default\"><img src=\"images/stock/image8.jpg\"/></li>" + 
    "</ol>" +

    "<form id=\"pieceSelection\">" + 
         "<div id=\"imageInput\">" + 
             "<input type=\"text\" id=\"image\" value=\"images/stock/walkin.jpg\"" +
                 "title=\"Select an image above or Paste a URL e.g http://server.com/path/to/image.jpg\"/>" + 
         "</div>" +

         "<div id=\"radio\">" + 
             "<input type=\"radio\" id=\"radio1\" name=\"radio\" checked/>" + 
             "<label for=\"radio2\">x3</label>" + 
             "<input type=\"radio\" id=\"radio2\" name=\"radio\"/>" + 
             "<label for=\"radio3\">x4</label>" + 
             "<input type=\"radio\" id=\"radio3\" name=\"radio\"/>" + 
             "<label for=\"radio4\">x5</label>" + 
             "<input type=\"radio\" id=\"radio4\" name=\"radio\"/>" + 
             "<label for=\"radio5\">x6</label>" + 7
             "<input type=\"radio\" id=\"radio5\" name=\"radio\"/>" + 
             "<label for=\"radio6\">x7</label>" +
             "<input type=\"radio\" id=\"radio6\" name=\"radio\"/>" + 
             "<label for=\"radio7\">x8</label>" + 
             "<input type=\"radio\" id=\"radio7\" name=\"radio\"/>" + 
             "<label for=\"radio8\">x9</label>" + 
        "</div>" + 
    "</form>" + 
'</div> ');

NewDialog.dialog({
    autoOpen: false,
    modal: true,
    height: 500,
    width: 500,
    title: 'Choose an image',
    buttons: {
        "Ok": function() {
            $(this).dialog("close");
        }
    }
});

return false;

}​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T23:17:52.100

您的字符串中似乎有意外`7`情况，这使此连接无效，从而导致`Uncaught SyntaxError: Unexpected string`.

改变这个：

```
"<label for=\"radio5\">x6</label>" + 7
"<input type=\"radio\" id=\"radio5\" name=\"radio\"/>" + 
```

对此：

```
"<label for=\"radio5\">x6</label>" +
"<input type=\"radio\" id=\"radio5\" name=\"radio\"/>" + 
```

或这个：

```
"<label for=\"radio5\">x6</label>" + 7 + 
"<input type=\"radio\" id=\"radio5\" name=\"radio\"/>" + 
```

此外，如果您希望对话框立即可见，您需要设置`autoOpen`为。`true`

[**演示**](http://jsfiddle.net/HwXPx/)- 删除`7`and 设置`autoOpen`为 true

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T23:14:02.873

您似乎没有将**HTML 附加到 DOM**以使其工作..''

在将其分配给 Do=ialog 之前将其附加到正文中，它应该可以工作..

```
var html = '<div id="imageSelectionDialog"> ' + 
            //other html  ;

$('body').append(html);

var NewDialog = $("#imageSelectionDialog");

// Code to Initialize the dialog 
```

# php - 评级系统协助

> ID：14148748
> 
> 赞同：0
> 
> 时间：2013-01-03T23:07:01.283
> 
> 标签：php, jquery, mysql, ajax

我正在使用来自[http://net.tutsplus.com/tutorials/html-css-techniques/building-a-5-star-rating-system-with-jquery-ajax-and-php/的评级脚本](http://net.tutsplus.com/tutorials/html-css-techniques/building-a-5-star-rating-system-with-jquery-ajax-and-php/)

但我希望它将评分上传到数据库并阻止一个人一直投票给同一张照片。

这是我上传和设置 cookie 的脚本：

```
<?php 
// Get id and voted value
$id = $_POST['widget_id'];
preg_match('/star_([1-5]{1})/', $_POST['clicked_on'], $match);
$vote = $match[1];

// Connect to database and find the row which have the id
$get = mysql_query("SELECT * FROM ratings WHERE id = '$id'");

while ($getdata = mysql_fetch_array($get)) {
    $total_votes = $getdata['total_votes'];
    $total_value = $getdata['total_value'];

    // See if the votes and value is 0 and if it aint it update the database and if it is were creating a new row
    if ($total_votes != 0 && $total_value != 0) {
            $total_votes++;
            mysql_query("UPDATE ratings SET total_votes = '$total_votes' WHERE 
                         id = '$id'");
} else {
    mysql_query("INSERT INTO ratings (id, total_votes, total_value) 
                 VALUES ('$id', '1', '$vote')");
}

// Sets the cookie
$value = $id;
// Send a cookie that expires in 24 hours
setcookie($id, $value, time() + 3600 * 24); 
?> 
```

但是如果用户已经投票了，他仍然可以投票，所以我需要某种方式来检查他是否有 cookie 以及从 mysql 表中获取数据并将其发送给用户的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T23:09:59.293

语法错误...

```
$total_votes = $total_votes . +1; 
```

这将增加 1`$total_votes`

```
$total_votes++; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T23:19:55.793

这里你将 $value 设置为与 id 相同。

```
 $value = $id; 
```

在这里，您创建了一个名为 $id 变量值的 cookie，它使 cookie 成为动态名称。

```
setcookie($id,$value, time()+3600*24); 
```

使 cookie 始终设置静态名称

```
//create cookie
setcookie('widget_id',$id, time()+3600*24); // $value is useless

//read cookie
echo $_COOKIE['widget_id']; //prints the cookie

// unset cookie
unset($_COOKIE['widget_id'];); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T01:02:33.997

好的，我得到了检查cookie是否设置完成的功能，所以现在我只需要从mysql表中获取数据并输出到javascript

这是我的代码

```
 <?php 
// Get id and voted value
$id = $_POST['widget_id'];
preg_match('/star_([1-5]{1})/', $_POST['clicked_on'], $match);
$vote = $match[1];
// Connect to database and find the row which have the id
$get = mysql_query("SELECT * FROM ratings WHERE id = '$id'");

if (isset($_COOKIE[$id])) {
echo 'cookie exist';
exit;
} else {

while ($getdata = mysql_fetch_array($get)) {
    $total_votes = $getdata['total_votes'];
    $total_value = $getdata['total_value'];

    // See if the votes and value is 0 and if it aint it update the database and if it is were creating a new row
    if ($total_votes != 0 && $total_value != 0) {
            $total_votes++;
            mysql_query("UPDATE ratings SET total_votes = '$total_votes' WHERE 
                         id = '$id'");
} else {
    mysql_query("INSERT INTO ratings (id, total_votes, total_value) 
                 VALUES ('$id', '1', '$vote')");
}

// Send a cookie that expires in 24 hours
setcookie($id, $id, time() + 3600 * 24); 
}
?> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-03T23:16:06.937

您不应该跟踪用户是否使用 cookie 对特定事物进行了投票。

相反，您应该在提交 INSERT 投票查询之前检查您的数据库以确保用户没有对特定事物进行投票。

如果用户已经投票，也许执行 UPDATE 而不是 INSERT 以将他们的投票更改为新值。

所以你会像这样检查：

```
SELECT * FROM ratings
WHERE userid=:userid 
```

您将受益于使用 PDO ( [http://php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php) ) 绑定必要的参数，然后可以轻松检查返回的行数 ( [http://php.net/manual/ en/pdostatement.rowcount.php](http://php.net/manual/en/pdostatement.rowcount.php)）。

如果返回 1 行，则用户已经投票。然后您可以使用新的投票值更新投票。

如果返回 0 行，则用户尚未投票。然后，您可以像在上面的代码中那样进行插入。

如果返回多于 1 行，则表示已经插入了多个投票，您需要删除除 1 个之外的所有投票。

我建议为各个页面/对象添加一列，以便您可以使用此功能。

# vmware - Jstatd 连接问题

> ID：14148750
> 
> 赞同：3
> 
> 时间：2013-01-03T23:07:09.487
> 
> 标签：vmware, visualvm, jstatd

将 jstatd 与 visualvm 连接起来有点麻烦。以下是我的设置的细分：

**jstatd.policy**

```
grant codebase "file:/usr/java/jre1.7.0/lib/tools.jar" {
permission java.security.AllPermission;
}; 
```

**被称为**

```
jstatd -p 9999 -J-Djava.security.policy=/usr/java/jre1.7.0/bin/jstatd.policy 
```

**拉端口**

```
tcp        0      0 0.0.0.0:43786           0.0.0.0:*               LISTEN      22846/jstatd
tcp        0      0 0.0.0.0:9999            0.0.0.0:*               LISTEN      22846/jstatd 
```

**和港口尼斯和开放**

```
ACCEPT     tcp  --  anywhere             anywhere            tcp dpt:9999
ACCEPT     tcp  --  anywhere             anywhere            tcp dpt:43786 
```

正在运行的应用程序位于 vmware 上，尽管可以毫无问题地访问应用程序。

如果有人对连接到 visualvm 有任何想法，那就太好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T15:35:50.130

可能您需要使用主机 IP 地址参数启动 jstatd，如下所示： jstatd -p 9999 -J-Djava.security.policy=/usr/java/jre1.7.0/bin/jstatd.policy -J-Djava.rmi.server .hostname=192.168.0.123

192.168.0.123 - 使用远程服务器的 IP 地址更改此 IP

检查此链接：[http ://hwellmann.blogspot.com/2012/01/troubleshooting-visualvm-remote.html](http://hwellmann.blogspot.com/2012/01/troubleshooting-visualvm-remote.html)

# java - 从传递参数的命令行编译java程序

> ID：14148753
> 
> 赞同：0
> 
> 时间：2013-01-03T23:07:31.783
> 
> 标签：java

我写了一个简单的java程序

```
package abc.def.ghi 
public class Foobar{

   public String printS(String s){
     System.Out.println(s);

 public static void main(String [] args){
   String s = args[0];
   Foobar foobar = new Foobar();
    foobar.printS(s);
} 
```

现在我做了 javac Foobar.java

它创建了一个类文件

然后我做了

```
java Foobar 
```

没用

```
 java Foobar hi //args 
```

没用

爪哇-cp。abc.def.ghi.Main

没有工作。

我得到的错误是：

```
Exception in thread "main" java.lang.NoClassDefFoundError: abc/def/ghi/Main
Caused by: java.lang.ClassNotFoundException: com.intel.hadoop.graphbuilder.conf.Main
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
Could not find the main class: com.intel.hadoop.graphbuilder.conf.Main.  Program will exit. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T23:09:41.600

你把你的`.class`文件放在路径中了`(path to project)/abc/def/ghi/Foobar.class`吗？

```
NoClassDefFoundError: abc/def/ghi/Foobar 
```

看起来你没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T23:16:43.277

如果你编译使用

```
javac -d . Foobar.java 
```

然后编译器会将`.class`文件放在正确的目录中以匹配其包名，然后

```
java abc.def.ghi.Foobar 
```

应该成功运行它。

# c++ - (template) rebind<> 做什么？

> ID：14148756
> 
> 赞同：33
> 
> 时间：2013-01-03T23:07:35.150
> 
> 标签：c++, visual-studio, stl

试图更多地了解标准库是如何实际实现的，我正在检查 Visual Studio 中的所有容器。在这里，我看到了一些奇怪的结构：

在 a 的某个基类中`std::list<>`找到以下 typedef

```
typedef typename _Alloc::template rebind<_Ty>::other _Alty; 
```

其中“_Alloc”对应于分配器模板参数（和 _Ty 包含的类型）。我很难找到这个“关键字”的一个很好的解释。到目前为止我发现的最好的事情是它是分配器接口的一部分。尽管即使[cppreference](http://en.cppreference.com/w/cpp/concept/Allocator)也不能很好地解释这一点。

这是`template rebind<>`做什么的？为什么在那个位置有必要？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-03T23:18:10.217

`_Alloc`模板用于获取某种类型的对象。容器可能有内部需要分配不同类型的对象。例如，当您有 a 时`std::list<T, A>`，分配器`A`旨在分配类型的对象，`T`但`std::list<T, A>`实际上需要分配某些节点类型的对象。调用节点类型`_Ty`，`std::list<T, A>`需要获取一个`_Ty`对象的分配器，该分配器使用 . 提供的分配机制`A`。使用

```
typename _A::template rebind<_Ty>::other 
```

指定对应的类型。现在，这个声明中有一些语法上的烦恼：

1.  由于`rebind`是 的成员模板`_A`并且`_A`是模板参数，因此`rebind`成为从属名称。为了表明从属名称是一个模板，它需要以 . 作为前缀`template`。如果没有`template`关键字 the`<`将被认为是小于运算符。
2.  该名称`other`还取决于模板参数，即，它也是一个从属名称。为了表明从属名称是一种类型，`typename`需要关键字。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-03T23:17:45.523

`rebind`用于为与正在实现的容器的元素类型不同的类型分配内存。取自[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/5fk3e8ek%28v=VS.71%29.aspx)：

> 例如，给定一个 A 类型的分配器对象 al，您可以使用以下表达式分配一个 _Other 类型的对象：
> 
> `A::rebind<Other>::other(al).allocate(1, (Other *)0)`
> 
> 或者，您可以通过编写类型来命名它的指针类型：
> 
> `A::rebind<Other>::other::pointer`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-06-01T02:55:26.200

stdc++ 代码中的示例：/usr/include/4.8/ext/new_allocator.h

rebind 被定义为分配器类的结构成员；此结构定义了一个成员**other** ，该成员定义为专用于不同参数类型的分配器实例（**另一个**成员定义了可以创建不同类型对象的分配器类）

```
 template<typename _Tp>
    class new_allocator
    {
    public:
      ...
      template<typename _Tp1>
        struct rebind
        { typedef new_allocator<_Tp1> other; }; 
```

使用时：

```
 typedef typename _Alloc::template rebind<_Tp>::other _Tp_alloc_type; 
```

分配器的类型被引用为

```
 typename _Alloc::template rebind<_Tp>::other 
```

现在 typedef 用于定义**_Tp_alloc_type** - 然后可以将其用作同一事物的较短名称。

一个示例用法是在 std::list 中，其中内部列表节点也需要它的分配器，它是从参数分配器重新定义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-30T09:07:42.783

请检查这个[http://www.cplusplus.com/reference/memory/allocator/](http://www.cplusplus.com/reference/memory/allocator/)

你会看见

rebind<...> 实际上是类分配器的成员，它是 STL 的一部分，但没有给出实现的源代码。

如您所见， rebind<...> 也是一个模板，它值得一个类型来让分配器类知道我的 rebind 成员中有什么。

所以回到你的陈述： typedef typename _Alloc::template rebind<_Ty>::other _Alty; 如果你省略了模板： typedef typename _Alloc::rebind<_Ty>::other _Alty; 你可以很容易地理解 rebind 是 _Alloc 的成员，但编译器无法理解。

鉴于 rebind 是模板的性质，需要模板 rebind<_Ty> 并将其视为整体而不是两个部分。

# opencv - 如何在 OpenCV 中捕获桌面（即将位图变成 Mat）？

> ID：14148758
> 
> 赞同：26
> 
> 时间：2013-01-03T23:07:34.933
> 
> 标签：opencv, bitmap, desktop, mat

我想使用 OpenCV 来处理我的桌面，就好像它是一个视频流一样。
我熟悉 OpenCV。
我不熟悉 Windows API。我意识到还有其他方法可以捕获屏幕，但就我的问题而言，我需要使用 OpenCV 来完成。

这是我的（超级天真）代码：

```
HWND hDesktopWnd;
HDC hDesktopDC;
hDesktopWnd=GetDesktopWindow();
hDesktopDC=GetDC(hDesktopWnd);

// get the height and width of the screen
int height = GetSystemMetrics(SM_CYVIRTUALSCREEN);
int width = GetSystemMetrics(SM_CXVIRTUALSCREEN);

// create a bitmap
HBITMAP hbDesktop = CreateCompatibleBitmap( hDesktopDC, width, height);

Mat src(height,width,CV_8UC4);
src.data = (uchar*)hbDesktop;

imshow("output",src);  //fails :( 
```

StackOverflow 上也有类似的问题，但它们要么是针对旧式 OpenCV，要么是针对 Android 操作系统。
我在 Windows 7 64x
Opencv 2.4.3

感谢任何可以回答这个问题的人。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-01-05T01:06:56.323

经过**多次**试验和错误，我设法编写了一个函数来做到这一点。这是给其他可能想要的人的：

```
#include "stdafx.h"
#include "opencv2/core/core.hpp"
#include "opencv2/imgproc/imgproc.hpp"
#include <opencv2/highgui/highgui.hpp>
#include <Windows.h>
#include <iostream>
#include <string>
using namespace std;
using namespace cv;

Mat hwnd2mat(HWND hwnd){

    HDC hwindowDC,hwindowCompatibleDC;

    int height,width,srcheight,srcwidth;
    HBITMAP hbwindow;
    Mat src;
    BITMAPINFOHEADER  bi;

    hwindowDC=GetDC(hwnd);
    hwindowCompatibleDC=CreateCompatibleDC(hwindowDC);
    SetStretchBltMode(hwindowCompatibleDC,COLORONCOLOR);  

    RECT windowsize;    // get the height and width of the screen
    GetClientRect(hwnd, &windowsize);

    srcheight = windowsize.bottom;
    srcwidth = windowsize.right;
    height = windowsize.bottom/2;  //change this to whatever size you want to resize to
    width = windowsize.right/2;

    src.create(height,width,CV_8UC4);

    // create a bitmap
    hbwindow = CreateCompatibleBitmap( hwindowDC, width, height);
    bi.biSize = sizeof(BITMAPINFOHEADER);    //http://msdn.microsoft.com/en-us/library/windows/window/dd183402%28v=vs.85%29.aspx
    bi.biWidth = width;    
    bi.biHeight = -height;  //this is the line that makes it draw upside down or not
    bi.biPlanes = 1;    
    bi.biBitCount = 32;    
    bi.biCompression = BI_RGB;    
    bi.biSizeImage = 0;  
    bi.biXPelsPerMeter = 0;    
    bi.biYPelsPerMeter = 0;    
    bi.biClrUsed = 0;    
    bi.biClrImportant = 0;

    // use the previously created device context with the bitmap
    SelectObject(hwindowCompatibleDC, hbwindow);
    // copy from the window device context to the bitmap device context
    StretchBlt( hwindowCompatibleDC, 0,0, width, height, hwindowDC, 0, 0,srcwidth,srcheight, SRCCOPY); //change SRCCOPY to NOTSRCCOPY for wacky colors !
    GetDIBits(hwindowCompatibleDC,hbwindow,0,height,src.data,(BITMAPINFO *)&bi,DIB_RGB_COLORS);  //copy from hwindowCompatibleDC to hbwindow

    // avoid memory leak
    DeleteObject (hbwindow); DeleteDC(hwindowCompatibleDC); ReleaseDC(hwnd, hwindowDC);

    return src;
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-04-01T08:27:13.667

一个更好的方法是**只为像素分配一次内存。所以这里唯一的副本是BitBlt制作的**

[![在此处输入图像描述](../Images/f5a0eff50cc0914aa2d60215fb2cb360.png)](https://i.stack.imgur.com/wEynf.png)

```
int main()

{

    int x_size = 800, y_size = 600; // <-- Your res for the image

    HBITMAP hBitmap; // <-- The image represented by hBitmap

    Mat matBitmap; // <-- The image represented by mat

    // Initialize DCs

    HDC hdcSys = GetDC(NULL); // Get DC of the target capture..
    HDC hdcMem = CreateCompatibleDC(hdcSys); // Create compatible DC 

    void *ptrBitmapPixels; // <-- Pointer variable that will contain the potinter for the pixels

    // Create hBitmap with Pointer to the pixels of the Bitmap
    BITMAPINFO bi; HDC hdc;
    ZeroMemory(&bi, sizeof(BITMAPINFO));
    bi.bmiHeader.biSize = sizeof(BITMAPINFOHEADER);
    bi.bmiHeader.biWidth = x_size;
    bi.bmiHeader.biHeight = -y_size;  //negative so (0,0) is at top left

    bi.bmiHeader.biPlanes = 1;

    bi.bmiHeader.biBitCount = 32;
    hdc = GetDC(NULL);
    hBitmap = CreateDIBSection(hdc, &bi, DIB_RGB_COLORS, &ptrBitmapPixels, NULL, 0);
    // ^^ The output: hBitmap & ptrBitmapPixels

    // Set hBitmap in the hdcMem 
    SelectObject(hdcMem, hBitmap);

    // Set matBitmap to point to the pixels of the hBitmap
    matBitmap = Mat(y_size, x_size, CV_8UC4, ptrBitmapPixels, 0);
    //                ^^ note: first it is y, then it is x. very confusing

    // * SETUP DONE *

    // Now update the pixels using BitBlt
    BitBlt(hdcMem, 0, 0, x_size, y_size, hdcSys, 0, 0, SRCCOPY);

    // Just to do some image processing on the pixels.. (Dont have to to this)
    Mat matRef = matBitmap(Range(100, 200), Range(100, 200));
    //                              y1    y2            x1     x2
    bitwise_not(matRef, matRef); // Invert the colors in this x1,x2,y1,y2

    // Display the results through Mat
    imshow("Title", matBitmap);

    // Wait until some key is pressed

    waitKey(0);

    return 0;

} 
```

**请注意，这里没有进行错误处理以使其易于理解，但您必须在代码中进行错误处理！**

**希望这可以帮助**

# r - 从 JRI 保存大型 data.frame 时出现 Java 运行时段错误

> ID：14148764
> 
> 赞同：0
> 
> 时间：2013-01-03T23:07:57.540
> 
> 标签：r, segmentation-fault, rjava, large-data

我已经按照 rJava 安装中的 rtest.java 示例代码（Debian 和衍生产品上的 /usr/lib/R/site-library/rJava/jri/examples/rtest.java）从 java 数组构建 data.frames。

这适用于小数据帧（约 10000 行），但是当我愤怒地尝试执行此操作（即 > 1000000 行）时，它会导致 java 运行时出现段错误。

奇怪的是，我似乎能够创建 data.frame ok（进行通常的 rniPutXXXArray 调用），但是当我来保存 data.frame （使用 eval，在将 data.frame 分配给 R 符号之后）问题发生。

当我在 R 引擎上调用 eval 时，我可以看到一些调试，但是当我通过低级接口 (rniXXX) 时，我根本没有得到任何调试。有没有办法打开比我已经拥有的更多的调试？

对于它的价值，这里是 segv 消息的顶部。我当然可以根据要求提供更多细节。

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGSEGV (0xb) at pc=0x00007f1be6259ea5, pid=6898, tid=139758087001856
#
# JRE version: 7.0_03-b21
# Java VM: OpenJDK 64-Bit Server VM (22.0-b10 mixed mode linux-amd64 compressed oops)
# Derivative: IcedTea7 2.1.3
# Distribution: Debian GNU/Linux unstable (sid), package 7u3-2.1.3-1
# Problematic frame:
# C  [libR.so+0x117ea5]  SET_VECTOR_ELT+0x11f5
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T03:58:00.877

请在 stats-rosuda-devel 上询问，包括您正在使用的实际代码。请注意，使用 RNI 调用，您负责保护对象 - 不幸的是，示例代码跳过了该方面，因此可能发生的情况是，由于对象的大小，垃圾收集发生在您完成构造之前，因此一些对象被收集，因此是无效的，R 会在你身上崩溃。如果您想安全，请保护列，然后保护您从中创建的通用向量。

BTW：使用`org.rosuda.REngine`API 比直接使用 RNI 更安全。它甚至提供`REXP.createDataFrame()`了为您完成所有工作的方法。

# c# - 从浏览器控制访问历史记录和其他内容

> ID：14148767
> 
> 赞同：2
> 
> 时间：2013-01-03T23:08:14.290
> 
> 标签：c#, windows-phone

在当前使用从会话中添加每个站点的列表框时，我将如何从浏览器控件访问历史记录和 cookie，但它不是很可靠并且不能与后退按钮一起使用。

windows phone 上是否还有返回按钮的代码？`GoBack();`不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T23:34:15.343

您可以将您在 webbrowser 控件中导航的页面添加到应用程序的历史堆栈中，以便用户可以使用手机的后退按钮进行导航。

我在 MSDN 博客上发现了一篇关于这个问题的非常有趣的文章，可以在[**这里**](http://blogs.msdn.com/b/jaimer/archive/2011/02/04/back-button-press-when-using-webbrowser-control-in-wp7.aspx)找到。我将发布一小部分代码作为备注。

1) 监听 WebBrowser.Navigated 事件；跟踪已访问的页面。

```
Stack<Uri> history= new Stack<Uri>();
Uri current = null; 
private void WebBrowser_Navigated(object sender, System.Windows.Navigation.NavigationEventArgs e)
{
    Uri previous = null;           
    if (history.Count > 0)
        previous = history.Peek();

    // This assumption is NOT always right. 
    // if the page had a forward reference that creates a loop (e.g. A->B->A ), 
    // we would not detect it, we assume it is an A -> B -> back () 
    if (e.Uri == previous)
    {
        history.Pop();                     
    }
    else
    {
        if (current != null)
            history.Push(current);                          
    }
    current = e.Uri; 
} 
```

2) 收听页面上的 OnBackKeyPress。如果 WebBrowser 有导航堆栈，请取消后退键并在 webbrowser 控件的堆栈中导航。

```
protected override void OnBackKeyPress(System.ComponentModel.CancelEventArgs e)
{
    base.OnBackKeyPress(e);

    if (!isPerformingCloseOperation) 
    {
        if (history.Count > 0)
        {                        
            Uri destination = history.Peek();
            webBrowser.Navigate(destination);
            // What about using script and going history.back? 
            // you can do it, but 
            // I rather use that to keep ‘track’ consistently with our stack 
            e.Cancel = true;
        }
    } 
} 
```

请注意，仍然有一些边缘情况没有很好地实现。

如您所见，代码是微不足道的，但它有一个未解决的问题。它无法区分：

*   导航（a）->导航（b）->返回（）；
*   导航(a) -> 导航(b) -> 导航(a)；

最后，总结一下：

*   并非所有应用程序都需要这种集成。如果您只显示一个页面，并且不想鼓励导航，请使用一种 UX 模式来提示用户 UI 是瞬态的——让它看起来像一个弹出窗口，在弹出窗口上放置一个关闭按钮'</li >
*   如果您的应用确实鼓励在浏览器中导航，请考虑上述模式。不要因为认证要求而这样做，因为它对用户来说是直观的。这就是存在需求的原因。
*   如果您认为您的应用程序不属于上述任何一项，请向认证团队请求例外处理。也就是说，我强调你应该努力为你的用户创造一种直观的体验。我认为这两个选项做得最好，所以我推荐它们——而不是借口/例外路线——。

我希望你能用这个做点什么。

（完全归功于编写博客和代码的 Jaime Rodriguez。我只是发布他所写内容的摘要。）

# jdbc - 是否有替代使用一个语句的 ResultSet 作为格式字符串参数来执行另一个语句

> ID：14148768
> 
> 赞同：0
> 
> 时间：2013-01-03T23:08:36.333
> 
> 标签：jdbc, prepared-statement, postgresql-9.2, psql, callable-statement

PostgreSQL 9.2、jdbc4 和 DBMS 通过 PgAdmin3。

我需要使用语句对象检索一些结果集，该语句对象是具有存储函数的可调用对象，然后通过比较这些结果集类型来处理类型。在我处理它们之后，我希望将它们中的一些设置为另一个语句的格式字符串参数。

这是我想要完成的一些伪代码。本质上，我想迭代地添加到批处理，然后使用保存点或回滚进行批处理更新，并在执行该批处理后提交这些更改。

此外，存储过程中有一些 postgres 作为 jdbc 相关语法的字符串，我不确定是否使用 IS NULL、转义引号、需要分号等。

```
String SQL = "UPDATE AdminBoundaries SET \"WIKI_URL\" = ?";
Statement stmt = conn.createStatement();
stmt.execute("CREATE OR REPLACE FUNCTION refcursorfunc() RETURNS refcursor AS '"
        + " DECLARE "
        + "    mycurs refcursor; "
        + " BEGIN "
        + "    OPEN mycurs FOR SELECT \"NAME_5\", \"NAME_4\", \"NAME_3\", \"NAME_2\", \"NAME_1\", \"NAME_0\", \"WIKI_URL\", \"LEVEL_DEPT\" FROM"
        + " AdminBoundaries WHERE \"WIKI_URL\" IN(SELECT \"WIKI_URL\" FROM AdminBoundaries"
        + " GROUP By \"WIKI_URL\" HAVING (count (\"WIKI_URL\") > 1)) ORDER BY \"WIKI_URL\";; "
        + "    RETURN mycurs; "
        + " END;' language plpgsql");

conn.setAutoCommit(false);
CallableStatement funct = conn.prepareCall("{ ?, ?, ?, ?, ?, ?, ?,? = call refcursorfunc()}");
funct.registerOutParameter(1, java.sql.Types.VARCHAR);
funct.registerOutParameter(2, java.sql.Types.VARCHAR);
funct.registerOutParameter(3, java.sql.Types.VARCHAR);
funct.registerOutParameter(4, java.sql.Types.VARCHAR);
funct.registerOutParameter(5, java.sql.Types.VARCHAR);
funct.registerOutParameter(6, java.sql.Types.VARCHAR);
funct.registerOutParameter(7, java.sql.Types.VARCHAR);
funct.registerOutParameter(8, java.sql.Types.INTEGER);
funct.execute(); 
ResultSet results (ResultSet) funct.getObject(1);
while(results.next()){
String base_url = "http://127.0.0.1/mediawiki/index.php/";
String name0 = rs.getString("NAME_0");
String name1 = rs.getString("NAME_1");
String name2 = rs.getString("NAME_2");
String name3 = rs.getString("NAME_3");
String name4 = rs.getString("NAME_4");
String name5 = rs.getString("NAME_5");
String wiki_url = rs.getString("WIKI_URL");
int level = rs.getInt("LEVEL_DEPT");
}
PreparedStatement pstmt = null; 
pstmt = conn.prepare(SQL, ResultSet.TYPE_SCROLL_INSENSITIVE,ResultSet.HOLD_CURSORS_OVER_COMMIT, ResultSet.CONCUR_UPDATABLE);
if(wiki_url.equals(somestring)){
if(name1 == null){
  if(level != 0){
    pstmt.setString(1, somestring + name1);
    pstmt.addBatch();

    if(name2 == null ){

      ...etc.

     }

       }
    //either executeUpdate or executeBatch
    conn.commit()
    pstmt.clearBatch()
    conn.setAutoCommit(true);
 } 
```

在这种情况下是否可以混合和匹配准备好的语句、可调用的语句或语句？

我知道在执行该语句之前，每个语句只能打开一个结果集，但是如果它关闭，我如何保留结果集的类型对象（即 getXXX 并将其存储为某种数据类型）以在另一个语句上使用？

这适用于首先使用 select 检索数据，然后是三个更新的应用程序。所有这三个都将是具有不同参数的批量更新，这些参数将遍历数据库的行，所有这些都在每次更新后提交的单独事务上进行。每次更新都将是一个单独的函数。

我本来是想用一个语句的结果集，然后用updateXXX和updateRow，但我对效率并不完全确定。

# ios - UIDatePicker 崩溃：未能分配 100,000 行

> ID：14148777
> 
> 赞同：5
> 
> 时间：2013-01-03T23:09:39.540
> 
> 标签：ios, uikit, uidatepicker

使用 iOS 日期选择器时，我遇到了罕见的崩溃。

崩溃是： NSInternalInconsistencyException 未能为第 0 节中的 100000 行分配数据存储。考虑使用更少的行

```
UITextField *dateinput = [[UITextField alloc] initWithFrame:CGRectMake(26, yOffset, 268, 35)];
[dateinput setPlaceholder:@"Ends:"];
[dateinput setText:@""];
[self configureTextField:dateinput];
[footer addSubview:dateinput];
[self setDateinput:dateinput];

UILabel* dateinputLabel = [[UILabel alloc] initWithFrame: CGRectMake(26, yOffset - 21, 268, 30.0f)];
[dateinputLabel setTextColor:[UIColor colorWithRGBHex:0x777777]];
[dateinputLabel setFont:[UIFont fontWithName:@"Helvetica" size:11]];
[dateinputLabel setBackgroundColor:[UIColor clearColor]];
dateinputLabel.text = @"End Date";
[footer addSubview:dateinputLabel];

UIDatePicker *datePicker = [[UIDatePicker alloc] init];
[datePicker setDatePickerMode:UIDatePickerModeDate]; //crash on this line
[dateinput setInputView:datePicker]; 
```

由于某种原因，日期选择器在内部分配了大量的行并崩溃，因为没有那么多行可用。

日期选择器分配这么多行是否正确？如果没有，谁能看到我在做什么导致这种奇怪的行为？

请注意，我无法复制此问题。很明显，少数用户受到影响（通过 crashlytics）

# php - 从表中删除错误的记录

> ID：14148782
> 
> 赞同：0
> 
> 时间：2013-01-03T23:09:57.693
> 
> 标签：php, forms, select, html-table

我需要你的建议。我从数据库获取数据到表：ID，名称。表中有操作：删除、启用、阻止。When action Delete is selected, I would like, that respectively record will be deleted. 但是，我的脚本不起作用并且总是删除最后一条记录，即使我选择了另一条记录。我认为问题是，所有记录的选择名称和隐藏输入名称都是相似的。但我找不到方法，如何用不同的名称创建它们。欢迎任何建议。

HTML：

```
 <form method='post'> 
  <table border='1'>
  <tr>
  <th> ID </th>
<th> Name </th>
<th> Action </th>
</tr> 
```

代码：

```
$db = new PDO('mysql:host=localhost;dbname=****;charset=utf8', '**', '**');
$query = $db->query("SELECT ID,statusas,login,vardas,email FROM users");

while($row = $query->fetch(PDO::FETCH_BOTH)) { 
 echo "<tr><input type='hidden' name='id' value='".$row[0]."'>";
 echo "<td>".$row[0]."</td>";
 //echo "<td>".$row[1]."</td>";
 echo "<td>".$row[2]."</td>";
 //echo "<td>".$row[3]."</td>";
// echo "<td>".$row[4]."</td>";
 echo "<td><select name='action'>
             <option value='choose'>Choose..</option>
             <option value='delete'> Delete </option>
             <option value='enable'> Enable </option>
             <option value='block'> Block</option>
        </select></td>";
   echo "</tr>";
 }
 echo "<br><input type='submit' name='submit'></table></form>";

 if($_POST['submit']) {
   if ($_POST['action']== 'delete') {
   echo $_POST['id']; // delete query, but now I am just checking if I get a proper ID.
  }
}
else {
echo "bad";
} 
```

![桌子](../Images/05a1e04f1d51e69c7329d0ac6264343a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T23:19:23.380

您`name`在表单中的每一行都使用相同的属性，因此它们被覆盖并且使用最后一个。

你可以做的是以自己的形式包装每一行，或者你可以做这样的事情，并且只有 1 个提交按钮来执行每一行的操作：

```
// remove hidden id element

...

echo "<td><select name='action[" . $row[0] . "]'>"

...
// remove submit button in the loop, but add it after the while loop
...

if (isset($_POST['action']))
{
    foreach ($_POST['action'] as $id => $action)
    {
        if ($action !== 'choose')
        {
            // do action on the id;
            echo $id . " -> " . $action . "<br>";
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T23:15:55.850

您将每个 ID 放入表单中，这会导致 CGI 发送如下内容：id=1、id=2、id=3 等。然后 PHP 只读取最后一个 ID 并将其删除。

要修复它，请为每一行赋予其自己的形式。

```
while($row = $query->fetch(PDO::FETCH_BOTH)) { 
 echo "<form method='post'>";
 echo "<tr><input type='hidden' name='id' value='".$row[0]."'>";
 echo "<td>".$row[0]."</td>";
 //echo "<td>".$row[1]."</td>";
 echo "<td>".$row[2]."</td>";
 //echo "<td>".$row[3]."</td>";
// echo "<td>".$row[4]."</td>";
 echo "<td><select name='action'>
             <option value='choose'>Choose..</option>
             <option value='delete'> Delete </option>
             <option value='enable'> Enable </option>
             <option value='block'> Block</option>
        </select></td>";
   echo "</tr>";
   echo "</form>";
 }
 echo "<br><input type='submit' name='submit'></table>"; 
```

# php - 如何创建允许用户拥有自定义字段的 PHP 应用程序

> ID：14148786
> 
> 赞同：0
> 
> 时间：2013-01-03T23:10:05.313
> 
> 标签：php, mysql

是否有任何示例 PHP 应用程序允许用户设置自定义字段？

比如通讯录等。比如在mySQL中设置一个没有数据库列的字段为Home、Home Away等。能够拥有尽可能多的字段并根据需要命名。

所以结果可能是：

```
| #   | Name  | DOB    | Address 1     | Health  
| 1   | Scott | 7/1/12 | 2222 Jackson  |  GOOD 
```

另一组数据可能是

```
| # | Name  | Expertise Level | Contact Info    
| 1 | Scott | High            | 408-555-5555 
```

我很好奇这是怎么做到的。一切都会作为 JSON 存储在单个 mysql 表中吗？以及如何存储每个字段的数据？

那里有任何 PHP 脚本已经这样做了，所以我可以把它拆开来理解？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T23:18:39.540

由于您已将其标记为 MySQL，因此您可以通过多种方式获得灵活的数据库表。您可以创建一个包含名称-值-对的表，类似于：

```
create table YourTable
(
  id int,
  name varchar(50),
  attribute varchar(50),
  value varchar(50)
);

insert into yourtable
values(1, 'Scott', 'DOB', '07/01/2012'),
  (1, 'Scott', 'Address 1', '2222 Jackson'),
  (1, 'Scott', 'Health', 'Good'),
  (1, 'Scott', 'Expertise Level', 'High'),
  (1, 'Scott', 'Contact Info', '408-555-5555'); 
```

这也称为`Entity-Attribute-Value`. 使用这种类型的结构有利也有弊。

为了查询此数据，您必须执行多个连接，或者您可以*旋转*数据以将其放入列中。

这是[关于 DBA.SE 的一个问题，](https://dba.stackexchange.com/questions/20759/is-there-a-name-for-this-database-structure)它概述了这种类型的结构 (EAV)。

您可以使用带有`CASE`语句的聚合函数查询数据：

```
select id,
  name,
  max(case when attribute = 'DOB' then value end) DOB,
  max(case when attribute = 'Address 1' then value end) Address1,
  max(case when attribute = 'Health' then value end) Health
from yourtable
group by id, name; 
```

如果您想执行多个连接，则查询将类似于以下内容：

```
select t1.id,
  t1.name,
  t1.value DOB,
  t2.value Address1,
  t3.value Health
from yourtable t1
left join yourtable t2
  on t1.id = t2.id
  and t1.name = t2.name
  and t2.attribute='Address 1'
left join yourtable t3
  on t1.id = t3.id
  and t1.name = t3.name
  and t3.attribute='Health'
where t1.attribute = 'DOB'; 
```

请参阅带有数据检索[演示的 SQL Fiddle 。](http://sqlfiddle.com/#!2/a4c80/4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T23:16:42.790

您始终可以拥有一个包含对象之间通用列的表。喜欢`ID`和`Name`在你的例子中。还有一个名为的附加列，您将每个对象`Data`的其余部分存储 在其中。`custom fields`它可以存储在 中`json`，也可以`xml`作为`serialized php object`.

你可以看看 php[序列化](http://php.net/manual/en/function.serialize.php)和[反序列化](http://php.net/manual/en/function.unserialize.php)函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T23:18:29.837

有很多方法可以做自定义字段。各有利弊。

一般不推荐序列化。虽然它有时有其用途，但您会失去很多使关系数据相关的东西。您也不会有任何有效的方法来索引或搜索特定字段。

使所有数据字段关联可以创建非常复杂的查询/连接，以便在您需要时访问数据。

使用 MongoDB 可能是一种选择。您可以为每个数据集创建一个唯一的集合，并为每个数据集添加适当的索引。它的无模式你不必做任何表创建。只需插入数据。但是，您确实想花时间了解它的局限性。

根据您的数据集，另一种选择可能是提供用于自定义数据的字段，而公共字段将成为普通行的一部分。但是，您可以提供的自定义字段数量会受到限制。

# c++ - g ++自动向量化对于最基本的示例失败

> ID：14148792
> 
> 赞同：1
> 
> 时间：2013-01-03T23:10:29.197
> 
> 标签：c++, c++11, g++, compiler-optimization, vectorization

我目前正在尝试将自动矢量化与 g++ 一起使用。为此，我使用以下最小示例：

```
#include <array>
int main()
{
    std::array<double, 16> x;
    for (unsigned int i = 0; i < 16; i++) x[i] = i;
    return x[15];
} 
```

我编译：

```
g++-4.7 -Wall -Wextra -std=c++11 -O3 -ftree-vectorizer-verbose=9 tests.cpp -o tests 
```

结果是：

```
Analyzing loop at tests.cpp:5

5: ===== analyze_loop_nest =====
5: === vect_analyze_loop_form ===
5: === get_loop_niters ===
5: ==> get_loop_niters:16
5: === vect_analyze_data_refs ===

5: not vectorized: no vectype for stmt: MEM[(value_type &)&x]._M_instance[i_21] = D.21296_5;
 scalar_type: value_type
5: bad data references.
tests.cpp:2: note: vectorized 0 loops in function. 
```

问题是什么以及如何解决？

编辑：结果是相同的：

```
#include <array>
int main()
{
    std::array<int, 16> x;
    for (int i = 0; i < 16; i++) x[i] = i;
    return x[15];
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T23:28:17.260

检查你的编译标志`no vectype for stmt`意味着你的架构不支持这些指令。

设置`-march=native`或`-march=corei7`

# android - 我如何知道 Android 操作栏样式的完整自定义选项是什么？

> ID：14148794
> 
> 赞同：1
> 
> 时间：2013-01-03T23:10:42.897
> 
> 标签：android, styles, android-actionbar, contextual-action-bar

在我的styles.xml 中，我想知道操作栏的完整样式选项。

问题是 Eclipse 不会自动完成它们给我。

我在不同的地方发现了一些零碎的东西，但我想要完整的选项/属性列表。

示例 -`android:actionBarStyle`自动完成中甚至没有提供该属性，我在文档中找到了它：

```
<style name="Theme" parent="@android:style/Theme.Holo.Light">
  <item name="android:actionBarStyle">@style/ActionBar</item>
</style> 
```

我发现还有很多没有记录在案的内容，例如`android:actionOverflowButtonStyle`，它们与操作栏相关，但在操作栏的样式中找不到。

**可以自定义操作栏样式的完整属性列表是什么？**从背景到拆分到操作模式到操作溢出到选项卡到主页等......？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:22:24.930

[`R.attr`您可以在文档](http://developer.android.com/reference/android/R.attr.html)中找到所有属性（提示：它们都以 开头`action`）。其中一些可能是不相关的（如`actionViewClass`），但您可以使用的都应该包含在此处。

```
actionBarDivider
actionBarItemBackground
actionBarSize
actionBarSplitStyle
actionBarStyle
actionBarTabBarStyle
actionBarTabStyle
actionBarTabTextStyle
actionBarWidgetTheme
actionButtonStyle
actionDropDownStyle
actionLayout
actionMenuTextAppearance
actionMenuTextColor
actionModeBackground
actionModeCloseButtonStyle
actionModeCloseDrawable
actionModeCopyDrawable
actionModeCutDrawable
actionModePasteDrawable
actionModeSelectAllDrawable
actionModeSplitBackground
actionModeStyle
actionOverflowButtonStyle
actionProviderClass
actionViewClass 
```

还有[主题，来自`R.style`](http://developer.android.com/reference/android/R.style.html)（使用`Control`+`F`来查找“ActionBar”），或[来自`R.styleable`](http://developer.android.com/reference/android/R.styleable.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T14:28:18.700

这是一个不错的起点：[https ://github.com/android/platform_frameworks_base/blob/master/core/res/res/layout/screen_action_bar.xml](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/layout/screen_action_bar.xml)

它是整个屏幕内容，分为actionbar/actionmode、content和splitactionbar。

它定义了 3 种样式`?android:attr/actionBarStyle`：`?android:attr/actionModeStyle`和`?android:attr/actionBarSplitStyle`

如何从那里开始，比如知道 actionBarStyle 可以保持 indeterminateProgressStyle，或者如何设置标签的样式，我真的不知道 :(

# php - 如何在 PHP 中创建和连接动态变量？

> ID：14148797
> 
> 赞同：-1
> 
> 时间：2013-01-03T23:11:08.230
> 
> 标签：php, dynamic-variables

在这个 php 代码中，在`while`循环期间，我希望使用后面的 3 个变量，称为`$menu_1`、`$menu_2`和`$menu_3`。这在PHP中可能吗？

```
while($parent_row = mysql_fetch_array($parent_result)){
    $menu_ = "";
    $menu_ . $i = "\n\t$('#menu_" . $i . "').hover(function () {";
}
echo $menu_1;
echo $menu_2;
echo $menu_3; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T23:18:13.330

您可以为此使用大括号：

```
${'menu' . $i} 
```

但我强烈建议你只是在循环中回显你需要的东西。

另外，`mysql_*`不推荐使用功能-请使用 PDO 或`mysqli`方式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T23:20:21.507

每当有人说“动态变量”时，它就是一个很大的危险信号。你可以这样做，但 99% 的时候这是个坏主意。您可能正在寻找的是一个数组。如果你写：

```
$menus = array();
while($parent_row = mysql_fetch_array($parent_result)){
    $menus[$i] = "\n\t$('#menu_" . $i . "').hover(function () {";
}
echo $menus[1];
echo $menus[2];
echo $menus[3]; 
```

您将获得您所追求的东西，而无需深入研究动态变量名称会给您带来的维护难题和潜在灾难。`$menus`当您突然拥有 2、4 或 40 个不同的元素时，您还可以轻松地循环使用这会使事情变得更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T23:21:55.087

是的你可以。只需使用括号。看这个例子：

```
<?php

$one = 1;

$suffix_one = "_".$one;
$suffix_two = "_2";

$base_1 = "VALUE ONE";
$base_2 = "VALUE TWO";

echo ${"base".$suffix_one}." , ".${"base".$suffix_two};

?> 
```

结果：

```
VALUE ONE , VALUE TWO 
```

显然，就像其他用户所说的那样，您最好使用数组。但我还是回答了你的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T23:13:28.233

为什么不使用数组呢？

```
$menu[$i] = "\n\t$('#menu_" . $i . "').hover(function () {"; 
```

# asp.net - Asp.net 超链接 OnMouseOver

> ID：14148799
> 
> 赞同：0
> 
> 时间：2013-01-03T23:11:13.847
> 
> 标签：asp.net

当我将鼠标悬停在超链接上时，我将如何更改或屏蔽 URL。

我能够更改颜色，但不能更改 URL。

```
StatementsHyperlink.Attributes.Add("onmouseover", "this.style.color=\"red\""); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T23:16:21.213

[就我个人而言，我会使用CSS 悬停在超链接上来](http://www.w3schools.com/css/css_link.asp)处理更改样式，您可以将文本颜色和背景设置为相同的灰色阴影以掩盖 url。

你有你正在寻找的示例效果吗？

# cakephp - cakephp联系表中的交付电子邮件

> ID：14148802
> 
> 赞同：-2
> 
> 时间：2013-01-03T23:11:26.493
> 
> 标签：cakephp

每个可以帮助我的人，我是 CakePHP 的新手，我的联系表格有问题，我按照本教程[http://blog.jandorsman.com/2011/05/cakephp-contact-form-with-validation-rules/](http://blog.jandorsman.com/2011/05/cakephp-contact-form-with-validation-rules/)

但是我的收件箱是空的 :( 我收到了消息：您的消息已发送。谢谢，我们会尽快回复您。但是，没有效果 :(.. 有什么问题？

我的控制器：

```
<?php
class ContactsController extends AppController {
 var $components = array('Email');

 var $helpers = array('Html', 'Form');
    function send() {

        if(!empty($this->data)) {
            $this->Contact->set($this->data);

            if($this->Contact->validates()) {
                if(!empty($this->data['Contact']['company'])) {
                    $this->Email->from = $this->data['Contact']['company'] . ' - ' . $this->data['Contact']['name'] . ' <' . $this->data['Contact']['email'] . '>';
                } else {
                    $this->Email->from = $this->data['Contact']['name'] . ' <' . $this->data['Contact']['email'] . '>';
                }
                $this->Email->to = 'info@mycompany.com';
                $this->Email->subject = 'Website request';
                $this->Email->send($this->data['Contact']['message']);
                $this->Session->setFlash('Your message has been sent.');
                // Display the success.ctp page instead of the form again
                $this->render('success');
            } else {
                $this->render('index');
            }
        }
    }

    public function index() {
        // Placeholder for index. No actual action here, everything is submitted to the send function.
    }
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:43:11.870

也许来晚了，你开始了，但你需要添加组件电子邮件和会话

```
class ContactsController extends Controller {

var $components = array('Email', 'Session');

function send() {
    if(!empty($this->data)) {
        $this->Contact->set($this->data); 
```

......

......

......

检查设置并启用模板的使用：/app/Config/email.php

在“默认”设置中输入您的真实电子邮件地址以测试是否正常工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T01:39:17.373

你应该检查邮件是否真的发送了任何东西。

```
if ($this->Email->send($this->data['Contact']['message'])) {
    // sent
} else {
    // not sent
    debug($this->Email);
    exit;
} 
```

您只是检查记录是否已保存。您还可以将电子邮件组件置于调试模式以获取更多详细信息。

# express - 有没有办法在 express + consolidate 中自动加载小胡子部分

> ID：14148804
> 
> 赞同：1
> 
> 时间：2013-01-03T23:11:33.060
> 
> 标签：express, partials, mustache

我正在使用 express + consolidate + mustache 作为模板引擎，我想知道是否有一种方法可以教 express 自动加载具有我没有明确定义的匹配文件名的部分。

**例子：**

```
head.html:
---
<!DOCTYPE html>
<html><head><title></title></head><body>

index.html:
---
{{> head}}
{{content}}
{{> foot}}

foot.html:
---
</body></html>

app.js:
---
app.get('/', function(req, res) {
    res.render('index.html', {
        partials: {
            head: 'head', 
            foot: 'foot'
        }
    });
}); 
```

如您所见， the`head`和`foot`partial 的名称与它们相应的文件名完全相同（减号`.html`）。这样做很好，但我正在寻找一种简单的方法来让 express/mustache 在有匹配的文件名时自动加载部分；无需再次在每个函数中指定我的默认部分。`{{> example}}`-> 查找是否存在，如果未在 partials 对象中定义，则`views/example.html`加载它）。`example`

那可能吗？

或者至少有一种简单的方法来全局定义默认部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:07:47.287

这在合并时是不可能的。我们遇到了完全相同的问题（能够通过他们的名字来调用部分，而不必每次都告诉 hogan/consolidate 加载它们）并且找不到好的模块，所以我们制作了自己的模块，我们一直在生产中使用它几周：[h4e](https://github.com/tldrio/h4e) （“Hogan for Express”）。有了它，所有部分都会自动加载，如果你愿意，你也可以使用布局。

我认为它应该满足您的需求。路易斯

# php - Zend Server CE 安装

> ID：14148810
> 
> 赞同：0
> 
> 时间：2013-01-03T23:12:05.737
> 
> 标签：php, zend-framework, zend-server-ce, zend-rest

到目前为止，我一直无法找到一个可行的答案......而且，让我说，我是 Zend/MVC 的新手。

我在 CentOS 上安装了 Zend Server CE，运行 Apache。我可以使用 Zend GUI 界面（带有`"Monitor`, `Applications`,`Server Setup`等选项）。PHP 正在运行并且执行良好。

一切都很好，除非我尝试实例化任何 Zend 自定义类。例如，当我尝试创建一个`Zend_Rest_Controller`类时，我收到以下消息：

> 致命错误：在第 15 行的 /mnt/hgfs/API/index.php 中找不到类“Zend_Rest_Controller”

对于我尝试的任何课程，这都保持不变。我阅读了有关更改`php.ini`文件或在页面中包含 Zend 库的`index.php`内容，但到目前为止没有任何帮助。

我的问题是：**除了安装 Zend 之外，我还需要执行哪些步骤才能让我使用 Zend 类？**

抱歉，如果这是一个无知的问题，但我感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:20:41.127

[Zend](http://zend.com/)有两种不同的产品，我认为您对此感到困惑。有[Zend Server CE](http://www.zend.com/en/products/server-ce/)（您刚刚安装）。还有[Zend 框架](http://framework.zend.com/)。据我所知，Zend Server CE 正在分发 Zend Framework，但它可能分发版本 2。而且，看看你所指的类的名称，它是 Zend Framework 版本 1 中的一个类。从版本 2 开始，Zend 框架使用名称空间，因此该类`Zend_Rest_Controller`不再存在。如果要使用版本 1 Zend Framework，则必须单独安装。

# jquery - 主干形式的对象数组

> ID：14148812
> 
> 赞同：1
> 
> 时间：2013-01-03T23:12:09.047
> 
> 标签：jquery, jquery-ui, backbone.js, backbone-views, backbone-forms

我正在为我当前的项目使用主干表单，并且在为数组创建架构时遇到了困难，

```
 schema:{
        name:{},
        description:{},
        partition:{},
        'addresses':[{type:'Object',subSchema:{address:{}, description:{}}}]

    } 
```

这是我的架构

```
 var obj = {
                name:'suchita',
                description:'device3 desc',
                partition:'346',
                'addresses':
                    [{address:'abc', description:'xyz'}]

            };

           var user=new Model(obj); 
```

这就是我填写架构的地方。现在我的 api 要我发送一个“地址”对象数组，即

地址：0：{地址：'abc'，描述：'xyz'} 1：{地址：'uio'，描述：'uiyui'}

但不知何故，它不会以这种方式发生。你能帮我解决我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-01T01:36:02.063

我知道已经晚了，但我认为列表的语法类似于：

```
schema:{
    name:{},
    description:{},
    partition:{},
    addresses: {type:'List',itemType: 'Object', 
        subSchema:{
            address:{}, 
            description:{}
        }
    }
} 
```

当然，您必须包括主干表单的列表编辑器：

```
<script src="backbone-forms/distribution/editors/list.min.js"></script> 
```

你可以填写：

```
var obj = { addresses: [
    {
        address: 'my address', 
        description: 'home'
    }
]};

var user = new Model(obj); 
```

我没有检查这是否有效，但我的代码中有类似的情况，所以它应该可以工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T19:40:15.000

尝试设置架构字段的类型，例如：

```
schema:{
    name: {type:'Text'},
    description: {type:'TextArea'},
    partition: {type:'Text'},
    addresses:[{type:'Object', subSchema:{
                  address:{type:'Text'}, 
                  description:{type:'TextArea'}
              }}]
} 
```

# c++ - c++ 在 Windows 上使用带有 Mingw 编译器的 iconv

> ID：14148814
> 
> 赞同：1
> 
> 时间：2013-01-03T23:12:27.337
> 
> 标签：c++, windows, mingw, iconv

一天中的好时光！

我在 Ubuntu 上使用 g++ 4.7.2 成功编译了此代码，但在 Windows 上使用 Mingw 编译它时遇到问题。

简化代码：

```
 size_t string_length=some_size;
 char arr_symb[string_length+1];

 char *outputde=arr_symb;
 iconv_t type=iconv_open("UTF-8","WINDOWS-1251");

char output[some_size];

char *p1=arr_symb;
char *p2=output;

if (   iconv(type, &p1,&string_length, &p2, &output_length ) == -1 )// here 
        // is mistake, it doesn't like pointers p1 and p2 but I wonder why

  log_info("something went wrong"); 
```

在带有 G++ 的 Linux 上，它可以编译并正常工作。使用 Mingw 我得到错误：

![在此处输入图像描述](../Images/2e7c4c17455cd92a76ba80b301ae225e.png)

我想知道，如果它与 g++ 一起工作正常，为什么 mingw 把它当作错误的对待？

提前致谢！

**添加我的Mingw**
版本是 4.4.0
GCC 版本是 4.7.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T00:03:19.667

谢谢大家的关注，问题解决了，但是我觉得很奇怪（目前还不清楚）

虽然函数有这样的原型，

![在此处输入图像描述](../Images/0b9f1c11ccdf942d12a5dd033becf3c7.png)

使用 MinGW 应该这样称呼它：

![在此处输入图像描述](../Images/a3534aaa25c4faa9aa6c40874e9a6bad.png)

所以，问题是 MinGW 的输入字符串应该作为常量传递（它也没有这样的原型）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-18T13:09:01.057

请参阅这些声明：

```
 int  a[10];
  int* b = malloc(10 * sizeof(int)); 
```

外观和感觉都一样，但是：

指向整数数组 (*b) 的指针与整数数组 (a) 不同！所以指向数组的指针 (*) 也不同于指向指针 (**) 的指针！

指针的取消引用需要再上一层！

# ubuntu - 使用 2 级代理的 Nginx Web 服务器

> ID：14148821
> 
> 赞同：2
> 
> 时间：2013-01-03T23:13:22.537
> 
> 标签：ubuntu, proxy, nginx, reverse-proxy, haproxy

这个问题可能听起来很奇怪或措辞不当。我有一个 nginx Web 服务器`X`，它必须从其他服务器请求一些数据`Z`。可以有一个`P`我控制的代理，这样`X`可以`Z`通过`P`.

`X --> P --> Z`

**问题：**是否可以在and`Q`之间有另一个代理，给出：`P``Z`

`X --> P --> Q --> Z`

选择的代理`Q`取决于`id`Web 服务器`X`知道的参数（例如）？也许参数`id`可以在标头中从`X`to传递`P`，如果可能的话，`P`可以`id`用来查询 MySQL 数据库以检索正确的代理详细信息`Q`并将其用作此特定连接的代理？如果这是可能且理想的，应该如何设置？

同样在这种情况下，被`P`认为`Q`是正向代理还是反向代理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:02:35.560

是的，你可以这么做。许多网站一直都这样做。看看网络服务是如何工作的顺便说一句。

如果 P/Q 是反向代理通常比代理更好，因为反向代理不会修改请求并确保您可以在 X 和 Z 之间拥有任意数量的此类组件（包括没有）。所以当您在 X 上的应用程序时与 Z 一起工作，当它是反向代理时，它将自动与中间的 P 一起工作。这是开发应用程序时要考虑的一个非常重要的方面！

现在，根据用于 P 的产品，您将拥有或多或少的功能。例如，haproxy 将能够在标头、请求参数等中匹配您的 id……但它无法从数据库中查找它。我相当确定您会找到一些能够执行此类查找的产品（这样做是否有效是另一个问题）。

希望这会有所帮助！

# node.js - 在 mocha 中运行 node-phantom

> ID：14148824
> 
> 赞同：0
> 
> 时间：2013-01-03T23:13:34.300
> 
> 标签：node.js, coffeescript, tdd, phantomjs, mocha.js

我在这里有一个简单的测试，我希望能工作。这个想法是让幻影在 mocha 的 tdd 中工作。（顺便说一句，我尝试了 node-phantom 和 phantomjs-node 都没有成功。）

```
nodephantom = require 'node-phantom'
assert    = require("chai").assert

host = 'http://google.com'

phantom = null
page = null

suite "Mocha Node-Phantom Loading Google:", ->

  suiteSetup (done) ->
    nodephantom.create (err,p) ->
      phantom = p
      done()

  test "Google page should load", (done) ->
    phantom.createPage (p) ->
      page = p
      page.open host, ->
        assert.match page.content(), /google/, "Page is loaded"
        done()

  suiteTeardown ->
    phantom.exit() 
```

我执行代码如下：

```
mocha -u tdd -R tap -b sometest.coffee 
```

我收到以下错误：

```
1..1
not ok 1 Mocha Node-Phantom Loading Google: "before all" hook
  Error: global leak detected: location
      at Runner.checkGlobals (/home/ericstob/b/nodejs/lib/node_modules/mocha/lib/runner.js:104:21)
      at Runner.<anonymous> (/home/ericstob/b/nodejs/lib/node_modules/mocha/lib/runner.js:44:44)
      at Runner.EventEmitter.emit (events.js:88:17)
      at Runner.hook (/home/ericstob/b/nodejs/lib/node_modules/mocha/lib/runner.js:170:12)
      at done (/home/ericstob/b/nodejs/lib/node_modules/mocha/lib/runnable.js:134:5)
      at Runnable.run.duration (/home/ericstob/b/nodejs/lib/node_modules/mocha/lib/runnable.js:146:9)
      at phantom.createPage.page (/home/ericstob/b/seo/t/sometest.coffee:18:16)
      at SocketNamespace.module.exports.create (/home/ericstob/b/nodejs/lib/node_modules/node-phantom/node-phantom.js:156:4)
      at SocketNamespace.EventEmitter.emit [as $emit] (events.js:115:20)
      at connect (/home/ericstob/b/nodejs/lib/node_modules/node-phantom/node_modules/socket.io/lib/namespace.js:292:10)
      at /home/ericstob/b/nodejs/lib/node_modules/node-phantom/node_modules/socket.io/lib/namespace.js:308:13
      at SocketNamespace.authorize (/home/ericstob/b/nodejs/lib/node_modules/node-phantom/node_modules/socket.io/lib/namespace.js:252:5)
      at SocketNamespace.handlePacket (/home/ericstob/b/nodejs/lib/node_modules/node-phantom/node_modules/socket.io/lib/namespace.js:302:14)
      at Manager.handleClient (/home/ericstob/b/nodejs/lib/node_modules/node-phantom/node_modules/socket.io/lib/manager.js:697:32)
      at Manager.handleUpgrade (/home/ericstob/b/nodejs/lib/node_modules/node-phantom/node_modules/socket.io/lib/manager.js:618:8)
      at Server.<anonymous> (/home/ericstob/b/nodejs/lib/node_modules/node-phantom/node_modules/socket.io/lib/manager.js:123:10)
      at Server.EventEmitter.emit (events.js:115:20)
      at Socket.socket.ondata (http.js:1710:14)
      at TCP.onread (net.js:403:27) 
```

当我从此测试中删除幻像时，它按预期工作。

```
assert    = require("chai").assert

is_decimal = (val) -> assert.match String(val), /^-?[0-9]*\.?[0-9]+$/, String(val) + ' is a decimal.'
is_hex = (val) -> assert.match String(val), /^(0[xX])?[a-fA-F0-9]+$/, String(val) + ' is a hexadecimal.'

suite "Mocha Minimal Test:", ->

  suiteSetup (done) ->
    done()

  test "Assertions pass", (done) ->
    is_decimal 1.5
    is_hex "0x2fc3"
    done()

  test "Assertions fail", (done) ->
    is_decimal 'dog'
    done()

  suiteTeardown ->
    {} 
```

结果：

```
$ mocha -u tdd -R tap -b mintest.coffee
1..2
ok 1 Mocha Minimal Test: Assertions pass
not ok 2 Mocha Minimal Test: Assertions fail
  'dog' is a decimal.: expected 'dog' to match /^-?[0-9]*\.?[0-9]+$/ 
```

所以我知道我的测试的基本结构是正确的，mocha 很高兴。但是 node-phantom 对此有些不满。

我只想让 phantomjs 在这个框架内工作。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:28:51.067

我问的问题[在这里](https://stackoverflow.com/questions/8360318/global-leak-errors-in-mocha)得到了回答：

答案是，如果一个库声明了全局变量，Mocha 就会崩溃。我需要包含一个像这样的 -globals 参数：

```
mocha -u tdd -R tap --globals location -b sometest.coffee 
```

为了允许 phantom 声明位置变量。

另外，我不得不稍微更改我的代码，因为 node-phantom 不支持 page.content()

```
test "Google page should load", (done) ->
  phantom.createPage (err,p) ->
    page = p
    page.open host, ->
      page.evaluate( 
        -> return document.documentElement.innerHTML
        (err, result) ->
          assert.match result, /google/, "Page is loaded"
          done()
      ) 
```

# javascript - Breeze 实体查询返回没有空属性的对象

> ID：14148828
> 
> 赞同：3
> 
> 时间：2013-01-03T23:14:22.123
> 
> 标签：javascript, breeze

我在 SPA 中使用[轻风.js](http://www.breezejs.com/)并且从服务器加载的实体有问题。即，从元数据（使用`metadataEntityType.createEntity()`）创建并添加到实体管理器的实体具有服务器端模型等所有属性，可以使用敲除进行绑定，这很酷。

问题是当我使用时`entityModel.EntityQuery.from("WorkOrders")`，我传递给它的`.then`promise 的 successCallback 获得了一个带有 results 属性的数据对象，其中包含一个 vanilla js 对象数组，其中所有 value == null 的属性都丢失了（这正是服务器发送的方式数据通过网络传输，但我认为它应该是这样的，因为微风在客户端上有所有元数据，不需要所有属性都知道它们存在）。

我有我的自定义构造函数，它可以像 createEntity() 中的那样制作完整的淘汰对象，但我认为必须有一种更好的方法让微风自动为我处理这个问题。我不确定是否应该将这些对象添加到实体管理器，因为我认为它们应该已经存在，并且我注册了我的自定义构造函数来存储 using `entityManager.metadataStore.registerEntityTypeCtor`，但这并没有改变成功回调得到的内容，它始终是纯 JSON，就像它是从服务器发送的。

**更新：**在服务器上调用以返回 json 有效负载的方法代码是

```
[HttpGet]
public IQueryable<WorkOrder> WorkOrders()
{
    return (IQueryable<WorkOrder>)_contextProvider.Context.WorkOrders;
} 
```

正如@Jay 在其回答和评论中指出的那样，这可能是行为的原因。这是返回的 JSON 有效负载：

```
[{"$id":"1","$type":"WorkOrders.Domain.Models.WorkOrder, WorkOrders.Domain","Approved":false,"DateModified":"2013-01-02T22:31:20.897","RequestForEstimate":false,"Id":5}] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T07:53:33.797

此问题是由模型位于与托管它的 DbContext/ObjectContext 不同的命名空间引起的。以前，这被记录为已知限制。

从 v 0.83.2 开始，Breeze 现在允许模型命名空间不同于 DbContext/ObjectContext 命名空间。

请确认这是否能解决问题。

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T00:07:11.223

我不太确定我明白你在问什么。您是否希望服务器上具有空值的属性以空值而不是未定义的方式返回到微风客户端，还是我错过了这个问题？

如果这是问题所在，我同意您想要的内容会很有用，我会将其添加为功能请求。

您可能想要查看的另一种可能性是使用“registerEntityTypeCtor”方法的第三个参数，该方法允许您传入初始化函数。对于正在构造的每个实体，该函数将被调用一次，“之后”它已经被物化了。这意味着您可以遍历属性或对象，并将任何具有“未定义”值的对象设置为“空”

这有意义吗？

# asp.net - 来自网页的 ASP.Net 调用 Site.Master 方法不起作用

> ID：14148832
> 
> 赞同：1
> 
> 时间：2013-01-03T23:15:10.277
> 
> 标签：asp.net, visual-studio-2012, master-pages

我在几个网页上看到了如何从使用该主文件的代码后面的网页调用与主文件中定义的公共方法接口。

（我在 Visual Studio 2012 上使用 ASP.Net 4.0。）

程序是（从文章复制）：

> 确保页面可以访问该函数（即声明为公共），并在 ContentPage 中使用 MasterType 声明：
> 
> ```
> <%@ Page .... %> 
> <%@ MasterType VirtualPath="~/masterpage.master" %> 
> ```
> 
> 在页面中，使用 Page.Master.MyFunction() 访问该函数。*注意：在能够访问该功能之前，您需要保存并构建。

问题是我没有看到方法。这是我所拥有的：

网页（存储在 /MyFolder，所以 /MyFolder）：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Logout.aspx.cs" Inherits="BvCorpMain.Candidates.Logout" %>
<%@ MasterType VirtualPath="/SiteMasters/Site.Master" %> 
```

Site.Master CS 文件（存储在 /SiteMasters 文件夹中）：

```
public void UpdateUserBlocksToCookie()
{
} 
```

当我进入注销页面背后的代码并在我输入“Page.Master”的方法中时，我看不到我的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:59:12.680

先前的答案确实教育了我，但是我相信解决方案是重新启动 VS2012，也许清理解决方案并重建并没有伤害。无论哪种方式。

Microsoft 将以下代码自动添加到 .aspx.designer.cs 文件中。

```
 /// <summary>
    /// Master property.
    /// </summary>
    /// <remarks>
    /// Auto-generated property.
    /// </remarks>
    public new MyNamespace.Site Master {
        get {
            return ((BvCorpMain.Site)(base.Master));
        } 
```

先前的答案与此定义相冲突。此外，MyMaster 的先前答案，尽管授予访问权限并没有（至少自动）提供所需的表单信息。我检查了。使用现有的主文件是最干净的。

master.cs 文件的定义是：

```
namespace MyNamespace
{
    public partial class Site : System.Web.UI.MasterPage 
```

如您所见，Microsoft 确实通过“Master.”提供了对 MyNamespace.Site 的访问权限，这正是我所需要的。

当我遇到问题时，我没想过要检查 .aspx.designer.cs 文件中的定义。可能缺少定义并在以后添加时，当我重建或进行保存时，我以前做过，或者其他。

知道添加确实可以简化事情，因为如果使用该构造不存在，我可以手动添加它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T00:10:19.657

您的页面继承自 System.Web.UI.Page，后者只知道其母版页的类型为 System.Web.UI.MasterPage。如果要修改 MasterPage 的子类，则需要将 Page.Master 属性强制转换为子类。

```
public class MyPage : System.Web.UI.Page
{
    public new MyMaster Master { get { return base.Master as MyMaster; } }
    public void Page_Load(object sender, EventArgs e)
    {
        Master.MyMasterPageFunction();
    }
}
public class MyMaster : System.Web.UI.MasterPage
{
    public void MyMasterPageFunction()
    {
    }
} 
```

# javascript - GWT 和 JQuery 之间的兼容性

> ID：14148834
> 
> 赞同：2
> 
> 时间：2013-01-03T23:15:30.603
> 
> 标签：javascript, jquery, gwt

我创建了一个使用`jquery.tools.min.js`库的简单 javascript。

我的 javascript 看起来像这样：

```
function testFunction() {
    $("img").click(function() {
        alert("Handler for .click() called.");
    });

    console.log("what's up?");
}

$(testFunction); 
```

因此，当我在一个简单的 HTML 页面上尝试它时，我会在单击图像时收到警报消息。

我在我的 GWT 应用程序中添加了完全相同的 javascript。

当应用程序加载时，我会看到`console.log`消息，但是当我单击应用程序上的任何图像时，什么都没有发生。

为什么呢 ？是因为`testFunction()`不适用于动态创建的图像吗？还是因为事件被 GWT 覆盖了？

谢谢你。

**编辑**

创建内容后，我尝试调用函数：

```
public native final void recallFunction() /*-{
    $wnd.console.log('again1');
    $wnd.testFunction();
    $wnd.console.log('again2');
}-*/; 
```

我可以看到我的日志消息，但没有触发点击事件。

**编辑2：**

当我运行时：

```
$("img").click(function() { 
    alert("Handler for .click()."); 
}); 
```

或者

```
testFunction(); 
```

直接在**Firebug 的**控制台中，该事件已正确附加到我的图像！

我也尝试调用`testFunction()`窗口的 onload 事件，但没有更好的运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T02:08:24.790

我假设您包含 jQuery 库本身，它是 1.7 或更高版本。

如果在定义 testFunction 时 DOM 中不存在图像，请使用“on()”。

```
function testFunction() {
$("img").on('click',function() {
    alert("Handler for .click() called.");
});

console.log("what's up?");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T10:19:42.120

在 JSNI 代码中使用 jQuery 时，必须使用 $wnd.jQuery 或 $wnd.$ 而不是 $。另请参阅Google 网上论坛上的[这个问题](https://groups.google.com/forum/?fromgroups=#!topic/google-web-toolkit/UC7Bc5EfVSE)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T03:35:14.577

您可以轻松地从 gwtquery [http://code.google.com/p/gwtquery/开始，而不是通过 Jquery 编写 JSNI](http://code.google.com/p/gwtquery/)

实际上，您将从 Jquery 方法和 GWT 性能优化中受益。

GwtQuery 优于 Jquery -

[http://manolocarrasco.blogspot.in/2011/01/gwtquery-css-selectors-performance.html](http://manolocarrasco.blogspot.in/2011/01/gwtquery-css-selectors-performance.html) [jQuery 与 GQuery 基准测试](https://stackoverflow.com/questions/3588280/jquery-vs-gquery-benchmark)

此外，如果它只是你想要实现的漂亮滚动，你可以看看 - [GWT CustomScrollPanel example](https://stackoverflow.com/questions/11020102/gwt-customscrollpanel-example) and [Custom Scrollbar in GWT](https://stackoverflow.com/questions/2686099/custom-scrollbar-in-gwt)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T12:17:06.673

您是否向相关图像添加任何其他事件侦听器（以 gwt 为单位）？

只能有一个单击处理程序，如果您在两个环境中都设置它们，您将受到伤害。

正如另一条评论中提到的，Gwt-Query 可以很好地委托给 gwt 内部事件（因为它知道事件处理程序的语法）。

您可能希望对图像使用萤火虫对象检查。
试试 console.log($("img")) 看看你得到了什么。

在图像上查找 __listener 变量；那是gwt监听器。查看 DOMImplStandard ~line 200 以了解在 gwt 中接收事件时会发生什么。

我不确定 jquery 如何附加事件，但我确实在 mozilla 规范中看到了这一点：“如果在同一个 EventTarget 上使用相同的参数注册了多个相同的 EventListener，则会丢弃重复的实例。它们不会导致 EventListener 成为叫了两次，“

[https://developer.mozilla.org/en/docs/DOM/element.addEventListener](https://developer.mozilla.org/en/docs/DOM/element.addEventListener)

# apache - codeigniter 网站上的链接在新服务器上损坏

> ID：14148835
> 
> 赞同：2
> 
> 时间：2013-01-03T23:15:35.580
> 
> 标签：apache, .htaccess, codeigniter

我最近将我的 codeigniter 网站切换到了一个新的虚拟主机，现在该网站上的所有链接都已损坏。每次我点击其中一个网站时，只会重定向到 index.php。一切都在旧服务器上运行，没有任何问题。我对服务器不太了解，问题是它是共享主机，我无权访问 /etc/apache2 目录中的 conf 文件。

我的 .htaccess 文件是

```
<IfModule mod_rewrite.c>

    RewriteEngine On
    RewriteBase /

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php/$1 [L]

</IfModule>

<IfModule !mod_rewrite.c>

    # Without mod_rewrite, route 404's to the front controller
    ErrorDocument 404 /index.php

</IfModule> 
```

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T23:28:00.653

它可能会将所有内容重定向到，`/index.php`因为您已将 404 错误文档路由到它：

```
ErrorDocument 404 /index.php 
```

这似乎表明您的新虚拟主机上*没有打开mod_rewrite。*您需要联系支持人员并查看有关启用重写模块的信息。

# responsive-design - 可以覆盖所有媒体查询吗？

> ID：14148836
> 
> 赞同：1
> 
> 时间：2013-01-03T23:15:48.717
> 
> 标签：responsive-design, media, reset

我已经建立了一个响应式网站，其中包含针对不同移动设备的媒体查询，但希望在较小的设备上提供“覆盖所有”链接。单击时，该链接将删除所有媒体查询样式并将页面重置为默认样式，从而将站点显示为 1024 像素宽。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T00:13:03.103

您可以做到这一点的唯一方法是使用 Javascript。我想出了两个解决方案：

**id/class on `<html>`element**：
将 id 或类应用于 html 元素：`<html class="media-queries">`。在您的媒体查询中，每个选择器都以：**CSS**
开头`.media-queries`

 **```
@media (max-width: 300px) {
    .media-queries #nav li {
        display: block;
    }
    .media-queries #main, .media-queries #aside {
        float: none;
    }
} 
```

然后，让 JS 删除`class="media-queries"`.
**HTML**

```
<a id="del-mq" href="#">Default style</a> 
```

**JavaScript**

```
var delMQ = document.getElementById('del-mq');
delMQ.onclick = function() {
    document.getElementsByTagName('html')[0].removeAttribute('class');
} 
```

**jQuery**

```
$('#del-mq').click(function() {
    $('.media-queries').removeClass();
}); 
```

**优点：**没有额外的 http 请求。
**缺点：**很多 css 选择器（ ），如果使用**Sass**`.media-queries`，这应该不是问题：

 **```
@media (max-width: 300px) {
    .media-queries {
        #nav...
        #main...
    }
} 
```

**外部 media-queries.css**
所有媒体查询都放在一个单独的 css 文件中。将其包含在`<link rel="stylesheet" href="media-queries.css">`.
然后你得到一个 ID`<link>`并删除该元素。
**HTML**

```
<head>
    <link rel="stylesheet" href="default.css">
    <link id="media-queries" rel="stylesheet" href="media-queries.css">
</head>
<body>
    ...
    <a id="del-mq" href="#">Default style</a>
    ...
</body> 
```

**Javascript**

```
var delMQ = document.getElementById('del-mq');
delMQ.onclick = function() {
    document.getElementsByTagName('head')[0].removeChild(document.getElementById('media-queries'));
} 
```

**jQuery**

```
$('#del-mq').click(function() {
    $('#media-queries').remove();
}); 
```

**优点：**不需要大量的 CSS 选择器。
**缺点：**额外的 http 请求。****

# javascript - JavaScript：document.createtextnode 中的条件格式？

> ID：14148849
> 
> 赞同：-1
> 
> 时间：2013-01-03T23:16:27.253
> 
> 标签：javascript

我有一段 javascript 可以生成类似的代码；

```
DOM_a.appendChild(document.createTextNode(t.headingText)); 
```

在此示例**中，t.headingText**可能（或可能不）包含我想以某种方式显示的文本，例如粗体。如果文本最终是“Holy Cow”，我希望它在我的页面上显示为“ **Holy** Cow”

我怎样才能用这段代码做到这一点？我知道我需要附加子“b”调用，但我不知道如何在字符串中有条件地执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T23:54:59.580

和`createTextNode`你一起倒霉。你可以`innerHTML`像这样使用：

```
DOM_a.innerHTML = "<b>Holy</b> Cow"; 
```

并在代码中使用 if/else 块处理条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T23:45:22.580

为什么不只是操纵文本。使用您的示例

```
if( /holy/ig.test( t.headingText ) ) { // if word exists
    t.heading = t.headingText.replace( /(holy)/ig, "<span class="b">$1</span>" );
} 
```

然后你可以使用普通的 css 来设置`b`类的样式。

# cocos2d-iphone - 是否可以将 UISwitch 附加到 cocos2d 中的某个 CCLayer？

> ID：14148850
> 
> 赞同：0
> 
> 时间：2013-01-03T23:16:28.080
> 
> 标签：cocos2d-iphone

我在我的 cocos2d 项目中使用 UISwitch，如下所示：

```
//header file

UISwitch    *musicCtrl;

//implementation file

        musicCtrl = [[UISwitch alloc] initWithFrame:CGRectMake(100, 50, 0, 0)];
        musicCtrl.on = YES;
        [musicCtrl addTarget:self action:@selector(musicOnOff) forControlEvents:UIControlEventValueChanged];
        [[[CCDirector sharedDirector]openGLView] addSubview:musicCtrl];
        musicCtrl.transform = CGAffineTransformMakeRotation(M_PI/2);
        [musicCtrl release]; 
```

我已将 UISwitch 附加到 openGLView，但我需要能够将其附加到 GLView 上的某个 CCLayer。那可能吗？我似乎找不到 cocos2d 的 UISwitch 替代品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:35:50.337

这是不可能的。

您只能将 UIKit 视图添加到 cocos2d 视图或主窗口。无论哪种方式，UIKit 视图都将绘制在所有 cocos2d 节点之上。您不能将 UIKit 视图添加到特定层。

具体来说，您不能以某些 cocos2d 节点绘制在 UIKit 视图前面而其他节点绘制在 UIKit 视图后面的方式将 UIKit 视图添加到 cocos2d 应用程序。那是不可能的。

# qt - 停靠小部件中的错误 QPushButton 无法访问

> ID：14148854
> 
> 赞同：1
> 
> 时间：2013-01-03T23:17:11.443
> 
> 标签：qt

新手，我在主窗口放了一个dock小部件，这个dock小部件面板中有一个按钮，现在我想连接，这个按钮在主窗口中定义了一个功能，它抛出了一个错误，我该怎么办做？谢谢

```
connect
(
    perfectPanel_->btn_AAA,
    SIGNAL(clicked()),
    this,
    SLOT(on_actionAAA_triggered()),
    Qt::UniqueConnection
); 
```

错误信息是

```
$PWD/ui_perfectPanel.h: In constructor ‘xixi::xixi()’:
$PWD/ui_perfectPanel.h:71:18: error: ‘QPushButton* Ui_perfectPanel::btn_AAA’ is inaccessible
$PWD/xixi/xixi.cpp:51:25: error: within this context 
```

请注意，我已经设法将它与主窗口（xixi.cpp）中的工具栏按钮连接起来，效果很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T01:02:08.397

发生这种情况是因为您的停靠类`perfectPanel`从生成的 ui 类私下继承`Ui::perfectPanel`：

```
class perfectPanel : public QWidget, private Ui::perfectPanel 
```

您可以公开该继承，但不应该。相反，您应该将信号作为`perfectPanel`类的一部分，并将内部信号从按钮路由到该外部信号：

```
class perfectPanel ... {
...
signals:
    void AAA_clicked();
};

perfectPanel::perfectPanel() {
     setupUi(this);
     connect(btn_AAA, SIGNAL(clicked()), this, SIGNAL(AAA_clicked()));
} 
```

（如果您会问，是的，您可以将 2 个信号连接在一起）。

然后，您只需在主窗口类中连接新信号：

```
connect(perfectPanel_, 
    SIGNAL(AAA_clicked()), 
    this,
    SLOT(on_actionAAA_triggered()),
    Qt::UniqueConnection
); 
```

# jquery - jQuery动画中的淡出/淡入元素

> ID：14148862
> 
> 赞同：0
> 
> 时间：2013-01-03T23:17:56.313
> 
> 标签：jquery, twitter-bootstrap

我有 3 个列表项，每 X 秒用 caroul 更改一次，每个项由一个 img 作为背景、一个 h1 和一个 p 标签组成。

使用下面的代码，我可以为文本设置动画，但它在 IE 中看起来不太好，它会在使用 opacity 淡出之前更改 h1/p 的文本：

```
$('#myCarousel').bind('slide', function() {
//Fading out 
    $(".carousel-caption h1").animate({'left': '-=500px', 'opacity': 0}, 1000); 
    $(".carousel-caption p").animate({'right': '-=500px', 'opacity': 0}, 1000);
// Fading In
    $(".carousel-caption h1").animate({'left': '+=500px', 'opacity': 1}, 1000);     
    $(".carousel-caption p").animate({'right': '+=500px', 'opacity': 1}, 1000); 
}); 
```

有更好的淡出然后淡入元素的方法吗？感谢您的任何意见

# rss - apple customerreviews with rss2email（国家或应用商店列表）

> ID：14148865
> 
> 赞同：0
> 
> 时间：2013-01-03T23:18:02.717
> 
> 标签：rss, app-store-connect

在 iTunesConnect 中，您可以为您的应用程序的客户评论打开 RSS 源：

```
https://itunes.apple.com/us/rss/customerreviews/id=123/sortBy=mostRecent/xml
https://itunes.apple.com/de/rss/customerreviews/id=123/sortBy=mostRecent/xml 
```

每个国家/地区的 URL 的顶级文件夹（us/de/..）都会发生变化，参数 id 是应用程序的商店 id。（这里是 123）

使用 rss2email，您可以检查提要并在有人发表评论时发送电子邮件。到现在为止还挺好。

我的问题是，在 iTunesConnect 中，下拉列表中只有六个国家/地区，实际上有人在其中发布了评论。但我不知道还有哪些其他国家/地区代码（us/de/..），所以我会错过其他国家/地区的评论。

我已经尝试从这个页面解析可能的代码并得到 73 个两个字符代码：

```
http://www.apple.com/choose-your-country/ 
```

但这导致大多数评论最多触发五封电子邮件，我看不出是哪个国家代码导致了它们，或者是否可能存在代码长度超过两个字符的商店。

有谁可能知道，如何/在哪里获取所有有效国家/应用商店的列表而不会导致重复？

编辑：我无法为“rss2email”和“customerreviews”添加标签..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T22:54:03.733

您可以使用以下 url 的 Country 下拉输入列表的国家列表：

[http://itunes.apple.com/rss/](http://itunes.apple.com/rss/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-20T09:01:43.483

可能您现在已经解决了问题，但是在以下链接中您可以查看应用商店的国家/地区代码：[AppStore Territories](https://developer.apple.com/library/ios/documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/C_AppStoreTerritories/AppStoreTerritories.html)

# asp.net - 参数未通过 Guid ID 传递到 MVC 控制器

> ID：14148867
> 
> 赞同：2
> 
> 时间：2013-01-03T23:18:07.270
> 
> 标签：asp.net, jquery, asp.net-web-api

我在 .net 4.0 Web 表单 Web 应用程序上使用 Web api 执行以下控制器操作。

```
public dynamic Post(Guid id, string adminNotes = "", string artNotes = "")
        {
            dynamic response = new ExpandoObject();
            response.Success = false;
            Udac udac = CustomerUdacs.Where(x => x.EditKey == id).FirstOrDefault();
            if (udac != null)
            {
                udac.AdminNotes = adminNotes.Trim();
                udac.ArtNotes = artNotes.Trim();
                response.Success = true;
            }
            return response;
        } 
```

我正在使用 jQuery ajax() 来发布数据。我使用 Guid 作为我的 id（存储在我的 javascript 中的 ajax_edit_key 中）。当我使用这个时：

```
$.ajax({
                    type: "POST",
                    url: "/api/notes/"+ajax_edit_key,
                    data: { adminNotes: $("#tbEditNotesAdmin").val(), artNotes: $("#tbEditNotesArt").val() }
                }).done(function (data) {
                    if (data.Success) {
                        $("#tbEditNotesAdmin").val(''); //td.id-notes-admin
                        $("#tbEditNotesArt").val(''); //td.id-notes-art
                        ajax_edit_key = '';
                        $dialog.dialog("close");
                    }
                }).fail(function () {
                    alert('fail');
                }); 
```

它调用该操作，但我的 adminNotes 和 artNotes 从浏览器作为空字符串传递。

如果我更改 url 以在查询字符串中包含参数，它可以正常工作。

```
url: "/api/notes/"+ajax_edit_key+"?"+ "adminNotes="+$('#tbEditNotesAdmin').val()+"&artNotes="+$('#tbEditNotesArt').val()
//data: { adminNotes: $("#tbEditNotesAdmin").val(), artNotes: $("#tbEditNotesArt").val() } 
```

为什么是这样？我怎样才能让它使用数据参数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:18:10.300

这里的问题是 WebAPI 引擎如何解析多个参数的方式。它只能解析一个参数，默认来自body请求，你有两个。

解决方案是：

*   创建您自己的模型绑定器（本文将帮助您：http: [//blogs.msdn.com/b/jmstall/archive/2012/04/18/mvc-style-parameter-binding-for-webapi.aspx](http://blogs.msdn.com/b/jmstall/archive/2012/04/18/mvc-style-parameter-binding-for-webapi.aspx)）
*   创建一个包含所有传递参数的单独模型类（这对我来说更容易）。

对于第二个选项，您只需创建模型：

```
public class NotesModel
{
    public string AdminNotes { get; set; }
    public string ArtNotes { get; set; }
} 
```

并将您的操作签名更改为：

```
public dynamic Post(Guid id, NotesModel model) 
```

而且你不需要改变你的JS。

# .net - 让程序在退出后记住调度程序

> ID：14148868
> 
> 赞同：0
> 
> 时间：2013-01-03T23:18:07.440
> 
> 标签：.net, windows, scheduled-tasks

我在运行粒子计数器的程序中继承了一个简单的调度程序。我修复了基本功能，它现在可以正常工作（安排开始/结束时间和计数器在这些时间关闭/打开）。

现在，我正在使用一个计时器事件，它每秒检查一次，以将计划任务与当前时间进行比较以启动/停止它们。但是，当前设置只记住最新的时间表。我想我可以通过构建时间表列表并循环并检查/比较它们的对象属性以确定启动/停止来解决此问题。

我在设计方面苦苦挣扎的是，如果一个人关闭程序，所有的时间表都会丢失。我应该使用数据库来存储这些信息，然后在应用程序启动时检索吗？我应该使用不同的方法并使用 Windows 调度程序或 Quartznet 等外部调度程序吗？

任何方向表示赞赏。

# sql - 在我的数据库 SQL 中查找所有索引

> ID：14148878
> 
> 赞同：-4
> 
> 时间：2013-01-03T23:18:35.173
> 
> 标签：sql, indexing

我需要一个查询来列出我数据库中的所有索引。这个简单的代码会起作用吗？

```
select * 
from sys.indexes 
```

我不确定这是否正确，或者我是否需要更大的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T23:21:59.133

这实际上会给你太多的对象，因为 sys.indexes 除了非聚集索引和聚集索引之外还包括 HEAPS。如果您不想要 HEAPS，请使用：

```
select *
from sys.indexes
where name is not null 
```

# mysql - 如何将外键引用到串行数据类型

> ID：14148880
> 
> 赞同：7
> 
> 时间：2013-01-03T23:18:39.487
> 
> 标签：mysql

我尝试在 MySQL 中创建以下表：

```
CREATE TABLE IF NOT EXISTS cliente(
    id_cliente SERIAL PRIMARY KEY,
    nombre_cliente VARCHAR(20) NOT NULL,
    direccion_cliente VARCHAR(40)
)ENGINE=InnoDB;

CREATE TABLE IF NOT EXISTS archivo(
    id_archivo SERIAL PRIMARY KEY,
    nombre_archivo VARCHAR(30),
    id_cliente INTEGER
)ENGINE=InnoDB;

CREATE TABLE IF NOT EXISTS fecha(
    id_fecha INTEGER PRIMARY KEY,
    fk_cliente INTEGER,
    id_archivo INTEGER,
    FOREIGN KEY(fk_cliente) REFERENCES cliente(id_cliente)
)ENGINE=InnoDB; 
```

但是，我得到了错误：

```
Error Code: 1005\. Can't create table 'adm_bordados.fecha' (errno: 150) 
```

`fetcha`未创建最后一个表。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-03T23:38:11.623

外键的两列必须是同一类型。由于`SERIAL`是`BIGINT UNSIGNED NOT NULL AUTO_INCREMENT UNIQUE`（根据[MySQL 类型概述](http://dev.mysql.com/doc/refman/5.5/en/numeric-type-overview.html)）的别名，因此您必须更改`fecha.fk_cliente`. 将最后一条语句更改为此应该可以为您完成：

```
CREATE TABLE IF NOT EXISTS fecha(
    id_fecha INTEGER PRIMARY KEY,
    fk_cliente BIGINT UNSIGNED,
    id_archivo INTEGER,
    FOREIGN KEY(fk_cliente) REFERENCES cliente(id_cliente)
)ENGINE=InnoDB; 
```

# java - 在字符串数组中搜索子字符串的最有效方法

> ID：14148883
> 
> 赞同：3
> 
> 时间：2013-01-03T23:18:55.217
> 
> 标签：java, arrays, substring

假设我有一个这样的字符串数组：

```
0 ["Some plain text"]
1 ["Foobar chicken"] 
```

我想在每个字符串（在数组的每个索引中）搜索特定的子字符串，比如`plain`，然后`true`在找到子字符串的第一个实例时返回。

最有效的方法是什么？

我知道我可以`break`在 for 循环中做一个简单的事情，但我听说有人说`break`在 for 循环中使用是不好的做法。我也听说使用 a `while`and`do-while`也不好。

## 我的实现

这是我使用break的简单实现：

```
for (String[] index : tmpList) {
    retVal = index[2].toLowerCase().contains(keyword);

    if (retVal) // Break when retVal is true
        break;
} 
```

在哪里：

*   `tmpList`是一个`ArrayList<String[]>`
*   `keyword`是我想要找到的

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T23:21:37.877

> 我知道我可以在 for 循环中做一个简单的 break，但我听说有人说在 for 循环中使用 break 是不好的做法。

你在哪里找到这个的？那是完全错误的。[在 for 循环中使用 break 是一种不好的做法吗？](https://stackoverflow.com/questions/3922599/it-it-a-bad-practice-to-use-break-in-a-for-loop)

只需使用 for 循环并遍历`String`s. 用于`String#contains`检查是否`String`有特定的子字符串。然后将 存储`String`在一个变量（或索引，如果你需要它）和`break;`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T06:45:12.640

我知道 apache-commons 有一个名为 StringUtils 的实用程序类，它可以为您提供一个优雅的解决方案。

```
public boolean foo(String[] array, String pattern){
    for(String content : array){
        if(StringUtils.contains(content, pattern){
            return true;
        }
    }
    return false;
} 
```

我不喜欢的一件事是它只会在第一个找到的实例时返回 true。我不完全确定您要尝试做什么，但如果您不关心数组中与模式不匹配的索引，我建议您使用名为 filter 的高阶函数。

Guava、lambdaJ 和 Apache-Commons 是支持函数式编程的库。

下面是一些应该在 Apache-Commons 中工作的 sudo 代码。

```
List<String> content = Arrays.asList(strArray);
Predicate matchesPattern = new Predicate("asdf"){{
    private String pattern;
    public Predicate(String pattern){
        this.pattern = pattern;
    }
    @Overload
    public boolean evaluate(Object input){

        if(input instanceOf String){
            StringUtils.contains((String)input, pattern
        }
        return false;
    }
}};

CollectionUtils.filter(content, matchesPattern); 
```

这样做是从列表中删除与模式不匹配的任何字符串。如您所见，声明 Predicate 对象有点冗长。如果您使用 Apache-Commons 或 Guava，它看起来会很相似，但这就是 lambdaJ 的用武之地。

谓词只是接受单个参数并返回布尔值的函数的术语，您之前可能已经在 Matcher 类中使用过它们。Hamcrest 拥有一些最好的 Matcher 库，因此 lambdaJ 只是围绕它构建了一个函数式编程库。它易于使用且可读性强。

# php - php和ajax传递表单值

> ID：14148885
> 
> 赞同：0
> 
> 时间：2013-01-03T23:19:01.983
> 
> 标签：php, ajax

嗨，我将如何从下面的代码中在 PHP 文件中回显表单输入“日期”。( `data: "name=Peter&location=Sheffield" + $('input[name="date"]').val(),`)

目前我有`echo "todays date ".$_POST['date']."<br>";`，但它似乎不起作用

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<script type="text/javascript"
    src=http://code.jquery.com/jquery-latest.js>    
</script>
<script type="text/javascript">
// This functions starts the ajax to show the output from post.php
function StartAjax(ResultsId){
    $.ajax({
      type: "POST",
      url: "postTest.php",
      cache: false,
      data: "name=Peter&location=Sheffield" + $('input[name="date"]').val(),
      success: function(html, status){
        $("#"+ResultsId).append(html);
        $('#status').append(status);
      } 
    });
}
</script>
</head>
<body>
<h1> Run Club</h1>
testing
<form>
date: <input type="text" name="date"><br>
</form>
<a href="#" onclick="StartAjax('ResultsId');">Click Here to see updates from postTest.php</a>
<div id="ResultsId"></div>
<div id="status"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:30:11.983

您必须在查询字符串中输入日期键

```
data: "name=Peter&location=Sheffield&date=" + $('input[name="date"]').val(), 
```

或者，您应该将对象传递给数据，以便 jQuery 为您格式化查询字符串。

```
data: {name: "Peter", location: "Sheffield", date: $('input[name="date"]').val()}, 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-03T23:32:46.900

```
function StartAjax(ResultsId){
var date = document.getElementsByName("date").val();
    $.ajax({
      type: "POST",
      url: "postTest.php",
      cache: false,
      data: "name=Peter&location=Sheffield&date=" + date,
      success: function(html, status){
        $("#"+ResultsId).append(html);
        $('#status').append(status);
      } 
    });
} 
```

# php - 似乎无法让 PHP 变量传递到下一页

> ID：14148892
> 
> 赞同：-3
> 
> 时间：2013-01-03T23:19:44.730
> 
> 标签：php, wordpress, session, session-variables

> **可能重复：**
> [PHP 已发送标头将](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)
> [PHP 变量从一个动态页面传递到另一个](https://stackoverflow.com/questions/14147335/passing-php-variable-from-one-dynamic-page-to-another)

将不胜感激任何帮助

试图将一些 PHP 变量从一个页面传递到另一个页面。

在第一页：

```
<?php 
session_start(); 
$_SESSION['file'] = $file;
$_SESSION['linecount'] = $linecount;
$_SESSION['priceperpost'] = $priceperpost;
$_SESSION['totalcost'] = $totalcost; 
?> 
```

然后在第二页：

```
<?php
session_start();
$file = $_SESSION['file'];
$linecount = $_SESSION['linecount'];
$priceperpost = $_SESSION['priceperpost'];
$totalcost = $_SESSION['totalcost']; 
?> 
```

这是在 WordPress 网站上，我不断收到一条错误消息：

> “session_start() [function.session-start]：无法发送会话 cookie - 标头已由（输出开始于...

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T23:21:31.807

一旦你的脚本输出了一些东西，标题就会被发送到浏览器。

因此，该错误意味着您之前正在打印（回显？）一些其他数据`session_start();`。

你之前打印过什么`session_start()`吗？您之前是否包含文件`session_start()`？因为那个文件可能正在打印一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T23:22:03.463

您在`session_start()`通话之前发送了一些数据（甚至空格也可能是罪魁祸首）。

确保绝对`<?php`是脚本中的**第一件事**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T23:24:15.213

`session_start()`在浏览器有一些输出后调用了该函数。此时，标头已经发送到浏览器，PHP 无法再修改。这是`session_start()`需要做的。因此，请确保在调用函数之前没有向浏览器发送文本（这意味着没有`echo`or `print`，也没有块外的文本） 。`<?php ?>``session_start()`

# c++ - 编译器是否具有某些优化启发式来支持分支预测？如果不是，为什么不呢？

> ID：14148895
> 
> 赞同：4
> 
> 时间：2013-01-03T23:20:06.510
> 
> 标签：c++, c, compiler-optimization, cpu-architecture

这个问题主要是在阅读了 Aater Suleman 的[这篇](http://www.futurechips.org/tips-for-power-coders/quick-post-trick-improve-branch-prediction.html)关于从软件方面改进分支预测的文章之后的后续问题。作者提供了一种“展开”条件语句的方法，以增加在 2 位饱和计数器方案的情况下预测分支的概率。这是一段摘录：

> 让我用一个例子来解释。让我们假设 X 是 0 到 99 之间的随机变量。我想运行以下代码：
> 
> > if (X > 5 && X < 95) //90% 的时间使用分支
> > do_something();
> 
> 但是，如果我将代码编写为：
> 
> > if(X > 5) //95% 的时间
> > 使用分支 if(X < 95) //95% 的时间使用分支
> > do_something();
> 
> 分支预测器可以更准确地预测这两个分支，这可能会带来更好的性能，因为分配给这两个分支的计数器更有可能在采取时保持饱和（因为两个未采取的可能性较小）。
> 
> 一般来说，每当您在 if 语句中对条件进行 ANDing/ORing 时，您都应该考虑该组合是否会更偏向或更少偏向，并选择更偏向的版本。

我的问题是：编译器是否一直遵循这种启发式方法？由于编译器存在于 ISA 的范围内，而架构和分支预测方案存在于处理器和更具体的硬件实现的范围内，编译器是否甚至有权做这样的事情？

我的直觉是，以这种方式扩展控制语句不会损害性能，但同时我还没有找到任何证据表明编译器进行了这种优化。如果是这样，他们为什么不呢？我在推理中遗漏了什么，有人可以提供一个例子，说明这种优化对某个架构或预测方案是有害的吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T18:52:44.473

苏尔曼似乎没有意识到

```
if (X > 5 && X < 95)
  do_something(); 
```

和

```
if(X > 5)
  if(X < 95)
    do_something(); 
```

在 C 和 C++ 中是语义等价的。最新的 C 标准状态 (6.5.13/4)：

> 与按位二进制 & 运算符不同，&& 运算符保证从左到右的求值；如果计算第二个操作数，则在第一个和第二个操作数的计算之间存在一个序列点。如果第一个操作数比较等于 0，则不计算第二个操作数。

编译器可能会或可能不会为两个代码示例生成相同的代码。重写程序以使用一种或另一种形式来提高性能并不是一个好主意。结果将在很大程度上取决于编译器版本、ISA 以及可能更多的变量。将这种优化留给编译器，但给编译器它需要的信息。

像 GCC 和 LLVM 这样的一些编译器允许你给出这样的明确提示：

```
if (__builtin_expect(X > 5, 1)) {
  // This block is likely to be taken.
}
if (__builtin_expect(X <= 5, 0)) {
  // This block is unlikely to be taken.
} 
```

另一种方法是使用配置文件引导优化。第一步需要对程序进行一次或多次测试，以生成包含有关分支指令的统计信息的数据库。在第二步中，编译器可以使用这个数据库来优化你的程序。有关详细信息，请参阅您的编译器手册。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-10T22:14:56.020

您可以通过将此代码替换为

```
if (((unsigned int) X) - 6 < 88)
    do_something (); 
```

__builtin_expect 显然不能改变条件是真还是假。它主要用于已采用的分支比未采用的分支慢的处理器。所以编译器会编译

```
if (__builtin_expect (condition, 0))
    statement;

morestuff (); 
```

对此：

```
if (condition) goto elsewhere;
backhere: morestuff ();

....

elsewhere: statement; goto backhere; 
```

这样通常不会采用任何分支，而不是通常的

```
if (! condition) goto nextstatement;
statement;
nextstatement: morestuff (); 
```

但在问题中，事情并非如此。if (cond1 && cond2) 不会生成单个分支（仅在具有非常聪明的编译器的特殊情况下），因此比较无效。如果是这样，两个预测正确率为 95% 的分支并不比一个预测为 90% 的分支好，因为错误预测的数量是相同的。

# yql - 对服务器的请求返回超时

> ID：14148899
> 
> 赞同：1
> 
> 时间：2013-01-03T23:20:33.013
> 
> 标签：yql

我正在尝试运行以下 YQL 查询：

`select * from xml where url='LinkToMyServer/PerformSomeOperationAndGetXml'`

但是，我得到以下结果：

```
<?xml version="1.0" encoding="UTF-8"?>
<query xmlns:yahoo="http://www.yahooapis.com/v1/base.rng"
    yahoo:count="0" yahoo:created="2013-01-03T23:17:06Z" yahoo:lang="en-US">
    <diagnostics>
        <publiclyCallable>true</publiclyCallable>
        <url execution-start-time="1" execution-stop-time="4555"
            execution-time="4554" proxy="DEFAULT"><![CDATA[LinkToMyServer/PerformSomeOperationAndGetXml]]></url>
        <user-time>4555</user-time>
        <service-time>4554</service-time>
        <build-version>32943</build-version>
    </diagnostics> 
    <results/>
</query> 
```

有没有办法以某种方式增加超时？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T06:17:24.003

我认为没有办法增加 YQL 请求超时。我发现与此相关的唯一文档 - [Paging and Table Limits](http://developer.yahoo.com/yql/guide/paging.html) - 提到了 YQL 语句的 30 秒总时间限制，但没有具体提到请求时间。

对于比较测试，我尝试`select * from xml where url='http://blackhole.webpagetest.org'`并得到了与您相似的结果 - YQL 超时不到 5 秒，结果集为空。

如果您无法将服务器响应时间降至 5 秒以下，您可能需要寻找不同的解决方案。

# javascript - 使用 prettyCheckable 插件和 knockoutjs 2.1 检查数据绑定不起作用

> ID：14148901
> 
> 赞同：2
> 
> 时间：2013-01-03T23:20:56.787
> 
> 标签：javascript, jquery, knockout.js

我正在使用 prettyCheckable jquery 插件使我的复选框和单选按钮看起来很漂亮，如果我使用 data-bind="checked: dateMode" 它不起作用，因为插件隐藏了实际的复选框并使其自己覆盖 html 到漂亮选中复选框/收音机，因此当我检查收音机或复选框并更新模型中的值时，knockoutjs lib 无法识别。如果我不使用 prettyCheckable 插件，我知道我的代码可以正常工作，所以不要告诉我我的模型或数据绑定代码搞砸了。我对此进行了测试。

[https://github.com/arthurgouveia/prettyCheckable](https://github.com/arthurgouveia/prettyCheckable)

这是我的部分视图代码。

```
<div id="DatesChooser" class="span5 pull-left">
    <h4><i class="icon-calendar"></i>Dates</h4>
    <input type="radio" name="Date" value="All" data-label="All Available" data-bind="checked: dateMode" /><br />
    <input type="radio" name="Date" value="Range" data-label="Range" data-bind="checked: dateMode" />
    <div data-bind="visible: dateMode() == 'Range'">
        <input type="text" id="FromYear" placeholder="1970" /> to
        <input type="text" id="ToYear" placeholder="2012" /><br />
        <div id="Date-Slider" class="ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all">
            <div id="Date-Slider-Bar" class="ui-slider-range ui-widget-header" style="left: 0%; width: 100%;"></div>
            <a class="ui-slider-handle ui-state-default ui-corner-all" href="#" style="left: 0%;"></a>
            <a class="ui-slider-handle ui-state-default ui-corner-all" href="#" style="left: 100%;"></a>
        </div>
    </div>
</div> 
```

这是我的淘汰赛模型：

```
function searchVm() {
    var self = this;
    self.dateMode = ko.observable("All");
    self.startSearch = function () { alert(self.dateMode()); };
}; 
```

我像这样初始化 prettyCheckable 的东西：

```
$('input:checkbox').prettyCheckable();
$('input:radio').prettyCheckable(); 
```

这是代码在 prettyCheckable 插件修改后呈现的内容，请注意输入样式如何为 'display:none' ：

```
<div id="DatesChooser" class="span5 pull-left">
    <div class="clearfix prettyradio labelright blue">
        <input type="radio" data-bind="checked: dateMode" data-label="All Available" value="All" name="Date" style="display: none;" checked="checked">
        <a class="checked" href="#"></a>
        <label for="undefined">All Available</label>
    </div>
    <br>
    <div class="clearfix prettyradio labelright blue">
        <input type="radio" data-bind="checked: dateMode" data-label="Range" value="Range" name="Date" style="display: none;">
        <a class="" href="#"></a>
        <label for="undefined">Range</label>
    </div>
    <div data-bind="visible: dateMode() == 'Range'" style="display: none;">
        <input id="FromYear" class="placeholder" type="text" placeholder="1970">
to
        <input id="ToYear" class="placeholder" type="text" placeholder="2012">
        <br>
        <div id="Date-Slider" class="ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all">
            <div id="Date-Slider-Bar" class="ui-slider-range ui-widget-header" style="left: 0%; width: 100%;"></div>
            <a class="ui-slider-handle ui-state-default ui-corner-all" style="left: 0%;" href="#"></a>
            <a class="ui-slider-handle ui-state-default ui-corner-all" style="left: 100%;" href="#"></a>
            <div class="ui-slider-range ui-widget-header" style="left: 0%; width: 100%;"></div>
        </div>
    </div>
 </div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T20:58:03.710

Pretty Checkable 会触发`change`复选框上的事件，但 Knockout 会查找`click`事件。这可以通过更改`prettyCheckable.js`第 46-54 行来解决。原来的：

```
 if (input.attr('checked') !== undefined) {
      input.removeAttr('checked').change();
    } else {
      input.attr('checked', 'checked').change();
    } 
```

改变：

```
 if (window.ko) {
      ko.utils.triggerEvent(input[0], 'click');
    } else {
      input.click();
    } 
```

如果您使用 jQuery 的`click`触发功能，Knockout 也将不起作用。`triggerEvent`您必须如上所述使用 Knockout 。

jsFiddle：http: [//jsfiddle.net/mbest/4cX48/](http://jsfiddle.net/mbest/4cX48/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T06:12:51.830

这里没有错。Pretty Checkable 库就是这样工作的。

它找到输入 dom 隐藏它们并放置动态 a 和标签标记而不是该输入。如果你想发现输入是否被检查，你需要检查动态添加标签的类（Class =“checked”）。不是原始输入标签。

您需要为 prettycheckable 编写绑定并观察 a 标签的类。然后根据该标签的类更改绑定的检查值。

[http://knockoutjs.com/documentation/custom-bindings.html](http://knockoutjs.com/documentation/custom-bindings.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T19:37:53.653

@Michael 对 prettyCheckbox 的修改*大部分都*有效，但是如果您的 viewModel 在加载时已经进行了选择，那么 prettyCheckbox 将无法识别它，因为它正在寻找“checked”**属性**，而敲除/普通香草 html 将通过 a 将复选框标记为选中**财产**。

在 prettyCheckbox 更改：

```
var isChecked = el.attr('checked') !== undefined ? 'checked' : ''; 
```

到

```
var isChecked = el.prop('checked') == true ? 'checked' : ''; 
```

此外，重要的是要知道，如果您在代码中修改您的淘汰视图模型属性，它不会反映在 prettyCheckbox 中，因为我不知道订阅（在 javascript 中，而不是淘汰赛）属性更改的方法。

# javascript - Javascript 控制台日志在 if 语句评估为 false 后自行清除

> ID：14148903
> 
> 赞同：3
> 
> 时间：2013-01-03T23:21:03.523
> 
> 标签：javascript, if-statement, logging, console

我从用于计算球体体积的现代 Javascript 练习中获得了以下简单代码，它包含一个检查以确保已为半径输入值的部分。

*   我输入了一个负数来测试这个功能，它可以工作，但我对控制台中显示的内容很感兴趣，所以我检查了。我最终在日志中看到一个错误闪烁，然后消失 - 阅读速度太快。

*   当 if 语句评估为 false 时会发生这种情况吗？为什么此错误显示然后几乎立即被清除？我知道我可以使用另一种方式来调试它（也就是使用 console.log 或通过其他方式记录问题），我只是对为什么这个错误消失感兴趣。

HTML：

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Volume of a Sphere Calculator</title>
    <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- sphere.html -->
    <form action="" method="post" id="theForm">
        <fieldset>
            <p>Use this form to calculate the volume of a sphere.</p>
            <div>
                <label for="radius">Radius</label>
                <input type="text" name="radius" id="radius" required></div>
            <div>
                <label for="volume">Volume</label>
                <input type="text" name="volume" id="volume"></div>
            <div>
                <input type="submit" value="Calculate" id="submit"></div>
        </fieldset>
    </form>
    <script src="js/sphere.js"></script>
</body>
</html> 
```

JS：

```
function calculate() {
    'use strict';

    var volume;
    var radius = document.getElementById('radius');

    if (radius && (radius.value > 0)){

        volume = (4/3) * Math.PI * Math.pow(radius.value, 3);

    }
    volume = volume.toFixed(4);

    document.getElementById('volume').value = volume;

    return false;
}

function init() {
    'use strict';
    var theForm = document.getElementById('theForm');
    theForm.onsubmit = calculate;
}

window.onload = init; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-31T15:09:07.417

因为这是我的 console.log 输出出现并迅速消失的问题的最佳 Google 匹配项，所以这发生在我身上，因为我要么有一组空的标签标签不合适，要么是一个没有任何操作的表单。删除这些标签会导致 JavaScript 和 console.log() 像预期的那样工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-03-19T09:39:02.810

添加另一个解决方案作为谷歌搜索“javascript 日志消失”将我带到这里。

页面刷新/导航是问题所在。

根据 mateuszb 的评论在控制台设置中选择“保留日志”解决了该问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T23:38:47.330

因为`undefined`没有一个方法`toFixed`，它会抛出一个错误，阻止`Calculate`永远到达`return false;`

由于从未到达该行，因此表单提交，这（一般来说）将表单发布到同一页面。

当页面重新加载时，控制台被重置（我相信这取决于特定的浏览器）。

要解决此问题，请初始化`volume`为`0`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-05T23:39:47.367

您可以使用 el.preventDefault(); 在你的回调函数中

# java - 如何从 JVM 获取有关加载哪些类以及所有加载类的规范的信息？

> ID：14148911
> 
> 赞同：0
> 
> 时间：2013-01-03T23:21:41.113
> 
> 标签：java

我想获取所有加载的类的信息，**以及类的规范**，例如哪些方法及其签名，方法可以抛出哪些异常。等等。我知道以前的帖子说如何加载所有类，但没有其他详细信息，所以有什么可用的东西可以得到我想要的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T00:39:17.837

正如其他人在其他地方提到的那样，您可以通过将代理附加到 JVM 来做到这一点，因为这是 JVM 报告加载哪些类的唯一地方。

这个类展示了这是如何完成的：

```
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.lang.instrument.Instrumentation;
import java.lang.reflect.Method;
import java.util.HashSet;
import java.util.Set;

public class ClassReporter implements Runnable {
    /** Output file */
    File output;

    /** The JVM instrumentation */
    Instrumentation instrument;

    /** Already reported classes */
    Set<Class<?>> known = new HashSet<Class<?>>();

    /** Is reporter still running? */
    volatile boolean running = true;

    @Override
    public void run() {
        System.out.println("Class Reporter agent running");
        while( running ) {
            if (!report()) return;
            try {
                Thread.sleep(5000);
            } catch (InterruptedException ie) {
                ie.printStackTrace();
                return;
            }
        }
    }

    /**
     * Update the report of loaded classes
     * 
     * @return true if report was written OK
     */
    public synchronized boolean report() {
        Set<Class<?>> report = new HashSet<Class<?>>();
        Class<?>[] classes = instrument.getAllLoadedClasses();
        for(Class<?> c:classes) {
            if (known.add(c)) report.add(c);
        }
        if (report.isEmpty()) return true;

        boolean ret = true;
        FileWriter fw = null;
        try {
            fw = new FileWriter(output, true);
            for(Class<?> c:classes) {
                fw.write(c.getName());
                fw.write('\n');

                for(Method m:c.getDeclaredMethods()) {
                    fw.write(m.toGenericString());
                    fw.write('\n');
                }
                fw.write('\n');
                fw.write('\n');
                fw.flush();
            }
        } catch (IOException ioe) {
            ioe.printStackTrace();
            ret = false;
        } finally {
            if (fw != null) {
                try {
                    fw.close();
                } catch (IOException ioe) {
                    ioe.printStackTrace();
                    ret = false;
                }
            }
        }
        return ret;
    }

    /**
     * Initialize the reporter
     * 
     * @param agentArgs
     *            the output file name
     * @param inst
     *            the instrumentation
     */
    public static void premain(String agentArgs, Instrumentation inst) {
        final ClassReporter cr = new ClassReporter();
        cr.instrument = inst;
        File out = new File(agentArgs);
        out.delete();
        try {
            out.createNewFile();
        } catch (IOException ioe) {
            System.out.println("Class Reporter could not create file "
                    + out.getAbsolutePath());
            return;
        }
        cr.output = out;

        Thread thread = new Thread(cr);
        thread.setDaemon(true);
        thread.start();

        Thread shutdown = new Thread() {
            public void run() {
                System.out.println("Class Reporter writing final report");
                cr.running = false;
                cr.report();
                System.out.println("Class Reporter done");
            }
        };

        Runtime.getRuntime().addShutdownHook(shutdown);
    }
} 
```

要将类转换为代理，您需要将其专门打包到带有适当清单的 JAR 文件中。清单是：

```
Premain-Class: ClassReporter 
```

然后，您可以使用以下命令创建代理 jar：

```
jar cvfm cr.jar Manifest.mf ClassReporter*.class 
```

然后要实际使用它，您可以在命令行上运行指定代理的应用程序，如下所示：

```
java -javaagent:cr.jar=cr.txt ActualProgramMainClass 
```

“cr.txt”是生成的输出文件。您将在 System.out 上看到输出，说明记者正在运行。输出文件显示您在问题中提到的所有信息。

# sql - 多边形骨架的 MapInfo SQL

> ID：14148915
> 
> 赞同：0
> 
> 时间：2013-01-03T23:21:55.400
> 
> 标签：sql, polygons, mapinfo

我想知道是否有人找到了一种在 MapInfo（我使用 11.5）中进行 SQL 查询的方法，该方法可以计算具有多个交叉点的多边形的骨架并为其生成折线，或任何要遵循的步骤组合得到一个结果中心线。我与地下公用事业合作，我接收作为预缓冲多边形的数据，该多边形基于缓冲 300 到 500 英尺的中心线。我希望基本上将一条线缓冲成一个多边形。我已经查看了[http://www.cgal.org/Manual/3.2/doc_html/cgal_manual/Straight_skeleton_2/Chapter_main.html](http://www.cgal.org/Manual/3.2/doc_html/cgal_manual/Straight_skeleton_2/Chapter_main.html)但我不知道如何将其转换为 Mapinfo 可以执行任何操作的 SQL 语句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T08:40:39.347

如果您想在 MapInfo SQL 中使用它，您需要创建一个 MapBasic 应用程序，编写一个执行您想要的功能的函数，然后在同一个应用程序的 SQL 查询中使用它。MapInfo 不允许在其对话框中使用自定义函数。

但在这种情况下，您需要在自己的 MapBasic 函数中重写 CGAL 算法。或者从 CGAL 源代码编译一个带有必要函数的 DLL，然后在 MapBasic 应用程序中声明和使用该 DLL 函数。

# android - datepicker 插件 phonegap 取消按钮

> ID：14148917
> 
> 赞同：3
> 
> 时间：2013-01-03T23:21:59.610
> 
> 标签：android, jquery, datepicker, phonegap-plugins

我使用下一个 datePicker 插件：

[https://github.com/phonegap/phonegap-plugins/tree/master/Android/DatePicker](https://github.com/phonegap/phonegap-plugins/tree/master/Android/DatePicker)

我如何识别用户何时按下“取消”按钮？：

控制器图片：http: [//goo.gl/YUzus](http://goo.gl/YUzus)

我使用的代码是：

```
window.plugins.datePicker.show({                        
    date : new Date(date),
    mode : 'date',
    allowOldDates : true    
},function(selectedDate) { 
    console.log('SET button was pressed');      
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:44:38.690

我管理了取消事件，稍微修改了 .java 插件：在代码之后

```
public void run() {
final DateSetListener dateSetListener = new DateSetListener(datePickerPlugin, callBackId);
final DatePickerDialog dateDialog = new DatePickerDialog(currentCtx, dateSetListener, mYear,mMonth, mDay); 
```

我添加了事件来捕获取消：

```
dateDialog.setButton(DialogInterface.BUTTON_NEGATIVE, "Cancel", new DialogInterface.OnClickListener() 
{
    public void onClick(DialogInterface dialog, int which) 
{
    if (which == DialogInterface.BUTTON_NEGATIVE) {
    datePickerPlugin.success(new PluginResult(PluginResult.Status.NO_RESULT, ""), callBackId);}}}); 
```

当按下取消按钮时，这会将日期设置为“”。在 javascript 代码中，我设法将焦点事件更改为点击事件，如下所示（我在移动设备上使用具有 TAP 事件的插件：

```
 $('.nativedatepicker').bind('tap',function(event) {
            var currentField = $(this);

            console.log(currentField.val());
            var myNewDate = Date.parse(currentField.val()) || new Date();

            if(typeof myNewDate === "number"){ myNewDate = new Date (myNewDate); }
            //myNewDate = currentField.val();

            console.log("inside native date picker " + event);

            // Same handling for iPhone and Android
            window.plugins.datePicker.show({
                date : myNewDate,
                mode : 'date', // date or time or blank for both
                allowOldDates : true
            }, function(returnDate) {
                console.log("ret date" + returnDate);
                if (returnDate)
                    {
                        var newDate = new Date(returnDate);
                        currentField.val(returnDate);

                        // This fixes the problem you mention at the bottom of this script with it not working a second/third time around, because it is in focus.
                        currentField.blur();
                    }
            });
        }); 
```

我希望能有所帮助。

# r - R get rows where all values are NaN

> ID：14148925
> 
> 赞同：3
> 
> 时间：2013-01-03T23:22:33.573
> 
> 标签：r, filter

I am trying to get all rows where specific values (here RATIO1 and RATIO 2) are NaN an keep them.

consider a data frame like

```
data.frame(ID=c(1,2,4,6,7),RATIO1=c(NaN,NaN,0.2,9.5,6), 
           RATIO2=c(NaN,NaN,0.5,NaN,6), RATIO3=c(0.3,0.2,4,NaN,5))

 ID RATIO1 RATIO2 RATIO3
1  1    NaN    NaN    0.3
2  2    NaN    NaN    0.2
3  4    0.2    0.5      4
4  6    9.5    NaN    NaN
5  7      6      6      5 
```

I want it to look like this

```
 ID RATIO1 RATIO2 RATIO3
1  1    NaN    NaN    0.3
2  2    NaN    NaN    0.2 
```

I could make it using is.na() or complete.cases () <- this will delete the rows.

Thx

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T23:29:13.033

Here's one possibility, using [`apply()`](http://stat.ethz.ch/R-manual/R-devel/library/base/html/apply.html) to examine the rows one at a time and determine whether they are fully composed of `NaN`s:

```
df[apply(df[2:3], 1, function(X) all(is.nan(X))),]
#   ID RATIO1 RATIO2 RATIO3
# 1  1    NaN    NaN    0.3
# 2  2    NaN    NaN    0.2 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-03T23:29:27.337

Assuming you really are dealing with `NaN` and not some arbitrary character value, try something like this:

```
dat <- data.frame(ID=c(1,2,4,6,7),RATIO1=c(NaN,NaN,0.2,9.5,6), RATIO2=c(NaN,NaN,0.5,NaN,6), RATIO3=c(0.3,0.2,4,NaN,5))
> dat[is.nan(dat$RATIO1) & is.nan(dat$RATIO2),]
  ID RATIO1 RATIO2 RATIO3
1  1    NaN    NaN    0.3
2  2    NaN    NaN    0.2 
```

`is.finite` might also prove useful if you're doing this sort of thing often.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T08:31:58.297

Enhanced solution based on this from Josh O'Briens.

```
df[rowSums(is.nan(as.matrix(df[2:3])))>1,]
#
# as.matrix because is.nan requires matrix  (but is.na doesn't)
# rowSums for speed gain
# 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T23:42:17.550

You could use this:

```
df <- data.frame(ID=c(1,2,4,6,7),RATIO1=c(NaN,NaN,0.2,9.5,6), 
                   RATIO2=c(NaN,NaN,0.5,NaN,6), RATIO3=c(0.3,0.2,4,NaN,5))

df[is.nan(df$RATIO1) & is.nan(df$RATIO2),]

  ID RATIO1 RATIO2 RATIO3
1  1    NaN    NaN    0.3
2  2    NaN    NaN    0.2 
```

# css - 链接多个样式表

> ID：14148927
> 
> 赞同：0
> 
> 时间：2013-01-03T23:22:38.830
> 
> 标签：css, xhtml

我正在使用专用服务器。在网络托管方面，我有这样排列的文件夹。

*   html
    *   论坛
        *   文件
    *   图片
        *   文件
    *   春分
        *   索引.php
        *   头文件.php
        *   页脚.php
    *   风格
        *   样式.css
    *   mc-多人游戏
        *   风格
            *   样式.css
        *   索引.php
        *   头文件.php
        *   页脚.php

我试图让 mc-multiplayer 的 index.php 链接到 mc-multiplayer 中的 css 文件，但不管它继续指向 html 文件夹中的 style.css 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T23:32:13.393

乍一看，我建议使用以下代码：

```
<link rel="stylesheet" href="style/style.css"> 
```

确保确认所有内容的大小写/拼写正确且目录正确。正如 Kevin Boucher 所建议的，了解您当前使用的链接会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T23:32:39.157

从`mc-multiplayer`子目录中的页面（只要[`<base>`元素](http://www.w3.org/TR/html401/struct/links.html#h-12.4)没有覆盖目录上下文）

这**可能有效**（没有前缀（例如`/`or `../`）之前`style`应该维护当前文件夹上下文，然后`style`是 subdir 然后是文件）：

```
<link href="style/style.css" rel="stylesheet" /> 
```

这**绝对应该有效**（`/`从站点的根目录开始，然后进入`mc-multiplayer`subdir 然后`style`subdir 到文件）：

```
<link href="/mc-multiplayer/style/style.css" rel="stylesheet" /> 
```

# c# - DataGridView、BindingSources、DataMembers - 我不明白

> ID：14148928
> 
> 赞同：3
> 
> 时间：2013-01-03T23:22:42.653
> 
> 标签：c#, .net-3.5

我有`DataGridView`。在数据库中 - 我有视图`vMyView`。

我的数据网格`DataSource`属性设置为`vMyViewBindingSource`.

`vMyViewNameBindingSource`已将`DataSource`属性设置为`mydatabaseDataSet`。

`vMyViewNameBindingSource`已将`DataMember`属性设置为`vMyView`。

我使用“创建者”设置`DataGridView`源，但我不知道`DataTable`对象在哪里。

我知道 BindingSouce 的用途（通常），我成功地使用了 DataGridViews 和其他带有 BindingSources 的控件，但我从未完全理解它。

**1\. 谁能解释一下DataGridView可以设置什么样的对象作为数据源？有时它是一个 BindingSource，有时是别的东西......**

**2.如何从已经填充的数据源的查询/视图中读取数据？**

我不想再次运行查询，只需要快速方法来读取显示的数据。

稍后我想更改此数据（不在数据库中，仅用于显示）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T04:26:31.477

由于您的问题似乎问了很多东西，我将向您推荐此代码项目详细的数据绑定教程。[http://www.codeproject.com/Articles/24656/A-Detailed-Data-Binding-Tutorial](http://www.codeproject.com/Articles/24656/A-Detailed-Data-Binding-Tutorial)

# ios - iPhone 5 的屏幕是否需要我的应用程序图像的单独版本？

> ID：14148932
> 
> 赞同：2
> 
> 时间：2013-01-03T23:23:02.420
> 
> 标签：ios, graphics, retina-display, iphone-5

我有一个平面设计师，可以为我创建图像和类似的东西。我需要给他单独的图像尺寸以专门为 iPhone 5 创建，还是像以前那样为 3.5 英寸屏幕构建？图片会自动调整大小吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T23:25:27.663

这是一个可以帮助您的链接。

[iPhone 5 图像的命名约定？](https://stackoverflow.com/questions/13287047/naming-convention-for-iphone-5-images/13287481#13287481)

这是另一个

[iphone 5的屏幕尺寸](https://stackoverflow.com/questions/13399075/screen-size-of-iphone-5/13399220#13399220)

查看这些链接基本上评估为是，您必须为 iPhone 5 创建单独的图像，您需要添加`-568h@2x.png`到 iPhone 5 的每个图像的末尾。您还需要创建和设置启动图像，`Default-568h@2x.png`如果它不会为 iPhone 5 挑选任何东西。

不，它不会自动调整图像大小，它会选择要使用的正确图像，它会选择最`-568h@2x.png`简单的图像。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T23:27:46.567

如果您的图像取决于屏幕比例，则必须提供特定文件。

为了根据设备有条件地使用图像，您可以使用[此处](https://stackoverflow.com/questions/13287047/naming-convention-for-iphone-5-images/13287481#13287481)显示的技术。

如果不是这样，只需提供相同的图像并以编程方式或在 Interface Builder 中调整布局。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T23:30:51.453

没有配备 Retina 显示屏的 iOS 设备可以运行 iOS 3。您将需要所有图片的高分辨率版本。

至于将照片转换为与 iPhone 5 一起使用，这取决于照片及其使用方式。如果图像用作背景的一部分，您有两种选择：您可以平铺它，这不需要新图片，或者您必须完全重新设计它。

至于其他图片，您是否可以使用相同的图片（相同大小或调整大小）或需要新图片取决于只有您可以做出的用户界面决定。如果一个图像必须保持一定的比例，那么也许你可以调整它的大小并相应地放置它，或者一个全新的图像可能会更好。

# c++ - 'LIBCMT' 与使用其他库 + 未解析的外部符号冲突

> ID：14148933
> 
> 赞同：24
> 
> 时间：2013-01-03T23:23:03.417
> 
> 标签：c++, visual-studio-2010, linker-errors, unresolved-external, linker-warning

我有一个使用 OpenGL 3.2(+libs) 和 FreeType2 的程序。然后是另一个带有 Boost 和 OpenSSL 的程序。OpenGL 方面是为了确保文本可以被渲染，而 boost/openssl 程序是为了做一个安全的登录/游戏服务器。

这两个程序都可以正常工作。

然而，将 Boost 和 OpenSSL 添加到游戏（GL + freetype）项目导致它无法链接。

我已经链接了以下库以及包含文件夹。

glimg.lib glutil.lib glfw.lib opengl32.lib freetype.lib glew32.lib user32.lib libeay32.lib ssleay32.lib

链接器错误是。

```
1>LINK : warning LNK4098: defaultlib 'LIBCMT' conflicts with use of other libs; use /NODEFAULTLIB:library
1>libeay32.lib(cryptlib.obj) : error LNK2001: unresolved external symbol __imp__DeregisterEventSource@4
1>libeay32.lib(cryptlib.obj) : error LNK2001: unresolved external symbol __imp__ReportEventA@36
1>libeay32.lib(cryptlib.obj) : error LNK2001: unresolved external symbol __imp__RegisterEventSourceA@8
1>libeay32.lib(rand_win.obj) : error LNK2001: unresolved external symbol __imp__DeleteDC@4
1>libeay32.lib(rand_win.obj) : error LNK2001: unresolved external symbol __imp__DeleteObject@4
1>libeay32.lib(rand_win.obj) : error LNK2001: unresolved external symbol __imp__GetBitmapBits@12
1>libeay32.lib(rand_win.obj) : error LNK2001: unresolved external symbol __imp__BitBlt@36
1>libeay32.lib(rand_win.obj) : error LNK2001: unresolved external symbol __imp__GetObjectA@12
1>libeay32.lib(rand_win.obj) : error LNK2001: unresolved external symbol __imp__SelectObject@8
1>libeay32.lib(rand_win.obj) : error LNK2001: unresolved external symbol __imp__CreateCompatibleBitmap@12
1>libeay32.lib(rand_win.obj) : error LNK2001: unresolved external symbol __imp__GetDeviceCaps@8
1>libeay32.lib(rand_win.obj) : error LNK2001: unresolved external symbol __imp__CreateCompatibleDC@4
1>libeay32.lib(rand_win.obj) : error LNK2001: unresolved external symbol __imp__CreateDCA@16
1>.\BasicTexture.exe : fatal error LNK1120: 13 unresolved externals 
```

运行时库设置为多线程 DLL (/MD)

我不知道该怎么做我真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-04T00:47:01.610

您正在尝试使用 编译`/MD`，这可能是正确的选择，但是某些代码（可能是库之一）是使用 构建的`/MT`，并且您不能在同一个程序中同时使用它。您需要确定使用哪个库构建`/MT`并使用`/MD`.

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-01-04T13:33:41.873

当编译器生成引用外部定义的对象或函数的代码并且链接器无法找到它们时，会产生未解决的外部错误消息。要生成调用函数调用的代码，编译器只需要一个声明：

```
extern "C" BOOL DeregisterEventSource ( HANDLE hEventLog ); 
```

这足以产生一条`call`指令（目标地址除外）。`extern`关键字通知编译器该实现是在别处定义的。因此它无法知道稍后必须填写的目标地址。编译器完成后，链接器的工作就是将各个部分连接在一起。它使用从导入库收集的信息来查找所需的偏移量。

在错误日志中很容易发现 Windows API 调用。它们有一个`__imp__`前缀，有时还有一个`A`or`W`后缀，`@<n>`其中*<n>*表示参数所需的字节数。在 Windows API 调用的情况下，您可以在 MSDN 中查找该函数（如[DeregisterEventSource](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363642.aspx)）。靠近底部的是*需求*，您可以在其中找到导入库名称。

冲突警告表明并非所有模块都使用相同的运行时库。尽管这只是一个警告，但它是一个严重的问题，应该得到解决。如果混合`/MD`和`/MT`编译器开关，以及混合发布和调试运行时库（如`/MD`和`/MDd`），则会收到此警告。要诊断此消息，您可以使用[`/VERBOSE:LIB`](http://msdn.microsoft.com/en-us/library/wdsk6as6.aspx)链接器开关来确定链接器正在搜索哪些库。可以在此[MSDN 链接](http://msdn.microsoft.com/en-us/library/6wtdswk0.aspx)中找到有关此警告的其他信息。

# php - 提交表单后刷新具有不同内容的页面

> ID：14148934
> 
> 赞同：0
> 
> 时间：2013-01-03T23:23:03.230
> 
> 标签：php

我想要一个 php 联系表，当提交时（如果没有错误），将刷新同一页面，并删除联系表，并将其替换为一些文本，例如“感谢您与我们联系”。有没有最好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T23:26:46.280

你总是可以做这样的事情：

```
<?php
    $posted = false;
    if( isset($_POST['submit']) ) {
        /* Process $_POST */

        /* Do your things */

        /* Set a variable hinting if a post has been done */ 
        $posted = true;
    }
?>
<!DOCTYPE html>
<html>
    <body>
    <?php if( $posted ): ?>
        <form method="post">
            <input name="foo" />
            <input name="bar" />
            <input name="car" />
            <input name="submit" type="submit" value="Submit" />
        </form>
    <?php else: ?>
        <h1>Thank you for contacting us!</h1>
    <?php endif; ?>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T23:28:37.137

这样做。

```
<?php

$showform=true;  //dispaying the form for the first time

if(isset($_POST['submit'])){

       //check for errors
       if($errors){
          $msg="errors";
          $showform=true;  // if found errors, setting error msg and displaying the form
       }else{
          //process the form
          $showform=false;  //if no errors, setting success msg and hiding the form
          $msg="SUccess";
       }
}

if(isset($msg)){
         //display the success/error msg
         echo $msg;
}
if($showform==true){

   //your form code
   <form method="post">
        <input name="foo" />
        <input name="bar" />
        <input name="car" />
        <input name="submit" type="submit" value="Submit" />
    </form>
}

?> 
```

# c# - 在非默认浏览器中启动 Web URL

> ID：14148935
> 
> 赞同：2
> 
> 时间：2013-01-03T23:23:07.490
> 
> 标签：c#, url, process, launch

我知道这个：

```
Process.Start("http://www.somewebsite.com/"); 
```

在用户默认浏览器中启动网页。但是，我正在创建一个有用的小应用程序，现在我需要能够在 Chrome、Opera、Firefox 和 Internet Explorer 中启动 URL。

我的默认浏览器是 Chrome，但如何在 Opera 或 Firefox 中启动 URL？这是个人应用，只在我的电脑上使用，不用考虑如何获取浏览器的安装目录。

我的 Firefox 浏览器在这里：`C:\Program Files\Mozilla Firefox\firefox.exe` 我需要通过将 URL 作为命令行参数传递给`firefox.exe`when I use来执行此操作`Process.Start()`吗？如果这是我需要做的，有人可以告诉我一个如何做的例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T23:26:00.460

```
Process.Start(@"C:\Program Files\Mozilla Firefox\firefox.exe", "http://www.somewebsite.com/"); 
```

**另请参阅： Process.Start 的**
[Firefox 命令行选项](https://developer.mozilla.org/en-US/docs/Mozilla/Command_Line_Options)
[MSDN 页面](http://msdn.microsoft.com/en-us/library/h6ak8zt5.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T23:27:42.097

我前段时间做过，只需使用：

```
string browser = "chrome.exe";
//string browser = "firefox.exe";
//...

Process myProcess = new Process();
myProcess.StartInfo.UseShellExecute = true;
myProcess.StartInfo.FileName = browser;
myProcess.StartInfo.Arguments = "\"" + url + "\"";
myProcess.Start(); 
```

# php - 是否使用 htmlspecialchars() 进行输入/输出 HTML 清理，用于 MySQL 数据库的不良设计？

> ID：14148937
> 
> 赞同：9
> 
> 时间：2013-01-03T23:23:17.413
> 
> 标签：php, html, database

> **可能重复：**
> [最好的 PHP 输入清理功能是什么？](https://stackoverflow.com/questions/3126072/what-are-the-best-php-input-sanitizing-functions)

是否使用 htmlspecialchars() 进行输入/输出 HTML 清理，用于 MySQL 数据库的不良设计？

相反，您是否应该不允许这些“危险”标志，因为它仍然会显示 b-tags、i-tags 和其他？以及如何做到这一点？

我问是因为它在 wiki [http://en.wikipedia.org/wiki/HTML_sanitization上说](http://en.wikipedia.org/wiki/HTML_sanitization)

“HTML 清理可用于通过清理用户提交的任何 HTML 代码来防止跨站点脚本和 SQL 注入攻击。”

因此，除了使用 PDO 准备好的语句之外，为了防止 SQL 注入，我想将此 htmlspecialchars 用于所有输入和输出。但也许我应该使用别的东西？

例如，这是执行插入语句的好方法吗？：

```
$type= htmlspecialchars($_POST['animaltype']);
$name= htmlspecialchars($_POST['animalname']);
$age= htmlspecialchars($_POST['animalage']);        
$descr= htmlspecialchars($_POST['animaldescription']);
$foto= htmlspecialchars($_POST['animalfotourl']);
$date=htmlspecialchars($_POST['animalhomelessdate']);

$sqlquery  = "INSERT INTO animals_tbl(animaltype, animalname, animalage, animaldescription, animalfotourl, animalhomelesssince) VALUES (':type',':name',':age',':descr', ':foto', ':date')";

$stmt = $conn->prepare($sqlquery);
$stmt->bindParam(':type',$type, PDO::PARAM_STR);
$stmt->bindParam(':name',$name, PDO::PARAM_STR);
$stmt->bindParam(':age',$age, PDO::PARAM_INT);
$stmt->bindParam(':descr',$descr, PDO::PARAM_STR);
$stmt->bindParam(':foto',$foto, PDO::PARAM_STR);
$stmt->bindParam(':date',$date, PDO::PARAM_STR);

$stmt->execute(); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-03T23:25:33.273

`htmlspecialchars()`足以为浏览器转义文本。这将保护其他站点用户免受 XSS 攻击。

*但是，*我只会在*显示*数据时运行此函数。将转义内容存储在数据库中对我来说似乎是糟糕的设计。数据库应该存储实际内容，而不是经过处理的内容。在每一层都根据需要逃避事情，不要很快。

* * *

为了说明为什么这是一个坏主意，请考虑一个致力于实现 JSON 驱动的 API 的网站。如果他们将 HTML 编码的数据存储在他们的数据库中，他们有两个选择：(a) 在他们的 JSON 响应中包含 HTML 编码的数据（这没有意义），或者 (b) 在 JSON 之前将 HTML 解码回其原始形式-对其进行编码。这两种选择都是次优的。

数据进入数据库，JSON 字符串进入 JSON 文档，HTML 编码的数据进入 HTML 文档。不要混合它们！

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-03T23:24:30.670

如果您使用 PDO（使用正确使用的准备好的语句），则不必清理您的输入。但是为了确保您不会受到 XSS 攻击，我会在将其放入数据库之前使用 htmlspecialchars。

# c# - 为什么 Collections.Generic.Queue 没有 Synchronized 方法但 Collections.Queue 有？

> ID：14148938
> 
> 赞同：6
> 
> 时间：2013-01-03T23:23:22.213
> 
> 标签：c#, collections, generic-collections, concurrent-collections

`System.Collections.Queue`类具有[`Queue.Synchronized`](http://msdn.microsoft.com/en-us/library/system.collections.queue.synchronized%28v=vs.110%29.aspx)返回线程安全队列实现的方法。

但是通用的，`System.Collections.Generic.Queue` 没有`Synchronized`方法。在这一点上，我有两个问题：

1.  为什么通用的没有这种方法？这是一个框架 API 设计决策吗？
2.  返回的队列 [`Queue.Synchronized`](http://msdn.microsoft.com/en-us/library/system.collections.queue.synchronized%28v=vs.110%29.aspx)与类有何不同[`ConcurrentQueue<T>`](http://msdn.microsoft.com/en-us/library/dd267265.aspx)？

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-03T23:27:22.390

该`Synchronized()`方法返回一个包装队列，该队列在每个方法周围都加了一个锁。
在编写多线程应用程序时，这种模式实际上没有用。

大多数现实世界的使用模式不会受益于同步集合；他们仍然需要锁定更高级别的操作。

因此，其中的`Synchronized()`方法`System.Collections`实际上是一个陷阱，导致人们编写非线程安全的代码。

* * *

该类`ConcurrentQueue<T>`是专门为并发应用程序设计的，并包含以原子方式修改队列的有用方法。

并发集合包只包含在多线程环境中有意义的方法（例如，`TryDequeue()`）；它们将帮助指导您编写实际上是线程安全的代码。

这被称为[成功的坑](http://www.codinghorror.com/blog/2007/08/falling-into-the-pit-of-success.html)。

有关更多信息，请参阅[我的博客](http://blog.slaks.net/2013-07-22/thread-safe-data-structures)

# android - 在值更改时更改 TextView 文本

> ID：14148941
> 
> 赞同：0
> 
> 时间：2013-01-03T23:23:46.303
> 
> 标签：android, multithreading, textview

单击按钮后，我正在尝试执行以下操作：

```
case R.id.bcheckConnection:
        if (IPok()) {
            PlcState.ErrPlc = false;
            Constant.adressIpPlc = adresIp.getText().toString();

            final ProgressDialog dialog =     ProgressDialog.show(Main.this, "", "Trying to connect...");
            new Thread(new Runnable() {
                public void run() {
                    timeout = network.testConnection(Constant.adressIpPlc, 102, 20000);
                    dialog.dismiss();
                }
            }).start();

            if (timeout > -1) {
                PlcState.ErrPlc = false;

                stanPolaczenia.setText("Connection established. Timeout = ");
                stanTimeout.setText(Long.toString(timeout));
                currentIp.setText(Constant.adressIpPlc);

            } else {
                PlcState.ErrPlc = true;
                stanPolaczenia.setText("Error");
                stanTimeout.setText("");
                currentIp.setText(Constant.adressIpPlc);
            }
        } else {
            Toast.makeText(Main.this, "Wrong IP", Toast.LENGTH_LONG).show();
        }
        break; 
```

那么是否可以在线程停止运行后更改文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:28:15.420

您可以使用[`Thread.join()`](http://developer.android.com/reference/java/lang/Thread.html#join())阻塞当前线程，直到给定线程完成：

```
Thread myThread = new Thread(new Runnable() {
    public void run() {
       // Do something
    }
});
myThread.start();

// Do some things

// and block current thread until myThread is finished
myThread.join();

// Continue execution after myThread got finished 
```

**编辑**：正如@Eric 在问题评论中已经提到的那样：对于您的（示例）情况，使用[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html). 它有两个事件（在 UI 线程上调用），因此您可以使用进度更新和任务完成时间来更新您的 UI。有关`AsyncTask`示例，请参见：[AsyncTask Android 示例](https://stackoverflow.com/questions/9671546/asynctask-android-example)

# javascript - 链接到功能的 PhoneGap 按钮没有响应

> ID：14148942
> 
> 赞同：0
> 
> 时间：2013-01-03T23:23:57.517
> 
> 标签：javascript, html, function, cordova, button

我正在开发一个计算器 PhoneGap 应用程序，但我无法让带有附加功能的按钮工作。我看不出是什么阻止了它。这些按钮也可以在 PC 浏览器中使用，但不能在手机上使用（已测试：Blackberry、Android）。如果有人知道如何解决这个问题，请告诉我谢谢。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="stylesheet" href="MinDark.css" />
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile.structure-1.2.0.min.css" /> 
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
<style>
table {table-layout:fixed}
td {width:25%}
#td1 {width:75%}
#td2 {width:25%}
</style>
<div data-role="page" data-theme="a">
<div data-role="header">
<a href="index.html" data-iconpos="notext" data-transition="slide" data-direction="reverse" data-role="button" data-icon="home" data-iconpos="right">Home</a>
<h5 style="text-transform:uppercase">Basic Calculator</h5>
</div>
<div data-role="content">
<form name="calc">
<table width="100%">
<tr>
    <td id="td1"><input type="text" name="cal" id="inbox"></td>
</tr>
<tr>
    <td id="td2"><input type="button" value="="  onclick="equal()"></td>
</tr>
</table>
<table width="100%">
<tr>
    <td><input type="button" value="7" onclick="calc.cal.value += '7'"></td>
    <td><input type="button" value="8" onclick="calc.cal.value += '8'"></td>
    <td><input type="button" value="9" onclick="calc.cal.value += '9'"></td>
    <td><input type="button" value="+" onclick="calc.cal.value += '+'"></td>
</tr>
<tr>
    <td><input type="button" value="4" onclick="calc.cal.value += '4'"></td>
    <td><input type="button" value="5" onclick="calc.cal.value += '5'"></td>
    <td><input type="button" value="6" onclick="calc.cal.value += '6'"></td>
    <td><input type="button" value="-" onclick="calc.cal.value += '-'"></td>
</tr>
<tr>
    <td><input type="button" value="1" onclick="calc.cal.value += '1'"></td>
    <td><input type="button" value="2" onclick="calc.cal.value += '2'"></td>
    <td><input type="button" value="3" onclick="calc.cal.value += '3'"></td>
    <td><input type="button" value="x" onclick="calc.cal.value += '*'"></td>
</tr>
<tr>
    <td><input type="button" value="0" onclick="calc.cal.value += '0'"></td>   
    <td><input type="button" value="." onclick="calc.cal.value += '.'"></td>
    <td><input type="button" value="C" onclick="del()"></td>
    <td><input type="button" value="÷" onclick="calc.cal.value += '/'"></td>
</tr>
</table>
</form>
</div>
</div>
<script language="javascript" type="text/javascript">
function equal(){
    calc.cal.value = eval(calc.cal.value);
}
function del(){
    calc.cal.value = calc.cal.value.substring(0,-1)
}
</script>
</body>
</html> 
```

更新：我想出了解决这个问题的方法，从主页（index.html）打开页面后需要重新加载。我只是不知道该怎么做。

已解决：将 rel="external" 添加到链接。

# c# - 更改数据库后，我可以在 wpf 应用程序中刷新/更新数据源（数据集）吗？

> ID：14148945
> 
> 赞同：0
> 
> 时间：2013-01-03T23:24:26.943
> 
> 标签：c#, wpf, dataset, connection-string, datasource

我已经将一个数据源连接到我的 wpf 应用程序并且已经研究了一段时间。我意识到我必须在我的数据库中添加列。有没有办法刷新/更新数据源，以便我对数据库所做的更改反映到我在 Visual Studio 中的数据源中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-21T06:35:57.247

我使用 dataset.AcceptChanges() 来解决它。

# c# - 根据三个不同的字段返回非不同的对象

> ID：14148949
> 
> 赞同：1
> 
> 时间：2013-01-03T23:25:09.323
> 
> 标签：c#, .net, linq

鉴于以下情况，我希望能够根据两个字段提取非不同的值：名称和国家/地区。在这个例子中，我想返回列表中的前两个。

```
List<City> cities = new List<City>
{
new City{ Name = "Sydney", Country = "Australia", Galaxy = "Mine"  },
new City{ Name = "Sydney", Country = "Australia", Galaxy = "Yours" },
new City{ Name = "New York", Country = "USA", Galaxy = "Ours"},
new City{ Name = "Paris", Country = "France", Galaxy = "Theirs" },

}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T23:33:09.290

此查询将按名称和国家/地区返回不明确的城市（即在您的情况下为前两个）：

```
IEnumerable<City> query = 
    cities.GroupBy(c => new { c.Name, c.Country })
          .Where(g => g.Count() > 1)
          .SelectMany(g => g); 
```

# objective-c - NSBundle 的 -load 方法如何向 Objective-C 运行时注册类和其他运行时资源？

> ID：14148950
> 
> 赞同：4
> 
> 时间：2013-01-03T23:25:12.153
> 
> 标签：objective-c, cocoa, foundation, nsbundle, objective-c-runtime

Foundation 的 NSBundle 是在 Objective-C 中加载动态代码的最佳方式。该`-load`方法将捆绑包的可执行代码动态加载到正在运行的程序中。

但是，NSBundle 的`-load`方法使用哪个 Objective-C 运行时公共函数来加载动态库并使用 Objective-C 运行时注册类、类别、协议、方法、选择器等？它在哪个标头中声明？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T00:19:56.947

NSBundle 不为此使用 ObjC 运行时。它使用 dlopen，动态链接器处理加载内容。

# ios - ios - 带有情节提要的模态控制器上的导航栏

> ID：14148951
> 
> 赞同：2
> 
> 时间：2013-01-03T23:25:14.723
> 
> 标签：ios, uinavigationcontroller, storyboard, modal-dialog, segue

我只是想在带有情节提要的模态控制器上添加一个导航栏（带有一些导航栏按钮）。

使用 XIB 以编程方式，它看起来像这样：

```
SDMapController *mapController = [[SDMapController alloc] initWithNibName:@"SDMapController" bundle:nil];
UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:mapController];

[self presentModalViewController:navigationController animated:YES]; 
```

但我不知道如何用 Storyboard 来处理它。`-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender`我想我必须在该方法上实现一些代码，但由于对象的`destinationController`属性`segue`是只读的，我真的不知道该怎么做。

任何想法 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T23:33:24.130

只有当您想将一些数据传递给您呈现的视图控制器时，您才必须实现为 segue 做准备。否则，您可以将其留空。View Controller 的呈现来自 Interface Builder。您添加一个带有根视图控制器的导航控制器，并对导航控制器进行 segue（ctrl + 拖动）。将 segue 类型设置为模态，并给它一个 ID。您可以通过调用从代码中触发此 segue `[self perforSegueWithIdentiefier:@"MySegueID"];`。如果您从按钮或表格视图单元格中拖动 segue，则在您点击它时会自动触发它，而无需调用此方法。正如我所说，在该`prepareForSegue`方法中，`segue.destinationViewController`将呈现导航控制器。`topViewController`如果需要，您可以访问它并将一些数据传递给它。

# java - 在 Android 中使用 IExtendedNetworkService 获取 USSD 响应

> ID：14148952
> 
> 赞同：7
> 
> 时间：2013-01-03T23:25:16.923
> 
> 标签：java, android, service, ussd

我正在尝试找到在 Android 中发出 USSD 请求的方法。我发现了这个 - [http://commandus.com/blog/?p=58](http://commandus.com/blog/?p=58)。我将所有需要的文件添加到我的项目中。

USSDDumbExtendedNetworkService.java：

```
package com.android.ussdcodes;

import android.app.Service;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.net.Uri;
import android.os.IBinder;
import android.os.PatternMatcher;
import android.os.RemoteException;
import android.util.Log;

import com.android.internal.telephony.IExtendedNetworkService;
import com.android.ussdcodes.R;

/**
 * Service implements IExtendedNetworkService interface. 
 * USSDDumbExtendedNetworkService
 * Service must have name "com.android.ussd.IExtendedNetworkService" of the intent declared
 * in the Android manifest file so com.android.phone.PhoneUtils class bind
 * to this service after system rebooted.
 * Please note service is loaded after system reboot! 
 * Your application must check is system rebooted. 
 * @see Util#syslogHasLine(String, String, String, boolean)   
 */
public class USSDDumbExtendedNetworkService extends Service {
    public static final String TAG = "CommandusUSSDExtNetSvc";
    public static final String LOG_STAMP = "*USSDTestExtendedNetworkService bind successfully*";
    public static final String URI_SCHEME = "ussdcodes";
    public static final String URI_AUTHORITY = "android.com";
    public static final String URI_PATH = "/";
    public static final String URI_PAR = "return";
    public static final String URI_PARON = "on";
    public static final String URI_PAROFF = "off";
    public static final String MAGIC_ON = ":ON;)";
    public static final String MAGIC_OFF = ":OFF;(";
    public static final String MAGIC_RETVAL = ":RETVAL;(";

    private static boolean mActive = false;
    private static CharSequence mRetVal = null;
    private Context mContext = null;
    private String msgUssdRunning = "USSD running..."; 

    final BroadcastReceiver mReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            if (Intent.ACTION_INSERT.equals(intent.getAction())) {
                mContext = context;
                if (mContext != null) {
                    msgUssdRunning = mContext.getString(R.string.USSD_run);
                    mActive = true;
                    Log.d(TAG, "activate");
                }
            } else if (Intent.ACTION_DELETE.equals(intent.getAction())) {
                mContext = null;
                mActive = false;
                Log.d(TAG, "deactivate");
            }
        }
    };

    private final IExtendedNetworkService.Stub mBinder = new IExtendedNetworkService.Stub() {
        @Override
        public void setMmiString(String number) throws RemoteException {
            Log.d(TAG, "setMmiString: " + number);
        }

        @Override
        public CharSequence getMmiRunningText() throws RemoteException {
            Log.d(TAG, "getMmiRunningText: " + msgUssdRunning);
            return msgUssdRunning;
        }

        @Override
        public CharSequence getUserMessage(CharSequence text)
                throws RemoteException {
            if (MAGIC_ON.contentEquals(text)) {
                mActive = true;
                Log.d(TAG, "control: ON");
                return text;
            } else {
                if (MAGIC_OFF.contentEquals(text)) {
                    mActive = false;
                    Log.d(TAG, "control: OFF");
                    return text;
                } else {
                    if (MAGIC_RETVAL.contentEquals(text)) {
                        mActive = false;
                        Log.d(TAG, "control: return");
                        return mRetVal;
                    }
                }
            }

            if (!mActive) {
                Log.d(TAG, "getUserMessage deactivated: " + text);
                return text;
            }
            String s = text.toString();
            // store s to the !
            Uri uri = new Uri.Builder()
                .scheme(URI_SCHEME)
                .authority(URI_AUTHORITY)
                .path(URI_PATH)
                .appendQueryParameter(URI_PAR, text.toString())
                .build();
            sendBroadcast(new Intent(Intent.ACTION_GET_CONTENT, uri));
            mActive = false;
            mRetVal = text;
            Log.d(TAG, "getUserMessage: " + text + "=" + s);
            return null;
        }

        @Override
        public void clearMmiString() throws RemoteException {
            Log.d(TAG, "clearMmiString");
        }
    };

    /**
     * Put stamp to the system log when PhoneUtils bind to the service
     * after Android has rebooted. Application must call {@link Util#syslogHasLine(String, String, String, boolean)} to 
     * check is phone rebooted or no. Without reboot phone application does not bind tom this service! 
     */
    @Override
    public IBinder onBind(Intent intent) {
        // Do not localize!
        Log.i(TAG, LOG_STAMP);
        IntentFilter filter = new IntentFilter();
        filter.addAction(Intent.ACTION_INSERT);
        filter.addAction(Intent.ACTION_DELETE);
        filter.addDataScheme(URI_SCHEME);
        filter.addDataAuthority(URI_AUTHORITY, null);
        filter.addDataPath(URI_PATH, PatternMatcher.PATTERN_LITERAL);
        registerReceiver(mReceiver, filter);

        return mBinder; 
    }

    public IBinder asBinder() {
        Log.d(TAG, "asBinder");
        return mBinder;
    }

} 
```

显现：

```
<receiver android:name="com.android.ussdcodes.BootReceiver">
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>
        </receiver>

        <service
            android:name=".USSDDumbExtendedNetworkService" >
            <intent-filter android:icon="@drawable/ic_launcher">
                <action android:name="com.android.ussd.IExtendedNetworkService" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </service> 
```

BootReceiver.java：

```
package com.android.ussdcodes;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

public class BootReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub
        Log.d("USSDService", context.getString(R.string.service_started));
        context.startService(new Intent(context,USSDDumbExtendedNetworkService.class));
    }

} 
```

所以现在服务在启动完成后启动。

我的问题是我必须如何发送 USSD 请求并获得服务响应？谢谢！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-14T20:43:08.380

好吧，我找到了答案。

我只是把[链接放在我的要点上](https://gist.github.com/victorkifer/8616266)。

停用消息

```
USSDDumbExtendedNetworkService.mActive = false; 
```

发送 USSD：

```
Intent launchCall = new Intent(Intent.ACTION_CALL,
                        Uri.parse("tel:" + Uri.encode(ussdcode)));
launchCall.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
launchCall.addFlags(Intent.FLAG_FROM_BACKGROUND);
startActivity(launchCall); 
```

再次激活消息

```
USSDDumbExtendedNetworkService.mActive = true;
USSDDumbExtendedNetworkService.mRetVal = null; 
```

# javascript - highslide.js 不显示弹出图像

> ID：14148958
> 
> 赞同：0
> 
> 时间：2013-01-03T23:26:21.500
> 
> 标签：javascript, highslide

我试图在我的响应式画廊中制作弹出图像，但在我看来 highslide.js 没有看到弹出图像。脚本来源[http://highslide.com/#installation](http://highslide.com/#installation) 我使用 bootstrap 和 Word Press。我看到图像正在加载但无法显示。我花了很多时间，但不明白我做错了什么。任何帮助将不胜感激！

我的网站[http://b.pusku.com/](http://b.pusku.com/)

```
<div class="container-fluid">
    <div class="row-fluid">
        <div class="span12 thumbs_color">
            <ul id="thumbs">
                <li>
                    <a href="http://b.pusku.com/wp-content/uploads/2012/11/7.jpg" class="highslide" onclick="return hs.expand(this)">
                        <img src="http://b.pusku.com/wp-content/uploads/2012/11/test_carusel1.jpg" alt="test_carusel" />
                    </a>
                </li>
                <li>
                    <a href="/">
                        <img src="http://b.pusku.com/wp-content/uploads/2012/11/test_carusel1.jpg" alt="test_carusel" />
                    </a>
                </li>
            </ul>
        </div>
    </div>
</div>

<script src="<?php bloginfo('template_url');?>/highslide/highslide.js"></script>
<script type="text/javascript">
    // override Highslide settings here
    // instead of editing the highslide.js file
    hs.graphicsDir = '/highslide/graphics/';
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:45:55.560

可能是 hs.graphicsDir 设置错误。从您在 highslide.js 文件的路径中插入模板 url 的方式来看，我的猜测是它应该如下所示：

```
hs.graphicsDir = '<?php bloginfo('template_url');?>/highslide/graphics/'; 
```

如果这不起作用，Highslide 网站上有一个[常见问题解答项目](http://www.highslide.com/forum/viewtopic.php?f=4&t=606)。

# sql-server - 执行 SQL 任务电子邮件

> ID：14148964
> 
> 赞同：1
> 
> 时间：2013-01-03T23:27:40.210
> 
> 标签：sql-server, ssis, sp-send-dbmail

我从“执行 SQL 任务”发送电子邮件时遇到问题

失败并出现以下错误：

> “多步 OLE DB 操作生成错误。检查每个 OLE DB 状态值（如果可用）。没有完成任何工作。”。可能的失败原因：查询有问题，“ResultSet”属性设置不正确，参数设置不正确，或连接未正确建立。

这是 SQL 语句-

```
USE msdb 
GO
EXEC
sp_send_dbmail 
 @profile_name='DBAAdminSF',        
 @recipients='Aslone@yahoo.com',
 @subject='Data uploaded',
 @body=? 
```

参数映射：
变量名 User::Email_DB
参数名 =@body

当我直接在查询中包含 @body 参数的文本而不是使用参数映射时，它工作正常。帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T16:10:35.460

您是否尝试过使用表达式而不是参数映射来覆盖脚本？

我用于最近项目的示例表达式覆盖：

```
"Exec msdb.dbo.sp_send_dbmail 
    @profile_name='Email Profile', 
    @recipients='email_addy', 
    @copy_recipients='email_addy', 
    @subject=N'Subject Text" + @[User::FileMonth] + "', 
    @body=N'Body Text" + @[User::FileMonth] + "' , 
    @file_attachments=N'" + @[User::FilePath] + "' " 
```

# windows - OpenGL 无法在 Windows 8 上渲染

> ID：14148967
> 
> 赞同：3
> 
> 时间：2013-01-03T23:27:50.350
> 
> 标签：windows, visual-studio, opengl, windows-8

我遇到了一个问题，即在 Windows 8 上通过 VS 2012 运行简单的 OpenGL 应用程序时没有呈现任何内容。

我有一个小调试渲染器，我用它来制作一些项目的原型，并使用 VS 2012 Express Edition 在 Windows 7 上启动并运行它。

我升级到 Windows 8，并用我的工作克隆了 git 存储库。安装最新的驱动程序并安装 VS 2012 后，我运行了我的应用程序，但没有显示任何内容，我得到的只是屏幕清晰的颜色。我之前遇到过异常，但那是因为我没有正确的驱动程序，所以在调用 glGetIntegerv(GL_MAJOR_VERSION,...) 时我会得到 -1，因为 OpenGL 设置不正确。它现在已正确初始化，并且在逐步执行时，看起来一切正常，唯一的问题是我什么也没看到。

为了确保它不仅仅是我的代码，我下载了一些 Swiftless OpenGL 示例并得到了完全相同的东西。我的应用程序使用的是 OpenGL 3.2，并且没有弃用的功能。我的硬件最高可以支持 3.3，如果有任何用处，我正在 Macbook air 上通过 Boot Camp 运行 Window 8。

在过去的几天里，我一直在用头撞墙试图解决这个问题，但我运气不佳，我想我会把它扔在那里看看是否有人有类似的问题，我会如果有人能提供任何信息，将不胜感激。如果使用 Windows 8 的人可以通过 VS 下载并构建一个简单的 OpenGL 应用程序，只是为了看看他们是否可以在屏幕上显示一些有趣的东西！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T00:14:21.253

您是否使用良好的旧且已弃用的固定功能管道，即立即模式绘制调用，如`glBegin()`,`glVertex*()`和`glEnd()`？如果是这样，请尝试使用顶点数组绘制你的东西。即使这对您的特定情况没有帮助，也应不惜一切代价避免立即模式绘制调用，以使代码向前兼容。OpenGL 3.x 核心配置文件不再包含这些旧的 API 函数。由于一些陈旧的即时模式绘制调用 (FTGL)，我的新 Win 7 笔记本电脑 (OpenGL 3.3) 上也出现了空白屏幕。

编辑：

对于独立的 GL 调试，我推荐这个：

[http://www.gremedy.com/](http://www.gremedy.com/)

该程序允许您暂停执行并调查缓冲区内容、着色器程序等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T00:06:54.003

> 安装最新驱动程序后

你从哪里弄来的驱动程序？只有您直接从 GPU 供应商网站下载的驱动程序才提供适当的 OpenGL 支持。Windows 自动安装的驱动程序只有很差的 OpenGL 支持。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-16T10:12:13.900

Windows 8 不提供 opengl 支持。它们仍然是在 Windows 上使用它的技术，最好在谷歌上搜索，因为我尝试过我的世界游戏[，或者你也可以在这里查看](http://hqtips.com/os/windows/how-to-fix-opengl-error-on-windows-8/)

# objective-c - 在 iOS 中使用混合模式堆叠 UIView

> ID：14148973
> 
> 赞同：17
> 
> 时间：2013-01-03T23:28:18.760
> 
> 标签：objective-c, ios, xcode, uiview, calayer

我有两个不同的`UIImageViews`. 我想`UIImageView`使用与底部的屏幕混合模式使顶部混合`UIImageView`。

`CALayer`我知道:的属性，`compositingFilter`并且我知道它在 iOS 中不起作用。我已经搜索了很多解决方案，并且发现了应该如何子类化`UIView`和覆盖`drawRect`.

我试图将上下文设置`drawRect`为屏幕混合模式，尽管它仍然正常绘制每一个图像。也许我做错了什么，或者方法应该不同。也许我需要 OpenGL 或 CALayer 来实现这一点。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-05T06:19:16.260

不幸的是，没有办法在 iOS 上的 UIView 之间进行非复合混合。UIKit 不提供该功能，并且您已经注意到，CALayer 也无法提供。

一般来说，在 UIView 中实现 -drawRect 对您没有帮助。您正在绘制一个空位图——它不包含其后面的视图位，因为这些位可能随时更改（任何视图或图层都可能是动画的）。CA 从根本上假设层的内容应该相互独立。

你*可以*试试，在你的`-drawRect:`

1.  创建图像上下文
2.  `-[CALayer renderInContext:]`使用for each捕获视图下的视图
3.  从图像上下文创建图像
4.  将该图像绘制到您的视图中
5.  设置混合模式并在其上绘制

但这将是缓慢而脆弱的，并且如果您为任何视图设置动画，则将无法正常工作。我不会推荐它。

如果你真的需要这样做，你将不得不切换你的整个场景以使用 OpenGL 进行渲染，[这样你就有了更多的自由](https://gamedev.stackexchange.com/questions/17043/blend-modes-in-cocos2d-with-glblendfunc)。

# arrays - 返回哪个数组类型的字段包含数组的文档的确切顺序

> ID：14148974
> 
> 赞同：1
> 
> 时间：2013-01-03T23:28:22.067
> 
> 标签：arrays, mongodb, pattern-matching

我在 MongoDB 中的文档结构如下：

```
{ _id : 1, tokens : [ "one","two","three","four","five","six","seven" ] }
{ _id : 2, tokens : [ "two","three","four","one","one","five","eight" ] }
{ _id : 3, tokens : [ "six","three","four","five","one","five","nine" ] } 
```

平均而言，文档包含长度为 4500 项的令牌数组。

我需要进行某种模式匹配，其中我有完全匹配的标记数组，即假设我必须以完全匹配的顺序找到以下内容......

```
["three","four","five"] 
```

...我希望我的查询向我提供以下文件...

```
{ _id : 1, tokens : [ "one","two","three","four","five","six","seven" ] }
{ _id : 3, tokens : [ "six","three","four","five","one","five","nine" ] } 
```

即两个文档都包含我在我的数组中搜索的项目的确切顺序。

我搜索的数组可能有不同的长度，范围从 1 到 15 个标记。

我正在寻找以下内容：

*   这对 MongoDB 查询可行吗？我已经阅读并重新阅读并重新阅读了相当不错的文档，但找不到解决方案，例如使用 $all。
*   有没有更好的方法来存储这样的令牌来完成我需要的事情？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T00:47:01.803

这会很慢，但你可以通过[`$where`](http://docs.mongodb.org/manual/reference/operators/#_S_where)操作员来完成；将其与操作员配对`$all`以帮助提高性能。

```
db.test.find({
    tokens: {$all: ["three","four","five"]},
    $where: function() {
        var ix = -1;
        // Find each occurrence of 'three' in this doc's tokens array and return
        // true if it's followed by 'four' and 'five'.
        do {
            ix = this.tokens.indexOf('three', ix + 1);
            if (ix !== -1 && ix+2 < this.tokens.length && 
                this.tokens[ix+1] === 'four' && this.tokens[ix+2] === 'five') {
                return true;
            }
        } while (ix !== -1);
        return false;
    }
}) 
```

# java - 优雅等同于 Java 中 C 的 vsscanf()

> ID：14148976
> 
> 赞同：1
> 
> 时间：2013-01-03T23:28:47.443
> 
> 标签：java, parsing, variadic-functions, scanf

我需要一个与`vsscanf()`Java 中的 C 等价的东西。更详细，我在这里有这个：

```
private void parseString(String parseMe, String format, Object[] args) {
    // something like: vsscanf(parseMe, format, args);
} 
```

请注意，我确实已经阅读[了 sscanf() 的等价物](https://stackoverflow.com/questions/8430022/what-is-the-java-equivalent-of-sscanf-for-parsing-values-from-a-string-using-a-k)，因此可以从那里轻松完成。但我问自己是否有比用 for 循环填充 args 更优雅的解决方案。

此外，如果解决方案也允许使用可变参数而不是数组，那就太好了。见下文。

```
parseString(str, format, x, y, z); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T00:55:01.033

您可以使用`java.text.MessageFormat`. 例如：

```
public static void main(String[] args) throws ParseException {
    String input="hello 1:2.3.4";
    MessageFormat form = new MessageFormat("{0} {1,number}:{2,number,integer}.{3,number}");
    Object[] data = form.parse(input);
    for(Object o : data) {
        System.out.println(o.getClass()+" : "+o.toString());
    }
} 
```

产生输出：

```
class java.lang.String : hello
class java.lang.Long : 1
class java.lang.Long : 2
class java.lang.Double : 3.4 
```

当然，格式不如 使用的那么紧凑`scanf`，但它是开箱即用的 Java。

# doxygen - 解析没有扩展名的文件

> ID：14148978
> 
> 赞同：1
> 
> 时间：2013-01-03T23:28:58.107
> 
> 标签：doxygen

我正在为一个项目设置 doxygen。模块文件有它们的语言标准扩展名 (.py)，但可执行脚本没有。如何让 doxygen 正确读取这些内容（在这种情况下为 Python）？我试过了

> EXTENSION_MAPPING = ''=Python

但这会查找名为“blah.”的文件。我在 Unix 系统上，所以这里甚至不存在文件扩展名的概念。这是一个现有项目，因此重命名所有现有脚本不是一种选择。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T18:33:25.873

我修改了 doxygen 以处理其中没有点的文件名，我会将补丁提交给维护者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T09:10:41.203

一个简单的技巧是对具有正确扩展名的脚本进行符号链接，然后让 doxygen 处理符号链接。

假设您有一个名为 的python 脚本`test`，然后执行

```
ln -s test test.py 
```

然后在doxygen的配置文件中指定test.py文件

```
INPUT = test.py 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-16T23:06:32.840

根据 doxygen 的[EXTENSION_MAPPING](http://www.doxygen.nl/manual/config.html#cfg_extension_mapping)文档，

```
EXTENSION_MAPPING = ".no_extension=python" 
```

应该管用。

# java - Eclipse (JAVA) 中的窗口生成器不会加载

> ID：14148980
> 
> 赞同：3
> 
> 时间：2013-01-03T17:06:20.630
> 
> 标签：java, eclipse, user-interface, windowbuilder

我正在学习 JAVA，并且正在寻找在 Eclipse 中使用的 GUI 编辑器/创建器。我用谷歌搜索并找到了“WindowBuilder”。我通过以下说明安装了它：

[https://developers.google.com/java-dev-tools/wbpro/installation/](https://developers.google.com/java-dev-tools/wbpro/installation/)

当我安装它时，我检查了每个复选框以安装所有内容。但是，当我创建一个类来创建一个 GUI，然后我单击“设计”选项卡时，我得到“这不是一个 GUI 类，不能以图形方式编辑”（即使我选择了 WindowBuilder 的选项时创建类）。

当我打开已经包含（工作）GUI 的类时，我得到“未知的 GUI 工具包”。

有没有办法让 WindowBuilder 运行，或者是否有更好的解决方案？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-01-29T16:04:15.247

作为记录，我遇到了同样的问题，但我忘记从“帮助”菜单中的“安装新软件...”选项安装“Swing Designer”模块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-22T15:01:32.507

选项卡“帮助”->“安装新软件”.. 在“使用”中，输入名称：Kepler URL：http: [//download.eclipse.org/releases/kepler](http://download.eclipse.org/releases/kepler)并添加

并在“类型过滤器文本”上写“Swing Designer”。安装它，你应该没问题..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T19:49:22.823

这是固定的。Eclipse 属性中的 JRE 选项无效。它指向 JRE6 而不是 JRE7。我不确定 Eclipse 最初是如何工作的。可以了，好了。谢谢！

# php - 如何将数据从网页发送到访问者计算机的串口？

> ID：14148981
> 
> 赞同：0
> 
> 时间：2013-01-03T23:29:11.520
> 
> 标签：php, c++, curl, serial-port

> **可能重复：**
> [如何将数据从网页发送到串行端口？](https://stackoverflow.com/questions/14147144/how-can-i-send-data-from-a-web-page-to-a-serial-port)

是否可以从 PHP 网页向访问者计算机的串行端口之一发送数据？

如果是，如何？

如果不是，基本上，我想为 Web 后端编写一个客户端，该客户端从 Web 检索数据，然后将检索到的数据写入串行端口。你能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T23:33:44.077

不是通过互联网，因为那会非常危险，用户必须有特殊的软件。否则，网络程序可能（非常）容易被用于恶意目的。

# php - 如何将用户导航到正确的页面？

> ID：14148984
> 
> 赞同：1
> 
> 时间：2013-01-03T23:29:18.763
> 
> 标签：php

```
<?php

$pages = array('Text1.php', 'Text2.php', 'Text3.php', 'Text4.php', 'Text5.php');

// Track $latest in either a session variable
// $current will be dependent upon the page you're on

$latest = $_SESSION['latest'];
$current = basename(__FILE__); 

$currentPages = array_search($current, $pages);
$latestPages = array_search($latest, $pages);

if ($currentPages - $latestPages > 1 ) {
    ?>
<div class="boxed">
  <a href="">Continue</a>
<br/>
<a href="Text1.php" id="createLink">Create New</a>
</div>

<?

} else {
    // let user do their step
}

?> 
```

我有一个包含五页的数组。现在这个页面`steps.php`被外部化并存储在一个`include()`存储在5个php页面中的an中，相同的php页面存储在数组中的数组中。

现在我想做的是用户应该遵循页面结构。因此，如果用户在数组中的一个页面上，他们将无法访问另一个页面，直到他们提交了他们当前所在的页面。

但我的问题是，如果用户点击`Continue`链接，我怎样才能获得链接`</a>`到正确页面的链接，以便将用户导航到他们应该正确访问的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:55:35.373

If you mean how you can direct the user to the correct 'next' page when they click on `Continue`, you can output the next page using the currentPages index + 1

```
<? if ($currentPages - $latestPages > 1 ) { ?>
<div class="boxed">
  <a href="<?= $pages[$currentPages+1] ?>">Continue</a>
<br/>
<a href="Text1.php" id="createLink">Create New</a>
</div>

<? } ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T23:53:14.933

据我了解，您正在尝试实现分页之类的功能？您应该将当前、上一页和下一页放在`SESSION`变量中，因此在每个请求中，您都可以检查用户是否在该`SESSION['current']`页面中，并尝试转到该页面`SESSION['previous']`或该`SESSION['next']`页面，您还应该将“隐藏字段”值发送到服务器以检查用户是否“提交”页面（当然，可以简单地阅读您的 html 并找到“隐藏”字段）。或者您可以简单地检查提交按钮的“名称”是否在 POST（或 GET）中？( `if($_POST['NAME_OF_SUBMIT']){}`) - 但同样也很容易伪造。

# machine-learning - 您如何编写程序来查找某些单词是否相似？

> ID：14148986
> 
> 赞同：5
> 
> 时间：2013-01-03T23:29:37.620
> 
> 标签：machine-learning, nlp

即：“college”、“schoolwork”和“academy”属于同一个簇，“essay”、“scholarships”、“money”等词也属于同一个簇。这是 ML 还是 NLP 问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-01T01:26:30.323

这取决于您对*相似*的定义有多严格。

## 机器学习技术

正如[其他人](https://stackoverflow.com/a/14225866/1988505)指出的那样，您可以使用[潜在语义分析](https://en.wikipedia.org/wiki/Latent_semantic_analysis)或相关的[潜在狄利克雷分配](https://en.wikipedia.org/wiki/Latent_Dirichlet_allocation)之类的东西。

## 语义相似度和 WordNet

正如所[指出的](https://stackoverflow.com/a/14149014/1988505)，您可能希望将现有资源用于此类事情。

许多研究论文（[示例](http://www.aclweb.org/anthology-new/J/J06/J06-1003.pdf)）使用术语*语义相似性*。基本思想是计算这通常是通过在图上找到两个词之间的[距离](https://en.wikipedia.org/wiki/Distance_(graph_theory))来完成的，其中如果一个词是其父词的一种类型，那么它就是一个子词。示例：“songbird”将是“bird”的子级。如果您愿意，语义相似度可以用作创建集群的距离度量。

### 示例实现

另外，如果你对某个语义相似度度量的值设置一个阈值，你可以得到一个布尔值`True`或`False`。这是我创建的一个 Gist ( [word_similarity.py](https://gist.github.com/3949778) )，它使用[NLTK 的](http://nltk.org/)[WordNet](http://nltk.googlecode.com/svn/trunk/doc/howto/wordnet.html)语料库阅读器。希望这可以为您指明正确的方向，并为您提供更多搜索词。

```
def sim(word1, word2, lch_threshold=2.15, verbose=False):
    """Determine if two (already lemmatized) words are similar or not.

    Call with verbose=True to print the WordNet senses from each word
    that are considered similar.

    The documentation for the NLTK WordNet Interface is available here:
    http://nltk.googlecode.com/svn/trunk/doc/howto/wordnet.html
    """
    from nltk.corpus import wordnet as wn
    results = []
    for net1 in wn.synsets(word1):
        for net2 in wn.synsets(word2):
            try:
                lch = net1.lch_similarity(net2)
            except:
                continue
            # The value to compare the LCH to was found empirically.
            # (The value is very application dependent. Experiment!)
            if lch >= lch_threshold:
                results.append((net1, net2))
    if not results:
        return False
    if verbose:
        for net1, net2 in results:
            print net1
            print net1.definition
            print net2
            print net2.definition
            print 'path similarity:'
            print net1.path_similarity(net2)
            print 'lch similarity:'
            print net1.lch_similarity(net2)
            print 'wup similarity:'
            print net1.wup_similarity(net2)
            print '-' * 79
    return True 
```

示例输出

```
>>> sim('college', 'academy')
True

>>> sim('essay', 'schoolwork')
False

>>> sim('essay', 'schoolwork', lch_threshold=1.5)
True

>>> sim('human', 'man')
True

>>> sim('human', 'car')
False

>>> sim('fare', 'food')
True

>>> sim('fare', 'food', verbose=True)
Synset('fare.n.04')
the food and drink that are regularly served or consumed
Synset('food.n.01')
any substance that can be metabolized by an animal to give energy and build tissue
path similarity:
0.5
lch similarity:
2.94443897917
wup similarity:
0.909090909091
-------------------------------------------------------------------------------
True

>>> sim('bird', 'songbird', verbose=True)
Synset('bird.n.01')
warm-blooded egg-laying vertebrates characterized by feathers and forelimbs modified as wings
Synset('songbird.n.01')
any bird having a musical call
path similarity:
0.25
lch similarity:
2.25129179861
wup similarity:
0.869565217391
-------------------------------------------------------------------------------
True

>>> sim('happen', 'cause', verbose=True)
Synset('happen.v.01')
come to pass
Synset('induce.v.02')
cause to do; cause to act in a specified manner
path similarity:
0.333333333333
lch similarity:
2.15948424935
wup similarity:
0.5
-------------------------------------------------------------------------------
Synset('find.v.01')
come upon, as if by accident; meet with
Synset('induce.v.02')
cause to do; cause to act in a specified manner
path similarity:
0.333333333333
lch similarity:
2.15948424935
wup similarity:
0.5
-------------------------------------------------------------------------------
True 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T23:32:50.067

我想您可以建立自己的此类关联数据库，使用 ML 和 NLP 技术，但您也可以考虑查询现有资源（例如[WordNet](http://wordnet.princeton.edu/)）来完成工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T23:30:09.120

如果您有大量与感兴趣的主题相关的文档，您可能需要查看[Latent Direchlet Allocation](http://en.wikipedia.org/wiki/Latent_Dirichlet_allocation)。LDA 是一种相当标准的 NLP 技术，可以自动将单词聚类到主题中，其中单词之间的相似性由同一文档中的搭配确定（如果可以更好地满足您的需求，您可以将单个句子视为文档）。

您会发现许多可用的 LDA 工具包。在推荐一个而不是另一个之前，我们需要更多关于您的确切问题的详细信息。无论如何，我还不足以提出这个建议，但我至少可以建议你看看 LDA。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T05:52:10.830

关于您的问题的名言是约翰·鲁珀特·弗斯（John Rupert Firth）在 1957 年发表的：

> 你会知道它所拥有的公司的一个词

要开始深入研究此主题，您可以查看[此演示文稿](http://www.stefan-evert.de/SIGIL/potsdam_2007/materials/collocations.4up.pdf)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-27T12:41:27.650

Word2Vec 可以发挥作用（在上下文/语义上）查找相似的单词。在 word2vec 中，我们将单词作为 n 维空间中的向量，可以计算单词之间的距离（欧几里得距离），也可以简单地进行聚类。

在此之后，我们可以为 b/w 2 个词的相似度得出一些数值。

# c# - 查找导致应用程序池崩溃的应用程序（IIS 7）

> ID：14148987
> 
> 赞同：0
> 
> 时间：2013-01-03T23:29:48.770
> 
> 标签：c#, .net, iis, application-pool

我有一个由多个应用程序（不是网站！）共享的应用程序池，通过事件查看器查看，我找到了一个说明崩溃原因的条目。

在这种情况下，它具有以下字段。

应用程序 ID：/KL/W3SVC/12/ROOT/uk

问题，如何使用它在IIS中找到对应的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T00:41:22.463

应用程序 ID：/KL/W3SVC/12/ROOT/uk

W3svc => IIS

根 => 根应用程序/应用程序所属的网站

英国 => 申请名称

# c# - Resharper 抱怨测试项目中的得分方法不足

> ID：14148989
> 
> 赞同：6
> 
> 时间：2013-01-03T23:30:00.477
> 
> 标签：c#, visual-studio, testing, resharper

我正在使用 Visual Studio 2012 和 Reshaper 7.1.1，并且我的行为确实让我感到困扰。

我喜欢将我的 C# 单元测试命名如下

```
public void Identifier_Created_As_Expected() 
```

我觉得这是一种能够快速准备测试内容的好方法等。

我遇到的问题是 Reshaper 抱怨并给出警告说方法不匹配规则等。这是正确的，因为我不会像这样命名我的正常方法。

有什么方法可以让我的测试项目不让 reshaper 不抱怨这个并允许它吗？虽然不允许它使用普通的类库。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T23:50:42.610

转到**Resharper-> 选项-> 代码编辑-> C#-> C# 命名样式**

然后点击**高级设置** ![高级设置突出显示](../Images/58c0a20cc72434d889175cf68cc5f191.png)

然后点击**添加**新规则 ![添加按钮被高亮显示](../Images/4da0bde050a6da7a70ea2cc1f689c9fe.png)

搜索**测试类型**和**测试方法**并将其定义为**UpperCase_UnderscoreTolerant**并取消选中**启用检查**选项 ![测试方法命名规则定义](../Images/0acdb7f09d6317d28c7291213dceaf93.png)

有关更多详细信息，请考虑访问：

*   [为预定义实体配置命名样式](http://www.jetbrains.com/resharper/webhelp/Coding_Assistance__Naming_Style.html#To_configure_a_naming_style_for_predefined_entities)
*   [如何让 Resharper 允许在方法名称中使用下划线但仅在测试中？](https://stackoverflow.com/questions/3660597/how-to-get-resharper-to-allow-underscores-in-method-names-but-only-in-tests)
*   [如何更改测试方法的 ReSharper 命名样式](http://atombrenner.blogspot.com/2010/07/how-to-change-resharper-naming-style.html)