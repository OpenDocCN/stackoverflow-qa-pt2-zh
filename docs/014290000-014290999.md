# StackOverflow 问答 14290000-14290999

# iphone - UIViewContentModeScaleAspectFit 不适用于 UIScrollView 子视图 UIImageView

> ID：14290001
> 
> 赞同：3
> 
> 时间：2013-01-12T03:42:49.010
> 
> 标签：iphone, ios, objective-c, xcode, cocoa-touch

几个小时以来，我一直试图弄清楚为什么`UIScrollView`不会显示来自`NSMutableArray`.

我意识到 uiimageview 对象位于 UISCrollview 内的子视图集合中，但不知何故 UIViewContentModeScaleAspectFit 被忽略了......那我如何适应缩放？

请问，有什么建议吗？

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    BookDalc* bookDalc = [[BookDalc alloc] init];

    NSMutableArray* books = [bookDalc FindByIconID:IconID];

    for(int i = 0;i<books.count;i++)
    {
        CGRect frame;
        frame.origin.x = self.scrBook.frame.size.width * i;
        frame.origin.y = 0;
        frame.size = self.scrBook.frame.size;

        UIImageView *subview = [[UIImageView alloc] initWithFrame:frame];
        subview.contentMode = UIViewContentModeScaleAspectFit;

        BookEntity *currentModel = [books objectAtIndex:i];
        UIImage *currentImage = [currentModel TheImage];

        subview.image = currentImage;
        [self.scrBook addSubview:subview];
    }
    self.scrBook.contentSize
    = CGSizeMake(self.scrBook.frame.size.width * books.count, self.scrBook.frame.size.height);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:17:22.997

self.srcBook 的框架可能没有设置。

有关更多信息，请阅读此答案。 [为什么我必须在 viewDidLoad 中手动设置我的视图框架？](https://stackoverflow.com/questions/6757018/why-am-i-having-to-manually-set-my-views-frame-in-viewdidload)

# android - Handling PHP sessions with Android/IOS/mobile cloud apps

> ID：14290011
> 
> 赞同：1
> 
> 时间：2013-01-12T03:44:18.293
> 
> 标签：android, ios, session, php

I'm building an Android cloud app that authenticates a user on a PHP/MySql server. I would like to use sessions as to not need to ask the user to authenticate himself every time he communicates with the server. However, sessions don't last forever, and it won't take long before the user has to authenticate himself again. Is there a way to make the sessions last forever, except when the user wants to log out?

If not, I find it would be just easier to keep the user credentials in memory on the app, and then send them each time the user communicates with the server.

Any ideas? Any other solutions?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T03:53:06.653

You can store an access token every time the user registers. When a user logs in using app, this token will be returned as authentication token .to the app. With every request which is made to the server, this token is sent. On server side, you just need to verify whether token is present in the request and if yes, whether it is valid which is determined by checking if it is present in the database.

# youtube - preg_match 找出 YouTube ID

> ID：14290012
> 
> 赞同：1
> 
> 时间：2013-01-12T03:39:46.220
> 
> 标签：youtube

我已经找到了正常 YouTube URL 的 YouTube ID。但是我没有考虑过短的 youtu.be 网址，也没有想到过滤掉 YouTube-Id 视频。据我所知，有这些类型的 YT-URL 可用：

youtube.com/watch?v=0zM3nApSvMg&feature=feedrec_grec_index

youtube.com/user/IngridMichaelsonVEVO#p/a/u/1/QdK8U-VIH_o

youtube.com/v/0zM3nApSvMg?fs=1&hl=en_US&rel=0

youtube.com/watch?v=0zM3nApSvMg#t=0m10s

youtube.com/embed/0zM3nApSvMg?rel=0

youtube.com/watch?v=0zM3nApSvMg

youtu.be/0zM3nApSvMg

我在另一个问题中发现了这一点，但它不起作用：

```
/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/ 
```

所以我的问题是：我如何编辑以下代码才能始终获取 YouTube-ID？！;)

太感谢了！

```
add_filter('embed_oembed_html', 'my_embed_oembed_html', 99, 4);
function my_embed_oembed_html( $html, $url, $attr, $post_id) {
    $posttext = substr($url[0],1);  
    preg_match('/v\=([a-zA-Z0-9,-]+)/', $url, $youtubeID);   

  return '<div id="video" class="border-frame"><video class="video" data-settings="autoresize:fit" preload="none" data-youtube-id="' . $youtubeID[1] . '"></video></div>';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T04:46:05.687

实际上，您可能会考虑不使用正则表达式。PHP 有很多可以帮助你的内置函数。例如，尝试以下代码：

```
$urls = array(
    'youtube.com/watch?v=0zM3nApSvMg&feature=feedrec_grec_index',
    'youtube.com/user/IngridMichaelsonVEVO#p/a/u/1/QdK8U-VIH_o',
    'youtube.com/v/0zM3nApSvMg?fs=1&hl=en_US&rel=0',
    'youtube.com/watch?v=0zM3nApSvMg#t=0m10s',
    'youtube.com/embed/0zM3nApSvMg?rel=0',
    'youtube.com/watch?v=0zM3nApSvMg',
    'youtu.be/0zM3nApSvMg'
);

function displayId($url, $id) {
    echo "URL: ", $url, "\n";
    echo "ID:  ", $id, "\n\n";
}

foreach ($urls as $url) {

    $u = parse_url($url);

    parse_str($u['query'], $queryVars);

    if ($u['query'] && $queryVars['v']) {
        displayId($url, $queryVars['v']);
    } else if ($u['fragment']) {
        displayId($url, basename($u['fragment']));
    } else if ($u['path']) {
        displayId($url, basename($u['path']));
    }
} 
```

这会产生以下输出：

```
URL: youtube.com/watch?v=0zM3nApSvMg&feature=feedrec_grec_index
ID:  0zM3nApSvMg

URL: youtube.com/user/IngridMichaelsonVEVO#p/a/u/1/QdK8U-VIH_o
ID:  QdK8U-VIH_o

URL: youtube.com/v/0zM3nApSvMg?fs=1&hl=en_US&rel=0
ID:  0zM3nApSvMg

URL: youtube.com/watch?v=0zM3nApSvMg#t=0m10s
ID:  0zM3nApSvMg

URL: youtube.com/embed/0zM3nApSvMg?rel=0
ID:  0zM3nApSvMg

URL: youtube.com/watch?v=0zM3nApSvMg
ID:  0zM3nApSvMg

URL: youtu.be/0zM3nApSvMg
ID:  0zM3nApSvMg 
```

代码可能更健壮，但我认为它给了你这个想法。:)

干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T03:50:47.327

```
add_filter('embed_oembed_html', 'my_embed_oembed_html', 99, 4);
function my_embed_oembed_html( $html, $url, $attr, $post_id) {
    $posttext = substr($url[0],1); 
    preg_match("#(?<=v=)[a-zA-Z0-9-]+(?=&)|(?<=v\/)[^&\n]+(?=\?)|(?<=v=)[^&\n]+|(?<=youtu.be/)[^&\n]+#", $url, $youtubeID);   

  return '<div id="video" class="border-frame"><video class="video" data-settings="autoresize:fit" preload="none" data-youtube-id="' . $youtubeID[1] . '"></video></div>';
} 
```

# .net - MVC 4 在前端隐藏客户端 ID 的最佳实践

> ID：14290014
> 
> 赞同：4
> 
> 时间：2013-01-12T03:44:41.613
> 
> 标签：.net, asp.net-mvc-4

我是.net 世界的新手，所以请耐心等待。我需要在控制器的视图中显示用户列表（带有剃刀引擎的 MVC4 应用程序）。

当用户显示在视图中时，客户端可以单击链接并在单独的视图中获取特定的用户信息。我想实现这一点，但想对用户隐藏任何特定的客户端 ID。客户端 ID 将用于服务器端来检索客户端信息。

我可以通过多种方式执行此操作，例如：在链接中我可以放置一个数据 ID，然后在服务器端使用此 ID 从数据库中检索更多信息。我担心的是客户端可以简单地从 HTML 源代码中查看这些 id，并使用此 id 信息键入控制器 url。我也不喜欢隐藏字段。

所以我的问题是实现此类功能的其他不同方法或最佳实践是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T04:05:26.347

以您描述的方式使用键在应用程序中导航是相当普遍的。

如果您担心安全性（有人能够将发现或猜测的密钥传递给控制器​​上的操作并看到一些他们不应该看到的信息），那么在从操作返回信息之前验证控制器/操作级别的用户上下文并决定如果您认为不适当，请勿返回安全信息。

我能想象的唯一另一种方法是允许 UI 用一些必要的上下文信息与服务器端对话，这可能是为发送到客户端的每个关键数据生成代理 guid 字段，使用该代理发送回您的服务器端，将 guid 翻译回真正的密钥，然后开始您的业务。（GUID 本身不会像 int 那样合理猜测。）但是，我永远不会做这样的事情......

想想你试图解决的问题，并确保它保证了这种复杂性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T06:23:20.187

同意以上所有内容 - 如果您提供用户界面来查看基于 ID 的详细信息，则无法隐藏该 ID - 您必须将其发回。它可能不是实际的 ID（即 GUID），但这无关紧要。您正在向客户端提供一个 ID，任何人都可以使用该 ID 根据 ID 检索详细信息。

问自己一个问题，“我想提供电话簿，但不显示电话号码。我可以这样做吗？”

# ios4 - 适用于 iOS iPhone SDK 的 CoPilot Truck HD、美国和加拿大地图应用程序打开 URL 架构

> ID：14290019
> 
> 赞同：1
> 
> 时间：2013-01-12T03:45:16.230
> 
> 标签：ios4, ios5, openurl

我正在尝试从我正在编写的自己的应用程序中打开 CoPilot Truck HD、美国和加拿大地图应用程序。这是 iTunes 上应用程序的 URL

[https://itunes.apple.com/us/app/copilot-truck-hd-north-america/id399782003?mt=8](https://itunes.apple.com/us/app/copilot-truck-hd-north-america/id399782003?mt=8)

我知道 TomTom 和谷歌地图有这个功能，想知道是否有人知道这个应用程序是否有，以及开放 URL 声明是什么？将地址发送到应用程序以开始新路线。

感谢您的帮助

# java - 使用 BoxLayout 动态增长的 JPanel（在空布局上）

> ID：14290020
> 
> 赞同：0
> 
> 时间：2013-01-12T03:45:19.367
> 
> 标签：java, swing, jpanel, absolutelayout, boxlayout

我在具有空布局的 JPanel 顶部有一个带有垂直 BoxLayout 的 JPanel。

我希望带有 BoxLayout 的 JPanel 随着组件的添加而增长。

请参阅此代码：

```
public static void main (String[] args) {
    JFrame f = new JFrame();
    f.setSize(500,500);
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    JPanel total = new JPanel();
    total.setLayout(null);
    total.setSize(f.getWidth(),f.getHeight());
    total.setBackground(Color.green);
    JPanel box = new JPanel();
    box.setLocation(100,200);
    box.setLayout(new BoxLayout(box, BoxLayout.Y_AXIS));
    box.add(new JButton("test"));
    box.add(new JLabel("hey"));
    total.add(box);
    f.add(total);
    f.setVisible(true);
} 
```

您会注意到没有显示任何组件。

如何使 JPanel “盒子”随着我添加更多组件（垂直添加）而动态增加。

提前：我需要“框”的位置正好在 100,200，所以请不要建议我不使用空布局。我必须使用空布局。“总计”的空布局不应影响我的问题的答案，该问题侧重于“框”面板。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-12T05:31:55.100

通过丢弃布局管理器，您突然对它的工作负责。我可能会添加的工作，这并不容易......

基本上，给定你的例子，你没有设置子组件的大小......

```
JFrame f = new JFrame();
f.setSize(500, 500);
f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

JPanel total = new JPanel();
total.setLayout(null);
total.setSize(f.getWidth(), f.getHeight());
total.setBackground(Color.green);

JPanel box = new JPanel();
box.setLocation(100, 200);
box.setLayout(new BoxLayout(box, BoxLayout.Y_AXIS));
box.add(new JButton("test"));
box.add(new JLabel("hey"));
box.setSize(100, 100);  // <-- Don't forget this..

total.add(box);
f.add(total);
f.setVisible(true); 
```

就个人而言，我认为你是在自找麻烦，但我会知道什么......

一个更好的主意可能是使用类似的东西`EmptyBorder`来提供填充......

![在此处输入图像描述](../Images/0153f4de8f6581ffa56c7eabf5ed7201.png)

```
JFrame f = new JFrame();
f.setSize(500, 500);
f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

JPanel total = new JPanel(new BorderLayout());
total.setSize(f.getWidth(), f.getHeight());
total.setBackground(Color.green);
total.setBorder(new EmptyBorder(100, 200, 100, 200));

JPanel box = new JPanel();
box.setLayout(new BoxLayout(box, BoxLayout.Y_AXIS));
box.add(new JButton("test"));
box.add(new JLabel("hey"));

total.add(box);
f.add(total);
f.setVisible(true); 
```

**使用布局管理器示例更新**

现在，如果所有布局管理器都让您失望，您可以尝试编写自己的布局管理器。这具有您需要从`null`布局管理器中获得的好处以及集成到 Swing 的组件更改过程中的好处，而无需求助于`ComponentListeners`和`ContainerListeners`

![在此处输入图像描述](../Images/d4f468e3c8ecbd9f860b9d6adfda2367.png)

```
JPanel total = new JPanel();
total.setLayout(new SuperAwesomeBetterThenYoursLayout()); 
```

**自定义布局管理器**

```
public static class SuperAwesomeBetterThenYoursLayout implements LayoutManager {

    @Override
    public void addLayoutComponent(String name, Component comp) {
    }

    @Override
    public void removeLayoutComponent(Component comp) {
    }

    @Override
    public Dimension preferredLayoutSize(Container parent) {
        return new Dimension(100, 300);
    }

    @Override
    public Dimension minimumLayoutSize(Container parent) {
        return new Dimension(100, 300);
    }

    @Override
    public void layoutContainer(Container parent) {
        boolean laidOut = false;
        for (Component child : parent.getComponents()) {
            if (child.isVisible() && !laidOut) {
                child.setLocation(200, 100);
                child.setSize(child.getPreferredSize());
            } else {
                child.setSize(0, 0);
            }
        }
    }

} 
```

这基本上代表了无论如何你都必须要做的工作，但它的工作方式与 Swing 的设计方式一致......

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-12T03:46:51.580

建议：

*   几乎永远不要使用空布局。
*   为什么不给总`JPanel`a `BorderLayout`？
*   然后将`BoxLayout`using添加`JPanel`到`BorderLayout.NORTH`（或也称为`BorderLayout.PAGE_START`）位置。

**编辑**
你的状态，

> 提前：我需要“框”的位置正好在 100,200，所以请不要建议我不使用空布局。我必须使用空布局。“总计”的空布局不应影响我的问题的答案，该问题侧重于“框”面板。

我认为您再次对您的程序施加了不必要的限制。您可以通过在其周围放置一个该大小的空边框或通过其他方式轻松地将您的“框”放置在 100、200 处。但答案不是放弃使用 null 布局。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-12T05:08:54.877

马上，我会改变什么：

```
public static void main (String[] args) {
    JFrame f = new JFrame();
    //f.setSize(500,500);
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    JPanel total = new JPanel();
    //total.setLayout(null); //<-- this is usually a bad idea, but you can keep it
    //                                if you want to specify an EXACT location
    //                                for your JPanel
    total.setPreferredSize(500, 500);
    total.setBackground(Color.green);
    JPanel box = new JPanel();
    //box.setLocation(100,200);
    box.setLayout(new BoxLayout(box, BoxLayout.Y_AXIS));
    box.add(new JButton("test"));
    box.add(new JLabel("hey"));
    total.add(box);
    f.add(total);
    f.pack();
    f.setVisible(true);
} 
```

一旦你有了这个基础，你需要做的就是动态改变 JPanel 的大小：

```
panel.setSize(width, heightOfComponentWithin * numberOfComponents);
container.repaint(); //<-- Im not sure if you also have to call panel.repaint(),
//                           you probably don't have to. 
```

我还建议使用滚动视图，以防 JPanel 开始消失。祝你好运！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-12T04:35:12.987

也许是因为你还没有为 box JPanel 设置大小。

# android - 如何处理 XML 文件？

> ID：14290024
> 
> 赞同：0
> 
> 时间：2013-01-12T03:47:09.067
> 
> 标签：android, xml, parsing, xml-parsing, android-listview

我想在 ListView 中显示大陆的名称，我们称之为**listContinents**。选择例如 US 后，我想在那里显示所有州，我们称之为**ListStates**。选择一个特定的州后，我想显示该州的所有城市，我们称之为**ListCity**。选择一个城市后，我想显示有关该城市的一些信息，我们称之为**listCityInfo**。这是我上面所说的总结。

**大陆**>>**州**>>**城市**>>**信息**。

如何创建一个包含所有信息的 XML 文件并从中读取？基本上我不知道怎么做。我将信息存储在 html 文件中，所以我应该将其转换为 XML 文件。这是要走的路吗？

如果 XML 文件包含所有信息，我将如何读取它。如果 XML 文件仅包含我知道如何阅读的大洲、州或城市，但当所有这些都存在时则不包含。我如何使它工作？我不想为每个州创建超过 500 个包含城市的 XML 文件，这会浪费时间。

有人可以使用任何示例向我说明这是如何工作的或将我链接到有用的网站吗？

我将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T04:19:42.977

这是我将如何做到的。

1.  将您的信息保存到 SQlite 数据库中并将其放入资产文件夹中。（但如果您熟悉 webservice，我建议您使用它。并使用​​ json，因为 xml 在 Android 中很麻烦）
2.  阅读它并填充到[可扩展的 listview](http://developer.android.com/reference/android/widget/ExpandableListView.html)中。
    [示例示例](http://mylifewithandroid.blogspot.jp/2008/05/expandable-lists.html)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-12T04:14:52.753

```
 File newxmlfile = new File("/data/com.itwine/emergency.xml");

        try{
                newxmlfile.createNewFile();
        }catch(IOException e){
                Log.e("IOException", "exception in createNewFile() method");
        }
        //we have to bind the new file with a FileOutputStream
        FileOutputStream fileos = null;        
        try{
                fileos = new FileOutputStream(newxmlfile);
        }catch(FileNotFoundException e){
                Log.e("FileNotFoundException", "can't create FileOutputStream");
        }
        //we create a XmlSerializer in order to write xml data
        XmlSerializer serializer = Xml.newSerializer();
        try {
                //we set the FileOutputStream as output for the serializer, using UTF-8 encoding
                        serializer.setOutput(fileos, "UTF-8");
                        //Write <?xml declaration with encoding (if encoding not null) and standalone flag (if standalone not null)
                        serializer.startDocument(null, Boolean.valueOf(true));
                        //set indentation option
                        serializer.setFeature("http://xmlpull.org/v1/doc/features.html#indent-output", true);
                        //start a tag called "root"
                        serializer.startTag(null, "root");
                        *//**serializer.startTag(null, "Child1");
                        serializer.endTag(null, "Child1");
                        serializer.startTag(null, "Child2");
                        serializer.attribute(null, "attribute", "value");
                        serializer.endTag(null, "Child2");*//*
                        serializer.startTag(null, "EmailId");
                        serializer.text(txtemailid.getText().toString());
                        serializer.endTag(null,"EmailId");
                        serializer.startTag(null, "PhoneNo");
                        serializer.text(txtphoneno.getText().toString());
                        serializer.endTag(null,"PhoneNo");
                        serializer.endTag(null,"root");
                        serializer.endDocument();
                        //write xml data into the FileOutputStream
                        serializer.flush();
                        //finally we close the file stream
                        fileos.close();
                       Toast.makeText(getApplication(), "xml created",Toast.LENGTH_LONG);
                } catch (Exception e) {
                        Log.e("Exception","error occurred while creating xml file");
                } 
```

是的，有一种方法。您可以使用 FileOutputStream 编写 Xmlfile。并使用 XMLserializer 设置属性和标签。看看我给出的示例。

# android - 将 CheckBox 添加到 ListView 行视图使该行不可点击

> ID：14290025
> 
> 赞同：3
> 
> 时间：2013-01-12T03:47:14.637
> 
> 标签：android, listview, checkbox

我正在尝试创建一个`ListView`与 Gmail 应用程序类似的应用程序，其中每一行`CheckBox`左侧都有一个，以便通过上下文操作栏进行多项选择和操作，同时允许单击每一行以转换到另一个活动。

最初，在添加`CheckBox`行之前，将使用我正在使用的 Holo 主题中的浅蓝色背景颜色来指示它们的选择，并在单击时调用`onListItemClick`我的`ListFragment`，并`onItemLongClick`在`OnItemLongClickListener`长时间单击时调用我的。

当我将`CheckBox`.xml 文件添加到行视图的布局中时，背景不再改变颜色，并且我不再收到单击或长按事件。如果我将 .xml 添加`android:longClickable="true"`到我的视图顶部`ViewGroup`，那么我会再次开始获得长点击事件。但`android:clickable="true"`不会让我点击事件。并且两者都不允许背景蓝色选择指示返回。只有它`CheckBox`本身在触摸时提供带有蓝色背景的视觉触摸指示。

我需要做什么才能获得正常的视觉选择指示以及视图中`ListView`带有 的行上的单击事件`CheckBox`？

这是我的视图.xml的相关部分：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:longClickable="true"
    android:orientation="horizontal" >

    <CheckBox
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center" />

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:orientation="vertical"
        android:paddingBottom="5dp"
        android:paddingRight="12dp"
        android:paddingTop="5dp" >

        ...

    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-12T04:13:01.817

不久前我写了[一篇](http://wiresareobsolete.com/wordpress/2011/08/clickable-zones-in-listview-items/)关于这个主题的博客文章，你可能会觉得有帮助。事实上，问题在于，添加可聚焦元素（如`CheckBox`或`Button`）会禁用单击整个列表项的功能，并且必须禁用它们的可聚焦性。您也不应该`clickable`在主布局中添加任何标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-09T19:27:20.897

在CAB中添加checkbox时请使其focusable="false"，这样可以解决onItemCheckedStateChanged只调用一次的问题。

# c - 使用 #ifdef 标头保护将 .h 文件与 .c 链接

> ID：14290026
> 
> 赞同：13
> 
> 时间：2013-01-12T03:47:52.273
> 
> 标签：c, multiple-inclusions

我在链接 .h 和 .c 文件时遇到问题，我也阅读了一些关于这个问题的线程，所有这些都有点模糊，我仍然无法完全掌握它的概念，而且我有很多链接问题，**假设我有 bc 和 bh，我将在 ac**中使用，我很困惑是否同时包含 bh ac 和 bc 因为 bc 本身需要知道 bh 中定义的结构，我有一些函数，它的原型在 bh 中并被定义在 bc 中也使用 bh 中的结构，我不包括 bc 中的 bh cuz，因为我知道 bh 更像是 ac 的接口，它将使用 bc 中的函数。这里有一个更清晰的例子

**.bh 文件**

```
typedef struct{
int x, y;
}myStruct;

void funct1(myStruct);
void funct2(myStruct); 
```

**bc 文件**

```
void funct1(myStruct x)
{
    //do something
}

void funct2(myStruct y)
{
     //do something
} 
```

**交流档案**

```
#include "b.h"

int main()
{
myStruct x;
  funct1(x);
  funct2(y);
return 0;
} 
```

在cygwin中执行命令：**gcc bc ac -g**

现在令人困惑的部分是，我有一个链接错误，其中在编译 bc 时它无法检测到 bh 中的结构和原型因为我所知道的是 bh 用于从 ac 链接 bc 但是当编译两个 .c 时似乎bc 找不到它的结构和原型，

**为什么我没有在 bc 中包含 bh？** **答案**：因为据我所知，bh 已经包含在 ac 中，当我再次将它包含在 bc 中时，我将进行双重包含它不会工作，也许我仍然不知道如何使用它，如果你知道请随时讨论这个。

如果您对如何进行此操作有任何想法，请随时告诉我一些。

有一个#ifdef 指令，但我似乎不知道如何做到这一点。

注意：假设所有上述代码在语法上都是正确的，如果有任何拼写错误的单词请忽略，我只是在 .h 和 .c 之间的包含之后

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-12T03:54:31.353

你确实需要`#include b.h`在`b.c`. 在链接器接管之前，每个文件都是单独编译的，所以你在 ac 中包含 bh 并不重要，因为 bc 是自己编译的，除非你包含它，否则不知道 bh 的内容。

这是一个`#include`守卫的例子

```
// some_header_file.h
#ifndef SOME_HEADER_FILE_H
#define SOME_HEADER_FILE_H
// your code
#endif 
```

当 some_header_file.h 被包含在任何地方时，如果 SOME_HEADER_FILE_H 已定义，则介于`#ifndef`和之间的所有内容都将被忽略，这将在它第一次包含在编译单元中时发生。`#endif`

通常的做法是`#define`在文件名之后命名，以确保项目中的唯一性。我也喜欢在它前面加上我的项目或命名空间的名称，以减少与其他代码冲突的风险。

注意：即使使用上述包含保护，相同的头文件也可以在您的项目中多次包含，只是不能在同一个编译单元中包含两次。这证明如下：

```
// header1.h
#ifndef HEADER_H
#define HEADER_H
int test1 = 1;
#endif

// header2.h
#ifndef HEADER_H
#define HEADER_H
int test2 = 2;
#endif 
```

现在让我们看看当我们尝试包含上述两个文件时会发生什么。在单个编译单元中：

```
// a.cpp
#include "header1.h"
#include "header2.h"
#include <iostream>
int main()
{
   std::cout << test1;
   std::cout << test2;
}; 
```

这会产生编译器错误，因为 test2 未定义 - 它在 header2.h 中被忽略，因为 HEADER_H 已在包含的时间定义。现在，如果我们将每个头文件包含在单独的编译单元中：

```
// a.cpp
#include "header2.h"
int getTest2()
{
   return test2;
};

// b.cpp
#include "header1.h"
#include <iostream>
int getTest2(); // forward declaration
int main()
{
   std::cout << test1;
   std::cout << getTest2();
}; 
```

它编译得很好并产生了预期的输出（1 和 2），即使我们包含了两个都定义 HEADER_H 的文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T03:56:36.157

您需要`b.h`在所有使用`b.h`. 所以你需要`#include <b.h>`在两个文件中都放一个。为避免`b.h`多次加载，您需要指令`#ifdef`。在你的情况下：

bh

```
#ifndef B_H
#define B_H

typedef struct{
    int x, y;
}myStruct;

void funct1(myStruct);
void funct2(myStruct);

#endif 
```

和公元前：

```
#include "b.h"

void funct1(myStruct x)
{
    //do something
}

void funct2(myStruct y)
{
     //do something
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T03:53:47.387

正确的编码会让你在 bc 中包含 bh

这是一个应该可以工作的标头守卫：

```
#ifndef B_H_INCLUDED
#define B_H_INCLUDED
//header file
#endif 
```

将您的声明放在评论所在的位置，并包括您需要的任何地方。

编辑我理解的方式是`gcc`先编译 bc，因为 ac 依赖于 bc 但是当它先编译 bc 时， bh **has not been included**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T04:00:23.490

你需要`#include`bc 中的 bh 它不仅仅是 ac 的接口，bc 也需要知道它自己的代码的相同定义。您在 bc 中不包括 bh 的原因是错误的。每个 .c 文件都与其他每个 .c 文件分开编译。当编译器用 ac 完成时，它会用 bc 重新开始。ac 包含 bh 并不重要，因为 bc 甚至没有 ac 存在的概念。标头保护的目的是防止在编译给定 .c 文件时多次包含 .h 文件时重复处理该文件。如果没有守卫，声明将被编译多次，导致现有符号的多个声明错误。

# linux - 由于 glibc 版本导致的基于 Qt 的应用程序二进制兼容性问题

> ID：14290027
> 
> 赞同：2
> 
> 时间：2013-01-12T03:48:01.043
> 
> 标签：linux, qt, glibc

我正在使用 glibc 2.15 的 ubuntu 12.04 LTS 上开发和构建基于 QT 的应用程序。该应用程序的二进制版本可在某些 linux 发行版上运行，但不能在其他发行版上运行。主要问题之一是由不同版本的 glibc 与不同的 linux 发行版引起的兼容性问题。例如，它不适用于使用 glibc 2.12 的 centos 或使用 glibc 2.10 的 wary pup。

无论如何要在 ubuntu 12.04 LTS 上针对较低版本的 glibc 构建 QT？还是我必须切换到较低版本的 Ubuntu 才能完成所有开发工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T06:44:28.847

是的，支持旧 glibc 的最简单方法是在旧设置上构建应用程序。

我在 CentOS 5.8（使用 gblic 2.5）上构建复杂的 Qt 应用程序（包括使用 QtWebKit）没有问题。该应用程序在 Ubuntu 上运行良好，与 8.04 (Hardy Heron) 一样老。

# php - NextGEN Gallery 模板加载页面两次。？

> ID：14290028
> 
> 赞同：1
> 
> 时间：2013-01-12T03:48:14.433
> 
> 标签：php, css, wordpress, loading, nextgen-gallery

我正在使用 NextGEN Galleryview 模板 Wordpress 插件。

当我加载页面时，它首先加载一个非常高的空白文档。大约 3000 像素的高度。

然后它消失了，它用正确的高度/元素加载了轮播。

我希望它不要重复加载，尽管我无法确定它发生的位置和方式。我将它与另一个 NextGEN 画廊模板（正确加载）进行了比较，FireBug 显示它们具有相同的脚本/图像、CSS 和加载时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T05:56:40.610

发现了问题。

在galleryview.css 文件中有这个关键的位：

```
 /* IMPORTANT - Change '#photos' to the ID of your 
    gallery list to prevent a flash of unstyled content */

    #photos{ visibility: hidden; } 
```

不知道为什么这里没有使用 JS 文件中的默认 ID。

无论如何，JS文件中的画廊列表没有ID，只有一个类。将代码更改为：

```
 #myGallery{ visibility: hidden; }
   .galleryview { visibility: hidden; } 
```

消除无样式内容的闪烁。#myGallery 是实际 ID，更改其可见性似乎可以使页面加载速度更快而没有副作用，所以我并没有推我的运气。原样离开。

希望这对其他人有帮助。解决这个问题花了两天时间。

# node.js - 我无法让 mongoose/node.js 正确检索数据。我究竟做错了什么？

> ID：14290030
> 
> 赞同：1
> 
> 时间：2013-01-12T03:48:18.923
> 
> 标签：node.js, mongoose

我正在尝试让 node.js 将表中的数据写入控制台，我的其他表工作。

每当我尝试时，我都会得到以下输出：

```
NO ERROR!
QUERY:{"emitted":{"complete":[[]]},"_events":{}} 
```

我在架构定义中遗漏了什么吗？任何帮助，将不胜感激。
- 埃里克

以下来自 mongo shell：

```
> db.userAssessments.find({})
{ "accountId" : "509683edcb884b0000000001", "created" : ISODate("2013-01-12T03:31:20.723Z"), "_id" : ObjectId("50f0d9084469766bb7000001") } 
```

这是我的js：

```
var userAssessmentsSchema = new mongoose.Schema({
    accountId : String,
    created : Date,
    id: String
});

ANALYZER.userAssessments = mongoose.model('userAssessments', userAssessmentsSchema);
ANALYZER.analyzeAssessment = function() {
    var query = ANALYZER.userAssessments.find({}).exec(function(err, ass) {
        if (!err) {
            console.log("NO ERROR!");
            console.log("QUERY:" + JSON.stringify(query));
        } else {
            console.log("ERROR!");
        }
    });
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T03:53:26.800

查询的结果作为第二个参数（在您的代码中）`find`传递给回调。您分配给的返回值是从返回的对象。`exec``ass``query`[`Promise`](http://mongoosejs.com/docs/api.html#promise_Promise)[`exec`](http://mongoosejs.com/docs/api.html#query_Query-exec)

**更新**

您的另一个问题是，如果您不提供模型名称，Mongoose 会将模型名称[复数并小写以派生集合名称。](https://github.com/LearnBoost/mongoose/blob/master/lib/utils.js#L22)要使其使用`userAssessments`集合而不是`userassessments`您需要在`mongoose.model`调用中提供该集合名称。

所以你的代码应该是这样的：

```
ANALYZER.userAssessments = mongoose.model(
    'userAssessments', userAssessmentsSchema, 'userAssessments');

ANALYZER.analyzeAssessment = function() {
    ANALYZER.userAssessments.find({}).exec(function(err, ass) {
        if (!err) {
            console.log("NO ERROR!");
            console.log("QUERY:" + JSON.stringify(ass));
        } else {
            console.log("ERROR!");
        }
    });
}; 
```

# javascript - JavaScript 中的对象排序

> ID：14290036
> 
> 赞同：0
> 
> 时间：2013-01-12T03:50:02.557
> 
> 标签：javascript, object

假设我们有 2 个这样的 JavaScript 对象：

```
object1 = {
  test: {},
  test2: {},
  users: {},
  colors: {},
  dates:{}
}

object2 = {
  test2: {},
  dates:{},
  test: {},
  colors: {},
  users: {}
} 
```

你怎么能把 object1 到 object2 的顺序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T03:52:30.650

JavaScript 对象没有顺序的概念。顺序仅适用于数组。此外，没有人使用数字索引访问 JavaScript 对象。您可以通过属性名称访问它。你已经知道这个名字了。

您问题中的两个对象具有相同的属性。由于值为空，因此两个对象实际上是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T03:52:15.110

你不能这样做，对象根据定义是无序的。
如果你想要它使用一个数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T04:14:36.747

嗯，主要是一个带有 JavaScript 特定扭曲的基本排序问题，因为这在许多语言中是不可能的。我确信这不是最有效的实现，但假设两个对象共享相同的属性，下面应该完成这项工作

```
var i = 0;
for(var arg in object1) {
    if (object2[arg]) {
        var temp = object2[arg];
        delete object2[arg];
        object2[arg] = temp;
    }
} 
```

# ios - Webview在Phonegap中根据请求排除php文件

> ID：14290038
> 
> 赞同：1
> 
> 时间：2013-01-12T03:50:29.667
> 
> 标签：ios, objective-c, cordova

好的，所以我正在开发一个 cordova 应用程序，我正在使用下面的这段代码来防止外部 URL 在 Web 视图中打开。但我有例外允许来自谷歌的 iframe 加载。我的问题是我的表单脚本现在没有正确处理，那么我将如何添加一个异常来防止 php 文件被发送到外部应用程序。

我还希望邮件应用程序处理 mailto: urls。

谢谢您的帮助

```
- (BOOL) webView:(UIWebView*)theWebView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType

{

NSURL *url = [request URL];
    NSString *host = [request.URL host];

if(host != NULL || host != nil){
    if ([host rangeOfString:@"google.com"].location != NSNotFound) {
        return YES;
    }else{
        if ([[url scheme] isEqualToString:@"https"] || [[url scheme] isEqualToString:@"https"] || [[url scheme] isEqualToString:@"mailto:"]) {
            [[UIApplication sharedApplication] openURL:url];
            return NO;
        }
        else {
            return [ super webView:theWebView shouldStartLoadWithRequest:request navigationType:navigationType ];
        }
    }
}

return [super webView:theWebView shouldStartLoadWithRequest:request navigationType:navigationType];
} 
```

# objective-c - 为什么在执行“[pool drain]”之后，它永远不会返回给调用者？

> ID：14290039
> 
> 赞同：0
> 
> 时间：2013-01-12T03:50:45.313
> 
> 标签：objective-c, cocoa, gnustep

这是我的代码模板：

```
int main(int argc, char *argv[]) {
    // create an autorelease pool
    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
    // make sure the application singleton has been instantiated
    NSApplication * application = [NSApplication sharedApplication];
    // instantiate our application delegate
    AppDelegate * applicationDelegate =
                          [[[AppDelegate alloc] init] autorelease];
    // assign our delegate to the NSApplication
    [application setDelegate:applicationDelegate];
    // call the run method of our application
    [application run];
    // drain the autorelease pool
    [pool drain];
    // execution never gets here ..
    return 0;
} 
```

“[pool drain]”后跟“return 0”为什么永远不会被执行。

但是，我发现了另一个 gnustep 官方示例，它做同样的事情。

```
int
main(int argc, char **argv, char** env)
{
  id pool = [NSAutoreleasePool new];
  NSApplication *theApp;

#if LIB_FOUNDATION_LIBRARY
  [NSProcessInfo initializeWithArguments:argv count:argc environment:env];
#endif

  theApp = [NSApplication sharedApplication];
  [theApp setDelegate: [browserController new]];
  [theApp run];

  [pool release];

  return 0;
} 
```

为了证明它“[theApp run]”永远不会回来，我已经完成了在“[theApp run]”之后立即添加无限循环的练习。但它永远不会被执行。为什么 GNUSTEP 官方的示例会这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T04:00:25.703

您确定这`[pool drain]`实际上也被调用了吗？`[application run]`除非被调用，否则不会返回`[NSApp stop]`（这很少见）。如果更常见`[NSApp terminate]`的被称为，如[文档所说](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/NSApplication/terminate%3a)：

> 不要费心将最终的清理代码放在应用程序的 main() 函数中——它永远不会被执行。如果需要清理，请在委托的 applicationWillTerminate: 方法中执行清理。

一旦您将应用程序交给`run`，您通常不会取回它。

# php - 将数组值和单个表单值插入所有行 PHP MYSQL

> ID：14290049
> 
> 赞同：0
> 
> 时间：2013-01-12T03:52:39.680
> 
> 标签：php, mysql

有人可以告诉如何将此插入写入数据库吗？下面的代码是我想要完成的一个例子。我想为有多个孩子的家庭制作一个表格。他们提交他们将在数据库中共享的姓氏和一个 ID。请参阅下面的代码...

表单输入

```
<input type="text" name="fname[]"/>
<input type="text" name="lname[]"/>
<input type="text" name="fname[]"/>
<input type="text" name="lname[]"/>
<input type="text" name="family_id"/> 
```

这是我遇到麻烦的地方。我可以提交姓氏，但只有第一个（行）“name”也存储了“family_id”。

PHP

```
 foreach($_POST['fname'] as $key => $fname) {
            $lname = $_POST['lname'][$key];
                            $family_id = $_POST['family_id'][$key];

            $query = mysql_query("INSERT INTO Table (FName, LName, Family_ID ) VALUES ('{$fname}', '{$lname}', $_POST['family_id'])"); 
        } 
```

我很感激任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T04:00:52.440

`{}`到处失踪`$_POST['family_id']`。
`family_id`不是数组。

所以你得到的第一次迭代

```
$_POST['family_id'][0]; // gets the id 
```

第二

```
$_POST['family_id'][1]; // gets undefined index 
```

要修复它，请执行以下操作。

`foreach`在循环之前添加以下代码并将其连接`$family_id`到查询中，就像您对其他代码所做的那样。

```
$family_id = $_POST['family_id']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T04:02:23.900

尝试这个：

```
extract($_POST);
$total=count($fname);

for($i=0;$i<count($total);$i++)
{

$fname=$fname[$i];
$lname=lfname[$i];

 $query="INSERT INTO Table (FName, LName, Family_ID ) VALUES ('{$fname}', '{$lname}', $family_id)";

} 
```

# apache - 使用浏览器语言和非 www 域的 mod_rewrite

> ID：14290051
> 
> 赞同：5
> 
> 时间：2013-01-12T03:53:11.033
> 
> 标签：apache, mod-rewrite

我使用以下规则根据浏览器语言将域重定向到网站的 EN 版本：

```
RewriteCond %{HTTP:Accept-Language} ^en.*$ [NC]
RewriteCond %{REQUEST_URI} ^/$ [NC]
RewriteCond %{QUERY_STRING} !(^q\=) [NC]
RewriteRule ^(.*)$ /en [L,R=302] 
```

这适用于 www.domain.com，但无法从 now-www 重定向到 www。例如，无法将[http://domain.com](http://domain.com)重定向到[http://www.domain.com/en](http://www.domain.com/en)，这就是我想要实现的。

我应该在规则中添加什么？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T22:22:11.063

要将非 www 重定向到 www，请将此规则集添加到问题中的规则集之前，如下所示：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^domain\.com$ [NC]
RewriteRule ^(.*)$ http://www.domain.com/$1 [L,R=301]

#This is the rule set in the question:
RewriteCond %{HTTP:Accept-Language} ^en.*$ [NC]
RewriteCond %{REQUEST_URI} ^/$ [NC]
RewriteCond %{QUERY_STRING} !(^q\=) [NC]
RewriteRule ^(.*)$ /en [L,R=302] 
```

既然你说除了`www`问题之外实际的规则集工作正常，我没有修改或测试它。

顶级规则规则的作用是将 www 插入所有 URL。就这样。它独立于您问题中的规则，但如果您只想将该转换限制为 EN 语言，请移动此行：

`RewriteCond %{HTTP:Accept-Language} ^en.*$ [NC]`

在最后一个规则集中，到第一个，像这样：

```
....
RewriteCond %{HTTP_HOST} ^domain\.com$ [NC]
RewriteCond %{HTTP:Accept-Language} ^en.*$ [NC]
.... 
```

**选项**

要重定向所有与先前语言规则不匹配的请求，只需将以下几行放在底部，在所有语言规则之后。

```
RewriteCond %{REQUEST_URI} ^/$ [NC]
RewriteCond %{QUERY_STRING} !(^q\=) [NC]
RewriteRule ^(.*)$ /en [L,R=302] 
```

默认情况下，它将所有传入请求重定向到英语部分。

因此，您的 .htaccess 文件应如下所示：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^domain\.com$ [NC]
RewriteRule ^(.*)$ http://www.domain.com/$1 [L,R=301]

RewriteCond %{HTTP:Accept-Language} ^sv.*$ [NC]
RewriteCond %{REQUEST_URI} ^/$ [NC]
RewriteCond %{QUERY_STRING} !(^q\=) [NC]
RewriteRule ^(.*)$ /sv [L,R=302]

RewriteCond %{HTTP:Accept-Language} ^nb.*$ [NC]
RewriteCond %{REQUEST_URI} ^/$ [NC]
RewriteCond %{QUERY_STRING} !(^q\=) [NC]
RewriteRule ^(.*)$ /nb [L,R=302]

RewriteCond %{REQUEST_URI} ^/$ [NC]
RewriteCond %{QUERY_STRING} !(^q\=) [NC]
RewriteRule ^(.*)$ /en [L,R=302] 
```

我建议你全部替换`R=302`为`R=301`. 更适合 SEO 目的。

# wcf - 执行 WCF 服务应用程序时出现 WcfSvcHost BadImageFormatException

> ID：14290055
> 
> 赞同：1
> 
> 时间：2013-01-12T03:53:30.103
> 
> 标签：wcf, visual-studio-2012, nettcpbinding, servicehost, badimageformatexception

好的，我正在使用 WCF 构建客户端服务器应用程序，NetTcpBinding 由 WinForms 应用程序托管和使用。我在 Windows 7 Ultimate x64 中使用 VS.2012 Ultimate。

我可以启动托管服务的winform，我可以启动服务。现在，在客户端，我启动客户端应用程序并立即得到一个 Microsoft WCF 服务主机窗口，告诉我：

```
System.BadImageFormatException. Could not load file or assembly X.Services.dll ... an
attempt was made to load a program with an incorrect format.
at System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, IntPtr pPrivHostBinder, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks)
at System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity, RuntimeAssembly reqAssembly, StackCrawlMark& stackMark, IntPtr pPrivHostBinder, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks)
at System.Reflection.Assembly.Load(AssemblyName assemblyRef)
at Microsoft.Tools.SvcHost.ServiceHostHelper.LoadServiceAssembly(String svcAssemblyPath) 
```

现在，客户端和服务器 WinForm 项目都有对定义服务（接口和实现类）的 X.Services.dll 的引用。那么，为什么服务器不抱怨呢？

此外，我已确保此解决方案中的所有项目都将其调试和发布配置设置为相同的 .NET Framework (4.5) 和相同的目标平台（x86 而不是任何 CPU）。

此外，唯一的外部程序集引用（实用程序库 DLL）也是使用相同的 VS 版本构建的，用于相同的框架 (4.5) 和相同的平台 (x86)。

那么这种糟糕的图像格式是从哪里来的呢？该解决方案有自己的外部库副本（以确保它具有正确的平台和框架配置）并且项目文件已被修改，以便它采用相应的发布/调试版本的外部程序集。

根据异常的提示，我使用 regedit 在 HKLM 中添加一个键以启用程序集加载/绑定日志记录并获得以下额外信息：

```
=== Pre-bind state information ===
LOG: User = DOMAIN\Username
LOG: Where-ref bind. Location =    D:\Sources\My.Net\Code\T\X.Services\bin\Debug\X.Services.dll
LOG: Appbase = file:///D:\Sources\My.Net\Code\T\X.Services\bin\Debug\X.Services/bin/Debug
LOG: Initial PrivatePath = NULL
Calling assembly : (Unknown).
===
LOG: This bind starts in LoadFrom load context.
WRN: Native image will not be probed in LoadFrom context. Native image will only be      probed in default load context, like with Assembly.Load().
LOG: Using application configuration file: D:\Sources\My.Net\Code\T\X.Services\bin\Debug\X.Services.dll.config
LOG: Using host configuration file: 
LOG: Using machine configuration file from  C:\Windows\Microsoft.NET\Framework64\v4.0.30319\config\machine.config.
LOG: Attempting download of new URL file:///D:\Sources\My.Net\Code\T\X.Services\bin\Debug\X.Services.dll.
ERR: Failed to complete setup of assembly (hr = 0x8007000b). Probing terminated. 
```

这对我来说没有任何用处...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T09:10:02.933

问题可能在：

> 日志：使用 C:\Windows\Microsoft.NET\Framework ***64*** \v ***4.0*** .30319\config\machine.config 中的机器配置文件。

似乎应用程序在 .NET 4.0 x64 下启动。尝试分析您的程序集（例如，通过 .NET Framework SDK 中的 corflags.exe）以确定所需的平台和 .NET 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-11T13:02:54.743

我不知道这是否仍然有效，但这与[此线程](https://stackoverflow.com/questions/13120433/wcf-service-library-badimageformatexception-with-32-bit-dll)中的问题相同。解决方案是像[这里](https://coding.abel.nu/2012/04/debugging-a-wcf-service-using-a-32-bit-dll/)一样在 x86 中运行每个进程。

创建第二个 WcfSvcHost 作为 x86 变体是最简单的方法，如下所示：

> 以管理员权限启动 cmd 环境：
> 
> C：\
> 
> > cd "c:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE"
> 
> c:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE
> 
> > 复制 WcfSvcHost.exe WcfSvcHost32.exe 已复制 1 个文件。
> 
> c:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE
> 
> > corflags /32BIT+ /Force WcfSvcHost32.exe Microsoft (R) .NET Framework CorFlags 转换工具。版本 4.0.30319.1 版权所有 (c) Microsoft Corporation。版权所有。
> 
> corflags : 警告 CF011 : 指定的文件是强名称签名的。
> 使用 /Force 将使该图像的签名无效，并要求程序集被退出。
> 
> c:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE

然后您可以使用以下命令托管您的项目：

> WcfSvcHost32.exe /service:%enteryourservicenamehere%.dll /config:%yourconfigfilehere.dll.config%

这对我有用。

# php - 移动浏览器 (android os) 中的错误下载文件自动转换为 .zip？

> ID：14290059
> 
> 赞同：0
> 
> 时间：2013-01-12T03:53:51.257
> 
> 标签：php, android

当我使用链接时`<a href="test.apk">download</a>`结果下载OK

但是当我使用表单提交时是错误的

这是代码：

```
<a href="download.php">download</a> 
```

在`download.php`我使用代码：

```
...
    header("Pragma: public");
    header("Expires: 0");
    header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
    header("Content-Type: application/vnd.android.package-archive");
    header("Content-Description: File Transfer");
    header("Content-Disposition: attachment; filename='test.apk';" );
    readfile('test.apk');
... 
```

当点击下载是从`test.apk`自动转换到`test.zip`（我使用android 2.3），如何修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:49:49.827

mime 类型发生此错误：要纠正此错误，请在 .htaccess 中添加此代码

```
AddType application/vnd.android.package-archive 
```

# java - 用swing调用父窗体的方法

> ID：14290060
> 
> 赞同：1
> 
> 时间：2013-01-12T03:53:57.657
> 
> 标签：java, swing, constructor, jbutton, actionlistener

我有一个名为 JFrame 的表单`StaffListMain`，其中一个按钮单击事件中有以下代码：

```
private void btnManageLeaveActionPerformed(java.awt.event.ActionEvent evt) {
    // Open the new form and pass the selected staff member
    ManageLeave manageLeaveForm = new ManageLeave(staff.getStaffAt(lstStaff.getSelectedIndex()));
    manageLeaveForm.setVisible(true);
} 
```

该类`StaffListMain`还有一个方法调用`writeToFile()`，我想在其他类中使用它，例如上面代码片段中的那个（`ManageLeaveForm`）。

因此，我需要一种方法来调用另一种形式的方法。这可能吗，还是我必须`writeToFile()`分成另一个班级，然后根据需要在每个班级中使用它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T04:06:43.193

您可以将当前实例的引用传递给 ManageLeave 实例，方法是为它的构造函数提供一个 StaffListMain 字段并将其传递`this`给该字段。然后，如果需要，您可以从 ManageLeave 对象中调用调用 StaffListMain 对象的方法。

# java - 多个 JButton 实例的 ActionListener

> ID：14290061
> 
> 赞同：2
> 
> 时间：2013-01-12T03:54:02.630
> 
> 标签：java, swing, event-handling, awt, actionlistener

在以下代码中添加`ActionListener`两个时出现问题。`JButtons`

当我单击这两个按钮（b1，b2）时，我想分别打印 1 和 2

但我只能打印 1 或 2。

你能给我一个解决这个问题的方法吗？

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

class CCCc extends JFrame implements ActionListener{
    JButton b1,b2;
    JTextField f1;

CCCc(){
    setSize(500,200);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setLocationRelativeTo(null);
    setResizable(false);
    f1=new JTextField();
    f1.setHorizontalAlignment(JTextField.RIGHT);
    add("North",f1);
    JPanel p1=new JPanel(new GridLayout(1,2));
    add(p1);

    b1=new JButton("1");    
    b1.addActionListener(this); 
    b2=new JButton("2");
    b2.addActionListener(this);
    p1.add(b1);
    p1.add(b2);

    setVisible(true);
}
public void actionPerformed(ActionEvent evt){
    String s=f1.getText();
    f1.setText(s+"1");
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T04:02:00.567

不必要地对类进行子类化是一个坏主意，例如`JFrame`and 。`Thread`不恰当地实现接口也是一个坏主意。（第三，尝试查看`source`事件的 是一个坏主意，而且`command`也很讨厌）

我建议为听众切换到匿名内部类。您会注意到两个按钮都有共同的代码，因此可以将其分解为只需要一个内部类的方法。持有“1”或“2”的变量通常会通过`final`封闭匿名内部类的方法中的本地字段来引用。但是，您可以使用具有以通常方式访问的字段的非匿名类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T03:56:43.227

ActionEvent 参数有很多有用的信息可供您使用，包括对按下按钮的引用——通过`getSource()`或通过`getActionCommand() 对按钮文本的引用。因此，您可以简单地从 ActionEvent 中获取 actionCommand 并使用它：

```
public void actionPerformed(ActionEvent evt){
    String s=f1.getText();
    f1.setText(s+ evt.getActionCommand());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T04:09:48.313

我认为这种情况是你想知道在哪个`JButton`A`ctionEvent`被触发，如果是`b1`，你必须将 a 加入`"1"`到文本字段 else`"2"`中。如果是上述情况，请执行以下操作：

```
public void actionPerformed(ActionEvent evt){
JButton temp=evt.getSource();
String s=f1.getText()+temp.getText();
f1.setText(s);
} 
```

如果情况不是上述情况，那我说对不起

# jquery - 拉取网页上的价格以及每个价格的字体大小

> ID：14290066
> 
> 赞同：1
> 
> 时间：2013-01-12T03:55:34.380
> 
> 标签：jquery, regex

我正在 jquery 中创建一个书签，它应该能够在页面上找到价格并拉出每个价格被替换的字体大小。我最大的困难是找到一种方法来使用 :contains 正则表达式。看来 :contains 只能与精确文本一起使用。这就是我开始的。本质上，我想按价格定价并获得字体大小。

```
jQuery(":contains('" + jQuery('body').text().match(/[$€£]\d{1,3}(,?\d{3})?(\.\d{2})?/g)+ "')").each( function() { 
var size = parseInt( jQuery(this).css( 'fontSize' ), 10 ); 
results.push({ size: size, price: price}); 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T04:11:59.960

我怀疑您可以通过先搜索货币符号`$.grep()`或`$.filter()`使用正则表达式来获得结果。让我把一个 jsFiddle 放在一起进行演示（我不是每个书签，所以我不确定如何从一个书签中引用 jQuery）。

**编辑 2**

以下尝试获取最内部的元素`$.text()`并忽略父元素。同样，我怀疑该方法不能完美地处理诸如具有多个内部元素的段落标签之类的东西，两者都有价格字符串。但它比下面的更进一步。

你会在小提琴中看到一些更冗长的东西，但以下是使它工作的部分。

```
function containsSelector(value) {
  return ':contains(' + value + ')';
}

function groupContainsSelector(list) {
  return $.map(list, containsSelector).join(',');
}

function groupExpression(list) {
  var expression = '[' + list.join('') + ']\\d{1,3}(,?\\d{3})?(\\.\\d{2})?';

  if (!expressions.hasOwnProperty(expression)) {
    expressions[expression] = new RegExp(expression, 'g');
  }

  return expressions[expression];
} 
```

请注意，我缓存了`RegExp`，所以我没有要求我已经创建了一个新的。

```
function hasCurrency($el, currency, test) {
  if ($el.children(currency).size()) {
    return false;
  }

  return !!$el.text().match(test);
} 
```

使用这些函数，我们可以根据情况使用以下其中一种：

```
$contains = $(currencieselector, document.body);

$filter = $contains.filter(function (i, el) {
  return hasCurrency($(el), currencieselector, groupexp);
});

$grep = $.grep($contains, function (el, i) {
  return hasCurrency($(el), currencieselector, groupexp);
});

$map = $contains.map(function () {
  return !hasCurrency($(this), currencieselector, groupexp) || this;
}); 
```

[http://jsfiddle.net/userdude/CvYpx/9/](http://jsfiddle.net/userdude/CvYpx/9/)

我使用 a`setTimeout`将应用到每个方法中找到的元素的每一层样式。除了 之外`$contains`，其他三个是相同的结果。我还强调了每个教派：

```
$.each(currencies, function (index, val) {
  $contains.filter(function (i, el) {
    return hasCurrency($(el), containsSelector(val), groupExpression([val]));
  })
  .addClass(denominations[index]);
}); 
```

**编辑**

这或多或少是我得到的，有一些人为的例子：

```
<p>Franc: £58,00</p>
<aside>No price</aside>
<p>Dollar: $8.08</p>
<p>Euro: €5.34</p>
<p>No price</p>
<p>SPAN price: <span>€3,00</span></p>
<p>STRONG: <strong>£73.93</strong></p>
<p>EM: <em>$73.93</em></p>

var $contains = $(':contains($),:contains(€),:contains(£)', document.body),
    regex = /[$€£]\d{1,3}(,?\d{3})?(\.\d{2})?/g,
    $filter,
    $grep;

$grep = $.grep($contains, function(n, i){
    console.log($(n).text().match(regex), $(n).text());
    return !!$(n).text().match(regex);
});

$filter = $contains.filter(function(n, i){
    console.log($(i).text().match(regex));
    return !!$(i).text().match(regex);
});

console.log($contains);
console.log($filter);
console.log($grep); 
```

[http://jsfiddle.net/userdude/CvYpx/](http://jsfiddle.net/userdude/CvYpx/)

请注意，在结果中同时找到 a`parent`和 a存在问题`child`，我不确定您是否要这样做。另外，我不擅长的正则表达式，所以没有评论。所以它并不完美，但它是`$.grep()`and的一般想法`$.filter()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T04:02:59.450

您可能需要考虑一种不同的方法：获取页面上的所有文本节点，并且对于与您的正则表达式匹配的每个节点，获取父节点的计算样式的字体大小。这可能看起来效率低下，但实际上并非如此：jQuery 已经必须执行类似的操作来评估您的`contains`查询。

# c++ - 无法将重载函数指针转换为成员函数指针？

> ID：14290071
> 
> 赞同：2
> 
> 时间：2013-01-12T03:56:30.473
> 
> 标签：c++, templates, overloading

我有如下代码

```
class A
{
public:
    int Key() const;
};

class B : public A
{};

template<class T, int (T::*MemFunction)() const>
class TT
{
public:
    int Get() const               {return (m_t.*MemFunction)();}

private:
    T m_t;
};

TT<B, &B::Key> t; // Wrong, cannot convert overloaded function
                  // to int (T::*MemFunction)() (VS2010) 
```

为什么以及如何以类似的方式工作？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T05:21:32.730

billz 已经给出了答案，但我会尽力做出解释。

在 C++ 中，当获取指向成员的指针时，表达式的结果不是指向表达式中存在的类型的成员的指针，而是指向定义该成员的类型的成员的指针。也就是说，表达式`&B::Key`产生`&A::Key`，因为成员函数`Key`是在`A`而不是在 中定义的`B`。这是在 §5.3.1/3 中定义的，很难阅读，但附带了一个示例：

> 一元 & 运算符的结果是指向其操作数的指针。操作数应为左值或限定 ID。如果操作数是一个限定id，命名某个类C的一个非静态成员m，类型为T，则结果的类型为“指向类型T的类C成员的指针”，并且是一个指定C::m的纯右值。否则，如果表达式的类型是 T，则结果的类型为“指向 T 的指针”，并且是一个纯右值，它是指定对象 (1.7) 的地址或指向指定函数的指针。[注意：特别是，类型“cv T”的对象的地址是“指向cv T的指针”，具有相同的cv-qualification。— 尾注] [ 示例：

```
struct A { int i; };
struct B : A { };
... &B::i ... // has type int A::* 
```

> —结束示例]

这意味着您的模板实例化等效于：

```
TT<B, &A::Key> 
```

虽然指向基成员的成员指针可以转换为指向派生类型的成员指针，但对于非类型非模板模板参数的特殊情况，这种转换是不允许的。非类型非模板模板参数的转换在 §14.3.2/5 中定义，对于这种特殊情况说明：

> 对于指向成员函数的类型指针的非类型模板参数，如果模板参数的类型为 std::nullptr_t，则应用空成员指针转换 (4.11)；否则，不适用任何转换。

由于`&A::Key`不能收敛到`int (B::*)() const`，因此模板实例化格式不正确。通过在模板实例化中添加强制转换，您将强制转换在实例化模板之前发生，并且实例化变得有效，因为不需要转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T04:21:16.353

演员表应该使它起作用：

```
typedef int (B::*Key)() const;
TT<Key(&B::Key)> t;
t.Get(); 
```

# xml - 如何通过xslt在xml文件中按名称计算节点？

> ID：14290079
> 
> 赞同：3
> 
> 时间：2013-01-12T03:58:04.440
> 
> 标签：xml, xslt

我是 xsl 的新手。我有以下xml：

```
 <record>
<fruit>Apples</fruit>
<fruit>Oranges</fruit>
<fruit>Bananas</fruit>
<fruit>Plums</fruit>
<vegetable>Carrots</vegetable>
<vegetable>Peas</vegetable>
<candy>Snickers</candy> 
```

我想使用 key 功能并有一个输出文件：

```
 <record> 1
--<fruit> 4
--<vegetable> 2
--<candy> 1 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T04:11:31.600

**就这么简单**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>
 <xsl:key name="kElemByName" match="*" use="name()"/>

 <xsl:template match=
  "*[not(generate-id()=generate-id(key('kElemByName',name())[1]))]"/>

 <xsl:template match="*">
  <xsl:value-of select=
  "concat('&lt;',name(),'> ', count(key('kElemByName',name())),'&#xA;')"/>
  <xsl:apply-templates select="*"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<record>
    <fruit>Apples</fruit>
    <fruit>Oranges</fruit>
    <fruit>Bananas</fruit>
    <fruit>Plums</fruit>
    <vegetable>Carrots</vegetable>
    <vegetable>Peas</vegetable>
    <candy>Snickers</candy>
</record> 
```

**产生了想要的正确结果：**

```
<record> 1
<fruit> 4
<vegetable> 2
<candy> 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T15:02:25.877

要包括连字符（我将使用 Dimitre 的答案作为基础，所以请给他应得的信用），你可以这样做：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="text"/>
  <xsl:key name="kElemByName" match="*" use="name()"/>

  <xsl:template match=
  "*[not(generate-id()=generate-id(key('kElemByName',name())[1]))]">
    <xsl:apply-templates select="*" />
  </xsl:template>

  <xsl:template match="*">

    <xsl:apply-templates select="ancestor::*" mode="hyphens" />

    <xsl:value-of select=
       "concat('&lt;',name(),'> ', count(key('kElemByName',name())),'&#xA;')"/>
    <xsl:apply-templates select="*"/>
  </xsl:template>

  <xsl:template match="*" mode="hyphens">
    <xsl:text>--</xsl:text>
  </xsl:template>
</xsl:stylesheet> 
```

使用原始输入，这会产生：

```
<record> 1
--<fruit> 4
--<vegetable> 2
--<candy> 1 
```

使用更深的嵌套输入，

```
<record>
  <fruit>
    Apples
  </fruit>
  <fruit>
    <citrus>Grapefruits</citrus>
    <citrus>Oranges</citrus>
    <citrus>Lemons</citrus>
  </fruit>
  <fruit>Bananas</fruit>
  <fruit>
    <pitted>Plums</pitted>
    <pitted>Apricots</pitted>
    <pitted>Peaches</pitted>
  </fruit>
  <vegetable>Carrots</vegetable>
  <vegetable>Peas</vegetable>
  <candy>
    <chocolate>Snickers</chocolate>
    <chocolate>Milky Way</chocolate>
    <chocolate>Hersheys</chocolate>
  </candy>
  <candy>
    <hard>Lozenges</hard>
    <hard>Lollipops</hard>
  </candy>
</record> 
```

你得到：

```
<record> 1
--<fruit> 4
----<citrus> 3
----<pitted> 3
--<vegetable> 2
--<candy> 2
----<chocolate> 3
----<hard> 2 
```

怎么样？

# asp.net - Linq to Entity，选择有或没有值的组

> ID：14290080
> 
> 赞同：0
> 
> 时间：2013-01-12T03:58:14.297
> 
> 标签：asp.net, .net, linq, entity-framework-4, linq-to-entities

您好需要一些有关 LINQ 查询的帮助。我有一个名为 Shift 的实体。该实体有几个值字段，但我感兴趣的是`ShiftID (int)`,`ShiftDate (DateTime)`和`GrossMount (decimal(10,2)`. 这需要按月分组（将其绑定到 ASP.NET 中的图表）。

我需要按月分组的过去 12 个月的数据。我在这篇文章中取得了一些进展：[Linq to Entity，选择没有价值](https://stackoverflow.com/questions/11653636/linq-to-entity-selecting-group-without-value)的组，但不是一路。这是我现在的代码：

```
 public IQueryable<Shift> GetPastMonths(int months, string accountNumber)
    {
        _context = new EtaxiEnteties();
        var _date = DateTime.Today;
        var _firstOfMonth = new DateTime(_date.Year, _date.Month, 31);
        var _twelveMonthAgoFirstOfMonth = _firstOfMonth.AddMonths(-12);

        // Generate a collection of the months and years for the last 12 months
        var _monthYears = Enumerable.Range(-12, 12).Select(monthOffset => { var monthDate = _firstOfMonth.AddMonths(monthOffset); return new { y = monthDate.Year, m = monthDate.Month }; });

        var _data = (from _monthYear in _monthYears
                    join _i in
                         (from _i in _context.Shifts.Where(acc => acc.Account.AccountNumber == accountNumber)
                         where _i.ShiftDate >= _twelveMonthAgoFirstOfMonth && _i.ShiftDate < _firstOfMonth
                         group _i by new { y = _i.ShiftDate.Year, m = _i.ShiftDate.Month } into g
                         select new { ShiftID = g.Key, GrossAmount = g.Count() }) on _monthYear equals _i.ShiftID into j
                    from _k in j.DefaultIfEmpty()
                    select new Shift() { ShiftDate = new DateTime(_monthYear.y, _monthYear.m, 1), GrossAmount = _k != null ? _k.GrossAmount : 0 });

        return _data as IQueryable<Shift>;

    } 
```

现在我得到了一个按月分组的 Shift 对象集合作为回报，但仍然缺少 GrossAmount。虽然我从今天开始需要这个（仅从本月的 1 日开始）。相信这是我的主要问题：GrossAmount = g.Count()，但我不确定

那里有任何 LINQ 专家可以推动我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T04:02:18.343

用于`GrossAmount = g.Sum(x => x.GrossAmount)`计算分组 Shift 实体的总 GrossAmount 值。我相信您在 GrossAmount (GrossMount) 属性名称中有错字。

# iphone - 我想加载给定帧大小的第二个视图

> ID：14290083
> 
> 赞同：5
> 
> 时间：2013-01-12T03:59:09.803
> 
> 标签：iphone

![在此处输入图像描述](../Images/19409c926dccd57017854cebcab1621d.png)

我尝试在 MainView 中加载第二个视图并定义帧大小，但不需要查看第二个视图的组件。我设置大小直到它出现。

```
-(IBAction)displayNewView:(id)sender {

    [mrView setFrame:CGRectMake(0,150,320,50)];
    [self.view addSubview:mrView]; 
} 
```

![在此处输入图像描述](../Images/b585184d686bc0464b4d33b91e35c5de.png)

我不想看到第二个按钮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T05:12:25.327

![剪辑子视图](../Images/dc68567335e29f8290247318fc67c5a9.png)

嘿，我通过检查“剪辑子视图”解决了这个问题。

它将裁剪不会显示的视图部分的其余部分。

基本问题的好问题。

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T04:34:07.347

如果您在第二视图上有按钮。然后，当您在主视图上加载第二个视图时，它将显示在视图上。因为它是第二视图的一部分。

# wordpress - 在类别页面中仅显示带有缩略图的帖子标题

> ID：14290084
> 
> 赞同：1
> 
> 时间：2013-01-12T03:59:31.553
> 
> 标签：wordpress, categories

在我的类别页面中显示了完整的帖子。我想让它只发布带有缩略图的标题。我正在使用 wordpress 二十十二主题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T12:34:01.460

保持 `<?php the_title(); ?>`和`<?php the_thumbnail(); ?>`。删除`<?php the_content(); ?>`或`<?php the_excerpt(); ?>`，取决于您拥有的。

# html - html5 video mp4 适用于 safari 但不适用于 ie9

> ID：14290091
> 
> 赞同：0
> 
> 时间：2013-01-12T04:01:00.400
> 
> 标签：html, internet-explorer, video, safari, internet-explorer-9

我遇到了 ie9 和 mp4 视频的问题。如果我在 Safari 中打开页面，mp4 视频可以正常工作，但它们不会在 ie9 中加载。我不知道它可能是什么。

在我的本地 Windows 机器上，html5 视频播放正常，一旦页面进入实时服务器，它们就不再工作了。Opera 和 Firefox 在 OGG 格式下运行良好。Safari 播放 .mp4 格式，但 IE 不会。Internet Explorer 是唯一一个表现异常的浏览器。

我认为这是一个 Mime 类型问题，除了 Safari 与服务器端 .mp4 文件一起使用。

Iv 认为这是一个 Doctype 问题，除了实时站点上的 doctype 与我本地的相同。关于可能导致这种情况的原因，我已经没有想法了。

```
 <video webkitSupportsFullscreen='false' width="960" height="640">
            <source id="mp4" src="/videos/video.mp4" type='video/mp4' />
            <source src="/video/video.ogg" type="video/ogg" />
            <source src="/video/video.webm" type="video/webm" />
            <img src="/images/screenshot.jpg">
        </video> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T04:07:32.350

[HTML5 请](http://html5please.com/#video)为此推荐使用 polyfill。

所以你可以使用这个： http: [//mediaelementjs.com/](http://mediaelementjs.com/)

**注意：**您确定您的 DOCTYPE 尊重 HTML5 语法，如下所示：

```
<!DOCTYPE html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T07:42:15.693

你有`<!doctype html>`定义吗？如果不是，IE9 将以不支持 html5 的怪癖模式运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-14T21:35:43.827

确保为 IE ANYTHING 的 X-UA 兼容性添加元标记！

```
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'> 
```

# django - django ImportError at /admin/ 没有名为 todo 的模块

> ID：14290092
> 
> 赞同：1
> 
> 时间：2013-01-12T04:01:10.367
> 
> 标签：django, admin

我正在按照[http://www.lightbird.net/dbe/todo_list.html](http://www.lightbird.net/dbe/todo_list.html)上的教程来创建一个简单的 todo 应用程序。在其中一个步骤中，我必须修改视图以在“管理员”中添加一项功能，以便从该视图将任务标记为已完成。但是，我在 /admin/ 没有名为 todo 的模块处收到错误 ImportError。

该错误不是从代码中的任何特定行抛出的，所以我不知道如何调试它。我是 Django 的新手。所以我在我的博客中记录了我的错误：http: [//djangounchain.wordpress.com/2013/01/10/tutorial-8-todo-list-app/](http://djangounchain.wordpress.com/2013/01/10/tutorial-8-todo-list-app/)

希望可以有人帮帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T06:16:23.170

您正在注册您的模型`AdminSite`本身`todo/models.py`。

根据[官方 django 文档](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#hooking-adminsite-instances-into-your-urlconf)，您需要`admin.py`在应用程序中创建文件`admin.autodiscover()`才能正常工作。

> 设置 Django 管理员的最后一步是将您的 AdminSite 实例挂接到您的 URLconf 中。通过将给定的 URL 指向 AdminSite.urls 方法来执行此操作。
> 
> 在这个例子中，我们在 URL /admin/ 注册了默认的 AdminSite 实例 django.contrib.admin.site
> 
> ```
> # urls.py
> from django.conf.urls import patterns, url, include
> from django.contrib import admin
> 
> admin.autodiscover()
> 
> urlpatterns = patterns('',
>     (r'^admin/', include(admin.site.urls)),
> ) 
> ```
> 
> 上面我们使用 admin.autodiscover() 来自动加载 INSTALLED_APPS admin.py 模块。

# android - 如何在 Android 中从字节数组创建 OpenGL 纹理

> ID：14290096
> 
> 赞同：7
> 
> 时间：2013-01-12T04:02:08.163
> 
> 标签：android, opengl-es, textures, shader, jogl

我是 OpenGL 的新手。我正在为学术目的在 Android 上制作一个色盲应用程序。我拥有着色器中执行所需操作所需的所有代码，但我仍然必须让着色器能够查看我在 Java 代码中创建的数据。在我的 Java 代码中，我最终得到了一个大小为 262144 的大型 int 数组。我试图尽我所能将这个数组传递给着色器，但它太大了。我被告知，如果我将数据转换为纹理，我可以轻松地将这么多信息传递到着色器中。

我已按照同事的指示将我的 int 数组转换为字节数组，但现在我不知道如何创建 opengl 纹理并将我的字节数据输入其中以供着色器查看和使用。

所以，我需要创建一个 opengl 纹理，用我的数据填充它（最好是字节数组吗？），然后能够在我的着色器中使用该纹理。如果有人可以帮助我，将不胜感激。在看到示例后我工作得很好，而不是解释，因为我非常文盲，但我欢迎任何帮助。

我确实尝试编写一些代码。我最终尝试制作 GLES20.glTexImage2D。我想我可以传入我的字节数组，但它需要一个缓冲区？请给我完成任务所需的所有步骤。

非常感谢！

麦克风

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T15:37:20.673

我认为您需要执行以下操作；

```
byte data[4 * 262144];  // your byte array, 4 * int count
ByteBuffer buffer = ByteBuffer.allocateDirect(4 * 262144);
buffer.put(data);
buffer.position(0);

GLES20.glTexImage2D(GLES20.GL_TEXTURE_2D, 0, GLES20.GL_RGBA, width, height, 0,
                    GLES20.GL_RGBA, GLES20.GL_UNSIGNED_BYTE, buffer); 
```

# cocoa - 在调试自动布局时，自动调整大小的掩码字符串（例如 h=--& v=-&-）是什么意思？

> ID：14290100
> 
> 赞同：53
> 
> 时间：2013-01-12T04:02:57.300
> 
> 标签：cocoa, autolayout

我想他们必须参考支柱和弹簧模型，但我找不到任何提及它们。当您进行`NSLog`约束时，它们有时会显示为未记录类的描述字符串`NSAutoresizingMaskLayoutConstraint`。我注意到至少 3 种不同的类型：`h=---`, `h=--&`,`h=-&-`水平和垂直版本。

在对受限布局进行调试时，它们经常出现。

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2013-01-18T22:56:47.530

如果您指定自动调整掩码而不是约束，或者根本不指定任何约束，则视图将具有 NSAutoResizingMaskLayoutConstraint 约束，而不是 NSLayoutConstraints。如果设置`translatesAutoresizingMaskIntoConstraints`为`NO`，则不会出现这些约束。您不能在单个视图上混合和匹配，否则会出现无法满足的约束错误。

我使用各种自动调整大小掩码组合设置了一个快速测试项目，并且日志记录格式非常简单。

*   `h=`或`v=`表示我们正在讨论水平或垂直方向的约束。
*   `-`表示固定大小
*   `&`表示灵活的大小
*   符号顺序代表边距、尺寸、边距

因此，`h=&-&`意味着你有灵活的左右边距和固定的宽度，`v=-&-`意味着固定的上下边距和灵活的高度，等等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T21:49:36.990

如果您观看 WWDC 2012 上有关掌握自动布局的最佳实践的视频，其中有一个部分，演示者提到这是使用 Autoresizing Masks 而不是约束的视图的语法。没有像 NSLayoutConstraint 那样与这些相关的视觉格式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-03T13:45:42.043

添加到 jrturton 的答案中，我发现了解约束描述的最佳信息是 Visual Format Language 文档，您需要在代码中创建约束。该语言被记录为一种正式的语法，因此可能需要一分钟来吸收所有内容。

[https://developer.apple.com/library/ios/documentation/userexperience/conceptual/AutolayoutPG/VisualFormatLanguage/VisualFormatLanguage.html#//apple_ref/doc/uid/TP40010853-CH3-SW1](https://developer.apple.com/library/ios/documentation/userexperience/conceptual/AutolayoutPG/VisualFormatLanguage/VisualFormatLanguage.html#//apple_ref/doc/uid/TP40010853-CH3-SW1)

给你一个例子：

```
<NSLayoutConstraint:0x10ada8a70 H:|-(44)-[UIButton:0x10ac5dc30]   (Names: '|':UIView:0x10ac60470)> 
```

这是一个水平方向约束 ( **H :) 从父视图 (** *|* ) 到 UIButton的链接为 44 像素命名的父视图是 UIView ( **Names: '|':UIView:** ) — 知道这一点很重要，因为您不需要受直接superview的约束

十六进制值都是 UI 元素的有效地址。当您在所有异常上断点并在约束冲突上暂停时，您可以使用 po 地址查看约束的对象。就我而言：

```
(lldb) po 0x10ac5dc30
<UIButton: 0x10ac5dc30; frame = (44 199; 30 30); opaque = NO; autoresize = RM+BM; layer = <CALayer: 0x10ac5ddf0>>

(lldb) po 0x10ac60470
<UIView: 0x10ac60470; frame = (0 64; 320 504); autoresize = RM+BM; animations = { position=<CABasicAnimation: 0x10ac5ec70>; bounds=<CABasicAnimation: 0x10ac62250>; }; layer = <CALayer: 0x10ac60530>> 
```

# java - 铸造 ArrayList 进入不同的 ArrayList 类型

> ID：14290102
> 
> 赞同：-1
> 
> 时间：2013-01-12T04:03:59.753
> 
> 标签：java, sorting, casting, arraylist

我有一个采用 ArrayList<Comparable> 的排序方法，使用 compateTo() 方法对其进行排序，然后返回排序后的 ArrayList<Comparable>。这里是：

```
public static ArrayList<Comparable> insertionSort(ArrayList<Comparable>
                                                          input) {
    Comparable temp;
    ArrayList<Comparable> result;

    result = (ArrayList<Comparable>) input.clone();

    if (result.size() > 1) {
        for (int k = 1; k < result.size(); k++) {
            for (int j = 1; j <= k; j++) {
                if (result.get(k - j).compareTo(result.get(k - j + 1)) >0){
                    temp = result.get(k - j + 1);
                    result.set(k - j + 1, result.get(k - j));
                    result.set(k - j, temp);
                }
            }
        }
    }

    return result;
} 
```

在我的程序的其他地方，我定义了实现 Comparable 接口的 DVD 对象，创建了一堆，并将它们存储在一个名为 members 的 ArrayList<DVD> 中。现在，当我尝试像这样对成员进行排序时：

```
members = (ArrayList<DVD>) YaSort.insertionSort(members); 
```

我收到以下错误：线程“main”中的异常 java.lang.ClassCastException: [Ljava.lang.Comparable; 无法投射到 [LDVD;

我该如何解决这个问题？谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T04:14:40.807

泛型的要点是您不需要强制转换任何引用类型。此外，混合通用类型和原始类型的稀有类型也很糟糕。按照惯例，通常比其他任何事情都更`List`喜欢。`ArrayList`

您的方法的开头应类似于：

```
public static <T extends Comparable<? super T>> List<T> insertionSort(
    List<T> input
) {
    List<T> result  = new ArrayList<T>(input); 
```

（实际上，为了获得最大性能，可能不是来自对大量数据的插入排序，对数组做一些 hacky 会更好。顺便说一句：您引用的错误似乎来自使用数组而不是集合。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T04:11:26.027

您似乎想要对实现`Comparable`并返回相同对象列表的对象列表进行排序，而不仅仅是`Comparable`. 在这种情况下，您可以使用编译器可以使用的方法参数来确定返回结果的类型：

```
public static <T extends Comparable<? super T>> ArrayList<T>
    insertionSort(ArrayList<T> input) {
    ....
} 
```

然后你可以分配给`members`没有演员：

```
members = YaSort.insertionSort(members); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T04:06:30.247

您需要定义`members`as `ArrayList<Comparable>`，因为即使 DVD 实现/扩展 Comparable`ArrayList<DVD>`也没有实现/扩展`ArrayList<Comparable>`- 这称为协变/逆变，Java 不支持。（实际上在 C# 中是支持的）

# jquery - $.each() 未加载

> ID：14290107
> 
> 赞同：2
> 
> 时间：2013-01-12T04:05:16.647
> 
> 标签：jquery, filereader, each

我有jQuery：

```
$(".upload-cont").bind('drop',function(e){
    var files=e.dataTransfer.files;
    e.preventDefault();
    $.each(files, function(index, file){
        var fileReader = new FileReader();
        fileReader.onload = (function(file) {
            return function(e) { 
            };
        })(files[index]);
   }); 
```

如何将值传递给**$.each()中的文件**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T04:09:25.183

jQuery 不会规范化`dataTransfer`对象，因此您必须从原始事件中访问它

```
var files=e.originalEvent.dataTransfer.files; 
```

# jquery - 如何使 div 的下边距等于其百分比计算的右边距？

> ID：14290112
> 
> 赞同：4
> 
> 时间：2013-01-12T04:05:32.570
> 
> 标签：jquery, html, css, margin

我有一个浮动 div 数组，适合 4 行。它们的宽度和右边距加起来为 100%。然而，它们的底边距是静态的。下面的CSS：

```
.item {
    position: relative;
    float: left;
    height: 200px;
    width: 23%;
    margin-right: 2%;
    margin-bottom: 15px;
    background-color: #ddd;
} 
```

有没有办法检索右边距的值并将其应用于下边距，以便它们始终保持一致？

这是我所拥有的一个示例：http: [//jsfiddle.net/kVZMU/](http://jsfiddle.net/kVZMU/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T04:09:58.853

为什么不使用`margin-bottom: 2%`？

小提琴：http: [//jsfiddle.net/kboucher/uVfRL/](http://jsfiddle.net/kboucher/uVfRL/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T04:13:11.650

```
$('.item').each(function(){
    var val = $(this).css('margin-right');
    $(this).css('margin-bottom', val);  
}); 
```

通过javascript，获取右边距并将其设置为下边距。 [http://jsfiddle.net/cxn9E/](http://jsfiddle.net/cxn9E/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T04:19:25.533

使用 jquery，您可以设置相对于右边距的下边距。将其设置为准备好文档并调整窗口大小，使其始终保持一致。

试试这个

```
var setMargin=function(){
    var divItems=$('div.item');
    var marginRight=divItems.css('margin-right');
    divItems.css('margin-bottom',marginRight)
    }
$(document).ready(function(e) {
setMargin();
$(window).resize(function(e) {
   setMargin(); 
});
}); 
```

检查[http://jsfiddle.net/kVZMU/2/](http://jsfiddle.net/kVZMU/2/)

# git - Git - 将代码推送到两个遥控器

> ID：14290113
> 
> 赞同：495
> 
> 时间：2013-01-12T04:05:36.907
> 
> 标签：git, github

我有**两个**远程 git 存储库。`origin`和`github`

我将我的分支推`devel`送到两个存储库。

```
git push -u origin devel
git push -u github devel 
```

但是，当我这样做的时候。`git push`它只会被推到`github`.

无论如何我可以设置我的两个遥控器，以便我可以使用一个命令将更改推送到两个存储库？

* * *

## 回答 #1

> 赞同：789
> 
> 时间：2013-01-12T04:12:04.173

在最新版本的 Git 中，您可以`pushurl`为给定的遥控器添加多个 s。使用以下内容将两个`pushurl`s 添加到您的`origin`:

```
git remote set-url --add --push origin git://original/repo.git
git remote set-url --add --push origin git://another/repo.git 
```

因此，当您推送到 时`origin`，它将推送到两个存储库。

~~**更新 1**：Git 1.8.0.1 和 1.8.1（可能还有其他版本）似乎有一个错误导致`--add`您第一次使用它时会替换原始 URL，因此您需要使用相同的命令重新添加原始 URL . 这样做`git remote -v`应该显示每个遥控器的当前 URL。~~

**更新 2：** Git 维护者 Junio C. Hamano 解释了它是如何设计的。这样做会为给定的远程`git remote set-url --add --push <remote_name> <url>`添加一个，它**会覆盖**推送的默认 URL。但是，您可以为给定的遥控器添加多个 s，然后您可以使用单个. 您可以在下面验证此行为：`pushurl`**`pushurl``git push`**

 **```
$ git clone git://original/repo.git
$ git remote -v
origin  git://original/repo.git (fetch)
origin  git://original/repo.git (push)
$ git config -l | grep '^remote\.'
remote.origin.url=git://original/repo.git
remote.origin.fetch=+refs/heads/*:refs/remotes/origin/* 
```

现在，如果您想使用单个命令推送到两个或多个存储库，您可以创建一个新的远程命名`all`（如[@Adam Nelson](https://stackoverflow.com/users/26235/adam-nelson)在评论中所建议的那样），或者继续使用`origin`，尽管后一个名称对此目的描述性较差. 如果您仍想使用`origin`，请跳过以下步骤，并在所有其他步骤中使用`origin`而不是。`all`

所以让我们添加一个新的远程调用`all`，我们稍后会在推送到多个存储库时引用它：

```
$ git remote add all git://original/repo.git
$ git remote -v
all git://original/repo.git (fetch)               <-- ADDED
all git://original/repo.git (push)                <-- ADDED
origin  git://original/repo.git (fetch)
origin  git://original/repo.git (push)
$ git config -l | grep '^remote\.all'
remote.all.url=git://original/repo.git            <-- ADDED
remote.all.fetch=+refs/heads/*:refs/remotes/all/* <-- ADDED 
```

然后让我们添加一个`pushurl`到`all`远程，指向另一个存储库：

```
$ git remote set-url --add --push all git://another/repo.git
$ git remote -v
all git://original/repo.git (fetch)
all git://another/repo.git (push)                 <-- CHANGED
origin  git://original/repo.git (fetch)
origin  git://original/repo.git (push)
$ git config -l | grep '^remote\.all'
remote.all.url=git://original/repo.git
remote.all.fetch=+refs/heads/*:refs/remotes/all/*
remote.all.pushurl=git://another/repo.git         <-- ADDED 
```

这里`git remote -v`显示了新`pushurl`的推送，所以如果你这样做`git push all master`，它将只推送`master`分支`git://another/repo.git`。这显示了如何`pushurl`覆盖默认 url (remote.all.url)。

现在让我们添加另一个`pushurl`指向原始存储库：

```
$ git remote set-url --add --push all git://original/repo.git
$ git remote -v
all git://original/repo.git (fetch)
all git://another/repo.git (push)
all git://original/repo.git (push)                <-- ADDED
origin  git://original/repo.git (fetch)
origin  git://original/repo.git (push)
$ git config -l | grep '^remote\.all'
remote.all.url=git://original/repo.git
remote.all.fetch=+refs/heads/*:refs/remotes/all/*
remote.all.pushurl=git://another/repo.git
remote.all.pushurl=git://original/repo.git        <-- ADDED 
```

您会看到`pushurl`我们添加的两个 s 都保留了。现在单`git push all master`人会将`master`分支推送到`git://another/repo.git`和`git://original/repo.git`。

**重要提示**：如果您的遥控器有不同的规则（挂钩）来接受/拒绝推送，则一个遥控器可能会接受它，而另一个则不会。因此，如果您希望它们具有完全相同的历史记录，则需要在本地修复您的提交，以使它们被遥控器接受并再次推送，否则您可能最终会遇到只能通过重写历史记录来修复它的情况（使用`push -f`），这可能会给那些已经从 repo 中提取您以前的更改的人带来问题。

* * *

## 回答 #2

> 赞同：98
> 
> 时间：2013-01-12T04:12:55.313

要使用一个命令发送到两个远程，您可以为其创建一个别名：

```
git config alias.pushall '!git push origin devel && git push github devel' 
```

这样，当您使用 command`git pushall`时，它将更新两个存储库。**

# ios - iOS比较英语和德语字符

> ID：14290116
> 
> 赞同：1
> 
> 时间：2013-01-12T04:06:41.647
> 
> 标签：ios, nsstring, nsstringencoding

我正在使用 NSString 类中可用的字符串搜索“rangeOfString”方法。如果要搜索的字符串和搜索字符串都是英文的，我可以完美地执行搜索。但是，如果搜索字符串包含德语字符，例如变音符号和重音符号（例如德语字符 Ä、Ö、Ü），我将无法进行比较。有人可以建议我比较/搜索英语和德语字符的正确方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T04:17:36.900

`NSDiacriticInsensitiveSearch`在使用 compare/rangeOfString 方法时使用选项。在此处查看[文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/constant_group/Search_and_Comparison_Options)。

> **NSDicriticInsensitiveSearch：**
> 
> 搜索会忽略变音符号。
> 
> 例如，“ö”等于“o”。

# linux - Linux：程序 A 运行程序 B 杀死 A、替换 A 并重新启动 A——继承的打开文件描述符问题

> ID：14290126
> 
> 赞同：2
> 
> 时间：2013-01-12T04:08:19.183
> 
> 标签：linux, process, parent-child, auto-update

我有一个服务器进程，可以给这个服务器进程一个命令来更新自己。它所做的是存储更新，然后使用 system() 在后台运行更新脚本。更新脚本杀死父进程，删除二进制文件，替换它，然后重新启动它。

重新启动的进程由于各种原因失败，因为我试图调试它，但这一次，这是因为我试图分配的 TCP 端口已经在使用中。我猜测子进程继承了打开的端口，然后由更新的服务器进程继承，因此，该端口没有空闲供进程再次分配。

更新脚本的启动方式是这样的：

```
system("/usr/local/bin/update_script.sh > /dev/null 2>&1 &"); 
```

然后脚本执行此操作：

```
killall server_process
rm /usr/local/bin/server_process
cp /tmp/update/server_process /usr/local/bin
server_process > /dev/null 2>&1 & 
```

关于如何完成这项工作的任何建议？有什么方法可以分离更新脚本，以便服务器进程在执行更新之前不再是其父进程？还是让子进程不继承父进程的任何资源？

谢谢。

附录：解决方案是`FD_CLOEXEC`在每个打开的文件描述符上进行设置。不幸的是，其中一些 fd 被埋在库中，我必须认真地破解才能使它们设置`FD_CLOEXEC`。不知何故，我需要`FD_CLOEXEC`设置默认值。或者我需要做一些激烈的事情，比如遍历所有打开的 fd（如何？）和 set `FD_CLOEXEC`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:42:53.930

更改更新脚本的启动方式。

```
switch(fork()) {
case -1: /* error */
    break;
default: /* parent */
    break;
case 0: /* child */
    for (i=3; i<1000; i++) close(i);
    system("/usr/local/bin/update_script.sh > /dev/null 2>&1");
    exit(0);
} 
```

那应该这样做。

# javascript - 如何切换动画元素位置

> ID：14290128
> 
> 赞同：2
> 
> 时间：2013-01-12T04:08:48.027
> 
> 标签：javascript, jquery, repeat

我有一个这样的jQuery：

```
 $(document).ready(function(){
       $("#title").click(function(){                
             $(this).animate({left:'30px'});                
       });
 }); 
```

我的问题是，是否可以在第二次单击时将 jQuery 元素返回到初始位置，并在第三次单击时返回到左：'30px'，依此类推...？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T04:14:13.970

[***演示场***](http://jsbin.com/odobab/5/edit)

```
 // /////////  
  // EXAMPLE 1 
  // Toggle variable value (1,0,1,0...) using Modulo (%) operator

  var c = 0;
  $("#el").click(function(){
      $(this).animate({left: ++c%2 * 50 });                
  }); 
```

```
 // /////////
  // EXAMPLE 2
  // Read current position and use Conditional Operator (?:) 

  $("#el").click(function(){
      var leftAt0 = this.offsetLeft < 1 ; // Boolean (true if at 0px left)
      $(this).animate({left: leftAt0 ? 50 : 0 });                
  }); 
```

```
 // /////////
  // EXAMPLE 3
  // Toggle two values using array.reverse method

  var pos = [0, 50];
  $("#el").click(function(){
      $(this).animate({left: pos.reverse()[0] });                
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T04:12:38.150

```
 $("#title").click(function(){
   var $this = $(this)
   $this.animate({left:$this.position().left ? 0 : '30px'});
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T06:42:27.773

尝试这个

```
$("#title").click(function() {
             $(this).animate({ left: '30px' }, function(e) {
                 $(this).animate({
                     left: '-=30px'
                 });
             });
         }); 
```

# c - 没有结果！！使用 fork() 使用 dup2 使用 2 个管道运行 execlp()

> ID：14290129
> 
> 赞同：2
> 
> 时间：2013-01-12T04:09:06.187
> 
> 标签：c, linux, exec, fork, pipe

我正在编写一个将运行 Linux 命令的 C 程序，例如：
`cat /etc/passwd | grep list | cut -c 1-5`
我没有任何结果
*这里父母等待第一个孩子（child_pid）完成；
第一个孩子等待第二个（pfils）！
任何的想法？
代码 ：

```
main()
{
    pid_t child_pid;
    int fd[2];
    int pfd[2];
    pipe(pfd);
    child_pid = fork ();

    if (child_pid != 0) 
    {
        wait(child_pid);
        close(pfd[1]);
        dup2(pfd[0],0);
        close(pfd[0]);
        execlp("cut","cut","-c","1-5",NULL);
    }
    else
    {
        pid_t pfils = fork();
        pipe(fd);

        if(pfils == 0)
        {
            close(fd[0]);
            dup2(fd[1],1);
            close(fd[1]);
            execlp("cat", "cat","/etc/passwd",NULL);
        }
        else
        {
            wait(pfils);
            close(fd[1]);
            dup2(fd[0],0);
            close(fd[0]);
            close(pfd[0]);
            dup2(pfd[1],1);
            close(pfd[1]);
            execlp("grep","grep","list",NULL);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T04:28:09.290

```
 pid_t pfils = fork();
    pipe(fd); 
```

Fork 将复制该过程。流程的独立副本。因此，如果您在 fork 之后调用管道，则进程的每个副本都会获得自己的管道。将 pipe() 放在 fork() 之前，它应该可以工作。

# javascript - 如何使用 javascript 在 HTML 列表中显示和隐藏超链接

> ID：14290131
> 
> 赞同：1
> 
> 时间：2013-01-12T04:09:33.750
> 
> 标签：javascript, html, css, list, hyperlink

我正在设计一个网站，并采用了一个简单的 javascript 脚本来在每个菜单标题下显示子链接。

菜单标题存储在一个列表中，每个标题都包含单独的超链接，并使用具有以下类的 CSS 文件显示：

```
.hidden {display: none;}
.unhidden {display: block;} 
```

基于这个javascript函数：

```
function unhide(liID) {
         var item = document.getElementById(liID);
         if (item) {
            item.className=(item.className=='hidden')?'unhidden':'hidden';
         }
        } 
```

这是 HTML 文件的示例：

```
<a href="javascript:unhide('menu1');">First Menu</a>
<li id="menu1" class="hidden"> 
    <ul class="subMenus">
        <li>Sub menu 1 item 1</li>
        <li>Sub menu 1 item 2</li>
        <li>Sub menu 1 item 3</li>
        <li>Sub menu 1 item 4</li>
    </ul>
</li>
<a href="javascript:unhide('menu2');">Second Menu</a>
<li id="menu2" class="hidden"> 
    <ul class="subMenus">
        <li>Sub menu 2 item 1</li>
        <li>Sub menu 2 item 2</li>
        <li>Sub menu 2 item 3</li>
        <li>Sub menu 2 item 4</li>
    </ul>
</li> 
```

该代码有效并且执行良好。但是按照它的编码方式，一旦打开菜单，必须再次单击它才能折叠它。否则，在打开 3 或 4 个菜单后，列表会变得非常长且拥挤。

我的问题是......，在打开一个新菜单以节省空间时，javascript 中关闭以前打开的菜单所需的代码是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T04:18:20.367

我相信这样的事情应该可以工作，尽管不建议将事件处理程序内联，但您实际上希望使用`addEventListener()`javascript 中的函数设置它们：

```
<a href="javascript:void()" id="menu1" onMouseOver="javascript:unhide('menu1');" onMouseOut="javascript:unhide('menu1')">First Menu</a> 
```

这是您如何设置处理程序而不使它们内联：

```
function unhide(liID) {
  return function () {
    var item = document.getElementById(liID);
    if (item) {
      item.className = (item.className == 'hidden') ? 'unhidden' : 'hidden';
    }
  }
}

var menu1 = document.getElementById("menu1");
menu1.addEventListener("mouseover", unhide('menu1'), true);
menu1.addEventListener("mouseout", unhide('menu2'), true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T04:38:23.863

为了在全局变量中保留以前的活动菜单，您可以隐藏以前选择的菜单，以下 js 可能对您有所帮助

```
var activemnu="";
function unhide(liID) {

  var item = document.getElementById(liID);
  if(liID!=activemnu && activemnu!="")
  {
     var activeitem= document.getElementById(activemnu);
     activeitem.className= 'hidden';
  }

  if (item) {
     item.className=(item.className=='hidden')?'unhidden':'hidden';
  }
  activemnu=liID; 
```

}

# c++ - 基类调用的重写函数？

> ID：14290132
> 
> 赞同：0
> 
> 时间：2013-01-12T04:09:44.910
> 
> 标签：c++, inheritance, constructor

我有一个设计为通用的类，可以在任何地方使用，看起来有点像这样：

```
class FixedByteStream {
public:
  FixedByteStream(const char* source)
  {
    size = strlen(source);
    copy(source);
  }

  /* Many more constructors here */

protected:
  void copy(const char* source)
  {
    address = allocate();
    //...
  }

  /* Plus other functions that call allocate() */

  char* FixedByteStream::allocate()
  {
    return (char*)malloc(size);
  }
} 
```

然后我扩展了这个类，以便它可以使用特定于项目的内存池。

```
class PooledByteStream : public FixedByteStream {
public:
  PooledByteStream::PooledByteStream() : FixedByteStream() {}

protected:
  char* PooledByteStream::allocate()
  {
    return (char*)PooledByteStream::pool.allocate(size);
  }
} 
```

PooledByteStream 应该与 FixedByteStream*相同*，具有所有相同的函数和构造函数，除了调用 allocate() 时，它应该从内存池中检索指针。

*但是，从未调用过*PooledByteStream::allocate() 。不是来自继承的构造函数，也不是来自其他继承的函数（调用继承的 copy()）。从基类继承的任何东西都完全没有注意到 allocate() 现在应该做一些完全不同的事情。

问题是，我该如何解决？如何使继承的函数调用重写的函数，而不是基类的函数？从基类复制粘贴所有必要的函数会抹杀继承点，所以我假设这不是这里的答案。

**注意：**我不是在寻找关于内存管理的建议，或者其他方法来达到相同的最终结果。这只是一个例子！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T04:20:06.157

您需要声明`allocate()`为虚拟才能覆盖它。但是，基类构造函数不能调用派生类的重写，因为派生类尚未构造，基类析构函数不能调用派生类的重写，因为派生类已经被析构。

如果必须调用`allocate()`基类构造函数，可以使用模板来绕过限制，例如：

```
template<typename Derived>
class FixedByteStreamBase
{
public:
  FixedByteStreamBase(const char* source)
  {
    size = strlen(source);
    copy(source);
  }

  /* Many more constructors here */

protected:
  void copy(const char* source)
  {
    address = Derived::allocate();
    //...
  }

  /* Plus other functions that call allocate() */
};

class FixedByteStream : public FixedByteStreamBase<FixedByteStream>
{
public:
    static char* allocate()
    {
        return (char*)malloc(size);
    }
};

class PooledByteStream : public FixedByteStreamBase<PooledByteStream>
{
public:
    static char* allocate()
    {
        return (char*)pool.malloc(size);
    }
}; 
```

或者：

```
struct MallocAllocator
{
    static char* allocate()
    {
        return (char*)malloc(size);
    }
};

struct PoolAllocator
{
    static char* allocate()
    {
        return (char*)pool.allocate(size);
    }
};

template<typename Allocator>
class FixedByteStreamBase {
public:
  FixedByteStreamBase(const char* source)
  {
    size = strlen(source);
    copy(source);
  }

  /* Many more constructors here */

protected:
  void copy(const char* source)
  {
    address = Allocator::allocate();
    //...
  }

  /* Plus other functions that call allocate() */
};

typedef FixedByteStreamBase<MallocAllocator> FixedByteStream;
typedef FixedByteStreamBase<PoolAllocator> PooledByteStream; 
```

# php - 如何将验证链接发送到电子邮件地址？

> ID：14290134
> 
> 赞同：1
> 
> 时间：2013-01-12T04:09:52.983
> 
> 标签：php, mysql

我有一个 php 登录系统，但它缺乏功能。我想在用户登录之前将激活链接发送到用户的电子邮件地址，他们必须单击链接才能激活帐户。我还想让他们需要新密码，以防他们忘记了他们拥有的密码……除了这两个问题外，其他一切都很好。我是如何做到的？谢谢

**我`users`在数据库表中的内容：**

```
1   id          int(11)       AUTO_INCREMENT    
2   username    varchar(255)        
3   password    char(64)    
4   salt        char(16)    
5   email       varchar(255) 
```

**注册.php**

```
// First we execute our common code to connection to the database and start the session 
require("common.php"); 

// This if statement checks to determine whether the registration form has been submitted 
// If it has, then the registration code is run, otherwise the form is displayed 
if(!empty($_POST)) 
{ 
    // Ensure that the user has entered a non-empty username 
    if(empty($_POST['username'])) 
    { 
        echo "Please enter a username."; 
    } 

    // Ensure that the user has entered a non-empty password 
    if(empty($_POST['password'])) 
    { 
        die("Please enter a password."); 
    } 

    // Make sure the user entered a valid E-Mail address 
    // filter_var is a useful PHP function for validating form input, see:
    if(!filter_var($_POST['email'], FILTER_VALIDATE_EMAIL)) 
    { 
        die("Invalid E-Mail Address"); 
    } 

    $query = " 
        SELECT 
            1 
        FROM users 
        WHERE 
            username = :username 
    "; 

    $query_params = array( 
        ':username' => $_POST['username'] 
    ); 

    try 
    { 
        // These two statements run the query against your database table. 
        $stmt = $db->prepare($query); 
        $result = $stmt->execute($query_params); 
    } 
    catch(PDOException $ex) 
    { 
        // Note: On a production website, you should not output $ex->getMessage(). 
        // It may provide an attacker with helpful information about your code.  
        die("Failed to run query: " . $ex->getMessage()); 
    } 

    $row = $stmt->fetch(); 

    if($row) 
    { 
        die("This username is already in use"); 
    } 

    // Now we perform the same type of check for the email address, in order 
    // to ensure that it is unique. 
    $query = " 
        SELECT 
            1 
        FROM users 
        WHERE 
            email = :email 
    "; 

    $query_params = array( 
        ':email' => $_POST['email'] 
    ); 

    try 
    { 
        $stmt = $db->prepare($query); 
        $result = $stmt->execute($query_params); 
    } 
    catch(PDOException $ex) 
    { 
        die("Failed to run query: " . $ex->getMessage()); 
    } 

    $row = $stmt->fetch(); 

    if($row) 
    { 
        die("This email address is already registered"); 
    } 

    // An INSERT query is used to add new rows to a database table. 
    // Again, we are using special tokens (technically called parameters) to 
    // protect against SQL injection attacks. 
    $query = " 
        INSERT INTO users ( 
            username, 
            password, 
            salt, 
            email 
        ) VALUES ( 
            :username, 
            :password, 
            :salt, 
            :email 
        ) 
    "; 

    $salt = dechex(mt_rand(0, 2147483647)) . dechex(mt_rand(0, 2147483647)); 

    $password = hash('sha256', $_POST['password'] . $salt); 

    for($round = 0; $round < 65536; $round++) 
    { 
        $password = hash('sha256', $password . $salt); 
    } 

    $query_params = array( 
        ':username' => $_POST['username'], 
        ':password' => $password, 
        ':salt' => $salt, 
        ':email' => $_POST['email'] 
    ); 

    try 
    { 
        // Execute the query to create the user 
        $stmt = $db->prepare($query); 
        $result = $stmt->execute($query_params); 
    } 
    catch(PDOException $ex) 
    { 

    } 
    header("Location: login.php"); 
    die("Redirecting to login.php"); 
} 

?> 
<h1>Register</h1> 
<form action="" method="post"> 
Username:<br /> 
<input type="text" name="username"  required value="" /> 
<br /><br /> 
E-Mail:<br /> 
<input type="text" name="email" required value="" /> 
<br /><br /> 
Password:<br /> 
<input type="password" required  name="password" value="" /> 
<br /><br /> 
<input type="submit"  value="Register" /> 
</form> 
```

**登录.php**

```
<?php 

// First we execute our common code to connection to the database and start the session 
require("common.php"); 

$submitted_username = '';
if(!empty($_POST)) 
{ 
    $query = " 
        SELECT 
            id, 
            username, 
            password, 
            salt, 
            email 
        FROM users 
        WHERE 
            username = :username 
    "; 

    // The parameter values 
    $query_params = array( 
        ':username' => $_POST['username'] 
    ); 

    try 
    { 
        // Execute the query against the database 
        $stmt = $db->prepare($query); 
        $result = $stmt->execute($query_params); 
    } 
    catch(PDOException $ex) 
    { 
        die("Failed to run query: " . $ex->getMessage()); 
    } 

    $login_ok = false; 

    $row = $stmt->fetch(); 
    if($row) 
    { 

        $check_password = hash('sha256', $_POST['password'] . $row['salt']); 
        for($round = 0; $round < 65536; $round++) 
        { 
            $check_password = hash('sha256', $check_password . $row['salt']); 
        } 

        if($check_password === $row['password']) 
        { 
            $login_ok = true; 
        } 
    } 

    if($login_ok) 
    { 

        unset($row['salt']); 
        unset($row['password']); 

        $_SESSION['user'] = $row; 

        // Redirect the user to the private members-only page. 
        header("Location: private.php"); 
        die("Redirecting to: private.php"); 
    } 
    else 
    { 
        // Tell the user they failed 
        print("The Username/Password is invalid."); 

        $submitted_username = htmlentities($_POST['username'], ENT_QUOTES, 'UTF-8'); 
    } 
} 

?> 
<h1>Login</h1> 
<form action="login.php" method="post"> 
Username:<br /> 
<input type="text" name="username" required value="<?php echo $submitted_username; ?>" /> 
<br /><br /> 
Password:<br /> 
<input type="password" name="password" value="" required /> 
<br /><br /> 
<input type="submit" value="Login" /> 
</form> 
<a href="register.php">Register</a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T04:20:06.750

通常，要验证电子邮件，您需要在注册时创建一个随机字符串；并将该字符串与新注册用户的 ID 或电子邮件地址一起存储在您的数据库中。然后在您的电子邮件中向他们发送附有该字符串的链接。前任：

```
<a href="http://www.mywebsite.com/activate.php?v=329857320952">Activate your account now</a> 
```

然后，当他们转到该链接时，您使用 $_GET['v'] 从链接中获取该值并检查您的数据库...然后您在数据库中搜索该特定值并编辑/删除与之连接的用户的行那个值。

然后，这将为您带来两种在此发生后保持用户注册的方法。您可以将列周长值设置为“已注册”或“1”或几乎任何东西；或者您可以删除具有该存储注册值的行...

这意味着每次用户登录时，您都需要检查该新列值或该用户是否存在于“not_activated_yet”表中。有很多方法可以做到这一点，但这是一个非常基本的过程。

以下是一些可以帮助您的基本脚本...在用户满足您将其放入数据库的 php 附近的所有注册要求后，您可以使用它向他们发送电子邮件...

```
<?php
$to = "$user_email";
 $subject = "Your Account Information!";
  $body = <<<EMAIL
Hello {$user_firstname} {$user_lastname}, here is your account information!

Username:{$user_username}
Password:{$user_pass}

Please activate your account by clicking the following activation link:
http://www.mywebsite.com/activate.php?aid={$aid}

EMAIL;

$headers = 'From: notify@yourwebsite.com' . "\r\n" .
    'Reply-To: notify@yourwebsite.com' . "\r\n" .
    'X-Mailer: PHP/' . phpversion();

if (mail($to, $subject, $body, $headers)) {
   echo("<p>Your account information was successfully sent to your email - ($user_email)!<br><br>Please open your email and click the activation link to activate your account.</p><br><p>If you do not see your account information in your inbox within 60 seconds please check your spam/junk folder.</p>");
  } else {
   echo("<p> Unfortunately, your account information was <u>unsuccessfully</u> sent to your email - ($user_email).</p>");
  }
?> 
```

至于更改密码有两种不同的情况。一个是他们知道他们的旧密码并且只想更改它......这就像他们输入他们的电子邮件，旧密码和新密码一样简单......您检查您的数据库中输入的密码和电子邮件是否进入使用同一行...如果是这样，您只需运行 UPDATE 查询以使用新的密码字段更新他们的密码字段...

至于密码重置，最简单的方法可能是在登录页面的某个地方说忘记密码？使用链接将他们重定向到他们输入电子邮件的页面；就像注册一样，您向他们发送一封电子邮件。然后你存储唯一的密钥和用户ID......一旦在那个链接上，他们输入一个新密码；您可以在其中找到存储用户 id 和 temp-key 的表；然后更新该用户 ID 的表密码。

编辑：另外，如果您想要代替所有设置临时密钥的东西，您可以将电子邮件发送到密码，但假设您的数据库中的密码已加密，您将不得不使用临时密钥。

忘记密码相关代码（第 1 部分-发送）：

```
<?php
if(isset($_POST['submit'])){
$email = $_POST['email'];
//generate a random string
/// insert the key and email into a row in some table of your choosing.
///send email to the email address with the code above.
///echo success so the user knows everything worked.
}
?>
<form action='' method='POST>
<input type='text' name='pass'>
<input type='submit' name='submit' value='Send Password Request'>
</form> 
```

第 2 部分处理：

```
<?php
$key = $_GET['key']; //gets key from the link you sent in your e-mail; what temporarily connects to that user.
// search your database table for that key
// once you have that users id delete the row in the password-request table and insert the password into your users table row.
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T04:24:21.397

Simply add 2 fields say token and status to the users table. Now create a link adding this token at the end like (http://yourdomain.com/users/accountactivation/34gg456sas78ud) and send it in email. When user hits this link, the control goes to the account activation where a query is run to verify if this token exists in the database. If yes, change that user's status to 1 and also change/remove the token from the table so that the link expires. When user logs in , check if user status is 1\. If yes, user can login else a message is displayed to check email to activate account.

# php - 如何在不使用oracle函数的情况下正确地将oracle时间戳转换为php，只是纯php？

> ID：14290135
> 
> 赞同：1
> 
> 时间：2013-01-12T04:09:57.637
> 
> 标签：php

如何转换这个 Oracle 时间戳，而不使用任何 oracle 函数，只使用纯 PHP 函数来操作这个 Oracle 时间戳？

比如：

```
12-JAN-13 12.00.00.000000000 AM 
```

如果我做：

```
echo date('F d,Y',strtotime($oracleTimeStamp)); 
```

它产生：

```
January 01,1970 
```

如果我这样做：

```
echo strtotime($oracleTimeStamp); 
```

它根本不产生任何东西。

完全不使用任何 Oracle 函数的正确方法是什么，只使用纯 PHP 来操作这个 Oracle 时间戳？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T04:16:07.913

为此使用[DateTime::createFromFormat()](http://php.net/manual/en/datetime.createfromformat.php)，

```
$dt = DateTime::createFromFormat("d#M#y H#i#s*A", $str); 
```

# php - Mod Rewrite - 正则表达式包含除斜杠之外的所有内容

> ID：14290137
> 
> 赞同：6
> 
> 时间：2013-01-12T04:10:11.727
> 
> 标签：php, mod-rewrite

在我的 .htaccess 中，我有一个重写规则，它`$_GET`从一个干净的 url 读取值。对于 url 中的一个部分，我允许所有字符`(.*)`成为 var 的一部分。唯一的问题是当我从 twitter 关注我的网站的链接时，它在 url 中包含一个最终的“/”。

```
RewriteRule ^advertise/([A-Za-z0-9]+)/(.*)/?$ advertise/?a=b&content=$1&content_att=$2 [L] 
```

`www.mysite.com/advertise/content/content_att`工作得很好
- 但
`www.mysite.com/advertise/content/content_att/`尝试将“/”作为`content_att`var 的一部分。只排除斜线的表达式是什么？（或任何其他 mod_rewrite 约定来完成此操作）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-12T04:14:40.280

`[^/]`将包括任何字符，除了`/`
`[^/]*`将包括任意数量的字符`/`

在行动应该是这样的：

```
RewriteRule ^advertise/([A-Za-z0-9]+)/([^/]+)/?$ advertise/?a=b&content=$1&content_att=$2 [L] 
```

# php - 如何在此代码中传递帖子 ID？

> ID：14290138
> 
> 赞同：0
> 
> 时间：2013-01-12T04:10:18.430
> 
> 标签：php, wordpress

我正在尝试在下面的代码中传递帖子 ID。我怎样才能在那里添加它？我想我需要在`$post->ID`某处添加。

```
$wp_query->query( 'post_type=movies&p=' . $_GET['pid']); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T05:34:36.633

也许：

```
$wp_query->query( 'post_type=movies&p=' . $post->ID); 
```

会做的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T04:12:23.337

你回答了你的问题。

`I am trying to pass the post ID in the code below.`

如果是发帖。
`$_GET['pid']`应该`$_POST['pid']`

# database - 访问表关系

> ID：14290142
> 
> 赞同：0
> 
> 时间：2013-01-12T04:11:50.297
> 
> 标签：database, ms-access, database-design, foreign-keys, entity-relationship

我正在建立一个关键的库存管理数据库。我有 5 个表，我相信我必须在它们之间创建关系以强制执行参照完整性。

**这是我的问题或我感到困惑的地方：**在 KEYS 表中，我使用了循环向导并选择了 ROOM 属性（因此在插入新密钥时，您会看到房间名称而不是房间 ID），但是我将如何连接 ROOM_ID（来自 ROOM表）到房间（从 KEYS ）。它们不是完全相同的属性，这会在保持完整性问题时给我带来问题吗？

![在此处输入图像描述](../Images/4c9713088a770eee9ca3957cab552330.png)

这就是我的桌子的样子。如果我将属性更改为 ROOM_ID（因此链接它们是有意义的），那么该表将只有一堆 id 编号，这意味着很少。

![在此处输入图像描述](../Images/3c530531590cd3c70fbeac92a1b821ac.png) 此外，在设置关系时，始终选择 CASCADE Delete and Update 是否是个好主意。实用吗。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T04:51:41.767

首先，我认为您应该为表和列遵循一些常见的命名/样式约定。例如，很难区分 ROOM_ID 是否引用 KEY_ID，反之亦然。

如果表和列是：
ROOM.id (PK)、ROOM.room，则更容易理解。
KEY.id (PK), KEY.room_id (FK), KEY.drawer, KEY.notes

假设一个房间可以有多个钥匙，会有唯一的 KEY.id 但相同的 KEY.room_id。

要回答关于列是否不是同一个属性的问题，在两个表之间建立关系涉及到连贯地相互引用的能力，所以我相信这将是一个问题。如果您需要设置更多信息，则可以添加另一列。

您可以在此网站上阅读有关公约的更多信息：[这里](http://justinsomnia.org/2003/04/essential-database-naming-conventions-and-style/)

关于 CASCADE 删除和更新，这取决于您打算使用数据库的方式。例如，如果您要删除 SIGNIN，那么我认为您也不想级联和删除 USER。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T05:42:02.510

(1) 你想通过 RoomID 来做。当您在表格视图中查看它时，它可能没有任何意义，但用户可能会以您需要查找以显示房间名称的形式使用它。但是，如果用户将使用表格视图，您始终可以使用带有两列下拉列表的查找字段来显示房间名称，但存储 ID。

(2) 级联更新和删除。我们不能告诉你。这取决于您是否希望在您的应用程序中发生级联更新和删除。没有普遍的答案。

# java - 在java中返回一个字符串[]

> ID：14290144
> 
> 赞同：-1
> 
> 时间：2013-01-12T04:11:59.367
> 
> 标签：java, string, compilation, return

如何在 Java 中返回数组字符串？我不断收到错误消息，说我无法从 String 转换为 String[]，但它不应该尝试这样做。我对CS很陌生，所以我不完全确定。这是我的类文件：

```
public class questionOrder {
    public String[] order(int x, String W, String X, String Y, String Z){
           String f = W;
           String g = X;
           String h = Y;
           String j = Z;

    switch(x){

        case 1: String[] ar = {f,g,h,j};
        return ar;

    }
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T04:15:26.903

如果`x != 1`然后 switch 语句将不匹配并且`return ar`不会被执行，那么你的函数将不会返回任何内容。我不确定为什么您在将 a 转换`String`为 a 时遇到错误，`String[]`但我怀疑这是您未在代码片段中发布的内容的结果。

添加以下内容以使其编译：

```
switch (x) {
    case 1:
        String[] ar = {f, g, h, j};
        return ar;
    default:
        return new String[0];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-21T13:49:14.540

请参阅我已尝试并执行的此示例：

```
public class QuestionOrder {
public String[] order(int x, String W, String X, String Y, String Z){
       String f = W;
       int g = x;
      // g.toString();
      String h1 = Integer.toString(g);

       String h = Y;
       String j = Z;
  String[] ar=new String[] {f,h1,h,j};;

return ar;
}

public static void main(String[] args) throws Exception{
    try{
QuestionOrder q=new QuestionOrder();
String[] str=q.order(2,"e","r","t","y");
for (int i=0;i<str.length ;i++ )
{
    System.out.println(str[i]);
}

}catch(Exception e){}   } 
```

}

# database-design - 无关属性示例的解释

> ID：14290153
> 
> 赞同：5
> 
> 时间：2013-01-12T04:13:15.360
> 
> 标签：database-design

我想知道如何找到无关的属性，虽然我读了很多我无法理解的文章。其中许多给出了无关属性的定义。我从 Abraham Silberschatz、Henry F. Korth、S. 的《数据库系统概念》一书中找到了 2 个示例。苏达山。

1.  FD F=(AB -> C , A -> C) 无关属性 = B
2.  FD F=(AB -> CD , A -> C ) 无关属性 = C

但是我也无法理解这两个，因为他们没有给出任何解释。谁能解释如何找到无关的属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-29T11:38:33.750

1）已在其他答案中解释
2）A->C 这意味着 C 可以从 A 派生。
AB->CD 可以分解为 AB->C 和 AB->D。
但是这里我们不需要 AB 来推导出 C，因为它可以从 A 推导出来。因此是多余的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-02T20:22:07.897

第一个：
如果A可以识别C，那么如果你制作一个新的密钥作为A和B的复合密钥，它都可以识别C，但是你可以在没有B的帮助下识别C，所以b是无关的属性。

第二：
根据阿姆斯特朗的分解规则

Ab->cd 将分解为 AB->C AND AB->D
，因此现在可以仅使用 AB 的键来识别 c 和 D，这使 C 成为 A->C 中的外部属性并将其删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-10T18:09:01.583

如果A可以识别C，那么如果你创建一个新的键作为A和B的组合键，它都可以识别C，但是你也可以在没有B的帮助下识别C，所以b是无关属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-11T00:32:49.197

# 1 从第二个依赖可以看出，C 可以由 A 决定。所以在第一个依赖 AB->C 中，B 是无关的。

# 2 从第二个依赖A->C中可以看出C可以被A去训练，也就是说我们并不真的需要Axxx->C，但是我们需要AB来确定D。所以在这种情况下C是多余的。

# javascript - 在 IE8 中获取一个 textNode 作为 childNode

> ID：14290159
> 
> 赞同：2
> 
> 时间：2013-01-12T04:14:37.213
> 
> 标签：javascript, internet-explorer, dom, text, internet-explorer-8

我有一个`style`HTML 标记的引用，其中包含样式文本。我试图通过`childNodes`属性访问这个 textNode 但它只返回一个空对象。如何在 IE8 中从其父级访问 textNodes？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T07:37:53.457

标记中的文本在 IE8 中似乎没有表示为 childNode。但是，您可以访问它，`.innerHTML`它将所有规则作为纯文本返回。

小提琴：http: [//jsfiddle.net/jonathansampson/F2Wcg/](http://jsfiddle.net/jonathansampson/F2Wcg/)

# c - 使用前序遍历从二叉树创建链表

> ID：14290162
> 
> 赞同：2
> 
> 时间：2013-01-12T04:14:45.627
> 
> 标签：c, linked-list, binary-tree, preorder

我想在二叉树上进行前序遍历时将元素添加到链接列表。我不想破坏BT，只是复制一个链表中的元素。这是我的代码片段。

```
void Preorder(treeNode *node, Nodelist * head){
    if(node==NULL){
        return;
    }
    //printf("%d\n", node->data);
    head = List_insert(head, node->data);
    Preorder(node->left, head);
    Preorder(node->right, head);
}

Nodelist * List_insert(Nodelist * head, int v)
{
    Nodelist * p = Node_construct(v);
    p->depth = 2222;
    p -> next = head;
    return p;
}

void List_print(Nodelist * head)
{
    while (head != NULL)
    {
        printf("%d ", head -> value);
        printf("%d ", head -> depth);
        printf("\n");
        head = head -> next;
    }
    printf("\n\n");
}

treeNode * Insert(treeNode *node,int data)
{
        if(node==NULL)
        {
                treeNode *temp;
                temp = (treeNode *)malloc(sizeof(treeNode));
                temp -> data = data;
                temp -> left = temp -> right = NULL;
                return temp;
        }

        if(data >(node->data))
        {
                node->right = Insert(node->right,data);
        }
        else if(data < (node->data))
        {
                node->left = Insert(node->left,data);
        }
        return node;

}

int main(int argc, char**argv) {
        treeNode *root = NULL;
        root = Insert(root, 14);
        root = Insert(root, 15);
        root = Insert(root, 4);
        root = Insert(root, 9);
        root = Insert(root, 7);
        root = Insert(root, 18);
        root = Insert(root, 3);
        root = Insert(root, 5);
        root = Insert(root, 16);
        root = Insert(root, 20);
        root = Insert(root, 17); 

        Nodelist * head = NULL;
        Preorder(root, head);
        List_print(head);

    return 0;
} 
```

上面的代码什么也没打印。我认为问题在于使用 head = List_insert(head, node->data); 在预购功能中。任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T04:25:02.233

您将`NULL`作为列表头传递给预购。这是按值传递的，您不能以这种方式更改主函数中的头部。而是像这样定义 Preorder：

```
void Preorder(treeNode *node, Nodelist **head) 
```

这样你就可以做到：

```
*head = Linst_insert.... 
```

在函数内部修改列表。当然，您需要从`main`函数中调用 preorder ，如下所示：

```
Preorder(root, &head); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T05:14:18.367

试试这个...希望有帮助

```
Nodelist *Preorder(treeNode *node, Nodelist ** tail) { // use name 'tail' instead of 'head' because you are inserting on the tail, but this functions returns head..

    Nodelist *head;

    if(node==NULL){
        return;
    }
    //printf("%d\n", node->data);
    head = List_insert(tail, node->data);
    Preorder(node->left, tail);
    Preorder(node->right, tail);
    return head;
}

Nodelist * List_insert(Nodelist ** tail, int v)
{
    Nodelist * p = Node_construct(v);
    p->depth = 2222;
    p->next = NULL;
    if (!tail) {
        *tail = p;  // (*tail) is NULL, true when first time List_Insert called
    }
    else {
        (*tail)->next = p;
    }
    return p;
}

int main(int argc, char**argv) {
        treeNode *root = NULL;
        root = Insert(root, 14);
        root = Insert(root, 15);
        root = Insert(root, 4);
        root = Insert(root, 9);
        root = Insert(root, 7);
        root = Insert(root, 18);
        root = Insert(root, 3);
        root = Insert(root, 5);
        root = Insert(root, 16);
        root = Insert(root, 20);
        root = Insert(root, 17); 

        Nodelist * head = NULL;
        head = Preorder(root, &head);
        List_print(head);

    return 0;
} 
```

# javascript - Javascript 默认参数，只传递第二个

> ID：14290168
> 
> 赞同：2
> 
> 时间：2013-01-12T04:15:42.893
> 
> 标签：javascript

目前，我有一个定义如下的函数：

```
function a(b,c) {
 if (typeof(b) === "undefined") { b = 1; }
 if (typeof(c) === "undefined") { c = 2; }
 ...
} 
```

之前，如果值是假的，它会设置为默认值。更改它会中断以下调用：

```
a(null, 3); 
```

没有未定义的对象。我怎样才能只传递第二个参数？

> 实际上，有一个未定义的对象：

通常可能有一个未定义的对象，但显然在我的环境中出现了问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T04:20:36.780

实际上，有一个`undefined`对象：

```
a(undefined, 3); 
```

但是，由于某种原因，它是一个变量，因此有人*可以*这样做：

```
undefined = 2; 
```

您的代码将不再起作用。如果您想保护自己免受重新定义的人的影响`undefined`，您可以这样做：

```
a(void 0 /* zero's not special; any value will do */, 3); 
```

`void`前缀运算符接受一个值，丢弃它，然后返回`undefined`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T04:21:22.107

检查变量是否存在的一个很好的测试是：

```
(typeof b === "undefined" || b === null) 
```

因此，您的函数可以这样重写：

```
function a(b,c) {
   if (typeof(b) === "undefined" || b === null) { b = 1; }
   if (typeof(c) === "undefined" || b === null) { c = 2; }
   ...
} 
```

这将解释任何`undefined`,`null`或`void 0`作为参数传递。如果你发现重复，你总是可以定义一个效用函数：

```
function exists(obj) {
    return typeof(obj) === "undefined" || obj === null;
} 
```

而这个精确的测试就是[Coffee-script](http://coffeescript.org)用它的存在运算符所做的`?`。Coffee-script 也提供默认参数，这将使您的生活更加轻松。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T04:20:29.727

不知道你为什么说没有未定义...

```
a(undefined, 3) 
```

是你想要的

# ruby - 无法加载带有本机扩展的 gem：fresh 10.8、xcode 4.5、rvm

> ID：14290169
> 
> 赞同：0
> 
> 时间：2013-01-12T04:16:00.037
> 
> 标签：ruby, macos, rvm

1.  清洁山狮安装
2.  从应用商店安装 XCode 4.5
3.  安装了命令行工具
4.  安装家酿
5.  酿造医生很高兴
6.  安装的 RVM
7.  rvm 安装 1.9.3
    *   安装程序要求更多 brews，安装了以下内容：
        1.  苹果-gcc42
        2.  自动配置
        3.  汽车制造
        4.  库克巴

安装完成，一切正常...

```
maximus:~$ gem install json
Building native extensions.  This could take a while...
ERROR:  Error installing json:
  ERROR: Failed to build gem native extension.

        /Users/mmoser/.rvm/rubies/ruby-1.9.3-p362/bin/ruby extconf.rb
creating Makefile

make
compiling generator.c
generator.c:369: warning: unused parameter ‘self’
generator.c:423: warning: unused parameter ‘self’
generator.c:759: warning: unused parameter ‘Vstate’
generator.c:773: warning: unused parameter ‘Vstate’
generator.c:773: warning: unused parameter ‘state’
generator.c:773: warning: unused parameter ‘obj’
generator.c:778: warning: unused parameter ‘Vstate’
generator.c:778: warning: unused parameter ‘state’
generator.c:778: warning: unused parameter ‘obj’
generator.c:783: warning: unused parameter ‘Vstate’
generator.c:783: warning: unused parameter ‘state’
generator.c:783: warning: unused parameter ‘obj’
generator.c:788: warning: unused parameter ‘Vstate’
generator.c:788: warning: unused parameter ‘state’
generator.c:793: warning: unused parameter ‘Vstate’
generator.c:793: warning: unused parameter ‘state’
generator.c:799: warning: unused parameter ‘Vstate’
linking shared-object json/ext/generator.bundle

make install
/Users/mmoser/.rvm/scripts/install -c -m 0755 generator.bundle /Users/mmoser/.rvm/gems/ruby-1.9.3-p362/gems/json-1.7.6/lib/json/ext
/Users/mmoser/.rvm/scripts/install: line 33: /Users/mmoser/.rvm/gems/ruby-1.9.3-p362/gems/json-1.7.6/ext/json/ext/generator/scripts/functions/installer: No such file or directory
/Users/mmoser/.rvm/scripts/install: line 39: install_setup: command not found
Unrecognized option: -c
/Users/mmoser/.rvm/scripts/install: line 84: install_usage: command not found
make: *** [/Users/mmoser/.rvm/gems/ruby-1.9.3-p362/gems/json-1.7.6/lib/json/ext/generator.bundle] Error 1

Gem files will remain installed in /Users/mmoser/.rvm/gems/ruby-1.9.3-p362/gems/json-1.7.6 for inspection.
Results logged to /Users/mmoser/.rvm/gems/ruby-1.9.3-p362/gems/json-1.7.6/ext/json/ext/generator/gem_make.out 
```

我正在拔头发。谁能解释一下？

更多信息：

* * *

代码

```
maximus:~$ xcode-select --print-path
/Applications/Xcode.app/Contents/Developer

maximus:~$ la /Applications/Xcode.app/Contents/Developer/usr/bin/gcc* && la /Applications/Xcode.app/Contents/Developer/usr/bin/llvm-gcc*
lrwxr-xr-x 1 root wheel 12B Dec 24 19:22 /Applications/Xcode.app/Contents/Developer/usr/bin/gcc -> llvm-gcc-4.2
lrwxr-xr-x 1 root wheel 32B Dec 24 19:22 /Applications/Xcode.app/Contents/Developer/usr/bin/llvm-gcc -> ../llvm-gcc-4.2/bin/llvm-gcc-4.2
lrwxr-xr-x 1 root wheel 32B Dec 24 19:22 /Applications/Xcode.app/Contents/Developer/usr/bin/llvm-gcc-4.2 -> ../llvm-gcc-4.2/bin/llvm-gcc-4.2 
```

* * *

/usr/bin

```
maximus:~$ la /usr/bin/gcc* && la /usr/bin/llvm-gcc*
lrwxr-xr-x 1 root wheel 12B Jan 11 19:23 /usr/bin/gcc -> llvm-gcc-4.2
lrwxr-xr-x 1 root wheel 12B Jan 11 19:23 /usr/bin/gcc-4.2 -> llvm-gcc-4.2
lrwxr-xr-x 1 root wheel 32B Dec 25 08:24 /usr/bin/llvm-gcc -> ../llvm-gcc-4.2/bin/llvm-gcc-4.2
lrwxr-xr-x 1 root wheel 32B Jan 11 19:19 /usr/bin/llvm-gcc-4.2 -> ../llvm-gcc-4.2/bin/llvm-gcc-4.2 
```

/usr/local/bin

```
maximus:~$ la /usr/local/bin/gcc* && la /usr/local/bin/llvm-gcc*
lrwxr-xr-x 1 mmoser admin 46B Jan 11 21:14 /usr/local/bin/gcc-4.2 -> ../Cellar/apple-gcc42/4.2.1-5666.3/bin/gcc-4.2
ls: /usr/local/bin/llvm-gcc*: No such file or directory 
```

* * *

版本

```
maximus:~$ gcc --version
i686-apple-darwin11-llvm-gcc-4.2 (GCC) 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00)
Copyright (C) 2007 Free Software Foundation, Inc.
This is free software; see the source for copying conditions. There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

maximus:~$ gcc-4.2 --version
i686-apple-darwin11-gcc-4.2.1 (GCC) 4.2.1 (Apple Inc. build 5666) (dot 3)
Copyright (C) 2007 Free Software Foundation, Inc.
This is free software; see the source for copying conditions. There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
```

* * *

bash_profile 包含（这就是引入 $HOME/.rvm/* 路径的原因？）

```
# Load RVM
if [ -f $HOME/.rvm/scripts/rvm ]; then
  source $HOME/.rvm/scripts/rvm
fi 
```

* * *

当前回声 $PATH

```
/Users/mmoser/.rvm/gems/ruby-1.9.3-p362/bin
/Users/mmoser/.rvm/gems/ruby-1.9.3-p362@global/bin
/Users/mmoser/.rvm/rubies/ruby-1.9.3-p362/bin
/Users/mmoser/.rvm/bin
/usr/bin
/bin
/usr/sbin
/sbin
/usr/local/bin
/Users/mmoser
/Users/mmoser/scripts 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T05:57:39.967

看起来你有`/Users/mmoser/.rvm/scripts/`，`PATH`这不是偶然发生的 - 你必须手动添加它，请删除它并重新安装 gem。

还需要重新安装ruby，因为`INSTALL`在ruby中记录了：

```
$ rvm config-get INSTALL
/usr/bin/install -c 
```

所以运行：

```
rvm reinstall all 
```

# c++ - 还有一封信导致 imread 中的访问冲突

> ID：14290173
> 
> 赞同：0
> 
> 时间：2013-01-12T04:16:38.693
> 
> 标签：c++, opencv, visual-c++-2008

出于某种原因，此代码在第二次读取时产生访问冲突，但不是第一次。

```
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
using namespace cv;

int main(int argc, char **argv)
{
    Mat mat1, mat2;

    char imgname1[255]="cise_StackD.tif";
    mat1 = imread( imgname1, CV_LOAD_IMAGE_GRAYSCALE); 

    char imgname2[255]="ecise_StackD.tif";
    mat2 = imread( imgname2, CV_LOAD_IMAGE_GRAYSCALE); 

    return 0;
} 
```

确切的运行时错误消息是：“MLMVNroThrust.exe 中 0x61f437ef (msvcr100d.dll) 处的未处理异常：0xC0000005：访问冲突读取位置 0xcccccccc。” 具有相同可见项目设置的相同代码可以在另一台 PC 上运行。图像是相同的副本。

我正在使用 OpenCV 2.4.3 预构建的二进制文件；这些项目也设置为使用 CUDA，但我已经删除了所有 CUDA 代码以隔离问题。

是什么造成了这种访问冲突，我该如何摆脱它？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T00:29:50.190

根据[OpenCV 论坛上的这篇文章](http://answers.opencv.org/question/5126/imread-crashing-for-no-reason-whatsoever/)，当使用 Visual C++ 2008 和用于 2010 的 OpenCV 路径时会发生这种情况（OPENCV_AV 设置为“%OPENCV_ROOT%\x86\vc10”）。

我已经在我的实验室 PC​​ 上纠正了这个问题（OPENCV_AV 现在设置为“%OPENCV_ROOT%\x86\vc9”），它是用 Visual C++ 2010 设置的，供以前的研究人员使用。

感谢所有回复的人！

# mysql - MySQL按顺序使用多个索引

> ID：14290175
> 
> 赞同：0
> 
> 时间：2013-01-12T04:17:04.830
> 
> 标签：mysql, sql, indexing, mariadb

我有一个使用 order by 将数据返回到用户界面的系统；用户可以按任何顺序从十几个不同的排序选项中进行选择。

我有查询

```
explain extended select t.* from task t order by create_date, due_date limit 5;

+------+-------------+-------+------+---------------+------+---------+------+--------+----------+----------------+
| id   | select_type | table | type | possible_keys | key  | key_len | ref  | rows   | filtered | Extra          |
+------+-------------+-------+------+---------------+------+---------+------+--------+----------+----------------+
|    1 | SIMPLE      | t     | ALL  | NULL          | NULL | NULL    | NULL | 331233 |   100.00 | Using filesort |
+------+-------------+-------+------+---------------+------+---------+------+--------+----------+----------------+
1 row in set, 1 warning (0.00 sec) 
```

我有一个关于 create_date 和 due_date 的索引。我知道我可以创建一个多列索引；但是，由于大约有 12 种不同的排序选项，这意味着我必须创建一百多个索引来涵盖所有场景。

我阅读了有关索引合并的信息，我相信这会解决问题，因为我可以为您可以排序的每一列创建一个索引，但是我似乎无法让它在查询的“排序依据”部分工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T05:28:45.830

即使没有索引，DBMS 也非常擅长排序。请记住，额外的索引会减慢更新操作的速度，因此表上肯定会出现“索引过多”这样的情况。

如果查询很复杂，则无法保证可以使用索引呈现数据，或者使用索引是最快的查询计划。

例如，您可能在 ColumnA 上有一个非常好的过滤条件（它只选择表中百万行的 1/1000），而您想对 ColumnB 和 ColumnC 进行排序。在这种情况下，优化器可能会使用 ColumnA 上的索引并对 1000 个结果行进行排序，而不是按照 ColumnB 和 ColumnC 上的索引顺序读取整个 1,000,000 行表并在 1000 行中选择满足过滤条件。

通常，优化器比你更清楚。不总是; 实施中甚至偶尔会出现错误，有时甚至会出现疏忽。但是作为第一条经验法则，除非您可以重写查询以从根本上更快地获得相同的结果，否则优化器可能会做得不错。（如果您可以重写查询并更快地获得结果，那么优化器已经搞砸了，并且您已经为错误报告奠定了良好的基础。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:02:22.517

试试这个解决方法：

```
explain extended select * from (select t.* from task t order by create_date limit 30) z order by create_date, due_date limit 5; 
```

当您的所有行都在前 30 行内时，它可以工作，同时使用第一顺序。

“技巧”是从主表中选择一个简单的查询，并在 30 行集合上做更大的事情（连接、高级订单、随机等），这比使用整个 330K 行表要快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T06:39:58.963

你唯一能做的就是强制索引

强制索引 index_name 为 order by

如果您想利用索引合并，请尝试使用联合或等，这将使您使用多索引

永远记住，当两个条件相互独立时，将使用多重索引，那么只有它才会起作用

在极少数情况下，可以使用多索引

（这里对于上面的查询我相信它不会工作）

# android - 获取当月生日的 Facebook 好友列表

> ID：14290180
> 
> 赞同：-1
> 
> 时间：2013-01-12T04:18:04.673
> 
> 标签：android, facebook, facebook-graph-api

我正在编写一个应用程序，其中我正在*获取我所有 Facebook 朋友*的列表，包括他们的*姓名、出生日期和个人资料图片*。

所以在这里我的问题是我如何获取当月生日的朋友**列表.. 只有当月朋友生日的列表**..

*代码：*

```
 public class FriendListAdapter extends BaseAdapter implements SectionIndexer 
{
    private LayoutInflater mInflater;   
    private GetProfilePictures picturesGatherer = null;
    FriendsList friendsList;
    private String[] sections;

    Hashtable<Integer, FriendItem> listofshit = null;

    public FriendListAdapter(FriendsList friendsList) 
    {
        this.friendsList = friendsList;
        sections = new String[getCount()];
        listofshit = new Hashtable<Integer, FriendItem>();
        for (int i = 0; i < getCount(); i++) 
        {
         try 
            {
                sections[i] = jsonArray.getJSONObject(i).getString("name").substring(0);
                sections[i] = jsonArray.getJSONObject(i).getString("birthday").substring(1);
            }
         catch (JSONException e) 
            {
                sections[i] = "";
                Log.e(LOG_TAG, "getJSONObject: " + e.getMessage());
            }
        }
        if (picturesGatherer == null) 
        {
            picturesGatherer = new GetProfilePictures();
        }
        picturesGatherer.setAdapterForListener(this);
        mInflater = LayoutInflater.from(friendsList.getBaseContext());
    }

    public int getCount() 
    {
        Log.d(LOG_TAG, "getCount()");
        if (jsonArray == null)
            return 0;
        return jsonArray.length();
    }

    public Object getItem(int position) 
    {
        Log.d(LOG_TAG, "getItem()");
        return listofshit.get(position);
    }

    public long getItemId(int position) 
    {
        Log.d(LOG_TAG, "getItemId()");
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) 
    {
        Log.d(LOG_TAG, "getView(" + position + ")");

        JSONObject jsonObject = null;
        try 
        {
            jsonObject = jsonArray.getJSONObject(position);
        } catch (JSONException e) 
        {
            Log.e(LOG_TAG, "getJSONObject: " + e.getMessage());
        }

        FriendItem friendItem;

        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.single_friend, null);
            friendItem = new FriendItem();

            convertView.setTag(friendItem);
        }
        else {
            friendItem = (FriendItem) convertView.getTag();
        }

        friendItem.friendPicture = (ImageView) convertView.findViewById(R.id.picture_square);
        friendItem.friendName = (TextView) convertView.findViewById(R.id.name);
        friendItem.friendDob = (TextView) convertView.findViewById(R.id.dob);
        friendItem.friendLayout = (RelativeLayout) convertView.findViewById(R.id.friend_item);

        try {
            String uid = jsonObject.getString("uid");
            String url = jsonObject.getString("pic_square");
            friendItem.friendPicture.setImageBitmap(picturesGatherer.getPicture(uid, url));
        } catch (JSONException e) {
            Log.e(LOG_TAG, "getJSONObject: " + e.getMessage());
            friendItem.friendName.setText("");
            friendItem.friendDob.setText("");
        }

        try {
            friendItem.friendName.setText(jsonObject.getString("name"));
            friendItem.friendDob.setText(jsonObject.getString("birthday"));
        } catch (JSONException e) {
            Log.e(LOG_TAG, "getJSONObject: " + e.getMessage());
            friendItem.friendName.setText("");
            friendItem.friendDob.setText("");
        }

        listofshit.put(position, friendItem);

        return convertView;
    }

    public int getPositionForSection(int position) {
        return position;
    }

    public int getSectionForPosition(int position) {
        return position;
    }

    public Object[] getSections() {
        return sections;
    }
} 
```

==================================================== =================================

```
 public static void requestFriends(FacebookRequest facebookRequest) {
    Log.d(LOG_TAG, "requestFriends(" + ")");
    String query = "select name, birthday, uid, pic_square from user where 
      uid in (select uid2 from friend where uid1=me()) order by birthday_date";
    Bundle params = new Bundle();
    params.putString("method", "fql.query");
    params.putString("query", query);
    FacebookUtility.asyncRunner.request(null, params, 
    new FacebookRequestListener(FacebookRequestListener.FRIENDS, facebookRequest));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T04:59:33.633

更改您当前的查询：

```
String query = "select name, birthday, uid, pic_square from user where uid in (select uid2 from friend where uid1=me()) order by birthday_date"; 
```

对此：

```
String revisedQuery = "SELECT uid, name, pic_square, birthday_date FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1=me()) AND birthday_date >= '01/01' AND birthday_date <= '01/31' ORDER BY birthday_date ASC"; 
```

和中`String revisedQuery`的参数是您需要更改以获得特定月份的*出生日期的参数。*`birthday_date >= '01/01'``birthday_date <= '01/31'`

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T05:03:01.373

**更新 ：**

使用泰国查询：-

```
"select name, birthday, uid, pic_square from user where uid in (select uid2 from friend where uid1=me()) AND MONTH(birthday) = MONTH(GETDATE()) order by birthday_date";

 public static void requestFriends(FacebookRequest facebookRequest) {
    Log.d(LOG_TAG, "requestFriends(" + ")");
    String query = "select name, birthday, uid, pic_square from user where uid in (select uid2 from friend where uid1=me()) AND MONTH(birthday) = MONTH(GETDATE()) order by birthday_date";
    Bundle params = new Bundle();
    params.putString("method", "fql.query");
    params.putString("query", query);
    FacebookUtility.asyncRunner.request(null, params, 
    new FacebookRequestListener(FacebookRequestListener.FRIENDS, facebookRequest));
} 
```*

# openssl - DirectJRubyEmbedding 无法加载 OpenSSL

> ID：14290190
> 
> 赞同：0
> 
> 时间：2013-01-12T04:19:50.280
> 
> 标签：openssl, jruby

我正在尝试使用 DirectJRubyEmbedding 为我的应用程序设置 Java 到 Ruby API 调用。需要加载的 ruby​​ 模块之一是 active_support。然后它加载“securerandom”，然后加载“openssl”

在 openssl 中，digest.rb 对此有一个重述。

尝试使用 OpenSSL gem 会导致以下错误：

未初始化的常量 OpenSSL::Digest::OPENSSL_VERSION_NUMBER

在 org.jruby.RubyModule.const_missing(org/jruby/RubyModule.java:2677) 在 RUBY.Digest(/Users/v/.rvm/gems/ruby-1.9.3-p125/gems/jruby-openssl-0.8\. 2/lib/1.9/openssl/digest.rb:24) 在 RUBY.OpenSSL(/Users/v/.rvm/gems/ruby-1.9.3-p125/gems/jruby-openssl-0.8.2/lib/1.9 /openssl/digest.rb:22) 在 RUBY.(root)(/Users/v/.rvm/gems/ruby-1.9.3-p125/gems/jruby-openssl-0.8.2/lib/1.9/openssl/ digest.rb:21) 在 org.jruby.RubyKernel.require(org/jruby/RubyKernel.java:1027) 在 RUBY.(root)(/Users/v/.rvm/gems/ruby-1.9.3-p125/ gems/jruby-openssl-0.8.2/lib/1.9/openssl.rb:1) 在 org.jruby.RubyKernel.require(org/jruby/RubyKernel.java:1027) 在 RUBY.(root)(/Users/v /.rvm/gems/ruby-1.9.3-p125/gems/jruby-openssl-0.8.2/lib/1.9/openssl.rb:20) 在 org.jruby.RubyKernel.require(org/jruby/RubyKernel.java :1027) 在 RUBY.(root)(/Users/v/.rvm/rubies/jruby-1.6.7.2/lib/ruby/1.9/securerandom.rb:1) 在 org.jruby.RubyKernel.require(org/jruby/RubyKernel.java:1027) 在 RUBY.(root)(/Users/v/.rvm/rubies/jruby-1.6.7.2/lib/ruby/1.9/ securerandom.rb:37) 在 org.jruby.RubyKernel.require(org/jruby/RubyKernel.java:1027) 在 RUBY.(root)(/Users/v/.rvm/gems/ruby-1.9.3-p125/ gems/activesupport-3.2.9/lib/active_support.rb:1) 在 org.jruby.RubyKernel.require(org/jruby/RubyKernel.java:1027) 在 RUBY.(root)(/Users/v/.rvm/ gems/ruby-1.9.3-p125/gems/activesupport-3.2.9/lib/active_support.rb:24) 在 org.jruby.RubyKernel.require(org/jruby/RubyKernel.java:1027) 在 RUBY.(root )(/Users/v/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.9/lib/active_support/all.rb:1)(root)(/Users/v/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.9/lib/active_support.rb:1) at org.jruby.RubyKernel.require(org/jruby /RubyKernel.java:1027) 在 RUBY.(root)(/Users/v/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.9/lib/active_support.rb:24) 在 org .jruby.RubyKernel.require(org/jruby/RubyKernel.java:1027) 在 RUBY.(root)(/Users/v/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.9/ lib/active_support/all.rb:1)(root)(/Users/v/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.9/lib/active_support.rb:1) at org.jruby.RubyKernel.require(org/jruby /RubyKernel.java:1027) 在 RUBY.(root)(/Users/v/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.9/lib/active_support.rb:24) 在 org .jruby.RubyKernel.require(org/jruby/RubyKernel.java:1027) 在 RUBY.(root)(/Users/v/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.9/ lib/active_support/all.rb:1)

我正在使用 Ruby 1.9.3-p125 和 openssl 0.8.2，如下面的 gem 加载所示。

.rvm/gems/ruby-1.9.3-p125/gems/jruby-openssl-0.8.2/lib/1.9

我注意到 jirb 显示：

1.9.3-p125:004 > OpenSSL::OPENSSL_VERSION_NUMBER => 9469999

因此，看起来 JRuby.jar 中的 java 编译类在 OpenSSL 模块中定义了它，但 .rb 文件中的代码无法找到它。

任何帮助将非常感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T20:55:52.163

[正如我在https://github.com/jruby/jruby/issues/493](https://github.com/jruby/jruby/issues/493)中提到的，您应该考虑使用 RedBridge 而不是`DirectJRubyEmbedding`.

# c++ - C++ 头文件实现检查

> ID：14290191
> 
> 赞同：0
> 
> 时间：2013-01-12T04:19:52.783
> 
> 标签：c++, visual-studio-2010, header-files

有什么方法可以强制 C++ 编译器对所有头文件进行符号检查？我想知道我的图书馆中缺少什么而不参考所有内容......

# jquery - 根据页面滚动量更改 CSS

> ID：14290192
> 
> 赞同：0
> 
> 时间：2013-01-12T04:19:55.193
> 
> 标签：jquery, scroll, scrolltop

我试图自己做到这一点，但我没有得到任何地方。我只有：

```
if($("body").scrollTop() > 100) {
    $("header").css("display", "none");
} 
```

它在准备好的文档中。我想要做的是`header`在页面滚动 100 像素时向元素添加“显示：无”。

慢慢学jQuery。谢谢你。

编辑：HTML 很简单

```
<div id="wrap">
  <header>...</header>
  ...
</div> 
```

`#wrap`足够高，需要滚动。当滚动超过 100px 我想隐藏`header`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T04:30:05.890

您需要连接到 windows 的`scroll`事件并在其中检查该对象的`scrollTop()`值：

```
var $window = $(window),
    $header = $('header');

$window.scroll(function() {
    if ($window.scrollTop() > 100)
        $header.hide();
    else 
        $header.show();
}); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-12T04:21:57.100

$("header") 它应该是 $("#header") 其中 header 是 header div 的 id

# macos - emacs24 on mac cursor movement is quite slow

> ID：14290200
> 
> 赞同：10
> 
> 时间：2013-01-12T04:21:03.760
> 
> 标签：macos, emacs

Recently I began to use Emacs on Mac OS instead of Ubuntu, but one thing annoys me so much is that cursor movement is much slower than that in Ubuntu. Specifically, when I use c-n, c-b, c-f, c-p, the cursor moves slow, any idea about this issue? Btw, both the separate gnu emacs 24 and start emacs within terminal have the same issue.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-06-15T04:30:29.273

默认情况下，光标移动在 OS X 中全局非常缓慢。您可以在“系统偏好设置”->“键盘”中调整它。尝试调整“按键重复”和“延迟直到重复”，直到您满意为止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T04:31:50.253

这是操作系统级别的键重复设置问题

更改此设置的 UI 在“系统偏好设置”中，但您可以通过浏览 UI 来更快。

请参阅（[https://github.com/mathiasbynens/dotfiles/blob/master/.osx#L139](https://github.com/mathiasbynens/dotfiles/blob/master/.osx#L139)）：

```
defaults write NSGlobalDomain KeyRepeat -int 0 
```

# highcharts - Customize highcharts under the hood

> ID：14290203
> 
> 赞同：0
> 
> 时间：2013-01-12T04:21:37.877
> 
> 标签：highcharts

I'm working on a project with highcharts and got stuck customizing some detailed stuff inside the chart.

Here is the chart (with my needs):

![A Radar Graph generated by Highcharts](../Images/65077ac787d84e0aa0d773e5a62da297.png)

I want to customize some of the labels (in the red circles), making them bold and bigger than the rest. I also want to change the style of those dots (in the green circles), making them bigger (or even replaced by a customized SVG graph) than the rest.

How do I achieve that? Is there any reference I need to read?

Thanks very much for any kind of tips!

* * *

Update, thanks for the great tips, I have made one step towards the target, but still have some questions, described in this picture:

![Further customization](../Images/d6b3b958906a7daf815b59f247de4953.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T11:37:17.183

显然你可以通过 highchart api 实现这一点。您可以为每个数据点指定一个标记。[http://api.highcharts.com/highcharts#series.data.marker](http://api.highcharts.com/highcharts#series.data.marker)

增加第一个点的标记半径：

```
series: [{
            name: 'Allocated Budget',
            data: [{
                name: 'Point 1',
                color: '#00FF00',
                y: 43000,
              marker: {
                    radius: 8
                }
            }, 19000, 60000, 35000, 17000, 10000],
            pointPlacement: 'on'
        } 
```

您可以通过 xAxis 的 label 属性更改每个 xaxis 标签的样式。我从下面的帖子中找到了答案。[Highchart - 仅更改一个 x 轴标签的颜色](https://stackoverflow.com/questions/11182681/highchart-change-color-of-one-x-axis-label-only)

更改“营销”点的字体大小

```
xAxis: {
        categories: ['Sales', 'Marketing', 'Development', 'Customer Support', 
                    'Information Technology', 'Administration'],
        tickmarkPlacement: 'on',
        lineWidth: 0,
        labels: {
                formatter: function () {
                    if ('Marketing' === this.value) {
                        return '<span style="fill: red;">' + this.value + '</span>';
                    } else {
                        return this.value;
                    }
                }
            }
        } 
```

[演示](http://jsfiddle.net/H8Ffq/28/ "演示")

您可以根据需要修改工具提示（鼠标悬停在点上时弹出）。只需看一下 highchart api 上的示例：

```
tooltip: {
            formatter: function() {
                return 'The value for <b>'+ this.x +
                    '</b> is <b>'+ this.y +'</b>';
            }
        } 
```

[http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/tooltip/formatter-simple/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/tooltip/formatter-simple/)

要更改标记的悬停样式，只需查看数据系列的标记对象。这是一个标记点​​在悬停时也不会改变的示例：

来自 highchart api 的示例（每个点的半径相同）：

[http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/series-marker-states-hover-radius/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/series-marker-states-hover-radius/)

在悬停示例期间将标记半径的大小保持在单个点上：

```
data: [{
                name: 'Point 1',
                color: '#00FF00',
                y: 43000,
              marker: {
                    radius: 8,
                   states: {
                        hover: {
                            radius: 8
                        }
                    }
                }
            }, 19000, 60000, 35000, 17000, 10000] 
```

如果我是你，我会深入研究 highchart api，它是一个很棒的库，它提供了修改图表所需的几乎任何类型的功能。

# grep - grep 匹配具有 n 个前导空格的行

> ID：14290205
> 
> 赞同：8
> 
> 时间：2013-01-12T04:22:25.027
> 
> 标签：grep, whitespace

我被这个卡住了。我想匹配所有以完全开头的行，比如 8 个空格，然后是双引号。

```
cat file.txt | grep '[[:space:]]\{8\}"' 
```

我在那里做错了什么？它也匹配以超过 8 个空格开头的行。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-12T04:30:18.963

`cat file.txt | grep '^[[:space:]]\{8\}"'`

如果你不放`^`，它将匹配你附近的 8 个空格`"`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-12T15:37:40.313

您不需要通过管道将`cat`字符与行首匹配，这样模式就被锚定了。`grep``egrep '^ {8}"' file``^`

```
$ cat file
        "match"
        no match
   "no match"

$ egrep '^ {8}"' file
        "match" 
```

重复量词`{n}`如果是扩展正则表达式集的一部分，则使用`egrep`或替代地使用`-E`选项`grep`以避免转义。

# jpa - Java: How to marry JPA and high-level business rules? (Bounded contexts)

> ID：14290207
> 
> 赞同：1
> 
> 时间：2013-01-12T04:23:08.340
> 
> 标签：jpa, domain-driven-design, business-rules, bounded-contexts

## Question context

So I organized my application into bounded contexts (Eric Evans' "domain-driven design"). One of the bounded contexts is the "gameplay context." It, for instance, contains an interface `Gamer`

```
public interface Gamer {
    void setFriends(Set<Gamer> friends);
    Set<Gamer> getFriends();
    ....
} 
```

There is also an implementation that is able to persist a `Gamer`'s state to a database.

```
@Entity
public class JpaGamer implements Gamer {
    private String someData;
    private String someSensitiveData;

    public setFriends (Set<Gamer> friends) {
        ...
    }

    ...
} 
```

Far, far away, inside another bounded context called "accounts context," I have classes and interfaces that deal with the users of my application. For instance, there is an interface called `Account`.

```
public interface Account{
    boolean isSignedUp();
    ....
} 
```

So a user / `Account` can be signed up or not. For any `Account`, there exists a corresponding `Gamer`.

## Challenge

I have a business rule: ***Never*** *persist **sensitive** data anyhow related to a **non-signed-up** `Account`.*

For example, this means that some non-signed-up `Account`'s `JpaGamer` instance cannot write data to the `someSensitiveData` field. You could informally say that this `JpaGamer` is a "*non-signed-up `JpaGamer`*".

I don't want to hardcode any accounts-related logic into anything gameplay-related (and the same the other way around).

How can I implement such business rules in Java without tainting either bounded context with concepts from the other bounded context?

To fulfill the business rule, I have the idea that whenever there is a "non-signed-up `JpaGamer`", I wrap that `JpaGamer` inside a `SparsePersistingGamer`. The `SparsePersistingJpaGamer` would simply not forward to the underlying `JpaGamer` any method that could potentially tamper with `someSensitiveData`.
But now I have a problem with the `someGamer.getFriends()` method. For the `SparsePersistingGamer`, it would lazily load all that gamer's friends from JPA, returning a set of plain `JpaGamer`s that are not aware of the (and any other) business rule, therefore persisting `someSensitiveData` for potentially "non-signed-up `JpaGamer`s".

Which strategies do you apply to tackle similar and related situations?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T19:41:51.300

> 永远不要保留与未注册帐户相关的敏感数据。

该规则表明`Gamer`实体需要了解其帐户状态。我不熟悉您的域，因此我无法评论边界，但让我们假设确实有两个不同的 BC：游戏玩家和帐户。这表明需要某种同步 - 来自 Accounts BC 的信息需要到达 Gamers BC。信息可以通过多种方式传递。

一种方法是使用事件驱动架构 (EDA) 对每个 Gamer 实体中的帐户状态进行非规范化。这不会污染 Gamers BC，因为帐户状态是影响实体行为的适当信息。可以设置 EDA，以便 Account BC 发布有关状态更改的事件，并且 Gamers BC 订阅这些更改并更新 Gamers 实体中的非规范化数据。这里的优点是两个 BC 将是自治的。然而，需要考虑的一个因素是[最终一致性](http://en.wikipedia.org/wiki/Eventual_consistency)- Account BC 中的更改不会与 Gamers BC 在事务上保持一致。这通常是可以接受的，因为延迟可以变得越来越小。

另一种方法是将帐户状态数据提供给使用该信息的 Gamers 实体上的所有行为。此信息将由实现与玩家实体相关的用例的应用程序服务检索。他们`GamerApplicationSerivce`会打电话给Accounts BC。这种方法的优点是简单——无需设置事件处理。缺点是自主性降低 - Accounts BC 必须可用于`Gamer`需要帐户状态信息的用例。

另外，我建议您避免使用不同的实体实现，从而避免使用实体接口。这增加了不必要的复杂性，并使推理行为变得更加困难。相反，在实体中明确表达所有领域逻辑，并通过环境应用程序服务或通过事件驱动的非规范化提供所需的数据。

# c# - C#中的属性字典

> ID：14290209
> 
> 赞同：2
> 
> 时间：2013-01-12T04:23:13.613
> 
> 标签：c#, dictionary

我有一系列“代码”，我想引用我班级中的属性。但是，当我设置字典的值时，属性不会更新。下面的一个例子

```
public Foo() {
    this.CodeMap = new Dictionary<string, object>();
    this.CodeMap.Add("stat", this.Status);
    this.CodeMap.Add("ver", this.Version);
}

public int Status { get; set; }

public int Version { get; set; } 
```

和调用代码

```
foo.CodeMap["stat"] = 27;
/* foo.Status is not set to 27 */ 
```

有没有办法在.NET 中做到这一点。我相信发生错误是因为字典值不是 ref 值，但我不确定执行此操作的最佳方法。我看到了[https://stackoverflow.com/a/10350484/450745](https://stackoverflow.com/a/10350484/450745)但这有点与我想要的相反。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-02T12:41:41.590

对于未来的观众，在简单的情况下使用 Func'<'T'>' 就足够了。

```
 public string TestProperty {get; set;}
  public Dictionary<int, Func<string>> dictionary;

  Constructor()
  {
    dictionary = new Dictionary<int, Func<string>>
    {
        {1, ()=>TestProperty }
    }
  } 
```

当像这样使用时：

```
 dictionary[1]() or dictionary[1].Invoke() 
```

它返回当前财产的实际价值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T04:25:41.020

> 我相信发生错误是因为字典值不是 ref 值，

不，是因为你没有设置`foo.Status`。`foo.CodeMap`并且`foo.Status`是不同的。

如果要同步值，则应手动进行。您可以继承`IDictionary<TKey,TValue>`并覆盖该`Add`方法。

像

```
void Add(TKey key, TValue value)
{
   if (key is string && key.Equals("stat"))
   {
      this.stat = (int)value;
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T05:11:12.110

您的代码不起作用，因为您将键“stat”添加到`Dictionary`具有赋值时 Status 具有的任何值。当您稍后更新该键的值时，它不会自动更新您的属性。您正在将*某个时间点*的属性值添加到 中`Dictionary`，而不是属性本身。

使用标准无法实现您想要做的事情`Dictionary`。不过，您有几个看起来并不可怕的选择。

**可观察字典**

请参阅此[博客文章](http://blogs.microsoft.co.il/blogs/shimmy/archive/2010/12/26/observabledictionary-lt-tkey-tvalue-gt-c.aspx)和此[stackoverflow 线程](https://stackoverflow.com/questions/8621276/c-sharp-check-if-a-dictionary-has-changed-values-in-another-class-through-an-eve)。

总体思路是编写一个继承自`IDictionary<TKey, TValue>`、`INotifyCollectionChanged`和的类`INotifyPropertyChanged`。

这将为您提供一些挂钩，您可以为其编写事件处理程序，理论上可以让您更新某些属性或您想做的任何其他事情。

**重构你的代码**

如果您不喜欢上述内容，那么您可以稍微重构您的代码。

考虑一下：

```
public class Foo
{
    public Dictionary<string, object> CodeMap;

    public int Status
    {
        get 
        {
            int status;
            if (int.TryParse(CodeMap["stat"].ToString(), out status))
            {
                return status;
            }
            else
            {
                throw new Exception("Status has a non-numeric value");
            }
        }
        set 
        { 
            CodeMap["stat"] = value; 
        }
    }

    public Foo()
    {
        CodeMap = new Dictionary<string, object>();
    }
} 
```

然后你可以拨打同样的电话：

```
Foo foo = new Foo();
foo.CodeMap["stat"] = 27;

Console.WriteLine(foo.Status.ToString());  // prints 27 
```

希望这很明显为什么会这样。现在该属性实际上引用了`Dictionary`. 请注意，您不能以与以前相同的方式添加初始值，因为`KeyNotFoundException`当 getter 尝试访问该键时您会得到一个。不过，我认为这是一个很小的缺点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T04:38:22.910

字典不会更新先前值属性的值。当您存储`foo.CodeMap["stat"] = 27;`的较早的值`foo.CodeMap["stat"]`（这是 的值`Status`）被覆盖`27`。

字典中由键（在您的情况下为“stat”）标识的位置是数据存储，即数据`CodeMap["stat"]`的存储位置，而不是相反。您存储在此位置的任何内容都会覆盖以前的数据。

您应该详细说明您要解决的实际问题。您的问题不够清楚，读者无法推断出实际的需求/问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-12T13:30:18.990

另一种方法是使用[ExpandoObject](http://msdn.microsoft.com/en-us/library/system.dynamic.expandoobject.aspx)。这是一种与字典绑定的示例：

```
public class Foo
{
    public Foo()
    {
        Properties = new ExpandoObject();
        Status = 0;
        Version = 0;
    }

    public dynamic Properties { get; set; }

    public IDictionary<string, object> CodeMap
    {
        get { return Properties; }
    }

    private int _status;
    public int Status
    {
        get { return _status; }
        set
        {
            _status = value;
            Properties.stat = _status;
        }
    }

    private int _version;
    public int Version
    {
        get { return _version; }
        set
        {
            _version = value;
            Properties.ver = _version;
        }
    }
} 
```

使用：

```
var foo = new Foo
                {
                    Status = 1,
                    Version = 2
                };

Console.WriteLine(foo.CodeMap["stat"]);
Console.WriteLine(foo.CodeMap["ver"]);
Console.WriteLine(foo.Properties.stat);
Console.WriteLine(foo.Properties.ver); 
```

# sql - 将包变量设置为数据库中的值

> ID：14290211
> 
> 赞同：1
> 
> 时间：2013-01-12T04:23:21.147
> 
> 标签：sql, variables, ssis

我有一个 SSIS 项目，我想在其中将我的包变量之一设置为我的一个数据库表中某个列的最大值。假设包变量名为 var。

我的 SQL 看起来像：

```
SET var = (SELECT max(some_column) from SomeTable) 
```

这如何适合 SSIS 控制流/数据流？该 SQL 将执行什么类型的任务？我什至可以通过 SQL 访问包变量吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T04:58:49.250

您可以使用执行 Sql 任务来完成此操作。语法将根据您使用的数据库连接类型（OleDb 或 .Net）而有所不同。

如果您使用的是 OleDb 连接管理器，您的 sql 语句将如下所示：

```
SELECT ? = MAX(some_column) FROM some_table 
```

然后选择参数映射选项卡来映射您的参数/变量。从“变量名称”字段的下拉列表中选择您的包变量。将方向设置为输出并将参数名称设置为 0。（OleDb 连接上的变量从 0 开始按顺序映射）

如果您使用的是 .Net 连接管理器，则可以使用更熟悉的 @variableName 作为 sql 语句中的参数占位符，以及 Execute SQL 任务中的参数名称。

**编辑：回应您的评论**。查看直接从我的一个项目中提取的一些屏幕截图。请比较您正在做的事情，以确保我们在同一页面上。

在这个镜头中，注意 Execute Sql Task 的连接类型，并注意 Sql 语句的最后一条语句，在该语句中我选择了一个等于 sql 函数的参数。

![SSIS 示例 1](../Images/d9b31429d82ce90555ca178d9118b75d.png)

在下一个镜头中，看看我是如何配置第二个参数的，确保将参数方向设置为输出。该参数命名为 1，因为它是 sql 语句中的第二个参数/参数持有者。 ![SSIS 示例 2](../Images/223e354d83ee9af6ab8bb3a4c32d0f8b.png)

# javascript - 局部视图中的多个模态框有时不会打开

> ID：14290221
> 
> 赞同：0
> 
> 时间：2013-01-12T04:25:10.683
> 
> 标签：javascript, jquery, asp.net-mvc

所以我的局部视图中有三个模态框。

1) runDates 2) errorCodes 3) testExceptions

前两个对话框中有 ajax 请求。第二个中的 ajax 请求会禁用第一个和第三个对话框。当我点击第一个和第三个时，它们不会打开。如果我不使用第二个对话框，一切都会完美。

我还为每个模态框设置了单独的 Javascript 文件。请建议，我只是难倒这个。提前致谢！

看法

```
@model RunLog.Domain.Entities.RunLogEntry
@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_Layout.cshtml";

}
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/runLogEntry.js")" type="text/javascript"></script>

<script type="text/javascript">
    var runlogListErrorsUrl = '@Url.Action("ListErrorCodes", "RunLogEntry")';

</script>
<fieldset>
    <legend>Enter a new Run Log Entry</legend>
    @using (Html.BeginForm("Create", "RunLogEntry", FormMethod.Post, new { id = "form", enctype = "multipart/form-data" }))
    {
        <div id="main">
            @Html.Partial("_RunLogEntryPartialView", Model)
        </div>
    }
</fieldset>
<script src="@Url.Content("~/Scripts/exitCode.js")" type="text/javascript"></script> 
```

**局部视图**

```
@model RunLog.Domain.Entities.RunLogEntry
<script src="@Url.Content("~/Scripts/runDates.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/testexception.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.blockUI.js")" type="text/javascript"></script>

<div class="bodyContent">
    @if (Model.RunDatesDisplay != null && Model.RunDatesDisplay.Count() > 0)
    {
        <span class="leftContent">
            @Html.Label("Run Dates")
        </span><span class="rightContent"><span id="RunDatesChildDialogLink" class="treeViewLink">
            Click here to Select/View Run Dates</span>
            <br />
            <span id="RunDatesDisplayy" style="cursor: pointer; text-decoration: underline;">
            </span></span>
    }
</div>

<div id="runDatestreeview" title="Dialog Title" style="font-size: 10px; font-weight: normal;
    overflow: scroll; width: 400px; height: 450px; display: none;">
    <table class="grid" style="width: 600px; margin: 3px 3px 3px 3px;">
        <thead>
            <tr>
                <th>
                    Run Dates:
                </th>
                <th>
                    Minimum Replicate:
                </th>
            </tr>
        </thead>
        <tbody>
            @Html.EditorFor(x => x.RunDatesDisplay)
        </tbody>
    </table>
</div>

<div class="bodyContent">
    @if (Model.TestExceptionDisplay != null && Model.TestExceptionDisplay.Count() > 0)
    {
        <span class="leftContent">
            @Html.Label("Test Exceptions")
        </span><span class="rightContent"><span id="TestExceptionChildDialogLink" class="treeViewLink">
            Click here to View Test Exceptions</span>
            <br />
            <span id="TestExceptionDisplayy"></span></span>
    }
</div>
<div id="testExceptiontreeview" title="Dialog Title" style="font-size: 10px; font-weight: normal;
    overflow: scroll; width: 800px; height: 450px; display: none;">
    <table class="grid" style="width: 600px; margin: 3px 3px 3px 3px;">
        <thead>
            <tr>
                <th>
                    Exception
                </th>
                <th>
                    Frequency
                </th>
                <th>
                    Comment
                </th>
                <th>
                    Replicate Range
                </th>
            </tr>
        </thead>
        <tbody>
            @if (Model.TestExceptionDisplay != null)
            {
                @Html.EditorFor(x => x.TestExceptionDisplay)
            }
        </tbody>
    </table>
</div>

<div class="bodyContent">
    <span class="leftContent">
        @Html.Label("Error Code")
    </span><span class="rightContent"><span id="ChildDialogLink" class="treeViewLink">Click
        here to Select Error Codes</span>
        <br />
        <span id="ErrorCodeDisplay" style="cursor: pointer; text-decoration: underline;">@(Model.ErrorDescription)</span>
        @Html.HiddenFor(model => model.ErrorDescription)
    </span>
</div>

<div id="treeview" title="Dialog Title" style="font-size: 10px; font-weight: normal;
    overflow: scroll; width: 800px; height: 450px; display:none;">
    <div id="errorCodes">
        @Html.RenderTree(CacheHelper.ErrorCodes(), ec => ec.Name, ec => ec.Children.ToList(), ec => (ec.ID).ToString(), null, "e")
    </div>
    <div id="inputReps" style="display: none;">
    </div>
</div>
<script src="@Url.Content("~/Scripts/errorCode.js")" type="text/javascript"></script> 
```

**树视图错误代码的 Javascript 文件**

```
var errorTextArea;
var ErrorCodeDialog;

$(document).ready(function () {
    $(document).ajaxStart($.blockUI).ajaxStop($.unblockUI);
    $("#errorCodes ul").treeview({
        collapsed: true,
        prerendered: false
    });

    ErrorCodeDialog = $("#treeview").dialog({ closeOnEscape: true, stack: false, autoOpen: false, modal: false, resizable: false, draggable: true, title: 'Select and input Error details', width: 480, height: 500,

        buttons: { Select: function () {
            var btnText = '';
            $('.ui-dialog-buttonpane :button').each(function () {
                if ($(this).text() == 'Select') {
                    btnText = 'Select';
                    $(this).text('Apply');
                    $("#errorCodes").attr("style", "display:none;");
                    $("#inputReps").attr("style", "display:inline;");
                }
                else if ($(this).text() == 'Apply') {
                    btnText = 'Apply';
                    $(this).text('Select');
                    $("#errorCodes").attr("style", "display:inline;");
                    $("#inputReps").attr("style", "display:none;");
                }
            });

            if (btnText == 'Select') {
                errorTextArea = "";
                $("#errorCodes :checkbox:checked").each(function () {
                    var v = $(this).val();
                    if (errorTextArea.length > 0) {
                        errorTextArea = errorTextArea + " | ";
                    }
                    errorTextArea = errorTextArea + v;
                });
                if ($("#LogType").val() == "Run")
                //$("#inputReps").load("/RunLogEntry/ListErrorCodes", { ID: $("#ID").val(), ErrorCodes: errorTextArea });
                    $("#inputReps").load(runlogListErrorsUrl, { ID: $("#ID").val(), ErrorCodes: errorTextArea });
                else
                //$("#inputReps").load("/ServiceEntry/ListErrorCodes", { ID: $("#ID").val(), ErrorCodes: errorTextArea });
                    $("#inputReps").load(serviceListErrorsUrl, { ID: $("#ID").val(), ErrorCodes: errorTextArea });

            }
            else {
                errorTextArea = "";
                var i = 0;
                $("#inputReps :input").each(function () {
                    var v = $(this).val();
                    if (errorTextArea.length > 0) {

                        if ($(this).attr('type') == 'hidden')
                            errorTextArea = errorTextArea + ' | ' + v;
                        else {
                            if (i == 0) {
                                errorTextArea = errorTextArea + ' ~ L ' + v;
                                i = 1;
                            }
                            else {
                                errorTextArea = errorTextArea + ' ~ P ' + v;
                                i = 0;
                            }

                        }
                    }
                    else
                        errorTextArea = v;
                });

                if (errorTextArea.Length > 0) {
                    errorTextArea = errorTextArea.substr(0, errorTextArea.length - 1);
                }
                $("#ErrorCodeDisplay").text(errorTextArea);
                $("#ErrorDescription").val(errorTextArea);
                ErrorCodeDialog.dialog("close");
            }
        },
            Cancel: function () {
                ErrorCodeDialog.dialog("close");
                //                $(this).dialog("close");

                //                if ($(this).text() == 'Cancel') {
                //                    $(this).dialog("close");
                //                }
            }
        }
    });

    $('#ChildDialogLink').click(function () {
        $(ErrorCodeDialog).dialog("open");
        //        return ErrorCodeDialog.dialog('open');
        //replace the div id with the id of the button/form 

        //        $(ErrorCodeDialog).dialog("open"); 
    });
}); 
```

**runDatestreeview 的 Javascript 文件**

```
var RunDialog;

$(document).ready(function () {
    $(document).ajaxStart($.blockUI).ajaxStop($.unblockUI);

    RunDialog = $("#runDatestreeview").dialog({ closeOnEscape: true, stack: false, autoOpen: false,
        modal: false, resizable: true, draggable: true, title: 'Select Run Dates to Auto-Populate Form Fields & Test Exceptions:',
        width: 600, height: 500, position: 'center',
        //        open: function (type, data) {
        //        },
        buttons: { UpdatePage: function () {
            $.post("/RunLogEntry/LogFileConfirmation",
              $("#form").serialize(),
               function (data) {
                   $("#runDatestreeview").remove();
                   $("#testExceptiontreeview").remove();
                   $("#main").html(data);
                   $(RunDialog).dialog("close");
               }, "html");
        },
            Cancel: function () {
                $(this).dialog("close");
            }
        }
    });

    RunDialog.closest("div.ui-dialog").appendTo("#form");

    $(document).on("click", "#RunDatesChildDialogLink", function () {
        //    $('#RunDatesChildDialogLink').click(function () {
        $(RunDialog).dialog("open");
    });

    //Region Auto-Open Modal Box
    var modalOpen = $("#LogModals").val();

    if (modalOpen == "0") {
        $("#runDatestreeview").dialog({ autoOpen: true });
    }
    //End Auto Open Modab Box Region

    //    $("#runDatestreeview").parent().appendTo("form");

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T15:32:22.397

您是否尝试过 dialog("destroy") 而不是 dialog("close")？

# android - Android：给予支持库的作者认可

> ID：14290226
> 
> 赞同：0
> 
> 时间：2013-01-12T04:25:48.520
> 
> 标签：android, licensing

致在 Google Play 上发布应用的用户：

识别您的应用程序中包含的支持库的作者的正确协议是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T12:08:18.133

就我而言，我在列表视图中列出了所有开源库，并链接到他们的 Github 存储库。像这样

![在此处输入图像描述](../Images/7d3305aaac4ba729e210c5f906c4405d.png)

下载我的应用程序（[必应每日壁纸](https://play.google.com/store/apps/details?id=com.groidify.bingdaily)）以查看它的外观。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T04:36:18.877

在我公司发布的应用程序中，我们使用了少数或第 3 方库。我们通过在我们的应用程序菜单中添加一个“开源许可证”屏幕来感谢作者，其中包括：

*   我们使用的库。
*   库的许可条款。

例如：

本产品包含由 Joda.org (http://www.joda.org) 开发的软件

其次是 Apache 2.0 许可条款。请注意，此特定许可有一个条款要求您在软件中包含许可文本。

一般来说 - 许可条款将规定您需要做什么。

# jakarta-ee - Is it true that the session bean in Java EE can create a Shopping Cart like session in ASP

> ID：14290229
> 
> 赞同：0
> 
> 时间：2013-01-12T04:26:46.973
> 
> 标签：jakarta-ee, stateless-session-bean, stateful-session-bean

When I make a commercial website in ASP, I use the session to keep the items in shopping cart even the customer close the website (when they come back, all items still in their cart).

I am reading about Java EE, especially about stateless and stateful session beans. But when I read this example: [http://docs.oracle.com/javaee/1.2.1/devguide/html/Session2.html#9905](http://docs.oracle.com/javaee/1.2.1/devguide/html/Session2.html#9905), it seems that a stateful session bean just separates each client, it doesn't keep the items in a shopping cart when I exit the client's application and come back again.

So is it true that the session bean in Java EE can create a shopping cart like a session in ASP?

# lync - 对话唯一性

> ID：14290232
> 
> 赞同：0
> 
> 时间：2013-01-12T04:26:57.083
> 
> 标签：lync, lync-2010

我有一个应用程序，我在其中订阅了 ConversationAdded 和 ConversationRemoved。

我想维护一个从 ConversationAdded 事件收到的对话字典列表，并在我收到 ConversationRemoved 事件后将其从列表中删除。

所以我的问题-> 有什么方法可以找到对话的一些唯一性或一些关键，我可以得到并将其添加到列表中。当我得到对话删除事件时，我可以使用接收到的对话对象中的该键并从列表中删除对话对象。

请让我知道您的意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:06:59.830

是的，您可以获得一个 ConversationID。从 ConversationAdded 事件中，您可以通过以下方式获取它：

```
string ConversationID = e.Conversation.Properties[ConversationProperty.Id].ToString(); 
```

更多信息和适当的演练[在我的博客上](http://thoughtstuff.co.uk/2013/01/tracking-lync-conversations-in-code/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T05:34:33.337

这是一个可以被视为答案的评论

[http://social.msdn.microsoft.com/Forums/en-US/communicatorsdk/thread/f174c3fa-f93a-4bd9-a0a2-641510720001](http://social.msdn.microsoft.com/Forums/en-US/communicatorsdk/thread/f174c3fa-f93a-4bd9-a0a2-641510720001)

# hadoop - 如何在新的 Hadoop API 中设置自定义输出提交程序

> ID：14290234
> 
> 赞同：2
> 
> 时间：2013-01-12T04:27:01.887
> 
> 标签：hadoop, mapreduce, output-formatting

我一直在使用该方法为 map reduce 作业`JobConf.setOutputCommitter()`设置自己的方法。`OutputCommitter`使用 hadoop v 0.20，因为此类已被弃用，设置自定义的替代方法是什么`OutputCommitter`？我尝试将属性设置为`mapred.output.committer.class`，`Configuration`但这似乎是一个无效属性。无法找到替代方案来执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T16:48:53.433

我想这取决于你所说的新 API 的含义——至少在 1.1.1 中这[不再被弃用](http://hadoop.apache.org/docs/r1.1.1/api/org/apache/hadoop/mapred/JobConf.html#setOutputCommitter%28java.lang.Class%29)——我想我记得读过整个 mapred 包被过早地弃用，而这在以后的版本中没有被弃用。

如果通过新 API，您的意思是 mapreduce 包上的 mapred，那么 OutputFormats 本身有一个关联的 OutputCommitter，它是通过[`OutputFormat.getOutputCommitter`](http://hadoop.apache.org/docs/r1.1.1/api/org/apache/hadoop/mapreduce/OutputFormat.html#getOutputCommitter%28org.apache.hadoop.mapreduce.TaskAttemptContext%29)方法获取的

# css - Helvetica font not showing up! Is my @import wrong?

> ID：14290236
> 
> 赞同：0
> 
> 时间：2013-01-12T04:27:13.797
> 
> 标签：css, web, font-family

Very newbie question, sorry in advance if it comes out to be a simple answer, but my Helvetica font isn't showing up. This is my code:

```
@import "..\fonts\Helvetica";
@import "..\fonts\Neue Helvetica";

body {
    background: #E1E1E1;
    font-family: Helvetica Neue, Arial, serif;
} 
```

It always shows up as Arial! I don't have Helvetica Neue installed on my system, even though I have the .ttf, because I wanna include it on my site and just call an import there so everyone can see it, regardless of their installation. I've got them in the same project under a different folder path as shown above. How can I accomplish this? Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T09:17:38.327

您不能合法地将 Helvetica 用作可下载字体，也不能引用`@import`. 要开始使用可下载字体（网络字体），请查看[http://www.google.com/webfonts](http://www.google.com/webfonts)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T04:34:19.487

尝试以下操作：

```
/* These links need to point to actual ttf files and be relative to your css file */
@font-face {font-family: "Helvetica"; src: url('../fonts/Helvetica.ttf') format('truetype');}
@font-face {font-family: "Helvetica Neue"; src: url('../fonts/HelveticaNeue.ttf') format('truetype');}

body {
    background: #E1E1E1;
    font-family: 'Helvetica Neue', Helvetica-Neue, HelveticaNeue, Arial, sans-serif;
} 
```

不同的系统可能会以不同的方式命名 Helvetica Neue，因此上面有 3 个指令。您可以使用 FireBug 或 Chrome/Safari 检查器来查看您的系统识别出哪一个。

但是，我怀疑您正在尝试的操作超出了您的 Helvetica 许可证的允许使用范围。[您应该考虑从fonts.com](http://fonts.com)获得许可。

此外，不确定为什么您会选择提供 serif 作为备用字体，因为 Arial 和 Helvetica Neue 都是无衬线字体。

# java - Excel file handling using java

> ID：14290238
> 
> 赞同：-3
> 
> 时间：2013-01-12T04:27:18.243
> 
> 标签：java, excel, jexcelapi

I have been working on writing text files with Java. But now I want to know how to read and modify Excel files. The reading part seems to be quite easy with [JExcel API](http://jexcelapi.sourceforge.net/) but I am stuck on modifying an Excel file. Any other methods are also welcome!!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T04:52:08.080

`Jexcel`使用is编写 excel 的示例代码

```
public void write() throws IOException, WriteException {
    File file = new File(inputFile);
    WorkbookSettings wbSettings = new WorkbookSettings();

    wbSettings.setLocale(new Locale("en", "EN"));

    WritableWorkbook workbook = Workbook.createWorkbook(file, wbSettings);
    workbook.createSheet("Report", 0);
    WritableSheet excelSheet = workbook.getSheet(0);
    createLabel(excelSheet);
    createContent(excelSheet);

    workbook.write();
    workbook.close();
} 
```

有关读写 excel 的完整代码，请参见[此处](http://www.vogella.com/articles/JavaExcel/article.html)。它是满足您要求的启动示例。并希望有很多例子存在于此。请进一步做谷歌...快乐编码... :)

**更新：**

要获取现有的 excel 表，请用以下代码替换三行新工作表：（保留上面的代码以供参考。）

```
Workbook existingWorkbook = Workbook.getWorkbook(new File(fileToEdit.getAbsolutePath()));
WritableWorkbook workbookCopy = Workbook.createWorkbook(new File("output.xls"), existingWorkbook);
WritableSheet sheetToEdit = workbookCopy.getSheet(sheetName); 
```

请注意，此代码仅供参考，未经编译和测试。在您要求提供更多信息时提供.... :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T05:12:42.390

我认为您应该使用下面的 jar 来阅读和创建 Excel 文档。

所需的罐子
poi-3.8-20120326.jar

poi-ooxml-3.8-20120326.jar

poi-ooxml-schemas-3.8-20120326.jar

xbean.jar

dom4j-1.6.1.jar

如需更多帮助，请访问：

[http://javabraiins.blogspot.in/2012/12/read-excel-file-in-java.html](http://javabraiins.blogspot.in/2012/12/read-excel-file-in-java.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T04:45:10.610

JExcel 旨在提高读取效率（因为这是 API 的主要用途）。为了提高性能，与输出信息相关的数据（例如，所有格式信息，如字体）在读取电子表格时不会被解释，因为在询问原始数据值时这是多余的。

但是，如果我们需要修改此电子表格，则需要各种写入接口的句柄，可以使用 copy 方法获得。

该示例可[在此处](http://www.andykhan.com/jexcelapi/tutorial.html#copying%20and%20modifying)获得。参考同上。

# netty - How to send message to a specified channel

> ID：14290239
> 
> 赞同：1
> 
> 时间：2013-01-12T04:27:28.313
> 
> 标签：netty

im trying to use `websocketx` server demo in netty 4.0alpha8.

When i save a registered channel to a `static final DefaultChannelGroup`, it's easy to write message to all channels whith: `allChannels.write(message);`

But i want to write message to a specified channel with channel id, i used this:

```
final static ChannelGroup allChannels = new DefaultChannelGroup("registeredChannel");

public void channelRegistered(ChannelHandlerContext ctx) throws Exception {
        super.channelRegistered(ctx);
        allChannels.add(ctx.channel());
    } 
```

And then i store `channelID=channel.id()`, try to write message to this channel with `allChannels.find(channelID).write(message);` but it does not work. How can I do this?

# gwt - GWT: retrieve Components from FormPanel/VerticalPanel which are added dynamically

> ID：14290240
> 
> 赞同：0
> 
> 时间：2013-01-12T04:27:34.507
> 
> 标签：gwt, components, custom-component, smartgit

I am creating a web page using GWT 2.5.0, in this I used lots of composite component. And the web page is developed based on XML .

So here we parse the XML and according to each element add componnet to a VerticalPanel and finally add it to a FormPanel and then return it to add to RootPanel. Beside the Component corresponds to XML I add a Button, call it submit button, **on its click event I want to get the values of every component in that form**. To clear what my idea is , below is the pseudo code of my work:

```
public FormPanel createFormWithComponents(){

    FormPanel fp = new FormPanel();
    vp = new VerticalPanel();
    //these are creatred based on the xml
    ABC coutn = new ABC (null,"pressure count",true);
    PI propotion =  new PI(12.5,"HR percentage");

    vp.add(coutn);
    vp.add(propotion);
    //a common button to every form created here
    Button submit = new Button("submit");
    vp.add(submit);
    submit.addClickHandler(new ClickHandler() {

        @Override
        public void onClick(ClickEvent event) { 
```

**UPDATED**

```
 String values = "";
                Iterator<Widget> vPanelWidgets =  vp.iterator();
                while (vPanelWidgets.hasNext()){
                    Widget childWidget = vPanelWidgets.next();
                    if(childWidget instanceof ABC){
                        ABC xx = (ABC )childWidget;
                        values = String.valueOf(xx.getMagnitude());
                    }
                }
                Window.alert(values);
            }
        });

        fp.add(vp);
        return fp;
    } 
```

Any insight would be appreciated. UPDATED: Here am comparing each of child widget component with one of my Composite component , do i have to do like this comparing to all Composite component? I there any kind of simple or optimized way to do it? I want good solution for doing this process as there are so many composite component over there:

```
if(childWidget instanceof ABC ){
    ABC xx = (ABC )childWidget;
    values = String.valueOf(xx.getMagnitude());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T17:49:11.313

您可以使所有复合组件实现具有单个`getValue()`方法的接口：

```
public interface HasValue {
    public String getValue();
} 
```

然后，您可以轻松提取实现该接口的所有小部件的值：

```
 while (vPanelWidgets.hasNext()){
        Widget childWidget = vPanelWidgets.next();
        if(childWidget instanceof HasValue){
            HasValue xx = (HasValue) childWidget;
            values = xx.getValue();
        }
    } 
```

如果您需要返回字符串以外的值，则可以使用泛型。看看 GWT 的`com.google.gwt.user.client.ui.HasValue`一个例子（你也可以使用那个接口而不是创建你自己的接口）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T09:58:04.603

您只能在 GWT FormPanel 小部件中添加一个小部件，然后您可以使用`getWidget()`以下方法获取它：

```
FormPanel panel = createFormWithComponents();

RootPanel.get().add(panel);

VerticalPanel vp = (VerticalPanel) panel.getWidget();
int widgetCount = vp.getWidgetCount();
Window.alert(widgetCount+" ..."); 
```

# jquery - chrome extension popup HTML not updated by JavaScript, standalone HTML works

> ID：14290245
> 
> 赞同：2
> 
> 时间：2013-01-12T04:28:29.330
> 
> 标签：jquery, jquery-plugins, google-chrome-extension

I am trying to Show a RSS feed in a Google Chrome extension's popup page. I am using jQuery and a RSS plugin for jQuery. The code works perfectly if I load the popup.html in a browser window. However, when I open the popup from extension the RSS is not populated into the target div.

**Source: popup.html**

```
<!DOCTYPE html>

<html>
<head>
    <meta charset="UTF-8" />

    <link rel="stylesheet" type="text/css" href="css/popup.css" />

    <script src="js/jquery-1.8.3.min.js"></script>
    <script src="js/jquery.rss.min.js"></script>
    <script src="js/mypopup.js"></script>

</head>

<body>

    <div id="header">
        <a href="someurl" target="_blank">
          <img id="logo" src="images/header.png" />
        </a>
    </div>

    <div id="feed-container">
        <div id="feed"></div>
    </div>

</body>
</html> 
```

**Source: mypopup.js**

```
document.addEventListener('DOMContentLoaded', function () {
//document.getElementById('feed').innerHTML = '<p>Test</p>';
$("#feed").rss("http://feed/url");
}); 
```

**Source: manifest.json**

```
{
  // Required
  "name": "XYZ",
  "version": "0.1",
  "manifest_version": 2,

  // Recommended
  "description": "XYZ",
  "icons": {
  "128": "images/icon128.png"
  },

  // Add any of these that you need
  "homepage_url": "http://url",
  //"key": "publicKey",

  //Browser Action
   "browser_action": {
      "default_icon": {                    // optional
      "19": "images/icon19.png",           // optional
      "38": "images/icon38.png"            // optional
      },
      "default_title": "XYZ",
      "default_popup": "popup.html"
   }
} 
```

So, what am I doing wrong here?

# r - 对包含零的时间序列数据拟合对数回归？（使用 R 工具）

> ID：14290256
> 
> 赞同：0
> 
> 时间：2013-01-12T04:30:26.743
> 
> 标签：r, regression, logarithm

[https://dl.dropbox.com/u/53624395/11.csv](https://dl.dropbox.com/u/53624395/11.csv)

这是时间序列数据，我必须对表格进行对数回归`y=a+b(log(x1))+c(log(x2))` 并找到 a、b、c，然后检查是否存在任何此类关系。我必须使用 R 工具来做到这一点。我已经在[http://stats.stackexchange.com](http://stats.stackexchange.com)上发布了这个问题，但是因为它与 R 编程完全相关，所以它应该发布在 StackOverflow 上。请帮忙。

数据：

```
structure(list(x = c(433.66, 433, 230, 0, 251, 0, 424, 0, 439, 
0, 0, 0, 0, 85.15, 0, 0, 748, 0, 732, 0, 523.76, 0, 780, 0, 778, 
0, 635.64, 0, 600, 0), y = c(9.9, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 9, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), 
z = c(43504.95, 49380, 50601, 0, 36064, 0, 47081, 0, 43775, 
0, 0, 0, 0, 85.15, 0, 0, 68502, 0, 66397, 0, 47565.35, 0, 
65695, 0, 69111, 0, 53213.86, 0, 118891, 0), x1 = c(1382.18, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1306, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), x2 = c(0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 1473.27, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0), x3 = c(0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 
2, 3, 2.1, 2, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0), x4 = c(0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 2L, 1L, 5L, 
43L, 11L, 2L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 
0L, 0L, 0L, 0L)), .Names = c("x", "y", "z", "x1", "x2", "x3", 
"x4"), class = "data.frame", row.names = c(NA, -30L)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T05:02:02.860

要求做什么是不可能的。但你可以靠近。

尝试这个：`y = a + b(log(x1 + 1)) + c(log(x2 + 1))`

命名数据框`x`

```
x <- read.csv('11.csv')

lm(y ~ 1 + log(x1+1) + log(x2+1), data=x)

## Call:
## lm(formula = y ~ 1 + log(x1 + 1) + log(x2 + 1), data = x)
##
## Coefficients:
## (Intercept)  log(x1 + 1)  log(x2 + 1)  
##  -1.202e-04    1.312e+00    1.648e-05 
```

# gwt - Phonegap RPC 设置问题

> ID：14290258
> 
> 赞同：1
> 
> 时间：2013-01-12T04:30:51.697
> 
> 标签：gwt, cordova, rpc

我正在尝试让一个 RPC 调用与 phonegap 一起使用。我正在按照[http://blog.daniel-kurka.de/2012/04/gwt-rpc-with-phonegap-revisited.html上的说明进行操作](http://blog.daniel-kurka.de/2012/04/gwt-rpc-with-phonegap-revisited.html)

```
PhonegapUtil.prepareService(service, "http://www.yourserver.com/", "greet"); 
```

当我查看此方法的实现时，我可以看到该服务必须是 PhonegapRPCService 类型，否则会引发错误。该实现具有以下代码

```
if (!(service instanceof PhonegapRPCService)) {
                    throw new IllegalStateException("the rpc service you are trying to use was not generated by Phonegap RPC Serivce Generator"); 
```

到目前为止，这是我的代码

```
 ContactsServiceAsync rpcService = GWT.create(ContactsService.class);
  ServiceDefTarget endpoint = (ServiceDefTarget) rpcService;    
  PhonegapUtil.prepareService(endpoint, "https://myquizapp2.appspot.com/", "contactsService");
  HandlerManager eventBus = new HandlerManager(null);
  AppController appViewer = new AppController(rpcService, eventBus);
  appViewer.go(RootPanel.get()); 
```

问题是我看不到如何创建一个PhonegapRPCService 实例，该实例将调用我服务器上的contactsService 服务。关于如何使用它的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:26:37.540

您发布的代码是正确的。您不必创建 PhonegapRPCService 实例。PhonegapUtil.prepareService 需要您已经拥有的 ServiceDefTarget 实例。如果您提供的网址正确，则此方法有效。

# javascript - Ember-data 不会“加入”相关模型

> ID：14290271
> 
> 赞同：0
> 
> 时间：2013-01-12T04:33:56.383
> 
> 标签：javascript, ember.js, ember-data

当我使用 FixtureAdapter 指定 aa hasMany 关系时，不会填充每个团队的玩家数组，除非我像这样为玩家指定一个 id 数组

```
App.Team.FIXTURES = [
  {id: 1, name: 'The Swagkings', players: [1,2,3,4]}
] 
```

当团队像这样设置时

```
App.Team.FIXTURES = [
  {id: 3, name: 'The Mississauga Bears'}
] 
```

然后不会自动填充团队玩家数组。此外，未建立反向关系（未填充IE玩家的团队）

我在这里写了一个示例应用程序来说明问题[http://jsfiddle.net/edude03/qCdAY/](http://jsfiddle.net/edude03/qCdAY/)

虽然我可以通过指定玩家 ID 来使其工作，但我觉得这是错误的做法，特别是考虑到这不是从后端返回数据的方式。

我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T06:18:03.490

这是目前 Ember Data 的限制。具体来说，**目前**，在加载时从适配器返回的数据上没有建立双向链接。

这是一个非常短期的限制，我们预计很快就会修复。

# c# - 通过 TCP 服务器的服务控制台输出

> ID：14290275
> 
> 赞同：0
> 
> 时间：2013-01-12T04:34:29.550
> 
> 标签：c#, c#-3.0

我有一个正在使用的复杂服务，并且与所有 Windows 服务一样，没有控制台可以读取任何调试消息或类似的东西，因此您必须将所有消息记录到文本文件中......我'我想写一个小型 TCP 服务器（或 UDP 或 NamedPipe 并不重要），在那里我可以有一个调试应用程序......所以基本上，服务一直运行并且有这个监听器/服务器（Tcp 或其他) 并且总是将调试消息写入服务器，如果我需要调试服务器，我应该能够使用 TCP 客户端（或任何协议）连接到它并读取任何调试消息，或者我通常会使用控制台的任何内容.WriteLine("消息");

我知道这似乎是一个疯狂的想法，但这是我一直在考虑的事情，需要一些意见......

我的基本问题是我可以将 TCP 服务器写入服务，但我不确定如何始终将消息传递给它，或者只有在连接客户端时，任何建议或示例将不胜感激。

注意：我正在使用 C#，并希望坚持使用该语言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T04:58:37.017

过去，我曾将[TcpListener](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener.aspx)用于类似的监控程序。这是一件非常容易创造的事情。为了与之通信，我在服务中创建了一个[TcpClient](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.aspx)。

如何使这两者一起工作的一个很好的例子就是[这个答案](https://stackoverflow.com/a/6294169/56778)。

# javascript - 了解 JavaScript 中的函数和模块

> ID：14290276
> 
> 赞同：1
> 
> 时间：2013-01-12T04:34:42.793
> 
> 标签：javascript, function, module

我试图更好地理解 JavaScript 中的函数和模块，特别是为了理解创建自己的数据类型的最佳方式。我在下面列出了 2 个文件，Rectangle1.js 和 Rectangle2.js，以及它们的示例输出，我创建这些文件是为了更好地理解这一点。

我希望社区帮助我了解哪些（或其他方式）是构建我的代码以创建我自己的数据类型的最佳方式。

**矩形1.js**

```
function Rectangle(x,y,w,h) {
  width = w;
  height = h;

  this.area1 = function() {
    return width*height;
  }
}

Rectangle.prototype.area2 = function() {
  return width * height;
};

Rectangle.area3 = function() {
  return width * height;
}

exports.Rectangle = Rectangle; 
```

**矩形2.js**

```
var RECTANGLE = (function(my) {
  function init(x,y,w,h) {
    this.w = w;
    this.h = h;
  }

  function area() {
    return this.w * this.h;
  }

  my.init = init;
  my.area = area;
  return my;
})(RECTANGLE || {});

exports.RECTANGLE = RECTANGLE; 
```

**示例交互**

```
var r2 = require('Rectangle2.js');
r2.RECTANGLE.init(1,2,3,4);
r2.RECTANGLE // ...can see the private properties
r2.RECTANGLE.area() // returns 12

var r1 = require('Rectangle1.js');
r1 // shows area3 in r1
var rect = new r1.Rectangle(1,2,3,4);
rect // shows area1 in rect
rect.area1() // visible in methods, spits out 12
rect.area2() // not visible in methods, spits out 12
r1.Rectangle.area3() // not visible in rect, spits out 12 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T04:55:22.110

在 javascript 中构造对象的首选方式更接近于您在 Rectangle1.js 中编写的方式，尽管存在一些问题：

首先，在`Rectangle(x,y,w,h)`构造函数中接受参数时，您不是将它们分配给实例变量，而是分配给一个有点不安全的全局范围，这解释了为什么`Rectangle.area3()`返回相同的结果。`this`关键字允许您分配和访问实例变量。保持其他一切相同，您宁愿需要像这样定义构造函数（注意使用`this.`）：

```
function Rectangle(x,y,w,h) {

  this.width = w;
  this.height = h;

  this.area1 = function() {
    return this.width*this.height;
  }
}

Rectangle.prototype.area2 = function() {
  return this.width * this.height;
}; 
```

此外，理想情况下，当您定义将在同一对象的所有实例中以相同方式重用的函数时，最好将它们定义为 on`Rectangle.prototype`而不是`this`在构造函数中定义。在第一种情况下，只创建一个 Function 对象并为`Rectangle`;的所有实例共享。在后者中，为每个`Rectangle`.

构建模块的方式很好，因为您的目标是一个 javascript 平台，您可以在其中组织类似 CommonJS 的模块中的代码，例如 Node.js。

# android - 无法为android中的多个按钮调用多个onclick事件

> ID：14290281
> 
> 赞同：3
> 
> 时间：2013-01-12T04:35:54.553
> 
> 标签：android, button

我在android中有小查询。我有一个活动，它有 3 个按钮，单击一个按钮，我显示 AlertDialog 框，单击第二个按钮，显示列表对话框，单击第三个按钮，我在 android 中切换 OnScreen 键盘。

我的问题是我能够调用第一个按钮，当我单击第二个和第三个按钮时，它们没有响应，而且我通过在相应的单击事件函数上插入断点进行了检查，控制流根本不在函数内部. 很简单，它跳过了乐趣并进入主 OnCreate 函数的末尾。

这是我用于前 2 个按钮的代码...

```
 Button btn=(Button) findViewById(R.id.button1);
    btn.setOnClickListener(new View.OnClickListener()
    {
        @Override
        public void onClick(View v)
        {
            // TODO Auto-generated method stub
            ShowListDialog();
        }
    });

    btn=(Button) findViewById(R.id.btnShowList);
    btn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            ShowOneDialog();
        }
    }); 
```

我正在调用函数 ShowOneDialog() 和 ShowListDialog() 函数，并希望不需要这些函数，并且第三个按钮单击事件在下面...

btn=(按钮) findViewById(R.id.btnToggle); btn.setOnClickListener(new View.OnClickListener() {

```
 @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            InputMethodManager inmgr=(InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
            inmgr.toggleSoftInput(0, 0);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T04:41:02.020

创建一个单独的`OnClickListener`侦听器并将此侦听器添加到所有按钮，如下所示：

```
 Button btn=(Button) findViewById(R.id.button1); 
 Button btn1=(Button) findViewById(R.id.btnShowList);
 ....

 btn.setOnClickListener(buttonclickhandler);
 btn1.setOnClickListener(buttonclickhandler);
 ....

 View.OnClickListener buttonclickhandler = new View.OnClickListener() {
    public void onClick(View v) {
       @Override
        public void onClick(View v)
        {
            // TODO Auto-generated method stub
            switch(v.getId())
            {
            case R.id.button1:ShowListDialog();
                break;
            case R.id.btnShowList: ShowOneDialog();
            break;
            }
        }
    }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T04:38:55.253

```
Button btn=(Button) findViewById(R.id.button1); 
```

您已将 btn 设置为 button1，因此您只在该按钮上附加了一个侦听器，这就是为什么您的另一个按钮没有做任何事情的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T06:06:13.253

试试这个代码

```
Button btn1=(Button)findViewById(R.id.button1);
btn1.setOnClickListener(new View.OnClickListener()
{
    @Override
    public void onClick(View v)
    {
        // TODO Auto-generated method stub
        ShowListDialog();
    }
});

Button btn2 = (Button)findViewById(R.id.btnShowList);
btn2.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        ShowOneDialog();
    }
}); 
```

# node.js - 流星应用程序中的异步回调

> ID：14290286
> 
> 赞同：4
> 
> 时间：2013-01-12T04:36:51.377
> 
> 标签：node.js, twitter, meteor

我正在使用 ntwitter node.js 模块从流星应用程序内部访问 twitter 的流 API，但是当尝试插入回调函数内的集合时，应用程序崩溃：

```
twitter.stream('statuses/filter', {'track':'whatever'}, function(stream) {
  stream.on('data', function (data) {
      //logging the data coming back works fine
      console.log(data);
      //the next line throws "Error: Meteor code must always run within a Fiber"
      Tweets.insert(data); 
  });
}); 
```

是否有推荐的方法在 Meteors 线性执行模型的上下文中使用异步回调？我尝试将插入物包裹在似乎可行的新光纤中，但我不确定它可能产生的任何影响。

我发现这个[http://gist.io/3443021](http://gist.io/3443021)很有帮助，但我仍然不确定哪种方法适合我的特殊情况，因此我们将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T14:53:27.463

我们使用了不同的设计模式。在异步回调中，我们更像是一个设备驱动程序，只是将结果缓存在内存中：

```
var tweets = [];

twitter.stream('statuses/filter', {'track':'whatever'}, function(stream) {
  stream.on('data', function (data) {
      //logging the data coming back works fine
      console.log(data);
      //the next line throws "Error: Meteor code must always run within a Fiber"
      tweets.push(data); 
  }); 
}); 
```

然后稍后，回到 Fiber 内的正常 Meteor 执行环境中，无论是在计时器中还是在函数的结果中，我们都会排空 tweets 数组并执行插入操作。Javascript 数组不关心它是否在 Fiber 中运行。

在我们的例子中，我们使用异步 IMAP 电子邮件而不是推文来执行此操作，但类比仍然成立。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-23T20:49:08.003

像这样包装你的回调`Meteor.bindEnvironment`：

```
twitter.stream('statuses/filter', {'track':'whatever'}, function(stream) {
  stream.on('data', Meteor.bindEnvironment(function (data) {
      //logging the data coming back works fine
      console.log(data);
      //the next line throws "Error: Meteor code must always run within a Fiber"
      Tweets.insert(data); 
  }));
}); 
```

根据[this SO post about Async wrappers on the Meteor Server](https://stackoverflow.com/questions/28097503/what-is-the-difference-between-all-of-the-async-wrappers-in-meteor)，您希望在使用`Meteor.bindEnvironment`第三方api/npm 模块管理回调时使用（看起来就是这种情况）

`Meteor.bindEnvironment`创建一个新的 Fiber 并将当前 Fiber 的变量和环境复制到新的 Fiber 中。

# ios - 如何指定特定的 UIScrollView 滚动到顶部

> ID：14290289
> 
> 赞同：0
> 
> 时间：2013-01-12T04:37:46.500
> 
> 标签：ios, uiscrollview

我有一个带有多个 UIScrollViews 的视图。因此，点击标题栏不会滚动到任何滚动条的顶部。他们是一种在我的视图中指定特定滚动条以在点击发生时滚动到顶部的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T05:12:04.323

浏览所有其他滚动视图，并将它们的`scrollsToTop`属性设置为 NO。您要向上滚动的滚动视图必须是唯一将此属性设置为 YES 的滚动视图。

从[UIScrollView.scrollsToTop 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html)：

> 滚动到顶部手势是点击状态栏；当此属性为 YES 时，滚动视图会在此手势发生时跳转到内容的顶部。此属性的默认值为 YES。
> 
> 此手势适用于单个可见滚动视图；如果有多个设置了此属性的滚动视图（例如，日期选择器），或者如果委托在 scrollViewShouldScrollToTop: 中返回 NO，则 UIScrollView 将忽略该请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T05:09:10.337

`[myView.scrollView setContentOffset:CGPointZero animated:YES];`

或者

`[myScrollView setContentOffset:CGPointZero animated:YES];`

# c++ - 运行外部 .exe 并从中接收返回值

> ID：14290291
> 
> 赞同：1
> 
> 时间：2013-01-12T04:38:02.507
> 
> 标签：c++, windows, command-line, console

在 C++ 中，是否可以调用/运行另一个可执行文件并从该可执行文件接收返回值（例如 1 或 0 表示其他 exe 是否成功执行其操作）？

为简单起见，举个例子，如果我有一个名为 filelist.exe 的外部控制台 .exe，它列出了目录中的所有文件并将这些文件名写入文件。如果 filelist.exe 成功运行，则 main 返回 1，否则返回 0。

如果我要使用以下代码运行 filelist.exe，有​​没有办法从 filelist.exe 获取返回值？

```
int res = system("filelist.exe dirPath");

// Maybe the windows function CreateProcess() allows filelist.exe to return
// a value to the currently running application?
CreateProcess(); 
```

注意我不打算创建一个简单的控制台应用程序来列出目录中的文件我正在尝试创建一个控制台应用程序来检查用户是否有一个有效版本的第 3 方程序，如果他们有一个有效的版本和返回 1如果没有，则为 0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T20:39:24.263

一个示例如下所示：

```
 res = CreateProcess(
        NULL,                //  pointer to name of executable module  
        commandLine,         //  pointer to command line string  
        NULL,                //  pointer to process security attributes  
        NULL,                //  pointer to thread security attributes  
        TRUE,                //  handle inheritance flag  
        0,                   //  creation flags  
        NULL,                //  pointer to new environment block  
        NULL,                //  pointer to current directory name  
        &StartupInfo,        //  pointer to STARTUPINFO  
        &ProcessInfo         //  pointer to PROCESS_INFORMATION  
      );

    if (!res)
      //  process creation failed!
      {
        showError(commandLine);
        retVal = 1;
      }
    else if (waitForCompletion)
      {
        res = WaitForSingleObject(
                ProcessInfo.hProcess,  
                INFINITE      // time-out interval in milliseconds  
                );  
        GetExitCodeProcess(ProcessInfo.hProcess, &exitCode);

        retVal = (int)exitCode;
      } 
```

`Process`使用 . 从对象中检索外部进程的返回码`GetExitProcess()`。这假设您的代码在启动该过程后正在等待完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T04:41:31.660

是的，您将启动另一个进程并运行可执行文件。您要问的是所谓[的进程间通信](http://en.wikipedia.org/wiki/Inter-process_communication)，通常通过像您这样的场景中的[信号](http://en.wikipedia.org/wiki/Signal_%28computing%29)或[管道来实现。](http://en.wikipedia.org/wiki/Pipeline_%28Unix%29)

# ios - 如何在没有 spritesheet 的 cocos2d 中创建动画？

> ID：14290292
> 
> 赞同：0
> 
> 时间：2013-01-12T04:38:19.183
> 
> 标签：ios, cocos2d-iphone

我有多个全屏大小的图像，对象在其中移动，而其他一切都是透明的。所以我所需要的动画就是以某种方式不断地交换加载的图像。有没有办法做到这一点？我发现的所有示例都使用 spritesheets

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T04:44:22.567

我对cocos2D一无所知，objective-c是否可以使用它......当我第一次开始时，我会用一个NSTimer和一个整数来跟踪我所在的帧......后来我发现了这个动画过程：

```
 NSArray *imageFrames = [NSArrayarray];
    imageFrames = [[NSArrayalloc] initWithObjects:
                 [UIImageimageNamed:@"image1.png"],
                 [UIImageimageNamed:@"image2.png"],
                 [UIImageimageNamed:@"image3.png"],
                 nil];
    imagesImage.animationImages = imageFrames;
    imagesImage.animationDuration = 0.5;
    imagesImage.animationRepeatCount = 0;
    [imageFrames release]; 
```

和

```
[imagesImage startAnimating]; 
```

# php - 301 重定向显示“页面未正确重定向”错误

> ID：14290299
> 
> 赞同：0
> 
> 时间：2013-01-12T04:40:18.600
> 
> 标签：php, seo, smarty, http-redirect

在我的网站中，我为 SEO 提供了一个虚拟 URL。我的链接如下所示

```
http://legacy.com/project/491/women-tops-long-red-bangalore 
```

在这个 URL women-tops-long-red-bangalore 中，这个措辞是虚拟的，基于页面正在加载的项目 id(491)。在 491/{whatever you will give it will work} 之后。

为此，我想重定向页面。如果有人给

```
 http://legacy.com/project/491/{any} 
```

想重定向到

```
 http://legacy.com/project/491/women-tops-long-red-bangalore 
```

我给出了下面的代码

```
 if(isset($_GET['item_id']))
         {
           Header("HTTP/1.1 301 Moved Permanently" );
           Header("Location: http://".$_SERVER['HTTP_HOST'].$project_link);   
        } 
```

在 $project_link 我正在调用一个函数，它将根据项目 id 返回一个字符串，如下所示

```
 "/project/491/women-tops-long-red-bangalore" 
```

但它显示错误“页面未正确重定向”但网址正在更改

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T04:45:06.787

```
http://legacy.com/project/491/women-tops-long-red-bangalore 
```

匹配模式

```
http://legacy.com/project/491/{any} 
```

重定向到：

```
http://legacy.com/project/491/women-tops-long-red-bangalore 
```

与模式匹配：

```
http://legacy.com/project/491/{any} 
```

重定向到：

```
http://legacy.com/project/491/women-tops-long-red-bangalore 
```

与模式匹配：

```
http://legacy.com/project/491/{any} 
```

...

我不会强制执行该 url，而是通过在页面头部添加规范标签来否定重复内容问题：

```
<link rel="canonical" href="http://legacy.com/project/491/women-tops-long-red-bangalore"> 
```

或者你可以在 PHP 中打破循环

```
if(isset($_GET['item_id']) && $_SERVER['REQUEST_URI'] != $project_link)
{
    Header("HTTP/1.1 301 Moved Permanently" );
    Header("Location: http://".$_SERVER['HTTP_HOST'].$project_link);   
} 
```

# python - Python，第一次使用 Decimal 和 quantize

> ID：14290300
> 
> 赞同：1
> 
> 时间：2013-01-12T04:40:24.840
> 
> 标签：python, string, dictionary, decimal

我只是想知道是否有人对如何改进此代码有任何意见。我的目标是让它尽可能像 Python 一样，因为我正在努力真正学好 Python。这个程序运行良好，但是如果你看到任何你认为可以改进的东西（不是重大变化，只是基本的“我是 python 新手”的东西）这个程序请告诉我。

```
#!/usr/bin/python
from decimal import *

print "Welcome to the checkout counter!  How many items are you purchasing today?"

numOfItems = int(raw_input())

dictionary = {}

for counter in range(numOfItems):

    print "Please enter the name of product", counter + 1
    currentProduct = raw_input()    

    print "And how much does", currentProduct, "cost?"
    currentPrice = float(raw_input())

    dictionary.update({currentProduct:currentPrice})

print "Your order was:"

subtotal = 0
for key, value in dictionary.iteritems():

    subtotal = subtotal + value
    stringValue = str(value)
    print key, "$" + stringValue

tax = subtotal * .09
total = subtotal + tax
total = Decimal(str(total)).quantize(Decimal('0.01'), rounding = ROUND_DOWN)

stringSubtotal = str(subtotal)
stringTotal = str(total)

print "Your subtotal comes to", "$" + stringSubtotal + ".", " With 9% sales tax, your total is $" + stringTotal + "."

print "Please enter cash amount:"
cash = Decimal(raw_input()).quantize(Decimal('0.01'))

change = cash - total
stringChange = str(change)

print "I owe you back", "$" + stringChange

print "Thank you for shopping with us!" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T05:31:49.530

1.  将产品字典称为“产品”或类似的描述性名称，而不仅仅是“字典”
2.  通常，如果您在一个范围内进行迭代，请使用`xrange`而不是以`range`获得更好的性能（尽管在这样的应用程序中这是一个非常小的挑剔）
3.  您可以使用`subtotal = sum(dictionary.itervalues())`快速添加所有项目的价格，而无需使用循环。
4.  您绝对应该始终使用 Decimal 以避免由于`float`.
5.  您可以使用`'%.2f' % value`（旧式格式）或`'{:.2f}' .format(value)`（新式格式）之类的格式字符串来打印带两位小数的值。
6.  税值应该是一个常数，所以它可以很容易地改变（它在两个地方使用，一次用于计算，一次用于显示）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T04:54:43.487

*   更新字典，我会使用`dict[key] = value`, 而不是`dict.update({key:value})`

*   尝试使用格式规范，而不是连接字符串。这看起来更简洁，并且不必将值显式转换为字符串。

    *   C风格：`"Qty: %d, Price: %f" % (qty, price)`
    *   字符串格式：`"Qty: {0}, Price {1}".format(qty, price)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T05:00:26.297

1 在字典中添加键值，您可以使用：

```
dictionary[currentProduct] = currentPrice 
```

但是，在这种情况下你不需要 dict，因为 dict 是无序的。您可以使用元组列表。

2 为什么不使用`Decimal(raw_input())`，那么您可以在不使用浮点数的情况下进行所有十进制计算。

3 要打印结果，您不需要先将值转换为 str，您可以使用`str.format()`

# c++ - 如何在 Visual Studio 2010 中设置单独的 Boost 测试项目

> ID：14290301
> 
> 赞同：3
> 
> 时间：2013-01-12T04:40:29.800
> 
> 标签：c++, unit-testing, boost

我想使用 Boost Test 在 Visual Studio 2010 中对我的代码进行单元测试。我已经下载并构建了最新版本的库。

我在这里和互联网上的其他地方阅读了很多关于这个主题的内容，人们似乎建议在您的解决方案中专门为您的测试提供第二个项目。

不错，很好听 但是，我在实际设置时遇到了麻烦。我还没有找到关于设置它的最佳方法的明确解释。

我是否需要使用项目引用来使我的单元测试项目引用我的主项目？如果是这样，我是否还需要在我的单元测试项目的属性中添加我的主项目的 Include & Source 目录？如果是这样，首先使用项目参考有什么好处？

我是否必须让我的主项目输出一个库以供我的单元测试项目链接？同样，我认为项目参考会使这变得不必要，但似乎我并不真正了解项目参考。

如果可能的话，我能否得到一个非常白痴的证明，一步一步地在 VS2010 中与主项目一起设置 Boost Test 单元测试项目？

我最好使用这里列出的方法（一个项目，构建测试或实际项目 exe 的不同配置）： [http ://blog.yastrebkov.com/2010/07/boost-test-setup-and-usage .html](http://blog.yastrebkov.com/2010/07/boost-test-setup-and-usage.html)

非常感谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T10:51:54.387

建立 Boost.Test 项目并没有什么神奇之处。也许是因为它是一个常规的 C++（可执行）项目，与“普通”应用程序没有任何不同。这就是我所做的：

1.  创建一个新的 C++ 项目。我总是选择带有预编译头文件的 Win32 可执行文件。我有一个命名约定，所有使用 Boost.Test 的测试项目都以“tests.boost.testee_name ...”开头
2.  在`"stdafx.h"`中，添加包含`<boost/unit_test.hpp>`并定义`BOOST_TEST_MODULE`（我总是选择项目名称）。此外，为该项目所需的外部组件添加所有其他包含，例如其他 boost 库、stl 头文件等。这会大大加快编译时间。
3.  被测试者必须是一个库（动态或静态）。所以“添加引用”到所有必需的依赖项。您当然可以测试仅标头库，在这种情况下不要添加引用。
4.  根据 Boost.Test 手册，将源文件添加到您的测试项目中。我强制执行的约定是`BOOST_FIXTURE_TEST_SUITE`每个文件一个。
5.  为方便起见，我有一个为 boost 单元测试量身定制的自定义属性表，我将其添加到每个 boost 测试项目中。其中，它包含一个运行测试的构建后事件。

我必须补充一点，最近，我使用 Visual Studio 2012 切换到 MSTest，它允许以更舒适的方式管理测试和测试结果。尽管如此，对于软件最重要的部分，我仍在编写增强测试，以确保与旧工具集和可能的其他平台的正确性。

干杯，

保罗

# android - Android GridView onitemdownclick

> ID：14290302
> 
> 赞同：0
> 
> 时间：2013-01-12T04:40:47.633
> 
> 标签：android, gridview

我正在按照[本教程](http://developer.android.com/guide/topics/ui/layout/gridview.html)使用 GridView 。

在我的应用程序中，网格中的每个图像都充当将用户带到另一个屏幕的按钮。这一切都很好，花花公子。

我遇到的问题是，一旦用户单击，就找到某种方法使图像变暗，然后在用户释放图像时再次变亮。`onItemClickListener`没有`onItemDownClick`内置功能。创建此功能或类似功能的最佳/最轻松的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T04:42:31.907

而不是 CLICK 使用 TOUCH 事件（它有向下和向上以及许多其他东西），对于变暗和变亮，我会使用一个半不透明的彩色框，您可以根据情况显示/隐藏。

# asp.net - SSRS 和 Lightswitch 应用程序中的身份验证

> ID：14290306
> 
> 赞同：0
> 
> 时间：2013-01-12T04:41:28.913
> 
> 标签：asp.net, iis-7, reporting-services, ssrs-2008, visual-studio-lightswitch

我已经编写了使用 SSRS 和 Lightswitch 的应用程序。Lightswitch 应用程序用于用户的数据输入部分。SSRS 用于根据通过 Lightswitch App 输入的数据生成报告和图表。

我在 SSRS 端配置了基本身份验证，在 Lightswitch 应用程序上配置了 Windows 身份验证。当用户点击应用程序 SSRS 报告时，默认情况下会出现。由于我在 SSRS 端设置了身份验证，因此它第一次要求提供用户凭据。此外，当用户切换到 lightswitch 应用程序进行数据输入时，它会再次要求用户提供凭据。所以基本上用户必须输入两次凭据，这对于可用性来说并不是一件好事。

所以我想知道是否有任何方式用户只需在应用程序启动时登录一次？请让我知道是否可能？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T07:08:04.243

我会尝试对 SSRS 使用 Windows 身份验证并进行配置以满足要求，因此任何一个应用程序都不需要用户登录。这更安全，也更有用。

# ios - 如何使从 nib 文件加载的视图居中？

> ID：14290313
> 
> 赞同：2
> 
> 时间：2013-01-12T04:42:49.957
> 
> 标签：ios, view, alignment, nib

我在 nib 文件中定义了一个视图。（命名`FooView.xib`）

视图具有固定大小（小于屏幕大小）。

我想将它加载到视图控制器（名为`FooViewController.[hm]`）中，并且我希望视图显示在任何设备（通用应用程序）的屏幕中心。

由于xib和viewcontroller类的名称有这样的对应关系，所以xib中的视图是自动加载的。

然后我在方法中编写代码以使`-(void)viewDidLoad`我的视图居中，可以通过`self.view`. 我写这样的东西。

```
CGRect screenBounds = [[UIScreen mainScreen]bounds];
self.view.center = CGPointMake(screenBounds.size.width/2, screenBounds.size.height/2); 
```

它不起作用。我修改时它也不起作用`self.view.frame = ...`。

我检查了`self.view.center`or的值`self.view.frame`。它们确实发生了变化，但我没有在模拟器中看到任何变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T05:03:45.083

在 xib 文件中，确保您已禁用自动布局。

在 viewController.m 中：（* 编辑：将其放在 viewDidAppear 中而不是 viewDidLoad 中）

```
[self.view addSubview:myView];
myView.center = self.view.center; 
```

# excel - 在 Excel 公式中使用数组

> ID：14290315
> 
> 赞同：3
> 
> 时间：2013-01-12T04:43:09.563
> 
> 标签：excel, excel-formula

我想知道在 Excel 中我们是否有类似`ones`或`range`命令的命令。

我在我的一项实验中使用以下命令：

```
=TTEST(A1:A5, {1,1,1,1,1},2,1) 
```

然而，如果实验的迭代次数增加，你就有了一个非常大的公式。所以，如果我能以更优雅的方式编写公式，那么我不必重复**1** 作为实验次数。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T05:01:17.467

它有点难看，但是您可以使用该`ROW`函数的一些小技巧来生成一系列：

该`ROW`函数在用作数组函数时，将返回引用中的行号序列。所以要生成`1,2,3,4,5`你可以使用的数组

```
ROW(1:5) 
```

要生成一个序列，`n`只需将该数组除以它自己：

```
ROW(1:n)/ROW(1:n) 
```

要创建`n`变量，只需使用`INDIRECT`函数和单元格引用：

```
ROW(INDIRECT("1:"&C1))/ROW(INDIRECT("1:"&C1)) 
```

所以你的公式是：

```
=TTEST(A1:A5, ROW(A1:A5)/ROW(A1:A5),2,1) 
```

或者，更简单地说，对于您的情况，只需将*范围*本身划分：

```
=TTEST(A1:A5, (A1:A5)/(A1:A5), 2, 1) 
```

# ember.js - 观察非 ember 全局变量

> ID：14290316
> 
> 赞同：11
> 
> 时间：2013-01-12T04:43:18.910
> 
> 标签：ember.js

我想要一个计算属性来观察非余烬全局：localStorage 中的特定键。这可能吗？以下似乎并没有削减它：

```
someProperty:function(){
    //some functionality
}.property('localStorage.someKey') 
```

是否可以直接做我想做的事情？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-12T06:09:11.090

通常，您可以很好地观察常规 JavaScript 对象。您只需要使用`Ember.get`并`Ember.set`修改它们：

```
var pojo = {};

var MyObject = Ember.Object.extend({
  bigEyeballs: function() {
    var O_O = this.get('pojo.O_O');
    if (O_O) { return O_O.toUpperCase(); }
  }.property('pojo.O_O')
});

var obj = MyObject.create({ pojo: pojo });
console.log(obj.get('bigEyeballs'));

Ember.set(pojo, 'O_O', "wat");
console.log(obj.get('bigEyeballs')); 
```

[你可以在这个 JSBin](http://jsbin.com/uqiyot/2/edit)中看到这个工作。

本地存储有点不同，因为它不是一个**真正**的普通 JavaScript 对象。您可以围绕本地存储创建一个小型 Ember 包装器，并将其用于观察：

```
var LocalStorage = Ember.Object.extend({
  unknownProperty: function(key) {
    return localStorage[key];
  },

  setUnknownProperty: function(key, value) {
    localStorage[key] = value;
    this.notifyPropertyChange(key);
    return value;
  }
});

var storage = new LocalStorage();

var MyObject = Ember.Object.extend({
  bigEyeballs: function() {
    var O_O = this.get('pojo.O_O');
    if (O_O) { return O_O.toUpperCase(); }
  }.property('pojo.O_O')
});

var obj = MyObject.create({ pojo: storage });

console.log(obj.get('bigEyeballs'));

Ember.set(storage, 'O_O', "wat");
console.log(obj.get('bigEyeballs')); 
```

[你可以在JSBin](http://jsbin.com/uqiyot/3/edit)上看到这一点。

在这两种情况下，重要的是您必须使用 Ember 感知设置和获取来观察这些属性。

# matlab - Matlab 中的条件 IF/ELSE 语句

> ID：14290317
> 
> 赞同：0
> 
> 时间：2013-01-12T04:43:22.860
> 
> 标签：matlab

我试图用 Matlab 做一个简单的陈述，如下所示：

```
if TF==1
  disp('One'), break
else continue
end
... ... ...
... ... ... 
```

但即使 TF 不是 1，当我运行命令时，它也不会继续到脚本的其余部分！任何帮助将不胜感激 - 谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T04:49:47.083

该`continue`声明具有非常不同的含义。在循环内，如`for`or`while`循环，`continue`指示跳过当前轮并*继续*循环中的下一次迭代。因此，如果您删除`continue`，您将看到您所期望的行为。这是一个例子：

```
for k = 1 : 10
  if k == 4
    % skip the calculation in the case where k is 4
    continue
  end
  area = k * k;
  disp(area);
end 
```

当循环在 处迭代时`k == 4`，将跳过计算相应正方形面积的块。这个特定的例子不是很实用。

但是，假设您有一个包含十个文件名的列表，并且您希望在此循环“ `for k = 1 : 10`”中处理每个文件。您将不得不尝试打开每个文件，但是如果您发现该文件不存在，处理它的适当方法是打印一个小警告，然后打印`continue`到下一个文件。

# kendo-ui - 将焦点设置在剑道网格中弹出编辑表单的第一个字段上

> ID：14290320
> 
> 赞同：2
> 
> 时间：2013-01-12T04:43:58.197
> 
> 标签：kendo-ui

我在弹出编辑模式中有一个剑道网格。弹出表单的第一个字段是自动完成小部件。每当弹出表单弹出时，我都想关注它。我试图以不同的方式做到这一点

```
$("#grid").kendoGrid({ 
    editor: 
        function(container, options) { 
            $('<input id="item_code_focus" name="' + options.field + '"/>')
                .appendTo(container)
                .kendoAutoComplete({ 
                    -----
                    -----
            }).focus()
        }
}); 
```

但它不起作用。请帮我？...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T11:48:22.123

您可以尝试使用网格的**[编辑](http://docs.kendoui.com/api/web/grid#edit)**事件。

```
 edit:function(e){   
         e.container.data('kendoWindow').bind('activate',function(e){
            $('#autocomplete').focus();
         })

    }, 
```

编辑：实际上你应该使用 Window 激活事件来调用焦点。这是[示例](http://jsbin.com/edamuj/342/edit)。@OnaBai 在使用编辑时调用焦点不会使输入失去焦点 - 实际上动画会导致这种行为。

# mysql - 在 MySQL 中创建内存中和事务安全的表

> ID：14290321
> 
> 赞同：1
> 
> 时间：2013-01-12T04:43:59.973
> 
> 标签：mysql, memory, innodb

我知道我应该使用`engine=MEMORY`在内存`engine=INNODB`中创建表并使表事务安全。但是，我怎样才能实现这两个目标？我试过`engine=MEMORY, INNODB`了，但我失败了。我的目的是快速访问表并允许多个线程更改表的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T22:11:02.013

你没有在上面说明你的目标。我猜您正在寻找良好的性能，并且您似乎还希望该表具有事务性。您唯一的选择确实是 InnoDB。只要您已将 InnoDB 配置为使用足够的内存来保存整个表（使用`innodb_buffer_pool_size`），并且同一服务器上的其他 InnoDB 表没有过多的压力，数据将保留在内存中。如果您担心写入性能（并且再次禁止使用同一系统的其他用途），您可以通过设置`innodb_flush_log_at_trx_commit = 0`和禁用二进制日志记录来降低持久性以显着提高写入性能。

对临时表使用任何类型的触发器都将是一团糟，并且不会给您带来临时表事务性的任何好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T06:32:29.817

据我所知，有两种方法

**第一种方式**

创建一个临时表（这些存储在内存中，差异很小，当会话注销时它们将被删除）

**创建临时表**样本（id **int**）**引擎**=Innodb；

**第二种方式**

您必须创建两个表，一个带有内存引擎，另一个带有 innodb 或 bdb

首先将所有数据插入到您的innodb表中，然后触发将数据复制到内存表中

如果你想清空 innodb 表中的数据，你可以用相同的触发器来做

您也可以使用事件来实现这一点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T06:19:54.003

您正在寻求一种使用 2 个（或更多）引擎创建表的方法，这是 mysql 无法实现的。

但是，我猜您想使用内存，因为您认为 innodb 的速度不足以满足您的需要。我认为 innodb 非常快，可能就足够了，但如果你真的需要它，我认为你应该尝试创建 2 个表：

表 1 内存 <-- 这里是您进行所有 SELECT 的地方

table2 innodb <-- 在这里您将进行 UPDATE、INSERT、DELETE 等操作并添加一个 TRIGGER，因此当更新这个时，table1 会得到相同的修改。

# android - 将 ColorBitmap 转换为 GrayscaleBitmap 不断崩溃

> ID：14290325
> 
> 赞同：0
> 
> 时间：2013-01-12T04:44:27.677
> 
> 标签：android, image-processing, bitmap, grayscale

这是我用来将两张彩色图片转换为灰度并逐像素比较它们的代码。我的应用程序一直强制关闭。这是代码：

```
public boolean equals(Bitmap bitmap1, Bitmap bitmap2) {
        Bitmap grayscaleBitmap1 = Bitmap.createBitmap(
                bitmap1.getWidth(), bitmap1.getHeight(),
                Bitmap.Config.RGB_565);

            Canvas c = new Canvas(grayscaleBitmap1);
            Paint p = new Paint();
            ColorMatrix cm = new ColorMatrix();

            cm.setSaturation(0);
            ColorMatrixColorFilter filter = new ColorMatrixColorFilter(cm);
            p.setColorFilter(filter); 
            c.drawBitmap(bitmap1, 0, 0, p); 
            Bitmap grayscaleBitmap2 = Bitmap.createBitmap(
                    bitmap2.getWidth(), bitmap2.getHeight(),
                    Bitmap.Config.RGB_565);
            Canvas c1 = new Canvas(grayscaleBitmap2);
            c1.drawBitmap(bitmap2, 0, 0, p);    
        ByteBuffer buffer1 = ByteBuffer.allocate(grayscaleBitmap1.getHeight()
                * grayscaleBitmap1.getRowBytes());
        grayscaleBitmap1.copyPixelsToBuffer(buffer1);

        ByteBuffer buffer2 = ByteBuffer.allocate(grayscaleBitmap2.getHeight()
                * grayscaleBitmap2.getRowBytes());
        grayscaleBitmap2.copyPixelsToBuffer(buffer2);

        return Arrays.equals(buffer1.array(), buffer2.array());
    } 
```

这是[logcat](http://pastebin.com/K21R6b68)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T04:49:25.073

```
01-12 10:12:48.947: E/AndroidRuntime(2052): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
01-12 10:12:48.947: E/AndroidRuntime(2052):     at android.os.Handler.<init>(Handler.java:121)
01-12 10:12:48.947: E/AndroidRuntime(2052):     at android.widget.Toast.<init>(Toast.java:68) 
```

这些行表明您在异步任务中的某处写了 Toast。请将您的 Toast 放入 runOnUiThread(); 如下所示：

```
 runOnUiThread(new Runnable() {        
            @Override
            public void run() {
            Toast.makeText(yourActivity.this, "your Text Here!",1000).show();                               
            }
    }); 
```

你就完成了。

# java - 如何从父目录导入java类

> ID：14290333
> 
> 赞同：-1
> 
> 时间：2013-01-12T04:46:29.493
> 
> 标签：java

> **可能重复：**
> [如何在 Java 中使用父目录中的类？](https://stackoverflow.com/questions/12703092/how-to-use-a-class-from-a-parent-directory-in-java)

我有一个在当前目录中的公共类，我需要扩展一个在父目录中的类，我如何在 java 中绘制它

`public class A extends B {`

`}` 这里 B 在父目录中，对此的任何答案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T04:48:14.777

```
import parent.B; 
```

`parent`父包在哪里。

# c++ - fwrite 比 Windows 中的 WriteFile 快吗？

> ID：14290337
> 
> 赞同：9
> 
> 时间：2013-01-12T04:47:33.897
> 
> 标签：c++, performance, winapi, file-io, fwrite

我一直认为 WriteFile 比 fwrite 效率更高，因为 fwrite 在内部调用了 WriteFile，但是下面的测试代码告诉我 fwrite 比 WriteFile 快得多。

fwrite 花费 2 毫秒，而 WriteFile 需要 27000(FILE_ATTRIBUTE_NORMAL)，每次写入调用后都会刷新。如果我用 FILE_FLAG_WRITE_THROUGH 调用 WriteFile，并注释 FlushFileBuffers(wfile) 行，WriteFile 会更快，它花费 800。

那么 fwrite 真的会调用 WriteFile 吗？是什么造成了如此巨大的差异？fwrite 在内部是如何工作的？如何使用 API 比 fwrite 更有效地将数据写入文件？（无缓冲，同步）。

```
 #include <Windows.h>
   #include <stdio.h>
   #include <iostream>

   int main() {
     FILE* cfile = fopen("file1.txt", "w");
     HANDLE wfile = CreateFile("file2.txt", GENERIC_WRITE, FILE_SHARE_READ, NULL, CREATE_ALWAYS, 
           /*FILE_ATTRIBUTE_NORMAL*/FILE_FLAG_WRITE_THROUGH, NULL);
     DWORD written = 0;

     DWORD start_time, end_time;
     char * text = "test message ha ha ha ha";
     int size = strlen(text);
     int times = 999;

     start_time = timeGetTime();
     for(int i = 0; i < times; ++i) {
       fwrite(text, 1, size, cfile);
       fflush(cfile);
     }
     end_time = timeGetTime();
     std::cout << end_time - start_time << '\n';

     start_time = timeGetTime();
     for(int i = 0; i < times; ++i) {
         WriteFile(wfile, text, size, &written, NULL);
         //FlushFileBuffers(wfile);
     }
     end_time = timeGetTime();
     std::cout << end_time - start_time << std::endl;

     system("pause");
     return 0;
   } 
```

**更新：** 感谢您的回答，这是答案：请参阅 VS directory\VS\crt\src\fflush.c：

```
 //fflush.c
    int __cdecl _fflush_nolock (FILE *str) {
        //irrelevant codes
        if (str->_flag & _IOCOMMIT) {
                return (_commit(_fileno(str)) ? EOF : 0);
        }
        return 0;
    } 
```

所以这里有一个 _IOCOMMIT 标志，然后看 ...\src\fdopen.c

```
 FILE * __cdecl _tfdopen (int filedes, const _TSCHAR *mode) {
      //irrelevant codes
        while(*++mode && whileflag)
          switch(*mode) {
      //...
              case _T('c'):
                if (cnflag)
                    whileflag = 0;
                else {
                    cnflag = 1;
                    fileflag |= _IOCOMMIT;
                }
               break;
     //...
    } 
```

_tfopen是fopen内部调用的，参考fopen的文档，我发现是这样的：

" 模式：'c'

启用关联文件名的提交标志，以便在调用 fflush 或 _flushall 时将文件缓冲区的内容直接写入磁盘。”因此，只有在调用 fopen 时设置了 'c' 标志时才会调用 _commit。

_commit 函数最终调用 FlushFileBuffers。

除此之外，我发现当我只向文件写入少量数据时（不超过缓冲区大小），如果 fwrite 没有 fflush，则文本显然不会被写入，而对于 API，即使我不调用 FlushFileBuffers，在 WriteFile 之后，当我打开文件（程序处于睡眠状态）时，内容会自动写入文件，这就是我对 flush 感到困惑的原因之一，这个操作可能是由操作系统完成的，WriteFile 将数据复制到系统缓存中，并且它的文件缓冲区由操作系统管理，因此 fflush() 仅在内部调用 WriteFile 而没有真正的刷新是合理的，系统知道何时刷新它们，可能是文件句柄关闭时或发生对该文件的另一个 I/O 访问时。所以我将基准修改为：

```
 start_time = timeGetTime();
for(int i = 0; i < times; ++i) {
    fwrite(text, 1, size, cfile);
    fflush(cfile);
}
end_time = timeGetTime();
std::cout << end_time - start_time << '\n';

start_time = timeGetTime();
for(int i = 0; i < times; ++i) {
    WriteFile(wfile, text, size, &written, NULL);
}
end_time = timeGetTime();
std::cout << end_time - start_time << std::endl; 
```

结果是时间：99999 fwrite：217 WriteFile：171

因此，总而言之，要加快 API 文件写入操作：

1.  不要显式调用 FlushFileBuffers，系统缓存中的数据会在需要时刷新到磁盘。

2.  为 WriteFile 获取一个缓冲区，就像 fwrite 一样，因为 API 调用比简单的 memcpy 花费更多的时间，当缓冲区填满时调用 WriteFile。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-12T09:35:36.827

使用Sysinternals 中的[Process Monitor (procmon)](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)之类的工具，您会看到对 的调用与`fflush()`（`FlushFileBuffers(wfile)`或对 的`FILE_FLAG_WRITE_THROUGH`标志`CreateFile()`）不同。

`fwrite()`将数据写入缓冲区，直到该缓冲区填满，这将导致它发送缓冲区中的数据以进行`WriteFile()`调用。当您调用时`fflush()`，所有发生的事情是当前在缓冲区中的数据被传递给调用`WriteFile()`-`fflush()`不调用`FlushFileBuffers()`：

```
1:21:32.9391534 AM  test.exe    6132    WriteFile   C:\temp\file1.txt   SUCCESS Offset: 0, Length: 24
1:21:32.9392200 AM  test.exe    6132    WriteFile   C:\temp\file1.txt   SUCCESS Offset: 24, Length: 24
1:21:32.9392340 AM  test.exe    6132    WriteFile   C:\temp\file1.txt   SUCCESS Offset: 48, Length: 24
1:21:32.9392436 AM  test.exe    6132    WriteFile   C:\temp\file1.txt   SUCCESS Offset: 72, Length: 24
1:21:32.9392526 AM  test.exe    6132    WriteFile   C:\temp\file1.txt   SUCCESS Offset: 96, Length: 24
1:21:32.9392623 AM  test.exe    6132    WriteFile   C:\temp\file1.txt   SUCCESS Offset: 120, Length: 24 
```

为了比较，下面是一个没有调用的`fwrite()`循环跟踪示例：`fflush()`

```
1:27:28.5675034 AM  test.exe    3140    WriteFile   C:\temp\file1.txt   SUCCESS Offset: 0, Length: 1,024
1:27:28.5676098 AM  test.exe    3140    WriteFile   C:\temp\file1.txt   SUCCESS Offset: 1,024, Length: 1,024
1:27:28.5676399 AM  test.exe    3140    WriteFile   C:\temp\file1.txt   SUCCESS Offset: 2,048, Length: 1,024
1:27:28.5676651 AM  test.exe    3140    WriteFile   C:\temp\file1.txt   SUCCESS Offset: 3,072, Length: 1,024 
```

这是来自`WriteFile()`循环的跟踪片段（带有`FILE_ATTRIBUTE_NORMAL`标志和显式调用`FlushFileBuffers()`- 它只是使跟踪中发生的事情更容易看到，因为`FlushFileBuffers()`调用显示在跟踪中，而不是仅显示为第二个 4KB`WriteFile()`调用）。

```
1:21:29.0068503 AM  test.exe    6132    WriteFile   C:\temp\file2.txt   SUCCESS Offset: 0, Length: 24, Priority: Normal
1:21:29.0069197 AM  test.exe    6132    FlushBuffersFile    C:\temp\file2.txt   SUCCESS 
1:21:29.0069517 AM  test.exe    6132    WriteFile   C:\temp\file2.txt   SUCCESS Offset: 0, Length: 4,096, I/O Flags: Non-cached, Paging I/O, Synchronous Paging I/O, Priority: Normal
1:21:29.0087574 AM  test.exe    6132    WriteFile   C:\temp\file2.txt   SUCCESS Offset: 24, Length: 24
1:21:29.0087798 AM  test.exe    6132    FlushBuffersFile    C:\temp\file2.txt   SUCCESS 
1:21:29.0088087 AM  test.exe    6132    WriteFile   C:\temp\file2.txt   SUCCESS Offset: 0, Length: 4,096, I/O Flags: Non-cached, Paging I/O, Synchronous Paging I/O, Priority: Normal
1:21:29.0102260 AM  test.exe    6132    WriteFile   C:\temp\file2.txt   SUCCESS Offset: 48, Length: 24
1:21:29.0102428 AM  test.exe    6132    FlushBuffersFile    C:\temp\file2.txt   SUCCESS 
1:21:29.0102701 AM  test.exe    6132    WriteFile   C:\temp\file2.txt   SUCCESS Offset: 0, Length: 4,096, I/O Flags: Non-cached, Paging I/O, Synchronous Paging I/O, Priority: Normal
1:21:29.0113444 AM  test.exe    6132    WriteFile   C:\temp\file2.txt   SUCCESS Offset: 72, Length: 24
1:21:29.0113602 AM  test.exe    6132    FlushBuffersFile    C:\temp\file2.txt   SUCCESS 
1:21:29.0113848 AM  test.exe    6132    WriteFile   C:\temp\file2.txt   SUCCESS Offset: 0, Length: 4,096, I/O Flags: Non-cached, Paging I/O, Synchronous Paging I/O, Priority: Normal 
```

因此，您的基准测试显示`WriteFile()`循环严重劣势的原因仅仅是因为您有大约一千次调用`FlushFileBuffers()`不在`fwrite()`循环中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-12T06:19:37.513

如果设置正确，`WriteFile()` *可能*比`fwrite()`. `WriteFile()`允许您在执行您发出的 IO 请求时微调它使用的条件。

例如，您可以绕过中间缓冲 IO 子系统并直接从数据指针中提取*，*就好像它是中间 IO 缓冲区一样，因此移除了重要的中间人。但是，设置有些限制。您的数据指针必须位于与正在写入的卷的扇区大小相等的字节边界上。`fwrite()`由于希望显而易见的原因，不存在这样的设施。Windows API 爱好者（大约是 J. Richter 和他的兄弟们）非常喜欢玩弄这种用法，`WriteFile()`以挤出他们的 Windows 程序 IO 性能的最后一滴。

如果你想知道为什么人们不是`WriteFile()`爱孩子，我可以向你保证很多人都是，但他们都对可移植代码一点兴趣都*没有。*那些（或者只是不*那么*关心它（Knuth 关于过早优化的说法是什么......？），选择标准设施，如`fwrite()`.

如果您*真的*对 MSVCRT 的实现`fwrite()`以及它的工作原理感兴趣，请查看源代码。它随每个版本的 VC++ Standard 或更高版本一起提供（可能不是 Express；我从未检查过）。

# mysql - MySQL触发器语法错误意外输入结束

> ID：14290340
> 
> 赞同：4
> 
> 时间：2013-01-12T04:48:23.827
> 
> 标签：mysql, sql, triggers, insert

这是我正在使用的查询

```
create trigger trig1 after insert on participant for each row
begin
insert into team(sap) select sap from participant order by ID desc limit 1,1
end; 
```

在将新行插入参与者表后，应该将参与者表中的 sap 字段复制到团队表的 sap 字段中，引擎在“结束”末尾向我显示输入错误的意外结束

我已经尝试了很多方法来修改查询，但我一直收到同样的错误我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T05:14:12.733

您正在使用触发器而不需要在同一个表上运行查询来获取最新的**sap**值，您可以使用**new.sap**直接获取该值。

**查询中的问题**，在您的查询中，您没有在**INSERT..SELECT**查询和**END**关键字之后放置分号（;）。

这将为您工作：

```
DELIMITER $$

DROP TRIGGER /*!50032 IF EXISTS */ `trig1`$$

CREATE
    TRIGGER `trig1` AFTER INSERT ON `participant` 
    FOR EACH ROW BEGIN
        INSERT INTO team(sap) 
        VALUES(new.sap);
    END;
$$

DELIMITER ; 
```

# android - 如何在 android 小部件中注销 SMS 广播接收器

> ID：14290342
> 
> 赞同：0
> 
> 时间：2013-01-12T04:48:50.090
> 
> 标签：android, android-widget

在 android 小部件应用程序中，我使用广播接收器来拦截短信以达到某种目的。它工作正常......但是当我从主屏幕删除小部件时出现问题。短信没有进入收件箱。我的问题是如何注销短信接收器？

请帮助，在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T05:21:31.350

可能您正在清单文件中注册您的接收器。从清单中删除它并尝试`registerReceiver(BroadcastReceiver myreceiver, IntentFilter filter)`在您的`onCreate()`or`onResume()`中注册它，当您想要取消注册它时，`unregisterReceiver(BroadcastReceiver myreceiver)`在您的`onPause()`or中使用`onDestroy()`。希望它会工作...

# linux - 我正在尝试在我的 Linux 服务器上安装 cabal-install

> ID：14290343
> 
> 赞同：2
> 
> 时间：2013-01-12T04:49:18.023
> 
> 标签：linux, haskell, ssh, cabal

看起来大部分构建都在工作，但实际安装失败。

仔细放置 echo 命令表明该命令是失败的：

```
install_pkg "cabal-install" 
```

这是我收到的错误：

```
cleaning...
Linking Setup ...
Configuring cabal-install-1.17.0...
Building cabal-install-1.17.0...
Preprocessing library cabal-install-1.17.0...
[ 1 of 71] Compiling Distribution.Compat.FilePerms ( Distribution/Compat/FilePerms.hs, dist/build/Distribution/Compat/FilePerms.o )
[ 2 of 71] Compiling Distribution.Compat.Semaphore ( Distribution/Compat/Semaphore.hs, dist/build/Distribution/Compat/Semaphore.o )

Distribution/Compat/Semaphore.hs:12:26:
    Module `Control.Exception' does not export `mask_'

Error during cabal-install bootstrap:
Building the cabal-install package failed 
```

这是完整的成绩单：

```
Checking installed packages for ghc-6.12.3...
Cabal is already installed and the version is ok.
transformers is already installed and the version is ok.
mtl is already installed and the version is ok.
deepseq is already installed and the version is ok.
text is already installed and the version is ok.
parsec is already installed and the version is ok.
network is already installed and the version is ok.
time is already installed and the version is ok.
HTTP is already installed and the version is ok.
zlib is already installed and the version is ok.
random is already installed and the version is ok.
stm is already installed and the version is ok.
===========================================
cleaning...
Linking Setup ...
Configuring cabal-install-1.17.0...
Building cabal-install-1.17.0...
Preprocessing library cabal-install-1.17.0...
[ 1 of 71] Compiling Distribution.Compat.FilePerms ( Distribution/Compat/FilePerms.hs, dist/build/Distribution/Compat/FilePerms.o )
[ 2 of 71] Compiling Distribution.Compat.Semaphore ( Distribution/Compat/Semaphore.hs, dist/build/Distribution/Compat/Semaphore.o )

Distribution/Compat/Semaphore.hs:12:26:
    Module `Control.Exception' does not export `mask_'

Error during cabal-install bootstrap:
Building the cabal-install package failed 
```

# php - 如果一行在sql中有重复条目，如何获取其他字段的值

> ID：14290345
> 
> 赞同：1
> 
> 时间：2013-01-12T04:49:34.910
> 
> 标签：php, mysql, sql, select

我有一张这样的桌子：

```
ID   build1   build2  test    status
1    John     ram     test1   pass
2    john     shyam   test2   fail
3    tom      ram     test1   fail 
```

我面临的问题是 - 在我的一个网页上，只有“uild1”列中的值可供我使用。现在在表中有 2 个条目对应于“John”。因此，即使用户选择了不同的“John”，它也只显示该行中其他值的值。在我的网页上，在下拉列表中，用户可以看到 2 个“John”，但由于使用“John”条件进行了查询，因此在这两种情况下，它只显示第一行的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T05:20:56.093

您 build1 不是唯一的或主键，因此它会选择与您的条件匹配的所有行。您应该使用主键或唯一键来查找结果。在您的选择下拉菜单中，您的选项值应该是 uniq/主键，因此当您选择特定的“John”时，它将获得该 john 的结果。

```
 select * from table_name where id=params[:id] ; 
```

如果您发布更多信息。为您编写更好的代码会很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T04:55:01.727

尝试这个：

```
SELECT t1.*
FROM Table1 t1
WHERE t1.build1 NOT IN(SELECT t2.build1
                   FROM table1 t2
                   GROUP BY t2.build1
                   HAVING COUNT(t2.build1) > 1); 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/df965/2)

这只会给你：

```
| ID | BUILD1 | BUILD2 |  TEST | STATUS |
-----------------------------------------
|  3 |    tom |    ram | test1 |   fail | 
```

因为，它是唯一没有重复的行`build1`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T05:04:08.953

如果我正确理解您的问题，给定一个有 2 个 johns 可供点击的网页，您如何相应地获得每个结果？不幸的是，仅使用 SQL 是无法做到这一点的。

在您的 PHP 代码中，如果您可以使用 ID 或计数器/行号将参数传递给 SQL 代码，那么您可以查询数据库以返回相应的唯一记录。

祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T05:05:13.377

```
select * from yourtable where build1 == 'john' limit 1; 
```

# perl - 在 Perl + EOF 处理中向二进制文件写入（和读取）位

> ID：14290347
> 
> 赞同：3
> 
> 时间：2013-01-12T04:49:43.577
> 
> 标签：perl, binary, bit-manipulation

我有两个相关的问题（在 Perl 中）：

1.  将数据写入二进制文件，格式为：单个位标志后跟 8 位
2.  回读相同的格式

我尝试了这个（以及其他变体，但对于我的生活，我无法弄清楚）：

```
binmode(OUT);
my $bit = pack("B1", '1');
my $byte = pack("H2", "02");
print OUT $bit . $byte; 
```

使用十六进制编辑器，我看到我得到 16 位：

```
1000000000000020 
```

我想要的是 9 位：

```
100000020 
```

另外：假设我写出其中两个模式。这意味着我最终得到 9 + 9 = 18 位。我不确定如何处理最后一个字节（填充？）

这是为了压缩和解压缩文件，空间非常宝贵。我希望有一些我不知道的简单的惯用方式来做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T05:46:44.033

文件是字节序列。如果要打印位，则必须使用某种形式的缓冲。

```
my $bits = '';
$bits .= '1';                                        # Add 1 bit.
$bits .= unpack('B8', pack('C', 0x02));              # Add 8 bits.
$bits .= substr(unpack('B8', pack('C', 0x02)), -6);  # Add 6 bits. 
```

这会打印尽可能多的缓冲区：

```
my $len = ( length($bits) >> 3 ) << 3;
print($fh, pack('B*', substr($bits, 0, $len, ''))); 
```

您最终需要填充缓冲区，以便您拥有 8 位的倍数，以便清除其余部分。你可以简单地用零填充。

```
$bits .= "0" x ( -length($bits) % 8 ); 
```

但是，如果您很聪明，您可以提出一个填充方案，用于指示文件实际结束的位置。请记住，您不能再仅依赖文件长度。如果您不使用智能填充方案，则必须使用另一种方法。

智能填充方案的一个示例是：

```
$bits .= "0";
$bits .= "1" x ( -length($bits) % 8 ); 
```

然后，要取消填充，请删除所有尾随`1`位和`0`之前的位。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T05:46:54.400

您可以使用 Bit::Vector 更轻松地管理您的位和转换，

```
use Bit::Vector;

my $bit = Bit::Vector->new_Bin( 1, '1' );

my $byte     = Bit::Vector->new_Bin( 8, '00000010' );
my $byte_9   = Bit::Vector->new_Bin( 9, '000000010' );
my $nineBits = Bit::Vector->new_Bin( 9, '100000000' );
my $carry    = Bit::Vector->new_Bin( 9, '000000000' );
my $ORed     = Bit::Vector->new_Bin( 9, '000000000' );
my $added    = Bit::Vector->new_Bin( 9, '000000000' );

$ORed->Union($nineBits,$byte_9);

print "bit: 0x". $bit->to_Hex(). "\n";
print "byte 2: 0x". $byte->to_Hex(). "\n";
print "nineBits: 0x". $nineBits->to_Hex(). "\n";
print "nineBits: 0x". $nineBits->to_Bin(). "\n";
print "ORed bit and byte 0x". $ORed->to_Dec(). "\n";

open BINOUT, ">out.bin"
    or die "\nCan't open out.bin for writing: $!\n";

binmode BINOUT;

print BINOUT pack ('B*', $ORed->to_Bin()) ."\n" 
```

这是输出

```
>perl bitstuff.pl
bit: 0x1
byte 2: 0x02
nineBits: 0x100
nineBits: 0x100000000
ORed bit and byte 0x-254
>cat out.bin 
\201^@ 
```

# node.js - 使用 css 选择器解析节点中的 html 字符串？

> ID：14290350
> 
> 赞同：5
> 
> 时间：2013-01-12T04:49:56.457
> 
> 标签：node.js, css-selectors, npm

我正在节点中写一个刮板。是否有一个模块可以让我使用 css 选择器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T05:02:47.493

查看优秀的[jsdom](https://github.com/tmpvar/jsdom)，特别是[本节](https://github.com/tmpvar/jsdom#easymode-jsdomenv)，它展示了如何在 Node 中利用 jQuery 来抓取 HTML 文档，从而使用 jQuery 提供的类似 CSS 的选择器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-06-22T09:54:55.347

[Cheeriojs](https://github.com/cheeriojs/cheerio)也是一个不错的选择。它使用 Jquery 选择器引擎。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T05:16:35.560

如果您只需要一个允许您使用 CSS 选择器的模块，我建议您看看[sel](https://github.com/amccollum/sel)。

它已经支持 CSS4 (!) 选择器（至少部分支持），比 Sizzle（jQuery 的选择器引擎）更小，并且专注于一项任务而不是以某种方式完成所有事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-22T09:20:14.387

[汤](https://github.com/harryf/node-soupselect)选择将是另一种选择。我正在寻找一个 nodejs 库，它像Ruby 中的[nokogiri](http://www.nokogiri.org/)一样工作。您不仅可以对文档执行 css 查询，还可以对 html 片段执行 css 查询。soupselect 只是一个选择器，因此您还需要[htmlparser2](https://github.com/fb55/htmlparser2)进行解析。

# haskell - 反转文件中的行

> ID：14290352
> 
> 赞同：1
> 
> 时间：2013-01-12T04:50:12.547
> 
> 标签：haskell, file-io

我尝试在考试前学习 Haskell，它对我来说仍然很神奇。今天我尝试编写一个程序，它读取一个文件，并将它的行以相反的顺序写入另一个文件。结果？很多错误。这是我的代码：

```
import IO

readLines :: Handle -> [String] -> [String]
readLines handler list = do
    eof <- hIsEOF handler
    if eof then list
        else do
            line <- hGetLine handler
            readLines handler (list ++ [line])

writeLines :: Handle -> [String] -> [String]
writeLines handler list = if length list == 0 then list
    else do
        line <- head list
        hPutStrLn handler line
        writeLines tail list

fileToList :: FilePath -> [String]
fileToList filename = do
    handler <- openFile filename ReadMode
    list <- (readLines handler [])
    hClose handler
    list

invLines :: FilePath -> FilePath -> IO ()
invLines input output = do
    handler <- openFile output WriteMode
    inverted <- reverse (fileToList input)
    writeLines handler inverted
    hClose handler

main = invLines "in.txt" "out.txt" 
```

如果你能解释我的错误，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T05:28:15.130

好的，首先，

```
IO ==> System.IO 
```

接下来让我们看看 readLines（PS readFile 在这里可以很好地工作）

```
readLines :: Handle -> [String] -> [String] --You have to return an IO [String] here.
    readLines handler list = do
    eof <- hIsEOF handler
    if eof then return list --Return an IO list
        else do
            line <- hGetLine handler
            readLines handler (list ++ [line]) 
```

接下来`writeLines`（PS`writeFile`也会有帮助）

```
writeLines :: Handle -> [String] -> [String] -- You have to return IO of something, I'd recommend ().
writeLines handler list = if length list == 0
    then list --Change to return ()
    else do
        line <- head list --Should be let here. Like let line = head list
        hPutStrLn handler line
        writeLines tail list -- Should be writeLines handler $ tail list instead. 
```

接下来是`fileToList`

```
fileToList :: FilePath -> [String] --Has to be IO [String]
fileToList filename = do
    handler <- openFile filename ReadMode
    list <- (readLines handler [])
    hClose handler
    list -- Have to use return list 
```

哦，你似乎把线倒置了两次，所以实际上你最终得到了一个非常大的复制例程，在那里删除了反向，你得到了正确的结果。

**最后的代码**

```
import System.IO

readLines :: Handle -> [String] -> IO [String]
readLines handler list = do
    eof <- hIsEOF handler
    if eof 
    then return list
    else do
      line <- hGetLine handler
      readLines handler (line:list)

writeLines :: Handle -> [String] -> IO ()
writeLines handler list = if length list == 0 then return ()
    else do
        let line = head list
        hPutStrLn handler line
        writeLines handler $ tail list

fileToList :: FilePath -> IO [String]
fileToList filename = do
    handler <- openFile filename ReadMode
    list <- (readLines handler [])
    hClose handler
    return list

invLines :: FilePath -> FilePath -> IO ()
invLines input output = do
    handler <- openFile output WriteMode
    inputLines <- fileToList input
    writeLines handler inputLines
    hClose handler

main = invLines "in.txt" "out.txt" 
```

并使用更多的库重写：

```
invLines input output = do
    inputLines <- readFile input
    writeFile output . unlines . reverse . lines $ inputLines

invLines2 input output = 
    readFile input >>= writeFile output . unlines . reverse . lines 
```

要学习的重要课程**您不能从 IO`do`块内部返回正常功能。你必须返回一个 IO 东西**

# php - 代码点火器显示 div 否则在视图中显示不同的 div

> ID：14290353
> 
> 赞同：0
> 
> 时间：2013-01-12T04:50:34.820
> 
> 标签：php, jquery, ajax, codeigniter, controller

我想在我的视图中设置条件中的 div，但我不知道该怎么做。如果控制器的请求对他来说是真实的，那么成功 div 出现，否则失败 div。当时我只是在警报框中打印真假。这是我的观点：

```
 <div class = "success">operation done successfully </div>
             <div class = "failiour">operation done successfully </div>
   //these are the two divs on which i want to apply a condition

    <form>

             </form>        

       <script type="text/javascript">
        $('#btn').click(function() { //  $("#form").serialize()

var item_name = $('#item_name').val();
var cat_id = $('#selsear').val();

if (!item_name || item_name == 'Name') {
    alert('Please enter Category Name');
    return false;
}

var form_data = {
        item_name: $('#item_name').val(),
        cat_id:    $('#selsear').val(),

};

$.ajax({
    url: "<?php echo site_url('itemsController/additems'); ?>",
    type: 'POST',
    data: form_data,
    dataType: 'json',
    success: function(msg) {
        if(msg.res  == 1)
        {
            alert(true);
        }
        else{
         alert(false);             
          }

    }
});

return false;
      });

    </script> 
```

我的控制器

```
 function additems(){

    //getting parameters from view 
    $data = array(
            'item_name' => $this->input->post('item_name'),
            'cat_id' => $this->input->post('cat_id')

    );

    //$is_ajax = $this->input->post('ajax'); //or use this line
    //$this->input->is_ajax_request();

$result = array();
$this->load->model('itemsModel'); 
$query = $this->itemsModel->addItemstoDB($data);

if ($query){  //&& any other condition

    $result['res'] = 1;//process successful - replace 1 with any message
}
else 
 {
    $result['res'] = 0;//process failed - replace 0 with any message
 }
 echo  json_encode($result);//at the end of the function.
}

   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T04:59:01.210

首先隐藏你的div

```
<div class = "success" style="display:none;">operation done successfully </div>
<div class = "failiour" style="display:none;">operation done successfully </div> 
```

那么如果你多次获得reuests

```
$.ajax({
    url: "",
    type: 'POST',
    data: form_data,
    dataType: 'json',
    success: function(msg) {
        if(msg.res  == 1)
        {
            $(".success").show();
            $(".failiour").hide();
        }
        else
        {
            $(".failiour").show();
            $(".success").hide();
        }

    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T04:59:42.323

在你的脚本中，

```
//supposing you are getting the result in response varible
if(response == true) // simply write:  if(response)
{
document.getElementById('success').style.display='block';
document.getElementById('failure').style.display='none';
}
else
{
document.getElementById('success').style.display='none';
document.getElementById('failure').style.display='block';
} 
```

//将ID添加到div并根据您的要求添加样式块/无

```
<div id="success" style="display:block;"></div>

<div id="failure" style="display:none;"></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T04:55:07.870

在成功和失败 div 中通过 css 设置显示无，然后执行以下操作：

```
$.ajax({
    网址：“”，
    类型：'POST'，
    数据：form_data，
    数据类型：'json'，
    成功：功能（味精）{
        如果（msg.res == 1）
        {
            $(".success").fadeIn(500).delay(2000).fadeOut(500);
        }
        别的
        {
            $(".failiour").fadeIn(500).delay(2000).fadeOut(500);
        }

    }
});

```

# ios - 如何将文本文件硬编码到 iOS 应用程序中

> ID：14290354
> 
> 赞同：-1
> 
> 时间：2013-01-12T04:50:52.513
> 
> 标签：ios, objective-c, cocoa, nsbundle

目前使用：

```
NSString* path = [[NSBundle mainBundle] pathForResource:@"filename" 
                                                 ofType:@"txt"]; 
```

但是，这仅在我将文件手动添加到应用程序包中后才有效。

我可以使用文档目录，但这更糟。

重置sim后，文件消失。我怎样才能让它留下来？

我如何将文件从某处写到那里？就像从源文件中一样？我不想分配几兆字节的 NSString 对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T07:48:14.917

归功于 freenode irc (#iphonedev) 上的 Lyle42：

我不知道这个领域甚至存在。通过将任何文件添加到复制文件构建阶段（在构建阶段下），它们会在构建中持续存在。

然后这段代码：

```
NSString *_filePath = [[NSBundle mainBundle] pathForResource:@"filename" ofType:@"txt"];

NSLog(@"%@",_filePath);

NSData *_binary = [NSData dataWithContentsOfFile:_filePath];  

NSString *_fileContents = [[NSString alloc] initWithData:_binary encoding:NSUTF8StringEncoding]; 
```

效果很好。（将文件内容加载到 NSString 中）。

![复制文件构建阶段](../Images/fa957934680d6f4d6da6ff5f0ef46136.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T05:35:33.353

您可以使用它来获取文件的路径

```
NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *path = [documentPaths objectAtIndex:0];
filePath = [path stringByAppendingPathComponent:file_name]; 
```

您可以使用从您的应用程序包中获取文件

```
NSString *pathFromApp = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:file_name]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T05:02:09.350

> 我可以使用文档目录，但这更糟。

并不真地。文档目录是持久的，并且是由您的应用程序创建的基本文档的推荐目录。此外，它由iTunes备份，并且可以指定为iCloud备份。应用程序包无法与之竞争！

> 重置sim后，文件消失。我怎样才能让它留下来？

你不能，一旦模拟器被“重置”（我的意思是硬擦除所有数据和应用程序），什么都没有保存。但是，在两次测试构建之间，从应用程序包中复制的数据应该可以保留，除非您将内容存储在`/tmp`. 此外，捆绑中的对象在构建阶段被“刷新”（重新复制），这意味着您的资源不会被清除，只是重置为项目中指定的资源。

> 我如何将文件从某处写到那里？就像从源文件中一样？我不想分配几兆字节的 NSString 对象。

要将文件读入内存，它最终必须变成“几兆字节的 NSString”，但如果你真的想在你的大型字符串对象计划中添加一点 IO，请查看`NSFileManager`.

# iphone - Obj-C 帮助转换数字的代码（没有已知的选择器类方法）

> ID：14290355
> 
> 赞同：-1
> 
> 时间：2013-01-12T04:51:30.487
> 
> 标签：iphone, objective-c, xcode4.5

这里是 Obj-C 的新手 :) 我正在编写一个转换数字的代码（主要是为了控制点后的零，5.000 -> 5 或 5.00）。所以，我让它工作，但我真的想创建一个类来根据需要使用它。这是工作代码：

主视图控制器.h

```
currentNumber = currentNumber *10 + (float)[sender tag];
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
[formatter setMaximumFractionDigits:2];
[formatter setMinimumFractionDigits:0];
NSString *convertedNumber = [formatter stringFromNumber:[NSNumber numberWithFloat:currentNumber]];
calculatorScreen.text = [NSString stringWithFormat:@"%@",convertedNumber]; 
```

所以，我只想创建一个类来为我做这件事并返回转换后的数字。这是我所做的：

格式编号.h

```
@interface FormatNumber: NSNumber
{
    NSString *nf;
}

- (void) getNumber:(float)n1;
- (NSString *) retNumber;
@end 
```

格式编号.m

```
@implementation FormatNumber;
-(void) getNumber:(float)n1

{

        NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
        [formatter setMaximumFractionDigits:2];
        [formatter setMinimumFractionDigits:0];
        nf = [formatter stringFromNumber:[NSNumber numberWithFloat: n1]];

}

-(NSString *) retNumber; // As I cannot return something from void, I tried to do this way, don't know if it's the better
{
    return nf;
}
@end 
```

MainViewController.h（试图传递并从类中获取值）

```
currentNumber = currentNumber *10 + (float)[sender tag];
NSString *convertedNumber = 0;
FormatNumber *n1 = [[FormatNumber alloc] init];
[FormatNumber getNumber:currentNumber]; // No known class method for selector 'getNumber'
convertedNumber = [FormatNumber retNumber]; // No known class method for selector 'retNumber'
calculatorScreen.text = [NSString stringWithFormat:@"%@",convertedNumber]; 
```

另外，如果有一种简单的方法可以编写此代码，我将不胜感激：)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T05:53:14.253

您可以使用 C-way 来做到这一点，使用 %.2f（两位小数）和/或 %.4f（四位小数）和 %.0 表示无小数。

这是一个示例代码。

```
float f=5.0000;
NSLog(@"res: %.2f", f); //5.00
NSLog(@"res: %.0f", f); //5 
```

# perl - 错误：不是 HASH 引用

> ID：14290359
> 
> 赞同：1
> 
> 时间：2013-01-12T04:52:27.680
> 
> 标签：perl, hash

我有一段代码试图分配返回值，但我看到以下错误。感谢有人可以让我知道为什么会出现此错误。

错误：行中不是 HASH 引用

```
sub getid {
   my ($a, $b) = @_;
   my $id = 1 << $a + 1 << $b;
   return $id;
}

my $tip;
$tip->{'tock'}->[0]->{'brick'} = getid(2, 3);  <== This is where I am having issue. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T04:57:01.913

这不是您实际运行以获得该错误的代码。在您的实际代码中，`$tip`或`$tip->{'tock'}->[0]`已定义但不包含对哈希的引用。打印出来看看是哪一个。

转储您的数据结构以找出它实际上是什么可能很有用。

```
use Data::Dumper;
print(Dumper($tip)); 
```

# c# - 如何在学校的 Linux 服务器上运行 C# 程序？

> ID：14290361
> 
> 赞同：4
> 
> 时间：2013-01-12T04:53:01.207
> 
> 标签：c#, linux, mono

我想在我的 Windows 计算机上的 Visual Studio 上用 C# 编写一个程序，然后将它上传到我学校的 Linux 服务器并在那里运行该程序。作业是通过此服务器上交的：我的教授收到文件并从他的目录中运行它。这可能吗？如果可以，我该怎么做？

我读到了 Mono，但根据我的理解，Mono 用于在 Linux 上编写和运行 C# 应用程序，所以如果它不在我学校的服务器上，那么我将无法运行该应用程序。因此，即使我将 Mono 的副本上传到服务器上的个人目录，我的教授也无法从他的目录运行程序。这个对吗？

我想知道是否有任何方法可以使用或不使用 Mono。

编辑：教授将像这样运行程序：

```
$p1 testfile 
```

其中“testfile”是传递给我的程序的命令行参数。“p1”可能是我将编写以运行该程序的脚本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T05:31:47.820

我建议先检查一下你学校的 Linux 机器是否已经安装了 mono。检查 lib 文件夹，看看是否有一个单声道文件夹。该目录可能不完全对齐，但它应该是这样的：

```
/usr/local/lib/mono/  ; various things here 
```

如果学校系统没有单声道，我会要求教授让系统管理员在一台或多台机器上安装单声道。如果那是不可能的，那么我会自己包装它。

[在这里](http://www.mono-project.com/)查看 Mono 项目。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-12T05:02:59.643

您可以将已编译的应用程序与所需的运行时文件捆绑在一起，这样应用程序就可以在没有安装单声道运行时的情况下运行，但是您应该在给它们之前对其进行测试，让您的教授安装单声道会更容易。

阅读：[http ://www.mono-project.com/Guide:Running_Mono_Applications](http://www.mono-project.com/Guide:Running_Mono_Applications)

# c - 如何获取格式为 2013-01-11 23:34:21 的日期和时间？

> ID：14290363
> 
> 赞同：3
> 
> 时间：2013-01-12T04:53:16.343
> 
> 标签：c, unix

在我的 C 程序中，如何获取格式中的日期和时间`2013-01-11 23:34:21`？

我试过了

```
time_t now;
time(&now);
printf("%s", ctime(&now)); 
```

但它给它就像`Fri Jan 11 23:50:33 2013`......

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T04:55:18.443

您可以使用以下[`strftime()`](http://www.cplusplus.com/reference/ctime/strftime/)功能`<time.h>`

```
#include <time.h>
#include <stdio.h>

int main() {
    time_t now;
    time(&now);

    struct tm* now_tm;
    now_tm = localtime(&now);

    char out[80];
    strftime (out, 80, "Now it's %Y-%m-%d %H:%M:%S.", now_tm);

    puts(out);
} 
```

输出

```
Now it's 2013-01-12 10:33:13. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T04:59:25.417

尝试[`strftime`](http://linux.die.net/man/3/strftime)从`time.h`：

```
char timeString[20];
time_t t;
struct tm tmp;

t = time(NULL);

// TODO: Error checking if (t < 0)

tmp = localtime_r(&t, &tmp);

// TODO: Error checking if tmp == NULL

strftime(timeString, sizeof(timeString), "%Y-%m-%d %H:%M:%S", tmp));

// TODO: Error checking if returned number == sizeof(timeString)-1 
```

# r - 带值的热图（ggplot2）

> ID：14290364
> 
> 赞同：52
> 
> 时间：2013-01-12T04:53:46.823
> 
> 标签：r, ggplot2

我已经看到了在各种 R 图形系统中制作的热图，包括像这样的 lattice 和 base：

![在此处输入图像描述](../Images/1583e120f5c179f93a4e02b622b548bb.png)

我倾向于使用`ggplot2`一点，并希望能够制作一个带有相应单元格值的热图。这是热图和使用的尝试`geom_text`：

```
library(reshape2, ggplot2)
dat <- matrix(rnorm(100, 3, 1), ncol=10)
names(dat) <- paste("X", 1:10)
dat2 <- melt(dat, id.var = "X1")
p1 <- ggplot(dat2, aes(as.factor(Var1), Var2, group=Var2)) +
    geom_tile(aes(fill = value)) +
    scale_fill_gradient(low = "white", high = "red") 
p1

#attempt
labs <- c(apply(round(dat[, -2], 1), 2, as.character))
p1 +  geom_text(aes(label=labs), size=1) 
```

通常我可以计算出要传递的 x 和 y 值，但在这种情况下我不知道，因为此信息未存储在数据集中。如何将文本放在热图上？

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2013-01-12T05:55:26.100

***这已更新以符合 tidyverse 原则并改善 ggplot2 的不良使用***

根据 SlowLeraner 的评论，我很容易做到这一点：

```
library(tidyverse)

## make data
dat <- matrix(rnorm(100, 3, 1), ncol=10)

## reshape data (tidy/tall form)
dat2 <- dat %>%
    tbl_df() %>%
    rownames_to_column('Var1') %>%
    gather(Var2, value, -Var1) %>%
    mutate(
        Var1 = factor(Var1, levels=1:10),
        Var2 = factor(gsub("V", "", Var2), levels=1:10)
    )

## plot data
ggplot(dat2, aes(Var1, Var2)) +
    geom_tile(aes(fill = value)) + 
    geom_text(aes(label = round(value, 1))) +
    scale_fill_gradient(low = "white", high = "red") 
```

[![在此处输入图像描述](../Images/068a93b0d03406e788b072dfde734389.png)](https://i.stack.imgur.com/F1IcO.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2019-09-09T20:31:44.420

还有另一种更简单的方法来制作带有值的热图。您可以使用[pheatmap](https://cran.r-project.org/web/packages/pheatmap/pheatmap.pdf)来执行此操作。

```
dat <- matrix(rnorm(100, 3, 1), ncol=10)
names(dat) <- paste("X", 1:10)
install.packages('pheatmap') # if not installed already
library(pheatmap)
pheatmap(dat, display_numbers = T) 
```

这会给你一个这样的情节

[![带值的热图](../Images/761b58b267042d7277d1fc2519ebb35d.png)](https://i.stack.imgur.com/aeiHS.png)

如果您想删除集群并使用您的配色方案，您可以这样做

```
pheatmap(dat, display_numbers = T, color = colorRampPalette(c('white','red'))(100), cluster_rows = F, cluster_cols = F, fontsize_number = 15) 
```

[![没有聚类和红白色的热图](../Images/e3e710b52bed7c958110f31078d406c4.png)](https://i.stack.imgur.com/TboP5.png)

您还可以更改显示数字的字体大小、格式和颜色。

# algorithm - 如何合并网格上的相邻共面面

> ID：14290365
> 
> 赞同：7
> 
> 时间：2013-01-12T04:54:03.700
> 
> 标签：algorithm, 3d, mesh

我正在寻找一种方法/算法，它允许我将 3d 网格上的几个相邻共面面合并为一个面。我希望这会优化我的网格生成程序，因为现在它会生成许多“小”三角形。当我查看屏幕上的最终 3d 对象时，我可以看到它们都朝向相同的方向，并且可以用一个更大的三角形来替换它们！我希望这很清楚我想要做什么。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T12:59:41.210

我建议您将面投影在一个平面上，而不是在一个平面上应用一个[多边形](https://stackoverflow.com/questions/2667748/union-of-complex-polygons)的算法。在那之后“取消项目”，就是这样。尽可能减少尺寸。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-03-28T18:52:43.430

我也在尝试做类似的方法。Sympy 库有一个功能可以做到这一点

[http://docs.sympy.org/latest/_modules/sympy/geometry/plane.html#Plane.is_coplanar](http://docs.sympy.org/latest/_modules/sympy/geometry/plane.html#Plane.is_coplanar)

# regex - 正则表达式 ~ 提取字符串

> ID：14290367
> 
> 赞同：0
> 
> 时间：2013-01-12T04:55:01.607
> 
> 标签：regex

我需要使用正则表达式从以下字符串中提取

```
console.log("This can be anything except double quote"), 
```

后跟逗号和任何其他字符串

提取输出为

```
console.log("This can be anything except double quote"), 
```

请注意，示例字符串不应按字面意思阅读（例如*，可以是任何*表示随机字符串或符号

```
~!@#$%^&*) 
```

任何想法，对于上述情况，正确的正则表达式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T04:58:50.450

有很多解决方案。我能想到的最简单的：`(console.log[^,]+)`

PS：这将删除控制台语句末尾的逗号。您可以手动添加它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T05:02:01.153

[对带转义引号的引用字符串](https://stackoverflow.com/questions/249791/regex-for-quoted-string-with-escaping-quotes)使用正则表达式：

```
(console\.log\("(?:[^"\\]|\\.)*"\),) 
```

# c - 设置数据段后访问 GDT？

> ID：14290372
> 
> 赞同：2
> 
> 时间：2013-01-12T04:55:48.957
> 
> 标签：c, assembly, x86, gdt, memory-segmentation

这是一个非常愚蠢的问题，但我似乎无法解决它。在我的操作系统中，GDT 是通过与内核链接的汇编代码设置的。发生这种情况时，当然数据段和代码段是在加载 GDT 时设置的。此信息存储在汇编代码中为

```
GDT_Contents db 0, 0, 0, 0, 0, 0, 0, 0, 255, 255, 0, 0, 0, 154, 207, 0, 255, 255, 0, 0, 0, 146, 207, 0 
```

所有段都设置得很好，但是我无法通过指向 GDT_Contents 的指针访问 GDT。我已经测试了几种方法，主要是通过创建一个指向 0（即 GDT_Contents 的位置）的指针并回显它们的字节。它们与 GDT_Contents 不匹配。我很确定这是因为当 GDT 被加载时，它是相对于先前的数据段（0x0 或由引导加载程序设置的，我不确定）。但无论如何，我现在不知道如何访问 GDT，我想设置 TSS，我不能将其硬编码到 GDT_Contents 中，因为它需要指向我的 TSS 结构的指针。我认为这就像恢复以前的数据段一样容易，但我不知道该怎么做。这是设置 GDT 的汇编代码

```
 cli
        mov dword [MultiBootInfo_Structure], EBX
        add dword EBX, 0x4
        mov dword EAX, [EBX]
        mov dword [MultiBootInfo_Memory_Low], EAX
        add dword EBX, 0x4
        mov dword EAX, [EBX]
        mov dword [MultiBootInfo_Memory_High], EAX
        mov dword ESP, Kernel_Stack
        mov dword [_NATIVE_GDT_Pointer + 2], _NATIVE_GDT_Contents
        mov dword EAX, _NATIVE_GDT_Pointer
        lgdt [EAX]
        mov dword EAX, 0x10
        mov word DS, EAX
        mov word ES, EAX
        mov word FS, EAX
        mov word GS, EAX
        mov word SS, EAX
        jmp 8:Boot_FlushCsGDT

Boot_FlushCsGDT:
        mov dword [_NATIVE_IDT_Pointer + 2], _NATIVE_IDT_Contents
        mov dword EAX, _NATIVE_IDT_Pointer
        lidt [EAX]
        mov dword EAX, CR4
        or dword EAX, 0x100
        mov dword CR4, EAX
        mov dword EAX, CR4
        or dword EAX, 0x200
        mov dword CR4, EAX
        mov dword EAX, CR0
        and dword EAX, 0xFFFFFFFD
        mov dword CR0, EAX
        mov dword EAX, CR0
        and dword EAX, 0x1
        mov dword CR0, EAX
        call __ENGINE_ENTRYPOINT__

    Boot_FlushCsGDT.loop:
        cli
        hlt
        jmp Boot_FlushCsGDT.loop
        ret 0x0 
```

当然，这是 32 位保护模式下的 x86。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T23:42:29.090

使用该`sgdt`指令获取 GDT 的大小和地址。这是一个物理地址，因此如果您使用分页，则需要确保在访问它之前将其映射到虚拟内存。`sgdt`将 GDT-1 的大小存储在给定地址的低两个字节中，并将物理地址存储在接下来的四个中。

```
sgdt  dword [NewGDTPointer] 
```

然后，如果 GDT 已经有 TSS 描述符的空白空间，您可以简单地将描述符放在那里。否则，您将需要将 GDT 复制到更大的内存并加载新的内存。

# android - 尝试运行 GoogleMap 应用程序时，我的 android 在 HTC 平板电脑上崩溃 -android

> ID：14290373
> 
> 赞同：0
> 
> 时间：2013-01-12T04:56:23.827
> 
> 标签：android, google-maps-api-3

我是 Android 开发的新手。我试图从此链接运行一个程序，[**显示**](http://mobiforge.com/developing/story/using-google-maps-android)如何使用 Google Map API

然而，在我按照这些步骤并尝试在 HTC 平板电脑上启动我的应用程序之后。我在平板电脑上收到错误“应用程序已意外停止”。我捕获了您可以在下面看到的 logcat 输出。如果有人可以帮助我解决这个问题，我真的很感激。

> ```
> 01-11 20:30:43.703: D/dalvikvm(14541): GC_CONCURRENT freed 245K, 48% free 2975K/5639K, external 0K/0K, paused 3ms+9ms
> 01-11 20:30:43.884: D/dalvikvm(14541): GC_CONCURRENT freed 542K, 50% free 2987K/5959K, external 0K/0K, paused 3ms+4ms
> 01-11 20:30:43.924: D/AndroidRuntime(14541): Shutting down VM
> 01-11 20:30:43.924: W/dalvikvm(14541): threadid=1: thread exiting with uncaught exception (group=0x4001d5a0)
> 01-11 20:30:43.924: E/AndroidRuntime(14541): FATAL EXCEPTION: main
> 01-11 20:30:43.924: E/AndroidRuntime(14541): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.googlemap/com.example.googlemap.MainActivity}: android.view.InflateException: Binary XML file line #15: Error inflating class fragment
> 01-11 20:30:43.924: E/AndroidRuntime(14541):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1840)
> 01-11 20:30:43.924: E/AndroidRuntime(14541):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1861)
> 01-11 20:30:43.924: E/AndroidRuntime(14541):    at android.app.ActivityThread.access$1500(ActivityThread.java:132)
> 01-11 20:30:43.924: E/AndroidRuntime(14541):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1038)
> 01-11 20:30:43.924: E/AndroidRuntime(14541):    at android.os.Handler.dispatchMessage(Handler.java:99)
> 01-11 20:30:43.924: E/AndroidRuntime(14541):    at android.os.Looper.loop(Looper.java:150)
> 01-11 20:30:43.924: E/AndroidRuntime(14541):    at android.app.ActivityThread.main(ActivityThread.java:4310)
> 01-11 20:30:43.924: E/AndroidRuntime(14541):    at java.lang.reflect.Method.invokeNative(Native Method)
> 01-11 20:30:43.924: E/AndroidRuntime(14541):    at java.lang.reflect.Method.invoke(Method.java:507)
> 01-11 20:30:43.924: E/AndroidRuntime(14541):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
> 01-11 20:30:43.924: E/AndroidRuntime(14541):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
> 01-11 20:30:43.924: E/AndroidRuntime(14541):    at dalvik.system.NativeStart.main(Native Method)
> 01-11 20:30:43.924: E/AndroidRuntime(14541): Caused by: android.view.InflateException: Binary XML file line #15: Error inflating class fragment
> 01-11 20:30:43.924: E/AndroidRuntime(14541):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:581)
> 01-11 20:30:43.924: E/AndroidRuntime(14541):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
> 01-11 20:30:43.924: E/AndroidRuntime(14541):    at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
> 01-11 20:30:43.924: E/AndroidRuntime(14541):    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
> 01-11 20:30:43.924: E/AndroidRuntime(14541):    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
> 01-11 20:30:43.924: E/AndroidRuntime(14541):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:255)
> 01-11 20:30:43.924: E/AndroidRuntime(14541):    at android.app.Activity.setContentView(Activity.java:1728)
> 01-11 20:30:43.924: E/AndroidRuntime(14541):    at com.example.googlemap.MainActivity.onCreate(MainActivity.java:16)
> 01-11 20:30:43.924: E/AndroidRuntime(14541):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1093)
> 01-11 20:30:43.924: E/AndroidRuntime(14541):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1804)
> 01-11 20:30:43.924: E/AndroidRuntime(14541):    ... 11 more
> 01-11 20:30:43.924: E/AndroidRuntime(14541): Caused by: java.lang.ClassNotFoundException: android.view.fragment in loader dalvik.system.PathClassLoader[/system/framework/com.google.android.maps.jar:/data/app/com.example.googlemap-2.apk]
> 01-11 20:30:43.924: E/AndroidRuntime(14541):    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
> 01-11 20:30:43.924: E/AndroidRuntime(14541):    at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
> 01-11 20:30:43.924: E/AndroidRuntime(14541):    at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
> 01-11 20:30:43.924: E/AndroidRuntime(14541):    at android.view.LayoutInflater.createView(LayoutInflater.java:471)
> 01-11 20:30:43.924: E/AndroidRuntime(14541):    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:549)
> 01-11 20:30:43.924: E/AndroidRuntime(14541):    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
> 01-11 20:30:43.924: E/AndroidRuntime(14541):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
> 01-11 20:30:43.924: E/AndroidRuntime(14541):    ... 20 more 
> ```

这是 Manifest.xml：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.googlemap"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <uses-library android:name="com.google.android.maps" />
    <activity
        android:name="MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
<meta-data
android:name="com.google.android.maps.v2.API_KEY"
android:value="AIzaSyBjpVaza7xnJkK64dlFl0v0n3h9QowvcB0"/>

</application>

<permission
      android:name="com.example.googlemap.permission.MAPS_RECEIVE"
      android:protectionLevel="signature"/>
<uses-permission android:name="com.example.googlemap.permission.MAPS_RECEIVE"/>
    <uses-permission android:name="android.permission.INTERNET" />     
    <uses-feature
  android:glEsVersion="0x00020000"
  android:required="true"/>
</manifest> 
```

这是 MainActivity.xml：

```
package com.example.googlemap;

import android.os.Bundle;
//import android.app.Activity;
import android.view.Menu;
//import android.view.MenuItem;
//import android.support.v4.app.NavUtils;
import com.google.android.maps.MapActivity;
//import com.google.android.maps.MapView;

public class MainActivity extends MapActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    } 

} 
```

最后一个activity_main.xml：

```
package com.example.googlemap;

import android.os.Bundle;
//import android.app.Activity;
import android.view.Menu;
//import android.view.MenuItem;
//import android.support.v4.app.NavUtils;
import com.google.android.maps.MapActivity;
//import com.google.android.maps.MapView;

public class MainActivity extends MapActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    } 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T05:54:50.960

看来应该是android.app.Fragment，而不是android.app.fragment。01-11 20:30:43.924: E/AndroidRuntime(14541): 由: java.lang.ClassNotFoundException: android.view.fragment

编辑：误读您的代码。仍在寻找答案。

# android - 无尽的列表视图不加载项目

> ID：14290374
> 
> 赞同：1
> 
> 时间：2013-01-12T04:56:28.910
> 
> 标签：android, json

我正在使用 listview 来显示从 json 响应中获得的项目。目前正在显示 10 个项目，因为我向下滚动必须加载更多项目，但它没有发生。以下是我的代码有人可以帮助我吗？答案将不胜感激。

```
public class MainActivity extends ListActivity   {

ListView list;
LazyAdapter adapter;
JSONArray posts;

// All static variables
static final String URL = "http://site.org/";

 static final String KEY_POSTS = "posts";
 static final String KEY_ID = "id";
static final String KEY_TITLE = "title";
static final String KEY_DATE = "date";
static final String KEY_CONTENT = "content";
static final String KEY_AUTHOR = "author";
static final String KEY_NAME = "name";
static final String KEY_ATTACHMENTS = "attachments";
static final String KEY_SLUG = "slug";
static final String KEY_THUMB_URL = "thumbnail";
static final String KEY_IMAGES = "images";
static final String KEY_URL = "url";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    final Handler handler = new Handler();
    Runnable runable = new Runnable() {

        @Override
        public void run() {

            //call the function
            LoadData();
            //also call the same runnable
            handler.postDelayed(this, 40000);
        }
    };
    handler.postDelayed(runable, 10);

}public void LoadData(){

     ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

        // Creating JSON Parser instance
                JSONParser jParser = new JSONParser();

                // getting JSON string from URL
                JSONObject json = jParser.getJSONFromUrl(URL);
                try {
                    JSONArray posts = json.getJSONArray(KEY_POSTS);

        // looping through all song nodes <song>
                for(int i = 0; i < posts.length(); i++){
                    JSONObject c = posts.getJSONObject(i);
                    // Storing each json item in variable
                    String id = c.getString(KEY_ID);
                    String title = c.getString(KEY_TITLE);
                    String date = c.getString(KEY_DATE);
                    String content = c.getString(KEY_CONTENT);
                    // to remove all <P> </p> and <br /> and replace with ""
                     content = content.replace("<br />", "");
                     content = content.replace("<p>", "");
                     content = content.replace("</p>", "");

                    //authornumber is agin  JSON Object
                    JSONObject author = c.getJSONObject(KEY_AUTHOR);
                    String name = author.getString(KEY_NAME);

                    String url = null;
                    String slug = null;
                    try {
                    JSONArray atta = c.getJSONArray("attachments");
                    for(int j = 0; j < atta.length(); j++){
                        JSONObject d = atta.getJSONObject(j);

                        slug = d.getString(KEY_SLUG);

                        JSONObject images = d.getJSONObject(KEY_IMAGES);

                        JSONObject thumbnail = images.getJSONObject(KEY_THUMB_URL);
                        url = thumbnail.getString(KEY_URL);

                    }
                    } catch (Exception e) {
                        e.printStackTrace();

                    }

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            map.put(KEY_ID, id);
            map.put(KEY_TITLE, title);
            map.put(KEY_DATE, date);
            map.put(KEY_NAME, name);
            map.put(KEY_CONTENT, content);
            map.put(KEY_SLUG, slug);
            map.put(KEY_URL, url);

            // adding HashList to ArrayList
            songsList.add(map);
                }   
                }catch (JSONException e) {
                    e.printStackTrace();

                    }

        // Getting adapter by passing json data ArrayList
        adapter=new LazyAdapter(this, songsList);    
        adapter.notifyDataSetChanged();

        ListView  list=(ListView)findViewById(android.R.id.list);

        list.setAdapter(adapter);

    // Launching new screen on Selecting Single ListItem
    list.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String title = ((TextView) view.findViewById(R.id.title)).getText().toString();
            String date = ((TextView) view.findViewById(R.id.date)).getText().toString();
            String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
            String content = ((TextView) view.findViewById(R.id.content)).getText().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(),SampleDesp.class);
            in.putExtra(KEY_TITLE, title);
            in.putExtra(KEY_DATE, date);
            in.putExtra(KEY_NAME, name);
            in.putExtra(KEY_CONTENT, content);
            startActivity(in);

        }
    });

    list.setOnScrollListener(new OnScrollListener(){

        @Override
        public void onScroll(AbsListView view, int firstVisibleItem,
                int visibleItemCount, int totalItemCount) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onScrollStateChanged(AbsListView view,
                int scrollState) {
            // TODO Auto-generated method stub

        }

       });
}
} 
```

# android - Window > AVD Manager 在我的 Eclipse 中不存在

> ID：14290375
> 
> 赞同：2
> 
> 时间：2013-01-12T04:56:41.940
> 
> 标签：android, android-emulator, avd

我只是安装`Fedora 17`. 我正在使用`Eclipse 4.2.1`. 我有一个' `My First App`'教程。一个简单的“Hello World”，我什至无法让它运行。我有十几次“安装新软件”。它只是没有出现。我看过的任何视频或教程都没有向我展示如何确保一切正常并正常运行，以及如果没有，如何修复它。它只是说“ `install this, click, click, click, then go to Windows > AVD Manager.`”它不存在。这非常令人沮丧。如果我什至无法运行应用程序，我该如何制作它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-24T05:15:03.267

去

```
Eclipse->window -> customize Perspective -> Command Groups Availability -> tick the Android SDK and AVD manager. 
```

现在你可以去看看

`Eclipse->window -> AVD Manager`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T05:00:00.347

首先检查您的 android SDK 路径是否正确

```
Window-> preferences ->Android ->SDK Location. 
```

如果正确，请按照步骤将它们设置为工具栏。

你可以从这里查看。就这样做

```
Eclipse->window -> customize Perspective -> Toolbar Visibility -> tick the Android SDK and AVD manager. 
```

你完成了。如果它也不再帮助你，那么你必须重新安装 SDK。

希望它会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T07:29:30.553

我也遇到了这个问题。更新到 Juno 后，在偏好设置、文件 -> 新建 -> 项目...和 ​​Window 下的 Android SDK 管理器中都找不到 Android。

对此的解决方案实际上是我运行了一个不兼容的 java 版本，尽管没有任何错误告诉我这一点。经过数小时的研究，我：

*   将我的 JDK 升级到版本 7，
*   重新启动 Eclipse，

一切都恢复正常了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-16T07:40:32.663

也许这个答案有点晚了，但是我在 Mac 上遇到了这个问题，在搜索和测试了很多解决方案之后，我必须做的是删除我的工作区文件夹。

之后，一切都按预期进行。

我希望这会对某人有所帮助。

# javascript - HTML 中的制表符空间

> ID：14290379
> 
> 赞同：5
> 
> 时间：2013-01-12T04:57:08.550
> 
> 标签：javascript, html, extjs

我想在我的字符串中使用制表符空间。我正在提供使用新行的代码。但我不知道如何在字符串中使用制表符空间。谁可以帮我这个事 ！？

```
"Warning ! Sorry Cash Pay is less than this  <br/> month\'s installment. Please pay the  <br/> right amount." 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-12T05:04:38.233

`&#09;`是 ASCII 中的 TAB 字符。但根据 html 规范，所有空白字符都将被剥离为单个字符。还有其他空白字符。喜欢`&thinsp;`，你`&emsp;`也`&ensp;`可以试试。

## 更新

它似乎`&emsp;`给出了标签大小的间距。请参阅以下内容

*   `a&emsp;b`呈现为**b**
*   `a&ensp;b`呈现为**b**
*   `a&thinsp;b`呈现为**b**
*   `a&nbsp;b`呈现为**b**
*   `a&#09;b`呈现为**b**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-10T21:22:03.500

如果你把你的字符串放在一个 HTML`<pre>`元素中，那么它可以有一个制表符。`"Warning! \t error"`要放入 innerHTML 的字符串集`<pre id="output"></pre>`将导致
: `Warning! error`。

另请参阅：
https ://stackoverflow.com/questions/4631646/how-to-preserve-whitespace-indentation-of-text-enclosed-in-html-pre-tags-exclu

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-26T05:53:35.510

您还可以使用`&nbsp`（不间断空格）在 HTML 行中创建空格。

```
"Warning ! Sorry Cash Pay is less than this &nbsp;&nbsp; month\'s installment. Please pay the  &nbsp; right amount." 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-20T04:36:48.233

如果要添加单个空格，请键入`&nbsp;`

如果要添加 2 个空格，请键入`&ensp;`

如果要添加4个空格，请键入`&emsp;` *（4个空格是一个`tab`空格）*

# api - 使用 JavaScript 以编程方式更新 Google 电子表格？

> ID：14290380
> 
> 赞同：4
> 
> 时间：2013-01-12T04:57:16.937
> 
> 标签：api, javascript

是否可以使用网页中的 JavaScript 更新 Google 电子表格？

设想：

1) 用户登陆网页

2）JS脚本执行，修改谷歌电子表格

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T08:28:21.443

这是可能的，虽然我觉得很难。有关所有详细信息，请参见此处：[https ://developers.google.com/google-apps/spreadsheets/](https://developers.google.com/google-apps/spreadsheets/)

如果它是私有的 Google 电子表格，那么您需要处理 oAuth 2.0（Google 的身份验证）。 [https://developers.google.com/accounts/docs/OAuth2](https://developers.google.com/accounts/docs/OAuth2)

请参阅此处了解如何使用 Javascript： [http ://code.google.com/p/google-api-javascript-client/wiki/Authentication](http://code.google.com/p/google-api-javascript-client/wiki/Authentication)

# ios - 双界面在线/移动市场的系统架构建议

> ID：14290381
> 
> 赞同：0
> 
> 时间：2013-01-12T04:57:33.177
> 
> 标签：ios, ruby-on-rails, architecture, amazon-web-services

我的创业公司正在建立一个在线/移动劳动力市场，其中将有一个业务界面供企业发布工作，我们通过移动界面为用户分配这些工作。我们使用 Rails、REST、Amazon RDS & EC2 和 mysql。

我的问题是：从服务器端架构的角度来看，这样做有意义吗？：

a) 有 2 个应用程序，一个服务于 Web 界面，一个充当移动界面的服务器端 (API)，并且都通过数据库和 2 个不同的 EC2 实例进行通信

b) 尝试构建一个服务于两个接口的综合应用程序

任何关于利弊的意见和观点将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T04:02:29.980

总体目标应该是在移动应用程序和 Web 应用程序之间拥有最多的通用代码。否则，您将面临维护难题，例如修复错误或至少在两个地方添加功能。

理想情况下，前端以下的所有内容都应该是通用的。Web UI 本身应该调用移动应用程序所需的服务器端 API。大部分逻辑都应该放在这些 API 中，只将呈现细节留给 UI。这是 MVC 等许多模式所规定的。

我有一个自己运行的移动站点和桌面站点。代码库在 PHP 级别完全相同。两者之间只有 smarty 模板不同。诚然，移动应用程序不同于移动网站，但基本原则仍然适用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T10:22:18.657

如果您将系统分解为更小、更简单且独立的组件，Amazon Web Services 将为您提供一些工具，以使您的架构更简单、更健壮和可扩展。

由于您有一组不同[大小的实例](http://aws.amazon.com/ec2/instance-types/)，从微型到特大（以及一些特大），您可以灵活地将每种服务类型混合到适当的大小、配置、软件依赖关系、更新周期等。这将使开发人员、测试人员和管理员的生活更加轻松。

您还可以独立扩展甚至[自动扩展](http://aws.amazon.com/autoscaling/)每个层和服务。如果其中一个接口或另一个接口有更多用户，或者通过其中一个接口提供的数据大小增加，则只能扩展相关服务。它将为您节省扩展整个系统的复杂性和成本。

AWS 的另一个特点是能够根据您的需要向上、向下、向外和向内扩展。例如，如果其中一个接口在工作日的用户较多，而在周末的用户较少，则可以在周末或晚上缩小该接口，从而为该实例节省 50% 的计算成本。在这方面，您可以从更多静态接口的按需模型切换到[保留实例](http://aws.amazon.com/ec2/reserved-instances/)，再次节省 50% 的成本。

为了允许不同接口之间的通信，您可以使用您的数据库，但您还可以根据您的用例提供更多选项。一种选择是将排队系统用作[SQS](http://aws.amazon.com/sqs/)。队列用作接口之间的缓冲区，降低了某个组件发生故障（软件错误、硬件故障...）的风险，从而影响整个系统。接口间通信的另一个选项，更注重性能的是使用内存缓存。AWS 正在提供[ElasticCache](http://aws.amazon.com/elasticache/)作为此类服务。它可以比在短时间内和高负载下更新此类瞬态数据更有效。

除了在单台机器上快速（和肮脏）实施单一服务之外，我没有看到任何长期的缺点。

# ios - 如何提高 CALayer 动画的性能？

> ID：14290382
> 
> 赞同：1
> 
> 时间：2013-01-12T04:57:57.590
> 
> 标签：ios, uiview, core-animation, calayer

在学习 Core Animation 时，我制作了一个 UIView 类别，它可以将子视图分解为许多图块并进行扩散。 [https://github.com/minorblend/HNTileDisappear](https://github.com/minorblend/HNTileDisappear) 但是，当瓦片数量不小的时候，动画的FPS急剧下降。有没有什么方法或想法可以提高这种CALayer动画的性能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T05:04:46.637

我想到了几件事：

1）`shouldRasterize`在您的图层上设置为 YES

2）如果可以的话，不要在帧中使用小数值

3）让你的图层不透明

4）尝试`drawsAsynchronously`在图层上设置属性

# jquery - 错误：在 Rails 3 中找不到文件“jquery-ujs”

> ID：14290383
> 
> 赞同：0
> 
> 时间：2013-01-12T04:58:26.410
> 
> 标签：jquery, ruby-on-rails-3

我的`_header.html.erb`文件中有以下内容：

```
<%= stylesheet_link_tag 'application', :media => "all" %>
<%= javascript_include_tag 'application' %>
<%= csrf_meta_tags %>
<%= favicon_link_tag '/favicon.ico'%> 
```

我的 gemfile 包括以下内容：

```
source 'https://rubygems.org'

gem 'rails', '3.2.9'
gem 'jquery-rails'
gem 'bcrypt-ruby'
gem 'paperclip'

group :assets do  # Gems used only for assets and not required in production environments by default.
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'

end

group :development, :test do
  gem 'rspec-rails'
  gem 'sqlite3'
  gem 'thin'

end

group :production do
  gem 'pg'

end 
```

我的`bundle show`证明`'jquery-rails'`是安装的。所以查看我的`application.js`文件表明

```
//= require jquery
//= require jquery_ujs
//= require_tree . 
```

都在场并被解释。

我正进入（状态 -`ERROR: Sprockets::FileNotFound in Home#landing`

在`app/views/layouts/_header.html.erb where line #6 raised:`

```
3: <head>
4:   <title>SampleApp</title>
5:   <%= stylesheet_link_tag 'application', :media => "all" %>
6:   <%= javascript_include_tag 'application' %>
7:   <%= csrf_meta_tags %>
8:   <%= favicon_link_tag '/favicon.ico'%>
9: </head> 
```

在谷歌搜索这个问题时，我知道它`jquery-rails`同时提供了 jQuery 和 jquery-ujs 并且第 6 行应该`jquery-ujs`从内部调用`application.js`

有人能告诉我为什么我会收到这个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T08:28:13.820

替换您的以下行：

```
<%= javascript_include_tag 'application' %>
<%= csrf_meta_tags %> 
```

用我的台词：

```
<%= javascript_include_tag 'http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js' %>
<%= javascript_include_tag 'rails' %> 
```

希望能解决您的问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T03:30:08.277

我发现它与“瘦”引擎有关。我删除了它和离开时的问题。我没有时间深入研究为什么会出现这个问题，但是如果其他人想评论 Thin 导致错误的原因，请成为我的客人。

# jquery - 如何在点击时获取 div 的类

> ID：14290384
> 
> 赞同：-6
> 
> 时间：2013-01-12T04:58:28.560
> 
> 标签：jquery

我有以下 div 结构

```
<div class="mainDiv">
    <div class="subDiv01">
    </div>
    <div class="subDiv02">
    </div>
    <div class="subDiv03">
    </div>
    <div class="subDiv04">
    </div>
</div> 
```

我怎么知道 subDiv 被点击了？请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T05:00:21.797

尝试

```
$('.mainDiv div').click(function(){
    var className = $(this).attr('class');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T05:12:49.957

**[演示](http://jsbin.com/ewijej/1/edit)**

```
$('.mainDiv').find('div').click(function(){
    alert( this.className );
}); 
```

# vb.net - 注册表监控和重定向帮助 (vb.net)

> ID：14290389
> 
> 赞同：0
> 
> 时间：2013-01-12T04:59:03.263
> 
> 标签：vb.net, redirect, registry

我正在学习 VB.NET。这是我的第一语言。

我正在尝试为注册表写入位置不确定的应用程序构建启动器。我正在努力使应用程序可移植。（应用基于低 .NET 框架的兼容性）

我寻找了不同的方法，例如强制注册表虚拟化或通过 api 使用注册表虚拟化。（认为​​如果合并它们，我可以卸载写入。）

我还认为我可以监视注册表中某个 PID 的任何写入。我还寻找了执行此操作的应用程序。像沙盒一样重定向任何写入。但没有运气。

因此，如果我需要添加更多详细信息，请告诉我并感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T06:00:58.740

您可以查看 VMWare ThinApp 或其他应用程序虚拟化工具之类的产品，它们会自动为您执行此操作，而无需编写任何代码。

也许只有我一个人，但这听起来像是您在第一个程序中尝试做的一件非常复杂的事情。

# php - 创建随机文件夹 - PHP

> ID：14290391
> 
> 赞同：6
> 
> 时间：2013-01-12T04:59:19.290
> 
> 标签：php

我开发了一个 API 集成，它包含多个图像/文件上传。如果多个用户上传具有相同名称的文件，则存在名称冲突。

我计划创建具有随机名称的动态文件夹来解决此问题（作为临时文件夹，一旦完成该过程将删除）。是否有任何方法/技术可用于在 PHP 中生成随机文件夹？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-12T05:06:42.047

对于这样的事情，我发现 php 函数[uniqid](http://php.net/uniqid)很有用。基本上，是这样的：

```
$dirname = uniqid();
mkdir($dirname); 
```

然后只需将上传的文件移动到该目录即可。

编辑：忘了提，目录名称不是随机的，但保证是唯一的，这似乎是你需要的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-16T17:57:43.947

我想最好有一个函数来尝试创建随机文件夹（并验证它是否成功）直到它成功。

这个没有竞争条件，也不依赖于对 uniqid() 提供尚未在 tempdir 中用作名称的名称的信任。

```
function tempdir() {
    $name = uniqid();
    $dir = sys_get_temp_dir() . '/' . $name;
    if(!file_exists($dir)) {
        if(mkdir($dir) === true) {
            return $dir;
        }
    }
    return tempdir();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T05:07:06.697

是的，它可以使用`mkdir()`示例

```
<?php
mkdir("/path/to/my/dir", 0700);
?> 
```

更多检查这个

[http://php.net/manual/en/function.mkdir.php](http://php.net/manual/en/function.mkdir.php)

# c++ - 当线程有无限循环时 TerminateThread 锁定

> ID：14290394
> 
> 赞同：0
> 
> 时间：2013-01-12T04:59:33.977
> 
> 标签：c++, windows, multithreading

所以我一直在学习Windows API中的线程，我写了一些测试代码，但我遇到了一些问题。首先我有两个功能：

```
DWORD WINAPI MyThreadFunction( LPVOID lpParam ) 
{
    int i = (int)lpParam;
    cout << i << ".) I work! " << endl;
    return 0;
} 
```

和

```
// MyThreadFunction2 - loops continuously forever, outputing "working..." every 1ms
DWORD WINAPI MyThreadFunction2( LPVOID lpParam ) 
{
        int i = (int)lpParam;
    while(1) {
        cout << i << ".) Working... " << endl;
        Sleep(1);
    }
    return 0;
} 
```

我正在使用 CreateThread 创建线程，但稍后我会将其更改为 _beginThread，这是人们在另一篇不同但相关的帖子中告诉我要做的。这就是我创建线程的方式：

```
 threads.push_back(CreateThread(
                                   NULL,           // default security attributes
                                   0,              // use default stack size
                                   lpStartAddress, // thread function name
                                   lpParameter,    // arugument to thread function
                                   0,              // use default creation flag
                                   NULL));         // ignore thread identifier. 
```

我将创建的线程句柄放入向量中，但这无关紧要。基本上我有上面的代码工作，它可以很好地创建线程。我遇到的问题是在使用 MyThreadFunction2 创建线程时调用 TerminateThread(HANDLE, 0)，它会永远循环。当我调用 TerminateThread 时，我的程序只是冻结并停在那里。似乎线程已停止，因为我没有收到“正在工作...”消息，但它不会继续任何其他代码。但是，当我使用 MyThreadFunction 调用相同的函数时，它可以正常工作。

我不知道我如何解释正在发生的事情是否非常令人困惑，我希望不是。我知道这不是一个“只是转储代码，然后让人们修复它”的地方——我在别人的帖子上读到过，但以防你不理解我上面写的东西，或者它很有帮助，这里是我的代码：

线程管理器.cpp

[http://pastebin.com/0B1N3TAH](http://pastebin.com/0B1N3TAH)

线程管理器.h

[http://pastebin.com/yfwMJTaz](http://pastebin.com/yfwMJTaz)

对不起，代码写得不好，有些东西不完整。我仍在努力重新学习 C++ 并学习如何使用 Windows API。但是有没有人知道我可能做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T05:37:34.007

使用 TerminateThread 杀死线程通常是一个非常糟糕的主意。甚至此功能的 MSDN 页面也会告诉您这一点。告诉线程停止工作的更好方法是向它们传递一个事件。对于一个事件，运行无限循环的线程将`while (WaitForSingleObject(event, 1) == WAIT_TIMEOUT)`代替`while (1)`.

为什么 TerminateThread 确实会死，我不知道，但是当您阅读此[http://msdn.microsoft.com/en-us/library/windows/desktop/ms686717时，您可以了解可能出了什么问题(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686717(v=vs.85).aspx)

# chef-infra - 您如何中止/结束 Chef 运行？

> ID：14290397
> 
> 赞同：56
> 
> 时间：2013-01-12T04:59:50.713
> 
> 标签：chef-infra, continuous-deployment

在某些情况下，我需要使用非零状态代码中止/结束 Chef 运行，然后它将通过我们的部署链传播回并最终传播到 Jenkins，从而产生一个又大又肥的红球。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-01-12T13:58:31.193

对于将来可能不熟悉 Chef 的读者来回答这个问题，Chef 运行“聚合”节点，或使其符合它正在运行的配方中声明的策略。这也称为“收敛”。这有两个阶段，“编译”和“执行”。编译阶段是 Chef 评估（“编译”）食谱的 Ruby 代码，寻找要添加到资源集合中的资源。完成后，它会“执行”每个资源的操作以将其置于所需的状态。运行系统命令等。

Erik Hollensbe[在 2013 年写了一篇关于其工作原理的](https://web.archive.org/web/20180131063937/http://erik.hollensbe.org/2013/03/16/the-chef-resource-run-queue/)**精彩**演练。

**现在，为了答案：**

有几种方法可以结束 Chef 运行或退出 Chef 配方，具体取决于您想要如何进行，因为 Chef 配方是 Ruby 代码。

如果您的目标是根据条件停止处理配方，但继续运行其余部分，请使用`return`Ruby 关键字。例如：

```
file '/tmp/ponies' do
  action :create
end

return if platform?('windows')

package 'bunnies-and-flowers' do
  action :install
end 
```

我们假设如果系统是 Windows，它没有可以安装 bunnies-and-flowers 包的包管理器，所以我们从哪里回来。

**如果您希望完全中止 Chef 运行**

Tl;博士：使用`raise`。如果出现错误情况，最好中止 Chef 运行。

也就是说，如果在运行中的任何地方遇到未处理的异常，chef-client 就会退出。例如，如果模板资源找不到它的源文件，或者如果运行 chef-client 的用户没有权限执行诸如创建目录之类的操作。这就是为什么 using`raise`也可以结束运行的原因。

你把`raise`事情放在哪里。如果在`ruby_block`资源中使用它，它只会在收敛的执行阶段引发。如果您在`return`上面示例的资源之外使用它，它将在编译阶段发生。

```
file '/tmp/ponies' do
  action :create
end

raise if platform?('windows')

package 'bunnies-and-flowers' do
  action :install
end 
```

也许我们在 Windows 上确实有一个包管理器，我们希望安装这个包。加注将导致 Chef 致命地退出并提供堆栈跟踪。

在过去的几年里，另一种方法是使用`Chef::Application.fatal!`- 正如我在这个答案中所写的那样。时代变了，*不推荐*这样做。不要再这样做了。如果您正在这样做，请切换到`raise`并如前所述，如果您的需求更复杂，请编写自己的异常处理程序（见下文）。

**更优雅的错误处理**

由于配方是 Ruby，您还可以使用`begin..rescue`块优雅地处理错误情况。

```
begin
  dater = data_bag_item(:basket, "flowers")
rescue Net::HTTPServerException
  # maybe some retry code here?
  raise "Couldn't find flowers in the basket, need those to continue!"
end 
```

`data_bag_item`对 Chef 服务器上的数据包发出 HTTP 请求，`Net::HTTPServerException`如果服务器出现问题（404 未找到、403 未授权等），将返回 a。我们可能会尝试重试或做一些其他处理，然后回退到`raise`.

**报告错误**

如果您从命令行运行 Chef，只需退出并抛出堆栈跟踪就可以了。但是，如果您在`cron`几台甚至几十台或数百台机器上运行它或作为守护程序运行它，那么当出现问题时，这并不是保持理智的好方法。

输入[Chef 的报告/异常处理程序功能](https://docs.chef.io/handlers.html)。您可以为 Chef 运行使用处理程序。所有报告处理程序都在 Chef 运行结束时运行。异常处理程序在中止的 Chef 运行结束时运行。运行的状态被跟踪，并且可以在处理程序中检查，因此您可以编写一个处理两种运行（成功/完成或不成功/中止）的程序。

该[文档](https://docs.chef.io/handlers.html)告诉您如何编写一个。它还包括可用于各种服务的可用[开源处理程序列表，包括：](https://docs.chef.io/handlers.html#community-handlers)

*   通过 SMTP 发送电子邮件
*   国税局
*   石墨
*   嘻哈聊天

还有很多。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-12T04:59:50.713

中止或编辑 Chef 运行的推荐方法是引发异常。这是一个例子：

```
ruby_block "some tricky operation" do
  block do
    OperationFoo
    raise "Operation Foo Failed" if some_condition
  end
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-02T20:35:18.047

厨师::Application.fatal！应该做你想要的。这是我们代码库中的一个示例，可能会有所帮助。

```
cipher = case key.length
    when 16 then "AES-128-ECB"
    when 24 then "AES-192-ECB"
    when 32 then "AES-256-ECB"
else
    Chef::Application.fatal!("AES Key must be 16, 24, or 32 characters in length but key #{key} has length of #{key.length}")
end 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2018-01-19T09:20:02.440

`chef`当您想在某些操作后完成时，只需使用以下语句：

```
throw :end_client_run_early 
```

它将退出而没有任何错误。

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2016-02-01T19:44:03.937

要在 chef-solo 运行期间执行不干净的退出，请尝试以下操作：

```
bash 'exit' do
    code 'killall -9 chef-solo'
end 
```

# android - 错误

> ID：14290403
> 
> 赞同：0
> 
> 时间：2013-01-12T05:00:36.493
> 
> 标签：android, google-maps, android-maps

我正在尝试使用谷歌地图开发一个应用程序，但不知道为什么它仍然给我错误，我重新检查我的清单文件似乎一切正常。这是清单：

```
 <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.interstars"
    android:versionCode="1"
    android:versionName="1.0" >
    <uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <uses-library android:name="com.google.android.maps"/>
    <activity
        android:name="com.example.interstars.InterMainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
      </activity>
      </application>
       </manifest> 
```

**错误**

```
2 08:47:06 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for C:\Users\uchman\Documents\Work place\InterStars\AndroidManifest.xml: Attribute name "uses-library" associated with an element type "application" must be followed by the ' = ' character. 
```

我错过了什么？我仍然是android编程的初学者。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T05:13:14.993

试放

```
<uses-library android:name="com.google.android.maps"/> 
```

此行在所有活动标记之后和应用程序标记结束之前

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T14:16:20.213

感谢您的所有帮助。在给自己太多压力之后，我决定使用 GoogleMaps API V2。并且感谢[https://developers.google.com/maps/documentation/android/](https://developers.google.com/maps/documentation/android/)中的教程，我能够将谷歌地图修复到我的应用程序中。PS GoogleMaps API V2 对用户和程序员来说都更容易而且不需要使用库。所需要的只是 Google Play 库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T05:36:40.087

试试这个：

```
<uses-library android:required="true" android:name="com.google.android.maps"></uses-library>
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" > 
```

您的代码的目标必须在 Google API 而不是 Android API 上设置。您的项目文件夹 --> 属性 --> android --> 在项目构建目标中为您的 API 级别选择 Google API。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T05:15:08.390

我不确定，但我遇到了同样的错误一旦我开始了 mapview。我解决的方法如下：

如果您在下面的行中复制并粘贴

`<uses-library android:name=”com.google.android.maps” />`

然后 quote("") 变成了不同的 ASCII VALUE 引号字符。

您应该重新输入引号字符。

[类似的问题](https://stackoverflow.com/questions/3541061/androidmanifest-xml-unable-to-include-external-library)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-12T05:36:38.163

请试试这个：

*   右键单击您的项目，然后单击“Android 工具”
*   点击“添加支持库”，直接添加库

之后运行这个。

# regex - 对正则表达式结果执行替换，但仅在给定条件下

> ID：14290407
> 
> 赞同：0
> 
> 时间：2013-01-12T05:01:44.907
> 
> 标签：regex, musicbrainz

首先，让我澄清一下，我对正则表达式一无所知，但我需要为 MusicBrainz Picard 编写一个“标记脚本”，这样它就不会影响我格式化曲目标题某些方面的方式。

这是我需要做的： - 查找括号内的所有子字符串 - 然后，对于符合给定条件的匹配项和仅匹配项，将括号更改为括号

例如，考虑这个字符串：DJ Fresh - Louder (Sian Evans) (Flux Pavilion & Doctor P Remix)

它需要像这样改变：DJ Fresh - Louder (Sian Evans) [Flux Pavilion & Doctor P Remix]

条件是如果括号内的字符串包含子字符串“dj”或“mix”或“version”或“inch”等......那么围绕它的括号需要更改为括号。

所以，问题是：是否有可能创建一个可以执行此操作的正则表达式？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T05:08:39.110

假设***没有嵌套括号***，您可以使用以下正则表达式来搜索文本：

```
(?i)\((?=[^()]*(?:dj|mix|version|inch))([^()]+)\) 
```

请注意，正则表达式**不区分大小写**，因为`(?i)`在前面 -通过删除它使其*区分大小写。*

检查你的语言的语法，看看你是否可以使用`r`前缀，例如`r'literal_string'`，来指定文字字符串。

并使用以下内容作为替换：

```
[$1] 
```

您可以通过向部件添加关键字来包含更多关键字`(?:dj|mix|version|inch)`，每个关键字用 . 分隔`|`。如果关键字包含`(`, `)`, `[`, `]`, `|`, `.`, `+`, `?`, `*`, `^`, `$`, `\`, `{`，`}`则需要转义它们（我 99% 确定该列表是详尽的）。一个更简单的考虑方法是：如果关键字只包含空格和字母数字（但请注意空格的数量是严格的），您可以将它们添加到正则表达式中而不会产生副作用。

* * *

剖析正则表达式：

*   `(?i)`:**不区分大小写**模式

*   `\(`:`(`是正则表达式中的特殊字符，需要通过前置来转义它`\`。

*   `(?=[^()]*(?:dj|mix|version|inch))`: 积极展望`(?=pattern)`:

    *   `[^()]*`：我需要检查文本是否在括号内，而不是在括号外或其他括号内，所以我使用否定字符类`[^characters]`来避免匹配`()`和溢出当前括号之外。我所做的假设也在这里发挥了作用。

    *   `(?:dj|mix|version|inch)`*：非捕获组* 中的关键字列表`(?:pattern)`。`|`意思是交替。

*   `([^()]+)`: 关于没有嵌套括号的假设使得匹配括号内的所有字符更容易。*捕获*文本以供以后替换，因为`(pattern)`是捕获组，而不是`(?:pattern)`.

*   `\)`:`)`是正则表达式中的特殊字符，需要通过前置来转义它`\`。

# ios - 在显示另一个模态视图控制器后关闭一个模态视图控制器

> ID：14290411
> 
> 赞同：1
> 
> 时间：2013-01-12T05:02:07.467
> 
> 标签：ios, uiviewcontroller

我做了一些研究并阅读了我在这里找到的其他答案，但没有找到任何真正有效的东西。我有一个应用程序，当发布某些内容时，我想转到帖子，如果在查看帖子时按下后退按钮，它应该返回两个视图，基本上跳过撰写视图。

以下是我尝试过的，但它给出了

警告：尝试呈现不在窗口层次结构中的视图！

```
-(IBAction)post{
    [[self presentingViewController] dismissModalViewControllerAnimated:NO];
}

-(void)viewDidDisappear:(BOOL)animated{
    [super viewDidDisappear:animated];
    ViewPostViewController *dvController = [[ViewPostViewController alloc] initWithNibName:@"ViewPostViewController" bundle:[NSBundle mainBundle]];
    UINavigationController *nc = [[UINavigationController alloc] initWithRootViewController:dvController];
    nc.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
    [self presentModalViewController:nc animated:NO];
    [nc release];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T09:57:16.340

如果您尝试创建这样的视图层次结构，您可能应该使用这些：

```
[self.navigationController pushViewController:ViewController animated:BOOL completion:nil];
[self.navigationController popViewControllerAnimated:BOOL completion:nil]; 
```

代替：

```
[self presentViewController:ViewController animated:BOOL completion:nil];
[self dimissViewControllerAnimated:BOOL completion:nil]; 
```

PresentViewController 通常用于显示单个视图控制器然后将其关闭，而不是通常当您想要在链中显示多个视图控制器时，然后按照您的方式备份链。

前者是可取的，因为它使用堆栈概念来推送和弹出视图控制器。因此，您可以从设置为根视图控制器的初始列表开始，推送您的后期撰写视图，然后推送第三个视图以进行发布。然后，当您想通过弹出两个视图控制器返回第一个视图控制器时，可以使用：

```
[self popToRootViewControllerAnimated:BOOL completion:nil]; 
```

您可能会发现[UINavigationController](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UINavigationController_Class/Reference/Reference.html)参考很有用。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T07:32:37.650

如果你想在另一个模态视图控制器动画出来之后立即呈现一个视图控制器，那么你必须延迟它，否则新的视图控制器将不会出现。

在 iOS 5 之前，您会执行 performSelectorAfterDelay: 0.25 秒。对于 iOS 5 及更高版本，您将不再使用 modelViewController 方法，因为这些方法已被弃用。相反，您使用 presentViewController 方法，它会为您提供一个完成块，在动画完成时调用该块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T05:27:52.000

我对你想要做什么感到有点困惑。如果您使用的是导航控制器，则应该进行推送和弹出，而不是呈现和关闭。如果你想使用导航控制器，那么你可以使用 popToViewController:animated: 返回到任何特定的控制器，而无需通过中间的控制器。但是，您必须创建一个自定义的后退按钮，或者在代码中执行，因为标准的后退按钮只会带您回到上一个视图控制器。

# php - 在某个html页面中隐藏div

> ID：14290413
> 
> 赞同：0
> 
> 时间：2013-01-12T05:02:15.953
> 
> 标签：php, html, css

为这个新手问题道歉。

我创建了一个`header`与其他页面使用相同的 html 页面 (dash.html)。它调用这个 PHP 函数`<?php include 'header.php'; ?>`

dash.html 包含`<div>`专门为该页面制作的特殊内容；它必须放在里面`header.php`

我试图弄清楚如何`div`在某个 html 页面上启用/禁用某个。

它需要一个 PHP 条件语句吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T05:10:42.050

是的。最简单的方法是在 header 中包含一个条件行，并从调用 header 的每个页面传递选中的变量。因此，在您的 dash.php 中（如果它调用 php，它不能是 .html，可以吗？）：

```
<?php
    $includediv = true; // set to false, or leave out, if you don't want the div
    include('header.php');
?> 
```

在 header.php 中：

```
<?php
...some other code...
if($includediv){
    ...code to include div...
}
?> 
```

对于调用 header.php 的所有其他页面，这将继续像以前一样工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T05:08:06.300

您正在尝试显示`div`唯一的 if`header.php`存在，对吗？

因此，只需在内部设置一个变量`header.php`并在 HTML 页面中使用条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T08:54:20.450

```
Try this code

<?php 
$path=explode('/',$_SERVER['REQUEST_URI']);
$page=end($path);
if($page=='dash.php')
{
?>
<div>your div for dash.php page</div>
<?php } ?> 
```

# symfony - 为什么 Symfony 和 Doctrine 在插入/更新记录时使用 __toString 而不是 getId

> ID：14290414
> 
> 赞同：1
> 
> 时间：2013-01-12T05:02:21.903
> 
> 标签：symfony, doctrine-orm

我有一个包含 4 个 realtionships 的表格，但其中 2 个有问题。这是我的表单的代码：

```
<?php

namespace Psw\AdminBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class MeatType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('name_pl')
            ->add('name_en')
            ->add('jm')
            ->add('vat')
            ->add('net_price')
            ->add('min')
            ->add('new')
            ->add('promotion', 'entity', array(
                    'class' => 'PswAdminBundle:Promotions',
                    'empty_value' => 'No promotion',
                    'required' => false
                ))
            ->add('promotion_price')
            ->add('producer', 'entity', array(
                    'class' => 'PswAdminBundle:MeatProducers'
                ))
            ->add('animals')
            ->add('categories')
        ;
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'Psw\AdminBundle\Entity\Meat'
        ));
    }

    public function getName()
    {
        return 'psw_adminbundle_meattype';
    }
} 
```

和实体

肉：

```
<?php

namespace Psw\AdminBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\ArrayCollection;

/**
 * Meat
 *
 * @ORM\Table()
 * @ORM\Entity
 */
class Meat
{
    /**
     * @var integer
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var string
     *
     * @ORM\Column(name="name_pl", type="string", length=255)
     */
    private $name_pl;

    /**
     * @var string
     *
     * @ORM\Column(name="name_en", type="string", length=255)
     */
    private $name_en;

    /**
     * @var string
     *
     * @ORM\Column(name="jm", type="string", length=10)
     */
    private $jm;

    /**
     * @var integer
     *
     * @ORM\Column(name="vat", type="integer")
     */
    private $vat;

    /**
     * @var float
     *
     * @ORM\Column(name="net_price", type="float")
     */
    private $net_price;

    /**
     * @var float
     *
     * @ORM\Column(name="min", type="float")
     */
    private $min;

    /**
     * @var boolean
     *
     * @ORM\Column(name="new", type="boolean")
     */
    private $new;

    /**
     * @var integer
     *
     * @ORM\Column(name="promotion", type="integer", nullable=true)
     * @ORM\ManyToOne(targetEntity="Promotions")
     */
    private $promotion;

    /**
     * @var float
     *  
     * @ORM\Column(name="promotion_price", type="float")
     *  
     */
    private $promotion_price;

    /**
     * @ORM\ManyToMany(targetEntity="Animals")
     * @ORM\JoinTable(name="meat_animals",
     *      joinColumns={@ORM\JoinColumn(name="meat_id", referencedColumnName="id")},
     *      inverseJoinColumns={@ORM\JoinColumn(name="animal_id", referencedColumnName="id")}
     *      )
     **/
    private $animals;

    /**
     * @ORM\ManyToMany(targetEntity="MeatCategories")
     * @ORM\JoinTable(name="meat_meat_categories",
     *      joinColumns={@ORM\JoinColumn(name="meat_id", referencedColumnName="id")},
     *      inverseJoinColumns={@ORM\JoinColumn(name="category_id", referencedColumnName="id")}
     *      )
     **/
    private $categories;

    /**
     * @ORM\Column(name="producer", type="integer")
     * 
     * @ORM\ManyToOne(targetEntity="MeatProducers", inversedBy="products")
     * @ORM\JoinColumn(name="producer", referencedColumnName="id")
     **/
    private $producer;

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set name_pl
     *
     * @param string $namePl
     * @return Meat
     */
    public function setNamePl($namePl)
    {
        $this->name_pl = $namePl;

        return $this;
    }

    /**
     * Get name_pl
     *
     * @return string 
     */
    public function getNamePl()
    {
        return $this->name_pl;
    }

    /**
     * Set name_en
     *
     * @param string $nameEn
     * @return Meat
     */
    public function setNameEn($nameEn)
    {
        $this->name_en = $nameEn;

        return $this;
    }

    /**
     * Get name_en
     *
     * @return string 
     */
    public function getNameEn()
    {
        return $this->name_en;
    }

    /**
     * Set jm
     *
     * @param string $jm
     * @return Meat
     */
    public function setJm($jm)
    {
        $this->jm = $jm;

        return $this;
    }

    /**
     * Get jm
     *
     * @return string 
     */
    public function getJm()
    {
        return $this->jm;
    }

    /**
     * Set vat
     *
     * @param integer $vat
     * @return Meat
     */
    public function setVat($vat)
    {
        $this->vat = $vat;

        return $this;
    }

    /**
     * Get vat
     *
     * @return integer 
     */
    public function getVat()
    {
        return $this->vat;
    }

    /**
     * Set net_price
     *
     * @param float $netPrice
     * @return Meat
     */
    public function setNetPrice($netPrice)
    {
        $this->net_price = $netPrice;

        return $this;
    }

    /**
     * Get net_price
     *
     * @return float 
     */
    public function getNetPrice()
    {
        return $this->net_price;
    }

    /**
     * Set min
     *
     * @param float $min
     * @return Meat
     */
    public function setMin($min)
    {
        $this->min = $min;

        return $this;
    }

    /**
     * Get min
     *
     * @return float 
     */
    public function getMin()
    {
        return $this->min;
    }

    /**
     * Set new
     *
     * @param boolean $new
     * @return Meat
     */
    public function setNew($new)
    {
        $this->new = $new;

        return $this;
    }

    /**
     * Get new
     *
     * @return boolean 
     */
    public function getNew()
    {
        return $this->new;
    }

    /**
     * Set promotion
     *
     * @param integer $promotion
     * @return Meat
     */
    public function setPromotion($promotion)
    {
        $this->promotion = $promotion;

        return $this;
    }

    /**
     * Get promotion
     *
     * @return integer 
     */
    public function getPromotion()
    {
        return $this->promotion;
    }
    /**
     * Constructor
     */
    public function __construct()
    {
        $this->animals = new ArrayCollection();
        $this->categories = new ArrayCollection();
    }

    /**
     * Add animals
     *
     * @param \Psw\AdminBundle\Entity\Animals $animals
     * @return Meat
     */
    public function addAnimal(\Psw\AdminBundle\Entity\Animals $animals)
    {
        $this->animals[] = $animals;

        return $this;
    }

    /**
     * Remove animals
     *
     * @param \Psw\AdminBundle\Entity\Animals $animals
     */
    public function removeAnimal(\Psw\AdminBundle\Entity\Animals $animals)
    {
        $this->animals->removeElement($animals);
    }

    /**
     * Get animals
     *
     * @return \Doctrine\Common\Collections\Collection 
     */
    public function getAnimals()
    {
        return $this->animals;
    }

    /**
     * Add categories
     *
     * @param \Psw\AdminBundle\Entity\Meat_categories $categories
     * @return Meat
     */
    public function addCategorie(\Psw\AdminBundle\Entity\Meat_categories $categories)
    {
        $this->categories[] = $categories;

        return $this;
    }

    /**
     * Remove categories
     *
     * @param \Psw\AdminBundle\Entity\Meat_categories $categories
     */
    public function removeCategorie(\Psw\AdminBundle\Entity\Meat_categories $categories)
    {
        $this->categories->removeElement($categories);
    }

    /**
     * Get categories
     *
     * @return \Doctrine\Common\Collections\Collection 
     */
    public function getCategories()
    {
        return $this->categories;
    }

    /**
     * Set producer
     *
     * @param \Psw\AdminBundle\Entity\MeatProducers $producer
     * @return Meat
     */
    public function setProducer(\Psw\AdminBundle\Entity\MeatProducers $producer = null)
    {
        $this->producer = $producer;

        return $this;
    }

    /**
     * Get producer
     *
     * @return \Psw\AdminBundle\Entity\MeatProducers 
     */
    public function getProducer()
    {
        return $this->producer;
    }

    /**
     * Set promotion_price
     *
     * @param float $promotionPrice
     * @return Meat
     */
    public function setPromotionPrice($promotionPrice)
    {
        $this->promotion_price = $promotionPrice;

        return $this;
    }

    /**
     * Get promotion_price
     *
     * @return float 
     */
    public function getPromotionPrice()
    {
        return $this->promotion_price;
    }
} 
```

肉类生产商：

```
<?php

namespace Psw\AdminBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * MeatProducers
 *
 * @ORM\Table()
 * @ORM\Entity
 */
class MeatProducers
{
    /**
     * @var integer
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var string
     *
     * @ORM\Column(name="name", type="string", length=255)
     */
    private $name;

    /**
     * @ORM\OneToMany(targetEntity="Meat", mappedBy="producer")
     **/
    private $products;

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set name
     *
     * @param string $name
     * @return MeatProducers
     */
    public function setName($name)
    {
        $this->name = $name;

        return $this;
    }

    /**
     * Get name
     *
     * @return string 
     */
    public function getName()
    {
        return $this->name;
    }

    public function __toString()
    {
        return $this->name;
    }
    /**
     * Constructor
     */
    public function __construct()
    {
        $this->products = new \Doctrine\Common\Collections\ArrayCollection();
    }

    /**
     * Add products
     *
     * @param \Psw\AdminBundle\Entity\Meat $products
     * @return MeatProducers
     */
    public function addProduct(\Psw\AdminBundle\Entity\Meat $products)
    {
        $this->products[] = $products;

        return $this;
    }

    /**
     * Remove products
     *
     * @param \Psw\AdminBundle\Entity\Meat $products
     */
    public function removeProduct(\Psw\AdminBundle\Entity\Meat $products)
    {
        $this->products->removeElement($products);
    }

    /**
     * Get products
     *
     * @return \Doctrine\Common\Collections\Collection 
     */
    public function getProducts()
    {
        return $this->products;
    }
} 
```

关于动物和类别的多对多理论没有问题。但是我拥有多对一的促销和制作人会导致一些问题。

问题是当尝试插入/更新记录时，学说调用 __toString 方法而不是 getId 来获取要放入数据库的值。

我与其他实体有这样的工作示例，它们几乎相同，但在这种情况下它只是不想工作。

控制器代码来自 crud 生成器，如有必要，我没有更改任何内容，我可以发布它。

问题是如何让它使用 getId 方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T15:08:55.300

这里的问题不在于 __toString，而在于您的映射注释。您不应将 @Column 用于关联映射。相反，使用@JoinColumn：

```
/**
 * @ORM\ManyToOne(targetEntity="Promotions")
 * @ORM\JoinColumn(name="promotion_id", referencedColumnName="id")
 */
private $promotion; 
```

# sql - 按位异或，在 SQL 中固定长度的二进制字符串（240 字节）

> ID：14290419
> 
> 赞同：4
> 
> 时间：2013-01-12T05:03:01.433
> 
> 标签：sql, string, bit-manipulation, binary-data

我在数据库中存储了一个 240 字节（1920 位）的二进制字符串（目前是 MySQL，但我想保持数据库独立）。

我需要执行以下操作：

```
UPDATE `my_table` SET `data` = `data` ^ 'new_data' WHERE `id` = 'field_id' 
```

我相信 SQL 语法按位 XOR 仅适用于高达 6b 位的值。

我在文本字段中使用十六进制编码存储数据，但如有必要，我可以将其更改为保存二进制数据的 blob 字段。

目前我正在使用 PHP 加载该字段。然后我正在做 XOR 并将其写回。

但是，此字段对所有脚本都是全局的，并且此方法存在以下风险：

```
Script X Loads Data0
Script Y Loads Data0
Script X Generates Data1 = Data0 ^ new_data1
Script Y Generates Data2 = Data0 ^ new_data2
Script X writes Data1
Script Y writes Data2 Error: dosen't contain new_data1 
```

如果这是使用 SQL 语句完成的，则如下所示：

```
UPDATE `my_table` SET `data` = `data` ^ 'new_data1' WHERE `id` = 'field_id'
UPDATE `my_table` SET `data` = `data` ^ 'new_data2' WHERE `id` = 'field_id' 
```

通过避免上述错误，数据库将在那里按顺序执行查询

如果我使用 64 位整数来存储这些数据，那么由于大小的原因，我必须将其分成 30 个单独的值。这个选项不合理。

有谁知道实现这一目标的数据库独立方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-25T14:48:35.030

Consider writing a C language User Defined Function (UDF) to do this operation. C UDF's are supported in many databases MySQL, PostgreSQL, Oracle, ....

They are fast and integrate well into SQL, as they are called like any other stored proc. Unfortunately the creation syntax and binding API all differ for each database.

Here is documentation for MySQL

[http://dev.mysql.com/doc/refman/5.0/en/udf-compiling.html](http://dev.mysql.com/doc/refman/5.0/en/udf-compiling.html)

and a Codeproject example for MySQL

[http://www.codeproject.com/Articles/15643/MySQL-User-Defined-Functions](http://www.codeproject.com/Articles/15643/MySQL-User-Defined-Functions)

and PostgreSQL docs [http://www.postgresql.org/docs/9.2/static/xfunc-c.html](http://www.postgresql.org/docs/9.2/static/xfunc-c.html)

there many examples of C UDF's in the PostgreSQL source. [http://doxygen.postgresql.org/](http://doxygen.postgresql.org/)

PostgreSQL takes UDF's one step further and allows to to create C based User Define Types and Operators.

# php - 使用 Visual Basic 还是 PHP/SQL？（需要建议）

> ID：14290421
> 
> 赞同：-2
> 
> 时间：2013-01-12T05:03:38.070
> 
> 标签：php, sql, vb.net

我需要知道是否应该将这个项目创建为 Visual Basic Windows 应用程序，或者是否应该在 PHP/SQL 中创建它。

[表格 http://s13.postimage.org/mhpqbp43r/jobs.jpg](http://s13.postimage.org/mhpqbp43r/jobs.jpg)

基本上，我正在尝试使用此应用程序（或 Web 表单）来编辑填充了工作数据的 HTML 表格。

因此，如果我通过私有 .php 表单或 VB.NET 应用程序添加新工作列表，它将出现在我网站的 HTML 中。

顺便说一句，我是 VB.net、PHP 和 SQL 的新手。

请让我知道完成这个项目的最简单方法。我只是在寻找一些一般性的建议。

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T08:18:40.957

如果您对 vb 感到满意，则可以继续使用它，这也是一种具有强大功能的出色语言。这是你的意见，你觉得舒服，但如果你是初学者

切换到 PHP，两种语言都可以构建表单，但大多数 Web 开发人员使用 PHP。PHP 可以用 SQL 使事情变得非常简单，而在 vb 中它变得有点困难。我不能在这里谈论他们的利弊，因为这是不允许的。因此，无需三思而后行切换 PHP - 如果您想成为优秀的开发人员，您应该采用它，因为对于 Web 开发人员而言，PHP 对他们的未来非常重要

# javascript - （游戏编程）如何在攻击之间添加延迟？

> ID：14290424
> 
> 赞同：0
> 
> 时间：2013-01-12T05:04:21.530
> 
> 标签：javascript, time, delay, timedelay

我正在制作一个游戏，您可以使用箭头键控制角色并使用“A”进行攻击。我的问题是攻击没有延迟，所以当我按住'A'时，敌人的生命值会迅速耗尽。如何添加延迟？我尝试添加延迟，这是我的代码：

```
var DELAY = 2;
var cooldown = 0;

function update(time) {

// UP
if (38 in keysDown) { 
    player.y -= player.speed * time;
}
// DOWN
if (40 in keysDown) { 
    player.y += player.speed * time;
}
// LEFT
if (37 in keysDown) {
    player.x -= player.speed * time;
}
// RIGHT
if (39 in keysDown) { 
    player.x += player.speed * time;
}

// 'A'
if(65 in keysDown) {
    player.attacking = true;
    cooldown -= time;
}
else
    player.attacking = false;

// Collision
if( (player.x + pImage.width-5) >= monster.x && 
    (player.x + pImage.width-5) < monster.x + enImage.width &&
    player.y >= monster.y && player.y < (monster.y + enImage.height) &&
    player.attacking) 
    {
        if(cooldown <= 0) {
            monster.hp -= player.dmg;
            cooldown = DELAY;
        }

        if(monster.hp <= 0) {
            relocEn();
        }
    } 
```

}

问题是冷却时间只有在我按住“A”时才计算在内，并且只有在玩家接触怪物时才会重置。我想要类似当我按下“A”时冷却计时器启动的东西。另外，我希望精灵（处于攻击状态）随着延迟而回到“站立”状态。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T03:17:33.217

这是我要做的：

我会为最后一次攻击的时间创建一个变量，并将所有与攻击相关的代码移动到另一个函数。我假设时间以毫秒为单位，所以你可能希望你的延迟达到数百个。

```
var DELAY = 400; //Change this to a higher value if it's not long enough.
var timeSinceLastAttack = -400; // The opposite of the DELAY if you want to attack at the start. 

function update(time) {

...

// 'A'
if(65 in keysDown 
    && time > (timeSinceLastAttack + DELAY) ) {
    player.attack();
    timeSinceLastAttack = time;
} 
```

然后在你的攻击（）函数中，你可以进行碰撞检测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T23:46:22.977

好的，

1-尝试为 DELAY 分配更大的值

2-打印“时间”值以查看每个循环添加到 DELAY 的量，如果它是一个大值 - 大于 0.00x - 将它除以

另一件事：把“冷却时间-=时间”放在“A按下”括号外面不好，强制用户每次要射击时按住A键一定时间

# javascript - chrome扩展如何在页面底部添加浮动栏？

> ID：14290428
> 
> 赞同：4
> 
> 时间：2013-01-12T05:04:48.953
> 
> 标签：javascript, iframe, google-chrome-extension, google-chrome-devtools

我正在创建一个 chrome 扩展，它需要`position:fixed`在页面底部注入一个浮动元素（即）。我的要求是：

*   我需要从内容脚本访问其中的元素。
    这是因为我将事件附加到按钮，以便用户可以从浮动栏对当前选项卡执行操作。
*   我希望它的样式保持独立于当前页面的样式。

到目前为止，我已经尝试了三种解决方案，但一无所获。

1.  **注入固定 html 元素的内容脚本**。
    这个解决方案的问题是页面的样式和我的元素的样式会相互影响，从而导致网页影响我的元素的样式，反之亦然。

2.  **注入 iframe 的内容脚本**。
    这里的问题是不可能从创建 iframe 的内容脚本访问 iframe 内的元素，另一方面，chrome 扩展不允许在动态注入的 iframe 内运行内容脚本（即使使用`all_frames: true`.

3.  **扩展 Devtool 面板**
    这不符合我的需要，因为我需要在每个页面上显示我的面板。例如，用户可以执行打开多个选项卡并让所有选项卡都有我的元素的操作。在 devtool 面板中，我的用户必须手动在所有选项卡中打开 devtoold。

请指教。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-12T11:36:14.547

3 种方法的建议

# 注入固定 html 元素的内容脚本

是的，如果指定的样式在网页中过于通用

**前任：**

```
div { 
   border:none;
} 
```

即使您将 id(s) 和类的罕见组合分配给 css 也会影响内容脚本元素，解决方案是使用 css 指定（或）覆盖所有样式，这非常麻烦

**例如：**超越每一种容易出错和繁琐的风格。

```
html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed, 
figure, figcaption, footer, header, hgroup, 
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure, 
footer, header, hgroup, menu, nav, section {
    display: block;
}
body {
    line-height: 1;
}
ol, ul {
    list-style: none;
}
blockquote, q {
    quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
    content: '';
    content: none;
}
table {
    border-collapse: collapse;
    border-spacing: 0;
} 
```

# 注入 iframe 的内容脚本。

关于您对动态 iframe 上的脚本注入的担忧，我建议这是最好的方法；是的，可以将脚本注入动态生成的 iframe

## 示例实现

### 清单.json

```
{
    "name": "Iframe",
    "description": "",
    "version": "1",
    "manifest_version": 2,
    "content_scripts": [
        {
            "matches": [
                "<all_urls>"
            ],
            "js": [
                "myscript.js"
            ],
            "run_at": "document_end"
        },
        {
            "matches": [
                "<all_urls>"
            ],
            "js": [
                "anotherscript.js"
            ],
            "all_frames": true
        }
    ],
    "permissions": [
        "<all_urls>"
    ]
} 
```

### myscript.js

```
var iframe = document.createElement("iframe");
iframe.setAttribute("src", "https://www.facebook.com/plugins/like.php?href=http://allofrgb.blogspot.in/");
iframe.setAttribute("style", "border:none; width:150px; height:30px");
iframe.setAttribute("scrolling", "no");
iframe.setAttribute("frameborder", "0");
document.body.appendChild(iframe); 
```

### 另一个脚本.js

```
iframes = document.getElementsByTagName("iframe");
for (iframe in iframes){
    console.log(iframes[iframe].src);
}
console.log("In another Script"); 
```

如果您观察到控制台记录的消息，您会观察到消息被记录两次（`document`log + `iframe`log + `[any number of optional iframes in pages]*`）

`anotherscript.js`在状态期间运行的确实在动态生成的 iframe 中执行，但是您可以随时通过[chrome.tabs.executeScript()](https://developer.chrome.com/extensions/tabs.html#method-executeScript)`document idle`重新运行内容脚本。

# 扩展 Devtool 面板

您已经清楚地确定了问题，因此将其作为替代方案消除。

* * *

## 回答 #2

> 赞同：-9
> 
> 时间：2013-01-16T22:47:57.303

正如 Sudarshan 评论的那样，iframe 是这里的最佳实践。

为了在 iframe 中运行脚本，我只是在我的插件中包含了 iframe.html 和 script.js。在我的内容脚本中，我得到了 iframe [`chrome.extension.getURL('iframe.html')`](http://developer.chrome.com/extensions/extension.html)（只有后台脚本可以访问这个 API，所以我使用了[Message Passing](http://developer.chrome.com/extensions/messaging.html)），该脚本作为相对脚本标签包含在 iframe 中，如下所示：`<script src="script.js"></script>`

令我惊讶的是，尽管 script.js 没有包含在清单中，它仍然可以访问 chrome api，更重要的是，在我的情况下，它可以向后台脚本发送消息。

# chef-infra - 您如何在 Chef 编译阶段中止当前的配方？

> ID：14290429
> 
> 赞同：2
> 
> 时间：2013-01-12T05:04:52.950
> 
> 标签：chef-infra

在某些情况下，您想在 Chef 编译阶段中止当前配方？完成此任务的推荐方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T05:04:52.950

在 Chef 编译阶段中止当前配方的正确方法是返回。

请注意，这不会中止 Chef 运行。有关如何中止 Chef 运行，请参阅[如何中止/结束 Chef 运行](https://stackoverflow.com/questions/14290397/how-do-you-abort-end-a-chef-run)。

[jtimberman](https://stackoverflow.com/users/7672/jtimberman)对[How to Abort/End A Chef Run](https://stackoverflow.com/a/14294011/179332)的回复提供了有关该主题的大量背景信息，并强烈推荐。

# php - 如何以 Magento 方式实现股票过滤器？

> ID：14290431
> 
> 赞同：2
> 
> 时间：2013-01-12T05:05:01.520
> 
> 标签：php, magento, magento-1.7, layered-navigation

在我的 magento 网站上可以看到缺货产品。我想要分层导航中的自定义过滤器，上面写着“排除缺货”，当客户点击它时，应该隐藏缺货产品。

（默认情况下，我在 System-> Configuration-> CATALOG-> Inventory 下启用显示/显示缺货产品）

即我希望客户控制他/她是否应该看到“缺货”产品。

例如 [这个链接](http://www.flipkart.com/mobiles/samsung~brand/pr?sid=tyy,4io&_pop=flyout&otracker=hp_submenu_mobile)

有人可以帮忙吗？我希望以magento方式完成...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T12:23:46.150

这是开发工作。你需要雇一些人。

基本上你需要为产品创建属性。

例如。'排除_out_of_stock'。

那么你需要在 Mage/Catalog/Block/Product/List.php 中编码

调整`function _getProductCollection()`

从 `$this->_productCollection = $layer->getProductCollection();`

到

```
$this->_productCollection = $layer->getProductCollection();

if ($this->getRequest()->getParam('exclude_out_of_stock',0)) {

            $oCollection = Mage::getModel('cataloginventory/stock_item')
                ->getCollection()
                ->addFieldToFilter('is_in_stock',0);

            $oProducts = array();
            foreach($oCollection as $_collection) {
                $oProducts[] = $_collection->getProductId();
            }

            if(!empty($oProducts))
                $this->_productCollection->addIdFilter($oProducts,true);
} 
```

# python - 图形界面打不开

> ID：14290436
> 
> 赞同：0
> 
> 时间：2013-01-12T05:06:43.293
> 
> 标签：python, linux, bash, user-interface

我编写了一个 python 脚本，它扫描我的 gmail INBOX 中的特定邮件，如果该邮件存在，它会打开一个 GUI。我已经测试了这个脚本并且可以正常工作。每当建立网络连接时，我都想运行此脚本。因此，我在 NetworkManager 的 dispatch.d 目录中添加了一个脚本。我的 bash 脚本如下所示。

```
#!/bin/bash
#/etc/NetworkManager/dispatcher.d/90filename.sh

IF=$1
STATUS=$2

if [ "$IF" == "wlan0" ];  # for wireless internet
then
    case "$2" in
        up)
        logger -s "NM Script up triggered"
        python /home/rahul/python/expensesheet/emailReader.py
    logger -s "emailReader completed"
    exitValue=$?
    python3.2 /home/rahul/python/expensesheet/GUI.py &
    logger -s "GUI completed with exit status $exitValue"
        ;;
        down)
        logger -s "NM Script down triggered"
        #place custom here
        ;;
        pre-up)
        logger -s "NM Script pre-up triggered"
        #place custom here
        ;;
        post-down)
        logger -s "NM Script post-down triggered"
        #place custom here
        ;;
        *)
        ;;
    esac
fi 
```

我使用 tkinter 来设计我的 GUI。我的问题是，emailReader（没有 GUI）被正确执行，但 GUI.py 没有被执行。它以退出状态 1 退出。有人可以对此事有所了解并解释我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T15:47:24.350

NetworkManager 是一个在 X 服务器之外的虚拟终端上运行的进程。（例如 NetworkManager 在您的窗口管理器启动之前在启动时启动；它们完全不相关）。

因此，由 NetworkManager 启动的任何脚本都不能（直接）访问 GUI。（这与您从桌面更改为虚拟终端（例如 Ctrl-Alt-1）然后尝试从那里运行 GUI 时得到的结果非常相似：您很可能会收到类似“不能打开显示”。

如果你想启动一个 GUI 程序，你有 2 种可能性

*   告诉一个通知守护进程（你的窗口管理器的一个子进程）来启动你的 GUI
*   告诉你的 GUI 在正确的显示器上启动（桌面运行的那个）

我会选择第一个解决方案（通知守护程序就是为此目的而设计的），但是如何做到这一点在很大程度上取决于您使用的窗口管理器。

第二种解决方案有点脏，并且涉及潜在的安全漏洞，但基本上尝试诸如启动`DISPLAY=:0.0 myguiapp.py`而不是启动`myguiapp.py`（这假设您在 localhost:0.0 上运行 X-server）。您可以通过简单地从虚拟终端使用 DISPLAY 行启动命令来检查这是否有效。要获得您实际使用的显示，只需`echo $DISPLAY`在 X 服务器内的终端中运行即可。通常，远程连接被禁用到您正在运行的 Xserver（因为它允许非授权用户接管您的桌面 - 从启动新的 GUI 程序（这是您想要的）到安装键盘记录器的一切）；如果是这种情况，请检查`man xhost`（或寻求解决方案＃1）

**更新**

对于第一个解决方案，您可能想查看类似的库（在[python-notify](http://www.galago-project.org)和[python-notify2](http://pypi.python.org/pypi/notify2)`libnotify`中有 python 绑定）。

如果您想要的不仅仅是简单的“通知弹出窗口”，您可能需要深入[研究 D-BUS](http://developer.gnome.org/notification-spec/)。一个简单的例子（虽然没有亲自测试过），可以在[这里](http://klasseonline.dyndns.org/cms/index.php/linuxpc/63-dbus-exec)找到。

# php - 五个按钮一个下拉列表

> ID：14290439
> 
> 赞同：0
> 
> 时间：2013-01-12T05:07:08.263
> 
> 标签：php, ajax

我正在尝试使用一组五个按钮填充下拉列表框。第一个有效，但其他四个目前还没有。如果环顾四周，但由于缺乏经验，我似乎无法将其放在一起。任何帮助表示赞赏。谢谢你。这是我到目前为止的代码......不完整。

```
mysql_select_db('Mydb'); 

$place = mysql_query("select * from tblRestaurants order by RestName ASC");
$cuisine = mysql_query("select * from tblCuisine order by CuisineName ASC");
$city = mysql_query("select * from tblCities order by CityName ASC");
$state = mysql_query("select * from tblStates order by StateName ASC");
$zipcode = mysql_query("select * from tblLocations order by ZipCode ASC");

while ($nt= mysql_fetch_assoc($place))
    $arrData[] = $nt;

if(isset($_GET["ajax"]))
{
    echo json_encode($arrData);
    die();
}
?>
<html>
<head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">
function displayPlace()
{
    $.getJSON("Four.php?ajax=true", function(data) {
        $.each(data, function(index, objRecord) {
            var option=document.createElement("option");
            option.value=objRecord.RestID;
            option.text=objRecord.RestName;
            $("#Doggie").append('<option value="' + objRecord.RestID + '">' + objRecord.RestName + '</option>');
        });
    });

}

function displayCuisine()
{
    $.getJSON("Four.php?ajax=true", function(data) {
        $.each(data, function(index, objRecord) {
            var option=document.createElement("option");
            option.value=objRecord.CuisineID;
            option.text=objRecord.CuisineName;
            $("#Doggie").append('<option value="' + objRecord.CuisineID + '">' +   objRecord.CuisineName + '</option>');
        });
    });

}

    </script>
    <title>SEARCH</title>
</head>
<body>
        <form>
        <button type="button"  onclick="javascript:displayPlace();">Place</button>
        <button type="button"  onclick="javascript:displayCuisine();">Cuisine</button>
        <button type="button"  onclick="javascript:displayCity();" >City</button>
        <button type="button"  onclick="javascript:displayState();">State</button>
        <button type="button"  onclick="javascript:displayZipCode();">Area</button>
        <br /> 

        <select name="Doggie" id="Doggie"></select>

        <br /> 
    </form> 
</body> 
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T05:28:31.273

请修改您的 php 代码我已尝试使用一些示例代码来解释这一点

并在 ajax 请求中传递一个额外的 case 参数，然后它将为您工作

```
$list['place']   =  mysql_query("select * from tblRestaurants order by RestName ASC");
$list['cuisine'] =  mysql_query("select * from tblCuisine order by CuisineName ASC");

foreach($list as $key=>$value){
 while ($nt = mysql_fetch_assoc($list[$key]))
     $list_array[$key] = $nt;
}
if(isset($_GET["ajax"]))
{
   switch($_GET['case']){
       case 'place':
          echo json_encode($list_array['place']);
          break;
       case 'cuisine':
          echo json_encode($list_array['cuisine']);
          break;

   }

   die();
} 
```

# android - 将 framework.jar 拆分为更小的 jar 文件

> ID：14290440
> 
> 赞同：1
> 
> 时间：2013-01-12T05:07:21.603
> 
> 标签：android, frameworks, android-source

我在构建修改后的 Android 源代码时遇到了这个错误。（版本 4.1.1_r6）

> Dex 框架
> [dx] 编写输出麻烦：方法太多：65867；最大值为 65536。按包装：

我知道这个问题的解决方案是将框架拆分成更小的包文件以减少 framework.jar 中的方法数量。它需要对 .mk 文件进行一些修改，但 Android make 文件系统相当复杂。
我希望有人给我一些指示来做到这一点。
谢谢

# imageview - 更改图像查看 ontouch

> ID：14290441
> 
> 赞同：0
> 
> 时间：2013-01-12T05:07:24.443
> 
> 标签：imageview, ontouchlistener

我有一个包含图像名称的数据库，我在 imageView 上显示第一张图像，我使用 ontouch 上下切换图像但没有用，我想通过左右移动手指在图像之间切换，有什么帮助吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-24T22:32:29.390

```
ivSaison.setOnTouchListener(new OnTouchListener() {
@Override public boolean onTouch(View v, MotionEvent event) { 
    switch (event.getAction())
    {
         // when user first touches the screen we get x and y coordinate
          case MotionEvent.ACTION_DOWN:                          
          {                             
             x1 = event.getX();
             y1 = event.getY();
             break;
           }                         
           case MotionEvent.ACTION_UP:                          
           {
             x2 =event.getX();
             //Si le glissement du doigt de gauche à droite 
             if (x1 < x2)
             {
                ...........................
              }
             //Si le glissement du doigt de droite à gauche
              else                             
              {
                ...........................                   
              }
                ...........................                    
              break;                                           
           }                 
     } return true; 
```

} });

# codeigniter - 篝火+火花

> ID：14290442
> 
> 赞同：1
> 
> 时间：2013-01-12T05:07:36.080
> 
> 标签：codeigniter, codeigniter-2

我是使用[Bonfire](http://cibonfire.com)的新手（使用[Modular Extensions - HMVC](https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/)）。

我想集成[Sparks](http://getsparks.org)以使用[PhpActiveRecord](http://phpactiverecord.org)。

我知道正常安装 sparks 无法做到这一点，所以我按照本[教程](http://www.venturin.net/2011/10/29/how-to-make-ci2-work-with-hmvc-and-sparks/)进行操作。

真正的问题是，即使它指向 sparks 目录，bonfire 也无法加载 php-activerecord spark（我已经检查过了）。

有人知道一些调整吗？

我有一个错误。

```
An Error Was Encountered
Unable to load the requested class: phpactiverecord 
```

# asp.net-mvc - 未能找到或加载已注册的 .Net Framework 数据提供程序。- ASP.NET MVC 4 + 实体框架

> ID：14290447
> 
> 赞同：1
> 
> 时间：2013-01-12T05:08:55.117
> 
> 标签：asp.net-mvc, asp.net-mvc-4, sql-server-ce, entity-framework-5

运行“无法找到或加载已注册的 .Net Framework 数据提供程序”时出现服务器错误。我将 Sql Compact 4 数据库包含在 ASP.NET MVC 4 + Entity Framework 中，上传到 godaddy 服务器... web.config 如下

**网络配置**

```
<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <connectionStrings>
    <add name="EShip" connectionString="Data Source=|DataDirectory|\EShip.sdf" providerName="System.Data.SqlServerCe.4.0" />
  </connectionStrings>
  <appSettings>
    <add key="webpages:Version" value="2.0.0.0" />
    <add key="webpages:Enabled" value="false" />
    <add key="PreserveLoginUrl" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
    <customErrors mode="Off"/>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true" />
    <handlers>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
  </system.webServer>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="v11.0" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="WebGrease" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-1.3.0.0" newVersion="1.3.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <system.data>
    <DbProviderFactories>
      <remove invariant="System.Data.SqlServerCe.4.0"/>
      <add name="Microsoft SQL Server Compact Data Provider 4.0"
           invariant="System.Data.SqlServerCe.4.0"
           description=".NET Framework Data Provider for Microsoft SQL Server Compact"
           type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=4.0.0.1, 
             Culture=neutral, 
             PublicKeyToken=89845dcd8080cc91"/>
    </DbProviderFactories>
  </system.data>
</configuration> 
```

[/xml]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-11T17:33:37.437

使用 OP 的评论，我有一个稍微详细一点的版本。

有了nuget，就可以运行命令了

```
install EntityFramework.SqlServerCompact 
```

下载 SqlServerCompact 当我尝试这样做时，我看到 3 个依赖项随之而来，因此您总共获得 4 个安装：

*   Microsoft.SqlServer.Compact
*   SqlServerCompact
*   实体框架
*   EntityFramework.SqlServerCompacy

因此可以推断，遇到此问题的一个可能原因是您的安装缺少 SqlServerCompact。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T11:00:54.763

我在一个简单的测试应用程序中遇到了类似的问题。

Install-Package`EntityFramework.SqlServerCompact`通过将 SqlServer Compact dll 添加到应用程序“packages”目录中消除了“无法找到或加载已注册的 .Net Framework 数据提供程序”的消息。它在 packages.config 中添加了以下内容；

```
<?xml version="1.0" encoding="utf-8"?>
<packages>
  <package id="EntityFramework" version="5.0.0" targetFramework="net40-Client" />
  <package id="EntityFramework.SqlServerCompact" version="4.3.6" targetFramework="net40-Client" />
  <package id="Microsoft.SqlServer.Compact" version="4.0.8876.1" targetFramework="net40-Client" />
  <package id="SqlServerCompact" version="4.0.8854.1" targetFramework="net40-Client" />
</packages> 
```

它还添加了`System.Data.SqlServerCe`和`System.DataSqlServerCe.Entity`应用程序引用。

然后我遇到了这样的异常；

```
System.IO.FileLoadException was unhandled
  Message=Could not load file or assembly 'System.Data.SqlServerCe, Version=4.0.0.1, Culture=neutral, PublicKeyToken=89845dcd8080cc91' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)
  Source=mscorlib
  FileName=System.Data.SqlServerCe, Version=4.0.0.1, Culture=neutral, PublicKeyToken=89845dcd8080cc91
  FusionLog==== Pre-bind state information ===
LOG: User = mulcahy\mulcahy_admin
LOG: DisplayName = System.Data.SqlServerCe, Version=4.0.0.1, Culture=neutral, PublicKeyToken=89845dcd8080cc91
 (Fully-specified)
LOG: Appbase = file:///C:/Users/mulcahy_admin/Dropbox/projects/ons/CSLCE4CL/CSLCE4CL/bin/Debug/
LOG: Initial PrivatePath = NULL
Calling assembly : System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089.
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: C:\Users\mulcahy_admin\Dropbox\projects\ons\CSLCE4CL\CSLCE4CL\bin\Debug\CSLCE4CL.vshost.exe.Config
LOG: Using host configuration file: 
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config.
LOG: Redirect found in application configuration file: 4.0.0.1 redirected to 4.0.0.1.
LOG: Post-policy reference: System.Data.SqlServerCe, Version=4.0.0.1, Culture=neutral, PublicKeyToken=89845dcd8080cc91
LOG: Attempting download of new URL file:///C:/Users/mulcahy_admin/Dropbox/projects/ons/CSLCE4CL/CSLCE4CL/bin/Debug/System.Data.SqlServerCe.DLL.
WRN: Comparing the assembly name resulted in the mismatch: Revision Number
ERR: Failed to complete setup of assembly (hr = 0x80131040). Probing terminated. 
```

这似乎表明应用程序配置为使用 SqlServerCE v4.0.0.1 - 但发现 v4.0.0.0

所以我使用了 Eriks 的建议并将 DbProviderFactories 条目更改为 v4.0.0.0 并删除了引用 v4.0.0.1 新版本的 bindingRedirect 条目。

这似乎有效。希望它可以帮助任何走这条路的人......

与此同时，我有点困惑；

1.  为什么`System.Data.SqlServerCe.dll`at 版本是 4.0.8876.1 - 我怎么知道这实际上是 v4.0.0.0
2.  v4.0.0.1 参考来自哪里 - 我必须在我的机器上安装这个版本？

# javascript - 为什么 jquery/javascript 在 jquery mobile listview 中创建重复的列表项？

> ID：14290448
> 
> 赞同：0
> 
> 时间：2013-01-12T05:08:58.947
> 
> 标签：javascript, jquery, listview, jquery-mobile

我正在尝试构建一个 JQuery Mobile 列表视图（基于[入门指南](http://jquerymobile.com/demos/1.2.0/docs/about/getting-started.html)）。列表项由 json 数据填充。

它基本上正在工作。该列表正在创建并正确设置样式。但该列表包括重复项。只有 2 个 json 对象，但列表包括四个项目。最后两个是前两个的重复。

我已经仔细检查了 json 数据并将变量输出到控制台。两者都只包含两个对象，没有重复。

为什么这个 jquery/javascript 在列表视图中创建重复的列表项？如何防止重复？

我的问题可能类似于[jQuery Mobile 列表中的 jQuery .append() JSON 数据在刷新页面时添加重复项中描述的问题？](https://stackoverflow.com/questions/10399510/jquery-append-json-data-in-a-jquery-mobile-list-adding-duplicates-when-page-i). 但是提供的唯一解决方案并不能防止重复，它们只解释了如何过滤掉重复。这似乎是一个低效的组合。

这是我的 javascript ([live version] ( [http://dev.mycourtdates.com/jq.html](http://dev.mycourtdates.com/jq.html) ))::

```
<!DOCTYPE html>
<html>
<head>
    <title>J 2.1</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
</head>
<body>
    <div data-role="content">
        <ul id = "myList" data-role="listview" data-inset="true" data-filter="true">
            <script>
            $.getJSON("http://dev.mycourtdates.com/jsonData.txt?",
                {
                    id: "73125"
                },
                function(data) {
                    var items = [];

                    $.each(data, function(i,ct_setting){
                        items.push('<li><a href="#">' + ct_setting.caseNumber + '</a></li');
                    });
                    console.log(items);
                    $('#myList').append(items).listview('refresh');
                });
            </script>
        </ul>
    </div><!-- /content -->
</body>
</html> 
```

这是我的 json 数据（[实时版本]（[http://dev.mycourtdates.com/jsonData.txt](http://dev.mycourtdates.com/jsonData.txt)））：

```
[
   {
      "active":"1",
      "caseNumber":"B 1102907-C",
      "timeDate":"2012-07-31 09:00:00",
      "setting":"JURY TRIAL",
      "location":"H.C. COURT HOUSE ROOM 320",
      "plaintiffs":"STATE OF OHIO",
      "defendants":"EDWARD L HOGAN",
      "attorneyId":"PP68519"
   },
   {
      "active":"",
      "caseNumber":"B 1200563",
      "timeDate":"2012-08-06 09:00:00",
      "setting":"JURY TRIAL",
      "location":"H.C. COURT HOUSE ROOM 320",
      "plaintiffs":"STATE OF OHIO",
      "defendants":"RONALD SILER ",
      "attorneyId":"PP68519"
   }
] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T05:29:28.907

您的`<script>`标签位于无效位置。

这个[jsfiddle](http://jsfiddle.net/TWUXf/)正在工作：

```
<div data-role="content">
    <ul id = "myList" data-role="listview" data-inset="true" data-filter="true">
    </ul>
</div> 
```

* * *

以下 Javascript 应放置在`<script>`标题中的标记中。

```
$(document).ready(function() {
    $.getJSON("http://dev.mycourtdates.com/jsonData.txt?",
            {
                id: "73125"
            },
            function(data) {
                var items = [];

                $.each(data, function(i,ct_setting){
                    items.push('<li><a href="#">' + ct_setting.caseNumber + '</a></li');
                });
                console.log(items);
                $('#myList').append(items).listview('refresh');
            });
}); 
```

请注意，由于上述源的访问控制标头限制，我不得不更改[小提琴中的 JSON 源。](http://jsfiddle.net/TWUXf/)

# java - suguacrm 6.4.4 中的重复数据删除

> ID：14290455
> 
> 赞同：1
> 
> 时间：2013-01-12T05:10:53.080
> 
> 标签：java, php, sugarcrm

我正在运行 Sugar CE 版本 6.4.4，但我不小心忘记检查重复的联系人、电子邮件地址。有没有办法一次合并多个联系人而不是一次手动合并一个？

任何帮助将不胜感激。

提前致谢！

拉杰库马尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:53:01.990

请参阅此 SugarCRM 知识库文章....

[http://support.sugarcrm.com/03_Training/01_How_Do_I/10_Work_with_Records/039_Merge_Duplicate_Records](http://support.sugarcrm.com/03_Training/01_How_Do_I/10_Work_with_Records/039_Merge_Duplicate_Records)

# javascript - 当浏览器屏幕分辨率改变时动态改变模态的高度和宽度

> ID：14290459
> 
> 赞同：1
> 
> 时间：2013-01-12T05:12:15.790
> 
> 标签：javascript, jquery, html, simplemodal

我正在研究一个 jquery 简单模式。我正在尝试在加载时加载它，大约 15 秒后它会自动关闭。所以我无法实现的是，如果我为该模态设置宽度和高度，并且如果用户浏览器屏幕分辨率发生变化（[ `ctrl(+)`]或[ `ctrl(-)`]），模态的大小会有所不同。因此，我尝试使用并将该宽度分配给该模态来捕捉用户的屏幕`screen.width`分辨率`screen.height`。但它搞砸了我不知道为什么。 这是我正在尝试做[的演示链接。](http://vignesh.gvignesh.org/test/sample_modal/)这是我正在使用的 jquery 代码。

```
<script>
$(document).ready(function() {
    (function () {
    var width = screen.width,
        height = screen.height;
    setInterval(function () {
        if (screen.width !== width || screen.height !== height) {
            width = screen.width;
            height = screen.height;
            $(window).trigger('resolutionchange');
        }
    }, 50);
}());
$.modal($("#basic-modal-content"));
$("#simplemodal-container").width(screen.width);
$("#simplemodal-container").height(screen.height);  
});
setTimeout(function() { 
$.modal.close();
}, 15000);

</script> 
```

实际情况是我试图隐藏我的屏幕并在模式中放置一个广告，直到页面加载。希望我的问题很清楚。先感谢您 ！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T07:02:39.517

我在这里有[jsfiddle](http://jsfiddle.net/DqBKQ/7/)的更新。

我已经添加了这个：

```
modal.css({
  width: w + ($(window).width() - w),
  height: h + ($(window).height() - h)
}); 
```

到你的脚本。好消息是它`modal`占据了整个屏幕，另一方面，当窗口调整大小时，边框（绿色）将消失，只显示模态框的内容。

但这对你来说将是一个好的开始。

更新：

我在[这里](http://jsfiddle.net/DqBKQ/10/)更新了 jsfiddle 。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T07:12:30.747

```
<script>

    $(document).ready(function() {
        (function () {
        var width = screen.width,
            height = screen.height;
        setInterval(function () {
            if (screen.width !== width || screen.height !== height) {
                width = screen.width;
                height = screen.height;
                $(window).trigger('resolutionchange', width, height);
            }
        }, 50);
    }());
    $.modal($("#basic-modal-content"));
    $("#simplemodal-container").width(screen.width);
    $("#simplemodal-container").height(screen.height);  
    });

    $(window).on('resolutionchange', function(width, height){
        $("#simplemodal-container").width(width);
        $("#simplemodal-container").height(height); 

       //you also need to set position left:0 and top:0;
    });

    setTimeout(function() { 
    $.modal.close();
    }, 15000);

</script> 
```

但我建议使用这种方式，因为你想填充浏览器窗口

```
#simplemodal-container {
   left:0;
   top:0;
   width:100%;
   height:100%;
   position:fixed;
} 

<script type="text/javascript">
    setTimeout(function(){
      $('#simplemodal-container').fadeOut();
    },1500);
</script> 
```

或以其他方式[您的解决方案]：

```
<script>

    $(function() {

       var width = screen.width,
            height = screen.height;

       $.modal($("#basic-modal-content"));
       $("#simplemodal-container").width(width).height(height).css({top:0,left:0});

       $(window).resize(function(){
            width = screen.width;
                height = screen.height;
                $(window).trigger('resolutionchange', width, height);
       });

       $(window).on('resolutionchange', function(width, height){
          $("#simplemodal-container").width(width).height(height).css({top:0,left:0});
          //if you have padding for modal, remove it
       });

       setTimeout(function() { 
          $.modal.close();
       }, 15000);

    });

</script> 
```

# jquery - 使用 JQuery 的 AJAX

> ID：14290465
> 
> 赞同：0
> 
> 时间：2013-01-12T05:12:57.617
> 
> 标签：jquery

我在 index.html 中使用以下代码

```
<html>
<head>
<title>Ajax check</title>
<script type="text/javascript" src="jquery-1.8.3.min.js" /> 

<script type="text/javascript">
$(document).ready(function(){

alert('working...');
$('#ibutton').click(function(e){
e.preventDefault();
alert('double click');      
$.ajax({
url: "page.html",
cache: false,
success: function(){
$("#message").val('ajax working..');
},
error: function(){
$("#message").val('error in the page');
}
});
}); 
});
</script>
</head>
<body> 
<form action="page.html">
<input type="button" id="ibutton" value="click here"/>
<div id="message"></div>
</form>
</body>
</html> 
```

在`page.html`中，当我单击按钮时，唯一的内容是“工作……” `click here`……没有任何反应……代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T05:19:13.963

错误是`val`功能。我认为您想使用`text`函数而不是`val`：

```
$("#message").text('ajax working..'); 
```

# macos - 在 Mac OS 10.8.2 上构建 Ada 的问题

> ID：14290468
> 
> 赞同：1
> 
> 时间：2013-01-12T05:13:16.023
> 
> 标签：macos, compiler-construction, ada

我从[这里安装了 GNAT 4.3](http://www.macada.org/macada/Downloads.html)

并将以下内容添加到我的 .bash_profile 中：

```
export PATH=/usr/local/ada-4.3/bin:$PATH 
```

现在我可以运行 gnatmake hello.adb

对于具有以下内容的文件 hello.adb：

```
with Ada.Text_IO;use Ada.Text_IO;
procedure Hello is
begin
    Put_Line ("Hello world!");
end Hello; 
```

但我得到这个错误：

```
gcc -c hello.adb

gcc: error trying to exec 'as': execvp: No such file or directory

gnatmake: "hello.adb" compilation error 
```

我猜我的 GNAT 安装有问题，但我一直找不到解决这个问题的方法。

在此先感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T08:18:46.180

您的方法适用于 Mac OS X 10.5 和 10.6，但我还没有尝试过 10.8。要检查的两件事：

*   看起来它找不到汇编程序，`/usr/bin/as`. 验证您是否安装了开发人员工具，因为它是可选安装。另请参阅[*如何在 Mac OS X 10.8 / Xcode 4.4 上使用/安装 gcc*](https://stackoverflow.com/q/9353444/230513)。

*   使用详细选项`gcc`来查看更多关于它在哪里丢失的信息。

    ```
    gcc -c -v hello.adb 
    ```

# android - 从后台线程（定时器任务）刷新 UI 活动（屏幕）

> ID：14290471
> 
> 赞同：0
> 
> 时间：2013-01-12T05:13:51.310
> 
> 标签：android, multithreading, user-interface, android-activity, timer

我是安卓世界的新手，需要紧急帮助。

我有一个带有后台线程的应用程序，它从服务器中提取数据并定期将发件箱​​数据推送到服务器。如果收到新消息并且当时用户打开了一个 UI 活动（比如收件箱屏幕），它应该被刷新，我的意思是应该同时在屏幕上填充新消息。

哪个屏幕用户正在查看我不确定它可以是收件箱还是发件箱。

抱歉描述太长了

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-12T08:55:29.983

以下代码应该可以帮助您。

```
TimerTask task = new TimerTask(){
  public void run() {
  getActivity().runOnUiThread(new  Runnable() {
    public void run() {
        //your code here            
    }
  });
  }
};

Timer timer = new Timer();
timer.schedule(task, splashTime); 
```

# android - 如何删除文本文件android中的行

> ID：14290474
> 
> 赞同：0
> 
> 时间：2013-01-12T05:13:59.007
> 
> 标签：android

281~名字~位置~@time@room% **@time2@** room2%@time3@room3; 我需要删除文本文件中 % 之后的第二行。但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T05:50:37.330

```
BufferedReader in = null;
out = null;
File sdCard = Environment.getExternalStorageDirectory();
File root = new File (sdCard.getAbsolutePath() + "/yourFile");
try {
        InputStream instream = new FileInputStream(file);
        in = new BufferedReader(new InputStreamReader(instream));
        out = new PrintWriter(new File(root,"yournewFile));

        String line; //a line in the file

    while ((line = in.readLine()) != null) {
            if (!Pattern.matches("^some pattern.*",line)) { //find the line we want to delete
                      //if it is not the line you want to delete then write it to new file
                            out.println(line);
            }

    }

    in.close();
    out.flush();
        out.close();
        File oldFile = new File (root,"/yourFile");
        oldFile.delete();
        File newFile = new File (root,"/yournewFile");
        newFile.renameTo(oldFile);
}catch(Exception e) {
    Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_SHORT).show();
} 
```

您应该阅读旧文件并将其与要删除的行匹配。如果它不是您要删除的行，则将其写入另一个文件。因此，您将获得仅缺少要删除的行的新文件. 你完成了。希望它会有所帮助。

# vim - 在 GNOME 终端 vim 中指示模式

> ID：14290475
> 
> 赞同：0
> 
> 时间：2013-01-12T05:14:02.303
> 
> 标签：vim, tmux, gnome-terminal

> **可能重复：**
> [如何在 Gnome 终端的不同模式下更改 VIM 光标形状](https://stackoverflow.com/questions/14266346/how-to-change-vim-cursor-shape-while-in-different-modes-in-gnome-terminal)

[我尝试按照这篇文章](https://stackoverflow.com/questions/6488683/how-do-i-change-the-vim-cursor-in-insert-normal-mode)的说明，让 GNOME 终端 vim 模仿 GVim 的默认行为，即使用白色块作为命令模式，使用垂直管道（又名 I 梁）作为插入模式，但是系统在 tmux 和多个终端上运行得不是特别好vims 正在打开。

我还不想放弃，所以至少我想知道我所处的模式。我在某处读到老派 vim 用户曾经有一些技巧，但我完全找不到它。关于突出显示的东西。

任何帮助，将不胜感激。

# android - 重新启动应用程序时清除 EditText

> ID：14290477
> 
> 赞同：0
> 
> 时间：2013-01-12T05:14:08.890
> 
> 标签：android, browser, android-edittext

我在 android 中创建了一个简单的浏览器应用程序，其中我采用了 EditText 和 ImageButton 以及 webView，用户在 EditText 中输入 url，当单击 Imagebutton 时，他将进入输入 URL 的网页。一切正常，但我只是想要的是，当用户再次启动应用程序时，应清除最后输入的文本。谢谢我的代码如下：

MainActivity.java

```
package com.example.findmap;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.text.BoringLayout;
import android.view.Menu;
import android.view.TextureView;
import android.view.View;
import android.view.View.OnClickListener;
import android.webkit.WebView;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.TextView;

public class MapActivity extends Activity {
WebView browser;
EditText et;
ImageButton ib;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_map);
        browser =(WebView)findViewById(R.id.webkit);
        et = (EditText)findViewById(R.id.editText1);
        et.setText(" ");
        ib =(ImageButton)findViewById(R.id.imageButton1);
        ib.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

                 String url = et.getText().toString();
                  //  browser.loadUrl("http://www.gmail.com");
                    browser.loadUrl("http://"+url);
                     browser.getSettings().setJavaScriptEnabled(true);
                     browser.clearCache(true);

            }
        });

         }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_map, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T05:17:14.117

你必须为此呼吁`onResume()`。在你的 onResume() 中你应该是对的`et.setText("");` ，我希望它会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T05:21:18.620

请在您的活动中添加此代码：

```
@Override
protected void onResume() {

    super.onResume();

    et.setText("");

} 
```

# struts2 - 通过 Struts2 中的动作保存对象

> ID：14290482
> 
> 赞同：1
> 
> 时间：2013-01-12T05:14:51.167
> 
> 标签：struts2

我可以在不使用会话的情况下在 Struts2 中跨操作保留对象吗？

我正在研究一个 Struts2 项目，并且好奇是否有一些方法可以在动作结束后保留​​对象值。

我想做的是：

1.  调用操作以从上传的文件中读取并将其内容准备为对象列表。
2.  然后我将列表显示为用户的示例。
3.  然后用户可以点击提交按钮来调用一个动作来处理从第一个动作创建的列表。

通常，一旦操作结束，列表就会丢失。所以，我必须将列表存储为一个会话，但我认为它应该有一些更好的方法来实现我正在研究的目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T06:07:54.720

如果您想跨请求保留数据，则会话是这样做的正常机制。

如果您不使用会话，则需要基本上复制其功能以维护与当前用户/会话关联的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T15:23:18.607

如果你需要*保存*List，那么你*必须*使用Session。

但是如果你（如果我理解你的问题）只需要通过

> ActionOne（创建列表）->
> 
> JSPOne（向用户显示列表）->
> 
> ACtionTwo（从 JSPOne 接收列表并与之做一些交易）

，而不必担心用户可以更改 List 客户端这一事实（例如使用 FireBug 操作网页），那么您就不需要会话。

您只需要在 ActionOne 和 ActionTwo 上声明 List 对象（使用 getter 和 setter，至少 ActionOne 上的 getter 和 ActionTwo 上的 setter），并在`name`JSP 标记的属性中包含 List 名称和索引。如果您只是绘制它（例如使用`<s:property/>`标签），而不是使用一些将发布值的标签，例如`<s:textfield />`，那么只需使用 an`<s:hidden />`来发布 te 值。

例如，如果您有：

```
List<MyObject> myList //with getters and setters 
```

并假设 MyObject 具有`id`和`value`字段（带有 getter 和 setter），

在 JSP 中而不是

```
<s:iterator value="myList" >
   <s:property value="id"/>
   <s:textfield name="value"/>
</s:iterator> 
```

采用

```
<s:iterator value="myList" status="ctr" >
   <s:hidden name="myList[#ctr.index].id" value="id"/>
   <s:property value="id"/> <!-- no need here, you won't post this -->
   <s:textfield name="myList[#ctr.index].value" value="value" />
</s:iterator> 
```

您最终将通过*访问者验证器*验证这样的列表（在完成所有其余部分后，将来会出现 :)

享受

# macos - OS X：列出和删除带空格的文件

> ID：14290483
> 
> 赞同：7
> 
> 时间：2013-01-12T05:14:51.633
> 
> 标签：macos, bash

我想在 OS X 中这样做：

```
ls -rt | xargs rm -i 
```

然而，`rm`令人窒息的是一些文件有空格。

我提到 OS X 是因为 BSD 的版本`ls`没有`-Q`标志。

有没有办法做到这一点而不必使用`find -print0`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T05:48:40.337

```
[sgeorge@sgeorge-ld staCK]$ touch "file name"{1..5}.txt
[sgeorge@sgeorge-ld staCK]$ ls -1
file name1.txt
file name2.txt
file name3.txt
file name4.txt
file name5.txt
[sgeorge@sgeorge-ld staCK]$ ls -rt |  xargs -I{} rm -v {}
removed `file name5.txt'
removed `file name4.txt'
removed `file name3.txt'
removed `file name2.txt'
removed `file name1.txt' 
```

**或者**

```
[sgeorge@sgeorge-ld staCK]$ ls -1
file a
file b
file c
file d

[sgeorge@sgeorge-ld staCK]$ OLDIFS=$IFS; IFS=$'\n'; for i in `ls -1` ; do rm -i $i ; done ; IFS=$OLDIFS
rm: remove regular empty file `file a'? y
rm: remove regular empty file `file b'? y
rm: remove regular empty file `file c'? y
rm: remove regular empty file `file d'? y 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T05:22:11.963

只需为您找到删除它。

```
find . -print -depth 1 -exec rm -i {} \; 
```

它更灵活，应该可以使用空格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T11:28:30.550

如果要删除所有文件，有什么问题`rm -i *`？

[不要解析`ls`](http://mywiki.wooledge.org/ParsingLs)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-05T17:37:53.590

你有两个选择。`\0`您可以使用 -0 选项调用 xargs，该选项使用 NUL 字符 ( ) 作为分隔符将输入拆分为参数：

```
ls -rt | tr '\n' '\0' | xargs -0 rm -i 
```

或者您可以使用 -I 选项仅在换行符上拆分输入 ( `\n`) 并为输入的每一行调用一次所需的命令：

```
ls -rt | xargs -I_ rm -i _ 
```

不同之处在于第一个版本只调用`rm`一次，所有参数作为一个列表提供，而第二个版本`rm`为输入中的每一行单独调用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-12T05:22:54.143

试试这个

```
while read -u 3
do
  rm -i "$REPLY"
done 3< <(ls -rt) 
```

# image - 在一个 div 中，我有一个图像，然后是段落，最后是图像。我无法将第二张图片放在段落的“内部”

> ID：14290484
> 
> 赞同：0
> 
> 时间：2013-01-12T05:14:55.480
> 
> 标签：image, html, division, word-wrap, paragraph

所以，我有一个 div，里面有 3 个东西；1\. 一张图片（左大引号） 2\. 实时文本段落 3\. 末尾的另一张图片（右大引号）。

第一张图片，当它放在 div 中时，会导致文本换行，这很棒。它似乎是该段落的一部分。

我的问题：我无法将第二张图片放在最后的段落“内部”。它被推到段落区域下方。我希望它用我的段落文本“换行”。

```
#textarea {
width: 185px;
height: 70px;
padding: 49px; 
```

}

```
#textarea p {
font-size: 15px;
font-weight: bold;
color: #4D6F79;
line-height: 230%;
text-align: center;
-webkit-margin-after: 0em;
-webkit-margin-before: 0em; 
```

}

```
<div id= "textarea">
            <img src="images/leftquote.png" width="36" height="43" alt="left quotation" align="left"/>
            <p>The kids really loved it!</p>
            <img src="images/rightquote.png" width="32" height="20" alt="right quotation" align="right"/>
        </div> 
```

任何帮助/想法将不胜感激！谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T05:23:57.653

我不确定您想要段落中的第二张图片是什么意思，但我知道使用 css 将您的第二张图片重新定位到您想要的位置的一种非常简单且便宜的方法......首先在您的图片上放一个 ID：

```
<img id='image2' src="images/rightquote.png" width="32" height="20" alt="right quotation" align="right"/> 
```

然后使用 CSS 重新定位它：

```
<style>
#image2 {
position:relative;
top:-50px; // These numbers are just examples you can change them to anything to properly reposition your text.
left:20px;
z-index:-1; //depending on whether you want your image infront or behind the text you can change your z-index to either a positive number e.g.(5) or negative number e.g.(-2).
}
</style> 
```

如果您担心不同浏览器之间的不同格式，那么它们不会因为这个定位而出现巨大差异，但是如果您可以使用溢出将文本环绕在图像周围，还有另一种方法可以做到这一点。前任：

```
 <div class='floating-eg'>
<p>The kids really loved it!</p>
        <img class='left' src="images/rightquote.png" width="32" height="20" alt="right quotation" align="right"/>
</div>
<style>
.floating-eg {
    overflow: auto;
}
p {
    overflow: auto;
}
</style> 
```

[您可以在此处](http://jsfiddle.net/leegee/vpjjB/)查看相关的包装示例。

# xslt - 基于字符的 XSLT 转换

> ID：14290486
> 
> 赞同：0
> 
> 时间：2013-01-12T05:15:22.837
> 
> 标签：xslt

我需要`<mo>`根据其中的字符转换 XML 元素。例如，如果元素只包含大写字符，我需要转换为“obar”。但是当它只包含小写字符时，我需要转换为“orule”。如果元素同时包含大写和小写字符，那么我需要转换为“obar”。此外，如果元素包含 XSLT 代码中给出的任何升序字符，它应该是“obar”。

我已经使用了`<xsl:if>`条件。我只需要使用一次`<xsl:if>`条件

我只需要通过 XSLT 1.0 进行转换。

**示例 XML 代码：**

```
<?xml version="1.0"?><chapter xmlns="http://www.w3.org/1998/Math/MathML">
  <p>
    <math display="block">
      <mrow>
        <mover accent='true'>
          <mrow>
            <mi>R</mi>
            <mi>T</mi>
          </mrow>
          <mo stretchy='true'>&#x00AF;</mo>
        </mover>
        <mover accent='true'>
          <mrow>
            <mi>a</mi>
            <mi>A</mi>
          </mrow>
          <mo stretchy='true'>&#x00AF;</mo>
        </mover>
        <mover accent='true'>
          <mrow>
            <mi>a</mi>
            <mi>a</mi>
          </mrow>
          <mo stretchy='true'>&#x00AF;</mo>
        </mover>
        <mover accent='true'>
          <mrow>
            <mi>a</mi>
            <mi>h</mi>
          </mrow>
          <mo stretchy='true'>&#x00AF;</mo>
        </mover>
      </mrow>
    </math>
  </p>
</chapter> 
```

**XSLT 1.0 试过：**

```
<?xml version='1.0'?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns="http://www.w3.org/1998/Math/MathML" xmlns:m="http://www.w3.org/1998/Math/MathML" >
<xsl:output method="xml" encoding="UTF-8" indent="no"/>
<xsl:strip-space elements="*"/>
<xsl:template match="@* | node()">
<xsl:copy>
<xsl:apply-templates select="@* | node()"/>
</xsl:copy>
</xsl:template>
<xsl:template match="m:mover[@accent='true']">
<xsl:choose>
<xsl:when test="(self::*/child::*[2]/self::m:mo[@stretchy='true']/text())='¯'">
<xsl:if test="(self::*/child::*[1]/self::m:mrow/child::*/text())='b' or 'd' or 'f' or 'h' or 'i' or 'j' or 'k' or 'l' or 'r' or 't' or 'A' or 'B' or 'C' or 'D' or 'E' or 'F' or 'G' or 'H' or 'I' or 'J' or 'K' or 'L' or 'M' or 'N' or 'O' or 'P' or 'Q' or 'R' or 'S' or 'T' or 'U' or 'V' or 'W' or 'X' or 'Y' or 'Z'"><xsl:text>*obar*{</xsl:text></xsl:if>
<xsl:if test="(self::*/child::*[1]/self::m:mrow/child::*/text())='a' or 'c' or 'e' or 'g' or 'm' or 'n' or 'o' or 'p' or 'q' or 's' or 'u' or 'v' or 'w' or 'x' or 'y' or 'z'"><xsl:text>*orule*{</xsl:text></xsl:if>
<xsl:apply-templates/>}</xsl:when>
</xsl:choose>
</xsl:template>
<xsl:template match="m:mrow"><xsl:apply-templates/></xsl:template>
<xsl:template match="m:mi"><xsl:apply-templates/></xsl:template>
<xsl:template match="m:mo"></xsl:template>
</xsl:stylesheet> 
```

**需要输出：**

```
<chapter xmlns="http://www.w3.org/1998/Math/MathML">
  <p>
    <math display="block">*obar*{RT}*obar*{aA}*orule*{aa}*obar*{ah}</math>
  </p>
</chapter> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T05:55:43.633

这个怎么样：

```
<?xml version='1.0'?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns="http://www.w3.org/1998/Math/MathML" xmlns:m="http://www.w3.org/1998/Math/MathML" >
  <xsl:output method="xml" encoding="UTF-8" indent="no"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>
  <xsl:template match="m:mover[@accent='true']">
    <xsl:if test="*[2][@stretchy='true'] = '&#x00AF;'">
      <xsl:choose>
        <!-- translate(value, 'listOfCharacters', '') != .  will be true if value contains any of the characters in the list-->
        <xsl:when test="m:mrow/*[translate(., 'bdfhijklrtABCDEFGHIJKLMNOPQRSTUVWXYZ', '') != .]">
          <xsl:text>*obar*</xsl:text>
        </xsl:when>
        <xsl:otherwise>*orule*</xsl:otherwise>
      </xsl:choose>
      <xsl:text>{</xsl:text>
      <xsl:apply-templates/>
      <xsl:text>}</xsl:text>
    </xsl:if>
  </xsl:template>
  <xsl:template match="m:mrow | m:mi">
    <xsl:apply-templates/>
  </xsl:template>
  <xsl:template match="m:mo" />
</xsl:stylesheet> 
```

# heroku - pgbackups：恢复内部错误

> ID：14290487
> 
> 赞同：2
> 
> 时间：2013-01-12T05:15:29.553
> 
> 标签：heroku, restore

$heroku pgbackups:restore DATABASE "http://........heroku2.dump" --app myapp

！ **内部服务器错误。**

！运行`heroku status`以检查已知的平台问题。

$heroku 状态

=== Heroku 状态

开发：目前没有已知问题。

生产：目前没有已知问题。

$Heroku 日志 --app tcdemo

没有特定于这些命令的条目。myapp.herokuapp.com 出现在浏览器中。

如何找到 Heroku 内部服务器错误的详细信息？

# jquery - Jquery 点击 CSS 类

> ID：14290488
> 
> 赞同：0
> 
> 时间：2013-01-12T05:16:04.950
> 
> 标签：jquery, css

我的 html 中有一个如下按钮

```
<button class="btn btn-inverse" type="submit">Login</button> 
```

所以 CSS 类名是“btn btn-inverse”。如何使用 css 类执行 JQuery 单击操作？

这对我不起作用

```
$('.btn btn-inverse').click(function(){
alert("Called");
}); 
```

任何帮助将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T05:18:31.113

它会这样工作：

```
$('.btn.btn-inverse').click(function(){
    alert("Called");
}); 
```

[jsFiddle](http://jsfiddle.net/m3LE4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T05:18:38.303

```
'.btn btn-inverse' 
```

正在寻找具有子元素“btn-inverse”的类“btn”的元素。空格意味着您现在正在谈论一个新的（子）元素。

在您的情况下，您需要一个具有“btn”类和“btn-inverse”类的元素，因此您需要删除空格并在第二个类“btn-inverse”之前加上“。” 来表示一个类名。

```
'$('.btn.btn-inverse') 
```

这样，您就在谈论具有两个类的同一个元素。

你也想要'click'而不是'clcik'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T05:55:53.160

您可以使用这些类选择器中的任何一个来选择该元素：

```
$('.btn')
$('.btn-inverse')
$('.btn.btn-inverse') 
```

最佳选择取决于页面中的哪些其他元素使用这些类，以及您是否也想选择它们。

# javascript - 在键盘输入上发送 jQuery ajax 请求

> ID：14290490
> 
> 赞同：4
> 
> 时间：2013-01-12T05:16:53.220
> 
> 标签：javascript, jquery, ajax

我在用户输入`<input>`元素时向服务器发送 ajax 请求，如下所示：

```
$('#my-input').bind("input", function(event){
   // here's the ajax request
}); 
```

困扰我的是，它在**每个**用户的键位上发送了不必要的许多请求，这意味着如果用户键入非常快，就会有许多不必要的请求。所以我认为应该有一定的延迟/超时，等待一定的时间（50 毫秒？）让用户在发送 ajax 请求之前停止输入。那将是解决一个问题。

但是在发送另一个请求之前第一个 ajax 请求还没有完成的情况呢？（键入 60 毫秒/字符，而 ajax 请求需要 300 毫秒）。

解决这个问题的最佳方法是什么（基于想法和代码）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T05:21:04.760

您可以在下划线库中使用[油门功能。](http://documentcloud.github.com/underscore/#throttle)正如其文档所述：

> 创建并返回传递函数的新的、受限制的版本，当重复调用时，每等待毫秒最多只会实际调用一次原始函数。对于发生得比您跟得上快的限速事件很有用。

即使你不想引入一个新的库，你仍然可以从它的[源代码](http://documentcloud.github.com/underscore/docs/underscore.html)中了解这个函数是如何工作的。事实上，一个简单的`throttle`函数版本可能是：

```
function throttle(func, delay) {
    var timeout = null;
    return function() {
        var that = this, args = arguments;
        clearTimeout(timer);
        timeout = setTimeout(function() {
            func.apply(that, args);
        }, delay);
    };
} 
```

这个 jQuery [throttle-debounce 插件](http://benalman.com/projects/jquery-throttle-debounce-plugin/)也很有帮助。特别是，根据作者的说法，该`debounce`功能似乎比功能更适合您的需求：`throttle`

> 去抖动对于限制将触发 AJAX 请求的事件的处理程序执行的速率特别有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T05:26:28.440

您可以只使用 setTimeout 函数。每隔一段时间，看看文本是否没有改变，如果没有，然后进行相应的处理。

```
setTimeout(function() {
      // Do something after 1 second
}, 1000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T06:18:27.043

您可以在您的 ajax 请求中设置 async: false ，这样它只会在第一个 ajax 请求完成后处理第二个 ajax 调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T08:07:50.990

我会选择[@HuiZeng 的回答](https://stackoverflow.com/a/14290516/1177441)，但以防万一你想要一个稍微修改的版本。

脚步

1.  使用可以清除的 setTimeout 收听 keydown。
2.  当它触发时，检查队列中是否有先前的请求，如果有则中止它并触发一个新请求

例子：

```
var inputTimer = 0, req;

function onInput(e){
      clearTimeout(inputTImer);
      inputTimer = setTimeout( function(){
           // You have access to e here
           // Cancel any previous requests
           req && req.abort();
           req = $.ajax({/*...Do your magic here :)*/})
      }, 100)
 } 
```

# java - 是否可以创建一个方法以将方法作为参数传递并在其中调用？

> ID：14290492
> 
> 赞同：0
> 
> 时间：2013-01-12T05:17:15.237
> 
> 标签：java, methods

那么我想知道是否有可能有一个方法将另一个方法作为参数传递，所以第一个方法可以调用参数中传递的方法？

比如：

```
public void goToVisitManagementForm() throws ParseException {
    if (isAuthenticated() && userTypeIs("Patient")) {

         // I could have this whole block just moved to another method?
        Panel newPanel = new Panel("Choose the details for your visit");
        Component visitManagementForm = new VisitManagementForm(userData,
                this);
        newPanel.addComponent(visitManagementForm);
        mainWindow.setMainPanel(newPanel);

    } else {
        authenticate();
    }
} 
```

如果代码块将被移动到另一个方法，并且它将作为参数传递给该方法。我怎样才能做到这一点，这是一个好习惯吗？因为在这种情况下，我有我总是需要粘贴的 ifs……其他方面呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T05:23:06.773

这称为[高阶函数](http://en.wikipedia.org/wiki/Higher-order_function)，您不能在 Java 7 或更低版本中执行此操作。您可以通过使用匿名类来模拟将函数传递给其他函数，该类实例化函数期望的某个接口，然后在该对象上调用该函数。

例如，传递一个无参数函数：

```
interface Function {
    void apply();
}

void takesAFunction(Function function) {
    function.apply();
} 
```

然后下面的代码片段会做你想要的：

```
Function myFunction = new Function() {
    @Override
    public void apply() {
        // your code here.
    }
};
takesAFunction(myFunction); 
```

作为旁注，反射对于这类问题来说是极端过度的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T05:26:42.447

[您可以使用Java 反射 API](http://docs.oracle.com/javase/tutorial/reflect/class/index.html)将方法作为参数传递。

首先，您从一个类中获取一个方法对象：

```
 Class c = MyClass.class;
 Method[] methods = c.getMethods();
 Method m = // choose the method you want 
```

然后您的函数可以将 Method 对象作为参数：

```
 public void aFunction(MyClass o, Method m); 
```

然后在该函数中，您可以调用该方法：

```
 m.invoke(o); 
```

这是一个非常简单的示例，其中方法不带任何参数。扩展此示例并添加参数非常容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T05:25:52.143

是的，但这是一个非常先进的程序。您需要使用该`Method`对象。这是关于方法的javadoc：

这是javadoc：
- [http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Method.html](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Method.html)

如果我正确理解您的问题，您希望能够将方法作为参数传递。在 Java 中确实没有“平滑”的方法可以做到这一点。在目标 C 中，它直接内置于语言中，（@selector 标记）

# c++ - 传递参数并将其转换为十六进制时出错

> ID：14290496
> 
> 赞同：0
> 
> 时间：2013-01-12T05:17:45.593
> 
> 标签：c++, visual-c++

如何通过参数插入文本并自动将其转换为十六进制？

我试过：

```
unsigned char aesKey[32] = argv[1]; 
```

但得到错误

输出将是这样的：

```
unsigned char aesKey[32] = {
    0x53, 0x28, 0x40, 0x6e, 0x2f, 0x64, 0x63, 0x5d, 0x2d, 0x61, 0x77, 0x40, 0x76, 0x71, 0x77, 0x28, 
    0x74, 0x61, 0x7d, 0x66, 0x61, 0x73, 0x3b, 0x5d, 0x66, 0x6d, 0x3c, 0x3f, 0x7b, 0x66, 0x72, 0x36
};

unsigned char *buf;

aes256_context ctx;
aes256_init(&ctx, aesKey);

for (unsigned long i = 0; i < lSize/16; i++) {
    buf = text + (i * 16);
    aes256_encrypt_ecb(&ctx, buf);
}

aes256_done(&ctx); 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T05:29:23.300

在 C 和 C++ 中，当你有类似的代码时

```
char name[]="John Smith"; 
```

编译器在编译时知道该 char 数组的大小以及所有值。因此它可以在堆栈帧上分配它并为其分配值。

当你有像 char * strptr = foo(); 这样的代码时 字符 str[] = strptr;

编译器不知道 strptr 指向的字符串的大小和值是多少。这就是为什么在 C/C++ 中不允许这样做。

换句话说，只能将字符串文字分配给 char 数组，而且也只能在声明时分配。

所以

```
char name[] = "John Smith"; 
```

被允许。

```
char name[32];
name = "John Smith"; 
```

不被允许。

## 使用内存

所以你可以使用 memcpy。（或使用其他人提到的 c++ 替代方案）

```
unsigned char *aesKey;
size_t len = (strlen(argv[1])+1)*sizeof(unsigned char);
aesKey = malloc(len);
memcpy(aesKey, argv[1], len); 
```

## 旧的解决方案

（这里是我之前的回答，上面的回答比较好）所以需要用到strncpy。

```
unsigned char aesKey[32];
strncpy((char *) aesKey, argv[1], 32); 
```

请注意，例程是 strncpy 而不是 strcpy。strcpy 是不安全的。（感谢 PRouleau 的 arg 修复）

如果 strncpy 在 Visual Studio 中不可用，那么您可能必须尝试 strcpy_s（感谢 Google：用户：427390）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T05:36:14.147

在 C/C++ 中，编译器不会自动操作数组。您必须指定如何复制它们。

好的旧方法是使用 memcpy()。更现代的方法是使用 std::copy()。在任何情况下，您都必须在复制到 aesKey 之前验证 argv[1] 的长度。

要转换为十六进制，您可能必须将“AAEE3311”（最多 2*32 个字符）之类的字符串转换为字节。您应该使用 std::istringstream 并按位置填充您的 aesKey 位置。

前任：

```
std::istringstream Input(argv[1]);
Input >> std::hex >> aesKey[0]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T06:50:18.257

我会想象一个程序被称为如下 -

```
myprog 0x53 0x28 0x40 0x6e 0x2f 0x64 0x63 
```

在程序内部，我将有一个循环将参数分配给数组 -

```
const int size = 32;
unsigned char aesKey[size];
char* p;

for (int i = 1; i < argc || i < size; ++i)
{
    aesKey[i] = (unsigned char)strtol(argv[i], &p, 16);
} 
```

# asp.net - 如何在 asp.net 中动态获取 Html 控件 ID

> ID：14290497
> 
> 赞同：0
> 
> 时间：2013-01-12T05:18:25.377
> 
> 标签：asp.net, html, dom

在这里，我需要在 asp.net Web 应用程序的动态网格中动态创建复选框，并且我使用以下代码来做理智，然后我需要使用 Find Control 检索这些 Id -`((CheckBox)GrdShiftDetails.FindControl(Convert.ToString(vStrchkboxId))).Checked` 但显示错误消息，如

> 空引用（对象引用未设置为对象的实例）

所以请帮我解决这个问题。

```
if (GrdShiftDetails.Rows[VintCurrentRow].Cells[coloumcount].Text != "00:00-00:00") {
            CheckBox chk = new CheckBox();
            chk.ID = "chk" + VintCurrentRow + coloumcount;
            chk.Checked = true;
            chk.Text = GrdShiftDetails.Rows[VintCurrentRow].Cells[coloumcount].Text;
            GrdShiftDetails.Rows[VintCurrentRow].Cells[coloumcount].Controls.Add(chk);
            // GrdShiftDetails.Rows[grdRow].Cells[coloumcount]
        }
        else {              
            CheckBox chk = new CheckBox();
            chk.ID = "chk" + VintCurrentRow + coloumcount;
            chk.Checked = false;
            chk.Text = GrdShiftDetails.Rows[VintCurrentRow].Cells[coloumcount].Text;
            GrdShiftDetails.Rows[VintCurrentRow].Cells[coloumcount].Controls.Add(chk);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T06:06:53.153

添加一个

```
if(GrdShiftDetails.Rows.Count > 0 && GrdShiftDetails.Columns.Count > 0)
{

// your code
(GrdShiftDetails.Rows[VintCurrentRow].Cells[coloumcount].Text != "00:00-00:00") {
            CheckBox chk = new CheckBox();
            chk.ID = "chk" + VintCurrentRow + coloumcount;
            chk.Checked = true;
            chk.Text = GrdShiftDetails.Rows[VintCurrentRow].Cells[coloumcount].Text;
            GrdShiftDetails.Rows[VintCurrentRow].Cells[coloumcount].Controls.Add(chk);
            // GrdShiftDetails.Rows[grdRow].Cells[coloumcount]
        }
        else {              
            CheckBox chk = new CheckBox();
            chk.ID = "chk" + VintCurrentRow + coloumcount;
            chk.Checked = false;
            chk.Text = GrdShiftDetails.Rows[VintCurrentRow].Cells[coloumcount].Text;
            GrdShiftDetails.Rows[VintCurrentRow].Cells[coloumcount].Controls.Add(chk);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T18:05:49.920

尝试这个：

```
foreach (GridViewRow objRow in GrdShiftDetails.Rows)
{
   TableCell cCheckCell = new TableCell();
   CheckBox chkCheckBox = new CheckBox();
   cCheckCell.Controls.Add(chkCheckBox);

   objRow.Cells.Add(cCheckCell);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T19:06:59.207

如果您试图找到您添加的 CheckBox：试试这个：

//假设vStrchkboxId是CheckBox所需的ID

```
 for (int i = 0; i < GrdShiftDetails.Rows.Count; i++)
       if(((CheckBox)GrdShiftDetails.FindControl(Convert.ToString(vStrchkboxId))).Checked)
           //do something here. 
```

# javascript - 我们可以绑定隐藏事件还是jquery有一个“onhide”事件

> ID：14290501
> 
> 赞同：-5
> 
> 时间：2013-01-12T05:18:40.290
> 
> 标签：javascript, jquery

到目前为止，我[在 jQuery 中尝试了 onHide() 类型事件](https://stackoverflow.com/questions/2857900/onhide-type-event-in-jquery)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T05:28:21.503

此插件将能够检测到样式更改并通知您：[jQuery Style Listener](http://techfoobar.com/jquery-style-listener/)

你可以像这样使用它：

```
$('#yourElement').styleListener({

    // the styles that you want to monitor for changes
    styles: ['display'],

    // function to be called when a monitored style changes 
    changed: function(style, newValue, oldValue, element) {

        if(style == 'display' && newValue == 'none') {
            // element got hidden, do your stuff
        }
    }

}); 
```

**演示**：http: [//jsfiddle.net/vaxQX/](http://jsfiddle.net/vaxQX/)

*免责声明*：我是插件的作者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T05:26:13.483

您可以在隐藏的函数上提供回调函数。

```
$('div').hide(function(){
    // do something
}); 
```

不确定这是否适用于您想要的，但该功能只会在隐藏完成后触发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T05:26:22.637

您可以使用[http://api.jquery.com/promise/](http://api.jquery.com/promise/)：

[http://jsbin.com/evajiv/1/edit](http://jsbin.com/evajiv/1/edit)

```
$('#test').click(function(){
   $(this).hide();      // I USED .fadeTo() in the demo
   $(this).promise().done(function(  ) {
       alert( 'HIDDEN!' );
   });
}); 
```

或以经典方式：

```
function fn(){
   alert('DONE!');
}

$('#test').click(function(){
   $(this).hide(fn);  // use callback
}); 
```

[http://jsbin.com/evajiv/3/edit](http://jsbin.com/evajiv/3/edit)

# twitter-bootstrap - 如何在 Sass 而不是 Less 中使用 Bootstrap Mixins？

> ID：14290503
> 
> 赞同：4
> 
> 时间：2013-01-12T05:19:04.067
> 
> 标签：twitter-bootstrap, sass, less, mixins

我第一次体验使用 Bootstrap mixins，比如`@include border-radius(5px);`在使用 Sass/Scss 和 bootstrap-sass [https://github.com/thomas-mcdonald/bootstrap-sass的 Rails 应用程序中](https://github.com/thomas-mcdonald/bootstrap-sass)

这是一次很棒的体验，因为我能够使用许多引导程序混合，而无需迁移到/学习 LESS，引导程序建议您是否想在您的应用程序中启用混合：http: [//twitter.github.com/bootstrap/扩展.html](http://twitter.github.com/bootstrap/extend.html)

我现在正在开发一个非 Rails 应用程序，但仍想将引导程序混合与 SASS 一起使用，而不是 LESS。有谁知道非 Rails 应用程序的库或引导 sass mixins？

如果相关，我在新应用程序中使用 django。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T11:44:42.240

**更新**

Bootstrap 现在有一个官方的 Sass 端口，可以在这里找到：[https ://github.com/twbs/bootstrap-sass](https://github.com/twbs/bootstrap-sass)

**以前的**

我发现了一个用 sass 编写的 bootstrap 版本，比将 ruby​​/compass/bootstrap-sass 安装到运行非 Rails 应用程序的系统上要容易得多。

[https://www.github.com/jlong​​/sass-twitter-bootstrap](https://www.github.com/jlong/sass-twitter-bootstrap)

我从 sass-twitter-bootstrap 复制了 lib，并附加了主 sass 文件“bootstrap.scss”。

完毕！无需在任何已经可以处理 sass 的系统上安装任何额外的东西。

# java - 当我尝试运行 nutch 生成命令时，共享内存文件的空间不足

> ID：14290504
> 
> 赞同：13
> 
> 时间：2013-01-12T05:19:11.710
> 
> 标签：java, jvm, nutch

在过去的 3 周里，我一直在运行 nutch 爬行命令，现在当我尝试运行任何 nutch 命令时出现以下错误：

> Java HotSpot(TM) 64 位服务器 VM 警告：共享内存文件空间不足：/tmp/hsperfdata_user/27050 尝试使用 -Djava.io.tmpdir= 选项选择备用临时位置。
> 
> 错误：无法找到或加载主类 ___.tmp.hsperfdata_user.27055

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-09-20T21:22:32.187

是的，这确实是您安装 /tmp 的卷上可用空间的问题。如果您在 EC2 或任何云平台上运行它，请附加一个新卷并将 /tmp 挂载到该卷上。如果在本地运行，除了清理以腾出更多空间之外别无选择。

尝试以下命令： df -h 以查看安装在实例上的每个卷上的已用空间和可用空间百分比。你会看到类似的东西：

```
Filesystem            Size  Used Avail Use% Mounted on
/dev/xvda1            7.9G  7.9G     0 100% /
tmpfs                  30G     0   30G   0% /dev/shm
/dev/xvda3             35G  1.9G   31G   6% /var
/dev/xvda4             50G   44G  3.8G  92% /opt
/dev/xvdb             827G  116G  669G  15% /data/1
/dev/xvdc             827G  152G  634G  20% /data/2
/dev/xvdd             827G  149G  637G  19% /data/3
/dev/xvde             827G  150G  636G  20% /data/4
cm_processes           30G   22M   30G   1% /var/run/cloudera-scm-agent/process 
```

当磁盘空间已满时，您将开始看到此错误，如此转储中所示。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-12T05:40:01.677

我认为使用的临时位置已满。尝试使用其他位置。另外，检查每个分区中的#inodes free 并清理一些空间。

**编辑：** 无需在操作系统级别更改 /tmp。我们希望 nutch 和 hadoop 使用其他位置来存储临时文件。看看这个做那个： [hadoop.tmp.dir应该是什么？](https://stackoverflow.com/questions/2354525/what-should-be-hadoop-tmp-dir)

# javascript - Jquery - 向对话框字段添加值

> ID：14290509
> 
> 赞同：0
> 
> 时间：2013-01-12T05:19:45.127
> 
> 标签：javascript, jquery, jquery-ui

我正在尝试将某行中的值复制到我使用 jquery 调用的对话框表单中，但无法使其正常工作。（编辑功能）。对话框打开，但没有传递来自 ei_Ingredient 的值。上述“添加成分”功能完美运行。下面是我的代码，你可以看到我迄今为止尝试过的三种方法......

```
 $(document).ready(function () {

        var _Ingredient = $('#ingHeader'),
            _newIngredient = $('#newIngredient'),
            _newMeasurement = $('#newMeasurement'),
            _newAmount = $('#newAmount'),
            allFields = $([]).add(_newIngredient).add(_newMeasurement).add(_newAmount)
        $('#dialog-form').dialog({
            autoOpen: false,
            height: 300,
            width: 350,
            modal: true,
            show: "clip",
            hide: "scale",
            speed: "fast",
            buttons: {
                "Add Ingredient": function () {
                    var _row = $('#templates').find('.row-template-ExistingItem').clone();
                    _row.find('.ei_Ingredient').val(_newIngredient.val());
                    _row.find('.ei_Measurement').val(_newMeasurement.val());
                    _row.find('.ei_Amount').val(_newAmount.val());
                    _row.find('.edit').click(function () {
                        _newIngredient.val();
                        _newMeasurement.val(_row.find('ei_Ingredient').val());
                        _newAmount.val($('.ei_Amount').val());
                        $('#dialog-form').dialog('open');
                    });
                    _row.find('.delete').click(function () {
                        _row.remove();
                    });

                    _Ingredient.append(_row);
                    $(this).dialog("close");
                },
                Cancel: function () {
                    $(this).dialog("close");
                }
            },
                close: function () {
                    allFields.val("");
                }
        }); 
```

模板：

```
 <tr class="row-template-ExistingItem">
        <td><input class="ei_Ingredient"  readonly="true"/></td>
        <td><input class="ei_Measurement"  readonly="true" /></td>
        <td><input class="ei_Amount" readonly="true" /></td>
        <td><input type="button" value="Edit" class="edit" style="width:45px;" /></td>
        <td><input type="button" value="Delete" class="delete" style="width:45px;" /></td>
    </tr> 
```

表格：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T04:57:04.383

啊，我刚想通了。这是行之有效的：

```
_newMeasurement.val(_row.find('ei_Ingredient').val()); 
```

我的问题是我忘记了班级名称前的句号。它应该是：

```
_newMeasurement.val(_row.find('.ei_Ingredient').val()); 
```

# ios - 语句需要使用 switch 语句表达整数类型（int 无效）错误

> ID：14290510
> 
> 赞同：-1
> 
> 时间：2013-01-12T05:20:21.283
> 
> 标签：ios, int, switch-statement

我正在尝试加载与用户选择的表格视图行/单元格相对应的图像和标签。代码出现在我的 DetailViewController 实现文件中，如下所示：

```
- (void)viewDidLoad
{
[super viewDidLoad];

//Create a couple of UIImages
UIImage *jenImage = [UIImage imageNamed:@"102_2262.jpg"];
UIImage *jen2Image = [UIImage imageNamed:@"102_2288.jpg"];
UIImage *paigeImage = [UIImage imageNamed:@"102_2332.jpg"];
UIImage *parkerImage = [UIImage imageNamed:@"102_2379.jpg"];

//Switch UIImages and UILabel based on characterNumber
switch (characterNumber) {
    case 0:
        characterName.text = @"Casual Jen";
        characterPic.image = jenImage;
        self.title = @"Casual Jen";
        break;
    case 1:
        characterName.text = @"Dressed Up Jen";
        characterPic.image = jen2Image;
         self.title = @"Dressed Up Jen";
        break;
    case 2:
        characterName.text = @"Paige";
        characterPic.image = paigeImage;
        self.title = @"Paige";
        break;
    case 3:
        characterName.text = @"Parker";
        characterPic.image = parkerImage;
        self.title = @"Parker";
        break;
    default:
        characterName.text = @"Parker";
        characterPic.image = parkerImage;
        self.title = @"Parker";
        break;
    }
} 
```

switch 语句会产生所描述的错误。我已经在这里和其他地方寻找解决方案但没有成功。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T05:23:31.227

将数据类型`characterNumber`设为 int。

# ruby - ruby 中的 ::Class 有什么作用？

> ID：14290512
> 
> 赞同：0
> 
> 时间：2013-01-12T05:20:33.857
> 
> 标签：ruby

> **可能重复：**
> [Ruby 的双冒号 (::) 是什么意思？](https://stackoverflow.com/questions/3009477/what-is-rubys-double-colon-all-about)

原谅我的懒惰。我试着猜测。我不确定在这种情况下双 '::Logger' 做了什么？

[https://github.com/wycats/rack-offline/blob/master/lib/rack/offline.rb#L25](https://github.com/wycats/rack-offline/blob/master/lib/rack/offline.rb#L25)

似乎它正在初始化对象并将其分配给不在其范围内的变量？第 25 行被 {begin/end} 块包裹并分配给@logger

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T05:30:58.430

就像`/`路径中的 a 定义嵌套目录一样，`::`访问嵌套类。

并且也类似于领导`/`，领导`::`意味着从树的最顶端开始。它开始在全局范围内搜索常量。

```
# Bar declared in global scope
class Bar
end

# Foo declared in global scope    
class Foo

  # A different class named Bar declared in the scope of Foo, not global
  class Bar
  end

  Bar   #=> refers to Foo::Bar, that is class Bar declared within Foo
  ::Bar #=> refers to outer global scope class named Bar

end 
```

# javascript - 在 Django 模板中的 JSON 中安全地使用带有 html 的 JSON

> ID：14290517
> 
> 赞同：8
> 
> 时间：2013-01-12T05:21:05.843
> 
> 标签：javascript, python, html, django

如何在 django webapp 中安全地渲染 JSON 数据？

在 django 的服务器上，我生成 JSON 数据，然后在 django 模板中呈现该 JSON 数据。JSON 有时包含 html 片段。大多数时候，这很好，但是如果`</script>`标签在呈现时位于 JSON 数据中，它会破坏周围的 javascript。

例如...

**在服务器上**，在 python 中我会有这个：

```
template_data = {
    'my_json' : '[{"my_snippet": "<b>Happy HTML</b>"}]'
}
# pass the template data to the django template
return render_to_response('my_template.html', template_data, context_instance = c) 
```

然后**在模板中**：

```
<script type="text/javascript">
var the_json = {{my_json|safe}};
</script>
... some html ... 
```

生成的**html**工作正常，如下所示：

```
<script type="text/javascript">
var the_json = [{"my_snippet": "<b>Happy HTML</b>"}];
</script>
... some html ... 
```

但是，当 JSON 在服务器上看起来像这样时，您会遇到问题：

```
template_data = {
    'my_json' : '[{"my_snippet": "Bad HTML</script>"}]'
}
return render_to_response('my_template.html', template_data, context_instance = c) 
```

现在，当它被渲染时，你会得到：

```
<script type="text/javascript">
var the_json = [{"my_snippet": "Bad HTML</script>"}];
</script>
... some html ... 
```

JSON 代码中的结束脚本标记被视为关闭整个脚本块。然后，您的所有 javascript 都会中断。

一种可能的解决方案是检查`</script>`何时将模板数据传递给模板，但我觉得有更好的方法。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-12T05:25:00.017

**安全地将 JSON 作为字符串插入，然后对其调用 JSON.parse**

使用[escapejs](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#escapejs)而不是安全的。它是为输出到 JavaScript 而设计的。

```
var the_json = '{{my_json|escapejs}}'; 
```

要获取 JavaScript 对象，您需要调用`JSON.parse`该字符串。出于安全原因，这总是比将 JSON 编码转储到脚本中并直接评估它更可取。

将 python 对象直接发送到我使用的客户端的一个有用的过滤器是：

```
@register.filter
def to_js(value):
    """
    To use a python variable in JS, we call json.dumps to serialize as JSON server-side and reconstruct using
    JSON.parse. The serialized string must be escaped appropriately before dumping into the client-side code.
    """
    # separators is passed to remove whitespace in output
    return mark_safe('JSON.parse("%s")' % escapejs(json.dumps(value, separators=(',', ':')))) 
```

并像这样使用它：

```
var Settings = {{ js_settings|to_js }}; 
```

# android - Android：像股票浏览器一样的 ActionBar

> ID：14290521
> 
> 赞同：8
> 
> 时间：2013-01-12T05:21:19.003
> 
> 标签：android, view, android-actionbar

我希望我的 ActionBar 像在股票/默认 Android 浏览器中一样运行：它在页面顶部可见，但是当用户向下滚动时，该栏滚动到视图之外，但是如果您向上滚动页面到顶部，栏再次进入查看，但会在一段时间后隐藏，当它这样做时，它不会影响底层视图。

我已经尝试使用计时器实现自动隐藏，但是当 ActionBar 隐藏时，它会向上移动下方的可滚动视图，因此看起来我的整个页面都向上移动，而不是 ActionBar 浮动在视图顶部。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T18:23:46.297

您正在寻找与*快速返回*模式相结合的操作栏覆盖模式。这就是功能，当用户向上滚动一点时，视图再次在顶部可见。请参阅描述此模式的这篇出色[的博客文章。](http://www.androiduipatterns.com/2012/08/an-emerging-ui-pattern-quick-return.html)不要错过来自 Google 的 Roman Nurik 的[示例实现](http://code.google.com/p/romannurik-code/source/browse/misc/scrolltricks/src/com/example/android/scrolltricks/QuickReturnFragment.java)。

`requestWindowFeature(Window.FEATURE_ACTION_BAR_OVERLAY)`通过before`setContentView()`或将 theme 属性设置为`android:windowActionBarOverlay`来启用覆盖模式`true`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T06:50:39.720

您是否尝试过 ActionBar 上的覆盖模式，`getWindow().requestFeature(Window.FEATURE_ACTION_BAR_OVERLAY)`？
然后在主布局中添加一个 marginTop。

# lua - 在 Lua 5.2 中重新创建 setfenv()

> ID：14290527
> 
> 赞同：11
> 
> 时间：2013-01-12T05:22:30.480
> 
> 标签：lua

如何重新创建`setfenv`Lua 5.2 中的功能？我无法准确理解您应该如何使用新的`_ENV`环境变量。

在 Lua 5.1 中，您可以`setfenv`很容易地使用沙箱化任何功能。

```
--# Lua 5.1

print('_G', _G)             -- address of _G

local foo = function()  
    print('env', _G)        -- address of sandbox _G
    bar = 1
end

-- create a simple sandbox
local env = { print = print }
env._G = env

-- set the environment and call the function
setfenv(foo, env)
foo()

-- we should have global in our environment table but not in _G
print(bar, env.bar) 
```

运行此示例会显示输出：

```
_G    table: 0x62d6b0
env   table: 0x635d00
nil   1 
```

我想在 Lua 5.2 中重新创建这个简单的例子。下面是我的尝试，但它不像上面的例子那样工作。

```
--# Lua 5.2

local function setfenv(f, env)
    local _ENV = env or {}       -- create the _ENV upvalue
    return function(...)
        print('upvalue', _ENV)   -- address of _ENV upvalue
        return f(...)
    end
end

local foo = function()
    print('_ENV', _ENV)          -- address of function _ENV
    bar = 1
end

-- create a simple sandbox
local env = { print = print }
env._G = env

-- set the environment and call the function
foo_env = setfenv(foo, env)
foo_env()

-- we should have global in our envoirnment table but not in _G
print(bar, env.bar) 
```

运行此示例显示输出：

```
upvalue    table: 0x637e90
_ENV       table: 0x6305f0
1          nil 
```

我知道关于这个主题的其他几个问题，但它们似乎主要处理加载动态代码（文件或字符串），这些代码使用`load`Lua 5.2 中提供的新功能运行良好。在这里，我特别要求在沙箱中运行任意函数的解决方案。我想在不使用`debug`库的情况下做到这一点。根据 Lua[文档](http://www.lua.org/manual/5.1/manual.html#5.9)，我们不应该依赖它。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-12T05:37:06.253

如果不使用 Lua 5.2 中的调试库，则无法更改函数的环境。一旦创建了一个函数，这就是它所拥有的环境。修改此环境的唯一方法是修改其第一个上值，这需要调试库。

Lua 5.2 中环境的一般想法是，环境应该被认为是不可变的，在诡计之外（即：调试库）。你在一个环境中创建一个函数；一旦在那里创建，这就是它所拥有的环境。永远。

这就是 Lua 5.1 中经常使用环境的方式，但是通过随意的函数调用来修改任何东西的环境是很容易和认可的。如果你的 Lua 解释器被移除`setfenv`（以防止用户破坏沙箱），那么用户代码就不能在内部为他们自己的函数设置环境。*所以外部世界得到了一个沙箱，但内部世界在沙箱内*不能有一个沙箱。

Lua 5.2 机制使得在函数创建后修改环境变得更加困难，但它确实允许您在创建*期间*设置环境。这使您可以在沙箱内进行沙箱。

所以你真正想要的是像这样重新排列你的代码：

```
local foo;

do
  local _ENV = { print = print }

  function foo()
    print('env', _ENV)
    bar = 1
  end
end 
```

`foo`现在被沙盒化了。而现在，打破沙盒的难度要大得多。

可以想象，这在 Lua 开发者中引起了一些争论。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-21T22:09:59.817

它有点贵，但如果它对你很重要......

为什么不使用**string.dump**并将函数重新**加载**到正确的环境中？

```
function setfenv(f, env)
    return load(string.dump(f), nil, nil, env)
end
function foo()
    herp(derp)
end

setfenv(foo, {herp = print, derp = "Hello, world!"})() 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-01-28T02:17:44.123

要`setfenv/getfenv`在 Lua 5.2 中重新创建，您可以执行以下操作：

```
if not setfenv then -- Lua 5.2
  -- based on http://lua-users.org/lists/lua-l/2010-06/msg00314.html
  -- this assumes f is a function
  local function findenv(f)
    local level = 1
    repeat
      local name, value = debug.getupvalue(f, level)
      if name == '_ENV' then return level, value end
      level = level + 1
    until name == nil
    return nil end
  getfenv = function (f) return(select(2, findenv(f)) or _G) end
  setfenv = function (f, t)
    local level = findenv(f)
    if level then debug.setupvalue(f, level, t) end
    return f end
end 
```

RPFeltz 的答案 ( `load(string.dump(f)...)`) 是一个聪明的答案，可能对您有用，但它不处理具有上值的函数（_ENV 除外）。

还有在 Lua 5.2 中实现 Lua 5.1 功能的[compat-env](https://github.com/davidm/lua-compat-env)模块，反之亦然。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-12T14:20:45.287

在 Lua5.2 中，一个可沙盒的函数需要自己指定。您可以使用的一种简单模式是将其`_ENV`作为参数接收

```
function(_ENV)
    ...
end 
```

或者将它包装在定义环境的东西中

```
local mk_func(_ENV)
    return function()
        ...
    end
end

local f = mk_func({print = print}) 
```

但是，这种显式使用`_ENV`对沙箱来说不太有用，因为您不能总是假设其他函数会通过`_ENV`变量进行协作。在这种情况下，这取决于你做什么。如果您只想从其他文件加载代码，那么诸如`load`and`loadfile`通常会接收一个可选的环境参数，您可以将其用于沙盒。此外，如果您尝试加载的代码是字符串格式，您可以使用字符串操作`_ENV`自己添加变量（例如，通过使用 env 参数包装函数）

```
local code = 'return function(_ENV) return ' .. their_code .. 'end' 
```

最后，如果你真的需要动态的函数环境操作，你可以使用调试库来改变函数的内部 upvalue 为`_ENV`. 虽然通常不鼓励使用调试库，但我认为如果所有其他替代方案都不适用，这是可以接受的（我觉得在这种情况下，改变函数的环境已经是很深的巫术魔法，所以使用调试库并不会更糟）

# ruby-on-rails - 人 vs. 用户 vs. 客户 - 正确命名模型

> ID：14290535
> 
> 赞同：2
> 
> 时间：2013-01-12T05:23:47.390
> 
> 标签：ruby-on-rails, ruby

我在决定我正在构建的新应用程序的型号名称时遇到问题。这些都是重要的决定，所以我想确保做对。这将是一个保存医疗记录的数据库，因此可以有关于接受医疗服务的人、他们的家人、医生、护士/行政人员、事故证人等的记录。

我没有为每种类型的人设置一个特定的表格，而是考虑制作“人”和“用户”模型。“用户”模型将包含为医疗机构工作的所有个人，而“人员”表将包含其他所有人——例如患者和事故证人。

我仍然有一个问题，因为如果用户记录事故，一个“用户”可能是证人，另一个可能是受害者。它基本上使我的应用程序看起来不灵活，因为我将“人”（患者等）和“用户”（员工等）分成系统中的两个固定位置。

那么，为什么我不能为每个人制作一张名为“People”的表格呢？然后，一个人可以是用户、员工、医生、患者、受害者——或者他们的任意组合。

我们是否被教导要始终命名为我们工作的人员并登录系统“用户”？这有关系吗？

为每个人设置一个名为“Person”的表格有什么负面影响吗？它似乎使事情变得容易一些。任何人都可以是用户（通过启用有效的登录/状态来登录）或非用户。我不认为这有负面影响。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T05:44:39.613

你和我总是人，但我们在某些情况下扮演特定的角色——那么在一个设置中，所有的人都由一个名为“Person”的模型表示，并由需要这些角色的特定类链接到。例如：

```
class Person < ActiveRecord::Base
  ...
end

class HospitalEmployee
  belongs_to :user, class_name: 'Person' # foreign key is user_id
end

class MedicalRecord < ActiveRecord::Base
  belongs_to :patient, class_name: 'Person' # foreign key is patient_id
  ...
end

class Accident < ActiveRecord::Base
  belongs_to :victim, class_name: 'Person' # foreign key is victim_id
  belongs_to :witness, class_name: 'Person' # foreign key is witness id
end 
```

通过这种方式，构成*一个人*的数据始终是不变的，但构成*他们所扮演角色*的数据却存储在其他模型中。

你会经常在野外发现这种设置——例如，在我工作的一所大学里，所有与个人打交道的记录都指向一个主“PEOPLE”文件——后来成为员工的学生在在这两种情况下的 PEOPLE 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T05:29:30.450

您可以为所有人制作一张桌子。这可以使用单表继承来完成。我建议您将用户用作父母，将其他人用作孩子（员工，患者）。您需要在用户表中创建类型字段。它将存储用户的类型。

有关更多信息，请参阅：[http ://rookieonrails.blogspot.in/2008/01/single-table-inheritance-in-rails.html](http://rookieonrails.blogspot.in/2008/01/single-table-inheritance-in-rails.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T05:42:10.507

我倾向于创建特定模型和通用模型——用户有一个人，一个员工有一个人。Person 模型仅包含姓名、ID、电子邮件等基本信息。特定角色的所有内容都在角色特定模型（例如用户）中，但是因为您总是可以从任何相关模型返回到 Person，例如，您可以查看给定人员拥有的所有角色。

# php - 在 HTML 中嵌入 PHP 片段 - 语法错误

> ID：14290539
> 
> 赞同：1
> 
> 时间：2013-01-12T05:24:19.817
> 
> 标签：php, html

我正在处理一个简单的 PHP/HTML 页面，并且在最终标记上不断出现语法错误。我不知道问题是什么。有谁能够帮我？这是我的代码：

```
<h2 class="date">
        <?php
        $query = mysql_query("SELECT 'id', 'date', 'topic', 'event' FROM 'events'");

        while ($row = mysql_fetch_assoc($query)) {
        ?>
            <h2><?php echo $row['topic'];?></h2> 
            <p><?php echo $row['event'];?></p>
        <?php 
        }
        ?>
    </h2> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T05:28:23.007

就语法而言，我没有看到任何错误。我通常不使用 ' 或至少在 mysql 中使用反引号 不能伤害检查。如果您的 mysql_query 有问题，有时 php 会在该范围内报告错误...您确定所有变量都正确加载了吗？尝试回显您导入的一些数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T05:28:30.983

```
 <?php
        $query = mysql_query("SELECT id, date, topic, event FROM events");

        while ($row = mysql_fetch_assoc($query)) {
        echo "<h2>".$row['topic']."</h2> 
            <p>".$row['event']."</p>";

        }
        ?> 
```

# mysql - #1248 - 每个派生表都必须有自己的别名

> ID：14290540
> 
> 赞同：1
> 
> 时间：2013-01-12T05:24:24.433
> 
> 标签：mysql, select, subquery, alias

我正在运行此查询

```
SELECT *  
FROM (`T_INV_DTL`)  
LEFT JOIN 
 (
  SELECT GROUP_CONCAT(DISTINCT T_INV_INVESTIGATOR.Employee_id) AS Employee_id
  FROM T_INV_INVESTIGATOR
  GROUP BY  `T_INV_INVESTIGATOR`.`inv_dtl_id`
  ) ON  `T_INV_DTL`.`inv_dtl_id` =  `T_INV_INVESTIGATOR`.`inv_dtl_id`
JOIN  `T_INVESTIGATION` ON  `T_INV_DTL`.`inv_id` =  `T_INVESTIGATION`.`inv_id` 
```

它给出了这个错误：

**#1248 - 每个派生表都必须有自己的别名**

怎么了 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T05:25:35.767

你必须给子查询一个别名，

检查这个：

```
SELECT * 
FROM T_INV_DTL T  
LEFT JOIN ( SELECT inv_dtl_id , GROUP_CONCAT( DISTINCT Employee_id ) AS Employee_id 
            FROM T_INV_INVESTIGATOR 
            GROUP BY inv_dtl_id ) A ON T.inv_dtl_id = A.inv_dtl_id 
JOIN T_INVESTIGATION TI ON T.inv_id = TI.inv_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T06:21:24.427

每当您编写子查询时，都必须为 whlole 提供别名

和

如果您有多个查询，那么最好使用别名在选择列表中给出不同的名称以避免冲突

# c# - 将函数插入 MS Access DB

> ID：14290541
> 
> 赞同：0
> 
> 时间：2013-01-12T05:24:25.407
> 
> 标签：c#

我是 C# 新手，我的项目需要帮助。请协助！

我想创建一个插入函数，允许我将数据插入到我的 MS Access DB 中。但是，我不断收到错误消息，指出语句末尾缺少分号 (;) 并且数据不会结束

下面是我的代码，

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Data.OleDb;

namespace Insert
{
    public partial class Form1 : Form
    {

    OleDbConnection vcon= new  OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C://Database//HelloDB.accdb");
    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        vcon.Open();

    }

    private void buttonExit_Click(object sender, EventArgs e)
    {
        this.Close();
    }

    private void buttonSave_Click(object sender, EventArgs e)
    {
        string ab = string.Format("insert into Hello values(id, 'Hname'))", int.Parse(textBox1.Text), textBox2.Text);
        OleDbCommand vcom = new OleDbCommand(ab, vcon);
        vcom.ExecuteNonQuery();
        MessageBox.Show("Data stored successfully");
        vcom.Dispose();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T05:29:56.593

首先，这条线在我身上很突出：

```
string ab = string.Format("insert into Hello values(id, 'Hname'))", int.Parse(textBox1.Text), textBox2.Text); 
```

我相信它应该是：

```
 /*!*/
string ab = string.Format("insert into Hello values({0}, '{1}')", int.Parse(textBox1.Text), textBox2.Text); 
```

其次，您应该为此使用参数化 SQL。[这](https://stackoverflow.com/a/12226939/242520)是我编写的一个示例，用于演示如何将参数化 SQL 用于`UPDATE`语句。该代码主要适用于其他语句类型，例如`SELECT`or `INSERT`。

虽然，实际上，您应该评估您使用 JET/ACE 进行数据访问的情况。JET 带有 Windows，但 ACE 没有。因此，在您的代码中，您依赖于 ACE。考虑是否更好地依赖 SQL Server LocalDB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T05:56:47.480

将您的查询替换为以下内容：

string ab = string.Format("插入 Hello 值({0}, '{1}')", int.Parse( textBox1.Text ), textBox2.Text );

# jquery - 如何创建跨浏览器兼容的完整背景图像/

> ID：14290543
> 
> 赞同：0
> 
> 时间：2013-01-12T05:25:26.633
> 
> 标签：jquery, background, css

我花了几个小时上网浏览一些网络开发书籍来寻找答案。我有一个 size 的图像`1920x1289`。此图像将用作背景。我希望图像被固定，保持居中，填充可见的浏览器区域并且不会导致任何滚动条。我遇到过使用纯 css 的解决方案，例如`background-size:cover;`和 b `ackground-size:100% auto;`。我熟悉 CSS 但不熟悉 jquery。我遇到了以下脚本：

[http://louisremi.github.com/jquery.backgroundSize.js/demo/](http://louisremi.github.com/jquery.backgroundSize.js/demo/)

我的问题是哪个选项对我的目的来说是“最好的”。如果我选择 jquery 会导致任何性能问题。我将把这种方法用于响应式网站。我特别想使用 background 属性而不是 img 属性来实现语义和干净的编码。我将不胜感激任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T11:22:42.333

```
<style type="text/css">
    body {
        height: 100%;
        background: url('images/someimage.jpg') no-repeat center center fixed;
        -webkit-background-size: cover;
        -moz-background-size: cover;
        -o-background-size: cover;
        background-size: cover;
    }
</style> 
```

这将在所有浏览器中正确调整大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T05:52:22.433

显然 css 是比 jquery 更好的选择，因为它们更快。如果您不担心旧版浏览器，请使用 css3。但是如果你想为所有浏览器使用 jquery，但不要添加额外的插件来实现它。相反，您可以通过不将图像设置为背景并使用 img 标签本身来尝试一些小技巧。

这里的代码

HTML

```
 <img src="your img source" id="backgroundImg"/> 
```

css

```
#backgroundImg{
width:100%;
height:100%;
z-index:-100; //so it will not overlay on other elements
position:absolute;
top:0px;
left:0px;
} 
```

查询

```
var backgroundResizeFun=function(){
$('#backgroundImg').css({
width:$(window).width()+'px',
height:$(window).height()+'px'
});
}
$(document).ready(function(){
backgroundResizeFun();
$(window).resize(function(){
backgroundResizeFun();
});
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T05:32:50.610

如果你不害怕对 IE7,8 说“再见”，你可以简单地使用
**CSS3`background-size`**（和一些背景位置中心技巧）：

## [jsBin 演示](http://jsbin.com/uyamof/21/)

```
<div id="bg"></div> 
```

```
#bg{
  position:absolute;
  overflow:hidden;
  width:100%;
  height:100%;
  background: url(bg.jpg) 50% / cover;
} 
```

# c - 使用 execve 运行存在于 PATH 环境中的可执行文件

> ID：14290556
> 
> 赞同：3
> 
> 时间：2013-01-12T05:27:20.313
> 
> 标签：c, posix

我正在用 C 编写一个简单的 shell。要执行命令，shell 基本上会创建一个子进程，然后*执行*相同的命令来运行命令。

我正在使用函数 execve 如下：

```
execve(argList[0],argList,envList); 
```

这里 argList 和 envList 是具有（比如说）以下值的 char*(string) 数组：

```
argList={"ls",NULL}
envList={"/bin",NULL} 
```

我认为由于*ls*作为 /bin 目录中的可执行文件存在，因此所需的 exec 应该具有与 ls 相同的效果（当然在 LINUX 系统上）。

但是，execve 命令无法对环境中目录中存在的可执行文件执行。

这同样适用于在当前工作目录中运行可执行文件。

我哪里错了？

* * *

***结论***：我错误地认为环境完全是另外一回事。[道歉 :)] 环境数组负责为**子进程***设置*环境。 因此，正如 Jim 所指出的，正确的过程是以以下格式设置环境变量：

 **```
envList = { "HOME=/root", PATH="/bin:/sbin", NULL } 
```

[在这里](http://www.cs.utah.edu/dept/old/texinfo/glibc-manual-0.02/library_toc.html#SEC406)也有解释。

此外，为了使用 execve（而不是 execvp）实现上述结果，正如 Nemo 解释的那样，我们总是可以重复调用 PATH 中的目录。如果文件不存在，execve 将失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T05:30:11.323

`execve`不搜索`PATH`。您需要使用`execlp`或类似的。有关详细信息，请参阅[POSIX 参考](http://pubs.opengroup.org/onlinepubs/9699919799/functions/exec.html)。

在 Linux 上，您可能需要`execvpe`，但这是非标准的。

（此外，这些函数都不是标准 C 的一部分。您应该在问题中添加特定于平台的标签，例如“posix”或“linux”。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T06:07:05.580

```
envList={"/bin",NULL} 
```

这是不正确的。envList 为`exec`ed 程序提供环境字符串；它不是一个搜索列表。一个正确的 envList 会更像

```
envList = { "HOME=/root", PATH="/bin:/sbin", NULL } 
```**

# android - 如何通过使用意图将activity1和activity2的字符串值放入activity3

> ID：14290559
> 
> 赞同：0
> 
> 时间：2013-01-12T05:28:05.197
> 
> 标签：android, database, android-intent

我有 3 个活动。我正在尝试从第一个 Activity 到第二个 Activity 获取字符串值。然后我想要第三个活动中的第一个活动和第二个活动的字符串值。

代码在我的活动中应该如何实现这一点？

我的流程是首先执行第一个 Activity，然后在第一个中启动第二个 Activity，最后在第二个中启动第三个 Activity。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T05:31:13.853

请使用 Intent 放置字符串，例如：

```
Intent i=new Intent(Activity1.this,Activity2.class);
i.putExtra("string1",//here add your string); 
```

并且相同的代码粘贴第二个活动以传递两个字符串，例如：

```
String test=getIntent.getStringExtras("string1");

Intent i=new Intent(Activity2.this,Activity3.class);
i.putExtra("string1",test);
i.putExtra("string2",//here add your string); 
```

和为activity3获取两个值一样：

```
 String test=getIntent.getStringExtras("string1");
 String test2=getIntent.getStringExtras("string2"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T05:37:49.470

您可以向意图添加额外内容，对于 Activity1，使用以下代码段：

```
Intent intent = new Intent(this, Activity2.class);
intent.putExtra("SuperSecretValue", /* put your string here */);
startActivity(intent); 
```

在 Activity2 中，使用以下代码段：

```
String superSecretValue = getIntent().getStringExtra("SuperSecretValue");
Intent intent = new Intent(this, Activity3.class);
intent.putExtra("SuperSecretValue", superSecretValue);
intent.putExtra("AnotherSuperSecretValue", /* put your string here */);
startActivity(intent); 
```

在 Activity3 中，使用以下代码段：

```
String superSecretValue = getIntent().getStringExtra("SuperSecretValue");
String anotherSuperSecretValue = getIntent().getStringExtra("AnotherSuperSecretValue"); 
```

查看[文档](http://developer.android.com/reference/android/content/Intent.html)以获取有关您可以使用意图做什么的更多信息。对于这种特定情况，您可以向 Intent 对象添加额外的键、值对（称为“extras”），可以在使用 Intent 对象启动的 Activity 中按名称检索这些键、值对。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T05:37:53.713

您应该创建一个 Intent，然后使用 putExtra 方法。

这是一个例子。

在activity1中设置你的变量传递给activity2

```
String yourString = "Hello World";
Intent intent = new Intent(activity1.this,activity2.class);
intent.putExtra("RandomName",yourString);
startActivity(intent); 
```

现在进行活动 2

```
Intent getIntent = getIntent();
String passedString = getIntent.getString("RandomName"); 
```

重复您的第三项活动。

[你可以在这里](http://developer.android.com/reference/android/content/Intent.html)阅读更多

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T05:35:47.807

必须首先创建活动才能具有值...传递值的意图是这样的

```
Intent i = new Intent("my.activity.TWO");
i.putExtra("extraString1", myString);
startActivity(i); 
```

然后在第二幕。

```
Intent geti = getIntent();
    Bundle b = geti.getExtras();
    grade = b.getString("extraString1"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-12T05:43:06.993

通过使用 Bundle 概念，您可以实现这一目标......

示例：将数据从 MainActivity 发送到 Next page for here Secondage

```
Intent i=new Intent("android.intent.action.Secondpage.class");

                Bundle b=new Bundle();
                b.putString("key1",ed1.getText().toString());
                b.putString("key2",ed2.getText().toString());
                b.putString("key3",ed3.getText().toString());
                int m=Integer.valueOf(ed4.getText().toString());
                b.putInt("key4",m);
                int n=Integer.valueOf(ed5.getText().toString());
                b.putInt("key5",n);
                i.putExtras(b);
                startActivity(i);

            }
        }); 
```

在您的 SecondPage 中，您可以接收此值 getIntent().getExtras() 函数

```
 Bundle b=getIntent().getExtras();

           String s1=b.getString("key1");
           String s2=b.getString("key2");
           String s3=b.getString("key3");
           int s4=b.getInt("key4");
           int s5=b.getInt("key5");

           tv1.setText(s1);
           tv2.setText(s2);
           tv3.setText(s3);
           tv4.setText(""+s4);
           tv5.setText(""+s5); 
```

这肯定会帮助你尝试这个

# objective-c - 如何在不使用 Lion Fullscreen 样式的情况下将 OS X NSWindow 配置为全屏？

> ID：14290567
> 
> 赞同：0
> 
> 时间：2013-01-12T05:28:46.623
> 
> 标签：objective-c, macos, fullscreen

我想在我的 OS X 应用程序上实现两种全屏模式，我已经连接了窗口以使用 Lion 全屏窗口 API，但我也想让用户在一台显示器上获得全屏体验，而不会丢失多屏幕设置中的屏幕。

这仅仅是隐藏标题栏并手动调整活动显示尺寸的情况，还是有一个我可以使用的 api/库（例如，它有一个很好的动画过渡）

谢谢你。

如果这是重复的，请原谅，我只能找到对 Lion 全屏的引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T05:37:36.117

制作应用程序“全屏”还有另一种可能性，即[信息亭模式](http://developer.apple.com/library/mac/#technotes/KioskMode/Introduction/Introduction.html)。它会禁用状态栏、停靠栏，并在必要时禁用退出或最小化窗口的选项。在信息亭模式下展示一个窗口，然后打电话`-setFrame:display:animate:`，瞧！没有全屏 API 的全屏应用程序。

# node.js - 如何处理生产中的mongodb“模式”变化

> ID：14290568
> 
> 赞同：26
> 
> 时间：2013-01-12T05:29:22.303
> 
> 标签：node.js, mongodb, mongoose

我使用 mongodb + node.js + mongoose.js ORM 后端。

假设我有一些没有 _id 字段的嵌套对象数组

```
mongoose.Schema({
  nested: [{
    _id: false, prop: 'string'
  }]
}) 
```

然后我想将 _id 字段添加到所有嵌套的对象中，所以猫鼬模式将是

```
mongoose.Schema({
  nested: [{
    prop: 'string'
  }]
}) 
```

然后我应该运行一些脚本来修改生产数据库，对吧？处理这种变化的最佳方法是什么？哪种工具（或方法）最适合用于实施变革？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-21T10:20:13.953

无模式数据库的显着优势之一是您不必使用新的模式布局更新整个数据库。如果数据库中的某些文档没有特定信息，那么您的代码可以改为执行适当的操作，或者选择现在对该记录执行任何操作。

另一种选择是根据需要*延迟更新*文档 - 仅在再次查看它们时。在这种情况下，您可能会选择使用每个记录/文档的版本标志 - 它最初甚至可能不会出现（因此表示“版本 0”）。即使那是可选的。相反，您的数据库访问代码会查找它需要的数据，如果它不存在，因为它是在代码更新后添加的新信息，那么它将尽其所能填充结果。

对于您的示例，将 an`_id:false`转换为标准`MongoId`字段，当代码被读取（或在更新后写回）并且`_id:false`当前设置时，然后进行更改并仅在绝对需要时才写入。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-21T09:48:38.653

您确实必须编写将遍历集合并向每个文档添加新字段的脚本。但是，具体的操作方式取决于数据库的大小和存储系统的性能。在文档中添加一个字段会改变它的大小，因此在大多数情况下会导致重定位。该操作对 IO 有影响，也受其约束。如果您的集合只有几千个文档，可能多达十万个，那么您可以只在一个循环中迭代它，因为整个集合可能适合内存，并且所有 IO 都将在之后发生。但是，如果收集的范围远远超出可用内存，则该方法会更加复杂。我们通常在 MongoDB 的生产使用中遵循以下步骤：

*   用 timeout=False 打开游标
*   将一大块文档读入内存
*   对这些文档运行更新查询
*   休眠一段时间，避免 IO 子系统过载，影响生产应用
*   重复直到完成
*   关闭光标:)

文档块的大小和休眠期必须通过实验确定。通常，您希望在迁移期间避免 mongostats 中的 QR/QW。对于较慢驱动器上的较大集合（如 Amazon 上的 EBS），这种 IO 安全方法可能需要数小时到数天。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-31T17:46:12.230

扩展@Michael Korbakov 的答案，我用`mongo`shell 脚本实现了他的步骤（参见[MongoDB 参考手册](https://docs.mongodb.com/manual/tutorial/write-scripts-for-the-mongo-shell/)关于`mongo`shell 脚本）。

重要提示：如[MongoDB 参考手册](https://docs.mongodb.com/manual/core/server-side-javascript/#running-js-files-via-a-mongo-shell-instance-on-the-server)中所述，在 shell 上运行脚本`mongo`有助于提高性能，因为它减少了每次批量获取和批量执行的连接延迟。

应该考虑的一个缺点是`mongo`shell 命令总是同步的，但是批量执行已经为我们处理了并行性（对于每个块），所以我们很适合这个用例。

代码：

```
// constants
var sourceDbName = 'sourceDb';
var sourceCollectionName = 'sourceColl';
var destDbName = 'destdb';
var destCollectionName = 'destColl';
var bulkWriteChunckSize = 1000;
// for fetching, I figured 1000 for current bulkWrite, and +1000 ready for next bulkWrite
var batchSize = 2000;    
var sourceDb = db.getSiblingDB(sourceDbName);
var destDb = db.getSiblingDB(destDbName);

var start = new Date();

var cursor = sourceDb[sourceCollectionName].find({}).noCursorTimeout().batchSize(batchSize);

var currChunkSize = 0;
var bulk = destDb[destCollectionName].initializeUnorderedBulkOp();
cursor.forEach(function(doc) {
    currChunkSize++;
    bulk.insert({
        ...doc,
        newProperty: 'hello!',
    }); // can be changed for your need, if you want update instead

    if (currChunkSize === bulkWriteChunckSize) {
        bulk.execute();

        // each bulk.execute took for me 130ms, so i figured to wait the same time as well
        sleep(130);

        currChunkSize = 0;
        bulk = destDb[destCollectionName].initializeUnorderedBulkOp();
    }
});

if (currChunkSize > 0) {
    bulk.execute();
    currChunkSize = 0;
}

var end = new Date();
print(end - start);

cursor.close(); 
```

# javascript - Internet Explorer 和消失的 XMLHttpRequest 节点列表

> ID：14290588
> 
> 赞同：0
> 
> 时间：2013-01-12T05:32:44.043
> 
> 标签：javascript, internet-explorer, xmlhttprequest

我有一个第一次在 IE 中工作的 loadXML() 函数。XML 数据作为节点列表存储到用于首先填充表的全局变量中。稍后根据用户输入对其进行验证。该表已填充，但稍后当用户单击按钮进行验证时，全局变量神秘地为空。

我知道这可能是由于 XMLHttpRequest 的异步特性。如何将节点列表存储到永久全局变量中？

```
function loadXml(ws)
{
    xml = new XMLHttpRequest();
    xml.onreadystatechange = function ()
    {

        if (xml.readyState == 4 && xml.status == 200)
        {
            xmlDoc = xml.responseXML;
            xmlAns = "";
            x = xmlDoc.getElementsByTagName("question");
            populate();
        }
    }
    xml.open("GET", "xml/" + ws + ".xml", true);
    xml.send();
} 
```

# php - $_SESSION 未在远程服务器上设置

> ID：14290590
> 
> 赞同：0
> 
> 时间：2013-01-12T05:33:06.723
> 
> 标签：php, session

我正在用 php 编写登录页面，但在设置 $_SESSION 时遇到问题。我是 php 新手，我不知道我做错了什么。该脚本在本地主机上运行良好，但是当我将其推送到远程服务器时，它不起作用。可能是 php.ini 文件吗？谢谢你的帮助。

```
 <?
         start_session();

            $dbc = mysqli_connect($host,$name,$dpassword,$database) or die('Error can not connect to corp database');
                $q="SELECT * FROM corporate WHERE (email='$theemail' AND password='$md5pass' AND activated = '1')";

                $result= mysqli_query($dbc,$q) or die("Error: ".mysqli_error($dbc));;

                if(@mysqli_num_rows($result) == 1)
                {
                    //get the entire row
                    $getrow = mysqli_fetch_array($result);
                    //also tired 
                    //$_SESSION = mysqli_fetch_array($result, MYSQLI_ASSOC);

                    //set session, but does not get set!
                    $_SESSION['lname'] = $getrow['lname'];
                    $_SESSION['fname'] = $getrow['fname'];

                        //set cookie for an hour
                        setcookie("lname", $getrow['lname'], time()+60*60,"/","http://www.limozoor.com",1);
                        setcookie("fname",$getrow['fname'],time()+60*60,"/","http://www.limozoor.com",1);

                        //if no header is not sent, send it.
                        if(!headers_sent())
                        {
                            header('Location: http://www.limozoor.com/login/homepage.php'); 
                            exit();
                        }//inner

                }//outter
         }
        ?> 
```

php.ini

```
 [Session]
          session.save_handler = files

          session.save_path = /tmp

          session.use_cookies = 1

          session.name = sid

          session.auto_start = 0

          session.cookie_lifetime = 0

          session.cookie_path = /

          session.cookie_domain =

          session.serialize_handler = php

          session.gc_divisor     = 100

          session.gc_maxlifetime = 1440

          session.bug_compat_42 = 1
          session.bug_compat_warn = 1

          session.referer_check =

          session.entropy_length = 0

          session.entropy_file =

          session.cache_limiter = nocache

          session.cache_expire = 180

          session.use_trans_sid = 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T05:39:14.150

尝试更改这些代码段

```
 start_session(); 
```

进入

```
session_start(); 
```

和

```
$_SESSION['lname'] = $getrow['lname'];
$_SESSION['fname'] = $getrow['fname']; 
```

进入

```
if($getrow['lname']!='' && $getrow['fname']!=''){
   $_SESSION['lname'] = $getrow['lname'];
   $_SESSION['fname'] = $getrow['fname'];
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T05:54:36.583

这可能只是一个疏忽，但您的代码中的功能不正确：它不应该是`start_session()`but `session_start()`。

[http://php.net/manual/en/function.session-start.php](http://php.net/manual/en/function.session-start.php)

除此之外，我在您的 php.ini 设置中看不到任何可能导致会话无法工作的内容。你应该把这些行放在你的 php.ini`error_reporting = E_ALL | E_STRICT`和`display_errors = On`. 它将允许您查看尽可能多的错误消息。

最后，您可以检查 apache 错误日志以查看是否可以找到任何有意义的错误消息。默认情况下，在 Linux 上它将位于 /var/log/apache2/error.log 或 /var/log/httpd/error.log

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T05:35:58.083

你不应该使用：

```
session_start(); 
```

不是

```
start_session(); 
```

如果没有正确调用该函数，您的浏览器实际上不会存储任何会话数据。

[session_start() 的参考](http://php.net/manual/en/function.session-start.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T05:36:51.637

这可能是你的会议开始吗？

你有 start_session()，但我认为它应该是 session_start()

# c# - 如何在c#中将列表数组转换为十六进制字符串？

> ID：14290603
> 
> 赞同：0
> 
> 时间：2013-01-12T05:36:26.950
> 
> 标签：c#, list, hex

我有一个名为“list”的列表数组。我需要将此列表转换为十六进制字符串。我尝试了下面的代码，但没有奏效。

```
 var  list = objIPLayer.Udp.Payload.ToList();
    string hex = BitConverter.ToString(list); 
```

我收到了这个错误：

> `'System.BitConverter.ToString(byte[])'`执行以下代码时，匹配的最佳重载方法 有一些无效参数**。
> 
> ```
> string hex = BitConverter.ToString(list); 
> ```

有什么方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T06:54:05.330

BitConverter.ToString [(byte[])](http://msdn.microsoft.com/en-us/library/3a733s97.aspx)`byte []`不期望`IEnumerable<byte>`or `List<byte>`。

尝试关注

```
var  list = objIPLayer.Udp.Payload.ToArray();
string hex = BitConverter.ToString(list); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T06:56:35.177

首先将列表转换为数组：

```
string hex = BitConverter.ToString(list.ToArray()); 
```

# ios - 我的应用程序启动时如何打开第三个标签栏项？

> ID：14290606
> 
> 赞同：3
> 
> 时间：2013-01-12T05:36:44.337
> 
> 标签：ios, uitabbaritem, appdelegate

我正在开发一个包含五个项目的选项卡栏应用程序，我想在我的应用程序启动时打开与第三个选项卡栏项目关联的第三个视图控制器，而不是默认打开的第一个视图控制器。我该如何处理？

这是我正在使用的代码：

在 myappdelegate.h

```
@property (nonatomic, retain) IBOutlet   FirstViewController *firstView; 
```

在 myappdelegate.m

```
[window addSubView:firstView.view]; 
```

这行不通。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-12T05:40:22.160

您可以使用下面的代码首先显示 UITabBar 的 3 个选项卡...

```
self.window.rootViewController = self.tabBarController;
self.tabBarController.selectedIndex = 2; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T05:40:53.783

在该 viewController 的 viewWillAppear 方法中设置可见选项卡：

```
self.yourTabBarController.selectedViewController = [yourTabBarController.viewControllers objectAtIndex:2]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T05:57:17.123

使用上述方法，但如果您希望它在应用程序启动时发生，您需要使用`-(void) awakeFromNib {`当您按下设备主屏幕上的应用程序图标时调用该函数。在您的 Default.png 显示后调用 viewDidLoad。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2022-03-03T16:52:33.983

The flashlight of an iPhone not only sheds enough light to help us in navigating the lost keys, reading in a camp, but it also allows us to lighting up the route or rocking out at a concert, etc.[flashlight iphone not working](https://technumus.com/iphone-flashlight-not-working/) visit.

# javascript - 制作一个 jquery 名称标注器

> ID：14290610
> 
> 赞同：0
> 
> 时间：2013-01-12T05:37:10.070
> 
> 标签：javascript, jquery

我正在尝试在 jquery + php 中制作名称标记器。我已经完成了 PHP 部分，并且 jquery 代码已完成 99%，但我的问题是传递字符串以在“@”符号之后进行搜索。我目前使用 contentEditable 设置为 true 的 div。从我在控制台日志中看到的 name 变量确实是@+search 字符串，但不会填充列表 div，我尝试手动运行脚本只是为了调试并且它可以工作，包括将 name 变量设置为一个特定的字母填充列表 div。任何提示和建议都对我下面的代码表示赞赏：

```
$("#chat-message").bind("keyup", function (event) {
    //auto name complete
    var search = $(this).text();
    var searchbox = search.split(search.indexOf('@') + 1);
    var checker = search.substr(search.length - 1); //Checks last charcter inserted if its '@'
    var name = search.match(/@(\w+)/ig);
    console.log(name);
    var dataString = 'searchword=' + name + '&search=yes';
    if (name == '' || checker == " ") {
        $("#display-search").hide();
    } else if (checker === "@") {
        $.ajax({
            type: "POST",
            url: "searchy.php",
            data: dataString,
            cache: false,
            success: function (html) {
                $("#display-search").html(html).show();
            }
        });
    }
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T06:17:07.033

尝试将您的`ajax`呼叫更改为：

```
$.ajax({
    "type": "POST",
    "url": "searchy.php",
    "data": {
        "searchword": name,
        "search": "yes"
    },
    "cache": false,
    "error": function (jqXHR, textStatus, errorThrown) {
        // log error to browser console
        console.log(textStatus + ': ' + errorThrown);
    },
    "success": function (data, textStatus, jqXHR) {
        console.log(data);
        $("#display-search").html(data).show();
    }
}); 
```

如果有的话，您在控制台中看到了什么？

**更新**

如果你没有看到任何东西，AJAX 就不会被调用。尝试控制台日志以确保`checker`实际等于`'@'`。

**更新：**

您的逻辑将遇到的基本问题是 AJAX 函数只会在`checker === '@'`. 就像用户输入`checker`的*最后一个*字符一样，`name`当`checker === '@'`.

我建议改为以下逻辑：

```
$(document).ready(function () {
    'use strict';
    var ajaxIsActivelyPosting = false, // flag to prevent a post on every keyup
        searchForTerm = function searchForTerm(e) {
            //auto name complete
            var search = $(this).text(), //get the text
                matches = search.match(/@(\w+)\s?/ig), // get any matches
                name = matches ? matches : ''; // if there are matches, set the name
            if (name && !ajaxIsActivelyPosting) { // if there's a match, name will be truthy
                $.ajax({
                    "type": "POST",
                    "url": "searchy.php",
                    "data": {
                        "searchword": name,
                        "search": "yes"
                    },
                    "cache": false,
                    "beforeSend": function (jqXHR, settings) {
                        ajaxIsActivelyPosting = true; //set the flag
                    },
                    "complete": function (jqXHR, textStatus) {
                        ajaxIsActivelyPosting = false; //clear the flag
                    },
                    "error": function (jqXHR, textStatus, errorThrown) {
                        // log error to browser console, always helpful to have
                        console.log(textStatus + ': ' + errorThrown);
                    },
                    "success": function (data, textStatus, jqXHR) {
                        console.log(data); //see raw result in browser console
                        $("#display-search").html(data).show();
                    }
                });
            } else {
                $('#display-search').hide();
            }
            return false;
        };
    $('#chat-message').bind('keyup', searchForTerm);
}); 
```

# asp.net - 部署 ASP.NET 应用程序数据库

> ID：14290613
> 
> 赞同：0
> 
> 时间：2013-01-12T05:37:36.660
> 
> 标签：asp.net, sql-server

我有两台 SQL Server，一台属于网络主机，一台是我的。

我使用 Visual Studio 创建了一个包含登录详细信息等的数据库。我需要将其传输到 Web 主机的数据库服务器。我想知道该怎么做。

我使用创建了一个脚本`Tasks --> Generate Script`并尝试在服务器上执行该脚本，但它引用了我的 asp.net 应用程序所在的实际文件夹中的数据库，`Users/Sora4222/documents/....aspnet.mdf`.

我该如何改变它，所以它没有引用任何东西，它把它放在任何根文件夹中，问题是我附加的数据库是我放入的它的副本，`c:/program files/`但生成的脚本仍然引用`users/sora4222/documents/...aspnet.mdf`.

我应该提到我几乎没有数据库经验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T06:02:41.007

当您生成脚本时，它使用默认数据库，假设您正在为 mydb 生成脚本，那么当您创建脚本时，它默认生成使用 mydb；将其更改为您的新数据库，例如 USE mynewdb；

# javascript - 在 JSON.stringify(navigator) 期间超出了最大调用堆栈大小

> ID：14290620
> 
> 赞同：11
> 
> 时间：2013-01-12T05:38:22.690
> 
> 标签：javascript, google-chrome

我在 Navigator 对象的序列化过程中收到 RangeError。

可能是什么原因？

```
JSON.stringify(navigator);
RangeError: Maximum call stack size exceeded 
```

浏览器：铬 ![在此处输入图像描述](../Images/1411f38dc99b489c7d5a0abea6377f12.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T08:03:12.040

这是因为，正如错误消息所说，`navigator`对象太大了。

您可以像这样使用[dystroy修改后的JSON函数](https://stackoverflow.com/a/14145840/401137)：

```
var navJSON = JSON.pruned(navigator); 
```

返回的对象非常大，但几乎可以肯定它并不完全正确。如果您想`navigator`使用 JSON 传输有关对象的数据，您*应该*只发送这些属性，而不是整个对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T08:08:46.593

为什么不将您感兴趣的特定值复制到一个新对象，然后将其序列化呢？

也许它找到了导致无限循环的属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T08:15:11.197

也许导航器对象包含自链接。您应该在其他对象中复制导航器并删除它们上的大链接。

# c# - 通过引用从 c# 到 c++/cli 传递参数的语法是什么？

> ID：14290625
> 
> 赞同：2
> 
> 时间：2013-01-12T05:39:39.213
> 
> 标签：c#, c++-cli

> **可能重复：**
> [在 C++/CLI 代码中的参数传递中，^ 符号是否替换了 C# 的“ref”？](https://stackoverflow.com/questions/6616599/does-the-symbol-replace-cs-ref-in-parameter-passing-in-c-cli-code)

我已经google了它并搜索了这个论坛，但似乎没有任何答案。

如果它是从 c# 到 c#，它将类似于`void MyFunction(ref int var)`. 调用时，参数前面也有 ref。如果它是从 c++ 到 c++，那将是`void MyFunction(int &var)`. 谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T06:16:46.333

像这样声明 C++ 方法：

```
void MyFunction(int% var) 
```

如果它是引用类型，请使用两个符号：

```
void MyFunction(String^% var) 
```

它称为[跟踪参考](http://msdn.microsoft.com/en-us/library/8903062a%28VS.80%29.aspx)。

# spotify - Cocoalibspotify，封面艺术未加载其余元数据

> ID：14290629
> 
> 赞同：2
> 
> 时间：2013-01-12T05:40:04.407
> 
> 标签：spotify, cocoalibspotify-2.0

在示例项目 Guess the Intro 中，有一个名为**waitAndFillTrackPool**的方法，它可以从用户的播放列表中获取所有曲目。在此方法中，使用**SPAsyncLoading**进行调用以获取所有曲目的元数据。

```
 [SPAsyncLoading waitUntilLoaded:tracks timeout:kSPAsyncLoadingDefaultTimeout then:^(NSArray *loadedTracks, NSArray *notLoadedTracks) { 

   // All of our tracks have loaded their metadata. Hooray!
   NSLog(@"[%@ %@]: %@ of %@ tracks loaded.", NSStringFromClass([self class]), NSStringFromSelector(_cmd),[NSNumber numberWithInteger:loadedTracks.count], [NSNumber numberWithInteger:loadedTracks.count + notLoadedTracks.count]); 
```

正如评论所说，成功后，应加载所有曲目的元数据。但是，我无法获取**track.album.cover.image**（它返回 null）。所有其他元数据似乎都在那里。

为了测试发生了什么，我在加载元数据后添加了这个：

```
 SPTrack *test = [theTrackPool objectAtIndex:0];
 NSLog(@"track: %@ , is loaded: %s, image loaded: %s",test.name,test.loaded ? "true" : "false", test.album.cover.loaded ? "true" : "false"); 
```

哪些日志：

```
 track: Howlin' For You , is loaded: true, image loaded: false 
```

如果应该加载元数据，专辑封面不应该也可用吗？

澄清一下，如果使用播放管理器和键值观察，我可以获得这首特定曲目的专辑封面。[但是，我确实遇到了与从 Spotify 下载封面艺术 URL 和键值观察](https://stackoverflow.com/questions/14287370/downloading-cover-art-url-from-spotify-and-key-value-observing)类似的第一个值 nil，第二个值正确。也许这是一个类似的错误？如果专辑封面确实需要重新检查，我如何设置观察者从一系列曲目中获取专辑封面？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T14:06:56.700

这是预期的行为（想象一下，如果我们在您加载播放列表时一次下载播放列表中所有曲目的封面 - 这将是惊人的数据量！）。

访问该`image`属性会触发封面被加载，主要针对KVO。您也可以使用`SPAsyncLoading`来加载它们。

# cakephp-2.0 - cakephp 2.1.0 致命错误：找不到类“DOMPDF”

> ID：14290632
> 
> 赞同：0
> 
> 时间：2013-01-12T05:40:48.517
> 
> 标签：cakephp-2.0, dompdf

我跟着[这个](http://www.dereuromark.de/2011/11/21/serving-views-as-files-in-cake2/)很棒的教程

我的`View/Layouts/pdf/default.ctp`

```
App::import('Vendor', 'dompdf/dompdf.php');
$dompdf = new DOMPDF();
$dompdf->load_html(utf8_decode($content_for_layout), Configure::read('App.encoding'));
$dompdf->render();
echo $dompdf->output(); 
```

My`View/Bids/pfd/view.ctp`是用于测试目的的常规视图的副本。

如果我删除 php 扩展：

```
App::import('Vendor', 'dompdf/dompdf'); 
```

我得到错误：

```
An input file is required (i.e. input_file _GET variable). 
```

尝试了几种 require_once 的组合，但没有成功。（甚至尝试使用另一个 dompdf 新鲜下载：（来自[Github](https://github.com/dompdf)，zip 称为 dompdf-master）

```
App::import('Vendor', 'dompdf-master/dompdf.php'); 
```

并得到相同的类未找到错误。

如果我在这个 dompdf-master 中删除 php 扩展

```
App::import('Vendor', 'dompdf-master/dompdf'); 
```

得到错误：

```
PHP-font-lib must either be installed via composer or copied to lib/php-font-lib 
```

我肯定授予了访问权限，并且文件在它们应该在的位置，php 5.3。

根据马克的教程，它应该非常简单。

你能帮我吗？

非常感谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T20:09:14.243

为设置 dompdf 加载的正确文件是 dompdf_config.inc.php。dompdf 当前不遵循[CakePHP 文件和类名约定](http://book.cakephp.org/2.0/en/getting-started/cakephp-conventions.html#file-and-classname-conventions)。由于您是直接加载类而不是使用使用 dompdf 的插件，因此您必须更加明确。查看 CakePHP 书中的[App::import() 文档](http://book.cakephp.org/2.0/en/core-utility-libraries/app.html#including-files-with-app-import)，可能会出现以下情况：

```
App::import($type = 'Vendor', 'DOMPDF', true, array(), 'dompdf_config.inc.php', false); 
```

当然，如果您[遵循此答案中的建议](https://stackoverflow.com/a/8158269/264628)，您应该只使用 require：

```
require_once(APP . 'Vendor' . DS . 'dompdf' . DS . 'dompdf_config.inc.php'); 
```

最后，我建议您挂断`utf8_decode()`电话，只要您使用的是 dompdf 0.6.0。dompdf 0.5.1 不能很好地处理 UTF8，但最新版本可以很好地处理它，只要您遵循[Unicode How-to](https://github.com/dompdf/dompdf/wiki/UnicodeHowTo)中的建议。

因此，您的布局应该看起来更像以下内容：

```
require_once(APP . 'Vendor' . DS . 'dompdf' . DS . 'dompdf_config.inc.php');
$dompdf = new DOMPDF();
$dompdf->load_html($content_for_layout);
$dompdf->render();
echo $dompdf->output(); 
```

# c# - 如何在文本文件中间插入行？

> ID：14290642
> 
> 赞同：2
> 
> 时间：2013-01-12T05:44:12.357
> 
> 标签：c#, file-io

我有一个文本文件，在遇到特定行后我需要在其中添加一些行。

我尝试过创建一个流对象，然后从文件中读取，直到获得搜索文本，然后通过设置其光标位置写入同一个流，但它不起作用。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T06:13:01.987

以下是在文件中间附加一些文本的方法：

```
var sb = new StringBuilder();
using (var sr = new StreamReader("inputFileName"))
{
    string line;
    do
    {
        line = sr.ReadLine();
        sb.AppendLine(line);
    } while (!line.Contains("<Sim Properties>"));

    sb.Append(myText);
    sb.Append(sr.ReadToEnd());
}

using (var sr = new StreamWriter("outputFileName"))
{
    sr.Write(sb.ToString());
} 
```

这将`myText` **在**包含`<Sim Properties>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T05:52:57.757

下面的代码示例演示了使用 WriteAllLines 方法将文本写入文件。在此示例中，如果文件不存在，则会创建一个文件，并向其中添加文本。

```
 using System;
    using System.IO;
    class Test
    {
        public static void Main()
        {
            string path = @"c:\temp\MyTest.txt";

            // This text is added only once to the file. 
            if (!File.Exists(path))
            {
                // Create a file to write to. 
                string[] createText = { "Hello", "And", "Welcome" };
                File.WriteAllLines(path, createText);
            }

            // This text is always added, making the file longer over time 
            // if it is not deleted. 
            string appendText = "This is extra text" + Environment.NewLine;
            File.AppendAllText(path, appendText);

            // Open the file to read from. 
            string[] readText = File.ReadAllLines(path);
            foreach (string s in readText)
            {
                Console.WriteLine(s);
            }
        }
    } 
```

# python - Python INPUT 给出错误的结果

> ID：14290645
> 
> 赞同：2
> 
> 时间：2013-01-12T05:45:18.827
> 
> 标签：python, user-input

我正在尝试使用输入语句输入数字，一切都很好，唯一的问题是当我以“0”开头的数字时。它给出了错误的结果。有人可以解释一下到底发生了什么以及为什么它会给出错误的结果。

这是一个小例子：

```
 >>> a = input("> ")
 > 12345
 >>> a
 12345
 >>> a = input("> ")
 > 012345
 >>> a
 5349
 >>> print a
 5349
 >>> if a == 012345: print "matched"

 matched 
```

我不明白这一点。谢谢你的帮助！（Windows XP、Python 2.7.3）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T05:49:16.220

`0`在 python 2 中，以将其标记为八进制（以 8 为基数）开头的数字。

12345 八月 = 5349 十二月

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T05:49:59.227

在 Python 中，以 开头的数字`0`被识别为以 8 为基数（八进制）。您会注意到以 开头的数字`0`有`8`or`9`将引发异常。

作为旁注，您不应该`input()`在 Python 2 中使用，因为它会评估输入。改为使用`raw_input()`，然后将其转换为`int`. 如果您想摆脱以 8 为底的问题，则将`10`其作为第二个参数传递给`int()`（底数）：

```
a = raw_input('> ')
try:
    a = int(a, 10)
except ValueError:
    #do something
print a 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T05:48:37.340

[`input`](http://docs.python.org/2/library/functions.html#input)评估从流中读取的任何内容 - 因此它被读取一个数字并作为整数返回。

听起来您正在寻找[`raw_input`](http://docs.python.org/2/library/functions.html#raw_input)，它将从流中读取的任何内容作为字符串提供

（所以`input('> ')`与 相同`eval(raw_input('> '))`）

正如[@Tim](https://stackoverflow.com/a/14290664/766952)所说，整数值似乎出乎意料，因为python 将该值解释为八进制。

# python - 程序速度/不必要的重复计算

> ID：14290648
> 
> 赞同：0
> 
> 时间：2013-01-12T05:46:29.283
> 
> 标签：python, performance, cpu-speed

我正在尝试在具有特定差异的数字列表中查找对数。说，用清单

```
1 2 3 4 5 
```

和差异目标'2'，我想打印数字'3'，因为这个序列中有3对差异为'2'。但是，我的代码非常慢 - 它重复计算所有对，所以我最终需要将我的解决方案除以 2 才能得到答案。有没有办法在不重复计算的情况下完成同样的任务？我很欣赏你可能有的任何见解。谢谢！代码打印在下面

```
 import sys

    def main():
        solutions=0
        pairs=[]
        for i in xrange(len(numbers)):
            for j in xrange(len(numbers)):
                if i!=j:
                    pairs.append([numbers[i], numbers[j]])

        for pair in pairs:
            if abs(pair[0]-pair[1])==k:
                solutions+=1
            else:
                continue
        return solutions/2

    if __name__ == '__main__':
        lines=sys.stdin.readlines()
        n,k=map(int, lines[0].strip().split())
        numbers=map(int, lines[1].strip().split())
        print main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T05:56:49.083

对于 中的每个元素`i`，`a`您要检查是否`i-diff`也在 中`a`。对于~O(1) 成员资格测试，我们可以使用一个集合。因此：

```
>>> a = [1,2,3,4,5]
>>> diff = 2
>>> a_set = set(a)
>>> sum(i-diff in a_set for i in a_set)
3 
```

这是O（len（a））。

[请注意，我使用了一个事实`i-diff in a_set`，即 a `bool`，计算结果`1`为`int`。这相当于`sum(1 for i in a_set if i-diff in a_set)`。]

更新：在我看来，我假设这些数字是唯一的。如果不是，那没关系，我们可以只使用 a`collections.Counter`来保留多重性信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T05:50:55.240

如果对数组进行排序，则只需遍历数组即可找到所有对，而不是进行 O(n^2) 搜索。重复计算的原因是您使用`abs`了所以它不仅找到（1,3）而且找到（3,1）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T05:52:24.977

首先对数组进行排序，然后对`num`列表中需要查找的每个数字（）进行排序`num-2`。我想最快的方法是通过[`binary search`](http://en.wikipedia.org/wiki/Binary_search_algorithm).

所以，通过二分搜索，你会得到一个`O(n log(n))`解决方案。

# c# - 如何通过选择列表视图中显示的数据来运行后台编码

> ID：14290650
> 
> 赞同：-1
> 
> 时间：2013-01-12T05:46:34.327
> 
> 标签：c#, asp.net

我正在尝试使用列表视图来动态显示数据库中的数据。我希望在单击该数据时，应该通过获取所选数据的 ID 来运行背景编码，然后它应该导航到另一个页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T06:44:53.320

对我有用的答案

```
<asp:ListView ID="ListView1" runat="server" DataKeyNames="ID" 
        onselectedindexchanging="ListView1_SelectedIndexChanging">
<LayoutTemplate>
    <ul>
        <asp:PlaceHolder ID="itemPlaceholder" runat="server" />    
    </ul>                
</LayoutTemplate>
<ItemTemplate>
    <li>
        <%#Eval("Subject") %>
         <asp:LinkButton ID="lnkSelect" Text="Read More" CommandName="Select"     runat="server" />
    </li>
</ItemTemplate>
<SelectedItemTemplate>
       <asp:LinkButton ID="lnkSelect" Text="Read More" CommandName="Select" runat="server"
           ForeColor="White" />
           <%#Eval("Subject") %>
           </SelectedItemTemplate>
    </asp:ListView> 
```

.CS 文件

```
protected void ListView1_SelectedIndexChanging(object sender, ListViewSelectEventArgs e)
    {
        ListView1.SelectedIndex = e.NewSelectedIndex;
        string pid = ListView1.SelectedDataKey.Value.ToString();
        Session["id"] = pid;
        Response.Redirect("About.aspx");
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T06:05:50.667

在 aspx 中使用 ListView`CommandArgument`属性， `OnItemCommand`在后面的代码中使用 ListView 像这样

`OnItemCommand`简而言之，您可以像这样获得 ID并导航到另一个页面：

```
string employeeID = EmployeesListView.DataKeys[dataItem.DisplayIndex].Value.ToString();
Response.redirect("~/index.aspx?employeeID="+employeeID); 
```

**页面源 (aspx)**

```
 <asp:ListView runat="server" 
    ID="EmployeesListView"
    OnItemCommand="EmployeesListView_OnItemCommand"
    DataSourceID="EmployeesDataSource" 
    DataKeyNames="EmployeeID">
    <LayoutTemplate>
      <table runat="server" id="tblEmployees" 
             cellspacing="0" cellpadding="1" width="440px" border="1">
        <tr id="itemPlaceholder" runat="server"></tr>
      </table>
      <asp:DataPager ID="EmployeesDataPager" runat="server" PageSize="10">
        <Fields>
          <asp:NumericPagerField />
        </Fields>
      </asp:DataPager>
    </LayoutTemplate>
    <ItemTemplate>
      <tr runat="server">
        <td>
          <asp:Label runat="server" ID="NameLabel" 
            Text='<%#Eval("LastName") + ", " + Eval("FirstName") %>' />
        </td>
        <td style="width:80px">
          <asp:LinkButton runat="server" 
            ID="SelectEmployeeButton" 
            Text="Add To List" 
            CommandName="AddToList" 
            CommandArgument='<%#Eval("LastName") + ", " + Eval("FirstName") %>' />
        </td>
      </tr>
    </ItemTemplate>
  </asp:ListView> 
```

**隐藏代码 (.cs)**

```
 protected void EmployeesListView_OnItemCommand(object sender, ListViewCommandEventArgs e)
  {
    if (String.Equals(e.CommandName, "AddToList"))
    {
      // Verify that the employee ID is not already in the list. If not, add the
      // employee to the list.
      ListViewDataItem dataItem = (ListViewDataItem)e.Item;
      string employeeID = 
        EmployeesListView.DataKeys[dataItem.DisplayIndex].Value.ToString();

      if (SelectedEmployeesListBox.Items.FindByValue(employeeID) == null)
      {
        ListItem item = new ListItem(e.CommandArgument.ToString(), employeeID);
        SelectedEmployeesListBox.Items.Add(item);
      }
    }
  } 
```

这是[参考站点](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.itemcommand.aspx)。

# android - 如何在 Android 中创建 DragEvent

> ID：14290655
> 
> 赞同：1
> 
> 时间：2013-01-12T05:47:15.967
> 
> 标签：android, drag-and-drop

我需要模拟`DragEvent`以进行测试。但是我无法访问`DragEvent.obtain()`方法。

请提出一种方法，`simulate DragEvent`以便我可以在 DragListener 的 onDrag() 方法中定义 DragEvent 的操作

对于 Touch MotionEvent，我们可以通过 MotionEvent.obtain() 并传递相关参数来实现，但是在 DragEvent 的情况下无法访问此方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T10:32:49.850

**DragEvent.obtain()**是一个尚未公开的内部 API 函数，如**@hide**注释所示。

[作为一种解决方法，您可以从可打包对象http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/view/DragEvent](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/view/DragEvent.java#488)创建一个 DragEvent 。[爪哇#488](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/view/DragEvent.java#488)

```
DragEvent.CREATOR.createFromParcel(parcel);
Parcel parcel = Parcel.obtain();
parcel.writeInt(action);
parcel.writeFloat(x);
parcel.writeFloat(y);
parcel.writeInt(0); // Result
parcel.writeInt(0); // No Clipdata
parcel.writeInt(0); // No Clip Description
parcel.setDataPosition(0); 
```

如果要添加 Clipdata，请参阅它的 createFromParcel() 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T06:19:00.013

在这里，我为您提供了一些非常好的教程，这些教程将指导您`DragEvent`在 android 中实现。您可以参考它并为您的测试目的实施它。

**已编辑的链接：**
1) [Link1](http://staticallytyped.wordpress.com/2010/12/02/touch-and-drag-in-android/)
2) [Link2](http://www.vogella.com/articles/AndroidDragAndDrop/article.html)
3) [Drag Event 的开发者网站](http://developer.android.com/guide/topics/ui/drag-drop.html)

希望它会帮助你。

谢谢。

# java - 表示决策树归纳的数据结构

> ID：14290656
> 
> 赞同：0
> 
> 时间：2013-01-12T05:47:52.973
> 
> 标签：java, machine-learning, data-mining, decision-tree, entropy

目前，我参与了一些与数据挖掘相关的项目。而且，我必须使用以 GINIsplit 作为分割标准的决策树归纳，将给定的数据集（.csv 格式）分类为不同的类。所有这些我一直在 java 平台上做的，没有使用任何工具，例如 WEKA、ORANGE...等。

我的查询是-什么是表示决策树的最佳**数据结构**，以便分类快速有效？而且，如果属性是名义的、数字的或有序的，是否有任何针对属性的优化技术，我的意思是，具体的技术？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T10:32:40.130

好吧，如果您真的想获得最佳的分类速度，请将您的决策树输出到`.class`...。即为树生成一个代码片段，然后编译它。这样，可以使用 Java Hotspot JRE 的本机速度执行评估。

因为您*可以*在程序逻辑中编码决策树：

```
if (attribute_x < 0.1) {
    switch(attribute_c) {
        case BANANA: {
            ... 
```

主要问题是，您*想*在多大程度上进行这种优化。

# virtualbox - 如何与两个注册到 Asterisk 服务器的 Zoiper Sip 客户端通信

> ID：14290658
> 
> 赞同：0
> 
> 时间：2013-01-12T05:48:06.733
> 
> 标签：virtualbox, sip, asterisk

如何与两个注册到 Asterisk 服务器的 zoiper sip 客户端通信，我有 MS Windows 7，因为我在 virtualBox 中有 ubuntu，我在 ubuntu 中安装了 Asterisk 服务器，我在 Windows 7 中有一个 Zoiper，另一个在 ubuntu，两者都注册了 Asterisk服务器。

但我不知道如何沟通（从一个到另一个呼叫）意味着要在我的 zoiper 拨号框中放置什么内容（我如何代表另一个 zoiper 地址），还请告诉我有关 extensions.conf 的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T10:35:24.027

我建议你安装 trixbox 或 elastic 或阅读这本书

[http://cdn.oreilly.com/books/9780596510480.pdf](http://cdn.oreilly.com/books/9780596510480.pdf)

在大多数情况下，您拨打的号码与您在注册​​时输入的用户名相同，并且具有类似的上下文

```
[internal] 
exten =>_XXX,1,Dial(SIP/${EXTEN},,) 
```

# c++ - 设置精度不能正常工作

> ID：14290662
> 
> 赞同：0
> 
> 时间：2013-01-12T05:49:03.143
> 
> 标签：c++, decimal, precision

```
#include <iostream>
using namespace std;

int main()
{
    cout.precision(50);
    cout<<"Anmol's Square Root Calculator!"<<endl;
    cout<<""<<endl;
    cout << "This program will compute the square root\n";
    cout << "of a number using the Babylonian algorithm!\n";
    cout<<""<<endl;
    cout<<"Only positive numbers work with this algorithm!"<<endl;
    cout<<""<<endl;
    cout<<"All cycle #1 approximate square roots are guessed\n"<<"using 1 as the first        approximate."<<endl;
    cout<<""<<endl;
    cout<<""<<endl;
    cout<<""<<endl;

    char playAgain='y';
    while (playAgain !='n') 
    {
        int count(25), cycle(1);
        double guess, sqrt, num; 
        cout << "Please enter the number you would like to compute the square root of: ";
        cin >> num;
        cout<<""<<endl;

        do {
            if (num <= 0)
            {
                cout<<""<<endl;
                cout<<"Invalid input. Please re-enter a valid number: ";
                cin >> num;
                cout<<""<<endl;
            }
        } while (num <= 0);

        cout<<""<<endl;
        cout<<""<<endl;
        cout<<""<<endl;

        for (guess=1; count!=0; count--)
        { 
            guess =(guess + (num/guess))/2;
            cout<<""<<endl;
            cout<<"Cycle "<<cycle<<" Aproximate: "<<guess<<endl;
            sqrt = guess;

            cycle++;
        }

        cout<<""<<endl;

        cout << "The square root of "<< num << " is " << sqrt<<"!"<<endl;;
        cout <<""<< endl;

        do { 
            cout <<""<<endl;
            cout << "Would you like to calculate again? (y/n): ";
            cin >> playAgain;
            cout <<" "<<endl;
            do { 
                cout <<""<<endl;
                if ((playAgain !='y' && playAgain !='n'))
                {
                    cout << "Invalid input. Only y/n: ";
                    cin >> playAgain;
                    cout <<" "<<endl;
                } 
            } while (playAgain !='y' && playAgain !='n');

        } while (playAgain !='y' && playAgain !='n');

    }

    cout<<"Thank you for using a program made by Anmol Sethi!"<<endl;
    cout<<""<<endl;
    cout<<""<<endl;
    cout<<""<<endl;
    cin.get();
    return 0;
} 
```

在我的数学课上，我们正在学习平方根。根据我的老师的说法，只有使用计算器或表格才能找到平方根，这显然是错误的，因为计算器需要一种计算 sqrt 的方法。经过广泛的研究，我使用巴比伦算法编写了这段代码。但是我面临一个问题在这段代码中，我专门将小数的精度设置为 15。但是它输出的数字是小数点后 12 位。但在这段代码中，它以小数点后 15 位输出。

```
#include <iostream>
using namespace std;

int main()
{
    cout.precision(18);
    cout<<"Anmol's Square Root Calculator!"<<endl;
    cout<<""<<endl;
    cout << "This program will compute the square root\n";
    cout << "of a number using the Babylonian algorithm!\n";
    cout<<""<<endl;
    cout<<"Only positive numbers work with this algorithm!"<<endl;
    cout<<""<<endl;
    cout<<"All cycle #1 approximate square are guessed\n"<<"using 1 as the approximate."<<endl;
    cout<<""<<endl;
    cout<<""<<endl;
    cout<<""<<endl;
    char playAgain='y';
    while (playAgain !='n') 
    {
        int count(25), cycle(1);
        double guess(1), sqrt, x, num; 
        cout << "Please enter the number you would like to know the square root of: ";
        cin >> num;
        cout<<""<<endl;

        do {
            if (num <= 0)
            {
                cout<<""<<endl;
                cout<<"Invalid input. Please re-enter a valid number: ";
                cin >> num;
                cout<<""<<endl;
            }
        } while (num <= 0);

        cout<<""<<endl;
        cout<<""<<endl;
        cout<<""<<endl;

        while (count > 0)
        {
            x = guess =(guess + (num/guess))/2;
            cout<<""<<endl;
            cout<<"Cycle "<<cycle<<" Aproximate: "<<guess<<endl;
            sqrt = guess;

            count-=1;
            cycle+=1;
        }

        cout<<""<<endl;
        cout<<""<<endl;
        cout<<""<<endl;
        cout << "The sqaure root of "<< num << " is " << sqrt<<"!"<<endl;;
        cout <<""<< endl;

        do { 
            cout <<""<<endl;
            cout << "Would you like to calculate again? (y/n): ";
            cin >> playAgain;
            cout <<" "<<endl;

            do { 
                cout <<""<<endl;
                if ((playAgain !='y' && playAgain !='n'))
                {
                    cout << "Invalid input. Only y/n: ";
                    cin >> playAgain;
                    cout <<" "<<endl;
                } 
            } while (playAgain !='y' && playAgain !='n');

        } while (playAgain !='y' && playAgain !='n');

    }

    cout<<"Thank you for using a program made by Anmol Sethi!"<<endl;
    cout<<""<<endl;
    cout<<""<<endl;
    cout<<""<<endl;
    cout<<""<<endl;
    cin.get();
    return 0;

} 
```

我很困惑为什么会这样。我试过 cout << fixed << showpoint; 但是当 num 无缘无故输出 15 个零时，它看起来很不愉快。谁能告诉我为什么会发生这种情况以及如何解决它？在书中，我读到使用 for 循环进行算法更有效，所以我想使用 for 而不是 while 循环。我还有第二个问题。为什么我不能超过小数点后 15 位？如果我将精度设置为 30/40，即使在我的计算机计算器中它达到 30/40，它对我的​​输出也没有任何影响。我应该使用另一种整数类型而不是双精度类型吗？

抱歉，如果其中任何一个看起来像一大堵文字 xD。

我急于输入这个，因为我的 atm 是凌晨 12:05。

先谢谢了

ps 我现在会在这个论坛上发很多帖子。大约一年前我经常使用它，但我退出了一段时间的 c++ 编程，因为当我更小的 xD 时我无法进一步理解它。所以我现在正在读一本书，我希望能一直通过控制台应用程序并进入 Windows。如果重要的话，我正在使用 Visual Studio Ultimate 2012。xD

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T07:20:55.083

首先，欢迎来到 StackOverflow！我敢肯定，当您学习编程时，您会发现它是一种宝贵的资源。也就是说，为了充分利用该网站，遵守[该网站的指南](https://stackoverflow.com/faq)非常重要。一般来说，请记住，SO 不是一个论坛，而是一个问答网站，你会做得很好。

* * *

# 一般问题

您发布的代码存在一些问题：

## A. 空白

使用[空格](http://en.wikipedia.org/wiki/Whitespace_%28computer_science%29)非常有助于使您的代码对其他程序员和您自己都 [清晰易懂。](http://en.wikipedia.org/wiki/Programming_style)[用 Tab 表示范围](http://en.wikipedia.org/wiki/Indent_style)（写作

```
bool condition = ...
if (condition) {
    action();
} 
```

而不是

```
bool condition = ...
if (condition) {
action()
} 
```

这并不表示操作范围）显着提高了可读性，尤其是当您发布的代码中存在多个[嵌套](http://en.wikipedia.org/wiki/Nesting_%28computing%29#In_programming) [范围](http://en.wikipedia.org/wiki/Scope_%28computer_science%29)时。 [间距](http://en.wikipedia.org/wiki/Programming_style#Spaces)也很重要。

## B. 使用`cout`

`1.` 与其写作，不如`cout << "" << endl`简单地写作`cout << endl`。

`2.`[和](https://stackoverflow.com/questions/213907/c-stdendl-vs-n)之间 存在[差异`endl``"\n"`](https://stackoverflow.com/questions/213907/c-stdendl-vs-n)，从您的代码中可以看出您可能知道它们。虽然使用两者的性能特点并不完全相同，但考虑到现阶段肯定会[过早优化](http://c2.com/cgi/wiki?PrematureOptimization)。坚持`endl`这种日志记录更具可读性。而不是

```
cout << "All cycle #1 approximate square are guessed\n" << "using 1 as the approximate." << endl; 
```

最好写

```
cout << "All cycle #1 approximate square are guessed" << endl << "using 1 as the approximate." << endl; 
```

在这种情况下。

`3.` 如果您在一行代码中[插入](http://www.cplusplus.com/reference/ostream/ostream/operator%3C%3C/)的int超过了合适的范围（此代码，`cout`

```
cout << "This line of code is longer than feels comfortable." << endl << "It would be much more pleasant to break this into several lines so that I don't need to scroll to the right to view the whole thing." << endl; 
```

例如，对于一行来说太长了），而不是像您的代码中那样，

```
cout << "Anmol's Square Root Calculator!" << endl;
cout << endl;
cout << "This program will compute the square root\n";
cout << "of a number using the Babylonian algorithm!\n";
cout << endl;
cout << "Only positive numbers work with this algorithm!" << endl;
cout << endl;
cout << "All cycle #1 approximate square are guessed\n" << "using 1 as the approximate." << endl;
cout << endl;
cout << endl;
cout << endl; 
```

`cout`多次使用插入运算符，你可以写

```
cout << "Anmol's Square Root Calculator!" << endl
     << endl
     << "This program will compute the square root" << endl
     << "of a number using the Babylonian algorithm!" << endl
     << endl
     << "Only positive numbers work with this algorithm!" << endl
     << endl
     << "All cycle #1 approximate square are guessed"  << endl
     << "using 1 as the approximate." << endl
     << endl
     << endl
     << endl; 
```

## C. 模块化

你所有的代码都在`main()`. 即使有这么短的程序，这仍然会妨碍可读性。更重要的是，这意味着您不能在其他地方重用您在此程序中创建的功能。

一个好的方法是将您的程序分解成单独的组件。在这个程序中，您有以下设置：

```
show a greeting
do {
    get number from user
    compute the squareroot of that number while logging
    show the user the squareroot
    ask the user if they want to do another computation
} while the user wants the program to keep running
show a farewell 
```

此时，您可以为每个步骤编写函数。我在这里“编写”的函数摘自您的代码，稍作修改。

**打印到屏幕**

向用户显示问候和告别的功能是最简单的，因为它们（几乎）只需要使用`cout`：

```
void showGreeting()
{
    cout << "Anmol's Square Root Calculator!" << endl
         << endl
         << "This program will compute the square root" << endl
         << "of a number using the Babylonian algorithm!" << endl
         << endl
         << "Only positive numbers work with this algorithm!" << endl
         << endl
         << "All cycle #1 approximate square are guessed"  << endl
         << "using 1 as the approximate." << endl
         << endl
         << endl
         << endl;
}

void showFarewell()
{
    cout << "Thank you for using a program made by Anmol Sethi!" << endl
         << endl
         << endl
         << endl;
    cin.get();
} 
```

**获取用户输入**

接下来我们需要一个函数来从用户那里获取一个数字

```
double getInputNumber()
{
    double num = 0.0f;

    cout << "Please enter the number you would like to compute the square root of: ";
    cin >> num;
    cout << endl;

    do {
        if (num <= 0)
        {
            cout << endl
                 << "Invalid input. Please re-enter a valid number: ";
            cin >> num;
            cout << endl;
        }
    } while (num <= 0);

    cout << endl
         << endl
         << endl;

    return num;
} 
```

此外，我们需要确定用户是否希望程序再次运行。从程序的角度（的角度`main`）来看，这在很大程度上是一个布尔问题：我们应该调用某个函数，它应该返回`true`or `false`。但是，在函数中，我们正在与用户进行交互，因此使用`'y'`and`'n'`是理想的（至少对于说英语的用户而言）；

```
bool getRunAgain()
{
    bool choice = false;

    char playAgain = 'n';
    do { 
        cout << endl
             << "Would you like to calculate again? (y/n): ";
        cin >> playAgain;
        cout << endl;
        do { 
            cout << endl;
            if ((playAgain !='y' && playAgain !='n'))
            {
                cout << "Invalid input. Only y/n: ";
                cin >> playAgain;
                cout << endl;
            } 
        } while (playAgain !='y' && playAgain !='n');
    } while (playAgain !='y' && playAgain !='n');

    if (playAgain == 'y') {
        choice = true;
    } else /*if (playAgain == 'n')*/ {//At this, playAgain is either 'y' or 'n'.  So if it's not 'y', it's 'n'.
        choice = false;
    }
    return choice;
} 
```

由于将此代码重写为函数，因此更容易看到这里正在完成的工作超出了必要的范围：考虑外部`do...while`循环。它的重复条件是`playAgain !='y' && playAgain !='n'`。乍一看，这似乎是有道理的：我们需要确保用户输入了“是”或“否”。`do...while`但请注意，有一个条件完全相同的内部循环。`playAgain`这意味着除非等于`'y'`or ，否则内部循环不会退出`'n'`。因此，当我们离开内部循环时，我们可以确定它`playAgain`是`'y'`or `'n'`。所以我们不需要再次检查它。这允许我们像这样重写函数：

```
bool getRunAgain()
{
    bool choice = false;

    char playAgain = 'n';
    cout << endl
         << "Would you like to calculate again? (y/n): ";
    cin >> playAgain;
    cout << endl;
    do { 
        cout << endl;
        if ((playAgain !='y' && playAgain !='n'))
        {
            cout << "Invalid input. Only y/n: ";
            cin >> playAgain;
            cout << endl;
        } 
    } while (playAgain !='y' && playAgain !='n');

    if (playAgain == 'y') {
        choice = true;
    } else /*if (playAgain == 'n')*/ {
        choice = false;
    }
    return choice;
} 
```

但是我们在剩下的循环中有类似的情况：

```
do { 
    cout << endl;
    if ((playAgain !='y' && playAgain !='n'))
    {
        cout << "Invalid input. Only y/n: ";
        cin >> playAgain;
        cout << endl;
    } 
} while (playAgain !='y' && playAgain !='n'); 
```

除了`cout << endl`which 不太重要之外，看起来我们根本不想进入循环，除非`(playAgain !='y' && playAgain !='n')`。这需要`while`循环而不是`do...while`循环：

```
while (playAgain !='y' && playAgain !='n')
{
    cout << "Invalid input. Only y/n: ";
    cin >> playAgain;
    cout << endl;
} 
```

把它放到我们的函数中，我们现在有

```
bool getRunAgain()
{
    bool choice = false;

    char playAgain = 'n';
    cout << endl
         << "Would you like to calculate again? (y/n): ";
    cin >> playAgain;
    cout << endl;

    while (playAgain !='y' && playAgain !='n')
    {
        cout << "Invalid input. Only y/n: ";
        cin >> playAgain;
        cout << endl;
    }

    if (playAgain == 'y') {
        choice = true;
    } else /*if (playAgain == 'n')*/ {
        choice = false;
    }
    return choice;
} 
```

**计算平方根**

最后，我们需要一个函数来使用巴比伦算法计算平方根。我们只需要获取您的代码

```
int count(25), cycle(1);
double guess, sqrt, num; 
cout << "Please enter the number you would like to compute the square root of: ";
cin >> num;
cout << endl;

for (guess=1; count!=0; count--)
{ 
    guess =(guess + (num/guess))/2;
    cout<<""<<endl;
    cout<<"Cycle "<<cycle<<" Aproximate: "<<guess<<endl;
    sqrt = guess;

    cycle++;
} 
```

并将其放入一个接受 double 并返回一个的函数中：

```
double computeSquareRootBabylonian(double num)
{
    int count(25), cycle(1);
    double guess, sqrt; 

    for (guess = 1; count != 0; count--)
    { 
        guess = (guess + (num/guess))/2;
        cout << endl
             << "Cycle " << cycle << " Aproximate: " << guess << endl;
        sqrt = guess;

        cycle++;
    }
    return sqrt;
} 
```

我们可以在这里停下来，但是有一些更改可以改进该功能。

`1.` 初始近似值（您正在使用的初始猜测，`1`）实际上并不是该函数的一部分。调用此函数的代码必须指定该起点：

```
double computeSquareRootBabylonian
(double num, 
 double initialApproximation)
{
    double approximation, sqrt;
    unsigned int count(25), cycle(1);

    for (approximation = initialApproximation; count != 0; count--)
    {
        approximation =(approximation + (num/approximation))/2;
        cout << endl
             << "Cycle " << cycle << " Aproximate: " << approximation << endl;
        sqrt = approximation;

        cycle++;
    }
    return sqrt;
} 
```

`2.` 迭代次数（或循环次数，正如您所说的那样）也不是函数的一部分。调用此函数的代码必须指定该数字：

```
double computeSquareRootBabylonian
(double num, 
 double initialApproximation, 
 unsigned int iterations)
{
    double approximation, sqrt;
    unsigned int iterationsRemaining = iterations;
    unsigned int iteration = 1;

    for (approximation = initialApproximation; iterationsRemaining != 0; iterationsRemaining--)
    {
        approximation =(approximation + (num/approximation))/2;
        cout << endl
             << "Cycle " << iteration << " Aproximate: " << approximation << endl;
        sqrt = approximation;

        iteration++;
    }
    return sqrt;
} 
```

`3.` 这个`for`循环很奇怪。这很奇怪，因为您在初始化时初始化了变量`guess`（我已将其重命名`approximation`），尽管它不是 [“循环变量”](http://en.wikipedia.org/wiki/Loop_counter)。在您的第二段代码中，您使用了

```
while (count > 0)
{
    guess =(guess + (num/guess))/2;
    cout << endl;
    cout << "Cycle " << cycle << " Aproximate: " << guess << endl;
    sqrt = guess;

    count-=1;
    cycle+=1;
} 
```

反而。这段代码的意图要清楚得多，但是使用[标准方式](http://en.wikipedia.org/wiki/For_loop#C)`for`的循环（在初始化中初始化循环条件所依赖的相同变量，并且在每个循环结束时更改：），其意图会更清楚。在这里迭代的变量是（我称之为），只要它大于 ，它就会从用户指定的迭代次数（参数）中减少。这种情况需要以下 for 循环：`for (int i = 0; i < 10; i++)``count``iterationsRemaining``iterations``1``0`

```
for (unsigned int iterationsRemaining = iterations; 
     iterationsRemaining > 0; 
     iterationsRemaining--) 
{
    //...
} 
```

将其代入我们的函数时，我们需要确保仍然初始化`approximation`为`initialApproximation`：

```
double computeSquareRootBabylonian
(double num, 
 double initialApproximation,
 unsigned int iterations)
{
    double approximation = initialApproximation;
    unsigned int iteration = 1;
    double sqrt;

    for (unsigned int iterationsRemaining = iterations; 
         iterationsRemaining > 0; 
         iterationsRemaining--) 
    {
        approximation =(approximation + (num/approximation))/2;
        cout << endl
             << "Cycle " << iteration << " Aproximate: " << approximation << endl;
        sqrt = approximation;

        iteration++;
    }
    return sqrt;
} 
```

**旁白**：更多过早的优化

你写了

> 在书中，我读到使用 for 循环进行算法更有效，所以我想使用 for 而不是 while 循环。

这不是使用`for`循环的好理由。您不需要（在合理范围内）对代码进行更改以使其更快，除非您确定它运行得太慢。编写在阅读时有意义的代码更为重要。

`4.`变量`sqrt`有什么作用？它重复地`approximation`赋值给它并从函数中返回，但它返回时的值与 的值相同`approximation`。出于这个原因删除它相当于过早的优化。但是，调用该变量`sqrt`表明它是真正的平方根，而不是近似值。出于这个原因，它应该被删除，留给我们

```
double computeSquareRootBabylonian
(double num, 
 double initialApproximation,
 unsigned int iterations)
{
    double approximation = initialApproximation;
    unsigned int iteration = 1;

    for (unsigned int iterationsRemaining = iterations; 
         iterationsRemaining > 0; 
         iterationsRemaining--) 
    {
        approximation =(approximation + (num/approximation))/2;
        cout << endl
             << "Cycle " << iteration << " Aproximate: " << approximation << endl;

        iteration++;
    }
    return approximation;
} 
```

`5.` 记录每次迭代的逐次近似值并不是您总是希望平方根函数做的事情。我们应该添加一个参数，允许调用代码指定是否记录近似值：

```
double computeSquareRootBabylonian
(double num, 
 double initialApproximation,
 unsigned int iterations,
 bool log)
{
    double approximation = initialApproximation;
    unsigned int iteration = 1;

    for (unsigned int iterationsRemaining = iterations; 
         iterationsRemaining > 0; 
         iterationsRemaining--) 
    {
        approximation =(approximation + (num/approximation))/2;
        if (log) 
        {
            cout << endl << "Cycle " << iteration << " Aproximate: " << approximation << endl;
        }
        iteration++;
    }
    return approximation;
} 
```

**编写主函数**

我们现在已经准备好程序的所有组件。我们只需要改变我们的计划

```
show a greeting
do {
    get number from user
    compute the squareroot of that number while logging
    show the user the squareroot
    ask the user if they want to do another computation
} while the user wants the program to keep running
show a farewell 
```

成一个完整的程序：

```
int main(int argc, char *argv[]) 
{
    //Do this stuff.
} 
```

首先，我们知道如何开始和结束程序。我们想使用我们的函数`showGreeting()`和来表示问候和告别`showFarewell()`：

```
int main(int argc, char *argv[]) 
{
    showGreeting();
    //do {
        //get number from user
        //compute the squareroot of that number while logging
        //show the user the squareroot
        //ask the user if they want to do another computation
    //} while the user wants the program to keep running
    showFarewell();
} 
```

我们知道我们想要获取用户输入并至少计算一次平方根，并且我们知道我们可以得到`bool`表示用户是否想要使用我们的函数计算另一个平方根的a `getRunAgain()`。我们应该`do`用户输入和计算`while` `getRunAgain()`！

```
int main(int argc, char *argv[]) 
{
    showGreeting();
    do {
        //get number from user
        //compute the squareroot of that number while logging
        //show the user the squareroot
    } while(getRunAgain());
    showFarewell();
} 
```

我们有一个函数`getInputNumber()`，它返回一个`double`代表用户想要计算平方根的数字。我们需要使用它`double`两次，一次作为平方根函数的参数`computeSquareRootBabylonian()`，一次将输入及其平方根输出给用户。因此，我们需要一个局部变量：

```
int main(int argc, char *argv[]) 
{
    showGreeting();
    do {
        double number = getInputNumber();
        //compute the squareroot of that number while logging
        //show the user the squareroot
    } while(getRunAgain());
    showFarewell();
} 
```

现在我们的平方根函数`computeSquareRootBabylonian()`有四个参数：

*   计算平方根的数量
*   初始近似
*   迭代次数
*   是否记录每个逐次逼近

我们将`number`作为第一个参数传递。现在，我们可以对剩余的参数进行[硬编码](http://en.wikipedia.org/wiki/Hard_coding)`1`，用于初始近似值、`25`迭代次数以及`true`是否记录。

由于我们只需要使用`computeSquareRootBabylonian()`一次的结果（当注销结果时），我们*可以*不使用局部变量而逃脱。不过，为了清楚起见，让我们继续使用一个：

```
int main(int argc, char *argv[]) 
{
    showGreeting();
    do {
        double number = getInputNumber();
        double squareRoot = computeSquareRootBabylonian(number, 1.0f, 25, true);
        //show the user the squareroot
    } while(getRunAgain());
    showFarewell();
} 
```

我们只需要将结果显示给用户：

```
int main(int argc, char *argv[]) 
{
    showGreeting();
    do {
        double number = getInputNumber();
        double squareRoot = computeSquareRootBabylonian(number, 1.0f, 25, true);
        cout << endl
             << "The square root of " << num << " is " << sqrt << "!" << endl
             << endl;
    } while(getRunAgain());
    showFarewell();
} 
```

该程序遗漏了一件事：配置`cout`.

```
int main(int argc, char *argv[]) 
{
    cout.precision(50);
    showGreeting();
    do {
        double number = getInputNumber();
        double squareRoot = computeSquareRootBabylonian(number, 1.0f, 25, true);
        cout << endl
             << "The square root of " << num << " is " << sqrt << "!" << endl
             << endl;
    } while(getRunAgain());
    showFarewell();
} 
```

* * *

# 重述问题

你问了几个问题`cout`：

> 在这段代码[第一个`main`函数]中，我专门将小数的精度设置为 15。但是它输出的数字是小数点后 12 位。但在这段代码[第二个`main`函数]中，它以小数点后 15 位输出。[...] 我很困惑为什么会这样。我试过 cout << fixed << showpoint; 但是当 num 无缘无故输出 15 个零时，它看起来很不愉快。谁能告诉我为什么会发生这种情况以及如何解决它？
> 
> 为什么我不能超过小数点后 15 位？如果我将精度设置为 30/40，即使在我的计算机计算器中它达到 30/40，它对我的​​输出也没有任何影响。我应该使用另一种整数类型而不是双精度类型吗？

我稍后会解决这些问题。首先，我将描述我自己会如何询问他们，以便在 StackOverflow 上获得更好更快的响应。

要点是发布一个[简短的、独立的、正确的（可编译的）示例](http://sscce.org/)。那么这里的问题到底是什么？它与使用[插入](http://www.cplusplus.com/reference/ostream/ostream/operator%3C%3C/)(using [`operator <<`](http://www.cplusplus.com/reference/ostream/ostream/operator%3C%3C/)) into [`std::cout`](http://www.cplusplus.com/reference/iostream/cout/)(into [`std::ostream`](http://www.cplusplus.com/reference/ostream/ostream/)in general) 有关。它与`double`使用[`std::ostream::precision`](http://www.cplusplus.com/reference/ios/ios_base/precision/). 在将问题减少到这一点之后，我将开始查看相关文档，如果没有提供足够的解释，则使用这些关键字在 StackOverflow 上进行搜索。如果我找不到问题的解决方案，我会生成一个[示例](http://sscce.org/)来说明我遇到的困难。

**提出第一个问题**

第**一个问题**是，当我们将 cout 的精度设置为 15 时，我们只能得到 12 位小数。让我们编写一个程序，将 a 初始化`double`为一个值，设置`cout`to的精度`15`并将我们的`double`插入`cout`：

```
#include <iostream>
using namespace std;

int main(int argc, char *argv[]) 
{
    double value = 1.1111111111111111111111111f;
    cout.precision(15);
    cout << value << endl;
    return 0;
} 
```

这个程序打印出来

```
1.11111111111111 
```

`1`这个数字在小数点后只有 14位。虽然这不是我们所希望的（小数点后有 14 位而不是 12 位），但看起来我们走在了正确的轨道上。看起来某种舍入行为正在发生。或许我们应该在小数点后的第 13 位和第 14 位加零：

```
#include <iostream>
using namespace std;

int main(int argc, char *argv[]) 
{
    double value = 1.1111111111110011111111111f;
    cout.precision(15);
    cout << value << endl;
    return 0;
} 
```

这个程序的输出

```
1.111111111111 
```

正如我们所希望的那样，只有 12 位数字。所以我们现在有一个简短的、独立的、正确的（可编译的）示例来提出我们的问题。

**陈述第一个问题**

> 我`std::cout`用来输出一个`double`. 我想显示小数点后的前 15 位，或者至少与非零一样多。但是在这段代码中，例如

```
int main(int argc, char *argv[]) 
{
    double value = 1.1111111111110011111111111f;
    cout.precision(15);
    cout << value << endl;
    return 0;
} 
```

> 输出`1.111111111111`不是`1.111111111111001`我预期的那样。我能够通过使用来解决这个问题`std::fixed`

```
int main(int argc, char *argv[]) 
{
    double value = 1.1111111111110011111111111f;
    cout.precision(15);
    cout << std::fixed << value << endl;
    return 0;
} 
```

> 它确实`1.111111111111001`按预期输出。不幸的是，即使所有这些数字都为零，使用`std::fixed`结果*总是在小数点后打印 15 位数字。*例如来自的输出

```
int main(int argc, char *argv[]) 
{
    double value = 1.0f;
    cout.precision(15);
    cout << std::fixed << value << endl;
    return 0;
} 
```

> 而`1.000000000000000`不是`1`我所希望的。
> 
> `cout`当所有剩余数字为零时，如何使用最多输出 15 个十进制数字和更少？

**提出第二个问题**

第二**个问题**是，无论我们设置`cout`的精度比 15 高多少，我们的输出中只能得到 15 个十进制数字。让我们编写一个程序，将 a 初始化`double`为一个值，设置`cout`to的精度`30`并将我们的`double`插入`cout`：

```
int main(int argc, char *argv[]) 
{
    double value = 1.55f;
    cout.precision(30);
    cout << value << endl;
    return 0;
} 
```

这将输出`1.5499999523162841796875`，一个由小数点后 22 位组成的数字。这表明我们以某种方式不幸地得到了正好 15 位的输出：与我们在提出第一个问题时遇到的相同类型的舍入行为显然是与从平方根函数返回的值的输出进行交互，使得在这种舍入行为下，将打印小数点后十五位数字。

* * *

# 回答问题

您希望插入 a 以`double`显示`cout`尽可能多的非零十进制数字，最多 15 个。`double`s in的字符串表示`cout`应至少满足以下测试：

```
 x.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxf ----> "x.xxxxxxxxxxxxxxx"
 x.xxxxx0000000000000000000000000f ----> "x.xxxxx"
 x.000000000000000000000000000000f ----> "x"
 x.00000000000000x000000000000000f ----> "x.00000000000000x" 
```

这不能通过使用任何明显的方式来实现`std::ostream::precision`。正如您所指出的，我们不能使用`std::fixed`，因为这肯定会通过我们上面的第三次测试。我们也不能轻易使用默认值，因为如[cplusplus.com 所述](http://www.cplusplus.com/reference/ios/ios_base/precision/)，

> 在默认的浮点表示法上，精度字段指定要显示的有意义数字的最大数量，包括小数点之前和之后的数字。

这意味着我们需要考虑小数点前的位数。如果小数点前有 3 位，我们需要使用 15+3 的精度，以此类推。

`double`实现此目的的一种方法是使用 a并返回 a的函数`std::string`：

```
std::string stringFromDouble(double value, unsigned int decimalDigits)
{
    int integerComponent = abs((value > 0) ? (int)(floor(value)) : (int)(ceil(value)));
    std::ostringstream integerStream;
    integerStream << integerComponent;
    std::string integerString = integerStream.str();
    unsigned int integerLength = integerString.length();

    std::ostringstream stream;
    stream.precision(decimalDigits + integerLength);
    stream << value;
    std::string str = stream.str();
    return str;
} 
```

# php - $_GET 不适用于 PHP 邮件激活

> ID：14290663
> 
> 赞同：0
> 
> 时间：2013-01-12T05:49:10.270
> 
> 标签：php

> localhost/blink/activate.php?email?=iamuser@localhost&activate_code=36486d71147a97037515616677c7359b

那是我的激活链接。但是，PHP 无法识别它。

```
if (isset($_GET['email'], $_GET['activate_code']) === true){

    echo 'Works!';
} 
```

我在 PHP 页面上没有得到任何输出。单击链接后，我没有看到回声。IF 语句有什么问题？

更新：这是我分配它的方式。

```
email($regi_data['email'], 'Activate your account',"Hey "  .$regi_data['username']. ",\n\nYou need to activate your account.\n\nPlease click on the link below:\n http://localhost/blink/activate.php?email=". $regi_data['email'] . "&activate_code=" . $regi_data['activate_code'] . "\n\n-Blink"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T05:50:53.463

您需要用于`=`为键分配值，而不是`?`像`==`使用`email`.

> localhost/blink/activate.php?email=iamuser@localhost&activate_code=36486d71147a97037515616677c7359b

您可能还应该使用 对参数进行编码，`urlencode()`这将使.`@``%40`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T05:50:54.573

你有多余的吗？在电子邮件后的链接中。它应该是：

localhost/blink/activate.php?email=iamuser@localhost&activate_code=36486d71147a97037515616677c7359b

# ruby-on-rails-3 - 如何在 Rails 应用程序的谷歌地图中创建信息窗口？

> ID：14290679
> 
> 赞同：2
> 
> 时间：2013-01-12T05:50:59.293
> 
> 标签：ruby-on-rails-3, google-maps, gmaps4rails

我正在制作一个 Rails 应用程序。我应该根据位置在**谷歌地图**上显示定位点。对于那个特定的位置，我有**一些细节**，所以我想要的是，只要我点击任何**针点**，我应该得到我为那个特定位置插入到我的数据库中的所有细节。

任何人都可以通过提供您已知的信息或提供任何相关的**API 链接**来帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T06:45:33.320

最终我找到了这个答案。

我浏览了`gmap4rails`wiki文档，然后我得到了一个方法如下：

```
def gmaps4rails_infowindow
  "Enter your required content"
end 
```

现在，我可以在其各自的定位点上显示该特定位置的详细信息。

# php - 在 php 中获取 x 的 y 根，例如 8 的 3 根是 2

> ID：14290682
> 
> 赞同：5
> 
> 时间：2013-01-12T05:51:54.273
> 
> 标签：php, math

我想得到 y 的 x 根。就像 8 的 3 根是 2 一样，php 中有什么函数可以得到这个结果。

**sqrt**函数正在获取给定值的平方根。但我想要给定值的 n 根。有没有其他方法可以找到它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-12T05:58:25.907

你可以使用这样的东西

> 战俘（8,1/3）；

还记得那条规则吗？:-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T05:57:05.607

> x = b ^e

变成：

> ln x = e ln b
> ln x / e = ln b
> ln b = ln x / e
> b = *e* ^(ln x / e)

因此：

```
$b = exp(log($x) / $e); 
```

请注意，这只会给你一个真正的根，如果有的话。如果您想要*所有*e 根，则需要在复数域中执行数学运算。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T05:59:53.883

要获取数字的任何根，您可以使用以下`pow()`函数：

pow(8, 1/3)

这给了你八的第三个根。

供参考检查

[http://php.net/manual/en/function.pow.php](http://php.net/manual/en/function.pow.php)

# javascript - Javascript：匹配变量名并应用于匹配的变量

> ID：14290683
> 
> 赞同：0
> 
> 时间：2013-01-12T05:52:04.990
> 
> 标签：javascript, variables, object

我想要一个函数，可以自动匹配对象内部的变量名称，如果名称匹配，则将它们应用于局部变量。

我目前正在使用这种方式，但随着变量的增加，我想实际创建一个新函数来应用它们。

```
ob = { a: 1, b: 2, }

-----------------------------

Install(ob)

function Install(ob){
  if('a' in ob) a = ob.a;
  if('b' in ob) b = ob.b;
}

var a; var b; 
```

我想要这样的事情

```
function Install(ob){
  for( // each ob`s this varaiable name){     
    if (//this name much local variable name){
     //local varaible = ob this variable 
     }
  }
} 
```

这可能吗？非常感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T06:47:40.580

您可以像这样将变量从对象分配到窗口。

```
function Install(ob) {
    for (var i = 0, keys = Object.keys(ob), l = keys.length; i < l; i++) {
        window[keys[i]] = ob[keys[i]];
    }
} 
```

以后访问它就简单了`console.log(varname)`。但是你做的很奇怪；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T06:44:03.177

如果您只想从对象的所有属性中创建顶级全局变量（我不确定您为什么要这样做），您可以这样做：

```
var ob = {a: 1, b: 2};
for (var prop in obj) {
    if (obj.hasOwnProperty(prop) {
        window[prop] = obj[prop];
    }
} 
```

否则，请更好地解释您实际要完成的工作。

# elf - 如何从已编译的 ELF 可执行文件（无反汇编）中提取一些函数？

> ID：14290684
> 
> 赞同：1
> 
> 时间：2013-01-12T05:52:18.593
> 
> 标签：elf, objdump, readelf

我正在处理一个大型可执行文件，我没有源代码（长篇大论）。

我想从中提取几个函数的二进制代码——并尝试从我自己的程序中调用它们。如果重要的话，我正在寻找的函数都是从同一个源文件（在 Linux 上使用 gcc）编译的。

我可以使用 objdump 查看函数的二进制代码。有什么方法可以说服该工具转储函数的二进制代码——没有其他任何东西，也不需要反汇编？

基本上，如果定义函数的 C 文件被称为 foo.c，我想要获取 foo.o（我实际上更喜欢 foo.So，但这不会存在于可执行文件中）。可以用 objdump、readelf 或类似的东西来完成吗？

如果重要的话，这些功能是独立的。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T03:24:01.257

> 可以用 objdump、readelf 或类似的东西来完成吗？

当然：您可以使用 GDB 写出构成函数的字节。例子：

```
cat t.c
int foo() { return 42; }
int main() { return foo(); }

gcc t.c
gdb -q ./a.out

(gdb) disas/r foo
Dump of assembler code for function foo:
   0x00000000004004c4 <+0>:  55              push   %rbp
   0x00000000004004c5 <+1>:  48 89 e5        mov    %rsp,%rbp
   0x00000000004004c8 <+4>:  b8 2a 00 00 00  mov    $0x2a,%eax
   0x00000000004004cd <+9>:  c9              leaveq 
   0x00000000004004ce <+10>: c3              retq   
End of assembler dump.

(gdb) dump memory foo.o 0x00000000004004c4 0x00000000004004ce+1
(gdb) quit

od -tx1 foo.o
0000000 55 48 89 e5 b8 2a 00 00 00 c9 c3
0000013 
```

请注意，foo.o 的内容正是 foo 的代码字节。

> 我想得到 foo.o

*不幸的是，这*部分是不可能的：搬迁记录已经全部解决。如果 foo() 调用 bar()，`bar`则不会出现在代码中的任何位置，只会出现它的地址。

现在，如果需要的函数都是叶子（不要调用任何其他函数），并且不引用任何全局数据，那么您现在知道如何转储的字节序列可用于重建可链接的 foo.o，例如所以：

```
{ echo -e "foo:\n\t.byte\t\c";
  od -tx1 foo.o | cut -c9- |
    sed -e '/^ *$/d' -e 's/^/0x/' -e 's/ /,0x/g'; } > foo1.s

cat foo1.s 
foo:
    .byte   0x55,0x48,0x89,0xe5,0xb8,0x2a,0x00,0x00,0x00,0xc9,0xc3

gcc -c foo1.s
objdump -d foo1.o

foo1.o:     file format elf64-x86-64

Disassembly of section .text:

0000000000000000 <foo>:
   0:   55                      push   %rbp
   1:   48 89 e5                mov    %rsp,%rbp
   4:   b8 2a 00 00 00          mov    $0x2a,%eax
   9:   c9                      leaveq 
   a:   c3                      retq 
```

量子点

# php - 如何在php中检查数组是否为空

> ID：14290687
> 
> 赞同：0
> 
> 时间：2013-01-12T05:52:31.513
> 
> 标签：php, arrays, zend-framework

我有巨大的阵列。它的结构是这样的：

```
Array
(
    [0] => Array
        (
            [id] => 57060
            [customer] => 1         
            [desc] => Customer Object
                (
                    [id] => 51716
                    [name] => abc xyz           
                    [supplier] => stdClass Object
                        (
                            [@size] => 1
                            [Supplier] => stdClass Object
                                (
                                    [@chainCode] => EP
                                    [@id] => 13
                                )
                        )

                    [Types] => stdClass Object
                        (
                            [@size] => 9
                            [Type] => Array
                                (
                                    [0] => stdClass Object
                                        (
                                            [@Code] => 394431
                                            [@TypeId] => 497374                                
                                                (
                                                    [@size] => 27
                                                    [Amenity] => Array
                                                        (
                                                            [0] => stdClass Object
                                                                (
                                                                    [@amenityId] => 8149624
                                                                    [amenity] => Air Conditioning
                                                                )

                                                            [1] => stdClass Object
                                                                (
                                                                    [@amenityId] => 8149701
                                                                    [amenity] => 
                                                                )
                                                          )
                                                          .....
                                                          ..... and so on 
```

我试图简单地检查上面的数组是否为空。

```
<table>
    <tr>
        <td><b>View my Reviews</b></td>
    </tr>

    <tr>
        <td colspan=10>
            <div></div>
        </td>
    </tr>

    <?php
    if (!empty($this->revArr)) {
        foreach ($this->revArr as $review):
            ?>
            <tr>
                <td class="col1">
                    <?php echo ($review['name'] == '') ? 'a guest' : $review['name']; ?> <br/>on <span style="font-size:11px;"><?php echo date("M j, Y", strtotime($review['created_at'])); ?></span>

                </td>
                <td class="col2">                   
                    <span class="name"><a href="/hotelreview/<?php echo $review['hotelId']; ?>"><?php echo $review['Info']->Name; ?></a></span>
                    <br/>
                    <span class="address"><?php
                echo $review['Info']->address1;
                if ($review['Info']->address2 != '') {
                    echo ' ' . $review['Info']->address2;
                }
                if ($review['Info']->address3 != '') {
                    echo ' ' . $review['hotelInfo']->address3;
                }
                ?></span>

                    <div style="margin-top:10px;">
                        <h4><b><?php echo ($review['title'] == '') ? 'A Review By' : $review['title']; ?></b></h4>
                        <p><?php
                $detail = str_replace("\r", "\n", $review['detail']);
                $detail = preg_replace("#\n+#", "\n", $detail);
                echo str_replace("\n", "</p><p>", $detail);
                        ?></p>
                    </div>
                </td>
            </tr>

        <?php endforeach; ?>  
        <tr>
            <td colspan=10 style="text-align:right;">
                <?php echo $pagination; ?>                
            </td>
        </tr>
    <?php } {
        ?>
        <tr style="text-align: center;">
            <td>No Review Found !!</td>
        </tr>
    <?php }
    ?>
</table> 
```

我哪里错了？为什么最重要的条件不起作用？

需要帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T08:10:46.633

会不会是你忘记了`else`？从我看到的这段代码将始终输出

> “没有找到数据”

即使有数据。如果存在数据，它还应按要求输出数据。

```
//snippet
<?php endforeach; ?>  
        <tr>
            <td colspan=10 style="text-align:right;">
                <?php echo $pagination; ?>                
            </td>
        </tr>
    <?php } else {//there should be an else here
        ?>
        <tr style="text-align: center;">
            <td>No Review Found !!</td>
        </tr>
    <?php }
    ?>
</table> 
```

如果找不到数据，您确定您的 api 不返回**任何内容吗？**大多数情况下，api 会返回`False`或`error array`失败，因此测试`empty`可能不合适。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-13T14:54:49.510

您可以使用此函数检查数组是否为空。没有其他简单的方法。

```
// Checks if an array is empty by values recursively.
// If check_all_elements is true, all the elements will be required to be not empty.
function is_array_empty($array, $check_all_elements = false)
{
    if (!is_array($array) || empty($array))
        return true;

    $elements = count($array);
    foreach ($array as $element)
    {
        if (empty($element) || (is_array($element) && is_array_empty($element, $check_all_elements)))
        {
            if ($check_all_elements)
                return true;
            else $elements--;
        }
    }
    return empty($elements);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T06:03:06.720

你可以试试：

```
if(is_array($this->revArr) && count($this->revArr)){
  //code for displaying array information
}else{
   echo "No data found";
} 
```

如果变量是字符串，该`count`函数将返回 true，因此您需要先检查它是否为数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T07:42:20.957

好的，试试这两个步骤

```
reset($array_name)
key = key($array_name) 
```

如果没有键，它将返回 NULL 否则返回第一个键

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-12T06:08:59.750

看一看： [空](http://php.net/manual/en/function.empty.php)

[伊塞特](http://php.net/manual/en/function.isset.php)

[is_array](http://php.net/manual/en/function.is-array.php)

# actionscript-2 - 从计时器动作脚本 2.0 中减去

> ID：14290692
> 
> 赞同：0
> 
> 时间：2013-01-12T05:53:06.397
> 
> 标签：actionscript-2, countdowntimer, subtraction

我的计时器有这个代码

```
dt_timer.text = "02:00";
var dispSecs = 60;
var dispMins = 2;

var timerInterval = setInterval(countDown, 1000);

function countDown()
{

    dispSecs--;

    if(dispSecs==59)
    {
        dispMins--;
    }

    if(dispSecs==0 && dispMins > 0)
    {
        dispSecs = 60;
    }

    if(dispSecs==0)
    {
        gotoAndPlay(200);
        clearInterval(timerInterval);
    }

    if(dispSecs == 60)
    {
        dt_timer.text = prependZero(dispMins) + ":" + prependZero(0);
    }
    else
    {
        dt_timer.text = prependZero(dispMins) + ":" +prependZero(dispSecs);
    }
}
function prependZero(num)
{
if (num < 10)
{
    num = "0" + num;
}
return (num);
} 
```

**我有按钮，当点击它会从计时器中减去 10 秒。我正在考虑在我的按钮中使用此代码**

```
dispSecs - 10; 
```

**那正确吗？谁能帮我。请？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T05:54:06.780

```
dispSecs += -10; 
```

或者

```
dispSecs = dispSecs - 10; 
```

# soundcloud - SoundCloud Widget API play()、pause()、toggle() 方法不会切换播放器中的播放/暂停按钮图像

> ID：14290696
> 
> 赞同：1
> 
> 时间：2013-01-12T05:53:22.267
> 
> 标签：soundcloud

例如，在[SoundCloud Widget API Playground](http://w.soundcloud.com/player/api_playground.html)上查看。如果单击播放、暂停和切换按钮，小部件中的橙色大播放/暂停按钮不会更新。

我已经在 Mac OS X 10.7.5 上签入了最新版本的 Chrome、Safari 和 Firefox。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T18:08:26.947

该修复程序刚刚部署。

# android - 在 Android 中向 RemoteViews 添加视图

> ID：14290712
> 
> 赞同：0
> 
> 时间：2013-01-12T05:56:54.160
> 
> 标签：android, widget

直奔问题。

```
//This is my main layout
RemoteViews views = null;
views = new RemoteViews(getPackageName(), R.layout.main); 

//Clear parent view
views.removeAllViews(R.id.llMain);

//This is how we add nested view
RemoteViews childView = new RemoteViews(getPackageName(), R.layout.lay_child);
views.addView(R.id.llMain, childView); 
```

这些代码在 Galaxy Nexus 上运行良好。但不适用于其他一些设备，例如 Galaxy Tab 或摩托罗拉。怎么了？

**它返回错误消息，例如“找不到视图。改用错误视图”。updateAppWidget 找不到任何视图，使用错误视图 android.widget.RemoteViews$ActionException: 找不到视图：0x7f050025**

```
//This is the main layout
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:background="#00000000"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

    <LinearLayout
        android:id="@+id/llMain"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"    
        android:orientation="vertical"
        android:layout_gravity="center|left"
        android:layout_marginLeft="@dimen/marginLeft">  

    </LinearLayout>             

</FrameLayout> 
```

这是子视图

lay_child.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/llTimezoned"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:visibility="visible"
    android:layout_gravity="center">                    
    <ImageView android:id="@+id/ivTimezone"
        android:layout_width="60dp"
        android:layout_height="60dp"
        />     
</LinearLayout> 
```

还是与操作系统版本有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-29T01:54:38.543

这对我有用

```
RemoteViews update = new RemoteViews(context.getPackageName(), R.layout.widget_layout);
    for (int i = 0; i < 3; i++) {
        RemoteViews textView = new RemoteViews(context.getPackageName(), R.layout.test);
        textView.setTextViewText(R.id.textView1, "TextView number " + String.valueOf(i));
        update.addView(R.id.ll_widget, textView);
    }

    appWidgetManager.updateAppWidget(appWidgetIds, update); 
```

[https://stackoverflow.com/a/20040066/1492815](https://stackoverflow.com/a/20040066/1492815)

# ember.js - 在模板中显示来自 FixtureAdapter 存储的单个 EmberJS DS.Model

> ID：14290719
> 
> 赞同：0
> 
> 时间：2013-01-12T05:57:49.397
> 
> 标签：ember.js, ember-data

我正在尝试将 Ember-Brunch（原始存储库：[https](https://github.com/icholy/ember-brunch) ://github.com/icholy/ember-brunch ）更新为最新的 EmberJS 和 EmberJS-Data 框架。我目前遇到的问题是我正在尝试将原始 Bob 模型转换`DS.Model`为`DS.FixtureAdapter`在`DS.Store`. 但无论我尝试什么，我都会遇到让数据显示的问题。这里有几个尝试：

随着路线：

```
App.BobRoute = Ember.Route.extend({
    model: function() { 
        return App.Bob.find();
    }
}); 
```

我收到以下错误：

> 未捕获的 TypeError：无法调用 null 的方法“hasOwnProperty”

如果我切换到这条路线：

```
App.BobRoute = Ember.Route.extend({
    setupController: function() {
        App.BobController.set('content', App.Bob.find());
      }
}); 
```

我收到以下错误：

> 未捕获的类型错误：对象 App.BobController 没有方法“设置”app.js：184 未捕获的类型错误：无法调用 null 的方法“hasOwnProperty”

有任何想法吗？

您可以查看我当前的工作[https://github.com/seankeating/ember-brunch](https://github.com/seankeating/ember-brunch)以及我在 DS.Model-Implementation-For-Using-Local-DSStore 分支中的尝试。

**店铺：**

```
App.Store = DS.Store.extend({
  revision: 11,
  adapter: DS.FixtureAdapter.create()
}); 
```

**控制器：**

```
App.BobController = Em.ObjectController.extend({

}); 
```

**模型：**

```
var App = require('app'),
    attr = DS.attr;

App.Bob = DS.Model.extend({

    firstName : attr('string'),
    lastName  : attr('string'),
    lyrics    : attr('string'),

    fullName: function(){
        return this.get('firstName') + ' ' + this.get('lastName');
    }.property('firstName', 'lastName')

});

App.Bob.FIXTURES = [{
    firstName: 'bob',
    lastName: 'marley',
    lyrics: 'no woman no cry!'
}]; 
```

**模板：**

```
<h2>{{fullName}}'s page!</h2>
<button class="btn btn-success" {{action doClick target="view"}}>click me</button>
{{#linkTo home}}<button class="btn" {{action doHome}}>go back home</button>{{/linkTo}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T05:09:37.777

在[bc755f9](https://github.com/emberjs/data/commit/bc755f9227d9a71f33e4dc8b675409de66fe8fd2)之前，您需要将夹具键作为字符串提供，这就是 Ember Data 在内部存储它们的方式。

现在，您可以使用数字或字符串作为灯具 ID，一切都会按预期工作。

另外，您应该始终在开发中使用 Ember.js 的调试版本，如果出现问题，它会提供更好的错误消息。从[ea6922f 开始](https://github.com/emberjs/ember.js/commit/ea6922f82b7592707a222c1e83cbcda728d1e6ca)，如果您在`localhost`或`127.0.0.1`.

# java - 如何在struts2中启动时将一些数据库值设置为应用程序范围？

> ID：14290722
> 
> 赞同：4
> 
> 时间：2013-01-12T05:58:27.423
> 
> 标签：java, jsp, struts2, ognl

我想在应用程序范围内设置一些值。

我通过使用拦截器`init()`方法进行了尝试。但它`null`在下面的代码中给出了指针：

```
ServletActionContext.getContext().getApplication().put("ApplicationName", applName); 
```

希望在所有会话中访问此字段。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T06:13:32.200

在应用程序启动时初始化数据的规范方法是使用[ServletContextListener](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html)。

IMO 拦截器对此毫无意义：拦截器旨在在请求过程中实现跨应用程序的行为，而不是启动时的一次性功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T18:55:20.020

你可以这样做：

```
public class ContextListenerOne implements ServletContextListener {

    ServletContext context;

    @Override
    public void contextInitialized(ServletContextEvent sce) {

        context = sce.getServletContext();

        try {
            //Create a database connection here and run queries to retrieve data.             
            context.setAttribute("data", data); //Use setAttribute method to make this data available to everyone.
        } catch(Exception e {

        }
    }

} 
```

请注意，您也可以通过以下不推荐的非常规方法进行操作。

由于整个过程中只创建了一个 Servlet 对象的实例，因此您可以像这样覆盖 init 方法：

```
@Override
public void init(ServletConfig config) throws ServletException {
    super.init();
    //Do all your database transactions here.
    ServletContext c = config.getServletContext(); //Get the ServletContext.
    c.setAttribute("data", data); //Make data available to all.
} 
```

在 servlet 的生命周期中，无论发出多少请求，init 方法都只会被调用一次。

但是，请注意，如果您覆盖特定类型的 Servlet 的 init 方法，如果在第一个 Servlet （不是您覆盖 init 方法的类型）的请求之前发出了对另一个 Servlet 的请求，您的数据库数据将不可用向您覆盖其 init 方法的 Servlet 发出请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-05T02:54:09.103

官方文档在这里：

> 不要`ActionContext.getContext()`在 Action 类的构造函数中使用。这些值可能未设置，并且调用可能会为`getSession()`.

[https://struts.apache.org/docs/accessing-application-session-request-objects.html](https://struts.apache.org/docs/accessing-application-session-request-objects.html)

它看起来与`ServletActionContext.getContext()`.

# ruby-on-rails - 我需要以什么格式发布日期值以便它在 Rails 中被接受？

> ID：14290725
> 
> 赞同：0
> 
> 时间：2013-01-12T05:59:17.087
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在 Rails 应用程序中有一个日期字段，但是当我发送值时，`2013-01-12T05:46:01Z`它显示无效的 json 字符串。我也尝试过发送`2012-02-14 05:00:00`，但这也显示相同的错误，但是当我发布`20120214050000+0000`它时接受了日期。那么我如何发布日期的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T14:12:20.780

您可以使用`Time.parse(string)`

或者您可以向要在其中插入日期的模型添加一个方法

或者你可以使用慢性宝石。

看看这个[Rails Cast](http://railscasts.com/episodes/32-time-in-text-field?autoplay=true)

# delphi - 如何在检索所有记录之前关闭/取消 Clientdataset

> ID：14290733
> 
> 赞同：2
> 
> 时间：2013-01-12T06:00:25.057
> 
> 标签：delphi

使用 Delphi 7 和 ClientDataset-Provider-AdoQuery 框架，无论如何都要在检索所有记录之前取消查询。如果需要太多时间并更改参数并重试，我希望用户可以选择取消查询....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T22:04:37.997

您应该首先决定什么对您来说“太长”。例如，假设它是 120 秒。将 TADOQuery.CommandTimeout（或您使用的）设置为 120。现在，如果执行命令（可能在您的情况下选择）将花费超过 120 秒，那么您会得到特定的异常，您可以做您想做的事（向用户显示消息，更改查询的参数，...）。如果连接到服务器可能需要很长时间，您可以对 TADOConnection.ConnectionTimeout 属性执行相同操作。

# eclipse - 在 Eclipse 中全局设置资源过滤器

> ID：14290736
> 
> 赞同：10
> 
> 时间：2013-01-12T02:32:55.913
> 
> 标签：eclipse

我已经开始从 Eclipse 外部使用 git，并且在尝试编译隐藏的 .git 文件夹时遇到了自动构建功能的问题。这个[问题](https://salesforce.stackexchange.com/q/963/594)显示了如何在每个项目的基础上排除它们。无论如何，是否可以在全球范围内或从每个角度做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-03-29T13:26:16.143

目前不存在这种可能性。

当您创建资源过滤器时，它会修改`.project`工作区中项目文件夹的文件，但是我不建议手动创建这些过滤器，因为它们具有由 Eclipse 生成的 ID，并且您遇到问题的可能性更大。最好将属性单独放在每个项目中，而不是直接在配置文件中执行此操作。

正如[@brandizzi](https://stackoverflow.com/users/287976/brandizzi)在问题评论中所说，几年前有一个[开放的错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=301821)，但 eclipse 在新版本的开发中没有优先考虑这一点，处理低优先级的改进，但我认为这将是另一个很棒的功能方便开发环境的设置。

由于该工具非常好且免费，我们不能批评太多，但它是Eclipse.org[的](https://www.eclipse.org/)**提示**：

### 有很多开发人员想要这个功能。

* * *

### 参考：

*   [Eclipse Workbench 用户指南 > 概念 > 工作台 > 资源过滤器](https://help.eclipse.org/kepler/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Fconcepts%2Fresourcefilters.htm)

# database-design - 在 SQL 表中存储一组天

> ID：14290738
> 
> 赞同：0
> 
> 时间：2013-01-12T06:02:19.757
> 
> 标签：database-design

我正在使用代码优先方法，并希望创建一个名为 Classes 的表。该表将包含以下信息：

*   姓名（数学 1）
*   代码 (MatA)
*   学科（数学）
*   说明（数学很有趣）
*   开始时间（日期时间）
*   结束时间（日期时间）
*   开始日期（日期时间）
*   结束日期（日期时间）

除了上述之外，我想指定上课的日期：

*   姓名（数学 1）
*   代码 (MatA)
*   学科（数学）
*   说明（数学很有趣）
*   开始时间（日期时间）
*   结束时间（日期时间）
*   开始日期（日期时间）
*   结束日期（日期时间）
*   星期一（布尔值）
*   星期二（布尔值）
*   等等

我不想做上述事情，它似乎效率低下，特别是当我需要根据当前日期调用一个类时（即获取星期一出现的所有类）。

那么，我应该有什么样的表结构呢？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T06:05:43.437

您应该创建 2 个表，1 个 for`Classes`和 1 个 for `ClassSchedules`。`ClassId`用一列连接您的表。

顺便说一句，你不应该需要 2 列`BeginTime`and `BeginDate`，它们应该存储在同一列中—— `EndTime`and 也是如此`EndDate`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T06:15:41.300

您应该尝试以下方法；

```
CREATE TABLE classes(
Name varchar(255),
Code varchar(255),
Subject varchar(255),
Description varchar(255),
BeginTime date,
EndTime Date,
BeginDate Date,
EndDate Date,
)

CREATE TABLE classdates(
Classname varchar(255),
Classdate varchar(255)
)

Select cl.*,d.classdate from classes cl (nolock)
join classdates d 
on d.classname = cl.classname 
```

如果您有一个大型数据库，我会采用第一个建议并将 ClassID 与名称一起添加，然后在将 ClassID 设为主键后加入 ClassID。

# php - php的Svn远程服务器证书验证问题

> ID：14290748
> 
> 赞同：2
> 
> 时间：2013-01-12T06:04:18.623
> 
> 标签：php, windows, svn, ssl-certificate, proc-open

为了使用 websvn 浏览远程存储库，我在本地主机（windows7，wampserver）中安装了 websvn。Websvn 通过 php 函数的 proc_open 执行 svn 命令。当 svn 命令是：

`svn info "http://site.com/svnurl" --xml --non-interactive --username "guest" --password "guest"`

proc_open 返回正确的结果。但是当 svn 命令是：

`svn info "https://site.com/svnurl" --non-interactive --trust-server-cert --username "guest" --password "guest"`

proc-open 返回错误。

svn：E175002：无法连接到 URL 'https://site.com/svnurl' 上的存储库 svn：E175002：'https://site.com/svnurl'的选项：服务器证书验证失败：为不同的主机名，发行者不受信任（https://site.com/svnurl）。

这里，site.com/svnurl 是虚幻的 url，真实的 url 是 205.174.169.180:9880/GBoomTest.ca。

你怎么能解决这个问题？

# java - TreeMap 操作的时间复杂度——subMap、headMap、tailMap

> ID：14290751
> 
> 赞同：15
> 
> 时间：2013-01-12T06:04:55.093
> 
> 标签：java, list, treemap

有谁知道 TreeMap 操作的时间复杂度，比如 subMap、headMap。尾图。

get、put 等操作的时间复杂度为 O(logn)。但是 javadoc 并没有过多地说明上述操作的复杂性。

我能想到的最坏情况复杂度 O(n) 因为如果集合包含最后一个元素，它将遍历整个列表。我们可以确认吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-12T06:19:58.097

对于那些手头有源代码的问题非常有用，因为有足够的 IDE 支持，您可以简单地浏览实现。查看[TreeMap](http://javasourcecode.org/html/open-source/jdk/jdk-6u23/java/util/TreeMap.html)的源代码可以看出，这三个方法都使用[AscendingSubMap 的构造](http://javasourcecode.org/html/open-source/jdk/jdk-6u23/java/util/TreeMap.NavigableSubMap.html)函数构造了一个新地图：

```
public NavigableMap<K,V> subMap(K fromKey, boolean fromInclusive,
                                K toKey,   boolean toInclusive) {
    return new AscendingSubMap(this,
                               false, fromKey, fromInclusive,
                               false, toKey,   toInclusive);
} 
```

然后将参数与超级构造函数一起传递给类[`NavigableSubMap`](http://javasourcecode.org/html/open-source/jdk/jdk-6u23/java/util/TreeMap.NavigableSubMap.html)：

```
super(m, fromStart, lo, loInclusive, toEnd, hi, hiInclusive); 
```

所以这三种方法都基于以下构造函数：

```
NavigableSubMap(TreeMap<K,V> m,
                boolean fromStart, K lo, boolean loInclusive,
                boolean toEnd,     K hi, boolean hiInclusive) {
    if (!fromStart && !toEnd) {
        if (m.compare(lo, hi) > 0)
            throw new IllegalArgumentException("fromKey > toKey");
    } else {
        if (!fromStart) // type check
            m.compare(lo, lo);
        if (!toEnd)
            m.compare(hi, hi);
    }

    this.m = m;
    this.fromStart = fromStart;
    this.lo = lo;
    this.loInclusive = loInclusive;
    this.toEnd = toEnd;
    this.hi = hi;
    this.hiInclusive = hiInclusive;
} 
```

我在这里看到的只是`compare`类型和断言检查原因的调用。因此，它应该几乎是*O(1)*。

您可以随时[在线浏览源代码](http://www.docjar.com/)，但我真的建议您获取源文件并将它们链接到您选择的 IDE。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T08:27:29.080

我能够浏览[TreeMap](http://javasourcecode.org/html/open-source/jdk/jdk-6u23/java/util/TreeMap.java.html)的源代码以获取详细的实现。

如果您详细了解源代码，了解他们实际上是如何获取 subMap 的，它就像这样......

如果你看到 NavigableSubMap 的 size 方法

```
 public int size() {
        return (fromStart && toEnd) ? m.size() : entrySet().size();
    } 
```

多次调用中的entrySet()实现最终调用getCeilingEntry()函数

```
final Entry<K,V> getCeilingEntry(K key) {
    Entry<K,V> p = root;
    while (p != null) {
        int cmp = compare(key, p.key);
        if (cmp < 0) {
            if (p.left != null)
                p = p.left;
            else
                return p;
        } else if (cmp > 0) {
            if (p.right != null) {
                p = p.right;
            } else {
                Entry<K,V> parent = p.parent;
                Entry<K,V> ch = p;
                while (parent != null && ch == parent.right) {
                    ch = parent;
                    parent = parent.parent;
                }
                return parent;
            }
        } else
            return p;
    }
    return null;
} 
```

所以我想从创建的子地图中获取实际地图；时间复杂度大于 O(1)。

# android - 如何在一个 LinearLayout 中同步滚动十个 gridView

> ID：14290753
> 
> 赞同：2
> 
> 时间：2013-01-12T06:05:10.303
> 
> 标签：android, android-layout, scrollview, android-gridview

我有两个相同大小的 gridView。如何进行同步滚动。我可以禁用 gridView 滚动并启用 LinearLayout 滚动吗？

```
<LinearLayout
     android:layout_width="1080dp"
     android:layout_height="700dp"
     android:layout_alignParentTop="true"
     android:orientation="horizontal"
     android:layout_marginLeft="0dp"
         android:layout_marginTop="0dp"
     >
     <GridView
         android:id="@+id/gridView1"
         android:layout_width="60dp"
         android:layout_height="match_parent"
         android:numColumns="1"
         >
     </GridView>
     <GridView
         android:id="@+id/gridView2"
         android:layout_width="240dp"
         android:layout_height="match_parent"
         android:numColumns="1" >
     </GridView>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T06:11:40.573

```
Could I disable gridView scrolling and enable LinearLayout scrolling? 
```

对于这个问题。不。还有另一种更有效的方法。

GridView通过其 AbsLisView 父级提供了[smoothScrollToPosition(int)](http://developer.android.com/reference/android/widget/AbsListView.html#smoothScrollToPosition%28int%29)或[setSelection(int)方法。](http://developer.android.com/reference/android/widget/GridView.html#setSelection%28int%29)这将滚动到您想要的位置。[现在，您应该使用OnScrollListener](http://developer.android.com/reference/android/widget/AbsListView.OnScrollListener.html)监听 ScrollEvent 。

现在只需将这些代码添加在一起：

```
GridView other;
@Override public void onScroll(AbsListView view, int firstItem, int visItems, int total) {
   other.smoothScrollToPosition(firstItem);
} 
```

希望它会有所帮助。

# google-chrome-app - 将 MySQL 和 PHP 与 Chrome 打包应用程序一起使用？

> ID：14290754
> 
> 赞同：2
> 
> 时间：2013-01-12T06:05:14.030
> 
> 标签：google-chrome-app

我的梦想是构建一个完全由 MySQL、PHP、HTML、CSS 和 JavaScript 驱动的客户端应用程序。然后，自定义版本的 Chrome 将管理所有用户体验。

Chrome Packaged Apps 看起来最接近这个......是否可以通过 Chrome Packaged App 分发 PHP 和 MySQL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T19:13:33.450

使用 Chrome 打包的应用程序无法按原样分发 PHP 和 MySQL。打包的应用程序不能包含任意二进制文件或运行它们的能力。

理论上可能有一个为[Native Client](https://developers.google.com/native-client/) (NaCl) 构建的 PHP 和 MySQL 版本，这是在 Chrome 的沙箱中运行本机代码的一种安全方式。但是，重新编译 PHP、MySQL 及其依赖项以便它们在 NaCl 运行时中构建和运行将是一项重大任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-14T20:49:55.943

您最好的选择是在此处查看对象本地存储的各种选项：[https](https://developers.google.com/chrome-developer-tools/docs/resource-panel) ://developers.google.com/chrome-developer-tools/docs/resource-panel 。其中一些提供了与 SQLite 数据库非常相似的功能。

Mihai 关于无法运行 PHP 是完全正确的。您的主要选择是在诸如[Backbone.js](http://backbonejs.org/)之类的框架的帮助下，用 Javascript 编写管理路由、模板等的代码。

祝你好运！

# matlab - 在 MATLAB 中创建具有指定名称的矩阵

> ID：14290756
> 
> 赞同：2
> 
> 时间：2013-01-12T06:05:15.407
> 
> 标签：matlab

如何在 MATLAB 中使用字符串参数输入作为变量名？我想输入一个字符串并将其用作变量的名称

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T07:59:25.257

将字符串存储在`str`其中，并将您要分配的值保存在`val`. 然后您需要`eval`按以下方式使用。

```
eval([str,'= val']); 
```

例如，

```
>> str = 'X';
>> val = rand(5);
>> whos
  Name      Size            Bytes  Class     Attributes

  str       1x1                 2  char                
  val       5x5               200  double              

>> eval([str,'= val'])

X =

    0.8147    0.0975    0.1576    0.1419    0.6557
    0.9058    0.2785    0.9706    0.4218    0.0357
    0.1270    0.5469    0.9572    0.9157    0.8491
    0.9134    0.9575    0.4854    0.7922    0.9340
    0.6324    0.9649    0.8003    0.9595    0.6787

>> whos
  Name      Size            Bytes  Class     Attributes

  X         5x5               200  double              
  str       1x1                 2  char                
  val       5x5               200  double 
```

# java - 如何更改 JTextField 的值？

> ID：14290758
> 
> 赞同：3
> 
> 时间：2013-01-12T06:05:36.793
> 
> 标签：java, swing, jtextfield, documentlistener

我正在尝试使用`JFrame`Swing 构建一个 Java 应用程序，其中有 5 个`JTextField`实例。其中之一是 Sum。

我需要`JTextField`在文本字段中键入一些数字后立即自动更改。

这怎么可能？

我写的就在这里。

```
private void displaytotalActionPerformed(java.awt.event.ActionEvent evt) {
// display total:
Float num1,num2,num3,num4,num5,num6,result;
num1 = display1b.getText().equals("") ? 0 : Float.parseFloat(display1b.getText());
num2 = display2b.getText().equals("") ? 0 : Float.parseFloat(display2b.getText());
num3 = display3b.getText().equals("") ? 0 : Float.parseFloat(display3b.getText());
num4 = display4b.getText().equals("") ? 0 : Float.parseFloat(display4b.getText());
num5 = display5b.getText().equals("") ? 0 : Float.parseFloat(display5b.getText());
num6 = display6b.getText().equals("") ? 0 : Float.parseFloat(display6b.getText());

result = num1+num2+num3+num4+num5+num6;

System.out.println(result);
} 
```

我尝试使用按钮获取总和并在此文本字段中显示它并且它有效。但我希望它自动完成。但是上面的代码在文本字段上没有显示任何内容。

我对此很陌生，如果您能提供指导，我将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T06:39:10.773

我想你正在寻找

*   a的[`setText()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#setText(java.lang.String))方法`JTextField`。
*   [编写](http://docs.oracle.com/javase/tutorial/uiswing/events/documentlistener.html)[DocumentListener](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/event/DocumentListener.html)以了解文本何时更改并对其应用 sum
*   [编写](http://docs.oracle.com/javase/tutorial/uiswing/components/generaltext.html#filter)[DocumentFilter](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/text/DocumentFilter.html)以确保您的程序不会因输入与数字不同而崩溃。

另一种方法是使用[JFormattedTextField](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JFormattedTextField.html)并使用侦听器。

几个建议。

*   开发直觉，通常java类的属性是由`(get|set)Property`. 使用像 Netbeans 这样的 IDE，它会帮助你找到东西。
*   自动化通常是通过使用 Listener 来实现的，只需了解何时使用哪个（这也是直觉的一部分）。
*   当您发现自己编写重复代码时，请考虑使用函数。IE

而不是 6 次：

```
display1b.getText().equals("") ? 0 : Float.parseFloat(display1b.getText()); 
```

考虑将您的字段放在一个中`ArrayList`并编写一个迭代它们的函数，并用上面的一行来设置所有值。

*   在进行额外的硬编码工作之前，请遵循[JavaTutorials ，或者在此处询问。](http://docs.oracle.com/javase/tutorial/)对你来说会更有效率。因为您将学习如何为自己学习并深入研究文档。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-12T06:50:14.357

您需要使用`DocumentListener`附加到每个数字字段。这将在字段更改时提醒您。

从那里你需要调用某种`sum`方法来自动更新计数。

就像是...

```
public class AutoSum {

    public static void main(String[] args) {
        new AutoSum();
    }

    public AutoSum() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new AutoSumPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class AutoSumPane extends JPanel {

        private JTextField[] fields;
        private JTextField tally;

        public AutoSumPane() {

            fields = new JTextField[5];

            DocumentListener docHandler = new DocumentListener() {
                @Override
                public void insertUpdate(DocumentEvent e) {
                    autoSum();
                }

                @Override
                public void removeUpdate(DocumentEvent e) {
                    autoSum();
                }

                @Override
                public void changedUpdate(DocumentEvent e) {
                    autoSum();
                }
            };

            setLayout(new GridLayout(6, 1));
            for (int index = 0; index < 5; index++) {
                fields[index] = new JTextField(3);
                fields[index].getDocument().addDocumentListener(docHandler);
                fields[index].setHorizontalAlignment(JTextField.RIGHT);
                add(fields[index]);
            }

            tally = new JTextField(3);
            tally.setHorizontalAlignment(JTextField.RIGHT);
            tally.setEditable(false);

            add(tally);

        }

        protected float getValue(JTextField field) {
            float value = 0;
            String text = field.getText();
            if (text != null && text.trim().length() > 0) {
                try {
                    value = Float.parseFloat(text.trim());
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
            return value;
        }

        protected void autoSum() {
            float sum = 0;
            for (JTextField field : fields) {
                sum += getValue(field);
            }
            tally.setText(NumberFormat.getNumberInstance().format(sum));
        }
    }
} 
```

例如。

查看[如何编写 DocumentListener](http://docs.oracle.com/javase/tutorial/uiswing/events/documentlistener.html)以获取更多信息。

当您使用它时，您可能会发现感兴趣[的实现 DocumentFilter](http://docs.oracle.com/javase/tutorial/uiswing/components/generaltext.html#filter)（以及[一些](http://www.jroller.com/dpmihai/entry/documentfilter)示例）

# sql - 三表连接的选择性过滤器

> ID：14290760
> 
> 赞同：0
> 
> 时间：2013-01-12T06:05:49.927
> 
> 标签：sql

我有三个表 Table1、Table2 和 Table3。

表 1 与表 2 具有一对多关系。表 2 与表 3 具有一对多关系。

说 table1 有

```
-------------
t1key
-------------
a
b

Table2 has 
-------------
t1key | t2key
--------------
a        c
a        d
b        x
b        y

Table 3
------------
t2key | t3key
-------------
c      e
c      f
c      g
d      h
d      i
d      j
x      m
x      n
x      o
y      p
y      q
y      r 
```

我想要加入三个表，以便它只返回 table3 中 t2key 的第一个唯一匹配项

加入的结果应该是

```
a c  e
a d  h
b x  m
b y  p 
```

目前我的应用程序对所有三个表进行连接，返回所有可能的行。我需要用上述条件过滤掉它。

```
SELECT * FROM Table1 AS T1  
LEFT OUTER JOIN Table2 T2 ON T1.t1Key = T2.t1Key 
LEFT OUTER JOIN Table2 T3 ON T2.t2Key = T3.t2Key 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T07:32:48.220

```
SELECT t1.t1key,t2.t2key,t3.t3key 
FROM Table1 t1  
INNER JOIN Table2 t2 ON t1.t1Key = t2.t1Key 
LEFT OUTER JOIN Table2 t3 ON t2.t2Key = t3.t2Key
group by t2.t1key,t2.t2key; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T06:14:01.970

像这样：

```
SELECT 
  t2.t1Key, 
  t2.t2key, 
  MIN(t3.t3key) t3key
FROM Table1 AS T1  
INNER JOIN Table2 T2 ON T1.t1Key = T2.t1Key 
INNER JOIN Table3 T3 ON T2.t2Key = T3.t2Key
GROUP BY t2.t1Key, 
         t2.t2key; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/f2e2b/7)

这会给你：

```
| T1KEY | T2KEY | T3KEY |
-------------------------
|     a |     c |     e |
|     a |     d |     h |
|     b |     x |     m |
|     b |     y |     p | 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T06:16:34.353

您需要先使用`GROUP BY`子句并使用`MIN()`for

```
SELECT t2.t1key, t2.t2key, MIN(t3.t3key) AS t3key
FROM Table1 AS T1  
LEFT JOIN Table2 T2 ON T1.t1Key = T2.t1Key 
LEFT JOIN Table3 T3 ON T2.t2Key = T3.t2Key
GROUP BY t2.t1Key, t2.t2key; 
```

## [看到这个 SQLFiddle](http://sqlfiddle.com/#!2/cf48d4/10)

如果您只想显示每个表中可用的数据，请使用`INNER JOIN`而不是`LEFT JOIN`.
例如，假设在`Table2` `'b', 'q'`.
然后如果你使用`LEFT JOIN`它会显示这样的结果

```
| T1KEY | T2KEY |  T3KEY |
--------------------------
|     a |     c |      e |
|     a |     d |      h |
|     b |     q | (null) | <-- It will show null value too
|     b |     x |      m |
|     b |     y |      p | 
```

### [演示](http://sqlfiddle.com/#!2/164a2/1)

使用`INNER JOIN`它不会显示该记录

### [演示](http://sqlfiddle.com/#!2/164a2/2)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T06:43:22.353

```
DECLARE @table1 table
(
    t1 char(1)
)
INSERT INTO @table1
SELECT 'a' UNION ALL
SELECT 'b' 

DECLARE @table2 table
(
    t1 char(1),
    t2 char(1)
)
INSERT INTO @table2
SELECT 'a', 'c' UNION ALL
SELECT 'a', 'd' UNION ALL
SELECT 'b', 'x' UNION ALL
SELECT 'b', 'y' 

DECLARE @table3 table
(
    t1 char(1),
    t2 char(1)
)
INSERT INTO @table3
SELECT 'c', 'e' UNION ALL
SELECT 'c', 'f' UNION ALL
SELECT 'c', 'g' UNION ALL

SELECT 'd', 'h' UNION ALL
SELECT 'd', 'i' UNION ALL
SELECT 'd', 'j' UNION ALL

SELECT 'x', 'm' UNION ALL
SELECT 'x', 'n' UNION ALL
SELECT 'x', 'o' UNION ALL

SELECT 'y', 'p' UNION ALL
SELECT 'y', 'q' UNION ALL
SELECT 'y', 'r' 

SELECT 

    t1.t1,
    t2.t2,
    min(t3.t2)
FROM @table2 t2
INNER JOIN @table3 t3
ON t3.t1 = t2.t2
INNER JOIN @table1 t1
ON t1.t1 = t2.t1
GROUP BY t1.t1,
    t2.t2 
```

# ruby-on-rails-3 - 如何根据印度财政年度设置月份范围

> ID：14290762
> 
> 赞同：0
> 
> 时间：2013-01-12T06:05:57.300
> 
> 标签：ruby-on-rails-3, date-range

根据印度财政年度（4 月 1 日至 3 月 31 日），当月份更改为 1 月时，我如何获得范围我的逻辑在 12 月 31 日之后失败，没有任何显示。这是我显示所有月份的代码：模型：

```
def self.get_month(month)
    months={
       '1'=> 'January',
       '2'=> 'February',      
       '3'=> 'March',
       '4'=> 'April',
       '5'=> 'May',
       '6'=> 'June',
       '7'=> 'July',
       '8'=> 'August',
       '9'=> 'September',
       '10'=> 'October',
       '11'=> 'November',
       '12' => 'December'
      }
   months[month]
 end 
```

意见：

```
<% (current_financial_year.start_date.month..Date.today.month).times do |a| %>
             <tr>
               <td><%= PayrollDetails.get_month(a.to_s)%></td>
             </tr>
             <% end %> 
```

此代码在 12 月份之前运行良好，但在 1 月份年份更改时它什么也不显示，我收到此错误：

```
undefined method `times' for 4..1:Range 
```

我如何在rails3中解决这个反向范围问题，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T21:35:49.537

看来您没有处理包装盒。有很多方法可以处理它。这是我能想到的最基本的方法：

```
<% (current_financial_year.start_date.month..(Date.today.month < current_financial_year.start_date.month ? Date.today.month+12 : Date.today.month)).times do |a| %>
  <tr>
    <td><%= PayrollDetails.get_month((a%12).to_s)%></td>
  </tr>
<% end %> 
```

这个比较难看。您可能想要创建一个局部变量，`current_month`或者您可以打开`Date`该类并定义一个执行`? :`逻辑的财务月份。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:45:15.467

我同意@Geoff 的回答我已经改变了一点以适应我的情况：

```
 <% for a in (current_financial_year.start_date.month..(Date.today.month < current_financial_year.start_date.month ? Date.today.month+12 : Date.today.month)) %>
             <tr>
               <td><%= PayrollDetail.get_month((a>12? (a -12) : a ).to_s)%></td>
<% end %> 
```

这对我有用。

# ios - 在 iOS 上仅提取视频音频的左声道或右声道

> ID：14290763
> 
> 赞同：3
> 
> 时间：2013-01-12T06:05:57.683
> 
> 标签：ios, xcode, audio

我试图在 iOS 上仅提取视频音频的左声道或右声道。我已经进行了一些研究，但无法真正找到解决方案。有人知道如何实现这个吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-03T09:00:09.307

我相信您可以使用音频单元服务来做到这一点

# vim - 如何将 VimroomToggle 映射到几个动作

> ID：14290765
> 
> 赞同：0
> 
> 时间：2013-01-12T06:06:08.960
> 
> 标签：vim, vim-plugin

我用 vim、markdown 格式写博客文章。我想为 vim 使用很棒的“Vimroom”插件。但插件不做几件事：

1.  它不会取消设置行号
2.  它不会取消设置颜色列

如果我写一篇博客文章，我希望它能够做到这一点。

目前我必须这样做：

```
:VimroomToggle
:set nonumber
:set cc='' 
```

我不能使用 :setlocal，因为它（Vimroom）会生成几个缓冲区来在屏幕中间显示写缓冲区，而这些其他缓冲区也有行号。

我不是高级 vimscript 作家，所以请你帮我解释一下，你在那里做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T09:14:55.683

您无需为此编写脚本。将此行添加到您的`~/.vimrc`应该可以解决问题。

```
nnoremap <leader>v :VimroomToggle \| set nonumber cc=''<cr> 
```

现在，当您想写博客文章时，您只需点击`<leader>v`. 阅读`:h mapleader`有关`<leader>`. 当然，您可以设计自己的快捷方式。

如果您希望*所有*降价文件都没有`number`and `colorcolumn`，您可以将此行添加到您的`~/.vimrc`:

```
autocmd FileType markdown :setlocal nonumber cc='' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T09:43:48.867

`setlocal``set`与for`number`和没有什么不同`cc`。那是因为它们是窗口变量。如果切换到另一个缓冲区，则`cc`和`number`设置保持不变。此外，如果您打开了 2 个窗口，则设置`cc`或`number`仅更改其中一个。

你可以做的是使用`windo`命令，例如：

```
nnoremap <F2> :windo :set nonu cc=""<cr>
nnoremap <F3> :windo :set nu cc=+1<cr> 
```

将更改所有窗口的`nu`and `cc`。我不建议为此使用自动命令，因为如果您在同一窗口中切换到另一个缓冲区，它将具有相同的设置。

# php - 无法使用 require_once 在 symfony 中引用父目录？

> ID：14290768
> 
> 赞同：0
> 
> 时间：2013-01-12T06:06:21.487
> 
> 标签：php, symfony

我正在使用 symfony 并尝试引用父目录中的文件，如下所示：

`require_once('../MyClass.class.php');`

尽管它一直说在我运行任务时找不到文件，但它似乎不起作用。我在我的个人 WAMP 服务器上尝试了相同的代码（而不是通过这个服务器），它不使用 symfony，它运行良好。

我不确定为什么symfony找不到它？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T06:28:38.057

当您`include`使用相对路径时，该路径是相对于“顶级”脚本——即应用程序的入口点——而不是当前正在执行的脚本。

在处理框架时，入口点通常是位于 Web 根目录顶部的一个文件，名为`index.php`. 对于这个例子，我们假设这个文件是`~/application/index.php`.

您的 index.php 文件必须包含来自框架其他部分的文件，并且您可能会尝试在其中之一中执行包含。假设您正在尝试从控制器文件中包含。我们会给它文件名`~/application/controllers/example.php`。

现在，当您这样做时，您*认为*正在发生的事情`include "../MyClass.class.php"`是您认为文件名将比当前正在执行的脚本高一级 - 即您认为由于您在 中`~/application/controllers/example.php`，父目录将是`~/application/controllers`，因此您将包含`~/application/MyClass.class.php`.

*实际上*会发生的是，相对路径将根据入口点的位置来确定`~/application/index.php`，因此父目录将为`~/`，并且 PHP 将尝试包含`~/MyClass.class.php`不存在的文件。

我不知道 Symfony，所以我不知道它的自动加载器是如何工作的，但是你应该能够调用一个框架函数来为你加载你的类。如果您确实必须`include`手动创建文件，那么您需要包含相对于 index.php 文件的文件。大多数框架都有常量（例如`BASEDIR`），您可以使用这些常量轻松生成绝对路径。

您还可以使用两个 PHP 定义的常量：

*   `__FILE__`将为当前正在执行的脚本（不是上面的主/顶级脚本）提供脚本名称，因此您可以使用它`dirname(__FILE__)`来获取当前目录，或者`dirname(dirname(__FILE__))`获取父目录之类的东西。
*   `__DIR__`（对于 PHP >= 5.3.0）将为您提供当前执行脚本的目录，因此您可以使用它`dirname(__DIR__)`来获取父目录。

同样，您的框架可能会为您处理这个问题，但最好知道您何时处理非框架脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T06:14:55.590

你的文件结构是什么？这表明 MyClass.class.php 位于运行此脚本的任何文件的父文件夹中。

此错误表明 MyClass.class.php 不在该指定文件夹中。查看您的数据树结构，您可以从包含运行此脚本的文件的文件夹中创建链接路径；或者你可以从你的主目录直接链接。

# node.js - 在线虚拟主机帐户是否允许客户安装和运行像 node.js 这样的网络服务器？

> ID：14290769
> 
> 赞同：0
> 
> 时间：2013-01-12T06:06:25.747
> 
> 标签：node.js, socket.io, web-hosting

我设计了一个网站，使用 node.js 和 socket.io 作为现场即时消息系统。但是，要运行 node.js，我们需要在 webserver 上运行 node.js 服务器模块，因为我们都知道 node.js 是服务器端 javascript。所以，为此，我需要在网络服务器中安装 node.js 和 socket.io，然后运行 ​​node.js 服务器。像 godaddy.com 或 ipage.com 这样的在线虚拟主机帐户是否允许用户安装东西并运行像 node.js 这样的服务器？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T14:33:35.530

三个最著名的虚拟主机提供商（其中两个在 node.js 中特别受欢迎）

1.  Heroku -[不支持 Websockets](https://devcenter.heroku.com/articles/using-socket-io-with-node-js-on-heroku)。
2.  Nodejitsu -[支持 Websockets](http://nodejitsu.com/paas.html)
3.  亚马逊网络服务 - 也支持 Websockets...

使用它们。互联网上有很多关于如何使用这些服务运行 socket.io 应用程序的资料。我不认为即使 ipage.com 支持 websockets 他们已经记录了它！

[在NodeJS Wiki/Hosting](https://github.com/joyent/node/wiki/Node-Hosting)页面中有一个很好的提供 Websocket 服务的列表！

# regex - 这个正则表达式是什么意思？

> ID：14290770
> 
> 赞同：0
> 
> 时间：2013-01-12T06:06:44.683
> 
> 标签：regex, perl

我有一个正则表达式定义跟随匹配`http urls`，任何人都可以帮助用英语解释？

```
^/foo/.*(?<!\.css|\.js|\.jpg)$ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T06:08:43.133

目录或目录下的任何文件或目录`/foo`不是`css`,`js`或`jpg`文件。

```
^        start of string anchor
/foo/    literal "/foo/"
.*       any number of characters
(?<!...) match from here backwards must fail:
  \.     dot
  css    literal "css"
  |      or
$        end of string anchor 
```

因此，字符串的开头`/foo/`，可能是其他一些字符，然后字符串结束 - 但就在之前，不能是`.css`,`.js`或`.jpg`。

编辑：为固执而道歉。对于大多数引擎，包括 Perl，它确实是一个无效的正则表达式。原因是，负后视必须有固定的宽度；并且这个lookbehind可以是四个字符（在 or 的情况下`.jpg`）`.css`或三个字符（`.js`）。解决方法是在后视中插入一个额外的“匹配任何东西”，以便宽度始终为四：

```
^/foo/.*(?<!\.css|.\.js|\.jpg)$ 
```

有了它，它可以工作：

```
perl -e 'print "/foo/bar" =~ m[^/foo/.*(?<!\.css|.\.js|\.jpg)$];'
=> 1 
```

OP：您对 regexpal.com 的问题在于他们测试 JavaScript 正则表达式，而这些正则表达式根本没有实现否定的后视。正则表达式方言在细节上有所不同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-12T06:19:38.050

您的模式旨在与以下内容匹配：

```
m{^/foo/} && !m{\.(?:css|js|jpg)\z} 
```

这更具可读性，我不需要解释它。与您的模式不同，它还具有实际编译的优势。

```
>perl -c -e"m{^/foo/.*(?<!\.css|\.js|\.jpg)$}"
Variable length lookbehind not implemented in regex m/^/foo/.*(?<!\.css|\.js|\.jpg)$/ at -e line 1. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-12T06:09:01.497

它匹配任何字符串

1.  以一个开头`/foo/`
2.  随随便便
3.  不以`.css`,`.js`或`.jpg`

因此，它匹配根目录`foo`（直接或作为子目录）下的任何不是 CSS、JS 或 JPG 的文件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-12T06:33:53.750

使用 学习正则表达式`YAPE::Regex::Explain`。检查以下代码：

```
#!/usr/bin/perl -w
use strict;
use YAPE::Regex::Explain;
my $regex = '^/foo/.*(?<!\.css|\.js|\.jpg)$';
print YAPE::Regex::Explain->new($regex)->explain(); 
```

输出：

```
The regular expression:

(?-imsx:^/foo/.*(?<!\.css|\.js|\.jpg)$)

matches as follows:

NODE                     EXPLANATION
----------------------------------------------------------------------
(?-imsx:                 group, but do not capture (case-sensitive)
                         (with ^ and $ matching normally) (with . not
                         matching \n) (matching whitespace and #
                         normally):
----------------------------------------------------------------------
  ^                        the beginning of the string
----------------------------------------------------------------------
  /foo/                    '/foo/'
----------------------------------------------------------------------
  .*                       any character except \n (0 or more times
                           (matching the most amount possible))
----------------------------------------------------------------------
  (?<!                     look behind to see if there is not:
----------------------------------------------------------------------
    \.                       '.'
----------------------------------------------------------------------
    css                      'css'
----------------------------------------------------------------------
   |                        OR
----------------------------------------------------------------------
    \.                       '.'
----------------------------------------------------------------------
    js                       'js'
----------------------------------------------------------------------
   |                        OR
----------------------------------------------------------------------
    \.                       '.'
----------------------------------------------------------------------
    jpg                      'jpg'
----------------------------------------------------------------------
  )                        end of look-behind
----------------------------------------------------------------------
  $                        before an optional \n, and the end of the
                           string
----------------------------------------------------------------------
)                        end of grouping
---------------------------------------------------------------------- 
```

# python - createMenuItem() 最多接受 6 个参数（给定 14 个）

> ID：14290772
> 
> 赞同：0
> 
> 时间：2013-01-12T06:07:03.000
> 
> 标签：python, wxpython, typeerror, menubar

我正在尝试使用 Dunn 重构的 Menubar 代码，但总是遇到问题。这是代码：

```
#!/usr/bin/env python

import wx

class Darkscreen(wx.Frame):

    def __init__(self, parent, id):
        style = wx.DEFAULT_FRAME_STYLE
        wx.Frame.__init__(self, parent, id, 'Darkscreen10b1', size=(340, 200), style=style)
        panel = wx.Panel(self, -1)
        panel.SetBackgroundColour("Black")
        self.Bind(wx.EVT_CLOSE, self.OnCloseWindow)
        self.createMenuBar()
        self.Centre()

    def menuData(self):
        return [("&File", (
                    ("&Quit\tCtrl+Q", "Quit", self.OnCloseWindow))),
                ("&Color", (
                    ("&Black", "", self.OnBlack, wx.ITEM_RADIO),
                    ("&White", "", self.OnWhite, wx.ITEM_RADIO),
                    ("&Red", "", self.OnRed, wx.ITEM_RADIO),
                    ("&Green", "", self.OnGreen, wx.ITEM_RADIO),
                    ("&Blue", "", self.OnBlue, wx.ITEM_RADIO)))]

    def createMenuBar(self):
        menuBar = wx.MenuBar()
        for eachMenuData in self.menuData():
            menuLabel = eachMenuData[0]
            menuItems = eachMenuData[1]
            menuBar.Append(self.createMenu(menuItems), menuLabel)
        self.SetMenuBar(menuBar)

    def createMenu(self, menuData):
        menu = wx.Menu()
        for eachItem in menuData:
            if len(eachItem) == 2:
                label = eachItem[0]
                subMenu = self.createMenu(eachItem[1])
                menu.AppendMenu(wx.NewId(), label, subMenu)
            else:
                self.createMenuItem(menu, *eachItem)
        return menu

    def createMenuItem(self, menu, label, status, handler, kind=wx.ITEM_NORMAL):
        if not label:
            menu.AppendSeparator()
            return
        menuItem = menu.Append(-1, label, status, kind)
        self.Bind(wx.EVT_MENU, handler, menuItem)

    def OnBlack(self, event):
        panel.SetBackgroundColour("Black")
    def OnWhite(self, event):
        panel.SetBackgroundColour("White")
    def OnRed(self, event):
        panel.SetBackgroundColour("Red")
    def OnGreen(self, event):
        panel.SetBackgroundColour("Green")
    def OnBlue(self, event):
        panel.SetBackgroundColour("Blue")
    def OnCloseWindow(self, event):
        self.Destroy()

if __name__ == '__main__':
    app = wx.App(redirect=True, filename="dserr.txt")
    frame = Darkscreen(parent=None, id=-1)
    frame.Show()
    app.MainLoop() 
```

这是错误：

```
Traceback (most recent call last):
  File "L:\Rodney's\Development\Python\Working\darkscreen\darkscreen.py", line 67, in <module>
    frame = Darkscreen(parent=None, id=-1)
  File "L:\Rodney's\Development\Python\Working\darkscreen\darkscreen.py", line 13, in __init__
    self.createMenuBar()
  File "L:\Rodney's\Development\Python\Working\darkscreen\darkscreen.py", line 31, in createMenuBar
    menuBar.Append(self.createMenu(menuItems), menuLabel)
  File "L:\Rodney's\Development\Python\Working\darkscreen\darkscreen.py", line 42, in createMenu
    self.createMenuItem(menu, *eachItem)
TypeError: createMenuItem() takes at most 6 arguments (14 given) 
```

我已经在脑海中按照此代码进行了数十次，但我无法弄清楚出了什么问题。我在 menuData 对象的任何地方添加和删除了括号，但无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T10:55:35.367

问题以[括号形式](http://docs.python.org/2/reference/expressions.html#parenthesized-forms)显示：

> 带括号的表达式列表产生该表达式列表产生**的任何内容：如果列表包含至少一个逗号，则产生一个元组；否则，它会产生构成表达式 list 的单个表达式**。

另请参阅此示例：

```
>>> for x in ('hello'):  
...     print x
... 
h
e
l
l
o 
```

添加逗号创建一个元组：

```
>>> for x in ('hello',):
...     print x
... 
hello 
```

您的第一个列表项内容如下：

```
("&File", (("&Quit\tCtrl+Q", "Quit", self.OnCloseWindow) )
#                                                       ^-- no comma here 
```

因此，您的代码需要一个可迭代的，但由于缺少逗号，它开始迭代字符串值`"&Quit\tCtrl+Q"`（14 个字符）。在指示的位置添加逗号会创建一个元组并修复您的代码。

# iphone - NSInternalInconsistencyException 这个 NSPersistentStoreCoordinator 没有持久存储

> ID：14290773
> 
> 赞同：2
> 
> 时间：2013-01-12T06:07:04.060
> 
> 标签：iphone, core-data, ios6, nspersistentdocument

我正在初始化我的模型。如果本地数据库不存在，那么我查询我的后端服务器以检索数据并存储在核心数据中（第一个 if 语句）。但是当我尝试保存时出现**“NSInternalInconsistencyException 这`NSPersistentStoreCoordinator`没有持久存储”**`[self.gameDB saveToURL:self.gameDB.fileURL forSaveOperation:UIDocumentSaveForOverwriting completionHandler:NULL]`异常（即）

```
- (void)setUpGameModel
{

    if (!self.gameDB) {
        NSURL *url = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
        url = [url URLByAppendingPathComponent:@"GameDatabase"];
        self.gameDB = [[UIManagedDocument alloc] initWithFileURL:url];
    }

    if (![[NSFileManager defaultManager] fileExistsAtPath:[self.gameDB.fileURL path]]) {
       // does not exist on disk, so create it

        dispatch_queue_t fetchQ = dispatch_queue_create("New Game Fetcher", NULL);

        dispatch_async(fetchQ, ^{
            [self.gameDB.managedObjectContext performBlock:^{ // perform in the NSMOC's safe thread (main thread)
                [Game queryGameFromServerWithLevel:@"1" inManagedObjectContext:self.gameDB.managedObjectContext];
                [self.gameDB saveToURL:self.gameDB.fileURL forSaveOperation:UIDocumentSaveForOverwriting completionHandler:NULL];
            }];
        });

    } else if (self.gameDB.documentState == UIDocumentStateClosed) {
    // exists on disk, but we need to open it
        [self.gameDB openWithCompletionHandler:^(BOOL success) {
           [Game queryGameWithLevel:@"1" inManagedObjectContext:self.gameDB.managedObjectContext];
        }];
    } else if (self.gameDB.documentState == UIDocumentStateNormal) {
        // already open and ready to use
        [Game queryGameWithLevel:@"1" inManagedObjectContext:self.gameDB.managedObjectContext];
    }

} 
```

# c# - 计算两个日期之间的日历月数

> ID：14290776
> 
> 赞同：1
> 
> 时间：2013-01-12T06:07:38.503
> 
> 标签：c#, date, datetime, timespan

我正在用 C# 开发一个兴趣计算器。我需要知道 2 之间的天数`dates`

所以，我正在计算这样的东西：

```
 DateTime dt1 = DateTime.ParseExact(DateTime.Now.Date.ToString("dd-MM-yy"), "dd-MM-yy", CultureInfo.InvariantCulture).Date;
    DateTime dt2 = DateTime.ParseExact(Duration, "dd-MM-yy", CultureInfo.InvariantCulture).Date;

    Double no_days = (dt1 - dt2).TotalDays; 
```

但是，根据月份的不同，天数会有所不同。因此，即使天数少于 30，2 月 15 日至 3 月 15 日也构成一个月。

知道如何确定经过的月数吗？利息计算在月末进行。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T06:23:51.107

我想不出比这更干净的方法：

```
((dt1.Year - dt2.Year) * 12) + (dt1.Month - dt2.Month) - (dt1.Day < dt2.Day?1:0); 
```

即使那样，我也不确定我是否错过了一些边缘情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-07T18:47:50.407

对此没有很多明确的答案，因为您总是在假设事情。

此解决方案计算两个日期之间的月份，假设您要保存月份中的某天以进行比较，（意味着在计算中考虑了该月的某天）

例如，如果您的日期为 2012 年 1 月 30 日，则 2012 年 2 月 29 日不是一个月，而是 2013 年 3 月 1 日。

它已经过非常彻底的测试，可能会在我们使用它的时候清理它，但是在这里：

```
private static int TotalMonthDifference(DateTime dtThis, DateTime dtOther)
{
    int intReturn = 0;
    bool sameMonth = false;

    if (dtOther.Date < dtThis.Date) //used for an error catch in program, returns -1
        intReturn--;

    int dayOfMonth = dtThis.Day; //captures the month of day for when it adds a month and doesn't have that many days
    int daysinMonth = 0; //used to caputre how many days are in the month

    while (dtOther.Date > dtThis.Date) //while Other date is still under the other
    {
        dtThis = dtThis.AddMonths(1); //as we loop, we just keep adding a month for testing
        daysinMonth = DateTime.DaysInMonth(dtThis.Year, dtThis.Month); //grabs the days in the current tested month

        if (dtThis.Day != dayOfMonth) //Example 30 Jan 2013 will go to 28 Feb when a month is added, so when it goes to march it will be 28th and not 30th
        {
            if (daysinMonth < dayOfMonth) // uses day in month max if can't set back to day of month
                dtThis.AddDays(daysinMonth - dtThis.Day);
            else
                dtThis.AddDays(dayOfMonth - dtThis.Day);
        }
        if (((dtOther.Year == dtThis.Year) && (dtOther.Month == dtThis.Month))) //If the loop puts it in the same month and year
        {
            if (dtOther.Day >= dayOfMonth) //check to see if it is the same day or later to add one to month
                intReturn++;
            sameMonth = true; //sets this to cancel out of the normal counting of month
        }
        if ((!sameMonth)&&(dtOther.Date > dtThis.Date))//so as long as it didn't reach the same month (or if i started in the same month, one month ahead, add a month)
            intReturn++;
    }
    return intReturn; //return month
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T16:19:36.340

我最终编写了自己的例程。我希望它会帮助别人。让我知道是否有更简单的方法来计算两个日期之间的月份。

```
DateTime dt1 = DateTime.ParseExact(DateTime.Now.Date.ToString("dd-MM-yy"), "dd-MM-yy", CultureInfo.InvariantCulture).Date;
DateTime dt2 = DateTime.ParseExact(Duration, "dd-MM-yy", CultureInfo.InvariantCulture).Date;

DateTime temp = dt2;
int no_months = 0;
while ((dt1 - temp).TotalDays > 0)
{
    temp = temp.AddMonths(1);
    no_months++;
}

if (no_months > 0)
{
    no_months = no_months - 1;
} 
```

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-12T13:31:46.387

```
int MonthsElapsed = ((DateB.AddDays(1).Year - DateA.AddDays(1).Year) * 12) +
                    (DateB.AddDays(1).Month - DateA.AddDays(1).Month) -
                    (DateB.AddDays(1).Day < DateA.AddDays(1).Day ? 1 : 0); 
```

这个公式做了一些假设：

1.  整月是 DateA 的日期和未来月份的同一天之间的跨度。（例如，1/15-2/15 = 1 个月，1/15-3/15 = 2 个月等）我们将其称为触发日期。
2.  任何不包含触发日期的月份的最后一天都相当于触发日期。（1/28...1/31 到 2/28 都相当于 1 个月。）
3.  第一个经过的月份发生在 1 个整月过去之后。（当我进行利息计算时，第一个月的利息是在 DateA 上产生的，所以我在这个公式中加了 1。）

.AddDays(1) 用于说明 DateB 不包含触发日期的月末方案。我想不出一种更优雅的在线方法来解释这一点。

# java - 这两种类初始化方法有什么区别？

> ID：14290777
> 
> 赞同：0
> 
> 时间：2013-01-12T06:07:51.930
> 
> 标签：java, android

我是安卓新手。有人可以解释这两种类初始化方法之间的区别吗？

```
jamba = new JambaApplication(); 
jamba = (JambaApplication)  getApplication(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T06:12:29.087

创建一个新的 Jamba Application 实例并将其分配给 Jamba (= new JambaApplication())，

然后获取当前应用程序（或 getApplication() 返回的任何内容）并将其转换为 JambaApplication（这可能会引发转换错误），并将其分配给 Jamba。

你应该学习一些java，因为这是基本的java。

# jquery - 如何创建一个跟随并在滚动时添加徽标的导航栏？

> ID：14290788
> 
> 赞同：1
> 
> 时间：2013-01-12T06:09:29.997
> 
> 标签：jquery, navigation, scroll

你如何重新创建一个导航栏，就像在[这里找到的那​​样](http://zendesk.com)

在这里，如果您滚动，导航栏不仅会在顶部跟随您，而且公司的符号也会淡入导航栏中。

有人可以帮助或指导我正确的方向吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T06:45:19.870

我创建了这个：

## [jsBin 演示](http://jsbin.com/oxajeq/3/edit)

jQuery：

```
var navPos = $('#nav').offset().top;

$(window).scroll(function(){

  var fixIT = $(this).scrollTop() >= navPos;
  var setPos = fixIT ? 'fixed' : 'relative' ;
  var logoSH = fixIT ? 'show' : 'hide' ;

  $('#nav').css({position: setPos});
  $('#mini-logo')[logoSH](300);

}); 
```

HTML：

```
 <div id="header">

   <h1>Company logo</h1>

   <div id="navigation">
     <ul id="nav">
       <li id="mini-logo"><a href="#">LOGO</a></li>
       <li><a href="#">PRODUCT</a></li>
       <li><a href="#">RESOURCES</a></li>
       <li><a href="#">CUSTOMERS</a></li>
       <li><a href="#">SUPPORT</a></li>
       <li><a href="#">COMPANY</a></li>
     </ul>
   </div>

  </div> 
```

CSS：

```
#header{
  background:#eee;
}

#header h1{
  padding:20px;
}

#navigation{
  height:40px;
}
#nav{
  position:relative;
  top:0;
  width:100%;
  list-style:none;
  background:#76A000;
  height:40px;
}

#nav li{  
  float:left;  
}
#nav a{
 text-decoration:none;
  display:block;
  padding:10px 10px;
  color:#fff;
}

#nav li#mini-logo{
  display:none;
  font-weight:bold;
} 
```

诀窍是获取我们的位置，`#nav`如果位置小于 ，则滚动页面会做一些事情`window scrollTop`。
为了达到那种平滑的效果，你必须确保你有一个替换元素，`#nav`一旦我们设置它的位置`fixed`来防止“跳跃”效果。
该元素是与子元素具有相同高度`nav`的父元素。`#navigation`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T06:43:27.470

这就是您正在寻找的滚动部分

[http://pmbennett.net/2010/02/09/fixed-scrolling-navigation/](http://pmbennett.net/2010/02/09/fixed-scrolling-navigation/)

淡入徽标只需使用： [http ://api.jquery.com/fadeIn/](http://api.jquery.com/fadeIn/)

在 else { } 内

# python - 用于打开 Visual Studio 并构建项目的 python 脚本

> ID：14290792
> 
> 赞同：0
> 
> 时间：2013-01-12T06:10:21.660
> 
> 标签：python, wxpython

我已经为 svn checkout 开发了一个使用 wxpython 的 GUI。现在我需要构建签出的代码。我需要编写一个脚本来调用 Visual Studio 并构建代码并显示创建的 msi。所有上述操作都应该发生在一个单一的单击 GUI 中的按钮。请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T06:13:46.070

您应该考虑运行[MSBuild](http://msdn.microsoft.com/en-us/library/vstudio/dd393574.aspx)，而不是费尽心思去自动化 Visual Studio。

# google-maps - 带有邮政编码的谷歌地图街景

> ID：14290794
> 
> 赞同：3
> 
> 时间：2013-01-12T06:10:47.737
> 
> 标签：google-maps, postal-code

我正在尝试在护目镜街道地图中应用新加坡邮政编码。我在位置变量中传递邮政编码，但是当我更改邮政编码时，地图位置无法更改。不知道我哪里错了。请帮忙。这是新加坡的一些邮政编码：189969、189927 这是我的代码

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title></title>
<script type='text/javascript' src='mootools-core-1.3.2.js'></script>
<link rel="stylesheet" type="text/css" href="/css/normalize.css">
<style type='text/css'>
#map_canvas {
    background:#ccc;
    height:400px;
    width:100%;
}
</style>
<script type='text/javascript'>//<![CDATA[ 
window.addEvent('load', function() {
var map;
var geocoder = new google.maps.Geocoder();
var latlng = new google.maps.LatLng(1.280095,103.850949);

var panoramaOptions = {
    position: latlng,
};
map = new google.maps.StreetViewPanorama(document.getElementById('map_canvas'),panoramaOptions);

var locations = ['189969'];
function codeAddress(locations) {
    for (i = 0; i < locations.length; i++) {
        geocoder.geocode( { 'address': locations[i]}, function(results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                map.setCenter(results[0].geometry.location);
                var marker = new google.maps.Marker({
                    map: map, 
                    position: results[0].geometry.location
                });
            } else {
                alert("Geocode was not successful for the following reason: " + status);
            }
        });
    }

}
codeAddress(locations);
});//]]>  
</script>
</head>
<body>
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
<div id="map_canvas">map</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T14:35:38.843

修改您的代码，`map`使其成为`google.maps.Map`-object。

当您想显示地图的街景时（`geocoder.geocode()`例如在回调中），您必须：

1.  设置街景的位置
2.  设置街景的可见性

例子：

```
map.streetView.setPosition(results[0].geometry.location);
map.streetView.setVisible(true); 
```

演示：http: [**//jsfiddle.net/doktormolle/7J4G6/**](http://jsfiddle.net/doktormolle/7J4G6/)

有更多选项可以控制街景（例如，我建议检查给定位置是否有街景），但以上两条线都是最低要求。

# c++ - 为什么不允许通过检索到的指向其数据的指针来修改字符串？

> ID：14290795
> 
> 赞同：25
> 
> 时间：2013-01-12T06:10:48.187
> 
> 标签：c++, string, c++11, buffer, language-lawyer

在 C++11 中，a 的字符`std::string`必须连续存储，如第 21.4.1/5 节指出的那样：

> basic_string 对象中的类字符对象应连续存储。也就是说，对于任何 basic_string 对象 s，标识 &*(s.begin() + n) == &*s.begin() + n 应适用于所有 n 值，使得 0 <= n < s.size ()。

然而，这里是第 21.4.7.1 节如何列出两个函数来检索指向底层存储的指针（强调我的）：

> const charT* c_str() const noexcept;
> const charT* data() const noexcept;
> 1 返回： 一个指针 p 使得 p + i == &operator[](i) 对于 [0,size()] 中的每个 i。
> 2 复杂性：恒定的时间。
> **3 要求：程序不得更改存储在字符数组中的任何值。**

对于第 3 点，我能想到的一种可能性是指针可能会因对象的以下用途而失效（第 21.4.1/6 节）：

*   作为任何标准库函数的参数，将非常量 basic_string 的引用作为参数。
*   调用非 const 成员函数，除了 operator[]、at、front、back、begin、rbegin、end 和 rend。

即便如此，迭代器可能会失效，但我们仍然可以修改它们，直到它们失效。我们仍然可以使用指针，直到它也无法从缓冲区中读取。

为什么我们不能直接写入这个缓冲区？是不是因为它会使类处于不一致的状态，例如，`end()`不会用新的结尾来更新？如果是这样，为什么允许直接写入类似的缓冲区`std::vector`？

用例包括能够将 a 的缓冲区传递`std::string`给 C 接口以检索字符串，而不是传入 a`vector<char>`并使用迭代器初始化字符串：

```
std::string text;
text.resize(GetTextLength());
GetText(text.data()); 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-12T07:14:32.810

> 为什么我们不能直接写入这个缓冲区？

我将说明明显的一点：因为它是`const`. 抛弃一个`const`值然后修改该数据是……粗鲁的。

现在，为什么会这样`const`？这可以追溯到写时复制被认为是一个好主意的时代，因此`std::basic_string`必须允许实现来支持它。获得一个指向字符串的不可变指针（例如，用于传递给 C-API）而不会产生副本开销是非常有用*的*。所以`c_str`需要返回一个`const`指针。

至于为什么*还在* `const`？嗯......这在标准中出现了一个奇怪的东西：空终止符。

这是合法的代码：

```
std::string stupid;
const char *pointless = stupid.c_str(); 
```

`pointless`必须是一个以 NUL 结尾的字符串。具体来说，它必须是指向 NUL 字符的指针。那么 NUL 字符是从哪里来的呢？实现有几种方法`std::string`可以让它工作：

1.  使用小字符串优化，这是一种常用技术。在此方案中，每个`std::string`实现都有一个内部缓冲区，可用于单个 NUL 字符。
2.  返回指向*静态内存*的指针，其中包含 NUL 字符。因此，如果它是一个空字符串，每个`std::string`实现都将返回*相同的指针。*

不应强迫每个人都实施 SSO。所以标准委员会需要一种方法来保持#2 的存在。其中一部分是给你一个`const`来自`c_str()`. 而且由于这个内存可能是*真实的* `const`，而不是假的“请不要修改这个内存`const`”，给你一个指向它的可变指针是一个坏主意。

当然，你仍然可以通过do获得这样的指针`&str[0]`，但是标准非常明确，[修改NUL终止符是一个坏主意](https://stackoverflow.com/questions/12740403/legal-to-overwrite-stdstrings-null-terminator)。

现在，话虽如此，修改指针和其中的字符数组是*完全有效的。*`&str[0]`只要您保持在半开范围 [0, `str.size()`) 内。你只是不能通过`data`or返回的指针来做到这一点`c_str`。是的，即使标准实际上*要求* `str.c_str() == &str[0]`是真实的。

这对你来说是标准的。

# python - Photoshop 操作脚本失败

> ID：14290799
> 
> 赞同：1
> 
> 时间：2013-01-12T06:11:09.703
> 
> 标签：python, pydev, photoshop, win32com

我正在尝试编写一个脚本来应用 Photoshop 滤镜。我在看[这个博客](http://techarttiki.blogspot.com/2008/08/photoshop-scripting-with-python.html)，它似乎有一些很好的建议，但是当我尝试基本示例（如下所列）时，我收到以下错误。

```
Traceback (most recent call last):
  File "C:\Users\Daniel\EclipseWorkspace\PhotoScript\src\scriptLaunch.py", line 3, in <module>
    psApp = win32com.client.Dispatch("Photoshop.Application")
  File "C:\Python27\lib\site-packages\win32com\client\__init__.py", line 95, in Dispatch
    dispatch, userName = dynamic._GetGoodDispatchAndUserName(dispatch,userName,clsctx)
  File "C:\Python27\lib\site-packages\win32com\client\dynamic.py", line 108, in _GetGoodDispatchAndUserName
    return (_GetGoodDispatch(IDispatch, clsctx), userName)
  File "C:\Python27\lib\site-packages\win32com\client\dynamic.py", line 85, in _GetGoodDispatch
    IDispatch = pythoncom.CoCreateInstance(IDispatch, None, clsctx, pythoncom.IID_IDispatch)
pywintypes.com_error: (-2147221005, 'Invalid class string', None, None) 
```

我不知道是什么导致了这个问题。[该解决方案](https://stackoverflow.com/questions/5964805/implement-com-interface-type-library-in-python)已经实施，所以我不知道该怎么做。我在 PyDev 和 Photoshop Elements 10 上运行 python 2.7。

我的代码：

```
import win32com.client

psApp = win32com.client.Dispatch("Photoshop.Application") //the line causing the error

psApp.Open(r"D:\temp\blah.psd")         # Opens a PSD file
doc = psApp.Application.ActiveDocument  # Get active document object
layer = doc.ArtLayers[0]                # Get the bottom-most layer
layer.AdjustBrightnessContrast(20,-15)  # Bright +20, Contrast -15
doc.Save() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T19:49:29.000

我很确定 Photoshop API 仅适用于 Photoshop CSx 版本，而不适用于“元素”。我认为这是说该类不可用，因为您没有必要的 .dll （或者如果您使用的是 mac，则为任何等价物）。[http://www.adobe.com/devnet/photoshop/sdk.html](http://www.adobe.com/devnet/photoshop/sdk.html)

# android - 使用 GestureDetector 时出现 NullPointerException

> ID：14290802
> 
> 赞同：3
> 
> 时间：2013-01-12T06:11:33.447
> 
> 标签：android, android-animation, gesture

下面是在发生不同事件时为两个不同图像加载帧动画的代码。第一个事件是活动开始时。其他是`onTouch()`我使用的地方`GestureDetector`和`onDown()`问题`onScroll()`是我`NullPointerException`在它中得到的`OnScroll()`。我发现它没有得到 Y 坐标可能是什么问题。

```
package com.example.animationtry;

import android.os.Bundle;
import android.app.Activity;
import android.graphics.drawable.AnimationDrawable;
import android.util.Log;
import android.view.GestureDetector;
import android.view.MotionEvent;
import android.view.View;
import android.view.GestureDetector.SimpleOnGestureListener;
import android.widget.ImageView;

public class MainActivity extends Activity
{
    ImageView img,img1;
    AnimationDrawable animation;
    private GestureDetector gestureDetector;

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        img=(ImageView)findViewById(R.id.image);
        img.post(new Runnable()
        {
            public void run()
            {
                img.setBackgroundResource(R.anim.frameanimation);
                AnimationDrawable frameAnimation =  (AnimationDrawable) img .getBackground();
                frameAnimation.setVisible(false, true);
                frameAnimation.start();
            }
        });
        img.setOnTouchListener(new View.OnTouchListener() 
        {
            public boolean onTouch(View v, MotionEvent event) 
            {
                String img="img";
                gestureDetector = new GestureDetector(new MyGestureDetector(img));
                if (gestureDetector.onTouchEvent(event)) 
                {
                    return true;
                }   
                return false;
            }
        });

        img1=(ImageView)findViewById(R.id.image1);
        img.post(new Runnable()
        {
            public void run()
            {
                img1.setBackgroundResource(R.anim.frameanimation);
                AnimationDrawable frameAnimation =  (AnimationDrawable) img1.getBackground();
                frameAnimation.setVisible(false, true);
                frameAnimation.start();
            }
        });
        img1.setOnTouchListener(new View.OnTouchListener() 
        {
            public boolean onTouch(View v, MotionEvent event) 
            {
                String img1="img1";
                gestureDetector = new GestureDetector(new MyGestureDetector(img1));
                if (gestureDetector.onTouchEvent(event)) 
                {
                    return true;
                }   
                return false;
            }
        });
    }

    class MyGestureDetector extends SimpleOnGestureListener
    {
        private static final int SWIPE_MAX_OFF_PATH = 40;
        private static final int SWIPE_THRESHOLD_VELOCITY = 30;
        String viewname;
        public MyGestureDetector(String view)
        {
            viewname=view;
        }

        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,float velocityY) 
        {
            return true;
        }
        @Override
        public boolean onDown(MotionEvent e) 
        {
            Log.i("View Name",viewname);
            if(viewname.equalsIgnoreCase("img"))
            {
                img.setBackgroundResource(R.anim.clickanimation);
                animation = (AnimationDrawable)img.getBackground();
                animation.setVisible(false, true);
                animation.start();
            }
            else if(viewname.equalsIgnoreCase("img1"))
            {
                img1.setBackgroundResource(R.anim.clickanimation);
                animation = (AnimationDrawable)img1.getBackground();
                animation.setVisible(false, true);
                animation.start();
            }
            return true;
        }

        @Override
        public boolean onScroll(MotionEvent e1, MotionEvent e2,float distanceX, float distanceY) 
        {
            Log.i("y1",Float.toString(e1.getY()));
            Log.i("y2",Float.toString(e2.getY()));
            Log.i("Drag View Name",viewname);
            if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH && Math.abs(distanceY) > SWIPE_THRESHOLD_VELOCITY) 
            {
                if(viewname.equalsIgnoreCase("img"))
                {
                    img.setBackgroundResource(R.anim.draganimaton);
                    animation = (AnimationDrawable)img.getBackground();
                    animation.setVisible(false, true);
                    animation.start();
                }
                else if(viewname.equalsIgnoreCase("img1"))
                {
                    img1.setBackgroundResource(R.anim.draganimaton);
                    animation = (AnimationDrawable)img1.getBackground();
                    animation.setVisible(false, true);
                    animation.start();
                }
                return true;
            }
            return true;
        }
    }
} 
```

以下是logcat：

```
01-12 06:12:22.637: E/AndroidRuntime(1062): FATAL EXCEPTION: main
01-12 06:12:22.637: E/AndroidRuntime(1062): java.lang.NullPointerException
01-12 06:12:22.637: E/AndroidRuntime(1062):     at com.example.animationtry.MainActivity$MyGestureDetector.onScroll(MainActivity.java:117)
01-12 06:12:22.637: E/AndroidRuntime(1062):     at android.view.GestureDetector.onTouchEvent(GestureDetector.java:541)
01-12 06:12:22.637: E/AndroidRuntime(1062):     at com.example.animationtry.MainActivity$4.onTouch(MainActivity.java:69)
01-12 06:12:22.637: E/AndroidRuntime(1062):     at android.view.View.dispatchTouchEvent(View.java:3881)
01-12 06:12:22.637: E/AndroidRuntime(1062):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
01-12 06:12:22.637: E/AndroidRuntime(1062):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
01-12 06:12:22.637: E/AndroidRuntime(1062):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
01-12 06:12:22.637: E/AndroidRuntime(1062):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
01-12 06:12:22.637: E/AndroidRuntime(1062):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1691)
01-12 06:12:22.637: E/AndroidRuntime(1062):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1125)
01-12 06:12:22.637: E/AndroidRuntime(1062):     at android.app.Activity.dispatchTouchEvent(Activity.java:2096)
01-12 06:12:22.637: E/AndroidRuntime(1062):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1675)
01-12 06:12:22.637: E/AndroidRuntime(1062):     at android.view.ViewRoot.deliverPointerEvent(ViewRoot.java:2194)
01-12 06:12:22.637: E/AndroidRuntime(1062):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1878)
01-12 06:12:22.637: E/AndroidRuntime(1062):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-12 06:12:22.637: E/AndroidRuntime(1062):     at android.os.Looper.loop(Looper.java:123)
01-12 06:12:22.637: E/AndroidRuntime(1062):     at android.app.ActivityThread.main(ActivityThread.java:3683)
01-12 06:12:22.637: E/AndroidRuntime(1062):     at java.lang.reflect.Method.invokeNative(Native Method)
01-12 06:12:22.637: E/AndroidRuntime(1062):     at java.lang.reflect.Method.invoke(Method.java:507)
01-12 06:12:22.637: E/AndroidRuntime(1062):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-12 06:12:22.637: E/AndroidRuntime(1062):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-12 06:12:22.637: E/AndroidRuntime(1062):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T08:31:47.967

我遇到了`e1.getY()`返回 null 值的问题，`onScroll()`因此我删除了该检查部分并仅检查`SWIPE_MAX_OFF_PATH`了`distanceY`the `onScroll()`，现在它可以正常工作了..

```
package com.example.animationtry;

import android.os.Bundle;
import android.app.Activity;
import android.graphics.drawable.AnimationDrawable;
import android.util.Log;
import android.view.GestureDetector;
import android.view.MotionEvent;
import android.view.View;
import android.view.GestureDetector.SimpleOnGestureListener;
import android.widget.ImageView;

public class MainActivity extends Activity
{
    ImageView img,img1;
    AnimationDrawable animation;
    private GestureDetector gestureDetector;
    private static final int SWIPE_MAX_OFF_PATH = 40;
    private static final int SWIPE_THRESHOLD_VELOCITY = 30;

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        img=(ImageView)findViewById(R.id.image);
        img.post(new Runnable()
        {
            public void run()
            {
                img.setBackgroundResource(R.anim.frameanimation);
                AnimationDrawable frameAnimation =  (AnimationDrawable) img .getBackground();
                frameAnimation.setVisible(false, true);
                frameAnimation.start();
            }
        });
        img.setOnTouchListener(new View.OnTouchListener() 
        {
            public boolean onTouch(View v, MotionEvent event) 
            {
                String img="img";
                gestureDetector = new GestureDetector(new MyGestureDetector(img));
                if (gestureDetector.onTouchEvent(event)) 
                {
                    return true;
                }   
                return false;
            }
        });

        img1=(ImageView)findViewById(R.id.image1);
        img.post(new Runnable()
        {
            public void run()
            {
                img1.setBackgroundResource(R.anim.frameanimation);
                AnimationDrawable frameAnimation =  (AnimationDrawable) img1.getBackground();
                frameAnimation.setVisible(false, true);
                frameAnimation.start();
            }
        });
        img1.setOnTouchListener(new View.OnTouchListener() 
        {
            public boolean onTouch(View v, MotionEvent event) 
            {
                String img1="img1";
                gestureDetector = new GestureDetector(new MyGestureDetector(img1));
                if (gestureDetector.onTouchEvent(event)) 
                {
                    return true;
                }   
                return false;
            }
        });
    }

    class MyGestureDetector extends SimpleOnGestureListener
    {
        String viewname;
        public MyGestureDetector(String view)
        {
            viewname=view;
        }

        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,float velocityY) 
        {

            return true;
        }
        @Override
        public boolean onDown(MotionEvent e) 
        {
            Log.i("View Name",viewname);
            if(viewname.equalsIgnoreCase("img"))
            {
                img.setBackgroundResource(R.anim.clickanimation);
                animation = (AnimationDrawable)img.getBackground();
                animation.setVisible(false, true);
                animation.start();
            }
            else if(viewname.equalsIgnoreCase("img1"))
            {
                img1.setBackgroundResource(R.anim.clickanimation);
                animation = (AnimationDrawable)img1.getBackground();
                animation.setVisible(false, true);
                animation.start();
            }
            return true;
        }

        @Override
        public boolean onScroll(MotionEvent e1, MotionEvent e2,float distanceX, float distanceY) 
        {           
            Log.i("Drag View Name",viewname);
            if (Math.abs(distanceY)>SWIPE_MAX_OFF_PATH) 
            {
                Log.i("inside","drag");
                if(viewname.equalsIgnoreCase("img"))
                {
                    img.setBackgroundResource(R.anim.draganimaton);
                    animation = (AnimationDrawable)img.getBackground();
                    animation.setVisible(false, true);
                    animation.start();
                }
                else if(viewname.equalsIgnoreCase("img1"))
                {
                    img1.setBackgroundResource(R.anim.draganimaton);
                    animation = (AnimationDrawable)img1.getBackground();
                    animation.setVisible(false, true);
                    animation.start();
                }
            }
            return true;
        }
    }
} 
```

# jquery - Jquery翻转悬停

> ID：14290804
> 
> 赞同：0
> 
> 时间：2013-01-12T06:11:44.913
> 
> 标签：jquery, hover, flip

这是我的代码：

```
'$(".hoverfront").mouseenter(function () {'
   var elem = $(this);
   elem.flip({
      direction: 'lr',
      color: 'red',
      speed: 700,
      content: $(".description"),
   onBefore: function(){
      $(this).removeClass('hoverfront');
      $(this).addClass('back');
   }
  });
}).mouseleave(function () {
      $(".back").revertFlip();
}); 
```

[http://jsfiddle.net/mornaistar/eHfUa/](http://jsfiddle.net/mornaistar/eHfUa/)

我的点击事件运作良好，但我的悬停事件只是让我头晕目眩，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T06:54:37.293

更新了您的代码。在此处查看[JSFiddle 演示](http://jsfiddle.net/eHfUa/15/)

```
var isHover = false;
$(".hoverfront").mouseenter(function () {
  if (isHover == false) {
    isHover = true;
    var elem = $(this);
    elem.flip({
      direction: 'lr',
      color: 'red',
      speed: 700,
      content: $(".description"),
      onBefore: function () {
        elem.removeClass('hoverfront');
        elem.addClass('back');
      }
    });
  }
}).mouseleave(function () {
  var $this = $(this);
  $this.revertFlip();
  $this.removeClass('back');
  $this.addClass('hoverfront');
  isHover = false;
}); 
```

问题是

1.  您没有在之后恢复课程`revertFlip`
2.  悬停应该只执行一次。（我为此使用了一个变量）

# requirejs - RequireJS AMD 项目具有外部而不是单文件 amd 依赖项

> ID：14290805
> 
> 赞同：2
> 
> 时间：2013-01-12T06:11:48.310
> 
> 标签：requirejs, amd

因为我想灵活一点，所以我想创建 3 个单独的小型 JavaScript RequireJS AMD 项目（utils、mvc、widgets）。我不希望他们参与一个大型项目。它们不应该是独立执行的，只是为了以后集成到其他项目中。

在此之后我想创建一个 Web 应用程序，前端应该是一个 JavaScript RequireJS AMD 项目。我想在我的网络应用程序项目中使用这 3 个独立的 AMD 项目作为外部依赖项。

到目前为止，我在 requirejs amd 项目（例如 AMD 版本的 Backbone.js）中使用的唯一外部 AMD 依赖项是单个连接文件，而不是包含许多小文件的项目。

有人可以告诉我如何在这种情况下开始吗？

也许是一样的，只是为外部依赖项创建别名，就像我对那些外部单文件、串联的 amd 依赖项所做的那样。

但我怀疑在特殊情况下哪个是最佳做法。

也许有人可以给我建议。

提前非常感谢。

沃尔夫冈

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-09-19T06:49:12.620

尽管这并不能真正回答您的问题，但我建议您像对待任何其他外部库一样对待您的 3 个独立项目：当它们发生变化时，在更高版本中重新构建它们并相应地调整您的 Web 项目的依赖关系。

您的 Web 项目与其他 3 个项目分开是有原因的：它们是不同的东西。您的 Web 项目不应该负责构建它的依赖项，他们应该这样做。

# java - While循环导致打印语句打印两次

> ID：14290807
> 
> 赞同：0
> 
> 时间：2013-01-12T06:12:08.900
> 
> 标签：java, loops, while-loop

我的程序加密和解密 Caesar Shift 代码，但我现在遇到的主要问题是我的用户选择无法正常工作。

```
import java.util.Scanner;
public class CaesarShiftTester
{
public static void main(String [] args)
{
    Scanner in = new Scanner(System.in);
    String message = "";
    String userChoice = "";
    int shift = 0;

    System.out.println("1 - Encrypt\n2 - Decrypt\nQ - Quit Program");
    while(!userChoice.equalsIgnoreCase("Q"))
    {
        System.out.println("Make a selection: ");
        userChoice = in.nextLine();
        if(userChoice.equalsIgnoreCase("1"))
        {
            System.out.print("Please enter a message to be encrypted: ");
            message = in.nextLine();

            System.out.print("Please enter a shift value for the cipher(0 - 25): ");
            shift = in.nextInt();

            CaesarShiftEncryption.genCipherAlphabet(shift);
            System.out.println(CaesarShiftEncryption.encrypt(message));
        }

        else if(userChoice.equalsIgnoreCase("2"))
        {
            System.out.print("Please enter a message to be decrypted: ");
            message = in.nextLine();

            System.out.print("Please enter a shift value for the cipher(0 - 25): ");
            shift = in.nextInt();
        }

        else if(userChoice.equalsIgnoreCase("Q"))
        {
            System.out.println("Thanks for using the program!");
        }
    }
}
} 
```

在第一次通过程序后，“进行选择”被打印两次。这是类中的另一个文件，它在问题中没有那么大的作用，但是如果您想自己测试这些文件，就在这里。请注意，我还没有实现解密，所以现在只有“1”和“Q”选项实际上可以做任何事情。

```
public class CaesarShiftEncryption
{
private static final String ALPHABET = "abcdefghijklmnopqrstuvwxyz";
private static String newAlphabet = "";

public CaesarShiftEncryption()
{

}

public static String genCipherAlphabet(int shift)
{
    for(int i = 0; i < ALPHABET.length(); i++)
    {
        int alphabetShift = i + shift;
        alphabetShift = alphabetShift % 26;
        newAlphabet += ALPHABET.charAt(alphabetShift);
    }
    return newAlphabet;
}

public static String encrypt(String message)
{
    int letter = 0;
    String encoded = "";
    char[] messageLetters = new char[message.length()];

    for(int i = 0; i < message.length(); i++)
    {
        messageLetters[i] = message.charAt(i);
    }

    for(int a = 0; a < message.length(); a++)
    {
        if(Character.isWhitespace(messageLetters[a]))
        {
            encoded += " ";
            a++;
        }

        if(Character.isUpperCase(messageLetters[a]))
            messageLetters[a] = Character.toLowerCase(messageLetters[a]);

        letter = ALPHABET.indexOf(messageLetters[a]);  
        encoded += newAlphabet.substring(letter, letter + 1).toUpperCase();
    }
    return encoded;
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T06:21:18.053

当您读取移位值时

```
shift = in.nextInt(); 
```

行尾保留在扫描仪中。在下一次循环迭代中，将读取剩余的行尾，但由于没有找到有效输入（1,2 或 Q），循环将再次运行。

要解决这个问题，请像这样读取您的班次值：

```
shift = in.nextInt();
in.nextLine(); 
```

# php - 如何循环遍历一组答案并仅显示不正确的答案

> ID：14290808
> 
> 赞同：0
> 
> 时间：2013-01-12T06:12:11.993
> 
> 标签：php, html

所以让我们说下面是每个问题的正确和错误答案：

```
Question Number: 1   Correct Answer(s) B     Incorrect Answers A C D
Question Number: 2   Correct Answer(s) A C   Incorrect Answers B D
Question Number: 3   Correct Answer(s) D     Incorrect Answers A B C 
```

问题是我为具有多个答案（多个正确答案）的问题检索错误答案的方式。检索一个问题只有一个正确答案的错误答案没有任何问题，只有多个正确答案。

下面显示了错误答案的当前显示方式及其外观（我在下面进行了颜色编码，以便您查看问题所在）：

![在此处输入图像描述](../Images/f3743ef18ab8ac191c4aa17a5074a822.png)

如果一个问题中有多个正确答案，它似乎在该问题中所做的只是循环遍历所有答案，删除一个正确答案并显示其余答案，然后再次循环遍历所有答案并删除另一个正确答案并显示当前答案的其余部分。

因此它识别出 A 和 C 是正确答案，因为它`A`从问题 2 中显示的第一组错误答案中删除，并`C`从问题 2 中的第二组错误答案中删除。但就像我说的那样，这是不正确的显示，它应该只显示每个问题的每一行都有一个不正确的答案。

我的问题是如何固定显示器以匹配它的外观？

当前输出的代码是这样的：

```
<table border='1' id='penaltytbl'>
<thead>
<tr>
<th class='questionth'>Question No.</th>
<th class='answerth'>Incorrect Answer</th></tr>
</thead>
<tbody>
<?php
$row_span = array_count_values($searchQuestionNo);
    $q_counter = 1;// counter for $row_span
    $i = key($row_span);  // gets first question number
    foreach ($incorrect_ans as $key => $val){
        if($q_counter == 1){
            $q_row_span[$i] = count($val);}
        else{
            $q_row_span[$i] += count($val);}
        if($q_counter >= $row_span[$i]){
            $q_counter = 1;
            $i++;}
        else{
            $q_counter++; }
    }
$prev_ques = '';
foreach($searchQuestionNo as $key=>$questionNo){

?>

<tr class="questiontd">
    <?php
    if($questionNo != $prev_ques){
    ?>
    <td class="questionnumtd q<?php echo$questionNo?>_qnum" rowspan="<?php echo$q_row_span[$questionNo]?>">
    <?php echo$questionNo?><input type="hidden" name="numQuestion" value="<?php echo$questionNo?>" />
    </td>
    <?php
    }  

    foreach($incorrect_ans[$key] as $answer){ ?>
    <td class="answertd"><?php echo$answer?></td>
</tr>
<?php
    }
$prev_ques = $questionNo;
}
?>
</tbody>
</table> 
```

下面的代码显示了它如何检索每个问题的错误答案，然后将其存储在数组中。这段代码显示在上面的 HTML 表格上方：

```
$specialOptionTypes = array('Yes or No' => array( 'Yes', 'No' ),'True or False' => array( 'True', 'False' ));

while ($stmt->fetch()) {

// Do this for each row:
if ( array_key_exists( $dbOptionType, $specialOptionTypes ) ) {
    $options = $specialOptionTypes[$dbOptionType];
} else if ( preg_match( '/^([A-Z])-([A-Z])$/', $dbOptionType, $match ) ) {
    $options = range( $match[1], $match[2] );
} else {
    // issue warning about unrecognized option type
    $options = array();
}
$right = str_split( $dbAnswer ); 
$wrong = array_diff( $options, $right );  

        $searchQuestionNo[] = $dbQuestionNo;
        $incorrect_ans[] = $wrong;
      } 
```

**更新：**

如果一`Incorrect Answer`列又一列会发生什么情况，下面的代码会弄乱布局：

```
<tbody>
<?php

foreach($ques_ans as $questionNo => $inc_ans)
{
    $q_row_span = count($inc_ans);
    ?>
    <tr class="questiontd">
        <td class="questionnumtd q<?php echo $questionNo?>_qnum" rowspan="<?php echo $q_row_span ?>">
                <?php echo $questionNo?><input type="hidden" name="numQuestion" value="<?php echo $questionNo?>" />
        </td>
        <?php

        foreach ($inc_ans as $ans)
        {
        ?>
            <td class="answertd"><?php echo $ans; ?></td>
          <?php  
            }
          ?>         
            <td class="questionnumtd q<?php echo $questionNo?>_qnum" rowspan="<?php echo $q_row_span ?>">
        <?php echo $questionNo?><input type="hidden" name="numQuestion" value="<?php echo $questionNo?>" />
        </td>
        </tr>
        <?php
}
?>
</tbody> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T07:34:43.067

这正是您希望输出的样子

```
<?php
$incorrect_ans = array(
                   array('A','C','D'),
                   array('B','C','D'),
                   array('A','B','D'),
                   array('A','B','C'));

$searchQuestionNo = array(
                   1,
                   2,
                   2,
                   3);

$ques_ans = array();    //to store incorrect answers against ques no.

$q_occ_count = array_count_values($searchQuestionNo);
foreach($searchQuestionNo as $key => $questionNo)
{
    if ( ! array_key_exists($questionNo, $ques_ans))
    {
        if($q_occ_count[$questionNo] === 1) //if a ques has only one correct ans
        {
            $ques_ans[$questionNo] = $incorrect_ans[$key];  //store the array of incorrect ans against the ques no as key 
        }
        else //if a ques has more than 1 correct ans
        {
            //find the intersection of incorrect_ans arrays for this ques
            $q_keys = array_keys($searchQuestionNo, $questionNo);
            $q_incorrect_ans = $incorrect_ans[$q_keys[0]];
            foreach($q_keys as $q_key) {
                $q_incorrect_ans = array_intersect($q_incorrect_ans, $incorrect_ans[$q_key]);
            }       
            $ques_ans[$questionNo] = $q_incorrect_ans;  //store the array of incorrect ans against the ques no as key
        }
    }
}
var_dump($ques_ans);
?>
<table border='1' id='penaltytbl'>
<thead>
<tr>
<th class='questionth'>Question No.</th>
<th class='answerth'>Incorrect Answer</th></tr>
</thead>
<tbody>
<?php

foreach($ques_ans as $questionNo => $inc_ans)
{
    $q_row_span = count($inc_ans);
    ?>
    <tr class="questiontd">
        <td class="questionnumtd q<?php echo $questionNo?>_qnum" rowspan="<?php echo $q_row_span ?>">
                <?php echo $questionNo?><input type="hidden" name="numQuestion" value="<?php echo $questionNo?>" />
        </td>
        <?php

        foreach ($inc_ans as $ans)
        {
        ?>
            <td class="answertd"><?php echo $ans; ?></td>
        </tr>
        <?php
        }
}
?>
</tbody>
</table> 
```

**[演示](http://phpfiddle.org/main/code/7j1-we2)**

即使您有 3 个正确答案，上面的代码也有效

**更新**

这里不加代码，只是做了一些修改 **[更新了Demo](http://phpfiddle.org/main/code/get-rps)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T06:36:53.863

这不起作用吗？

```
foreach($searchQuestionNo as $key => $qNum)
{
    $answers = $incorrect_ans[$key];
    $aCount = count($answers);
    $i = 0;
    foreach($answers as $answer)
    {
        echo '<tr>';
        if($i == 0)
        {
           echo "<td class='questionnumtd q{$qNum}_qnum' rowspan='$aCount'>$qNum";
           echo "<input type='hidden' name='numQuestion' value='$qNum' />";
           echo "</td>";
        }
        echo "<td class='answertd'>$answer</td>";
        echo "</tr>";
        $i++;
    }
} 
```

示例：http: [//ideone.com/7asOjm](http://ideone.com/7asOjm)

# android - Android string.xml 和 style.xml 解析错误

> ID：14290811
> 
> 赞同：1
> 
> 时间：2013-01-12T06:12:48.003
> 
> 标签：android, android-sdk-2.3

```
 <style name="ButtonText">
    <item name="android:layout_width">fill_parent</item>
        <item name="android:layout_height">wrap_content</item>
        <item name="android:textColor">#ffffff</item>
        <item name="android:gravity">center</item>
        <item name="android:layout_margin">3dp</item>
        <item name="android:textSize">30sp</item> 
        <item name="android:textStyle">bold</item>
        <item name="android:shadowColor">#000000</item>
        <item name="android:shadowDx">1</item>
        <item name="android:shadowDy">1</item>
        <item name="android:shadowRadius">2</item>
  </style> 
```

我在网上收到这个奇怪的错误说“最初发布在这里”

`<item name="android:textSize">30sp</item>` 在我的 xml 文件中。我正在使用安卓 2.3。

我在 style.xml 中也遇到错误

```
 <style name="ButtonText" parent="BaseTopBar">
        <item name="android:textSize">14dp</item>
 </style> 
```

错误是“资源条目 ButtonText 已经有包项 android:textSize”

有人可以帮忙吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T06:17:11.150

似乎一切都在您的 string.xml 文件中您只需要清理和构建您的项目。

如果它不起作用，请从您的项目中删除 bin/ 和 gen/ 目录，而不是清理构建您的项目。

并且错误将不再显示。希望它会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-09T23:25:49.163

我遇到了类似的问题，但是在我的 strings.xml 中使用多个数组列表时。

![在此处输入图像描述](../Images/6773531dca0e5896fa2437c50a512c43.png)

事实证明，我复制和粘贴值的数组有重复的名称。

检查样式名称**ButtonText**是否在其他地方重复。您应该有一个相应的错误，如下图所示：

![在此处输入图像描述](../Images/d8b13045d40acc83299a14f90f82ba27.png)

# css-float - 如何使 2 个 div 浮动，彼此相邻，在 li 内的 div 内

> ID：14290816
> 
> 赞同：0
> 
> 时间：2013-01-12T06:13:25.900
> 
> 标签：css-float, html-lists, html

这是我正在使用的编码。我已经搞砸了几个小时。下面是我正在使用的 CSS

```
<ul class="slider">
  <li style="display: block;">
    <a href="#" style="clear:both;>
       <div class="slider_blog" style="width: 680px; height: 300px; display: block; clear: both; float: left;">
         <div class="slider_blog_img">
           <img src="#" alt="#">
         </div>
         <div class="slider_blog_text" style="float:left;">
           <h2>This is A Title</h2>
           <p></p>
           <p>words</p>
        </div>
      </div>
    </a>
  </li>
</ul> 
```

这是我正在使用的 CSS

```
.slider li {
  display: none, block;
  position: absolute; 
  top: 0; 
  left: 0; 
  list-style: none;
  padding:0;
  margin:0px;
  width:680px;
  height:300px;
}

.slider li:after{
  clear:both;
}

.slider_blog{
  border: 1px solid #F0E; clear: both; padding: 0; margin: 0;
}

.slider_blog a{
 text-decoration: none; padding: 0; margin: 0;
}

.slider_blog_img{
  width:300px;
  height:300px;
}

.slider_blog img{
  width: 200px; height: 200px; margin:50px; border: none; display:block;
}

.slider_blog_text{
 width: 280px; padding: 50px 20px 50px 0px; border:none;
}

.slider_blog_text h2{
 text-align:center; font-size:24px; font-weight:bold; color:red; 
}

.slider_blog_text p{
  text-align:justify; font-size:14px; color:green;
} 
```

我知道他们是用 CSS 添加的一些内联内容，但是当我“虽然”取得进展时，这是从 Firebug 复制的。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T06:19:47.223

您的第一个`<a>`标签缺少结尾样式引用。尝试先解决这个问题，然后更好地解释问题。另外，请尝试将 a 添加`float:left`到`.slider_blog_img`类中并暂时删除设置的宽度和高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T06:24:43.440

`TJohnW`按照ie的指示做好

提供结束报价

```
<a href="#" style="clear:both;"> 
```

并使用它

```
.slider_blog_img {
    float: left;
} 
```

**[输出](http://jsfiddle.net/uttara/h3wFX/1/)**

# node.js - 我应该使用服务提供者或 heroku 插件的弹性搜索，还是我自己设置的弹性搜索？

> ID：14290822
> 
> 赞同：0
> 
> 时间：2013-01-12T06:14:29.233
> 
> 标签：node.js, heroku, elasticsearch, nodejitsu

我在 nodejitsu 服务器上运行了一个 nodejs 应用程序。

最近我想为我的应用程序构建搜索功能。elasticsearch 技术似乎适合我。我知道elasticsearch是java基础。要运行它，我需要 java 服务器。我买不起。

我想我有这样的选择：

1-租 heroku java 托管服务，然后安装 elasticseach。

2-订阅heroku托管计划并安装可用的elasticsearch插件之一（例如盆景）

3-直接去elasticsearch服务商如searchbox.io订阅套餐

那么，我认为哪一个最适合我的情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T06:28:25.197

全面披露：我在 Heroku 附加组件团队工作。

浏览您建议的选项：

1) Dynos 是短暂的，每当您部署代码更改、更新配置变量或至少每天一次时都会重新启动。每次发生这些事件之一时，您仍然需要弄清楚如何处理持久性或重建索引。

2) 目前，您在附加组件市场中实际上有 3 个选项：检查[这个](https://addons.heroku.com/?q=elasticsearch)，Bonsai 是唯一一个未完成测试的选项。

3) 搜索框可通过附加组件获得。

我在 Heroku 工作，尤其是 Add-ons，因为我喜欢这个产品并且相信它是未来。与管理服务器并确保它们正常运行相比，你有更好、更有用的事情要做，比如实际构建你的应用程序。我通常发现免费计划足以测试我是否想使用一项服务，而且 Bonsai 的付费计划开始非常便宜，因为它们节省了我的时间和麻烦（另外两个你不能只付钱然而）。

希望有帮助，

格伦

# php - 根据数组获取mysql结果

> ID：14290826
> 
> 赞同：2
> 
> 时间：2013-01-12T06:15:00.250
> 
> 标签：php, mysql

我想根据数组获取mysql结果。

我有这段代码，但它带来一个结果并重复它，我想要所有结果

```
$connectdb  =   mysql_connect('localhost','root','') or die('nonno');
$selectdb   =   mysql_select_db('test',$connectdb) or die('fofofo');
$se_right   =   mysql_query("select * from ads ") or die(mysql_error());
$row        =   mysql_fetch_object($se_right);
$array = array(
                "id"    =>  $row->id,
                "name"  =>  $row->adsurl
            );
$se_ridght = mysql_query("select * from ads ") or die(mysql_error());

while($roww = mysql_fetch_object($se_ridght))
{
    foreach($array as $key =>$results)
    {
        echo $key.':'.$results.'<br />';
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T06:19:25.613

尝试这个。

```
$connectdb=mysql_connect('localhost','root','') or die('nonno');
$selectdb= mysql_select_db('test',$connectdb) or die('fofofo');
$se_right = mysql_query("select * from ads ") or die(mysql_error());
$row = mysql_fetch_object($se_right);
$array = array(
"id" => $row->id,
"name" =>$row->adsurl
);
$index = 0;
while($roww = mysql_fetch_assoc($se_ridght))
{
 $yourArray[$index] = $roww;
 $index++;
}
} 
```

print_r($yourArray);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T06:20:26.927

您的问题似乎是因为您只设置`$array`了一次并且在 while 循环之外。以下代码在 while 循环中构建 $array。循环完成后，该`$array`变量可在您的项目中稍后使用。

```
$connectdb=mysql_connect('localhost','root','') or die('nonno');
$selectdb= mysql_select_db('test',$connectdb) or die('fofofo');

$array = array();

$se_ridght = mysql_query("select * from ads ") or die(mysql_error());

while($roww = mysql_fetch_object($se_ridght)){
  $array[] = array("id" => $roww->id, "name" => $roww->adsurl);
  echo $roww->id . ':' . $roww->adsurl . '<br />';
} 
```

# codeigniter - IIS 7 URL 重写

> ID：14290837
> 
> 赞同：2
> 
> 时间：2013-01-12T06:16:37.450
> 
> 标签：codeigniter, iis, iis-7, url-rewriting

我已经工作了几个小时，现在试图让它工作。我有一个 CodeIgniter 网站，它曾经在运行良好的 Apache 服务器上。为了隐藏 index.php，我使用了 Apache URL Rewriter 作为 URL。出于某种原因，我无法让它在 IIS 上运行。我用谷歌搜索了它并想出了几个不同的选项，但有些要么不起作用，要么将我重定向到我的根目录。

我正在尝试像这样重写 URL `http://domain.com/v2.3.1/index.php/test`

以下是我在`web.config`文件中的规则：

```
 <rewrite>
        <rules>
             <rule name="Clean URL" stopProcessing="true">
                <match url="^(.*)$" />
                <conditions>
                    <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                    <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
                </conditions>
                <action type="Rewrite" url="index.php/{R:1}" appendQueryString="true" />
            </rule>
        </rules>
    </rewrite> 
```

当前配置会将我送回我的根目录。我的网站位于以下示例 URL：

`http://domain/v2.3.1`- 这将带我到我的主页

然而

`http://domain/v2.3.1/test`- 会带我回去，`http://domain`但网址永远不会改变`http://domain/v2.3.1/test`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T04:02:35.457

规则没有任何改变。我在错误的目录中有规则。网站根目录不是域根目录，它位于子目录中。使用 IIS，您需要将其`web.config`放在要重写 URL 的同一目录中。

经过几个小时的敲打我的头，我终于弄明白了。

# jquery - HTML5 Sortable on both children 以及 parent 元素使 Parent 在对其中的子元素进行排序时进行排序

> ID：14290843
> 
> 赞同：0
> 
> 时间：2013-01-12T06:17:16.500
> 
> 标签：jquery, jquery-ui-sortable, nested-sortable

我有一个待办事项类别列表，每个类别将包含一个待办事项列表。我在类别内的 todos 上使用了“Sortables”，以便对类别内的 todos 的顺序进行排序。

现在我还希望将分类添加到类别中，以便用户可以对整个类别进行排序。我有这样的 DOM

```
 <ul id="ToDos">
      <li id="Cat-1"> 
          <ul class='collecton'> 
            <li class='todoItem'></li>
            <li class='todoItem'></li>
            <li class='todoItem'></li>
          </ul>
      </li>
      <li id="Cat-2"> 
          <ul class='collecton'> 
            <li class='todoItem'></li>
            <li class='todoItem'></li>
            <li class='todoItem'></li>
          </ul>
      </li>
      <li id="Cat-3"> 
          <ul class='collecton'> 
            <li class='todoItem'></li>
            <li class='todoItem'></li>
            <li class='todoItem'></li>
          </ul>
      </li>
      <li id="Cat-4"> 
          <ul class='collecton'> 
            <li class='todoItem'></li>
            <li class='todoItem'></li>
            <li class='todoItem'></li>
          </ul>
      </li>
    </ul> 
```

我用这个给了这些排序

```
 $('.collection').sortable();
    $('#ToDos').sortable({grid: [100, 50]}); 
```

现在的问题是，当我在“#ToDos”中没有可排序时，“#collection”的排序（即每个类别内的 todoItems 的排序）效果很好。当我在“#ToDos”上进行排序时，每个类别的排序都有效，但是当我对类别内的 todoItem 进行排序时，类别的排序也会发生，即，当类别中的 todoItem 被排序时，类别也会改变其顺序。

请帮我解决这个问题..

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T06:36:01.023

使用 jquery sortable 的 item 选项来指定要排序的元素

[http://api.jqueryui.com/sortable/#option-items](http://api.jqueryui.com/sortable/#option-items)

在你的情况下，

```
$('#collection').sortable(
    items: "> li"
); 
```

希望这可以帮助

看看这个。

[http://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)

当您开始拖动 todoItem 时，事件会冒泡到您的父母，并且由于您的类别也是可排序的，因此它也开始拖动。

试试这样的，

```
$('.collection li').sortable({
    start: function(event, ui){
        event.stopPropagation();
    }
}); 
```

# shell - 更改重复 n 次的 XML 标记的值

> ID：14290846
> 
> 赞同：1
> 
> 时间：2013-01-12T06:17:45.177
> 
> 标签：shell, scripting

```
`<?xml version="1.0" encoding="UTF-8"?>
<StudentInfo Version="1">
<Student>
<StudentId>INS469</StudentId>
<ClassId>21</ClassId>
<Amount>100</Amount>
<Location>AA</Location>
</Student>'
'<?xml version="1.0" encoding="UTF-8"?>
<StudentInfo Version="1">
<Student>
<StudentId>INS469</StudentId>
<ClassId>21</ClassId>
<Amount>100</Amount>
<Location>AA</Location>
</Student>'
'<?xml version="1.0" encoding="UTF-8"?>
<StudentInfo Version="1">
<Student>
<StudentId>INS469</StudentId>
<ClassId>21</ClassId>
<Amount>100</Amount>
<Location>AA</Location>
</Student>` 
```

在这里，我想使用 shell 脚本更改 Amount 的值，并且我只想要唯一的值。我怎样才能做到这一点 。请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T06:31:10.197

```
[sgeorge@sgeorge-ld staCK]$ cat xml 
<?xml version="1.0" encoding="UTF-8"?>
<StudentInfo Version="1">
<Student>
<StudentId>INS469</StudentId>
<ClassId>21</ClassId>
<Amount>100</Amount>
<Location>AA</Location>
</Student>'
'<?xml version="1.0" encoding="UTF-8"?>
<StudentInfo Version="1">
<Student>
<StudentId>INS469</StudentId>
<ClassId>21</ClassId>
<Amount>100</Amount>
<Location>AA</Location>
</Student>'
'<?xml version="1.0" encoding="UTF-8"?>
<StudentInfo Version="1">
<Student>
<StudentId>INS469</StudentId>
<ClassId>21</ClassId>
<Amount>100</Amount>
<Location>AA</Location>
</Student>

[sgeorge@sgeorge-ld staCK]$ OLDIFS=$IFS; IFS=$'\n'; COUNT=1; for i in `cat xml` ; do echo $i | sed "s/<Amount>.*<\/Amount>/<Amount>"$COUNT"<\/Amount>/g" && ((COUNT++))  ; done ; IFS=$OLDIFS
<?xml version="1.0" encoding="UTF-8"?>
<StudentInfo Version="1">
<Student>
<StudentId>INS469</StudentId>
<ClassId>21</ClassId>
<Amount>6</Amount>
<Location>AA</Location>
</Student>'
'<?xml version="1.0" encoding="UTF-8"?>
<StudentInfo Version="1">
<Student>
<StudentId>INS469</StudentId>
<ClassId>21</ClassId>
<Amount>14</Amount>
<Location>AA</Location>
</Student>'
'<?xml version="1.0" encoding="UTF-8"?>
<StudentInfo Version="1">
<Student>
<StudentId>INS469</StudentId>
<ClassId>21</ClassId>
<Amount>22</Amount>
<Location>AA</Location>
</Student> 
```

或者（如果你想要一个真正的自定义值）做如下：

```
[sgeorge@sgeorge-ld staCK]$ cat amount.txt 
121213424525
1213125435
1313145357460
988783784332
82990190231932

[sgeorge@sgeorge-ld staCK]$ OLDIFS=$IFS; IFS=$'\n'; COUNT=1; for i in `cat xml` ; do echo $i | grep '<Amount>' >/dev/null && AMT=$(tail -1 amount.txt) && sed -i "/^$AMT$/d" amount.txt && echo $i | sed "s/<Amount>.*<\/Amount>/<Amount>"$AMT"<\/Amount>/g" || echo $i ; done ;  IFS=$OLDIFS
<?xml version="1.0" encoding="UTF-8"?>
<StudentInfo Version="1">
<Student>
<StudentId>INS469</StudentId>
<ClassId>21</ClassId>
<Amount>82990190231932</Amount>
<Location>AA</Location>
</Student>'
'<?xml version="1.0" encoding="UTF-8"?>
<StudentInfo Version="1">
<Student>
<StudentId>INS469</StudentId>
<ClassId>21</ClassId>
<Amount>988783784332</Amount>
<Location>AA</Location>
</Student>'
'<?xml version="1.0" encoding="UTF-8"?>
<StudentInfo Version="1">
<Student>
<StudentId>INS469</StudentId>
<ClassId>21</ClassId>
<Amount>1313145357460</Amount>
<Location>AA</Location>
</Student> 
```

**编辑**

```
OLDIFS=$IFS; IFS=$'\n'; COUNT=1; for i in `cat xml` ; do echo $i | grep '<Amount>' >/dev/null && AMT=$(tail -1 amount.txt) && sed -i "/^$AMT$/d" amount.txt && echo $i | sed "s/<Amount>.*<\/Amount>/<Amount>"$AMT"<\/Amount>/g" || echo $i ; done > /tmp/xml_output.xml;  IFS=$OLDIFS 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T07:57:58.003

假设“...”标签位于一行，您可以使用以下 awk 单行（要更改的 xml 文本存储在“文件”中）：

```
awk -v AMOUNT=1 '/<Amount>.*<\/Amount>/ { print "<Amount>" AMOUNT++ "</Amount>" ; next } ; { print }' file 
```

要从“amounts_file.txt”中读取值：

```
awk -v AMOUNT_FILE="amounts_file.txt" '/<Amount>.*<\/Amount>/ { getline AMOUNT < AMOUNT_FILE ; print "<Amount>" AMOUNT++ "</Amount>" ; next } ; { print }' file 
```

金额文件结束后，金额的值将从文件的最后一个值递增。

# java - 创建泛型类类型数组

> ID：14290852
> 
> 赞同：1
> 
> 时间：2013-01-12T06:19:36.263
> 
> 标签：java, arrays, class

我在创建 a 的数组时遇到了一些困难`Class`，其中`Class`a 是泛型类型。

让我们举一个示例函数，`addOverlay`如下（假设`mapSize`是一个静态类变量）：

```
public void addOverlay(Class<?> dataType) {
    dataType[][] d = new dataType[mapSize][mapSize];
    overlayMap.add(new Class[mapSize][mapSize]);
} 
```

我得到错误，`dataType cannot be resolved to a type`。这本身对我来说没有意义，因为`dataType`它拥有一个类类型。尽管如此，我还是尝试使用以下语句直接插入它（给出与以前相同的错误）：

```
overlayMap.add(new dataType[mapSize][mapSize]); 
```

等等等等。我也尝试过使用`dataType.getClass()`.

Java中有没有办法创建一个类的数组，该类是泛型类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T09:35:23.343

您应该清楚 dataType 只是 Class 类的一个实例，它只保存有关某个类的元数据。在您的情况下，您可以像这样修改您的方法：

```
public void addOverlay(Class<?> dataType) {
    Object subArray = Array.newInstance(dataType, mapSize);
    Object array = Array.newInstance(subArray.getClass(), mapSize);
    for (int i = 0; i < mapSize; i++) {
        Array.set(array, i, subArray);
    }
    overlayMap.add(array);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T06:36:49.097

'dataType' 已经是一个类，所以在它上面调用 getClass() 不是答案（你只会得到 Class.class）。你可以用'java.lang.ref.Arrays.newArray()'来做到这一点。

# sql - SQL SELECT WHERE 字段包含单词

> ID：14290857
> 
> 赞同：803
> 
> 时间：2013-01-12T06:19:50.197
> 
> 标签：sql, select

我需要一个可以返回如下结果的选择：

```
SELECT * FROM MyTable WHERE Column1 CONTAINS 'word1 word2 word3' 
```

我需要所有结果，即这包括带有'word2 word3 word1'或'word1 word3 word2'或三者的任何其他组合的字符串。

所有单词都必须在结果中。

* * *

## 回答 #1

> 赞同：1194
> 
> 时间：2013-01-12T06:21:46.640

**相当慢，但包含任何**单词的工作方法：

```
SELECT * FROM mytable
WHERE column1 LIKE '%word1%'
   OR column1 LIKE '%word2%'
   OR column1 LIKE '%word3%' 
```

如果您需要**所有**单词都存在，请使用以下命令：

```
SELECT * FROM mytable
WHERE column1 LIKE '%word1%'
  AND column1 LIKE '%word2%'
  AND column1 LIKE '%word3%' 
```

如果您想要更快的东西，您需要查看全文搜索，这对于每种数据库类型都是非常具体的。

* * *

## 回答 #2

> 赞同：115
> 
> 时间：2014-09-05T00:21:17.883

请注意，如果您使用`LIKE`来确定一个字符串是否是另一个字符串的子字符串，则必须对搜索字符串中的模式匹配字符进行转义。

如果您的 SQL 方言支持`CHARINDEX`，则使用它会容易得多：

```
SELECT * FROM MyTable
WHERE CHARINDEX('word1', Column1) > 0
  AND CHARINDEX('word2', Column1) > 0
  AND CHARINDEX('word3', Column1) > 0 
```

另外，请记住，这个和接受的答案中的方法仅涵盖子字符串匹配而不是单词匹配。因此，例如，字符串`'word1word2word3'`仍然匹配。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2014-12-30T18:23:56.537

# 功能

```
 CREATE FUNCTION [dbo].[fnSplit] ( @sep CHAR(1), @str VARCHAR(512) )
 RETURNS TABLE AS
 RETURN (
           WITH Pieces(pn, start, stop) AS (
           SELECT 1, 1, CHARINDEX(@sep, @str)
           UNION ALL
           SELECT pn + 1, stop + 1, CHARINDEX(@sep, @str, stop + 1)
           FROM Pieces
           WHERE stop > 0
      )

      SELECT
           pn AS Id,
           SUBSTRING(@str, start, CASE WHEN stop > 0 THEN stop - start ELSE 512 END) AS Data
      FROM
           Pieces
 ) 
```

# 询问

```
 DECLARE @FilterTable TABLE (Data VARCHAR(512))

 INSERT INTO @FilterTable (Data)
 SELECT DISTINCT S.Data
 FROM fnSplit(' ', 'word1 word2 word3') S -- Contains words

 SELECT DISTINCT
      T.*
 FROM
      MyTable T
      INNER JOIN @FilterTable F1 ON T.Column1 LIKE '%' + F1.Data + '%'
      LEFT JOIN @FilterTable F2 ON T.Column1 NOT LIKE '%' + F2.Data + '%'
 WHERE
      F2.Data IS NULL 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2016-07-26T16:42:08.360

取而代之的是`SELECT * FROM MyTable WHERE Column1 CONTAINS 'word1 word2 word3'`，在这些词之间添加 And，例如：

```
SELECT * FROM MyTable WHERE Column1 CONTAINS 'word1 And word2 And word3' 
```

有关详细信息，请参阅此处 [https://msdn.microsoft.com/en-us/library/ms187787.aspx](https://msdn.microsoft.com/en-us/library/ms187787.aspx)

**更新**

要选择短语，请使用双引号，例如：

```
SELECT * FROM MyTable WHERE Column1 CONTAINS '"Phrase one" And word2 And "Phrase Two"' 
```

***ps***在使用包含关键字之前，您必须先在表格上启用全文搜索。有关更多详细信息，请参阅此处[https://docs.microsoft.com/en-us/sql/relational-databases/search/get-started-with-full-text-search](https://docs.microsoft.com/en-us/sql/relational-databases/search/get-started-with-full-text-search)

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2013-01-12T06:24:16.567

```
SELECT * FROM MyTable WHERE 
Column1 LIKE '%word1%'
AND Column1 LIKE '%word2%'
AND Column1 LIKE  '%word3%' 
```

更改`OR`为`AND`基于对问题的编辑。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2015-06-29T12:15:40.650

如果您使用的是**Oracle 数据库，那么您可以使用**[包含](http://docs.oracle.com/cd/B28359_01/text.111/b28303/query.htm#BABGAIHJ)查询来实现此目的。包含查询比类似查询更快。

如果你需要所有的话

```
SELECT * FROM MyTable WHERE CONTAINS(Column1,'word1 and word2 and word3', 1) > 0 
```

如果您需要任何单词

```
SELECT * FROM MyTable WHERE CONTAINS(Column1,'word1 or word2 or word3', 1) > 0 
```

包含您的列上的**CONTEXT**类型的需要索引。

```
CREATE INDEX SEARCH_IDX ON MyTable(Column) INDEXTYPE IS CTXSYS.CONTEXT 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2015-11-11T20:32:49.360

如果你只是想找到一个匹配。

```
SELECT * FROM MyTable WHERE INSTR('word1 word2 word3',Column1)<>0 
```

SQL 服务器：

```
CHARINDEX(Column1, 'word1 word2 word3', 1)<>0 
```

获得完全匹配。示例`(';a;ab;ac;',';b;')`将无法匹配。

```
SELECT * FROM MyTable WHERE INSTR(';word1;word2;word3;',';'||Column1||';')<>0 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-05-01T16:06:57.257

实现问题中提到的最简单的方法之一是将[CONTAINS](https://docs.microsoft.com/en-us/sql/t-sql/queries/contains-transact-sql?view=sql-server-2017)与 NEAR 或“~”一起使用。例如，以下查询将为我们提供特别包含 word1、word2 和 word3 的所有列。

```
SELECT * FROM MyTable WHERE CONTAINS(Column1, 'word1 NEAR word2 NEAR word3')

SELECT * FROM MyTable WHERE CONTAINS(Column1, 'word1 ~ word2 ~ word3') 
```

此外，CONTAINSTABLE 根据“word1”、“word2”和“word3”的接近度返回每个文档的排名。例如，如果一个文档包含句子“The word1 is word2 and word3”，那么它的排名就会很高，因为这些词比其他文档中的词更接近。

我想补充的另一件事是，我们还可以使用proximity_term 来查找单词在列短语内的特定距离内的列。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-10-14T06:34:04.180

最好的方法是在表中的列上创建全文索引并使用包含而不是 LIKE

```
SELECT * FROM MyTable WHERE 
contains(Column1 , N'word1' )
AND contains(Column1 , N'word2' )
AND contains(Column1 , N'word3' ) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-11-09T23:41:20.570

为什么不改用“in”呢？

```
Select *
from table
where columnname in (word1, word2, word3) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-02-13T12:17:07.483

理想情况下，如果使用的话，这应该在 sql server 全文搜索的帮助下完成。但是，如果由于某种原因您无法在您的数据库上工作，这里有一个性能密集型解决方案：-

```
-- table to search in
CREATE TABLE dbo.myTable
    (
    myTableId int NOT NULL IDENTITY (1, 1),
    code varchar(200) NOT NULL, 
    description varchar(200) NOT NULL -- this column contains the values we are going to search in 
    )  ON [PRIMARY]
GO

-- function to split space separated search string into individual words
CREATE FUNCTION [dbo].[fnSplit] (@StringInput nvarchar(max),
@Delimiter nvarchar(1))
RETURNS @OutputTable TABLE (
  id nvarchar(1000)
)
AS
BEGIN
  DECLARE @String nvarchar(100);

  WHILE LEN(@StringInput) > 0
  BEGIN
    SET @String = LEFT(@StringInput, ISNULL(NULLIF(CHARINDEX(@Delimiter, @StringInput) - 1, -1),
    LEN(@StringInput)));
    SET @StringInput = SUBSTRING(@StringInput, ISNULL(NULLIF(CHARINDEX
    (
    @Delimiter, @StringInput
    ),
    0
    ), LEN
    (
    @StringInput)
    )
    + 1, LEN(@StringInput));

    INSERT INTO @OutputTable (id)
      VALUES (@String);
  END;

  RETURN;
END;
GO

-- this is the search script which can be optionally converted to a stored procedure /function

declare @search varchar(max) = 'infection upper acute genito'; -- enter your search string here
-- the searched string above should give rows containing the following
-- infection in upper side with acute genitointestinal tract
-- acute infection in upper teeth
-- acute genitointestinal pain

if (len(trim(@search)) = 0) -- if search string is empty, just return records ordered alphabetically
begin
 select 1 as Priority ,myTableid, code, Description from myTable order by Description 
 return;
end

declare @splitTable Table(
wordRank int Identity(1,1), -- individual words are assinged priority order (in order of occurence/position)
word varchar(200)
)
declare @nonWordTable Table( -- table to trim out auxiliary verbs, prepositions etc. from the search
id varchar(200)
)

insert into @nonWordTable values
('of'),
('with'),
('at'),
('in'),
('for'),
('on'),
('by'),
('like'),
('up'),
('off'),
('near'),
('is'),
('are'),
(','),
(':'),
(';')

insert into @splitTable
select id from dbo.fnSplit(@search,' '); -- this function gives you a table with rows containing all the space separated words of the search like in this e.g., the output will be -
--  id
-------------
-- infection
-- upper
-- acute
-- genito

delete s from @splitTable s join @nonWordTable n  on s.word = n.id; -- trimming out non-words here
declare @countOfSearchStrings int = (select count(word) from @splitTable);  -- count of space separated words for search
declare @highestPriority int = POWER(@countOfSearchStrings,3);

with plainMatches as
(
select myTableid, @highestPriority as Priority from myTable where Description like @search  -- exact matches have highest priority
union                                      
select myTableid, @highestPriority-1 as Priority from myTable where Description like  @search + '%'  -- then with something at the end
union                                      
select myTableid, @highestPriority-2 as Priority from myTable where Description like '%' + @search -- then with something at the beginning
union                                      
select myTableid, @highestPriority-3 as Priority from myTable where Description like '%' + @search + '%' -- then if the word falls somewhere in between
),
splitWordMatches as( -- give each searched word a rank based on its position in the searched string
                     -- and calculate its char index in the field to search
select myTable.myTableid, (@countOfSearchStrings - s.wordRank) as Priority, s.word,
wordIndex = CHARINDEX(s.word, myTable.Description)  from myTable join @splitTable s on myTable.Description like '%'+ s.word + '%'
-- and not exists(select myTableid from plainMatches p where p.myTableId = myTable.myTableId) -- need not look into myTables that have already been found in plainmatches as they are highest ranked
                                                                              -- this one takes a long time though, so commenting it, will have no impact on the result
),
matchingRowsWithAllWords as (
 select myTableid, count(myTableid) as myTableCount from splitWordMatches group by(myTableid) having count(myTableid) = @countOfSearchStrings
)
, -- trim off the CTE here if you don't care about the ordering of words to be considered for priority
wordIndexRatings as( -- reverse the char indexes retrived above so that words occuring earlier have higher weightage
                     -- and then normalize them to sequential values
select s.myTableid, Priority, word, ROW_NUMBER() over (partition by s.myTableid order by wordindex desc) as comparativeWordIndex 
from splitWordMatches s join matchingRowsWithAllWords m on s.myTableId = m.myTableId
)
,
wordIndexSequenceRatings as ( -- need to do this to ensure that if the same set of words from search string is found in two rows,
                              -- their sequence in the field value is taken into account for higher priority
    select w.myTableid, w.word, (w.Priority + w.comparativeWordIndex + coalesce(sequncedPriority ,0)) as Priority
    from wordIndexRatings w left join 
    (
     select w1.myTableid, w1.priority, w1.word, w1.comparativeWordIndex, count(w1.myTableid) as sequncedPriority
     from wordIndexRatings w1 join wordIndexRatings w2 on w1.myTableId = w2.myTableId and w1.Priority > w2.Priority and w1.comparativeWordIndex>w2.comparativeWordIndex
     group by w1.myTableid, w1.priority,w1.word, w1.comparativeWordIndex
    ) 
    sequencedPriority on w.myTableId = sequencedPriority.myTableId and w.Priority = sequencedPriority.Priority
),
prioritizedSplitWordMatches as ( -- this calculates the cumulative priority for a field value
select  w1.myTableId, sum(w1.Priority) as OverallPriority from wordIndexSequenceRatings w1 join wordIndexSequenceRatings w2 on w1.myTableId =  w2.myTableId 
where w1.word <> w2.word group by w1.myTableid 
),
completeSet as (
select myTableid, priority from plainMatches -- get plain matches which should be highest ranked
union
select myTableid, OverallPriority as priority from prioritizedSplitWordMatches -- get ranked split word matches (which are ordered based on word rank in search string and sequence)
),
maximizedCompleteSet as( -- set the priority of a field value = maximum priority for that field value
select myTableid, max(priority) as Priority  from completeSet group by myTableId
)
select priority, myTable.myTableid , code, Description from maximizedCompleteSet m join myTable  on m.myTableId = myTable.myTableId 
order by Priority desc, Description -- order by priority desc to get highest rated items on top
--offset 0 rows fetch next 50 rows only -- optional paging 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2017-03-31T02:35:13.537

尝试在 MS SQL Server 的全文索引中使用“tesarus 搜索”。如果您有数百万条记录，这比在搜索中使用“%”要好得多。tesarus 的内存消耗比其他的少。尝试搜索此功能:)

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2016-12-27T08:02:54.260

```
SELECT * FROM MyTable WHERE Column1 Like "*word*" 
```

`column1`这将显示包含部分值的所有记录`word`。

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2018-03-05T10:41:00.907

```
DECLARE @SearchStr nvarchar(100)
SET @SearchStr = ' '

CREATE TABLE #Results (ColumnName nvarchar(370), ColumnValue nvarchar(3630))

SET NOCOUNT ON

DECLARE @TableName nvarchar(256), @ColumnName nvarchar(128), @SearchStr2 nvarchar(110)
SET  @TableName = ''
SET @SearchStr2 = QUOTENAME('%' + @SearchStr + '%','''')

WHILE @TableName IS NOT NULL

BEGIN
    SET @ColumnName = ''
    SET @TableName = 
    (
        SELECT MIN(QUOTENAME(TABLE_SCHEMA) + '.' + QUOTENAME(TABLE_NAME))
        FROM     INFORMATION_SCHEMA.TABLES
        WHERE         TABLE_TYPE = 'BASE TABLE'
            AND    QUOTENAME(TABLE_SCHEMA) + '.' + QUOTENAME(TABLE_NAME) > @TableName
            AND    OBJECTPROPERTY(
                    OBJECT_ID(
                        QUOTENAME(TABLE_SCHEMA) + '.' + QUOTENAME(TABLE_NAME)
                         ), 'IsMSShipped'
                           ) = 0
    )

    WHILE (@TableName IS NOT NULL) AND (@ColumnName IS NOT NULL)

    BEGIN
        SET @ColumnName =
        (
            SELECT MIN(QUOTENAME(COLUMN_NAME))
            FROM     INFORMATION_SCHEMA.COLUMNS
            WHERE         TABLE_SCHEMA    = PARSENAME(@TableName, 2)
                AND    TABLE_NAME    = PARSENAME(@TableName, 1)
                AND    DATA_TYPE IN ('char', 'varchar', 'nchar', 'nvarchar', 'int', 'decimal')
                AND    QUOTENAME(COLUMN_NAME) > @ColumnName
        )

        IF @ColumnName IS NOT NULL

        BEGIN
            INSERT INTO #Results
            EXEC
            (
                'SELECT ''' + @TableName + '.' + @ColumnName + ''', LEFT(' + @ColumnName + ', 3630) FROM ' + @TableName + ' (NOLOCK) ' +
                ' WHERE ' + @ColumnName + ' LIKE ' + @SearchStr2
            )
        END
    END   
END

SELECT ColumnName, ColumnValue FROM #Results

DROP TABLE #Results 
```

* * *

## 回答 #15

> 赞同：-8
> 
> 时间：2013-01-12T07:27:15.000

```
select * from table where name regexp '^word[1-3]$' 
```

或者

```
select * from table where name in ('word1','word2','word3') 
```

# azure - 如何给 Windows azure 托管站点的自定义域名

> ID：14290862
> 
> 赞同：3
> 
> 时间：2013-01-12T06:20:04.097
> 
> 标签：azure, dns

我是 Windows Azure 的新手。我有一个 Windows Azure 的免费试用帐户。我在 asp.net 中创建了一个 Web 应用程序并将其发布在 Windows Azure 上。URL 如下所示。

[http://ssoimplenentation.azurewebsites.net/](http://ssoimplenentation.azurewebsites.net/)

是否可以使用免费试用帐户提供 Windows Azure 托管站点的自定义域名？或 如何使用免费试用帐户为 Windows Azure 托管站点提供自定义域名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T15:34:00.143

Custom domains are do supported by Windows Azure Websites. However, you have to have your website in at least `Shared` or `Reserved` website mode. `Free` mode does not allow to have custom domains. I think the same applies to free trial account as `Shared` and `Reserved` website mode are not free of charge.

![Windows Azure Mode](../Images/51f27a4ff35fa81e721fa65ba556e789.png)

If you have your website in one of the mentioned modes, you configure your custom domains in `Configure` tab, `domain names` section. As mentioned above, in `Free` mode that section will be disabled.

![Windows Azure Custom Domains](../Images/c426b77546c653f5a536243a1e474dc4.png)

Please bear in mind that you will have to **configure your DNS first**, before adding custom mode to Azure configuration. When you add new domain name to Azure, DNS servers are checked to find out if the domain name points to Azure. If that condition is not met, you will get an error message and Azure will not accept that domain name.

I hope that will help.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T06:49:17.747

看看这个： http: [//www.windowsazure.com/en-us/develop/net/common-tasks/custom-dns-web-site/](http://www.windowsazure.com/en-us/develop/net/common-tasks/custom-dns-web-site/)。请注意，此时将自定义域名映射到 azure 网站的选项仅在网站在共享或保留模式下运行时可用。

# facebook - 如何在没有 PHP 的情况下在 Facebook 社交插件中使用当前 url？

> ID：14290863
> 
> 赞同：0
> 
> 时间：2013-01-12T06:20:13.923
> 
> 标签：facebook, url, plugins, comments, social

我已经看到了几种解决方案，但自从 Facebook 更新了应用程序和/或使用 PHP (get_permalink) 以来似乎都没有。我需要一个非 PHP 解决方案，我所有的页面都是静态的。我只需要用当前 URL 填充 data-href="" ，这样我就可以在需要的站点上的每个页面上实现代码，而无需单独为每个页面编写唯一的 URL。

在 2.0 之前将 data-href"" 留空

> ```
>  <div id="fb-root"></div>
>    <script>(function(d, s, id) {
>    var js, fjs = d.getElementsByTagName(s)[0];
>    if (d.getElementById(id)) return;
>    js = d.createElement(s); js.id = id;
>    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
>    fjs.parentNode.insertBefore(js, fjs);
>    }(document, 'script', 'facebook-jssdk'));</script>
> 
> <div class="fb-comments" data-href="????????????????????????" 
>   data-width="430" data-num-posts="8" data-colorscheme="dark"></div> 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T06:49:44.997

将其放在标签结束`<head>`之前或之前`<body>`以提高速度。编辑 jquery 的 src，尽管使用在线 CDN 总是更好，如下所示：

```
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
    $(document).ready(function() {
        $('.fb-comments').attr("data-href", document.URL);
    });
</script> 
```

# java - Java创建变量，如果它不存在？

> ID：14290867
> 
> 赞同：0
> 
> 时间：2013-01-12T06:21:04.740
> 
> 标签：java

我只在它不存在时才尝试设置一个数组，但我无法弄清楚如何去做，因为我收到一个错误说它不存在：

```
if (null == arr) { // arr cannot be resolved to a variable
    arr = new ArrayList<task>();
} 
```

没有诸如`isset()`from之类的东西`php`吗？还有什么`<>`持有？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T06:25:42.227

你不能。`Java`是具有强静态类型的语言。里面没有`isset`类似的`JS`。

唯一的方法是在`declare`你的变量`arr` **之前**并为其赋值`null`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T06:27:46.997

在这种情况下，由于您正在初始化`arr`为一个`ArrayList`类型，我假设您已经声明了`arr`as `ArrayList<task>`or的类型`List<Task>`。

如果`arr`还没有初始化，如果你尝试比较它会产生错误。因此，您必须初始化`arr`为 null：

```
List<task> arr = null; 
```

这样，当您运行代码时，您可以简单地使用表达式：

```
if(arr == null)
    arr = new ArrayList<task>(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T06:24:40.933

```
List<Task> arr=null;
if (null == arr) { // arr cannot be resolved to a variable
     arr = new ArrayList<task>();
} 
```

它会正常工作

# c# - C# 命令提示符输出

> ID：14290868
> 
> 赞同：1
> 
> 时间：2013-01-12T06:21:06.013
> 
> 标签：c#, .net

我需要在我的项目中使用命令提示符。一切正常，但输出不是我想要的。如果我这样做：

```
 ProcessStartInfo info = new ProcessStartInfo("cmd","/c dir c:\\test");
        info.RedirectStandardOutput = true;
        info.RedirectStandardInput = true;
        info.CreateNoWindow = true;
        info.UseShellExecute = false;
        Process p = new Process();
        p.StartInfo = info;
        p.Start();
        string iii = p.StandardOutput.ReadToEnd();
        textBox1.Text = iii; 
```

结果没问题。正是我想要的。但我还需要发送更多命令。所以我这样做：

```
 ProcessStartInfo info = new ProcessStartInfo("cmd");
        info.RedirectStandardOutput = true;
        info.RedirectStandardInput = true;
        info.CreateNoWindow = true;
        info.UseShellExecute = false;
        Process p = new Process();
        p.StartInfo = info;
        p.Start();
        StreamWriter write = p.StandardInput;
        write.WriteLine("dir c:\\test");
        write.Close();
        string iii = p.StandardOutput.ReadToEnd();
        textBox1.Text = iii; 
```

但是结果和以前不一样了。它给出了 cmd 中的路径和所有内容，这是我不想要的。我只需要命令提示符的结果，不需要别的。希望有人可以提供帮助。感谢您阅读我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T07:13:55.783

您已经展示了您想要做的事情的实现，并提出了“为什么我的实现不符合我的预期”的问题。如果我们可以退后一步，让我们知道“我需要的是……”（WINI）那么我们可以（我认为）给你一个真正的答案。

例如：

如果我将WINI 视为“我需要'c:\test' 的目录列表”，那么我会说创建一个真正简单的小控制台应用程序，它可以为您提供所需的原始数据。剩下的就是格式化，想想关注点分离。

然后你就有了一个探测应用程序，它可以以最适合你的格式为你提供任何你喜欢的东西。然后，您使用解析器来解析输出。

因此，您的小控制台应用程序可以执行以下操作：

```
 public class Hyperthetical
{
    public void MyDemoCall(string root)
    {
        Console.WriteLine("-- start --");
        GiveMeADirectoryListingAsIWantIt(root)
        Console.WriteLine("-- end --");
    }

    public void GiveMeADirectoryListingAsIWantIt(string directory)
    {
        Console.WriteLine("Folder '{0}':", directory);

        foreach (var filePath in System.IO.Directory.GetFiles(directory))
        {
            var fileInfo = new FileInfo(filePath);
            Console.WriteLine("File: '{0}', {1}", fileInfo.Name, fileInfo.Length);
        }

        foreach (var subFolders in System.IO.Directory.GetDirectories(directory))
        {
            GiveMeADirectoryListingAsIWantIt(subFolders);
        }
    }
} 
```

不是直接的答案，但也许是真正的答案。

# c - 将数组传递给函数时，是否需要提供元素的数量作为参数？

> ID：14290870
> 
> 赞同：1
> 
> 时间：2013-01-12T06:21:07.207
> 
> 标签：c, arrays

我目前正在使用教科书*C: How to program 6/e*学习 C 编程。

现在，在讨论数组的书中，它指出当将数组（不是字符数组，由于 '\0' 字符）传递给函数时，**需要**将数组中的元素数传递给功能也是如此

所以考虑到我的功能

```
int myfunct(int myary[], int numelements);

int myfunct(int *myary, int numelements); 
```

假设 ary 已经声明了 10 个元素，并且我们现在在 main 函数中。

```
myfunct(ary, 10); 
```

是（`int numelements`必要的[在任何一种情况下]，如果是，为什么）。这本书指出编译器应该知道要处理的元素的正确数量，但是这本书在几乎所有示例中都没有这样做，并且非常不一致。

还，

```
int myfunct(int myary[][10], int numrows, int numcolumns); 
```

关于 numrows 和 numcolumns 的相同问题。

为了进一步说明：

```
#include <stdio.h>
void test(const int ary[]);

int main(void){

    int myary[10] = {1,2,3,4,5,6,7,8,9,10};
    test(myary);

    return 0;
}

void test (const int ary[]){
    int i;

    for(i = 0; i<10; i++){
        printf("The number in array element %d is:    %d\n", i, ary[i] );
    }
} 
```

这段代码似乎可以在没有附加参数的情况下正确编译，但我不明白为什么书中会说我需要它们，许多网站也是如此。帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T06:24:00.730

> **有必要吗？如果我不将数组大小作为参数传递，我的代码会编译吗？**

没有必要，即使您没有将数组大小作为参数传递给函数，您的代码也会编译。
但这样做是一个好习惯。

> **理由：**

C 没有为您提供对数组进行边界检查的方法。您可以通过数组索引或指针算术访问超出数组的范围（*在引擎盖下，两者都是相同*的）并且编译器不需要警告您。但是你最终会得到一个**Undefined Behavior**。
所以重要的是你只访问属于你的数组的内存。为了能够做到这一点，您需要跟踪数组的大小。这是用户的责任。

当您将数组作为参数传递时，它会衰减为指向数组第一个元素的指针。
所以`sizeof(arg)`在函数内部会给你指针的大小而不是数组。

除非您将它作为参数或通过其他一些簿记（如全局变量等）传递，否则您 无法知道函数内部数组的大小（*空终止字符串例外，可以通过 获取谁的大小）。`strlen`*

将大小作为参数传递是最明显的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T06:25:05.473

> 是否有必要提供元素的数量作为参数？

大多数时候，是的。正如您已经指出的那样，在传递以*null 结尾的 C string时没有必要。*

> 如果是这样，为什么？

因为您的函数没有其他方法可以知道数组中有多少元素。因此，如果您的函数需要知道这一点，则需要向其提供该信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T10:49:23.943

更好的说法是函数需要知道要做什么。特别是，它需要知道在一个数组中使用多少个元素。

您可以通过在参数中传递数字、使用常量将其构建到函数中或以某种方式标记数组中的最终元素（例如，字符串中的 '\o' 字符）或通过其他方式（例如，可以从中计算数字的参数，或在全局变量中[这通常是一个糟糕的设计选择]）。

简而言之，这只是关于必要性：代码必须具有完成其工作所需的信息。这与 C 无关。

# ruby-on-rails - 当预期输出正确时，Rspec have_selector 错误

> ID：14290871
> 
> 赞同：1
> 
> 时间：2013-01-12T06:21:09.463
> 
> 标签：ruby-on-rails, capybara, rspec-rails, railstutorial.org

当它们都应该成功时，我有 3 个 rspec 选择器失败。我跟随 rails-tutorial.org 的书和他的节目是正确的。

```
PagesController GET 'home' should have the right title
     Failure/Error: response.should have_selector("title", :content => "Ruby on Rails     Sample App | Home")
       expected following output to contain a <title>Ruby on Rails Sample App | Home</title> tag:
   <!DOCTYPE html>
   <html>
   <head>
   <meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
   <title>Ruby on Rails Tutorial Sample App | Home</title>
   </head> 
```

以及“内容”和“关于”的完全相同的错误

**应用程序.html.erb**

```
<!DOCTYPE html>
<html>
<head>
    <title><%= title %></title>
    <%= csrf_meta_tag %>
</head>
<body>
    <%= yield %>
</body>
</html> 
```

**主页.html.erb**

```
 <h1>Sample App</h1>
    <p>
    This is the home page for the <a href='http://railstutorial.org'>Ruby on Rails Tutorial</a> sample application
    </p> 
```

**application_helper.erb**

```
module ApplicationHelper

#Return a title on a per-page basis
def title
    base_title = "Ruby on Rails Tutorial Sample App"
    if @title.nil?
        base_title
    else
        "#{base_title} | #{@title}"
        end
    end
end 
```

**pages_controller_spec.rb**

```
require 'spec_helper'

describe PagesController do
  render_views

  describe "GET 'home'" do
    it "should be successful" do
      get 'home'
      response.should be_success
    end

    it "should have the right title" do
      get 'home'
      response.should have_selector("title", :content => "Ruby on Rails Sample App |     Home")
    end

    it "should have a non-blank body" do
      get 'home'
      response.body.should_not =~ /<body>\s*<\/body>/
    end
  end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T22:41:58.663

如果您使用 Capybara ，则会忽略像元素`2.0`这样的不可见文本。[在此处](https://github.com/jnicklas/capybara/issues/863)`title`查看有关它的 Capybara Github 问题。

Rails 教程专门使用 Capybara 版本`1.1.2`，因此如果您还没有这样做，请确保按照[教程 Gemfile](https://github.com/railstutorial/sample_app_2nd_ed/blob/master/Gemfile)为所有 gem 编写显式版本。

如果您想在现在或将来使用 Capybara 2.0，请参阅以下 SO 问题以获取帮助设置它，以及让该`title`元素再次工作的测试：

*   [无法在 Rails 3.2 中设置 Rspec 和 Capybara](https://stackoverflow.com/q/14028247/567863)
*   [RSpec & Capybara 2.0 让我的 have_selector 测试出错](https://stackoverflow.com/q/13573525/567863)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-09T12:32:03.560

在 Capybara 2.x 中，为了查找/与不可见文本交互，您可以传递 ":visible => false"。

例子：

```
page.should have_selector("head title", text: "my title", visible: false) 
```

这适用于所有内容，而不仅仅是标题。所以虽然是的，有一个 has_title() 匹配器专门用于标题，如果您需要以其他方式与页面的隐藏内容交互，请使用 ":visible => false"。

```
page.should have_selector("link href='style.css'", visible: false) 
```

这也适用于 Capybara 命令，例如 fill_in()、click_button() 等。

```
click_button("hidden_button_name", visible: false)

fill_in("hidden_field_name", with: "foo", visible: false) 
```

使用 Capybara 2.2.0 和 Rspec-Rails 2.14.0 确认。

与隐藏元素交互可能表明您的规范做得比他们应该做的更多，但这是一个单独的问题。如果你发现升级 Capybara 后你的规范有问题，将 ":visible => false" 传递给失败的规范可能有助于你的构建绿色。

ps 如果您使用的是 Ruby 1.9+，则上述哈希语法有效。如果你还在 1.8+，使用 ":visible => false"、":with => 'foo'" 等。

# android - 在重复文本视图之前添加文本视图

> ID：14290872
> 
> 赞同：1
> 
> 时间：2013-01-12T06:21:09.547
> 
> 标签：android, layout, textview, android-activity, simplecursoradapter

我正在尝试构建一个记事本应用程序。在我的布局中有两个 TextView。第一个文本视图只显示一个字符串“Your Saved Entries”，其中第二个 TextView 显示已保存条目的标题。我的问题是第一个 TextView 与已保存条目的所有标题重复。我希望字符串“Your Saved Entries”出现一次，然后显示所有已保存条目的标题。请帮我

![您保存的条目与条目标题重复](../Images/ddd9b181d2e951b6a36182bde247dc84.png)

这是我的 XML 文件

```
<?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"

       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:orientation="vertical"
       android:paddingRight="3dp" 
       android:paddingLeft="3dp"
       android:paddingTop="15dp"
       android:paddingBottom="10dp"
       >
    <TextView xmlns:android="http://schemas.android.com/apk/res/android"

        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center"
        android:text="@string/intro" />

<TextView xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/postslist" 
    android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:padding="8dp"
   android:textSize="20sp" 
   android:textColor="@android:color/white"

   android:gravity="center_vertical"
   />

 </LinearLayout> 
```

这是我的活动文件

```
package com.ex.fastnotes;

import android.os.AsyncTask;
import android.os.Bundle;
import android.app.ListActivity;
import android.content.Intent;
import android.database.Cursor;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.widget.AdapterView;
import android.widget.CursorAdapter;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;
import android.widget.AdapterView.OnItemClickListener;

public class Notesli extends ListActivity {

     public static final String ROW_ID = "row_id";
     private ListView conListView;
     private CursorAdapter conAdapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        conListView=getListView();
        conListView.setOnItemClickListener(viewConListener);

        // map each name to a TextView
        String[] from = new String[] { "name" };
        int[] to = new int[] { R.id.postslist };

        conAdapter = new SimpleCursorAdapter(Notesli.this, R.layout.tlist, null, from, to);
        setListAdapter(conAdapter); // set adapter
    }

    @Override
    protected void onResume() 
    {
       super.onResume();  
       new GetContacts().execute((Object[]) null);
     } 

    @Override
    protected void onStop() 
    {
       Cursor cursor = conAdapter.getCursor();

       if (cursor != null) 
          cursor.deactivate();

       conAdapter.changeCursor(null);
       super.onStop();
    }    

    private class GetContacts extends AsyncTask<Object, Object, Cursor> 
    {
       DatabaseConnector dbConnector = new DatabaseConnector(Notesli.this);

       @Override
       protected Cursor doInBackground(Object... params)
       {
          dbConnector.open();
          return dbConnector.getAllContacts(); 
       } 

       @Override
       protected void onPostExecute(Cursor result)
       {
          conAdapter.changeCursor(result); // set the adapter's Cursor
          dbConnector.close();
       } 
    } 

    @Override
    public boolean onCreateOptionsMenu(Menu menu) 
    {
       super.onCreateOptionsMenu(menu);
       MenuInflater inflater = getMenuInflater();
       inflater.inflate(R.menu.corefile, menu);
       return true;
    }   

    @Override
    public boolean onOptionsItemSelected(MenuItem item) 
    {
       Intent addContact = new Intent(Notesli.this, Corefile.class);
       startActivity(addContact);
       return super.onOptionsItemSelected(item);
    }

    OnItemClickListener viewConListener = new OnItemClickListener() 
    {
       public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,long arg3) 
       {         
          Intent viewCon = new Intent(Notesli.this, ViewNotes.class);
          viewCon.putExtra(ROW_ID, arg3);
          startActivity(viewCon);
       }
    };    

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T06:36:53.317

您需要通过扩展任何 Adapter 类来实现您的 CustomArrayAdapter。从那里你必须使用任何标志检查它是否是已保存的条目，如果是，则显示你的第一个文本视图，否则只需清空/隐藏你的文本视图。

为您的列表项容器自定义，该容器包含自定义类中的数据，该类具有一个布尔对象来标识当前保存条目。当您编辑/创建新注释时，只需在设置此 true 之前将对象值标记为 true，您必须迭代所有其他列表项并将所有项目标志设置为 false，然后将当前项目标志设置为 true。

现在，无论您的 Adapter 扩展它，您都必须实现 getView()。在此方法中，通过基于位置获取列表项来检查值，如果为真则获取项标志值，然后将您的第一个文本视图设置为可见，否则设置为其他人。

# grails - 解析 JSON 日期

> ID：14290877
> 
> 赞同：0
> 
> 时间：2013-01-12T06:21:38.930
> 
> 标签：grails, groovy, grails-2.0

我使用 Grails 作为服务器，使用 ExtJS 作为客户端。现在我需要使用 JSON 中的特定日期值更新域的日期字段。但是当我想用特定日期更新时，错误是这样的

> 无法将具有类“java.lang.String”的对象“dd MM，yyyy”转换为类“java.util.Date”

现在如何将特定日期从 JSON 更新到数据库中？这是我的服务器更新操作：

```
def update(json) {
    def count = 0
    def flag = true
    def installments = []
    def pdate = json.payDate
    def payDate = pdate.format("dd MM, yyyy")
    def newCashPay = Double.parseDouble("${json.cashPay}")
    def newReturnAmount = Double.parseDouble("${json.returnAmount}")
    if(json instanceof JSONObject){            
        def c = Installment.get(Integer.parseInt("${json.id}"))
        if(c){   
            c.activeFlag = true
            c.cashPay = newCashPay
            c.returnAmount = newReturnAmount
            c.payDate = payDate
            if(c.validate()){
                c.save()
            }else{                        
                c.errors.each {
                    println it
                }
            }
        }

        def installment = [id:c.id, accNo:c.accNo, memberNo:c.memberNo, branchId:c.branchId, installmentNo:c.installmentNo, weekStart:c.weekStart, weekEnd:c.weekEnd, payDate:c.payDate, payAmount:c.payAmount, lateFee:c.lateFee, cashPay:c.cashPay, returnAmount:c.returnAmount, activeFlag:c.activeFlag]
        installments << installment
        flag = flag && true
        count++
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T07:48:32.107

代替

```
def payDate = pdate.format("dd MM, yyyy") 
```

你不是说

```
def payDate = Date.parse( "dd MM, yyyy", pdate ) 
```

# reverse-engineering - 使用 objdump 反汇编平面二进制文件

> ID：14290879
> 
> 赞同：48
> 
> 时间：2013-01-12T06:21:49.447
> 
> 标签：reverse-engineering, disassembly, objdump

我可以使用 objdump 反汇编一个平面二进制文件吗？

我熟悉使用以下方法反汇编结构化二进制可执行文件，例如 ELF 文件：

```
objdump -d file.elf 
```

但是如果我有一个我知道应该加载的平面二进制文件，例如地址 0xabcd1000，我可以要求 objdump 反汇编它吗？我尝试提供诸如 '--start-address=0xabcd1000' 之类的选项，但 objdump 只是声明它无法识别格式。

我对如何反汇编文件有其他想法，但我想知道 objdump 是否可以提供一个简单的解决方案。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-01-13T00:03:23.923

我在另一个论坛上找到了我自己问题的解决方案。它看起来像这样：

```
objdump -b binary --adjust-vma=0xabcd1000 -D file.bin 
```

我已经对此进行了测试，并且可以正常工作。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2015-12-22T20:48:37.587

[starblue](https://stackoverflow.com/a/1737110/2171120)和[hlovdal](https://stackoverflow.com/a/1737105/2171120)都有部分规范答案。如果你想反汇编原始 i8086 代码，你通常需要 Intel 语法，而不是 AT&T 语法，所以使用：

```
objdump -D -Mintel,i8086 -b binary -m i386 mbr.bin
objdump -D -Mintel,i386 -b binary -m i386 foo.bin    # for 32-bit code
objdump -D -Mintel,x86-64 -b binary -m i386 foo.bin  # for 64-bit code 
```

如果您的代码是 ELF（或 a.out（或 (E)COFF)），您可以使用以下简称：

```
objdump -D -Mintel,i8086 a.out  # disassembles the entire file
objdump -d -Mintel,i8086 a.out  # disassembles only code sections 
```

对于 32 位或 64 位代码，省略`,8086`; ELF 标头已包含此信息。

`ndisasm`，正如[jameslin](https://stackoverflow.com/a/6620854/2171120)所建议的那样，也是一个不错的选择，但`objdump`通常随操作系统一起提供，并且可以处理 GNU binutils 支持的所有架构（GCC 支持的那些架构的超集），并且它的输出通常可以输入 GNU `as`（ndisasm 通常可以`nasm`当然，被喂进去）。

[Peter Cordes](https://stackoverflow.com/users/224132/peter-cordes)建议“<a href="http://agner.org/optimize/" rel="noreferrer">Agner Fog 的 objconv 非常好。它将标签放在分支目标上，从而更容易弄清楚代码的作用。它可以反汇编成 NASM、YASM、MASM 或 AT&T (GNU) 语法。”</p>

[多媒体 Mike](https://stackoverflow.com/q/14290879/2171120)已经知道了`--adjust-vma`；`ndisasm`等效是选项`-o`。

例如，要反汇编`sh4`代码（我使用 Debian 中的一个二进制文件进行测试），请将其与 GNU binutils 一起使用（几乎所有其他反汇编程序都仅限于一个平台，例如带有`ndisasm`and的 x86 `objconv`）：

```
objdump -D -b binary -m sh -EL x 
```

The`-m`是机器，`-EL`意思是 Little Endian（代替`sh4eb`使用`-EB`），这与存在于任一字节序中的架构相关。

# deployment - 使用 heroku 部署烧瓶应用程序

> ID：14290883
> 
> 赞同：0
> 
> 时间：2013-01-12T06:22:54.353
> 
> 标签：deployment, heroku, flask

我开始按照[此处](https://devcenter.heroku.com/articles/python)`heroku`找到的部署烧瓶应用程序的教程进行操作。

我准确地跟踪了一切。我可以部署在我的本地服务器上，也可以在完成后部署应用程序`heroku run bash`。

不幸的是，当我尝试在打开 heroku 的情况下进行部署时，我收到以下错误：

```
at=error code=H10 desc="App crashed" method=GET path=/ host=sleepy-tundra-8811.herokuapp.com fwd=67.212.10.54 dyno= queue= wait= connect= service= status=503 bytes= 
```

我的错误日志中没有任何其他以下错误，只有在运行 heroku open 后才会出现。

谢谢

# jakarta-ee - 两个都在处理队列的 JBoss 服务器是否有 JavaEE 锁定机制？

> ID：14290887
> 
> 赞同：0
> 
> 时间：2013-01-12T06:23:31.117
> 
> 标签：jakarta-ee, concurrency, jboss, cluster-computing

我有 2 台相同的独立 JBoss 5.1 服务器。我正在编写一个定期唤醒以处理队列的应用程序，该队列在 Oracle 数据库中实现为表。

伪代码是：

1.  醒来。
2.  现在的时间是早上 7 点到晚上 7 点之间吗？如果是，请继续。如果没有，请继续睡 5 分钟。
3.  读取“队列”表中第一行的内容
4.  将 HTTP POST 发送到另一台服务器，其中包含在步骤 3 中读取的内容。
5.  如果 POST 成功，则删除该行。否则，将行留在表中。
6.  移动到下一行并重复步骤 3-5，直到表格结束。
7.  睡5分钟。

我的问题是：如何确保一行不被处理两次（导致两个 POST）？

是否有我可以利用的 JavaEE 注释，或者 JBoss 内置的锁定机制？

理想的解决方案将导致应用程序以相同的方式部署到两台服务器；也就是说，同一个应用程序驻留在两个节点中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T21:06:18.233

如果您不能使用 JMS 队列（在这种情况下应该是自然的选择），您可以使用 HA Singleton。它就像集群范围的单例一样工作，当具有活动单例的服务器崩溃时，单例在第二台服务器上被激活。

在您的情况下，单例 bean 可以在两个服务器（本地和远程）之间分离工作，那么就不需要使用任何锁。

我在 JBoss 7.1 上使用了 ha-singleton，但此功能也可用于 Jboss 5.x（[查看此处](https://community.jboss.org/wiki/WritingAClusteredHASingletonServiceAS5x)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T20:46:22.627

您可以使用具有多个使用者的 JMS 队列。

如果配置正确，每条消息将只传递给一个消费者，JMS 提供者将在多个消费者之间进行“负载平衡”。

# python - 为关键字刮取pdf报纸

> ID：14290891
> 
> 赞同：1
> 
> 时间：2013-01-12T06:23:59.670
> 
> 标签：python, pdf, pdf-scraping

我有几百份 pdf 格式的报纸和一个关键字列表。我的最终目标是获取提及特定关键字的文章数量，记住一个 pdf 可能包含多个提及相同关键字的文章。

我的问题是，当我将 pdf 文件转换为纯文本时，我丢失了格式，这使得无法知道文章何时开始以及何时结束。

解决这个问题的最佳方法是什么，因为现在我认为这是不可能的。

我目前正在为这个项目使用 python 和 pdf 库 pdfminer。这是其中一个pdf。 [http://www.gulf-times.com/PDFLinks/streams/2011/2/27/2_418617_1_255.02.11.pdf](http://www.gulf-times.com/PDFLinks/streams/2011/2/27/2_418617_1_255.02.11.pdf)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T08:14:48.367

根据文本的格式，您*可能*会想出某种识别标题的启发式方法 - 比如说，它是一行少于 15 个单词的行，并且不包含句号/句点字符。这会被报纸名称之类的东西弄糊涂，但希望他们后面不会有大量的“非标题”文本，以免把结果弄得一团糟。

这依赖于将每篇文章保持连续的文本转换（而不是仅仅撕掉原始列并将文章混合起来）。如果它们混淆了，我会说你几乎没有机会 - 即使你能找到一个保持格式的 PDF 库，也不一定容易分辨出文章的“边界框”是什么。例如，许多论文提出了标注和其他特征，即使是相当高级的启发式也可能会混淆。

实际上进行计数很简单。如果我提到的假设成立，你可能最终看起来像：

```
import re
import string

non_word_re = re.compile(r"[^-\w']+")

article = ""
for filename in list_of_text_files:
    with open(filename, "r") as fd:
        for line in fd:
            # Split line on non-word characters and lowercase them for matching.
            words = [i.lower() for i in non_word_re.split(line)
                     if i and i[0] in string.ascii_letters]
            if not words:
                continue
            # Check for headline as the start of a new article.
            if len(words) < 15 and "." not in line:
                if article:
                    # Process previous article
                    handle_article_word_counts(article, counts)
                article = line.strip()
                counts = {}
                continue
            # Only process body text within an article.
            if article:
                for word in words:
                    count[word] = count.get(word, 0) + 1
    if article:
        handle_article_word_counts(article, counts)
    article = "" 
```

您需要定义`handle_article_word_counts()`对您想要的数据进行任何索引，但每个键都`counts`将是一个潜在的关键字（包括诸如`and`and之类的东西`the`，因此您可能想要删除最常用的单词或类似的东西）。

基本上，这取决于您希望结果有多准确。我认为上面有*一些机会*给你一个*公平*的近似值，但它有我已经提到的所有假设和警告——例如，如果事实证明标题可以跨行，那么你需要修改上面的启发式. 希望它至少能给你一些基础。

# ruby - 带选择的 GPIO 监控

> ID：14290893
> 
> 赞同：5
> 
> 时间：2013-01-12T06:24:02.857
> 
> 标签：ruby, linux, gpio

我正在尝试监视 GPIO 引脚，并且根据 Linux 文档，我应该能够通过使用以下命令监视`/sys/class/gpio/gpio##/value`文件来做到这一点`select`：

```
"value" ... reads as either 0 (low) or 1 (high).  If the GPIO
    is configured as an output, this value may be written;
    any nonzero value is treated as high.

    If the pin can be configured as interrupt-generating interrupt
    and if it has been configured to generate interrupts (see the
    description of "edge"), you can poll(2) on that file and
    poll(2) will return whenever the interrupt was triggered. If
    you use poll(2), set the events POLLPRI and POLLERR. If you
    use select(2), set the file descriptor in exceptfds. After
    poll(2) returns, either lseek(2) to the beginning of the sysfs
    file and read the new value or close the file and re-open it 
```

我正在尝试在 Ruby 中执行此操作，并且根据它调用的[IO.Select 文档](http://www.ruby-doc.org/core-1.9.3/IO.html#method-c-select)`select(2)`。

因此，有了这些知识，我将以下测试程序放在一起：

```
fd = File.open("/sys/class/gpio/gpio17/value", "r")

loop do
  rs,ws,es = IO.select(nil, nil, [fd], 5)
  if es
    r = es[0]
    puts r.read(1)
  else
    puts "timeout"
  end
end 
```

但是，它不会检测到任何引脚更改。当我启动这个应用程序时，它会立即落入`if`块中并显示引脚的当前值，然后每 5 秒打印一次`timeout`。

我读错了文档吗？应该不能`select`监控吧？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T19:16:57.093

在`select`正确触发 GPIO 引脚之前，您需要设置引脚的边沿触发。从[GPIO 文档](http://www.kernel.org/doc/Documentation/gpio.txt)：

```
"edge" ... reads as either "none", "rising", "falling", or
    "both". Write these strings to select the signal edge(s)
    that will make poll(2) on the "value" file return.

    This file exists only if the pin can be configured as an
    interrupt generating input pin. 
```

在 Ruby 中很简单：

```
File.open("/sys/class/gpio/gpio17/edge", "w") { |f| f.write("both") } 
```

上面的完整示例如下所示：

```
fd = File.open("/sys/class/gpio/gpio17/value", "r")
File.open("/sys/class/gpio/gpio17/edge", "w") { |f| f.write("both") }

loop do
  rs,ws,es = IO.select(nil, nil, [fd], 5)
  if es
    r = es[0]
    puts r.read(1)
  else
    puts "timeout"
  end
end 
```

# c# - 尝试将值插入 MS 访问时插入错误

> ID：14290896
> 
> 赞同：0
> 
> 时间：2013-01-12T06:24:17.113
> 
> 标签：c#

我是 C# 的新手。请协助！

尝试在 MS 访问中将值插入我的数据库时出现错误错误消息是：索引（从零开始）必须大于或等于零且小于参数列表的大小。

下面是我的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Data.OleDb;

namespace AzureSecureStore
{
    public partial class Client : Form
    {
        OleDbConnection vcon = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\SB18\Documents\Visual Studio 2010\Projects\AzureSecureStore\AzureSecureStore\AzcureSecureStore Database.accdb");
        public Client()
        {
            InitializeComponent();

        }

        private void button1_Click(object sender, EventArgs e)
        {

        }

        private void dataGridView1_CellContentClick(object sender, DataGridViewCellEventArgs e)
        {

        }

        private void button5_Click(object sender, EventArgs e)
        {

        }

        private void button4_Click(object sender, EventArgs e)
        {

        }

        private void Client_Load(object sender, EventArgs e)
        {
            // TODO: This line of code loads data into the 'azcureSecureStore_DatabaseDataSet5.Client' table. You can move, or remove it, as needed.
            this.clientTableAdapter.Fill(this.azcureSecureStore_DatabaseDataSet5.Client);
            // TODO: This line of code loads data into the 'azcureSecureStore_DatabaseDataSet2.Client' table. You can move, or remove it, as needed.
            //this.clientTableAdapter.Fill(this.azcureSecureStore_DatabaseDataSet2.Client);

        }

        private void button2_Click(object sender, EventArgs e)
        {
            string ab = string.Format("insert into Client values({0}, '{1}', '{2}', {3}, {4}, '{5}', {6})", textBox1.Text, textBox2.Text, int.Parse(textBox3.Text), int.Parse(textBox4.Text), textBox9.Text, int.Parse(textBox10.Text));
            OleDbCommand vcom = new OleDbCommand(ab, vcon);
            vcom.ExecuteNonQuery();
            MessageBox.Show("Data stored successfully");
            vcom.Dispose();
        }

        private void textBox1_TextChanged(object sender, EventArgs e)
        {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T07:02:11.637

您在这一行中有一个太多的参数占位符：

```
string ab = string.Format("insert into Client values({0}, '{1}', '{2}', {3}, {4}, '{5}', {6})",
    textBox1.Text, textBox2.Text, int.Parse(textBox3.Text), int.Parse(textBox4.Text), textBox9.Text, int.Parse(textBox10.Text)); 
```

您有 7 个占位符，但有 6 个参数。尝试更改为：

```
string ab = string.Format("insert into Client values({0}, '{1}', '{2}', {3}, {4}, '{5}')",
    textBox1.Text, textBox2.Text, int.Parse(textBox3.Text), int.Parse(textBox4.Text), textBox9.Text, int.Parse(textBox10.Text)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T06:57:51.080

你有没有像这样改变你的连接字符串

```
OleDbConnection vcon = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\SB18\Documents\Visual Studio 2010\Projects\AzureSecureStore\AzureSecureStore\AzcureSecureStore Database.accdb; Persist Security Info=False;"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T06:52:16.897

**你应该在你的按钮点击事件中尝试这样**

```
OleDbConnection conn = new OleDbConnection("Provider=Microsoft.Jet.Oledb.4.0;" & _

        "Data Source=C:\Database\RAAFeedback.mdb")

conn.Open();

OleDbCommand cmd = new OleDbCommand();

cmd.Connection = connection;

cmd.CommandText = "INSERT INTO Feedback([FirstName],[LastName],[Email],[Priphone],[Secphone],[Comment]) & _

VALUES (@FirstName,@LastName,@Priphone,@Secphone,@Comment)";

cmd.Parameters.Add("@FirstName", OleDbType.VarChar).value = FirstName;

cmd.Parameters.Add("@LastName", OleDbType.VarChar).value = LastName;

cmd.Parameters.Add("@Email", OleDbType.VarChar).value = Email;

cmd.Parameters.Add("@Priphone", OleDbType.VarChar).value = Priphone;

cmd.Parameters.Add("@Secphone", OleDbType.VarChar).value = Secphone;

cmd.Parameters.Add("@Comment", OleDbType.VarChar).value = Comment;

cmd.ExecuteNonQuery();

conn.Close();

'Clear the text boxes after a new insert

        FirstName.Text = ""

        LastName.Text = ""

        Email.Text = ""

        Priphone.Text = ""

        Secphone.Text = ""

        Comment.Text = "" 
```

# google-maps-api-3 - 设置自定义 Google Maps v3 控件状态

> ID：14290897
> 
> 赞同：0
> 
> 时间：2013-01-12T06:24:19.840
> 
> 标签：google-maps-api-3

我已经开始使用本教程将自定义控件添加到 GMaps v3 地图：

[https://developers.google.com/maps/documentation/javascript/controls?hl=fr#CustomControls](https://developers.google.com/maps/documentation/javascript/controls?hl=fr#CustomControls)

最后一个示例特别演示了如何使用控件保存状态。我有两个控件，它们应该协同工作，当单击控件 A 时，它应该明显地变为粗体文本，控件 B 变为普通文本，当单击 B 时，控件 A 被重置。我试图通过保存状态来做到这一点，在这种情况下是按钮的“选定”状态，但我不确定下一步该去哪里重置按钮集中未选择的按钮，更改按钮字体重量， ETC。

简而言之，我试图重现一个与本机地图类型选择器按钮具有相同行为的按钮集。

有关如何最好地解决此问题的任何教程或指示？我将重新发布上面链接示例中的代码，因为我的基本相同，除了我的属性被称为`selected_`.

```
// Define a property to hold the Home state.
CustomControl.prototype.selected_ = null;

// Define setters and getters for this property.
CustomControl.prototype.getSelected = function() {
  return this.selected_;
}

CustomControl.prototype.setSelected = function(selected) {
  this.selected_ = selected;
}

function CustomControl(map, div, selected) {

  // Get the control DIV. We'll attach our control UI to this DIV.
  var controlDiv = div;

  // We set up a variable for the 'this' keyword since we're adding event
  // listeners later and 'this' will be out of scope.
  var control = this;

  // Set the home property upon construction.
  control.selected_ = selected;

  // styling removed //

  // Setup the click event listener
  google.maps.event.addDomListener(setSelectedUI, 'click', function() {
    control.setSelected(true);
  });
} 
```

在尝试使用按钮存储选定状态时，我是否会以完全错误的方式来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T14:02:52.933

您可以迭代所有控件（在给定的 controlPosition 处），比较当前节点是否为选定节点，并修改样式

示例（将给`selected`活动控件一个类名“”并清除其他控件的类名，因此您可以使用全局样式表来应用样式）

```
google.maps.event.addDomListener(setSelectedUI, 'click', function() {
        var _this=this;
          map.controls[google.maps.ControlPosition.TOP_RIGHT]
               .forEach(function(node){
            node.className=(node==_this.parentNode)?'selected':''
          });
          /* proceed with  your control-action*/
        }); 
```

我不确定`setSelectedUI`您的代码中有什么，但您必须将第一个参数设置为函数中`addDomListener`的对象，该参数与链接示例中的含义相同`controlUI`。

# java - java中的多个接口具有相同的方法名和变量名

> ID：14290902
> 
> 赞同：2
> 
> 时间：2013-01-12T06:25:16.707
> 
> 标签：java, oop, interface

有一个接口 1 具有方法 1、变量 x 和接口 2 具有方法 1、变量 x。为什么它在第 1 行而不在第 2 行显示错误？

```
interface interface1{
    public int x =10;
    public void method1();
}
interface interface2{
    public int x =11;
    public void method1();
}

public class Test implements interface1, interface2{

    int y = x; // Line 1
    @Override
    public void method1() {  //Line 2
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T07:13:21.250

'x' 是模棱两可的，因为在范围内有两个，每个接口一个。相比之下，'method1()' 则不然，因为根据 Java 的规则，Test 中的定义满足提供两个接口中定义的实现的要求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T06:35:59.307

```
interface interface1{
  public static final int x =10;
  public void method1();
}

interface interface2{
  public static final int x =11;
  public void method1();
}

public class Test implements interface1, interface2{

  int y = interface1.x; // Line 1 or int y = interface2.x;
  @Override
    public void method1() {  //Line 2
  }

} 
```

这是正确的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T06:29:04.797

因为你的任务是模棱两可的。您必须指定是否需要`interface1.x`或`interface2.x`.

例如：

```
public class Test implements interface1, interface2{

  int y = interface1.x; // Line 1
  @Override
    public void method1() {  //Line 2
    }

} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-12T07:00:01.933

在最终变量`interaface1.x`中，`interface2.x`；如果我们采用`x`的`interface1`对象引用可能与第二个接口不同。

但是，`method1()`如果我们采用任何接口，方法的主体将是相同的，因为`interface1.method1()`，与 相同`interface2.mathod1()`。但另一方面与`x`。 `interface1.x`不一样`interface2.x`

# python - 使用 python 装饰器进行身份验证

> ID：14290905
> 
> 赞同：-1
> 
> 时间：2013-01-12T06:25:32.790
> 
> 标签：python

我一直在尝试学习 python 装饰器并编写了以下代码。但它不断给出错误。

```
import os
import sys

def authenticate(fn):
    def wrapper(*args):
        euid = os.geteuid()
        if euid != 0:
            print "This command requires privliged mode. Enter password.."
            args = ['sudo', sys.executable] + sys.argv + [os.environ]
            os.execlpe('sudo', *args)
        fn(*args)
    return wrapper

@authenticate
def show_files(dir):
    files = [f for f in os.listdir(dir)]
    for file in files:
        if os.path.isfile(file):
            print file

dir = raw_input("Please enter a directory name\t")
show_files(dir) 
```

我得到以下回溯：

```
Traceback (most recent call last):
    File "auth1.py", line 24, in show_files(dir)
    File "auth1.py", line 11, in wrapper fn(*args)
    File "auth1.py", line 16, in show_files files = [f for f in os.listdir(dir)]
    OSError: [Errno 2] No such file or directory: '' 
```

* * *

这个想法是`show_files`只对可以验证自己的用户运行该功能。我的问题似乎是身份验证的编写方式和`execlpe`调用方式。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T09:15:46.207

您知道问题出在装饰器语法还是 execlpe/sudo 部分？尝试一次解决其中一项挑战。你的装饰器看起来不错，除非我在那里遗漏了一些东西——我没有尝试运行代码。

祝你好运！

乌里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T08:33:03.067

以下代码工作正常。感谢那些以有帮助的方式回答的人。

# !/usr/bin/python

导入操作系统

导入系统

def 验证（fn）：

```
def wrapper():

    euid = os.geteuid()

    if euid != 0:

        print "This command requires privliged mode. Enter password.."

        os.execvp("sudo", ["sudo"] + sys.argv)

    fn()

return wrapper 
```

@认证

定义显示文件（）：

```
dir = raw_input("Please enter a directory name\t")

files = [f for f in os.listdir(dir)]

for file in files:

    if os.path.isfile(file):

        print file 
```

显示文件（）

# c# - LINQ 获取类的属性

> ID：14290906
> 
> 赞同：1
> 
> 时间：2013-01-12T06:25:39.653
> 
> 标签：c#, linq, linq-to-objects

如何使用 linq 获取对象/类的属性列表？

```
public class Person  { 
public string Name   { get; set; } 
public string Age    { get; set; } 
public string Gender { get; set; } 
} 
```

我想{"Name","Age","Gender"}。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T06:42:43.207

正如之前的评论者所提到的，反射是您应该用来获取此信息的工具。

下面是一个小示例程序，它将从一个假想的“Person”类中检索和显示属性名称：

```
System.Type type = typeof(Person);
System.Reflection.PropertyInfo[] properties = type.GetProperties();

foreach (System.Reflection.PropertyInfo property in properties)
    Console.WriteLine(property.Name); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T06:39:01.757

您将需要使用反射。这是我在许多项目中使用过的功能。

```
private List<MemberInfo> GetMembers(Type objectType, MemberTypes memberType)
{
    List<MemberInfo> members = new List<MemberInfo>();

    Assembly asm = Assembly.GetAssembly(objectType);
    foreach (Type t in asm.GetExportedTypes().Where((Type testType) => object.ReferenceEquals(testType, objectType))) {
        foreach (MemberInfo mi in t.GetMembers().Where((MemberInfo member) => member.MemberType == memberType)) {
            switch (memberType) {
                case MemberTypes.Property:
                    members.Add(mi);
                    break;
                case MemberTypes.Method:
                    bool isValid = true;

                    foreach (PropertyInfo pi in t.GetProperties()) {
                        if ((pi.CanWrite && pi.GetSetMethod().Name == mi.Name) || (pi.CanRead && pi.GetGetMethod().Name == mi.Name)) {
                            isValid = false;
                            break;
                        }
                    }

                    if (isValid)
                        members.Add(mi);
                    break;
            }
        }
    }

    return members.OrderBy((MemberInfo mi) => mi.Name).ToList();
} 
```

要调用它，您可以使用，例如：

```
var properties = GetMembers(typeof(myObject), MemberTypes.Property) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T06:33:58.703

```
typeof(Person).GetProperty("Name") 
```

您可以使用反射获取各个属性。有关更多详细信息，请阅读[此处](http://www.codeproject.com/Articles/17269/Reflection-in-C-Tutorial)。

# c# - 当我在 IIS 中托管我的 Dot Net 应用程序时，Excel 文件无法打开

> ID：14290908
> 
> 赞同：1
> 
> 时间：2013-01-12T06:25:49.667
> 
> 标签：c#, asp.net, excel, iis, comexception

> 我有我的 Dot Net 应用程序，我通过单击按钮从 DB 获取路径来打开 Excel 文件，它工作正常，但是当我在 IIS 中托管我的应用程序时，我得到以下异常 -

```
 System.Runtime.InteropServices.COMException (0x800A03EC): Exception from HRESULT: 0x800A03EC 
 at Excel.Workbooks.Open(String Filename, Object UpdateLinks, Object ReadOnly, 
                          Object Format, Object Password, Object WriteResPassword, 
                          Object IgnoreReadOnlyRecommended, Object Origin, 
                          Object Delimiter, Object Editable, Object Notify, 
                          Object Converter, Object AddToMru, Object Local, 
                          Object CorruptLoad) 
```

请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T06:43:33.180

我通常发现这些是与 IIS 中的网站关联的用户的权限问题。确保 IIS 用户有权访问该文件。

顺便说一句，我可能会考虑使用不需要使用 Excel 自动化的第 3 方 DLL。如果您不需要 XLSX 支持，我在[NPOI](http://npoi.codeplex.com/)方面取得了很好的成功。只是一个建议。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T06:48:45.530

您是否冒充用户参考[http://support.microsoft.com/kb/306158](http://support.microsoft.com/kb/306158)

# backbone.js - 使用哪个 Mobile js 库？

> ID：14290912
> 
> 赞同：1
> 
> 时间：2013-01-12T06:26:39.590
> 
> 标签：backbone.js, zepto, jqmobi

我有一个骨干网络应用程序，我正在针对移动网络以及集成到 HTML 5 移动应用程序进行优化。因此，我正在评估要使用的不同移动 js 库，我有几个问题。

* * *

1）据此，zepto 在移动设备上实际上比 jquery 慢，尽管它专注于移动设备。

[www.codefessions.com/2012/08/performance-of-jquery-compatible-mobile.html](http://www.codefessions.com/2012/08/performance-of-jquery-compatible-mobile.html)

我是否遗漏了为什么我应该使用 zepto？

2) jQMobi 似乎是最快的 JS 框架 - 如果我进行 swtchover，我应该期待奇怪的错误等吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T07:15:34.903

我最终没有使用任何库，因为它们对我来说都很糟糕。而且由于我不支持firefox和多个版本的ie，我可以用原生javascript做很多事情（选择器，css3动画，...）

1.  是的 zepto 速度较慢，但​​尺寸较小，这会导致页面加载速度更快。更少的带宽和更少的解析时间。适用于移动网站而不是移动 htm5 应用程序

2.  我在 iphone 4 中检查了[jqMobi 演示](http://jqmobi.com/testdrive)，但并不像我想要的那样流畅。我也无法创建我的布局。

附加点：使用[Turbolinkidea](https://github.com/rails/turbolinks)做手机网站，简单有效

# session - Nginx 强制 SSL (https) 与 cookie 转发

> ID：14290925
> 
> 赞同：1
> 
> 时间：2013-01-12T06:29:46.960
> 
> 标签：session, cookies, ssl, nginx, rewrite

我正在强制`SSL`使用虚拟主机`nginx`：

```
if ($ssl_protocol = "") {
    rewrite ^ https://www.mydomain.com$request_uri? permanent;
} 
```

问题是，如果用户使用会话（cookie）登录，然后打开一个新选项卡并转到`http://www.mydomain.com`此工作并转发到`https`，但会话丢失。我认为是因为 cookie 没有通过 nginx 的重写规则转发。

有没有办法转发 cookie 以及运行重写？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:03:54.790

Cookie 与重定向无关。发送“重定向”消息的服务器与它无关。纯粹是网络浏览器决定是否在给定请求上发送 cookie。这基于已在 cookie 上设置的属性，例如 Path、Domain、Secure 和 HttpOnly。我想你会发现你的用户 cookie 上的属性的设置方式告诉浏览器在访问新 URL 时不要发送它们。例如，如果您要重定向到不同的域，这肯定会发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T05:54:28.500

解决这个问题的一种方法是将这两个问题分开，维护会话和身份验证。然后，您可以使会话 ID 不受保护，仅用于维护会话，并使用单独的 cookie 来检查登录状态。

如果站点使用 HTTP 和 HTTPS 混合使用，则 id 将在 URL 中以明文形式传输

# iphone - SectionedTableView 中的部分标题

> ID：14290929
> 
> 赞同：1
> 
> 时间：2013-01-12T06:30:17.867
> 
> 标签：iphone, uitableview, xcode4.5

我创建了一个分段的 tableView，我需要以编程方式设置标题。但标题不是静态的。我想显示日期和日期，它们又不是静态的作为特定部分的标题。我将它们都存储在 NSString 中。

在像一家公司这样的情况下，我必须像这样显示：

```
1/12/2013 Saturday                        //section 0
13:00hrs  14:00hrs  15:00hrs

1/13/2013 Sunday                          //section 1
14:00hrs  15:00 hrs 
```

对于另一家公司，我必须这样显示：

```
1/15/2013 Tuesday                        //section 0
13:00hrs  14:00hrs  15:00hrs

1/16/2013 Wednesday                      //section 1
14:00hrs  15:00 hrs

1/17/2013 Thursday                       //section 2
14:00hrs  15:00 hrs 
```

像这样，但在这里我没有静态的公司数量和静态的日期和日期。我正在检查特定条件并在特定日期和日期的部分中显示。我必须将标题设置为该部分的日期和日期。

我该怎么做？

日期和日期的计算如下：

```
-(void)LoadData
{

for(int i=0;i<5;i++)
    {

        NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];

        NSDateComponents *offsetComponents = [[NSDateComponents alloc] init];
        [offsetComponents setDay:i];
        NSDate *nextDate = [gregorian dateByAddingComponents:offsetComponents toDate: [NSDate date]options:0];
        [offsetComponents release];
        [gregorian release];

        NSDateFormatter *formatterforGridSectionDate=[[[NSDateFormatter alloc]init] autorelease];
         formatterforGridSectionDate.dateFormat = @"MM/dd/yyyy";
        getDateinGridSection=[[NSString stringWithFormat:@"%@",[formatterforGridSectionDate stringFromDate:nextDate]] componentsSeparatedByString:@""];
        gridSectionDate=[[getDateinGridSection valueForKey:@"description"] componentsJoinedByString:@""];
        NSLog(@"%@",gridSectionDate); // Here I get date in MM/dd/yyyy format 
        weekdayString=[nextDate descriptionWithCalendarFormat:@"%A" timeZone:nil locale:[[NSUserDefaults standardUserDefaults]dictionaryRepresentation]];
        NSLog(@"Day :%@",weekdayString);
        [self check];

    }
      //creating a tableView 

}

-(void)check
{
 //calling the service url for the particular day and date and store the values in array
        NSLog(@"%@",array);

        if([array count]>0)
       {
          [tblViewarray addObject:array];

       }
} 
```

如何获取日期和日期作为在 tableview 中加载哪个部分的标题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T06:40:58.587

**更新：**

在这里，您的要求是在每个部分显示带有日期名称的日期`UITableView`。

您有日期数组，例如名称为**yourDateArray**，在这里我创建了代码，用于如何在每个部分以您所需的日期格式显示该日期。

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
    return [yourDateArray count];
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section{

    NSString *str = [yourDateArray objectAtIndex:section];

    NSDateFormatter *dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
    [dateFormatter setDateFormat:@"MM/dd/yyyy"];

    NSDate *date = [dateFormatter dateFromString: str];

    dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
    [dateFormatter setDateFormat:@"MM/dd/yyyy EEEE"];

    NSString *convertedString = [dateFormatter stringFromDate:date];
    NSLog(@"Converted String : %@",convertedString);

    return convertedString;
} 
```

# android - Android - 相机应用程序在提供目录时拒绝拍照

> ID：14290932
> 
> 赞同：1
> 
> 时间：2013-01-12T06:31:01.837
> 
> 标签：android, android-intent, camera

我正在开发我的第一个 android 应用程序并尝试创建一个意图来启动相机应用程序，拍照，然后返回带有图片 Uri 的应用程序。

当我使用以下代码时，它运行良好，但我只能拍摄低质量的照片。

```
 intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    startActivityForResult(intent, RESULT_TAKE_PICTURE); 
```

但是，当我尝试定义文件目录以保存高质量的图片时，相机应用程序的“确定”按钮无法正常工作，并且我的图片没有保存……而且我绝对没有错误消息。我的猜测是该应用程序无法在我提供的目录上写入，但我不明白为什么以及我应该做什么......

这是代码：

```
 File file = new File(
            Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES), 
            imageFileName);
    imageUri = Uri.fromFile(file);

    intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    intent.putExtra(MediaStore.EXTRA_OUTPUT, imageUri);
    startActivityForResult(intent, RESULT_TAKE_PICTURE); 
```

我的权限：

```
 <uses-permission android:name="android.permission.CAMERA"></uses-permission>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T06:49:06.717

这条线

```
 intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE); 
```

是错的。启动相机的意图应该是这样的

```
 Intent cameraIntent = new Intent("android.media.action.IMAGE_CAPTURE"); 
```

添加这一行，你就完成了。

确保您已在清单中添加这两行以在您的 android 应用程序中使用相机。

```
<uses-feature android:name="android.hardware.camera" />
<uses-feature android:name="android.hardware.camera.autofocus" /> 
```

希望它会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T07:21:40.457

我的方法略有不同，但看看这段代码是否有帮助。它在我的应用程序中运行良好。

```
Intent getCameraImage = new Intent("android.media.action.IMAGE_CAPTURE");

File cameraFolder;

if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED))
    cameraFolder = new File(android.os.Environment.getExternalStorageDirectory(),"your_folder_name");
else
    cameraFolder= StatusUpdate.this.getCacheDir();
if(!cameraFolder.exists())
    cameraFolder.mkdirs();

File photo = new File(Environment.getExternalStorageDirectory(), "your_folder_name/camera_snap.jpg");
getCameraImage.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(photo));
Uri initialURI = Uri.fromFile(photo);

startActivityForResult(getCameraImage, reqcdCameraImage); 
```

这将使用名称和扩展名：**camera_snap.jpg**保存指定文件夹中的图像，并且还将在*Uri initialURI*中投射相同的图像，以便您在可能的情况下显示它`ImageView`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T23:46:59.140

问题似乎有两个不同的来源：首先，模拟器似乎无法访问外部存储。我通过减少设备的内部和外部内存大小以某种方式解决了这个问题。

第二个问题来自我的图片名称。确实，我使用以下方法来生成名称：

```
 String timeStamp = SimpleDateFormat.getDateTimeInstance().format(new Date());
    String imageFileName = "picture_" + timeStamp + ".jpg"; 
```

它生成了一个带有“：”字符的名称，使相机无法创建文件。我将其替换为以下内容：

```
 SimpleDateFormat dateFormat = new SimpleDateFormat("yyyyMMdd'T'HHmmss");                    
    String timeStamp = dateFormat.format(new Date());
    String imageFileName = "picture_" + timeStamp + ".jpg"; 
```

现在一切正常！:)

# java - 为什么我不能在drawable下访问xml文件？

> ID：14290935
> 
> 赞同：1
> 
> 时间：2013-01-12T06:31:15.513
> 
> 标签：java, android

首先，我对 android 非常陌生，我对此了解不多。我正在尝试使用它，我现在正在关注本教程： [http ://www.androidhive.info/2011/08/android-标签布局教程/](http://www.androidhive.info/2011/08/android-tab-layout-tutorial/)

我创建了一个类如下

```
package com.example.tabbedactivity;

import android.app.TabActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.widget.TabHost;
import android.widget.TabHost.TabSpec;

public class TabbedActivity extends TabActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_tabbed);

        TabHost tabHost = getTabHost();

        // Tab for Photos
        TabSpec photospec = tabHost.newTabSpec("Photos");
        // setting Title and Icon for the Tab
        photospec.setIndicator("Photos", getResources().getDrawable(R.drawable.icon_photos_tab));
        Intent photosIntent = new Intent(this, PhotosActivity.class);
        photospec.setContent(photosIntent);

        // Tab for Songs
        TabSpec songspec = tabHost.newTabSpec("Songs");
        songspec.setIndicator("Songs", getResources().getDrawable(R.drawable.icon_songs_tab));
        Intent songsIntent = new Intent(this, SongsActivity.class);
        songspec.setContent(songsIntent);

        // Tab for Videos
        TabSpec videospec = tabHost.newTabSpec("Videos");
        videospec.setIndicator("Videos", getResources().getDrawable(R.drawable.icon_videos_tab));
        Intent videosIntent = new Intent(this, VideosActivity.class);
        videospec.setContent(videosIntent);

        // Adding all TabSpec to TabHost
        tabHost.addTab(photospec); // Adding photos tab
        tabHost.addTab(songspec); // Adding songs tab
        tabHost.addTab(videospec); // Adding videos ta
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_tabbed, menu);
        return true;
    }

} 
```

因此我在drawable下制作了三个xml文件，如下所示icon_photos_tab.xml

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- When selected, use grey -->
    <item android:drawable="@drawable/photo-hover"
          android:state_selected="true" />
    <!-- When not selected, use white-->
    <item android:drawable="@drawable/photo-unhover" />
</selector> 
```

icon_songs_tab.xml

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- When selected, use grey -->
    <item android:drawable="@drawable/music-hover"
          android:state_selected="true" />
    <!-- When not selected, use white-->
    <item android:drawable="@drawable/music-unhover" />
</selector> 
```

icon_videos_tab.xml

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- When selected, use grey -->
    <item android:drawable="@drawable/video-hover"
          android:state_selected="true" />
    <!-- When not selected, use white-->
    <item android:drawable="@drawable/video-unhover" />
</selector> 
```

现在，当我尝试在 drawable 下访问这些 xml 文件时 IDE 出现问题，这正是下面显示的代码行，它们是 TabbedActivity.java 的一部分（我在上面显示的类）

```
TabSpec songspec = tabHost.newTabSpec("Songs");
            songspec.setIndicator("Songs", getResources().getDrawable(R.drawable.icon_songs_tab));

TabSpec photospec = tabHost.newTabSpec("Photos");
            // setting Title and Icon for the Tab
            photospec.setIndicator("Photos", getResources().getDrawable(R.drawable.icon_photos_tab));

TabSpec videospec = tabHost.newTabSpec("Videos");
            videospec.setIndicator("Videos", getResources().getDrawable(R.drawable.icon_videos_tab)); 
```

错误说

> 此行有多个标记 - icon_photos_tab 无法解析或不是字段 - R.drawable 无法解析为变量

究竟可能是什么问题。（我对android真的很陌生。这有点像我的第一个应用程序，我还没有经过任何理论）

更新我在控制台上收到以下错误

```
[2013-01-12 12:32:02 - TabbedActivity] res\drawable-ldpi\video-hover.png: Invalid file name: must contain only [a-z0-9_.]
[2013-01-12 12:32:02 - TabbedActivity] res\drawable-mdpi\video-hover.png: Invalid file name: must contain only [a-z0-9_.]
[2013-01-12 12:32:02 - TabbedActivity] res\drawable-xhdpi\video-hover.png: Invalid file name: must contain only [a-z0-9_.]
[2013-01-12 12:32:02 - TabbedActivity] res\drawable-hdpi\video-unhover.png: Invalid file name: must contain only [a-z0-9_.]
[2013-01-12 12:32:02 - TabbedActivity] res\drawable-ldpi\video-unhover.png: Invalid file name: must contain only [a-z0-9_.]
[2013-01-12 12:32:02 - TabbedActivity] res\drawable-mdpi\video-unhover.png: Invalid file name: must contain only [a-z0-9_.]
[2013-01-12 12:32:02 - TabbedActivity] res\drawable-xhdpi\video-unhover.png: Invalid file name: must contain only [a-z0-9_.] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T07:04:36.523

我认为文件的名称正在造成问题。将 photo-hover 和 photo-unhover 的名称更改为 photo_hover 和 photo_unhover ，看看它是否有效......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T08:24:01.937

android 资源文件名不应包含`'-'`或大写字母。上面的错误表明文件名包含`'-'`字符。所以改变`'-'`as under score `'_'`。像这样更改您的可绘制图像文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T08:31:11.690

**聆听您的错误！**

我并不是说听起来粗鲁，但问题出在你打开的窗户外面的一个肥皂盒上，上面有一个扬声器：

> res\drawable-xhdpi\video-unhover.png：文件名无效：必须仅包含 [a-z0-9_.]

**必须只包含 [a-z0-9_.]** ，这告诉您XML 文件名中只允许小写字符`a`到`z`、数字`0`到`9`、`_`和字符。`.`您的文件名中有一个连字符`-`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T06:41:19.093

在我看来，您正在尝试引用不存在的资源 (icon_photos_tab)。您需要在可绘制文件夹中使用该名称的资源（XML 可绘制或 PNG 或其他东西）。

祝你好运。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-12T06:42:06.250

此错误背后的原因是您的某些 xml 文件中存在错误。

检查您的 res/ 文件夹，以确保其中包含的每个文件都没有错误。它会导致错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-12T06:43:31.090

您确定已将 XML 文件放在 /res/drawable 文件夹下吗？清理和重建项目也可能有所帮助。

# c++ - 是否有标准的格式化函数或运算符可以四舍五入？（或下降？）

> ID：14290936
> 
> 赞同：0
> 
> 时间：2013-01-12T06:31:28.257
> 
> 标签：c++, formatting, number-formatting, ostringstream

我正在使用 ostringstream 将数字输出到小数点后 2 位，如下所示

```
std::ostringstream ostr;

ostr << std::fixed << std::setprecision(2);
ostr << cylinderLength; 
```

因此，如果 cylinderLength = 0.594，则上述输出如预期的那样为 0.59。

是否有一个运算符或函数可以在最后一个所需的小数位进行向上或向下舍入？

在这种情况下，上面的示例将打印出 0.60。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T06:37:25.520

尝试：

```
// Round towards +infinity (to 1 decimal place (use 100 for 2 decimal places)
ceil(double * 10) / 10

// Round towards -infinity (to 1 decimal place (use 100 for 2 decimal places)
floor(double * 10) / 10 
```

# php - sql查询中的文本匹配（LIKE）

> ID：14290939
> 
> 赞同：0
> 
> 时间：2013-01-12T06:32:10.803
> 
> 标签：php, mysql, sql

我的数据库：

```
 ID   place
-----------------------------------------------
    1    Bhowali
    2    Bangalore   
    3    Tumkur 
```

**我的查询：**

```
SELECT * 
FROM   table 
WHERE  place LIKE '%bhovali' 
```

问题是：许多用户在那个时候搜索错误的关键字，查询结果应该匹配并输出正确的一个..在我上面的查询***中 bhovali***是一个错误的词，正确的词是***bhowali***。有什么办法可以从查询中得到正确的结果？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T06:34:16.137

这是一个非常重要的问题......简短的回答是否定的。SQL 旨在为您提供您想要的，而不是您可能想要的。

您必须开发某种智能引擎来识别存在相似的名称并在它们出现时进行搜索。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T06:41:03.450

可能这会有所帮助 `SELECT * FROM table WHERE SOUNDEX(name) LIKE SOUNDEX('bhovali') ;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T07:19:27.737

在mysql中，如果列具有全文索引，则可以使用全文搜索

select * from table match(name) against ('bhovali');

# asp.net-mvc - 如何在指定视图和参数的情况下执行 MVC RedirectToAction？

> ID：14290944
> 
> 赞同：1
> 
> 时间：2013-01-12T06:32:26.367
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我需要重定向到以下重定向：

```
area = User
controller = "Server"
action = "Index"
page = "F222" 
```

但是，我在 RedirectToAction 中看不到允许我在区域中添加的重载。有人可以给我一个例子来说明我如何做到这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T06:49:08.973

如果要向路由添加区域，请使用[带有 routeValues 的重载](http://msdn.microsoft.com/en-us/library/dd505283%28v=vs.108%29.aspx)：

```
return RedirectToAction("Index", "Server", new {Area = "User", page = "F222"}); 
```

# javascript - 使用敲除和javascript函数输入键启用

> ID：14290956
> 
> 赞同：10
> 
> 时间：2013-01-12T06:34:34.737
> 
> 标签：javascript, html, knockout.js

我有一个带有 onkeypress 事件的 html 文本框来发送如下消息

```
<input type="text" data-bind="attr:{id: 'txtDim' +  $data.userID, onkeypress: $root.sendMsg('#txtDim' +  $data.userID, $data)}" /> 
```

我已经编写了 javascript 函数来发送消息，同时按下回车按钮，如下所示：

```
self.sendMsg = function (id, data) {
    $(id).keydown(function (e) {
        if (e.which == 13) {
            //method called to send message
            //self.SendDIM(data);
        }
    });
}; 
```

就我而言，我必须按两次 Enter 按钮才能发送消息。1：按键调用self.sendMsg 2：按键调用self.SendDIM

但我只需要在一个按键上发送消息。它只能用纯 javascript 完成。但我需要 viewmodel 数据，所以应用于数据绑定。所以不能正常工作。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-12T11:57:24.977

您需要按两次 enter 的原因是您的`sendMsg`方法只是将处理程序附加到`keydown`事件。然后在第二次按下按钮时调用此处理程序。

更好的方法是编写一个自定义绑定处理程序，附加事件处理程序并通过以下方式传递视图模型：

```
ko.bindingHandlers.returnAction = {
  init: function(element, valueAccessor, allBindingsAccessor, viewModel) {

    var value = ko.utils.unwrapObservable(valueAccessor());

    $(element).keydown(function(e) {
      if (e.which === 13) {
        value(viewModel);
      }
    });
  }
}; 
```

您可以[在此处查看运行示例](http://jsfiddle.net/stevegreatrex/UNJWj/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-14T12:41:31.047

我已将如下所示的按键事件添加到文本框

```
 <input type="text" data-bind="attr:{id: 'txtGoalsheetNote' +  $data.userID}, event:{keypress: $root.SendMsg}" /> 
```

在javascript中，我通过将事件作为参数添加了以下方法

```
 self.SendMsg= function (data, event) {
    try {
        if (event.which == 13) {
            //call method here
            return false;
        }
        return true;
    }
    catch (e)
{ }
} 
```

然后它的工作。

# iphone - 如何在 GMT 中返回所有可用的系统时区

> ID：14290961
> 
> 赞同：0
> 
> 时间：2013-01-12T06:36:17.837
> 
> 标签：iphone, cocoa-touch, ios5, nstimezone

我想使用 GMT 格式的所有可用系统时区，例如

```
(GMT+5:00)chennai,Mumbai,Kolkata NewDelhi 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T07:04:49.917

请尝试以下代码行。

```
NSArray *timeZoneNames = [NSTimeZone knownTimeZoneNames];
for(NSString *stringName in timeZoneNames) {
    NSTimeZone *timeZoneTemp = [NSTimeZone timeZoneWithName:stringName];
    NSLog(@"%@", [timeZoneTemp description]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T07:09:24.600

首先将所有时区存储为：

```
NSArray *timezoneNames = [NSTimeZone knownTimeZoneNames];
NSMutableArray *timezones = [NSMutableArray arrayWithCapacity:[timezoneNames count]];
for (NSString *name in [timezoneNames sortedArrayUsingSelector:@selector(compare:)]){
    [(NSMutableArray *)timezones addObject:[NSTimeZone timeZoneWithName:name]];
}
NSLog(@"All timezones :\n%@",timezones); 
```

然后，您可以通过添加和减去其偏移量来转换所有时区以查找相对于 GMT 的时间。

# javascript - Google Maps HeatmapLayer 可点击端点

> ID：14290962
> 
> 赞同：4
> 
> 时间：2013-01-12T06:36:21.913
> 
> 标签：javascript, google-maps-api-3, google-maps-markers, heatmap

当用户达到集群仅包含 1-4 个 LatLng 点的缩放级别时，我想让对象可点击以显示用于热图的数据源。有关如何解决此问题的任何提示？我可以将任何类型的 EventListener 连接到 HeatmapLayer 点吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T13:23:55.377

热图没有点击事件（基本上热图不会监听任何事件）。

你可以做什么：使用markerCluster。

为所有点创建标记，因为 markerImage 分配一个透明图像（15x15 的大小应该没问题）并将所需的点击事件应用于标记。

将标记推入[markerClusterer](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/docs/reference.html)并将以下样式应用于集群：

```
 {
    url: 'path/to/transparentImage.png',
    height: 0,
    width: 0,
    textColor: 'transparent',
    textSize: 0
  } 
```

**结果：**

只要标记聚集在一起，您就什么也看不到。

当标记不再聚集时，您也将看不到任何内容（因为标记是透明的），但是您可以单击透明标记，标记将响应单击。

# java - java中的十进制格式

> ID：14290963
> 
> 赞同：0
> 
> 时间：2013-01-12T06:36:41.967
> 
> 标签：java, format, decimal

我正在使用`decimalformat`将值格式化为小数点后 2 位

```
Ex : 200.0075 --> 200.00
Ex:  200.0050 --> 200.00 
```

我正在使用的代码是：

```
DecimalFormat df = new DecimalFormat("#.##") 
```

问题是

```
String value = df.format(200.0075) gives 200.01 
```

和

```
String value = df.format(200.0050) gives 200.00 
```

`deciamlformat`如何在 java 中只获得 2 位小数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T06:38:19.393

您会看到这种舍入行为，因为[默认舍入模式`DecimalFormat`是`HALF_EVEN`](http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html). 改为使用[`RoundingMode.DOWN`](http://docs.oracle.com/javase/7/docs/api/java/math/RoundingMode.html#DOWN)。

# mongodb - MongoDB - ReferenceError：startsWithDigit 未定义

> ID：14290967
> 
> 赞同：1
> 
> 时间：2013-01-12T06:37:02.620
> 
> 标签：mongodb

我正在为自己做一个辅助项目，在我的 URL Shortener 中，我在我们的统计页面（例如：http: [//xd6.co/u/ah/stats](http://xd6.co/u/ah/stats)）上收到一个错误，这似乎只在创建链接后才出现一些时间/累积点击次数，然后它会收到以下错误消息：

```
ReferenceError: startsWithDigit is not defined
    at Object.eval [as toVersionString] (eval at makeFunction (/home/xd6/node_modules/mongolian/node_modules/buffalo/lib/bson.js:380:17))
    at Object.eval [as toString] (eval at makeFunction (/home/xd6/node_modules/mongolian/node_modules/buffalo/lib/bson.js:380:17))
    at String (unknown source)
    at Writer._name (/home/xd6/node_modules/mustache/mustache.js:292:35)
    at Writer._escaped (/home/xd6/node_modules/mustache/mustache.js:296:32)
    at renderFunction (/home/xd6/node_modules/mustache/mustache.js:357:28)
    at subRenders.(anonymous function) (/home/xd6/node_modules/mustache/mustache.js:328:18)
    at Writer._section (/home/xd6/node_modules/mustache/mustache.js:240:21)
    at renderFunction (/home/xd6/node_modules/mustache/mustache.js:345:28)
    at Writer._compile.cache.(anonymous function) (/home/xd6/node_modules/mustache/mustache.js:224:16)
    at Writer.render (/home/xd6/node_modules/mustache/mustache.js:204:34)
    at Object.exports.render (/home/xd6/node_modules/mustache/mustache.js:596:20) 
```

当我在控制台中运行 mongo 并`db.urls.find()`得到以下响应时：

```
{ "short" : "aa", "long" : "http://xd6.co/Projects/url-shortener", "created" : "2013-01-03 7:11 UTC", "clicks" : 0, "visitors" : [ ], "subscribers" : [ ], "_id" : ObjectId("50e52f2b000000d358000002") }
{ "short" : "ab", "long" : "http://google.com", "created" : "2013-01-06 1:17 UTC", "clicks" : 0, "visitors" : [ ], "subscribers" : [ ], "_id" : ObjectId("50e8d0c2000000d358000003") }
{ "short" : "ac", "long" : "http://xd6.co/u/", "created" : "2013-01-07 5:54 UTC", "clicks" : 0, "visitors" : [ ], "subscribers" : [ ], "_id" : ObjectId("50ea6332000000435b000002") }
ReferenceError: startsWithDigit is not defined 
```

这表明这是一个 mongo 错误，而不是我们的代码中的错误。此外，控制台中的 Mongo 给出的结果与 nodejs 程序本身不同。它甚至没有显示所有确实存在的现有文档，例如“ae”在 mongo 控制台输出中不存在，但 nodejs 显然正在为它的某个地方找到数据（[http://xd6.co/u/api/ AE/统计](http://xd6.co/u/api/ae/stats)）。

这似乎也只是 urls 集合的问题，因为我们在数据库中拥有的其他两个集合不返回错误。

在有人评论可能使用错误的 db/collection 来解释 nodejs 在哪里找到其他数据（使用 XD6 DB 和 urls 集合）之前：

```
> show dbs
XD6 0.0625GB
local   (empty)
test    (empty)
> use XD6
switched to db XD6
> show collections
pages
posts
system.indexes
urls 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:44:19.470

你真的可以从一个干净的数据库开始并用一些代码重现它吗？您是否定义了某种名为startsWithDigit的javascript函数

# java - 在java中创建变量或调用方法

> ID：14290975
> 
> 赞同：2
> 
> 时间：2013-01-12T06:39:16.437
> 
> 标签：java, variables, methods

我正在学习java编程。
当我浏览课程示例时，我看到了下面的代码

```
Scanner input = new Scanner (System.in) 
```

我知道它声明了一个 Scanner 变量输入，但我想知道为什么我应该声明这样的变量而不是通过直接调用 Scanner 类中的方法来使用这个函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T06:51:09.523

您应该将 a 声明`Scanner`为变量，因为`Scanner`该类不是静态的。

让我们分解任务：

1.  首先，你有`Scanner input`. 这表明 name 的变量`input`将被分配为`Scanner`.
2.  然后，你有`new Scanner`，它告诉 Java 你正在创建一个新`Object`的类型`Scanner`来存储在 field 中`input`。
3.  然后，您正在调用扫描仪类的构造函数。更具体地说，您使用以下值调用它：`System.in`。

这是这里至关重要的第三步。由于您是新手，如果您不了解`static`修饰符，我会在尝试处理之前先查一下。

您的新 Scanner 在其构造函数中有一个参数：`InputStream`. An`InputStream`是一个接口，例如，一个键盘。这就是你不能调用的原因`Scanner.next()`：如果你想有两个不同的输入流怎么办？

通过创建变量`input`，您将`Scanner` *特定于 System.in*的变量存储在该变量中。如果你有一个文件，你可能需要另一个 Scanner 作为它的 InputStream （虽然文件不是真正以这种方式读取的，但你明白了。）

如果 Scanner 的功能是静态的，那么您将只能拥有一个 Scanner。这意味着通过 Scanner 将用户限制为仅一个输入流。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T06:45:02.603

> 为什么我应该通过直接调用类 Scanner 中的方法来声明这样的变量而不是使用这个函数？

只有一个`static`方法可能会像你建议的那样被调用。大多数`Scanner`值得一提的方法都不是`static`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-04T20:01:14.047

看语句——Scanner input = new Scanner (System.in);

我们可以把它分成两部分 -
**(1)**创建一个名为的引用来保存赋值左侧的`input`任何类型的变量。**(2)**在赋值的右侧实例化一个类型的对象。最后，为类型的实例/对象分配新创建的变量。 `Scanner`
**`Scanner``Scanner`**

 **现在来回答你的问题——

> 为什么我应该通过直接调用类 Scanner 中的方法来声明这样的变量而不是使用这个函数？

因为在`Scanner`类中没有这样的方法可以返回扫描仪类型变量以分配新创建的变量`input`。此外，要在类中调用函数而不创建类的对象，该方法应该是“静态的”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T06:51:19.890

您将需要阅读更多关于 OOP 的信息。但本质上，您要问的是能够直接调用类的方法，称为类的静态方法。它们不受任何特定实例的约束。静态方法不知道任何特定于实例的数据。在这种情况下，InputStream 传入构造函数。

由于我不知道您指的是哪个特定的 Scanner 类，因此我假设编写该类的人认为访问 InputStream 作为函数的数据成员很有用。因此它是这样设计的。

一般来说，在 OOP 中，事情就是这样设计的。用数据实例化对象，并在对象上调用函数。静态方法的使用可以说在一定程度上打破了 OOP 架构。

我希望这能澄清一些事情。**

# java - java：同时读取和写入文件，文件并发

> ID：14290976
> 
> 赞同：3
> 
> 时间：2013-01-12T06:39:17.310
> 
> 标签：java, file, nio, java-io

我想写入一个**文本文件并****同时**从中读取。我想在站点中使用文本文件作为我的数据库，并且客户端可以请求在其上保存某事。如何同时保存到文件并从文件中读取。我是java的**初学者**，昨天我接受了采访，他们要求我这样做。

太感谢了

# oauth - 使用 google oauth2 验证我的 Web 应用程序

> ID：14290977
> 
> 赞同：0
> 
> 时间：2013-01-12T06:39:36.350
> 
> 标签：oauth, oauth-2.0, google-oauth

我正在尝试使用 google oauth2 对我的 Web 应用程序进行身份验证。我使用 vb.net 作为后面的代码。

第一步，我添加了一个超链接，它重定向到[https://accounts.google.com/o/oauth2/auth?scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A% 2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&state=%2Fprofile&redirect_uri=http%3A%2F%2Flocalhost:2690%2Ftest1.aspx&response_type=code&client_id=XXX.apps.googleusercontent.com](https://accounts.google.com/o/oauth2/auth?scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&state=%2Fprofile&redirect_uri=http%3A%2F%2Flocalhost:2690%2Ftest1.aspx&response_type=code&client_id=XXX.apps.googleusercontent.com)

现在从代码接收代码后，我在 test1.aspx 的页面加载上使用了代码

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles    Me.Load
    If Not IsNullOrEmpty(Request.QueryString("code")) Then
                    Dim buffer As Byte() = Encoding.UTF8.GetBytes("code=" + Request.QueryString("code") + "&client_id=XXX.apps.googleusercontent.com&client_secret=XXX&redirect_uri=https%3A%2F%2Flocalhost:2690%2Ftest1.aspx&grant_type=authorization_code")     
        Dim req As HttpWebRequest = WebRequest.Create("https://accounts.google.com/o/oauth2/token")
        req.Method = "POST"
        req.ContentType = "application/x-www-form-urlencoded"
        req.ContentLength = buffer.Length

        Dim strm As Stream = req.GetRequestStream()
        strm.Write(buffer, 0, buffer.Length)
        strm.Close()
        Try
            Dim res As HttpWebResponse = req.GetResponse()
            Response.Write(res.StatusDescription)
        Catch wex As WebException
            Response.Write(wex.Data.ToString + "<br/>" + wex.InnerException.ToString + "<br/>" + wex.Message + "<br/>" + wex.TargetSite.ToString)
        End Try

    End If
End Sub 
```

每次我从服务器收到错误的请求错误。请帮助我找出我做错了什么。我也尝试使用 dotnetopenauth，但每个示例都使用 mvc 和 c#，而我只知道 vb.net。谢谢你的帮助…。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T05:19:28.637

此代码是否对 POST 请求正文中的值进行 URL 编码。

另请记住，代码将被交换一次以换取代币。

# php - php条件不起作用

> ID：14290981
> 
> 赞同：0
> 
> 时间：2013-01-12T06:40:03.813
> 
> 标签：php

我有一个奇怪的问题。我的条件不起作用：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http://maps.googleapis.com/maps/api/geocode/json?    address='.urlencode($address).'&sensor=true');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$result = curl_exec ($ch);
curl_close ($ch);

if($result !== null) {
    $result = @json_decode($result, true);
    $result = @$result['results'][0]['address_components'];

    foreach($result as $key => $value) {
        if($value['types'][0] == 'administrative_area_level_2')
            return $value['long_name'];
    }
} else {
    throw new Exception('unable to look up the county');
} 
```

我试过了

```
if($result)
if($result != null)
if($result != '')
if(!empty($result))
if(isset($result)) 
```

没有一个工作，脚本总是在块内，但 $result 的值为 null，我可以通过 xdebug 看到它。为什么会这样？

编辑：这是一个截图 ![截屏](../Images/5791284108a145010b16875fc3d78b01.png)

这是 var_dump 显示的内容：

> 字符串'{“结果”：[]，“状态”：“ZERO_RESULTS”}'（长度=52）

这修复了它：

```
 $result = @json_decode($result, true);

    if(!empty($result['results'])) { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T06:44:12.987

你有没有研究过这个功能`is_null()`？

```
if(!is_null($result)) { ... } 
```

**[文档](http://php.net/manual/en/function.is-null.php)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T06:42:47.507

尝试添加一个

```
var_dump($result);
die; 
```

在 curl 响应之后，为您知道应该为 null 的人执行此操作，然后他们检查结果是什么？它可能永远不会返回 null。请记住，值“”不是 NULL 值，而是“”值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T06:44:03.910

试试这个..可能是因为空格..`echo strlen($result);`在你的 curl_exec 之后也会帮助你检查结果是否为空。

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http://maps.googleapis.com/maps/api/geocode/json?         address='.urlencode($address).'&sensor=true');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$result = curl_exec ($ch);
curl_close ($ch);

if(trim($result)!='') {
 $result = @json_decode($result, true);
 $result = @$result['results'][0]['address_components'];
 foreach($result as $key => $value) {
    if($value['types'][0] == 'administrative_area_level_2')
        return $value['long_name'];
 }
} else {
throw new Exception('unable to look up the county');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T06:58:12.383

我粘贴了您的代码并使用地址运行它。 `$result`不是 json 而是 html，因为 url 无效（404）。 因为无法解码字符串而`json_decode`返回。`null`

至少有两个建议的修改：

1 - 在 url 中删除和之间的空格`...json?`2 `address=...` - 使用`json_last_error`和/或检查返回值`json_decode`以查看 json 是否被正确解码。

[http://php.net/manual/en/function.json-last-error.php](http://php.net/manual/en/function.json-last-error.php)

# ruby-on-rails - 建立 10000 个不同的 ActiveRecord SQLite DB 连接有任何可预见的问题吗？

> ID：14290984
> 
> 赞同：0
> 
> 时间：2013-01-12T06:40:52.710
> 
> 标签：ruby-on-rails, sqlite, rails-activerecord

我有大约 10000 个文档的集合，每个文档都包含几个 SQLite DB。(*)

我正在考虑根据文档标识符自动对我正在为这些数据库中包含的表编写的 ActiveRecord 模型进行子类化，以便我可以分别在每个类上调用建立连接。

```
class Document < ActiveRecord::Base
end

class Document_xyz < Document
  establish_connection(.../xyz.sqlite)
end 
```

这是可行的，还是我应该尝试以某种方式将所有数据库合并在一起（可能通过在表名上添加 ID 前缀，或者作为列（？）），这样我就可以建立一个连接？

* 注意：我无法更改此文件设置，因为它正在其他地方使用，但我正在制作一个 Web 界面，因此我正在研究处理如此大量 DB 的可能性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T09:32:00.290

要做到这一点，可能需要大量资源。

您可以编写一个 rake 任务，将数据库转换为 json 模板，然后您可以随意操作数据，而无需过多关注服务器资源。

您确实应该要求供应商提供 sqlite 数据库的 json 表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T10:03:40.873

您可以为每个模型打开任意数量的数据库连接。也就是说，每个模型只有一个连接会更好，更容易编码和使用。但是这么多的连接会消耗你机器的大量资源，所以......遍历所有不同的数据库，grep它们的内容，并将它们全部写入一个数据库文件（不要忘记建模一个有效的关系，如果可能的）。

之后，使用数据库应该非常快速和容易。

# c# - 从 Windows Phone 应用程序中的 DownloadStringCompleted 处理程序填充和返回实体

> ID：14290988
> 
> 赞同：3
> 
> 时间：2013-01-12T06:41:35.560
> 
> 标签：c#, windows-phone-7

我有一个从 url 获取 HTML，通过解析提取实体并返回实体列表的方法。这是*示例*代码：

```
 public List<Entity> FetchEntities()
    {
        List<Entity> myList = new List<Entity>();
        string url = "<myUrl>";
        string response = String.Empty;
        client = new WebClient();
        client.DownloadStringCompleted += (sender, e) =>
        {
            response = e.Result;
            // parse response
            // extract content and generate entities
            // <---- I am currently filling list here
        };
        client.DownloadStringAsync(new Uri(url));

        return myList;
    } 
```

问题是当异步调用正在进行时，控制返回时为空`myList`。我该如何防止这种情况。我的最终目标是返回*填充*列表。

而且这个方法也在一个单独的类库项目中，并从 Windows Phone 应用程序中调用，我*必须*保持这样。有什么办法可以做到这一点，或者我错过了什么？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T07:08:06.840

这就是异步编程的要点是非阻塞的。您可以将回调作为参数传递并在其他地方处理结果，而不是尝试返回它。

如果您需要返回结果，您可以使用[这个 TPL 库](http://nuget.org/packages/System.Threading.Tasks)，我已经使用它一段时间了。

```
public Task<string> GetWebResultAsync(string url)
     {
         var tcs = new TaskCompletionSource<string>();
         var client = new WebClient();

         DownloadStringCompletedEventHandler h = null;
         h = (sender, args) =>
                 {
                     if (args.Cancelled)
                     {
                         tcs.SetCanceled();
                     }
                     else if (args.Error != null)
                     {
                         tcs.SetException(args.Error);
                     }
                     else
                     {
                         tcs.SetResult(args.Result);
                     }

                     client.DownloadStringCompleted -= h;
                 };

         client.DownloadStringCompleted += h;
         client.DownloadStringAsync(new Uri(url));

         return tcs.Task;
     }
} 
```

调用它正是您在 .net 4.0 中使用 TPL 的方式

```
GetWebResultAsnyc(url).ContinueWith((t) => 
                                    {
                                         t.Result //this is the downloaded string
                                    }); 
```

或者：

```
var downloadTask = GetWebResultAsync(url);
downloadTask.Wait();
var result = downloadTask.Result; //this is the downloaded string 
```

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-12T09:37:42.247

您可以像这样将回调传递给方法，并使其在没有任务的情况下异步，因此您必须稍微更新方法的使用。

```
public void FetchEntities(
    Action<List<Entity>> resultCallback, 
    Action<string> errorCallback)
{
    List<Entity> myList = new List<Entity>();
    string url = "<myUrl>";
    string response = String.Empty;
    client = new WebClient();
    client.DownloadStringCompleted += (sender, e) =>
    {
        response = e.Result;
        // parse response
        // extract content and generate entities
        // <---- I am currently filling list here

        if (response == null)
        {
            if (errorCallback != null)
                errorCallback("Ooops, something bad happened");
        }
        else
        {
            if (callback != null)
                callback(myList);
        }
    };
    client.DownloadStringAsync(new Uri(url));
} 
```

另一种选择是强制它同步。像那样

```
public List<Entity> FetchEntities()
{
    List<Entity> myList = new List<Entity>();
    string url = "<myUrl>";
    string response = String.Empty;
    client = new WebClient();
    AutoResetEvent waitHandle = new AutoResetEvent(false);
    client.DownloadStringCompleted += (sender, e) =>
    {
        response = e.Result;
        // parse response
        // extract content and generate entities
        // <---- I am currently filling list here

        waitHandle.Set();
    };
    client.DownloadStringAsync(new Uri(url));

    waitHandle.WaitOne();

    return myList;
} 
```

# grails-2.1 - Grails 2.1 如何在连接表中添加值

> ID：14290990
> 
> 赞同：3
> 
> 时间：2013-01-12T06:41:42.337
> 
> 标签：grails-2.1

我创建了 2 个表，一个类别和一个制造商，并且关系是多对多的，所以我使用连接表，我将值分别插入到两个表中。现在我想通过他们的 id 加入两个表，但我做不到，你能帮帮我吗....当我尝试在连接表中插入值时给出异常，这里是异常：

```
 Cannot invoke method addToManufacturers() on null object. Stacktrace follows:
java.lang.NullPointerException: Cannot invoke method addToManufacturers() on null object 
```

这是我的类别域类

```
static hasMany    =  [manufacturers: Manufacturer]

static constraints = {
    name     blank: false, size: 0..60, unique: false
}

static mapping = {
    table 't01i001'
    id      column: 'f_category_id'
    name    column: 'f_name', length: 30     
    version column: 'f_revision'

    manufacturers joinTable: [name: 't01j001', key: 'k_category_id', column: 'k_manufacturer_id']
} 
```

这是我的制造商域类

```
static belongsTo  =  Category 
static hasMany    =  [categories: Category]

static constraints = {
    name     blank: false, size: 0..60, unique: false
}

static mapping = {
    table 't01i002'
    id        column: 'f_manufacturer_id'
    name      column: 'f_name',         length: 30
    version   column: 'f_revision'

    categories joinTable: [name: 't01j001', key: 'k_manufacturer_id', column: 'k_category_id']
} 
```

在我尝试插入的地方添加我的控制器

```
def manuInsertInCat(){
    def message, flag,count=0,categories = []
    int  catid  = params.containsKey("catid") ? params.catid : '0' 
    int  manuid = params.containsKey("manuid") ? params.manuid : '0' 
    def category    = Category.get(catid);
    def manufacture = Manufacturer.get(manuid)
    category.addToManufacturers(manufacture)
    message = "Successfully Loaded"
    count++
    flag =true
    render Category.getJsonData(categories, count, flag, message)        
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T05:10:42.833

最后我通过这个过程完成了我的工作，它工作正常。

```
def catInsertInManu(){
    def message, flag,count=0,manufacturers = []
    String  catid  = params.containsKey("catid") ? params.catid : '0' 
    String  manuid = params.containsKey("manuid") ? params.manuid : '0' 
    def category    = Category.get(catid)
    def manufacture = Manufacturer.get(manuid)
    manufacture.addToCategories(category)

    def m01i001001s = []
    manufacture.categories.each{ cat ->
        m01i001001s << [id:cat.id, name:cat.name]
    }
    manufacturers << [id: manufacture.id, name:manufacture.name, m01i001001s:m01i001001s]

    message = "Successfully Loaded"
    count++
    flag =true        
    render Manufacturer.getJsonData(manufacturers, count, flag, message)        
} 
```

# html - smarty 'OR' 运算符不起作用？

> ID：14290994
> 
> 赞同：4
> 
> 时间：2013-01-12T06:42:26.277
> 
> 标签：html, smarty

```
{if $command2 ne "thanks" || $command1 ne "error"}
 some code <!---Ist Code-->
{/if}

{if $command2 eq "thanks" || ($command1 eq "error"}
<meta name="Robots" content="noindex, nofollow"> <!---2nd Code-->
{/if} 
```

我正在尝试这个但它不起作用。它同时显示第一个和第二个代码给我一个解决方案

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T06:53:54.470

我认为你的问题在于逻辑。尝试 && 运算符，`ne`例如;

```
{if $command2 ne "thanks" && $command1 ne "error"}
 some code <!---Ist Code-->
{/if}

{if $command2 eq "thanks" || ($command1 eq "error"}
<meta name="Robots" content="noindex, nofollow"> <!---2nd Code-->
{/if} 
```

这是基本的编程知识。当您反转大小写时，也将 s 反转`OR`为`AND`s。

请记住，根据您的需要，反之亦然；

```
{if $command2 ne "thanks" || $command1 ne "error"}
 some code <!---Ist Code-->
{/if}

{if $command2 eq "thanks" && ($command1 eq "error"}
<meta name="Robots" content="noindex, nofollow"> <!---2nd Code-->
{/if} 
```

两者在不同的场景中都有意义。

更新：在您的第二条评论之后，很明显您需要顶部的第一个示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-18T06:58:08.010

请在您的情况周围添加（）括号，例如

```
{if ($comment1 eq "thanks") || ($comment2 eq "error")}
do something
{/if} 
```

# php - cURL 不起作用，但 file_put_contents() 可以吗？

> ID：14290997
> 
> 赞同：0
> 
> 时间：2013-01-12T06:42:40.853
> 
> 标签：php, curl

我在 cURL 中有一个代码，应该将图像从 URL 复制到我的服务器：

```
$curl = curl_init( $url );
$file = fopen( $imageURL , 'wb' );
curl_setopt( $curl , CURLOPT_FILE , $file );
curl_setopt( $curl , CURLOPT_HEADER , true );
curl_setopt( $curl , CURLOPT_FOLLOWLOCATION , true );
curl_exec( $curl );
curl_close( $curl );
fclose( $file );
```

它不能正常工作，但`file_put_contents()`可以。我的 cURL 代码有问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T06:53:03.817

有多种解决方案，cURL 可能不是最好的。

```
$remote_img = 'http://www.somwhere.com/images/image.jpg';
$img = imagecreatefromjpeg($remote_img);
$path = 'images/';
imagejpeg($img, $path); 
```

会很好用，但如果你设置了 cURL，试试这个：

```
$ch = curl_init ($img);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_BINARYTRANSFER,1);
$rawdata=curl_exec($ch);
curl_close ($ch);
if(file_exists($fullpath)){
    unlink($fullpath);
}
$fp = fopen($fullpath,'x');
fwrite($fp, $rawdata);
fclose($fp); 
```

这也应该有效。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T07:02:21.930

**不要设置`CURLOPT_HEADER`为 true**。这将在输出中**包含标题**。因此，您的图像文件将包含*响应标头*+*图像数据*。删除该行或设置它`false`。

# php - 多维数组，返回错误结果

> ID：14290999
> 
> 赞同：2
> 
> 时间：2013-01-12T06:42:44.217
> 
> 标签：php, arrays

我有一个多维数组（“数据”中有多个项目，但我只为这个问题显示一个）：

```
Array
(
    [data] => Array
        (
            [0] => Array
                (
                    [to] => Array
                        (
                            [data] => Array
                                (
                                    [0] => Array
                                        (
                                            [name] => fake name
                                            [id] => 668071477234
                                        )

                                    [1] => Array
                                        (
                                            [name] => fake name
                                            [id] => 1345556711
                                        )

                                )

                        )

                    [updated_time] => 2012-12-24T23:46:26+0000
                    [id] => 327424994013537
                )
        )

) 
```

我正在尝试遍历数组并确定 id 是否与从 $_REQUEST 发送的变量匹配，如果匹配，我只想返回迭代的“updated_time”值。

这是我所拥有的，但日期总是错误的，并且与正确的迭代不匹配：

```
 foreach($userOutbox['data'] as $outbox){
        foreach($outbox['to']['data'] as $user){
            if($user['id'] == $_REQUEST['facebook_id']){                                           

                      $last_message_date = $outbox['updated_time'];
            }
        }
    } 
```

已经很晚了，我的眼睛和大脑都没有帮助我。任何人都可以给我任何方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T20:28:41.033

这是对我有用的解决方案，刚刚添加`break 2;` 感谢您的帮助：

```
foreach($userOutbox['data'] as $outbox){
    foreach($outbox['to']['data'] as $user){
        if($user['id'] == $_REQUEST['facebook_id']){                                           
           $last_message_date = $outbox['updated_time'];
           break 2;
        }
    }
} 
```