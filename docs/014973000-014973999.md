# StackOverflow 问答 14973000-14973999

# class - 淘汰赛绑定不更新类样式

> ID：14973010
> 
> 赞同：0
> 
> 时间：2013-02-20T05:39:36.553
> 
> 标签：class, binding, knockout.js

我试图弄清楚如何通过淘汰赛从 html 中添加和删除类。

应该发生的是，当我单击卡车时，按钮应更新为 btn-red 类，并且汽车按钮应将其 btn-red 删除。

我可以看到事件绑定正在工作，因为触发了警报并返回了正确的值，但我无法更新视图。

我整理了一个非常简单的 JSFiddle.net/N8GBB/11/ （由于某种原因，stackoverflow 不允许我发布链接）这是我在 jsfiddle 中使用的代码

```
<button class="btn" data-bind="css:{'btn-red':type()=='car'}，点击：set_to_car">汽车</button>
<button class="btn" data-bind="css:{'btn-red':type()=='truck'}，点击：set_to_truck">卡车</button>

```

```
变量车辆={
    类型：ko.observable（“汽车”），
           set_to_car：函数（）{
        this.type='汽车'
        警报（this.type）；
    },
        set_to_truck：函数（）{
            this.type='卡车'
     警报（车辆类型）；        
    }};

ko.applyBindings(车辆);

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T05:52:59.847

你没有`type`正确设置你的 observable。

该`ko.observable`方法返回一个函数，因此如果要更改其值，则需要将其作为函数调用，并将新值作为参数。

```
var vehicle={ 
    type:ko.observable("car"),
           set_to_car : function(){
        this.type('car');
    },
        set_to_truck: function(){
            this.type('truck');  
    }}; 
```

演示[JSFiddle](http://jsfiddle.net/uYKJH/)。

您可以在文档中阅读有关[阅读和编写可观察对象](http://knockoutjs.com/documentation/observables.html)的更多信息。

# laravel - Laravel工匠迁移命令不起作用

> ID：14973012
> 
> 赞同：0
> 
> 时间：2013-02-20T05:39:37.550
> 
> 标签：laravel

在生成迁移并运行迁移命令（`php artisan migrate`）后，我看到了这个错误：

```
PHP Fatal error:  Class 'Admin_Create_Galleries' not found in /var/www/sampleapp/laravel/cli/tasks/migrate/resolver.php on line 121 
```

我不知道这个错误，在resolver.php上搜索后，我在resolver.php上找不到“Admin_Create_Galleries”字样。你能帮我解决这个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T08:26:47.613

该文件将在数据库中的迁移表中引用 - 如果您不再拥有该文件或更改了名称，则应在迁移表中更新它。

注意：通常最好回滚迁移或进行另一次迁移，而不是编辑迁移本身。

# python - python - 如何在python中将执行的批处理脚本的结果作为字符串？

> ID：14973014
> 
> 赞同：0
> 
> 时间：2013-02-20T05:39:43.513
> 
> 标签：python

我有这样的代码`os.system(mycommand)`。我想将批处理命令的结果作为字符串。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T05:42:56.983

从 Python 2.7 开始， Python 的`subprocess`模块有一个[内置函数](http://docs.python.org/2/library/subprocess.html#subprocess.check_output)来执行此操作。

```
import subprocess

try:
  mycommand = "ls"
  result = subprocess.check_output(mycommand, shell=True)
  print(result)
except subprocess.CalledProcessError as error:
  # Handle the error
  print("Error: Command exited with code {0}".format(error.returncode)) 
```

# asp.net - 如何让用户使用 SoundCloud 登录我的网站

> ID：14973017
> 
> 赞同：1
> 
> 时间：2013-02-20T05:39:54.213
> 
> 标签：asp.net, asp.net-mvc-4, asp.net-membership, oauth-2.0, soundcloud

我想让用户通过 SoundCloud 对我的 ASP.NET MVC 4 项目进行身份验证。由于没有 .NET SDK，我编写了一个自定义`OAuth2Client`来处理身份验证。将客户端添加到 my 后`AuthConfig.cs`，它适当地显示为登录选项。问题是，当我点击按钮登录时，它总是返回

```
Login Failure.

Unsuccessful login with service. 
```

甚至没有要求我登录 SoundCloud。问题是什么？我为 GitHub 实现了一个非常相似的客户端，它没有任何问题。

这是我的客户：

```
 public class SoundCloudOAuth2Client : OAuth2Client
 {
     private const string ENDUSERAUTHLINK = "https://soundcloud.com/connect";
     private const string TOKENLINK = "https://api.soundcloud.com/oauth2/token";
     private readonly string _clientID;
     private readonly string _clientSecret;

     public SoundCloudOAuth2Client(string clientID, string clientSecret) : base("SoundCloud")
     {
         if (string.IsNullOrWhiteSpace(clientID)) {
                throw new ArgumentNullException("clientID");
         }

         if (string.IsNullOrWhiteSpace(clientSecret)) {
                throw new ArgumentNullException("clientSecret");
         }

         _clientID = clientID;
         _clientSecret = clientSecret;
     }

     protected override Uri GetServiceLoginUrl(Uri returnUrl)
     {
         StringBuilder serviceUrl = new StringBuilder();
         serviceUrl.Append(ENDUSERAUTHLINK);
         serviceUrl.AppendFormat("?client_id={0}", _clientID);
         serviceUrl.AppendFormat("&response_type={0}", "code");
         serviceUrl.AppendFormat("&scope={0}", "non-expiring");
         serviceUrl.AppendFormat("&redirect_uri={0}", System.Uri.EscapeDataString(returnUrl.ToString()));

         return new Uri(serviceUrl.ToString());
     }

     public override void RequestAuthentication(HttpContextBase context, Uri returnUrl)
     {
         base.RequestAuthentication(context, returnUrl);
     }

     protected override IDictionary<string, string> GetUserData(string accessToken)
     {
         IDictionary<String, String> extraData = new Dictionary<String, String>();

         var webRequest = (HttpWebRequest)WebRequest.Create("https://api.soundcloud.com/me.json?oauth_token=" + accessToken);
         webRequest.Method = "GET";
         string response = "";
         using (HttpWebResponse webResponse = HttpWebResponse)webRequest.GetResponse())
         {
             using (StreamReader reader = new StreamReader(webResponse.GetResponseStream()))
             {
                 response = reader.ReadToEnd();
             }
         }

         var json = JObject.Parse(response);
         string id = (string)json["id"];
         string username = (string)json["username"];
         string permalinkUrl = (string)json["permalink_url"];

         extraData = new Dictionary<String, String>
         {
             {"SCAccessToken", accessToken},
             {"username", username}, 
             {"permalinkUrl", permalinkUrl}, 
             {"id", id}                                           
         };

         return extraData;
     }

     protected override string QueryAccessToken(Uri returnUrl, string authorizationCode)
     {
         StringBuilder postData = new StringBuilder();
         postData.AppendFormat("client_id={0}", this._clientID);
         postData.AppendFormat("&redirect_uri={0}", HttpUtility.UrlEncode(returnUrl.ToString()));
         postData.AppendFormat("&client_secret={0}", this._clientSecret);
         postData.AppendFormat("&grant_type={0}", "authorization_code");
         postData.AppendFormat("&code={0}", authorizationCode);

         string response = "";
         string accessToken = "";

         var webRequest = (HttpWebRequest)WebRequest.Create(TOKENLINK);    
         webRequest.Method = "POST";
         webRequest.ContentType = "application/x-www-form-urlencoded";

         using (Stream s = webRequest.GetRequestStream())
         {
             using (StreamWriter sw = new StreamWriter(s))
                    sw.Write(postData.ToString());
         }

         using (WebResponse webResponse = webRequest.GetResponse())
         {
             using (StreamReader reader = new StreamReader(webResponse.GetResponseStream()))
             {
                 response = reader.ReadToEnd();
             }
         }

         var json = JObject.Parse(response);
         accessToken = (string)json["access_token"];

         return accessToken;
     }

     public override AuthenticationResult VerifyAuthentication(HttpContextBase context, Uri returnPageUrl)
     {    
         string code = context.Request.QueryString["code"];  
         string u = context.Request.Url.ToString();

         if (string.IsNullOrEmpty(code))
         {
             return AuthenticationResult.Failed;
         }

         string accessToken = this.QueryAccessToken(returnPageUrl, code);
         if (accessToken == null)
         {
             return AuthenticationResult.Failed;
         }

         IDictionary<string, string> userData = this.GetUserData(accessToken);
         if (userData == null)
         {
             return AuthenticationResult.Failed;
         }

         string id = userData["id"];
         string name;

         if (!userData.TryGetValue("username", out name) && !userData.TryGetValue("name", out name))
         {
             name = id;
         }

         return new AuthenticationResult(
             isSuccessful: true, provider: "SoundCloud", providerUserId: id, userName: name, extraData: userData);
     }
 } 
```

和`AuthConfig.cs`：

```
 public static void RegisterAuth()
 {
     OAuthWebSecurity.RegisterClient(new SoundCloudOAuth2Client(
         clientID: MyValues.MyClientID,
         clientSecret: MyValues.MyClientSECRET), 
         displayName: "SoundCloud",
         extraData: null);

     OAuthWebSecurity.RegisterClient(new GitHubOAuth2Client(
         appId: MyValues.GITHUBAPPID,
         appSecret: MyValues.GITHUBAPPSECRET), "GitHub", null);

     OAuthWebSecurity.RegisterGoogleClient();
     OAuthWebSecurity.RegisterYahooClient();
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T05:39:54.213

从运行的第一个函数开始，有多个问题需要解决：`GetServiceLoginUrl(Uri returnUrl)`

自动创建的`returnUrl`包含 & 符号，这是 SoundCloud 不喜欢的。您需要去掉 & 符号并确保您的 SoundCloud 帐户中的“用于身份验证的重定向 URI”与正在发送的内容（查询字符串和所有内容）*完全匹配。*以下是默认情况下作为 returnURL 发送的示例：

```
https://localhost:44301/Account/ExternalLoginCallback?__provider__=SoundCloud&__sid__=blahblahyoursid 
```

第一步是删除该`&__sid__`值。您可以去掉`sid`值并将其作为`state`参数传递，以防万一您需要它。新函数如下所示：

```
protected override Uri GetServiceLoginUrl(Uri returnUrl)
{
    StringBuilder serviceUrl = new StringBuilder();
    string sid = String.Empty;
    if (returnUrl.ToString().Contains("__sid__"))
    {
        int index = returnUrl.ToString().IndexOf("__sid__") + 8;
        int len = returnUrl.ToString().Length;
        sid = returnUrl.ToString().Substring(index, len - index-1);
    }

    string redirectUri = returnUrl.ToString().Contains('&') ? 
    returnUrl.ToString().Substring(0,returnUrl.ToString().IndexOf("&")) : 
    returnUrl.ToString();
    serviceUrl.Append(ENDUSERAUTHLINK);
    serviceUrl.AppendFormat("?client_id={0}", _clientID);
    serviceUrl.AppendFormat("&response_type={0}", "code");
    serviceUrl.AppendFormat("&scope={0}", "non-expiring");
    serviceUrl.AppendFormat("&state={0}", sid);
    serviceUrl.AppendFormat("&redirect_uri={0}", System.Uri.EscapeDataString(redirectUri));

    return new Uri(serviceUrl.ToString());
} 
```

这解决了部分问题。SoundlCoud 中的重定向 URI 现在只是`https://localhost:44301/Account/ExternalLoginCallback?__provider__=SoundCloud`)。但是尝试进行身份验证仍然会返回`false`。下一个要解决的问题是 `AccountController.cs`，具体来说：

```
[AllowAnonymous]
public ActionResult ExternalLoginCallback(string returnUrl) 
```

因为在第一行，它试图返回：

```
AuthenticationResult result = OAuthWebSecurity.VerifyAuthentication(Url.Action("ExternalLoginCallback", new { ReturnUrl = returnUrl })); 
```

这不适用于我的 custom `OAuth2Client`，因为`VerifyAuthentication`需要不同的参数。通过检测它是否是 SoundCloud 客户端然后使用自定义的 VerifyAuthentication 来修复它：

```
[AllowAnonymous]
public ActionResult ExternalLoginCallback(string returnUrl)
{
    AuthenticationResult result;
    var context = this.HttpContext;
    string p = Tools.GetProviderNameFromQueryString(context.Request.QueryString);

    if (!String.IsNullOrEmpty(p) && p.ToLower() == "soundcloud")
    {
        result = new SoundCloudOAuth2Client(
                clientID: MyValues.SCCLIENTID,
                clientSecret: MyValues.SCCLIENTSECRET).VerifyAuthentication(this.HttpContext, new Uri(String.Format("{0}/Account/ExternalLoginCallback?__provider__=SoundCloud", context.Request.Url.GetLeftPart(UriPartial.Authority).ToString())));
    }
    else
    {
        result = OAuthWebSecurity.VerifyAuthentication(Url.Action("ExternalLoginCallback", new { ReturnUrl = returnUrl }));
    } 
```

在哪里

```
public static string GetProviderNameFromQueryString(NameValueCollection queryString)
{
    var result = queryString["__provider__"];
    ///commented out stuff
    return result;
} 
```

之后，一切正常，您可以成功进行身份验证。您可以配置`GetUserData`以获取要保存的任何 SoundCloud 数据，然后将其保存到您的 UserProfile 或相关表中。关键部分是`SCAccessToken`因为这是您将来需要上传到他们的帐户的内容。

# android - 在android中的mupdf上打开线性化pdf

> ID：14973019
> 
> 赞同：2
> 
> 时间：2013-02-20T05:40:04.703
> 
> 标签：android, pdf, mupdf

我在 android 中使用 mupdf 库来查看应用程序私有内存中的 pdf 文件。在我的应用程序中，我首先将线性化的 pdf 文件下载到应用程序的私有内存中，然后将 pdf uri 传递给 MuPDFActivity.java。

现在我想以线性化方式打开我的线性化pdf，即当用户在后台pdf下载过程中交换视图pdf时继续。我不太清楚使用 mupdf 文件打开线性化 pdf 文件的过程。如果你们能帮助我，那将是非常可观的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T13:09:03.860

目前（2013 年 2 月）MuPDF 忽略了 PDF 被线性化的事实。它直接跳到最后阅读预告片/外部参照字典。这意味着 MuPDF 在完全下载之前无法打开 PDF 文件。

我在本地分支上有代码可以将此功能添加到 MuPDF，但它还没有准备好发布，因此它不在 1.2 中。希望在 8 月发布的 1.3 版本中注意它。或者观看 git repo 以更早地看到它（其他优先级允许）。

# asp.net - 如何从 Oracle Blob 直接将图像检索到标记中

> ID：14973026
> 
> 赞同：-1
> 
> 时间：2013-02-20T05:40:59.083
> 
> 标签：asp.net, blob, blobstore

我有一些数据存储在 Oracle 数据库中.. 我想在 .asp 页面中显示存储的图像数据以及其他数据..

如果我从数据库中获取数据并使用 header("Content-type: image/jpeg"); 它不可能用其他asp数据显示图像..还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T05:55:52.087

## 编辑 1

这是一个很好的链接

[http://www.codeproject.com/Articles/13365/Insert-retrieve-an-image-into-from-a-blob-field-in](http://www.codeproject.com/Articles/13365/Insert-retrieve-an-image-into-from-a-blob-field-in)

## 老的

下面的例子是 with`SQL-Server`
但你可以根据`Oracle`

对于甲骨文：-

```
 FileStream FS = new FileStream("image.jpg", FileMode.Create); 
 byte[] blob = (byte[])"YourValue"; 
 FS.Write(blob,0,blob.Length); 
 FS.Close(); 
```

创建`generic http handler`如下

```
using System;
using System.Configuration;
using System.Web;
using System.IO;
using System.Data;
using System.Data.SqlClient;

public class ShowImage : IHttpHandler
{
    public void ProcessRequest(HttpContext context)
    {
       Int32 empno;
       if (context.Request.QueryString["id"] != null)
          empno = Convert.ToInt32(context.Request.QueryString["id"]);
       else
          throw new ArgumentException("No parameter specified");

       context.Response.ContentType = "image/jpeg";
       Stream strm = ShowEmpImage(empno);
       byte[] buffer = new byte[4096];
       int byteSeq = strm.Read(buffer, 0, 4096);

       while (byteSeq > 0)
       {
           context.Response.OutputStream.Write(buffer, 0, byteSeq);
           byteSeq = strm.Read(buffer, 0, 4096);
       }       
       //context.Response.BinaryWrite(buffer);
    }

    public Stream ShowEmpImage(int empno)
    {
         string conn = ConfigurationManager.ConnectionStrings     ["EmployeeConnString"].ConnectionString;
         SqlConnection connection = new SqlConnection(conn);
         string sql = "SELECT empimg FROM EmpDetails WHERE empid = @ID";
         SqlCommand cmd = new SqlCommand(sql,connection);
         cmd.CommandType = CommandType.Text;
         cmd.Parameters.AddWithValue("@ID", empno);
         connection.Open();
         object img = cmd.ExecuteScalar();
         try
        {
            return new MemoryStream((byte[])img);
        }
        catch
        {
            return null;
        }
        finally
       {
            connection.Close();
       }
    }

    public bool IsReusable
    {
        get
        {
             return false;
        }
    }

} 
```

并显示如下图像

```
 Image1.ImageUrl = "~/ShowImage.ashx?id=" + id; 
```

下面有一些链接
[在数据库中的 GridView 中显示图像？](https://stackoverflow.com/questions/13432381/showing-image-in-gridview-from-the-database)
[如何在 Asp.net 的图像控件中显示数据库中的图像？](https://stackoverflow.com/questions/2482104/how-to-show-a-image-in-database-in-the-image-control-of-asp-net)[使用 C# http://www.dotnetcurry.com/ShowArticle.aspx?ID=129](http://www.dotnetcurry.com/ShowArticle.aspx?ID=129)
[在 ASP.net 中显示数据库中的图像](https://stackoverflow.com/questions/6987433/display-image-from-database-in-asp-net-with-c-sharp)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-20T08:00:26.983

## html标签

```
<img id="emp_photo" src="emp_photo.ashx?id=' + empId + '" title="' + 
                emName + '" alt="emp_photo" width="125px" height="170px" 
```

## emp_photo.ashx

```
Dim Query As String = "select fr.phote from follower_register fr where fr.follower=" &    context.Request.QueryString("id")
    db.Connect()
    Dim objConnection As OracleConnection = db.objConnection
    Dim ds As New DataSet
    Dim cmd As OracleCommand = New OracleCommand(Query, objConnection)
    Dim reader As OracleDataReader = cmd.ExecuteReader()
    If reader.Read() Then 
        context.Response.BinaryWrite(reader(0))
    End If
    db.Disconnect 
```

# ruby-on-rails - schema.rb 更新了挂起的迁移

> ID：14973028
> 
> 赞同：1
> 
> 时间：2013-02-20T05:41:07.300
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rails-migrations

我用我在迁移文件中提到的所有更改更新了我的 schema.rb 文件。但是，当我尝试设置我的数据库时，

我收到一条错误消息，提示“您有 30 个待定迁移”。

据我所知，如果未运行迁移，则 schema.rb 不会更新。

为了克服这个问题，我尝试执行 rake db:schema:load，然后尝试为数据库播种。即便如此，我还是收到一条错误消息，上面写着“您有 30 个待定迁移”。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T07:11:20.320

迁移是管理对当前架构的 *更改的一种方式。*

如果您的架构已经与您想要的匹配，您可以放弃迁移并继续为您的数据库播种。当然，`rake db:seed`将首先尝试运行任何迁移，因此首先将它们从文件夹中删除。

Rails 创建一个名为`migrations`并实际记录已在该数据库上运行的迁移的 ID 的表。如果您将应用程序部署到新的数据库实例并`rake db:schema:load`在其上运行，那么它的`migrations`表将是空的，并且每当调用某些东西时您都会遇到问题`migrate`，除非您摆脱了不需要的迁移文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T06:23:04.937

你有没有尝试过

```
rake db:migrate 
```

?

# android - 画廊视图在滚动视图中不起作用

> ID：14973029
> 
> 赞同：2
> 
> 时间：2013-02-20T05:41:10.433
> 
> 标签：android, gallery, scrollview

我有很多数据要显示在一个`Activity`. 所以，我只用了`ScrollView`. 但问题是我什至要在同一个活动上显示 5-6 张图像。

所以，我`GalleryView`在里面使用`ScrollView`，它完全符合我的要求。因为在图库中，保留了 5-6 张图像，它充当预览容器，每当用户单击图库项目时，我都会在其上显示相应的图像，`ImageView`作为放大的图像。这在某些设备上运行良好，但是当我在 ICS 设备上进行测试时`ScrollView`，它根本不可见并且它不起作用。最后，画廊视图根本没有显示出来。

正如我在下图中所示，它在某些设备中运行良好，但在某些设备 ( **ICS** ) 库和图像中`ImageView`根本不显示。有人可以帮帮我吗？我将非常感谢。如果有人可以建议我实现与画廊提供的相同功能的替代方法，那么非常受欢迎，因为我也知道滚动内容不能一直在另一个滚动内容中工作。已经检查了[这个](https://stackoverflow.com/questions/14233310/gallery-view-inside-scroll-view-not-working)和其他一些，但没有任何效果。

![活动图像并突出显示哪些部分在某些设备上不起作用](../Images/e3cac29dfd01c037fb16854084f049a2.png)

# python - Python设置属性优先级和覆盖

> ID：14973033
> 
> 赞同：0
> 
> 时间：2013-02-20T05:41:25.480
> 
> 标签：python

我真的对这三种方法感到困惑

```
setattr()
__setattr__
obj.x = 10 
```

我有这个测试课

```
class Test(object):
    def __init__(self):
        self.__dict__['x'] = 99

b = Test()
#setattr(b,'x',10)
#b.x = 10 
```

现在我有两个问题

bx 转换为

`b.x = 10 --> b.__setattr__(x,10) --> b.__dict__['x'] = 10`

并且 setattr(b,'x',10) 也转换为

`setattr(b,'x',10) --> b.__setattr__(x,10) --> b.__dict__['x'] = 10`

那么为什么我们使用一个而不是另一个

1.  这是最低级别的功能，因此无论变量的值如何分配，但我的值不会使用`b.x`or`sttattr`或`__setattr`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T05:46:18.907

当您`b.x = 10`提前知道（即编写程序时）您要分配的属性时，您可以使用。当您不知道时使用`setattr`（例如，如果您正在从文件中读取配置信息或进行某种动态编程）。

你永远不会这样做`setattr(b, 'x', 10)`，因为如果你可以`x`在那里输入文字，你就可以完成`b.x = 10`并保存一些输入。你会使用`setattr`类似的东西：

```
optionName, optionValue = readConfigFile()
setattr(configObject, optionName, optionValue) 
```

也就是说，当您直到运行时才知道要分配什么属性时才使用它。例如，这可能是因为它依赖于外部资源（如我的示例）或用户输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T05:46:21.257

通常的方法是

```
b.x = 10 
```

如果事先不知道属性名

```
attr_name = 'x'
setattr(b, attr_name, 10) 
```

说同样的话是个好方法。

这不是设置属性的好方法`b`。

```
b.__dict__['x'] = 10 
```

正如您假设的那样，它`b`具有一个`__dict__`属性（并非所有对象都具有）

# linux - shellscript，下载 tg 和管道标准输出到 tar，在标准错误中获取 http 标头？

> ID：14973038
> 
> 赞同：0
> 
> 时间：2013-02-20T05:41:52.983
> 
> 标签：linux, shell, pipe, file-descriptor

我正在尝试编写的 shellscript 是

1.  下载一个 tarball 和 stdout`tar`来解压它
2.  同时解析在stderr找到的http头
3.  将#2 处的解析结果设置为变量。

对于＃1：

```
$ wget -Sq -O- "https://api.github.com/repos/est/est/tarball/master" | tar -zmxf - 
```

我启用了`-S`显示服务器对 stderr 的响应的选项，我想稍微解析一下字符串 commit hash 的标头，并将其设置为一个名为`$rev`

```
$ rev=$(wget -Sq -O /dev/null "https://api.github.com/repos/est/est/tarball/master" 2>&1 | grep "Content-Disposition:" | tail -1 | awk 'match($0, /filename=.+\-([a-zA-Z0-9]+)\./, f){ print f[1] }')
$ echo $rev
dacd56e 
```

所以基本上，我想要一个可以

1.  管道标准输出到一个命令，也管道标准错误到另一个命令
2.  解析标准错误并将输出设置为变量
3.  不要创建临时文件

对于＃1 [https://stackoverflow.com/a/9217228/41948](https://stackoverflow.com/a/9217228/41948)

对于#2，我发现[答案](https://stackoverflow.com/questions/374687/)是`read`命令，但不幸的是，该变量只能在子 shell 中找到。

那么如何将在`read`命令子shell 中找到的变量传递给父shell？

或者我该如何编写这样的shellscript？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T02:50:09.620

该死的，我必须反复试验才能自己找到[丑陋的答案](https://github.com/est/rhcloud/blob/master/wsgi/vps_deploy.sh#L14)：

```
rev=$(wget -Sq -O- $url 2> >( 
    grep "Content-Disposition:" | 
    tail -1 | 
    awk 'match($0, /filename=.+\-([a-zA-Z0-9]+)\./, f){ print f[1] }'
    ) > >(
    tar -C $www_dir --strip=1 -zmxf -
    )) 
```

# linux - linux内核模块的缺点？

> ID：14973040
> 
> 赞同：2
> 
> 时间：2013-02-20T05:42:02.987
> 
> 标签：linux, linux-kernel, kernel

我试图了解使用 Linux 内核模块的缺点。我了解使用它的好处：能够将代码动态插入正在运行的系统中，而无需重新编译和重新启动基本系统。鉴于这种强大的优势，我猜测大多数内核代码应该作为内核模块而不是作为基本内核的一部分，但似乎并非如此。大量的核心 sus 系统（如内存管理或根驱动器使用的文件系统）仍然作为基本内核。

我能想到的一个原因是内核模块在启动过程中加载得很晚，因此核心功能必须进入基础内核。我阅读的另一个原因是关于碎片化。

我真的不明白为什么内核模块会导致内存碎片，有人可以解释一下吗？使用内核模块还有其他缺点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T06:10:42.910

> 我试图了解使用 Linux 内核模块的缺点。我了解使用它的好处：能够将代码动态插入正在运行的系统中，而无需重新编译和重新启动基本系统。

虽然这有时很有用，但这并不是模块存在的主要原因。它们的主要目的是允许并不总是需要按需加载的内核代码，而不是总是驻留在内存中。

> 大量的核心 sus 系统（如内存管理或根驱动器使用的文件系统）仍然作为基本内核。

这是因为并非所有内核组件都可以配置为模块；只有那些按需加载代码才有意义的。例如，内存管理不是模块化的，因为它永远不会不存在。（而且因为它需要加载模块！）

（您的第二个示例实际上是错误的。用于根文件系统的文件系统可以配置为模块**，如果**它在 initrd 中可用。）

> 我真的不明白为什么内核模块会导致内存碎片，有人可以解释一下吗？

他们没有，至少在很大程度上没有。内核模块往往很小，因此它们造成的任何碎片都是最小的。

# api - 使用 Powershell 发推文

> ID：14973042
> 
> 赞同：2
> 
> 时间：2013-02-20T05:42:09.130
> 
> 标签：api, http, powershell, twitter

我正在尝试使用 PowerShell 来发推文，但我无法让它充分发挥作用。我可以发布 1 或 2 条推文，是的，我在每条推文之间等待几分钟，并且不会重复上一条消息。

然后突然停止工作，我的`GetRequestStream`功能挂起，我不确定发生了什么，任何人都可以解释这个问题吗？

提前致谢！

```
[Reflection.Assembly]::LoadWithPartialName("System.Net")  

$status = [System.Uri]::EscapeDataString("tweet tweet");  
$oauth_consumer_key = "<key";  
$oauth_consumer_secret = "<secret>";  
$oauth_token = "<token>";  
$oauth_token_secret = "<secret>";  
$oauth_nonce = [System.Convert]::ToBase64String([System.Text.Encoding]::ASCII.GetBytes([System.DateTime]::Now.Ticks.ToString()));  
$ts = [System.DateTime]::UtcNow - [System.DateTime]::ParseExact("01/01/1970", "dd/MM/yyyy", $null).ToUniversalTime();  

$oauth_timestamp = [System.Convert]::ToInt64($ts.TotalSeconds).ToString();  

$signature = "POST&";  
$signature += [System.Uri]::EscapeDataString("https://api.twitter.com/1.1/statuses/update.json") + "&";    
$signature += [System.Uri]::EscapeDataString("oauth_consumer_key=" + $oauth_consumer_key + "&");  
$signature += [System.Uri]::EscapeDataString("oauth_nonce=" + $oauth_nonce + "&");   
$signature += [System.Uri]::EscapeDataString("oauth_signature_method=HMAC-SHA1&");  
$signature += [System.Uri]::EscapeDataString("oauth_timestamp=" + $oauth_timestamp + "&");  
$signature += [System.Uri]::EscapeDataString("oauth_token=" + $oauth_token + "&");  
$signature += [System.Uri]::EscapeDataString("oauth_version=1.0&");  
$signature += [System.Uri]::EscapeDataString("status=" + $status);  

$signature_key = [System.Uri]::EscapeDataString($oauth_consumer_secret) + "&" + [System.Uri]::EscapeDataString($oauth_token_secret);  

$hmacsha1 = new-object System.Security.Cryptography.HMACSHA1;  
$hmacsha1.Key = [System.Text.Encoding]::ASCII.GetBytes($signature_key);  
$oauth_signature = [System.Convert]::ToBase64String($hmacsha1.ComputeHash([System.Text.Encoding]::ASCII.GetBytes($signature)));  

$oauth_authorization = 'OAuth ';  
$oauth_authorization += 'oauth_consumer_key="' + [System.Uri]::EscapeDataString($oauth_consumer_key) + '",';  
$oauth_authorization += 'oauth_nonce="' + [System.Uri]::EscapeDataString($oauth_nonce) + '",';  
$oauth_authorization += 'oauth_signature="' + [System.Uri]::EscapeDataString($oauth_signature) + '",';  
$oauth_authorization += 'oauth_signature_method="HMAC-SHA1",'  
$oauth_authorization += 'oauth_timestamp="' + [System.Uri]::EscapeDataString($oauth_timestamp) + '",'  
$oauth_authorization += 'oauth_token="' + [System.Uri]::EscapeDataString($oauth_token) + '",';  
$oauth_authorization += 'oauth_version="1.0"';  

$post_body = [System.Text.Encoding]::ASCII.GetBytes("status=" + $status);   
[System.Net.HttpWebRequest] $request = [System.Net.WebRequest]::Create("https://api.twitter.com/1.1/statuses/update.json");  
$request.Method = "POST";  
$request.Headers.Add("Authorization", $oauth_authorization);  
$request.ContentType = "application/x-www-form-urlencoded";  
$body = $request.GetRequestStream();  
$body.write($post_body, 0, $post_body.length);  
$body.flush();  
$body.close();  
$response = $request.GetResponse();  
 $response.Close() 
```

这是我最终超时时得到的完整错误序列：

```
Exception calling "GetRequestStream" with "0" argument(s): "The operation has timed out"
At line:46 char:5
+     $body = $request.GetRequestStream();
+     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
    + FullyQualifiedErrorId : WebException

Exception calling "Write" with "3" argument(s): "The request was aborted: The connection was closed unexpectedly."
At line:47 char:5
+     $body.write($post_body, 0, $post_body.Length);
+     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
    + FullyQualifiedErrorId : WebException

Exception calling "GetResponse" with "0" argument(s): "You must provide a request body if you set ContentLength>0 or 
SendChunked==true.  Do this by calling [Begin]GetRequestStream before [Begin]GetResponse."
At line:50 char:5
+     $response = $request.GetResponse();
+     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
    + FullyQualifiedErrorId : ProtocolViolationException 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T06:30:20.570

您要关闭响应流吗？默认情况下，它们是保持活动连接，因此如果您打开其中许多连接，您可能会因为两个并发会话而被阻止。尝试使用：

```
$response.Close() 
```

# c# - 为什么这个 C++ 代码比 C# 变体慢

> ID：14973044
> 
> 赞同：1
> 
> 时间：2013-02-20T05:42:20.207
> 
> 标签：c#, c++, ppl

最近，我们有一个需求，其中有超过 100,000 个 xml 文件，并且所有这些文件都需要修改 xml 中的特定数据。简单的 perl 命令可以完成这项工作，但 perl 没有安装在文件所在的机器上。因此，我编写了一个小的 C# 代码来完成这项工作。

```
private static void ModifyXML(string[] args)
{
      Stopwatch sw = new Stopwatch();
      sw.Start();
      string path = @args[0];
      string opath = @args[1];
      string token = "value_date=\"20121130\"";
      string target = "value_date=\"20121019\"";

      Parallel.ForEach(Directory.EnumerateFiles(path), (file) =>
      {
           StringBuilder sb = new StringBuilder(File.ReadAllText(file));
           sb.Remove(0, 55);
           sb.Replace(token, target);
           var filename = file.Split(new char[] { '\\' }).Last();                
           File.WriteAllText(string.Format("{0}\\{1}", opath, filename), sb.ToString());
       });
       TimeSpan ts = sw.Elapsed;
       Console.WriteLine("Took {0} secs", ts.TotalSeconds);
} 
```

我决定实现 C++ 版本。事实证明，C++ 版本并没有明显快于 C# 版本。在两个版本中运行了几次。事实上，在某些运行期间它与 C# 版本一样快。

对于 C#，我使用 .NET 4.0，对于 C++，它是 VC10。

```
void FileHandling(std::string src, std::string dest)
{
     namespace fs = boost::filesystem;
    auto start = boost::chrono::system_clock::now();
    string token = "value_date=\"20121130\"";
    string target = "value_date=\"20121019\"";
    fs::directory_iterator end_iter;
    fs::directory_iterator dir_itr(src);
    vector<fs::path> files;
    files.insert(files.end(), dir_itr, end_iter);
    string dest_path = dest + "\\";
    parallel_for_each(files.begin(), files.end(), [=](const fs::path& filepath)
    {
        ifstream inpfile (filepath.generic_string());
        string line;
        line.insert(line.end(), istreambuf_iterator<char>(inpfile), istreambuf_iterator<char>());
        line.erase(0, 55);
        auto index = line.find(token, 0);
        if (index != string::npos)
        {
            line.replace(index, token.size(), target);
        }
        ofstream outfile(dest_path + filepath.filename().generic_string());
        outfile << line;
    });

    boost::chrono::duration<double> finish = boost::chrono::system_clock::now() - start;
    std::cout << "Took " << finish.count() << " secs\n";
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T05:51:23.870

似乎您有很多文件完成的工作太少，所以这里的主要瓶颈是磁盘 IO。如果您对每个文件都有一些复杂且消耗 CPU 的任务，您可以更快地获得 C++ 版本，但在小任务上它是无关紧要的，因为 IO 是问题

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T05:50:08.210

尽管有些人认为，只要您不使用某些慢速功能（例如反射），c# 一点也不慢 - 事实上，人们最终编码速度更快，并且有更少的模糊错误，因此有更多时间花在优化上性能和逻辑，而不是错误修复，这意味着它最终会更快......

除了您在 C# 代码中使用更常见的库之外，这些库通常由 MS 开发人员编写和优化 - 与必须在 C++ 代码中滚动您自己的函数相比。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T06:05:50.050

当您“编译”C# 代码时，“编译器”会生成中间语言代码 (MSIL)，然后此代码在运行时由 dotnet 框架的 JIT 编译器编译为本机代码。JIT 编译的代码针对您执行代码的环境进行了高度优化。每个函数只发生一次，一旦函数被编译为本机代码，它将被重用，直到应用程序终止。因此，如果您一遍又一遍地调用一个函数，JIT 生成和优化的代码可能会胜过一般编译的 C++ 代码

# c - 如何在控制台中获取按键事件

> ID：14973046
> 
> 赞同：6
> 
> 时间：2013-02-20T05:42:36.090
> 
> 标签：c, events

我想在`on_key_press_event`不按 Enter 的情况下获得。当然我需要字符代码。有解决办法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T05:51:16.967

[我建议在这里](http://en.wikibooks.org/wiki/A_Little_C_Primer/C_Console_IO)通读。我认为

```
getchar() 
```

可能是你所追求的。

编辑：事实上可能

```
#include <conio.h>
_getch() 
```

对您来说会更好，因为它不需要行尾字符（要按下输入按钮）。对于 windows 参考[这个](http://msdn.microsoft.com/en-us/library/078sfkak%28v=vs.80%29.aspx)，对于 unix 系统，这似乎包含在[curses 库](https://www.google.ca/search?&q=curses%20library)中。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-20T05:58:42.290

没有跨平台的方法可以从标准输入进行无缓冲输入。如果您使用的是基于 Unix 的发行版，则可以使用[curses 。](http://en.wikipedia.org/wiki/Curses_%28programming_library%29)在 Windows 上，您可以使用[getch](http://msdn.microsoft.com/en-us/library/078sfkak%28v=vs.80%29.aspx)。

# java - BeanProcessor 部分工作

> ID：14973047
> 
> 赞同：0
> 
> 时间：2013-02-20T05:42:38.723
> 
> 标签：java, database, jakarta-ee

我正在尝试使用 BeanProcessor 填充我的类，但它部分有效。我的课程如下

地址类

```
public class Address {

    ..All attributes of address class go here...
        .. All setter and getters go here...
} 
```

将地址类作为其成员的员工类

```
public class Employee {

    private int ID;
    private String fname;
    private String lname;
    private String mobile;
    private String phone;
    private String email;
    private String position;
    private String title;
        private String username;
        private String password;
        private String question;
        private String answer;
        private Address address;          << address class is a member of employee class
        .. All setter and getters go here....
} 
```

我的模型如下：

```
 Employee emp = new Employee();
        try {

            ps = con.prepareStatement("select * from employee,address "
                    + "WHERE employee.username = ? AND "
                    + "employee.AddID = address.ID");

            ps.setString(1, username);
            ResultSet r = ps.executeQuery();
            if (r.next()) {
                BeanProcessor bp = new BeanProcessor();
                emp = bp.toBean(r,Employee.class);
                System.out.println("name:" + emp.getName()); << shows the name correctly
                System.out.println("block:"+emp.getAddress().getBlock());<< the output is null
            }

            con.close();
            ps.close();
        } catch (SQLException e) {
            System.err.println(e.getMessage());

        }
       return emp;
    } 
```

当我运行应用程序时，它显示 emp 对象已正确填充，但其中的 Address 对象未正确填充，并且它为 getBlock() 方法返回 null，我检查了数据库块是否有值。根据spiritwalker的回答，因为它没有抛出nullpointer异常，所以转换是正确的，如果那是错误的，你有什么建议作为BeanProcessor的替代品？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T05:54:49.350

你能确定对应的地址记录在**block**列中有数据吗？之所以这样想是因为，您说**输出为 null**而不是**NullPointerException**，这意味着地址已由 BeanProcessor 正确映射和初始化，否则 emp.getAddress() 应该给您一个 Null 然后 emp.getAddress().getBlock () 会以 NPE 告终吗？

而且，根据 BeanProcessor JAVA doc ** 如果转换失败（即属性是 int 并且列是 Timestamp）抛出 SQLException **，看起来转换没有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T05:50:56.483

从[BeanProcessor 文档](http://commons.apache.org/dbutils/apidocs/org/apache/commons/dbutils/BeanProcessor.html#toBean%28java.sql.ResultSet,%20java.lang.Class%29)：

> 将 ResultSet 行转换为 JavaBean。此实现使用反射和 BeanInfo 类将列名与 bean 属性名匹配。属性与基于几个因素的列匹配：
> 
> 1.  该类具有与列同名的可写属性。名称比较不区分大小写。
> 2.  可以使用 ResultSet.get* 方法将列类型转换为属性的设置方法参数类型。如果转换失败（即属性是 int 并且列是 Timestamp），则抛出 SQLException。

注意第二点。ResultSet 不支持`Address`类。所以，BeanProcessor 不能处理这种类型的字段。

**更新：**关于处理期间的 SQLException。

你应该检查你的 sql 查询。如果它不返回名为的列，`address`那么 BeanProcessor 就不会触及这个属性，因此不会抛出任何异常。

**更新：**关于 NullPointerException。

`getAddress().getBlock()`是的，不抛出 NullPointerException听起来很奇怪。但是从上面的文档中可以清楚地看出 BeanProcessor 无法正确初始化地址字段。我的猜测是，即使没有调用，它`getAddress()`也会以某种方式返回非空对象。`setAddress`请仔细检查 Employee 的默认构造函数和`getAddress`方法。

你也可以打电话`new Employee().getAddress().getBlock()`来检查一下。

**更新：**如何实现嵌套对象处理

我没有使用 BeanProcessor 的经验，但它提供了一些您可以使用的受保护方法。例如，您可以尝试覆盖[processColumn](http://commons.apache.org/dbutils/apidocs/org/apache/commons/dbutils/BeanProcessor.html#processColumn%28java.sql.ResultSet,%20int,%20java.lang.Class%29)：

```
public class CustomBeanProcessor extends BeanProcessor {

    @Override
    protected  int[] mapColumnsToProperties(ResultSetMetaData rsmd, PropertyDescriptor[] props) throws SQLException {
          int[] mapping = super.mapColumnsToProperties(rsmd, props);
          for(PropertyDescriptor prop : props) {
                //find address property
                //change PROPERTY_NOT_FOUND value to index of column (addressid maybe)
          }
    }

    @Override
    protected Object processColumn(ResultSet rs, int index, Class<?> propType) throws SQLException {
        if(propType==Address.class) {
            //here you create address object
            //you may need several calls to rs.get to check for all address properties.
        }
    }
} 
```

# c++ - 基类和派生类中的相同数据成员

> ID：14973056
> 
> 赞同：3
> 
> 时间：2013-02-20T05:43:30.280
> 
> 标签：c++, inheritance

我是 C++ 编程的新手，我正在阅读继承概念，我对继承概念有疑问：如果基类和派生类具有相同的数据成员会发生什么。也请通过我的代码如下：

```
#include "stdafx.h"
#include <iostream>
using namespace std;

class ClassA
{
   protected :
       int width, height;
   public :
       void set_values(int x, int y)
       {
           width = x;
           height = y;
       }
};
class ClassB : public ClassA
{
    int width, height;
    public :
        int area()
        {
            return (width * height);
        }
};

int main()
{
    ClassB Obj;
    Obj.set_values(10, 20);
    cout << Obj.area() << endl;
    return 0;
 } 
```

在上面我声明了与基类数据成员同名的数据成员，我`set_values()`用派生的类对象调用了函数来初始化数据成员`width`和`height`.

当我调用该`area()`函数时，为什么它返回一些垃圾值而不是返回正确的值。只有当我在派生类中声明与基类数据成员同名的数据成员时才会发生这种情况。如果我删除派生类中声明的数据成员，它工作正常。那么在派生类中声明有什么问题呢？请帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T05:47:21.580

*隐藏*（或*阴影*）中的`width`和`height`数据成员。`B` **`A`**

 **在这种情况下，它们没有任何用处，应该被删除

如果要访问*隐藏*（或*隐藏*）数据成员，可以使用范围解析：

```
 int area()
        {
          return (A::width * A::height);
        } 
```**

# php - 去除网址中的斜线

> ID：14973057
> 
> 赞同：0
> 
> 时间：2013-02-20T05:43:31.763
> 
> 标签：php, regex, url, stripslashes

我在 php 中使用 regexp 我想在 regexp 中使用这样我可以使用它但错误是弹出如何解决这个问题。请指导我。假设这里 $url 是这样动态改变的

```
$preg_wurl = '/^'.$url.'/i';
    $wurl = preg_grep($preg_wurl,$urls);
$spreg_wurl = stripslashes($preg_wurl);
    echo '<h1>'.$spreg_wurl.'</h1>'; 
```

错误：

```
Warning: preg_grep() [<a href='function.preg-grep'>function.preg-grep</a>]: Unknown modifier '/' in C:\wamp\www\PHP\get website link.php on line 33 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T05:47:46.427

您可以使用斜杠以外的一些分隔符来指定正则表达式，例如“！/！” 匹配任何斜线。请注意，我正在使用！而不是 / 来分隔我的正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T05:59:14.947

使用 preg_quote() 函数转义正则表达式字符试试`$preg_wurl = '/^'.preg_quote($url, '/').'/i';`

# php - 并排显示 CSS 框

> ID：14973058
> 
> 赞同：1
> 
> 时间：2013-02-20T05:43:37.343
> 
> 标签：php, javascript, html, css

CSS代码

```
 #folder {  
width: 105px;
background: #BABABA;
position: relative;
 -moz-border-radius:    10px;
-webkit-border-radius: 10px;
border-radius: 0px 10px 10px 10px;
} 
```

这是创建盒子的 CSS 代码

php代码

```
<link rel="stylesheet" type="text/css" href="fold.css" /></style>
<?php 
function listFolderFiles($dir,$exclude){ 
 $ffs = scandir($dir); 
echo '<ul class="ulli">'; 
foreach($ffs as $ff){ 
    if(is_array($exclude) and !in_array($ff,$exclude)){ 
        if($ff != '.' && $ff != '..'){ 
        if(!is_dir($dir.'/'.$ff)){ 

        } else { 
        echo '<div class=wrap><div id=folder><li>'.$ff.'</div></div>';    
        } 
        if(is_dir($dir.'/'.$ff)) listFolderFiles($dir.'/'.$ff,$exclude); 
        echo '</li>'; 
        } 
    } 
} 
echo '</ul>'; 
} 

listFolderFiles('.',array('index.php','edit_page.php')); 
?> 
```

它显示一个在另一个下方的框 如何并排显示框

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T05:47:12.803

对于并排的 div 元素，您需要添加

```
float:left 
```

在您的 CSS 课程中将为您工作。

检查示例：[DIV TABLE](http://www.codeproject.com/Articles/47934/DIV-TABLE)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T05:48:11.693

```
float: left; 
```

这将并排显示框，但您需要将以下属性添加到框之后的项目才能正确显示。

```
clear: both; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T05:48:36.067

```
#folder {display: inline-block;} 
```

或者 `#folder {float: left}`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T05:48:48.727

我会说而不是这样做：

```
echo '<div class=wrap><div id=folder><li>'.$ff.'</div></div>'; 
```

尝试：

```
echo '<li><div class=wrap><div id=folder>'.$ff.'</div></div></li>'; 
```

确保您的`< li >`标签正确关闭并包装您的`divs`（或相反，不确定您在尝试什么）

但是无论如何，您的代码似乎都不是很干净，例如使用 class`.folder`而不是 id`#folder`因为 id 根据定义应该是唯一的。

但我想你必须从某个地方开始，祝你好运:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T05:59:57.157

默认情况下，div 是块元素。

这些元素消耗所有可用的宽度。

即使您为它们设置了宽度，边距也会得到其余部分。

您可以通过以下任何方法更改此行为：

*   将 display 属性从 display: block 设置为 display:inline 或 display:inline-block
*   用 float:left 或 float:right 浮动元素
*   使用 position: absolute 手动定位 div

# css - 使用 CSS 定位语言

> ID：14973061
> 
> 赞同：3
> 
> 时间：2013-02-20T05:43:43.447
> 
> 标签：css

我只想将网页中的汉字设置为更大，并使英文字母保持不变，因为不知何故，汉字看起来比英文字符大得多。

这可能吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T06:26:55.570

如果不将汉字包装到元素中是不可能的，比如`<span lang=zh>...</span>`（你可以使用`:lang(zh) { ... }`）。

另一方面，如果中英文字符看起来大小差异太大，则可能是由于使用了风格不兼容的字体造成的。如果您设置 eg just `font-family: Arial`，那么英文字符将以 Arial 显示，而中文字符将以其他字体显示，具体取决于浏览器的默认设置，因为 Arial 不包含中文字符。那么解决方案是使用一个`font-family`值，该值仅包含具有中文字符的字体（以可接受的样式）。

# arrays - 循环后数组的随机结果

> ID：14973065
> 
> 赞同：0
> 
> 时间：2013-02-20T05:44:05.230
> 
> 标签：arrays, wordpress, loops, random, shuffle

首先，我花了上周的时间将这些代码从很多不同的来源拼凑在一起，如果你从我遇到的例子中可以看出，这是一个真正的科学怪人。我不擅长编写 PHP，但到目前为止已经完成了。任何投入将不胜感激。

我正在做一个项目，我需要从 cat 4 的所有子类别中获取最新的 10 个结果，之后我希望随机化结果并显示。我见过很多使用**shuffle();的例子。**功能，但在正确实施它时遇到问题。

这是我的代码：

```
<?php

$categories = get_categories( 'child_of=4' );
  foreach($categories as $category) {
  $args=array(
  'showposts' => 10,
  'category__in' => array($category->term_id),
  'caller_get_posts'=>1
);
$posts=get_posts($args);
  shuffle($posts);
  if ($posts) {
    foreach($posts as $post) {
      setup_postdata($post); ?>
        <div <?php post_class('boxy');?>>
      <a href="<?php the_permalink() ?>"><?php  the_post_thumbnail(); ?></a>

    <?php the_content(''); ?>
    </div>
      <?php
    } 
  } 
} 
?> 
```

在此处链接到我的结果：[进行中的实时工作](http://stephenperrett.net/Crave-new/?page_id=14)

此代码在每个类别中随机化结果，但按类别显示它们。我希望我已经足够清楚，似乎是一个简单的修复。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T06:04:29.103

您需要首先使用您拥有的所有类别制作所有帖子的数组。比你需要洗牌一样。试试这个，

```
 $posts = array();
 $categories = get_categories( 'child_of=4' );
 foreach($categories as $category) {
   $args=array(
    'showposts' => 10,
    'category__in' => array($category->term_id),
    'caller_get_posts'=>1
   );
 $posts = $posts + get_posts($args);
} // Close your foreach here 
```

....比您的代码原样...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T06:39:00.603

```
$categories = get_categories( 'child_of=4' );
$cats = array();
foreach($categories as $category) {
   $cats[] = $category->term_id;
}

$args=array(
  'showposts' => 10,
  'category__in' => $cats,
  'orderby' => 'rand',
  'caller_get_posts'=>1
);
$posts=get_posts($args); 
```

我希望这将是一个更有效的解决方案。我还没有测试出来。

# java - 计算平均值？

> ID：14973073
> 
> 赞同：-1
> 
> 时间：2013-02-20T05:44:37.003
> 
> 标签：java, algorithm, data-structures

我对这个问题有疑问：

给定一个测试结果列表（每个都有测试日期、学生 ID 和学生的分数）；返回每个学生的最终分数。学生的最终分数是他/她的 5 个最高考试分数的平均值。您可以假设每个学生至少有 5 个考试成绩。

现在，事情就是这样。我不想要答案。

我尝试了散列，但散列可以提供带有地址的密钥，所以它对我不起作用。

我想过使用数组列表迭代思想来计算平均值并返回前五名的分数，但是我如何用 studentID 分配数字？

假设我希望输出为：Mike, 15。这不是问题所要求的吗？获取学生证和平均人数。请帮我提供一些线索，我正在学习。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T05:53:26.367

只需按学生 ID（作为主要排序键）和降序（次要排序键）对测试结果进行排序，然后按如下方式遍历集合（伪代码）：

```
lastId = element[0].Id - 1
for each record in element[]:
    if record.Id != lastId:
        lastId = record.Id
        counter = 5
        sum = 0
    if counter > 0:
        sum = sum + record.score
        counter = counter - 1
        if counter == 0:
            print "Student ", record.Id, " got average of ", (sum / 5) 
```

因为数据是排序的，所以您知道给定学生的所有分数都在一起，并且前五个是最高的。因此，上面的代码将允许您全部解决。

请记住，这取决于您的“每个学生至少有五个结果”规则。否则，您将不得不更改平均计算代码，并可能对最后一个学生进行一些后期工作循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T06:01:36.953

使用面向对象的原则。这里有一些提示。创建一个测试类来表示每个测试。

```
class Test
{
  Date date;
  Student s;          //store instance of student- has a relationship to Student
  double[] scores;     //store test scores
  double finalscore;  //final score
  Test() {
  //Initialize scores array and assign default values (0)
  }
} 
```

创建一个学生类来代表每个学生。

```
class Student
{
  String name;
  int id;
} 
```

创建测试的数组列表。

```
List<Test> tests = new ArrayList<Test>(); 
```

现在只需循环测试并找到平均值以存储在 finalscore 中。

# sql - Visual Studio 中的 SQL Like 查询

> ID：14973076
> 
> 赞同：0
> 
> 时间：2013-02-20T05:44:56.300
> 
> 标签：sql

我可以让其他查询工作，但我无法让这个查询在 Visual Studio 中工作假设 ConnectionString 在这个函数之外声明

公共数据表GetDtSearch（字符串搜索名）{

```
 string sql = "SELECT * FROM table WHERE (file_name LIKE @searchname)";

        DataTable dt = new DataTable();

        using (MySqlConnection con = new MySqlConnection(ConnectionString))
        {

            try
            {
                con.Open();
            }
            catch { return dt; }

            using (MySqlCommand cmd = new MySqlCommand(sql, con))
            {
                cmd.Parameters.Add(@searchname,"%"+ searchname+"%");
                using (MySqlDataAdapter adp = new MySqlDataAdapter(cmd))
                {
                    try
                    {
                        adp.Fill(dt);
                    }
                    catch
                    {

                    }

                }

            }
            con.Close();
        }

        return dt;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:40:17.967

```
 cmd.Parameters.Add("@searchname","%"+ searchname+"%"); 
```

用引号将参数名称（第一个参数）括起来。

PS我已经对您的否决问题投了赞成票，但是反对者这样做是正确的-您需要说明发生了什么-错误消息，或“未返回结果”或比“无法获得此查询”更精确的内容去工作”。

PPS 另外，使用**AddWithValue**方法，因为 Add(string, object) 签名已被弃用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:28:32.683

在搜索参数周围加上引号。-
`SELECT * FROM table WHERE (file_name LIKE '@searchname')`

# advantage-database-server - 使用提供的 AX_SetPassword 方法在加密上使用 Visual Objects RDD 和 ADS 11

> ID：14973079
> 
> 赞同：0
> 
> 时间：2013-02-20T05:45:04.423
> 
> 标签：advantage-database-server

此代码不起作用：

```
METHOD AX_SetPassword( szEncodeKey AS STRING ) AS VOID PASCAL CLASS 
ADSDataServer

    // Set password for record encryption

    DbInfo( DBI_AXS_SET_PASSWORD, String2Psz( szEncodeKey ) )

    RETURN 
```

错误信息是：`Operation is not supported by the current RDD.`

我按照 ADS 帮助文件中描述的过程使用 AXDBFCDX。

有什么线索可以完成这项工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:07:02.197

这个问题在[优势论坛中得到了回答](http://devzone.advantagedatabase.com/forum/questions/1619/using-visual-objects-rdd-and-ads-11-on-encryption-using-supplied-ax_setpassword-method)

# ruby-on-rails - Bundler 找不到 gem "nokogiri" 的兼容版本

> ID：14973082
> 
> 赞同：5
> 
> 时间：2013-02-20T05:45:13.400
> 
> 标签：ruby-on-rails, ruby, gem, capybara, nokogiri

我将 Rails 应用程序推送到 appfog，但收到以下错误消息：

> /var/vcap.local/dea/apps/superb-0-dc92a2e492e46c40c06d2abc3ad59841/app/rubygems ruby​​/1.9.1/gems/bundler-1.1.3/lib/bundler/resolver.rb:129:in `block in resolve' Bundler 找不到 gem "nokogiri" 的兼容版本：(Bundler::Versi nConflict) 在快照中 (Gemfile.lock): nokogiri (1.5.6) 在 Gemfile: capybara (= 1.1.2) ruby​​ 依赖于 nokogiri (>= 1.3.3) 红宝石
> 
> 运行`bundle update`将只使用 Gemfile 中的 gem 从头开始​​重建快照，这可能会解决冲突。

和我的 Gemfile：

```
source 'https://rubygems.org'

gem 'rails', '3.2.12'
gem 'mysql2'
gem 'pg'
gem 'thin'
gem 'sqlite3'

group :development, :test do
  gem 'rspec-rails', '2.11.0'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '3.2.5'
  gem 'coffee-rails', '3.2.2'
  gem 'uglifier', '1.2.3'
end

gem 'jquery-rails', '2.0.2'

group :test do
  gem 'capybara', '1.1.2'
end 
```

如何解决问题？

编辑： 添加 Gemfile.lock

```
 GEM
  remote: https://rubygems.org/
  specs:
    actionmailer (3.2.12)
      actionpack (= 3.2.12)
      mail (~> 2.4.4)
    actionpack (3.2.12)
      activemodel (= 3.2.12)
      activesupport (= 3.2.12)
      builder (~> 3.0.0)
      erubis (~> 2.7.0)
      journey (~> 1.0.4)
      rack (~> 1.4.5)
      rack-cache (~> 1.2)
      rack-test (~> 0.6.1)
      sprockets (~> 2.2.1)
    activemodel (3.2.12)
      activesupport (= 3.2.12)
      builder (~> 3.0.0)
    activerecord (3.2.12)
      activemodel (= 3.2.12)
      activesupport (= 3.2.12)
      arel (~> 3.0.2)
      tzinfo (~> 0.3.29)
    activeresource (3.2.12)
      activemodel (= 3.2.12)
      activesupport (= 3.2.12)
    activesupport (3.2.12)
      i18n (~> 0.6)
      multi_json (~> 1.0)
    arel (3.0.2)
    builder (3.0.4)
    capybara (1.1.2)
      mime-types (>= 1.16)
      nokogiri (>= 1.3.3)
      rack (>= 1.0.0)
      rack-test (>= 0.5.4)
      selenium-webdriver (~> 2.0)
      xpath (~> 0.1.4)
    childprocess (0.3.8)
      ffi (~> 1.0, >= 1.0.11)
    coffee-rails (3.2.2)
      coffee-script (>= 2.2.0)
      railties (~> 3.2.0)
    coffee-script (2.2.0)
      coffee-script-source
      execjs
    coffee-script-source (1.5.0)
    daemons (1.1.9)
    diff-lcs (1.1.3)
    erubis (2.7.0)
    eventmachine (1.0.1-x86-mingw32)
    execjs (1.4.0)
      multi_json (~> 1.0)
    ffi (1.4.0-x86-mingw32)
    hike (1.2.1)
    i18n (0.6.4)
    journey (1.0.4)
    jquery-rails (2.0.2)
      railties (>= 3.2.0, < 5.0)
      thor (~> 0.14)
    json (1.7.7)
    mail (2.4.4)
      i18n (>= 0.4.0)
      mime-types (~> 1.16)
      treetop (~> 1.4.8)
    mime-types (1.21)
    multi_json (1.6.1)
    mysql2 (0.3.11-x86-mingw32)
    nokogiri (1.5.6-x86-mingw32)
    pg (0.14.1-x86-mingw32)
    polyglot (0.3.3)
    rack (1.4.5)
    rack-cache (1.2)
      rack (>= 0.4)
    rack-ssl (1.3.3)
      rack
    rack-test (0.6.2)
      rack (>= 1.0)
    rails (3.2.12)
      actionmailer (= 3.2.12)
      actionpack (= 3.2.12)
      activerecord (= 3.2.12)
      activeresource (= 3.2.12)
      activesupport (= 3.2.12)
      bundler (~> 1.0)
      railties (= 3.2.12)
    railties (3.2.12)
      actionpack (= 3.2.12)
      activesupport (= 3.2.12)
      rack-ssl (~> 1.3.2)
      rake (>= 0.8.7)
      rdoc (~> 3.4)
      thor (>= 0.14.6, < 2.0)
    rake (10.0.3)
    rdoc (3.12.2)
      json (~> 1.4)
    rspec (2.11.0)
      rspec-core (~> 2.11.0)
      rspec-expectations (~> 2.11.0)
      rspec-mocks (~> 2.11.0)
    rspec-core (2.11.1)
    rspec-expectations (2.11.3)
      diff-lcs (~> 1.1.3)
    rspec-mocks (2.11.3)
    rspec-rails (2.11.0)
      actionpack (>= 3.0)
      activesupport (>= 3.0)
      railties (>= 3.0)
      rspec (~> 2.11.0)
    rubyzip (0.9.9)
    sass (3.2.6)
    sass-rails (3.2.5)
      railties (~> 3.2.0)
      sass (>= 3.1.10)
      tilt (~> 1.3)
    selenium-webdriver (2.30.0)
      childprocess (>= 0.2.5)
      multi_json (~> 1.0)
      rubyzip
      websocket (~> 1.0.4)
    sprockets (2.2.2)
      hike (~> 1.2)
      multi_json (~> 1.0)
      rack (~> 1.0)
      tilt (~> 1.1, != 1.3.0)
    sqlite3 (1.3.7-x86-mingw32)
    thin (1.5.0)
      daemons (>= 1.0.9)
      eventmachine (>= 0.12.6)
      rack (>= 1.0.0)
    thor (0.17.0)
    tilt (1.3.3)
    treetop (1.4.12)
      polyglot
      polyglot (>= 0.3.1)
    tzinfo (0.3.35)
    uglifier (1.2.3)
      execjs (>= 0.3.0)
      multi_json (>= 1.0.2)
    websocket (1.0.7)
    xpath (0.1.4)
      nokogiri (~> 1.3)

PLATFORMS
  x86-mingw32

DEPENDENCIES
  capybara (= 1.1.2)
  coffee-rails (= 3.2.2)
  jquery-rails (= 2.0.2)
  mysql2
  pg
  rails (= 3.2.12)
  rspec-rails (= 2.11.0)
  sass-rails (= 3.2.5)
  sqlite3
  thin
  uglifier (= 1.2.3) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T09:50:43.427

你可以试试这个

添加你的gemfile

```
gem 'nokogiri', '1.3.3' 
```

这样您的应用程序仅使用 nokogiri 1.3.3 而不是最新版本

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-05T08:38:52.703

我有 ruby​​ 2.1.3 rails 4.0.2 nokogiri 1.6.6.2

这对我有帮助

```
export NOKOGIRI_USE_SYSTEM_LIBRARIES=true 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-11T03:28:48.673

在您的控制台上执行此命令以更新您的代码：

`bundle update`

在控制台上发生的各种更新中（我使用的是 Mac），您应该会看到这样的更新：`Using nokogiri 1.6.7.2 (was 1.6.6.2)`。

# html - 给定的网站如何确定通过 Tab 键“聚焦”的事物的顺序？

> ID：14973084
> 
> 赞同：0
> 
> 时间：2013-02-20T05:45:18.990
> 
> 标签：html, css

我注意到在我最喜欢的网站上，只需点击 Tab 键即可轻松浏览。相关的事情通常首先得到关注。给出焦点的顺序是否有韵律和理由，或者只是浏览器在 Divs 中滚动？我可以在自己的站点中定义默认情况下通过 tab 键给出焦点的顺序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T08:17:17.330

使用 tabindex 属性

因此，如果您有一个表格，其中包含 4 个输入字段，其中 tabindex=1、tabindex=2、tabindex=3、tabindex=4。制表符将按该顺序在这些输入之间跳转。

信息在这里

[http://www.w3schools.com/tags/att_global_tabindex.asp](http://www.w3schools.com/tags/att_global_tabindex.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T05:48:19.340

tabindex=number 确定 Tab 焦点的顺序。

[http://reference.sitepoint.com/html/a/tabindex](http://reference.sitepoint.com/html/a/tabindex)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-20T05:48:58.697

是的，你需要使用`tabindex`属性

`tabindex=1`

`tabindex = ordernumber`
`where ordernumber = 1, 2, 3 and so on (unique)`

# android - android中Activity中的页面卷曲效果

> ID：14973087
> 
> 赞同：2
> 
> 时间：2013-02-20T05:45:37.950
> 
> 标签：android, animation

嗨，我是一个新的 t android 及其动画。

我正在开发一个 android 应用程序，在其中我需要为文本制作一本书，并且必须为书籍页面提供卷曲效果。到目前为止，我已经在互联网上看到了可能页面卷曲的例子。但是它们上面都有图像，并赋予它们卷曲效果。

我想问一下是否有可能对android中的活动产生卷曲效果？因为我有要在活动上写的文字以及书签和搜索等其他功能。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T06:20:33.963

我建议使用[code.google.com/p/android-page-curl并在执行](http://code.google.com/p/android-page-curl)[此处](https://stackoverflow.com/questions/5604125/android-taking-screenshot-of-offscreen-page)提到的操作之前对活动进行截图。之后，只需将 page-curl 与获得的图像一起使用。

# javascript - 开/关：开关按钮引导

> ID：14973093
> 
> 赞同：9
> 
> 时间：2013-02-20T05:46:07.690
> 
> 标签：javascript, jquery, twitter-bootstrap, uiswitch

**这是我的代码-**

```
<div id="normal-toggle-button" class="toggle-button" style="width: 100px; height: 25px;">
            <div style="left: 0px; width: 150px;"><input type="checkbox" checked="checked"><span class="labelLeft" style="width: 50px; height: 25px; line-height: 25px;">ON</span><label for="" style="width: 50px; height: 25px;"></label><span class="labelRight" style="width: 50px; height: 25px; line-height: 25px;">OFF </span></div>
        </div>
    </div> 
```

**脚本-**

```
$(document).ready(function() {
        $('#normal-toggle-button').toggleButtons();
    }); 
```

我想要这个页面上给出的基本按钮 -[切换按钮](http://www.larentis.eu/bootstrap_toggle_buttons/)

我做得很好。但我仍然错过了一些东西。

在这里签到—— [小提琴](http://jsfiddle.net/stackmanoz/WvRZw/)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-20T09:01:47.143

bootstrapSwitch的最简单使用

[演示](http://jsfiddle.net/WvRZw/474/)

```
<link href="bootstrap-switch.css" rel="stylesheet">
<script src="jquery.js"></script>
<script src="bootstrap-switch.js"></script>

<input type="checkbox">
<script>
  $('input:checkbox').bootstrapSwitch();
</script> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-20T05:52:04.530

## 班级很重要

您仍然将课程设置为“切换按钮”，将其更改为“切换”

这是您更新的小提琴：http: [//jsfiddle.net/WvRZw/10/](http://jsfiddle.net/WvRZw/10/)

```
 <div id="normal-toggle-button" class="toggle-button".... 
```

改成

```
 <div id="normal-toggle-button" class="switch" .... 
```

## css/javascript 包括

您还需要包含引导 javascript 和 css（请参阅参考资料部分）（还关于包括 javascript 和 css：[如何获取引导按钮以显示活动状态？](https://stackoverflow.com/questions/14016530/how-to-get-bootstrap-buttons-to-show-active-state/14016644#14016644)）

# android - Eclipse 没有检测到索尼爱立信 Xperia 进行调试？

> ID：14973097
> 
> 赞同：2
> 
> 时间：2013-02-20T05:46:29.777
> 
> 标签：android, eclipse, debugging, android-4.0-ice-cream-sandwich

我的 Eclipse 没有检测到我的手机。我想直接在我的手机上运行我的应用程序。我的手机有 Android 版本 4.0.4。每当我将手机与笔记本电脑连接时，它都会在设备列表中显示未知。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T05:52:18.630

尝试以下操作：-

*   启用 USB 调试（设置 --> 安全 --> 开发人员选项 --> 启用 USB 调试）
*   如果仍然不起作用，请尝试重置`adb`（DDMS 透视图 --> 设备选项卡 --> 右侧的小三角形（最后一个选项） --> 重置 adb）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:42:47.430

在插入 USB 数据线之前在您的移动设备中设置此选项：
*设置 > Xperia > USB 连接 > USB 连接模式*>**大容量存储模式 (MSC)**[在这里](https://stackoverflow.com/a/15543848/419446)

查看我的详细答案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T05:55:57.320

如果您使用的是 Windows，您很可能应该重新安装驱动程序，我多次遇到这种类型的问题，而且每次都遇到驱动程序问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T13:31:23.780

您应该升级您的 Ubuntu 并且您的手机有可能在 Eclipse 中正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-21T06:28:09.433

2 步骤 a) 尝试从 eclipse 中下载 gooogle 驱动程序 b) 使用下载的驱动程序

这两个步骤都可以在[这里](http://visualgdb.com/tutorials/android/usbdebug/manualinstall.php)找到 当然你也必须解锁索尼。我为此关注了 RJ 评论并开始工作。

# django - 一串字母和空格的正则表达式

> ID：14973099
> 
> 赞同：2
> 
> 时间：2013-02-20T05:46:32.747
> 
> 标签：django

在 django 的 /urls.py 文件中，如何编写字母和空格字符串的正则表达式？

例如，`url(r'^(?P<poll_id>\d+)/results/$', views.results, name='results')`匹配`/polls/5/results/`

同样，我正在寻找匹配的正则表达式`/polls/Zero%20Dark%20Thirty/results/`或`/polls/Inception/results/`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T05:51:11.217

使用字符类，例如`'[a-zA-Z ]'`

# android - 不可见的 unicode 字符 (0x200E) 在 Android TextView (Gingerbread 及以下) 中显示标记

> ID：14973101
> 
> 赞同：2
> 
> 时间：2013-02-20T05:46:41.493
> 
> 标签：android

我在英文字符串中插入[\u200E](http://www.fileformat.info/info/unicode/char/200e/index.htm)标记以强制从左到右。这个不可见的 unicode 字符（BiDi 标记）在 ICS 和 Jelly Bean 上运行良好，但在 Gingerbread 上运行代码时我注意到一个奇怪的标记，如下图所示：

![在此处输入图像描述](../Images/cdede39cd278b8866f47db8a44b27b25.png)

这是我用来重现此问题的代码：

```
public class MyActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        final TextView view = new TextView(this);
        view.setText("text \u200E\u200E\u200E text");
        setContentView(view);
    }
} 
```

关于为什么显示这个隐形字符以及如何隐藏它的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-10T20:07:50.700

系统的 Gingerbread 字体可能不支持该字符。您可以在 View 上使用*自定义字体*，例如 Android 4.0 及更高版本使用的 Roboto 字体。

Roboto 可以从这里下载：http: [//developer.android.com/design/style/typography.html](http://developer.android.com/design/style/typography.html)

# vbscript - 使用 vbscript 替换文本文件中的多个文本

> ID：14973105
> 
> 赞同：2
> 
> 时间：2013-02-20T05:47:02.743
> 
> 标签：vbscript, replace, text-files

我正在尝试从文本文件中替换 3 个文本。我试过这个 -

```
Const ForReading = 1
Const ForWriting = 2

Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objFile = objFSO.OpenTextFile("W:\Test.txt", ForReading)

strText = objFile.ReadAll
objFile.Close
strNewText = Replace(strText, "Aron_", "Lori_")
strNewText1 = Replace(strText, "Aron", "Jason")   'Not working
strNewText2 = Replace(strText, "Sketa", "Skicia") 'Not working

Set objFile = objFSO.OpenTextFile("W:\Test.txt", ForWriting)
objFile.WriteLine strNewText 
objFile.WriteLine strNewText1 'Not working
objFile.WriteLine strNewText2 'Not working

objFile.Close 
```

我无法弄清楚如何进行多次替换。代码非常适合单个替换功能，但不超过一个......请帮助

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T05:52:57.633

您需要调用`Replace`先前的结果`Replace`：

```
Const ForReading = 1
Const ForWriting = 2

Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objFile = objFSO.OpenTextFile("W:\Test.txt", ForReading)

strText = objFile.ReadAll
objFile.Close
strNewText = Replace(strText, "Aron_", "Lori_")
strNewText1 = Replace(strNewText, "Aron", "Jason")
strNewText2 = Replace(strNewText1, "Sketa", "Skicia")

Set objFile = objFSO.OpenTextFile("W:\Test.txt", ForWriting)
objFile.WriteLine strNewText2 

objFile.Close 
```

* * *

您实际上可以重用单个变量，而不是使用`strNewText`, `strNewText1`, `strNewText2`。

```
strText = Replace(strText, "Aron_", "Lori_")
strText = Replace(strText, "Aron", "Jason")
strText = Replace(strText, "Sketa", "Skicia") 
```

然后：

```
objFile.WriteLine strText 
```

* * *

此外，您可能需要考虑使用正则表达式一次匹配多个值。（在 SO 上搜索**VBScript 正则表达式**或**VBA 正则表达式**。）

# bash - AWK递归搜索字段？

> ID：14973106
> 
> 赞同：0
> 
> 时间：2013-02-20T05:47:09.040
> 
> 标签：bash, awk, gawk

我有多个带有名称和数字的文件：

```
Yolanda 606
Yolanda 669
Yolanda 713
Yoselin 301
Yoselin 312
Yoselin 352
Yuliana 249
Yuliana 251
Yuridia 241
Zaniyah 246 
```

我想对每个 uniq 第一列值的第二列求和？所以约兰达 606 + 669 + 713 =

```
Yolanda 1988
Yoselin 965 
```

如果任何 Yolanda <= 200，我还想删除每个 Yolanda？

编辑：我很抱歉不清楚，但有超过一百万条记录和数十万个名字。Yolanda 是一个示例，我希望能够对任何给定的 '$1 == string' 执行这些操作。两个单独的 awk 命令会更好，所以我可以知道发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T05:58:39.233

这将做到：

```
awk '! ($1 !~ /Yolanda/ && $2 <= 200) { 
        arr[$1] += $2 
     } END { 
        for (i in arr) 
           printf("%s %d\n", i, arr[i]); }' file.txt 
```

它使用您的示例输入生成以下内容：

```
Zaniyah 246
Yuridia 241
Yuliana 500
Yolanda 1988
Yoselin 965 
```

如果`gawk`有空，您可以使用它的`asorti`功能将名称按字母顺序放回：

```
awk '! ($1 !~ /Yolanda/ && $2 <= 200) {
        arr[$1] += $2
     } END {
        n = asorti(arr, sorted)
        for (i = 1; i <= n; i++)
           printf("%s %d\n", sorted[i], arr[sorted[i]]);  }' file.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T06:04:01.990

假设您的数据在**data.txt**中：

```
awk '$2>200{sum[$1]+=$2} END {for(name in sum){print name,sum[name]}}' data.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T14:29:29.097

如果任何值小于 200，这将删除总数

```
$ cat infile
Yolanda 606
Yolanda 669
Yolanda 713
Yoselin 301
Yoselin 312
Yoselin 352
Yuliana 249
Yuliana 251
Yuridia 241
Zaniyah 246
blabla 199
blabla 800

$ awk '{T[$1]+=$2} $2<200{E[$1]} END{for(i in T) if (!(i in E)) print i,T[i]}' infile
Yuridia 241
Yoselin 965
Zaniyah 246
Yolanda 1988
Yuliana 500 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T12:52:22.483

这将做：

```
awk '{if($0~/Yolanda/&&$2<=200){next}a[$1]+=$2;}END{for(i in a) print i,a[i]}' your_file 
```

测试：

```
> cat temp
Yolanda 199
Yolanda 606
Yolanda 669
Yolanda 713
Yoselin 301
Yoselin 312
Yoselin 352
Yuliana 249
Yuliana 251
Yuridia 241
Zaniyah 246
> awk '{if($0~/Yolanda/&&$2<=200){next}a[$1]+=$2;}END{for(i in a) print i,a[i]}' temp
Yolanda 1988
Yuliana 500
Zaniyah 246
Yuridia 241
Yoselin 965
> 
```

# javascript - 如何使用 playframework 将值从选定选项传递给控制器

> ID：14973112
> 
> 赞同：0
> 
> 时间：2013-02-20T05:47:30.973
> 
> 标签：javascript, jquery, ajax, playframework

我正在尝试使用基于下拉列表的选定值的 url 进行 ajax 调用。

到目前为止，我有类似的东西：

```
$('#select').change(function() {
    $.ajax({
        url:'@{action($(this).val())}',
        success:function(report){
           alert('success');
        },
        fail:function(error){
            alert('error:'+error);         
        }
    }
    }); 
```

模板不会编译和抱怨 url 行。

我的问题是我不知道如何将从 jquery 返回的值转换为要路由的参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T06:01:55.400

我不太了解 playframework，但我了解 jQuery ajax。所以这是一个解决方案，可能会帮助您解决问题。在 jQuery Ajax 方法中，我们可以通过 POST 或 GET 方法发送数据。为此，我们必须在 ajax 选项中设置类型选项。要发送数据，我们必须在 ajax 选项中设置 data 参数，其中包含我们要发布到 url 的所有数据。

```
$('#select').change(function() {

 var params = {myvar:$("#select :selected").val()};

 $.ajax({
    type: "POST",       
    url:'path to controller',
    data: params,
    success:function(report){
       alert('success');
    },
    fail:function(error){
        alert('error:'+error);         
    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T05:58:21.070

知道了。使用jsRoute解决

```
$('#select').change(function() {
    var route = #{jsRoute @action(':field') /}
    $.ajax({
        url: route.url({field: $('#select').val()}),
        type: route.method,
        success:function(report){
           alert('success');
        },
        fail:function(error){
            alert('error:'+error);         
        }
    } 
```

# javascript - 如何使用javascript获取给定开始日期和结束日期之间的所有日期？

> ID：14973113
> 
> 赞同：1
> 
> 时间：2013-02-20T05:47:30.990
> 
> 标签：javascript

我需要获取给定日期和结束日期之间的日期。

例如：如果我在 Javascript 中获取开始日期`2013-02-20`和结束日期的值`2013-03-20`，我需要检查值之间的值，例如，`2013-02-20`与另一组天..我怎样才能得到值之间的值..？`2013-02-21``2013-02-22`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T06:02:29.963

使用您可以创建自己的任何功能需要什么

你有开始日期现在将它循环到 addDays(1) 并存储你想要存储在数组中的任何位置，并在结束日期停止循环现在检查你想要从数组中检查的日期。

尽可能简单。算法可以

```
you can use the following 
var someDate = new Date(); // or say your start date
var Datesbetween = new Date();
var numberOfDaysToAdd = 1;
in  loop 
Check for EndDate
Datesbetween.setDate(someDate.getDate() + numberOfDaysToAdd); // now store it where you want 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T06:04:28.403

```
var noOfDays = dateDiff(dateEarlier,dateLater);
var myDates = new Array();
for(var i=0; i<noOfDays; i++)
{
   myDates[i] = dateEarlier.getDate() + (i + 1);
} 
```

您获取日期差异的功能....

```
function dateDiff(dateEarlier, dateLater) {
    var one_day = 1000*60*60*24
    return (Math.round((dateLater.getTime()-dateEarlier.getTime())/one_day)  );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T06:06:49.810

如果您只想检查一个日期是否在另一个日期之间，您可以检查它们之间的差异，例如：

```
var dateEarlier, dateLater, dateCheck = new Date();
if ((dateCheck - dateEarlier > 0) && (dateLater - dateCheck > 0)) {
    /// do the stuff
} 
```

# javascript - 主干本地存储未定义

> ID：14973118
> 
> 赞同：0
> 
> 时间：2013-02-20T05:48:07.527
> 
> 标签：javascript, backbone.js, local-storage

我正在尝试使用backbone.js 和localstorage 编写一个简单的RSS。我无法将表单值保存到本地存储。

我正在使用[this](https://github.com/Jesse-Breuer/Backbone.js-localStorage/blob/master/script.js) & [this](http://coenraets.org/blog/2011/12/backbone-js-wine-cellar-tutorial-part-1-getting-started/)作为我的参考。

保存数据时出现以下错误

```
Resource failed to load 
    b.ajaxTransport.send jquery-1.9.1.min.js:5
    b.extend.ajax jquery-1.9.1.min.js:5
    g.ajax backbone-min.js:41
    g.sync backbone-min.js:41
    Backbone.sync backbone.localStorage.js:190
    f.extend.sync backbone-min.js:12
    f.extend.save backbone-min.js:16
    Backbone.View.extend.saveSource app.js:47
    b.event.dispatch jquery-1.9.1.min.js:3
    b.event.add.v.handle jquery-1.9.1.min.js:3 
```

**看法**

```
var sourceView = Backbone.View.extend({
   tagName:"li",

   template:_.template($('#tmpl_sourceDetails').html()), 

   initialize: function () {
        console.log(this.model);
        this.model.bind("change", this.render, this);
    },

    render: function (eventName) {
        $(this.el).html(this.template(this.model.toJSON()));
        return this;
    },

    events: {
            "change input": "change",
            "click .save": "saveSource",
            "click .delete": "deleteSource"
    },

    change: function (event) {
        var target = event.target;
        console.log('changing ' + target.id + ' from: ' + target.defaultValue + ' to: ' + target.value);

    },

    saveSource: function () {
        console.log(this.model);
        if (this.model.isNew()) {
            var self = this;
            site = $('#name').val();
            siteURL = $('#sourceURL').val(); 
        this.model.save({source:site,sourceURL:siteURL});
        this.$el.html(this.template(this.model.toJSON()));
        } else {
            this.model.save();
        console.log(this.Collections.length);   
        }
        return false;
       },

    deleteSource: function () {
        this.model.destroy({
            success: function () {
                alert('RSS source deleted successfully');
                window.history.back();
            }
        });
        return false;
    },

    close: function () {
        $(this.el).unbind();
        $(this.el).empty();
    }
}); 
```

**收藏**

```
//indicates collection
//localstorage table defined here
var RSSCollection = Backbone.Collection.extend({
    model: RSS,
    url: "../api/RSS",
    localStorage: new Store("tblSource")// saving all items under tblSource namespace.

}); 
```

**更新** 我认为错误是因为 model.localStorage 未定义。在保存而不是调用backbone.localSync 它调用Backbone.ajaxSync

```
backbone.localStorage.js 
    Backbone.getSyncMethod = function(model) {
      if(model.localStorage || (model.collection && model.collection.localStorage)) {
        return Backbone.localSync;
      }

      return Backbone.ajaxSync;
    }; 
```

我出错的任何想法/建议？谢谢

# ruby-on-rails - capybara - click_link error "wrong number of arguments (1 for 0)"

> ID：14973120
> 
> 赞同：1
> 
> 时间：2013-02-20T05:48:13.923
> 
> 标签：ruby-on-rails, capybara

I just updated capybara and capybara-webkit from the master branch. I have restarted my spork server and now any time I call capybara methods (visit or click_link for example) I get an the above error saying 1 argument was passed but 0 were expected.

```
Given /^I have a posting$/ do
  visit "/postings"
  click_link "edit"
end 
```

This happens with webkit and selenium.

Any ideas?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T15:45:28.637

Had same issue when updated capybara

Falling back to capybara v2.0.2 worked for me

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T07:24:07.533

This should be similar "Ambiguous matches" in `find`. You '/postings' page should have several "edit link"

Suggest to limit the result to first one, like this

```
find("a.edit-link:first").click 
```

Ref: [https://github.com/jnicklas/capybara/issues/658](https://github.com/jnicklas/capybara/issues/658)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-13T13:49:48.703

In my case the problem was a wrong version of xpath. In the Gem file it was (1.0.0) and it should be (2.0.0).

Capibara was installed with bundle wich set it corr, but I copied a Gemfile.lock from another project which problably was using outdated versions of gems.

# jsp - 如何在jsp中检索init参数

> ID：14973125
> 
> 赞同：9
> 
> 时间：2013-02-20T05:48:33.907
> 
> 标签：jsp, servlets

我尝试使用jsp获取url数据，为此我使用jsp代码作为

```
 String Url = pageContext.getServletConfig().getInitParameter("url").toString();
 out.println(Url); 
```

web.xml

```
<servlet>
<servlet-name>IploginJSP</servlet-name>
<jsp-file>/Iplogin.jsp</jsp-file>
    <init-param>
    <param-name>url</param-name>
    <param-value>http://xxx.xxx.xxx.xxx:9000</param-value>
    </init-param>
</servlet>
<servlet-mapping>
<servlet-name>IploginJSP</servlet-name>
<url-pattern>/Iplogin</url-pattern>
</servlet-mapping> 
```

但我显示 NullPointerException

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-20T06:09:58.507

我认为这将解决您的问题。

请在更改`web.xml`文件后重新启动服务器。

**web.xml**

```
<servlet>
    <servlet-name>GetInitParam</servlet-name>
    <jsp-file>/GetInitParam.jsp</jsp-file>
    <init-param>
        <param-name>url</param-name>  
        <param-value>hello</param-value>  
    </init-param>
</servlet>
<servlet-mapping>  
    <servlet-name>GetInitParam</servlet-name>  
    <url-pattern>/GetInitParam.jsp</url-pattern>  
</servlet-mapping> 
```

**获取初始化参数.jsp**

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Example of getting init param</title>
</head>
<body>
<%!
    String url= null;
    public void jspInit() { 
        ServletConfig config = getServletConfig(); 
        url= config.getInitParameter("url");
    }
%>
<%
    System.out.println(url);
%>
</body>
</html> 
```

**更新 1**

正如你在评论中所问的那样`to access parameters in all jsp files`。要访问您必须在您的所有 jsp 文件中设置`<context-param>`的参数`web.xml`

将以下行放入您的`web.xml`

```
<context-param>
<param-name>param1</param-name>
<param-value>hello</param-value>
</context-param> 
```

您可以在`jsp`文件中通过以下方式访问此参数：

```
<% 
    String param1=application.getInitParameter("param1"); 
    System.out.println(param1);
%> 
```

**更新2**

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">

<context-param>
<param-name>param1</param-name>
<param-value>hello</param-value>
</context-param>
</web-app> 
```

**JSP文件**

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Example of getting init param</title>
</head>
<body>
<%
    String param1=application.getInitParameter("param1"); 
    System.out.println(param1);
%>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-16T09:41:04.563

人们普遍认为，在 JSP 中我们应该使用 EL 而不是 scriptlet。所以这个版本在 JSP 文件中带有 EL：

```
<%@ taglib prefix='c' uri='http://java.sun.com/jsp/jstl/core' %>
<HTML>
<HEAD>
   <TITLE>Using of initParam</TITLE>
</HEAD>
<BODY >
    <c:set var="LANDING_DEFAULT_URL"  value="${initParam.LANDING_DEFAULT_URL}"/>
    <p>${LANDING_DEFAULT_URL}"</p> 
</BODY> 
```

和 web.xml：

```
<context-param>
  <param-name>LANDING_DEFAULT_URL</param-name>
  <param-value>https://xxx.xxx.xxx.com/</param-value>
</context-param> 
```

# android - Android 动态 Html 数据和图像不在 webview 中显示？

> ID：14973129
> 
> 赞同：0
> 
> 时间：2013-02-20T05:48:49.387
> 
> 标签：android, html, image, webview

对于我的 android 应用程序，我想像这样将 html 文件加载到 webview

```
webview.loadDataWithBaseURL("file:///android_asset/", text ,mimeType, encoding, " "); 
```

我使用这个数据显示 webview 很好，但我的图像没有显示在 webview 中。

`Question :`为什么我的 html 图像不显示在 webview 中？

这是 webview 的屏幕截图图像不显示任何人有想法告诉我如何解决这个问题。

![在此处输入图像描述](../Images/5ab9dc9562f1a8f5f998007940bf96a0.png)

`EDIT:`在这里，我的 Html 数据是动态的而不是静态的。而且我的图像也不是在编译时进入运行时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T05:56:57.653

试试这段代码，它适用于所有 API 级别。

webview.loadUrl("file:///android_asset/myfile.html");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-09T02:36:57.310

我遇到了同样的问题，因为文件名区分大小写。

因此，如果您已`image.PNG`保存，请确保您的 html 文件引用`image.PNG`而不是`image.png`.

# android - Android表格布局格式问题不适合屏幕

> ID：14973132
> 
> 赞同：0
> 
> 时间：2013-02-20T05:49:05.180
> 
> 标签：android, android-spinner, android-tablelayout

我正在使用带有 3 列标签、* 和微调器的表格布局，所有这些都有 wrap_content 并且当微调器文本很小时它工作正常。如果任何一个微调器的文本很长，那么所有微调器都会延伸到最后，而且它也不适合屏幕。

有什么方法可以让每个微调器适应其文本大小，例如 tablelayout 中的 wrap_content。用于表格布局示例的 xml。

```
 <TableLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="#FFFFFF"
        android:stretchColumns="2" >
      <TableRow>

            <TextView
                android:layout_width="wrap_content"
                android:layout_column="0"
                android:gravity="right"
                android:paddingLeft="3dip"
                android:text="Sold To"
                android:textColor="#000033"
                android:textSize="17sp" />

            <TextView
                android:layout_column="1"
                android:gravity="left"
                android:text="*"
                android:textColor="#FF0000"
                android:textSize="17sp"
                android:width="20dip" />

            <Spinner
                android:id="@+id/sold_to_dd"
                android:layout_width="wrap_content"
                android:layout_column="2"
                 />
        </TableRow>

    </TableLayout> 
```

我希望很多人会遇到同样的问题。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T07:18:58.040

这是因为您仅拉伸作为微调器的第 2 列。您必须在每一列上设置权重。就像是

```
<TableLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="#FFFFFF" >
  <TableRow>

        <TextView
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="2"
            android:layout_column="0"
            android:gravity="right"
            android:paddingLeft="3dip"
            android:text="Sold To"
            android:textColor="#000033"
            android:textSize="17sp" />

        <TextView
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="2"
            android:layout_column="1"
            android:gravity="left"
            android:text="*"
            android:textColor="#FF0000"
            android:textSize="17sp" />

        <Spinner
            android:id="@+id/sold_to_dd"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="6"
            android:layout_column="2"
            android:singleLine="true"
             />
    </TableRow>

</TableLayout> 
```

权重表示要占据的屏幕百分比。所以每个 textViews 将占据屏幕的 20%，而 spinner 将占据 60%。

您也可以参考：[Android Holo 主题不包含多行微调器下拉项](https://stackoverflow.com/questions/13072442/android-holo-theme-does-not-wrap-multiple-line-spinner-dropdown-items/14752345#14752345)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T06:08:33.487

您可以`maxWidth`为每个微调器设置属性，也可以检查要放置在微调器中的字符串的长度，以防它的长度 > x（比如 10）然后使用子字符串 fn 从字符串中仅获取 (x-3) 个字符并以“...”作为后缀并将该字符串放入微调器中。例如：`StringABCDEFGHIJKLM`可以成为`StringAB...`。

# android - 如何在android中录制质量更好的音频文件？

> ID：14973133
> 
> 赞同：14
> 
> 时间：2013-02-20T05:49:23.223
> 
> 标签：android, android-mediarecorder, aac, android-audiorecord

我正在创建一个应用程序，它将 Android 上的录制文件播放到 iphone，反之亦然。

现在我正在使用，

```
 audioRecorder = new MediaRecorder();
        audioRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        audioRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
        audioRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC); 
```

使用此代码记录的文件，大小为 85 kb /15 秒，质量很差。

如果我使用，

```
 audioRecorder = new MediaRecorder();
        audioRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        audioRecorder.setOutputFormat(MediaRecorder.OutputFormat.AMR_NB);
        audioRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB); 
```

那么文件大小为 25kb/15 秒，质量比 aac 好得多。但问题是**AMR**在 iPhone 中无法播放。

因此，请建议具有更好质量、价格合理且也可以在 iPhone 上播放的 Android 录制模式。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-20T06:03:07.580

如果要更改质量，请增加 recorder.setAudioEncodingBitRate(value)。

```
recorder = new MediaRecorder();
recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
recorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);
recorder.setAudioEncoder(MediaRecorder.getAudioSourceMax());
recorder.setAudioEncodingBitRate(16);
recorder.setAudioSamplingRate(44100);
recorder.setOutputFile(path);
recorder.prepare();
recorder.start(); 
```

编辑：

另一种选择是将转换器添加到您的应用程序中。将 AMR 转换为 AAC。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-20T05:58:33.090

这个链接非常有用：[Android 支持的媒体格式](http://developer.android.com/guide/appendix/media-formats.html)

本节为我们提供了有关音频和视频格式的更多信息。

# database - updating postgres version and removing the older ones

> ID：14973134
> 
> 赞同：0
> 
> 时间：2013-02-20T05:49:30.047
> 
> 标签：database, postgresql, ubuntu

In our test machine(`ubuntu lucid`) ,we had `postgres8.3` and `postgres8.4` installed by a previous team.

They are at

```
/etc/postgresql
              /8.3
              /8.4 
```

and our django apps were using postgres8.3 as the database.Now ,the client wants to use postgres 9.2.So we tried to install it

```
sudo apt-get install postgresql 
```

but I am getting

```
1 upgraded, 0 newly installed, 0 to remove and 40 not upgraded
...
Setting up postgresql (8.4.16-0ubuntu10.04) ... 
```

How do I install `postgres 9.2` ? and remove the older versions? Will the existing db used by our app get removed?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:00:54.227

I would suggest to add [ppa:pitti/postgresql](https://launchpad.net/~pitti/+archive/postgresql) repostitory using command:

```
sudo apt-add-repository ppa:pitti/postgresql 
```

After that you can install newer PostgreSQL using

```
sudo apt-get update
sudo apt-get install postgresql-9.2 
```

Also, recently there was created new [PostgreSQL Apt Repository](http://www.postgresql.org/download/linux/ubuntu/) for Ubuntu/Debian, which is supported by PostgreSQL project - you can use this one as well.

Newly installed PostgreSQL package will not touch or migrate your old data, and it will use port different from default 5432\. You might be able to use `pg_upgrade` for it, but it may not work to upgrade from very old versions.

Safe, but slow approach to upgrade your data is to [`pg_dump`](http://www.postgresql.org/docs/9.2/static/app-pgdump.html) data from old database, and `pg_restore` into new one. Be sure to always use new `pg_dump` binary, even when connecting to old server.

# php - PHP表单一个复选框

> ID：14973135
> 
> 赞同：0
> 
> 时间：2013-02-20T05:49:33.667
> 
> 标签：php, forms, checkbox

我遇到了一个我觉得很困惑的问题。我有一个带有一个复选框的表单。如果复选框被选中，我需要表单应用 1 或 0 的值。

```
<input type="checkbox" name="admin"> 
```

然后是 PHP，像这样：

```
$update_data['admin'] = isset($_POST['admin']) ? '1' : '0'; 
```

如果它被选中，它会起作用。我不确定如何进入“关闭”状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T05:53:31.427

PHP代码需要更改

```
$update_data['admin'] = empty($_POST['admin']) ? '0' : '1'; 
```

isset() 将仅检查该值是否已设置，即 Null 或 Not。在你的情况下，它设置为零

另一方面，检查两个值是否都设置为 null 并且如果它们中的任何一个为 true ，则值为零，则返回 true 。

并在 HTML

```
<input type='checkbox' value ='1' name='admim'> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T05:56:36.243

当复选框提交时没有值，如果从 $_POST['admin'] 中检索，其值为“on”。我想你也可以

```
$update_data['admin'] = ($_POST['admin'] === 'on') ? '1' : '0'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T06:25:17.470

我在另一篇文章中找到了[答案。](https://stackoverflow.com/a/476581/381704)和：

```
$update_data['admin'] = ($_POST['admin'] == 1) ? '1' : '0'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T05:51:41.910

检查是否定义了某些内容与`isset`获取其值不同。尝试这个：

```
 <input type="checkbox" name="admin" value="checked_or_whatever_value_you_like"> 
```

```
 if(isset($_POST['admin'])){
     $update_data['admin'] = $_POST['admin'] == 'checked_or_whatever_value_you_like' ? '1' : '0';
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T05:57:17.947

一切都应该按预期工作:)

只是为了确保 for 已提交：

行政

如果未选中复选框，则值（及其键）不会传递给查询字符串。

所以，检查

```
If (isset($_POST['submit'])){
  $update_data['admin'] = isset($_POST['admin']) ;
  //actions if form has been submitted.
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-20T05:59:05.297

它似乎对我有用，这是我的示例代码：

```
<form action="" method="POST">
    <input type="checkbox" name="admin">
    <input type="submit">
</form>
<?php 
    $check = isset($_POST['admin']) ? '1' : '0';
    echo $check;
    var_dump($check);
?> 
```

当您选中复选框时，它将产生 1 个字符串（1）“1”，如果未选中，它将产生 0 个字符串（1）“0”。

# excel - Excel VBA 宏：直到索引模式正确为止（从 0 或 1 开始）

> ID：14973137
> 
> 赞同：1
> 
> 时间：2013-02-20T05:49:57.233
> 
> 标签：excel, vba

我在我的 iPhone 上输入了 VBA 代码并且无法验证它，因为我无法访问 Excel。

我的指数（sp？）是否正确？

```
Option Explicit
' label the worksheet
Sub Labels()
    With Worksheets("Sheet1")
        .Range("A1") = "Save This Much Money By Upgrading With Me Right Now"
        .Range("A1").Font.Bold = True
        .Range("A1:F1").Merge
        .Range("A2") = "Basic Phones"
        .Range("B2") = "Smart Phones"
        .Range("C2") = "Cross Segment"
        .Range("D2") = "$36 Activation Fee"
        .Range("E2") = "Basic Phones Credit"
        .Range("F2") = "Smart Phones Credit"
        .Range("G2") = "Total Bill Credit"
        .Range("H2") = "Grand Total Savings"
        .Range("A2:H2").Font.Bold = True
    End With
End Sub

' make # of basic starting w/ A3
Sub MakeBasicPhonesColumn()
    Dim number As Long, basicPhones As Long, counter As Long
    Set number = 3
    Set basicPhones = 0
    Set counter = 3

    Do Until basicPhones > 20
        If counter > 42
            counter = 1
            basicPhones = basicPhones + 1
        End If
        Cells(number, 1).Value = basicPhones
        number = number + 1
        counter = counter + 1
    Loop
End Sub

' make # of smartphones starting with B3
Sub MakeSmartPhonesColumn()
    Dim counter As Long, number As Long, smartPhones As Long, loops As Long
    Set counter = 3
    Set number = 3
    Set smartPhones = 1
    Set loops = 0

    Do Until loops > 21
        If counter > 42
            counter = 1
            smartPhones = 0
            loops = loops + 1
        End If
        Cells(number, 2).Value = smartPhones
        Cells(number + 1, 2).Value = smartPhones
        number = number + 2
        counter = counter + 2
        smartPhones = smartPhones + 1
    Loop
End Sub

' make Cross Segment Yes or No column
Sub MakeCrossSegmentColumn()
    Dim counter As Long, number As Long, bool As Boolean, loops As Long
    Set counter = 3
    Set number = 3
    Set bool = 1
    Set loops = 0

    Do Until loops > 21
        If counter > 42
            counter = 1
            loops = loops + 1
        End If
        Cells(number, 3).Value = bool
        If bool = 1
            bool = 0
        Else: bool = 1
        End If
        counter = counter + 1
        number = number + 1
    Loop
End Sub

' make activation fee savings column
Sub MakeActivationFeeSavingsColumn()
    Dim counter As Long, number As Long, loops As Long, activationFee As Long
    Set counter = 3
    Set number = 3
    Set loops = 0
    Set activationFee = 0

    Do Until loops > 21
        If counter > 42
            counter = 1
            loops = loops + 1
        End If
        activationFee = (Cells(number, 1).Value + Cells(number, 2).Value) * 36
        Cells(number, 4).Value = activationFee
        number = number + 1
        counter = counter + 1
    Loop
End Sub

' make basic, smart, and total cross segment credit columns
Sub MakeCrossSegmentColumns()
    Dim loops As Long, counter As Long, number As Long, basicCrossSegment As Long, smartCrossSegment As Long
    Set loops = 0
    Set counter = 3
    Set number = 3
    Set basicCrossSegment = 0
    Set smartCrossSegment = 0

    Do Until loops > 21
        If counter > 42
            counter = 1
            loops = loops + 1
        End If
        If Cells(number,3).Value = 1
            basicCrossSegment = Cells(number, 1).Value * 25
            smartCrossSegment = Cells(number, 2).Value * 50
            Cells(number, 5).Value = basicCrossSegment
            Cells(number, 6).Value = smartCrossSegment
            Cells(number, 7).Value = basicCrossSegment + smartCrossSegment
        End If
        counter = counter + 1
        number = number + 1
    Loop
End Sub

' make grand total savings column
Sub MakeGrandTotalSavingsColumn()
    Dim counter As Long, loops As Long, number As Long, activationFee As Long, crossSegment As Long
    Set counter = 3
    Set loops = 0
    Set number = 3
    Set activationFee = 0
    Set crossSegment = 0

    Do Until loops > 21
        If counter > 42
            counter = 1
            loops = loops + 1
        End If
        activationFee = Cells(number, 4).Value
        crossSegment = Cells(number, 7).Value
        Cells(number, 8).Value = activationFee + crossSegment
        number = number + 1
        counter = counter + 1
    Loop
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:43:46.633

好的，我刚刚检查了你的代码。

首先，您忘记使用`Then`关键字 with`If`语句。

**Labels()**工作正常。其他潜艇有一个错误：您将`Long`变量分配为`Set number = 3`. `Long`不是引用类型，所以`Set`关键字是多余的。

我删除了错误，它对我来说效果很好。这是代码：

```
Option Explicit
' label the worksheet
Sub Labels()
    With Worksheets("Sheet1")
        .Range("A1") = "Save This Much Money By Upgrading With Me Right Now"
        .Range("A1").Font.Bold = True
        .Range("A1:F1").Merge
        .Range("A2") = "Basic Phones"
        .Range("B2") = "Smart Phones"
        .Range("C2") = "Cross Segment"
        .Range("D2") = "$36 Activation Fee"
        .Range("E2") = "Basic Phones Credit"
        .Range("F2") = "Smart Phones Credit"
        .Range("G2") = "Total Bill Credit"
        .Range("H2") = "Grand Total Savings"
        .Range("A2:H2").Font.Bold = True
    End With
End Sub

' make # of basic starting w/ A3
Sub MakeBasicPhonesColumn()
 Dim number As Long, basicPhones As Long, counter As Long
 number = 3
 basicPhones = 0
 counter = 3

Do Until basicPhones > 20
 If counter > 42 Then
  counter = 1
  basicPhones = basicPhones + 1
 End If
 Cells(number, 1).Value = basicPhones
 number = number + 1
 counter = counter + 1
Loop
End Sub

' make # of smartphones starting with B3
Sub MakeSmartPhonesColumn()
Dim counter As Long, number As Long, smartPhones As Long, loops As Long
counter = 3
number = 3
smartPhones = 1
loops = 0

Do Until loops > 21
 If counter > 42 Then
  counter = 1
  smartPhones = 0
  loops = loops + 1
 End If
 Cells(number, 2).Value = smartPhones
 Cells(number + 1, 2).Value = smartPhones
 number = number + 2
 counter = counter + 2
 smartPhones = smartPhones + 1
Loop
End Sub

' make Cross Segment Yes or No column
Sub MakeCrossSegmentColumn()
Dim counter As Long, number As Long, bool As Boolean, loops As Long
counter = 3
number = 3
bool = 1
loops = 0

Do Until loops > 21
 If counter > 42 Then
  counter = 1
  loops = loops + 1
 End If
 Cells(number, 3).Value = bool
 If bool = 1 Then
  bool = 0
 Else: bool = 1
 End If
 counter = counter + 1
 number = number + 1
Loop
End Sub

' make activation fee savings column
Sub MakeActivationFeeSavingsColumn()
Dim counter As Long, number As Long, loops As Long, activationFee As Long
counter = 3
number = 3
loops = 0
activationFee = 0

Do Until loops > 21
 If counter > 42 Then
  counter = 1
  loops = loops + 1
 End If
 activationFee = (Cells(number, 1).Value + Cells(number, 2).Value) * 36
 Cells(number, 4).Value = activationFee
 number = number + 1
 counter = counter + 1
Loop
End Sub

' make basic, smart, and total cross segment credit columns
Sub MakeCrossSegmentColumns()
Dim loops As Long, counter As Long, number As Long, basicCrossSegment As Long, smartCrossSegment As Long
loops = 0
counter = 3
number = 3
basicCrossSegment = 0
smartCrossSegment = 0

Do Until loops > 21
 If counter > 42 Then
  counter = 1
  loops = loops + 1
 End If
 If Cells(number, 3).Value = 1 Then
  basicCrossSegment = Cells(number, 1).Value * 25
  smartCrossSegment = Cells(number, 2).Value * 50
  Cells(number, 5).Value = basicCrossSegment
  Cells(number, 6).Value = smartCrossSegment
  Cells(number, 7).Value = basicCrossSegment + smartCrossSegment
 End If
 counter = counter + 1
 number = number + 1
Loop
End Sub

' make grand total savings column
Sub MakeGrandTotalSavingsColumn()
Dim counter As Long, loops As Long, number As Long, activationFee As Long, crossSegment As Long
counter = 3
loops = 0
number = 3
activationFee = 0
crossSegment = 0

Do Until loops > 21
 If counter > 42 Then
  counter = 1
  loops = loops + 1
 End If
 activationFee = Cells(number, 4).Value
 crossSegment = Cells(number, 7).Value
 Cells(number, 8).Value = activationFee + crossSegment
 number = number + 1
 counter = counter + 1
Loop
End Sub 
```

虽然我不能保证程序中没有逻辑错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T06:00:58.703

```
Option Explicit
' label the worksheet
Sub Labels()
    With Worksheets("Sheet1")
        .Range("A1") = "Save This Much Money By Upgrading With Me Right Now"
        .Range("A1").Font.Bold = True
        .Range("A1:F1").Merge
        .Range("A2") = "Basic Phones"
        .Range("B2") = "Smart Phones"
        .Range("C2") = "Cross Segment"
        .Range("D2") = "$36 Activation Fee"
        .Range("E2") = "Basic Phones Credit"
        .Range("F2") = "Smart Phones Credit"
        .Range("G2") = "Total Bill Credit"
        .Range("H2") = "Grand Total Savings"
        .Range("A2:H2").Font.Bold = True
    End With
End Sub

' make # of basic starting w/ A3
Sub MakeBasicPhonesColumn()
    Dim number As Long, basicPhones As Long, counter As Long
    number = 3
    basicPhones = 0
    counter = 3

    Do Until basicPhones > 20
        If counter > 42 Then
            counter = 1
            basicPhones = basicPhones + 1
        End If
        Cells(number, 1).Value = basicPhones
        number = number + 1
        counter = counter + 1
    Loop
End Sub

' make # of smartphones starting with B3
Sub MakeSmartPhonesColumn()
    Dim counter As Long, number As Long, smartPhones As Long, loops As Long
    counter = 3
    number = 3
    smartPhones = 1
    loops = 0

    Do Until loops > 21
        If counter > 42 Then
            counter = 1
            smartPhones = 0
            loops = loops + 1
        End If
        Cells(number, 2).Value = smartPhones
        Cells(number + 1, 2).Value = smartPhones
        number = number + 2
        counter = counter + 2
        smartPhones = smartPhones + 1
    Loop
End Sub

' make Cross Segment Yes or No column
Sub MakeCrossSegmentColumn()
    Dim counter As Long, number As Long, bool As Boolean, loops As Long
    counter = 3
    number = 3
    bool = 1
    loops = 0

    Do Until loops > 21
        If counter > 42 Then
            counter = 1
            loops = loops + 1
        End If
        Cells(number, 3).Value = bool
        If bool = 1 Then
            bool = 0
        Else: bool = 1
        End If
        counter = counter + 1
        number = number + 1
    Loop
End Sub

' make activation fee savings column
Sub MakeActivationFeeSavingsColumn()
    Dim counter As Long, number As Long, loops As Long, activationFee As Long
     counter = 3
     number = 3
     loops = 0
     activationFee = 0

    Do Until loops > 21
        If counter > 42 Then
            counter = 1
            loops = loops + 1
        End If
        activationFee = (Cells(number, 1).Value + Cells(number, 2).Value) * 36
        Cells(number, 4).Value = activationFee
        number = number + 1
        counter = counter + 1
    Loop
End Sub

' make basic, smart, and total cross segment credit columns
Sub MakeCrossSegmentColumns()
    Dim loops As Long, counter As Long, number As Long, basicCrossSegment As Long, smartCrossSegment As Long
     loops = 0
     counter = 3
     number = 3
     basicCrossSegment = 0
     smartCrossSegment = 0

    Do Until loops > 21
        If counter > 42 Then
            counter = 1
            loops = loops + 1
        End If
        If Cells(number, 3).Value = 1 Then
            basicCrossSegment = Cells(number, 1).Value * 25
            smartCrossSegment = Cells(number, 2).Value * 50
            Cells(number, 5).Value = basicCrossSegment
            Cells(number, 6).Value = smartCrossSegment
            Cells(number, 7).Value = basicCrossSegment + smartCrossSegment
        End If
        counter = counter + 1
        number = number + 1
    Loop
End Sub

' make grand total savings column
Sub MakeGrandTotalSavingsColumn()
    Dim counter As Long, loops As Long, number As Long, activationFee As Long, crossSegment As Long
     counter = 3
     loops = 0
     number = 3
     activationFee = 0
     crossSegment = 0

    Do Until loops > 21
        If counter > 42 Then
            counter = 1
            loops = loops + 1
        End If
        activationFee = Cells(number, 4).Value
        crossSegment = Cells(number, 7).Value
        Cells(number, 8).Value = activationFee + crossSegment
        number = number + 1
        counter = counter + 1
    Loop
End Sub 
```

# c# - 从启动脚本调用的 C# 程序访问 Azure 服务配置

> ID：14973141
> 
> 赞同：0
> 
> 时间：2013-02-20T05:50:13.073
> 
> 标签：c#, .net, azure

我在 WebRole 启动期间调用了一个 C# 控制台应用程序来执行自定义检测。我希望该程序能够从服务配置中读取最新值并采取相应措施。

我已经设置了调用我的 .EXE 以在提升模式下运行的启动脚本。我已向控制台应用程序添加了对 Azure 的 ServiceRuntime 的引用，但出现以下错误：*角色发现数据不可用*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:10:20.570

如果您将调用此可执行文件作为 .csdef 中的启动任务，则您要求的信息可能不可用，因为尚未设置角色（请参阅[Web/Worker 角色的生命周期](http://msdn.microsoft.com/en-us/library/windowsazure/hh127476.aspx)）。

如果您在 WebRole.cs 中的 OnStart 内调用可执行文件，这也可能是问题 - 因为 IISConfigurator 是与 OnStart 异步调用的。

[对于启动任务，在http://mvolo.com/configure-iis-websites-windows-azure-startup-tasks-appcmd/](http://mvolo.com/configure-iis-websites-windows-azure-startup-tasks-appcmd/)中详细介绍了一种解决方法（尽管它处理更改 IIS 配置）。

对于 WebRole 问题，您可以重载 Run() 并从那里调用您的可执行文件 - 可能重试如下：

```
 while (!RoleEnvironment.IsAvailable) {
     Thread.Sleep(1000);
 }
 RunExecutable(); 
```

# c# - 引用查找实体而不添加新实体

> ID：14973143
> 
> 赞同：0
> 
> 时间：2013-02-20T05:50:32.303
> 
> 标签：c#, .net, entity-framework, lookup-tables

我有 2 个 EF 实体：

```
public partial class CustomerEntity
{
    public int CustomerId { get; set; }
    public string CustomerName { get; set; }
    public virtual ICollection<RoleEntity> Roles { get; set; }
}

public partial class RoleEntity
{
    public int RoleId { get; set; }
    public string RoleName { get; set; }
} 
```

这是我的插入方法：

```
public int? InsertCustomer(CustomerEntity customer)
{
    _context.CustomerEntities.Add(customer);

    try
    {
        return _context.SaveChanges();
    }
    catch (DbEntityValidationException exception)
    {
        return null;
    }
} 
```

这是创建新客户的方法：

```
public int CreateNewCustomer(string Name)
{
    // Some mapping to CustomerEntity
    var _customerEntity = new CustomerEntity
    {
        CustomerName = Name,
        Roles = new List<RoleEntity>
        {
            new RoleEntity
            {
                RoleId = 1
            }
        }
    };
    return InsertCustomer(_customerEntity);
} 
```

RoleEntity 是一个“查找”表，这意味着它具有预设记录并且永远不会有新记录。

每次创建新的 CustomerEntity 时，它都会有一个或多个角色。如何在不在数据库中创建新角色的情况下插入新的 CustomerEntity？我上面的 CreateNewCustomer 方法将在数据库中插入新客户和新角色，而我只想要其角色引用数据库中现有角色（id 1）的新客户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T09:19:44.497

如前所述，您可以从数据库加载角色并将其添加到客户的`Roles`集合中，但您也可以将“新”角色用作[*存根对象*](http://blogs.msdn.com/b/alexj/archive/2009/06/19/tip-26-how-to-avoid-database-queries-using-stub-entities.aspx)（无需进行数据库往返）：

```
public int CreateNewCustomer(string Name)
{
    var role = new RoleEntity { RoleId = 1 };
    AttachEntity(role); // role is "Unchanged" now
    // Some mapping to CustomerEntity
    var customerEntity = new CustomerEntity
    {
        CustomerName = Name,
        Roles = new List<RoleEntity>{ role } // Will not set role to "Added"
    };

    return InsertCustomer(customerEntity);
} 
```

我假设`CreateNewCustomer`在某种具有`DbContext`实例的存储库中。`AttachEntity`除了将实体附加到上下文之外什么都不做：

```
void AttachEntity<T>(T entity)
{
    this._context.Set<T>().Attach(entity);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T05:55:16.697

您可以从 _content 加载角色实体并将对象分配给 _customerEntity。

```
public int? InsertCustomer(CustomerEntity customer, int roleId)
{
    var role =_context.Roles.Find(customer);
    _customerEntity Roles = new List<RoleEntity>{ role };
    return _context.SaveChanges();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T05:57:35.517

只需获取`RoleEntity`您要分配给该客户的内容，然后`ICollection`直接将其添加给客户。

# java - 如何在 ZK MVVM 中使用 javascript 调用 java 方法？

> ID：14973149
> 
> 赞同：2
> 
> 时间：2013-02-20T05:51:19.397
> 
> 标签：java, javascript, jsp, mvvm, zk

我正在使用亿图 Office 查看器组件来打开和编辑文件。我想将我的文件保存到我的目标点，所以我使用 JavaScript 来保存文件。但我被困在一个点上。我在下面显示我的代码以使用 JavaScript 保存文档。

```
function f_saveDocument(){
    if(document.OA1.IsOpened)           
    {   
    var saveAsFileName = document.getElementById('hdnFileName').value;
    alert(saveAsFileName);
        var fileFormat = saveAsFileName.substring(saveAsFileName.lastIndexOf("."));
        if(fileFormat == '.docx') {
            var toUnLockFile = 'MergeTest'+fileFormat;
            var tempFileLocation = document.OA1.GetTempFilePath(saveAsFileName);
            var tempToUnLockFileLocation = document.OA1.GetTempFilePath(toUnLockFile);
            document.OA1.SaveAs(tempFileLocation,12);
            document.OA1.SaveAs(tempToUnLockFileLocation,12);
            document.OA1.HttpInit();
            document.OA1.HttpAddPostFile(tempFileLocation);
              document.OA1.HttpPost(""); 
            document.OA1.ClearTempFiles();
        } else {
        alert("asdsa");
            document.OA1.HttpInit();
            document.OA1.HttpAddPostOpenedFile(saveAsFileName);
             **zAu.send(new zk.Event(zk.Widget.$('$btnSave'), "saveFile", {'' : {'data' : {'nodeId': ''}}}, {toServer:true}));** 
         alert("moved");
        }

    } 
```

在 JSP 页面的情况下，我可以将我的 JSP URL 放入，`HttpPost`但在 ZK 的情况下，如何从这个 JavaScript 转移到 Java 方法。所以为了克服这个问题，我使用 Widget 来调用`saveFile()`我`viewmodel`班级中的方法。但`zAu.send`工作不正常。任何人都可以告诉其他解决方案从 ZK MVVM 中的 JavaScript 调用我的 Java 方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T06:55:19.320

您的代码完全错误

```
zAu.send(new zk.Event(zk.Widget.$('$btnSave'), "onSaveFile", {'' : {'data' : {'nodeId': ''}}}, {toServer:true})); 
```

事件名称必须以开头，`on`因此这将触发带有 id的`onSaveFile`
事件。听听[吧](http://books.zkoss.org/wiki/ZK_Developer%27s_Reference/MVVM/Advance/Wire_Event_Listeners)。`Component``btnSave`

# android - opencv的人脸检测样本

> ID：14973151
> 
> 赞同：3
> 
> 时间：2013-02-20T05:51:33.940
> 
> 标签：android, windows, opencv

当我在设备应用程序上运行应用程序时，应用程序崩溃并出现以下按摩-

> java.lang.UnsatisfiedLinkError：无法加载 detection_based_tracker：findLibrary 返回 null

我正在使用 OpenCV-2.4.4-beta-android-sdk 并在 android 2.3.6 上运行

请帮忙！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T09:32:52.163

我已经解决了改变两件事的问题：

1）右键单击项目->属性->c/c++ build in builder设置字段手动给出ndk的完整路径，然后应用并确定

2) 在 jni/application.mk 中做 APP_ABI := armeabi

:)

# c++ - C++ 影响分析工具

> ID：14973159
> 
> 赞同：2
> 
> 时间：2013-02-20T05:52:13.700
> 
> 标签：c++

尝试搜索用于 C++ 影响分析的免费工具。谷歌搜索没有太大帮助。有人可以提出一些建议吗？
这不是对 C++ 源代码进行影响分析的常规做法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:24:44.897

[这](http://www.codeanalysistools.com/?cplusplus)可能对你帮助不大。

# android - python如何保持一个线程执行直到另一个线程完成

> ID：14973160
> 
> 赞同：0
> 
> 时间：2013-02-20T05:52:13.233
> 
> 标签：android, python, multithreading

我希望在我操作应用程序（例如做猴子测试）时记录应用程序（例如.com.clov4r.android.nil）的CPU占用率，并在我退出应用程序时完成记录（例如完成猴子测试）。如何用python实现？

一些代码：

```
packagename = 'com.clov4r.android.nil'
cmd1 = 'adb shell top -d 5 | grep com.clov4r.android.nil'
cmd2 = 'adb shell monkey -v -p com.clov4r.android.nil --throttle 500 --ignore-crashes --ignore-timeouts --ignore-security-exceptions --monitor-native-crashes -s 2345 100'
t1 = threading.Thread(target=subprocess.call(cmd1, stdout=open(r'123.txt', 'w'))) 
t2 = threading.Thread(target=subprocess.call(cmd2)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T08:04:19.777

事件是线程之间通信的好方法（[http://docs.python.org/2/library/threading.html#event-objects](http://docs.python.org/2/library/threading.html#event-objects)）。但是，您将遇到的另一个问题是 top 命令基本上将永远运行。我会做这样的事情：

```
def run_top(event, top_cmd):
    s = subprocess.Popen(top_cmd, stdout=open('123.txt', 'w'))
    event.wait()  # Wait until event is set, then kill subprocess
    s.kill()

def run_monkey(event, monkey_cmd):
    subprocess.call(monkey_cmd)
    event.set()  # Once we're finished set the event to tell the other thread to exit

event = threading.Event()
threading.Thread(target=run_top, args=(event, your_top_command)).start()
threading.Thread(target=run_monkey, args=(event, your_monkey_command)).start() 
```

也可能有一种方法可以杀死线程，但这很丑陋，这种方式更受控制。

我还要说 run_monkey() 不需要在线程中运行，但不确定您有哪些其他代码可能需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T07:05:31.647

您可以使用[Thread.join()](http://docs.python.org/2/library/threading.html#threading.Thread.join)：

```
import threading, time

def worker():
    time.sleep(5)

t = threading.Thread(target=worker)
t.start()
t.join()
print('finished') 
```

# mysql - mysql查询计算id

> ID：14973163
> 
> 赞同：1
> 
> 时间：2013-02-20T05:52:21.017
> 
> 标签：mysql

使用 mysql 我试图从`where tid='any tid'` 我尝试过的所有表中计算 ID，它给出了`"Column 'tid' in where clause is ambiguous"`. 我需要使用 join 吗？

```
SELECT count('id') as reccount
   FROM table1,table2,table3
   WHERE tid= '101'
   AND `status` =  1 
```

我有像这样的表结构，

```
table 1:
------------------------------
id      tid    status ........ 
1       101       1
2       102       1

table 2:
------------------------------
id      tid    status ........ 
 1      101      1
 2      102      1

table 3:
------------------------------
id      tid     status....... 
 1      101       1
 2      102       1

table 4: It contains tid 
--------------------------
tid     tname .....
101      xyz
102      abc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T05:54:28.193

由于您正在从每个表中收集行，而不是加入它们，因此您需要执行 UNION，如下所示：

```
 SELECT count('id') as reccount
    FROM table1
    WHERE table1.tid= '101'
    AND `status` =  1
UNION
 SELECT count('id') as reccount
    FROM table2
    WHERE table2.tid= '101'
    AND `status` =  1
UNION
 SELECT count('id') as reccount
    FROM table3
    WHERE table3.tid= '101'
    AND `status` =  1 
```

说明：Doing`from table1, table2, table3`将在所有这些表之间进行连接。由于没有连接标准，它会执行所有可能的连接，例如 table1 中的一行、table2 中的一行和 table3 中的一行的每种可能组合都会在这种查询中产生结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T05:56:41.540

使用联合

```
SELECT count('id') as reccount , 'Table1' AS table   FROM table1    WHERE tid= '101'    AND `status` =  1
UNION
SELECT count('id') as reccount , 'Table2' AS table    FROM table2   WHERE tid= '101'    AND `status` =  1
UNION
SELECT count('id') as reccount , 'Table3' AS table    FROM table3   WHERE tid= '101'    AND `status` =  1 
```

这会给你这样的计数

```
reccount | table
   5         table1  
   10        table2
   15        table3 
```

例如，如果您只想在 1 行中回答，则可以使用 5,10 和 15，您可以使用@peterm 的回答

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T05:58:31.730

您没有提供所需的输出，但如果您的意图是从所有三个表中获取总行数（从原始查询中推断），那么您可以执行以下操作：

```
SELECT COUNT(`id`) AS reccount
  FROM 
    (SELECT `id` FROM table1 
     WHERE tid= '101' AND `status` =  1
     UNION ALL
    SELECT `id` FROM table2 
     WHERE tid= '101' AND `status` =  1
     UNION ALL
    SELECT `id` FROM table3
     WHERE tid= '101' AND `status` =  1) t 
```

这是**[sqlfiddle](http://sqlfiddle.com/#!2/e5eec/4)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T06:01:12.280

请参阅下面的 SQL：

```
SELECT reccount_1 + reccount_2 +  reccount_3 as total_count FROM
(
    SELECT count(`id`) as reccount_1
    FROM table1
    WHERE tid= '101'
    AND `status` =  1
    UNION
    SELECT count(`id`) as reccount_2
    FROM table2
    WHERE tid= '101'
    AND `status` =  1
    UNION 
    SELECT count(`id`) as reccount_3
    FROM table3
    WHERE tid= '101'
    AND `status` =  1
) 
as temp_table 
```

# c - 从 /proc/pid/stat 检索当前堆栈指针

> ID：14973164
> 
> 赞同：8
> 
> 时间：2013-02-20T05:52:30.100
> 
> 标签：c, linux, operating-system

我正在使用 gdb 执行一个基本的 C 程序。我在开头有一个断点`main()`。运行代码后，gdb 按预期在 main() 处中断。现在，如果我检查堆栈指针寄存器（rsp），我看到

```
0x7fffffffe170: 0x00000000\. 
```

当我使用`cat /proc/17232/stat | cut -d" " -f29/proc`（其中 17232 是此过程的 pid）检索相同的信息时，我看到：

```
140737488347112 (which in hex is: 0x7fffffffdfe8). 
```

为什么我们会从 gdb 中看到不同的当前堆栈指针值。还有，为什么 gdb 将 rsp 的内容显示为 NULL (0x00000000)？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:26:15.830

打印*rsp*寄存器（在 64b cpus 上）`/proc`

```
(gdb) info register rsp
rsp            0x7fffffffe480   0x7fffffffe480 
```

与来自的值相比，确实给出了不同的值`/proc`

```
me@linux:~$ cat /proc/22219/stat | cut -d" " -f29 | perl -e 'print(sprintf("%x\n",<>));'
7fffffffe338 
```

因为*gdb必须在**main*函数开始时强制[中断](http://en.wikibooks.org/wiki/X86_Assembly/Advanced_Interrupts)程序以接管执行，并且将最小的数据集（返回地址，一些寄存器备份）保存到堆栈中。*然后， gdb*使用自己的堆栈不会溢出程序一，并在您请求查看寄存器或处理堆栈数据时进行必要的调整操作 - 并且不显示内部*gdb*烹饪。但是显示的是真实数据，没有变化。***`/proc`***

 ***“真正的” *rsp*`/proc`实际上比 gdb 略少，*因为*在 x86 cpus 上，堆栈向下增长。

至于*空*值，在我的测试中没有发生

```
(gdb) x 0x7fffffffe480
0x7fffffffe480: 0xffffe578 
```***

# ios - Trigger.io 是否支持 iOS 上的 Game Center？

> ID：14973166
> 
> 赞同：0
> 
> 时间：2013-02-20T05:52:37.587
> 
> 标签：ios, trigger.io

我正在使用 Trigger.io 开发一个简单的游戏。有谁知道 Trigger.io 是否支持与 iOS Game Center 的集成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:04:41.763

可能这可能会回答您的问题[http://docs.trigger.io/en/latest/release-notes.html#v1-4-14](http://docs.trigger.io/en/latest/release-notes.html#v1-4-14)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:37:19.610

抱歉，目前无法使用 Trigger.io 连接到 iOS Game Center。

# cuda - 是否可以启动在运行时定义网格大小/块大小的 cuda 内核？

> ID：14973176
> 
> 赞同：2
> 
> 时间：2013-02-20T05:53:27.257
> 
> 标签：cuda, gpu

我想知道是否可以启动 cuda 内核，以便在运行时而不是像往常一样在编译时提及网格/块大小。

任何有关这方面的帮助都将非常宝贵。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T06:12:56.263

在 CUDA 应用程序中，为网格指定固定大小从来都不是很有用。大多数情况下，块大小是固定的，网格大小保持动态并根据输入数据大小而变化。考虑以下向量加法的示例。

```
__global__ void kernel(float* a, float* b, float* c, int length)
{
    int tid = blockIdx.x * blockDim.x + threadIdx.x;

    //Bound checks inside the kernel
    if(tid<length)
       c[tid] = a[tid] + b[tid];
}

int addVectors(float* a, float* b, float* c, int length)
{
   //a, b, c are allocated on the device

   //Fix the block size to an appropriate value
   dim3 block(128);

   dim3 grid;
   grid.x = (length + block.x - 1)/block.x;

   //Grid size is dependent on the length of the vector. 
   //Total number of threads are rounded up to the nearest multiple of block size.
   //It means total number of threads are at least equal to the length of the vector.

   kernel<<<grid,block>>>(a,b,c,length);

   return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T06:12:34.150

Cuda 内核和设备函数可以使用 blockDim.{ `x,y,z`} 访问块配置以及 gridDim.{ `x,y,z`} 访问网格配置。如果您有一个可以处理各种配置的内核/设备功能，那么您需要做的就是启动一个内核（`myKernel<<<dimGrid,dimBlock>>>`）与任何东西`dimGrid`，或者`dimBlock`您在运行时选择。我不认为这有什么不寻常的。

# java - java gui NullPointerException

> ID：14973177
> 
> 赞同：0
> 
> 时间：2013-02-20T05:53:28.470
> 
> 标签：java, swing, debugging, nullpointerexception, runtime-error

单击时，我在 * 行之间的行处不断收到空指针异常。我已经看了大约一个小时，似乎无法弄清楚原因。任何帮助将不胜感激。谢谢。

```
 private Color currentColor;
    private char currentChar;
    private Letter letter;
    private JComboBox comboBox;
    private JPanel controlPanel;
    private Color[] colorArray = {Color.black,Color.blue,Color.cyan,Color.orange,Color.white,Color.yellow};
    private String[] colorStringArray = {"black","blue","cyan","orange","white","yellow"};
    private ArrayList<Letter> letterList;
    private JButton button1;
    private Canvas canvas;
    public WholePanel()
    {
        comboBox = new JComboBox(colorStringArray);
        // here we use black to draw a letter
        currentColor = colorArray[Color.black];

        // set the default character to 'A'
        currentChar = 'A';

        button1 = new JButton("Undo");

        controlPanel = new JPanel();
        controlPanel.add(button1);
        controlPanel.add(comboBox);

        canvas = new Canvas();
        JSplitPane sp = new JSplitPane(JSplitPane.VERTICAL_SPLIT, controlPanel, canvas);

        canvas.addMouseListener(new PointListener());
        add(sp);

         // make this panel listen to mouse
        addMouseListener(new PointListener());

        setBackground(Color.white);
        //This method needs to be called for this panel to listen to keys
        //When panel listens to other things, and go back to listen
        //to keys, this method needs to be called again.
        requestFocus();
    }
    private class PointListener implements MouseListener
    {
        int x;
        int y;
        // when a user clicks the panel (applet),
        // KeyListener is focused in it.
        public void mousePressed(MouseEvent event)
        {
            x = event.getX();
            y = event.getY();
            letter = new Letter(x,y,currentChar,colorArray[comboBox.getSelectedIndex()]);
            //******************************
            letterList.add(letter);
            //******************************
            for(Letter letter1 : letterList)
            {
                letter1.Draw(getGraphics());
            }
            x=y=0;
            requestFocus();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T05:55:59.760

你没有初始化`letterList`。

将以下行添加到 WholePanel 的构造函数中：

```
letterList = new ArrayList<Letter>(); 
```

# ruby - 开发和分发可移植和跨平台的 Ruby/JRuby 应用程序

> ID：14973182
> 
> 赞同：3
> 
> 时间：2013-02-20T05:53:50.733
> 
> 标签：ruby, deployment, jruby, software-distribution

我试图开始 ruby​​/jruby 桌面应用程序开发，正如我之前在谷歌上搜索过的那样，ruby 缺乏分发/部署系统，所以我还没有决定使用哪一个，是带有 green_shoes (gtk) 的 ruby​​ 还是带有 Purple_shoes 的 JRuby （摇摆），如果我使用green_shoes，那么我应该提供GTK Runtime，如果是JRuby，那么我应该提供JRE，或者如果可能的话，可能是便携式互联网浏览器和便携式服务器（就像PHP的UniServer一样）。

有没有其他方法可以克服这个问题，这样我就可以分发我的程序，ruby，只需以这种可移植的方式复制文件夹，就可以为我的程序提供所有必需的依赖项？

所以如果我/他们想在windows上使用它，我只需要在复制的文件夹上创建我的程序的快捷方式，当我/他们想在linux上使用它时，我只需要“ln -s”即可$PATH 到我在复制文件夹上的程序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T00:49:36.753

仅适用于 JRuby：

*   GUI工具包，我们可以使用Monkeybars [https://github.com/monkeybars/monkeybars-core](https://github.com/monkeybars/monkeybars-core)
*   部署我们可以使用 rawr [http://rawr.rubyforge.org/](http://rawr.rubyforge.org/)

答案来自：Moh Hasbi Assidiqi

# python-3.x - python中列表函数的简单产品？

> ID：14973187
> 
> 赞同：0
> 
> 时间：2013-02-20T05:54:37.070
> 
> 标签：python-3.x

尝试搜索，但我似乎无法做到这一点..有人可以帮我吗？

我只需要为这个效果做一个简单的函数：

```
def productoflist(*x):
  return product(x) 
```

我用 sum() 以这种方式为列表的总和创建了一个函数，但我知道 python 中没有内置产品函数，我需要在没有任何其他模块的情况下执行此操作。

最简单的方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T06:01:03.373

```
def productoflist(l):
    return reduce(lambda x, y: x * y, l, 1)

>>> l = [1,2,3,4]
>>> productoflist(l)
24 
```

# md5 - 如果我传入 2^32 组字符串，md5 冲突的概率是多少？

> ID：14973197
> 
> 赞同：12
> 
> 时间：2013-02-20T05:55:52.217
> 
> 标签：md5

如果我传入 2^32 组字符串，md5 冲突的概率是多少？

我可以说答案只是 2^32/2^128 = 1/1.2621774e-29 因为 md5 哈希的位长度是 128？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-20T06:05:36.263

这个问题类似于所谓的[“生日悖论”](http://en.wikipedia.org/wiki/Birthday_problem)。

> 在概率论中，**生日问题**或**生日悖论**涉及在一组*n 个*随机选择的人中，其中一些人生日相同的概率。根据鸽巢原理，当人数达到 367 时，概率达到 100%（因为有 366 个可能的生日，包括 2 月 29 日）。然而，只有 57 人达到 99% 的概率，而 23 人达到 50% 的概率。这些结论是基于这样的假设，即一年中的每一天（2 月 29 日除外）生日的概率相同。
> 
> 这个问题背后的数学导致了一种著名的密码攻击，称为[生日攻击](http://en.wikipedia.org/wiki/Birthday_attack)，它使用这种概率模型来降低破解哈希函数的复杂性。

根据 Wikipedia 文章，从*d* = 2 ^(128个数字的空间中选择)*n* = 2 ^(32 个)随机数时发生冲突的几率约为：

 *![广义生日问题数学](../Images/d03d32e88f0df0a327457fc91d406d73.png)

如果你[进行这个计算，](http://www.wolframalpha.com/input/?i=n+%3D+2%5E32%2C+d+%3D+2%5E128%2C+1+-+%28%28d-1%29%2Fd%29+%5E+%28n%28n-1%29%2F2%29)机会大约是 2.7×10 ^(-20)。这是一个非常小的概率，但请注意它比您建议的计算高 9 个数量级。*

# mule - 如果使用空字符串作为用户名，则 SMTP 端点无法进行身份验证

> ID：14973198
> 
> 赞同：0
> 
> 时间：2013-02-20T05:55:56.487
> 
> 标签：mule

我的 SMTP 端点配置如下所示：

```
 <smtp:outbound-endpoint host="${smtp.host}" port="${smtp.port}" from="${smtp.from}" user="${smtp.user}" password="${smtp.password}" responseTimeout="10000" doc:name="SMTP"/> 
```

属性取自属性文件，如果所有属性都已填满且不为空，则可以完美运行。但是在我不想使用身份验证的情况下，我将 smtp.user 和 smtp.password 更改为空字符串：

```
smtp.user=
smtp.password= 
```

然后我得到

```
535 5.7.0 authentication failed 
```

似乎端点尝试使用空的用户名和密码进行身份验证。如果我从端点 xml 中删除“用户”和“密码”属性，它工作得很好，但它不是我的选择，因为在某些部署中我需要身份验证，而在某些部署中我不需要。所以我想使用我的属性文件来配置它。有什么解决办法吗？

提前致谢。

格迪斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:03:24.223

使用具有两条路由的选择路由器，一条用于经过身份验证的 SMTP 出站端点（使用`when`检查非空的条件`${smtp.user}`），另一个用于未经过身份验证的端点（在 中`otherwise`）。

# javascript - 编程理论理论？如何

> ID：14973201
> 
> 赞同：-1
> 
> 时间：2013-02-20T05:56:21.047
> 
> 标签：javascript, function, dom, theory

好的，我一直在 lynda.com 和 youtube 上观看这么多教程来学习 JavaScript 编程，但没有一个教如何使用编程逻辑？

我浏览了语法、对象和类、DOM、事件、函数，最后我不知道在哪里使用它们以及为什么要使用这些代码或函数。

也许这是一个愚蠢的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T05:58:39.277

学习编程的最好方法是找到一个问题并尝试解决它，即使你必须编造一些东西。传统的第一个要解决的问题是如何显示“Hello, World”。试一试，您会很快明白为什么以及在哪里需要使用您正在学习的工具。

# java - Xtext 手动向语法添加值

> ID：14973204
> 
> 赞同：0
> 
> 时间：2013-02-20T05:56:28.470
> 
> 标签：java, xtext, xtend

我有一个可以解析容器和模块列表的语法，然后按字母顺序生成这些容器。但是，我还想将模块名称添加到容器列表中。

例如：

```
With the configuration:
CONTAINER cont1;
CONTAINER cont2;
MODULE external WITH PRIORITY 1;
MODULE internal WITH PRIORITY 2;

The generated file should have:
main()
{
  Container(cont1);
  Container(cont2);
  Container(external);
  Container(internal);
} 
```

我能够生成 CONTAINER 配置中的内容。但我想将模块名称“内部”和“外部”合并到容器中。然后按字母顺序对它们进行排序。

有没有办法在 xtext 中做到这一点？这是否属于生成器或范围部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T08:49:26.110

这应该进入生成器。您需要它生成所有节点`CONTAINER`的列表。`MODULE`我假设你已经在 Xtend 中编写了生成器：

```
val list = Lists.newArrayList( model.containers )
list.addAll( model.modules ) 
```

遍历排序列表：

```
for( part : list.sortBy(e|e.name) ) {
    part.generateContainer()
} 
```

然后每种类型一个 generateContainer() 方法。

# java - Android - 可以在多个帐户中发布具有相同密钥库文件的不同应用程序吗？

> ID：14973205
> 
> 赞同：10
> 
> 时间：2013-02-20T05:56:33.907
> 
> 标签：java, android, google-play, keystore

我已经在 Client中上传了签名`apk`文件。现在我有一个来自同一个客户端的另一个应用程序，具有不同的开发者帐户。我可以上传带有相同文件的签名文件还是应该使用新文件？请帮我...`keystore``Developer Account``apk``keystore``keystore`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-20T06:19:13.723

Key Store 有一组数字证书，它们是发布者独有的，例如您的签名。它们用于验证应用程序是否来自真实来源。

包名+签名组合必须唯一，即一个App不能有多个官方发布者：

1.  设备不会更新具有不同签名的相同应用程序包。
2.  Play 商店不会让您更新具有不同签名的相同包文件。

但发布者可以发布多个应用程序：

1.  设备可以有许多具有不同包名称但签名相同的应用程序。
2.  Play Store 可以托管许多具有不同包但相同签名的应用程序。

除此之外，每个 Play 商店帐户都被赋予一个唯一的许可证密钥，与签名不同，它绑定到帐户。您不能将一个帐户的许可证密钥用于从其他帐户发布的应用程序。

就 Google 政策而言，我认为他们目前不限制每个开发者帐户 1 个签名。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T06:00:00.787

只要您的所有应用程序具有唯一的包名称，您就可以在任意数量的应用程序中使用相同的密钥库，在任意数量的帐户中使用相同的密钥库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T06:17:22.993

是的，您可以使用相同`keystore`的方式在不同的开发者帐户中发布应用程序。

# android - 谷歌地图 v2 抛出 rstylable 的未找到类错误

> ID：14973210
> 
> 赞同：0
> 
> 时间：2013-02-20T05:56:49.083
> 
> 标签：android, google-maps, android-maps-v2

我已经成功完成了启动谷歌地图 v2 的所有过程，但是在运行时它通过类未找到错误，如何摆脱这些东西

这是xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <fragment

        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.google.android.gms.maps.SupportMapFragment" />

</RelativeLayout> 
```

这是我的代码

```
import android.app.Activity;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.view.Menu;

import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.MapFragment;
import com.google.android.gms.maps.SupportMapFragment;
import com.google.android.gms.maps.model.BitmapDescriptorFactory;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.Marker;
import com.google.android.gms.maps.model.MarkerOptions;

public class MainActivity extends FragmentActivity {

  private GoogleMap map;

  @Override
  protected void onCreate(Bundle savedInstanceState) 
  {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_select_location);

    map = ((SupportMapFragment)getSupportFragmentManager().findFragmentById(R.id.map)).getMap();

  }

} 
```

日志猫

```
02-20 11:44:56.103: E/AndroidRuntime(1394): FATAL EXCEPTION: main
02-20 11:44:56.103: E/AndroidRuntime(1394): java.lang.NoClassDefFoundError: com.google.android.gms.R$styleable
02-20 11:44:56.103: E/AndroidRuntime(1394):     at com.google.android.gms.maps.GoogleMapOptions.createFromAttributes(Unknown Source)
02-20 11:44:56.103: E/AndroidRuntime(1394):     at com.google.android.gms.maps.SupportMapFragment.onInflate(Unknown Source)
02-20 11:44:56.103: E/AndroidRuntime(1394):     at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:271)
02-20 11:44:56.103: E/AndroidRuntime(1394):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:558)
02-20 11:44:56.103: E/AndroidRuntime(1394):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
02-20 11:44:56.103: E/AndroidRuntime(1394):     at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
02-20 11:44:56.103: E/AndroidRuntime(1394):     at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
02-20 11:44:56.103: E/AndroidRuntime(1394):     at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
02-20 11:44:56.103: E/AndroidRuntime(1394):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
02-20 11:44:56.103: E/AndroidRuntime(1394):     at android.app.Activity.setContentView(Activity.java:1647)
02-20 11:44:56.103: E/AndroidRuntime(1394):     at com.curioussolutions.autoistdiary.MainActivity.onCreate(MainActivity.java:26)
02-20 11:44:56.103: E/AndroidRuntime(1394):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-20 11:44:56.103: E/AndroidRuntime(1394):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
02-20 11:44:56.103: E/AndroidRuntime(1394):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
02-20 11:44:56.103: E/AndroidRuntime(1394):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
02-20 11:44:56.103: E/AndroidRuntime(1394):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
02-20 11:44:56.103: E/AndroidRuntime(1394):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-20 11:44:56.103: E/AndroidRuntime(1394):     at android.os.Looper.loop(Looper.java:123)
02-20 11:44:56.103: E/AndroidRuntime(1394):     at android.app.ActivityThread.main(ActivityThread.java:4627)
02-20 11:44:56.103: E/AndroidRuntime(1394):     at java.lang.reflect.Method.invokeNative(Native Method)
02-20 11:44:56.103: E/AndroidRuntime(1394):     at java.lang.reflect.Method.invoke(Method.java:521)
02-20 11:44:56.103: E/AndroidRuntime(1394):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:878)
02-20 11:44:56.103: E/AndroidRuntime(1394):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636)
02-20 11:44:56.103: E/AndroidRuntime(1394):     at dalvik.system.NativeStart.main(Native Method)
02-20 11:44:56.613: W/jdwp(1394): Debugger is telling the VM to exit with code=1 
```

回复一下，谢谢

# actionscript-3 - AS3 堆栈溢出？

> ID：14973211
> 
> 赞同：0
> 
> 时间：2013-02-20T05:56:53.600
> 
> 标签：actionscript-3

使用数组。我在类基础上创建对象，将它们推入数组，我有 2 个按钮：一个添加一个子项并将其推入数组，第二个按钮移动数组并删除子项。也是我鼠标上的一个功能，如果我单击一个对象，我定义它的数组编号，删除子项，然后......好吧，不确定是否成功，但“ *delete Array[i];* ”，其中 i 是目标的数组编号。每次我做某事时，我都可以在文本字段中看到 Array.length。第二个按钮实际上确实从数组中删除了一个对象，数量减少了。但是从 Array 中删除指定的对象以及*Array.slice(i,1)*不会减少 Array 的长度。所以我担心它可能会导致溢出。只是阵列，不确定，也许阵列**中有超过一百万个单元格就可以了？**就像我用流星雨制作游戏一样，流星从屏幕上移除，但阵列仍然有它们的单元格。如果它们看起来像每秒 30-50 次，很明显我可能会在运行 20 分钟后出现内存问题。好吧，它是 60k，所以也许**我不应该担心，因为只有图形会占用很多内存？**

不过，我可以使用有关如何在数组中间移动对象的建议。选一个。**我如何删除它，就像它从未被创建一样，就像 Shift 一样？（确实如此，对吧？）**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T06:06:48.247

`Array.splice()`会做大部分的把戏。当您将流星移出屏幕时，您可以将其从阵列中拼接出来，如下所示：

```
var i:int=meteorArray.indexOf(meteorToRemove);
if (i>=0) meteorArray.splice(i,1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T06:11:39.900

如果要删除其他对象，则不应将创建新对象作为一种好习惯。尝试回收，或者更好的说法是“对象池”

您应该算出一次可以使用的最大元素数。在每个上创建一个“活动”属性并将其设置为 true 或 false，而不是创建/删除。然后您可以对每个对象运行更新并仅在必要时更新它

例如：

```
var meteors:Array = [];

// create 500 meteors
for ( var i:int = 0; i < 500; i++ ) {
  var meteor:Meteor = new Meteor();
  meteor.active = false;
  meteors.push(meteor);
}

// enable one meteor
meteors[0].active = true;

// in your update method:
for each (var meteor in meteors ) 
  if ( meteor.active )
    meteor.update(); 
```

希望有帮助。

您还可以添加一个辅助方法来获得可用的流星：

```
function getMeteorAvailable():Meteor
{
  for each (var meteor in meteors ) 
      if ( !meteor.active )
        return meteor;
} 
```

# jquery - 数据表服务器端处理

> ID：14973217
> 
> 赞同：0
> 
> 时间：2013-02-20T05:57:11.910
> 
> 标签：jquery, python, html, datatable, flask

我有一个数据表，其中一列是可编辑的。我正在寻找 3 个问题的解决方案。任何人都可以帮助解决这个问题。

1.  我需要将第一列传递给我的服务器端脚本（即数据库的主键）
2.  我只需要将一个单元格设为不可变（第一行第一列中的元素）
3.  编辑表格后，我需要在列中查看编辑后的值。我知道如果我们使用 sUpdateURL: function(value, settings) 将显示更改。谁可以帮我这个事。我对数据表很陌生。

这是我的代码

```
$(document).ready(function() {
        $('#jtable').html( '<table cellpadding="1" cellspacing="1" border="1" class="pretty" id="edit_table"></table>' );
        $("#edit_table").dataTable({
            "aaData": {{ result | safe }},
            "aLengthMenu" : 100,
            "aaSorting": [],
            "aoColumns" : [
                {'sTitle' : 'Options' },
                {'sTitle' : 'Values'}
            ],
            "iDisplayLength": -1,
            "bFilter" : false,
            "bSearchable" :false,
            "bInfinite" :true,
            "bSort" :false,
            "bPaginate": false
        });
    });
    $(document).ready(function(){
        $("#edit_table").dataTable().makeEditable({
             sUpdateURL: "/submitchanges",
            "aoColumns": [
                null,
                {
                },
                {
                    indicator: 'Saving platforms...',
                    tooltip: 'Click to edit platforms',
                    type: 'textarea',
                    submit:'Save changes',
                    fnOnCellUpdated: function(sStatus, sValue, settings){

                    }
                }
            ]
        });
    }); 
```

我正在使用 python + flask 框架进行服务器端处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:15:47.587

这里的服务器代码适用于您的客户端（稍作修改，见下文）：

```
from flask import Flask, render_template, request as flask_request
app = Flask(__name__)

@app.route('/')
def hello_world():
    aa_data = [['First', 'Second'], ['First', 'Second']]
    return render_template('index.html', result = aa_data)

@app.route('/update/', methods=['POST'])
def update_records():
    value = flask_request.form['value']
    row_id = flask_request.form['rowId']
    # todo: perform database update operation
    return value

if __name__ == '__main__':
    app.run(debug=True) 
```

客户端修改：

```
$("#edit_table").dataTable().makeEditable({
            sUpdateURL: "/update/",
            "aoColumns": [
                null,
                {
                    sName:"secondColumn"
                }
            ]
        }); 
```

# javascript - Javascript 与 C++ 通信

> ID：14973224
> 
> 赞同：11
> 
> 时间：2013-02-20T05:57:34.240
> 
> 标签：javascript, c++

我有一个具有 C++ 后端和 HTML5/JS 前端的桌面应用程序。我们目前不得不使用 Google V8 或 Mac Webview 和 Objective-C 来允许 Javascript 和 C++ 进行通信。有没有办法让他们在没有中间件的情况下直接相互交谈？

试图完成：

1.  共享变量。
2.  从 C++ 调用函数到 JS。
3.  从 JS 调用函数到 C++。

我试过用谷歌搜索，一切都指向上述解决方案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T06:03:05.467

您可以尝试使用 Google 的[协议缓冲区](http://code.google.com/p/protobuf/)，它允许您创建编译为 C++ 对象的数据对象。然后，您可以使用他们[wiki](http://code.google.com/p/protobuf/wiki/ThirdPartyAddOns)中的以下项目之一来将 protobuffers 与 javascript 一起使用：

*   [https://github.com/sirikata/protojs](https://github.com/sirikata/protojs)
*   [http://code.google.com/p/protobuf-js/](http://code.google.com/p/protobuf-js/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-20T07:12:12.037

你的软件听起来很像一个网络应用程序，中间没有互联网。[在这种情况下， NodeJS](http://nodejs.org/)可能会成为很好的中间件，您可以用 C++ 为它[编写模块](http://nodejs.org/api/addons.html)，并在 javascript 中使用它们。我自己还没有这样做。一个[简短的例子](http://lupomontero.com/writing-node-js-modules-in-cpp/):)

*现在几年后*我们有了[Electron 项目](https://electron.atom.io/)，它基本上是上面的，但有一个基于 Chrome 的 web 视图。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-04T11:06:31.137

我为此写了一个库

看看[https://skywarpcpp.wordpress.com](https://skywarpcpp.wordpress.com)

用于 c++ 应用程序的 SKYWARP++ 数据流和 rpc 启用服务器库

你可以在 github 上下载

[https://github.com/xjrueda/skywarp_cpp](https://github.com/xjrueda/skywarp_cpp)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-18T12:20:05.623

你现在可以使用[Electron](http://electron.atom.io/)来获得一个可以直接访问 Node.js API 的 Chrome 网络浏览器。然后您可以使用[nbind](https://github.com/charto/nbind)轻松地从 JavaScript 调用 C++ 代码。这样，两者共享相同的线程和堆。

您可以通过在 C++11 源文件中添加类似这样的内容来声明 C++ 类：

```
NBIND_CLASS(X) {
    construct<int, int>();

    method(Y);
    method(Z);
} 
```

这为类 X 创建了绑定，构造函数采用 2 个整数和方法 Y 和 Z，具有几乎任何类型的参数和可选的返回值。

`nbind`附带一个示例，说明如何将 C++ 代码打包到 Node.js 插件中，以便在 Electron 中使用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-08T04:22:41.077

请看这个，我是楼主

[http://code.google.com/p/libjspp/](http://code.google.com/p/libjspp/)

libjspp 允许 C++ 与 javascript spidermonkey 1.8.5 轻松连接和交互？同时不干扰 C++ 和 javascript 世界。对于希望以面向对象的方式嵌入和扩展 Javascript 的应用程序很有用。通过使用 C++ 模板，非常薄的界面几乎没有开销。

我是

# ip-address - 如何使虚拟盒子的IP地址与我的基本操作系统的IP地址相同

> ID：14973229
> 
> 赞同：6
> 
> 时间：2013-02-20T05:58:13.397
> 
> 标签：ip-address, virtualbox

我有 Windows7 作为我的基本操作系统。最重要的是，我用 Ubuntu 安装了 Virtual Box。我希望 ubuntu 获得与我的基本操作系统（Win7）相同的 IP 地址。我如何实现这一目标？任何想法？

谢谢，索拉布。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-04-06T22:27:43.050

哦，是的，你可以！究竟如何在路由器/防火墙后面设置服务器。paxdiablo 是对的。如果主机和来宾共享同一个端口，则 TCP/IP 堆栈不知道将数据包发送到哪里。但是，如果您只有来宾处理特定端口而不是琐事 - 只需将主机的端口转发到来宾的端口（就像您在配置路由器时需要做的那样）。

就我而言，我在 Win7 上运行 VirtualBox，并有一个运行 linux 发行版的来宾。只有 linux 发行版运行 WebGUI，所以我使用的网络设置是 NAT。然后是有趣的部分，在 NAT 选项下，选择“端口转发”。从那里您可以添加主机的 IP 地址（192.168.1.123）和访客的 IP 地址（在我的情况下为 10.0.2.15），但是将主机的端口 80 转发到访客的端口 80。它就像魔术一样工作！您需要为客人收听的每个端口执行此操作。

如果您有超过 1 个来宾侦听同一端口（例如 80），那么您必须从主机指定另一个端口并将其转发给来宾。（例如：从主机到访客 #2 的 IP 的端口 80 的 8080）连接到访客 2 的任何外部设备都将位于[http://192.168.1.123:8080](http://192.168.1.123:8080)。

现在，您可以让（几乎）任意数量的客人共享相同的 IP。希望这可以帮助。

吉姆陈

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T06:00:23.117

您不能拥有相同的 IP 地址并期望能够进行通信。数据包如何知道要去哪里？

如果您在谈论您的主机和访客似乎对外部世界具有相同的 IP，您只需将网络连接设置为 NAT 而不是桥接。

这将在主机上进行网络地址转换，基本上使用主机来路由数据包并更改其中的源和目标详细信息。

# c++ - 为什么 { } while(condition); 末尾需要分号，但 while(condition) {} 不需要？

> ID：14973241
> 
> 赞同：13
> 
> 时间：2013-02-20T05:59:04.730
> 
> 标签：c++, c, while-loop, do-while

我总是在将其放置在循环`;`的末尾`while`或不将其放置在`do while`循环的末尾时遇到问题。那么是什么原因呢？为什么

```
int numItemsToProcess = 3;  
while(numItemsToProcess > 0)  
{  
    // process an item  
    numItemsToProcess--;  
} 
```

最后不需要`;`但是

```
do  
{  
    numItemsToProcess --;
} while (numItemsToProcess > 0); 
```

做？也许原因不是太重要。但是，当您知道原因时，您可以记住该放在哪里`;`。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-20T06:01:30.413

除了块语句之外，您在所有语句之后都加上分号。这就是你将它放在`while`in之后`do while`，而不是放在块 in 之后的原因`while {...}`。

您还可以使用它来终止几乎所有声明。目前我能想到的唯一例外是函数体和`namespace`C++ 中的体。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-20T06:02:29.667

它们是两种不同的循环结构。你只需要记住。

将它们视为单行：

```
do one_thing while( condition );

do { stuff } while( condition ); 
```

和

```
while( condition ) one_thing;

while( condition ) { stuff } 
```

这些都是在结尾需要分号的表达式，除了最后一个，大括号在逻辑上表示表达式的结尾（想想`if`语句）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T06:07:59.833

因为这是一个标准。
另请参阅[ISO C++ 标准](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2010/n3092.pdf) 第 128 页
这
是因为 while 语句在 do-while 循环中有效。

```
int x = 10;
int y = 10;

do 
 while(x > 0)
  x--;
 while(x = y--); 
```

因为你要结束陈述。
语句以块（由花括号分隔）
或分号结束。“do this while this”是一条语句，不能以块结尾（因为它以“while”结尾），
所以它需要一个分号，就像任何其他语句一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T06:16:00.940

这背后的原因如下

1.  **While 条件**：- While 条件具有类似的签名

    ```
    while (expression) 
       statement 
    ```

While 循环根据提供给它的表达式执行。如果表达式为真，那么写在 while {} 中的语句将执行 else not。您也可以`;`在之后标记，`while (expression);`但它只会`while`立即完成语法，`;`表示语句结束。通常`whil`，e 循环检查表达式并执行其中的语句列表。

2.  **Do While 条件**：- Do while 有一个签名，如

    ```
    do
        statement
    while (expression); 
    ```

`do-while`是一个有趣的循环。`do`它的特殊之处在于，无论`expression`in`while`是真还是假，后面的语句都会执行至少一个。流程`do while`表示后面的语句`do`将执行一次，然后`while`检查条件。如果`while`条件为真，`do`将再次执行以下语句。之所以`;`在末尾有，`do ... while (expression);`是因为这里`while`被当作一个语句，因为它的主体在它之上。在 C++ 中，每个语句都必须以**;结尾** 所以`do while`以`;`.

# c# - 我将如何将 NPOI.SS 转换为 NPOI.XSSF？

> ID：14973245
> 
> 赞同：2
> 
> 时间：2013-02-20T05:59:17.780
> 
> 标签：c#, npoi

我目前正试图取代使用 Excel 互操作库的需要，但转向[NPOI](https://npoi.codeplex.com/)。我现在用以下代码遇到了一些障碍：

```
XSSFSheet SheetName = excelWorkbook.GetSheet(sheet);
System.Collections.IEnumerator rows = SheetName.GetRowEnumerator();
while (rows.MoveNext())
{
    XSSFRow row = (XSSFRow)rows.Current;
    foreach (XSSFCell cell in row.Cells)
    {
        cellContent = cell.StringCellValue;
    } 
} 
```

我收到的错误是：

```
Cannot implicitly convert type 'NPOI.SS.UserModel.ISheet' to 'NPOI.XSSF.UserModel.XSSFSheet'. An explicit conversion exists (are you missing a cast?) 
```

我哪里错了？我确定我没有提到 HSSF。

注意：我确信我犯的错误不止这些，所以如果你发现了什么，请向我指出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-18T19:20:57.947

GetSheet 方法返回类型 ISheet，而不是 XSSFSheet。

所以，你需要改变

```
XSSFSheet SheetName = excelWorkbook.GetSheet(sheet); 
```

到

```
XSSFSheet SheetName = (XSSFSheet)excelWorkbook.GetSheet(sheet); 
```

将 ISheet 显式转换为 XSSFSheet

# android - 获取无法将 jsonarray 转换为 json 对象

> ID：14973269
> 
> 赞同：0
> 
> 时间：2013-02-20T06:01:05.353
> 
> 标签：android, json, exception

嗨，我正在开发一个使用 mysql db 的应用程序，但是当我尝试获取值并显示它时，出现以下错误。

```
02-20 05:48:33.021: W/System.err(1723): org.json.JSONException: Value [{"3":"images\/BigBazaar.png","2":"Jayanagar 4th Block","outlet_name":"Big Bazaar","1":"Big Bazaar","0":"1","outlet_image":"images\/BigBazaar.png","outlet_location":"Jayanagar 4th Block","outlet_id":"1"}] of type org.json.JSONArray cannot be converted to JSONObject 
```

我还可以在日志中看到输出，即；

```
02-20 05:48:33.380: I/TAG(1723): [{"0":"1","outlet_id":"1","1":"Big Bazaar","outlet_name":"Big Bazaar","2":"Jayanagar 4th Block","outlet_location":"Jayanagar 4th Block","3":"images\/BigBazaar.png","outlet_image":"images\/BigBazaar.png"}] 
```

这是我的代码。

```
public class StoreActivity extends Activity {
    private String mBaseUrl="http://192.168.1.5/Flutura/PHP/";  
    private String mDataUrl=mBaseUrl+"Core/Data/android.data3.php";
    private String mAssetsUrl=mBaseUrl+"Assets/";
    private String mRequest="outlet";
    private String mOutletID="0";

    private String mRecommendedProducts="";
    private String mOutletDetails="";
    private SharedPreferences myPrefs ;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.store);      
        myPrefs = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE);             
        mOutletID = myPrefs.getString("outlet_id", "0");
        mOutletDetails = myPrefs.getString("outlet_details","{}");
        Log.v("outlet_details",myPrefs.getString("outlet_details","{}"));
        if(mOutletDetails != "{}"){
            setOutletData(mOutletDetails);
        }
        else{
            executeAjaxRequest();
        }
    }    

    private void executeAjaxRequest(){

       String url = mDataUrl+"?request="+mRequest+"&outlet_id="+mOutletID;
       Log.v("url",url);

       AsyncHttpClient httpclient = new AsyncHttpClient();
       httpclient.get(url, new AsyncHttpResponseHandler() {
         @Override
         public void onSuccess(String response) {
            setOutletData(response);
            Log.i("TAG",response);
         }
       });
     }
    private void setOutletData(String response){
        try{            

        JSONObject store = new JSONObject(response); 

        ImageView store_avatar = (ImageView) findViewById(R.id.store_avatar);  
        TextView store_id      = (TextView)  findViewById(R.id.store_id);
        TextView store_name    = (TextView)  findViewById(R.id.store_name);
        TextView store_loc     = (TextView)  findViewById(R.id.store_location); 

        if(store_avatar != null){
        /*  
          int resid;
          resid = getApplicationContext().getResources().getIdentifier(store.getString("outlet_image").replaceAll(".png",""), "drawable", "org.flutura.recommendation");                  
          store_avatar.setImageResource(resid);*/
            ImageDownloader imdload = new ImageDownloader();
            imdload.setMode(ImageDownloader.Mode.CORRECT);
            imdload.download(mAssetsUrl+store.getString("outlet_image"),store_avatar    );  

          mOutletDetails = store.toString();
          mRecommendedProducts = store.getString("recommended_products");
          store_avatar.setClickable(true);
          store_avatar.setOnClickListener(new View.OnClickListener() {

           @Override
           public void onClick(View v) {
             // TODO Auto-generated method stub
             Intent myIntent = new Intent(StoreActivity.this,StoreMapActivity.class);
             SharedPreferences myPrefs = getApplicationContext().getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
             SharedPreferences.Editor prefsEditor = myPrefs.edit();

             prefsEditor.putString("outlet_details", mOutletDetails);
             prefsEditor.commit();
             startActivity(myIntent);
           }
         });
        }

        mOutletID = store.getString("outlet_id");

        if(store_id != null){
          store_id.setText(mOutletID);
        }

        if(store_name != null){
          store_name.setText(store.getString("outlet_desc"));
        }

        if(store_loc != null){
          store_loc.setText(store.getString("outlet_loc"));
        }

        Button recommended_products_button = (Button) findViewById(R.id.recommended_products_button);
        recommended_products_button.setOnClickListener(new View.OnClickListener(){

           @Override
           public void onClick(View v){

              // Load the recommended products screen
              Intent myIntent = new Intent(StoreActivity.this,RecommendedProductsListActivity.class);
               SharedPreferences myPrefs = getApplicationContext().getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
               SharedPreferences.Editor prefsEditor = myPrefs.edit();               

               prefsEditor.putString("outlet_id",mOutletID);
               prefsEditor.putString("recommended_products", mRecommendedProducts);
               prefsEditor.commit();
               startActivity(myIntent);                    
           }

        });

        Button category_wise_sales_button = (Button) findViewById(R.id.category_wise_sales_button);
        category_wise_sales_button.setOnClickListener(new View.OnClickListener(){

           @Override
           public void onClick(View v){

              // Load the recommended products screen
              Intent myIntent = new Intent(StoreActivity.this,CategoryWiseSalesActivity.class);
               SharedPreferences myPrefs = getApplicationContext().getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
               SharedPreferences.Editor prefsEditor = myPrefs.edit();               

               prefsEditor.putString("outlet_id",mOutletID);
               prefsEditor.commit();
               startActivity(myIntent);                    
           }

        });
        }
        catch(JSONException e){
            e.printStackTrace();
        }
        catch(NullPointerException e){
            e.printStackTrace();
        }
    }

} 
```

这是我的 php 代码。

```
<?php
error_reporting(0);

//$url = $_GET['url'];
//$mR = $_GET['mRequest'];
$mOid = $_GET['mOutletId'];
//$mloc = $_GET['mLocation'];
//connect to the db
$user = "root";
$pswd = "";
$db = "recommendations_db";
$host = "localhost";
$conn = mysql_connect($host, $user, $pswd);
mysql_select_db($db);
//if($mR == 'outlets' && $mloc = 'all'){
$query = "SELECT outlet_id,outlet_name,outlet_location,outlet_image FROM outlets WHERE outlet_id = '$mOid'";
$result = mysql_query($query) or die("Unable to verify user because : " . mysql_error());

//while($row = mysql_fetch_array($result))
  //{
  $output[] = mysql_fetch_array($result); 
  //}
print( json_encode($output));
?> 
```

谁能告诉我出了什么问题，因为我的日程安排很紧，今天需要完成。

搜索按钮的代码。

```
search_button.setClickable(true);
      search_button.setOnClickListener(new View.OnClickListener() {

      @Override
      public void onClick(View v) {
        // TODO Auto-generated method stub
        String outlet_no = outlet_id.getText().toString();
        if(!outlet_no.isEmpty()){
        @SuppressWarnings("deprecation")
        SharedPreferences myPrefs = getApplicationContext().getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
        SharedPreferences.Editor prefsEditor = myPrefs.edit();

        prefsEditor.putString("outlet_id", outlet_no);
        prefsEditor.commit();

        Intent myIntent = new Intent(HomeActivity.this, StoreActivity.class);       
        startActivity(myIntent);
        HomeActivity.this.startActivity(myIntent);
        }
        else{
          Toast.makeText(getApplicationContext(), "Please enter an outlet id", Toast.LENGTH_SHORT);
        }  
      }
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T06:03:57.960

> 获取无法将 jsonarray 转换为 json 对象

因为您从服务器获取 JSONArray 而不是 JSONObject 所以只需通过将 String 转换为 jsonArray 来更改代码：

```
JSONArray jsonArr = new JSONArray(response);  //<<< convert to jsonarray

// extract jsonObejct from JsonArray
JSONObject store = jsonArr.getJSONObject(0); 
```

代替

```
JSONObject store = new JSONObject(response); 
```

# android - 使用应用程序时可以禁用电源按钮吗？

> ID：14973272
> 
> 赞同：1
> 
> 时间：2013-02-20T06:01:20.647
> 
> 标签：android, android-permissions

我正在为 Android 制作一个警报应用程序。有没有办法从应用程序中禁用音量控制和手机的电源按钮？如果应用程序需要在执行此操作之前征求用户的许可，那很好。

# asp.net-mvc - ASP.NET MVC Json DateTime 序列化转换为 UTC

> ID：14973286
> 
> 赞同：4
> 
> 时间：2013-02-20T06:02:30.440
> 
> 标签：asp.net-mvc, json, asp.net-mvc-3, datetime, json.net

在 ASP.NET MVC 控制器上使用 Json() 方法给我带来了麻烦 - 此方法中抛出的每个 DateTime 都使用服务器时间转换为 UTC。

现在，有没有一种简单的方法可以告诉 ASP.NET MVC Json Serializer 停止将 DateTime 自动转换为 UTC？正如在[这个问题](https://stackoverflow.com/questions/10138562/json-in-mvc-converts-datetime-to-utc-automatically)上指出的那样，用 DateTime.SpecifyKind(date, DateTimeKind.Utc) 重新分配每个变量就可以了，但显然我不能在每个 DateTime 变量上手动执行此操作。

那么是否可以在 Web.config 中设置某些内容并让 JSON 序列化程序将每个日期都视为 UTC？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T06:46:13.993

该死，似乎最近我注定要在 StackOverflow 上回答我自己的问题。咳咳，解决方法如下：

1.  使用 NuGet 安装 ServiceStack.Text - 您将免费获得更快的 JSON 序列化（不客气）
2.  安装 ServiceStack.Text 后，只需覆盖基本控制器中的 Json 方法（您确实有一个，对吗？）：

    ```
    protected override JsonResult Json(object data, string contentType, Encoding contentEncoding, JsonRequestBehavior behavior)
    {
        return new ServiceStackJsonResult
        {
            Data = data,
            ContentType = contentType,
            ContentEncoding = contentEncoding
        };
    }

    public class ServiceStackJsonResult : JsonResult
    {
        public override void ExecuteResult(ControllerContext context)
        {
            HttpResponseBase response = context.HttpContext.Response;
            response.ContentType = !String.IsNullOrEmpty(ContentType) ? ContentType : "application/json";

            if (ContentEncoding != null)
            {
                response.ContentEncoding = ContentEncoding;
            }

            if (Data != null)
            {
                response.Write(JsonSerializer.SerializeToString(Data));
            }
        }
    } 
    ```

3.  默认情况下，这个序列化程序似乎做了“正确的事情”——如果它们的 DateTime.Kind 未指定，它不会与你的 DateTime 对象混淆。然而，我在 Global.asax 中做了一些额外的配置调整（在你开始使用库之前知道如何做是很好的）：

    ```
    protected void Application_Start()
    {
        JsConfig.DateHandler = JsonDateHandler.ISO8601;
        JsConfig.TreatEnumAsInteger = true;

        // rest of the method...
    } 
    ```

[这个链接有帮助](http://www.servicestack.net/docs/text-serializers/override-mvc-jsonresult)

# ios - 在 AFJSONRequestOperation 中设置 JSONReadingOptions

> ID：14973288
> 
> 赞同：1
> 
> 时间：2013-02-20T06:02:38.330
> 
> 标签：ios, objective-c, afnetworking, nsjsonserialization

我继承了`AFHTTPClient`&我将该`AFJSONRequestOperation`类注册为请求处理程序，如下所示

```
- (id)initWithBaseURL:(NSURL *)url {
    self = [super initWithBaseURL:url];
    if (!self) {
        return nil;
    }

    [self registerHTTPOperationClass:[AFJSONRequestOperation class]];
    [self setDefaultHeader:@"Accept" value:@"application/json"];
    self.parameterEncoding = AFJSONParameterEncoding;

    return self;
} 
```

但是，我需要将解析后的 json 转换为 Mutable 对象。我发现有一个 JSONReadingOptions 属性，`AFJSONRequestOperation`但我无法弄清楚如何设置它，因为我直接使用`AFHTTPClient`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-25T08:56:44.463

这很简单。

1.  创建 AFJSONRequestOperation 的子类。
2.  在 AFHTTPClient 的子类中更改它：

```
 [__instance registerHTTPOperationClass:[AFJSONRequestOperation class]]; 
```

对此：

```
[__instance registerHTTPOperationClass:[CustomClassJSONRequestOperation class]]; 
```

在 CustomClassJSONRequestOperation.m 中只需这样写：

```
- (id)responseJSON {
    [self setJSONReadingOptions: NSJSONReadingMutableContainers | NSJSONReadingAllowFragments];    
    return [super responseJSON];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T16:17:12.157

我的一个请求失败并返回错误：

> JSON 文本未以数组或对象开头，并且允许未设置片段的选项。

要设置 JSONReadingOptions 我必须子类化`AFJSONRequestOperation`，然后在从静态工厂方法返回的实例上设置属性。

```
+ (instancetype)JSONRequestOperationWithRequest:(NSURLRequest *)urlRequest
                                        success:(void (^)(NSURLRequest *request, NSHTTPURLResponse *response, id JSON))success
                                        failure:(void (^)(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON))failure
{
    AFJSONRequestOperation *requestOperation = [super JSONRequestOperationWithRequest:urlRequest success:success failure:failure];
    requestOperation.JSONReadingOptions = NSJSONReadingAllowFragments;
    return (MyRequestSubclass *)requestOperation;
} 
```

然后，在您的客户端中，在初始化 sharedClient 时将您的子类设置为 HTTPOperationClass

```
[__instance registerHTTPOperationClass:[AFJSONRequestOperation class]]; 
```

......然后，原来我打的api恰好是down了，所以它返回了一个html错误页面......

长话短说，在您打扰之前，请确保响应不仅格式不正确，而且它首先存在。

# java - 如何定义新的 exampleSetOutPut 格式？

> ID：14973292
> 
> 赞同：0
> 
> 时间：2013-02-20T06:02:41.673
> 
> 标签：java, rapidminer

在创建新的算子时，我们创建输入端口来接收数据和输出端口来传递数据。对于每个输入端口，我们将其数据类型固定为：

```
 exampleSetInput.addPrecondition (
     new ExampleSetPrecondition (
         exampleSetInput,
         Ontology.ATTRIBUTE_VALUE)); 
```

我们还定义了输出端口数据类型，如：

```
getTransformer().addPassThroughRule (
    exampleSetInput, exampleSetOutput); 
```

此条件将生成与输入相同的输出数据类型和格式。我的问题是如何定义与输入无关的新输出格式和数据类型。例如输入格式有数字数据类型和四个属性，我希望输出数据是字符串类型并具有新的两个属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T05:23:24.547

好吧，我在快速矿工社区“如何扩展快速矿工”交付的文档中找到了解决方案。它包括在定义端口规则时在构造函数中使用以下函数：

```
getTransformer().addRule(new ExampleSetPassThroughRule(exampleSetInput, exampleSetOutPut,    SetRelation.SUBSET) {
        @Override
        public ExampleSetMetaData modifyExampleSet(ExampleSetMetaData metaData) throws UndefinedParameterError {
            metaData.removeAllAttributes();//This will remove all input attribtes
            metaData.addAttribute(new AttributeMetaData("item", Ontology.STRING));//here the creation of new attribute 

            return metaData;
        }
    }); 
```

您还可以根据需要修改输入属性名称或类型。

# c# - 如何创建匹配集合数组

> ID：14973293
> 
> 赞同：1
> 
> 时间：2013-02-20T06:02:59.397
> 
> 标签：c#, regex

我需要帮助来最小化代码。我必须检查两个不同的机器，并且需要将它们存储在同一个 matchcollection 中。我不知道该怎么做，这是我的代码，任何人都可以帮我这样做。

```
var patternEmail = @"\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*";
MatchCollection emailCollection1;

 //Get emails from ResponsibleConsultant
emailCollection1 = Regex.Matches(piWorkitem.ResponsibleConsultant, patternEmail);
foreach (Match mail in emailCollection1.Cast<Match>().Where(mail => !emailaddresses.Contains(mail.Value.ToString())))
{
    emailaddresses.Add(mail.Value);
}

MatchCollection emailCollection2;

 //Get emails from ResponsibleConsultant
emailCollection2 = Regex.Matches(piWorkitem.SupplierConsultant, patternEmail);
foreach (Match mail in emailCollection2.Cast<Match>().Where(mail => !emailaddresses.Contains(mail.Value.ToString())))
{
    emailaddresses.Add(mail.Value);
} 
```

帮助我避免多次重复代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T06:20:18.057

```
var patternEmail = @"\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*";
var allInput = piWorkitem.ResponsibleConsultant + " " + piWorkitem.SupplierConsultant;
var emailCollection = Regex.Matches(allInput , patternEmail);
foreach (Match mail in emailCollection.Cast<Match>().Where(mail => emailaddresses.Contains(mail.Value.ToString())))
{
    emailaddresses.Add(mail.Value);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T06:13:10.913

[您可以使用Union](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.union.aspx)加入这两个结果

试试这个 ：

```
 var patternEmail = @"\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*";

    var emailCollection1 = Regex.Matches(piWorkitem.ResponsibleConsultant, patternEmail).Cast<Match>().Union(Regex.Matches(piWorkitem.SupplierConsultant, patternEmail).Cast<Match>());
    foreach (Match mail in emailCollection1.Where(mail => !emailaddresses.Contains(mail.Value.ToString())))
    {
        emailaddresses.Add(mail.Value);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T06:17:03.007

```
private void TestFunc()
    {
        var patternEmail = @"\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*";

        var all = ExtactMatches(patternEmail, piWorkitem.SupplierConsultant, piWorkitem.ResponsibleConsultant);
    }

    private IEnumerable<string> ExtactMatches(string pattern, params string[] srcText)
    {
        HashSet<string> emailaddresses = new HashSet<string>();

        foreach (var text in srcText)
        {
            //Get emails from ResponsibleConsultant
            var emailCollection1 = Regex.Matches(text, pattern);
            foreach (Match mail in emailCollection1.Cast<Match>().Where(mail => !emailaddresses.Contains(mail.Value.ToString(CultureInfo.InvariantCulture))))
            {
                emailaddresses.Add(mail.Value);
            }
        }
        return emailaddresses;
    } 
```

# java - 使用 Google Http Java 客户端将嵌套的 JSON 节点解析为 POJO

> ID：14973297
> 
> 赞同：2
> 
> 时间：2013-02-20T06:03:18.007
> 
> 标签：java, json, jackson, google-http-client

例如，我有以下 JSON 的响应：

```
{
    response: {
        id: 20,
        name: Stas
    }
} 
```

我想将其解析为以下对象：

```
class User {
    private int id;
    private String name;
} 
```

如何跳过***响应***节点？

我使用 Google Http Java 客户端，如果有人能回答如何在那里做会很好。这条线将如何变化？

```
request.setParser(new JacksonFactory().createJsonObjectParser());
return request.execute().parseAs(getResultType()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-21T03:53:55.423

您现在可以一步实现：

```
new JsonObjectParser.Builder(jsonFactory)
    .setWrapperKeys(Arrays.asList("response"))
    .build() 
```

[http://javadoc.google-http-java-client.googlecode.com/hg/1.15.0-rc/index.html](http://javadoc.google-http-java-client.googlecode.com/hg/1.15.0-rc/index.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T09:15:36.770

我不知道 Google Http Java 客户端，但如果您可以访问 Jackson [ObjectMapper](http://fasterxml.github.com/jackson-databind/javadoc/2.1.0/com/fasterxml/jackson/databind/ObjectMapper.html)，您可以执行以下操作：

1.)[启用](http://fasterxml.github.com/jackson-databind/javadoc/2.1.0/com/fasterxml/jackson/databind/ObjectMapper.html#enable%28com.fasterxml.jackson.databind.DeserializationFeature%29)根解包：

```
objectMapper.enable(DeserializationFeature.UNWRAP_ROOT_VALUE); 
```

2.)向 User.class添加[注释：](http://fasterxml.github.com/jackson-annotations/javadoc/2.1.0/com/fasterxml/jackson/annotation/JsonRootName.html)

```
@JsonRootName("response")
class User {
    …
} 
```

我希望你可以使用这种方法。

[编辑：我通过google-http-java-client API](http://javadoc.google-http-java-client.googlecode.com/hg/1.13.1-beta/index.html)挖掘并得出结论，您无法直接访问 ObjectMapper。为了使用 Jackson 的全部功能，您必须编写自己的[JsonObjectParser](http://javadoc.google-http-java-client.googlecode.com/hg/1.13.1-beta/com/google/api/client/json/JsonObjectParser.html)实现来包装“真正的”Jackson 解析器。对此感到抱歉，也许其他人可以提出更好的解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T18:03:40.360

我没有找到一种本地方式（对于这个库）来解决我的任务。结果，我通过扩展[JsonObjectParser](http://javadoc.google-http-java-client.googlecode.com/hg/1.13.1-beta/com/google/api/client/json/JsonObjectParser.html)的功能解决了这个问题。它需要扩展[JacksonFactory](https://code.google.com/p/google-http-java-client/source/browse/google-http-client-jackson2/src/main/java/com/google/api/client/json/jackson2/JacksonFactory.java)，但它是最后一个类，所以我使用了聚合。

我写了以下课程：

*   杰克逊过滤厂

    ```
    import com.google.api.client.json.JsonObjectParser;
    import com.google.api.client.json.jackson2.JacksonFactory;

    public class JacksonFilteringFactory {
        private final JacksonFactory factory = new JacksonFactory();

        public JsonObjectParser createJsonObjectParser(String filteringNode) {
            return new FilteringJsonObjectParser(factory, filteringNode);
        }
    } 
    ```

*   过滤JsonObjectParser

    ```
    import java.io.ByteArrayInputStream;
    import java.io.IOException;
    import java.io.InputStream;
    import java.lang.reflect.Type;
    import java.nio.charset.Charset;

    import org.json.JSONException;
    import org.json.JSONObject;
    import org.json.JSONTokener;

    import com.google.api.client.json.JsonFactory;
    import com.google.api.client.json.JsonObjectParser;
    import com.vkredmessenger.AppController;
    import com.vkredmessenger.util.StringUtils;

    public class FilteringJsonObjectParser extends JsonObjectParser {

        private String mFilteringNode;

        public FilteringJsonObjectParser(JsonFactory jsonFactory, 
                String filteringNode) {

            super(jsonFactory);

            mFilteringNode = filteringNode;
        }

        @Override
        public Object parseAndClose(InputStream in, 
                Charset charset, Type dataType)
                    throws IOException {

            String originalResponse = 
                    StringUtils.convertStreamToString(in, charset);

            String response = null;

            try {
                JSONTokener tokener = new JSONTokener(originalResponse);
                JSONObject originalResponseObject = 
                        (JSONObject) tokener.nextValue();

                JSONObject responseObject = 
                        originalResponseObject.getJSONObject(mFilteringNode);
                response = responseObject.toString();

            } catch (JSONException e) {
                e.printStackTrace();
            }

            InputStream filteredIn = 
                    new ByteArrayInputStream(response.getBytes(charset));

            return super.parseAndClose(filteredIn, charset, dataType);
        }
    } 
    ```

因此，例如从我的问题中，结果解析代码将如下所示：

```
request.setParser(new JacksonFilteringFactory().createJsonObjectParser("response"));
return request.execute().parseAs(getResultType()); 
```

# ios - IOS UIWebview webkit和decisionpolicyfornavigationaction错误

> ID：14973301
> 
> 赞同：0
> 
> 时间：2013-02-20T06:03:39.097
> 
> 标签：ios, iphone, objective-c, ipad, webkit

iPad编程，IOS6。有一个`(UIWebView *)`helpview 对象，它使用加载到捆绑的 html 文件中

```
[helpView loadHTMLString:htmlString baseURL:baseURL]; 
```

加载成功，在 html 文件中有一个 `<a href="didTap://touchme">here</a>`启用和处理超链接触摸。

一切正常，除了如果我随后启动 NSURLRequest 以获取外部网站然后返回到原始 html 文件，则 html 文件中的锚标记无法工作并且我收到此错误：

> WebKit 在 webView:decidePolicyForNavigationAction:request:frame:decisionListener:delegate:setObjectForKey:key cannot be nil 中丢弃了一个未捕获的异常

没想到IOS编程使用了webkit，为什么会出现这个错误呢？以及如何恢复锚标签？

有趣的是，如果我释放并重新创建 UIWebView 对象而不是使用 IBOutlet 并始终保留它，这一切都可以正常工作。但这造成了 UIWebview 保留计数的其他问题，我无法弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:31:21.787

您是否在应用程序的某处使用自定义 NSURLProtocol？它甚至可能没有在使用您的 UIWebView 的同一代码中注册，或者它可能在调用 loadRequest: 之后注册：但是，由于请求是异步加载的（我相信），它仍然可能会干扰。在您的代码中搜索`[NSURLProtocol registerClass`某处，禁用所有这些，看看是否能解决问题。如果是这样，那么该解决方案很可能会修复自定义协议代码中的异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-25T21:57:46.110

我今天在 iOS 10.3 上看到了这个错误。和你一样 - 我使用 UIWebView，而不是 WKWebView。在我的情况下，问题是由加载的网址末尾的空格引起的。

# ruby-on-rails - 使用 Rails 的包含天数和练习的锻炼计划模型

> ID：14973306
> 
> 赞同：0
> 
> 时间：2013-02-20T06:04:01.100
> 
> 标签：ruby-on-rails, relational-database

我希望能够使用 Ruby on Rails 为健身房创建锻炼计划。锻炼计划将包含一个名称，他将有 X 天，其中将有 X 次锻炼。

这就是锻炼计划的样子

名称：**初学者锻炼**

*   第 1 天

*   练习 1
*   练习 2
*   练习 3

*   第 2 天

*   练习 1
*   练习 2

*   第 3 天

*   练习 1
*   练习 2
*   练习 3
*   练习 4

现在练习将来自给定的池（由我输入），用户可以从中选择（通过复选框）。

这是创建新锻炼计划的简化形式：

![新的锻炼计划表](../Images/3d77064eed4b53d7e45845d6bd1293ce.png)

我现在可以有固定的天数，动态添加天数将是我的下一步，但现在这并不重要。

现在我有3个模型。计划、计划日和锻炼。关系是

```
# == Schema Information
#
# Table name: plans
#
#  id         :integer          not null, primary key
#  name       :string(255)
#  created_at :datetime
#  updated_at :datetime
#

class Plan < ActiveRecord::Base

    has_and_belongs_to_many :plan_days

    accepts_nested_attributes_for :plan_days
end

# == Schema Information
#
# Table name: plan_days
#
#  id         :integer          not null, primary key
#  name       :string(255)
#  created_at :datetime
#  updated_at :datetime
#

class PlanDay < ActiveRecord::Base

    has_and_belongs_to_many :exercises

    accepts_nested_attributes_for :exercises
end

# == Schema Information
#
# Table name: exercises
#
#  id          :integer          not null, primary key
#  name        :string(255)
#  created_at  :datetime
#  updated_at  :datetime
#

class Exercise < ActiveRecord::Base

    has_and_belongs_to_many :plan_days
end 
```

我真的无法接近像上面这样的表格，我认为我的关系可能不对。我会很感激任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T07:10:28.000

查看您的建模：

1.  持续数天。我不认为这是一个必要的模型。它可以简单地融入运动中的一个领域。锻炼可以进行，而且只能在某个日历日进行。

2.  你不应该在这里使用 has_and_belongs_to_many 关系。一个练习必须属于某个计划，这很简单。

3.  有些东西应该与客户有关。我更喜欢使用计划。那么练习只与计划有关。

现在让我们再次尝试建模

```
# Customer has many Plans
Model: Plan
  - Name
  - Start(date)
  - End(date)
  - Customer(id)

# Plan has many exercises
Model: Exercise
  - Name
  - Date
  - Plan(id) 
```

在此模型下，显示日常安排很容易。例如，如果您想显示第一天的练习，您可以搜索此计划下的练习，日期为第一天或此计划。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T23:07:04.660

我找到了 Ryan Bates 的截屏视频，这几乎正是我所需要的[http://railscasts.com/episodes/196-nested-model-form-revised](http://railscasts.com/episodes/196-nested-model-form-revised)

# twitter-bootstrap - 理解 Bootstrap 的 clearfix 类

> ID：14973317
> 
> 赞同：61
> 
> 时间：2013-02-20T06:05:13.253
> 
> 标签：twitter-bootstrap, less, clearfix

```
.clearfix {
  *zoom: 1;
  &:before,
  &:after {
    display: table;
    content: "";
    // Fixes Opera/contenteditable bug:
    // http://nicolasgallagher.com/micro-clearfix-hack/#comment-36952
    line-height: 0;
  }
  &:after {
    clear: both;
  }
} 
```

1.  为什么不使用`display:block`？
2.  另外，为什么它也适用于`::before`伪类？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-02-20T06:53:24.163

`.clearfix`中定义[`less/mixins.less`](https://github.com/twbs/bootstrap/blob/v2.3.0/less/mixins.less)。在其定义的正上方是一条带有本文链接的评论：

[一个新的微型 clearfix hack](http://nicolasgallagher.com/micro-clearfix-hack/)

这篇文章解释了它是如何工作的。

**更新：**是的，仅链接的答案很糟糕。即使在发布此答案时我也知道这一点，但是由于版权，抄袭以及您有什么，我不觉得复制和粘贴是可以的。但是，我现在觉得没问题，因为我已经链接到了原始文章。不过，我还应该提到作者的名字：尼古拉斯·加拉格尔（Nicolas Gallagher）。这是文章的重点（注意“Thierry 的方法”是指[Thierry Koblentz 的“clearfix reloaded”</a>）：](http://www.yuiblog.com/blog/2010/09/27/clearfix-reloaded-overflowhidden-demystified/)

[](http://www.yuiblog.com/blog/2010/09/27/clearfix-reloaded-overflowhidden-demystified/)

> [](http://www.yuiblog.com/blog/2010/09/27/clearfix-reloaded-overflowhidden-demystified/)
> 
> [这个“micro clearfix”生成伪元素并将它们设置 `display`为`table`. 这会创建一个](http://www.yuiblog.com/blog/2010/09/27/clearfix-reloaded-overflowhidden-demystified/)[匿名表格单元格](http://www.w3.org/TR/CSS2/tables.html#anonymous-boxes)和一个新的块格式化上下文，这意味着`:before`伪元素可以防止上边距折叠。`:after`伪元素用于清除浮动。因此，无需隐藏任何生成的内容，所需的代码总量也减少了。
> 
> 包括`:before`选择器*不是*清除浮动所必需的，但它**可以防止**上边距在现代浏览器中折叠。这有两个好处：
> 
> *   它确保与创建新块格式化上下文的其他浮动包含技术的视觉一致性，例如， `overflow:hidden`
>     
>     
> *   它确保`zoom:1`应用时与 IE 6/7 的视觉一致性。
>     
>     
> 
> **注意**：在某些情况下，IE 6/7 不会在新的块格式化上下文中包含浮动的底部边距。可以在此处找到更多详细信息：[使用 CSS 表达式在 IE 中更好地包含浮动](http://nicolasgallagher.com/better-float-containment-in-ie/)。
> 
> 使用`content:" "`（注意内容字符串中的空格）避免了一个[Opera 错误](http://codepen.io/anon/full/9454/4)，如果该 `contenteditable`属性也存在于 HTML 中的某处，则会在 clearfixed 元素周围创建空间。感谢 Sergio Cerutti 发现此修复程序。另一种解决方法是使用`font:0/0 a`.
> 
> # 旧版火狐
> 
> Firefox < 3.5 将受益于使用 Thierry 的方法并添加`visibility:hidden`隐藏插入的字符。这是因为旧版本的 Firefox 需要`content:"."`避免`body`在某些情况下（例如[jsfiddle.net/necolas/K538S/](http://jsfiddle.net/necolas/K538S/)）和它的第一个子元素之间出现额外的空间。
> 
> 创建新块格式化上下文的替代浮动包含方法，例如应用`overflow:hidden`或 `display:inline-block`到容器元素，也将避免旧版本 Firefox 中的这种行为。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-10-19T13:56:00.747

clearfix **hack 本身不需要**`:before`伪元素。

 **这只是一个额外的好功能，有助于**防止第一个子元素的边距折叠**。因此，“clearfixed”元素的子块元素的上边距保证位于 clearfixed 元素的上边框下方。

`display:table`正在使用，因为`display:block`不成功。即使使用元素，使用`display:block`边距也会折叠。`:before`

有一个警告：如果`vertical-align:baseline`在带有 clearfixed`<div>`元素的表格单元格中使用，Firefox 将无法很好地对齐。那么`display:block`尽管失去了防塌陷功能，您可能更喜欢使用。如果有进一步的兴趣，请阅读这篇文章：[Clearfix interfering with vertical-align](http://www.running-bits.de/index.php/clearfix-interfering-with-vertical-align/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-02T15:19:14.227

当在父容器中使用 clearfix 时，它会自动环绕所有子元素。

它通常在浮动元素之后使用，以清除浮动布局。

当使用浮动布局时，它将水平对齐子元素。Clearfix 清除了这种行为。

**示例 - 引导面板**

在 bootstrap 中，当使用类 panel 时，有 3 种子类型：panel-header、panel-body、panel-footer。所有这些都有 display:block 布局，但 panel-body 预先应用了 clearfix。panel-body 是一个主要的容器类型，而 panel-header 和 panel-footer 并不是一个容器，它只是用来保存一些基本的文本。

如果添加了浮动元素，则父容器不会包裹这些元素，因为浮动元素的高度不会被父容器继承。

因此对于面板页眉和面板页脚，需要使用 clearfix 来清除元素的浮动布局： Clearfix 类提供了一种视觉外观，即父容器的高度已增加以容纳其所有子元素。

```
 <div class="container">
    <div class="panel panel-default">
        <div class="panel-footer">
            <div class="col-xs-6">
                <input type="button" class="btn btn-primary"   value="Button1">
                <input type="button" class="btn btn-primary"   value="Button2">
                <input type="button" class="btn btn-primary"   value="Button3">
            </div>
        </div>
    </div>

    <div class="panel panel-default">
        <div class="panel-footer">
            <div class="col-xs-6">
                <input type="button" class="btn btn-primary"   value="Button1">
                <input type="button" class="btn btn-primary"   value="Button2">
                <input type="button" class="btn btn-primary"   value="Button3">
            </div>
            <div class="clearfix"/>
        </div>
    </div>
</div> 
```

[![在此处查看示例照片](../Images/bbf69e8638bb8c713418d4c0aeacef52.png)](https://i.stack.imgur.com/ElfRx.png)**

# php - mysql 多个 INNER JOIN 将两个表列添加到另一个表

> ID：14973324
> 
> 赞同：0
> 
> 时间：2013-02-20T06:06:12.150
> 
> 标签：php, mysql, drupal, select, inner-join

**三张桌子**

状态 : ID,member_1,member_2 -->

```
(eg. 12, member_Joseph, member_John ; 
     22, member_Jacob, member_Jarrod ; 
     31, member_Jarrod, member_John 
     11, member_John, member_Jacob) 
```

提交：ID，学生 -->

```
(eg. 12, Amy ; 
     22, Brian; 
     31 Susan ; 
     11 Kyle) 
```

info : member_name, 联系方式 -->

```
(eg. member_Joseph, joseph@name.name; 
     member_Jacob, jacob@name.name ; 
     member_Jarrod, jarrod@name.name ; 
     member_John, john@name.name ) 
```

从查询构建的新表：

```
 member_Joseph, joseph@name.name, Amy; 
 member_Jacob, jacob@name.name, Kyle ; 
 member_Jarrod, jarrod@name.name, Brian, Susan ; 
 member_John, john@name.name, Amy, Susan, Kyle ) 
```

我想制作分配给状态表中每个成员的所有学生的数组，
例如。
array1 --> member_Joseph：学生 1、学生 2、学生 3
array2 --> member_John：学生 2、学生 4、学生 5
array3 -->member_Jacob：学生 3、学生 5、学生 1

那会是：

```
$query = db_query("
    SELECT info.member_name, submit.student  
    FROM {info} 
    INNER JOIN {status} 
    ON info.member_name = status.member_1
    INNER JOIN {status}
    ON info.member_name = status.member_2
    INNER JOIN {submit}
    ON submit.id = status.id
");
while($result = db_fetch_array($query)){
echo $result['student']; //iterate through members and print students for each
} 
```

错误是：“不是唯一的表/别名”

（仅供参考：我正在使用 Drupal 6 语法）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:23:34.863

我认为应该是表`info`应该被加入两次，这样你就可以获得每个 memberID 的 member_name。您还需要为表提供别名，以便可以唯一标识它们，例如

```
SELECT  a.*, 
        b.member_name memberName1,
        c.member_name memberName2,
        // other columns you might want to show
FROM    status a        
        INNER JOIN info b
            ON a.member_1 = b.member_name
        INNER JOIN info c
            ON a.member_2 = c.member_name
        INNER JOIN submit d
            ON a.ID = d.ID 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

# php - php标头重定向不起作用

> ID：14973328
> 
> 赞同：0
> 
> 时间：2013-02-20T06:06:40.070
> 
> 标签：php, session-variables, isset

[因此，我将这里](http://phpsense.com/2006/php-login-script/)的各种 php 登录文件合并为[一个文件](http://rg3k.com/dl/post.zip)。为了将它合并到一个文件中，我附加了 url，并根据附加的内容做不同的事情。

这适用于本地，但不适用于我的远程服务器。

反正...

在我的“合并”文件的顶部，我有

```
session_start(); 
```

这是我唯一一次有 session_start()。我的 post.php 代码的其余部分如下所示：

```
if(isset($_GET['app1'])){
...do stuff
header("location:post.php?app2");
    exit();
}
if(isset($_GET['app2'])){
...do other stuff
header("location:post.php?app3");
    exit();
} 
```

在本地，如果我从 post.php?app1 开始，它将转到 post.php?app2 并且工作正常，但在远程服务器上它只是卡住了（没有重定向）。有谁知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:19:26.493

也许这些发生是因为在尝试重定向之前有一个代码提供了输出。尝试在您的“合并”文件中添加缓冲区功能。

```
ob_start();
session_start(); 
```

# css - CSS减少与视口宽度成比例的负边距

> ID：14973331
> 
> 赞同：0
> 
> 时间：2013-02-20T06:07:00.927
> 
> 标签：css

我们提供了一个 1500 像素宽的图像，它是一个网站的模型。

网站设计是固定宽度设计，设计占据图片中间990px​​。因此，图像两侧的 255 像素只是突出显示站点将如何扩展到更大的视口（即，除了一些边缘元素扩展到无限大之外，它不会除外）。

我想做的是用图像模拟这个（尽可能地）。因此，如果视口为 1500 像素，则图像将从 0,0 开始。

如果视口为 990 像素或更小，则图像将从 0,255 像素开始。

介于两者之间的任何东西都会扩展。所以我想根据视口的宽度将负边距从 -255 缩放到 0。

有点像相反的

```
margin: 0 -10% 0 0; 
```

这与我的想法相反 - 随着视口变宽，图像向左移动而不是向右移动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:49:22.127

在您的样式表中，您可以尝试使用一些响应式设计技术，...

```
@media screen and (max-width:1500px){
    #yourContainer{margin-left:0;background-color:#afa;}

}

@media screen and (max-width:990px){
    #yourContainer{margin-left:255px;background-color:#aaf;}

} 
```

添加背景颜色仅用于测试；）这个 jsFiddle 演示了这一点，只需调整浏览器窗口的大小或小提琴列的宽度 - [http://jsfiddle.net/vs6uz/1/](http://jsfiddle.net/vs6uz/1/)

# db2 - 如何在 AIX shell 脚本中切换用户？

> ID：14973335
> 
> 赞同：1
> 
> 时间：2013-02-20T06:07:30.763
> 
> 标签：db2, aix, su

我想从 shell 脚本运行 DB2 查询。我有一个用户`db2inst1`需要执行 DB2 语句。我正在运行一个使用`root`用户运行 shell 脚本的应用程序。如果我将用户切换到 db2inst1。我可以完成这项工作。

以下是我的 scipt 与`db2inst1`.

```
#!/bin/sh
db2 "connect to customerdb"
db2 "set schema = db2inst1"
db2 "insert into tbl_customer(name,occupation) values ('Alex','Admin')" 
```

看到它就像一个根必须运行它。所以root用户会让脚本在执行db命令之前先切换用户。

我的应用程序将调用这个将使用`root`用户的 shell 脚本。

如何在脚本中切换用户？我是 shell 脚本的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T06:12:10.723

当您运行时`root`，您可以使用：

```
su dbinst1 -c './your_script arg1 arg2 ...' 
```

如果你不跑步`root`，生活会更艰难。

# wpf - 在 WPF 中显示示例数据

> ID：14973336
> 
> 赞同：0
> 
> 时间：2013-02-20T06:07:32.087
> 
> 标签：wpf, xaml, sample, blend

我已经使用 Blend 工具为我的一个类创建了 xml 示例数据，现在通过设置我的主网格的以下属性成功地在设计器中显示它：

```
DataContext="{d:DesignData /SampleData/MySampleData.xaml}" 
```

现在如何将`DataContext`子 Grid 的 设置为我的对象的（复杂）属性？例如，假设我的主要对象是 Person 并且它的复杂属性是 Address 具有诸如 Street、City、Country 等子属性，我如何将`DataContext`我的 Address Grid 设置为此 Address 属性，以便该网格中的 TextBoxes 开始显示设计器内的数据。这些文本框直接绑定到地址的子属性，例如：

```
<TextBox Text="{Binding City}" /> 
```

因此，如果我能够将地址网格的 DataContext 设置为地址属性，这些应该可以正常工作。

**编辑** 要添加更多细节，这是我的 XAML：

```
<Grid d:DataContext="{d:DesignData /SampleData/MySampleData.xaml}">
    <TextBox Text="{Binding Name}" />

    <Grid DataContext="{Binding RelativeSource={RelativeSource AncestorType=Grid}, Path=DataContext.Address}">
        <TextBox Text="{Binding City}" />
    </Grid>
</Grid> 
```

在这里，Name TextBox 工作正常，但 City TextBox 不行。

**编辑2：** 我的错。刚刚发现我使用了错误的属性名称。一切都按预期工作。下面提供的链接是显示设计时示例数据的绝佳资源，因此我也将其标记为答案。

# java - 利用 Java Swing 组件显示自动滚动视图框架的微妙问题

> ID：14973346
> 
> 赞同：0
> 
> 时间：2013-02-20T06:08:10.097
> 
> 标签：java, swing, jscrollpane, 2d-games, jviewport

我正在尝试使用 Java Swing 组件编写基于 GUI 的游戏应用程序。基本框架如下： A`JFrame`包含 a`JScrollPane`和 a `JPanel`。`JScrollPane`进一步包含一个`JPanel`包含一个两层，`JLayeredPane`它本身包含两个`JPanels`。（出于好奇，这两个`JPanels`对应于最上面的非透明面板的单位窗格和最下面的不透明面板的地形窗格。）

自动窗口滚动是该程序的一项功能。为了澄清，编写的代码自动指定一个适当的单元作为窗口目标，然后继续滚动可见窗口，以便在给定窗口显示的情况下尽可能靠近屏幕中心位置显示该单元约束。这个程序是我进退两难的根源。在任何给定的方法执行中，除了在重新调整窗口大小之前对方法的调用之外，该方法完全按照它应该的方式工作。该方法仅在应用程序的初始启动中无法正常运行。

我认为我的代码太长了，无法在本文的上下文中完整发布，因此我将首先仅提供处理窗口滚动的代码，然后将其他代码发布到公共 DropBox 帐户所需的代码。

```
private void scrollWindowToUnit(int targetUnit) {
    System.out.println(((GenericUnit) unitsPane.getComponent(targetUnit))
            .getUnitName());
    int upLeftX = unitsPane.getLocation().x;
    int upLeftY = unitsPane.getLocation().y;
    Point scrollDest = new Point(unitsPane.getComponent(targetUnit)
            .getLocation().x - (screenSize.width / 2), unitsPane
            .getComponent(targetUnit).getLocation().y
            - ((screenSize.height - infoPane.getHeight()) / 2) + 24);

    if (scrollDest.x < upLeftX) {
        scrollDest.x = upLeftX + 24;
    }

    if (scrollDest.y < upLeftY) {
        scrollDest.y = upLeftY + 24;
    }

    jScrollPane.getViewport().setViewPosition(scrollDest);

    repaint();
    revalidate();
} 
```

我已经完成了对该方法的相当稳健的测试，我的结果如下，当应用程序最初启动时，保存在`upLeftX`和中的值`upLeftY`都设置为 -24。这在整个程序执行过程中是一致的。（每个都设置为负值是相当奇怪的，但它似乎足够易于管理。）但是，其中的值在`scrollDest`程序的初始启动和后续运行之间会有所不同。本质上，发生的事情是代码获得了 scrollDest.x 和 scrollDest.y 的值，它们是小于 -24 的负整数。

在包含打印语句的简短示例运行之后，打印了以下结果。

scrollDest.x 和 y：-800 -336

scrollDest.x 和 y：0 0

scrollDest.x 和 y：1051 2145

scrollDest.x 和 y：1051 2145

scrollDest.x 和 y：610 -312

scrollDest.x 和 y：610 0

该行位于上述方法`System.out.println("scrollDest.x and y: " + scrollDest.x + " " + scrollDest.y);` 的两个语句之前和之后。`if`这些值反映了程序对单元的第一次方法调用，为方便起见称为 ONE，其次是程序对板上其他单元的第二次调用，TWO，最后是方法的第三次调用一次再一次。

这种不一致是我问题的根源或反映，我还没有设计出一种可靠的方法来解决这个问题。

我很乐意回答有关澄清或详细说明的任何问题。提前感谢大家的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T07:01:41.507

不确定是否要在 中居中`JComponents`，`JViewport`可以通过计算两个`Rectangle`s （`rect`所需返回`JComponent`，`rect2`是矩形来自`JViewport`）

```
JScrollPane.scrollRectToVisible(new Rectangle(rect.x, rect.y, 
    (int) rect2.getWidth(), (int) rect2.getHeight())); 
```

但最简单的是

```
JScrollPane.scrollRectToVisible(myDesiredComponents.getBounds()); 
```

注意[JScrollPane](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html)的所有事件都必须在[Event Dispatch Thread上完成](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)

# hive - 使用 hive 全局调度

> ID：14973347
> 
> 赞同：2
> 
> 时间：2013-02-20T06:08:10.350
> 
> 标签：hive

像这样使用蜂巢时：

```
 select req_time from ncsa where req_time > 90 sort by req_time limt 100; 
```

你会发现这个：</p>

```
958
952
951 
97
96
96
959
957
956
955 
955
953
95
94
92 
```

我猜在mapps中日期分为几个部分，并按每个部分减少排序。

请告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T16:37:59.750

使用`order by`而不是`sort by`.

`order by`和之间的区别在于`sort by`前者保证输出中的总顺序，而后者只保证减速器中行的顺序。有关更多详细信息，请参阅[hive 文档](https://cwiki.apache.org/Hive/languagemanual-sortby.html)。

PS。确保`req_time`是一个数字字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-17T22:45:43.377

我将引用[Hive cluster by vs order by vs sort by 的](https://stackoverflow.com/questions/13715044/hive-cluster-by-vs-order-by-vs-sort-by)答案：

*   `CLUSTER BY x`: 确保 N 个 reducer 中的每一个都获得不重叠的范围，然后在 reducer 上按这些范围进行排序。这为您提供全局排序，并且与执行 (`DISTRIBUTE BY x`和`SORT BY x`) 相同。您最终会得到 N 个或更多具有非重叠范围的排序文件。

*   所以`CLUSTER BY`- 基本上是 ORDER BY 的更具可扩展性的版本。

# itunes - iTunes Connect 登录 - Apple ID 无权访问 iTunes Connect

> ID：14973348
> 
> 赞同：8
> 
> 时间：2013-02-20T06:08:15.173
> 
> 标签：itunes, app-store-connect

我是一名初学 iPhone 开发者。我有一个苹果 ID 和密码。此 Apple ID 和密码适用于[https://developer.apple.com](https://developer.apple.com)，但不适用于[https://itunesconnect.apple.com](https://itunesconnect.apple.com)。它不适用于iTunes连接。我得到错误：`Apple ID does not have permission to access iTunes Connect`。请为此提供任何解决方案和建议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T06:42:40.137

在我刚刚注册为公司帐户后，这发生在我的第二个 iTunes 帐户上……我只需要等待他们验证我的 DUNS 号码。如果不是这种情况，我确定他们仍在验证其他事情……我花了 14 天才可以访问 iTunes 连接……在我的第一个 iTunes 帐户（4-5 年前）上花了 30 天在访问 iTunesConnect（银行验证）后我可以上传应用程序之前......（现在，这需要不到 1 天的时间）

# oracle - Oracle 表结构

> ID：14973349
> 
> 赞同：0
> 
> 时间：2013-02-20T06:08:25.483
> 
> 标签：oracle, database-design, data-modeling

我在 Oracle 数据库中有一个表，它有 60 列。以下是表结构。

```
ID  NAME TIMESTAMP PROERTY1 ...... PROPERTY60 
```

该表将有很多行。表的大小将以 GB 为单位。但是表结构的问题是，将来如果我必须添加一个新属性，我必须更改架构。为避免这种情况，我想将表结构更改为以下。

```
ID NAME TIMESTAMP PROPERTYNAME PROPERTYVALUE 
```

将是一个示例行。

```
1  xyz  40560 PROPERTY1 34500 
```

通过这种方式，我将能够解决问题，但表格的大小会变大。在获取数据方面是否会对性能产生任何影响。我是甲骨文的新手。我需要你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:23:56.057

> 如果我必须添加一个新属性，我必须更改架构

这真的有问题吗？在较新版本的 Oracle 中，添加列变得[更便宜](http://tonguc.wordpress.com/2008/09/28/11g-enhancement-for-alter-table-add-column-functionality/)、[更方便。](http://www.oracle.com/technetwork/articles/sql/11g-schemamanagement-089869.html)

* * *

但是如果您仍然需要使您的系统动态化，从某种意义上说您不必为新属性执行 DDL，那么以下简单的[EAV](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)实现可能是一个好的开始：

```
CREATE TABLE FOO (
    FOO_ID INT PRIMARY KEY
    -- Other fields...
);

CREATE TABLE FOO_PROPERTY (
    FOO_ID INT REFERENCES FOO (FOO_ID),
    NAME VARCHAR(50),
    VALUE VARCHAR(50) NOT NULL,
    CONSTRAINT FOO_PROPERTY_PK PRIMARY KEY (FOO_ID, NAME)
) ORGANIZATION INDEX; 
```

注意[ORGANIZATION INDEX](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)：整个表只是一棵大 B-Tree，根本没有表堆。属于同一个 FOO_ID 的属性在物理上存储得很近，因此检索已知 FOO_ID 的所有属性将很便宜（但不如所有属性都在同一行中时便宜）。

您可能还想考虑是否适合：

*   在 FOO_PROPERTY 中添加更多索引（例如，用于搜索属性名称或值）。请注意索引组织表中二级索引的额外成本。
*   切换 FOO_PROPERTY PK 中的列顺序 - 如果您主要搜索属性名称并且很少检索给定 FOO_ID 的所有属性。这也将使[索引压缩](http://richardfoote.wordpress.com/2008/02/17/index-compression-part-i-low/)变得可行，因为索引的前沿现在是相对较宽的字符串（而不是窄整数）。
*   对 VALUE 使用不同的类型（例如[RAW](http://www.orafaq.com/wiki/RAW)，甚至[是内联](http://docs.oracle.com/cd/B28359_01/appdev.111/b28393/adlob_tables.htm#CIHEBABG)BLOB/CLOB，这可能会影响性能，但也可能提供额外的灵活性）。或者，您甚至可以为每种可能的值类型创建一个单独的表，而不是将所有内容都填充到一个字符串中。
*   将属性“声明”分离到自己的表中。该表将有两个键：除了字符串 NAME 之外，它还将具有整数 PROPERTY_ID，然后可以将其用作 FOO_PROPERTY 中的 FK 而不是 NAME（以更多的 JOIN 为代价节省一些存储空间）。

# ruby-on-rails - 是什么导致了“NilClass:Class 的未定义方法 `model_name'”错误？

> ID：14973352
> 
> 赞同：1
> 
> 时间：2013-02-20T06:08:47.993
> 
> 标签：ruby-on-rails

我有...

**耙路线：**

```
edit_report_question
GET
/reports/:report_id/questions/:id/edit(.:format)
questions#edit 
```

**questions_controller.rb：**

```
 def edit
    @report = Report.find(params[:report_id])
    @questions = @report.questions.find(params[:id])
  end 
```

**报告.rb：**

```
has_many :questions 
```

**问题.rb：**

```
belongs_to :report 
```

**编辑.html.haml：**

```
.textbox
  = render "shared/notice"
  %h1 Edit Question
  = render "form"
  = render "actions" 
```

**_form.html.haml：**

```
= simple_form_for [@report, @question] do |f|
  = f.error_notification
  = f.association :report
  = f.input :description
  = f.input :blueprint_name, :label => "Blueprint Name"
  = f.input :blueprint_url, :label => "Blueprint URL"
  = f.association :element, :label => "Website Element"
  = f.association :standard
  - if params[:action]=~ /edit/
    = f.association :fields, :as => :select
  = f.button :submit, :id => 'submit_question' 
```

**参数：**

```
{"action"=>"edit", "controller"=>"questions", "report_id"=>"1", "id"=>"1"} 
```

那么为什么我会收到“NilClass:Class 的未定义方法 `model_name'”错误？

注意：目前每个报告都有很多问题，但最终我希望报告有很多并且属于很多问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T06:22:04.650

您尚未在控制器中的任何地方定义“@question”，我认为您的控制器操作应该像

```
def edit
  @report   = Report.find(params[:report_id])
  @question = @report.questions.find(params[:id]) # replacing @questions with @question
end 
```

您收到 nil 类错误，因为 @questions 是一个实例变量，其中没有任何内容。另外，请在发布前尝试挖掘。谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T06:12:24.820

导致错误的行是这一行

```
simple_form_for [@report, @question] 
```

因为在控制器中，您没有 @question 变量，Rails 无法推断表单的路径。我认为`@questions`应该有`@question`

```
@questions = @report.questions.find(params[:id]) 
```

# android - 如何使用 android 代码安装/卸载应用程序？

> ID：14973353
> 
> 赞同：1
> 
> 时间：2013-02-20T06:08:57.197
> 
> 标签：android

是否可以在没有用户交互的情况下通过 android 代码在设备上安装/卸载应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T06:27:07.687

是的，有可能您需要在语法上使用`Process`and`Runtime`来执行`adb`Android 中的命令。假设您想安装一个 apk，那么您需要运行。`./adb install ~/Desktop/apkname`同样，您需要为此使用`./adb install`命令。

```
Process process=Runtime.getRuntime().exec("./adb install 'complete path of your apk file'"); 
```

希望这会奏效祝你好运。

# android - 在 Android App Inventor 中显示来自在线文本文件的数据列表

> ID：14973356
> 
> 赞同：1
> 
> 时间：2013-02-20T06:09:14.453
> 
> 标签：android, list, app-inventor

我正在尝试为家庭气象站创建一个小天气应用程序。气象站持续输出一个 .txt 文件，我正在尝试使用应用程序发明者制作一个 android 应用程序来读取文件中的数据并适当地显示它。

文件位于此处：[http ://uregina.ca/~hodder2k/realtime.txt](http://uregina.ca/~hodder2k/realtime.txt)

我能够将整个字符串加载到应用程序中，但我还没有找到一种方法来读取和标记文件中某些数据列（例如温度等）。

这可以在 App Inventor 中完成吗？还是我应该尝试切换到使用 Android SDK？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:26:28.570

您必须解析获得的结果以获取所需信息，请参阅此简单解析过程示例

![在此处输入图像描述](../Images/d959d2d366d5e313937d457b19d22c46.png)

另见这里[http://puravidaapps.com/info.php#parse](http://puravidaapps.com/info.php#parse)

# networking - 网络困境 IP 堆栈（微控制器）

> ID：14973360
> 
> 赞同：0
> 
> 时间：2013-02-20T06:09:28.053
> 
> 标签：networking, microcontroller

我基本上已经成功地使用以太网连接与微控制器来控制现实世界的各个方面，困境是IP地址我的意思是如何在没有任何特定MAC ID的情况下从世界各地访问192.168.0.155，我想实现相同GSM 模块的网络使用消除了电线，但没有 MAC 寻址，因此从它到 IP 客户端的 TCP 连接不会到达？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:31:20.233

我不确定您之前是如何使用以太网进行“现实世界控制”的，但是 MAC 地址不会“活”过下一个接收者（这意味着在下一个切换之后），所以不要将它用于任何事情。

您的 192.168.xx 地址是私有的，因此它永远不会出现在您的 Internet 网关之外（即，如果您使用 GPRS，则为您的 GSM 调制解调器），并且不能直接用于 Internet 上的任何内容。在这里简单解释互联网路由的工作原理并不容易，但是您应该使用端口转发到按小时 DHCP 服务器提供给您的私有 IP 地址（您必须在其中发起来自客户端的请求，以便对方不会IP 地址和端口），或者您必须具有固定的公共 IP 地址，或者您可以使用一些动态 DNS 服务（例如[http://www.noip.com/](http://www.noip.com/)），或者您可以在某些服务器上更新来自客户端的数据您可以控制的服务器（例如，如果您从 PC 手动更新数据）。

总而言之，您要实现的目标不是很清楚，但我想说您需要在继续之前检查有关互联网路由的一些事情。

# node.js - 断言内部函数调用

> ID：14973361
> 
> 赞同：0
> 
> 时间：2013-02-20T06:09:32.860
> 
> 标签：node.js, sinon

我有一个`foo.js`看起来像这样的文件：

```
var exec = require('child_process').exec
...
function start(){
  ...
  exec('open -g http://localhost:<port>');  // opens a browser window
}
// EOF 
```

我想测试当我调用该`start()`函数时，会打开一个浏览器窗口。理想情况下，我想使用 Sinon 来存根`exec`（这样我们在自动化测试期间*实际上*不会打开浏览器窗口），并断言它`exec`被调用了。我尝试了很多方法，但都没有奏效。例如在`foo_test.js`：

```
var subject = require('../lib/foo');

describe('foo', function(){
  describe('start', function(){
    it('opens a browser page to the listening address', function(){
      var stub = sinon.stub(subject, 'exec', function(){
        console.log('stubbed exec called');
      });  // fails with "TypeError: Attempted to wrap undefined property exec as function"
    });
  });
}); 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:14:51.873

不确定这是否是您要查找的内容，但快速搜索返回：

[https://github.com/arunoda/horaa](https://github.com/arunoda/horaa)

基本上，它允许您存根库。从例子：

**你的代码**

```
//stored in abc.js
exports.welcome = function() {
    var os = require('os');

    if(os.type() == 'linux') {
        return 'this is a linux box';
    } else {
        return 'meka nam linux nemei :)';
    }
}; 
```

**测试代码（注意 OS 的模拟）**

```
//stored in test.js
var horaa = require('horaa');
var lib = require('./abc'); // your code
var assert = require('assert');

//do the hijacking
var osHoraa = horaa('os');
osHoraa.hijack('type', function() {
    return 'linux';
});

assert.equal(lib.welcome(), 'this is a linux box');

//restore the method
osHoraa.restore('type'); 
```

希望有帮助。

# iphone - 我们如何使用 FB Login 点赞一个 url？

> ID：14973366
> 
> 赞同：0
> 
> 时间：2013-02-20T06:09:58.150
> 
> 标签：iphone, facebook, facebook-like

我想使用给定链接中所示的“赞”按钮来赞一个 url。

[在底部喜欢按钮是有](https://developers.facebook.com/docs/reference/rest/) 点击喜欢按钮将喜欢这个页面并显示在您的 Facebook 个人资料页面中的活动块下，如下所示：

![在此处输入图像描述](../Images/c112dc4047659a2d3ad57ca86cb4e952.png)

我们如何在 iPhone App 中喜欢这样的 url。如果用户使用 fb 登录，那么就像如果没有登录然后登录然后喜欢。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T06:19:21.767

你在找这个吗：[Facebook 喜欢按钮](https://developers.facebook.com/docs/reference/plugins/like/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T06:37:14.250

最后，我做到了。

使用图形 API 点赞页面 URL 的代码如下：

```
 - (IBAction)likepageonFB:(id)sender
{
    [appDelegate openSession];

     NSString *likePage=@"http://www.facebook.com/ipreencekmr";

    NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   likePage, @"object",[[NSUserDefaults standardUserDefaults] valueForKey:@"token"],@"access_token",
                                   nil];

    [FBRequestConnection startWithGraphPath:@"/me/og.likes" parameters:params HTTPMethod:@"POST" completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {

        UIAlertView *alert=[[UIAlertView alloc] initWithTitle:nil message:[NSString stringWithFormat:@"liked with id %@",[result valueForKey:@"id"]] delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
        [alert show];

        NSLog(@"result is %@",result);
    }];
} 
```

你可以查看这个例子我已经上传[了 FBLike 按钮](https://github.com/ipreencekmr/REPOSITORY)

# php - PHP 发送表单数据不使用 ajax/jQuery

> ID：14973370
> 
> 赞同：2
> 
> 时间：2013-02-20T06:10:32.170
> 
> 标签：php, javascript

我将如何在不使用 HTML 表单的情况下提交表单数据。

我只需要向 example.php 发送 1 个输入，并且希望远离 ajax/jQuery。

也可以在后台发送它而不重定向/刷新页面。

下面的代码是据我所知。我希望它 在页面加载到没有页面重定向的情况下发送`input_1`并且它的值。`value 1``example.php`

```
theForm = document.createElement('form');
theForm.action = 'example.php';
theForm.method = 'post';
newInput1 = document.createElement('input');
newInput1.type = 'hidden';
newInput1.name = 'input_1';
newInput1.value = 'value 1'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T06:14:31.593

我认为 Jquery 适用于支持 Javascript 的设备。但是，您可以坚持使用传统的 xmlhttprequest。查看教程。

[http://www.w3schools.com/ajax/ajax_xmlhttprequest_create.asp](http://www.w3schools.com/ajax/ajax_xmlhttprequest_create.asp)

# android - 使用旋转矩阵将欧拉单位转换为 360 度

> ID：14973373
> 
> 赞同：1
> 
> 时间：2013-02-20T06:10:50.317
> 
> 标签：android, sensors

在 Android 中，我使用加速度计和磁场传感器来计算空间定位，如下面的代码所示。getRotationMatrix 方法生成具有方位角、俯仰角和滚动角的真实单位值。方位角和滚动给出 0 到 180 或 0 到 -180 范围内的值。然而，Pitch 给出的值是 0 到 90 或 0 到 -90。这对我的应用程序来说是个问题，因为在我的应用程序中，无论设备的方向如何，我都需要确定唯一的位置。使用滚动，您可以有 2 个具有相同值的位置。

我需要应用矩阵变换，将传感器值重新映射到范围从 0 到 360 度的值（实际上，360 无效，因为它与 0 相同，任何接近 360 的值都会产生一个像 359.99999 的数字。 .)

我不是数学家，也不知道如何使用矩阵，更不用说在 Android 中使用它们了，但我知道这是获得 0 到 360 度转换所需要的。如果矩阵也处理方位角和滚动，这样它们也会产生从 0 到 360 的值，但如果这不可能，那很好，因为仍然可以从它们的传感器值中得出唯一的位置。有什么建议我如何创建这个矩阵转换？

```
@Override
public void onSensorChanged(SensorEvent event)
{
  try
  {
    if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER)
      accelerometerValues = event.values;
    else if (event.sensor.getType() == Sensor.TYPE_MAGNETIC_FIELD)
      magneticFieldValues = event.values;

    if ((accelerometerValues != null) && (magneticFieldValues != null))
    {

      float[] R = new float[9];
      float I[] = new float[9];

      boolean success = SensorManager.getRotationMatrix(R, I, accelerometerValues, magneticFieldValues);

      if (success)
      {
        float[] values = new float[3];
        SensorManager.getOrientation(R, values);

        // Convert from radians to degrees if preferred.
        values[0] = (float) Math.toDegrees(values[0]); // Azimuth
        values[1] = (float) Math.toDegrees(values[1]); // Pitch
        values[2] = (float) Math.toDegrees(values[2]); // Roll
      }
    }
  }
  catch (Exception ex)
  {
  }
} 
```

**编辑：** 当您将设备旋转 360 度时，音高的原始事件值不会为您提供唯一值，因此我非常怀疑任何矩阵变换都会产生我所追求的结果。也许我使用了错误的传感器。

# asp.net - 对异步同步的 TaskScheduler 和 SynchronizationContext 感到困惑，无法控制同步上下文？

> ID：14973379
> 
> 赞同：7
> 
> 时间：2013-02-20T06:11:12.093
> 
> 标签：asp.net, task-parallel-library, async-await, webmethod, synchronizationcontext

## 问题

我有一个带有简单 web-service 的 ASP.NET 4.0 WebForms 页面`WebMethod`。此方法用作异步/TPL 代码的同步包装器。我面临的问题是内部`Task`有时有一个空值`SynchronizationContext`（我的偏好），但有时有一个同步上下文`System.Web.LegacyAspNetSynchronizationContext`。在我提供的示例中，这并不会真正导致问题，但在我的实际开发场景中可能会导致死锁。

对服务的第一次调用似乎总是使用空同步上下文运行，接下来的几个也可能如此。但是一些快速请求，它开始弹出到 ASP.NET 同步上下文中。

## 编码

```
[WebMethod]
public static string MyWebMethod(string name)
{
    var rnd = new Random();
    int eventId = rnd.Next();
    TaskHolder holder = new TaskHolder(eventId);

    System.Diagnostics.Debug.WriteLine("Event Id: {0}. Web method thread Id: {1}",
        eventId,
        Thread.CurrentThread.ManagedThreadId);

    var taskResult = Task.Factory.StartNew(
        function: () => holder.SampleTask().Result,
        creationOptions: TaskCreationOptions.None,
        cancellationToken: System.Threading.CancellationToken.None,
        scheduler: TaskScheduler.Default)
        .Result;

    return "Hello " + name + ", result is " + taskResult;
} 
```

存在的定义`TaskHolder`：

```
public class TaskHolder
{
    private int _eventId;
    private ProgressMessageHandler _prg;
    private HttpClient _client;

    public TaskHolder(int eventId)
    {
        _eventId = eventId;
        _prg = new ProgressMessageHandler();
        _client = HttpClientFactory.Create(_prg);
    }

    public Task<string> SampleTask()
    {
        System.Diagnostics.Debug.WriteLine("Event Id: {0}. Pre-task thread Id: {1}",
            _eventId,
            Thread.CurrentThread.ManagedThreadId);

        return _client.GetAsync("http://www.google.com")
            .ContinueWith((t) =>
                {
                    System.Diagnostics.Debug.WriteLine("Event Id: {0}. Continuation-task thread Id: {1}",
                        _eventId,
                        Thread.CurrentThread.ManagedThreadId);

                    t.Wait();

                    return string.Format("Length is: {0}", t.Result.Content.Headers.ContentLength.HasValue ? t.Result.Content.Headers.ContentLength.Value.ToString() : "unknown");
                }, scheduler: TaskScheduler.Default);
    }
} 
```

## 分析

我的理解`TaskScheduler.Default`是它是`ThreadPool`调度程序。换句话说，线程不会在 ASP.NET 线程上结束。根据[这篇文章](http://msdn.microsoft.com/en-us/library/dd997402%28v=vs.100%29.aspx)，*“任务并行库和 PLINQ 的默认调度程序使用 .NET Framework 线程池来排队和执行工作”*。基于此，我希望`SynchronizationContext`内部`SampleTask`始终为空。

此外，我的理解是，如果`SampleTask`要在 ASP.NET 上，对in`SynchronizationContext`的调用*可能会*死锁。`.Result``MyWebMethod`

 *因为我不会“一直异步”，所以这是一个“同步异步”场景。根据Stephen Toub 的[这篇文章](http://blogs.msdn.com/b/pfxteam/archive/2012/04/13/10293638.aspx)，在标题为*“如果我真的需要“同步而不是异步”怎么办？*以下代码*应该*是一个安全的包装器：

```
Task.Run(() => holder.SampleTask()).Result 
```

根据同样由 Stephen Toub 撰写的[另一篇文章](http://blogs.msdn.com/b/pfxteam/archive/2011/10/24/10229468.aspx)，上述内容在功能上应等同于：

```
Task.Factory.StartNew(
    () => holder.SampleTask().Result, 
    CancellationToken.None, 
    TaskCreationOptions.DenyChildAttach, 
    TaskScheduler.Default); 
```

由于在 .NET 4.0 中，我无法访问`TaskCreationOptions.DenyChildAttach`，我**认为**这是我的问题。但是我在 .NET 4.5 中运行了相同的示例并切换到`TaskCreationOptions.DenyChildAttach`它，它的行为相同（有时会抓取 ASP.NET 同步上下文）。

然后我决定更接近“原始”建议，并在 .NET 4.5 中实现：

```
Task.Run(() => holder.SampleTask()).Result 
```

这*确实*有效，因为它总是有一个空同步上下文。哪一种暗示[Task.Run 与 Task.Factory.StartNew 文章](http://blogs.msdn.com/b/pfxteam/archive/2011/10/24/10229468.aspx)有问题？

务实的方法是升级到 .NET 4.5 并使用`Task.Run`实现，但这会涉及我宁愿花在更紧迫问题上的开发时间（如果可能的话）。**另外**，我仍然想弄清楚不同`TaskScheduler`和`TaskCreationOptions`场景发生了什么。

我巧合地发现，`TaskCreationOptions.PreferFairness`在 .NET 4.0 中似乎表现得如我所愿（所有执行都有一个空同步上下文），但不知道*为什么*会这样，我很犹豫要不要使用它（它可能无法正常工作）情景）。

## 编辑

一些额外的信息...我已经用一个死锁的代码更新了我的示例代码，**并**包含一些调试输出以显示任务正在运行的线程。如果 pre-task 或 continuation-task 输出指示与 WebMethod 相同的线程 id，则会发生*死锁*。

奇怪的是，如果我不使用 ProgressMessageHandler，我似乎无法复制死锁。我的印象是这无关紧要，无论下游代码如何，我都应该能够使用正确的`Task.Factory.StartNew`或方法在同步上下文中安全地“包装”异步`Task.Run`方法。但这似乎并非如此？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T11:00:42.297

首先，在 ASP.NET 中使用 sync-over-async 通常没有多大意义。您会产生创建和调度`Task`s 的开销，但您不会以任何方式从中受益。

现在，对于你的问题：

> 我的理解`TaskScheduler.Default`是它是`ThreadPool`调度程序。换句话说，线程不会在 ASP.NET 线程上结束。

好吧，ASP.NET`ThreadPool`也使用相同的方法。但这在这里并不重要。相关的是，如果您`Wait()`（或调用`Result`，相同）在`Task`计划运行（但尚未开始）上，`TaskScheduler`我决定只`Task`同步运行您的。这被称为“任务内联”。

这意味着您`Task`最终会在 上运行`SynchronizationContext`，但实际上并没有通过它安排。这意味着实际上没有死锁的风险。

> 由于在 .NET 4.0 中，我无法访问`TaskCreationOptions.DenyChildAttach`，我认为这是我的问题。

这无关`DenyChildAttach`，没有`Task`s那会`AttachedToParent`。

> 我巧合地发现，`TaskCreationOptions.PreferFairness`在 .NET 4.0 中似乎表现得如我所愿（所有执行都有一个空同步上下文），但不知道*为什么*会这样，我很犹豫要不要使用它（它可能无法正常工作）情景）。

这是因为将 s`PreferFairness`调度`Task`到全局队列（而不是每个`ThreadPool`线程具有的线程本地队列），并且似乎`Task`来自全局队列的 s 不会被内联。但我不会依赖这种行为，特别是因为它将来会改变。

**编辑：**

> 奇怪的是，如果我不使用 ProgressMessageHandler，我似乎无法复制死锁。

没什么好奇怪的，这正是你的问题。ProgressMessageHandler 报告当前同步上下文的进度。由于任务内联，这就是 ASP.NET 上下文，您通过同步等待来阻止它。

您需要做的是确保`GetAsync()`在没有设置同步上下文的线程上运行。我*认为*最好的方法是在调用[`SynchronizationContext.SetSynchronizationContext(null)`](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.setsynchronizationcontext.aspx)之前调用`GetAsync()`并在之后恢复它。*

# java - Java 中的二进制兼容性是什么？

> ID：14973380
> 
> 赞同：54
> 
> 时间：2013-02-20T06:11:12.767
> 
> 标签：java

我正在阅读Joshua Bloch 的《 [Effective Java 》。](https://rads.stackoverflow.com/amzn/click/com/0321356683)

在第 17 条：“仅使用接口来定义类型”中，我遇到了不建议使用接口来存储常量的解释。我把解释放在下面。

***“更糟糕的是，它代表了一种承诺：如果在未来的版本中修改了类，使其不再需要使用常量，它仍然必须实现接口以确保二进制兼容性。”***

二进制兼容性在这里意味着什么？

有人可以用 Java 中的示例指导我，以表明代码是二进制兼容的。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-02-20T06:23:38.930

简而言之，二进制兼容性意味着当你改变你的类时，你不需要重新编译使用它的类。例如，您从此类中删除或重命名了公共或受保护方法

```
public class Logger implements Constants {
   public Logger getLogger(String name) {
         return LogManager.getLogger(name);
   }
} 
```

从您的 log-1.jar 库中并发布一个新版本为 log-2.jar。当您的 log-1.jar 的用户下载新版本时，当他们尝试使用缺少的 getLogger(String name) 方法时，它将破坏他们的应用程序。

而且，如果您删除 Constants 接口（第 17 项），由于同样的原因，这也会破坏二进制兼容性。

但是您可以在不破坏二进制兼容性的情况下删除/重命名此类的私有或包私有成员，因为外部应用程序不能（或不应该）使用它。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2015-03-27T20:51:44.640

为了更好地理解这个概念，有趣的是，二进制兼容性并不意味着 API 兼容性，反之亦然。

**API 兼容但不兼容二进制：静态删除**

库版本 1：

```
public class Lib {
    public static final int i = 1;
} 
```

客户端代码：

```
public class Main {
    public static void main(String[] args) {
        if ((new Lib()).i != 1) throw null;
    }
} 
```

使用版本 1 编译客户端代码：

```
javac Main.java 
```

将版本 1 替换为版本 2：删除`static`：

```
public class Lib {
    public final int i = 1;
} 
```

*只重新*编译版本 2，*而不是*客户端代码，然后运行`java Main`：

```
javac Lib.java
java Main 
```

我们得到：

```
Exception in thread "main" java.lang.IncompatibleClassChangeError: Expected static field Lib.i
        at Main.main(Main.java:3) 
```

发生这种情况是因为即使我们可以用`(new Lib()).i`Java 编写这两种`static`方法和成员方法，它也会编译成两个不同的 VM 指令，具体取决于`Lib`:`getstatic`或`getfield`. [JLS 7 13.4.10](http://docs.oracle.com/javase/specs/jls/se7/html/jls-13.html#jls-13.4.10)提到了这个中断：

> 如果未声明为私有的字段未声明为静态并且更改为声明为静态，反之亦然，如果该字段被预期字段的预先存在的二进制文件使用，则将导致链接错误，特别是 IncompatibleClassChangeError另一种。

我们需要重新编译它才能`Main`使用`javac Main.java`新版本。

笔记：

*   从类实例中调用静态成员`(new Lib()).i`是不好的风格，会引发警告，并且永远不应该这样做
*   这个例子是人为的，因为非静态`final`原语是无用的：总是`static final`用于原语：[私有最终静态属性与私有最终属性](https://stackoverflow.com/questions/1415955/private-final-static-attribute-vs-private-final-attribute)
*   反射可以用来[看出差异](https://stackoverflow.com/questions/3422390/retrieve-only-static-fields-declared-in-java-class)。但是反射也可以看到私有字段，这显然会导致不应该算作中断的中断，所以不算。

**二进制兼容但不兼容 API：空前置条件强化**

版本 1：

```
public class Lib {
    /** o can be null */
    public static void method(Object o) {
        if (o != null) o.hashCode();
    }
} 
```

版本 2：

```
public class Lib {
    /** o cannot be null */
    public static void method(Object o) {
        o.hashCode();
    }
} 
```

客户：

```
public class Main {
    public static void main(String[] args) {
        Lib.method(null);
    }
} 
```

这一次，即使`Main`更新后重新编译`Lib`，第二次调用也会抛出，但不是第一次。

这是因为我们`method`以 Java 在编译时无法检查的方式更改了合约：在它可以之前`null`，之后不再。

笔记：

*   Eclipse wiki 是一个很好的来源：[https ://wiki.eclipse.org/Evolving_Java-based_APIs](https://wiki.eclipse.org/Evolving_Java-based_APIs)
*   制作接受`null`值的 API 是一种有问题的做法
*   进行破坏 API 兼容性但不破坏二进制的更改比反之更容易，因为更改方法的内部逻辑很容易

**C 二进制兼容性示例**

[什么是应用程序二进制接口 (ABI)？](https://stackoverflow.com/questions/2171177/what-is-an-application-binary-interface-abi/54967743#54967743)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-20T06:22:27.540

**二进制兼容性**

> Java 二进制兼容性规定了修改和重新编译类不需要重新编译导入修改类的其他类的条件。二进制兼容性是语言设计的一个新概念。

[Java 语言规范 [7]](http://docs.oracle.com/javase/specs/jls/se7/html/jls-13.html)描述了二进制兼容的更改，如下所示：

> 如果先前无错误链接的预先存在的二进制文件将继续无错误地链接，则对类型的更改与预先存在的二进制文件二进制兼容（等效地，不会破坏兼容性）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-18T07:18:35.620

如果将来，我们希望更改某些类正在实现的接口（例如，添加一些新方法）。

如果我们添加抽象方法（**附加方法**），那么类（实现接口）***必须实现***附加方法，创建依赖约束和成本开销来执行相同的操作。

为了克服这个问题，我们可以在接口中添加**默认**方法。

这将删除实现附加方法的依赖项。

> 我们不需要修改实现类来合并更改。这称为二进制兼容性。

请参考以下示例：

我们将要使用的界面

```
 //Interface       
    interface SampleInterface
            {
                // abstract method
                public void abstractMethod(int side);

                // default method
                default void defaultMethod() {
                   System.out.println("Default Method Block");
                }

                // static method
                static void staticMethod() {
                    System.out.println("Static Method Block");
                }
            }

//The Class that implements the above interface.

    class SampleClass implements SampleInterface
    {
        /* implementation of abstractMethod abstract method, if not implemented 
        will throw compiler error. */
        public void abstractMethod(int side)
        {System.out.println(side*side);}

        public static void main(String args[])
        {
            SampleClass sc = new SampleClass();
            sc.abstractMethod(4);

            // default method executed
            sc.defaultMethod();

            // Static method executed
            SampleInterface.staticMethod();

        }
    } 
```

**注意：**更多详细信息，请参考[默认方法](https://docs.oracle.com/javase/tutorial/java/IandI/defaultmethods.html)

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-02-20T06:16:29.170

**为了让事情看起来简单：**

可以运行旨在在另一台计算机上运行的相同二进制代码的计算机被称为二进制兼容的。这与可能需要重新编译的源代码兼容性不同。

在开发要在多个操作系统上运行的计算机程序时，二进制兼容性是一个主要优势。

# map - struts 2：在行动中捕获对番石榴表（TreeBasedTable）的修改

> ID：14973381
> 
> 赞同：1
> 
> 时间：2013-02-20T06:11:14.293
> 
> 标签：map, struts2, guava, ognl

有一个对象（ObjectA），其中有另一个对象（ObjectB）。对象B里面有一个`Guava TreeBasedTable`。这个表有一个字符串作为行键，列键和另一个对象“ObjectC”作为值。该表已使用`<s:iterator/>`and`<s:textfield/>`标记显示在 jsp 上，并且显示正确（其中的“值”`<s:textfield/>`是正确的，但“名称”不正确）。

现在，修改时出现问题`<s:textfield/>`。我们如何在动作类的 ObjectC 中捕获修改后的值？

```
public class ObjectA implements Serializable {
private Integer attr1;
private List<ObjectB> objB;
//...getters and setters....
public class ObjectB implements Serializable {
private Integer attr11;
private Table<String,String,ObjectC> allPFields;
// ...getters and setters....
public class ObjectC implements Serializable {
private Integer attr111;
public String attr112;
// ...getters and setters.... 
```

**jsp代码：**

```
<!-- language: lang-html -->

<s:iterator value="#objB.allPlainFields.row(#rowKey)" var="fieldMap"
    status="fieldStatus">
    <li><label><s:property value="#fieldMap.key" /></label><span>
            <s:textfield name="<NOT SURE>" value="%{#fieldMap.value.attr12}" />
    </span></li>
</s:iterator> 
```

A `TreeBasedTable`in`Guava`类似于地图中的地图，我尝试过`allPFields[#outerkey][#innerkey].attr112`，但没有成功。

画面显示时的对象结构与数据库中的现有值

```
<!-- language: lang-java -->
objA        
objBList    ArrayList<E>  (id=668)  
elementData Object[10]  (id=7438)   
    [0] objB  (id=7439) 
        allPFields  TreeBasedTable<R,C,V>  (id=7443)    
            backingMap  TreeMap<K,V>  (id=8116) 
            cellSet null    
            columnComparator    NaturalOrdering  (id=503)   
            columnKeySet    null    
            columnMap   null    
            factory TreeBasedTable$Factory<C,V>  (id=8117)  
            rowKeySet   null    
            rowKeySet   StandardRowSortedTable$RowKeySortedSet  (id=8118)   
            rowMap  StandardRowSortedTable$RowSortedMap  (id=8119)  
            rowMap  null    
            values  null 
```

并且“allPFields”看起来如下所示：

```
{OuterKey1=
    {InnerKey1=ObjectC[attr111=31, attr112=Hi there], 
     InnerKey2=ObjectC[attr111=40, attr112=How are you]
    }
 } 
```

上面的“allPFields”值是从 IDE 控制台获取的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:51:58.277

正如我在您的另一个问题中告诉您的那样，我从未使用过`Guava TreeBasedTable`;

但是，根据[官方番石榴文档](http://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained#Table)，

> `TreeBasedTable`， 哪个`is essentially backed by a TreeMap<R, TreeMap<C, V>>`

[`get`方法](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/TreeBasedTable.html#row%28R%29)是_

> `V get(Object rowKey, Object columnKey)`
> 
> 返回与给定行键和列键对应的值，如果不存在此类映射，则返回 null。

其中`Java`将是：

```
Object value = objA.getObjB().get(listIndex).getAllPlainFields.get(rowKey, columnKey).getAttr112;
value = "new value"; 
```

然后`OGNL`你可以尝试一些东西（完全未经测试），比如：

```
<s:textfield value="%{#fieldMap.value.attr12}"
 name="objA.objB[#fieldStatus.index].allPlainFields.get(#rowKey, #fieldMap.Key).attr112"  /> 
```

PS：**当心打字**错误...您正在使用`allPlainFields`和`allPFields`一起...其中一个是错误的，请确保所有符号都指向正确的变量名。

PPS：我不知道你的要求，但这个结构对我来说似乎有点“过度设计”......它绝对不尊重`KISS paradigm`:)

# ruby-on-rails-3 - 是否可以从 Rails 中的另一台服务器运行 rake 任务

> ID：14973387
> 
> 赞同：0
> 
> 时间：2013-02-20T06:11:55.250
> 
> 标签：ruby-on-rails-3, cron, rake, crontab, rake-task

我有一个使用 ruby​​ on rails 3.0.7 开发的书签网站，并且每次运行许多 rake 文件以获取书签 URL 详细信息和添加的用户信息。由于 rake 每次都在运行，因此我的服务器已启用，其 CPU 利用率为 100%。我需要通过将所有 rake 保存在数据库中并将其放入队列来在另一台服务器上运行我的 rake 文件。

我在单独的服务器中设置了一个 cron 来处理共享文件的 rake 任务队列。但 rake 任务仍在开发服务器上运行。

是否有任何选项可以在另一台服务器上运行 rake 文件？或如何在 Rails 中设置动态 cron 作业？

请帮我

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:17:07.330

看起来像是后台工作人员的工作。红宝石有很多解决方案。

基本思想是这样的：您将任务提交到队列（由[redis](/questions/tagged/redis "显示标记为“redis”的问题") / [mysql](/questions/tagged/mysql "显示标记为“mysql”的问题") /whatever 支持）。然后另一个进程（worker）从队列中弹出任务并在后台执行它们，而不会阻塞或影响您的应用程序。当然，您可以有多个工人，他们可以位于其他机器上。

以下是关于工人的 railscast 集合：[Background Job railscasts](http://railscasts.com/?tag_id=32)。

我目前最喜欢的是 Sidekiq。

# spring - 如何获取所选项目的值和标签

> ID：14973394
> 
> 赞同：2
> 
> 时间：2013-02-20T06:12:28.553
> 
> 标签：spring, jsp, spring-mvc, label

> 我在 jsp 上的代码：

```
<form:select id="accountId" path="accountId" >  
<c:forEach items="${accountTypeList}" var="var">
<form:option value="${var.accountId}" label="${var.accountNo}"></form:option>
</c:forEach>
</form:select> 
```

> 我想要控制器中选定条目的值和标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:23:03.227

请检查[获取选择选项标签的文本并将其填充到隐藏的输入字段中](https://stackoverflow.com/questions/11940680/get-text-of-select-options-label-and-populate-it-in-a-hidden-input-field)

您可以使用隐藏字段并使用 javascript/jquery 填充该字段，因此当您提交该表单时，您可以获得该值。

- 更新

如果您仍然在下一页中使用 accountNo，您可以在表单类中添加一些临时变量，例如 accountNo2。

# coffeescript - CoffeeScript 中的 While 循环

> ID：14973396
> 
> 赞同：3
> 
> 时间：2013-02-20T06:12:35.393
> 
> 标签：coffeescript

我是 CoffeeScript 新手，并且一直在阅读[《关于 CoffeeScript 的小书》](http://arcturo.github.com/library/coffeescript/02_syntax.html)一书。以下是本书第 2 章中的几行，在阅读时让我感到困惑：

> CoffeeScript 公开的唯一低级循环是 while 循环。这与纯 JavaScript 中的 while 循环具有相似的行为，但具有返回结果数组的附加优势，即类似于 Array.prototype.map() 函数。

```
num = 6
minstrel = while num -= 1
  num + " Brave Sir Robin ran away" 
```

尽管对于 CoffeeScript 程序员来说它可能看起来不错，但作为新手，我无法理解代码的作用。*此外，返回结果数组*的单词 似乎与 while 是循环构造而不是函数这一事实不符。因此，它***返回***某些东西的概念似乎令人困惑。此外，循环的每次迭代中`num`带有字符串的变量`"Brave Sir Robin ran away"`似乎很尴尬，因为该值`num` 被用作循环计数器。

如果您能解释代码的行为，或许可以用更简单的示例说明作者试图传达的内容，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T06:42:46.137

哇！我不知道，但如果你记得 Coffeescript 总是返回“块”的最后一个表达式，那绝对是有道理的。因此，在您的情况下，它会返回（如果这让您感到困惑，则不是通过“return”语句）表达式

```
 num + " Brave Sir Robin ran away" 
```

来自与 while 条件关联的块，并且由于您将返回多个这样的表达式，它会将它们推送到数组中。

看看生成的 JavaScript，它可能会更清晰，因为生成的代码几乎是程序化的

```
var minstrel, num;

num = 6;

minstrel = (function() {
    var _results;
    _results = [];
    while (num -= 1) {
        _results.push(num + " Brave Sir Robin ran away");
    }
    return _results;
})(); 
```

我希望这对你有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-13T22:12:56.250

请注意，该函数调用可能非常低效！

下面是一个素数生成器

```
'use strict'

exports.generate = (number) ->
  return [] if number < 2
  primes = []
  candidate = 1
  while number > 1
    candidate++
    while number % candidate is 0
      primes.push candidate
      number /= candidate
    candidate = number - 1 if Math.sqrt(number) < candidate
  primes 
```

这是使用`while`as 表达式的版本

```
'use strict'

exports.generate = (number) ->
  return [] if number < 2
  candidate = 1
  while number > 1
    candidate++
    primes = while number % candidate is 0
      number /= candidate
      candidate
    candidate = number - 1 if Math.sqrt(number) < candidate
  primes 
```

第一个版本在 4 毫秒内运行我的测试，最后一个需要 18 毫秒。我相信原因是生成的闭包返回素数。

# asp.net-mvc - 不使用实体框架的 MVC 应用架构

> ID：14973397
> 
> 赞同：0
> 
> 时间：2013-02-20T06:12:36.703
> 
> 标签：asp.net-mvc, model-view-controller, design-patterns, architecture

我是 MVC 应用程序开发的新手。我愿意使用 MVC 开发一个新项目，我寻找了很多适合 MVC 应用程序的架构。在阅读了许多文章和博客之后，我开始知道存储库模式可以用于此目的。
根据我在开始实际项目之前的理解，我创建了一个虚拟项目结构，如下所述[不使用 EDMX 文件，项目中的实体框架，定义的自定义 DAL]

我的虚拟应用程序的名称是 Repository。我以国家、州和城市关系为例来开发虚拟应用程序：

**Repository_DAL_V1** *类库*该库的类如下：
SQLHelper.cs ：此类具有执行查询的方法，例如 ExecutenonQuery 等。

**Repository_DTO_V1** *类库*该库的类如下：
CountryDTO.cs ：该类从 CountryModel.cs 继承为 [ CountryDTO:CountryModel ]。这将用于在应用程序的所有层之间移动数据。如果有任何应该的属性要在业务中使用，那么这将在 DTO 而不是模型中创建。
CountryDTOMapper.cs ：用于将数据库中的数据以 DataTable 的形式映射到 DTO 对象的集合中。

**Repository_Implementation** *web mvc 项目*这是 UI 层。

**Repository_IRepositories_V1** *类库*该库的类如下：
ICountryRepository.cs ：这是一个接口，具有声明的函数，如 SaveCountry() 等。

**Repository_Models** *类库*该库的类如下：
CountryModel.cs ：该类具有完全适用于数据库中表的所有列的属性。

**Repository_Repositories_V1** *类库*该库的类如下：
CountryRepository.cs ：这是一个存储库类，具有定义的函数，如 SaveCountry() 等。

**Repository_ViewModel_V1** *类库*该库的类如下：
CountryViewModel.cs ：这将为屏幕上的 Country View 构建。

以上项目参考详情：

Repository_DTO_V1 有 Repository_Models 的引用。
Repository_IRepositories_V1 有 Repository_DTO_V1,Repository_Models 的引用。
Repository_Repositories_V1 有 Repository_IRepositories_V1、Repository_DAL_V1、Repository_DTO_V1、Repository_Models 的引用。
Repository_ViewModel_V1 有 Repository_Repositories_V1、Repository_IRepositories_V1、Repository_DTO_V1、Repository_Models 的引用。

我需要你们所有人的指导来引导我朝着正确的方向前进。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:28:00.243

我不明白为什么不使用 EF 与您在分层方面完成的任何其他项目有什么不同。如果您对使用多层感到满意，那么您的事物结构就没有问题。我不知道你的项目是关于什么的，但你应该考虑更好的命名，比如项目名称（存储库）和实现更好地命名为 Web。

**编辑**
我建议您将 Entity Framework 5 与 Code First 一起使用，也就是说，如果您想使用 ORM？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:00:58.207

我当然和你一样希望错过 EF。

正如@Dejan.S 所说，您需要的架构取决于项目的大小。

我会从简单的开始，也许有 3 个项目：

*   一个网络项目。
*   控制器用于访问模型和业务逻辑的服务项目。
*   具有您的模型和数据访问权限的域项目。

如果你需要分离一些东西（比如 DAL），你仍然可以稍后再做。

另外，请查看 ServiceStack 的[MVC Power Pack](http://www.servicestack.net/mvc-powerpack/)。您可以开箱即用地获得出色的微型 ORM、IoC、缓存、快速序列化程序等。

# objective-c - 在我的 cocos2d 代码中看到多边形时遇到问题。使用 cocos2d 和 box2d。只有在调试模式下，实际的多边形才可见

> ID：14973398
> 
> 赞同：1
> 
> 时间：2013-02-20T06:12:47.097
> 
> 标签：objective-c, cocos2d-iphone, box2d

所以我需要帮助弄清楚我在这里缺少什么代码。我已经检查了所有地方，但我需要详细说明它使用的公式还是我还没有注意到的错字。这是多边形类。我正在尝试创建具有 8 个顶点的随机多边形，然后当然填充纯色。但我希望他们继续生成随机位置但保持固定。以更好的方式，多边形是我的地形。好的修改：多边形在那里，我的角色与它们交互，但我看不到它们，是的，它们在同一层上。哦，但它们不会一直在底部生成，我猜我只需要在它们离开屏幕后删除旧的，它应该会生成一个新的多边形。

```
-(void) genBody:(b2World *)world pos:(CGPoint *)pos {
//Here we generate a somewhat random convex polygon by sampling
//the "eccentric anomaly" of an ellipse with randomly generated
//x and y scaling constants (a,b). The algorithm is limited by
//the parameter max_verts, and has a number of tunable minimal
//and scaling values.
// I need to change this to randomly choosing teh number of vertices between 3-8,
// then choosing random offsets from equally distributed t values.
// This will eliminate teh while loop.
screen_pos = ccp(pos->x, pos->y);
float cur_t;
float new_t;
float delta_t;
float min_delta_t = 0.5;
float t_scale = 1.5;
b2Vec2 *verts= new b2Vec2[m_maxVerts]; // this should be replaced by a private verts ... maybe ... hmm that will consume more ram though
float t_vec[m_maxVerts];

// Generate random vertices
int vec_len;
while (true) {
    cur_t = 0.0;
    for (vec_len=0; vec_len<m_maxVerts; vec_len++) {
        //delta_t = t_scale*(float)rand()/(float)RAND_MAX; // wish they just had a randf    method :/
        delta_t = t_scale*floorf((double)arc4random()/ARC4RANDOM_MAX);
#ifdef POLY_DEBUG
        CCLOG(@"delta_t %0.2f", delta_t);
#endif
        if (delta_t < min_delta_t) {
            delta_t = min_delta_t;
        }
        new_t = cur_t + delta_t;
        if (new_t > 2*PI) {
            break;
        }
        t_vec[vec_len] = new_t;
        cur_t = new_t;
    }
    // We need at least three points for a triangle
    if ( vec_len > 3 ) {
        break;
    }
} 
```

至少在生成身体的地方。然后...

```
float num_verts = vec_len;

b2BodyDef BodyDef;
BodyDef.type = b2_staticBody;
BodyDef.position.Set(pos->x/PTM_RATIO, pos->y/PTM_RATIO);
BodyDef.userData = self; // hope this is correct

m_polyBody = world->CreateBody(&BodyDef);

b2PolygonShape polyShape;
int32 polyVert = num_verts;
polyShape.Set(verts, polyVert);

b2FixtureDef FixtureDef;
FixtureDef.shape = &polyShape;
FixtureDef.userData = self; // hope this is correct
FixtureDef.density = 1.6f;
FixtureDef.friction = 0.4f;
FixtureDef.restitution = 0.5f;

m_polyBody->CreateFixture(&FixtureDef);

for (int i=0; i < num_verts; i++) {
    // Convert from b2Vec2 to CCPoint and from physics units to pixels
    m_verts[i] = ccp(verts[i].x*PTM_RATIO, verts[i].y*PTM_RATIO);
}
m_numVerts = num_verts;
delete verts;
}

-(void) setColor:(ccColor4F) color {
m_color = color;
}

-(BOOL) dirty {
return true;
}

-(void) draw {
//[super draw];
ccDrawPoly(m_verts, m_numVerts, YES);

CCLOG(@"Drawing?");
}

-(CGAffineTransform) nodeToParentTransform {
b2Vec2 pos  = m_polyBody->GetPosition();

float x = pos.x * PTM_RATIO;
float y = pos.y * PTM_RATIO;

/*if ( ignoreAnchorPointForPosition_ ) {
    x += anchorPointInPixels_.x;
    y += anchorPointInPixels_.y;
}*/

// Make matrix
float radians = m_polyBody->GetAngle();
float c = cosf(radians);
float s = sinf(radians);

if( ! CGPointEqualToPoint(anchorPointInPixels_, CGPointZero) ){
    x += c*-anchorPointInPixels_.x + -s*-anchorPointInPixels_.y;
    y += s*-anchorPointInPixels_.x + c*-anchorPointInPixels_.y;
}

// Rot, Translate Matrix
transform_ = CGAffineTransformMake( c,  s,
                                   -s,  c,
                                   x,   y );

return transform_;
} 
```

两者之间有一些东西，但它不太重要。如果被问到，我可以发布它。然后是基于我的游戏场景类的更新功能。

```
-(void)updateObstacles
{
//CCLOG(@"updating obstacles");
int xpos;
int ypos;
CGPoint pos;
for (int i=0; i<MAX_OBSTACLES; i++ ) {
    // If there is no obstacle generate a new one
    if ( obstacles[i] == NULL ) {
        polyObstacleSprite *sprite = [[polyObstacleSprite alloc] init];
        ypos = int(_winSize.width/2*(double)arc4random()/ARC4RANDOM_MAX) -   _winSize.width/2;
        xpos = int(_winSize.height/2*(double)arc4random()/ARC4RANDOM_MAX) - _winSize.height/2;
        //CCLOG(@"generating obstacle at %d,%d", xpos, ypos);
        pos = ccp(xpos, ypos);
        [sprite genBody:_world pos:&pos];
        [self addChild:sprite z:1];
        obstacles[i] = sprite;
    }
    //CCLOG(@"position: %d, %d", obstacles[i]->screen, obstacles[i]->position.y); FINISH
}
} 
```

抱歉，如果它有点乱，我很快就设置好了，但我想做的几乎是在我的角色随着重力向下移动时随机生成的多边形出现在我的 iPhone 屏幕底部。除了多边形工作，我得到了其他一切。提前感谢您花时间阅读本文。

# kernel - Mach vm_read 未返回 OSX 10.8.2 的预期值

> ID：14973399
> 
> 赞同：3
> 
> 时间：2013-02-20T06:12:52.687
> 
> 标签：kernel, osx-mountain-lion, mach, xnu

我最近刚搬到 UNIX 平台，目前正在研究操作系统。现在，我对 XNU 的设计/实现特别感兴趣，目前的主题是进程和内存。

我有这个代码片段，它允许我的可执行文件从另一个进程获取任务端口

```
int retValTask = task_for_pid(mach_task_self(), pid, &task);
if (retValTask != KERN_SUCCESS || !MACH_PORT_VALID(task)) {
    printf("Error while getting port, check if root or valid pid");
}
...
int retValVmRead = mach_vm_read(task, (vm_address_t)0x100000000, sizeof(uint32_t), (vm_offset_t *)&magic, &sz); 
```

我知道 Mac OSX 10.8.2 有 ASLR，所以我运行的目标进程是通过 gdb 调用的。

```
(gdb) start
Breakpoint 1 at 0x100000ed8
Starting program: /private/tmp/test 
Reading symbols for shared libraries +............................. done

Breakpoint 1, 0x0000000100000ed8 in main () 
```

我还可以在 GDB 内部验证该地址是否`0x100000000`包含 Mach-O 的幻数。

```
(gdb) x/x 0x100000000
0x100000000 <_mh_execute_header>:   0xfeedfacf
(gdb) 
```

但是，当我的程序尝试读取目标进程的内存时，它只返回随机值，而不是我期望的幻数（它是随机的）。

```
 2157 -> 1103 [0 - (os/kern) successful]
 0x0619F000 
```

2157 是目标 PID，1103 是任务端口以及来自的结果`mach_error_string`。我也尝试了该`vm_read`功能，但行为仍然相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:16:18.533

NVM，发现问题。魔术变量应被视为指针，而不是复制数据的实际内存单元。

```
pointer_t magic;
...
int magicValue = (uint32_t) *((int *)(magic)); 
```

# php - 使用 OpenID 在 CodeIgniter 中使用 Google 帐户登录

> ID：14973402
> 
> 赞同：11
> 
> 时间：2013-02-20T06:13:02.873
> 
> 标签：php, codeigniter, openid

我想使用 OpenID 使用 Google 帐户实现登录，但我不知道如何开始这个过程，因为我不知道如何去做。那么是否有任何分步指南，以便我可以使用 PHP 中的 CodeIgniter 轻松实现 Google 帐户登录。

我只找到了[这个](http://openid.net/get-an-openid/)，但我无法正确理解它，所以有任何指南或任何库可以使用 Google 帐户登录吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T08:21:09.997

下载**[LightOpenID](https://raw.githubusercontent.com/iignatov/LightOpenID/master/openid.php)**。创建 login.php 文件，并将以下代码粘贴到文件中。

```
<?php

require_once 'openid.php';
$openid = new LightOpenID("my-domain.com");

if ($openid->mode) {
    if ($openid->mode == 'cancel') {
        echo "User has canceled authentication !";
    } elseif ($openid->validate()) {
        $data = $openid->getAttributes();
        $email = $data['contact/email'];
        $first = $data['namePerson/first'];
        echo "Identity : $openid->identity <br>";
        echo "Email : $email <br>";
        echo "First name : $first";
    } else {
        echo "The user has not logged in";
    }
} else {
    echo "Go to index page to log in.";
} 
```

创建 index.php 文件，并将以下代码粘贴到文件中。

```
<?php

require_once 'openid.php';
$openid = new LightOpenID("my-domain.com");

$openid->identity = 'https://www.google.com/accounts/o8/id';
$openid->required = array(
    'namePerson/first',
    'namePerson/last',
    'contact/email',
);
$openid->returnUrl = 'http://my-domain.com/login.php'
?>

<a href="<?php echo $openid->authUrl() ?>">Login with Google</a> 
```

这就是你需要做的。代码取自[Google Login with LightOpenID](http://qpleple.com/how-to-make-people-login-into-your-website-with-their-google-account/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-18T11:41:56.273

首先下载[openid.php](http://gitorious.org/lightopenid/lightopenid/blobs/raw/master/openid.php)并放入您的 codeigniter 根文件夹。

**1.复制代码并保存为..../controller/logingoogle.php**

```
 <?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class LoginGoogle extends CI_Controller 
{
    public function __construct()
    {
        parent::__construct();
        $this->load->model('login_model');
    }

    public function index()
    {
        require_once 'openid.php';
        $openid = new LightOpenID("localhost");
        $openid->identity = 'https://www.google.com/accounts/o8/id';
        $openid->required = array(
            'namePerson/first',
            'namePerson/last',
            'contact/email',
            'birthDate', 
            'person/gender',
            'contact/postalCode/home',
            'contact/country/home',
            'pref/language',
            'pref/timezone',  
        );
//  $openid->returnUrl = 'http://localhost/login_thirdparty/login_google.php';

    $openid->returnUrl = 'http://localhost/login_thirdparty/codeigniterlogin/index.php/logingoogle/loginAuth';

//  echo '<a href="'.$openid->authUrl().'">Login with Google</a>';

        $data['openid'] = $openid;
        $this->load->view('googleLoginView', $data);
    }

    public function loginAuth()
    {
        $this->login_model->index();
    }
} 
```

**2.复制代码并保存为..../views/googleLoginView.php**

```
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Login using google account</title>
</head>
<body>
    <a href = "<?php echo $openid->authUrl(); ?>" > Loging Using google account </a>
</body>
</html> 
```

**3.复制代码并保存为..../models/login_model.php**

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');
require 'openid.php';

class Login_model extends CI_Model 
{
    public function index()
    {
        $openid = new LightOpenID("localhost");

        if($openid->mode)
        {
            if($openid->mode == 'cancel')
            {
                echo "User has canceled authentication !";
            }
            elseif($openid->validate())
            {
                $data = $openid->getAttributes();
                $email = $data['contact/email'];
                $first = $data['namePerson/first'];
    //          header("Location: http://speechwithmilo.com/speechtherapy/adminpanel/");
                echo "Identity : $openid->identity <br />";
                echo "Email : $email <br />";
                echo "First name : $first";
                echo "<pre>"; print_r($data); echo "</pre>";

//              echo "<meta http-equiv = 'refresh' content = '0; url=http://speechwithmilo.com/speechtherapy/adminpanel/'>";
            }
            else
            {
                echo "The user has not logged in";
            }
        }
        else
        {
            echo "Go to the login page to logged in";
        }
    }
} 
```

# android - 启用设备的数据包数据时接收广播意图

> ID：14973409
> 
> 赞同：1
> 
> 时间：2013-02-20T06:14:07.063
> 
> 标签：android, android-intent

我正在编写一个 Android 应用程序，当启用设备的数据包数据（不是 wifi 数据只有数据包数据）并且设备锁存到数据时，应用程序应该首次开始设置。

我已经使用操作注册了接收器，`CONNECTIVITY_CHANGE`并且为了获取所需的信息，我使用了以下代码片段：

```
NetworkInfo info = intent.getParcelableExtra(
    ConnectivityManager.EXTRA_NETWORK_INFO);
info.isConnected(); 
```

但我将“**信息**”设为空。我还搜索了`ConnectivityManager.EXTRA_EXTRA_INFO`同样为空的包裹。

请帮助我解决问题。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T06:25:37.743

为您执行此操作的示例类。在你的 Activity 中有一个，记得在 Activity 暂停/恢复时启动/停止它，并`isConnected()`从 Activity 的任何地方调用它：

```
public class ConnectivityListener extends BroadcastReceiver {
    private final Context mContext;
    private final ConnectivityManager mConnectivityManager;
    private volatile boolean mConnected;

    public boolean isConnected() {
        return mConnected;
    }

    public ConnectivityListener(Context context) {
        mContext = context;
        mConnectivityManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
    }

    public void startListening(){
        IntentFilter filter = new IntentFilter("android.net.conn.CONNECTIVITY_CHANGE");
        mContext.registerReceiver(this,filter);
    }

    public void stopListening(){
        mContext.unregisterReceiver(this);
    }

    @Override
    public final void onReceive(Context context, Intent intent) {
        NetworkInfo n = mConnectivityManager.getActiveNetworkInfo();

        if(n != null){
            mConnected = n.getType() == ConnectivityManager.TYPE_MOBILE && n.isConnectedOrConnecting();
        }else {
            mConnected = false;
        }
    }
} 
```

# android - 将特定的 WebView 元素捕获为图像格式？

> ID：14973416
> 
> 赞同：0
> 
> 时间：2013-02-20T06:14:38.813
> 
> 标签：android, pdf, itext

android.webkit.WebView 有[capturePicture](http://developer.android.com/reference/android/webkit/WebView.html#capturePicture%28%29) () 来捕获当前 WebView 的全部内容，但是你如何只对网页上的特定元素执行此操作呢？例如，您可能在 . 中使用 CSS 定位了许多图像和文本元素`div`。可能有很多元素，但我只想捕获`div`它们在 WebView 中呈现的内容。

我想出的唯一想法是`div`仅将其加载为另一个 WebView 的整个 HTML 并调用`capturePicture`. 另一个问题是如何将`Picture`对象转换为可与 iText 库（PNG、JPEG、GIF）一起使用的格式。有没有更简单的方法来实现这一点？

（我的应用程序的一个功能是输出PDF文档。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T08:10:17.910

您可以使用`view.setDrawingCacheEnabled(true);`将视图捕获为图像。然后你必须创建一个方法来做到这一点。这是我的保存方法

```
 void Save() {
    if (null != view.getDrawable()) {
        view.setDrawingCacheEnabled(true);
        view.buildDrawingCache();
        save = view.getDrawingCache();
        final File myDir = new File(folder);
        myDir.mkdirs();
        final Random generator = new Random();
        int n = 10000;
        n = generator.nextInt(n);
        final String fname = "StyleMe-" + n + ".png";
          file = new File(myDir, fname);
        if (file.exists())
            file.delete();
        try {
            final FileOutputStream out = new FileOutputStream(file);
            save.compress(Bitmap.CompressFormat.PNG, 100, out);
            out.flush();
            out.close();
            sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED,
                    Uri.parse("file://"
                            + Environment.getExternalStorageDirectory())));
            Toast.makeText(getApplication(), "Image Saved",
                    Toast.LENGTH_SHORT).show();
        } catch (final Exception e) {
            Toast.makeText(getApplication(),
                    "Something Went Wrong check if you have Enough Memory",
                    Toast.LENGTH_LONG).show();
        }
    } else {
        final Toast tst = Toast.makeText(getApplication(),
                "Please Select An Image First", Toast.LENGTH_LONG);
        tst.setGravity(Gravity.CENTER, 0, 0);
        tst.show();
    }
    view.setDrawingCacheEnabled(false);
} 
```

# xml - XQUERY 更新 XML 参数

> ID：14973426
> 
> 赞同：0
> 
> 时间：2013-02-20T06:15:13.083
> 
> 标签：xml, xml-parsing, xquery

鉴于以下 XML 片段，对于我需要检查的每个不同 ElementID，如果其中一个元素中的 CurrentValue 不同，则使用更改的值更新所有 CurrentValues。

```
<im:Element>
  <im:ElementID>1</im:ElementID>
  <im:CurrentValue>OldValue1</im:CurrentValue>
</im:Element>
<im:Element>
  <im:ElementID>1</im:ElementID>
  <im:CurrentValue>OldValue1</im:CurrentValue>
</im:Element>
<im:Element>
  <im:ElementID>1</im:ElementID>
  <im:CurrentValue>NewValue1</im:CurrentValue>
</im:Element>
<im:Element>
  <im:ElementID>2</im:ElementID>
  <im:CurrentValue>OldValue2</im:CurrentValue>
</im:Element>
<im:Element>
  <im:ElementID>2</im:ElementID>
  <im:CurrentValue>NewValue2</im:CurrentValue>
</im:Element>
<im:Element>
  <im:ElementID>2</im:ElementID>
  <im:CurrentValue>OldValue2</im:CurrentValue>
</im:Element>
----- 
```

结果应该是

```
<im:Element>
  <im:ElementID>1</im:ElementID>
  <im:CurrentValue>NewValue1</im:CurrentValue>
</im:Element>
<im:Element>
  <im:ElementID>1</im:ElementID>
  <im:CurrentValue>NewValue1</im:CurrentValue>
</im:Element>
<im:Element>
  <im:ElementID>1</im:ElementID>
  <im:CurrentValue>NewValue1</im:CurrentValue>
</im:Element>
<im:Element>
  <im:ElementID>2</im:ElementID>
  <im:CurrentValue>NewValue2</im:CurrentValue>
</im:Element>
<im:Element>
  <im:ElementID>2</im:ElementID>
  <im:CurrentValue>NewValue2</im:CurrentValue>
</im:Element>
<im:Element>
  <im:ElementID>2</im:ElementID>
  <im:CurrentValue>NewValue2</im:CurrentValue>
</im:Element>
----- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:42:38.103

这似乎更适合 XSLT。如果您可以使用 XSLT，这里有一个选项...

**XML 输入**（修改为格式良好）

```
<im:Doc xmlns:im="im">
    <im:Element>
        <im:ElementID>1</im:ElementID>
        <im:CurrentValue>OldValue1</im:CurrentValue>
    </im:Element>
    <im:Element>
        <im:ElementID>1</im:ElementID>
        <im:CurrentValue>OldValue1</im:CurrentValue>
    </im:Element>
    <im:Element>
        <im:ElementID>1</im:ElementID>
        <im:CurrentValue>NewValue1</im:CurrentValue>
    </im:Element>
    <im:Element>
        <im:ElementID>2</im:ElementID>
        <im:CurrentValue>OldValue2</im:CurrentValue>
    </im:Element>
    <im:Element>
        <im:ElementID>2</im:ElementID>
        <im:CurrentValue>OldValue2</im:CurrentValue>
    </im:Element>
    <im:Element>
        <im:ElementID>2</im:ElementID>
        <im:CurrentValue>NewValue2</im:CurrentValue>
    </im:Element>   
</im:Doc> 
```

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:im="im">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="im:CurrentValue">
        <xsl:copy>
            <xsl:value-of select="(//im:Element[im:ElementID=current()/../im:ElementID]/im:CurrentValue)[last()]"/>
        </xsl:copy>
    </xsl:template>

</xsl:stylesheet> 
```

**XML 输出**

```
<im:Doc xmlns:im="im">
   <im:Element>
      <im:ElementID>1</im:ElementID>
      <im:CurrentValue>NewValue1</im:CurrentValue>
   </im:Element>
   <im:Element>
      <im:ElementID>1</im:ElementID>
      <im:CurrentValue>NewValue1</im:CurrentValue>
   </im:Element>
   <im:Element>
      <im:ElementID>1</im:ElementID>
      <im:CurrentValue>NewValue1</im:CurrentValue>
   </im:Element>
   <im:Element>
      <im:ElementID>2</im:ElementID>
      <im:CurrentValue>NewValue2</im:CurrentValue>
   </im:Element>
   <im:Element>
      <im:ElementID>2</im:ElementID>
      <im:CurrentValue>NewValue2</im:CurrentValue>
   </im:Element>
   <im:Element>
      <im:ElementID>2</im:ElementID>
      <im:CurrentValue>NewValue2</im:CurrentValue>
   </im:Element>
</im:Doc> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T01:12:37.013

假设（1）要使用的新值是出现在给定 ID 的元素上的最后一个值（所以这个答案与 Daniel Haley 的答案相当），（2）输入和输出将与 Daniel 的猜想一样Haley，并且 (3) 您的输入文档位于[http://example.com/imdoc.xml](http://example.com/imdoc.xml)，那么类似下面的 XQuery 模块应该可以解决问题。

```
declare namespace im = "im";

<im:Doc>{
  let $doc := doc('http://example.com/imdoc.xml')
  for $e in $doc/im:Doc/im:Element
  let $eid := $e/im:ElementID,
      $lastval := ($e/../im:Element[im:ElementID = $eid])
                  [last()]
                  /im:CurrentValue 
  return <im:Element>{ $eid, $lastval}</im:Element> 
}</im:Doc> 
```

如果假设 (2) 不适用，则稍有不同的表述是：

```
let $input := doc('http://example.coms/imdoc.xml')
                  /im:Doc/im:Element
for $e in $input
let $eid := $e/im:ElementID,
    $lastval := ($input[im:ElementID = $eid])
                [last()]/im:CurrentValue
return <im:Element>{ $eid, $lastval}</im:Element> 
```

# sql - 通过对特定于每个变量的级别进行分组来对 n 个数值变量求和

> ID：14973427
> 
> 赞同：0
> 
> 时间：2013-02-20T06:15:18.297
> 
> 标签：sql, database, postgresql, group-by, postgresql-9.1

我正在按问题解决一个小组，此时可以使用一些方向。我想通过一个分组级别来总结多个变量，对于每个要求和的变量，该分组级别是不同的（但值域相同）。在伪伪代码中，这是我的问题：对于每个`empYEAR`变量（宽格式有 20 个左右的按年就业变量），我想按该特定年份企业所在的县对其进行汇总。

这些数据是一组代表 Dun & Bradstreet/NETS 过去 20 年的商业机构的表格。

有关数据库的更多详细信息，它是许多平面文件，都具有相同的主键。

主键是`DUNSNUMBER`，它存在于多个表中。每年都有详细的表格：

*   就业
*   县
*   销售量
*   信用评级（及其他）

全部组织如下（此表显示就业，但其他变量的结构类似，后缀为年份）。

```
dunsnumber|emp1990  |emp1991|emp1992|...    |emp2011|
a         | 12      |32     |31     |...    | 35    |
b         |         |2      |3      |...    | 5     |
c         | 1       |1      |       |...    |       |
d         | 40      |86     |104    |...    | 350   |
... 
```

我最终希望有一个结构如下的表：

```
county |emp1990|emp1991|emp1992|...|emp2011|sales1990|sales1991|sales1992|sales2011|...
A
B
C
... 
```

我现在的主要挑战是：如果县作为分组变量有时会按年变化并在另一个表中指定，我如何按年按县对就业（或销售额）进行汇总，如上例表所示？

这似乎是相当简单的事情，比如说，`R`使用长数据格式，但有数百万条记录，所以我更喜欢将初始处理保留在 postgres 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T06:44:59.230

据我了解您的问题，这听起来相对简单。虽然我通常更喜欢使用规范化的数据，但我认为事先规范化不会给你带来任何具体的东西。

在我看来，您想要一些相对简单的东西，例如：

```
SELECT sum(emp1990), sum(emp1991), ....
  FROM county c
  JOIN emp e ON c.dunsnumber = e.dunsnumber
  JOIN sales s ON c.dunsnumber = s.dunsnumber
  JOIN ....
 GROUP BY c.name, c.state; 
```

我没有看到更简单的方法来做到这一点。您很可能可以查询系统目录或信息模式以生成要汇总的列列表。据我所知，其余的是直接分组并加入过程。

如果变量按名称更改，根据我的经验，最好的办法是根据该联合组合一个位置视图并加入它。这使您可以隐藏主要查询的复杂性，并且只要您不加入基础表就应该表现得很好。

# rest - 带有 Slim 的基于身份验证的 REST API

> ID：14973428
> 
> 赞同：1
> 
> 时间：2013-02-20T06:15:19.380
> 
> 标签：rest, authentication, slim

我不确定如何使用身份验证方法

我有办法，但不知道它是否安全。让我解释一下我在用 REST API 做什么。

我有一个基于多用户的网络应用程序，用户可以使用他们的用户名和密码登录并执行这些操作。

我需要为该网络应用程序开发一个移动应用程序。我正在考虑使用 Slim 框架进行 REST，但是我对 Slim REST 开发没有任何问题，但身份验证部分是我不确定如何开发的部分。

不过我有一些想法

使用会话 cookie :- 当用户通过移动应用程序登录时调用 REST API 身份验证方法，进行数据库查询并匹配用户名/密码。如果它们匹配，则为用户名和密码创建两个 cookie 并以加密形式存储它们

移动应用程序发送下一个请求时检查cookies，解密用户名和密码，如果匹配则再次与数据库记录匹配调用Requested方法，否则拒绝访问。

请让我知道我的进展如何？它仍然使我的 REST API 成为 RESTful 吗？是否可以将用户名/密码存储在上述 senerio 的 cookie 中？

# ios - Xcode 中禁用了本地 GIT 存储库中的 M 和 A 等文件的状态？

> ID：14973429
> 
> 赞同：2
> 
> 时间：2013-02-20T06:15:21.010
> 
> 标签：ios, xcode, svn, xcode4

在我机器的本地 GIT 存储库中，Xcode 4.5 中禁用了 M 和 A 等文件的状态。如何启用它，以便我可以查看 SVN 更新后的状态更改。

# websocket - glassfish V3.1.2.2 和 grizzly-websockets v1.9.56 中的 websockets 和 WebContainer HttpSession

> ID：14973433
> 
> 赞同：1
> 
> 时间：2013-02-20T06:15:41.073
> 
> 标签：websocket, glassfish-3, httpsession

问题： glassfish V3.1.2.2 和 grizzly-websockets v1.9.56 中的**Websockets 和 WebContainer HttpSession** 。

参考链接：http: [//java.net/jira/browse/GRIZZLY-1289](http://java.net/jira/browse/GRIZZLY-1289)

我正在使用带有 glassfish 服务器的 web-scoket。所以 webscoket 使用 glassfish V3.1.2.2 和 grizzly-websockets v1.9.56 。

我完成了创建 webscoket 并使用了我们的应用程序。但我遇到了一个问题，例如：

我使用会话，并使用 webscoket 的“DefaultWebSocket”获取会话。但我没有得到当前会话（我得到新的或 null 不是当前的）。

代码 ：

```
@Override
    public WebSocket createWebSocket(ProtocolHandler protocolHandler,
            final WebSocketListener... listeners) {

DefaultWebSocket defaultWebSocket = new DefaultWebSocket(protocolHandler,listeners);

HttpSession httpSession = defaultWebSocket.getRequest().getSession(false);

return defaultWebSocket ;
} 
```

“httpSession” 对象为 null 或 new Not current 。

帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T09:41:11.807

下载 glassfish 3.1.2.2，使用 grizzly-websockets-1.9.50.jar（下载 [java.net/jira/browse/GRIZZLY-1289](http://java.net/jira/browse/GRIZZLY-1289)）对其进行修补，例如 $cp ./grizzly-websockets-1.9.50-fix。 jar glassfish3/glassfish/modules/grizzly-websockets.jar

启动 glassfish 3.1.2.2 $glassfish3/bin/asadmin 启动域

为 http-listener-1 启用 websockets $glassfish3/bin/asadmin set configs.config.server-config.network-config.protocols.protocol.http-listener-1.http.websockets-support-enabled=true

然后在浏览器中运行您的应用程序。

谢谢，

# java - 如何比较由子字符串创建的字符串？

> ID：14973435
> 
> 赞同：0
> 
> 时间：2013-02-20T06:15:44.617
> 
> 标签：java, string, substring

我想知道为什么它不起作用，以及为什么我不能对变量 a 和 b 使用 CHAR 数据类型。关键是，如何相应地比较数字（pr）的第一位和最后一位数字。

```
String  a, b;
for (int i=100; i<1000;i++) {
    for (int j=100; j<1000;j++) {
        pr=j*i;
        a = String.valueOf(pr).substring(0, 1);
        b= String.valueOf(pr).substring(4, 5);

        if ((a==b) )  {
            System.out.println(pr);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T06:18:24.740

使用`equals`函数
`a.equals(b)`

如果您想忽略大小写，请使用
`a.equalsIgnoreCase(b)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T06:22:40.833

这不是`==`用于字符串比较的 JavaScript。

去[equals方法](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#equals%28java.lang.Object%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T06:24:37.643

在 Java 中，运算符`==`会比较对象的身份，因此如果有两个 String 类型的对象具有相同的内容，`==`则会为它们返回 false：

```
String x = new String ("foo");
String y = new String ("bar");
if (x == y)
    System.out.println ("Equal");
else
    System.out.println ("Now equal"); // This will be printed 
```

为了按内容而不是身份比较 String 对象，您需要使用`equals()`如下方法：

```
if (x.equals (y))
    System.out.println ("Equal"); // This will be printed
else
    System.out.println ("Now equal"); 
```

请注意，如果`x`是`null`，`x.equals (y)`则将抛出`NullPointerException`，而如果不是，`x == y`则将返回，如果是。为了防止你需要做这样的事情：`false``y``null``true``y``null``NullPointerException`

```
if (x == null && y == null || x != null && x.equals (y))
    System.out.println ("Equal"); // This will be printed
else
    System.out.println ("Now equal"); 
```

# file-upload - 文件未在快速存储中上传

> ID：14973443
> 
> 赞同：0
> 
> 时间：2013-02-20T06:16:20.643
> 
> 标签：file-upload, openstack-swift

我正在使用 swift server 的 formpost 方法进行文件上传。一些时间文件被上传。但有些时候不是。

在快速服务器日志上，我得到 499 httpcode。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-14T04:10:41.277

499 Client Closed Request (Nginx) 在 Nginx 日志中用于指示连接何时被客户端关闭，而服务器仍在处理其请求，使服务器无法发回状态码。

它是您的客户端问题，它有处理时间限制。如果时间超过并且上传没有发生，它会终止连接/上传过程。它与斯威夫特无关。

希望能帮助到你。

# c# - 优化 IEnumerable 扩展 MaxBy

> ID：14973448
> 
> 赞同：1
> 
> 时间：2013-02-20T06:16:51.997
> 
> 标签：c#, .net, garbage-collection, ienumerable, maxby

我有一个 IEnumerable 扩展 MaxBy 可以像这样使用

```
var longest = new [] {"cat", "dogs", "nit" }.MaxBy(x=>x.Count()) 
```

应该

```
"dogs" 
```

实施*强调文本*

```
public static T MaxBy<T,M>(this IEnumerable<T> This, Func<T,M> selector)
    where M : IComparable
{
    return This
        .Skip(1)
        .Aggregate
        ( new {t=This.First(), m = selector(This.First())}
        , (a, t) =>
            {
                var m = selector(t);
                if ( m.CompareTo(a.m) > 0)
                {
                    return new { t, m };
                }
                else
                {
                    return a;
                }
            }
        , a => a.t);
} 
```

它非常优雅且纯粹是功能性的，但我看到了一个问题。我正在使用作为引用类型并需要垃圾收集的匿名对象。在最坏的情况下，当遍历长度为 NI 的 IEnumerable 时，将进行 N 个内存分配，并且 N 个对象将需要垃圾回收。

我可以编写代码以使用外部可变累加器，但从美学上讲，我更愿意坚持我拥有的模式。

然而，我的担忧在现实中有问题吗？.Net 分代垃圾收集器是否识别出这些对象的寿命很短，一次只有一个并优化正在发生的事情？或者我创建一个自定义值类型（ struct ）来保存我的累加器而不是使用匿名对象更好。

** 编辑 **

这显然是一种非功能性的方法。

```
public static T MaxBy<T,M>(this IEnumerable<T> This, Func<T,M> selector)
    where M : IComparable
{
    var t = This.First();
    var max = selector(t);
    foreach (var item in This.Skip(1))
    {
        var m = selector(item);
        if ( m.CompareTo(max) > 0)
        {
            max = m;
            t = item;
        }

    }
    return t;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-05-07T14:42:41.153

这个更好：

```
public static T MaxBy<T, M>(this IEnumerable<T> source, Func<T, M> selector)
  where M : IComparable
{
  return source.Aggregate((record, next) =>
     Comparer<M>.Default.Compare(selector(next), selector(record)) > 0
     ? next
     : record);
} 
```

*   你没有那么多代码（更聪明地使用`.Aggregate<>`）
*   你避免匿名类型
*   避免在`Comparer<M>.Default`非常非常常见的情况下装箱，其中您`M`的值类型实际上是`IComparable<M>`（而不仅仅是`IComparble`）。在您的示例 where `M`was 中`int`，这适用！对于值类型和引用类型，如果`M`真的实现了泛型，您可以绕过类型检查`IComparable<M>`。`M`但是，如果是只有非泛型`IComparable`（约束）的“差”类型，一切仍然有效`where M : IComparable`。

为空`InvalidOperationException`时的行为不变。`source`

# java - 从文件夹加载纹理

> ID：14973452
> 
> 赞同：1
> 
> 时间：2013-02-20T06:17:13.413
> 
> 标签：java, textures, embedded-resource, jogl, application-resource

我在将 JPEG 加载到球体时遇到问题。目前，我让它工作的唯一方法是将图像与加载它的类放在同一个包中。问题是，我不想将 500 多个纹理全部放在一个包中与类混合。出于组织原因，我宁愿将它们放在文件夹和子文件夹中。

如果纹理在同一个包中，这有效：

```
InputStream iStream = null;

    try
    {
        iStream = getClass().getResourceAsStream(imageFile);
        TextureData data = TextureIO.newTextureData(iStream, false, null);
        testTex[i] = TextureIO.newTexture(data);
        testTex[i].getImageTexCoords();
        testTex[i].setTexParameteri(GL2.GL_TEXTURE_MAG_FILTER, GL2.GL_LINEAR);
        testTex[i].setTexParameteri(GL2.GL_TEXTURE_MIN_FILTER, GL2.GL_NEAREST);
        iStream.close();
        ... 
```

获取图像的方法采用以下形式：

```
String[] texture = { "bar1.jpg", "bar2.jpg" }; // imageFile is whichever is called 
```

由于上述代码完美运行，**缺点是每个纹理都必须存储在与调用纹理的类相同的包中。**但我想从我的项目中的一个文件夹中调用这样的纹理：

```
String[] texture = { "res/foo/bar2.jpg", "res/foo/bar2.jpg" }; 
```

我将如何修改上述代码以在项目的文件夹中查找纹理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T06:26:01.190

```
// note leading '/' - indicates 'search from root of class-path'
String[] texture = { "/res/foo/bar2.jpg", "/res/foo/bar2.jpg" };
// ...
URL iUrl = getClass().getResource(texture[0]);
TextureData data = TextureIO.newTextureData(iUrl, false, "jpg"); 
```

In this example, we use an overloaded form of the `TextureIO` API loading method in [`newTextureData(URL,boolean,String)`](http://download.java.net/media/jogl/builds/archive/jsr-231-beta5/javadoc_public/com/sun/opengl/util/texture/TextureIO.html#newTextureData%28java.net.URL,%20boolean,%20java.lang.String%29).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T06:26:25.827

I think your problem is just that you're missing a slash before res. This will definitely work:

```
this.getClass().getResource("/res/img.jpg"); 
```

as long as the res package is in your src folder.

# archive - 露天内容归档？

> ID：14973453
> 
> 赞同：1
> 
> 时间：2013-02-20T06:17:18.327
> 
> 标签：archive, alfresco

我有一个要求，我需要在特定时间段后归档内容项目，但我应该能够随时访问归档项目？

另外我想知道 alfresco 的内容归档策略是什么？我该如何使用它？

有人可以帮忙吗？

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T06:53:19.780

最后，经过一番谷歌搜索，我可以说露天内容存档取决于商店，可以使用两种方式实现：通用和专用。

1.  如果没有特别需要创建专用存档存储，可以使用诸如有效性方面或任何自定义方面等方面在同一内容存储（例如工作空间：\\spacestore...）中实现存档，添加我们可以告诉系统内容在上下文有资格在同一存储（内容存储）中存档，并且使用规则/操作，可以在同一内容存储的另一个空间中移动或复制内容，并且可以更新其权限（根据需要）。

2.  如果需要在大型存储库或基于合规性的系统中创建专用存档存储，可以使用[http://wiki.alfresco.com/wiki/Content_Store_Selector](http://wiki.alfresco.com/wiki/Content_Store_Selector)并使用 cm:storeSelector 方面并设置其 cm 添加新的内容存储： storeName 属性，可以在商店之间移动/复制内容并管理权限。

第 1 步更多的是配置，第 2 步更多的是自定义。

快乐存档。

问候。

PS随时添加更多方法。

# algorithm - 找到最大距离不大于 K 的树的最大子集

> ID：14973457
> 
> 赞同：3
> 
> 时间：2013-02-20T06:17:42.503
> 
> 标签：algorithm, graph-algorithm

我在 interviewstreet 上遇到了一个名为“Far Vertices”的动态编程问题。

问题是这样的：

> 给你一棵树，它有 N 个顶点和 N-1 条边。您的任务是标记尽可能少的顶点，以使两个未标记顶点之间的最大距离小于或等于 K。您应该将此值写入输出。两个顶点 i 和 j 之间的距离定义为从顶点 j 到达顶点 i 必须经过的最小边数。

我试图从树的每个节点做 dfs，以便找到节点的最大连接子集，以便每对子集的距离不超过 K。但我无法定义状态，以及之间的转换状态。

有没有人可以帮助我？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T06:11:16.990

该问题主要包括找到直径 <= k 的最大子树，然后从 n 中减去它的大小。您可以使用 DP 解决它。

一些有用的观察：

以节点 v (T(v)) 为根的树的直径为：

*   1 如果 n 没有孩子，
*   max(diameter T(c), height T(c) + 1) 如果有一个孩子c，
*   max(max(diameter T(c)) for all children c of v, max(height T(c1) + height T(c2) + 2) for all children c1, c2 of v, c1 != c2)

由于我们关心最大化树的大小和边界树的直径，我们可以翻转上面的内容来建议对每个子树的限制：

*   对于任何以 v 为根的树，感兴趣的子树至多为 k 深。
*   如果 n 是 T(v) 中的一个节点，并且没有离 v <= k 的子节点，则它的最大大小为 1。
*   如果 n 有一个子 c，则直径 <= k 的 T(n) 的最大尺寸为最大尺寸 T(c) + 1。

现在是棘手的一点。如果 n 有多个孩子，我们必须找到所有可能的树大小，这些树的大小是通过为每个孩子分配可用深度而产生的。所以说我们在深度 3，k = 7，我们还有 4 个深度可以玩。如果我们有 3 个孩子，我们可以将所有 4 分配给孩子 1，将 3 分配给孩子 1，将 1 分配给孩子 2，将 2 分配给孩子 1，将 1 分配给孩子 2 和 3，等等。我们必须小心地执行此操作，确保我们没有'不超过直径 k。您可以使用本地 DP 执行此操作。

我们想要为每个节点计算 maxSize(d)，它给出了以该节点为根的树的最大大小，深度为 d，直径 <= k。如上所述，具有 0 和 1 个子节点的节点很容易计算（例如，对于一个子节点，v.maxSize(i) = c.maxSize(i - 1) + 1, v.maxSize(0) = 1） . 具有 2 个或更多子节点的节点，您计算 dp[i][j]，它给出了一个 k-diameter-bound 树的最大大小，其中第 i 个子节点占用了 j 个深度。对于从 1 到 j 的 m，递归是 dp[i][j] = max(child(i).maxSize(m - 1) + dp[i - 1][min(j, k - m)]。d[ i][0] = 1。这就是说，尝试给第 i 个孩子 1 到 j 深度，并将剩余的可用深度给前面的节点。“剩余可用深度”是 j 的最小值，深度我们正在使用，或 k - m，因为给孩子 i 的深度 + 给其余孩子的深度不能超过 k。将 dp 的最后一行的值传输到该节点的 maxSize 表。如果您使用深度受限的 DFS 运行上述程序，它将以正确的顺序计算所有必要的 maxSize 条目，节点 v 的答案是 v.maxSize(k)。然后对树中的每个节点执行一次，答案是找到的最大值。

很抱歉解释的混乱性质。我很难思考，也很难描述。通过几个简单的例子应该会更清楚。我没有计算复杂度，但 n 很小，它在 Scala 中以 0.5 到 1 秒的时间完成了所有测试用例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T07:27:09.190

我可以注意到一些基本的事情（对其他人来说可能非常明显）： 1\. 两个给定顶点之间只有一条可能的路线。2\. 最远的顶点将是只有一个出边的那个。

现在来解决问题。

1.  我将从只有一条边的顶点集开始，并称它们为 EDGE[] 计算 EDGE[] 中顶点之间的距离。这将为您提供 (EDGE[i],EDGE[j],distance ) 值对

2.  对于 EDGE 中距离 > K 的所有顶点对，DO EDGE[i].occur++,EDGE[i].distance = MAX(EDGE[i].distance, distance) EDGE[j].occur++,EDGE[ j].distance = MAX(EDGE[j].distance, distance)

3.  在 EDGE[] 中找到最大（距离）的候选人，用最大（发生）标记

4.  重复直到所有边顶点对的距离小于或等于 K

# javascript - JavaScript 货币转换

> ID：14973458
> 
> 赞同：1
> 
> 时间：2013-02-20T06:17:43.833
> 
> 标签：javascript, currency

我正在学习 JavaScript，我想了解更多关于使用 JavaScript 处理金钱的知识。我知道在对数字进行算术运算之前必须先对数字进行缩放。我想更多地了解的是将金额从一种货币转换为另一种货币。例如，也许美国的货币转换为另一个国家的货币。我的问题是我找不到有关此主题的任何信息。我找到了一些用于货币转换的 API，但我必须先付费才能使用它们。我希望会有类似教程之类的东西，或者可能是针对开发人员的货币转换图表，它清楚地描述了转换。

提前致谢。=P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:26:13.480

我建议你使用 JavaScript + jQuery + AJAX + PHP + MySQL。

由于这是货币兑换的问题，您应该注意汇率的动态变化。所以你应该保留一个更新汇率的数据库。您可以为此使用 MySQL。然后，您可以将参数传递给服务器端脚本服务，如 PHP 或 ASP。此脚本可用于将参数传递给数据库并从中检索数据。jQuery 和 AJAX 可用于将用户输入从 HTML 页面传递到 PHP/ASP 脚本文件。任务完成了！

这里有一些教程。

[http://viralpatel.net/blogs/jquery-ajax-tutorial-example-ajax-jquery-development/](http://viralpatel.net/blogs/jquery-ajax-tutorial-example-ajax-jquery-development/)

[http://www.w3schools.com/jquery/jquery_ajax_intro.asp](http://www.w3schools.com/jquery/jquery_ajax_intro.asp)

[http://www.freewebmasterhelp.com/tutorials/phpmysql](http://www.freewebmasterhelp.com/tutorials/phpmysql)

[http://www.w3schools.com/php/php_mysql_intro.asp](http://www.w3schools.com/php/php_mysql_intro.asp)

[http://www.tizag.com/mysqlTutorial/](http://www.tizag.com/mysqlTutorial/)

希望这可以帮助。

# haskell - 为什么 (a,(b,(c,(d,())))) 中的 (a,b,c,d) 不是糖？

> ID：14973459
> 
> 赞同：37
> 
> 时间：2013-02-20T06:17:51.773
> 
> 标签：haskell, types

很明显，任何 n 元组都可以由一堆嵌套的 2 元组表示。那么为什么它们在 Haskell 中不一样呢？这会破坏什么吗？

使这些类型等效将使在元组上编写函数变得更加容易。例如，您可以只定义一个适用于所有元组的 zip 函数，而不是定义 zip、zip2、zip3 等。

当然，您*可以*使用嵌套的 2 元组，但它很难看，并且没有执行嵌套的规范方法（即我们应该嵌套在左侧还是右侧？）。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-20T07:15:14.343

该类型`(a,b,c,d)`具有与 不同的性能配置文件`(a,(b,(c,(d,()))))`。通常，索引到 n 元组需要`O(1)`，而索引到 n 个嵌套元组的“hlist”需要`O(n)`。

也就是说，您应该查看 Oleg 关于[HLists](http://hackage.haskell.org/package/HList-0.2.3)的经典作品。使用 HLists 需要大量使用类型级编程，而且有些粗略。许多人认为这是不可接受的，并且在早期的 Haskell 中是不可用的。今天表示 HList 的最佳方式可能是使用 GADT 和 DataKinds

```
data HList ls where
  Nil  :: HList '[]
  Cons :: x -> HList xs -> HList (x ': xs) 
```

这提供了规范的嵌套，并允许您编写适用于此类型的所有实例的函数。[您可以使用与printf](http://www.haskell.org/ghc/docs/latest/html/libraries/base-4.6.0.1/Text-Printf.html)`zipWith`中使用的相同技术来实现您的多方式。一个更有趣的难题是为这种类型生成适当的镜头（提示：使用类型级别的自然和类型族进行索引）。

我考虑过编写一个类似 HList 的库，该库使用数组并`unsafeCoerce`在底层获得类似元组的性能，同时坚持通用接口。我没做过，但应该不会太难。

编辑：我想得越多，当我有时间的时候，我就越倾向于一起破解一些东西。Andreas Rossberg 提到的重复复制问题可能可以使用流融合或类似技术来消除。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-02-20T07:34:16.023

Haskell 中的主要问题是嵌套元组由于懒惰而允许附加值。例如，类型`(a,(b,())`由 all `(x,_|_)`or占据`(x,(y,_|_))`，而扁平元组则不是这种情况。这些值的存在不仅在语义上不方便，还会使元组更难优化。

不过，用严格的语言来说，您的建议确实是一种可能性。但它仍然引入了一个性能缺陷：实现仍然希望扁平化元组。因此，在您实际以归纳方式构造或解构它们的情况下，它们将不得不进行大量重复复制。当您使用非常大的元组时，这可能是个问题。

# php - 如何根据 PHP print_r() 给出的信息重建对象

> ID：14973460
> 
> 赞同：2
> 
> 时间：2013-02-20T06:18:00.230
> 
> 标签：php, soap

在使用 PHP SoapClient 调用服务方法后，我得到返回值 $result，它`print_r($result)`给出：

```
stdClass Object
(
    [GetDataRowResult] => stdClass Object
        (
            [FieldValueList] => stdClass Object
                (
                    [FieldValuePair] => Array
                        (
                            [0] => stdClass Object
                                (
                                    [Field] => Name
                                    [Value] => Christmas Party
                                )

                            [1] => stdClass Object
                                (
                                    [Field] => Status
                                    [Value] => 3
                                )

                            [2] => stdClass Object
                                (
                                    [Field] => StartDate
                                    [Value] => 18/12/2009 12:00 AM
                                )

                            [3] => stdClass Object
                                (
                                    [Field] => EndDate
                                    [Value] => 01/01/1900 12:00 AM
                                )

                        )

                )

            [Message] => 
            [Success] => 1
        )

) 
```

我想使用状态值做某事，但我不知道如何获得该值。~~我试过`$result->GetDataRowResult->FieldValueList->FieldValuePair[1]->Value`了，它没有用，这是我所预料的。~~ **编辑**：它确实有效，我在代码中还有另一个拼写错误导致它出错

如何获得所需的值，是否有更好的方法将整个输出重构为 PHP 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T06:19:45.440

用这个

```
$result->GetDataRowResult->FieldValueList->FieldValuePair->1->Value 
```

# knockout.js - knockoutjs 在编辑后更新了表格

> ID：14973465
> 
> 赞同：1
> 
> 时间：2013-02-20T06:18:49.337
> 
> 标签：knockout.js

更新完成后如何更新表。这是我的示例代码。如果单击更新，则表不会更新。

```
 self.updateCategory = function(category){
        var r = confirm("Are you sure you want to update this category " + self.ID() + "?");
        if(r==true){
            //code here?
        }
    }; 
```

[http://jsfiddle.net/comfreakph/2TrjF/3/](http://jsfiddle.net/comfreakph/2TrjF/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T08:11:34.657

它没有更新，因为您没有代码:-)

```
self.updateCategory = function(category) {
   var r = confirm("Are you sure you want to update this category " + self.ID() + "?");
   if(r == true) {
      // Code here?
   }
}; 
```

如果您问如何，那么在“// Code here”部分中，您需要从您保存的 ID 中找到数组中的类别，然后从 self.Name 和 self.Remarks 属性中设置其属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T08:12:05.233

这是一个粗略的解决方案，但似乎可行> 我尝试根据 ID 查找原始元素，然后用从数据创建的新元素替换。
我相信有更有效的方法可以找到原始数据，但想法是您可以对可观察数组进行替换。

```
self.updateCategory = function (category) {
    var r = confirm("Are you sure you want to update this category " + self.ID() + "?");
    if (r == true) {
        var index = -1; 
        $.each(self.Categories(), function (i, item) {
            if (this.ID === category.ID()) {
                index = i;
            }
        });
        var original = self.Categories()[index];
        console.log(original.CreatedAt);
        category.Name = self.Name();
        category.Remarks = self.Remarks();
        category.CreatedAt = original.CreatedAt;

        self.Categories.replace(original, category);
        self.Name("");
        self.Remarks("");
        self.isSelected(true);
        }
    }; 
```

检查这个小提琴：http: [//jsfiddle.net/2TrjF/5/](http://jsfiddle.net/2TrjF/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T13:40:50.953

您需要做几件事。首先，使用[淘汰映射插件](http://knockoutjs.com/documentation/plugins-mapping.html)，然后使用该插件设置 Categories 属性：

```
self.Categories = ko.mapping.fromJS(category); 
```

您的代码使数组可观察，但不是其中的每个项目。通过使用映射插件，您可以使每个类别及其所有属性都可观察。

然后您需要更新您的更新函数以获取原始类别并*更新*其上的值：

```
self.updateCategory = function (category) {
    var r = confirm("Are you sure you want to update this category " + self.ID() + "?");
    if (r == true) {
    var original = ko.utils.arrayFirst(self.Categories(), function (item)
    {
        return category.ID() == item.ID();
    });
        console.log(original.CreatedAt());
        original.Name(self.Name());
        original.Remarks(self.Remarks());

        self.Name("");
        self.Remarks("");
        self.isSelected(true);
        }
    }; 
```

您应该会发现，当您更改值时，表中的行会自动更新。

[jsFiddle 可用](http://jsfiddle.net/2TrjF/10/)。

# iphone - Iphone 应用程序中的 Wifi 连接

> ID：14973466
> 
> 赞同：-1
> 
> 时间：2013-02-20T06:18:51.277
> 
> 标签：iphone

如何在应用程序中不断检查 wifi 连接的信号。如果信号较少，必须向服务器发送通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:56:36.593

要获取网络状态，您应该参考 Apple 的示例代码 Reachability

[http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)

我想你会找到你需要的一切。

# asp.net-mvc - 使用 MVC4 Web API 的 Nhibernate 中的 XML 序列化错误

> ID：14973470
> 
> 赞同：0
> 
> 时间：2013-02-20T06:19:17.427
> 
> 标签：asp.net-mvc, nhibernate, asp.net-web-api

您好，我们正在使用 NHibernate 在 MVC4 中创建一个 Web API。但是当我们调用 Web API 时，它会抛出错误。这是错误。

```
<Error><Message>An error has occurred.</Message><ExceptionMessage>The 'ObjectContent`1' type failed to serialize the response body for content type 'application/xml; charset=utf-8'.</ExceptionMessage><ExceptionType>System.InvalidOperationException</ExceptionType><StackTrace/><InnerException><Message>An error has occurred.</Message><ExceptionMessage>Type 'NHibernate.Collection.Generic.PersistentGenericSet`1[[MvcAngular.Models.BankAccount, MvcAngular, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]' with data contract name 'ArrayOfBankAccount:http://schemas.datacontract.org/2004/07/MvcAngular.Models' is not expected. Consider using a DataContractResolver or add any types not known statically to the list of known types - for example, by using the KnownTypeAttribute attribute or by adding them to the list of known types passed to DataContractSerializer.</ExceptionMessage><ExceptionType>System.Runtime.Serialization.SerializationException</ExceptionType><StackTrace>   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeAndVerifyType(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, Boolean verifyKnownType, RuntimeTypeHandle declaredTypeHandle, Type declaredType)
   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithXsiType(XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle objectTypeHandle, Type objectType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle, Type declaredType)
   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)
   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerializeReference(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)
   at WriteCustomerInfoToXml(XmlWriterDelegator , Object , XmlObjectSerializerWriteContext , ClassDataContract )
   at System.Runtime.Serialization.ClassDataContract.WriteXmlValue(XmlWriterDelegator xmlWriter, Object obj, XmlObjectSerializerWriteContext context)
   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.WriteDataContractValue(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle declaredTypeHandle)
   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithoutXsiType(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle declaredTypeHandle)
   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)
   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerializeReference(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)
   at WriteArrayOfCustomerInfoToXml(XmlWriterDelegator , Object , XmlObjectSerializerWriteContext , CollectionDataContract )
   at System.Runtime.Serialization.CollectionDataContract.WriteXmlValue(XmlWriterDelegator xmlWriter, Object obj, XmlObjectSerializerWriteContext context)
   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.WriteDataContractValue(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle declaredTypeHandle)
   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeAndVerifyType(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, Boolean verifyKnownType, RuntimeTypeHandle declaredTypeHandle, Type declaredType)
   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithXsiTypeAtTopLevel(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle originalDeclaredTypeHandle, Type graphType)
   at System.Runtime.Serialization.DataContractSerializer.InternalWriteObjectContent(XmlWriterDelegator writer, Object graph, DataContractResolver dataContractResolver)
   at System.Runtime.Serialization.DataContractSerializer.InternalWriteObject(XmlWriterDelegator writer, Object graph, DataContractResolver dataContractResolver)
   at System.Runtime.Serialization.XmlObjectSerializer.WriteObjectHandleExceptions(XmlWriterDelegator writer, Object graph, DataContractResolver dataContractResolver)
   at System.Runtime.Serialization.XmlObjectSerializer.WriteObjectHandleExceptions(XmlWriterDelegator writer, Object graph)
   at System.Runtime.Serialization.DataContractSerializer.WriteObject(XmlWriter writer, Object graph)
   at System.Net.Http.Formatting.XmlMediaTypeFormatter.<>c__DisplayClass7.<WriteToStreamAsync>b__6()
   at System.Threading.Tasks.TaskHelpers.RunSynchronously(Action action, CancellationToken token)</StackTrace></InnerException></Error> 
```

我们在 WebApi 中成功获取了结果。这是Classess的架构。我们在父类中使用了 ISET

```
public class CustomerInfo
    {

        int _CustomerId;
        public virtual int CustomerId
        {
            get { return _CustomerId; }
            set { _CustomerId = value; }
        }

        string _Name;
        [Required]
        public virtual string Name
        {
            get { return _Name; }
            set { _Name = value; }
        }

        public virtual ISet<BankAccount> BankAccounts { get; set; }

        public virtual void SetBankAccount(ISet<BankAccount> bankact)
        {
            this.BankAccounts = bankact;
        }

        public virtual ISet<BankAccount> GetBankAccounts()
        {
            return this.BankAccounts;
        }

    } 
```

这是 Web API 的 Get 方法

```
 public IList<CustomerInfo> Get()
        {
            CustomerInfoDAL cd = new CustomerInfoDAL();
            var lst = cd.GetCustomer();
            return lst;
        } 
```

我们在 lst 中成功获得了结果。但是在通过 Web api 显示的同时，它向我们显示了这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:18:15.767

实际上，序列化不支持 Nhibernate ISET<>。我们必须通过 JSON 来获取它。即您可以使用 Fiddler 来查看结果。

# jquery - 的“坐标”属性 标签不是“左、上、右、下”格式。Firefox 中的错误

> ID：14973472
> 
> 赞同：1
> 
> 时间：2013-02-20T06:19:24.430
> 
> 标签：jquery, firefox, imagemap

当我尝试在 Firefox 中运行我的代码时出现此错误。它在 IE 中运行良好。实际上我正在尝试通过定义图像映射来实现图像的翻转效果

```
<map name="planetmap"> 
    <area class="a1" shape="rect" coords="420,120,380,100" alt="Ring" href="#"/> 
    <area class="a2" shape="rect" coords="300,330,400,250" alt="Ring" href="#"/> 
    <area class="a3" shape="rect" coords="610,190,580,270" alt="Ring" href="#"/> 
    <area class="a4" shape="rect" coords="450,250,550,400" alt="Ring" href="#"/>
</map> 
```

当我将鼠标悬停在图像上时，请帮助我解决此问题，Firefox 中没有任何内容打开。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T08:27:25.997

看看错误。“左、上、右下”：在图像地图坐标系中，“0,0”为左上角。所以第一个值必须小于第三个，第二个值必须小于第四个。

```
<area class="a1" shape="rect" coords="420,120,380,100" alt="Ring" href="#"/>
<area class="a2" shape="rect" coords="300,330,400,250" alt="Ring" href="#"/>
<area class="a3" shape="rect" coords="610,190,580,270" alt="Ring" href="#"/>
<area class="a4" shape="rect" coords="450,250,550,400" alt="Ring" href="#"/> 
```

在第一个中，380 < 420 和 100 < 120。两者都是错误的。在第二个中，250 < 330。在第三个中，580 < 610。第四个看起来正确。

四个区域中的三个有无效数字，并且通常甚至彼此不一致。

# python - 无法制作一个好的 ftp 检查 python 程序

> ID：14973475
> 
> 赞同：1
> 
> 时间：2013-02-20T06:19:35.430
> 
> 标签：python, datetime, ftp, uploading, download

请多多包涵。我开始使用 python 才一周。继承人的问题：我想连接到 FTP 服务器。假设我的 ftp 和本地目录上的文件结构是相同的。我希望我的 python 程序执行以下操作：

1> 在运行程序时，它应该上传所有不在服务器上但在我本地的文件（只上传丢失的文件 - 不替换所有文件）。说，我添加了一个新目录或一个新文件，它应该按原样上传到服务器上。2> 然后它应该检查本地和服务器上文件的修改时间，并告知哪个是最新的。

现在，我制作了两个程序：

1>一个程序，将所有文件从本地上传到服务器，原样。我宁愿它检查丢失的文件，然后只加载丢失的文件夹。不是全部替换。2> 第二个程序将列出本地的所有文件，使用 os.walk 并将所有文件上传到服务器上，而不创建正确的目录结构。全部复制到服务器的根目录。然后它还会检查修改时间。

我现在正试图将这两个模块连接成一个完美的，可以满足我的所有需求。任何能够真正查看这些代码并尝试将它们加入我想要做的事情的人，都会是完美的。对不起，这么痛苦！！

PS：我可能没有以简单的方式完成所有事情！

代码 1：

```
import sys

from ftplib import FTP

import os

def uploadDir(localdir,ftp):

    """

    for each directory in an entire tree

    upload simple files, recur into subdirectories

    """

    localfiles = os.listdir(localdir)

    for localname in localfiles:

        localpath = os.path.join(localdir, localname)

        print ('uploading', localpath, 'to', localname)
        if not os.path.isdir(localpath):

            os.chdir(localdir)

            ftp.storbinary('STOR '+localname, open(localname, 'rb'))

        else:

            try:

                ftp.mkd(localname)

                print ('directory created')

            except:

                print ('directory not created')

            ftp.cwd(localname)             # change remote dir

            uploadDir(localpath,ftp)                  # upload local subdir

            ftp.cwd('..')                  # change back up

            print ('directory exited')

def Connect(path):
  ftp = FTP("127.0.0.1")
  print ('Logging in.')
  ftp.login('User', 'Pass')
  uploadDir(path,ftp)

Connect("C:\\temp\\NVIDIA\\Test") 
```

代码 2：

```
import os,pytz,smtplib
import time
from ftplib import FTP
from datetime import datetime,timedelta
from email.mime.text import MIMEText

def Connect_FTP(fileName,pathToFile):                       path from the local path
(dir,file) = os.path.split(fileName)

fo = open("D:\log.txt", "a+")                        # LOgging Important Events
os.chdir(dir)
ftp = FTP("127.0.0.1")
print ('Logging in.')
ftp.login('User', 'Pass')
l=dir.split(pathToFile)
print(l[1])

if file in ftp.nlst():                                          
print("file2Check:"+file)
    fo.write(str(datetime.now())+":  File is in the Server. Checking the Versions....\n")
    Check_Latest(file,fileName,ftp,fo)
else:
    print("File is not on the Server. So it is being uploaded!!!")
    fo.write(str(datetime.now())+":  File is NOT in the Server. It is being Uploaded NOW\n")
    ftp.storbinary('STOR '+file, open(file, 'rb'))

print("The End")

def Check_Latest(file2,path_on_local,ftp,fo):                               # Function to check the latest file, USING the "MOdified TIme"
LOcalFile = os.path.getmtime(path_on_local)
dloc=datetime.fromtimestamp(LOcalFile).strftime("%d %m %Y %H:%M:%S")
print("Local File:"+dloc)
localTimestamp=str(time.mktime(datetime.strptime(dloc, "%d %m %Y %H:%M:%S").timetuple())) # Timestamp to compare LOcalTime

modifiedTime = ftp.sendcmd('MDTM '+file2)                             # Using MDTM command to get the MOdified time.
IST = pytz.timezone('Asia/Kolkata')
ServTime=datetime.strptime(modifiedTime[4:], "%Y%m%d%H%M%S")

tz = pytz.timezone("UTC")
ServTime = tz.localize(ServTime)
j=str(ServTime.astimezone(IST))                                       # Changing TimeZone
g=datetime.strptime(j[:-6],"%Y-%m-%d %H:%M:%S")
ServerTime = g.strftime('%d %m %Y %H:%M:%S')
serverTimestamp=str(time.mktime(datetime.strptime(ServerTime, "%d %m %Y %H:%M:%S").timetuple())) # Timestamp to compare Servertime

print("ServerFile:"+ServerTime)

if serverTimestamp > localTimestamp:
  print ("Old Version on The Client. You need to update your copy of the file")
  fo.write(str(datetime.now())+":  Old Version of the file "+file2+" on the Client\n")
  return
else:
  print ("The File on the Server is Outdated!!!New COpy Uploaded")
  fo.write(str(datetime.now())+": The server has an outdated file: "+file2+". An email is being generated\n")
  ftp.storbinary('STOR '+file2, open(file2, 'rb'))

def Connect(pathToFile):

for path, subdirs, files in os.walk(pathToFile):
 for name in files:
    j=os.path.join(path, name)
    print(j)
    Connect_FTP(j,pathToFile) 
```

Connect("C:\temp\NVIDIA\Test")

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T07:17:26.707

可能[这个脚本](http://code.google.com/p/ftpsync2d/)会有用。

# javascript - 用于提交表单的 jQuery 插件

> ID：14973477
> 
> 赞同：0
> 
> 时间：2013-02-20T06:19:48.367
> 
> 标签：javascript, jquery, jquery-plugins

我在 asp Classic 中有这样的表格..

```
<form method="post" name="AddItemForm" id="AddItemForm" action="/files/includes/CartControl.asp" style="display:inline;"> 
```

// 一堆隐藏字段。

然后是提交按钮。

表单的操作采用所有隐藏字段，然后在处理它们后将用户**重定向**到 CART 页面。

现在我想要做的是....我希望用户单击“添加到购物车”按钮，但是我希望用户在表单提交到新窗口时留在产品页面上（不是 javascript 新窗口......类似于灯箱/彩盒/花式盒 DIV 等）。

我查看了许多 jQuery 插件，但没有得到满意的答案……哪个插件最适合我的情况？任何简单的例子？

基本上我想提交到一个新的覆盖 div 并在该 DIV 中将用户重定向到一个新页面以显示产品信息。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T08:46:57.310

您似乎正在寻找一些用于异步表单提交的功能。有一个为表单提供 AJAX 功能的[jQuery AJAX 表单插件。](http://malsup.com/jquery/form/)你会有类似的东西：

```
$('#AddItemForm').submit( function() {
    // Submit asynchronously
    $( this ).ajaxSubmit( function() {
        // Form processing is done
        // Redirect to the shopping cart page
    });

    // Show a modal or a fancy "please wait" message

    // Prevent default submission
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T06:29:33.860

最简单的方法（在我看来）是将目标属性添加到将打开新窗口的表单中，而当前页面不会更改...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T06:46:09.273

[您可以在此答案](https://stackoverflow.com/questions/1200266/submit-a-form-using-jquery)中找到一些信息，其中一个答案的代码：

```
$('input#submitButton').click( function() {
    $.post( 'some-url', $('form#myForm').serialize(), function(data) {
         ... do something with response from server
       },
       'json' // I expect a JSON response
    );
}); 
```

在“做一些响应”中，您可以获取数据或 url 并将其加载到覆盖 div 中。如果是 URL，您可以使用 jquery .load ：

```
$('#result').load('ajax/test.html'); 
```

如果它是 html（或您用 html 包装的数据），只需执行

```
$('#result').html(theHTML) 
```

# javascript - 如何使用 getJSON 向服务器发送键盘数据

> ID：14973478
> 
> 赞同：0
> 
> 时间：2013-02-20T06:19:51.837
> 
> 标签：javascript, jquery, getjson

我正在使用 getJSON 向服务器发送请求并获取响应。当我向服务器发送一串文本（如 'firstname=x'）时，它工作正常，但是当我使用 '$('#input').val()' 作为服务器的输入数据时，它不返回任何响应.

这是jquery代码

```
<!DOCTYPE html>
 <html>
  <head>
    <title>Request in getJSON</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <script src="jquery-1.8.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
      $(document).ready(function(){
              $('#button').click(function(){
                 var req=$('#query').val();
                 var data='firstname=req';
                 $.getJSON('http://..../server.php?callback=?', data,function(res){                              
                    alert('Your name is '+res.fullname);
                 });//getJSON    
              }); //onclick
     });//on document ready
    </script>
</head>
<body>
<h1> Enter Name </h1>
<input type='text' id='query' />
<input type="button" id="button" value="submit" />
<div id="results"></div>

</body>
</html> 
```

希望你能帮助我 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:40:24.983

试试这个：

```
 $(document).ready(function(){
     $('#button').click(function(e){
         e.preventDefault();
         var data={firstname : $('#query').val()}; //<--------try like this
         $.getJSON('http://..../server.php?callback=?', data,function(res){
             alert('Your name is '+res.fullname);
         });//getJSON    
     }); //onclick
 });//on document ready 
```

# scala - Scala：返回子类型的类型化方法

> ID：14973483
> 
> 赞同：0
> 
> 时间：2013-02-20T06:20:24.133
> 
> 标签：scala, currying

我正在尝试编写一个返回部分应用函数的函数，该函数返回特定抽象类的子类型。

我有一个抽象类

```
abstract class IsoBoxReader 
```

我有一个派生类

```
class FileTypeBoxReader( val box, val isoReader ) extends IsoBoxReader 
```

我想做这样的事情，但我不确定它是否可能：

```
def recognize[ T <: IsoBoxReader ]( box ): (IsoReader) => T =
{
    box.boxType match {
      case "ftyp" => ( isoReader: IsoReader ) => new FileTypeBoxReader( box, isoReader )
      case _ => // return some other box type
    }
} 
```

上述基于一条信息的方法返回一个部分应用的函数，该函数可以在以后剩余必要参数可用的地方使用。

你们中的一些人可能已经猜到我正在尝试根据 ISO 规范解析媒体 Iso 文件。我这样做基本上是为了体验，这似乎是一个有趣的 OO 和功能设计问题。

要创建一个特定的盒子阅读器，我需要一个基本盒子，它是标题信息和一个阅读器对象，它基本上可以读取特定的文件。我想编写一个给定盒子的函数（它具有盒子类型），我得到一个部分应用的函数，它返回 IsoBoxReader 的子类型。这样，调用者可以使用其 IsoReader 版本（文件读取，有状态对象）创建实际实例。编译器抱怨模式匹配，特别是调用类型不匹配。

它说找到 FileTypeBoxReader 但预期 T

但是，基于 Type 参数， FileTypeBoxReader 是不是一个有效的返回值，因为它是 IsoBoxReader 的子类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T06:38:48.327

试试这个：

```
def recognize( box ): (IsoReader) => IsoBoxReader =
{
    box.boxType match {
      case "ftyp" => ( isoReader: IsoReader ) => new FileTypeBoxReader( box, isoReader )
      case _ => // return some other box type
    }
} 
```

`def recognize[ T <: IsoBoxReader ]( box ): (IsoReader) => T`应该适用于作为子类型的任何特定类型`IsoBoxReader`，这在这种情况下显然是不可能的。换句话说，由于实际类型是在运行时由 确定的，因此无法在类型`box.boxType`的调用点**静态**确定。所以在这里使用类型参数是不对的。`recognize()``T`**`T`**

# c# - 如何格式化Excel工作表？

> ID：14973484
> 
> 赞同：-3
> 
> 时间：2013-02-20T06:20:25.773
> 
> 标签：c#, windows, excel, c#-4.0

我正在使用 Microsoft.ACE.OleDb 将数据写入 excel。我只想使用 Microsoft.ACE.OleDb 来格式化工作表？我的要求是我不想使用像 Microsoft.InterOp 和 EPPlus 这样的第三方库。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T06:26:01.200

不，你不能。`Microsoft.ACE.OleDb`允许您操作数据，而不是格式化单元格和文本

如果您不想使用 Interop.Excel，您应该查看[后期绑定](http://support.microsoft.com/kb/302902)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T06:59:49.193

创建具有格式的真实 Excel 工作表的唯一可靠方法是使用 Aspose.Cells for .NET。

CodePlex 上还有 ExcelPackagePlus，它是开源的，但它有一个错误，当您的文本包含无效的 www/mail-Link 时，它会阻止读取或写入工作集，例如包含 @ 符号的密码，excel 错误地解释了这一点作为链接。

还有carlosag.excelwriter，但它并没有真正创建一个excel文件，它创建一个可以被excel读取和显示的XML文件。然而，Excel 2010 会发出警告“不是有效的 excel 文件”，这可能会吓跑用户。

我不建议使用 ACE.OleDb，你会遇到 32/64 位问题，因为 ACE 驱动程序已经在生命支持中并且已弃用，因此在 64 位窗口上不可用（如果你有 64 位 excel 也很重要） .

出于同样的原因，我不会使用 Interop.Excel。

# android - 如何为 Android 创建年度日历视图

> ID：14973485
> 
> 赞同：0
> 
> 时间：2013-02-20T06:20:33.733
> 
> 标签：android

我想为android创建年度日历视图，如下图所示，
请分享任何示例或指导我如何做
![在此处输入图像描述](../Images/2f4ea3cfe3526e0b958ed4bb932f9b44.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T06:54:32.123

您可以创建一个滚动视图。在其中，您将有一个 gridView，其列数设置为 2。然后您将为该 gridView 创建一个适配器。在此适配器的 getView() 方法中，您可以每次创建一个新的 gridView 来显示月份中的日期，并将 gridView 标题设置为月份-年份值。在内部 gridView 中，您可以将项目数设置为 42，将列数设置为 7。

它会是这样的：

```
<ScrollView>
    <GridView android:numberOfColumns="2" />
</ScrollView> 
```

内部 gridView 看起来像：

```
<GridView android:numberOfColumns="7" /> 
```

getView() 就像：

```
public getView() {
    GridView monthView = new GridView(context).Layoutinflator(R.layout.innerGrid);
} 
```

# c++ - 如何使用opencv检测图像中的文本样式？

> ID：14973487
> 
> 赞同：3
> 
> 时间：2013-02-20T06:20:35.457
> 
> 标签：c++, opencv

目前我正在研究opencv。我有一张带文字的图片。我想找出文本的样式（粗体，斜体）。我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:30:02.120

你能做的是（假设一个字母一个字母的方法）

*   使用分割技术，您首先分割出字母
*   使用分段字母，与您自己的预分段/预过滤字母数据集进行比较，以找到字体样式。
*   可以使用各种功能进行比较，SIFT、SURF、BRISK、Harris 角、模板匹配，或者您自己想出一些东西。我最好的猜测是使用 HAAR 功能和培训。
*   一旦你获得了一组字母的特征，就可以使用不同的技术（如 KNN、欧几里德距离等）将最接近的候选者与预过滤的数据集进行匹配。如果你使用 HAAR 特征，OpenCV 可以在检索中提供很大帮助。

最终你可能会结束做一些包括字体样式的 OCR。

OpenCV 有一组内置的特征描述符，你可以[在这里阅读](http://docs.opencv.org/doc/tutorials/features2d/table_of_content_features2d/table_of_content_features2d.html)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-07T20:28:40.160

这可能会对你有所帮助，我知道这并不准确。但这对于我的类似项目就足够了。“Typefont 是一个实验性的库，可以检测图像中文本的字体。” [https://github.com/Vasile-Peste/Typefont](https://github.com/Vasile-Peste/Typefont)

# sql-server - 根据 SQL Server 2008 中的条件从数据库查询中排除某些列

> ID：14973488
> 
> 赞同：-1
> 
> 时间：2013-02-20T06:20:35.633
> 
> 标签：sql-server, sql-server-2008

情况：

一个`profile`表（大约 30 多列）具有用户保存的值。另一个表具有相同的列，指定每一行的访问级别（隐私 - 例如`Friend`等`Public`）。

当用户希望查看某个用户的个人资料时，查询应该根据他/她与该人的关系来检查查询用户可以查看哪些列。

请提出一种有效执行此任务的有效方法..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:16:03.590

为每种隐私类型创建单独的视图。每个视图应该只有允许根据隐私查看的列。然后为当前隐私使用适当的视图。

# oracle - 阻止应用程序访问数据库

> ID：14973491
> 
> 赞同：0
> 
> 时间：2013-02-20T06:20:39.587
> 
> 标签：oracle, exe

我们有一个终端服务器，它有我们应用程序的两个副本：一个实时版本和一个测试版本。

这些是用户桌面上的 2 个图标。现在，当您启动应用程序时，您输入应用程序连接到的 oracle 数据库的名称。

我们希望防止用户在使用 TEST 图标时访问生产数据库，并防止用户在使用 PROD 图标时访问 TEST 环境。

不幸的是，我们不能通过应用程序做到这一点，而且我们不想走让供应商修改应用程序的路线。该应用程序使用单个 tnsnames.ora 文件来连接测试版本和 prod 版本的数据库，因此我们无法更改它（除非有使用多个的方法？）。

我在想我们可以有一个本地防火墙来阻止测试应用程序访问实时服务器（只是阻止连接），但目前，它们都在同一台服务器上！

那么，任何人都可以想出一种方法来阻止某个应用程序访问 Oracle 数据库吗？应用程序 EXE 具有相同的名称，但它从不同的路径运行，具体取决于它是测试版本还是生产版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:40:46.717

有一个名为 v$session 的视图
，下面的查询显示了任何会话信息

```
select username,program
from   v$session 
```

您可能有一个列出受限（或允许）程序名称的表格

```
CREATE TABLE RESTRICTED_PROGRAMS(
PROGRAM_NAME     VARCHAR2(64))

INSERT INTO RESTRICTED_PROGRAMS VALUES ('TEST.exe');
COMMIT; 
```

您可以使用下面的脚本创建一个***AFTER LOGON ON TRIGGER***

```
 CREATE OR REPLACE TRIGGER logon_audit
  AFTER LOGON ON database
DECLARE
  v_program            VARCHAR2(100);
BEGIN
    SELECT program into v_program;
      FROM v$session
     WHERE audsid = userenv('sessionid');

  for x in (SELECT * FROM RESTRICTED_PROGRAMS) loop
    IF upper(v_program) == upper(x.PROGRAM_NAME) THEN
      RAISE_APPLICATION_ERROR(-20001,
                              'You are not allowed to login using ' ||
                              v_program);
    end if;
  end loop;
END; 
```

如果用户可以使用应用程序 X.exe 连接到您的数据库，那么如果他们将 Y.exe 重命名为 X，那么他们仍然在其中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T09:56:38.017

由于您可以控制终端服务器上的环境，因此一个相当简单的选择是将应用程序包装在一个批处理文件中，强制它使用受限制的`tnsnames.ora`.

创建两个目录，例如`test_tns_admin`和`live_tns_admin`。将您的副本`tnsnames.ora`放在每个目录中，但对其进行编辑，以便每个目录只有一个目标数据库的 TNS 别名。

创建两个批处理文件，例如`live.bat`和`test.bat`. 在每一个中，将`TNS_ADMIN`admin 变量设置为指向适当的目录，然后启动真正的应用程序。所以`test.bat`可能看起来像：

```
::Batch wrapper for the TEST application
@set TNS_ADMIN="\path\to\test_tns_admin"
@"\path\to\real\application.exe" 
```

...并且`live.bat`是相同的，但指向另一个目录。您可以将批处理文件的快捷方式放在桌面而不是实际应用程序上。当其中一个运行并且应用程序启动时，这`TNS_ADMIN`意味着它会选择 cut-down `tns_names.ora`，因此只会`TEST`识别 TNS 别名。终端服务器或数据库上的其他任何内容都不会受到影响。

您甚至不需要两个新`tnsnames.ora`文件；您可以`TEST`从现有系统范围的别名中删除别名并单独保留实时应用程序，仅用批处理文件替换测试启动器 - 这可能更可取，因为未触及实时，但取决于您希望如何管理它，并且让它们都以相同的方式工作是否会更清楚。

# javascript - 为什么这个 div 只有一小部分可见？

> ID：14973496
> 
> 赞同：0
> 
> 时间：2013-02-20T06:21:04.860
> 
> 标签：javascript, css, html, visibility

我正在运行一个测试 javascript/CSS 应用程序，并且有一个 div 表现出非常奇怪的行为。我无法为我的生活弄清楚发生了什么。

将您的浏览器指向[http://korhal.andrewmao.net:9294/](http://korhal.andrewmao.net:9294/)，然后查看 DOM 中的`div.payment`( `div`with class `payment`)。

这个 div 包含一个图像和一些文本，但除了显示在 Chrome 和 FF 上但不显示在 IE9 上的一小段文本之外，它是不可见的。我还没有为 DOM 的这一部分设置样式，但我什至无法弄清楚为什么它是完全不可见的。检查应用的 CSS 似乎没有发现任何 z-index、透明度或隐藏问题。有什么建议么？

抱歉，此代码难以理解，此链接可能会更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T06:35:39.417

由于`.background`你的位置是固定的，它会排在最前面，所以你必须添加 `position:relative`到 `div.payment`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-20T06:47:41.087

用这个

```
.payment img {
    float: left;
    position: relative;
    z-index: 1;
} 
```

和

```
.payment p {
    float: left;
    position: relative;
    z-index: 1;
} 
```

![在此处输入图像描述](../Images/3e3ef69865ddf8b276557fdc1e9825e1.png)

# css - 在父级内排列 div - 将右 div 对齐到顶部

> ID：14973497
> 
> 赞同：4
> 
> 时间：2013-02-20T06:21:09.460
> 
> 标签：css, html

我有以下内容，我希望正确的 div 与父级的顶部对齐，但这对我来说并没有发生..

```
<div id="container">
    <div id="center">Center</div>
    <div id="left">Left text here...</div>
    <div id="right"><img src="image.png" width="75" height="75" /></div>
</div> 
```

CSS

```
#container{
  width:50%;
  overflow:auto;
  border-style:solid;
  border-width:1px;
  border-color:#aaaaaa;
  vertical-align: top; 
}

#left{
  width:100px;
  border-style:solid;
  border-width:1px;
  border-color:#aaaaaa;
}

#right{
  float:right;
  width:100px;
  text-align:right;
  vertical-align: top; 
  border-style:solid;
  height:100px;
  width:100px;
  border-width:1px;
  border-color:#aaaaaa;
}

#center{
  float:left;
  padding-bottom: 10px;
  width:100px;
  border-style:solid;
  border-width:1px;
  border-color:#aaaaaa;
} 
```

小提琴[http://jsfiddle.net/w3Gcb/](http://jsfiddle.net/w3Gcb/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T06:29:42.613

如果您将`left`div 与 div交换`right`，则`right`div 会转到顶部：
**[Fiddle](http://jsfiddle.net/w3Gcb/1/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T06:29:49.023

```
<div id="container">
 <div id="right"><img src="image.png" width="57" height="57" /></div>
 <div id="center">Centre</div>
 <div id="left">Left text here...</div>

</div> 
```

在 CSS 中

```
#right{
    float:right;
    width:100px;
    text-align:right;
    vertical-align: top; 
    border-style:solid;
    height:100px;
    width:100%;
    border-width:1px;
    border-color:#aaaaaa;
} 
```

试试这个...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T06:31:15.580

再添加一个 div，如下代码：

```
<div id="container">
   <div class="mid">
<div id="center">Centre</div>
<div id="left">Left text here...</div>
    </div>
<div id="right"><img src="image.png" width="57" height="57" /></div>
</div> 
```

并将 CSS 提供给中产阶级，如下所示：

```
.mid{
    float:left;
} 
```

这将正常工作。

# php - PHP ping，甚至 1 个请求超时

> ID：14973498
> 
> 赞同：1
> 
> 时间：2013-02-20T06:21:10.123
> 
> 标签：php, ping

我一直在使用下面的脚本，但是，我希望它 ping 3-4 次，并且在 3-4 次内，如果它甚至有一个请求超时，我希望 php 返回失败。

这是我正在使用的脚本：

```
 <?php

function pingAddressHasNeverFailed($tries) {
    for ($i = 0; $i < $tries; $i++) {
        $pingresult = shell_exec("ping -c 1 www.google.com", $outcome, $status);
        if ($status != 0)
            return false;
    }
    return true;
}

if (pingAddressHasNeverFailed(3)) {
    echo "uoc gi";
}
?> 
```

如果可以的话请帮忙，在此先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T06:27:38.210

在这种情况下，您需要执行命令 n （n 是尝试次数）次。例如：

```
function pingAddressHasNeverFailed($tries) {
    $outcome = array();
    $status = -1;

    for ($i = 0; $i < $tries; $i++) {
        $pingresult = exec("/bin/ping -n 1 www.google.com", $outcome, $status);
        if ($status != 0)
            return false;
    }
    return true;
} 
```

用法：

```
if (pingAddressHasNeverFailed(3)) {
    //do something useful
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T06:52:26.947

如果任何 ping 失败（在一组中），它不会`0%`在输出中出现（即`0%`丢包），这对于 Linux 和 Windows 是相同的：

```
function ping($host, $times = 3)
{
  exec("/bin/ping -c 3 $host", $out, $status);

  return $status === 0 && false !== strpos(join('', $out), '0%');
}

if (ping('www.google.com)) {
  echo "yay\n";
} else {
  echo "oh dear\n";
} 
```

您可能需要调整`ping`参数以适应您的环境并确保主机名已清理。

# mvvm - xamgrid celldoubleclicked 事件 - Silverlight MVVM

> ID：14973499
> 
> 赞同：0
> 
> 时间：2013-02-20T06:21:12.147
> 
> 标签：mvvm, silverlight-4.0

> 我有一个 xamgrid，当用户 > 双击 xamgrid 单元格（事件：celldoubleclicked）时，我需要调用我的 viewmodel 命令来执行一些操作。如何使用 >MVVM 处理这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T07:14:03.353

您可以使用 MvvmLight 中的 EventToCommand[触发器](http://mvvmlight.codeplex.com/)。

```
<ig:XamGrid>
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="CellDoubleClicked">
            <cmd:EventToCommand Command={Binding MyCommand}"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>
</ig:XamGrid> 
```

或者 Blend sdk 中的 InvokeCommandAction：

```
<ig:XamGrid>
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="CellDoubleClicked">
            <i:InvokeCommandAction Command={Binding MyCommand}"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>
</ig:XamGrid> 
```

# ios - 将图像保存在 App Directory 中，而不是转到相册。目标 C iOS

> ID：14973501
> 
> 赞同：1
> 
> 时间：2013-02-20T06:21:22.163
> 
> 标签：ios, objective-c, xcode, camera

您好，我有一个可以拍照但不保存的应用程序。我知道如何将图像保存到相册，但我需要将图像转到应用程序的目录并且不会显示在照片库中。我已经搜索过了，但我没有找到一个可以工作的。`UIImageView`当我打开我的应用程序时，我还需要该图像。这是我的代码：

**视图控制器.h**

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController <UIImagePickerControllerDelegate, UINavigationControllerDelegate> {
    UIImagePickerController *picker;
    UIImagePickerController *picker2;
    UIImage *image;
    IBOutlet UIImageView *imageView;
}

-(IBAction)TakePhoto;
-(IBAction)ChooseExisting;
- (IBAction)btnSave:(id)sender;
- (IBAction)btnLoad:(id)sender;

@end 
```

**视图控制器.m**

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

-(IBAction)TakePhoto{
    picker = [[UIImagePickerController alloc]init];
    picker.delegate=self;
    [picker setSourceType:UIImagePickerControllerSourceTypeCamera];
    [self presentViewController:picker animated:YES completion:NULL];
   // [picker release];

}

- (UIImage*)loadImage
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                         NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString* path = [documentsDirectory stringByAppendingPathComponent:
                      [NSString stringWithFormat: @"MyImage.png"] ];
    image = [UIImage imageWithContentsOfFile:path];
    return image;
}
-(IBAction)ChooseExisting{
    picker2 = [[UIImagePickerController alloc]init];
    picker2.delegate=self;
    [picker2 setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
    [self presentViewController:picker2 animated:YES completion:NULL];
    // [picker release];

}

- (IBAction)btnSave:(id)sender {

    if (image != nil)
    {
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                             NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];
        NSString* path = [documentsDirectory stringByAppendingPathComponent:
                          [NSString stringWithFormat: @"MyImage.png"]];
        NSData* data = UIImagePNGRepresentation(image);
        [data writeToFile:path atomically:YES];
         NSLog(@"saved");
    }
}

- (IBAction)btnLoad:(id)sender {
    [self loadImage];
}

-(void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info{
    image = [info objectForKey:UIImagePickerControllerOriginalImage];
    [imageView setImage:image];
    [self dismissViewControllerAnimated:YES completion:NULL];
}

- (void)viewDidLoad
{
    [self loadImage];
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

Save 和 loadImage 方法不起作用:(。不知道为什么，但我没有任何错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T06:52:15.503

您的图像保存/加载代码似乎正确。

检查您`IBActions`是否在 IB 中正确连接。

并改变：

```
- (IBAction)btnLoad:(id)sender
{
    [self loadImage];
} 
```

到：

```
- (IBAction)btnLoad:(id)sender
{
    [self loadImage];
    [imageView setImage:image];
} 
```

您的原始代码似乎加载了图像，但它没有在任何地方显示。

编辑：

您可以随时检查图像是否保存到文档目录。连接设备后，在 XCode 中打开管理器窗口。

选择您的设备，然后选择应用程序。选择您感兴趣的应用程序，您应该会看到与该应用程序相关的文件树。您的图像文件是否列在 Documents 文件夹中？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T06:58:01.037

检查文件目录中的图像。您的呼叫 [self loadImage]; 但 loadImage 返回 UIImage 您不在任何地方使用。您可以将数据附加到选择器，如下所示。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *appFile = [documentsDirectory stringByAppendingPathComponent:@"MyImage.png"];
NSData *myData = [[[NSData alloc] initWithContentsOfFile:appFile] autorelease];
[picker2 addAttachmentData:myData mimeType:@"image/png" fileName:@"MyImage"]; 
```

# sql-server - 如何在不删除子表的情况下删除具有约束的表？

> ID：14973509
> 
> 赞同：1
> 
> 时间：2013-02-20T06:22:23.143
> 
> 标签：sql-server, sql-server-2008, foreign-key-relationship

我有 60 张桌子，我想删除其中的 10 张桌子。但是在删除这 10 个时，它显示了 FK 约束错误。有没有办法通过禁用约束来删除这些表而不删除其他表？

我也截断了引用表中的所有数据，仍然显示 FK 约束错误。

我的目标是在不删除其他表的情况下删除一个表，这些表是这些表的 FK。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T06:27:08.207

使用此 SQL 语句，您可以列出引用给定表的所有 FK 约束 - 我还提供 SQL 命令来删除引用您的表的 FK 约束：

```
DECLARE @TableName SYSNAME
SET @TableName = 'dbo.YourTableNameHere'

;WITH ReferencingFK AS 
(
    SELECT 
        fk.Name AS 'FKName',
        OBJECT_NAME(fk.parent_object_id) 'ParentTable',
        cpa.name 'ParentColumnName',
        OBJECT_NAME(fk.referenced_object_id) 'ReferencedTable',
        cref.name 'ReferencedColumnName'
    FROM 
        sys.foreign_keys fk
    INNER JOIN 
        sys.foreign_key_columns fkc ON fkc.constraint_object_id = fk.object_id
    INNER JOIN 
        sys.columns cpa ON fkc.parent_object_id = cpa.object_id AND fkc.parent_column_id = cpa.column_id
    INNER JOIN 
        sys.columns cref ON fkc.referenced_object_id = cref.object_id AND fkc.referenced_column_id = cref.column_id
)
SELECT 
    FKName,
    ParentTable,
    ParentColumnName,
    ReferencedTable,
    ReferencedColumnName,
    DropCmd = 'ALTER TABLE dbo.' + ParentTable + ' DROP CONSTRAINT [' + FKName + ']'
FROM 
    ReferencingFK
WHERE
    ReferencedTable = @TableName
ORDER BY 
    ParentTable, ReferencedTable, FKName 
```

因此，将您想要放入`@TableName`变量的 10 个表中的一个放入并运行它。您应该得到一个输出，显示引用该表的所有 FK 约束，包括具有从`ALTER TABLE .... DROP CONSTRAINT ....`系统中删除该约束（**只是**约束！不是其他表）的命令的列。

# php - 在 PHP 中自动查找子类

> ID：14973510
> 
> 赞同：4
> 
> 时间：2013-02-20T06:22:26.130
> 
> 标签：php, subclass

我想做的是找到扩展某个基类的所有子类。

[这与https://stackoverflow.com/a/436204/1369417](https://stackoverflow.com/a/436204/1369417)非常相似，只是在调用函数时*不会加载类。*

本质上，我希望做的是：

1.  将所有 PHP 文件包含在一个目录中。
2.  测试每个包含是否引入了基类的新子类。

但是我想在一个隔离的 PHP 环境中进行包含，这样我就可以免受包含 PHP 文件可能引入的任何错误和警告的影响。

这是一个小例子：

**基类.php**

```
<?php
abstract class BaseClass {}
?> 
```

**FirstSubclass.php**

```
<?php
class FirstSubclass extends BaseClass {}
?> 
```

**废话.php**

```
<?php
class SecondSubclass extends BaseClass {}
?> 
```

**坏代码.php**

```
<?php
adfgklmdflgksdfge@#4234t0q3
?> 
```

**主文件**

```
<?php
require('BaseClass.php');
print_r(find_subclasses(BaseClass));
?> 
```

**预期产出**

```
Array (
    [FirstSubclass.php] => FirstSubclass,
    [Blah.php] => SecondSubclass,
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T06:28:21.627

使用这个功能

```
function getSubclassesOf($parent) {
    $result = array();
    foreach (get_declared_classes() as $class) {
        if (is_subclass_of($class, $parent))
            $result[] = $class;
    }
} 
```

从[如何在php中获取一个类的所有子类](https://stackoverflow.com/questions/3470008/how-to-obtain-all-subclasses-of-a-class-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T06:37:59.387

最简单的做法可能是读取文件而不是包含它们，然后自己进行一些简单的解析以查找类定义和继承。然后很容易构建一个继承层次结构，您可以查询子类和基类。

# android - 如何显示Android的/data/data的内容？

> ID：14973513
> 
> 赞同：0
> 
> 时间：2013-02-20T06:22:40.840
> 
> 标签：android, android-file

`/data`当我查看 DDMS 的文件资源管理器时，该目录是空的。

我跑后也是空的`adb pull /data /myLocalCopy`。

却说打电话后`context.getFileStreamPath("myFile.txt")`会`myFile.txt`登陆。`/data/data/com.corp.appName/files/myFile.txt``context.openFileOutput("myFile.txt", ..)`

我该如何运行`ls -al /data`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:10:32.297

该目录对于正常进程是不可读的。您必须是`root`（或`system`）才能查看内容。因此，请尝试使用有根电话或模拟器。

查看权限设置：

```
drwxrwx--x system   system            2012-07-24 21:47 data 
```

您会看到普通用户无法列出目录内容（需要`r`权限），但可以访问下面的文件（`x`权限在那里）。因此，文件可以在下面存储和访问并不矛盾`/data`

特别是，系统会创建一个`/data/data/com.corp.appName`应用程序拥有的目录，`com.corp.appName`以便该应用程序在该子树中具有完全访问权限。

# java - 名为“localhost”的远程数据库服务器的数据库连接字符串

> ID：14973516
> 
> 赞同：1
> 
> 时间：2013-02-20T06:22:48.040
> 
> 标签：java, mysql, jdbc, database-connection

我在一台机器上设置了一个远程 mysql 数据库服务器`myuniversity.edu`，服务器名为“ `localhost`”。在它上面我有一个名为' `MyDatabase`'的数据库。

```
I want to connect it through Java.

The connection urls that I have tried are:
    jdbc:mysql://myuniversity.edu/localhost
    jdbc:mysql://myuniversity.edu/localhost/MyDatabase
    jdbc:mysql://myuniversity.edu:3306/MyDatabase

but I get the `Connection refused: connect` exception. 
```

有人可以告诉在这种情况下连接网址应该是什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T06:26:12.393

不确定您的机器名称是否为`myuniversity.edu`，您可以尝试使用连接字符串的 IP 地址，[Localhost](http://en.wikipedia.org/wiki/Localhost)是环回网络接口的名称，只能在该机器上访问。还要确保您的 mysql 的默认端口*（可能是 3306）*是否打开。使用 IP 地址，您的连接字符串将如下所示：

```
jdbc:mysql://192.168.0.123/MyDatabase 
```

使用 IP 和端口，它将是：

```
jdbc:mysql://192.168.0.123:3306/MyDatabase 
```

*（您需要在上面的字符串中替换您的 IP）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T06:50:57.847

没有（IP）地址我不可能远程连接试试这个方法

如果你想通过互联网连接它：

1.  在您的计算机上打开 CMD

2.  在 CMD 中写入 ping myuniversity.edu（例如 ping google.com），然后您将获得该网站的 ip 地址，您可以复制该 ip

然后尝试这种方法：

```
Connection con;
try{
Class.forName("com.mysql.jdbc.Driver");
con = DriverManager.getConnection("jdbc:mysql://THE IP ADDRESS :3306/DatabaseName");
System.out.println("CONNECTED");
}catch(Exception ex)
{
System.out.println(ex.getMessage());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T08:42:02.327

好的，这就是我为解决此问题所做的工作：

*   在`my.cnf`文件中，我将绑定地址从“127.0.0.1”更改为“主机 ipaddress”。这允许连接到远程 mysql 服务器，但不允许任何尝试连接到它的远程主机访问。
*   为了解决这个问题，我在用户表中添加了一个带有主机“%”的条目。这允许远程主机连接到数据库。

现在我可以连接到数据库`jdbc:mysql://serverIpAddress:3306/MyDatabase`

# ios - 等待一定时间后向用户发送通知

> ID：14973517
> 
> 赞同：1
> 
> 时间：2013-02-20T06:22:59.610
> 
> 标签：ios, objective-c, notifications, push-notification

我对 Objective-c 完全陌生，谷歌搜索这个问题 2 小时让我没有任何有用的信息。事实上，我比刚开始时更加困惑。我也有一本为 iOS 6 更新的教科书，但它对这个问题完全没用。

我只是希望用户在我的应用程序中输入某个时间（可能来自日期选择器，我还没有决定），然后稍后收到通知（例如，在用户输入时间前 5 小时）。

下面的示例图片说明了我的意思。假设用户在上午 2:09 输入，然后在晚上 9:09（5 小时前），他会收到图示通知。

我从[这个](http://www.smipple.net/snippet/Sounden/Simple%20NSNotificationCenter%20example)来源找到了这段代码，但我什至不确定这是否是我需要的：

```
// Add an observer that will respond to loginComplete
[[NSNotificationCenter defaultCenter] addObserver:self 
                                             selector:@selector(showMainMenu:) 
                                                 name:@"loginComplete" object:nil];

// Post a notification to loginComplete
[[NSNotificationCenter defaultCenter] postNotificationName:@"loginComplete" object:nil];

// the function specified in the same class where we defined the addObserver
- (void)showMainMenu:(NSNotification *)note {
    NSLog(@"Received Notification - Someone seems to have logged in"); 
} 
```

该代码似乎更适用于 NSNotificationCenter。它所做的只是在按钮按下事件后将消息打印到控制台。

有人可以修改给定的代码，或者提供我如何获得我想要的结果的示例。

您不必为我编写我的应用程序。这不是我要的。只需编写示例代码或指向它们的链接。

重申一下，我希望用户在控件中输入时间，应用程序会在该时间之前的几个小时内确定时间，并在那时发出通知。我可以弄清楚控件和时间的东西，但通知的东西让我很困惑。这就是我需要帮助的地方。

如果有人幸运地找到了一个很好的教程，那肯定也会对我有所帮助。

鉴于很难通过 Google 找到有关此问题的帮助，并且这可能是许多人的常见问题，因此任何数量的帮助都可能不仅使我自己受益，而且其他看到这一点的人也会受益。

提前致谢。

[![通知](../Images/7fc323825f8b03656ee5c49830b59921.png)](http://www.flickr.com/photos/93162002@N03/8490576365/ "BobOB31 在 Flickr 上的通知")

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T06:31:42.880

你必须使用[`UILocalNotification`](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html#//apple_ref/doc/uid/TP40008194-CH103-SW13)它。这是[教程](http://blog.mugunthkumar.com/coding/iphone-tutorial-scheduling-local-notifications-using-a-singleton-class/)

```
 UILocalNotification *notification = [[UILocalNotification alloc]init];
    notification.fireDate = self.datePicker.date;
    notification.alertBody = "Wake up!!";
    notification.soundName = UILocalNotificationDefaultSoundName;     
    notification.alertAction= @"view details";

    [[UIApplication sharedApplication]scheduleLocalNotification:notification];
    [notification release]; 
```

这将为您的应用安排本地通知。如果您的应用程序在后台，系统本身会发出警报消息。但是`If the application is foremost and visible when the system delivers the notification, no alert is shown, no icon is badged, and no sound is played. However, the application:didReceiveLocalNotification: is called if the application delegate implements it.`你必须对通知做出回应。

# c# - SalesForce Web 服务 - 请求元素未被识别

> ID：14973525
> 
> 赞同：2
> 
> 时间：2013-02-20T06:23:44.673
> 
> 标签：c#, soap, salesforce, asmx

我们正在使用来自 SalesForce 的出站通知服务。

从 SalesForce WSDL 生成代理并尝试将其发送到我的 ASMX Web 服务后，出现以下错误

无法识别请求元素 http://soap.sforce.com/2005/09/outbound'>。

在我的 C# ASMX Web 服务上，我有

```
[WebService(Namespace = "http://services.company1.com.au/services")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[ToolboxItem(false)]
[SoapDocumentService(RoutingStyle = SoapServiceRoutingStyle.RequestElement)]
public class ImportPosition : WebService, NotificationPort 
```

SalesForce WSDL 具有以下肥皂定义

```
<definitions targetNamespace="http://soap.sforce.com/2005/09/outbound"
         xmlns="http://schemas.xmlsoap.org/wsdl/"
         xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
         xmlns:tns="http://soap.sforce.com/2005/09/outbound"
         xmlns:xsd="http://www.w3.org/2001/XMLSchema"
         xmlns:ent="urn:enterprise.soap.sforce.com"
         xmlns:ens="urn:sobject.enterprise.soap.sforce.com"> 
```

如果我将 C# ASMX Web 服务命名空间更改为“ [http://soap.sforce.com/2005/09/outbound](http://soap.sforce.com/2005/09/outbound) ”，则请求成功进入，但作为空对象。

使用 Wireshark 我可以看到 SOAP 消息以

```
<notifications xmlns="http://soap.sforce.com/2005/09/outbound" 
```

知道是什么导致了这个命名空间问题吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T03:56:25.577

原来我使用了错误的工具来生成我的代理。

我应该一直在使用 wsdl.exe 而不是 svcutil.exe

创建 Web 服务以接收来自 SalesForce 的出站通知的提示

```
use .asmx 
WS-I Basic Profile 1.1 
Web Service Description Language (WSDL) 1.1
Simple Object Access Protocol (SOAP) 1.1 
```

# java - 使用 MotionEvent 在视图上同时移动两个位图

> ID：14973527
> 
> 赞同：1
> 
> 时间：2013-02-20T06:23:48.350
> 
> 标签：java, android, motionevent

我使用以下类（android 中的简单 2D 图形）在我的视图上创建了两个位图，并徘徊以实现该位图可以独立移动。我为此调用motionevent方法。

当前问题，我不明白为什么只有一个对象在以下代码中向右移动。例如，使用此代码，仅移动“不”位图，我想独立移动两个位图。

场景：我可以使用我的两个手指，每个对象一个，独立移动位图。但我不知道如何实现这一点。

```
public class TouchView extends View {

private Drawable cross;
private Rect crossBounds = null;
private Drawable not;
private Rect notBounds = null;

private int x1, y1, x2, y2 ;

boolean flag = true;

private void intialize ()
{ 
    int w1 = cross.getIntrinsicWidth();
    int h1 = cross.getIntrinsicHeight();
     x1 = 100;
    y1 = 100;
    crossBounds = new Rect(x1-w1/2, y1-w1/2, x1+w1/2, y1+h1/2);

    int w = not.getIntrinsicWidth();
    int h = not.getIntrinsicHeight();
     x2 = 300;
    y2 = 300;
    notBounds = new Rect(x2-w/2, y2-w/2, x2+w/2, y2+h/2);

}

public TouchView(Context context) {
    super(context);

    // Get a representation of the image
    Resources resources = context.getResources();
    cross = (Drawable) resources.getDrawable(R.drawable.cross);
    not = (Drawable) resources.getDrawable(R.drawable.not);
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    Log.i("TouchView.onTouchEvent", "event = " + event);

    if(event.getAction() == MotionEvent.ACTION_DOWN || 
            event.getAction() == MotionEvent.ACTION_MOVE) {

        int touchCounter = event.getPointerCount();

         if (touchCounter ==2 && getHeight ()==y1){
                int w = cross.getIntrinsicWidth();
                int h = cross.getIntrinsicHeight();
                 x1 = (int) event.getX();

                crossBounds = new Rect(x1-w/2, y1-w/2, x1+w/2, y1+h/2);
                }
                else
                {
                int w1 = not.getIntrinsicWidth();
                int h1 = not.getIntrinsicHeight();
                 x2 = (int) event.getX();

                notBounds = new Rect(x2-w1/2, y2-w1/2, x2+w1/2, y2+h1/2);
                }
                // Request the system to redraw the view (call onDraw at 
                // some point in the future)
                // From a non-UI thread, call postInvalidate instead

        invalidate();

        return true;
    }

    return false;
}

@Override
protected void onDraw(Canvas canvas) {

    Log.i("TouchView.onDraw", "");

    // Background
    Paint bgPaint = new Paint();
    bgPaint.setColor(Color.WHITE);
    canvas.drawPaint(bgPaint);

    if (flag == true){
        intialize ();
        cross.setBounds(crossBounds);
        cross.draw(canvas);
        not.setBounds(notBounds);
        not.draw(canvas);
        flag=false;
    }
    if(crossBounds != null) {
        cross.setBounds(crossBounds);
        cross.draw(canvas);
        not.setBounds(notBounds);
        not.draw(canvas);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T11:21:17.297

```
public class SimpleDrag extends View {

private final int INVALID_INDEX = -1;

private final int mTotalItems = 5;

private ArrayList<Rect> mItemsCollection;

private ArrayList<Point> mActiveDragPoints;

private ArrayList<Rect>  mActiveRects;

private Paint mPaint;

/**
 * @param context  
 * @return of type SimpleDrag
 * Constructor function
 * @since Feb 19, 2013 
 * @author rajeshcp
 */
public SimpleDrag(Context context) {
    super(context);
    init();
}

/**
 * @param context
 * @param attrs  
 * @return of type SimpleDrag
 * Constructor function
 * @since Feb 19, 2013 
 * @author rajeshcp
 */
public SimpleDrag(Context context, AttributeSet attrs) {
    super(context, attrs);
    init();
}

/**
 * @param context
 * @param attrs
 * @param defStyle  
 * @return of type SimpleDrag
 * Constructor function
 * @since Feb 19, 2013 
 * @author rajeshcp
 */
public SimpleDrag(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    init();
}

/* (non-Javadoc)
 * @see android.view.View#onDraw(android.graphics.Canvas)
 * @since Feb 19, 2013
 * @author rajeshcp 
 */
@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    canvas.drawColor(Color.BLUE, PorterDuff.Mode.CLEAR);
    for( Rect rect : mItemsCollection)
    {
        canvas.drawRect(rect, mPaint);
    }
}

/**
 * @param of type null
 * @return of type null
 * function which will initialize the view
 * @since Feb 20, 2013
 * @author rajeshcp
 */
private void init()
{
    mActiveRects      = new ArrayList<Rect>(mTotalItems);
    mActiveDragPoints = new ArrayList<Point>(mTotalItems);
    mItemsCollection  = new ArrayList<Rect>();
    for( int i = 0; i < mTotalItems; i++)
    {
        Rect rect = new Rect(i * 100, i * 100, (i + 1) * 100, (i + 1) * 100);
        mItemsCollection.add(rect);
    }
    mPaint     = new Paint(Paint.FILTER_BITMAP_FLAG | Paint.DITHER_FLAG | Paint.ANTI_ALIAS_FLAG);
    mPaint.setColor(Color.RED);
}

/* (non-Javadoc)
 * @see android.view.View#onTouchEvent(android.view.MotionEvent)
 * @since Feb 19, 2013
 * @author rajeshcp 
 */
@Override
public boolean onTouchEvent(MotionEvent event) {

    final int action  = event.getActionMasked();
    final int pointer = event.getActionIndex();

    switch (action) {
    case MotionEvent.ACTION_DOWN :
        Point touchDown = new Point((int)event.getX(), (int)event.getY());
        lookForIntersection(touchDown);
        break;
    case MotionEvent.ACTION_UP :
    case MotionEvent.ACTION_CANCEL :
        mActiveDragPoints.removeAll(mActiveDragPoints);
        mActiveRects.removeAll(mActiveRects);
        break;
    case MotionEvent.ACTION_MOVE :
        int count = 0;
        for(Rect rect : mActiveRects)
        {
            Point curretPoint = new Point((int)event.getX(count), (int)event.getY(count));
            moveRect(curretPoint, mActiveDragPoints.get(count), rect);
            count++;
        }
        Log.d(getClass().getName(), "Active Rects" + mActiveRects.size());
        Log.d(getClass().getName(), "Active Points" + mActiveDragPoints.size());
        invalidate();
        break;
    case MotionEvent.ACTION_POINTER_DOWN :
        touchDown = new Point((int)event.getX(pointer), (int)event.getY(pointer));
        lookForIntersection(touchDown);
        //Log.d(getClass().getName(), "ACTION_POINTER_DOWN" + pointer);
        break;
    case MotionEvent.ACTION_POINTER_UP :
        int index = getIntersectionRectIndex(new Point((int)event.getX(pointer), (int)event.getY(pointer)));
        if( index != INVALID_INDEX )
        {
            Rect rect = mItemsCollection.get(index);
            mActiveDragPoints.remove(mActiveRects.indexOf(rect));
            mActiveRects.remove(rect);
        }

        break;

    default:
        break;
    }
    return true;
}

/**
 * @param touchDown of type Point
 * @return of type null
 * function which will find the 
 * intersecting rect and add to the 
 * active collection
 * @since Feb 20, 2013
 * @author rajeshcp
 */
private void lookForIntersection(Point touchDown)
{
    final int index = getIntersectionRectIndex(touchDown);

    if( index != INVALID_INDEX )
    {
        final Rect rect = mItemsCollection.get(index);
        if( mActiveRects.indexOf(rect) == INVALID_INDEX )
        {
            mActiveDragPoints.add(touchDown);
            mActiveRects.add(mItemsCollection.get(index));
        }
    }
    Log.d(getClass().getName(), "Active Rects" + mActiveRects.size());
    Log.d(getClass().getName(), "Active Points" + mActiveDragPoints.size());

}

/**
 * @param point of type Point
 * @return of type int 
 * function which will return the index of 
 * the rect contaning the given point
 * @since Feb 20, 2013
 * @author rajeshcp
 */
private int getIntersectionRectIndex(final Point point)
{
    int index = INVALID_INDEX;
    for(Rect rect : mItemsCollection)
    {
        if( rect.contains(point.x, point.y) )
        {
            index = mItemsCollection.indexOf(rect);
            break;
        }
    }
    return index;
}

/**
 * @param currentPoint of type Point
 * @param prevPoint of type Point 
 * @param rect of type Rect
 * @return of type null
 * function which will move the change the 
 * bounds of teh rect
 * @since Feb 20, 2013
 * @author rajeshcp
 */
private void moveRect(Point currentPoint, Point prevPoint, final Rect rect)
{
    int xMoved = currentPoint.x - prevPoint.x;
    int yMoved = currentPoint.y - prevPoint.y;
    rect.set(rect.left + xMoved, rect.top + yMoved, rect.right + xMoved, rect.bottom + yMoved);
    mActiveDragPoints.set(mActiveDragPoints.indexOf(prevPoint), currentPoint);
}

} 
```

希望这是您想要的，尚未进行很多测试，但基本上这对我有用，即使您可以通过更改 mTotalItems 来增加 nof 项目。希望这会有所帮助。

# c - 使用 for 循环在 C 中使用 free()

> ID：14973530
> 
> 赞同：1
> 
> 时间：2013-02-20T06:24:01.543
> 
> 标签：c, memory, free

我正在为我的班级用 C 语言编写一个程序，并且我正在做结对编程。我想知道它是如何不使程序崩溃的。我的伙伴在下面添加了这段代码，我运行 valgrind 来测试是否有任何内存泄漏，这似乎很好 - 再说一次，我是新手。无论如何，我想知道这段代码是如何工作的，因为当我释放 curr 时，接下来运行的是 curr = curr->link - 但我们只是释放了 curr！那么 curr 被取出内存怎么会有链接呢？我以为这样的事情是行不通的。

这是我的伙伴写的：

```
for(node curr = list->head; curr != NULL; curr = curr->link ){
   if (!dflag) printf("%s\n",curr->words);
   else printf("[%p]\n",curr);
   free(curr->words);
   free(curr);
} 
```

如果 ^ this ^ 崩溃，这是我想做的事情：

```
for (node curr = list->head; curr != NULL; ) {
   if (!dflag) printf("%s\n",curr->words);
   else printf("[%p]\n",curr);
   node prev = curr;
   curr = curr->link;
   free(prev);
} 
```

此外，这是我们制作节点的方式：

```
typedef struct node *node;

struct node {
   cstring words;
   node link;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T06:29:41.593

仅仅因为你释放了内存并不意味着它的内容已经丢失。您的内容可能会保留一段时间，直到内存返回给另一个调用者`malloc()`并且调用者写入它。

显然你不能也不应该依赖这个。`valgrind`应该打印出与访问已释放内存有关的错误。

这是我们的老朋友“未定义行为”的一个例子。虽然我们可以解释为什么它可能会以某种方式运行，但不能保证会发生这种情况，并且根据定义依赖它是一个错误。出于这个原因，当这些事情崩溃时，你实际上会更幸运，因为这些事情很可能在你最意想不到的时候被忽视并导致各种奇怪的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T06:31:47.053

您需要使用`-g`flag 进行编译以获得有用的 valgrind 输出。第一个代码是错误的，因为您无法对释放的数据做出任何假设。定义自指针的正常方法是这样的：

```
struct node {
   cstring words;
   struct node *link;
}; 
```

# android - 以编程方式设置布局

> ID：14973532
> 
> 赞同：0
> 
> 时间：2013-02-20T06:24:08.640
> 
> 标签：android, android-layout

我为不同的布局创建了四个文件夹，以使我的应用程序支持所有屏幕。我创建了四个文件夹，即layout（默认）、layout-large、layout-small、layout-xlarge。在所有这些中，我放置了一个具有相同名称“activity_start.xml”的 xml 文件。现在，我想在我的 startActivity.java 中使用以下代码以编程方式设置布局：

```
DisplayMetrics displayMetrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(displayMetrics);

    switch(displayMetrics.densityDpi)
    { 
        case DisplayMetrics.DENSITY_LOW:

            // layout for small sized devices.

            break; 

        case DisplayMetrics.DENSITY_MEDIUM: 

            // layout for medium-sized devices.
            setContentView(R.layout.activity_start);
            break; 

        case DisplayMetrics.DENSITY_HIGH: 

            // layout for big-sized devices.
            setContentView(R.layout-large.activity_start);//<----------- syntax error in this line
            break; 
    } 
```

现在在**DisplayMetrics.DENSITY_MEDIUM**的情况下，代码是正确的（我猜），但是当我为**DisplayMetrics.DENSITY_HIGH**执行 setContentView 时，它不会占用我创建的文件夹（布局大）。

我的意思是，当我们为 setContentView 输入参数时，输入 R.lay...（按 ctrl+space），它不会显示文件夹“layout-large”。

我想以编程方式设置布局。如果有人可以帮助我，请。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T06:34:27.137

你完全错了。拥有限定文件夹名称的全部意义在于避免完全以编程方式处理它。Android 会自动处理这个问题。此外，密度不等于屏幕尺寸，因此您尝试将密度与不同的屏幕尺寸布局联系起来是不正确的。

如果不同屏幕尺寸的布局之间没有重大差异（实际上，*除了*平板电脑类型的布局（layout-sw600dp 或 layout-sw720dp），您应该使用尽可能少的布局来完成你的设计。

# algorithm - 如何通过 lat long 进行有效的多搜索点

> ID：14973537
> 
> 赞同：3
> 
> 时间：2013-02-20T06:24:14.980
> 
> 标签：algorithm, data-structures, geolocation, geospatial

我是 iOS 上的一个应用程序，它有 Trip Planner。例如，我使用谷歌方向 API 来获取从纽约到波士顿的路线。我有 50 个不同的经纬度来在地图上制作折线。在那之后，我需要在这条路线上找到我可以在去波士顿的路上参观的地方。

谷歌方向 API 给了我：

```
latitude = "30.308399"; longitude = "-89.748299";
latitude = "30.310930"; longitude = "-89.818604";
latitude = "30.350050"; longitude = "-89.916054";
latitude = "30.432850"; longitude = "-90.098549";
.... 
```

现在，对于每个点，我都会在 mysql 数据库中搜索以获取最近的位置：

> 选择 id,title,type_id,service_id,latitude,longitude,state,city,zip,address, ( 3959 * acos( cos( 弧度(31.72723) ) * cos( 弧度(latitude ) ) * cos( 弧度( longitude ) - 弧度(-106.3047)) + sin( 弧度(31.72723) ) * sin( 弧度(纬度) ) ) ) AS 到地方的距离距离 <= 10 按距离排序 ASC 限制 10

但是如果这次从纽约到旧金山的旅行，我将有 800 分，我会向数据库进行 800 次查询，总共需要 2 秒以上。而且我有 7 个不同的表，这将是 14 秒。

如果最好怎么办？

![例子](../Images/7918801e9bcee4f610f670324308d190.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T06:45:05.410

这是使其更快的一种方法：

(1) 在经纬度表中放入索引。

(2) 在查询中，首先只选择那些在路线上的点的水平和垂直距离内的地点，这些地点足够接近有趣。按纬度范围和经度范围选择。

(3) 然后按距离对这些点进行排序，无论是在查询内部还是外部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T06:43:20.870

我最好建议这是[Voronoi 图](http://en.wikipedia.org/wiki/Voronoi_diagram)。但很难实施。

**注意：** 由于您只有 80k 点，您可以在应用程序中缓存所有这些点并从应用程序所需的点返回。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-20T06:28:56.327

尝试加入最小距离条款，其中 Diatance > 100 等。

这称为锥形扫描。您从低分辨率开始，然后随着靠近而不断增加。

# maven - maven tomcat7插件认证失败，403 Forbidden

> ID：14973538
> 
> 赞同：9
> 
> 时间：2013-02-20T06:24:20.560
> 
> 标签：maven, tomcat7, maven-tomcat-plugin

经过数周的努力，我将其发布。我尝试并尝试，因为我对发布此内容感到内疚，因为有类似的线程。但我仍然得到略有不同的错误。所以我所拥有的是一个非常简单的spring（当然不需要是spring，bcz问题是maven）与maven的应用程序。

这是我的 pom.xml 中的插件部分。

```
<plugins>

        <plugin>
            <groupId>org.apache.tomcat.maven</groupId>
            <artifactId>tomcat7-maven-plugin</artifactId>
            <version>2.0</version>
            <configuration>
                <url>http://localhost:8080/manager</url>
                <username>tomcat</username>
                <password>s3cret</password>
                <path>/Test</path>
                <port>8080</port>
            </configuration>
        </plugin>

        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
    </plugins> 
```

早些时候，我遇到了 maven tomcat 插件无法与 tomcat 7 等一起使用的问题，但现在有了“tomcat7-maven-plugin”，问题就解决了。我使用 ' `http://localhost:8080/manager`' 作为 URL。对于这个 maven tomcat 编译器插件的几乎所有线程都是关于构建失败的。但是我的构建成功了（我运行为 tomcat7:deploy）。问题是tomcat正在回复

> ## tomcatManager 状态码：403，ReasonPhrase：Forbidden

以及我们在浏览器上遇到身份验证失败时看到的 html。相同的代码在我的 Linux 机器下运行良好。我尝试在 .m2 和 maven_home/conf 等内部的 settings.xml 中使用服务器元素的不同场景。仍然无法正常工作。

我发现 maven 无法对 tomcat 进行身份验证。找到用户名和密码，我可以使用 GUI 登录。所以在这里期待帮助。

ps - 我的 tomcat-users.xml 字段

```
<role rolename="manager-gui" />
<user username="tomcat" password="s3cret" roles="manager-gui"/> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T09:54:45.073

网址不正确尝试：

```
<url>http://localhost:8080/manager/text</url> 
```

tomcat-users.xml 文件的内容是什么。您是否正确设置了权限？见[http://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html](http://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T10:05:18.403

I could get tomcat deploy work but environment is different. So anyway I'm going to tell how I could do it since may be It'll help someone.

In this case I have tomcat6 as my web container and I'm using eclipse Helios as the IDE.

First of all I have haven environmental variables set as described in the maven web site([Maven download installation help](http://maven.apache.org/download.cgi)). Which means environmental variables M2_HOME and M2 are set and M2 is in my path variable.

Then in eclipse I have maven installation folder, local repository(In case if it is not default) and settings.xml file correctly. (These setting are in Window -> Preferences -> Maven -> Installations and User settings)

In tomcat_home\conf\tomcat-users.xml I have created user with the role manager-script.(Note that here I use tomcat6)

```
< role rolename="manager-script"/>
< user password="s3cret" roles="manager-script" username="tomcat"/> 
```

In POM.xml I have maven tomcat plugin defined as follows.

```
<plugin>
<groupId>org.apache.tomcat.maven</groupId>
<artifactId>tomcat6-maven-plugin</artifactId>
<version>2.0</version>
<configuration>
    <url>http://localhost:8080/manager</url>
    <server>TomcatServer</server>
</configuration>
</plugin> 
```

Then on eclipse Run Configurations I create a configuration to run goal "tomcat6:deploy" ( This [site](http://tomcat.apache.org/maven-plugin-2.0/tomcat6-maven-plugin/examples/deployment.html) from apache says tomcat:deploy is the goal but it didn't work).

Which runs perfectly and deploy my app to the container. Once it is deployed app need to be undeplyed using "tomcat6:undeploy" before deploying again.

I'm not a expert about this and still I have doubts on some facts. But since I saw this question in lots of places I thought this will help someone it the same problem.

Thank you

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-09T10:17:24.600

在尝试了几件事之后，以下配置对我有用。请试一试

tomcat-users.xml

```
<role rolename="manager-gui"/>
<user password="tomcat" roles="manager-gui" username="tomcat"/> 
```

pom.xml

```
<!-- Maven Tomcat Plugin -->
<plugin>
    <groupId>org.apache.tomcat.maven</groupId>
    <artifactId>tomcat7-maven-plugin</artifactId>
    <configuration>
      <url>http://localhost:8080/manager/html</url>
      <username>tomcat</username>
      <password>tomcat</password>
      <update>true</update>
      <path>/Test</path>
    </configuration>
</plugin> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T17:52:24.173

今天我用 Tomcat 7 尝试了相同的应用程序。我需要将插件 artifactId 更改为“tomcat7-maven-plugin”。我必须将网址更改为“ `http://localhost:8080/manager`”。完成这些更改后，部署工作正常。我还发现 maven 在 .m2 文件夹中读取了 settings.xml 。mvaen_home/conf 中还有一个 settings.xml 文件，但它不是它读取的文件。我发现的另一件事是tomcat7没有取消部署，tomcat6有取消部署。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T17:22:10.163

有时，当上述所有条件都匹配并且您仍然收到错误时，您可能正在使用 mvn tomat7:deploy 命令。同时，服务器由 Eclipse 维护，因此不会混为一谈。您可以在 Eclipse IDE 中停止服务器，然后使用 mvn 命令重试。

# java - Android OnDraw() 并使用 Timer 更新

> ID：14973540
> 
> 赞同：0
> 
> 时间：2013-02-20T06:24:24.100
> 
> 标签：java, android

我正在尝试在 Android 中制作一个游戏，一旦用户按下开始，就会有物体飞过屏幕。我想我需要将我的 OnDraw() 函数与计时器链接起来，以便可以更新对象的位置。

目前，我正在关注我在网上找到的一个代码示例，它连续打印出文本。但是，我无法导入 java.awt.event.ActionEvent 和 ActionListener。Eclipse 给了我一个“无法解析导入 java.awt.event”。是否有与 ActionEvent 等效的 Android？或者这是以其他方式完成的？谢谢你。

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.Timer;

public class TimerSample {
  public static void main(String args[]) {
    ActionListener actionListener = new ActionListener() {
      public void actionPerformed(ActionEvent actionEvent) {
        System.out.println("Hello World Timer");
      }
    };
    Timer timer = new Timer(500, actionListener);
    timer.start();
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:28:17.820

使用[`Timer`](http://developer.android.com/reference/java/util/Timer.html)which android 提供的从头开始的教程，看看[这个](http://writecodeeasy.blogspot.com/2012/08/androidtutorial-timer-p1.html)。

# paypal - Paypal DirectPayment 返回错误

> ID：14973544
> 
> 赞同：0
> 
> 时间：2013-02-20T06:24:50.067
> 
> 标签：paypal, payment-gateway, paypal-sandbox

使用 PayPal 沙盒`DirectPayment`方法时，我收到以下错误消息：

```
Direct credit card payment API call failed: Please enter a valid postal code in the billing address.Short Error Message: Invalid DataError Code: 10712 
```

我更改了邮政编码和地址，但没有用。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:59:17.750

此错误通常是由于邮政编码与城市和州格式不匹配造成的。我建议使用 usps.com 邮政编码验证，以确保邮政编码与邮政服务城市和州相匹配。你可以在这里找到这个工具：

[https://tools.usps.com/go/ZipLookupAction!input.action](https://tools.usps.com/go/ZipLookupAction!input.action)

使用这个工具通常可以帮助我清除错误。如果这无助于解决问题，请显示您当前发送的地址和邮编详细信息。希望这可以帮助。

谢谢，

# php - 在 Fancybox 2 中传递 ajax 变量

> ID：14973550
> 
> 赞同：0
> 
> 时间：2013-02-20T06:25:24.593
> 
> 标签：php, html, ajax, fancybox, fancybox-2

我正在使用 Fancybox 2。我正在一个有画廊的页面上工作，单击图像时它应该将 ajax 值传递给服务器，作为回报，我想带回一些信息。

这个想法很简单：- 将从数据库中获取一些带有“id”的图像，然后这个 id 应该被发送到服务器，其余服务器将结果作为弹出框发回。

我看到了演示，但我不知道这里有 ajax。我只想知道如果这是代码，我将如何将值传递给服务器：-

```
<a href=" ? "><img src="image.jpg"></a> 
```

知道如何使用`<a href=" ? ">`

请让我知道如何使用上述代码将数据传递到服务器？

# xml - 在经典 ASP 中解析 Google 地理编码 XML

> ID：14973552
> 
> 赞同：1
> 
> 时间：2013-02-20T06:25:31.967
> 
> 标签：xml, asp-classic, google-geocoder

使用[http://maps.googleapis.com/maps/api/geocode/xml?address=5555%20La%20Cienaga%20Blvd%20Los%20Angeles,%20CA&sensor=false](http://maps.googleapis.com/maps/api/geocode/xml?address=5555%20La%20Cienaga%20Blvd%20Los%20Angeles,%20CA&sensor=false)

我正在尝试在经典 ASP 中解析 XML。

我尝试了不同的例子，他们认为可以工作，但我不能

谁能帮我一把？例如，如果我想获取“ **lat** ”和“ **formatted_address** ”的值，我该怎么做？

下面是我从上面的链接获得的 XML

```
<GeocodeResponse>
<status>OK</status>
<result>
<type>street_address</type>
<formatted_address>5555 La Cienega, Los Angeles, CA 90056, USA</formatted_address>
<address_component>
<long_name>5555</long_name>
<short_name>5555</short_name>
<type>street_number</type>
</address_component>
<address_component>
<long_name>La Cienega</long_name>
<short_name>La Cienega</short_name>
<type>route</type>
</address_component>
<address_component>
<long_name>Los Angeles</long_name>
<short_name>Los Angeles</short_name>
<type>locality</type>
<type>political</type>
</address_component>
<address_component>
<long_name>Los Angeles</long_name>
<short_name>Los Angeles</short_name>
<type>administrative_area_level_2</type>
<type>political</type>
</address_component>
<address_component>
<long_name>California</long_name>
<short_name>CA</short_name>
<type>administrative_area_level_1</type>
<type>political</type>
</address_component>
<address_component>
<long_name>United States</long_name>
<short_name>US</short_name>
<type>country</type>
<type>political</type>
</address_component>
<address_component>
<long_name>90056</long_name>
<short_name>90056</short_name>
<type>postal_code</type>
</address_component>
<geometry>
<location>
<lat>33.9978986</lat>
<lng>-118.3696586</lng>
</location>
<location_type>RANGE_INTERPOLATED</location_type>
<viewport>
<southwest>
<lat>33.9965523</lat>
<lng>-118.3709990</lng>
</southwest>
<northeast>
<lat>33.9992503</lat>
<lng>-118.3683010</lng>
</northeast>
</viewport>
<bounds>
<southwest>
<lat>33.9978986</lat>
<lng>-118.3696586</lng>
</southwest>
<northeast>
<lat>33.9979040</lat>
<lng>-118.3696414</lng>
</northeast>
</bounds>
</geometry>
<partial_match>true</partial_match>
</result>
</GeocodeResponse> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:25:24.253

在经典 ASP 中启动 XML 文档，完成后尝试使用 XPath

```
Set docXML = CreateObject( "Microsoft.XMLDOM" ) 
docXML.async = False 
docXML.loadXML( myXMLText ) 
```

为了获得纬度

```
docXML.documentElement.selectSingleNode( "/GeocodeResponse/result/geometry/location/lat" ) 
```

和

```
docXML.documentElement.selectSingleNode( "/GeocodeResponse/result/formatted_address" ) 
```

用于获取格式化的地址。

# php - 尝试使用 jquery 发送由 id 标识的 html 表单

> ID：14973555
> 
> 赞同：0
> 
> 时间：2013-02-20T06:25:48.830
> 
> 标签：php, jquery, html

我正在从我的数据库中呼出一个内容列表，并且每个项目旁边都有一个星形图标。我试图做到这一点，以便当用户单击星号时，它会在我的数据库中找到该内容并更改该字段中的“流行”值（“喜欢”按钮）。我一直在尝试通过将每颗星包裹在一个标签中然后将每个表单的 id 设置为 'formWithId'x ...... x 是正在显示的内容的 id 来做到这一点。

这是代码：

```
echo "<form  method = 'post' class ='formId".$row['id']."' id = 'likePostWithId".$row['id']."'>";
      //all inputs are hidden and send the 'id' value of the content so the php file will know which field of the table to like in the mysql database
echo "<input type ='text' name = 'email' style = 'display: none;' value= '".$row['email']."' >
      <input type ='text' name = 'id' style = 'display: none;' value= '".$row['id']."' >
      //this is the star icon
      <i class = 'ss-icon' id = '".$row['id']."'>&#x22C6; </i>";
echo "</form>"; 
```

所以，现在我需要的是能够通过使用 jquery validate 来发送表单......但我遇到的问题是我一直使用 jquery 验证（使用提交处理程序）来提交其 id 是预定义的特定表单并且不要根据从数据库发送的内容的 id 进行更改。

这是我正在尝试的示例

```
$(document).ready(function(){
    $(".ss-icon").click(function(){
       var id= $(this).attr('id');
       $("#likePostWithId"+id).submit();
    });
});

$(function(){
    $(".ss-icon").click(function(){
    //this doesn't work...
    $("#likePostWithId").validate({
         submitHandler:function(data){
            //do stuff
          }
     )};
)}; 
```

看看在哪里`$("#likePostWithId")`......我不知道如何让它选择具有正确 id 的那个（示例`$("#likePostWithId"+id)`）将解释为`#likePostWithId6`或`$likePostWithId7`其中的数字是 mysql 内容的 id

无论如何，我不知道你们是否清楚这...无需重新加载页面

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T06:35:14.003

您可以使用 jQuery 的 Ajax 来实现这一点。只需给每个星形图标一个唯一的 id（这个 id 应该与 MySQL 数据有某种关系，比如索引键）。使用 jQuery 的 Ajax 函数将此参数（id）传递给一个 php 脚本，该脚本获取数据（对于每个 MySQL 条目是唯一的，如索引），这会改变它的流行字段条目。在成功功能上，您可以对星形图标进行一些动画或颜色更改，以告知数据已成功发布。试一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T06:35:59.580

试试这个

```
 $(function(){
   $(".ss-icon").click(function(){
      var id= $(this).attr('id');
      $("#likePostWithId" + id ).validate({ <--- here
      submitHandler:function(data){
         $("#likePostWithId"+id).submit();
      }
   )};
 )}; 
```

但是，这会提交表单...您可以使用 ajax 提交表单而无需重新加载

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T06:44:38.990

也许你可以用它`$.post()`来解决你的问题。然后你不必乱用表格：

```
$(document).ready(function(){
    $(".ss-icon").click(function(){
       $.post('yourPHPUrl', { contentID: $(this).attr('id') }, successFunction);
    });
});

function successFunction(data) {
    if (data.success) { //just a sample, you can give a JSON-Object back to the success function
        $('#' + data.ID).css() ... // do something with the clicked star
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T16:09:39.773

你的代码：

```
$(function(){
    $(".ss-icon").click(function(){
        //this doesn't work...
        $("#likePostWithId").validate({
             submitHandler:function(data){
                 //do stuff
             }
        )};
    }); // <-- this was missing
)}; 
```

您缺少一组括号，但您仍然不应该那样实现它。您只是在每次点击时重新初始化插件。（该插件已经内置了`click`事件处理程序，并且会自动捕获。）

[`.validate()`](http://docs.jquery.com/Plugins/Validation/validate#options)必须在准备*初始化*插件 的 DOM 中调用*一次。*[根据文档](http://docs.jquery.com/Plugins/Validation/validate#toptions)，回调函数是*“在验证后通过 Ajax 提交表单的正确位置”。**`submitHandler`*

 **```
$(function(){

    $("#likePostWithId").validate({ // initialize plugin
         // other options & rules,
         submitHandler: function(form){
             // do ajax
             return false; // blocks form redirection since you already did ajax
         }
    )};

)}; 
```

**玩一个演示：http: [//jsfiddle.net/XnfDc/](http://jsfiddle.net/XnfDc/)****

# ember.js - New Router API 中的路由和资源有什么区别？

> ID：14973556
> 
> 赞同：114
> 
> 时间：2013-02-20T06:25:57.210
> 
> 标签：ember.js, ember-router

我试图了解 a`Route`和 a之间的区别`Resource`。我理解的方式`Resource`有助于将一个`Route`对象的子路径设置为另一个`Route`对象。但是当我想到路径也发生默认名称映射时，它还不清楚。

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2013-02-20T09:35:56.457

> **请注意，从 1.11.0 开始，`this.route`仅用于代替`this.resource`. 来源： http: [//guides.emberjs.com/v1.11.0/routing/defining-your-routes/](http://guides.emberjs.com/v1.11.0/routing/defining-your-routes/) ***

请查看此[帖子](http://darthdeus.github.com/blog/2013/02/01/ember-dot-js-router-and-template-naming-convention/)以获取详细说明。

这是这篇文章的粗略总结（我做了一些修改）：

> 自从更改资源和路由后，很多人对这两者的含义以及它们如何影响命名感到困惑。区别如下：
> 
> *   资源 - 事物（模型）
> *   路线 - 与事物有关

所以这意味着使用路由和资源的路由器可能如下所示：

```
App.Router.map(function() {
  this.resource("posts", { path: "/" }, function() {
    this.route("new", { path: "/new" });
  });
  this.route("another", { path: "/another" });
}); 
```

这将导致创建/使用以下路由：

*   PostsRou​​te、PostsController、PostsView
*   PostsIndexRoute、PostsIndexController、PostsIndexView
*   PostsNewRoute、PostsNewController、PostsNewView
*   另一个路由，另一个控制器，另一个视图

正如我们从这个例子中看到的，资源会影响正在使用/创建的控制器、路由和视图的命名（“新”路由被视为从属于“帖子”资源）。引用原始来源（我对其进行了修改，因为正如 Patrick M 在评论中正确指出的那样，这很烦人）：

> 这意味着每当您创建资源时，它都会创建一个全新的命名空间。该命名空间以资源命名，所有子路由都将插入其中。

**更新：更复杂的嵌套资源示例**

考虑以下具有多个嵌套资源的更复杂的示例：

```
App.Router.map(function() {
  this.resource("posts", { path: "/" }, function() {
    this.route("new", { path: "/new" });
    this.resource("comments", { path: "/comments" }, function() {
      this.route("new", { path: "/new" });
    });
  });
  this.route("another", { path: "/another" });
}); 
```

在这种情况下，资源`comments`会创建一个全新的命名空间。这意味着在这种情况下生成的路由将如下所示。**如您所见，评论资源的 Route、Controller 和 View 没有以父路由名称为前缀。**这意味着将资源嵌套在另一个资源中会重置命名空间（= 创建一个新的命名空间）。

*   PostsRou​​te、PostsController、PostsView
*   PostsIndexRoute、PostsIndexController、PostsIndexView
*   PostsNewRoute、PostsNewController、PostsNewView
*   **评论路由，评论控制器，评论视图**
*   **CommentsNewRoute、CommentsNewController、CommentsNewView**
*   另一个路由，另一个控制器，另一个视图

[Ember Docs](http://emberjs.com/guides/routing/defining-your-routes/#toc_nested-resources)中也解释了这种行为。

# oracle - 仅查找两个日期之间的特定日期

> ID：14973559
> 
> 赞同：3
> 
> 时间：2013-02-20T06:26:03.073
> 
> 标签：oracle, date, date-math

我有一个 Oracle 表，其中包含如下数据：

```
 1\. ID           DATE 
 2\. 12           02/11/2013
 3\. 12           02/12/2013
 4\. 13           02/11/2013
 5\. 13           02/12/2013
 6\. 13           02/13/2013
 7\. 13           02/14/2013
 8\. 14           02/11/2013
 9\. 14           02/12/2013
10\. 14           02/13/2013 
```

我只需要找到那些只有星期一、星期二和星期三日期的 ID，所以这里应该只返回 ID = 14。我正在使用 Oracle，日期格式为 MM/DD/YYYY。请指教。

问候， 尼丁

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T06:42:12.960

如果日期列是 DATE 数据类型，那么您可以

```
select id
from your_table
group by id
having sum(case 
           when to_char(date_col,'fmday') 
                in ('monday','tuesday','wednesday') then 1
           else 99
           end) = 3; 
```

**编辑**：*在igr的观察中更正了上述代码*

但这只有在您没有一天两次使用同一 ID 时才可以。

如果列是 varchar2 则条件变为`to_char(to_date(your_col,'mm/dd/yyyy'),'fmday') in ...`

更健壮的代码是：

```
select id 
from(
    select id, date_col
    from your_table
    group by id, date_col
)
group by id
having sum(case 
           when to_char(date_col,'fmday', 'NLS_DATE_LANGUAGE=ENGLISH') 
                    in ('monday','tuesday','wednesday') then 1
           else 99
           end) = 3; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T06:40:13.037

做类似的事情

```
SELECT * FROM your_table t 
      where to_char(t.DATE, 'DY') in ('whatever_day_abbreviation_day_you_use'); 
```

或者，如果您愿意，您可以使用天数，例如：

```
SELECT * FROM your_table t 
     where  to_number(to_char(d.ts, 'D')) in (1,2,3); 
```

如果您想避免 ID 重复添加 DISTINCTION

```
SELECT DISTINCT ID FROM your_table t 
     where  to_number(to_char(d.ts, 'D')) in (1,2,3); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T06:58:44.290

```
select id 
from (
  select 
     id, 
     sum (case when to_char(dt, 'D', 'nls_territory=AMERICA') between 1 and 3 then 1 else -1 end) AS cnt
  from t
  group by id
)
where cnt=3 
```

注意：我假设 (id,dt) 是唯一的 - 没有两行具有相同的 id 和日期。

# drools - 以通用方式编写 drl

> ID：14973565
> 
> 赞同：0
> 
> 时间：2013-02-20T06:26:39.330
> 
> 标签：drools, drools-guvnor, drools-fusion

我的要求是我需要计算来自同一客户的订单请求，而无需在规则中硬编码 customerid。原因是如果我有 1000 个客户，那么我需要为此编写 1000 条规则。为避免这种情况，我需要通用方法来处理所有客户对象。

例如，customerA 和 customerB 有四个订单请求对象。我的规则应该能够计算出来自单个客户的请求数量，并且我还需要存储这些对象。

基本上我需要 sql's group by equivalent method in drools 。

请提供指点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:04:26.600

你有没有尝试过这样的事情？：

```
rule 'Count Order Requests'
when
    $c: Customer()
    $n: Number() from accumulate( 
        $o: OrderRequest(customer == $c),
        count($o)
    )
then
    //use $n
end 
```

即使对于没有任何 OrderRequest 的客户，此规则也会触发。如果这不是您想要的，那么您必须在 $n 的 intValue 上添加一个约束：

```
$n: Number(intValue > 0) from accumulate (....) 
```

希望能帮助到你，

# java - 在包含字符串的 ArrayList 中查找索引

> ID：14973566
> 
> 赞同：10
> 
> 时间：2013-02-20T06:26:49.503
> 
> 标签：java, string, arraylist, jsoup, indexof

通过使用 Jsoup，我从网站解析 HTML 以填充`ArrayList`我需要从网站获取的内容。所以现在我有一个`ArrayList`充满字符串的。我想在该列表中找到包含某个字符串的索引。例如，我知道在列表中的某个位置，在某个索引中，有字符串（文字）“Claude”，但我似乎无法编写任何代码来找到`contains`“Claude”在`ArrayList`...中的索引我尝试过但返回`-1`（未找到）：

```
ArrayList < String > list = new ArrayList < String > ();
String claude = "Claude";

Document doc = null;
try {
    doc = Jsoup.connect("http://espn.go.com/nhl/team/stats/_/name/phi/philadelphia-flyers").get();
} catch (IOException e) {
    e.printStackTrace();
}
for (Element table: doc.select("table.tablehead")) {
    for (Element row: table.select("tr")) {
        Elements tds = row.select("td");
        if (tds.size() > 6) {
            String a = tds.get(0).text() + tds.get(1).text() + tds.get(2).text() + tds.get(3).text() + tds.get(4).text() + tds.get(5).text() + tds.get(6).text();

            list.add(a);

            int claudesPos = list.indexOf(claude);
            System.out.println(claudesPos);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-20T17:15:46.637

你很困惑`String.indexOf`和`List.indexOf`。考虑以下列表：

```
list[0] = "Alpha Bravo Charlie"
list[1] = "Delta Echo Foxtrot"
list[2] = "Golf Hotel India"

list.indexOf("Foxtrot") => -1
list.indexOf("Golf Hotel India") => 2
list.get(1).indexOf("Foxtrot") => 11 
```

所以：

```
if (tds.size() > 6) {
  // now the string a contains the text of all of the table cells joined together
  String a = tds.get(0).text() + tds.get(1).text() + tds.get(2).text() +
      tds.get(3).text() + tds.get(4).text() + tds.get(5).text() + tds.get(6).text();

  // now the list contains the string
  list.add(a);

  // now you're looking in the list (which has all the table cells' items)
  // for just the string "Claude", which doesn't exist
  int claudesPos = list.indexOf(claude);
  System.out.println(claudesPos);

  // but this might give you the position of "Claude" within the string you built
  System.out.println(a.indexOf(claude));
}

for (int i = 0; i < list.size(); i += 1) {
  if (list.get(i).indexOf(claude) != -1) {
    // list.get(i).contains(claude) works too
    // and this will give you the index of the string containing Claude
    // (but not the position within that string)
    System.out.println(i);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T08:59:40.513

```
First check whether it is an instance of String then get index

if (x instanceof String) {
    ...
}

for (int i = 0; i < list.size(); i++) {
    if (list.get(i).getX() == someValue) { // Or use equals() if it actually returns an Object.
        // Found at index i. Break or return if necessary.
    }
} 
```

# android - 添加按钮选择语言android应用

> ID：14973572
> 
> 赞同：0
> 
> 时间：2013-02-20T06:27:01.480
> 
> 标签：android, eclipse, button, multilingual

您好，我希望在主布局 Ar + En 上添加两个按钮以打开在 values-ar + values-en 之间选择应用程序的语言

有人可以帮我吗？？？我正在使用 eclipse 来构建我的应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T06:55:43.417

那么您可以使用[`Spinner`](http://developer.android.com/guide/topics/ui/controls/spinner.html)来提供语言选择选项，并且在`onItemSelected`事件中您可以动态更改应用程序的当前默认语言，例如：

```
languageSpinner.setOnItemSelectedListener(new OnItemSelectedListener() {
    @Override
    public void onItemSelected(AdapterView <? > parentView, View selectedItemView, int position, long id) {
    Locale l = null;        
    if(arabic) {
        l = new Locale("en_US");
    } else if(english) {
        l = new Locale("ar_SA");
    }

    Locale.setDefault(l);
    Configuration cfg = new Configuration();
    cfg.locale = locale;
    yourActivity.getApplicationContext().getResources().updateConfiguration(cfg, null);
    }
} 
```

# c# - C#结构中的StructLayoutAttribute有什么优势

> ID：14973573
> 
> 赞同：0
> 
> 时间：2013-02-20T06:27:04.247
> 
> 标签：c#, attributes

我遇到了 use StructLayoutAttribute 但我不知道它对使用有什么帮助。我有一个像

```
[StructLayout(LayoutKind.Sequential)]
public struct XYData
{

    public int x;

    public int y;

    public XYData(int x, int y)
    {
        this.x = x;
        this.y = y;
    }
} 
```

应用属性 StructLayoutAttribute 会对我们有帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T07:18:38.500

正如[StructLayoutAttribute](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.structlayoutattribute.aspx) C# 中指定的那样，已经使用`Sequential`for struct。所以从技术上讲，添加这个属性没有影响：

> C#、Visual Basic 和 C++ 编译器默认将顺序布局值应用于结构。

您可以安全地将此值添加到 C# 代码中的结构中，因为它将显式记录意图，但它是可选的。

如果您自己发出结构或直接使用 IL，则需要指定它。

请注意，对于类，`Sequential`如果您发现您需要类中的特定字段布局，则需要直接指定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T06:31:32.757

仅当此结构被封送为非托管代码时

[见 MSDN 备注](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.structlayoutattribute.aspx)

# c# - 以编程方式启动 Windows Metro 应用程序

> ID：14973580
> 
> 赞同：0
> 
> 时间：2013-02-20T06:27:10.990
> 
> 标签：c#, deployment, windows-8, functional-testing

我是测试新手。我被要求为 Windows Metro 风格应用程序执行功能测试。有没有办法在本地机器环境中使用 C# 以编程方式启动/部署/重新部署 Windows Metro 应用程序？

另外我想知道 C# 语言的 Windows Metro 应用程序是否被认为是原生的或混合的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T06:40:12.683

实例化激活管理器并调用[`IApplicationActivationManager::ActivateInstance`](http://msdn.microsoft.com/en-us/library/windows/desktop/hh706902.aspx). [您可以在“自动测试 Windows 8 应用程序”](http://blogs.msdn.com/b/windowsappdev/archive/2012/09/04/automating-the-testing-of-windows-8-apps.aspx)（该文章包含完整示例）中了解如何执行此操作。

# sql - 即使使用 tablock 和 holdlock 也没有锁定 SQL 表

> ID：14973582
> 
> 赞同：-2
> 
> 时间：2013-02-20T06:27:27.503
> 
> 标签：sql, sql-server, database

我在表上使用 SQL Lock。这是我的查询：

```
set transaction isolation level serializable 
go
begin transaction 

select * from emp
waitfor delay '00:00:40'
rollback transaction 
```

现在，当我尝试从其他地方访问表“emp”时（通过打开另一个查询分析器并在 emp 表上触发选择查询），我仍然得到数据。它不应该返回数据，因为表被锁定了 40 秒。

注意：我也试过 " ***with (tablock,holdlock)*** " ，但还是不行。

我怎样才能让桌子在 40 秒内无法访问？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T09:00:36.457

我得到了我的答案

```
set transaction isolation level serializable 

go

begin transaction 

select * from emp with (TABLOCKX,holdlock)

waitfor delay '00:00:40'

rollback transaction 
```

它锁定表，40 秒后没有其他人可以访问它。

# javascript - 如何修改我的正则表达式以不删除新行

> ID：14973584
> 
> 赞同：0
> 
> 时间：2013-02-20T06:27:33.013
> 
> 标签：javascript, html, regex

我在我的代码中使用这个表达式来删除字符串中的空格。

```
var TestString= some string with blank spaces and/or new lines;
TestString=TestString.replace(/^\&nbsp\;|<br?\>*/gi, '').replace(/\&nbsp\;|<br?\>$/gi, '').trim(); 
```

现在这个正则表达式也删除了一个新行。我需要的是它应该在开始时删除空格，而不是在按下 Enter 时，即创建新行时。

知道如何修改这个表达式来实现吗？

经过一些研究后编辑：

```
TestString=TestString.replace(/&[^;]+;/g, '').replace(/<br\s*\/?>/mg,'\n'); 
```

如果我使用这个表达式，它会用新行显示它们，但上传后它不会显示它们。知道为什么会这样吗？不能在可编辑表 td 元素中创建新行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:41:31.213

将多行模式“m”添加到“/gi”是否有效？

# android - 如何在android中从Arraylist下载所有文件？

> ID：14973588
> 
> 赞同：-1
> 
> 时间：2013-02-20T06:28:10.607
> 
> 标签：android, arraylist, download

我想全部下载视频并保存在 sdcard 中。我在所有文件中都有数组列表。不是单个文件。如何可能。请帮助我。

```
ArrayList<Url_Dto> list = new ArrayList<Url_Dto>(); 
```

提前致谢！！！

DownloadFileFromURL() 中的传递参数是什么。我使用了按钮单击事件。

```
mainDownloadBtn.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                            //what is pass param

                new DownloadFileFromURL().execute();
            }
        }); 
```

可以在下面下载课程::

```
class DownloadFileFromURL extends AsyncTask<Object, String, String> {

        int count = 0;
        ProgressDialog dialog;
        ProgressBar progressBar;
        int myProgress;

        /**
         * Before starting background thread Show Progress Bar Dialog
         * */

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            ProgressBar progressBar;

        }

        /**
         * Downloading file in background thread
         * */
        @Override
        protected String doInBackground(Object... params) {
            Log.v("log_tag", "params  :::; " + params);
            int count;
            progressBar = (ProgressBar) params[0];
            try {
                // URL url = new URL(f_url[0]);
                URL url = new URL((String) params[1]);
                Log.v("log_tag", "name  ::: " + url);
                name = ((String) params[1]).substring(((String) params[1])
                        .lastIndexOf("/") + 1);
                Log.v("log_tag", "name Substring ::: " + name);
                URLConnection conection = url.openConnection();
                conection.connect();
                // getting file length
                int lenghtOfFile = conection.getContentLength();

                // input stream to read file - with 8k buffer
                InputStream input = new BufferedInputStream(url.openStream(),
                        8192);
                download = new File(Environment.getExternalStorageDirectory()
                        + "/download/");
                if (!download.exists()) {
                    download.mkdir();
                }
                String strDownloaDuRL = download + "/" + name;
                Log.v("log_tag", " down url   " + strDownloaDuRL);
                FileOutputStream output = new FileOutputStream(strDownloaDuRL);

                byte data[] = new byte[1024];

                long total = 0;

                while ((count = input.read(data)) != -1) {
                    total += count;
                    // publishing the progress....
                    // After this onProgressUpdate will be called
                    // publishProgress("" + (int) ((total * 100) /
                    // lenghtOfFile));

                    // writing data to file
                    progressBar
                            .setProgress((int) ((total * 100) / lenghtOfFile));
                    output.write(data, 0, count);
                }
                // flushing output
                output.flush();

                // closing streams
                output.close();
                input.close();

            } catch (Exception e) {
                Log.e("Error: ", e.getMessage());
            }

            return null;
        }

        /**
         * Updating progress bar
         * */
        protected void onProgressUpdate(String... values) {

            super.onProgressUpdate(values);
            Log.v("log_tag", "progress :: " + values);
            // setting progress percentage
            // pDialog.setProgress(Integer.parseInt(progress[0]));
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {

            Log.v("log", "login  ::: 4::: " + download);
            String videoPath = download + "/" + name;
            String chpName = name;
            Log.v("log_tag", "chpName  ::::" + chpName + "  videoPath "
                    + videoPath);
            db.execSQL("insert into videoStatus (chapterNo,videoPath) values(\""
                    + chpName + "\",\"" + videoPath + "\" )");

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:17:09.863

[这个链接](http://www.androidsnippets.com/download-an-http-file-to-sdcard-with-progress-notification)提供了一个关于 http 文件下载的想法。有了这个想法，您可以遍历列表中的所有视频 URL。

# android - 为什么软键盘在简历上被隐藏了？

> ID：14973591
> 
> 赞同：11
> 
> 时间：2013-02-20T06:28:23.270
> 
> 标签：android, android-ui

我有如下代码，可以在进入我的应用程序时立即显示软键盘：

```
@Override
protected void onResume() {
    super.onResume();

    ...

    myEditText.requestFocus();
    myEditText.postDelayed(new Runnable() {
        @Override
        public void run() {
            InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.showSoftInput(myEditText, InputMethodManager.SHOW_IMPLICIT);
        }   
    }, 100);

    ...

} 
```

但是，在 Android 2.1 模拟器上，键盘出现然后立即消失。如果我让延迟更长，比如 1000，它会可靠地出现。在 Android 4.0 模拟器上，延迟 100 可以可靠地显示键盘，但较短的延迟不会。

有谁知道谁可能隐藏了键盘？有可靠的方法来预防吗？如果没有，我可以使用延迟来保证键盘会显示吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T05:27:50.683

如果我理解正确，我认为您可以删除以下代码`onResume()`：

```
myEditText.postDelayed(new Runnable() {
    @Override
    public void run() {
        InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.showSoftInput(myEditText, InputMethodManager.SHOW_IMPLICIT);
    }   
}, 100); 
```

并且只需`android:windowSoftInputMode="stateAlwaysVisible"`在清单中用于您的活动。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-05T17:14:07.483

我认为您所看到的是 Android 识别默认情况下应获得焦点的视图并为其提供焦点（隐藏您的键盘）。将延迟设置得更长或更短只会使您的代码在设置焦点之前或之后运行。您可以弄清楚默认情况下哪个视图获得焦点，如果您不希望它获得焦点，请将其设置为 focusable false 和 focusableInTouchMode false。如果它确实需要在某个时候获得焦点，您可以设置一个 onFocusChanged 侦听器，当它第一次获得焦点时，发布您的可运行对象（无延迟）以将焦点提供给 EditText 并打开键盘。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T07:07:30.273

感谢@Daniel Smith 和@Cookster。

~~发生这种情况是因为我没有在清单中设置 windowSoftInputMode，所以它使用了默认值 (stateUnspecified)，它在启动时隐藏了键盘。显然，该设置是在恢复延迟后应用的，因此只有在我的延迟时间长于隐藏它的内置延迟时，我才调用显示键盘才有效。~~

~~为了解决这个问题，我设置了 windowSoftInputMode="stateUnchanged"，然后我总是在 onResume 中隐藏或显示键盘。我还删除了延迟，一旦没有发生内置隐藏，就不再需要延迟。~~

没关系，这缓解了问题（它让我减少了延迟），但它并没有完全解决它。这有一些非常不确定的东西，如果我不使用延迟，键盘将不再出现。但是，如果我重新引入大约 100 毫秒的延迟，键盘似乎在大约 90% 的时间出现，这让我回到了开始的地方：为什么会发生这种情况，什么是安全延迟？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T07:57:00.270

put this code in **onRun()** in **onResume()** method:

```
InputMethodManager imm = (InputMethodManager)getSystemService(
                      Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(myEditText.getWindowToken(), 0); 
```

**[Edit]**

```
@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    text.requestFocus();

    text.postDelayed(new Runnable() {
        @Override
        public void run() {
            InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.showSoftInput(text, InputMethodManager.SHOW_FORCED);
        }   
    }, 100);
    text.postDelayed(new Runnable() {
        @Override
        public void run() {
            InputMethodManager imm = (InputMethodManager)getSystemService(
                      Context.INPUT_METHOD_SERVICE);
            imm.hideSoftInputFromWindow(text.getWindowToken(), 0);
        }   
    }, 200);
} 
```

# php - 错误 ODBC MS SQL

> ID：14973592
> 
> 赞同：0
> 
> 时间：2013-02-20T06:28:28.870
> 
> 标签：php, mysql, sql, sql-server, odbc

我收到此错误

`Warning: odbc_exec() [function.odbc-exec]: SQL error: [Microsoft][ODBC SQL Server Driver][SQL Server]Incorrect syntax near ''., SQL state 37000 in SQLExecDirect in D:\wamp\www\STAPP\sys_admin\1.php on line 23`

`Warning: odbc_exec() [function.odbc-exec]: SQL error: [Microsoft][ODBC SQL Server Driver][SQL Server]Incorrect syntax near ''., SQL state 37000 in SQLExecDirect in D:\wamp\www\STAPP\sys_admin\1.php on line 23`

* * *

```
<?php

require_once("../includes/database_connection.php");
$conn=odbc_connect('stapp','','');

if ( isset( $_FILES['userfile'] ) )
{
$csv_file = $_FILES['userfile']['tmp_name'];

if ( ! is_file( $csv_file ) )
exit('File not found.');

$sql = '';

if (($handle = fopen( $csv_file, "r")) !== FALSE)
{
  while (($data = fgetcsv($handle, 1000, ",")) !== FALSE)
  {

$sql = "INSERT INTO `table` SET `column0` = '$data[0]',

`column1`=            '$data[1]', `column2` = '$data[2]';";

   $rs1=odbc_exec($conn,$sql);

  }
  fclose($handle);
}

// Insert into database

//exit( $sql );
exit( "Complete!" );
}
?> 
```

* * *

第 23 行是 $rs1=odbc_exec($conn,$sql);

任何人都可以在sql语句中帮助我吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T06:39:06.730

插入记录的 SET 方式不是标准的[SQL](https://stackoverflow.com/questions/6973846/insert-into-set-syntax-in-sql-server/6973868#6973868)。最好采用标准方式

```
INSERT into table (column0, column1, column2) values 
('$data[0]', '$data[1]', '$data[2]'); 
```

# vb.net - 获取双数据类型的 NaN

> ID：14973593
> 
> 赞同：2
> 
> 时间：2013-02-20T06:28:29.697
> 
> 标签：vb.net, double, algebraic-data-types

我正在尝试运行一些具有较大值的数学公式，因此我正在使用`Double`数据类型。但是，如果我输入较大的值，我仍然会得到 NaN 的答案。那么我该如何解决呢？

例如，如果我通过 Varx=3 和 countx=1230，我得到的结果是 NaN。

```
Public Function EulerForPro(ByVal Varx As Integer, ByVal Countx As Integer) As Double

    Dim Result1 As Double = 1
    Dim Result2 As Double = Varx
    Dim Result As Double = 0

    For i = 1 To Countx
        Result1 = Result1 + (Math.Pow(-1, i) * Math.Pow(Varx, (2 * i)) / factx(2 * i))
    Next
    For i = 1 To Countx
        Result2 = Result2 + (Math.Pow(-1, i) * Math.Pow(Varx, ((2 * i) + 1)) / factx((2 * i) + 1))
    Next
    Result = Result1 + Result2
    Label2.Text = Result1
    Label3.Text = Result2
    Label4.Text = Result
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T06:32:38.310

使用结果[的对数](https://en.wikipedia.org/wiki/Logarithm)。这是大数字的标准做法。

因此，不要将 a*b 相乘（这会导致溢出），而是使用

```
Y = log(a) + log(b) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T07:33:24.627

您可以尝试改用`Decimal`数据类型。它可以保存一个大约为整数的值`7,9 x 10^28`（确切的数字是`2^96 - 1`，因为它可以使用 128 位中的 96 位来存储值的整数部分）。但是，它是一种复杂的数据类型，您应该仔细考虑如何在代码中使用它。并非所有隐式转换都有效，尤其是在使用`Double`.

有关. [_](http://msdn.microsoft.com/en-us/library/364x0z75%28v=vs.100%29.aspx) _`Decimal`

# struts2 - 在阿拉伯语的struts2国际化中，如何将文本框中的光标自动更改为rtl？

> ID：14973594
> 
> 赞同：3
> 
> 时间：2013-02-20T06:28:30.367
> 
> 标签：struts2, internationalization, arabic

我已经在我的 Struts2 应用程序中实现了国际化，并且工作正常，但是当我选择阿拉伯语作为语言时，如何将所有 jsp 中的所有文本框中的光标位置自动更改为 RTL？

如果你能给我一个简单的例子，那将非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T10:10:47.773

如何在 JSP-s`dir`中为标签添加属性`<html>`，使用 Struts2`<s:if>`标签检查当前语言环境：

```
<html <s:if test="locale.language == 'ar'">dir="rtl"</s:if> >
  ...
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:39:25.320

试试这个（*未测试*）

好吧，它很简单。假设您将当前选择的语言存储在会话中，名称为 name `currlang`。然后在每个文本框上做

`<s:textfield label="Some Test Box" name="nameit" cssStyle="<s:if test="#session['currlang'] == 'arbic'">direction: rtl;</s:if>"/>`

# android - 在移动背景上随机添加精灵

> ID：14973597
> 
> 赞同：0
> 
> 时间：2013-02-20T06:28:40.007
> 
> 标签：android, andengine

我正在使用andengine并尝试制作一个简单的赛车游戏。在这里，我可以移动道路并且能够将汽车放在道路上，并且它显示就像汽车在移动一样。现在可以了。现在这里是我发现令人担忧且无法实施的部分。一个。我将如何在与目标汽车相反的方向上随机添加新的精灵（汽车）并在路边显示一些树木（因为现在它只是一条简单的道路）。湾。我将如何增加和减少背景道路和路上汽车的速度。我试图这样做，但应用程序挂起我也试图使用 Sensor-manger 类来获取设备的时刻。我知道我要求很多，但我需要一些路径才能开始。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T06:45:32.897

> **我将如何在移动的道路上添加新的精灵（汽车）......**

还有其他构造函数，但是怎么样

```
Sprite car = new Sprite(X, Y, TextureRegion, context); 
```

* * *

> **...随机时间...**

在注册实体更新线程中：

```
Random randomGenerator = new Random();
int randomInt = randomGenerator.nextInt(100);
int chanceOfNewCar = 5;  
if (randomInt < chanceOfNewCar) {
   // Add your car code.
} 
```

* * *

> **...目标车的相反方向...**

不知道你的目标车是如何移动的，但这里有一个疯狂的刺：

```
newCarVelocity = -targetCarVelocity; 
```

* * *

> **...并展示路边的一些树木...**

请参阅上面的示例以显示汽车精灵。

* * *

> **..我将如何增加和减少两条背景路的速度...**

路有速度吗？你的意思是移动的背景？如果是这样，请更快地移动汽车并让相机追逐它（这样背景看起来会更快地平移）。

* * *

> **..还有路上的车...**

汽车和道路有速度吗？你现在怎么搬家？

* * *

> **...我试图做，但应用程序挂起...**

调试。

* * *

> **...我也在尝试使用 Sensor-manger 类来获取设备的时刻...**

凉爽的。

# ios - 暂停和恢复“线”增长动画

> ID：14973598
> 
> 赞同：0
> 
> 时间：2013-02-20T06:28:53.433
> 
> 标签：ios, objective-c, core-animation, uiviewanimation

![我需要实现的动画。 请帮我。](../Images/19e6810aa33068d5e017af5d300c8d2e.png)

我尝试了很多方法但无法顺利完成，我是动画中的新手，任何帮助将不胜感激。

我试过的代码：

我需要在两个数组中添加按钮和标签。eventBtnsPopUpArray 和 eventLabelsPopUpArray。我尝试将它们添加到循环中，并且动画不流畅。

```
if ([eventBtnsPopUpArray count]>0)
{           

    CABasicAnimation* scalingAnimation;
    scalingAnimation = [CABasicAnimation animationWithKeyPath:@"frame.size"];;
    scalingAnimation.fromValue = [NSNumber numberWithFloat:0];
    scalingAnimation.toValue = [NSNumber numberWithFloat:1024];
    scalingAnimation.duration = 5.0;
    scalingAnimation.cumulative = YES;
    scalingAnimation.removedOnCompletion = NO;
    scalingAnimation.fillMode = kCAFillModeForwards;
    [calendarEventView.layer addAnimation:scalingAnimation forKey:@"rotationAnimation"];

  for (int k=0; k<[eventBtnsPopUpArray count]; k++)
{
    UIButton *btn = [eventBtnsPopUpArray objectAtIndex:0];
    UILabel *lbl = [eventLabelsPopUpArray objectAtIndex:0];

    [UIView animateWithDuration:2
                          delay:0
                        options: UIViewAnimationCurveEaseOut
                     animations:^{

                         [self addSubview:btn];
                         [self addSubview:lbl];

                     }
                     completion:^(BOOL finished){
                         [self pauseLayer:calendarEventView.layer];

                         [self resumeLayer:calendarEventView.layer];
                     }
     ];

}

if (calendarEventView.frame.size.width < 1024) {
    [UIView beginAnimations:@"DrawLineTillEnd" context:nil];
    [UIView setAnimationDuration:1.0];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
    calendarEventView.frame = CGRectMake(0, 65, 1024, 7);
    [UIView commitAnimations];
}
} 
```

//暂停和恢复图层功能

```
 -(void)pauseLayer:(CALayer*)layer
    {
     CFTimeInterval pausedTime = [layer convertTime:CACurrentMediaTime() fromLayer:nil];
     layer.speed = 0.0;
    layer.timeOffset = pausedTime;
    }  

    -(void)resumeLayer:(CALayer*)layer
    {
    CFTimeInterval pausedTime = [layer timeOffset];
    layer.speed = 1.0;
    layer.timeOffset = 0.0;
    layer.beginTime = 0.0;
    CFTimeInterval timeSincePause = 
    [layer convertTime:CACurrentMediaTime()  fromLayer:nil] - pausedTime;
    layer.beginTime = timeSincePause;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:40:05.837

我认为您不需要使用核心动画，只需使用 NSTimer 并使用更改变量调整 UIView 的框架（宽度）......检查宽度的简单条件语句（if-statement）可以将其停止在某个点并添加第一个所需的 UIButton。单击此按钮将更改一个布尔值，这将触发 NSTimer 中的代码继续行增长，直到达到下一个 if 语句定义的下一个宽度。等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T06:42:25.943

我不知道如何使用 coreplot 或 coreanimation 来做到这一点，但是通过查看动画来做到这一点真的很简单

例如

```
-(void)animateLine{
   UILabel *labelObj = [[UiLabel alloc]init];
   //Set background image and height of label say 100 pixel
   for(int incrementer = 0; incrementer<100; incrementer ++)
    {
         [UIView beginAnimations:nil context:nil];
         [UIView setAnimationDuration:0.01];
         [labelObj setFrame:cgRectMake(0,100,incrementer,20)];
         [uiview commitAnimation];
    }
} 
```

# c# - 如何将电子邮件、姓名、电话等表单值从我的 C# 控制台应用程序传递到任何网站？

> ID：14973599
> 
> 赞同：0
> 
> 时间：2013-02-20T06:28:53.553
> 
> 标签：c#, web, console

**如何从我的控制台应用程序将电子邮件、电话、姓名等值传递到任何网站。我想开发一个控制台应用程序，它打开一个网站 URL 并填写表格并提交。**

```
using System;
using System.Diagnostics;
using System.Net;

namespace SampleNamespace
{
    public class SampleClass
    {
        public static void Main()
                {
            string url;
            string browser="";
            string browserpath="";  
            Console.WriteLine("Please enter a website URL (eg. http://www.google.com): ");
            url=Console.ReadLine();
            while(browser.ToUpper()!="CHROME" && browser.ToUpper()!="MOZILLA" && browser.ToUpper()!="IE" && browser.ToUpper()!="OPERA")
            {
                Console.WriteLine("In which browser you want to open a website? (Chrome | Mozilla | IE | Opera) ");
                browser=Console.ReadLine();
                if (browser.ToUpper()!="CHROME" && browser.ToUpper()!="MOZILLA" && browser.ToUpper()!="IE" && browser.ToUpper()!="OPERA"){
                Console.WriteLine("Please enter correct option!!!");
            }

            if (browser.ToUpper()=="CHROME")
            {
                browserpath=@"C:\Users\weblink\AppData\Local\Google\Chrome\Application\chrome.exe";
            }
            else if(browser.ToUpper()=="MOZILLA")
            {
                browserpath=@"C:\Program Files\Mozilla Firefox\firefox.exe";
            }
            else if(browser.ToUpper()=="IE")
            {
                browserpath=@"C:\Program Files\Internet Explorer\iexplore.exe";
            }
            else if(browser.ToUpper()=="OPERA")
            {
                browserpath=@"C:\Program Files\Opera\opera.exe";
            }
            Process.Start(browserpath,url);
            System.Console.WriteLine("Please press eenter key to exit!");
            Console.ReadLine();
        }
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T06:33:59.800

如果您的目标是简单地从您的应用程序发布到网站，则无需担心使用浏览器。

您可以使用 java 库直接连接到相关网站（例如：[http](http://hc.apache.org/httpclient-3.x/apidocs/org/apache/commons/httpclient/HttpClient.html) ://hc.apache.org/httpclient-3.x/apidocs/org/apache/commons/httpclient/HttpClient.html ）

有很多发送 HTTP POST 请求的例子：

*   [Java - 通过 POST 方法轻松发送 HTTP 参数](https://stackoverflow.com/questions/4205980/java-sending-http-parameters-via-post-method-easily)
*   [http://sigterm.sh/2009/10/simple-post-in-java/](http://sigterm.sh/2009/10/simple-post-in-java/)

您甚至不需要加载有问题的表单（通常）。您可以简单地向表单的操作（目标）提供 POST 请求。

假设有问题的表格来自[http://example.com/forms/](http://example.com/forms/)

您将 POST 到 URL [http://example.com/forms/contact.html](http://example.com/forms/contact.html)

如果您正在尝试开发垃圾邮件机器人，那么您就落后了;-)

# asp.net - 在.net中如何突出显示pdf文件中的特定文本

> ID：14973601
> 
> 赞同：0
> 
> 时间：2013-02-20T06:29:09.190
> 
> 标签：asp.net, pdf, itextsharp

我在 asp.net 中创建了一个带有以下控件的表单。文件上传、搜索文本框和搜索按钮。

浏览要上传的pdf文件后。我将在文本框中输入一些文本“内容”，然后单击按钮意味着pdf文件应该在网页中打开，并且在文本框（内容）中输入的文本被突出显示在黄色背景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:09:35.460

要突出显示 Pdf 中的文本 - 使用以下代码

```
protected void Button1_Click(object sender, EventArgs e)
{
   PdfReader read = new PdfReader("C:\\Test.pdf");
   Chunk chk = new Chunk("TextBox1.Text", new Font(Font.TIMES_ROMAN, 14, Font.ITALIC));
   chk.SetBackground(new Color(0xFF, 0x00, 0x00), 10, -50, 20, -10);
} 
```

# json - 如何通过angularjs $resource访问json中的嵌套对象

> ID：14973602
> 
> 赞同：6
> 
> 时间：2013-02-20T06:29:16.987
> 
> 标签：json, rest, angularjs, nested

我有提供 REST 服务的 .NET WCF 服务。一切都对我有用，直到我尝试发送带有嵌套对象的对象。然后我在 angularjs 中一无所获。如何使用/访问嵌套对象进行数据交换？

.NET 服务部分：

```
[OperationContract] // route prefix 'api'
    [WebGet(UriTemplate = "users/{id}/privileges", ResponseFormat = WebMessageFormat.Json)]
    public PrivilegeSet GetPrivileges(string id)
    {
        var response = new PrivilegeSet();

        List<Role> roles = new List<Role>();
        roles.Add(new Role() { RoleId = 1, Name = "Role 1", Active = true });
        roles.Add(new Role() { RoleId = 2, Name = "Role 2", Active = true });
        roles.Add(new Role() { RoleId = 3, Name = "Role 3", Active = false });
        response.Roles = roles;

        List<SubRole> subRoles = new List<SubRole>();
        subRoles.Add(new SubRole() { SubRoleId = 1, Name = "SubRole 1", RoleId = 1, Active = true });
        subRoles.Add(new SubRole() { SubRoleId = 2, Name = "SubRole 2", RoleId = 1, Active = true });
        subRoles.Add(new SubRole() { SubRoleId = 3, Name = "SubRole 3", RoleId = 1, Active = false });
        response.SubRoles = subRoles;

        return response;
    } 
```

JSON结构：

```
{
"Roles": [
{
  "Active": true,
  "Name": "Role 1",
  "RoleId": 1
},
{
  "Active": true,
  "Name": "Role 2",
  "RoleId": 2
},
{
  "Active": false,
  "Name": "Role 3",
  "RoleId": 3
}
],
"SubRoles": [
{
  "Active": true,
  "Name": "SubRole 1",
  "RoleId": 1,
  "SubRoleId": 1
},
{
  "Active": true,
  "Name": "SubRole 2",
  "RoleId": 1,
  "SubRoleId": 2
},
{
  "Active": false,
  "Name": "SubRole 3",
  "RoleId": 1,
  "SubRoleId": 3
}
]
} 
```

Angularjs服务：

```
angular.module('privilegeService', ['ngResource']).
    factory('Privilege', function ($resource) {
        return $resource('api/users/:userId/privileges', {userId: '@id'});
    }); 
```

Angularjs 获取部分：

```
function PrivilegesCtrl($scope, Privilege) {
    $scope.privileges = Privilege.query({userId:2}); // privileges remains empty using nested objects, with one level object works fine
    ... 
```

当 JSON 有嵌套对象时，为什么权限仍然为空？以及如何访问视图中的嵌套对象？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T07:34:21.150

当您使用[$resource](http://docs.angularjs.org/api/ngResource.%24resource)服务时，该`.query`操作假定您的响应是一个数组。`.query`您可以通过在使用下面的第三个参数创建资源时指定它来指定使用时响应不是数组：

```
angular.module('privilegeService', ['ngResource']).
    factory('Privilege', function ($resource) {
        return $resource('api/users/:userId/privileges', 
                         {userId: '@id'}, 
                         {'query':  {method:'GET', isArray:false}});
    }); 
```

看看[这个 plnkr](http://plnkr.co/edit/QYKAKvqO9OX8n9uuBSGx?p=preview)的例子。如果您取出`{'query': {method:'GET', isArray:false}}`您的响应将是一个空数组。

**注意 1：**您的控制台可能会显示错误`TypeError: Object #<Resource> has no method 'push'`，当使用 时`.query`，通常意味着您的 REST 调用需要一个数组。

**注 2：**资源操作默认值在[$resource](http://docs.angularjs.org/api/ngResource.%24resource)文档中描述如下：

```
{ 'get':    {method:'GET'},
  'save':   {method:'POST'},
  'query':  {method:'GET', isArray:true},
  'remove': {method:'DELETE'},
  'delete': {method:'DELETE'} }; 
```

# c# - 根据几个选项检查文本

> ID：14973607
> 
> 赞同：1
> 
> 时间：2013-02-20T06:29:51.130
> 
> 标签：c#, .net, regex, cassette

我对我的正则表达式非常生疏，并且花了大约 2 个小时试图做一些应该非常简单的事情。

基本上，我想要一个可以检查一堆文件名的正则表达式（最终目标是排除不相关的文件名 - 这是为了使用 Cassette 中的 FileSearch 类来排除不必要的 javascipt 文件）。

到目前为止我的表达是：

```
(^.+\.+min.js$) | (^Microsoft.$) | (^.+\.+min.js$) | (^.+vsdoc.js$) 
```

我要匹配的文本（文件名）是

```
jquery-ui-i18n.min.js 
```

这在 Espresso 中有效，但是当我对一些 .NET 代码实际运行它时，没有匹配项：

```
 static void Main(string[] args)
{
  System.Text.RegularExpressions.Regex reg =
    new System.Text.RegularExpressions.Regex(@"(^.+\.+min.js$) | (^Microsoft.$) | (^.+\.+min.js$) | (^.+vsdoc.js$)", System.Text.RegularExpressions.RegexOptions.None);

  if (reg.IsMatch("jquery-ui-i18n.min.js"))
    Console.WriteLine("match");
  else
    Console.WriteLine("no match");

  Console.Read();
} 
```

是否有任何正则表达式传奇可以向我展示光芒！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:37:32.160

我会用

```
(\.min\.js|Microsoft.|\.min\.js|vsdoc\.js)$ 
```

* * *

你的正则表达式有很多错误

```
(^.+\.+min.js$) | (^Microsoft.$) | (^.+\.+min.js$) | (^.+vsdoc.js$)
 -           -   -                      
 |           |   |->space would make ^ meaningless unless you use IgnorePatternWhiteSpace option 
 |           |->instead of repeating $ in each group you can keep it outside all the groups
 |->^ is not required because you only want to check the end 
```

# python - 混淆类属性和实例属性

> ID：14973612
> 
> 赞同：0
> 
> 时间：2013-02-20T06:30:02.457
> 
> 标签：python, django

假设我有这个 django 模型

```
class Article(object):
       title = models.CharField(max_length=320)
       body  = models.CharField(max_length=320)
       def __init__(self):
              setattr(Article,"user",get_logged_username()) 
```

那只是示例代码

我只想知道，因为我设置的是类属性而不是实例属性，所以我的每个用户都将具有相同的`user`属性

像最初一样，`john`然后是其他人的浏览器，然后单击添加新文章

那么如果我检查我的`user`，那么他的用户名是否相同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:32:14.720

您在这里设置了一个*类*属性，因为`Article`它是一个类。

这意味着您的所有实例都将共享此属性：

```
>>> class Article(object):
...     def __init__(self, user):
...         Article.user = user
...         

>>> article_john = Article('John')
>>> article_elli = Article('Ellie')                                                 

>>> article_john.user  # Modified by the second Article creation!
'Ellie' 
```

但是请注意，对象（实例）可以有自己的`user`属性，它会覆盖类属性：

```
>>> article_john.user = 'This was initially John'
>>> article_ellie.user  # Unmodified, because it access the class attribute Article.user
'Ellie' 
```

每个实例的属性只需使用`self.user = get_logged_username()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T06:36:28.857

看起来您想设置*实例属性*，而不是类属性。

```
setattr(self,"user",get_logged_username()) 
```

或者...

```
this.user = get_logged_username() 
```

如果您希望该类的所有实例最初都具有`name`属性`john`，则只需在声明该类时创建 when 。

```
class Article:
    name = 'john' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T06:46:59.973

请注意，每次创建新实例都会将类属性`user`设置为相同的值：

```
class Article(object):
       title = '111'
       body  = '222'
       def __init__(self):
              setattr(Article,"user",145)

aaaaaaa = Article()
print '# aaaaaaa = Article()  /done'
print '  aaaaaaa.__dict__ == %r ' % aaaaaaa.__dict__
print '  aaaaaaa.user == %r ' % aaaaaaa.user
print '  Article.user == %r\n' % Article.user

aaaaaaa.user = 2000
print '# aaaaaaa.user = 2000  /done'
print '  aaaaaaa.__dict__ == %r ' % aaaaaaa.__dict__
print '  aaaaaaa.user == %r ' % aaaaaaa.user
print '  Article.user == %r\n' % Article.user

Article.user = 'JUJU'
print "# Article.user = 'JUJU'  /done"
print '  aaaaaaa.__dict__ == %r ' % aaaaaaa.__dict__
print '  aaaaaaa.user == %r ' % aaaaaaa.user
print '  Article.user == %r\n' % Article.user

bbbbbbb = Article()
print '# bbbbbbb = Article()  /done'
print '  aaaaaaa.__dict__ == %r ' % aaaaaaa.__dict__
print '  aaaaaaa.user == %r ' % aaaaaaa.user
print '    bbbbbbb.__dict__ == %r ' % bbbbbbb.__dict__
print '    bbbbbbb.user == %r ' % bbbbbbb.user
print '    Article.user == %r ' % Article.user 
```

结果

```
# aaaaaaa = Article()  /done
  aaaaaaa.__dict__ == {} 
  aaaaaaa.user == 145 
  Article.user == 145

# aaaaaaa.user = 2000  /done
  aaaaaaa.__dict__ == {'user': 2000} 
  aaaaaaa.user == 2000 
  Article.user == 145

# Article.user = 'JUJU'  /done
  aaaaaaa.__dict__ == {'user': 2000} 
  aaaaaaa.user == 2000 
  Article.user == 'JUJU'

# bbbbbbb = Article()  /done
  aaaaaaa.__dict__ == {'user': 2000} 
  aaaaaaa.user == 2000 
    bbbbbbb.__dict__ == {} 
    bbbbbbb.user == 145 
    Article.user == 145 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T06:49:53.277

设置类属性时，您可能希望将自己限制为将在该类的许多或所有实例之间共享的对象。对于每个实例将改变或唯一的值，在**init** () 方法中设置它们。

例如，您可能有一个在创建实例时使用的 threading.Lock 实例，然后是每个实例 threading.Lock 将用于每个实例的同步任务。

```
class Article:
    creation = threading.Lock
    count = 0

    def __init__ (self):
        Article.creation.acquire ()

        self.id = Article.count
        self.lock = threading.Lock

        Article.count += 1
        Article.creation.release ()

    def critical (self):
        self.lock.acquire ()

        # Something sensitive happens here.

        self.lock.release () 
```

回到你原来的问题，你可能想要：

```
class Article(object):

   def __init__(self):
       self.title = models.CharField(max_length=320)
       self.body  = models.CharField(max_length=320)
       self.user  = get_logged_username() 
```

# iphone - UITableView 滚动时 UISearchBar 滚动

> ID：14973614
> 
> 赞同：4
> 
> 时间：2013-02-20T06:30:11.103
> 
> 标签：iphone, ios, uitableview, scroll, uisearchbar

如何实现`UISearchBar`类似 Instagram.app 的滚动效果？`UISearchBar`向上滚动时 向上`UITableView`滚动。当`UISearchBar`origin.y 等于 0 时停止向下滚动； ![在此处输入图像描述](../Images/4718c7e82f2336ee66f3da4fc985e3a6.png)

![在此处输入图像描述](../Images/7c0c04bd518c35a203bbae352d3004d1.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T12:42:50.473

我的解决方案如下：

```
- (void)viewDidLoad
{
[super viewDidLoad];
self.myTableview.delegate = self;
self.myTableview.dataSource = self;
self.mySearchBar = [[UISearchBar alloc] initWithFrame:CGRectMake(0, 0, 320, searchBarHeight)];
[self.myTableView setContentInset:UIEdgeInsetsMake(searchBarHeight, 0, 0, 0)];
[self.myTableView setFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];

}

- (void)scrollViewDidScroll:(UIScrollView *)scrollView{
CGPoint offset = scrollView.contentOffset;
float move = offset.y + searchBarHeight;
if (move > -2*searchBarHeight && move <3*searchBarHeight) {
    [UIView animateWithDuration:0.1
                          delay:0
                        options:UIViewAnimationOptionCurveEaseOut|UIViewAnimationOptionAllowUserInteraction
                     animations:^{
                         CGRect searchBarFrame = self.mySearchBar.frame;
                         searchBarFrame.origin.y = MIN(MAX(-move, -searchBarHeight), 0);

                         [self.mySearchBar setFrame:searchBarFrame];

                     }

                     completion:^(BOOL f) {

                     }];
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T06:39:50.543

创建一个 UISearchBar 实例并将其设置为 tableView Header View

```
 [tableView setTableHeaderView:yourSearchBar]; 
```

它现在将使用 tableView 滚动

# java - 使用java查找MongoDB中数组元素的平均值

> ID：14973615
> 
> 赞同：1
> 
> 时间：2013-02-20T06:30:13.987
> 
> 标签：java, mongodb, aggregation-framework

我是 MongoDB 的新手。我必须在 Mongo DB 中找到数组元素的平均值，例如

```
{
"_id" : ObjectId("51236fbc3004f02f87c62e8e"),
"query" : "iPad",
"rating" : [
    {
        "end" : "130",
        "inq" : "403",
        "executionTime" : "2013-02-19T12:27:40Z"
    },
    {
        "end" : "152",
        "inq" : "123",
        "executionTime" : "2013-02-19T12:35:28Z"
    }
]
} 
```

我想要查询的“inq”平均值：iPad

这里的输出应该是：

```
inq=263 
```

我在谷歌搜索并得到`aggregate method`但无法将其转换为 java 代码。

提前致谢

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T05:52:08.613

让我们尝试分解这个问题。我将从：

```
db.c.aggregate({$match: {query: "iPad"}}, {$unwind:"$rating"}, {$project: {_id:0,
q:"$query",i:"$rating.inq"}}) 
```

投影不是必需的，但使其余部分更具可读性：

```
{
    "result" : [
            {
                    "q" : "iPad",
                    "i" : "403"
            },
            {
                    "q" : "iPad",
                    "i" : "123"
            }
    ],
    "ok" : 1
} 
```

那么我该如何分组呢？当然，通过“$q”：

```
db.c.aggregate({$match: {query: "iPad"}}, {$unwind:"$rating"}, {$project: {_id:0, 
q:"$query",i:"$rating.inq"}}, {$group:{_id: "$q"}}) :

{ "result" : [ { "_id" : "iPad" } ], "ok" : 1 } 
```

现在让我们添加一些聚合运算符：

```
db.c.aggregate({$match: {query: "iPad"}}, {$unwind:"$rating"}, {$project: {_id:0, q:"$query",i:"$rating.inq"}}, {$group:{_id: "$q", max: {$max: "$i"}, min: {$min: "$i"}}}) :

{
    "result" : [
            {
                    "_id" : "iPad",
                    "max" : "403",
                    "min" : "123"
            }
    ],
    "ok" : 1
} 
```

现在是平均值：

```
db.c.aggregate({$match: {query: "iPad"}}, {$unwind:"$rating"}, {$project:  
{_id:0,q:"$query",i:"$rating.inq"}}, {$group:{_id: "$q", av: {$avg:"$i"}}}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T07:37:43.640

尝试获取 mongodb 的 java 驱动程序。我可以从 mongodb 站点获取此链接。请检查：[http ://docs.mongodb.org/ecosystem/tutorial/use-aggregation-framework-with-java-driver/#java-driver-and-aggregation-framework](http://docs.mongodb.org/ecosystem/tutorial/use-aggregation-framework-with-java-driver/#java-driver-and-aggregation-framework)

# c++ - 从 unsigned const char * 类型转换为 char const *

> ID：14973622
> 
> 赞同：4
> 
> 时间：2013-02-20T06:30:56.850
> 
> 标签：c++, c, visual-c++

我想转换`unsigned const char *`为`char const *`传递给`strcpy`函数

请提出一些方法

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T06:44:00.270

```
(const char *) my_signed_char 
```

在 C++ 中，有更多惯用的方法来转换它，但是由于您使用的是 strcpy，因此您似乎不是在编程惯用的 C++。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T06:39:49.010

在 ANSI CI 中相信它应该可以工作，例如：

```
#include <string.h>

int main() {

  const char *s="test";

  unsigned const char *d = s;
  char dest[1000];

  strcpy(dest,d);
} 
```

您可以尝试添加演员表：

```
#include <string.h>

int main() {

  const char *s="test";

  unsigned const char *d = s;
  char dest[1000];

  strcpy(dest,(const char *) d);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T06:36:12.093

这对我有用；这是你的想法吗？

```
#include <stdio.h>
#include <string.h>

int main(int argc, char ** argv)
{
   const char foo[] = "foo";
   unsigned const char * x = (unsigned const char *) foo;

   char bar[20];
   strcpy(bar, (const char *)x);

   printf("bar=[%s]\n", bar);
   return 0;
} 
```

请注意，如果您尝试将 (unsigned const char *) 指针传递给 strcpy 的第一个参数，那么您可能正在尝试做一些您不应该做的事情（编译器将其标记为错误是正确的）；因为 strcpy() 将写入其第一个参数指向的内存，而 const 指针是不应写入其数据的指针。

# objective-c - 来自 UIWindow 的子视图并将其发送回 UIWindow

> ID：14973623
> 
> 赞同：0
> 
> 时间：2013-02-20T06:30:58.760
> 
> 标签：objective-c, uiwebview, uiwindow

我有一个`UIWebView`加载div，充当编辑器来写。现在我添加`UIWebView`为子视图`UIWindow`以将框架设置为全屏并隐藏`UIKeyboard`，但在某些按钮方法中，我需要从中获取`UIWebview`并将`UIWindow`其发送回`UIKeyboard`。这是我的代码不起作用：

```
 keyboardWindowFrame= nil;

for (UIWindow *testWindow in [[UIApplication sharedApplication] windows])
{
    if (![[testWindow class] isEqual:[UIWindow class]])
    {
        keyboardWindowFrame = testWindow;
        [webViewForEditing setFrame:CGRectMake(5, 63, 310, 400)];
        [webViewForEditing.scrollView setContentSize:CGSizeMake(310, 400)];
        [keyboardWindowFrame addSubview:webViewForEditing];

        break;
    }

}
- (IBAction)keyboardButtonSelected:(id)sender
{
   [keyboardWindowFrame sendSubviewToBack:webViewForEditing];  //need to send UIWebView back to UIWindow so i can write
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-25T22:13:44.253

我想我正在尝试和你做同样的事情，所以虽然你的问题不是特别清楚，但希望我的回答会有所帮助。

似乎您有一个要添加并放在键盘前面的视图“webViewForEditing”。当您单击一个按钮时，您希望再次将此视图放在键盘后面。

我也尝试过使用 sendSubViewToBack 代码，但没有任何乐趣。

最后，虽然我设法让它使用：

```
[[self view] exchangeSubviewAtIndex:  withSubviewAtIndex: ]; 
```

（归功于 Sunny，它改编自[这里](https://stackoverflow.com/questions/15333193/send-subview-1-layer-back)的一个问题）

我使用下面的代码在 UIView 和键盘之间切换：

```
- (IBAction)toggleButtonPressed:(id)sender {

    UIWindow * window = [UIApplication sharedApplication].windows.lastObject;

    if (window.subviews.count == 1) {

        [window addSubview:_menuView];
    }
    else {

        [window exchangeSubviewAtIndex: 0 withSubviewAtIndex: 1];
    }
} 
```

我只使用两个视图（_menuView 和键盘），这意味着我检查我的窗口必须有多少子视图，以确保我只添加一次 _menuView。

然后很容易交换两种观点。

即使您的窗口中有更多子视图，我相信您也可以使用它的修改版本。只要您的其他视图都没有更改位置，那么交换它们将始终切换相同的两个视图。

注意：顺便说一句。我不确定如果在键盘不是第一响应者时调用此代码是否有效。我使用窗口中的最后一个对象获取 Window 的变量，如果它已成为第一响应者，则它始终是键盘。它可能需要调整以使其在其他时间工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-26T04:47:40.303

在处理这个问题时，我制定了另一个更有说服力的答案：

将所需的视图添加到包含键盘视图的窗口视图中：

```
@interface BViewController : UIViewController {

    UIWindow * window;
}

// Add the code when the keyboard is showing to ensure it is added while we have a keyboard and to make sure it is only added once
-(void) keyboardDidShow: (NSNotification *) notification {

    window = [UIApplication sharedApplication].windows.lastObject;

    if (window.subviews.count == 1) {

        [window addSubview:_menuView];
        [window addSubview:_gameView];
        [window addSubview:_stickerView];

        [self hideViews];
    }
}

- (void)hideViews {

    _menuView.hidden = YES;
    _gameView.hidden = YES;
    _stickerView.hidden = YES;
} 
```

所以现在我们有了 UIWindow 视图，其中包含我们的视图和键盘。它们都是隐藏的，所以我们的键盘出现在前面并且可以输入。

现在使用一个简单的函数来决定将哪个视图带到键盘前面：

```
- (void)bringViewToFront: (UIView *)view {

    [self hideViews];
    view.hidden = NO;
} 
```

隐藏视图确保我们只有在前面有正确的视图。

我花了很多时间思考如何使用交换功能来前后移动不同的视图。实际上使用隐藏和显示意味着我们可以立即获得我们的视图，并且仍然可以通过隐藏所有视图轻松访问键盘。

# php - php中的图片上传管理

> ID：14973624
> 
> 赞同：0
> 
> 时间：2013-02-20T06:31:15.033
> 
> 标签：php, image-processing, amazon-s3

在我们的应用程序中，允许用户上传尺寸为 1024 X 768（约 150 KB）的图像。
当用户上传图片时，会发生以下事情：

1）图像上传到临时目录
2）将图像裁剪成四种不同的尺寸。
3）在亚马逊s3服务器上上传原始图像及其裁剪图像。

上述过程证明对用户来说是耗时的。

在使用 xdebug 进行分析后，似乎 90% 的时间都花在了在 amazon s3 上上传图像上。我正在使用下面给出的方法将图像保存在亚马逊 s3 存储桶中

```
public function saveInBucket( $sourceLoc,$bucketName = '', $destinationLoc = '' ) {        
   if( $bucketName <> '' && $destinationLoc <> '' && $sourceLoc <> '') {   
        $s3 = new AmazonS3();
        $response = $s3->create_object( $bucketName.'.xyz.com',$destinationLoc, array(
                                            'contentType' => 'application/force-download',
                                            'acl' => AmazonS3::ACL_PUBLIC,
                                            'fileUpload' => $sourceLoc
                                            )
                                       );

        if ( ( int ) $response->isOK() ) {
            return TRUE;
        }

        $this->ErrorMessage = 'File upload operation failed,Please try again later';
        return FALSE;
    }
    return FALSE;
} 
```

我也想过将图像直接上传到 amazon s3，但我不能这样做，因为我还必须将图像裁剪成 4 种不同的尺寸
如何加快或改进图像管理过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T02:44:07.500

这以前发生在我身上。你可以做的是：

调整图像大小时，必须转换为字符串。我正在使用**WideImage**类。

例子：

```
 $image = WideImage::load($_FILES["file"]['tmp_name']);
    $resized = $image->resize(1024);
    $data = $resized->asString('jpg'); 
```

然后当你在亚马逊上上传时，你必须使用参数'body'而不是'fileUpload'。

例子：

```
 $response = $s3->create_object( $bucketName.'.xyz.com',$destinationLoc, array(
                                        'contentType' => 'application/force-download',
                                        'acl' => AmazonS3::ACL_PUBLIC,
                                        'body' => $data
                                        )
                                   ); 
```

我希望这会有所帮助。

# selenium-webdriver - 如何在硒的标签之间提取数据

> ID：14973626
> 
> 赞同：1
> 
> 时间：2013-02-20T06:31:17.357
> 
> 标签：selenium-webdriver

如何在“帮助文件”类之后提取数据。在这里，这个文本帮助文件是一个链接，点击它会引导我进入另一个表单。你们中的任何人都可以建议我如何进行。我是 Selenium 的新手，我在这里很受打击。
我尝试通过提取 xpath，但它为我提供了我正在使用 selenium webdriver 和 eclipse ide的主页的路径。我的项目只支持 IE。

```
<TD align="left" width="185px" NOWRAP valign="top">
    <a class="wlcmhding"><IMG  SRC="../../images/image1.jpg" border="0"></a><BR>
          <a href="/prj1//ex12Servlet?action=exampleForm" class="wlcmlink">HELP FILE</a><BR>
    <a href="/prj1//ex12Servlet?action=exampleForm" class="wlcmlink">CODE FILE</a><BR>
</TD> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T08:29:41.597

**试试这个代码：**

```
// Assume driver in initialized  properly
String strText = driver.findElement(By.id("Locator id")).getText();
// Print the text of the Web Element
System.out.println(strText); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:13:44.827

这是一个答案，它将返回具有相同字符串查询（帮助文件）的标记内的 WebElement。希望这会对您有所帮助，但不确定我是否理解了这个问题。

当您想根据其中存在的文本操作 WebElement 时，我感到很震惊，因此此方法很可能对您有用。

```
public WebElement getMessage(final WebDriver driver, final String query) {
    List<WebElement> wlcmLinks = driver.findElements(By.className("wlcmlink"));
    WebElement finalLink = null;
    Iterator<WebElement> itr = wlcmLinks.iterator();

    while(itr.hasNext() && (finalLink == null)) {
        WebElement link = itr.next();
        if (link.getText().equals(query)) {
           finalLink = link;
        }
    }

    if (finalLink == null) {
        throw new NoSuchElementException("No <a /> with that String");
    }

    return finalLink;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T12:15:30.633

试试这个。它可能工作..

String helpFile = driver.findElement(By.xpath("//td[1]//a[1]//*@class='wlcmlink']")).getText();

String codeFile = driver.findElement(By.xpath("//td[1]//a[2]//*@class='wlcmlink']")).getText();

# java - 在 GWT 应用程序中处理授权

> ID：14973628
> 
> 赞同：2
> 
> 时间：2013-02-20T06:31:19.543
> 
> 标签：java, gwt, servlets, authorization, jaas

我打算将 JAAS 用于授权目的。

我在 GUI 端使用 GWT，在服务器端使用 Java。

请建议一些代码来使用 JAAS 处理授权。它是否支持 GWT？有没有办法使用 JAAS 控制禁用和启用按钮？

是否有任何库可用于处理 GWT 应用程序的授权？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T13:31:38.840

AFAIK 中没有`GWT`处理授权的库。

这也不是很简单，因为授权主要在后端处理，并且有多种不同的实现和模式（RBAC 等）。很难想出一个涵盖所有用例的通用方法。您可能必须推出自己的设计/系统。

例如，我们将`PermissionObjects`（简单的 Beans）附加到`DTO`s 上，这些 s 被发送到客户端（GWT）。
在客户端，我们检查权限并禁用或启用或显示`widgets`（按钮、链接等）。

当然，您可以通过扩展小部件和合并授权来提出更花哨的通用解决方案。

只需要记住一件事：**永远不要相信客户。**

因此，即使您在后端禁用或隐藏调用服务/功能的按钮，也要确保再次检查后端的权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:01:53.463

Spring Security 3.1 提供了用户认证和授权的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-28T18:38:04.113

如果您希望通过控制对用户可见/启用的内容（授权）以及显示方式来进一步搜索。我刚刚为此创建了一个解决方案。我希望你会喜欢：

使用项目 UiBinderAutho 来捕获小部件的创建并根据您的需要调整它们（连接的配置文件 ui、权限、小部件处理程序）。这里有一些解释 [http://ziedhamdi.github.io/UiBinderAutho/](http://ziedhamdi.github.io/UiBinderAutho/)

这里是 github 项目 [https://github.com/ziedHamdi](https://github.com/ziedHamdi)

# git - 为什么我在 git 中出现非快进错误？

> ID：14973636
> 
> 赞同：1
> 
> 时间：2013-02-20T06:31:55.890
> 
> 标签：git, github

我不在分支上，并且是当前唯一推送到流中的人，为什么当我这样做时

```
git push 
```

我得到：

```
! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to 'https://github.com/dsak.git'
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes (e.g. 'git pull') before pushing again.  See the
'Note about fast-forwards' section of 'git push --help' for details. 
```

表演`git pull`完`git push`作品就好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T06:36:00.040

> 表演`git pull`完`git push`作品就好了。

显然，远程仓库中有一些提交在您的本地仓库中不存在。如果您`git reset`在某个时候使用、修改或以其他方式更改了现有提交（尽管`git pull`在这种情况下应该给您一个警告），或者如果您从另一个存储库（例如另一台计算机上的一个存储库）推送到远程，则可能会发生这种情况.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T07:53:36.980

> 没有在本地不存在的远程提交，但反之亦然是正确的我添加的文件不在远程到本地

您可能有相同的提交，但 SHA1 一定有所不同。
如果您在任何时候对 master 进行了 rebase（包括 rebase --interactive，只是为了重新排序或删除`master`其自身的一些提交），就会发生这种情况。

在具有相同提交（甚至相同 SHA1）的同时弹出该错误消息的唯一另一种情况是您有一个[冲突*标签*](https://stackoverflow.com/a/10880449/6309)（但我认为它不适用于这里）。

# c# - 如何使用 try catch 进行异常处理是最佳实践

> ID：14973642
> 
> 赞同：207
> 
> 时间：2013-02-20T06:32:37.503
> 
> 标签：c#, .net, exception, try-catch

在维护我同事的代码时，即使是自称是高级开发人员的人，我也经常看到以下代码：

```
try
{
  //do something
}
catch
{
  //Do nothing
} 
```

或者有时他们将日志信息写入日志文件，如以下`try catch`块

```
try
{
  //do some work
}
catch(Exception exception)
{
   WriteException2LogFile(exception);
} 
```

我只是想知道他们所做的是否是最佳做法？这让我感到困惑，因为在我看来，用户应该知道系统会发生什么。

* * *

## 回答 #1

> 赞同：316
> 
> 时间：2013-02-20T07:07:30.293

我的异常处理策略是：

*   要通过挂钩来捕获**所有未处理的异常**`Application.ThreadException event`，然后决定：

    *   对于 UI 应用程序：通过道歉消息将其弹出给用户（WinForms）
    *   对于服务或控制台应用程序：将其记录到文件（服务或控制台）

然后我总是将**在外部运行的每一段代码**都包含在`try/catch`：

*   WinForms 基础结构触发的所有事件（Load、Click、SelectedChanged...）
*   第三方组件触发的所有事件

然后我附在“尝试/捕获”中

*   **我***所知道的所有操作***可能不会一直有效***（IO 操作、具有潜在零除法的计算……）。在这种情况下，我会抛出一个新`ApplicationException("custom message", innerException)`的来跟踪真正发生的事情*

 *此外，我尽我所能**正确地对异常进行排序**。有以下例外情况：

*   需要立即显示给用户

*   当它们发生时需要一些额外的处理来将它们放在一起以避免级联问题（即：在填充期间将 .EndUpdate 放在该`finally`部分中`TreeView`）

*   用户不在乎，但重要的是要知道发生了什么。所以我总是记录它们：

*   在事件日志中

*   或在磁盘上的 .log 文件中

**设计一些静态方法来处理**应用程序顶级错误处理程序中的异常是一种很好的做法。

我也强迫自己尝试：

*   请记住**，所有异常都会冒泡到顶层**。没有必要将异常处理程序放在任何地方。
*   可重用或深度调用的函数不需要显示或记录异常：它们要么自动冒泡，要么在我的异常处理程序中使用一些自定义消息重新抛出。

所以最后：

坏的：

```
// DON'T DO THIS; ITS BAD
try
{
    ...
}
catch 
{
   // only air...
} 
```

无用：

```
// DON'T DO THIS; IT'S USELESS
try
{
    ...
}
catch(Exception ex)
{
    throw ex;
} 
```

最后尝试没有捕获是完全有效的：

```
try
{
    listView1.BeginUpdate();

    // If an exception occurs in the following code, then the finally will be executed
    // and the exception will be thrown
    ...
}
finally
{
    // I WANT THIS CODE TO RUN EVENTUALLY REGARDLESS AN EXCEPTION OCCURRED OR NOT
    listView1.EndUpdate();
} 
```

我在顶层做什么：

```
// i.e When the user clicks on a button
try
{
    ...
}
catch(Exception ex)
{
    ex.Log(); // Log exception

    -- OR --

    ex.Log().Display(); // Log exception, then show it to the user with apologies...
} 
```

我在一些被调用的函数中做了什么：

```
// Calculation module
try
{
    ...
}
catch(Exception ex)
{
    // Add useful information to the exception
    throw new ApplicationException("Something wrong happened in the calculation module:", ex);
}

// IO module
try
{
    ...
}
catch(Exception ex)
{
    throw new ApplicationException(string.Format("I cannot write the file {0} to {1}", fileName, directoryName), ex);
} 
```

异常处理（自定义异常）有很多关系，但我试图记住的那些规则对于我所做的简单应用程序来说已经足够了。

这是一个扩展方法的示例，可以以一种舒适的方式处理捕获的异常。它们以可以链接在一起的方式实现，并且很容易添加自己的捕获异常处理。

```
// Usage:

try
{
    // boom
}
catch(Exception ex)
{
    // Only log exception
    ex.Log();

    -- OR --

    // Only display exception
    ex.Display();

    -- OR --

    // Log, then display exception
    ex.Log().Display();

    -- OR --

    // Add some user-friendly message to an exception
    new ApplicationException("Unable to calculate !", ex).Log().Display();
}

// Extension methods

internal static Exception Log(this Exception ex)
{
    File.AppendAllText("CaughtExceptions" + DateTime.Now.ToString("yyyy-MM-dd") + ".log", DateTime.Now.ToString("HH:mm:ss") + ": " + ex.Message + "\n" + ex.ToString() + "\n");
    return ex;
}

internal static Exception Display(this Exception ex, string msg = null, MessageBoxImage img = MessageBoxImage.Error)
{
    MessageBox.Show(msg ?? ex.Message, "", MessageBoxButton.OK, img);
    return ex;
} 
```

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2013-02-20T13:08:52.437

最佳实践是异常处理*永远不应该隐藏问题*。这意味着`try-catch`块应该非常罕见。

在 3 种情况下使用 a`try-catch`是有意义的。

1.  始终尽可能低调地处理*已知异常。*但是，如果您预计会出现异常，通常最好先对其进行测试。例如，解析、格式化和算术异常几乎总是首先通过逻辑检查来更好地处理，而不是特定的`try-catch`.

2.  如果您需要对异常执行某些操作（例如记录或回滚事务），则重新抛出异常。

3.  始终尽可能高地处理*未知异常 -**唯一*应该使用异常而不重新抛出异常的代码应该是 UI 或公共 API。

假设您正在连接到远程 API，在这里您知道会出现某些错误（并且在这种情况下会发生错误），所以这是案例 1：

```
try 
{
    remoteApi.Connect()
}
catch(ApiConnectionSecurityException ex) 
{
    // User's security details have expired
    return false;
}

return true; 
```

请注意，没有其他异常被捕获，因为它们不是预期的。

现在假设您正在尝试将某些内容保存到数据库中。如果失败，我们必须回滚它，所以我们有案例 2：

```
try
{
    DBConnection.Save();
}
catch
{
    // Roll back the DB changes so they aren't corrupted on ANY exception
    DBConnection.Rollback();

    // Re-throw the exception, it's critical that the user knows that it failed to save
    throw;
} 
```

请注意，我们重新抛出异常 - 更高的代码仍然需要知道某些事情已经失败。

最后我们有了 UI——在这里我们不希望有完全未处理的异常，但我们也不想隐藏它们。这里我们有一个案例 3 的例子：

```
try
{
    // Do something
}
catch(Exception ex) 
{
    // Log exception for developers
    WriteException2LogFile(ex);

    // Display message to users
    DisplayWarningBox("An error has occurred, please contact support!");
} 
```

但是，大多数 API 或 UI 框架都有处理案例 3 的通用方法。例如，ASP.Net 有一个黄色错误屏幕，用于转储异常详细信息，但可以在生产环境中用更通用的消息替换。遵循这些是最佳实践，因为它可以为您节省大量代码，而且还因为错误记录和显示应该是配置决策而不是硬编码。

这一切都意味着案例 1（已知异常）和案例 3（一次性 UI 处理）都有更好的模式（避免预期错误或将错误处理交给 UI）。

甚至情况 2 也可以用更好的模式代替，例如[事务范围](https://stackoverflow.com/questions/1270981/refactoring-ado-net-sqltransaction-vs-transactionscope)（`using`回滚在块期间未提交的任何事务的块）使开发人员更难将最佳实践模式弄错。

例如，假设您有一个大型 ASP.Net 应用程序。错误记录可以通过[ELMAH 进行](http://code.google.com/p/elmah/)，错误显示可以是本地的 YSoD 信息，也可以是生产中很好的本地化消息。数据库连接都可以通过事务范围和`using`块。你不需要一个`try-catch`块。

TL;DR：最佳实践实际上是根本不使用`try-catch`块。

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2013-02-20T06:55:34.240

异常是*阻塞错误*。

首先，最佳实践应该是*不要为任何类型的错误抛出异常，除非它是一个阻塞错误*。

如果错误是*阻塞*的，则抛出异常。一旦异常已经抛出，就不需要隐藏它，因为它是异常的；让用户知道它（你应该在 UI 中将整个异常重新格式化为对用户有用的东西）。

作为软件开发人员，您的工作是努力防止某些参数或运行时情况可能以异常结束的异常情况*。*也就是说，**不能忽略异常，但必须避免这些异常**。

例如，如果您知道某些*整数*输入可能带有无效格式，请使用`int.TryParse`而不是`int.Parse`. 在很多情况下，您可以这样做，而不仅仅是说“如果失败，只需抛出异常”。

抛出异常是昂贵的。

毕竟，如果抛出异常，而不是在抛出异常后将异常写入日志，最佳实践之一是在*第一次机会异常处理程序*中捕获它。例如：

*   ASP.NET：Global.asax **Application_Error**
*   其他：**AppDomain.FirstChanceException 事件**。

我的立场是，本地 try/catch 更适合处理特殊情况，您可能会将异常转换为另一个异常，或者当您想在非常、非常、非常、非常、非常特殊的情况下“静音”它（库错误抛出一个不相关的异常，您需要静音才能解决整个错误）。

对于其余情况：

*   尽量避免异常。
*   如果这是不可能的：第一次机会异常处理程序。
*   或者使用 PostSharp aspect (AOP)。

## 就一些评论回复@thewhiteambit...

@thewhiteambit 说：

> 异常不是致命错误，它们是异常！有时它们甚至不是错误，但将它们视为致命错误是对异常是什么的完全错误的理解。

首先，异常怎么不能是错误？

*   没有数据库连接 => 异常。
*   解析为某种类型的无效字符串格式 => 异常
*   尝试解析 JSON，而输入实际上不是 JSON => 异常
*   预期对象时的参数`null`=>异常
*   某些库有错误 => 引发意外异常
*   有一个套接字连接，它会断开连接。然后你尝试发送消息 => 异常
*   ...

我们可能会列出 1k 种抛出异常的情况，毕竟任何可能的情况都是*错误的*。

异常*就是*错误，因为归根结底，它是一个收集诊断信息的对象——它有一条消息，并且在出现问题时发生。

当没有异常情况时，没有人会抛出异常。异常应该是*阻塞错误*，因为一旦它们被抛出，如果你不尝试*使用 try/catch 和异常来实现控制流*，它们意味着你的应用程序/服务将停止进入*异常情况*的操作。

另外，我建议大家查看[Martin Fowler（由 Jim Shore 撰写）发布](http://www.martinfowler.com/ieeeSoftware/failFast.pdf)*的快速失败*范例。这就是我一直了解如何处理异常的方式，甚至在我前一段时间阅读本文档之前。

> [...] 将它们视为致命错误是对异常是什么的完全错误的理解。

通常异常会*切断*一些操作流程，并对其进行处理以将其转换为人类可以理解的错误。因此，似乎异常实际上是处理错误情况并对其进行处理以避免应用程序/服务完全崩溃并通知用户/消费者出现问题的更好范例。

## 有关@thewhiteambit 问题的更多答案

> 例如，在缺少数据库连接的情况下，程序可以异常地继续写入本地文件，并在数据库再次可用时将更改发送到数据库。可以尝试使用异常上的语言本地解释再次解析您无效的字符串到数字转换，就像您尝试将默认英语语言解析为 Parse("1,5") 失败并且您再次尝试使用德语解释时，这完全是很好，因为我们使用逗号而不是点作为分隔符。您会看到这些异常甚至不能被阻塞，它们只需要一些异常处理。

1.  如果您的应用程序可能在不将数据持久化到数据库的情况下脱机工作，则不应使用*exceptions*，因为使用实现控制流`try/catch`被视为反模式。**离线工作是一个可能的用例，因此您实施控制流来检查数据库是否可访问，您不要等到它无法访问**。

2.  *解析*的事情也是一个预期的情况（**不是例外情况**）。如果您期望这一点，**则不要使用异常来进行控制流！**. 您从用户那里获得一些元数据以了解他/她的文化，并为此使用格式化程序！**.NET 也支持这种环境和其他环境，但如果您希望应用程序/服务具有特定于文化的用法，则必须避免使用数字格式，这是一个例外**。

> 未处理的异常通常会变成错误，但异常本身不是 codeproject.com/Articles/15921/Not-All-Exceptions-Are-Errors

本文只是作者的观点或观点。

由于 Wikipedia 也可能只是文章作者的意见，我不会说这是*教条*，但请检查[*Coding by exception*](http://en.wikipedia.org/wiki/Coding_by_exception)文章在某段某处所说的内容：

> [...] 使用这些异常来处理出现的特定错误以继续程序被称为异常编码。**这种反模式会迅速降低软件的性能和可维护性。**

它还在某处说：

异常使用不正确

> 通常，异常编码可能会导致软件中出现异常使用不正确的进一步问题。除了对一个独特的问题使用异常处理之外，不正确的异常使用会通过执行代码甚至在引发异常之后更进一步。这种糟糕的编程方法类似于许多软件语言中的 goto 方法，但仅在检测到软件中的问题后才会发生。

老实说，我认为如果不认真对待用例，就无法开发软件。如果你知道...

*   您的数据库可能会脱机...
*   某些文件可以被锁定...
*   可能不支持某些格式...
*   某些域验证可能会失败...
*   您的应用应该在离线模式下工作...
*   *无论用例*...

...**您不会为此使用异常**。您将使用常规控制流来**支持这些用例。**

如果没有涵盖某些意外用例，您的代码将很快失败，因为**它会抛出异常**。对，因为异常就是*特例*。

另一方面，最后，有时您会涵盖抛出**预期异常的异常***情况*，但您不会抛出它们来实现控制流。您这样做是因为您想通知上层您不支持某些用例，或者您的代码无法使用某些给定的参数或环境数据/属性。

 *** * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-06-20T15:15:06.470

您唯一应该让用户担心代码中发生的事情是他们可以或需要做些什么来避免该问题。如果他们可以更改表单上的数据、按下按钮或更改应用程序设置以避免问题，请让他们知道。但是用户无法避免的警告或错误只会让他们对你的产品失去信心。

异常和日志是给你的，开发者，而不是你的最终用户。在捕获每个异常时了解正确的做法远比仅仅应用一些黄金法则或依赖应用程序范围的安全网要好得多。

盲目的编码是唯一一种错误的编码。你觉得在这些情况下可以做一些更好的事情，这表明你对良好的编码进行了投资，但避免试图在这些情况下标记一些通用规则，并首先了解要抛出某些东西的原因以及什么你可以从中恢复过来。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-07-25T13:09:02.283

我知道这是一个老问题，但是这里没有人提到 MSDN 文章，并且实际上是该文档为我清理了它，MSDN 对此有一个[非常好的文档](https://msdn.microsoft.com/en-us/library/ms173162.aspx)，当以下条件为真时，您应该捕获异常：

> *   您对可能引发异常的原因有了很好的理解，并且可以实现特定的恢复，例如在捕获 FileNotFoundException 对象时提示用户输入新文件名。
>     
>     
> *   您可以创建并抛出一个新的、更具体的异常。

```
int GetInt(int[] array, int index)
{
    try
    {
        return array[index];
    }
    catch(System.IndexOutOfRangeException e)
    {
        throw new System.ArgumentOutOfRangeException(
            "Parameter index is out of range.");
    }
} 
```

> *   您希望在将异常传递给其他处理之前对其进行部分处理。在以下示例中，catch 块用于在重新引发异常之前将条目添加到错误日志中。

```
 try
{
    // Try to access a resource.
}
catch (System.UnauthorizedAccessException e)
{
    // Call a custom error logging procedure.
    LogError(e);
    // Re-throw the error.
    throw;     
} 
```

我建议阅读整个“[异常和异常处理](https://msdn.microsoft.com/en-us/library/ms173160.aspx)”部分以及[异常的最佳实践](https://msdn.microsoft.com/en-us/library/seyhszts(v=vs.110).aspx)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-20T06:36:29.137

第二种方法是一个很好的方法。

如果您不想显示错误并通过显示与他们无关的运行时异常（即错误）来混淆应用程序用户，那么只需记录错误，技术团队就可以查找问题并解决它。

```
try
{
  //do some work
}
catch(Exception exception)
{
   WriteException2LogFile(exception);//it will write the or log the error in a text file
} 
```

我建议您为整个应用程序采用第二种方法。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-20T06:38:44.247

更好的方法是第二种方法（您指定异常类型的方法）。这样做的好处是您知道这种类型的异常可能发生在您的代码中。您正在处理这种类型的异常，您可以恢复。如果出现任何其他异常，则意味着出现问题，这将帮助您在代码中找到错误。应用程序最终会崩溃，但您会发现有一些您遗漏的东西（错误）需要修复。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-20T09:55:10.957

有例外，我尝试以下方法：

首先，我捕获特殊类型的异常，例如除零、IO 操作等，并据此编写代码。例如，除以零，这取决于我可以提醒用户的值的来源（例如一个简单的计算器，在中间计算（不是参数）中到达除以零）或静默处理该异常，记录它并继续处理。

然后我尝试捕获剩余的异常并记录它们。如果可能，允许执行代码，否则会提醒用户发生错误并要求他们邮寄错误报告。

在代码中，是这样的：

```
try{
    //Some code here
}
catch(DivideByZeroException dz){
    AlerUserDivideByZerohappened();
}
catch(Exception e){
    treatGeneralException(e);
}
finally{
    //if a IO operation here i close the hanging handlers for example
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-20T06:37:17.007

最佳实践是在发生错误时抛出异常。因为发生了错误，它不应该被隐藏。

但在现实生活中，当你想隐藏它时，你可能会遇到几种情况

1.  您依赖第三方组件，并且希望在出现错误时继续执行程序。
2.  您有一个业务案例，如果出现错误，您需要继续

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-02-20T06:38:32.590

留下空白的 catch 块是最糟糕的事情。如果出现错误，最好的处理方法是：

1.  将其登录到文件\数据库等。
2.  尝试即时修复它（也许尝试执行该操作的替代方法）
3.  如果我们不能解决这个问题，通知用户有一些错误，当然中止操作

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-02-20T06:43:10.340

有时您需要处理对用户无意义的异常。

我的方法是：

*   在应用程序级别（即在 global.asax 中）捕获关键异常（应用程序不能有用）的未捕获异常。这些例外我没有赶上这个地方。只需将它们记录在应用程序级别并让系统完成其工作。
*   抓住“就地”并向用户显示一些有用的信息（输入错误的数字，无法解析）。
*   抓紧时间，对诸如“我将在后台检查更新信息，但服务未运行”之类的边际问题不采取任何措施。

它绝对不一定是最佳实践。;-)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-02-20T06:45:37.850

对我来说，处理异常可以看作是业务规则。显然，第一种方法是不可接受的。第二个更好，如果上下文这样说，它可能是 100% 正确的方式。现在，例如，您正在开发 Outlook 插件。如果您的插件抛出未处理的异常，Outlook 用户现在可能知道它，因为 Outlook 不会因为一个插件失败而自行销毁。而且你很难弄清楚出了什么问题。因此，在这种情况下，第二种方法对我来说是正确的。除了记录异常，您可能会决定向用户显示错误消息——我认为这是一个业务规则。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-02-20T07:07:21.357

没有任何参数的`catch`只是**吃**异常并且没有用。如果发生致命错误怎么办？如果你不带参数地使用 catch ，就无法知道发生了什么。

catch 语句应该捕获更**具体**的异常，例如`FileNotFoundException`，然后在**最后**你应该捕获`Exception`它会捕获任何其他异常并记录它们。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-10-31T02:49:30.030

您应该考虑这些例外设计指南

*   异常抛出
*   使用标准异常类型
*   异常和性能

[https://docs.microsoft.com/en-us/dotnet/standard/design-guidelines/exceptions](https://docs.microsoft.com/en-us/dotnet/standard/design-guidelines/exceptions)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-05-18T21:37:12.087

我可以告诉你一些事情：

Snippet #1 是不可接受的，因为它忽略了异常。（它像什么都没发生一样吞下它）。

所以不要添加什么都不做或只是重新抛出的 catch 块。

Catch 块应该增加一些价值。例如向最终用户输出消息或记录错误。

不要对正常流程程序逻辑使用异常。例如：

例如输入验证。<- 这是无效的例外情况，您应该编写方法`IsValid(myInput);`来检查输入项是否有效。

设计代码以避免异常。例如：

```
int Parse(string input); 
```

如果我们将无法解析的值传递给 int，则此方法将抛出异常，而不是我们可能会编写如下内容：

`bool TryParse(string input,out int result);`<- 此方法将返回布尔值，指示解析是否成功。

也许这有点超出了这个问题的范围，但我希望这能帮助你在遇到`try {} catch(){}`例外情况时做出正确的决定。***

# extjs - extjs中容器的定位

> ID：14973646
> 
> 赞同：0
> 
> 时间：2013-02-20T06:32:52.763
> 
> 标签：extjs, extjs4, extjs4.1, extjs-mvc

在我的项目中，我试图将容器定位为绝对容器。但如果我这样做，它也会影响邻居项目。我的意思是，在定位容器之后，如果我给那个特定的容器一些宽度和高度，它会影响所有的工具栏。（我不想发生）。即使我使用`layout: 'absolute`or css也会发生这种效果`position:absolute`。

这是我的相关代码：

```
 xtype: 'panel',

        dockedItems: [{
            dock: 'top',
            xtype: 'toolbar',
            height: 40,
            items: [
            {
                //only this should be absolute positioned
                xtype: 'container',
                cls: 'logo',         //tried with applying css styles !important
                //even tried with layout: 'absolute'
            },'-',
            //the below elements should not move their position
            //even if the above one has been applied positioning.
            {
                xtype: 'container'
            },'->',
            {
                xtype: 'container'
            }]
        }], 
```

在这里，我的目标是将容器带出，`toolbar`因为它应该比`toolbar`保持其他容器保持不变的高度更大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T05:00:24.983

如果配置文件图片容器必须高于工具栏，则它不能是工具栏容器的子级。

您可以在工具栏下方创建一个具有**绝对**布局的容器，在该容器中您将拥有个人资料图片，并且您可以使用负**Y**变量来向上移动图像，因此它看起来就像在工具栏中。

像这样

```
var toolbar = Ext.create('Ext.toolbar.Toolbar', {
items: [
    {}, 
    { xtype: 'tbspacer', width: 50 }, // Moving the button to the right
    { text: 'Fake Name Button' }
]
});

Ext.create('Ext.container.Container', {
layout: 'fit',
 width   : 700,
 renderTo: Ext.getBody(),
items: [toolbar]
});

var image = Ext.create('Ext.Img', {
 x: 0,
 y: -25,
maxWidth: 70,
src: 'https://twimg0-a.akamaihd.net/profile_images/1471554494/swel.png'
});

Ext.create('Ext.container.Container', {
layout: {
    type: 'absolute'
},
 renderTo: Ext.getBody(),
items: [image]
}); 
```

[http://jsfiddle.net/alexrom7/33cP8/1/](http://jsfiddle.net/alexrom7/33cP8/1/)

这个解决方案不是很漂亮，但它可能会奏效。

# repository-pattern - 使用 ServiceStack.ORMLite 实现工作单元和存储库模式的最佳实践

> ID：14973648
> 
> 赞同：11
> 
> 时间：2013-02-20T06:33:15.087
> 
> 标签：repository-pattern, servicestack, ormlite-servicestack

假设有两个存储库接口：

```
interface IFooRepository
{
    void Delete(int id);
}

interface IBarRepository
{
    void Delete(int id);
} 
```

还有一个 IUnitOfWork 接口，例如：

```
interface IUnitOfWork : IDisposable
{
    void Commit();
    void Rollback();
} 
```

使用 ServiceStack.ORMLite 实现这些接口的最佳实践是什么，以便用户可以像使用它们一样

```
MyFooRepository.Delete(4);
// if an Exception throws here, Bar won't be deleted
MyBarRepository.Delete(7); 
```

或者

```
using (var uow = CreateUnitOfWork())
{
    MyFooRepository.Delete(4);
    MyBarRepository.Delete(7);
    uow.Commit();  //now they are in an transaction
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T19:42:14.693

不确定您是否需要 Repository + UnitOfWork 模式，但我认为 ServiceStack + OrmLite 中有一些替代解决方案可以在您需要引入任何模式之前保持您的代码“干燥”（特别是如果您主要寻求事务/回滚支持）。下面是我要开始的地方。

```
public class Foo //POCO for data access
{
    //Add Attributes for Ormlite
    public int Id { get; set;  }
}

public class Bar //POCO for data access
{
    //Add Attributes for Ormlite
    public int Id { get; set; }
}

//your request class which is passed to your service
public class DeleteById 
{
    public int Id { get; set; }
}

public class FooBarService : MyServiceBase //MyServiceBase has resusable method for handling transactions. 
{
    public object Post(DeleteById request)
    {
        DbExec(dbConn =>
                   {
                       dbConn.DeleteById<Foo>(request.Id);
                       dbConn.DeleteById<Bar>(request.Id);
                   });

        return null;
    }
}

public class MyServiceBase : Service
{
    public IDbConnectionFactory DbFactory { get; set; }

    protected void DbExec(Action<IDbConnection> actions)
    {
        using (var dbConn = DbFactory.OpenDbConnection())
        {
            using (var trans = dbConn.OpenTransaction())
            {
                try
                {
                    actions(dbConn);
                    trans.Commit();
                }
                catch (Exception ex)
                {
                    trans.Rollback();
                    throw ex;
                }
            }
        }
    }
} 
```

一些参考...

[https://github.com/ServiceStack/ServiceStack.RedisWebServices](https://github.com/ServiceStack/ServiceStack.RedisWebServices) - 上面的代码是从这个例子修改而来的

[https://groups.google.com/forum/#!msg/servicestack/1pA41E33QII/R-trWwzYgjEJ](https://groups.google.com/forum/#!msg/servicestack/1pA41E33QII/R-trWwzYgjEJ) - 讨论 ServiceStack 中的层

[http://ayende.com/blog/3955/repository-is-the-new-singleton](http://ayende.com/blog/3955/repository-is-the-new-singleton) - Ayende Rahien（NHibernate 核心贡献者）关于存储库模式

# javascript - Backbone.js 事件疑惑

> ID：14973649
> 
> 赞同：0
> 
> 时间：2013-02-20T06:33:23.363
> 
> 标签：javascript, backbone.js, backbone-events

我必须使用backbone.js 创建事件。下面是我的js 代码

```
var Trainee = Backbone.Model.extend();

            var TraineeColl = Backbone.Collection.extend({
                model: Trainee,
                url: 'name.json'
            });

            var TraineeView = Backbone.View.extend({
                el: "#area",

                template: _.template($('#areaTemplate').html()),

                render: function() {
                        this.model.each(function(good){
                        var areaTemplate = this.template(good.toJSON());
                        $('body').append(areaTemplate);
                    },this);

                    return this;
                }
            });

            var good = new TraineeColl();
            var traineeView = new TraineeView({model: good});
            good.fetch();

            good.bind('reset', function () {
            $('#myButtons').click(function() {
                traineeView.render();
                });
            });

<div class = "area"></div>
     <div class="button" id="myButtons">
<button class="firstbutton" id="newbutton">
   Display

</button>
</div>
    <script id="areaTemplate" type="text/template">
                 <div class="name">
                    <%= name %>
                </div>
                <div class="eid">
                    <%= eid %>
                </div>
                 <div class="subdomain">
                    <%= subdomain %>
                </div> 
```

我点击显示按钮时的 o/p 是 Display // 这是一个按钮//

Sinduja E808514 HPS

沙里尼 E808130 HBS

普里亚 E808515 HSG

现在从视图中，我必须将更改事件绑定到模型。模型中的更改必须在视图上触发，才能在单击显示按钮时显示输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T07:30:01.530

这并不能完全回答您的问题，但是：

如果受训者（我已将其重命名为受训者）是一个集合，您应该使用以下方法设置它：

```
new TraineeView({collection: trainees}); 
```

然后在渲染中：

```
this.collection.models.each(function(trainee) 
```

而且您可能不想将调用移动到视图之外，也许在路由器中：

```
trainees = new TraineeColl();
view = new TraineeView({collection: trainees});
trainees.fetch(); 
```

这样你的视图只听模型。

您还应该将绑定部分移动到视图初始化方法

```
this.collection.bind('reset', function () {
                      this.render();
}); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T06:56:30.290

```
var TraineeView = Backbone.View.extend({
   el: "#area",

   initialize : function(options){            // you will get the passed model in   
//options.model
       var trainee = new TraineeColl();
       trainee.fetch();
       trainee.bind('reset change', this.render,this); //change will trigger render
// whenever any model in the trainee collection changes or is modified

    }

    template: _.template($('#areaTemplate').html()),

    render: function() {
           this.model.each(function(trainee){
           var areaTemplate = this.template(trainee.toJSON());
           $('body').append(areaTemplate);
           },this);

         return this;
     }
 });

 var traineeView = new TraineeView({model: trainee});                
     }); 
```

# php - 将 PHP 数组复制到 javascript 数组中

> ID：14973654
> 
> 赞同：2
> 
> 时间：2013-02-20T06:33:54.107
> 
> 标签：php, javascript

我想将 PHP 数组复制到 javascript 数组中。javascript 正在 PHP 文件中使用。它在 PHP 代码中得到回显，所以当我尝试在 javascripy 中创建一个新数组并将 PHP 数组分配给它时，它给了我一个错误。数组到字符串的转换。有人可以帮我解决这个问题。

```
 mysql_select_db("cerebra", $con);
 $sql="select name from details order by download desc limit 20";
 if (!mysql_query($sql,$con))`enter code here`
  {
  die('Error: ' . mysql_error());
  }
 $query=mysql_query($sql,$con);
 $names=array();
 while($row=mysql_fetch_array($query))
   {
$names[]=$row[0];
   } 
```

这里 $names 是我想在 javascript 中使用的数组

然后我在php代码本身中回显我的javascript..：

```
 function makeRequest() {
   var d = document.getElementsByName(\"d\")[0].value;
   var request = gapi.client.drive.files.list();
var newnames = new Array();
    newnames=$names;
  request.execute(function(resp)

 {        
    for (i=0; i<resp.items.length; i++) {
        var titulo = resp.items[i].title;
        var fechaUpd = resp.items[i].modifiedDate;
        var userUpd = resp.items[i].lastModifyingUserName;
        var userEmbed = resp.items[i].embedLink;
        var userAltLink = resp.items[i].alternateLink;
        var download = resp.items[i].webContentLink;
        var hold=\"Download\";
        var flag=0;

         <!-- var fileInfo = document.createElement('li');
      <!--  fileInfo.appendChild(document.createTextNode('TITLE: ' + titulo + ' - LAST MODIF: ' + fechaUpd + ' - BY: ' + userUpd +'  url:  ' + hold.link(download)));                
       <!-- document.getElementById('content').appendChild(fileInfo);
        <!--for (var i=0;i<newnames.length;i++){
    <!--    if(newnames[i].toString() == titulo){
        document.write(titulo + \"&nbsp;\");
        document.write(hold.link(download) + \"<br>\");
        <!--flag=1;
    <!--    }
        <!--}
        }
        <!--if(flag!=1){
        <!--document.write(\"not found!\");
        <!--}
});    
} 
```

在 javascript 中，我试图将 php 数组转换为 javascript 数组，但它不起作用

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T06:50:10.297

**示例 1：**

```
<script type='text/javascript'>
<?php
$php_array = array('he','hi','hello');
$js_array = json_encode($php_array);
echo "var javascript_array = ". $js_array . ";\n";
?>
</script> 
```

**注意：您可以使用 php 的****json_encode()**函数将 php 数组转换为 javascript 。

查看此[将 php 数组转换为 java 脚本数组](https://stackoverflow.com/questions/5618925/convert-php-array-to-javascript-array)以获取更多信息。

**示例 2：**

**PHP代码：**

```
$arr = array(1,2,3,4,5,6,7);
$script = '<script>var newArr = new Array(' . implode(',', $arr) . ');</script>';
echo $script; 
```

**HTML 代码：**

```
<script>
function doOnchange(arr){
    alert(arr.length);
}
</script>
<form name="frm">
    <select name="sel1" onchange="doOnchange(newArr);">
        <option>1</option>
        <option>2</option>
        <option>3</option>
    </select>
</form> 
```

查看更多链接，

[如何将 PHP 多维数组转换为 Javascript 对象（使用 jQuery）](http://edrackham.com/php/how-to-convert-php-multidimensional-array-to-javascript-object-using-jquery/)

[array2json() - 将 PHP 数组转换为 JSON](http://www.bin-co.com/php/scripts/array2json/)

[json_encode 将 php 数组传递给 javascript](http://www.codeproject.com/Questions/449313/json_encode-pass-php-array-to-javascript)

这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T06:37:58.870

看看[json_encode()](http://www.php.net/manual/de/function.json-encode.php)函数。来自网站的修改示例：

```
<?php
$arr = array ('a'=>1,'b'=>2,'c'=>3,'d'=>4,'e'=>5);

echo 'var js_object = '.json_encode($arr).';';
// outputs: var js_object = {"a":1,"b":2,"c":3,"d":4,"e":5};
?> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-20T06:44:31.580

如果它是单个或简单的数组，您可以从 PHP 数组手动构造 javascript 数组。但这不是一个好方法。我建议使用 json 或 xml 方式。

```
 <?php 
    $myArr = array(1,2,3,4,5);
  ?>
 <script>
  var myArr = new Array();
  <?php 
    for($i=0;$<count($myArr);$i++) { ?>
     myarr[<?php echo $i ?>] = <?php echo $myArr[$i] ?>;
    <?php } ?>
  ?>
 </script> 
```

# qt - Qmake 可以接受自定义参数吗？

> ID：14973656
> 
> 赞同：5
> 
> 时间：2013-02-20T06:34:01.190
> 
> 标签：qt, qmake

一段时间以来，我一直在研究一个名为 RoboJournal 的程序，并且正在尝试简化 Debian 源包的创建过程。当用户在 Linux 上构建程序时，qmake 将安装路径设置为 /usr/local/bin（对于用户编译的程序应该如此）但是，当我创建 Debian 源包时，这会导致问题，因为所有打包的可执行文件应该安装到/usr/bin。

解决此问题的最简单方法是在制作源包之前手动编辑安装路径，但我更愿意保持代码库相同（具有相同版本号的代码库的多个变体最终总是会导致问题）。

如果包维护者可以运行类似`qmake --package robojournal.pro`创建具有正确安装路径的 makefile 以用于打包目的，那就太好了。同时，省略该`--package`参数仍将允许用户创建常规构建。

可以这样做（或类似的事情）吗？我检查了 qmake 文档，但在配置项目文件以允许 qmake 接受自定义 Unix 样式参数方面没有发现任何内容。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T07:32:26.953

[您可以通过使用CONFIG 变量](http://doc.qt.io/qt-5/qmake-project-files.html#generalconfiguration)来实现您所需要的。任何东西都可以添加到 CONFIG 变量中，并且 CONFIG 变量中指定的每个选项都可以用作范围条件：

```
package {
    message(Creating a makefile with the correct install path for packaging purposes...)
} else {
    message(Creating a regular build...)
} 
```

这为您提供了一种方便的方式来自定义项目文件和微调生成的 Makefile。请参阅[配置和范围](http://doc.qt.io/qt-5/qmake-language.html#configuration-and-scopes)。

CONFIG 保存的值列表可以在命令行上扩展。您可以使用或不使用“CONFIG+=package”运行 qmake：

```
qmake "CONFIG+=package" robojournal.pro

qmake robojournal.pro 
```

请参阅[Makefile 模式选项](http://doc.qt.io/qt-5/qmake-running.html#makefile-mode-options)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T07:39:43.313

默认情况下`qmake`会产生空`install`和`unistall`目标，除非您明确指示`qmake`进行安装。

例如项目文件

```
TEMPLATE = app
TARGET = test
DEPENDPATH += .
INCLUDEPATH += .

SOURCES += main.cpp 
```

生成以下 Makefile（仅显示安装部分以节省空间）

```
####### Install

install:   FORCE

uninstall:   FORCE

FORCE: 
```

那么Qt项目文件中的以下规则将指定安装路径

```
unix {
    target.path = /usr/bin/

    INSTALLS += target
} 
```

现在 Makefile 已经改变了

```
####### Install

install_target: first FORCE
    @$(CHK_DIR_EXISTS) $(INSTALL_ROOT)/usr/bin/ || $(MKDIR) $(INSTALL_ROOT)/usr/bin/ 
-$(INSTALL_PROGRAM) "$(QMAKE_TARGET)" "$(INSTALL_ROOT)/usr/bin/$(QMAKE_TARGET)"

uninstall_target:  FORCE
    -$(DEL_FILE) "$(INSTALL_ROOT)/usr/bin/$(QMAKE_TARGET)"
-$(DEL_DIR) $(INSTALL_ROOT)/usr/bin/ 

install:  install_target  FORCE

uninstall: uninstall_target   FORCE

FORCE: 
```

这是来自 robojournal.pro 的部分：

```
target.path = /usr/local/bin

INSTALLS += target shortcut icon shortcut-deb icon-deb 
```

最终用户极不可能编译应用程序。甚至像我一样会编译它的人也不会安装它，因为它可以从构建目录启动。因此，将 /usr/local/bin 替换为 /usr/bin 是安全的。

# java - 如何将文件数组值存储到另一个文件数组中

> ID：14973658
> 
> 赞同：0
> 
> 时间：2013-02-20T06:34:20.140
> 
> 标签：java, arrays, dynamic-arrays

我正在尝试创建一个程序，该程序将搜索文件数组并将唯一文件名存储到新文件数组中并返回该新数组，只将重复项放入一次（如果有的话）。我的代码会运行，但不会将值存储到我创建的新文件数组中，该文件数组没有设定长度。当我调用它时，它只返回一个空数组。我设置它的方式是检查是否有任何重复项，如果有，则将重复项存储一次，如果没有，则仅存储值并继续。问题是一旦通过 for 循环，它就不会存储这些值。有没有更好的方法将值存储在文件数组中？

这是我的方法`uniqueFile`，它从我的测试块接收文件数组。

```
public static File[] getUnique(File[] files) {
    int count = 0, place = 0;
    File[] newFile = new File[] {};
    for (int i = 0; i < files.length; i++) {
        count = 0;
        for (int x = 1; x < files.length; x++) {
            if (files[i].equals(files[x]))
                count++;
        }
        try {
            if (count >= 1)
                newFile[place] = files[i];
            else
                newFile[place] = files[i];
        } catch (Exception e) {

        }
        place++;
    }

    return newFile;
} 
```

这是我的测试块：

```
{
    File Freckle = new File("Freckle");
    File Pickle = new File("Pickle");
    File Sam = new File("Sam");
    File Cat = new File("Cat");
    File[] files = new File[] { Freckle, Pickle, Freckle, Sam, Cat,
            Pickle };

    File[] output = ArrayExercises.getUnique(files);
    System.out.println(Arrays.toString(output));
} 
```

我输入了通用文件名来测试它是否有效。最终我将合并实际文件，但我想在继续之前先弄清楚这个错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T06:42:55.367

你让自己的事情变得非常困难。让 Java 为您完成所有工作。尝试使用 LinkedHashSet，因为它为您提供唯一性，同时保留插入顺序。它也比将每个值与其他值进行比较更有效。

```
File [] input = {Freckle, Pickle, Freckle, Sam, Cat, Pickle};
Set<File> tmp = new LinkedHashSet<File>();
for (File each : input) {
    tmp.add(each);
}
File [] unique = new File[tmp.size()];
int i = 0;
for (File each : tmp) {
    unique[i++] = each;
}
System.out.println(Arrays.toString(unique)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T06:58:06.843

正如其他人所说，您应该使用 Java Collections API，它让生活变得如此轻松。但是，假设您想让您的解决方案发挥作用。

他的问题是你的新数组长度为零，这里有一段非常奇怪的代码。

```
 if (count >= 1)
            newFile[place] = files[i];
        else
            newFile[place] = files[i]; 
```

测试毫无意义，无论计数值如何，您都在做完全相同的事情。您还需要仅`place`在将非重复字符串添加到数组时增加。尝试/捕获也是毫无意义的。捕获通用异常是不好的做法。

你需要的更像下面，但即使这样也不会完全想要你想要的，尽管数组现在只包含唯一的条目，它的长度和以前一样。

```
public static File[] getUnique(File[] files) {
    place = 0;
    File[] newFile = new File[files.size()]; //you were creating an empty array.
    for (int i = 0; i < files.length; i++) {
        boolean duplicate = false; // not interested in ho many dupes, just if there is one. 
        for (int x = 1; x < files.length; x++) {
            if (files[i].equals(files[x])) {
                duplicate = true;
                break; // no point in checking the rest.
             }
        }
        //   why on earth did you have a try catch?
        if (!duplicate) {
            newFile[place++] = files[i];
         }

    }

    return newFile;
} 
```

你真正需要做的就是把它扔掉，然后像`LinkedHashMap`另一张海报建议的那样重新开始使用，否则你会用低效的代码把自己绑起来。

# core-data - CoreData 多对多关系

> ID：14973660
> 
> 赞同：3
> 
> 时间：2013-02-20T06:34:29.250
> 
> 标签：core-data, many-to-many

CoreData中的多对多关系如何操作？例如：

我有 2 个实体 - 食谱和配料

CoreData 像Recipes <<-->> Ingredients 一样链接它们。现在我需要为配方中的每个成分添加属性“计数”。我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T08:45:14.940

Core Data 会为您维护对象图的一致性。因此，如果您使用 SQLite 存储，Core Data 会自动为您创建多对多关系的中间连接表。在您的情况下，您应该显式创建一个中间（“join”）实体。中间实体的一个优点是您还可以使用它向关系中添加更多信息——例如，“IngredientInfo”实体可能包含“计数”列。所以你的模型应该看起来像：**Recipe <-->> IngredientInfo <<--> Ingredient**。

如果您在这里发现不清楚的地方，我会更新答案。

**更新：访问成分和计数**

```
 for (IngredientInfo* ingredientInfo in recipe.ingredientInfos) {
        Ingredient* ingredient = ingredientInfo.ingredient;
        NSNumber* count = ingredientInfo.count;
    } 
```

或使用 KVC 快速访问某些配方中的所有成分

```
NSSet* ingredients = [recipe valueForKeyPath:@"ingredientInfo.ingredient"]; 
```

# asp.net - 我可以确定 HttpModules 是按照它们在 HttpApplication.Modules 集合中列出的顺序执行的吗？

> ID：14973667
> 
> 赞同：12
> 
> 时间：2013-02-20T06:34:54.453
> 
> 标签：asp.net, .net, iis, httpmodule

我想写一个`IHttpModule`必须严格执行的`FormsAuthenticationModule`，否则就没用了。

有`HttpContext.Current.ApplicationInstance.Modules`返回 s 集合的属性`IHttpModule`。我可以检查我的模块是否`FormsAuthenticationModule`在此集合中。

这样就够了吗？该集合列表是否`IHttpModule`按照它们的执行顺序排列？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-20T07:07:01.323

回想一下，模块可以订阅不同的管道事件。在任何给定的管道事件中，模块应该按照它们在 Modules 集合中指定的顺序运行。

作为一个实际示例，想象一个 Modules 集合，其中注册了这三个模块：

*   订阅 EndRequest 的模块 A
*   订阅 BeginRequest 和 EndRequest 的模块 B
*   订阅 AuthenticateRequest 的模块 C

执行顺序将是：

1.  模块 B，开始请求
2.  模块 C，AuthenticateRequest
3.  模块 A，结束请求
4.  模块 B，结束请求

由于 FormsAuthenticationModule 订阅了 AuthenticateRequest 事件，请考虑让您自己的模块订阅 PostAuthenticateRequest 事件。这样，您就可以保证如果 FormsAuthenticationModule 逻辑运行，它会*在您的 logic 之前*运行，而不管它们在 Modules 集合中注册的顺序如何。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T07:08:26.590

我会尽量回答。

我认为您不应该依赖 HttpContext.Current.ApplicationInstance.Modules 集合，因为您现在将按照哪个顺序执行模块。

请注意，我没有做任何原型，这只是我的想法。

dll Microsoft.Web.Infrastructure.dll 有一个动态注册 HTTP 模块的方法

该 dll 随 WebPages 1.0 一起提供

为注册创建助手类

```
public static class RegisterHttpModuleHelper
{

    public static void Start()
    {

        DynamicModuleUtility.RegisterModule(typeof(YourCustomModule));
    }
} 
```

FormsAuthenticationModule 具有事件“身份验证”。

在此事件的处理者中，尝试使用动态注册您的自定义 HttpModule

```
public void FormsAuthentication_OnAuthenticate(object sender, FormsAuthenticationEventArgs args)
{
    RegisterHttpModuleHelper.Start()
} 
```

# c - 如何在 c 中打开与程序位于同一目录中的文件？

> ID：14973668
> 
> 赞同：3
> 
> 时间：2013-02-20T06:34:58.007
> 
> 标签：c, file-io, network-programming, fopen

大家好，我正在尝试从我为网络编程类编写的服务器程序打开一个文件，以发送到我的客户端程序。我试过使用 fopen，

```
 strcat(cwd, msg);              //i append the directory to the filename
  printf("%s\n", cwd);

  if(n>0){
     req = fopen(msg, "r");      //fopen(~\\blah\\blah\\blah\\msg) 
```

msg 是 txt 文件的名称。

我希望在 c 中完成此操作。

有任何想法吗？非常感激。

想补充一点，即使打印出来的目录是正确的，req 也变成了 null。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T07:36:46.447

你的问题的真正答案是你不能。C 无法让您知道构建程序映像的文件所在的位置，部分原因是它没有假设它甚至是从文件构建的。因此，没有通用的、可移植的方式可以保证工作。

但是，在某些环境和某些条件下，您可以使用`argv[0]`，它可能包含找到程序文件的路径。在 Unix/Linux 下经常出现这种情况（但不一定——你要感谢启动你的程序的程序）。我不知道它在 Windows 等其他系统上的情况如何。

如果您想使用该方法，可以执行以下操作：

```
FILE *openrelative(char *base, char *name)
{
    char *buf1, *dir, *buf2;
    int len;
    FILE *ret;

    buf1 = strdup(base); /* dirname might modify its argument, so copy base. */
    dir = dirname(buf1);
    len = strlen(dir) + 1 + strlen(name) + 1;
    buf2 = malloc(len);
    snprintf(buf2, len, "%s/%s", dir, name);
    ret = fopen(buf2, "r");
    free(buf2); free(buf1);
    return(ret);
} 
```

`main`然后，从as调用此函数`openrelative(argv[0], "msg.txt")`。或者从其他地方，但你需要以`argv[0]`某种方式提供。

但是，由于不能保证这些方法有效，因此您不应该真正使用它们。如果您的程序应该是可移植的或被其他人使用，则尤其如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T15:58:09.953

根据您在代码中的评论：

```
// fopen(~\\blah\\blah\\blah\\msg) 
```

变量`cwd`可能是`~`. 如果是这样，那么正如 FatalError 所提到的，`fopen()`不会为您扩展它。在我使用过的系统上，只有 shell 会这样做。

解决方法是例如调用`getenv("HOME")`，然后扩展`~`自己。

# python - 樱桃 SessionAuth 不工作？

> ID：14973669
> 
> 赞同：1
> 
> 时间：2013-02-20T06:35:09.623
> 
> 标签：python, cherrypy

我可能忽略了一些简单的事情，但我无法让 Cherrypy SessionAuth 工作。

启用调试并且在 cherrypy.session 中没有用户名，SessionAuth 将其放入日志文件中：

```
[20/Feb/2013:00:58:39] TOOLS.SESSAUTH No username, routing to login_screen with from_page 'http://localhost:8080/' 
```

问题是它没有路由到登录屏幕。它向调用者返回true，调用者继续执行。它还将cherrypy.serving.response.body 设置为呈现到登录页面的html 片段。但是我的调用函数对 response.body 一无所知。

我究竟做错了什么？

下面是来自 root.py 的相关代码：

```
class MySessionAuth(cptools.SessionAuth):

    def check_username_and_password(self, username, password):
        users = dict(foo="bar")
        if username in users and password == users[username]:
            return False

    def on_check(self, username):
        cherrypy.session['username'] = username

def session_auth(**kwargs):
    sa = MySessionAuth()
    for k, v in kwargs.items():
        setattr(sa, k, v)
    return sa.run()

cherrypy.tools.protect = cherrypy._cptools.Tool('before_handler', session_auth)

class Root:
    @cherrypy.expose()
    @cherrypy.tools.protect(debug=True)
    def index(self):
        tmpl = loader.load('index.html')
        return tmpl.generate(flash = '',).render('html', doctype='html') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-27T19:18:52.510

如果您想通过密码保护整个应用程序而不仅仅是某些资源，您可以为 check_username_and_password 创建自定义函数，并在应用程序配置中将 check_username_and_password 指向它。要添加的配置行会像这样

```
'tools.session_auth.check_username_and_password':check_username_and_password 
```

然后只需使用上面的自定义 check_username_and_password ，它应该可以工作。

这是一个完整的示例，它将保护应用程序中的所有资源

```
import cherrypy
from datetime import datetime

user_dict={'peter':'password','joe':'pass1234','tom':'!Sm,23&$fiuD'}
def check_user(username,password):
     if user_dict.has_key(username):
          if user_dict[username] == password:
               return
          else:
               return 'incorrect password for user'
     return 'user does not exist'

class Root:
     @cherrypy.expose
     def index(self):
          cherrypy.session.regenerate()
          cherrypy.session['access_datetime'] = datetime.now()
          return """Hello protected resource! <br \>
datetime of access was %s
<br /><a href="./logout">Logout</a>"""%cherrypy.session['access_datetime']

     @cherrypy.expose
     def logout(self):
          username = cherrypy.session['username']
          cherrypy.session.clear()
          return """%s you have been logged out
of the system at datetime %s"""%(username,datetime.now())

_cp_config={'/':{'tools.sessions.on':True,
                'tools.sessions.storage_type':'file',
                'tools.sessions.storage_path':'./',
                'tools.sessions.timeout':60,
                'tools.session_auth.on':True,
                'tools.session_auth.check_username_and_password':check_user,
                 }
            }
cherrypy.config.update({'server.socket_host':'0.0.0.0',
                        'server.socket_port':8090})
cherrypy.quickstart(Root(),'/',config=_cp_config) 
```

# php - php生成的图像加载后消失

> ID：14973670
> 
> 赞同：0
> 
> 时间：2013-02-20T06:35:11.303
> 
> 标签：php, image

我使用此代码调整图像大小：

```
if ($height > $width) {
  $divisor = $width / $imgs;
} else {
  $divisor = $height / $imgs;
}

$resizedWidth   = ceil($width / $divisor);
$resizedHeight  = ceil($height / $divisor);

$xOffset = floor(($resizedWidth  - $imgs) / 2);
$yOffset = floor(($resizedHeight - $imgs) / 2);                                        

$resized  = imagecreatetruecolor($resizedWidth, $resizedHeight);
$thumb    = imagecreatetruecolor($imgs, $imgs);
imagecopyresized($resized, $im, 0, 0, 0, 0, $resizedWidth, $resizedHeight, $width, $height);
imagecopyresized($thumb, $resized, 0, 0, $xOffset, $yOffset, $imgs, $imgs, $imgs, $imgs);
imagepng($thumb, "test.png");           
$instr = fopen("test.png","rb");  
$imageThumb = addslashes(fread($instr,filesize("test.png"))); 
```

风景效果很好，但是当我上传肖像时，缩略图会被加载，直到完全看到，然后它就会消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T02:42:45.123

```
header("Content-Disposition: attachment; filename=$title"); 
header("Content-length: $size"); 
header("Content-type: $type"); 
echo $image; 
```

这是一个美元大小的问题。-.-

确保您使用正确的数据！

PS：为什么它在不同的方向上起作用？……这让我很困惑。

# laravel - 持久寄存器_全局错误

> ID：14973672
> 
> 赞同：0
> 
> 时间：2013-02-20T06:35:19.613
> 
> 标签：laravel, register-globals

我最近将一个网站从一家托管公司转移到另一家托管公司。一旦我改变它，我就开始间歇性地收到一条错误消息：

`Directive 'Register_globals' is Depreciated in PHP 5.3 and greater`

它的共享主机，所以我无法访问`php.ini`文件来关闭它。我尝试使用 htaccess 禁用它，但没有运气。

如果您进入 cPanel 并查看 php 配置，它说它已打开，在旧服务器上它说它已关闭。我已经和托管公司谈过了，如果你查看 info.php，他们说它是关闭的，这是对的一半......本地值是关闭的，主值是打开的。在旧服务器上，主服务器和本地服务器都关闭了。

如果有人感兴趣，服务器正在运行 PHP 版本 5.3.13。我也在使用框架 Laravel 3 托管公司还说：“解决这个问题的一种方法是在 php 中完全禁用它，但我不确定是否有其他客户使用它，因为这对每个人都不起作用在这个共享托管平台上。” 所以我想完全关闭它不是一个选项，我不明白为什么不这样做！

我已经进入`application/config/error.php`并添加了

```
'ignore' => array(E_WARNING, E_NOTICE, E_USER_NOTICE, E_DEPRECATED, E_USER_DEPRECATED)` 
```

但这根本不起作用我刚毕业，这是一个志愿者项目，我真的要拔掉我的头发了提前谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T08:33:22.530

> 如果您进入 cPanel 并查看 php 配置，它说它已打开，在旧服务器上它说它已关闭。我已经和托管公司谈过了，如果你查看 info.php，他们说它是关闭的，这是对的一半......本地值是关闭的，主值是打开的。在旧服务器上，主服务器和本地服务器都关闭了。

100% 确定的唯一方法 - 在项目中运行 follow php 命令

```
<?=phpinfo();?> 
```

它将为您提供 PHP 正在使用的所有实际值的完整转储。

搜索`register_globals`并查看服务器的实际想法。

也许是时候切换主机了？

# c# - 如何在我的本地机器上创建目录

> ID：14973673
> 
> 赞同：2
> 
> 时间：2013-02-20T06:35:24.223
> 
> 标签：c#

我想问一下，下面的代码有什么问题，因为我一直试图在我的本地机器上创建一个文件夹，但它不能按照我的预期工作。它给了我一个错误说：

> 拒绝访问路径“C:\inetpub\wwwroot//PrintLabels/”

代码：

```
Directory.CreateDirectory(appPath + "//PrintLabels/"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T06:39:02.340

如果您使用的是 Windows Vista 或更高版本，请先关闭 Visual Studio，然后右键单击其图标并选择以管理员身份运行选项。然后，当您执行代码时，它应该停止给出拒绝访问异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T07:52:39.443

指定的路径必须在同一台计算机上，或者还可以引用服务器和共享名称的相对路径或通用命名约定 (UNC) 路径。

肯定是

```
 string path = @"\\172.16.136.35\\SharedFolder1\\"; 
```

IP 地址取代了计算机名称的使用。你不能同时使用它们。

```
string path  = @"\\ipaddress\comp_name\shared_folder\new_folder"; 
```

应该：

```
string path  = @"\\ipaddress\shared_folder\new_folder"; 
```

请注意，IP 地址是共享文件夹所在的计算机，而不是您发送请求的计算机。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T06:43:51.027

我认为这是使用 AppPath 的问题。那是路径WWWroot。它用于创建网站。因此您可能没有正确的访问权限。

您可以尝试一些您具有正确访问权限的其他路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T06:58:57.907

很可能（假设缺少 asp.net 标记）您的代码正在 ASP.Net 应用程序中运行。根据选择的安全模型帐户，代码运行在浏览器用户或特殊“匿名”帐户下。likley 的两个帐户都没有在“inetpub\wwwroot”文件夹中的写入/创建文件夹权限。

如果你真的想让这个访问 - 找出用户代码在什么下运行（即在异常时检查 Environment.UserName） - 如果你可以给这个用户权限 - 将本地资源管理器导航到你想要创建文件的文件夹/文件夹中的文件夹并调整文件夹属性的“安全”选项卡上的权限。

一般来说，将文件写入半随机位置（尤其是系统控制器，如 windows/程序文件/inetpub）并不是一个好主意。确保您了解您的操作的安全隐患...

注意：确保正确构建路径。`Path.Combine`通过字符串连接和使用一长串随机斜杠/反斜杠字符是更好的方法。

# wpf - 当 WPF 中的选项卡更改时如何使用可用内存处理用户控件

> ID：14973674
> 
> 赞同：4
> 
> 时间：2013-02-20T06:35:30.440
> 
> 标签：wpf, user-controls, garbage-collection, infragistics

我正在使用基础设施 TabGroupPane。在这种情况下，当 ContentPane 处于活动状态时，我将加载用户控制并删除以前活动的选项卡内容。这是我的代码 Xaml ：

```
<igDock:DocumentContentHost>
                <igDock:SplitPane>
                    <igDock:TabGroupPane x:Name="tabMainMenu" SelectionChanged="xamMainTab_SelectionChanged" AllowDrop="False">
                        <igDock:ContentPane x:Name="tabItem1"  Header="Item 1"></igDock:ContentPane>
                        <igDock:ContentPane x:Name="tabItem2"  Header="Item 2"></igDock:ContentPane>
                        <igDock:ContentPane x:Name="tabItem3"  Header="Item 3"></igDock:ContentPane>
                        <igDock:ContentPane x:Name="tabItem4"  Header="Item 4"></igDock:ContentPane>
                        <igDock:ContentPane x:Name="tabItem5"  Header="Item 5"></igDock:ContentPane>
                    </igDock:TabGroupPane>
                </igDock:SplitPane>
            </igDock:DocumentContentHost> 
```

和代码背后

```
private void xamMainTab_SelectionChanged(object sender, System.Windows.Controls.SelectionChangedEventArgs e)
    {             
        if (e.RemovedItems.Count > 0 && null != e.RemovedItems[0] as ContentPane)
        {
            (e.RemovedItems[0] as ContentPane).Content = null;
        }
        GC.Collect();
        ContentPane selectedTab = this.tabMainMenu.SelectedItem as ContentPane;         
        BindContainer(selectedTab.Name);
    }
private void BindContainer(string item)
    {
        switch (item)
        {
            case "tabItem1":
                this.tabItem1.Content = new UserControls.UserControl1();
                this.tabMainMenu.SelectedItem = this.tabItem1;
                break;
            case "tabItem2":
                this.tabItem2.Content = new UserControls.UserControl2();
                this.tabMainMenu.SelectedItem = this.tabItem2;
                break;
            case "tabItem3":                    
        this.tabItem3.Content = new UserControls.UserControl3();
                this.tabMainMenu.SelectedItem = this.tabItem3;
                break;
            case "tabItem4":
                this.tabItem4.Content = new UserControls.UserControl4();
                this.tabMainMenu.SelectedItem = this.tabItem4;
                break;
            case "tabItem5":                    
                this.tabItem5.Content = new UserControls.UserControl5();
                this.tabMainMenu.SelectedItem = this.tabItem5;
                break;
            default:
                this.tabItem1.Content = new UserControls.UserControl1();
                this.tabMainMenu.SelectedItem = this.tabItem1;
                break;
        }
    } 
```

在这里，我将最后一项的内容设置为 null。(e.RemovedItems[0] as ContentPane).Content = null; 但在那种情况下，内存（大小）不会释放。然后我使用 GC.Collect，这次一些内存是空闲的。这是释放内存的写入方式还是任何其他方式，请提供任何参考。而且在这种情况下，当我的用户控件包含 WebBrowser 时，如果我使用 GC.collect，内存不会释放，请也指导我。

谢谢

# python - 在 SQLAlchemy 中以多对多关系关联对象

> ID：14973678
> 
> 赞同：2
> 
> 时间：2013-02-20T06:35:54.437
> 
> 标签：python, sqlalchemy

我正在尝试使用 SQLAlchemy 通过双向多对多关系关联两个数据库对象。我需要关联存在于联结表中。表和数据存在于 SQLite3 数据库中。

这是一个简单的例子。

```
Base = declarative_base()

class Colour (Base):
    __tablename__ = 'colours'
    id = Column("id", Integer, primary_key=True)
    name = Column("name", String)
    vehicles = association_proxy('vehicles_and_colours', 'vehicles')

class Vehicle (Base):
    __tablename__ = 'vehicles'
    id = Column("id", Integer, primary_key=True)
    name = Column("name", String)
    colours = association_proxy('vehicles_and_colours', 'colours')

class ColourVehicle (Base):
    __tablename__ = 'vehicles_and_colours'
    colour_id = Column('colour_fk', Integer, ForeignKey('colours.id'), primary_key=True)
    vehicle_id = Column('vehicle_fk', Integer, ForeignKey('vehicles.id'), primary_key=True)

    colours = relationship(Colour, backref=backref("vehicles_and_colours"))
    vehicles = relationship(Vehicle, backref=backref("vehicles_and_colours"))

blue = session.query(Colour).filter(Colour.name == "blue").first()
car = session.query(Vehicle).filter(Vehicle.name == "car").first()

blue.vehicles.append(car) 
```

这给了我错误：

```
 File "/usr/local/lib/python2.6/dist-packages/SQLAlchemy-0.8.0b2-py2.6-linux-i686.egg/sqlalchemy/ext/associationproxy.py", line 554, in append
    item = self._create(value)
  File "/usr/local/lib/python2.6/dist-packages/SQLAlchemy-0.8.0b2-py2.6-linux-i686.egg/sqlalchemy/ext/associationproxy.py", line 481, in _create
    return self.creator(value)
TypeError: __init__() takes exactly 1 argument (2 given) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T17:42:58.133

关联代理要求目标对象具有单参数构造函数，该构造函数将创建适当的中间对象，或者`creator`指定建立如何创建 ColorVehicle：

```
vehicles = association_proxy('vehicles_and_colours', 'vehicles', 
                creator=lambda vehicle: ColorVehicle(vehicle=vehicle))

colours = association_proxy('vehicles_and_colours', 'colours', 
               creator=lambda color: ColorVehicle(color=color)) 
```

这在以下位置有完整记录：

[https://docs.sqlalchemy.org/en/latest/orm/extensions/associationproxy.html#creation-of-new-values](https://docs.sqlalchemy.org/en/latest/orm/extensions/associationproxy.html#creation-of-new-values)

# android - 硬件选项按钮触发 SearchView 而不是溢出菜单

> ID：14973687
> 
> 赞同：0
> 
> 时间：2013-02-20T06:36:21.460
> 
> 标签：android, actionbarsherlock, searchview

所以我有这段代码.. 我正在使用 hack（因为没有更好的词）来强制溢出菜单。我正在使用 SubMenu 来制作溢出项目。

这是我的代码：

```
@Override
public boolean onCreateOptionsMenu(Menu menu)
{
    main = menu;

    getSupportActionBar()
            .setDisplayOptions(0, ActionBar.DISPLAY_SHOW_TITLE);
    getSupportActionBar().setDisplayHomeAsUpEnabled(true);

    // Create the search view
    SearchView searchView = new SearchView(getSupportActionBar()
            .getThemedContext());
    searchView.setQueryHint("Search outlets...");
    searchView.setOnQueryTextListener(new OnQueryTextListener()
    {

        @Override
        public boolean onQueryTextSubmit(String query)
        {
            Toast.makeText(con, "Search: " + query, 0).show();
            return false;
        }

        @Override
        public boolean onQueryTextChange(String newText)
        {
            // TODO Auto-generated method stub
            return false;
        }
    });

    main.add("Search")
            .setIcon(R.drawable.abs__ic_search)
            .setActionView(searchView)
            .setShowAsAction(
                    MenuItem.SHOW_AS_ACTION_IF_ROOM
                            | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW);

    sub = main.addSubMenu("");
    sub.add("All Outlets");
    sub.add("Categories");

    MenuItem subItem = sub.getItem();
    subItem.setIcon(R.drawable.abs__ic_menu_moreoverflow_normal_holo_dark);
    subItem.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);

    return super.onCreateOptionsMenu(main);
}

@Override
public boolean onKeyUp(int keyCode, KeyEvent event)
{
    if (keyCode == KeyEvent.KEYCODE_MENU)
    {
        main.performIdentifierAction(main.getItem(1).getItemId(), 0);
        return true;
    }
    return super.onKeyUp(keyCode, event);
}

@Override
public boolean onOptionsItemSelected(MenuItem item)
{
    if (item.getTitle().equals("All Outlets"))
    {
        Intent alloutlets = new Intent(con, AllOutlets.class);
        startActivity(alloutlets);
        return true;
    }

    else if (item.getItemId() == android.R.id.home)
    {
        finish();
        return true;
    }

    else
    {
        return false;
    }
} 
```

现在，每当我在 4.0.4 设备上按下硬件选项键时，它都会展开 SearchView 而不是向我显示展开的溢出。

另外，有没有合适的方法来做到这一点？不使用 SubMenu 之类的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T07:28:37.100

我会尝试在 xml 布局中创建项目，然后在你的 onKeyUp 方法中我会这样做：

```
menu.performIdentifierAction(menu.findItem(R.id.overflow_menu), 0); 
```

其中overflow_menu 是包含子菜单的我的项目的ID，如下所示：

```
<item
    android:id="@+id/overflow_menu"
    android:icon="?actionbar_icon_overflow"
    android:showAsAction="always">
        <menu>
            <!-- subitems -->
        </menu>
</item> 
```

# javascript - Javastipt 科学记数法覆盖

> ID：14973690
> 
> 赞同：1
> 
> 时间：2013-02-20T06:36:29.370
> 
> 标签：javascript, overriding, scientific-notation

我正在尝试编写一个代码来计算给定数字中 5 个连续数字的最大乘积。
我尝试将数字转换为数组的代码，然后循环遍历数组，将每 5 个连续的单个数字相乘并将其与最后一个数字进行比较。
一旦我通过函数的数字超过 21 位，我猜计算机会将数字转换为科学计数法，这会导致整个函数关闭。
这是代码，它在 21 位上运行良好：

```
function func(value){
    var number = value;
    console.log(number);
    var output = [];
    sNumber = number.toString();
    console.log(sNumber);
    for (var i = 0; i < sNumber.length; i++) {
        output.push(+sNumber.charAt(i));
    }
    console.log(output);
    var productToCompare;
    var largerProduct = 0;
    for (var j = 0; j < output.length - 4; j++) {
        productToCompare = output[j]*output[j+1]*output[j+2]*output[j+3]*output[j+4];
        console.log(productToCompare);
        if (productToCompare > largerProduct) {
            largerProduct = productToCompare;
        }
    }
    return largerProduct;
}

func(13245678901234567890); 
```

当我添加另一个数字时：

```
func(123465789012345678901); 
```

它开始使用科学计数法。
这是由于 Javascript 的性质、我使用的计算机、编译器还是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T06:38:06.883

与许多事情一样，您会遇到 JavaScript 中使用的基本数据类型的限制。在这种情况下，它似乎是整数类型的限制。

数字 13245678901234567890 适合 64 位整数。添加另一个数字会将其推入无法以这种方式表示的范围，因此需要浮点数。

在不同的 JavaScript 引擎中进行测试时，您可能会得到不同的值。超过 2147483648 的任何内容都可能最终被转换为浮点值。

每当您进行数学计算时，请尽量避免对它们进行字符串计算。数字的字符串表示相当随意，不可信。

您应该做的是除以 10 的某个因子并进行模 10 以获得各个数字。

# proxy - 让一台服务器使用另一台服务器访问网络

> ID：14973692
> 
> 赞同：0
> 
> 时间：2013-02-20T06:36:34.933
> 
> 标签：proxy, yum

我有以下问题。我有两台运行 CentOS 6.2 的服务器。让我们将它们命名为 A 和 B。

我们的网络是这样构建的，服务器 A 可以通过代理访问互联网。它可以访问代理。但是，服务器 B 可以以任何可能的方式仅访问服务器 A，但不能直接访问代理。因此，有没有办法配置两个服务器，以便服务器 B 可以使用服务器 A 以便从 Internet 检索所需的包。

更具体地说，服务器 A 使用 cntlm 访问代理（因为代理位于 Windows 域中）。我需要在服务器 B 上配置 YUM 以便能够从远程存储库下载，并且应该通过服务器 A 完成，因为它不能直接访问 Windows 域本身中的代理。这怎么可能实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T06:50:36.703

终于找到了问题的答案。默认情况下，cntlm 以这种方式运行，它只允许本地进程连接。

为了使它充当普通代理，您必须使其成为网关。将下一行添加到 cntlm.conf：

```
Gateway yes 
```

默认情况下，这条线是连接的。但是，要小心，因为在这里你可能会遇到以下问题：

*   由于它现在已经开放，每个人都可以使用它。所以你应该添加到 cntlm.conf 特定的 ACL 列表，它只允许一些地址，但拒绝其他所有地址。
*   即使您将其设置为网关，您的防火墙仍可能会阻止它。因此，您应该设置防火墙，这样它就不会阻止内部服务器（但它也可能会拒绝所有其他地址）。
*   在 config 中，Gateway 命令之前的所有 Listen 命令都被认为是本地的，不会响应外界。确保将 Listen 命令放在 Gateway 命令之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T06:55:38.993

听起来您想设置另一个代理。

ServerA 将代理对 ServerB 的请求

ServerB 的流量必须通过 ServerA（不知何故）。

这篇文章解释它： http: [//www.faqs.org/docs/Linux-mini/TransparentProxy.html#ss6.1](http://www.faqs.org/docs/Linux-mini/TransparentProxy.html#ss6.1)

# php - 如何访问受 Joomla 保护的财产？

> ID：14973693
> 
> 赞同：0
> 
> 时间：2013-02-20T06:36:35.067
> 
> 标签：php, database, joomla, protected

我已经尝试过了，它正在工作：

```
<?php
define( '_JEXEC', 1 );
define( 'DS', DIRECTORY_SEPARATOR );
define( 'JPATH_BASE', dirname(__FILE__).DS."../apitest/");

require_once( JPATH_BASE . DS . 'includes' . DS . 'defines.php' );
require_once( JPATH_BASE . DS . 'includes' . DS . 'framework.php' );
require_once( JPATH_BASE . DS . 'libraries' . DS . 'joomla' . DS . 'factory.php' );

$conn = JDatabase::getConnectors();

print_r($conn);
?> 
```

但是，当我尝试这样做时：

```
<?php
define( '_JEXEC', 1 );
define( 'DS', DIRECTORY_SEPARATOR );
define( 'JPATH_BASE', dirname(__FILE__).DS."../apitest/");

require_once( JPATH_BASE . DS . 'includes' . DS . 'defines.php' );
require_once( JPATH_BASE . DS . 'includes' . DS . 'framework.php' );
require_once( JPATH_BASE . DS . 'libraries' . DS . 'joomla' . DS . 'factory.php' );

$conn = JDatabase::$connection;

print_r($conn);
?> 
```

它返回：

```
Fatal error: Cannot access protected property JDatabase::$connection in C:\xampp\htdocs\apitest1\index.php on line 10 
```

如何访问 $connection 变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T07:43:25.267

试试这个

```
define( '_JEXEC', 1 );
define('JPATH_BASE', dirname(__FILE__) );//this is when we are in the root
define( 'DS', DIRECTORY_SEPARATOR );

require_once ( JPATH_BASE .DS.'includes'.DS.'defines.php' );
require_once ( JPATH_BASE .DS.'includes'.DS.'framework.php' );

$mainframe =& JFactory::getApplication('site');
$mainframe->initialise();
$db = &JFactory::getDBO(); //Your database object is ready
$sql = "SELECT * FROM #__users";
$db->setQuery($sql);
$db->query();
$res = $db->loadAssocList();
print_r($res) 
```

希望这可以帮助你..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T07:24:11.123

这是受保护的，因此您需要使用 getter 来读取，并使用 setter 来写入此属性。

谷歌搜索 Joomla API 显示如下：

[http://docs.joomla.org/API16:JDatabase/getConnection](http://docs.joomla.org/API16:JDatabase/getConnection)

示例用法

```
$conn = $connectorInstance.getConnection(); 
```

您可能还想看看[这篇文章](http://docs.joomla.org/Accessing_the_database_using_JDatabase)

# button - 商家如何知道客户是否通过 PayPal 提供的“制作按钮”付款？

> ID：14973694
> 
> 赞同：1
> 
> 时间：2013-02-20T06:36:39.777
> 
> 标签：button, paypal, payment-gateway, paypal-sandbox, merchant-account

场景是这样的：你卖的是小单品，销量不是很多。但是您销售的数字产品。如果我使用他们网站上的 PayPal 按钮，商家如何知道客户是否已为他想购买的商品付款。我自己无法模拟销售，因为如果我在我的帐户上创建了支付按钮，我将无法支付某些东西。客户完成付款后会发生什么？是否可以将确认发送回我的网站以确认付款？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T07:01:50.230

商家从他从 PayPal 收到的电子邮件中知道，并通过称为 IPN（即时付款通知）的机制以编程方式知道。IPN 调用商家网站上的脚本，该脚本需要特定的有效负载，确认已收到 IPN，然后执行与销售相关的“内部”流程（如扣除库存、创建选择列表、为商家的买家帐户添加价值网站等）

您可以通过注册 PayPal Sandbox 来测试整个逻辑，这让您可以在单独的 PayPal 世界中成为卖家和买家。脚本正常运行后，您将站点切换到真实卖家帐户，并将处理目标切换为“真实 PayPal”。

[http://www.tipsandtricks-hq.com/playing-in-paypals-sandbox-2880](http://www.tipsandtricks-hq.com/playing-in-paypals-sandbox-2880)为您提供高速概览。

https://cms.paypal.com/cms_content/TR/tr_TR/files/developer/PP_Sandbox_UserGuide.pdf[是](https://cms.paypal.com/cms_content/TR/tr_TR/files/developer/PP_Sandbox_UserGuide.pdf)官方文档。

# ruby-on-rails - .on("click", function() 在使用 ajax 呈现链接时不起作用

> ID：14973696
> 
> 赞同：13
> 
> 时间：2013-02-20T06:36:42.290
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, jquery

下面的链接显示了一个模态并运行一个 ajax 请求以根据对象 id 在模态中呈现部分内容。链接工作正常，当页面完全加载 http 请求时会弹出模式，但是如果我使用 ajax 请求呈现链接（例如，弹出不同的模式并呈现一些链接），那么 js 函数不会不要跑。我尝试了一个警报（）；只是为了检查，当它用 ajax 渲染时它不会运行。

我使用的是 JQuery 1.9.1，以前的 js 与 .live('click') 一起使用，但后来被删除了。我也试过 .click()

有任何想法吗？谢谢！

关联

```
<a href="/an-object-id" data-remote=true name="modal"> 
```

JS

```
$(document).ready(function() {
$("a[name=modal]").on("click", function(e) {
    $("#mask, #modal").show();
    e.preventDefault();
etc... 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-20T06:41:29.483

[使用.on()](http://api.jquery.com/on/)将事件处理程序附加到父元素，并将选择器作为参数传递。

例子：

```
$(document).on("click", "a[name=modal]", function(e) {...}); 
```

它也适用于动态生成的元素..

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-20T06:40:24.490

```
$(document).on("click", "a[name=modal]", function(e) {
    $("#mask, #modal").show();
    e.preventDefault();
etc... 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-20T06:41:08.083

在事件委托上使用..因为您的链接是动态生成的...点击事件不会被触发...使用文档来委托事件..

```
 $(document).on("click","a[name='modal']", function(e) {
       ..
 }); 
```

您可以通过[链接](http://jq4you.blogspot.com/2013/02/jquery-direct-and-delegate-on-event.html)阅读有关`on`委托事件的更多信息。如果您委托具有文档中存在的最接近元素的事件会比`document`获得更好的性能要好得多

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-20T06:52:06.253

基本上，您需要将 click 事件的侦听器绑定到 DOM 中不会更改的内容。`on()`有一个可选参数，可让您将事件触发器过滤到被选为侦听器的项目的子元素。最简单的是使用`document`，但我更喜欢使用我知道我不会改变的最接近的父母。所以，假设我有这个标记：

```
<div id="super-awesome-parent">
    <ul>
        <li><a href="#">Some link text</a></li>
        <li><a href="#">Some link text</a></li>
        <li><a href="#">Some link text</a></li>
        <li><a href="#">Some link text</a></li>
        <li><a href="#">Some link text</a></li>
    </ul>
</div> 
```

我可以这样写一个`on()`委托：

```
$('#super-awesome-parent').on('click', 'a', function(event){ 
    // ... code 
}); 
```

然后，在事件之后添加的任何`<a>`元素仍将由委托处理。`#super-awesome-parent``ready()`

# java - 如何在 Java 中处理需要 InputEvent 的 API

> ID：14973701
> 
> 赞同：1
> 
> 时间：2013-02-20T06:37:35.730
> 
> 标签：java, api, user-interface

我有一个我想使用的公共 API，在这个 API 中有一个需要[InputEvent](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/event/InputEvent.html)的方法（因为它常用）。我想从通过套接字连接调用的代码中使用此 API，因此没有 InputEvent。

在我目前的情况下，它来自 IntelliJ Idea SDK的[ActionManager.tryToExecute() 。](http://grepcode.com/file/repository.grepcode.com/java/ext/com.jetbrains/intellij-idea/9.0.4/com/intellij/openapi/actionSystem/ActionManager.java#ActionManager.tryToExecute%28com.intellij.openapi.actionSystem.AnAction,java.awt.event.InputEvent,java.awt.Component,java.lang.String,boolean%29)

据我所知，我不能简单地实例化一个 InputEvent。我错了吗？我是否需要搜索另一个不需要 InputEvent 的 API？

# sql - SQL Server 中的运算符 BETWEEN

> ID：14973717
> 
> 赞同：1
> 
> 时间：2013-02-20T06:38:33.630
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2, between

我在存储过程中编写子查询以获取存储为 varchar 数据类型的订单之间的值。当我运行查询时，它显示：

> 子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。

我用谷歌搜索了一下，发现问题是因为在子查询中返回了超过 1 个值。

但在我的情况下，我需要位于给定输入之间的所有值。谁能告诉我我可以用什么方法来实现这一点..

代码：

```
SELECT ROW_NUMBER()OVER(
                        ORDER BY po.id) AS SNo ,
       pd.Copies AS Quantity,
       pd.EstUnitPrice AS UniPrice,
       pd.Copies*pd.EstUnitPrice AS Total,

  (SELECT value
   FROM BibContents
   WHERE bibid=pd.BibId
     AND sfld='a'
     AND tagno='245') AS Title,

  (SELECT value
   FROM BibContents
   WHERE bibid=pd.BibId
     AND sfld='a'
     AND tagno='020') AS 'ISSN/ISBN',

  (SELECT value
   FROM BibContents
   WHERE bibid=pd.BibId
     AND sfld='a'
     AND tagno='100')AS Author
FROM  [VibrantMas].[dbo].[PoDetails] AS pd
      INNER JOIN Porders AS po ON po.Id=pd.PoId
WHERE po.No BETWEEN '000021' AND '000024' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T06:55:18.687

引发错误的不是那个`BETWEEN`，而是 . 上的子选择之一`BibContents`。

你有两个选择

*   采取简单的路线并改变每`SELECT value`一个`SELECT TOP 1 value`
*   **找出其中一个子选择返回多条记录 **的根本原因。**

    *   If it shouldn't return multiple records, you should add a unique constraint to `BibContents` preventing this from happening in the first place.
    *   If multiple records can occur for a given `PoDetails`, you have to decide wich one you'd like to return.
    *   If you want all of them returned, you'll have to change the subselects to proper joins.** 

 **My advice would be to save yourself from a maintenance nightmare and solve the root cause.

Working out another scheme for `BibContents` wouldn't hurt either. It looks like you've adopted the [EAV model](https://stackoverflow.com/questions/870808/entity-attribute-value-database-vs-strict-relational-model-ecommerce-question) theme wich I think is a [bad idea.](https://stackoverflow.com/questions/4066463/should-i-use-eav-model?lq=1)**

# c - 从 C 中的文件中读取字符

> ID：14973719
> 
> 赞同：1
> 
> 时间：2013-02-20T06:38:47.767
> 
> 标签：c, scanf

这是我想要做的。我编写了一个简短的 C 代码，它将打开一个文件，读取前 2 个字节（2 个字符）并将其与 2 个字符串进行比较。这是为了帮助识别文件类型（让我们将前 2 个字节称为文件的签名）。

现在，一旦我从文件中读取了 2 个字节，我想将它与预定义的签名进行比较，并基于该签名打印文件类型。

代码：

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[])
{
FILE *fp;
char signature[2];

if(argc!=2)
{
printf("usage: fileio.c <filename>\n");
exit(1);
}

if((fp=fopen(argv[1],"r"))!=NULL)
{
fscanf(fp,"%c %c", &signature[0], &signature[1]);
printf("%x %x\n",signature[0],signature[1]);
}

} 
```

如果我在 Windows 平台上为可执行文件运行它，它将显示输出为：4a 5d，因为它是 MZ 签名。

现在，我想做这样的事情：

将签名数组的 2 个字节与 0x4d5a 进行比较，如果它们相等，则打印它是可执行文件。

我认为的另一种方式是，将其与字符串“MZ”进行比较。但是我需要使用 fscanf 从文件中读取前 2 个字节并将它们存储在一个字符串中。然后将其与“MZ”签名进行比较。

如果我可以使用十六进制字节来做到这一点，那就太好了，因为稍后我需要对十六进制字节执行一些操作。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T06:49:16.880

```
#include <stdio.h>
#include <stdint.h>

int main(int argc, char *argv[]){
  FILE *fp;
  const char mz_sig[] =  {0x4d, 0x5a};
  char signature[2];

  fp=fopen(argv[1],"r");
  fscanf(fp,"%c %c", &signature[0], &signature[1]);
  printf("%x %x\n", signature[0], signature[1]);

  if (*(uint16_t*)signature == *(uint16_t*)mz_sig) {
    printf("match\n");
  }

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T06:42:34.887

首先，您可能应该以二进制模式 ( `"rb"`) 打开文件。

至于读取，您可以使用[`fread`](http://en.cppreference.com/w/c/io/fread)将前两个字节作为单个读取`uint16_t`，然后进行比较。

# c# - 如何将控件传递给另一个 Web 应用程序并在我的 asp.net 页面中取回响应？

> ID：14973723
> 
> 赞同：0
> 
> 时间：2013-02-20T06:39:00.913
> 
> 标签：c#, asp.net, c#-4.0

在我的 asp.net 应用程序中，我有一个登录页面。当用户在填写用户名和密码后按下提交按钮时，我必须将此登录凭据传递给外部 Web 应用程序的页面。该外部应用程序将处理信息并响应它是否是一个有效的用户与否。

例如：我必须以下列格式将信息传递给外部应用程序

```
http://sampleUrl/login.php?username=alex&password=123 
```

并且应用程序的响应是登录成功

所以，在我的页面中，我必须处理响应以了解有效用户？...

据我所知， Response.Redirect("url"); 它会将控制权完全转移到另一个页面......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:48:51.593

您可以使用标志简单地重定向到您的主页，以决定是有效用户还是无效用户。

像，

```
http://sampleUrl/Home.php?Valid=1 
```

在主页中，您可以检查它是否有效。如果标志无效，您可以简单地重定向到登录页面。

:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T07:04:11.960

在您的页面中

sampleUrl/login.php?username=alex&password=123

添加逻辑，如果登录成功，它将重定向 querystring 设置为 1，如果不成功，它将重定向 querysreing 设置为 0

解析查询字符串并在查询字符串设置为 1 时应用成功的逻辑，在查询字符串设置为 0 时应用不成功的逻辑。

如果对 login.php 的更改超出了您的范围，您可以尝试 webresponse 并查看两个登录事件的结果。我认为每种情况都会有所不同，因此您也可以在这里应用您的逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T09:58:42.520

这段代码对我来说很好......

```
 try
            {
                string username = "eval1";
                string password = "dsfdf@";

                // Prepare web request...  
                HttpWebRequest myRequest = (HttpWebRequest)WebRequest.Create("http://someurl/login.php?username="+username+"&password="+password);
                myRequest.Method = "GET";
                myRequest.ContentType = "application/text";

                System.Net.HttpWebResponse hwresponse = (System.Net.HttpWebResponse)myRequest.GetResponse();
                if (hwresponse.StatusCode == System.Net.HttpStatusCode.OK)
                {
                    System.IO.Stream responseStream = hwresponse.GetResponseStream();
                    System.IO.StreamReader myStreamReader = new System.IO.StreamReader(responseStream);
                    responseData = myStreamReader.ReadToEnd().ToString().Trim();                   
                }
                hwresponse.Close();
    }
    catch(Exception e1)
    {
        Response.writeln("error message:"+e1)
    } 
```

# animation - Blender中的格斗动画

> ID：14973727
> 
> 赞同：0
> 
> 时间：2013-02-20T06:39:16.767
> 
> 标签：animation, unity3d, blender

我正在从事 3D 游戏格斗项目。在其中我必须制作一个两个玩家战斗的游戏..我正在使用 Unity3D 和 Blender 并且经过四个月的经验我对这两个非常有经验..现在我要制作一些真实的东西。现在我有一个角色我想让他的基本战斗动作应该是现实的，就像其他游戏一样，比如 Taken 3 等等。所以你能建议我一些搅拌机教程和其他一些指导我制作这种类型的动画的东西，就像制作一个打孔动画，走路动画，打腿动画，在搅拌机中。所以有什么帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:18:45.460

为了实现你提到的那些事情，我认为你应该学习***角色绑定、步行周期、角色动画等***。

现在，对于**Character Rigging**部分，请查看以下链接：

[http://cgcookie.com/blender/2011/12/12/blender-introduction-to-character-rigging/](http://cgcookie.com/blender/2011/12/12/blender-introduction-to-character-rigging/)

[http://www.blenderguru.com/videos/introduction-to-rigging/](http://www.blenderguru.com/videos/introduction-to-rigging/)
您也可以在谷歌上搜索有关此主题的更多信息

现在，您可以在 Google 上搜索其他剩余主题，例如步行自行车、角色动画等。一旦掌握了所有这些技术，您将能够创建逼真的角色动作。并且不要忘记挖掘上面的链接，这些站点包含一些非常好的教程。此外，还有许多关于此主题的 youtube 视频教程。

祝你好运

# iphone - 如何在不关闭键盘的情况下失去 UITextField 的焦点

> ID：14973731
> 
> 赞同：0
> 
> 时间：2013-02-20T06:39:27.980
> 
> 标签：iphone, ios, cocoa, uitextfield

我想在`UITextField`不关闭键盘的情况下失去焦点

我有一个`UITextField`可以长按显示复制菜单的对象。我`UIMenuController`用来显示菜单，然后它必须变成`firstResponder => UITextField`将失去编辑并关闭键盘。

所以，我想让键盘留在屏幕上而不是专注于`UITextField`. 当用户长按要复制的消息但 Viber 不会关闭键盘时，这就像 Viber。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:44:05.183

只需将下一个设置`UITextField`为第一响应者。

键盘不会消失，下一个文本字段将收到它的“击键”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T06:48:04.990

试试这个使用 UIkeyboard 的附加功能

```
-(void)viewWillAppear:(BOOL)animated{
[txfield becomeFirstResponder];

[super viewWillAppear:animated];

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillShow:) name:UIKeyboardWillShowNotification object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillHide:) name:UIKeyboardWillHideNotification object:nil];

}
- (void)viewWillDisappear:(BOOL)animated {
[super viewWillDisappear:animated];

[[NSNotificationCenter defaultCenter] removeObserver:self name:UIKeyboardWillShowNotification object:nil];
[[NSNotificationCenter defaultCenter] removeObserver:self name:UIKeyboardWillHideNotification object:nil];
}

- (void)keyboardWillShow:(NSNotification *)notification {

[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.3];

[UIView commitAnimations];
NSLog(@"Keyboard");

 }

 - (void)keyboardWillHide:(NSNotification *)notification {
NSLog(@"NoKeyboard");

 } 
```

希望这可以帮助 ！！！

# c# - .NET 4 中使用任务并行库的连接池

> ID：14973733
> 
> 赞同：2
> 
> 时间：2013-02-20T06:39:38.740
> 
> 标签：c#, .net-4.0, ado.net, task-parallel-library, connection-pooling

我有 exe 在服务器上连续运行以批处理数千个文件，文件中的数据被插入到数据库中，所有文件都使用相同的连接字符串。我已经使用 .net 4 的 TPL 来提高性能。代码的基本流程如下，因为我对连接池不太了解，所以下面的方法会给我带来麻烦请建议。谢谢。

流程：1.创建任务数组（50个文件大约50个任务）2.将每个任务添加到数组任务3.等待所有任务并重复接下来的50个文件

```
 Task[] taskArry = new Task[50];
                    for (int i = 0; i < 50; i++)
                    {
                        taskArry[i]=(Task.Factory.StartNew(() =>                          InstanceDataObject.InserData()));

                        //var t2 = Task.Factory.StartNew(() => InsertData());
                    }

                         Task.WaitAll(taskArry); 
```

**这里要注意的关键点是，我正在为 InsertData() 方法中的每个任务启动我的连接对象，因为每个任务都必须使用事务执行，因此为 50 个任务创建了 50 个连接，这会影响性能吗？**

```
 internal static void InserData(string insPath, int filingId)
        {
             try
            {
               DataAccess dataAcess = new DataAccess(true);
               // insert operation here
               dataAcess.CommitTransaction();
            }
            finally
            {
                 dataAcess.Dispose();
                _dbmanager = null;

            }
} 
```

我正在使用像这样的连接字符串 "Server=Test;User id=user;Password=@1234;database=test" 因为连接字符串启用了默认连接池我没有设置任何与池相关的参数。**`Shall i have to set the parameter regarding connection pooling?`**对于我的场景

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T00:19:49.647

理论上，是的，它应该更快。

实际上，这取决于`InsertData()`运行需要多长时间。如果它足够慢，那么 50 个任务中的每一个都可能最终创建自己的连接（因为池始终是空的），因此您将无法从连接池中获得任何优势。

最好的办法是在启用和禁用池的情况下尝试您的代码，看看哪个更好（尝试尽可能接近地模拟您的生产环境 - 客户端和服务器的网络延迟和性能会对您的数据产生很大的影响） .

[您还可以使用 ADO.NET ( http://msdn.microsoft.com/en-us/library/ms254503.aspx](http://msdn.microsoft.com/en-us/library/ms254503.aspx) ) 中内置的性能计数器来帮助您评估池是否对您有帮助。尝试在启用池的情况下运行您的代码并查看`NumberOfPooledConnections`计数器 - 如果它小于 50，那么您成功地重用了连接。

# jsf - 可以使 RichFaces 工具提示溢出到包含扩展数据表之外吗？

> ID：14973735
> 
> 赞同：1
> 
> 时间：2013-02-20T06:39:46.727
> 
> 标签：jsf, richfaces, tooltip, css

RichFaces 扩展数据表在呈现时有一个外部 div，它将所有溢出设置为隐藏。因此，每行显示一个工具提示并不能很好地工作，因为当将鼠标悬停在表格底部或右边缘的行上时，工具提示会部分隐藏在视图之外。

呈现的 HTML 看起来很像这样。需要明确的是，RichFaces 渲染引擎完全控制输出外部 DIV 的样式，包括第 3 行的“溢出：隐藏”：

```
<div id="toplevelform:myTable" class="extdt-maindiv rich-extdt-maindiv">
    <div id="toplevelform:myTable:od" class="extdt-outerdiv"
        style="width:100%; height:100%; overflow:hidden;">

        <!-- inner divs to display rows and columns with their 
            respective tooltips here -->

    </div>
</div> 
```

第 3 行的“溢出：隐藏”是导致问题的原因，如果我使用客户端后缀（例如 Firebug 编辑器）手动删除它，它可以解决问题，但我需要在 RichFaces 框架内解决它，以便 CSS 是一开始就没有输出。

用来产生这个的 RichFaces 标记看起来很像这样：

```
<rich:extendedDataTable id="myTable" value="#{backingBean.myIterableProperty}" var="myPropVar">
    <rich:column id="nameCol" width="100%">
        <h:outputText value="#{myPropVar.name}"/>
        <rich:toolTip direction="bottom-right" layout="block">
            My tooltip text here...
        </rich:toolTip>
    </rich:column>
</rich:extendedDataTable> 
```

考虑到必须在到达客户端之前对其进行修复的约束，是否有一种干净的方法可以清楚地显示工具提示而不受其边界 DIV 的限制？

顺便说一句，改变工具提示方向也不是答案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T03:29:58.027

答案是不。这样一来，RichFaces 扩展数据表就出现了烦人的缺陷。

# c++ - 根据 C++ 中的数据类型设置默认值

> ID：14973739
> 
> 赞同：0
> 
> 时间：2013-02-20T06:39:55.313
> 
> 标签：c++, c, templates

我有一个示例代码

```
template <typename BIT_LENGTH>
class mod {
public:
mod(BIT_LENGTH val) : m_val (powl(2,sizeof(BIT_LENGTH) * 8) - 1), _val(val) {
}

void value() {
    std::cout << " sizeof -- " << sizeof(BIT_LENGTH) << std::endl;
    std::cout << " value is : ---- " << m_val << std::endl;
    std::cout << " value is : ---- " << _val << std::endl;
}
private:
BIT_LENGTH m_val;
BIT_LENGTH _val;

};

int main(){
mod<uint64_t> mod1(10);
mod1.value();
} 
```

现在我想将我的成员变量初始化为模板化类型的最大值。

最好的方法是什么？

有什么比使用 powl 功能更清洁的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T06:42:01.620

退房`std::numeric_limits`。

* * *

~~`powl`不是标准的 C++ 函数：它来自 Linux。~~哦，它在 C99 中。那好吧！在 C++ 中，本质上相同的函数只提供 name `pow`，一个重载（奇怪`powl`的是在 C++11 标准中没有提到）。

* * *

顺便说一句，您可以（从统计上）通过为宏名称保留 ALL UPPERCASE 来避免烦人的意外文本替换。它也更容易在眼睛上。一般来说。

* * *

此外，以防万一您不知道，在 C 和 C++ 中，不能保证一个字节为 8 位。在一些平台上，特别是一些德州仪器数字信号处理器，一个字节（例如 a `char`）是 16 位。从历史上看，它也有其他尺寸。它必须*至少为*8 位，仅此而已。每个字节的位数可`CHAR_BIT`从`<limits.h>`.

* * *

最后，如果你总是使用系统**缩进**，你会发现你对代码有更好的理解。

这也让其他人更容易理解代码。

几乎神奇的是，这大大减少了您必须花时间寻找和纠正的错误数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T06:42:09.960

```
 #include <limits>

 std::numeric_limits<BIT_LENGTH>::max() 
```

如果`BIT_LENGTH`是内置类型，将执行此操作。顺便说一句，这是一个非常容易误导数据类型的名称。

# c# - foreach 缺少控件，除非嵌套和重复

> ID：14973740
> 
> 赞同：2
> 
> 时间：2013-02-20T06:39:56.863
> 
> 标签：c#, winforms, loops, foreach, nested-loops

我`foreach`在按钮单击事件处理程序中有一个循环，我用它来摆脱所有位于 Y 轴上同一点的控件。我有一个添加一行的控件，然后我需要用户可以选择删除他们不想添加的行。

当我单独使用`foreach`循环时，它总是会遗漏两项——每次都是相同的两项。我已经确认 Y 值实际上是相同的。如果我继续运行该函数，它会在运行三次后删除该行上的所有控件。但是，如果我使用所有相同的值嵌套`foreach`循环，它就可以工作。请参阅下面的代码。

这似乎是一种非常草率的方法，但它也是唯一对我有用的解决方案。我看到其他几个帖子说要在循环中声明第二个变量（即`Control z = c; if(z.Location....)`）。这对这里的行为没有任何影响。谁能解释为什么`foreach`循环本身不起作用？如何在没有重复嵌套的情况下修复它？

在职的：

```
 internal void MinButt_Click(object sender, EventArgs e)
    {
        Scratch.tScratch.panel2.Controls.RemoveByKey("Record" + arrDynamY[0].ToString());
        foreach (Control c in Scratch.tScratch.panel2.Controls)
        {
            if (c.Location.Y == arrDynamY[1])
            {
                c.Dispose();
            }

            foreach (Control ctrl in Scratch.tScratch.panel2.Controls)
            {
                if (ctrl.Location.Y == arrDynamY[1])
                {
                    ctrl.Dispose();
                }
            }
        }
    } 
```

每次都错过相同的两个控件：

```
 internal void MinButt_Click(object sender, EventArgs e)
    {
        Scratch.tScratch.panel2.Controls.RemoveByKey("Record" + arrDynamY[0].ToString());
        foreach (Control c in Scratch.tScratch.panel2.Controls)
        {
            if (c.Location.Y == arrDynamY[1])
            {
                c.Dispose();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T06:52:57.690

您应该首先获得用于删除和删除它们的控件，如下所示：

```
var controlsToRemove = from Control c in Scratch.tScratch.panel2.Controls
                       where c.Location.Y == arrDynamY[1]
                       select c;

foreach (var c in controlsToRemove.ToArray())
{
    Scratch.tScratch.panel2.Controls.Remove(c);
    c.Dispose();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T06:52:28.290

您正在修改（在这种情况下处理）您正在迭代的集合的项目，我相信这就是导致意外行为的原因，您可以使用`for`循环来避免此问题：

```
 for (int i = Scratch.tScratch.panel2.Controls.Length - 1; i >= 0; i-- )
            if (Scratch.tScratch.panel2.Controls[i].Location.Y == arrDynamY[1])
                Scratch.tScratch.panel2.Controls[i].Dispose(); 
```

我假设`Scratch.tScratch.panel2.Controls`可以作为数组访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T06:47:16.370

也许在单独的循环中进行处理，它可能会影响其他控件

试试这个

```
internal void MinButt_Click(object sender, EventArgs e)
{
    Scratch.tScratch.panel2.Controls.RemoveByKey("Record" + arrDynamY[0].ToString());
    var controlsToDispose = new List<Control>();
    foreach (Control c in Scratch.tScratch.panel2.Controls)
    {
        if (c.Location.Y == arrDynamY[1])
        {
            controlsToDispose.Add(c);
        }
    }
    foreach (Control c in controlsToDispose )
    {
        c.Dispose();
    }              
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-20T06:59:08.477

这是因为当您在控件上调用 Dispose() 时，它只会在 GC 启动之前保留在内存中。请尝试以下操作。

```
List<Control> controlsToDispose = new List<Control>();
foreach (Control c in Scratch.tScratch.panel2.Controls)
{
       if (c.Location.Y == arrDynamY[1])
       {
           controlsToDispose.Add(c);
           c.Dispose();
       }
}
while(controlsToDispose.Count>0)
{
      Control ctrl = controlsToDispose[0];
      controlsToDispose.RemoveAt(0);
      ctrl.Dispose();
} 
```

# iphone - 在越狱iphone上运行应用程序

> ID：14973745
> 
> 赞同：-1
> 
> 时间：2013-02-20T06:40:18.333
> 
> 标签：iphone

我正在开发一个应用程序。我正在运行应用程序`xocde 4.4.1`，ios 版本是 4.1。我的 iPhone 是越狱 iphone。所以如果我运行我的应用程序，我会收到类似“ **Xcode cannot run using the selected device** ”之类的错误。所以请告诉我可以做哪些更改才能在此设备中运行我的应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T06:56:09.797

简单地越狱您的设备不允许您在没有适当配置的情况下通过 Xcode 直接构建到设备。Xcode 需要开发人员证书（通常由 Apple 提供）才能对您尝试在设备上运行的应用程序进行签名。

越狱手机不会运行未签名的代码，但它们会运行已由不受信任的来源签名的代码。这意味着您仍然需要使用自签名证书对您的应用程序进行签名。这需要在 Keychain 中生成自签名证书，然后强制 Xcode 使用自签名证书。

然后，您需要配置设备，并修改应用程序的构建说明以使用您的自签名证书。

[适用于您的 Xcode 版本的简单指南。](http://gyolife.tumblr.com/post/11908836685/build-directly-to-jailbroken-device-xcode-4-2-5-0)

# mysql - 将 CSV 文件导入 MySQL 表，只导入第一行

> ID：14973746
> 
> 赞同：1
> 
> 时间：2013-02-20T06:40:18.853
> 
> 标签：mysql, csv, import

我尝试将 csv 文件导入 MySQL 数据库。 **CSV文件**：有一些用逗号分隔的电子邮件地址（文件名是“email.csv”） **MySQL数据库**：（数据库名是“test”）有两列（id，email）*id*是INT，主键和自动递增，*email*是 VARCHAR **OS** : Microsoft windows XP 当我尝试使用以下命令时：

```
LOAD DATA LOCAL INFILE "C:\email.csv" INTO TABLE test.email FIELDS TERMINATED BY ',' LINES TERMINATED BY '\r\n' (id,email); 
```

但只插入了 1 行（结果如下所示）：

```
Query OK, 1 row affected, 1 warning (0.06 sec)
Records: 1  Deleted: 0  Skipped: 0  Warnings: 1 
```

我该怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T07:58:42.683

如果你的 csv 文件是这样的：

```
example1@yahoo.com,example2@yahoo.com,example3_ma@yahoo.com,example4@gmail.com,e‌​xample5@yahoo.com 
```

你可以使用这个：

```
LOAD DATA LOCAL INFILE 'C:\email.csv' INTO TABLE prova.email
LINES TERMINATED BY ',' (email); 
```

您需要阅读每封电子邮件，并将其放在新行中，因此您需要的是 a `LINES TERMINATED BY ','`, 然后以这种方式读取行：

```
example1@yahoo.com
example2@yahoo.com
example3_ma@yahoo.com
example4@gmail.com
e‌​xample5@yahoo.com 
```

# c - 声明的 double 不输出在 C 编程中分配给它的内容

> ID：14973751
> 
> 赞同：-1
> 
> 时间：2013-02-20T06:40:34.060
> 
> 标签：c, if-statement, declaration

所以这次我再次学习一种新的编程语言，它是 C。在为我的主菜单创建这个函数之后，似乎声明的双“equiv”，等效的缩写，没有正确输出分配给它的等效。我评论了它出现错误的部分。

这是该函数的代码：

```
 // function for grading system
void gradeSys()
{
    char response;
    // declaration for computing midterm grades
    double Mquiz1 = 0, Mquiz2 = 0, Mquiz3 = 0, Mrecit = 0, Massign = 0, MAve = 0, Midex = 0;

    // declaration for computing final grades
    double Fquiz1 = 0, Fquiz2 = 0, Fquiz3 = 0, Frecit = 0, Fassign = 0, FAve = 0, Finex = 0;

    char answer;
    int counter = 1;
    // while loop
    while(counter != 0) {

    /*!!!---Midterm Grades Input---!!!*/
    printf("Welcome to your Grading System.\n");
    printf("Please enter your grades for Midterm:\n");
    printf("M. Quiz1:\n");
    scanf("%d" , &Mquiz1);
    printf("M. Quiz2:\n");
    scanf("%d" , &Mquiz2);
    printf("M. Quiz3:\n");
    scanf("%d" , &Mquiz3);
    printf("M. Recitation\n");
    scanf("%d" , &Mrecit);
    printf("M. Assignment\n");
    scanf("%d" , &Massign);
    printf("M. Exam:\n");
    scanf("%d" , &Midex);
    // formula for computing midterm grades
    double Midgrade = 0;
    MAve = (Mquiz1 + Mquiz2 + Mquiz3 + Mrecit + Massign)/5;
    double MAveTotal = MAve * .60;
    double MidExAve = Midex * .40;
    Midgrade = MAveTotal + MidExAve;

    printf("Your Midterm average is: %d\n", MAve);
    printf("Your Midterm Grade is: %d\n", Midgrade);
    printf("Please press enter to continue...\n");
    getchar();
    getchar();
    system("cls");

    /*!!!---Final Grades Input---!!!*/
    printf("Please enter your grades for Finals:\n");
    printf("F. Quiz1:\n");
    scanf("%d" , &Fquiz1);
    printf("F. Quiz2:\n");
    scanf("%d" , &Fquiz2);
    printf("F. Quiz3:\n");
    scanf("%d" , &Fquiz3);
    printf("F. Recitation\n");
    scanf("%d" , &Frecit);
    printf("F. Assignment\n");
    scanf("%d" , &Fassign);
    printf("F. Exam:\n");
    scanf("%d" , &Finex);
    // formula for computing final grades
    double Fingrade = 0;
    FAve = (Fquiz1 + Fquiz2 + Fquiz3 + Frecit + Fassign)/5;
    double FAveTotal = FAve * .60;
    double FinExAve = Finex * .40;
    Fingrade = FAveTotal + FinExAve;

    printf("Your Final average is: %d\n", FAve);
    printf("Your Final Grade is: %d\n", Fingrade);
    printf("Please press enter to continue...\n");
    getchar();
    getchar();
    /*!!!--- Here is where the bug occurs ---!!!*/
    // declaration and formula for the term grade
    double termGrade = 0, equiv;
    termGrade = (Midgrade + Fingrade)/2;
    // decision formula for determining equivalent
    if(termGrade >= 90 && termGrade <= 100)
    {
         equiv = 4.0;
    }
    else if(termGrade >= 85 && termGrade <= 89)
    {
         equiv = 3.0;
    }
    else if(termGrade >= 75 && termGrade <= 84)
    {
         equiv = 2.0;
    }
    else if(termGrade >= 70 && termGrade <= 74)
    {
         equiv = 1.0;
    }
    else if(termGrade >= 00 && termGrade <= 69)
    {
         equiv = 0.0;
    }
    else
    {
        printf("Invalid grade. Try again.\n");
    }
    // displays the ovarall grade for the term and the equivalent
    printf("Your grade for this term is: %d. Which is equivalent to a: %d.\n", termGrade, equiv);
    getchar();
    system("cls");

    // try again?
        printf("Do you want to try again:[Y/N]\n");
        scanf("%c", &answer);

        if(answer == 'y' || answer == 'Y')
        {
           system("cls");
           continue;            
        }
        else if(answer == 'n' || answer == 'N')
        {
           system("cls");
           counter = 0;
        }
        else
        {
            printf("Invalid input\n");
        }

     }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:44:25.450

该`%d`格式适用于有符号整数。对于浮点数（例如 a `double`），您应该使用`%f`. 见[http://www.cplusplus.com/reference/cstdio/printf/](http://www.cplusplus.com/reference/cstdio/printf/)

或者，您可以将值转换为整数（例如 `(int)FAve`）并使用`%d`，如果您只想打印值的整个部分。

# javascript - javascript 仅匹配部分字符串的大小写不敏感

> ID：14973752
> 
> 赞同：4
> 
> 时间：2013-02-20T06:40:34.203
> 
> 标签：javascript, regex, case-insensitive

我有以下正则表达式 -

```
bannerHtml.match(/href\s*=\s*[\"']{clickurl}(.*)[\"']/); 
```

与以下内容匹配 -
`href = "{clickurl}`

现在，我`href` **只**希望匹配不区分大小写，而不是整个字符串。我检查了添加`i`模式修饰符，但它似乎总是用于整个字符串 -

```
bannerHtml.match(/href\s*=\s*[\"']{clickurl}(.*)[\"']/i); 
```

**更多细节** 我希望以下所有内容都匹配 -
`hREF = "{clickurl}`
`href = "{clickurl}`
`HREF = "{clickurl}`

但是，大写`clickurl`部分不应该匹配 -
`href = "{CLICKURL}`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T06:43:36.580

您可以使用：

```
/[hH][rR][eE][fF]\s*=\s*[\"']{clickurl}(.*)[\"']/ 
```

改变的部分是：`[hH][rR][eE][fF]`，这意味着：

匹配`h`or `H`, 后接`r`or `R`, 后接`e`or `E`, 后接`f`or `F`。

* * *

如果你想让它通用，你可以创建一个辅助函数，它会接收一个类似的文本字符串`abc`并返回`[aA][bB][cC]`。它应该很简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T06:44:28.070

您不能使其部分区分大小写，但您始终可以具体：

```
bannerHtml.match(/[hH][rR][eE][fF]\s*=\s*["']{clickurl}(.*)["']/); 
```

对此的替代方法是使用辅助正则表达式丢弃错误匹配。

请注意，不需要转义引号字符`"`，因为只有斜杠`/`是分隔符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T07:38:00.230

首先我必须说这是一个非常好的问题。我想到了2个解决您的问题的方法：

1.  将所有`href`字符串设为小写：

    `bannerHtml.replace(/href/ig,"href")`

2.  首先，我用括号将 {clickurl} 包裹起来以备后用：`({clickurl})`. 然后，我匹配整个不区分大小写的字符串以查看它是否与模式匹配。最后，我检查了`{clickurl}`存储在其中的字符串匹配，`result[1]`看看它是否在确切的情况下。

    ```
    var re=/href\s*=\s*[\"']({clickurl})(.*)[\"']/i;

    var result = re.exec(bannerHtml);

    if(result && result[1]=="{clickurl}"){
        //Match!
    } 
    ```

我知道它不是非常正则表达式解决方案，但这是我能想到的最好的解决方案。祝你好运。

# javascript - 文档片段在 innerHTML 之后丢失内容

> ID：14973753
> 
> 赞同：1
> 
> 时间：2013-02-20T06:40:46.240
> 
> 标签：javascript, jquery, dom

我在网上阅读，以防止频繁的重排，并且每次我们可以使用文档片段时都修改 DOM。所以我采用了这种方法，我想用相同的内容填充 2 个下拉列表（它们实际上包含 1990-2013 年的年份）。

```
var fragment = document.createDocumentFragment();
    for(var i=1;i<=10;i++){
    var choice = document.createElement('option');
        choice.value = i;
        choice.innerHTML = i;
        fragment.appendChild(choice);
    }
$('#list').html(fragment);     //Populates #list with values 1-10 
```

这很好，但是，当我用相同的值填充我的第二个下拉列表时，片段现在没有任何内容

```
$('#list2').html(fragment);    // Does not populate #list2 
```

演示 JSFiddle：[这里](http://jsfiddle.net/nishantjani10/Nraq3/)

我也尝试了另一种可行的方法，我想知道的是文档片段在 innerHTML() 之后如何以及为什么会松散内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T06:58:28.293

这里发生的是..文档片段是在内存中创建的，而不是在 DOMtree 中，所以一旦你附加片段..它就会消失......使用创建的片段的克隆总是更好..所以你可以使用创建的片段多次，实际上，附加克隆..

```
// fragment.cloneNode(true)
 $('#list').html(fragment.cloneNode(true));
 $('#list2').html(fragment.cloneNode(true)); 
```

在这里[摆弄](http://jsfiddle.net/Nraq3/3/)

可能有帮助的[网站](https://developer.mozilla.org/en-US/docs/DOM/document.createDocumentFragment)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T06:51:49.327

[我认为应该这样做：](http://jsfiddle.net/Nraq3/1/)

```
$('#list2').html($('#list').children().clone()); 
```

# caroufredsel - carouFredSel：滚动时的淡入淡出效果：仅在滚动的元素处

> ID：14973757
> 
> 赞同：1
> 
> 时间：2013-02-20T06:40:59.057
> 
> 标签：caroufredsel

我看到九个元素： [0 1 2 3 4 5 6 7 8]

滚动的元素（一个在单击时，三个在 mouseweel 处）在白色包装 div 容器的滚动或滚动期间具有“硬边”。

点击右：<0 [1 2 3 4 5 6 7 8 9]

在鼠标滚轮向下：<0 1 2 [3 4 5 6 7 8 9 10 11]

所以我测试了滚动选项“在 1 秒内使用自定义效果和缓动动画滚动”。[http://caroufredsel.dev7studios.com/code-examples/configuration.php](http://caroufredsel.dev7studios.com/code-examples/configuration.php)与

```
...
视图：9，
滚动：{
项目：1，
fx : "交叉淡入淡出",
缓动：“线性”，
持续时间：1500
}
...

```

但

crossfade-effekt 适用于所有九个元素，而不适用于滚动和滚动的两个（或六个）元素。

您是否有在单击时淡出项目 0 和淡入项目 10 或在鼠标滚轮上淡出项目 0、1、2 和淡入项目 9、10、11 的解决方案？

谢谢

# mupdf - android mupdf build 找不到 -ljbig2dec

> ID：14973761
> 
> 赞同：0
> 
> 时间：2013-02-20T06:41:13.867
> 
> 标签：mupdf

我按照这个[步骤]（[在应用程序中集成 MuPDF 阅读器](https://stackoverflow.com/questions/8500530/mupdf-reader-integrate-in-project/8587527#8587527)）！我在cygwin中得到这个错误。请帮助...我被困住了

```
ASUS@ASUS-PC /cygdrive/c/Users/ASUS/Documents/resources/Library/mupdf-0.9
$ make generate
CC build/debug/cmapdump.o
LINK build/debug/cmapdump
/usr/lib/gcc/i686-pc-cygwin/4.5.3/../../../../i686-pc-cygwin/bin/ld: cannot find -ljbig2dec
collect2: ld returned 1 exit status
Makefile:46: recipe for target `build/debug/cmapdump' failed
make: *** [build/debug/cmapdump] Error 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:04:14.813

您是否使用 mupdf 存储库中包含的“第三方”代码？如果不是，您可能应该是（尤其是对于交叉编译）。在您的 git 存储库中：

“git子模块更新--init”

应该得到第三方来源。

# eclipse - 如何在安装另一个插件之前检查插件是否已经安装在eclipse上

> ID：14973764
> 
> 赞同：0
> 
> 时间：2013-02-20T06:41:57.790
> 
> 标签：eclipse, eclipse-plugin

我有 2 个名为 plugin1.jar 和 plugin2.jar 的插件。两者都作为功能项目打包到单独的压缩文件（plugin1.zip 和 plugin2.zip）中，并放在我的 D 驱动器上。现在在eclipse上安装plugin2.zip时（当然通过使用帮助->安装新软件），plugin2.zip应该检查是否安装了plugin1。如果未安装，我应该会收到一个错误，要求首先安装 plugin1。简而言之，我希望 plugin2 安装依赖于 plugin1 安装。只有在安装了 plugin1 时，用户才能安装 plugin2。有什么办法可以做到这一点。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T08:21:37.397

[Eclipse - 您的第一个插件](http://www.eclipse.org/articles/Article-Your%20First%20Plug-in/YourFirstPlugin.html)：

> 编辑 plugin.xml 文件，使其如下所示：

```
<?xml version="1.0"?>
... 
    <requires>
        <import plugin="org.eclipse.core.resources"/>
        <import plugin="org.eclipse.ui"/>
    </requires>
... 
```

> <...> *requires*元素是您指定插件所依赖的所有其他插件的位置
> 。

 *另请参阅：[如何为 Eclipse 编写插件？](https://stackoverflow.com/questions/299283/how-to-write-a-plugin-for-eclipse)*

# iphone - 限制通话、短信和数据使用

> ID：14973769
> 
> 赞同：1
> 
> 时间：2013-02-20T06:42:19.093
> 
> 标签：iphone, objective-c, sms, mdm

我们能否在 iOS 中使用 Objective-c 或 MDM（移动设备管理）限制以下内容：

*   拨出电话
*   发送消息 (SMS)
*   数据传输（数据使用）

在调查中，我们发现以下 MDM 提供商声称这样做。

[TELUS 移动设备管理服务](http://www.telus.com/en_CA/content/pdf/products/Security/Secure_Mobile_Device_Management.pdf)

*那么这在 iOS 上可行吗？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:31:33.200

提供商可能可以，但从应用程序方面来说是不可能的（至少在没有越狱手机的情况下是不可能的）

# oop - 面向对象设计

> ID：14973770
> 
> 赞同：2
> 
> 时间：2013-02-20T06:42:20.997
> 
> 标签：oop, object

我的任务是编写一个简单的程序来打印杂货店顾客的收据。了解**基本销售税**适用于所有商品的 10%，但免税的书籍、食品和医疗产品除外。**进口税**是适用于所有进口商品的附加销售税，税率为 5%，没有豁免。

样本输入：10 美元的 1 本书，5 美元的 1 个进口巧克力棒，依此类推。

我想让程序尽可能面向对象。所以我的层次结构是这样的：

顶层层次结构是抽象类 Item(name,price)，然后我将有类 SaleTaxItem（需要支付 10% 税的项目）和 NonSaleTax 项目类从 Item 扩展。问题是我是否应该在上面的每个类中创建一个名为 isImported 的布尔变量，以便我知道何时多收取 5% 的费用？或者我应该为导入的项目创建一个新类？

设计对于这项任务非常重要，所以我想让它变得完美。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T06:55:45.327

关于何时使用继承以及何时不使用，存在大量讨论。在这种情况下，我*不会*使用继承来为您的项目建模。

为什么？因为在现实生活中，这些税收和关税规则在时间、空间（例如您所在的州）以及您所经营的公司类型方面经常发生变化。如果每次地方和联邦政府更改法规时您都必须更改类层次结构，那么您注定要失败-更新将更改您已经拥有实例的类-您的项目。

另一个考虑因素：如果您使用类来（有效地）将销售“标记”为具有税收和/或关税，您最终会得到一些没有标记接口的项目，而有些则具有多个 - 即使用多重继承。你需要四门课。添加一些额外的规则，你就有了一个类爆炸（考虑税/关税的数量）。

另一种实现是拥有一个属性，该属性是该项目所拥有的税收和关税的集合。所以你有两个类：

*   物品

    *   清单：税收
*   税

    *   字符串：名称
    *   双倍：百分比

Tax 有许多全局实例 - SalesTax 和 ImportDuty。然后一个项目在列表中有零个、一个或两个 Tax 实例（并且该列表还暗示了税收的应用*顺序）。*

最后一种方法也更好地适应未来税收变化，包括增加新税

**编辑**隔夜我有一个改进的建议：

![在此处输入图像描述](../Images/881a49ce4bfc9c0d0714052d21cd2562.png)

该图有两个“翅膀”：

1.  AbstractItem 层次结构，处理项目及其税收
2.  TaxOrDuty 层次结构和 TaxAssessor 中的算法。

AbstractItem 在 Item 上使用[装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)，将 Item 包装在税层中——每一层都由 TaxedItem 建模。最外层是包裹在所有适用税项中的物品，并且使用装饰器模式，外观和行为与物品一样，只是价格虚高。AbstractItem 有几个有用的方法：

*   getPrice()：返回商品的全价
*   getAllTaxes()：传入一个空列表，该方法在收集 TaxOrDuty 实例的装饰器上递归。这对于能够逐项列出装饰物品的税款很重要
*   getUntaxedItem()：遍历装饰直到找到它返回的项目。这允许从装饰的项目中轻松检索原始项目。

在税收方面，有一个 TaxOrDuty 类，它对一般税收的抽象行为进行建模。在这个简单的实现中，每种税都有一个统一税率，但您可以轻松地将这种行为下放到 FlatRateTax 类中。它的方法是：

*   getRate()：返回税率或关税*率*的抽象方法。这是在子类上实现的
*   computeTax() 方法接受一个 Item 并根据 getRate() 计算它的税金
*   isApplicable() 是一个抽象方法，如果税款适用于该项目，则返回 true。这是在 SalesTax（总是返回 true）和 ImportDuty（返回 Item.isImported）上实现的

TaxAssessor 是一个负责协调适用税收分配的类别。它包含所有 TaxOrDuty 实例的列表（在本例中只有一个 SalesTax 实例和一个 ImportDuty 实例）。它的方法 applyTaxes(Item) 遍历这个调用 isApplicable() 的集合。对于任何返回 true 的 TaxOrDuty，TaxAssessor 将 Item 包装在 TaxedItem 的新实例中（当然它引用了 TaxOrDuty）：

```
AbstractItem applyTaxes(Item item) {
    taxed = item;
    for (TaxOrDuty td : taxes) {
          if (td.isApplicable(item)) {
              taxed = new TaxedItem(td, taxed);
    return taxed; 
```

因此，您的总体答案将类似于：

```
Item item = new Item("Book", 10.0, false); // New $10 book, not imported
AbstractItem withTaxes = taxAssessor.applyTaxes(item);
double taxedPrice = withTaxes.getPrice();
List<TaxOrDuty> applicableTaxes = withTaxes.getAllTaxes(new List<TaxOrDuty>()); 
```

该模型的主要优点是：

*   新税是可插入的
*   税收评估和计算算法是税收的一部分，而不是在项目中，因此非常复杂的税收可以在自己的类中独立且正确地建模
*   责任是显而易见的（对我而言）并且界限分明

# java - 如何将字符串转换为整数以在 Velocity 的循环中使用？

> ID：14973771
> 
> 赞同：1
> 
> 时间：2013-02-20T06:42:22.510
> 
> 标签：java, velocity

和`$pod.id`不`$SplitMap.get("$pod.id")`为空。

这个循环也有效：

```
#set($start = 0)
#set($end = 1) 
```

但这不起作用：

```
#set($start = 0)
#set($end = $Integer.parseInt($SplitMap.get("$pod.id"))) 
```

它给出了例外：

```
#set($start = 0)
#set($end = $Integer.parseInt("$SplitMap.get("$pod.id"))") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T06:58:24.647

这在内部工作，因为 val 模板需要一些被评论的东西

```
#set($val =1)
//Integer val = new Integer();
#set($start = 0)
#set($end = $val.parseInt($SplitMap.get("$pod.id"))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-19T18:13:09.600

问题`parseInt`在于，如果字符串不可解析，它会引发异常。如果您将[NumberTool](https://velocity.apache.org/tools/devel/apidocs/org/apache/velocity/tools/generic/NumberTool.html)加载到您的上下文中，则比`parseInt`以下解决方案更好：

```
#set($val = 1)
#set($start = 0)
#set($end = $numberTool.toNumber($SplitMap.get("$pod.id")).intValue()) 
```

有时 NumberTool 也加载为`$number`.

然而，一个小缺点是，NumberTool 只是解析它找到的第一个数字并忽略其余数字，因此“123a”=> 123。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-11T10:29:21.250

您必须将字符串`$SplitMap.get("$pod.id")`转换为`Number`or `int`：

```
#set( $start = 0 )
#set( $spodId = $number.toNumber($SplitMap.get("$pod.id")) )
#set( $end = $spodId ) 
```

`$number`是[NumberTool](https://velocity.apache.org/tools/devel/apidocs/org/apache/velocity/tools/generic/NumberTool.html)的默认键名，但可以通过在配置中指定不同的名称（例如`$numberTool`）来覆盖它。您必须检查在 Velocity 环境中使用的*NumberTool名称。*

[toNumber 方法](https://velocity.apache.org/tools/devel/apidocs/org/apache/velocity/tools/generic/NumberTool.html#toNumber-java.lang.Object-)返回：

> 如果无法进行转换，则对象为[Number或 null](https://docs.oracle.com/javase/7/docs/api/java/lang/Number.html?is-external=true)

如果你想明确一个`int`变量，而不是一个`Number`对象，你可以在结果上使用[`intValue`方法](https://docs.oracle.com/javase/7/docs/api/java/lang/Number.html#intValue())。所以上面代码的第二行看起来像这样：

```
#set( $spodId = $number.toNumber($SplitMap.get("$pod.id")).intValue() ) 
```

# mysql - 无法使用mysql插入查询插入文本

> ID：14973779
> 
> 赞同：0
> 
> 时间：2013-02-20T06:42:45.737
> 
> 标签：mysql, insert

我有一个 temp_inventory_cust 表，其中包含字段`customer_id`[int(11)] 和`first_name`[varchar(50)] 以及其他字段。我试图通过在 phyMyAdmin 中输入来运行这个查询，只是为了确保它在用 php 编码之前可以正常工作：

```
insert into temp_inventory_cust (`customer_id`,`first_name`) values (34,'fred'); 
```

> 它给了我：#1064 - 你的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '\'fred\')' 附近使用正确的语法。

我没有看到问题，我快疯了。

这个查询运行得很好：

```
insert into temp_inventory_cust (`customer_id`,`department_id`) values (34,2); 
```

（在这种情况下，两个字段都是 int 字段。

表结构

```
cust_id              int(11)     No 
first_name           varchar(50) No
last_name            varchar(50) No 
email_address        varchar(100)No 
phone_number         varchar(25) No 
department_id        int(11)     No 
position_id          int(11)     No 
end_date             date        No 
t_stamp              datetime    No 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T07:11:54.127

语法看起来很好。

我在 Fiddle 中尝试了查询，并且成功构建了架构。

这是我使用的代码：

```
CREATE TABLE temp_inventory_cust(
customer_id int(11),
first_name varchar(50)
);

INSERT INTO temp_inventory_cust (customer_id,first_name) VALUES (1,'Ankit'); 
```

如果要包含引号，请在使用引号之前使用转义序列 ()

```
INSERT INTO temp_inventory_cust (customer_id,first_name) VALUES (1,'\'Ankit\''); 
```

在这里检查：

[SqlFiddle](http://sqlfiddle.com/#!2/33a2f/1)

更新：

尝试使用双引号而不是单引号：

```
 INSERT INTO temp_inventory_cust (customer_id,first_name) VALUES (1,"Ankit"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T07:03:14.213

根据您的错误，您想`'` 在字符串中添加以进行转义`'`，您需要添加`\'`

```
MySQL server version for the right syntax to use near '\'fred\')' at line 1. 
```

将查询更改为

```
 insert into temp_inventory_cust (`customer_id`,`first_name`) values (34,'\'fred\''); 
```

它也会在数据库中添加引号，因此记录将是`'fred'`

如果您不想添加引号，请使用

```
insert into temp_inventory_cust (`customer_id`,`first_name`) values (34,'fred'); 
```

参考[http://dev.mysql.com/doc/refman/5.0/en/string-literals.html](http://dev.mysql.com/doc/refman/5.0/en/string-literals.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T06:50:02.103

如果您可以共享您的表结构会更好，但我的第一眼就说“问题必须在表名字段类型中”，它不接受字符串。交叉检查您在数据库中的归档类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T06:50:34.650

如果您直接在 phpmyadmin 数据库中进行此查询，那么没问题

但如果你使用 php 代码，那么你必须删除“'”，查询是：

```
 insert into temp_inventory_cust (customer_id,department_id) values (34,2); 
```

# css - 使用 css 将鼠标悬停在第一个子元素上时更改其他子元素

> ID：14973780
> 
> 赞同：3
> 
> 时间：2013-02-20T06:42:53.733
> 
> 标签：css, hover, css-selectors, parent-child

我试图在 div 的第一个孩子上使用悬停来影响第三个孩子。有谁知道只使用CSS来做到这一点的方法？

[http://jsfiddle.net/boou28/fNxGa/](http://jsfiddle.net/boou28/fNxGa/)

```
CSS

    /* works */
#firstp + p
{
background:#dddddd;
}

#firstp:hover + p
{
background:#ff0000;
}

#firstp + p + p
{
background:#dddddd;
}    

    /* doesnt work */

#firstp:hover + p + p
{
background:#ff0000;
}

HTML

<body>
<p>The first paragraph.</p>
<p>The second paragraph.</p>
<p>The third paragraph.</p>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T06:56:26.187

[http://jsfiddle.net/fNxGa/5/](http://jsfiddle.net/fNxGa/5/)

改变你的

```
#firstp:hover + p + p 
```

到

```
#firstp:hover ~ p ~ p 
```

`~`与选择器相同`+`，但`~`限制较少，因为它选择`p`悬停元素之后的任何元素。`+`仅选择下一个兄弟（在悬停元素之后）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T06:53:03.637

我已经注释掉了

```
#firstp:hover + p
{
   background:#ff0000;
} 
```

它似乎正在工作（即使没有评论）：
**[小提琴](http://jsfiddle.net/fNxGa/2/)**

# c++ - 如何在 C++ 类中正确使用复制构造函数和赋值

> ID：14973783
> 
> 赞同：0
> 
> 时间：2013-02-20T06:43:01.353
> 
> 标签：c++, copy-constructor, assignment-operator

我已经为我的一个类的指针数据成员编写了复制构造函数

```
class person
{
public:

 string name;
int number;
};

  class MyClass {
     int x;
    char c;
    std::string s;
    person student;
    MyClass::MyClass( const MyClass& other ) :
    x( other.x ), c( other.c ), s( other.s ),student(other.student){}
 }; 
```

但是当我运行这个程序时出现以下错误

错误：成员 'MyClass' [-fpermissive] 上的额外限定 'MyClass::' 我是否正确使用了复制构造函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T06:45:52.950

```
MyClass::MyClass( const MyClass& other )
^^^^^^^^^^ 
```

仅当您在类定义之外定义主体时，才需要完全限定名称。它告诉编译器这个特定的函数（*在你的例子中恰好是构造函数*）属于名称限定类。
当您在类定义中定义主体时，暗示该函数是您定义它的类的成员，因此不需要完全限定名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T06:58:33.913

```
class person
{
public:

string name;
int number;
};

 class MyClass {
 int x;
 char c;
 std::string s;
 person *student;
 MyClass(const MyClass& other);
};

MyClass::MyClass( const MyClass& other ) :
 x( other.x ), c( other.c ), s( other.s ),student(other.student){
  x = other.x;
  c = other.c;
  s = other.s;
  student = other.student;
 } 
```

它现在编译得很好。我仍然有一个疑问，我是否正确地执行了显式复制构造函数和赋值操作。？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T10:39:22.327

如果你想要浅拷贝，（所有`MyClass`实例都指向同一个拷贝`student`），这样做：

```
MyClass::MyClass( const MyClass& other ) :
    x( other.x ), c( other.c ), s( other.s ), student( other.student ) {} 
```

否则，您需要以这种方式实现的深拷贝（注意取消引用）：

```
MyClass::MyClass( const MyClass& other ) :
    x( other.x ), c( other.c ), s( other.s ) {
    student = new person(*(other.student)); // de-reference is required
} 
```

运行以下代码来查看区别：

```
MyClass a;
person mike;
mike.name = "Mike Ross";
mike.number = 26;
a.student = &mike;
MyClass b(a);
b.student->number = 52;
cout << a.student->number << endl;
cout << b.student->number << endl; 
```

浅拷贝输出：

```
52
52 
```

深拷贝输出：

```
26
52 
```

# xml - 是否可以使用 SVM 来学习输入“特征矩阵”而不是“特征向量”的训练样本？

> ID：14973788
> 
> 赞同：0
> 
> 时间：2013-02-20T06:43:16.837
> 
> 标签：xml, classification, svm, document-classification, feature-selection

是否可以使用 SVM 来学习输入为“特征矩阵”而不是“特征向量”的训练样本？我需要通过将每个文档表示为特征矩阵来对 XML 文档进行分类。通常，特征向量用于训练 SVM 进行文本分类。但是，将 XML 文档表示为特征向量可能会导致结构信息丢失！

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T06:46:54.633

标准做法是通过“光栅化”矩阵来创建“长向量”。

最终，SVM 解析为线或超平面，而不是多边形。

# javascript - 根据选择列表中的当前选项更改身体类别

> ID：14973789
> 
> 赞同：0
> 
> 时间：2013-02-20T06:43:18.900
> 
> 标签：javascript

在不使用 jQuery 的情况下，如何根据选择列表中当前选择的选项更改正文类？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T06:52:22.243

尝试这个

```
var ddl = document.getElementById("dropDownListID");
var optnValue = ddl.options[ddl.selectedIndex].text;
if(optnvalue == "something")
  document.body.className = "newClass";
else
  document.body.className = "otherClass"; 
```

想法是获取选项值，然后根据您获得的值更改body标签的类

**注意**
这将有选项标签的文本，
即，`<option value="1">something</option>`
So `ddl.options[ddl.selectedIndex].text`will give you `something`and
`ddl.options[ddl.selectedIndex].value`will give you`1`

# java - 黑名单服务参考

> ID：14973790
> 
> 赞同：3
> 
> 时间：2013-02-20T06:43:19.967
> 
> 标签：java, osgi, apache-felix

我正在开发一个 Java 应用程序来管理 OSGi 框架中的事件。但是，我有以下警告：

```
WARNING: EventAdmin: Blacklisting ServiceReference [[org.osgi.service.event.EventHandler] | Bundle(Scheduler [1])] due to timeout! 
```

我知道我可以通过 OSGi 服务器的属性来解决问题。但是，我想通过代码解决它。但是，我不知道应该如何在我的 Java 类中管理事件处理程序以避免这个问题。有人可以帮我解决这个问题吗？

非常感谢您提前

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T07:57:10.550

报告的问题非常糟糕，事件处理程序被调用并且不返回。

所以解决这个问题的唯一方法是找出为什么这个处理程序没有从它的事件方法返回。不返回的对象由 ServiceReference 标识。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T09:52:25.550

我同意彼得的观点，您应该确保`EventHandler`在合理的时间内返回（例如，通过在后台线程中执行额外的工作。）

但是，有时关闭黑名单可能很有用，例如在调试期间（如 Neil 所述）。

从错误消息来看，您正在使用[Felix Event Admin](http://felix.apache.org/site/apache-felix-event-admin.html)，它同时响应框架属性和配置管理员。

*   您可以设置系统属性`org.apache.felix.eventadmin.Timeout=0`以禁用黑名单，或者
*   您可以使用 Configuration Admin 设置相同的属性，使用 PID `org.apache.felix.eventadmin.impl.EventAdmin`。如果您使用不同的配置运行调试和发布版本，这可能是要走的路。

# angularjs - 为什么 angularjs 会调用函数 `name()` 两次？

> ID：14973792
> 
> 赞同：20
> 
> 时间：2013-02-20T06:43:33.637
> 
> 标签：angularjs

代码很简单：

```
<!doctype html>
<html ng-app="plunker" >
<head>
  <meta charset="utf-8">
  <title>AngularJS Plunker</title>
  <script>document.write("<base href=\"" + document.location + "\" />");</script>
  <link rel="stylesheet" href="style.css">
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular.js"></script>
</head>
<body ng-controller="MainCtrl">
  Hello {{name()}}!
</body>
</html>
<script>
var app = angular.module('plunker', []);

app.controller('MainCtrl', function($scope) {
  $scope.name= function() {
    console.log("---name---:" + new Date());
    return "Freewind";
  };
});

</script> 
```

您可以看到有一个`name`函数，我们只在主体中调用它一次。但在控制台中，它打印两次`---name---:`：

```
---name---:Wed Feb 20 2013 14:38:12 GMT+0800 (中国标准时间)
---name---:Wed Feb 20 2013 14:38:12 GMT+0800 (中国标准时间) 
```

你可以在这里看到一个现场演示：http: [//plnkr.co/edit/tb8RpnBJZaJ73V73QISC ?p=preview](http://plnkr.co/edit/tb8RpnBJZaJ73V73QISC?p=preview)

为什么函数`name()`被调用了两次？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-20T06:49:13.787

在 AngularJS 中，任何用双花括号括起来的东西都是一个在摘要循环*中至少*被评估一次的[表达式。](http://docs.angularjs.org/guide/expression)

 *AngularJS 通过连续运行摘要循环来工作，直到没有任何变化。这就是它如何确保视图是最新的。由于您调用了一个函数，它会运行一次以获取值，然后再运行一次以查看没有任何变化。在下一个摘要循环中，它将至少再次运行一次。

`name`出于这个原因，通常只从模板中调用幂等方法（如 ）是一个好主意。*

# matlab - 如何在 MATLAB 上将十进制转换为不同的 base-N？

> ID：14973795
> 
> 赞同：3
> 
> 时间：2013-02-20T06:43:42.943
> 
> 标签：matlab, matrix

我有两个矩阵 A 和 B。矩阵 A 大小为 1x1013 双倍，矩阵 B 大小为 1x12931 双。我想将矩阵A的每个元素从矩阵B转换为base-N。例如，矩阵A的第一个元素转换为矩阵B的第一个元素，矩阵A的第二个元素转换为矩阵B的第二个元素，依此类推。

```
mm = length(A);
nn = length(B);
base = cell(1,mm);
x = zeros(1,mm)
for ff = 1:mm
    ff
    AA=A(ff)
    BB=B(ff)
    x(ff) = str2double(dec2base(int32(AA),int32(BB)));
    base{ff} = x(ff);
end 
```

但我有一个错误。

```
First argument must be an array of integers, 0 <= D <= 2^52. 
```

如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T08:05:38.857

您可能正在尝试转换负数：

```
>> dec2base(-1, 2)
??? Error using ==> dec2base at 24
First argument must be an array of integers, 0 <= D <= 2^52. 
```

检查没有任何元素`A`是负的。如果任何一个是负面的，那么你可以做

```
>> x = -10;
>> d = dec2base(abs(x), 2);
>> y = -str2double(d)
y =
    -1010 
```

# jsf - 即使刷新页面，dataTable 也不会更新

> ID：14973804
> 
> 赞同：2
> 
> 时间：2013-02-20T06:44:25.673
> 
> 标签：jsf

在我的 xhtml 页面中，我有

```
<h:dataTable value="#{testController.items}" var="item" border="0">
    <h:column>
        <h:outputText value="#{item.name}"/>
    </h:column>           
</h:dataTable> 
```

它正确显示数据库中的项目名称列表。我的问题是，每当我尝试创建或删除项目时，即使我按 f5 或手动刷新页面，数据表中的项目也不会改变。它以某种方式仅在我清除浏览器缓存时更新表格。

```
public DataModel getItems() {
    if (items == null) {
        items = getPagination().createPageDataModel();
    }
    return items;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T07:55:22.950

你有什么范围？好吧，从您的代码看来，您的项目不会在刷新时再次加载，因为此时它们已经被初始化。托盘删除 if 语句并检查刷新后项目是否重新加载。

# android - 从基本适配器到其片段类的函数调用

> ID：14973808
> 
> 赞同：0
> 
> 时间：2013-02-20T06:44:37.333
> 
> 标签：android

我在夏洛克片段类中有一个函数。单击项目时，我想从其基本 adpater 类中调用它。我的代码如下

在基础适配器中

```
SherlockFragment obj=new TVgui()
(tvgui)obj.replace_fragment(frag,tag); 
```

在 sherlockFragment 类中

```
 public void replace_fragment(SherlockFragment frag,String tag)
 {
frag_child = getChildFragmentManager();
ft = frag_child.beginTransaction();
    ft.addToBackStack(null)
    .replace(R.id.fragment_container,frag,tag);
    ft.commit();

} 
```

强制关闭并出现错误“活动被破坏”。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T07:17:33.513

您应该使用传递给适配器的上下文，而不是创建新的 Fragment 对象。像这样：

```
((TVgui)context).replace_fragment(frag,tag); 
```

# c# - 表达式树中的 ArrayAccess 与 ArrayIndex

> ID：14973813
> 
> 赞同：9
> 
> 时间：2013-02-20T06:44:53.203
> 
> 标签：c#, .net, linq, expression-trees

这2个有什么区别？从 API 文档来看，它们似乎是为了做同样的事情。

[数组访问](http://msdn.microsoft.com/en-us/library/dd383687.aspx)

对比

[数组索引](http://msdn.microsoft.com/en-us/library/bb345296.aspx)

在这种情况下，它们似乎是多余的，所以我必须在这里遗漏一些东西。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-20T06:51:46.723

*编辑：我最初的答案非常错误，以至于我再次尝试。*

`Expression.ArrayAccess`返回`IndexExpression`可用于获取或设置数组中元素的值的一个。

`Expression.ArrayIndex`根据提供的数组表达式的等级（维数）返回 a`BinaryExpression`或 a 。`MethodCallExpression`然后可以使用返回的表达式从数组中读取一个值。

所以`ArrayAccess`给你一个表达式，它提供对数组数据的读写访问，同时`ArrayIndex`只给你读访问。

# shell - 如何使用数字后缀拆分文件

> ID：14973815
> 
> 赞同：35
> 
> 时间：2013-02-20T06:44:56.903
> 
> 标签：shell, command-line, ssh, command

我正在使用以下命令来拆分文件。它应该每 50,000 行拆分一次，并使用 4 位数字后缀。该文件大约有 1.4 亿行。

```
split -d -l -n 4 50000 domains.xml domains_ 
```

但是当我运行时，我收到了这个错误：

```
split: -n: invalid number of lines
Try `split --help' for more information. 
```

什么是正确的命令？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-02-20T07:38:49.043

由于 GNU 的主要帮助`split`说：

```
Usage: /usr/gnu/bin/split [OPTION]... [INPUT [PREFIX]]
Output fixed-size pieces of INPUT to PREFIXaa, PREFIXab, ...; default
size is 1000 lines, and default PREFIX is 'x'.  With no INPUT, or when INPUT
is -, read standard input.

Mandatory arguments to long options are mandatory for short options too.
  -a, --suffix-length=N   generate suffixes of length N (default 2)
      --additional-suffix=SUFFIX  append an additional SUFFIX to file names.
  -b, --bytes=SIZE        put SIZE bytes per output file
  -C, --line-bytes=SIZE   put at most SIZE bytes of lines per output file
  -d, --numeric-suffixes[=FROM]  use numeric suffixes instead of alphabetic.
                                   FROM changes the start value (default 0).
  -e, --elide-empty-files  do not generate empty output files with '-n'
      --filter=COMMAND    write to shell COMMAND; file name is $FILE
  -l, --lines=NUMBER      put NUMBER lines per output file
  -n, --number=CHUNKS     generate CHUNKS output files.  See below
  -u, --unbuffered        immediately copy input to output with '-n r/...'
      --verbose           print a diagnostic just before each
                            output file is opened
      --help     display this help and exit
      --version  output version information and exit 
```

在我看来，您需要重新组织一下您的选择：

```
split -a 4 -d -l 50000 domains.xml domains_ 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-10-15T22:06:49.733

（来自手册页，GNU coreutils 8.21）您需要的似乎是 -a/--suffix-length=N （生成长度为 N 的后缀（默认为 2）），而不是 -n/--number=CHUNKS （生成 CHUNKS 输出文件)

```
split -d -l 50000 -a 4 domains.xml domains_ 
```

你应该得到：domains_0000，domains_0001 ...

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-20T07:02:51.010

我会用`awk`. 它使您可以更好地控制输出文件和文件名。也应该快点问。以下是将 100 行文件拆分为 20 行块的方法：

```
awk 'NR%20==1 { file = FILENAME "_" sprintf("%04d", NR+19) } { print > file }' domains.xml 
```

这应该创建一些文件，例如：

```
file_0020
file_0040
file_0060
file_0080
file_0100 
```

相应调整。HTH。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-05-25T09:25:14.977

虽然您没有要求它，但我想您想要对结果文件进行适当的扩展（让我们说 xml）：

```
split -d -l 50000 -a 4 --additional-suffix=.xml domains.xml domains_ 
```

这`--additional-suffix=.xml`将使文件名类型`domains_0000.xml`等`domains_1453.xml`。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2018-01-04T10:42:38.673

我不知道这是否对您有帮助，但是如果您在文件名前缀中添加 1，即`outfile1`您最终会得到：

```
outfile101
outfile102
outfile103 
```

我知道这可能不是您要找的东西，但是无论计算机科学家是否“总是从零开始计数”，各种程序都不会解析作业数组等中的前导零。至少通过这种方式，您可以使用更广泛的程序解析您的文件。

# mysql - MySQL：/*！*/ 解释

> ID：14973817
> 
> 赞同：2
> 
> 时间：2013-02-20T06:45:05.423
> 
> 标签：mysql, sql

我正在阅读 MySQL 教程，我遇到了这个：

```
SELECT /*! SQL_NO_CACHE */ user FROM users; 
```

为什么优化提示 SQL_NO_CACHE 包含在：

```
/*!    */ 
```

我查了一下谷歌，但我根本没有得到任何结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T06:46:57.883

这些是对 MySQL 的提示，就像您提到的那样，它说不缓存结果。这些提示是以这种方式编写的，因此它们仅由 MySQL 解释（尝试在另一个数据库中运行查询）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T06:48:16.687

这个想法是使查询更便携。这样，只有 MySQL 会看到它，而不是您使用的任何语言/连接池/驱动程序，尝试验证它并失败，因为它不是标准 SQL。

# c++ - 将值标准化为更小的范围

> ID：14973824
> 
> 赞同：2
> 
> 时间：2013-02-20T06:45:43.813
> 
> 标签：c++, linux, algorithm

**描述**

我有一组相当大的（字符串，字符串，字符串）唯一元组（大约 4000 万，但可以变得更大）。对于每个元组，我计算一个无符号整数值。我想将这些值存储在某个地方，以便在生成它们之后可以重用它们（即使在应用程序出现故障之后，内存存储也是不可能的，不幸的是数据库也是如此）。

起初，我将它们作为元组（字符串、字符串、字符串、值）存储在一个文件中，但读取 4000 万条记录需要时间（而且我几乎立即需要它）。

我决定首先计算每个 (string, string, string) 元组的哈希值，然后将其标准化为 [0, n] （其中**n**是值的数量）并仅将**值**以排序顺序存储在二进制文件中（按标准化哈希值排序）。之后，我可以简单地 mmap() 这个文件并使用 mmap[normalize(hash(string, string, string))] 获取值。

我的哈希函数非常简单但速度很快，适用于我的情况（没有注意到任何冲突）：

```
concatenatedString = s1+"."+s2+"."+s3
unsigned int hash = 31;
for(int i = 0; i < concatenatedString.length(); i++) {
  hash = hash * 101 + (unsigned int) concatenatedString[i];
} 
```

与归一化相同（直截了当）：

```
((long) n * hash) / max_value 
```

**n** - 我的归一化范围的上限（所以大约 4000 万，我取 n 不是 (n - lower_bound) 因为 lowe_bound = 0）

**max_value** - 旧集合的最大值（在我的情况下为 UINT_MAX，min_value = 0 所以我不将它包含在等式中）

**问题**

我的哈希函数不会产生 0 到 4,294,967,295（无符号整数）范围内的均匀分布的值（看不出它是如何做到的）。因此，在规范化之后，我有很多冲突导致数据丢失（覆盖相同数组索引下的值）。

有没有什么聪明的方法可以做我想做的事但没有那些冲突？

我完全知道可能会发生一些碰撞。问题是我的方法往往过于频繁地发生。我的散列范围比我的元素数量大 100 倍，所以我猜可能有办法做到这一点，但我还没有弄清楚怎么做。

**解决方案** 最后我将哈希更改为 Murmurhash，将我的规范化方法更改为简单的“模 newRange”并更改文件的格式（我现在存储所有数据（字符串字符串值）） - 文件现在很大但多亏了这一点，我才能够实现一个简单的碰撞检测机制（双散列）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T07:33:49.013

实际上，我很惊讶在规范化哈希值范围之前没有发生冲突。看起来您正在使用 [0,2^32) 的非标准化范围。[在这里查看](https://en.wikipedia.org/wiki/Birthday_problem#Approximations)生日问题图表，与 4*10^7 元素发生碰撞的概率应该高于 75%。在任何情况下，将散列输出归一化到等于元素集大小的范围实际上可以保证不平凡的冲突数量。除非您愿意为您的哈希值使用计数器，否则我看不出您将如何避免这种情况。

编辑：看到你的编辑。即使范围是元素数量的 100 倍（大约 4*10*9），您仍然可能会遇到很多冲突。如上所述，一次或多次碰撞的概率远远超过 75%。

我建议有两点：

**选择不同的哈希函数**

正如您所指出的，虽然您的哈希函数很快，但它不会在 [0,2^32) 范围内随机分布值。有几个散列函数既快又能更好地在散列函数范围内分配散列值。我过去使用过的一个是[MurmurHash](https://en.wikipedia.org/wiki/MurmurHash)。

**使用更大的范围**

使用更大的范围应该可以降低碰撞的风险。[再次查看这里](https://en.wikipedia.org/wiki/Birthday_problem#Approximations)的图表，看起来 64 位应该足以将碰撞风险降低到 10^-6 以下。在这种情况下，MurmurHash64A 和 MurmurHash64B 变体将很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T06:53:11.383

并非总是可以将散列标准化为唯一的 [0..n] 值。

我可以向您建议 2 种方法：

1.  对文件进行排序并使用二进制搜索而不是地图。（LogN 复杂度）
2.  用索引创建第二个文件并在 [0..5n] 范围内实现哈希表（5n 可能被任何其他数字更改，大于 n）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T08:03:01.287

您是说您正在使用它进行标准化：

```
((unsigned int) n * hash) / max_value 
```

你说那`max_value`是`UINT_MAX`：

> “max_value - 旧集的最大值（UINT_MAX”

`hash`并被声明`unsigned int`为。

好吧，你知道，那么上面只能产生值 0 和 1，这*保证*了碰撞。

你知道C++ 中***整数和浮点除法的区别吗？***

如果没有，那么我建议获取[C++ 教科书](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)。

* * *

顺便说一句，像“(unsigned int) blah”这样的强制转换是创建错误的可靠方法。他们告诉编译器闭嘴，不要告诉你可能的问题，因为，你告诉它，你知道得更多。但你没有。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T07:53:36.167

据我了解，您需要一个唯一的哈希（这实际上是不可能的:)）：

在 Java 中 String.hashCode() 给你一个 32 位的哈希码。

如果你想要（比如说）一个 64 位的哈希码，你可以自己轻松地实现它。

如果您想要字符串的加密哈希，Java 加密库包括 MD5、SHA-1 等的实现。您通常需要将字符串转换为字节数组，然后将其提供给哈希生成器/摘要生成器。例如，请参阅@Boris Pavlović 的回答。

如果你想要一个唯一的哈希码，那你就不走运了。哈希和哈希码是非唯一的。

一个长度为 N 的 Java 字符串有 65536 ^ N 个可能的状态，并且需要一个 16 * N 位的整数来表示所有可能的值。如果你写了一个哈希函数，它产生的整数范围更小（例如小于 16 * N 位），你最终会发现多个 String 哈希到同一个整数的情况；即哈希码不能是唯一的。这被称为鸽巢原理，并且有一个直接的数学证明。（你不能打数学赢！）

# python - 可以用一个命令创建两个对象吗？

> ID：14973825
> 
> 赞同：0
> 
> 时间：2013-02-20T06:45:43.847
> 
> 标签：python

我想创建两个空列表对象。我试着用

```
vList,sList = [],[] 
```

这似乎有效。我从未在任何手册中看到过这一点（但我的 Python 仍然非常基础）。对于非空列表，我会说这样做会损害可读性，但是可以使用相同的空列表来执行此操作吗？这被认为是不好的做法还是**有任何不好的副作用**？

（空）字符串也一样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T06:51:19.083

这是正确的做法。即使多重赋值对于像你这样的简单情况似乎不是很有用，考虑这样的事情（解包一个稍微复杂的序列）：

```
>>> d = { 'a': 'x', 'b': 'y', 'c': 'z' }
>>> for i, (key, value) in enumerate(d.iteritems()):
...     print (i, key, value)
(0, 'a', 'x')
(1, 'c', 'z')
(2, 'b', 'y') 
```

如果您记住在进行任何分配之前对右侧进行了全面评估，则不会产生有害的副作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T06:51:38.133

没有不好的副作用，除非你使用

```
vList = sList = [] 
```

它将两个变量都引用到同一个列表。

我不认为 PEP8 对此有任何说明，但我会说将作业分成两行会更好读。

但是，正如@gorlum0 所提到的，如果对象是相关的并且相对简单，那么使用元组解包可能会更好。如果它们不相关，那么读者可能会很困惑，试图了解您为什么将它们放在一行中。

# css - CSS @font-face 不起作用

> ID：14973826
> 
> 赞同：-1
> 
> 时间：2013-02-20T06:45:44.767
> 
> 标签：css

我第一次尝试使用@font-face，但它不起作用任何人都可以帮我解决这个问题为什么这个脚本不起作用

```
<style>
    @font-face{ 
        font-family: myfont;
        src: url('entypo.eot');
        src: url('entypo.eot?iefix') format('eot'),
             url('entypo.woff') format('woff'),
             url('entypo.ttf') format('truetype'),
             url('entypo.svg#helvetica') format('svg');
        font-weight: normal;
        font-style: normal;
    }

    div {
        font-family: myfont;
    }
</style>

 </head>
 <body>
     <div>
          sdfdfdsfsdf
     </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T07:02:18.867

我认为你的字体不是英文字体，对吧？反正。我经常遇到这个问题，因为我使用波斯字体，有时它们不起作用！我所做的是使用不同的软件（如在线字体转换器）将它们重新转换为不同的字体格式。有时我的字体可以在 IE、Firefox 中使用，但不能在 chrome 中使用！然后我重新转换它们，一切都恢复正常！因此重新转换它们可能会解决您的问题。PS：一些很酷的网站可以做这样的事情：
[font face generator](http://www.fontsquirrel.com/fontface/generator)
[font 2 web](http://www.font2web.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T07:09:03.840

添加`'`到myfont，然后改成`helvetica`这样`myfont`：

```
@font-face{ 
    font-family: 'myfont';
    src: url('entypo.eot');
    src: url('entypo.eot?iefix') format('eot'),
         url('entypo.woff') format('woff'),
         url('entypo.ttf') format('truetype'),
         url('entypo.svg#myfont') format('svg');
    font-weight: normal;
    font-style: normal;
}

div {
    font-family: 'myfont';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T06:49:13.973

尝试这个

```
@font-face
{
    font-family: 'SegoeUI';
    src: url('Fonts/segoeui.eot');
    src: url('Fonts/segoeui.eot?#iefix') format('embedded-opentype'), url('fonts/segoeui.ttf') format('truetype');
}

@font-face
{
    font-family: 'SegoeLight';
    src: url('Fonts/segoeuil.eot');
    src: url('Fonts/segoeuil.eot?#iefix') format('embedded-opentype'), url('fonts/segoeuil.ttf') format('truetype');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T07:25:32.923

您的字体应放置在与 CSS 相关的位置，如果它位于单独的文件夹中，请使用相关路径

例如

```
// Directory Structure
images
css
fonts
-index.html 
```

如果您的字体在一个文件夹中，而 CSS 在其他文件夹中，请使用以下 css

```
@font-face{ 
    font-family: 'myfont';
    src: url('../fonts/entypo.eot');
    src: url('../fonts/entypo.eot?iefix') format('eot'),
         url('../fonts/entypo.woff') format('woff'),
         url('../fonts/entypo.ttf') format('truetype'),
         url('../fonts/entypo.svg#myfont') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

# c# - 从列表中选择多个列表

> ID：14973829
> 
> 赞同：1
> 
> 时间：2013-02-20T06:46:03.940
> 
> 标签：c#, .net, linq, list

这是目标：**获取一个通用的人员列表，并在我的模型中按男性、女性和儿童进行排序......**为了这个网站和我的隐私，我还重命名了一些东西。请关注下面的 lambda 表达式！谢谢！

我收到此错误：

> 无法转换 `System.Collections.Generic.IEnumerable<bool>`为`System.Collections.Generic.IEnumerable<Project1.DataClasses.DataObjects.People>`

人物模型：

```
public List< People> Men { get; set; }
public List< People> Women { get; set; }
public List< People> Kids { get; set; }
public List< People> Babies { get; set; } 
```

控制器：

```
public ActionResult GetPeople(PeopleModels Peoples)
{
    List<People> listPeoples = new List<People>();

    listPeoples = DataClass.GetAllPeoples();

    // this is the code I cannot get to work.
    var men = listPeoples .Select(m => m.Sex == "M");
    Peoples.Men = men.ToList<People>();

    // Women, Children too..

    return View("Employees", Peoples);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T06:49:07.503

您正在寻找`Where`声明。

```
 // Get People wher the Sex = "M"
  Peoples.Men = listPeoples.Where(m => m.Sex == "M").ToList(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T06:50:45.570

您当前仅选择`m.Sex`属性并尝试将其列表分配给`List<People>`这就是错误的原因。你可以简单地做：

```
Peoples.Men = listPeoples.Where(m => m.Sex == "M").ToList(); 
```

你也不需要`Tolist<People>()`，简单`ToList()`的就可以了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T07:49:12.073

您不了解 Linq 查询的基础知识。“选择”语句必须投影结果。例如：

```
var a = new List<string>{"ab", "abc", "abcd"};
var b = a.Select(x=>x.Length).ToList(); 
```

这里发生的是选择所有“a”元素的长度并将它们保存到现在`List<int>`包含的变量 b`{2,3,4}`

您需要的是“Where”语句，它通过集合中的谓词过滤对象（任何 IEnumerable 对象）

```
var c = a.Where(x=>x.Length<4).Select(x=>x.Length).ToList(); 
```

另一种语法：

```
var c = (from element in a 
         where element.Length<4
         select x=>Length).ToList(); 
```

我们说，**从列表中** *的**元素* **中，** **我们**需要获取长度小于 4 个字符的元素并*选择***所有**这些长度，将它们放入**列表**并分配给*c*变量。

 *********建议您阅读有关主题的更多信息并检查[这些](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)示例

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T07:03:19.887

您的 men 集合包含布尔类型的项目。

```
 var men = listPeoples .Select(m => m.Sex == "M"); // returns a boolean  collection     satisfying the condition
  Peoples.Men = listPeoples .Where(m => m.Sex == "M").ToList(); // This should be what you want 
```

你也可以做

```
var men = listPeoples .Where(m => m.Sex == "M");
Peoples.Men = men.ToList(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-19T06:41:09.877

使用 group 您可以将每种类型放入自己的集合中：

```
var grouped = from person in people
    group person by person.Type into g
    select new {Key = g.Key, people = g}; 
```

唯一的问题是选择每个集合，这是迄今为止我得到的最好的：

```
List<Person> men = new List<Person>(), women = new List<Person>(), children = new List<Person>(), babies = new List<Person>();

foreach (var persons in grouped)
{
    switch (persons.Key)
    {
        case PersonType.Male: men = persons.people.ToList(); break;
        case PersonType.Female: women = persons.people.ToList(); break;
        case PersonType.Child: children = persons.people.ToList(); break;
        case PersonType.Baby: babies = persons.people.ToList(); break;
    }
} 
```*********

# r - 计算Difference ID并计算大量String中的共存

> ID：14973835
> 
> 赞同：-1
> 
> 时间：2013-02-20T06:46:26.307
> 
> 标签：r

这是我之前的一个问题的后续，希望你能帮助我之前的问题： [Recogning multiple IDs in a complex String with R](https://stackoverflow.com/questions/14700118/recognizing-several-ids-in-a-complicated-string-with-r)

我有一个包含很多字符串和这样的值的数据框

```
ID String                                                    Value
1  LocationID=123,321,345&TimeID=456,321,789&TypeID=12,32    100
2  LocationID=123,345&TimeID=456,321                         50
3  LocationID=123,321,345&TypeID=32                          120
... 
```

String 也可以是这样，其中的 ID 应该允许为空或字符，像这样：

```
ID String                                                    Value
11  LocationID=123,321,345&TimeID=456,321,789&TypeID=         100
12  LocationID=123,345&TimeID=&TypeID=A                       50
13  LocationID=123,321,345&TypeID=32   
... 
```

正如您在示例中看到的那样，“，”表示“或”。所以 locationID=123,321,345 指的是那些位置 ID 为 123、321 或 345 的元素。“值”可以被认为是满足字符串的条目数。

我想编写一个程序来使用 R 计算某些特定 ID 的出现次数。即程序的输出应该是：

```
sID  LocationID    TimeID    TypeID
1             3         3         2   #(String ID 1 have 3 Locaiotn ID, 3 TimeID and 2 TypeID)
2             2         2         0
... 
```

我还需要计算两个不同 ID 的共存，比如

```
Condition          Co_existence
Location-Time               0.9   # How likely that I find a TimeID in the String, I will find a Location ID
Type-Time                   0.8   # How likely that I find a TimeID in the String, I will find a Type ID
...... 
```

谁能给我一些关于如何做这两个的建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T07:14:53.860

你会像上一个问题一样去：

*   为每个字符串拆分
*   将每个字符串拆分为其组件
*   将 ID、字符串名称和组件收集到数据框中

**示例代码：**

```
# Beter share example data this way (directly usable in R)
df <- data.frame(ID = c(1, 2, 3, 11, 12, 13), stringsAsFactors=FALSE,
                 String = c("LocationID=123,321,345&TimeID=456,321,789&TypeID=12,32",
                            "LocationID=123,345&TimeID=456,321",
                            "LocationID=123,321,345&TypeID=32",
                            "LocationID=123,321,345&TimeID=456,321,789&TypeID=",
                            "LocationID=123,345&TimeID=&TypeID=A",
                            "LocationID=123,321,345&TypeID=32"),
                 Values = c(100, 50, 120, 100, 50, NA))

# Get each String component in a list
df$splitString <- strsplit(df$String, split='&')

## Identify each String with the record ID before further processing
## (we will collect them out of the dataframe)
names(df$splitString) <- df$ID

# Split each component on [=, ] (*i.e.* split wherever there is an equal sign,
# a comma or a space). The first element is the name of the String, and the
# next elements are each possible value for it.
df$splitStringValues <- lapply(X=df$splitString, FUN=strsplit, split='[=, ]+')

# Be sure to explore the structure that we've got so far
str(df) 
```

接下来创建一个包含以下变量的数据框：

*   ID：原始ID
*   StringName：不同字符串的名称（*如*LocationID、TimeID*等*）
*   StringValue：每个字符串的可能值。

从这个数据框你应该能够得到你想要的所有信息。

* * *

**编辑：**按照 Arun 的建议，我完成了请求的分析。为什么 OP 会变得有趣？我添加了一个步骤并修改了数据，所以也检查一下。新代码如下：

```
# Processing the list is much easier with plyr
library(package=plyr)

# You take the list of strings, and for each string get the values
# (all but the first, which is the name of the string), record the
# name of the string for each value, and collect everything in a dataframe.
# For empty strings set NA.
strings <- ldply(.data=df$splitStringValues,
                 .fun=function(record){
                    ldply(.data=record,
                          .fun=function(string){
                             if(length(string)>1){
                                .tmp <- data.frame(Val=string[-1])
                                .tmp <- cbind(String=string[1], .tmp)
                             } else {
                                .tmp <- data.frame(Val=NA, String=string[1])
                             }
                             .tmp
                     })
            })

# Count values in each string
table(strings$String, strings$.id)

# And calculate co-ocurrence.
co_ocurrence <-
   ddply(.data=strings, .variables='.id',
         .fun=function(x){
           data.frame(Combinations=combn(unique(x$String), m=2, paste, collapse='-'))
   })
prop.table(table(co_ocurrence$Combinations)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T04:43:56.297

感谢您的所有宝贵意见和建议。最后，我使用了以下代码来完成我的任务。

我不是一个好的程序员，而且大多只能使用一些蛮力算法来处理我的问题。我总是想请像你们这样的专家在我的工作中学习一些更聪明的方法。

我对 R 很陌生，我想。我总是对“列表”、“数据框”等概念感到困惑……还有 lapply、mapply……当问题涉及 RegEx 时，情况更糟……我很荣幸拥有所有这些你在 Stack Overflow Society 给我的建议。

我确实认为我从你们那里学到了很多东西

以下是我用来处理真实数据的最终代码，如果您有更聪明的方法，请再次给我您的建议。

一次又一次的感谢。

```
##### Clear things to start #####
rm(list=ls(all=TRUE))

#### Testing Data Frame ####
df <- data.frame(ID = c(1, 2, 3, 11, 12, 13), stringsAsFactors=FALSE,
             String = c("LocationID=123,321,345&TimeID=456,321,789&TypeID=12,32&DummyID=969",
                        "LocationID=123,345&TimeID=456,321&DummyID=969",
                        "LocationID=123,321,345&TypeID=32&DummyID=969",
                        "LocationID=123,321,345&TimeID=456,321,789&TypeID=&DummyID=969",
                        "LocationID=123,345&TimeID=&TypeID=A&DummyID=969",
                        "LocationID=123,321,345&TypeID=32&DummyID=969"),
             Values = c(100, 50, 120, 100, 50, NA))
# The wanted IDs
fields <- c("LocationID", "TimeID", "TypeID")
outFile <- "./Co_occurence.xlsx"

#### Main Program ####
# Get each String component in a list
df$splitString <- strsplit(df$String, split='&')

## Identify each String with the record ID before further processing
## (we will collect them out of the dataframe)
names(df$splitString) <- df$ID

# Split each component on [=, ] (*i.e.* split wherever there is an equal sign,
# a comma or a space). The first element is the name of the String, and the
# next elements are each possible value for it.
df$splitStringValues <- lapply(X=df$splitString, FUN=strsplit, split='[=, ]+')

# Processing the list is much easier with plyr
library(package=plyr)

# You take the list of strings, and for each string get the values
# (all but the first, which is the name of the string), record the
# name of the string for each value, and collect everything in a dataframe.
# For empty strings set NA.
strings <- ldply(.data=df$splitStringValues,
             .fun=function(record){
               ldply(.data=record,
                     .fun=function(string){
                       if(length(string)>1){
                         .tmp <- data.frame(Val=string[-1])
                         .tmp <- cbind(String=string[1], .tmp)
                       } else {
                         # Set String = NA if Value is Empty
                         # Otherwise will get 1 for entries like ID2 in "ID1=123&ID2=&ID3=456"
                         .tmp <- data.frame(Val=NA, String=NA)
                       }
                       .tmp
                     })
             })

# Remove those unwanted IDs
finalStrings <- strings[strings$String %in% fields,]
finalStrings$String <- factor(finalStrings$String)

# Count values in each string
OutStrings <- as.data.frame.matrix(table(finalStrings$.id, finalStrings$String))
OutStrings$ID <- rownames(OutStrings)
OutStrings <- merge(df[,c("ID", "String", "Values")], 
                OutStrings, by="ID")
OutStrings$Total <- rowSums(OutStrings[,4:ncol(OutStrings)],)
OutStrings$nFields<- rowSums(OutStrings[,4:ncol(OutStrings)]!=0,)
OutStrings <- OutStrings[with(OutStrings, order(-OutStrings$Value)), ]

# Count the total occurrence for different number of conditions used
OutDistrTotal <- aggregate(Values~Total, sum, data=OutStrings)
OutDistrTotal <- OutDistrTotal[with(OutDistrTotal, order(-OutDistrTotal$Values)),]

# Count the total occurrence for different number of Fields used
OutDistrnFields <- aggregate(Values~nFields, sum, data=OutStrings)
OutDistrnFields <- OutDistrnFields[with(OutDistrnFields, order(-OutDistrnFields$Values)),]

# And calculate co-ocurrence.
co_ocurrence <- ddply(.data=finalStrings, .variables='.id',
    .fun=function(x){
      data.frame(Combinations=combn(unique(x$String), m=2, paste, collapse='-'))
    })
Outcooccurrence <- data.frame(prop.table(table(co_ocurrence$Combinations)))
Outcooccurrence <- Outcooccurrence[with(Outcooccurrence, order(-Outcooccurrence$Freq)),]

library("xlsx")
write.xlsx(OutStrings, outFile, "Strings", append=F, row.names = FALSE)
write.xlsx(OutDistrTotal, outFile, "DistrTotal", append=T, row.names = FALSE)
write.xlsx(OutDistrnFields, outFile, "OutDistrnFields", append=T, row.names = FALSE)
write.xlsx(Outcooccurrence, outFile, "Outcooccurrence", append=T, row.names = FALSE) 
```

# silverlight - Windows Phone 7.1“png”图像未从 URL 加载

> ID：14973838
> 
> 赞同：0
> 
> 时间：2013-02-20T06:46:33.563
> 
> 标签：silverlight, windows-phone-7

我从 Web 服务中得到 XML 格式的结果。我已阅读并持有它 List<> 然后绑定到 ListBox 控件（Windows Phone 7.1）

我在 URL 中获取图像路径，如下所示

[http://latam.zed.com/MCP/Estilos/352/7406_BannerWap_2012103_92241.png](http://latam.zed.com/MCP/Estilos/352/7406_BannerWap_2012103_92241.png)

上图未加载（此图像为动画类型）

我的代码如下：我尝试了很多方法，但没有成功。

```
var TopVentasNew = from c in TopVentas.Descendants("content_item")

            select new clsContent
            {
              id = c.Element("id").Value,
              image_url = c.Element("image_url").Value

            };                      
ListBox1.ItemsSource = TopVentasNew.ToList<clsContent>(); 
```

请帮助我，如何在 WP7 中加载动画类型的 png 图像。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T08:03:38.533

目前我找不到任何来源，但我认为 Windows Phone 和 Silverlight 不支持动画 PNG。

你可以做的是看看[这个库](http://imagetools.codeplex.com/)。我知道它在 Windows Phone 上增加了对动画 GIF 的支持。更多信息：[使用 Silverlight 在 WP7 应用程序中显示 GIF](https://stackoverflow.com/questions/4152564/display-gif-in-a-wp7-application-with-silverlight)

# javascript - 使用 JavaScript 更改元素的位置

> ID：14973839
> 
> 赞同：0
> 
> 时间：2013-02-20T06:46:34.643
> 
> 标签：javascript, positioning

我正在构建一个 Wordpress 主题，但页脚位置有问题。索引页很好，我在 style.css 中定义了“footer”的 margin-top，witch 将 bckimage 保存为 900px，将“foot_sadrzaj”的 margin-top 保存为 918px，因为“foot_sadrzaj”保存了文本和图像。这是链接：[http ://casabianca.ba/test/](http://casabianca.ba/test/)

好吧，如果我去页面，页面的内容在，或者在显示帖子时，在 . 我编写了一些 JS 代码来更改页脚和 foot_sadrzaj 的位置，具体取决于包含内容的元素 sadrzaj 或 sadrzaj_single 的位置和高度，但它不起作用（就像这里：[http](http://casabianca.ba/test/novosti/) ://casabianca.ba/test/novosti/ ） ....你能帮我弄清楚为什么吗？

这是代码：

```
var div = getElementById('sadrzaj');
var div2 = getElementById('sadrzaj_single');

if (div) {
    var z = div.style.offsetTop+div.style.offsetHeight;
    getElementById('footer').setAttribute(
            "style", "marginTop:" + z.toString() + "px");
    getElementById('foot_sadrzaj').setAttribute(
            "style", "marginTop:" + (z+18).toString() + "px");
}
else if (div2) {
    var z = div2.style.offsetTop+div2.style.offsetHeight;
    getElementById('footer').setAttribute(
            "style", "marginTop:" + z.toString() + "px");
    getElementById('foot_sadrzaj').setAttribute(
            "style", "marginTop:" + (z+18).toString() + "px");
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-20T06:49:38.423

如果可能的话，你可以试试 jQuery。

jQuery 有很多定位选项，包括 CSS 样式。

[http://api.jquery.com/css/](http://api.jquery.com/css/)

# jquery - 如何使用 struts2-jqgrid-plugin 在 jq-grid 过滤器中填充下拉列表

> ID：14973842
> 
> 赞同：0
> 
> 时间：2013-02-20T06:46:49.897
> 
> 标签：jquery, jqgrid, struts2, struts2-jquery

我正在使用 struts2-jqgrid-plugin 在网格视图中显示数据，我想在网格上有过滤器。我能够在 Grid 上显示过滤器，我也能够假设列上用户的名称的数据，但数据不显示在下拉列表中，而是以 json-string 格式显示，如这个字符串`{"helpDeskUsers":"success","userList":{"departments":null,"helper_name":"anand","helper_value":null,"user_level":null},`

**我的 jqgrid 是**

```
<s:url var="fillUser" action="getAllUsers" />
      <sjg:grid
            id="gridtable"

            filter="true"

           filterOptions="{stringResult :true,
                            searchOnEnter : true,
                            enableClear : true}" 
       >
         <sjg:gridColumn name="assigned_to"   index="issue_status" title="Assigned To" sortable="false"  search="true"
            searchtype="select"
            searchoptions="{sopt:['eq','ne'], dataUrl : '%{fillUser}'}"/> 
        </sjg:grid> 
```

我想要像这个链接[http://www.trirand.com/blog/phpjqgrid/examples/searching/search_toolbar/default.php](http://www.trirand.com/blog/phpjqgrid/examples/searching/search_toolbar/default.php)这样的过滤器，这里的**shipcity**列具有包含城市列表的下拉列表，并且根据城市，用户可以过滤数据。这个怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:07:35.927

好的，我让它解决了，我必须创建一个可以在**s:select**中保存列表的操作，

这是保存下拉列表的操作结果

```
<s:select list="userList" theme="simple"
        headerKey="-1" headerValue="Select Any"
          listKey="helper_name" listValue="helper_name" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T03:56:33.700

该`<select`标签不适用于 json 列表，您应该使用类似

`...searchoptions="{sopt:['eq','ne'], dataUrl : '%{fillUser}'}"/>`

**第 1步：** 现在为 映射操作 url `fillUser`，它在成功时返回一个 jsp( `selctbox.jsp`)。
**第2步：**`selctbox.jsp`提及您的
`<sj:select name="myuserlist" key="" value=""..../>`即与您在下拉列表中提及 的`<sjg:gridcolumn`相同。

你完成了。每当你将加载你的网格。您将找到您的`fillUser`下拉列表。

# php - 如何在php中阻止图像缓存

> ID：14973849
> 
> 赞同：1
> 
> 时间：2013-02-20T06:47:05.853
> 
> 标签：php, html, image

我有这个图像问题，即图像没有在页面刷新时重新加载，因为它是一个 .gif 图像，我必须在每次页面刷新时显示转换。

```
<?php if ($page == "index") { ?>
        <img src="images/Karpel_logo.gif" alt="" />
        <?php } else { ?>
        <a href="http://www.karpellaw.com/test"><img id="graph" src="images/Karpel_logo.gif?dummy=371662" alt="" /></a>
        <?php } ?>

 live link :    www.karpellaw.com/test 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T06:49:49.190

每次页面刷新都使用随机整数。它将强制加载新图像而不是缓存图像。

```
<img src="images/Karpel_logo.gif?<?php echo rand(); ?>" alt="" />
<?php } else { ?>
<a href="http://www.karpellaw.com/test"><img id="graph" src="images/Karpel_logo.gif?dummy=<?php echo rand(); ?>" alt="" /></a>
<?php } ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T07:03:19.580

每次刷新页面时，更改图像标签的 src ：

```
<img src="images/Karpel_logo.gif?<?php echo time();?>" alt="" /> 
```

或者您可以附加任何随机数和图像 src 的结尾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T06:50:24.417

放一个 ?a=time()

```
<?php if ($page == "index") { 
          echo '<img src="images/Karpel_logo.gif?a='.time().'" alt="" />';
         } else {
        echo '<a href="http://www.karpellaw.com/test"><img id="graph" src="images/Karpel_logo.gif?dummy=371662&a='.time().'" alt="" /></a>'
     } 
?> 
```

# editor - Notepad++ Dreamweaver 是否支持 Handlebar 和 Mustache js？

> ID：14973850
> 
> 赞同：3
> 
> 时间：2013-02-20T06:47:07.970
> 
> 标签：editor, syntax-highlighting, handlebars.js, mustache

是否有用于处理 Handlebar js 和 Mustache js 的语法荧光笔？

此时我为 Dreamweaver 使用了不同的主题，并且在使用某些代码时它一直显示红色背景颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-03T09:30:08.083

Visual Studio 对 Handlebars 和 Mustache 进行了完美的语法突出显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-26T20:03:11.363

据我所知，仅适用于 .moustache 模板： [https ://github.com/nuket/userDefineLang_Mustache](https://github.com/nuket/userDefineLang_Mustache)

必须想办法把它们分开。

# python - suds 安装错误：没有名为客户端的模块

> ID：14973852
> 
> 赞同：39
> 
> 时间：2013-02-20T06:47:13.847
> 
> 标签：python, pip, suds

尝试使用 pip-3.2 安装 suds 并失败并出现错误

```
sudo pip-3.2 install suds
Downloading/unpacking suds
  Running setup.py egg_info for package suds
  Traceback (most recent call last):
  File "<string>", line 16, in <module>
  File "/tmp/pip-build/suds/setup.py", line 20, in <module>
    import suds
  File "suds/__init__.py", line 154, in <module>
    import client
ImportError: No module named client
Complete output from command python setup.py egg_info:
Traceback (most recent call last):

File "<string>", line 16, in <module>

File "/tmp/pip-build/suds/setup.py", line 20, in <module>

import suds

File "suds/__init__.py", line 154, in <module>

import client

ImportError: No module named client 
```

这个命名客户端是哪个模块，如果需要，我该如何安装它？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-02-20T07:01:44.833

根据[此](https://bitbucket.org/jurko/suds)页面，您应该尝试运行`sudo pip-3.2 install suds-jurko`. 看起来`suds`可能尚未更新为与 3.2 一起使用，而已经更新`suds-jurko`。希望这可以帮助！

编辑：

从`suds-jurko`PyPI 页面：

> > > ## 轻量级 SOAP 客户端（Jurko 的分支）。
> > > 
> > > 基于 Jeff Ortel（redhat dot com 的 jortel）在“ [https://fedorahosted.org/suds](https://fedorahosted.org/suds) ”上托管的原始“suds”项目。
> > > 
> > > 'Suds' 是一个轻量级的基于 SOAP 的 Web 服务客户端，用于在 LGPL 下获得许可的 Python（请参阅分发中包含的 LICENSE.txt 文件）。
> > > 
> > > 希望这只是最初创建的 suds Python 库项目的一个临时分支，因为最初的项目开发似乎已经停滞不前。如果它再次恢复，应该重新整合回原始项目。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-04-09T06:51:01.983

在 python 3.7.7 中，您可以使用

```
pip install suds-py3 
```

安装 suds py3 包。如果您的代码没有按预期工作，您可以删除 suds 目录

```
python3.7/site-packages/ 
```

并重新运行

```
pip install suds-py3 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-20T00:31:21.507

找到 client.py 并将其路径添加到 PYTHONPATH 中。这将解决您的问题。

在 Windows Python 3.5 中，它位于 Python35\Lib\http 中。PYTHONPATH=E:\apps\Python35\Lib;E:\apps\Python35\Lib\http;

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-21T01:40:37.480

我面临着类似的问题。我已经安装了suds-jurko0.6，但是当我在python3.3 shell中导入suds(import suds)，并做dir(suds)时，输出如下：

```
['BuildError',
 'BytesIO',
 'MethodNotFound',
 'PortNotFound',
 'Repr',
 'ServiceNotFound',
 'SoapHeadersNotPermitted',
 'TypeNotFound',
 'UnicodeMixin',
 'WebFault',
 '__build__',
 '__builtins__',
 '__cached__',
 '__doc__',
 '__file__',
 '__initializing__',
 '__loader__',
 '__name__',
 '__package__',
 '__path__',
 '__version__',
 'byte_str',
 'byte_str_class',
 'null',
 'objid',
 'sys',
 'tostr',
 'version'] 
```

也就是说，python 没有导入 suds 模块。到目前为止，我的 hackish 解决方案一直在做 sys.path.append(suds.path **[** 0])。不过，我对此并不完全满意。更rubbost的解决方案应该与suds包顶部的**ini .py文件有关。**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-12-12T21:12:53.397

我建议安装最新的 jurko developer's cut，它应该可以处理大型 WSDL 的递归深度加载问题（我在 NetSuite WSDL 中遇到了这个问题）这个版本应该可以解决这个问题。

```
$ sudo pip install bitbucket.org/jurko/suds/get/tip.tar.gz#egg=suds 
```

这是 Bitbucket 项目页面：

[https://bitbucket.org/jurko/suds/wiki/Home](https://bitbucket.org/jurko/suds/wiki/Home)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-07-02T11:25:14.950

基本上suds库和python版本的兼容性有问题。你的 python 版本应该是 2.7.14。

我将我的 python 版本 3.6 降级到 2.7.14，它对我有用。

请让我知道，如果有任何进一步的错误。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-02T17:24:18.197

像这样的错误通常是由一个错误导致的，你的 virtualenv 的位置在`source .venv/bin/activate`哪里。`.venv`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-01T13:27:05.657

也许为时已晚，但你可以试试这个：

```
try:
   from suds.client import Client
except ImportError:
   print('Cannot import SUDS') 
```

# scala - Scala 中的 Yield Syntax 明显不一致？

> ID：14973857
> 
> 赞同：0
> 
> 时间：2013-02-20T06:47:37.663
> 
> 标签：scala

我正在尝试学习 scala，并试图理解为什么以下内容是合法的：

```
for (idx <- 1 to 10) yield idx 
```

但以下是不合法的。

```
for (idx <- 1 to 10) { yield idx } 
```

它们在语法上看起来是一样的。我错过了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T06:55:14.190

因为这就是解析器的工作方式，所以这里是[Scala 规范](http://www.scala-lang.org/docu/files/ScalaReference.pdf)的一部分：

```
Expr1 ::= ‘for’ (‘(’ Enumerators ‘)’ | ‘{’ Enumerators ‘}’)
  {nl} [‘yield’] Expr 
```

它说我们可以拥有一个或多个这样命名的枚举器，`{nl}`说我们可以嵌套多个`for`像

```
for(...)
  for(...) 
    ... 
```

我们可以在`yield`表达式后面添加可选关键字，但是没有大括号的位置。表达式 (body) 本身可以是`(idx)`, `{idx}`, just`idx`或其他东西，所以这是合法的：

```
for (idx <- 1 to 10) yield { idx } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T06:57:22.673

这归结为如何对 for 表达式进行脱糖（以及与之关联的解析器规则）。

在第一种情况下，编译器会将理解脱糖为以下内容：

```
(1 to 10).map(idx => idx) 
```

第二种情况是允许人们使用 for 循环的简写（这可能很麻烦）。第二种形式`for`本质上是执行`foreach`结果总是存在的`Unit`，因此`yield`不可能，因为返回类型已经定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T08:09:14.100

`yield`好像可以换成`map`。因此使这成为可能

```
for (idx <- 1 to 10) yield {val square = idx * idx; square} 
```

[你可以从scala-yield-syntax](https://stackoverflow.com/questions/9796939/scala-yield-syntax)找到更多关于这个的信息，在这里可以找到更多细节[can-someone-explain-scalas-yield](https://stackoverflow.com/questions/1052476/can-someone-explain-scalas-yield)

# joomla - 创建 joomla 文章

> ID：14973861
> 
> 赞同：0
> 
> 时间：2013-02-20T06:47:45.520
> 
> 标签：joomla

我对在 joomla 中创建文章有疑问。我创建了新文章，然后文章的内容是从 Word 文档中复制粘贴。我的问题是网站内容的预览没有正确完成，内容超出了限制。由于重叠，最后一些单词没有看到。

看看我说的图片帮帮我.. =（

[http://imageshack.us/photo/my-images/571/88810506.jpg/](http://imageshack.us/photo/my-images/571/88810506.jpg/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T09:50:02.260

从 word 复制和粘贴始终是一场噩梦。在粘贴之前，您应该清理内容。一种简单的方法是粘贴到记事本中，然后从记事本中复制并粘贴到 joomla 编辑器中。

如果您使用 JCE（或 JCK，我不记得）作为您的 joomla 编辑器，则有一个特定的按钮可以从 word 中粘贴，该按钮将清除 word 引入的额外标记。

最后，您可以使用任何词清洁在线服务（[检查此](https://stackoverflow.com/questions/67964/what-is-the-best-free-way-to-clean-up-word-html)）。

问候，

# java - 随机选择后如何从数组中删除字符串？爪哇

> ID：14973867
> 
> 赞同：0
> 
> 时间：2013-02-20T06:48:23.457
> 
> 标签：java, arrays, string, random

我从数组中随机选择一个字符串，在选择它之后我想制作它，以便我不能再次选择该字符串。我应该“删除”它还是有更好的方法？

这是我随机选择它的代码，

```
position = positionList[(int) (Math.random() * positionList.length)]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T06:51:15.460

`ArrayList`如果您使用 an而不是.，则删除将是更好的选择`array`。因为在数组的情况下，您将不得不重新调整它的大小（这意味着您必须每次都创建一个新数组 -*致命的想法。避免它*），或者将选择的索引设置为`null`.

但是这种方法（设置`null`）的问题在于，您可能必须多次进行随机选择才能获得一个有效的随机索引，尤其是当您只剩下`1`有效索引时。因此，最好使用 a `List`，并从中删除选定的元素。

```
List<String> list = new ArrayList<String>();  

// Populate your list.

Collections.shuffle(list);        // Shuffle the list.
String random = list.remove(0);   // Will remove the first element 
```

请注意，如果您想要原始的`ArrayList`，以后的，那么您可能可以复制它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T06:49:40.763

最简单的方法是

```
positionList[(int) (Math.random() * positionList.length)] = null; 
```

但这似乎更接近你想要的

```
 String[] a = { "1", "2", "3", "4" };
    List<Integer> positions = new ArrayList<>(a.length);
    for (int i = 0; i < a.length; i++) {
        positions.add(i);
    }
    Collections.shuffle(positions);
    while(!positions.isEmpty()) {
        int i = positions.remove(positions.size() - 1);
        System.out.println(i);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T06:53:14.540

我会说你基本上有三个选择。

1.  不要使用数组。您可以改用列表，这样您就可以轻松删除元素
2.  按照其他答案中的建议将数组元素设置为 null
3.  跟踪到目前为止您在某种数据结构中选择的数组位置，并在每次生成随机数时检查它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T06:57:44.397

首先，您需要了解 Java 中的数组具有不可变的长度。如果你创建一个有 5 个元素/槽的数组，它总是有 5 个元素。你不能改变它。

因此，您实际上无法删除数组的第 i 个元素。您可以执行以下操作之一：

*   您可以将位置 i 处的元素设置为`null`（假设这是一个对象数组）。

*   您可以创建一个新数组，该数组由旧数组的元素组成，而您正在“删除”的元素除外。但请注意，您*实际上*并没有更改原始数组。

还有第三种选择。根本不要使用数组。使用 a`List`代替；例如一个`ArrayList`或可能一个`LinkedList`取决于您的应用程序的要求。该 API 允许您将元素添加到列表中并从列表中删除元素......除此之外还有更多。

（使用 a`ArrayList`而不是数组的缺点是前者占用更多空间并且速度稍慢。但是除非空间使用和/或性能是您的应用程序的*关键问题，否则它不太重要。）*

# sql - 我想比较 2 列并标记不匹配的值

> ID：14973871
> 
> 赞同：1
> 
> 时间：2013-02-20T06:48:41.643
> 
> 标签：sql, ms-access, ms-access-2007

我有 2 个表，这些表来自不同的应用程序，我想访问比较 2 列（标签名称）并向我指出哪些标签名称不匹配

在最好的情况下，不会有没有匹配的名称，因为两个列表应该相同。

但是，我想检查我的表格，因为我不想自己检查 1000 个名字。

是否可以访问标记或着色不匹配的名称？

如果不是，那么我区分“不匹配”值的最佳方法是什么？

提前致谢！

编辑：

我正在使用的表被称为

```
DB_Total 
```

和

```
TagNames_EA 
```

在“DB_Total”中，我有 3 列：

```
"Name"

"Address"

"Type" 
```

在 TagNames_EA 中

我只有专栏

```
"Name" 
```

我想比较这两者的原因是因为我想快速检查一下 EA 中的值是否正确。

我正在使用的代码是：

```
SELECT DB_Total.Address, DB_Total.Name, DB_Total.Type
FROM DB_Total LEFT JOIN TagNames_EA ON DB_Total.[Name] = TagNames_EA.[Name]
WHERE (((TagNames_EA.Name) Is Null)); 
```

不幸的是，这只返回没有匹配的行。

我想访问以标记我现有表中没有匹配的行。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T07:25:30.953

我的印象是您希望查看*DB_Total*中的所有行并包含一个计算字段，该字段指示*TagNames_EA*中是否存在匹配的*Name*。

 *```
SELECT
    d.Address,
    d.Type,
    d.Name,
    IIf(t.Name Is Null, False, True) AS match_found
FROM
    DB_Total AS d
    LEFT JOIN TagNames_EA AS t
    ON d.Name = t.Name; 
```

如果您想用颜色显示这些数据以区分匹配和不匹配的名称，请基于该查询构建一个表单并在*match_found*上设置一个条件格式表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T02:00:19.267

我从阅读您的问题中得到的感觉是您知道 DB_Total 包含正确的名称列表，可以用作参考列表。但是 TagNames_EA 可能包含也可能不包含正确的名称。换句话说，您想查看 TagNames_EA 中在 DB_Total 中没有对应名称的所有名称：

```
 select t.[Name] as TagNames_EA_Incorrect_Names
     from TagNames_EA as t
left join DB_Total as d
       on t.[Name] = d.[Name]
    where d.[Name] is null 
```*

# java - 在eclipse Juno的所有MPerspective中添加MPart

> ID：14973875
> 
> 赞同：1
> 
> 时间：2013-02-20T06:48:57.643
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-rcp, eclipse-juno

我正在 Eclipse 4.2 中创建一个 RCP。在我的 RCP 中，我有 3 个观点。
我在运行时创建一个部分，并以如下方式添加它。

```
@Inject
EPartService partService;
@Inject
MApplication application;    
...

Mpart part = .... ;    
...

List<MPartStack> stacks = modelService.findElements(application, null, MPartStack.class, null);
stacks.get(0).getChildren().add(part);
partService.showPart(part, PartState.ACTIVATE); 
```

但问题是它在当前打开的透视图中添加了视图，因此如果您将透视图切换到其他视图，则不会显示该视图，这是正确的，因为我只是将其添加到第一个堆栈。
**但我的要求**是应该在每个角度添加它，所以如果它切换到其他角度，它应该在那里。

我得到如下 MPerspective 列表：

```
List<MPerspective> mPerspective = modelService.findElements(application, null, MPerspective.class, null); 
```

**但是不知道怎么加。**

那么如何在每个透视图中添加Part。？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T12:14:26.983

In Eclipse 3.x there was the concept of [StickyViews](http://eclipseo.blogspot.de/2007/08/sticky-views.html), and you might still be able to use it via the compatibility layer. However, the Eclipse 4 application model is much more flexible, and there should be several ways you can add such a 'sticky' MPart.

In the screenshot below you can see that in your Application.e4xmi you can have several Perspective Stacks, and even Mparts or MPartStacks on the same level. In your example above you can simply add the MPart to a second MPartStack that is on the same level in the application model as your Perspective Stack:

```
stacks.get(1).getChildren().add(part); 
```

![Application.e4xmi](../Images/bd19a607ce65aac93d2e921f34ba6e28.png)

# java - 必须做什么才能让 Java 程序搜索 Google？

> ID：14973882
> 
> 赞同：0
> 
> 时间：2013-02-20T06:49:22.410
> 
> 标签：java, connection, google-search

这是想法：

1.  一个程序（在 Java 中）将接受一个输入
2.  程序接受输入并在网上某处使用它来获得结果
3.  它把它上网的结果显示在程序界面上

这有点像您如何通过 Google 桌面应用程序而不是浏览器进行搜索？

我只需要在这方面朝着正确的方向大步前进。（也许我应该寻找某种方法）我对 Java API 不是很熟悉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T08:19:31.670

您可以使用 Java 的标准 HttpURLConnection 来搜索内容。然后解析响应，您只需要[Apache tika](http://tika.apache.org/index.html)，它用于从 HTML 页面中提取文本。

这是一个使用 Url Connection 的简单示例：

```
import java.io.BufferedReader;
import java.io.DataOutputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.ProtocolException;
import java.net.URL;
import java.net.URLEncoder;

public class SimpleHTTPRequest {

  /**
   * @param args
   */
  public static void main(String[] args) {
      HttpURLConnection connection = null;
      DataOutputStream wr = null;
      BufferedReader rd  = null;
      StringBuilder sb = null;
      String line = null;

      URL serverAddress = null;

      try {
          serverAddress = new URL("http://www.google.com/search?q=test");
          //set up out communications stuff
          connection = null;

          //Set up the initial connection
          connection = (HttpURLConnection)serverAddress.openConnection();
          connection.setRequestMethod("GET");
          connection.setDoOutput(true);
          connection.setDoInput(true);
          connection.setUseCaches(false);
          connection.setRequestProperty ( "Content-type","text/xml" ); 
          connection.setAllowUserInteraction(false);
          String strData = URLEncoder.encode("test","UTF-8");
          connection.setRequestProperty ( "Content-length", "" + strData.length ());  
          connection.setReadTimeout(10000);
          connection.connect();

          //get the output stream writer and write the output to the server
          //not needed in this example
          wr = new DataOutputStream(connection.getOutputStream());
          wr.writeBytes("q="+strData);
          wr.flush();

          //read the result from the server
          rd  = new BufferedReader(new InputStreamReader(connection.getInputStream()));
          sb = new StringBuilder();

          while ((line = rd.readLine()) != null)
          {
              sb.append(line + '\n');
          }

          System.out.println(sb.toString());

      } catch (MalformedURLException e) {
          e.printStackTrace();
      } catch (ProtocolException e) {
          e.printStackTrace();
      } catch (IOException e) {
          e.printStackTrace();
      }
      finally
      {
          //close the connection, set all objects to null
          connection.disconnect();
          rd = null;
          sb = null;
          wr = null;
          connection = null;
      }
  }
} 
```

[在这里](https://stackoverflow.com/questions/5429814/how-can-i-use-html-parser-with-apache-tika-in-java-to-extract-all-html-tags)您可以找到使用 apache tika 提取文本的示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T06:53:53.057

您必须了解 Java 套接字编程以及 Web 服务器的工作原理。除此之外，您还可以使用`HttpURLConnection`类来建立与 Web 服务器的连接，并且可以下载内容。

[http://docs.oracle.com/javase/1.4.2/docs/api/java/net/HttpURLConnection.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/HttpURLConnection.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T06:56:46.017

您可以使用开源 lib [Apache Http 组件](http://hc.apache.org/)。这使工作变得轻松。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T07:36:55.700

您必须使用 URL 类来连接网络。

例如

```
 url1 = new URL(url);
        InputStream input=url1.openStream();
        BufferedInputStream bis=new BufferedInputStream(input);
        dis=new DataInputStream(bis);
       // byte[] buffer=new byte[1000];
        String data="";
        while(dis.available()!=0)
        {
            data+=dis.readLine();
        }

        jobj=new JSONObject(data); 
```

# c# - .NET 中用于 Windows 应用商店应用 API 的 Emit.OpCodes 的用途？

> ID：14973892
> 
> 赞同：15
> 
> 时间：2013-02-20T06:49:55.987
> 
> 标签：c#, windows-store-apps, reflection.emit, ilgenerator, opcodes

我正在考虑将第三方库移植到*.NET for Windows Store 应用程序*。该库通过调用[ILGenerator.Emit](http://msdn.microsoft.com/en-us/library/system.reflection.emit.ilgenerator.emit.aspx)方法重载来过度使用[System.Reflection.Emit.OpCodes 。](http://msdn.microsoft.com/en-us/library/windows/apps/system.reflection.emit.opcodes.aspx)

在*.NET for Windows Store Apps* API 中，包含`OpCode`结构和`OpCodes`类，但没有`ILGenerator`类，据我所知也没有替代品。

我显然遗漏了一些东西，但是：没有这个类，在*.NET for Windows Store 应用程序*API`ILGenerator`中包含的目的是什么？`System.Reflection.Emit.OpCode``OpCodes`

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T00:00:40.367

您可能会发现 Mono Cecil 对替换 System.Reflection 的某些功能很有用，官方没有 WinRT 的端口，但非正式地，这里有一个可用的端口[，](http://moderncomponents.com/products/MonoCecil/about.php)请注意，它基于 Mono Cecil 的 Silverlight 版本。

另请注意，您不能在应用程序包之外修改 dll 和 exe，这是 WinRT 沙箱的一项安全措施。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T07:38:26.800

好问题。虽然我不能肯定地说，但我只能想到使用 OpCode / Opcodes 的两个原因（我无法想象它会用于其他用途）：

1.  使用 ILGenerator 组装一段代码
2.  使用 f.ex 反汇编一段代码。MethodInfo.GetMethodBody 然后解析包含IL代码的字节

由于不是前者，我猜他们使用的是后者。对此的应用是静态代码分析；我自己使用它 f.ex。实现一些 Mocking 行为并弄清楚传递给它的 lambda 表达式是什么（在这种情况下不能使用表达式）。在这种情况下可能更有可能的代码分析的另一个应用程序是检查是否使用了某些不允许的类/方法/构造（我可以想象他们不希望您使用某些功能）。*

# android - 无法下载图片？

> ID：14973895
> 
> 赞同：-1
> 
> 时间：2013-02-20T06:50:05.010
> 
> 标签：android, cursor, android-download-manager

```
 Cursor appu=X.getsomething();

               if (appu.getCount() > 0)
                  {
                   if  (appu.moveToFirst())
                   {
                     do {
                             String uname = appu.getString(appu.getColumnIndex("content_id"));
                             String ax= appu.getString(appu.getColumnIndex("content"));
                             String unknown =url + ax;
                              t1.append("\n");
                               t1.append(unknown);
                               //downloadimages(unknown,uname); 
                        }while (appu.moveToNext());
                   } 
                   X.close(); 
```

这是我从数据库中获取一些结果的代码，通过这个结果，我创建了一个包含图像的 url，当我尝试运行该`downloadimages()`函数时，我想为每个光标结果下载该图像，我的应用程序总是崩溃我不知道为什么......但是当我在没有它的情况下运行代码时，它运行完美。

***下载图片方法***

```
 public void downloadimages(String url,String filename)
        {
          String ur1=url,v1=filename;
            downloadManager = (DownloadManager)getSystemService(DOWNLOAD_SERVICE);
              Uri Download_Uri = Uri.parse(ur1);
              DownloadManager.Request request = new DownloadManager.Request(Download_Uri);
              request.setAllowedNetworkTypes(DownloadManager.Request.NETWORK_WIFI | DownloadManager.Request.NETWORK_MOBILE);
              request.setAllowedOverRoaming(false);
             request.setDescription("Android Data download using DownloadManager.");
           request.setDestinationInExternalFilesDir(getApplicationContext(),Environment.DIRECTORY_DOWNLOADS,v1 + ".jpg");
              downloadManager.enqueue(request);     

        } 
```

请告诉我我做错了什么？？？

```
 Cursor appu=X.getsomething();

               if (appu.getCount() > 0)
                  {
                   if  (appu.moveToFirst())
                   {
                     do {
                             String uname = appu.getString(appu.getColumnIndex("content_id"));
                             String ax= appu.getString(appu.getColumnIndex("content"));
                             imageid.add(uname);
                             String unknown =url + ax;
                             imagepath.add(unknown);
                             // t1.append("\n");
                               //t1.append(unknown);
                        }while (appu.moveToNext());
                   } 
                   X.close();
                  }}
            this.getitdone();
            }

        public void getitdone()
        {
            int b=imagepath.size();

            for(int i=1;i<=b;i++)
            {
                 String extra=imagepath.get(i).toString();
                 String extra2=imageid.get(i).toString();
                downloadimages(extra,extra2);
            }

        } 
```

现在我正在这样做，并且运行良好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T08:40:10.193

Pramod 就是这样解决这个问题的：

```
 Cursor appu=X.getsomething();

           if (appu.getCount() > 0)
              {
               if  (appu.moveToFirst())
               {
                 do {
                         String uname = appu.getString(appu.getColumnIndex("content_id"));
                         String ax= appu.getString(appu.getColumnIndex("content"));
                         imageid.add(uname);
                         String unknown =url + ax;
                         imagepath.add(unknown);
                         // t1.append("\n");
                           //t1.append(unknown);
                    }while (appu.moveToNext());
               } 
               X.close();
              }}
        this.getitdone();
        }

    public void getitdone()
    {
        int b=imagepath.size();

        for(int i=1;i<=b;i++)
        {
             String extra=imagepath.get(i).toString();
             String extra2=imageid.get(i).toString();
            downloadimages(extra,extra2);
        }

    } 
```

# c# - 使用 LINQ 获取选择性标记值

> ID：14973900
> 
> 赞同：0
> 
> 时间：2013-02-20T06:50:30.453
> 
> 标签：c#, .net, xml, linq, linq-to-xml

我在编写 LINQ 查询以从 XML 获取某些节点时遇到问题，希望有人能提供帮助。这是 XML：

```
<EmpFieldsMap>
<Field>
  <Name insert = "false">EmpNumber</Name>  
</Field>
<Field>
  <Name insert = "true">EmpName</Name>
</Field>
<Field>
  <Name insert = "true">EmpLocation</Name>
</Field>
<Field>
  <Name update = "false">EmpAddress1</Name>
</Field>
<Field>
  <Name update = "false">EmpAddress2</Name>
</Field>
<Field>
</EmpFieldsMap> 
```

正如您所看到的，一些`Name`标签具有该属性，`insert`而另一些具有该`update`属性。

我需要获取没有该`insert`属性并具有`insert`as的标签`true`。意思是`InsertCollection`应该有`EmpName`, `EmpLocation`, `EmpAddress1`, 和`EmpAddress2`。

这段代码：

```
var titles = from nameTag in xml.Element("EmpFieldsMap").Elements("Field")
             let insert = nameTag.Attribute("insert") ?? new XAttribute("insert","true")
             where insert.Value == "true"
             select nameTag.Element("Name").Value; 
```

给出忽略子句的所有五个`Field`标记值。`Where`

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T06:53:51.220

您应该知道，它`XAttribute`可以转换`bool`为数字 (0/1) 和文本 (true/false) 属性值，并将返回正确的布尔值。

我会试试这个：

```
titles = from nameTag in xml.Element("EmpFieldsMap").Elements("Field")
         let insert = nameTag.Element("Name").Attribute("insert")
         where insert == null || (bool)insert
         select nameTag.Element("Name").Value; 
```

您正在尝试获取 Field 元素的插入属性，这一直都没有。您应该在第一行检查`nameTag.Element("Name").Attribute("insert")`或获取元素。`Name`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T06:57:57.960

像这样试试

```
titles = (from nameTag in xml.Element("EmpFieldsMap").Elements("Field"))
         .Where ( el=> (el.Attribute("insert").Value.Equals("true") )  ||
                        (el.Attribute("update").Value.Equals("false") )
         Select(f => new 
            {
                Text = nameTag.Element("Name").Value
             }); 
```

# java - 如何在数据库中记录我的 java 程序流？

> ID：14973901
> 
> 赞同：1
> 
> 时间：2013-02-20T06:50:31.310
> 
> 标签：java, events, logging, methods

我想在文本文件或数据库中记录我的 java 程序中调用了哪些方法和哪些值。

```
 For example:========================================

      this my java program

     Class A
      { 

        public void hello()

         {

           if(call.equalsto("world")
          {

           helloworld();
           }

            if(call.equalsto("boy")
          {

           helloboy();
           }

            if(call.equalsto("girl")
                        {

           hellogirl();
           }

           }

      public void helloworld()
           {

          system.out.println("hi world")
           }

        public void helloboy()
           {

          system.out.println("hi boy")
           }

                public void hellogirl()
           {

          system.out.println("hi girl")
           }

       } 
```

所以我根据输入类型调用方法。如何在文本文件或数据库中记录调用了哪个方法以及将哪个值打印为日志？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T06:55:28.097

您可以使用任何 Java 记录器，以[log4j](http://en.wikipedia.org/wiki/Log4j)为例，它有良好的文档记录且易于使用，请看一下[这个例子](http://www.tutorialspoint.com/log4j/log4j_sample_program.htm)和[这个](http://www.roseindia.net/tutorials/log4j/log4j-example.shtml)。

你可以[在这里下载。](http://logging.apache.org/log4j/1.2/download.html)

还有其他几个用于 java 的日志记录工具，请参阅[此列表中](http://www.java-logging.com/comparison/)的比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T06:55:32.807

您可以将 log4j 用于所有类型的日志记录用例。 [http://logging.apache.org/log4j/1.2/](http://logging.apache.org/log4j/1.2/)

# ios-provisioning - 推送通知和配置文件

> ID：14973903
> 
> 赞同：0
> 
> 时间：2013-02-20T06:50:36.040
> 
> 标签：ios-provisioning

首先，我创建了一个配置文件并创建了一个简单的小应用程序。

接下来我想使用推送通知，并创建了推送通知证书。问题是——我需要更新/重新创建配置文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T10:53:18.337

即使在 AppID 中配置了推送通知和其他权利，供应配置文件也包含 AppID 权利的快照，因此

**是**的，您确实需要重新生成您的配置文件。

# image - 如何使用反向传播神经网络对卫星图像进行分类

> ID：14973907
> 
> 赞同：2
> 
> 时间：2013-02-20T06:50:51.987
> 
> 标签：image, matlab, image-processing, neural-network

我需要使用反向传播神经网络将卫星图像分为 3 类。

任何人都可以帮我在matlab中执行此操作吗？

如何训练多幅图像的神经网络并进行分类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T07:01:50.623

我可以给你一个通用（非 Matlab）的答案。

将您的输入图像光栅化为长向量。

创建三个输出神经元，每类图像一个。

通过将每个输出神经元与图像相关联来进行训练。例如，根据类别，一个输出神经元应该产生“1”，而其他的则为零。

根据图像的复杂程度，首先尝试 8-12 个隐藏神经元。

# android - 为什么 setOnCheckedChangeListener 在使用 LayoutInflater 的弹出窗口中不起作用？

> ID：14973909
> 
> 赞同：2
> 
> 时间：2013-02-20T06:50:58.377
> 
> 标签：android, popup, radio-group

我在弹出窗口中有一个 RadioGroup。当我放 setoncheckedchangelistener 时，它会导致错误。这是我的代码。该错误表示它不适用于参数（新的复合按钮.OnCheckedChangeListener ..我不明白有人可以帮助我吗？

```
 private void showPopupSeat(final Activity context) 
   {       
       int popupWidth = 500;
       int popupHeight = 650;

   // Inflate the popup_layout.xml
   LinearLayout viewGroup = (LinearLayout) context.findViewById(R.id.popupseat);

   LayoutInflater layoutInflater = (LayoutInflater) context
     .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
   View layout = layoutInflater.inflate(R.layout.seat_dimension, viewGroup);

  RadioGroup rg = (RadioGroup) layout.findViewById(R.id.rg1);
  final RadioButton rb1 = (RadioButton) layout.findViewById(R.id.option1);
  final RadioButton rb2 = (RadioButton) layout.findViewById(R.id.option2);
  final RadioButton rb3 = (RadioButton) layout.findViewById(R.id.option3);

      rg.setOnCheckedChangeListener(new OnCheckedChangeListener() 
      {
          public void onCheckedChanged(RadioGroup group, int checkedId) {

          }
  });

   final PopupWindow popupseat = new PopupWindow(context);
   popupseat.setContentView(layout);
   popupseat.setWidth(popupWidth);
   popupseat.setHeight(popupHeight);
   popupseat.setFocusable(true);

   // Some offset to align the popup a bit to the right, and a bit down, relative to button's position.
   int OFFSET_X = 30;
   int OFFSET_Y = 260;

     // Clear the default translucent background
   popupseat.setBackgroundDrawable(new BitmapDrawable());

   // Displaying the popup at the specified location, + offsets.
   popupseat.showAtLocation(layout, Gravity.CENTER, 0, 0);
  } 
```

我不知道出了什么问题..请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T07:12:29.543

而是导入

`import android.widget.CompoundButton.OnCheckedChangeListener;`

进口

`import android.widget.RadioGroup.OnCheckedChangeListener;`

同样的问题在[这里](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/PemtaXI9tpg)讨论。

# excel - Excel：仅锁定和保护整个 Excel 报告中的填充单元格

> ID：14973917
> 
> 赞同：1
> 
> 时间：2013-02-20T06:51:20.173
> 
> 标签：excel, vba

有没有办法锁定excel报告中所有工作表中的所有填充单元格（仅）？如果有这方面的 excel 属性，我会很高兴。如果没有 vba 代码就可以了。我找到了 vba 代码，但我们必须提供工作表名称。就像那样，我有很多床单，我无法给出所有床单的名称。

VBA代码：

```
 Private Sub Workbook_AfterSave(ByVal Success As Boolean)
For Each cl In Sheets("Sheet1").Cells
    If cl = blank Then
        cl.Locked = False
        Else
        cl.Locked = True
    End If
Next
Sheets("Sheet1").Protect DrawingObjects:=True, Contents:=True, Scenarios:=True
Sheets("Sheet1").EnableSelection = xlUnlockedCells
End Sub 
```

请为此提出一个更好的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T07:19:06.917

`Filled Cells`我假设， Cell有`Formulas`or `Constants`or `Comments`。

请参阅此示例，您可以将其合并到您的代码中。这不会遍历每个单元格，而是利用`SpecialCells`

**未经测试**

```
Sub Sample()
    Dim Rng As Range
    Dim ws As Worksheet

    Set ws = ThisWorkbook.Sheets("Sheet1")

    With ws
        .Cells.Locked = False

        On Error Resume Next

        Set Rng = .Cells.SpecialCells(xlCellTypeConstants)
        Rng.Locked = True

        Set Rng = .Cells.SpecialCells(xlCellTypeFormulas)
        Rng.Locked = True

        Set Rng = .Cells.SpecialCells(xlCellTypeComments)
        Rng.Locked = True

        On Error GoTo 0
    End With
End Sub 
```

如果要将其应用于所有工作表，则只需遍历所有工作表

例如

```
Sub Sample()
    Dim Rng As Range
    Dim ws As Worksheet

    For Each ws In ThisWorkbook.Worksheets
        With ws
            .Cells.Locked = False

            On Error Resume Next

            Set Rng = .Cells.SpecialCells(xlCellTypeConstants)
            Rng.Locked = True

            Set Rng = .Cells.SpecialCells(xlCellTypeFormulas)
            Rng.Locked = True

            Set Rng = .Cells.SpecialCells(xlCellTypeComments)
            Rng.Locked = True

            On Error GoTo 0
        End With
    Next
End Sub 
```

**跟进（来自评论）**

```
Option Explicit

Private Sub Workbook_BeforeSave(ByVal SaveAsUI As Boolean, Cancel As Boolean)
    Dim Rng As Range
    Dim ws As Worksheet

    For Each ws In ThisWorkbook.Worksheets
        With ws

            .UnProtect

            .Cells.Locked = False

            On Error Resume Next

            Set Rng = .Cells.SpecialCells(xlCellTypeConstants)
            Rng.Locked = True

            Set Rng = .Cells.SpecialCells(xlCellTypeFormulas)
            Rng.Locked = True

            Set Rng = .Cells.SpecialCells(xlCellTypeComments)
            Rng.Locked = True

            On Error GoTo 0

           .Protect
           .EnableSelection = xlUnlockedCells
        End With
    Next
End Sub 
```

# maven - 我们可以在没有 maven 的情况下集成声纳吗？

> ID：14973918
> 
> 赞同：-2
> 
> 时间：2013-02-20T06:51:21.717
> 
> 标签：maven, integration, sonarqube

我的问题是我们可以在不使用 maven 的情况下在 .net 项目上运行声纳吗？我想避免maven的复杂性

任何帮助???

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T08:15:58.570

在提出关于 stackoverflow 的琐碎问题之前，请阅读文档：非常清楚 =>“要在 C# 解决方案上运行声纳分析，建议使用声纳运行器。”

*   文档：[http ://docs.codehaus.org/display/SONAR/C%23+Ecosystem](http://docs.codehaus.org/display/SONAR/C%23+Ecosystem)
*   示例：[https ://github.com/SonarSource/sonar-examples/tree/master/projects/languages/csharp](https://github.com/SonarSource/sonar-examples/tree/master/projects/languages/csharp)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T06:55:24.753

如果您不想使用 Ant、Maven 或 Gradle 等构建工具，则可以使用独立的[Sonar Runner](http://docs.codehaus.org/display/SONAR/Analyzing+with+Sonar+Runner)。

# javascript - 访问另一个页面顶部的 iframe 元素

> ID：14973919
> 
> 赞同：0
> 
> 时间：2013-02-20T06:51:24.603
> 
> 标签：javascript, html, iframe, dialog, onclick

*   我有两个jsp页面。1.customer.jsp 2.menuBanner.jsp
*   customer.jsp 在其内容的顶部有一个 iframe。iframe 只不过是 menuBanner.jsp 文件。
*   menubanner.jsp 只有两个内容。一个图像和一个按钮。单击按钮时，它必须打开一个对话框。对话框代码应该在 menubanner.jsp 页面中。
*   当我单击此 url host:port/example/menuBanner.jsp 中的按钮时，出现对​​话框并且对话框位于页面中心。
*   但是当我从这个 url host:port/example/customer.jsp 尝试时，对话框粘在页面顶部，也没有得到框的高度。
*   我的需要是，当我从这个 url 尝试主机：port/example/customer.jsp 时，我必须在页面中心获取对话框。我的意思是它应该在 customer.jsp 页面内容的顶部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T07:03:46.330

你的 iframe 和页面在同一个域上很好，这意味着你可以在 javascript 中的父/子之间来回调用。

我建议在您的父级 (customer.jsp) 中设置一个 javascript 函数

```
function drawBox() {
  //handle drawing the box here however that has to happen
} 
```

在 menuBanner.jsp 中更新按钮以触发“parent.drawBox()”

```
onclick="parent.drawBox()" 
```

这是此工作的示例：http: [//mathforum.org/~amir/share/stack/outer.html](http://mathforum.org/~amir/share/stack/outer.html)

# dart - DART 应用程序可以托管在 Apache 等网络服务器中吗？

> ID：14973926
> 
> 赞同：6
> 
> 时间：2013-02-20T06:52:00.843
> 
> 标签：dart

我的印象是 DART 程序不能托管在网络服务器中。有人可以请教我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T10:17:01.643

是的，它可以（尽管这不是它的主要用例）。

来自[Google Plus，2013 年 2 月 28 日](https://plus.google.com/u/0/105677827480893940108/posts/NKwfTtm28gd)：

> 最后我设法让 Dart 在 Apache CGI 中工作！我没有找到任何有关此的信息，所以我自己尝试了。这是我的做法（Apache 2.2 和 Ubuntu）...

来自[news.dartlang.org，2012 年 5 月 26 日](http://news.dartlang.org/2012/05/run-dart-in-apache-web-server.html)

> 今天，Sam McCall 宣布了 mod_dart：运行嵌入在 Apache 中的 Dart 应用程序的能力！就像 PHP、Perl、Python 和许多其他脚本语言一样，您现在可以使用 Dart 从 Apache Web 服务器内部为您的服务器端 Web 应用程序提供动力。

这两个都是“概念证明”，但它们表明 Dart 可以嵌入到 Apache 等 Web 服务器中。

现在的“但是……”

尽管已经证明 Dart 可以嵌入到 Web 服务器中，但 Dart 更像 node.js，因为服务器端 dart 二进制文件提供了一个 VM 供应用程序使用。该应用程序*可以*包括它自己的网络服务器，例如：

```
main() {
  var server = new HttpServer();

  server.addRequestHandler(
     (req) => true,   // matcher - should this function handle this request?
     (req, res) {     // handler - what should happen when this request matches?
       res.outputStream.write("${req.method}: ${req.path}"); // eg: GET: /foo
       res.outputStream.close();
     });

  server.listen('127.0.0.1', 8080); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-23T14:08:49.683

Dartlang 2.3 中的示例 Apache CGI：

将“dartaotruntime”复制到“/var/www/your-site/cgi-bin”

$ chown apache:apache dartaotruntime

创建文件 test.cgi

```
#!/bin/sh

BASE=/var/www/your-site/cgi-bin
$BASE/dartaotruntime $BASE/test.aot 
```

$ chmod 0755 test.cgi

$ chown apache:apache test.cgi

创建文件 test.dart

```
import 'dart:io';

void main(List<String> args) {
        Map<String, String> envVars = Platform.environment;
        print("Content-Type: text/html\n");

        String input = "";
        if (envVars['REQUEST_METHOD'] == 'POST') {
                var content_length = int.parse(envVars['CONTENT_LENGTH']);
                while(input.length < content_length) {
                        input += stdin.readLineSync();
                }
        }
    print("""
<html>
<form method="post" action="test.cgi">
Name: <input type="text" name="name" value="" />
Email: <input type="text" name="email" value="" />
<input type="submit" value="Submit" />
</form>
<p><strong>ENV:</strong> {$envVars}</p>
<p><strong>INPUT:</strong> {$input}</p>
</html>""");
} 
```

$ dart2aot test.dart test.aot

$ chown apache:apache test.aot

运行 cgi： https: [//www.your-site.com/cgi-bin/test.cgi](https://www.your-site.com/cgi-bin/test.cgi)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-23T18:21:57.257

您可以使用 cgi-bin apache 环境像 perl 脚本一样运行 dart。我在我的 Mac 上使用 XAMPP 对其进行了测试，**它可以工作**：

```
#!/usr/local/bin/dart
import 'dart:io';
void main() {
    Map<String, String> envVars = Platform.environment;
    print("Content-Type: text/html\n");
    String input = "";
    if (envVars['REQUEST_METHOD'] == 'POST') {
        var content_length = int.parse(envVars['CONTENT_LENGTH']);
        while(input.length < content_length) {
            input += stdin.readLineSync();
        }
    }
    print("""
        <html>
        <form method="post">
        Name: <input type="text" name="name" value="" />
        Email: <input type="text" name="email" value="" />
        <input type="submit" value="Submit" />
        </form>
        <p><strong>QUERY_STRING:</strong> ${envVars['QUERY_STRING']}</p>
        <p><strong>ENV:</strong> {$envVars}</p>
        <p><strong>INPUT:</strong> {$input}</p>
        </html>
        """
    );
} 
```

最初，error_log 中出现了一些错误，xampp 库无法正常工作。我只需从日志中指示的位置复制到xampp的lib目录即可正常工作。

> ==> /Applications/XAMPP/xamppfiles/logs/error_log <== [Sun Feb 23 14:08:12.799968 2020] [cgi:error] [pid 91112] [client 127.0.0.1:64109] AH01215: dyld: Symbol not找到：_sqlite3_bind_blob64：/Applications/XAMPP/xamppfiles/cgi-bin/dart.dart
> 
> [Sun Feb 23 14:08:12.800332 2020] [cgi:error] [pid 91112] [client 127.0.0.1:64109] AH01215：引用自：/System/Library/PrivateFrameworks/BaseBoard.framework/Versions/A/BaseBoard： /Applications/XAMPP/xamppfiles/cgi-bin/dart.dart
> 
> [Sun Feb 23 14:08:12.800432 2020] [cgi:error] [pid 91112] [client 127.0.0.1:64109] AH01215：预计在：/Applications/XAMPP/xamppfiles/lib/libsqlite3.dylib:/Applications/XAMPP /xamppfiles/cgi-bin/dart.dart
> 
> [Sun Feb 23 14:08:12.800529 2020] [cgi:error] [pid 91112] [client 127.0.0.1:64109] AH01215: 在 /System/Library/PrivateFrameworks/BaseBoard.framework/Versions/A/BaseBoard: /Applications /XAMPP/xamppfiles/cgi-bin/dart.dart
> 
> [Sun Feb 23 14:08:12.800581 2020] [cgi:error] [pid 91112] [client 127.0.0.1:64109] 标头之前的脚本输出结束：dart.dart

我使用这些命令来更新库：

```
ln -s `which dart` /usr/local/bin/dart
sudo cp /System/Library/Frameworks/ImageIO.framework//Versions/A/Resources/libJPEG.dylib  /Applications/XAMPP/xamppfiles/lib/libJPEG.dylib 
sudo cp /System/Library/Frameworks/ImageIO.framework//Versions/A/Resources/libTIFF.dylib  /Applications/XAMPP/xamppfiles/lib/
sudo cp /System/Library/Frameworks/ImageIO.framework//Versions/A/Resources/libPng.dylib  /Applications/XAMPP/xamppfiles/lib/
sudo cp /usr/lib/libsqlite3.dylib  /Applications/XAMPP/xamppfiles/lib/ 
```

使用 QueryString 和 Post 查看结果：

[![在此处输入图像描述](../Images/8504f04abe8b03776e633c6a406fb940.png)](https://i.stack.imgur.com/SzKWS.png)

不要忘记在脚本的第一行设置 dart 可执行文件的正确路径。我通常将它链接到 /usr/local/bin

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-11T04:20:39.227

mod-dart 的开发已经停滞了 2 年。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-16T10:31:06.897

只是想补充一点，这些天 - 与过时的原始答案相反 - 服务器端飞镖绝对是一回事。这样做的方法是使用[Alfred](https://github.com/rknell/alfred)之类的东西运行 dart 服务器端应用程序，然后使用反向代理传递数据，这样你就可以使用 Lets Encrypt 的 SSL。我个人使用 Nginx 遵循这样的指南： [https ://www.digitalocean.com/community/tutorials/how-to-set-up-a-node-js-application-for-production-on-ubuntu -16-04](https://www.digitalocean.com/community/tutorials/how-to-set-up-a-node-js-application-for-production-on-ubuntu-16-04)

为我的 dart 应用替换 nodejs。

# php - 根据输入字段值提交表单

> ID：14973932
> 
> 赞同：0
> 
> 时间：2013-02-20T06:52:24.983
> 
> 标签：php, html, forms

我现在有一个包含一些基本字段的表单。

```
<input name="model" type="text">
<input name="esn" type="text">
<select name="status">
     <option value="Pending">Pending</option>
     <option value="Ordered">Ordered</option>
     <option value="Received">Received</option>
 </select>
<input type="submit" value="Save Order or Add Payment" /> 
```

我允许我的用户根据需要编辑此表单，因此基本上如果模型已订购，他们将状态设置为已订购，然后将其保存到数据库中。这些工作正常，但我想添加一个条件，如果他们选择收到作为状态并点击提交按钮，它将首先检查 ESN 是否为空。我知道我可以在 esn 字段上设置“必需”，但如果我这样做，它总是要求用户输入 ESN，我只需要他们在选择接收作为状态时输入它。我们使用表格作为跟踪订单的一种方式，在我们实际收到交货之前我们不会收到 esns。

请对如何处理这种情况有任何建议吗？谢谢阅读。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T07:00:47.607

然后，您可以使用 addClass removeClass 函数。添加选择接收选项时所需的类。

```
<input name="esn" id="esn" type="text">
<select name="status" id="status">

$(document).ready(function(){
    $('#status').change(function(){
        if($(this).val() == 'Received')
            $('#esn').addClass('required');
        else
            $('#esn').removeClass('required');
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T07:03:54.137

```
 <form method='post' action='somesite.php'>
         <input name="model" type="text">
        <input name="esn" type="text">
        <select name="status">
             <option value="Pending">Pending</option>
             <option value="Ordered">Ordered</option>
             <option value="Received">Received</option>
        <input type="submit" value="Save Order or Add Payment" onclick='return validate();' />
    </form>

    <script> function validate() {
      if(document.getElementsByName('esn')[0].value == "")
{
 alert ('ESN is Empty');
return false;
}
      return true
    } </script> 
```

即使没有 jQuery，这也对你有用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T07:01:00.490

您可以在提交时调用一个函数并检查那里的值，例如

```
<input type="button" value="Save Order or Add Payment" onclick="validate(this.form)"/>

function validate(form)
{
if (document.getElementByName(status).value==="Recieved" && document.getElementByName(esn).value==="")
    alert("Please fill ESN");
else
   form.submit();

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T07:15:08.427

这可以使用 JavaScript 来实现。编写一个条件来检查用户选择是否收到然后如果 esn 为空返回 false 或显示一些警报。

```
function checkReceived()
        {
            var s = document.getElementById('status');
            var item1 = s.options[s.selectedIndex].value;
            if(item1=='Received')
            {
                alert("ens should not empty");
                return false;
            }
            else
            {
                return true;
            }
        }

<input type="button" value="Save Order or Add Payment" onclick='checkReceived()'/> 
```

在选择框中添加id并正确关闭选择框

# android - webview 需要多少时间来加载附加在 webview/网页中的图像。？

> ID：14973935
> 
> 赞同：0
> 
> 时间：2013-02-20T06:52:34.840
> 
> 标签：android, image, webview, load

我一直在寻找 android webview 加载时间很长一段时间。我想要做的是找出 webview 需要多少时间来加载 webview/webpage 中附加的图像（并且只有图像）。请帮忙。我真的很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:33:22.547

我认为您不能仅对 WebView 中加载的图像执行此操作。正如[这里](https://stackoverflow.com/questions/3149216/how-to-listen-for-a-webview-finishing-loading-a-url-in-android)所说的实施`onPageFinished()`。这至少能让你到达某个地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:29:48.037

您可以生成一个线程，该线程检查网页中的图像并检索其路径。然后遍历这些路径并获取文件大小。

现在您将拥有文件大小，并且我认为[TrafficStats](http://developer.android.com/reference/android/net/TrafficStats.html)类将提供一些确定近似连接速度的方法。在此之后，您可以计算下载图像所需的时间。

但是，我认为没有开箱即用的方式来做这种事情，而且我上面描述的方式似乎很麻烦，因为下载时间通常相对较短。

# c# - Postgresql 数据库备份

> ID：14973937
> 
> 赞同：0
> 
> 时间：2013-02-20T06:52:50.827
> 
> 标签：c#, .net, postgresql

我正在开发一个 C# 应用程序，但找不到有关使用 C# 备份数据库的任何详细信息。我想为应用程序的用户提供保存数据库备份等的能力

如果有人可以提供有关此问题的信息，我将不胜感激。我使用的系统规格是：

**操作系统：Windows XP Pro/Windows Vista 数据库：PostgreSQL .Net C# 连接：Npgsql**

我遵循了这样的方法

```
public static Boolean myfile(String content,String path)
{
    Boolean result = false;
    try
    {                
        System.Diagnostics.ProcessStartInfo info = new System.Diagnostics.ProcessStartInfo();
        info.FileName = path;
        info.Arguments = content;
        info.CreateNoWindow = true;
        info.UseShellExecute = false;
        System.Diagnostics.Process proc = new System.Diagnostics.Process();
        proc.StartInfo = info;
        proc.Start();
        proc.WaitForExit();                
        result = true;

    }
    catch (Exception ex)
    {
       Console.writeline(ex.Message);
    }
    return result;
} 
```

我也将参数传递为

```
content:pg_dump --inserts -h x.x.x.x -U xxxx -n public  -w  xxxx > D:\sql\mysample.sql

path:D:\Program Files\PostgreSQL\9.0\bin\PostgreSQL\9.0\bin\ 
```

我收到异常响应

**访问被拒绝**

更新1：

我也使用这样的代码来获得许可

```
//var permissionSet = new PermissionSet(PermissionState.None);
//var writePermission = new FileIOPermission(FileIOPermissionAccess.AllAccess, dirName);
//permissionSet.AddPermission(writePermission); 
```

它对我没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T06:50:10.127

拒绝访问表明存在文件权限问题。也许您的用户没有运行 pg_dump 的权限，或者写入文件输出时出现问题。

要做的第一件事是尝试运行它并丢弃输出并查看是否得到相同的错误。如果没有，则需要设置文件权限（右键目录，安全，设置权限）。如果你这样做了，你在运行 pg_dump 时会遇到问题（尝试对 pg_dump 文件进行相同的操作）。

# webdav - ithit ajaxbrowser 未打开 webdav 文件夹，但响应数据正确

> ID：14973939
> 
> 赞同：0
> 
> 时间：2013-02-20T06:52:59.843
> 
> 标签：webdav, ithit-ajax-file-browser

请求（谷歌浏览器控制台）：

```
Request URL:https://<name>:5553/myproxy.cgi?5443/

Request Method:PROPFIND
Status Code:207 Multi-Status
Request Headersview source
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Authorization:Basic dmJveDp2Ym94
Connection:keep-alive
Content-Length:241
Content-Type:text/xml; charset="UTF-8"
Cookie:settingsCookie=5-9-5-0; Auth=Basic%20dmJveDp2Ym94; testCookie=test
Depth:0
Host:<name>:5553
Origin:https://<name>:5553
Referer:https://<name>:5553/Browser/index.html
User-Agent:Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.70 Safari/537.17
Query String Parametersview sourceview URL encoded
5443/:
Request Payload
<?xml version="1.0"?><propfind xmlns="DAV:"><prop><resourcetype/><displayname/><creationdate/><getlastmodified/><getcontentlength/><getcontenttype/><supportedlock/><lockdiscovery/><quota-available-bytes/><quota-used-bytes/></prop></propfind>
Response Headersview source
Cache-Control:max-age=0
Connection:Keep-Alive, Keep-Alive
Content-disposition:attachment; filename=
Content-Encoding:gzip
Content-Length:449
Content-Type:text/xml; charset="utf-8"
Date:Wed, 20 Feb 2013 05:37:37 GMT
Expires:Wed, 20 Feb 2013 05:37:37 GMT
Keep-Alive:timeout=15, max=59
Server:Apache/2.2.21 (Unix) mod_ssl/2.2.21 OpenSSL/1.0.1c DAV/2
Vary:Accept-Encoding 
```

响应数据：

```
<?xml version="1.0" encoding="utf-8"?>
<D:multistatus xmlns:D="DAV:" xmlns:ns0="DAV:">
<D:response xmlns:lp1="DAV:" xmlns:lp2="http://apache.org/dav/props/" xmlns:g0="DAV:">
<D:href>/</D:href>
<D:propstat>
<D:prop>
<lp1:resourcetype><D:collection/></lp1:resourcetype>
<lp1:creationdate>2013-02-18T12:59:45Z</lp1:creationdate>
<lp1:getlastmodified>Mon, 18 Feb 2013 12:59:45 GMT</lp1:getlastmodified>
<D:supportedlock>
<D:lockentry>
<D:lockscope><D:exclusive/></D:lockscope>
<D:locktype><D:write/></D:locktype>
</D:lockentry>
<D:lockentry>
<D:lockscope><D:shared/></D:lockscope>
<D:locktype><D:write/></D:locktype>
</D:lockentry>
</D:supportedlock>
<D:lockdiscovery/>
</D:prop>
<D:status>HTTP/1.1 200 OK</D:status>
</D:propstat>
<D:propstat>
<D:prop>
<g0:displayname/>
<g0:quota-available-bytes/>
<g0:quota-used-bytes/>
</D:prop>
<D:status>HTTP/1.1 404 Not Found</D:status>
</D:propstat>
</D:response>
</D:multistatus> 
```

状态和数据是正确的，但它会抛出错误 NotFoundLocation。我想这个问题可能在比较发送/接收“文件夹”不相同时。请发表您的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:02:38.517

也许问题出在 href 元素中。你的是

```
<D:href>/</D:href> 
```

这是我在另一台服务器上得到的结果：

```
PROPFIND http://ajaxbrowser.com/User3b0f54c/ HTTP/1.1
Host: ajaxbrowser.com
Depth: 0 
```

回复：

```
HTTP/1.1 207 Multi-Status
Content-Length: 957
Content-Type: application/xml; charset=utf-8
Server: Microsoft-HTTPAPI/1.0

<d:multistatus xmlns:d="DAV:">
  <d:response>
    <d:href>http://ajaxbrowser.com/User3b0f54c/</d:href>
    <d:propstat><d:status>HTTP/1.1 200 OK</d:status><d:prop><d:resourcetype><d:collection /></d:resourcetype><d:displayname>User3b0f54c</d:displayname><d:creationdate>2013-03-12T23:16:11Z</d:creationdate><d:getlastmodified>Tue, 12 Mar 2013 23:17:59 GMT</d:getlastmodified><d:supportedlock><d:lockentry><d:lockscope><d:exclusive /></d:lockscope><d:locktype><d:write /></d:locktype></d:lockentry><d:lockentry><d:lockscope><d:shared /></d:lockscope><d:locktype><d:write /></d:locktype></d:lockentry></d:supportedlock><d:lockdiscovery /></d:prop></d:propstat><d:propstat><d:status>HTTP/1.1 404 Not Found</d:status><d:prop><d:getcontentlength /><d:getcontenttype /><d:quota-available-bytes /><d:quota-used-bytes /></d:prop><d:responsedescription>Property was not found</d:responsedescription></d:propstat>
  </d:response>
</d:multistatus> 
```

你使用 mod_dav 吗？您可以发布带有标题的完整回复吗？

# sockets - TCP 环回连接与 Unix 域套接字性能

> ID：14973942
> 
> 赞同：137
> 
> 时间：2013-02-20T06:53:14.683
> 
> 标签：sockets, unix, tcp, loopback, unix-socket

处理基于 Android 和 iOS 的应用程序，需要与在同一设备中运行的服务器进行通信。目前使用 TCP 环回连接与 App 和服务器通信（App 编写在用户层，服务器使用 Android NDK 用 C++ 编写）

我想知道用 Unix 域套接字替换内部通信是否会提高性能？

或者一般来说，是否有任何证据/理论证明 Unix 域套接字会比 TCP 环回连接提供更好的性能？

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2013-04-11T14:59:13.857

是的，unix 域套接字的本地进程间通信应该比环回 localhost 连接的通信更快，因为您的 TCP 开销更少，请参见[此处](http://lists.freebsd.org/pipermail/freebsd-performance/2005-February/001143.html)。

* * *

## 回答 #2

> 赞同：104
> 
> 时间：2015-04-03T16:55:29.253

此基准：[https](https://github.com/rigtorp/ipc-bench) ://github.com/rigtorp/ipc-bench 为 TCP 套接字、Unix 域套接字 (UDS) 和 PIPE 提供延迟和吞吐量测试。

```
Here you have the results on a single CPU 3.3GHz Linux machine :

TCP average latency: 6 us

UDS average latency: 2 us

PIPE average latency: 2 us

TCP average throughput: 0.253702 million msg/s

UDS average throughput: 1.733874 million msg/s

PIPE average throughput: 1.682796 million msg/s 
```

**66% 的延迟**减少和近7 倍的吞吐量增加了几乎**7 倍的吞吐量**解释了为什么大多数性能关键软件都有自己的 IPC 自定义协议。

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2014-12-04T19:03:56.287

Redis[基准测试](http://redis.io/topics/benchmarks)显示 unix 域套接字可以比 TCP 环回快得多。

> 当服务器和客户端基准程序在同一个机器上运行时，可以使用 TCP/IP 环回和 unix 域套接字。根据平台的不同，unix 域套接字可以实现比 TCP/IP 环回（例如在 Linux 上）多 50% 的吞吐量。redis-benchmark 的默认行为是使用 TCP/IP 环回。

但是，这种差异仅在吞吐量较高时才有意义。

[![每个数据大小的吞吐量](../Images/3e67abaf03f5bf6ef3aa0735ed2fb8d8.png)](https://i.stack.imgur.com/QFvq3.png)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-06-09T10:45:26.350

当两个对等点都在同一主机上时，Unix 域套接字的速度通常是 TCP 套接字的两倍。Unix 域协议不是一个实际的协议套件，而是一种在单个主机上执行客户端/服务器通信的方式，使用相同的 API 用于不同主机上的客户端和服务器。Unix 域协议是进程间通信 (IPC) 方法的替代方案。

# c# - 身份验证的“cookie”层可以称为什么？

> ID：14973946
> 
> 赞同：0
> 
> 时间：2013-02-20T06:53:17.130
> 
> 标签：c#, authentication, cookies, interface, naming

所以，我有一个 MVC 框架，包括一个身份验证部分。它经历了各种有趣的 API 突破性更改，因为以前它是一个巨大的静态类。我终于对它“真正”需要多么抽象有了一个突破。

身份验证似乎分为三个部分

1.  用于存储和读取用户名、密码哈希等的数据库接口
2.  处理正确散列、创建登录令牌和验证它们的“业务”逻辑
3.  处理 cookie 的“暴露”层或存储登录令牌的“用户端持久性”层。这通常是 cookie，但也可能是 HTTP 基本身份验证

无论如何，为了让一切都很棒并且独立地对这 3 层进行单元测试，我正在为这三个部分制作接口：

1.  IUserStore 和 ISessionStore
2.  IAuth机制
3.  ？？？

我需要一个接口名称的帮助，该名称对用户端持久层完全有意义。谁能帮我给它起个好听的名字？此外，实施者姓名（即，cookie 层类和 HTTP 基本身份验证类）的加分项

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T07:30:30.243

名称应直接来自描述。在您的情况下，您已经描述了所有内容，所以剩下的就是挑选最重要的部分。从我的角度来看，关于第三部分最重要的事情是它保留了身份验证信息，无论是 cookie 还是登录令牌或其他任何东西。那么为什么不叫它`IAuthPersister`甚至`IAuthenticationPersister`呢？在这种情况下，实现者的名称将是`CookieAuthPersister`、`HttpBasicAuthPersister`等，表示层和下面实现的方法。

# asp.net - WCF 防止调试器在 DataServiceException 处中断

> ID：14973950
> 
> 赞同：0
> 
> 时间：2013-02-20T06:53:41.700
> 
> 标签：asp.net, wcf, iis, visual-studio-debugging

我抛出未处理的 DataServiceExceptions（它们由 WCF 自动处理）以返回状态代码以进行未经授权的访问等。如何防止 Visual Studio 中断这些未处理的异常？

```
if (!System.Web.Security.Roles.IsUserInRole("Users"))
        {
            throw new DataServiceException((int)HttpStatusCode.Unauthorized, "You do not have access to this resource.");
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T08:35:18.237

你可以添加一个 DebuggerNonUserCode 属性

或者您可以告诉 Visual Studio 忽略异常类型，如：[如何告诉调试器忽略对抛出异常的中断？](https://stackoverflow.com/questions/4499473/how-to-tell-the-debugger-to-ignore-breaking-on-thrown-exceptions)

# c++ - 在我的代码中修改两个二进制数的加法

> ID：14973952
> 
> 赞同：2
> 
> 时间：2013-02-20T06:53:52.293
> 
> 标签：c++

我正在尝试在我的程序中添加二进制数，但我对我所拥有的不满意，我的代码添加了这样的二进制数

```
1010
+1111 
```

但我想更改它，以便当我输入像 100010001 这样的二进制数时，它应该像这样添加 1010 +1111 我的代码会自动添加，因为两个数组和数组中的值我想从键盘输入二进制数它应该像上面的例子一样这是我的代码

```
int main()
{
    int a[4];
    int b[4];
    int carry=0;
    int result[5];

    a[0]=1;
    a[1]=0;
    a[2]=0;
    a[3]=1;

    b[0]=1;
    b[1]=1;
    b[2]=1;
    b[3]=1;

    for(int i=0; i<4; i++)
    {

        if(a[i]+b[i]+carry==3)
        {
        result[i]=1;
        carry=1;
        }
        if(a[i]+b[i]+carry==2)
        {
        result[i]=0;
        carry=1;
        }
        if(a[i]+b[i]+carry==1)
        {
        result[i]=1;
        carry=0;
        }
        if(a[i]+b[i]+carry==0)
        {
        result[i]=0;
        carry=0;
        }

    }
    result[4]=carry;
    for(int j=4; j>=0; j--)
    {
        cout<<result[j];

    }
    cout<<endl;

        return 0;
} 
```

我是新手这么多如果有错误请纠正我并给我你最好的建议提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T07:06:51.117

我看到的第一件事是你没有从最右边开始。二进制数的加法与实际的以 10 为底的数字相同，因为您从右侧开始并向左侧工作，无论您剩下多少位，都将其附加到总和的开头。

所以你的：

9 + 15

1001 + 1111

i = 3 --> [][][][0] -->进位 = 1

i = 2 --->[][][0][0] --->进位 = 1

i = 1 --->[][0][0][0] --->进位 = 1

i = 0 --->[1][0][0][0] --->进位 = 1

哦，不，我们用完了空间

所以将进位附加到总和的前面：

[1][1][0][0][0] ---> 24

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T07:45:49.873

Well, it is a pretty trivial problem.

How to add two binary numbers in c++. what is the logic of it.

For adding two binary numbers, a and b. You can use the following equations to do so.

sum = a xor b

carry = ab

This is the equation for a Half Adder.

Now to implement this, you may need to understand how a Full Adder works.

sum = a xor b xor c

carry = ab+bc+ca

Since you store your binary numbers in int array, you might want to understand bitwise operation. You can use ^ for XOR,| operator for OR, & operator for AND.

Here is a sample code to calculate the sum.

for(i = 0; i < 8 ; i++) {

sum[i] = ((a[i] ^ b[i]) ^ c); // c is carry

c = ((a[i] & b[i]) | (a[i] &c)) | (b[i] & c);

}

# android - android中的右滑动二级菜单

> ID：14973954
> 
> 赞同：1
> 
> 时间：2013-02-20T06:53:58.810
> 
> 标签：android, slider, actionbarsherlock

我从[这里](https://github.com/jfeinstein10/)得到了滑动菜单库，我不知道这里有什么问题，在这个右侧的幻灯片菜单中出现但它是空白的。这是代码

```
// customize the SlidingMenu
        SlidingMenu sm = getSlidingMenu();
        sm.setMode(SlidingMenu.LEFT_RIGHT);
        sm.setShadowWidthRes(R.dimen.shadow_width);
        sm.setShadowDrawable(R.drawable.shadow);
        sm.setBehindOffsetRes(R.dimen.slidingmenu_offset);
        sm.setFadeDegree(0.35f);
        //sm.setTouchModeAbove(SlidingMenu.LEFT_RIGHT);

        getSupportActionBar().setDisplayShowHomeEnabled(true);
        getSupportActionBar().setDisplayHomeAsUpEnabled(true); 
```

这是我调用secondarymenu的方式

```
 @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case android.R.id.home:
            showSecondaryMenu();

            return true;
        }
        return super.onOptionsItemSelected(item);
    }
} 
```

这是我实例化片段的方式。

```
setContentView(R.layout.activity_home_frame);
        getSupportFragmentManager()
        .beginTransaction()
        .replace(R.id.home_screen, new MapFragment())
        .commit();

        getSlidingMenu().setSecondaryMenu(R.layout.activity_home_frame);
        getSupportFragmentManager()
        .beginTransaction()
        .replace(R.id.home_screen, new MapFragment())
        .commit();

        // set the Behind View
        setBehindContentView(R.layout.activity_settings_frame);
        getSupportFragmentManager()
        .beginTransaction()
        .replace(R.id.settings_screen, new SettingsFragment())
        .commit(); 
```

我的地图片段

```
public class MapFragment extends SherlockFragment{

    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.activity_map, null);
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);

    }

} 
```

设置片段

```
public class SettingsFragment extends SherlockFragment{

    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.activity_settings, null);
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);

    }

} 
```

设置布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:text="Settings view."
        ></TextView>
</LinearLayout> 
```

地图布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Your map "
        ></TextView>
</LinearLayout> 
```

请告诉我为什么我的右侧菜单空白？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T07:33:15.640

它成功了，问题是。而不是这个

```
 getSlidingMenu().setSecondaryMenu(R.layout.activity_home_frame); 
```

我需要打电话

```
getSlidingMenu().setSecondaryMenu(getLayoutInflater().inflate(R.layout.activity_map, null)); 
```

# java - Android Preference 不返回所有数组集

> ID：14973955
> 
> 赞同：-1
> 
> 时间：2013-02-20T06:54:14.180
> 
> 标签：java, foreach

```
static String[] hosts = {"www.google.com", "www.nba.com"};
//static String[] hosts = {"www.google.com"};
static StringBuilder sb;

for(String host : hosts){
try {
       inetAddress = InetAddress.getAllByName(host);
       sb = new StringBuilder();                             
            for (int i = 0; i < inetAddress.length; i++) {
                sb.append(inetAddress[i]).append(",");
            }
     }

       catch (UnknownHostException e) {
       e.printStackTrace();
     } 
```

在这里它将返回 Google 和 NBA 的所有 IP 地址的数组。

使用 String Builder 优先设置它。

```
 prefs.sethostIPaddress(context, sb.toString());

} 
```

从 Preference 中检索：

```
 String getipprefs = (prefs.gethostIPaddress(context));
        arrayA = getipprefs.split(",");
            for (int a = 0; a < arrayA.length; a++) {
                 Log.d("IPADDR", "Old IP : " + arrayA[a]);                      
            } 
```

当我只使用一个主机名时，这种方法非常有效，但如果我使用多个主机名，请说“Google & NBA”。它只会从偏好中返回我的 NBA，它不会附加 Google IP 地址。我猜在 FOR 循环或 APPENDING 中有一些问题。有什么猜测吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T07:02:29.090

将此行移出 for 循环。对于每个实例，您正在创建一个新`StringBuilder`对象，在循环完成后将只保存最后一个值。

```
 sb = new StringBuilder(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T06:59:29.700

你的代码：

```
for(String host : hosts){
try {
       inetAddress = InetAddress.getAllByName(host);
       sb = new StringBuilder();                             // for every host
            for (int i = 0; i < inetAddress.length; i++) {
                sb.append(inetAddress[i]).append(",");
            }
     } 
```

`StringBuilder`在我添加的行中，您正在为每个主机创建一个新的注释。这就是为什么它只会包含在你的外部 for 循环的最后一次迭代中添加到它的内容。（在您的情况下是 nba.com）。当您调用`prefs.sethostIPaddress(context, sb.toString());`then`sb`时将仅包含最后一个`host`from `hosts`。

要修复它，您必须将此行移到我在此答案中发布的第一行的前面。

# javascript - W3C 验证 - 脚本标签 - Javascript 还是其他？

> ID：14973958
> 
> 赞同：-1
> 
> 时间：2013-02-20T06:54:29.347
> 
> 标签：javascript, jquery, w3c-validation

我在 w3c 验证中遇到一堆错误，因为脚本标记缺少 type 属性。我还剩 1 个，我不确定该怎么处理

我的代码无效：

```
<script>
    !window.jQuery && document.write('<script src="/jquery-1.4.3.min.js"><\/script>');
</script> 
```

我已将其更改为：

```
<script type="text/javascript">
    !window.jQuery && document.write('<script src="/jquery-1.4.3.min.js"><\/script>');
</script> 
```

我读过jquery是javascript中的一个框架，所以我假设上面是正确的，但是jquery是否有不同的“类型”？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T07:00:27.457

如果您使用 doctype HTML4/XHTML，则 type 属性是必需的。

但如果您使用的是 doctype HTML5，则不需要。

更多：[W3C 脚本](http://www.w3.org/TR/REC-html40/interact/scripts.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T06:55:44.580

不，你是对的。jQuery 绝对是 Javascript。

# asp.net - 以编程方式将数据添加到 umbraco 节点

> ID：14973962
> 
> 赞同：1
> 
> 时间：2013-02-20T06:54:55.350
> 
> 标签：asp.net, umbraco

我需要为我的 umbraco 节点添加一些价值。我曾尝试过这样的事情

```
Node node = Node.GetCurrent();
node.GetProperty("pass_word").Value = password.ToString() 
```

但是它会引发错误，它是只读的。任何人都可以提出任何建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T08:48:36.140

Umbraco 将节点的属性缓存在一个名为 umbraco.config 的 xml 文件中。当您使用 NodeFactory 访问节点的属性时，它是从缓存中提取的，因此是只读的。

要实际编辑在数据库中找到的数据，然后将其发布到缓存中，您需要使用 Document 类。有关更多详细信息，请参阅[节点和文档之间的差异](http://our.umbraco.org/wiki/reference/api-cheatsheet/difference-between-node-and-document)。

这是一个例子：

```
int id = Node.GetCurrent().Id;
Document node = new Document(id);
node.getProperty("pass_word").Value = password.ToString();
node.Publish(new User(0));
umbraco.library.UpdateDocumentCache(id); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T08:55:18.530

在 Umbraco 中，节点和文档之间存在差异。节点通过 nodeFactory 从 XML 文件 umbraco.config 中读取，用于以最快的方式从您的内容中检索和显示数据。

修改节点是不可能的，也没有意义，因为 Umbraco.config 文件中的 XML 是在每次发布后从数据库中的文档数据生成的。

如果您需要修改数据库中的数据，则必须使用文档类型。有关节点和文档之间的区别，请参阅[这篇文章](http://our.umbraco.org/wiki/reference/api-cheatsheet/difference-between-node-and-document)

# python - 如果 Python 中的约定是大写类，那么为什么 list() 不大写？不是一堂课吗？

> ID：14973963
> 
> 赞同：29
> 
> 时间：2013-02-20T06:55:00.997
> 
> 标签：python, coding-style, naming-conventions

通常当我看到类定义时`class Foo:`，我总是看到它们以大写字母开头。

但是，列表`[]`、字典`{}`或其他一些内置类型不也是一个类吗？就此而言，输入 Python 的 IDLE 的所有内容都是自动以紫色进行颜色编码的关键字（使用 Window 的二进制分布），它本身就是一个类，对吗？

如`spam = list()`

`spam`现在是一个实例`list()`

所以我的问题是，为什么 Python 允许我们首先做一些事情，比如`list = list()`当没有人这样做的时候。而且，为什么不是`list = List()`

该语言的开发人员是否决定不使用任何类型的约定，而大多数 Python 程序员确实如此命名他们的类？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-20T06:59:53.790

是的，大写开头的类是惯例，如[PEP 8](http://www.python.org/dev/peps/pep-0008/#class-names)中所述。

您是正确的，许多内置类型不遵循此约定。这些是 Python 早期阶段的遗留物，当时用户定义的类和内置类型之间存在更大的差异。然而，用 C 语言编写的内置或扩展类型似乎仍然更可能使用小写名称（例如，`numpy.array`、 not `numpy.Array`）。

尽管如此，约定是在 Python 代码中为您自己的类使用大写首字母。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T06:58:52.600

[PEP8](http://www.python.org/dev/peps/pep-0008/)是代码风格的好去处。

为了解决您关于为什么`list = list()`有效的问题，`list`它只是全局命名空间中的一个名称，并且可以像任何其他变量一样被覆盖。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T06:56:50.093

我认为唯一*真正*知道您问题的全部答案的人是[BDFL](http://en.wikipedia.org/wiki/Benevolent_Dictator_for_Life)。在 C 中实现的类型之外的约定肯定是使用大写字母（详见 PEP8）。然而，有趣的是，并非*所有*C 级类型都遵循约定（即`Py_True`, `Py_False`）。是的，它们是 Python 级别的常量，但它们都是`PyTypeObject`s。我很想知道这是否是唯一的区别，因此也是惯例的区别。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-10-15T09:12:21.913

最终都是设计决策。

> > [...] 为什么 python 允许我们首先做类似的事情`list = list()`

[https://www.python.org/dev/peps/pep-0020/](https://www.python.org/dev/peps/pep-0020/)说（也试试`>>> import this`）

*   简单胜于复杂。
*   特殊情况不足以打破规则。

这将是一个特例。

> > [...] 为什么不是`list = List()`

[https://www.python.org/dev/peps/pep-0008/#class-names](https://www.python.org/dev/peps/pep-0008/#class-names)说：

> ### 类名
> 
> 类名通常应使用 CapWords 约定。
> 
> 在接口被记录并主要用作可调用的情况下，可以使用函数的命名约定。
> 
> ***请注意，内置名称有一个单独的约定：大多数内置名称是单个单词（或两个单词一起运行），CapWords 约定仅用于异常名称和内置常量。***[强调我的]

所有其他类都应该使用 CapWorlds 约定。由于`list`, `object`, 等是内置名称，它们遵循这个*单独的约定*。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T06:58:34.930

根据[PEP 8](http://www.python.org/dev/peps/pep-0008/#class-names)，为 Python 开发人员提供了一套很好的指南：

> 几乎无一例外，类名都使用 CapWords 约定。内部使用的类另外还有一个前导下划线。

PEP 8 针对主要 Python 发行版中标准库的 Python 开发，但它们是值得遵循的明智指南。

# android - Android：创建代理服务器

> ID：14973980
> 
> 赞同：1
> 
> 时间：2013-02-20T06:56:02.113
> 
> 标签：android

我如何创建代理服务器来监视我的 android 中的用户..

我尝试使用此代码创建代理服务器..但是没有被创建..我做错了什么请说明..

```
public void setProxy(DefaultHttpClient httpclient) {  
    final String PROXY_IP = "127.0.0.1";  
     final int PROXY_PORT = 8080;  

     httpclient.getCredentialsProvider().setCredentials(  
             new AuthScope(PROXY_IP, PROXY_PORT),  
             new UsernamePasswordCredentials(  
                     "root", "password"));  

    HttpHost proxy = new HttpHost(PROXY_IP, PROXY_PORT);  

    httpclient.getParams().setParameter(ConnRoutePNames.DEFAULT_PROXY,  
            proxy);  

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T07:16:59.420

通过这种方式，您正在为应用程序的 HttpClient 配置代理。最新版本的 Android 根本不支持系统范围的代理。检查此以获取更多详细信息：[如何在 ICS 中设置系统范围的代理](https://stackoverflow.com/questions/10559370/how-to-set-system-wide-proxy-in-ics)

# c# - c#流数据读取不正确

> ID：14973981
> 
> 赞同：0
> 
> 时间：2013-02-20T06:56:08.243
> 
> 标签：c#, stream

*已解决* 的问题是，当我告诉它读取时，我假设它立即获取了所有数据，因此它从我的 READ SCREENSHOT 方法中逃逸，并将数据包转储到我的数据包解析器中，然后继续向我的控制台发送垃圾邮件 >。 <

谢谢乔恩。

我还有另一个新问题，这次我无法弄清楚我的数据流有什么问题，我目前正在尝试将捕获的图像文件流式传输到中央网络服务器，我设置了客户端>服务器，说得很好，一整天来回传递数据，但是当我尝试调用我的屏幕截图功能并发送它时，这就是我遇到问题的地方。

我用于此的当前代码是：

*注意* DataHandler 只是一个用于发送和接收数据的包装器，AddVar 是一个重载方法，它接受任何变量并通过流发送它（new DataHandler(stream)）

DataHandler 链接到 TCP Stream

ReadInt 和 ReadLong 等是相反的辅助函数，有助于使代码更易于以后维护。

此时，服务器每秒向客户端发送一个 ping，客户端设置为响应该 ping，如果它不忙于响应另一个数据包（传入的数据包在单个线程上运行）

服务器遵循相同的规则，每个客户端

将数据写入 SI.TakeScreenShotAndStream 的流中，此方法获取客户端计算机的屏幕截图并将数据流式传输到任何传递的流，在本例中为 memorystream。

*尾注*

（客户端）

```
try
        {
            DataHandler.AddVariable((byte)50);
            memoryStream = new MemoryStream();
            SI.TakeScreenShotAndStream(memoryStream, quality);
            DataHandler.AddVariable(memoryStream.Length);
            memoryStream.Position = 0;
            memoryStream.CopyTo(clientStream);
            clientStream.Flush();
        }
        catch (Exception e)
        {
            Console.WriteLine(e.Message);
            Disconnect();
        } 
```

和服务器端

```
if (!Directory.Exists(LoadedSettings.Directory + name)) Directory.CreateDirectory(LoadedSettings.Directory + name);
            fileStream = File.Create(FullPath);
            long length = DataHandler.ReadLong();
            byte[] data = new byte[length];
            clientStream.Read(data, 0, (int)length);
            fileStream.Write(data, 0, (int)length);
            fileStream.Flush();
            fileStream.Close(); 
```

“截屏并保存”功能有效，我可以将其流式传输到 FileStream 并将其直接保存到文件中，我的问题似乎是如果我真的很远，我不知道如何使用 MemoryStream 类标记如何做到这一点，一个很好的内存流教程会很有帮助。

有一次，我试图将 MemoryStream 转换为字节数组，但这也不起作用。

另请注意，这不仅仅是搞砸了，这两者都封装在 try/catch 语句和无效数据包（除 1、2 和 50 atm 之外的任何数据包）中，当异常和无效数据包编号都记录到控制台时我运行这段代码，它向控制台喷出如此多的声音，以至于它不断发出哔哔声，直到我将其关闭（我的程序中的任何地方都没有 console.beep 代码）

任何援助将不胜感激 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T07:37:35.720

这是您在此处读取数据的方式：

```
clientStream.Read(data, 0, (int)length); 
```

相反，您应该使用返回的值`Read`：

```
// TODO: If you really want to handle more then 4GB per file, you'll need
// to change this...
int length = (int) DataHandler.ReadLong();
byte[] buffer = new byte[16 * 1024]; // Read up to 16K at a time

while (length > 0)
{
    int bytesRead = clientStream.Read(buffer, 0,
                                      Math.Min(length, buffer.Length));
    if (bytesRead <= 0)
    {
        // Throw an appropriate exception: the data is truncated
    }
    fileStream.Write(buffer, 0, bytesRead);
    length -= bytesRead;
} 
```

# java - 动态向数组添加值

> ID：14973983
> 
> 赞同：-2
> 
> 时间：2013-02-20T06:56:23.557
> 
> 标签：java, android, arrays

我想在运行时将数据添加到数组中，但是我得到了一个超出范围异常的索引。

```
String addmembers[] = new String[0];

for (int i=0; i<contactClassList.size(); i++) {
    MyClass values = contactClassList.get(i);
    String name = values.getUsernameEmail();
    Boolean isChecked = values.isChecked;
    if (isChecked) {
        addmembers[addmembers.length] = name;
    }
    System.out.println("Value of Array===" + addmembers.length);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T06:57:23.707

您不能添加到数组中。一旦你创建了它，它的大小是固定的。你最好使用`ArrayList`, 并调用`add`.

```
List<String> newMembers = new ArrayList<String>();
for (MyClass entry : contactClassList) {
    if (entry.isChecked) {
        newMembers.add(entry.getUsernameEmail());
    }
}
System.out.println(newMember.size()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T06:59:11.870

您的数组`addmembers`的大小 [0] 一旦创建就无法更改，为什么不使用`List`它，因为它的动态大小

```
List<String> addmembers = new ArrayList<String>();

  for(int i=0;i<contactClassList.size();i++){
    MyClass values = contactClassList.get(i);

    String name = values.getUsernameEmail();
    Boolean isChecked = values.isChecked;

    if(isChecked){
      addmembers.add(name);
    }

  System.out.println("Value of Array==="+addmembers.length);

} 
```

这样的事情会解决你的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T06:59:48.150

ArrayList 是解决此类问题的正确数据结构。如果您一定要使用数组并且您需要什么作为可增长的，那么使用此类解决方案[在 Java 中增长数组的最有效的内存方法是什么？](https://stackoverflow.com/questions/1427200/most-memory-efficient-way-to-grow-an-array-in-java)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T07:03:56.383

不要将数组用于更多的数据量。如果你使用 ArrayList 会更好。我想纠正你的错误并给你这个答案。您已将字符串数组大小设置为 0 并尝试添加不可能的元素。因此，在上面的代码中声明数组大小为您所需要的`contactClassList.size()`

```
 String addmembers[] = new String[contactClassList.size()];

                for(int i=0;i<contactClassList.size();i++){

                    MyClass values = contactClassList.get(i);

                    String name = values.getUsernameEmail();
                    Boolean isChecked = values.isChecked;

                    if(isChecked){

                        addmembers[addmembers.length]=name;
                    }

                    System.out.println("Value of Array==="+addmembers.length); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-20T07:05:43.880

根据您的代码，它肯定会给您此错误，因为您正在初始化大小为 0 的数组。

取而代之的是，您可以使用`ArrayList`或者`List<T>`然后您将能够为其动态添加值。
所以用这两个代替数组是击球手。

# java - Flex 和 Java GWT 集成

> ID：14973986
> 
> 赞同：2
> 
> 时间：2013-02-20T06:56:36.127
> 
> 标签：java, actionscript-3, apache-flex, gwt, blazeds

如何将`Flex`应用程序连接到`JAVA GWT`. 一些java端数据，如字符串，图像发送到flex编辑器中编辑`SWF`，当用户在SWF上完成编辑时，编辑后的数据返回给java应用程序。

我怎样才能做到这一点？

我们如何创建一个`SWF`能够将数据发送到 java 应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T06:58:28.713

使用许多工具之一将您的数据层公开为[RESTful 服务](http://en.wikipedia.org/wiki/Representational_state_transfer)，例如 JAX-RS 服务器[Jersey](http://jersey.java.net)或许多工具包中的其他工具（我假设您的数据服务是用 Java 编写的，并引用了 GWS）。

将 GWT 和 Flex 连接到 RESTful 服务，例如使用[如何在 Actionscript 3 中访问 REST 服务？](https://stackoverflow.com/questions/8180515/how-to-access-rest-service-in-actionscript-3)或对于 GWT，请参阅[如何从 GWT 调用 RESTFUL 服务？](https://stackoverflow.com/questions/4030969/how-to-call-restful-services-from-gwt)

然后 GWT 和 Flex 都以[MVP 模式](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93presenter)在同一个数据层上运行，其中 GWT/Flex 是 VP，RESTful 服务是 M。

我参与了几个项目，这些项目取得了巨大的成功。

以下问题也值得回顾：[我是否应该为 GWT 应用程序构建 REST 后端](https://stackoverflow.com/questions/4906369/should-i-build-a-rest-backend-for-gwt-application)

# mysql - MySQL查询帮助...检查真假？

> ID：14973990
> 
> 赞同：0
> 
> 时间：2013-02-20T06:56:51.223
> 
> 标签：mysql, sql, boolean

好的，我有一张客户表

![在屏幕截图中，您可以看到列](../Images/81f211dd26865cade0ac537186251316.png)

我想要做的是如果客户的性别是男性，我想将他的名字与先生连接。否则如果是女性，则应该与女士连接。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T06:58:52.747

你可以使用`inline IF`声明，

```
SELECT  IF(gender = 'Male', CONCAT('Mr. ', fname),CONCAT('Ms. ', fname)) Name
FROM    customer 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/d053b/1)

您还可以使用`CASE`其他 RDBMS 支持的

```
SELECT  CASE WHEN gender = 'Male'
            THEN CONCAT('Mr. ', fname)
            ELSE CONCAT('Ms. ', fname)
        END Name
FROM    customer 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/d053b/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T07:08:38.220

另一种方法

```
SELECT CONCAT(CASE gender 
                WHEN 'Male' THEN 'Mr. ' 
                WHEN 'Female' THEN 'Ms. ' 
              END,  `fname`,  ' ', `lname`) AS `name` 
  FROM customer 
```

[sqlfiddle](http://www.sqlfiddle.com/#!2/704fc/1)

输出

```
|           NAME |
------------------
|   Mr. Jhon Doe |
| Ms. Helen Ross | 
```

您可能会使用`CASE gender WHEN 'Male' THEN 'Mr. ' ELSE 'Ms. '`，但问题是如果您的性别列可以为空，那么您将获得 Ms. 用于所有性别未知（或客户不想透露）的记录

[sqlfiddle](http://www.sqlfiddle.com/#!2/90539/4)为此

# extjs - extjs treepanel展开折叠事件

> ID：14973991
> 
> 赞同：2
> 
> 时间：2013-02-20T06:56:52.913
> 
> 标签：extjs, treepanel

我有一个树面板，树面板内有节点。为了确定树面板是展开还是折叠的节点，我使用以下代码：

Ext.getCmp('general').collapsed

返回值为真或假。当树形面板展开或折叠时，树形面板中是否有可以捕获的事件？我的意思是树面板，而不是面板中的节点。

非常感谢您的帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T07:04:10.377

您必须在这里做错事，以下代码有效，请参阅此**[JSFiddle](http://jsfiddle.net/33rX6/)**

```
Ext.create('Ext.tree.Panel', {
    collapsible: true,
    title: 'Simple Tree',
    width: 200,
    height: 150,
    store: store,
    rootVisible: false,
    renderTo: Ext.getBody(),
    listeners: {
        collapse: function() {
            alert('collapsed');
        },
        expand: function() {
            alert('expand')
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-27T19:51:07.490

'expand' 和 'collapse' 对我也不起作用。相反，'itemcollapse'、'itemexpand'、'itemmove' 和他们的同行确实为我工作。我使用 Ext-JS 4.2.1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-25T11:38:16.267

你使用了错误的事件。您需要使用 afteritemexpand 事件。

```
afteritemexpand: function ( node, index, item, eOpts ){
    alert('HAHA');
} 
```

这是一个小提琴：

[http://jsfiddle.net/johanhaest/RDC9W/1/](http://jsfiddle.net/johanhaest/RDC9W/1/)

# sql - 如何在phpmyadmin中关联同一张表的两个字段？

> ID：14973992
> 
> 赞同：0
> 
> 时间：2013-02-20T06:56:55.680
> 
> 标签：sql, database, database-design, phpmyadmin

我创建了 1 个存储`user`和的表`uid`。

其他表存储用户的技能：

*   如果`uid = 111`进入`skill = aaa`它将存储到技能表中，但我希望`uid = 111`再次进入时`skill = aaa`它不应该存储在技能表中。
*   并`uid = 222`输入`skill = aaa`然后表将存储该值。

基本上我想关联`uid`技能表的技能领域，所以每个独特的`uid`都应该有独特的技能值，但是对于不同`uid`的技能可以是相同的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T07:01:00.153

`UId`在两个 id和技能上使用复合主键。此外，要在两个表之间建立多对多关系，以便每个用户都有很多技能，并 [**规范**](http://en.wikipedia.org/wiki/Database_normalization)您的表，最好以这种方式创建它：

**`Users`**桌子：

*   `UserID`首要的关键，
*   `USername`.
*   ...

**`Skills`**桌子：

*   `SkillId`首要的关键，
*   `SkillName`,
*   ...

联动表：

**`UsersSkills`**：

*   `UserId`外键引用`Users(UserId)`，
*   `SkillId`外键引用`Skills(SkillId)`。

`UserId`然后重要的部分是在and上创建一个复合主键`SkillId`，这样每个用户 ID 的技能都是唯一的。

在您的示例中，技能`aaa`将存储在`Skills`Id = 1 的表中，用户`UserId = 111`存储在`Users`表中。然后`UsersSkills`将包含以下内容：

```
UserId SkillId
 111   1 
```

# maven - 如何在 Maven Pom.xml 文件中添加常用注解 API 依赖项？

> ID：14973994
> 
> 赞同：0
> 
> 时间：2013-02-20T06:57:03.807
> 
> 标签：maven, jboss7.x

我一直在尝试将其添加到我的 POM 文件中，这是一个 hello world 程序的示例 POM 文件中的内容：

```
<!-- Import the Common Annotations API (JSR-250), we use provided scope 
     as the API is included in JBoss AS 7 -->
  <dependency>
     <groupId>org.jboss.spec.javax.annotation</groupId>
     <artifactId>jboss-annotations-api_1.1_spec</artifactId>
     <scope>provided</scope>
  </dependency> 
```

当我运行它时，它失败了。它说缺少版本号。当我添加一个版本时，比如 1.0，它仍然失败。我对 POM 文件和 Maven 很陌生，所以任何解释都会有所帮助。

我的 POM 文件：

```
 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.unihub.app</groupId>
  <artifactId>unihub</artifactId>
  <packaging>war</packaging>
  <version>1.0-SNAPSHOT</version>
  <name>unihub</name>
  <url>http://maven.apache.org</url>
  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>
<!--Import the Servlet API using provided scope as the JARs are already included in Jboss7-->
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.4</version>
        <scope>provided</scope>
    </dependency>
  </dependencies>
     <build>
      <!-- Set the name of the war, used as the context root when the app 
         is deployed -->
      <finalName>unihub</finalName>
      <plugins>
               <plugin>
            <groupId>org.jboss.as.plugins</groupId>
            <artifactId>jboss-as-maven-plugin</artifactId>
            <version>7.3.Final</version>
         </plugin>
        <plugin>
          <artifactId>maven-compiler-plugin</artifactId>
          <version>2.3.1</version>
          <configuration>
            <source>1.6</source>
            <target>1.6</target>
          </configuration>
        </plugin>
       </plugins>
   </build>
</project> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T07:00:16.833

对于 maven 依赖项，您必须了解可用的版本。

您可以浏览正在使用的存储库，也可以在 Web 上搜索它。

例如： http: [//mvnrepository.com/artifact/org.jboss.spec.javax.annotation/jboss-annotations-api_1.1_spec](http://mvnrepository.com/artifact/org.jboss.spec.javax.annotation/jboss-annotations-api_1.1_spec)

表明 1.0.1.Final 是有效版本。