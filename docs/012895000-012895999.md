# StackOverflow 问答 12895000-12895999

# javascript - 使用需要参数的非匿名函数的 setInterval 必须在匿名函数内。为什么？

> ID：12895006
> 
> 赞同：10
> 
> 时间：2012-10-15T11:47:45.557
> 
> 标签：javascript, jquery

好的，我已经在这里和其他地方查看了关于 jquery/javascript 中的 setInterval 的几篇帖子，关于答案的恼人之处在于我没有了解解决方案为何有效。

请考虑：

使用匿名函数，我们可以设置警报以重复输出“兔子”：

```
setInterval(function(){
  alert("bunnies")
},3000); 
```

但是如果我们想使用一个非匿名函数，我们必须编写代码

> 设置间隔（跳，3000）；

其中功能：

```
function hop(){
    alert("bunnies");
} 
```

如果我们尝试编码：

```
setInterval(hop(),3000); 
```

hop 只执行一次。我不明白为什么会这样。我已经阅读了各种关于此的 SO，这意味着我们需要传递对 setInterval 的引用。这是否意味着第一种形式 setInterval(hop,3000); 通过引用传递。如果是这样，这可以解释吗？

因此我们有一个问题。显然，希望能够将参数传递给函数跳跃，如.....

```
setInterval(hop("bunnies"),3000); 
```

其中功能：

```
function hop(msg){
    alert(msg);
} 
```

这确实会导致调用 hop 并输出“bunnies”，但再次调用该函数仅一次。

因此，据我所知，将参数传递给由 setInterval 控制的函数的唯一方法是将其合并到匿名函数中：

```
setInterval(function(){
 hop("bunnies")
},3000); 
```

这会传递参数并重复执行 hop，每 3 秒提醒我们注意兔子（注意兔子非常重要）。

因此问题：

1.  这是唯一允许您传入参数的语法吗？
2.  为什么 setInterval(hop("bunnies"),3000); 不行。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-15T11:51:16.873

`setInterval`期望一个**函数**作为第一个参数。当您尝试：

```
setInterval(function() {...}, 100); 
```

或者

```
setInterval(funcName, 100); 
```

您正确地传递了一个函数。

然而，当您尝试时`setInterval(funcName(), 100);`，您实际上是在*调用该函数并将其返回值传递*给`setInterval`它是不正确的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-15T11:51:59.103

> 为什么不起作用`setInterval(hop("bunnies"),3000);`。

`setInterval(hop("bunnies"),3000);`将`hop` **立即**调用，然后将其**返回值**( `undefined`) 传递给`setInterval`（将被忽略，因为它不是函数或字符串）。

> 这是唯一允许您传入参数的语法吗？

不，但它是最好的支持。

另一种语法是

```
 setInterval(hop, 3000, "bunnies") 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-15T13:10:55.173

## 1\. 这是唯一允许您传入参数的语法吗？

是的，这是我能想到的唯一直接的方法......

```
setInterval(function(){
    hop("bunnies")
},3000); 
```

...但当然，如果您必须处理很多间隔，您可以编写一个辅助函数，例如：

```
function Looper() {
    this.loops = {};
    this.start = function(name, fn, interval, params) {
        this.loops[name] = setInterval(function() {
            fn.apply(null, params);  // maybe bind the function?
        }, interval);
    };
    this.stop = function(name) {
        clearInterval(this.loops[name]);
    };
} 
```

（试试看：http: [//jsfiddle.net/ceHMs/](http://jsfiddle.net/ceHMs/)）

你会像这样使用它：

```
function say(name, msg){ console.log(name,':',msg) };
function shout(name, msg){ console.log(name,':',msg.toUpperCase()) };

var looper = new Looper();
looper.start('say', say, 1000, ['clock' 'tick']);
looper.start('shout', shout, 2000, ['clock' 'tack']);
// ... later ...
looper.stop('shout'); 
```

但是你必须评估这是否真的有必要。

* * *

## 2\. 为什么不`setInterval(hop("bunnies"),3000);`工作。

这是因为 setInterval 需要对一个函数的引用，该函数应该每隔您指定的几毫秒执行一次。

**括号是这里的关键。**后跟括号的函数名会执行给定的函数并**返回函数的结果，**因此您不会传递对 setInterval 的引用，而是传递函数 hop('bunnies') 的返回值。函数的引用只是函数的**名称**。如果你想调用被引用的函数，只需在引用后面加上括号。简单的例子：

```
function executeFunction(fn){
    fn();
}; 
```

知道了这一点，我们实际上可以修改您的 hop 函数以使其工作`setInterval(hop("bunnies"),3000);`：

```
function hop(msg){
    return function(){ alert(msg) }
} 
```

但这与直接在 setInterval 调用中使用匿名函数几乎完全相同。现在您只需在调用 hop 时返回该匿名函数，这使您的 setIntervall 调用更短。

最后，它归结为您的个人喜好和特定用例。大多数情况下，直接在 setInterval 中使用匿名函数的方法是最明显的方法，也是最容易被其他人理解的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T11:49:26.337

您应该将函数作为变量传递，而不是调用它。

> 设置间隔（跳，3000）；

因为第一个参数是一个按给定时间间隔调用的函数，所以通过将它像 hop() 一样放置，您调用该函数，而不是传递它。如果要传递参数，请使用函数包装器

> setInterval(function(){hop(arguments)},3000);

# java - 来自码头的 EofException

> ID：12895008
> 
> 赞同：3
> 
> 时间：2012-10-15T11:47:46.333
> 
> 标签：java, jetty, eof

我们正在迁移到 Jetty 6.1，我们看到很多以下异常：

```
[2012-10-15 01:22:08,286: [btpool0-646] [] DEBUG,http.jetty.JettyServerManager] EOF
org.mortbay.jetty.EofException
        at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:302)
        at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:205)
        at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380)
        at org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:228)
        at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:450) 
```

虽然，到目前为止，我还没有看到对响应有任何影响。我配置有什么问题吗？这些是 DEBUG 日志语句，可以忽略这些吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T11:54:33.620

您可以忽略此消息，我认为它们是在远程浏览器关闭连接时产生的。这不是错误。

# c# - 从另一个文档创建 xmlDocument

> ID：12895009
> 
> 赞同：8
> 
> 时间：2012-10-15T11:47:50.360
> 
> 标签：c#, xml, xmldocument

我正在尝试`xmldocument`通过不同的 XML 创建一个对象

见下面的代码：

```
objNewsDoc.LoadXml(strNewsDetail);       // Current XML
XmlDocument docRss = new XmlDocument();  // new Xml Object i Want to create 

XmlElement news = docRss.CreateElement("news");   // creating the wrapper news node
news.AppendChild(objNewsDoc.SelectSingleNode("newsItem")); // adding the news item from old doc 
```

错误：**要插入的节点来自不同的文档上下文**

**编辑 1 完整代码块：**

```
try
{
       XmlDocument objNewsDoc = new XmlDocument();
        string strNewsXml = getNewsXml();
        objNewsDoc.LoadXml(strNewsXml);

        var nodeNewsList = objNewsDoc.SelectNodes("news/newsListItem");
        XmlElement news = docRss.CreateElement("news");
         foreach (XmlNode objNewsNode in nodeNewsList)
         {
               string newshref = objNewsNode.Attributes["href"].Value;
                string strNewsDetail = getNewsDetailXml(newshref);
                 try
                  {
                        objNewsDoc.LoadXml(strNewsDetail);
                         XmlNode importNewsItem = docRss.ImportNode(objNewsDoc.SelectSingleNode("newsItem"), true);
                        news.AppendChild(importNewsItem);
                   }
                    catch (Exception ex)
                    {
                            Console.Write(ex.Message);
                      }

              }

             docRss.Save(Response.Output);
}
catch (Exception ex)
{
      Console.Write(ex.Message);
 } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-15T11:51:31.903

您需要使用[Import Node](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.importnode.aspx)方法将 XmlNode 从第一个文档导入到第二个文档的上下文中：

```
objNewsDoc.LoadXml(strNewsDetail);       // Current XML
XmlDocument docRss = new XmlDocument();  // new Xml Object i Want to create 

XmlElement news = docRss.CreateElement("news");   // creating the wrapper news node
//Import the node into the context of the new document. NB the second argument = true imports all children of the node, too
XmlNode importNewsItem = docRss.ImportNode(objNewsDoc.SelectSingleNode("newsItem"), true);
news.AppendChild(importNewsItem); 
```

**编辑**

您非常接近您的答案，您现在遇到的主要问题是您需要将新闻元素附加到您的主文档中。如果您希望输出文档如下所示，我建议您执行以下操作：

```
<news>
  <newsItem>...</newsItem>
  <newsItem>...</newsItem>
</news> 
```

在创建 docRSS 时，不要创建新的 XmlElement，news，而是执行以下操作：

```
XmlDocument docRss = new XmlDocument();
docRss.LoadXml("<news/>"); 
```

您现在有一个如下所示的 XmlDocument：

```
<news/> 
```

然后，而不是`news.AppendChild`，简单地：

```
docRSS.DocumentElement.AppendChild(importNewsItem); 
```

This appends each `newsItem` under the `news` element (which in this instance is the document element).

# ios5 - 截断 ios 5.x 和 6.x 的尾随零

> ID：12895011
> 
> 赞同：3
> 
> 时间：2012-10-15T11:47:58.800
> 
> 标签：ios5, ios6

在 ios 5.X 和 6.X 中，对于输入 type="number"，如果我输入的数字有小数点后跟单个数字后跟零，则尾随零被截断。

我希望输入的数字以我输入的方式显示。

例如：如果我输入数字为 xxx.x00，那么它应该在文本框中显示为 xxx.x00。目前显示为 xxx.x

如果有的话请告诉我解决方案，我是ios新手。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:54:22.307

`input type="tel"`至少会给你在 IOS 6.X 上的 iPad 上的结果。`tel`使用与*几乎完全相同*的键盘`number`，并且没有截断尾随零问题。

不幸的是，这在 iPhone 上并不是一个好的体验，它确实使用了没有小数点符号的拨号键盘。

# ios - 由于带有 Storyboard 的 UIImageView 导致的内存警告和崩溃

> ID：12895015
> 
> 赞同：0
> 
> 时间：2012-10-15T11:48:09.343
> 
> 标签：ios, memory-leaks, automatic-ref-counting

我在 IOS 6 上有一个目录应用程序。所以每个视图中都有一些 UIImageView。

我认为，当我传递给其他视图时，不会释放旧的图像视图。所以我的Real Mem。变为 300MB 和虚拟内存。变为 500MB，我收到内存警告。

我以前用

```
- (void)viewDidUnload
{
    [super viewDidUnload];
    itemImageView = nil;
    scrollView = nil;
} 
```

我应该多做些什么？我错过了一些常见的东西吗？

更新：

我正在像这样初始化 ImageView：

```
 __block UIImageView *imageview = [[UIImageView alloc] init]; 
```

并通过 AFNetworking 进行设置：

```
 AFImageRequestOperation *operation = [AFImageRequestOperation imageRequestOperationWithRequest:imageRequest
                                                                                  imageProcessingBlock:nil
                                                                                             cacheName:@"nscache"
                                                                                               success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image){
                                                                                                   imageview.image = image;
                                                                                               }
                                                                                               failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error){ NSLog([error description]); }
                                              ]; 
```

更新：

我正在使用故事板。所以从一种观点到另一种观点，我正在使用 Segue。如果我回到第一个控制器，则不会调用第二个控制器的 viewDidUnload。如果我再次进入第二个视图，内存会增加，这意味着第二个视图中的所有图像视图都会再次加载。我哪里错了？

更新 2：我开始相信，它是关于 Storyboard 和 Push segue。回到第一个视图，我正在使用 push segue。我创建了另一个自定义 segue 来弹出第二个视图控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:59:38.930

如果您使用 Instruments 来监控内存使用情况，请确保 Zombies 已关闭（方案选项）。默认情况下，僵尸不会被处理掉，所以你的内存使用量会爆炸。

# macos - 在 Mac OS 上的 bash 中获取午夜前的格式化时间

> ID：12895017
> 
> 赞同：3
> 
> 时间：2012-10-15T11:48:09.837
> 
> 标签：macos, bash

我想在 Mac OS 上的 bash 中获得午夜之前的时间（它没有与许多 Linux 发行版相同的日期实用程序）。

例如，在 23:56:03 我想得到：“00:03:59”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T12:42:11.560

如果您使用 Unix 时间戳，计算起来会更容易一些，它是从过去某个固定时间（1970 年 1 月 1 日）经过的秒数。我使用`local`内置函数使它们成为函数的局部变量，并设置变量的整数属性，因为它使执行算术的语法更简单。

```
print_time_until_midnight () {
  local -i now=$(date +%s)

  if (( now % 86400 == 0 )); then
      # If it is exactly midnight, say so
      echo "Time remaining: 00:00:00"
      return
  fi

  # Get the time for 00:00:00 *tomorrow* (the next midnight)
  local -i midnight=$(date -v+1d -v0H -v0M -v0S +%s)

  local -i S=midnight-now
  local -i H=S/3600
  S=S-H*3600

  local -i M=S/60
  S=S-M*60

  echo "Time remaining: $H:$M:$S"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:52:20.063

OSX 有 date 命令

请参阅 - [OSX 日期手册页](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/date.1.html)

要获得时间，请使用：

```
date +"%T" 
```

你需要使用一些**BASIC**数学

```
#!/usr/bin/env bash
hours=`date +"%H"`
minutes=`date +"%M"`
seconds=`date +"%S"`
# Time till midnight
echo `expr 23 - ${hours}`" hours, "`expr 59 - ${minutes}`" minutes, and "`expr 59 - ${seconds}`" seconds " 
```

# c# - ldc.i4.x 和 ldc.i4 x 指令是否可互换且语义相同？

> ID：12895020
> 
> 赞同：3
> 
> 时间：2012-10-15T11:48:19.270
> 
> 标签：c#, .net, cil, il

CIL 中有一些加载指令，例如`ldc.i4.0`, `ldc.i4.1`, `ldc.i4.2`, `ldc.i4.3` ...</p>

我想知道，是否可以使用`ldc.i4 1`代替`ldc.i4.1`或`ldc.i4 5`代替`ldc.i4.5`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T11:57:25.517

是的，使用`ldc.i4 1`. 代替是完全合法的`ldc.i4.1`。在最常见的场景中，*为了效率和简洁性*，给出了单字节操作码。特别是，如果它们是（3 个字节） ，所有这些`ldarg.0`（1 个字节）将很快加起来**显着**增加程序集的大小，就像in 之类的东西一样；是 5 个字节而不是 1 个。`ldarg 0``ldc.i4.1``i++``ldc.i4 1`

您没有义务使用它们。我实际上*希望*（未经测试）JIT 能够发现更冗长的用法并以同样的方式对待它，尽管它*不需*要这样做。

就个人而言，当我在做“发射”或类似的事情时，我只是使用一种实用方法来为任何给定的值/本地/参数/等发出*最合适的代码。*

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-15T11:50:43.177

这是关于 CLR 代码注入的好文章：http: [//www.codeproject.com/Articles/463508/NET-CLR-Injection-Modify-IL-Code-during-Run-time](http://www.codeproject.com/Articles/463508/NET-CLR-Injection-Modify-IL-Code-during-Run-time)

# magento - Magento：订购目录/类别模型 getResource

> ID：12895029
> 
> 赞同：0
> 
> 时间：2012-10-15T11:48:50.347
> 
> 标签：magento

我有代码可以获取一个类别的子类别。

```
$parent = $category_model->load($current_category->parent_id);
$_categories = explode(',',$parent->getChildren()); 
```

但它似乎并没有保持子类别在管理界面中的放置顺序。

我尝试使用`->setOrder('position', 'ASC')`，但似乎无法访问该方法。

有人知道如何设置上述代码的顺序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:19:38.193

我设法以不同的方式做到这一点。之前，我得到一个类别 ID 数组，循环遍历它们并每次加载一个类别。这意味着我不能像普通收藏一样订购它们。因此，我只是将所有 ID 放入一个集合中，以便一次有序地获取所有 ID。

```
$category_model = Mage::getModel('catalog/category');
$current_category = Mage::registry('current_category');
$parent = $category_model->load($current_category->parent_id);
$_categoriesArray = explode(',',$parent->getChildren());

$_categories = Mage::getModel('catalog/category')->getCollection()
    ->addAttributeToFilter('entity_id', array('in' => $_categoriesArray))
    ->addAttributeToSelect('*')
    ->setOrder('position', 'ASC'); 
```

# java - 使用 Bouncy Castle 的 AES 256 位加密：仍然需要无限强度策略？

> ID：12895031
> 
> 赞同：2
> 
> 时间：2012-10-15T11:49:12.007
> 
> 标签：java, encryption, aes, bouncycastle

[我想对Bouncy Castle](http://www.bouncycastle.org)使用 AES 256 位加密，我想知道尽管 BC 仍然需要“ [Java Cryptography Extension (JCE) Unlimited Strength Jurisdiction Policy Files](http://www.oracle.com/technetwork/java/javase/downloads/jce-6-download-429243.html) ”，因为我收到`java.security.InvalidKeyException: Illegal key size`以下代码的异常：

```
public class AES256 {
    public static void main(String[] args) throws Exception {
        Security.addProvider(new BouncyCastleProvider());

        final KeyGenerator keyGen = KeyGenerator.getInstance("AES");
        keyGen.init(256); // doesn't work for 192, too

        final byte[] encoded = keyGen.generateKey().getEncoded();

        final SecretKeySpec keySpec = new SecretKeySpec(encoded, "AES");
        final Cipher c = Cipher.getInstance("AES/CBC/PKCS5Padding", "BC");
        // Please ignore static IV for this example
        final IvParameterSpec iv = new IvParameterSpec(new byte[]{0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15});

        c.init(Cipher.ENCRYPT_MODE, keySpec, iv); // throws java.security.InvalidKeyException: Illegal key size
    }
} 
```

我错过了什么？有没有办法在没有无限强度策略文件的情况下使用 256 位密钥？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T12:02:25.207

bouncycastle [FAQ](http://www.bouncycastle.org/wiki/display/JA1/Frequently+Asked+Questions)中的第一个问题。

# sql - 加入同一张桌子

> ID：12895040
> 
> 赞同：1
> 
> 时间：2012-10-15T11:49:36.197
> 
> 标签：sql, ruby-on-rails, join, self-join

作为我正在寻找的示例，请考虑以下示例水果表

```
 id  user_id     fruit           type        

1   43      apple           fresh
2   87      watermelon      fresh
3   99      apple           fresh
4   43      pineapple       dried
5   60      pineapple       dried
6   60      lemon           fresh
7   99      kiwi            fresh   
8   43      mango           fresh 
```

我想在同一个表中找到所有同时拥有“apple”和“dried”的用户的所有记录（不一定同时在同一行）。同一个用户必须同时具备这两个条件。

我想要返回的是：

```
 id  user_id     fruit           type        

1   43      apple           fresh
4   43      pineapple       dried 
```

我尝试了几种自连接组合：

```
 SELECT distinct f1.*, f2.*
FROM orders f1 FULL JOIN orders f2
ON f1.user_id = f2.user_id
WHERE f1.fruit ILIKE 'apple'
AND f2.type ILIKE 'dried' 
```

但一直没能完全正确。

这是针对 Rails 应用程序的，所以我希望能够使用 ActiveRecord 来执行此操作，但如果需要，我会对纯 SQL 感到满意。

关于如何做到这一点的任何建议？TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:54:34.397

```
SELECT
  orders.*
FROM
  orders
INNER JOIN
  (SELECT user_id FROM orders WHERE fruit = 'apple' GROUP BY user_id) AS apple_buyers
    ON apple_buyers.user_id = orders.user_id
INNER JOIN
  (SELECT user_id FROM orders WHERE type  = 'dried' GROUP BY user_id) AS dried_buyers
    ON dried_buyers.user_id = orders.user_id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T12:27:56.463

这应该为你做：

```
SELECT
    *
FROM
    Fruits
WHERE
  (Fruit = 'apple'
OR Type = 'dried')
AND
    EXISTS
    (SELECT
        NULL
    FROM 
        FRUITS F1
        INNER JOIN Fruits F2 ON F1.User_ID = F2.User_ID AND F1.Fruit = 'apple' and F2.Type = 'dried'
    WHERE
        Fruits.user_ID = F1.User_ID) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-19T07:18:12.923

```
select  TAB1.id,TAB1.user_id,TAB1.fruit,TAB1.types

FROM 
 (select id,user_id,fruit,types
 from IID T1 WHERE  T1.fruit='apple' OR T1.types ='dried')TAB1

  INNER JOIN 

 (select user_id,count(user_id) AS CNT_user_id
  from IID T1 WHERE  T1.fruit='apple' OR T1.types ='dried'
  group by user_id
  having count(user_id) >=2)TAB2

  ON(TAB1.user_id=TAB2.user_id)

 id user_id    fruit        types
 4      43     pineapple    dried
 1      43     apple        fresh 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-19T08:20:37.820

```
SELECT A.id , A.user_id,A.fruit,A.types  FROM iid A 
WHERE user_id IN(
    SELECT A.user_id FROM 
    (
        SELECT user_id FROM iid 
        WHERE types='dried'
    )A
 INNER JOIN 
    (
        SELECT user_id FROM iid WHERE fruit = 'apple'
    )B
ON A.user_id=b.user_id)
AND ( fruit='apple' OR types='dried') 
```

# json - 很多json文件如何编译

> ID：12895041
> 
> 赞同：1
> 
> 时间：2012-10-15T11:49:36.907
> 
> 标签：json

如果有人对我可以从哪里开始/我可以看什么有任何建议，那就太好了。

在过去的几个月里，我每天都从 twitter 获取一个 json 文件，希望以后可以使用 Processing 来玩弄它们。我遇到的问题是我需要将所有这些都放在一个文件中，而不是数百个，所以这就是我在这里的原因。所以我想我要问的是，将大量 json 文件编译成一个以便于访问的最佳方法是什么，或者只是一种搜索所有这些文件的简单方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:51:53.230

您可以使用天真地连接它们

```
for i in *.json; do
   cat $i >> /tmp/result
done 
```

（使用`bash`或类似）。当然，您可能需要在根节点前添加/后缀。`/tmp/result`如果您想再次运行上述内容，请确保擦洗。

一个更简单的变体是`cat *.json > /tmp/result`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T11:59:16.310

对于海量搜索问题，您可能需要查看[json 命令行工具](https://github.com/zpoley/json-command)。

# android - 从不同的 APP 获取来自 AsyncFacebookRunner 的不同消息结果

> ID：12895043
> 
> 赞同：1
> 
> 时间：2012-10-15T11:49:50.807
> 
> 标签：android, facebook-graph-api

在 Facebook SDK 的示例“流”中，它使用 AsyncFacebookRunner 来获取消息，例如 new AsyncFacebookRunner(fb).request("me/home", new StreamRequestListener());。它只获取发布消息。

在我的应用程序中，我做同样的事情，但我收到了更多消息，例如更改设置或 oicons 消息（SDK 示例没有）。为什么？

谢谢你。

# php - jpgrid php json_encode() 关联数组

> ID：12895045
> 
> 赞同：0
> 
> 时间：2012-10-15T11:49:52.003
> 
> 标签：php, jqgrid, associative-array, json

我刚开始使用jpgrid。我在使用 php json_encode 时遇到了这个问题。

根据 jqgrid 网站上的示例，json 字符串可以通过 php 代码生成，如下所示：

```
 $responce->page = "1";
    $responce->total = 1;
    $responce->records = "1";

    $i=1; $amttot=0; $taxtot=0; $total=0;
    while($i<=10) {
        $amttot += $row[amount];
        $taxtot += $row[tax];
        $total += $row[total];
        $responce->rows[$i]['id']=strval($i);
        $responce->rows[$i]['cell']=array("123","2012-10-15","name","10000","tax","9999","note");
        $i++;
    }
    $responce->rows = (array)$responce->rows;
    $responce->userdata['amount'] = $amttot;
    $responce->userdata['tax'] = $taxtot;
    $responce->userdata['total'] = $total;
    $responce->userdata['name'] = 'Totals:'; 
```

我有问题

```
 $responce->rows[$i]['id']=strval($i);
    $responce->rows[$i]['cell']=array("123","2012-10-15","name","10000","tax","9999","note"); 
```

当 php json_encode 生成 json 字符串时，rows 数组被视为关联数组。因此结果 json 字符串如下所示：

```
{"page":"1","total":1,"records":"1",
 "rows":{"1":{"id":"1","cell":["123","2012-10-15","name","10000","tax","9999","note"]},
         "2":{"id":"2","cell":["123","2012-10-15","name","10000","tax","9999","note"]},
         "3":{"id":"3","cell":["123","2012-10-15","name","10000","tax","9999","note"]},
         "4":{"id":"4","cell":["123","2012-10-15","name","10000","tax","9999","note"]},
         "5":{"id":"5","cell":["123","2012-10-15","name","10000","tax","9999","note"]},
         "6":{"id":"6","cell":["123","2012-10-15","name","10000","tax","9999","note"]},
         "7":{"id":"7","cell":["123","2012-10-15","name","10000","tax","9999","note"]},
         "8":{"id":"8","cell":["123","2012-10-15","name","10000","tax","9999","note"]},
         "9":{"id":"9","cell":["123","2012-10-15","name","10000","tax","9999","note"]},
         "10":{"id":"10","cell":["123","2012-10-15","name","10000","tax","9999","note"]}},
 "userdata":{"amount":0,"tax":0,"total":0,"name":"Totals:"}} 
```

jqgrid 无法处理此 json 字符串。事实上 jqgrid 不会引发任何 javascript 错误。它只是不呈现表格内容。我通过萤火虫查看了 jqgrid 示例网站中的 json 字符串。它看起来像这样：

```
{"page":"1","total":2,"records":"13",
 "rows":[{"id":"13","cell":["13","2007-10-06","Client 3","1000.00","0.00","1000.00",null]},
         {"id":"12","cell":["12","2007-10-06","Client 2","700.00","140.00","840.00",null]},
         {"id":"11","cell":["11","2007-10-06","Client 1","600.00","120.00","720.00",null]},
         {"id":"10","cell":["10","2007-10-06","Client 2","100.00","20.00","120.00",null]},          
         {"id":"9","cell":["9","2007-10-06","Client 1","200.00","40.00","240.00",null]},
         {"id":"8","cell":["8","2007-10-06","Client 3","200.00","0.00","200.00",null]},
         {"id":"7","cell":["7","2007-10-05","Client 2","120.00","12.00","134.00",null]}, 
         {"id":"6","cell":["6","2007-10-05","Client 1","50.00","10.00","60.00",""]},
         {"id":"5","cell":["5","2007-10-05","Client 3","100.00","0.00","100.00","no tax at all"]},
         {"id":"4","cell":["4","2007-10-04","Client 3","150.00","0.00","150.00","no tax"]}],
        "userdata":{"amount":3220,"tax":342,"total":3564,"name":"Totals:"}} 
```

我不知道如何使用关联数组在 json 字符串中生成这样的数组 obj 的 php 示例代码。我正在使用 php 5.4

我可以在 jqgrid 或 php 中进行哪些更改以使其正常工作？我很惊讶没有其他人有这个问题。我可能遗漏了一些相当明显的东西。

谢谢

卡斯比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:39:09.863

问题是由 PHP 中如何生成响应数组对象引起的。当我最初在循环中创建数组时，我从 1 而不是 0 开始索引。 Response->rows[i] 这导致 php 将响应数组视为关联数组而不是顺序数组。因此 php 将名称值对象放在响应对象中（当我试图创建一个未命名对象的数组时）

解决方案是确保数组索引是连续的和连续的

# android - 设置只有一个 Activity 的选项卡主机

> ID：12895047
> 
> 赞同：1
> 
> 时间：2012-10-15T11:49:58.480
> 
> 标签：android, android-tabhost

我是 android 编程新手，我在这个问题上已经 3 周了，我需要继续前进。如何在不扩展活动的情况下仅设置一个活动的 3 个选项卡主机，并且我不想使用片段或选项卡活动。我希望每个选项卡在其中都有单独的活动，我浏览了不同的教程，但没有提供直接答案，我发现很多东西已经被贬值了，如果可以给出示例或教程，我将不胜感激。请帮忙！！谢谢您的回答。

# ruby - 红宝石分析（数学）类

> ID：12895049
> 
> 赞同：1
> 
> 时间：2012-10-15T11:50:11.057
> 
> 标签：ruby, analysis

我想知道，是否有 ruby​​ 的分析类？分析如能够推导和整合之类的东西。如果无法处理解析方式，则可以是数字。

谷歌搜索没有出现任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:02:14.573

没有内置库可以做到这一点。虽然有一些 gem 可以帮助您在 Ruby 中执行微积分运算，例如[Symbolic](https://github.com/brainopia/symbolic)。

还有另一个 StackOverflow 线程讨论相同的主题：[Calculus in Ruby](https://stackoverflow.com/questions/1994920/calculus-in-ruby)

# ruby - 覆盖在 gem 中设置的 sinatra 路由

> ID：12895050
> 
> 赞同：0
> 
> 时间：2012-10-15T11:50:13.683
> 
> 标签：ruby, sinatra

我正在使用 Sinatra 和 Sinatra-authentication gem 来构建一个站点。

我想覆盖其中的一些逻辑路径，但不确定处理它的最佳方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T02:33:33.120

来自[Sinatra 自述文件](http://www.sinatrarb.com/intro#Routes)

> 路由按照定义的顺序进行匹配。调用与请求匹配的第一个路由。

因此，例如，如果您想覆盖“/logged_in”路由中的逻辑，您可以这样做：

```
get "/logged_in" do
  # your code here
end

register Sinatra::Authentication 
```

并且您的路线将首先被编译，并且不会调用 sinatra-authentication 中定义的路线。

# javascript - 在 jquery mobile 1.8.2 + Phonegap 中未捕获具有按钮角色的链接上的点击事件

> ID：12895055
> 
> 赞同：0
> 
> 时间：2012-10-15T11:50:27.507
> 
> 标签：javascript, cordova, jquery-mobile, jquery

我已经重塑了两个指向小圆形按钮的链接，但是由于某种原因，我无法使用您在[此代码中看到的任何方法来捕捉它们的点击事件](http://jsfiddle.net/y7dxW/1/)

任何帮助都会非常有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:18:41.987

您在 JS 代码中犯了几个错误。

**1 -**你忘了 a`$`和 a `.`：

代替：

```
('ui-input-clear').on('click', function() {
    alert('!');
}); 
```

你应该有：

```
$('.ui-input-clear').on('click', function() {
    alert('!');
}); 
```

**2 -**另外，更换：

```
$document.ready(function() { 
```

和：

```
$(function() { 
```

然后，它应该工作。

**注意：**检查控制台以跟踪 JS 错误非常有用。如果你还没有发现它，你可以试试 Firebug！（我爱萤火虫！：P XD）

# c++ - 如何从双指针中获取值？

> ID：12895058
> 
> 赞同：0
> 
> 时间：2012-10-15T11:50:47.163
> 
> 标签：c++, pointers

我正在尝试打印以下代码返回的值：

```
Agent** Grid::GetAgent(int x, int y)
{
    return &agents[x][y];
} 
```

它返回一个双指针，并打印

```
std::cout << *grid.GetAgent(j, k) << endl; 
```

给出了一个内存位置，但是当我尝试

```
std::cout << **grid.GetAgent(j, k) << endl; 
```

我得到错误

```
main.cpp:53: error: no match for ‘operator<<’ in ‘std::cout << * * grid.Grid::GetAgent(j, k)’ 
```

如何打印 *grid.GetAgent(j, k) 中的值？

下面是 Agent.h

```
#ifndef AGENT_H
#define AGENT_H

enum AgentType { candidateSolution, cupid, reaper, breeder};

class Agent
{
public:
    Agent(void);
    ~Agent(void);

    double GetFitness();
    int GetAge();
    void IncreaseAge();
    AgentType GetType();
    virtual void RandomizeGenome() = 0;

protected:
    double m_fitness;
    AgentType m_type;
private:
    int m_age;
};

#endif // !AGENT_H 
```

和 Agent.cpp

```
#include "Agent.h"

Agent::Agent(void)
{
    m_age = 0;
    m_fitness = -1;
}

Agent::~Agent(void)
{
}

int Agent::GetAge()
{
    return m_age;
}

double Agent::GetFitness()
{
    return m_fitness;
}

void Agent::IncreaseAge()
{
    m_age++;
}

AgentType Agent::GetType()
{
    return m_type;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T11:56:53.403

你需要定义一个函数`ostream& operator<<(ostream&, const Agent&)`

```
ostream& operator<<(ostream& out, const Agent& x)
{
  // your code to print x to out here, e.g.
  out << (int)x.GetType() << ' ' << x.GetFitness() << ' ' << x.GetAge() << '\n';
  return out;
} 
```

C++ 不是`Agent`靠魔法打印的，你必须告诉它如何打印。

# c - 为什么执行时显示为 82？For 循环 - 阶乘

> ID：12895061
> 
> 赞同：-1
> 
> 时间：2012-10-15T11:50:54.423
> 
> 标签：c, factorial

第一个代码为 1! 的 82！阶乘……有什么理由吗？考虑到 do 循环工作得非常好，这对我来说真的没有任何意义。如果您运行该程序，您将看到一个表格，其中给出了阶乘的所有答案。do循环是我必须做的，但我不能使用它。

知道为什么 for 循环不能正常工作吗？

```
#include <stdio.h>                                     /* Necessary header */
#define LAST_NUMBER 25                                 /* Macro preset to avoid magic numbers */

int main(void)                                         /* Start executive method */
{
    int Nbr;
    signed long total = Nbr;

    printf("Nbr               Nbr!");                  /* Table Headers */
    printf("\n----------------------");

    for (Nbr = 1; Nbr<=LAST_NUMBER;)              /* Loop statement begins */
    {
        total *= Nbr;
        printf("\n%2d   %15ld", Nbr, total);
                Nbr++;
                                        /* Prints both columns for table */
    }                       /* Loop ends when predefined number is reached */

    return 0;
}                                                      /* End main method */

/* The following code works fine */

#include <stdio.h>                                     /* Necessary header */
#define LAST_NUMBER 25                                 /* Macro preset to avoid magic numbers */

int main(void)                                         /* Start executive method */
{
    int Nbr = 1;
    signed long total = Nbr;

    printf("Nbr               Nbr!");                  /* Table Headers */
    printf("\n----------------------");

    do                                                 /* Loop statement begins */
    {
        total *= Nbr;
        printf("\n%2d   %15ld", Nbr, total);            /* Prints both columns for table */
        Nbr++;
    }while (Nbr<=LAST_NUMBER);                         /* Loop ends when predefined number is reached */

    return 0;
}                                                      /* End main method */ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:53:16.217

```
int Nbr;
signed long total = Nbr; 
```

您必须在使用变量之前对其进行初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:55:15.663

在第一种情况下，您在将其分配给 total 之前不进行初始化`Nbr`，因此其初始值为*indeterminate*。具有范围的变量`auto`（在函数或块中声明且没有`static`关键字）未初始化。

# jquery - jQuery左右滑动 - 编写代码的更简单方法？

> ID：12895062
> 
> 赞同：0
> 
> 时间：2012-10-15T11:50:59.953
> 
> 标签：jquery, html, css, animation

我有一些 jQuery，我认为可以写得更简单，我是 jQuery 新手，我还想在代码中添加滑入和滑出动画，但不知道如何最好地做到这一点。任何帮助都会很棒。

```
$(document).ready(function() {
  $('.utilTabFilter').click(function() {
    if($('#sideFilter.smallScreenFilter').css("left")=="0px")
    {
        $('#sideFilter.smallScreenFilter').css("left","-232px");    
        $('.smallScreenFilter .utilFollowFilter').css("display","none");
    }
    else
    {
        $('#sideFilter.smallScreenFilter').css("left","0");
        $('.smallScreenFilter .utilFollowFilter').css("display","block");
    }       
  });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:54:27.497

将您的样式放入 CSS 类中：

```
.myClass { left: -232px } 
```

并在点击时切换它。加上使用`.toggle()`方法来切换可见性：

```
$('.utilTabFilter').click(function() {
   $('#sideFilter.smallScreenFilter').toggleClass('myClass');
   $('.smallScreenFilter .utilFollowFilter').toggle();
}); 
```

# regex - 准确的电话号码格式的正则表达式

> ID：12895064
> 
> 赞同：1
> 
> 时间：2012-10-15T11:51:08.237
> 
> 标签：regex, validation

我目前正在使用这个正则表达式

```
"/^([0-9\(\)\/\+ \-]*)$/", 
```

这很好，但问题是它也只接受“空白”输入和空格，它弄乱了我的验证，什么正则表达式代码可以让我只验证使用中的这种类型的输入

```
(999) 999-9999 
```

并且在输入时也不接受用户的“空白”输入字段。任何长度都可以，只要它只接受我上面提到的这个输入。

外部失败的尝试：

```
^\(\d{3}\)\s{0,1}\d{3}-\d{4}$
/^\(\d{3,4}\) \d{3}-\d{1,10}$/ 
```

这是我为这种格式制作正则表达式的其他失败尝试。两者都不接受

```
(999) 999-9999 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T23:05:14.147

你还没有说你用什么语言做这个，所以我们不知道你的正则表达式解析器有什么样的限制。例如，传统`sed`仅限于 BRE，awk 和 grep 可以处理 ERE，而 linux 系统上的 grep 将处理 PCRE。Perl 当然也会做 PCRE，Python 和 PHP 也一样。但是 JavaScript 只支持 BRE 的一个子集，并且遗漏了一些 POSIX 类的经典快捷方式。

所以......要在 BRE 中做到这一点，*一切都*支持，你的括号是字面意思的，你有有限的范围控制：

```
^([[:digit:]]\{3\})[[:space:]]\{0,1\}[[:digit:]]\{3\}-[[:digit:]]\{4\}$ 
```

但这是艰巨而痛苦的。您可能正在使用至少支持 ERE 的东西：

```
^\([[:digit:]]{3}\)[[:space:]]?[[:digit:]]{3}-[[:digit:]]{4}$ 
```

如果你的解析器支持类速记，你可以进一步缩短它：

```
^\(\d{3}\)\s?\d{3}-\d{4} 
```

最后一个可以与 perl 或 PHP 的 PCRE 支持一起使用，但不能与 sed、awk 或 grep 一起使用。

另外，我要指出，这不是处理输入验证的好方法。你想要更多的灵活性。例如，这将是一个更好的主意，

1.  去掉所有非数字字符
2.  如果结果是 10 位，请检查有效的区号
3.  如果结果为 11 位且第一位为 1，则检查有效的区号
4.  否则，将其视为国际号码

您可能还需要提出其他一些条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T11:59:05.107

你忘了转义括号。试试这个：`^\(\d{3}\)\s{0,1}\d{3}-\d{4}$`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T12:06:14.937

不要将输入验证与数据提取混淆。

通常，强制使用地址或电话号码之类的确切格式是徒劳的。首先，您让一个人（输入数据的人）做计算机的工作（格式化数据），即使这样可行，也可能存在不适合的边缘情况。我相信，无法输入*有效*数据比在您的端出现一些拼写错误要糟糕得多。例如，您拒绝使用国家/地区前缀的任何内容。

所以为了简单的验证，我只看输入中是否有数字，仅此而已。就像我只是寻找`@`验证电子邮件地址一样。你花了几天时间来获得一个正则表达式，结果却发现它最终并不重要。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-08T21:21:12.060

这对我有用。在正则表达式测试器上测试。

\([1-9][0-9]{2}\)[ ][1-9]{3}[-][0-9]{4}

这将用于完全匹配 (999) 999-9999 格式。

在代码中根据需要转义“\”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T11:57:23.670

使用 a`+`而不是`*`避免空格。为了避免“仅限空格”，您可以尝试以下操作：

```
"/^([ ]*[0-9\(\)\/\+\-]+[ ]*)*$/" 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-10-15T16:54:37.753

在 JavaScript 中，在下面使用：

```
function validatePhoneNumber(number) { 
    var re = /^\(\d{3}\)\s{0,1}\d{3}-\d{4}$/;
    return re.test(number);
} 
```

在 PHP 中：

```
<?php
if (preg_match("/^\(\d{3}\)\s{0,1}\d{3}-\d{4}$/", $number)) {
    //phone number is valid code
}
?> 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-10-15T18:41:17.920

想出了解决方案，每个人都建议的正则表达式不接受“（”和“）”

所以我做了这个

```
"/^\.{1}\[0-9]{3}\.{2}\[0-9]{3}\-\[0-9]{4}$/", 
```

以便它可以接受 (999) 999-9999 输入的 "(" 和 ")"

我只需要这个输入的原因是因为我有一个用于自动屏蔽的脚本，用户的每个输入都将转换为这种格式，这就是为什么我需要正则表达式验证中的特定格式。

# java - 如何反序列化 Jersey 中的对象字段

> ID：12895065
> 
> 赞同：1
> 
> 时间：2012-10-15T11:51:09.450
> 
> 标签：java, json, rest, jersey, jax-rs

我无法使用带有 JSON 数据表示的 Jersey 反序列化对象字段。字段“数据”可以包含整数、字符串、字符串列表、...或任何其他 JAXB 标记对象。

这是我的代码：

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class ReturnValue{    

    private Object data;

    public ReturnValue() { }

    public ReturnValue(Object data) {
        this.data = data;
    }

    public Object getData() {
        return data;
    }

    @Override
    public String toString() {
        return "ReturnValue [data=" + data + "]";
    }

} 
```

客户端如下所示：

```
public class MyClient {

    private String location = "http://localhost:9998/test";
    private Client client;
    private WebResource resource;

    public MyClient() {
        init();
    }

    private void init() {
        ClientConfig clientConfig = new DefaultClientConfig();
        clientConfig.getFeatures().put(JSONConfiguration.FEATURE_POJO_MAPPING, Boolean.TRUE);
        client = Client.create(clientConfig);
        resource = client.resource(location);
    }

    private void test() {
        ClientResponse response = resource.accept(MediaType.APPLICATION_JSON).get(ClientResponse.class);
        ReturnValue value = response.getEntity(ReturnValue.class);
        System.out.println(value);
    }

    public static void main(String[] args) {
        MyClient client = new MyClient();
        client.test();
    }

} 
```

那就是资源：

```
@Singleton
@Path("/test")
public class Test {

    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public Object get() {
        return Response.ok(new ReturnValue("TEST_SERVER")).build();
    }

} 
```

序列化的对象看起来正确：

```
{"data":{"@type":"xs:string","$":"TEST_SERVER"}} 
```

这是控制台上的输出：

```
ReturnValue [data={@type=xs:string, $=TEST_SERVER}] 
```

如您所见，字符串未实例化。我能做些什么来解决我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T00:21:24.303

问题是您用作in`java.lang.Object`的类型。正因为如此，JAXB 会将结果与您的数据类型（实际上是）一起编组，因此它将知道如何在客户端解组您的对象。`data``ReturnValue``String`

以下代码使用您的初始值`ReturnValue`：

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();
JAXB.marshal(new ReturnValue("cvb"), baos);
System.out.println(new String(baos.toByteArray())); 
```

将产生这个输出（见 xsi:type="xs:string"）：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<returnValue>
    <data xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"     xmlns:xs="http://www.w3.org/2001/XMLSchema" xsi:type="xs:string">cvb</data>
</returnValue> 
```

，但是如果您将 data 属性的类型更改为 String ，则由于 Jaxb 处理字符串和原语的方式，它看起来像：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<returnValue>
    <data>cvb</data>
</returnValue> 
```

类似地，您的测试将输出：

```
TEST_SERVER 
```

# asp.net-membership - WebSecurity 和长 ID

> ID：12895070
> 
> 赞同：2
> 
> 时间：2012-10-15T11:51:20.150
> 
> 标签：asp.net-membership, security, webmatrix

我希望将长数据类型（bigint）用于系统中的各种 id 值，并且 WebSecurity 类的当前实现假设 UserId 是一个 int（smallint）。

我正在考虑下载源代码并对其进行编辑以改用长数据类型。有谁知道这是否已经完成？

TIA,

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:14:03.703

如果您愿意，可以将表中的 UserId 列定义为 bigint。您只需告诉 WebSecurity 助手在[InitializeDatabaseConnection](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.websecurity.initializedatabaseconnection%28v=vs.111%29.aspx)方法中使用哪一列。

有关如何初始化 WebSecurity 帮助程序以使用现有数据库架构而不是允许它创建自己的数据库架构，请参阅这篇文章：[实现 ASP.NET Razor 安全性的最基本方法](http://www.mikepope.com/blog/displayblog.aspx?permalink=2240)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T11:14:30.490

只是为了记录，我最终将 WebSecurity 类源代码移植到我的源代码中。连同相关的成员资格和角色提供程序源代码，然后根据我的需要进行编辑。

# asp.net - 在gridview中将鼠标移动到一行上显示详细信息？

> ID：12895072
> 
> 赞同：0
> 
> 时间：2012-10-15T11:51:25.133
> 
> 标签：asp.net, gridview, mouseover

我正在使用网格视图，如果我将鼠标指向每一行，我需要在弹出窗口中的表格/网格中显示特定细节。我已经尝试了以下相同的代码，它正在工作，但在弹出窗口中只显示一行：

```
 protected void GridView1_RowCreated(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        PopupControlExtender pce = e.Row.FindControl("PopupControlExtender1") as PopupControlExtender;

        string behaviorID = "pce_" + e.Row.RowIndex;
        pce.BehaviorID = behaviorID;

        Image img = (Image)e.Row.FindControl("Image1");

        string OnMouseOverScript = string.Format("$find('{0}').showPopup();", behaviorID);
        string OnMouseOutScript = string.Format("$find('{0}').hidePopup();", behaviorID);

        img.Attributes.Add("onmouseover", OnMouseOverScript);
        img.Attributes.Add("onmouseout", OnMouseOutScript);
    }
}

 [System.Web.Services.WebMethodAttribute(),
    System.Web.Script.Services.ScriptMethodAttribute()]
    public static string GetDynamicContent(string contextKey)
    {
        string constr = ConfigurationSettings.AppSettings["ConnectionInfo"];
        SqlConnection con = new SqlConnection(constr);
        con.Open();
        string query = "SELECT * FROM Table1 WHERE field1 = '" + contextKey + "' ";

        SqlDataAdapter da = new SqlDataAdapter(query, con);
        DataTable table = new DataTable();

        da.Fill(table);

        StringBuilder b = new StringBuilder();
    b.Append("<table border='1' style='background-color:#f3f3f3; ");
    b.Append("width:350px; font-size:10pt; font-family:Verdana;' cellspacing='0' cellpadding='3'>");

    b.Append("<tr style = 'background-image: url(Images/HeaderGlassBlack.jpg); background-repeat:repeat; color:#FFC700; '><td style='width:50px;'><b>Employee</b></td>");
    b.Append("<td style='width:80px;'><b>KPI Name</b></td>");
    b.Append("<td style='width:80px;'><b>Business</b></td>");
    b.Append("<td style='width:80px;'><b>Description</b></td>");

    b.Append("<td style='width:50px;'><b>Plan Live</b></td>");
    b.Append("<td style='width:80px;'><b>Actual Live</b></td>");
    b.Append("<td style='width:80px;'><b>Plan Q1</b></td>");
    b.Append("<td style='width:80px;'><b>Actual Q1</b></td></tr>");

    b.Append("<tr>");
    b.Append("<td>" + table.Rows[0]["Emp_Name"].ToString() + "</td>");
    b.Append("<td>" + table.Rows[0]["kpi_name"].ToString() + "</td>");
    b.Append("<td>" + table.Rows[0]["Bus_Name"].ToString() + "</td>");
    b.Append("<td>" + table.Rows[0]["Description"].ToString() + "</td>");
    b.Append("<td>" + table.Rows[0]["PLAN_LIVE"].ToString() + "</td>");
    b.Append("<td>" + table.Rows[0]["ACTUAL_LIVE"].ToString() + "</td>");
    b.Append("<td>" + table.Rows[0]["PLAN_Q1"].ToString() + "</td>");
    b.Append("<td>" + table.Rows[0]["ACTUAL_Q1"].ToString() + "</td>");

    b.Append("</tr>");

    b.Append("</table>");

    return b.ToString();
} 
```

我知道我需要遍历数据集以填充动态表中的所有值，但我不知道如何实现这一点。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:01:51.440

您可以尝试使用此代码

```
b.Append("<table>");
//Here you add attributes of table
.... 
foreach(var row in table.Rows)
{

    b.Append("<tr>");
    b.Append("<td>");
    b.Append(row["Emp_Name"].ToString());
    b.Append("</td>"); 
    //here you add your differents cells
    .......
    b.Append("</tr>");
}
//Close your table
b.Append("</table>");

.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:18:44.657

为什么不使用AjaxToolkit的[悬停菜单？](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/HoverMenu/HoverMenu.aspx)

# sql - How to delete certain rows in plsql

> ID：12895074
> 
> 赞同：0
> 
> 时间：2012-10-15T11:51:29.147
> 
> 标签：sql, plsql, delete-row

I have the following problem with two tables:

table1 has

*   uid
*   name

table2 has

*   id
*   name

I want to write a sql script that deletes all rows from table1 which don't meet the condition

```
table1.uid = table2.id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:55:15.820

```
delete from table1 t1
where not exists (select 1 from table2 where id = t1.uid) 
```

或者

```
delete from table1
where uid not in (select id from table2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T11:56:29.317

```
DELETE FROM table1 
WHERE NOT EXISTS
( select table2.name
  from table2
  where table1.uid = table2.id); 
```

# java - 加载数据避免在持久性上下文中找到的实体

> ID：12895079
> 
> 赞同：1
> 
> 时间：2012-10-15T11:51:56.403
> 
> 标签：java, hibernate, postgresql, jpa, persistence

我想执行一个方法（compareEntities），它需要当前在数据库中的实体和刚刚保存的对象。在我的 DAO 中是这样的，其中 em 是 EntityManager：

```
public void save(MyObj myObj) {
    MyObj previous = null;
    MyObj current = null;
    Integer id = myObj.getId();     
    if (id == null) {
        // new
        current = em.persist(myObj);
    } else {
        previous = em.find(MyObj.class, id);
        // update
        current = em.merge(myObj);
    }
    compareEntities (previous, current);
} 
```

问题是，由于要保存的实体来自数据库并且我对其进行了一些更改，所以当我尝试从数据库中获取数据（使用 find 方法）时，我得到了更改后的数据因为实体是在持久化上下文中找到的。有什么方法可以获取数据库中的数据，而无需我对同一事务中的实体所做的更改？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T05:32:55.133

没有可靠的方法来使用具有当前附加的相同实体的修改实例的持久性上下文来查找未更改的实体。持久性提供程序可能已将更改刷新到数据库，在这种情况下，后续`SELECT`将显示*更改*的对象，因为这是事务中的当前内容。即使持久性提供程序尚未刷新更改，*规范也要求*从对相同键的调用中返回*相同的实例。*`find`不允许返回“未更改”对象。

您将需要使用另一个连接从新事务中获取数据。如何做到这一点取决于您的编程模型。在具有容器管理事务（如 EJB3）的 JTA 编程模型中，您将使用带`@TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)`注释的业务方法。在普通的 JPA 中，您将获得一个新的 EntityManager 和`find`ID 对象。

我怀疑您正在尝试实现审计日志系统，在这种情况下，您应该查看[Hibernate Envers](http://www.jboss.org/envers)、PostgreSQL[审计触发器示例](http://wiki.postgresql.org/wiki/Audit_trigger_91plus)或标准 JPA 实体侦听器，所有这些都提供了更好的方法来完成此任务。试着解释你试图解决的根本问题，这个问题的“为什么”是“如何”。

# mysql - Why stored procedure is not giving output in one string and the stored procedure executed on MySql 6.0 gives error on MySql 5.0

> ID：12895082
> 
> 赞同：0
> 
> 时间：2012-10-15T11:51:58.777
> 
> 标签：mysql, stored-procedures, plsql

I have following table structure

```
id     |      Name     | senior id

1      |   superadmin  |  -1
2      |   abc         |   1     
3      |   xyz         |   1
4      |   pqr         |   2   
5      |   vwx         |   3
6      |   stu         |   3
7      |   efg         |   4
8      |   ijk         |   3
9      |   nop         |   3
10     |   rst         |   3
11     |   uvw         |   9 
```

Here I Wrote a stored procedure which takes id as a input and will return a string of concatanated names seperated by '/' from the name associated with id to the name whose seniorid is -1.

for example if I pass the id as 10 to SP I will expect the return string as `rst/xyz/superadmin/`

Here is the stored procedure that I have written

```
DELIMITER $$;

DROP PROCEDURE IF EXISTS `mydb`.`get_list_up_to_senior`$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `get_list_up_to_senior`(id int (8))

BEGIN
DECLARE strsenior VARCHAR(250);
DECLARE strseniorlist VARCHAR(250);
DECLARE temp int(8);
SET strsenior =  '';
SET strseniorlist = '';
SET temp = id;
WHILE temp  != -1 DO
   SET  strsenior = (SELECT name FROM mydb.tblname WHERE id = temp limit 1);
   SET  temp = (SELECT seniorid FROM mydb.tblname WHERE id = temp limit 1);
   SET  strseniorlist = CONCAT(strseniorlist,strsenior,'/');
END WHILE;

SELECT strseniorlist;
END$$

DELIMITER ;$$ 
```

When I compiles this SP I get compiles with no error. But when I execute this SP; its get executed perfectly and returns

```
strseniorlist
superadmin/ 
```

1)What is wrong in my SP so that I am not getting desired output.

My database version is MySQL 6.0 and I am using Sqlyog to execute above SP.

2)When I execute the above SP on MySql 5.0 Its not get created and gives following errors

```
ERROR :

(0 row(s) affected)
(0 ms taken)

Error Code : 1064
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'PROCEDURE `get_list_up_to_senior`(id int (8))

BEGIN
DECLARE strsenior VA' at line 1
(16 ms taken) 
```

Please guide me friends in this to solve the problems Thank You!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:30:47.377

我找到了原因并回答了我的第一个问题。未获得预期输出的原因是我使用用户定义变量名“id”作为 SP 的传入参数。这个变量名“id”类似于我提到的表的列名。所以 MySql 将这个 'id' 视为局部变量而不是表列。冲突就在这里。如果您将传入参数变量名称更改为 SP 到其他不会与查询中提到的表中的列名冲突的名称。您将获得所需的输出。

谢谢你！

# javascript - 在 Safari 中检测 HTTP Live Streaming 的当前比特率

> ID：12895088
> 
> 赞同：4
> 
> 时间：2012-10-15T11:52:21.017
> 
> 标签：javascript, safari, html5-video, http-live-streaming

在 Safari 中使用 Apple Live Streaming 时，有没有办法使用 Javascript 检测当前比特率？或者，我可以检测到正在播放 .m3u8 的哪个元素吗？

我查看了[HTMLMediaElement Class Reference](http://developer.apple.com/library/safari/#documentation/AudioVideo/Reference/HTMLMediaElementClassReference/HTMLMediaElement/HTMLMediaElement.html)，但没​​有发现任何线索。src 属性总是引用 .m3u8 文件，所以这没有帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T13:31:11.197

看起来 WHATWG 正试图解决这个问题。在此处查看他们关于 HTML5 视频指标的文档：[http ://wiki.whatwg.org/wiki/Video_Metrics](http://wiki.whatwg.org/wiki/Video_Metrics)

使用 Safari Web 开发者工具，您可以看到 Webkit 在 HTMLVideoElement 上实现了以下属性：

*   webkitAudioDecodedByteCount
*   webkitDecodedFrameCount
*   webkitDroppedFrameCount
*   webkitVideoDecodedByteCount

没有太多关于这些的文档，但我发现了一些可能有用的[示例代码。](http://opensource.apple.com/source/WebCore/WebCore-1298/manual-tests/video-statistics.html)

我很想知道这些属性是否对您有用。如果您有任何见解，请发布您的反馈。

# php - 未创建 ZIP 文件，但未触发任何错误

> ID：12895089
> 
> 赞同：9
> 
> 时间：2012-10-15T11:52:21.180
> 
> 标签：php, file, zip, ziparchive

我正在使用 ZipArchive：

```
function zip_dir($source, $target){

    $iterator = new \RecursiveIteratorIterator(new \RecursiveDirectoryIterator($source, \FilesystemIterator::SKIP_DOTS), \RecursiveIteratorIterator::SELF_FIRST);

    $zip = new \ZipArchive();
    if($zip->open($target, \ZipArchive::CREATE) !== true)
      exit('cannot create zip');

    foreach($iterator as $file){
      $zip->addFile($file);
      print $file . '<br>';
    }

    $zip->close();
    return $target;
}

zip_dir(__DIR__ . '/test/', __DIR__ . '/testarchive.zip'); 
```

我可以看到文件列表，但最后我找不到应该创建的 zip 文件。而且我没有收到 ZipArchive 的错误/异常...

编辑：

我添加`print $zip->getStatusString();`后`$zip->close();`

它打印：无法打开文件：权限被拒绝”。这是什么意思？我确定每个目录都是可写的，因为我可以在其中创建带有 PHP 的新文件......

编辑2：

```
if(is_writable(dirname($target)))
  print 'target dir is writable...'; 
```

它打印出来，所以目录是可写的。感觉自己在暮光之城...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-15T12:07:22.263

来自 php.net 的两条评论

如果您将多个文件添加到一个 zip 并且您的`$zip->close()`调用返回 FALSE，请确保您添加的所有文件确实存在。`$zip->addFile()`即使文件实际上不存在，显然也会返回 TRUE。在调用每个文件时`file_exists()`或之前检查每个文件是个好主意。`is_readable()``$zip->addFile()`

和

伙计们，不要忘记检查 zip 是否为空 - 否则根本不会创建 zip，并且服务器不会发出警告！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-15T15:19:49.713

听起来您有权限问题，要么是写入 zip 文件，要么是读取它正在压缩的文件。

我会使用 、 和 的组合`file_exists`来`is_readable`找出`is_writable`导致问题的原因。

```
function zip_dir($source, $target){

    $iterator = new \RecursiveIteratorIterator(new \RecursiveDirectoryIterator($source, \FilesystemIterator::SKIP_DOTS), \RecursiveIteratorIterator::SELF_FIRST);

    $zip = new \ZipArchive();
    if($zip->open($target, \ZipArchive::CREATE) !== true)
      exit('cannot create zip');

    foreach($iterator as $file){
      if (!file_exists($file)) { die($file.' does not exist'); }
      if (!is_readable($file)) { die($file.' not readable'); }
      $zip->addFile($file);
      print $file . '<br>';
    }

    $zip->close();
    return $target;
}

if (!is_writable(__DIR__)) { die('directory not writable'); }
zip_dir(__DIR__ . '/test/', __DIR__ . '/testarchive.zip'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-21T08:57:31.990

确保：

*   添加的所有文件实际上都存在（在调用之前`file_exists()`检查每个文件）。`is_readable()``$zip->addFile()`
*   迭代文件夹时，**排除`.`和`..`**.
*   至少有一个要压缩的文件 ( `$zip['numFiles'] > 0`)。
*   调用`$zip->close()`返回`TRUE`。

# sql - PLI 关键字的用途是什么？

> ID：12895090
> 
> 赞同：5
> 
> 时间：2012-10-15T11:52:38.117
> 
> 标签：sql, sql-server-2008, stored-procedures

在 ms sql 2008 中编写一些存储过程时，当我输入一些变量名时，我注意到 PLI 作为关键字突出显示。

有谁知道 PLI 的用途是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:55:12.843

您可以在 MSDN 上查看此类信息：

请参阅：http: [//support.microsoft.com/kb/125948](http://support.microsoft.com/kb/125948)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-26T19:34:42.457

`PLI`是对编程语言[PL/I](https://en.wikipedia.org/wiki/PL/I)的引用。它是[SQL-99`MODULE`语句](https://mariadb.com/kb/en/sql-99/module-statement/)中的一个关键字，用于指示 PL/I 编程语言应调用 SQL 客户端模块（因此 SQL 客户端模块必须支持哪些调用约定。）现在，SQL Server 不支持`MODULE`语句，那为什么会被标记为关键字呢？我只能推测，但一个可能的原因是，如果他们决定在未来实现这种语法，他们希望让他们的选择保持开放。

# sql - 我们可以通过巡航控制编译SQL语句吗

> ID：12895091
> 
> 赞同：2
> 
> 时间：2012-10-15T11:52:48.993
> 
> 标签：sql, clearcase, cruisecontrol

您能否告诉我们如何通过 Cruise control 编译 SQL 程序。

这些程序将在清晰的情况下出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:54:10.223

如“[与 IBM Rational ClearCase Remote Client 持续集成](http://www.ibm.com/developerworks/rational/library/09/continuousintegrationrationalclearcaseremoteclient/)”中所示，您可以使用 CruiseControl 和 ClearCase 编译任何您想要的内容：

![抄送](../Images/34d44f4473a6a6dcfc7b42636a0bea0c.png)

只需从 ClearCase 获取文件的正确（或最新）版本，并在所述文件上启动正确的脚本（如一个编译 SQL 过程）。

# c# - 禁用和隐藏 TabPage

> ID：12895092
> 
> 赞同：18
> 
> 时间：2012-10-15T11:52:50.147
> 
> 标签：c#, .net, winforms, tabcontrol, tabpage

我怎样才能使一个`TabPage`可见`TabControl`/隐藏和启用/禁用？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-15T12:44:20.920

*   **启用/禁用**

    [`tabPage.Enabled`](http://msdn.microsoft.com/en-us/library/bw007wkt.aspx)似乎工作正常，但被标记为“不使用” ：

    > 此 API 支持 .NET Framework 基础结构，不打算直接从您的代码中使用。
    > 该成员对该控件没有意义。

    因此，您应该通过禁用选项卡中的每个控件来禁用选项卡页。例如看[这个](https://stackoverflow.com/a/418043/825024)。

*   **显示隐藏**

    有一个现有的 [`tabPage.Visible`](http://msdn.microsoft.com/en-us/library/y6e1ah1k.aspx)属性，但它似乎没有任何效果。此外，它还被标记为“不使用”，msdn 建议将标签页从选项卡控件中删除以隐藏它：

    ```
    // Hide the tab page
    tabControl.TabPages.Remove(tabPage1);
    // Show the tab page (insert it to the correct position)
    tabControl.TabPages.Insert(0, tabPage1); 
    ```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-07T01:09:02.827

我也有这个问题。tabPage.Visible 没有如前所述实现，这是一个很大的帮助（+1）。我发现您可以覆盖控件，这将起作用。有点 necroposting，但我想在这里为其他人发布我的解决方案......

```
 [System.ComponentModel.DesignerCategory("Code")]
public class MyTabPage : TabPage
{
    private TabControl _parent;
    private bool _isVisible;
    private int _index = int.MinValue;
    public new bool Visible
    {
        get { return _isVisible; }
        set
        {
            if (_parent == null) _parent = this.Parent as TabControl;
            if (_parent == null) return;

            if (_index < 0) _index = _parent.TabPages.IndexOf(this);
            if (value && !_parent.TabPages.Contains(this))
            {
                if (_index > 0 && _index < _parent.TabPages.Count) _parent.TabPages.Insert(_index, this);
                else _parent.TabPages.Add(this);
            }
            else if (!value && _parent.TabPages.Contains(this)) _parent.TabPages.Remove(this);

            _isVisible = value;
            base.Visible = value;
        }
    }

    protected override void InitLayout()
    {
        base.InitLayout();
        _parent = Parent as TabControl;
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-15T12:02:03.137

您可能会错过明显的内容，因为以下都不会删除/更改选项卡的外观

```
 tabPage1.Enabled = false; // this disables the controls on it
        tabPage1.Visible = false; // this hides the controls on it. 
```

也不要从顶部的列表中删除选项卡。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-07-08T01:09:49.947

```
//Move&Add is not good answer   
this.tabPage1.Parent = null; // hide    
this.tabPage1.Parent = this.tabControl1; //show 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-15T12:00:56.773

我不知道启用/禁用（也许尝试禁用它的所有控件）。如果您想隐藏它们，只需将它们从 Items 集合中删除即可。如果您希望它们再次可见，您可以再次将它们添加回控件。不过，您必须注意它们的顺序（将它们的引用存储在某个列表中，或者您可以有两个列表来保存对可见和不可见的 TabPages 的引用）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-03-07T10:01:29.427

我们可以使用`TABPAGE.ENABLE=true`和来启用或禁用标签页`TABPAGE.ENABLE=FALSE`。

但是可见属性不能应用于标签页。我们可以代替可见属性，我们可以这样做。

```
 private void HideTabPage(TabPage tp)
 {
 if (tabControl1.TabPages.Contains(tp))
 tabControl1.TabPages.Remove(tp);
 }

private void ShowTabPage(TabPage tp)
{
 ShowTabPage(tp, tabControl1.TabPages.Count);
 }

private void ShowTabPage(TabPage tp , int index)
{
 if (tabControl1.TabPages.Contains(tp)) return;
 InsertTabPage(tp, index);
}

 private void InsertTabPage(TabPage tabpage, int index)
{
   if (index < 0 || index > tabControl1.TabCount)
  throw new ArgumentException("Index out of Range.");
   tabControl1.TabPages.Add(tabpage);
   if (index < tabControl1.TabCount - 1)
   do 
    {
    SwapTabPages(tabpage, (tabControl1.TabPages[tabControl1.TabPages.IndexOf(tabpage) - 1]));
     }
    while (tabControl1.TabPages.IndexOf(tabpage) != index);
    tabControl1.SelectedTab = tabpage;
  }
   private void SwapTabPages(TabPage tp1, TabPage tp2)
     {
    if (tabControl1.TabPages.Contains(tp1) == false ||tabControl1.TabPages.Contains(tp2) == false)
        throw new ArgumentException("TabPages must be in the TabControls TabPageCollection.");

     int Index1 = tabControl1.TabPages.IndexOf(tp1);
     int Index2 = tabControl1.TabPages.IndexOf(tp2);
     tabControl1.TabPages[Index1] = tp2;
     tabControl1.TabPages[Index2] = tp1;
    tabControl1.SelectedIndex = tabControl1.SelectedIndex; 
    string tp1Text, tp2Text;
    tp1Text = tp1.Text;
    tp2Text = tp2.Text;
    tp1.Text=tp2Text;
    tp2.Text=tp1Text;
     } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-05-13T12:35:42.320

```
// Hide TabPage and Remove the Header
this.tabPage1.Hide();
this.tabPage3.Hide();
this.tabPage5.Hide();
tabControl1.TabPages.Remove(tabPage1);
tabControl1.TabPages.Remove(tabPage3);
tabControl1.TabPages.Remove(tabPage5);

// Show TabPage and Visible the Header
tabControl1.TabPages.Insert(0,tabPage1);
tabControl1.TabPages.Insert(2, tabPage3);
tabControl1.TabPages.Insert(4, tabPage5);
this.tabPage1.Show();
this.tabPage3.Show();
this.tabPage5.Show();
tabControl1.SelectedTab = tabPage1; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-15T11:59:53.437

`tabPage.Enabled`和`tabPage.Visible`属性呢？

仅供参考：http: [//msdn.microsoft.com/en-us/library/8fb09fh2.aspx](http://msdn.microsoft.com/en-us/library/8fb09fh2.aspx)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-05-24T04:40:44.733

放入隐藏使用`tabpage`_`panel``panel`

```
this.panel1.visible=false; 
```

它对我有用！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-08-15T14:45:27.217

根据@Otiel 的回答，我做了这两个功能：

## 要切换可见性：

```
bool toggleTabPageVisibility(TabControl tc, TabPage tp)
{
    //if tp is already visible
    if (tc.TabPages.IndexOf(tp) > -1)
    {
        tc.TabPages.Remove(tp);
        //no pages to show, hide tabcontrol
        if(tc.TabCount == 0)
        {
            tc.Visible = false;
        }
        return false;
    }
    //if tp is not visible
    else
    {
        tc.TabPages.Insert(tc.TabCount, tp);
        //guarantee tabcontrol visibility
        tc.Visible = true;
        tc.SelectTab(tp);
        return true;
    }
} 
```

## 要设置可见性：

```
void setTabPageVisibility(TabControl tc, TabPage tp, bool visibility)
{
    //if tp is not visible and visibility is set to true
    if ((visibility == true) && (tc.TabPages.IndexOf(tp) <= -1))
    {
        tc.TabPages.Insert(tc.TabCount, tp);
        //guarantee tabcontrol visibility
        tc.Visible = true;
        tc.SelectTab(tp);
    }
    //if tp is visible and visibility is set to false
    else if ((visibility == false) && (tc.TabPages.IndexOf(tp) > -1))
    {
        tc.TabPages.Remove(tp);
        //no pages to show, hide tabcontrol
        if(tc.TabCount == 0)
        {
            tc.Visible = false;
        }
    }
    //else do nothing
} 
```

# jquery - 使用字符串中的 <> 调用 JQuery.Ajax

> ID：12895095
> 
> 赞同：0
> 
> 时间：2012-10-15T11:52:55.903
> 
> 标签：jquery, ajax, string, inequality

我有一个简单的 jquery ajax 调用来更新输入框中的数据。当我在输入中有任何标记时，例如`<div>`它不会进入控制器。有关如何调用 ajax 并保存到其中包含 html 代码标记的数据库 texxt 的任何帮助

```
$.ajax({
  type:post,
  url: "/dom/updatelement",
  data: "name="+name+&id="+id
}); 
```

其中`name`可能包含标记。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T11:55:46.710

以下是在 POST 请求中发送数据的正确方法：

```
$.ajax({
  type: 'post',
  url: '/dom/updatelement',
  data: { name: name, id: id }
}); 
```

jQuery 将确保在使用此语法时正确地对数据进行 url 编码。

您当然可以使用以下[`encodeURIComponent`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)方法手动完成此操作：

```
$.ajax({
  type: 'post',
  url: '/dom/updatelement',
  data: 'name=' + encodeURIComponent(name) + '&id=' + encodeURIComponent(id)
}); 
```

但老实说，第一种方法似乎更具可读性和可取性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T11:56:10.827

首先，您应该进行正确的 Ajax 调用：

```
$.ajax({
    type: "POST",
    url: "/dom/updatelement",
    data: {
        name: name,
        id: id
    }
}); 
```

接下来，您可以使用特殊函数（例如在 PHP 中）在控制器部分`<`或控制器部分转换字符。`>`[`htmlspecialchars()`](http://php.net/manual/en/function.htmlspecialchars.php)

# webgl - 新版本中的粒子系统问题

> ID：12895097
> 
> 赞同：2
> 
> 时间：2012-10-15T11:53:02.280
> 
> 标签：webgl, three.js, fbo, rendertarget

在我寻找一种渲染云状纹理的方法时，我了解到我需要使用纹理等来存储下一帧的数据。进一步研究这让我找到了一些使用 FBO 和 webgl 渲染目标进行粒子的示例。即使听起来不错，似乎任何示例都可以在更新版本的threejs（如50或51）中使用。如果我要切换到three49，它将呈现它应该如何。

为了说明这个问题，我做了这个（[小提琴](http://jsfiddle.net/6pdpQ/1/)）：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <style>
            body {
                font-family: Monospace;
                background-color: #000000;
                margin: 0px;
                overflow: hidden;
            }

            #info {
                color: #ffffff;
                font-family: Monospace;
                font-size: 13px;
                text-align: center;
                font-weight: bold;
                position: absolute;
                top: 0px;
                width: 100%;
                padding: 5px;
            }

            a {

                color: #0040ff;
            }
        </style>
    </head>
    <body>

        <script type="text/javascript">
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-86951-7']);
            _gaq.push(['_trackPageview']);

            (function()
            {
                var ga = document.createElement('script');
                ga.type = 'text/javascript';
                ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
            })();
        </script>

        <!--         <script src="helvetiker_bold.typeface.js"></script> -->

        <script id="texture_vertex_simulation_shader" type="x-shader/x-vertex">

            varying vec2 vUv;

            void main() {

            vUv = vec2(uv.x, 1.0 - uv.y);
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

            }

        </script>
        <script id="texture_fragment_simulation_shader" type="x-shader/x-fragment">

            // simulation
            varying vec2 vUv;

            uniform vec3 origin;
            uniform sampler2D tPositions;

            uniform float timer;

            float rand(vec2 co){
            return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
            }

            void main() {

            vec3 pos = texture2D( tPositions, vUv ).xyz;

            if ( rand( vUv + timer ) > 0.99 ) {

            pos = origin;

            vec3 random = vec3( rand( vUv + 1.0 ) - 1.0, rand( vUv + 2.0 ) - 1.0, rand( vUv + 3.0 ) - 1.0 );
            pos += normalize( random ) * rand( vUv + 1.0 );

            } else {

            float x = pos.x + timer;
            float y = pos.y;
            float z = pos.z;

            pos.x += sin( y * 3.3 ) * cos( z * 10.3 ) * 0.005;
            pos.y += sin( x * 3.5 ) * cos( z * 10.5 ) * 0.005;
            pos.z += sin( x * 3.7 ) * cos( y * 10.7 ) * 0.005;

            }

            // Write new position out
            gl_FragColor = vec4(pos, 1.0);

            }

        </script>

        <!-- zz85 - end simulations -->

        <script id="vs-particles" type="x-shader/x-vertex">

            uniform sampler2D map;

            uniform float width;
            uniform float height;

            uniform float pointSize;

            varying vec2 vUv;
            varying vec4 vPosition;
            varying vec4 vColor;

            void main() {

            vec2 uv = position.xy + vec2( 0.5 / width, 0.5 / height );
            vec3 color = texture2D( map, uv ).rgb * 200.0 - 100.0;

            gl_PointSize = pointSize;
            gl_Position = projectionMatrix * modelViewMatrix * vec4( color, 1.0 );

            }

        </script>

        <script id="fs-particles" type="x-shader/x-fragment">

            uniform vec4 pointColor;

            void main() {

            gl_FragColor = pointColor;

            }

        </script>

        <script>

                        var container;

            var scene, camera, light, renderer;
            var geometry, cube, mesh, material;

            var data, texture, points;

            var controls;

            var fboParticles, rtTexturePos, rtTexturePos2, simulationShader;

            init();
            animate();

            function init() {

            container = document.createElement( 'div' );
            document.body.appendChild( container );

            renderer = new THREE.WebGLRenderer();
            renderer.setSize( window.innerWidth, window.innerHeight );
            container.appendChild( renderer.domElement );

            scene = new THREE.Scene();

            camera = new THREE.PerspectiveCamera( 50, window.innerWidth / window.innerHeight, 1, 1000 );
            scene.add( camera );

            controls = new THREE.OrbitControls2( camera );
            controls.radius = 400;
            controls.speed = 3;

            //

            var width = 1024, height = 1024;
            // var width = 64, height = 64;
            // var width = 128, height = 128;

            if ( ! renderer.context.getExtension( 'OES_texture_float' ) ) {

            alert( 'OES_texture_float is not :(' );

            }

            // Start Creation of DataTexture
            // Could it be simplified with THREE.FBOUtils.createTextureFromData(textureWidth, textureWidth, data); ?

            data = new Float32Array( width * height * 3 );

            texture = new THREE.DataTexture( data, width, height, THREE.RGBFormat, THREE.FloatType );
            texture.minFilter = THREE.NearestFilter;
            texture.magFilter = THREE.NearestFilter;
            texture.needsUpdate = true;

            // zz85 - fbo init

            rtTexturePos = new THREE.WebGLRenderTarget(width, height, {
            wrapS:THREE.RepeatWrapping,
            wrapT:THREE.RepeatWrapping,
            minFilter: THREE.NearestFilter,
            magFilter: THREE.NearestFilter,
            format: THREE.RGBFormat,
            type:THREE.FloatType,
            stencilBuffer: false
            });

            rtTexturePos2 = rtTexturePos.clone();

            simulationShader = new THREE.ShaderMaterial({

            uniforms: {
            tPositions: { type: "t", value: 0, texture: texture },
            origin: { type: "v3", value: new THREE.Vector3() },
            timer: { type: "f", value: 0 }
            },

            vertexShader: document.getElementById('texture_vertex_simulation_shader').textContent,
            fragmentShader:  document.getElementById('texture_fragment_simulation_shader').textContent

            });

            fboParticles = new THREE.FBOUtils( width, renderer, simulationShader );
            fboParticles.renderToTexture(rtTexturePos, rtTexturePos2);

            fboParticles.in = rtTexturePos;
            fboParticles.out = rtTexturePos2;

            geometry = new THREE.Geometry();

            for ( var i = 0, l = width * height; i < l; i ++ ) {

            var vertex = new THREE.Vector3();
            vertex.x = ( i % width ) / width ;
            vertex.y = Math.floor( i / width ) / height;
            geometry.vertices.push( vertex );

            }

            material = new THREE.ShaderMaterial( {

            uniforms: {

            "map": { type: "t", value: 0, texture: rtTexturePos },
            "width": { type: "f", value: width },
            "height": { type: "f", value: height },

            "pointColor": { type: "v4", value: new THREE.Vector4( 0.25, 0.50, 1.0, 0.25 ) },
            "pointSize": { type: "f", value: 1 }

            },
            vertexShader: document.getElementById( 'vs-particles' ).textContent,
            fragmentShader: document.getElementById( 'fs-particles' ).textContent,
            blending: THREE.AdditiveBlending,
            transparent: true,
            depthWrite: false,
            depthTest: false

            } );

            mesh = new THREE.ParticleSystem( geometry, material );
            scene.add( mesh );

            var gui = new dat.GUI();
            gui.add( material.uniforms.pointColor.value, 'x', 0.0, 1.0 ).name( 'red' );
            gui.add( material.uniforms.pointColor.value, 'y', 0.0, 1.0 ).name( 'green' );
            gui.add( material.uniforms.pointColor.value, 'z', 0.0, 1.0 ).name( 'blue' );
            gui.add( material.uniforms.pointColor.value, 'w', 0.0, 1.0 ).name( 'alpha' );
            gui.add( material.uniforms.pointSize, 'value', 0.0, 10.0 ).name( 'size' );
            gui.add( controls, 'enabled' ).name( 'auto move' );

            scene.add( new THREE.Mesh( new THREE.CubeGeometry( 500, 500, 500 ), new THREE.MeshBasicMaterial( { color: 0xffffff, wireframe: true, opacity: 0.15 } ) ) );

            }

            function animate() {

            requestAnimationFrame( animate );
            render();

            }

            var timer = 0;

            function render() {

            timer += 0.01;

            simulationShader.uniforms.timer.value = timer;
            simulationShader.uniforms.origin.value.x = Math.sin( timer * 2.3 ) * 0.5 + 0.5;
            simulationShader.uniforms.origin.value.y = Math.cos( timer * 2.5 ) * 0.5 + 0.5;
            simulationShader.uniforms.origin.value.z = Math.sin( timer * 2.7 ) * 0.5 + 0.5;

            // swap
            var tmp = fboParticles.in;
            fboParticles.in = fboParticles.out;
            fboParticles.out = tmp;

            simulationShader.uniforms.tPositions.texture = fboParticles.in;
            fboParticles.simulate(fboParticles.out);
            material.uniforms.map.texture = fboParticles.out;

            controls.update();

            renderer.render( scene, camera );

            }

        </script>
    </body>
</html> 
```

这是 mrdoob 用于的代码`magicdust`，您可以在那里看到如何只渲染一个粒子而不是所有粒子。此外，几乎（如果不是全部）来自[https://github.com/mrdoob/three.js/issues/1183](https://github.com/mrdoob/three.js/issues/1183)的示例都不起作用。

所以我的问题是：

1.  谁能告诉我我能做些什么来解决这个问题？
2.  （即使标题中没有提到）谁能给我一个关于如何使用最后一帧计算下一帧的基本且简单但相关的示例？我想这是我的云模拟所需要的。

**编辑1：**

调查这个问题，似乎所有粒子都渲染在同一个地方。并且粒子系统对象上的缩放只会在一个轴或另一个轴上移动它。（就好像它们被几何的边界推到了一起……）

有谁知道如何解决这个问题？

**编辑2：**

似乎它们以某种方式呈现，但从一个版本到另一个版本，它们的尺寸和比例不同。我设法以某种方式在three52中看到了它们，将相机移动到非常接近0,0,0的地方，它们在那里，但现在就像我所期望的那样立方体，而是一个简单的平面。在three51中，我需要使用的，根本没有。

那么，任何人都可以告诉我如何使用粒子系统吗？

# c# - 如何在asp.net中回发后将焦点设置在文本框上

> ID：12895098
> 
> 赞同：6
> 
> 时间：2012-10-15T11:53:06.030
> 
> 标签：c#, asp.net, asp.net-ajax, updatepanel

我在更新面板中有一个文本框。当用户输入内容时，我从数据库中获取相关数据并将其填充到另一个文本框中。我的问题是，在任何文本框上的自动回发焦点都丢失了。我如何使用 javascript 或代码来管理它，因为我使用的代码和我使用的代码一样

```
 System.Web.UI.ScriptManager.GetCurrent(this).SetFocus(this.txtReference); 
```

和 javascript 我又找到了一个

```
 <script type="text/javascript">
    var postbackElement;
    Sys.WebForms.PageRequestManager.getInstance().add_beginRequest(beginRequest);
    Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(pageLoaded);

    function beginRequest(sender, args) {
        postbackElement = args.get_postBackElement();
    }

    function pageLoaded(sender, args) {
        var updatedPanels = args.get_panelsUpdated();
        if (typeof (postbackElement) === "undefined") {
            alert('if Loop');
            return;
        }
        else if (postbackElement.id.toLowerCase().indexOf('button1') > -1) {
        alert('else');
            for (i = 0; i < updatedPanels.length; i++) {

                document.getElementById('<%= txtAcctNo.ClientID %>').focus();
            }
        }

    }
</script> 
```

但不工作，因为'button1 undefined'。我放在那里是因为所有事件都在 aspx 页面中的 OnTextChanged="" 上执行。

所以请通过代码或javascript帮助我，我该怎么做。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-15T12:06:56.850

我建议你试试`SetFocus method server side`

```
Page.SetFocus(IdOfControl); 
```

# function - 如何将参数化函数别名为powershell脚本中的标志？

> ID：12895099
> 
> 赞同：1
> 
> 时间：2012-10-15T11:53:11.330
> 
> 标签：function, powershell, alias, flags

我有一个 PS 脚本，其中包含一些功能。我需要的是我应该能够将特定函数作为别名或变量标志传递给 PS 脚本。

例如：假设我有一个 TestFunc.ps1 文件，它有如下两个函数

```
$XmlFilePath = "C:\XmlPath\file1.xml
Function ParseXml($XmlFilePath)
{
#Do Something
}

Function CreateReport($XmlFilePath)
{
#Do Something
} 
```

现在如何为这两个函数（ParseXml 和 CreateReport）创建一个别名，以便我可以将它们中的每一个作为标志（使用它们的别名）传递给脚本？例如：我应该能够执行以下操作：

```
. .\TestFunc.ps1 -Xml #This must be able to execute the ParseXml($XmlFilePath) function for me
. .\TestFunc.ps1 -Report #This must execute CreateReport($XmlFilePath) function 
```

任何帮助将不胜感激。我一直在这方面挣扎了一段时间。

谢谢！阿舒

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T13:47:16.747

您可以在脚本中添加一些开关参数并测试它们是否已设置：

```
param( [switch]$xml, [switch]$Report)    

Function ParseXml($XmlPath)
{
  "Parse"
}

Function CreateReport($XmlPath)
{
  "Report"
}

 $XmlPath = "C:\XmlPath\file1.xml"

if ($xml) 
    { 
        ParseXml $XmlPath 
    } 
if ($Report)
    {    
        CreateReport $xmlPath     
    } 
```

# facebook-graph-api - Facebook 广告 API 如何获得帐户留下的信用？

> ID：12895102
> 
> 赞同：2
> 
> 时间：2012-10-15T11:53:22.697
> 
> 标签：facebook-graph-api, facebook-ads-api

我无法在 Facebook 广告 API 中找到一种方法来获得 Facebook 广告帐户的信用。

似乎这是 ads api 中唯一不可用的信息？ [http://developers.facebook.com/docs/reference/ads-api/adaccount/](http://developers.facebook.com/docs/reference/ads-api/adaccount/)

任何想法在哪里可以找到这些信息？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:38:27.827

“平衡”属性应该是您正在寻找的属性。它没有记录，但它是对 adaccount 对象 (act_XXX) 的响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-23T15:49:08.967

余额只是未支付给帐户的金额。如果您正在管理数十个信用分散的帐户，则无法查看整个帐户的余额

# jquery - 在 Jquery 中为弹出窗口获取 Post ID

> ID：12895104
> 
> 赞同：1
> 
> 时间：2012-10-15T11:53:30.643
> 
> 标签：jquery, wordpress, popup, modal-dialog

我想使用 jquery 在 modalbox 上显示帖子详细信息。我已经尝试了以下代码。

显示模态框的链接

```
<?php $args = array( 'post_status' => 'publish', 'post_type' => 'post', 'orderby' => 'post_date' );
query_posts( $args );
if (have_posts()) :
    while (have_posts()) : the_post();
        ?>  
    <p><a class="modalbox" id="postlink"  href="#inline">Open Popup</a></p>
        <?php
    endwhile;
    wp_reset_query();
endif;
?> 
```

显示模态框的代码（它的值是在css中显示：无，当我点击链接时，弹出显示。

```
<div id="inline">
    <h2 id="#heading"></h2>
    <p></p>
    <a href="#">Read More</a>

</div> 
```

jQuery代码

```
<script type="text/javascript">
    $(document).ready(function() {
        $(".modalbox").fancybox();
    });
</script> 
```

如何在 jquery 中获取帖子 ID，以便在弹出窗口中显示特定的帖子详细信息。如果无法在 jquery 中获取 ID 和发布详细信息，请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:10:53.790

do you mean something like:

```
...
while (have_posts()) : the_post();
        ?>  
    <p><a class="modalbox" rel="<?php echo $post->ID; ?>" href="#inline">Open Popup</a></p>
.... 
```

Jquery Code

```
<script type="text/javascript">
    $(document).ready(function() {
        $(".modalbox").on("click", function() {
           var postId = $(this).prop("rel"); //post id stored in rel attribute
           $(this).fancybox();
           ......
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:17:00.313

我从未使用过 wordpress，但文档中说：

```
if (have_posts()) :
while (have_posts()) : the_post();
?>  
     <p><a class="modalbox" id="<?php the_ID(); ?>"  href="#inline">Open Popup</a></p>
<?php
    endwhile;
    wp_reset_query();
endif; 
```

# mysql - 将一个 SQL 查询的结果添加到另一个查询

> ID：12895106
> 
> 赞同：4
> 
> 时间：2012-10-15T11:53:31.663
> 
> 标签：mysql, sql

我现在不太了解 SQL 查询，我有一个问题

```
SELECT PERSON_REF 
FROM   IMAGES 
WHERE  PERSON_REF IN (SELECT _PERSON_ID 
                      FROM   PERSONS 
                      WHERE  REGION_REF = (SELECT _REGION_ID 
                                           FROM   REGIONS 
                                           WHERE  REGION_ABB = "EU")) 
GROUP  BY PERSON_REF 
HAVING Count(PERSON_REF) >= 3 
```

这个查询给出了我的结果

```
2  
4  
5  
6 
```

现在我想在其他查询中使用该结果，如何做到这一点，我需要创建循环还是有其他方法

```
SELECT PERSON_REF 
FROM   IMAGES 
WHERE  EFFECT_REF = 2 
       AND PERSON_REF IN ( 2, 4, 5, 6 ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:56:05.670

```
select Person_Ref from Images  where Person_Ref IN ( 
Select _Person_ID from Persons where
Region_Ref in (select _Region_ID from Regions where Region_Abb = "EU"))
and EFFECT_REF = 2 
group by Person_Ref HAVING COUNT(Person_Ref) >= 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T11:56:10.177

尝试这个：

```
select Person_Ref from Images where Effect_Ref = 2 and Person_Ref IN 
( your first query which gives 2 4 5 6) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T11:59:20.490

`JOIN`三个表`Images`，`Persons`而`Regions`不是这些`IN`s 和子查询：

```
 SELECT i.Person_Ref 
 FROM Images i
 INNER JOIN Persons p ON i.Person_Ref = p.Person_Ref
 INNER JOIN Regions r ON p.Region_Ref = r.Region_Ref
 WHERE r.Region_Abb = "EU"
   AND i.Effect_Ref = 2 
 GROUP BY i.Person_Ref 
 HAVING COUNT(i.Person_Ref) >= 3 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T11:57:48.193

Try this:

```
SELECT PERSON_REF 
FROM   IMAGES 
WHERE  EFFECT_REF = 2 
       AND PERSON_REF IN (SELECT PERSON_REF 
                          FROM   IMAGES 
                          WHERE  PERSON_REF IN (SELECT _PERSON_ID 
                                                FROM   PERSONS 
                                                WHERE 
                                 REGION_REF = (SELECT _REGION_ID 
                                               FROM   REGIONS 
                                               WHERE 
                                 REGION_ABB = "EU")) 
                          GROUP  BY PERSON_REF 
                          HAVING Count(PERSON_REF) >= 3) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T18:35:40.557

只需将 AND 添加到第一个谓词并指定另一个谓词。

从 PERSON_REF IN 的图像中选择 PERSON_REF（从 REGION_REF =（从 REGION_ABB = "EU"）的区域中选择 _REGION_ID

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-15T12:08:44.297

有几种方法可以做到这一点。您可以使用已经插入的 IN 示例，但它仅在您只需要一列时才有效（这是您的情况，我知道，但是如果您遇到需要更多信息的情况，很高兴知道您可以做什么列）

最简单的方法是将您的查询包装到 parentesys 中并给它一个别名，这样您就可以像使用表一样使用它：

```
(SELECT PERSON_REF 
FROM   IMAGES 
WHERE  PERSON_REF IN (SELECT _PERSON_ID 
                      FROM   PERSONS 
                      WHERE  REGION_REF = (SELECT _REGION_ID 
                                           FROM   REGIONS 
                                           WHERE  REGION_ABB = "EU")) 
GROUP  BY PERSON_REF 
HAVING Count(PERSON_REF) >= 3 ) MY_ALIAS 
```

然后你可以加入你的其他查询。不过，这通常不是一个好方法。

最好的方法是使用公用表表达式 (CTE)，因此您可以执行以下操作：

```
with MY_FIRST_QUERY as(
SELECT PERSON_REF 
    FROM   IMAGES 
    WHERE  PERSON_REF IN (SELECT _PERSON_ID 
                          FROM   PERSONS 
                          WHERE  REGION_REF = (SELECT _REGION_ID 
                                               FROM   REGIONS 
                                               WHERE  REGION_ABB = "EU")) 
    GROUP  BY PERSON_REF 
    HAVING Count(PERSON_REF) >= 3 
)
select MY_FIRST_QUERY.PERSON_REF 
```

你可以随心所欲地加入它

# jquery - CSS3增加圆圈和文本之间的空间

> ID：12895110
> 
> 赞同：0
> 
> 时间：2012-10-15T11:53:57.757
> 
> 标签：jquery, html, css

**CSS3增加圆圈和文字的空间**

我有这个填充代码没有任何区别，即使我删除了填充仍然没有：

```
 ul.lists_index { line-height:10px; padding:0 0 -10px 0;}
   ul.lists_index li{ line-height:20px;} 
```

是否有可能有代码来增加蓝色圆圈顶部和文本底部的空间？

[对齐顶部 http://www.kerrydeaf.com/circle_space.png](http://www.kerrydeaf.com/circle_space.png "工具提示")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:05:58.423

在你的 CSS 中添加这个 -

```
#content_index_right ul li:nth-child(odd){ padding: 10px 0;} 
```

如果您需要旧 IE 浏览器的支持，请使用 jquery 并添加-

```
$('#content_index_right ul li:odd').css('padding', '10px 0'); 
```

# ssis - 带有 WF4 的 SQL Server 集成服务

> ID：12895114
> 
> 赞同：1
> 
> 时间：2012-10-15T11:54:05.247
> 
> 标签：ssis, workflow-foundation-4

我必须使用以下要求将日期从 exel 导出到 Sql 1\. excel 中的模式与 SQL 不同。就像 excel 中的一行将根据业务逻辑和单元格中存在的值在 SQL 中插入多行一样。2\. 在 sql 中插入数据之前，我必须应用商业规则。在某些情况下，数据对于在 sql 中的插入无效。

我可以将 SSIS 与 WF4 一起使用吗？与 SSIS 一样，我将提取和加载数据，转换将由 Wf4/ 完成

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:11:21.390

To strictly answer the question, maybe. The 60 second read I had of WF4, is that it ships with with VS 2010 and uses .NET 4 framework. 2008 R2 only supports the 3.5 framework in script tasks and components.

That said, if you continue adding layers and use something like WCF, then you should be able to provide a web service interface and then you can do whatever work flow stuff inside the service.

But, doing any of that seems crazy to me. SSIS is an ETL engine. ETL is Extract, Transform and Load so you're adding what is probably unnecessary layers of complexity to your work. Need to split 1 row into many rows in SSIS? That could be a multicast, unpivot or script task depending on your needs.

Conversely, if you have all the work done in WF4 already, write the reader and writer yourself-it's trivial.

# microsoft-metro - 使用库中的页面时出现 XamlParseException

> ID：12895116
> 
> 赞同：2
> 
> 时间：2012-10-15T11:54:10.610
> 
> 标签：microsoft-metro, winrt-xaml, xamlparseexception

我最近开始了一个应该针对 Windows RT (C#) 的项目的工作在 Silverlight 和 WPF 方面有一些背景我已经创建了一个程序集（库），它应该保存我的一些 UserControls、Pages 等以供以后使用重复使用。

我已经向该程序集添加了一个空页面。

每当我导航到该页面（使用导航机制）时，都会正确调用构造函数，但是在 InitializeComponent() 调用期间会出现非描述性 XamlParseException。

```
Message: XAML parsing failed
InnerException : null
StackTrace:    at Windows.UI.Xaml.Application.LoadComponent(Object component, Uri resourceLocator, ComponentResourceLocation componentResourceLocation)
   at Project.Modules.ImagesModule.Pages.CameraPage.InitializeComponent() in c:\Users\misztalm\Documents\Visual Studio 2012\Projects\VirtualEye\trunk\Sources\Project.Modules.ImagesModule\obj\Debug\Pages\MyPage.g.i.cs:line 30
   at Project.Modules.ImagesModule.Pages.MyPage..ctor() in c:\Users\misztalm\Documents\Visual Studio 2012\Projects\VirtualEye\trunk\Sources\Project.Modules.ImagesModule\Pages\MyPage.xaml.cs:line 20 
```

我无法确定造成这种情况的原因，所以我决定寻求一些指导。

还有其他人遇到这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:31:33.800

显然，Win RT 的代码生成存在错误。这篇博文描述了如何解决这个问题。为我工作。

[http://blog.excastle.com/2012/09/06/xamlparseexception-in-winrt/](http://blog.excastle.com/2012/09/06/xamlparseexception-in-winrt/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:40:06.357

**我使用以下场景遇到了类似的事件：**

1 - 为winRT创建一个项目（解决方案已创建）

2 - 将另一个 winRT 项目添加到解决方案中

3 - 在项目 2 中创建一个用户控件

4 - 将控件拖放到项目 1 中的页面上。

5 - 运行应用程序获取 Xaml 解析器错误

**我们针对不同的业务需求使用了 2 个解决方案：**

1 - 将项目 2 中的控件复制到名为 Controls 的子文件夹/子命名空间中的主项目。当用户控件位于将使用它们的项目中时，问题就不会存在。

2 - 如果您必须将项目 2 中的控件与项目 1 分开，跨库使用的控件必须是模板化用户控件类型，而不是更通用的用户控件类型。

我不声称知道为什么会发生这种情况......只是这两种修改在 XAML 编译器的眼中都是可以接受的。

# windows - 将 Windows 用户传递给 Access 中的字符串

> ID：12895118
> 
> 赞同：0
> 
> 时间：2012-10-15T11:54:17.153
> 
> 标签：windows, string, ms-access, ms-access-2007

有没有办法将 Windows 登录信息传递给 Access 中的字符串？我需要一种自动检测位于中央位置的多用户数据库中的用户的方法。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:13:03.147

这是我在带有 Windows XP 和 Windows 7 机器的域网络上使用的内容。我不确定它如何在非域网络上工作，或者你根本没有网络。

```
Public Function GetComputerUserName()
    Dim objnet As Object
    Set objnet = CreateObject("WScript.Network")
    GetComputerUserName = objnet.UserName
    Set objnet = Nothing
End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T13:10:18.037

The most reliable way is to use a Windows API call:

```
'This line must go at top of module
Private Declare Function WNetGetUser& Lib "Mpr" Alias _
                "WNetGetUserA" (lpName As Any, ByVal lpUserName$, lpnLength&)

Function GetUserName() As String
Const MaxNameLength As Long = 256
Dim ret As Long, UserName As String

    UserName = Space(256)
    ret = WNetGetUser(ByVal 0&, UserName, MaxNameLength)
    If ret = 0 Then
        'Success - strip off the null.
        UserName = Left(UserName, InStr(UserName, Chr(0)) - 1)
    Else
        UserName = ""
    End If

    GetUserName = LCase$(UserName)
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T16:06:14.237

你可以;

```
user = Environ$("USERNAME") 
```

# apache-commons-dbcp - 使用 DBCP 连接池建立的连接始终为 1

> ID：12895120
> 
> 赞同：2
> 
> 时间：2012-10-15T11:54:21.160
> 
> 标签：apache-commons-dbcp

我正在使用 apache dbcp 和`spring/hibernate/mysql`. 以下是数据源bean配置：

```
<bean id="dbcpDS" class="org.apache.commons.dbcp.BasicDataSource" 
        destroy-method="close" lazy-init="true">
    <property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <property name="url" value="jdbc:mysql://*******"/>
    <property name="username" value="*******"/>
    <property name="password" value="******" />
    <property name="initialSize" value="10" />
    <property name="maxActive" value="200" />
    <property name="maxIdle" value="50" />
    <property name="minIdle" value="10" />
    <property name="maxWait" value="10000" />
</bean> 
```

不知何故在网络服务器上的数量，与mysql服务器建立的连接总是小于2

```
netstat -an | grep  3306 | grep -c ESTABLISHED 
```

而 time_wait 连接在 1300-1700 左右

```
netstat -an | grep  3306 | grep -c TIME_WAIT 
```

我期望已建立的连接至少为 10（因为最小空闲为 10）。我错过了什么吗？

# c# - How to Replace [Word] with Word using Regex.Replace and should replace whole word only

> ID：12895121
> 
> 赞同：7
> 
> 时间：2012-10-15T11:54:23.163
> 
> 标签：c#

I'm working on a translation project right now. One of the issues that I encountered is when I'm trying to replace words special characters.

For example:

```
[Animal] can be furry.
Dog is an [Animal]. 
```

I need to replace `[Animal]` with `Animal`. Please take note that I need to replace the whole word only. So the result should be as followed:

```
Animal can be furry.
Dog is an Animal. 
```

Also, as I've said, it should be the whole word. So if i have:

`[Animal][Animal][Animal] can be furry.` - the result should still be

`[Animal][Animal][Animal] can be furry.` - nothing happened as `[Animal]` is not the same as `[Animal][Animal][Animal]`

Sample:

```
string originalText1 = "[Animal] can be furry";
string badText ="[Animal]";
string goodText = "Animal";

Regex.Replace(originalText1,  Regex.Escape(badText), Regex.Escape(goodText)); 
```

Everything is ok. But as I've said, I need the whole word to be replaced. And with the above code, "`[Animal]can be furry`" will be replaced by "`Animalcan be furry`" which is a no no.

so I also tried:

```
Regex.Unescape(
 Regex.Replace(
  Regex.Escape(originalText1), 
  String.Format(@"\b{0}\b", Regex.Escape(badText)), 
  Regex.Escape(goodText))) 
```

Still won't work though. And now I'm lost. Please help.

I'd also like to mention that there's an ALMOST similar post, but that question didn't require the replacement of whole word only. I've looked over the net for almost 3 hours to no avail. Your help will be greatly appreciated. Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:58:20.977

我还没有测试过，但我会试试这个：

```
Regex.Replace(orginalText, @"\b\[Animal\]\b", "Animal"); 
```

那只会在单词边界处匹配 [Animal] (\b)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:28:34.640

对我来说，这有效：

```
string s = @"[Animal][Animal][Animal] can be furry. - nothing happened as [Animal] is not the same as [Animal][Animal][Animal]
[Animal] can be furry.
[Animal]
can [Animal]
be furry
my [Animal] is furry";
string mask = "(^|\\s)\\[Animal\\](\\s|$)";
string rep = "$1Animal$2";
string s2 = "";
s2 = Regex.Replace(mask, rep);

/*
s2 = "[Animal][Animal][Animal] can be furry. - nothing happened as Animal is not the same as [Animal][Animal][Animal]
Animal can be furry.
Animal
can Animal
be furry
my Animal is furry" */ 
```

您还可以在掩码中添加“特殊字符”：

```
string mask = "(^|\\s|'|\")\\[Animal\\](\\s|$|,|\\?|\\.|!|'|\")"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T12:14:38.763

这对我有用。试试看，让我知道它是否是您正在寻找的东西。

```
string originalText1 = "[Animal] can be furry";
string badText = @"(?:(?<=^|\s)(?=\S)|(?<=\S|^)(?=\s))" + Regex.Escape("[Animal]") + @"(?:(?<=\S)(?=\s|$)|(?<=\s)(?=\S|$))";
string goodText = "Animal";
string newString = Regex.Replace(originalText1, badText, goodText);
Console.WriteLine(newString);
//"Animal can be furry"

originalText1 = "[Animal]can be furry";
newString = Regex.Replace(originalText1, badText, goodText);
Console.WriteLine(newString);
//"[Animal]can be furry" 
```

[在这里](https://stackoverflow.com/questions/8267307/regex-expression-to-match-whole-word/8267757#8267757)找到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T12:15:57.673

我认为这里最简单的方法是使用后视和前瞻来确保括号内的文本是“真正的”匹配。我不确定您的确切要求，但您似乎正在寻找：

1.  搜索字符串，括在方括号中（例如`[Animal]`）
2.  前面是字符串的开头，或者空格，或者可能是一些标点符号。
3.  后跟字符串的结尾，或空格，或者可能是一些标点符号（例如，后跟一个句号）`Dog is an [Animal].`

第一个很简单：`\[Animal\]`。

对于第二个，您可以使用look-behind 来确保前面的字符是适当的：
`(?<=(^|\s))`，最后一个是look-ahead：`(?=($|\s|\.))`

这意味着整个正则表达式将是：

```
var pattern = @"(?<=^|\s)\[Animal\](?=$|\s|\.)";
var output = Regex.Replace(input, pattern, "Animal"); 
```

您可能需要根据需要在前瞻/后视中添加额外的标点符号。

对于您问题中的示例：

```
Input: "[Animal] can be furry."
Output: "Animal can be furry."

Input: "Dog is an [Animal]."
Output: "Dog is an Animal."

Input: "[Animal][Animal][Animal] can be furry."
Output: "[Animal][Animal][Animal] can be furry."

Input: "[Animal]can be furry"
Output: "[Animal]can be furry" 
```

# javascript - jQuery 插件不能与 Knockout 一起使用

> ID：12895123
> 
> 赞同：3
> 
> 时间：2012-10-15T11:54:31.303
> 
> 标签：javascript, jquery, knockout.js

我是 Knockout 的新手，但使用 jQuery 已经有一段时间了。在我目前正在进行的一个项目中，我们正在使用 Knockout 视图模型。

然而，我们也使用了一些 jQuery 插件用于选项卡、覆盖等。当不使用 KO 或在带有`data-bind`. 例如，当触发器放置在绑定到 KO 的容器内时，jQuery Tools 的 Overlay 插件不起作用。

这是一个从未触发的 jQuery 事件的简单示例：

```
<div data-bind="with: dummyData">
    <a class="alert" href="#">Never fires!</a>
</div>
<div>
    <a class="alert" href="#">Works!</a><br /><br />
    <a href="#" data-bind="click: $root.showHidden">Show hidden link.</a>
</div> 
```

这是JavaScript：

```
var myViewModel = function () {
    var self = this;
    self.dummyData = ko.observable(false);

    self.showHidden = function () {
        self.dummyData(true);
    };
};

ko.applyBindings(new myViewModel());

$(document).ready(function () {
    $('a.alert').click(function () { alert('Clicked!'); });
}); 
```

KO 是否用不同的内容替换第一个容器或更新 DOM 以使 jQuery 单击事件不再起作用？

我知道KO有它自己的`click:`事件。我经常使用它，但现在我只想知道是否仍然可以将点击事件与 jQuery 绑定，特别是因为我想将它与一些将自身绑定到对象的点击事件上的 jQuery 插件一起使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T12:51:51.267

在底层，KnockoutJS 认为`with`绑定是绑定的一个特例`template`！`<div data-bind="with: dummyData">`每次视图模型中的可观察对象发生更改时，都会删除并重新创建的每个后代，并且当删除这些 DOM 元素时，您的 jQuery 处理程序也将被删除。使用`.on`高于模板绑定的级别是解决此问题的一种方法。不过，Knockout`click`绑定对我来说似乎是一个更好的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T12:42:57.347

使用[jquery.live](http://api.jquery.com/live/)绑定点击事件：

```
$(document).ready(function () {
    $('a.alert').live('click', function () {
        alert('Clicked!');
    });
}); 
```

这是工作小提琴：http: [//jsfiddle.net/fGX3d/3/](http://jsfiddle.net/fGX3d/3/)

# java - 从多个类访问数据库

> ID：12895128
> 
> 赞同：-2
> 
> 时间：2012-10-15T11:54:48.180
> 
> 标签：java, sqlite, jdbc

我创建了一个数据库，如下所示：

```
Class.forName("org.sqlite.JDBC");

    Connection connection = null;

    try
    {
        connection = DriverManager.getConnection("jdbc:sqlite:ebank.db");
        final Statement statement = connection.createStatement();
        statement.setQueryTimeout(30);

        statement.executeUpdate("create table if not exists employee (id integer,firstname string, lastname string, username string, password string, lgdin integer)");
//            statement.executeUpdate("insert into person values(1, 'leo')");
//            statement.executeUpdate("insert into person values(2, 'yui')");
//            ResultSet rs = statement.executeQuery("select * from person");

//            while(rs.next())
//            {
//                System.out.println("name = " + rs.getString("name"));
//                System.out.println("id = " + rs.getString("id"));
//            }

    }
    catch(SQLException e)
    {
        System.err.println(e.getMessage());
    }
    finally
    {
        try
        {
            if (connection !=null)
            {
                connection.close();
            }
        }
        catch(SQLException e)
        {
            System.err.println();
        }
    } 
```

我需要做的是从我的应用程序中的其他类访问这个数据库。首先，我试图将另一个类中的两个字符串变量添加到该数据库中，但我无法访问语句对象来执行此操作。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:09:38.707

Define a class that handles the database with some public method to handle anything you need.

An example can be a static class with some static method, each class in your package can call directly the class.

```
public static class Database {
    public Database(String dbName){

        //HERE YOU INITIALIZE YOUR DATABASE, create the connection etc.
        // with an HSQLDB server would be something like this: change with your code.

        hsqlServer = new Server();
        hsqlServer.setDatabaseName(0, dbName);
        hsqlServer.setDatabasePath(0, "file:db/" + fileName);
    }

    public static void start(){
        //start database class
    }
    public static void connect(){
        //create the connectio, something like this:
        try {
            Class.forName("org.hsqldb.jdbcDriver");
            connection = DriverManager.getConnection("jdbc:hsqldb:hsql://localhost/garby", "sa", "");
            } catch (ClassNotFoundException e) {

            } catch (SQLException e) {

        }
    }
    public stati String getNameById(int id){
         //HERE YOU create the statement, get the name while id=id and so on, it's an example
    }
 } 
```

In a class if you want to use the database you have to:

in the main method, initialize the database:

```
public static void main (String arg[]){
    new Database("name");
    Database.start();
} 
```

in other class and methods just call:

```
Database.connect();
Database.myMethodToReturnSomethin();
Database.disconnect(); 
```

(obviously you need to have a disconnect() and a stop() methods)

With this method you can simply access the database from any class you have in the package

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:10:12.170

Singleton design pattern is what you need

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T11:57:53.980

Return `connection` from this class and do whatever you want in other classes.

expose `getDBConnection()` and `releaseResources(Connection connection)` methods in this class

```
public class DBConnectionManager {

    public static Connection getDBConnection() throws Exception {
        //some code to create connection
        return connection;
    }

    public static void releaseResources(Connection connection) {
        //close connection if not null
    }

} 
```

# java - JUnit - 之前的方法

> ID：12895129
> 
> 赞同：4
> 
> 时间：2012-10-15T11:54:53.267
> 
> 标签：java, spring, junit, spring-test

我需要在每个 JUnit 测试方法之前执行一些代码。为了执行这段代码，我使用 SpringTest 类 AbstractTestExecutionListener 及其子 TransactionContextTestExecutionListener。

这是代码：

```
public class TransactionContextTestExecutionListener extends AbstractTestExecutionListener{

    private static final Logger logger = Logger.getLogger(TransactionContextTestExecutionListener.class);

    @Override
    public void beforeTestMethod(TestContext testContext) throws Exception {
        Object ctx = testContext.getApplicationContext().getBean(Context.class);
} 
```

我的 JUnit 类看起来像：

```
@ContextConfiguration(locations = "classpath:/META-INF/spring-test/tests-context.xml")
@RunWith(SpringJUnit4ClassRunner.class)
@TestExecutionListeners(TransactionContextTestExecutionListener.class)
@Transactional
public class SelectQueryBuilderTest {} 
```

问题是 beforeTestMethod 方法只在第一次执行测试方法之前被调用。它不会在所有其余的之前调用。

是不是配置有问题？任何的想法？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-15T12:07:22.923

当您使用 运行 JUnit 类时`SpringJUnit4ClassRunner`，可以使用 JUnit 4 注释：

```
@Before
public void multipleInit() {
    // Called before each method annotated with @Test
    ...
}

@BeforeClass
public static void initAll() {
    // Called once per class, before any method annotated with @Test is called
    ...
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-15T12:07:11.067

我建议尝试[@Before](http://junit.sourceforge.net/javadoc/org/junit/Before.html)。例如，考虑为您的测试创建一个基类：

```
@ContextConfiguration(locations = "classpath:/META-INF/spring-test/tests-context.xml") 
@RunWith(SpringJUnit4ClassRunner.class) 
@TestExecutionListeners(TransactionContextTestExecutionListener.class) 
@Transactional 
public class BaseQueryBuilderTest {
    @Autowired
    private ApplicationContext applicationContext;
    protected Context context;

    @Before
    public void setUp() {
        context = applicationContext.getBean(Context.class);
    }
} 
```

现在您可以编写测试实现，如下所示：

```
public class SelectQueryBuilderTest extends BaseQueryBuilderTest {
    @Test
    public void test() {
        // Use context
    }
} 
```

这种方法的好处之一是它在基类中封装了大量元数据，使您不必在所有实际测试类中复制它。

# php - 使用list、foreach和explode解析PHP文本

> ID：12895133
> 
> 赞同：0
> 
> 时间：2012-10-15T11:55:00.050
> 
> 标签：php, arrays

我有一个文本文件作为 list.txt。list.txt 的内容如下：

```
user1:site1.com
user2:site2.com
user3:site3.com
user4:site4.com 
```

我使用了以下代码：

```
$a=file('list.txt');
foreach ($a as $final) {
list($user, $site) = explode(":", $a);
echo ($user." is the user of ".$site);
} 
```

我希望输出显示：

```
user1 is the user of site1.com
user2 is the user of site2.com
user3 is the user of site3.com
user4 is the user of site4.com 
```

任何人都可以解决我的问题。我是 php 的初学者。我在数组函数中遇到问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T11:58:22.987

你正在爆炸`wrong variable`

```
list($user, $site) = explode(":", $a); 
```

和

```
list($user, $site) = explode(":", $final); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:00:32.530

我唯一能发现的可能会导致一些奇怪行为的是在你应该使用的第三行`$final`而不是`$a`. `$a`仍然保存文件的完整内容，同时保存-loop`$final`分配的当前行。`foreach`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T12:13:02.190

这将根据您的需要工作，

```
<?php 
$a=file('list.txt');
foreach ($a as $final) {
$user=explode(':',$final);
echo ($user[0]." is the user of ".$user[1]).'<br/>';
 }
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T11:59:16.180

```
list($user, $site) = explode(":", $final); 
```

# qt - Qt 应用程序、焦点和显示/隐藏功能

> ID：12895135
> 
> 赞同：0
> 
> 时间：2012-10-15T11:55:03.517
> 
> 标签：qt, focus, trayicon

我正在尝试做简单的功能。当我点击托盘图标时：

```
 -A- if app is hide > show
 -B- if app is show and is NOT focus > focus it
 -C- if app is show and focus > hide 
```

非常简单，但是如果您有焦点应用程序并单击“尝试”图标，则焦点将丢失，现在任务栏已获得焦点。所以 B 条件而不是 C 为真。那又如何呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:04:30.600

当托盘图标上的单击事件在主窗口的焦点移出事件后不久发生时，您可以假设 C。所以你可以做这样的事情：

```
MainWindow::focusOutEvent(...) {
    trayIcon->setJustFocussedOut(true);
    this->someQTimer->start();
}

MainWindow::focusOutDone() {
    trayIcon->setJustFocussedOut(false);
} 
```

`MainWindow::someQTimer`QTimer在哪里设置为单次模式和非常短的间隔（例如 50 毫秒）。该`setJustFocussedOut`方法在托盘图标中设置一个标志，使其将单击作为案例 C 处理。

# jquery - 动画 | 等到第一个动画还在运行

> ID：12895140
> 
> 赞同：1
> 
> 时间：2012-10-15T11:55:13.603
> 
> 标签：jquery, animation, jquery-animate

我尝试创建自己的幻灯片供个人使用，但我遇到了一个问题。

在我的 jQuery 插件中，我创建了一个操作我的插件的对象。代码结构如下：

```
(
    function($)
    {
        $.fn.wplSlider = function(options)
        {
            var slider     =   this;

            var settings    =   $.extend(
                {
                    'animationSpeed'    :   750,
                    'animationEasing'   :   null,
                    'animationAutoStart':   true,
                    'pauseTime'         :   3500
                },
                options
            );

            var methods =   {
                animationRun        :   false,
                totalSlides         :   0,
                init                :   function()
                {
                    // This method initiating the slide show elements
                },
                slidesStatus        :   function()
                {
                    // This method initiating the slides status
                },
                slideNumber         :   function()
                {
                    // Assign a number to each slide
                },
                getSlidesAmount     :   function()
                {
                    // Get the amount of slides
                },
                next                :   function()
                {
                    // Prepare the next slide that will be displayed
                },
                prev                :   function()
                {
                    // Prepare the next slide that will be displayed
                },
                goTo                :   function(item)
                {
                    // Prepare the specified slide
                },
                slideOut            :   function()
                {
                    // Slide out the current slide
                    slider.find('li[data-status="current"] .container').animate(
                        {
                            top :   '-75px'
                        },
                        600
                    );

                    slider.find('li[data-status="current"] span, li[data-status="current"] a').animate(
                        {
                            opacity :   0
                        },
                        600
                    );
                },
                slideIn             :   function()
                {
                    // Slide in the current slide
                    $('li[data-status="current"]').animate(
                        {
                            'opacity'   :   1
                        },
                        650
                    );
                }
            }

            /* Allow chainability */
            return this.each(
                function()
                {
                    methods.init();
                    methods.slideOut();
                    methods.next();
                    methods.slideIn();
                }
            );
        }
    }
)(jQuery); 
```

使用上面的代码，问题是，当我执行 slideOut/next/slideIn 时，步骤非常快。

更具体地说，slideIn() 与 slideOut() 同时执行。

有没有办法让 slideIn() 仅在 slideOut() 完成后才执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:01:42.167

> 有没有办法让 slideIn() 仅在 slideOut() 完成后才执行？

是的，您可以使用以下代码。

下面的代码将允许您运行 slideIn() 函数将在执行 slideOut() 函数时执行。

```
$.when(methods.slideOut())
  .then(methods.slideIn()); 
```

***[阅读更多](http://api.jquery.com/jQuery.when/)***

# ios - 自定义字体在 iPad 5.0 和 5.1 上不起作用

> ID：12895141
> 
> 赞同：3
> 
> 时间：2012-10-15T11:55:14.453
> 
> 标签：ios, ios5, ios-simulator, ios6, xcode4.5

> **可能重复：**
> [标签栏中的自定义字体](https://stackoverflow.com/questions/6206069/custom-font-in-tabbar)

我在 TabBarItem 中显示自定义字体时遇到问题。

我的整个应用程序都在使用自定义字体。但只有 TabBarItem 字体不显示我的自定义字体。它适用于 iPhone 模拟器 iOS 5、5.1 和 6。但对于 iPad 模拟器，TabBarItem 的自定义字体仅适用于 iOS 6。

我设置 TabBarItem 的代码是

```
[[UITabBarItem appearance] setTitleTextAttributes:
[NSDictionary dictionaryWithObjectsAndKeys:
[UIColor lightTextColor], UITextAttributeTextColor,
[NSValue valueWithUIOffset:UIOffsetMake(0, 1)], UITextAttributeTextShadowOffset,
[UIFont fontWithName:@"CustomFont"  size:16.0], UITextAttributeFont,
nil] forState:UIControlStateNormal]; 
```

是否有不同的方法为 iOS 5 和 5.1 设置 TabBarItem 自定义字体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:58:51.140

问题在于您加载字体的方式，`[UIFont fontWithName:@"CustomFont.ttf" size:16.0]`是字体文件的名称而不是字体的名称。

您`CustomFont.ttf`应该包含一种字体，例如`CustomFont-Regular`. 然后您可以通过以下方式加载该字体：`[UIFont fontWithName:@"CustomFont-Regular" size:16.0]`.

看起来 Apple 在 iOS 6 中做了一些更改，允许您通过文件名加载字体。

# java - 整个文本文件的 OpenNLP 句子检测 API

> ID：12895145
> 
> 赞同：2
> 
> 时间：2012-10-15T11:55:24.707
> 
> 标签：java, string, file, opennlp

这是单个字符串的 OpenNLP Sentence Detector API 的代码：

```
package opennlp;

import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStream;

import opennlp.tools.sentdetect.SentenceDetectorME;
import opennlp.tools.sentdetect.SentenceModel;

public class SentenceDetector {

    public static void main(String[] args) throws FileNotFoundException {
        InputStream modelIn = new FileInputStream("en-sent.zip");
        SentenceModel model = null;
        try {
           model = new SentenceModel(modelIn);  
        }
        catch (IOException e) {
          e.printStackTrace();
        }
        finally {
          if (modelIn != null) {
            try {
              modelIn.close();
            }
            catch (IOException e) {
            }
          }
        }
        SentenceDetectorME sentenceDetector = new SentenceDetectorME(model);
           String sentences[] = sentenceDetector.sentDetect(" First sentence. Second sentence.");

           for(String str : sentences)
               System.out.println(str);
    }
} 
```

现在我的问题是如何传递整个文本文件并执行句子检测而不是单个字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:57:35.940

简单的方法：将整个文件作为字符串读取并以通常的方式传递。以下方法将文件内容读取为字符串：

```
public String readFileToString(String pathToFile) throws Exception{
    StringBuilder strFile = new StringBuilder();
    BufferedReader reader = new BufferedReader(new FileReader(pathToFile));
    char[] buffer = new char[512];
    int num = 0;
    while((num = reader.read(buffer)) != -1){
        String current = String.valueOf(buffer, 0, num);
        strFile.append(current);
        buffer = new char[512];
    }
    reader.close();
    return strFile.toString();
} 
```

# php - WordPress 中 plugins_url('aaa.php') 和 plugins_url('aaa.php', dirname(__FILE__)) 的区别

> ID：12895146
> 
> 赞同：2
> 
> 时间：2012-10-15T11:55:30.023
> 
> 标签：php, wordpress

我想知道这两种不同的[plugin_url()](http://codex.wordpress.org/Function_Reference/plugins_url)用法是否存在差异。它们都产生相同的字符串。

```
echo plugins_url('aaa.php')

echo plugins_url('aaa.php', dirname(__FILE__)); 
```

什么时候使用一个而另一个不使用？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T12:55:01.323

`echo plugins_url('aaa.php')`

--> 这用于普通的wordpress

`echo plugins_url('aaa.php', dirname(__FILE__));`

--> 这用于多网络

**如果你`dirname(__FILE__)`在 plugins_url 函数中定义**

然后它需要**Wordpress 多网络插件 url**

否则它需要**直接 Wordpress 插件 url**

# google-maps - 谷歌地图标记不显示

> ID：12895147
> 
> 赞同：2
> 
> 时间：2012-10-15T11:55:30.660
> 
> 标签：google-maps, map, google-maps-markers

我的地图显示完美，我唯一缺少的是标记和标题。有人可以查看我的代码并查看为什么我的标记没有显示吗？

我的代码；

```
<script type="text/javascript">
  function initialize() {
    var mapOptions = {
      center: new google.maps.LatLng(55.6078568,13.0126611),
      zoom: 16,
    mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("google_map_392"),
        mapOptions);
        var point = new google.maps.LatLng(55.6078568,13.0126611)
        var marker = new google.maps.marker({
            position:point,
            map:map,

        });

  }

</script> 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T12:12:42.210

标记是一个对象构造函数，因此您需要使用正确的（大写）名称：

> var 标记 = 新的 google.maps.Marker();

这将在您的地图上创建标记，但如果您希望它有一个标题，那么您还需要添加“标题”属性：

```
 function initialize() {
        var mapOptions = {
            center: new google.maps.LatLng(55.6078568, 13.0126611),
            zoom: 16,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("google_map_392"), mapOptions);

        var point = new google.maps.LatLng(55.6078568, 13.0126611);
        var marker = new google.maps.Marker({
            position: point,
            map: map,
            title: "The title for the marker."
        });
    } 
```

# android - 如何在Android中格式化日期？

> ID：12895148
> 
> 赞同：13
> 
> 时间：2012-10-15T11:55:35.377
> 
> 标签：android, date

我想以这样的格式设置日期，

```
Friday, March 4, 2012 3:15 AM 
```

是的，我知道这件事

```
 SimpleDateFormat parseFormat = new SimpleDateFormat("MMMM dd,yyyy hh:mm a");
   Date date =new Date();
   String s = parseFormat.format(date); 
```

但我不知道什么是显示日的选项，请帮助我。谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-15T12:02:01.583

```
 SimpleDateFormat parseFormat = new SimpleDateFormat("E MMMM dd,yyyy hh:mm a");
     Date date =new Date();
     String s = parseFormat.format(date); 
```

有关更多详细信息，请参阅此内容[SimpleDateFormat](http://developer.android.com/reference/java/text/SimpleDateFormat.html)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-15T12:01:50.397

在您的格式字符串中，使用“E”作为短名称（Sun、Mon、Tue 等），或使用“EEEE”作为完整单词（Sunday、Monday、Tuesday 等）。

另外，请参见[此处](https://stackoverflow.com/questions/5121976/is-there-a-date-format-to-display-the-day-of-the-week-in-java)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-28T05:13:09.693

```
public static String currentDateTime(String dateInParse){
    SimpleDateFormat sdf = new SimpleDateFormat("MMMM dd,yyyy hh:mm a");
    Date date = null;
    try
    {
        date = sdf.parse(dateInParse);
    }
    catch(Exception ex)
    {
        ex.printStackTrace();
    }
    SimpleDateFormat formatter = new SimpleDateFormat("EEEE MMMM dd,yyyy hh:mm a");
    String newFormat = formatter.format(date);

    return newFormat ;
} 
```

这里 dateInParse 是您的日期，格式类似于 sdf。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T12:00:46.060

只需使用 E 作为格式化程序

前任：

`SimpleDateFormat parseFormat = new SimpleDateFormat("EEEE, MMMM dd,yyyy hh:mm a");`

# jquery - jScrollPane inboc style read more with show more details on hover

> ID：12895151
> 
> 赞同：1
> 
> 时间：2012-10-15T11:55:40.757
> 
> 标签：jquery, jscrollpane

here is a simple example of what I am trying to do: [http://jsfiddle.net/TUjM5/1/](http://jsfiddle.net/TUjM5/1/)

So that on hover of the message this shows extra details and then reinitialise jscroll.

How can I set it so that on scroll using the mouse it doesn't try to show the messages.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:11:19.407

You need to use the api. It's in the [documentation](http://jscrollpane.kelvinluck.com/api.html)

Here's what you need to do

```
var element = $('.scroll-pane').jScrollPane();
var data = element.data('jsp');

$('.scroll-pane li').hover(function(){
    $(this).find(".hide").slideDown();
    data.reinitialise();
}); 
```

[Fiddle](http://jsfiddle.net/TUjM5/2/)

# javascript - 等价于文本的 innerHTML

> ID：12895152
> 
> 赞同：0
> 
> 时间：2012-10-15T11:55:45.810
> 
> 标签：javascript, dom, textnode

> **可能重复：**
> [jQuery 的 .text() 在内部是如何工作的？](https://stackoverflow.com/questions/5023432/how-does-jquerys-text-work-internally)

我正在寻找相当于的文本`innerHTML`，即

```
<p>Hello, <i>World!</i></p> 
```

然后`innerText(p)`应该返回`Hello, World!`。

注意：我知道 jQuery 的`text()`功能。我想知道它是如何实现的，这样我就可以对某些节点进行特殊处理，比如插入额外的空白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:59:28.300

这是 getText() 的来源：取自问题：[jQuery's .text() 如何在内部工作？](https://stackoverflow.com/questions/5023432/how-does-jquerys-text-work-internally)

```
// Utility function for retreiving the text value of an array of DOM nodes
Sizzle.getText = function( elems ) {
    var ret = "", elem;

    for ( var i = 0; elems[i]; i++ ) {
        elem = elems[i];

        // Get the text from text nodes and CDATA nodes
        if ( elem.nodeType === 3 || elem.nodeType === 4 ) {
            ret += elem.nodeValue;

        // Traverse everything else, except comment nodes
        } else if ( elem.nodeType !== 8 ) {
            ret += Sizzle.getText( elem.childNodes );
        }
    }

    return ret;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T12:09:24.240

这个怎么样？

```
var getInnerText = function (element) {
    var nodes = element.childNodes,
        i = 0,
        len = nodes.length,
        text = '';
    for (; i < len; i++) {
        if (nodes[i].nodeType === 3 || nodes[i].nodeType === 4) {
            // 3 means text node, 4 means cdata
            text += nodes[i].nodeValue;
        } else {
            text += getInnerText(nodes[i]);
        }
    }
    return text;
}; 
```

然后：`var innerText = getInnerText(myElement);`

[jsfiddle](http://jsfiddle.net/3LWqV/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T12:07:59.267

使用 innerText 属性而不是 innetHTML。

例子...

```
<html>
<body>
<p id="myP">Sample Text inside a <b>p</b> element <a href="#"> this is a link </a></p>
<button onclick="alert(myP.innerHTML);">InnerHTML</button>
<button onclick="alert(myP.innerText);">InnerText</button>
</body>
</html> 
```

# silverlight - Visifire 折线图

> ID：12895162
> 
> 赞同：1
> 
> 时间：2012-10-15T11:56:14.627
> 
> 标签：silverlight, linechart, google-finance, visifire

我的银灯项目中有一张 visifire 折线图。有一些数据点（比如说 5 个）。

当我将鼠标悬停在数据点之间时，我需要显示 Y 值。

有没有办法使用visifire来实现这个？

提前致谢。

问候，普拉萨德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:57:42.513

Yes, you'll want to create a tooltip.

In your XAML, it would look something like this:

![enter image description here](../Images/7ba2d0d410773c8f204ddbfdd3900a65.png)

# android - 条形图的AchartEngine实现

> ID：12895163
> 
> 赞同：1
> 
> 时间：2012-10-15T11:56:21.783
> 
> 标签：android, bar-chart, achartengine

我使用 AChartEngine 库创建了条形图。目前我正在获得两年的收入（2011 年和 2012 年）并按月比较它们。因此，在每个栏中，我显示两年数据并每月显示它们（如 1 月、2 月等）。但我的要求是，我必须每季度显示一次……如下图所示：

![条形图](../Images/c09db86d2a0f52b9221906ea60cdf166.png)

这是我当前的实现：

[实现代码](http://pastie.org/5061196)

![当前条形图图像](../Images/cdba8df32f66673df2beaa3056bbfed2.png)

那么我需要在哪里更改代码以便我可以实现上面的条形图？请帮忙..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T13:49:11.213

正如丹所说，您可以通过在某个位置传递空值来管理您的空间。我想为您向 dan 提出的问题提供您的解决方案：我将如何在 x 轴上显示 Q1、Q2 而不是 1、2、3 等？

答：如果您在 X 轴上有 0 到 12 位数字。

您可以通过以下方法管理 X 轴文本标签。

```
renderer.addXTextLabel("X AXIS POSITION IN INTEGER","YOUR QUARTER STRING IN STRING"); 
```

如下所示（我已根据您的问题提出）：

```
renderer.addXTextLabel(2,"Q1");

renderer.addXTextLabel(6,"Q2");

renderer.addXTextLabel(10,"Q3");

renderer.addXTextLabel(14,"Q4"); 
```

**已编辑**

```
For Chaging Colors of Bar : 
```

您可以将以下代码设置为以下：

```
int[] colors = new int[] { Color.parseColor("#4C4646"),
                    Color.parseColor("#71A700") };
            XYMultipleSeriesRenderer renderer;
            renderer = buildBarRenderer(colors); 
```

并将方法放在**buildBarRenderer**下方：

```
protected XYMultipleSeriesRenderer buildBarRenderer(int[] colors) {
        XYMultipleSeriesRenderer renderer = new XYMultipleSeriesRenderer();

        renderer.setAxisTitleTextSize(18);
        renderer.setChartTitleTextSize(18);
        renderer.setLabelsTextSize(18);
        renderer.setLegendTextSize(18);
        int length = colors.length;
        for (int i = 0; i < length; i++) {
            SimpleSeriesRenderer r = new SimpleSeriesRenderer();
            r.setColor(colors[i]);
            renderer.addSeriesRenderer(r);
        }
        return renderer;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T13:08:40.983

您可以在季度值之间添加一些空值，例如您将获得所需的空间。

# wpf - 使用 MVVM Foundation Messenger 发送数据

> ID：12895172
> 
> 赞同：1
> 
> 时间：2012-10-15T11:56:55.620
> 
> 标签：wpf, mvvm, messenger

我一直在尝试掌握 MVVM，现在正处于尝试使用 Messenger 的阶段。我选择的框架是 Josh Smith 的[MVVM Foundation](http://mvvmfoundation.codeplex.com/)，主要是因为它很小，而且我对 C# 和 MVVM 模式都很陌生。到目前为止，在不同的 ViewModel 中实现触发方法的消息已经很顺利（我认为），例如发送由“NameOfMessage”标识的消息：-

```
App.Messenger.NotifyColleagues("NameOfMessage"); 
```

在接收端，例如不同的 ViewModel ：-

```
App.Messenger.Register("NameOfMessage", DoSomething);

Void DoSomething()
{
// Your code that "does something" here.
} 
```

这一切都很好，而且效果很好；但是，最好将一些信息与消息一起传递。目前，这就像给每个人寄明信片，却忘记写下你的假期有多棒。

为此，我尝试了以下方法，该属性在设置后会在标题“SentMessage”下发送一条消息，其中包含属性 SentMessage aka “_sentMessage”的内容：-

```
 public string SentMessage
    {
        get { return _sentMessage; }
        set
        {
            _sentMessage = value;
            RaisePropertyChanged("SentMessage");
            App.Messenger.NotifyColleagues("SentMessage", _sentMessage);
        }
    } 
```

这表示没有错误并且似乎很好，我的问题是订阅此消息的语法：-

```
App.Messenger.Register("SentMessage", param => { this.ReceivedMessage = (string)param; }); 
```

我想接收消息并将字符串放在另一个属性中，例如 ReceivedMessage。我尝试过的是上面的（受[Josh 的 Mediator Prototype](http://joshsmithonwpf.wordpress.com/2009/04/06/a-mediator-prototype-for-wpf-apps/)影响），但这会引发一个错误，指出“Delegate 'System.Action' 不接受 1 个参数。我猜这是因为它期望指向一个方法？

如果有人可以帮助使用正确的语法，我们将不胜感激。（这都是使用 WPF、.NET Framework 4 和 Visual Studio 2010 用 C# 编写的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T02:20:19.743

在我转向 MVVMLight 之前，我已经使用了 MVVM Foundation 一段时间。我认为您必须使用以下语法来注册消息的回调方法。（我没有测试过，只是从我的记忆中回忆过去。）

```
App.Messenger.Register("SentMessage", (Action<String>)(param => { this.ReceivedMessage = (string)param; })); 
```

# javascript - extending Backbone.Collection prototype

> ID：12895176
> 
> 赞同：2
> 
> 时间：2012-10-15T11:57:20.080
> 
> 标签：javascript, backbone.js, qunit

Following on from [this question](https://stackoverflow.com/questions/10219182/retrieve-element-from-backbone-collection-removen), I'm trying to augment Backbone.Collection with some custom methods. However, I'm getting some inconsistent behaviour between the console and the source.

Here's how the test looks

**HTML**

```
... 
<script type="text/javascript" src="./libs/underscore.js"></script>
<script type="text/javascript" src="./libs/backbone.js"></script>
<script type="text/javascript" src="./libs/backbone-extend.js"></script>    
<script type="text/javascript" src="./qunit/qunit.js"></script>
<script type="text/javascript" src="./backbone-extend-tests.js"></script>
</body></html> 
```

**backbone-extend.js**

```
Backbone.Collection.prototype.extract = function() {
    // placeholder to test binding
    return 'foo';
}; 
```

**backbone-extend-tests.js**

```
test('extending backbone', function () {
    ok(typeof Backbone.Collection.extract == 'function');
    console.log(Backbone.Collection.extract); // undefined
}); 
```

Is there something I'm missing? I've checked that all the source is loading

JFTR - this...

```
_.extend(Backbone.Collection, {extract:function(){return'foo';}); 
```

...works, just not using the prototype augmenting method. I'm just unsure why one method works and the other doesn't, given that the docs for Backbone [recommend](http://documentcloud.github.com/backbone/#FAQ-extending) prototype augmentation (although it specifically mentions Models). Guess I need to take a more detailed look under the bonnet...

**UPDATE:** for posterity, placing this in the backbone-extend.js file...

```
 _.extend(Backbone.Collection.prototype, {
     extract : function (model) {
     var _model = model;
     this.remove(model);
     return _model;
 }
 }); 
```

... works

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-15T14:28:03.527

您混淆了一些关键概念，这就是为什么您没有看到您期望的行为，这是一个基本的 javascript 问题，与骨干网并不完全相关。

考虑以下构造函数：

```
var Klass = function() {}; 
```

您可以使用关键字调用该`new`构造函数以从该构造函数获取实例。

```
var klassInstance = new Klass(); 
```

现在，假设我想添加一个可用于从该构造函数派生的*所有实例的方法。*为此，我可以使用该`prototype`对象。

```
Klass.prototype.instanceMethod = function() { alert('hi'); }; 
```

然后我应该能够使用以下方法调用该方法：

```
klassInstance.instanceMethod(); 
```

但是，我也可以向构造函数本身添加一个*静态*函数——我在这个上下文中使用这个术语是松散的——可以在没有实例的情况下调用它。

```
Klass.staticMethod = function() { alert('yo!'); }; 
```

此方法将直接在构造函数中可用，但*不能*直接在实例中使用。

例如：

```
klassInstance.staticMethod == undefined 
```

因此，您的测试真正有问题的是您正在`prototype`向该“类”的所有实例添加一个方法 - 但在您的测试中，您正在直接在“类”本身上测试一个方法。这不是一回事。

* * *

另外，尽管相关，Backbone.js 提供了一种内置机制来创建其内置类型的“子类”。这是*静态* `.extend()`方法。这为您提供了一种将您自己的功能添加到基本 Backbone 类的简单方法。

在您的情况下，您需要执行以下操作：

```
var MyCollection = Backbone.Collection.extend({
    extract: function() {
        // do whatever
    }
}) 
```

然后，您可以创建新类的实例，这些实例将通过以下`.extract()`方式对它们有一个方法：

```
var coll = new MyCollection();
coll.extract(); 
```

* * *

## TL;博士;

最终——回到你最初的问题——如果你想要一个在特定类的所有实例上都可用的方法，那么你的*测试*是不正确的。您要么需要新建一个实例来测试：

```
test('extending backbone', function () {
    var col = new Backbone.Collection();
    ok(typeof col.extract == 'function');
}); 
```

或者直接检查一个方法——这与对象不是*唯一*一个对象获取方法`prototype`的事实有细微的不同。`prototype`

 *```
test('extending backbone', function () {
    ok(typeof Backbone.Collection.prototype.extract == 'function');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:01:08.007

在进行测试之前确保`backbone.js`并`underscore.js`已满载。*

# objective-c - weak variable assigned to strong variable in objective c

> ID：12895179
> 
> 赞同：1
> 
> 时间：2012-10-15T11:57:24.813
> 
> 标签：objective-c

what will happen if weak variable is assigned to strong variable . Will the strong gets released when weak goes out of scope , will it create a memory leak ? As per my assumption compiler will add release statement for the strong variable in ARC mode and it will not create memory leak . Correct me if I am wrong.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:32:49.750

您不会将变量分配给另一个变量，而是将变量的值分配给另一个变量。所以你的强变量将“保留”你的对象。

# android - Reading Gson from json string

> ID：12895182
> 
> 赞同：0
> 
> 时间：2012-10-15T11:57:26.103
> 
> 标签：android, json, gson

**JSON Response String:**

```
{
    "1": {
        "registered_name": "Manchester Cars",
        "search_tag": null,
        "town": "Manchester",
        "distance": "1.03782874345779",
        "capacity": 4,
        "first_address_line": null,
        "price": "165.00",
        "cost_per_person": "165.00",
        "trip_direction": 1,
        "mco_id": "826",
        "tag": ""
    },
    "2": {
        "registered_name": "Avon Cars",
        "search_tag": null,
        "town": "Solihull",
        "distance": "3.39530396461487",
        "capacity": 4,
        "first_address_line": null,
        "price": "140.82",
        "cost_per_person": "140.82",
        "trip_direction": 1,
        "mco_id": "670",
        "tag": ""
    },
    "3": {
        "registered_name": "BBS Executive",
        "search_tag": null,
        "town": "Birmingham",
        "distance": "11.7371127605438",
        "capacity": 4,
        "first_address_line": null,
        "price": "186.17",
        "cost_per_person": "186.17",
        "trip_direction": 1,
        "mco_id": "615",
        "tag": ""
    },
    "4": {
        "registered_name": "Sky Cars",
        "search_tag": null,
        "town": "Birmingham",
        "distance": "14.4878869056702",
        "capacity": 4,
        "first_address_line": null,
        "price": "179.13",
        "cost_per_person": "179.13",
        "trip_direction": 1,
        "mco_id": "822",
        "tag": ""
    },
    "": {
        "registered_name": "Eco Cars Manchester",
        "search_tag": null,
        "town": "Stockport",
        "distance": "9.5043933391571",
        "capacity": 4,
        "first_address_line": null,
        "price": "155.00",
        "cost_per_person": "155.00",
        "trip_direction": 1,
        "mco_id": "774",
        "tag": ""
    }
} 
```

I want to convert this json response, i am using following GSON code but failed to convert,

**Tried Solution 1**

```
Gson gson = new Gson();         
Item[] itemList = gson.fromJson(jstring, Item[].class);    
Type collectionType = new TypeToken<Collection<Item>>(){}.getType();
List<Item> enums =  gson.fromJson(jstring, collectionType); 
```

**Tried Solution 2**

```
Gson gson = new Gson();         
Item[] itemList = gson.fromJson(jstring, Item[].class); 
```

Where jstring is json response printed above.

**Failed:** java.lang.IllegalStateException: Expected BEGIN_ARRAY but was BEGIN_OBJECT at line 1 column 2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:00:25.727

您的 JSON 响应不是 JSON 数组。它是一个 JSON 对象。这就是你的错误的原因。见[www.json.org](http://json.org)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T13:25:37.017

您可以尝试使用 Genson [http://code.google.com/p/genson/](http://code.google.com/p/genson/)。以下代码应该可以解决您的问题。

```
Map<String, Item> itemsMap = new Genson().deserialize(jsonString, new GenericType<Map<String, Item>>() {});
// get all the items independently from their keys
Collection<Items> items = itemsMap.values(); 
```

# c# - OnPropertyChanged 和 XAML

> ID：12895184
> 
> 赞同：1
> 
> 时间：2012-10-15T11:57:35.370
> 
> 标签：c#, wpf, xaml, inotifypropertychanged

我正在尝试在 xaml 中为我的 TextBlock 指定数据变量：

```
<TextBlock Name="Test11" Text="{Binding Path=Test}"></TextBlock> 
```

我正在使用 OnPropertyChanged：

```
public partial class MainWindow : Window, INotifyPropertyChanged

private string _test;

public event PropertyChangedEventHandler PropertyChanged;

protected void OnPropertyChanged(string propertyName)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
        }

public string Test
        {
            get
            {
                return _test;
            }
            set
            {
                _test = value;
                OnPropertyChanged("Test");
            }
        } 
```

并尝试在 MainWindow 构造函数中设置值：

```
public MainWindow()
        {
            InitializeComponent();
            Test = "teeest";
        } 
```

但是 Textblock.Text 没有更新......我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:02:20.497

您需要设置数据上下文，以便 UI 知道从何处获取绑定数据。

```
public MainWindow()
{
    InitializeComponent();
    this.DataContext = this;
    Test = "teeest";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:02:23.247

在 Window 构造函数之后

> 初始化组件（）

放

`this.DataContext = this;`

# java - Displaying ArrayList in a Spring Form

> ID：12895188
> 
> 赞同：1
> 
> 时间：2012-10-15T11:57:41.970
> 
> 标签：java, jsp, spring-mvc

I am using Spring 3.1.

I am trying to display an ArrayList of objects in a Spring Form within a JSP. Eventually I need to have a checkbox for each object so that the user may select a row and then press a button for some back-end action. But I can't get the data to display using a Spring form. I keep receiving an exception:

org.springframework.beans.NotReadablePropertyExcep tion: Invalid property 'datafeed[0]' of bean class [java.util.ArrayList]: Bean property 'datafeeds[0]' is not readable or has an invalid getter method: .... "

Here is the scaled down code:

```
<form:form method="post" commandName="datafeeds">
  <table>
     <thead>
        <tr>
           <th>Name</th>
           <th>State</th>
        </tr>
     <tbody>
        <c:forEach items="${datafeeds}" var="datafeed" varStatus="vs">
           <tr>
              <td><form:label path="datafeeds[${vs.index}].name/></td>
              <td><form:label path="datafeeds[${vs.index}].state/></td>
           </tr>
        </c:forEach>
     </tbody>
  </table>
</form> 
```

Then the Controller:

```
@Controller
public class DataFeedController
{
   @Autowired
   SomeService service;

   @RequestMapping(value="/datafeed")
   public String showDataFeed(Model m) {
      List<DataFeed> datafeeds = service.list();
      m.addAttribute("datafeeds", datafeeds);
      return "datafeed";
   }
} 
```

Specifically I guess my question is how does commandName, the variables in the forEach loop and the data from the Controller all work together? Can anybody show me using the above code?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T12:00:31.283

`datafeeds`是一个`ArrayList`。您使用 访问元素`datafeeds.get(index)`，而不是使用`[index]`。使用方括号仅适用于数组。像这样做：

```
<c:forEach items="${datafeeds}" var="datafeed" varStatus="vs">
   <tr>
      <td><form:label path="${datafeed.name}"/></td>
      <td><form:label path="${datafeed.state}"/></td>
   </tr>
</c:forEach> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-02T11:45:46.970

[我能够使用本](http://viralpatel.net/blogs/spring-mvc-multi-row-submit-java-list/)教程使其工作。基本上，您必须创建一个表单类，其中包含您的数据馈送列表：

```
public class DataFeedForm {
    private List<DataFeed> dataFeeds;

    public List<DataFeed> getDataFeeds() {
        return dataFeeds;
    }

    public void setDataFeeds(List<DataFeed> dataFeeds) {
        this.dataFeeds = dataFeeds;
    }
} 
```

并将这个表单对象（充满数据馈送）传递给您的视图：

```
@Controller
public class DataFeedController
{
   @Autowired
   SomeService service;

   @RequestMapping(value="/datafeed")
   public String showDataFeed(Model m) {
      List<DataFeed> datafeeds = service.list();
      DataFeedForm form = new DataFeedForm();
      form.setDataFeeds(datafeeds);
      m.addAttribute("datafeedsForm", form);
      return "datafeed";
   }
} 
```

并在视图中显示表单的数据，如下所示：

```
<form:form method="post" modelAttribute="datafeedsForm" commandName="datafeeds">
  <table>
     <thead>
        <tr>
           <th>Name</th>
           <th>State</th>
        </tr>
     <tbody>
        <c:forEach items="${datafeedsForm.datafeeds}" var="datafeed" varStatus="vs">
           <tr>
              <td><form:label path="datafeeds[${vs.index}].name"/></td>
              <td><form:label path="datafeeds[${vs.index}].state"/></td>
           </tr>
        </c:forEach>
     </tbody>
  </table>
</form> 
```

# java - java传递对函数的引用

> ID：12895194
> 
> 赞同：4
> 
> 时间：2012-10-15T11:57:51.833
> 
> 标签：java, reference

我对Java“所有按值传递”的概念有点困惑。

考虑以下代码：

```
class Test {
    Integer A;
    String B;
    ...

    void SetVar(Object??? var, Object value) {
        // Set A variable to the value (considering that it's possible)
    }
} 
```

我可以按照以下代码设置为和的`SetVar`方式对函数进行编码吗？`A``2``B``Hi`

```
void Init() {
    SetVar(this.A, 2);
    SetVar(this.B, "Hi");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:12:21.650

是的你可以。通过使用反射 java api。

```
class Test{
    void SetVar(Field field, Object value) throws 
                       IllegalArgumentException,IllegalAccessException {
         field.set(this, value);
    }

    public static void main(String[] args){
     Test test =new Test();
         test.SetVar(Test.class.getDeclaredField("A"), 2);
         test.SetVar(Test.class.getDeclaredField("B"), "Hi");
    }
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T12:12:55.600

简而言之，将值（使用`=`运算符的含义）重新分配给现有引用不会更改原始引用指向的对象。

Java 中一个很大的误解是人们认为它们是两种类型的变量：

*   **基元**（如 int、boolean 等...）
*   **引用**（如整数、布尔值、自定义对象等...）

Java**从不**使用引用。**参考**这个词用词不当。

Java 仅使用**指针**来代替操作对象。

为了更好地理解阴影：http: [//javadude.com/articles/passbyvalue.htm](http://javadude.com/articles/passbyvalue.htm)

关于您的情况，即使您跳过了 Java 命名约定（但这是另一个主题），您也可以通过以下方式解决您的“问题”：

```
void SetVar(Integer value) {
        this.A = value;
} 
```

实际上，如果您`A`作为本地参数传递（如您所做的那样），则此本地参数将表示**引用的****副本，`A`**因为 Java 仅关注`passed-by-value`. 所以改变它不会影响初始参考。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T12:00:37.710

一般来说，这取决于。在这种特殊情况下，A 和 B 是不可变的，你不能。

如果你有一个带有 setter 的可变对象，你可以在你的`setVar`方法中改变它的一些属性：

```
var.setValue(value); 
```

但是您将无法更改原始对象指向的引用（因为它已按值传递）。

```
var = someOtherObject; //no effect on the reference in the calling code 
```

[这篇文章](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)中有更多关于它的信息，它是[Java FAQ](https://stackoverflow.com/tags/java/info)的一部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T12:06:01.713

是的，Java 是按值传递的，但是您还必须意识到，当您将对象传递给某个方法时，实际上是在传递对该对象的引用（指针）。在您的情况下，这两个参数`A`和`B`也是不可变的，这意味着您只能重新分配代表它们的局部变量，而不是替换传入的原始对象`SetVar`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T12:04:11.950

```
void SetVar(Object??? var, Object value) { 
```

变得

```
void SetVar(final Integer var, final String value) {
   A=var; // use minuscule for field like  a=var;
   B=value; // this. is not necessary here
} 
```

在构造函数中初始化：

```
Test (final Integer var, final String value){
   setVar(var, value);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-15T12:04:14.273

`Integer`并且`String`是不可变的，因此您无法更改`A`或`B`初始化后的值，您只需为变量分配一个新值。并且由于一旦`SetVar`变量内部`var`是方法的局部变量，更改指向的对象`var`不会影响外部调用者。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-15T12:14:14.900

您不能这样做，因为在您的示例中，您将 this.A 传递给 setVar() 方法，而 this.A 为空，因此没有用。但是，您可以做的是让 this.A 成为持有者，并将持有者传递给 setVar() 方法。

下面的代码将做你想做的事。它为您的字段 a 和 b 使用 IntegerHolder 和 StringHolder，并在使用空持有人对象的类的构造时初始化持有人字段。

然后调用 setVar() 不会设置字段 a 和 b 的值，而是设置持有者的内容。

```
public class Test
{
    IntegerHolder a = new IntegerHolder();
    StringHolder b = new StringHolder();

    void setVar(IntegerHolder var, Integer value) {
        var.value = value;
    }

    void setVar(StringHolder var, String value) {
        var.value = value;
    }

    class IntegerHolder
    {
        Integer value;
    }

    class StringHolder
    {
        String value;
    }

} 
```

# jquery - 如何使文本区域与行的高度相同

> ID：12895202
> 
> 赞同：0
> 
> 时间：2012-10-15T11:58:16.280
> 
> 标签：jquery, html, css

我的文本区域有问题。我在[这里](http://jsfiddle.net/WZKrP/15/)有一个 jsfiddle 。

当您打开小提琴时，只需单击“添加问题”按钮，您就会看到下面附加了一行。

您将能够看到 textarea 的高度不适合整行。我的问题是，我怎样才能让 textarea 的高度适合整行？行高可以是任意大小，没有固定大小。

下面是控制附加行和行本身中的文本区域的 css：

```
.question textarea {
    min-width:98%;
    max-width:98%;
    resize:none;
    height:auto;
    font-size:100%;
}

.question { 
    min-width:28%;
    max-width:28%;
    border:1px black solid;
    border-collapse:collapse;
} 
```

在发布您的答案之前，请在小提琴中测试您的代码:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:02:03.030

设置`textarea's` `height`为`100%`

**[见小提琴](http://jsfiddle.net/WZKrP/16/)**

# asp.net - 如何将参数从 Silverlight 传递到 RDLC 报告，同时保持隐藏状态？

> ID：12895206
> 
> 赞同：0
> 
> 时间：2012-10-15T11:58:36.337
> 
> 标签：asp.net, silverlight, azure, parameters, rdlc

我尝试在 javascript 中使用 Location=0 来隐藏托管 ReportViewer 的弹出窗口中的 URL 地址栏，但由于某些（显然是“安全”）原因它不起作用，并且我的 Azure 托管 Silverlight 应用程序的用户，其中一些来自竞争公司，可以猜测对方的报价 ID，并查看谁在为他们所追求的同一业务报价。

我知道我可以加密 ID，但我希望有一种更直接的方法可以将 ID 提供给 Report.aspx 文件中的 ReportViewer 控件/ObjectDataSource，而不使其作为 URL 参数可见？

建议非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T19:11:47.850

您可以在您的页面上调用 s JavaScript（由 jQuery 驱动）函数，提供, 然后，您可以使用 a打开一个带有报告的新窗口`ID`，而不是打开一个普通的 POPUP 。当然做完了。`GET``POST``POST``HTTPS`

除此之外，您在安全性方面非常担心气味。`ReportViewer`如果请求的参数不属于请求者，为什么还要允许渲染 a ？

出于安全考虑，您应禁用对您的应用程序的匿名访问。然后你就会知道哪个用户被记录了。然后，您可以轻松地将用户与报价 ID 联系起来。然后，您可以轻松地检查 given`quote id`或请求的任何参数是否属于请求它的用户。

顺便问一下，`AZURE`这里具体是什么？这是一般的 Web 开发问题，不是特定于 Azure 的。

使用 POST 打开窗口的示例 JS 函数

```
function OpenWin(someId)
{
 var form = document.createElement('form');
 form.action = 'URL_TO_YOUR_RDLC_ASPX_PAGE';
 form.method = "POST";
 form.target = '_blank'; // this is important to open a new window
 var hiddenId = document.createElement('input');
 hiddenId.name = 'theNameOfTheParam';
 hiddenId.value = someId;
 form.appendChild(hiddenId);
 document.body.appendChild(form);
 form.submit();
} 
```

您可以通过创建附加隐藏输入随意管理输入字段的数量（即要发送的参数）。

# matplotlib - 在水平颜色条上方放置一个颜色条标签（而不是下方）

> ID：12895207
> 
> 赞同：9
> 
> 时间：2012-10-15T11:58:37.630
> 
> 标签：matplotlib

我正在使用以下代码生成水平颜色条：

```
cbaxes = fig.add_axes([0.05, 0.15, 0.9, 0.025]) # setup colorbar axes.
cb = fig.colorbar(cax=cbaxes, mappable=mappable, orientation='horizontal',)
cb.set_label(r"$[10^{14}\ molec\,cm^{-2}]$", fontname='Arial', fontsize='small')
cbytick_obj = plt.getp(cb.ax.axes, 'xticklabels')
plt.setp(cbytick_obj, color='r', fontsize='x-small')
cb.ax.set_yticks(arange(vmin, vmax, 2), size='small') 
```

但是，我希望将标签打印在颜色栏上方（而不是下方）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-11-24T16:09:14.750

您可以尝试使用以下代码：

```
cb.ax.xaxis.set_ticks_position('top')
cb.ax.xaxis.set_label_position('top') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-15T13:05:58.030

这就是我的做法。关键似乎是调用颜色条的轴`set_xlabel`方法：

```
cbaxes = fig.add_axes([0.05, 0.05, 0.9, 0.025])
cb = fig.colorbar(cax=cbaxes, mappable=mappable, orientation='horizontal')
cbaxes.set_xlabel(r"$[10^{14}\ molec\,cm^{-2}]$", fontname='Arial',
            fontsize='small', labelpad=-35)
cb.set_ticks(arange(vmin, vmax + 1, 2))
cbytick_obj = plt.getp(cb.ax.axes, 'xticklabels')
plt.setp(cbytick_obj, fontsize='x-small') 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-05-15T13:45:58.583

您也可以使用： cb.ax.tick_params(axis='x',direction='in',labeltop='on')

还有很多其他参数可以在那里设置。

# sql-server - 创建与非主列的关系

> ID：12895214
> 
> 赞同：1
> 
> 时间：2012-10-15T11:58:57.160
> 
> 标签：sql-server, foreign-keys

我有一个表，它引用了主表的外键。但我想向另一个表添加另一个引用。

例如，假设我有三个表：`Child, Parent, Transaction`

**父表：**

*   父母ID

**子表：**

*   孩子ID
*   父母ID

**交易表：**

*   交易ID
*   ParentID（引用`ParentID on Parent`表，可为***空***）
*   ChildID（引用`ChildID on Child`表，可为***空***）

我想添加对表的*`cascade on update`*引用。`ParentID on Child`这样当父子关系发生变化时，我`ParentID`在`Transaction`桌子上的就会自动更新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T12:48:47.193

很明显，`ParentID`主键不是`Child`表上的。

此列在整个表中是唯一的吗？

*   如果是：您可以`ParentID`在`Child`表上定义唯一索引，然后将 FK 引用添加到该唯一索引

*   如果**NO**：如果`ParentID`on`Child`不是唯一的**，**则**不能**创建对它的 FK 引用。FK 引用的“目标”必须是该表的主键，或者至少是该表上的唯一列。否则，如果你有并且值**不是**唯一的，你指的是哪一行？！？！？**`ParentID = 42`**

 ****> *简单地说，我希望 Transaction 表上的 ParentID&ChildID 列上的值对与 Child 表上的 ParentID&ChildID 列相同*

**在这种情况下，您需要在两列**上都有一个 FK 关系- 像这样创建它：

```
CREATE UNIQUE INDEX UX_ParentChild
ON dbo.Child(ParentID, ChildID)

ALTER TABLE dbo.Transaction
ADD CONSTRAINT FK_Transaction_Child
FOREIGN KEY(ParentID, ChildID) REFERENCES dbo.Child(ParentID, ChildID)
ON UPDATE CASCADE 
```****

# php - 为什么这个 ajax php 轮询未定义索引：轮询？

> ID：12895220
> 
> 赞同：0
> 
> 时间：2012-10-15T11:59:19.833
> 
> 标签：php, mysql, jquery

为什么我在尝试轮询时在 ajax 中看到此错误消息“（！）注意：未定义的索引：第 6 行的 D:\wamp\www\poll\poll.php 中的轮询”.. 我有两个文件

1- index.html 包含获取请求

2- poll.php 文件选择请求并显示结果

索引.html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"  dir="ltr" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>AJAX Poll Using jQuery and PHP</title>

<link rel="stylesheet" type="text/css" href="styles.css" />
<script type="text/javascript" src="js/jquery-1.3.2.js" ></script>
<script type="text/javascript" >
$(function(){
    var loader=$('#loader');
    var pollcontainer=$('#pollcontainer');
    loader.fadeIn();
    //Load the poll form
    $.get('poll.php', '', function(data, status){
        pollcontainer.html(data);
        animateResults(pollcontainer);
        pollcontainer.find('#viewresult').click(function(){
            //if user wants to see result
            loader.fadeIn();
            $.get('poll.php', 'result=1', function(data,status){
                pollcontainer.fadeOut(1000, function(){
                    $(this).html(data);
                    animateResults(this);
                });
                loader.fadeOut();
            });
            //prevent default behavior
            return false;
        }).end()
        .find('#pollform').submit(function(){
            var selected_val=$(this).find('input[name=poll]:checked').val();
            if(selected_val!=''){
                //post data only if a value is selected
                loader.fadeIn();
                $.post('poll.php', $(this).serialize(), function(data, status){
                    $('#formcontainer').fadeOut(100, function(){
                        $(this).html(data);
                        animateResults(this);
                        loader.fadeOut();
                    });
                });
            }
            //prevent form default behavior
            return false;
        });
        loader.fadeOut();
    });

    function animateResults(data){
        $(data).find('.bar').hide().end().fadeIn('slow', function(){
                            $(this).find('.bar').each(function(){
                                var bar_width=$(this).css('width');
                                $(this).css('width', '0').animate({ width: bar_width }, 1000);
                            });
                        });
    }

});
</script>
</head>
<body>
    <div id="container" >
        <h1>User Poll</h1>
        <div id="pollcontainer" >
        </div>
        <p id="loader" >Loading...</p>
    </div>
</body>
</html> 
```

投票.php

```
 <?php
    //Update database information according to your server settings
    $conn=mysql_connect('localhost', 'root', '') or die("Can't connect to mysql host");
    //Select the database to use
    mysql_select_db('ahmed') or die("Can't connect to DB");
    if(!$_POST['poll'] || !$_POST['pollid']){
        $query=mysql_query("SELECT id, ques FROM questions ORDER BY id DESC LIMIT 1");
        while($row=mysql_fetch_assoc($query)){
            //display question
            echo "<p class=\"pollques\" >".$row['ques']."</p>";
            $poll_id=$row['id'];
        }
        if($_GET["result"]==1 || $_COOKIE["voted".$poll_id]=='yes'){
            //if already voted or asked for result
            showresults($poll_id);
            exit;
        }
        else{
        //display options with radio buttons
            $query=mysql_query("SELECT id, value FROM options WHERE ques_id=$poll_id");
            if(mysql_num_rows($query)){
                echo '<div id="formcontainer" ><form method="post" id="pollform" action="'.$_SERVER['PHP_SELF'].'" >';
                echo '<input type="hidden" name="pollid" value="'.$poll_id.'" />';
                while($row=mysql_fetch_assoc($query)){
                    echo '<p><input type="radio" name="poll" value="'.$row['id'].'" id="option-'.$row['id'].'" /> 
                    <label for="option-'.$row['id'].'" >'.$row['value'].'</label></p>';
                }
                echo '<p><input type="submit"  value="Submit" /></p></form>';
                echo '<p><a href="'.$_SERVER['PHP_SELF'].'?result=1" id="viewresult">View result</a></p></div>';
            }
        }
    }
    else{
        if($_COOKIE["voted".$_POST['pollid']]!='yes'){

            //Check if selected option value is there in database?
            $query=mysql_query("SELECT * FROM options WHERE id='".intval($_POST["poll"])."'");
            if(mysql_num_rows($query)){
                $query="INSERT INTO votes(option_id, voted_on, ip) VALUES('".$_POST["poll"]."', '".date('Y-m-d H:i:s')."', '".$_SERVER['REMOTE_ADDR']."')";
                if(mysql_query($query))
                {
                    //Vote added to database
                    setcookie("voted".$_POST['pollid'], 'yes', time()+86400*300);               
                }
                else
                    echo "There was some error processing the query: ".mysql_error();
            }
        }
        showresults(intval($_POST['pollid']));
    }
    function showresults($poll_id){
        global $conn;
        $query=mysql_query("SELECT COUNT(*) as totalvotes FROM votes WHERE option_id IN(SELECT id FROM options WHERE ques_id='$poll_id')");
        while($row=mysql_fetch_assoc($query))
            $total=$row['totalvotes'];
        $query=mysql_query("SELECT options.id, options.value, COUNT(*) as votes FROM votes, options WHERE votes.option_id=options.id AND votes.option_id IN(SELECT id FROM options WHERE ques_id='$poll_id') GROUP BY votes.option_id");
        while($row=mysql_fetch_assoc($query)){
            $percent=round(($row['votes']*100)/$total);
            echo '<div class="option" ><p>'.$row['value'].' (<em>'.$percent.'%, '.$row['votes'].' votes</em>)</p>';
            echo '<div class="bar ';
            if($_POST['poll']==$row['id']) echo ' yourvote';
            echo '" style="width: '.$percent.'%; " ></div></div>';
        }
        echo '<p>Total Votes: '.$total.'</p>';
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:02:56.680

更改第 6 行`poll.php`：

```
if(!$_POST['poll'] || !$_POST['pollid']){ 
```

到：

```
if(!isset($_POST['poll']) || !isset($_POST['pollid'])){ 
```

如所写，它假定存在`$_POST['poll']`并且 以它的值为`null`,`false`或为条件`0`。在值根本不存在的情况下，您看到的错误就是结果。解决方案是确认变量是否已使用`isset()`.

另外，将第 15 行从：

```
if($_GET["result"]==1 || $_COOKIE["voted".$poll_id]=='yes'){ 
```

到

```
if((isset($_GET["result"]) && $_GET["result"] == 1) || (isset($_COOKIE["voted"  .$poll_id]) && $_COOKIE["voted" . $poll_id] == 'yes')){ 
```

类似地，正如所写，它假定存在`$_GET['result']`并且以它的价值为条件`1`。在值根本不存在的情况下，您看到的错误就是结果。解决方案再次是首先确认变量已经被设置，`isset()`然后检查它的值。

* * *

见： http: [//php.net/manual/en/function.isset.php](http://php.net/manual/en/function.isset.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:02:31.053

你应该改变：

```
if(!$_POST['poll'] || !$_POST['pollid']){ 
```

到

```
if(!isset($_POST['poll']) || !isset($_POST['pollid'])){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T12:29:58.937

当您的页面向 poll.php 发送一个没有请求数据的 GET 请求时，它会到达第 6 行并尝试评估 $_POST['poll']。除非此时 $_POST 数组中没有“poll”键，因此您会收到该错误。**在尝试评估它们之前，使用 isset() 来测试数组键是否存在**。如果你想测试一个键的存在并且它被设置为评估为 的东西`true`，那么你可以写：

```
if(isset($_POST['poll']) && $_POST['poll']){
    /*...code...*/
} 
```

在之后评估 $_POST['poll'] 是可以的，`&&`因为如果 isset() 返回 false，它将停止评估。

另外，我注意到，至少在一种情况下，您将 $_POST 数据直接放入 mysql 查询中。[不要那样做](http://en.wikipedia.org/wiki/SQL_injection)。

这种处理太常见了，我用一个支持功能让它无忧；它做了三件事：1）`null`如果键不存在，则返回没有通知/错误 2）如果值确实存在，则转义字符串以防止 SQL 注入 3）进行一些可选的类型转换，这对于布尔值等非常有用。然后我可以用这种模式写：

```
$poll_id = $Input->get('poll_id', Input::INT);

if($poll_id) { /* do stuff */ } 
```

# matlab - ichol 作为 cholinc 替代品：非正向枢轴

> ID：12895228
> 
> 赞同：1
> 
> 时间：2012-10-15T12:00:02.393
> 
> 标签：matlab, linear-algebra, matrix-factorization

在 Matlab 2012 中，该`cholinc`命令被标记为过时。警告消息说它将被替换为`ichol`. 直到现在我都在使用`cholinc(A,droptol)`，通常与`droptol=1E-15`. 在我尝试使用的新版本中`ichol(A,struct('droptol',droptol,'type','ict'))`，大部分时间都可以使用，但有时我会收到警告消息

```
Error using ichol
Encountered nonpositive pivot. 
```

这是一个基本问题（即一个问题`cholinc`也有但没有报告）还是有办法让`ichol`行为像`cholinc`以前那样？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-15T18:34:52.940

该错误表明不完全 Cholesky 方法已失效，这是众所周知的对称正定矩阵的可能性，但不是对角占优矩阵。也就是说，即使矩阵具有（完全）Cholesky 分解，它也可能没有不完全 Cholesky 分解。

`cholinc`不会出现故障，因为它不是真正的不完整 Cholesky。相反，它`luinc`在没有旋转的情况下调用，抛出 L，然后缩放得到的 U 以获得一种不完整的 Cholesky 因子（请参阅 文​​档`cholinc`，算法部分的第一段）。`cholinc`您可以通过 using获得与 from 非常相似的因子`ilu`（请注意，`luinc`它也已过时）。

```
[L,U] = ilu(A,struct('type','ilutp','droptol',droptol,'thresh',0));
R = diag(sqrt(abs(diag(U))))\U;
% Essentially the same as cholinc. 
```

`ichol`如果可能，强烈建议使用。请注意，您可以使用该`'diagcomp'`选项来尝试防止分解中的故障，但找到有效的参数`alpha`可能需要进行试验。`ichol`有关示例，请参见文档。当`ichol`不崩溃时，它往往会更快，因为它利用了对称性。此外，它往往会产生更稀疏的因子，`cholinc`这会导致更快地应用因子作为预条件子，这可能意味着更快的求解时间`pcg`。例如，

```
M = delsq(numgrid('L',200));
tic; R1 = ichol(M,struct('type','ict','droptol',1e-2,'shape','upper')); toc
% Elapsed time is 0.013809 seconds.
nnz(R1)
% ans = 145632
tic; R = cholinc(M,1e-2); toc
% Elapsed time is 0.167155 seconds.
nnz(R)
% ans = 173851 
```

公平地说，`cholinc`上面的时间包括发出警告的时间，但是只有一个警告的 tic/toc 表明该时间在这个特定计算的噪音中。

最后，请注意，默认情况下，`ichol`引用输入矩阵的下三角并返回下三角因子。更喜欢较低的三角因子可以显着提高性能：

```
tic; L = ichol(M,struct('type','ict','droptol',1e-2)); toc
% Elapsed time is 0.008895 seconds. 
```

最后一点，您上面提到的 1e-15 的跌落公差非常小。如果这是您使用的那种容差，则最好使用完整的因式分解，例如`chol`、`ldl`或`lu`。

# ruby-on-rails - 如何在 Ruby 中实现 OAuth2？

> ID：12895230
> 
> 赞同：2
> 
> 时间：2012-10-15T12:00:20.830
> 
> 标签：ruby-on-rails

我希望我的 Rails 应用程序充当 OAuth2 提供者。

我对 Ruby 开发比较陌生，但在我看来，用 Ruby 开发 OAuth2 很简单。

我在网上看到很多 OAuth2 库，但不知道如何在 Rails 项目中实现。

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:08:29.473

如果您可以更具体地了解您想要实现的目标，那将会有所帮助。我假设您想授权使用 Oauth2 的用户，例如使用 Google 或 Facebook

我可以推荐设计宝石。

[https://github.com/plataformatec/devise](https://github.com/plataformatec/devise)

可用于通过许多提供商（例如 facebook）进行授权

[https://github.com/mkdynamic/omniauth-facebook](https://github.com/mkdynamic/omniauth-facebook)

或谷歌

[https://github.com/zquestz/omniauth-google-oauth2](https://github.com/zquestz/omniauth-google-oauth2)

更新

facebook身份验证说明

将 Gem 添加到您的 Gemfile

```
gem 'devise' 
```

并从命令行运行：

```
bundle install 
```

然后运行以下命令

```
rails generate devise:install

rails generate devise user

rake db:migrate 
```

其中 user 是您要在其中存储用户信息的模型

您需要在模型中添加一些字段

```
rails generate migration add_columns_to_user email:string provider:string
rake db:migrate 
```

然后创建一个 facebook 应用程序，因为您需要应用程序 ID 和密钥来授权用户

我将此添加到 config/initializers/constants.rb

```
APPID = 'YOUR_APP_ID'
FBKEY = 'YOUR_FB_KEY' 
```

将以下代码添加到 config/initializers/devise.rb

```
require 'devise/orm/active_record'
require "omniauth-facebook"
config.omniauth :facebook, APPID, FBKEY 
```

将以下代码添加到 config/routes.rb 的底部

```
devise_for :users, :controllers => { :omniauth_callbacks => "users/omniauth_callbacks" } 
```

确保设计没有添加另一个 devise_for 路由，如果 routes.rb 中已经存在路由则删除并添加上面的代码

将以下代码添加到您的 app/models/user.rb 文件中

```
devise :database_authenticatable, :registerable,
     :recoverable, :rememberable, :trackable, :validatable,
     :omniauthable

# Setup accessible (or protected) attributes for your model
attr_accessible :email,  :provider, :uid, :email, :password, :password_confirmation, :remember_me

def self.find_for_facebook_oauth(auth, signed_in_resource=nil)
  user = User.where(:provider => auth.provider, :uid => auth.uid).first
  unless user
    user = User.create(  provider:auth.provider,
                       uid:auth.uid,
                       email:auth.info.email,
                       password:Devise.friendly_token[0,20]
                       )
  end
  user
end 
```

在 app/controllers 添加一个名为 users 的目录

mkdir 用户

然后将带有以下代码的文件omniauth_callbacks_controller.rb 添加到用户目录

```
class Users::OmniauthCallbacksController < Devise::OmniauthCallbacksController
  def facebook
    # You need to implement the method below in your model (e.g. app/models/user.rb)
    @user = User.find_for_facebook_oauth(request.env["omniauth.auth"], current_user)

    if @user.persisted?
      flash[:notice] = I18n.t "devise.omniauth_callbacks.success", :kind => "Facebook"
      sign_in_and_redirect @user, :event => :authentication
    else
      session["devise.facebook_data"] = request.env["omniauth.auth"]
      redirect_to new_user_registration_url
    end
  end
end 
```

将以下代码添加到您的视图中

```
<% if current_user%>
  <%= current_user.email %>
  <%= link_to('Logout', destroy_user_session_path, :method => :delete) %>
<% else %>
  <%= link_to "Sign in with Facebook", user_omniauth_authorize_path(:facebook) %>
<% end%> 
```

# blackberry - 黑莓在文本字段中插入搜索图标？

> ID：12895237
> 
> 赞同：1
> 
> 时间：2012-10-15T12:00:40.253
> 
> 标签：blackberry, blackberry-jde

场景：我想在文本字段中添加一个搜索图标。在我写完查询并按回车后，搜索应该可以从列表视图中进行。

我想要什么：我只想将搜索图标放在我将在查询后按下的文本字段中。如图片所示

![在此处输入图像描述](../Images/580f8c65f7856b6fd214a5e89a5e325d.png)

我试过了，但它没有把它放在文本字段中，而是放在它外面，所以很难：S

提前致谢！

# events - 如何使用 sammy.js 订阅“路由”事件？

> ID：12895239
> 
> 赞同：3
> 
> 时间：2012-10-15T12:00:44.090
> 
> 标签：events, navigation, sammy.js

我使用 sammy.js 进行导航，我必须处理更改链接后发生的事件。例如，用户单击“#/contact”链接，因此，在成功导航后，我希望触发我的事件。我找到了“after”属性并尝试插入此代码：

```
this.after('#/contact', function () {
    //my code
}); 
```

但它没有执行。我究竟做错了什么？

其实问题出在以下情况：

我有一个带有 2 个选项卡的页面：主页和联系人。联系人包含谷歌地图。

如果用户首先转到联系人，则谷歌地图已正确加载，但如果用户进入主页选项卡然后切换到联系人选项卡，则谷歌地图未正确加载，我只能在左上角看到一小块地图角落。

有什么建议么？

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T05:58:30.337

我建议使用自定义事件来处理这个：

```
var app = $.sammy(function() {

    this.get('#/contact', function() {
        this.trigger('myEvent', { myData: 'This a contact!' });
    });

}); 
```

或者，如果您想监听所有已运行的路由，请尝试：

```
this.bind('run-route', function() {
    console.log("I got routed");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T07:51:23.593

如果我理解你的话，你只需要这样做：

`location.hash = "contact";`

并且路由事件将触发。

# c# - 如何将javascript日期存储到sql server中？

> ID：12895251
> 
> 赞同：3
> 
> 时间：2012-10-15T12:01:32.837
> 
> 标签：c#, javascript, asp.net, sql

我正在从 java 脚本中获取日期，并希望通过执行 c# 代码将其存储在 sql 表中。

怎么做？

java 脚本格式：2012 年 10 月 15 日星期一 15:34:18 UTC+0530

mssql 格式：2012-10-15 16:18:04.000

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T12:03:06.820

您可以将 JavaScript 日期解析为 C#`DateTime`类型（使用[DateTime.ParseExact](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)），然后使用参数化查询将其保存在 SQL 服务器中。对于您的日期格式，您可以尝试：

```
string str = "Mon Oct 15 15:34:18 UTC+0530 2012"; //your javascript date as string
DateTime dt = DateTime.ParseExact(str, 
                                  "ddd MMM d HH:mm:ss UTCzzzzz yyyy", 
                                   CultureInfo.InvariantCulture); 
```

# java - 带有命令行参数的 Math.pow

> ID：12895256
> 
> 赞同：1
> 
> 时间：2012-10-15T12:01:47.460
> 
> 标签：java, math, command-line

我需要通过用户获取给定数字的幂值（作为命令行参数）

这是我的代码，它出现了编译错误。

谁能帮帮我吗 ？

```
class SquareRoot{

      public static void main(String args []){

          double power = Math.pow(args[0]);         
          System.out.println("Your squared value is " + power);

      }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T12:06:40.273

`Math.pow`接受两个参数，您必须从命令行获取两个数字或一个“硬编码”。

这是签名：

```
public static double pow(double a, double b) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T12:03:21.537

`args[0]`是`String`您需要将其转换为双精度。您可以使用`Double.parseDouble()`

检查[Math.pow的语法](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#pow%28double,%20double%29)

```
double power = Math.pow(Double.parseDouble(args[0]), Double.parseDouble(args[1])); 
```

您需要传递两个参数`base`和`exponent`. 或者对于正方形，您将具有第二个参数的值`2`

```
double power = Math.pow(Double.parseDouble(args[0]), 2); 
```

此外，您的班级名称`SqaureRoot`也不`square`是第二个参数

```
 double power = Math.pow(Double.parseDouble(args[0]), 0.5); 
```

或者干脆使用[Math.sqrt](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#sqrt%28double%29)

```
double squareroot = Math.sqrt(Double.parseDouble(args[0])); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-15T12:04:46.710

这是因为 Math.pow 需要两个参数。就像是：

```
double power = Math.pow(Double.parseDouble(args[0]),2.0); 
```

请参阅[javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#pow%28double,%20double%29)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-15T12:07:08.720

`Math#pow(double a, double b)`在哪里`a^b`

```
double power = Math.pow(Double.parseDouble(args[0]),2); 
```

# ruby-on-rails - 如果验证未通过，则在 URL 中传递参数，然后使用“新”操作呈现错误

> ID：12895258
> 
> 赞同：0
> 
> 时间：2012-10-15T12:01:56.557
> 
> 标签：ruby-on-rails, parameters, routing, render

我遇到了一些我怀疑并不难解决的问题，只是我缺乏经验让它变得很难。

我有我的路线

```
match '(/:client_id)/signup',   to: 'users#new' 
```

现在，如果客户端向 www.myappurl.com/123/signup 的任何人发送链接，则用户将注册并且他的用户模型将接收 client_id 作为参数（我稍后需要）。

控制器：

```
def new
  @user = User.new
  if signed_in?
    redirect_to root_path
  end
end

def create
  @user = User.new(params[:user])

  if @user.save
    sign_in @user
    flash[:success] = t("users.new.welcome")
    redirect_to @user
  else
    render 'new' #and this is the problem
  end
end 
```

问题是，当用户提交他的应用程序时，他提供的信息没有通过验证，然后呈现“新”操作，但我失去了这个 :client_id 参数，因此他和客户之间的关联。

我试过redirect_to 并传递参数。这有效，但不显示错误消息。

任何想法如何解决它？

编辑

我在提交无效信息之前的调试：

```
controller: users
action: new
locale: en
client_id: '2' 
```

之后：

```
!binary "dXRmOA==": ✓
!binary "YXV0aGVudGljaXR5X3Rva2Vu": ldtdjuWAWHB052qY3ASoH1Mv3XYtrdRcL56DgSaYC0Q=
!binary "dXNlcg==": !ruby/hash:ActiveSupport::HashWithIndifferentAccess
!binary "Zmlyc3RfbmFtZQ==": ''
!binary "bGFzdF9uYW1l": ''
!binary "ZW1haWw=": ''
!binary "Y2xpZW50X2lk": '2'
!binary "cGFzc3dvcmQ=": ''
!binary "cGFzc3dvcmRfY29uZmlybWF0aW9u": ''
!binary "Y29tbWl0": Create my account
action: create
controller: users
locale: en 
```

服务器日志

```
Started POST "/en/users" for 127.0.0.1 at 2012-10-16 07:10:31 +0800
Processing by UsersController#create as HTML
Parameters: {"utf8"=>"✓", "authenticity_token"=>"ldtdjuWAWHB052qY3ASoXYtrdRcL56DgSaYC0Q=", "user"=>{"first_name"=>"", "last_name"=>"", "email"=>"", "client_id"=>"2", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create my account", "locale"=>"en"}
(0.4ms) BEGIN
User Exists (2.5ms)  SELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('') LIMIT 1
(0.1ms)  ROLLBACK
Rendered shared/_error_messages.html.erb (18.6ms)
Rendered users/_fields_for_registration_no_verification.html.erb (36.9ms)
Rendered users/_password_fields.html.erb (3.6ms)
Rendered users/new.html.erb within layouts/application (77.5ms)
Rendered layouts/_shim.html.erb (0.0ms)
Rendered layouts/_google_tracking_code (0.0ms)
User Load (2.4ms)  SELECT "users".* FROM "users" WHERE "users"."remember_token" IS NULL  LIMIT 1
Rendered layouts/_header.html.erb (8.7ms)
Rendered layouts/_footer.html.erb (1.5ms)
Completed 200 OK in 437ms (Views: 213.4ms | ActiveRecord: 14.9ms) 
```

编辑

我找到了问题的真正根源（与下面的答案不同）。问题是当我在表单中使用隐藏字段时，我使用了以下代码：

```
<%= f.hidden_field :client_id, { :value => params[:client_id]} %> 
```

事实证明，一旦我删除了该`{ :value => params[:client_id]}`部分，在注册失败后一切都开始按预期工作。永远感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:31:52.750

这是因为当验证失败并呈现 new 时，您`:cliend_id`会从`@user`对象中丢失。

```
def new
  if params[:client_id]
    @user = User.new(:client_id => params[:client_id])
  else
    @user = User.new
  end 
  if signed_in?
    redirect_to root_path
  end
end 
```

在您`users/new.html.haml`看来，请确保您拥有`:client_id`.

```
=form_for @user do |u|
  =f.hidden_field :client_id  #This will prevent your client_id from getting lost when validation fails. 
```

更简洁的方法是将 before_filter 用于您的新操作。希望你能明白。

# python - Python中如何从派生类中获取父类实例的名称？

> ID：12895269
> 
> 赞同：0
> 
> 时间：2012-10-15T12:02:34.750
> 
> 标签：python, inheritance, instance

您好我想从继承的子类中获取基类的实例名称。

例如。

```
class Foo():
    def __init__(self, fakeArg):
        self.a = fakeArg

class Bar(Foo):
    def __init__(self, fakeArg1):
        Foo.__init__(self)
        self.b = fakeArg1
        # say, i store parent(Foo) instance in an variable too
        self.c = f

f = Foo('Hello')
b = Bar('Bar') 
```

现在我想将“f”附加（关联）到“b”，这样如果我将类 Bar 实例化为 b，它还应该存储父类的哪个实例正在调用派生类实例。

一种方法是将父类（Foo）实例“f”解析为类（Bar）的“ **_ *init* _** ”方法的参数。但是，这是一种黑客行为。

请提供问题的解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:09:12.103

对你来说听起来像是 hack 的是你应该怎么做。

请记住，每个类可能有大量实例，因此它**无法**自动知道哪个应该与它“相关” - 并使用任何类型的魔法（例如检查父堆栈帧中是否有一个变量包含`Foo`和希望这是唯一的）如果我是你的老板，那将是非常丑陋的，并且有理由狠狠地打你一巴掌。

因此，您**应该**`f`作为参数传递给`Bar()`.

如果您不想要一个单独的`Foo`实例 - 即您想要正常继承 - 无需创建 的实例，只需在构造函数中`Foo`调用`Foo.__init__(self, 'Hello')`or并可能接受该值作为参数而不是对其进行硬编码。`super(Bar, self).__init__('Hello')``Bar`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T13:02:14.663

听起来您可能对继承在 Python 中的工作方式感到困惑。在您显示的代码中，除了被彼此相邻实例化之外，它们并不相关`f`。`b`

但是，您的`Bar`实例`b`确实可以访问一个`Foo`实例，即它自己。通过声明它`Bar`是您的子类，`Foo`您是在说每个实例`Bar`也是`Foo`. 您可以使用`isinstance(b, Foo)`.

如果您需要`Foo`从 的方法中访问定义的变量或方法`bar`，通常您可以直接在`self`传递的值上访问它。或者，如果您要覆盖其中的方法`Bar`（即，定义一个与您已经存在的方法同名的方法，则`Foo`可以使用[`super`](http://docs.python.org/dev/library/functions.html#super)：

```
class Foo:
    def __init__(self, a):
        self.a = a

    def sayHello(self):
        print("Hello!")

class Bar(Foo):
    def __init__(self, a, b):
        super().__init__(self, a)  # calls overridden __init__ method from Foo
        self.b = b

    def doSomething(self):
        self.sayHello()            # calls a method defined in Foo
        return self.a + self.b     # accesses variable "a" that was set in Foo 
```

（请注意，上面的代码适用于 Python 3。有一些小问题会导致它在 Python 2 中无法正常工作。如果您出于维护旧版 Python 2 应用程序以外的任何原因学习 Python，我建议使用 Python 3 学习.)

# vk - Vkontakte HTTP API 返回“不正确的签名”

> ID：12895273
> 
> 赞同：0
> 
> 时间：2012-10-15T12:03:01.693
> 
> 标签：vk

我在使用 Vkontakte HTTP API 时遇到问题。我正在尝试在我自己的 VK 应用程序中使用“audio.search”方法，但没有成功。

一位朋友给了我一个 'api_id'、'api_secret' 和 'viewer_id' 来测试我的代码并完美运行，但是当我尝试使用我自己的应用程序中的数据时，它只会返回“不正确的签名：iframe/flash 授权”。

我使用我的用户 ID 作为“viewer_id”，我的应用程序 ID 作为“api_id”，应用程序的安全密钥作为“api_secret”。

我做错什么了吗？我找不到解决方案。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-02T13:23:35.133

尝试新的 API。它不需要签名......检查这个：http: [//vk.com/dev/audio.search](http://vk.com/dev/audio.search)

样品要求：

[https://api.vk.com/method/audio.search.xml?access_token=TOKEN&q=Ke%24ha+-+C%27Mon&count=1&sort=2&v=5.5](https://api.vk.com/method/audio.search.xml?access_token=TOKEN&q=Ke%24ha+-+C%27Mon&count=1&sort=2&v=5.5)

只需用您的令牌替换**TOKEN**

# regression - 未达到收敛时，SAS 的 PROC GENMOD 返回什么值？

> ID：12895274
> 
> 赞同：0
> 
> 时间：2012-10-15T11:47:49.490
> 
> 标签：regression, sas

更具体地说，它们是最后一次迭代结束时的统计数据吗？或者是其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T17:27:20.607

我不确定您所说的“返回”是什么意思。如果您正在查看显示的输出，如果不满足收敛标准，您将看到警告，并且系数估计值可能不会显示标准误差。

如果您不查看显示的输出（例如，使用选项`noprint`），您可以查看[名为](http://support.sas.com/documentation/cdl/en/statug/63347/HTML/default/viewer.htm#statug_genmod_sect058.htm)`ConvergenceStatus`. 要使用它，只需添加

```
ods output ConvergenceStatus=_dataset_name_you_want; 
```

在你的`proc`陈述之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T03:59:20.550

proc genmod 的输出只是来自拟合算法在停止时达到的任何阶段。有时输出很有用；该算法正在取得（缓慢）进展，但在收敛之前达到了迭代限制。在这种情况下，您通常可以使用打印的内容作为正确解决方案的粗略近似值。

其他时候，算法可能已经崩溃：它试图记录一个负数，或者遇到数字溢出，或者迭代是发散的。在这种情况下，您可能无法获得任何可用的东西。

通常，您可以通过检查输出中是否存在难以置信的大数字（或缺失值）来了解发生了哪些情况。例如，估计值比您预期的要大几个数量级，这可能会导致溢出。

# iphone - CABasicAnimation Position.Y

> ID：12895278
> 
> 赞同：1
> 
> 时间：2012-10-15T12:03:15.830
> 
> 标签：iphone, objective-c

我只想用这个函数为我的 UIButton 的位置设置动画：

```
CABasicAnimation *moveUp;
    moveUp          = [CABasicAnimation animationWithKeyPath:@"position.y"];
    moveUp.fromValue = [NSNumber numberWithFloat:self.retestBTN.frame.origin.y];
    moveUp.toValue  = [NSNumber numberWithFloat:self.retestBTN.frame.origin.y - 50];
    moveUp.duration = 1.0;
    moveUp.removedOnCompletion = NO;
    moveUp.fillMode = kCAFillModeBoth;
    moveUp.delegate = self;
    [[retestBTN layer] addAnimation:moveUp forKey:@"y"]; 
```

然后我想稍后用那个函数把它动画化：

```
CABasicAnimation *moveDown;
moveDown            = [CABasicAnimation animationWithKeyPath:@"position.y"];
moveDown.fromValue  = [NSNumber numberWithFloat:self.retestBTN.frame.origin.y];
moveDown.toValue    = [NSNumber numberWithFloat:self.retestBTN.frame.origin.y + 50];
moveDown.duration   = 1.0;
moveDown.removedOnCompletion = NO;
moveDown.fillMode   = kCAFillModeForwards;
[[retestBTN layer] addAnimation:moveDown forKey:@"y"]; 
```

但这不能正常工作，我的 UIButton 进入奇怪的位置......

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-23T13:48:59.900

您面临的问题是位置与原点不同。

无论如何，您正在对位置进行相对动画，因此如果您跳过 and 而是使用该属性（具有相对变化）会`toValue`更`fromValue`容易`byValue`。您的代码如下所示：

```
CABasicAnimation *moveUp;
moveUp          = [CABasicAnimation animationWithKeyPath:@"position.y"];      
moveUp.byValue  = @(-50.0f); // or [NSNumber numberWithFloat:-50.0f] if you really need to
moveUp.duration = 1.0;
moveUp.removedOnCompletion = NO;
moveUp.fillMode = kCAFillModeBoth;
moveUp.delegate = self;
[[retestBTN layer] addAnimation:moveUp forKey:@"y"]; 
```

和

```
CABasicAnimation *moveDown;
moveDown            = [CABasicAnimation animationWithKeyPath:@"position.y"];
moveDown.byValue    = @(50.0f); // or [NSNumber numberWithFloat:50.0f] if you really need to
moveDown.duration   = 1.0;
moveDown.removedOnCompletion = NO;
moveDown.fillMode   = kCAFillModeForwards;
[[retestBTN layer] addAnimation:moveDown forKey:@"y"]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T13:50:37.903

通过使用 CAAnimation，您只是在为图层设置动画。而且您实际上永远不会更改`modelLayer`对象的属性，只是`presentationLayer`因为您只创建动画而从未真正更改`position`图层的属性。这意味着按钮实际上永远不会移动，只是在屏幕上绘制的位置移动。

如果您的按钮是 UIButton，那么它仍然会在视图所在的位置而不是图层所在的位置接收触摸。您可以使用 UIKit 更轻松地为任何视图设置动画，如下所示：

```
[UIView animateWithDuration:1.0
                      delay:0.0
                    options:UIViewAnimationOptionCurveEaseInOut
                 animations:^{
                     CGRect frame = self.retestBTN.frame;
                     frame.origin.y -= 50;
                     self.retestBTN.frame = frame;
                 }
                 completion:^(BOOL finished){
                     //callback code goes here
                 }]; 
```

# google-maps - 谷歌地图上的不同风格标记

> ID：12895279
> 
> 赞同：0
> 
> 时间：2012-10-15T12:03:19.860
> 
> 标签：google-maps

我有以下脚本，当用户单击链接时，它会使用标记填充地图。

可以有 1 到 12 个单独的标记，如果变量 favourite 等于 1，我想做的是使用不同的标记。

同一张地图上可以有多个收藏夹。

我假设在“新的 google.maps.Marker”部分中需要添加一个“if favorite == 1”，但我无法理解它！

```
<script>
$(document).ready(function() {
$("#map").css({
    height: 900,
    width: 1400
});
var myLatLng = new google.maps.LatLng(<%=dcLatLng%>); //Query database for map center
MYMAP.init('#map', myLatLng, 12);

$("#showmarkers").click(function(e){
    MYMAP.placeMarkers('markers.asp?WisperID=<%=sWisperID%>');
});
});

var MYMAP = {
map: null,
bounds: null
}

MYMAP.init = function(selector, latLng, zoom) {
var myOptions = {
zoom:zoom,
center: latLng,
mapTypeId: google.maps.MapTypeId.ROADMAP
}
this.map = new google.maps.Map($(selector)[0], myOptions);
this.bounds = new google.maps.LatLngBounds();
}

MYMAP.placeMarkers = function(filename) {
$.get(filename, function(xml){
    $(xml).find("marker").each(function(){
        var name = $(this).find('name').text();
        var address = $(this).find('address').text();
        var postcode = $(this).find('postcode').text();
        var favourite = $(this).find('favourite').text();
        // create a new LatLng point for the marker
        var lat = $(this).find('lat').text();
        var lng = $(this).find('lng').text();
        var point = new google.maps.LatLng(parseFloat(lat),parseFloat(lng));

        // extend the bounds to include the new point
        MYMAP.bounds.extend(point);

        var marker = new google.maps.Marker({
            position: point,
            map: MYMAP.map,
            icon: new google.maps.MarkerImage(
            '/images/int.png',
            new google.maps.Size(93, 63),
            new google.maps.Point(0, 0),
            new google.maps.Point(0, 63)
  )
        });

        var infoWindow = new google.maps.InfoWindow();
        var html='<strong>'+name+'</strong.><br />'+address+'<br  />'+postcode+'<br /><p>'+favourite+'</p>';
        google.maps.event.addListener(marker, 'mouseover', function() {
            infoWindow.setContent(html);
            infoWindow.open(MYMAP.map, marker);
        });
        google.maps.event.addListener(marker, 'mouseout', function() {
            infoWindow.setContent(html);
            infoWindow.close(MYMAP.map, marker);
        });
        MYMAP.map.fitBounds(MYMAP.bounds);
    });
});
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:44:17.970

你几乎明白了。我假设这样的事情符合您的要求：

```
if (favourite == '1') {
        var marker = new google.maps.Marker({
            position: point,
            map: MYMAP.map,
            icon: new google.maps.MarkerImage(
                '/images/favourite.png',  // different image
                new google.maps.Size(93, 63),
                new google.maps.Point(0, 0),
                new google.maps.Point(0, 63)
            )
        });
} else {
        var marker = new google.maps.Marker({
            position: point,
            map: MYMAP.map,
            icon: new google.maps.MarkerImage(
                '/images/int.png',
                new google.maps.Size(93, 63),
                new google.maps.Point(0, 0),
                new google.maps.Point(0, 63)
            )
        });
} 
```

# java - 如何编写自定义 DefaultTableCellRenderer 为特定单元格着色并“保留”其他单元格的颜色，Java

> ID：12895283
> 
> 赞同：3
> 
> 时间：2012-10-15T12:03:34.947
> 
> 标签：java, swing, jtable, background-color, tablecellrenderer

我正在使用 netbeans 及其 gui 构建器来创建桌面应用程序。为了给我的 jTables 中的特殊单元格着色，我基于示例代码实现了一个自定义 DefaultTableCellRenderer。到目前为止它有效。

我的问题是覆盖函数“getTableCellRendererComponent()”的其他情况。我不希望不在指定范围内的单元格变为“白色” - 我希望这些单元格以它们已经拥有的颜色显示（例如，如果它们有，我不想将那里的颜色更改为“白色”被“红色”）。

如果有人可以帮助我，我会很高兴！

提前非常感谢。
史蒂芬

```
class ColoredTableCellRenderer extends DefaultTableCellRenderer
{

    /** constructor */
    public ColoredTableCellRenderer(int rowToColorizeStart, int rowToColorizeStop, int columnToColorizeStart, int columnToColorizeStop, Color color)
    {
        mRowToColorizeStart = rowToColorizeStart;
        mRowToColorizeStop = rowToColorizeStop;
        mColumnToColorizeStart = columnToColorizeStart;
        mColumnToColorizeStop = columnToColorizeStop;
        mColor = color;
    }

    private int mRowToColorizeStart = 0;
    public void setRowToColorizeStart(int rowToColorizeStart) {
        mRowToColorizeStart = rowToColorizeStart;  
    }
    public int getRowToColorizeStart() {
        return mRowToColorizeStart;  
    }

    private int mRowToColorizeStop = 0;
    public void setRowToColorizeStop(int rowToColorizeStop) {
        mRowToColorizeStop = rowToColorizeStop;  
    }
    public int getRowToColorizeStop() {
        return mRowToColorizeStop;  
    }

        private int mColumnToColorizeStart = 0;
    public void setColumnToColorizeStart(int columnToColorizeStart) {
        mColumnToColorizeStart = columnToColorizeStart;  
    }
    public int getColumnToColorizeStart() {
        return mColumnToColorizeStart;  
    }

    private int mColumnToColorizeStop = 0;
    public void setColumnToColorizeStop(int columnToColorizeStop) {
        mColumnToColorizeStop = columnToColorizeStop;  
    }
    public int getColumnToColorizeStop() {
        return mColumnToColorizeStop;  
    }

    private Color mColor = Color.WHITE;
    public void setColor(Color color) {
        mColor = color;  
    }
    public Color getColor() {
        return mColor;  
    }

    @Override
    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {

        Component cellComponent = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);    

        if( (row >= getRowToColorizeStart()) && (row <= getRowToColorizeStop()) && (column >= getColumnToColorizeStart()) && (column <= getColumnToColorizeStop()) && (isSelected == false) ) {
            cellComponent.setBackground(getColor());    
        } else {
           cellComponent.setBackground(Color.WHITE);
        }

        return cellComponent;

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T12:20:24.237

> 如何编写自定义 DefaultTableCellRenderer 以“仅”为特定单元格着色，Java

代码行

[公共组件 getTableCellRendererComponent（JTable 表，对象值，布尔 isSelected，布尔 hasFocus，int 行，int 列）{](https://stackoverflow.com/search?q=user:714968%20%5Bjtable%5D%20DefaultTableCellRenderer)

谈论发生了什么

*   是否选择了单元格 ( `boolean isSelected`)

*   如果单元格被选中和/或也有焦点 ( `boolean hasFocus`)

*   对于 JTable ( `int row`)中的行

*   在 JTable ( `int column`)的列中

然后在那里你可以改变`Font`, `Border`, `Color`, `Icon`ei

注意 ---> 不要改变，永远不要改变，一定要尽量`Object value`避免`XxxRenderer`

编辑

*   JTable 有两个维度，只定义行，看看 prepareRenderer

*   prepareRenderer 被指定用于行着色，[我的问题可以帮助你](https://stackoverflow.com/q/7132400/714968)或[在这里](https://stackoverflow.com/a/10281306/714968)，不要忘记覆盖`int modelRow = convertRowIndexToModel(row);`，在大多数情况下你可能会丢失索引模型与视图，因为 JTable 可以排序或过滤

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T12:12:41.670

我相信您正在寻找的是以下内容。它使用表格的 fg 和 bg 来绘制单元格。

```
else {
    setBackground(table.getBackground());
    setForeground(table.getForeground());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T12:13:03.573

您应该将`else`块更改为

```
 else if (cellComponent.getBackground != color){
         cellComponent.setBackground(white);
  } 
```

# vba - 剪贴板内容类型 Word VBA

> ID：12895284
> 
> 赞同：3
> 
> 时间：2012-10-15T12:03:36.340
> 
> 标签：vba, ms-word

请帮我解决这个问题：

在 word VBA 中，我试图获取在剪贴板中复制的数据类型。

如何使用 Word VBA 检查剪贴板中的内容类型。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-20T09:17:53.830

您可以使用`Getformat`方法 in`Clipboard Object`检查剪贴板是否具有某种类型的数据...请参阅这些链接以获得更好的说明...

[http://msdn.microsoft.com/en-us/library/ebwdx8yh%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/ebwdx8yh%28v=vs.90%29.aspx)

[http://msdn.microsoft.com/en-us/library/system.windows.forms.dataformats%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.dataformats%28v=vs.90%29.aspx)

[http://msdn.microsoft.com/en-us/library/aa240801(v=vs.60).aspx](http://msdn.microsoft.com/en-us/library/aa240801(v=vs.60).aspx)

# orm - 设置 Coldfusion ORM 不影响父文件夹

> ID：12895290
> 
> 赞同：1
> 
> 时间：2012-10-15T12:04:17.747
> 
> 标签：orm, coldfusion

我来自 PHP/MySQL 背景，现在我作为 Coldfusion 9 开发人员获得了新的后端职位。我对 Coldfusion 完全陌生，因此出于学习和测试目的，我在本地主机上安装了 CF。在我的本地主机上，我设置并测试了 ORM，它运行良好，并且不会干扰其他父文件夹。一旦我将 Application.cfc 文件上传到我们的主服务器，在 site/project89/cfc/orm/ 下

```
<cfcomponent>
  <cfset this.name = "whatevername">
  <cfset this.ormenabled = "true">
  <cfset this.datasource = "name_db">
</cfcomponent> 
```

它影响了整个父服务器文件夹，包括我们之前构建的所有其他冷融合项目的主“站点”文件夹。
有没有办法将 ORM 设置为仅影响其自己的子目录而不对其父文件夹进行任何更改？例如，为站点/项目 89 启用 ORM，并在其他站点/项目上阻止 ORM**。任何帮助或建议将不胜感激，因为在我工作的地方没有人熟悉 ORM，我不能再让我们的服务器崩溃。
谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T13:40:23.457

我认为您遇到的问题与您的应用程序的位置/结构有关。

您需要将您`Application.cfc`的移动到`site/project89`.

来自 ColdFusion 文档：

当 ColdFusion 开始处理请求时，它会执行以下操作：

> 它在页面目录中搜索名为 Application.cfc 的文件。如果存在，它会创建一个新的 CFC 实例，处理初始事件并停止搜索。（ColdFusion 为每个请求创建一个新的 CFC 实例并处理其初始化代码。）
> 
> 如果请求页面的目录没有 Application.cfc 文件，它会检查目录中的 Application.cfm 文件。如果存在，ColdFusion 逻辑上将 Application.cfm 页面包含在请求页面的开头并停止进一步搜索。如果请求页面的目录没有 Application.cfc 或 Application.cfm 文件，ColdFusion 会向上搜索目录树并首先检查每个目录中的 Application.cfc 文件，如果找不到，则查找 Application.cfm 页面, 直到到达根目录（如 C:）。
> 
> 当它找到 Application.cfc 或 Application.cfm 文件时，它会处理该页面并停止搜索。

[http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=appFramework_06.html（ColdFusion](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=appFramework_06.html) 8 但仍然相关）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T12:54:01.493

我猜在“受影响”下，您的意思是它正在到处寻找模型 CFC。如果这是真的，你可以尝试通过限制模型的路径来解决它：

```
this.ormsettings.cfclocation = "path.to.models"; 
```

# r - 在包安装期间向 .First() 添加行

> ID：12895292
> 
> 赞同：0
> 
> 时间：2012-10-15T12:04:25.757
> 
> 标签：r

我正在为我的公司开发 R 包，该公司的员工不太懂技术。

为了方便用户的生活，我正在考虑在全球位置设置一组脚本，这些脚本可以在启动时获取，以便更新和加载相关包。

我的想法是为每个自定义包创建一个脚本，只有在安装了该特定包时才能获取该脚本。为此，我需要在用户安装不同的包时修改 .First() 函数，以便在安装包 A 之后：

```
.First() <- function(){
    source('script_to_package_A')
} 
```

如果安装了包 B：

```
.First() <- function(){
    source('script_to_package_A')
    source('script_to_package_B')
} 
```

因此，如果 .First() 已经定义并且该行不在其中，或者如果不存在 .Rprofile，则我有兴趣在 .Rprofile 文件中添加一行。

实现这一目标的最佳方法是什么？

最好的祝愿托马斯

编辑：只是为了澄清-我正在寻找的是一种修改启动期间调用的 .First() 函数的安全方法。这意味着如果用户已经定义了一个 .First() 函数，则只会追加添加而不是替换旧的 .First()。最好在安装特定软件包时进行此添加，但这不是必需的。我对添加到 .First() 函数中的内容相当有信心，所以这不是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:19:45.073

我怀疑获得所需内容的最简单方法是在所有机器上安装一个软件包。如果您可以更改`.First`每个人机器上的功能，那么您可以安装一个包。

你的`.First`功能是：

```
.First() <- function(){
    library(mypkg)
    run_mypkg_fun()
    ##Could also check for package updates
    ##update.packages("mypkg"...)
} 
```

该功能`run_mypkg_fun`可以执行您想要的所有检查，包括：

*   安装包
*   根据安装的内容运行不同的功能。

# tomcat - 为什么不让tomcat停止强制作为同步操作

> ID：12895295
> 
> 赞同：1
> 
> 时间：2012-10-15T12:04:39.783
> 
> 标签：tomcat, tomcat7, kill

在 Tomcat 7 中，当容器停止使用`catalina.sh stop force`时，脚本使用 CATALINA_PID 环境变量向当前运行的容器进程的 pid 发送 kill -9。但是，这不会[立即终止进程](https://stackoverflow.com/questions/8762228/is-kill-function-synchronous)- 例如，当进程处于系统调用中间时。在这种情况下，为什么我们不能`kill -0 ``cat "$CATALINA_PID"`` >/dev/null 2>&1`在非强制模式下使用与 stop 一起使用的技巧（在 catalina.sh 中）？这将确保`stop force`是同步的。只是想知道是否有充分的理由不这样做。

提前致谢！

编辑：

使用 Tomcat 为它记录了一个[bugzilla 增强票证。](https://issues.apache.org/bugzilla/show_bug.cgi?id=54013)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T21:30:43.763

这可能适用于 Linux，但我认为 kill -0 仅适用于 Linux。

您当然可以在[Apache Bugzilla](https://issues.apache.org/bugzilla/)中提交增强请求。

请注意，它仍然不是“同步”操作......您只是轮询预期的条件。

# php - 带有动态数据的气泡工具提示

> ID：12895300
> 
> 赞同：1
> 
> 时间：2012-10-15T12:05:07.893
> 
> 标签：php, javascript, jquery, jquery-ui

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js" type="text/javascript"></script>
<script src="<?php $this->baseUrl()?>/public/js/jQuery.bubbletip-1.0.6.js" type="text/javascript"></script>
<link href="<?php $this->baseUrl()?>/public/js/bubbletip/bubbletip.css" rel="stylesheet" type="text/css" />
<script type="text/javascript">
$(document).ready(function() {
    for(i=1;i<12;i++){
    $('#a'+i).bubbletip($('#tip'+i), { deltaDirection: 'right' });
    }
});
</script> 
```

标题部分的代码

```
 <?php 
    foreach($this->nominations as $nomination)
            {
        for($i=1;$i<12;$i++){
        if($nomination['award'.$i]!=""){?>
        <div id="tip<?php echo $i?>" style="display:none;">
            <div class="star"><strong><?php echo $nomination['award'.$i];?></strong></div>
            <div><strong>Project: </strong><?php echo $nomination['project'.$i]?></div>
        </div>
     <?php }}
for($i=1;$i<12;$i++){
                    if($nomination['award'.$i]!=""){
                echo "<span id='a$i'>";
                echo "<img src='/public/assets/images/icons/star.png'/>";
                echo "</span>"; 
                }}

}?> 
```

正文部分的代码

我的问题是，当将鼠标悬停在第一次迭代的星星上时，`foreach`一切正常，但从第二次迭代开始就不起作用了，我发现问题出在 id a,tip 上，因为它们总是变成 a1,a2 .. 和 tip1,tip2。 ..有什么解决办法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:15:55.767

这是因为你的 forach 循环的每次迭代都会从 a1 t a12 创建相同 id 的元素，你需要在 ids 的名称中添加另一个级别。尝试使用以下

```
<?php
$count=0;
    foreach($this->nominations as $nomination)
            {
            $count++;
        for($i=1;$i<12;$i++){
        if($nomination['award'.$i]!=""){?>
        <div id="tip<?php echo $i?>_<?php echo $count?>" style="display:none;">
            <div class="star"><strong><?php echo $nomination['award'.$i];?></strong></div>
            <div><strong>Project: </strong><?php echo $nomination['project'.$i]?></div>
        </div>
     <?php }}
for($i=1;$i<12;$i++){
                    if($nomination['award'.$i]!=""){
                echo "<span id='a$i_$count'>";
                echo "<img src='/public/assets/images/icons/star.png'/>";
                echo "</span>"; 
                }}

}
<input type="hidden" id="total_iteration" name="total_iteration" value="<?php echo $count?>"/>
?> 
```

并相应地更改您的javascript代码

```
<script type="text/javascript">
$(document).ready(function() {

var total=$('#total_iteration').val();
var t=0;
 for(t=1;t<total;t++)
 {

    for(i=1;i<12;i++){
    $('#a'+i+'_t').bubbletip($('#tip'+i+'_'+t), { deltaDirection: 'right' });
    }

    }
});
</script> 
```

在对上面的代码进行一些调试之后，应该按照你想要的方式运行我还没有测试过，但我想主要问题是每次 foreach 迭代中重复 id 的元素

# dependency-injection - 如何设置 Ninject DI 以创建 Hyprlinkr RouteLinker 实例

> ID：12895302
> 
> 赞同：5
> 
> 时间：2012-10-15T12:05:07.903
> 
> 标签：dependency-injection, ninject, asp.net-web-api, hyprlinkr

我有一个 MVC4 Web API 项目，我利用 Mark Seemann 的[Hyprlinkr](https://github.com/ploeh/Hyprlinkr)组件生成链接资源的 Uris。（例如客户 -> 地址）。

我已经按照 Mark 的关于[使用 Web API 进行依赖注入](http://blog.ploeh.dk/2012/10/03/DependencyInjectionInASPNETWebAPIWithCastleWindsor.aspx)的指南（针对 Ninject 进行适当更改）进行操作，但我不太清楚应该如何将[IResourceLinker](https://github.com/ploeh/Hyprlinkr/blob/8a95166b546cb3c9f88a3dfee1033efb86b2a129/Hyprlinkr/IResourceLinker.cs)注入到我的控制器中。

按照 Mark 的[指南](http://blog.ploeh.dk/2012/10/03/DependencyInjectionInASPNETWebAPIWithCastleWindsor.aspx)，我的[IHttpControllerActivator.Create](http://msdn.microsoft.com/en-us/library/system.web.http.dispatcher.ihttpcontrolleractivator.create.aspx)创建方法如下所示：

```
IHttpController IHttpControllerActivator.Create(HttpRequestMessage request, HttpControllerDescriptor controllerDescriptor, Type controllerType)
{
    var controller = (IHttpController) _kernel.GetService(controllerType);

    request.RegisterForDispose(new Release(() => _kernel.Release(controller)));

    return controller;
} 
```

[Hyprlinkr 自述文件](https://github.com/ploeh/Hyprlinkr#readme)建议在这种方法中创建[RouteLinker](https://github.com/ploeh/Hyprlinkr/blob/8a95166b546cb3c9f88a3dfee1033efb86b2a129/Hyprlinkr/RouteLinker.cs)。不幸的是，我不确定如何使用 Ninject 注册它。

我不能像下面这样绑定，因为这会导致多个绑定：

```
_kernel.Bind<IResourceLinker>()
    .ToMethod(context => new RouteLinker(request))
    .InRequestScope(); 
```

我有这样的重新绑定工作：

```
_kernel.Rebind<IResourceLinker>()
    .ToMethod(context => new RouteLinker(request))
    .InRequestScope(); 
```

但我担心更改 ninject 绑定图对于每个请求都可能是一件坏事。

实现这一目标的最佳方法是什么？

* * *

## [应佩奇库克](https://stackoverflow.com/users/167980/paige-cook)的要求更新

我在这里使用重新绑定：

```
IHttpController IHttpControllerActivator.Create(HttpRequestMessage request, HttpControllerDescriptor controllerDescriptor, Type controllerType)
{
    _kernel.Rebind<IResourceLinker>()
        .ToMethod(context => new RouteLinker(request))
        .InRequestScope();

    var controller = (IHttpController) _kernel.GetService(controllerType);

    request.RegisterForDispose(new Release(() => _kernel.Release(controller)));

    return controller;
} 
```

[每个请求都会调用IHttpControllerActivator.Create](http://msdn.microsoft.com/en-us/library/system.web.http.dispatcher.ihttpcontrolleractivator.create.aspx)。其余的绑定是以标准方式进行的，按照标准，我的意思是在使用[Ninject.MVC3](http://nuget.org/packages/Ninject.MVC3) nuget 包生成的类中。

我的控制器如下所示：

```
public class CustomerController : ApiController
{
    private readonly ICustomerService _customerService;
    private readonly IResourceLinker _linker;

    public CustomerController(ICustomerService customerService, IResourceLinker linker)
    {
        _customerService = customerService;
        _linker = linker;
    }

    public CustomerModel GetCustomer(string id)
    {
        Customer customer = _customerService.GetCustomer(id);
        if (customer == null)
        {
            throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.NotFound));
        }

        return
            new CustomerModel
                {
                    UserName       = customer.UserName,
                    Firstname      = customer.Firstname,
                    DefaultAddress = _linker.GetUri<AddressController>(c => c.Get(customer.DefaultAddressId)),
                };
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T12:22:40.763

注册一个委托函数给你链接器

```
_kernel.Bind<Func<HttpRequestMessage, IResourceLinker>>()
    .ToMethod(context => (request) => new RouteLinker(request)); 
```

注入委托

```
readonly Func<HttpRequestMessage, IResourceLinker> _getResourceLinker;

public controller(Func<HttpRequestMessage, IResourceLinker> getResourceLinker) {

    _getResourceLinker = getResourceLinker;
} 
```

在你的行动中使用

```
public async Task<Thingy> Get() {

    var linker = _getResourceLinker(Request);
    linker.GetUri( ... )

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T20:59:55.827

如果您只需要使用来自 ApiController 派生的 RouteLinker，那么您实际上并不需要经历所有的 DI 箍。

您可以像这样在 Controller 中创建它：

```
var linker = new RouteLinker(this.Request); 
```

IMO，当您需要 RouteLinker 进一步降低堆栈时，首先将 DI 与 RouteLinker 一起使用变得很有价值 - 但话又说回来，我也只使用 RouteLinker 作为[具体依赖](http://blog.ploeh.dk/2012/08/31/ConcreteDependencies.aspx)项......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T13:39:03.553

感谢您添加代码示例。根据您发布的内容，您遇到了绑定/重新绑定问题，因为您每次都`_kernel.Bind<IResourceLinker>`在方法中发出。`IHttpControllerActivtor.Create`

您需要以与`_kernel.Bind<IResourceLinker>`在

> ...标准方式，标准我的意思是在使用 Ninject.MVC3 nuget 包生成的类中。

不需要`IResourceLinker`多次绑定 ，这就是您获得多个实例的原因，因为每次 IHttpControllerActivator 创建控制器时都会触发绑定。

**更新：** 抱歉，我错过了`HttpRequestMessage`作为构造函数参数的需要，我会选择 Anthony Johnson 对此的回答。

# facebook - 如何获取打开的图形对象的like 列表？

> ID：12895303
> 
> 赞同：0
> 
> 时间：2012-10-15T12:05:10.873
> 
> 标签：facebook, facebook-like, facebook-opengraph

最近我创建了几个类似 facebook 的按钮，每个按钮都使用 iframe 和 href 链接到打开的图形对象 url。然后 url 会将用户重定向到 Facebook 应用程序。

但是，我怎样才能从这些打开的图形对象中获得喜欢的列表呢？我已将 url 传递给 fql 调试器并想要获取类似列表，它什么也不返回。然后我使用图形 API 检查我打开的图形对象页面，它返回没有类似数组列表的正常数据。

所以现在我无法获取用户 ID 和他们的姓名，我仍然不知道为什么我不能得到这个……我在 facebook 示例中看到了一些可以获取点赞列表的网页。这真的让我很沮丧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:52:40.447

由于隐私政策，没有真正的方法可以提取此信息。

你可能会得到喜欢这个链接的朋友列表，试试这个

```
SELECT user_id FROM like WHERE object_id IN (SELECT link_id from link WHERE url = 'YOUR URL HERE') and user_id IN ( SELECT uid2 FROM friend WHERE uid1 = me() ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T20:48:23.313

您可以使用此查询来获取页面的粉丝数。

从 page_id = 'page_id' 的页面中选择 fan_count

您无法列出页面的所有用户。相反，您可以使用此查询检查特定用户是否是您页面的粉丝。

从 page_fan 中选择 uid，其中 uid = 'user_id' 和 page_id = 'page_id'

# backbone.js - 从方法的视图访问集合

> ID：12895304
> 
> 赞同：1
> 
> 时间：2012-10-15T12:05:13.447
> 
> 标签：backbone.js

我在视图的方法上访问我的集合时遇到问题，实际上，它从 initialize() 方法运行良好，但我创建了另一个 (drawVisualization())，当我尝试访问时出现未定义的错误`this.collection`，它是可能是一个愚蠢的问题，但我没有找到任何解决方案，我尝试在初始化方法上使用 _.bind 但在这种情况下似乎不起作用，这里是代码：

```
App.Views.account = Backbone.View.extend({

className: 'account',

el: $('#account-container'),

initialize: function(){
    console.log(this.collection.toJSON()); //Works fine !
    this.template = _.template($('#account-template').html());
    _.bind(this.drawVisualization, this); //Seems to be useless
},

render: function(){
//Some code...
    return this;
},

drawVisualization: function(){
      console.log(this.collection.toJSON()); //Fail because of undefined collection !
} 
```

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:13:08.703

我不知道为什么它不起作用，但尝试使用下划线的`bindAll`.

```
initialize: function(){
  _.bindAll(this);  
  this.template = _.template($('#account-template').html());
} 
```

`bindAll`对我来说，在每个视图的开头倾倒`initialize`是避免此类问题的好方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:50:52.313

在主干中，您不需要绑定`this`到主干视图的方法。

所以尝试跳过这部分

`_.bind(this.drawVisualization, this); //Seems to be useless`

而是`this`像这样绑定：

```
this.collection.bind("reset", this.drawVisualization, this); 
```

# gwt - 嵌套标题面板

> ID：12895307
> 
> 赞同：0
> 
> 时间：2012-10-15T12:05:27.800
> 
> 标签：gwt

我正在尝试利用网页中的页眉和页脚功能来嵌套 HeaderPanels。

顶级 HeaderPanel 工作正常，但顶部面板中心的第二个 HeaderPanel 没有出现。这是示例代码：

```
import com.google.gwt.core.client.EntryPoint;
import com.google.gwt.user.client.ui.HTML;
import com.google.gwt.user.client.ui.HeaderPanel;
import com.google.gwt.user.client.ui.RootLayoutPanel;

public class Admin implements EntryPoint {

private final HeaderPanel topPanel = new HeaderPanel();
private final HeaderPanel centerPanel = new HeaderPanel();

@Override
public void onModuleLoad() {

    topPanel.setHeaderWidget(new HTML("top header"));

    topPanel.setFooterWidget(new HTML("top footer"));

    centerPanel.setHeaderWidget(new HTML("center header"));
    centerPanel.setFooterWidget(new HTML("center footer"));
    centerPanel.add(new HTML("center center"));

    topPanel.setContentWidget(centerPanel);
    RootLayoutPanel.get().add(topPanel);
}
} 
```

“中心页眉”、“中心页脚”和“中心中心”永远不会出现在网页上。

我还尝试在中心使用 DocLayoutPanel，但它也不起作用。

我怀疑这些仅在附加到 RootLayoutPanel 时才有效。

是否可以嵌套 Header 或 Doc 布局面板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:29:37.220

如果您尝试 Chrome 检查，IE9 中也有类似的东西，您会看到中心小部件的高度为 0。如果您设置大小，它将起作用。我会使用 DockLayoutPanel。您可以嵌套 DockLayoutPanel。

# delphi - 缩写 ZIP 文件名乱码

> ID：12895315
> 
> 赞同：1
> 
> 时间：2012-10-15T12:06:00.017
> 
> 标签：delphi, zip, filenames, abbrevia

Win7的中文，我用TAbZipper创建了一个ZIP文件，但是在英文的操作系统上的zip文件，里面的zip文件的文件名都变成乱码了。我用的是Abbrevia5。我该怎么做，在 DelphiXE2 中。

# python - 在新的日志处理程序中包含以前记录的事件

> ID：12895320
> 
> 赞同：4
> 
> 时间：2012-10-15T12:06:11.100
> 
> 标签：python, logging

请考虑以下示例：

```
import logging
#create a logger object:
logger = logging.getLogger("MyLogger")
#define a logging handler for the standard output:
stdoutHandler = logging.StreamHandler(sys.stdout)
logger.addHandler(stdoutHandler)
#...
#initialization code with several logging events (for example, loading a configuration file to a 'conf' object)
#...
logger.info("Log event 1")
#after configuration is loaded, a new logging handler is defined for a log file:
fileHandler = logging.FileHandler(conf.get("main","log_file"),'w')
logger.addHandler(fileHandler)
logger.info("Log event 2") 
```

在此示例中，“日志事件 1”不会出现在日志文件中（仅在标准输出中）。日志文件不可避免地在“日志事件 1”之后初始化（因为它取决于配置）。

**我的问题是：**
如何在新的日志处理程序（例如示例中的文件处理程序）中包含以前记录的事件（例如“日志事件 1”）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T12:54:51.343

我对这个问题的解决方案：

定义一个`MemoryHandler`来处理定义之前的所有事件`FileHandler`。定义
时，将其设置为的刷新目标并刷新它。 `FileHandler``MemoryHandler`

```
import logging
import logging.handlers
#create a logger object:
logger = logging.getLogger("MyLogger")
#define a memory handler:
memHandler = logging.handlers.MemoryHandler(capacity = 1024*10)
logger.addHandler(memHandler)
#...
#initialization code with several logging events (for example, loading a configuration file to a 'conf' object)
#everything is logged by the memory handler
#...

#after configuration is loaded, a new logging handler is defined for a log file:
fileHandler = logging.FileHandler(conf.get("main","log_file"),'w')
#flush the memory handler into the new file handler:
memHandler.setTarget(fileHandler)
memHandler.flush()
memHandler.close()
logger.removeHandler(memHandler)
logger.addHandler(fileHandler) 
```

这对我有用，所以我接受它作为正确答案，直到出现更优雅的答案。

# linux - Haskell 和低级 IO 操作

> ID：12895322
> 
> 赞同：8
> 
> 时间：2012-10-15T12:06:14.960
> 
> 标签：linux, haskell, ghc

Haskell 中如何实现套接字、管道和文件 IO 等低级内容？我猜这些 IO 方法在 Haskell 中不是原生的，但 Haskell 很快封装了一些低级 C 库，对吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-15T12:33:49.550

套接字、管道和文件在内核中实现；要从用户空间程序中使用它们，您需要[调用内核](https://en.wikipedia.org/wiki/System_call). 如果您将内核视为库，那么是的，I/O 必然由低级 C/汇编程序库实现。

实际上，诸如 GHC 之类的 Haskell 实现将使用 C 库的系统调用包装器。参见例如[GHC RTS 评论](http://hackage.haskell.org/trac/ghc/wiki/Commentary/Rts)，它描述了构成使用 GHC 编译的任何 Haskell 程序的核心的 C 位。如有疑问，请查阅[源代码](https://github.com/ghc/ghc/tree/master/rts/posix)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T15:43:42.440

“快速换行”在这里并不总是最好的描述。

1.  有时它被包裹在您包裹包裹的意义上（例如 wxcore 包裹 wx）。
    这最接近您提到的“快速包装”，但我认为最好将其称为薄包装，因为我认为它并不像所有这些那么简单。
2.  有时它被包裹起来，就像室内装潢包裹着椅子（例如 wxHaskell 包裹着 wx）。
    我将其称为“围绕”构建。
3.  有时它像汽车包裹引擎一样包裹起来（例如反应香蕉包裹 wx）。
    我将其称为“使用”，如果您查看它，您会发现其中有一个引擎，但它看起来不像引擎，并且您使用它的方式非常不同。
4.  有时它像货车包裹货车一样包裹（例如，haskell 的线程包裹操作系统线程）。我称之为“重新实现”。（Haskell 可以使用 OS 线程，但 Haskell 的“本机”线程要轻量级得多。）

您可能会争辩说，因为 GHC 的运行时系统是用 C 编写的，而您的操作系统可能是用 C 编写的，所以 Haskell 是 C 的包装器，但这就像说 Spyker C8 汽车包装了奥迪 V8 引擎。如果你把他们可爱的 C8 称为一个装有奥迪的盒子，世爵可能会不高兴。当您驾驶汽车时，您使用的是引擎，但不是直接使用。有些人喜欢调整他们的汽车，就像有些人喜欢超频他们的 CPU 一样，但除非你愿意，否则你不必这样做。有人说如果你想了解你的车，你应该知道引擎是如何工作的。

如果您可以原谅一级方程式的参考，主要是 Haskell 像 Torro Rosso 包裹法拉利一样“包裹”C，但有时它就像 Maclaren 包裹梅赛德斯一样。（在您称 Torro Rosso 慢之前，请将其与福特进行比较。）

# vb.net - 从 VB.NET 频道获取 YouTube 视频

> ID：12895325
> 
> 赞同：2
> 
> 时间：2012-10-15T12:06:43.493
> 
> 标签：vb.net, youtube

如何在 Listview 中获取包含所有视频详细信息的视频，例如视图标题作者描述不喜欢喜欢收藏标签

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:14:15.460

[开发人员指南：.NET](https://developers.google.com/youtube/2.0/developers_guide_dotnet)

YouTube 数据 API 允许客户端应用程序以 Google 数据 API 提要的形式检索和更新 YouTube 内容。您的客户端应用程序可以使用 YouTube 数据 API 来获取视频供稿、评论、回复和播放列表，以及查询符合特定条件的视频。您还可以使用 API 发出经过身份验证的请求以修改此信息并将新的视频内容上传到站点。

**检索标准提要：特定用户上传的视频**

对于每个 YouTube 用户，YouTube 数据 API 定义了一个视频供稿，其中列出了用户上传的视频。可以从以下 URL 检索用户上传视频的视频供稿：

```
http://gdata.youtube.com/feeds/api/users/username/uploads 
```

您还可以通过向以下 URL 发送 API 请求来检索上传视频的特定条目：

```
http://gdata.youtube.com/feeds/api/users/username/uploads/VIDEO_ID 
```

以下代码演示了如何检索特定用户上传的视频提要：

```
Uri uri = 
  new Uri("http://gdata.youtube.com/feeds/api/users/GoogleDevelopers/uploads");
Feed<Video> videoFeed = request.Get<Video>(uri); 
printVideoFeed(videoFeed); 
```

在提要 URL 中，您可以使用字符串 default 而不是用户名来检索当前经过身份验证的用户上传的视频。在这种情况下，您将检索位于[http://gdata.youtube.com/feeds/api/users/default/uploads](http://gdata.youtube.com/feeds/api/users/default/uploads)的提要。

此外，当您为当前经过身份验证的用户检索上传的视频提要或该提要中的特定条目时，提要条目（或单个条目）将可以使用客户端库代码进行编辑。有关详细信息，请参阅 Identification_Editable_Video_Entries 部分。

# php - PHP大括号和条件

> ID：12895327
> 
> 赞同：5
> 
> 时间：2012-10-15T12:06:56.227
> 
> 标签：php, braces

这条线是什么意思？

```
if ( ${fun("str1")} (fun("str2"), ${fun("str3")}) ) 
```

使用 str2 的参数返回值和名称为**return_value_for_str3**的变量来评估函数return_value_for_str1_of_fun **()_name**？

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T12:10:37.143

这将测试函数的返回值，该函数的名称是变量 named 中的值`fun("str1")`，并给出了参数`fun("str2")`和变量 named 的值`fun("str3")`。

例子：

如果`fun("str1")`equals `"x"`、`fun("str2")`equals`34`和`fun("str3")`equals `"y"`，则语句如下所示：

```
if ( $x (34, $y) ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T12:10:55.850

`fun("str1")`返回应该是变量名称的字符串，并且该变量的值是匿名函数（可能不是 void 并返回布尔值），它首先获取两个参数是返回值`fun("str2")`，第二个是名称与字符串匹配的变量的值由`fun("str3")`.返回

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T12:23:19.227

一些解决方法：

```
$func = 'fun';
$str3 = 'str3';

echo ${fun("str1")} (fun("str2"), ${fun("str3")}); // will output 'str2'

function fun($param1, $param2 = ''){

    if($param1 == 'str2' || $param1 == 'str3')
        return $param1;
    elseif($param1 == 'str1')
        return 'func';
    else
        echo ' you are done';

}

Evaluates as follows:
    fun("str1") -> 'func'
    ${fun("str1")} -> $func -> fun
    fun("str2") -> 'str2'
    fun("str3") -> 'str3'
    ${fun("str3")} -> $str3

    ${fun("str1")} (fun("str2"), ${fun("str3")})
    => $func ("str2", $str3)
    => fun("str2", "str3")
    => "str2" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T12:26:14.240

哇。那是复杂的代码。让我们一点一点地检查它：

让我们从这个开始：

```
fun("str1") 
```

实际上，这只是对名为 的函数的函数调用`fun()`，传入一个字符串值作为参数。

此函数调用在您的代码中重复了 3 次，并使用不同的字符串作为参数。您的示例代码中未提供该函数`fun()`本身，因此我不知道它的作用，但鉴于上下文我假设它返回一个字符串。

这使我们进入下一个我们可以检查的位置：

```
${fun("str1")} 
```

PHP 中的`${...}`语法采用大括号的内容并引用该名称的变量。

因此，例如，`${"myvar"}`与说相同`$myvar`。这称为动态变量名。虽然它确实有其用途，但它是编写糟糕代码的一种非常简单的方法，难以阅读、理解或维护。你的例子肯定属于这一类。

但是，现在我们了解了语法，很容易看出它正在获取`fun()`函数调用的字符串输出，并将其转换为变量名。

进一步扩展，我们可以将代码重写如下，以使其更清晰：

```
$var1 = fun("str1");
$var2 = fun("str2");
$var3 = fun("str3");
if ( $$var1 ($var2, $$var3) ) 
```

在这里，`$$var1`被用作函数名，用`$var2`和`$$var3`作为参数调用。

所以在 中`$var1`，我们有一个函数调用返回一个字符串，该字符串被作为变量名引用，该变量名被作为函数调用。

我们仍然不知道`fun()`函数返回什么，或者由它的返回生成的变量名是否有效，但我们可以做出一些假设，因为`$var1`并且`$var2`需要填充有效的函数名，以便您的代码行工作。

我们现在已经了解了整行代码，但仍然不清楚它试图实现的目标（除了过于“聪明”和迟钝）。

这是非常*非常*糟糕的代码。它是故意晦涩难懂的，而且效率低下（即它会运行缓慢）。**

# hibernate - 在休眠 bean 中添加不是 db 表中的字段的额外字段

> ID：12895335
> 
> 赞同：4
> 
> 时间：2012-10-15T12:07:31.013
> 
> 标签：hibernate

是否可以在休眠 bean 中添加不是实际数据库中的字段的额外成员变量？

例如。我需要在 MyEntity 中添加 hasComments 一个成员变量，并且 has Comments 不是数据库中的实际字段。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T12:10:18.597

Let either the field be transient, or annotate it with the [@Transient](http://docs.oracle.com/javaee/5/api/javax/persistence/Transient.html) annotation.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T12:34:56.023

看到这个

```
@NotNull
@Column(name = "comment")
private String comment;

@Column(name = "time")
@Temporal(TemporalType.TIMESTAMP)
@DateTimeFormat(style = "M-")
private Date time; 
```

@Transient 私有字符串信息；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-30T21:15:48.673

为了在开发过程中快速解决此错误，您可以使用`hbm2ddl`从休眠映射自动创建数据库，它会在表中为`transient`属性创建字段。这并不能解决长期问题，但它可以让您继续处理其他事情，直到您有时间解决根本问题。

# c# - C#接口和抽象类

> ID：12895339
> 
> 赞同：1
> 
> 时间：2012-10-15T12:07:54.243
> 
> 标签：c#, class, polymorphism

我已经定义了`interface`一个`abstract`实现该接口的类和一个派生自抽象类的类。我需要它，`interface`因为我正在使用动态加载器来实现插件，并且我创建了一个抽象类来实现所有插件都将拥有的一些东西。

现在我想实现一个类范围的字符串作为名称。我创建的是这样的：

```
public interface IDevicePlugin {
    string name { get; }
}

abstract public class DevicePlugin : IDevicePlugin {
    abstract public string name { get; }
}

public class somePlugin : DevicePlugin, IDevicePlugin {
    public override string name {
        get {
            return "my name";
        }
    }
} 
```

但这给了我错误“无法覆盖，因为'name'不是属性'。如果我删除`override`，它表示它隐藏了继承的成员'name'。

我该如何正确实施呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T12:09:06.003

这对我来说没有错误，但是......我怀疑这是因为您正在重新实现界面。放入：`, IDevicePlugin`_`somePlugin`

```
public class somePlugin : DevicePlugin {
    public override string name {
        get { return "my name"; }
    }
} 
```

它从父类继承接口。

# java - 将上下文菜单添加到 TreeViewer 时出现 NullPointerException

> ID：12895347
> 
> 赞同：0
> 
> 时间：2012-10-15T12:08:20.737
> 
> 标签：java, eclipse, rcp

我希望按照此处列出的示例将 ContextMenu 添加到 TreeViewer：[http](http://www.vogella.com/articles/EclipseCommands/article.html#contextmenu) ://www.vogella.com/articles/EclipseCommands/article.html#contextmenu但是我在线获得了 NPE

```
getSite().registerContextMenu(menuManager, viewer); 
```

getSite() 返回 null 而不是 IWorkbenchPartSite。谁能解释为什么 IWorkbenchPartSite 为空或如何初始化它？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:11:10.640

There is no method `getSite()` in preference pages. So I assume you are in an editor or a view.

The site is injected by the platform using the `init` method. When you call `getSite()` you have to make sure that you do it after the platform has called the `init` method.

A good place for context menu registration is the `createPartControl` method.

# android - 如何模拟通话过程中被杀死的进程

> ID：12895348
> 
> 赞同：1
> 
> 时间：2012-10-15T12:08:23.790
> 
> 标签：android

我发现如果在游戏过程中打来电话，（通常工作的）游戏应用程序*有时会崩溃。*经过大量的实验和查看日志，我计算出了导致程序崩溃的事件序列：

1.  程序正在运行。
2.  一个电话打进来。
3.  onPause() 被执行。

此时游戏进程可能会或可能不会被杀死的两件事之一。这是在操作系统的控制之下。

如果它没有被杀死，那么在电话结束时，调用 onResume() 并且我的程序完美地恢复而不会崩溃。

如果它被杀死，那么在电话结束时，我的程序将崩溃。

我现在面临的问题是*通常*进程没有被杀死。因此很难 A) 调试和 B) 检查任何尝试的修复是否有效。所以我现在的问题是，有没有办法安排我的程序在来电时*总是被杀死 - 或者有没有其他方法可以重新创建我的崩溃场景。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:13:09.467

首先，我认为崩溃的原因是 a `NullPointerException`，你应该检查你的`onPause`and发生了什么`onResume`。

在模拟器中，有一种简单的方法可以模拟在设备的一般使用过程中可能发生的事件。

尝试阅读这个问题：[Ringing myself using android emulator](https://stackoverflow.com/questions/2577785/ringing-myself-using-android-emulator)

# php - 想把这个格式 $1,000,000 改成 1000000 这个

> ID：12895350
> 
> 赞同：2
> 
> 时间：2012-10-15T12:08:32.853
> 
> 标签：php

好吧，我有计算器。我想接受这种`$1,000,000`格式的值

所以下面是我的代码想知道如何使用 php 替换它们

直播： http://ffsng.deewayz.in/index.php?v=1000000& [sv=1951153458](http://ffsng.deewayz.in/index.php?v=1000000&sv=1951153458)

我只想知道用php this 替换它们的代码，`$1,000,000`以及`1000000`float 是否可以接受这个值或者必须将float 更改为其他值。

我的 HTML

```
Enter Present Value of Pet: <input type="text" name="v" value="1000000"/><br>
Enter value of pet you want: <input type="text" name="sv" value="1951153458"/><br> 
```

我的 PHP

```
$v         = isset($_GET['v']) ? (float) $_GET['v'] : 1000000;
$sv        = isset($_GET['sv']) ? (float) $_GET['sv'] : 1951153458; 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T12:10:07.253

```
function reverse_number_format($num)
{
    $num = (float)str_replace(array(',', '$'), '', $num);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:11:46.277

您可以只使用 preg_replace 删除 $ 和 ,

```
$v  = preg_replace('/[\$,]/', '', $v);
$sv = preg_replace('/[\$,]/', '', $sv); 
```

# css - 将边框拉伸到图像上的 div 和阴影之外

> ID：12895353
> 
> 赞同：0
> 
> 时间：2012-10-15T12:08:37.567
> 
> 标签：css, image

我有两个问题，希望将它们放在一个帖子中不会有问题。

**Question1** 我有一个边框，我想在整个屏幕上伸展，但无法让它工作。我已经尝试过宽度：150%，这对于右侧来说还可以，但像以前一样离开左侧。然后我添加了边距：- 100% 但这自然会导致 div 的项目出现问题。我的代码如下。我也猜测我尝试过的代码会被认为是 hack？我尽量不养成这种习惯。

```
#border{
border-top: thick double #000;
border-bottom: thick double #000;
padding: 1% 0 1% 0;
margin-top: 3%;
margin-bottom: 3%;
}
#wrapper{   
max-width: 1200px;
margin: 0 auto;
width: 100%;
}
#content{
margin-top: -3%;
}

<div id="wrapper">
    <div id="content">
        <div id="border">
            <!--some small images-->
        </div>
    </div>
</div> 
```

**问题2**我正在尝试在 div 的顶部添加带有阴影的锯齿状边缘，我已经创建了锯齿状边缘的图像并尝试使用 css3 阴影效果但没有成功，有人可以建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:17:23.623

你的#border 在你的#wrapper 里面，max-width:1200px 所以它会停在1200 标记处是正常的。将 HTML 更改为

```
<div id="border">
  <div id="wrapper">
    <div id="content">
        <!--some small images-->
    </div>
  </div>
</div>​ 
```

并从那里工作。

在 Google 中搜索*CSS3 box-shadow*以查找您的第二个问题，那里有很多示例！

# asp.net-mvc-3 - 贝宝 MVC3 集成

> ID：12895354
> 
> 赞同：2
> 
> 时间：2012-10-15T12:08:38.167
> 
> 标签：asp.net-mvc-3, paypal

**带有自定义购物车的**场景MVC 应用程序。**购物车与 PayPal 集成，传递销售数据，如客户信息、产品项目和价格（每个项目和总价），但不传递信用卡或贝宝信息。这将在贝宝上设置。**

 ****问题** Paypal 在此处描述了如何使用购物车上传与自定义购物车集成： [https](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_cart_upload#id09BLDK0007Q) ://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_cart_upload#id09BLDK0007Q 但是很少详细说明如何做到这一点。

过了一会儿，我在这里找到了一个如何进行 MVC-Paypal 交互的示例（即使不是购物车上传，但它是一个配置问题）： [http ://www.arunrana.net/2012/01/paypal-integration -in-mvc3-and-razor.html](http://www.arunrana.net/2012/01/paypal-integration-in-mvc3-and-razor.html)

这个解决方案的问题是它似乎存在一些安全问题。敏感数据设置为视图并在隐藏字段中发送到客户端，而 post 由 javascript 设置，这不可接受吗？还是我看错了？

**预期解决方案**

1.  用户看到购物车并单击结帐按钮，导致向*myserver.com/Controller/Action*发送帖子，传递客户数据，如姓名、地址等。
2.  控制器动作*myserver.com/Controller/Action*构建一个发布服务器端，添加客户端发布数据信息更敏感的信息，如价格和贝宝商家特定信息以及向贝宝发布请求或调用贝宝网络服务。
3.  Paypal 返回一个令牌或其他一些信息，*myserver.com* /Controller/Action将客户端重定向到 Paypal 以进行付款。

**问题** 我的预期解决方案可能吗？我如何响应来自客户端的帖子，在控制器中进行一些处理，使用该处理的结果发布/调用 Paypal，并最终将 paypals 响应传递给客户端，以便他直接与 Paypal 交互？否则我看不出它怎么可能是“安全的”。

如果没有，肯定有人做过类似的事情，可以为我指明正确的方向:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:02:37.030

我有点理解你想在这里做什么，我想我可以回答这个问题。让我知道这是否完全没有意义......

因此，您的客户点击了您的资源 mysite.com/Cart/Checkout。控制器实例化模型，然后将对象传递到视图中，视图在视图中适当地绑定值。

客户单击“使用 PayPal 付款”并被重定向到 mysite.com/Cart/ExpressCheckout。控制器实例化模型，模型将利用购物车会话数据（项目、金额等）处理 SetExpressCheckout 调用，然后模型（或控制器，这部分有点模糊）将客户重定向到 pp.com/ cgi-bin/webscr?cmd=_express-checkout&token=EC-12345566788

客户将填写所有内容，一旦完成，他们将被重定向到 mtsite.com/Cart/ConfirmOrder。在此资源中，模型将处理 GetExpressCheckoutDetails 调用，为所有返回的数据设置属性等。控制器会将对象传递到视图中，并且视图将适当地绑定。

这是不安全的原因吗？这应该是安全的并遵循 ​​Microsoft MVC3 的所有标准。除了在语义上进行重定向的部分之外，我不确定这是否会在控制器或模型中完成。我认为这将是控制器。**

# linux - linux文件和目录权限

> ID：12895356
> 
> 赞同：-3
> 
> 时间：2012-10-15T12:08:44.620
> 
> 标签：linux, permissions

```
1\. drwxr-xr-x 10 tester test 100 Sep 8 09:30 hello
2\. -rwsrwsrwt 2 tester test 100 Sep 8 09:35 program 
```

我想知道文件夹“hello”和文件“program”的权限，下面是我的解释，对吗？

1.  关于目录“hello”，tester用户有读、写和执行权限，测试组和其他人有读和执行权限，但没有写权限。
2.  关于“程序”文件，测试者用户、测试组等拥有完全权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:16:22.020

是的，但您`program`也设置了`setuid`,`setguid`和`sticky`位。阅读[此处](http://en.wikipedia.org/wiki/Sticky_bit)和[此处](http://en.wikipedia.org/wiki/Setuid)了解它们的含义。如今，在可执行文件上使用粘性位非常罕见，通常仅在诸如`/tmp`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:22:22.870

对于 unix 目录 x 表示访问不执行，但对于目录“home”是：

*   用户“tester”可以读取目录内容，修改目录内容，通过cd命令进入目录
*   "test" 组可以读取目录的内容并通过 cd 命令切换到目录
*   每个其他用户都可以通过 cd 命令查看目录的内容并更改为目录

对于文件“程序”：

*   用户“tester”、组“test”和其他任何人都拥有全套权限，程序将在用户“tester”（SUID-bit）和组“test”（SGID-bit）的 uid 下执行并且粘性位也被抛出。这不再用于文件，仅在 /tmp 之类的目录上使用，以防止用户能够删除一些其他用户文件。

# php - 如何检查 PHP 中全局变量的历史记录？

> ID：12895358
> 
> 赞同：2
> 
> 时间：2012-10-15T12:08:47.223
> 
> 标签：php, debugging, global-variables

我正在做一个项目，其中**全局变量**在多个地方和各种文件中使用，并且遇到了全局变量的值不是我期望的情况。很高兴知道如果存在一个函数，它可以让我获得全局变量的变化历史。

我希望该函数可以让我获得与使用时相同的输出，但`debug_backtrace()`它会将传递的变量的名称作为参数，并返回包含有关行号和文件名称的信息的结果对全局变量进行了更改的地方。

如果目前不存在这样的东西，那将是一个很好的破解方法。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T12:48:04.180

正如已经概述的那样，这并不容易实现。我建议您选择自己的 xdebug 并将其用作远程/步进调试器。话虽如此，您至少*可以以**某种方式*自己进行一些跟踪，但这是有代价的。

我举一个例子，首先从输出开始（这里是一个 CLI 脚本）：

```
GLOBAL $argv[0] changed to: /path/to/global.php
GLOBAL $argc changed to: 1
GLOBAL $test changed to: 1
GLOBAL $test changed to: 2
GLOBAL $test changed to: 3 
```

这是由以下原因生成的：

```
<?php
/**
 * @link http://stackoverflow.com/questions/12895358/how-to-check-history-of-a-global-variable-in-php
 */

declare(ticks=1);

function array_diff_recursive(array $array1, array $array2) {

    $diff = array();

    foreach ($array1 as $key => $value) {
        if (array_key_exists($key, $array2)) {
            if (is_array($value) && is_array($array2[$key])) {
                if ($result = array_diff_recursive($value, $array2[$key])) {
                    $diff[$key] = $result;
                }
            } else {
                if ($value !== $array2[$key]) {
                    $diff[$key] = $value;
                }
            }
        } else {
            $diff[$key] = $value;
        }
    }

    return $diff;
}

function globals_diff() {
    static $last = array();

    if (!isset($GLOBALS)) {
        return;
    }

    $current = array();

    $ignore = array_flip(array('_GET', '_POST', '_COOKIE', '_FILES', '_ENV', '_REQUEST', '_SERVER', 'GLOBALS'));

    foreach($GLOBALS as $key => $value) {
        isset($ignore[$key]) || $current[$key] = $value;
    }

    $diff = array_diff_recursive($current, $last);

    foreach($diff as $var => $value) {
        if (is_array($value) && $value) {
            foreach($value as $array_key => $array_value) {
                printf("GLOBAL $%s[%s] changed to: %s\n", $var, $array_key, print_r($array_value, 1));
            }
        } else {
            printf("GLOBAL $%s changed to: %s\n", $var, print_r($value, 1));
        }
    }

    $last = $current;
}

register_tick_function('globals_diff', true);

$test = 1;
$test = 2;
$test = 3; 
```

这需要您[启用刻度](http://php.net/manual/en/control-structures.declare.php)。否则，您可以使用全局函数进行快照。

如果您想跟踪一段时间内的更改，则需要添加一些其他（全局）数据结构来存储这些更改（注意，这可能会变得很大），同时将其排除在比较之外（请参阅 ingore 列表）。

# java - 文件数据源路径不是动态出现的

> ID：12895361
> 
> 赞同：2
> 
> 时间：2012-10-15T12:09:04.093
> 
> 标签：java, email

嗨，我有以下代码：

```
 MimeMessage msg = new MimeMessage(session);
    InternetAddress addressFrom = new InternetAddress("krao346789@gmail.com");
    msg.setFrom(addressFrom);

    InternetAddress[] addressTo = new InternetAddress[sendTo.length];
    for (int i = 0; i < sendTo.length; i++) {
    addressTo[i] = new InternetAddress(sendTo[i]);
    }
    msg.setRecipients(Message.RecipientType.TO, addressTo);

    // Setting the Subject and Content Type
    msg.setSubject(emailSubjectTxt);
    /*Image part*/

    MimeMultipart multipart = new MimeMultipart("related");  

    // first part  (the html)  
    BodyPart messageBodyPart = new MimeBodyPart();  
    String htmlText = "<H1>Hello</H1><img src=\"cid:image\">";  
    messageBodyPart.setContent(htmlText, "text/html");  

    // add it  
    multipart.addBodyPart(messageBodyPart);  

    // second part (the image)  
    messageBodyPart = new MimeBodyPart();  
    String contextPath=request.getContextPath();
    System.out.println("contextpath"+contextPath);
    File contextDir = new File(contextPath);  
    System.out.println("contextDir"+contextDir);
    File emailImage = new File(contextDir, "/images/sample.jpeg"); 
    System.out.println("emailImage"+emailImage);

    DataSource fds = new FileDataSource(emailImage);  
    //System.out.println("fds"+fds.getName());
    messageBodyPart.setDataHandler(new DataHandler(fds));  
    messageBodyPart.setHeader("Content-ID","<image>");  

    // add it  
    multipart.addBodyPart(messageBodyPart);  

    // put everything together  
    msg.setContent(multipart);  
    Transport.send(msg);
} 
```

如果我使用它工作正常

```
DataSource fds = new FileDataSource("C:\\images\\sample.jpeg"); 
```

   代替

```
DataSource fds = new FileDataSource(emailImage); 
```

但我想从`WebContent->images`. 当我运行这个时，
我得到了。`java.lang.NullPointerException`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:04:53.183

已解决：使用**getRealPath()**；它现在工作正常。

文件 contextDir = new File(request.getRealPath("/images/sample.jpeg"));
数据源 fds = new FileDataSource(contextDir);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:53:52.953

如果您想在 Web 应用程序中使用。首先，您必须将附件文件上传到服务器`InputStream`，然后使用此创建附件文件`InputStream`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-03T07:06:51.473

如果`images/sample.jpeg`来自您的资源文件夹，请尝试以下操作：

```
DataSource fds = new FileDataSource(getFileHandle("images/sample.jpeg"));

public static File getFileHandle(String fileName){
       return new File(YourClassName.class.getClassLoader().getResource(fileName).getFile());
} 
```

在非静态引用的情况下：

```
return new File(getClass().getClassLoader().getResource(fileName).getFile()); 
```

# svn - 将所有未版本控制的文件添加到 SVN，包括 @2x

> ID：12895364
> 
> 赞同：2
> 
> 时间：2012-10-15T12:09:14.210
> 
> 标签：svn, unix, command-line, terminal

我使用它来将所有未版本控制的文件添加到 SVN：

```
svn status |grep '\?' |awk '{print $2}'| xargs svn add 
```

但是它不包括带有“@2x”后缀的文件。

我将如何修改上面的行以在 SVN 添加中包含“@2x”文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:43:57.983

Apache Subversion 将*“at 符号”* ( **'@'** ) 解释为[peg 修订说明符](http://svnbook.red-bean.com/en/1.7/svn.advanced.pegrevs.html)，这似乎是这里的原因。我建议您查看[StackOverflow 线程](https://stackoverflow.com/q/757435/761095)，讨论当您的文件或文件夹名称带有**“@”**符号时的情况。

根据[SVNBook](http://svnbook.red-bean.com/en/1.7/)，您可以自定义命令以将**“@@”**附加到管道路径的末尾，`svn add`以解决该问题。例如，以下答案应该对您有所帮助：[https](https://stackoverflow.com/a/12292498/761095) ://stackoverflow.com/a/12292498/761095 。

> 敏锐的读者此时可能想知道 peg 修订语法是否会导致工作副本路径或实际上具有 at 符号的 URL 出现问题。毕竟，svn 是如何知道 news@11 是我树中目录的名称还是仅仅是“新闻的第 11 版”的语法？值得庆幸的是，虽然 svn 总是假设后者，但有一个简单的解决方法。**您只需在路径末尾附加一个 at 符号，例如 news@11@。svn 只关心参数中的最后一个 at 符号，并且在 at 符号之后省略文字 peg 修订说明符并不被认为是非法的。这种解决方法甚至适用于以 at 符号结尾的路径——您可以使用 filename@@ 来谈论名为 filename@ 的文件。**

# c - Output of a << with -ve no?

> ID：12895368
> 
> 赞同：0
> 
> 时间：2012-10-15T12:09:28.080
> 
> 标签：c

> **Possible Duplicate:**
> [Left shifting with a negative shift count](https://stackoverflow.com/questions/4945703/left-shifting-with-a-negative-shift-count)

Consider my code follows

```
int main()
{
    int k=1;
    k=k<<-1;
    printf("%d",k);
} 
```

o/p

> -2147483648

Why the output is like this.I know negative no's are stored in `2's complement` but here is there any use of this concept of -2s complement.Kindly give me some idea.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T12:11:22.543

`k << -1; // Before the OP edit`

and

`k = k<<-1;`

These statements are undefined behavior in C.

Using a negative value in the right operand of the bitwise left or right shift operator is undefined behavior in C (see C99, 6.5.7).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T12:18:38.010

-2147483648 结果的原因 - 如果您在 x86 处理器上测试它 - 是移位计数被限制为 31（请参阅“英特尔架构软件开发人员手册第 2 卷：指令集参考”）。所以你得到 1<<31，它等于 0x80000000，当打印为有符号的 32 位整数时，它变成 -2147483648。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T12:12:15.287

如果第二个操作数为负，则移位操作的结果是不确定的。

[http://msdn.microsoft.com/en-us/library/f96c63ed%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/f96c63ed%28v=vs.80%29.aspx)
[为什么我得到一个负值位移的奇怪结果？](https://stackoverflow.com/questions/1881455/why-am-i-getting-strange-results-bit-shifting-by-a-negative-value)

# perl - 在 unix 管道的一行中打印前 80 个字符

> ID：12895371
> 
> 赞同：1
> 
> 时间：2012-10-15T12:09:47.597
> 
> 标签：perl, sed, awk

> **可能重复：**
> [截断标准输入行长度？](https://stackoverflow.com/questions/137313/truncate-stdin-line-length)

我一直在寻找一个`awk`或`perl`（或者可能`sed`？）单行来打印一行中的前 80 个字符，用于：

```
cat myfile.txt | # awk/perl here 
```

我猜`perl -pe 'print $_[0..80]'`应该可以工作，但我不擅长 perl。

**编辑** `perl -pe 'print $_[0..80]`不起作用，我不知道为什么。这就是我问这个问题的原因。在所有那些沉默的反对票之后，我想解释一下..

也`cat myfile.txt`只是为了证明命令应该在管道中，我实际上正在使用其他一些输出。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-15T12:18:10.463

**切：**

```
cut -c1-80 your_file 
```

**awk：**

```
awk '{print substr($0,0,80)}' your_file 
```

**赛德：**

```
sed -e 's/^\(.\{80\}\).*/\1/' your_file 
```

**perl:**

```
perl -lne 'print substr($_,0,80)' your_file 
```

或者：

```
perl -lpe 's/.{80}\K.*//s' your_file 
```

**grep：**

```
grep -o "^.\{80\}" your_file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T12:13:06.173

使用[`cut`](https://www.gnu.org/software/coreutils/manual/html_node/cut-invocation.html#cut-invocation), 获取第一个字符：

```
$ cut -c1-80 myfile.txt 
```

如果您想要第一个*字节*，请使用`-b`：

```
$ cut -b1-80 myfile.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T12:18:21.170

使用如下：

```
$ cat myfile.txt | awk '{print substr($0,0,80)}' 
```

另一种方式是：

```
$ awk '{print substr($0,0,80)}' x 
```

这里不需要`cat`，`awk`可以从文件中读取。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T16:25:36.793

cut/sed/awk 解决方案之一可能适合您，但您可能也对 fold 感兴趣，因为它可以让您在字符数之前的空格处换行并截断，而不是在字符数的中间处截断，如果您像：

```
$ cat file
the quick brown fox jumped over the lazy dog's back

$ cat file | fold -w29
the quick brown fox jumped ov
er the lazy dog's back

$ cat file | fold -s -w29
the quick brown fox jumped
over the lazy dog's back

$ cat file | fold -w29 | head -1
the quick brown fox jumped ov

$ cat file | fold -s -w29 | head -1
the quick brown fox jumped 
```

顺便说一句，我绝对不会使用上面显示的“cat”，我假设 OP 有一些其他命令写入标准输出并且只是使用“cat”来演示这个问题。

# css - attr as property in css selector

> ID：12895374
> 
> 赞同：1
> 
> 时间：2012-10-15T12:09:53.037
> 
> 标签：css, attr

> **Possible Duplicate:**
> [CSS selector by style attribute](https://stackoverflow.com/questions/8426882/css-selector-by-style-attribute)

html:

```
<div data-family='arial'></div> 
```

in css i want to use this family value. Example:

```
div{font-family: attr(data-family)} 
```

Family can be any string. How make it work?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:13:20.427

试试这个代码：

```
 div[data-weight="bold"]{
      font-weight: bold;
    } 
```

[http://www.w3.org/TR/selectors/#attribute-selectors](http://www.w3.org/TR/selectors/#attribute-selectors)

[JSFIDDLE](http://jsfiddle.net/3KZLX/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:12:33.640

您无法在纯 CSS 中实现您所询问的内容。使用 jQuery 可以这样做：

```
$.each($('div'), function(i, div) {
    $.each($(this).data(), function(key, val) {
        var realKey = key.replace(/([A-Z]{1})/g, '-$1').toLowerCase();
        $(div).css(realKey, val);
    })
})​ 
```

检查这个[演示](http://jsfiddle.net/8xupr/1/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T12:12:42.867

您可以使用以下内容：

```
div[data-weight="bold"] { font-weight: bold; } 
```

但我不相信有任何方法可以在没有 JavaScript 的情况下将属性用作属性

# javascript - html canvas saveAsBmp 图像保存为灰色背景？

> ID：12895388
> 
> 赞同：0
> 
> 时间：2012-10-15T12:10:47.787
> 
> 标签：javascript, image, html5-canvas, bmp

我有一个基于 OpenLayers 的热图，其中填充了各种热图图层、红色黄色绿色渐变等。我只想采用白色背景的渐变/点，完全不包括地图。但是，当我保存 bmp 图像时，我得到一个灰色的背景。如何确保我有白色背景？我的保存代码是这样的-从按钮单击 jquery 事件中调用-

```
Canvas2Image.saveAsBMP(heatLayers[currentHeat].canvas); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:26:33.070

将文件另存为 PNG 解决了这个问题。

# c++ - 避免在 C++ 中产生僵尸进程

> ID：12895392
> 
> 赞同：2
> 
> 时间：2012-10-15T12:10:59.020
> 
> 标签：c++, concurrency, fork, zombie-process

非常奇怪的错误，也许有人会看到我缺少的东西。

我有一个 C++ 程序，它派生出一个 bash shell，然后将命令传递给它。

周期性地，命令将包含废话，并且 bash 进程将挂起。我使用 semtimedwait 检测到这一点，然后运行一个像这样的小函数：

```
if (kill(*bash_pid, SIGKILL)) {
    cerr << "Error sending SIGKILL to the bash process!" << endl;
    exit(1); 
} else {
    // collect exit status
    long counter = 0;
    do {
        pid = waitpid(*bash_pid, &status, WNOHANG);
        if (pid == 0) { // status not available yet
            sleep(1);
        }
        if(counter++ > 5){
            cerr << "ERROR: Bash child process ignored SIGKILL >5 sec!" << endl;
        }
    } while (pid != *bash_pid && pid != -1);
    if(pid == -1){
        cerr << "Failed to clean up zombie bash process!" << endl;
        exit(1);
    }

    // re-initialized bash process
    *bash_pid = init_bash();
 } 
```

假设我正确理解了 waitpid 的工作原理，这应该首先将 SIGKILL 发送到 shell，然后基本上坐在自旋锁中，试图获得结果过程。最终，它成功了，然后使用 init_bash() 启动了一个新的 bash 进程。

至少，这是应该发生的。相反，子进程的退出状态永远不会被收集，它继续作为僵尸进程存在。尽管如此，父级*确实*退出了循环并设法重新启动 bash 进程，并继续正常执行。最终生成了太多的僵尸，系统用完了 pid。

此外：

*   Fork 在程序中的一个地方被调用，在 init_bash 中。
*   检查会阻止调用 init_bash，除非在程序启动时和调用上述函数之后调用。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:29:04.420

我阅读的文章表明僵尸进程的原因是子进程退出，但是父进程从不收集子进程的退出。

本文提供[了几种从命令行杀死僵尸进程的方法](http://linuxshellaccount.blogspot.com/2008/05/killing-zombie-processes-in-linux-and.html)。一种技术是使用除 SIGKILL 之外的其他信号，例如 SIGTERM。

This [article有一个答案，建议](https://serverfault.com/questions/12503/what-is-a-zombie-process-and-how-do-i-kill-it)不应使用SIGKILL。

其中一种技术是杀死父进程，从而也杀死它的子进程，包括任何僵尸进程。作者指出，在操作系统重新启动之前，似乎有一些子进程一直保持为僵尸状态。

您没有提到用于将命令传达给子进程的机制。然而，一种选择可能是通过断开子进程与其父进程的连接来释放子进程，类似于终端进程的子进程可以与终端会话断开连接的方式。这样，孩子将成为自己的进程，如果出现问题，可能会退出而不会成为僵尸。

# android - 如何避免嵌套权重？

> ID：12895402
> 
> 赞同：9
> 
> 时间：2012-10-15T12:11:19.610
> 
> 标签：android, android-layout

我有一个 xml 布局来输入密码：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#FF000000"
    android:orientation="vertical"
    android:weightSum="1" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_margin="5dp"
    android:layout_weight="0.2"
    android:background="@android:drawable/edit_text"
    android:gravity="center_vertical"
    android:orientation="horizontal" >

    <EditText
        android:id="@+id/pinDisplay"
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_weight="0.85"
        android:background="@null" />

    <ImageButton
        android:id="@+id/backspace"
        style="@android:style/Widget.Button"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_gravity="center_vertical"
        android:layout_margin="3dp"
        android:layout_weight="0.15"
        android:gravity="center"
        android:src="@android:drawable/ic_input_delete" />
</LinearLayout>

<!-- Keypad section -->

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="0.8"
    android:baselineAligned="false"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_marginLeft="5dip"
        android:layout_marginRight="4dip"
        android:layout_weight="1"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/one"
            android:layout_width="0sp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:text="1"
            android:textAppearance="@android:attr/text" />

        <Button
            android:id="@+id/two"
            android:layout_width="0sp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:text="2" />

        <Button
            android:id="@+id/three"
            android:layout_width="0sp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:text="3" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="0sp"
        android:layout_marginLeft="5dip"
        android:layout_marginRight="4dip"
        android:layout_weight="1"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/four"
            android:layout_width="0sp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:text="4" />

        <Button
            android:id="@+id/five"
            android:layout_width="0sp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:text="5" />

        <Button
            android:id="@+id/six"
            android:layout_width="0sp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:text="6" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="0sp"
        android:layout_marginLeft="5dip"
        android:layout_marginRight="4dip"
        android:layout_weight="1"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/seven"
            android:layout_width="0sp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:text="7" />

        <Button
            android:id="@+id/eight"
            android:layout_width="0sp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:text="8" />

        <Button
            android:id="@+id/nine"
            android:layout_width="0sp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:text="9" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="0sp"
        android:layout_marginBottom="10dip"
        android:layout_marginLeft="5dip"
        android:layout_marginRight="4dip"
        android:layout_weight="1"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/ok"
            android:layout_width="0sp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:enabled="false"
            android:text="OK"
            android:textColor="#B8B8B8" />

        <Button
            android:id="@+id/zero"
            android:layout_width="0sp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:text="0" />

        <Button
            android:id="@+id/clear"
            android:layout_width="0sp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:text="Clear" />
    </LinearLayout>
  </LinearLayout>
</LinearLayout> 
```

布局很好，但我收到很多关于嵌套权重的 Lint 警告。

> 嵌套权重不利于性能

我真的没有注意到布局加载缓慢或任何东西。我能做些什么来避免嵌套权重？还是我应该保持原样？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-15T12:21:29.810

通常，您应该尝试使用[RelativeLayout](http://developer.android.com/guide/topics/ui/layout/relative.html)而不是嵌套许多 LinearLayout。

从[文档](http://developer.android.com/guide/topics/ui/declaring-layout.html)：

> 注意：虽然您可以在另一个布局中嵌套一个或多个布局以实现您的 UI 设计，但您应该努力使您的布局层次结构尽可能浅。如果嵌套布局较少（宽视图层次结构优于深视图层次结构），您的布局绘制速度会更快。

但是当你需要权重时，比如现在，[RelativeLayout](http://developer.android.com/reference/android/widget/RelativeLayout.html)对你帮助不大；相反，我建议为您的键盘使用[TableLayout](http://developer.android.com/reference/android/widget/TableLayout.html)，以减少嵌套布局的数量。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-15T12:14:57.620

您可以使用 RelativeLayout 来避免嵌套权重。

嵌套权重对性能不利，因为每一个嵌套的测量值都会呈指数增长。

# c++ - Parsing XML file while it is being written in Qt

> ID：12895405
> 
> 赞同：0
> 
> 时间：2012-10-15T12:11:29.113
> 
> 标签：c++, file, qt

I have a process that is writing an XML file. I am writing an application that wants to parse the XML that is being written. The constraint here is that I want to parse the XML as it is being written. The XML is not written entirely all at once, and will be written gradually. How can I accomplish this using Qt?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:55:15.330

您可以使用[QXmlStreamReader](http://doc.qt.digia.com/qt/qxmlstreamreader.html)完成此操作。如果在您解析时数据用完，它将报告 a `QXmlStreamReader::PrematureEndOfDocumentError`，但如果发生这种情况，您应该能够等待更多数据。

建议的链接还包含有关增量解析的信息。

# php - 计算 HEX 颜色之间的距离并消除颜色过于相似的函数

> ID：12895410
> 
> 赞同：1
> 
> 时间：2012-10-15T12:11:47.583
> 
> 标签：php, function

我有一个简单的 PHP 函数，它为 HTML 颜色生成十六进制值并将它们插入到数据库中。

考虑到从数据库中提取的十六进制值数组，如何修改此函数以避免生成与其他函数相似的颜色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T12:15:23.130

颜色相似度有很多定义。您可能正在寻找相似的色调或相似的亮度。

出于这些目的，也许最简单的方法是在 RGB 空间中取两点之间的欧几里德距离，即：

```
sqrt(pow($r1 - $r0, 2) + pow($g1 - $g0, 2) + pow($b1 - $b0, 2)); 
```

并拒绝那些值太小（例如 10？）

# javascript - 根据点击更改 URL

> ID：12895416
> 
> 赞同：0
> 
> 时间：2012-10-15T12:12:23.163
> 
> 标签：javascript, jquery, html

我想将语言切换器添加到特定的 html 页面。我不需要任何语言文本，只有指向另一个站点的链接需要根据点击进行更改。在这里创建三个 html 页面只是为了处理一些链接更改没有多大意义，但我的 jquery 技能并不是那么好。

目标结构如下所示：

```
<ul>
<li><a  class="clickButton" href="folder1/firstLink/Languages/English/folder/index.html">Index Link</a></li>
<li><a  class="clickButton" href="../folder2/secondLink/Languages/English/folder/index.html">A different Link </a></li>
<li><a  class="clickButton" href="../../folder3/Languages/English/folder/index.html">Another different link</a></li>

<ul>

<ul>
<li><a  class="clickButton" href="folder1/firstLink/Languages/Spanish/folder/index.html">Index Link</a></li>
...
<ul> 
```

如您所见，我只需要用西班牙语替换语言名称（“英语”）即可使链接正常工作。所以我在想用户点击了相应的标志，并且 url 字符串相应地发生了变化。

我会很高兴看到一些如何切换语言名称的例子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:17:05.943

*HTML：*

```
<a data-lang="Spanish">To Spanish</a>
<a data-lang="Russian">To Russian</a> 
```

*JavaScript：*

```
var current = "English"
$("[data-lang]").on("click", function() {
    var lang = $(this).data("lang");
    $(".clickButton").prop("href", function(i, href) {
        return href.replace(current, lang);
    });
    current = lang;
}); 
```

**演示：http:** [//jsfiddle.net/a2xqL/](http://jsfiddle.net/a2xqL/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T12:19:42.423

让自己轻松：为链接添加自定义数据属性；

```
<a data-lang="English" href=""> 
```

比使用 jQuery by 访问它`$link.data('lang');`并将其添加到 href。

# django - 如何使用每个 SITE_ID 的唯一 settings.py 设置 django

> ID：12895417
> 
> 赞同：3
> 
> 时间：2012-10-15T12:12:23.047
> 
> 标签：django, django-settings, django-users, django-wsgi

我一直在研究在单个 Django 框架下拥有多个站点的各种（并且有很多）方法。

我仍然没有看到适合我的用例的解决方案。用例是：

*   单个数据库，因为大部分数据 (95%+) 将在两个应用程序之间共享
*   两种不同的用户类型，每个都通过不同的域登录，实际上与相同的原始数据交互，不同

我想要实现的是：

当访问者访问 example.com 时，SITE_ID = 1 的设置生效。

当访问者访问 training.example.com 时，SITE_ID = 2 的设置生效。

我想这样做是因为：

*   我想为不同的用户使用明确不同的 UserProfile 对象
*   我想在不同域之间随意混合和匹配视图和应用程序

Sites 框架上的 Django 文档似乎对我没有帮助，尽管有这篇文章和其他一些文章，我可以看到一些可能性。

我目前的想法是使用 wsgi 服务器（在我的例子中为 uWSGI）来实际解决它，我将在其中获取 Django 的默认 wsgi.py，复制它，每个 wsgi conf 都会有自己的 Django settings.py。

然后服务器实际上将服务于两个不同的 wsgi 应用程序，即使它们使用许多相同的代码。

因此，在这种情况下，我的 Django 项目将具有：

*   example.com.settings.py (SITE_ID = 1)
*   training.example.com.settings.py (SITE_ID = 2)
*   example.com.wsgi.py（使用 example.com.settings.py）
*   training.example.com.wsgi.py（使用 training.example.com.settings.py）

我的场景应该可以工作，但是在同一个 Django 实例中解决这个问题的内存将是两倍。

对于我需要实现的目标有什么更好的实现吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-16T20:12:41.560

据我所知，settings.py 对于每个 django 项目都是唯一的，并且 SITE_ID 是在此级别定义的。恕我直言，最好的方法是将许多 django 项目与数据库路由器一起使用。在每个项目中，您可以定义 SITE_ID 以与 django 站点框架一起使用。 [https://docs.djangoproject.com/en/dev/topics/db/multi-db/#database-routers](https://docs.djangoproject.com/en/dev/topics/db/multi-db/#database-routers)

# jsf-2 - get instance of bean within a sessionscope via session.getAttribute

> ID：12895418
> 
> 赞同：-1
> 
> 时间：2012-10-15T12:12:30.787
> 
> 标签：jsf-2, jboss-weld, servlet-3.0

Within my (JSF, Servlet 3.0) sessionscope there are instances of classes. How can I get the instance of a class by using the names provided in sessionscope?

For example, in my session there is a instance of MyBean:

```
classes-ManagedBean-class com.MyBean=Bean: Managed Bean [class com.MyBean] with qualifiers [@Any @Default @Named]; Instance: com.MyBean@40a6d41f 
```

In java code, I want to retrieve the actual instance of MyBean:

```
HttpSession session = us.getHttpSession();
MyBean mybean = (MyBean) session.getAttribute("???"); 
```

Which value should I provide for '???'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:28:29.017

this what you after :

```
FacesContext context = FacesContext.getCurrentInstance();
MyBean mybean =  (MyBean) context.getExternalContext().getSessionMap().get("myBean"); 
```

Note that myBean is the name of the managed bean

for example `@ManagedBean(name = "myBean ")` , if no `(name = "myBean ")` is specified the default will be the same as class name with first letter in lower case

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:38:07.160

The above is retrieved from SessionMap. I made a workaround by putting a key explicitly in sessionmap again. Now it works

# c# - ASP.NET MVC 如何获取允许的用户？在 windows 身份验证中

> ID：12895420
> 
> 赞同：3
> 
> 时间：2012-10-15T12:12:30.997
> 
> 标签：c#, asp.net, asp.net-mvc, web-config, windows-authentication

我有网络配置：

```
<location allowOverride="true" path="Admin/Secure">
    <system.web>
      <authorization>
        <allow users="SpecificUserName1" />
        <allow users="SpecificUserName2" />
        <deny users="*" />
      </authorization>
    </system.web>
  </location> 
```

我需要在运行时获取所有用户（SpecificUserName1，SpecificUserName2）。我怎样才能做到这一点？

**更新**我需要在视图中执行此操作

现在我使用默认方法：

```
@if (Request.IsAuthenticated)
{
 //secure menu
} 
```

**现在：** 为域中的所有用户显示菜单，但仅授予 web.config 中存在的用户访问权限

**需要：** 隐藏菜单/允许域中的所有用户访问，除了 web.config 中存在的用户

**更新**

我找到了解决方案 [http://forums.asp.net/t/1787320.aspx/1](http://forums.asp.net/t/1787320.aspx/1)

```
UrlAuthorizationModule.CheckUrlAccessForPrincipal(Request.Url.AbsolutePath, HttpContext.Current.User, HttpContext.Current.Request.HttpMethod); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T12:14:27.333

首先，**不要`web.config`用于控制 ASP.NET MVC 应用程序中的授权**。

使用[`[Authorize]`](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute%28v=vs.108%29.aspx)属性。用它装饰相应的控制器/动作：

```
[Authorize(Users = "SpecificUserName1, SpecificUserName2")]
public ActionResult Secure()
{
    ...
} 
```

然后，您可以将这些用户名外部化为常量并重用该值。顺便说一句，根据您需要这些值的确切位置，可能还有其他方法可以检索它们。

# c# - 无法调试 Outlook 加载项项目

> ID：12895423
> 
> 赞同：1
> 
> 时间：2012-10-15T12:12:39.550
> 
> 标签：c#, outlook, vsto, outlook-addin, outlook-2010

我在 Outlook 2010 加载项项目中遇到问题，在第一次调试该项目后，我无法再次调试它，它向我显示以下警告：

> 以下模块是在启用优化或没有调试信息的情况下构建的： {Path to DLL} 要调试此模块，请将其项目构建配置更改为调试模式。要禁止显示此消息，请禁用“在启动时没有用户代码时发出警告”调试器选项。

我没有做任何改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:17:07.363

要进行调试，您需要**调试符号**和**未优化的代码**- 确保您[为构建配置](http://msdn.microsoft.com/en-us/library/ms164714%28v=vs.110%29.aspx)[**启用了调试符号**](http://msdn.microsoft.com/en-us/library/ms164714%28v=vs.110%29.aspx)，即`Define DEBUG constant`选中，**优化禁用**，即`Optimize code`未选中。

# javascript - 从用户控件设置 .aspx 页面上的输入隐藏字段的值

> ID：12895424
> 
> 赞同：0
> 
> 时间：2012-10-15T12:12:39.867
> 
> 标签：javascript, asp.net, jquery, javascript-events

请任何人告诉我如何从用户控件设置我的 .aspx 页面上的输入隐藏字段值。这个用户控件有几个下拉菜单，我可以在我的用户控件中创建 OnClientSelectedIndexChanged Java Script 事件处理程序，但无法弄清楚如何在我的 .aspx 页面上的隐藏字段中设置值。换句话说，我的 .aspx 页面正在呈现此用户控件，我想从用户控件的 OnClientSelectedIndexChanged Java 脚本事件访问 .aspx 页面输入字段。提前致谢。问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:23:37.223

在`OnClientSelectedIndexChanged`函数中：

```
document.getElementById('yourHiddenID').value = 'whatever you want'; 
```

作为旁注，您应该在 javascript 中绑定您的 javascript 函数，而不是使用控件的标记属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:23:46.420

我不确定您的问题是在客户端还是服务器端访问 aspx 中的隐藏控件。

如果在客户端您可以编写一个 javascript`OnClientSelectedIndexChanged`并更新 ASPX 的隐藏字段，则 ASPX 的所有 ASCX 部分在呈现给客户端（浏览器）时将成为一个 DOM

控件名称将以您的 ascx 标记名称和标识符作为前缀，因此您可能需要使用`ClientID`来获取控件的 id。

在回发的服务器端，您可以使用 Request.Form 获取 aspx 的值，每当回发发生时，控件的所有值都会在 Request.Form 集合中传递。

# mysql - 如何通过 HSQLDB 和 MySQL 之间的差异来处理 union/order？

> ID：12895425
> 
> 赞同：2
> 
> 时间：2012-10-15T12:12:39.737
> 
> 标签：mysql, sql, hsqldb, dialect

我目前使用 hsqldb 进行测试，使用 mysql 进行生产。这种组合对我最近的每个项目都非常有效，但是我遇到了 HSQLDB 的语法/方言与 MySQL 不同的情况，我不确定克服它的最佳策略是什么。

在 mysql 中，您可以像这样编写联合查询：

```
select ...
union
select ...
order by created_on desc
limit 20 offset 0 
```

但是，在 HSQLDB 中，它抱怨该`order by`子句有错误。

有什么办法可以编写查询，以便两个数据库都喜欢语法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T12:15:44.317

试试这个：

```
select * from (

select ...
union
select ...)a
order by a.created_on desc
limit 20 offset 0 
```

# ios - Push segue 滞后于目标 VC 的代码执行

> ID：12895428
> 
> 赞同：0
> 
> 时间：2012-10-15T12:12:42.080
> 
> 标签：ios, xcode, push, segue

还有其他人经历过这个吗？从我的主页视图中，我将 segue 推到播放视图。我正在播放一些应该与一些标签协调的音频位。问题是，音频在 segue 结束之前开始，所以我的前几个标签没有机会出现。甚至似乎音频播放正在延迟转场。这发生在模拟器和 iPhone 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:22:06.570

问题是您从`viewDidLoad`. 将代码放入其中以启动您的音频`viewDidAppear:animated`。

这是视图控制器加载视图的顺序：

*   加载视图
*   viewDidLoad
*   viewWillAppear:动画
*   viewDidAppear：动画

viewDidAppear:animated 在动画完成后被调用。

# r - rjags 中的模型用于总和为零的约束

> ID：12895431
> 
> 赞同：2
> 
> 时间：2012-09-29T22:57:17.993
> 
> 标签：r, winbugs

我正在尝试将 ANOVA 模型拟合到 rjags 中。模型是这样的

```
for (r in 1:nE){
  for ( j in 1:nP){
    for ( i in 1:nA){
      logit(p[i,j,r]) <- mu[r] + theta[i,r] + varphi[j,r] + psi[(nA-i)+j,r]
    }
  }
} 
```

我需要适应

```
for (r in 1:nE){
  theta[nA,r] <- 0 - sum(theta[1:(nA-1), r])
  varphi[nP,r] <- 0 - sum(varphi[1:(nP-1), r])
  psi[nK,r] <- 0 - sum(psi[1:(nK-1), r])
} 
```

这是此模型的零约束之和。但是，rjags 给了我信息

```
"Compilation error on line 14\. Attempt to redefine node varphi[16,1]" 
```

如果我删除约束部分，模型编译得很好但不会收敛。在 BUGS 中，模型被接受。

如何在 rjags 中实现这些约束？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T14:40:58.610

你有两个选择：

1.  制作*新的*零和变量（不要重新定义旧变量）并监控它们。

2.  重新参数化模型以使用角约束，而不是求和为零。

1 是更好的选择，因为新变量可能会收敛得更快。见[Ntzoufras 的书，（第 5 章）](http://zoe.bme.gatech.edu/~bv20/bmed2803/Bank72/chapter05.pdf)，秒。5.4.2 用于讨论以及相关的错误代码。这也*应该*适用于锯齿，虽然我没有检查过。

# java - java中的非持久Quartz调度程序

> ID：12895435
> 
> 赞同：0
> 
> 时间：2012-10-15T12:13:00.453
> 
> 标签：java, quartz-scheduler

我们在集群环境中部署了一个应用程序。每 5 分钟，我们的应用程序就会向与其连接的所有其他应用程序发送一个 ping 操作。为了完成这项工作，我们使用了非持久性 Quartz 调度程序。

问题是在集群环境中只有一个节点在执行此活动（ping 操作）。是否有任何参考或任何示例代码？（这是一个普通的 servlet 应用程序。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:54:42.287

由于所有节点都在集群中工作，因此每个作业只在一台机器上运行（最空闲的一台）。这就是您使用集群的原因。但是您希望所有机器独立运行给定的作业，而不知道其他集群节点。基本上，你根本不需要 Quartz（集群）！

使用就足够了[`ScheduledExecutorService.html#scheduleAtFixedRate()`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html#scheduleAtFixedRate%28java.lang.Runnable,%20long,%20long,%20java.util.concurrent.TimeUnit%29)：

```
final ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(1);

final Runnable pinger = new Runnable() {
    public void run() {
        //send PING
    }
};
scheduler.scheduleAtFixedRate(pinger, 5, 5, MINUTES); 
```

只需在每台机器上运行此代码并在需要的地方使用 Quartz。

# java - jquery ui组件获取目录位置

> ID：12895444
> 
> 赞同：0
> 
> 时间：2012-10-15T12:13:13.760
> 
> 标签：java, javascript, jquery, jquery-plugins

我是前端开发的新手。我需要从用户那里获取目录位置。用户将上传 postgresql 安装位置，如 (C:\Program Files (x86)\PostgreSQL\8.3)。除了 textbox 之外，是否有任何 jquery 组件可以实现此目的？我试过将文件上传，我们只能上传文件而不能输入目录位置？请帮帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:51:25.573

我同意，您无法使用 HTML 元素获得文件的完整路径。

试试这个插件： [http ://www.abeautifulsite.net/blog/2008/03/jquery-file-tree/](http://www.abeautifulsite.net/blog/2008/03/jquery-file-tree/)

它显示了从中选择文件的目录结构。您可以通过这种方式构建完整路径。

# iphone - Zooz Secure 应用内支付运行时错误

> ID：12895447
> 
> 赞同：0
> 
> 时间：2012-10-15T12:13:21.597
> 
> 标签：iphone, crash, in-app-purchase, payment-gateway, runtime-error

我正在尝试将 ZOOZ 集成到应用程序支付中，但它在运行时给了我错误。它执行我的完整方法，然后使应用程序崩溃。我的方法是这样的

```
-(IBAction)buyMore{
    paymentSuccessLabel.hidden = YES;

    ZooZ * zooz = [ZooZ sharedInstance];

    zooz.sandbox = YES;

    zooz.tintColor = [UIColor colorWithRed:1 green:0.8 blue:0 alpha:1];

    zooz.barButtonTintColor = [UIColor darkGrayColor];

    ZooZPaymentRequest * req = [zooz createPaymentRequestWithTotal:12.1 invoiceRefNumber:@"test invoice ref-1234" delegate:self];

    req.currencyCode = @"EUR";

    req.payerDetails.firstName = @"Some";

    req.payerDetails.email = @"test@zooz.com";

    req.payerDetails.billingAddress.zipCode=@"01234";

    req.requireAddress = NO;

    ZooZInvoiceItem * item = [ZooZInvoiceItem invoiceItem:12.1 quantity:1 name:@"T-Shirt"];
    item.additionalDetails = @"Free 200 characters custom description";
    item.itemId = @"refId-12345678"; // optional

    [req addItem:item];

    req.invoice.additionalDetails = @"Custom invoice description text";

    [zooz openPayment:req forAppKey:@"27edd0b5-7289-4e6a-9dcb-201179701496"];

} 
```

应用程序登录崩溃是这样的

```
Unknown class ZooZCardViewController in Interface Builder file.
Unknown class ZooZButton in Interface Builder file.
Unknown class ZooZFooterPanel in Interface Builder file.
Unknown class ZooZSpinner in Interface Builder file.
Unknown class ZooZBasePanel in Interface Builder file.
 *** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<UICustomObject 0x4c12e0> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key pageControl.' 
```

请帮助我，我很担心。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:13:59.997

您似乎没有正确包含 ZooZ SDK 库文件。我建议您首先删除对 ZooZ 的所有引用。还要查看目标属性的“框架搜索路径”，并确保没有对 ZooZ 的引用。

然后只需右键单击您的项目文件，选择添加新文件，然后选择 ZooZ.embeeedframework 文件夹。（不要标记复制文件复选框）并标记您希望将其添加到的所有目标。

ZooZ SDK 文档 PDF 文件中有分步流程，包括屏幕截图。还要确保在目标的“其他链接器标志”属性中设置“-ObjC”值

# erlang - 如何让 Webmachine 和 eredis 一起工作？

> ID：12895448
> 
> 赞同：2
> 
> 时间：2012-10-15T12:13:25.347
> 
> 标签：erlang, redis, mochiweb, webmachine

一周以来，我一直在思考我的 Webmachine 应用程序中 Redis 的使用问题。而我还没有开悟。

我将使用 Eredis，这是一个使用示例：

```
{ok, Con} = eredis:start_link().

{ok, <<"OK">>} = eredis:q(Con, ["SET", "foo", "bar"]).
{ok, <<"bar">>} = eredis:q(Con, ["GET", "foo"]). 
```

据我了解`eredis:start_link()`，应该只在某个地方调用一次。但是，我怎样才能`Con`在我的资源中获得变量呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T03:42:45.057

有几种解决方案：

*   在本地或全局注册一个 redis 连接
*   使用像[gproc这样的进程寄存器](https://github.com/uwiger/gproc)
*   将连接的 pid 保留在 webmachine 资源上下文中
*   使用像[pooler](https://github.com/seth/pooler)或[poolboy这样的连接池](https://github.com/devinus/poolboy)
*   如果您不想在池中排队请求[dispcount](https://github.com/ferd/dispcount)可能适合

* * *

编辑：被误解的问题，下面的第一个答案：

Webmachine 和 eredis 都是[遵循 OTP 原则的 Erlang 应用程序](http://www.erlang.org/doc/design_principles/applications.html)。`applications`如果您的应用程序符合 OTP，您可以将 eredis 添加到`.app`文件中，如下所示：

```
{application, awesome_app, [
    {description, "My awesome app."},
    {vsn, "0.0.1"},
    {modules, []},
    {registered, []},
    {applications, [kernel, stdlib, 
                    eredis, 
                    webmachine]}
]}. 
```

符合 OTP 的应用程序使用[版本](http://www.erlang.org/doc/design_principles/release_structure.html)。创建发布并启动应用程序后，其中的应用程序`applications`将在您的应用程序之前启动。

[Rebar](https://github.com/basho/rebar)是您构建和生成版本的朋友（[更多信息在这里](http://www.metabrew.com/article/erlang-rebar-tutorial-generating-releases-upgrades)）。螺纹钢的替代品是[本文](http://blog.erlware.org/2012/05/04/sinan-releases-and-being-right/)所述的[思南](https://github.com/erlware/sinan)。

# java - 发送 ArrayList 使用套接字通过 TCP 从服务器端到客户端？

> ID：12895450
> 
> 赞同：8
> 
> 时间：2012-10-15T12:13:44.320
> 
> 标签：java, sockets, tcp, serversocket

我正在尝试通过 TCP 将一个对象从服务器端套接字发送到客户端套接字。我找不到问题出在哪里。

这是我在客户端遇到的错误：

```
java.io.EOFException
    at java.io.ObjectInputStream$PeekInputStream.readFully(ObjectInputStream.java:2280)
    at java.io.ObjectInputStream$BlockDataInputStream.readShort(ObjectInputStream.java:2749)
    at java.io.ObjectInputStream.readStreamHeader(ObjectInputStream.java:779)
    at java.io.ObjectInputStream.<init>(ObjectInputStream.java:279)
    at ClientSide.main(ClientSide.java:16) 
```

服务器端代码：

```
import java.io.*;
import java.net.*;
import java.util.ArrayList;

public class ServerSide {

    public static void main(String[] args) {
        try
        {
            ServerSocket myServerSocket = new ServerSocket(9999);
            Socket skt = myServerSocket.accept();   
            ArrayList<String> my =  new ArrayList<String>();
            my.set(0,"Bernard");
            my.set(1, "Grey");
            try 
            {
                ObjectOutputStream objectOutput = new ObjectOutputStream(skt.getOutputStream());
                objectOutput.writeObject(my);               
            } 
            catch (IOException e) 
            {
                e.printStackTrace();
            } 
        }
        catch (IOException e) 
        {
            e.printStackTrace();
        }
    }

} 
```

客户端代码：

```
import java.io.*;
import java.net.InetAddress;
import java.net.Socket;
import java.net.UnknownHostException;
import java.util.ArrayList;

public class ClientSide {

    public static void main(String[] args)
    {
        try {       
            Socket socket = new Socket("10.1.1.2",9999);
            ArrayList<String> titleList = new ArrayList<String>();
            try {
                ObjectInputStream objectInput = new ObjectInputStream(socket.getInputStream()); //Error Line!
                try {
                    Object object = objectInput.readObject();
                    titleList =  (ArrayList<String>) object;
                    System.out.println(titleList.get(1));
                } catch (ClassNotFoundException e) {
                    System.out.println("The title list has not come from the server");
                    e.printStackTrace();
                }
            } catch (IOException e) {
                System.out.println("The socket for reading the object has problem");
                e.printStackTrace();
            }           
        } catch (UnknownHostException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }   
    }   
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T12:22:54.367

从`set`到改变`add`诀窍

```
ArrayList<String> my =  new ArrayList<String>();
my.add("Bernard");
my.add("Grey"); 
```

附言。正如其他人所建议的那样，这不是一个好主意，但仅用于学习

# haskell - 使用 DataKinds - 种类不匹配错误

> ID：12895454
> 
> 赞同：5
> 
> 时间：2012-10-15T12:14:02.363
> 
> 标签：haskell, ghc, type-families, type-level-computation, data-kinds

我一直在自学类型级编程，并想编写一个简单的自然数加法类型函数。我的第一个版本如下：

```
data Z
data S n

type One = S Z
type Two = S (S Z)

type family Plus m n :: *
type instance Plus Z n = n
type instance Plus (S m) n = S (Plus m n) 
```

所以在 GHCi 中我可以这样做：

```
ghci> :t undefined :: Plus One Two
undefined :: Plus One Two :: S * (S * (S * Z)) 
```

哪个按预期工作。`Z`然后我决定通过修改和`S`类型来尝试 DataKinds 扩展：

```
data Nat = Z | S Nat 
```

Plus 家族现在返回`Nat`一种：

```
type family Plus m n :: Nat 
```

修改后的代码可以编译，但问题是我现在在测试时遇到错误：

```
Kind mis-match
Expected kind `OpenKind', but `Plus One Two' has kind `Nat'
In an expression type signature: Plus One Two
In the expression: undefined :: Plus One Two 
```

我一直在寻找解决方案，但谷歌让我失望了。是否存在解决方案或者我是否达到了语言的某些限制？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T12:38:16.270

我认为您测试的方式不正确。`undefined`可以是任何类型的`*`（我可能在这里错了）。

在 ghci 中试试这个

```
ghci>:t (undefined :: 'Z)

<interactive>:1:15:
    Kind mis-match
    Expected kind `OpenKind', but `Z' has kind `Nat'
    In an expression type signature: Z
    In the expression: (undefined :: Z) 
```

您仍然可以`Plus One Two`通过`:kind!`在 ghci中使用来获取类型

```
ghci>:kind! Plus One Two
Plus One Two :: Nat
= S (S (S 'Z)) 
```

# backbone.js - Busterjs+requirejs+backbone 怎么写测试？

> ID：12895457
> 
> 赞同：4
> 
> 时间：2012-10-15T12:14:05.130
> 
> 标签：backbone.js, requirejs

我对 busterjs+requirejs+backbone 的组合没有什么问题，我的项目结构：

js-src

--lib //jquery、require等

--views

- 楷模

-app.js //需要配置和启动应用程序

js（编译结构同上）

测试

-buster.js

-require-config.js

-test-test.js

需要-config.js：

```
require.config({
  baseUrl: 'js-src/',
  paths: {
    jquery: 'lib/jquery',
    jplugins: 'lib/jquery.plugins',
    underscore: 'lib/underscore',
    backbone: 'lib/backbone'
  },
  shim: {
    'backbone': {
      deps: ['underscore', 'jplugins'],
      exports: 'Backbone'
    },
    'jplugins': {
      deps: ['jquery']
    }
  }
}); 
```

lib中的典型文件除外：

```
define(function (require) {
    var $ = require('jquery'),
      Backbone = require('backbone'),
      otherElem = require('views/other'),
      View = Backbone.View.extend({
        el: '#el',

        initialize: function () {

        },

        showLinks: function (value) {

        },

        render: function ) {

        }

    });

    return View;
}); 
```

破坏者.js：

```
var config = module.exports;
config['browser-all'] = {
  autoRun: false,
  environment: 'browser',
  rootPath: '../',
  libs: [
    'js-src/lib/require.js',
    'test/require-config.js'
  ],
  sources: [
    'js-src/**/*.js'
  ],
  tests: [
    'test/*-test.js'
  ]
 // extensions: [
 //   require('buster-amd')
 // ]
}; 
```

测试-test.js：

```
buster.spec.expose();
require(['views/View'], function (module) {
  describe("An AMD module", function () {
    it("should work", function () {
      expect(true).toEqual(true);
    });
  });
}); 
```

当我使用 buster test 运行它时，我得到：

```
Uncaught exception: ./js-src/lib/require.js:192 Error: Script error
http://requirejs.org/docs/errors.html#scripterror
TypeError: uncaughtException listener threw error: Cannot read property 'id' of undefined
    at Object.uncaughtException (/usr/local/lib/node_modules/buster/node_modules/buster-test-cli/lib/runners/browser/progress-reporter.js:49:50)
    at notifyListener (/usr/local/lib/node_modules/buster/node_modules/buster-core/lib/buster-event-emitter.js:37:31)
    at Object.emit (/usr/local/lib/node_modules/buster/node_modules/buster-core/lib/buster-event-emitter.js:101:17)
    at Object.emitCustom (/usr/local/lib/node_modules/buster/node_modules/buster-test-cli/lib/runners/browser/remote-runner.js:283:14)
    at /usr/local/lib/node_modules/buster/node_modules/buster-test-cli/lib/runners/browser/remote-runner.js:89:16
    at /usr/local/lib/node_modules/buster/node_modules/buster-test-cli/node_modules/buster-capture-server/lib/pubsub-client.js:79:47
    at Object.trigger (/usr/local/lib/node_modules/buster/node_modules/buster-test-cli/node_modules/buster-capture-server/node_modules/faye/node/faye-node.js:383:19)
    at Object.distributeMessage (/usr/local/lib/node_modules/buster/node_modules/buster-test-cli/node_modules/buster-capture-server/node_modules/faye/node/faye-node.js:666:30)
    at Object._deliverMessage (/usr/local/lib/node_modules/buster/node_modules/buster-test-cli/node_modules/buster-capture-server/node_modules/faye/node/faye-node.js:1065:20)
    at Object.<anonymous> (/usr/local/lib/node_modules/buster/node_modules/buster-test-cli/node_modules/buster-capture-server/node_modules/faye/node/faye-node.js:1004:12)
Firefox 16.0, Linux: 
```

如何使用该结构编写适当的测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T14:53:20.667

截至昨天，我是 Buster.js 的新手，但我将添加以下 4 部分建议。

1.) 在你的'buster.js'中取消注释“extensions: [require('buster-amd')]”

2.) 从“require.config”中删除“baseUrl”

3.) 明确设置库的路径。例如，“jplugins: 'lib/jquery.plugins'” 将变为“jplugins: 'js-src/lib/jquery.plugins'”，这对于模型、集合、视图和其他位于“ js-src/'目录。

```
require.config({
  paths: {
    jquery: 'js-src/lib/jquery',
    views: 'js-src/lib/views',
    somerootfile: 'js-src/somerootfile' 
```

4.）改变你的测试是这样的......

```
describe('some test', function(run) {
    require(['models/your_model'], function(YourModel) {
        run(function() {
            it('should load', function() {
                var yourModel = new YourModel();
                    yourModel.set('cat', 'dog');
                expect(YourModel.get('cat')).toEqual('dog');
            });
        });
    });
}); 
```

问题似乎是'require.config'中的'baseUrl'混淆了Buster.js并告诉它不再尊重'buster.js'中设置的'rootPath'。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T19:26:27.487

如果您运行浏览器测试并检查控制台中的输出，这将有所帮助。其中的错误消息通常更具表现力。您还应该从 buster 配置中删除 autoRun 指令并重新启用“buster-amd”扩展。

# php - 查询中的mysql区分大小写的表名

> ID：12895467
> 
> 赞同：2
> 
> 时间：2012-10-15T12:14:40.840
> 
> 标签：php, mysql, case-sensitive

我有 php 代码，其中数据库表名的第一个字母在每个地方都是大写字母，但数据库中的表名是小写的。

我应该使用什么全局设置，这样就不需要在每个代码文件中更改以在与数据库中相同的情况下生成表名。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T12:24:20.957

MySQL 元数据在 Linux 上默认区分大小写。也就是说，如果你有一个小写的 my_table 表，那么

```
select * from my_table 
```

会成功，而

```
select * from MY_TABLE 
```

将因某种表不存在消息而失败。

如果您希望这两个语句都成功，则需要将以下行 lower_case_table_names = 1 放在 /etc/my.cnf 或保留 MySQL 配置的任何位置。请务必将系统变量添加到配置文件的 [mysqld] 部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T12:19:01.300

您需要检查 mysql 标识符：

```
 lower_case_table_names 
```

您需要检查`my.ini`位于`mysql`目录中的文件。有关源和目标操作系统的更多详细信息，请查看：

[http://dev.mysql.com/doc/refman/5.0/en/identifier-case-sensitive.html](http://dev.mysql.com/doc/refman/5.0/en/identifier-case-sensitivity.html)

**从上面的 URL 中提取：**

> 如果您只在一个平台上使用 MySQL，您通常不必更改 lower_case_table_names 变量的默认值。但是，如果要在文件系统区分大小写不同的平台之间传输表，则可能会遇到困难。例如，在 Unix 上，您可以有两个不同的表，名为 my_table 和 MY_TABLE，但在 Windows 上，这两个名称被认为是相同的。为避免因数据库或表名的字母大小写引起的数据传输问题，您有两种选择：
> 
> ```
> Use lower_case_table_names=1 on all systems. The main disadvantage with this is that when you use SHOW TABLES or SHOW DATABASES, you do 
> ```
> 
> 看不到原始字母大小写的名称。
> 
> ```
> Use lower_case_table_names=0 on Unix and lower_case_table_names=2 on Windows. This preserves the lettercase of database and table names. 
> ```
> 
> 这样做的缺点是您必须确保您的语句在 Windows 上始终以正确的字母大小写引用您的数据库和表名。如果您将语句转移到字母大小写很重要的 Unix，如果字母大小写不正确，它们将不起作用。

# database - PL/SQL 日期插入

> ID：12895468
> 
> 赞同：0
> 
> 时间：2012-10-15T12:14:50.810
> 
> 标签：database, date, plsql, plsqldeveloper

我正在以“dd/mm/yyyy”格式触发插入查询，但它将日期存储为 MM/DD/YYYY 格式。我只想知道为什么会这样？

这是我正在使用的插入查询。

`insert into txnblackout(endtime,idtxn,blackoutflag,starttime,startdate,typeuser,id_entity,idsequence,idapp,enddate) values('83520','LGN','D','7920',TO_DATE('30/12/2012','dd/mm/yyyy'),'ECU','B001','4','A1',TO_DATE('30/12/2012','dd/mm/yyyy'))`

![在此处输入图像描述](../Images/776425af722fcb2f5740a4fa6aa8a1ff.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:17:43.917

这是一个前端问题：它以该格式显示日期。因为它们是日期字段，所以日期确实代表了您插入的日期。

我在屏幕截图的右下角注意到日期以 MM/DD/YYYY 的顺序显示。在 Windows 中更改此设置，它很可能会在您的前端工具中正确显示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T12:31:08.967

如果您不想更改 Windows 日期格式（如 Colin 't Hart 建议的那样），您可以

*   在查询中使用明确的 to_char() 日期格式（如 Robert Hanson 所建议）
*   设置您的客户端 NLS 设置
*   配置您的客户端（因为您似乎正在使用 PL/SQL 开发人员）：工具 -> 首选项 -> NLS 选项 -> 日期 -> 检查用户定义 + 输入您的格式

就个人而言，我会设置客户端 NLS 设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T12:23:23.887

重要的一点可以通过您的插入来闪烁，其中包括“TO_DATE('30/12/2012','dd/mm/yyyy')”。这会将字符串“30/12/2012”转换为特定于数据库的内部日期对象格式。您无法控制底层存储格式。但是，您可以控制的是在调用 select 时如何使用日期格式化函数将内部日期对象转换回字符串。

```
select to_char(some_date, 'dd/mm/yyyy') my_date from some_table; 
```

在您引用的可视界面中，它只是显示默认日期到字符串的转换。

# asp.net - 基于用户类型的动态数据视图

> ID：12895471
> 
> 赞同：0
> 
> 时间：2012-10-15T12:14:55.380
> 
> 标签：asp.net, asp.net-dynamic-data

我有动态数据网站，有 3 个角色：管理员、数据输入和用户。我希望用户只能查看，数据输入可以添加/查看，管理员可以添加/编辑/查看。

用户将在 Session["user"] 中获得他/她的身份验证，并且他的权限存储在 db 中。

我没有办法，我不想尝试太复杂的 C# 位，我也不想使用表单身份验证。

我想要一个简单的解决方案。

我正在使用 C# 和 ASP.Net VS 2010

# iphone - 以下代码中是否有任何内存泄漏？

> ID：12895473
> 
> 赞同：0
> 
> 时间：2012-10-15T12:15:04.610
> 
> 标签：iphone, memory-leaks, uibutton, iboutlet, viewdidunload

我有 uibutton 作为属性并在 dealloc 中释放它。我只是用它来隐藏或取消隐藏，但它的使用频率很高。

```
@property (retain, nonatomic) IBOutlet UIButton *object;

-(void)onsomebuttonclick
{
 object.hidden=true;
}

- (void)dealloc {
 [object release];
}

- (void)viewDidUnload
{
   [self setObject:nil];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T12:19:49.433

为什么不直接跑

(a) 静态分析器

(b) 启用泄漏工具的仪器

或者

(c) 使用 ARC？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T12:19:03.813

那应该可以正常工作。请注意，您应该设置 self.object = nil; 而不是释放它以防止意外使用释放的对象。

# html - 如何让我的 BG 包装器一直加载到页面下方，或在内容之前显示？

> ID：12895474
> 
> 赞同：0
> 
> 时间：2012-10-15T12:15:05.427
> 
> 标签：html, css, wordpress

我为一个朋友构建了这个 WP 主题（我知道有一些明显的样式问题，这些问题需要处理），但我的问题是让包装器在任何页面元素之前加载......

[http://www.touchlinetalk.com](http://www.touchlinetalk.com)

如果您加载或重新加载页面，您会注意到徽标和一些广告在背景空白之前加载？如果首先加载背景空白，然后再加载其他元素，则该网站看起来会更干净/整洁/现代。

我已经尝试指定高度和其他一些我认为会起作用的东西，但没有骰子 - 我似乎无法让它像我想要的那样表现。我觉得这是一个初级问题，一个我想不通的基本问题……

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:02:19.920

如果你会考虑 jquery 那么你可以试试这个：

首先隐藏您的内容，该内容由#bound div 使用您的css 包装

```
#bound{
 display:none;
} 
```

并让系统等待 2 秒，直到 BG 包装器完全加载

```
<script>
 setTimeout('show_content()', 2000);
 function show_content(){
     $("#bound").fadeIn();
 }
</script> 
```

您可以通过更改 setTimeout 时间值来延长显示整个内容的秒数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:42:16.383

我不知道你是否能够解决这个问题，当然不容易。您的页面加载正确，图像是请求的第 8 个资源（如[HttpFox](https://addons.mozilla.org/en-US/firefox/addon/httpfox/)所示）。一个网站基本上是按顺序逐行解析的。您的站点正在加载 HTML，然后是样式表、几个资源，同时样式表正在下载和解析（我的解释），然后是您的背景图像。你的图片很大，每次[在webpagetest.org上的测试](http://www.webpagetest.org/result/121015_49_B2T/1/details/)需要12秒下载你不能真正让图片在下载之前显示出来，老实说，你真的想让人们等待12秒才能看到任何东西，即使你可以？图像是装饰。这并不重要。你真的想失去流量吗？

不过，您可以做一些事情来提供帮助。首先，该图像是巨大的。你有什么办法可以减少它的大小吗？[我的意思是，为什么图像中心的](http://touchlinetalk.com/wp-content/themes/touchlinetalk/images/bg.png)所有空格？您只使用外部边缘。其次，鼓励缓存。把它放在你的`.htaccess`文件中。

```
<FilesMatch "\.(ico|jpg|jpeg|png|gif|swf)$">
    ExpiresActive On
    ExpiresDefault "access plus 2 weeks"
</FilesMatch> 
```

另外，如果您想检查一下，我还[发布了有关缓存的另一个主题。](https://stackoverflow.com/questions/12871084/wordpress-loads-forever/12873905#12873905)

**编辑：**

好的。看起来你有许多内联加载的脚本，比如这个`<script type="text/javascript">var vclk_options = {sid:64560,media_id:1,media_type:1,version:"1.3"};</script>...`在里面加载的脚本`<div id="headAdvert">`。这些内联脚本将“阻止”您的页面加载，直到它们完成。您将不得不在页面内容之后加载这些内容以防止这种情况发生。那些广告服务器没有您可以使用的异步脚本吗？[像这样的东西](http://www.webutation.net/go/review/cdn.fastclick.net#)？

# google-chrome - CKEditor 不能在我的电脑上运行

> ID：12895475
> 
> 赞同：-1
> 
> 时间：2012-10-15T12:15:07.093
> 
> 标签：google-chrome, ckeditor

一些奇怪的问题。上周我安装了 CKEditor，它运行良好。今天它不再工作了，只能在我的电脑和 Chrome 版本 22.0.1229.94 m 上运行。它适用于 IE 和 Mozilla，我已经尝试过使用相同 Chrome 版本的其他 PC，它运行良好。任何想法可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:14:10.517

Chrome 有时似乎对 CKEditor 插件有问题，例如 autogrow 插件。

禁用插件在这里有所帮助。

# jackson - 在 ObjectMapper 中使用 writevalue 进行使用 Jackson 进行序列化时。它正在刷新底层流

> ID：12895477
> 
> 赞同：2
> 
> 时间：2012-10-15T12:15:14.227
> 
> 标签：jackson

目前我们正在使用 Jackson 进行序列化。

问题是我不能在流中写入多个地图，我的代码是

```
ObjectMapper mapper = new ObjectMapper();
mapper.configure(com.fasterxml.jackson.core.JsonGenerator.Feature.FLUSH_PASSED_TO_STREAM, false);
mapper.writeValue(writer, myMap); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-15T15:47:18.217

我相信，设置`FLUSH_AFTER_WRITE_VALUE`为`false`，是您正在寻找的。

[https://github.com/FasterXML/jackson-databind/wiki/Serialization-features#output-life-cycle-features](https://github.com/FasterXML/jackson-databind/wiki/Serialization-features#output-life-cycle-features)

# python - 我可以使用 OAUT2 装饰器让用户登录到我的应用引擎应用程序吗

> ID：12895489
> 
> 赞同：3
> 
> 时间：2012-10-15T12:15:55.737
> 
> 标签：python, google-app-engine, oauth-2.0, decorator

我有一个 Python GAE 应用程序，它为用户提供一个 HTML 登录页面。此页面包含一个 oauth2 登录链接 (response_type=code)，用于登录我的应用程序。链接如下所示：

```
https://accounts.google.com/o/oauth2/auth?scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&state=%2Fprofile&redirect_uri=https%3A%2F%2Foauth2-login-demo.appspot.com%2Foauthcallback&response_type=code&client_id=812741506391.apps.googleusercontent.com 
```

用户允许访问后，GAE 应用程序会收到如下回调：

```
https://oauth2-login-demo.appspot.com/oauthcallback?code={authorizationCode} 
```

我的问题：

*   我可以使用 Python oauth2 装饰器来处理此回调吗？= 交换访问令牌的授权代码。

*   我还可以使用装饰器为我的 HTML 页面创建 oauth2 登录链接吗？

我正在使用这个流程：[https](https://developers.google.com/accounts/docs/OAuth2Login) ://developers.google.com/accounts/docs/OAuth2Login 。

和装饰者：[https](https://developers.google.com/api-client-library/python/platforms/google_app_engine) ://developers.google.com/api-client-library/python/platforms/google_app_engine 感谢您的帮助。

**更新：我想通了**。

登录.py

```
from google.appengine.api import users
from oauth2client.appengine import OAuth2DecoratorFromClientSecrets

decorator = OAuth2DecoratorFromClientSecrets(
      os.path.join(os.path.dirname(__file__), 'client_secrets.json'), 'https://www.googleapis.com/auth/userinfo.email')

class LoginHandler(BaseHandler):

    @decorator.oauth_aware        
    def get(self):

        if decorator has credentials :
            http = httplib2.Http()        # verify audience using the TokenInfo API
            body = urllib.urlencode({'access_token': decorator.credentials.access_token})
            resp, content = http.request("https://www.googleapis.com/oauth2/v1/tokeninfo",method="POST", body=body)
            ....   # render template and show the user info from the TokenInfo response
        else:
            login_url = decorator.authorize_url()
            ....   # render template and show the login_url 
```

为了处理回调，我必须在我的

应用程序.yaml：

```
- url: /oauth2callback
  script: oauth2client/appengine.py

- url: .*
  script: login.py 
```

# javascript - 日期在非 ie 浏览器中不起作用

> ID：12895495
> 
> 赞同：0
> 
> 时间：2012-10-15T12:16:06.383
> 
> 标签：javascript

```
 function getcalculation(dt,coun){
     try
     {
         //alert("1::"+dt)
         var serdate=document.getElementById("serdate").value;
         diff  =new Date();
         var stdate=dt;
         var callcreatedate1=new Date(stdate);
         var callclosedate1=new Date(serdate);
         var t1=callcreatedate1.getTime();
         var t2=callclosedate1.getTime();
     } 
```

因为`callclosedate1`我得到日期值`Mon Oct 15 2012 17:45:20 GMT+0530 (India Standard Time)` 但`callcreatedate1`显示无效日期错误，应该怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:48:24.583

问题是，

**在 IE 中**

```
new Date('04/25/2012 9:00AM') 
```

给`Wed Apr 25 09:00:00 UTC+0530 2012`

但**在 Chrome 中**

```
new Date('04/25/2012 9:00AM') 
```

给`Invalid Date`.

我不认为这只是一个js问题。考虑到代码在 IE 中工作的事实，我假设您使用的是 SQL Server。您有 2 个选项，在服务器端更改格式或在 js 端更改格式。您可以参考以下[链接](http://forums.arcgis.com/threads/53385-SQLServer-datetime-field-doesn-t-translate-properly-as-javascript-date-object)，他们确实提供了针对此问题的 js 解决方案。

# c# - 如何通过 C# 读取 PowerShell 退出代码

> ID：12895503
> 
> 赞同：14
> 
> 时间：2012-10-15T12:16:28.270
> 
> 标签：c#, powershell

我`System.Management.Automation.Runspaces`用来执行 PowerShell 脚本。有没有可以读取给定脚本的退出代码的选项？

```
using System.IO;
using System.Management.Automation.Runspaces;
using System.Collections.ObjectModel;
using System.Management.Automation;

namespace PowerShell
{
    public class PowerShellExecuter
    {
        public Collection<PSObject> RunPsScript(string psScriptFile)
        {
            string psScript;
            if (File.Exists(psScriptFile))
            {
                psScript = File.ReadAllText(psScriptFile);
            }
            else
            {
                throw new FileNotFoundException("Wrong path for the script file");
            }
            Runspace runSpace = RunspaceFactory.CreateRunspace();
            runSpace.Open();

            RunspaceInvoke runSpaceInvoker = new RunspaceInvoke(runSpace);
            runSpaceInvoker.Invoke("Set-ExecutionPolicy Unrestricted");

            Pipeline pipeLine = runSpace.CreatePipeline();
            pipeLine.Commands.AddScript(psScript);
            pipeLine.Commands.Add("Out-String");

            Collection<PSObject> returnObjects = pipeLine.Invoke();
            runSpace.Close();

            return returnObjects;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T04:45:15.170

PowerShell 命令具有比整数退出代码更丰富的错误机制。有一个错误流出现非终止错误。终止错误会导致抛出异常，因此您需要处理这些异常。下面的代码展示了如何使用这两种机制：

```
using System;
using System.Collections.ObjectModel;
using System.Management.Automation;

namespace PowerShellRunspaceErrors
{
    class Program
    {
        private static PowerShell s_ps;

        static void Main(string[] args)
        {
            s_ps = PowerShell.Create();
            ExecuteScript(@"Get-ChildItem c:\xyzzy");
            ExecuteScript("throw 'Oops, I did it again.'");
        }

        static void ExecuteScript(string script)
        {
            try
            {
                s_ps.AddScript(script);
                Collection<PSObject> results = s_ps.Invoke();
                Console.WriteLine("Output:");
                foreach (var psObject in results)
                {
                    Console.WriteLine(psObject);
                }
                Console.WriteLine("Non-terminating errors:");
                foreach (ErrorRecord err in s_ps.Streams.Error)
                {
                    Console.WriteLine(err.ToString());
                }
            }
            catch (RuntimeException ex)
            {
                Console.WriteLine("Terminating error:");
                Console.WriteLine(ex.Message);
            }
        }
    }
} 
```

如果你运行这个程序，它会输出：

```
Output:
Non-terminating errors:
Cannot find path 'C:\xyzzy' because it does not exist.
Terminating error:
Oops, I did it again.
Press any key to continue . . . 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:38:14.163

进程返回退出代码，而不是 PowerShell `Runspaces`。

据我所知，捕获 a 状态的最佳方法`Runspace`是订阅`Runspace.StateChanged`事件，这将让您`RunspaceStateInfo`处理。`RunspaceStateInfo`:`Reason`和有两个有用的属性`State`。

[http://msdn.microsoft.com/en-us/library/system.management.automation.runspaces.runspacestateinfo_members(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/system.management.automation.runspaces.runspacestateinfo_members(v=vs.85).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-14T15:19:34.430

就像向刚刚创建的运行空间询问值一样简单：

```
s_ps.AddScript("$LASTEXITCODE");
results = s_ps.Invoke();
int.TryParse(results[0].ToString(),out valorSortida); 
```

# google-maps - 使用 google apis 消除越野点

> ID：12895506
> 
> 赞同：0
> 
> 时间：2012-10-15T12:16:47.660
> 
> 标签：google-maps, google-maps-api-3, google-api, google-directions-api

运行我的 API 后，我得到如下所示的地理点。蓝色的在正确的路线上，但红色的不在路线上。我需要加入积分才能获得我的最终路线。如何消除这些红点？

我掌握的关于这些点的信息是纬度、经度、它们所在的道路（这些点已被反向地理编码）。

A,B,C 是不同名称的道路。要根据“道路”名称进行过滤，我们最终可能会消除道路 B 上的蓝点。

任何 Google API 都可以提供帮助吗？谷歌路线API？

![路线](../Images/6ffd071f6036798cf99574f8b60444a7.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T18:23:55.423

我能想到的最好的事情（除了手动滚动您自己的 distanceToPolyline 算法）是使用`google.maps.geometry.poly.isLocationOnEdge` [(documentation)](https://developers.google.com/maps/documentation/javascript/reference#poly)，然后您可以询问所有点是否在路线附近并采取相应措施。

[这是我做的一个例子](http://jsbin.com/ubowef)，尝试添加标记，然后隐藏越野标记（也建议使用公差变量）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:35:40.170

RouteBoxer 可能会有所帮助。

这里的 JS 实现 - [http://google-maps-utility-library-v3.googlecode.com/svn/trunk/routeboxer/docs/examples.html](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/routeboxer/docs/examples.html)

PHP服务器端实现在这里- [http://luktek.com/Blog/2011-02-03-google-maps-routeboxer-in-php](http://luktek.com/Blog/2011-02-03-google-maps-routeboxer-in-php)

如果您喜欢冒险，您可以浏览代码并尝试制作一个 Ruby 端口。

# livecycle - 计算字段：如果值 = 0，我想隐藏它，但它不会消失

> ID：12895507
> 
> 赞同：0
> 
> 时间：2012-10-15T12:16:48.403
> 
> 标签：livecycle, livecycle-designer

我的表格有问题（发票，您可以在[http://www.fornoantico.it/fatture/fattura-definitiva-togli-zeri.pdf](http://www.fornoantico.it/fatture/fattura-definitiva-togli-zeri.pdf)看到 pdf 文件），特别是在计算字段上.. .如果value = 0，我想隐藏它，但它不会消失

我尝试使用 Action Builder，但“确定”按钮被禁用，并显示此警报“操作可能不适用于针对 html 或指南的表单”

我尝试使用一些公式，例如

如果 (IMPORTO[0] == 0) 那么

IMPORTO_SCONTATO[0].presence="invisible"

别的

IMPORTO_SCONTATO[0].presence="visible"

万一

（我有一个 IMPORTO 字段，其中包含 Quantity * Price，然后一个 SCONTO flyed 仅包含计算为 IMPORTO * SCONTO / 100 的折扣值，以及一个 IMPORTO_SCONTATO 字段，其中包含包含价格 inclouding discount，计算为 IMPORTO - SCONTO )

但它不起作用，这个 IMPORTO_SCONTATO 字段总是显示 0 值，这是一个问题，因为在这张发票中，如果我们有几行，那么我们在其他行中有零（见图）

你能帮我解决这个问题吗？我要疯了，我从上周开始就在努力。

非常感谢

![在此处输入图像描述](../Images/650fe992912b5ae9ed867a28152d1c86.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T20:54:19.510

我认为您错过了 .rawValue。

```
if (IMPORTO[0].rawValue == 0)
{
    IMPORTO_SCONTATO[0].presence="visible";
}
else
{
    IMPORTO_SCONTATO[0].presence="hidden";
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-05-30T20:02:22.507

试试这个，我的账单也有同样的问题：

```
var v = event.value;
if (v == 0)
{
    event.target.display = display.hidden;
}
else
{
    event.target.display = display.visible;
} 
```

# iphone - 从 timeInterval 获取缺少的月份？

> ID：12895509
> 
> 赞同：0
> 
> 时间：2012-10-15T12:16:53.370
> 
> 标签：iphone, ios5, nstimeinterval

> **可能重复：**
> [从时间戳间隔中获取缺少的月份](https://stackoverflow.com/questions/12894552/get-missing-month-from-timestamp-interval)

我从服务器接收以秒为单位的时间。然后我使用下面的代码将它们转换为月份。

```
NSDateFormatter * dateFormatter=[[[NSDateFormatter alloc]init]autorelease];
[dateFormatter setDateFormat:@"MMM"];
[dateFormatter stringFromDate:[NSDate dateWithTimeIntervalSince1970:timeStamp]]; 
```

问题是我不是每个月都从服务器获取，就像我第一次获取 Jan 然后第二次获取 Apr 从服务器获取但我需要在我的 iPhone 屏幕上显示 2 月和 3 月（缺少月份）（服务器人员无法更改他们的代码，所以我必须在最后做）。谁能建议我如何才能错过几个月。

同样的问题是有时我从服务器得到 11 月和 2 月，但我还必须显示 12 月和 1 月。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:20:00.203

作为一个快速而肮脏的解决方案，您可以创建一个所有月份的数组，从较晚的月份开始，然后循环遍历月份数组，直到您到达较早的月份。

更健壮，甚至更好的是使用 NSCalendar 和 NSDateComponents，例如：

```
NSDateComponents* dateComponents = [[NSDateComponents alloc]init];
[dateComponents setMonth:1];
NSCalendar* calendar = [NSCalendar currentCalendar];
NSDate* newDate = [calendar dateByAddingComponents:dateComponents toDate:originalDate     options:0];
[dateComponents release]; 
```

这会将您的日期增加/减少一个月。

# matlab - 我们能得到Matlab Spline Toolbox的源代码吗

> ID：12895510
> 
> 赞同：0
> 
> 时间：2012-10-15T12:16:58.943
> 
> 标签：matlab, spline, matlab-guide

我想开发类似 Matlab splinetool GUI 的东西。我可以获取 splinetool GUI 的源代码，并进行相同的更改来构建我的工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:18:36.503

您可以简单地在编辑器中打开文件并查看（并修改）回调：

```
edit splinetool.m 
```

在那里，您还会发现图形是如何构造的（R2012b 中的第 4085 行）。

# php - Codeigniter：在多个视图之间传递值的最佳方法

> ID：12895516
> 
> 赞同：1
> 
> 时间：2012-10-15T12:17:31.133
> 
> 标签：php, codeigniter

我是 Codeigniter 的新手。:)

我有一个包含多个页面的网站会员注册流程，并且想找出在注册流程完成之前在视图之间“存储”数据的最佳方式是什么，我可以创建会员记录？

我应该创建一个临时表并根据会话 ID 将信息保存在那里吗？或者我应该尝试将数据数组传递给每个视图，然后将信息存储在隐藏字段中（然后我可以通过 POST 再次从控制器获取值）？或者也许我可以在我的控制器中有一个“全局变量”来存储所有数据，直到我完成注册流程并可以将信息保存到数据库中。

任何最佳实践方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:34:24.693

我想你有几个选择，但这里有两个我会选择：

您可以创建一个表单，该表单用作运行 JavaScript 的选项卡系统。这样一来，就 HTML 而言，页面上只有一个表单，但使用 JavaScript 一次隐藏和显示一个页面。这基本上解决了你所有的问题。

如果这对您不起作用，那么我也建议使用 $_SESSIONS。但是，不是本机 codeigniter 会话。我不喜欢 Codeigniter 的唯一一点是它使用 Cookies 而不是 PHP 原生的 $_SESSIONS。我使用以下库专门为 codeigniter [https://github.com/EllisLab/CodeIgniter/wiki/Native-session实现 PHP $_SESSIONS](https://github.com/EllisLab/CodeIgniter/wiki/Native-session)

虽然大多数人确实打开了 cookie，但您仍然疏远了一些潜在客户。只需使用本机 PHP $_SESSIONS 即可轻松解决此问题

希望它成功 - 祝你好运！

# java - JavaFX TableView - 无法编辑

> ID：12895517
> 
> 赞同：1
> 
> 时间：2012-10-15T12:17:36.593
> 
> 标签：java, tableview, javafx-2

我正在尝试在`TableView`. 我使用这个 tut 作为参考： [http](http://docs.oracle.com/javafx/2/ui_controls/table-view.htm#) ://docs.oracle.com/javafx/2/ui_controls/table-view.htm# 但我使用 FXML 文件进行创建（使用 JavaFX 场景生成器）。我已经检查了表和列的可编辑复选框（在场景生成器中），但是如果我执行程序，我将无法编辑这些值。我已经从 tut 下载了示例项目，并且在那里进行了编辑……所以，在我的项目中，`TextField`没有打开 :( 控制器：

```
public class StatesPopupController implements Controllerable, Initializable {
    // <editor-fold desc="fxml import stuff" defaultstate="collapsed">
    @FXML //  fx:id="guiStatesTable"
    private TableView<StateData> guiStatesTable; // Value injected by FXMLLoader
    @FXML //  fx:id="guiColorColumn"
    private TableColumn<StateData, String> guiColorColumn; // Value injected by FXMLLoader
    @FXML //  fx:id="guiFontEffectColumn"
    private TableColumn<StateData, String> guiFontEffectColumn; // Value injected by FXMLLoader
    @FXML //  fx:id="guiUseColumn"
    private TableColumn<StateData, String> guiUseColumn; // Value injected by FXMLLoader
    @FXML //  fx:id="guiValueColumn"
    private TableColumn<StateData, String> guiValueColumn; // Value injected by FXMLLoader
    @FXML //  fx:id="guiStateAddColor"
    private TextField guiStateAddColor; // Value injected by FXMLLoader
    @FXML //  fx:id="guiStateAddFontEffect"
    private TextField guiStateAddFontEffect; // Value injected by FXMLLoader
    @FXML //  fx:id="guiStateAddUse"
    private TextField guiStateAddUse; // Value injected by FXMLLoader
    @FXML //  fx:id="guiStateAddValue"
    private TextField guiStateAddValue; // Value injected by FXMLLoader
// </editor-fold>

    private Modelable model = null;

    public StatesPopupController() {
        this.model = new StatesPopupModel();
    }

    @Override
    public Modelable getModel() {
        return model;
    }

    @Override
    public void initialize(URL url, ResourceBundle rb) {
        this.guiStatesTable.setEditable(true);
        this.guiValueColumn.setCellValueFactory(new PropertyValueFactory<StateData, String>("value"));
        this.guiColorColumn.setCellValueFactory(new PropertyValueFactory<StateData, String>("color"));
        this.guiUseColumn.setCellValueFactory(new PropertyValueFactory<StateData, String>("use"));
        this.guiFontEffectColumn.setCellValueFactory(new PropertyValueFactory<StateData, String>("fontEffect"));
        this.guiStatesTable.setItems(((StatesPopupModel)this.model).getTableData());
    }

    public void newAddBtnEvent(ActionEvent event {
        ((StatesPopupModel)this.model).addDataEntry(guiStateAddValue.getText(), guiStateAddColor.getText(), guiStateAddUse.getText(), guiStateAddFontEffect.getText());
        guiStateAddValue.clear();
        guiStateAddColor.clear();
        guiStateAddUse.clear();
        guiStateAddFontEffect.clear();
        this.guiStatesTable.setItems(((StatesPopupModel) this.model).getTableData());
    }

    public void newEditValueEvent(CellEditEvent<StateData, String> event) {

        ((StateData)event.getTableView().getItems().get(event.getTablePosition().getRow())).setValue(event.getNewValue());
    }

    public void newEditColorEvent(ActionEvent event) {
        System.out.print("asd");
    }

    public void newEditUseEvent(ActionEvent event) {}

    public void newEditFontEffectEvent(ActionEvent event) {}
} 
```

模型：

```
public class StatesPopupModel implements Modelable {
    private ObservableList<StateData> data = FXCollections.observableArrayList(
        new StateData("inactive", "9", "permit", "plain"),
        new StateData("active", "2", "permit", "plain"),
        new StateData("unavailable", "7", "inhibit", "plain"),
        new StateData("available", "2", "permit", "plain"),
        new StateData("invisible", "2", "inhibit", "plain"),
        new StateData("visible", "4", "permit", "plain"),
        new StateData("controlSign", "10", "inhibit", "plain"),
        new StateData("label", "5", "permit", "plain"));

    public void addDataEntry(String value, String color, String use, String fontEffect) {
        data.add(new StateData(value, color, use, fontEffect));
    }

    public ObservableList<StateData> getTableData() {
        return data;
    }
} 
```

`StateData`班级：

```
public class StateData
{
    private final SimpleStringProperty value;
    private final SimpleStringProperty color;
    private final SimpleStringProperty use;
    private final SimpleStringProperty fontEffect;

    public StateData(String value, String color, String use, String fontEffect) {
        this.value = new SimpleStringProperty(value);
        this.color = new SimpleStringProperty(color);
        this.use = new SimpleStringProperty(use);
        this.fontEffect = new SimpleStringProperty(fontEffect);
    }

    /**
     * @return the value
     */
    public String getValue() {
        return value.get();
    }

    /**
     * @param value the value to set
     */
    public void setValue(String value) {
        this.value.set(value);
    }

    /**
     * @return the color
     */
    public String getColor() {
        return color.get();
    }

    /**
     * @param color the color to set
     */
    public void setColor(String color) {
        this.color.set(color);
    }

    /**
     * @return the use
     */
    public String getUse() {
        return use.get();
    }

    /**
     * @param use the use to set
     */
    public void setUse(String use) {
        this.use.set(use);
    }

    /**
     * @return the fontEffect
     */
    public String getFontEffect() {
        return fontEffect.get();
    }

    /**
     * @param fontEffect the fontEffect to set
     */
    public void setFontEffect(String fontEffect) {
        this.fontEffect.set(fontEffect);
    }
} 
```

这里是 fxml：

```
<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.util.*?>
<?import javafx.scene.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<AnchorPane id="AnchorPane" minHeight="397.0" minWidth="264.0" prefHeight="397.0" prefWidth="427.0" xmlns:fx="http://javafx.com/fxml" fx:controller="controller.popup.StatesPopupController">
  <children>
    <Label text="States" AnchorPane.leftAnchor="14.0" AnchorPane.topAnchor="6.0">
      <font>
        <Font name="System Bold" size="15.0" />
      </font>
    </Label>
    <TableView fx:id="guiStatesTable" editable="true" prefHeight="311.0" prefWidth="236.0" AnchorPane.bottomAnchor="52.0" AnchorPane.leftAnchor="14.0" AnchorPane.rightAnchor="14.0" AnchorPane.topAnchor="34.0">
      <columns>
        <TableColumn prefWidth="75.0" text="Value" fx:id="guiValueColumn" />
        <TableColumn prefWidth="75.0" text="Color" fx:id="guiColorColumn" />
        <TableColumn prefWidth="75.0" text="Use" fx:id="guiUseColumn" />
        <TableColumn prefWidth="75.0" text="fontEffect" fx:id="guiFontEffectColumn" />
      </columns>
    </TableView>
    <HBox id="HBox" alignment="CENTER" prefWidth="236.0" spacing="5.0" AnchorPane.bottomAnchor="17.0" AnchorPane.leftAnchor="14.0" AnchorPane.rightAnchor="14.0">
      <children>
        <TextField fx:id="guiStateAddValue" prefWidth="93.0" promptText="Value" />
        <TextField fx:id="guiStateAddColor" prefWidth="79.0" promptText="Color" />
        <TextField fx:id="guiStateAddUse" prefWidth="79.0" promptText="Use" />
        <TextField fx:id="guiStateAddFontEffect" prefWidth="79.0" promptText="Font Effect" />
        <Button mnemonicParsing="false" onAction="#newAddBtnEvent" text="Add" />
      </children>
    </HBox>
  </children>
</AnchorPane> 
```

欢迎任何帮助。

编辑：如果我使用：

```
.setCellFactory(TextFieldTableCell.forTableColumn()); 
```

我收到此错误：

```
error: method setCellFactory in class TableColumn<S,T> cannot be applied to given types;
    guiUseColumn.setCellFactory(TextFieldTableCell.forTableColumn());
                ^
  required: Callback<TableColumn<StateData,String>,TableCell<StateData,String>>
  found: Callback<TableColumn<Object,String>,TableCell<Object,String>>
  reason: actual argument Callback<TableColumn<Object,String>,TableCell<Object,String>> cannot be converted to Callback<TableColumn<StateData,String>,TableCell<StateData,String>> by method invocation conversion
  where S,T are type-variables:
    S extends Object declared in class TableColumn
    T extends Object declared in class TableColumn 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T17:27:50.513

为了使其`TableView`可编辑，您还应该提供一个`CellFactory`将处理编辑控件的创建。

您可以在此处找到教程的相应部分：http: [//docs.oracle.com/javafx/2/ui_controls/table-view.htm#sthref119](http://docs.oracle.com/javafx/2/ui_controls/table-view.htm#sthref119)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-10T07:06:33.093

试试这个：

```
....setCellFactory(TextFieldTableCell.<StateData>forTableColumn()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-26T19:00:05.800

我有同样的问题，我没有找到一个合适的解决方案，分离 FXML 视图和控制器。我也想坚持这个模型。上面提到的例子对我不起作用。所以我稍微修改[了这个教程](http://docs.oracle.com/javafx/2/fxml_get_started/fxml_tutorial_intermediate.htm)。

该解决方案包括一个自定义`TableCellFactory`. 有必要更改`TableCell`并`TextFieldTableCell`添加以下内容：

```
cell.setConverter(new StringConverter<T>() {
            @Override
            public String toString(T object) {
                return object.toString();
            }
            @Override
            public T fromString(String string) {
                return (T) string;
            }
        }); 
```

在 Controller 中是处理更改的新方法。例如

```
@FXML
protected void changeFirstName(CellEditEvent<Person, String> event) {
    ((Person) event.getTableView().getItems().get(event.getTablePosition().getRow())).setFirstName(event.getNewValue());
} 
```

参考在 FXML 文件中

```
<TableColumn fx:id="firstNameColumn" text="First Name" prefWidth="100" onEditCommit="#changeFirstName"> 
```

[您可以在我的完整 Maven 示例](https://mega.nz/#!6kdnVAQI!BgoFTluqeOlluBac8qW1NRnKs0JFgw4rYOYLvKZuGpA)中找到完整的更改。

# android - Read data from pen drive through android USB host mode

> ID：12895521
> 
> 赞同：3
> 
> 时间：2012-10-15T12:17:48.307
> 
> 标签：android, usb-drive, usb-mass-storage, usb-otg

I need to read file from pen drive, my code is as follow:

```
private static final String ACTION_USB_PERMISSION = "android.hardware.usb.action.USB_ACCESSORY_ATTACHED";

private final BroadcastReceiver mUsbReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        if (ACTION_USB_PERMISSION.equals(action)) {
            synchronized (this) {
                UsbDevice device = (UsbDevice) intent
                        .getParcelableExtra(UsbManager.EXTRA_DEVICE);
                if (intent.getBooleanExtra(
                        UsbManager.EXTRA_PERMISSION_GRANTED, false)) {
                    if (device != null) {
                        // call method to set up device communication
                    }
                } else {
                    Log.d(TAG, "permission denied for device " + device);
                }
            }
        }
    }
}; 
```

To detect device i use:

```
mgr = (UsbManager) getSystemService(Context.USB_SERVICE);
devs = new HashMap<String, UsbDevice>();
devs = mgr.getDeviceList(); 
```

And after getting device and interface, i get endpoint as follows:

```
public void getEndpointCount(View v) {
    itf = value.getInterface(0);
    endPointCount = itf.getEndpointCount();

    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setMessage("No. of Endpoints: " + endPointCount)
            .setTitle("Endpoint Count").setCancelable(true)
            .setPositiveButton("OK", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    dialog.cancel();
                }
            });
    AlertDialog alert = builder.create();
    alert.show();
    ((Button) findViewById(R.id.button4)).setEnabled(true);
}

public void getEndpointDirections(View v) {
    endPoint = null;

    UsbDeviceConnection conn = null;

    if (mgr.hasPermission(value)) {
        conn = mgr.openDevice(value);
        conn.claimInterface(itf, true);
    }

    String str = null;
    for (int i = 0; i < endPointCount; i++) {
        ((TextView) findViewById(R.id.tvLoopVal)).setText("" + i);
        endPoint = itf.getEndpoint(i);
        str = str + " Endpoint: " + i + " - " + endPoint.getDirection()
                + "\n";

if (endPoint.getType() == UsbConstants.USB_ENDPOINT_XFER_BULK) {
            ((TextView) findViewById(R.id.tvLoopVal)).setText("" + (i - 1));
            if (endPoint.getDirection() == UsbConstants.USB_DIR_IN) {
                Toast.makeText(this, "epin", Toast.LENGTH_SHORT).show();
                epIn = endPoint;
            } else {
                epOut = endPoint;
                Toast.makeText(this, "epout", Toast.LENGTH_SHORT).show();
            }
        }

    }

    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setMessage(
            str + " Mac packet Size = " + endPointUsed.getMaxPacketSize())
            .setTitle("Endpoints Directions").setCancelable(true)
            .setPositiveButton("OK", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    dialog.cancel();
                }
            });
    AlertDialog alert = builder.create();
    alert.show();

} 
```

At the end i get the endpoint now where i am stuck is what is the next step to either read or write the data to the pendrive. I am getting no clue on this and need guidance where to look now.

Also if i do not attach any usb device to my tablet still it says 1 device found and when i attach pendrive through OTG cable it says 2 device found!! That is also strange

EDIT:

I also initialized request using USB request method but still I do not get how it works

```
public void initializeRequest(View v) {
    UsbRequest uReq = new UsbRequest();
    Toast.makeText(this, "" + uReq.initialize(conn, epIn),
            Toast.LENGTH_SHORT).show();
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setMessage(
            " Is Request Initialized: = " + uReq.initialize(conn, epIn))
            .setTitle("Request Initialization").setCancelable(true)
            .setPositiveButton("OK", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    dialog.cancel();
                }
            });
    AlertDialog alert = builder.create();
    alert.show();
    byte[] bb = new String("Hello").getBytes();
    ByteBuffer bBuffer = ByteBuffer.allocate(5);
    // bBuffer.put(bb);
    uReq.queue(bBuffer, 5);

    UsbRequest request = conn.requestWait();
    // Object obj = uReq.getClientData();
    // Log.v("Client Data", "" + obj.toString());
    if (request != null) {
        Toast.makeText(this, "Not null request", Toast.LENGTH_SHORT).show();
        Log.v("Response of request wait", ""
                + request.getClientData().toString());
        request.close();
    }
    uReq.close();

    // Log.v("Response of request wait", "" + conn.requestWait());
    // uReq.close();
} 
```

I verified that endpoints are getting assigned, but when this method gets executed the application simply waits, does nothing. After sometime Android asks to close the app. Is it like because of requestWait() function application waits for some type of event?

EDIT

Okay, if we forget reading from pen drive and simply need to get audio stream from a USB device, lets say microphone where i am not going to read anything i will catch whatever the microphone will give, then still i have to do something else then what i have done here??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:24:36.630

看起来您实际上并没有在读取任何数据。如果您有一个从设备到主机的 EndPoint，您应该能够使用[bulkTransfer](http://developer.android.com/reference/android/hardware/usb/UsbDeviceConnection.html)方法从中读取数据。

我对低级 USB 通信不是很熟悉，但我假设您需要自己处理文件系统解析。如果您读取驱动器上的第一个扇区（512 字节）并且该扇区的最后两个字节是 0x55,0xAA，则驱动器可能已使用 FAT 文件系统格式化，您必须从那里开始工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-10T22:00:39.790

由于没有接受的答案，我将发布我的答案。

有一个名为的开源库`libaums`实现了适用于 Android 的 USB 大容量存储模式 (UMS) 以及 Fat32 文件系统。您可以在您的 android 应用程序中使用此库从 USB 设备读取/写入文件。该库处理与 USB 设备的低级通信。

[https://github.com/magnusja/libaums](https://github.com/magnusja/libaums)

基本示例：

```
UsbMassStorageDevice[] devices = UsbMassStorageDevice.getMassStorageDevices(this /* Context or Activity */);

for(UsbMassStorageDevice device: devices) {

   // before interacting with a device you need to call init()!
   device.init();

   // Only uses the first partition on the device
   FileSystem currentFs = device.getPartitions().get(0).getFileSystem();
   Log.d(TAG, "Capacity: " + currentFs.getCapacity());
   Log.d(TAG, "Occupied Space: " + currentFs.getOccupiedSpace());
   Log.d(TAG, "Free Space: " + currentFs.getFreeSpace());
   Log.d(TAG, "Chunk size: " + currentFs.getChunkSize());
} 
```

# perl - 如何使这个 foreach 循环工作？

> ID：12895524
> 
> 赞同：-4
> 
> 时间：2012-10-15T12:18:01.333
> 
> 标签：perl

我写了一个小代码来从我`test.dat`文件的每一行中减去一个特定的数字（这里是 499）。但这不起作用。输入的每一行都包含一个数字。请帮我

```
open (F1, "test.dat" );

foreach $line (F1)
 {  
    $x = 0; 
    $x = $line-(499);
    print $x;
    $x = 0;              
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T12:44:23.887

你有几个不同的错误。与其只告诉你它们是什么，不如从一个较小的部分开始。创建一个只读取 test.dat 并打印出它读取的每一行的脚本。`use strict;`用and开始你的脚本`use warnings;`，并声明你的变量（例如`foreach my $line (...`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T12:52:59.323

您的代码几乎没有问题：-

*   首先你应该使用`3-arg open`来打开一个文件
*   而不是使用`bare`单词，你应该使用`lexical variables`你的`file handle`
*   在您的 foreach 循环中，您需要将文件句柄包含在`<>`

前两个是约定，但最后一个是逻辑错误

所以，这是你需要做的改变： -

```
open my $fh, '<', 'test.dat' or die 'Cannot open file:, $!';

foreach (<$fh>) {

    # $_ is the default special variable that holds the current element in loop
    # You can process $_ and subtract `499` from it and print it.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T16:43:01.733

如果您只想从每行中减去 499，我会这样做：

```
perl -plwe '$_ -= 499' input.txt > output.txt 
```

相当于程序文件：

```
BEGIN { $^W = 1; }
BEGIN { $/ = "\n"; $\ = "\n"; }
while (<>) {
    chomp;
    $_ -= 499;
}
continue {
    die "-p destination: $!\n" unless print $_;
} 
```

假设您的数据是一致的，它将按预期工作。它将无法处理非数字行，并且会对任何此类行产生警告，但也会为此类行创建错误`-499`值。

作为对此类问题的简单解决方法，您可以跳过不包含预期数字的行，但随之而来的问题是您的数据中有哪些类型的数字。只有 0-9 个整数，您将摆脱：

```
next unless /^\d+$/; 
```

对于浮点数：

```
next unless /^[\d.]+$/; 
```

对于科学记数法，一些更复杂的东西，但也许我们不需要走那么远。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-15T12:49:02.303

由于您问题中的主要短语是让您的 foreach 循环来处理您的 dat 文件，以下是逐行处理并将其替换为空白字符串的正确方法（假设这就是您要实现的目标）

```
$DATFILE = test.dat; 

open(DATFILE) or die("Could not open log file.");
foreach $line (<DATFILE>) {

    # do line-by-line processing. some what like this 
   if($line =~ /499/g) {

       $line  =~ s/499//g ;

   }

} 
```

# c# - parse Main Args[] string from windows context menu

> ID：12895525
> 
> 赞同：1
> 
> 时间：2012-10-15T12:18:02.273
> 
> 标签：c#, parsing, contextmenu, args

I used the following code to implement the right clicked file that opened by my application. My aim is to get that file's path into my program.

I use:

```
public static string path = "";

static void Main(string[] args)
{
  if (args.Length > 0)
  {
     path = args[0];      
  }
} 
```

Then I use the variable `path`, which is the file that opened by the application through the context menu.

### Problem:

When the file name doesn't contain any spaces, the file path is imported without any problems. But when the file name contains any spaces, the file name shown without its extension besides it removes letters after the first space in the file name.

### Example:

1.  `fileName.pdf` → `fileName.pdf`
2.  `fileName blah blah.pdf` → `filename`

The second example shown that the file that contains spaces didn't imported as it should.

So, if there is any idea of how to parse the files that contains spaces without any problems with its name.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T12:24:28.593

这是因为操作系统会尝试为您拆分命令行参数，但是如果您没有将引号放在正确的位置，则可能会出错。默认情况下，以下命令行

```
MyConsoleApp.exe FileName blah blah.pdf 
```

将导致`args`包含 3 个字符串`FileName`，`blah`并且`blah.pdf`（由空格分隔）

此问题最常见的解决方案是在调用应用程序时用引号将参数括起来，例如

```
MyConsoleApp.exe "FileName blah blah.pdf" 
```

这将导致`args`长度为 1 且第一个字符串具有该值`FileName blah blah.pdf`（操作系统会去掉多余的引号）。

另一种方法是使用[Environment.CommandLine 属性](http://msdn.microsoft.com/en-us/library/system.environment.commandline.aspx)来获取用于调用应用程序的完整未解析命令行，并手动解析该字符串。这为您提供了更大的灵活性（因为在使用传递给 Main 的参数时，它并不总是可以识别参数是否被引号包围`args`），但是更加努力 - 您可能应该确保在启动应用程序时使用引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:40:05.727

有人发布了一个完美的答案，但在我投赞成票并使其成为正确答案之前，他将其删除。

答案是我必须将“%1”更改为“%0”并且它有效。

# css - 滚动 Safari、iOS5 的 iFrame 内容

> ID：12895527
> 
> 赞同：1
> 
> 时间：2012-10-15T12:18:13.987
> 
> 标签：css, ipad, ios5, iframe, safari

我正在使用 jQuery、jQuery.mobile、[asyraf9 splitview 插件](https://github.com/asyraf9)和 cubiq 的 iScroll 构建一个要添加到 iOS 应用程序内部的 splitview 页面。作为典型的拆分视图，它在左侧有一个侧边栏，在右侧有一个内容区域。

这是图片：http: [//i.stack.imgur.com/kfUyE.png](http://i.stack.imgur.com/kfUyE.png)

我用简单的 js-line 阻止了 touchmove

```
document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false); 
```

并让内容区域用 iScroll 滚动。

但是，其中一个页面应该具有来自另一个域的嵌入式 iFrame。我不将 iScroll 用于此类页面。我在 iFrame 中有链接，所以我需要能够点击它们。

```
<div class="iframe-wrapper">
<iframe id="iframe-element" frameborder="0"></iframe>
</div> 
```

它有类似的 CSS

```
.iframe-wrapper {
    margin: 0 auto;
    height: 100%;
    width: 670px;
    -webkit-overflow-scrolling: touch;
    overflow: scroll;
}

#iframe-element {
    height: 100%;
    width: 670px;
} 
```

调用所需页面时，我通过 javascript 加载 iFrame 的 src

```
$('#page-1-3')
    .one('pageshow', function() {
        $('#iframe-element').attr('src', 'http://www.somewebsite.com');
    }); 
```

但是，虽然它适用于带有 iOS6 的 Safari，但不适用于 iOS5。有时它会滚动 iFrame 内的内容，但与此同时，它会向上或向下移动整个页面，即使我已经阻止了页面其余部分的这种行为。如果它向下滚动，它不会呈现页面末尾以下的内容（我不止一页）。

我尝试了多种解决方案并通过网络搜索，但似乎没有一种方法有效。它要么滚动内容不好，要么不渲染所有内容，或者根本不滚动内容。

谁能给我推荐一些有用的东西，好吗？

# c++ - 从不同的线程调用对象的成员函数：如何正确使用互斥锁？

> ID：12895529
> 
> 赞同：1
> 
> 时间：2012-10-15T12:18:14.867
> 
> 标签：c++, multithreading, mutex

在我的课堂上，我使用该`CreateThread(NULL,0,Execute1,this...)`方法创建了一个线程。

```
DWORD WINAPI Execute1(LPVOID lpParam) {
CoInitialize(NULL);
CVC1Dlg *pdlg=(CVC1Dlg *) lpParam; 
```

然后我从这个线程调用 pdlg 方法：

```
pdlg->someMethod(); 
```

当我从这个线程调用这个方法时，如果这个方法同时从主线程调用，会发生什么？我应该使用像互斥锁这样的同步方法吗？我到底需要在哪里调用互斥锁？

我必须在 CVC1Dlg 方法中使用它是否正确？像这样的东西：

```
CVC1Dlg ::CVC1Dlg () {
  g_hMutex=CreateMutex(...)
}

void CVC1Dlg ::setStatus(int aStatus) {
  ::WaitForSingleObject(g_hMutex, INFINITE);
  iStatus=aStatus;
  ::ReleaseMutex(g_hMutex);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:28:25.440

> 发生了什么，当我从这个线程调用这个方法时，如果这个方法同时从主线程调用。我应该使用诸如互斥锁之类的同步方法吗？我到底需要在哪里调用互斥锁？

您使用互斥锁使状态更改原子化，不一定要防止两个不同的线程同时访问同一个方法。考虑数据而不是代码。

如果一个方法读取一个成员变量并写回一个修改后的值，那么您希望使其成为原子操作。

您的示例基本上是正确的，但它没有表明访问`iStatus`成员变量的任何其他方法也应该使用互斥锁（或关键部分）进行保护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:50:10.377

这取决于你在做什么`someMethod`，如果它只是为了设置一个 int，然后使用`std::atomic`或`boost::atomic`为了性能，它是否使用 MFC 访问 GUI 对象或调用非多线程 COM 对象（例如 OCX），然后执行不要从该线程调用它，而是向 DLG 发布/发送消息，并在`WindowProc`该 DLG 中接收消息并执行您的操作，互斥锁或关键部分适用于您想要更改 C++ 结构（列表、字符串或我的结构）！

# php - Magento 重定向到订单视图

> ID：12895530
> 
> 赞同：11
> 
> 时间：2012-10-15T12:18:19.670
> 
> 标签：php, magento, magento-1.7

我想将用户从我的后端模块重定向到 admin/order_sale/view，但我不能。当我使用：

```
Mage::app()->getResponse()->setRedirect(Mage::helper('adminhtml')->getUrl("admin/sales_order/view", array('id'=>'1'))); 
```

Magento 正在从 URL 中删除“管理员”，因此它看起来像：

```
http://magento1702.local/index.php//sales_order/view/id/1/key/fdb6089cf1e5cd77f85f085def1a013a/ 
```

我得到404页。知道如何以 magento 方式重定向到管理模块吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-15T12:56:35.390

您是否尝试过**adminhtml**而不是**admin**？

```
Mage::app()->getResponse()->setRedirect(Mage::helper('adminhtml')->getUrl("adminhtml/sales_order/view", array('order_id'=>'1'))); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-15T12:58:21.577

我认为您正在寻找的是adminhtml。

`Mage::helper('adminhtml')->getUrl("*/sales_order/view", array('order_id'=>'1'))`

**注意**：至少 1.7 中的参数是 order_id，而不是 id。不确定这在旧版本中是否有所不同。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-15T12:57:26.450

您遇到此问题的原因是您创建管理模块的方式

看看这个[http://turnkeye.com/blog/magento-admin-form/](http://turnkeye.com/blog/magento-admin-form/)

看一下（注意在="Mage_Adminhtml"之后）

```
<admin>
    <routers>
        <adminhtml>
            <args>
                <modules>
                    <turnkeye_adminform after="Mage_Adminhtml">Turnkeye_Adminform_Adminhtml</turnkeye_adminform>
                </modules>
            </args>
        </adminhtml>
    </routers>
</admin> 
```

更新代码后，您可以执行

`$this->_redirect('*/sales_order/view', array('order_id' => $order_id));`

# java - 线程中断不会被 InterruptedException 捕获

> ID：12895534
> 
> 赞同：1
> 
> 时间：2012-10-15T12:18:33.440
> 
> 标签：java, multithreading

我有一个控制器和一个线程来做一些工作，控制器有一个中断功能，可以在紧急情况下关闭线程。

我的代码骨架看起来像这样：

```
public class SomeController{

private Thread th;
public SomeController(){
    th = null;
}
public void Input(int state){
    switch(state){
    case 0: //emergency shut off
        if(th != null){
            th.sleep(1000); //make thread sleep first, still no effect
            th.interrupt();
         }
        break;
    case 1: //thread creation
        th = new Thread(new Runnable(){
            public void run(){
                try{
                    DoSomeWork();
                    }
                catch(InterruptedException e)
                {
                    EmergencyProcedures();
                }
            }
            });
        th.start();
        break;
    }
} 
```

但是，当调用中断时，永远不会捕获 InterruptedException。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T12:22:39.533

唯一想到的可能性：

*   你没有打断线程（你确定`th.interrupt()`被调用了吗？）
*   你打断另一个线程
*   线程被中断，但 EmergencyProcedures 中存在一个问题，让您认为它没有被中断
*   你永远不会启动线程，因此你不能中断它。
*   `DoSomeWork()`忽略中断

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T12:29:42.733

至少这是您的代码的问题：

```
th.sleep(1000); //make thread sleep first, still no effect 
```

不，你不能让另一个线程休眠：你只会让**当前**线程休眠。您只是`static sleep`通过`Thread`.

调用`th.interrupt()`不会自动导致`InterruptedException`在另一个线程中被抛出。仅当线程的代码进入可**中断**方法（声明的方法`InterruptedException`）时才会发生这种情况。

您的主要误解（可能）与`interrupt`机制的性质有关。与不推荐使用的`stop`机制不同，`interrupt`它是**协作**的，因此是**可选**的：线程只接收中断**信号**并负责显式检查其状态。它可以以它认为合适的任何方式响应信号。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T12:26:16.433

假设您正确调用`th.interrupt();`，则必须是在任何合理的时间内都没有“注意到”中断的情况。`interrupt()`调用线程时不会神奇地抛出中断。线程，一般来说，必须检测它何时被中断，并抛出自己的`InterruptedException`.

现在，这通常不是问题，因为`Thread.sleep()`还有一些其他常用方法旨在`InterruptedException`立即抛出。

您需要`Thread.interrupted()`不时手动检查一次，这将告诉您线程是否已被中断，这为您提供了类似的构造；

```
if (Thread.interrupted()) {
    throw new InterruptedException();
} 
```

你会放在里面`DoSomeWork();`。

`DoSomeWork();` *扔`InterruptedException`对了吗*？**

 ** * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T12:22:00.953

就像@assylias 所说，或者您的线程不支持中断，请参阅支持中断部分：[http](http://docs.oracle.com/javase/tutorial/essential/concurrency/interrupt.html) ://docs.oracle.com/javase/tutorial/essential/concurrency/interrupt.html 。基本上你需要使用支持中断的方法，比如 sleep 或 Thread.interrupted()。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T12:30:26.043

你是在睡眠结束后打扰吗？根据[文档](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#interrupt%28%29)

> 如果该线程在调用 Object 类的 wait()、wait(long) 或 wait(long, int) 方法或 join()、join(long)、join(long, int) 时被阻塞, sleep(long), or sleep(long, int), 这个类的方法，那么它的中断状态会被清除并且会收到一个InterruptedException。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-15T12:32:39.393

查看您创建的第一件事，`Thread`但您没有启动它。第二件事你不能`InterruptedException`在运行方法中捕获异常。请在开关状态 1 中尝试此操作。

```
 th = new Thread(new Runnable(){
            public void run(){
                try{
                    System.out.println("Run");
                    Thread.sleep(10000);
                    }
                catch(InterruptedException e)
                {
                    EmergencyProcedures();
                }
            }
            }); 
```*

# ios - 带视频显示的表格单元

> ID：12895538
> 
> 赞同：0
> 
> 时间：2012-10-15T12:18:40.693
> 
> 标签：ios, xcode, ios5, video, ios6

我正在寻找一个播放列表格式的表格视图控制器页面，其中包含单元格中的视频。单击公开按钮时，将播放视频等。关于如何解决这个问题的任何想法？..或者一个好的教程的链接？我一直在为此绞尽脑汁.. 花了这么多时间在网上冲浪无济于事.. 任何帮助将不胜感激并投票感谢

这是我的示例代码..我知道这可能不是最好的方法，因此它不起作用

这是我的头文件

```
 #import <UIKit/UIKit.h>
 #import <MediaPlayer/MediaPlayer.h>

 @interface BIDVideosViewController : UIViewController

 <UITableViewDelegate, UITableViewDataSource>

 @property (nonatomic,strong) NSArray *tableList;

 @end 
```

这是我的 .m 文件

```
 #import "BIDVideosViewController.h"

 @interface BIDVideosViewController ()
 {
 MPMoviePlayerController *moviePlayer;

 }

  @end

  @implementation BIDVideosViewController

  @synthesize tableList;

  - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
  {
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
 }

 - (void)viewDidLoad
{
[super viewDidLoad];
UITableView *table = [[UITableView alloc]initWithFrame:self.view.bounds];
[table setDelegate:self];
[table setDataSource:self];
[self.view addSubview:table];
tableList = [[NSMutableArray alloc] initWithObjects:@"Gangan",@"SwimGood", nil];
self.tableList = array;
// Do any additional setup after loading the view.
}

 - (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

 -(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
 {
 return [tableList count];
 }

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
 {
static NSString *DisclosureButtonIdentifier = @"DisclosurebutotonIdentifier";
UITableViewCell *cell = [tableView   dequeueReusableCellWithIdentifier:DisclosureButtonIdentifier];
if (cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:DisclosureButtonIdentifier];
}
NSInteger row = [indexPath row];
NSString *rowString = [tableList objectAtIndex:row];
cell.textLabel.text = rowString;
cell.accessoryType = UITableViewCellAccessoryDetailDisclosureButton;
return cell;
}

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
   NSString *stringPath = [[NSBundle mainBundle]pathForResource:@"Gangan" ofType:@"mp4"];
  NSURL *url = [NSURL fileURLWithPath:stringPath];
  moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:url];
   [[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(moviePlayBackDidFinish:)
                                                   name:MPMoviePlayerScalingModeDidChangeNotification
                                           object:moviePlayer];

[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(endPlay:)
                                                name:MPMoviePlayerPlaybackDidFinishNotification
                                           object:moviePlayer];
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(stopBusyIndicator:)
                                             name:MPMoviePlayerLoadStateDidChangeNotification
                                           object:moviePlayer];

moviePlayer.scalingMode = MPMovieScalingModeAspectFit;

moviePlayer.movieControlMode = MPMovieControlModeDefault; //'movieControlMode' is deprecated

//moviePlayer.backgroundColor = [UIColor blackColor];

moviePlayer.view.frame = CGRectMake(212, 84, 600, 600);

 [self.view addSubview:moviePlayer.view];       
 [moviePlayer play];                           </i> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:52:30.290

添加 MediaPLayer 框架。

```
MPMoviePlayerController *moviePlayer;   
moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:movieURL];
                [[NSNotificationCenter defaultCenter] addObserver:self
                                                         selector:@selector(moviePlayBackDidFinish:) 
                                                             name:MPMoviePlayerScalingModeDidChangeNotification 
                                                           object:moviePlayer];

                [[NSNotificationCenter defaultCenter] addObserver:self
                                                         selector:@selector(endPlay:) 
                                                             name:MPMoviePlayerPlaybackDidFinishNotification 
                                                           object:moviePlayer];
                [[NSNotificationCenter defaultCenter] addObserver:self
                                                         selector:@selector(stopBusyIndicator:) 
                                                             name:MPMoviePlayerLoadStateDidChangeNotification 
                                                           object:moviePlayer];

                moviePlayer.scalingMode = MPMovieScalingModeAspectFit; 
                moviePlayer.movieControlMode = MPMovieControlModeDefault;
                //moviePlayer.backgroundColor = [UIColor blackColor];

                    moviePlayer.view.frame = CGRectMake(212, 84, 600, 600);

                }
                [self.view addSubview:moviePlayer.view];
                [moviePlayer play]; 
```

# wpf - 使用安装项目部署 WPF app.config 文件

> ID：12895541
> 
> 赞同：0
> 
> 时间：2012-10-15T12:18:45.860
> 
> 标签：wpf, deployment, app-config

这已经困扰我两天了。我有一个 WPF 应用程序，它有一个数据库，专注于手写识别。因此，我在 app.config 文件中有一个连接字符串，以及应用程序启动时的启动参数——这是为了启用 version2 运行时，否则手写识别不起作用。调试时一切正常...

我使用 Visual Studio 安装向导创建了一个安装并安装了该应用程序。安装很顺利，但现在**每次我尝试使用 app.config 文件时，都会抛出 NullReference。**

所以我想知道：我应该将 app.config 文件设置为资源还是嵌入式资源，还是保留它的内容？为什么app在调试的时候可以成功读取app.config文件的内容，但是安装后在获取connectionstring属性的时候就崩溃了？创建安装时，我应该执行一些设置以便 app.config 文件可以在代码中使用吗？（因为 app.config 文件是程序文件目录）。

所以现在，如果我对连接字符串（在变量中）进行硬编码，一切正常，但手写识别不起作用，因为 app.config 文件似乎没有被使用。

我有点时间紧迫，所以任何帮助都将不胜感激。

PS：只是为了它，这里是app.config文件的内容

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
  </startup>
  <appSettings>
  </appSettings>
  <connectionStrings>
    <add name ="conString" connectionString="server=ServerName;database=dbname;Integrated Security='true'"/>
  </connectionStrings>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:23:23.650

该`app.config`文件是从`settings`（在 Visual Studio 中的 Properties / Settings.settings 下）自动生成的。如果此连接字符串在设置中，您将能够通过以下方式访问它：

`var conString = Settings.Default.conString;`

它也将被编译到项目中，并且只有在文件可用时才被`app.config`文件覆盖。

此外，该`app.config`文件必须是与可执行文件位于同一文件夹中的`.exe`文件，并且必须具有相同的名称。例如，如果是`myprogram.exe`，则该`myprogram.config`文件应位于同一目录中。

# angularjs - $exceptionHandler 在页面上显示错误消息

> ID：12895554
> 
> 赞同：2
> 
> 时间：2012-10-15T12:19:42.860
> 
> 标签：angularjs

在 HTML 页面上的某些元素上显示错误消息的最佳解决方案是什么？

目前，我已覆盖`$exceptionHandler`将错误消息存储到`$rootScope.errorMessage`HTML 页面，然后在我使用的 HTML 页面`ng-show`上`div`显示变量的内容。

我的 div 位于顶部，`ng-view`因此不包含在部分中。

发生错误时会`div`正确更新，但是当用户执行某些操作时如何重置它，例如在某些部分中单击 ng-click。

从页面导航到另一个页面时，我可以重置错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:44:39.147

我认为可能有很多方法可以做到这一点。你可以定义一个 $on 消息来监听，然后在整个代码中 $emit 'said message'。或者，您可以尝试监听 body 元素上的点击，假设堆栈中没有任何东西停止传播事件。

对我来说，这有点取决于您的应用程序有多大。

希望这可以帮助

# php - 替代函数 preg_replace e/ 修饰符

> ID：12895555
> 
> 赞同：1
> 
> 时间：2012-10-15T12:19:44.217
> 
> 标签：php, preg-replace, modifier

任何人都知道如何使用 preg_replace 和 e/ 修饰符更改此功能 e/ 修饰符将被贬值。

```
function charset_decode_utf_8 ($string) {
      /* Only do the slow convert if there are 8-bit characters */
    /* avoid using 0xA0 (\240) in ereg ranges. RH73 does not like that */
    if (! preg_match("/[\200-\237]/", $string) and ! preg_match("/[\241-\377]/", $string))
        return $string;

    // decode three byte unicode characters
    $string = preg_replace("/([\340-\357])([\200-\277])([\200-\277])/e",
    "'&#'.((ord('\\1')-224)*4096 + (ord('\\2')-128)*64 + (ord('\\3')-128)).';'",
     $string);

    // decode two byte unicode characters
    $string = preg_replace("/([\300-\337])([\200-\277])/e",
    "'&#'.((ord('\\1')-192)*64+(ord('\\2')-128)).';'",
    $string);

return $string;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:25:12.580

```
<?php
$string = preg_replace_callback("/([\340-\357])([\200-\277])([\200-\277])/",
    function($arr) {
        $val = (ord($arr[1]) - 224) * 4096
                + (ord($arr[2]) - 128) * 64
                + (ord($arr[3]) - 128);
        return "&#" . $val . ";";
    }, $string);

$string = preg_replace_callback("/([\300-\337])([\200-\277])/",
    function($arr)
    {
        $val = (ord($arr[1]) - 192) * 64 + ord($arr[2]) - 128;
        return "&#" . $val . ";";
    }, $string); 
```

# android - 传入消息的目标地址

> ID：12895561
> 
> 赞同：3
> 
> 时间：2012-10-15T12:20:06.510
> 
> 标签：android, sms

当我在 BroadcastReceiver 中收到新的短信时，如何从短信中获取目标地址（以便我拥有设备的手机号码）？

编码：

```
TelephonyManager tMgr = (TelephonyManager) context
.getSystemService(Context.TELEPHONY_SERVICE);
String myPhoneNumber = tMgr.getLine1Number(); 
```

将**不起作用**，因为 TelephonyManager 中的 getLine1Number() 方法检索存储在 SIM 卡上的“电话号码”中的数据（不是绑定到用户帐户的电话号码） - 这通常是错误的或不存在的，具体取决于发送它的网络提供商。

我还检查了[SMSMessage](http://developer.android.com/reference/android/telephony/SmsMessage.html#getPdu%28%29)类，但找不到任何帮助我的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:39:43.863

如果您对 不满意`getLine1Number()`，可以尝试以下方法：

这是一个[答案](https://stackoverflow.com/a/5570463/1395993)，显示了如何获取有关已发送短信的数据，包括目标地址（我认为这是您所需要的）。答案是关于已*发送*的短信，但如果您更改`"content://sms/sent"`为`"content://sms/inbox"`，您应该能够访问收到的短信。我不确定收件箱短信是否也包含目标地址，但值得检查。

# facebook - FB Open Graph：为什么当我的应用在用户墙上发布一个动作时，与该动作相关的动作链接没有显示在帖子上？

> ID：12895564
> 
> 赞同：3
> 
> 时间：2012-10-15T12:20:26.093
> 
> 标签：facebook, action, facebook-opengraph, actionlink

我已在我的应用程序中定义并获得 Facebook 批准以下操作：

1) 捐赠给

2) 分享

其中有连接的对象视频和文章。

这两个动作都链接了动作“捐赠给”，即当用户在我的应用程序中捐赠给某个视频时，帖子会打印在他的墙上，并且该帖子应该在通常的“喜欢”之后包含一个动作链接“捐赠给这个视频” *评论*分享”的东西。

在过去的一两个月里，在我自己的代码中没有更改任何一行的情况下，当我的应用发布在用户的墙上时，我注意到以下内容：

1) 一个月前，作为一个捐款的用户，我可以看到“捐款给”的行动链接，但现在我不能，只有我的朋友可以。

2) 有时，行动链接根本没有出现，捐款的用户和他的朋友都看不到它。

有人观察到类似的行为吗？它可以以某种方式改进吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:23:23.613

目前这似乎是一个错误。您可以在 facebook 上关注该错误：

`https://developers.facebook.com/bugs/457578704276661`

# javascript - 不允许某些字符出现在输入框中的脚本

> ID：12895565
> 
> 赞同：1
> 
> 时间：2012-10-15T12:20:26.957
> 
> 标签：javascript, asp.net

我正在使用此脚本来禁止用户`| < > / \ : * ? \ " ^`在 aspx c# 网站上的表单上插入输入框。但是，这只适用于 IE 或 Chrome。我想知道是否有人可以提供有关为什么它不能在 Firefox 中工作的见解？

```
<script type="text/jscript">

    $('input').bind('keypress', function(event) {
        var regex = new RegExp("[|<>/\\\\:*?\"^]");
        var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
        if (!regex.test(key) == false) {
            event.preventDefault();
            alert("Seach cannot contain the following characters: \n \\ / : * ? \" < > |");
            return false;
        }
    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:23:49.773

它不起作用，因为您错误地声明了它。

改变这个

```
<script type="text/jscript"> 
```

到正确的：

```
<script type="text/javascript"> 
```

或者您可以完全省略类型，因为 JavaScript 是默认值：

```
<script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T12:25:37.177

除了**scunliffe**发布的内容之外，这可能不是您想要的：

```
if (!regex.test(key) == false)
  --^--                 --^-- 
```

你否定了两次。也许你想要这个：

```
if (!regex.test(key)) 
```

这更有意义。`test`是虚假的，因此无需与布尔值进行比较。

# android-intent - 在 Android 中务实地触发“拍照”命令

> ID：12895568
> 
> 赞同：0
> 
> 时间：2012-10-15T12:20:34.340
> 
> 标签：android-intent, android-camera, android-camera-intent

我想从我的应用程序中触发默认相机应用程序的“拍照”命令。应用程序应该在算法决定拍照时拍照。这意味着任何人都不会触摸屏幕或按下“拍照”按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:37:02.010

我也在其他一些地方进行了搜索，但找不到任何方法。然后我发现自己编写相机应用程序要容易得多。

如果您不遵守此页面中的说明，您将完全可以毫无问题地进行操作。 [http://developer.android.com/guide/topics/media/camera.html#manifest](http://developer.android.com/guide/topics/media/camera.html#manifest) 相机应用程序准备就绪后，您可以毫无问题地插入您想要的额外位。

# sql - 可以包含空子集的多个外连接

> ID：12895570
> 
> 赞同：2
> 
> 时间：2012-10-15T12:20:38.247
> 
> 标签：sql, sql-server, pivot, outer-join, is-empty

我有一个对象表和一个属性表，其中包含对象可能具有或不具有的各种属性。

我想获取对象的所有属性，如果没有属性，则为 null。

我第一次尝试查询是这样的：

```
SELECT o.Id ,
aa.Value AS AttributeA, 
ab.Value AS AttributeB, 
ac.Value AS AttributeC
FROM Objects o
LEFT OUTER JOIN Attributes aa
ON (o.Id = aa.ObjectId)
LEFT OUTER JOIN Attributes ab
ON (o.Id = ab.ObjectId)
LEFT OUTER JOIN Attributes ac    
ON (o.Id = ac.ObjectId)
WHERE (aa.AttributeTypeId = 1 OR aa.AttributeTypeId IS NULL)
AND (ab.AttributeTypeId = 2 OR ab.AttributeTypeId IS NULL)
AND (ac.AttributeTypeId = 3 OR ac.AttributeTypeId IS NULL)
AND o.Id = @objectId 
```

这样做的问题是，如果还没有对象具有属性 a，那么 aa 子集是空的，因此只返回根本没有属性的对象。

即使混合了属性场景，我如何才能让 SQL Server 返回所有对象而不会进入大量 UNION（属性类型的数量是 20+）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:22:59.180

过滤外连接的目标时，应将过滤器放在连接上。

IE：

```
FROM Objects o 
LEFT OUTER JOIN Attributes aa 
ON (o.Id = aa.ObjectId) and (aa.AttributeTypeId = 1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T12:20:38.247

我想出了使用枢轴。如果根本没有属性记录，它仍然会失败，但这很容易通过只有一个属性的虚拟对象来解决。

```
SELECT pvt.ObjectId, 
pvt.[1] AS [AttributeA],
pvt.[2] AS [AttributeB],
pvt.[3] AS [AttributeC]
FROM
(
    SELECT o.ObjectId, att.Value, att.AttributeTypeId 
    FROM Objects o
    LEFT OUTER JOIN Attributes att ON o.Id = att.ObjectId
    WHERE o.Id = @objectId
) attributes
PIVOT( MAX(Value) FOR AttributeTypeId 
IN ([1], [2], [3])) pvt 
```

# facebook - 卡在 Facebook URL 方案后缀

> ID：12895576
> 
> 赞同：4
> 
> 时间：2012-10-15T12:20:56.673
> 
> 标签：facebook, facebook-login, url-scheme

我正在开发一个 iOS 应用程序。此应用程序有一个在 Facebook 上创建的应用程序。我的 iOS 应用程序有两个目标 - 免费和付费。

在`Xcode`我将`FacebookAppID`两个目标中的属性设置为 12345（示例）。我还设置了 URL 类型：fb12345-free 和 fb12345-paid。

在 Facebook 中，我在配置中添加了 -free 和 -paid 后缀。我添加了它们，因为直到昨天我只有一种应用程序类型——免费，所以不需要后缀。

在`Xcode`, 在代码中，我`FBSession`这样创建：

```
FBSession *fb = [[FBSession alloc] initWithAppID:@"12345" 
                                   permissions:somePermissions
                                   defaultAudience:FBSessionDefaultAudienceFriends 
                                   urlSchemeSuffix:@"-free" 
                                   tokenCacheStrategy:nil]; 
```

现在，问题是在测试期间，当我尝试登录`Facebook`Safari 时，会将我重定向到包含非信息性消息的页面：`"There was an error in application YourApp. Please try again later".`这对我没有任何意义。

但是，如果我从发送到 Safari 的 URL 中删除后缀，我可以轻松登录。问题是 Safari 不会将我重定向回我的应用程序。

在 Facebook 应用程序中也是如此 - 我可以轻松登录（即使代码中有后缀），但 FB 应用程序不会将我重定向到我的应用程序。

首先，我认为这是某种缓存问题，并且 FB App 设置中的后缀的新设置尚未传播。但是今天在我进行更改后超过 12 小时，仍然存在相同的错误。

你能帮助我吗？你有类似的问题吗？有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T17:44:23.887

我们在这里提交了一个错误报告（https://developers.facebook.com/bugs/543850328963454）正如错误报告中所述，这是您提供的 urlSchemeSuffix 格式的问题。我们应该有相同的允许字符的文档。谢谢！

# ruby-on-rails - {}:Hash 的未定义方法“登录”

> ID：12895577
> 
> 赞同：0
> 
> 时间：2012-10-15T12:21:02.033
> 
> 标签：ruby-on-rails, forms, hash

嗨，我是 ruby​​ on rails 的新手。我正在开发小型应用程序。当我尝试登录到我的应用程序时，它给了我错误**ActionView::Template::Error ({}:Hash 的未定义方法 `login')：**

我的登录表格看起来像

```
<%= form_for("user", :url => user_session_path, :html => { :id => "signinForm", :class => "regForms round", :style => "padding:0px 20px 20px;" }) do |f| %>
            <div class="signinupformDiv">
                <%= f.text_field :login, :class => "signupin-field-uname signupin-field last", :placeholder => "" %> // error occurred for this line as undefined method log in
                <%= f.label :login, :class => "signupin-label" %>
            </div>
            <div class="signinupformDiv">
                <%= f.password_field :password, :class => "signupin-field-pwd signupin-field last", :placeholder => "" %> //Error occurred at this line as undefined method password..    
                <%= f.label :password, :class => "signupin-label" %>
            </div>
            <div class="signupin-bl" style="width:240px;margin:0px auto 10px;"><span id="signinbutton-span" style="min-width:81px;text-align:center; margin-right:20px;"><%= f.submit 'Sign In', :id => "signInButton", :class => "regFormButton" %></span><%= link_to "Forgot your password?", new_password_path('user') %></div>
<% end %> 
```

有什么办法可以处理这个错误。我是否做错了什么？

需要帮助...谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:29:14.160

检查您的控制器是否有`@user`. 它应该设置正确的值，似乎它被设置为一个空哈希（`{}`），这就是你得到那个错误的原因。

我不知道你是如何设置它的，但你可能可以这样做：

```
@user = User.new 
```

# apache - 如何让全局 mod_rewrite 规则在 XAMPP 中工作？（即不使用 .htaccess 文件）

> ID：12895578
> 
> 赞同：2
> 
> 时间：2012-10-15T12:21:04.540
> 
> 标签：apache, mod-rewrite, xampp

出于某种原因，我在 Apache（或更具体地说是 XAMPP）中创建规则时找到的每个教程/答案`mod_rewrite`仅涵盖**.htaccess**文件的使用，但我需要创建“全局”`mod_rewrite`规则，即所谓的“在 VirtualHost 上”级别”在 Apache 文档中。

我已经在**httpd.conf**`mod_rewrite`文件中启用/取消注释模块的加载，据我了解，之后需要做的就是在 Apache 配置中的正确位置添加以下行：

 **```
RewriteEngine on
RewriteRule ^/?testtest/.* /test.php 
```

[（即此测试规则应将所有对 URL“ http://localhost/testtest/](http://localhost/testtest/) *”的访问重写为 URL“ [http://localhost/test.php](http://localhost/test.php) ”）

我还尝试了“L”标志来排除我重写后发生的任何奇怪的其他重写，如下所示，但没有不同的结果：

```
RewriteEngine on
RewriteRule ^/?testtest/.* /test.php [L] 
```

**我猜这里的关键词是“在正确的位置”，因为我试图在各个“目录”指令和httpd.conf**文件的最后几行中或多或少地插入这些行，但似乎没有任何效果? （是的，我也在每次配置更改后重新启动 Apache）

我没有在配置中的任何位置定义任何 VirtualHost 指令，除了**httpd-ssl.conf**`VirtualHost _default_:443`中的默认值（即既不在**httpd.conf**也不在**httpd-vhosts.conf 中**），因为我只运行一个实例并希望这些规则适用到处。

 ********所以，总结一下：** 在默认的 XAMPP 安装中（在 Windows 上，如果重要的话），让全局`mod_rewrite`规则工作的最小步骤是什么，例如上面列出的测试规则（并且不使用任何**.htaccess**文件，如上所述)?********

# postgresql-9.1 - 检测列是否包含 postgresql 表中的特殊字符

> ID：12895579
> 
> 赞同：7
> 
> 时间：2012-10-15T12:21:09.687
> 
> 标签：postgresql-9.1

我在 PostgreSQL 中有一个表，我需要检测一列是否包含特殊字符`#,$,^,&,*,@,!`等，或者是否为空。

例如表格可能是这样的

![在此处输入图像描述](../Images/8a408a264ca01194dd2ba3e6dc6b5997.png)

如何编写这样的查询？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-15T12:47:29.170

最后我得到了解决方案

```
select * from table where column1 ~* '[^a-z0-9]' or column2  ~* '[^a-z0-9]' or column3  ~* '[^a-z0-9]' 
```

# asp.net - 国家的行政级别作为多边形

> ID：12895580
> 
> 赞同：3
> 
> 时间：2012-10-15T12:21:10.677
> 
> 标签：asp.net, maps, gis, openstreetmap, geonames

我正在尝试创建一个包含世界各地（尤其是欧洲）国家和行政级别的数据库（SQL Server）。

我想对所有区域使用多边形数据，并使用搜索并获得“多边形中的点”结果。

我查看了不同的数据位置，但我发现提取正确的数据并使用它有点困难。我的问题是我真的不知道从哪里开始。

我查看了 geonames、google maps 和 openstreetmap 的数据，我认为 OSM 是最好的。但我不知道如何提取它。

如何从 OSM 中提取多边形数据，或者其他很好的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T13:00:38.817

查看[GADM](http://www.gadm.org)，您可以在其中找到每个国家/地区的 shapefile（还有 kml 等）。不幸的是，管理区域并不总是最新的，因此准确性至关重要。你需要做一些工作来改进它们。我还怀疑（将 GADM 的英国形状与军械调查中的形状进行比较）进行了一定程度的简化，导致“多边形中的点”错误，尤其是在国家边界处。

我同意 OSM 比大多数都好，但是从 OSM 数据中提取多边形并不像我希望的那样简单。

# mongodb - 仅当某些属性与任何当前文档不匹配时才插入文档（通过 upsert？）

> ID：12895581
> 
> 赞同：1
> 
> 时间：2012-10-15T12:21:17.523
> 
> 标签：mongodb

有没有一种方法可以在 MongoDB 中插入不包含某些属性的新文档？

例如，假设我想插入一个如下所示的文档：

```
{
    'f_name': 'Jim',
    'l_name': 'Jones',
    'age': 21,
    'country': 'UK',
    ...etc...
} 
```

但我只想在包含的文档中插入*此*文档

```
{
    'f_name': 'Jim',
    'l_name': 'Jones'
} 
```

不存在。有没有一种方法可以在单个操作中执行此操作（例如，像 upsert，但如果存在则不修改任何现有的匹配文档），还是必须在两个单独的操作中完成（查找以查看是否存在，然后插入）？

这并不重要，但了解它会非常有用，并且可以节省大量时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:01:57.873

您可以使用以下两个选项之一：

*   复合唯一索引
*   像这样的更新：

    db.col.update({f_name: 'Jim', l_name: 'Jones'}, {//your doc here}, {upsert: true})

这将基本上搜索这些字段已经具有这些值和更新的文档（您可以使用相同的值更新字段）或者如果查找条件不返回结果则插入。

最后一次尝试是使用两个查询，但是上面的 upsert 应该可以很好地工作。

# iphone - 在更新的应用程序上恢复旧购买的应用程序内产品

> ID：12895582
> 
> 赞同：0
> 
> 时间：2012-10-15T12:21:18.797
> 
> 标签：iphone, in-app-purchase

在这种情况发生之前，我在应用内购买可以正常工作：

我正在更新我的一个应用程序。它有几个应用内产品。我想确保如果用户购买其中任何一个，它们也应该在更新的应用程序中显示为“已购买”。我做了以下但没有奏效：

1.  我通过 iTunes 将旧应用程序的临时版本安装到测试设备，并用我的测试帐户在那里购买了 1 个应用程序产品。
2.  删除了旧版本。通过 xcode 安装更新版本。
3.  我的应用程序首先询问用户是否要恢复购买的应用程序。当我点击恢复时，它要求我登录。我使用我在应用产品中购买 1 的同一帐户登录，但它没有恢复。

旧的和更新的应用程序具有相同的 id。并且当购买旧的和恢复新的不是这种情况时，恢复功能可以正常工作。

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:36:45.660

自己找到了解决办法，和测试账号无关。必须为更新的应用程序提供一个新的版本号，这意味着从 xcode 构建将不起作用，它必须是具有更新版本号的临时版本。我以前没有遇到过这样的问题。我猜苹果最近改变了他们的政策。

# c# - ASP 验证杀死回发

> ID：12895583
> 
> 赞同：0
> 
> 时间：2012-10-15T12:21:25.157
> 
> 标签：c#, asp.net, postback, asp.net-3.5

我有一个 .aspx 页面，它显示来自数据库的信息并允许用户添加新项目。

该页面包含一个更新面板。在该更新面板中，有一个网格视图和一个带有一些输入元素的面板：

```
<asp:Panel runat="server" ID="NewPersonPanel" DefaultButton="NewPersonButton" Visible="false">
    <div id="newItemForm">
        <label for="NewPersonName">Name:</label>     
        <asp:TextBox ID="NewPersonName" runat="server" MaxLength="50" />         
        <asp:RequiredFieldValidator ID="RequiredName" EnableClientScript="true" ControlToValidate="NewPersonName" ErrorMessage="Name must not be empty" ValidationGroup="NewPersonValidationGroup" runat="server" /><br />

        <label for="NewPersonFirstName">First Name:</label>     
        <asp:TextBox ID="NewPersonFirstName" runat="server" MaxLength="50" />         
        <asp:RequiredFieldValidator ID="RequiredFirstName" EnableClientScript="true" ControlToValidate="NewPersonFirstName" ErrorMessage="First name must not be empty" ValidationGroup="NewPersonValidationGroup" runat="server" /><br />

        <div id="newPersonControls">
            <asp:LinkButton ID="NewPersonButton" ValidationGroup="NewPersonValidationGroup" runat="server" OnCommand="PersonGrid_Insert">Create</asp:LinkButton>
            <asp:LinkButton ID="HideInputFormButton" runat="server" OnCommand="HideInputForm">Cancel</asp:LinkButton>
        </div>
    </div>
</asp:Panel> 
```

如果没有验证元素，页面就可以正常工作。当我添加验证时，事情变得很奇怪；当我尝试在字段为空时单击“创建”按钮时，会出现红色验证消息，但这会杀死页面上的所有回发。如果我填写这些字段，红色文本会消失，但我不能再使用任何按钮。创建新人，删除表单，对网格进行排序，过滤网格，网格分页......所有这些都停止工作了。使用调试器似乎不再有任何对我的代码的调用，所以看起来失败的验证在 ja​​vascript 中做了一些导致所有其他“__doPostBack”方法失败的事情。

我确实找到了这个线程：[asp.net: Postback disabled after validation failed](https://stackoverflow.com/questions/10177058/asp-net-postback-disabled-after-validation-failed) 但那里从来没有任何答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:29:09.677

因为您设置了验证，所以您将无法回发。

但是您可以通过使用禁用它们`ValidatorEnable(object,true/false)`

这需要两个参数，第一个是对象，第二个是启用还是禁用。

在你的情况下，这是错误的。

但是您必须为表单中的所有控件执行此操作（您已为其设置了验证）。

# php - PHP中的依赖注入——简单的例子回顾

> ID：12895586
> 
> 赞同：3
> 
> 时间：2012-10-15T12:21:30.540
> 
> 标签：php, oop

我是 OOP 的新手，我最近[问了一个问题](https://stackoverflow.com/questions/12877158/php-oop-extending-two-classes)，这让我知道：

*   每个“操作”都应该在单独的类中实现，
*   我遇到的问题应该通过**依赖注入**来解决，
*   对于整个应用程序，我**不能有一个对象。**

假设我有以下代码：

```
class FtpConnect {
     public $server;

     private function connect () { ... }

     public __construct ($db, $mailer, $server) {
         $this->server = $server;
         $this->connect();
     } 
}

class Database {
    public $database_property;
    ...
}

class Phpmailer {
    public $phpmailer_property;
    ...
}

$db = new Database();
$mail = new Phpmailer();

$ftp = new Ftpconnect ($db, $mail, "ftp.mozilla.org");

$ftp->db->database_property;
$ftp->mail->phpmailer_property; 
```

这是一个正确的方法吗？看来我还有一个对象`$ftp`。

像这样读取属性或调用方法`$ftp->db->database_property;`是正确的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T12:29:54.900

在您的示例中有一些好事和一些坏事！首先，祝贺您认真尝试学习良好的编程实践。你正朝着正确的方向前进！

好东西：

*   您正在使用正确的构造函数注入（DI 的形式），因此您只`new`在示例的最高级别编写语句，而在类内部没有。
*   您为每种不同的服务编写了一个类，太好了。

坏事：

*   您正在通过 ftp 实例访问 db 和 mail 的属性，不要那样做！
*   您正在使用公共属性，将属性设为私有并使用公共 getter 和 setter
*   你在构造函数中调用主要方法，不要那样做，你不应该在类内部而是在外部调用它。
*   你没有对传递给 ftp 实例的 $mailer 实例做任何事情，ftp 类真的需要 mailer 类吗？

改进的示例，假设您的 ftp 类确实需要数据库和邮件：

```
class FtpConnect {

     private $db;
     private $mailer;

     private $server;

     public function connect () { ... }

     public __construct ($db, $mailer, $server) {
         $this->setServer($server);
         $this->setMailer($mailer);
         $this->setDb($db);
     }

     public setServer($server)
     {
         $this->server = $server;
     }

     public setDb($db)
     {
         $this->db = $db;
     }

     public setMailer($mailer)
     {
         $this->mailer = $mailer;
     }
}

class Database {
    private $databaseProperty;
    public getDatabaseProperty()
    {
        return $this->databaseProperty;
    }
}

class Phpmailer {
    private $phpmailerProperty;
    public ... see above...
}

$db = new Database();
$mail = new Phpmailer();

$ftp = new FtpConnect ($db, $mail, "ftp.mozilla.org");
$ftp->connect();

$someProperty = $db->getDatabaseProperty(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:28:54.773

除了传递给它的第三个参数之外，您的构造函数会默默地丢弃所有内容。为什么要在 ftp 中放置一个 db 对象？这看起来有点奇怪。

除此之外，您已经为 db/mail 对象初始化了变量，因此您应该使用它们（更少的链接使代码更易于阅读）或编写如下内容：`$ftp = new Ftpconnect (new Database, new Phpmailer, "ftp.mozilla.org");`不要让代码变得更加晦涩难懂。

不要给 ftp 对象它不会使用的东西。此外，如果您尝试访问的属性不是特定于实例的（在该类的所有对象中都是相同的），您应该使用类常量或静态变量

# python - QTableWidget 单元格中的 QSvgWidget 行为

> ID：12895587
> 
> 赞同：0
> 
> 时间：2012-10-15T12:21:30.970
> 
> 标签：python, svg, pyqt4, qtablewidget, stretching

我有 QTableWidget 并且我已经用 .svg 文件填充了一列，并使用 QSvgWidget 来显示它们：

```
for...
    svgWidget = QSvgWidget("C:\mySVG.svg")
    self.ui.tableWidget.setCellWidget(i, j, svgWidget)
... 
```

其他列填充了一些文本，当我尝试使用时出现问题

```
self.ui.tableWidget.resizeRowsToContents() 
```

svgWidget 正在被拉伸（我需要保留纵横比）......所以，我设置了最大尺寸，`svgWidget.setMaximumSize(svgWidget.sizeHint())`现在每行的高度都设置为该行中 svgWidget 的高度，所以如果有更多文本被剪切，但我可以手动拉伸任何行的高度以查看文本，正如我预期的那样，使用 svgWidget 在单元格中添加空白。我的问题是为什么`resizeRowsToContents()`不做这项工作（为什么不能自动添加空格？）。例子将不胜感激，我已经用谷歌搜索了这个，没有例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T09:24:48.667

我已经这样解决了：

```
self.ui.tableWidget.setSortingEnabled(0)
...populating table columns with text and svgWidgets....
self.ui.tableWidget.setSortingEnabled(1)
self.ui.tableWidget.horizontalHeader().sortIndicatorChanged.connect(self.ui.tableWidget.resizeRowsToContents) 
```

出于某种原因，任何其他订单都不适合我。

# html - 网站的高度与 BODY/HTML 不同

> ID：12895588
> 
> 赞同：1
> 
> 时间：2012-10-15T12:21:33.870
> 
> 标签：html

我正在尝试解决站点比 HTML 和 BODY 更长的问题，并且没有可以扩展它的浮动元素。当鼠标悬停在下拉菜单上时，它的高度也会变得更大。

该站点位于[https://www.librassay.com/](https://www.librassay.com/)，您应该能够看到大页脚，并在将鼠标悬停在“类别”下拉菜单上时观看边栏扩展。

据我所知，没有元素接收任何 javascript 更改，这只是浏览器如何呈现它的一些奇怪问题。那么可能是 HTML 结构问题？我一直在为此苦苦挣扎，因此非常感谢任何见解。

如果有帮助，我正在使用 Chrome 22.0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T12:32:02.107

`.largelogo`负边距导致它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:37:19.207

我得到了一些不同的体验。在 IE 中，文档大小没有变化。在 Firefox 中，当悬停按钮时，文档会变小而不是变大。

你有一些你应该修复的无效标记。例如，`div`元素中有一个`span`元素。这通常会在不同的浏览器中给出不同的结果，因为每个浏览器都有自己尝试修复无效标记的方式。

[http://validator.w3.org/check?uri=https%3A%2F%2Fwww.librassay.com%2F&charset=%28detect+automatically%29&doctype=Inline&group=0](http://validator.w3.org/check?uri=https%3A%2F%2Fwww.librassay.com%2F&charset=%28detect+automatically%29&doctype=Inline&group=0)

# c# - XAML 列表值设置器与预先存在的项目

> ID：12895589
> 
> 赞同：1
> 
> 时间：2012-10-15T12:21:37.117
> 
> 标签：c#, list, xaml, setter

我正在开发一个 C# WPF 组件（使用 VS2010 版本 10.0.40219.1 SP1Rel），其中包含 int 和 List 等公共属性。

该组件似乎可以通过 VS2010 wpf 编辑器进行序列化，因为 .xaml 中生成的 xml 块如下所示：

```
<Parent>
    <NumberProperty>10</NumberProperty>
    <ListProperty>
        <Item>
            blah
        </Item>
    </ListProperty>
</Parent> 
```

当反序列化组件（即运行应用程序）时，会读取 List 属性（运行 getter）并将项目添加到其中。没有为列表运行设置器。

问题是列表包含故意的默认项目，该项目在项目父构造函数中添加到列表中。如果相关 xaml 中有可用的，这些/此预先存在的项目应替换为列表中的项目。

我尝试`DesignerSerializationVisibility(DesignerSerializationVisibility.Visible)`作为列表属性没有运气。

那么是否可以通过环境的某些属性来判断它应该替换列表属性（调用设置器）而不是向其中添加项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T22:29:32.507

这是一个令人头疼的问题:)

正如您所说，如果您使用一些默认值初始化列表属性，它们不会出现在设计器中。如果您将一些值添加到列表中，它们会被序列化为 .xaml，然后这些值会在运行时添加到您的默认值中，而不是替换它们。

*一种*解决方案是使用一个自定义集合，该集合知道它包含一个（或多个）默认值，并在将第一个新项目添加到列表时将其（或它们）删除。

例如

```
public partial class UserControl1
{
    public UserControl1()
    {
        // initialise collection with '1' - doesn't appear in design time properties
        Ids = new MyCollection<int>(1);

        InitializeComponent();
    }

    public int Id { get; set; }

    public MyCollection<int> Ids { get; set; }
}

public class MyCollection<T> : Collection<T>
{
    private readonly T _defaultValue;
    private bool _hasDefaultValue;

    public MyCollection(T defaultValue)
    {
        _defaultValue = defaultValue;

        try
        {
            _hasDefaultValue = false;

            Add(defaultValue);
        }
        finally
        {
            _hasDefaultValue = true;
        }
    }

    protected override void InsertItem(int index, T item)
    {
        base.InsertItem(index, item);

        if (_hasDefaultValue)
        {
            Remove(_defaultValue);
            _hasDefaultValue = false;
        }
    }
} 
```

Xaml

```
 <local:UserControl1 Id="5">
        <local:UserControl1.Ids>
            <System:Int32>2</System:Int32>
            <System:Int32>3</System:Int32>
            <System:Int32>4</System:Int32>
        </local:UserControl1.Ids>
    </local:UserControl1> 
```

我不能说这是一个特别令人满意的解决方案，但我认为它确实解决了你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-02T10:20:36.050

我知道这是一个老问题，很久以前就找到了一种解决方案，但无论如何。应该使用列表添加项目，因此列表将被替换。像这样：

```
<Parent>
<NumberProperty>10</NumberProperty>
<ListProperty>
    <List>
        <Item>
            blah
        </Item>
    </List>
</ListProperty> 
```

# c# - 正则表达式匹配所有多余的和尾随的 NewLines

> ID：12895592
> 
> 赞同：2
> 
> 时间：2012-10-15T12:21:56.613
> 
> 标签：c#, regex

我试图找到一个与 C# 兼容的正则表达式来**匹配所有多余的换行符**——包括空行/仅空白行——允许替换：

```
第一行
    第二行

第三行

```

喜欢：

```
第一行
    第二行
第三行

```

*没有*任何尾随换行符。

众所周知的多行*不*`^\s*$`匹配最后一个换行符。

 *我能够想出**`(?<!\S+)\r\n|(\r\n)+\z`**：

1.  工作，在单线和多线模式
2.  很丑而且可能很慢

有没有人能想出一个*简单*的正则表达式来做同样的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T12:37:06.117

原因是，如果最后一行没有任何内容，则匹配字符串末尾的`$`a 之前。`\n`

对于中间的空行

```
^\s*^ 
```

`^`在换行符之后匹配`\n`。所以这匹配从一行开始到下一行的空白。

对于最后一个空行，您需要从最后一个换行符之前匹配所有空格，直到字符串末尾

```
$\s*\z 
```

并结合

```
^\s*^|$\s*\z 
```

`\z`匹配必须出现在字符串的末尾

请参阅[msdn 上的锚点](http://msdn.microsoft.com/en-us/library/az24scfc.aspx#atomic_zerowidth_assertions)

我的测试：

```
string s = "This is the first row\n\nThis is the third\n    \nThis the fifth\n";

string result = Regex.Replace(s, @"^\s*^|$\s*\z", "", RegexOptions.Multiline);
Console.WriteLine(result);

Console.WriteLine("fin");
Console.ReadLine(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T18:15:28.690

为了摆脱尾随的换行符，混合方法怎么样：

```
Regex.Replace(input, @"^\s+$", "", RegexOptions.Multiline).TrimEnd() 
```

简单易读。*

# objective-c - DTCoreText 链接器错误，未定义的符号

> ID：12895594
> 
> 赞同：1
> 
> 时间：2012-10-15T12:22:01.090
> 
> 标签：objective-c, linker, ios6

我过去使用过 DTCoreText，但我正在尝试通过最新版本的静态库来使用它。我已经遵循了 GitHub README 中列出的所有设置点（即使是在一个全新的空白 Xcode 项目中）。但是，当尝试像在演示中那样定义 NSAttributedString 渲染选项时。我只是得到链接器错误

`NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:@"Times New Roman", DTDefaultFontFamily, @"purple", DTDefaultLinkColor, nil];`

> 架构 i386 的未定义符号：“_DTDefaultFontFamily”，引用自：AppDelegate.o 中的-[AppDelegate application:didFinishLaunchingWithOptions:] “_DTDefaultLinkColor”，引用自：AppDelegate.o 中的-[AppDelegate application:didFinishLaunchingWithOptions:]

不知道我错过了什么，但我已经看过好几次了。有什么我应该注意的吗？

# apache - .htaccess 不为虚拟主机加载

> ID：12895596
> 
> 赞同：0
> 
> 时间：2012-10-15T12:22:09.810
> 
> 标签：apache, virtualhost

这是一个 Ubuntu 12.04 桌面设置。
我的虚拟主机中有以下内容：
anjanesh@desktop:/etc/apache2/sites-available$ cat domain

```
<VirtualHost *:80>
    ServerName local.domain.com
    DocumentRoot /home/anjanesh/vhosts/domain/
    <Directory /home/anjanesh/vhosts/domain>
        Options Indexes FollowSymLinks MultiViews +ExecCGI
        AllowOverride All
        Order allow,deny
        allow from all
    </Directory>
</VirtualHost> 
```

AllowOverride 设置为全部。
但是我的 .htaccess (local.domain.com) 中没有任何内容。我不知道为什么。

1.  本地主机中的 .htaccess 有效。(http://locahost/anjanesh)
2.  /home/anjanesh/vhosts 实际上是 /home/anjanesh/Dropbox/vhosts 的符号链接。我什至在虚拟主机文件中给出了正确的路径（Dropbox），仍然没有效果。

还有什么我必须启用的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:33:53.530

也许您应该在文件夹层次结构中的链接之前使用 followSymLink？

```
<Directory /home/anjanesh>
    Options +FollowSymLinks
</Directory> 
```

# objective-c - iOS 6 中的 self.view presentviewcontroller:UIImagePickerController 崩溃

> ID：12895597
> 
> 赞同：1
> 
> 时间：2012-10-15T12:22:10.330
> 
> 标签：objective-c, xcode, ios6

当我尝试从 xcode 4.5 调用相册时，应用程序崩溃。注意：我将应用程序方向设置为横向模式。

```
UIImagePickerController *picker=nil;
if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeSavedPhotosAlbum])
{
    picker = [[UIImagePickerController alloc] init];
    picker.delegate = self;
    picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;

    picker.allowsEditing = NO;
    picker.mediaTypes = [UIImagePickerController availableMediaTypesForSourceType:
            UIImagePickerControllerSourceTypeSavedPhotosAlbum];

}

if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone ) {
    [self presentViewController:picker animated:YES completion:nil];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:30:49.100

您的逻辑中的一个错误是，如果`isSourceTypeAvailable`在 iPhone 上返回 NO，您将尝试提供一个`nil`.

# javascript - Fancybox v2.1.1中更改边框颜色

> ID：12895599
> 
> 赞同：0
> 
> 时间：2012-10-15T12:22:22.160
> 
> 标签：javascript, css, fancybox, border

我到处搜索，看不到版本 2.1.1 已经回答了这个问题。

我要做的就是将fancybox的边框颜色从白色更改为其他颜色。

请任何人告诉我我需要更改 CSS 的哪一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:29:12.620

我猜你错过了搜索 Fancybox 样式表，也没有通过一些浏览器开发工具查看样式。白色“边框”不是边框，而是底层的白色背景`DIV`：

```
.fancybox-skin {
    background: #F9F9F9;
} 
```

只需查看`jquery.fancybox.css`并修改提到的选择器样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T18:32:19.953

如果您指的是单击链接后打开的叠加图像，那么您可以使用

```
.fancybox-content {
    border-color: #[your color]; /* this gets you the required color. Tested*/
} 
```

.fancy-box 是包含覆盖图像的类。

# javascript - Extjs 为表单上的所有字段设置只读

> ID：12895606
> 
> 赞同：6
> 
> 时间：2012-10-15T12:22:50.890
> 
> 标签：javascript, extjs

我正在尝试编写为表单上的所有字段设置 readOnly 属性的方法。

我的代码：

```
Ext.override(Ext.form.Panel,{

setReadOnlyForAll: function(bReadOnly) {

    this.cascade(function(f) {
      if (f.isFormField) {
         f.setReadOnly(bReadOnly);
      }
    });
}); 
```

从 Ext.form.Panel 调用此方法：

```
this.setReadOnlyForAll(false); 
```

但是这种方法工作得很慢。有人知道如何提高速度吗？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T14:31:11.267

根据 Wilk 的建议（使用 ExtJS 4.1.1a），在表单（带有嵌套表单）上将 ~90 个字段设置为只读时，我仍然遇到了 9 秒的延迟。

为了进一步改进这一点并将 9 秒缩短到 < 1 秒，我添加了对 Ext.suspendLayouts() 和 Ext.resumeLayouts() 全局变量的调用，以允许框架对组件布局进行批处理。

```
Ext.define('My.Panel', {
  extend: 'Ext.form.Panel',

  setReadOnlyForAll: function(readOnly) {
    Ext.suspendLayouts();
    this.getForm().getFields().each(function(field) {
      field.setReadOnly(readOnly);
    });
    Ext.resumeLayouts();
  }
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-15T17:28:59.830

`cascade`检查当前容器的每个子项（例如 an `Ext.form.Panel`），这意味着您必须检查当前子项是否是表单字段。因此，使用`Ext.form.Basic.getFields`方法来获取每个表单字段：

```
Ext.define ('Your_form_Panel', {
  extend: 'Ext.form.Panel' ,
  setReadOnlyForAll: function (bReadOnly) {
    this.getForm().getFields().each (function (field) {
      field.setReadOnly (bReadOnly);
    });
  }
}); 
```

此外，我建议您使用`Ext.define`而不是`Ext.override`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-12T17:04:31.457

这很简单。只需在您的表单中添加此配置：

```
 var formPanel = Ext.create('Ext.form.Panel', {

                fieldDefaults: {
                    labelAlign: 'right',
                    labelWidth: 85,
                    msgTarget: 'side',
                    readOnly : true //all fiels are in readOnly mode
                },

                defaultType: 'textfield',

                items: [{
                        fieldLabel: 'Nome',
                        name: 'nome'
                    }, {
                        fieldLabel: 'Cognome',
                        name: 'cognome'
                    }
                    ]
                }],

            }); 
```

# performance - 优化重复出现的matlab代码

> ID：12895609
> 
> 赞同：2
> 
> 时间：2012-10-15T12:22:59.907
> 
> 标签：performance, matlab, optimization, if-statement

我正在优化一个模型，该模型需要一些天气数据，然后将云转换为多边形，以便进一步利用它们。
该代码正在运行，但它的速度很慢。通过运行分析器，我发现以下几行被调用`106360430`了，处理时间大约为 50 秒。
有没有办法让这些线路更有效率？

```
function [oddNodes] = pointInPolygon (point,thePolygon)
% determine if a point is in the polygon (faster than matlab "inpolygon"command

polyPoints=size(thePolygon,1);    % number of polygon points
oddNodes = false;

j=polyPoints;
x=point(1); y=point(2);

for i=1:polyPoints
if (thePolygon(i,2)<y && thePolygon(j,2)>=y ||  thePolygon(j,2)<y && thePolygon(i,2)>=y)
if (thePolygon(i,1)+(y-thePolygon(i,2))/(thePolygon(j,2)-thePolygon(i,2))*(thePolygon(j,1)-thePolygon(i,1))<x)
oddNodes=~oddNodes;
end
end
j=i; 
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:32:31.010

`inPolygon`test 是一个繁重的功能，可能最好在 mex 文件中完成。以下是您可以查看的一些 FEX 贡献：[inpoly-mex-file](http://www.mathworks.com/matlabcentral/fileexchange/15410-inpoly-mex-file)、[MEX 中](http://www.mathworks.com/matlabcentral/fileexchange/30819-fast-inpolygon-in-mex)的 Fast Inpolygon和[Fast InPolygon detection MEX](http://www.mathworks.com/matlabcentral/fileexchange/20754-fast-inpolygon-detection-mex)。[这](http://www.mathworks.com/matlabcentral/fileexchange/10391-fast-points-in-polygon-test)是一个本机 matlab 代码，它比 matlab 更快`inpoly`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T14:46:50.220

像这样矢量化您的代码（使用矩阵而不是使用循环）：

```
function [oddNodes] = pointInPolygon (point,thePolygon)

polyPoints=size(thePolygon,1);    % number of polygon points
oddNodes = false;

j=polyPoints;
x=point(1); y=point(2);

% this part has been vectorized:

thePolygon2=circshift(thePolygon,1);
t1=(thePolygon(:,2)<y & thePolygon2(:,2)>=y | thePolygon2(:,2)<y & thePolygon(:,2)>=y);
t2=(thePolygon(:,1)+(y-thePolygon(:,2))/(thePolygon2(:,2)-thePolygon(:,2))*(thePolygon2(:,1)-thePolygon(:,1))<x);

oddNodes=mod(sum(t1&t2),2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T14:19:21.243

我没有测试它的速度，但一般的方法是：与其运行同一行 106360430 次，不如尝试对你的代码进行矢量化。因此，尝试像这样塑造它：

```
output = pointMatrixInPolygon (pointMatrix,thePolygon) 
```

然后尽量避免函数内部的循环，你应该在那里。可能的情况是，您实际上可以将矩阵提供给常规的 inpolygon 函数。

# reporting-services - SSRS 2012 多列的递归层次结构

> ID：12895611
> 
> 赞同：1
> 
> 时间：2012-10-15T12:23:01.910
> 
> 标签：reporting-services, recursion, report, hierarchy

我目前正在为我在 SSRS 2012 中创建的报告而苦苦挣扎。我有一个具有 4 级层次结构的数据集，并且想要创建一个递归层次结构。我到处寻找方法来在一列中创建此层次结构并使用填充来区分不同级别。但是，我的报告将被导出到 Excel，并有机会按列中的值进行过滤。这意味着我需要将层次结构中的每个级别划分为不同的列。

我正在处理位置，所以我有一个 Location_ID 和一个 Parent_Location_ID

最后，我希望报告中的层次结构如下所示。

```
xxxx
  xxxx
    xxxx
      xxxx
      xxxx
      xxxx
    xxxx
      xxxx
  xxxx
    xxxx
      xxxx
      xxxx 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:55:59.447

如果我要设计报告，我会决定层次结构中要处理的最大级别数，比如说 10。

然后我会有一个查询返回遇到的最大值，并使用该查询的结果来隐藏任何未使用的列。

然后，我的核心数据查询将具有一组固定的列：

```
Level1  Level2 Level3 .... Level10 MyDataField1 MyDataField2 
```

我会在 SQL 查询中生成这些。这将是混乱的、重复的 SQL（不是 DRY。）但在 SSRS 和导出端很容易处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-29T23:08:46.760

[此技术网参考](http://technet.microsoft.com/en-us/library/dd255243.aspx)可能对任何其他试图解决 SSRS 中单个列上的递归关系的人有用。就我而言，我开始查看多个列，但单个列最终运行良好。

**要创建递归层次结构组：**

1.  在设计视图中，添加一个表，然后拖动数据集字段进行显示。通常，要显示为层次结构的字段位于第一列中。
2.  右键单击表中的任意位置以将其选中。分组窗格显示所选表的详细信息组。在“行组”窗格中，右键单击“详细信息”，然后单击“编辑组”。组属性对话框打开。
3.  在组表达式中，单击添加。新行出现在网格中。
4.  在 Group on 列表中，键入或选择要分组的字段。
5.  单击高级。
6.  在 Recursive Parent 列表中，输入或选择要分组的字段。
7.  单击确定。
8.  运行报告。

添加缩进以显示层次结构级别。您可以使用以下方法将填充左侧添加到文本框：

```
=CStr(2 + (Level()*10)) + "pt" 
```

# c# - Xamarin Visual Studio 安装包未处理异常

> ID：12895617
> 
> 赞同：0
> 
> 时间：2012-10-15T12:23:23.547
> 
> 标签：c#, android, mono, visual-studio-2012, xamarin

我想我会尝试 Xamarin 的 Mono Android，但从一开始，它就无法在我的设备上运行。

仅当我尝试将应用程序从 VS 中加载到我的 I9100 时才会发生这种情况，但如果加载到模拟器中则可以正常工作。

我的设备有启用调试的 CM10。该解决方案本身是开箱即用的，仅添加了 AndroidManifest 并对其进行了定制。

尝试检查和取消选中共享运行时和使用快速部署。链接设置为 SDK 和用户程序集。

异常的详细信息是：InstallFailedException: [INSTALL_FAILED_INVALID_APK] at Mono.AndroidTools.AdbOutputParsing.CheckInstallSuccess(String output, String PackageName) at Mono.AndroidTools.AndroidDevice<>c_DisplayClass27.b_26(Task'1 t) at System.Threading.Tasks .ContinuationTaskFromResultTask'1.InnerInvoke() 在 System.Threading.Tasks.Task.Execute()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T21:49:37.527

看来问题是由于我使用的自定义内核造成的。我正在使用 Dorimanx 的 7.1 JB Mali（基于 Siyah），它需要在 ExTweaks 的 Misc 选项下将其 ADB 模式设置为开发。希望这可以帮助其他发现自己陷入此问题的人。

# javascript - 模仿谷歌地图mapTypeControl自定义控件

> ID：12895622
> 
> 赞同：0
> 
> 时间：2012-10-15T12:23:41.937
> 
> 标签：javascript, css, google-maps-api-3

有谁知道如何完全匹配谷歌地图`mapTypeControl`按钮样式（关于 ui/css）？我找到了一个不错的[教程](https://developers.google.com/maps/documentation/javascript/controls#CustomExample)，但按钮与默认的 google 样式不匹配。有没有一种简单的方法可以准确地获取当前的谷歌地图按钮样式，或者我是否必须手动尝试匹配`current`样式（在每个新版本中可能会有所不同，这会有点痛苦......你知道我的意思）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T15:42:13.110

快速查看 Chrome 开发者控制台会发现以下内联样式（没有为任何按钮分配类或 id-s）。另请注意，此元素有一个空的无样式器浮动包装器，该包装器还包含按钮菜单（地形按钮）。

对于地图按钮：

```
direction: ltr; 
overflow: hidden; 
text-align: center; 
position: relative; 
color: rgb(0, 0, 0); 
font-family: Arial, sans-serif; 
-webkit-user-select: none; 
font-size: 13px; 
background-color: rgb(255, 255, 255); 
padding: 1px 6px; 
border: 1px solid rgb(113, 123, 135); 
-webkit-box-shadow: rgba(0, 0, 0, 0.4) 0px 2px 4px; 
box-shadow: rgba(0, 0, 0, 0.4) 0px 2px 4px; 
font-weight: bold; min-width: 29px; 
background-position: initial initial; 
background-repeat: initial initial; 
```

对于 Satellite 按钮，唯一不同的样式是 font-weight

# iphone - cocos2d如何根据iOS设备加载不同的图片？

> ID：12895629
> 
> 赞同：0
> 
> 时间：2012-10-15T12:23:53.000
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone

我正在 cocos2d 中开发游戏：我想根据 iOS 设备加载不同的图像。我已经在使用的一种方法是在 init 方法中检查设备，然后将图像添加到同一个 ccsprite 对象中。

但它非常冗长且难以管理。我认为我应该做的是为所有具有相同名称的设备创建图像并将它们放在不同的文件夹中；在应用程序启动时，只需检查设备并设置与 iOS 设备匹配的路径。例如

> 图片
> /iphone/abc.png 图片/iPad/abs.png

如何从不同的路径添加孩子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T14:10:49.727

如果您使用的是 cocos2d 2.0，那么您有 -ipad 后缀。事实上，你有 -hd、-ipad 和 -ipadhd

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:38:21.277

您可以在运行时选择图像：

```
UIImage *image;

if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
   image = // Load iPad image here
else
   image = // Load iPhone image here 
```

如果您在代码中的任何地方都使用它，这当然会很痛苦，因此您可以`UIImage`为此添加一个辅助函数、一个类别或一个宏，即

```
+(UIImage *)deviceDependentImageWithName:(NSString *)name {
   return (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) ? /* iPadImage */ : /* iPhoneImage */;
} 
```

如果您遵循命名规则（例如将它们放在单独的文件夹中），后一种方法特别容易（确保这些目录将存在于发行版中，而不是默认情况下仅复制到顶级目录）。添加“-iPhone”或“-iPad”可能同样有效，而无需担心目录。

# javascript - 使用 jQuery 隐藏/显示时跳转到页面顶部

> ID：12895632
> 
> 赞同：1
> 
> 时间：2012-10-15T12:24:08.990
> 
> 标签：javascript, jquery, ruby-on-rails

我正在尝试根据单击的按钮隐藏/显示一些 div。每次我单击不同的按钮来显示某个 div 时，它都会跳转到页面顶部。如果相关的话，我也在使用 Ruby on Rails。我也尝试过使用 return false ，但这也不起作用。有人有想法么？谢谢。

Javascript：

```
$(document).ready(function(){
    $('#new-event-button').click(function(e){
        e.preventDefault();
        $('#edit-events').hide();
        $('#delete-events').hide();
        $('#new-event').slideDown();
    });
    $('#edit-events-button').click(function(e){
        e.preventDefault();
        $('#new-event').hide();
        $('#delete-events').hide();
        $('#edit-events').slideDown();
    });
    $('#delete-events-button').click(function(e){
        e.preventDefault();
        $('#new-event').hide();
        $('#edit-events').hide();
        $('#delete-events').slideDown();
    }); 
}); 
```

查看代码：

```
<button id="new-event-button">New Event</button>
<button id="edit-events-button">Edit Events</button>
<button id="delete-events-button">Delete Events</button>

<div id="events-forms">
    <div id="new-event">
        <%= render :partial => "new_event", :locals => { :event => Event.new(:timeline_id=>@timeline.id) } %>
    </div>

    <div id="edit-events">
        <%= render :partial => "edit_events", :locals => { :events => current_user.events } %>  
    </div>

    <div id="delete-events">
        <%= render :partial => "delete_events", :locals => { :events => current_user.events } %>        
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:02:14.990

好吧，如果您正在填充的 div#events-forms 在您单击按钮时没有高度，它的高度将变为 0，然后再次展开以适应它的内容。这就是触发浏览器跳回的原因，因为没有更多内容要显示。

- 如果可能的话，你可以给包含的 div#event-forms 一个固定的大小，所以只有内容在变化，而不是元素的高度。

```
#events-forms{
border: 1px solid black;
height:400px; 
```

- 否则，您可能会考虑首先更改包含 div 的高度（使用 javascript/jquery）以适合您要粘贴到其中的数据。

如果您使用以下 css 片段，您可以看到 div 不断增长和扩展，这可能会让您更容易理解为什么您被设置到页面顶部。

```
#events-forms{
    border: 1px solid black;
} 
```

# sqlite - SQLite 删除限制

> ID：12895633
> 
> 赞同：0
> 
> 时间：2012-10-15T12:24:12.557
> 
> 标签：sqlite, delete-row

问题很简单：在 SQLite 中可以删除的行是否有限制。

我有一个数据库 42 个表，其中一个表由 75000 行组成。当我想删除它们时，FF 中的 SQLManager 崩溃。

那么在 SQLite 中删除行有限制吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:31:12.000

我在删除 SQLite 中的数十万行时没有遇到*任何问题，因此，如果有问题，则与 DBMS 本身无关。*SQLManager*可能*有问题，但我没有资格对此发表评论。

我的建议是使用 SQLite 提供的工具（或您自己的代码），而不是使用某些第三方产品 - 这样，您就会*知道*您发现的任何限制（我怀疑，根据经验，它赢了'不多）将是由于产品本身。

# javascript - 将范围设置为 tinymce：索引或大小为负数或大于允许的数量

> ID：12895634
> 
> 赞同：1
> 
> 时间：2012-10-15T12:24:15.467
> 
> 标签：javascript, tinymce

**这是我的代码：**

```
range.setStart(range.startContainer, index);
range.setEnd(range.startContainer, parseInt(index) + parseInt((ed.line.text.split(' ')[2] || "").length)); 
```

**这些是来自控制台的值：**

```
index: 1
eindex + (ed.line.text.split(' ')[2] || "").length: 2
ed.line.text.length: 2 
```

为什么我会收到此错误？：

> 索引或大小为负数或大于允许的数量

# javascript - 如何在 ExtJS 中用数组填充组合框

> ID：12895637
> 
> 赞同：1
> 
> 时间：2012-10-15T12:24:18.757
> 
> 标签：javascript, extjs, combobox

我正在努力解决 ExtJS 4 中的一个问题......

我有一个这样的数组：

```
[ 2010, 2011,2012 ] 
```

我想用这些值填充我的组合框。我可以使用 combobox.setValue() 设置第一个值，但我想设置几个值。这是我的组合框：

```
var combobox = Ext.ComponentQuery.query('combobox[name=myBox]')[0]; 
```

有人知道我如何用数组填充组合框吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T12:30:24.013

看到这个

> Ext.create('Ext.form.field.ComboBox', { store: ['Red', 'Yellow', 'Green', 'Brown', 'Blue', 'Pink', 'Black'] });

参考：[http ://skirtlesden.com/articles/extjs-comboboxes-part-1](http://skirtlesden.com/articles/extjs-comboboxes-part-1)

# rest - 使用 WSO2 API 管理器发布 SOAP 服务

> ID：12895641
> 
> 赞同：2
> 
> 时间：2012-10-15T12:24:29.530
> 
> 标签：rest, wso2, wso2-am

我想发布一个带有 WSO2 API 管理器的 SOAP 服务，允许人们订阅它并监控使用情况。

我没有找到有关如何执行此操作的文档（如果可能的话），它只是谈论 REST 服务。

有可能吗，周围有文档吗？

谢谢

卢卡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:23:28.700

可以通过 WSO2 API Manager 向消费者发布 SOAP/REST Web 服务。下面的博客文章 [1] 将有助于您对此有所了解。

[1] [http://charithaka.blogspot.com/2012/07/sumption-soap-service-using-wso2-api.html](http://charithaka.blogspot.com/2012/07/consuming-soap-service-using-wso2-api.html)

请注意，有些内容需要根据 API Manager 1.0.0 版本进行升级，因为这篇文章是为 APIManager alpha 版本编写的。例如，您必须引用应用程序访问密钥而不是引用上述文章的 api 密钥。

谢谢;

/拉拉吉

# javascript - MVC Ajax.beginform 部分验证逻辑不一致

> ID：12895643
> 
> 赞同：0
> 
> 时间：2012-10-15T12:24:40.000
> 
> 标签：javascript, jquery, asp.net-mvc, unobtrusive-validation

我在 Visual Studio 10 中使用 MVC 3 和 razor 以及客户端不显眼的验证。我需要为用户提供保存表单的机会，因为缺少一些必填字段。提交具有 Ajax.bgein 表单结构。

我有以下 JavaScript 来捕获提交事件。

```
$(document).ready(function () {

$('#submit-11').click(function (event) {

    var validator = $("#form0").validate();

    if (!$("#form0").valid()) {
        // for partial save needs either ID number
        // or family name and date of birth
        var NameExists = true;
        var DateOfBirthExists = true;
        var IDNumberExists = true;

        if (validator.errorMap["model.FamilyName"]) { NameExists = false; }
        if (validator.errorMap["model.DateOfBirth"]) { DateOfBirthExists = false; }
        if (validator.errorMap["model.IDNumber"]) { IDNumberExists = false; }

        if (IDNumberExists || (NameExists && DateOfBirthExists)) {
            if ($("#model_PartialSave").attr('checked')) {
                //  partial save has been requested
                alert("saving");
                return true;    // AJAX save is NOT triggered
            }
            $("#AgreePartialSave").show();
            $("#model_PartialSave").removeAttr('checked');

        }
        return false;
    }
    return true;    // AJAX save IS triggered
});

});                    //document ready end 
```

逻辑似乎是正确的 - 我已经在 firebug 中跟踪了这一点 - 并且触发了警报，但 AJAX 提交调用没有发生。如果表单有效，则会发生 AJAX 提交调用。

我也尝试过`event.preventDefault();` ，但这会阻止任何保存的发生。

我也在萤火虫中追踪了这一点，似乎所有正确的调用都在进行。

感激地收到任何帮助。

**更新**

似乎这可能是 Microsoft Ajax 库中的一个限制。有关详细信息和解决方法，[请参阅此链接。](https://stackoverflow.com/questions/11561496/jquery-unobtrusive-validation-ignores-cancel-class-on-submit-button-if-used-in)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T17:39:15.753

我相信你需要拦截的是表单的提交事件，而不是提交按钮的点击事件。发生的事情（我怀疑）是，由于验证框架仍然认为您的表单无效，因此即使您让 click 事件通过您的`return true`.

[这里](https://stackoverflow.com/questions/7855744/mvc-3-running-javascript-after-validation-has-completed-but-before-the-actual-p)有一个在验证完成后但在实际发布之前运行 javascript 的示例。

```
$(function() { 
    $('#form0').submit(function() { 
        if (!$(this).valid()) { 
            // do your thing
            return true; 
        } 
    }); 
 }); 
```

ETA：阅读您的回复后，我想知道问题是否不在于验证框架认为您的页面无效，而您正试图覆盖其结论并提交。在那种情况下，我提供的代码永远不会执行，因为提交永远不会发生。

我建议尝试这样做：从模型中对应于 3 个输入字段的属性中删除所需的属性，并将您的检查逻辑移动到`submit`函数中，正如我所建议的那样。但与其说`if(!$(this).valid())`，，你只会*在表单有效的情况下执行代码。*

# matlab - 'cell' 类型输入参数的 MATLAB 未定义函数或方法 'mtimes'

> ID：12895644
> 
> 赞同：-2
> 
> 时间：2012-10-15T12:24:44.230
> 
> 标签：matlab, user-interface

我正在尝试在 GUI 中制作表格。该表必须由用户填写。当我想在 M 文件中编辑插入的数据时，出现了这个错误。

```
??? Undefined function or method 'mtimes' for input arguments of type 'cell'. 
```

我想跨四栏，把答案写在第五栏，请帮我纠正这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:56:38.667

如果您遇到与此类似的情况，则会收到错误消息：

```
a = {rand(4) 'A' 2i};
b = {rand(4) 'B' 6i};

a*b 
```

例如，您有两个[元胞数组](http://blogs.mathworks.com/loren/2006/06/21/cell-arrays-and-their-contents/)（泛型类型数据的容器），您对其应用仅为矩阵定义的运算（在本例中为乘法）。

如果要将每个“事物”与 中`a`的每个“事物”相乘`b`，则必须使用`cellfun`：

```
>> cellfun(@mtimes, a, b, 'UniformOutput', false)
ans = 
    [4x4 double]    [4290]    [-12] 
```

请注意，该函数`@mtimes`是内置`*`-operator 的别名。像这样使用时，它必须对元胞数组中的每个元素都有意义。

# c# - 如何更新 xml 元素的集合？

> ID：12895647
> 
> 赞同：0
> 
> 时间：2012-10-15T12:24:56.960
> 
> 标签：c#, xml, linq

我对在 c# 中保存 reeding xml 和 linq 有点绿色。这是我的代码：

```
 public static void EditConfiguration (DesignConfiguration design)
    {
        XDocument configXml = XDocument.Load(configXMLFileName);
        var updateData = configXml.Root.Elements("Design").Where(element => (String)element.Attribute("name") == design.DesignName).FirstOrDefault();

        if (updateData != null)
        {
            var myElements = updateData.Elements();  //All the elements under th Design node 
            configXml.Save(configXMLFileName);    
       }            
    } 
```

在 myElements 变量中有这样的元素：

```
<SourceFolder>C:\CSF_Packages</SourceFolder>
<DestinationFolder>C:\Inetpub</DestinationFolder>
<CopyLookups>True</CopyLookups>
<CopyImages>False</CopyImages>
<ImageSourceFolder>None</ImageSourceFolder>
<ImageDesinationFolder>None</ImageDesinationFolder> 
```

我想用设计配置对象中的值更新每个元素。如果我在对象中有一个值，这不会那么难，但是有这样的值：

设计.SourceFolder 设计.DesitnationFolder

等（就像元素一样）。该对象为上述元素提供了新值。对我来说很明显我应该使用 foreach 循环，但是我使用它时的结果不是我想要的......

这是我的 foreach 循环：

```
 foreach (var item in myElements )
            {
                item.SetElementValue("SourceFolder", design.SourceFolder);
            } 
```

在循环中，只有一个元素可以满足演示需求，但我想将更多元素放入循环中。这就是我得到的：

```
<SourceFolder>C:\CSF_Packages<SourceFolder>C:\CSF_Packages</SourceFolder></SourceFolder>
<DestinationFolder>None<SourceFolder>C:\CSF_Packages</SourceFolder></DestinationFolder>
<CopyLookups>True<SourceFolder>C:\CSF_Packages</SourceFolder></CopyLookups>
<CopyImages>False<SourceFolder>C:\CSF_Packages</SourceFolder></CopyImages>
<ImageSourceFolder>C:\Inetpub<SourceFolder>C:\CSF_Packages</SourceFolder></ImageSourceFolder>
<ImageDesinationFolder>None<SourceFolder>C:\CSF_Packages</SourceFolder></ImageDesinationFolder> 
```

我想拥有：

```
<SourceFolder>new_value_from the DesignConfiguration object from the SourceFolder property</SourceFolder>
<DestinationFolder>new_value_from the DesignConfiguration object from the Desitnation Folder property</DestinationFolder>
<CopyLookups>new_value_from the DesignConfiguration object from the CopyLookups property</CopyLookups> 
```

等等...请帮助有压力的菜鸟 :) 非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:58:43.900

您应该删除子 XElement，然后将新的 XElement 添加到父级。试试这些（未经测试）：

```
public static void EditConfiguration (DesignConfiguration design)
{
    XDocument configXml = XDocument.Load(configXMLFileName);
    var updateData = configXml.Root.Elements("Design").Where(element => (String)element.Attribute("name") == design.DesignName).FirstOrDefault();

    if (updateData != null)
    {
        var myElements = updateData.Elements();  //All the elements under th Design node 
        myElements.Remove();
        updateData.SetElementValue("SourceFolder", design.SourceFolder);
        updateData.SetElementValue("DestinationFolder", design.DestinationFolder);
        updateData.SetElementValue("CopyLookups", design.CopyLookups);

        configXml.Save(configXMLFileName);
   }            
} 
```

# image - 如何定义 TableViewCell 大小取决于我的图像大小

> ID：12895649
> 
> 赞同：-1
> 
> 时间：2012-10-15T12:24:57.870
> 
> 标签：image, ios5, uitableview

我在 TableViewCell 上有这个问题。我想在单元格上放一张图片，然后单元格的高度将根据图片的高度而改变。我该如何编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:29:54.257

UITableView 的`-(CGFloat)TableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:41:27.593

`UIImageView`你的牢房里可能有一个。该图像视图具有 UIImage，并且 UIImage 具有可用于检测图像高度的[size 属性。](http://developer.apple.com/library/ios/documentation/uikit/reference/UIImage_Class/Reference/Reference.html#//apple_ref/occ/instp/UIImage/size)

使用`UITableView`'s [heightForRowAtIndexPath](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView:heightForRowAtIndexPath:)方法，如[psoft](https://stackoverflow.com/a/12895717/855738)所述，您可以告诉您的单元格根据您的图像更改其高度。

使用

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath*)indexPath {
    return 100;
} 
```

所有单元格的高度均为 100 像素。如果您更改该功能并使其返回单元格中图像的高度，您将解决您的问题

# ipad - CSS 更改 ipad 上加速的元素硬件的高度

> ID：12895652
> 
> 赞同：2
> 
> 时间：2012-10-15T12:25:13.323
> 
> 标签：ipad, css, safari, hardware-acceleration, reflow

在 iPad 上开发 HTML5 应用程序时，我想更改硬件加速元素的高度。

我在子元素（绝对定位，大于父元素）上创建了一个视口（父元素，溢出：隐藏），扩展视口的高度应该显示子元素的大部分。

动画在我的桌面浏览器 (Chrome) 上看起来非常好，但是在我的 iPad (iOS 6) 上运行时，动画不是那么流畅。

下面的 JSFiddle 说明了这个问题：

[http://jsfiddle.net/schade/bqsnS/](http://jsfiddle.net/schade/bqsnS/)（使用 iPad 查看问题，使用 Chrome 查看它应该如何工作）

我已经调试了 iPad，我的结论是它做了很多回流，现在，我的结论是，无论我如何设置子元素的位置，父元素的高度总是会强制重绘 iPad 上的子元素元素。或者？

有没有人可以解决这个问题？

还是某种不错的解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:16:14.170

据我了解，您可以通过应用以下样式来强制对 iOS 上 CSS3 中的元素进行硬件加速：

```
 -webkit-transform: translateZ(0); 
```

希望这可以帮助

# python - 当芹菜工人死亡时得到通知

> ID：12895653
> 
> 赞同：1
> 
> 时间：2012-10-15T12:25:13.180
> 
> 标签：python, celery

芹菜工人死亡时在哪里得到通知的最佳地点是？

我知道这个`worker_shutdown`信号，但它是否也会在工人突然死亡时被调用？

我有这些 pdf 渲染工作人员，他们突然死亡，或者至少对远程控制命令没有反应，所以我正在寻找方法，以便在发生此类事情时得到通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:46:31.220

工人在被杀死后不能触发信号。

最好的方法是为 Nagios、Munin 或类似工具编写一个插件，以便在工人数量减少时发出通知。请参阅 Celery 文档中的监控和管理指南。

# solr - Solr - 嵌套实体需要返回两个值

> ID：12895654
> 
> 赞同：0
> 
> 时间：2012-10-15T12:25:19.397
> 
> 标签：solr

遵循实体定义：

```
<entity name="mission" dataSource="mssqlDatasource" pk="id" 
        transformer="TemplateTransformer, ClobTransformer" 
        query="SELECT m.id, m.notes, m.missionFocus,m.start_time, 
                      mar.id AS market, mar.name AS marketName 
               FROM mission m 
               INNER JOIN market mar ON m.market = mar.id">

    <field column="start_time" name="startTime" />
    <field column="market" name="market" />
    <field column="marketName" name="marketName" clob="true" />
    <field column="tableType" template="MISSION" />

    <entity name="comment" dataSource="mssqlDatasource" 
            transformer="ClobTransformer" 
            query="SELECT c.message 
                   FROM comment c 
                   WHERE c.source_id = '${mission.id}' AND c.source_type = 'mission'">
        <field name="commentMessage" column="message" clob="true" />
    </entity>

    <entity name="activity" dataSource="mssqlDatasource" 
            query="SELECT a.notes 
                   FROM activity a 
                   WHERE a.mission = '${mission.id}'">
        <field name="activityNotes" column="notes" />
    </entity>        

    <entity name="location" dataSource="mssqlDatasource" 
                query="SELECT l.name 
                       FROM location l 
                       WHERE l.id = '${activity.id}'">
        <field name="locationName" column="name" />            
    </entity>        
</entity> 
```

您看到我的问题是嵌套实体“活动”需要返回 2 个字段，即“activityNotes”和来自嵌套实体“位置”的字段，即“位置名称”。我怎么能意识到这一点？两个字段都应该被索引。只有机会合并两个字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:24:44.483

您可以在[ScriptUpdateProcessor](http://wiki.apache.org/solr/ScriptUpdateProcessor)中执行此操作。您只需在单独的字段中从 DIH 获取它们，但在 UpdateProcessor 中您可以附加它们并将其插入到第三个字段中。在 4.0 中，您应该能够在没有 java 代码的情况下使用 ScriptUpdateProcessor 做到这一点

# ios - .pkg 文件无效

> ID：12895655
> 
> 赞同：1
> 
> 时间：2012-10-15T12:25:20.787
> 
> 标签：ios, in-app-purchase

我在向 Apple 服务器发送 .pkg 时遇到问题。ApplicationLoader 说档案不包含有效的应用内购买内容包。我无法弄清楚问题是什么。

我是否错误地构建了软件包？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:06:14.290

我认为本教程可以帮助你，它对我有用。[http://www.techotopia.com/index.php/Configuring_and_Creating_App_Store_Hosted_Content_for_iOS_6_In-App_Purchases](http://www.techotopia.com/index.php/Configuring_and_Creating_App_Store_Hosted_Content_for_iOS_6_In-App_Purchases)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-26T10:06:13.727

请参阅this，它非常清晰和详细：http: [//developer.xamarin.com/guides/ios/platform_features/introduction_to_ios_6/changes_to_storekit/](http://developer.xamarin.com/guides/ios/platform_features/introduction_to_ios_6/changes_to_storekit/)

# javascript - iOS NSDictionary 数据类型到 phonegap 中的 javascript。如何？

> ID：12895657
> 
> 赞同：0
> 
> 时间：2012-10-15T12:25:30.357
> 
> 标签：javascript, ios, cordova, ios4, phonegap-plugins

phonegap 的新手。关于脚本的知识较少。

在 iOS 本机代码中，将 NSDictionary 和 CDVCommandStatus_OK 一起传递给 java 脚本，如下所示。

```
 NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys:@"kolaveri", @"Name",nil];
 result = [CDVPluginResult resultWithStatus:CDVCommandStatus_OK messageAsDictionary:dict];
 [self writeJavascript:[result toErrorCallbackString:callbackId]]; 
```

在 JavaScript 中，

正在调用以下函数：

```
 function MySuccessHandler (result) 
    { 
        alert("SUCCESS: \r\n"+result ); 
    } 
```

传递 NSString 时，警报消息中也会打印相同的内容。

通过 NSDictionary 后，如何获取 javascript 中的键/值？

它在警报消息中打印**[object Object] 。**

请提供一些关于它的指示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-22T23:10:04.357

尝试调用`alert("SUCCESS: \r\n" + JSON.stringify(result) );`打印出 JSON 对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:29:54.780

将您的转换`NSDictionary`为 JSON 字典/对象。如果你使用iOS5，你可以使用`NSJSONSerialization`这个。

# http - 如何将来到 EBS 的 http 请求发送到 https 请求？

> ID：12895658
> 
> 赞同：0
> 
> 时间：2012-10-15T12:25:31.597
> 
> 标签：http, amazon-web-services

我正在使用 Amazon Web 服务来部署我的应用程序有人可以告诉我应该如何配置负载均衡器，以便它将每个 HTTP 请求重定向到 HTTPS 到我的 EBS 服务器应用程序。

提前致谢。

# javascript - 如何根据对象的数量排列对象

> ID：12895660
> 
> 赞同：0
> 
> 时间：2012-10-15T12:25:35.273
> 
> 标签：javascript, nodes

我目前正在开发一个关于与服务器状态相关的用户界面的 javascript 项目。我有一个主节点，所有节点都连接到它，还有一些节点。节点的数量可以是任意的，比如说在 5 到 50 之间。我希望它们自动安装，并且主节点应该放在中间。请点击[链接](http://postimage.org/image/cwuxn9qqf/)。

正如您在图中看到的，所有连接到主节点的节点，以及它们的大小和位置都被安排在视图中。

我可以使用任何库、示例或代码片段吗？
- 或 -
关于如何构建它的任何建议？

编辑：我只是在问，有没有什么算法可以让我将一些对象放入屏幕？

PS：抱歉标签，我无法决定放什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:02:07.217

您可以尝试[InfoVis Toolkit](http://philogb.github.com/jit/)。它支持大量的可视化样式。演示在[这里](http://philogb.github.com/jit/demos.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:13:54.130

与往常一样，最好的方式就是你知道的方式。所以我实现了一种算法，通过使用一些简单的物理力保持距离几乎相同，适合所有节点。主节点始终围绕中心。这是[jsfiddle](http://jsfiddle.net/7HW3J/6/)。尝试 5 到 50 之间的值。大部分情况下效果很好，但有时会出现错误。

# php - Magento 管理面板 PayPal 配置布局混乱

> ID：12895662
> 
> 赞同：0
> 
> 时间：2012-10-15T12:25:50.733
> 
> 标签：php, magento-1.7

我安装了 Magento 1.7，整个 Paypal 布局都搞砸了，我不知道原因。我使用 Magento connect 重新安装了所有模块。不走运，我从原始 Magento 安装再次上传了核心文件夹。“Mage_Paypal”模块已启用。清除所有缓存。此外，当我单击配置按钮时未显示设置。

问题仍然存在。

谁能帮我解决这个问题？

这是屏幕截图。

![屏幕一](../Images/428e0d5aec39d3382ce5cc88232102a0.png)

* * *

![屏幕-2](../Images/58017525a70149081a8935e520936b99.png)

* * *

![屏幕 3](../Images/51e36be579138ba676d586cd30f7185a.png)

![屏幕 4](../Images/ea495725528bbeac7d3333721cb80ea9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:33:19.423

我有同样的问题。经过一番搜索，我不得不将 Avalanche 主题更新到 1.3.2 版（对于 magento 1.7+）。检查[https://fastdivision.com/themes/avalanche/members/download/](https://fastdivision.com/themes/avalanche/members/download/)。

希望这可以帮助

# delphi - 如何将字符串转换为 TColor 值？

> ID：12895673
> 
> 赞同：14
> 
> 时间：2012-10-15T12:26:34.937
> 
> 标签：delphi

我正在创建一个 Delphi 表单，并希望在运行时为其分配背景颜色。这段代码：

```
Form1.Color := clSkyBlue; 
```

效果很好。我的问题是我已将颜色名称作为字符串存储在表格中。因此，当我从表中获取颜色名称并将其分配给 时`Form1.Color`，上述语句变为：

```
var
  ColorName: string;
....
Form1.Color := ColorName; 
```

这会导致编译时错误。

如何将字符串转换为`TColor`值？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-15T12:30:39.410

您可以使用以下转换函数（均适用于颜色常量）：

*   该[`StringToColor`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Graphics.StringToColor)函数用于将颜色的字符串表示形式转换为[`TColor`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Graphics.TColor)值
*   [`ColorToString`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Graphics.ColorToString)当您需要将[`TColor`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Graphics.TColor)值转换为字符串表示时使用的函数

在您的情况下，您需要使用以下[`StringToColor`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Graphics.StringToColor)功能：

```
Form1.Color := StringToColor('clSkyBlue'); 
```

# apache - Apache mod_proxy url 编码

> ID：12895674
> 
> 赞同：13
> 
> 时间：2012-10-15T12:26:44.773
> 
> 标签：apache, url-encoding, mod-proxy

我有一个 REST 服务，它接受 /{parameter} 形式的参数

还有 Apache2 将请求转发到网络服务

```
<VirtualHost *:9091>
  AllowEncodedSlashes NoDecode
  LogLevel debug
  ProxyPass /webservice balancer://api/webservice

  <Proxy balancer://api>
     BalancerMember http://localhost:8030
  </Proxy>
</VirtualHost> 
```

参数可能包含编码字符，例如 %2f (/)

问题是 Apache 再次对这些字符进行编码，Webservice 收到 %252F 而不是 %2F

```
[Mon Oct 15 13:59:24 2012] [debug] mod_proxy_balancer.c(46): proxy: BALANCER: canonicalising URL //api/webservice/Interface GigabitEthernet1%2F0%2F2
[Mon Oct 15 13:59:24 2012] [debug] mod_proxy_balancer.c(581): proxy: BALANCER (balancer://api) worker (http://localhost:8030) rewritten to http://localhost:8030/Interface%20GigabitEthernet1%252F0%252F2%20Utilization 
```

如果我直接请求 Web 服务，Tomcat/Jetty 会处理它并找到正确的参数。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-15T13:41:49.353

通过指定解决

```
ProxyPass /webservice balancer://api/webservice nocanon 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-10T07:45:54.137

有点跑题了，因为这并不能解决斜杠的问题，但是如果其他人遇到与我相同的问题，我无论如何都会在此处添加它。

我有一个类似的问题，当通过 apache 代理传递时，url 参数中的瑞典特殊字符 (åäö) 未正确处理。事实证明，apache 运行良好，但在接收 tomcat 实例中，AJP 连接器缺少 URIEncoding 配置。

从我的 tomcat server.xml ：

```
<Connector port="8009" protocol="AJP/1.3" redirectPort="8080" URIEncoding="UTF-8"/> 
```

# php - 如何保证并发线程在 MYSQL 中不会得到相同的值？

> ID：12895692
> 
> 赞同：0
> 
> 时间：2012-10-15T12:28:35.107
> 
> 标签：php, mysql, sql, innodb

假设我的订单表中的最后一行是

```
Order_ID      Product
  555          Apple 
```

我如何确保在确切时间发生的 2 个订单不会获得相同的 Order_ID，即下一个订单的 556，因为这就是发生在我身上的事情。我的表使用 INNODB。

实际上 Order_ID 是一个自增字段。我正在使用 Show Table Status 查询并使用 [Auto-increment] 来获取下一个 Order_iD。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:31:05.843

定义`Order_ID`具有属性的列[`AUTO_INCREMENT`](http://dev.mysql.com/doc/en/example-auto-increment.html)并让 MySQL 为您分配值（然后`last_insert_id`在成功插入后通过询问驱动程序来检索）：

```
ALTER TABLE orders MOFIFY Order_ID BIGINT UNSIGNED NOT NULL AUTO_INCREMENT; 
```

然后，要插入记录，您只需不提供`Order_ID`值，它将自动分配：

```
INSERT INTO orders (Product) VALUES ('Apple'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T12:31:37.630

我相信您正在“硬编码” order_id + 1 ...

请在您的表中使用 Auto_increment，它会保证您不会重复任何 order_id

[http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)

在你的情况下，复制你的表（备份），改变你的表并添加一个 auto_increment 然后再次导入

# php - jQuery File Upload by bluimp，如何替换而不是重命名

> ID：12895693
> 
> 赞同：6
> 
> 时间：2012-10-15T12:28:35.963
> 
> 标签：php, jquery, upload

首先可以在这里找到 jQuery 插件：

[https://github.com/blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)

我正在使用脚本的 PHP 版本，我正在尝试替换具有相同名称的图像，而不是重命名它们。

我想我找到了重命名的功能，但我尝试的编辑不起作用。

```
 protected function upcount_name_callback($matches) {
        $index = isset($matches[1]) ? intval($matches[1]) + 1 : 1;
        $ext = isset($matches[2]) ? $matches[2] : '';
        return ' ('.$index.')'.$ext;
    }

    protected function upcount_name($name) {
        return preg_replace_callback(
            '/(?:(?: \(([\d]+)\))?(\.[^.]+))?$/',
            array($this, 'upcount_name_callback'),
            $name,
            1
        );
    } 
```

有什么建议么？我到处寻找这个，但无济于事。

链接到执行上传的 php 类： [https ://github.com/blueimp/jQuery-File-Upload/blob/master/server/php/upload.class.php](https://github.com/blueimp/jQuery-File-Upload/blob/master/server/php/upload.class.php)

有什么建议么？

编辑：

我试图只在这些函数上返回 null ，但这只是挂起脚本，可能是因为如果文件名相同，它不知道该怎么做。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-11T08:00:37.217

您可以更改他们的 PHP 服务器端脚本以覆盖文件，而不是创建新的唯一文件名。只需更改上传处理程序类函数`get_file_name`：

原始功能：

```
 protected function get_file_name($file_path, $name, $size, $type, $error,
        $index, $content_range) {
    $name = $this->trim_file_name($file_path, $name, $size, $type, $error,
        $index, $content_range);
    return $this->get_unique_filename(
        $file_path,
        $this->fix_file_extension($file_path, $name, $size, $type, $error,
            $index, $content_range),
        $size,
        $type,
        $error,
        $index,
        $content_range
    );
} 
```

将其更改为：

```
protected function get_file_name($file_path, $name, $size, $type, $error,
            $index, $content_range) {
        $name = $this->trim_file_name($file_path, $name, $size, $type, $error,
            $index, $content_range);
        return $name;
    } 
```

这样，如果上传的文件名与服务器上的现有文件相同，现有文件将被覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-08T04:34:13.763

在文件 index.php 中使用此自定义函数需要 UploadHandler.php

```
protected function trim_file_name($file_path, $name, $size, $type, $error,
            $index, $content_range) {

    // Remove path information and dots around the filename, to prevent uploading
    // into different directories or replacing hidden system files.
    // Also remove control characters and spaces (\x00..\x20) around the filename:
    $name = trim(basename(stripslashes(unique_custom_file_name)), ".\x00..\x20");
    // Use a timestamp for empty filenames:
    if (!$name) {
        $name = str_replace('.', '-', microtime(true));
    }
    return $name;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-16T15:35:33.753

您还可以使用覆盖**作为这样的选项**：

```
$options = array(
  'overwrite' => $overwrite
);
$upload_handler = new UploadHandler($options); 
```

在 UploadHandler.php 中：添加默认参数

```
 function __construct($options = null,...){
            ...
            'overwrite' => false,
            ...
    } 
```

然后将 get_file_name() 函数替换为

```
 protected function get_file_name($file_path, $name, $size, $type, $error,
            $index, $content_range) {
        $name = $this->trim_file_name($file_path, $name, $size, $type, $error,
            $index, $content_range);
        if($this->options['overwrite'])
            return $name;
        else
            return $this->get_unique_filename(
                $file_path,
                $this->fix_file_extension($file_path, $name, $size, $type, $error,
                    $index, $content_range),
                $size,
                $type,
                $error,
                $index,
                $content_range
            );
    } 
```

问候

# python - Python：以指定格式打印列表列表

> ID：12895694
> 
> 赞同：3
> 
> 时间：2012-10-15T12:28:43.593
> 
> 标签：python, list, python-2.7

我有一个 list 列表`l = [['a','b', 'c'], 'd','e', ['f', 'g']]`。列表元素并不总是必须是字母表。

现在，我使用了以下代码：

```
>>> index =1
>>> for i in l:
...     if isinstance(i, list):
...             for j in i :
...                     print index, j
...                     index = index + 1
...     else:
...             print index, i
...             index = index + 1
... 
1 a
2 b
3 c
4 d
5 e
6 f
7 g 
```

您可以看到我打印出结果的格式。

另一个例子：

```
l = [['aaa','bbb','xxx'], 'ddd']

Output = 

1 aaa
2 bbb
3 xxx
4 ddd 
```

我的问题是有没有更好的方法来做到这一点或`built-in`python 中的任何功能。

PS：列表将只有 1 级嵌套。所以，`[ [a, [b,c] ], d, e ]`是不可能的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T12:31:07.573

您可以使用[`itertools.chain.from_iterable()`](http://docs.python.org/py3k/library/itertools.html#itertools.chain.from_iterable)and轻松完成此操作[`enumerate()`](http://docs.python.org/py3k/library/functions.html#enumerate)：

```
>>> import itertools
>>> l = [['a','b', 'c'], 'd','e', ['f', 'g']]
>>> for index, value in enumerate(itertools.chain.from_iterable(l), 1):
...     print(index, value)
... 
1 a
2 b
3 c
4 d
5 e
6 f
7 g 
```

编辑：正如 mgilson 指出的那样，这不适用于将多字符串作为顶层元素。我认为最好的解决方案是像他在回答中那样使用生成器，但是，我认为字符串是特例，而不是列表，所以我会颠倒逻辑：

```
def flatten(seq):
    for item in seq:
        if not isinstance(item, str): #Use `basestring` in 2.x
            yield from item
            #For Python <3.3
            #for subitem in item:
            #    yield subitem
        else:
            yield item 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-15T12:32:18.767

我会创建一个生成器来展平列表：

```
def flatten(lst):
   for i in lst:
       if(isinstance(i,list)):
          for x in i:
              yield x
       else:
           yield x 
```

然后我将`enumerate`用于打印：

```
for idx,item in enumerate(flatten(lst),1):
    print idx,item 
```

# animation - raphaeljs 从第一个动画结束的地方继续动画

> ID：12895695
> 
> 赞同：0
> 
> 时间：2012-10-15T12:28:47.903
> 
> 标签：animation, path, raphael

我有这个矩形，在第一个动画移动到新位置“x”之后，第二个动画在延迟 2 秒后开始，但第二个动画从原始位置开始，而不是从第一个动画结束的地方开始。是否有任何代码可以将形状的位置设置为第一个动画结束并从该位置恢复第二个动画？

JS[小提琴](http://jsfiddle.net/2yzm7/)

```
window.onload = function(){
    var paper = Raphael(0,0,600,400)

    var a = paper.path("M220,100 v20h-100v-20z");

    var anim = Raphael.animation({transform:'t160,10s2'}, 1000, "elastic");
    a.animate(anim.delay(1000));

    var anim2 = Raphael.animation({transform:'t10,190s2'}, 1000, "bounce");
    a.animate(anim2.delay(3000));
}​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:49:20.870

使用回调函数...

在第一个动画的回调函数中调用第二个动画，....[更新了 Fiddle](http://jsfiddle.net/2yzm7/2/)

# grails - Grails yui-minify-resources 和 lesscss-resources 冲突

> ID：12895696
> 
> 赞同：2
> 
> 时间：2012-10-15T12:28:52.220
> 
> 标签：grails, resources, yui

我有我的 grails 应用程序，它使用*lesscss-resources*插件（v 1.3.0.3）。我还想使用*yui-minify-resources*插件（v. 0.1.5）。我使用以下方法安装了插件：

```
grails install-plugin yui-minify-resources 
```

但是现在当我尝试启动应用程序时，我遇到了一个异常：

```
2012-10-15 12:58:48,901 ERROR org.codehaus.groovy.grails.plugins.DefaultGrailsPluginManager  - Error configuring dynamic methods for plugin [resources:1.1.6]: java.lang.NoSuchMethodError: org/mozilla/javascript/Parser.parse(Ljava/io/Reader;Ljava/lang/String;I)Lorg/mozilla/javascript/ScriptOrFnNode;
org.codehaus.groovy.runtime.InvokerInvocationException: java.lang.NoSuchMethodError: org/mozilla/javascript/Parser.parse(Ljava/io/Reader;Ljava/lang/String;I)Lorg/mozilla/javascript/ScriptOrFnNode;
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.NoSuchMethodError: org/mozilla/javascript/Parser.parse(Ljava/io/Reader;Ljava/lang/String;I)Lorg/mozilla/javascript/ScriptOrFnNode;
at com.yahoo.platform.yui.compressor.JavaScriptCompressor.parse(JavaScriptCompressor.java:312)
at com.yahoo.platform.yui.compressor.JavaScriptCompressor.<init>(JavaScriptCompressor.java:533)
at com.blockconsult.yuiminifyresources.YuiJsMinifyResourceMapper$_map_closure1.doCall(YuiJsMinifyResourceMapper.groovy:29)
at com.blockconsult.yuiminifyresources.YuiJsMinifyResourceMapper.map(YuiJsMinifyResourceMapper.groovy:28)
at org.grails.plugin.resource.mapper.ResourceMapper.invoke(ResourceMapper.groovy:139)
at org.grails.plugin.resource.mapper.ResourceMapper.invokeIfNotExcluded(ResourceMapper.groovy:128)
at org.grails.plugin.resource.ResourceProcessor.applyMappers(ResourceProcessor.groovy:587)
at org.grails.plugin.resource.ResourceProcessor.prepareResource(ResourceProcessor.groovy:533)
at org.grails.plugin.resource.ResourceProcessor$_prepareSingleDeclaredResource_closure12.doCall(ResourceProcessor.groovy:602)
at org.grails.plugin.resource.util.ResourceMetaStore.addDeclaredResource(ResourceMetaStore.groovy:29)
at org.grails.plugin.resource.ResourceProcessor.prepareSingleDeclaredResource(ResourceProcessor.groovy:600)
at org.grails.plugin.resource.ResourceProcessor$_prepareResourceBatch_closure14.doCall(ResourceProcessor.groovy:625)
at org.grails.plugin.resource.ResourceProcessorBatch.each(ResourceProcessorBatch.groovy:8)
at org.grails.plugin.resource.ResourceProcessor.prepareResourceBatch(ResourceProcessor.groovy:621)
at org.grails.plugin.resource.ResourceProcessor.resourcesChanged(ResourceProcessor.groovy:804)
at org.grails.plugin.resource.ResourceProcessor.loadModules(ResourceProcessor.groovy:800)
at org.grails.plugin.resource.ResourceProcessor.reloadAll(ResourceProcessor.groovy:1056)
at ResourcesGrailsPlugin$_closure3.doCall(ResourcesGrailsPlugin.groovy:172)
... 5 more 
```

我认为我有这个错误是因为（文档如何说）YUI minify 使用了 Rhino 的替代版本，这是 lesscss 资源插件的依赖项。
我试图排除依赖，但只是尝试了，因为它似乎不起作用。
这是我的*Config.groov*：

```
plugins{
    compile (":lesscss-resources:1.3.0.3"){
        excludes 'rhino:1.7R3'
    }
} 
```

有人处理过同样的情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-20T13:54:10.790

我已经解决了这个问题，将 rhino 依赖项直接放在 lib 文件夹中。您可以从[https://developer.mozilla.org/en-US/docs/Rhino/Download_Rhino下载它](https://developer.mozilla.org/en-US/docs/Rhino/Download_Rhino)

# css - 谷歌网络字体在 IE 中不起作用

> ID：12895698
> 
> 赞同：2
> 
> 时间：2012-10-15T12:28:54.390
> 
> 标签：css, google-webfonts

我在使用 Google 网络字体时遇到了一些奇怪的行为。现在我像嵌入样式表一样使用它，它工作正常。

```
<link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300|Orienta' rel='stylesheet' type='text/css'> 
```

但是当我将这个 @font-face 值用于我的 css 文件时，它无法正常工作。

```
@font-face {
  font-family: 'Source Sans Pro';
  font-style: normal;
  font-weight: 300;
  src: local('Source Sans Pro Light'), local('SourceSansPro-Light'), url(http://themes.googleusercontent.com/static/fonts/sourcesanspro/v4/toadOcfmlt9b38dHJxOBGNbE_oMaV8t2eFeISPpzbdE.woff) format('woff');
}
@font-face {
  font-family: 'Orienta';
  font-style: normal;
  font-weight: 400;
  src: local('Orienta'), local('Orienta-Regular'), url(http://themes.googleusercontent.com/static/fonts/orienta/v1/nPJ0J30J_zQZtBhztPPbaA.woff) format('woff');
} 
```

这些代码发生了什么，我认为两者的作用相同。有什么想法吗？

**笔记。我还计划将此字体下载到我的系统并从服务器加载它。提前致谢。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T13:35:12.330

您的字体需要具有 .eot 扩展名才能在 IE 中使用。您可以在此处使用生成器[http://www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T14:07:30.730

IE 不理解 WOFF 格式。因此，您应该使用处理不同字体格式的 CSS 代码，就像 Google 代码一样。最简单的方法是访问 Google Web Fonts 网站并在那里下载字体包；它包含不同的格式以及使用它们的 CSS 代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T05:49:27.240

**你是对的@Caelea，我需要为我的字体添加一个 .eot 扩展名才能在 IE 中工作。**

最后深入挖掘问题，我得到了解决方案。我只是将下面的 url 粘贴到 IE 的导航栏中。

```
http://fonts.googleapis.com/css?family=Source+Sans+Pro:300|Orienta 
```

然后我得到了 IE（**带有 .eot 文件**）和 webkit 浏览器的相关 css。我下载了每种字体并保存到我的应用程序代码中。现在它在现场工作正常

见下面的代码

```
@font-face {
  font-family: 'Source Sans Pro';
  font-style: normal;
  font-weight: 300;
  src: url(http://themes.googleusercontent.com/static/fonts/sourcesanspro/v4/toadOcfmlt9b38dHJxOBGBlTL9oEQvYTI0YAW1-Ysv0.eot);
  src: local('Source Sans Pro Light'), local('SourceSansPro-Light'), url(http://themes.googleusercontent.com/static/fonts/sourcesanspro/v4/toadOcfmlt9b38dHJxOBGBlTL9oEQvYTI0YAW1-Ysv0.eot) format('embedded-opentype'), url(http://themes.googleusercontent.com/static/fonts/sourcesanspro/v4/toadOcfmlt9b38dHJxOBGNbE_oMaV8t2eFeISPpzbdE.woff) format('woff');
}
@font-face {
  font-family: 'Orienta';
  font-style: normal;
  font-weight: 400;
  src: url(http://themes.googleusercontent.com/static/fonts/orienta/v1/4h2F_2nQc3QO1h97-0ufEg.eot);
  src: local('Orienta'), local('Orienta-Regular'), url(http://themes.googleusercontent.com/static/fonts/orienta/v1/4h2F_2nQc3QO1h97-0ufEg.eot) format('embedded-opentype'), url(http://themes.googleusercontent.com/static/fonts/orienta/v1/nPJ0J30J_zQZtBhztPPbaA.woff) format('woff');
} 
```

谢谢大家的即时回复。非常感谢@Jukka K. Korpela 与我分享了一个好主意

**编辑**

为了获得谷歌字体eot，我在IE中浏览了字体网站，所以谷歌在那里加载了IE支持的字体:)。

# wordpress - wp-cron.php 什么时候在 Wordpress 中运行？

> ID：12895706
> 
> 赞同：7
> 
> 时间：2012-10-15T12:29:18.923
> 
> 标签：wordpress, cron, cron-task

我需要有关 wp-cron 的详细信息。我用于`wp_schedule_event` 自动发送电子邮件。

但`wp_schedule_event`仅在用户访问我们的网站时触发。如何让 cron 自动运行？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-15T14:10:47.637

`wp_cron`并不*像*名称所暗示的那样一直在后台运行。对于像 WordPress 这样的 Web 应用程序来说，这种调度是不可能的，因为 WordPress 脚本只在有人查看站点时运行，而在没有人查看时它不会运行。取而代之的是，当 WordPress 脚本启动时，会检查 cron 值，如果一个（过期）到期，它就会被执行。它可能会迟到几分钟或几个小时，但这就是它的工作方式。`The wp_cron`基本上，工作一有机会就运行。

如果您想在有人访问该站点时运行脚本，那么您根本不需要`wp_cron`。`wp_cron`当有人访问时不会触发。这是一个模糊计时器。要在有人访问时运行，您将不得不考虑一些问题。您可以在主题的 functions.php 中放置一个函数，但它会在每次页面加载时运行，而不仅仅是在访问的第一次加载时运行。当有人登录时，您可以挂钩`wp_login`并运行您的功能。您将必须首先决定什么是“访问”。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-15T14:11:38.260

它将在预定时间之后的第一次访问中运行。
1.- 是的，自动运行，但由访问者触发。
2.- 按计划发送电子邮件就足够了。

* * *

对于真正的 cron 行为，您可以使用运行脚本`crontab`

```
crontab -e
wget -q http://domain.com/wp-content/some-path/your-script.php 
```

-q：安静（无输出）。只需运行脚本。否则你的服务器中会有很多文件（wget pull files）

提示：[http ://www.thegeekstuff.com/2011/07/php-cron-job/](http://www.thegeekstuff.com/2011/07/php-cron-job/)

* * *

使用 cpanel：[http ://wiki.hostbillapp.com/index.php?title=Settings:_cPanel:_Cron_job](http://wiki.hostbillapp.com/index.php?title=Settings:_cPanel:_Cron_job)

![在此处输入图像描述](../Images/b73602c1c916ce0bb68961072bce00e3.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-19T06:22:55.737

似乎每个人都刚刚回答了 *nix cron 的设置方式。真正的答案应该是特定于wordpress的。在 wp-config.php 中有一个设置可以完成

```
define('DISABLE_WP_CRON', 'true'); 
```

现在，如果您可以像 Igor Parra 回答的那样配置 *nix cron，则后台和偏移 cron 作业将不再运行，因为在控制面板或 crontab 中设置的时间将生效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T13:57:48.683

在文件中写入功能后，您还需要设置 cron ..

参考：[http ://wp.tutsplus.com/articles/insights-into-wp-cron-an-introduction-to-scheduling-tasks-in-wordpress/](http://wp.tutsplus.com/articles/insights-into-wp-cron-an-introduction-to-scheduling-tasks-in-wordpress/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T00:40:42.570

真实的东西总是更可取的，但它可以在 Wordpress（纯 PHP）中完成：

[http://pippinsplugins.com/improved-cron-plugin-review/](http://pippinsplugins.com/improved-cron-plugin-review/)

# post - 哪个免费的嵌入式 Web 服务器可以处理 *REALLY LARGE* POST 请求？

> ID：12895707
> 
> 赞同：1
> 
> 时间：2012-10-15T12:29:19.380
> 
> 标签：post, file-upload, webserver, embedded-linux, large-files

我有一个嵌入式 Linux 设备，没有大量 RAM，但有相当大的磁盘空间，但没有交换。它需要通过 Web 界面接受大文件上传（可能是 GB）。我遇到的大多数 Web 服务器通过将所有流数据保存在内存中来处理大型 POST 请求，然后我的 CGI 应用程序将其移动到磁盘。是否有任何 Web 服务器可以通过将大型 POST 请求流式传输到磁盘而不需要内存来处理大型 POST 请求，或者我是否必须沿着使用应用程序直接处理文件上传 http 流的路线走下去？

我仍然希望维护应用程序代码已经在使用的 CGI 接口，所以一个多合一的服务器和应用程序是不可能的。它也应该是免费的...

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T05:32:27.493

还有这个产品：[http](http://uweb.workware.net.au/) ://uweb.workware.net.au/ ，它支持 mmap() 接受无限大小的 POST 请求，由磁盘而不是物理内存支持。【披露：我公司开发销售此产品】

# tire - Tire 相当于索引中的 Thinking_Sphinx 属性

> ID：12895710
> 
> 赞同：0
> 
> 时间：2012-10-15T12:29:28.080
> 
> 标签：tire

轮胎宝石中是否有任何类似于[Thinking_Sphinx 属性](http://freelancing-god.github.com/ts/en/indexing.html#attributes)中索引的属性（具有）的东西轮胎 的过滤器是否具有相同的目的？请在这个问题上帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T04:36:02.080

我对Thinking Sphinx并不是特别熟悉，但是...

在这里查看：

[https://github.com/karmi/tire](https://github.com/karmi/tire)

```
class Article < ActiveRecord::Base
  # ...

  def to_indexed_json
    names      = author.split(/\W/)
    last_name  = names.pop
    first_name = names.join

    {
      :title   => title,
      :content => content,
      :author  => {
        :first_name => first_name,
        :last_name  => last_name
      }
    }.to_json
  end
end 
```

在索引中提供自定义定义允许您在发送的链接中使用 :as 功能。

为了过滤，您需要添加一个过滤器，然后应用它，例如通过一个方面。

# java - 将 Class 属性转换为 Field

> ID：12895720
> 
> 赞同：0
> 
> 时间：2012-10-15T12:29:57.537
> 
> 标签：java, field

我可以将`Class`属性转换为适当的`Field` [类](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/reflect/Field.html)吗？

例如考虑以下代码：

```
class Test {
    Integer A;

    void init() {
        Field fA = ???;
    }
} 
```

我想`fA`描述一下`Test.A`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T12:31:54.397

```
Field fA = Test.class.getDeclaredField("A"); 
```

# castle-windsor - 温莎城堡配置工厂

> ID：12895723
> 
> 赞同：0
> 
> 时间：2012-10-15T12:30:15.887
> 
> 标签：castle-windsor

我有一个场景，我不知道如何最好地使用 Castle 来解决。我正在尝试根据从外部系统检索到的 id 来解析类型。棘手的部分是多个 id 与相同的具体类型相关。

到目前为止，这是我想出的。这只是感觉有点不对劲。我不喜欢我需要调用 ResolveAll 的事实。

```
 [TestFixture]
public class TestWindsor
{

    [Test]
    public void AddGreenResolverToContainer_ShouldResolveCorrectTypeAndTypeId()
    {
        //---------------Set up test pack-------------------
        IWindsorContainer container = new WindsorContainer();
        //---------------Assert Precondition----------------

        //---------------Execute Test ----------------------
        container.Register(Component.For<IResolver>()
                               .ImplementedBy<TestOneResolver>()
                               .DependsOn(new {typeId = "1"}));
        //---------------Test Result -----------------------
        var actual = container.Resolve<IResolver>();
        Assert.IsInstanceOf<TestOneResolver>(actual);
        Assert.AreEqual("1", actual.typeId);
    }

    [Test]
    public void AddTwoNamedGreenResolverToContainer_ShouldResolveTwoTypes()
    {
        //---------------Set up test pack-------------------
        IWindsorContainer container = new WindsorContainer();
        //---------------Assert Precondition----------------

        //---------------Execute Test ----------------------
        container.Register(Component.For<IResolver>()
                               .ImplementedBy<TestOneResolver>()
                               .DependsOn(new {typeId = "1"}).Named("tageventstatusresolver"));
        container.Register(Component.For<IResolver>()
                               .ImplementedBy<TestOneResolver>()
                               .DependsOn(new {typeId = "2"}).Named("second"));            
        container.Register(Component.For<IResolver>()
                               .ImplementedBy<TestTwoResolver>()
                               .DependsOn(new {typeId = "1122"}).Named("redFirst"));
        container.Register(Component.For<IResolverFactory>()
                                    .ImplementedBy<ResolverFactory>()
                                    .DependsOn(new { resolvers=container.ResolveAll<IResolver>()}));

        //---------------Test Result -----------------------
        var actual = container.Resolve<IResolverFactory>();
        var resolver = actual.Create("1");
        Assert.IsInstanceOf<TestOneResolver>(resolver);
    }

}

public interface IResolverFactory
{
    IResolver Create(string typeId);
}

public class ResolverFactory : IResolverFactory
{
    private readonly IResolver[] _resolvers;

    public ResolverFactory(IResolver[] resolvers)
    {
        _resolvers = resolvers;
    }

    public IResolver Create(string typeId)
    {
        return _resolvers.Where(resolver => resolver.typeId == typeId).FirstOrDefault();
    }
}

public enum ResolutionStatus
{
    Red,
    Green,
    Amber
}

public interface IResolver
{
    string typeId { get; }
    ResolutionStatus Resolve();
}

public class TestOneResolver : IResolver
{
    public TestOneResolver(string typeId)
    {
        this.TypeId = typeId;
    }

    public string TypeId { get; private set; }

    public ResolutionStatus Resolve()
    {
        return ResolutionStatus.Green;
    }
}

public class TestTwoResolver : IResolver
{
    public TestTwoResolver(string typeId)
    {
        TypeId = typeId;
    }

    public string TypeId { get; private set; }

    public ResolutionStatus Resolve()
    {
        return ResolutionStatus.Red;
    }
} 
```

有没有人有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:51:23.167

将组件名称设置为 typeId 值并按照[此方法](https://stackoverflow.com/questions/12711840/can-i-use-typed-factory-facility-to-return-implementation-based-on-enum-parame/12724541#12724541)通过组件名称创建类型化工厂。

# doctrine-orm - Doctrine 2 cascade={''remove"} 似乎不起作用

> ID：12895724
> 
> 赞同：16
> 
> 时间：2012-10-15T12:30:15.870
> 
> 标签：doctrine-orm

嗨，我有以下课程

```
namespace MP\User\RegistrationBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\ArrayCollection;
use Doctrine\Common\Persistence\PersistentObject;
use MP\Services\SiteAdapterBundle\Util\String;
/**
 * @ORM\Table(name="customer")
 * @ORM\Entity(repositoryClass="MP\User\RegistrationBundle\Repositories\CustomerRepository")
 * @ORM\HasLifecycleCallbacks
 */
class Customer extends PersistentObject
{

    /**
     * @var string $id
     * @ORM\Id
     * @ORM\Column(name="icustomer_id", type="integer")
     */
    protected $id;

    /**
     * @var string $addresses
     * @ORM\OneToMany(targetEntity="MP\User\RegistrationBundle\Entity\Address", mappedBy="customer", cascade={"remove"})
     */
    protected $addresses; 
```

有以下关系

```
/**
 * MP\User\RegistrationBundle\Entity
 */
namespace MP\User\RegistrationBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Persistence\PersistentObject;

/**
 * @ORM\Table(name="custdeladd") 
 * @ORM\Entity(repositoryClass="MP\User\RegistrationBundle\Repositories\AddressRepository")
 */
class Address extends PersistentObject
{
      /**
       * @var integer $suffix
       * @ORM\Column(name="isuffix", type="integer") 
       * @ORM\Id
       */
      protected $suffix;

      /**
       * @var object $customer
       * @ORM\ManyToOne(targetEntity="MP\User\RegistrationBundle\Entity\Customer", inversedBy="addresses", cascade={"persist"})
       * @ORM\JoinColumn(name="icustomer_id", referencedColumnName="icustomer_id")
       */
      protected $customer;
} 
```

有谁知道为什么当客户被删除时地址不是？非常感谢

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-10-16T09:37:14.657

您的关系定义似乎很好。删除客户的方式是什么？我的意思是 Doctrine 没有直接在数据库中设置“ON DELETE CASCADE”。因此，如果您以“教义”以外的其他方式删除客户实体，评论将不会被删除。

您可以通过添加注释告诉教义直接在数据库中设置它：

```
@ORM\JoinColumn(name="icustomer_id", referencedColumnName="icustomer_id", onDelete="CASCADE") 
```

但是，如果您尝试以正确的方式删除实体，这仍然不起作用，请尝试将“orphanRemoval”添加为true，它应该会有所帮助：

```
// Customer.php
/**
 * @var string $addresses
 * @ORM\OneToMany(targetEntity="MP\User\RegistrationBundle\Entity\Address", mappedBy="customer", cascade={"remove"}, orphanRemoval=true)
 */
protected $addresses; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-03-10T23:32:58.847

我在让它工作时遇到了很多麻烦。以下几点可能会对遇到类似问题的人有所帮助：

1.  拥有实体需要`@OneToMany( ... cascade={"remove"}`或`cascade={"all"} )`
2.  子实体也需要`@JoinColumn(... onDelete="CASCADE")`
3.  此外，如果您正在修改该`onDelete="CASCADE"`部分，我相信您需要在更改生效之前更新您的架构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-09T12:14:59.540

我尝试了上面的答案，但得到了相同的外键约束违规。

我的代码如下所示：

```
class FooBar
{
    /**
     * @ORM\OneToMany(
     *     targetEntity="Foo",
     *     mappedBy="foobar",
     *     cascade={"persist", "remove"},
     *     orphanRemoval=true
     * )
     * @var Collection|Foo[]
     */
    private $fooCollection;

    /**
     * @return Collection|Foo[]
     */
    public function getFooCollection()
    {
        return $this->fooCollection;
    }

    /**
     * @param Collection|Foo[] $fooCollection
     *
     * @return $this
     */
    public function setFooCollection($fooCollection): FooBar
    {
        $this->fooCollection = $fooCollection;
        return $this;
    }
}

class Foo
{
    // ... some more properties & ID here ....

    /**
     * @ORM\OneToMany(
     *     targetEntity="Bar",
     *     mappedBy="foo",
     *     cascade={"persist", "remove"},
     *     orphanRemoval=true
     * )
     * @var Collection|Bar[]
     */
    private $barCollection;

    /**
     * @ORM\ManyToOne(
     *     targetEntity="FooBar",
     *     inversedBy="fooCollection"
     * )
     * @ORM\JoinColumn(
     *     name="fooBarId",
     *     referencedColumnName="fooBarId",
     *     nullable=false
     * )
     * @var FooBar
     */
    private $fooBar;

    public function __construct()
    {
        $this->barCollection = new ArrayCollection();
    }

    /**
     * @return Bar[]|Collection
     */
    public function getBarCollection()
    {
        return $this->barCollection;
    }

    /**
     * @param Bar[]|Collection $barCollection
     *
     * @return $this
     */
    public function setBarCollection($barCollection): Foo
    {
        $this->barCollection = $barCollection;
        return $this;
    }

    /**
     * @return FooBar
     */
    public function getFooBar(): FooBar
    {
        return $this->fooBar;
    }

    /**
     * @param FooBar $fooBar
     *
     * @return $this
     */
    public function setFooBar(FooBar $fooBar): Foo
    {
        $this->fooBar = $fooBar;
        return $this;
    }

    // ... some more getters & setters here ...
}

class Bar
{
    // ... some more properties & ID here ....

    /**
     * @ORM\ManyToOne(
     *     targetEntity="Foo",
     *     inversedBy="barCollection"
     * )
     * @ORM\JoinColumn(
     *     name="fooId",
     *     referencedColumnName="fooId",
     *     nullable=false
     * )
     * @var Foo
     */
    private $foo;

    // ... some more getters & setters here ...
} 
```

我有程序的另一部分，我尝试使用以下代码删除与 FooBar 对应的所有 Foo。

```
$fooBar = new FooBar();
$fooBar->setFooCollection([]);

$entityManager->persist($foorBar);
$entityManager->flush(); 
```

这给出了 Foo 和 Bar 之间关系的外键异常“无法删除或更新父行：外键约束失败”。

将以下方法添加到 FooBar：

```
/**
     * @param Foo[] $collection
     */
    public function removeFooCollection($collection)
    {
        /** @var Foo $entry */
        foreach ($collection as $entry)
        {
            $this->fooCollection->removeElement($entry);
            $entry->setFooBar(null);
        }
    } 
```

并使用以下代码删除与 FooBar 相关的所有 Foo：

```
$fooBar->removeFooCollection(
     $fooBar->getFooCollection()
);
$entityManager->persist($fooBar);
$entityManager->flush(); 
```

修复了所有外键约束问题。

# c# - 关闭浏览器或离开网站时注销

> ID：12895727
> 
> 赞同：0
> 
> 时间：2012-10-15T12:30:23.810
> 
> 标签：c#, asp.net, session, logout, browser-close

> **可能重复：**
> [有什么方法可以知道用户使用 asp.net 离开页面？](https://stackoverflow.com/questions/1209231/is-there-any-way-to-know-that-user-leaving-a-page-with-asp-net)

离开我的 Web 应用程序时，如何执行自动注销或关闭会话？

（如 GMAIL，当您不选中“记住我”时，如果您关闭浏览器或移动到其他页面，则会将您注销）。

谢谢，英巴尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:34:02.017

您可以使用“onbeforeunload”事件并打开一个弹出窗口以使用 Session.Abandon 终止会话

或者如果您使用表单身份验证，您可以选择在一定时间后使用超时终止会话

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:40:32.730

```
<script type="text/javascript">

        var clicked = false;
        function CheckBrowser() {
            if (clicked == false) {
                //Browser closed
            }
            else {
                //redirected
                clicked = false;
            }
        }

        function Logout() {
            if (clicked == false)//browser is closed
            {
                window.location = "../Master/Logoff.aspx";
            }
        }
    </script> 
```

1.  将此 JavaScript 放在母版页或内容页的 head 部分

2.  对 body 部分的 onbeforeunload 事件调用 logout 方法，如

    `<body onbeforeunload="Logout()" onclick="clicked=true;">`

3.  从数据库中删除受尊敬的用户条目并在被调用页面的 page_load 事件上终止会话，例如：

**页面名称**：注销.aspx

```
Protected void Page_Load(Object Sender,EventArgs e)
{
         //Write Delete User From Database Code Here.
} 
```

[在浏览器关闭时从注销用户](http://vaibhav-salwe.blogspot.co.uk/2012/05/log-out-user-on-browser-close.html)粘贴

# java - 实现 java 过滤器后在浏览器 (Firefox) 上打印代码

> ID：12895732
> 
> 赞同：1
> 
> 时间：2012-10-15T12:30:45.150
> 
> 标签：java, html

我正在使用代码制作用户登录表单。问题是我可以从 Internet Explorer 登录，但是当我从 Firefox 登录时，相同的代码会在屏幕上打印代码的 HTML 版本。我正在使用java过滤器。

下面的代码正在屏幕上打印。

```
<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html  "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html>
    <head>
<meta HTTP_EQUIV="pragma" content="no-cache"/>
<meta HTTP_EQUIV="cache-control" content="no-cache" />
<meta HTTP_EQUIV="cache-control" content="no-store"/>
<meta HTTP_EQUIV="expires" content="0" />
<title>ABC</title>
<script language="javascript" > 
 if(window.parent.length > 0) {
         var url = "/java/ehr.Home";
         var par = "null";
         if(par != "" && par != "null") { 
                 url = url + "?" + par ;
         }
         if(url != "") { 
                 window.parent.location = url; 
         }
 }
</script>
</head>
<frameset rows="111,*"  framespacing="0" frameborder="0" border="0">
<frame name="top" src="ehr.cms.PageBuilder?Page=topNavigationLegacy:/manager/home.xml" marginwidth="0" marginheight="0" scrolling="no" noresize="">
<frame name="middle" src="ShowLoading?LanguageCode=en&msgid=IDL_LOADING&redirect=/java/ehr.cms.PageBuilder?Page=topNavigationLegacy:/manager/home.xml" marginwidth="0" marginheight="0" scrolling="auto" noresize="" />
<frame name="middle" src="ehr.cms.PageBuilder?Page=/manager/home.xml" marginwidth="0" marginheight="0" scrolling="auto" noresize="">
<noframes>
<body>
<p>Please use a browser which is able to show FRAMESETS!</p>
</body>
</noframes>
</frameset>
</html> 
```

我还在java过滤器中设置了内容类型“text/html”，但遇到了同样的问题。谁能看看我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:01:44.513

似乎您的 Web 服务器正在传送内容类型不正确的 HTTP 响应。您可以通过查看浏览器的页面信息页面来确认这一点：使用“工具 > 页面信息”菜单项或 CTRL-I。我希望它会显示 Firefox 认为页面类型类似于“文本/纯文本”。

在“工具”菜单中，您应该找到其他工具，可以让您查看响应实际包含的内容；即“内容类型”标头包含的内容。

我想 IE 呈现页面的原因是它只是更宽容了来自服务器的基本上不正确的 HTTP 响应。

* * *

> 我还在java过滤器中设置了内容类型“text/html”，但遇到了同样的问题。

显然，这不能正常工作。（也许你做得不对？）在浏览器端检查实际的响应头应该可以帮助你验证这一点。

# eclipse - 从 Eclipse 在 Tomcat 上运行 Maven 项目

> ID：12895734
> 
> 赞同：8
> 
> 时间：2012-10-15T12:30:51.410
> 
> 标签：eclipse, tomcat, maven, deployment, configuration

我在 Eclipse 中有一个 Maven 项目。我想将它部署在我的本地 tomcat 服务器中并像普通的 J2EE 项目一样运行它。

但我发现在 tomcat 添加/删除项目选项中，没有显示任何项目。右键单击 maven 项目并运行，因为没有在服务器上运行选项，或者我可能遗漏了一些东西。

我正在寻找在本地 Tomcat 服务器中运行 Maven 项目（来自 eclipse，没有命令提示符或手动复制粘贴），就像普通的 J2EE 项目一样，无需修改 pom.xml（我真的不想修改这个）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-15T12:42:47.873

在 Eclipse`Maven Integration for WTP`中必须安装。此外，该项目必须配置为网络性质。

**更新**

在您的项目属性中打开网络性质 -> 项目构面 -> 转换为分面形式... -> 动态 Web 模块 -> 确定

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T16:34:22.233

要完成[AleksandrM 的回答](https://stackoverflow.com/a/12895909/428236)，如果有人想让他们*现有*的 Eclipse Web 项目在 Eclipse 中感知，请在资源管理器中突出显示该项目 -> 鼠标右键单击并选择**配置**->**转换为 Maven 项目**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T14:07:22.800

在 Tomcat 的“添加/删除项目”对话框中看不到该项目可能有几个原因。验证以下内容：

1.  您已经`m2e`安装（http://eclipse.org/m2e/download/）
2.  您已经`m2e-wtp`安装（http://www.eclipse.org/m2e-wtp/download/）
3.  您的 Maven 项目作为`Dynamic Web Application`. 展开项目时查找`Deployment Descriptor`条目，它应该在前几个条目中的某个位置。这是我在 Eclipse Juno 上的第二次失败。不在那里？它可能不是一个网络应用程序。返回并验证 1 和 2，然后删除并重新导入您的项目。
4.  确保您的 Web 应用程序对于您正在使用的 Tomcat 版本来说不是太新。右键单击该项目并转到`Properties`> `Project Facets`。查找`Dynamic Web Module`并检查版本。如果这个版本对于您的 Tomcat 版本来说太新，Eclipse 不会让您添加它。例如，您的`Dynamic Web Module`版本是 3.0，而您使用的是 Tomcat 6。

# android - 如何处理菜单项 ActionBar 的 onClick 事件之间的切换

> ID：12895745
> 
> 赞同：0
> 
> 时间：2012-10-15T12:31:18.040
> 
> 标签：android, android-actionbar

我的问题有点难以解释，所以请多多包涵，我已经为一个应用程序实现了 actionBar，问题是我在 actionBar 上有 5-6 个菜单项并使用处理点击事件

```
onOptionsItemSelected(MenuItem item) 
```

发生的情况是每个菜单项单击都会使公共区域中的特定视图膨胀[即膨胀的视图相互重叠，而不是公共容器]，如果单击另一个项目，我需要删除该视图并膨胀另一个视图，我实现了这一点使用简单的 if 比较语句。

虽然解决方案很简单，但实现它并检查这么多条件会使它变得复杂并且代码不可读。

我只是想知道这个问题是否存在更优雅的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:34:15.557

保留对最后一个膨胀视图的引用：

```
private View lastInflatedView; 
```

在`onOptionsItemSelected`方法中隐藏具有此引用的视图并将其设置为下一个膨胀。

```
if (lastInflatedView != null) {
 lastInflatedView.setVisibility(View.GONE);
}

View newView = //inflate here
lastInflatedView = newView; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:37:01.790

我假设你在这个“公共区域”使用片段，如果你不使用你应该开始使用。而且代码非常简单（ps。我是从内存中编写的，所以请修复我可能遇到的任何小错误）：

```
 onOptionsItemSelected(MenuItem item){
            switch(item.getItemId()){
                case R.id.menu_item_1:
                     // Instantiate the fragment for the item_1
                     Fragment frag = new ... etc.... etc
                     // note I'm using replace, so it will remove whatever was there before.
                    getFragmentManager.beginTransaction().replace(R.id.common_area, frag).commit();
                return true;
                case R.id.menu_item_2:  // repeat for all the menus

                default:
                return super.onOptionsItemSelected(item);
            }
    } 
```

# java - Java IVR 示例

> ID：12895753
> 
> 赞同：0
> 
> 时间：2012-10-15T12:32:02.487
> 
> 标签：java, sip, ivr

我希望有人可以向我指出图书馆的方向，以帮助处理基于 SIP 的语音流量。我正在尝试实现一个轻量级的 IVR 系统。本质上，它将集成到现有的基于 SIP 的呼叫中心应用程序中，进行一些 IVR 处理，然后将呼叫返回给始发呼叫。这是一个简单的图表：

（射击，还不让我发布图片） [http://i243.photobucket.com/albums/ff2/gte619n/IVRSystemDiagram.png](http://i243.photobucket.com/albums/ff2/gte619n/IVRSystemDiagram.png)

所以我找到了一堆关于 SIPServlet 以及它们如何进行代理等的信息，但我还没有真正找到任何可以通过语音方面的信息。我发现的大多数资源来自 Mobicents、Voxeo 和 ivrforbeginners.com，它们都依赖于 JTAPI、OpenJSIP 等库。

随着一些库的弃用和缓慢的开发，知道重点在哪里有点令人困惑。是否有任何基于 Java 的 IVR 实现的示例？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:48:25.357

查看[Zanzibar OpenIVR](http://www.spokentech.org/)，这是一个使用 Java 开发的开源 IVR 项目。它看起来不再很活跃，但它应该是一个起点。还可以查看 Voxeo 的[Moho](http://voxeolabs.com/moho/)。Moho 是一个用于开发多通道通信应用程序的开源 Java 框架，它支持 SIP。您很难找到任何像样的 Java 实现的原因可能是像样的 Java 实现是专有的并且由 IVR 供应商出售。我还知道一些 IVR 供应商从 Java 开始使用 C++ 以从系统中获得不错的性能。

在过去构建 IVR 平台后，我可以告诉您，您需要付出很多努力才能获得功能性强的轻量级 IVR 系统。除非你试图打入 IVR 市场，这个市场已经被多年的供应商饱和，否则我不会从头开始构建 IVR。Voxeo 有一个很棒的 IVR 平台，叫做[Prophecy](http://www.voxeo.com/products/voicexml-ivr-platform.jsp)，它是基于 SIP 的，它是轻量级的。我看到了一个演示，他们可以在小型 Acer 上网本上运行 100 个端口。它们有在 Windows、Linux 和 Mac 上运行的版本。您可以免费获得 2 个端口，并且为每个端口支付约 249 美元的额外端口费用。除非您计划运行数百个端口或转售，否则这将比花时间开发 IVR 便宜。

您可以使用称为[VoiceXML](http://www.w3.org/TR/voicexml20/)的 W3C 标准来控制 Voxeo 的 Prophecy 等 IVR 平台。VoiceXML 基于 Web 标准，因此您可以使用 Web 应用程序服务器将语音应用程序交付给 IVR 平台。我使用[Tomcat](http://tomcat.apache.org/)来提供使用 Java 和 JSP 开发的 VoiceXML 应用程序。[这是一个关于使用 JSP 开发 VoiceXML 应用程序](http://www.voicent.com/devnet/tutorial/genvxml.htm)的简短教程。您还可以在[Voxeo 的 Developer Portal](http://evolution.voxeo.com/)上找到出色的文档和支持。

# javascript - 如何保存在多个 html 页面中使用的 javascript 变量的状态

> ID：12895754
> 
> 赞同：6
> 
> 时间：2012-10-15T12:32:02.187
> 
> 标签：javascript, html, cordova

我正在尝试在phonegap中进行应用。我制作了一个 custom.js javascript 文件，它具有一些功能

```
function func1(){....}
function func2(){....} 
```

所有这些函数都将在两个不同的 html 页面中使用。在第一个 HTML 页面中，我在 func1 中使用了一个变量，它正在执行一些操作。在第二页中，我想以他在func1中的状态在func2中访问它。但我做不到。我在两个 html 页面中都包含 custom.js。我读过 javascript 文件在多个页面中使用时会重置/刷新。谁能给我一个例子，说明如何在 func1 中保存变量的状态，然后在他处于 func1 的状态下访问 func2 中的变量（在不同的 HTML 页面中）。我还阅读了有关视图状态的信息。但这对我也不起作用。请帮忙...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-15T12:35:43.850

将值存储在[localstorage](https://developer.mozilla.org/en-US/docs/DOM/Storage)中并从那里引用它。

```
function first() {
    localStorage.setItem('myItem', "something you want to store");
}

function second() {
    myValue = null;
    if (localStorage.getItem('myItem')) {
        myValue = localStorage.getItem('myItem');
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T12:34:34.497

在现代浏览器中，您可以使用[localStorage](http://diveintohtml5.info/storage.html)

```
var get = function (key) {
  return window.localStorage ? window.localStorage[key] : null;
}

var put = function (key, value) {
  if (window.localStorage) {
    window.localStorage[key] = value;
  }
} 
```

使用 get 和 put 将值存储到大多数现代浏览器的本地存储中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T12:37:32.673

更容易和首选的方法是`window.localStorage`用于存储站点范围的变量。为了适应旧版浏览器，您可以考虑将*cookie*作为辅助存储位置。

```
// credits to http://mathiasbynens.be/notes/localstorage-pattern
var hasStorage = (function() {
      try {
        localStorage.setItem(mod, mod);
        localStorage.removeItem(mod);
        return true;
      } catch(e) {
        return false;
      }
    }());

function setSiteWideValue(_key, _value) {
    if(hasStorage) {
        localStorage[_key] = _value;
    }
    else {
        document.cookie = _key+'='+_value+'; expires=<date-here>; path=/; ;domain=<.yourdomain>';
    }
}

function getSiteWideValue(_key) {
    if(hasStorage) {
        return localStorage[_key];
    }
    else {
        if(document.cookie.indexOf(_key+'=') != -1) {
            return document.cookie.split(_key+'=')[1].split(';')[0];
        }
    }
} 
```

# c# - 如何将单个字段数据绑定到 Silverlight MVVM 中可观察集合中的组合框？

> ID：12895759
> 
> 赞同：2
> 
> 时间：2012-10-15T12:32:16.753
> 
> 标签：c#, asp.net, silverlight, data-binding, mvvm

我对使用 MVVM 架构的 Silverlight 项目有一个疑问。

我有一个 ObservableCollection，结构是这样的..

```
 internal static class EmployeeDataHelper
    {
        internal static ObservableCollection<Employee> CookEmployeesData()
        {
            ObservableCollection<Employee> sampleEmployees = new ObservableCollection<Employee>();
            sampleEmployees.Add(new Employee("B007", "James Bond", 42, "Secret agent 007"));
            sampleEmployees.Add(new Employee("C002", "Charlie Jackson", 22, "Assistant to Bond"));
                     return sampleEmployees;
        }
    } 
```

这`<Employee>`是一个包含上述值的 get 和 set 的类。现在我需要像在组合框中那样绑定集合..

```
B007
C002 
etc.. 
```

像那样..

我如何为 Combobox 提供设计编码..

```
<ComboBox ItemsSource="{Binding Path=Employees,UpdateSourceTrigger=PropertyChanged}"
 Grid.Column="2" Height="23" HorizontalAlignment="Left" Margin="112,12,0,0" 
 Name="comboBox1" VerticalAlignment="Top" Width="120" /> 
```

如果我给出这意味着我无法得到确切的结果..如果你知道请帮助我..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T12:38:17.657

你可以做这样的事情，设置`DisplayMemberPath`

```
<ComboBox x:Name="cmbEmployee" 
   ItemsSource="{Binding sampleEmployees , Mode=TwoWay}"

 DisplayMemberPath="DisplaycolumnNameFromEmplyeeclass" > 
```

# iphone - iOS - 多个 NSURLConnection 下载

> ID：12895766
> 
> 赞同：1
> 
> 时间：2012-10-15T12:32:37.650
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我正在尝试使用以下方式下载一些文件`NSURLConnection`：

```
- (void)startDownload {
  NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:url];
  [req addValue:@"Basic XXXXXXXXXXXXXX=" forHTTPHeaderField:@"Authorization"];
  connection = [[NSURLConnection alloc] initWithRequest:req delegate:self startImmediately:YES];
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse*)response {
  filepath = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0] stringByAppendingPathComponent:save_name];
  [[NSFileManager defaultManager] createFileAtPath:filepath contents:nil attributes:nil];
  file = [[NSFileHandle fileHandleForUpdatingAtPath:filepath] retain];
  [file seekToEndOfFile];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
  [file seekToEndOfFile];
  [file writeData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection*)connection {
  [file closeFile];
 } 
```

我的文件很大，所以我必须将下载的每一块都保存到磁盘上，不能将它们存储在 RAM 中。问题是，我如何处理多个下载？

我想在上一个下载完成后开始下一个下载`- (void)connectionDidFinishLoading:`，但我想这不是最好的方法。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:39:26.907

对于多个下载，使用多个`NSURLConnection`s。

请注意，在每个委托方法中，您都会传递它所引用的连接。您只需要存储您创建的所有连接（作为属性，或在数组中，或其他任何东西，取决于您的设计）。然后在实现时，您可以通过将参数与每个存储的连接`connection: didReceiveData:`进行比较（使用）来检查哪个连接已接收到一些数据，并且您可以相应地对数据进行操作。`==`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T12:46:19.013

如果您想使用 NSURLConnection，我建议您制作自己的下载对象来包装连接并处理将其写入磁盘。

您将使用文件名初始化对象以放入完成的文件以及从中获取文件的 URL，例如：

```
MyDownloadObject *o = [[MyDownloadObject alloc] initWithFilename:filename URL:url];
o.delegate = self; 
```

每个下载对象都将处理它自己的 NSURLRequest 和 NSURLConnection，使用与您的问题几乎相同的代码:)

完成后，它会告诉您的视图控制器它已下载（可能通过委托方法，但通知也可以工作）。然后，您可以从委托方法中得知哪个文件已完成。

```
- (void)myDownloadObjectFinishedDownload:(MyDownloadObject *)o {
    NSLog(@"File from %@ has been stored at %@", o.URL, o.filename);
} 
```

如果您将 MyDownloadObject 设为 NSOperation 的子类，那么您可以使用 NSOperationQueue 来限制并发下载并监控整体进度等。

* * *

如果您不介意使用第三方库，那么 ASIHTTPRequest 是一个不错的选择，但请注意，它不再被开发。我怀疑堆栈溢出的其他人会推荐您可以使用的更好、更新的库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T12:51:32.537

这就是我想出的：

*   创建一个名为 downloadQueue 的可变数组
*   检查您的下载连接目前是否正在运行，如果是，则将连接排队
*   当你的连接结束时，检查队列，如果队列有成员，运行队列

实现：（我将标记它的重要部分，请检查每个步骤以获取更多控制）

作为私人会员；

```
...
@property (nonatomic, retain) NSURLConnection *downloadConnection;
@property (nonatomic, retain) NSMutableArray *downloadQueue;
... 
```

修改您的功能，例如；

```
- (void)startDownload {
  NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:url];
  [req addValue:@"Basic XXXXXXXXXXXXXX=" forHTTPHeaderField:@"Authorization"];

  if (self.downloadConnection)
  {
       if (!self.downloadQueue) self.downloadQueue = [[NSMutableArray alloc] init];
       [self.downloadQueue addObject:request];
       return;
  }
  // else just run your connection
  self.downloadConnection = [[NSURLConnection alloc] initWithRequest:req delegate:self startImmediately:YES];
}

    - (void)connectionDidFinishLoading:(NSURLConnection*)connection {
  [file closeFile];
  // nil your connection
  self.downloadConnection = nil;
  // check the state of your queue
  [self checkQueue];
 }

 -(void)checkQueue
{
    if (self.downloadQueue)
    {
          if (self.downloadQueue.count > 0)
          {
                NSURLRequest *queueLastObject = [self.downloadQueue lastObject];
                // call the request with downloadConnection and remove it from the queue...
          }
    }
} 
```

**注意：**此代码仅用于指定实现的想法，应进行编辑以便使用。如果您在任何时候有任何问题，请告诉我，我会更新代码。

# ruby-on-rails - Rails 路由 edit_path 缺少操作：id

> ID：12895773
> 
> 赞同：0
> 
> 时间：2012-10-15T12:32:58.360
> 
> 标签：ruby-on-rails, routes

我在路由文件中有以下内容（在我的 Rails 3.0 应用程序中）：

```
 namespace :admin do
    resources :users  
   end 
```

用户编辑屏幕的链接如下所示：

```
 <%= link_to 'Edit', edit_admin_user_path(user) %> 
```

当我单击它时，我收到以下错误：

```
 Unknown action
   The action '2201' could not be found for Admin::UsersController 
```

这里遗漏了一些非常明显的东西，对吧？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:02:02.070

确保在您显示的资源条目之前没有定义“包罗万象”的路线。路线匹配在第一次匹配时停止；该错误表明您可能有一个尝试将 ID 用作方法名称的写入。

# javascript - 如何使 Textarea 像密码字段一样

> ID：12895774
> 
> 赞同：2
> 
> 时间：2012-10-15T12:33:02.360
> 
> 标签：javascript, html

我正在尝试使 textarea 看起来像密码字段。在 webkit 浏览器中，我找到了以下属性来制作它

```
-webkit-text-security : circle 
```

但它不适用于其他浏览器。任何跨浏览器的替代品...？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:38:24.870

您可以为此使用 JS，定义一个变量并在其中存储 textarea 值，并用任何特殊字符替换 textarea 中的内容。您将在 JS 变量中有实际值，可用于提交表单或验证等。

为此，您可以为`keydown`事件编写一个函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T12:43:01.930

您可以使用 jQuery 插件，例如：[http ://blog.decaf.de/2009/07/iphone-like-password-fields-using-jquery/](http://blog.decaf.de/2009/07/iphone-like-password-fields-using-jquery/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-25T00:32:16.613

可以做到，但实现起来并不简单。这个想法是使用不可见的`password=true`输入元素作为您的文本区域的密码屏蔽版本的状态/代理，并使用 JS 在显示/隐藏时将密码屏蔽（假）文本区域与真实文本区域切换。

**需要注意的一点：**[intgr](https://stackoverflow.com/users/177663/intgr)对[类似问题](https://stackoverflow.com/questions/16058008/is-there-a-known-way-to-have-a-textarea-with-the-password-type)的评论指出，

> 不幸的是，这很快就变得丑陋了。一个普通的密码字段还允许在中间进行修改、复制剪切粘贴、拖放以及可能其他我想不到的行为。忠实地模仿所有这些，即使可能，也可能不值得麻烦。

我的实现通过在密码屏蔽（假）文本区域中通过单击或箭头键以编程方式禁用文本导航来避免这种复杂性。然而，真正的文本区域可以在其中导航和编辑，因此在 UX 方面几乎没有丢失。

在下面查看我的实现：

```
// element handles
const inp = document.getElementById("input-el");
const fta = document.getElementById("fake-textarea-el");
const ftac = document.getElementById("fake-textarea-el-content");
const rta = document.getElementById("real-textarea-el");
const toggle = document.getElementById("pw-toggle");

// initial text element height
const initialHeightPx = fta.clientHeight + 'px';

// show/hide content flag
let hideContent = true;

// util for minimum textarea height workaround
function textWidth(text) {
  const tag = document.createElement('div');
  tag.classList.add('hidden');
  tag.style.whiteSpace = 'nowrap';
  tag.innerHTML = text;

  document.body.appendChild(tag);
  const result = tag.clientWidth;

  document.body.removeChild(tag);

  return result;
}

function setTextArea(content = '') {
  // update all text elements
  ftac.innerHTML = content.replace(/./g, '•');
  inp.value = content;
  rta.value = content;

  // workaround to use CSS height for minimum
  // textarea height
  let newHeight = initialHeightPx;
  if (textWidth(content) > rta.clientWidth) {
    rta.style.height = 'auto';
    newHeight = rta.scrollHeight + 'px';
  }
  rta.style.height = newHeight;
}

function handleInput(e) {
  const {target: {value}} = e;
  setTextArea(value);
}

inp.oninput = handleInput;
rta.oninput = handleInput;

fta.onfocus = e => {
  inp.focus();

  fta.classList.add('has-focus');
  ftac.classList.remove('has-selectall');
}

inp.onblur = e => {
  // deselect input contents
  inp.selectionStart = inp.selectionEnd = -1;

  fta.classList.remove('has-focus');
  ftac.classList.remove('has-selectall');
}

inp.onkeydown = e => {
  const {charCode, keyCode, target: {value}} = e;
  const code = keyCode || charCode;

  // prevent arrow keys
  if (code >= 37 && code <= 40) {
    e.preventDefault();
  }

  // handle ctrl/meta key combinations
  if ((e.metaKey || e.ctrlKey)) {
    switch (e.key) {
      case 'a':
        e.preventDefault();
        inp.setSelectionRange(0, inp.value.length)
        fta.classList.remove('has-focus');
        ftac.classList.add('has-selectall');
        break;
      default:
    }
  } else if (ftac.classList.contains('has-selectall')) {
    fta.classList.add('has-focus');
    ftac.classList.remove('has-selectall');
  }
}

// handle show/hide toggle
toggle.onclick = e => {
  hideContent = !hideContent;

  if (hideContent) {
    rta.classList.add('hidden');
    fta.classList.remove('hidden');
    toggle.innerHTML = 'Show';
  } else {
    fta.classList.add('hidden');
    rta.classList.remove('hidden');
    toggle.innerHTML = 'Hide';
  }
}
```

```
/* SETUP BEGIN */
* {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
}

main {
  align-items: center;
  display: flex;
  height: 100vh;
  justify-content: center;
}

button {
  height: 24px;
  margin: 18px;
  width: 60px;
}
/* SETUP END */

#fake-textarea-el, #real-textarea-el {
  border: none; /* remove user-agent textarea border */
  box-shadow: 0 0 0 1px black;
  box-sizing: border-box;
  display: block;
  height: 24px;
  line-height: 18px;
  margin: 0;
  padding: 2px;
  resize: none;
  width: 150px;
  word-wrap: break-word;
}

#fake-textarea-el {
  height: auto;
  min-height: 24px;
}

.hidden {
  position: absolute;
  bottom: 0px;
  z-index: -1000;
  opacity: 0;
  pointer-events: none;
}

.has-selectall {
  /* default selection bg on MacOS + Chrome */
  background: #ACCEF7;
}

.cursor {
  border-right: 1px solid transparent;
  height: 1rem;
}

.has-focus .cursor {
  animation: cursorBlink 1.14s forwards infinite;
}

@keyframes cursorBlink {
  0% {
    border-color: transparent;
  }
  50% {
    border-color: transparent;
  }
  51% {
    border-color: black;
  }
  100% {
    border-color: black;
  }
}
```

```
<main>
  <input id="input-el" class="hidden" type="password" />
  <div id="fake-textarea-el" contenteditable>
    <span id="fake-textarea-el-content"></span><span class="cursor"></span>
  </div>
  <textarea id="real-textarea-el" class="hidden"></textarea>
  <button id="pw-toggle">Show</button>
</main>
```

# c++ - 类模板继承 C++

> ID：12895775
> 
> 赞同：22
> 
> 时间：2012-10-15T12:33:32.543
> 
> 标签：c++, templates, inheritance, operators

我想从模板类继承并更改调用运算符“（）”时的行为 - 我想调用另一个函数。这段代码

```
template<typename T>
class InsertItem
{
 protected:
 int counter;
 T   destination; 

 public:
  virtual void operator()(std::string item) {
     destination->Insert(item.c_str(), counter++);
  }

 public:
  InsertItem(T argDestination) {
          counter= 0;
    destination = argDestination;
  }
};

template<typename T>
class InsertItem2 : InsertItem
{
public:
 virtual void operator()(std::string item) {
  destination ->Insert2(item.c_str(), counter++, 0);
 }
}; 
```

给我这个错误：

```
Error 1 error C2955: 'InsertItem' : use of class template requires template argument list... 
```

我想问你如何正确地做到这一点，或者是否有其他方法可以做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-15T12:37:06.803

继承时，您必须展示如何实例化父模板，如果可以使用相同的模板类 T，请执行以下操作：

```
template<typename T>
class InsertItem
{
protected:
    int counter;
    T   destination; 

public:
    virtual void operator()(std::string item) {
        destination->Insert(item.c_str(), counter++);
    }

public:
    InsertItem(T argDestination) {
        counter= 0;
        destination = argDestination;
    }
};

template<typename T>
class InsertItem2 : InsertItem<T>
{
public:
    virtual void operator()(std::string item) {
        destination ->Insert2(item.c_str(), counter++, 0);
    }
}; 
```

如果需要其他内容，只需更改该行：

```
class InsertItem2 : InsertItem<needed template type here> 
```

# r - r 语言 mtext 不适用于 image.plot 数组

> ID：12895783
> 
> 赞同：5
> 
> 时间：2012-10-15T12:34:16.493
> 
> 标签：r

我正在使用 R 使用 image.plot 绘制一组图。一切正常，除了我无法让 mtext() 显示主标题。使用 matplot() 对绘图数组使用非常相似的代码可以正常工作。

我正在使用的代码如下所示。

```
op <- par(mfrow = c(2, 2))
par(mar=c(5, 4, 4, 2) + 0.1)
par(oma = c(0,0,2,1))
for (i in 2:nout){
  image.plot(r,th,t(u[i,,]),xlab="r",ylab=expression(paste(theta)),
    zlim=c(0.1,0.9), main=paste("t = ",t[i]),col=pal)
} 
mtext(side=3, outer=TRUE, cex=1.25, line=2,expression(
  paste("u(t,r,",theta, ")"))) 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-07T20:05:27.587

我也遇到了一些奇怪`mtext()`的问题`image.plot()`。我发现的一种解决方法是使用`title()`“重新参与”绘图设备，例如：

`image.plot(x,y,z)
title("")
mtext("Title",side=3)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:38:13.183

您将顶部外边距设置为 2 行宽，并尝试在*第三*行打印文本，因为`line`参数 from`mtext`开始于`0`：

> line：在哪条 MARgin 线上，从 0 开始向外计数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T17:52:59.687

这是一个肮脏的黑客，但它至少对我有用。

```
plot(0,0, type='n', xaxt='n', yaxt='n', xlab='', ylab='', bty='n')  # make an empty plot
mtext("Whatever you want in the margin", side=mySide)
par(new=T)
image.plot(…)   # fill in your image plot here 
```

# c# - .Net Control Id like text box access original Id c#

> ID：12895789
> 
> 赞同：0
> 
> 时间：2012-10-15T12:34:36.663
> 
> 标签：c#, asp.net, .net

是否可以保留控件 ID。例如

```
<asp:TextBox ID="myTextBox" /> 
```

当我使用 F12 时，它显示的 id 与“ct00_Main_myTextBox”不同，有什么方法可以将其设置为“yTextBox”，我知道它是由于母版页。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:35:55.933

您可以将[ClientIDMode](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx)设置为静态。

```
<asp:TextBox ID="myTextBox" ClientIDMode="Static" /> 
```

如果您尝试在 javascript 中引用它，您也可以使用[ClientID](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientid.aspx)属性来获取生成的 ID，而不考虑 ClientIDMode。

```
document.getElementById("<%= myTextBox.ClientID %>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:23:06.357

`ClientIDMode="Static"` 按照jrummell在回复中的建议，保留并遵循其余部分

我也建议你在[这里阅读这篇文章](http://www.dotnetfunda.com/articles/article838-aspnet-40-manipulate-clientid-using-clientidmode.aspx)

# html - 滚动表格时，加载栏不会停留在表格行内

> ID：12895790
> 
> 赞同：0
> 
> 时间：2012-10-15T12:34:38.860
> 
> 标签：html, css

我的应用程序中有一个加载栏。问题是，如果我有一个滚动表，如果其中一个表行正在显示加载栏，而在加载时，如果用户向上或向下滚动表格，加载栏图像会在用户保持原位正在滚动表格，所以看起来加载栏在前台，表格在后台滚动。

当用户滚动表格时，我只是希望加载栏保持在其行内，如何更改 css 以实现这一点？

下面是加载栏的 html：

```
<p class='imagef1_upload_process' align='center'>Loading...<br/><img src='Images/loader.gif' /><br/></p> 
```

下面是加载栏和滚动表的css：

```
//loading bar

    .imagef1_upload_process{
        position:absolute;
        visibility:hidden;
        text-align:center;
        margin-bottom:0px;
        padding-bottom:0px; 
        }

//scroll table

#details{
    height:500px;
    overflow:auto;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:39:03.027

您将加载条位置设置为绝对。要将其绝对定位在另一个容器内，包含元素也需要一个位置属性。

所以任何包含加载栏的东西都需要位置：相对；添加到它的CSS。那应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:56:09.240

您可以通过以下方式修复

```
 position:fixed; 
```

# android - 空的全局缓存（不仅仅是应用程序特定的缓存）

> ID：12895791
> 
> 赞同：0
> 
> 时间：2012-10-15T12:34:38.800
> 
> 标签：android, caching

我看到大量适用于 Android 的应用程序可以让您完全“清除”缓存。我想在我的应用程序中实现相同的功能。

我很熟悉，`context.getCacheDir()`但这只会返回特定于应用程序的缓存目录。有没有办法递归地遍历其他应用程序的缓存目录并清除它们？

附带说明一下，如果可能的话，我想获得总缓存文件的大小。

# android - SDK、SDK平台和SDK平台工具的区别

> ID：12895793
> 
> 赞同：1
> 
> 时间：2012-10-15T12:34:40.963
> 
> 标签：android, sdk

我正在安装 android sdk，但是当我尝试使用 sdk 管理器时，有很多东西。特别是我想知道 SDK、SDK 平台和 SDK 平台工具之间的区别。任何解释或指示表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T12:37:42.720

> SDK Tools 是 Android SDK 的可下载组件。它包括完整的 Android SDK 开发和调试工具，如模拟器、sdcard、sqlite 和 apk builder 等。其中 Platform-tools 用于支持当前 android 平台的功能，包括充当桥梁的 adb与模拟器或设备通信。

# javascript - 从 CKeditor 获取非 html 文本

> ID：12895795
> 
> 赞同：14
> 
> 时间：2012-10-15T12:34:43.623
> 
> 标签：javascript, text, ckeditor

在我的应用程序中，在插入新闻部分，我使用新闻内容的子字符串作为新闻摘要。为了从用户那里获取新闻内容文本，我使用 CKEditor，对于新闻摘要，我使用子字符串方法来获取一定长度的新闻内容。但是当我使用 CKEditor 时，我得到带有 html 标签而不是纯文本的文本，当我使用substring 方法，我的新闻摘要变得一团糟！我如何从这个控件中获取原始文本？ [我读了这个](https://stackoverflow.com/questions/2146237/dsiplay-text-from-ckeditor)，但我不能使用 getText() 方法

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-15T12:48:20.247

试试这样的代码：

```
CKEDITOR.instances.editor1.document.getBody().getText(); 
```

这对我来说可以。您可以在[http://ckeditor.com/demo](http://ckeditor.com/demo)上对其进行测试。这并不理想（表格单元格中的文本没有空格连接在一起），但可能足以满足您的需求。

* * *

**编辑（2017 年 12 月 20 日）：** CKEditor 4 演示已移至[https://ckeditor.com/ckeditor-4/](https://ckeditor.com/ckeditor-4/)并使用不同的编辑器名称，因此要执行的新代码为：

```
CKEDITOR.instances.ckdemo.document.getBody().getText(); 
```

同样重要的是它可以在“文章编辑器”和“内联编辑器”中工作，您需要获取不同元素的文本：

```
CKEDITOR.instances.editor1.editable().getText(); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-15T12:55:53.877

像这样做

```
//getSnapshot() retrieves the "raw" HTML, without tabs, linebreaks etc
var html=CKEDITOR.instances.YOUR_TEXTAREA_ID.getSnapshot();
var dom=document.createElement("DIV");
dom.innerHTML=html;
var plain_text=(dom.textContent || dom.innerText);

alert(plain_text); 
```

中提琴，抓住你想要的plain_text部分。

**更新/示例**

添加这个 javascript

```
<script type="text/javascript">
function createTextSnippet() {
    //example as before, replace YOUR_TEXTAREA_ID
    var html=CKEDITOR.instances.YOUR_TEXTAREA_ID.getSnapshot();
    var dom=document.createElement("DIV");
    dom.innerHTML=html;
    var plain_text=(dom.textContent || dom.innerText);

    //create and set a 128 char snippet to the hidden form field
    var snippet=plain_text.substr(0,127);
    document.getElementById("hidden_snippet").value=snippet;

    //return true, ok to submit the form
    return true;
}
</script> 
```

在您的 HTML 中，将 createTextSnippet 作为 onsubmit-handler 添加到表单中，例如

```
<form action="xxx" method="xxx" onsubmit="createTextSnippet();" /> 
```

在表格内，介于`<form>`和`</form>`插入

```
<input type="hidden" name="hidden_snippet" id="hidden_snippet" value="" /> 
```

提交表单后，您可以在服务器端访问 hidden_​​snippet 以及表单中的其余字段。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-12-22T20:10:13.863

我个人使用这种方法来压缩代码并删除双空格和换行符：

```
 var TextGrab = CKEDITOR.instances['editor1'].getData();
        TextGrab = $(TextGrab).text(); // html to text        
        TextGrab = TextGrab.replace(/\r?\n|\r/gm," "); // remove line breaks   
        TextGrab = TextGrab.replace(/\s\s+/g, " ").trim(); // remove double spaces 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-07T16:12:17.383

我使用了这个功能：

```
function getPlainText( strSrc ) {
    var resultStr = "";

    // Ignore the <p> tag if it is in very start of the text
    if(strSrc.indexOf('<p>') == 0)
        resultStr = strSrc.substring(3);
    else
        resultStr = strSrc;

    // Replace <p> with two newlines
    resultStr = resultStr.replace(/<p>/gi, "\r\n\r\n");
    // Replace <br /> with one newline
    resultStr = resultStr.replace(/<br \/>/gi, "\r\n");
    resultStr = resultStr.replace(/<br>/gi, "\r\n");

    //-+-+-+-+-+-+-+-+-+-+-+
    // Strip off other HTML tags.
    //-+-+-+-+-+-+-+-+-+-+-+

    return  resultStr.replace( /<[^<|>]+?>/gi,'' );
} 
```

函数调用：

```
var plain_text = getPlainText(FCKeditorAPI.GetInstance("FCKeditor1").GetXHTML()); 
```

我创建了这个小提琴进行测试：http: [//jsfiddle.net/4etVv/3/](http://jsfiddle.net/4etVv/3/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-02T19:07:11.253

我使用这种方法（需要 jQuery）：

```
var objEditor =CKEDITOR.instances["textarea_id"];
var msg = objEditor.getData();
var txt = jQuery(msg).text().replaceAll("\n\n","\n"); 
```

希望能帮助到你！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-12-19T12:45:58.663

假设这`editor`是您的 CKEditor 实例（`CKEditor.instances.editor1`来自上面的示例或者如果您正在使用事件`event.editor`）。您可以使用以下代码获取纯文本内容。

`editor.ui.contentsElement.getChild(0).getText()`

显然 CKEditor 在实际可编辑内容中添加了“语音标签”元素。因此`getChild(0)`。

# image-processing - 如何在 netbeans 中下载和安装 imageJLibrary

> ID：12895797
> 
> 赞同：0
> 
> 时间：2012-10-15T12:34:48.023
> 
> 标签：image-processing, imagej, java

我是 Java 和图像处理的新手。我想开发一个具有阈值和hitorgrams相关操作等功能的java应用程序。我考虑了大约 2 个图像处理库；JAI 和 imageJ。

我发现 imajeJ 更合适，但是当我搜索它下载时，我只找到了一个工具而不是一个库。有人可以告诉我在哪里可以下载 imageJ api(/library) 并安装它，这样我就可以在 netbeans 中使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:55:37.287

[从此处](http://rsb.info.nih.gov/ij/ij.jar)下载最新的 ImageJ jar并将其添加为项目的外部库。然后，您可以按照[API 文档](http://rsbweb.nih.gov/ij/developer/api/index.html)中的说明对 API 进行编程。[此处](http://www.imagingbook.com/index.php?id=102)提供的 servlet 示例可能很有用。

# java - Java vs Ruby HMAC SHA256 不同意

> ID：12895806
> 
> 赞同：2
> 
> 时间：2012-10-15T12:35:12.510
> 
> 标签：java, ruby, encryption, hmac

我无法让 Ruby 和 Java 就 HMAC 达成一致：

红宝石：

```
hmac_key = "my hmac key" #this is THE REAL KEY
msg = "fCyVmpFAZxv9Utui2QWGUtoGJ//Zr5aH+1PV31ry/dwX3yVdeEMIMW/dfoA9\nihbnYrnoSnb2yyfOrBYoy0JlDvWz8GJ6dY643lDTj7xcw8Q="
hashb16  = OpenSSL::HMAC.hexdigest('sha256', hmac_key, msg)
puts hashb16

052310d1fc91df4e5bbb47194cc401feed51eca98668b501555c78774dad6bed 
```

爪哇：

```
String hmac_key = "my hmac key";
String encrypted_message_b64 = "fCyVmpFAZxv9Utui2QWGUtoGJ//Zr5aH+1PV31ry/dwX3yVdeEMIMW/dfoA9ihbnYrnoSnb2yyfO\nrBYoy0JlDvWz8GJ6dY643lDTj7xcw8Q=";
final Mac hmac = Mac.getInstance("HmacSHA256");
hmac.init(new SecretKeySpec(hmac_key.getBytes("UTF-8"), "HmacSHA256"));
byte[] signature = hmac.doFinal(encrypted_message_b64.getBytes("UTF-8"));
System.out.println(Hex.encodeHexString(signature));

d5bc0b58f43c6f6611f63822d22f99e18c51a33251a5a1c0c7712b4c7fb1ad24 
```

你能看出哪里不对吗？

* * *

编辑：我修复了严重复制/粘贴的字符串。

Edit2：我恢复了修复，并在 ruby​​ 字符串上使用了正确的内容，所以答案和接受的答案仍然有意义。对不起混乱

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T12:37:15.303

消息不同 - 请参阅`dfoA9\n`Ruby 块中的 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T12:56:25.613

我不知道您通过复制和粘贴“修复”了什么，两个源字符串仍然不同（`\n`在不同的位置），并且您发布的哈希现在相等。我想你没有他们平等，否则你不会发布问题。

But what i see is that you are using `b64_encoded` as the Ruby input, which is not the `msg` you are showing us. Is there a chance it has a different content?

# iis - 包含“;jsessionid=”的 Apache URL 的 IIS 7 重定向

> ID：12895808
> 
> 赞同：3
> 
> 时间：2012-10-15T12:35:23.277
> 
> 标签：iis, http-redirect

我们正在用 ASPX IIS 7.5 托管网站替换现有的 Apache 托管网站。

目前，谷歌显示了几个子页面结果（相对于主站点），其中子页面（Apache）链接看起来像这样......

[http://mysite.co.uk/mypage.html;jsessionid=D4F2C4D93229A451BC​​A886061501C777](http://mysite.co.uk/mypage.html;jsessionid=D4F2C4D93229A451BCA886061501C777)

我希望 IIS 将这个链接（301）重定向到这样的东西......

[http://mysite.co.uk/anotherpage.aspx](http://mysite.co.uk/anotherpage.aspx)

我可以在 IIS 中创建一个 301 HTTP 重定向，以将“mypage.html”重定向到“anotherpage.aspx”，但是当“mypage.html”的传入请求还包括“;jsession=...”时，这不起作用。

我查看了重定向通配符，但似乎无法得到正确的结果。

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T15:09:50.257

[我用IIS URL Rewrite](http://www.iis.net/downloads/microsoft/url-rewrite)解决了这个问题。以下示例规则将解决我上面描述的问题......

```
<rewrite>
    <rules>
        <rule name="mypage">
            <match url="^mypage.html" />
            <action type="Rewrite" url="anotherpage.aspx" appendQueryString="false" />
        </rule>
    </rules>
</rewrite> 
```

# c - 如何在 C 中调试 Windows 服务启动代码，而不是 C#

> ID：12895809
> 
> 赞同：1
> 
> 时间：2012-10-15T12:35:22.263
> 
> 标签：c, windows, debugging, windows-services, startup

每个人

我想知道如何在 C 中调试 windows 服务启动代码。有几个这样的问题，但在 C# 中，但它们不是我需要的。到目前为止，我只能附加到进程来调试。现在我想调试main()函数，怎么办？越详细越好。

非常感谢。

我的代码如下。

**主功能：**

```
void main()
{   
    SERVICE_TABLE_ENTRY ServiceTable[2];
    ServiceTable[0].lpServiceName = "MemoryStatus";  
    ServiceTable[0].lpServiceProc = (LPSERVICE_MAIN_FUNCTION)ServiceMain; //ServiceMain
    ServiceTable[1].lpServiceName = NULL;
    ServiceTable[1].lpServiceProc = NULL;

    StartServiceCtrlDispatcher(ServiceTable);
} 
```

**服务主要功能：**

```
void ServiceMain(int argc, char** argv)
{        
    //...some codes....

    hStatus = RegisterServiceCtrlHandler("MemoryStatus",(LPHANDLER_FUNCTION)ControlHandler);

    //...some codes....

    //the worker loop of a service
    while(ServiceStatus.dwCurrentState == SERVICE_RUNNING)
    {
        char buffer[10];        
        sprintf(buffer,"login...");
        int result = WriteToLog(buffer);        
        if (result)
        {
             ReportStatus(SERVICE_STOPPED,-1);
             return;
        }
        Sleep(SLEEP_TIME);
    }
    return;
} 
```

和**控制手柄功能：**

```
void ControlHandler(DWORD request)
{
    switch(request)
    {
    case SERVICE_CONTROL_STOP:
        WriteToLog("Monitoring stopped.");
        //...Report Status to SCM code....
        return;
    case SERVICE_CONTROL_SHUTDOWN:
        WriteToLog("Monitoring stopped.");
        //...Report Status to SCM code....
        return;
    default:
        break;
    }
//...Report Status to SCM code....
    return;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T19:23:50.237

有两种不同的方法可以从一开始就调试 Windows 服务。两者都在[这里](http://msdn.microsoft.com/en-us/library/windows/hardware/ff553427%28v=vs.85%29.aspx)描述。

我的首选包括使用以服务开头的远程调试器会话（您可以`ntsd`从 Windows 调试工具中使用）。Windows 中有一种特殊的机制，可以让您根据图像名称（图像文件执行选项）劫持进程。您可以在下面找到 .reg 文件的内容，该文件将为您设置此调试器（将路径更改为您安装了调试工具的路径）：

```
Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Image File Execution Options\svchost.exe]
"Debugger"="\"C:\\tools\\debugging\\Debugging Tools for Windows (x64)\\ntsd.exe\" -server npipe:pipe=svcpipe -noio" 
```

下一步是使用用户模式调试器附加到此会话：

```
windbg -remote "npipe:pipe=svcpipe,server=localhost" 
```

你已经准备好调试了。请记住在重新启动计算机之前删除注册表设置，否则 Windows 将挂起并显示黑屏 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-12T02:04:00.670

OK，有两种方法：首先，我们可以在代码开始时休眠服务进程。像这样：

```
main()
{
    sleep(10);
    .....
} 
```

然后附加到服务进程，调试器将停止在断点位置，因为我们有 10 秒的等待时间。

其次，我们可以在代码的开头使用`_ASSERT(FALSE)`或函数。`DebugBreak()`

# c - 无法链接到 WICConvertBitmapSource

> ID：12895810
> 
> 赞同：0
> 
> 时间：2012-10-15T12:35:32.983
> 
> 标签：c, winapi, mingw, wic

我想使用来自 的函数`WindowsCodecs.dll`，但 MinGW 的 WinAPI 标头不完整且缺失，还有导入库。考虑以下演示：

```
#define WIN32_LEAN_AND_MEAN
#include <windows.h>
#include <stdio.h>

// ---------- dummy declarations, because MinGW got no wincodec.h ----------
typedef REFGUID REFWICPixelFormatGUID;
typedef VOID IWICBitmapSource;

HRESULT WINAPI WICConvertBitmapSource(
    REFWICPixelFormatGUID dstFormat,
    IWICBitmapSource *pISrc,
    IWICBitmapSource **ppIDst);
// -------------------------------------------------------------------------

int WINAPI WinMain(HINSTANCE hInst, HINSTANCE hPrev, LPSTR lpLine, int nShow)
{
#ifdef LOAD_FROM_DLL
    typedef HRESULT (WINAPI *PWICConvertBitmapSource)(
        REFWICPixelFormatGUID, IWICBitmapSource *, IWICBitmapSource **);

    HMODULE hDll = LoadLibrary("WindowsCodecs.dll");
    PWICConvertBitmapSource pFunc =
        (PWICConvertBitmapSource)GetProcAddress(hDll, "WICConvertBitmapSource");
    printf("WICConvertBitmapSource: 0x%p.\n", pFunc);
    pFunc(NULL, NULL, NULL);
    FreeLibrary(hDll);
#else
    WICConvertBitmapSource(NULL, NULL, NULL);
#endif
    return 0;
} 
```

当由 构建时`gcc test.c -DLOAD_FROM_DEF`，程序会打印函数的地址并正确终止。虽然，当从以下 def 链接到导入库时：

```
LIBRARY WindowsCodecs.dll
EXPORTS
    WICConvertBitmapSource@12 
```

，弹出此错误：

```
The procedure entry point WICConvertBitmapSource@12 could
not be located in the dynamic link library WindowsCodecs.dll. 
```

令人惊讶的是，如果我`WICConvertBitmapSource`从源文件和`@12`def 文件中删除声明，程序链接并运行良好。

如何创建正确的导入库？

**注意：**我在 Windows 7 SP1 上运行 MinGW。我的 gcc 版本是 4.7.0，安装了 w32api 3.17。许多函数都会出现问题，例如`GdiAlphaBlend`或`SHCreateStreamOnFileEx`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:24:12.157

导入库应该是用`--kill-at`标志创建的，像这样：

```
dlltool --kill-at -D WindowsCodecs.dll -d WindowsCodecs.def -l libwindowscodecs.a 
```

这篇文章为我澄清了一切：[http ://wyw.dcweb.cn/stdcall.htm](http://wyw.dcweb.cn/stdcall.htm)

# blackberry - “自定义地图字段”功能

> ID：12895813
> 
> 赞同：1
> 
> 时间：2012-10-15T12:35:49.640
> 
> 标签：blackberry, gps

关于“自定义地图字段”功能的信息似乎并不多。我正在将图像添加到我的自定义 MapField 并希望使这些图像可点击。如果有人对此熟悉，请告诉我并发布我的代码片段等。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:17:44.950

API 中有两个 MapField 类：旧的[`net.rim.device.api.lbs.MapField`](http://www.blackberry.com/developers/docs/7.0.0api/)，从 OS 4.5[`net.rim.device.api.lbs.maps.ui.MapField`](http://www.blackberry.com/developers/docs/7.0.0api/)开始可用，新的，从 OS 6.0 开始可用。对于最新的，单击项目时的默认操作是显示带有信息的对话框，但我认为您可以通过[`MapAction`](http://www.blackberry.com/developers/docs/7.0.0api/net/rim/device/api/lbs/maps/ui/MapAction.html)在 MapField 中设置自定义实例来监听点击。如果不可能，那么对于新旧地图字段，您都可以覆盖`navigationClick`并寻找离地图中心最近的可点击项目。如果您有大量可点击项目（例如，跳过所有不可见元素），则应优化此最近邻查找。对于支持触摸屏的设备，您可以覆盖`touchEvent`、检索点击位置并执行相同操作。

实际上这两种方法是兼容的。

# c++ - 有一个weak_ptr的向量，想要返回一个shared_ptr的向量

> ID：12895816
> 
> 赞同：6
> 
> 时间：2012-10-15T12:36:22.323
> 
> 标签：c++, boost, vector, shared-ptr, weak-ptr

我目前正在做一个大项目，我需要使用`weak_ptr`而不是`shared_ptr`.

这是我的问题。

我有一个名为 House 的类，其属性为：`vector<boost::shared_ptr<People>> my_people`。我想将此数据成员修改为`vector<boost::weak_ptr<People>> my_people`.

我的吸气剂是

```
vector<boost::shared_ptr<People>>& getPeople() const
{
    return my_people;
} 
```

通常，只需简单的`weak_ptr`我就可以返回`my_people.lock();`

但我有一个向量，我不知道如何做这样的事情：

```
vector<boost::shared_ptr<People>>& getPeople() const
{
    for( vector<boost::weak_ptr<People>::iterator it = my_people.begin();
         it != my_people.end();
         ++it)
    {
        (*it).lock();
    }

    return my_people;
} 
```

换句话说，我想返回我的向量`weak_ptr`但是作为向量`shared_ptr`。可能吗？还是我必须返回一个向量`weak_ptr`并`lock()`在我使用它们的任何地方使用它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T20:42:59.887

您的功能是一个合理的开始：

```
vector<boost::shared_ptr<People>>& getPeople() const
{
    for( vector<boost::weak_ptr<People>::iterator it = my_people.begin();
         it != my_people.end();
         ++it)
    {
        (*it).lock();
    }

    return my_people;
} 
```

但是调用`(*it).lock()`只是创建 a`shared_ptr`并将其丢弃，它不会更改向量元素的类型，并且您不能将向量作为不同的类型返回。

您需要创建一个正确类型的向量，用 shared_ptr 对象填充它，然后返回它：

```
vector<boost::shared_ptr<People>> getPeople() const
{
    vector<boost::shared_ptr<People>> people(my_people.size());
    std::transform(my_people.begin(), my_people.end(), people.begin(),
                   boost::bind(&boost::weak_ptr<People>::lock, _1));
    return people;
} 
```

这会遍历 的每个元素`my_people`，调用`lock()`它，并将结果分配给 的相应元素`people`。

如果您知道`my_people`从未包含过期的指针，那就更容易了：

```
vector<boost::shared_ptr<People>> getPeople() const
{
  vector<boost::shared_ptr<People>> people(my_people.begin(), my_people.end());
  return people;
} 
```

这通过从元素构造每个元素来填充`people`向量。不同之处在于，如果 a已过期，此版本将抛出异常，因为如果传递了 expired ，构造函数将抛出异常。如果转换过期的weak_ptr，则使用的版本 将在向量中放置一个空。`shared_ptr``weak_ptr``weak_ptr``shared_ptr``weak_ptr``transform``shared_ptr`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-07T06:20:48.713

你可以使用**[std::transform](http://www.cplusplus.com/reference/algorithm/transform/)**

```
 std::vector<std::shared_ptr<People>> temp;
 sharedTargetList.resize(my_people.size());

 //transform into a shared_ptr vector
 std::transform(my_people.begin(),
        my_people.end(),
        temp.begin(), 
        [](std::weak_ptr<People> weakPtr){ return weakPtr.lock(); } 
 ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T12:41:03.110

关于什么：

```
vector<boost::shared_ptr<People>> getPeople() const
{
    vector<boost::shared_ptr<People>> res;
    for( vector<boost::weak_ptr<People>::iterator it = my_people.begin(); 
         it != my_people.end(); ++it)
        res.push_back(it->lock());
    return res;
} 
```

此外，如果需要，您可以过滤掉空指针。

当然，您不能返回对局部变量的引用，因此您必须返回一个副本。您可能想要这样做：

```
void getPeople(vector<boost::shared_ptr<People>> &res) const
{
    for( vector<boost::weak_ptr<People>::iterator it = my_people.begin(); 
         it != my_people.end(); ++it)
        res.push_back(it->lock());
} 
```

以避免复制返回向量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T12:45:51.547

请注意，`vector<weak_ptr<T> >`and`vector<shared_ptr<T> >`是两种完全不同的类型。

但是，您可以编写一个接受前者并返回后者的函数：

```
 template<class Ptrs, class WeakPtrs> 
  void lockWeakPtrs(const WeakPtrs &weakPtrs, Ptrs &ptrs)
  {
      BOOST_FOREACH (typename WeakPtrs::const_reference weakPtr, weakPtrs)
      {
          typename Ptrs::value_type ptr = weakPtr.lock();
          if (ptr) // if you want to drop expired weak_ptr's
              ptrs.insert(ptrs.end(), ptr);
      }
  } 
```

像这样调用： `lockWeakPtrs(myWeakVector, mySharedVector);`

# r - 如何使用子集仅从数据集中获取前 xx 个观测值？

> ID：12895819
> 
> 赞同：0
> 
> 时间：2012-10-15T12:36:45.707
> 
> 标签：r, subset, regression

如果我有一个包含 4137 个观测值的数据集，并且我想仅使用前 2070 个观测值对`colga`on`hsperc`和 sat 进行回归，我该怎么做？

我试过类似的东西：

```
#(loading data)
GPA2 <- read.table("GPA2.raw", header=TRUE, na.strings=".")

#(fitting model)
mfit1 <- lm(formula = colgpa ~ hsperc + sat, 
            data=GPA2, 
            subset=(rownum<2071)  ) 
```

但是`subset`使用`rownum`失败。有什么建议么？？

我没有计算行数的变量，我应该有吗？在这种情况下，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T03:53:54.247

你为什么不试试这个？

`mfit1 <- lm( formula = colgpa ~ hsperc + sat, data=GPA2[1:2071,])`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-01T16:33:58.327

```
mfit1 <- lm(formula = colgpa ~ hsperc + sat, 
            data=GPA2, 
            subset=1:2070  ) 
```

# asp.net - 用户控制生产时未找到文件错误

> ID：12895821
> 
> 赞同：0
> 
> 时间：2012-10-15T12:36:58.080
> 
> 标签：asp.net, sharepoint, sharepoint-2007, moss

我为 sharepoint 2007 站点制作了 2 个用户控件。测试服务器上一切正常。我将它部署在生产环境中，但只有 1 个被正确部署和放置。第二个用户控件已添加 n 部署到 Web 部件库，但当我将其添加到 Web 部件页面时会出现“找不到文件”错误。我使用 WSP 部署它。但它给出了这个错误。我检查了日志它没有显示任何内容。我不知道该怎么做。请帮忙。如果需要更多详细信息，我准备分享，但请帮助我！[我得到的错误] [http://i.stack.imgur.com/jOjwb.jpg](http://i.stack.imgur.com/jOjwb.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:58:21.167

WSP 将根据您的要求进行部署。您可以使用 WSPBuilder [http://wspbuilder.codeplex.com/自动构建 WSP](http://wspbuilder.codeplex.com/)

您不应将用户控件部署到 Web 部件库。用户控件应部署到 CONTROLTEMPLATES，因此相应地修改您的 WSP。

您可以使用 SmartPart 显示您开发的任何控件。 [http://smartpart.codeplex.com/](http://smartpart.codeplex.com/)

# java - 如何在 LibGDX 中绘制 BitmapFont？

> ID：12895822
> 
> 赞同：13
> 
> 时间：2012-10-15T12:36:59.957
> 
> 标签：java, libgdx

我在认真打赌我做了一些愚蠢的事情，只是似乎没有注意到它。

```
package com.me.mygdxgame;

import com.badlogic.gdx.ApplicationListener;
import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.graphics.GL10;
import com.badlogic.gdx.graphics.OrthographicCamera;
import com.badlogic.gdx.graphics.Texture;
import com.badlogic.gdx.graphics.Texture.TextureFilter;
import com.badlogic.gdx.graphics.g2d.BitmapFont;
import com.badlogic.gdx.graphics.g2d.Sprite;
import com.badlogic.gdx.graphics.g2d.SpriteBatch;
import com.badlogic.gdx.graphics.g2d.TextureRegion;

public class Locked implements ApplicationListener
{
    private OrthographicCamera camera;
    private SpriteBatch batch;
    private Texture texture;
    private Sprite sprite;
    private BitmapFont font;
    private CharSequence str = "Hello World!";
    private float width;
    private float height;

    @Override
    public void create()
    {
        width = Gdx.graphics.getWidth();
        height = Gdx.graphics.getHeight();

        camera = new OrthographicCamera(1, height / width);
        batch = new SpriteBatch();

        texture = new Texture(Gdx.files.internal("data/libgdx.png"));
        texture.setFilter(TextureFilter.Linear, TextureFilter.Linear);

        TextureRegion region = new TextureRegion(texture, 0, 0, 512, 275);

        sprite = new Sprite(region);
        sprite.setSize(0.9f, 0.9f * sprite.getHeight() / sprite.getWidth());
        sprite.setOrigin(sprite.getWidth() / 2, sprite.getHeight() / 2);
        sprite.setPosition(-sprite.getWidth() / 2, -sprite.getHeight() / 2);

        font = new BitmapFont(Gdx.files.internal("data/digib.fnt"),
                Gdx.files.internal("data/digib.png"), false);
    }

    @Override
    public void dispose()
    {
        batch.dispose();
        texture.dispose();
    }

    @Override
    public void render()
    {
        Gdx.gl.glClearColor(1, 1, 1, 1);
        Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);

        batch.setProjectionMatrix(camera.combined);
        batch.begin();
        font.setColor(0.0f, 0.0f, 0.0f, 1.0f);

        //sprite.draw(batch);
        font.draw(batch, str, width*0.5f, height*0.5f);
        batch.end();
    }

    @Override
    public void resize(int width, int height)
    {
    }

    @Override
    public void pause()
    {
    }

    @Override
    public void resume()
    {
    }
} 
```

该项目是使用他们提供的模板工具生成的**gdx-setup-ui.jar** 正如您在代码中看到的那样，我没有费心摆脱默认代码（只是一些简单的绘制代码来呈现 LibGDX 徽标）。

因此，使用干净生成的项目，我在此处遵循本指南 [http://code.google.com/p/libgdx-users/wiki/addingText2D](http://code.google.com/p/libgdx-users/wiki/addingText2D)

最后到达上面提供的代码。

问题是，为什么 !@#$ing 文本不显示！？我换了很多次位置，仍然没有运气：\

我错过了什么？

**仅供参考：**字体很好，我将它们放到另一个游戏中，它可以工作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T20:02:31.170

尝试像这样更改投影矩阵：

```
Matrix4 normalProjection = new Matrix4().setToOrtho2D(0, 0, Gdx.graphics.getWidth(),  Gdx.graphics.getHeight());

batch.setProjectionMatrix(normalProjection); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-28T18:56:47.557

我所做的就是

```
 spriteBatch = new SpriteBatch();
 font = new BitmapFont(Gdx.files.internal("data/nameOfFont.fnt"),
         Gdx.files.internal("data/nameOfFont.png"), false); 
```

并在渲染方法中

```
spriteBatch.begin();
 font.setColor(1.0f, 1.0f, 1.0f, 1.0f);
 font.draw(spriteBatch, "some string", 25, 160);
 spriteBatch.end(); 
```

您可以在我的博客上阅读更多相关信息：http: [//algorhymes.wordpress.com/2012/11/17/javalibgdx-fonts/](http://algorhymes.wordpress.com/2012/11/17/javalibgdx-fonts/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-11-18T09:43:09.480

就我个人而言，我不太喜欢将所有字体转换为 .fnt 格式。如果您需要为某种字体设置不同的大小，则必须花费大量时间（和应用程序空间）来进行所有转换。

您可以只使用 FreeType 扩展并直接从 .ttf 加载

```
FreeTypeFontGenerator generator = new FreeTypeFontGenerator(fontFile);
BitmapFont font15 = generator.generateFont(15);
BitmapFont font22 = generator.generateFont(22);
generator.dispose(); 
```

更多信息[在这里](http://www.badlogicgames.com/wordpress/?p=2300)

渲染的完成方式与 watis 所解释的相同。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-09-24T09:15:30.363

使用 libgdx 网站提供的 hiero 创建一个 .fnt 文件

设置字体150的大小，它将创建一个.fnt文件和一个png文件

将两个文件复制到您的资产文件夹中

现在声明字体

BitmapFont 字体；

创建方法中的 nw

font = new BitmapFont(Gdx.files.internal("data/100.fnt"), false);//100 是字体名称，你可以给你的字体起任何名字

在渲染中

字体.setscale(.2f);

font.draw(batch, "随便你写什么", x,y);

这将顺利进行

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-06-18T18:51:46.043

您的代码的主要问题是您创建了
viewportWidth = 1 &
viewportHeight = width/height的相机

并且您正在以 width*0.5f & height*0.5f 绘制字体，这超出了相机的范围

将相机初始化更改为

```
camera = new OrthographicCamera(width, height); 
```

....或将绘制字体语句更改为

```
font.setScale(1,height/width);
font.draw(batch, str, 0.5f, height/width*0.5f); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-11T12:15:55.500

您是否尝试过像这样手动提供位置。我希望这能工作 batch.setProjectionMatrix(camera.combined); 批处理.enableBlending(); 批处理.开始（）；
font.draw(batch, yourString, 100,100);
批处理.end();

# matlab - Simulink 模型中信号的初始值

> ID：12895826
> 
> 赞同：0
> 
> 时间：2012-10-15T12:37:07.797
> 
> 标签：matlab, simulink

我对下面的 simulink 模型有一些疑问。

![在此处输入图像描述](../Images/a0f6bb025b337497f51c7ecb82f5f91c.png)

1.  给定 In1 中的输入，红色标记的**1**的初始输入是什么？

2.  红色`1/s`标记为**2**的块是什么意思？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T15:33:12.117

反过来回答这些问题可能更容易：

2）红色`1/s`标记为**2**的块是什么意思？

答：这是[积分](http://www.mathworks.com/help/simulink/slref/integrator.html)器块。它在当前时间步输出其输入的积分。请注意，在第一个时间步，它将输出您指定的任何内容作为其初始条件。默认情况下，我相信初始条件为 0。（有关设置此块的各种参数的更多信息，包括初始条件，请参阅上面的链接文档）。

1) 给定一个输入，红色标记的**1**`In1`的初始输入是什么？

 ****答： 1**处的初始输入实际上完全独立于`In1`。它仅取决于在给定时间步长输入的块的初始条件。

您必须考虑块的执行顺序。在此模型中，要执行的第一个块可能是您用**2**标记的积分器块。紧随其后的是下一个积分器模块和它们提供的增益模块。最后执行的块之一实际上是输入的减法块`In1`。这是因为这个 Subtract 块需要知道它的输入是什么，然后才能对它们进行任何类型的计算，因此，其他块需要首先执行。

考虑到这里有一个循环，这可能有点令人困惑，因此减法块最终会输入到积分器块中。这最终不会成为问题，因为 Integrator 块没有**直接馈通**。这意味着积分器的电流输出不是电流输入的直接函数。相反，它是根据积分器块的当前*状态*（主要由先前时间步的输入确定）计算的。这意味着 Integrator 模块无需知道其当前输入即可计算其当前输出。

因此，在第一个时间步，积分器模块的输出只是您设置的初始条件（或默认初始条件 0）。所以最有可能的是， **1**处的初始值是 0。

（[这个链接](http://www.weizmann.ac.il/matlab/toolbox/simulink/ug/how_simulink_works15.html)有更多关于代数环和直接馈通的信息）。

有关 Simulink 中执行顺序的更多信息，请参阅[此处](http://www.mathworks.com/help/simulink/ug/controlling-and-displaying-the-sorted-order.html)。此链接还显示了如何在模型中显示执行顺序，这有时非常有用。**

# javascript - 在javascript中使用正则表达式将每个前导和尾随空格替换为下划线

> ID：12895828
> 
> 赞同：4
> 
> 时间：2012-10-15T12:37:12.163
> 
> 标签：javascript, regex, string, replace, whitespace

```
var str = '  Some string    ';
var output = str.replace(/^\s|\s(?=\s*$)/g , '_'); 
```

输出应如下所示

```
'___Some string____' 
```

此代码适用于尾随空格，但所有前导空格都只替换为一个下划线。

用于此的工作 php 正则表达式是： `/\G\s|\s(?=\s*$)/`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T12:45:07.703

不漂亮，但可以完成工作

```
var str = "  Some string    ";
var newStr = str.replace(/(^(\s+)|(\s+)$)/g,function(spaces){ return spaces.replace(/\s/g,"_");}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T12:46:06.583

这***有效***，但我不喜欢它：

```
var str = "  some string  ";
var result = str.replace(/^\s+|\s+$/g, function(m) {
    return '________________________________________'.substring(0, m.length);
}); 
```

或者更灵活：

```
var str = "  some string  ";
var result = str.replace(/^\s+|\s+$/g, function(m) {
    var rv = '_',
        n;
    for (n = m.length - 1; n > 0; --n) {
        rv += '_';
    }
    return rv;
}); 
```

当然，这可以细化。

但我更喜欢[epascarello 的回答](https://stackoverflow.com/a/12895944/157247)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T13:47:01.380

另一个正则表达式

```
var str = "  asdf       "
str.replace(/^[ ]+|[ ]+$/g,function(spc){return spc.replace(/[ ]/g,"_")})
//"__asdf_______" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-06T12:41:07.117

现在[`String.prototype.repeat()`](https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Global_Objects/String/repeat)可以将接受的答案改进为

```
function replaceLeadingAndTrailingWhitespace(text, replace) {
    return text.replace(/^\s+|\s+$/g, (spaces) => replace.repeat(spaces.length));
} 
```

# excel - Quality Center Microsoft Excel 加载项错误

> ID：12895829
> 
> 赞同：0
> 
> 时间：2012-10-15T12:37:12.793
> 
> 标签：excel, add-in, hp-quality-center

我在 Mercury Quality Center 8.2 Build 3406 Entreprise Edition 上工作。

为了在 Excel 中为 Test Director 编写测试，我安装了 Excel 插件。当我尝试将 Excel 文件导出到 Quality Center 时，我收到以下消息

> Quality Center Microsoft Excel 加载项错误
> 
> 发生一般错误。重新启动 Microsoft Excel。类不支持自动化或预期的接口'。

我使用 MS Office Professional Edition 2003 的 Excel 2003 (11.5612.5606) 部分。

有人可以告诉我如何使这个插件正确工作吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T09:02:28.030

**尝试以下步骤：**

> 启动 MS Excel 2010 转到 Option--> Trus Center -->Trus Center Settings --> Protected View --> 取消选中 Enable Data Execution Prevention Mode 重新启动 Excel。

**仍然面临问题：**

> 导航到 QC 中的插件页面
> 
> 单击“HP ALM 客户端注册”并运行“注册 HP ALM 客户端”
> 
> 关闭并重新启动 Excel 程序。

# android - 如何从小部件调用活动 - Android

> ID：12895831
> 
> 赞同：0
> 
> 时间：2012-10-15T12:37:17.050
> 
> 标签：android

感谢您之前的回复，我正在使用小部件进行应用程序，我的想法是单击小部件时打开一个活动。我用这段代码来获取活动

```
try {
    WidgetActivity.Widget.onUpdate(context, appWidgetManager, appWidgetIds);
    Toast.makeText(context, "Update Widget", Toast.LENGTH_SHORT).show();
} catch (Exception e) {
    e.toString();
}
Intent myIntent = new Intent(context, Test.class);
startActivity(myIntent); 
```

但我收到 forceclose 错误。我是小部件概念的新手。我不确定在哪里调用启动活动方法。请指导我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:42:12.010

查看AppWidgets[的文档](http://developer.android.com/guide/topics/appwidgets/index.html)。特别`onUpdate()`是讨论的部分，因为示例显示了如何`Activity`从小部件调用一个。

# php - Google Drive API 和移动

> ID：12895835
> 
> 赞同：0
> 
> 时间：2012-10-15T12:37:42.947
> 
> 标签：php, google-drive-api

我正在建立一个用户登录并连接到他/她的谷歌驱动器的网站！这很好用，即使我通过手机测试它......但是！

每当用户单击文档时是否有可能，而不是在新选项卡上打开文档，而是在谷歌驱动器应用程序中打开？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:52:29.033

您可以使用`alternateLink`云端硬盘文件元数据的字段使用相关的 Google 编辑器或查看器打开文件：

[https://developers.google.com/drive/v2/reference/files#alternateLink](https://developers.google.com/drive/v2/reference/files#alternateLink)

# ios - iOS 上的 Phonegap + head.js 不起作用？

> ID：12895839
> 
> 赞同：2
> 
> 时间：2012-10-15T12:37:54.650
> 
> 标签：ios, ajax, cordova, head.js

我在 iOS 上使用 Phonegap 2.1.0。在我的 main.html 文件中，我正在使用 jQuery 加载一些 html。

但是，我正在加载的其中一个 html 文件具有自己的 Javascript，它可以以相同的方式（$.ajax 等）加载其他文件。Android 中的 Phonegap 会加载这些文件并在其中执行 Javascript，但 iOS 不会。

示例：index.html：

```
<...>
  <body>
    <script>
      $(document).on('pageinit', function() {
        $.ajax({
          url: 'some.url',
          success: function(data, status, jqxhr) {
            $("#some-div").html(data);
          },
          error: function(jqxhr, status, error) {}
        });
      });
    </script>
  </body>
</...> 
```

一些网址：

```
<script type="text/javascript">
  head.js(
    "config-file.js",

    function() {
      $.ajax({
        url: PATH + 'some-other.url', // PATH? see below
        success: function(data, status, jqxhr) {
          $("#some-div").html(data);
        },
        error: function(jqxhr, status, error) {}
      });
    });
</script> 
```

config-file.js: var PATH = 'mypath';

some-other.url：无法在 iOS 中加载

所有加载的文件都来自同一个域。

同样，上面的代码适用于 Android。任何想法为什么iOS无法做到这一点，以及如何解决它？是head.js吗？(0.9.6)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:01:41.137

既然您使用的是 jQuery Mobile，它无论如何都依赖于 jQuery，为什么不直接使用 jQuery 来进行文件加载呢？

```
$.getScript('path')
   .done(function(){
       ...
}); 
```

否则你也可以试试 HeadJS v0.99 看看它是否能解决你的问题。

# c - C：有效循环大数组

> ID：12895843
> 
> 赞同：1
> 
> 时间：2012-10-15T12:38:15.230
> 
> 标签：c

我有一个包含大约 500 个数字的主列表整数数组。而且，我有一组 100 个随机数字，这些数字是从主列表中挑选出来的，以查找丢失的数字。现在，我需要对照主列表检查这个随机数列表。在不挂起程序的情况下，C 编程中最好的方法是什么？如果我对 500 个元素进行简单的“for”循环，它将挂起，因为它需要遍历整个列表。有人可以指导我吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T12:51:45.830

首先，您应该对其进行概要分析。我们所说的最多只有 500*100=50,000 次操作。一台普通的现代计算机能够在不到十分之一秒的时间内完成它，除非你的编码效率很低。

假设您无论如何都想优化它，您应该对主数组进行排序，并对随机数组的每个元素运行[二进制搜索](http://en.wikipedia.org/wiki/Binary_search_algorithm)。这会将操作次数从 50,000 减少到最多 900，因为对 500 个数字进行二分查找最多需要 9 次比较。

这是一个使用标准 C 库的内置排序和二进制搜索函数（[`qsort`](http://en.cppreference.com/w/c/algorithm/qsort)和）的实现：[`bsearch`](http://en.cppreference.com/w/c/algorithm/bsearch)

```
int less_int(const void* left, const void* right) {
    return *((const int*)left) - *((const int*)right);
}

int main(void) {
    size_t num_elements = 500;
    int* a = malloc(num_elements*sizeof(int));
    for(size_t i=0 ; i<num_elements ; i++) {
        a[i] = rand() % num_elements;
    }
    qsort(a, num_elements, sizeof(int), less_int);
    size_t num_rand = 100;
    int* r = malloc(num_rand*sizeof(int));
    for(size_t i=0 ; i < num_rand ; i++) {
        r[i] = rand() % num_rand;
    }

    for (size_t i = 0 ; i != num_rand ; i++) {
        int *p = (int*) bsearch (&r[i], a, num_elements, sizeof(int), less_int);
        if (p) {
            printf ("%d is in the array.\n", *p);
        } else {
            printf ("%d is not in the array.\n", r[i]);
        }
    }

    free(a);
    free(r);
    return 0;
} 
```

这是[ideone 上这个正在运行的程序](http://ideone.com/01CDC)的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T13:07:00.023

n - 随机数组长度。

m - 主列表数组长度。

1.  对随机数组进行排序。**n*log(n)**
2.  在排序数组中对主列表中的每个元素进行二进制搜索。因此，您将拥有所有缺失的元素。**(m)*log(n)**

=> **(m+n) * log(n)**表示整个操作。在**n=100**和**m=500**的情况下，我们有

**600 * log(100)**以 2 为底的日志

与原始编码的 50000 次迭代相比，大约 3986 次迭代。

PS：如果两个数组都已排序，只需比较 O(m) 就足够了。

# ruby-on-rails - Rails 3 + fb_graph 如何获取访问令牌以发布到我自己的 FB 页面

> ID：12895850
> 
> 赞同：1
> 
> 时间：2012-10-15T12:38:21.557
> 
> 标签：ruby-on-rails, ruby-on-rails-3, facebook-graph-api, fb-graph

我正在使用 Rails 3 + fb_graph 发布到我自己的 Facebook 页面。我有有效的代码，但它使用的访问令牌只能工作几个小时。每天刷新几次此访问令牌非常烦人。所以我注册了一个FB应用程序。我现在有：

```
 my_app = FbGraph::Application.new("App ID");
  acc_tok = my_app.get_access_token("App Secret");
  me = FbGraph::User.me(acc_tok)
  me.fetch
  me.accounts
  account = me.accounts.select {|account| account if account.name == "BoaJobs.com"}.first

  page = FbGraph::Page.new(account.identifier)

  note = page.note!(:access_token => account.access_token, :subject => @title, :message => @message, :link => @url) 
```

但我在 me.fetch 行上遇到错误：

```
 OAuthException :: An active access token must be used to query information about the current user. 
```

有人可以发布一些代码来帮助我解决这个问题。非常感谢您提前。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T03:56:09.343

我建议您参考[https://github.com/nov/fb_graph/wiki/Page-Management](https://github.com/nov/fb_graph/wiki/Page-Management)

其中 nov 声明：您需要页面的访问令牌来管理您的页面。您（用户的）访问令牌在这里不起作用。

按照他的链接到 facebook 开发者网站了解更多信息

您将需要用户 access_token，我通过omniauth-facbook [https://github.com/mkdynamic/omniauth-facebook执行此操作](https://github.com/mkdynamic/omniauth-facebook)

您可以通过首先将此初始化程序输入到您的应用程序来检索使用情况

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :facebook, ENV['FACEBOOK_KEY'], ENV['FACEBOOK_SECRET'],
           :scope => 'email,user_birthday,read_stream', :display => 'popup'
end 
```

（请注意，您可以在此处更改范围的权限，检查 facebook 开发人员登录权限以获取更多信息

omn​​iauth 和 omniauth-facebook 有一些内部工作原理，但要点是当您从 facebook 收到回调时，您会从请求中获得机架 omniauth 哈希

```
omniauth = request.env["omniauth.auth"] 
```

从那里你可以像这样访问用户访问令牌

```
facebook_user_token = omniauth['credentials']['token'] 
```

然后，您可以将该令牌输入您的 fb_graph 页面调用

```
page = FbGraph::Page.new('FbGraph').fetch(
  :access_token => facebook_user_token,
  :fields => :access_token
) 
```

然后，您只需调用所需的方法即可创建便笺，而无需引用访问令牌

```
note = page.note!(:subject => @title, :message => @message, :link => @url) 
```

# c++ - 无法编译 ODEINT 包中的示例

> ID：12895857
> 
> 赞同：3
> 
> 时间：2012-10-15T12:38:56.070
> 
> 标签：c++, boost, ode

我正在尝试在 C++ 中解决一组耦合的 ODE，并且我决定尝试 odeint（[可在此处获得](http://headmyshoulder.github.com/odeint-v2/)），因为我已经阅读了很多关于它的好东西。但是，我正在编译包中包含的示例。情况如下：

到目前为止，我只下载了包并解压了它。我在 Windows XP 上运行 Visual C++ 6，并且正在编译示例“simple1d”。我收到错误消息：“无法打开包含文件：'boost/config.hpp'：没有这样的文件或目录”。

我不清楚我错过了什么。我需要完整的 boost 库来完成这项工作吗？我的印象是 ODEINT 是一个“独立”包。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T14:46:14.660

您的错误表明编译器找不到 boost 库。您应该从 boost.org 下载它们并将它们添加到您的标题路径中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T13:34:49.163

你在哪里下载并解压包？包主页说它是一个只有头文件的包，所以你只需要让Visual找到头文件。我有一段时间没有使用 Visual，但是快速搜索一下“Visual 6 添加标题路径”之类的内容应该是一个不错的起点。看看[Visual Studio 在哪里寻找 C++ 头文件？](https://stackoverflow.com/questions/335408/where-does-visual-studio-look-for-c-header-files).

[从这个页面](http://www.steptools.com/support/stdev_docs/help/settings_vc6.html)引用：

> 在 Visual Studio 中，转到“**项目设置”**对话框。我们要更改 Debug 和 Release 版本的设置，因此在**Settings For**字段下，选择“All Configurations”。在**C/C++**选项卡下，选择**预处理器**选项。

包 tarball 有一个名为*boost*的目录：您希望将该目录的路径添加到**Additional include commands**框，然后添加`#include <boost/numeric/odeint/config.hpp>`到您的代码中。

**更新**

那么，您似乎已经正确安装了 odeint 标头：文件 boost/numeric/odeint/config.hpp 有一行`#include <boost/config.hpp>`，这是视觉必须抱怨的；所以我猜这个包不是独立的。它必须需要安装其他 boost 头文件。我在包主页或包 tarball 中都找不到任何提及任何依赖项的内容，所以我想你也应该尝试安装 boost。在此处下载[1.51.0 版本](http://www.boost.org/users/history/version_1_51_0.html)，[这是 windows 文档](http://www.boost.org/doc/libs/1_51_0/more/getting_started/windows.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-31T11:30:11.647

[您必须从http://headmyshoulder.github.io/odeint-v2/downloads.html](http://headmyshoulder.github.io/odeint-v2/downloads.html)下载 odeint，从[http://www.boost.org/users/history/version_1_51_0.html](http://www.boost.org/users/history/version_1_51_0.html)下载Boost c++ 库。如果您使用代码块，请右键单击您的项目，选择构建选项，选择搜索目录并添加两个引用，一个用于 odeint，一个用于 boost。

# android - 多次调用 Application.onCreate

> ID：12895858
> 
> 赞同：1
> 
> 时间：2012-10-15T12:39:00.890
> 
> 标签：android

我有一个应用程序，我在其中扩展 Application 类并覆盖 onCreate 方法。
在我的 onCreate 中，我使用 AlarmManager 安排服务每 5 分钟运行一次。
在日志中，我看到一段时间后再次调用 onCreate get，就好像应用程序已重新启动/重新创建一样。
这最终导致我的服务与第一次执行不同步。
有没有办法防止这种情况并保证应用程序的 onCreate 中的代码将只执行一次（当然假设应用程序没有被用户明确关闭）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:40:59.320

`onCreate()`on your`Application`被称为启动过程的一部分。如果您在日志中看到它被多次调用，那是因为您的进程在两次运行之间被终止。

# javascript - is(":focus") 总是返回 true

> ID：12895862
> 
> 赞同：2
> 
> 时间：2012-10-15T12:39:27.973
> 
> 标签：javascript, jquery

我之所以问[这个问题](https://stackoverflow.com/questions/12841350/raise-different-events-if-a-textbox-is-focused-or-not)是因为我需要做一些事情，而且我在使用 jQuery 时遇到了一些问题。所以我要提出这个问题，因为其他人也可能有这个问题。

在我的另一个问题中发布的答案中，用户 Felix 告诉我做这样的事情：

```
$(document).keypress(function(e) {
    e.preventDefault();

    if(e.which == 13 ) {
        if($("#searchInput").is(":focus")) {
          alert("search form submitted");
          return false;
        } else {
          alert("save form submitted");                  
          return false;
        }
    }
});
​ 
```

这似乎是我需要的，但是，条件`if($("#searchInput").is(":focus"))`总是返回 True，不管控制的重点是什么**。**

任何人都知道为什么会发生这种情况或我可以通过其他任何方式做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:11:23.307

It might have been caused by older version of jquery used. If it's older than 1.6 then `:focus` won't work if you havent defined it. Version 1.6 and further have the `:focus` selector, we don't have to define it separately. So just upgrade your library version if it's old or define `:focus` somewhere in your js file. Check api for 1.6 here: [jquery version 1.6](http://api.jquery.com/category/version/1.6/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T13:18:30.417

您的 jQuery 版本可能已过时。通过以下方式获取最新版本：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T13:22:52.117

我的 jQuery 版本已经过时了，我刚刚从[这里](http://jquery.com/download/?rdfrom=http://docs.jquery.com/mw/index.php?title=Downloading_jQuery&redirect=no)获得了最新版本，现在代码运行正常。

# buffer - 协议消息标签的线路类型无效

> ID：12895864
> 
> 赞同：3
> 
> 时间：2012-10-15T12:39:34.610
> 
> 标签：buffer, protocols, protocol-buffers

我的应用程序通过 protobuf 从服务器向客户端发送数据。当我在客户端 Eclipse 上反序列化发送的有效负载时，会引发以下类型的期望：

```
Exception in thread "main" com.google.protobuf.InvalidProtocolBufferException: Protocol message tag had invalid wire type. 
```

当我调用“parseFrom()”时会发生预期。我知道在大多数情况下，错误在于语法错误的 protobuf 文件。因此，我希望在这里发布 protobuf 定义就足够了：

```
 package protobuf;

       option java_package = "com.carproject.abs.demo.protobuf";
       option java_outer_classname = "DesktopDevice_getCarsResponse";

    message CARS {

        required int64 carid = 1;
        required string carname = 2;

        message Carinformation {
            required string street = 1;
            required string postalcode = 2;
            required string city = 3;
            required string country = 4;
            required string cartimezoneid = 5;
        }

        message Right {
            optional string name = 1;
            optional int32 type = 2;
            optional int32 service = 3;
        }

        message PropertyType {
            optional string name = 1;
            optional string value = 2;
        }

        repeated Carinformation carinformation = 3; 
        repeated Right carrights = 4;
        repeated PropertyType carproperties = 5;
        repeated string inoid = 6;
    } 
```

这是显示数据如何在服务器端写入的代码：

```
// carObj returns the necessary Strings
CAR carObj = car.getCAR();

Builder newBuilder = DesktopDevice_getCarResponse.CAR.newBuilder();

newBuilder.setCarid( carObj.getCARID() );
newBuilder.setCarname( carObj.getCARNAME());

// hardcoded values here
newBuilder.getCarinformationBuilder(1).setStreet( carObj.getCARNFORMATION().getSTREET() );
newBuilder.getCarinformationBuilder(1).setPostalcode( carObj.getCARINFORMATION().getPOSTALCODE() );
newBuilder.getCarinformationBuilder(1).setCity( carObj.getCARINFORMATION().getCITY() );
newBuilder.getCarinformationBuilder(1).setCountry( fleetObj.getCARINFORMATION().getCOUNTRY() );
newBuilder.getCarinformationBuilder(1).setCartimezoneid( fleetObj.getCARINFORMATION().getCARTIMEZONEID() );

byte[] responsePayload = newBuilder.build().toByteArray();
RestServerResponseMessage responseMsg = new RestServerResponseMessage( requestMsg.getRequestId(), responsePayload, "XML");
return responseMsg; 
```

如您所见，Server 使用 protobuf 提供的 Builder 模式来设置必要的字符串。然后将数据序列化为 byte[] 并通过 protobuf 发送回客户端。

这是我尝试解析数据的客户端代码。

```
HttpEntity entity = response.getEntity();

    if (entity != null) {
        InputStream instream = entity.getContent();
        CAR car = DesktopDevice_getCarsResponse.CARS.parseFrom(instream);
        } 
```

调用 .parseFrom 时会引发异常。服务器代码和 carObj 工作正常。我已经在我的程序中成功发送了 protobuf 数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-29T07:38:24.573

`Base64.getEncoder.encode(protoMsg.toByteArray)`在服务器上使用。并使用`Base64.getDecoder.decode(receivedArray[Bytes])`. 在线发送的数据应始终进行编码和解码

# jquery - CSS display:none 和 tinyscrollbar 冲突

> ID：12895866
> 
> 赞同：1
> 
> 时间：2012-10-15T12:39:37.430
> 
> 标签：jquery, css, tinyscrollbar

我正在调整一个单页网站，其中包含独立可见的部分。例如，当我按下“服务”按钮时，它会转到页面的该部分而不显示其他内容。

服务部分需要一个滚动条。我正在使用 tinyscrollbar。

```
#services { width:1100px; height:440px; bottom:0; position:absolute; top:60px; display:none; } 
```

当 display:none 包括在内时，滚动条不起作用。它正在显示，但该栏无法滚动。当我删除 display:none 时滚动条起作用，但它完全占据了我的布局。首次访问时，服务内容（第 3 个菜单项）现在与第 1 个菜单项的内容混合显示。这只是第一次访问。使用菜单后问题消失，布局再次正常。

我无法弄清楚如何解决这个问题。

请帮忙。

谢谢！

ps 我现在不能让网站上线。我添加了一些截图，希望能让事情变得清晰。[删除 display:none](https://docs.google.com/file/d/0B5LemUAWeJMfMnpfbGJCWFdHa1U/edit) [添加 display:none](https://docs.google.com/file/d/0B5LemUAWeJMfWjgybXNLV0RTNGc/edit)第一个屏幕截图显示一个可滚动的滚动条，而第二个没有。该问题仅在进入网站时出现。按下按钮后问题消失

pps 请看这里的问题。我已经上传了网站：test.iwebs.ws

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:43:38.093

您可以定义**visibility:hidden**而不是**display:none**。

**可见性：隐藏**隐藏元素，但它仍然占用布局中的空间。

**display: none**从文档中完全删除元素。它不占用任何空间，即使它的 HTML 仍在源代码中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:55:00.450

如果显示 div，则需要在显示 div 后使用**tinyscrollbar_update()**函数**display:none;** 在页面加载。

```
var scrollbar = $('#services');
scrollbar.tinyscrollbar();

$('#services').show();

scrollbar.tinyscrollbar_update(); 
```

# c++ - 开源蜘蛛从网页获取链接，最快的方法是什么？

> ID：12895869
> 
> 赞同：0
> 
> 时间：2012-10-15T12:39:46.630
> 
> 标签：c++, web-crawler

我需要抓取网页并仅从页面中提取链接。链接可以是相对的，例如：

```
...\blah\foo.html 
```

最快的方法是什么？

1.  获取网页
2.  从任何形式中提取链接

**更新 ：**

也许我需要的是`htmlparser`？

# java - 在java中编程一个按钮最多每5秒按下一次

> ID：12895870
> 
> 赞同：4
> 
> 时间：2012-10-15T12:39:52.060
> 
> 标签：java, swing, printing, delay, jbutton

对于当前项目，我们需要只允许用户每 5 秒左右按一次按钮。我们使用按钮来启动打印作业，但我们需要阻止用户向按钮发送垃圾邮件并启动十几个打印作业。

我们目前正在尝试使用以下代码，但即使按钮被禁用，它似乎也会对点击进行排队。因此，在 5 秒延迟后，点击记录在那个时间按钮被禁用时甚至很难。

```
 private void Button1ActionPerformed(java.awt.event.ActionEvent evt) {                                        

        Button1.setEnabled(false);
        pressCount++;
        System.out.println("Press count: " + pressCount);
    PrintJob print = new PrintJob();
    try {
        Thread.sleep(5000);
    } catch (InterruptedException ex) {
        Logger.getLogger(GUIFrame.class.getName()).log(Level.SEVERE, null, ex);
    }
    try {
        print.PrintJob();
    } catch (IOException ex) {
        Logger.getLogger(GUIFrame.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T12:50:34.333

不要让 EDT 等待 5 秒。您应该使用另一个线程休眠 5 秒并启用按钮设置。像这样的东西：

```
new Thread(new Runnable() {
  public void run() {
    try {
      Thread.sleep(5000);
    } catch (InterruptedException e) {
      // handle it
    }
    SwingUtilities.invokeLater(new Runnable() {
      public void run() {
        Button1.setEnabled(true);
      }
    });
  }
}).start(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T13:00:13.703

> 在java中编程一个按钮最多每5秒按下一次

*   看看[JButton#setMultiClickThreshhold(long threshhold)](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractButton.html#setMultiClickThreshhold%28long%29)

*   正确的方法是添加[`Swing Action`](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)到[`JButton`](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)而不是 [`ActionListener][4]`并使用[`Swing Timer`](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)阻止[`isEnable`](http://docs.oracle.com/javase/7/docs/api/javax/swing/Action.html#isEnabled%28%29)

# objective-c - 如何检测自定义 UIImageView 触摸事件？

> ID：12895871
> 
> 赞同：0
> 
> 时间：2012-10-15T12:39:53.653
> 
> 标签：objective-c, uiimageview, uitouch

我正在使用自定义 UIImageview 来检测触摸？但我无法检测到对该特定图像视图的触摸。

```
-(void)viewDidLoad {
  [super viewDidLoad];
  mainView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 200)];
  image = [[UIImageView alloc] initWithFrame:CGRectMake(10, 300, 100, 100)];
  image.image = [UIImage imageNamed:@"CyanSquare.png"];
  image2 = [[UIImageView alloc] initWithFrame:CGRectMake(150, 600, 100, 100)];
  image2.image = [UIImage imageNamed:@"CyanSquare.png"];
  image.tag = 1;
  image2.tag = 2;
  [self.mainView addSubview:image];
  [self.mainView addSubview:image2];
  [self.view addSubview:mainView];
}

-(void)touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event {

   UITouch *touch = [[event allTouches] anyObject];
   [super touchesBegan:touches withEvent:event];
   if ([touch view] == [image viewWithTag:1]) {
    NSLog(@"touch  beggin 1");
    mainView.image = [UIImage imageNamed:@"VideoBkGround.png"];
   }
   if ([touch view] == [image2 viewWithTag:2])
    {
    NSLog(@"touch  beggin 2");
    mainView.image = [UIImage imageNamed:@"VideoRunning.png"];
   }
 } 
```

在这段代码中我没有检测到触摸？请帮助我？

如果没有自定义视图，它会被检测到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:45:37.517

您需要为要与之交互的 UIImageView 启用用户交互。

`@property(nonatomic, getter=isUserInteractionEnabled) BOOL userInteractionEnabled`

类似的东西：

```
image.userInteractionEnabled = YES; 
image2.userInteractionEnabled = YES; 
```

否则图像将无法触及...

# .net - 我可以使用 Linux/Mono 来部署 aspnet Web 应用程序吗？

> ID：12895874
> 
> 赞同：12
> 
> 时间：2012-10-15T12:40:01.187
> 
> 标签：.net, linux, apache, mono

我有一个 C#/ASP.NET 应用程序，它可以在带有 IIS 的 Windows 上运行。但最近我很想切换到 Linux/Mono。它提出了一些问题：

我可以在 Mono 中正确运行我的 Visual Studio 项目和源代码吗？

我的客户将 IIS 用于 ASP.NET。我的迁移会影响他们吗？换句话说，我的 Mono 项目是否在 IIS 中运行而没有任何更改或问题？

我可以毫无问题地在 Apache 中托管 Mono ASP.NET Web 项目吗？

我可以在 Mono 中完全使用我在 ASP.NET Web 表单中的技能吗？

等待您的宝贵建议和意见

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T12:44:48.360

是的，从广义上讲，你可以做你所要求的一切。

[Mono 网站上的 ASP.NET 页面](http://www.mono-project.com/ASP.NET)是一个很好的起点，它非常详细地涵盖了这些问题。

具体问题的答案：

> 我可以在 Mono 中正确运行我的 Visual Studio 项目和源代码吗？

通常，您不需要做太多更改，但您可以为 ASP.NET 编写特定于平台的代码（即使用 P/Invoke 或查找 C:\Windows）。Mono 有一个迁移分析器，可以检查这是否会影响您。如果你愿意，你也可以在 Windows 上运行 Apache 和 Mono。

> 我的客户将 IIS 用于 ASP.NET。我的迁移会影响他们吗？换句话说，我的 Mono 项目是否在 IIS 中运行而没有任何更改或问题？

您可以（并且应该）在您部署的每个平台上测试您的代码，但是编写可以部署到单声道的代码也应该很容易。

> 我可以毫无问题地在 Apache 中托管 Mono ASP.NET Web 项目吗？

是的，对 Apache 使用[mod_mono](http://www.mono-project.com/Mod_mono)。

> 我可以在 Mono 中完全使用我在 ASP.NET Web 表单中的技能吗？

是的，Mono 实现了 ASP.NET 2.0 Web 表单，具体细节可以看[这里](http://www.mono-project.com/ASP.NET#Supported_Versions)

# gnuplot - gnuplot - 填充曲线问题

> ID：12895876
> 
> 赞同：1
> 
> 时间：2012-10-15T12:40:05.873
> 
> 标签：gnuplot

我有以下`gnuplot`脚本：

```
#!/bin/bash
gnuplot << EOF

set term postscript portrait color enhanced 
set output 'temp.ps'
set border lw 0.2
unset key

set size 1,1
set origin 0,0
set size ratio 1
set size 0.47,0.47
set mxtics 2; set mytics 4

f(x,z)=z+5-5*log10(x)
set style fill transparent solid 0.1

set yrange [12:-2]; set xrange[0:10000]
plot f(x,17.55) w filledcurve lc rgb "black", \
f(x,17.5) w lines lt 2 lc rgb "green"

EOF 
```

这给了我这样的输出：

![填充曲线](../Images/6b41ef6e1cc00c50b95fd5701117e2a9.png)

我需要两个修复此图像中的两件事：

1-填充区域有一条黑线将其定界，这应该会消失

2- 填充物覆盖了 x 和 y 抽动，这不应该发生

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T13:45:46.500

解决 1):

```
set style fill transparent solid 0.1 noborder 
```

解决 2):

```
set grid noxtics nomxtics noytics nomytics front 
```

附带说明一下，`transparent`在您的`set style fill`命令中，postscript 终端中什么也不做，因为它不支持实心透明度。

# java - Vaadin 6.8.4 项目无法使用 Eclipse Juno J2EE 预览码头服务器启动 - 没有上下文

> ID：12895877
> 
> 赞同：0
> 
> 时间：2012-10-15T12:40:14.937
> 
> 标签：java, eclipse, jakarta-ee, jetty, vaadin

当我尝试在 Eclipse Juno 的“J2EE Preview”服务器上发布 Vaadin 6.8.4 项目时，我收到以下错误消息：

```
Error 404 - Not Found

No context on this server matched or handled this request.
Contexts known to this server are:    
 - myproject(/myproject) 
```

当我查看工作区的文件夹时，文件夹`.metdata.plugins/org.eclipse.wst.server.core/`中只有一个`publish0.dat`文件，`publish`但项目在文件夹`tmp0`中，这正常吗？如果没有，我该怎么做才能解决这个问题？

我使用新安装的 Java EE 版本的 Eclipse Juno 和来自 Eclipse Marketplace 的 Vaadin 6.8.4 插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:56:49.687

对于一个简单的动态网站，我遇到了同样的错误，清理和重新发布项目并没有改变任何事情，所以我安装了 tomcat，项目开始工作。

部署结构似乎存在错误或问题，因为码头的默认文件夹结构不同。

*我正在使用最新的 eclipse Juno 并尝试将其更新到最新的 repo 但没有任何改变

# cocos2d-x - cocos2d-x：移动时旋转 CCSprite 会改变它的最终位置

> ID：12895881
> 
> 赞同：1
> 
> 时间：2012-10-15T12:40:36.660
> 
> 标签：cocos2d-x, ccsprite, ccrotateby

我正在尝试为我的游戏制作动画，一只蚂蚁离开它的巢穴。它应该从右下角下降巢穴，面朝下，然后再次直视。

我创建了两个动作序列，一个用于移动，另一个用于旋转，并将它们放在一个 CCSpawn 中。如果我只执行移动动作，它可以正常工作，但是当动作一起执行时，最后精灵会回到原来的位置。

我不知道发生了什么。你们能帮忙吗？

```
CCLayer * gameLayer = CCLayer::create();

Ant* ant = Ant::create(); // Ant is a CCSprite

CCPoint nestp = ccp(45, 172);

ant->setPosition(nestp);

gameLayer->addChild(ant);

addChild(gameLayer);

    // ant walking animation
CCAnimate * antWalk = CCAnimate::create(_antWalk);
ant->runAction(CCRepeatForever::create(antWalk));   

CCPoint p1 = ccp(55, 165), p2 = ccp(75,160), p3 = ccp(90,110), p4 = ccp(105, 50);   

CCSequence *moveOut = (CCSequence *)CCSequence::create(CCMoveTo::create(0.3, p1), CCMoveTo::create(0.3, p2), CCMoveTo::create(0.7, p3), CCMoveTo::create(0.7, p4), NULL);

CCSequence *rotateOut = (CCSequence *) CCSequence::create(CCRotateTo::create(0.5, 50), CCDelayTime::create(1), CCRotateTo::create(0.5, 0));

CCSpawn *leaveNest = (CCSpawn *)CCSpawn::create(moveOut, rotateOut, NULL);

ant->runAction(leaveNest); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:47:05.880

在查看我自己的问题时，我意识到我忘记在旋转序列的末尾添加 NULL。它应该是这样的：

```
CCSequence *rotateOut = (CCSequence *) CCSequence::create(CCRotateTo::create(0.5, 50), CCDelayTime::create(1), CCRotateTo::create(0.5, 0), NULL); 
```

我不会想到这种行为，因为没有错误，这就是为什么我花了这么长时间才发现但现在它工作正常！我希望它能帮助遇到同样问题的人。

# ruby-on-rails - 如何从 link_to 调用操作

> ID：12895884
> 
> 赞同：1
> 
> 时间：2012-10-15T12:40:58.090
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我有索引页 users_controller：

```
 def index
    @companies = Company.where(:is_confirmed => "f")
    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @companies }
    end
  end 
```

我想按一下按钮，公司将状态更改为已确认

```
 def confirm
    company = Company.find(params[:id])
    company.is_confirmed = "t"
    company.save
    redirect_to users_path
  end 
```

应该调用确认的按钮

```
= link_to '<i class="icon-ok icon-white"></i> '.html_safe + t('Confirm'), users_path, confirm: t('Are you sure'), :controller => "users", :action => "confirm", :class => 'btn btn-small btn-success' 
```

请告诉我如何修复或告诉我在哪里可以看到工作版本

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T13:12:50.360

```
= link_to confirm_company_path(company), confirm: 'Are you sure', method: :post do
  %i{class: "icon-ok icon-white"}
  = t('Confirm') 
```

在路线.rb

```
post '/company/:id/confirm' => "users#confirm", as: :confirm_company 
```

`GET`1）更改对象时不要使用请求，`POST`而是使用。

2) 将确认逻辑移至公司模型并确认动作至公司控制器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T13:01:22.003

您必须在 controller/action/id 参数和 RESTful 路由之间进行选择，检查[rails api](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to)。你可能想要这个：

```
= link_to '<i class="icon-ok icon-white"></i> '.html_safe + t('Confirm'), :controller => "users", :action => "confirm", :id => @companies, method: :post, confirm: t('Are you sure'), :class => 'btn btn-small btn-success' 
```

或者

```
= link_to '<i class="icon-ok icon-white"></i> '.html_safe + t('Confirm'), confirm_users_path(@companies), method: :post, confirm: t('Are you sure'), :class => 'btn btn-small btn-success' 
```

暗示你的路线看起来像这样（RESTful）：

```
resources :users do
  post 'confirm'
end 
```

Yuri Barbashov 是对的，这里的帖子更有意义。

# c# - 为所有文本框控件赋予相同的属性

> ID：12895885
> 
> 赞同：1
> 
> 时间：2012-10-15T12:40:59.263
> 
> 标签：c#

如何为以相同形式存在的所有文本框赋予相同的属性。

```
 foreach (var textbox in this.Controls.OfType<TextBox>())
        {
            textbox.ContextMenu = new ContextMenu();
        } 
```

上面的代码仅在文本框不是嵌套格式时才有效。

在我的项目中，我在 tabcontrol 中有多个标签页。所以我不能实现上面的代码。但我可以实现以下代码：

```
 foreach (TextBox textbox in this.Controls.OfType<TabControl>().SelectMany(tc => tc.Controls.OfType<TabPage>().SelectMany(page => page.Controls.OfType<TextBox>())))
        {
            textbox.ContextMenu = new ContextMenu();
        }
        foreach (var textbox in this.tabCarInsurance.Controls.OfType<TextBox>())
        {
            textbox.ContextMenu = new ContextMenu();
        }
        foreach (var textbox in this.tabHomeLoans.Controls.OfType<TextBox>())
        {
            textbox.ContextMenu = new ContextMenu();
        }
        foreach (var textbox in this.tabRetirement.Controls.OfType<TextBox>())
        {
            textbox.ContextMenu = new ContextMenu();
        } 
```

在这里，我正在为每个 tabControl 实现。我仍然不喜欢（因为我有更多的标签页要处理）。有没有办法减少上面的代码。

我尝试了以下代码：（*不工作*）

```
 foreach (var textbox in this.Controls.OfType<TabControl>().OfType<TextBox>())
        {
            textbox.ContextMenu = new ContextMenu();
        } 
```

我从[上一个问题](https://stackoverflow.com/q/12894451/1577396)中得到了上面的代码知识。

请帮助
提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T12:46:37.187

```
 private void SetProperty(Control ctr)
    {
        foreach(Control control in ctr.Controls)
        {
            if (control is TextBox)
            {
                control.ContextMenu = new ContextMenu();               
            }
            else
            {
                if (control.HasChildren)
                {
                    SetProperty(control);
                }                    
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T12:49:57.923

只需使用递归遍历所有控件子集合：

```
void SetControl(ContextMenu menu, Control control)
{
    if (control is TextBox)
        control.ContextMenu = menu;
    else
    {
        foreach (Control c in control.Controls)
            SetControl(menu, c);
    }
} 
```

它将找到所有文本框并为所有文本框设置一个相同的上下文菜单。

例如，您可以从表单的 OnLoad 事件处理程序中调用它。虽然假设您已经`yourContextMenu`为表单定义了。

```
 private void Form1_Load(object sender, EventArgs e)
    {
        SetControl(yourContextMenu, this);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T12:51:21.117

从您的 tabcontrol 容器调用的扩展方法怎么样...

```
public static class ControlExtensions
{
    public static void SetContextMenuOnChildTextBoxes(this Control control)
    {
        if (control is TextBox)
        {
            control.ContextMenu = new ContextMenu();
        }
        if (control.Controls != null)
        {
            foreach (Control controlChild in control.Controls)
            {
                controlChild.SetContextMenuOnChildTextBoxes();
            }
        }
    }
} 
```

这可以放在代码的公共区域中，以便可以从任何需要此功能的父母那里调用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T12:48:39.593

尝试：

```
private void CtxMenu(Control parent)
{
    foreach (Control child in parent.Controls)
    {
        if (child is TextBox)
        {
            (child as TextBox).ContextMenu = new ContextMenu(); 
        }
} 
```

# python - 如何只允许输入“stop”、“”的字符串值，然后检查并转换为float

> ID：12895890
> 
> 赞同：0
> 
> 时间：2012-10-15T12:41:27.987
> 
> 标签：python, python-3.x

嗨，我在循环结束时遇到问题。我需要接受输入作为字符串来获取“停止”或“”，但我不需要任何其他字符串输入。输入转换为浮点数，然后添加到列表中，但如果用户键入“bob”，我会收到转换错误，并且我无法设置输入（浮点数），因为那时我不能接受“停止”。

完整的当前代码如下。

我目前的想法如下：

1.  检查“停止”，“”
2.  检查输入是否为浮点数。
3.  如果不是 1 或 2，则请求有效输入。

请问有什么想法吗？如果它很简单，只需指出我的方向，我会尝试将其制作出来。否则...

谢谢

```
# Write a progam that accepts an unlimited number of input as integers or floating point.
# The input ends either with a blank line or the word "stop".

mylist = []

g = 0
total = 0
avg = 0

def calc():
    total = sum(mylist);
    avg = total / len(mylist);
    print("\n");
    print ("Original list input: " + str(mylist))
    print ("Ascending list: " + str(sorted(mylist)))
    print ("Number of items in list: " + str(len(mylist)))
    print ("Total: " + str(total))
    print ("Average: " + str(avg))

while g != "stop":
    g = input()
    g = g.strip()  # Strip extra spaces from input.
    g = g.lower()  # Change input to lowercase to handle string exceptions.
    if g == ("stop") or g == (""):
        print ("You typed stop or pressed enter") # note for testing
        calc() # call calculations function here
        break

# isolate any other inputs below here ????? ---------------------------------------------
        while g != float(input()):
            print ("not a valid input")
    mylist.append(float(g)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T12:55:33.083

我认为pythonic方式是这样的：

```
def calc(mylist): # note the argument
    total = sum(mylist)
    avg = total / len(mylist) # no need for semicolons
    print('\n', "Original list input:", mylist)
    print("Ascending list:", sorted(mylist))
    print ("Number of items in list:", len(mylist))
    print ("Total:", total)
    print ("Average:", avg)

mylist = []
while True:
   inp = input()
   try:
       mylist.append(float(inp))
   except ValueError:
       if inp in {'', 'stop'}:
            calc(mylist)
            print('Quitting.')
            break
       else:
            print('Invalid input.') 
```

# c++ - 为什么不能用 'using' 指令实现继承的纯虚方法？

> ID：12895892
> 
> 赞同：2
> 
> 时间：2012-10-15T12:41:30.653
> 
> 标签：c++, interface, using-directives

> **可能重复：**
> [为什么 C++ 不允许基类实现派生类的继承接口？](https://stackoverflow.com/questions/10464308/why-does-c-not-let-baseclasses-implement-a-derived-class-inherited-interface)

```
#include <iostream>

class Interface
{
public:
    virtual void yell(void) = 0;
};

class Implementation
{
public:
    void yell(void)
    {
        std::cout << "hello world!" << std::endl;
    }
};

class Test: private Implementation, public Interface
{
public:
    using Implementation::yell;
};

int main (void)
{
    Test t;
    t.yell();
} 
```

我希望根据`Test`来实现该类`Implementation`，并且我想避免编写

```
void Test::yell(void) { Implementation::yell(); } 
```

方法。为什么不能这样做？C ++ 03还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:45:29.053

`using`只会将名称带入范围。

它没有实现任何东西。

如果您想要类似 Java 的 get-implementation-by-inheritance，那么您必须显式添加与之相关的开销，即`virtual`继承，如下所示：

```
#include <iostream>

class Interface
{
public:
    virtual void yell() = 0;
};

class Implementation
    : public virtual Interface
{
public:
    void yell()
    {
        std::cout << "hello world!" << std::endl;
    }
};

class Test: private Implementation, public virtual Interface
{
public:
    using Implementation::yell;
};

int main ()
{
    Test t;
    t.yell();
} 
```

* * *

**编辑**：这个功能有点鬼鬼祟祟，我不得不编辑以使代码用 g++ 编译。它不会自动识别实现`yell`和接口`yell`是一回事。我不完全确定标准对此有何评论！

# java - 在 ec2 实例上将 jars 添加到 tomcat 的 lib 文件夹中

> ID：12895893
> 
> 赞同：1
> 
> 时间：2012-10-15T12:41:33.443
> 
> 标签：java, amazon-ec2, amazon-web-services, memcached, tomcat6

如何将 jar 文件添加到在 ec2 linux 实例上运行的 tomcat 的 lib 文件夹中？我已经在 ec2 实例上安装了 tomcat6。我想将 memcahed 会话管理器 jar 的 jar 添加到 tomcat 的 lib 文件夹中。谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:47:44.990

你有两个选择：

1.  *临时*：只需将这些 jar scp 到 tomcat 文件夹。但是如果你实例化一台新机器，你将不得不再次这样做。

2.  *永久*：在步骤#1 之后，制作实例的图像。这将为您从此映像启动的所有实例保留 jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:05:58.560

我建议有类似 ant 部署脚本的东西，它正在部署/复制您的应用程序。它将 WEB-INF/lib/*.jars 或普通 jars 复制到 Tomcat 文件夹

您还可以使用 Beanstalk (ec2+Tomcat) 并从 Amazon 控制台管理它（使用 jar 上传您的应用程序）。

# python - 将纯python部署到heroku

> ID：12895896
> 
> 赞同：2
> 
> 时间：2012-10-15T12:41:42.127
> 
> 标签：python, heroku

我“完成”了一个小 Python 项目，我想将它部署在 heroku [GitHub 页面上](https://github.com/ttouch/panager)。我想执行：python2 main.py -i json-rpc 为了让 json-rpc 服务器监听连接，但是在推送到 heroku 时出现以下错误：

> $ git push heroku master 计数对象：153，完成。使用多达 8 个线程的 Delta 压缩。压缩对象：100% (87/87)，完成。写入对象：100% (153/153)，43.42 KiB，完成。总计 153（增量 61），重复使用 153（增量 61）
> 
> -----> Heroku 收到推送！Heroku 推送被拒绝，未检测到 Cedar 支持的应用程序
> 
> 到 git@heroku.com:panager.git ！[remote denied] master -> master (pre-receive hook denied) 错误：未能将一些参考推送到 'git@heroku.com:panager.git'

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-16T05:57:37.567

您可能想要尝试做的是创建一个 Procfile。完整的文件名是`Procfile`，没有扩展名，它位于项目文件夹的主目录中。

该文件的内容将是：

```
web: python main.py -i json-rpc 
```

试一试，看看它是否有效。

或者，您可能忘记`virtualenv`为您的应用创建一个。

您应该按照 Heroku 的指南在 Heroku 上[开始使用 Python中的说明进行操作](https://devcenter.heroku.com/articles/python)

### 更新：

终于我自己在一个新的 Heroku 应用程序上测试了这个，你缺少的是一个`requirements.txt`. 即使您没有任何依赖项，您仍然需要它。在主项目文件夹中的 virtualenv 中，运行`pip freeze > requirements.txt`，`git add .`然后`git commit -m "added requirements.txt"`，然后推送到 Heroku，它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-18T00:49:14.503

另外，确保 requirements.txt 使用 ANSI 编码保存，而不是 Unicode 或 UTF-8！如果你和我一样是个普通人，你可以简单地在记事本中打开 requirements.txt，选择另存为并从下拉列表中更改“编码”。我尝试了上面的所有建议，但我的错误是由于这个简单的编码问题。

# asp.net - 在每个环境中使用模拟数据都可以吗？

> ID：12895898
> 
> 赞同：1
> 
> 时间：2012-10-15T12:41:52.463
> 
> 标签：asp.net, mocking

使用模拟数据可确保每个对象的预期行为都按“预期”工作......我明白这一点！而且......我完全赞成在本地和开发（dev）环境中使用模拟数据......并且有点同意在测试（测试）环境中使用模拟数据。

但是，我们在每个环境中都使用模拟数据......然后当来自生产的奇怪数据产生问题时最终会摸不着头脑。我一直说我们至少需要一个环境来模拟生产……但他们对这个想法“大笑”。

**我们在以下环境中有模拟数据：**

*   本地 VM（虚拟机）
*   开发服务器（开发人员带着他们的 VM 代码来到这里）
*   测试服务器（测试人员点击了这个）
*   STAGING 服务器（被视为“接受”区域）

**所以我的问题是...**

**问：**这些环境中是否应该包含生产数据？如果不是，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:45:06.697

我可以看到混淆任何个人信息（密码、cc# 等）的案例，但除此之外，我希望有实时数据进行测试，至少在它到达时分期步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:45:16.883

问题实际上是关于模拟数据有多复杂或应该有多复杂。如果您在生产数据方面遇到问题，那么您应该考虑使用来自生产数据的样本来扩展您的模拟数据集，尤其是那些破坏您的应用程序的样本。

# asp.net - 使用 ckEditor 工具栏按钮调用 Asp.Net 按钮单击事件

> ID：12895899
> 
> 赞同：0
> 
> 时间：2012-10-15T12:41:55.520
> 
> 标签：asp.net, ckeditor

我需要从 ckeditor 按钮访问我的代码隐藏点击事件。我正在为我的自定义 ckeditor 按钮（函数（）{

```
//Section 1 : Code to execute when the toolbar button is pressed
    var a = {
        exec: function (editor) {
            var testObj = editor.parentNode;
            var count = 1;
            while (testObj.getAttribute('id') != "form1") {
                testObj = testObj.parentNode;
            }
            testObj.getElementById('<%= btnUserControls.ClientID %>').click();
        }
    },
//Section 2 : Create the button and add the functionality to it
    b='usercontrols';
    CKEDITOR.plugins.add(b,{
        init:function(editor){
            editor.addCommand(b,a);
            editor.ui.addButton('usercontrols', {
                label:'User Controls',
                icon: this.path + 'ascx.png',
                command:b
            });
        }
    });
})(); 
```

但我认为这段代码无法到达我的 Asp.Net 按钮。我错在哪里？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:06:22.227

如果要为 ASP.NET 按钮调用服务器端单击事件，则需要执行如下脚本： `__doPostBack('<%= btnUserControls.UniqueID %>', '');` 注意：必须使用 UniqueID 而不是 ClientID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:25:21.340

*在不知道您的.aspx*代码的情况下很难准确地说出，但很可能您的表单 ID 在客户端不是“form1”。您可以尝试像这样修改您的代码：

```
...
var a = {
    exec: function (editor) {
        document.getElementById('<%= btnUserControls.ClientID %>').clic();
    }
}
... 
```

甚至像这样：

```
...
var a = {
    exec: function (editor) {
        __doPostBack('<%= btnUserControls.UniqueID %>', '');
    }
}
... 
```

# sql - 我需要对 Oracle 中的这种数据情况进行 SQL 查询

> ID：12895903
> 
> 赞同：-3
> 
> 时间：2012-10-15T12:42:15.870
> 
> 标签：sql, oracle

我有以下数据：

```
column1        column2
   1             aaa
   1             bbb
   2             ccc
   2             ddd
   2             eee 
```

预期的输出应该是每个 column1 类型的一行，其中包含所有 column2 数据，如下所示：

```
column1,   column2
   1,      aaa|bbb
   2,      ccc|ddd|eee 
```

我怎样才能得到这个输出？

我正在使用下面的查询来获取这些数据。

```
select sub_id,listagg(pack_name, '|')  within group(order by sub_id) package_name 
from Recon_Droppacks_Migration group by sub_id;

col1:sub_id
col2:pack_name
table:Recon_Droppacks_Migration 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T12:57:33.453

您没有指定您正在使用的 RDBMS。以下是您将如何在各种 DBMS 中执行此操作。

MySQL，您将使用[`GROUP_CONCAT()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)：

```
SELECT column1, GROUP_CONCAT(column2 SEPARATOR ' | ') column2
FROM table1
GROUP BY column1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/7d958/15)

在 SQL Server 中，您将使用[`FOR XML PATH`](http://msdn.microsoft.com/en-us/library/ms345137%28v=sql.90%29.aspx)：

```
select 
  t1.col1,
  STUFF((SELECT distinct ' | ' + col2
              from table1 t2
              where t1.col1 = t2.col1
            FOR XML PATH(''), TYPE

            ).value('.', 'NVARCHAR(MAX)') 
        ,1,3,' ') col2
from table1 t1
group by t1.col1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/d82bd/10)

在 Oracle 中，您可以使用[`LISTAGG()`](http://docs.oracle.com/cd/E14072_01/server.112/e10592/functions087.htm)：

```
select "col1", 
  listagg("col2", ' | ') within group(order by "col1") col2
from table1
group by "col1" 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/9ea2a/8)

在 Postgresql 中，您可以使用[`string_agg()`](http://www.postgresql.org/docs/9.0/static/functions-aggregate.html)：

```
SELECT column1, string_agg(column2, ' | ') col2
FROM Table1
GROUP BY column1; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!1/3a1f7/2)

编辑，根据您的评论，您将要使用：

```
select sub_id, listagg(pack_name, ' | ') within group(order by sub_id) package_name 
from Recon_Droppacks_Migration 
group by sub_id; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T12:53:30.553

使用递归查询：

```
SELECT *, 
       Row_number() 
         OVER ( 
           PARTITION BY COLUMN1 
           ORDER BY COLUMN1 ) rn 
INTO   #TEMP1 
FROM   TABLE1; 

WITH RECUR 
     AS (SELECT *, 
                Cast(COLUMN2 AS VARCHAR(MAX)) AS full_text 
         FROM   #TEMP1 
         WHERE  RN = 1 
         UNION ALL 
         SELECT t1.*, 
                Cast(t2.FULL_TEXT + ' | ' + t1.COLUMN2 AS VARCHAR(MAX)) 
         FROM   #TEMP1 t1 
                INNER JOIN RECUR t2 
                        ON t1.COLUMN1 = t2.COLUMN1 
                           AND t1.RN = t2.RN + 1) 
SELECT t1.COLUMN1, 
       t1.FULL_TEXT 
FROM   RECUR t1 
       INNER JOIN (SELECT Max(RN) rn, 
                          COLUMN1 
                   FROM   RECUR 
                   GROUP  BY COLUMN1) t2 
               ON t1.COLUMN1 = t2.COLUMN1 
                  AND t1.RN = t2.RN 
```

[在此处](http://sqlfiddle.com/#!3/c8a89/12)查看完整示例

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T12:49:44.053

使用 MySQL：使用[`GROUP_CONCAT`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

```
SELECT column1, GROUP_CONCAT(column2 SEPARATOR ' | ') as column2
    FROM Table1 
    GROUP BY column1 
```

# [*请参阅 SQLFiddle 演示*](http://sqlfiddle.com/#!2/7d958/18)

使用 SQL Server：

```
SELECT distinct column1, column2 = 
    STUFF((SELECT ' | ' + column2
           FROM Table1 b 
           WHERE b.column1 = a.column1 
          FOR XML PATH('')), 1, 2, '')
FROM Table1 a
GROUP BY column1; 
```

# [*请参阅 SQLFiddle 演示*](http://sqlfiddle.com/#!3/954aa/1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T12:54:41.820

这个解决方案[T-SQL 是否有一个聚合函数来连接字符串？](https://stackoverflow.com/questions/5031204/does-t-sql-have-an-aggregate-function-to-concatenate-strings/5031297#5031297)工作正常，因为它不会在 xml 字符上失败。

```
declare @Temp_Table table (column1 bigint, column2 nvarchar(max))

insert into @Temp_Table (column1, column2)
select 1, 'aaa' union all
select 1, 'bbb' union all
select 2, 'ccc' union all
select 2, 'ddd' union all
select 2, 'eee'

select distinct
    t1.column1,
    stuff(
        (
            select
                ' | ' + t2.column2
            from @Temp_Table as t2
            where t2.column1 = t1.column1
            order by t2.column2 for xml path(''), type
        ).value('.', 'nvarchar(max)')
    , 1, 3, '')
from @Temp_Table as t1 
```

您还可以编写游标并使用变量技巧

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-15T13:06:02.367

请尝试下面给出的查询

```
SELECT concat(CONVERT(column1,char(8))," , ") AS id,group_concat(CONVERT(column2, CHAR(20)) separator '|') AS result FROM `tablename` WHERE 1 group by column1 
```

这里`concat`用于附加`,`字段`column1`并`CONVERT`用于将其转换为字符串，因为它更好地处理字符串。并使用给定的 saperator`GROUP_CONCAT`附加所有结果。`column1`

谢谢

# c# - 我无法更改课程中的成员

> ID：12895906
> 
> 赞同：-2
> 
> 时间：2012-10-15T12:42:27.793
> 
> 标签：c#, windows-phone-7, xna

我在使用 C# 和 XNA for Windows phone 时遇到问题。我在 XNA 的 Game1 类中创建了一个名为 Item 的类。我遇到的问题是，在创建所有项目后，我无法对它们进行更改，它不会引发错误，但更改也不会生效。所以代码是这样的：

```
public class Game1 : Microsoft.Xna.Framework.Game {
  Item Loading;
  Item[] Stuff = new Item[2];

  public class Item {
    public bool visible = true;
  }

  protected override void LoadContent() {
    Loading = new Item();
    Stuff[1] = new Item();
  }

  protected override void Update(GameTime gameTime) {
    Loading.visible = false;
    System.Diagnostics.Debug.WriteLine(Loading.visible); //prints true
    Stuff[1].visible = false;
    System.Diagnostics.Debug.WriteLine(Stuff[1].visible); //prints false
  }
} 
```

我不明白为什么它无法更改变量，我也尝试通过类中的访问器方法来做到这一点。我基本上复制了为一组项目工作的代码，所以这让我完全被难住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:43:56.300

此代码有效。我删除了继承约束，但它也应该与它们一起使用。我看到的主要问题是您声明“Stuff”的方式。我不确定您使用的是哪个版本的 c#，但据我所知（VS2010），您不能像在 C/C++ 中那样声明数组。`new`您必须使用关键字初始化数组。

```
public class Game1
{
    Item Loading;
    Item[] Stuff;

    public class Item
    {
        public bool visible = true;
    }

    public void LoadContent()
    {
        Loading = new Item();
        Stuff = new Item[2];
        Stuff[1] = new Item();
    }

    public void Update(DateTime gameTime)
    {
        Loading.visible = false;
        System.Diagnostics.Debug.WriteLine(Loading.visible); //prints false

        Stuff[1].visible = false;
        System.Diagnostics.Debug.WriteLine(Stuff[1].visible); //prints false
    }
} 
```

# asp.net - 将javascript对象传递给asp.net代码隐藏方法并解析它的最简单方法是什么？

> ID：12895913
> 
> 赞同：2
> 
> 时间：2012-10-15T12:43:02.547
> 
> 标签：asp.net, json

我使用 PageMethods 对象在 asp.net 中调用代码隐藏方法。我可以发送和接收字符串、int 等参数。但我必须向 codeBehind 发送一个 javaScript 对象。如何解析参数并从 codeBehind 获取数据？我想我必须使用 JSON 解析器，但我想知道是否有一种简单的方法，或者 .net 框架是否有 Json 解析器（或类似 JSON）？

```
 <script type="text/javascript" language="javascript">
        function test(idParam, nameParam) {
            var jsonObj = { id: idParam, name: nameParam };

            PageMethods.testMethod(jsonObj,
                function (result) { alert(result) });
        }
    </script> 
```

```
 [WebMethod()]
    public static string testMethod(object param)
    {
        int id = 1;//I must parse param and get id
        string name = "hakan"; //I must parse param and get name

        return "Id:" + id + "\n" + "Name:" + name + "\n" + "Date:" + DateTime.Now;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:28:53.693

试试这个（你可以添加 System.Collections.Generic 作为 using 子句来清理它）：

```
[WebMethod()]
public static string testMethod(object param)
{
    System.Collections.Generic.Dictionary<String, Object> Collection;
    Collection = param as System.Collections.Generic.Dictionary<String, Object>;

    int id = (int) Collection["id"];
    string name = Collection["name"] as String;

    return "Id:" + id + "\n" + "Name:" + name + "\n" + "Date:" + DateTime.Now;
} 
```

[编辑] 更简单：

```
// using System.Collections.Generic;
[WebMethod()]
public static string testMethod(Dictionary<String, Object> Collection)
{       
    int id = (int) Collection["id"];
    string name = Collection["name"] as String;

    return "Id:" + id + "\n" + "Name:" + name + "\n" + "Date:" + DateTime.Now;
} 
```

# java - 如何编写 HQL 来查询多对多？

> ID：12895915
> 
> 赞同：0
> 
> 时间：2012-10-15T12:43:02.987
> 
> 标签：java, hibernate, hql

我有用户模型，系统允许用户互相关注。所以我在 User 模型中放了两个列表如下：</p>

```
@ManyToMany(fetch = FetchType.LAZY)
@JoinTable(name = "t_user_t_followingUser", joinColumns = { @JoinColumn(name = "user_id") }, inverseJoinColumns = { @JoinColumn(name = "followingUser_id") })
public List<User> getFollowingUsers() {
    return followingUsers;
}

public void setFollowingUsers(List<User> followingUsers) {
    this.followingUsers = followingUsers;
}

@ManyToMany(fetch = FetchType.LAZY)
@JoinTable(name = "t_user_t_followedUser", joinColumns = { @JoinColumn(name = "user_id") }, inverseJoinColumns = { @JoinColumn(name = "followedUser_id") })
public List<User> getFollowedUsers() {
    return followedUsers;
}

public void setFollowedUsers(List<User> followedUsers) {
    this.followedUsers = followedUsers;
} 
```

现在我想获得用户 u 的总追随者。如何编写 HQL？

ps：many2many 可能不合适。对设计有什么建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:32:34.750

尝试这个`SELECT COUNT(fu) FROM User AS u INNER JOIN u.followedUsers AS fu;`

# php - PHP“输入代码获胜”解决方案读取一个简单的.txt文件

> ID：12895916
> 
> 赞同：-2
> 
> 时间：2012-10-15T12:43:05.117
> 
> 标签：php

我想创建一个比赛。我不擅长 php，但可以看到这可能是唯一的方法。我想使用一个简单的单字段表单创建一个脚本，客户在其中输入代码，当他们单击提交时，它将查看一个文本文件，任何匹配的结果都将返回一个祝贺页面，任何不匹配的结果将返回一个抱歉你还没有赢得这个时间页。这会很简单吗？

我可以对此进行扩展，并在 sql 数据库中包含 13,000 个代码的整个列表，一旦输入代码，它就会耗尽该代码，因此如果再次输入，它将返回抱歉，此代码已被输入/使用？

是否有一种简单的方法可以通过电子邮件发送地址说明已提交某些内容？

编辑：

使用下面的答案，我已经做到了这一点：

```
 <?php
$hostname = "localhost";
$username = "*****";
$password = "*****";
$code = $_POST[ 'code' ];

  if ( $client_code ) {

    $db = new PDO( 'mysql:host=$hostname;dbname=*****", $username, $password);

    $statement = $db -> prepare( 'SELECT 1 FROM codes WHERE code = ?' );
    $statement -> bindParam( 1, $code );
    $statement -> execute();

    $result = $statement -> fetchAll();

    if ( $result ) {
      header( 'Location: success.php' ); // Redirects to success page
      die();
    }
      header( 'Location: fail.php' ); // Redirects to fail page
      die();
    }

   else {
    header( 'Location: no_code.php' ); // Redirects to no code entered page
    die();
  }

?> 
```

但它不断出现此错误

解析错误：语法错误，第 11 行 mysite/mypahe.php 中的意外 T_STRING

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:57:50.183

创建一个名称`codes`如下的 db 表：

```
+------------+--------+
| promo_code | status |
+------------+--------+
| s72jasdih  |      0 |
| asd893kla  |      0 |
| Sasd93ja3  |      0 |
+------------+--------+ 
```

现在在索引页面中创建一个简单的表单：

```
<form action="actions.php" method="post">
  <input type="text" name="client_code" />
  <input type="submit" value="Submit" />
</form> 
```

输入代码并按提交后，用户将被重定向到`actions.php`包含以下内容的页面：

```
<?php

  $client_code = $_POST[ 'client_code' ];

  if ( $client_code ) {

    $db = new PDO( 'mysql:host=' . $db_host . ';dbname=' . $db_name, $db_user_name, $db_password );

    $statement = $db -> prepare( 'SELECT 1 FROM codes WHERE promo_code = ?' );
    $statement -> bindParam( 1, $clients_code );
    $statement -> execute();

    $result = $statement -> fetchAll();

    if ( $result ) {
      header( 'Location: success.php' ); // Redirects to success page
      die();
    }
      header( 'Location: fail.php' ); // Redirects to fail page
      die();
    }

  } else {
    header( 'Location: no_code.php' ); // Redirects to no code entered page
    die();
  }

?> 
```

这是您必须做的一个快速示例。要使其完全正常工作，请阅读 PHP 手册并开始工作；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:49:50.743

这是简单的脚本。这是[简短的教程](http://www.w3schools.com/php/php_forms.asp)。

在数据库中有代码会更好。为了选择行并将数据插入数据库表中，可以使用[MySQLi函数。](http://php.net/manual/en/book.mysqli.php)

对于电子邮件结果，可以使用[mail()](http://php.net/manual/en/book.mail.php)函数或[PHPMailer](http://code.google.com/a/apache-extras.org/p/phpmailer/)类（支持多种邮件协议）

# qunit - QUnit 新手，使用写字板文本文件

> ID：12895917
> 
> 赞同：0
> 
> 时间：2012-10-15T12:43:06.540
> 
> 标签：qunit

我正在使用写字板 [被迫] 开发一个 Javascript 应用程序。当我的测试在包含 qunit 代码的浏览器中通过时，我是否将成功的代码移动到另一个位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:52:14.603

如果我正确理解了您的情况

假设要测试的代码放在 myProject.js 中，而您的测试放在 myTests.js 中

您无需将代码移动到备用位置（在成功测试后），您只需编辑 myTests.js 以保留失败 javascript 代码的测试或添加新的测试用例（取决于您的要求）

# ios - Xcode 4 中没有外部库的符号/源

> ID：12895922
> 
> 赞同：9
> 
> 时间：2012-10-15T12:43:33.940
> 
> 标签：ios, xcode, debugging, xcode4

我的应用程序没有看到库的源代码：

*   如果我在库方法上“跳转到定义”，XCode 会将我带到 .h 文件，但说没有 .cpp 对应项
*   调试时，我看不到源代码，并且该库缺少大部分调用堆栈： ![在此处输入图像描述](../Images/d711de411008cfc02d6db5dfc6893c84.png)
*   我已确保未选中“调试时显示反汇编”

我将库构建为 DEBUG，然后将 headers+.a 文件打包到 SDK 目录中。所以我想我也需要将调试文件复制到该 SDK 目录中，或者告诉我的应用程序在哪里查找。我也不知道该怎么做。

澄清一下，我的应用程序项目不维护对库项目的引用，仅对 .a 文件和标头目录进行引用。这是因为库项目是由 CMake 创建的，我不想修改它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T15:52:12.427

首先，您应该检查静态库的 .debug_str 部分以验证它是否包含适当的调试信息。

尝试在终端上运行此命令：

```
xcrun dwarfdump /path/to/library.a | grep "\.m" 
```

您应该会看到打印出一堆源 (.m) 文件路径。从理论上讲，当您在调试器中停止时，Xcode 会在此处查看，因此请确保此处的路径正确。如果您没有看到任何路径，则需要传递适当的调试标志（例如`-g`，在构建库时传递给编译器。

如果路径不正确，或者您想将它们指向其他位置，您可以在 CMake 中将它们作为构建过程的一部分进行修改，例如使它们相对于您的项目目录。尝试查看“ [Make gcc put relative filenames in debug information](https://stackoverflow.com/questions/9607155/make-gcc-put-relative-filenames-in-debug-information) ”，它使用 CMake 来调整这些调试路径。

# .net - 使用相同的默认命名空间和命名命名空间序列化 xml

> ID：12895923
> 
> 赞同：0
> 
> 时间：2012-10-15T12:43:35.963
> 
> 标签：.net, xml, xml-serialization, xml-namespaces

我知道这看起来不像是最佳实践，但我需要生成具有相同命名空间的 xml

例如：

```
<ns1:root xsi:schemaLocation=""http://schemalocation""
xmlns:ns1=""http://schema""
xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance""
xmlns=""http://schema"">
...
</ns1:root> 
```

我还向序列化程序添加了命名空间：

```
var xmlSerializerNamespaces = new XmlSerializerNamespaces();
xmlSerializerNamespaces.Add("ns1", "http://schema");
xmlSerializerNamespaces.Add("xsi", "http://www.w3.org/2001/XMLSchema-instance");
xmlSerializerNamespaces.Add(string.Empty, "http://schema"); 
```

这是类本身：

```
[XmlRoot(ElementName = "request", Namespace = "http://schema")]
    [Serializable]
    public class Request 
    {
        [XmlAttributeAttribute("schemaLocation", Namespace = XmlSchema.InstanceNamespace)]
        public string SchemaLocation
        {
            get { return _schemaLocation; }
            set { _schemaLocation = value; }
        }

        ...

        private string _schemaLocation = "http://schemalocation";   } 
```

所以一切都很好，但默认 xmlns 不在生成的 xml 中。我也玩过 XmlWriterSettings 没有结果。有没有人知道如何在不替换字符串的情况下做到这一点？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:58:03.490

默认命名空间是根据您用来添加 XML 片段的命名空间来设置的，例如

```
XNamespace defaultNs = @"http://schema";
var result = new XDocument(new XElement(defaultNs + "root")); 
```

将产生以下输出：

```
<rootNode xmlns="http://schema">
</rootNode> 
```

因此，您所要做的就是将其他命名的添加到文档中，即

```
XNamespace defaultNs = @"http://schema";
var root = new XElement(defaultNs + "root",
    new XAttribute("xsi", "schemaLocation", "http://schemaLocation"),
    new XAttribute(XNamespace.Xmlns + "ns1", defaultNs"),
    new XAttribute(XNamespace.Xmlns + "xsi", "http://www.w3.org/2001/XMLSchema-instance")
); 
```

# linux - enqueue_pushable_task 函数内核

> ID：12895925
> 
> 赞同：0
> 
> 时间：2012-10-15T12:43:44.017
> 
> 标签：linux, linux-kernel, kernel

以下函数在 ./kernel/sched/rt.c(v3.5.4) 中定义：

```
static void enqueue_pushable_task(struct rq *rq, struct task_struct *p)
{
        plist_del(&p->pushable_tasks, &rq->rt.pushable_tasks);
        plist_node_init(&p->pushable_tasks, p->prio);
        plist_add(&p->pushable_tasks, &rq->rt.pushable_tasks);

        /* Update the highest prio pushable task */
        if (p->prio < rq->rt.highest_prio.next)
                rq->rt.highest_prio.next = p->prio;
} 
```

我无法理解的是，为什么要一遍又一遍地从同一个列表中添加和删除同一个节点。首先，通过函数从列表中删除一个节点，`plist_del`并将相同的节点添加到相同的列表中`plist_add`。这样做的任何特殊原因

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:37:47.567

当一个任务的优先级改变时，它在优先级列表中的位置也必须改变。

# php - Htaccess 错误地进行 301 重定向

> ID：12895926
> 
> 赞同：0
> 
> 时间：2012-10-15T12:43:46.177
> 
> 标签：php, css, .htaccess, dynamic

当用户的浏览器使用以下内容 加载[http://mydomain.com/css/dynamic.css](http://mydomain.com/css/dynamic.css)时，我只是想在[http://mydomain.com/dynamic_css/presets/上显示 css 内容](http://mydomain.com/dynamic_css/presets/)

```
RewriteEngine on
RewriteRule ^dynamic\.css$ http://mydomain.com/dynamic_css/presets/ [QSA,L] 
```

但是浏览器将 http 301 重定向到[http://mydomain.com/dynamic_css/presets/](http://mydomain.com/dynamic_css/presets/)

知道为什么吗？

基本上，[http://mydomain.com/dynamic_css/presets/](http://mydomain.com/dynamic_css/presets/)上的脚本会显示 CSS 生成的代码，以允许从管理员设置中控制更多样式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:54:34.360

您不能在请求中指定完整的域。`mod_rewrite`假设这是一个只能通过重定向处理的外部 URL。请尝试以下方法。

```
RewriteRule ^dynamic\.css$ /dynamic_css/presets/ [QSA,L] 
```

# playframework-2.0 - 如何将表单字段绑定到 Play 2.03 中的对象映射

> ID：12895932
> 
> 赞同：0
> 
> 时间：2012-10-15T12:44:07.710
> 
> 标签：playframework-2.0, databinder

尝试将字段绑定到对象映射我收到此错误“* [NullValueInNestedPathException：bean 类 [models.Simple] 的无效属性 'wrappedText[index]'：无法确定自动增长默认值的属性类型]

从我读过的内容来看，自动增长与尝试动态填充地图有关..但这与我得到的差不多..

我也遇到了这个[问题](https://stackoverflow.com/questions/10944867/could-not-determine-property-type-for-auto-growing-a-default-value)，它提出了几乎相同的问题，但在 Spring MVC 的上下文中，我看到接受的答案似乎暗示 OP 实现了他们自己的地图，这背后的原因是什么，是否有替代方案？

**楷模：**

```
public class Simple {

  public String text;
  public List<String> stringList;
  public TreeMap<String,SimpleWrapper> wrappedText=new TreeMap<String,SimpleWrapper>();
} 
```

...

```
public  class SimpleWrapper {

    String singleString;

    public void setSingleString(String singleString){
      this.singleString=singleString;
    }
    public String getSingleString(){
      return singleString;
    }
    public SimpleWrapper(){
      this.singleString=singleString;
    } 
```

**控制器**

```
static Form<Simple> simpleform=form(Simple.class);
public static Result simpleForm(){

    Form<Simple> filledForm=simpleform.bindFromRequest();
    System.out.println(filledForm);

    return ok(views.html.simpleForm.render(filledForm.get().toString()));
} 
```

**看法**

```
@(text:String)
@import helper._

@form(routes.Management.simpleForm()){
<input type="hidden" value="string" name="stringList[0]">
<input type="hidden" value="string Again" name="stringList[1]">
<input type="hidden" value="mapp value" name="wrappedText[index].singleString">
<input type="text" id="text" name="text">
<input type="submit" value="submit">
} 
```

这是通过@text

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:34:44.257

好的，所以我想我误解了另一个问题的答案。我不必实现 LazyMap，因为 apache-commons 的人已经这样做了。

我最终将我的模型修改为：

**模型**

```
import org.apache.commons.collections15.Factory;
import org.apache.commons.collections15.map.LazySortedMap;

public class Simple {
   public String text;
   public List<String> stringList;
   Factory<SimpleWrapper> factory = new Factory() {
       public SimpleWrapper create() {
          return new SimpleWrapper();
       }
   };

   public Map<String,SimpleWrapper> wrappedText =LazySortedMap.decorate(new TreeMap<String,SimpleWrapper>(),factory);
} 
```

# javascript - 找出用户在浏览器历史记录中的位置

> ID：12895940
> 
> 赞同：6
> 
> 时间：2012-10-15T12:44:47.533
> 
> 标签：javascript, browser-history

我知道我使用`history`对象访问浏览器历史记录，具体来说，我可以使用`history.back();`,`history.forward();`和`history.go(item-number)`(或`history.go(url)`)。我试图确定用户当前在浏览器历史记录中的位置。

例如，Firefox 可能支持从历史记录中访问单个 url，但这不是我想要的，因为 20 个 url 的历史记录可能包含重复的 url。

请注意，我对项目中的历史记录不感兴趣，而是对任何用户会话中的浏览器历史记录感兴趣。

例如，用户打开浏览器并浏览了 20 个页面 - 因此历史记录包含 20 个对象。然后用户按了 4 次*返回*按钮 - 最终在 20 页的第 16 页（或者更确切地说是 0..19 页的第 15 页）结束。有没有办法使用 JavaScript 获得这个当前的偏移量（16 或 15）？如果是，那么如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T12:50:56.967

```
history.length 
```

返回当前历史的长度。

可悲的是，**没有**办法弄清楚你在哪里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-17T15:44:47.877

不知道这是否会有所帮助，但使用 HTML5，您可以为浏览器历史记录列表中的每个项目添加一个状态对象。这为您提供了一种可能的方法来保存每个项目的索引（即，它`history.length`在第一次创建时的值），然后您可以稍后对其进行检查。

这是我发现的唯一对我有用的解决方案。

有关更多详细信息，请参阅[我的解决方案](https://stackoverflow.com/questions/32017791/#32019654)。

# android - 带有线程的Android SurfaceView画布绘图

> ID：12895945
> 
> 赞同：6
> 
> 时间：2012-10-15T12:45:09.997
> 
> 标签：android, multithreading, surfaceview

我正在尝试使用线程在画布上绘图来创建一个简单的游戏引擎，但我遇到了一些我无法解释的奇怪问题。这个“游戏”的目的是每秒在画布上画一个圆圈。这有效，但不是我想要的工作方式，似乎该应用程序正在两个画布之间切换并为每个画布添加一个圆圈，因此您每秒可以在两个画布之间切换，具有相同数量的圆圈但在不同的地方在画布上。

我不知道我做错了什么，但我对 Treadding 不太熟悉，这与我的 android 设备有多少内核或类似的东西有关吗？

我的代码如下所示，所以我只使用了一个启动线程，它使用一个链接到动画线程的布局文件，该动画线程启动一个线程并每秒在画布上绘制一个圆圈。（您可以忽略 touchevent，它尚未使用）。

该项目存在于主启动线程之外：

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

它使用这个布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">     
        <com.androidtesting.AnimationView
            android:id="@+id/aview"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"/>
</FrameLayout> 
```

我的 Surfaceview 类带有一个内部 Thread 类：

```
class AnimationView extends SurfaceView implements SurfaceHolder.Callback {
    private boolean touched = false;
    private float touched_x, touched_y = 0;
    private Paint paint;
    private Canvas c;
    private Random random;
    private AnimationThread thread;

    public AnimationView(Context context, AttributeSet attrs) {
        super(context, attrs);

        SurfaceHolder holder = getHolder();
        holder.addCallback(this);

        thread = new AnimationThread(holder);
    }

    class AnimationThread extends Thread {
        private boolean mRun;       
        private SurfaceHolder mSurfaceHolder;        

        public AnimationThread(SurfaceHolder surfaceHolder) {
            mSurfaceHolder = surfaceHolder;
            paint = new Paint();
            paint.setARGB(255,255,255,255);
            paint.setTextSize(32);
        }

        @Override
        public void run() {
            while (mRun) {
                c = null;
                try {
                    c = mSurfaceHolder.lockCanvas(null);
                    synchronized (mSurfaceHolder) {                 
                        doDraw(c);
                        sleep(1000);
                    }
                } catch (Exception e) {                 
                    e.printStackTrace();
                }finally {
                    if (c != null) {
                        mSurfaceHolder.unlockCanvasAndPost(c);
                    }
                }
            }
        }

        private void doDraw(Canvas canvas) {
            //clear the canvas
            //canvas.drawColor(Color.BLACK);                        

            random = new Random();
            int w = canvas.getWidth();
            int h = canvas.getHeight();
            int x = random.nextInt(w-50); 
            int y = random.nextInt(h-50);
            int r = random.nextInt(255);
            int g = random.nextInt(255);
            int b = random.nextInt(255);
            int size = 20;
            canvas.drawCircle(x,y,size,paint);            
            canvas.restore();
        }
        public void setRunning(boolean b) {
            mRun = b;
        }
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {

    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
           touched_x = event.getX();
           touched_y = event.getY();

           int action = event.getAction();

           switch(action){
                case MotionEvent.ACTION_DOWN:           
                    touched = true;
                    break;
                case MotionEvent.ACTION_MOVE:
                    touched = true;
                    break;        
                default:
                    touched = false;
                    break;
           }

           return true;
    }

    public void surfaceCreated(SurfaceHolder holder) {
        thread.setRunning(true);
        thread.start();
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        boolean retry = true;
        thread.setRunning(false);
        while (retry) {
            try {
                thread.join();
                retry = false;
            } catch (InterruptedException e) {
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T13:27:22.550

> 似乎该应用程序正在两个画布之间切换

是的，这就是它的工作原理。[它称为双缓冲，每次](http://developer.android.com/reference/android/view/SurfaceHolder.html#lockCanvas%28%29)都需要重绘所有帧：

> 在 unlockCanvas() 和 lockCanvas() 之间永远不会保留 Surface 的内容，因此，必须写入 Surface 区域内的每个像素。

因此，您需要`canvas.drawColor(Color.BLACK)`在代码中取消注释这一行。

而且你不应该`Thread.sleep(1000)`在画布被锁定时打电话，这会导致[饥饿](http://docs.oracle.com/javase/tutorial/essential/concurrency/starvelive.html)问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T06:16:38.347

听起来你有这个工作，但我确实注意到我应该指出的一个小错误。

您在没有事先调用 canvas.save() 的情况下调用了 canvas.restore()。来自 Canvas 的 Android 开发人员参考：“调用 restore() 的次数多于调用 save() 的次数是错误的。”

在您的情况下，我看不出有任何理由让您调用 canvas.save()，因此您应该删除对 canvas.restore() 的调用。

# c# - 我是不是把价值对象看得太远了（DDD）

> ID：12895946
> 
> 赞同：-1
> 
> 时间：2012-10-15T12:45:11.417
> 
> 标签：c#, domain-driven-design

*编辑：为了清楚起见，这个问题与 DDD 有关，它有一个称为值对象的概念，这些不是值类型，它们是一种以内容构成身份的方式构建对象的方式，我试图理解这些概念应该应用多远（从评论看来它们不应该渗透到领域之外）。对于不熟悉 DDD 的人来说，这个问题可能看起来很奇怪，但要明确的是，它是关于创建对象而不是创建值类型的一种非常具体的机制。*

考虑以下示例代码，它有两个值对象：

```
public class SqlServerConnectionSettings
{
    public string DatabaseName { get; set; }

    public string ServerName { get; set; }

    public SqlServerCredentials Credentials { get; private set; }

    public SqlServerConnectionSettings(SqlServerCredentials credentials)
    {
        Credentials = credentials;
    }

    public string AsConnectionString()
    {
        //Snip
    }
}

public class SqlServerCredentials
{
    public string Username { get; private set; }

    public string Password { get; private set; }

    public bool UseIntegratedSecurity { get; private set; }

    public SqlServerCredentials(string username = "", string password = "", bool useIntegratedSecurity = true)
    {
        Username = username;
        Password = password;
        UseIntegratedSecurity = useIntegratedSecurity;
    }

    public string AsConnectionStringCredentials()
    {
       //Snip
    }
} 
```

我没有为用户名、密码、UseIntegratedSecurity 设置不同的参数，而是创建了一个值对象来保存它们。我的问题是，这个概念是否太过分了，我是否误解了点值对象的设计目的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:54:10.490

在我看来很好。您将属于一起的项目分组为有凝聚力的单元，这有什么问题？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T12:59:01.470

这取决于您的上下文。

*   如果你定义`SqlServerCredentials`为一个实体，是的，你走得太远了：

> “一个实体是一个对象，它不是由它的属性定义的，而是由一条连续性和它的身份定义的。”

*   如果您定义`SqlServerCredentials`为值对象，那么您是对的（不要忘记它应该是**不可变**的！）：

> “值对象是包含属性但没有概念标识的对象。它们应该被视为不可变的。”

*   如果您定义`SqlServerCredentials`为聚合，那么您也是对的：

> n 聚合是由根实体绑定在一起的对象的集合，也称为聚合根。聚合根通过禁止外部对象持有对其成员的引用来保证聚合内所做更改的一致性。

总之，以 DDD 的方式，如果您不考虑`SqlServerCredentials`作为一个实体，那没关系。但这一切都与上下文有关。

# emacs - 终端中的 Emacs 元密钥

> ID：12895950
> 
> 赞同：1
> 
> 时间：2012-10-15T12:45:21.260
> 
> 标签：emacs

我正在尝试配置我的 Meta-Key，以便我可以在终端 emacs 中输入 {}、[] 等（使用德语键盘）。我曾尝试设置我的元密钥，但无法让它工作。我想将 Alt+8 用于 {，Alt+9 用于 }，Alt-5 用于 [，Alt-6 用于 ]。

```
(setq mac-option-modifier nil
      mac-command-modifier 'meta
      x-select-enable-clipboard t) 
```

请参阅： [无法在 emacs 中键入大括号和方括号](https://stackoverflow.com/questions/3376863/unable-to-type-braces-and-square-braces-in-emacs)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T13:03:02.243

你有没有尝试过？

```
(define-key global-map (kbd "M-8") "{")
(define-key global-map (kbd "M-9") "}") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-07T12:28:56.407

对于 macos azerty 法语键盘。它的 ：

```
(define-key global-map (kbd "M-(") "{")
(define-key global-map (kbd "M-)") "}") 
```

# dart - 如何将事件侦听器添加到动态元素？

> ID：12895951
> 
> 赞同：1
> 
> 时间：2012-10-15T12:45:25.347
> 
> 标签：dart, dartium

我有以下 HTML：

```
<table>
    <thead>
        <tr>
            <th>Id</th>
            <th>Name</th>
            <th>Description</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>1</td>
            <td>Item 1</td>
            <td>Description of Item 1</td>
            <td>
                <a href="#" data-action="edit" data-item-id="1">Edit</a>
                <a href="#" data-action="delete" data-item-id="1">Delete</a>
            </td>
        </tr>
        <tr>
            <td>2</td>
            <td>Item 2</td>
            <td>Description of Item 2</td>
            <td>
                <a href="#" data-action="edit" data-item-id="2">Edit</a>
                <a href="#" data-action="delete" data-item-id="2">Delete</a>
            </td>
        </tr>
    </tbody>
</table> 
```

表行 ( `tr elements`) 是**动态**添加的。

我将点击事件连接到所有`Edit`链接，如下所示：

```
void wireUpTableEvents() {
  var editLinks = queryAll('#order-items table tbody [data-action="edit"]');

  editLinks.forEach((element) {
    element.on.click.add((event){
      print(element.attributes['data-item-id']);
    });
  });
} 
```

如上所述，表行 ( `tr elements`) 是动态添加的，因此上述代码仅在我执行添加行的方法`wireUpEvents` **后调用时才有效。**

当将来动态添加元素时，有谁知道语法或使用`DART`'s向元素添加事件侦听器？`on.click.add()`

我尝试检查 DART 文档，但[**事件侦听器的文档**](http://api.dartlang.org/docs/continuous/dart_html/ElementEvents.html)是空白的。

如果我要使用 jQuery，我可以使用类似于：

```
$("#order-items table")on("click", "tbody [data-action="edit"]", function(){...}) 
```

...但我只想使用 DART 编写我的示例应用程序。

**编辑**
虽然`future`听起来很适合回调，但对于我需要的东西来说似乎有点矫枉过正，因为在我的场景中没有长时间运行的任务。

我能够将事件侦听器附加到静态元素但处理未来子元素的点击事件的最接近方法是：

```
void wireUpTableEvents() {
    var tableBody = query('#order-items table tbody');

    // Attach Event Listener to the static tbody, which always exists.
    tableBody.on.click.add((event) {
        var clickedElement = event.srcElement;
        var itemId = clickedElement.attributes['data-item-id'];

        // Check if the clicked element was either one of the edit links or one of the delete links.
        switch (clickedElement.attributes['data-action']) {
        case 'edit':
            // Replace print with calling a method to process edit request for this item.
            print('processing edit click from item with id: $itemId');
            break;
        case 'delete':
            // Replace print with calling a method to process delete request for this item.
            print('processing delete click from item with id: $itemId');
            break;
        }
    });
}​ 
```

上面的代码可以在加载任何实际`tr`元素之前执行，并且在加载`tr`元素后在某个未知的后期阶段仍然可以工作。

我还发现它现在涵盖了任何动态添加的行、预加载的行以及其他为新记录动态添加的行等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T14:35:59.970

听起来您需要使用 Dart 的 Future 对象。John Evans 最近的一篇[文章](http://phylotic.blogspot.com/2012/10/common-dart-scenarios-for-future.html)给出了很好的概述。我将尝试举一个简单的例子：

假设我有一个名为 htmlInDart 的类，我将其调用如下：

```
void main() {
  var htmlExample = new HtmlInDart().createStyles();
  htmlExample
      ..then((htmlExample) => htmlExample.buildPage())
      ..then((htmlExample) => htmlExample.addListeners());
} 
```

该类可能看起来像这样：

```
class htmlInDart {

  htmlInDart();

  Future<htmlInDart> createStyles() {
    final c = new Completer();
    // create some styles
    c.complete(this);
    return c.future;
  }

  Future<htmlInDart> buildPage() {
    final c = new Completer();
    // build the page
    c.complete(this);
    return c.future;
  }

  Future<htmlInDart> addListeners() {
    final c = new Completer();
    // add some listeners
    c.complete(this);
    return c.future;
  } 
```

希望这能让您了解如何为您的案例实施它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:49:56.630

当您首先添加行时，是否有任何理由无法添加回调？就像是：

```
void addRow(TableElement table, ...) {
    TableRowElement item = new TableRowElement();

    ...

    table.nodes.add(item);
    item.on.click.add((callback) { });
} 
```

# .net - 我可以在桌面窗口上使用 DPWS

> ID：12895952
> 
> 赞同：3
> 
> 时间：2012-10-15T12:45:27.080
> 
> 标签：.net, windows, wcf, web-services, .net-micro-framework

我正在开发一个涉及 PC 和嵌入式设备的项目。PC 将运行 windows 或 linux + mono 运行时。嵌入式设备将使用 .NET MF。

这是一种工业控制系统，我正在考虑使用 DPWS 进行通信。

发现设备和托管服务的能力对我来说很重要。并且还需要事件。而且我需要在 PC 和嵌入式设备上托管服务，并在这两个平台上使用服务。整个项目需要使用.NETMF 的.NET 来实现。

那可能吗？我真的找不到任何关于在 PC 上使用 DPWS 的信息。

如果不可能，我还有别的东西吗？UPNP？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:04:49.743

我最近广泛寻找同样的东西并得出结论，没有公开可用的桌面 .Net Dpws 堆栈。

[带有事件的 Dpws Web 服务 - 寻求 Wc​​f 客户端示例或建议](https://stackoverflow.com/questions/11358039/dpws-web-service-with-event-wcf-client-example-or-suggestions-sought)

# arrays - 对关卡构建数组进行命中测试

> ID：12895960
> 
> 赞同：0
> 
> 时间：2012-10-15T12:45:58.350
> 
> 标签：arrays, actionscript-3, sprite, hittest

我正在用 Flash 构建一个自上而下（鸟瞰图）游戏，一个相当简单的概念，一个早期的塞尔达传说或最终幻想游戏。我已经建立了关卡，添加了角色并且可以移动，使用滚动相机，但有一个问题让我很烦恼。命中测试。

关卡是使用数组创建的——一个简单的 [1,1,1]；数组，它检查数组中的值是否匹配，然后创建一个简单的方形 Sprite 并将其添加到包含每个项目的更大 Sprite 中。最后，玩家被添加到舞台上，并且可以使用箭头键进行控制。我将其用作运动系统：

```
stage.addEventListener(KeyboardEvent.KEY_DOWN, checkDown);
stage.addEventListener(KeyboardEvent.KEY_UP, checkUp);
stage.addEventListener(Event.ENTER_FRAME, update);

function checkDown(e:KeyboardEvent):void {
   switch (e.keyCode) {
    case 65 :
        leftDown = true;
        break;
    case 37 :
        leftDown = true;
        break;
    case 68 :
        rightDown = true;
        break;
    case 39 :
        rightDown = true;
        break;
    case 87 :
        upDown = true;
        break;
    case 38 :
        upDown = true;
        break;
    case 83 :
        downDown = true;
        break;
    case 40 :
        downDown = true;
        break;
}
}

function checkUp(e:KeyboardEvent):void {
switch (e.keyCode) {
    case 65 :
        leftDown = false;
        break;
    case 37 :
        leftDown = false;
        break;
    case 68 :
        rightDown = false;
        break;
    case 39 :
        rightDown = false;
        break;
    case 87 :
        upDown = false;
        break;
    case 38 :
        upDown = false;
        break;
    case 83 :
        downDown = false;
        break;
    case 40 :
        downDown = false;
        break;
}
}

function update(e:Event):void {
if (upDown) {
    if (genericHolder.y >= boundariesLevelOne[(room*4) - 4]) {
        genericHolder.y = boundariesLevelOne[(room*4) - 4];
        Player.y-=power;
    }
    if (genericHolder.y < boundariesLevelOne[(room*4) - 4]) {
        genericHolder.y+=power;
    }
    Player.Stand.visible = false;
    Player.Forwards.visible = false;
    Player.Rights.visible = false;
    Player.Lefts.visible = false;
    Player.Backwards.visible = true;
    playerDirection = 2;
}
if (downDown) {
    if (genericHolder.y <= boundariesLevelOne[(room*4) - 3]) {
        genericHolder.y = boundariesLevelOne[(room*4) - 3];
        Player.y+= power;
    }
    if (genericHolder.y > boundariesLevelOne[(room*4) - 3]) {
        genericHolder.y-=power;
    }
    Player.Stand.visible = false;
    Player.Backwards.visible = false;
    Player.Rights.visible = false;
    Player.Lefts.visible = false;
    Player.Forwards.visible = true;
    playerDirection = 1;
}
if (leftDown) {
    if (genericHolder.x >= boundariesLevelOne[(room*4) - 2]) {
        genericHolder.x = boundariesLevelOne[(room*4) - 2];
        Player.x -= power;
    }
    if (genericHolder.x < boundariesLevelOne[(room*4) - 2]) {
        genericHolder.x+=power;
    }
    Player.Stand.visible = false;
    Player.Backwards.visible = false;
    Player.Forwards.visible = false;
    Player.Rights.visible = false;
    Player.Lefts.visible = true;
    playerDirection = 4;
}
if (rightDown) {
    if (genericHolder.x <= boundariesLevelOne[(room*4) - 1]) {
        genericHolder.x = boundariesLevelOne[(room*4) - 1];
        Player.x += power;
    }
    if (genericHolder.x > boundariesLevelOne[(room*4) - 1]) {
        genericHolder.x-=power;
    }
    Player.Stand.visible = false;
    Player.Backwards.visible = false;
    Player.Forwards.visible = false;
    Player.Lefts.visible = false;
    Player.Rights.visible = true;
    playerDirection = 3;
}
if (!upDown && !downDown && !leftDown && !rightDown) {
    Player.Backwards.visible = false;
    Player.Forwards.visible = false;
    Player.Rights.visible = false;
    Player.Lefts.visible = false;
    Player.Stand.visible = true;
    Player.Stand.gotoAndStop(playerDirection);
}
if (Player.Stand) {
    Player.Stand.gotoAndStop(playerDirection);
     }
} 
```

TL;DR 背景移动而不是玩家，移动由变量控制。

我怎样才能对我添加的任何精灵进行测试？目前，如果我尝试对特定 Sprite 进行 Hittest，它会再次测试整个 Sprite 持有者，而不是我想要的特定 Sprite。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:51:55.417

你在使用最热门的方法吗？

[http://www.actionscriptmoron.com/AS3Tutorials/hittest-hittestobject/](http://www.actionscriptmoron.com/AS3Tutorials/hittest-hittestobject/)

你是什​​么意思它再次测试整个精灵持有者只是获取包含对象的引用并将其传递给 hittest 方法。它应该工作。

# java - 如何将 java 源代码保存在 xml 文件中，并在 IDE 中编辑/编译它？

> ID：12895966
> 
> 赞同：1
> 
> 时间：2012-10-15T12:46:38.037
> 
> 标签：java, xml, compilation, save

我们有一个 java 应用程序，用户可以在其中编写/执行他们自己的 java 代码并使用来自已编译 jar 的导入 - 即他们编写它，它由应用程序编译和运行。他们还可以保存此代码（以及他们正在使用的各种其他信息） - 目前保存到人类可读的 xml 文件中。

我希望能够在 IDE（主要是 Intellij）中使用那些保存 xml 文件，这样如果用户在 IDE 中更改了他们编译的 jar 中的内容，这些更改也可以在保存 xml 文件中获取。

例如，如果保存文件使用了已编译 jar 中的类，则它可能具有以下导入：

```
import com.company.project.package.subpackage.MyClass; 
```

假设这个类被移动了，所以导入是：

```
import com.company.project.package.subpackage.subsub.MyClass; 
```

...这将更改使用该类和导入的所有保存 xml 文件 - 就像 IDE 将用于已编译项目中的所有其他用法一样。

（这个和其他例子的出现是因为编译的 jar 一直在开发和使用上述应用程序。）

目前，如果我要将保存的 xml 文件添加到 IDE 中的子项目，用户可以手动编辑保存文件，可能会利用“查找/替换”或“在文本中搜索用法”功能。这总比没有好，但仍然是一个相当复杂/复杂的过程。此外，没有检查保存文件中的代码与编译项目中的代码是否一致。

我正在考虑的一种方法是使用脚本或测试类来解压缩保存的 xml 文件，将 java 代码写入 java 文件，然后尝试编译（并可能运行/测试）这些 java 文件。

进一步的步骤是编写一个 maven 插件（我们使用 maven 进行构建周期）或一个 ant 脚本（ant 仍然有它的用途......）来做到这一点，并可能使这部分成为我们构建过程的一部分 - 即你不能编译项目而不确保其子项目中的所有保存 xml 文件也可以编译。

*   这看起来是一种合理的方法吗？
*   是否有任何人可以建议的替代方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T08:56:12.870

> ..另存为 .java 文件不是我正在寻找的解决方案。

将其保存为包含 1 个（或更多）XML 文件以及所需的任何源（在路径中根据包）的 Zip。您甚至可以轻松地包含其他文件、清单、帮助文件等。

这有很多优点：

*   它允许源文件和包含文件是与 XML 不同的编码
*   它将项目的所有必要部分合并到一个文件中，而无需任何“跳槽”来使一种格式适合另一种格式。
*   它允许根据数据使用不同的压缩级别（例如，文本/XML 可以很好地压缩，而序列化图像则不能）。

# hibernate - Hibernate，由于计算字段的子类化（Hibernate 2.8.1）

> ID：12895968
> 
> 赞同：0
> 
> 时间：2012-10-15T12:46:54.680
> 
> 标签：hibernate, mapping, subclassing

我在我的数据库中有一个视图，例如**view1**，我需要使用这个视图来制作带有一些计算字段的报告**view1report**，比如 AplusB

（当然我想通过 Hibernate 将它们作为对象处理）

**例子**

```
view1
    int a
    int b
---    
view1report extends view1
    int AplusB
....
public int setAplusB() { ... my own logic ...} 
```

**问题**

*   A. 可以通过 Hibernate 解决吗？

如果是

*   B. 如何建立我的 hmb.xml 来表达子类化？
*   C. AND 最后但并非最不重要的一点是如何在计算字段的设置器中使用我自己的逻辑？

（我想将它们分开的额外计算字段的原因）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:51:10.613

创建一个视图并在 db 中执行。现在创建一个 POJO 来映射视图。如果您使用 HBM 映射实体，请创建 hbm 文件并在映射表时对其进行映射。如果您正在使用注释，请创建带有映射相应字段的注释类

并在您的映射类中，再创建一个文件（如果带注释的类，请添加`@Transient`注释

```
public int aplusb; 
```

在其 getter 方法中，返回 a 和 b 的总和。

```
return a+b; 
```

这将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:10:58.883

所以，我发现我不需要配置 hbm.xml 来生成子类（它刚刚计算了字段）。我只需要自己以编程方式对休眠生成的类进行子类化。

这是一个很好的教训。

那些没有关注这个讨论的人我的想法是，我也将通过 hbm2java 生成*view1report*类（参见示例），它仅基于超类*view1*计算字段。

# html - EXTJS：更改访问的链接

> ID：12895969
> 
> 赞同：0
> 
> 时间：2012-10-15T12:46:54.833
> 
> 标签：html, css, extjs, hyperlink, anchor

我是 ExtJS 的新手。

我们在服务器端使用 ExtJs 客户端和 struts，spring。在我们的应用程序中，所有链接过去都以蓝色显示。不知何故，由于更改很少，访问的链接无法更改为不同的颜色。

有人可以建议我改变访问链接颜色的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:02:20.447

应用 CSS

```
a:visited
{
     color : red !important
} 
```

在某处应用了 a:visited 的流氓 CSS 样式。您需要找到它并将其删除。在此之前，可以使用上面的 css。`!important`除非流氓 css 样式也`!important`应用于它，否则将给予此更高的优先级。

# linux - Linux中的系统调用和文件操作

> ID：12895971
> 
> 赞同：0
> 
> 时间：2012-10-15T12:47:09.800
> 
> 标签：linux, system-calls

我正在阅读有关设备驱动程序的信息，并且我有一个与 UNIX 哲学有关的问题，即一切都是文件。

当用户发出例如打开文件的命令时，什么会起作用 - 系统调用或文件操作？ `sys_open`是系统调用，`open`是文件操作。你能详细说明一下这个话题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:18:12.400

快速回答，我希望它会有所帮助：

所有系统调用都以相同的方式工作。系统调用号与系统调用参数一起存储在某处（例如，在寄存器中）。在打开系统调用的情况下，参数是：指向文件名和权限字符串的指针。`syscall`然后 open 函数使用适当的指令（ ，`int`...，它取决于硬件）引发软件中断。

对于任何中断，都会调用内核（在内核模式下）来处理中断。系统检测到中断是由系统调用引起的，然后读取寄存器中的系统调用号，发现是open系统调用，在内核内存中创建文件描述符，然后调用驱动程序open继续实际打开文件功能。然后将文件描述符 id 存储回寄存器并返回到用户模式。

然后从寄存器中检索文件描述符并由`open()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:55:17.577

“每个打开的文件（在内部由一个文件结构表示，我们将很快研究）与它自己的一组函数相关联（通过包含一个名为 f_op 的字段，它指向一个 file_operations 结构）。**这些操作主要负责实现系统调用，因此被命名为 open、read 等等。** ”

这是来自LDD章节字符驱动程序。谁能详细说明最后一行是什么意思。

# ruby - 垂直排序游戏列表

> ID：12895973
> 
> 赞同：1
> 
> 时间：2012-10-15T12:47:14.170
> 
> 标签：ruby, sorting

我有一个加载游戏列表的数组。目前它的排序如下：

```
A   B    C
D   E    F 
```

现在我想将其排序如下：

```
A  D
B  E
C  F 
```

请问我该怎么做？我尝试过使用块甚至切片，但没有成功。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T13:00:27.713

简单的切片和转置：

```
a = %w{A B C D E F}
p a.each_slice(3).to_a.transpose

# => [["A", "D"], ["B", "E"], ["C", "F"]] 
```

each_slice(3) 需要针对源数组和最终矩阵的维度进行调整。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T13:07:22.630

关注@Jan 的评论

```
input = "A   B    C\nD   E    F"
output = input.split(/\n+/).map{|e| e.split(/\s+/)}.transpose
p output 
```

输出：

```
[["A", "D"], ["B", "E"], ["C", "F"]] 
```

如果你提供的只是你提到的一个数组，那就更容易了

```
input = [ ["A", "B", "C"], ["D", "E", "F"] ]
output = input.transpose
p output 
```

# api - 按名字和姓氏搜索 LinkedIn 连接

> ID：12895974
> 
> 赞同：0
> 
> 时间：2012-10-15T12:47:23.463
> 
> 标签：api, linkedin

有没有办法使用LinkedIn API搜索linkedin连接过滤器的名字和姓氏？

假设我通过了linkedIn 的身份验证并在popup.LinkedIn 连接响应中显示连接，仅响应500 次连接请求。所以我做分页500连接。但是我想向两个人发送邀请，所以我想通过我的 LinkedIn 连接中的名字和姓氏来提供搜索小部件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:21:07.680

您可以使用[People Search API](https://developer.linkedin.com/documents/people-search-api)搜索名字和姓氏，将搜索限制在您的连接范围内：

```
http://api.linkedin.com/v1/people-search?first-name=Clair&last-name=Smith&facet=network,F 
```

**更新：**

在“过滤”返回值以从结果集中删除当前用户进行调用方面，您应该检查返回的用户与查看器的关系：

```
http://api.linkedin.com/v1/people-search:(people:(id,first-name,last-name,relation-to-viewer:(distance)))?first-name=Clair&last-name=Smith&facet=network,F 
```

然后检查结果，并删除 a`relation-to-user`为 0 的用户。

# c# - 下拉列表模式下的组合框 - 使列表项高度与组合框项高度不同？

> ID：12895975
> 
> 赞同：0
> 
> 时间：2012-10-15T12:47:23.120
> 
> 标签：c#, winforms, combobox

我想实现一个组合框（在下拉列表模式下），其中下拉列表中的项目高度为 64，但下拉列表项目以正常高度显示自身。这里的用例是一个包含文件名的列表，旁边有一个图像缩略图。我希望普通显示具有小缩略图的正常高度，但相关下拉列表中的缩略图要大得多。

当我尝试修改项目高度时，整个组合框都设置为适应它，而不仅仅是下拉列表（我认为完全合理）。

这可能吗？

感谢您的任何提示。

罗宾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:58:12.117

也许您可以使用 OwnerDraw 模式？此示例显示了一个带有自定义高度分隔项的示例，但我想您可以将相同的原则应用于组合框中的所有项目..

[http://blogs.msdn.com/b/jfoscoding/archive/2005/08/26/456977.aspx](http://blogs.msdn.com/b/jfoscoding/archive/2005/08/26/456977.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T12:58:21.010

我相信您需要绘制 Combobox 所有者并使用 Measure 事件。该事件传递 MeasureItemEventArgs，其中包括正在绘制的项目的索引。

这是来自 Microsoft 文档[Combobox.Measure 事件的示例](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.measureitem%28v=vs.100%29.aspx)

# android - 使用 KSOAP 的复杂类型

> ID：12895977
> 
> 赞同：0
> 
> 时间：2012-10-15T12:47:28.030
> 
> 标签：android, ksoap

我正在尝试使用 web 服务，我需要使用 ComplexTypes。

这是服务的输出：

```
<req i:type="d:String"></req><File i:type="c:base64">MS4wMDE6MTYxHTEuMDAyOjAwHTEuMDAzOjEfMx4yHzAeNB8xHjQfMh0xLjAw 
```

如您所见，有一个`<req>`节点和一个`<File>`节点。req-node 在 File-node 开始之前结束。这不是我试图完成的，文件节点应该在请求节点内。我正在使用 KSoap，这就是我尝试过的：

```
SoapObject tempObject = soapObject.addProperty("req", "");
        SoapObject tempObject1 = soapObject.addProperty("File", File);

        SoapSerializationEnvelope soapSerializationEnvelope = new SoapSerializationEnvelope(
                SoapEnvelope.VER11); 
```

如何在 KSOAP 中向复杂类型添加一些数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:23:45.543

我前一段时间使用了 ksoap，并使用以下代码向我的请求中添加了复杂的对象：

```
public static PropertyInfo createPropertyInfo(String name, Object value, Object type) {
    PropertyInfo pi1 = new PropertyInfo();
    pi1.setName(name);
    pi1.setValue(value);
    pi1.setType(type);
    return pi1;
} 
```

这个方法是这样调用的：

```
request.addProperty(createPropertyInfo("complexType", objectOfComplexType, objectOfComplexType.getClass())); 
```

# git - Git避免“合并分支主”

> ID：12895980
> 
> 赞同：22
> 
> 时间：2012-10-15T12:47:37.127
> 
> 标签：git, git-merge

我和一位同事正在使用带有单个远程源存储库的 git。我们都提交本地然后推送到原点。在我们工作的过程中，自然会有一些分歧。

一旦到了推到原点的时间，我怀疑我们可以合并本地，然后推到原点。我希望在没有描述合并的情况下获得一个相当直接的版本历史。

从相当复杂的版本*地铁地图*和不断重复出现的*合并分支“主”*消息来看，我猜我们做的事情不太正确。

*   “合并分支到主控”消息的原因是什么？
*   如何简化此版本历史？

我感觉这个问题之前已经在这里得到了回答，但我无法完全理解我收集的信息。

![Git 版本历史](../Images/8498cfbb89bbb3d06f031dc3a0f50eb5.png)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-15T13:02:15.220

我们有一个类似的案例。尽管我们使用中央主存储库，但我们经常有个别开发人员生成*合并分支“主”*消息。我们的解决方案是让开发人员`git pull --rebase`在从远程主存储库中提取时执行此操作。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-15T12:55:55.900

我想你正在寻找`git rebase`.

从“保留真实历史”的角度来看，您的历史记录中记录的每个合并都是必需的。您的分支此时出现分歧，随后被合并（请注意两个分支如何具有独特的提交，因此无法进行快速转发。

如果你变基，当前的提示（包括你同事​​的更改）将成为新的分支点，除非他们在两者之间推动，否则你的更改可以通过快进应用，给人以线性开发的印象（但不-单调时间戳）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-17T15:04:47.760

你做的一切都是正确的。你在同步发展，你在不时整合同行的变化，`git`忠实地记录着这段历史。

虽然您*可以通过*变基“避免”合并提交，但通常最好坚持合并历史：每当您变基提交时，您实际上是在创建一个新提交，它对它是如何形成的说谎。而且，虽然这些谎言通常是善意的，但它们可能会在以后造成麻烦。如果您在每次重新提交时都跳过重新运行测试套件，则尤其如此。

我认为，“创造线性历史”的整个想法有点被误导了。你真的不想要线性历史。你想要一个真实的历史，一个每个提交都经过实际测试的历史。因为这使您以后可以运行`git bisect`有意义的结果。

* * *

TL;DR：不要改变你的习惯。他们本来就很好。将来您可能会感谢他们。

# php - 使用带有 python 的 httplib 将字符串和缓冲区发送到服务器

> ID：12895981
> 
> 赞同：1
> 
> 时间：2012-10-15T12:47:42.837
> 
> 标签：php, python, httplib

如何在 python Web 服务中使用 httplib 将带有文件对象的参数发布到 URL。

我正在使用以下脚本：

```
import httplib
import urllib
params = urllib.urlencode({"@str1":"string1", "@str2":"string2", "@file":"/local/path/to/file/in/client/machine", "@action":"action.php" })
headers = {"Content-type":"application/pdf , text/*" }
conn = httplib.HTTPConnection("192.168.2.17")
conn.request("POST", "/SomeName/action.php", params, headers)
response = conn.getresponse()
print response.status, response.reason
data = response.read()
data
conn.close() 
```

我有以下输出：

```
200
OK
<html>.....some html code </html> 
```

我写了一些 php 代码来保存这些字符串和数据库中的文件我的问题是，我只将文件路径作为一个刺痛而不是我的文件。可能我必须发送文件对象，例如，

```
file_obj = open("filename.txt","r")
conn.request("POST", "/SomeName/action.php", file_obj, headers) 
```

但我想同时发送字符串和文件。有什么建议可以解决这个问题吗？

**编辑** 我将代码更改如下：当我直接使用 httplib 将 pdf 文件发送到我的服务器时，该文件保存为 BIN 文件。

```
def document_management_service(self,str_loc_file_path,*args):
    locfile = open(str_loc_file_path,'rb').read()
    host = "some.hostname.com"
    selector = "/api/?task=create"
    fields = [('docName','INVOICE'),('docNumber','DOC/3'),('cusName','name'),('cusNumber','C124'),('category','INVOICE'),('data','TIJO MRS,SOME/DATA/CONTENT,Blahblah,2584.00,blahblah'),('action','create')]
    files = [('strfile','File.pdf',locfile)]
    response = self.post_multipart(host, selector, fields, files)
    print response
    pass

def post_multipart(self,host, selector, fields, files):
    content_type, body = self.encode_multipart_formdata(fields, files)
    h = httplib.HTTP(host)
    h.set_debuglevel(1)
    h.putrequest('POST', selector)
    h.putheader('content-type', content_type)
    h.putheader('content-length', str(len(body)))
    h.putheader('Host', host)
    h.endheaders()
    h.send(body)
    errcode, errmsg, headers= h.getreply()
    return h.file.read()

def encode_multipart_formdata(self, fields, files):
    LIMIT = '----------lImIt_of_THE_fIle_eW_$'
    CRLF = '\r\n'
    L = []
    for (key, value) in fields:
        L.append('--' + LIMIT)
        L.append('Content-Disposition: form-data; name="%s"' % key)
        L.append('')
        L.append(value)
    for (key, filename, value) in files:
        L.append('--' + LIMIT)
        L.append('Content-Disposition: form-data; name="%s"; filename="%s"' % (key, filename))
        L.append('Content-Type: %s' % self.get_content_type(filename))
        L.append('')
        L.append(value)
    L.append('--' + LIMIT + '--')
    L.append('')
    body = CRLF.join(L)
    content_type = 'multipart/form-data; boundary=%s' % LIMIT
    return content_type, body

def get_content_type(self, filename):
    return mimetypes.guess_type(filename)[0] or 'application/octet-stream' 
```

我已经调试了显示为的请求：

```
[('content-length', '4191'), ('accept-ranges', 'bytes'), ('server', 'Apache/2.2.12 (Ubuntu)'), ('last-modified', 'Tue, 23 Oct 2012 04:46:36 GMT'), ('etag', 'W/"567dd-105f-4ccb2a7a9a500"'), ('date', 'Tue, 23 Oct 2012 04:46:36 GMT'), ('content-type', 'application/pdf')]
multipart/form-data; boundary=----------lImIt_of_THE_fIle_eW_$ 
```

而且我没有尝试*请求*，因为我想用 httplib 解决这个问题（没有任何外部库）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T07:52:12.007

要在正文中发布参数和文件，您可以使用`multipart/form-data`内容类型：

```
#!/usr/bin/env python
import requests # $ pip install requests

file = 'file content as a file object or string'
r = requests.post('http://example.com/SomeName/action.php',
                  files={'file': ('filename.txt', file)},
                  data={'str1': 'string1', 'str2': 'string2'})
print(r.text) # response 
```

`requests.post`向服务器发送如下内容：

```
POST /SomeName/action.php HTTP/1.1
Host: example.com
Content-Length: 449
Content-Type: multipart/form-data; boundary=f27f8ef67cac403aaaf433f83742bd64
Accept-Encoding: identity, deflate, compress, gzip
Accept: */*

--f27f8ef67cac403aaaf433f83742bd64
Content-Disposition: form-data; name="str2"
Content-Type: text/plain

string2
--f27f8ef67cac403aaaf433f83742bd64
Content-Disposition: form-data; name="str1"
Content-Type: text/plain

string1
--f27f8ef67cac403aaaf433f83742bd64
Content-Disposition: form-data; name="file"; filename="filename.txt"
Content-Type: text/plain

file content as a file object or string
--f27f8ef67cac403aaaf433f83742bd64-- 
```

要重现它，`httplib`请参阅[POST form-data with Python example](https://stackoverflow.com/a/681182/4279)。

如果您的参数不包含太多数据，一个更简单的解决方案是将它们传递到 url 查询部分并让正文仅包含文件：

```
#!/usr/bin/env python
import urllib
import requests # $ pip install requests

params = {'str1': 'string1', 'str2': 'string2', 'filename': 'filename.txt'}
file = 'file content as a file object or string, etc'    
url = 'http://example.com/SomeName/action.php?' + urllib.urlencode(params)
r = requests.post(url, data=file, headers={'Content-Type': 'text/plain'})
print(r.text) # response 
```

它对应于以下 HTTP 请求：

```
POST /SomeName/action.php?str2=string2&str1=string1&filename=filename.txt HTTP/1.1
Host: example.com
Content-Length: 39
Content-Type: text/plain
Accept-Encoding: identity, deflate, compress, gzip
Accept: */*

file content as a file object or string 
```

`httplib`如果您需要，它应该更容易翻译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:39:19.710

以下代码还可以解决使用 httplib 传输文件与其他元数据的问题（没有任何外部库）：

```
def document_management_service_success(self,str_loc_file_path,*args):
    locfile = open(str_loc_file_path,'rb').read()
    str_loc_file = locfile.split('#end_pymotw_header')
    initial_data = str_loc_file[0]
    encoded_data = ''.join("{0:08b}".format(ord(c)) for c in initial_data)
    params = urllib.urlencode({'docName':'INVOICE', 'docNumber':'RF/2', 'cusName':'Tijo john', 'cusNumber':'C124', 'category':'INVOICE', 'data':encoded_data})
    headers = {"Accept": "Text/*","Content-Disposition":"form-data" ,"Content-Type": "application/x-www-form-urlencoded, application/pdf, form-data"}
    conn = httplib.HTTPConnection("efiling.nucoreindia.com")
    conn.connect()
    conn.set_debuglevel(1)
    conn.request("POST", "/api/?task=create", params, headers)
    response = conn.getresponse()
    print "Server Response status is"+str(response.status)+"and Reason is,"+str(response.reason)
    print response.getheaders()
    print response.read()
    pass 
```

# facebook - 如何使用 SLRequest 处理过期的 Facebook 访问令牌

> ID：12895984
> 
> 赞同：1
> 
> 时间：2012-10-15T12:47:45.287
> 
> 标签：facebook, ios6, facebook-oauth, facebook-access-token, acaccount

我已经将 SLRequest 类与我的应用程序集成，并且可以成功更新用户时间线等。到目前为止一切顺利。但是，当 Facebook 使用户的访问令牌无效（由于不活动等）时，我不知道如何处理这种情况。

通常你会按照 Facebook 的建议来处理这个问题：http: [//developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/](http://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/)。然而，在 iOS 上，访问令牌永远不会由应用程序直接设置，因为这一切都是由 SLRequest / ACAccount 类在后台处理的。

我已经尝试重新请求访问存储帐户，但这只是被授予（因为就 iOS 而言，用户已经授予访问权限）。

那么，除了让用户撤销我的应用程序的 FB 然后再次添加它之外，还有什么方法可以刷新令牌？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T02:22:11.143

renewCredentialsForAccount:completion: 的 ACAccountStore 应该正是为此，参见 [http://developer.apple.com/library/ios/#documentation/Accounts/Reference/ACAccountStoreClassRef/Reference/Reference.html#//apple_ref/doc/uid/ TP40011021-CH1-SW19](http://developer.apple.com/library/ios/#documentation/Accounts/Reference/ACAccountStoreClassRef/Reference/Reference.html#//apple_ref/doc/uid/TP40011021-CH1-SW19)

# php - PHP 每小时随机一次

> ID：12895988
> 
> 赞同：0
> 
> 时间：2012-10-15T12:48:16.767
> 
> 标签：php, arrays, random, sorting

我的 php 生锈了，我正在尝试获取一个 PHP 代码来返回一个不同的用户 ID，该用户 ID 从一组可能的用户中添加到以下数组中。

```
'online_users'            => array(54)
'bots_ids'                => array(153,122,173,124,173,132,184,188) 
```

我想每 1-5 小时选择并添加一个随机机器人，之后他将被另一个机器人替换或被删除（并非所有机器人都必须同时在线）

我尝试将种子设置为当前小时数除以随机数，但它似乎不起作用。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:58:12.330

在这种情况下，我认为您正在寻找 array_rand() 。它将从数组中选择最多 N 个随机键并将它们放置在自己的数组中。这会让你做你想做的事。

```
$online_bots = array('4','5','6');
$bot_ids = array('1','2','3');

$random_bots = array_rand($bot_ids,1); // Random id from list
$bot_going_offline = array_shift($online_bots); // pop a bot from online

$online_bots[]= $bot_ids[$random_bots]; // add random bot from list
$bot_ids[] = $bot_going_offline; // move the oldest online bot into common pool 
```

至于问题的第二部分，您可以设置 cron 以每小时执行一次脚本来触发更改。或者，对于在线/离线列表，您可以只拥有一个每小时随机挑选的公共机器人池。

```
$num_bots = rand ( 0, count($bot_ids));
$random_bots = array_rand($bot_ids,1); // Random id from list
for ($x = 0; X< $num_bots; x++)
   $online[] = $bot_ids[$random_bots[$x]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:56:23.357

A. 您可以使用`cron job`每小时调用一次脚本...获取随机`bots`数可以很容易地完成`array_rand`

```
$bots = array(153,122,173,124,173,132,184,188);
$current = $bots[array_rand($bots)];
var_dump($current); 
```

B. 如果你有一个 continue 循环，你应该看看[如何在无限循环中每 4 分钟回显一次，](https://stackoverflow.com/a/12877701/1226894)并用你的随机选择器替换 echo

# php - PHP PDO 获取类返回 FALSE

> ID：12895991
> 
> 赞同：0
> 
> 时间：2012-10-15T12:48:21.157
> 
> 标签：php, pdo

我有这个 PHP 函数，它获取当前登录用户的数据，或者如果访问者没有登录，或者有无效的 user_id 和 password_hash cookie，则返回 false。出于某种原因，`$q->fetch()`总是返回 FALSE。

```
if( $_COOKIE['cuid']!='' && $_COOKIE['cuph']!='' )
{
    try
    {
        $q = $db->prepare( 'SELECT * FROM users WHERE user_id = ? AND password = ?' );
        $data = array( $_COOKIE['cuid'], $_COOKIE['cuph'] ); // id and password hash
        $q->execute($data);
        $num = count( $q->fetchAll() ); // in my case, $num is set to 1
        if( $num == 1 )
        {
            $q->setFetchMode(PDO::FETCH_CLASS, 'User');
            $user = $q->fetch(); // $user is set to FALSE for some reason
            return $user;
        } else {
            return FALSE;
        }
    }
    catch( Exception $e )
    {
        $db->rollBack();
        echo 'Error: ' . $e->getMessage();
    }
} else {
    return FALSE;
} 
```

在查询中使用精确数据而不是占位符运行它不会改变任何内容，并且直接在我的数据库中运行该查询会返回 1 行，就像它应该的那样。我检查了一下，$num 确实等于 1。我不知道为什么`$q->fetch()`返回 FALSE，所以非常感谢任何指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:52:52.613

您已经使用`fetchAll()`. 结果集因此用尽，您无法从中获取更多结果。您只是想`$q->rowCount()`计算行数*或*`fetchAll()`保存某处返回的数组并稍后使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-26T20:44:36.440

如前所述，您不能在一个查询后使用 fetchAll 然后 fetch；但 rowCount 不能用于选择。解决方案可以是：

您可以使用 fetchAll 在数组中获得结果：

```
$results=$q->fetchAll() 
```

然后就可以获取并使用或查看号码，例如：

```
echo count( $results); 
```

并获取并处理结果，例如：

```
foreach ($results as $result)
{
   var_dump($result);
} 
```

# search - Google 搜索并与我自己的搜索集成

> ID：12895994
> 
> 赞同：0
> 
> 时间：2012-10-15T12:48:38.250
> 
> 标签：search

我想知道我应该从哪里开始尝试有一个搜索栏来搜索我的数据库，但也搜索谷歌购物以返回结果。

它们可以用“Google 搜索结果”标题和“此数据库结果”分隔

有任何想法吗？

我找到了这个页面，但找不到购物结果选项：

[https://developers.google.com/web-search/docs/#The_Hello_World_of_Google_Search](https://developers.google.com/web-search/docs/#The_Hello_World_of_Google_Search)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:38:15.900

此 url 返回一个带有搜索结果的 json 对象。

只需从 google 获取 API 密钥，您就可以开始使用了。

[https://www.googleapis.com/shopping/search/v1/public/products?key=KEYGOESHERE&country=US&q=SEARCH+TERMS+GO+HERE&alt=json](https://www.googleapis.com/shopping/search/v1/public/products?key=KEYGOESHERE&country=US&q=SEARCH+TERMS+GO+HERE&alt=json)

# sencha-touch - 如何在 sencha touch 中将表单值传递给控制器

> ID：12895995
> 
> 赞同：1
> 
> 时间：2012-10-15T12:48:38.453
> 
> 标签：sencha-touch

当我尝试将 FormPanel 的值传递给控制器​​时，我收到错误消息。

“对象#<HTMLFormElement> 没有方法‘getValues’”

```
Ext.define('MyApp.view.LoginPage', {
extend: 'Ext.form.FormPanel',
id: 'loginPanel',
standardSubmit: true,
config: {
    fullscreen: true,
    items: [{
        xtype: 'fieldset',
        items: [
                {
                    xtype: 'textfield',
                    name: 'name',
                    label: 'Kullanıcı Adı'
                },
                {
                    xtype: 'passwordfield',
                    name: 'password',
                    label: 'Şifre'
                } 
```

如何访问控制器对象中的 loginPanel.getValues()？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T06:28:48.637

当我使用 Ext.getCmp('loginPanel').getValues() 时，问题解决了。

# php - Yii中的信用卡格式化功能

> ID：12895998
> 
> 赞同：0
> 
> 时间：2012-10-15T12:48:41.463
> 
> 标签：php, yii, credit-card, number-formatting

我想在显示时像下面这样格式化信用卡，

例如：

```
1234 4567 9874 1222 
```

作为

```
1xxx xxxx xxx 1222 
```

Yii 中有这样的格式化功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:27:10.093

不——但使用直接 PHP 并没有错。

如果你总是想要第一个和最后 4 个字符，你可以这样做：

```
$last4 = substr($cardNum, -4);
$first = substr($cardNum, 0, 1);

$output = $first.'xxx xxxx xxxx '.$last4; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T13:26:29.780

有很多方法可以做到这一点，没有 Yii 特定的你可以使用 str_split（未经测试）来做到这一点：

```
$string = "1234 4567 1234 456";
$character_array = str_split($string);
for ($i = 1; $i < count($character_array) - 4; $i++) {
    if ($character_array[$i] != " "){
        $character_array[$i] = "x";
    }
}
echo implode($character_array); 
```

*   因此，我们从名为 $character_array 的字符串中创建了一个字符数组。
*   然后我们循环遍历字符（从位置 1 开始，而不是 0，所以第一个字符是可见的）。
*   我们循环直到数组中的条目数减去 4（所以最后 4 个字符不会被替换）我们用“x”替换循环中的每个字符（如果它不等于空格）
*   我们将数组内爆回字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T13:48:00.327

你也可以使用[`preg_replace`](http://php.net/manual/en/function.preg-replace.php "http://php.net/manual/en/function.preg-replace.php")：

```
$card='1234 4567 9874 1222';
$xcard = preg_replace('/^([0-9])([- 0-9]+)([0-9]{4})$/', '${1}xxx xxxx xxxx ${3}', $card); 
```

此正则表达式还将处理连字符。

Yii 没有内置函数。