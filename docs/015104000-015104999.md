# StackOverflow 问答 15104000-15104999

# ruby-on-rails - 使用来自另一个控制器的方法的 before_filter

> ID：15104003
> 
> 赞同：2
> 
> 时间：2013-02-27T04:05:37.800
> 
> 标签：ruby-on-rails, controller, before-filter

我有一个控制器 PostsController，它允许用户在登录之前创建帖子。但要保存它，用户必须使用 Omniauth 登录。

在 PostsController 中，我有：

```
class PostsController < ApplicationController
  before_filter :authenticate_user_by_service, :only => :create
  def create
    ...
  end

private
  def authenticate_user_by_service
    redirect_to user_omniauth_authorize_path(:facebook)
  end 
```

现在，我有另一个控制器来处理来自 facebook 的回调，称为 ServicesController

```
class ServicesController < ApplicationController
  def create
    auth = request.env["omniauth.auth"]
    ... authentication logic here ...
    sign_in(:user, service.user)
  end
  method_alias: :facebook, :create 
```

通常，为了进行身份验证，登录后，我会重定向到 :back。

但是，`services#create`这里用作 before_filter。在这种情况下，我应该怎么做才能让它回到我的 Posts#create ？

更新：我收到这个警告说过滤器链在我指的是不同的方法时被中断

```
Started POST "/posts" for 127.0.0.1 at 2013-02-26 23:47:41 -0500
Processing by PostsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"H0as8=", "post"=>{"post"=>"bla bla"}, "commit"=>"Create Post"}
Redirected to http://localhost:3000/users/auth/facebook
Filter chain halted as :authenticate_user_by_service rendered or redirected 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:39:52.993

你错误地接近这个。您正在处理登录并检查是否有人在同一步骤中登录。

考虑使用 session_controller 来处理所有注册/登录/注销逻辑，例如：

```
class SessionsController < ApplicationController
  def new # this will be /login
    session[:return_to] = params[:returnto] unless params[:returnto].nil?
    redirect_to "/auth/facebook"
  end

  def create # this will be the callback after the user is authenticated
    auth_token = request.env["omniauth.auth"]["credentials"]["token"]
    # you'll need to write this based on your app's requirement. 
    # Find a user or create one if he doesn't exist yet.
    user = User.find_or_create_authenticated_user(auth_token) 

    if user.present?
      session[:user_id] = user.id # this stores the current user's id in your session and lets Rails remember him for you.
      redirect_to return_or(products_url) # see below for the usage of return_or
      return
    end

    redirect_to root_url, alert: 'User not found or invalid'
  end

  def destroy # /logout
    session[:user_id] = nil
    redirect_to root_url
  end
end

#routes.rb
match '/logout' => 'sessions#destroy', :as => :logout
match '/login' => 'sessions#new', :as => :login
match '/auth/facebook/callback' => 'sessions#create' 
```

然后，在`ApplicationController`你设置几个辅助方法：

```
class ApplicationController < ActionController::Base

  protected  
  # Use this in your views and controllers to get 
  # a handle of the user that is currently logged in. 
  # it will return nil if there is no user logged in.
  def current_user
    @current_user ||= User.find(session[:user_id]) if session[:user_id]
  end
  helper_method :current_user

  # Use this to check wether a user is logged in. 
  # returns true if there is a user, false otherwise.
  def logged_in?
    !current_user.nil?
  end
  helper_method :logged_in?

  # Block access to controllers or actions based on 
  # wether there's a user or not.
  def require_login
    unless logged_in?
      # if we need the user to log in, we send him on his way
      # but send him back to the current page afterwards. 
      session[:return_to] = request.fullpath
      redirect_to root_url(subdomain: false), :alert => "Please login"
    end
  end

  # When a user is not logged in, but you send him to log in,
  # you can force him to return to the url he was in or if nothing
  # was set go to a standard path. 
  # See this being set up in SessionsController#new and in require_login and then
  # being used in SessionsController#create
  def return_or(path)
    session.delete(:return_to) || path
  end
  helper_method :return_or
end 
```

这些辅助方法在所有控制器中都可用，因为它们都继承自`ApplicationController`. 然后，您可以告诉您`PostsController`发送未登录的用户去登录，然后他们将返回到 PostsController。

然后解决您仅在身份验证后保存帖子的要求：您确实创建帖子，保存它，但仅在用户通过身份验证后将其更新为公开，或者您将帖子的内容存储在会话中并恢复它们用户通过身份验证后：

```
class PostsController < ApplicationController
  def new
    @post = Post.new(session[:post_params] || {})
  end

  def create
    if logged_in?
      @post = Post.create(params[:post])
      # ... etc
    else
      session[:post_params] = params[:post]
      session[:return_to] = new_post_path
    end
  end
end 
```

请注意，这是一种相当脆弱的方法。我宁愿建议实际创建`Post`，将其标记为尚未公开并仅将帖子存储`id`在会话中。身份验证后，您可以找到该 post_id，从中重新创建对象，将其状态设置为 public 并将其与 current_user 关联。

# c# - 从 Reddit 页面下载的字符串在大约一分钟的检查中是相同的，即使它应该已经改变了

> ID：15104004
> 
> 赞同：2
> 
> 时间：2013-02-27T04:05:49.183
> 
> 标签：c#, json, garbage-collection, reddit

以下 C# 代码下载 Reddit 随机页面的 JSON。如果找到的值无效，它将正确下载和循环。但是，对于大约一分钟的检查，返回的字符串是相同的。有人知道这是内存问题、Reddit API 问题还是 webClient 问题？

```
string src = "";
while(src.endsWith(<someString>))
{
    src = dl(<valid site>);
}

void dl(string st)
{
    string json = new WebClient().DownloadString(string);
    ...
    string src = <manipulation of json>;
    ...
    return src;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T04:54:04.367

如果您正在获取相同的 reddit 网址，那么您正在访问 akamai 缓存。`api.reddit.com`虽然您可以通过访问而不是访问来绕过 akamai 缓存`www.reddit.com`，但您的程序*应该*遵守 reddit 的[API 规则](https://github.com/reddit/reddit/wiki/API)，其中包括“每 30 秒不要多次访问同一页面”。

# google-app-engine - 当我选择特定字段时，GQL 不起作用

> ID：15104008
> 
> 赞同：0
> 
> 时间：2013-02-27T04:05:54.593
> 
> 标签：google-app-engine, google-cloud-datastore, gql

我有一个用列 app、id、params、view、timestamp 调用的实体。**当我在 GQL 中执行 select * 时，它工作正常。**下面附上截图。

![在此处输入图像描述](../Images/36b917a90229b593a39639a3f6662905.png)

但是**，当我尝试仅选择一列时，我看不到任何结果**。下面附上截图。

![在此处输入图像描述](../Images/d86b60c7668944f218aeeab21462b0dd.png)

此外，当**我再次尝试应用 where 子句时，我看不到任何**结果。 ![在此处输入图像描述](../Images/5a25d218f9ef3a644ff196eb410de355.png)

**我为另一个实体**尝试了 where 子句，它运行良好。![在此处输入图像描述](../Images/a3addb46f0ceab1b99c88d20c717d185.png)

你能告诉我我做错了什么吗？

问候， 沙迪亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:59:37.780

看起来您正在尝试查询具有未索引属性的实体。具有未索引属性的实体的行为就像未设置该属性一样：在未索引属性上使用过滤器或排序顺序的查询将永远不会匹配该实体。

更多信息：[https ://developers.google.com/appengine/docs/python/datastore/indexes#Unindexed_Properties](https://developers.google.com/appengine/docs/python/datastore/indexes#Unindexed_Properties)

# c# - ServiceStack 反序列化

> ID：15104010
> 
> 赞同：1
> 
> 时间：2013-02-27T04:05:58.043
> 
> 标签：c#, json, servicestack

我能够让 ServiceStack 序列化我的对象，但反序列化是另一回事。我收到这个json：

```
{
   "Return": {
       "A":15,
       "B":16,
       "Result":240
   },
   "Time":0.0743458271027
} 
```

我想将其反序列化为此类类型：

```
public class Result<T>
{
    public T Return;
    public double Time;
} 
```

在这种情况下，T 是数学：

```
public class Math
{
    public int A;
    public int B;
    public int C;
    public decimal Result;
} 
```

我用过 Newtonsoft.Json 一切都很好，但 ServiceStack 应该快 3 倍，但我只是得到没有值的对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T05:21:46.657

默认情况下， [ServiceStack 文本序列化](https://github.com/ServiceStack/ServiceStack.Text)器不会序列化公共字段，但您可以通过以下方式启用它们：

```
JsConfig.IncludePublicFields = true; 
```

# spring - 如何自定义 BigDecimal 的默认消息

> ID：15104012
> 
> 赞同：2
> 
> 时间：2013-02-27T04:06:02.987
> 
> 标签：spring, hibernate, bean-validation, hibernate-validator

以下是模型：

```
public class myFormData {
    private BigDecimal trackingNumber;

    @Valid
    private List<myCustomRecord> records = new ArrayList<myCustomRecord>();
}

public class myCustomRecord {
    //the field also appears here (for child records)
    private BigDecimal trackingNumber;
} 
```

我有一个控制器方法，它在某个时候接收这个对象来进行保存。

```
public @ResponseBody ValidationResponse save(Model model,
        @Valid myFormData formData, BindingResult result,
        HttpSession session){
       //do stuff
} 
```

我遇到的问题是，如果将字符串传递到`trackingNumber`字段中，则错误消息不好。

> 无法将类型“java.lang.String”的属性值转换为属性“records[0].trackingNumber”所需的类型“java.math.BigDecimal”；嵌套异常是 java.lang.NumberFormatException
> 
> 无法将类型“java.lang.String”的属性值转换为属性“trackingNumber”所需的类型“java.math.BigDecimal”；嵌套异常是 java.lang.NumberFormatException

另一个潜在的并发症是我没有使用 Spring 表单，因为我正在尝试提交一些 ajax。这就是我提交数据的方式：

```
function collectFormData(fields) {
    var data = {};

    //myFormData
    data["trackingNumber"] = <<some value here>>;

    for (var i = 0; i < fields.length; i++) {
        data["records["+i+"].trackingNumber"] = <<some value>>; 
        //some more data to submit for child records
    }
    return data;
}

var mData = collectFormData(aSelectedRows);
if (aSelectedRows.length> 0) {
    $.post('call_controller_save', mData, function(response) {
     if (response.status === 'FAIL') {
         displayError(response);
     } else {
        //SAVE SUCCESSFUL
        $('#successMsgs').append("Data Saved");
    }, 'json');
} 
```

我尝试将`trackingNumber`的数据类型更改为`String`并编写了一个自定义的`ConstraintValidator<CheckNumeric, String>`. 它可以解决问题...我可以通过 输入自定义消息`ValidationMessages.properties`，但我想让模型保持对预期数据类型的真实性。 **有没有另一种方法来控制错误消息并将其变成好的和用户友好的东西？**

（我也知道在`NumberFormatException`验证步骤之前最有可能发生在数据绑定中？但我仍然不确定如何修复默认消息）

**编辑** 我使用以下配置

```
<bean class="org.springframework.context.support.ResourceBundleMessageSource"
    id="messageSource">
    <property name="basenames">
        <list>
            <value>messages</value>
            <value>ValidationMessages</value>
        </list>
    </property>
</bean> 
```

在每个属性文件中，我都有相同的内容。

```
formData.trackingNumber=Invalid format 
```

但是自定义消息仍然没有被接收。 **问题2：**应该是`formData`还是`myFormData`？我很困惑是jsp页面上使用的表单对象的类名还是名称？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T19:17:16.610

添加到验证消息 - 如果 Spring 无法将提供的文本转换为数字，则默认使用这种格式：

```
typeMismatch.java.math.BigDecimal=Required format is number. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T04:52:24.200

我认为在这种情况下没有办法控制验证错误消息，因为它发生在调用 validate() 之前。

我们能做的就是，

1.  定义validationError.properties
2.  有自定义错误消息，例如
    formData.trackingNumber=Invalid Format

3.  为 org.springframework.context.support.ResourceBundleMessageSource 类定义一个 spring bean，其中 p:basename 作为validationError

# c# - 返回修改后的泛型

> ID：15104015
> 
> 赞同：0
> 
> 时间：2013-02-27T04:06:27.387
> 
> 标签：c#, generics

我正在尝试在创建对象后对其进行修改。我想将此对象的属性设置为 -1 用于 int 或 string.empty "" 用于字符串。贝娄是我已经拥有的示例代码。

```
class TestClassAccess{
    public int MyPropInt { get; set { ModifyOnAccessDenied<int>(value); } }
    public string MyPropString { get; set { ModifyOnAccessDenied<string>(value); } }

    public TestClassAccess() { }

    private T ModifyOnAccessDenied<T>(T propertyToChange) {
        var _hasAccess = false; //not really important how this is made
        if (!_hasAccess)
        {
            if (propertyToChange is string)
                propertyToChange = string.Empty;
            else if (propertyToChange is int)
                propertyToChange = -1;
        }            
        return  propertyToChange;
    }
} 
```

所以..我遇到的问题。

1.  它无法编译，因为我无法将属性转换为字符串或 int。
2.  如果我可以使用这样的设置方法，我不会打结。
3.  这是可能的还是我雄心勃勃。

谢谢KJ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:15:06.787

如果您在泛型函数中检查特定类型，您可能做错了什么。在这种情况下，您可以轻松地只传递一个默认值，而不是对其进行硬编码：

```
private T ModifyOnAccessDenied<T>(T newValue, T defaultValue) {
    var _hasAccess = false; //not really important how this is made
    if (!_hasAccess)
    {
        newValue = defaultValue;
    }            
    return newValue;
} 
```

我也重命名为`propertyToChange`，`newValue`因为您在此函数中拥有的是新值，而不是属性。

您的属性定义也将不起作用。如果您需要在 getter 或设置中包含任何逻辑，则不能使用自动初始化器语法，并且必须使用支持字段来实现该属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T04:21:23.543

如果每个类型都需要特定的操作，那么使这个函数成为通用函数似乎没有意义。这似乎更合适。

```
 class TestClassAccess
    {
        public int MyPropInt { get; set { ModifyOnAccessDenied<int>(value); } }
        public string MyPropString { get; set { ModifyOnAccessDenied<string>(value); } }

        public TestClassAccess() { }

        private static volatile bool _hasAccess = false;
        private string ModifyOnAccessDenied<string>(string propertyToChange)
        {
            if (!_hasAccess)
                return string.Empty;
            return propertyToChange;
        }
        private int ModifyOnAccessDenied<int>(int propertyToChange)
        {
            if (!_hasAccess)
                return -1;
            return propertyToChange;
        }
    } 
```

但是，您可以使用动态来执行此操作，但这确实需要 .NET 4.0

```
private T ModifyOnAccessDenied<T>(T propertyToChange)
{
    if (!_hasAccess)
    {
        if (propertyToChange is string)
            return (dynamic)string.Empty;
        else if (propertyToChange is int)
            return (dynamic)(int)-1;
    }
    return propertyToChange;
} 
```

完整的工作样本：

```
static class Program
{
    [STAThread]
    static void Main()
    {
        TestClassAccess test = new TestClassAccess();
        test.MyPropInt = 4;
        test.MyPropString = "TEST";
        Console.WriteLine("MyPropInt {0}, MyPropString '{1}'",test.MyPropInt, test.MyPropString);
        // Prints "MyPropInt -1, MyPropString ''
    }
    class TestClassAccess
    {
        private int myPropInt = 0;
        public int MyPropInt { get { return myPropInt; } set { myPropInt = ModifyOnAccessDenied<int>(value); } }
        private string myPropString = string.Empty;
        public string MyPropString { get { return myPropString; } set { myPropString = ModifyOnAccessDenied<string>(value); } }

        public static volatile bool _hasAccess = false;
        private T ModifyOnAccessDenied<T>(T propertyToChange)
        {
            if (!_hasAccess)
            {
                if (propertyToChange is string)
                    return (dynamic)string.Empty;
                else if (propertyToChange is int)
                    return (dynamic)(int)-1;
            }
            return propertyToChange;
        }
    }
} 
```

# web-applications - FatFractal 部署错误 400：用户没有部署权限

> ID：15104021
> 
> 赞同：3
> 
> 时间：2013-02-27T04:06:38.463
> 
> 标签：web-applications, custom-backend

我正在尝试将我的 Web 应用程序部署到 FatFractal Cloud 服务器，并且

`ffef deployFFFabric`

命令行工具返回以下错误：

`Deployment response code : 400`

`Failed to deploy : reason [400: ffPermissions: User mv0KsSPKJe4gdAhbmxD3w6 does not have permission to deploy Application with context: ToDos to Domain: testing.]`

当我登录到 FatFractal 控制台时，我的`ToDos`应用程序被列为属于我的`testing`子域，所以我确信它们都在我的 FatFractal 用户帐户下注册。此外，我能够使用`ffef deploylocal`.

关于为什么会发生此错误和/或我可以采取哪些步骤来解决原因的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T17:45:34.057

听起来您的 PEM 以某种方式损坏了。尝试删除它：

```
rm /install/path/FatFractal_Runtime/conf/.pem 
```

现在，下次运行时`ffef deployFFFabric`，它会再次提示您输入 FatFractal 登录信息并重新生成 PEM。

# ios - 处理应用程序：willChangeStatusBarFrame：

> ID：15104022
> 
> 赞同：3
> 
> 时间：2013-02-27T04:06:38.937
> 
> 标签：ios, scale, statusbar, uiwindow, in-call

在我的应用程序中，我通过简单地缩放整个窗口以适应剩余的屏幕空间来处理状态栏框架的变化：

```
- (void)application:(UIApplication *)application willChangeStatusBarFrame:
    (CGRect)newStatusBarFrame {

    UIView* window = [UIApplication sharedApplication].keyWindow;

    [UIView animateWithDuration:1 / 3.f animations:^{
        CGFloat heightDifference = newStatusBarFrame.size.height - 
            kWXDefaultStatusBarHeight;

        [window setTransform:CGAffineTransformMakeScale(1.f, 
            heightScaleForCallStatusBar())];
        [window setFrame:CGRectOffset(window.frame, 0, heightDifference - 
            kWXDefaultStatusBarHeight / 2)];
    }];
} 
```

这可行，但如果窗口在调用期间按比例缩小，并且我提供了一个带有 的视图控制器`-presentViewController:animated:completion:`，则新控制器不使用按比例缩放的坐标系，它使用未按比例缩放的坐标系，并且 UI 会损坏。知道如何让窗口`.transform`转移到呈现的新视图控制器吗？

或者，是否有另一种方法来处理通话状态栏而不重新排列我的所有 UI 元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T22:30:44.213

每个视图控制器都会将其视图的框架设置为可用空间。处理此问题的最简单方法是确保视图的弹簧和支柱或自动布局属性允许视图的压缩或扩展。随着 iPhone 世界现在包括多种屏幕尺寸，这是一个很好的通用做法。

但是，如果您打算在视图上使用变换来处理大小调整，则可以`-viewWillLayoutSubviews`在视图控制器（可能在公共基类中）中实现以在视图控制器的根视图上设置变换。

**编辑**：

经调查，通话中状态栏的更改似乎不会导致`-viewWillLayoutSubviews`被调用。但是，以下代码（在通用视图控制器基类中）对我有用：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(statusFrameChanged:)
                                                 name:UIApplicationWillChangeStatusBarFrameNotification
                                               object:nil];
}

- (void)viewDidUnload
{
    [[NSNotificationCenter defaultCenter] removeObserver:self
                                                    name:UIApplicationWillChangeStatusBarFrameNotification
                                                  object:nil];
    [super viewDidUnload];
}

- (void)statusFrameChanged:(NSNotification*)note
{
    CGRect statusBarFrame = [note.userInfo[UIApplicationStatusBarFrameUserInfoKey] CGRectValue];
    CGFloat statusHeight = statusBarFrame.size.height;

    UIScreen *screen = [UIScreen mainScreen];
    CGRect viewRect = screen.bounds;

    viewRect.size.height -= statusHeight;
    viewRect.origin.y = statusHeight;
    self.view.frame = viewRect;
    [self.view setNeedsLayout];
}

- (void)viewWillLayoutSubviews
{
    [super viewWillLayoutSubviews];

    CGRect baseFrame = self.view.frame;
    // 548.0 is the full height of the view.  Update as necessary.
    CGFloat scale = self.view.frame.size.height / 548.0;
    [self.view setTransform:CGAffineTransformMakeScale(1.0, scale)];
    self.view.frame = baseFrame;
} 
```

# unit-testing - 塞巴斯蒂安伯格曼的 PHPUnit 3.7.14。无法识别的选项--skeleton-test

> ID：15104024
> 
> 赞同：0
> 
> 时间：2013-02-27T04:06:40.747
> 
> 标签：unit-testing, netbeans, phpunit

我正在尝试使用 netbeans (7.2.1) 进行单元测试。但它给了我这个错误。谁能告诉我有什么问题？

```
PHPUnit 3.7.14 by Sebastian Bergmann. unrecognized option --skeleton-test 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T17:12:47.977

我也偶然发现了这个问题。它已在 NetBeans 7.3 中解决，但如果您仍在使用 7.2，以下是解决方案：

1.  如其他答案中所述安装 phpunit-skelgen 。如果您使用梨：`sudo /opt/lampp/bin/pear install phpunit/PHPUnit_SkeletonGenerator`
2.  在 NetBeans 中，打开单元测试选项：工具 > 选项 > PHP > 单元测试
3.  单击骨架生成器字段的搜索按钮（或者您当然可以浏览）

这为我解决了它。此问题记录在此处的 NetBeans 问题跟踪器中：http: [//netbeans.org/bugzilla/show_bug.cgi ?id=218675](http://netbeans.org/bugzilla/show_bug.cgi?id=218675)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:51:38.627

验证该`phpunit-skelgen`文件是否存在于与 phpunit 二进制文件相同的目录中（例如。`/opt/lampp/bin/`）。

如果没有，请以与安装 PHPUnit 相同的方式安装*PHPUnit SkeletonGenerator ，例如。*来自梨：

```
$ sudo /opt/lampp/bin/pear install phpunit/PHPUnit_SkeletonGenerator 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T17:44:44.093

较新的 PHPUnit 不使用 --skeleton-test 选项。你调用一个外部脚本 phpunit-skelgen 来做同样的事情。

# javascript - 有没有办法在 MVC4 ActionLink 中为 RouteValue 参数之一调用 JavaScript？

> ID：15104025
> 
> 赞同：0
> 
> 时间：2013-02-27T04:06:48.423
> 
> 标签：javascript, asp.net-mvc, actionlink

我的页面上有一个下拉列表 (DropDownListFor) 和一个 ActionLink。基本上，我遇到的问题是我试图从下拉列表中捕获选定的值并将其作为 ID 传递到我的 ActionLink 中。这是我的代码：

```
@Html.DropDownListFor(x => x.Capsules, new SelectList(Model.Capsules, "pk", "name", "pk"))
<br />
@Html.ActionLink("Submit", "Create", 
    new { controller = "Process", id = /*JavaScript here to get the selected ID for the DropDownList above*/ },
    new { data_role = "button" }) 
```

对于我想要完成的事情，有没有办法将 JavaScript 嵌入到我的 Html.ActionLink 调用中？如果没有办法，或者不推荐，您能否建议另一种解决方案来解决此问题？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:20:36.657

您可以像这样为参数设置虚拟值`id`：

```
@Html.ActionLink("Submit", "Create", 
    new { controller = "Process", id = "dummy" },
    new { data_role = "button" }) 
```

然后在单击链接时替换该值。

```
// Assuming your link's id is `submit`, and the dropdown's id is `capsules`
$('#submit').click(function() {
    var id = $('capsules').val();
    $(this).href = $(this).href.replace('dummy', id);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T05:01:19.293

您可以通过使用 javascript 拦截链接来做到这一点 Darin[发布了一个示例](https://stackoverflow.com/questions/5067813/asp-net-mvc-2-html-actionlink-with-javascript-variable)。

但是，看起来您正在尝试使用 ActionLink 提交一些值，并且您最好创建一个包含您想要的所有值的视图模型，然后使用提交按钮发布所有内容。这允许您发布比 ID 更多的数据，防止您依赖 Javascript，并保留所有代码服务器端而不是混合和匹配。

从您发布的小代码来看 - 您已经有一个模型，可能是一些强类型实体，并且它有一个名为 Capsules 的属性。

在您的控制器中，创建包含视图数据的视图模型：

```
public class YourViewModel
{
   YourModel YourModel { get; set; }

   public int CapsuleId { get; set; }
} 
```

然后你的观点：

```
@using( @Html.BeginForm( "Create", "Process"  ) )
{
@Html.DropDownListFor(m=> m.CapsuleId, new SelectList(Model.YourModel.Capsules, "pk", "name", "pk"))
<input type="submit">
} 
```

然后你的控制器动作来处理这个：

```
[HttpPost]
public ActionResult Create( YourViewModel model )
{
   var id = model.CapsuleId;

  // do what you're going to do with the id
   return View();
} 
```

# mysql - mysql 在插入时创建触发器

> ID：15104027
> 
> 赞同：1
> 
> 时间：2013-02-27T04:07:03.940
> 
> 标签：mysql, triggers, insert

假设我有下表

```
create table try  ( name varchar(10), username varchar(10)) 
```

是否有可能触发“ON INSERT”来设置 username=user() ？

我试着做

```
create trigger userIns ON INSERT on try for each row set new.username=user(); 
```

但这会产生一些语法错误

我看过有关插入前和插入后的文档。ON INSERT 怎么样？

如果没有，我最好的选择是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T04:11:53.973

语法是：

```
CREATE TRIGGER trigger_name trigger_time trigger_event
ON table_name
FOR EACH ROW
BEGIN
...
END 
```

您的语法`trigger_time`部分错误。

> 触发器激活时间可以是 BEFORE 或 AFTER。定义触发器时必须指定激活时间。如果要在对表进行更改之前处理操作，则使用 BEFORE 关键字，如果需要在更改后处理操作，则使用 AFTER。

试试这个 ：

```
create trigger userIns BEFORE INSERT on try for each row set new.username=user(); 
```

更多：[MYSQL 触发器教程](http://www.mysqltutorial.org/create-the-first-trigger-in-mysql.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T04:10:50.567

正确的语法是

```
Create Trigger trigger_name trigger_time trigger_event
on table_name
for each row
begin
....

end 
```

Trigger_time => 之前 | 在 trigger_event => 插入 | 之后 更新 | 删除

请检查

```
create trigger userIns INSERT on try for each row begin set new.username=user() end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T21:22:32.090

以上都不是我的问题。我真的在寻找一个 ON INSERT 触发器——但它在 MYSQL 中不存在。所以我使用了 BEFORE INSERT 并且效果很好

```
create trigger userIns BEFORE INSERT on try for each row set new.CREATED_BY=user(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-20T03:44:57.800

问题是您需要将分隔符设置为“;”以外的其他内容 在开始触发代码之前。将新的分隔符放在'end'之后，然后将分隔符改回';' 完成后。

# php - drupal 6表格表格间距问题

> ID：15104031
> 
> 赞同：1
> 
> 时间：2013-02-27T04:07:58.770
> 
> 标签：php, drupal, drupal-6

![带有此处显示的代码的表输出](../Images/afe070fac8b9e88037f1d6846de7c01f.png)

我写了一个表单模块，我想在其中制作文本字段表，但它们的间距彼此相距很远，如图所示。我怎样才能让他们靠得更近？出于某种原因，行与列之间的间隔非常远，列也是如此。我希望它们与大多数为网站构建的 HTML 表格一样彼此相邻。

其次，有没有办法将表单合并到drupal为常规文本内容提供的theme_table()中？这种格式对那些人来说真的很好。--> [http://coffeeshopped.com/2010/09/drupal-drag-and-drop-tables-in-custom-modules](http://coffeeshopped.com/2010/09/drupal-drag-and-drop-tables-in-custom-modules) 我应该能够将 $form 填充到 theme_table() 的 $header 和 $row 数组中. 我发布了一个替代方案，这也是一个问题：[drupal 6 form module not calling hook_theme](https://stackoverflow.com/questions/15105655/drupal-6-theme-table-for-form-elements-using-theme-hook)

```
 $form['a1'] = array(
    '#type' => 'textfield',
    '#title' => t('Date'),
    '#prefix'=>'<table><tr><td>',
    '#suffix'=>'</td>',
  );
    $form['a2'] = array(
    '#type' => 'textfield',
    '#title' => t('Amount Requested'),
    '#prefix'=>'<td>',
    '#suffix'=>'</td>',
  );
     $form['a3'] = array(
    '#type' => 'textfield',
    '#title' => t('Amount Recieved'),
    '#prefix'=>'<td>',
    '#suffix'=>'</td></tr>',
  );

  $form['b1'] = array(
    '#type' => 'textfield',
    '#prefix'=>'<tr><td>',
    '#suffix'=>'</td>',
  );
    $form['b2'] = array(
    '#type' => 'textfield',
    '#prefix'=>'<td>',
    '#suffix'=>'</td>',
  );
      $form['b3'] = array(
    '#type' => 'textfield',
    '#prefix'=>'<td>',
    '#suffix'=>'</td></tr>',
  );
  $form['c1'] = array(
    '#type' => 'textfield',
    '#prefix'=>'<tr><td>',
    '#suffix'=>'</td>',
  );
    $form['c2'] = array(
    '#type' => 'textfield',
    '#prefix'=>'<td>',
    '#suffix'=>'</td>',
  );
     $form['c3'] = array(
    '#type' => 'textfield',
    '#prefix'=>'<td>',
    '#suffix'=>'</td></tr></table>',
  ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:02:31.533

虽然我不会再次复制您的代码、编辑、测试和发布，但我为此采用的解决方案就像 -

在表单元素的前缀后缀中放置一些 ID 或 Class 并为其设置样式，或者您只需为表单的第一个元素放置一个 Class/ID 并最后结束它并为该特定 DIV 编写 TD/TR 的样式。

您将能够以这种方式修复间距..

可以有其他方式......但这就是我所做的。

谢谢，

# php - 将二进制数据传递给 PHP system() 命令

> ID：15104032
> 
> 赞同：1
> 
> 时间：2013-02-27T04:08:02.800
> 
> 标签：php, imagemagick

是否可以将二进制数据传递到`system()`如下所示的位置？

```
$contents = file_get_contents("http://somesite.com/image.jpg");
$out = system("{$contents} | convert - -fuzz 10% -trim jpeg:-"); 
```

当我进入终端并执行`cat filename | convert - -fuzz 10% -trim jpeg:-`它时，它会将二进制数据返回到 STDOUT ......但是当我`echo()`或`print_r()`上面的数据时，它总是为空的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:11:52.193

1.  使用 base64：

    ```
    system('echo ' . base64_encode($contents) . " | base64 -d | convert - -fuzz 10% -trim jpeg:-"); 
    ```

2.  你可能会问一个单独的问题

# objective-c - 通过 AFNetworking 在指定索引处将 UIImage 添加到 NSMutableArray

> ID：15104034
> 
> 赞同：0
> 
> 时间：2013-02-27T04:08:23.003
> 
> 标签：objective-c, uiimageview, uiimage, nsmutablearray, afnetworking

我正在使用 cellForRowAtIndexPath 中的以下代码从 Web 服务中获取图像：

```
[cell.posterImageView setImageWithURLRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:[postersURLArray objectAtIndex:indexPath.row]]] placeholderImage:[UIImage imageNamed:@"placeholder.png"]
    success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image)
     {
         if (request)
         {
             [UIView transitionWithView:cell.posterImageView
                               duration:1.0f
                                options:UIViewAnimationOptionTransitionCurlUp
                             animations:^{[cell.posterImageView setImage:image];}
                             completion:nil];

             posterImageView.tag = indexPath.row;
             posterImageView.image = image;
             [myImage insertObject:posterImageView atIndex:posterImageView.tag];
         }

        else
        {
            NSLog(@"Cached");
        }
    }
    failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error)
    {
        NSLog(@"Failed to fetch poster.");
    }]; 
```

但它总是会产生错误。我已经分配了 myImage 可变数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T04:34:23.480

`index`您传递给的必须`insertObject:atIndex:`小于或等于当前已添加到数组中的对象数。您不能像您正在做的那样在数组中的随机位置插入对象。

当您分配一个可变数组时，即使具有设定的容量，该数组也是空的。从空数组开始，您唯一的选择是调用`addObject:`或`insertObject:atIndex:`使用索引 0 调用。除 0 以外的任何值（假设数组为空）都会导致异常。

如果您需要在随机位置插入对象，则必须首先用一组虚拟对象（例如`NSNull`实例）填充数组。这要求您知道最大数组大小是多少。

```
NSUInteger maxSize = ... // some known maximum number of images
NSMutableArray *myImage = [NSMutableArray arrayWithCapacity:maxSize];
for (NSUInteger i = 0; i < maxSize; i++) {
    [myImage addObject:[NSNull null]];
} 
```

现在您可以在任意位置插入图像，只要索引小于`maxSize`. 但是现在您必须使用`replaceObjectAtIndex:withObject:`而不是`insertObject:atIndex:`.

# javascript - JavaScript window.open _self 问题

> ID：15104035
> 
> 赞同：0
> 
> 时间：2013-02-27T04:08:24.330
> 
> 标签：javascript, self, window.open

我有一些旧代码要在同一个窗口中打开

```
if(sgame=='BIN') {
  window.open('http://<%=Application("domain")%>/client/client.asp?z=<%=encode(session("username")&"|"&session("password")&"|"&session("id"))%>&lang=<%=session("lang")%>&host='+shost+'&port='+sport+'&dat='+sfolder
             ,'bingogame'+Math.round(Math.random()*9999)
             ,'_self'
             ,'resizable=no
             ,scrollbars=no
             ,width=1024
             ,height=768'); 
```

据我了解，我将“_self”放在了正确的位置，但它仍在打开一个新的浏览器窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T04:15:11.700

`+sfolder,'bingogame'+Math.round(Math.random()*9999)`

上面的代码段在和`comma`之间有一个额外的。您的第二个参数应该是，但是由于那个额外的，已经成为第三个参数。修复它，它应该可以工作。`sfolder``bingogame``'_self'``comma``'_self'`

[`Window.open`](http://www.w3schools.com/jsref/met_win_open.asp)将为您提供有关参数的更多信息。

# html - Google Chrome 中的连续图像布局

> ID：15104037
> 
> 赞同：1
> 
> 时间：2013-02-27T04:08:25.907
> 
> 标签：html, google-chrome

我正在开发一个网站，该网站的界面包含一系列 12 个 ASP.NET ImageButton 控件 - 顶部六个，底部六个。这些呈现为`<input type="image" />`HTML 元素。它们应该从左到右排列，如下面的屏幕截图所示。

![12 个图像图标从左到右排列，一行在另一行之上。](../Images/44d7d11b917d6b238eda6cc624c9861b.png)

直到最近，标记正确地布置了 Firefox、IE 和 Chrome 中的图标。最近一位客户注意到，在 Chrome 中，图像不是水平排列的，而是一个在另一个之上，如下面的屏幕截图所示。

![这 12 个图像图标在 Chrome 中一层一层地排列。](../Images/6b5f2b572a148e0f70d4b9b909486a30.png)

[您可以在http://fuzzylogicinc.net/demos/snippet.html](http://fuzzylogicinc.net/demos/snippet.html)上看到正在运行的标记。如果您使用 IE 或 Firefox 查看按钮，则按钮布局正确，从左到右。如果您在最新版本的 Chrome 中查看它，按钮会从上到下排列。

显然，标记是相同的，并且上面的演示/片段中的样式很少。我需要做什么才能让它在 Chrome 中运行？

这是图像按钮的（缩写）标记。没有应用其他样式。

```
<input type="image" name="..." id="..." title="General Invoice" src="..." style="height:20px;border-width:0px;" />

<input type="image" name="..." id="..." title="General Invoice" src="..." style="height:20px;border-width:0px;" />

<input type="image" name="..." id="..." title="General Invoice" src="..." style="height:20px;border-width:0px;" />

...

<br />

<input type="image" name="..." id="..." title="General Invoice" src="..." style="height:20px;border-width:0px;" />

<input type="image" name="..." id="..." title="General Invoice" src="..." style="height:20px;border-width:0px;" />

<input type="image" name="..." id="..." title="General Invoice" src="..." style="height:20px;border-width:0px;" />

... 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T04:39:19.047

您的 td 宽度导致问题 100% .. 使它成为 - style="white-space: nowrap;" 对于按钮行（第一行）

```
 <tbody><tr><td>..<td>..
 <td  style="white-space: nowrap;">
 <input type="submit" name="ctl00$Content01$btnGotoOrderNumber" value="Go" ..... 
```

# c# - 扩展方法没有智能感知

> ID：15104039
> 
> 赞同：1
> 
> 时间：2013-02-27T04:08:29.413
> 
> 标签：c#, visual-studio-2010, visual-studio, extension-methods, intellisense

我创建了一个扩展方法，当我尝试通过**10.getNegative()**调用它时，我没有得到智能感知。但是智能感知适用于

```
int k = 10;
k.getNegative(); 
```

我想知道应该是什么原因？

```
class Program
{
    static void Main(string[] args)        
    {
        Console.WriteLine(10.getNegative());
    }       
}

static class Math
{
    public static int getNegative(this int i)
    {
        return -i;
    }        
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T04:31:52.767

如果您在整数后放置一个点 (.)，智能感知会感知到您可能要写一个小数；要获得智能感知，请使用括号：`(10).GetNegative()`

# iphone - 确认 UIGestureRecognizer？

> ID：15104042
> 
> 赞同：1
> 
> 时间：2013-02-27T04:08:39.477
> 
> 标签：iphone, ios, uigesturerecognizer, gesture

例如，当我使用`UIGestureRecognizer`时，当用户向右滑动时，我想`UIAlertView`询问他是否真的要执行向右滑动的动作。

我曾尝试这样做，但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T04:12:13.780

在`UIGestureRecogniser`事件方法中，`UIAlertView`使用适当的标题/消息创建一个。

将代理设置`UIAlertView`为`self`，然后`alertView:didDismissWithButtonIndex:`您可以根据用户点击的内容执行或不执行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T04:16:06.647

这样做，

```
UISwipeGestureRecognizer *gesture1 = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(didSwipeRight:)];
gesture1.direction = UISwipeGestureRecognizerDirectionRight;
[yourView addGestureRecognizer:gesture1]; 
```

在 Action 方法中，

```
-(void)didSwipeLeft:(UIGestureRecognizer *)gestureRecognizer {
    UIAlertView *Alert = [[UIAlertView alloc] initWithTitle:@"" message:@"Are you sure to commit with its action" delegate:self cancelButtonTitle:CKString(@"NO") otherButtonTitles:CKString(@"YES"),nil];
    [Alert show];
    Alert.tag=222;
    Alert.delegate=self;
    [Alert release];
} 
```

在 AlertView 委托中

```
-(void) alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {

    if(alertView.tag==222) {
        if(buttonIndex==1)
        {
            //// Yes condition
        } else {
           ///// No condition
        }
    }
} 
```

# vb.net - 使用do-while循环的Visual Basic drawpolygon方法？

> ID：15104043
> 
> 赞同：0
> 
> 时间：2013-02-27T04:08:48.980
> 
> 标签：vb.net

我正在寻求有关 drawpolygon 方法的帮助。我没有任何运气可以工作。想做 5 个三角形，大小相同，彼此相邻。问题是我必须使用 do-while 循环。感谢您花时间帮助我！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T08:37:26.390

只需在数组中定义点，然后用笔写它们：

```
Dim blackPen As New Pen(Color.Black, 3)

Dim point1 As New Point(50, 50)
Dim point2 As New Point(100, 25)
Dim curvePoints As Point() = {point1, point2}

Me.CreateGraphics.DrawPolygon(blackPen, curvePoints) 
```

查看有关它的[MSDN 文档](http://msdn.microsoft.com/es-es/library/dd0c4s09.aspx)。

你是否在循环中做任何事情都没有关系，取决于如何。如果这不能解决您的问题，请发布您的代码以便为您提供更多帮助。

带有循环的示例：

```
Do While i < 3
    point1 As New Point(50 + i * 10, 50)
    point2 As New Point(100 + i * 7, 25)

    curvePoints = {point1, point2}
    Me.CreateGraphics.DrawPolygon(blackPen, curvePoints)
    i += 1
Loop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T18:38:31.960

我还没有真正测试过这个结构，但它都是从一个工作项目中剪下来的；我怀疑它会起作用，而且第一次拿起这些 GDI+ 的东西真的很蹩脚。

```
Public Class Form1
Private subject As Image

Private Sub Form1_Paint(ByVal sender As Object, ByVal e As System.Windows.Forms.PaintEventArgs) Handles Me.Paint
    If Not subject Is Nothing Then
        Dim g As Graphics = e.Graphics
        g.DrawImage(subject, New Point(1, 1))
    End If
End Sub

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Dim tempBM As New Bitmap(subject)
    tempBM.SetResolution(subject.HorizontalResolution, subject.VerticalResolution)
    Using g As Graphics = Graphics.FromImage(tempBM)
         g.DrawPolygon(OutlinePen, Polygon.GetPoints)
    End Using
    subject = tempBM
    Invalidate()
End Sub
End Class 
```

哦，Polygon 是我的代码中的一个类，你不会有。但是只需将 Polygon.GetPoints 替换为您想要使用的任何点数组。

# android - 在 Google Maps Android API v2 中使用新的 OnMyLocationChangeListener

> ID：15104044
> 
> 赞同：2
> 
> 时间：2013-02-27T04:08:49.787
> 
> 标签：android, google-maps-android-api-2

Google 终于在 Android API v2 中添加了位置更改回调！但是，我不能直观地让它工作，而且谷歌没有太多的文档。有没有人让它工作？我还需要什么？

```
 public class ... extends SupportMapFragment implements GoogleMap.OnMyLocationChangeListener {
GoogleMap map;
LocationManager locationManager;
String provider;

        @Override
        public void onActivityCreated(android.os.Bundle savedInstanceState) {
            super.onActivityCreated(savedInstanceState);
            map = getMap();
                    if (map != null) {
                       Criteria criteria = new Criteria();
                       criteria.setAccuracy(Criteria.ACCURACY_FINE);
                           locationManager =(LocationManager)getActivity().getSystemService(Context.LOCATION_SERVICE);
                provider = locationManager.getBestProvider(criteria, false);
            }
        }

        @Override
        public void onResume() {
            super.onResume();
            while(map == null) {
                map = getMap();
                map.setMyLocationEnabled(true);
                map.setOnMyLocationChangeListener(this);
            }
        }
        @Override
        public void onMyLocationChange(Location loc) {
            //implementation
        }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T13:03:16.573

当我们获得第一次位置更新时，这就是我导航到地图中心的方式。

我的班级标题：

```
public class FragActivity extends SherlockFragmentActivity implements  OnMyLocationChangeListener

private GoogleMap mMap; 
```

我的 mMap 设置：

```
 if (mMap == null) {
        // Try to obtain the map from the SupportMapFragment.
        mMap = customMapFragment.getMap();

        // Check if we were successful in obtaining the map.
        if (mMap != null)
            setUpMap();
    } 
```

setUpMap 方法：

```
private void setUpMap() {
    mMap.setMyLocationEnabled(true);
    mMap.setOnMyLocationChangeListener(this);
} 
```

和我的位置变化：

```
@Override
public void onMyLocationChange(Location lastKnownLocation) {
    CameraUpdate myLoc = CameraUpdateFactory.newCameraPosition(
            new CameraPosition.Builder().target(new LatLng(lastKnownLocation.getLatitude(),
                    lastKnownLocation.getLongitude())).zoom(6).build());
    mMap.moveCamera(myLoc);
    mMap.setOnMyLocationChangeListener(null);
} 
```

奇迹般有效

# r - 将字符向量作为参数传递给 plyr 中的函数

> ID：15104046
> 
> 赞同：1
> 
> 时间：2013-02-27T04:09:04.953
> 
> 标签：r, function, vector, plyr, argument-passing

我怀疑我做错了，但我想将字符向量作为参数传递给`ddply`. 有很多关于删除引号等的问答，但它似乎对我不起作用（例如，从 R和[http://r.789695.n4.nabble.com/Pass-character-](http://r.789695.n4.nabble.com/Pass-character-vector-to-function-argument-td3045226.html)[中的字符向量中删除引号](https://stackoverflow.com/questions/5215481/remove-quotes-from-a-character-vector-in-r)[向量到函数参数-td3045226.html](http://r.789695.n4.nabble.com/Pass-character-vector-to-function-argument-td3045226.html)）。

```
# reproducible data
df1<-data.frame(a=sample(1:50,10),b=sample(1:50,10),c=sample(1:50,10),d=(c("a","b","c","a","a","b","b","a","c","d")))
df2<-data.frame(a=sample(1:50,9),b=sample(1:50,9),c=sample(1:50,9),d=(c("e","f","g","e","e","f","f","e","g")))
df3<-data.frame(a=sample(1:50,8),b=sample(1:50,8),c=sample(1:50,8),d=(c("h","i","j","h","h","i","i","h")))

#make a list
list.1<-list(df1=df1,df2=df2,df3=df3)

# desired output
lapply(list.1, function(x)   ddply(x, .(d), function(x)  data.frame(am=mean(x$a), bm=mean(x$b), cm=mean(x$c))))

$df1
  d       am       bm       cm
1 a 31.00000 29.25000 18.50000
2 b 31.66667 24.33333 34.66667
3 c 18.50000  5.50000 24.50000
4 d 36.00000 39.00000 43.00000

$df2
  d       am       bm cm
1 e 18.25000 32.50000 18
2 f 27.66667 41.33333 24
3 g 25.00000  7.50000 42

$df3
  d       am       bm       cm
1 h 36.00000 25.00000 20.50000
2 i 25.33333 37.33333 24.33333
3 j 32.00000 32.00000 46.00000 
```

但我的实际用例有许多新列和不同类型的计算，我想在`ddply`函数中计算。所以我想做类似的事情：

```
# here's a simple version of a function that I want to send to ddply    
func <- "am=mean(x$a), bm=mean(x$b), cm=mean(x$c)"

# here's how I imagine it might work
lapply(list.1, function(x)   ddply(x, .(d), function(x)  data.frame(func)) )

# not the desired outcome... 
$df1
  d                                     func
1 a am=mean(x$a), bm=mean(x$b), cm=mean(x$c)
2 b am=mean(x$a), bm=mean(x$b), cm=mean(x$c)
3 c am=mean(x$a), bm=mean(x$b), cm=mean(x$c)
4 d am=mean(x$a), bm=mean(x$b), cm=mean(x$c)

$df2
  d                                     func
1 e am=mean(x$a), bm=mean(x$b), cm=mean(x$c)
2 f am=mean(x$a), bm=mean(x$b), cm=mean(x$c)
3 g am=mean(x$a), bm=mean(x$b), cm=mean(x$c)

$df3
  d                                     func
1 h am=mean(x$a), bm=mean(x$b), cm=mean(x$c)
2 i am=mean(x$a), bm=mean(x$b), cm=mean(x$c)
3 j am=mean(x$a), bm=mean(x$b), cm=mean(x$c) 
```

我已经尝试过`noquote`, `deparse`,`eval(as.symbol())`和这里的`do.call(data.frame, ...)`一些方法：[https](https://github.com/hadley/devtools/wiki/Evaluation)`func` ://github.com/hadley/devtools/wiki/Evaluation无济于事。此时解决方案可能很明显（即融化所有东西！），但如果不是，这里有一个更接近我的用例的更长示例：

```
# sample data
s <- 23 # number of samples
r <- 10 # number of runs per sample
el <- 17 # number of elements
mydata <- data.frame(ID = unlist(lapply(LETTERS[1:s], function(x) rep(x, r))),
                     run = rep(1:r, s))
# insert fake element data
mydata[letters[1:el]] <- lapply(1:el, function(i) rnorm(s*r, runif(1)*i^2))

# generate all combinations of 5 runs from  ten runs
su <- 5 # number of runs to sample from ten runs
idx <- combn(unique(mydata$run), su)

# RSE function
RSE <- function(x) {100*( (sd(x)/sqrt(length(x)))/mean(x) )}

# make a list of dfs for all samples for each combination of five runs
# to prepare to calculate RSEs
combys1 <- lapply(1:ncol(idx), function(i) mydata[mydata$run %in% idx[,i],] )

# make a list of dfs with RSE for each ID, for each combination of runs
combys2 <- lapply(1:length(combys1), function(i) ddply(combys1[[i]], "ID", summarise, RSEa=RSE(a), RSEb=RSE(b), RSEc=RSE(c), meana=mean(a), meanb=mean(b), meanc=mean(c))) 
```

我想`RSEa=RSE(a), RSEb=RSE(b), RSEc=RSE(c), meana=mean(a), meanb=mean(b), meanc=mean(c)`用这里的对象替换上面的最后一行`doRSE`，以避免大量输入：

```
# prepare to calculate new colums with RSE and means
RSEs <- sapply(3:ncol(mydata), function(j) paste0("RSE",names(mydata[j]))) 
RSExs <- sapply(3:ncol(mydata), function(j) paste0("RSE(",names(mydata[j]),")")) 
doRSE <- paste0(sapply(1:length(RSEs), function(x) paste0(RSEs[x],"=",RSExs[x])), collapse=",", sep="") 
```

我对涉及基础`data.table`和肮脏技巧的解决方案持开放态度。似乎这些接近我想要的，但我不能完全将它们转化为我的问题： [传递字符参数和评估](https://stackoverflow.com/questions/13339157/pass-character-argument-and-evaluate?rq=1)， [使用字符向量强制评估多个变量](https://stackoverflow.com/questions/13781881/force-evaluation-of-multiple-variables-using-vector-of-character?rq=1)， [使用与表达式相对应的字符向量作为函数的参数](https://stackoverflow.com/questions/10232195/using-a-vector-of-characters-that-correspond-to-an-expression-as-an-argument-to)

**更新**这里有一个问题：我希望能够`func`在简单示例（或`doRSE`我的用例）中修改，以创建一堆新列，这些新列是对现有列进行各种计算以探索数据。我想要一个允许生成的数据帧具有原始数据帧中没有的新列的工作流。抱歉，原始问题中没有更清楚。我看不出如何调整@Marius 的答案来做到这一点，但@mnel 很有帮助（请参阅下面的更新）

通过@mnel 出色的肮脏技巧，通过一些小修复，我可以在我的用例中获得所需的结果：

```
# @mnel's solution, adapted (no period before eval)
combys2 <- lapply(combys1, function(x) do.call(ddply,c(.data = quote(x), 
                           .variables = quote(.(ID)), .fun = quote(summarize),
                           eval(parse(text = sprintf('.(%s)', doRSE ))))))
head(combys2)

[[1]]
   ID       RSEa      RSEb     RSEc      RSEd     RSEe      RSEf     RSEg      RSEh      RSEi
1   A  168.30658  21.68632 5.657228  5.048057 4.162017 2.9581874 1.849009 0.6925148 0.4393491
2   B   26.55071  26.20427 4.782578  4.385409 2.342764 2.1813874 2.719625 1.1576681 0.6427935
3   C   73.83165  14.47216 8.154435  6.273202 3.046978 1.2179457 2.811405 1.1401837 0.8167067
4   D   31.96170  57.89260 9.438220  7.388410 3.755772 0.8601780 3.724875 0.8358204 0.9939387
5   E   63.22537  60.35532 5.839690 11.691304 3.828430 0.9217787 4.204300 0.8217187 0.7876634
6   F   56.37635  65.37907 4.149568  5.496308 2.227544 2.1548455 2.847291 1.1956212 0.2506518
7   G   69.32232  23.63214 4.255847  7.979225 4.917660 1.6185960 3.156521 0.3265555 0.8133279
8   H   29.82015  40.74184 7.372100  7.464792 2.749862 0.6054420 4.061368 0.9973909 1.3807720
9   I   50.58114  19.53732 2.989920  9.767678 4.000249 1.7451322 1.175397 0.9952093 0.9095086
10  J   92.96462  39.77475 6.140688 10.295668 3.407726 2.4663758 3.030444 0.5743419 0.9296482
11  K   90.72381  42.25092 2.483069  6.781054 3.142082 1.8080633 2.891740 1.1996176 0.8525290
12  L -385.24547  40.81267 4.506087  8.148382 2.976488 0.8304432 2.234134 0.2108664 0.4979777
13  M   22.77743  33.98332 2.913926  8.764639 2.307293 0.8366635 3.229944 1.0003125 0.3878567
14  N   66.75163  34.16087 6.611326 13.865377 1.285522 1.3863958 4.165575 0.7379386 0.4515194
15  O   37.37188 100.57479 5.738877  5.724862 2.839638 1.1366610 3.186332 0.7383855 0.3954544
16  P   17.08913  26.62210 6.060130  4.110893 2.688908 2.6970727 1.609043 1.3860834 0.8780010
17  Q   13.96392  74.92279 5.469304  8.467638 2.974131 1.2135436 3.284564 0.6232778 1.0759226
18  R   42.59899  30.75952 4.842832  8.764158 1.874020 1.5791048 3.427342 1.4479638 0.2964455
19  S   26.03307  15.56352 6.968717  7.783876 4.439733 2.0764179 4.683080 0.7459654 1.1268772
20  T   71.57945  33.81362 7.147049 11.201551 2.128315 2.2051611 2.419805 0.2688807 1.1559635
21  U   73.93002  11.77155 7.738910  7.207041 1.478491 1.4409844 4.042419 0.5883490 0.5585716
22  V   67.93166  39.54994 5.701551  8.636122 2.472963 1.6514199 2.627965 1.0359048 0.8747136
23  W   11.23057  12.51272 7.003448  7.424559 4.102693 0.6614847 2.246305 1.3422405 0.2665246
        RSEj      RSEk      RSEl      RSEm      RSEn      RSEo      RSEp      RSEq
1  0.6366733 0.3713819 2.1993487 0.3865293 0.5436581 0.9187585 0.4344699 0.8915868
2  0.3445095 0.2932025 1.8563179 0.5397595 1.0433388 0.3533622 0.1942316 0.1941072
3  0.2720344 0.5507595 2.0305726 0.4377259 0.8589854 0.5690906 0.1397337 0.4043247
4  0.6606667 0.6769112 3.4737352 0.5674656 1.2519256 0.8718298 0.1162969 0.8287504
5  0.4620774 0.5598069 1.9236112 0.7990046 0.9832732 0.6847352 0.4070675 0.9005185
6  0.7981610 0.4005493 0.9721068 0.2770989 1.7054674 0.3110139 0.4521183 0.8740444
7  0.3969116 0.4717575 4.1341106 0.7510628 0.9998299 0.5342292 0.4319642 1.1861705
8  0.2963956 0.2652221 0.4775827 0.2617120 0.8261874 0.5266087 0.1900943 0.2350553
9  0.2609359 0.5431035 2.6478440 0.1606919 0.7407281 0.6802262 0.1802069 0.7438792
10 0.4239787 0.8753544 3.4218030 0.5467869 0.7404017 0.5581173 0.3682014 0.6361436
11 0.4188502 0.8629862 4.4181479 0.1623873 0.8018811 0.5873609 0.3592134 0.5357984
12 0.5790265 0.5009210 3.7534287 0.1933726 0.5809601 0.5777868 0.3400925 0.4783890
13 0.3562582 0.2552756 2.1393219 0.1849345 0.5796194 0.6129469 0.3363311 0.4382125
14 0.7921502 0.6147990 2.9054634 0.5852325 1.4954072 0.9983203 0.2937837 0.7654504
15 0.5840424 0.2757707 1.5695675 0.3305385 0.8712636 0.5816490 0.1985457 0.7213289
16 0.3301280 0.3008273 2.9014987 0.4540833 0.5966479 0.9042004 0.1631630 0.7262141
17 0.5882511 0.2820978 3.0652666 0.4518936 1.3168151 0.4749311 0.2244693 0.6583083
18 0.4048816 0.3708787 3.2207478 0.2603412 1.3168318 0.3318745 0.3120436 0.6210711
19 0.4425123 0.3602076 3.7609863 0.5399527 0.8302572 0.3246904 0.1952143 0.2915325
20 0.5877835 0.6339015 1.6908570 0.3223056 0.5239339 0.6607198 0.2808094 0.3697380
21 0.4454056 0.7733354 4.3433420 0.4391075 0.5503594 0.5893406 0.2262403 0.2361512
22 0.9583940 0.6365843 3.0033951 0.6507968 0.8610046 0.6363198 0.2866719 0.5736855
23 0.4969730 0.3895182 2.0021608 0.3354475 1.4398250 0.7386870 0.2458906 0.3414804
...
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T04:25:50.740

您可以使用`quote`和`plyr::.`

阅读[https://github.com/hadley/devtools/wiki/Computing-on-the-language](https://github.com/hadley/devtools/wiki/Computing-on-the-language)可能有助于了解您是否真的想这样做。

无论如何，一种方法可能是使用

1.  用于`.()`创建参数向量，例如并使用 summarise 的工作方式

    ```
    .(am=mean(a), bm=mean(b), cm=mean(c)) 
    ```

    如果你真的想使用一个字符串

    ```
    foo<- "am=mean(a), bm=mean(b), cm=mean(c)"
    eval(parse(text = sprintf('.(%s)', foo ))) 
    ```

2.  自由地使用`quote`来创建要传递给的列表`do.call`

例如

```
lapply(list.1, function(x) do.call(ddply,c(.data = quote(x), 
    .variables = quote(.(d)), .fun = quote(summarize),
      .(am=mean(a), bm=mean(b), cm=mean(c))))) 
```

哦，男孩是那么丑陋。

或者，您可以使用`data.tables`

```
library(data.table)

listDT <- lapply(list.1, data.table)

lapply(listDT, function(x) x[,lapply(.SD, mean), by = 'd']) 
```

或者

```
mystuff <- sprintf('list(%s)', foo)
lapply(listDT, function(x) x[, eval(parse(text = mystuff)), by = 'd']) 
```

但是，如果您在所有 data.tables 中都有所有相同的列，那么创建一个大型 data.table（列表的每个元素都有一个标识符）并处理它会更有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T04:27:38.157

这是一个`ddply`计算不在数据框中的所有列的平均值的函数`d`：

```
lapply(list.1,
       function(x) {
         ddply(
           x,
           .(d),
           function(df_part) {
             result_df <- data.frame(d=df_part$d[1])
             non_d_cols <- colnames(df_part)[! colnames(df_part) == "d"]
             for (col in non_d_cols) {
               col_mean <- mean(df_part[[col]])
               col_name <- paste0(col, "_mean")
               result_df[[col_name]] <- col_mean
             }
             return(result_df)
           })
       }) 
```

在我看来，这似乎是最简单的方法，它应该很好地推广到您可能想要在这些列上进行的其他计算。也许您可以传入要计算平均值的列的字符向量参数，并使用它来代替`non_d_cols`.

# php - 对多维数组进行排序

> ID：15104047
> 
> 赞同：0
> 
> 时间：2013-02-27T04:09:09.023
> 
> 标签：php, sorting, multidimensional-array

我想通过几个关键字对下面的多维数组进行排序-让我简单地解释一下。

这就是我的多维数组中的部分的样子

```
[template] => Array
            (
                [0] => Array
                    (
                        [KeyA] => 123
                        [KeyB] => ABC
                        [KeyC] => #FFFFF
                        [custom] => Array
                            (
                                [0] => Array
                                    (
                                        [value] => bla
                                        [var] => 2
                                    )

                                [1] => Array
                                    (
                                        [value] => c1
                                        [var] => 5
                                    )

                            )

                    )
            ) 
```

该模板数组中有大量多维数组，我现在希望它们按 KeyC（#00000 第一优先级，#FFFFFF 第二优先级，#333333 第三优先级）排序，然后按 KeyA 字母顺序排序。

怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T05:11:30.683

PHP 有几个处理数组排序的函数，数组排序背后的逻辑是：

*   一些基于数组键排序，而另一些则基于值： $array['key'] = 'value';

*   排序后是否保持键和值之间的相关性，这可能意味着键以数字方式重置（0,1,2 ...）

*   排序顺序：字母、从低到高（升序）、从高到低（降序）、数字、自然、随机或*用户定义*

*   如果这些排序函数中的任何一个将两个成员评估为相等，则顺序未定义（排序不稳定）。

注意：所有这些排序函数都直接作用于数组变量本身，而不是返回一个新的排序数组。

排序的主要功能在[http://www.php.net/manual/en/array.sorting.php](http://www.php.net/manual/en/array.sorting.php)进行了描述，并且要创建自定义排序，您必须使用最适合自己的技巧。

# html - 1 行中的 5 个相等跨度 - Twitter Bootstrap

> ID：15104049
> 
> 赞同：5
> 
> 时间：2013-02-27T04:09:15.500
> 
> 标签：html, css, twitter-bootstrap

使用流体网格布局，我可以获得 4 个相等的跨度：

```
<div class="row-fluid">
  <div class="span3">...</div>
  <div class="span3">...</div>
  <div class="span3">...</div>
  <div class="span3">...</div>
</div> 
```

或者我可以得到 6 个相等的跨度：

```
<div class="row-fluid">
  <div class="span2">...</div>
  <div class="span2">...</div>
  <div class="span2">...</div>
  <div class="span2">...</div>
  <div class="span2">...</div>
  <div class="span2">...</div>
</div> 
```

但是我如何获得 5 个相等的跨度？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-16T22:03:16.717

我遵循了计算宽度的引导方法，并提出了以下建议。您将需要遵循以下 HTML 结构：

```
<div class="row-fluid-5">
    <div class="span2">Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum</div>
    <div class="span2">Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum</div>
    <div class="span2">Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum</div>
    <div class="span2">Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum</div>
    <div class="span2">Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum</div>
</div> 
```

然后，在您加载 bootstrap.css 和 bootstrap-responsive.css 后，使用以下内容加载您的 custom.css 文件：

```
/* CUSTOM 5 COLUMN SPAN LAYOUT
  *
  * based on http://gridcalculator.dk/
  * width => 1200, gutter => 15px, margin => 15px, columns => 5
  */
 .row-fluid-5 {
   width: 100%;
   *zoom: 1;
 }
 .row-fluid-5:before,
 .row-fluid-5:after {
   display: table;
   line-height: 0;
   content: "";
 }
 .row-fluid-5:after {
   clear: both;
 }
 .row-fluid-5 [class*="span"] {
   display: block;
   float: left;
   width: 100%;
   min-height: 30px;
   margin-left: 1.875%;
   *margin-left: 1.875%;

   -webkit-box-sizing: border-box;
      -moz-box-sizing: border-box;
           box-sizing: border-box;
 }

 .row-fluid-5 .controls-row [class*="span"] + [class*="span"] {

   margin-left: 1.875%;
 }
 .row-fluid-5 [class*="span"]:first-child{
    margin-left: 0;
 }
 .row-fluid-5 .span2 {
   width: 18.5%;
   *width: 18.5%;
 }

 /* responsive ONLY */

 @media (max-width: 600px){ /* spans reduce to 100px then go full width */

    .row-fluid-5 [class*="span"]{
    margin-left: 0;
    float: left;
    width: 100%;
    padding: 10px; 
    }
 } 
```

查看下面的演示以了解它是如何工作的。

**[演示](http://jsfiddle.net/S5ps6/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T04:15:23.417

考虑到默认情况下 bootstrap 是 12 列，你不能在数学上得到 5 个相等的跨度。

但是，如果您真的需要（坏主意，稍后再介绍），您可以自定义引导下载以具有 15 列。

[http://twitter.github.com/bootstrap/customize.html](http://twitter.github.com/bootstrap/customize.html)

将变量更改`@gridColumns`为 15，然后使用 5 列全部带有`span3`.

不过这是个坏主意。Bootstrap 是 12 列，因为 12 列效果很好。使用 12 可以支持 1/4、1/3 和 1/2 宽度的列。使用 15 列布局，您将只支持 1/3 宽度（以及许多奇怪的其他尺寸）。不过，您的电话，设置就在那里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T04:16:31.943

您需要[生成](http://twitter.github.com/bootstrap/customize.html)自定义网格（例如 10）。无法在 12 列网格中创建 5 个相等的原始数据

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-12T17:17:49.570

或者您可以将其添加到您的 css（或 bootstrap.css）中 - 这是我解决此问题的首选方法。“15”曾经让我有点失望，但只是试着提醒自己它是 1/5。

```
.col-xs-15,
.col-sm-15,
.col-md-15,
.col-lg-15 {
    position: relative;
    min-height: 1px;
    padding-right: 10px;
    padding-left: 10px;
}

.col-xs-15 {
    width: 20%;
    float: left;
}
@media (min-width: 768px) {
.col-sm-15 {
        width: 20%;
        float: left;
    }
}
@media (min-width: 992px) {
    .col-md-15 {
        width: 20%;
        float: left;
    }
}
@media (min-width: 1200px) {
    .col-lg-15 {
        width: 20%;
        float: left;
    }
} 
```

然后就像使用任何其他引导类一样使用它。

```
<div class="row">
    <div class="col-md-15 col-sm-3">
    ...
    </div>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T04:12:55.027

嗯，这很数学。不是真正的 CSS/Bootstrap 问题...

您将无法在一行中创建 5 个相等的跨度，因为 Bootstrap 的默认网格列是 12，并且`12 / 5 = 2.4`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T05:22:37.710

我会通过创建一个 span10 的流体行然后将子流体行与 span2 子级一起将其转换为 10/2 = 5 问题。以下作品：

```
<div class="container-fluid">
    <div class="row-fluid span10">
            <div class="row-fluid">
                <div class="span2">...</div>
                <div class="span2">...</div>
                <div class="span2">...</div>
                <div class="span2">...</div>
                <div class="span2">...</div>
            </div>
    </div>
    <div class="row-fluid span10">
            <div class="row-fluid">
                <div class="span2">...</div>
                <div class="span2">...</div>
                <div class="span2">...</div>
                <div class="span2">...</div>
                <div class="span2">...</div>
            </div>
    </div>
</div> <!-- /container --> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-26T11:38:09.793

```
.span3 {   width: 220px; }
.span2 {   width: 140px; } 
```

或者

```
.row-fluid .span3 {   width: 23.404255319148934%;   *width:
23.351063829787233%; }

.row-fluid .span2 {   width: 14.893617021276595%;   *width:
14.840425531914894%; } 
```

这些仅提供元素的宽度，您应该可以简单地添加

```
class="span" style="width:180px" 
```

或者

```
class="span" style="width:19.1488%" 
```

您需要添加类跨度 cos bootstrap 需要那些`.row`工作。

# jsf - 在页面的 1 个实体中插入多个数据

> ID：15104050
> 
> 赞同：0
> 
> 时间：2013-02-27T04:09:24.350
> 
> 标签：jsf

我有一个 CRUD 生成的创建表单：

```
<div class="create-form">
    <h:form>
        <h:inputText id="name" value="#{pointController.selected.name}" title="#{bundle.CreatePointTitle_name}" required="true" />

        <h:inputText id="term" value="#{pointController.selected.term}" title="#{bundle.CreatePointTitle_term}" required="true" />

        <p:commandButton styleClass="btn" action="#{pointController.create}" value="#{bundle.CreatePointSaveLink}" />
    </h:form>
</div>
<button>add new form</button> 
```

我有一个按钮，如果单击它，它将使用 javascript 创建另一个与上面相同的表单。(2 inputText, name and term)

我的目标是，使用 2 个或更多表单，具体取决于用户想要多少表单，单击 1 个 commandButton 会将所有内容插入数据库中。

例子：

```
first form: name = first form test, term = first form testterm
2nd form: name = 2nd form test, term= 2nd form testterm 
```

单击命令按钮后

2 行将被插入到数据库的同一个表中。

但我不确定这个页面的结构是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:33:18.780

您不能使用 JSF 组件在一个请求中从多个表单发送数据，您应该序列化所有数据并手动发送。最好有一个`List<Item>`，每次单击按钮时，它都会在列表中创建一个新项目并更新一个`UIContainer`将显示列表项目的项目。

这将是上述的一个开始示例：

```
@ManagedBean
@ViewScoped
public class ItemBean {
    private List<Item> lstItem;

    public ItemBean() {
        lstItem = new ArrayList<Item>();
        addItem();
    }
    //getters and setter...

    public void addItem() {
        lstItem.add(new Item());
    }

    public void saveData() {
        //you can inject the service as an EJB or however you think would be better...
        ItemService itemService = new ItemService();
        itemService.save(lstItem);
    }
} 
```

JSF 代码（`<h:body>`仅内容）：

```
<h:form id="frmItems">
    <h:panelGrid id="pnlItems">
        <ui:repeat value="#{itemBean.lstItem}" var="item">
            Enter item name
            <h:inputText value="#{item.name}" />
            <br />
            Enter item description
            <h:inputText value="#{item.description}" />
            <br />
            <br />
        </ui:repeat>
    </h:panelGrid>
    <p:commandButton value="Add new item" action="#{itemBean.addItem}"
        update="pnlItems" />
    <p:commandButton value="Save data" action="#{itemBean.saveData}" />
</h:form> 
```

# javascript - 打开电子邮件客户端后 Javascript 重新加载父窗口

> ID：15104055
> 
> 赞同：0
> 
> 时间：2013-02-27T04:10:04.217
> 
> 标签：javascript, windows, parent, reload

我有一个带有以下按钮的表格：

```
<input name="send_message" type="submit" value="SEND A MESSAGE" /> 
```

此按钮将在 php 脚本下方触发：

```
if(isset($_POST['send_message'])){
$emails = "";

if(!empty($_POST['id'])){
    foreach($_POST['id'] as $email){
        if($emails == ""){
            $tempemail = explode("/",$email);
            $emails = $tempemail[1];
        }else{
            $tempemail = explode("/",$email);
            $emails .= ";" . $tempemail[1];
        }
    }

    if(!empty($emails)){
        echo "<script>window.location = \"mailto:me@abc.com 'recipient'?bcc=".$emails."&subject=Hello%20:%20\"</script>";

    } 
```

上面的脚本工作正常，但是当电子邮件客户端打开时，父窗口是空白的，除非我手动刷新页面，我希望在弹出电子邮件客户端时重新加载父窗口，有人可以帮忙吗？谢谢。

**编辑：**

**解决方案：**

```
echo "<script>location.href = \"mailto:me@abc.com 'recipient'?bcc=".$emails."&subject=Hello%20:%20\"</script>";
echo "<script>window.location.href = "'.$_SERVER['PHP_SELF'].'"</script>"; 
```

感谢 Panayot Karabakalov 的一些想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T04:18:57.313

使用所有主流浏览器都支持的[Location reload() 方法](http://www.w3schools.com/jsref/met_loc_reload.asp)，或者如果您愿意，可以尝试[其他方法](http://www.mediacollege.com/internet/javascript/page/reload.html)。

好的，我不使用 PHP，所以不确定需要在哪里插入该部分，但可以肯定 Reload() 是一个方法/函数，而不是属性，所以可能是这样的：

```
if(!empty($emails)){
        echo "<script>window.location = \"mailto:me@abc.com 'recipient'?bcc=".$emails."&subject=Hello%20:%20\"</script>";
        echo "<script>window.location.reload();</script>";
    } 
```

[编辑] 好吧，可能一些 PHP 内置的重新加载页面的方法会更好，例如[这样](http://www.pixel2life.com/publish/tutorials/729/reloading_a_page_using_php/)。你也有[mail](http://php.net/manual/en/function.mail.php) () 函数，不需要重新加载你的页面。

# algorithm - 动态规划：棋盘

> ID：15104057
> 
> 赞同：3
> 
> 时间：2013-02-27T04:10:24.923
> 
> 标签：algorithm, dynamic-programming

一个车从标准 8 x 8 棋盘的左上角开始。两名玩家轮流将车水平向右或垂直向下移动，任意数量的方块。不允许静止移动，玩家 1 先走。获胜者是将车放在右下角广场的玩家。说出谁将获胜并描述获胜策略。

我有上述陈述问题，我很想看看其他人将如何解决这个问题。我知道有办法计算车可以走的不同路径。我尝试手动解决问题，似乎玩家 2 总是赢，但我可能想得太简单了。以动态编程方式接近它似乎是一个不错的方法。无论如何，任何人都有任何见解、算法或类似的东西来解决这个问题！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T04:38:21.920

![在此处输入图像描述](../Images/8081991d4605756e9b3cbc52226adc5b.png)

**H8**是一个胜利者盒子，所以它上面和左边的所有东西都是失败者盒子。

**G7** （G8 和 H7）右侧和下方的所有内容都是失败者框，因此它是获胜者框。

**G7**是一个胜利者盒子，所以它上面和左边的所有东西都是失败者盒子。

等等……</p>

开始游戏的玩家一只能选择进入失败者框，因此**玩家二总是获胜**。

玩家二所要做的就是每次轮到他时移动到aw box。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T04:49:16.293

玩家二总是赢得任何大小的棋盘。通过感应板的大小证明。

n=1的情况可以忽略，所以从n=2开始；很明显，玩家 2 在 2x2 棋盘上获胜。

假设玩家 2 总是在大小为 n 或更小的棋盘上获胜。在大小为 n+1 的棋盘上，玩家 1 移动到左列或顶行的位置。玩家 2 然后移动到对角线上的一个位置（这就是您需要的所有策略），然后这是一个大小为 n 或更小的棋盘上的起始位置。

量子点

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T12:37:25.573

我认为值得注意的是，所描述的游戏实际上是一个[Nim](http://en.wikipedia.org/wiki/Nim)游戏，有两堆，每堆 7 个硬币。Nim 游戏的获胜者可以通过对每堆硬币的数量进行异或来确定。他们称之为 Nim-sum，它给出了 Sprague-Grundy 函数的值。每当 Nim-sum 为正时，该位置就获胜。所以考虑你的游戏：7^7 = 0，这是一个失败的位置。每个对角线位置都在输，因为无论`x`是什么，`x^x`总是 0。
好消息是，使用这种技术，您可以在 3 维和任意大空间以及 4 维、5 维空间中玩（并赢得）这个游戏等等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T12:18:48.003

**获胜位置**具有以下属性：

*   所有终端位置都在获胜。在这种情况下，位置 (8, 8) 是获胜位置
*   一步中能到达目标位置的所有位置都是获胜位置。*即*最后一行或最后一列的所有位置都是获胜位置
*   如果我们可以移动到失败的位置，那么我们就处于获胜的位置，因为下一个玩家无法赢得比赛
*   如果我们只能移动到获胜的位置，那么我们就处于失败的位置

考虑到这一点，我们可以创建一个算法来告诉我们当前位置是获胜位置还是失败位置。使用表 ( `dpTable`) 存储以前计算的结果将避免重复计算。

```
boolean isWinning(int x, int y) {
    if (dpTable[x][y] != null)
        return dpTable[x][y];

    // From the last row or the last column we can always win the game
    if (x == n || y == n)
        return true;

    for (int i = 1; x + i <= n; i++) {
        // Moving right
        if (x + i <= n && !isWinning(x+i, y) {
            dpTable[x][y] = true;
            return true;
        }

        // Moving down
        if (y + i <= n && !isWinning(x, y+i) {
            dpTable[x][y] = true;
            return true;
        }
    }

    dpTable[x][y] = false;
    return false;
} 
```

当您从位置 (x, y) 开始时，该`isWinning(x, y)`函数返回`true`，您可以通过最佳方式赢得游戏，并且`false`当您无法从 (x, y) 开始并获胜时。

# ios - 如何移动 UIImageView 以始终保持图像的头部向前？

> ID：15104058
> 
> 赞同：0
> 
> 时间：2013-02-27T04:10:29.613
> 
> 标签：ios, uiimageview, cgaffinetransform

假设我有一个视图，`UIImageView`其中包含一个图像。举个例子，让它成为一个汽车图像，默认情况下汽车的头部朝向北方。`ViewController's``UIImageView`

我想在 UIImageView （包含汽车图像）上做一些旋转和移动。

我使用`CGAffineTransformRotate`函数来旋转它

```
CGAffineTransform newTransform = CGAffineTransformRotate(_ImageView.transform, angle); 
```

我将值分配给 newTransform 的 tx 和 ty。

由于 tx 和 ty 的值在`UIImageView's`坐标系中，因此`UIImageView`不会旋转该坐标系。

我的问题是：有没有简单的方法来获取 tx 和 ty 的值，这样`UIImageView`可以直接随着图像头部的方向移动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T10:28:35.000

使用此方法移动 imageview

```
-(void)move:(id)sender {

    CGPoint translatedPoint = [(UIPanGestureRecognizer*)sender translationInView:self];

     if([(UIPanGestureRecognizer*)sender state] == UIGestureRecognizerStateBegan) {
         _firstX = [self center].x;
         _firstY = [self center].y;
    }

    translatedPoint = CGPointMake(_firstX+translatedPoint.x, _firstY+translatedPoint.y);

    [self setCenter:translatedPoint];

    [self showOverlayWithFrame:self.frame];

} 
```

# windows-8 - BackgroundTask 注册名称应该在应用程序中是唯一的吗？

> ID：15104060
> 
> 赞同：0
> 
> 时间：2013-02-27T04:10:47.530
> 
> 标签：windows-8

注册`BackgroundTask`using`BackgroundTaskBuilder`时，`Name`可以设置该属性以识别任务。示例应用程序显示此属性用于随后在任务已注册时对其进行定位。

此名称在多个应用程序中是否应该是唯一的；如果其他应用程序寻找相同的名称，它们能否检测到我的应用程序的后台任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T05:59:49.933

没什么好担心的。像这样的特定于应用程序的信息在应用程序之间是隔离的。不会有名称冲突，其他应用程序也无法访问您的任何内容。同样的原则也适用于凭证锁柜、应用程序数据、辅助磁贴等 API。

# php - 密码保护整个 YII 网站的最简单方法是什么？

> ID：15104065
> 
> 赞同：0
> 
> 时间：2013-02-27T04:11:21.473
> 
> 标签：php, authentication, yii

我想为我的整个 YII 站点设置一个密码，这样我就可以只向某些人演示它。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T05:55:31.420

使用 Yii 访问控制过滤系统和他们在博客演示中的基本 UserIdentity 文件设置。然后，而不是允许任何来宾用户查看页面，只需要一个登录用户

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:59:12.867

使用 Yii 访问控制——不是这种情况的最佳解决方案，它可能会破坏您的应用程序逻辑。

在这种情况下，也可以使用 HTTP 身份验证。
在 VPS 上 - 使用 Apache 和 paswd。
最简单的方法 - 使用纯 PHP [http://php.net/manual/en/features.http-auth.php](http://php.net/manual/en/features.http-auth.php)

# actionscript-3 - Sprite beginFillBitmap 与 addChild(bitmap) 的 As3 性能

> ID：15104066
> 
> 赞同：1
> 
> 时间：2013-02-27T04:11:26.373
> 
> 标签：actionscript-3

只是一个简单的问题：

以下哪种创建精灵的方法具有快速渲染和更少的内存使用量？

将位图添加到精灵

```
var sprite:Sprite = new Sprite();
var bitmap:Bitmap = new Bitmap();
sprite.addChild(bitmap); 
```

对比

绘制矩形并用 bitmapData 填充

```
var bitmapData:Bitmapdata = new BitmapData(100, 100);
var sprite:Sprite = new Sprite();
sprite.graphic.drawRec(0, 0, 100, 100);
sprite.graphic.beginFillBitmap(bitmapData:Bitmapdata);
sprite.graphic.endFill(); 
```

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T04:19:18.517

第一个更快，因为矢量渲染数学需要在后者中填充您的形状。

如果你想要显着的（我的意思是非常显着的）性能提升，你应该在舞台上有*一个位图。*你从那里做的是存储引用来`BitmapData`表示图形，并通过[`.copyPixels()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#copyPixels%28%29).

例子：

```
// This is the only actual DisplayObject that will hit the Stage.
var canvas:Bitmap = new Bitmap();
canvas.bitmapData = new BitmapData(500, 400);
addChild(canvas);

// Create some BitmapData and draw it to the canvas.
var rect:BitmapData = new BitmapData(40, 40, false, 0xFF0000);
canvas.bitmapData.copyPixels(rect, rect.rect, new Point(20, 20)); 
```

# visual-c++ - 错误：需要声明

> ID：15104067
> 
> 赞同：8
> 
> 时间：2013-02-27T04:11:30.503
> 
> 标签：visual-c++

我正在用 Visual C++ 编写代码来访问串行端口。

代码如下： -

```
#include<stdio.h>
#include<cstring>
#include<string.h>
#include<conio.h>
#include<iostream>
using namespace std;
//#include "stdafx.h"
#ifndef __CAPSTONE_CROSS_SERIAL_PORT__
#define __CAPSTONE_CROSS_SERIAL_PORT__
HANDLE hSerial= CreateFile(L"COM1", GENERIC_READ | GENERIC_WRITE,0,0,OPEN_EXISTING,FILE_ATTRIBUTE_NORMAL,0);

if(hSerial==INVALID_HANDLE_VALUE)
{
if(GetLastError()==ERROR_FILE_NOT_FOUND){
 //serial port does not exist. Inform user.
 }
 //some other error occurred. Inform user.
 } 
```

在上面的代码中，我在**if** in line处遇到错误

```
if(hserial==INVALID_HANDLE_VALUE) 
```

错误如下：-

```
Error:expected a declaration 
```

**在if**语句的末尾，我在两个大括号**}处都收到相同的错误**

 **我想知道为什么我会收到此错误以及如何解决它

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T04:22:22.757

我想你可能想读[这个](https://stackoverflow.com/questions/8470065/why-statements-cannot-appear-at-namespace-scope)。问题是您试图`if`在只有声明有效的命名空间范围（全局命名空间）中使用语句。

您需要将逻辑包装在某种函数中。

```
void mySuperCoolFunction()
{
  if(hSerial==INVALID_HANDLE_VALUE)
  {
    if(GetLastError()==ERROR_FILE_NOT_FOUND)
    {
       //serial port does not exist. Inform user.
    }
    //some other error occurred. Inform user.
  }
} 
```**

# algorithm - 确定一个矩形是否被一组多边形完全覆盖所需的算法

> ID：15104083
> 
> 赞同：3
> 
> 时间：2013-02-27T04:12:38.437
> 
> 标签：algorithm, data-structures

给定一组多边形 P 和一个矩形区域 A，我需要验证 A 是否完全被 P 覆盖。

多边形的数量和复杂性以及总面积 A 非常大，因此基于多边形联合的方法可能无法及时工作。为了让事情更简单一点，我将 A' 定义为 A 内我关心的最小区域的大小。我想建立一个 2D 分段树状结构，重复划分 2D 区域（每个区域正方形分成 4 个子正方形，直到子正方形大小为 A'）但由于我们在这里处理多边形，我不确定是否这将足够有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T02:55:03.493

您可以使用多边形交集或差异而不是联合：

将 A 本身视为一个多边形，每次选择一个多边形 P' 并将 A 细化为 A - P'，并检查 A 是否为空。检查所有多边形后，您可以确定 A 是否被 P 覆盖。

# ruby-on-rails - ArgumentError 收到错误数量的参数

> ID：15104084
> 
> 赞同：1
> 
> 时间：2013-02-27T04:12:39.707
> 
> 标签：ruby-on-rails, ruby-on-rails-3, omniauth

这很可怕，但是我花了大约一周的时间开发一个应用程序，并且在运行“Rails S”命令时遇到了以下错误。我的应用似乎不想再启动了。

我相信在精彩的 Stackoverflow 社区的帮助下，我们可以解决这个问题！

编辑：我想我会包括我的 GitHub 来衡量 - [https://github.com/Apane/Startupblog](https://github.com/Apane/Startupblog)

# 参数错误

```
 Received wrong number of arguments. [#<Logger:0x007fe8d56bb280 
    @progname="omniauth", @level=0, @default_formatter=#<Logger::Formatter:0x007fe8d56bb230
     @datetime_format=nil>, @formatter=#<Logger::SimpleFormatter:0x007fe8d56bb140  
     @datetime_format=nil>, @logdev=#<Logger::LogDevice:0x007fe8d56bb1e0 @shift_size=nil, 
    @shift_age=nil, @filename=nil, @dev=#<IO:<STDOUT>>, @mutex=#
    <Logger::LogDevice::LogDeviceMutex:0x007fe8d56bb1b8 @mon_owner=nil,  
    @mon_count=0, @mon_mutex=# <Mutex:0x007fe8d56bb168>>>>] 
```

## 完整跟踪：

```
omniauth (1.1.3) lib/omniauth/strategy.rb:136:in `initialize'
rack (1.4.5) lib/rack/builder.rb:82:in `new'
rack (1.4.5) lib/rack/builder.rb:82:in `block in use'
rack (1.4.5) lib/rack/builder.rb:130:in `[]'
rack (1.4.5) lib/rack/builder.rb:130:in `block in to_app'
rack (1.4.5) lib/rack/builder.rb:130:in `each'
rack (1.4.5) lib/rack/builder.rb:130:in `inject'
rack (1.4.5) lib/rack/builder.rb:130:in `to_app'
omniauth (1.1.3) lib/omniauth/builder.rb:48:in `call'
warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
warden (1.2.1) lib/warden/manager.rb:34:in `catch'
warden (1.2.1) lib/warden/manager.rb:34:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.5) lib/rack/etag.rb:23:in `call'
rack (1.4.5) lib/rack/conditionalget.rb:25:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/cookies.rb:341:in `call'
activerecord (3.2.11) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.11) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.11) lib/active_support/callbacks.rb:405:in `_run__1918359078568265758__call__4170314405657891017__callbacks'
activesupport (3.2.11) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.11) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.11) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.11) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.11) lib/rails/rack/logger.rb:32:in `call_app'
railties (3.2.11) lib/rails/rack/logger.rb:16:in `block in call'
activesupport (3.2.11) lib/active_support/tagged_logging.rb:22:in `tagged'
railties (3.2.11) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.5) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.11) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.5) lib/rack/lock.rb:15:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.11) lib/rails/engine.rb:479:in `call'
railties (3.2.11) lib/rails/application.rb:223:in `call'
rack (1.4.5) lib/rack/content_length.rb:14:in `call'
railties (3.2.11) lib/rails/rack/log_tailer.rb:17:in `call'
rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
/usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
/usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
/usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T04:31:17.263

您的问题实际上是语法错误，看起来像是在您将omniauth 添加到项目时引入的。在[您的omniauth 初始化程序](https://github.com/Apane/Startupblog/blob/master/config/initializers/omniauth.rb#L3)的第3 行有一个尾随逗号。摆脱它，你应该没事。

# go - 为 Debian 打包 Go 应用程序

> ID：15104089
> 
> 赞同：40
> 
> 时间：2013-02-27T04:13:28.963
> 
> 标签：go, debian, packaging

如何将我的 Go 二进制文件放入 Debian 包中？由于 Go 是静态链接的，我只有一个可执行文件——我不需要很多复杂的项目元数据信息。有没有一种简单的方法来打包可执行文件和资源文件而不会经历 的创伤`debuild`？

我已经到处寻找现有的问题；然而，我所有的研究都提出了关于包含 golang 开发环境的 .deb 文件的问题/答案（即，如果你这样做，你会得到什么`sudo apt-get install golang-go`）。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-27T07:50:34.620

好。我认为唯一的“创伤”`debuild`是它`lintian`在构建包之后运行，并且是`lintian`谁试图发现你的包的问题。

因此，有两种方法可以对抗这种情况：

*   请勿使用`debuild`：此工具仅调用`dpkg-buildpackage`真正进行必要的举重。构建二进制包的通常调用是`dpkg-buildpackage -us -uc -b`. 您仍然可能会`debuild`出于其他目的而调用，`debuild clean`例如。
*   添加所谓的[“lintian override”](http://lintian.debian.org/manual/section-2.4.html)，它可以用来对你的包的*选定*`lintian`问题视而不见，你坚持认为这不是问题。

 *这两种方法都意味着您*不要尝试*通过打包工具来构建应用程序，而是将其视为刚刚包装到包中的 blob。这将需要稍微避免正常的`debian/rules`工作方式（不尝试构建任何东西）。

另一种*可能*的解决方案（实际上更像是 Debian-ish）是尝试使用`gcc-go`（加上`gold`链接）：因为它是 GCC 前端，所以这个工具产生一个动态链接的应用程序（链接到`libgo`或类似的东西这）。我个人还没有使用它的经验，并且只有在您打算尝试将您的软件包推送到 Debian 中时才会考虑使用它。

关于为 Debian 打包 Go 程序的一般问题，您可能会发现以下资源很有用：

*   [该线程](http://thread.gmane.org/gmane.comp.lang.go.general/81527)由 Go for Debian 打包程序之一在 go-nuts 上开始。
*   特别是，该线程中的第一篇文章链接到关于 debian-devel 的[讨论。](http://thread.gmane.org/gmane.linux.debian.devel.general/179252)
*   debian-devel 上关于同一问题[的第二个线程（它是前一个线程的逻辑延续）。](http://lists.debian.org/debian-devel/2013/01/msg00590.html)

* * *

**2015 年 10 月 15 日更新**。

（由于这篇文章似乎仍在被人们搜索、发现和研究，我决定更新它以更好地反映当前的事态。）

从那时起，打包 Go 应用程序和软件包的情况得到了显着改善，并且可以使用“经典”Go（所谓的`gc`套件源自 Google）而不是`gcc-go`. 并且还有一个很好的包基础设施。

现在`dh-golang`描述[了在](https://wiki.debian.org/MichaelStapelberg/GoPackaging)对 Go 程序进行 debian 时使用的关键工具。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-28T10:19:02.213

我自己一直在研究这个，我基本上就在那里。

## 概要

通过从 Canonical 现有 Go 项目之一的“包”分支中“借用”，您可以使用 dpkg-buildpackage 构建您的包。

1.  安装依赖项并从另一个仓库中获取“包”分支。

    ```
     # I think this list of packages is enough. May need dpkg-dev aswell.
     sudo apt-get install bzr debhelper build-essential golang-go
     bzr branch lp:~niemeyer/cobzr/package mypackage-build
     cd mypackage-build 
    ```

2.  编辑元数据。

    *   编辑 debian/control 文件（名称、版本、源代码）。您可能需要将 golang-stable 依赖项更改为 golang-go。
    *   [debian/control](http://bazaar.launchpad.net/~niemeyer/cobzr/package/view/head:/debian/control)文件是清单。请注意“构建依赖项”( `Build-Depends: debhelper (>= 7.0.50~), golang-stable`) 和 3 种架构。使用 Ubuntu（没有 gophers ppa），我不得不将 golang-stable 更改为 golang-go。
    *   编辑 debian/rules 文件（用你的包名代替 cobzr）。
    *   [debian/rules](http://bazaar.launchpad.net/~niemeyer/cobzr/package/view/head:/debian/rules)文件基本上是一个“make”文件，它显示了包是如何构建的。在这种情况下，他们严重依赖 debhelper。他们在这里设置了 GOPATH，并调用了“go install”。这是神奇的“安装”行：

    `cd $(GOPATH)/src && find * -name '*.go' -exec dirname {} \; | xargs -n1 go install`

    *   还要更新版权文件、自述文件、许可证等。
3.  将您的源代码放在 src 文件夹中。例如

    ```
     git clone https://github.com/yourgithubusername/yourpackagename src/github.com/yourgithubusername/yourpackagename 
    ```

    或 eg2

    ```
     cp .../yourpackage/ src/ 
    ```

4.  构建包

    ```
     # -us -uc skips package signing.
     dpkg-buildpackage -us -uc 
    ```

    这应该为您的体系结构生成一个二进制 .deb 文件，以及“源 deb”（.tgz）和源 deb 描述文件（.dsc）。

## 更多细节

所以，我意识到 Canonical（Ubuntu 人）正在使用 Go，并为他们的一些 Go 项目构建 .deb 包。Ubuntu 基于 Debian，因此在大多数情况下，相同的方法应该适用于两个发行版（依赖项名称可能略有不同）。

您会在 Ubuntu 的 Launchpad 存储库中找到一些基于 Go 的软件包。到目前为止，我已经找到[了 cobzr](https://launchpad.net/cobzr)（bzr 的 git 风格分支）和[juju-core](https://launchpad.net/juju-core)（一个 devops 项目，从 Python 移植而来）。

这两个项目都有一个“主干”和一个“包”分支，您可以看到`debian/`包分支内的文件夹。这里最重要的 2 个文件是[debian/control](http://bazaar.launchpad.net/~niemeyer/cobzr/package/view/head:/debian/control)和[debian/rules](http://bazaar.launchpad.net/~niemeyer/cobzr/package/view/head:/debian/rules) - 我已链接到“浏览源”。

## 最后

我没有涉及的是交叉编译你的包（到 3、386/arm/amd64 的其他 2 个架构）。交叉编译在 go 中并不太棘手（您需要为每个目标平台构建工具链，然后在“go build”期间设置一些 ENV 变量），我自己一直在研究交叉编译器实用程序。最终，我希望将 .deb 支持添加到我的实用程序中，但首先我需要明确这项任务。

祝你好运。如果您取得任何进展，请更新我的答案或添加评论。谢谢

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-02-09T09:03:13.697

使用 fpm 从 Go 应用程序构建 deb 或 rpm 包也非常容易。

从 ruby​​gems 中获取：

```
gem install fpm 
```

在构建你的二进制文件后，例如 foobar，你可以像这样打包它：

```
fpm -s dir -t deb -n foobar -v 0.0.1 foobar=/usr/bin/ 
```

fpm 支持各种高级封装选项。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-05-12T23:12:02.303

有一个官方的 Debian 政策文件描述了 Go 的打包过程：[https ://go-team.pages.debian.net/packaging.html](https://go-team.pages.debian.net/packaging.html)

对于**库**：使用[dh-make-golang](https://people.debian.org/~stapelberg/2015/07/27/dh-make-golang.html)创建包骨架。使用从导入路径派生的名称命名您的包，并带有`-dev`后缀，例如 golang-github-lib-pq-dev。在线指定依赖项`Depends:`。（这些是构建的源依赖，而不是运行的二进制依赖，因为 Go 静态链接所有源。）

安装库包会将其源代码安装到`/usr/share/golang/src`（可能编译后的库可以进入`.../pkg`）。构建依赖的 Go 包将使用来自这些系统范围位置的工件。

对于**可执行文件**：使用[dh-golang](https://packages.debian.org/hu/sid/dh-golang)创建包。在行中指定依赖`Build-Depends:`项（有关打包依赖项的信息，请参见上文）。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-09-09T15:42:33.690

我最近发现了[https://packager.io/](https://packager.io/) - 我对他们正在做的事情感到非常满意。也许打开其中一个包看看他们在做什么？*

# python - 使用 PNG 图像的文件名来存储有关如何处理它的信息是一个坏主意吗？

> ID：15104090
> 
> 赞同：0
> 
> 时间：2013-02-27T04:13:37.733
> 
> 标签：python, png

我正在制作一个小游戏应用程序，允许用户手动加载纹理。一个这样的例子是一副标准的 52 张牌。

将处理信息存储为：

`Card_79x123_53_53.png`

从文件对话框中获取文件名后，我将拆分下划线以获取以下信息：

*   ObjectType : 匹配到列表
*   (w,h)
*   预期的对象数量（如果有拖尾空间）
*   当然，额外信息（在这种情况下是面朝下纹理相对于上面 N 的位置）和图像的尺寸提供了其余信息。

当然，处理中的任何错误都会被提出，并且加载纹理的尝试将被拒绝。

有没有理由说明这是一个坏主意，还是我应该继续玩弄它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T04:19:03.527

可能最好通过在文件对话框中添加额外的控件或在提交文件对话框后显示另一个对话框来明确地询问用户如何处理图像。在这种情况下，从文件名中获取的信息可以用作提示，用值初步填充这些额外的控件，但用户将有机会纠正错误并填充缺失的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T04:33:29.223

> 有没有理由说明这是一个坏主意，还是我应该继续玩弄它？

这本质上就像通过文件扩展名编码文件类型。在文件名中编码文件元数据的唯一坏处是空间非常有限。如果您使用正确的 PNG 元数据字段或在单独的文件中，您可以编码更丰富的元数据。在文件名中编码元数据很难用新版本中的新字段、可选字段等进行扩展。

例如，您可能会发现您需要各种 sprite sheet，其中每个帧都有不同的大小，因此您需要对每个单独帧的位置、大小、类名和序列号进行编码。

只要您不希望将来编码许多其他元数据就可以了。

# c - C中的这个连接函数有什么问题？

> ID：15104091
> 
> 赞同：0
> 
> 时间：2013-02-27T04:13:47.740
> 
> 标签：c, string, concatenation

这是使用结构的家庭作业的一部分，我似乎无法理解这个功能。该函数是 string_t *concat (string_t *s1, string_t *s2)，它返回新的字符串结构。这就是我到目前为止所拥有的，只要达到它就会使编译器崩溃。程序可以编译，但是执行时出现“file”.exe has stop working 错误。任何帮助将不胜感激。谢谢！

```
typedef struct string{ //String struct (in .h file)

char *line;
int length;

} string_t;

string_t* concat(string_t *s1, string_t *s2) { //actual function (in .c)

int len1, len2;
len1 = length(s1);
len2 = length(s2);

int i, j, s;

string_t *newStr;
newStr = (string_t*)malloc(sizeof(string_t)*2);

for (i = 0; i<len1; i++) {
    *((newStr->line)+i) = *((s1->line)+i);
    }

for (j=0; j<len2; j++) {
    *((newStr->line)+(i+j)) = *((s2->line)+j);
    }

*((newStr->line)+(i+j))='\0';

return newStr;

}

concat(s1, s2); //tests function 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T04:15:33.043

```
newStr = (string_t*)malloc(sizeof(string_t)*2); 
```

您为 分配内存，`newStr`但不为`newStr->line`. 尝试类似：

```
newStr = malloc(sizeof *newStr);
newStr->line = malloc(s1->length + s2->length + 1); 
```

* * *

旁注：`*((newStr->line)+i)`可以写成`newStr->line[i]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T04:28:30.327

顺便说一句，这是一种没有那种丑陋的 ptr 数学语法的 cat 方法：

```
char* dest = newStr->line;

const char* src = s1->line;
while (*src)
{
  *dest = *src;
  ++dest;
  ++src;
}

src = s2->line;
while (*src)
{
  *dest = *src;
  ++dest;
  ++src;
}

*dest = '\0'; 
```

# php - 使用 preg_match 的 var_dump 数组

> ID：15104092
> 
> 赞同：0
> 
> 时间：2013-02-27T04:14:01.870
> 
> 标签：php, preg-match, var-dump

我有一堆我想 var_dump 的数组。这些数组是根据表单中的 $_GET 命名的，因此每个数组都不同，但在开头附加了一个预定义的名称，所以我可能有`array_bob`, `array_mary`，`array_sam`其中 bob mary 和 sam 是 $_GET 值。

我认为使用`preg_match`将是我最好的选择，但我只是不知道如何去做

我想过这样的事情，但它显然不起作用

> ```
>  if (isset($array_(preg_match("/[A-Z]|[0-9]/i",$array_))))
>           {   
>               var_dump($array_(preg_match("/[A-Z]|[0-9]/i",$array_)))
>           } 
> ```

基本上，我需要的是 array_* 末尾的通配符来转储玛丽、鲍勃和苏。

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T04:24:47.657

你在找这个吗？？

```
$arrName = $_GET['name'];
print_r(${'array_' . $arrName}); 
```

或这个 ？

```
$nameArray = array('bob', 'mary', 'sam');

foreach ($nameArray as $arrName) {
  if (isset(${'array_' . $arrName})) {
    print_r(${'array_' . $arrName});
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T04:36:45.203

所有的数组都在 GLOBAL 对象中，对吧？所以你可以这样做：

```
$arrayName = "array_" . $_GET['name'];
var_dump($GLOBALS[$arrayName]); 
```

虽然，更好的方法是让所有的array_bob、array_mary 等数组作为一个数组中的索引，因此您不必处理 GLOBAL 对象。像这样的东西：

```
$allArrays = array("mary" => array_mary, "bob" => array_bob);
$name = $_GET['name'];
var_dump($allArrays[$name]); 
```

# mysql - 限制行的大小是否有益于 MySQL 表的大小？

> ID：15104093
> 
> 赞同：0
> 
> 时间：2013-02-27T04:14:04.507
> 
> 标签：mysql, database, database-design

我知道限制行大小会将大小保持在设定的最大值，但是，如果我将所有行限制为他们将需要的最大值，是否会提高行的性能（即占用更少的空间）

或者mysql是否动态分配行所需的大小和最大行长度对其没有影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:08:24.987

MySQL 不会动态调整字段大小；可能需要的大小由您选择的数据类型决定。但是，您可以选择适当的数据类型来帮助优化数据库。

例如，`TINYINT`、`SMALLINT`、`MEDIUMINT`、`INT`和`BIGINT`数据类型分别需要 1 字节、2 字节、3 字节、4 字节和 8 字节。如果您只打算存储高达 10,000 的整数，`SMALLINT`那将是最佳选择，因为它可以存储高达 65,535（无符号）的值，并且有足够的额外空间，并且需要`INT`.

对于可变长度类型，如`VARCHAR`任何长度（包括 255），使用一个字节前缀来存储长度。更多使用 2 字节前缀。如果可能，将 s限制`VARCHAR`在最多 255 是最好的。例如，字符串在一个字段和一个字段`foo`中都需要 4 个字节。例如，如果字段的最大长度为 500，则需要 5 个字节。`VARCHAR(3)``VARCHAR(255)``foo`

如果可能使用短（有时甚至是长）文本 xolumns，`CHAR`如果字符串始终具有相同的长度或非常接近的长度，则该类型可能是有益的。此外，如果您使用的是 MyISAM 存储引擎并且所有列都是固定长度的，则可以使用`FIXED`行格式，这是有益的。

有关 MySQL 数据类型的更多信息，请参阅[手册](http://dev.mysql.com/doc/refman/5.1/en/data-types.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T17:52:21.390

我不知道你的问题的目的是什么，但是如果你想最小化数据库使用的存储空间，你可以使用内置压缩，这在你使用 InnoDB 存储引擎时可用。

更多信息：[为表启用压缩 (dev.mysql.com)](http://dev.mysql.com/doc/refman/5.5/en/innodb-compression-usage.html)

我不知道它如何影响性能（速度），我从未使用过该功能，但我认为压缩可能会显着减慢您的数据库。但是，如果您在某些托管服务器上的磁盘空间有限 - 它可能对负载不重的应用程序很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T21:12:42.680

MySql 不会自动分配必要的大小，因此您不想自己定义它以使数据库的性能更好并保持在最小大小。

我进入另一种方式的一个很好的方法是使用 NVARCHAR 而不是 VARCHAR，如果 VARCHAR 用于长字符串，但长度不足以适合 TEXT，这需要大量空间。

# ios - 点击 UIImageView 时出现选项

> ID：15104099
> 
> 赞同：0
> 
> 时间：2013-02-27T04:14:40.970
> 
> 标签：ios, menu, uiimageview, uitabbar, tap

在 Apple iOs 照片应用程序中，每张照片都会全屏显示，但是当您点击它时，`navigation bar`一些`tab bar`菜单选项（如分享照片）只会出现并停留几秒钟。我怎样才能做到这一点`UIImageView`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:42:06.650

为您的顶部栏和底部栏或您喜欢的其他内容添加一个`UITapGestureRecognizer`到您的视图和 UiView，然后按照以下代码进行操作。我想这可能会对你有所帮助。

//将下面的代码写入`ViewDidLoad`

```
UITapGestureRecognizer *singleTapOne = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTap:)];
    singleTapOne.numberOfTouchesRequired = 1; singleTapOne.numberOfTapsRequired = 1; singleTapOne.delegate = self;

    [self.view addGestureRecognizer:singleTapOne]; [singleTapOne release];
    for (UIGestureRecognizer *gR in self.view.gestureRecognizers) {
        gR.delegate = self; 
```

// handleSingleTap 方法

```
- (void)handleSingleTap:(UITapGestureRecognizer *)recognizer
{

    if (recognizer.state == UIGestureRecognizerStateRecognized)
    {
        CGRect viewRect = recognizer.view.bounds; // View bounds

        CGPoint point = [recognizer locationInView:recognizer.view];

        CGRect areaRect = CGRectInset(viewRect, TAP_AREA_SIZE, 0.0f); // Area

        if (CGRectContainsPoint(areaRect, point)) // Single tap is inside the area
        {

            if ((m_CtrlViewTopBar.hidden == YES) || (m_CtrlViewBottomBar.hidden == YES))
            {
                [self showToolbar:m_CtrlViewTopBar];
                [self showToolbar:m_CtrlViewBottomBar]; // Show
            }
            else
            {
                [self hideToolbar:m_CtrlViewTopBar];
                [self hideToolbar:m_CtrlViewBottomBar];
            }

            return;
        }

        CGRect nextPageRect = viewRect;
        nextPageRect.size.width = TAP_AREA_SIZE;
        nextPageRect.origin.x = (viewRect.size.width - TAP_AREA_SIZE);

        if (CGRectContainsPoint(nextPageRect, point)) // page++ area
        {
            //[self incrementPageNumber]; return;
        }

        CGRect prevPageRect = viewRect;
        prevPageRect.size.width = TAP_AREA_SIZE;

        if (CGRectContainsPoint(prevPageRect, point)) // page-- area
        {
            //[self decrementPageNumber]; return;
        }
    }

}

- (void)hideToolbar:(UIView*)view  //Hide Toolbars
{

#ifdef DEBUGX
    NSLog(@"%s", __FUNCTION__);
#endif

    if (view.hidden == NO)
    {
        [UIView animateWithDuration:0.25 delay:0.0
                            options:UIViewAnimationOptionCurveLinear | UIViewAnimationOptionAllowUserInteraction
                         animations:^(void)
         {
             view.alpha = 0.0f;
         }
                         completion:^(BOOL finished)
         {
             view.hidden = YES;
         }
         ];
    }
    [timer invalidate];
    timer=nil;
}
- (void)showToolbar:(UIView*)view  //Show Toolbars
{
#ifdef DEBUGX
    NSLog(@"%s", __FUNCTION__);
#endif

    if (view.hidden == YES)
    {

        [UIView animateWithDuration:0.25 delay:0.0
                            options:UIViewAnimationOptionCurveLinear | UIViewAnimationOptionAllowUserInteraction
                         animations:^(void)
         {
             view.hidden = NO;
             view.alpha = 1.0f;
         }
                         completion:NULL
         ];
        if (!timer) {
            timer=[NSTimer scheduledTimerWithTimeInterval:5
                                                   target:self
                                                 selector:@selector(HideToolBarWithTime)
                                                 userInfo:nil
                                                  repeats:YES];
        }

    }
    [self.view addSubview:view];
}
-(void)HideToolBarWithTime   //Hide Toolbars with time
{

        [self hideToolbar:m_CtrlViewTopBar];
        [self hideToolbar:m_CtrlViewBottomBar];
        [timer invalidate];
        timer=nil;

} 
```

// 手势代表

```
-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
{

    return YES;
}

- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    return YES;

} 
```

# javascript - jQuery On() 不适用于 $(document)

> ID：15104101
> 
> 赞同：2
> 
> 时间：2013-02-27T04:14:46.427
> 
> 标签：javascript, jquery, dom, javascript-events, backbone.js

我目前正在将 dropkick.js 插件集成到我的应用程序中，但遇到了一些障碍。当我更改主干视图时，事件无法正常工作，并且 dropkick.js 中关联的 .live() 事件完全无法正常工作。什么都不会着火。我决定将其升级为使用 .on() 函数并使其正常工作（即使由于某种原因它仍然删除了我的 url）。

这根本不起作用：

```
$(document).on("click", ".dk_toggle", function() { 
```

这只有点作用：

```
$(".content").on("click", ".dk_toggle", function() { 
```

你知道为什么`document`根本不起作用吗？

我的骨干`$el`是`$(".content")`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:22:54.560

代替文档，使用`body`. 它基本上给出了相同的行为。

```
$('body').on("click", ".dk_toggle", function() {
//....
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T04:27:27.950

第一个示例演示了事件委托。

第二个示例将事件处理程序直接绑定到元素。该事件仍然会冒泡（除非您在处理程序中阻止它），但由于处理程序绑定到目标，您将看不到此过程的效果。

[**测试运行**](http://jsperf.com/jquery-on-document-vs-id-selector#)

# javascript - 字符串比较比字符串长度快吗？

> ID：15104103
> 
> 赞同：4
> 
> 时间：2013-02-27T04:15:00.573
> 
> 标签：javascript, string, performance, comparison, string-comparison

我不确定哪种方法可以多次使用更快，使用大量字符串变量进行测试。
其中哪一个更快用于检查字符串是否只是空格？

```
if (str.trim().length > 0) {

} 
```

或者

```
if (str.trim() !== '') {

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T04:25:41.753

好吧，为什么不测试呢？[http://jsperf.com/empty-string-comparison2](http://jsperf.com/empty-string-comparison2)

就每秒计算量而言，它们相差不到 1%（至少在 Chromium 上）。除非您每秒测试数百万个字符串，否则我不会担心。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T04:23:00.980

简短的回答是“基准测试并找出答案！”。如果你这样做，你也可以尝试使用正则表达式，看看它有多快：

```
if (str.match(/^\s*$/)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T04:30:08.207

根据 Alex D 建议的这个快速测试正则表达式更快。

```
string = "   l   l l sfsf  __ ";
d = new Date().getTime();
for(var i = 0; i < 900000; i++){
    if (string.trim().length > 0) continue;
}
d1 = new Date().getTime() - d;
alert(d1);
d = new Date().getTime();
for(var i = 0; i < 900000; i++){
    if (string.trim() !== '') continue;
}
d1 = new Date().getTime() - d;
alert(d1);
d = new Date().getTime();
for(var i = 0; i < 900000; i++){
    if (string.match(/^\s*$/)) continue;
}
d1 = new Date().getTime() - d;
alert(d1); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T04:16:58.480

我相信字符串长度比较比两个字符串的比较更快。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-27T04:50:23.603

JSFiddle：http: [//jsfiddle.net/pja77gzp/](http://jsfiddle.net/pja77gzp/)

```
<script>
    var s1 = '  ';
    var s2 = '  ';
    var benchmarkCount = 10000000;
    function testStringComparison() {
        var t = new Date();
        var i = 0;
        for (var i = 0; i < benchmarkCount; i++) {
            if (s1.trim().length == s2.trim().length) {
                i++;
            }
        }
        t = (new Date()) - t;
        document.writeln("testStringComparison completed");
        document.writeln(t);
    }

    function testStringLenght() {
        var t = new Date();
        var i = 0;
        for (var i = 0; i < benchmarkCount; i++) {
            if (s1.trim() == s1.trim()) {
                i++;
            }
        }
        t = (new Date()) - t;
        document.writeln("testStringLenght completed");
        document.writeln(t);
    }

    function startBenchmark() {
        testStringComparison(); 
        testStringLenght();
    }

    setTimeout(startBenchmark, 1000);

</script> 
```

# javascript - 如何记住上次提交的表单值，javascript

> ID：15104111
> 
> 赞同：0
> 
> 时间：2013-02-27T04:15:43.057
> 
> 标签：javascript, client-side

我有一个包含 20 多个字段（文本、选择、文本区域和单选）的表单。如何让浏览器记住使用 javascript 提交的值？我知道我可以在 php 中使用`$_SESSION`. 但我需要用javascript或客户端语言来做。这样，如果用户输入了错误的信息，然后再次返回表单，他们就不需要再次重新输入值。谁能建议如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T04:17:25.973

你可以用饼干！[https://developer.mozilla.org/en-US/docs/DOM/document.cookie](https://developer.mozilla.org/en-US/docs/DOM/document.cookie)

Ñam ñam :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T04:19:36.123

我会看看使用 HTML5 本地存储[http://diveintohtml5.info/storage.html](http://diveintohtml5.info/storage.html)。仅使用 javascript 无法实现您的要求，因为当您在提交表单后访问新页面时，所有本地 javascript 数据都消失了。您必须以某种方式存储它，使用 PHP、本地存储或 Cookie。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T04:20:16.970

根据您需要支持的浏览器，有两个用于在 HTML5 中本地存储数据的新对象。

[https://developer.mozilla.org/en-US/docs/DOM/Storage](https://developer.mozilla.org/en-US/docs/DOM/Storage)

看起来支持可以追溯到 IE8。

我创建了这个简单的测试。似乎工作正常。

```
<!doctype html>
<html>
<head>
    <script>
        function dotest(){
            var input = document.getElementById('test');
            if( localStorage.test ){
                input.value = localStorage.test;
            }

            input.addEventListener('blur', function(){
                localStorage.test = input.value;
            }, false);

        }
    </script>
</head>
<body onload="dotest()">
    <input type="text" id="test">
</body> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T04:22:55.363

可以将其存储在 app.locals 或 res.locals 中。如果您需要在更长的时间内持久化数据 mongoDB

这是我如何使用本地变量的示例，因此我可以存储一个值，同时我从不同的视图中获取另一个值，然后将它们都放入数据库中。

```
 //route to receive the driver name
    app.post('/newdriver', function(req, res){
               app.locals.myVar1 = req.body.newDriver;
       console.log(app.locals.myVar1);
       res.redirect('/newdriverlist')
     }); 
```

# git - 如何找出一行代码的更改历史

> ID：15104112
> 
> 赞同：2
> 
> 时间：2013-02-27T04:15:53.527
> 
> 标签：git

`git blame`可用于找出修改了哪个提交，但我遇到了一种情况，即整个文件似乎是从我无法分辨的某个地方复制的。

```
$ git blame a.c
c59f772b (a@google.com 2011-08-25 01:07:44 +0000   1)   #include <stdio.h>
c59f772b (a@google.com 2011-08-25 01:07:44 +0000   2)   
c59f772b (a@google.com 2011-08-25 01:07:44 +0000   3)   int main(int argc, char **argv) {
c59f772b (a@google.com 2011-08-25 01:07:44 +0000   4)       void *handle;
c59f772b (a@google.com 2011-08-25 01:07:44 +0000   5)       double (*cosine)(double);
...

$ git log c59f772b
commit c59f772bc273e65985236ba665f7a88492a33235
Author: a@google.com
Date:   Thu Aug 25 01:07:44 2011 +0000

    Cloning a bunch of stuff from the another repository
    No changes, as is. 
```

这个提交只是关于复制代码。我仍然不知道这段代码是谁写的。

我可以列出代码更改历史记录或类似内容吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T05:51:06.360

看看 git 的力量 :)

```
git blame -M -C -C -C -w 
```

来自`git help blame`：

> `-C`
> 
> 除了 -M 之外，检测从在同一提交中修改的其他文件移动或复制的行。当您重新组织程序并跨文件移动代码时，这很有用。当此选项被给出两次时，该命令还会在创建文件的提交中查找其他文件的副本。当此选项被给出 3 次时，该命令还会在任何提交中查找来自其他文件的副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T04:34:51.333

似乎没有什么好办法，因为您只是从另一个地方复制文件并提交它。

如果你知道这些类，你可以使用 git commit --author authorname

将帮助您打印所有相关的提交。

兄弟，蒂姆

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T07:09:32.133

如果要显示对单个文件的更改，并查看文件名更改，请执行以下操作：

```
git log --stat --follow -- <filename> 
```

现在要从前一点责备文件，您必须指定可能不再存在的旧文件名。

```
git blame <hash_before_move> -- <old_file_name> 
```

# matlab - Matlab求两条曲线的切线

> ID：15104114
> 
> 赞同：0
> 
> 时间：2013-02-27T04:16:05.630
> 
> 标签：matlab, math

对于家庭作业项目，我必须找到两条曲线相切的点。

我编写了以下脚本，但它给了我一个错误：

```
Warning: 2 equations in 1 variables. 
```

我不明白这个警告，但我的老师说它不应该在那里。

这是我的脚本：

```
syms x y;

y1 = x^3-3*x+4;
y2 = 3*(x^2-x);

y1_prime = diff(y1);
y2_prime = diff(y2);

x_point = solve(y1 == y2, x1_prime == x2_prime);

slope = subs(y1_prime, x, x_point);

y_point = subs(y1, x,x_point);

tangent_line = solve(y - y_point == slope*(x - x_point), y); 

fprintf('The equation for the tangent line is: %s\n', string(tangent_line)); 
```

请帮忙。谢谢你 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T04:48:28.983

你有两个方程要解。第一个是两条曲线的交点：

```
x^3-3*x+4 = 3*(x^2-x) 
```

第二个要求斜率在交点处匹配：

```
3*x^2-3 = 3*(2*x-1) 
```

所以你有两个方程在一个未知数 x 中，在这种情况下可以求解 x，但通常你可能无法找到解。

# java - 对 for 循环感到困惑

> ID：15104116
> 
> 赞同：0
> 
> 时间：2013-02-27T04:16:09.767
> 
> 标签：java, arrays, for-loop

当我的程序到达这个 for 循环并尝试运行它时，我会收到一个错误

```
for (int m = 0; m < students; m++){
        allScores = allScores + scores[m]; 
```

学生被声明为 int allScores 被声明为双精度，分数 [] 数组也是如此。

这是错误消息：

线程“main”中的异常 java.lang.ArrayIndexOutOfBoundsException: 2 在 Lab4.main(Lab4.java:51)

第 51 行是 for (int m = 0; m < students; m++) 行

编辑：

这是我的全部代码，我可能没有正确完成 score[] 数组：

```
import java.util.*;
import java.text.*;

public class Lab4 {
public static void main(String[] args){
    Scanner s= new Scanner(System.in);
    String input;
    int students;
    int d=1;
    double allScores = 0;

    char [] answerKey= { 'B' , 'D' , 'A' , 'A' , 'C' , 'A' , 'B' , 'A' , 'C' , 'D' , 'B' , 'A' };
    char [] userAnswers = new char[answerKey.length];

    DecimalFormat df = new DecimalFormat("#0.0");

    System.out.print("how many students are in the class? ");
    input = s.nextLine();
    students=Integer.parseInt(input);

    String [] name = new String[students];
    double [] scores = new double[students];

    for (int j = 0; j < students; ++j)
    {
        int correctAnswers=0;

        System.out.print("Enter name of student " + (j + 1) + ": ");
        name[j] = s.nextLine();

        System.out.print("Enter quiz score answers :");
        String line = s.nextLine().toUpperCase();
        for (int k = 0; k < answerKey.length; k++) {
        userAnswers[k] = line.charAt(k);
            }

            for (int i = 0; i < userAnswers.length; i++)
        {

                if(userAnswers[i] == answerKey[i])
                {
                    correctAnswers++;
                }

        }
            System.out.println(name[j]);
            System.out.println((df.format((((float)(correctAnswers) / answerKey.length)) * 100)) + "%");
            scores [d] = ((float)((correctAnswers) / answerKey.length) * 100);
            d++;
    }
    System.out.println("the high score is "   + "and the low score is "   );
    for (int m = 0; m < scores.length; m++){
        allScores = allScores + scores[m];
    }
    System.out.println("Average is:" + ((allScores/students)));

}

} 
```

编辑：

对不起，我读错了第 51 行是

```
scores [d] = ((float)((correctAnswers) / answerKey.length) * 100); 
```

编辑：

新代码不再给我错误消息，但我似乎无法让分数的平均值起作用。

```
import java.util.*;
import java.text.*;

public class Lab4 {
public static void main(String[] args){
    Scanner s= new Scanner(System.in);
    String input;
    int students;
    int d=1;
    double allScores = 0;

    char [] answerKey= { 'B' , 'D' , 'A' , 'A' , 'C' , 'A' , 'B' , 'A' , 'C' , 'D' , 'B' , 'A' };
    char [] userAnswers = new char[answerKey.length];

    DecimalFormat df = new DecimalFormat("#0.0");

    System.out.print("how many students are in the class? ");
    input = s.nextLine();
    students=Integer.parseInt(input);

    String [] name = new String[students];
    double [] scores = new double[students + 1];

    for (int j = 0; j < students; ++j)
    {
        int correctAnswers=0;

        System.out.print("Enter name of student " + (j + 1) + ": ");
        name[j] = s.nextLine();

        System.out.print("Enter quiz score answers :");
        String line = s.nextLine().toUpperCase();
        for (int k = 0; k < answerKey.length; k++) {
        userAnswers[k] = line.charAt(k);
            }

            for (int i = 0; i < userAnswers.length; i++)
        {

                if(userAnswers[i] == answerKey[i])
                {
                    correctAnswers++;
                }

        }
            System.out.println(name[j]);
            System.out.println((df.format((((float)(correctAnswers) / answerKey.length)) * 100)) + "%");
            scores [d] = ((float)((correctAnswers) / answerKey.length) * 100);
            d++;
    }
    System.out.println("the high score is "   + "and the low score is "   );
    for (int m = 0; m < scores.length; m++){
        allScores = allScores + scores[m];
    }
    System.out.println("Average is:" + ((allScores/students)));

}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T04:17:49.000

问题在于，它`students`被初始化为一个大于 的值`scores.length`。您可以使用`scores.length`而不是`students`作为循环的上限；或者，初始化`students`为`scores.length`（或低于它的东西）。

如果只想遍历整个数组，可以使用[增强的 for 循环](https://blogs.oracle.com/CoreJavaTechTips/entry/using_enhanced_for_loops_with)语法：

```
for (double score : scores) {
    allScores = allScores + score;
} 
```

**编辑**我自己数了几行（有点乏味），然后我落在了这条线上：

```
scores [d] = ((float)((correctAnswers) / answerKey.length) * 100); 
```

正在发生的事情是`d`变得太大了。这可能是因为您初始化`d`为 1 而不是 0。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T04:17:58.597

使用数组中的长度属性进行迭代。

```
for (int m = 0; m < scores.length; m++){
        allScores = allScores + scores[m]; 
```

但是，您提到错误发生在第 51 行，但第 51 行是：

```
scores [d] = ((float)((correctAnswers) / answerKey.length) * 100); 
```

所以你的 d 等于或大于 score.length。

我很好奇你为什么用 1 初始化 d？

将其更改为 0 可能会解决问题。

```
int d=0; 
```

您的代码中的另一个问题是：

```
((float)((correctAnswers) / answerKey.length) * 100); 
```

将其更改为

```
(((float)correctAnswers / answerKey.length) * 100); 
```

否则，您将更改结果，该结果已经是要浮动的 int。这会影响结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T04:21:02.023

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 
```

这是因为您在某些地方访问数组超出了其限制。可能在`scores[m];`

您可以使用以下内容：

```
for (int m = 0; m < scores.length; m++){
        allScores = allScores + scores[m]; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-27T04:38:21.730

您的代码存在一些违规行为：

```
int d=1; // your score[index] starts with this just change to 0;

scores [d] = ((float)((correctAnswers) / answerKey.length) * 100);

//your scores length will now be d + students; use the students instead
for (int m = 0; m < scores.length; m++){  //for (int m=0;m<students;m++)
        allScores = allScores + scores[m];
    } 
```

# c# - C#中有虚拟类吗？

> ID：15104119
> 
> 赞同：14
> 
> 时间：2013-02-27T04:16:27.693
> 
> 标签：c#

我已经阅读了 C# 中的虚拟方法。C#中是否有任何称为虚拟类的概念？C#中的抽象类和C++中的虚拟类是一样的吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-27T04:21:01.790

C# 中没有这样的东西——实际上没有必要，因为不支持多重实现继承。使类抽象实际上仅意味着您不能创建该类的实例，并且它们可能没有完全实现（例如，可能包含抽象方法）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-27T04:26:32.037

C# 中没有虚拟类。抽象类不一样，因为您无法实例化抽象类。

[您可以通过将其标记为seal](http://msdn.microsoft.com/en-us/library/88c54tsw%28v=vs.110%29.aspx)来做与标记虚拟事物相反的操作，这样可以防止它被继承。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-27T04:53:42.610

我将提供指向此早期 SO 帖子的链接：[在 C++ 中，什么是虚拟基类？](https://stackoverflow.com/questions/21558/in-c-what-is-a-virtual-base-class)

正如其他人所提到的，由于 C# 没有多重继承，因此不需要有一个限制多重继承的“虚拟基类”，因此它不适用于 C#。只有 C# 中的成员可以是虚拟的。

# visual-foxpro - 如何使用visual foxpro从名称字段中删除非字符字母

> ID：15104128
> 
> 赞同：1
> 
> 时间：2013-02-27T04:17:29.397
> 
> 标签：visual-foxpro

我有一段时间没有使用 Visual FoxPro。今天，我的前同事问我如何从名称字段中删除非字符，即只允许 az 和 AZ。我记得我使用了一个名为 strstran 的函数来执行此操作。我需要定义一个包含 az 和 AZ 的变量。但我现在不记得了。有人知道如何处理这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T11:25:33.870

使用 CHRTRAN() 函数。

```
FUNCTION GetAlphaCharacters
    LPARAMETERS tcExpressionSearched

    LOCAL lcAllowedCharacters
    m.lcAllowedCharacters = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"

    RETURN CHRTRAN(m.tcExpressionSearched, CHRTRAN(m.tcExpressionSearched, m.lcAllowedCharacters, ""), "")
ENDFUNC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T13:51:06.843

另一种选择是使用 ISALPHA()。这仅查看字符串中最左侧的位置，但不区分大小写。

```
***This should work, but I haven't tested it.
myresults = ""
myvar = "MyText12"
FOR(i = 1 TO LEN(myvar))
   IF ISALPHA( SUBSTR(myvar, i, 1) )
     myresults = myresults +  SUBSTR(myvar, i, 1)
   ENDIF
ENDFOR
RETURN myresults 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-05T20:44:51.563

我知道我参加聚会有点晚了，但这是我编写的一个函数，用于从字符串中清除所有不可打印的 ASCII 字符。

```
 CLEAR

    * Contains ASCII characters 1 (SOH) and 2 (STX)
    cTest = "Garbage Data   "    

    ? cTest
    cTest = RemoveNonPrintableCharacters(cTest)
    ? cTest

    FUNCTION RemoveNonPrintableCharacters
        LPARAMETERS tcExpressionSearched

        cCleanExpression = tcExpressionSearched

        * Cleans out the first 32 ASCII characters, which are not printable
        FOR decCount = 0 TO 31
            cCleanExpression = CHRTRAN(m.cCleanExpression, CHR(decCount), "")    
        ENDFOR  

        * Also cleans out the non-printable DEL character (ASCII 127)
        cCleanExpression = CHRTRAN(m.cCleanExpression, CHR(127), "")

        * Return the clean string
        RETURN cCleanExpression
    ENDFUNC 
```

# c++ - MPI_Allgather 是我的代码瓶颈，我该如何解决？

> ID：15104129
> 
> 赞同：0
> 
> 时间：2013-02-27T04:17:31.020
> 
> 标签：c++, c, optimization, mpi

我有一个程序，其目的是将特定数据添加到一个主数组。随机数测试`passesTest(randomNumber)`每秒执行数百万次，偶尔会通过测试并将随机数推到数组的末尾。所以大多数时候，当计算正在进行时，数组只是坐在那里。

我决定将这个过程与 MPI 并行化，因为我认为 1000 个处理器执行随机数测试将是一个很大的加速，并且由于内存写入非常罕见，因此 MPI 应该非常适合这项工作。令我沮丧的是，我的程序在`mpirun -np 1`我添加的每个进程中速度最快，但速度明显变慢。

`while`在包含 的循环结束时`passesTest(randomNumber)`，我必须`MPI::COMM_WORLD.Allgather()`从每个进程中收集一个标志，该标志指示是否有一个新的随机数需要推送到数组中。如果有任何标志，`true`那么我执行另一个`Allgather()`实际收集这些数据并将其推送到每个进程的数组本地副本。同样，这一秒`Allgather()`很少执行，因为测试很少通过。

所以我猜测我的瓶颈是从每个 MPI 进程中收集所有标志以查看是否有新数据。每个随机数的测试执行速度很快，因此我假设由于从多个进程收集数据的开销，每秒数十亿次的 while 循环现在显着减少。这是一个很好的猜测吗？我是 MPI 的新手，所以我不知道涉及到什么样的时间尺度`Allgather()`。

如果这是原因，那么我如何才能在通过测试时只与其他进程“交互”？这真的是我想做的。换句话说，如果一个随机数通过了测试，则向所有其他进程发送一条消息以停止它们正在执行的操作并将该数字添加到它们的数组中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:47:21.153

首先，我强烈反对 Voo 和 Hristo Iliev 的评论。

从一个`MPI_Allreduce`开始检查通行证显然更快 - 它需要传输的数据少得多。但是 Allreduce 仍然需要 > `2 * log2(n) * latency`。对于 1000 个进程，可能需要大约 100 微秒，具体取决于您的系统。如果您每秒进行数百万次测试，这意味着每次测试只需要 100 纳秒，那么很明显，每次测试后的集体操作确实会影响您的性能 - 无论每个单独的通信步骤设计得多么优化。

现在，在不了解依赖关系的情况下，很难提出根本性的改进。您可以考虑在没有命中的情况下推测性地执行多次迭代，在确定有命中后丢弃无效的迭代。

除此之外，我建议`MPI_Allreduce`确定`MAX`需要添加的最高随机数。重复此操作，直到添加所有内容。这显然只有在通常很少添加的情况下才有效。

# javascript - Windows 脚本宿主和 JavaScript；我想我错过了一些明显的东西

> ID：15104130
> 
> 赞同：3
> 
> 时间：2013-02-27T04:17:45.447
> 
> 标签：javascript, wsh

我被困在一个“Hello World”程序上。

甚至不开玩笑。

```
alert("Hello World"); 
```

我已经搜索过了，我找不到任何原因这不会在 WSH 中执行，但它不会；我假设我搞砸了令人难以置信的愚蠢。

相关问题，是否有任何处理 WSH 而不是浏览器的优秀 JavaScript 教程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T04:25:05.350

WSH 中的 Hello World 是：

```
WSH.Echo("Hello world");
WSH.Quit(); 
```

老实说，我会尝试在更传统的环境中学习 Javascript，比如浏览器或 Javascript 控制台，然后将你所知道的带到 WSH。不过，这里是 WSH 的概述，可以帮助您入门。[http://www.pctools.com/guides/article/id/2/](http://www.pctools.com/guides/article/id/2/)

# php - 用于在远程文件中搜索而不将文件存储到本地的 PHP IDE

> ID：15104132
> 
> 赞同：1
> 
> 时间：2013-02-27T04:17:53.740
> 
> 标签：php, search, ide

是否有任何好的 IDE 可以从远程文件中搜索单词或短语，而无需先存储/同步到我的本地计算机？

我已经尝试过 Aptana，但它似乎无法做到这一点，但是远程文件系统很好（不存储到本地）

我试过 Netbeans，它似乎总是先将文件存储到我的本地机器上。

我希望有（最好是免费的）IDE 可以在我的远程主机上运行搜索字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T04:43:53.717

我看到三个可能的（常见）选项：

*   通过 ssh 连接并使用[`vim`](http://www.vim.org/). 我会那样做。
*   通过 scp（Linux 上的 sshfs）或 ftp（Linux 上的 curltpfs）挂载远程文件系统。这将对您隐藏文件传输，但它们**将**在后台完成。所以这和让 IDE 做 ftp 工作差不多
*   让 IDE（无论您喜欢什么）在远程主机上运行并使用 RemoteDesktop 或其他方式。

我更喜欢 ssh + vim :)

* * *

使用 ssh 可能是最安全和最常用的方法。较少的数据密集型将像您已经使用的那样将 FTP 与 Aptana 一起使用（期望 Aptana 只传输更改的文件）。（这也可能取决于文件大小和情况，但对于通常的代码文件，我会这么说）

* * *

如果您正在使用 Windows [expandrive](http://www.expandrive.com/)可能是一种方法。它支持通过 FTP、SSH 或 SFTP 在 Windows 中将远程服务器挂载到本地网络驱动器。IDE 会将该文件夹视为本地文件夹。你应该试一试。

* * *

更新：试图解释更多......

如果要在远程文件中搜索，有两个通用选项：

*   搜索程序在本地运行，需要来自远程（文件）的输入数据
*   serach 程序远程运行。您将向它发送参数，它会发回搜索结果

没有其他选择。

在 IDE 中，这意味着：要么使用 IDE 本身的搜索功能，要么意味着搜索程序 (IDE) 在本地运行，然后必须下载/同步/网络挂载文件。或者您远程执行 grep 或其他任何操作并显示结果。然后主要是ssh。您的 IDE 将需要一个 ssh 插件。例如 Eclipse 就有一个。（记住名字是 RSE。Remote [Systems Explorer](http://www.eclipse.org/tm/)）（它也可以与 Aptana 一起使用）。

# python - 转换字典中的项目

> ID：15104139
> 
> 赞同：0
> 
> 时间：2013-02-27T04:18:59.563
> 
> 标签：python, dictionary, python-3.x, int, tuples

我有一个像这样设置的字典 {'USA': ('123456', '456020832'), ... }

关键显然是国家，另外两个是面积（英里）和人口。我需要帮助尝试将区域和人口转换为 int。（它们现在是字符串）。

这就是我所拥有的：

```
def _demo_fileopenbox():        
msg  = "Pick A File!"
msg2 = "Select a country to learn more about!"
title = "Open files"
default="*.py"
f = fileopenbox(msg,title,default=default)
writeln("You chose to open file: %s" % f)    
countries = {}   
with open(f,'r') as handle:
    reader = csv.reader(handle, delimiter = '\t')  
    for row in reader:
        countries[row[0]] = (row[1].replace(',', ''), row[2].replace(',', '')) 
        #i have tried countries[row[0]] = int((row[1].replace(',', '')), int(row[2].replace(',', '')) ) with no luck 
    reply = choicebox(msg=msg2, choices= list(countries.keys()) )
    writeln(reply + "-\tArea: " + (countries[reply])[0] + "\tPopulation: " + (countries[reply])[1] ) 
```

谢谢！我只是不断收到有关转换的错误，所以我正在寻求帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:22:28.560

阅读时将您的代码更改为：

```
countries[row[0]] = int(row[1].replace(',', '')), int(row[2].replace(',', '')) 
```

或者，或者，一个你以后如何做的例子：

```
d = {'USA': ('123456', '456020832'), 'UK': ('12345', '9876544')}
for k, v in d.iteritems():
    d[k] = tuple(int(el) for el in v)
# {'UK': (12345, 9876544), 'USA': (123456, 456020832)} 
```

**调试你的`ValueError`：**

将您的代码修改为如下所示：

```
for row in reader:
    try:
        countries[row[0]] = int(row[1].replace(',', '')), int(row[2].replace(',', ''))
    except ValueError as e:
        print(row) 
```

这将捕获`TypeError`并打印到控制台失败的行。然后，您可以查看这些内容并确定您的列未成功转换为`int`.

# java - 如何使数组的每个对象都包含一个整数数组？

> ID：15104148
> 
> 赞同：0
> 
> 时间：2013-02-27T04:19:46.570
> 
> 标签：java, arrays, object

这是一个超出我想象的想法，但我认为这里有人可以正确地说明它。基本上，我运行了一个递增对象数组的 for 循环。我希望每个对象都保存记录的数组。

```
static RollDice p1,p2,p3,p4;
static RollDice[] Players = new RollDice[]{p1,p2,p3,p4};
for (int a=0;a<4;a++){

  for(int b =0;b<4;b++){
        roll = Math.random()*5;
        roll = Math.round(roll);
        roll = roll+1;
        Players[a].Numbers[b]=(int)roll;
        System.out.println("You have rolled a: "+roll);
  }
        //This prints four numbers in an array for each value of a.
        System.out.println(Arrays.toString(Players[a].Numbers));
       //This is SUPPOSED to call the numbers recorded for that object. I had it as Players[#].Numbers before, but of course that didn't work either.
        System.out.println(Arrays.toString(p2.Numbers)); 
```

所以我想我是在问我是否应该继续，或者只是不浪费我的时间。也请像我是个白痴一样拼写出来，因为我是。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T04:22:13.353

```
class RollDice
{
    public int [] Numbers = new int [4];
}

RollDice p1,p2,p3,p4;
// Do not foget to initialize p1, p2, p3, p4 here
RollDice [] Players = new RollDice [] {p1, p2, p3, p4};
Players [2].Numbers [3] = 4; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T04:41:06.607

我认为这应该可以解决问题：-

```
RollDice p1 = new RollDice(), p2 = new RollDice(), p3 = new RollDice(), p4 = new RollDice();
RollDice[] players = new RollDice[] { p1, p2, p3, p4 };

for (int a = 0; a < 4; a++) {
    int roll = 0;
    for (int b = 0; b < 4; b++) {
        roll = (int) Math.round(Math.random() * 5);
        roll++;
        players[a].numbers[b] = roll;
        System.out.println("You have rolled a: " + roll);
    }
    System.out.println(Arrays.toString(players[a].numbers));
}

class RollDice{
    public int [] numbers = new int [4];
} 
```

**注意：-**为了更好的命名约定，我已将变量名称从`uppercase`更改为 。`lowercase`

# python - 通过 pgmagick 访问低级像素

> ID：15104149
> 
> 赞同：2
> 
> 时间：2013-02-27T04:20:00.810
> 
> 标签：python, graphicsmagick, pgmagick

我想知道是否可以通过 pgmagick 对图像执行低级像素操作。特别是，我想模仿此处显示的 C++ GraphicsMagick API 中的功能：

[http://www.graphicsmagick.org/Magick++/Image.html#low-level-image-pixel-access](http://www.graphicsmagick.org/Magick++/Image.html#low-level-image-pixel-access)

当我尝试以下操作时：

```
import pgmagick
im = pgmagick.Image('cow.png')
pixel_cache = im.getPixels(0,0,100,100) 
```

我收到如下错误：

```
AttributeError: 'Image' object has no attribute 'getPixels' 
```

pgmagick 中的等效功能是什么？

# php - 使用 PHP 访问 LinkedIn API 无需用户登录

> ID：15104153
> 
> 赞同：2
> 
> 时间：2013-02-27T04:20:49.357
> 
> 标签：php, oauth, linkedin

我正在尝试从通过 API 链接的我的公司页面自动提取数据。这将是一项无需用户干预的服务器端作业。

我有凭据来登录linkedin和一个带有密钥的REST API应用程序： [https ://developer.linkedin.com/documents/quick-start-guide](https://developer.linkedin.com/documents/quick-start-guide)

我希望能够每晚拉出我墙上的内容，以将其聚合到我的社交媒体网站。

有没有办法获取和存储 Oauth 令牌服务器端而不需要或伪造客户端会话片段？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T04:31:42.793

是的，您可以，但令牌可能会过期，因此您需要在需要时对其进行更新。

这是一个示例：[https ://github.com/EJTH/SLinkedIn/blob/master/examples/reusing-tokens.php](https://github.com/EJTH/SLinkedIn/blob/master/examples/reusing-tokens.php)

如果您运行 cron，则不要授权，而是处理异常以重置令牌并强制用户在下次登录时更新它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T21:51:11.353

我不相信这是因为 LinkedIn 不允许这样做。

我遇到了同样的问题，似乎有办法让它保持更长的开放时间，但看起来LinkedIn在他们的服务条款中明确禁止自动化操作。简而言之，我不相信任何自动操作都可以由会员发起。

[这更详细地说明了他们对自动请求的立场：](http://developer.linkedin.com/forum/use-oauthcallback-get-verifier)

# c# - Gridview不更新值

> ID：15104161
> 
> 赞同：1
> 
> 时间：2013-02-27T04:21:29.590
> 
> 标签：c#, asp.net, visual-studio, gridview

我试图让我的 gridview 更新 SQL 记录，但它没有更新值。

这是aspx代码：

```
<asp:GridView ID="GridView1" runat="server" GridLines="None" AutoGenerateColumns="false" 
    onrowcancelingedit="GridView1_RowCancelling" 
    OnRowDeleting ="GridView1_RowDeleting" 
    onrowediting="GridView1_RowEditing"
    onrowupdating="GridView1_RowUpdating" 
    DataKeyNames="RID"
    CssClass="mGrid" 
    PagerStyle-CssClass="pgr"  
    AlternatingRowStyle-CssClass="alt">  

      <Columns>           

         <asp:TemplateField Visible="false" HeaderText="RID">
            <ItemTemplate>
              <asp:Label runat="server" ID="RID" Text='<%#Bind("RID")%>' />
            </ItemTemplate>
         </asp:TemplateField>

         <asp:TemplateField HeaderText="Short Description">
            <ItemTemplate>
              <asp:Label runat="server" ID="short_lbl" Text='<%#Bind("SHORT_DESCRIPTION") %>' />
            </ItemTemplate>
            <EditItemTemplate>
            <asp:TextBox runat="server" ID="SHORT_DESCRIPTION" Text='<%#Bind("SHORT_DESCRIPTION") %>' />
            <asp:RequiredFieldValidator runat="server" ID="valShort" ControlToValidate="SHORT_DESCRIPTION" ValidationGroup="var1" ErrorMessage="*" />
            </EditItemTemplate>
         </asp:TemplateField>

              <asp:TemplateField HeaderText="Description">
            <ItemTemplate>
              <asp:Label runat="server" ID="desc_label" Text='<%#Bind("DESCRIPTION") %>' />
            </ItemTemplate>
            <EditItemTemplate>
            <asp:TextBox runat="server" ID="DESCRIPTION" Text='<%#Bind("DESCRIPTION") %>' />
            <asp:RequiredFieldValidator runat="server" ID="valLast" ControlToValidate="DESCRIPTION" ValidationGroup="var1" ErrorMessage="*" />
            </EditItemTemplate>
         </asp:TemplateField>

      <asp:TemplateField HeaderText="Action">
      <ItemTemplate>
      <asp:LinkButton ID="btnEdit" Text="Edit" runat="server" CommandName="Edit" />
      <br />
      <asp:LinkButton ID="btnDelete" Text="Delete" runat="server" CommandName="Delete" />
      </ItemTemplate>
      <EditItemTemplate>
      <asp:LinkButton ID="btnUpdate" Text="Update" runat="server" CommandName="Update" />
      <asp:LinkButton ID="btnCancel" Text="Cancel" runat="server" CommandName="Cancel" />
      </EditItemTemplate>
      </asp:TemplateField>

   </Columns>

</asp:GridView> 
```

以及更新功能本身。

```
protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
   string s = GridView1.DataKeys[e.RowIndex].Value.ToString();           
   Label RID = GridView1.Rows[e.RowIndex].FindControl("RID") as Label;
   TextBox SHORT_DESCRIPTION = GridView1.Rows[e.RowIndex].FindControl("SHORT_DESCRIPTION") as TextBox;
   TextBox DESCRIPTION = GridView1.Rows[e.RowIndex].FindControl("DESCRIPTION") as TextBox;

   String UpdateQuery = string.Format("UPDATE TAXONOMIES SET SHORT_DESCRIPTION='{0}', DESCRIPTION='{1}' WHERE RID = {2}", SHORT_DESCRIPTION.Text, DESCRIPTION.Text, Convert.ToInt32(RID.Text));   

    GridView1.EditIndex = -1;
    BindGridData(UpdateQuery);

} 
```

如果我放置一个断点并查看该值，我可以看到这不是新输入的值。我不确定发生了什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T04:41:23.713

我认为问题是你`grid`在`page-load`事件中绑定了你。
尝试将其绑定到 if`(!IsPostBack)`

## 例子

```
private void Page_Load()
{
    if (!IsPostBack)
    {
        //bind your grid here.
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T04:39:12.483

使用此代码

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
        DataKeyNames="id" DataSourceID="SqlDataSource1">
        <Columns>
            <asp:CommandField ShowEditButton="True" />
            <asp:BoundField DataField="id" HeaderText="id" ReadOnly="True" 
                SortExpression="id" />
            <asp:BoundField DataField="regGroupID" HeaderText="regGroupID" 
                SortExpression="regGroupID" />
            <asp:BoundField DataField="amountReceived" HeaderText="amountReceived" 
                SortExpression="amountReceived" />
            <asp:BoundField DataField="other" HeaderText="other" SortExpression="other" />
        </Columns>
    </asp:GridView>

<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="<%$ ConnectionStrings:ConnectionString %>" 
    SelectCommand="SELECT * FROM [Table]" 
    UpdateCommand="UPDATE [Table] SET [regGroupID] = @regGroupID, [amountReceived] = @amountReceived, [other] = @other WHERE [id] = @id">
    <DeleteParameters>
        <asp:Parameter Name="id" Type="Int32" />
    </DeleteParameters>

    <UpdateParameters>
        <asp:Parameter Name="regGroupID" Type="Int32" />
        <asp:Parameter Name="amountReceived" Type="Decimal" />
        <asp:Parameter Name="other" Type="String" />
        <asp:Parameter Name="id" Type="Int32" />
    </UpdateParameters>
</asp:SqlDataSource> 
```

这里我设置 id 为主键

表结构是

![在此处输入图像描述](../Images/1fa0d744ea5871202323dca8e7cd2c77.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T04:25:49.117

尝试将 Eval 更改为 Bind。Eval 是只读的，因此您实际上无法更新该值。

# vb.net - 来自 MSACCESS 表的 PictureBox 中的图像

> ID：15104168
> 
> 赞同：0
> 
> 时间：2013-02-27T04:22:04.863
> 
> 标签：vb.net, picturebox

你能告诉我如何在运行时从 MSACCESS 表中名为 IMGFAM 的字段（类型 oleobject）检索图像到一组图片框（许多作为表中的记录）。

我可以显示按钮，但我不能用从现场获得的图片（jpg）来做到这一点。谢谢你的帮助。

PS：我使用了 MS Access 2007 和 VB.net 2008 express。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:10:08.747

在你想将图像操作到 db Access 之前，你必须了解 IO.MemoryStream 的基本类。下面来自 vb 论坛的示例代码[http://www.vbforums.com/showthread.php?489787-02-03-Loading-JPG-images-from-Access-to-VB.Net](http://www.vbforums.com/showthread.php?489787-02-03-Loading-JPG-images-from-Access-to-VB.Net)

```
Imports System.Data.OleDb
Imports System.IO

Public Class Form1

Private connection As New OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=|DataDirectory|\db1.mdb;User Id=admin;Password=;")

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Me.PictureBox1.Image = Image.FromFile(Path.Combine(Application.StartupPath, "Properties.jpg"))
End Sub

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Try
        Dim stream As New IO.MemoryStream

        Me.PictureBox1.Image.Save(stream, Imaging.ImageFormat.Jpeg)

        Dim command As New OleDbCommand("INSERT INTO Table1 (Picture) VALUES (@Picture)", connection)

        command.Parameters.AddWithValue("@Picture", stream.GetBuffer())

        connection.Open()
        command.ExecuteNonQuery()
        connection.Close()
        command.Dispose()
        stream.Dispose()
    Catch ex As Exception
        MessageBox.Show(ex.ToString())
    End Try
End Sub

Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
    Try
        Dim command As New OleDbCommand("SELECT Picture FROM Table1 WHERE ID = @ID", connection)

        Me.connection.Open()
        command.Parameters.AddWithValue("@ID", Me.GetGreatestID())

        Dim pictureData As Byte() = DirectCast(command.ExecuteScalar(), Byte())

        connection.Close()
        command.Dispose()

        Dim stream As New IO.MemoryStream(pictureData)

        Me.PictureBox2.Image = Image.FromStream(stream)
        stream.Dispose()
    Catch ex As Exception
        MessageBox.Show(ex.ToString())
    End Try
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T04:58:52.853

```
Dim OpenFileDialog1 As New OpenFileDialog
        With OpenFileDialog1

            .CheckFileExists = True

            .ShowReadOnly = False

            .Filter = "All Files|*.*|Bitmap Files (*)|*.bmp;*.gif;*.jpg"

            .FilterIndex = 2

            If .ShowDialog = DialogResult.OK Then

                ' Load the specified file into a PictureBox control.

                pbNewImage.Image = Image.FromFile(.FileName)

            End If

for detail one can visit my blog: [enter link description here][1] 
```

# ios - IOS标签栏名称显示其他视图控制器，但不显示表视图控制器？

> ID：15104170
> 
> 赞同：0
> 
> 时间：2013-02-27T04:22:14.867
> 
> 标签：ios, button, uiviewcontroller, uitabbarcontroller, uitableview

我希望你能告诉我我做错了什么。另外，抱歉，我正在努力学习在问题中正确格式化代码。

一旦我知道它是如何工作的，我相信这将是直观的:-)

谢谢你。

我正在创建一个 iPhotos 风格的示例应用程序 - 一个在窗口底部有 4 个选项卡栏的应用程序，出现的第一个视图是 UITableViewController，它在每个选项卡的末尾都有那些方向箭头行/实例，用户可以单击其中任何一个并获取有关该实例的更多详细信息。第一个视图称为 ItemsViewController。它在标签栏中有一个与之关联的空白标签栏按钮，我可以返回到它。其他 3 个标签栏项目都是常规的 UIViewController，在我的示例中，它们每个都只是显示一个图像，这就是它们所做的一切（目前）。

我终于设法让所有 3 个 UIViewController 和一个 UITableViewController 存在并在同一个应用程序中工作。（万岁！）我可以让名称显示在*不是*表格视图控制器的 3 个选项卡栏项目中的每一个上。但我无法让 UITableViewController.m 在标签栏中的标签栏项目上显示名称。

.......这是我在应用程序委托方法中使用的代码......

```
`- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
UITabBarController *tabBar = [[UITabBarController alloc] init];

ChairGarden* vc1 = [[ChairGarden alloc] init];

JSerra* vc2 = [[JSerra alloc] init];

Angel* vc3 = [[Angel alloc] init];

// Create aN ItemsViewController
  ItemsViewController *itemsViewController = [[ItemsViewController alloc] init];

// Create an instance of a UINavigationController
// its stack contains only itemsViewController
UINavigationController *vc4 = [[UINavigationController alloc]initWithRootViewController:itemsViewController];

   NSArray* controllers = [NSArray arrayWithObjects:vc4, vc1, vc2, vc3, nil];

   tabBar.viewControllers = controllers;

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

// Place navigation controller's view in the window hierarchy

[[self window] setRootViewController:tabBar];

self.window.backgroundColor = [UIColor whiteColor];
[self.window makeKeyAndVisible];
return YES;
} 
```

`

..... 这是我在一个常规 UIViewController 中使用的一段代码，它指定了一个标签栏标题。我在标签栏上看到标题“椅子花园”，它显示了正确的图像。其他两个常规的工作方式相同

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // get tab bar item
        UITabBarItem *tbi = [self tabBarItem];
        [tbi setTitle:@"Chair Garden"];

    }
    return self;
} 
```

......我试图为出现的第一个视图制作一个带有标题的标签栏项目 - 我的 UITableViewController 称为“ItemsViewController”，但它没有出现。我已经尝试将它放在 init 和 initWithNibName:bundle 中（我是否指定了该方法名称对吗？）（我也分别尝试过）。在这两种情况下，我的 NSLog 语句都显示我在那里，但选项卡上没有标题

```
@implementation ItemsViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        NSLog (@"Getting to initWithNibName in ItemsViewController");

        // get tab bar item
        UITabBarItem *tbi = [self tabBarItem];
        // This dosn't show up
        [tbi setTitle:@"Table View"];

    }
    return self;
}

- (id)init 
{
    // Call the superclass's designated initializer
    self = [super initWithStyle:UITableViewStyleGrouped];
    if (self) {
        NSLog (@"Getting to init in ItemsViewController");
        // get tab bar item
        UITabBarItem *tbi = [self tabBarItem];
        // This dosn't show up EITHER
        [tbi setTitle:@"HOME"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:52:32.260

我不确定为什么这对于 UITableViewController 和 UIViewController 的工作方式不同（我能够复制您所看到的内容）。但是，您可以在 init 方法中设置表格视图控制器本身的标题，这将显示在标签栏项目上（默认情况下，标签栏项目显示控制器的标题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T01:47:14.703

写 self.title=@"某个名字";

在 viewDidLoad 方法中而不是 initWithNibName

# python - 不能用字符串连接变量？

> ID：15104172
> 
> 赞同：0
> 
> 时间：2013-02-27T04:22:22.713
> 
> 标签：python, string

当我学习python时，我快疯了。

这是一个代码片段：

```
import re

class Spam:
    def egg(self, pat):
        print pat

attribute_pattern = r'(\s[a-z\-]+=".*?")*'

ok_uber_string = '<(us-patent-grant)'  r'(\s[a-z\-]+=".*?")*'   '>(.*?)(</\1>)'
bad_uber_string = '<(us-patent-grant)'  attribute_pattern   '>(.*?)(</\1>)'
pat = re.compile(bad_uber_string) 
```

带有 bad_uber_string 的行将无法编译，得到一个 SyntaxError: invalid syntax

这必须是用户错误，我做错了什么？

谢谢帕特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T04:33:12.963

Python 会自动将字符串文字粘合在一起：

```
some_string = "this will " "be one string" 
```

在所有其他情况下，您希望使用`+`运算符将​​值连接到字符串：

```
bad_uber_string = '<(us-patent-grant)' + attribute_pattern + '>(.*?)(</\1>)' 
```

另请参阅：[https ://stackoverflow.com/a/1732454/65295](https://stackoverflow.com/a/1732454/65295)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T04:32:27.783

自动连接仅适用于字符串**文字**。要连接不是字符串文字的字符串，请使用`+`运算符

```
>>> "foo" "bar"
'foobar'
>>> bar = "bar"
>>> "foo" bar
  File "<stdin>", line 1
    "foo" bar
            ^
SyntaxError: invalid syntax
>>> "foo" + bar
'foobar' 
```

原因很简单——自动连接是在解析时完成的，而不是运行时：

```
>>> def foo():
...    return "foo" "bar"
... 
>>> dis.dis(foo)
  2           0 LOAD_CONST               1 ('foobar') 
              3 RETURN_VALUE 
```

由于 python 的动态特性，它无法确定（通常）是否`bar`包含字符串、浮点数或任何其他用户定义的类型，直到运行时。并且提前确定足够简单的特殊情况并不是“足够特殊以违反规则”（`import this`）。

# ios - UITabBar：编辑“更多”屏幕并旋转

> ID：15104175
> 
> 赞同：0
> 
> 时间：2013-02-27T04:22:36.707
> 
> 标签：ios, ipad, uitabbarcontroller, uitabbar

我`UITabBar`在我的 iPad 应用程序中使用 a 。它有十几个选项卡，因此“更多...”按钮是可见的。当我 ：

1.  点击“更多...”按钮
2.  单击“编辑”按钮以自定义我的标签
3.  旋转平板电脑

“编辑”屏幕无法正确旋转，我的显示很丑：

![在此处输入图像描述](../Images/c8ececb456316eb3e9bde80cbf912675.png)

有没有人遇到过同样的错误？我只使用了标准的 iOS 组件`UITabBarController`，我是否错过了它的配置中的某些内容，或者它是一个 iOS 错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T03:51:28.573

显然是一个iOS错误。我用 XCode 向导创建了一个极简的 UITabBar 项目。在项目中添加了10个标签栏，我可以重现该错误。我不会尝试解决这个问题，因为我不想弄乱 UITabBar 代码或覆盖类。

# ios - 如何从网页上的文本框中读取数据、值？

> ID：15104188
> 
> 赞同：0
> 
> 时间：2013-02-27T04:23:26.300
> 
> 标签：ios, webpage, user-data

如何读取或获取用户在 IOS 网页上输入的值或数据？我必须获取用户在网页上输入的信息，感谢任何相关答案。

谢谢你

# dojo - Dojo1.8：_WidgetBase 对我来说听起来不太好

> ID：15104190
> 
> 赞同：0
> 
> 时间：2013-02-27T04:23:37.673
> 
> 标签：dojo

您好似乎使用 _WidgetBase 是一个坏主意。我一直在寻找的是我可以制作实例（具有来自类按钮的不同属性）。

```
require(["dojo/_base/declare", "dojo/dom","dojo/dom_construct", "dijit/_WidgetBase", dojo/domReady!],
    function(declare, dom, domConstruct, _WidgetBase)
     {
      ready(function()
      {
        declare("myBtn", [_WidgetBase],
          {buildRendering: function()
    {
             this.domNode = domConstruct.create('button');
    }
      });

        registry.byId(new myBtn(
          {id:'btn1',
           label:'HelloA'                            
      }).placeAt(dom.byId('line1')));

        registry.byId(new myBtn(
          {id:'btn2',
           label:'HelloB'                            
      }).placeAt(dom.byId('line2')));

        registry.byId(new myBtn(
          {id:'btn3',
           label:'HelloC'                            
      }).placeAt(dom.byId('line3')));

      }
     }); 
```

所以我想知道是否可以使用_WidgetBase，当我想为每个按钮添加不同的属性时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:53:04.640

我不确定我是否理解您的问题，而您可以使用 dijit/form/button ( [http://dojotoolkit.org/api/1.8/dijit/form/Button](http://dojotoolkit.org/api/1.8/dijit/form/Button) )。如果按钮只是一个示例并且您仍然需要扩展 _WidgetBase - 对您的问题的回答是肯定的，可以使用它，但是要编写更多代码以使其可配置和灵活。

# javascript - 在 event.preventDefault 之后无法单击链接

> ID：15104191
> 
> 赞同：0
> 
> 时间：2013-02-27T04:23:40.543
> 
> 标签：javascript, android, events, cordova

### 问题：

在一个项目（android 的 phonegap）中，我将触摸事件作为 MDN[指南](https://developer.mozilla.org/en-US/docs/DOM/Touch_events#Example)进行监听：

```
document.addEventListener("touchstart", handleStart, false);    
function handleStart(evt){    
     evt.preventDefault();    
     .......    
} 
```

但是在那之后，链接就不能再响应点击事件了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T08:29:48.817

因为您基本上取消了文档的“默认行为”。你的代码中有这个原因吗？您正在将其添加到整个文档中。

不要将 addEventListener 放在整个文档上，而是将其放在文档中的一个元素上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:30:46.793

`evt.preventDefault();`删除事件默认行为。如果您单击默认操作是传播链接的按钮，`preventDefault();`则会阻止这种情况发生。

# mysql - 休眠 - Tomcat - MySQL问题

> ID：15104195
> 
> 赞同：2
> 
> 时间：2013-02-27T04:24:07.683
> 
> 标签：mysql, hibernate, tomcat, struts, c3p0

**亲爱的大家，**
我正在*tomcat7上使用hibernate-mysql测试一个Struts webApp ...*

在 8 小时超时后，我的 webApp 总是**崩溃**。我在这里和那里更改了配置。但没有成功。

我真的很感谢你的关注...

这里有一些来自*hibernate.xml的行*

* * *

 `````
 property name="hibernate.bytecode.use_reflection_optimizer">false
    property name="hibernate.c3p0.idle_test_period">30
    property name="hibernate.c3p0.max_size">600
    property name="hibernate.c3p0.max_statements">50
    property name="hibernate.c3p0.min_size">5
    property name="hibernate.c3p0.timeout">1800
    property name="hibernate.c3p0.testConnectionOnCheckout">true
    property name="hibernate.connection.provider_class">org.hibernate.connection.C3P0ConnectionProvider
    property name="hibernate.c3p0.validate">true
    property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver
    property name="hibernate.connection.url">jdbc:mysql://localhost:3306/stockdb?autoReconnect=true 
````  `* * *

以下是我的堆栈跟踪中的一些行：

* * *

```
 com.mchange.v2.c3p0.impl.NewPooledConnection handleThrowable
    WARNING: [c3p0] A PooledConnection that has already signalled a Connection error is still in use!
    ...

WARNING: [c3p0] Another error has occurred [ com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: No operations allowed after statement closed. ] which will not be reported to listeners!
...

com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: No operations allowed after statement closed.

...
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1014)
...

at com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.getMaxRows(NewProxyPreparedStatement.java:1200)

at org.hibernate.jdbc.AbstractBatcher.closeQueryStatement(AbstractBatcher.java:212)

...
at com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:452)
... 
```

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T04:40:48.060

[Tomcat](http://tomcat.apache.org)有一个开箱即用的[数据库连接池。](http://people.apache.org/~fhanik/tomcat/jdbc-pool.html)要配置[MySQL](http://mysql.com)，例如：

```
<Context>

    <!-- maxActive: Maximum number of database connections in pool. Make sure you
         configure your mysqld max_connections large enough to handle
         all of your db connections. Set to -1 for no limit.
         -->

    <!-- maxIdle: Maximum number of idle database connections to retain in pool.
         Set to -1 for no limit.  See also the DBCP documentation on this
         and the minEvictableIdleTimeMillis configuration parameter.
         -->

    <!-- maxWait: Maximum time to wait for a database connection to become available
         in ms, in this example 10 seconds. An Exception is thrown if
         this timeout is exceeded.  Set to -1 to wait indefinitely.
         -->

    <!-- username and password: MySQL username and password for database connections  -->

    <!-- driverClassName: Class name for the old mm.mysql JDBC driver is
         org.gjt.mm.mysql.Driver - we recommend using Connector/J though.
         Class name for the official MySQL Connector/J driver is com.mysql.jdbc.Driver.
         -->

    <!-- url: The JDBC connection url for connecting to your MySQL database.
         -->

  <Resource name="jdbc/TestDB" auth="Container" type="javax.sql.DataSource"
               maxActive="100" maxIdle="30" maxWait="10000"
               username="javauser" password="javadude" driverClassName="com.mysql.jdbc.Driver"
               url="jdbc:mysql://localhost:3306/javatest"/>

</Context> 
```

然后，您需要按如下方式配置连接：

```
 public static void main(String[] args) throws Exception {
        PoolProperties p = new PoolProperties();
        p.setUrl("jdbc:mysql://localhost:3306/mysql");
        p.setDriverClassName("com.mysql.jdbc.Driver");
        p.setUsername("root");
        p.setPassword("password");
        p.setJmxEnabled(true);
        p.setTestWhileIdle(false);
        p.setTestOnBorrow(true);
        p.setValidationQuery("SELECT 1");
        p.setTestOnReturn(false);
        p.setValidationInterval(30000);
        p.setTimeBetweenEvictionRunsMillis(30000);
        p.setMaxActive(100);
        p.setInitialSize(10);
        p.setMaxWait(10000);
        p.setRemoveAbandonedTimeout(60);
        p.setMinEvictableIdleTimeMillis(30000);
        p.setMinIdle(10);
        p.setLogAbandoned(true);
        p.setRemoveAbandoned(true);
 p.setJdbcInterceptors("org.apache.tomcat.jdbc.pool.interceptor.ConnectionState;org.apache.tomcat.jdbc.pool.interceptor.StatementFinalizer");
        DataSource datasource = new DataSource();
        datasource.setPoolProperties(p); 

        Connection con = null;
        con = datasource.getConnection(); 
```

现在，像往常一样处理您的 JDBC 代码。``

# javascript - 能够删除非 var 变量，但不能删除 var 声明的变量？

> ID：15104200
> 
> 赞同：3
> 
> 时间：2013-02-27T04:24:55.263
> 
> 标签：javascript, variables

例如：这里我用var声明了一个变量，然后尝试删除它并失败。

```
var derp = "foo";        
\> "foo"    
derp;    
\> "foo"    
this.derp;    
\> "foo"    
delete derp;    
\> false    
derp;    
\> "foo" 
```

但是，如果我创建一个没有 var 的变量，那么我可以成功删除它。

```
perd = "boo";    
\> "boo"    
this.perd;    
\> "boo"    
delete perd;    
\> true    
perd;    
\> undefined 
```

谁能为我解释这种行为？我敢肯定是有原因的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T04:26:28.307

`delete`操作员不会删除变量。它只从对象中删除属性。

当您使用裸标识符而不用`var`关键字声明它时，它不是变量，而是全局变量的属性（通常`window`在浏览器中）。这就是为什么你可以删除它。

[此处](http://perfectionkills.com/understanding-delete/)`delete`提供了您可能想知道的更多关于运营商的信息。

# sql - 使用关系数据库解决密码算术难题

> ID：15104206
> 
> 赞同：6
> 
> 时间：2013-02-27T04:25:26.533
> 
> 标签：sql, relational-database, cryptarithmetic-puzzle

假设给你一个密码算术难题：

**发送 + 更多 = 金钱**

目标是用数字 (0-9) 代替字母，以便加法有效。

我了解如何在数学上解决这个问题，但我不确定如何使用关系数据库来解决这个问题。

**如何设计模式来解决这个问题？**

**尝试解决此问题的 SQL 查询看起来如何？**

**编辑：** 有一些限制：

1.  给定的字母应始终使用相同的数字。例如，如果您猜测字母 E 是“5”，那么 E 应该在它出现的所有位置都得到值“5”。
2.  不同的字母应该有不同的数字，例如，您不能将“4”分配给 E 和 M。
3.  所有数字（单词）都不能有任何前导零

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T05:30:44.370

**这回答了用户提出的另一个问题。**

SEND + MORE = MONEY，其中每个字符都有一个唯一的数字，并且没有单词以零开头。

```
select
    top 1
    S.num as S,
    E.num as E,
    N.num as N,
    D.num as D,
    M.num as M,
    O.num as O,
    R.num as R,
    Y.num as Y,
    (S.num * 1000 + E.num * 100 + N.num * 10 + D.num) as [SEND],
    (M.num * 1000 + O.num * 100 + R.num * 10 + E.num) as MORE,
    (S.num * 1000 + E.num * 100 + N.num * 10 + D.num) + (M.num * 1000 + O.num * 100 + R.num * 10 + E.num) as SEND_plus_MORE,
    (M.num * 10000 + O.num * 1000 + N.num * 100 + E.num * 10 + Y.num) as [MONEY]

from
    Digits as S
    join digits as E on E.num <> S.num
    join digits as N on N.num <> S.num and N.num <> E.num
    join digits as D on D.num <> S.num and D.num <> E.num and D.num <> N.num
    join digits as M on M.num <> S.num and M.num <> E.num and M.num <> N.num and M.num <> D.num
    join digits as O on O.num <> S.num and O.num <> E.num and O.num <> N.num and O.num <> D.num and O.num <> M.num
    join digits as R on R.num <> S.num and R.num <> E.num and R.num <> N.num and R.num <> D.num and R.num <> M.num and R.num <> O.num
    join digits as Y on Y.num <> S.num and Y.num <> E.num and Y.num <> N.num and Y.num <> D.num and Y.num <> M.num and Y.num <> O.num and Y.num <> R.num

where
    (S.num * 1000 + E.num * 100 + N.num * 10 + D.num)
    + (M.num * 1000 + O.num * 100 + R.num * 10 + E.num)
    = (M.num * 10000 + O.num * 1000 + N.num * 100 + E.num * 10 + Y.num)     
    and S.num <> 0 and M.num <> 0 
```

我在 WHERE 子句中考虑了一些东西来强制执行唯一数字，但我相信这最终会在检查 WHERE 子句之前处理太多的排列。

由于我们只处理最多 10 位数字，我认为最好构建长 ON 子句来代替速度问题。

**这是没有疯狂的 ON 子句的 FROM + WHERE 子句。这在我的服务器上运行得慢了很多。**

```
from
    Digits as S
    cross join digits as E
    cross join digits as N
    cross join digits as D
    cross join digits as M
    cross join digits as O
    cross join digits as R
    cross join digits as Y

where
    (S.num * 1000 + E.num * 100 + N.num * 10 + D.num)
    + (M.num * 1000 + O.num * 100 + R.num * 10 + E.num)
    = (M.num * 10000 + O.num * 1000 + N.num * 100 + E.num * 10 + Y.num)     
    and S.num <> 0 and M.num <> 0

        and (select max(B.Count) from   
                (select COUNT(*) as Count from 
                    (select S.num, 's' as letter   -- the letters are included to make sure the unions do not merge equivalent rows
                    UNION select E.num, 'e'
                    UNION select N.num, 'n'
                    UNION select D.num, 'd'
                    UNION select M.num, 'm'
                    UNION select O.num, 'o'
                    UNION select R.num, 'r'
                    UNION select Y.num, 'y') as A
                    group by A.num
                ) as B
             ) = 1 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-27T04:46:23.077

作者提出了两个截然不同的问题。

**这回答了提出的问题，OVER + FLOW = STACK，其中每个字符不一定有唯一的数字，可能涉及超过 10 个字符**

*   有一个规定，每个字符都有一个唯一的数字，但是对于 OVER + FLOW + STACK 是不可能的，因为有太多的字母。

`Digits`当表包含一列，其中每条记录包含 1 到 9 之间的整数（或 0 到 9，如果您愿意），这样的事情可能会起作用。

交叉连接在性能方面非常讨厌，但这可能是一个起点。

```
select
    top 5 
    O.num as O,
    V.num as V,
    E.num as E,
    R.num as R,
    F.num as F,
    L.num as L,
    W.num as W,
    S.num as S,
    T.num as T,
    A.num as A,
    C.num as C,
    K.num as K,
    (O.num * 1000 + V.num * 100 + E.num * 10 + R.num) as [OVER],
    (F.num * 1000 + L.num * 100 + O.num * 10 + W.num) as FLOW,
    (O.num * 1000 + V.num * 100 + E.num * 10 + R.num) + (F.num * 1000 + L.num * 100 + O.num * 10 + W.num) as OVER_plus_FLOW,
    (S.num * 10000 + T.num * 1000 + A.num * 100 + C.num * 10 + K.num) as STACK
from
    Digits as O
    cross join digits as V
    cross join digits as E
    cross join digits as R
    cross join digits as F
    cross join digits as L
    cross join digits as W
    cross join digits as S
    cross join digits as T
    cross join digits as A
    cross join digits as C
    cross join digits as K
where
    (O.num * 1000 + V.num * 100 + E.num * 10 + R.num)
    + (F.num * 1000 + L.num * 100 + O.num * 10 + W.num)
    = (S.num * 10000 + T.num * 1000 + A.num * 100 + C.num * 10 + K.num) 
```

根据我对问题的理解，有多种解决方案。这是此代码找到的前 5 个：

![在此处输入图像描述](../Images/ffd9f7562d40dfe5b46d29cc0f37ecdf.png)

我删除了 0，因为您可以用零替换每个字母并获得便宜的答案（基于您最初的问题修订）。

这是唯一的表`Digits`

![在此处输入图像描述](../Images/cfeea6d02af1f380edad9637a3c12c62.png)

# php - PHP 文件不会正确传递 Wordpress 变量

> ID：15104207
> 
> 赞同：0
> 
> 时间：2013-02-27T04:25:32.873
> 
> 标签：php, wordpress, uploadify

有一个非常奇怪的问题，无法弄清楚。我正在使用“UPLOADIFY”从一个小型网络应用程序上传图像。它工作了几个月，然后突然停止工作。理想情况下，我想获取登录的 Wordpress 用户的用户名并将其添加到图像文件名中。

这是我的上传文件的一部分：

```
<?php
include_once($_SERVER['DOCUMENT_ROOT'] .'/wp-config.php');
include_once($_SERVER['DOCUMENT_ROOT'] .'/wp-load.php');
include_once($_SERVER['DOCUMENT_ROOT'] .'/wp-includes/wp-db.php');
global $user_login , $user_email;
      get_currentuserinfo();

$variableuser_id = $user_login;
$ses_id = $variableuser_id;
$ses_id = "1" . $ses_id . "z";
echo "This is a test " . $ses_id; 
```

然后稍后在uploadify中我有：

```
if (!empty($_FILES)) {
    $tempFile = $_FILES['Filedata']['tmp_name'];
    $targetPath = $_SERVER['DOCUMENT_ROOT'] . $targetFolder;
    $targetFile = rtrim($targetPath,'/') . '/' . $ses_id . "-" . str_replace(" ", "", $_FILES['Filedata']['name']); 
```

所以......当我使用uploadify上传图像时，它不会将用户名添加到图像名称中，它会在文件名中添加“1”和“z”，但中间完全缺少用户名。

如果我在浏览器中定期启动uploadify.php 文件，它将显示“这是一个测试1adminz”，因为它应该以管理员身份登录。有任何想法吗？我难住了！顺便说一句，我知道 $ses_id 不是理想的 varname，但它只是在我有一个名为该名称的会话 ID 时遗留在我的代码中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T05:31:05.780

代替

```
global $user_login , $user_email;
      get_currentuserinfo(); 
```

采用

```
global $current_user;
get_currentuserinfo()
$user_login = $current_user->user_login;
$user_email = $current_user->user_email; 
```

有关参考，请参阅[http://codex.wordpress.org/Function_Reference/get_currentuserinfo](http://codex.wordpress.org/Function_Reference/get_currentuserinfo)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T14:41:53.407

好的，我真的无法解释这一点，但我找到了一个解决方案，可以在几个不同服务器上的每个安装上修复 uploadify。

走这条线

```
$targetFile = rtrim($targetPath,'/') . '/' . $ses_id . "-" . str_replace(" ", "", $_FILES['Filedata']['name']); 
```

然后评论了一半

```
$targetFile = rtrim($targetPath,'/') . '/' . $ses_id . "-"; // . str_replace(" ", "", $_FILES['Filedata']['name']); 
```

惊喜惊喜，它现在使用 $ses_id 变量和“-”组合重命名上传的图像。显然没有图像后缀。

所以对于它的地狱，我取消了结尾部分的注释，并且低并且看它工作！大吃一惊！

这对我来说毫无意义，但在多台服务器上解决了！

# libgit2 - libgit2 相当于 git log

> ID：15104215
> 
> 赞同：8
> 
> 时间：2013-02-27T04:26:21.960
> 
> 标签：libgit2

我正在尝试使用 libgit2 执行以下等效操作：

```
git log -z --all --topo-order 
```

我在 1) 找到将所有 refs 推入 revwalker 的最简单方法和 2) 以相同顺序获得结果时遇到了麻烦。尽管我尝试了拓扑和时间排序的各种组合，但我一直看到较旧的分支出现在顶部附近。

我最近的尝试涉及到 call `git_revwalk_push_glob(walk, "refs/*")`，但并不是所有的分支都出来了。一个测试仓库有两个本地分支，一个（当前的）丢失了。

我实际上是在 Objective-git 中这样做的，但是 GTEnumerator 接口有点受限，所以我不得不扩展它。

**更新：**我继续手动推送 refs/heads、refs/remotes 和 refs/tags（以及所有 stash，因为我实际上想要的不仅仅是顶部）。排序问题仍然存在。

# java - 我正在获取 b.setOnClickListener(new OnClickListener() 错误

> ID：15104220
> 
> 赞同：0
> 
> 时间：2013-02-27T04:26:43.237
> 
> 标签：java, android, onclicklistener

我正在 Eclipse 中创建一个简单的应用程序，但在这一行出现错误

```
b.setOnClickListener(new OnClickListener() 
```

请看一下整个程序

```
package com.example.activity2;

public class Main extends Activity {
    //Called when the activity is first created. */

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

    Button b = (Button) findViewById(R.id.button1);
    b.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
        // TODO Auto-generated method stub

    }
});
}
} 
```

这是程序，我收到了这个错误。请在这个问题上帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T05:11:58.377

只需导入这个： `import android.view.View.OnClickListener;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T04:37:28.023

试试这个

```
b.setOnClickListener(new View.OnClickListener()
.......
.......
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T04:38:19.860

试试这个，

```
 Button b = (Button) findViewById(R.id.button1);
b.setOnClickListener(new View.OnClickListener() {

public void onClick(View v) {
    // TODO Auto-generated method stub

}
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T04:55:24.400

像这样使用。

```
b.setOnClickListener
        (
            new View.OnClickListener()
            {
                @Override public void onClick(View v) {your code...;}
            }
        ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T05:02:47.993

或者您可以在xml中制作简单的点击方法

```
android:onClick="MyClick" 
```

在java代码中确实喜欢

```
public void MyClick(View v) {

  //do your work here
    } 
```

# c++ - 创建朋友功能时出错，“硬币没有命名类型”

> ID：15104221
> 
> 赞同：0
> 
> 时间：2013-02-27T04:26:51.163
> 
> 标签：c++, operator-keyword, friend

我只是想创建一个重载的朋友函数（我说得对吗？）来添加两种不同类型的“硬币”类。看来我无法正确使用语法。有人可以指出我正确的方向吗？

`functions.cpp`我的文件中实现的逻辑：

```
coins operator+(const coins  &num1, const coins &num2)
{
    int dollars = num1.dollars + num2.dollars;
    int cents = num1.cents + num2.cents;
    return coins(dollars, cents);
} 
```

我`functions.h`对朋友函数的声明：

```
coins operator+(const coins  &num1, const coins &num2); 
```

我的班级文件在以下位置声明了一个朋友`coins.h`：

```
friend coins operator+(coins); 
```

谁能指出我正确的方向？我应该发布完整的代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:30:03.707

您应该在硬币类中放置：

```
friend coins operator+(const coins&, const coins&); 
```

（即它有一个左侧操作数和一个右侧操作数）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T04:48:24.980

该错误消息`X does not name a type`似乎表明编译器无法识别`X`为一种类型，要么是因为它没有看到定义，要么是因为在找到该类型之前通过查找找到了其他东西。

检查您是否包含了适当的标头，并且在您定义运算符的位置没有其他符号`coins`在隐藏该类型的范围内。另请注意，运算符应定义在与它们操作的类型相同的命名空间中。

# python - 如何将信息存储在 Selenium 中的“NoType”HTML 元素中 - Python

> ID：15104225
> 
> 赞同：1
> 
> 时间：2013-02-27T04:27:18.970
> 
> 标签：python, html, selenium, selenium-rc

我正在尝试使用 Selenium - Python 从 HTML 元素中获取一些信息，但我不确定如何保存它。我对编程有点陌生，但对我知道如何编写代码的知识足够了解，但是很难研究答案并将其适应我的代码。我在谷歌上看过，似乎找不到任何能特别帮助我解决我需要的东西。

这是我需要从中获取信息的 HTML 元素：

```
<span id="ctl00_plnMain_rptAssigmnetsByCourse_ctl00_lblOverallAverage">99.05</span> 
```

我需要检索 99.05 并将其存储在名为“avg”的变量中。

这是我用于 Selenium 测试的代码。

```
username = raw_input("Username: ")
password = raw_input("Password: ")  
browser = webdriver.Firefox() # Get local session of firefox    
browser.get("https://hac.mckinneyisd.net/homeaccess/default.aspx") # Load page
elem = browser.find_element_by_name("ctl00$plnMain$txtLogin") # Find the query box
elem.send_keys(username)
elem = browser.find_element_by_name("ctl00$plnMain$txtPassword") # Find the password box
elem.send_keys(password + Keys.RETURN)
time.sleep(0.2) # Let the page load
elem = browser.find_element_by_link_text("Classwork").click()
time.sleep(0.2)
???????????????
browser.close() 
```

我应该在 ???... 中放入什么以从对象中获取 99.05 并将其保存为“avg”？我努力了：

```
content = elem.text("td[@id='ctl00....lblOverallAverage']" 
```

...但我收到一个错误，说我不能这样做，因为它没有类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:11:28.923

尝试：

```
elem = browser.find_element_by_id("ctl00_plnMain_rptAssigmnetsByCourse_ctl00_lblOverallAverage")
avg = elem.getText() 
```

# android - Android 在下一个选项卡中显示和保存数据

> ID：15104227
> 
> 赞同：3
> 
> 时间：2013-02-27T04:27:26.590
> 
> 标签：android, android-fragments, fragmentpageradapter

我创建了`FragmentActivity`2 个选项卡。这是一个非常基本的`Tab`例子，来自 Android 开发者教程 using `FragmentActivity`and `FragmentPagerAdapter` [Code Here](http://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html)

```
 public class FragmentPagerSupport extends FragmentActivity implements
    ActionBar.TabListener {
        SectionsPagerAdapter mSectionsPagerAdapter;
        static final int NUM_ITEMS = 10;
        ViewPager mViewPager;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.fragment_pager);
            final ActionBar actionBar = getActionBar();
            actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
                    ...........
            }

        @Override
        public Fragment getItem(int position) {
            Fragment fragment = null;
            Bundle args = new Bundle();         
            switch (position) {
            case 0:
                fragment = new Fragment01();
                args.putInt(Fragment01.ARG_SECTION_NUMBER, position + 1);
                fragment.setArguments(args);
            break;
            case 1:
                fragment = new Fragment02();
                args.putInt(Fragment02.ARG_SECTION_NUMBER, position + 1);
                fragment.setArguments(args);
            break;
                    return fragment;
               }
           } 
```

然后我`fragments`为 2创建了 2 个不同的`tabs`：

```
public static class Fragment01 extends Fragment {
    private EditText mName; 
    private EditText mEmail1;
    public static final String ARG_SECTION_NUMBER = "2";

    public Fragment01() {
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

            View v = inflater.inflate(R.layout.activity_customer_add, container, false);
            mName = (EditText) v.findViewById(R.id.customer_add_name);
            mEmail = (EditText) v.findViewById(R.id.customer_add_email);
                    View confirmButton = v.findViewById(R.id.customer_add_button);

                    confirmButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
            ......................
                             }
            });
     }
  } 
```

现在在第二个选项卡中，我需要显示第一个选项卡的输入值`Name`和`Email`来自第二个选项卡的确认需要保存在`database`. 但在这里我卡住了。我不知道如何保留数据`first tab`？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T05:37:03.813

一种方法是使用**Singleton** DP。将只有一个对象具有名称、电子邮件等作为字段。在第一个片段中使用 setter 设置名称和电子邮件字段，并在第二个片段中使用 getter 访问它们。

确认后，您可以将整个对象插入数据库。

# android - 片段未显示

> ID：15104232
> 
> 赞同：0
> 
> 时间：2013-02-27T04:27:43.873
> 
> 标签：android, android-layout, android-fragments

我有一个活动，它有一个列表视图，它使用列表适配器来显示元素。当在片段上单击具有文本的元素时，应创建具有播放按钮、搜索栏和媒体播放器的片段。但是，当我的活动被调用时，我得到了这个错误。

第 14 行是 list_songs 是具有“片段”开始标签的列表

```
> 02-26 02:01:27.625: E/AndroidRuntime(2419): FATAL EXCEPTION: main
> 02-26 02:01:27.625: E/AndroidRuntime(2419):
> java.lang.RuntimeException: Unable to start activity
> ComponentInfo{com.songs/com.songs.display.DisplaysongDetails}:
> android.view.InflateException: Binary XML file line #14: Error
> inflating class fragment 
```

活动的代码是

```
public class DisplaysongDetails extends ListActivity {
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.setContentView(R.layout.list_songs);
    setListAdapter(new ArrayAdapter<String>(this, R.layout.row,songDetails));
    ListView listView = (ListView) this.findViewById(android.R.id.list);//getListView();
    listView.setTextFilterEnabled(true);
    listView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            String name = ((TextView) view).getText().toString();
            if (name=="Play")
            {
                PlayerFragment frag = (PlayerFragment) getFragmentManager().findFragmentById(R.id.player_fragment);
                if (frag == null) {
                    FragmentTransaction ft = getFragmentManager().beginTransaction();
                    ft.add(R.id.player_fragment, new PlayerFragment());
                    ft.commit(); 
                }}
        }
    }); 
```

}}

list_songs.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#FFFFFF">
<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />   
<fragment
    android:id="@+id/player_fragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.songs.PlayerFragment" />     
</LinearLayout> 
```

片段类是：

```
public class PlayerFragment extends Fragment implements  OnTouchListener, OnCompletionListener, OnBufferingUpdateListener{

private Button btn_play;
private SeekBar seekBar;
private MediaPlayer mediaPlayer;
private int lengthOfAudio;
private int length=0;
String URL = (new AppConfig()).getURL();
private final String url = URL + "/play/song.mp3";
private final Handler handler = new Handler();
private final Runnable r = new Runnable() { 
    public void run() {
        updateSeekProgress();                   
    }
};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
}

@SuppressLint("NewApi")
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.player_fragment, container, false);
    btn_play = (Button) view.findViewById(R.id.btn_play);
    btn_play.setOnClickListener(new OnClickListener());
    seekBar = (SeekBar)getActivity().findViewById(R.id.seekBar);
    seekBar.setOnTouchListener(this);

    mediaPlayer = new MediaPlayer();
    mediaPlayer.setOnBufferingUpdateListener(this);
    mediaPlayer.setOnCompletionListener(this);

    return view;
}} 
```

片段 XML

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>
<SeekBar
android:id="@+id/seekBar"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:layout_margin="3dp" />
<LinearLayout
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_marginTop="5dp"
android:gravity="center_horizontal"
android:orientation="horizontal" >
<Button
    android:id="@+id/btn_play"
    android:layout_width="70dp"
    android:layout_height="wrap_content"
    android:text="play" />
</LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:34:39.933

另一个问题：

```
seekBar = (SeekBar)getActivity().findViewById(R.id.seekBar);
seekBar.setOnTouchListener(this); 
```

`seekBar`仅定义为 Fragment 布局的一部分，而不是 Activity 的。尝试添加侦听器时，该调用`getActivity().findViewById()`应返回并导致 NPE。`null`但是，需要更多信息（来自堆栈跟踪）来查看是否有其他问题（除了这个和字符串比较）。

什么是有效的：

```
seekBar = (SeekBar)view.findViewById(R.id.seekBar);
seekBar.setOnTouchListener(this); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T04:51:30.560

首先，你已经给出`fill_parent`了你的宽度和高度，`ListView`这使得你的 ListView 占据了整个父级（这里`LinearLayout`），所以没有`Fragment`. `null`您检查了您的代码很好`if (frag == null)`，但是您再次尝试将您的片段添加到`View`不在屏幕中的相同片段（未附加）。

如果您发现您`Fragment`的未附加到您的视图层次结构，也许您会想要开始一个新活动。

```
if (frag == null) {
    Intent playerActivity = new Intent(DisplaysongDetails.this, PlayerActivity.class)
    startActivity(playerActivity);
    } 
```

现在，创建一个新的`Activity`被调用`PlayerActivity`并添加`PlayerFragment`它的布局。您可以使用 传递任何项目数据`Extras`。

# android - Facebook SDK3.0如何使用没有图片的WebDialog

> ID：15104234
> 
> 赞同：3
> 
> 时间：2013-02-27T04:28:05.890
> 
> 标签：android, facebook

我引用了 Facebook SDK3.0 中的示例代码，使用 WebDialog 在我的墙上发布故事。

示例代码演示了用于构造 WebDialog.FeedDialogBu​​ilder 的 Bundle 对象

```
Bundle params = new Bundle();
params.putString("name", "Facebook SDK for Android");
params.putString("caption", "Build great social apps and get more installs.");
params.putString("description", "The Facebook SDK for Android makes it easier and faster to develop Facebook integrated Android apps.");
params.putString("link", "https://developers.facebook.com/android");
params.putString("picture", "https://raw.github.com/fbsamples/ios-3.x-howtos/master/Images/iossdk_logo.png"); 
```

所以我改变了一些词来测试我的项目：

```
Bundle params = new Bundle();
params.putString("name", "Push test");
params.putString("caption", "hello");
params.putString("description", "hello");
params.putString("link", "");
params.putString("picture", ""); 
```

但是 WebDialog.FeedDialogBu​​ilder 上的“名称”、“标题”、“描述”的结果消失了

然后我发现了`params.putString("picture", "");`

如果 URL 无效或字符串为空，则 WebDialog.FeedDialogBu​​ilder 将不起作用。

带空字符串：

```
Bundle params = new Bundle();
params.putString("name", "Test");
params.putString("caption", "hello");
params.putString("description", "hello");
params.putString("link", "");
params.putString("picture", ""); 
```

![在此处输入图像描述](../Images/61f2d797e256390f953310a4398ae6c9.png)

使用无效的网址：

```
Bundle params = new Bundle();
params.putString("name", "Test");
params.putString("caption", "hello");
params.putString("description", "hello");
params.putString("link", "");
params.putString("picture", "null"); 
```

![在此处输入图像描述](../Images/53d5286e63bef6e7c4513b3a32751d84.png)

任何有效的网址：

```
Bundle params = new Bundle();
params.putString("name", "test");
params.putString("caption", "hello");
params.putString("description", "hello");
params.putString("link", "");
params.putString("picture", "http://www.technobuffalo.com/wp-content/uploads/2012/12/Google-Apps.jpeg"); 
```

![在此处输入图像描述](../Images/f9083ef210c16ce0a221de26fd0ef705.png)

仅使用三个参数：

```
Bundle params = new Bundle();
params.putString("name", "test");
params.putString("caption", "hello");
params.putString("description", "hello"); 
```

![在此处输入图像描述](../Images/a88cde4f6b70b27265e436966bf03f79.png)

那么，我应该如何将正确的值传递给`params.putString("picture", "");`

可以让它在没有图片的情况下工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T05:51:33.030

实际的问题是您对“链接”没有任何价值。

“名称”、“标题”、“描述”和“图片”都适用于链接字段。我不知道为什么当你有“图片”而不是“链接”的值时会显示任何东西，但我很确定问题是因为你没有“链接”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T05:03:52.943

试试这个

```
Bundle params = new Bundle();
params.putString("name", "Facebook SDK for Android");
params.putString("caption", "Build great social apps and get more installs.");
params.putString("description", "The Facebook SDK for Android makes it easier and faster to develop Facebook integrated Android apps.");
params.putString("link", "https://developers.facebook.com/android"); // required filed
params.putString("picture", ""); 
```

# .net - 我应该让 EF CF 使用用户“dbo”创建我的表吗？

> ID：15104238
> 
> 赞同：0
> 
> 时间：2013-02-27T04:28:36.123
> 
> 标签：.net, sql-server, entity-framework, ef-code-first, dbo

我刚开始使用 SQL Server，我让 Entity Framework 代码首先创建我的数据表。这是其中一张表的 SQL：

```
CREATE TABLE [dbo].[UserProfile] (
    [UserId]   INT            IDENTITY (1, 1) NOT NULL,
    [UserName] NVARCHAR (MAX) NULL,
    PRIMARY KEY CLUSTERED ([UserId] ASC)
); 
```

我注意到“dbo”，但我不确定这是什么意思。这是否类似于存储在主数据库中的数据？现在我想手动删除/创建表，而不是让 EF 这样做。

有人可以告诉我是否有更好的方法来创建表格。例如，我应该用 dbo 以外的东西创建它们吗？我也可以在我的 SQL Server 中创建多个数据库，然后将我的表放在那里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T04:33:17.003

`dbo`代表“数据库所有者”。它只是 SQL Server 中的默认架构。默认情况下，EF 代码首先使用`dbo`架构。如果您想覆盖，请参阅：

[如何停止添加 dbo 的 Entity Framework 5 迁移。进入关键名称？](https://stackoverflow.com/questions/12053627/how-can-i-stop-entity-framework-5-migrations-adding-dbo-into-key-names)

[模式用于对对象进行分组。例如，`Report`模式可能包含用于报告的只读视图。]

# c# - Monodevelop“便携式库”项目参考资料不可用

> ID：15104239
> 
> 赞同：2
> 
> 时间：2013-02-27T04:28:43.837
> 
> 标签：c#, monodevelop, portability

问候，

最近我在开发跨平台项目时遇到了一个问题。在这个项目中，我必须支持 android、ios 和 wp7，我所做的就是为这 3 个平台创建了 3 个项目，我还有一个可以在 3 个目标平台之间共享的项目。

所以我将此项目创建为“便携式库”，并在其他项目中添加对该项目的引用。它有效，我可以在其他 3 个项目中使用此共享项目中定义的类，但问题是，在可移植库项目中，“References”文件夹、“System”、“System.Core”和“System.Xml” ”是红色的，当我展开它时，它会显示“.NETPortable 4.0 Profile1 Profile (in Mono 2.10.9) 的程序集不可用”。我用谷歌搜索了这条信息，但没有一个给我满意的答案。

http://monotouch.2284126.n4.nabble.com/cross-platform-library-code-td4656600.html

那么，如何解决呢？这些“System”、“System.Xml”、“System.Core”是干什么用的？它们是文件吗？还是在一个文件中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T15:19:29.210

您现在可以忽略红色的引用。这只是表明您的系统上没有 PCL 程序集（除非您在 Windows 上，否则您不会拥有），但是 Xamarin 正在努力生成 PCL 程序集并希望“尽快”拥有它们（到 5 月？） .

与此同时，这“没问题”，因为当您在 Mac OS X w/MonoDevelop 上针对 Mono 或 MonoTouch 时，MonoDevelop 所做的是与 Mono for Android 或 MonoTouch 框架链接，这足以满足您的需求做。

需要考虑的事项：

1.  您将无法与您的 WP7 应用程序共享程序集（因为由 MonoDevelop 构建的程序集不是真正的 PCL 程序集），但您将能够共享 Portable Library*项目*- 即确保执行为每个平台重新构建项目。（您可以在 MonoTouch 和 Mono for Android 之间共享，但不能与 WP7 共享）

2.  由于引用的程序集是红色的，正如您所注意到的，这意味着 MonoDevelop 将无法进行正确的代码完成。如果您是 Windows 用户，您可以在 Visual Studio 中开发便携式库，然后将其与您的 iOS 和 Android 项目共享。一旦 Mono 拥有真正的 PCL 程序集，这个问题就会消失。

3.  MonoDevelop 和 Xamarin Studio 的当前公开版本中存在一些不喜欢某些配置文件的错误。以下两个自定义版本都解决了这个问题，具体取决于您想要 MonoDevelop 还是更性感的 Xamarin Studio：

[https://files.xamarin.com/~jeff/MonoDevelop-3.1.1.dmg](https://files.xamarin.com/~jeff/MonoDevelop-3.1.1.dmg)

[https://files.xamarin.com/~jeff/XamarinStudio-4.0.2442.dmg](https://files.xamarin.com/~jeff/XamarinStudio-4.0.2442.dmg)

请记住，这些自定义构建都没有经过 QA。XamarinStudio 链接昨晚刚刚发送给 QA 团队（新闻热！）将成为 Xamarin Studio 4.0.2（一旦 QA 在该版本中出现的任何回归/严重错误都已得到修复）。

# java - Linux 终端中的 Java 字符串执行

> ID：15104240
> 
> 赞同：0
> 
> 时间：2013-02-27T04:28:51.710
> 
> 标签：java, system, exec, processbuilder

我正在使用 StringBuilder 创建一个字符串，然后尝试在 Linux 终端上执行该字符串。但不是执行整个命令，而是执行一半命令然后终止它。这是我的java代码片段：

```
moteCommand.append("CFLAGS+=-DCC2420_DEF_CHANNEL=1");
moteCommand.append(" ");
moteCommand.append("make telosb install.");
moteCommand.append(moteIdList.get(i).toString());
moteCommand.append(" bsl,");
moteCommand.append(moteAddrList.get(i).toString());
String moteCommand2 = moteCommand.toString();
Process moteProgProcess = Runtime.getRuntime().exec(moteCommand2, null,"/opt/tinyos-2.x/apps/XXX/); 
```

它给了我这个错误：无法运行程序“CFLAGS+=-DCC2420_DEF_CHANNEL=1”（在目录“/opt/tinyos-2.x/apps/xxx”中）：java.io.IOException：错误=2，没有这样的文件或目录

我不明白为什么系统进程试图只执行一半的字符串。如果有人知道原因，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T04:48:47.337

当您调用`Runtime.exec()`时，第一个空格之前的字符必须是您要启动的程序的名称。之后，空格之间的每个“部分”都是一个单独的参数。请注意，调用`Runtime.exec()`与在 bash（或任何其他 shell ...）中键入命令并按 enter 完全不同！如果您键入一个在 bash 中可以正常工作的命令，这并不意味着它可以在`Runtime.exec()`. 例如，shell 命令（不是外部程序）在`Runtime.exec()`.

你应该做的是使用`ProcessBuilder`.

实例化它，操作它`Map`表示环境选项（即，您在命令名称*之前*传递的东西，例如 cflags，以及您可能想要的任何其他内容），设置命令名称，一次给一个参数（参数不会在空格处拆分，因此您可以传递包含空格的路径，例如）等。您可以通过多种不同方式操作标准输入、标准输出和标准错误（例如：使用与 Java 进程使用的相同） ; 或获取 InputStream 和 OutputStream 的实例以向进程写入和读取；或通过管道传输它们），然后运行进程。

类似的东西：

```
final ProcessBuilder pb = new ProcessBuilder("make", "telosb", "install" blablablabla);
final Map<String, String> env = pb.environment();
env.put("CFLAGS", "....your options....");
pb.start(); // take the Process instance, and you will be able to read the output, wait for it to finish, get the exit code, etc 
```

# r - ggplot2：使用每 N 个图例键标签

> ID：15104242
> 
> 赞同：4
> 
> 时间：2013-02-27T04:29:34.713
> 
> 标签：r, ggplot2, legend

我有一个包含 72 个离散类别的 data.frame。当我按这些类别着色时，我会在图例中得到 72 个不同的键。我宁愿只使用第二个或第三个键。

知道我如何减少图例中的行数吗？

谢谢H。

下面给出了重现我的问题的代码。

```
t=seq(0,2*pi,length.out=10)
RR=rep(cos(t),72)+0.1*rnorm(720)
dim(RR)=c(10,72)
stuff=data.frame(alt,RR)
names(stuff)=c("altitude",
               paste(rep(15:20,each=12),
               rep(c("00","05",as.character(seq(from=10,to=55,by=5))),6),
               sep=":"))

bb=melt(stuff,id.vars=c(1))
names(bb)[2:3]=c("period","velocity")
ggplot(data=bb,aes(altitude,velocity))+geom_point(aes(color=period))+geom_smooth() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T06:09:12.967

您可以将您的`period`值视为`geom_point()`. 这将使颜色成为渐变（从 1 到 72 的值对应于级别数）。然后，`scale_colour_gradient()`您可以设置所需的休息次数并添加标签作为您的实际期间值。

```
ggplot(data=bb,aes(altitude,velocity))+
  geom_point(aes(color=as.numeric(period)))+
  geom_smooth()+
  scale_colour_gradient("Period",low="red", high="blue",
          breaks=c(seq(1,72,12),72),labels=unique(bb$period)[c(seq(1,72,12),72)]) 
```

![在此处输入图像描述](../Images/288ae3aa364a5e13e27fb2b2554231c4.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T07:00:39.267

在这里为离散颜色比例定制图例看起来很难！所以我提出了一个格子解决方案。您只需为 auto.key 列表提供正确的文本。

```
libarry(latticeExtra)
labels.time <- unique(bb$period)[rep(c(F,F,T),each=3)] ## recycling here to get third label
 g <- xyplot(velocity~altitude, data=bb,groups=period,
       auto.key=list(text=as.character(labels.time),
                     columns=length(labels.time)/3),
       par.settings = ggplot2like(),   axis = axis.grid,
       panel = function(x,y,...){
         panel.xyplot(x,y,...)
         panel.smoother(x,y,...)
       }) 
```

![在此处输入图像描述](../Images/570556750349774f9f0e02b5922a2600.png)

# jquery - jquery，在 before() 中的 load()

> ID：15104246
> 
> 赞同：0
> 
> 时间：2013-02-27T04:29:54.103
> 
> 标签：jquery, load

是否可以在 before 函数中执行 load 函数？我正在努力

```
$('#test').before(load('test.html')); 
```

但它不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T04:35:23.933

如果`.before()`有任何回调，你可以这样做，但它没有任何回调，所以你不能这样做。而是`$.ajax`在您想要的`DOM`.

或 请参阅下面的示例。

```
$('#test').load('test.html', data, function(response)
{ 
    $(this).before(response);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T04:31:23.513

jQuery 不能那样工作。

相反，您需要手动发送 AJAX 请求来获取内容，然后在内容`before()`到达时调用以将其插入 DOM。

# css - 我如何垂直居中对齐 div 与动态多行文本

> ID：15104250
> 
> 赞同：5
> 
> 时间：2013-02-27T04:30:10.057
> 
> 标签：css, html, vertical-alignment, multiline

下面是我正在使用的 CSS：

```
 .flip-container
           {
        -webkit-perspective: 1000;
        -moz-perspective: 1000;
        perspective: 1000;

    }

    .flip-container:hover .flipper, .flip-container.hover .flipper {
             -webkit-transform: rotateY(180deg);
             -moz-transform: rotateY(180deg);
              transform: rotateY(180deg);
    }

    .flip-container, .front, .back {
                  width: 150px;
                  height: 150px;

    }

    .flipper {
        -webkit-transition: 0.6s;
        -webkit-transform-style: preserve-3d;
        -moz-transition: 0.6s;
        -moz-transform-style: preserve-3d;
         transition: 0.6s;
         transform-style: preserve-3d;
         position: relative;
    }

    .front, .back {
        -webkit-backface-visibility: hidden;
        -moz-backface-visibility: hidden;
        backface-visibility: hidden;
        display: table-cell;
        vertical-align:middle;

        position: absolute;
        top: 0;
        left: 0;

    }

    .front {
         z-index: 2;
         text-align: center;
    }

    .back {

        -webkit-transform: rotateY(180deg);
        -moz-transform: rotateY(180deg);
        transform: rotateY(180deg);

    }

    .front .name {
        font-size: 2em;
        display: inline-block;
        background: rgba(33, 33, 33, 0.9);
        color: #f8f8f8;
        font-family: Courier;
        padding: 5px 10px;
        border-radius: 5px;
        bottom: 60px;
        left: 25%;
        position: absolute;
        text-shadow: 0.1em 0.1em 0.05em #333;

        -webkit-transform: rotate(-20deg);
        -moz-transform: rotate(-20deg);
        transform: rotate(-20deg);
    }

    .back-logo {
        position: absolute;
        top: 40px;
        left: 90px;
        width: 160px;
        height: 117px;
        background: url(logo.png) 0 0 no-repeat;

    }

    .back-title {
        font-weight: bold;
        color: #00304a;
        position: absolute;
        top: 180px;
        left: 0;
        right: 0;
        text-align: center;
        text-shadow: 0.1em 0.1em 0.05em #acd7e5;
        font-family: Courier;
        font-size: 2em;

    }

    .back p {
        position: absolute;
        bottom: 40px;
        left: 0;
        right: 0;
        text-align: center;
        padding: 0 20px;

    } 
```

我使用的 HTML 如下所示：

```
<div id="article"><div class="flip-container" ontouchstart="this.classList.toggle('.'hover'.');">
<div class="flipper">
 <div class="front">
   <!-- front content -->
  </div>
  <div class="back">
  <!-- back content -->
  <img src="" width="160" height="160" /> </div>
</div>
</div> 
</div> 
```

文章类的 CSS 是：

```
#article {
margin: 5px;
float: left; 
height: 150px;
width: 150px;} 
```

我无法使**FRONT** div 中心的 fext 垂直居中。它也将是动态的和多行的。有任何想法吗？

我尝试使用 'vertical-align:middle' 和 'display:table-cell' 但这没有帮助，或者我只是将它们应用于错误的 CSS 块。

代码在 jsFiddle 上：[这里](http://jsfiddle.net/uVSN6/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T05:09:03.643

您可以`display: table`用于父容器和`display: table-cell`子容器：

```
#article {
    display:table;
    height: 150px;
    width: 150px;
    float: left; 
    text-align: center;
}

.front {
    display: table-cell;
    vertical-align:middle; 
} 
```

**小提琴演示：http:** [//jsfiddle.net/uVSN6/1/](http://jsfiddle.net/uVSN6/1/)

# javascript - Javascript $(function() 不适用于 WordPress

> ID：15104251
> 
> 赞同：0
> 
> 时间：2013-02-27T04:30:11.383
> 
> 标签：javascript, jquery, wordpress

好的，我正在尝试在我的 wordpress 网站的 header.php 文件中添加以下 jquery：

```
<script type="text/javascript">
    $(function() {

        $( '#co-slider' ).circleslider()

        });     
    </script> 
```

这是直接从我下载的 html 源文件中复制的，我花了过去 3 个小时试图得出这个问题的结论，但是当谈到 wordpress 时，我是个新手。到目前为止，我所能收集到的只是这可能是因为没有冲突模式。我尝试在这里阅读没有冲突[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)以及我认为与另一个问题相关的以下说明，这是该[jquery 在 wordpress 中不起作用](https://stackoverflow.com/questions/3744348/jquery-not-working-in-wordpress/15103593#15103593)的链接。另外我认为这不是问题，但这就是我引用我的javascript的方式。

```
<script type="text/javascript" src="<?php bloginfo('template_url'); ?>/staff_new/js/jquery.circleslider.js"></script><script type="text/javascript" src="<?php bloginfo('template_url'); ?>/staff_new/js/jquery.circleslider.js"></script> 
```

我说我不认为这是问题，因为这也是我对其他事情的看法，而且它们工作得很好，但我也可能对我在说什么一无所知。我还在这里阅读了[http://codex.wordpress.org/Function_Reference/wp_enqueue_script](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)以供参考我应该使用 wp enqueue。但我也读到我目前拥有它的方式工作得很好。任何帮助将不胜感激，因为我真的很想让这个网站工作。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:32:16.107

这是因为默认情况下，wordpress 会将 jQuery 加载到`jQuery`命名空间，而不是`$`. 所以你可以`$`改为`jQuery`改为，或者做我通常做的事情，即在你的 jQuery 代码之前引用 jQuery：

`var $ = jQuery;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T04:33:53.520

你可以让一切都像

```
 jQuery(function($) {
    $( '#co-slider' ).circleslider()
    }); 
```

> 在 WordPress 中，$() 语法总是被其他脚本库使用，导致冲突问题，无法调用 jQuery 函数。你应该使用 jQuery() 代替......</p>

或者，您可以使用`noConflict()`……</p>

# php - 灵活的函数参数，如何熟练操作？

> ID：15104257
> 
> 赞同：0
> 
> 时间：2013-02-27T04:30:53.980
> 
> 标签：php

```
function query($query, $cacheType, $cacheDuration, $responseType)

$query = Query to be executed.
$cacheType = Memcached etc.
$cacheDuration = Duration of cache.
$responseType = MySQL response type. (e.g array, json etc) 
```

1.  我不想使用缓存，但希望是 JSON。我怎样才能传递这两个参数？

2.  如果我将 cacheType 设置为“Memcached”，如何确保将 $cacheDuration 设置为有效整数？

3.  如果我在查询函数中添加第五个参数（例如 $fifth），如何在不破坏整个网站使用的调用的情况下添加它？他们仍然提供 4 个参数，但查询更新为 5 个参数。

我主要在寻找“良好实践”的响应，否则我知道将 NULL 值传递给参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T04:44:05.370

```
$paramsArray = array();
$paramsArray['query'] = 'Query to be executed.';
$paramsArray['cacheType'] = 'Memcached etc.';
$paramsArray['cacheDuration'] = 'Duration of cache.';
$paramsArray['responseType'] = 'MySQL response type. (e.g array, json etc)';

echo query($paramsArray);

function query($paramsArray = array()) {

  $query = $paramsArray['query'];
  $cacheType = $paramsArray['cacheType'];
  $cacheDuration = $paramsArray['cacheDuration'];
  $responseType = $paramsArray['responseType'];

  // Your query operations with $query, $cacheType, $cacheDuration, $responseType
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T04:34:23.140

通过设置默认值使用这样的第五个参数，它不会破坏现有的函数调用。

```
function query($query, $cacheType, $cacheDuration, $responseType, $fifth = NULL) 
```

您也可以使用 4 个参数调用此函数

```
echo query($query, $cacheType, $cacheDuration, $responseType); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T04:39:55.917

> 我不想使用缓存，但希望是 JSON。我怎样才能传递这两个参数？

不明白。

> 如果我将 cacheType 设置为“Memcached”，如何确保将 $cacheDuration 设置为有效整数？

我可能也不明白这一点，但您可以使用 is_int() 函数进行验证。

> 如果我在查询函数中添加第五个参数（例如 $fifth），如何在不破坏整个网站使用的调用的情况下添加它？他们仍然提供 4 个参数，但查询更新为 5 个参数。我主要在寻找“良好实践”的响应，否则我知道将 NULL 值传递给参数。

我只是想告诉你你可以重载这个函数，但我刚刚发现它在 php 中不受支持（[PHP 函数重载](https://stackoverflow.com/questions/4697705/php-function-overloading)），所以你最好添加一个默认值为的第五个参数，`null`然后做什么时候你想要什么`$fifth != null`

# java - 在 JOptionPane 中更新消息

> ID：15104259
> 
> 赞同：3
> 
> 时间：2013-02-27T04:30:59.333
> 
> 标签：java, swing, jlabel, joptionpane

我正在尝试制作一个在 JOptionPane 中显示时间的数字时钟。我设法在消息对话框上显示时间。但是，我不知道如何让它在对话框中每秒更新时间。

这是我目前拥有的：

```
 Date now = Calendar.getInstance().getTime();
    DateFormat time = new SimpleDateFormat("hh:mm:ss a.");

    String s = time.format(now);

    JLabel label = new JLabel(s, JLabel.CENTER);
    label.setFont(new Font("DigifaceWide Regular", Font.PLAIN, 20));

    Toolkit.getDefaultToolkit().beep();

    int choice = JOptionPane.showConfirmDialog(null, label, "Alarm Clock", JOptionPane.YES_NO_OPTION, JOptionPane.PLAIN_MESSAGE); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T04:36:39.720

这太可怕了，它更容易工作，我认为它应该......

基本上，您需要某种“ticker”来更新标签的文本......

```
public class OptionClock {

    public static void main(String[] args) {
        new OptionClock();
    }

    public OptionClock() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                Date now = Calendar.getInstance().getTime();
                final DateFormat time = new SimpleDateFormat("hh:mm:ss a.");

                String s = time.format(now);

                final JLabel label = new JLabel(s, JLabel.CENTER);
                label.setFont(new Font("DigifaceWide Regular", Font.PLAIN, 20));

                Timer t = new Timer(500, new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        Date now = Calendar.getInstance().getTime();
                        label.setText(time.format(now));
                    }
                });
                t.setRepeats(true);
                t.start();

                int choice = JOptionPane.showConfirmDialog(null, label, "Alarm Clock", JOptionPane.YES_NO_OPTION, JOptionPane.PLAIN_MESSAGE);

                t.stop();
            }
        });
    }
} 
```

因为我们不想违反 Swing 的单线程规则，所以最简单的解决方案是使用`javax.swing.Timer`每 500 毫秒左右打勾的 a （捕捉边缘情况）。

通过虚拟设置标签的文本，它会自动发布重绘请求，这让我们的生活变得简单......

# activemq - ExchangePattern.InOnly 对 mq 端点的影响

> ID：15104260
> 
> 赞同：1
> 
> 时间：2013-02-27T04:31:04.600
> 
> 标签：activemq, apache-camel

我的路线定义为

```
from("jetty:http://0.0.0.0:xxxx/abc").to("activemq:queue:queue1").setExchangePattern(ExchangePattern.InOnly); 
```

我了解此路由将消息发送到代理，并且不会等待消息使用者使用它。我想了解 ExchangePattern.InOnly 对代理接受消息的影响。我在代理上启用了持久性。上面的路由是否保证在交换完成之前持久化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T07:18:29.733

您需要在发送到 JMS 队列之前设置 MEP。另一种方法是告诉在发送到队列时只使用 InOnly。所以你可以做

```
from("jetty:http://0.0.0.0:xxxx/abc")
  .setExchangePattern(ExchangePattern.InOnly)
  .to("activemq:queue:queue1"); 
```

或者

```
from("jetty:http://0.0.0.0:xxxx/abc")
  .to(ExchangePattern.InOnly, "activemq:queue:queue1"); 
```

您可以在 Camel 网站上查看有关事件和请求-回复消息 EIP 的更多详细信息

*   [http://camel.apache.org/event-message.html](http://camel.apache.org/event-message.html)
*   [http://camel.apache.org/request-reply.html](http://camel.apache.org/request-reply.html)

是的，如果您在代理上启用了持久性，那么它将在接收到消息时将消息存储在持久性存储中，并且在代理向发送方（在本例中为 Camel）发回 ACK 之前。Camel 发送到 broker 后会继续路由，到达路由的终点，并返回响应给 Jetty。您可以考虑设置一些空响应来使用，例如：

```
from("jetty:http://0.0.0.0:xxxx/abc")
  .to(ExchangePattern.InOnly, "activemq:queue:queue1")
  .transform().constant("OK"); 
```

# java - ArrayList的HashMap导致nullpointerexception

> ID：15104272
> 
> 赞同：0
> 
> 时间：2013-02-27T04:32:17.420
> 
> 标签：java, arraylist, nullpointerexception, hashmap

我有一个 ArrayLists 的 HashMap 值，但是当我添加 ArrayLists 时 HashMap 保持为空，然后当我尝试 get() ArrayList 时抛出 NullPointerException。很迷茫。

```
Random rand = new Random();
HashMap<String,ArrayList<Integer>> hands = new HashMap<String,ArrayList<Integer>>();
HashMap<Integer, Boolean> deck = new HashMap<Integer, Boolean>();

for(int x=0;x<4;x++){
    for(int y=0;y<4;y++){
    hands.put(x+SUITS[x], new ArrayList<Integer>());
    }
}       
    for(int x=0;x<4;x++){
        for(int y=0;y<13;y++){
            int randCard = rand.nextInt(52)+1;
            if(!deck.containsKey(randCard)){
                deck.put(randCard, true);

                hands.get(x+cardSuit(randCard)).add(randCard);

            }else y--;
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T04:37:02.137

您正在使用如下所示的键将值放入地图中：

```
someInt + "" 
```

您正在使用如下所示的键从地图中获取值：

```
someInt + cardSuit(randCard) 
```

除非 cardSuit 总是返回一个空字符串，否则它们将是不同的键。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T04:35:10.120

这里 cardSuit(randCard) 正在返回地图中没有的东西。

你把 `x+""` 钥匙当作钥匙。

但是，当您检索时，您正在使用它：

`x+"something"`

# google-app-engine - 使用新的 Google+ 登录的 Appengine Cloud Endpoints

> ID：15104274
> 
> 赞同：6
> 
> 时间：2013-02-27T04:32:28.933
> 
> 标签：google-app-engine, oauth-2.0, google-plus, google-cloud-endpoints

新的 google+ 登录 API 如何适合对 Cloud Endpoints 进行经过身份验证的调用。要将 OAuth 与端点一起使用，应用程序必须至少请求“ [https://www.googleapis.com/auth/userinfo.email ”范围的权限。](https://www.googleapis.com/auth/userinfo.email)使用 Google+ 登录按钮会授予此范围吗？还是我将不得不向我的用户请求另一个许可？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T10:46:09.390

userinfo.email 范围是 plus.login 范围的补充。事实上，plus.login 明确***不***授予对用户电子邮件地址的访问权限。

尽管您会要求“其他权限”，但这一切都是在一个 OAuth 屏幕中同时完成的，因此所有权限都会一次列出。用户不会看到一屏又一屏的权限，他们的电子邮件请求将与 plus.login 范围信息的请求一起列出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T17:44:59.077

Google+ 登录按钮有一个“范围”属性，您可以在该属性中列出您想要请求的其他范围。您可以在那里列出 userinfo.email 范围以及任何特定于云的范围。

如果您需要[检索用户的电子邮件地址](https://developers.google.com/+/web/people)，您可以在该属性中添加 userinfo.email 范围，然后使用适当的 REST 端点来检索地址。

此外，要在移动应用程序中检索电子邮件地址，请参阅：

*   [安卓](https://developers.google.com/+/mobile/android/people#retrieve_an_authenticated_users_email_address)
*   [IOS](https://developers.google.com/+/mobile/ios/people#retrieve_an_authenticated_users_email_address)。

# android - 在 XML 中将 ListView 项设置为屏幕宽度的一半

> ID：15104277
> 
> 赞同：1
> 
> 时间：2013-02-27T04:32:40.403
> 
> 标签：android, xml, android-layout, android-listview, listitem

在 XML 中，我有一个自定义列表项视图，我在我的适配器的 getView() 方法中为我的 ListView 扩展它。在 XML 中，我怎样才能让我的自定义 ListView 项目总是屏幕宽度的一半（也许也添加一些填充）？我认为添加另一个小部件不会像我看到的建议解决方案那样工作，因为这是一个列表项。

编辑：

澄清一下，我不认为这是我的 xml 代码的问题，但这就是我的意思。如果我有这样的自定义布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:weightSum="1.0"
    android:paddingTop="10dp" 
    >

    <ImageView
        android:id="@+id/item_image"
        android:layout_width="218dp"
        android:layout_height="212dp"
        android:layout_gravity="right"
        android:adjustViewBounds="true"

        android:scaleType="fitCenter"
        android:src="@drawable/..." />

</LinearLayout> 
```

我有一个硬编码的宽度（我认为这不是最佳做法），所以我想让该宽度为屏幕总宽度的 1/2。显然，此 XML 已大大简化，但我希望它能解决问题。

如果我遗漏了一些相当明显的东西，我深表歉意。

**编辑**：

添加另一个具有相同功能的布局可以解决此问题。

**编辑2**：没关系。我注意到以下行为：如果我添加另一个布局，它会膨胀*所有内容*，因此我会为每个列表项获得一半的空白空间宽度。我必须将最顶部的布局设置为我猜的屏幕宽度的一半。我该如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T04:40:29.710

主要的.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/LinearLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
tools:context=".MainActivity" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:orientation="vertical" >

        <ListView
            android:id="@+id/listView1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >
        </ListView>
    </LinearLayout>

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:orientation="vertical" >
    </LinearLayout>
</LinearLayout> 
```

项目列表.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<LinearLayout
    android:id="@+id/root"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="#000000"
    android:gravity="center"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Large Text"
        android:textAppearance="?android:attr/textAppearanceLarge" />
</LinearLayout> 
```

MainActivity.java

```
public class MainActivity extends Activity {

 static final String TAG_NAME = "name";
 static final String TAG_ID = "id";
 static String selected = "";

ListView listView;

HashMap<String, String> map;
ArrayList<HashMap<String,String>> myList;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    myList = new ArrayList<HashMap<String,String>>();       
    listView = (ListView) findViewById(R.id.listView1);
    fillListView();
}

private void fillListView() {

    myList.clear();

    map = new HashMap<String, String>();
    map.put(TAG_ID,"1");
    map.put(TAG_NAME, "Name1");
    myList.add(map);

    map = new HashMap<String, String>();
    map.put(TAG_ID,"2");
    map.put(TAG_NAME, "Name2");
    myList.add(map);

    map = new HashMap<String, String>();
    map.put(TAG_ID,"3");
    map.put(TAG_NAME, "Name3");
    myList.add(map);

    map = new HashMap<String, String>();
    map.put(TAG_ID,"4");
    map.put(TAG_NAME, "Name4");
    myList.add(map);

    listView.setAdapter(new MyListAdapter(this, R.layout.itemlist, myList));

}
private class MyListAdapter extends BaseAdapter 
{

    private List<HashMap<String,String>> List;
    private LayoutInflater mInflater;
    private int layoutresource;

    public MyListAdapter(Context context,int resource,List<HashMap<String, String>> myList) {
        List = myList;
        mInflater = LayoutInflater.from(context);
        layoutresource = resource;
    }

    @Override
    public int getCount() {
        return List.size();
    }

    @Override
    public Object getItem(int position) {
        return List.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {

        if (convertView == null) {
            convertView = mInflater.inflate(layoutresource,null);
        }    

         final View rootView = convertView.findViewById(R.id.root);

        ImageView imageView = (ImageView) convertView.findViewById(R.id.imageView1);
        final TextView name = (TextView) convertView.findViewById(R.id.textView1);

        imageView.setImageDrawable(getResources().getDrawable(R.drawable.profile));
        name.setTextColor(Color.parseColor("#ffffff"));
        name.setText(List.get(position).get(TAG_NAME));

        if ( List.get(position).get(TAG_ID).equals(selected))
            name.setTextColor(Color.parseColor("#ff0000"));
        else
            name.setTextColor(Color.parseColor("#ffffff"));

        rootView.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                selected = List.get(position).get(TAG_ID);
                fillListView();
            }
        });

        name.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                rootView.performClick();
            }
        });

        imageView.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                rootView.performClick();
            }
        });

        return convertView;
    }
} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T05:11:06.880

简化

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@+id/LinearLayout1"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          android:orientation="horizontal"
          android:paddingTop="10dp">
<ImageView
        android:id="@+id/item_image"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="212dp"
        android:layout_gravity="right"
        android:adjustViewBounds="true"
        android:scaleType="fitCenter"
        android:background="#FFFFFF"
        android:src="@drawable/ic_launcher" />
<View android:layout_height="0dp"
      android:layout_width="0dp"
      android:layout_weight="1"/>
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T04:54:54.850

您的列表项中只有一个视图（图像视图）。所以您应该将列表视图的宽度减半而不是列表项。但是如果您真的想将列表项的宽度减半，请尝试以下代码，希望对您有所帮助.

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
    android:weightSum="10"
    android:gravity="center"
    android:paddingTop="10dp" 
    >

    <ImageView
        android:id="@+id/item_image"
        android:layout_width="0dp"
        android:layout_weight="5"
        android:layout_height="212dp"
        android:adjustViewBounds="true"

        android:scaleType="fitCenter"
        android:src="@drawable/..." />

</LinearLayout> 
```

# java - 获得拥有 1000 个关注者的 Twitter 用户

> ID：15104280
> 
> 赞同：1
> 
> 时间：2013-02-27T04:32:53.770
> 
> 标签：java, twitter, twitter4j

我是一名 java 开发人员，我使用过 twitter api

twitter4j-2.2.2.jar

虽然我可以找到我的追随者的数量，但我想使用公共 api 找到拥有超过 1000 个追随者的用户（不一定追随/追随我）和他们的追随者之一至少有 100 个追随者

我不确定我是否可以使用一些 REST 查询来做到这一点，或者什么是获取数据的最佳方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T06:14:49.427

如果您有用户名（网名）并想找出其中哪些拥有超过 1000 个关注者，那么您可以执行以下操作：

```
 Twitter twitter = new TwitterFactory().getInstance();
        User user = twitter.showUser("marissamayer");
        if (user.getStatus() != null) {
            int followers = user.getFollowersCount();
            if (followers>=1000) {
                System.out.println("User "+ user.getScreenName()+" Followers " + user.getFollowersCount());
            }
        } else {
            // the user is protected
            System.out.println("@" + user.getScreenName());
        } 
```

否则，您可以使用 Twitter 搜索 API 搜索关键字并获取匹配的用户名，然后使用上面的代码找出关注者的数量：

```
 Twitter twitter = new TwitterFactory().getInstance();
        int page = 1;
        ResponseList<User> users;
        do {
            users = twitter.searchUsers("search_keyword", page);
            for (User user : users) {
                if (user.getStatus() != null && user.getFollowersCount()>=1000) {
                    System.out.println("@" + user.getScreenName()+" Followers: "+user.getFollowersCount());
                } else {
                    // the user is protected
                    System.out.println("@" + user.getScreenName());
                }
            }
            page++;
        } while (users.size() != 0 && page < 50); 
```

# matlab - Kinect 麦克风阵列顺序

> ID：15104282
> 
> 赞同：0
> 
> 时间：2013-02-27T04:33:00.867
> 
> 标签：matlab

我已经开始使用 kinect 麦克风。我可以使用 Matlab 代码获取 wav 文件：

```
fname='out.wav';
f=fopen(fname,'r+');
fseek(f,20,0);
fwrite(f,[3 0]);
fclose(f);
y=wavread(fname);
wavwrite(y(:,1),16000,'out_hello_1.wav');
wavwrite(y(:,2),16000,'out_hello_2.wav');
wavwrite(y(:,3),16000,'out_hello_3.wav');
wavwrite(y(:,4),16000,'out_hello_4.wav');

[wave,fs]=wavread('out_hello_1.wav'); % read file into memory 
[wave2,fs2]=wavread('out_hello_2.wav');
[wave3,fs3]=wavread('out_hello_3.wav');
[wave4,fs4]=wavread('out_hello_4.wav'); 
```

我的问题是在这里我录制`out.wav`并制作了`out_hello_1.wav`和`2`，`3`等等`4`。

但是我怎么知道哪个 wav( `out_hello_1`) 文件是从哪个（麦克风）录制的？

如果`"out_hello_1, out_hello_2,...."`此代码中有顺序，那么真实设备中 kinect 麦克风的顺序是什么？

我无法上传图片然后告诉我右侧麦克风是 1、2、3、4 还是左侧

所以右侧存在kinect的闪烁led...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T16:15:17.537

如果您正在获取原始音频（听起来像），这相对容易。直接在每个麦克风端口上吹气或单独运行端口（为每个麦克风打开）并说明麦克风编号。在您的录音中，您吹过或摩擦过的麦克风将具有明显更大的信号电平。摩擦和吹气充当被指向动作的麦克风拾取的近距离音频源，而其他麦克风应该拾取的很少。

另一方面，如果您正在接收经过处理的音频（听起来不像，因为它可能是单声道或立体声流，而不是 4 个通道），那么您将在所有流中获得复制的音频。

# python - 删除python中的边数

> ID：15104293
> 
> 赞同：0
> 
> 时间：2013-02-27T04:34:13.583
> 
> 标签：python

我想知道是否有pythonic方法可以做到这一点。

假设我列出了字典：

```
{'source': 338, 'target': 343, 'value': 0.667693}
{'source': 339, 'target': 342, 'value': 0.628195}
{'source': 340, 'target': 346, 'value': 0.529861}
{'source': 340, 'target': 342, 'value': 0.470139}
{'source': 341, 'target': 342, 'value': 0.762871}
{'source': 342, 'target': 349, 'value': 0.664869}
{'source': 343, 'target': 347, 'value': 0.513025}
{'source': 343, 'target': 344, 'value': 0.486975}
{'source': 344, 'target': 347, 'value': 0.536706}
{'source': 344, 'target': 349, 'value': 0.463294}
{'source': 345, 'target': 349, 'value': 0.546326}
{'source': 345, 'target': 346, 'value': 0.453674} 
```

基本上它是一个无向图。但它非常混乱。我想清理一下。

所以，我想留下前 2 个节点，它们的边缘最多，就像原始格式一样。

对于其余的节点......最多附有5条边。

我只是在维护一个带有计数的字典...反向排序它..

然后保存前 2 名并再次通过列表.. 并删除边缘但检查前 2 名..

有没有更清洁的方法来做到这一点。

我的越野车.. 凌乱的示例代码：

```
import json
from pprint import pprint
import operator
json_data=open('topics350_1.json')

data = json.load(json_data)
edges = data["links"]
node_count_dict = {}
super_nodes = 3
min_nodes = 5

for edge in edges:
    keys = [edge['source'], edge['target']]
    for key in keys:
        if key in node_count_dict:
            node_count_dict[key] +=1
        else:
            node_count_dict[key] = 1

sorted_nodes = sorted(node_count_dict.iteritems(), key=operator.itemgetter(1),reverse = True)           
#print sorted_nodes 
top_nodes = sorted_nodes[super_nodes]
final_node_count = {}
for key in sorted_nodes:
    final_node_count[key[0]] = 0
print final_node_count
link_list = []
for edge in edges:
    keys = [edge['source'], edge['target']]
    for key in keys:
        if key not in top_nodes:
            if final_node_count[key] < min_nodes:
                link_list.append(edge)
print link_list

#print data['links'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T05:31:28.577

我强烈建议您使用[networkx](http://networkx.github.com/) 来处理 Graph。

```
import networkx as nx
G = nx.Graph()
# build your Graph
# G.add_node(), G.add_nodes_from(), G.add_edge(), G.add_edges_from()...

nodes = [(g, G.degree(g)) for g in G.nodes()]
# nodes like this: [(338, 4), (340, 7)...]
# item one is the node, and item two is the edges connected with this node

nodes.sort(key=lambda n: n[1], reverse=True)

# you wanna delete the third node and other nodes which edges at most 5, right?
G.remove_node(nodes[2][1])
for n, e in nodes:
    if e > 5:
        G.remove_node(n) 
```

但是，上面只是您的代码，我将使其如下所示：

```
from collections import Counter

sources = []
for edge in edges:
    source.append(edge['source'])
    source.append(edge['target'])

sources_count = Counter(sources)
sources_count = sorted(source_count.items(), key=lambda s: s[1], reverse=True)

sources_count.pop(2)
valid_nodes = filter(lambda s: s[1] <= 5, sources_count)

link_list = filter(
    lambda e: e['source'] not in valid_nodes and e['target'] not in valid_nodes, 
    edges
) 
```

# string - 动态合并重复子串的数据挖掘算法？

> ID：15104295
> 
> 赞同：1
> 
> 时间：2013-02-27T04:34:14.940
> 
> 标签：string, artificial-intelligence, substring, data-mining, longest-substring

我正在尝试构建一个人工智能单元。我计划首先将感官输入（“观察”）收集到一个短期工作记忆列表中，不断形成在这个列表中找到的模式（“想法”），然后将这些想法提交到一个长期存储记忆中它们达到了相当大的规模，可能是七个连锁观察。对于任何哲学人来说，类似于洛克的*人类理解论文*，但这不会是*白板*。需要有一个编码的底层结构。

因此，我的问题是：

是否有/在哪里有一个很好的算法来动态合并或“模式化”这个不断增长的观察字符串的最大子字符串？例如：如果到目前为止给了我 ABCDABCABC，我想要一个 ABC 想法，D 和另外两个 ABC 想法；然后，如果观察到另一个 D 并将其添加到短期记忆中，我想要一个 ABCD 令牌、一个 ABC 令牌和另一个 ABCD 令牌。我不想使用 Shortest Common Substring，因为我需要在添加任意数量的字符后重新运行它。我想我更喜欢一些易于搜索/可修改的树结构。

这看起来像一个足够体面的解决方案吗？ [http://www.cs.ucsb.edu/~foschini/files/licenza_spec_thesis.pdf](http://www.cs.ucsb.edu/~foschini/files/licenza_spec_thesis.pdf)。如果不出意外，我认为其他数据挖掘者可能会喜欢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:26:56.597

第一步：标记器。定义您认为的 {A,B,C,D} 和不考虑的内容。

*   您*至少*需要一个额外的令牌来存放垃圾/杂项（好消息是，如果出现此令牌，随后的状态机将始终重置为其起始状态）
*   您可能希望也可能不希望保留空格（这将再次导致额外的令牌，以及稍后在 DFA 或 NFA 识别器中的许多额外状态）
*   也许您需要某种等价类：例如，将所有数字字符串包装为一种标记类型；折叠小写/大写；接受某种程度的拼写错误（很难！）
*   对于行首/行尾等，您可能需要特殊的虚拟令牌类型。
*   *您必须对误报*数量与允许的*误报*数量做出一些选择。
*   如果涉及文本，请确保所有源都采用相同的规范编码，或对它们进行预处理以将它们带入相同的编码。

构建标记器是调查您的语料库的绝佳方式：如果它是来自外部世界的真实数据，您会惊讶于您在开始时甚至不知道它们存在的时髦案例！

考虑到正确的标记化，第二步（识别器）可能会容易得多。对于正常的确定性状态机（具有要识别的预定义序列），您可以使用 Dragon Book 或 Crochemore 中的标准算法。

对于*模糊*自学习匹配器，我将从构建马尔可夫链或 -trees 开始。（也许贝叶斯树，我不是这方面的专家）。我认为从标准状态机开始并为节点和边添加一些权重和计数并不难。并动态地向图中添加边。或删除它们。（这是我希望开始变得艰难的地方）

战略决策：您需要数据库吗？如果你的模型适合核心，你不会也不应该。（数据库不打算*获取一行并处理它*，然后存储它然后*获取下一行*，等等）如果您的数据不适合核心，那么您将遇到的不仅仅是数据建模问题。顺便说一句：我知道的所有 DNA 组装器/匹配器都*在核心*和平面文件中工作。（可能有数据库备份，便于管理和检查）

# spring - Spring with SAML 用于 http-artifact 绑定

> ID：15104300
> 
> 赞同：2
> 
> 时间：2013-02-27T04:34:38.330
> 
> 标签：spring, binding, frameworks, saml, opensaml

一段时间以来，我一直在尝试找到 SAML http-artifact 绑定的解决方案 :(。我正在将 OpenSAML 与 spring 一起使用。我能够让它与 http-post 一起使用。我的要求是 http-artifact。即. 获得工件后，我需要通过后端 SAOP 调用获取断言。您能给我一些示例配置代码吗？ . 另外请告诉我是否需要使其与 SAML1 和 SAML 2 一起工作. 非常感谢您的帮助。在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T07:32:28.130

可以使用 ArtifactResolve 类解析工件。这被发送到工件解析服务并返回断言。这是我编写的 OpenSAML 示例。

[使用 opensaml 解决工件](https://blog.samlsecurity.com/2011/02/resolve-artifact-with-opensaml.html)

# file-upload - Jmeter：如何通过 PUT 方法实现上传 1GB 流文件并避免“内存不足”错误

> ID：15104303
> 
> 赞同：1
> 
> 时间：2013-02-27T04:34:54.667
> 
> 标签：file-upload, upload, jmeter

最近，我接手了一个性能测试。它的测试场景是上传和下载大小为1GB的流文件。曾使用 Jmeter HTTP Sampler (PUT Method) 发送文件，但总是遇到 'OUT OF MEMORY' 错误。我试图调整到 Jmeter HEAP 大小以适应适当的位置，但这不是最好的方法。

有没有人想出解决方法（分段上传）或上传大文件的解决方案？

# java - 将数组的名称设置为字符串变量的值

> ID：15104310
> 
> 赞同：3
> 
> 时间：2013-02-27T04:35:56.677
> 
> 标签：java, arrays, variables, for-loop

我正在为我正在编写的程序做我在下面解释的事情或类似的事情。在我的程序的这一部分之前，我有一个数组，其中包含正在玩游戏的玩家的姓名。

我想创建一个 for 循环，它将根据现有玩家的数量初始化一个新数组，并将该新数组命名为该玩家的名称。

所以你有一个更好的主意：

```
for (int i = 0; i < nPlayers; i++) {
    String name = playerNames[i];
    int[] name = new int[nCategories];  
} 
```

所以你可以看到我试图根据我存储在不同数组中的东西的名称来分配一个新数组。有没有办法做到这一点？或类似的东西，我认为这可能会更好/更有效？

这是一个Java程序顺便说一句。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T04:38:01.067

没有真正干净的方法来创建具有动态名称的变量，就像您尝试做的那样。也许一个不错的选择是拥有一个地图，并在地图中为每个玩家创建一个新的键，玩家的名字作为键，值作为一个新的 Int 数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T04:45:19.377

我想首先指出 Ian 提出了一个有效的观点。如果您希望能够使用字符串动态检索变量，则映射是一个很好的选择。创建一个使用 String 作为键并使用 int[] 数组作为值的映射。然后，您可以使用您的 String 键将 int[] 从地图中调用。

```
Map<String, int[]> players = new Map<String, int[]>();
String myname = "myname";
int[] myInts = {0,1,2};
players.put(myname, myInts);
int[] intArrayForPlayer = players.get(myname); 
```

但是，使用 Java 的主要优点是它是一种面向对象的语言。您可能需要强烈考虑使用类来实现您的目标。您可以使用类变量创建一个名为 Players 的类，以保存每个 Player 所需的所有数据。然后您可以创建`Player myPlayer = new Player();`对象并使用它们来保存您的所有信息。

您可以使用数组或 ArrayList 来保存所有播放器对象。

# php - 添加php扩展后apache没有启动

> ID：15104311
> 
> 赞同：1
> 
> 时间：2013-02-27T04:35:56.863
> 
> 标签：php, apache

UGH - windows server 2003 apache 2.2 (httpd-2.2.22-win32-x86-openssl-0.9.8t) PHP 5.2 (php-5.2.17-Win32-VC6-x86)

几个月来一切都很好 - 我最近实现了一个 mPDF 实现......（在笔记本电脑上本地开发）当我将它上传到我的服务器时 - 我收到一个错误，说我需要 PHP_MBSTRING

所以我在我的服务器上重新启动了我的安装程序 - 并添加了这个扩展...... apache 不会重新启动。

如果我从我的 http.conf 中注释掉这些行 - 然后它开始......

```
PHPIniDir "C:/PHP/"
LoadModule php5_module "C:/PHP/php5apache2_2.dll" 
```

是的 - php5apache2_2.dll 确实存在 - 并且在这个目录中......我尝试注释掉这个扩展 PHP_MBSTRING ，甚至将它从 EXT 文件夹中删除......

我已经尝试完全卸载并重新安装......我已经尝试升级到 PHP 5.3（需要安装 C++ redist）和 PHP 5.4——尽管这些都没有帮助。

转转！！我不知所措-

像这样的错误日志：

```
Syntax error on line 520 of C:/Program Files/Apache Software Foundation/Apache2.2/conf/httpd.conf:
Invalid command 'PHPIniDir', perhaps misspelled or defined by a module not included in the server configuration
[Tue Feb 26 23:33:19 2013] [notice] Child 1492: Released the start mutex
[Tue Feb 26 23:33:20 2013] [notice] Child 1492: All worker threads have exited.
[Tue Feb 26 23:33:20 2013] [notice] Child 1492: Child process is exiting 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:46:03.467

一方面，正斜杠是正确的。也就是说...

```
PHPIniDir "c:/php"
LoadModule php5_module "c:/php/php5apache2_2.dll" 
```

php 目录在您的路径中吗？

另外，请确保您已添加

```
AddType application/x-httpd-php .php 
```

就在 conf 文件之前

PHP 是否曾经在这个系统上成功运行过，您是否能够返回到工作配置？如果是这样，您应该能够从那里添加多字节字符串模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T05:57:30.720

以下是与该问题相关的解决方案列表：

*   [在 Windows 7 下 PHPIniDir 坏了？](https://stackoverflow.com/questions/1912574/phpinidir-broken-under-windows-7)

并且

*   [Apache 是否支持 Windows 上的 PHPIniDir？](https://stackoverflow.com/questions/2816704/does-apache-support-phpinidir-on-windows)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-29T06:37:19.440

在 Fedora 25 linux 上，您必须在使用 PHPIniDir 属性之前加载模块，因为模块提供了读取属性的能力......但是......

使用 httpd 2.4.x (apache) 和 php 5.6.30 当 LoadModule php5_module ... 和 PHPIniDir "/etc" 位于 /etc/httpd/conf.modules.d 下的同一个文件中时，服务器将无法启动 - 这很难过我有一段时间，因为 LoadModule 指令确实出现在 PHPIniDir 属性之前......去图......

但是，当 LoadModule 命令位于 /etc/httpd/conf 文件夹中的 httpd.conf 并且 PHPIniDir 属性设置如上时，一切正常并且 phpinfo() 确认加载的 ini 文件是“/etc/php.ini "

总而言之，这对我有用：在 httpd.conf

LoadModule php5_module 模块/libphp5.so

在 conf.modules.d/10-php5.conf 文件末尾

PHPIniDir "/etc"

---然后当然重新启动apache“systemctl restart httpd”并在您放置的任何网页上检查phpinfo（）..

# javascript - 在 javascript 中的 onclick 事件处理程序上切换布尔变量

> ID：15104312
> 
> 赞同：0
> 
> 时间：2013-02-27T04:36:07.363
> 
> 标签：javascript, events, onclick, boolean, handler

有没有办法在javascript中的onclick事件处理程序上切换布尔值？我以为我的脚本会起作用，但我想不会。

HTML（不是我的完整脚本）

```
<form action = "event_add.php" method = "post">
  <label>Details</label>
  <div class = "details">
    <span class = "editImg" onclick = "javascript:updateTextArea('<strong>','</strong>',bold)"><strong>B</strong></span>
    <span class = "editImg" onclick = "javascript:updateTextArea('<em>','</em>',ital)"><em>I</em></span>
    <textarea id = "txtAreaDetails" rows = "15" cols = "40"></textarea>
  </div>
</form> 
```

Javascript：

```
var bold = false;
var ital = false;

function updateTextArea(beg_tag,end_tag,variable){
  if(variable == false){
    variable = true;
    var output = beg_tag;
  }else{
    variable = false;
    var output = end_tag;
  }
  var text = document.getElementById("txtAreaDetails").value;
  document.getElementById("txtAreaDetails").value = text + output;
} 
```

我想要做的是当用户点击“B”时，textarea 字段将为其添加一个强标签。然后如果用户再次单击它，它将显示结束标记 /strong 与 I 相同，但带有 em 和 /em。无论我点击多少次，我得到的结果总是添加 beg_tag 。

我对javascript不太熟悉，我的大部分编程都是用PHP进行的，所以我不熟悉是否有任何内置函数可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:48:00.317

这应该有效。不要为每个标签名称创建一个单独的变量，而是为每个标签创建一个带有索引的对象。然后，您可以通过传入 updateTextArea 的名称访问真/假值。此外，您希望在传入粗体和斜体时将它们括在引号中，您的 html 不会这样做。

```
<form action = "event_add.php" method = "post">
  <label>Details</label>
  <div class = "details">
    <span class = "editImg" onclick = "updateTextArea('<strong>','</strong>','bold')"><strong>B</strong></span>
    <span class = "editImg" onclick = "updateTextArea('<em>','</em>','ital')"><em>I</em></span>
    <textarea id = "txtAreaDetails" rows = "15" cols = "40"></textarea>
  </div>
</form>

<script>

    var tagNames = {"bold": false, "ital": false};

    function updateTextArea(beg_tag,end_tag,variable){
      if(tagNames[variable] == false){
        tagNames[variable] = true;
        var output = beg_tag;
      }else{
        tagNames[variable] = false;
        var output = end_tag;
      }
      var text = document.getElementById("txtAreaDetails").value;
      document.getElementById("txtAreaDetails").value = text + output;
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T04:55:30.023

你需要在这里更改你的代码因为在 javascript 中没有什么比通过引用传递

```
<form action = "event_add.php" method = "post">
        <label>Details</label>
        <div class = "details">
            <span class = "editImg" onclick = "javascript:updateTextArea('<strong>','</strong>','bold')"><strong>B</strong></span>
            <span class = "editImg" onclick = "javascript:updateTextArea('<em>','</em>','ital')"><em>I</em></span>
        </div>
        <textarea id='txtAreaDetails'>

        </textarea>

    </form>

<script type="text/javascript">
        var bold = false;
        var ital = false;

        function updateTextArea(beg_tag,end_tag,variable){
            var output = "";
            switch(variable)
            {
                case 'bold':
                    {
                        if(bold == false)
                        {
                            output = beg_tag;
                        }
                        else
                        {
                            output = end_tag;
                        }
                        bold = !bold;
                        break;
                    }
                case 'ital':
                    {
                        if(ital == false)
                        {
                            output = beg_tag;
                        }
                        else
                        {
                            output = end_tag;
                        }
                        ital = !ital;
                        break;
                    }
            }

            var text = document.getElementById("txtAreaDetails").value;
            document.getElementById("txtAreaDetails").value = text + output;
        }
    </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T04:55:55.350

这可以帮助你..

```
 function updateTextArea(beg_tag,end_tag,variable){
  var element = document.getElementById("editImg"); 
  if(variable == 0){
    element.setAttribute("onclick", "javascript:updateTextArea('<strong>','</strong>',1)"); 
    var output = beg_tag;
  }else{
  element.setAttribute("onclick", "javascript:updateTextArea('<strong>','</strong>',0)"); 
    var output = end_tag;
  }
  var text = document.getElementById("txtAreaDetails").value;
  document.getElementById("txtAreaDetails").value = text + output;
}

 </script>
</head>
<body>
<form action = "event_add.php" method = "post">
  <label>Details</label>
  <div class = "details">
    <span id = "editImg" onclick = "javascript:updateTextArea('<strong>','</strong>',0)"><strong>B</strong></span>
    <span id = "editImg" onclick = "javascript:updateTextArea('<em>','</em>',ital)">    <em>I</em></span>
    <textarea id = "txtAreaDetails" rows = "15" cols = "40"></textarea>
  </div>
</form>
</body></html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-04T12:43:21.220

如果你（或任何人）只想切换一个布尔值，你可以像这个简短的函数那样做：

```
function toggle(boo) {
  return boo == true ? false : true;
} 
```

定义布尔值以在单击时切换：

```
var test = true; 
```

使用一个简单的按钮来切换（例如）：

```
 <input type="button" value="Toggle me!" onclick="test=toggle(test);"> 
```

在这里查看实际操作：[jsfiddle](https://jsfiddle.net/Quakfrosch/vc6m4x1b/)

# ruby-on-rails - Rails actionmailer 打开主机电子邮件应用程序

> ID：15104313
> 
> 赞同：2
> 
> 时间：2013-02-27T04:36:09.947
> 
> 标签：ruby-on-rails, actionmailer

通过一个链接，我想打开用户的默认邮件应用程序，附加一个附件，并且“收件人”字段为空，以及主题和正文中的一些预填充文本。

使用 ActionMailer，我可以让它从我的 gmail 帐户发送，但它不会打开默认的电子邮件应用程序。这是我在 ActionMailer::Base.smtp_settings 中的设置：

```
ActionMailer::Base.smtp_settings = {

    :address              => "smtp.gmail.com",
    :port                 => 587,
    :domain               => "gmail.com",
    :user_name            => "myname",
    :password             => "mypassword",
    :authentication       => "plain",
    :enable_starttls_auto => true
} 
```

有没有办法像 href mailto 那样动态地做到这一点？

href mailto 标签打开默认电子邮件，但我认为您不能添加附件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:54:10.353

你可以通过几种方式做到这一点。一种方法是直接定义附件：

```
encoded_content = SpecialEncode(File.read('/path/to/filename.jpg'))
attachments['filename.jpg'] = {:mime_type => 'application/x-gzip',
                               :encoding => 'SpecialEncoding',
                               :content => encoded_content } 
```

并用您的文件替换文件名，或者您可以使用附件的内联定义，如下所示：

或在您的邮件中定义：

```
def welcome
  attachments.inline['image.jpg'] = File.read('/path/to/image.jpg')
end 
```

在视图中：

```
<p>Hello there, this is our image</p>

<%= image_tag attachments['image.jpg'].url, :alt => 'My Photo',
                                            :class => 'photos' %> 
```

您可以在此处找到如何创建附件的参考：http: [//guides.rubyonrails.org/action_mailer_basics.html](http://guides.rubyonrails.org/action_mailer_basics.html)

但是，如果您使用 Heroku，您可能会遇到一些困难 - 您可以在此处阅读相关内容：[ActionMailer - 如何添加附件？](https://stackoverflow.com/questions/4360377/actionmailer-how-to-add-an-attachment)

**编辑：**

是的，您提出的问题和代码让我感到困惑，真正的问题是什么。我现在相信你正在寻找这个：

```
mail_to "me@domain.com" 
```

寻找参考：[http ://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-mail_to](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-mail_to)

如果您尝试预填充正文文本，您可以在此处找到一些内容 [使用带有块的 mail_to (mail_to ... do)](https://stackoverflow.com/questions/7062407/using-mail-to-with-a-block-mail-to-do)

在这里添加图片，也许你可以找到一些有用 的东西[rails: include html in a mail_to link](https://stackoverflow.com/questions/4224504/rails-include-html-in-a-mail-to-link)

我刚刚从头顶上放了一个代码，我希望某种附加方式可能会起作用：

```
<%= mail_to("you@gmail.com", image_tag("email.gif")) %> 
```

我还没有尝试过所有这些，但我希望有些东西会起作用，或者指引你朝着好的方向前进

# python - 如何使用python处理这两个不同的字符串

> ID：15104314
> 
> 赞同：-1
> 
> 时间：2013-02-27T04:36:14.760
> 
> 标签：python, python-2.7

```
s='''“You'''   
s='''You“'''   
s='''"You'''  
s='''“You"''' 
```

这是四种不同的字符串模式，前两个是 unicode 字符串，第三个字符串是普通字符串，最后一个字符串包含两者。我想从每个字符串中删除 '"' 和 '"'，即我想从每个字符串中删除标点符号。

在 Python 中执行此操作的最简单和最有效的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:56:08.407

```
 s.strip('“').strip('"') 
```

假设我理解你的问题，这将把它们全部剥离到`s = 'You'`

# c# - 使用 HtmlElement 类的选中属性

> ID：15104315
> 
> 赞同：0
> 
> 时间：2013-02-27T04:36:18.190
> 
> 标签：c#, winforms

我正在尝试将 Checked 属性与以下代码一起使用，但单词 checked 有一个错误，指出它不包含定义。我如何使用这个属性？

```
HtmlDocument document = webBrowser1.Document;    
HtmlElement agree = document.GetElementById("OptIn");
agree.Checked = false; 
```

# html - 显示内部 div 溢出：父溢出可见：隐藏

> ID：15104317
> 
> 赞同：1
> 
> 时间：2013-02-27T04:36:28.323
> 
> 标签：html, css

当内部 div 的父级是时，如何使内部 div 可见`overflow:hidden`？我需要制作父级或幻灯片，`overflow:hidden`因为有多个幻灯片需要隐藏。但我想要的是在显示溢出时显示内部“幻灯片”的一部分。我该怎么做，或者如果我需要重新设计它应该如何工作如果可以请给我一个要做什么的例子谢谢。

```
<div id="slides" style="overflow:hidden; width:300px; height:300px">
    <div id="slide" style="height:300px; height:300px">            
        <div style="overflow:visible">
            <img alt="" src="image.png" />
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T05:21:47.200

看看这个演示

`[parent div overflowhidden inner div overflow scroll][1]` [http://jsfiddle.net/fGFnu/1/](http://jsfiddle.net/fGFnu/1/)

# image-processing - 图像检索和图像分类的区别

> ID：15104318
> 
> 赞同：2
> 
> 时间：2013-02-27T04:36:31.920
> 
> 标签：image-processing, classification, svm, matlab

```
load fisheriris
xdata = meas(51:end,3:4);
group = species(51:end);
svmStruct = svmtrain(xdata,group,'showplot',true);

species = svmclassify(svmStruct,[5 2],'showplot',true)
hold on;plot(5,2,'ro','MarkerSize',12);hold off 
```

上面的代码给出了结果---> species = 'virginica'

该物种被归类为“处女”。这只是一张图片。这个分类过程可以称为“图像检索”吗？？？

还是我们必须检索许多图像才能将其称为图像检索？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T09:36:59.810

图像分类：在称为训练集的数据集上训练模型，然后使用与训练集不相交的数据集进行测试（最重要）。

图像检索：给定查询图像，从数据库中获取与查询图像“最接近”的图像。现在，术语“最接近”可以是关于颜色、形状、纹理等。所以决定“最接近”的因素 - 图像的特征向量，用户根据旨在满足其需求的算法计算。

分类和检索之间的主要区别：分类需要训练数据的标签，而检索不需要。检索是一种纯粹基于距离的方法。

现在，继续你的问题：这不会被称为检索，因为它只是告诉我查询图像的类别，而不是为我提供相似的图像。现在你可能会争辩说，如果我对 100 个这样的图像进行分类，如果 50 个属于某个类别，那么在 100 个中分类，那么这些可以被视为相似图像。它是否正确？在我看来，答案是否定的。考虑一个例子，你必须对有车和没有车的图像进行分类。在（完美）分类的情况下，所有 50 张图像肯定都会有汽车。但是在（完美）检索的情况下，所有 50 幅图像都将具有相同颜色的汽车或小型/大型汽车等。这就是区别。

可以说检索到的最高的图像可以作为分类结果。这是可能的。但同样，我们有非常强大的分类算法（例如，SVM、随机森林、Boosting、多实例学习等），但检索的情况并不相同（据我所知）。因此，如果要进行分类，就不会取检索结果最高的，总是使用专用算法进行分类。

总而言之，如果一个过程不需要标签并且根据某些属性（颜色、纹理、形状等）进行检索，则该过程称为检索。分类是您需要标签的地方，它是根据类别完成的（例如，汽车/没有汽车、人/没有人、自然/人造等）。

我希望这能澄清你的概念。

# file-transfer - scp 命令将文件从远程复制到本地主机返回错误

> ID：15104321
> 
> 赞同：4
> 
> 时间：2013-02-27T04:36:52.807
> 
> 标签：file-transfer, scp, jsch

我需要在同一网络上的不同机器之间复制/传输一些文件。在做了一些阅读和搜索之后，我认为尝试 Java`jsch`可能是一个不错的选择。令人痛苦的事实可能是，也许没有可用于 jsch 的好的文档。但是，我不知道有任何其他选择。

为了实现文件传输，我在同一个网络上选择了两台机器，比如我安装的主机 1（服务器）`sshd server`，它已启动并正在运行，我可以使用 putty 连接到它。第二台机器，比如host2（客户端/本地）。我也在这里安装了 sshd。

现在我尝试通过在连接到主机1后在腻子中运行以下命令将主机1（服务器）桌面上的文件'test.txt'复制到主机2（客户端） -

`scp admin@host1:test.txt /c`

但它返回以下错误 -

```
'scp' is not recognized as an internal or external command,
operable program or batch file. 
```

我究竟做错了什么？我想先在 putty 中尝试，然后在 java 中实现。我是第一次在 jsch/ssh 上工作，所以任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T04:52:49.360

您可以安装 git for windows ( [http://code.google.com/p/msysgit/](http://code.google.com/p/msysgit/) )。Windows 版 Git 包括 ssh 和 scp，您可以在使用 git bash 窗口时访问它们。

然后你也可以使用 git 进行源代码控制！:-)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-27T04:47:48.617

如果你需要`scp`一些来自 Windows 的东西，那为什么不简单地用它`pscp`来实现呢？

您可以从`PuTTy`网站下载它。

[http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)

如果你想在 Java 程序中使用它，那么这里有一个例子：[http ://www.jcraft.com/jsch/examples/ScpFrom.java.html](http://www.jcraft.com/jsch/examples/ScpFrom.java.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T04:47:39.493

```
locate scp 
```

看看你是否真的拥有它。

# pusher - Pusher - 乒乓球功能

> ID：15104325
> 
> 赞同：1
> 
> 时间：2013-02-27T04:37:02.977
> 
> 标签：pusher

我看到 Pusher 基于[docs](http://pusher.com/docs/pusher_protocol#ping-pong)支持 ping pong 。

但是，我不确定从哪里开始。

我想要做的是检查[半开连接](http://pusher.tenderapp.com/kb/faq-common-requests/half-open-connections-lead-to-temporarily-incorrect-connection-counts-and-webhook-call-delays)并关闭它们，因为我的网站上的并发连接数量不切实际。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:37:18.803

Ping 和 pong 是[WebSocket 协议](https://www.rfc-editor.org/rfc/rfc6455#page-37)的一部分，但尚未由 Web 浏览器实现（据我所知）。因此，Pusher 已将他们自己的 Ping 和 Pong 消息添加到您引用的[Pusher WebSocket 协议中。](http://pusher.com/docs/pusher_protocol)

如果您使用的是 1.11 或更高版本的 Pusher JavaScript 库，那么该库将发送和接收 ping/pong 消息。即使有这些消息，仍然可以看到半开的 TCP 连接。使用 ping/pong 策略检测到这些连接可能需要一些时间；正如[常见问题解答](http://web.archive.org/web/20140720070504/http://pusher.tenderapp.com:80/kb/faq-common-requests/half-open-connections-lead-to-temporarily-incorrect-connection-counts-and-webhook-call-delays)所说，360 秒。

# jquery - youtube 视频位于忽略 wmode 的所有其他内容之上

> ID：15104328
> 
> 赞同：0
> 
> 时间：2013-02-27T04:37:43.527
> 
> 标签：jquery, youtube, fancybox, z-index

我在大约一年前的帖子后面问这个问题。

[通过 iframe 嵌入的 YouTube 视频忽略 z-index？](https://stackoverflow.com/questions/9074365/youtube-video-embedded-via-iframe-ignoring-z-index)

我在一个页面上有一个你管视频。在那个页面上我想展示一个花式框..但是由于 youtube 视频这不起作用

我已经在代码中添加

```
jQuery(document).ready(function (){
    jQuery('iframe').each(function(){
        var url = jQuery(this).attr("src");
            if (jQuery(this).attr("src").indexOf("?") > 0) {
                jQuery(this).attr({
                  "src" : url + "&wmode=transparent",
                  "wmode" : "Opaque"
                });
            }
    });
}); 
```

这将被添加到代码中

```
<iframe width="500" height="281" src="http://www.youtube.com/v/TUNROkqBte4?theme=light&showinfo=0&modestbranding=0&border=0&fs=1" frameborder='0'></iframe> 
```

我无法改变。

为什么在添加了 jquery 的 ie7/8 中仍然会发生这种情况？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T05:14:55.537

问题是 youtube 的 URL 格式：

```
http://www.youtube.com/v/... 
```

... 不适合在`iframe`标签中使用。

的正确格式`iframe`应该是：

```
http://www.youtube.com/embed/... 
```

如果您无法更改它，请使用以下 javascript`.replace()`方法即时替换它：

```
jQuery('iframe').each(function () {
    var url = jQuery(this).attr("src").replace(new RegExp("/v/", "i"), '/embed/');
    if (jQuery(this).attr("src").indexOf("?") > 0) {
        jQuery(this).attr("src", url + "&amp;wmode=opaque");
    }
}); 
```

这应该够了吧。见**[JSFIDDLE](http://jsfiddle.net/VdQWY/)**

# iphone - UITab Bar 上的 UIactionsheet 问题

> ID：15104336
> 
> 赞同：0
> 
> 时间：2013-02-27T04:38:38.177
> 
> 标签：iphone, ios, animation, uitabbar, uiactionsheet

我是ios新手。我已经实现了一个应用程序，其中有一个标签栏。

现在，在其中一个选项卡中，我实施了操作表。

我已经添加了操作表

```
[actionSheet showFromRect:[self.view bounds] inView:self.view  animated:YES]; 
```

但是由于标签栏而使用它，它会在标签栏上发生事件。

比我通过以下命令实现它

```
[actionSheet showFromTabBar:self.tabBarController.tabBar]; 
```

通过这个解决了以前的问题，但现在它停止了动画。

该怎么办。

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T04:43:59.533

试试这个

```
[actionSheet showInView:self.tabBarController.view]; 
```

# c - 试图找到访问数组元素的不同方法？

> ID：15104339
> 
> 赞同：0
> 
> 时间：2013-02-27T04:38:58.060
> 
> 标签：c

我是 C 新手，但决心学习好的 C。我需要你的帮助。在练习数组时，我只是想发现我访问数组元素的方式是正确的，或者可能有更好的方法来做到这一点。请检查以下代码并建议一种使用带指针的数组的好方法。如果有人能指导我学习使用指针进行数组高级实践的教程，我将不胜感激。

```
int main()
{
   unsigned int i, j;
   unsigned int arr1[] = {1,2,3,4,5,6,7,8,9};

   unsigned int * ptr_arr = (unsigned int *)malloc(sizeof(unsigned int));
   ptr_arr = arr1;

   for(i=0;i<=8;i++)
   {
         printf("Value at location %d\t is:  %d\n",i,*(ptr_arr+i));
         printf("\n");         
         printf("Value of i %d and value at %d\n",i, ptr_arr[i]);
   }

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T04:43:56.110

您的程序正在泄漏内存

> unsigned int * ptr_arr = (unsigned int *)malloc(sizeof(unsigned int));

无需为 ptr_arr 分配内存。

分配 arr1 的地址就足够了

> ptr_arr = arr1;

另一种使用它的方法是每次递增指针并使用它

```
 ptr_array2 = arr1
    for (int i = 0; i < 8 ; i++)
    {
       printf ("%d", *ptr_array2);
       ptr_array2++;
     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T05:01:10.430

访问数组中元素的两种方式都是*有效*的。但为了便于阅读，请`array[subscript]`使用`*(arrayStart+index)`.

例子：

```
int array[10] = {1,2,3,4,5,6,7,8,9,0}; 
```

在数组中，元素是连续放置的，从 开始`array(say address 0x00000000)`。假设一个 32 位整数大小，`2`放置在地址 处`array + 4`，即地址处`0x00000004`，类似地，下一个元素`3`位于地址处`array + 8`，即地址处`0x00000008`，依此类推。

当我写作时，`array[2]`我的意思是我想要(or ) 的元素**之后**的第二个元素，它实际上是数组中的第三个元素。因此，数组索引从 开始。`array``array[0]``0`

它的字面意思是`array[0]`= `*(array + 0)`, `array[1]`= `*(array + 1)`, `array[2]`=`*(array+2)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T04:45:41.203

您无需为 ptr_arr 分配内存，因为无论如何您都将 arr 的地址分配给 ptr_arr。您上面的代码将导致内存泄漏。

您可以参考 Internet 上提供的众多教程之一。仅供参考，我发布了一些链接：

[http://www.clear.rice.edu/comp221/html/pdf/03-arrays-pointers.pdf](http://www.clear.rice.edu/comp221/html/pdf/03-arrays-pointers.pdf) [http://www.cs.utexas.edu/users/fussell/courses/cs310h/lectures/Lecture_17-310h .pdf](http://www.cs.utexas.edu/users/fussell/courses/cs310h/lectures/Lecture_17-310h.pdf)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T04:47:55.227

你错过了一种方法：

```
 printf("Value of i %d and value at %d\n",i, i[ptr_arr]); 
```

# python - 检查列表中的任何元素是否以 Python 中的多个前缀中的任何一个开头？

> ID：15104340
> 
> 赞同：4
> 
> 时间：2013-02-27T04:39:00.150
> 
> 标签：python, string, numpy

我正在尝试检查多个字符串`targets`中的任何一个是否以任意数量的 given 开头`prefixes`，例如：

```
prefixes = ["a", "b", "c"]
targets = ["abar", "xbar"] 
```

然后检查是否有任何元素`targets`有一个前缀`prefixes`（并找到那些元素`targets`以及它们匹配的第一个前缀）。这`"abar"`是唯一适合的元素。我自己的版本是：

```
for t in target:
  if any(map(lambda x: t.startswith(x), prefixes)):
    print t 
```

使用普通 Python 或 numpy 有更好/更短/更快的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T04:54:43.910

与@DSM 相同

你可以使用**过滤器**

```
>>> prefixes = ("a", "b", "c")
>>> targets = ["abar", "xbar"]
>>> filter(lambda t: t.startswith(prefixes), targets)
['abar'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T17:21:46.910

如果您想要所有匹配项，只需使用此列表推导：

```
>>> from itertools import product
>>> matches = [(t,p) for t,p in product(targets,prefixes) if t.startswith(p)]
>>> print(matches)
[('abar', 'a'), ('cbar', 'c')] 
```

如果您只想要第一个，请将 next 与列表推导一起用作生成器表达式。如果您只想确定是否存在任何匹配项，这将导致短路。

```
>>> nextmatch = next(((t,p) for t,p in product(targets,prefixes) if t.startswith(p)), None)
>>> print(nextmatch)
[('abar', 'a')] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T05:27:48.740

我在结果中使用列表来存储前缀，因为可能有多个匹配项

```
>>> prefixes = ["a", "b", "c"]
>>> targets = ["abar", "xbar"]
>>> result = {t:[p for p in prefixes if t.startswith(p)] for t in targets}
>>> result
{'abar': ['a'], 'xbar': []} 
```

如果您需要过滤空列表

```
>>> result = {k:v for k,v in result.items() if v}
>>> result
{'abar': ['a']} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T04:42:21.103

常用表达？ [重新模块](http://docs.python.org/2/library/re.html) [Python 的正则表达式](http://www.tutorialspoint.com/python/python_reg_expressions.htm)

# ruby-on-rails - Rails 邀请 Facebook 上的朋友加入应用程序

> ID：15104347
> 
> 赞同：2
> 
> 时间：2013-02-27T04:39:34.747
> 
> 标签：ruby-on-rails, ruby, devise

我正在创建一个在 Rails 中运行的网站应用程序。它目前使用设计进行身份验证，并且用户在注册之前必须拥有许多字段，我还实现了可确认以验证他们的电子邮件是否正确。

现在的问题是我试图让创建后的用户邀请 Facebook 上的朋友来我的应用程序。那是我有点困惑的地方，如果我实现本教程的想法[https://github.com/plataformatec/devise/wiki/OmniAuth%3a-Overview](https://github.com/plataformatec/devise/wiki/OmniAuth%3a-Overview)，那么想法是您要么使用 devise 登录，要么使用facebook，如果你只是一个用户，那么你不能邀请你的朋友。

我怎样才能改变这个逻辑，我正在寻找一种简单的方法来使用 devise 和 facebook 登录，但在两种视图中都允许用户输入他们自己的 facebook 凭据或使用提供的凭据并邀请朋友。这怎么能在rails中完成。

任何提示、提示或教程链接都会有所帮助！

谢谢

# c# - 使用linq在asp.net c#中将多个查询分配给gridview控件

> ID：15104353
> 
> 赞同：0
> 
> 时间：2013-02-27T04:40:16.247
> 
> 标签：c#, asp.net, linq, gridview

通过此代码，我收到错误“输入数组长于此表中的列数”

```
DataTable dtMain = new DataTable();
var qry = from c in db.Categories where c.SubCategoryName.Contains(txtSearch.Text.Trim()) select c;
foreach (var k in qry)
{
      var qry1 = from c in db.ProductMasters where c.ProductNameID == k.CategoryID
                  select new { ProductID = c.ProductID, 
                               TagID = c.TagID, 
                               ProductNameID = (from d in db.Categories 
                                                where d.CategoryID == c.ProductNameID 
                                                select d.SubCategoryName).FirstOrDefault(),
                               CategoryID = (from d in db.Categories 
                                                 where d.CategoryID == c.CategoryID 
                                                 select d.CategoryName).FirstOrDefault(), 
                               ProductType = c.ProductType, 
                               Maker = c.Maker, 
                               Model = c.Model, 
                               SerialNo = c.SerialNo, 
                               MACAddress = c.MACAddress, 
                               Warranty = c.Warranty, 
                               Price = c.Price, 
                               ProductOrderNo = c.ProductOrderNo, 
                               VendorID = (from d in db.Vendors 
                                           where d.VendorID == c.VendorID 
                                           select d.VendorName).FirstOrDefault(), 
                               PurchaseDate = c.PurchaseDate.ToString().Substring(0, 10), 
                               ProductStatus = c.ProductStatus, 
                               Remark = c.Remark };
     dtMain.Rows.Add(qry1);

 }

gridProduct.DataSource = dtMain;
gridProduct.DataBind(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T04:50:44.917

数据表适用于行和列的概念。您需要先提及所有列名。像这样向数据表添加行。

```
DataTable dtMain = new DataTable();

for (int i = 0; i < rows .Count(); i++)
            {

                DataRow datarowObj= dtMain .NewRow();
                datarowObj["A"] = yourValue;
                datarowObj["B"] = yourValue;
                datarowObj["C"] = yourValue;
                dtMain .Rows.Add(datarowObj);
            } 
```

或者，正如 SLAKS 提到的关于 bindingList 的那样。您可以使用。绑定列表

```
return new BindingList<YourClass>(qry1.ToList()) 
```

# c - 添加到链表帮助？仅限c语言

> ID：15104357
> 
> 赞同：1
> 
> 时间：2013-02-27T04:40:30.223
> 
> 标签：c, linked-list

所以我有这个链接列表，它可以工作，但前提是你将一个项目添加到列表中。这是我的代码：

```
 struct node{
       char key[10];
       char content[20];
       struct node *next;
    };
    struct node *head=(struct node *) NULL;
    struct node *tail=(struct node *) NULL;

    struct node * initinode(char *key, char *content)
    {
     struct node *ptr;
     ptr = (struct node *) malloc(sizeof(struct node ) );
      if( ptr == NULL )                       
         return (struct node *) NULL;        
      else {                                  
         strcpy( ptr->key, key );          
         strcpy(ptr->content,content);                       
           return ptr;                         
           }
     }
    void printnode( struct node *ptr )
    {
      printf("Key ->%s\n", ptr->key );
      printf("Contents   ->%d\n", ptr->content );
     }
    void printlist( struct node *ptr )
      {
         while( ptr != NULL )           
         {
           printnode( ptr );          
           ptr = ptr->next;            
         }
     }
    void add( struct node *new )  
    {
       if( head == NULL ) {     
         head = new;
         tail=new; 
       }                   
       else {
         tail->next = new;        
         tail->next=NULL;              

            }
    } 
```

因此，当我尝试将三个项目添加到列表并打印时，它只会显示第一个项目，例如这三个：

```
 struct node *ptr;
    char *terminal="term";
        char *term;
        term=getenv("TERM");  
      ptr=initinode(terminal, term);
          add(ptr);
     //-----------------------
      char ccterm[20];
      char *ret, tty[40];
      char *currTerminal="tty";
     if ((ret = ttyname(STDIN_FILENO)) == NULL)
               perror("ttyname() error");
     else {
        strcpy(tty, ret); 
          }
      ptr=initinode(currTerminal, tty);
      add(ptr);

    //----------------------------------
     char cwd[1024];
     char *st="date";
     time_t t;
     char ti[30];
     time(&t);
     char date;
     date=t;
     sprintf(ti,"%s", ctime(&t));
     ptr=initinode(st, ti);
     add(ptr);
     printlist(ptr); 
```

这让我想到了最后一个问题，当我将其中任何一个添加到列表时，它只输出 int 值，那么我将如何打印列表中的字符串值。我曾尝试将我的代码修改为男性内容字符串，但它永远不会成功。非常感谢任何建议，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T04:46:29.093

在你的 add 函数中，你有这个：

```
tail->next = new;        
tail->next=NULL; 
```

什么时候应该

```
tail->next = new;
tail = new;
tail->next=NULL; 
```

另一个问题是在 printnode 中。打印内容时，您应该使用 %s 作为字符串。%d 用于整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T04:47:31.003

要打印字符串，您需要修复您的`printnode`函数。

```
printf("Contents   ->%s\n", ptr->content );
                      ^ 
```

它打印`int`值是因为您专门要求它（`%d`）打印`int`值。

Justin 已经解决了您的 add 函数的另一个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T04:49:24.650

1.  不要施放`malloc()`等`NULL`。

2.  程序中的问题：

    `tail->next = new; //I am new list
    tail->next=NULL; //I am nobody!`

你可能的意思是：

```
tail->next = new;
tail->next->next = NULL;
tail = tail->next; 
```

# java - EXTERNAL_CONTENT_URI 返回不存在的文件

> ID：15104358
> 
> 赞同：1
> 
> 时间：2013-02-27T04:40:36.457
> 
> 标签：java, android, mediastore

我正在使用此代码获取 SD 卡中的所有音乐文件，但是当我删除文件时它仍然显示它，如果我将新文件添加到 SD 卡它不显示它。

这是获取所有音乐文件

```
private String[] getMusic() {
    String[] proj = { MediaStore.Audio.Media._ID,
            MediaStore.Audio.Media.DATA, MediaStore.Audio.Media.TITLE, };

    mCursor = managedQuery(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
            proj, null, null, "LOWER(" + MediaStore.Audio.Media.TITLE
                    + ") ASC");

    int count = mCursor.getCount();

    String[] songs = new String[count];
    int i = 0;
    if (mCursor.moveToFirst()) {
        do {
            songs[i] = mCursor.getString(2);
            i++;
        } while (mCursor.moveToNext());
    }

    return songs;
} 
```

这要在 ListView 中列出

```
mMusicList = getMusic();

    rowItems = new ArrayList<rowItem>();
    for (int i = 0; i < mMusicList.length; i++) {
        rowItem item = new rowItem(mMusicList[i]);
        rowItems.add(item);
    } 
```

提前致谢

# sql - 具有多个子查询的 ORACLE SQL

> ID：15104368
> 
> 赞同：0
> 
> 时间：2013-02-27T04:42:01.863
> 
> 标签：sql, oracle11g

我实际上在这个问题中实现了两种方法，一种如下，另一种是使用'with'替换子查询，它们都不起作用。糟透了。这个，oracle一直显示问题

来自 padctors p 右外连接 * 第 2 行出现错误：ORA-00936：缺少表达式

请帮帮我

```
select distinctive *
from padoctors p right outer join
(select drug,month,max(drug_num) max_no
                from (select drug,count(*) as drug_num,to_char(prescdate,'MM') as month
                    from padoctors
                    where to_char(prescdate,'YYYY')='2012'
                    group by to_char(prescdate,'MM'),drug)
                    group by month,drug) dmax on p.drug=dmax.drug
full outer join
    (select drug,month,min(drug_num) min_no
                from (select drug,count(*) as drug_num,to_char(prescdate,'MM') as month
                    from padoctors
                    where to_char(prescdate,'YYYY')='2012'
                    group by to_char(prescdate,'MM'),drug)
                    group by month,drug) dmin on dmax.month=dmin.month and dmin.drug=p.drug
order by month asc; 
```

这一个，我在[http://www.oracle-base.com/articles/misc/with-clause.php](http://www.oracle-base.com/articles/misc/with-clause.php)中搜索了“with”的用法， 仍然不起作用。

```
with dmax as
(
 select drug,month,max(drug_num)
 from (select drug,count(*) as drug_num,to_char(prescdate,'MM') as month
       from padoctors
       where to_char(prescdate,'YYYY')='2012'
       group by to_char(prescdate,'MM'),drug
      )
 group by month,drug
),
dmin as
(
 select drug,month,min(drug_num)
 from (select drug, count(*) as drug_num, to_char(prescdate,'MM') as month
       from padoctors
       where to_char(prescdate,'YYYY')='2012'
       group by to_char(prescdate,'MM'),drug
      )
  group by month,drug
)
select distinctive *
from dmax join dmin on dmax.month=dmin.month
order by month asc; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:47:33.450

拿*Just Aguy*说的话，我玩过，是的：
`SELECT DISTINCTIVE * FROM Table`确实给出了“ **ORA-00936: missing expression** ”
，所以你需要`SELECT DISTINCT`

# wso2 - WSO2 BAM 集成数据服务

> ID：15104371
> 
> 赞同：1
> 
> 时间：2013-02-27T04:42:07.047
> 
> 标签：wso2, dashboard, wso2dss, wso2bam

我是 BAM 的新手。我必须创建一个小工具/图表以在仪表板上显示数据库中的一些值。我可以通过[Gadget Generation Tool](http://docs.wso2.org/wiki/display/BAM201/Gadget+Generation+Tool)做到这一点。

但现在我的要求是我想从数据服务中获取这些值。我应该如何将数据服务与我的 BAM 集成。

我应该采取什么方法以及如何开始这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:58:04.747

所以，这是一个架构问题。gadgets 生成器基本上创建了一个用 Jaggery（服务器端 Javascript 框架）编写的 JSON 数据服务，然后基本上连接到该数据服务并在图形/表格中将其可视化。因此，您已经在使用数据服务概念。您可以使用数据服务服务器做同样的事情（甚至更多）。它允许您将数据源公开为具有安全性、可靠性等的服务。我鼓励您下载 WSO2 数据服务服务器。它在[这里](http://wso2.com/products/data-services-server/)可用。

# java - 以下插入排序实现之间的区别

> ID：15104376
> 
> 赞同：0
> 
> 时间：2013-02-27T04:42:33.293
> 
> 标签：java, algorithm, insertion-sort

实施1：（使用一个for循环，但你是否在while循环中移动）

```
public class Insertionsort{
public static void main(String[] args) {
    int a[] = {10,9,8,7,6,5,4,3,2,1};
    for (int i = 1; i < a.length; i++){
        int j = i;
        int B = a[i];
        while ((j > 0) && (a[j-1] > B)){
            a[j] = a[j-1];
            j--;
        }
        a[j] = B;
    }
    for(int i = 0; i <a.length; i++)
          System.out.print(a[i]+"  ");
    }
} 
```

实现 2：使用 3 个 for 循环

```
public class InsertionSort {
    public static void main(String[] args) {
       int a[] = {10,9,8,7,6,5,4,3,2,1};

       for(int i = 0; i<a.length; i++){
           for(int j=i+1; j<a.length; j++){
               if(a[i]>a[j]){
                   int temp = a[j];
                   for (int k=j; k>i; k--){
                       a[k] = a[k-1];
                   }
                   a[i] = temp;
               } 
            }
            System.out.print(a[i]+" ");
        }
    }
} 
```

最内层循环的迭代次数肯定更少，但我不确定两种算法是否完全相同或第一个更好。请帮忙做决定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:54:09.773

最后，这两种实现都对数组进行排序并且都是插入排序（尽管第二种实现与冒泡排序有一些相似之处）。

第一个实现优于第二个。第一个运行时间为 O(N^2)，而第二个运行时间为 O(N^3)。更明智的选择是使用第一个实现

# flash - 链接的电影剪辑完全删除并替换，如何设置

> ID：15104380
> 
> 赞同：-1
> 
> 时间：2013-02-27T04:43:00.257
> 
> 标签：flash, replace, linked-list

我做了一个小 Flash 游戏，现在我正在转换东西。

第一帧我在其中放置了一个默认的影片剪辑和一个按钮。单击该按钮会添加一个包含正在运行的游戏的所有部分的链接影片剪辑，然后将其自身删除。所以现在开始屏幕不见了。

这部分有效，游戏仍然和以前一样功能。

现在，实际上尝试了至少 50 种不同的东西，但我无法让它做我想做的事。

当你输掉比赛时，我想删除包含功能游戏的影片剪辑，并添加一个新的孩子，赢或输的影片剪辑。

[其中大部分我使用包含所有“根”影片剪辑来具有该前缀。]

至少，它似乎删除了游戏影片剪辑，赢/输显示在前面，但游戏影片剪辑仍然“活跃”，听众仍在运行游戏循环。

有谁知道我能做什么？或者，真的，比这更好的设计。如果需要代码，我可以粘贴，现在尝试一切都很麻烦。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:47:09.503

> 至少，它似乎删除了游戏影片剪辑，赢/输显示在前面，但游戏影片剪辑仍然“活跃”，听众仍在运行游戏循环。

从舞台上移除一个`MovieClip`或任何对象（或者，就此而言，将对象设置为`null`）不会清理其事件侦听器，这将继续运行并防止对象被**垃圾收集**并且您的游戏最终可能有**内存泄漏**。

你应该做的是，当你`MovieClip`从舞台上移除对象（游戏）时，调用一个“清理”函数，你应该：

*   删除**所有**事件监听器

    ```
    //for example, let's say that earilier in your code 
    //you add an enter frame listener:
    this.addEventListener(Event.ENTER_FRAME, onEnterFrame);

    //on your clean up function you should do:
    this.removeEventListener(Event.ENTER_FRAME, onEnterFrame); 
    ```

确保也删除其所有子事件侦听器！

*   停止所有计时器（并移除它们的监听器）

这是一个很好的问题/答案，供进一步参考 AS3 清理：[我是否正确执行 AS3 参考清理？](https://stackoverflow.com/questions/2869351/am-i-doing-as3-reference-cleanup-correctly)

# iphone - 删除 UITableViewCell 没有删除按钮？

> ID：15104383
> 
> 赞同：-1
> 
> 时间：2013-02-27T04:43:46.937
> 
> 标签：iphone, sdk

我需要能够在单元格上滑动，而不是显示红色的“删除”按钮，而是显示一个 AlertView，询问用户是否真的要删除。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T04:48:10.513

您可以将手势识别器添加到您的单元格

```
 UISwipeGestureRecognizer *recognizer =[[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(removeCell:)];
    recognizer.direction = UISwipeGestureRecognizerDirectionRight;
    [cell addGestureRecognizer:recognizer];
    [recognizer release]; 
```

然后在 removeCell 方法中

```
 - (void)handleSwipeFrom:(UISwipeGestureRecognizer *)recognizer 
 {
     UITableViewCell *cell = (UITableViewCell*)[recognizer view];
     NSIndexPath* pathOfTheCell = [viewListTable indexPathForCell:cell]; 
     NSInteger rowOfTheCell = [pathOfTheCell row];
     NSInteger sectionOftheCell = [pathOfTheCell section];  

     UIAlertView *confirmationAlert = [[UIAlertView alloc]initWithTitle:@"Confirm" message:@"Are you sure you want to Delete this list?" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Delete", nil];
     [confirmationAlert show];
     confirmationAlert.delegate = self;
     [confirmationAlert release];
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T06:02:15.020

在 Alertview 委托中

```
if (alertView.tag == index)
{
if (buttonIndex == 1)
{
  [yourArray removeObjectAtIndex:alertView.tag-1];
  [yourTable reloadData];
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T04:49:23.187

添加`UISwipeGestureRecognizer`到`Cell`

```
 UISwipeGestureRecognizer *gesture;
    gesture = [[[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwipeFrom:)] autorelease];
    gesture.direction = UISwipeGestureRecognizerDirectionLeft;
    [cell addGestureRecognizer:gesture];

    gesture = [[[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwipeFrom:)] autorelease];
    gesture.direction = UISwipeGestureRecognizerDirectionRight;
    [cell addGestureRecognizer:gesture]; 
```

并在选择器方法提示内确认删除

```
- (void)handleSwipeFrom:(UISwipeGestureRecognizer *)recognizer 
{    

    //Use recognizer.direction to check left/right swipe if needed
    //Prompt Alert

    CGPoint location = [recognizer locationInView:tableView];
    NSIndexPath *swipedIndexPath = [tableView indexPathForRowAtPoint:location];
    UITableViewCell *swipedCell  = [tableView cellForRowAtIndexPath:swipedIndexPath];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T04:48:09.580

这样做，

```
- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath {    

 UIAlertView *Alert = [[UIAlertView alloc] initWithTitle:@"" message:@"Are you sure to commit with its action" delegate:self cancelButtonTitle:CKString(@"NO") otherButtonTitles:CKString(@"YES"),nil];
    [Alert show];
    Alert.tag=indexPath.row+1;
    Alert.delegate=self;
    [Alert release];

    return UITableViewCellAccessoryNone;
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {

} 
```

在 AlertView 委托中

```
-(void) alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {

        int indexPathRow=alertView.tag-1;
        if(buttonIndex==1)
        {
            //// Yes condition
        } else {
           ///// No condition
        }

} 
```

# php - 将此转换为日期时间？

> ID：15104397
> 
> 赞同：1
> 
> 时间：2013-02-27T04:45:36.040
> 
> 标签：php

如何将以下日期转换为 DateTime 格式：

```
2013-02-21-12:25:13 
```

日期是这样传递给我们的，在日期和时间之间应该有一个空格。

如何将其转换为 DateTime 格式？mySQL 会自动执行此操作，但我想使用 PHP 执行此操作。

我们正在寻找以下输出：

```
Y-m-d H:i:s 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T04:58:29.303

```
$date = DateTime::createFromFormat( 'Y-m-d-H:i:s', '2013-02-21-12:25:13');
echo $date->format( 'Y-m-d H:i:s'); 
```

是的，这是[经过测试](http://viper-7.com/K1HsaX)并证明有效的。它输出：

```
2013-02-21 12:25:13 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T04:48:05.153

使用`strtotime`对您有帮助的 php 函数。

**例子**

```
echo date("Y-m-d H:i:s",strtotime(YOUR_DATE_STRING)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T04:48:08.727

试试下面的代码

```
$old_date = '2013-02-21-12:25:13';
$new_date = date("Y-m-d H:i:s",$old_date);
echo $new_date; 
```

在一行中

```
echo date("Y-m-d H:i:s",'2013-02-21-12:25:13'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T04:50:29.643

试试这个：

```
 $date = '2013-02-21-12:25:13';
  $new_date = date('Y-m-d H:i:s', $date); 
  echo $new_date; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T04:51:03.620

```
$my_date = '2013-02-21-12:25:13';

$new_date = date("Y-m-d H:i:s", strtotime($my_date));

echo $new_date; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T04:54:38.983

试试这个：

```
$date = "2013-02-21-12:25:13";
$d = explode('-', $date);

$date=$d[0].'-'.$d[1].'-'.$d[2].' '.$d[3];
echo date("Y-m-d H:i:s", strtotime($date)); 
```

o/p：

```
2013-02-21 12:25:13 
```

希望它会有所帮助！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-27T04:55:08.487

```
$date = '2013-02-21-12:25:13';
$curdate = DateTime::createFromFormat('Y-m-d-H:i:s', $date);
echo $curdate->format('Y-m-d H:i:s'); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-27T04:56:38.467

非标准日期格式？尝试正则表达式摆脱混乱：

```
$string = "2013-02-21-12:25:13";
$date = date("Y-m-d H:i:s",
    strtotime(preg_replace("/(?:\d+-\d+-\d+)-{1}/","",$string))
); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-27T04:58:24.640

试试这个

```
$date = '2013-02-21-12:25:13';
echo substr_replace($date,' ',10,1); 
```

# mysql - 如果选择查询返回空结果，请在 mysql 中运行另一个选择查询

> ID：15104400
> 
> 赞同：1
> 
> 时间：2013-02-27T04:46:01.253
> 
> 标签：mysql

我有 2 个选择语句。

```
1- select sm.id, IFNULL(sm.unit_price,0) as unit_price       
   from crm_stock_manager sm
   left join crm_purchase_order_items poi on poi.id = sm.purchase_order_item_id and  poi.is_del = 0
   left join crm_products p on poi.product_id = p.id and p.is_del = 0
   where sm.is_del = 0 and IFNULL(sm.unit_price, '') != '' and p.id = 253 order by sm.created_on;

2- select 0 as id ,price as unit_price from crm_products where id = 253  and is_del=0; 
```

如果第一个选择语句返回一个空结果，那么我想运行第二个选择语句。

请帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T05:40:43.773

这似乎从我刚刚进行的快速测试中起作用，并且避免了两次检查 x=1 是否存在的需要。

```
SELECT SQL_CALC_FOUND_ROWS *
FROM mytable
WHERE x = 1

UNION ALL

SELECT *
FROM mytable
WHERE 
FOUND_ROWS() = 0 AND x = 2; 
```

另一种方法是使用 EXISTS 或 NOT EXISTS 的子查询

```
SELECT column1 FROM t1 WHERE NOT EXISTS (SELECT * FROM t2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T06:03:51.937

如果需要选择`crm_products.price`if `srm_stock_manager.unit_price`is NULL，则可以使用`COALESCE`并且不需要 2 次查询。您可以按如下方式更改`SELECT`语句的第一部分，并根据需要更改其他部分以获得所需的结果。

```
SELECT sm.id, COALESCE(sm.unit_price, p.price) unit_price FROM... 
```

`p.price`如果`sm.unit_price`为 NULL，则返回值。

此外，请参阅 mysql [doc](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T06:39:53.097

你可以这样做

```
$query1 = mysql_query("YOUR QUERY");
$row_count = mysql_num_rows($query1);
if($row_count==0) {
 $query1 = mysql_query("Your Second Query");
} 
```

请记住不要使用`mysql_*`函数，因为它们已折旧。

希望这可以帮助

# iphone - UISplitViewController 与多个细节视图控制器

> ID：15104404
> 
> 赞同：3
> 
> 时间：2013-02-27T04:46:07.290
> 
> 标签：iphone, xcode, ipad, uisplitviewcontroller

我正在制作一个 splitView 应用程序，我想要不同的细节视图控制器，我已经研究了很多发现使用苹果 MultipleDetailView 控制器但它没有被完全采用，所以任何人都可以使用它，所以有什么方法可以完成这意味着不同所有人的详细视图控制器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T05:19:48.837

嗨，Nazia，我刚刚从[http://kshitizghimire.com.np/uisplitviewcontroller-multipledetailviews-with-navigation-controller/找到了解决方案](http://kshitizghimire.com.np/uisplitviewcontroller-multipledetailviews-with-navigation-controller/)

你可以这样做： -

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

    // Override point for customization after app launch.
        self.splitViewController =[[UISplitViewController alloc]init];
    self.rootViewController=[[RootViewController alloc]init];
    self.detailViewController=[[FirstDetailViewController alloc]init];

    UINavigationController *rootNav=[[UINavigationController alloc]initWithRootViewController:rootViewController];
    UINavigationController *detailNav=[[UINavigationController alloc]initWithRootViewController:detailViewController];

    self.splitViewController.viewControllers=[NSArray arrayWithObjects:rootNav,detailNav,nil];
    self.splitViewController.delegate=self.detailViewController;

    // Add the split view controller's view to the window and display.
    [window addSubview:self.splitViewController.view];
    [window makeKeyAndVisible];

    return YES;
}

 -(void)tableView:(UITableView *)aTableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    /*
     When a row is selected, set the detail view controller's detail item to the item associated with the selected row.
     */
    NSUInteger row = indexPath.row;
    [self.appDelegate.splitViewController viewWillDisappear:YES];
    NSMutableArray *viewControllerArray=[[NSMutableArray alloc] initWithArray:[[self.appDelegate.splitViewController.viewControllers objectAtIndex:1] viewControllers]];
    [viewControllerArray removeLastObject];

    if (row == 0) {
        self.firstDetailViewController=[[[FirstDetailViewController alloc] init]autorelease];
        [viewControllerArray addObject:self.firstDetailViewController];
        self.appDelegate.splitViewController.delegate = self.firstDetailViewController;

    }

    if (row == 1) {
        self.secondDetailViewController=[[[SecondDetailViewController alloc]init]autorelease];
        [viewControllerArray addObject:self.secondDetailViewController];
        self.appDelegate.splitViewController.delegate = self.secondDetailViewController;
    }
    [[self.appDelegate.splitViewController.viewControllers objectAtIndex:1] setViewControllers:viewControllerArray animated:NO];    

    [self.appDelegate.splitViewController viewWillAppear:YES];
    [viewControllerArray release];

 } 
```

您还可以查看此演示[http://kshitizghimire.com.np/wp-content/uploads/2011/01/MultipleDetailViewsWithNavigator.zip](http://kshitizghimire.com.np/wp-content/uploads/2011/01/MultipleDetailViewsWithNavigator.zip)

# javascript - 切换 div 动画

> ID：15104407
> 
> 赞同：1
> 
> 时间：2013-02-27T04:46:23.830
> 
> 标签：javascript, html

试图使这个动画工作，所以一次只打开一个 content5 div，目前有 3 个标题 5 div 和 3 个 content 5 div。如果您单击标题 5 链接之一以“打开” content5 子项，则其他 content5 子项应关闭，而它们处于打开状态。我知道这应该很容易，但我似乎无法成功，我一直在学习很多东西。需要多看克罗克福德。提前感谢您的帮助。

```
$(document).ready(function() {
  $(".content5").hide();
  $(".heading5").click(function()
  {
    $(this).next(".content5").animate({width: 'toggle'}, 'slow');
  });
}); 
```

这是html

```
<div class="heading5 menu-item-text" id="leftend">About</div>
<div class="content5 clearfix" id="menu-1">
  //Links in here
</div>
<div class="heading5 menu-item-text"><a href"#" data-target="2">Contact</a></div>
<div class="content5 clearfix"  id="menu-2">
      //More links in here
</div>
<div class="heading5 menu-item-text" data-target="3"><a href"#">Portfolio</a></div>
<div class="content5 nav clearfix" id="menu-3"  data-option-key="filter">
//and more in here
</div> 
```

这是一个小提琴[http://jsfiddle.net/jkuhns/NRsXS/](http://jsfiddle.net/jkuhns/NRsXS/)

我意识到滑动菜单打开宽度明智的危险，因为它可能会被切断，但我有不同的菜单样式用于不同的屏幕尺寸，所以我应该没问题。在小提琴中，请忽略可怕的鼠标悬停效果，我正在与尚未击败的查询移动设备中的 css 风格作斗争，所以目前我将鼠标悬停在我得到它之前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T05:47:51.013

就在行前

`$(this).next(".content5").animate({width: 'toggle'}, 'slow');`

添加

`$('.content5').animate({width: 0}, 'slow')`

编辑：小提琴中的更新代码：jsfiddle.net/fNZaV/2

# android - 在 Android 中获取默认文本大小（以像素为单位）

> ID：15104409
> 
> 赞同：4
> 
> 时间：2013-02-27T04:46:26.800
> 
> 标签：android, layout, fonts

我需要知道当前默认 Android 字体的像素大小。[我在这里](https://stackoverflow.com/questions/7896615/android-how-to-get-value-of-an-attribute-in-code)复制了一个非常相似的问题中列出的方法。但是，我总是得到-1，而不是以像素为单位。任何想法我做错了什么？

这是代码：

```
 Context context = getActivity();
    TypedValue typedValue = new TypedValue(); 
    context.getTheme().resolveAttribute(android.R.attr.textAppearance, typedValue, true);
    int[] textSizeAttr = new int[] { android.R.attr.textSize };
    TypedArray a = context.obtainStyledAttributes((AttributeSet) typedValue.string, textSizeAttr);
    textSize = a.getDimensionPixelSize(0, -1);
    Log.e("Metrics", "text size in dp = " +  String.valueOf(textSize));
    a.recycle() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T05:17:18.683

获取 textView 的文本大小非常简单，代码如下

```
textView.getTextSize(); 
```

**返回** 此 TextView 中默认文本大小的大小（以像素为单位）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T05:44:27.333

只需更改这行代码

```
TypedArray a = context.obtainStyledAttributes((AttributeSet) typedValue.string, textSizeAttr); 
```

到

```
 TypedArray a = context.obtainStyledAttributes(typedValue.data, textSizeAttr); 
```

# apache - 从重写规则中排除 IP

> ID：15104411
> 
> 赞同：1
> 
> 时间：2013-02-27T04:46:30.053
> 
> 标签：apache, .htaccess

我有重定向到维护页面的重写规则

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/wh_client1/index.html
RewriteRule ^ /wh_client1/index.html [R=301] 
```

它工作正常，但我想排除一个不应适用上述规则的 IP

可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T05:10:48.750

为了从访问页面中排除 IP，假设您使用的是 apache，您可以使用如下子句：

```
RewriteCond %{REMOTE_ADDR} !^11\.22\.33\.44$ [NC] 
```

在这个答案中，`11.22.33.44`是一个例子。将其替换为您的实际 IP 地址。

# python - 当子进程正在运行时，如何从此代码打印进度？

> ID：15104415
> 
> 赞同：1
> 
> 时间：2013-02-27T04:46:56.700
> 
> 标签：python, rsync

上面的代码仅在代码完成执行时显示 rsync 进度。我想打印正在发生的进度。例如，当文件正在传输时，我想一直显示进度。我怎样才能做到这一点？

```
 import re 
    import subprocess

    def sort(rprogress):
        '''This function extracts the percentage from the rsync progress and return strings of percentanges'''
        progress1 = re.findall(r'\d+%', rprogress)
        remove_duplicate = set(progress1)     #Remove Duplicate percentage from list
        remove_percent = [a.replace('%', '') for a in remove_duplicate]     #Removes percentage
        sorted_list = sorted(remove_percent, key=int)     #Sort in ascending order
        #result = ', '.join(map(lambda sorted_list: str(sorted_list) + '%', sorted_list)) #Adds the percentage
        return sorted_list

    source12 = 'sachet.adhikari@69.43.202.97:/home/sachet/my_files/ok.txt'
    password = 'password'
    destination = '/home/zurelsoft/files'
    result = subprocess.Popen(['sshpass', '-p', password, 'rsync', '-avz', '--info=progress2', source12, destination], 
                                       stdout=subprocess.PIPE).communicate()[0]   

    print result               

print sort(result) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T06:06:50.477

`stdout=subprocess.PIPE`阻止子进程打印到标准输出，而是将其传递给使用`result`类似于[`communicate`](http://docs.python.org/2/library/subprocess.html#subprocess.Popen.communicate)bash 中的方法

```
sshpass -[args] rsync [source] [dest] 
```

将打印进度，但

```
sshpass -[args] rsync [source] [dest] | sort 
```

在该过程完成之前不会打印任何内容。

你想要的`tee`是`stdout`. 看[这里](https://stackoverflow.com/questions/2996887/how-to-replicate-tee-behavior-in-python-when-using-subprocess)。根据这些答案，您可以执行以下操作：

```
# Caution! untested code
result = []
process = subprocess.Popen(['sshpass', '-p', password, 'rsync', '-avz',
                            '--info=progress2', source12, destination], 
                           stdout=subprocess.PIPE)
while process.poll() is None:
    line = process.stdout.readline()
    print line
    result.append(line)
print sort(result) 
```

# mysql - 从数据库中收集信息然后将其插入到其他表中？

> ID：15104416
> 
> 赞同：0
> 
> 时间：2013-02-27T04:46:58.650
> 
> 标签：mysql, database, submit

我有一个页面，用户在其中提交项目名称（术语）并查找有关该项目的信息。因此数据库找到名称（'Items'）和位置（'Loc'）并将其回显给用户。现在他们可能想要跟踪此信息以创建项目列表及其位置。所以我使用了一个表单，您可以在其中导入您的用户名、密码、项目和位置。这样他们就可以在需要时在 2 小时内获得信息。我想让表单尽可能小，所以我想消除用户插入项目名称和位置的麻烦。有没有办法获取回显信息并通过表单提交而无需用户？感谢您提供的任何帮助！

```
$term = $_POST['term'];

$query = mysql_query("select * from List where Items = '$term'");
if(mysql_num_rows($query) <= 0)
{
echo "<center>No results. Please try another item.</center>";
} else {
while ($row = mysql_fetch_array($query)) {
echo ' <br/>Item - '.$row['Items'];
echo ' <br/>Location - '.$row['Loc'];
echo '<br/><br/>';

}
}
?>
</p1>
<center>
<form action="insert.php" method="post">
<div><label for="Username">Username : </label><input type="text" name="Username" />  </div>
<div><label for="Password">Password: </label><input type="text" name="Password" /></div>
<div><label for="Items">Items: </label><input type="text" name="Items" /></div>
<div><label for="Loc">Location: </label><input type="text" name="Loc" /></div>
<P><label for="submit"></label><input type="submit" /></P>
</form>
</center> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T05:52:22.533

为了优化性能，请制作过程而不是从您的代码中触发 2 个查询。因为存储过程是预编译的，您可以在其中传递请求参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T04:59:14.387

尝试这个.........

```
 $query1="select sm.id, IFNULL(sm.unit_price,0) as unit_price       
       from crm_stock_manager sm
       left join crm_purchase_order_items poi on poi.id = sm.purchase_order_item_id and  poi.is_del = 0
       left join crm_products p on poi.product_id = p.id and p.is_del = 0
       where sm.is_del = 0 and IFNULL(sm.unit_price, '') != '' and p.id = 253 order by sm.created_on;"
    $query1_res = mysql_query($query1);
    if(mysql_num_rows($query1_res) <= 0)
        $query2="select price from crm_products where id = 253  and is_del=0";

    $query1_res = mysql_query($query2); 
```

# javascript - （移动）如何在滚动过程中保持导航栏隐藏

> ID：15104417
> 
> 赞同：0
> 
> 时间：2013-02-27T04:47:11.970
> 
> 标签：javascript, iphone, mobile, scroll, navbar

我正在研究这个：[mobiledoor](http://www.reveriesrefined.com/myftp/mobiledoor) for Mobile，我想隐藏导航栏并保持隐藏。我已经在使用：

```
setTimeout(function () {
  window.scrollTo(0, 1);
}, 500); 
```

但是，要最初隐藏导航栏并在方向更改时隐藏导航栏，我希望导航栏在滚动期间保持隐藏状态。我希望它可以在他们看到导航栏的唯一方法是，无论如何在 iPhone 上，他们触摸屏幕顶部的地方工作。显然，向下滚动页面时它已经很好地隐藏了，但是当您滚动回顶部时，它会显示导航栏，我真的很想将其隐藏。

我在想一些类似于在触摸端触发这个的东西

```
if (window.scrollY < 2) {
    setTimeout(function () {
        window.scrollTo(0, 1);
        }, 0);
    } 
```

但问题是当您滚动到顶部时，它会暂时显示导航栏然后转到（0,1）。我希望它根本不显示导航栏。

虽然我似乎无法让它工作。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T05:44:34.763

想到的解决方案是将事件侦听器放在滚动上，例如。

```
window.addEventListener('scroll', function() {
  if (window.scrollTop < 44) {
    window.scrollTop = 44;
  }
}); 
```

不幸的是，将侦听器放在Scroll 上的性能非常低下，并且通常不受欢迎。如果您绝对 100% 需要该功能，请使用受限制的侦听器，以使您的功能不会比每 10 毫秒更频繁地触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:09:34.357

我有一个想法，我想我只需将整个网站在 y 轴上向下移动 2000 像素，然后找到当您滚动太远时 iphone 具有的背景灰色刮擦图案的图像，并将其放在上方y 轴，这样看起来如果你向上滚动，它就太远了。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-27T05:43:25.443

您应该必须实现滚动视图委托

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView;
- (void)scrollViewDidEndScrollingAnimation:(UIScrollView *)scrollView; 
```

# mapping - Struts 1.3 将未声明的值传递给mapping.findForaward

> ID：15104418
> 
> 赞同：0
> 
> 时间：2013-02-27T04:47:17.307
> 
> 标签：mapping, struts-1, struts-action

在 Struts 1.3 Action 类中，我们返回值为

```
return mapping.findForward("success"); 
```

如果该操作的操作标记中未定义“成功”会发生什么

```
 <action path="/helloWorld"
    type="com.action.HelloWorldAction"
    name="helloWorldForm">
    <forward name="good" path="/Good.jsp"/>
    <forward name="bad" path="/Bad.jsp"/>
   </action> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T17:03:50.683

您将被转发到一个空白页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T05:03:20.883

findForward 方法查找您使用操作映射定义的命名转发。由于您没有为“成功”定义转发名称，它应该给出空白页。

# ios - 将 MainViewController 设置为 MKMapView 的委托时不会出现注释

> ID：15104420
> 
> 赞同：1
> 
> 时间：2013-02-27T04:47:25.260
> 
> 标签：ios, delegates, mkmapview, mkannotation

我正在处理一个奇怪的问题……我有一个非常基本的 mkmapview，我将它拖到 mainviewcontrollers 视图中。我在地图上显示了非常基本的注释。当我将 mainviewcontroller 设置为 mapview 的委托（在 IB 或代码中）时，注释停止显示。如果我不建立这种联系，注释会按预期显示……有什么想法吗？

```
#import "GDFlipsideViewController.h"
#import <MapKit/MapKit.h>

@interface GDMainViewController : UIViewController <MKMapViewDelegate>

@property (strong, nonatomic) IBOutlet UIToolbar *bottomToolbar;
@property (strong, nonatomic) IBOutlet MKMapView *theMap;
@property (strong, nonatomic) MKLocalSearchResponse *results;
@property (strong, nonatomic) MKLocalSearchRequest *request;
@property (strong, nonatomic) MKLocalSearch *search;

- (IBAction)locateHelp:(UIBarButtonItem *)sender;

@end
...

@implementation GDMainViewController
...
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation{
    static NSString *AnnotationViewID = @"annotationViewID";
    GDHelpAnnotationView *annotationView = (GDHelpAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:AnnotationViewID];

    if (annotationView == nil){
        annotationView = [[GDHelpAnnotationView alloc]init];

    }

    annotationView.annotation = annotation;

    return annotationView;
}

...

- (IBAction)locateHelp:(UIBarButtonItem *)sender {

    [self searchForHelp];
}

..

- (void)searchForHelp {
    // drop pins for emergency destination
    [self searchForFireStations];
    [self searchForPoliceStations];
    [self searchForHospitals];

}

...

- (void)searchForFireStations {
    //Fire stations
    [_request setNaturalLanguageQuery:@"fire station"];
    [_request setRegion:[_theMap region]];
    _search = [[MKLocalSearch alloc]initWithRequest:_request];

    [_search startWithCompletionHandler:^(MKLocalSearchResponse *response, NSError *error) {
        if ([response.mapItems count] == 0) {
            if ([response.mapItems count] == 0) {
                //will handle later
                return;
            }
        }

        [response.mapItems enumerateObjectsUsingBlock:^(MKMapItem *item, NSUInteger idx, BOOL *stop) {
            GDHelpAnnotation  *annotation = [[GDHelpAnnotation alloc] initWithPlacemark:item.placemark];
            annotation.title = item.name;
            annotation.subtitle = [item name];

            [_theMap addAnnotation:annotation]; // This gets called but doesnt show annotations when self is _theMap's delegate
        }];

    }];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:25:20.877

如果`viewForAnnotation`在设置委托时调用，但未出现引脚，则故障可能出在`GDHelpAnnotationView`. 您可以通过将您的替换`viewForAnnotation`为使用常规旧 MKPinAnnotationView 的更基本的方法来测试这一点。

```
- (MKAnnotationView *)mapView:(MKMapView *)map viewForAnnotation:(id <MKAnnotation>)annotation
{
    static NSString *AnnotationViewID = @"annotationViewID";
    MKPinAnnotationView *annotationView = (MKPinAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:AnnotationViewID];
    if (annotationView == nil)
    {
        annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:AnnotationViewID];
    } else {            
        annotationView.annotation = annotation;
    }
    return annotationView;
} 
```

# java - 循环错误信息

> ID：15104424
> 
> 赞同：0
> 
> 时间：2013-02-27T04:47:40.957
> 
> 标签：java, input, for-loop

```
 String inputRules = JOptionPane.showInputDialog
  (
  "Enter your rules. \n" +
  "In the form: a=x"
  );

    boolean gotGoodRuleInput = false;

    while (!gotGoodRuleInput)
    {
      gotGoodRuleInput = true;   

      char a = inputRules.charAt(0);

      for (int i= 2; i<inputRules.length(); i++)
      {
      char x = inputRules.charAt(i);
      if (a == x)
      {
        JOptionPane.showMessageDialog
        ( 
          null,
          "a can not equal x",
          "Error",
          JOptionPane.ERROR_MESSAGE
        );
        gotGoodRuleInput = false;
       }
      }
    } 
```

您好我正在尝试检查用户输入，如果 x 处的输入等于 a 那么它将给出错误对话框。我遇到的问题是错误对话框“a 不能等于 x”不断出现，并且在点击确定时不会关闭。我认为它与 for 循环有关，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:55:53.137

您的设置`inputRules`在循环之外，因此一旦您得到错误条件，您将永远无法摆脱它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T05:05:59.540

逻辑问题，看你的逻辑

```
while (!gotGoodRuleInput)
    { 
```

...

如果错误

```
gotGoodRuleInput = false; 
```

怎么了：  

1.  在条件下检查
2.  将while条件设置为false
3.  读一个
4.  循环遍历所有输入值
5.  检查代码
6.  显示对话框
7.  如果以上条件为真，则设置while条件为真
8.  去第一步

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T05:04:33.653

就像约翰说的那样， inputRules 在循环之外，所以什么都不会改变。不确定这是否是您要完成的任务，但是否可以将循环全部替换。

```
String[] input = inputRules.split("=");
if (input[0].equals(intput[1])) {
    JOptionPane.showMessageDialog
    ( 
        null,
        "a equals x"
    );
    gotGoodRuleInput = true;
} else {
    JOptionPane.showMessageDialog
    ( 
        null,
        "a can not equal x",
        "Error",
        JOptionPane.ERROR_MESSAGE
    );
    gotGoodRuleInput = false;
} 
```

# google-api - Updating Google Contacts via API shows success in response yet creates duplicate records

> ID：15104433
> 
> 赞同：0
> 
> 时间：2013-02-27T04:48:10.970
> 
> 标签：google-api, gdata, gdata-api, google-contacts-api, google-shared-contacts

I'm coming across this strange behavior where when utilizing the batch processing requests for UPDATING existing contacts in Google Contacts, I'm finding despite coming back as a success, it creates duplicate records.

It definitely did NOT do this throughout my development and testing, only recently. And the only difference I can ascertain is that now I'm working with rather large data sets - a few thousand contacts instead of just a hundred or so.

Here's the raw XML going over the wire for two contacts, both of which were duplicated: [http://pastebin.com/diSFzkeu](http://pastebin.com/diSFzkeu)

Any ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T04:49:56.120

Oversight on my part. My groupId wasn't set and it was picking up identical customers from previous tests that I had deleted and were sitting in the deleted (other contacts) folder and restoring them.

# android - 如何从我的 Android 设备直接在 Helix 服务器上录制视频？

> ID：15104451
> 
> 赞同：25
> 
> 时间：2013-02-27T04:49:40.130
> 
> 标签：android, upload, video-recording, helix-server

我是服务器端开发的新手。我想在一个应用程序上工作，我需要通过我的应用程序从我的 Android 设备在 Helix 服务器上录制视频。我已经在 Windows Server PC 上安装了 Helix Server。

在 Android 应用程序中，我试图在 Helix 服务器上上传录制的视频。我已经实现了在 SD 卡上录制视频的应用程序，但我想直接在 Helix Server 上录制并保存该视频。我已经实现了我的Android应用程序如下：

```
public class NewRecordingVideo extends Activity implements SurfaceHolder.Callback {
    private MediaRecorder recorder;
    boolean flag = false;
    boolean startedRecording = false;
    boolean stoppedRecording = false;
    SurfaceHolder mHolder;
    SurfaceView videoSView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
        setContentView(R.layout.activity_main);
        recorder = new MediaRecorder();
        recorder.setVideoSource(MediaRecorder.VideoSource.DEFAULT);
        recorder.setAudioSource(MediaRecorder.AudioSource.VOICE_RECOGNITION);
        recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
        recorder.setVideoEncoder(MediaRecorder.VideoEncoder.MPEG_4_SP);
        recorder.setAudioEncoder(MediaRecorder.AudioEncoder.DEFAULT);
        videoSView = ((SurfaceView)findViewById(R.id.surfaceView1));
        mHolder=videoSView.getHolder();
        mHolder.addCallback(this);
        mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

        ((Button)findViewById(R.id.startBtn)).setOnClickListener(
            new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                if(startedRecording == false) {
                    recorder.start();
                    startedRecording = true;

                    Toast.makeText(NewRecordingVideo.this,
                        "Your video is recording", Toast.LENGTH_LONG).show();

                 } else if (startedRecording == true && stoppedRecording == false) {
                     recorder.stop();
                     recorder.release();
                     recorder = null;
                     stoppedRecording = true;
                 }
             }
         });

        ((Button)findViewById(R.id.stopBtn)).setOnClickListener(
            new OnClickListener() {

            @Override
            public void onClick(View v) {
                recorder.stop();
                recorder.release();
                recorder = null;
                stoppedRecording = true;

                Toast.makeText(NewRecordingVideo.this,
                    "Your video recorded ", Toast.LENGTH_LONG).show();
                finish();
            }
        }); 
    }

    public Surface getSurface() {
        return mHolder.getSurface();
    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format,
        int width, int height) {

        // TODO Auto-generated method stub  
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {

        try {

            Socket socket = new Socket("IP address", 8008);
            ParcelFileDescriptor pfd = ParcelFileDescriptor.fromSocket(socket);
            Log.v("find about connection","====>"+socket.isConnected());
            recorder.setOutputFile("/sdcard/recording.3gp");

            // Here I would like to record my video (recording.3gp) on helix server directly    
            recorder.setPreviewDisplay(mHolder.getSurface());
            recorder.prepare();

        } catch (Exception e) {
            String message = e.getMessage();
            recorder.release();
            recorder = null;
        }
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        if (recorder != null) {
            recorder.release();
            recorder = null;
        }
    }
} 
```

从上面的代码：如何将我的视频录制文件直接保存在 Helix 服务器上？我应该在服务器端开发上做任何实现吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T02:04:33.907

在给定的时间间隔内，视频大小与网络上传容量之间的比率很低，无法同时上传/录制视频流，除非用户具有非常快的 LTE 蜂窝连接。

但是，录制完成后，您可以通过 FTP 协议将文件上传到您的服务器。建议给每个录制的文件一个`Universal Unique Identifier (UUID)`，以便能够在所有其他录制的文件之间产生差异。我使用了这段代码（未针对 Android 进行测试，但在 JavaSE 7 上运行良好）。由于这是一个相当长（但很快）的过程，我给你做了一个总结。（很好，嗯？）

## 概括

1) 生成一个 UUID，`UUID.randomUUID().toString();`在整个过程中使用该 UUID 来识别记录的文件。
2) 使用名称记录文件`"sdcard/" + uuid + ".3gp"`
3) 记录结束后，通过 FTP 上传将文件上传到您的服务器。
4）命令你的远程服务器执行PHP脚本，对记录的文件做任何它需要做的事情，比如数据库操作等（如果有这样的脚本，如果你不需要这样做，跳过这个步）。
5) 如果需要，命令您的远程服务器删除文件。（通过另一个 PHP 脚本完成）

## 代码

```
import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.net.URL;
import java.net.URLConnection;

public class FTPUploader {
    static void doUpload(String uuid) {

      File fileSource = new File("/sdcard/" + uuid + ".3gp");
      // Or new File("/sdcard/recording.3gp");

      String fileName = fileSource.getName();

      /** YOUR SERVER'S INFORMATIONS **/
      String userName = "USERNAME";
      String password = "PASSWORD";
      String ftpServer = "FTP.SERVER.COM";
      /****/

      StringBuffer sb = new StringBuffer("ftp://");

      sb.append(userName);
      sb.append(':');
      sb.append(password);
      sb.append('@');

      sb.append(ftpServer);
      sb.append("/"); 
            /**WARNING: Path extension; it will be added after connection
            *The file must be at your server's root. Otherwise the PHP script won't detect it.
            **/
      sb.append(fileName);

      sb.append(";type=i");

      BufferedInputStream bis = null;
      BufferedOutputStream bos = null;
      try {

            URL url = new URL(sb.toString());
            URLConnection urlc = url.openConnection();
            bos = new BufferedOutputStream(urlc.getOutputStream());
            bis = new BufferedInputStream(new FileInputStream(fileSource));

            int i;

            // read byte by byte until end of stream
            while ((i = bis.read()) != -1) {
                  bos.write(i);
            }
      } catch (Exception e) {
            e.printStackTrace();
      } finally {

            if (bis != null)
                  try {
                        bis.close();
                  } catch (IOException ioe) {
                        ioe.printStackTrace();
                        System.out.println("IO exception after if bis " + ioe);
                  }
            if (bos != null)
                  try {
                        bos.close();
                  } catch (IOException ioe) {
                        ioe.printStackTrace();
                        System.out.println("IO exception after if " + ioe);
                  }
      }
}
}  

import java.util.UUID;

public class Main {

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

        String uuid = UUID.randomUUID().toString();
        //Assuming you set your file's name as uuid + ".3gp"
        FTPUploader.doUpload(uuid);            
        //Launches a FTP Upload

        //Then, if you want to ask your server to "process" the file you gave him, you can perform a simple HTTP request:

        try {
    String url = "http://YOURSITE.COM/shell.php";
    String charset = "iso-8859-1";
    String param1 = uuid;
    String query = String.format("id=%s", URLEncoder.encode(param1, charset));

        URLConnection connection = new URL(url + "?" + query).openConnection();
        connection.setRequestProperty("Accept-Charset", charset);
        connection.getInputStream();

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    }
        //This try {}catch{} requests a PHP script: this script is "triggered" just like if it was loaded in your web browser, with as parameter the file UUID (`shell.php?id=UUID`), so that he knows wich file on his server he has to process.

} 
```

**奖励**：如果您想在完成后从服务器中删除文件，您可以执行与之前相同的行，但将“shell.php”替换为另一个您可以称为“delete.php”的 PHP 脚本。它将包含以下几行：

```
<?php
$recordedFile = $_GET['id'] . ".3gp";
unlink($recordedFile);
?> 
```

例如：以下请求在您的服务器上 `http://www.YOURSERVER.com/delete.php?id=123456789`删除。`http://www.YOURSERVER.com/123456789.3gp`

## 另一个示例代码

几周前，我建立了一个 Java 应用程序（我称之为 Atom...），它分析语音并回答所有问题（使用 Google（非官方）语音识别 API 和 Wolfram|Alpha API）。您绝对应该[在 GitHub 上查看它](http://github.com/chlkbumper/AtomDesktop)，其中包含所有使用的文件，包括 Desktop-side 和**Server-side**。希望我有帮助！

## 编辑：使用您的 Helix 服务器

我在[simplehelix.com上找到了有关](http://simplehelix.com)[如何管理和使用 FTP](http://manage.simplehelix.com/knowledgebase/42/How-To-Manage-and-Use-FTP.html)的教程，以及此视频[Windows Server 2008 R2 - 配置 FTP 服务器](http://www.youtube.com/watch?v=QsGPqkobCs8)。您只需按照说明操作，但**跳过**称为*登录 FTP 帐户*的步骤，因为它仅说明如何从应用程序客户端（如 FileZilla 或 CuteFTP）管理文件。这**是**通过我上面编写的 Java 代码片段完成的。另外，如果它可以帮助你，我找到[了这个视频](http://www.youtube.com/watch?v=tFjFyKKcqjk)。

 *******注意：**在第一个代码（Java）中，除非您的 FTP 服务器访问的根目录是包含所有媒体文件的文件夹，否则您**必须**替换`sb.append("/");`为可流媒体文件所在/应该所在的文件夹的路径。表格示例，`sb.append("/username/media/");`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T23:11:10.847

正如@guillaume 所说，解决此问题的最佳方法是使用 FTP 协议将记录的文件从您的设备上传到您的数据库。

我做了一个类似的项目，其中 Android 设备需要访问远程数据库。这是通过使用 android 系统中的 HTTP 协议实现的。本教程真正分解并概述了如何编写 PHP 脚本，HTTP 协议如何在 android 中工作，以及脚本如何与远程数据库一起工作：

[http://blog.sptechnolab.com/2011/02/10/android/android-connecting-to-mysql-using-php/](http://blog.sptechnolab.com/2011/02/10/android/android-connecting-to-mysql-using-php/)*****

# racket - 使用会员的球拍列表

> ID：15104453
> 
> 赞同：1
> 
> 时间：2013-02-27T04:50:06.507
> 
> 标签：racket

我在做一些大约 10 小时后到期的作业时遇到了一点问题。

我应该创建一个函数has-vowels？它消耗一个字符串并根据字符串是否有元音返回真或假。

示例 (has-vowels?"wow") -> true (has-vowels?"nwtfg) -> false

所以这就是我所做的，

```
(define vowel-list (cons #\A 
               (cons #\a 
               (cons #\E 
               (cons #\e
               (cons #\I 
               (cons #\i
               (cons #\O 
               (cons #\o 
               (cons #\U
               (cons #\u empty)))))))))))

(define (a-vowel? vowels)
  (cond ((empty? vowels) true)
    ((member (first vowels) vowel-list) true)
    (else false )))

(define (has-vowels? word)
  (a-vowel? (string->list word))) 
```

问题是“oio”是真的，“www”是假的，但是像“wow”这样的混合字符串也是假的？

任何提示或提示？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:00:39.387

你的代码没有任何意义。首先，您必须解释基本情况。如果它是空的，它应该返回 false。

（空？元音）真）是错误的。在这里，您是说如果它是空的，它应该返回 true，这是不正确的。

同样正如 Warwick Masson 上面提到的，您只测试第一个字母。要测试其他字母，您必须对列表中的其他项目使用递归，直到您遍历所有字母。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T04:57:32.993

您不检查单词的其余部分，只检查第一个字母。所以“oio”有效是因为 o 是元音，“www”因为 w 不是元音而失败，“wow”也因为 w 不是元音而失败。

作为提示，您需要修改当列表不为空且第一个字母不是元音时发生的情况。目前你只是返回假。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-16T03:04:39.767

您是否仅限于使用某些特定功能？您可以将正则表达式用于此类事情。

```
(define vowels? 
 (lambda (list-to-evaluate)
   (if (list? (regexp-match-positions #rx"[AaEeIiOoUu]" (list->string list-to-evaluate)))
       #t
       #f
  ))) 
```

当然 (list-to-evaluate) 有形式

```
(#\A #\p #\p #\l #\e) 
```

否则你可以改变

```
list-to-evaluate 
```

以一个简单的字符串“Hello World”为例。

```
(vowels? '(#\A #\p #\p #\l #\e)) ==> true 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-23T09:42:05.050

这是完整的解决方案：

```
;; contains-vowel? : string -> boolean
;; checks whether a string contains a vowel.
(define (contains-vowel? a-string)
  (local (;; A list of vowels
          (define vowel-list 
           (list #\A #\a #\E #\e #\I #\i #\O #\o #\U #\u))
          ;; split-string : string -> (listof string-pieces)
          ;; converts a string into a list of string pieces.
          (define (split-string a-string)
            (string->list a-string))
          ;; has-vowel? : string-piece -> booleal
          ;; checks whether a string-piece is a vowel
          (define (has-vowel? string-piece vowels)
            (cond ((empty? vowels) false)
                  ((equal? string-piece (first vowels)) true)
                  (else (has-vowel? string-piece (rest vowels)))))
          ;; contains-vowel-list : (listof string-pieces) -> boolean
          ;; determines whether any items on a list of string-pieces
          ;; contains a piece that represents a vowel.
          (define (contains-vowel-list losp)
            (cond ((empty? losp) false)
                  ((false? (has-vowel? (first losp) vowel-list))
                   (contains-vowel-list (rest losp)))
                  (else (has-vowel? (first losp) vowel-list)))))
          (contains-vowel-list (split-string a-string))))
;; Test
(check-expect (contains-vowel? "hellk") true)
(check-expect (contains-vowel? "hhllo") true)
(check-expect (contains-vowel? "ellhh") true)
(check-expect (contains-vowel? "hhhssdd") false) 
```

我假设您使用 cons 可能尚未允许您使用本地表达式或列表缩写。此解决方案可能更适合您的作业：

```
;; A list of vowels
(define vowel-list (cons #\A 
           (cons #\a 
           (cons #\E 
           (cons #\e
           (cons #\I 
           (cons #\i
           (cons #\O 
           (cons #\o 
           (cons #\U
           (cons #\u empty)))))))))))
;; split-string : string -> (listof string-pieces)
;; converts a string into a list of string pieces.
(define (split-string a-string)
  (string->list a-string))
;; Test
(check-expect (split-string "ja") (cons #\j (cons #\a empty)))
;; has-vowel? : string-piece -> boolealn
;; checks whether a string-piece is a vowel
(define (has-vowel? string-piece vowels)
  (cond ((empty? vowels) false)
        ((equal? string-piece (first vowels)) true)
        (else (has-vowel? string-piece (rest vowels)))))
;; Test
(check-expect (has-vowel? #\i vowel-list) true)
(check-expect (has-vowel? #\x vowel-list) false)
;; contains-vowel-list : (listof string-pieces) -> boolean
;; determines whether any items on a list of string-pieces
;; contains a piece that represents a vowel, from a list of vowels.
(define (contains-vowel-list losp)
  (cond ((empty? losp) false)
        ((false? (has-vowel? (first losp) vowel-list))
         (contains-vowel-list (rest losp)))
        (else (has-vowel? (first losp) vowel-list))))
;; Test
(check-expect (contains-vowel-list (cons #\h (cons #\i empty))) true)
(check-expect (contains-vowel-list (cons #\h (cons #\h empty))) false)
;; contains-vowel? : string -> boolean
;; checks whether a string contains a vowel.
(define (contains-vowel? a-string)
  (contains-vowel-list (split-string a-string)))
;; Test
(check-expect (contains-vowel? "hellk") true)
(check-expect (contains-vowel? "hhllo") true)
(check-expect (contains-vowel? "ellhh") true)
(check-expect (contains-vowel? "hhhssdd") false) 
```

# file - 进行直接提取加载时如何在 Datastage 中选择所需的列？

> ID：15104456
> 
> 赞同：1
> 
> 时间：2013-02-27T04:50:15.730
> 
> 标签：file, loading, flat, datastage

如何使用 Datastage 从一个平面文件中选择所需的列到另一个平面文件。我有一个源文件，其中包含两个名为 NAME 和 ROLL_NO 的字段。现在，我只需要使用 Datastage 为我的目标平面文件选择 NAME 字段，而无需在其间使用任何阶段。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T20:59:19.470

这可以通过仅将 NAME 列放在源阶段输出列中来完成。我做了一个例子来测试这个：

首先，我创建了一个 InputFile.txt 文件，其中包含以下记录：

```
Caitlyn Stark,1
Eddard Stark,2
Hodor,3
Bran Stark,4 
```

使用 Datastage 8.5 服务器作业：

我创建了两个顺序文件阶段，分别命名为 InputStage 和 OutputStage。在 InputStage 的“输出”选项卡的“列”子选项卡中，仅定义第一列“名称”。如果您在第二个文件中不需要 ROLL_NO，则不要将其从第一个文件中拉出。

输出文件如下所示：

```
Caitlyn Stark
Eddard Stark
Hodor
Bran Stark 
```

需要注意的是，Datastage 是一个 ETL 程序，即“Extract-Transform-Load”。支持直接提取和加载，但您将有严重的限制。例如，如果您想提取 ROLL_NO 字段，而不是 NAME 字段，则必须包含一个 Transformer Stage。Transformer 阶段是 ETL 三明治的核心，在大多数情况下，您应该计划为每个服务器作业至少使用一个。

转换器阶段很重要，因为它允许您从源重新映射到目标。您可以更改列顺序、排除列或基于变量、硬编码文本等生成新列。

# r - 如何将以下数据转换为 zoo/xts/tseries 对象以计算最大回撤？

> ID：15104462
> 
> 赞同：1
> 
> 时间：2013-02-27T04:51:01.280
> 
> 标签：r, xts

如何使用 Return.calculate 和 Maxdrawdown 函数将以下数据转换为 zoo/xts/tseries 对象以计算最大回撤？

您好朋友，我在单个 csv 中有大约 400 种股票的股票（例如 CENTURYTEX、AAPL、RIL 等）特定的 eod 价格。

我想计算最大回撤。为了计算回报，我正在尝试

```
ret=by[ddr3csv[,4],ddr3csv[,2],
                   function(x)Return.calculate(x,method="simple")] 
```

这是给出“关闭”不是子集的错误。

一旦获得回报，找到最大回撤将很容易。我正在寻找错误但无法弄清楚。

```
rownum     name     code       date    price    readings

86916 CENTURYTEX 500040 11/04/2011 364.60     2994

86917 CENTURYTEX 500040 13/04/2011 376.70     2994

86918 CENTURYTEX 500040 15/04/2011 370.90     2994

86919 CENTURYTEX 500040 18/04/2011 365.85     2994 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T05:05:41.647

首先你需要改变`[` ( `(`，所以

```
ret=by[ddr3csv[,4],ddr3csv[,2],
                   function(x)Return.calculate(x,method="simple")] 
```

至

```
library(PerformanceAnalytics)
ret=by(ddr3csv[,4],ddr3csv[,2],FUN=
                   function(x)Return.calculate(x,method="simple")) 
```

没有数据，我不能做得更好。我想你把你的价格放在长格式中，并使用你的 csv 的 colmun 2 来区分不同的股票。

**编辑**

你需要 ：

*   按代码拆分数据
*   为每个组创建一个 xts 对象
*   计算drawdows组件。

    ```
    ## I read the data 
    ddr3csv <- read.table(text = 'rownum     name     code       date    price    readings
                                  86916 CENTURYTEX 500040 11/04/2011 364.60     2994
                                  86917 CENTURYTEX 500040 13/04/2011 376.70     2994
                                  86918 CENTURYTEX 500040 15/04/2011 370.90     2994
                                  86919 CENTURYTEX 500040 18/04/2011 365.85     2994',head=T)
    ## I coerce to Date , because xts needs numeric values as index
    ddr3csv$date<- as.Date(dat$date,format='%d/%m/%Y')
    ## I keep only computational columns (avoid naming/memory problems)
    dat <- ddr3csv[,c('code','date','price')]
    library(plyr)
    ddply(dat,.(code), function(x){
              x.xts <- xts(x$price,x$date)
             unlist(findDrawdowns (Return.calculate(x.xts,method="simple")))
    }) 
    ```

这是我的结果

```
 code return from trough to length peaktotrough recovery
    1 500040      0    1      1  4      4            1        3 
```

# actionscript-3 - keep sprite's original size when scaling canvas

> ID：15104466
> 
> 赞同：0
> 
> 时间：2013-02-27T04:51:36.910
> 
> 标签：actionscript-3, apache-flex

does anyone know an easy way to keep a sprite's size and position while scaling the canvas size? (zoom in/out). for example, i have a 20x20 bitmap on a canvas, I scaled the canvas to 60%, together with other child comp in it but i want this particular bitmap to retain its size.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:01:41.393

Scale up the bitmap by the same ammount its parent is scaled down - then it will appear to stay at its original size.

If you set scale on 'canvas' to S then you would set scale on bitmap to 1 divided by S.

So if you set canvas scale to 60% - or 0.6, then bitmap scale should be 1/0.6 or 1.66666666...

# sql - 大表上的多字段索引是个好主意吗？

> ID：15104471
> 
> 赞同：0
> 
> 时间：2013-02-27T04:52:29.123
> 
> 标签：sql, database-design, indexing

我以前从未设计过大型数据库，所以我从不关心索引。但是，现在我正在做一个需要大型数据库的大型项目。所以我正在确定我将在内部连接中使用它作为索引的每个表。

举个例子，一张大表有这样的字段：

```
Userid
Industryid
Teamid
Zoneid 
```

任何带有 Id 的东西都是指向第二张桌子的标识。所以我已经索引了这些。

该表有 60 个字段，但其中 16 个被索引 + 1 个主字段。

如果有这么大的表包含所有这些索引是个好主意吗？我预计这张表在 1 年内将有超过 400 万条记录。我这样做的原因是为了让这张表与其他表之间的内部连接更容易和更快

在如此大的项目中使用索引的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:26:38.793

> 该表有 60 个字段，但其中 16 个被索引 + 1 个主字段。

这*看起来*有点过分，但如果你真的需要所有这些索引，那就没关系了。

索引不是免费的：每个额外的索引都会占用空间，并且在修改数据时需要维护¹，以换取搜索数据时的加速（假设它使用正确）。为您的特定情况确定正确的权衡取决于您。

> 如果有这么大的表包含所有这些索引是个好主意吗？

在 FK 上建立索引几乎总是一个好主意，因此 DBMS 可以以良好的性能维护 FK。具体来说，每当删除父行或更新引用的键时，DBMS 都必须搜索子行。从理论上讲，如果您从不删除/更新父级，那么您也不需要 FK 上的索引，尽管某些 DBMS 无论如何都会强制您拥有它们。

这些索引*可能*（并且通常）对 JOINins 有用，但这实际上取决于您*如何*JOIN 以及您的 DBMS 的查询规划器的能力。²

> 在如此大的项目中使用索引的最佳方法是什么？

**对于每个对性能敏感的查询，仔细检查查询执行计划并测量代表性数据量**的实际时间。仅仅因为查询在小表上以一种方式执行，[并不意味着](https://stackoverflow.com/a/14718958/533120)当表增长时它将以同样的方式执行。

最后但同样重要的是，我强烈推荐阅读[使用索引，卢克！](http://use-the-index-luke.com/)

* * *

*¹每次向表中插入一行时，DBMS 都必须在索引 B-tree 中插入相应的键。当行被删除时，键将从索引中删除。更新索引字段时，需要删除旧键并插入新键。您的表上的索引越多，每当您在该表中插入/更新/删除一行时，DBMS 将不得不花费更多的时间来执行此“索引维护”。*

*²一个 JOIN 的执行方式有很多种：各种顺序的嵌套循环、合并连接、散列连接……不同的策略可能需要不同的索引甚至不同的**种类**索引（例如，B-tree 对哈希连接没有多大好处）。并非所有 DBMS 都能够使用所有这些策略，也不是在理论上可以使用现有索引的所有情况下都使用它们。因此，适用于一个 DBMS 的索引策略不一定适用于另一个 DBMS。有时，您可以保留索引，但您必须通过使用“查询提示”或使用对特定 DBMS 的查询优化器“友好”的语法，向正确的方向“轻推” DBMS，甚至尽管可能存在等效但更易于阅读的语法。例如，旧版本的 MySQL 将始终执行 IN 子查询作为嵌套循环的内部之一，即使在循环的反向顺序或合并连接会更快的情况下也是如此。那'在 MySQL 下（虽然我听说他们在 MySQL 5.6 中修复了这个问题）。OTOH，在 Oracle 下将 IN 重写为 JOIN 并不是很有用，因为 Oracle 在等效执行等效查询方面要好得多，即使存在语法差异也是如此。*

# c# - 设备枚举器 - Windows 7 的 DeviceWatcher

> ID：15104475
> 
> 赞同：2
> 
> 时间：2013-02-27T04:53:07.713
> 
> 标签：c#, wpf, device

我想在我的应用程序启动时枚举我系统中连接的所有设备，并且每当连接或添加或删除任何设备时都应该通知应用程序。

在 Windows 8 客户端中`devicewatcher`，我们有 Windows 7 是否有类似的东西，因为我的应用程序或客户端将安装在 win 7 上？

# xcode - 如何将构建的项目发送给其他人，以便他们可以通过其开发者帐户将其提交到 App Store？

> ID：15104476
> 
> 赞同：0
> 
> 时间：2013-02-27T04:53:12.963
> 
> 标签：xcode, app-store

我正在为想要通过自己的开发者帐户而不是我的开发者帐户将应用程序提交到 iOS 应用程序商店的人构建一个应用程序。我宁愿不发送我的源代码，那么如何在不泄露源代码的情况下向他们发送可以在 XCode 中打开以提交审查的构建项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T04:58:03.860

任何构建项目都不能在 XCode 中打开。

XCode 是一个用于编写、编辑源代码的 IDE，而不仅仅是启动和提交以供审查。

如果您希望该人使用 XCode，您需要提供源代码。

编辑：

[不使用 XCode 提交项目](https://stackoverflow.com/questions/7924085/how-to-submit-an-ios-app-without-xcode)。

# azure - 从 Azure VM 访问 Internet 不起作用

> ID：15104480
> 
> 赞同：10
> 
> 时间：2013-02-27T04:53:33.680
> 
> 标签：azure, azure-virtual-machine, azure-virtual-network

我创建了一个地址为 192.168.0.4 的 Azure DNS 服务器
我创建了一个地址空间为 192.168 的虚拟网络。我将 Subnet-1 更改为

```
 starting IP 192.168.10.0
 Address Count 64  
 Address Range 192.168.10.0 - 192.168.10.63 
```

我使用 powershell 在单个云服务中创建了 3 个虚拟机映像。

```
$ADVM = New-AzureVMConfig -Name $ADVMName -InstanceSize Small -ImageName $ADVMImageName.ImageName |
            Add-AzureProvisioningConfig -Windows -Password $AdminPassword |
            Add-AzureDataDisk -CreateNew -DiskSizeInGB 10 -DiskLabel 'datadisk2' -LUN 0  |
            Add-AzureEndpoint -Protocol tcp -LocalPort 80 -PublicPort 80 -Name 'web' -LBSetName 'lbweb' -ProbePort 80 -ProbeProtocol http -ProbePath '/'

$SQLVM = New-AzureVMConfig -Name $SQLVMName -InstanceSize Medium -ImageName $SQLImageName.ImageName |
            Add-AzureProvisioningConfig -Windows -Password $AdminPassword |
            Add-AzureDataDisk -CreateNew -DiskSizeInGB 50 -DiskLabel 'datadisk2' -LUN 0 |
            Add-AzureEndpoint -Protocol tcp -LocalPort 80 -PublicPort 80 -Name 'web' -LBSetName 'lbweb' -ProbePort 80 -ProbeProtocol http -ProbePath '/'

$APPVM = New-AzureVMConfig -Name $APPVMName -InstanceSize Large -ImageName $AppImageName.ImageName |
            Add-AzureProvisioningConfig -Windows -Password $AdminPassword |
            Add-AzureDataDisk -CreateNew -DiskSizeInGB 50 -DiskLabel 'datadisk2' -LUN 0 |
            Add-AzureEndpoint -Protocol tcp -LocalPort 80 -PublicPort 80 -Name 'web' -LBSetName 'lbweb' -ProbePort 80 -ProbeProtocol http -ProbePath '/'

#CreateService                   
New-AzureVM -ServiceName $CloudServiceName -VMs $ADVM,$SQLVM,$APPVM -AffinityGroup $AffinityGroup -VNetName $VirtualNetworkName 
```

所有虚拟机和云服务都按预期创建。（尽管新 VM 的 IP 地址不是连续的）

我得到这 3 个 IP 地址

192.168.0.4 用于 $ADVMName
192.168.0.12 用于 $SQLVMName
192.168.0.20 用于 $APPVMName

当我 RDP 到 $ADVMName 并尝试访问[http://www.google.com](http://www.google.com)它不成功，点击`Fix connection problems`说`The DNS Server isn't responding`。

为什么我不能从这台机器访问谷歌？当我在那台机器上时，DNS 服务器（设置为 192.168.0.4）如何不可用？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-02-20T05:25:59.690

在我构建了一个 Azure 虚拟网络后，我遇到了同样的问题，其中一个 VM 作为域控制器，另外两个 VM 作为服务器。当我登录到我在 Azure 上运行的任何虚拟机 Windows 服务器时，我无法使用任何浏览器（经过测试的 Chrome 和 Internet Explorer）打开网站。令人困惑的是，像 BING 和 GOOGLE 这样的一些网站会打开，但其他所有网站，包括 MSDN 和 live.com，都存在没有 CSS 或无法打开的问题。

事实证明，这个问题的根本原因是我创建的虚拟网络只配置了一个 DNS IP 地址：我的 AD 域控制器 MY-DC (10.0.0.4) 的 IP 地址。发生这种情况是因为我创建了自己的隔离 AD 森林 (mydomain.com)，由我的虚拟机之一的 AD 域控制器 MY-DC 控制。

在我将 MY-DC 配置为 mydomain.com 域的域控制器之前，Azure 虚拟网络的 DNS IP 地址为 168.63.129.16。168.63.129.16 是 Microsoft DNS 服务器的 IP 地址。将我的虚拟机 MY-DC 配置为我的域控制器后，Azure 虚拟网络只有 DNS IP 地址 10.0.0.4。DNS IP 地址的这种更改似乎导致浏览器无法打开 Internet 上的站点。修复方法是编辑 Azure 虚拟网络的配置并添加回 Microsoft DNS 服务器 (168.63.129.16) 的原始 IP 地址作为附加 DNS 服务器。

所以吸取的教训如下。**前**将 VM 配置为 Azure 虚拟网络的 DNS 服务器，请仔细记下 Windows Azure 在进行任何网络或域配置之前为 Azure 虚拟网络提供的 DNS IP 地址。然后，在将 VM 配置为 DNS 服务器后，切换回 Azure 管理门户并导航到“网络”部分。在本节中，单击虚拟网络名称。这应该深入了解网络的配置。在此屏幕中，单击配置选项卡。将 Microsoft DNS 服务器的原始 DNS IP 地址与您自己的 DNS 服务器的 IP 地址一起添加到列表中，这样您的网络现在就知道这两个 DNS 服务器了。单击保存。门户将提示您进行确认，单击是。从门户重新启动虚拟机，您现在将能够远程桌面到虚拟机，登录到 Windows，

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-09-11T10:46:20.293

让我为 Martin Cox 的好提示添加更多细节 - 答案是正确的 - 你自己的虚拟网络上的 AD/DNS 服务器的问题实际上是你的 onw DNS 通常没有完全配置为提供完整的 DNS 服务，因此浏览互联网无法找到所有“网络内容”。

因此，如上所述，您必须转到 azure 虚拟网络配置选项卡并将真实（外部）DNS 服务器的 IP 添加到 DNS 列表中。

我使用了实际 Azure 的 DHCP 服务器的 IP，它实际上与 DNS 服务器地址相同（在您的虚拟网络中已经运行的任何 VM 中运行时，您可以随时找到它 ipconfig -all，搜索 DHCP）

当我将此IP添加到虚拟网络的DNS列表中时，我可以像在冰上一样从VM浏览互联网;-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T05:45:26.853

看起来我在安装活动目录和升级到域控制器之前尝试访问 Internet 是超前的。经过以下两个步骤，我现在可以访问谷歌了。

```
# Install AD Role
    Install-WindowsFeature -Name AD-Domain-Services
    Install-WindowsFeature -Name RSAT-ADDS

# promote to DC (http://www.falconitservices.com/support/KB/Lists/Posts/Post.aspx?ID=90)
# this command will restart machine
    Import-Module ADDSDeployment
    Install-ADDSForest -CreateDnsDelegation:$false -DatabasePath "F:\NTDS" -DomainMode "Win2012" -DomainName "x2013xxxx.com" -DomainNetbiosName "X2013xxxx" -ForestMode "Win2012" -InstallDns:$true -LogPath "F:\NTDS"         -NoRebootOnCompletion:$false -SysvolPath "F:\SYSVOL" -Force:$true 
```

# php - 如何更改 Wordpress 导航菜单的默认 ID 和类别

> ID：15104485
> 
> 赞同：-1
> 
> 时间：2013-02-27T04:53:51.507
> 
> 标签：php, html, css, wordpress

Wordpress 菜单生成的 html 类似于

```
<ul id="main-menu">
<li> home </li>
<li> About </li>
 ......
...
           <ul class = "sub-menu">

        <li> sub menu1 </li>
        <li> sub menu1 </li>

           </ul>
<li> contact us </li>
  </ul> 
```

是否可以为`ul`s 和`li`s 提供自定义 id 和类名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:00:37.537

您可以在 WP 管理菜单的编辑器菜单中更改所需的所有内容。

您可以使用自定义 id 和类编辑您的 html 和 css

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T05:21:01.743

我将 WP 与 Bootstrap 集成，尽管我使用了这个：

```
<div class="navbar">
   <div class="navbar-inner">
       <div class="container">
       <ul class="nav">
           <?php wp_list_pages(array('title_li' => '')); ?>
       </ul>
       </div>
   </div>
</div> 
```

我还想将我的类活动应用到当前菜单项，所以我使用了：

```
$(document).ready( function ( e ) {
    $('.current_page_item').addClass('active');
}); 
```

希望这能给你一些想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T09:53:40.770

在 header.php 和 footer.php 文件中查找 wp_nav_menu，并将其替换为以下代码：

```
<?php

$defaults = array(
 'menu_class'      => ' - your special class for the UL -',
 'menu_id'         => ' - your special ID for the UL - ',
 'echo'            => true,
 'fallback_cb'     => 'wp_page_menu',
 'items_wrap'      => '<ul id="%1$s" class=" - your specific class for the LIs - ">%3$s</ul>',
 'depth'           => 0,
 'walker'          => ''
);

wp_nav_menu( $defaults );

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T05:13:16.793

您可以使用 Wordpress walker 类更改有关自动生成的菜单和树标记的任意数量的内容。

[http://codex.wordpress.org/Function_Reference/Walker_Class](http://codex.wordpress.org/Function_Reference/Walker_Class)

在资源部分的该链接底部附近有一个 wp_nav_menu 的示例walker。

[编辑：对于具有默认值的菜单项，您可以使用菜单编辑器为条目 li 输入一个类。您只需要先打开屏幕选项中的选项。]

# sql - 在 T-SQL 中遍历 XML

> ID：15104493
> 
> 赞同：0
> 
> 时间：2013-02-27T04:54:29.993
> 
> 标签：sql, sql-server, xml, tsql, openxml

我想问一下是否有一种简单的方法可以使用 T-SQL 遍历我的 XML 数据。

我的 xml 看起来像：

```
<node_1>
  <set attribute4="text">
    <CONDS>
      <COND variable="a" value="text1" attribute3="text1"> //if a == text1 
        <COND variable="b" value="text1" attribute3="text1"> //(and)b == text 1(and)
          <COND variable="c" value="text1" attribute3="text1"/> //(and)c == text1 
          <COND variable="c" value="text1" attribute3="text1"/> //(or)c == text2
        </COND>
      </COND>
      <COND variable="a" value="text1" attribute3="text1"> //or a == text1
    </CONDS>
  </set>
</node_1> 
```

我基本上需要遍历所有`<COND>`节点。这些节点实际上稍后用作 SQL 查询条件（`WHERE`子句）并评估输入集。一个`<COND>`元素及其子元素代表一个`AND`条件，`<COND>`处于同一级别的元素是一个 OR 条件。

我的目标是知道如何遍历这些节点。

我想我可以使用一堆代码来实现这一点，例如`openxml`（将整个 xml 转换为表）、cte（获取表和后代）和数据透视（将这些字段的表行设置为列），然后用于评估我的投入。但这将需要大量的循环和指标和/或条件，这使得它变得混乱且难以维护。

注意：node_1 是一个子元素，也可以重复

# arrays - 迭代 PowerShell 对象的子属性

> ID：15104495
> 
> 赞同：2
> 
> 时间：2013-02-27T04:54:32.730
> 
> 标签：arrays, powershell

```
PS C:\> $array

ReadWrite(AllHostsSpecified) : 
ReadOnly(AllHostsSpecified)  : 
ReadWrite(NegateSpecified)   : 
ReadWrite(Negate)            : 
SecFlavor                    : sys
ActualPathname               : 
ReadOnly(AllHosts)           : 
ReadOnly(Name)               : 
ReadWrite(Name)              : 
Anon                         : 
Root                         : {vin1,vin2,vin3,vin4...}
ReadOnly(NegateSpecified)    : 
ReadWrite(AllHosts)          : 
NosuidSpecified              : False
Nosuid                       : 
ReadOnly(Negate)             : 
Pathname                     : /vol/vin_binaries 
```

嗨，伙计们，我有属性根，它是一个动态属性，可以从 (vin1,vin2,vin3,vin4.......) 变化，甚至可以无穷无尽。

现在，当我执行 export-csv 时，我需要如下获取输出对象

```
ReadWrite(AllHostsSpecified) : 
ReadOnly(AllHostsSpecified)  : 
ReadWrite(NegateSpecified)   : 
ReadWrite(Negate)            : 
SecFlavor                    : sys
ActualPathname               : 
ReadOnly(AllHosts)           : 
ReadOnly(Name)               : 
ReadWrite(Name)              : 
Anon                         : 
Root (Property 1)                         : vin1
Root (Property 1)                         : vin2
Root (Property 1)                         : vin3
Root (Property 1)                         : vin4
.
.
.
.

Root (Property n)                         : vinn

ReadOnly(NegateSpecified)    : 
ReadWrite(AllHosts)          : 
NosuidSpecified              : False
Nosuid                       : 
ReadOnly(Negate)             : 
Pathname                     : /vol/vin_binaries 
```

有没有办法可以做到这一点？就像在 for 循环中迭代 Root 的所有属性？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:48:29.940

尝试这样的事情：

```
filter ExpandProperties {
    $obj = $_
    $obj | gm -MemberType *property | % {
        #Find objects with array value
        if( @($obj.($_.Name)).Count -gt 1 ) {
            $count = 1
            $prop = $_.Name
            $obj.($prop) | % {
                #Foreach value in the property
                $obj | Add-Member NoteProperty -Name "$prop (Property $($count))" -Value $_
                $count++
            }
        }
    }
    #Output object
    $obj
}

$o1 = New-Object psobject -Property @{
    Name = @("Name1", "Name2")
    Root = @("vin1","vin2")
}
$o2 = New-Object psobject -Property @{
    Name = "Name2"
    Root = @("vin1","vin2","vin3")
}
$o = $o1, $o2

$o | ExpandProperties

Name              : {Name1, Name2}
Root              : {vin1, vin2}
Name (Property 1) : Name1
Name (Property 2) : Name2
Root (Property 1) : vin1
Root (Property 2) : vin2

Name              : Name2
Root              : {vin1, vin2, vin3}
Root (Property 1) : vin1
Root (Property 2) : vin2
Root (Property 3) : vin3 
```

这也显示了原始数组属性（例如“Root”）。如果要排除它，则需要`select -exclude ...`在函数内部使用。但是，这会创建一个新的“pscustomobject”（您会丢失原始对象类型），因此我没有将其包含在上面的解决方案中。

# c# - 如果我知道变量的字符串名称，如何设置变量的值？

> ID：15104499
> 
> 赞同：3
> 
> 时间：2013-02-27T04:54:45.177
> 
> 标签：c#, variables

我有课

```
public class Rule
{
    public int IdRule { get;set;}
    public string RuleName { get; set; }
} 
```

我有带有值的哈希表列表。有键“idRule”、“ruleName”。例子

```
List<Hashtable> list = new Hashtable();
list["idRule"] = 1;
list["ruleName"] = "ddd"; 
```

我有功能：

```
private static List<T> Equaler<T>(T newRule)
{
   var hashTableList = Sql.Table(NameTable.Rules); //Get table from mssql database
   var list = new List<T>();
   var fields = typeof (T).GetFields();

   foreach (var hashtable in hashTableList)
   {
       var ormRow = newRule;
       foreach (var field in fields)
       {
            ???what write this???
            // i need something like 
            //ormRow.SetValueInField(field, hashtable[field.Name])

       }
       list.Add(ormRow);
   }
   return list;
} 
```

调用这个函数：

```
var rules = Equaler<Rule>(new Rule()) 
```

问题：如果我知道变量的字符串名称，如何设置变量的值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T04:57:43.347

您可以使用反射来执行此操作。

```
string value = hashtable[field];
PropertyInfo property = typeof(Rule).GetProperty(field);
property.SetValue(ormRow, value, null); 
```

由于您知道类型是 Rule，您可以使用`typeof(Rule)`来获取 Type 对象。但是，如果您在编译时不知道类型，您也可以使用它`obj.GetType()`来获取 Type 对象。还有一个补充属性`PropertyInfo.GetValue(obj, null)`，它允许您仅使用属性的“字符串”名称来检索值。

参考：http: [//msdn.microsoft.com/en-us/library/xb5dd1f1.aspx](http://msdn.microsoft.com/en-us/library/xb5dd1f1.aspx)

# python - numpy genfromtxt 中的转换器选项不接受 -ve 列索引

> ID：15104500
> 
> 赞同：1
> 
> 时间：2013-02-27T04:54:48.947
> 
> 标签：python, input, numpy, genfromtxt

我只想加载文本文件中的最后几列并进行一些评估。

我使用带有参数 converters={-1:func,-2:func} 的 numpy.genfromtxt

但它不起作用。另一方面，如果我像 converters={56:func,57:func} 这样的前向索引它可以正常工作。

为什么转换器参数不支持 python 的后向索引？如果我只知道最后一列的索引，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-12T13:20:44.650

使用`numpy.loadtxt`它可以工作，您可以使用该`converters`参数来定义您的功能。有一个`tmp.txt`文件：

```
11,12,13,14,15,16,17,18,19
21,22,23,24,25,26,27,28,29
31,32,33,34,35,36,37,38,39
41,42,43,44,45,46,47,48,49
51,52,53,54,55,56,57,58,59 
```

您可以加载选定的列（也选择您希望它们堆叠的顺序）：

```
import numpy as np
print np.loadtxt('tmp.txt',delimiter=',',usecols=(-2,-1))
#[[ 18\.  19.]
# [ 28\.  29.]
# [ 38\.  39.]
# [ 48\.  49.]
# [ 58\.  59.]]
print np.loadtxt('tmp.txt',delimiter=',',usecols=(-1,-2),converters={-1: lambda x: float(x)+100})
#[[ 119\.   18.]
# [ 129\.   28.]
# [ 139\.   38.]
# [ 149\.   48.]
# [ 159\.   58.]] 
```

# c++ - 您如何才能准确地看到内存泄漏的内容？

> ID：15104501
> 
> 赞同：0
> 
> 时间：2013-02-27T04:54:49.510
> 
> 标签：c++, windows, qt, memory

例如，对于 Windows 逻辑使用任务管理器。但是有人说这个实用程序没有显示用户分配的内存的确切值。那我在哪里可以看到呢？

我不信任所有计算 New\Delete 的类。智能指针也不是保证结果。我想看看出口的情况。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T05:01:36.157

我假设您期望 Windows 平台的答案。

[Rational Purify](http://www-01.ibm.com/software/awdtools/purify/)和[Insure++](http://www.parasoft.com/jsp/products/insure.jsp;jsessionid=aaahzrRD2vGtyL?itemId=63)能够做到这一点。

编辑：刚看到[一个类似的问题](https://stackoverflow.com/questions/413477)。

# android - Cocos2d 游戏在 android 中因 java.util.ConcurrentModificationException 而崩溃

> ID：15104514
> 
> 赞同：0
> 
> 时间：2013-02-27T04:56:03.337
> 
> 标签：android, cocos2d-iphone

我正在开发 android cocos2d 中的游戏。

除了这次随机崩溃之外，一切都运行良好。

当我尝试替换场景时，它给了我下面的异常是相同的堆栈跟踪：

```
java.util.ConcurrentModificationException

at java.util.ArrayList$ArrayListIterator.next(ArrayList.java:569)

at org.cocos2d.nodes.CCNode.onEnter(CCNode.java:1351)

at org.cocos2d.layers.CCLayer.onEnter(CCLayer.java:173)

at org.cocos2d.nodes.CCNode.onEnter(CCNode.java:1352)

at org.cocos2d.layers.CCLayer.onEnter(CCLayer.java:173)

at org.cocos2d.nodes.CCNode.onEnter(CCNode.java:1352)

at org.cocos2d.nodes.CCDirector.setNextScene(CCDirector.java:1238)

at org.cocos2d.nodes.CCDirector.drawCCScene(CCDirector.java:705)

at org.cocos2d.nodes.CCDirector.onDrawFrame(CCDirector.java:665)

at org.cocos2d.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1245)

at org.cocos2d.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1056) 
```

这是我替换场景的代码：

```
CCDirector.sharedDirector().replaceScene(GameLayer.scene(activityContext,null)); 
```

它可以正常工作一段时间，但一段时间后它会崩溃并再次开始正常工作，然后在一段时间后再次崩溃。

请建议我一些解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T05:27:14.880

异常表明列表在被迭代时正在被修改。鉴于调用堆栈，Cocos 似乎正在迭代场景中的节点以绘制它们。发生这种情况时，似乎正在从场景中添加或删除节点。

这可能是因为您正在修改场景：

1.  在节点的绘图回调中；或者
2.  来自不同的线程（即不是 OpenGL 线程），因此与绘图竞争。

检查您在场景中添加或删除东西的位置，以确保它不会在绘制时发生，并且只能从正确的线程（或适当的同步）完成。

# jquery - 使用图像块设计网站

> ID：15104517
> 
> 赞同：0
> 
> 时间：2013-02-27T04:56:23.343
> 
> 标签：jquery, image

我正在尝试实现一种设计，除了 之外`nav`，还有一部分图像填满页面，如瓷砖。但是这些图像是专辑封面，所以它们通常（除了例外）在宽度和高度方面是相等的。

困难的部分是我试图在全屏（宽度方向）中执行此操作，以便图像排列的部分调整到用户的 PC 屏幕尺寸。目前，HTML 如下所示：

```
<section id="wrapper">
    <section id="cont">
        <section class="row1">
            <div>
                <img src="./img/album/#.jpg" />
            </div>
            <div>
                <img src="./img/album/#.jpg" />
            </div>
            <div>
                <img src="./img/album/#.jpg" />
            </div>
            <div>
                <img src="./img/album/#.jpg" />
            </div>
            <div>
                <img src="./img/album/#.jpg" />
            </div>
        </section>
    </section>
</section> 
```

所以，每一个`div`都是给定`width: 20%`的，使一个部分在 5 秒内分布在整个页面上`div`。图像是`width: 100%`, 以便它们完全填写每个`div`。然后，我添加另一个`section`来制作第二行，依此类推。

我的问题是，我应该如何正确实现这一点，并且使用最少的编码（为了用户体验）。我尝试过使用 jQuery Masonry，但它与我想要的有点不同。有什么建议么？

* * *

*稍后添加

我还想补充一点，其中一些图块将包含文本，但 div 的大小可能不同，即与图像相同，但长度更长。另外，我希望能够通过 JS 或类似的东西为 section#cont 设置一个高度，这样我就可以在它下面放置一个页脚。

这是当前的设计。我想让它说，最远的专辑封面可以替换为包含文本的彩色、不同大小的 div，但随后的 div 将紧密配合。

[img] [http://automaton-hacks.tumblr.com/image/44124223193](http://automaton-hacks.tumblr.com/image/44124223193)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T05:36:23.047

也许你正在寻找这个：[**在这里小提琴**](http://jsfiddle.net/uUZtr/)

## CSS：

```
section{
    width:100%; 
    clear:both;
}

div{
   width:20%; 
   float:left; 
   background:#e1e1e1;
}

img{
  width:100%; 
  height:100%;
} 
```

## html:

```
<section class="row1">
   <div>
      <img src="http://cdn5.iconfinder.com/data/icons/jeans-pocket-social-media-icon-set/128/facebook.png" />
   </div>
   <div>
      <img src="http://cdn5.iconfinder.com/data/icons/jeans-pocket-social-media-icon-set/128/facebook.png" />
   </div>
   <div>
      <img src="http://cdn5.iconfinder.com/data/icons/jeans-pocket-social-media-icon-set/128/facebook.png" />
   </div>
   <div>
      <img src="http://cdn5.iconfinder.com/data/icons/jeans-pocket-social-media-icon-set/128/facebook.png" />
      <p>This is content for img. This is content for img. This is content for img. This is content for img. This is content for img. This is content for img. </p>
   </div>
   <div>
      <img src="http://cdn5.iconfinder.com/data/icons/jeans-pocket-social-media-icon-set/128/facebook.png" />
   </div>
</section> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T05:01:32.110

尝试使用 HTML 表格，我想？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T05:09:52.887

我认为您正在寻找的是网格系统。我推荐[http://960.gs](http://960.gs)。

您也可以尝试使用百分比而不是固定列数的[http://unsemantic.com/ 。](http://unsemantic.com/)

这些通过将总页面分成相等的列来工作。您可以根据带有 css 媒体查询的窗口大小选择要使用的列数。因此，通过这样做，您可以设置每行自动显示多少个 img。

它在没有任何这些 table shmables 的情况下完成所有这些。看看它，你可能会喜欢它。

# android - 响应式网站 - 只有 Android 立即开始在加载时持续放大

> ID：15104523
> 
> 赞同：3
> 
> 时间：2013-02-27T04:57:06.183
> 
> 标签：android, html, responsive-design, media-queries

我在搜索该问题时没有发现任何类似的问题。

网站：[http](http://davidbrownhydraulics.com) ://davidbrownhydraulics.com （旧设计，不是我的）

适用于：iPhone 4/5/iPad/等

不适用于：Android 手机... Galaxy S2 和其他 Galaxy。（需要在 Android 手机上实际加载它，看看它是如何工作的）

我在测试这个网站时得到的是应该首先出现的响应式视图，但很快它就会不断扩展。就好像浏览器决定永远，不断地放大。我试图指出可能导致该问题的位置，它应该捕捉到最大设备宽度，或者我可以以某种方式一次性定位 Android 手机？

**有人有什么想法我可以尝试吗？**我尝试了很多不同的 META 内容类型的东西，改变了断点（我觉得它可能对 Galaxy s2 关闭？或者 android 有不同的像素规模）无济于事。

以下是编码的相关部分：

头部元：

```
<meta http-equiv="Content-Type" name="viewport" content="charset=UTF-8, width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" /> 
```

媒体查询：

```
@media screen and (max-device-width:767px) 
```

我的 CSS 给它：（想法它只会捕捉到最大设备宽度）

```
html { width:100%; overflow-x:hidden; }
body { width:100%; overflow-x:hidden; }
#outer { width:100%; }
#main { width:100%; }
#header { width:100%; max-width:100%; overflow:hidden; } 
```

在此先感谢，如果有人尝试将其加载到他们的 Android 手机上并让我知道他们的想法，我们将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T01:11:23.243

好吧，再看看这一切，我已经调整了我的 CSS 媒体查询（如果需要，请参阅源代码），但这个主要的编码部分有所帮助。看起来试图在所有东西上设置 100% 的宽度会使某些东西爆炸，导致 android 变得怪异。

将它放在我的 css 断点下（并根据您自己的需要对其进行修改，如果这对某人有帮助）已经帮助并保持网站现在可浏览。一个很好的快速修复。

```
html { width:100%; overflow-x:hidden; max-width:480px !important; }
body { width:100%; overflow-x:hidden; max-width:480px!important; }
img { max-width:480px !important;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:36:37.677

设置视口告诉浏览器内容应该如何适应设备的屏幕，并通知浏览器该站点已针对移动设备（Android、Windows、iOS）进行了优化。告诉浏览器将视口设置为具有初始比例的设备宽度1。

尝试这个。

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"> 
```

这将在所有视口上完美运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T23:31:39.833

几个小时后，我试图弄清楚为什么，我意识到这正是 Android 在 CSS 中获取它所需要的：

```
@media screen 
```

不会拾取观点。我把它改成

```
@media all 
```

并且工作正常:) 啊！简单的事情...

# arrays - 如何从列表中均匀删除特定数量的行？

> ID：15104532
> 
> 赞同：0
> 
> 时间：2013-02-27T04:58:19.780
> 
> 标签：arrays, list

我想编写逻辑以从列表中删除特定数量的行，并且我想尽可能均匀地选择要删除的行。当我想从列表中删除 25% 或 50% 时，这很容易，我只需编写逻辑以分别删除每 4 行或 2 行。但是，我如何编写逻辑以允许我删除一个不能完全划分的数字，并且仍然尽可能均匀地保持它的间距？

例如，在 1000 个列表中，我如何确定要删除哪些行以便尽可能均匀地删除其中的 40%？我知道我有时需要每隔三行 (33%) 删除一次，有时每隔二行 (50%) 需要删除一次，但我还没有想出例行程序来确定要删除哪些行，以便在整个过程中尽可能保持均匀名单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T05:17:46.000

基本思想是首先计算出在删除一条记录之前需要经过多少条记录——这必须是一个浮点数。例如：

```
percentage = 37.0
lineCount = 912.0
deleteEveryN = 100.0 / percentage    # ~2.702 lines 
```

然后，您只需计算行数，删除每个相关的行。通过使用浮点，您可以避免只删除每一`N`行的情况 - 有时它可能是`N-1`或`N+1`，具体取决于值。

```
countToNextDeletion = deleteEveryN / 2
foreach line:
    countToNextDeletion = countToNextDeletion - 1.0
    if countToNextDeletion <= 0.0:
        delete line
        countToNextDeletion = countToNextDeletion + deleteEveryN 
```

我们将行数初始化`countToNextDeletion`为*一半*的原因是尽可能平衡两端（使删除在中点周围对称）。这是我从画线算法中学到的一个技巧（来自 Bresenham，来自记忆）。否则，您可能不会像预期的那样删除，因为您在最终组中只有 97% 没有到达删除点。

您可以使用以下 Python 程序查看此算法的实际效果：

```
percentage = 37
lineCount = 97
deleteEveryN = 100.0 / percentage
print "Delete every %f" % deleteEveryN

delCount = 0
countToNextDeletion = deleteEveryN / 2
for n in range (lineCount):
    countToNextDeletion = countToNextDeletion - 1.0
    if countToNextDeletion <= 0.0:
        print "Deleting %d" % n
        delCount = delCount + 1
        countToNextDeletion = countToNextDeletion + deleteEveryN

print "Deleted %d/%d (%f%%)" % (delCount, lineCount, delCount*100.0/lineCount) 
```

其输出是（稍微修改输出以节省垂直空间）：

```
pax> python testprog.py
Delete every 2.702703
Deleting 1
Deleting 4
Deleting 6
Deleting 9
Deleting 12
Deleting 14
Deleting 17
Deleting 20
Deleting 22
Deleting 25, 28, 31, 33, 36, 39, 41, 44, 47, 49, 52, 55, 58
Deleting 60, 63, 66, 68, 71, 74, 77, 79, 82, 85, 87, 90, 93
Deleting 95
Deleted 36/97 (37.113402%) 
```

`everyN`您可以在那里看到，它有时会每隔两行删除一次，有时每隔三行删除一次，具体取决于阈值（因为值为 ，所以三行多于二行`2.7ish`）。

最后一行还表明这是给定数据的最佳匹配：

```
linesDeleted/lineCount  percentage  deltaPercentage (from 37)
======================  ==========  =========================
                 35/97  36.0824742      0.9175258
                 36/97  37.1134021      0.1134021 <== closest
                 37/97  38.1443299      1.1443299 
```

* * *

只是为了展示它在前几次迭代中`countToNextDeletion`是如何工作的，最初设置为`2.7027027 / 2`or `1.3513514`。对于第一行`0`，我们添加`1`到 get`2.3513514`但不超过阈值。

第二行`1`，我们添加`1`得到高于阈*值*`3.3513514`的值，因此我们删除该行并减去得到的阈值。*`0.6486487`*

 *然后需要*另外*三行将我们推到阈值以上`3.6486487`，此时我们删除该行`4`并减去阈值得到`0.945946`。

从那里只需要另外*两条*线即可到达`2.945946`阈值以上，因此我们删除`6`并减去阈值即可获得`0.2432433`。

所以基本上，你会非常详细地记住（浮点）你在列表中的位置，但只在整数边界上删除。*

# scala - Scala 中的“20 秒”是如何工作的？

> ID：15104536
> 
> 赞同：137
> 
> 时间：2013-02-27T04:58:35.020
> 
> 标签：scala, duration

以下如何编译：

```
import scala.concurrent.duration._

val time = 20 seconds 
```

这里到底发生了什么？

* * *

## 回答 #1

> 赞同：178
> 
> 时间：2013-02-27T05:22:53.637

有几件事正在发生。

首先，Scala 允许在许多方法调用中省略点和括号，因此`20 seconds`等价于`20.seconds()`*.

其次，应用“隐式转换”。由于`20`is an`Int`并且`Int`没有`seconds`方法，因此编译器会搜索一个隐式转换，该转换接受 an`Int`并返回*具有*方法的内容`seconds`，搜索受方法调用范围的限制。

您已将[DurationInt](http://www.scala-lang.org/api/current/#scala.concurrent.duration.package$$DurationInt)导入您的范围。由于`DurationInt`是一个带`Int`参数的隐式类，它的构造函数定义了一个隐式`Int => DurationInt`转换。`DurationInt`有一个`seconds`方法，所以它满足所有的搜索条件。因此，编译器将您的调用重写为`new DurationInt(20).seconds`**。

*我的意思是松散的。`20.seconds()`实际上是无效的，因为该`seconds`方法没有参数列表，因此*必须*在方法调用上省略括号。

**实际上，这并不完全正确，因为`DurationInt`它是一个值类，因此编译器会尽可能避免包装整数。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-27T05:07:13.640

那里发生的“魔术”称为“隐式转换”。您正在导入隐式转换，其中一些处理 Int（和 Double）到 Duration 之间的转换。这就是你正在处理的事情。

# javascript - 如何使用 javascript 将 div 定位在另一个 div 的顶部？

> ID：15104538
> 
> 赞同：14
> 
> 时间：2013-02-27T04:58:59.763
> 
> 标签：javascript, jquery, css, dom, position

第一个 div 是`'#icon-selection-menu'`bar，它的空闲位置是*绝对*的，带有`top:0px`and `left:0px`。所以它出现在内容 div 的左上角。

在内容 div 孩子的深处，我得到了其他 div，它们实际上是一种“.emoticon-button”。他们的位置在他们的父母内部是相对的。在这样的按钮单击上，我想将第一个 div 定位在按钮上方，将其底部边框调整为按钮的顶部边框。

如何获取*顶部*和*左侧*值来设置`$('#icon-selection-menu').top`和`$('#icon-selection-menu').left`？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-27T05:18:53.197

jQuery ¹提供[**`.offset()`**](http://api.jquery.com/offset/)了获取任何元素相对于文档的位置。由于`#icon-selection-menu`已经相对于文档定位，您可以使用它：

```
var destination = $('.emoticon-button').offset();
$('#icon-selection-menu').css({top: destination.top, left: destination.left}); 
```

`$('#icon-selection-menu')`将放置在 的左上角`$('.emoticon-button')`。

[(1) jQuery 假定由于`$`在问题中使用。]

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-27T05:38:25.440

您可以使用 offsetTop 和 offsetLeft 获取 div 的顶部和左侧位置

示例：`

```
$('#div-id').offset().top;
$('#div-id').offset().left; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-01-19T22:45:09.460

Javascript 具有 @bfavaretto 提到的内置版本。它比 Jquery 版本长一点，但是像我这样不使用 Jquery 的人可能需要它。

```
var iconselect = document.getElementById("icon-selection-menu");
var emoticonbtn = document.getElementById("emoticon-button");
var oTop = emoticonbtn.offsetTop;
var oLeft = emoticonbtn.offsetLeft;
iconselect.style.top = oTop;
iconselect.style.left = oLeft;
iconselect.style.position = "absolute"; 
```

当然，您可以向该系统添加单位，例如 px 或其他东西。请注意，我上面所做的只是一个示例，适用于两个具有 ID 的单独元素，而不是类。代码的前两行将根据您的代码而有所不同。元素`iconselect`是我要对齐的元素，元素`emoticonbtn`是您按下以使其`iconselect`出现的按钮。代码中最重要的部分总结如下：

```
elementtomove.offsetTop; //distance from top of screen
elementtomove.offsetLeft; //distance from left of screen 
```

希望这对不愿意使用JQUERY的人有所帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T05:07:34.107

您可以使用以下 jquery 获取元素的位置

```
var position=$('#icon-selection-menu').position();
var left=position.left;
var right=position.right 
```

并单击该按钮，您可以使用

```
$("#ID").live("click",function(){
    $('.emoticon-button').animate({left:left,right:right});
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T05:08:39.377

获取 '.emoticon-button' 位置（左，上）。然后将其应用于“#icon-selection-menu”。顶部和左侧会有一些调整以与表情符号对齐。

# c++ - 使用体素几何体进行光照贴图

> ID：15104542
> 
> 赞同：1
> 
> 时间：2013-02-27T04:59:20.663
> 
> 标签：c++, direct3d, directx-9, direct3d9

在编写游戏引擎的渲染端时，我现在似乎陷入了困境。我最初的计划是至少使用 HLSL 实现每个像素的动态光照，并让光照缓冲区与着色器通信，最多可以使用 8 个光照。

需要注意的是，到目前为止，我的整个地图都是由块组成的 3 维数组（64x64x64）。在一个非常基本的人脸减少算法之后，我正在查看 32x32x32x6 人脸，以便在最坏的情况下进行渲染。我将使用其他方法来减少负载，但首先我想解决这个问题。

目前，在着色器中有 8 个灯，我使用 GTX 470 获得了大约 60-120 的帧速率，这是一张不错的卡。显然，我必须研究许多其他优化，但由于动态光照对我来说并不重要（至少对于 8 盏灯来说不是），我一直在研究光照贴图。

如果我每个面有 4x4 流明，我正在为我的整个关卡的光照贴图寻找一个纹理图集，它是 32x32x32x6x16 大，每个像素 4 个字节。这就是我要使用的纹理，即 2048x2048（最接近的 2 次幂分辨率）。

我已经查看了几个来源，尤其是这个，[http://www.flipcode.com/archives/Light_Mapping_Theory_and_Implementation.shtml](http://www.flipcode.com/archives/Light_Mapping_Theory_and_Implementation.shtml)，虽然我掌握了如何使用基本场景来实现它，但我对如何我可以用我当前的几何情况来实现它。

所以这是我的问题。有一个更好的方法吗？这种大小的光照贴图可以使用吗？我对每张脸使用 4x4 lumels 感觉很舒服，因为双线性过滤最终似乎真的使事情变得平滑了。此外，将静态光照贴图系统与每像素动态的光照贴图系统与 HLSL 结合起来是否相当简单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-23T22:51:38.007

[http://www.rastertek.com/dx10tut18.html](http://www.rastertek.com/dx10tut18.html)

您使用的纹理将是“超级纹理”内的 4x4 迷你纹理。查看该链接，但老实说，您并没有付出太多。

# facebook - 在时间线上发布

> ID：15104543
> 
> 赞同：-1
> 
> 时间：2013-02-27T04:59:28.920
> 
> 标签：facebook, facebook-graph-api, facebook-wall

我们的 FB 应用程序要求在用户墙上发布一些内容，此活动由 FB 应用程序管理员（发布者）执行，他们选择内容并发布到墙上的用户列表。问题陈述：我们在 2013 年 2 月之前使用提要对话框更改为在时间线上发布的用户墙。现在我们无法在时间线上发布。请在 2013 年 2 月更改之前找到我的代码片段：

```
FB.api('/' + uid[i] + '/feed', 'post',  parameter) 
```

在 2013 年 2 月的更改之后，我们使用了更新的提要对话 API，之后我们无法在用户时间线上发布，它以新闻提要的形式出现。请找到我们的新代码片段：

```
var obj = {method: 'feed', to: '<%#fbid %>',  message: aMessage} 
```

我们查看了 facebook 开发者论坛并搜索了其他开发博客，但找不到任何有效且有效的解决方案。

我们很少有疑问，如果您能提供清楚的信息，这将有助于满足我们的客户要求，这将对我们有好处。

Query1：我们可以使用任何 FB api 在用户时间轴上发布（由未在其朋友列表中添加任何用户的管理员）？
Query2：提要对话框是否允许我们在用户时间轴上发布，如果是，请分享代码片段（技术堆栈：asp.net）？
Query3: facebook 有 api 来发送通知吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T06:54:10.687

首先，“管理员”或不是用户朋友的任何人都不能在用户的时间轴上发布任何内容。

如果您的管理员是用户的朋友，那么您可以使用“stream.share”在用户墙上发帖，使用 Facebook JavaScript SDK 作为

```
<script>
 var share = {
    method: 'stream.share',
    u: 'http://www.fbrell.com/'
 };

 FB.ui(share, function(){
       //Call back function
 });
</script> 
```

或者您仍然可以使用[Feed 对话框](https://developers.facebook.com/docs/reference/dialogs/feed/)并要求管理员在帖子上标记人员。

您可以使用扩展访问令牌发布到用户的墙上，就好像用户自己发布了内容一样，尽管我不建议您使用它来与用户交流，因为它可能是 Facebook 与用户交流政策的灰色地带。如果它是用于非用户通信消息，那么请确保您的用户知道这种行为是预期的。

您可以利用[通知 API](https://developers.facebook.com/docs/concepts/notifications/)与您的用户交流或重新与他互动。

# dll - 序数 4070 错误

> ID：15104547
> 
> 赞同：1
> 
> 时间：2013-02-27T04:59:57.390
> 
> 标签：dll

同时按 f5 在调试模式下在 VS2010 中运行我的项目。出现以下错误窗口**无法在动态链接库LIBEAY32.dll中找到序数4070**

> > 我在我的项目和**C:windows/system32**中检查了 dll 的版本。两者都是相同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-05T16:20:38.663

这是 openssl 的 CRYPTO_malloc_debug_init 函数的序数，它仅由 OpenSSL 的 0.9.8 版本（可能更旧）导出。

您项目中的某些内容与 OpenSSL 0.9.8 相关联。

# php - 将值从数组插入数据库

> ID：15104548
> 
> 赞同：-2
> 
> 时间：2013-02-27T04:59:58.767
> 
> 标签：php, mysql, arrays

我有一个包含 100 个值的数组。我想将前 10 个值插入到数据库表的第一行，即。前 10 个值（`col1,col2,...col10`）代表 db 表中的 10 列。我想将下一个 10 (11-20) 插入第二行。那么如何迭代那个特定的数组呢？

> 我使用了 if 子句，例如 if($key % 10 == 0)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T05:07:55.967

```
$my_array = array('a', 'a', 'a', 'a', 'a', 'a', 'a', 'a', 'a', 'a', 'b', 'b', 'b', 'b', 'b', 'b', 'b', 'b', 'b', 'b',);

$splited_array = array_chunk($my_array, 10);

foreach ($splited_array as $new_array) {

  print_r($new_array);
  // insert a new row with value of $new_array
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T05:06:31.060

试试这个 ：

```
$res    = array();
$row    = 0;
for($i=0;$i<count($array);$i++){
   if($i % 10 == 0 && $i != 0){
      $row++;
   }
   $res[$row][]  = $array[$i];
}

echo "<pre>";
print_r($res);

foreach($res as $val){
    $col1   = $val[0];
    $col2   = $val[1];
    ..... //// so on
    $col10   = $val[9];

    Insert into databse
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T05:11:29.997

```
//I assume you get this by magic
$inarray = array(...)

//create your command and specify your bound parameters
$stmt = $dbh->prepare("INSERT INTO table (c1, c2, cn..., c10) VALUES (:c1, :c2, ..., :c10)");
$stmt->bindParam(':c1', $c1);
$stmt->bindParam(':c2', $c2);
//...
$stmt->bindParam(':c10', $c10);

//loop over the array, hopping ten items at a time
for ($i = 0; $i < 100; $i += 10)
{
    // update the value of the bound parameter
    $c1 = $inarray[$i + 0];
    $c2 = $inarray[$i + 1];
    //...
    $c10 = $inarray[$i + 9];
    //execute the insert
    $stmt->execute();
} 
```

# jquery - Jquery 成功概念

> ID：15104550
> 
> 赞同：1
> 
> 时间：2013-02-27T05:00:01.073
> 
> 标签：jquery

我正在尝试使用 Jquery .ajax {type: get} 并且无法弄清楚成功功能的工作原理，文档并没有为我提供帮助。

1.  当我 .ajax{get} page.php 它从 page.php 抓取什么代码
2.  您在 Jquery 中使用什么变量/函数来获取 GET 数据（我在考虑 PHP $_get）
3.  当我从 page.php 获取数据时，它将采用完整的 HTML 格式并准备好应用于页面。我需要做的就是在现有数据下发布。我会在要粘贴 html 内容的 DIV 上使用 .appendto() 吗？

你们还知道任何好的Jquery书籍吗？不知何故，我只知道我会一直使用它，我也不妨学习一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T05:15:09.773

Ajax 的正确语法如下：

```
 jQuery.ajax({
           url: "", //here you need to give the full path of the URL.
           cache: true/false, //choose any one true if you want to enable the cache.
           type: "get/post", // any type which you want to choose to post the data.
           dataType: "text/html/json/jsonp/xml", //In your case choose the html.
           success: function(returnData){
               //here the returnData will be data that you print in file given in URL. 
               alert(returnData);
               $(".someDiv").append(returnData); //To answer #3
           },
           error: function(a,b,c){
               //call when any error occur.
           }
    }); 
```

我希望这对你有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T05:23:30.963

在成功函数中

`$.ajax({ success : function(retrunValues) { alert( retrunValues); } });`

您可以从后端页面获取任何数据。喜欢任何查询或任何事情的结果检查这个。

```
backendpage.php
<?php

echo "this data will be printed on the main page with ajax call";

?> 
```

所以这个来自 php 页面的数据会在`retrunValue`.`success function`然后你可以用你喜欢的方式使用它。

# perl - 使用可存储检索从文件中检索数组或字符串的基本问题

> ID：15104554
> 
> 赞同：0
> 
> 时间：2013-02-27T05:00:59.690
> 
> 标签：perl, storable

问题很简单，但我似乎找不到：

我将 a 存储`$string`到 a `$filename`：

`store [$tempstring], $filename2[$m];`

然后我尝试检索它：

`my $tempinput = retrieve ($filename2[$m]);`

我相信我只是得到参考，而不是字符串？我可以使用命令将数据转换回原始字符串吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T05:09:12.203

```
 my $ref = [ $tempstring ]; 
```

创建一个数组，分配`$tempstring`给它（将它放在第一个元素中），然后返回对该数组的引用。

因此，如果您想要返回字符串，则需要获取引用数组的第一个元素的值。

```
 $ref->[0] 
```

* * *

如果你做了

```
 my $ref = \$tempstring; 
```

而不是不必要地创建一个数组，你只需做

```
 $$ref 
```

获取字符串。

# c++ - 如何从 C++ 中的另一个主函数调用 Google 测试

> ID：15104556
> 
> 赞同：1
> 
> 时间：2013-02-27T05:01:10.213
> 
> 标签：c++, unit-testing, tdd, stack, googletest

我正在尝试创建一个堆栈并在使用 C++ Google 测试框架的实验中使用 Google 测试对其进行测试。我已经设置了结构，所以我有一个 stack.h 和 stack.cpp 用于实现，然后我有一个带有以下代码的 tests.cpp。我有几个问题：首先，是否可以像我所做的那样从 main 调用我的测试函数？另外，我是否正确地包括了所有内容？为什么会发生构建错误？抱歉，我是 C++ 新手，提前感谢您的帮助。这是代码和错误：

```
#include "stack.h"
#include "gtest/gtest.h"

TEST (StackTest, PushAndPeek) {
    Stack<int> intStack;
    int a = 12;
    int b = 15;
    EXPECT_EQ (12, intStack.push(a));
    EXPECT_EQ (15, intStack.push(b));
    EXPECT_EQ (15, intStack.peek()); //make sure adding in LIFO Order
    EXPECT_EQ (15, intStack.peek()); //Should still be there
}

TEST (StackTest, PushAndPop) {
    Stack<int> intStack;
    int a = 12;
    int b = 15;
    EXPECT_EQ (12, intStack.push(a));
    EXPECT_EQ (15, intStack.push(b));
    EXPECT_EQ (15, intStack.pop()); //make sure adding in LIFO Order
    EXPECT_EQ (12, intStack.pop()); //Should have removed 15, then removed 12
    EXPECT_EQ (-1, intStack.pop()); //Should return -1 because there is nothing on the stack
} 
```

然后在我的 main.cpp 我有：

```
#include <iostream>
#include <string>
#include "gtest/gtest.h"
#include "stack.h"
using namespace std;

int main(int argc, char * argv[])
{
    string input;
    cout << "Hey there! If you wanna run the tests, type in tests. \nOther wise just hit enter to continue...\n";
    getline (cin, input);
    if(input == "tests"){
        ::testing::InitGoogleTest(&argc, argv);
        return RUN_ALL_TESTS();
    }

    return 0;
} 
```

但是，我正在使用 XCode 进行编译，但由于以下原因无法构建：

```
Undefined symbols for architecture x86_64:
  "Stack<int>::pop()", referenced from:
      StackTest_PushAndPop_Test::TestBody() in tests.o
  "Stack<int>::peek()", referenced from:
      StackTest_PushAndPeek_Test::TestBody() in tests.o
  "Stack<int>::push(int&)", referenced from:
      StackTest_PushAndPeek_Test::TestBody() in tests.o
      StackTest_PushAndPop_Test::TestBody() in tests.o
  "Stack<int>::Stack()", referenced from:
      StackTest_PushAndPeek_Test::TestBody() in tests.o
      StackTest_PushAndPop_Test::TestBody() in tests.o
  "Stack<int>::~Stack()", referenced from:
      StackTest_PushAndPeek_Test::TestBody() in tests.o
      StackTest_PushAndPop_Test::TestBody() in tests.o
  "testing::internal::EqFailure(char const*, char const*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, bool)", referenced from:
      testing::AssertionResult testing::internal::CmpHelperEQ<int, int>(char const*, char const*, int const&, int const&) in tests.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

编辑：通过包含 stack.cpp 我解决了与此相关的错误，但我仍然有以下错误：

```
Undefined symbols for architecture x86_64:
  "testing::internal::EqFailure(char const*, char const*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, bool)", referenced from:
      testing::AssertionResult testing::internal::CmpHelperEQ<int, int>(char const*, char const*, int const&, int const&) in tests.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T08:26:08.600

乍一看，你好像在模板上犯了一个初学者的错误：模板必须在头文件中实现，你不能像普通的类和函数那样在头文件和 .cpp 文件中将它们分开。只需在 SO 上[搜索“未定义的引用”和“模板”](https://stackoverflow.com/search?q=undefined%20reference%20template)，您就会得到很多关于这件事的信息 :-)

# java - 我可以使用 Glassfish 从多个虚拟客户端访问 localhost 吗？

> ID：15104558
> 
> 赞同：1
> 
> 时间：2013-02-27T05:01:21.067
> 
> 标签：java, jakarta-ee, glassfish, client-server

我正在学习编写 Java 企业版应用程序（Web 应用程序）。为了测试我的编码的正确性，我需要多个客户端同时访问我的项目（即测试并发性），这些项目使用 glassfish 部署并在 localhost 上访问，不幸的是，我尝试使用多个网络浏览器，结果解释告诉我我我只使用同一个客户访问我的项目，所以这是我的问题：

我可以使用 Glassfish 从多个虚拟客户端访问 localhost 吗？

你有一个工具的名字来模拟来自同一台机器的虚拟客户端来测试我的编码吗？

编辑：我需要的是使用某种浏览器客户端为多个并发用户访问我的项目，以测试棋盘游戏或聊天应用程序之类的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T05:21:41.120

不是本地主机；但你需要找到你的服务器的IP地址。然后使用服务器 ip 地址你可以测试为**127.12.13.45:8080/app**

所以使用ip地址代替localhost；您可以从不同的客户端机器测试您的应用程序。

除此之外; 您还可以使用一些测试工具，这些工具允许您从同一台机器模拟多个客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T13:25:49.987

你考虑过[Apache JMeter](http://jmeter.apache.org/)吗？它可以（除其他外）模拟多个并发用户。

# bash - 发到 bash 脚本中的日志，同时将标准输出保留为 TTY

> ID：15104559
> 
> 赞同：0
> 
> 时间：2013-02-27T05:01:21.650
> 
> 标签：bash, shell, redirect, stdout, tee

类似于[从 bash 脚本本身将 stdout 的 COPY 重定向到日志文件](https://stackoverflow.com/questions/3173131/redirect-copy-of-stdout-to-log-file-from-within-bash-script-itself)，但我也想将 stdout 保留为 TTY 设备。

例如，我有以下脚本：

```
/tmp/teed-off$ cat some-script
#!/usr/bin/env ruby

if $stdout.tty?
  puts "stdout is a TTY"
else
  puts "stdout is NOT a TTY"
end 
```

```
/tmp/teed-off$ cat wrapper 
#!/usr/bin/env bash

exec > >(tee some-script.log)

./some-script 
```

当我运行它们时，包装器将 stdout 作为 TTY 设备吃掉：

```
/tmp/teed-off$ ./some-script 
stdout is a TTY
/tmp/teed-off$ ./wrapper 
stdout is NOT a TTY 
```

我怎样才能翻转这种行为，以便脚本即使通过包装器执行也相信它在 TTY 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T05:35:31.663

这不是微不足道的，但我认为你可以通过伪 tty 来做到这一点。我不确定是否有任何标准工具，除了也许[`expect`](http://expect.nist.gov/)，可以为你做这件事。

这需要一点思考。您将有一个控制程序来打开伪 tty 主机，然后是从机。从站将连接到 ./some-script 的输出。主控程序将被控制程序读取，它将从主控程序读取的数据复制到文件和标准输出中。

我没有尝试过编码。我不确定您是否可以使用标准的 shell 命令来做到这一点；我想不出任何办法。所以，我认为会有一些 C 编码要做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T05:08:22.250

寻找 dup2 它复制了一个文件描述符

> int dup2（int oldfd，int newfd）；

# ios - NSDateFormatter 错误，返回日期一年前

> ID：15104564
> 
> 赞同：1
> 
> 时间：2013-02-27T05:01:42.773
> 
> 标签：ios, nsdate, nsdateformatter

代码：

```
NSString *ds = @"2013-02-25";
NSDateFormatter* formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"YYYY-MM-dd"];
NSDate* date = [formatter dateFromString:ds];
NSLog(@"%@", date); //2012-02-24 16:00:00 +0000
[formatter setDateFormat:@"MMM dd, YYYY"];
NSLog(@"%@", [formatter stringFromDate:date]); //Feb 25, 2012 
```

我做错了什么吗？还是 iOS 6 SDK 错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T05:02:39.203

改变这个：

```
[formatter setDateFormat:@"YYYY-MM-dd"];
[formatter setDateFormat:@"MMM dd, YYYY"]; 
```

到 ：

```
[formatter setDateFormat:@"yyyy-MM-dd"];
[formatter setDateFormat:@"MMM dd, yyyy"]; 
```

错误原因，

> 使用 YYYY 是一个常见的错误。yyyy 指定日历年，而 YYYY 指定年份（“一年中的一周”），用于 ISO 年-周日历。在大多数情况下，yyyy 和 YYYY 产生相同的数字，但它们可能不同。通常，您应该使用日历年。

# jquery - 来自 Jquery 的 Twitter 搜索不起作用

> ID：15104568
> 
> 赞同：1
> 
> 时间：2013-02-27T05:02:05.983
> 
> 标签：jquery, twitter, salesforce, visualforce

大家好，我正在尝试对 twitter 推文进行简单搜索。它只是一个基本搜索，但我的平台是 salesforce，我已在远程站点设置中将搜索 url 设置为但此代码仍然无法正常工作>>

```
<script type="text/javascript">   
$j = jQuery.noConflict();    
function searchTwitter(query) {    
alert(jQuery.param(query));    
    $j.ajax({    
        url: "http://search.twitter.com/search.json?q=salesforce&rpp=5",    
        dataType: "jsonp",    
        success : function () {    
        alert("Val");    
    }    
});
} 
$j(document).ready(function() {    
$j("#submit").click(function() {    
    var params = {    
        q: $j("#query").val(),    
        rpp: 5    
    };    
    searchTwitter(params);    
});    
});  
</script>   

<div style="padding: 20px;">    
<input id="query" type="text" value="blue angels" />    
<input id="submit" type="button" value="Search" />    
</div>    
<div id="tweets" style="padding: 20px;">    
Tweets will go here.    
</div> 
```

但是我的电话仍然没有返回警报（“val”）；。帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T05:07:06.213

我已经尝试过您的代码及其按预期工作。

首先它提醒我一个`query-string`然后`alert val`。

您可能需要查看的是。

1.  确保只有一个`DOM`提交`id`。
2.  使用 .on 而不是 .click 作为 $j('#submit').on('click',function(){ });
3.  检查`jQuery`已加载。
4.  确保`jQuery`不与其他 java 脚本库冲突

# django - Django TypeError 使用 Heroku

> ID：15104569
> 
> 赞同：0
> 
> 时间：2013-02-27T05:02:07.997
> 
> 标签：django, heroku, django-settings

因此，我设法在 heroku 的生产数据库设置之间搞砸了。

在本地运行生产设置我收到错误，

```
ImproperlyConfigured at /
settings.DATABASES is improperly configured. Please supply the ENGINE value. Check settings documentation for more details. 
```

部署到 Heroku 时出现以下错误：http: [//tulsa-staging.herokuapp.com](http://tulsa-staging.herokuapp.com)

```
Exception Value:    

cannot concatenate 'str' and 'NoneType' objects 
```

它似乎与我的数据库设置有关，但我只是不确定如何解决这个问题。

Heroku 的 prod.py 数据库设置

```
urlparse.uses_netloc.append('postgres')
urlparse.uses_netloc.append('mysql')

try:
    if 'DATABASE_URL' in os.environ:
        url = urlparse.urlparse(os.environ['DATABASE_URL'])

        DATABASES = {
            'default':{
                'ENGINE':'django.db.backends.postgresql_psycopg2',
                'NAME': url.path[1:],
                'USER': url.username,
                'PASSWORD': url.password,
                'HOST': url.hostname,
                'PORT': url.port
            }
        }

except Exception:
    print 'Unexpected error:', sys.exc_info() 
```

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:20:05.200

Why aren't you using [dj-database-url](https://github.com/kennethreitz/dj-database-url)?

It makes this so much easier:

```
import dj_database_url

DATABASES = {'default': dj_database_url.config(default='postgres://localhost')} 
```

It automatically looks for and parses the value in `env['DATABASE_URL']`, falling back to what you pass into `default`.

It's what Heroku actually recommends you use.

# iphone - 显示在其他单元格行中的对象

> ID：15104570
> 
> 赞同：0
> 
> 时间：2013-02-27T05:02:19.100
> 
> 标签：iphone, uitableview, object, location, exchange-server

我以前问过这个问题，现在我会更清楚地告诉你我的项目情况

我添加了表格视图作为子视图和表格视图，分别有 4 个部分和 1,4（动态），3,2 行的部分。在 section=0,textfield is there ,section=2 2 切换按钮,section=3 两行都有背景颜色。这些我通过 Xib 添加的所有对象不是以编程方式添加的，当我向下滚动时，颜色将出现在第 0,1 节中，而在第 1,2 节中出现的按钮都变得一团糟。

```
if (indexPath.section==0) {
  if (indexPath.row==0) {
     self.enterNameTextField.autoresizingMask = UIViewAutoresizingFlexibleWidth |UIViewAutoresizingFlexibleHeight;
     self.enterNameTextField.clearsOnBeginEditing =YES;
     self.enterNameTextField.delegate = self;
     self.enterNameTextField.tag=indexPath.row;
     self.enterNameTextField.placeholder=@"Enter youe name";
     self.enterNameTextField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
     [cell.contentView addSubview:  self.enterNameTextField];

     }
     else {
            [self.enterNameTextField removeFromSuperview];
     }            
    }    
 if (indexPath.section==1) {
        NSInteger ii=[self.sectionRows count];
        if(indexPath.row== ii) {
            cell.accessoryType = UITableViewCellAccessoryDetailDisclosureButton;
            cell.textLabel.text=@"Work Out Detail";
        }
        else {
            NSArray *kk=[self.sectionRows objectAtIndex:indexPath.row];
            NSLog(@"..%@/...index=%d",[self.sectionRows objectAtIndex:indexPath.row],indexPath.row);
            cell.textLabel.text=[NSString stringWithFormat:@"%@.%@",[kk objectAtIndex:2],[kk objectAtIndex:0 ]];
        }
    }
  if (indexPath.section==2) {    
    if (indexPath.row==0) {
            NSInteger taskData;
            taskData=  [[NSUserDefaults standardUserDefaults]integerForKey:@"RepetitionCheckMark"];
            self.repitiiondata=[self.listOfRepititionContent objectAtIndex:taskData];
            cell.textLabel.text=@"Repetitions";
            cell.detailTextLabel.text=self.repitiiondata;
            NSLog(@"cvxcv%@",self.repitiiondata);
            cell.accessoryType = UITableViewCellAccessoryDetailDisclosureButton;
    }
    if (indexPath.row==1) {
            cell.accessoryView=[[UIView alloc]initWithFrame:self.coolDownSwitch.frame];
            cell.accessoryView=[[UIView alloc]initWithFrame:self.warmUpSwitch.frame];
            cell.textLabel.text=@"Warm Up(5 min.)";
            int pp=[ self.wrmUpString integerValue];

            if(pp==1) {    
                [self.warmUpSwitch setOn:YES];
            }                
           else {
             [self.warmUpSwitch setOn:NO];
           }
           [cell.accessoryView addSubview:self.warmUpSwitch];

        }

   if (indexPath.row==2) {
            cell.accessoryView=[[UIView alloc]initWithFrame:self.coolDownSwitch.frame];
            [cell.accessoryView addSubview:self.coolDownSwitch];
            int pp=[ self.coolDwnString integerValue]
            if(pp==1) {                    
                [self.coolDownSwitch setOn:YES];
            }
            else {
                [self.coolDownSwitch setOn:NO];
            }
            cell.textLabel.text=@"Cool Down(5 min.)";  
            [cell.accessoryView addSubview:self.coolDownSwitch];
        }
    }        
}   
if (indexPath.section==3) {        
    if (indexPath.row==0) {
        cell.textLabel.text=@"            SAVE CONTENT";
        cell.textLabel.textColor=[UIColor whiteColor];
        cell.backgroundColor=[UIColor redColor];   
    }
    else {
         cell.textLabel.text=@"            DELETE CONTENT";
         cell.textLabel.textColor=[UIColor whiteColor];    
         cell.backgroundColor=[UIColor blackColor];    
     }
  }      
 }

return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T05:22:37.087

我发现很难理解你的疑问。但是试试这个。在 xib 中给出不同的单元标识符。并在差异部分中使用差异单元问题是第 0 部分正在重用第 2 部分中的单元。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T05:36:41.547

**将您的单元格标识符设置为 nil。** 这将对您有所帮助。

# php - 如果值未发送到公共函数，则 PHP 将 null

> ID：15104585
> 
> 赞同：-3
> 
> 时间：2013-02-27T05:04:34.407
> 
> 标签：php, class, function, variables, public

我认为这很容易，但由于某种原因它不起作用

```
public function test($data = null){

} 
```

但是当我想向函数发送一些数据时，它会将其变为空，所以我怎样才能拥有它，这样如果我不发送任何内容，它就是空的，否则就是我发送的数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T05:06:13.393

```
function test($data = null){
     echo $data;
}

test('abcd'); // output abcd 
```

请参阅工作示例[http://codepad.viper-7.com/Z8T23k](http://codepad.viper-7.com/Z8T23k)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T05:14:20.887

对于可选参数语法来说，这看起来很合适。我们必须有更多的细节来告诉你什么是行不通的

# android - AdMob 无法在 Android 中获得真正的广告

> ID：15104587
> 
> 赞同：0
> 
> 时间：2013-02-27T05:04:51.237
> 
> 标签：android, admob

我正在为 Android 中的 Admob 工作，并成功获得了测试广告。但是，当我将我的测试 UnitId 更改为 Live UnitID 类似这样的“/5479/ctv.abcd.ca/myid”时，我会收到类似“您的单元 ID 正确吗？”的警告。我还评论了添加测试设备的行。但我仍然没有看到任何真正的添加。

任何想法......任何更好的解决方案......

```
 LinearLayout lladView = (LinearLayout) inflater.inflate(R.layout.addmob, null);
    AdView adView = (AdView) lladView.findViewById(R.id.adView1);
    adView.loadAd(new AdRequest()); 
```

我的xml是

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:orientation="vertical" >

    <com.google.ads.AdView
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:id="@+id/adView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    ads:adSize="BANNER"
    ads:adUnitId="/5479/ctv.abcd.ca/myid"
    ads:loadAdOnCreate="true"/>
   </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T05:24:15.077

您似乎提供了错误的`adUnitId`. 您必须指定您的 AdMob 发布商 ID，该 ID 可从 AdMob 网站和应用 -> [您的应用名称] -> 管理设置中获取。 ![第1步](../Images/0e367c16879a5e25657cc43be6e13023.png)

![第2步](../Images/7aacdf56200058d1020e19c094a449c7.png)

# emacs - 预处理器宏后 Emacs C 模式自动缩进失败

> ID：15104590
> 
> 赞同：4
> 
> 时间：2013-02-27T05:05:06.123
> 
> 标签：emacs, preprocessor, indentation, c-mode

适用于 Windows 的 Emacs 24.2。

```
case TYPE_LONG: 
 {                           <------- 65383 
   traceCodePath(20);        
   tempLongVal = iterator_long(it);  
   tempLongVal = 10; 
   if (isBigEndian()) 
   { 
     swap_endian64(&tempLongValCon, &tempLongVal); 
     traceCodePath(25);      <------- 65601 
     if (i > 0) 
       {     <------ get weird from here /* ((substatement-open 65601)) */ 
 }           <------ this line aligns with the { below "case"  /* ((block-close 65383)) */ 
 }           <------ the code afterward all align with { below "case" /* ((block-close 65383)) */ 
```

c-mode 缩进从一开始就很好，直到我添加了一些预处理器宏，#ifdef，#else，#end，然后，从代码中的某个点开始，所有之后的缩进都变得混乱。每一行的句法符号都是对的，但是锚的位置都错了，好像不能识别同级的{，而是锚定在上一级前面的某个{。

更奇怪的是，即使我再次删除了那些预处理器宏，缩进也不会再次恢复。
更奇怪的是，有时后来，它无缘无故地恢复了。我不知道是什么操作触发了这个，但我认为最有可能的是“保存”“恢复缓冲区”等。

希望有人能找出原因，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:10:05.613

这很可能与“bug #14133 24.2；c 函数识别在某些预处理器宏上中断”有关：

[http://lists.gnu.org/archive/html/bug-gnu-emacs/2013-04/msg00055.html](http://lists.gnu.org/archive/html/bug-gnu-emacs/2013-04/msg00055.html)

问题似乎与# 前面的空格有关。我注意到这一点的方式是 CMa 和 CMe 停止正常工作，并且自动缩进区域很奇怪，就像你的情况一样。

恢复对我来说也不一致。

[Alan Mackenzie 提出](http://lists.gnu.org/archive/html/bug-gnu-emacs/2013-04/msg00226.html)的补丁解决了我的问题，你应该试试。

您也可以尝试使用 emacs 23，我无法重现此版本中的错误。

# firefox - document.write 上的画布问题

> ID：15104596
> 
> 赞同：1
> 
> 时间：2013-02-27T05:06:10.047
> 
> 标签：firefox, canvas, document.write

我在这段代码中遇到了问题（我在本地 PC 上工作）。

谢谢你的帮助。

我的代码如下：

```
<html>
    <head>
        <title>My Test</title>
        <script src="../jquery/js/jquery-1.9.0.min.js"></script>  
    </head>
    <body>
        <script>
            var _canvas = document.createElement('canvas');
            _canvas.width="100";
            _canvas.height="100"; 
            var _context = _canvas.getContext("2d");
            var _img = new Image();
            _img.src = "image/myImgTest.png";
            var _url;

            _img.onload = function() {
            DrawScreen(); // just some process: drawing image
            _url = _canvas.toDataURL(); 
            alert("test"); **// this alert is printed on FF not on Chrome ???**
            // window.location = url; **// With this command on FF, I show my Image**
            document.write("<img src='"+url+"' >"); **// on FF, I show my image but when I would like to see the source code on my current page, there is nothing just blank ?? And on Chrome, I never show my image.** 

            **// In fact, I am expected to generate something like this: <img src="data:image/png;base64,iVBORw0KGgo.....">  at this place **

            };
            function DrawScreen() {
                // my process
            }

        </script>

    </body>
</html> 
```

* *// 事实上，我预计会生成这样的东西：在这个地方 **

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:44:57.160

当您“在本地 PC 上工作”时……您的本地 PC 上是否有网络服务器，或者您是否直接从硬盘驱动器打开 HTML 文件？

您可能希望`.src`在事件处理程序之后移动 to 的分配`.onload`，否则可能`.onload`永远不会被触发。

```
var _img = new Image();
var _url;

_img.onload = function() {
   ...
};
_img.src = "image/myImgTest.png"; 
```

# itextsharp - 使用 iTextsharp 生成 PDF

> ID：15104597
> 
> 赞同：0
> 
> 时间：2013-02-27T05:06:12.147
> 
> 标签：itextsharp

我有一个项目，我必须生成安全的数千个 PDF。我正在使用 itextsharp 生成 pdf。但是供应商必须通过合并到一个文件中来打印这些 PDF。如果我保护 PDF，则无法合并 pdf。我应该怎么办？如何保护我的 PDF？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T17:48:23.647

加密文档时，您可以设置一个值[ALLOW_ASSEMBLY](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/PdfWriter.html#ALLOW_ASSEMBLY)。这意味着您允许其他方组装/拆卸您的文件。当然，您不应该使用用户密码，而应该使用所有者密码。

# jquery - 使用 jquery 更新选择

> ID：15104599
> 
> 赞同：0
> 
> 时间：2013-02-27T05:06:16.263
> 
> 标签：jquery

我做了一个快速的小提琴（不起作用），有点说明我所拥有的。我有一组选择并且可以添加更多。现在，这些会根据对象数组动态填充。我想要做的是，如果使用一个选项，我的选择不会使用相同的选项。例如`select-1`，选项 1-2-3-5 as `select-2`，但是当用户选择一个选项时，该选项需要在其他选择以及动态创建的选项上消失。这些也应该是可逆的。感谢你的帮助。[小提琴](http://jsfiddle.net/5YhpW/5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T05:32:24.423

我使用选择器稍微简化了这段代码。

在这里你只需要一个事件，你可以在你的选择器（或另一个多重匹配选择器）中使用逗号来满足你想要的一切：

```
 $('#xAxis,#yAxis').on('change',function(){
        setControls();
        $('#main-controls select')
          .each(function()
          {
               $('#main-controls select')
                 .not($(this))
                 .find('option[value=' + $(this).val() +']')
                 .remove();
          });
    }); 
```

策略是设置控件，然后找到具有我们刚刚选择的任何其他控件。如果我们可以`hide()`选择，这会容易得多，但不幸的是，这不能跨浏览器工作；我们必须对`remove()`他们。

修改中`setControls`是仅将选项添加到尚未具有该选项的选择中。然后我们可以在我们想要将选择恢复到它们的原始选择时调用它（不会丢失当前选择）。

```
 function setControls(){
        $.each(series,function(k,v){
            $('#xAxis,#yAxis')
              .filter(':not(:has(option[value=' + k +']))')
              .append($('<option>')
              .attr({value: k})
              .text(v.name));
        });   
    } 
```

[http://jsfiddle.net/5YhpW/8/](http://jsfiddle.net/5YhpW/8/)

# winforms - 如何调整 stacklayoutpanel 的大小以适应其内容？

> ID：15104602
> 
> 赞同：0
> 
> 时间：2013-02-27T05:06:30.413
> 
> 标签：winforms, resize, telerik

我已经搜索了 Telerik 的网站一段时间，但找不到任何关于如何调整 stacklayopanel 大小以适应其元素的信息。有些属性允许调整大小以适应其元素；但是，这些属性对我不起作用。我想知道这里是否有人使用过它并可以帮助我。我有一个列表视图，其中包含不适合其内容的 listViewVisualItems。而是内容从下面的视觉项目中“泄漏”出来并渗入下一个项目。这是我的自定义项目类。

```
public class ChargePlotListViewItem : SimpleListViewVisualItem
{
    private LightVisualElement imageElement;
    private LightVisualElement titleElement;
    private LightVisualElement bioElement;
    private StackLayoutPanel stackLayout;

    protected override void CreateChildElements()
    {
        base.CreateChildElements();

        stackLayout = new StackLayoutPanel();
        stackLayout.Orientation = System.Windows.Forms.Orientation.Vertical;
        //stackLayout.AutoSize = true; These do not work
        //stackLayout.AutoSizeMode = RadAutoSizeMode.WrapAroundChildren;

        imageElement = new LightVisualElement();
        imageElement.DrawText = false;
        imageElement.ImageLayout = System.Windows.Forms.ImageLayout.Zoom;
        //imageElement.StretchVertically = false;
        imageElement.Margin = new System.Windows.Forms.Padding(1, 1, 1, 2);
        imageElement.ShouldHandleMouseInput = false;
        imageElement.NotifyParentOnMouseInput = true;
        imageElement.AutoSizeMode = RadAutoSizeMode.FitToAvailableSize;

        //stackLayout.Children.Add(imageElement);

        titleElement = new LightVisualElement();
        titleElement.TextAlignment = ContentAlignment.TopCenter;
        titleElement.Margin = new Padding(2, 1, 1, 2);
        titleElement.Font = new System.Drawing.Font("Segoe UI", 8, FontStyle.Italic, GraphicsUnit.Point);
        titleElement.ShouldHandleMouseInput = false;
        titleElement.NotifyParentOnMouseInput = true;
        stackLayout.Children.Add(titleElement);

        bioElement = new LightVisualElement();
        bioElement.TextAlignment = ContentAlignment.BottomLeft;
        bioElement.ShouldHandleMouseInput = false;
        bioElement.NotifyParentOnMouseInput = true;
        bioElement.Margin = new Padding(2, 1, 1, 2);

        bioElement.Font = new System.Drawing.Font("Segoe UI", 9, FontStyle.Regular, GraphicsUnit.Point);
        bioElement.ForeColor = Color.FromArgb(255, 114, 118, 125);
        stackLayout.Children.Add(bioElement);

        this.Children.Add(stackLayout);
        //this.stackLayout.Measure(new System.Drawing.SizeF((float)stackLayout.Size.Width, (float)20));

        this.Padding = new Padding(1, 2, 1, 2);
        this.Shape = new RoundRectShape(3);
        this.BorderColor = Color.Black;
        this.BorderGradientStyle = GradientStyles.Solid;
        this.DrawBorder = true;
        this.DrawFill = true;
        this.BackColor = Color.Azure;
        this.GradientStyle = GradientStyles.Solid;
    }

    protected override void SynchronizeProperties()
    {
        base.SynchronizeProperties();

        frmBingMaps.CriminalPlotObject plotObject = this.Data.Value as frmBingMaps.CriminalPlotObject;
        if (plotObject != null)
        {
            try
            {
                this.imageElement.Image = Crime_Information_System.Properties.Resources
                    .bullet_blue;
            }
            catch
            {
            }

            //building the title for the element depending on which names are on record
            StringBuilder NameBuilder = new StringBuilder();
            if (plotObject.Data.FirstName != null | plotObject.Data.FirstName != string.Empty)
                NameBuilder.Append(plotObject.Data.FirstName + " ");

            if (plotObject.Data.LastName != null | plotObject.Data.LastName != string.Empty)
                NameBuilder.Append(plotObject.Data.LastName + " ");
            //NameBuilder.Append(" Charge: " + gangBanger.Incidents[0].Charges[0].ChargeDescription);

            this.titleElement.Text = NameBuilder.ToString();

            StringBuilder BioBuilder = new StringBuilder();
            //this.radDesktopAlert1.ContentText = "<html><b>" + CentralDataStore.AllUsers.Find(P => P.intUserID
            //    == BLAH.SenderID).strFirstName + " " + CentralDataStore.AllUsers.Find(P => P.intUserID ==
            //        BLAH.SenderID).strLastName + "</b><br>" + BLAH.Subject;
            BioBuilder.Append("<html>");
            BioBuilder.Append("<b>Incident ID</b>: " + plotObject.Data.Incidents.Find(
                P => P.IncidentID == plotObject.CaseID).IncidentID.ToString());
            BioBuilder.Append("<br>");
            BioBuilder.Append("<b>Date</b>: " + plotObject.Data.Incidents.Find(
                P => P.IncidentID == plotObject.CaseID).DateOfIncident.ToShortDateString());
            BioBuilder.Append("<br>");
            BioBuilder.Append(plotObject.Data.Incidents.Find(P => P.IncidentID == plotObject
                .CaseID).Description);
            BioBuilder.Append("<br>");
            //BioBuilder.Append("\r\n");
            BioBuilder.Append("<b>Location</b>: ");
            BioBuilder.Append(plotObject.Data.Incidents.Find(P => P.IncidentID ==
                plotObject.CaseID).Location);

            BioBuilder.Append("<br>");
            //BioBuilder.Append("\r\n");
            BioBuilder.Append(string.Format("<b>Charges</b>: "));

            foreach (Charge c in plotObject.Data.Incidents.Find(P => P.IncidentID == plotObject.CaseID
                ).Charges)
            {
                BioBuilder.Append(c.ChargeDescription + ", ");
            }

            BioBuilder.Remove(BioBuilder.Length - 2,2);
            //BioBuilder.Append("
            bioElement.Text = BioBuilder.ToString();

            this.Text = ""; //here to erase the system.crimesysteminformation.plot blah object name

        }
    }

    protected override Type ThemeEffectiveType
    {
        get
        {
            return typeof(IconListViewVisualItem);
        }
    }

    protected override SizeF MeasureOverride(SizeF availableSize)
    {
        SizeF measuredSize = base.MeasureOverride(availableSize);
        this.stackLayout.Measure(measuredSize);
        return measuredSize;
    }

    protected override SizeF ArrangeOverride(SizeF finalSize)
    {
        base.ArrangeOverride(finalSize);
        this.stackLayout.Arrange(new RectangleF(PointF.Empty, finalSize));
        return finalSize;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:00:18.923

要克服这种行为，请考虑通过设置以下属性来允许项目采用所需的大小：

```
radListView1.AllowArbitraryItemHeight = true; 
```

为了您的方便，这里是您的代码的简化版本：

```
void radListView1_VisualItemCreating(object sender, ListViewVisualItemCreatingEventArgs      e)
{
e.VisualItem = new ChargePlotListViewItem();
}

public class ChargePlotListViewItem : SimpleListViewVisualItem
{
private LightVisualElement imageElement;
private LightVisualElement titleElement;
private LightVisualElement bioElement;
private StackLayoutPanel stackLayout;

protected override void CreateChildElements()
{
    base.CreateChildElements();

    stackLayout = new StackLayoutPanel();
    stackLayout.Orientation = System.Windows.Forms.Orientation.Vertical;

    imageElement = new LightVisualElement();
    imageElement.DrawText = false;
    imageElement.ImageLayout = System.Windows.Forms.ImageLayout.Center;
    imageElement.ShouldHandleMouseInput = false;
    imageElement.NotifyParentOnMouseInput = true;

    stackLayout.Children.Add(imageElement);

    titleElement = new LightVisualElement();
    titleElement.TextAlignment = ContentAlignment.TopCenter;
    titleElement.Font = new System.Drawing.Font("Segoe UI", 8, FontStyle.Italic, GraphicsUnit.Point);
    titleElement.ShouldHandleMouseInput = false;
    titleElement.NotifyParentOnMouseInput = true;
    stackLayout.Children.Add(titleElement);

    bioElement = new LightVisualElement();
    bioElement.TextAlignment = ContentAlignment.BottomLeft;
    bioElement.ShouldHandleMouseInput = false;
    bioElement.NotifyParentOnMouseInput = true;
    bioElement.Margin = new Padding(2, 1, 1, 2);
    bioElement.Font = new System.Drawing.Font("Segoe UI", 9, FontStyle.Regular, GraphicsUnit.Point);
    bioElement.ForeColor = Color.FromArgb(255, 114, 118, 125);

    stackLayout.Children.Add(bioElement);

    this.Children.Add(stackLayout);
}

protected override void SynchronizeProperties()
{
    base.SynchronizeProperties();
    DataRowView rowView = this.Data.DataBoundItem as DataRowView;

    imageElement.Image = (Image)rowView.Row["Image"];
    titleElement.Text = rowView.Row["Title"].ToString();
    bioElement.Text = rowView.Row["Bio"].ToString();
    this.Text = ""; //here to erase the system.crimesysteminformation.plot blah object name
}

protected override Type ThemeEffectiveType
{
    get
    {
        return typeof(IconListViewVisualItem);
    }
}
} 
```

# webdriver - webdriver未单击复选框

> ID：15104613
> 
> 赞同：0
> 
> 时间：2013-02-27T05:08:03.370
> 
> 标签：webdriver, testng

我在注册页面中的“我已阅读并同意条款和条件”文本旁边有一个复选框。在播放过程中，我可以看到一些点击正在发生。但最后该复选框仍未选中。为什么会这样。

这是我的 HTML 代码

```
<div class="checkbox_container">
            <input name="newuserXYX.agree" value="true" tabindex="106" id="newuserXYX.agree" onclick="ABC.e.reg.checkuserNameAvailability();" type="checkbox">
            <input id="__checkbox_newuserXYX.agree" name="__checkbox_newuserXYX.agree" value="true" type="hidden"> 
            <label id="registration_Agree" for="newuserXYX.agree">I have read and agree to the Terms and Conditions</label>
</div> 
```

我将我的 testNg 代码写为

```
boolean checked=driver.findElement(By.xpath("//input[@name='newuserXYX.agree']")).isSelected();

        if(checked==false)
            driver.findElement(By.xpath("//input[@name='newuserXYX.agree']")).click(); 
```

我尝试过的各种方法是

```
 @FindBy(how=How.ID_OR_NAME,using="newuserXYX.agree")
  @CacheLookup
  private WebElement iagreeCB; 
```

在@Test里面

```
iagreeCB.click(); 
```

对于所有这些，我得到了类似的结果。

为什么我无法单击复选框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:30:00.923

你的代码对我来说看起来不错。您是否检查过 onclick-handler 不会干扰您的点击？也许用户名可用性检查失败（顺便说一句，T&C 复选框是一个奇怪的地方来检查用户名可用性......）

# c# - SharpSVN 同步命令 C#

> ID：15104614
> 
> 赞同：1
> 
> 时间：2013-02-27T05:08:04.047
> 
> 标签：c#, svn, sharpsvn, svnsync

我正在尝试通过 sharpsvn 自动化 svnsync init 和 svnsync 同步过程。我在提供的文档中找不到任何关于 svnsync 的文档。

到目前为止，我可以通过执行以下操作成功创建存储库：

```
SvnRepositoryClient src = new SvnRepositoryClient();
src.CreateRepository(RepoDir + RepoName); 
```

难道我做错了什么？谢谢阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:03:55.370

Subversion 没有将 svnsync 功能集公开为库，因此无法调用不存在的东西。对不起。

# fetch - mysql_fetch_row 循环？

> ID：15104623
> 
> 赞同：0
> 
> 时间：2013-02-27T05:08:42.600
> 
> 标签：fetch

我在登录时设置了一个会话变量，我想在“Createdby”字段中找到具有用户名的表中的所有行，并且我想在页面上列出它们。我正在使用这段代码：

```
<?php
$result = mysql_query("SELECT email FROM members WHERE createdby = '" . $_SESSION['myusername'] ."'");
if (!$result) {
    echo 'Could not run query: ' . mysql_error();
    exit;
}
while($row = mysql_fetch_row($result))
{
echo ($row[0]);
}
?> 
```

它工作得很好，但它不会间隔它们，它会像：data1data2 一样回显，而不是像 data1，data2 那样分开。我怎样才能在不搞砸的情况下自定义结果？我试图添加

```
echo ("<p>".$row[0]."</p>"); 
```

但收到：11，我对 PHP 有点陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T05:10:20.880

这只是字符串连接。您正在将字符串添加到其他字符串。

我建议以下只是开始：

```
echo $row[0].", "; 
```

我还建议您更多地阅读 PHP，因为这是该语言中的一个基本概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T05:11:06.077

您可以像这样在每个 $row[0] 之间添加空格：

回声 $row[0] 。' ';

点后跟一个空格表示您正在连接一个空格。

# php - 计数文件行总是返回 1 - mac OSx

> ID：15104628
> 
> 赞同：0
> 
> 时间：2013-02-27T05:09:13.833
> 
> 标签：php, file, count

我是 php 新手。我正在尝试计算 txt 文档中的行数，但这总是返回 1（尽管文件中有更多行）：

```
<?php
  $file = "example.txt";
  $lines = count(file($file));
  print "There are $lines lines in $file";
?> 
```

你为什么认为这是？附带说明一下，我使用的是 Mac OSx。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T05:12:03.040

尝试这个：

```
$file = "example.txt";
$linecount = 0;
$handle = fopen($file, "r");
while(!feof($handle)){
  $line = fgets($handle);
  $linecount++;
}

fclose($handle);

echo $linecount; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T05:13:37.957

从 PHP 手册（[http://www.php.net/manual/en/function.file.php](http://www.php.net/manual/en/function.file.php)）：

```
Note: If PHP is not properly recognizing the line endings when reading files 
either on or created by a Macintosh computer, enabling the auto_detect_line_endings 
run-time configuration option may help resolve the problem. 
```

这可能是它的原因。没有更多信息很难说。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T05:14:54.410

这将使用更少的内存，因为它不会将整个文件加载到内存中：

```
$file="largefile.txt";
$linecount = 0;
$handle = fopen($file, "r");
while(!feof($handle)){
  $line = fgets($handle);
  $linecount++;
}

fclose($handle);

echo $linecount; 
```

fgets 将单行加载到内存中（如果第二个参数 $length 被省略，它将继续从流中读取，直到到达行尾，这正是我们想要的）。如果您关心挂墙时间和内存使用情况，这仍然不可能像使用 PHP 以外的其他东西一样快。

唯一的危险是如果任何行特别长（如果遇到没有换行符的 2GB 文件怎么办？）。在这种情况下，您最好将其分块吞食，并计算行尾字符：

```
$file="largefile.txt";
$linecount = 0;
$handle = fopen($file, "r");
while(!feof($handle)){
  $line = fgets($handle, 4096);
  $linecount = $linecount + substr_count($line, PHP_EOL);
}

fclose($handle);

echo $linecount; 
```

如果我只想知道特定文件中的行，我更喜欢第二个代码

# java - Java Swing gridLayout 问题

> ID：15104630
> 
> 赞同：-4
> 
> 时间：2013-02-27T05:09:20.733
> 
> 标签：java, swing, layout-manager, grid-layout

我只是无法让它以我想要的方式出现，我已经筋疲力尽地尝试 gridlayout、gridbaglayout、borderlayout 等......

请问我需要帮助

![在此处输入图像描述](../Images/34751d4b503a0a662acf3e7deff5e3ed.png)

这就是我到目前为止所做的

```
 panneauEst = new JPanel(new BorderLayout());

    zoneTexte = new JTextArea("LIVRES", 45, 50);
    scroller= new JScrollPane(zoneTexte);
    scroller.setPreferredSize(new Dimension(600, 580));
    scroller.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);

    EcouteurBoutons btnEcouteur = new EcouteurBoutons();

    btnTrierCote = new JButton("Trier par cote");
    btnTrierCote.addActionListener(btnEcouteur);
    btnTrierTitre = new JButton("Trier par titre");
    btnRechercheCote = new JButton("Rechercher par cote");
    btnRechercheTitre = new JButton("Rechercher par titre");
    btnFusion = new JButton("Fusion");
    btnQuitter = new JButton("Quitter");

    panneauEst.add(scroller);

    //http://stackoverflow.com/questions/15104630/java-swing-gridlayout-issue
    this.setLayout(new GridLayout(6, 2));
    this.add(panneauEst);
    this.add(btnTrierCote);
    this.add(btnTrierTitre);
    this.add(btnRechercheCote);
    this.add(btnRechercheTitre);
    this.add(btnFusion);
    this.add(btnQuitter); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T05:20:53.427

您需要使用复合容器/布局

从 3 个容器开始。父容器，`JScrollPane`/`JTable`和类似的东西`JPanel`

*   将父容器布局设置为`BorderLayout`. 将 `JScrollPane`/添加`JTable`到它的`CENTER`位置...`add(scrollPane, BorderLayout.CENTER);`
*   创建一个新`JPanel`的并将其布局设置为`GridLayout(0, 1)`
*   将按钮添加到此面板
*   将此面板添加到`EAST`父容器的位置...`add(buttonPanel, BorderLayout.EAST)`

# java - Tomcat中MysqlDatasource中的NullPointer异常？

> ID：15104634
> 
> 赞同：0
> 
> 时间：2013-02-27T05:09:38.250
> 
> 标签：java, mysql, eclipse, jdbc

我已经从[this](https://stackoverflow.com/questions/2299469/how-should-i-connect-to-a-mysql-data-source-from-eclipse)和[this](https://confluence.atlassian.com/display/DOC/Configuring+a+MySQL+Datasource+in+Apache+Tomcat)在 tomcat 中配置了 mysqlDatasource 。我已按照那里指定的步骤进行操作。我使用了以下代码行

```
class DataConnection {
    private static DataSource dataSource;

    public DataConnection() {
        try {
            Context ctx = new InitialContext();
            dataSource = (DataSource)ctx.lookup("java:comp/env/jdbc/test");
        } catch (NamingException e) {
           e.printStackTrace(); 
        }
    }

    public static Connection getConnection() throws SQLException {
        new DataConnection();
          Connection con=dataSource.getConnection();
          return con;
    }
} 
```

但是在连接数据库时我仍然得到一个 NullPointerException。

1.  将jar文件复制到`mysql/lib`文件夹中
2.  创建`context.xml`文件并提及连接属性。
3.  在`WEB-INF/web.xml`我提到过

    jdbc/db javax.sql.DataSource

我究竟做错了什么？

注意：我已经创建了 context.xml 并提到了连接属性。最后手动复制到 META-INF/context.xml 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:05:58.567

尝试实例`InitialContex`代替`Context`并打印某事

```
public DataConnection() {
            try {
                InitialContext ctx = new InitialContext();
                dataSource = (DataSource)ctx.lookup(dataSource name);
            } catch (NamingException e) {
                    e.printStackTrace();
            }
        } 
```

# python - Heroku Django：重新连接和更新

> ID：15104641
> 
> 赞同：0
> 
> 时间：2013-02-27T05:10:17.940
> 
> 标签：python, django, git, heroku

我已经完成了有关如何使用以下内容上传和启动基于 django 的基本 Web 应用程序的 Heroku 教程：

[https://devcenter.heroku.com/articles/django#gitignore](https://devcenter.heroku.com/articles/django#gitignore)

任何人都可以提供有关如何重新连接到 Heroku 并正确上传您对站点所做的更改的步骤或文档链接吗？从一个新的终端开始并进入您的 manage.py 和 procfiles 所在的文件夹，以下步骤是什么？

然后我做：

$ virtualenv venv --distribute

$ 源 venv/bin/激活

在此之后我尝试运行 $python manage.py runserver 但它找不到 django 模块等...

每次我在服务器上进行 git push 更新时是否需要重新安装 django？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:58:49.733

要回答您的问题：

1.  Heroku 基本上就是 git。至少在你的电脑上。
2.  所以你不需要“连接”到 Heroku。您只需`cd`到您的源文件夹并像使用普通 git 存储库一样使用它。
3.  如果您使用的是 virtualenv（应该是），在您 cd 到您的目录后，您需要重新激活 virtualenv。如果您按照 heroku 的 Django 教程进行操作，则可能是命令`source venv/bin/activate`
4.  如果您想深入了解一些 herokus 命令，请[下载 Toolbelt](https://toolbelt.heroku.com)。
5.  要测试您的 Procfile 是否正常工作，请使用[Honcho](https://github.com/nickstenning/honcho)。`foreman`它是Heroku 的基于 Ruby 的本地 Procfile 运行器的 python 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:29:12.000

要查看 Heroku 应用程序中的文件：

通过在终端上键入以下命令在 heroku 上启动 bash：

```
heroku run bash --app appname 
```

从那里 ls 并查看您的文件夹。

# css - 嵌入字体 B 和我不在 safari 3.2 上工作

> ID：15104645
> 
> 赞同：0
> 
> 时间：2013-02-27T05:11:00.637
> 
> 标签：css, safari, font-face

我在我的网页中嵌入了字体，并在 div 中随机使用 font-style = italic 和 font-weight = 700。

我的@font-face 规则是：

```
 @font-face {
    font-family: 'Arimo';
    src: url('fonts/arimo_bold_italic.eot');
    src: url('fonts/arimo_bold_italic.eot?#iefix') format('embedded-opentype'),url('fonts/arimo_bold_italic.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
} 
```

尽管添加的字体样式和字体粗细在所有浏览器上都可以正常工作，但它似乎不适用于 Safari 3.2，从而产生奇怪的结果，例如样式和粗细有时只是随机应用。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:10:31.497

您将字体指定为正常粗细、常规（非斜体）。这是可能的，并且经常用于克服一些浏览器限制，这也是 FontSquirrel 在其生成的 CSS 文件中使用的方式。但它有其含义。

在这种情况下，`font-family: Arimo`单独生成粗斜体 Arimo，因为这是您定义 name 的方式`Arimo`。对于浏览器来说，`Arimo`它只是一种正常粗细的常规字体，所以如果你在 CSS 中或间接地（例如通过`b`或`i`标记）要求它以粗体或斜体使用，大多数浏览器都会使用这种字体。

根据 CSS 2.1[字体匹配算法](http://www.w3.org/TR/CSS21/fonts.html#algorithm)，当请求斜体（或粗斜体）时，正则面不被视为匹配。这意味着浏览器应该回退到其默认字体，除非您的规则指定了辅助字体。实际上没有浏览器这样做：Safari 通过算法倾斜字形产生“合成斜体”，而大多数其他浏览器只使用常规字体（即，他们认为是常规字体，因为它是这样声明的）。在 CSS3 中，这将被更改，以便大多数浏览器的行为成为规范。

所以这是一项混乱的业务，为了避免混乱，请使用以下方法之一：

a) 将每个字体声明为自己的一个系列，作为常规和正常粗细，就像您在此处所做的那样，并且不要*将*除字体样式正常`以外的`font-weight`值直接或间接应用于这种字体中的文本（注意许多 HTML 元素产生斜体或粗体 b 默认）。`normal' or``values other than`

b）将每个字体声明为系列中的字体，`font-weight`并以逻辑方式`font-style`设置，并以正常方式使用字体系列，声明何时需要粗体等。这就是谷歌网络字体由谷歌托管时的工作方式。`@font-face``font-weight: bold`

PS 奇怪的是，`@font-face' 规则没有提到 WOFF 格式文件，当浏览器支持时，这是可下载字体的首选格式。生成器通常也会生成它，并将其包含在规则中。

# ios - 设置动态值后如何将数据保存到ios中的plist中？

> ID：15104646
> 
> 赞同：2
> 
> 时间：2013-02-27T05:11:00.783
> 
> 标签：ios, plist, savechanges

```
<plist version="1.0">
    <dict>
            <key>InfoValue</key>
            <string>false</string>
            <key>AudioValue</key>
            <string>true</string>
            <key>VideoValue</key>
            <string>true</string>
            <key>DescValue</key>
            <string>true</string>
            <key>LinkValue</key>
            <string>true</string>
   </dict>
</plist> 
```

这是 plist 文件，我想动态更改 InfoValue。在我的代码中，我使用的是

```
settingsPath=[[NSBundle mainBundle] pathForResource:@"SettingsValue" ofType:@"plist"];
settingsItem = [[NSMutableDictionary alloc] initWithContentsOfFile:settingsPath];

[settingsItem setObject:@"false" forKey:@"InfoValue"]; 
```

在此之后

```
[settingsItem writeToFile:settingsPath atomically:YES]; 
```

但它不会将数据保存到 plist 文件中。而不是我收到以下错误：

```
-[NSConcreteValue getFileSystemRepresentation:maxLength:]: unrecognized selector sent to instance 0x8fad490
2013-02-27 10:26:44.479 vCamView[1577:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', 
 reason: '-[NSConcreteValue getFileSystemRepresentation:maxLength:]: unrecognized selector sent to instance 0x8fad490'
*** First throw call stack:
(0x33dc012 0x2944e7e 0x34674bd 0x33cbbbc 0x33cb94e 0x2354915 0x23548b9 0x2354872 
   0x235468f 0x1e207 0x2958705 0x188f920 0x188f8b8 0x1950671 0x1950bcf 0x1a90747 
   0x2342e83 0x339b376 0x339ae06 0x3382a82 0x3381f44 0x3381e1b 0x376f7e3 0x376f668 
   0x188c65c 0x27e2 0x2715) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T05:38:52.500

您不能修改包内的文件。它是只读的。尝试将 plist 保存在`DocumentDirectory`

```
 NSString *directoryPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,  NSUserDomainMask, YES)objectAtIndex:0];
    NSString *filePath = [directoryPath stringByAppendingPathComponent:@"SettingsValue.plist"];

   // Read from document directory
    settingsItem = [[NSMutableDictionary alloc] initWithContentsOfFile:filePath]; 

    // update the dictionary
    [settingsItem setObject:@"false" forKey:@"InfoValue"];

   // write back to file  
    [settingsItem writeToFile:filePath atomically:YES]; 
```

# c# - 如何在 C# 中将数据从一个表（所有 varchar）复制和验证到另一个表（键入）？

> ID：15104653
> 
> 赞同：-2
> 
> 时间：2013-02-27T05:11:44.397
> 
> 标签：c#, entity-framework, sqlbulkcopy

[注意：需要在代码中，因为不能使用 SSIS 或类似的]

我可能需要使用 C# 和 EF 将数据从一个数据库批量复制到另一个数据库——尽管这并不是一成不变的。

问题是源数据都在 varchar(max) 中，我希望目标数据类型正确。来源是来自旧的 ETL 工作的历史记录，该工作运行良好，我无法被替换。我见过的最常见的问题是数字字段中的字母 - 例如货币字段中的“无”。这些在源代码中都很好，因为它都是 varchar。

我想以 最简单的方式复制数据并验证它：
源-> 验证-> 目的地。
如果验证失败，那么我需要知道失败的确切行（理想情况下是什么失败），以便可以在源中手动修复它，并重新复制数据。

大约有 50 个表，行数在 10 到 170 万行之间！所以速度也很重要。

**解决这个问题的明智方法是什么？创建 DTO、验证属性和自动映射？两个 EF 实体并逐行映射并验证每个实体？SPROC 和手动插入？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T05:25:07.183

在 T-SQL 中使用[链接服务器](http://msdn.microsoft.com/en-us/library/aa560998.aspx)执行此操作。

IE：

```
--begin a transaction to wrap validation and load
BEGIN TRAN

--Validate that no tickets are set to closed without a completion date
SELECT * 
FROM bigTableOnLocalServer with (TABLOCKX) -- prevent new rows
WHERE ticketState = '1' /* ticket closed */ and CompletionDate = 'open' 

--if validation fails, quit the transaction to release the lock
COMMIT TRAN

--if no rows in result set 1, execute the load
INSERT INTO RemoteServerName.RemoteServerDBName.RemoteSchema.RemoteTable (field1Int, Field2Money, field3text)
SELECT CAST(Field1 as int), 
    CASE Field2Money WHEN 'none' then null else CAST(Field2Money as money) END,
    Field3Text
FROM bigTableOnLocalServer
WHERE recordID between 1 and 1000000

-- after complete, commit the transaction to release the lock
COMMIT TRAN 
```

如果服务器之间不能直接通信，仍然在 SQL 中进行验证，但使用 C# 客户端将数据写入磁盘并在目标服务器上点击批量插入功能。由于 C# 组件只会传输数据，因此我将直接使用[BULK INSERT](http://msdn.microsoft.com/en-us/library/ms188365.aspx)可用的格式，例如 CSV。

# c++ - 错误 C2440：“正在初始化”：无法从“std::vector<_Ty>”转换为“const std::vector<_Ty> &`

> ID：15104654
> 
> 赞同：3
> 
> 时间：2013-02-27T05:11:51.520
> 
> 标签：c++, boost

Question1> 为什么下面的代码不起作用？

Question2> 正确的设计方法是什么？

```
#include <iostream>
#include <vector>
#include "boost/shared_ptr.hpp"

using namespace std;

class BaseClass
{};

class SubClass : public BaseClass
{};

int main()
{
    std::vector<boost::shared_ptr<SubClass> > vecSubClassShared;

    boost::shared_ptr<SubClass> sub1(new SubClass);

    vecSubClassShared.push_back(sub1);

    // Error    1   error C2440: 'initializing' : cannot convert from 'std::vector<_Ty>' to 'const std::vector<_Ty> &`
    const std::vector<boost::shared_ptr<BaseClass> >& vecBaseShared = vecSubClassShared;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T08:17:49.777

在 C++ 编译器看来，`shared_ptr<BaseClass>`和`shared_ptr<DerivedClass>`是不同的、不相关的类型。虽然编译器知道普通指针可以从`Derived*`to转换`Base*`，但它不知道在概念上同样适用于`shared_ptr`s，因为它不知道“智能指针”类似于指针。

这同样适用于向量或一般模板：模板的两个实例化是两个不同的类，它们之间没有关系（如果没有明确设计）。所以编译器看到一个`vector<Something>`对 a`vector<SomethingElse>`不相关类型的引用的绑定，所以引用绑定失败。

但即使类型以某种方式相关，绑定也会失败：

```
long l = 5;
int& ir = l; //ERROR 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T08:48:13.733

`shared_ptr<BaseClass>`并且`shared_ptr<SubClass>`是不同的、不相关的类型，因此一个向量无法别名另一个向量，因为不能保证它们的对象布局是相同的。

这意味着要传递`const std::vector<boost::shared_ptr<BaseClass> >&`给一个函数，您必须构造一个所需类型的临时向量。但是，您可以使用共享指针别名来执行此操作，而无需增加共享指针上的引用计数：

```
#include <vector>
#include <memory>

struct B {};
struct D: public B {};

template<typename T, typename U>
std::vector<std::shared_ptr<T>> shared_vector_static_cast(
   const std::vector<std::shared_ptr<U>> &v)
{
   std::vector<std::shared_ptr<T>> w;
   for (const std::shared_ptr<U> &p: v)
      w.push_back(std::shared_ptr<T>(std::shared_ptr<void>(), p.get()));
   return w;
}

int main() {
    std::vector<std::shared_ptr<D>> v{std::make_shared<D>()};
    const std::vector<std::shared_ptr<B>> &w = shared_vector_static_cast<B>(v);
} 
```

# jquery - jquery 'pan' 使 ios safari iphone 4 崩溃是否正常？

> ID：15104657
> 
> 赞同：0
> 
> 时间：2013-02-27T05:12:10.500
> 
> 标签：jquery, ios, animation, crash, processor

我的网站遇到了很多麻烦，并从 CSS 过渡到 Jquery 'pan' 效果，以制作云在天空中移动的效果。

我正在使用的代码是这个

```
<!-- JAVASCRIPT LOADER -->

<script src="<?php echo get_stylesheet_directory_uri(); ?>/js/jquery-1.6.3.min.js" type="text/javascript"></script>
<script src="<?php echo get_stylesheet_directory_uri(); ?>/js/jquery.spritely-0.6.js" type="text/javascript"></script>

        <script type="text/javascript">
        $(document).ready(function() {
            $('#far-clouds').pan({fps: 30, speed: 0.7, dir: 'left', depth: 30});
            $('#near-clouds').pan({fps: 30, speed: 1.3, dir: 'left', depth: 60});
          });
          </script>  

<!-- JAVASCRIPT LOADER --> 
```

触发这个。

```
<div class="clouds">
<div id="far-clouds" class="far-clouds stage"></div>
<div id="near-clouds" class="near-clouds stage"></div>
<div class="mainContent"> </div> 
```

具有以下样式

```
#sky {
margin: 0px;
background: url('img/bg.png');
max-height: 200px;
min-height: 150px;
height: 20%;
width:100%;
max-width: 1400px;
margin-bottom: -24px;
}

#clouds {
position: relative;
top:-50px;
}

    .stage {
        position: relative;
        top: 0;
        left: 0;
        width: 100%;
        max-width:1400px;
        height:200px;
        overflow: hidden;
        z-index: 100;
    }

    .far-clouds { 
        background: transparent url(img/clouds/far-clouds.png) 1400px 255px repeat-x; 
        background-position-y: -15px;
        position: relative;
        top:-155px;
    }
    .near-clouds { 
        background: transparent url(img/clouds/near-clouds.png) 305px 255px repeat-x; 
        background-position-y: -15px;
        position: relative;
        top:-355px;
        z-index: 102;
    } 
```

铬有明显的改进，处理能力降低了很多。但是，当我在 iPhone 4 上的 iOS Safari 中运行该站点时，它会在大约 5 分钟后崩溃。

我的脚本是否有问题导致它崩溃？

我是否将某些事情过度复杂化并完成了可以以更简单、更移动友好的方式完成的事情？

动画的像素数量是否会影响 iPhone 的处理能力？

任何人都可以将他们的专业知识用于这个问题，因为我无法理解它，任何建议，即使这意味着对替代方法的改进，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:56:14.857

这是关于如何使用 javascript 生成云的另一个很好的示例，它可能会比您采用的方法更稳定： [使用 HTML5 创建动画移动云](http://www.script-tutorials.com/creating-animated-moving-clouds-using-html5/)

这是现场演示：[演示](http://www.script-tutorials.com/demos/177/index.html)

我希望这会有所帮助。

# python - Django gotchas：1.5 vs. 其余的（从书籍/教程学习时）？

> ID：15104661
> 
> 赞同：2
> 
> 时间：2013-02-27T05:12:35.700
> 
> 标签：python, django, python-3.x

根据他们的[公告](https://docs.djangoproject.com/en/dev/topics/python3/)，Django 1.5 现在支持 Python 3 。我刚刚开始学习 Python 3，即将使用 Django 1.5。但是，大多数教程/书籍等都是从 Django v1.1 开始（到 v1.4）处理的。现在 v1.5 发布了，在不同版本的 Django 中可能存在哪些需要注意的“陷阱”？（或者没关系？）

# sql-server - 如何检查表是否存在并且在一个 IF 中不为空

> ID：15104662
> 
> 赞同：4
> 
> 时间：2013-02-27T05:12:40.223
> 
> 标签：sql-server, sql-server-2008

我试过这样做：

```
if OBJECT_ID('a_b_Stage2_supA_demB') is not null
and (select COUNT(*) from a_b_Stage2_supA_demB) > 0 
```

但是 SQL Server 在不存在时会返回错误`a_b_Stage2_supA_demB`，因为即使“and”条件的第一侧已经失败，它仍会尝试检查第二个条件。

感谢帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T06:52:04.030

DMV 可以轻松解决您的问题：

```
IF EXISTS (select * from sys.tables t 
    INNER JOIN sys.partitions p on t.object_id = p.object_id 
    WHERE t.name = 'a_b_Stage2_supA_demB' and p.rows > 0)
..... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T06:02:29.257

不幸的是，这是不可能的。SQL Server 将在编译之前检查以确保所有对象引用（在基本代码路径中）都存在。没有if语句怎么样？

```
begin try
    exec('declare @x int = (
              select 1 / COUNT(*)
              from a_b_Stage2_supA_demB)');
    print 'true';
end try
begin catch
    print 'false';
end catch 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T05:36:57.310

写吧：

```
IF OBJECT_ID('a_b_Stage2_supA_demB') is not null
    IF select COUNT(*) from a_b_Stage2_supA_demB > 0
        ..... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T06:32:42.637

```
IF OBJECT_ID('dept') is not NULL
BEGIN
IF exists(SELECT 1 FROM dept)
PRINT 'exists with rows'
END 
```

# c# - 如何在asp.net中将图像变灰

> ID：15104663
> 
> 赞同：0
> 
> 时间：2013-02-27T05:12:55.383
> 
> 标签：c#, asp.net, html

我需要在 asp 页面中将禁用的图像变灰，但我不知道如何实现

我当前的代码如下

```
<ul class="flag">
                <li>
                    <img src="flag-china.png" alt="china" onclick="setLanguage('Chinese');"   style="cursor:pointer"/></li>
                <li>
                    <img src="flag-france.png" alt="france" onclick="setLanguage('French');" style="cursor:pointer" /></li>

                    <img src="us.png" alt="us" onclick="setLanguage('English');" style="cursor:pointer" /></li>
            </ul> 
```

我需要禁用和灰色除最后一个标志之外的所有标志

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T05:25:53.943

[在此处](http://tech.pro/tutorial/660/csharp-tutorial-convert-a-color-image-to-grayscale)找到以下代码示例。需要时调用灰色版本。

```
public static Bitmap MakeGrayscale3(Bitmap original)
{
   //create a blank bitmap the same size as original
   Bitmap newBitmap = new Bitmap(original.Width, original.Height);

   //get a graphics object from the new image
   Graphics g = Graphics.FromImage(newBitmap);

   //create the grayscale ColorMatrix
   ColorMatrix colorMatrix = new ColorMatrix(
      new float[][] 
      {
         new float[] {.3f, .3f, .3f, 0, 0},
         new float[] {.59f, .59f, .59f, 0, 0},
         new float[] {.11f, .11f, .11f, 0, 0},
         new float[] {0, 0, 0, 1, 0},
         new float[] {0, 0, 0, 0, 1}
      });

   //create some image attributes
   ImageAttributes attributes = new ImageAttributes();

   //set the color matrix attribute
   attributes.SetColorMatrix(colorMatrix);

   //draw the original image on the new image
   //using the grayscale color matrix
   g.DrawImage(original, new Rectangle(0, 0, original.Width, original.Height),
      0, 0, original.Width, original.Height, GraphicsUnit.Pixel, attributes);

   //dispose the Graphics object
   g.Dispose();
   return newBitmap;
} 
```

# regex - 如何使用 regex_replace 终止字符串？

> ID：15104665
> 
> 赞同：0
> 
> 时间：2013-02-27T05:12:57.583
> 
> 标签：regex, visual-studio-2010, winapi, visual-c++

我正在使用 CreateProcess 通过 Cygwin 的 bash.exe 运行 bash 脚本并重定向输出（因为这是客户想要的）。唯一剩下要解决的问题是，如果 ReadFile 没有填满 lpBuffer，我最终会在它的末尾有一堆垃圾字符，我想过滤掉它们。通常，这类似于：

```
"ÌÌÌÌ...ÌÌÌÌÌuÆì¨õD" 
```

下面的代码将为我提供：

```
"uÆì¨õD" 
```

所以，我至少部分成功了=D

但是，我真正想要的是在第一个垃圾字符处终止字符串，最好也使用换行符，但我似乎找不到 fmt 的变体。

```
void ReadAndHandleOutput(HANDLE hPipeRead) {
char lpBuffer[256];
DWORD nBytesRead;
wstringstream wss;
while(TRUE)
{
    if(!ReadFile(hPipeRead, lpBuffer, sizeof(lpBuffer), &nBytesRead, NULL) || !nBytesRead)
    {
        break;
    }

    // Filter out the weird non-ascii characters.
    std::string buffer(lpBuffer); 
    std::regex rx("[^[:alnum:][:punct:][:space:]]+"); 
    std::string fmt("\n\0");
    std::regex_constants::match_flag_type fonly = std::regex_constants::format_first_only;
    std::string result = std::regex_replace(buffer, rx, fmt, fonly);
    wss << result.c_str();
}
SetWindowText(GetDlgItem(HwndMain, IDC_OUTPUT), LPCWSTR(wss.str().c_str())); } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T05:18:47.033

我不确定用正则表达式修复它是否正确。我相信你应该`\0`在输入完成的地方放一个，你可以通过检索读取的字符数来找出位置。

但是，这些是*可打印*的（非垃圾）ASCII 字符集：

```
[ -~] 
```

这是从空格到波浪号的字符集。

所以这是所需的模式：

```
[^ -~]+ 
```

# objective-c - 更改创建文件夹时 NSOpenPanel 使用的默认名称？

> ID：15104669
> 
> 赞同：0
> 
> 时间：2013-02-27T05:13:17.517
> 
> 标签：objective-c, macos, cocoa, nsopenpanel

我正在使用`NSOpenPanel`，并且面板有一个“新建文件夹”按钮。当我单击该按钮时，它会显示“无标题文件夹”。如何设置我选择的文件夹名称？

这是我现在正在使用的代码：

```
NSOpenPanel* openDlg = [NSOpenPanel openPanel];
[openDlg setCanChooseFiles:NO];
[openDlg setAllowsMultipleSelection:NO];
[openDlg setCanChooseDirectories:TRUE];
[openDlg setCanCreateDirectories:YES];
[openDlg setTitle:@"Choose folder..."]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:36:01.663

You can implement this using objective-c runtime.`NSSavePanel` is using `NSNavNewFolderController` class for New folder dialog creation.

```
//
//  PBSavePanel.h
//  PBSavePanel
//
//  Created by Parag on 28/02/13.
//  Copyright 2013 __MyCompanyName__. All rights reserved.
//

#import <Cocoa/Cocoa.h>

@interface NSSavePanel (NewFolderButton)
-(void)setDefaultNewFolderName : (NSString *)name;// change default folder name
-(void)setIncludeNewFolderButton: (BOOL)value; // show/hide new folder button
@end
//
//  PBSavePanel.m
//  PBSavePanel
//
//  Created by Parag on 28/02/13.
//  Copyright 2013 __MyCompanyName__. All rights reserved.
//

#import "PBSavePanel.h"
#import <objc/runtime.h>

@implementation NSSavePanel (NewFolderButton)
static NSMutableString *mfolderName;
static BOOL shouldNotOverride;
-(void)setDefaultNewFolderName : (NSString *)name;
{
    if (!shouldNotOverride) {
        shouldNotOverride =YES;
        [self overrideFunctions:NSClassFromString(@"NSNavNewFolderController") sourceFunction:@selector(_defaultNewFolderName)  customClass:[self class] newFunction:@selector(_defaultNewFolderNameNew)];
    }
    if (mfolderName==nil) {
        mfolderName = [[NSMutableString alloc] init];
    }
    [mfolderName setString:name];

}
-(void)setIncludeNewFolderButton: (BOOL)value;
{
    [self _setIncludeNewFolderButton:value];
}
-(void) overrideFunctions:(Class)actualClass sourceFunction:(SEL)actualFunction customClass:(Class) customClass newFunction:(SEL)newFunction
{

    NSAutoreleasePool *pool=[[NSAutoreleasePool alloc]init];
    Method actualDefinitionInActualClass = class_getInstanceMethod(actualClass, actualFunction);
    Method newDefinitionInCustomClass=class_getInstanceMethod(customClass, actualFunction);
    const char* oldEncoding=method_getTypeEncoding(actualDefinitionInActualClass);
    IMP oldImplementation=method_setImplementation(actualDefinitionInActualClass,method_getImplementation(newDefinitionInCustomClass));
    class_addMethod(actualClass, newFunction, oldImplementation, oldEncoding);
    class_addMethod(class_getSuperclass(actualClass), newFunction, oldImplementation, oldEncoding);
    [pool drain];

}

-(NSString *)_defaultNewFolderName
{
    return  mfolderName;
}
-(void)dealloc
{
    if (mfolderName) {
        [mfolderName release];
    }
    [super dealloc];

}
@end 
```

**OUTPUT**

```
NSSavePanel *panel = [NSSavePanel savePanel];
[panel setDefaultNewFolderName:@"Parag"];
NSInteger result    = [panel runModal];

if (result == NSFileHandlingPanelOKButton) {
    //NSArray *urls = [panel URLs];
    [panel orderOut:nil];  

} 
```

![enter image description here](../Images/5c03f2d5e3dcd31befd8dec520b39a49.png)

# javascript - 在数组 mongodb 中拉取子文档

> ID：15104671
> 
> 赞同：0
> 
> 时间：2013-02-27T05:13:26.077
> 
> 标签：javascript, node.js, mongodb, mongoskin

我在mongodb中有这个结构

```
{doc:
    { array_doc:[....//many documents]}
} 
```

我在 mongodb 2.2 和 nodejs 0.8 中使用 mongoskin

```
var code_doc='HSKD41814541211';
var db = mongo.db(perm+"@127.0.0.1:27017/database",{safe:true});
    db.collection('comercio').findAndModify(
    {
        'code':code,
        'email':email,
    },[],{$pull:{'doc.array_doc':{'doc.array_doc.code_doc':code_doc}}},{new:true},function(err,result) 
```

我想从 array_doc 数组中删除一个文档，其中包含许多文档，数组中的每个文档都有一个唯一的 code_doc ...我想删除与变量 code_doc='HSKD41814541211' 匹配的文档；

tnx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T05:19:51.427

不要在被拉取的值中复制您的密钥。您的`$pull`运算符应如下所示：

```
{$pull: {'doc.array_doc': {code_doc: code_doc}}} 
```

# vba - Excel-VBA 兼容性问题

> ID：15104674
> 
> 赞同：2
> 
> 时间：2013-02-27T05:13:39.227
> 
> 标签：vba, charts, excel-2007, compatibility, excel-2010

我在我的 Excel 仪表板中使用了以下语句：

```
HeaderTableSheet.ChartObjects("Header_BreakEvenAnalysis").Copy 
```

它每次在 Excel-2007 上都能正常工作，但在 Excel-2010 中出现错误**“应用程序定义或对象定义错误”**（也不是每次都这样）

我也无法弄清楚原因。

请问有什么解决方案/解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T20:43:42.033

复制图表前需要激活工作表（仅在 Excel-2010 中需要）

所以下面的代码起作用了：

```
HeaderTableSheet.Activate
HeaderTableSheet.ChartObjects("Header_BreakEvenAnalysis").Copy 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:44:13.677

你能试试这个吗？

```
Option Explicit

Sub yourSUB()
Dim myChart As ChartObject

'--- other codes

    For Each myChart In Sheets("SheetName").ChartObjects
      If myChart.Name = "Header_BreakEvenAnalysis" Then
        myChart.Copy 
      End If
    Next myChart

'---other codes
'---release the memory and clean up
Set myChart = Nothing
End Sub 
```

# python - 命令行参数 Mac OSX

> ID：15104676
> 
> 赞同：1
> 
> 时间：2013-02-27T05:13:53.843
> 
> 标签：python, macos, nuke

我正在开发一个名为 Foundry Nuke 的软件。在 Mac OSX 中传递命令行参数时遇到问题。

如果我使用以下命令，它可以正常工作并启动 Nuke 软件。

```
subprocess.Popen(['Application/Nuke6.3v8/Nuke6.3v8.app/Contents/MacOS/Nuke6.3v8'], stdin=subprocess.PIPE, stdout=subprocess.PIPE) 
```

但是，如果我在命令中添加参数，它就不起作用。 `subprocess.Popen(['Application/Nuke6.3v8/Nuke6.3v8.app/Contents/MacOS/Nuke6.3v8', '-t /.../somepath/init.py', '%s %s' % (someArg1, someArg2)], stdin=subprocess.PIPE, stdout=subprocess.PIPE)`

请帮助。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T05:20:12.980

每个单独的参数都需要是列表中的单独项目。

```
subprocess.Popen(['Application/Nuke6.3v8/Nuke6.3v8.app/Contents/MacOS/Nuke6.3v8',
                  '-t', '/.../somepath/init.py', # not '-t /.../somepath/init.py'
                  someArg1, someArg2,            # not '%s %s'%(someArg1, someArg2)'
                 ], stdin=subprocess.PIPE, stdout=subprocess.PIPE) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T05:17:02.577

要添加参数，请在列表中添加额外的项目：

```
subprocess.Popen([
    'Application/Nuke6.3v8/Nuke6.3v8.app/Contents/MacOS/Nuke6.3v8',
    '-t', '/.../somepath/init.py',
    some_arg_1, some_arg_2,
], stdin=subprocess.PIPE, stdout=subprocess.PIPE) 
```

# android - 在android中创建异常的Alertdialog

> ID：15104677
> 
> 赞同：2
> 
> 时间：2013-02-27T05:13:56.437
> 
> 标签：android, exception, android-alertdialog

我在异步任务 onPostexecute 方法中使用警报对话框。但我的问题是当我在异步任务完成之前回到以前的活动时。警报对话框（alert.show）给出以下异常。警报对话框将出现在窗口上但为什么当我切换回来时，这不会显示在其他屏幕上。

**日志错误：**

```
02-27 05:03:05.283: E/AndroidRuntime(827): FATAL EXCEPTION: main
02-27 05:03:05.283: E/AndroidRuntime(827): android.view.WindowManager$BadTokenException: Unable to add window -- token android.os.BinderProxy@40f25058 is not valid; is your activity running?
02-27 05:03:05.283: E/AndroidRuntime(827):  at android.view.ViewRootImpl.setView(ViewRootImpl.java:567)
02-27 05:03:05.283: E/AndroidRuntime(827):  at android.view.WindowManagerGlobal.addView(WindowManagerGlobal.java:246)
02-27 05:03:05.283: E/AndroidRuntime(827):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:69)
02-27 05:03:05.283: E/AndroidRuntime(827):  at android.app.Dialog.show(Dialog.java:281)
02-27 05:03:05.283: E/AndroidRuntime(827):  at android.app.AlertDialog$Builder.show(AlertDialog.java:951)
02-27 05:03:05.283: E/AndroidRuntime(827):  at com.example.parentportal.Email$emailtask.onPostExecute(Email.java:119)
02-27 05:03:05.283: E/AndroidRuntime(827):  at com.example.parentportal.Email$emailtask.onPostExecute(Email.java:1)
02-27 05:03:05.283: E/AndroidRuntime(827):  at android.os.AsyncTask.finish(AsyncTask.java:631)
02-27 05:03:05.283: E/AndroidRuntime(827):  at android.os.AsyncTask.access$600(AsyncTask.java:177)
02-27 05:03:05.283: E/AndroidRuntime(827):  at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
02-27 05:03:05.283: E/AndroidRuntime(827):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-27 05:03:05.283: E/AndroidRuntime(827):  at android.os.Looper.loop(Looper.java:137)
02-27 05:03:05.283: E/AndroidRuntime(827):  at android.app.ActivityThread.main(ActivityThread.java:5039)
02-27 05:03:05.283: E/AndroidRuntime(827):  at java.lang.reflect.Method.invokeNative(Native Method)
02-27 05:03:05.283: E/AndroidRuntime(827):  at java.lang.reflect.Method.invoke(Method.java:511)
02-27 05:03:05.283: E/AndroidRuntime(827):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-27 05:03:05.283: E/AndroidRuntime(827):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-27 05:03:05.283: E/AndroidRuntime(827):  at dalvik.system.NativeStart.main(Native Method) 
```

**代码**

```
 Context mContext = Email.this;
               AlertDialog.Builder alert = new AlertDialog.Builder(mContext);

               alert.setTitle("");
               WebView wv = new WebView(mContext);
               String html = "<h3>Message has been sent successfully</h3>";

               wv.loadData(html, "text/html", "UTF-8");
               alert.setView(wv);
//             alert.setPositiveButton("Yes", new DialogInterface.OnClickListener(){
//                public void onClick(DialogInterface dialog, int id){
//                 
//                }
//             });
               alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener(){
                  public void onClick(DialogInterface dialog, int id){

                  }
               });
               alert.show();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T05:31:43.397

问题是因为在 onPostExecute() 中，您有警报对话框，并且您正在提供电子邮件活动的上下文。但是您正在导航到其他活动，因此上下文是错误的。因此，您收到此错误！

最好显示进度并允许用户在 asynctask 执行完成后导航。如果您希望它在后台运行，请使用服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T05:48:36.777

尝试如下：

> ```
>  AlertDialog.Builder alert = new AlertDialog.Builder(Email.this);
>         alert.setTitle("");
>            WebView wv = new WebView(Email.this);
>            String html = "<h3>Message has been sent successfully</h3>";
>            wv.loadData(html, "text/html", "UTF-8");
>            alert.setView(wv);
>       // alert.setPositiveButton("Yes", new DialogInterface.OnClickListener(){
>       //public void onClick(DialogInterface dialog, int id){
>       //}
>        //});
>            alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener(){
>               public void onClick(DialogInterface dialog, int id){
>               }
>            });
>         AlertDialog builder = alert.create();
>     builder.show(); 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T05:17:29.107

在您的活动失去可见性后，您正试图显示一个对话框。您要么不需要调用 show（可以是要捕获的 PITA），要么需要捕获该异常并为您的应用程序提供合理的行为。我通常刚刚发现了异常，但这对你来说可能还不够。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T05:32:25.733

您必须在 onprogressupate mtd 上调用 alertdialog 作为它在主线程上的调用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-07T04:43:32.007

可能的原因是警报对话框的上下文。您可能已完成该活动，因此它试图在该上下文中打开但已关闭。尝试将该对话框的上下文更改为您的第一个活动，因为它直到最后才会完成。

试试下面的代码，例如

而不是这个。

```
 AlertDialog alertDialog = new AlertDialog.Builder(this).create(); 
```

尝试使用

```
 AlertDialog alertDialog = new AlertDialog.Builder(FirstActivity.getInstance()). 
```

# php - 如何获取原始 URL 表单 301 重定向

> ID：15104678
> 
> 赞同：1
> 
> 时间：2013-02-27T05:13:57.913
> 
> 标签：php, http-status-code-301

我想从 301 重定向 URL 中获取原始 URL（用户输入的 URL）。前任：

www.mydomain.com/about-1/

www.mydomain.com/about-2/

www.mydomain.com/about-3/

以上所有 URL 都希望重定向 www.mydomain.com/about/。所以我使用简单的`.htaccess`重定向来做到这一点。我的问题是如何找到用户来自哪里（哪个原始 URL）。我试过`$_SERVER['HTTP_REFERER']`了，但没有用。

传递变量 like`www.mydomain.com/about-1/?val=1`可能是一个简单的解决方案，但在这种情况下是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T05:20:11.707

_SERVER 中的 HTTP_REFERER 告诉你它来自哪里。我有时会在 url 上附加一个参数（使用 script.php?param=source 或路径 script.php/path），以帮助我简化处理。这些参数可以通过 htaccess 规则透明地添加到脚本中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T05:26:00.987

执行此操作的简单方法是将引荐来源网址到 www.mydomain.com/about/ URL 作为变量。

```
<?php header("Location: http://www.mydomain.com/about?referrer=http://www.mydomain.com/about-1" ,TRUE,301); ?> 
```

然后，您始终拥有带有 $_GET 变量的引荐来源网址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T05:32:23.083

您可以使用`PHP`. 这是获取代码的链接。

[http://www.phpjunkyard.com/tutorials/php-redirect.php](http://www.phpjunkyard.com/tutorials/php-redirect.php)

# java - Java：分两部分读取文件-部分作为字符串，部分作为字节[]

> ID：15104680
> 
> 赞同：0
> 
> 时间：2013-02-27T05:14:17.467
> 
> 标签：java, file, stream

我有一个文件，它被“\n\n”分成两部分——第一部分不是太长的字符串，第二部分是字节数组，它可能很长。

我正在尝试按如下方式读取文件：

```
 byte[] result;
    try (final FileInputStream fis = new FileInputStream(file)) {

        final InputStreamReader isr = new InputStreamReader(fis);
        final BufferedReader reader = new BufferedReader(isr);

        String line;
        // reading until \n\n
        while (!(line = reader.readLine()).trim().isEmpty()){
            // processing the line
        }

        // copying the rest of the byte array
        result = IOUtils.toByteArray(reader);
        reader.close();
    } 
```

即使结果数组是它应该的大小，它的内容也被破坏了。如果我尝试`toByteArray`直接在`fis`or上使用`isr`，结果的内容是空的。

如何正确有效地读取文件的其余部分？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T05:28:37.987

您的内容被破坏的原因是该`IOUtils.toByteArray(...)`函数将您的数据作为默认字符编码的字符串读取，即它使用您的默认编码规定的任何逻辑将 8 位二进制值转换为文本字符。这通常会导致许多二进制值被破坏。

根据字符集的具体实现方式，这可能会起作用：

```
result = IOUtils.toByteArray(reader, "ISO-8859-1"); 
```

ISO-8859-1 每个字符只使用一个字节。并非所有字符值都已定义，但许多实现无论如何都会传递它们。也许你很幸运。

但是一个更简洁的解决方案是首先将字符串作为二进制数据读取，然后通过将其转换为文本，`new String(bytes)`而不是将最后的二进制数据作为字符串读取，然后再将其转换回来。

但是，这可能意味着您需要实现自己的 BufferedReader 版本以提高性能。

您可以通过明显的 Google 搜索找到标准 BufferedReader 的源代码，这将（例如）引导您到这里：

[http://www.docjar.com/html/api/java/io/BufferedReader.java.html](http://www.docjar.com/html/api/java/io/BufferedReader.java.html)

它有点长，但从概念上讲并不难理解，所以希望它可以作为参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T05:55:31.497

或者，您可以将文件读入字节数组，找到 \n\n 位置并将数组拆分为行和字节

```
 byte[] a = Files.readAllBytes(Paths.get("file"));
    String line = "";
    byte[] result = a;
    for (int i = 0; i < a.length - 1; i++) {
        if (a[i] == '\n' && a[i + 1] == '\n') {
            line = new String(a, 0, i);
            int len = a.length - i - 1;
            result = new byte[len];
            System.arraycopy(a, i + 1, result, 0, len);
            break;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T07:04:04.867

感谢所有评论 - 最终实现是这样完成的：

```
 try (final FileInputStream fis = new FileInputStream(file)) {

        ByteBuffer buffer = ByteBuffer.allocate(64);

        boolean wasLast = false;
        String headerValue = null, headerKey = null;
        byte[] result = null;

        while (true) {
            byte current = (byte) fis.read();
            if (current == '\n') {
                if (wasLast) {
                    // this is \n\n
                    break;
                } else {
                    // just a new line in header
                    wasLast = true;
                    headerValue = new String(buffer.array(), 0, buffer.position()));
                    buffer.clear();
                }
            } else if (current == '\t') {
                // headerKey\theaderValue\n
                headerKey = new String(buffer.array(), 0, buffer.position());
                buffer.clear();
            } else {
                buffer.put(current);
                wasLast = false;
            }
        }
        // reading the rest
        result = IOUtils.toByteArray(fis);
    } 
```

# php - 如何使用谷歌访问令牌获取用户电子邮件？

> ID：15104682
> 
> 赞同：16
> 
> 时间：2013-02-27T05:14:26.527
> 
> 标签：php, javascript, jquery, html

我遵循了所有这些步骤。

[https://developers.google.com/+/web/signin/](https://developers.google.com/+/web/signin/)

我有客户 ID 和客户密码。

我现在获得了访问令牌，如何获取带有访问令牌的用户资料和电子邮件？以及如何检查用户是否登录？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-27T05:22:08.080

使用 OAuth2，您可以通过范围参数请求权限。（[文档](http://code.google.com/apis/accounts/docs/OAuth2Login.html#scopeparameter)。）我想你想要的范围是[https://www.googleapis.com/auth/userinfo.email](https://www.googleapis.com/auth/userinfo.email)和[https://www.googleapis.com/auth/userinfo.profile](https://www.googleapis.com/auth/userinfo.profile)。

然后，一旦您获得访问令牌，就可以轻松获取个人资料信息。（我假设您已经能够将返回的授权码兑换为访问令牌？）只需向[https://www.googleapis.com/oauth2/v1/userinfo?access_token=](https://www.googleapis.com/oauth2/v1/userinfo?access_token=) {accessToken} 发出 get 请求，它会返回配置文件数据的 JSON 数组，包括电子邮件：

```
{
    "id": "00000000000000",
    "email": "fred.example@gmail.com",
    "verified_email": true,
    "name": "Fred Example",
    "given_name": "Fred",
    "family_name": "Example",
    "picture": "https://lh5.googleusercontent.com/-2Sv-4bBMLLA/AAAAAAAAAAI/AAAAAAAAABo/bEG4kI2mG0I/photo.jpg",
    "gender": "male",
    "locale": "en-US"
} 
```

没有保证，但试试这个：

```
$url = "https://www.googleapis.com/oauth2/v1/userinfo";
$request = apiClient::$io->makeRequest($client->sign(new apiHttpRequest($url, 'GET')));

if ((int)$request->getResponseHttpCode() == 200) {
    $response = $request->getResponseBody();
    $decodedResponse = json_decode($response, true);
    //process user info
  } else {
    $response = $request->getResponseBody();
    $decodedResponse = json_decode($response, true);
    if ($decodedResponse != $response && $decodedResponse != null && $decodedResponse['error']) {
      $response = $decodedResponse['error'];
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-27T05:18:44.107

尝试这个

```
$accessToken = 'access token';
$userDetails = file_get_contents('https://www.googleapis.com/oauth2/v1/userinfo?access_token=' . $accessToken);
$userData = json_decode($userDetails);

if (!empty($userData)) {

  $googleUserId = '';
  $googleEmail = '';
  $googleVerified = '';
  $googleName = '';
  $googleUserName = '';

  if (isset($userData->id)) {
    $googleUserId = $userData->id;
  }
  if (isset($userData->email)) {
    $googleEmail = $userData->email;
    $googleEmailParts = explode("@", $googleEmail);
    $googleUserName = $googleEmailParts[0];
  }
  if (isset($userData->verified_email)) {
    $googleVerified = $userData->verified_email;
  }
  if (isset($userData->name)) {
    $googleName = $userData->name;
  }
} else {

  echo "Not logged In";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-28T18:57:40.953

您只需将此行添加到您的`scope` Open your 中`Application.cfc`，然后添加此代码

```
 <cfset request.oauthSettings = 
           {scope = "https://www.googleapis.com/auth/userinfo.email+https://www.googleapis.com/auth/userinfo.profile",
                                    client_id = "Your-id",
                                    client_secret = "your-secret",
                                    redirect_uri = "redirect-page",
                                    state = "optional"} /> 
```

现在您可以从可以这样调用的函数中获取电子邮件

```
 <cfscript>              
        public function getProfile(accesstoken) {

            var h = new com.adobe.coldfusion.http();
            h.setURL("https://www.googleapis.com/oauth2/v1/userinfo");
            h.setMethod("get");
            h.addParam(type="header",name="Authorization",value="OAuth #accesstoken#");
            h.addParam(type="header",name="GData-Version",value="3");
            h.setResolveURL(true);
            var result = h.send().getPrefix();
            return deserializeJSON(result.filecontent.toString());
        }       
    </cfscript>

            <cfoutput>
            <cfset show = getProfile(session.ga_accessToken)>
            <cfdump var="#show#">
           </cfoutput> 
```

希望这可以帮助很多人解决这个问题。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-30T07:22:04.630

```
$access_token = 'your access token';
$headers = array('Content-Type: Application/json');
$endpoint = "https://www.googleapis.com/oauth2/v1/userinfo?access_token=".$access_token;

$soap_do = curl_init();
curl_setopt($soap_do, CURLOPT_URL, $endPoint);
curl_setopt($soap_do, CURLOPT_RETURNTRANSFER, true);
curl_setopt($soap_do, CURLOPT_HTTPHEADER, $header);

curl_setopt($soap_do, CURLOPT_FAILONERROR, true);
$result = curl_exec($soap_do); 
```

# c++ - C++ DLL 和可执行文件是否可以从不同的进程进行通信？

> ID：15104689
> 
> 赞同：2
> 
> 时间：2013-02-27T05:15:11.157
> 
> 标签：c++

DLL 和可执行文件是否可以从不同的进程进行通信？

例如：

```
Child.dll is loaded into Target.exe...
Owner.exe is running...
Owner.exe sent message "close" to Child.dll
Child.dll received message "close" from Owner.exe
Child.dll executed: ExitProcess( 0 );
Target.exe has exited, therefore Child.dll has already been unloaded. 
```

那么，有可能吗？如果是这样，怎么做？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T05:21:24.073

DLL 不在单独的进程中运行，它在调用某些方法或访问 DLL 中包含的数据的进程的进程空间中运行。

因此，如果不存在使用 DLL 的进程，操作系统可能决定将映射为 DLL 的内存页面交换到 SWAP 空间，甚至完全从内存中卸载 DLL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T05:25:09.110

这可以通过“[进程间通信](http://en.wikipedia.org/wiki/Inter-process_communication)”来实现。请注意，使用 IPC，您不会向 DLL 发送消息，而是将其发送给其他进程。因此，如果进程 A 想告诉进程 B 一条消息，它就会这样做（使用他们为通信建立的任何手段，如套接字、共享内存、命名管道等）。IPC 代码可能存在于 DLL 中。

请注意，您不能像您在问题中概述的那样单独与 DLL 对话。您必须与进程交谈（但同样，处理进程通信的代码可能存在于不同的 DLL 中）。

原因之一是多个进程可以同时使用同一个 DLL。如果您有两个进程正在运行，它们都使用`Child.dll`，并且您想将消息发送到`Child.dll`消息，那么应该由哪个进程获取该消息？这不太有意义，因为这两个进程完全相互独立，即使它们都使用相同的 DLL。因此，您不能单独与 DLL 对话；相反，你与一个过程交谈。

# html - 防止缓存数据表的数据

> ID：15104690
> 
> 赞同：0
> 
> 时间：2013-02-27T05:15:27.573
> 
> 标签：html, jsf, icefaces-3

我有一个`ice:dataTable`并且在每一行中都有一个`inputText`. 每次`valueChangeListener`在其他组件上触发时，记录列表都会更新。`inputText`当它重置记录列表时，浏览器会显示表行中字段的先前值。

我尝试了`Filter`和`<meta/>`标签。它对我不起作用。有人可以告诉我如何摆脱这个问题吗？（Backing bean 保留实际记录列表）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:36:53.517

这是一个JSF问题，详细看下面的回答

[仅当验证失败时，输入字段才会保留以前的值](https://stackoverflow.com/questions/14371723/input-fields-hold-previous-values-only-if-validation-failed)

为了简单起见，JSF 将值保留在 partialViewContext 中，因此您需要做的就是重置 partialViewContext 中的所有组件

或者，如果您使用的是 primefaces，您可以简单地将 < p:resetInput target="tableId"/> 添加到该字段（嵌套在内部），或者如果您使用的是 OmiFaces，那么您可以使用 ResetInputAjaxActionListener

# python - 同一行输出中的多种类型

> ID：15104693
> 
> 赞同：2
> 
> 时间：2013-02-27T05:15:44.467
> 
> 标签：python, int, type-conversion, output

我的目标是代码中的最后一个打印行，但我真的做不到，因为我一直收到此错误`TypeError:`unsupported operand type(s) for +: ' `int`' and ' `str`'。有没有一种快速的方法来仅更改输出部分以使其成为可能？我仍然需要首先将它们转换为 int，但在这个输出的情况下，我需要在 int 旁边有“Population”和“Area”这两个词！

```
def _demo_fileopenbox():        
    msg  = "Pick A File!"
    msg2 = "Select a country to learn more about!"
    title = "Open files"
    default="*.py"
    f = fileopenbox(msg,title,default=default)
    writeln("You chose to open file: %s" % f)    
    countries = {}   

        with open(f,'r') as handle:

        reader = csv.reader(handle, delimiter = '\t')  

        for row in reader:

        countries[row[0]] = int(row[1].replace(',', '')), int(row[2].replace(',', ''))

        reply = choicebox(msg=msg2, choices= list(countries.keys()) )

        print(reply)

        print((countries[reply])[0])

        print((countries[reply])[1])

        #print(reply + "- \tArea: + " + (countries[reply])[0] + "\tPopulation: " + (countries[reply])[1] ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T05:20:13.267

您必须使用以下命令将它们转换为字符串`str()`：

```
print(reply + "- \tArea: " + str(countries[reply][0]) + "\tPopulation: " + str(countries[reply][1])) 
```

或者将它们作为参数传递并让我们`print`处理它：

```
print(reply + "- \tArea:", countries[reply][0] + "\tPopulation:", countries[reply][1]) 
```

虽然在这一点上，我会使用字符串格式：

```
print('{}- \tArea: {}\tPopulation: {}'.format(reply, rountries[reply][0], rountries[reply][1])) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-08T20:28:54.853

或者您可以使用 '%' 符号告诉打印行您正在使用字符串：

```
print(reply + "- \tArea: %s" % countries[reply][0] + "\tPopulation: %s" + % countries[reply][1]) 
```

Python3 建议使用 {:s} 代替 %s。起初可能看起来令人生畏，但它并不算太糟糕并且很有用。

```
print("{reply}-\tArea: {area}\tPopulation: {population}".format(reply=reply,area=countries[reply][0],population=countries[reply][1])) 
```

# javascript - 图像动画功能在织物 js 中不起作用？

> ID：15104694
> 
> 赞同：1
> 
> 时间：2013-02-27T05:16:03.553
> 
> 标签：javascript, html, html5-canvas, fabricjs

我正在使用织物 js 进行画布动画，并创建了 id 为“画布”的画布，然后将图像放入其中并将左侧位置设置为零。它工作正常，但动画功能不起作用。

请帮我。

**我的代码：**

**HTML：**

```
<canvas id="canvas" width="990" height="285">
    This text is displayed if your browser 
    does not support HTML5 Canvas.  
</canvas> 
```

**javascript:**

```
var canvas = new fabric.Canvas('canvas');

var image = new Image();
image.src = 'images/body.png';

var bugBody = fabric.Image.fromURL(image.src, function (oImg) {
    canvas.add(oImg);
        oImg.set('left',0)
});

bugBody.animate('left', 200, {
    onChange: canvas.renderAll.bind(canvas)
}); 
```

感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T11:51:30.763

我认为发生这种情况是因为您的图像未完全加载。
因此，您可以将动画代码放在回调函数中。
检查这个 jsfiddle： http: [//jsfiddle.net/9x9Qc/](http://jsfiddle.net/9x9Qc/)
像这样：

```
var srcImg = "http://fabricjs.com/lib/pug.jpg";

// canvas
var canvas = new fabric.Canvas('c');

fabric.Image.fromURL(srcImg, function (oImg) {
    canvas.add(oImg);
    oImg.set('left',0);
    oImg.set('top', 100);
    oImg.scale(.25);
    canvas.renderAll();

    // and then, we can animate the image    
    oImg.animate('left', 200, {
        onChange: canvas.renderAll.bind(canvas)
    });
}); 
```

# html - 边框底部属性未出现在该位置

> ID：15104699
> 
> 赞同：1
> 
> 时间：2013-02-27T05:16:54.467
> 
> 标签：html, css

我只是在我的一个小项目中工作。

这是网址[http://jsfiddle.net/KpFj2/1/embedded/result/](http://jsfiddle.net/KpFj2/1/embedded/result/)

```
 <article>
                <div class="entry-meta">
                    <div class="comment"><i class="icon-calendar"></i>25 Feb 2013</div>
                    <div class="calender"><i class="icon-comment"></i>22 Comments</div>
                </div>
                <div class="post-content">
                    <h1>A New Beginning, A New Story</h1>
                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
                    tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
                    quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
                    consequat. </p>
                </div>
           </article> 
```

现在我只想要一个帮助我只是想知道为什么边框底部属性不完全符合我想要的位置？它出现在中间的某个地方。

你能指导我解决这个错误吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T05:23:05.803

你需要一些方法来清除你的浮动。添加`overflow:hidden`到`#content article`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T05:23:42.947

您已经漂浮了子 Div 而没有清除它们。

有几个选项可以修复它：

HTML

```
<article>
     <div class="entry-meta"></div>
     <div class="post-content"></div>
</article> 
```

CSS

```
article { overflow: hidden; } 
```

或者

HTML

```
<article>
     <div class="entry-meta"></div>
     <div class="post-content"></div>
     <br class="clear" />
</article> 
```

CSS

```
.clear { clear:both; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T05:25:40.193

设置 或使用并`position: absolute;`查看。`#content article``overflow:hidden;`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T05:35:16.230

您正在使用 HTML5 Boilerplate，其中`.clearfix`已经存在帮助程序类来解决 @Wex 和 @JesseLee 描述的问题。

```
/*
 * Clearfix: contain floats
 *
 * For modern browsers
 * 1\. The space content is one way to avoid an Opera bug when the
 *    `contenteditable` attribute is included anywhere else in the document.
 *    Otherwise it causes space to appear at the top and bottom of elements
 *    that receive the `clearfix` class.
 * 2\. The use of `table` rather than `block` is only necessary if using
 *    `:before` to contain the top-margins of child elements.
 */

.clearfix:before,
.clearfix:after {
    content: " "; /* 1 */
    display: table; /* 2 */
}

.clearfix:after {
    clear: both;
}

/*
 * For IE 6/7 only
 * Include this rule to trigger hasLayout and contain floats.
 */

.clearfix {
    *zoom: 1;
} 
```

N. Gallagher 在这篇文章中对此进行了描述：http: [//nicolasgallagher.com/micro-clearfix-hack/](http://nicolasgallagher.com/micro-clearfix-hack/)

您只需将此类添加到您的`article`元素中，如[http://jsfiddle.net/KpFj2/2/](http://jsfiddle.net/KpFj2/2/)

# database - 从 Windows Phone 中的后台服务访问 LINQ to Sql 数据库

> ID：15104702
> 
> 赞同：0
> 
> 时间：2013-02-27T05:17:06.150
> 
> 标签：database, linq-to-sql, windows-phone-7.1, background-service

我有一个 Windows Phone 应用程序，它使用 Linq to Sql 从位于独立存储中的数据库中存储和检索数据。现在如果我为我的应用程序创建一个后台服务，后台服务是否可以访问数据库？根据 MSDN：

> 本地数据库在 Windows Phone 应用程序的进程中运行。与 Microsoft SQL Server 等客户端-服务器数据库不同，它不会作为后台服务连续运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T14:32:04.043

是的，您可以从后台代理访问该数据库！

> 本地数据库在 Windows Phone 应用程序的进程中运行。

这意味着除非您的应用程序的任何部分实际运行，否则您的数据库不会运行。它可以是您的应用程序，也可以是该应用程序创建的后台代理。

# c# - SQL Server 2008 归档

> ID：15104704
> 
> 赞同：0
> 
> 时间：2013-02-27T05:17:20.867
> 
> 标签：c#, sql-server, database, sql-server-2008, ado.net

我一直使用 SQL Server 2008 作为 Windows 桌面应用程序的数据库。我正在重新设计产品，我可能会使用 SQL Server 2008 或 MySQL。

所以我正在考虑存档的通用解决方案。SQL Server 2008 中是否有类似 SqlDump 的东西？目前我没有使用 ORM，我可能计划在未来几天使用实体框架。

基本上我想删除旧条目，每当需要生成报告时，我也必须恢复它..

我这里还有一个问题：如果数据库架构发生变化怎么办？我们如何恢复旧数据库？

如果没有通用解决方案，我将不胜感激特定于 SQL Server 2008 的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T05:23:30.107

一般来说，存档的主题对于这个论坛来说太宽泛了。但我要投入我的两分钱。我发现最好将记录存档（即，将记录从一个表移动到另一个表），并且通常在不同的数据库中。

这可以处理架构问题，因为您可以修改存档表的架构并使其保持同步。

它还允许您编写专门的报告，其中实际上包括存档数据作为选项。

它还允许您为存档数据库设置不同于生产数据库的服务器架构。他们甚至不必在同一台服务器上。他们甚至不必被链接。构建一个 .NET 应用程序以根据您的需要定期将行从一个数据库移动到另一个数据库将非常简单。

# qt - 带有 QAbstractListModel 的 QListView 显示一个空列表

> ID：15104711
> 
> 赞同：5
> 
> 时间：2013-02-27T05:18:23.460
> 
> 标签：qt, qlistview, qabstractlistmodel

我创建了一个非常简单的`QListView`带有自定义的示例`QAbstractListModel`。显示`QListView`，但它是空的。

我究竟做错了什么？

代码：

```
#include <QListView>
#include <QAbstractListModel>
#include <QApplication>

class DataModel: public QAbstractListModel
{
public:
    DataModel() : QAbstractListModel() {}
    int rowCount( const QModelIndex & parent = QModelIndex() ) const { return 2; }
    QVariant data( const QModelIndex & index, int role = Qt::DisplayRole ) const
    {
        return "a";
    }
};

int main( int argc, char **argv)
{
    QApplication app(argc, argv, true);
    QListView *lv = new QListView();
    DataModel d;
    lv->setModel( &d ); 
    lv->show();
    app.setMainWidget(lv);
    app.exec();
} 
```

谢谢！

对前面代码的修复是将模型的父级设置为`QListView`：

```
DataModel d(lv); 
```

但这提出了一个问题，如果模型必须引用视图，那么模型/视图的独立性在哪里？

如果我想在两个不同的视图中使用这个模型怎么办？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-27T09:05:35.877

仅当角色 = Qt::DisplayRole 时，您的方法数据才应返回“a”。否则，它为每个角色返回“a”。

因此，添加一个简单的测试，它将起作用：

```
 QVariant data( const QModelIndex & index, int role = Qt::DisplayRole ) const
{
    if ( role == Qt::DisplayRole ) {
      return "a";
    }
    return QVariant();
} 
```

# java - 活动关闭时不显示通知

> ID：15104713
> 
> 赞同：1
> 
> 时间：2013-02-27T05:18:43.803
> 
> 标签：java, android, android-intent, notifications, android-pendingintent

我正在尝试在一年中的某一天发生时发出通知。我似乎无法弄清楚如何获得Android。我怎样才能让android每天检查这个应用程序？

```
cal = Calendar.getInstance();
    dayOfYear = cal.get(Calendar.DAY_OF_YEAR);

    payDays = new int[12];

    payDays[0] = 60;
    payDays[1] = 88;
    payDays[2] = 123;
    payDays[3] = 151;...

    // Checks when to send the notification
    if (dayOfYear == payDays[0] || 
        dayOfYear == payDays[1] ||
        dayOfYear == payDays[2] ||
        dayOfYear == payDays[3] ||

    {

        Builder builder = new Notification.Builder(this)
        .setContentTitle("Phone Commission")
        .setContentText("Expand for totals")
        .setSmallIcon(R.drawable.notify2);

        Notification notification = new Notification.BigTextStyle(builder)
                .bigText("Add-a-Line: " + AALNote +
                         "\nUpgrades: " + UPGNote +
                         "\nNew Lines: " + NLNote +
                         "\nYour total commission is: " + "$" + totalNote).build();

            NotificationManager notify = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
              notify.notify(0, notification);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T05:20:05.177

您需要设置闹钟。你不能在 Activity 中做这样的事情。您应该在服务中设置该警报，因为在 Activity 中这样做会使其在 Activity 完成后丢失。

# c# - 语法高亮 WP7

> ID：15104717
> 
> 赞同：0
> 
> 时间：2013-02-27T05:18:47.773
> 
> 标签：c#, windows-phone-7, xaml

我正在尝试制作一个简单的 wp7 应用程序，但我需要突出显示字符串的某些部分。比如`hello`紫色和`how are you?`黄色我怎么能在 C# 中做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:56:39.427

最好的方法是使用 RichTextBox，这样您就可以用段落和运行“样式化”文本。更多信息[在这里...](http://msdn.microsoft.com/en-us/library/ee681613%28v=vs.95%29.aspx)

# validation - 在数据阶段验证 IP 地址

> ID：15104720
> 
> 赞同：0
> 
> 时间：2013-02-27T05:18:52.900
> 
> 标签：validation, ip, datastage

我有一个包含两个字段的源文件：**IP_ADDRESS**和**USER_NAME**。我想在使用 DATASTAGE 将 IP 地址加载到数据仓库之前检查 IP 地址是否正确。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-20T15:21:43.650

是的，您可以使用转换器或转换器和过滤器来执行此操作，具体取决于您使用的 Datastage 版本。如果您使用的是 PX，只需在转换器阶段对验证逻辑进行编码，然后在输出链接上设置一个过滤器，如果行未通过验证逻辑，则不允许它们向前传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-27T18:47:18.367

我正在浏览 Stack Overflow，并认为我可能对您的问题有一个解决方案。如果您创建一个作业以从文件中获取所有 IP_ADDRESS 并将它们发送到 BASIC 转换器（在 DataStage 中搜索 BASIC 转换器。它不是通常在调色板上的那个）。从那里，将 Stage Variables 设置为 'SetUserStatus() 并将列名写入 peek 阶段（您根本不需要输出。SetUserStatus 是重要的部分）。现在，这将允许您将命令输出（IP 地址列表）传递给序列。从序列中，从您刚刚创建的作业（BASIC 转换器作业）开始，并将其链接到用户变量活动。在用户变量活动阶段，将名称设置为“IP 地址”，将表达式设置为 IP_ADDRESS.$UserStatus。然后，您可以使用循环来获取现在是列表的输出，并使用 Ping 命令将每个单独的 IP 地址发送到执行阶段，以查看它是否返回有效的 IP 地址。如果它确实返回了一个有效的 IP，那么让你的工作编写 USER_NAME 和 IP_ADDRESS 来执行一个“选择”语句，其中 IP_ADDRESS = 有效的 IP_ADDRESS。对于那些无效的，您可以将它们发送到不同的路径，并将它们写到某个地方的“.txt”文件中，这样您就知道哪些是无效的。我敢肯定，您将需要更多步骤，但这应该是要点。Select 语句，其中 IP_ADDRESS = 有效的 IP_ADDRESS。对于那些无效的，您可以将它们发送到不同的路径，并将它们写到某个地方的“.txt”文件中，这样您就知道哪些是无效的。我敢肯定，您将需要更多步骤，但这应该是要点。Select 语句，其中 IP_ADDRESS = 有效的 IP_ADDRESS。对于那些无效的，您可以将它们发送到不同的路径，并将它们写到某个地方的“.txt”文件中，这样您就知道哪些是无效的。我敢肯定，您将需要更多步骤，但这应该是要点。

希望我对您的问题的快速分析对您有所帮助。

# gprs - C：数据包发送到特定设备（移动设备）

> ID：15104722
> 
> 赞同：0
> 
> 时间：2013-02-27T05:18:57.327
> 
> 标签：gprs, packets, access-point, wireless

具有数千个用户/设备连接到同一网络的无线设备如何接收数据包？

如果我们使用 UDP，它是否会将数据包发送到所有设备，以便只有经过身份验证的设备会接受数据包而其他设备会拒绝？

如果我们使用 TCP 而不是 UDP，情况会如何变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T05:28:57.963

UDP 和 TCP 是相同的，因为它们是更高层的协议。

大大简化了，但该设备打开了通往 GSN（网关服务节点）的隧道，该节点是安装在运营商处的服务器。使用哪个 GSN 取决于请求隧道（PDP 上下文）时提供的 APN（接入点名称）。在 GSN 为隧道分配了一个 IP 地址，该地址是用于 IP 通信的地址。数据包将在 GSN 过滤并路由到特定设备。流量在 GSN 和使用电信特定协议的设备之间建立隧道。数据包不会广播到所有设备，然后在那里过滤。

附言。我用 GPRS 术语表达了答案。其他 2.5/3/4G 协议使用相同的结构，但有时名称不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T05:28:23.200

您所说的经过身份验证的用户是什么意思？您是否专注于应用程序级别？还是在 n/w 的较低层？即使是 UDP ，也应该考虑将其发送到特定的 IP。即使在复杂的 n/w 中，每个 s/m 都是唯一的实体

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T02:10:22.577

Rohith Gowda，实际上，如果您专注于应用程序级别的 udp 数据包（java、c# ...），您会为特定 ip 创建数据包并发送到 IP，（即接收方 ip）并且接收方必须抓住它，我想你真的想要这个吗？并且无需担心与您发送的 ip 不同的其他人，因为您处于抽象的 APP 层，您的疑问将由较低层处理。如果您想要额外的窥探证明，只需对您想要的数据进行编码发送
**一个示例是（在 java 中）**
**DatagramPacket (UDP) 可以通过调用一个新的实例来创建**

```
 DatagramPacket(packet data [],offset ,length ,address* ,port* ) 
```

查看最后 2 个参数，它们指定了**SeverAddress**和**传输**到服务器的端口，我想您现在很清楚，在特定端口上侦听 ip（服务器地址）的目标服务器可以抓取它。

# git - 安装 GitWeb - 如何

> ID：15104736
> 
> 赞同：4
> 
> 时间：2013-02-27T05:20:06.500
> 
> 标签：git, gitweb

我刚刚在我的生产服务器上安装了 Git，并希望让 GitWeb 使用它。当我偶然发现一个展示如何使用 git web 工作的教程时，我变得非常感兴趣。

git instaweb -d webrick --start

它的工作原理与教程中的描述完全一样...... [http://lostechies.com/jasonmeridth/2009/09/27/git-instaweb/](http://lostechies.com/jasonmeridth/2009/09/27/git-instaweb/)

然而，在阅读了其他论坛之后，似乎 instaweb 并不是真的要使用，而是我应该设置 GitWeb 以在 Apache 上运行。

我对 Apache 还很陌生，所以对我应该做什么不是很熟悉。我一直在关注[http://unix-heaven.org/node/31](http://unix-heaven.org/node/31)上的教程。但我不认为我需要所有这些。我认为我唯一需要做的就是将以下内容放入我的 httpd.conf 文件中......

```
<VirtualHost *:80>
    ServerAdmin <a href="mailto:admin@example.org">admin@example.org</a>
    ServerName git.example.org
    ServerAlias git-pub.example.org
    RedirectMatch ^/$ /gitweb.cgi
    SetEnv GITWEB_PROJECTROOT /cvs/codeRepository/git

    Alias /gitweb.js                /srv/www/gitweb/static/gitweb.js
    Alias /gitweb.css               /srv/www/gitweb/static/gitweb.css
    Alias /git-logo.png             /srv/www/gitweb/static/git-logo.png
    Alias /git-favicon.png           /srv/www/gitweb/static/git-favicon.png

    ScriptAlias / "/srv/www/gitweb/"

    <Directory "/srv/www/gitweb/">
        AllowOverride None
        Options Indexes FollowSymLinks ExecCGI
        Order allow,deny
        Allow from all
    </Directory>

    ErrorLog "/var/log/apache2/httpd-git-pub.example.org-access.log"
    CustomLog "/var/log/apache2/httpd-git-pub.example.org-error.log" common
</VirtualHost> 
```

其中 /srv/www/gitweb/ 包含....

```
$:/srv/www/gitweb # ls -ltr
total 252
-rwx------ 1 root root 247917 Feb 27 15:02 gitweb.cgi
drwx------ 2 root root   4096 Feb 27 15:03 static 
```

我在上面指定的配置会起作用还是我需要指定？如果是这样，我将通过什么 url 访问 GitWeb？我需要 serverName、serverAlias 和 serverAdmin 吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T07:15:14.877

您将使用的网址是

```
http://git.example.org 
```

但我不太确定你的配置。[我的比较简单](https://github.com/VonC/compileEverything/blob/master/apache/env.conf.tpl#L49-L93)，我总是推荐像 http(s)://yourServer/gitweb 这样的地址，而不仅仅是 http(s)://yourServer/：如果你需要添加更多的服务，你可以添加更多的根 url (像`/gitweb`）。

对于无需身份验证的快速 http 访问：

```
# GitWeb on 80
Listen 80
<VirtualHost *:80>

  ServerName git.example.org
  ServerAlias git-pub.example.org

  SetEnv GITWEB_PROJECTROOT /cvs/codeRepository/git
  SetEnv GIT_HTTP_BACKEND "/usr/local/apps/git/libexec/git-core/git-http-backend"

  DocumentRoot /srv/www/gitweb
  Alias /gitweb /srv/www/gitweb

  <Directory /srv/www/gitweb>

    Options ExecCGI +FollowSymLinks +SymLinksIfOwnerMatch
    AllowOverride All
    order allow,deny
    Allow from all

    AddHandler cgi-script cgi
    DirectoryIndex gitweb.cgi

  </Directory>

  BrowserMatch ".*MSIE.*" \
    nokeepalive ssl-unclean-shutdown \
    downgrade-1.0 force-response-1.0

  LogLevel Info
  ErrorLog "/var/log/apache2/gitweb_error_log"
  TransferLog "/var/log/apache2/gitweb_access_log"

</VirtualHost> 
```

注意：在我的[原始配置文件](https://github.com/VonC/compileEverything/blob/master/apache/env.conf.tpl#L49-L93)（这是一个模板，具有类似的占位符值 `@PORT_HTTP_GITWEB@`）中，我没有使用`GITWEB_PROJECTROOT`，因为我正在调用 Gitolite，它知道 Git 存储库在哪里。

不过，根据[gitweb 文档](https://github.com/git/git/blob/master/Documentation/gitweb.conf.txt#L118-L145)，我确实在[`gitweb.conf`文件](https://github.com/VonC/compileEverything/blob/master/gitweb/gitweb.conf.pl.tpl#L18-L20)中设置了一个变量，它的作用与 相同 ：`GITWEB_PROJECTROOT`

```
 $projectroot:: 
```

> 将添加到项目路径的绝对文件系统路径；存储库的路径是`$projectroot/$project`.
> 在安装过程中设置`$GITWEB_PROJECTROOT`。
> 必须正确设置此变量才能让 gitweb 找到存储库。
> 
> 例如，通过将以下内容放入 gitweb 配置文件中，将if`$projectroot`设置为“ ”：`/srv/git`

```
----------------------------------------------------------------------------
our $projectroot = "/srv/git";
---------------------------------------------------------------------------- 
```

> 然后：

```
------------------------------------------------
http://git.example.com/gitweb.cgi?p=foo/bar.git
------------------------------------------------ 
```

> 及其基于 path_info 的等价物

```
------------------------------------------------
http://git.example.com/gitweb.cgi/foo/bar.git
------------------------------------------------ 
```

> 将映射到文件系统上的路径“/srv/git/foo/bar.git”。

* * *

2018 年 8 月更新 Git 2.19（2018 年第三季度，五年后）

" `git instaweb`" 已调整为在基于 RedHat 的发行版上使用较新的 Apache 运行得更好。

请参阅[Sebastian Kisela ( ) 的提交](https://github.com/skisela)[757b124](https://github.com/git/git/commit/757b12494bd3e4c6cbc2fd081d60ed41b60208ae) （2018年 8 月 7 日）和[提交 1976311](https://github.com/git/git/commit/1976311aa285549599e5a451d7ad72b55a2b60e2)（2018 年 8 月 8 日[）](https://github.com/skisela)。^(（由)^([Junio C Hamano 合并](https://github.com/gitster))^([——](https://github.com/gitster))^在^([提交 93ded33](https://github.com/git/git/commit/93ded333bcb6687bc2aee533f18e5a0ea718024a))^(中，2018 年 8 月 20 日）)[`skisela`](https://github.com/skisela)
^([`gitster`](https://github.com/gitster))

> ## `git-instaweb`: 使用 apache >= 2.4 修复 apache2 配置
> 
> 生成的 apache2 配置因 apache >= 2.4 而失败。错误日志指出：
> 
> ```
> AH00136: Server MUST relinquish startup privileges before accepting connections.  
> Please ensure mod_unixd or other system security module is loaded.
> AH00016: Configuration Failed 
> ```
> 
> **通过加载`unixd`模块**来解决这个问题。
> 这也适用于旧版本`httpd`，因此不需要`IfVersion`条件。（在 CentOS-6 上使用 httpd-2.2.15 测试。）

# javascript - 需要javascript中最接近的整数值

> ID：15104739
> 
> 赞同：3
> 
> 时间：2013-02-27T05:20:12.950
> 
> 标签：javascript, ceil

在我的 javascript 分页文件中，我计算了页数`Math.ceil()`

```
 var total_pages = Math.ceil(total_items/items_per_page); 
```

但在这里，我得到 3 个 2.25、1 个 0.588、2 个 1.01 等。但我需要 2 个 2.25 和 1 个 1.01。那么如何在 JavaScript 中检查它。

**实际的**

3 表示 2.25 1 表示 0.588 1 表示 1.088 2 表示 1.01

**必需的**

2 代表 2.25 1 代表 0.588 1 代表 1.088 1 代表 1.01

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T05:28:54.083

圆它。

```
var total_pages = Math.round(total_items/items_per_page); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T05:32:48.467

为什么不使用 Javascript`toFixed()`方法？

```
var num = total_items/items_per_page;
var total_pages = num.toFixed(0); 
```

[演示](http://jsfiddle.net/sohelkhalifa/PwxSP/3/)
[参考](http://www.w3schools.com/jsref/jsref_tofixed.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T05:24:53.400

将数字加 0.5，然后发言。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T05:33:00.087

使用 Math.round(Your Number).. 它会四舍五入你的数字.. 我的意思是 2.2 到 2 ， 1.6 到 2 等等

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T05:21:20.627

您应该使用 Math.floor() 而不是 Math.ceil()

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/floor](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/floor)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T05:22:04.193

ceil 将返回下一个数字，floor 将在数字之前返回

```
 Example:

 Math.ceil(2.2) = 3;
 Math.floor(2.2) = 2; 
```

# php - mkdir 和复制功能.. 由帐户拥有？

> ID：15104742
> 
> 赞同：0
> 
> 时间：2013-02-27T05:20:33.320
> 
> 标签：php

如何使目录和图像复制到我的服务器时，它由用户帐户拥有，而不是由 PHP 拥有？

PHP chown 有效吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T05:23:52.247

看看[http://php.net/manual/en/function.chmod.php](http://php.net/manual/en/function.chmod.php)，这可能就是你要找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T05:27:41.563

`chown`如果 php 具有运行它的权限以及 chown 文件的权限，则可以正常工作。

您有 2 个选项。您可以更改运行 PHP 的用户，或设置一个`access control list`这样每个人都可以访问该文件夹，而不管其所有权如何。

要更改运行 PHP 的用户，您需要`httpd.conf`为 apache 或`www.conf`php-fpm 进行编辑。如果您以另一种方式使用 PHP，您可能需要手动调查如何更改它。这将影响 PHP 运行的所有内容，因此这对`chown/chmod`它们也很重要。

httpd.conf

```
User username;
Group group; 
```

php-fpm 的 www.conf

```
listen.owner = username;
listen.group = group; 
```

对于访问控制列表，您可以将其设置为放置在文件夹中的每个文件都可以被非所有者或正确组中的人自动访问。这样做的另一个好处是不关心文件的来源，因此如果您还手动上传文件或将它们复制到那里，权限将是正确的。

```
[user@host ~]$ setfacl -RLdm o::rwx /path/to/folder 
```

# java - 在 Selenium 中获取函数 isElementPresent 的空指针异常...

> ID：15104743
> 
> 赞同：0
> 
> 时间：2013-02-27T05:20:33.117
> 
> 标签：java, selenium-rc

当我从 TestDriver 类的主函数调用 headerVerification 方法时，我得到空指针异常，尽管该元素存在。

**启动服务器类：**

```
package WebTesting;

import com.thoughtworks.selenium.DefaultSelenium;
import com.thoughtworks.selenium.Selenium;

public class StartServer {

    private String host;
    private String nameOfBrowser;
    private int port;
    private String url;

    public StartServer(String host, int port, String nameOfBrowser, String url){
        this.host=host;
        this.port=port;
        this.nameOfBrowser=nameOfBrowser;
        this.url=url;
    }

    public static Selenium browser;

    public void startServer(){
        browser = new DefaultSelenium(host, port, nameOfBrowser, url);
        browser.start();
        browser.open("/");
        System.out.println("Browser Started !!!");
    }
} 
```

**标头验证类**

```
package WebTesting;

import com.thoughtworks.selenium.Selenium;

public class HeaderVerification {

    private String elementPath;
    private String linkPath;
    private String testLink;

    public HeaderVerification(String elementPath, String linkPath, String testLink){
        this.elementPath=elementPath;
        this.linkPath=linkPath;
        this.testLink=testLink;
    }

    public static Selenium browser;

    public void headerVerification() throws InterruptedException{
        System.out.println(elementPath);
        if(browser.isElementPresent(elementPath)){
            Thread.sleep(5000);
            System.out.println("Header is Present");
            browser.click(linkPath);
            Thread.sleep(5000);

            if(browser.getLocation().equals(testLink)){
                System.out.println("Correct Location!!!");
            }
            else
                System.out.println("Incorrect Location!!!");

            browser.close();
            System.out.println("Browser Closed!!!");
        }
    }
} 
```

**测试驱动程序类**

```
package WebTesting;

public class TestDriver {

    /**
     * @param args
     */

    static StartServer ss = new StartServer("localhost", 4444, "*firefox", "http://docs.seleniumhq.org/");
    static HeaderVerification hv = new HeaderVerification ("//div[@id='header']", "//a[@title='Overview of Selenium']", "http://docs.seleniumhq.org/about/");

    public static void main(String[] args) throws InterruptedException {
         // TODO Auto-generated method stub
         ss.startServer();
         hv.headerVerification();

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T05:45:11.687

浏览器静态变量`null`在`HeaderVerification`类中。你应该添加

```
HeaderVerification.browser = browser; 
```

在`StarstServer.startServer()`方法。

# sql - 从 SQL 连接中删除镜像对

> ID：15104744
> 
> 赞同：4
> 
> 时间：2013-02-27T05:20:37.660
> 
> 标签：sql, relational-database

我有一个包含 2 个字段（名称、兴趣）的表，我想找到所有具有相同兴趣的对，并删除所有重复项和镜像对。

我可以使用以下 SQL 语句找到所有对并删除重复项：

```
SELECT P1.name AS name1, P2.name AS name2, P1.interest 
FROM Table AS P1, Table AS P2
WHERE P1.interest = P2.interest AND P1.name <> P2.name; 
```

但我不确定如何删除镜像对，即：

`"wil","ben","databases"`

`"ben","wil","databases"`

我试图使上述语句成为一个名为 Matches 的视图，并尝试了以下查询：

```
SELECT * FROM Matches
WHERE name2 <> (select name1 from Matches); 
```

但它不会删除所有镜像对。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T05:37:33.107

假设您不在乎哪一对最终坚持 (ben,will) 与 (will, ben)，那么我首选的解决方案是执行以下操作：

```
DELETE p2 
FROM Pairs p1 
INNER JOIN Pairs p2 
    on p1.Name1 = p2.Name2 
    and p1.Name2 = p2.Name1 
    and p1.Interest = p2.Interest
    -- match only one of the two pairs
    and p1.Name1 > p1.Name2 
```

由于您永远不会让 Name1 和 Name2 相等，因此必须始终有一对第一个成员小于第二个成员。使用这种关系，我们可以删除重复项。

如果您有关系的代理键，这尤其微不足道，因为 Name1 和 Name2 不相等的要求就消失了。

**编辑：**如果您不想将它们从表中删除，而只是从特定查询的结果中删除，请使用相同的模式`SELECT`而不是`DELETE`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-06T11:48:14.910

我有类似的问题，并想出研究下面的查询会解决问题的第一个答案

```
SELECT P1.name AS name1,P2.name AS name2,P1.interest 
FROM Table AS P1,Table AS P2
WHERE P1.interest=P2.interest AND P1.name>P2.name 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T05:34:54.250

假设我们有`Name`带有元组的表：

```
 F1  F2           
Jon Smith          
Smith Jon 
```

然后要删除这对，我们可以像这样进行查询：

```
SELECT n1.F1, n1.F2         
FROM Name n1            
WHERE n1.F1 > (SELECT n2.F1  
                  FROM Name n2  
                  WHERE n1.F1=n2.F2) 
```

所以而不是使用`<>`in

```
(SELECT * FROM Matches
WHERE name2 **<>** (select name1 from Matches);) 
```

使用`>`或`<`运算符，它应该可以正常工作。

# java - 将字符串表达式评估为整数？

> ID：15104749
> 
> 赞同：0
> 
> 时间：2013-02-27T05:21:04.760
> 
> 标签：java, stack, stringtokenizer

我正在尝试将字符串从左到右评估为整数，其数字介于 0-9 和四个基本运算符之间（例如`"5+8+(8/4)"`应该评估为`15`或`"9+((3+4)*5)"`as`44`或`"4+2*6"`36，因为由于所有运算符具有相同的优先级，首先计算 4+2 )，但我在实现括号时遇到了麻烦。

如果我不包括括号，我已经设法让它工作。我通过在 while 循环中使用 StringTokenizer 解析字符串来做到这一点。每个标记都存储在一个变量中，如果它包含一个数字，则将其添加到堆栈中，如果包含运算符，则将其添加到堆栈中。然后，当 Integer 堆栈中有两个数字时，我根据运算符堆栈中的运算符评估它们。它只是像这样对整个字符串进行处理，直到`str.hasMoreTokens()`为真，并且 while 循环中断。所以，类似的东西`8-5+7*3+1/2-4`可以完美地工作，但我找不到让括号与任何表达式一起工作的方法

我曾经尝试过`String newStr = str.replaceFirst("[^(]*(", "");`尝试切断所有内容，包括第一个`(`然后递归评估剩下的内容等等，但我认为这比它必须的要复杂得多，无论如何我都无法让它工作。我一直在思考几个小时，但我想不出一个更简单的方法。

谢谢，此时我完全迷失了，所以任何指导/建议都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T05:36:09.167

如果你想解析中缀符号的数学表达式，你需要实现调车场[算法](http://en.wikipedia.org/wiki/Shunting-yard_algorithm)。看不到您的代码，很难说出缺少什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T06:00:29.037

如果其他答案对您的项目来说太复杂了，我建议您尝试在代码中集成 Groovy 脚本引擎。它可以轻松完成所有这些以及更多工作。

如果您需要它像 java 代码一样快地工作，而不是自己解析表达式，它还允许您即时编译为 java 类。

[http://groovy.codehaus.org/](http://groovy.codehaus.org/)

# php - 如何将下拉列表的选定值提取到另一个下拉列表

> ID：15104752
> 
> 赞同：1
> 
> 时间：2013-02-27T05:21:21.350
> 
> 标签：php, onchange, html-select, selectionchanged

我正在开发一个用于执行 2 个下拉列表值的 php 文件。

在我的下拉列表中，我列出了 Item1、Item2、Item3、Item4 等类别的列表...

在另一个下拉列表中，我为第一个列表中的每个类别都有子类别，如 A、B、C、D、E、F、...

我的想法是，在更改第一个列表的值时，我需要将值传递给第二个列表......

这意味着，如果我更改第二个列表中的值，它必须获取在第一个列表中选择的值...

所有类别的子类别都相同。但在我的计算中，我使用了每个类别和子类别的价格..

所以，..

项目 1 -> A = 100 项目 2 -> A = 75 项目 1 -> B = 198 项目 2 -> B = 146 项目 1 -> C = 160 项目 2 -> C = 175

我需要获取所选项目，以检索我的计算金额...

我怎么能做到这一点...

```
<select name="Category1" size="1" id="Category1" >
  <option value="Item1">Item1</option>
  <option value="Item2">Item2</option>
  <option value="Item3">Item3</option>
  <option value="Item4">Item4</option>
  <option value="Item5">Item5</option>
  <option value="Item6">Item6</option>
</select>
<select name="Category2" size="1" id="Category2" onchange=function()>
  <option value="A">A</option>
  <option value="B">B</option>
  <option value="C">C</option>
  <option value="D">D</option>
  <option value="E">E</option>
  <option value="F">F</option>
  <option value="G">G</option>
  <option value="H">H</option>
</select> 
```

在这里，我需要在函数（）中获取 Category1 的选定值...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T05:32:30.903

你的语法错误试试

```
<select name="Category2" size="1" id="Category2" onchange="function(document.getElementById('Category1').value);"> 
```

**当更改发生时，将 category1 的值作为参数传递`select`。**

**OP评论回复**

```
<script type="text/javascript">  
    function changeFunction(cat)
    {
        alert(cat);
    }
</script>

<select name="Category1" size="1" id="Category1" >
    <option value="Item1">Item1</option>
    <option value="Item2">Item2</option>
    <option value="Item3">Item3</option>
    <option value="Item4">Item4</option>
    <option value="Item5">Item5</option>
    <option value="Item6">Item6</option>
</select>
<select name="Category2" size="1" id="Category2" onchange="changeFunction(document.getElementById('Category1').value);">
    <option value="A">A</option>
    <option value="B">B</option>
    <option value="C">C</option>
    <option value="D">D</option>
    <option value="E">E</option>
    <option value="F">F</option>
    <option value="G">G</option>
    <option value="H">H</option>
</select> 
```

上面的代码现在已经过测试，我确定它会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T05:42:45.060

虽然我的回答与 Devang 的类似，但稍微更合适的方法可能是这样的：

```
<select id="category" onchange="calculatePrice">
  ...
</select>
<select id="subCategory" onchange="calculatePrice">
  ...
</select>
<input id="price">

<script>
  function calculatePrice() {
    var category = document.getElementById('category').value,
        subCategory = document.getElementById('subCategory').value;

    if (category && subCategory) {
      document.getElementById('price').value = ...;
    }
  }
</script> 
```

# ios - iOS 中的长浮点值应该使用哪种数据类型？

> ID：15104755
> 
> 赞同：0
> 
> 时间：2013-02-27T05:21:36.560
> 
> 标签：ios, objective-c, ios5, ios6

在我的应用程序中，我只是将 50 除以 3，我想存储它的确切结果值。如果我使用 float 它给出 16.666666，如果我使用 double 那么它给出 16.666667。

实际上，我通过划分框架的高度在一个框架内创建三个标签，我决定每个标签的高度。所以我没有得到确切的值，它会在标签之间产生间隙。如果我通过 60，那么它工作正常，因为 60/3 结果为 20，但如果我通过 50，则存在间隙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T05:54:59.030

如果你想让你的框架分成三个等高的区域，那么你的框架的高度（以像素为单位）需要被三整除。您不能显示小数像素，它们不可分割；每个以像素为单位的高度都需要是一个整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T05:49:00.553

存储“精确”值的唯一方法是创建一个名为“Rational”（或类似）的类，并将分数的分子和分母存储为单独的 ivars。`Floats`和`doubles`（或任何文字的计算机表示）不能存储具有无限个小数位的有理数或超越实数。

使用“Rational”类的方法是存储分子和分母，然后将适当的数学应用于*这些*值（如果您希望通过程序传播“精确性”）。稍微简单的方法是将有理数显示为分子和分母，但使用`float/double`基础数学的近似值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T06:08:58.527

```
float t= (float)50/3;
long double t1= (long double)50/3;

NSLog(@"%.30f     %.30LF",t, t1); 
```

产生输出“16.666666030883789062500000000000 16.666666666666666666088425508008”。

我建议您使用不精确但足够精确的 long double。

# c++ - 在 std 命名空间中重载（非特化）模板

> ID：15104760
> 
> 赞同：8
> 
> 时间：2013-02-27T05:21:56.750
> 
> 标签：c++, c++11, std, language-lawyer

**这是非常迂腐的，但在 C++03 中，程序在命名空间中重载**（而不是**专门**化）模板函数显然是不符合规范的`std`：请参阅[此处](http://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Non-throwing_swap#cite_note-0)提及的内容和[关于 comp.lang.c++.moderated 的长时间讨论](http://groups.google.ca/group/comp.lang.c++.moderated/browse_thread/thread/b396fedad7dcdc81)

即这没关系：

```
namespace std
{
    template <>
    void swap (Foo & f, Foo & g)
    {
       // ...
    }
} 
```

但这不是（如果我理解正确的话......）：

```
namespace std
{
    template <typename T>
    void swap (TempateFoo<T> & f, TempateFoo<T> & g)
    {
       // ...
    }
} 
```

这在 C++11 中仍然成立吗？此外，这是否也适用于模板类（如`std::hash`），还是仅适用于模板函数？

编辑：另外，有没有标准库实现的例子，这样后者会在实践中破坏东西？如果没有，是否有特定原因不允许像上面第二种情况那样重载？（理论上可能会破坏什么？）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T13:22:30.310

无法在 C++ 中定义函数模板的部分特化，因此您的第二个示例定义了重载*而不是*特化。由于该标准只允许将特化添加到 namespace `std`，因此您的重载是非法的。

> 这在 C++11 中仍然成立吗？

是的。

> 此外，这是否也适用于模板类（如 std::hash），还是仅适用于模板函数？

无论如何你不能重载类模板，你只能重载函数。但是，同样的规则适用，如果特化依赖于用户定义的（即非标准）类型，您只能特化类模板。

> 在上面的第二种情况下，是否有禁止重载的具体原因？（理论上可能会破坏什么？）

例如，实现可能想要获取函数的地址，但如果您重载了函数，那么获取地址可能会导致歧义并无法编译，这意味着您刚刚破坏了标准库中的有效代码。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-27T05:31:29.217

n3376 17.6.4.2.1

> 如果 C++ 程序将声明或定义添加到命名空间 std 或命名空间 std 内的命名空间，则 C++ 程序的行为是未定义的，除非另有说明。只有当声明依赖于用户定义的类型并且特化满足原始模板的标准库要求并且没有明确禁止时，程序才能将任何标准库模板的模板特化添加到命名空间 std。

17.6.4.2.2

> 如果 C++ 程序声明了，那么它的行为是未定义的
> 
> — 标准库类模板的任何成员函数的显式特化，或
> 
> — 标准库类或类模板的任何成员函数模板的显式特化，或
> 
> — 标准库类或类模板的任何成员类模板的显式或部分特化。
> 
> 只有当声明依赖于用户定义类型的名称并且实例化满足标准库对原始模板的要求时，程序才能显式实例化标准库中定义的模板。

# php - - 使用文本编辑器时的符号

> ID：15104765
> 
> 赞同：0
> 
> 时间：2013-02-27T05:22:25.350
> 
> 标签：php, sql

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T05:40:53.167

Set names to UTF8 before inserting into your database.

```
SET NAMES utf8 
```

It sounds like your connection is using latin1 encoding. I struggled with the same thing for months.

[http://forums.mysql.com/read.php?103,46870,47245](http://forums.mysql.com/read.php?103,46870,47245)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T05:26:10.827

Check the encoding (collation) used on the database. Try changing it to `utf8_general_ci` or the equivalent choice on the Database you are using.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T05:42:24.893

You need to set encoding to utf8 using method [mysql_set_charset('utf8',$link);](http://php.net/manual/en/function.mysql-set-charset.php)

```
<?php
$link = mysql_connect('localhost', 'user', 'password');
mysql_set_charset('utf8',$link);
$db_selected = mysql_select_db('your_db_name', $link); 
?> 
```

And then the usual stuff you do with your connection

# networking - Slick2D KryoNet 小程序

> ID：15104769
> 
> 赞同：1
> 
> 时间：2013-02-27T05:22:40.827
> 
> 标签：networking, kryonet

我正在使用带有 Slick2d 的 Kryonet 来制作 Java 游戏。

作为java应用程序运行时它工作正常，但是作为applet运行时我收到以下错误：

```
00:00  INFO: [kryonet] Server opened.
00:04 DEBUG: [kryonet] Port 9991/TCP connected to: /(ip):55801
00:04 DEBUG: [kryo] Write: RegisterTCP
00:04  INFO: [kryonet] Connection 1 connected: /(ip)
00:04  INFO: [SERVER] Someone has connected.
00:04 ERROR: [kryonet] Error reading TCP from connection: Connection 1
com.esotericsoftware.kryonet.KryoNetException: Error during deserialization.
    at com.esotericsoftware.kryonet.TcpConnection.readObject(TcpConnection.java:141)

    at com.esotericsoftware.kryonet.Server.update(Server.java:192)
    at com.esotericsoftware.kryonet.Server.run(Server.java:350)
    at java.lang.Thread.run(Unknown Source)
Caused by: com.esotericsoftware.kryo.KryoException: Buffer underflow.
    at com.esotericsoftware.kryo.io.Input.require(Input.java:162)
    at com.esotericsoftware.kryo.io.Input.readLong(Input.java:621)
    at com.esotericsoftware.kryo.io.Input.readDouble(Input.java:745)
    at com.esotericsoftware.kryo.serializers.DefaultSerializers$DoubleSerializer.read(DefaultSerializers.java:141)
    at com.esotericsoftware.kryo.serializers.DefaultSerializers$DoubleSerializer.read(DefaultSerializers.java:131)
    at com.esotericsoftware.kryo.Kryo.readClassAndObject(Kryo.java:735)
    at com.esotericsoftware.kryonet.KryoSerialization.read(KryoSerialization.java:57)
    at com.esotericsoftware.kryonet.TcpConnection.readObject(TcpConnection.java:139)
    ... 3 more
00:04  INFO: [SERVER] Someone has disconnected.
00:04  INFO: [kryonet] Connection 1 disconnected. 
```

服务器在本地作为可运行的 jar 运行，客户端小程序也在本地以 HTML 文件形式运行，它运行 xampp 以充当 Web 服务器。

我尝试了不同的序列化程序、缓冲区大小和只发送单个字符串/布尔值等，它似乎不喜欢任何东西。客户端连接到服务器非常好，但是在发送任何数据包时，无论发送什么数据包，我都会收到上述错误。

任何帮助/建议将不胜感激 - 我已经为此困扰了一段时间！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:08:35.673

我在 gradle build 中有类似的问题。可能您只需要为小程序 JVM 增加内存（堆或 PermSize）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T17:18:46.050

我相信我有同样的问题或至少类似的问题。我将 Kryonet 用于服务器和客户端。客户端是一个小程序，当我通过 Eclipse 的 Applet 查看器运行它时，它运行良好。当我通过 Web 服务器运行它时，我会遇到类似的错误。客户端和服务器连接，服务器接收客户端的数据包，但客户端在尝试任何反序列化时都会出错。我发现小程序权限是罪魁祸首。如果您将 Applet Viewer（如果您使用 Eclipse）的权限更改为与网页相同，您将得到相同的错误。优点是您可以随后调试问题。

要更改 Eclipse 的权限： 转到您的项目文件夹 \bin\ 并打开“java.policy.applet”。在里面你应该有：

```
grant {
  permission java.security.AllPermission;
}; 
```

将其更改为：

```
grant {
    permission java.io.FilePermission "<<ALL FILES>>", "read, write, execute, delete";  
    permission java.net.SocketPermission "*", "accept, connect, listen, resolve";  
    permission java.util.PropertyPermission "*", "read, write";  
    permission java.lang.RuntimePermission "*";  
    permission java.awt.AWTPermission "showWindowWithoutWarningBanner";  
}; 
```

通过这个更改，Applet Viewer 的行为与嵌入式小程序相同。这不是一个完整的解决方案，但可以帮助找到问题的原因。

更新：我发现我的情况有什么问题。问题出在 FieldSerializer 和使用它的其他序列化程序中。当一个类被注册时，FieldSerializer 会遍历它的字段并将它们全部设置为可访问。小程序不允许此操作。结果是错误的注册和序列化/反序列化。我找到了 2 个解决方法：

1) 使用另一个序列化程序。默认值是 FieldSerializer，可以使用更改

```
public void setDefaultSerializer (Class<? extends Serializer> serializer) 
```

另一种选择是在注册每个类时设置序列化程序。不要使用基于 FieldSerializer 的序列化程序。

2）尝试修复FieldSerializer。我所做的并不完全正确，但它适用于我的情况。如果可访问性设置导致异常，我们将使 FieldSerializer 继续注册。我们需要做的另一件事是将我们注册的类的所有字段设置为公开。要更改 FieldSerializer，您需要 Kryo 源。转到 FieldSerializer.java，重建CachedFields()。您将在那里找到以下代码：

```
 if (!field.isAccessible()) {
        if (!setFieldsAsAccessible) continue;
        try {
            field.setAccessible(true);
        } catch (AccessControlException ex) {
            continue;
        }
    } 
```

您需要将其更改为：

```
 if (!field.isAccessible()) {
        if (setFieldsAsAccessible)
        try {
            field.setAccessible(true);
        } catch (AccessControlException ex) {
        }
    } 
```

需要更改的另一件事是所有已注册的类都只有公共字段。

# jquery - Jquery和css中的动画？

> ID：15104770
> 
> 赞同：0
> 
> 时间：2013-02-27T05:22:46.390
> 
> 标签：jquery, jquery-animate

当我单击链接时，我正在尝试为 div 设置动画以移动到顶部。当我点击另一个链接时，它应该动画回到原来的位置并淡出。

我使用 jquery 将 div 居中。现在的点是，当我单击一个链接时它工作正常，比如向上 40 px .. 当我单击第二个链接时，我设置将该 div 向下移动..

问题是如果我单击第二个链接，当我为它编写事件处理程序时，div 图像会向下移动。

如何检测 div 之前是否移动过？就像当我单击第一个链接然后单击第二个链接时，div 运行良好.. 但是如果我单击第二个链接，它会下降并从屏幕上消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T05:29:19.590

很简单，在第一个动画回调中，只需在 div 中添加一个类，`anim-done`然后在第二次单击的事件处理程序上，检查这个类，然后再将其动画化回原来的位置并淡出它。确保在第二个动画的回调中删除此类。

这是帮助澄清的小提琴：http: [//jsfiddle.net/G5JcA/](http://jsfiddle.net/G5JcA/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T06:21:02.657

动画结束后可以使用成功功能

下面是语法

`.animate({co-ords},time,successfuntion);`

参考[this fiddle](http://jsfiddle.net/vigneshvdm/dRSYE/)，它在向左移动后淡出div

# ember.js - 在 Ember.js rc1 中更新支持的数组不会传播到视图

> ID：15104773
> 
> 赞同：1
> 
> 时间：2013-02-27T05:23:05.300
> 
> 标签：ember.js

我正在尝试将部分构建的 UI 升级到最新的 Ember.js rc1，由于 API 发生了巨大的变化，它已经变成了一项非常大的重写工作。那里（和这里）的大多数信息都变得毫无用处。我不得不再次阅读文档几次才能部分工作，但有很多松散的结局。这是一个大人物。视图不会像在以前的版本中那样更新。我错过了一些与重新渲染、{{outlet}} 或其他我不知道的东西有关的东西。ember 指南似乎需要更新。

模板非常简单：

```
<script type="text/x-handlebars" data-template-name="index">
  <button {{action "addOne"}}>add one</button>
  <ul>
  {{#each item in controller}}
    <li>{{item.title}}</li>
  {{/each}}
  </ul>
</script> 
```

单击时，该按钮会向支持的数组添加一个新元素。控制台日志显示阵列正在增长，但模板没有更改。[这是一个 jsfiddle](http://jsfiddle.net/ayoung/RLmPk/)来说明我已经走了多远。谁能弄清楚需要添加什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T06:32:43.830

我修改了您的示例以突出显示我们在 Ember 中使用数组时使用 Ember 数组的事实（`Ember.A()`或者`Em.A()`如果您想明确这一事实）。据我了解，您可以使用方法`Em.A().addObject`并`Em.A().removeObject`使用 Ember.Object getter 和 setter 方法（即`.get()`& `.set()`）来实现基本功能。

为了被 Ember 应用程序正确观察，使用 Ember 的 getter 和 setter 很重要。

[你的小提琴的修改版本。](http://jsfiddle.net/logicalhan/sVBCj/1/)

# matlab - 获取 xy 平面中三角形 ROI 中的所有点

> ID：15104780
> 
> 赞同：2
> 
> 时间：2013-02-27T05:23:31.973
> 
> 标签：matlab, math, opencv, roi

输入：我在 xy 平面上有大约 50000 个点，如下图所示。

现在，我需要在三角形 ROI 中获得所有可能的点。如何得到它。它可以是opencv或Matlab。

下面是我需要获取三角形区域的可能点的示例。

![在此处输入图像描述](../Images/1b90549961001c6b7e80ef24ba522ff3.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T05:40:44.837

MATLAB 有一个`inpolygon`命令：[inpolygon](http://www.mathworks.com/help/matlab/ref/inpolygon.html)。

例如，这段代码

```
 xv = [0.1 0.4 0.15 0.1]; yv = [0 0.4 0.8 0];
 x = rand(250,1); y = rand(250,1);
 in = inpolygon(x,y,xv,yv);
 plot(xv,yv,x(in),y(in),'r+',x(~in),y(~in),'bo') 
```

生成这样的图片：

![在此处输入图像描述](../Images/9ac130107fa4078f9601792304e52b9a.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T06:00:35.990

像这样的东西，在 C++ 中？

```
Mat plane = imread("plane.png"); // this is the 50 000 pixel plane image

// I assume your triangles are here. E.e. findContours function would save them here, but I don't know your situation.
vector<vector<Point> > triangles;

// this size is something like 1000, so here are only points that should be checkedd if they are inside some triangle
    vector<Point> points; 

// lets loop all rois and check if point is inside one of them
for (int j = 0; j < triangles.size(); j++) {
    for (int i = 0; i < points.size(); i++) {
     double test = pointPolygonTest(trigangles[j], points[i] false);
     if (test < 0) {
      cout << " point " << points[i] << " is outside of triangle " << j << endl;
     } else if (test > 0) {
      cout << " point " << points[i] << " is inside of triangle " << j << endl;
     } else if (test == 0) {
      cout << " point " << points[i] << " is on edge of triangle " << j << endl;
     }
    }
} 
```

更多信息：[http ://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=pointpolygontest#pointpolygontest](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=pointpolygontest#pointpolygontest)

这是 OpenCV 的示例：[http ://docs.opencv.org/trunk/doc/tutorials/imgproc/shapeescriptors/point_polygon_test/point_polygon_test.html](http://docs.opencv.org/trunk/doc/tutorials/imgproc/shapedescriptors/point_polygon_test/point_polygon_test.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T16:39:06.833

在 OpenCV 中，您可以快速过滤掉不在每个三角形的最小边界矩形中的点。该矩形可以预先手动计算或使用[cv::boundingRect()](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=rect#boundingrect)计算。命中测试是使用[Rect::contains()](http://docs.opencv.org/modules/core/doc/basic_structures.html#Rect_)完成的。这是一个快速操作（至少比 cv::pointPolygonTest 快得多），这将过滤掉显然不在任何三角形中的点。之后，您使用[cv::pointPolygonTest()](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=rect#pointpolygontest)测试通过过滤器的点。

那是：

```
std::vector<cv::Point> pointList;
std::vector<cv::Rect> rectList;
std::vector<std::vector<Point>> triangleList;

for (int pointIndex = 0; pointIndex < pointList.size(); pointIndex++)
{
  for (int rectIndex = 0; rectIndex < rectList.size(); rectIndex++)
  {
    if (!rectList[rectIndex].contains(pointList[pointIndex]))
      continue;

    if (cv::pointPolygonTest(triangleList[rectIndex], pointList[pointIndex], false) < 0)
      continue;

    /* TODO Mark the point for future use */
  }
} 
```

# c# - String.Equals 和 == 的行为

> ID：15104784
> 
> 赞同：0
> 
> 时间：2013-02-27T05:23:53.400
> 
> 标签：c#

[昨天当我在这里](https://stackoverflow.com/questions/1659097/c-string-equals-vs/15090520#15090520)发布一个问题的答案时，我遇到了问题，在不同的情况下如何`String.Equals`表现`==`不同。

我想要一个结论`String.Equals`和`==`行为。

```
bool result = false;

    object obj = "String"; 
    string str2 = "String";
    string str3 = typeof(string).Name;
    string str4 = "String";
    object obj2 = str3; 

    // obj, str2, str4 references are same.
    // obj is object type and others are string type

    // Comparision between object obj and string str2 -- Com 1
    result = String.Equals(obj, str2);// true
    result = String.ReferenceEquals(obj, str2); // true
    result = (obj == str2);// true

    // Comparision between object obj and string str3 -- Com 2
    result = String.Equals(obj, str3);// true
    result = String.ReferenceEquals(obj, str3); // false
    result = (obj == str3);// false

    // Comparision between object obj and string str4 -- Com 3
    result = String.Equals(obj, str4);// true
    result = String.ReferenceEquals(obj, str4); // true
    result = (obj == str4);// true

    // Comparision between string str2 and string str3 -- Com 4
    result = String.Equals(str2, str3);// true
    result = String.ReferenceEquals(str2, str3); // false
    result = (str2 == str3);// true

    // Comparision between string str2 and string str4 -- Com 5
    result = String.Equals(str2, str4);// true
    result = String.ReferenceEquals(str2, str4); // true
    result = (str2 == str4);// true

    // Comparision between string str3 and string str4 -- Com 6
    result = String.Equals(str3, str4);// true
    result = String.ReferenceEquals(str3, str4); // false
    result = (str3 == str4);// true

    // Comparision between object obj and object obj2 -- Com 7
    result = String.Equals(obj, obj2);// true
    result = String.ReferenceEquals(obj, obj2); // false
    result = (obj == obj2);// false 
```

我也看表

```
obj     "String" {1#}   object {string}
str2    "String" {1#}   string
str3    "String" {6#}   string
str4    "String" {1#}   string
obj2    "String" {6#}   object {string} 
```

[并在这里](http://blogs.msdn.com/b/csharpfaq/archive/2004/03/29/when-should-i-use-and-when-should-i-use-equals.aspx)和[这里](http://blogs.msdn.com/b/ericlippert/archive/2009/09/28/string-interning-and-string-empty.aspx)阅读文章

为什么 Com1、Com2、Com3、Com4、Com5 和 Com6 的行为不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T06:08:09.297

运算符对所有其他引用类型具有不同的`==`行为。`strings`如果两个操作数`==`都是，`string`则使用`String.Equals`比较。否则`==`相当于`Object.ReferenceEquals`

从[C# == 操作员文档](http://msdn.microsoft.com/en-us/library/53k8ybth.aspx)：

> 对于预定义的值类型，相等运算符 (==) 如果其操作数的值相等则返回 true，否则返回 false。对于字符串以外的引用类型，== 如果它的两个操作数引用同一个对象，则返回 true。对于字符串类型，== 比较字符串的值。

您看到的另一个效果是[string intering](http://en.wikipedia.org/wiki/String_intern_pool)。您的代码中只有一个对文字`"String"`值的引用。您的代码相当于：`obj = str2 = str4 = "String"`. obj、str2 和 str4 都是对同一底层字符串的引用。由于 str3 是在运行时生成的，因此它被设置为具有相同值“String”的不同字符串。

总结一下：

1.  com1: result = (obj == str2);// true
    *   比较`object`并`string`执行引用相等检查
    *   obj 和 str2 指向同一个引用，所以结果为真
2.  结果 = (obj == str3);// 假
    *   比较`object`并`string`执行引用相等检查
    *   obj 和 str3 指向不同的引用，因此结果为 false
3.  结果 = (obj == str4);// 真
    *   比较`object`并`string`执行引用相等检查
    *   obj 和 str4 指向同一个引用，所以结果为真
4.  结果 = (str2 == str3);// 真
    *   比较`string`并`string`执行字符串值检查
    *   str2 和 str3 都是“字符串”，所以结果为真
5.  结果 = (str2 == str4);// 真
    *   比较`string`并`string`执行字符串值检查
    *   str2 和 str4 都是“字符串”，所以结果为真
6.  结果 = (str3 == str4);// 真
    *   比较`string`并`string`执行字符串值检查
    *   str3 和 str4 都是“字符串”，所以结果为真
7.  result = (obj == obj2);// false - 比较`object`并`object`执行引用相等检查 - obj 和 obj2 指向不同的引用，因此结果为 false

请记住，`==`执行的比较类型是在编译时选择的，因此它基于操作数的静态类型。编译器不知道 obj 和 obj2 将始终指向字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T05:38:32.060

`Equals`比较引用类型的引用和值类型的值。`String`是一种行为类似于值类型的引用类型。`String`可以存储大量数据，这就是为什么它应该存储在堆上，但它是不可变的，并且表现得像任何其他值类型。

`Equals`on 方法将`String`字符串的值与另一个对象（必须是 a `String`）进行比较。

`ReferenceEquals`确定两个引用类型是否是同一个实例。由于`String`s 是引用类型，但它们是不可变的，因此它们被实习以允许不同的字符串引用相同的字符串文字。

最后，相等运算符检查`String`s 值之间的相等性。如果是

`typeof(string).Name == (object)"String"`

结果将返回`false`，因为左操作数实际上是嵌入在字符串类型定义中的常量，并且不共享对字符串文字的相同引用，并且由于右操作数被装箱，因此它们的引用被比较。

# python - virtualenv中的pip权限错误

> ID：15104785
> 
> 赞同：0
> 
> 时间：2013-02-27T05:24:02.587
> 
> 标签：python, virtualenv, pip

我尝试在里面安装瓶子`virtualenv`：

```
 pip install bottle 
```

我收到此错误：

> OSError：[Errno 13] 权限被拒绝：'/var/www/myapp/env/build'

似乎权限错误，当我在 root 中创建文件夹时，如何在 virtualenv 中使用 sudo pip？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-14T03:45:25.717

遇到了同样的问题。

只需更改 virtualenv 目录的所有者

```
sudo chown username:username your_directory_name 
```

# jquery - jqgrid 编辑时自定义格式化程序

> ID：15104787
> 
> 赞同：1
> 
> 时间：2013-02-27T05:24:17.980
> 
> 标签：jquery, jqgrid

在 jQgrid 中，编辑时我想要我的自定义控件。例如具有自定义属性的文本框。为了实现这一点，我添加了自定义格式化程序，如下所示

**模型**

```
{ name: 'Code', index: 'Code', width: 100, editable: true, formatter : createexceltextbox }, 
```

**格式化程序方法**

```
 function createexceltextbox(cellvalue, options, rowObject) {
        return "<input type='text' value='" + cellvalue + "' style='width:100%' abc='xyz'  />";
    } 
```

它将所有单元格转换为我不想要的文本框，

我只在行编辑时想要这个文本框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:49:56.023

[在填充单元格内容期间使用自定义格式化程序](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:custom_formatter)，而不是在编辑期间使用。您需要的是使用[edittype: "custom"](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:common_rules#custom)。[答案](https://stackoverflow.com/a/3055626/315935)，[另一个](https://stackoverflow.com/a/4842450/315935)（或最近的[这个](https://stackoverflow.com/a/10284605/315935)）或[这个](https://stackoverflow.com/a/14408189/315935)将为您提供相应的示例。

# javascript - html中activex控件上的鼠标悬停事件

> ID：15104788
> 
> 赞同：1
> 
> 时间：2013-02-27T05:24:21.257
> 
> 标签：javascript, html, css, activex

我有一个用超链接替换的 activeX 控件。功能一切正常，但问题是当我将鼠标悬停在 activex 控件上时，我无法更改鼠标指针。

我无法控制 activex 控制，因为那是第三方控制。

有什么方法可以处理 javascript 或 css 样式。

如果有人知道解决方案，请回复我的解决方案。

提前致谢。

问候，钱德拉。

# methods - 从方法返回多个值

> ID：15104789
> 
> 赞同：0
> 
> 时间：2013-02-27T05:24:24.267
> 
> 标签：methods, return

我有一个方法*驱动*是这样的：

```
public double drive(double milesTraveled, double gasUsed)
{
    gasInTank -= gasUsed;
    return totalMiles += milesTraveled;
} 
```

我知道我不能从一个方法返回多个值，但这是我需要做的，因为我在我的 main 方法中需要这两个值，而现在它显然只返回一个。我想不出任何可行的方法。对不起，如果这是一个超级初学者的问题。我该怎么做才能让这两个值都从方法中返回？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T05:33:09.853

您可以从函数返回多个值。为此，您可以使用结构。

在结构中，您可以保留必填字段，并且可以在操作后返回结构变量。

如果您使用支持 OOPS 的语言，您也可以为必填字段创建一个类，但结构是最好的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-04T12:21:09.337

在大多数语言中，您只能从方法返回单个值。该单个值可以是复杂类型，例如结构、数组或对象。某些语言还允许您定义输出参数或传入指向外部存储位置的指针或引用。这些类型的参数还允许您从方法中返回附加值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T05:36:48.183

不确定，但你能接受你的价值观吗？

```
array[0]=gasInTank;
array[0] -= gasUsed;

array[1]=milesTraveled;
array[1] -= milesTraveled;

return array; 
```

# javascript - 更改 Webview 中的链接行为

> ID：15104790
> 
> 赞同：1
> 
> 时间：2013-02-27T05:24:30.177
> 
> 标签：javascript, webview, titanium-mobile

我在 Titanium Mobile 工作。我的问题是：

```
 Can I change the behavior of the link present in the webview??? 
```

即假设我有一个文本：我的名字是布尔汉。在本文中，Burhan 是一个链接。因此，当我单击 Burhan 时，我需要它应该打开一个窗口，在其中放置我的标签等。这可能吗？？？

PS：我想要解决方案只是点击链接而不是点击 webview.. PS：我如何跟踪 webview 中的链接被点击.. ??? （我只需要这个）

有什么帮助吗？？？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:48:09.273

最简单的解决方案是使用`Ti.App`EventListeners。

在您的 WebView 中，您需要提供一个标签，例如

```
<span onclick="Ti.App.fireEvent('url', {information: 'thatcanbeuseful', like: 'anUrl'});">Your Name</span> 
```

然后你需要提供一个全局事件监听器：

```
Ti.App.addEventListener('url', function(e){
    // open a window or someting or open an URL with:
    Ti.Platform.openURL(e.anUrl); // from passed object
}); 
```

# function - Go 中的通用编程？

> ID：15104795
> 
> 赞同：6
> 
> 时间：2013-02-27T05:24:51.630
> 
> 标签：function, templates, go, overloading, generic-programming

我知道 Go 不支持模板或重载函数，但我想知道是否有任何方法可以进行某种泛型编程？

我有很多功能，例如：

```
func (this Document) GetString(name string, default...string) string {
    v, ok := this.GetValueFromDb(name)
    if !ok {
        if len(default) >= 1 {
            return default[0]
        } else {
            return ""
        }
    }
    return v.asString
}

func (this Document) GetInt(name string, default...int) int {
    v, ok := this.GetValueFromDb(name)
    if !ok {
        if len(default) >= 1 {
            return default[0]
        } else {
            return 0
        }
    }
    return v.asInt
}

// etc. for many different types 
```

有没有办法做到这一点而没有那么多冗余代码？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-27T09:06:06.857

您可以实现的大部分是`interface{}`类型的使用，如下所示：

```
func (this Document) Get(name string, default... interface{}) interface{} {
    v, ok := this.GetValueFromDb(name)
    if !ok {
        if len(default) >= 1 {
            return default[0]
        } else {
            return 0
        }
    }
    return v
} 
```

`GetValueFromDb`还应该调整函数以返回`interface{}`值，而不是像现在这样的包装器。

然后在客户端代码中，您可以执行以下操作：

```
value := document.Get("index", 1).(int)  // Panics when the value is not int 
```

或者

```
value, ok := document.Get("index", 1).(int)  // ok is false if the value is not int 
```

不过，这会产生一些运行时开销。我最好坚持使用单独的函数并尝试以某种方式重组代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T09:11:14.353

这是一个如何更改代码的[工作示例。](http://play.golang.org/p/BtcZob4IVo)

由于您知道给定名称的预期类型，您可以以通用方式编写 Get 方法，返回`interface{}`，然后在调用站点断言类型。请参阅有关[类型断言](http://golang.org/ref/spec#Type_assertions)的规范。

有不同的方法可以在 Go 中模拟泛型的某些方面。邮件列表上有很多讨论。通常，有一种方法可以重组代码，从而减少对泛型的依赖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-04T03:32:26.330

在客户端代码中，您可以这样做：

```
res := GetValue("name", 1, 2, 3)
// or
// res := GetValue("name", "one", "two", "three")

if value, ok := res.(int); ok {
    // process int return value
} else if value, ok := res.(string); ok {
    // process string return value
}

// or
// res.(type) expression only work in switch statement
// and 'res' variable's type have to be interface type
switch value := res.(type) {
case int:
    // process int return value
case string:
    // process string return value
} 
```

# spring - 在基于 Spring 3+Tiles 的 Web 应用程序中添加计时器（用于任务计划）的正确方法是什么？

> ID：15104798
> 
> 赞同：0
> 
> 时间：2013-02-27T05:25:06.047
> 
> 标签：spring, jakarta-ee, spring-mvc, apache-tiles

我想知道是否有任何正确的方法可以在 Spring 3 + Tiles 中为任务计划添加计时器（它将被计数），并且工作准确。我尝试了很多选项，例如 jquery timer +（客户端）Quartz（服务器端线程），但是虽然它不准确，而且我们可以说它对 Web 应用程序来说是不好的做法。我真正想要（想要管理）的是在我的 Web 应用程序（Spring 3 + Tiles）中，当用户单击计时器启动时，它应该在客户端启动并且计时器应该继续，直到用户单击停止，但是用户可以这样做Web 应用程序中的任何其他内容（如导航到任何其他页面），但计时器应该以静态方式工作。有很多问题，好像只有我在客户端实现计时器（使用 cookie ，jquery会话客户端）而不是我必须管理如果用户导航到另一个页面然后计时器将不得不从先前存储在cookie中的时间开始但是这样做会导致请求响应过程中的秒数丢失。所以我也尝试了使用石英实现服务器端计时器，但我必须在每次点击 Web 应用程序时将其与客户端计时器同步。因此，我的感觉再次是不好的做法。那么有什么我可以在 Spring 3 + 中引入的东西可以是静态的并且可以以静态方式保持计时器。因此，我的感觉再次是不好的做法。那么有什么我可以在 Spring 3 + 中引入的东西可以是静态的并且可以以静态方式保持计时器。因此，我的感觉再次是不好的做法。那么有什么我可以在 Spring 3 + 中引入的东西可以是静态的并且可以以静态方式保持计时器。

提前感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:02:43.310

好的，所以您需要简单的[服务器推送](http://en.wikipedia.org/wiki/Push_technology#HTTP_server_push)。您可以使用[Atmosphere](https://github.com/Atmosphere/atmosphere/wiki)来实现这一点。要将大气与 Spring MVC 集成，您可以查看此示例[spring-web-mvc-atmosphere](https://github.com/ghillert/spring-atmosphere-samples) 。集成后，您只需在**服务器端**执行此操作。

```
@RequestMapping(value = "/websockets", method = RequestMethod.GET)
    @ResponseBody
    public void websockets(final AtmosphereResource event) {

        AtmosphereUtils.suspend(event);
        final Broadcaster bc = event.getBroadcaster();
        bc.scheduleFixedBroadcast(new Callable<String>() {

            public String call() throws Exception {

                return (new Date()).toString();
            }
        }, 1, TimeUnit.SECONDS);

    } 
```

从**客户端**：

```
function startTimer() {
var callbackAdded = false;

function callback(response)
{

    $.atmosphere.log('info', ["response.state: " + response.state]);
    $.atmosphere.log('info', ["response.transport: " + response.transport]);

    if (response.transport != 'polling' && response.state != 'connected' &&                  response.state != 'closed') {
        $.atmosphere.log('info', ["response.responseBody: " + response.responseBody]);
        if (response.status == 200) {
            var data = response.responseBody;

            if (data) {
                $("#date").text(data);
            }
        }
    }
}
$.atmosphere.subscribe("${pageContext.request.contextPath}/user/websockets",
    !callbackAdded? callback : null,
$.atmosphere.request = {transport: 'websocket'});
connectedEndpoint = $.atmosphere.response;
callbackAdded = true;
  }; 
```

只需暂停获取请求并定期广播当前时间，您可以根据需要扩展它我刚刚给了您一个原始想法。希望这会有所帮助。

# jquery - 如何根据在第一个字段中输入的值自动更改或填充第二个字段？

> ID：15104804
> 
> 赞同：0
> 
> 时间：2013-02-27T05:25:27.800
> 
> 标签：jquery

如何根据第一个输入字段中的实时输入自动填充或更改第二个只读字段的值？

```
<input id="1stfield" name="1stfield" value="" readonly/>
<input id="2ndfield" name="2ndfield" value="" />

$('#1stfield').change(function(){

// ?

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T05:29:13.950

尝试

```
$('#1stfield').on('keyup',(function(){

    $('#2ndfield').attr('value',$(this).val());

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T05:29:02.627

```
$('#1stfield').keyup(function(){

 $('#2stfield').val($('#1stfield').val());

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T05:36:26.360

当您在字段一中输入字段二时，您可能需要使用`keyup`而不是`change`事件来*反映更改。*在要键入文本的第二个字段的第二个字段上绑定 keyup 并设置第一个字段的只读字段的值。

**[现场演示](http://jsfiddle.net/YCFWf/)**

```
$('#2ndfield').keyup(function () {
    $('#1stfield').val($('#2ndfield').val());
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T05:43:06.770

```
$('#2ndfield').keypress(function(){
    $('#1stfield').val($('#2ndfield').val());
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-06T12:54:13.727

```
<input class="field1" value="111">
<input class="field2" value="111" autofocus>
<input class="field3" value="111" >

$input = $('input');

$input.keypress(function() {
    // Puts the value of the field typed in in ALL other fields
    // regardless of if there are contents in them  
    $input.not(this).val(this.value);
}); 
```

试试这个

# php - 如何将用户重定向到不同的站点？

> ID：15104807
> 
> 赞同：2
> 
> 时间：2013-02-27T05:25:41.280
> 
> 标签：php

我有一个 wordpress 站点，我想在该站点上放置一个链接，以便将用户重定向到另一个 PHP 站点。

但是这里的问题是其他php站点使用了身份验证，即用户需要提供用户名和密码才能进入。

我想开发一个链接，用户只需单击该链接即可直接访问其他站点。

我可以提供 php 站点的用户名和密码，但要求是不要求用户用户提供用户名和密码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T05:32:58.903

您必须创建一个新的 php 文件（在“php 站点”中），将会话变量分配给链接的用户，然后将它们重定向到“php 站点”的主页

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T05:56:49.330

如果您无法控制目标站点，那么您的选择将非常有限。您不能只提供对需要登录凭据的材料的访问权限而不提供这些登录凭据。

您最好且最安全的选择是将目标站点的登录字段直接从其站点包含在 iframe 中。用户登录到另一个站点，您跟踪 iframe onload 事件以查看它是否已更改，然后将用户重定向到相关页面。这更好，因为它使您无法直接在您的站点上处理登录详细信息。

我不能保证这很简单，我还没有尝试过，而且[这个页面](http://softwareas.com/cross-domain-communication-with-iframes)似乎表明至少有一些跨域 iframe 的可能性与现代浏览器不再相关（我没有阅读页面详细地说，只是想给出一个起点）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T05:31:20.810

你必须在另一个 php 站点上编写一个身份验证功能。当用户单击 wordpress 站点的链接时，将他重定向到该身份验证功能，连同他的凭据，用户将自动登录并重定向到你的php网站。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T05:32:19.237

如果我猜对了，我认为最好的方法是在 wordpress 站点中生成带有参数的链接：[http](http://www.linktophpsite.com/?autologin=true) ://www.linktophpsite.com/?autologin=true 然后在 php 站点上，您可以获得该元素，如果它是设置为 true，您可以将用户登录到您的站点。如果您想在两个站点上进行单点登录，那就完全不同了。我建议您阅读有关 php 上的单 sgn-on 的文章

# javascript - 对于正则表达式大师，用 -> 分割并避免括号/引号内容

> ID：15104811
> 
> 赞同：3
> 
> 时间：2013-02-27T05:26:09.360
> 
> 标签：javascript, regex

## 给定字符串：

> 有趣的 -> **A_gre$" [ "at** -> 看起来 ->**很棒/*54[ [有趣的" -> [ " -> [很棒的 -> yolo] -> 看起来]][很棒]** -> a2afg34423*/- ->**哟洛“-> [”**

## 拆分为数组：

1.  有趣的
2.  A_gre$' ['在
3.  看起来
4.  很棒/*54[[有趣的'->['->[很棒->yolo]->看起来]][很棒]
5.  a2afg34423*/-
6.  哟洛'-> ['

## 正则表达式解决方案??!?

基本上，如果括号周围有引号，请避免括号作为打开/关闭分隔符的功能，否则请确保打开括号和关闭括号之间的文本无效。我将如何使用正则表达式实现这一目标？

## **我的解析器解决方案** [测试](http://jsfiddle.net/rJzLJ/2/)

```
var s = "funny -> A_gre$' [ 'at -> looks -> great/\*54[ [funny ' -> [ ' ->"
        + "[great -> yolo] -> looks]][great] -> a2afg34423*/- -> yolo' -> [ '",
    p = 0,
    z = [0],
    q = 0,
    x = s.split('');

//Looking for \" not \'
for(var i = 0; i< x.length; i++){
   var b = x[i],
       c = x[i + 1],
       q = b == "'" ? ++q : q,
       p =  !(q % 2) ? b == '[' ? ++p : b == ']' ? --p : p : p;

   if(b == '-' && c == '>' && !p && !(q % 2))
       z.push(i + 2);
   if(i == x.length - 1){
       z.push(x.length); x = [];
       for(var u = 0; u < z.length; u++)
         z[u + 1] !== undefined ?
              x.push(s.substring(z[u], z[u + 2] !== undefined ?
                      z[u + 1]-2 : z[u + 1]).trim()) : 0;
    }
}

console.log(x) 
```

## 输出：

```
->>> [
      "funny", 
      "A_gre$' [ 'at", 
      "looks", 
      "great/*54[ [funny ' -> [ ' -> [great -> yolo] -> looks]][great]", 
      "a2afg34423*/-", 
      "yolo' -> [ '"
     ] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T05:40:24.857

试试这个模式：

```
([^\s\[\"]*\[[^\]]+\])\S*|([^\s\[\"]*\"[^\"]+\")\S*|(\w\S*) 
```

使用[正则表达式](http://regexpal.com/)查看它匹配的内容。它由三部分组成。其中之一的描述如下：

```
([^\s\[\"]*\[[^\]]+\])\S* 
```

表达式读取非空格、非引号和非括号字符，直到它到达一个左括号，然后读取括号内容直到它到达右括号，然后读取它之后出现的任何非空格字符。这是括号匹配部分的更详细描述：

```
\[         : opening bracket character
[          : regex syntax for starting a set definition
   ^       : It's a negative set, i.e., set of characters which are NOT:
   \]      : closing bracket character
]+         : regex syntax for ending a set definition and the + operator for matching 1 or more occurrences
\]         : closing bracket character 
```

另一部分处理引号，另一部分匹配没有括号和引号的单词。

以下代码显示了如何查看匹配项以及如何提取它们：

var input = 'funny -> A_gre$" [ "at -> 看起来 -> 很棒/ *54[ [funny " -> [ " -> [great -> yolo] -> 看起来]][great] -> a2afg34423* /- -> yolo" -> ["'

```
var regexp = /([^\s\[\"]*\[[^\]]+\])\S*|([^\s\[\"]*\"[^\"]+\")\S*|(\w\S*)/g;

var result = input.match(regexp)
console.log("Array of matches are:");
console.log(result);

var results = regexp.exec(input);
while(results != null) {
    console.log("index: " + results.index + " found: " + results[0]);
    results = regexp.exec(input);
} 
```

这可以在这里看到：http: [//jsfiddle.net/LXqch/1/](http://jsfiddle.net/LXqch/1/)

# gwt - 是否可以使用 Java 8 来避免 java.lang.OutOfMemoryError: PermGen in GWT Devmode

> ID：15104816
> 
> 赞同：1
> 
> 时间：2013-02-27T05:26:58.570
> 
> 标签：gwt, gwt-2.5, java-8

我最近看到一篇关于 Java 8 的文章，它与PermGen 空间的[内存管理有关。](http://javaeesupportpatterns.blogspot.in/2013/02/java-8-from-permgen-to-metaspace.html)

有什么方法可以使用 Java 8 [Metaspace](http://java.dzone.com/articles/java-8-permgen-metaspace)和 GWT Dev 模式来提高 GWT Dev 模式的实用性和性能。

**编辑 -** 我了解源代码需要与 JDK 6 兼容才能为 javascript 编译的部分。我猜没有这样的限制需要在开发模式下申请内存管理

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:48:56.613

[正如 Thomas Broyer 所指出的](https://groups.google.com/forum/#!topic/google-web-toolkit/eQtWYgkUB04)，您只能使用 java 6 源代码。

可以使用 JDK 7 运行 - 所以也许它也应该使用 JDK 8 运行，但您仍然只能使用 Java 6 的代码。

# java - 如何用Java调整句子中空格字符的数量？

> ID：15104819
> 
> 赞同：-1
> 
> 时间：2013-02-27T05:27:05.253
> 
> 标签：java, regex

我想做一个方法来证明java中的文本。为此，我需要一个必须匹配任何空格字符的正则表达式，然后将它们一一替换为两个空格。如果没有一个空格，则它必须搜索两个空格并将它们变为三个，如果没有两个空格，则它必须搜索三个空格并将它们变为四个空格。这继续……

java中的正则表达式如何做到这一点？

我使用 replaceFirst(String regex, String replacement) 方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T05:34:22.787

试试这个：

```
Pattern p = Pattern.compile("(\\s+)");
Matcher m = p.matcher(input);
if (m.find()) {
    input = m.replaceAll("$1 ");
}
System.out.println(input); 
```

使用上面的代码：

```
"How can   I do  that with regex?" 
```

变成

```
"How  can    I  do   that  with  regex?" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T05:39:22.723

你可能走错路了。这是我将如何做到这一点：

```
public static String addSpaces (String string, int desiredLength)
{
    String [] parts = string.trim ().split ("\\s+");

    int l = parts.length;

    if (l <= 1)
        return string; // Cannot add spaces because there is only one word
    else
    {
        int count = 0;
        for (String part: parts)
            count += part.length ();

        count = desiredLength - count;

        if (count < 0) count = 0;

        int n = count / (l - 1);
        int k = count % (l - 1);

        StringBuilder result = new StringBuilder (parts [0]);
        for (int i = 0; i < l - 1; i++)
        {
            int m = i < k ? n + 1 : n;

            for (int j = 0; j < m; j++)
                result.append (' ');

            result.append (parts [i + 1]);
        }

        return result.toString ();
    }
}

public static void main (String [] args)
{
    System.out.println (addSpaces ("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec est ligula, porta", 80));
    System.out.println (addSpaces ("quis feugiat eget, congue ac odio. Curabitur in purus mi, nec feugiat velit. Ut", 80));
    System.out.println (addSpaces ("pulvinar massa vel risus fringilla adipiscing. Aliquam fringilla congue mi, eget", 80));
    System.out.println (addSpaces ("consectetur nibh egestas at. In hac habitasse platea dictumst. Nullam interdum", 80));
    System.out.println (addSpaces ("rutrum laoreet. Etiam vestibulum diam dui. Phasellus erat sapien, pulvinar vel", 80));
    System.out.println (addSpaces ("rutrum eu, accumsan vel ante. Etiam odio erat, commodo eu rutrum eu, molestie id", 80));
    System.out.println (addSpaces ("tellus. Ut eu ante ipsum. Cras pretium bibendum nisi a rhoncus. Lorem ipsum", 80));
    System.out.println (addSpaces ("dolor sit amet, consectetur adipiscing elit. Etiam porta, urna non placerat", 80));
    System.out.println (addSpaces ("rutrum, velit enim aliquet arcu, non vehicula sem mauris non dui. Quisque est", 80));
    System.out.println (addSpaces ("nisi, facilisis non pretium et, luctus in nisi. Ut sed luctus enim. Maecenas", 80));
    System.out.println ("vitae lorem vel justo aliquet consectetur.");
} 
```

输出是：

```
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec est ligula, porta
quis  feugiat eget, congue ac odio. Curabitur in purus mi, nec feugiat velit. Ut
pulvinar massa vel risus fringilla adipiscing. Aliquam fringilla congue mi, eget
consectetur  nibh  egestas at. In hac habitasse platea dictumst. Nullam interdum
rutrum  laoreet.  Etiam vestibulum diam dui. Phasellus erat sapien, pulvinar vel
rutrum eu, accumsan vel ante. Etiam odio erat, commodo eu rutrum eu, molestie id
tellus.  Ut  eu  ante  ipsum.  Cras pretium bibendum nisi a rhoncus. Lorem ipsum
dolor  sit  amet,  consectetur  adipiscing  elit. Etiam porta, urna non placerat
rutrum,  velit  enim  aliquet arcu, non vehicula sem mauris non dui. Quisque est
nisi,  facilisis  non  pretium  et, luctus in nisi. Ut sed luctus enim. Maecenas
vitae lorem vel justo aliquet consectetur. 
```

以下是如何将文本拆分为行然后证明：

```
public static String addSpaces (String [] words, int count)
{
    int l = words.length;

    if (l == 0)
        return "";
    else if (l == 1)
        return words [0];
    else
    {
        int n = count / (l - 1);
        int k = count % (l - 1);

        StringBuilder result = new StringBuilder (words [0]);
        for (int i = 0; i < l - 1; i++)
        {
            result.append(' ');

            int m = i < k ? n + 1 : n;

            for (int j = 0; j < m; j++)
                result.append (' ');

            result.append (words [i + 1]);
        }

        return result.toString ();
    }
}

public static String [] justify (String string, int width)
{
    List<String> result = new ArrayList<String>();

    String [] words = string.trim ().split ("\\s+");

    int n = 0;
    List<String> line = new ArrayList<String>();
    for (String word: words)
    {
        if (!line.isEmpty () && n + word.length () > width)
        {
            result.add (
                addSpaces (
                    line.toArray (
                        new String [line.size ()]), 
                    Math.max (0, width - n)));

            line.clear ();
            n = 0;
        }

        line.add (word);
        if (n > 0)
            n += 1;
        n += word.length();
    }

    result.add (addSpaces (line.toArray (new String [line.size ()]), 0));
    return result.toArray(new String [result.size ()]);
}

public static void main (String [] args)
{
    String text = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut porta bibendum ipsum vitae pretium. Nulla facilisi. Aenean eu orci eget diam bibendum lobortis. Nulla nisl ante, consectetur feugiat tincidunt eget, venenatis a velit. Nullam eget justo pellentesque diam commodo pharetra imperdiet ut tellus. Maecenas massa mi, placerat et vestibulum non, luctus ut nulla. Nam id libero vel massa malesuada commodo vel nec magna. Maecenas faucibus fermentum nisi et mattis.";
    String [] lines = justify (text, 80);
    for (String line: lines)
        System.out.println (line);
} 
```

输出是：

```
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut porta bibendum ipsum
vitae pretium. Nulla facilisi. Aenean eu orci eget diam bibendum lobortis. Nulla
nisl  ante,  consectetur  feugiat tincidunt eget, venenatis a velit. Nullam eget
justo pellentesque diam commodo pharetra imperdiet ut tellus. Maecenas massa mi,
placerat  et  vestibulum non, luctus ut nulla. Nam id libero vel massa malesuada
commodo vel nec magna. Maecenas faucibus fermentum nisi et mattis. 
```

# javascript - 在 javascript 中设置的文本框值在服务器端页面加载事件中不可用

> ID：15104826
> 
> 赞同：0
> 
> 时间：2013-02-27T05:27:37.333
> 
> 标签：javascript, asp.net

我有以下情况。我通过从服务器端调用 JavaScript 函数设置了一个文本框值。textox 值被完美分配，但它不在服务器端它显示为空白。这是我的代码。

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Not IsPostBack Then
        Page.ClientScript.RegisterStartupScript(Me.GetType(), "set", "setValue();", True)
        TextBox1.Text = txt.Text
    End If
End Sub 
```

这是我的javascript函数。

```
 <script type="text/javascript">
    function setValue() {
        document.getElementById("<%=txt.ClientID  %>").value = "Hello World";
    }

</script> 
```

这是我的标记

```
<form id="form1" runat="server">
    <div>
        <asp:TextBox ID="txt" runat="server">
        </asp:TextBox>
        <asp:TextBox ID="TextBox1" runat="server">
        </asp:TextBox>
        <asp:Button ID="btnClic" runat="server" Text="Click Me" />
    </div>
</form> 
```

第一个 texbox 值被完美分配。但它没有显示在第二个文本框中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-12T16:22:25.053

# 我用波纹管方法解决了我的问题。

如果您有必须使用 JavaScript 在客户端设置的 TextBox，

您必须将其替换为**HTML > Input(Text)**

```
<asp:TextBox ID="txt1" runat="server" ></asp:TextBox> 
```

用。。。来代替：

```
<input id="txt1" type="text" runat="server" /> 
```

然后在 html 源代码中将其更改为**runat="server"**

现在您可以在客户端更改其文本并在服务器端获取其值：**txt1.Value**

我希望有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T06:10:38.963

`txt.Text`值将无法在代码中访问，您可以使用下面的 javascript 代码来实现这一点。

```
<script type="text/javascript">
    function setValue() {

        document.getElementById("<%=txt.ClientID%>").value = "Hello World";
        document.getElementById("<%=TextBox1.ClientID%>").value = document.getElementById("<%=txt.ClientID%>").value;
    }

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T08:47:49.473

如果您将在您的 javascript 函数中分配它，您将无法获得文本框的值。

试试这个方法。

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
If Not IsPostBack Then
    TextBox1.Text = "Hi"
    Page.ClientScript.RegisterStartupScript(Me.GetType(), "set", "setValue();", True)
    TextBox1.Text = txt.Text
End If
End Sub 
```

它可能会帮助你。现在您的文本框值将是“Hello World”。在调用 javascript 函数之前，您必须分配一些值。

**更新**

唯一的解决方案是您必须使用 Jquery Ajax 才能在服务器端使用文本框值。

使用此链接供您参考。[ASP.Net 中的 Jquery Ajax](http://www.codeproject.com/Articles/17203/Using-jQuery-for-AJAX-in-ASP-NET)

# python - Scrapy - Spider 抓取重复的网址

> ID：15104831
> 
> 赞同：4
> 
> 时间：2013-02-27T05:27:50.080
> 
> 标签：python, scrapy, web-crawler

我正在爬取搜索结果页面并从同一页面中抓取标题和链接信息。作为一个搜索页面，我也有指向下一页的链接，我已在 SgmlLinkExtractor 中指定允许这些链接。

问题的描述是，在第 1 页，我找到了 Page2 和 Page3 的链接要抓取，它做得很好。但是当它爬到第 2 页时，它又会有指向 Page1（上一页）和 Page3（下一页）的链接。因此，它再次使用引荐来源网址为 Page2 抓取 Page1 并进入循环。

我使用的scrapy版本是0.17。

我在网上搜索了答案并尝试了以下方法，1）

```
Rule(SgmlLinkExtractor(allow=("ref=sr_pg_*")), callback="parse_items_1", unique= True, follow= True), 
```

但是唯一的命令未被识别为有效参数。

2）我试图在设置中将默认过滤器指定为 DUPEFILTER_CLASS = RFPDupeFilter

```
 DUPEFILTER_CLASS = RFPDupeFilter
NameError: name 'RFPDupeFilter' is not defined 
```

3）我也尝试过有一个自定义过滤器，我在网上找到了这个片段，但不太了解它。代码如下。访问 id 和状态被捕获，但它不能识别已经爬取的页面。

注意：片段是从网上复制的，我没有太多细节，

```
from scrapy import log
from scrapy.http import Request
from scrapy.item import BaseItem
from scrapy.utils.request import request_fingerprint
from Amaze.items import AmazeItem

class IgnoreVisitedItems(object):
    FILTER_VISITED = 'filter_visited'
    VISITED_ID = 'visited_id'
    CONTEXT_KEY = 'visited_ids'

    def process_spider_output(self, response, result, spider):
        context = getattr(spider, 'context', {})
        visited_ids = context.setdefault(self.CONTEXT_KEY, {})
        ret = []
        for x in result:
            visited = False
            if isinstance(x, Request):
                if self.FILTER_VISITED in x.meta:
                    visit_id = self._visited_id(x)
                    if visit_id in visited_ids:
                        log.msg("Ignoring already visited: %s" % x.url,
                                level=log.INFO, spider=spider)
                        visited = True
            elif isinstance(x, BaseItem):
                visit_id = self._visited_id(response.request)
                if visit_id:
                    visited_ids[visit_id] = True
                    x['visit_id'] = visit_id
                    x['visit_status'] = 'new'
            if visited:
                ret.append(MyItem(visit_id=visit_id, visit_status='old'))
            else:
                ret.append(x)
        return ret

    def _visited_id(self, request):
        return request.meta.get(self.VISITED_ID) or request_fingerprint(request) 
```

我的目的是让蜘蛛本身忽略已经爬取的网页，而不是将爬取的页面放在列表中，并在每次爬取页面时与列表匹配。

请对此有任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:24:35.427

你没有得到你的 Spider 的代码示例，但是，可能你`dont_filter = True`在调用`Request`方法时传递了参数。尝试明确指定`Request(dont_filter=False)`. 这向 Spider 指出，他不必重复相同的请求。

# ios - iOS ACEdrawingView 无法设置 RGB 颜色，只能设置默认 UIColor 值

> ID：15104840
> 
> 赞同：1
> 
> 时间：2013-02-27T05:28:35.010
> 
> 标签：ios, cocoa, uicolor

我正在玩这个`ACEDrawingView`代码：[https ://github.com/acerbetti/ACEDrawingView](https://github.com/acerbetti/ACEDrawingView)

我正在尝试使用 RGB 值设置笔颜色，但每次我尝试使用设置为自定义 RGB 值的笔进行绘制时都会崩溃。但是，当它设置为任何默认`UIColor`设置时，它完全可以正常工作。

我很确定我设置`UIColor`正确，我已经做了很多次没有问题，使用如下代码：

```
[UIColor colorWithRed:255.0/255.0 green:165.0/255.0 blue:239.0/255.0 alpha:1.0] 
```

不知道发生了什么，我完全是 iOS 编程的菜鸟。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T09:34:42.303

在ACEDrawingView.h

改变@property (nonatomic, assign) UIColor *lineColor;

至

```
@property (nonatomic, strong) UIColor *lineColor; 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T14:53:46.550

将以下代码放在`#import`语句下方的文件顶部，您可以使用 HEX 值：

```
#define UIColorFromRGB(rgbValue, alphaValue) [UIColor colorWithRed:((float)((rgbValue & 0xFF0000) >> 16))/255.0 green:((float)((rgbValue & 0xFF00) >> 8))/255.0 blue:((float)(rgbValue & 0xFF))/255.0 alpha:alphaValue] 
```

然后在任何你想使用 RGB 颜色的地方，实现以下内容：

对于红色 (FF0000)：`UIColorFromRGB(0xFF0000, 1.0)`

# linux - 有没有办法从emacs中的文件头读取几行？

> ID：15104848
> 
> 赞同：1
> 
> 时间：2013-02-27T05:29:05.580
> 
> 标签：linux, emacs

我知道`head`shell的命令。但是，有时在 emacs 中打开一个 shell 并`head`在该 shell 中执行命令并不方便。`built-in`emacs 中有这个命令吗？

# workflow - Workflow 调用方法中的这些 DebugManager 和 WinIOError 是什么？

> ID：15104854
> 
> 赞同：0
> 
> 时间：2013-02-27T05:29:34.040
> 
> 标签：workflow, workflow-foundation-4, red-gate-ants, ants

我在我的 Windows 服务中运行 ANTS Performance Profiler 来优化它。所以我发现我的一个工作流的执行大约是 436 毫秒。我深入研究了工作流的调用方法中正在执行的每个方法，并找到了如下图所示的结果。

![ANST 性能分析器结果（在工作流的 Invoke 方法中](../Images/61f0960613cb7623396b6515ccd47fef.png)

上面的DebugManager是什么？为什么会出现 WinIOError？对不起，我刚刚迷失在这里的菜鸟问题。如果可能的话，我真的只想缩短执行时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:11:05.777

听起来您正在使用 VS 运行调试版本，这绝不是衡量实际性能的最佳方式，因为这意味着运行时优化被禁用。

无论如何，如果您正在寻找最大的性能，WF4 不是问题。由于 WF4 执行的异步特性，它总是有点难以预测。运行时和所涉及的所有活动总是会产生一些开销，这意味着一个简单的 C# 函数总是会运行得更快。

# javascript - 从范围数组中查找缺失范围

> ID：15104857
> 
> 赞同：-3
> 
> 时间：2013-02-27T05:29:55.600
> 
> 标签：javascript, jquery

我的班级数组具有 Minvalue 和 Maxvalue 属性。

假设在我的数组中我有三个元素

```
First MinValue=0 and  MaxValue=25
Second MinValue=26 and  MaxValue=50
Third MinValue=75 and  MaxValue=100 
```

最小值和最大值可以在 0 到 100 之间。

现在我想从上面包含三个对象的数组中找到缺失的范围。

上述数组中的缺失范围是 51 到 75

那时可能有多个缺失值我想找到具有 min MinValue 的范围。

我想用javascript编写代码。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T05:46:05.040

从当前的 minValue 中减去前一个 maxValue。差值应始终为 1。遍历所有值以查找缺失范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T05:51:42.860

你应该尝试开始一些事情并自己处理这个问题。

```
var arr = [{ Min :0, Max:25 } , { Min:26, Max:28}, { Min:35, Max:41}, { Min:48, Max:71}];

var range = [];
for(var i = 0; i <= 100; i++)
{
    range.push(true); // first set it as missing...
}

for(var i = 0 ; i < arr.length ; i++)
{
    for(var j = arr[i].Min ; j <= arr[i].Max ; j++)
    {
        range[j] = false; // loop the array and set it to false
    }
}
var missingPart = '';
var start = false;
for(var i = 0 ; i < range.length ; i++) // loop the range array and build result
{
    if(range[i])
    {
        if(!start)
        {
            start = true;
            if(missingPart)
            {
                missingPart+=", ";
            }   
            missingPart += i;
        }
    }
    else
    {
        if(start)
        {
            start = false;
            missingPart += ("-" + (i-1));
        }
    }
}
if(start)
{
    missingPart += ("-100");
}
document.getElementById("counter").innerHTML = missingPart 
```

在这里找到 jsFiddle 结果：http: [//jsfiddle.net/gm4HG/2/](http://jsfiddle.net/gm4HG/2/)

# silverlight - 将地图添加到 Silverlight 项目

> ID：15104858
> 
> 赞同：0
> 
> 时间：2013-02-27T05:29:58.923
> 
> 标签：silverlight, map, geolocation, bing-maps, openstreetmap

我想知道这些天是否有针对 Silverlight 项目的商业免费地图显示选项？我尝试运行 DeepEarth，但它在 SL5 中对我不起作用。

我热衷于运行 OpenStreetMaps，这样我们就可以在没有许可问题的情况下进行商业部署。

任何意见，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:37:43.680

我使用必应地图，

[http://msdn.microsoft.com/en-us/library/cc980922.aspx](http://msdn.microsoft.com/en-us/library/cc980922.aspx)

[http://www.microsoft.com/maps/isdk/silverlight/](http://www.microsoft.com/maps/isdk/silverlight/)

```
<UserControl x:Class="MapControlInteractiveSdk.Tutorials.TutorialDefaultMap"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:m="clr-namespace:Microsoft.Maps.MapControl;assembly=Microsoft.Maps.MapControl">
<Grid x:Name="LayoutRoot" Background="White">
    <m:Map CredentialsProvider="{StaticResource MyCredentials}" />
</Grid>
</UserControl> 
```

Bing 有两种类型的许可证，如果您将其用作商业用途，则应付费。

GeoService 非常成功。您只需通过逗号服务分隔地址字段即可返回纬度和态度等。

您还可以更改您的谷歌提供商。Telerik 也有成功的 Api。据我所知，您可以免费使用 Telerik 的 Open Street Map 提供程序。当然，如果你有 Telerik 组件。 [http://demos.telerik.com/silverlight/#Map/GeoImageryProviders](http://demos.telerik.com/silverlight/#Map/GeoImageryProviders)

在我看来：

如果不支付大量资金，开发 Silverlight 应用程序是没有效率的。我现在想不出没有 Telerik 的银光。有时支付一个月的钱会给我们带来更少的成本。

# ios - 如何获取 UICollectionView 标头的索引路径？

> ID：15104862
> 
> 赞同：6
> 
> 时间：2013-02-27T05:30:23.460
> 
> 标签：ios, uicollectionview, uicollectionviewlayout

使用视图的 indexPathForItemAtPoint，我将获得一个单元格的索引路径，但绝不是 UICollectionReusableView（页眉/页脚）——因为它总是返回 nil。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T05:49:17.003

您应该将自己的字典映射索引路径映射到标题视图。在您的`collectionView:viewForSupplementaryElementOfKind:atIndexPath:`方法中，在返回之前将视图放入字典中。在您的`collectionView:didEndDisplayingSupplementaryView:forElementOfKind:atIndexPath:`中，从字典中删除视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-07T10:09:02.833

```
override func collectionView(_ collectionView: UICollectionView, viewForSupplementaryElementOfKind kind: String, at indexPath: IndexPath) -> UICollectionReusableView {
    switch kind {
    case UICollectionElementKindSectionHeader:
        let headerView = collectionView.dequeueReusableSupplementaryView(ofKind: kind, withReuseIdentifier: "header", for: indexPath) as! HeaderCollectionReusableView
        let gestureRecognizer: UITapGestureRecognizer = UITapGestureRecognizer(target: self, action: #selector(didSelectSection(gesture:)))
        headerView.addGestureRecognizer(gestureRecognizer)
        return headerView
    }
} 
```

现在在 didSelectSection ：

```
func didSelectSection(gesture: UITapGestureRecognizer) {
    let indexPaths = self.collectionView?.indexPathsForVisibleSupplementaryElements(ofKind: UICollectionElementKindSectionHeader)
    for indexPath in indexPaths! {
        if (gesture.view as! HeaderCollectionReusableView) == collectionView?.supplementaryView(forElementKind: UICollectionElementKindSectionHeader, at: indexPath){
            print("found at : \(indexPath)")
            break
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-22T19:11:42.607

您可以为 UICollectionView 添加扩展，其中传递补充视图的引用和此视图的类型（`UICollectionView.elementKindSectionHeader`或`UICollectionView.elementKindSectionFooter`）

```
extension UICollectionView {

    func indexPathForSupplementaryElement(_ supplementaryView: UICollectionReusableView, ofKind kind: String) -> IndexPath? {
        let visibleIndexPaths = self.indexPathsForVisibleSupplementaryElements(ofKind: kind)
        return visibleIndexPaths.first(where: {
            self.supplementaryView(forElementKind: kind, at: $0) == supplementaryView
        })
    }

} 
```

如果补充视图不可见，则此方法不起作用！

# java - 不同时区的Java日历为同一时间提供不同的值

> ID：15104868
> 
> 赞同：1
> 
> 时间：2013-02-27T05:30:52.203
> 
> 标签：java, date, calendar, timezone

嗨，在下面的代码中，我得到的输出为 9 和 10，为什么会这样？即使日历属于不同的时区，我们也会传递相同的日期来设置时间。据我所知，时间是从纪元作为相对值计算出来的，所以无论时区是什么，这个相对值都应该是相同的

我在一个时区的数据库和另一个时区的服务器面临着类似的问题。

```
Date date = new Date ();
    Calendar c = Calendar.getInstance(TimeZone.getTimeZone("America/Los_Angeles"),Locale.US);
    Calendar c1 = Calendar.getInstance();
    c.setTime(date);
    c1.setTime(date);
    System.out.println(c.get(Calendar.HOUR));
    System.out.println(c1.get(Calendar.HOUR)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T05:36:53.027

当您传入日期时，将采用其 UTC 时间戳（因此自 GMT+0 中的 01-01-1970 以来的毫秒数），然后您将两个日历设置为同一时间，并询问它是几小时。

显然，不同时区的小时会有所不同——洛杉矶时区和运行代码的计算机的时区，即使它们已使用完全相同的 UTC 时间进行初始化。

# content-management-system - 将一个模板的内容插入另一个 umbraco

> ID：15104872
> 
> 赞同：1
> 
> 时间：2013-02-27T05:31:14.217
> 
> 标签：content-management-system, umbraco

我是 umbraco 的新手。我试图在另一个模板中显示一个模板的某些部分。例如

1）我有产品页面，其中列出了所有产品和一些关于它们的描述。2）现在我也想在我的主页上显示这个内容。我不想将代码从产品页面复制并粘贴到主页......因为如果产品页面上出现一些更改，这将要求我做同样的事情。

此外，产品页面包含子节点，由宏自动显示。我只想将产品页面内容显示到我的主页。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:17:51.917

您只需添加一个新的宏来显示您需要的产品页面内容，然后将其添加到主页模板中。

将其作为 razor 脚本文件执行类似于（其中 1111 是您的产品页面节点 ID）。如果您使用 ucomponents，您可以使用 uQuery.getNodeByUrl 或其他更好的帮助方法，但此代码应该可以直接使用：

```
var productPage = @Model.NodeById(1111);            
<div>
<a href="@productPage.Url">
<h4>
@productPage.copyHeadline
</h4>
</a>
@if (!string.IsNullOrEmpty (@productPage.copyBlurb.ToString ()))
{
@Html.Raw(@productPage.copyBlurb.ToString().Substring(0, 200) + "...");
}
</div> 
```

# security - SSL 中如何使用信任库和密钥库？

> ID：15104873
> 
> 赞同：0
> 
> 时间：2013-02-27T05:31:17.247
> 
> 标签：security, ssl, keystore, truststore, sslengine

使用 Java 创建 SSL 连接时，我们首先使用KeyStores**和**TrustStores**初始化****SSLContext**。**javax.net.ssl**中的SSLContext有一个名为**createSSLEngine()**的方法来创建**SSLEngine**。因此，在为连接创建会话时，将使用创建的 SSLEngine。我的问题是在 SSL 协议的哪个点使用来自 KeyStores 和 TrustStores 的 keyManagers 和 TrustManagers？

 ******提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:40:20.900

在 SSL 握手期间建立相互信任和真实性并创建 SSL 会话。

至于您的发送问题，如果链中的至少一个证书是受信任的，则标准 JSSE 信任管理器认为证书链受信任。它不必是根证书。如果您绝对确定必须建立根证书的有效性和真实性，则应该实现自定义 TrustManager 并使用它而不是默认实现。******

# javascript - 如何将一页javascript的值传递给另一页javascript

> ID：15104874
> 
> 赞同：0
> 
> 时间：2013-02-27T05:31:18.963
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-3

我需要将一页 javascript 的值传递给另一页 javascript 特定功能。我使用 mvc 函数这两个页面是不同的控制器 cshtml 页面。如何将一个 cshtml 的值传递给另一个 cshtml。我尝试了这段代码，但没有触发。请转发你的知识

```
view1:

 b.on('click', function () {
          document.location.href = +'/view2.cshtml?Id=' + sData; // notes:
    });

view2:

 var data = $_POST['Id'];
    function work(data) {
    // my code
    } 
```

笔记：

我不知道如何提及特定的view2。因为我有很多控制器，每个控制器都有相同的 view2 名称。此代码转到我当前的控制器视图 2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T05:52:19.007

试试这样：

```
b.on('click', function () {
      document.location.href = +'/controllerName/View2?Id=' + sData; // notes:
}); 
```

在您的控制器上，您应该访问 querystring 参数。

```
public ActionResult View2(int Id)
{
    ViewData["ID"]=Id; //you can store the Id in ViewData or ViewBag
    return View();
} 
```

现在在您的 view2.cshtml 文件中，显示您存储的 ViewDate。

```
 @ViewData["ID"] 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T07:29:30.903

jQuery Cookie 可能会有所帮助： [https ://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

查看1、设置数据：

```
$.cookie('my_cookie', 'sData'); 
```

查看2，获取数据：

```
$.cookie('my_cookie'); 
```

# binding - 如何绑定属性块 monotouch

> ID：15104875
> 
> 赞同：3
> 
> 时间：2013-02-27T05:31:20.450
> 
> 标签：binding, xamarin.ios

我正在学习如何将目标 c 绑定到 monotouch，但我遇到了一个块属性的问题

```
@property (nonatomic, copy) void (^onLongPress)(UIView*, NSInteger); 
```

我现在有这个

```
delegate void onLongPress (UIView view, int index);
[Export ("onLongPress")]
void onLongPress() {  set;  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T08:52:15.933

关于如何绑定块的文档是[http://docs.xamarin.com/guides/ios/advanced_topics/binding_objective-c_libraries](http://docs.xamarin.com/guides/ios/advanced_topics/binding_objective-c_libraries)在 3.10

但是您的代码显示了一个块属性，而不是一个采用属性的函数。

在你的情况下，我会这样绑定它：

```
//ApiDefinition.cs
delegate void OnLongPress (UIView view, int index)

[Export("onLongPress")]
OnLongPress OnLongPress { set;} 
```

这可能会奏效，但由于我从未遇到过这种特殊情况，我对你的结果很感兴趣。

# cakephp - 亚马逊网络服务（免费套餐）上的 CakePHP 是否合适？

> ID：15104879
> 
> 赞同：0
> 
> 时间：2013-02-27T05:31:31.023
> 
> 标签：cakephp, amazon-web-services, amazon-ec2, amazon-rds

我有一个 2 GB 的数据库和一个前端，白天可能会处理 10-15 次点击。AWS（使用 MySQL RDS）免费套餐是一个不错的起点吗？

由于微型实例的大小，CakePHP 应用程序会遇到超时或其他资源问题吗？

> 微型实例（来自亚马逊）：微型实例 (t1.micro) 提供少量一致的 CPU 资源，并允许您在有额外周期可用时在短时间内增加 CPU 容量。它们非常适合定期需要额外计算周期的低吞吐量应用程序和网站。您可以在 Amazon EC2 文档中了解有关如何使用微型实例和适当应用程序的更多信息。
> 
> 微型实例 613 MiB 内存，最多 2 个 ECU（用于短周期突发），仅 EBS 存储，32 位或 64 位平台

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:52:40.207

它将非常适合您的场景。

我已经为其他客户应用程序部署了自己，这些应用程序的要求至少是您的两倍，并且它们运行良好。

如果您的应用程序执行从磁盘保存和检索文件的操作，我建议您尝试一下 Amazon S3。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T15:20:50.547

如果您只获得非常少量的点击，您可能可以在微型实例上运行您的应用程序和 mysql 数据库。

微型将是免费的，但您必须为 RDS 付费。

您应该不会注意到任何问题 - 我们在 micros 上进行了大部分测试，我们的数据库比您的大。

# c# - 正则表达式不过滤特殊符号

> ID：15104881
> 
> 赞同：0
> 
> 时间：2013-02-27T05:31:44.503
> 
> 标签：c#, regex

我目前正在使用以下代码行：

```
Regex Regex_Alpha = new Regex(@"[a-zA-Z]+('[a-zA-Z])?[a-zA-Z]*"); 
```

我想要做的是过滤文本字段的输入，条件是输入只能是字母和撇号（实际上，我仍然想添加更多，但我正在尝试先解决这个问题）。

现在，它接受所有字符，偶数。

根据我对 Regex 的理解，我尝试将自己的表达方式表述为：

```
Regex Regex_Alpha = new Regex(@"^[a-zA-Z'-"+$); 
```

它过滤数字，但不接受撇号。尝试删除@符号并使用反斜杠转义字符过滤撇号，但仍然没有用。

过滤输入以使其仅接受字母和撇号的最佳方法应该是什么？（一旦我理解了这个符号应该如何工作，我会做其余的符号）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:30:51.340

正如我所评论的那样，您的第一个正则表达式非常适合“字母，两端没有一个撇号”。但是，它匹配任何包含*单个*字母的字符串，因为正则表达式在输入中查找*任何*匹配项，而不是*整个*输入是否匹配。

您可以通过执行您在第二个正则表达式中所做的操作来解决此问题 - 只需`^`在开头放 a 并`$`在结尾放 a。这意味着表达式的开头和结尾必须匹配输入的开头和结尾，因此它确保*整个*输入仅由字母和可能的撇号组成。

关于您的第二个正则表达式，您有一些问题。

*   如果要在`@"..."`字符串文字中使用双引号，则需要放置*两个*双引号。（我认为这可能只是您问题中的一个打字错误，因为您目前拥有的甚至无法编译。）
*   你需要用 a 来关闭你的字符类`]`，否则`[`里面的和所有东西都会被当作一个字符序列来匹配，一个接一个。
*   如果您想在字符类中使用连字符，则它必须位于开头或结尾，否则会被误认为是“中间”连字符（如`A-Z`）。

该表达式`@"^[a-zA-Z'""-]+$"`应匹配“任何完全由字母、撇号、引号或连字符组成的字符串”。

# jquery - 如何检测滚动到底部

> ID：15104884
> 
> 赞同：0
> 
> 时间：2013-02-27T05:32:02.830
> 
> 标签：jquery, scroll, detect

这是检测用户是否滚动到底部的代码。

```
$(window).scroll(function() {
  var distance = $(window).scrollTop() -$(document).height() + $(window).height();
  console.log(distance);
}); 
```

当我重新加载网络浏览器（chrome）时，窗口滚动到底部，chrome中的“距离”值为0或-1。我不知道为什么会这样；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T05:37:38.990

将值转换为整数值，如下所示`$(document).height()`，`$(window).height()`

```
parseInt($(document).height());
parseInt($(window).height()); 
```

# java - 建议的锁示例

> ID：15104890
> 
> 赞同：2
> 
> 时间：2013-02-27T05:32:27.970
> 
> 标签：java, multithreading

2 个线程从 GenericObjectPool 中声明 2 个可重用实例，并开始处理以下数据集 -

```
Thread 1 [ Rec1, Rec1, Rec2 ]

Thread 2 [ Rec1, Rec3, Rec2 ]

Thread 3 [ Rec3 ] 
```

必须首先查找这些记录，如果找不到，则仅插入一组表中。因此，在 thread1 中，**Rec1**两次出现被安全地处理，因为它按顺序运行。但是，由于实例之间存在争用，因为 Pool 中的第二个实例上的 Thread2 也有**Rec1 。**同样 Rec2 ， Rec3 也重复了。所以，我将锁设为静态最终 ..

类本身看起来像这样 -

```
Method1
--------
loop on all records
check condition1 
If Meets
lock obj
Recheck condition1
if meets
INSERT1
release lock
end loop 
```

和 ..

```
Method 2
---------
loop on all records
check condition2 
If Meets
lock obj
Recheck condition2
if meets
INSERT2
release lock
end loop 
```

关于“obj”锁的建议？将其设为静态最终将解决它，但由于广泛使用类级别锁定而使程序几乎是连续的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T05:53:08.593

执行操作时不要按住锁。仅使用同步调用来仲裁谁可以处理哪些记录，不在同步块内执行操作，并在完成时发出信号。

所以（在java中）：

```
private final static Object LOCK = new Object();
private final static Set<Integer> busyRecords = new HashSet<Integer>();

public static void waitToWorkOn(int recordNum) {
   synchronized(LOCK) {
      while (busyRecords.contains(recordNum)) {
         LOCK.wait(); //go to sleep
      }
      busyRecords.add(recordNum); //ours now
   }
}

public static void doneWith(int recordNum) {
   synchronized(LOCK) {
      busyRecords.remove(recordNum);
      LOCK.notifyAll(); //wake sleepers up
   }
} 
```

任何使用它的代码都必须使用 try-finally 来确保发送释放信号：

```
waitToWorkOn(recordNum);
try {
   //do something to record
} finally {
   doneWith(recordNum);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T06:12:55.337

尝试使用`java.util.concurrent.ConcurrentLinkedQueue`而不是您自己的锁定机制。简单、快速、实用的[无阻塞](http://www.cs.rochester.edu/u/michael/PODC96.html)

如果我理解你的问题是正确的，那么你需要分别为方法 1 和方法 2 设置两个不同的队列。调用的步骤`loop on all records`也将被定义为`get element from queue or wait`

# android - Android 加速度计数据类

> ID：15104895
> 
> 赞同：1
> 
> 时间：2013-02-27T05:32:33.343
> 
> 标签：android, accelerometer, android-sensors, android-searchmanager

我有以下类可以从中读取数据`accelerometer`：

```
 public class Accelerometer implements SensorEventListener {

    private SensorManager mSensorManager;
    private Sensor mAccelerometer;

    float deltaX;
    float deltaY;
    float deltaZ;

    Activity activity;

    public Accelerometer(Activity act)
    {
        this.activity = act;
        mSensorManager = (SensorManager) this.activity.getSystemService(Context.SENSOR_SERVICE);
        mAccelerometer = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
        mSensorManager.registerListener(this, mAccelerometer, SensorManager.SENSOR_DELAY_NORMAL);
    }

    public float getDeltaX()
    {
        return this.deltaX;
    }

    public float getDeltaY()
    {
        return this.deltaY;
    }

    public float getDeltaZ()
    {
        return this.deltaZ;
    }

    @Override
    public void onSensorChanged(SensorEvent event) {
        // TODO Auto-generated method stub

        deltaX = event.values[0];
        deltaY = event.values[1];
        deltaZ = event.values[2];
    }
} 
```

我正在`activity`使用以下代码从我的主类访问这个类：

```
Accelerometer sbt = new Accelerometer (this);
tvX.setText(Float.toString(sbt.getDeltaX()) + " " +Float.toString(sbt.getDeltaY()) + " "+Float.toString(sbt.getDeltaZ())); 
```

但是，它总是向我显示 0、0、0。不确定当前代码有什么问题。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T05:37:09.910

加速度计（和所有传感器数据）在回调系统上工作。直到下一次读取传感器时它才会给你打电话，它会继续调用你的 onSensorChanged 直到你取消注册。但是如果您在注册后立即尝试设置文本，您将不会被调用。当您使用新值进行更新时，您需要在 onSensorChanged 中设置 textView。

# asp.net-mvc-4 - 在每个月的特定日期从我的网络应用程序自动发送电子邮件

> ID：15104898
> 
> 赞同：3
> 
> 时间：2013-02-27T05:32:40.817
> 
> 标签：asp.net-mvc-4

在我的 MVC 应用程序中，我有一个这样的场景。在每个月的第 5 天，必须从数据库中获取某些用户，并且应该向他们发送电子邮件作为警报。在 Web 应用程序中处理这种情况的最佳方法是什么？通过在 Global.asax 文件上放置一个计时器来进行监控是一种最佳方法吗？（我的要求不允许我使用数据库作业来完成）。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T20:12:53.890

我有类似的要求。我做了一些研究，发现编写服务是最好的方法，我认为这需要完整的 Visual Studio，我们还负担不起。

我发现 ASP.NET 论坛上的一个帖子很有帮助： [http ://forums.asp.net/t/1525428.aspx/1](http://forums.asp.net/t/1525428.aspx/1)

从该线程中的各种链接中，我最喜欢下面的解决方案：http: [//www.codeproject.com/Articles/12117/Simulate-a-Windows-Service-using-ASP-NET-to-run-sc](http://www.codeproject.com/Articles/12117/Simulate-a-Windows-Service-using-ASP-NET-to-run-sc)

global.asax 中的 Session_Start 是每次有人访问您的网站时都会触发的东西。我们不采用此解决方案的原因是因为我们担心依靠某人点击站点来触发 Session_Start 有点不可靠，尤其是当我们希望我们的警报在每天上午 10 点开始发出时。

# android - android：动画效果的第一个活动和下一个活动同时进行

> ID：15104901
> 
> 赞同：3
> 
> 时间：2013-02-27T05:32:49.813
> 
> 标签：android, animation, android-activity

我解决了。如果您需要帮助，这是我的电子邮件：emmets@foxmail.com

xml布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<RelativeLayout
    android:id="@+id/newLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
</RelativeLayout>

<RelativeLayout
    android:id="@+id/oldLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
</RelativeLayout> 
```

java代码，需要扩展ActivityGroup：

```
LocalActivityManager localLocalActivityManager = getLocalActivityManager();
    paramIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    Window localWindow = localLocalActivityManager.startActivity("flag", NewActivity.class);
    localWindow.addFlags(1);
    View localView = localWindow.getDecorView();
    localView.setLayoutParams(new ViewGroup.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT, ViewGroup.LayoutParams.FILL_PARENT));
    newLayout.addView(localView);
 dAnimation upOut = AnimationUtils.loadAnimation(this, R.anim.push_up_out);
     Animation zoomEnter = AnimationUtils.loadAnimation(this, R.anim.zoom_enter);
newLayout.startAnimation(zoomEnter);
oldLayout.startAnimation(upOut); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:29:08.713

试试这个代码

```
button.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            final View l = findViewById(R.id.main);

            Animation a = AnimationUtils.loadAnimation(
                    YourActivity.this, android.R.anim.fade_out);
            a.setDuration(200);
            a.setAnimationListener(new AnimationListener() {

                public void onAnimationEnd(Animation animation) {
                        // Do what ever you need, if not remove it.  
                }

                public void onAnimationRepeat(Animation animation) {
                        // Do what ever you need, if not remove it.  
                }

                public void onAnimationStart(Animation animation) {
                        // Do what ever you need, if not remove it.  
                }

            });
            l.startAnimation(a);
        }
    }); 
```

# wordpress - Wordpress - 使用 php 重定向到不同的页面

> ID：15104904
> 
> 赞同：0
> 
> 时间：2013-02-27T05:33:00.507
> 
> 标签：wordpress

我正在尝试创建一个表单，在提交时将数据添加到 mysql 数据库并重定向到成功页面。

我将此代码添加到我的 functions.php 文件的底部：

```
add_action('init', 'form_submit');
function form_submit(){
    global $wpdb;
    if(isset($_POST['form_sub']))
    {
        $name= $_POST['name'];
        $age= $_POST['age'];
        $wpdb->insert( 
    'mytable', 
    array( 
        'name' => $name, 
        'age' => $age
    ), 
    array( 
        '%s', 
        '%s' 
    ) 
    );
    header("Location: http://www.google.com");
    }
} 
```

并向我的页面添加了一个表单，该表单在单击提交时调用此函数。

当我尝试这个时，数据被添加到 mysql 数据库中，但重定向似乎不起作用。它没有访问 google.com，而是将其添加到页面顶部：

> 对象已移动 此文档可在此处找到

这里是 google.com 的链接。关于如何解决这个问题的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T05:39:18.757

您可能太迟发送重定向标头（在呈现页面之后）。

看看这个：[http ://shibashake.com/wordpress-theme/wordpress-page-redirect](http://shibashake.com/wordpress-theme/wordpress-page-redirect)

如果您不能及早获得 header() 或 wp_redirect()，您可以尝试发出 javascript 重定向。

# input - 播放框架选择输入验证

> ID：15104905
> 
> 赞同：0
> 
> 时间：2013-02-27T05:33:00.833
> 
> 标签：input, playframework, playframework-2.1

我正在使用 Play 2.1 我使用辅助字段构造函数制作了一个选择下拉框。下拉框有 3 个字段，默认：“选择性别”、男性和女性。如何确保用户选择男性或女性之一，而不是默认值？（必填下拉字段）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:40:34.750

我正在使用**Play!Framework 2.1.0**，以下是您问题的简单解决方案：

**模型**应该是这样的：（下面是您问题的简单模型）

```
package models;

import play.data.validation.Constraints;

public class Gender {
   // This field must have a value (not null or not an empty string)
   @Constraints.Required
   public String gender;
} 
```

**控制器**应该是这样的：

```
/** Render form with select input **/
public static Result selectInput() {
   Form<Gender> genderForm = Form.form(Gender.class);

   return ok(views.html.validselect.render(genderForm));
}

/** Handle form submit **/
public static Result validateSelectInput() {
   Form<Gender> genderForm = Form.form(Gender.class).bindFromRequest();

   if (genderForm.hasErrors()) { // check validity
      return ok("Gender must be filled!"); // can be bad request or error, etc.
   } else {
      return ok("Input is valid"); // success validating input
   }
} 
```

**模板/视图**应该是这样的：

```
@(genderForm: Form[models.Gender])
@import views.html.helper._

@main(title = "Validate Select") {
   @form(action = routes.Application.validateSelectInput()) {
      @********** The default value for select input should be "" as a value *********@
      @select(
         field = genderForm("gender"),
         options = options("" -> "Select Gender", "M" -> "Male", "F" -> "Female")
      )

      <input type="submit" value="Post">
   }
} 
```

另请参阅这篇文章作为参考：[在 Play Framework 2.0 模板中使用选项助手](https://stackoverflow.com/questions/10127156/use-of-option-helper-in-play-framework-2-0-templates)

# css - 如何为您的应用添加固定导航栏

> ID：15104908
> 
> 赞同：0
> 
> 时间：2013-02-27T05:33:13.490
> 
> 标签：css, css-position

与您在此处看到的类似：http: [//jsfiddle.net/U8HGz/493/show/](http://jsfiddle.net/U8HGz/493/show/)

我`{position: fixed}`在css中尝试过无济于事。看来我的引导程序非常顽固！

### 我的 CSS 文件的一部分

```
@import "bootstrap";

.navbar navbar-inverse navbar-static-top { position: absolute!important;
    position: fixed;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T07:18:31.973

不确定您的最新代码现在是什么样子，但请尝试将其更新为以下任一：

将 left 和 right 属性设置为 0：

```
.navbar.navbar-inverse.navbar-static-top {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
} 
```

或者你可以给你的规则一个宽度：

```
.navbar.navbar-inverse.navbar-static-top {
    position: fixed;
    top: 0;
    width: 100%;
} 
```

看一个例子：http: [//jsfiddle.net/uberrobert/s7u8K/](http://jsfiddle.net/uberrobert/s7u8K/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T05:37:56.963

老兄，您没有指定`top`or的值`bottom`。也删除`position: absolute;`。

你的类声明是错误的，替换：

```
.navbar navbar-inverse navbar-static-top 
```

和：

```
.navbar.navbar-inverse.navbar-static-top 
```

你不应该给空格。

做这个：

```
.navbar.navbar-inverse.navbar-static-top {
    position: fixed;
    top: 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T05:39:41.090

固定定位结合绝对定位 WITH !IMPORTANT 显然会导致绝对定位被应用于固定。选择其中之一（无需添加[`!important`](http://coding.smashingmagazine.com/2010/11/02/the-important-css-declaration-how-and-when-to-use-it/)）

```
### Updated
@import "bootstrap";

.navbar .navbar-inverse .navbar-static-top {
    position: fixed;
} 
```

# codeigniter - 社交网站，Joomla 与社交网络的 codeigniter

> ID：15104909
> 
> 赞同：1
> 
> 时间：2013-02-27T05:33:27.230
> 
> 标签：codeigniter, joomla, social

我一直在构建一个社交网站，我在是否应该使用 joomla 还是使用 code-igniter 从头开始​​构建它之间陷入困境？我有一些将 joomla 作为 CMS 的经验，虽然它对于制作一个普通的网站非常好，但似乎很难实现一个完整的社交网络。对于社交网络，我说的是 Facebook 之类的东西，但网站所有部分之间的连接性更强，包括显示内容的网站的正常部分等。我也知道一些 PHP 并且对代码点火器有一点经验，只是实现所有东西需要更长的时间，而不是仅仅扩展 Joomla 以满足我的需要。我也尝试过 Community builder，但它并没有做我想要的，因此需要更多的添加和修改。

好吧，如果您对什么可能会更好或您会做什么有任何想法，那么感谢您的意见。

注意：有没有办法让 codeigniter 模板像 joomlas 模板系统一样工作，因为我真的很喜欢 joomlas 模板系统，你可以在其中输入模块的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T05:41:27.180

好吧，这取决于您要构建应用程序的规模，如果您正在计划数百万用户，那么 Codeigniter 是一个更好的选择，因为它可以让您更好地控制您的代码。（前提是你对 View、Controller 和 Model 有正确的理解）。

使用 codeigniter，您将能够更好地定制您的网站，每个角落和角落，与 Jhoomla 相比，它占用的服务器资源也更少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T06:10:19.153

Codeigniter 和 Joomla 是两个不同的东西。两者都旨在满足不同水平的编程能力。

我不会试图强迫 CMS 做一些它从未设计过的事情。此外，还有一些很好的库可以使 Codeigniter 与 Facebook、Twitter 等的集成相当容易。但是你真的需要知道你在做什么。如果您不熟悉 MVC 方法，您将面临陡峭的学习曲线。这么一说，还是很值得的。一旦您掌握了 MVC，您的生产力就会飞速发展（与例如标准 PHP 脚本方法相比）。

就个人而言，我会使用[Zend 来做](http://www.zend.com/en/)这样的事情。但是你真的有一个陡峭的学习曲线。：/

# objective-c - CLang 编译失败

> ID：15104912
> 
> 赞同：1
> 
> 时间：2013-02-27T05:33:54.797
> 
> 标签：objective-c, cocoa, clang

我在编译 main.m (Objective-C) 时遇到了以下错误我正在使用 makefile 来构建这个文件。

```
/Volumes/Xcode/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch x86_64 -Wall -DDEBUG=1 -g -o main.o main.m -mmacosx-version-min=10.8 -F/Volumes/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/System/Library/Frameworks/

In file included from main.m:9:
In file

 included from /System/Library/Frameworks/Cocoa.framework/Headers/Cocoa.h:12:
    In file included from /System/Library/Frameworks/Foundation.framework/Headers/Foundation.h:138:
    In file included from /System/Library/Frameworks/Foundation.framework/Headers/NSAppleEventDescriptor.h:7:
    /System/Library/Frameworks/ApplicationServices.framework/Headers/ApplicationServices.h:64:10: fatal error: 
          'ImageIO/ImageIO.h' file not found
    #include <ImageIO/ImageIO.h>
             ^
    1 error generated.
    make: *** [main.o] Error 1 
```

我不知道为什么`ImageIO/ImageIO.h`找不到。这背后的原因是什么？此外，我想知道如何让 Clang 查看 /Volumes/Xcode.app/Contents/Developer/ 中存在的框架**（在选项 -F 中指定）**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:30:24.510

听起来您正在尝试从命令行针对 OS X 10.8 SDK 进行构建。您所追求的编译器调用将如下所示：

```
xcrun clang -arch x86_64 -Wall -DDEBUG=1 -g -o main.o main.m -mmacosx-version-min=10.8 -isysroot $(xcodebuild -version -sdk macosx10.8 Path) 
```

`-isysroot`参数`clang`告诉它将给定路径作为系统的根，相对于默认标题和框架搜索路径。

# ios - 添加谷歌地图以查看时发出信号 SIGABRT 错误

> ID：15104917
> 
> 赞同：1
> 
> 时间：2013-02-27T05:34:30.447
> 
> 标签：ios, google-maps-sdk-ios

我按照谷歌地图 ios sdk 网站上的文档将谷歌地图添加到视图控制器。由于我之前将情节提要用于要添加地图的视图控制器，因此我没有使用`-(void)loadView`示例代码中的方法，而是以编程方式在方法中添加地图视图`viewDidLoad`。

```
-(void)viewDidLoad
{
    //some implementation before add google maps 
    gMapView = [[GMSMapView alloc]initWithFrame:CGRectMake(0,0,320,320)];
    gMapView.camera = [GMSCameraPosition cameraWithLatitude:1.285 longitude:103.848 zoom:12];
    [self.view addSubView:gMapView];
} 
```

但是当我单步执行代码时，出现信号`SIGABRT`错误

```
gMapView = [[GMSMapView alloc]initWithFrame:CGRectMake(0,0,320,320)]; 
```

没有来自调试区域的更多细节。以前，如果我收到信号`SIGABRT`错误，调试区域会显示一些日志帮助我找到错误，但这次什么都没有，所以我真的不知道这条线出了什么问题。

感谢阅读，任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:29:15.637

您不应该使用它`initWithFrame`来分配地图视图。相反，您应该使用`mapWithFrame`，如此处的示例代码[所示](https://developers.google.com/maps/documentation/ios/start#add_a_map)：

```
GMSCameraPosition* camera = [GMSCameraPosition cameraWithLatitude:1.285 longitude:103.848 zoom:12];
gMapView = [[GMSMapView alloc] mapWithFrame:CGRectMake(0,0,320,320) camera:camera]; 
```

# maven - 如何构建我自己的 Jetty 发行版

> ID：15104921
> 
> 赞同：0
> 
> 时间：2013-02-27T05:34:57.450
> 
> 标签：maven, jetty

我需要使用自定义的 xml 和 jar 文件构建自己的 Jetty 发行版。我使用来自网站的 pom.xml：[http](http://repo1.maven.org/maven2/org/eclipse/jetty/aggregate/jetty-all/8.1.9.v20130131/) ://repo1.maven.org/maven2/org/eclipse/jetty/aggregate/jetty-all/8.1.9.v20130131/ 。

我使用 mvn install 构建目标。在生成的 jar 文件中，所有 Java 代码都编译为 .class，但没有 start.jar、start.ini 等 lib 目录。我做错什么了？正确的程序是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T09:16:26.717

那是因为 jetty-all 只包含已编译的类文件。

您可能想要构建的是整个码头，然后从 jetty-distribution/target/ 获取您的分布。

# c# - 如何在 C#(3.0) 中从 wpf 窗口导航到 wpf 页面？

> ID：15104923
> 
> 赞同：3
> 
> 时间：2013-02-27T05:35:03.450
> 
> 标签：c#, wpf

嘿，我从过去 3 天开始就被困在这里并尝试了各种可能性，我有一个名为 wpf 的窗口，`'Mainwindow.xaml'`我想导航一个名为在后台`'addNewTech.xaml'`保持`'Manwindow.xaml'`打开的 wpf 页面，请帮帮我.. 谢谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T05:41:41.687

第一的。在主窗口中添加`Frame`。

例如：

使用这个命名空间`xmlns:local="clr-namespace:System.Windows.Controls;assembly=PresentationFramework"`

```
<Grid>
   <local:Frame Name="MainFrame" NavigationUIVisibility="Hidden" >                            
   </local:Frame>
</Grid> 
```

调用`AddNewTech`以`MainWindow.cs`将页面加载到 MainWindow。

```
MainFrame.Navigate(new Uri("addNewTech.xaml",UriKind.Relative)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T05:40:27.727

```
 NavigationService navService = NavigationService
 .GetNavigationService(this) 

navService.Navigate =  (new
 System.Uri("Page2.xaml",UriKind.RelativeOrAbsolute); 
```

**或者**

```
 Page2 nextPage = new Page2();

 navService.Navigate(nextPage); 
```

**或者**

```
 Page2 page2Obj = new Page2(); //Create object of Page2

 page2Obj.Show(); //Show page2 this.Close(); //this will close Page1 
```

# vb.net - Picturebox 掷骰子（让图片滚动看起来像是掷骰子）？

> ID：15104925
> 
> 赞同：0
> 
> 时间：2013-02-27T05:35:18.580
> 
> 标签：vb.net

我有一个计时器，它在数字 1-6 之间滚动并落在随机数字上。问题是我有一个图片框，我需要这样做。我有骰子图像，但我不知道如何滚动所有骰子图像以匹配我下面的代码。我想让他们两个都跑，所以他们匹配。我完全被困住了！！

```
 Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
        m = m + 10
        If m < 1000 Then
            n = Int(1 + Rnd() * 6)
            LblDice.Text = n

        Else
            Timer1.Enabled = False
            m = 0
        End If

    End Sub

    Private Sub RollDiceBtn_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles RollDiceBtn.Click
        Timer1.Enabled = True

        DisplayDie(die1PictureBox)

    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:01:02.033

我不知道这是否是最好的解决方案，但您可以按照您想要的顺序将“滚动图像”放入 imageList 中。然后使用 TimerTick 内的计数器，您可以在 imageList 中显示下一个图像。

我在电子邮件中找到了这段代码：

```
 Private Sub Timer1_Tick(sender As System.Object, e As System.EventArgs) Handles Timer1.Tick
    If ticks < 11 Then 'I got 11 images
        PictureBox1.BackgroundImage = ImageList1.Images(ticks)
        ticks += 1
    Else
        ticks = 0
        PictureBox1.BackgroundImage = ImageList1.Images(ticks)
        ticks += 1
    End If
End Sub 
```

评论后：您将一个 imageList 添加到您的表单中。您正在为 imageList(size, depth) 中的图像设置属性。在您的 imageList 中，您为骰子添加 6 个图像。然后添加以下代码：

```
 Private Sub Timer1_Tick(sender As System.Object, e As System.EventArgs) Handles Timer1.Tick
    m = m + 1 
    If m < 10 Then 'How many ticks (rolls) do you like
        n = Int(1 + Rnd() * 6)
        Label1.Text = n 'The labels is showing your random number (dice number)
        PictureBox1.Image = ImageList1.Images(n - 1) 'This is showing the dice image to the pictureBox:the same as the number
        'I use n-1 because imageList is zero based.
        'Important: my images are in the right order 1,2,3,4,5,6 in the imageList
    Else
        Timer1.Enabled = False
        m = 0
    End If
End Sub

Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    Timer1.Enabled = True
End Sub 
```

# c - 嵌入式：u-boot 终端中用于 Ctrl-C 中断的 C 编码

> ID：15104929
> 
> 赞同：6
> 
> 时间：2013-02-27T05:35:41.537
> 
> 标签：c, embedded, arm, interrupt, u-boot

我是嵌入式编程的初学者。我正在研究起重机板（ARM Cortex A8）。源代码可在[github](https://github.com/craneboard/craneboard-uboot)获得。

我创建了一个 C 代码来使通过 GPIO 连接的外部 LED 闪烁。它可以在 u-boot 控制台中作为命令执行。目前，

我无法通过 Ctrl-C 停止 LED 的闪烁。
Ctrl-C 中断的编码在哪里？

```
ret=set_mmc_mux();
if(ret<0)
    printf("\n\nLED failed to glow!\n\n");
else{
        if(!omap_request_gpio(lpin))
    {
        omap_set_gpio_direction(lpin,0);

        for(i=1;i<21;i++)
        {
            ctr=0;
            if((i%2)==0)
            {
                num=num-1;
                omap_set_gpio_dataout(lpin,num);
            }
            else
            {
                num=num+1;
                omap_set_gpio_dataout(lpin,num);
            }

                    udelay(3000000);
             }

        }
} 
```

请指导我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T08:14:07.090

试试 uboot`ctrlc`功能：

```
if(ctrlc())
    return 1; // or whatever else you want to do 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T10:56:00.753

您在低级别工作，因此您需要使用的方法也是低级别的：

*   检查循环中的 UART“数据可用”标志 - 这非常依赖于硬件，但通常涉及读取寄存器、屏蔽一些位并查看是否设置了正确的位。
*   如果数据可用，检查它是否是 CTRL-C ( `0x03`) 字符，如果是则退出，如果不是则丢弃

* * *

现在看到了 nneonneo 的答案，我认为这就是`ctrlc()`函数的作用......

# java - 如何部分提交表单？

> ID：15104931
> 
> 赞同：2
> 
> 时间：2013-02-27T05:36:02.047
> 
> 标签：java, jquery, jsp, jakarta-ee, struts2

我有一个包含许多不同字段的表单，此表单的字段与两个表相关联，一旦提交表单，我应该怎么做才能只更新受影响的表？

表凭证

```
ID
username
password
question
answer 
```

表用户

```
 ID
    name
    surname
    age
    CredentialID 
```

假设用户只是更新他/她的名字。提交表单后，我只需要更新用户表的名称字段，而不是凭据表的任何字段，因为它的关联字段尚未更改。我知道一种方法是使用类检查提交的值还有其他选择吗？我不想更新所有值以提高性能并降低数据库成本的原因。此外，有什么方法可以在客户端进行比较？我正在使用 prepareStatement 来更新数据库。

班级

```
 public class User{
      ID
      CredentialID
      name
      surname
      age
      username
      password
      question
      answer
  } 
```

形式

```
 <s:form action="register" method="POST">
   ... name
   surname
   age
   username
   password
   question
   answer ...
 </s:form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T06:12:10.913

> 我知道一种方法是使用类检查提交的值还有其他选择吗？

对我来说，您似乎知道您可以通过将类的所有新变量与旧变量进行比较来在服务器端检查这一点，但是您希望有一种更快且更少资源密集型的方式。

因此，我如何实现这一点的基本想法是客户端（浏览器）需要检查“组”（凭据或用户）的值是否已更改并将此信息提交给服务器。我不确定使用 Struts 时的 HTML 标记，但基本上它看起来像这样：

```
<form>
   <!-- credential fields -->
   <input type="text" name="username" id="username" onchange="credentialChanged()"/>
   <input type="text" name="question" id="question" onchange="credentialChanged()" />
   ...
   <!-- indicates the server if credential fields have changed -->
   <input type="hidden" name="credential-changed" 
          id="credential-changed" value="false" />

   <!-- uer fields -->
   <input type="text" name="name" id="name" onchange="userChanged()"/>
   <input type="text" name="surname" id="surname" onchange="userChanged()"/>
   ...
   <!-- indicates the server if user fields have changed -->
   <input type="hidden" name="user-changed" 
          id="user-changed" value="false" />
</form> 
```

然后您使用 javascript 函数`credentialChanged()`并`userChanged()`更新隐藏字段：

```
function credentialChanged(){
  document.getElementById("credential-changed").value = "true";
}

function userChanged(){
  document.getElementById("user-changed").value = "true";
} 
```

在服务器端，您可以获取隐藏字段的值并了解这些值是否已更改。

*注意*：如果用户将字段的值从“UserXYZ”更改为“UserABC”，然后将其更改回“UserXYZ”，则相应隐藏字段的值将设置为 true。您将不得不添加额外的 Javascript 来比较客户端的新旧值，但这个想法应该很清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T05:50:07.613

您有以下选择：

1.  维护一个包含与文本字段相同的值的隐藏字段，并在提交表单时将文本框值与隐藏值进行比较，并相应地更新表，即如果输入的用户名与隐藏的用户名值不匹配，则仅更改该凭据表.

2.  如果是像更新用户信息这样的表单，那么最好将每个单独的字段设置在单独的表单中。

# sqlite - 如何对sqlite中的所有表使用一个序列

> ID：15104932
> 
> 赞同：5
> 
> 时间：2013-02-27T05:36:02.483
> 
> 标签：sqlite, sequence

当我在 SQLite 数据库中创建表时，会自动为每个表创建单独的序列。

但是，我想为我的 SQLite 数据库中的所有表使用一个序列，并且还需要设置该序列`min`的`max`值（例如`min=10000`和`max=999999`）（`min`并且`max`表示序列的起始值和序列可以增加的最大值）。

我知道这可以在 Oracle 数据库中完成，但不知道如何在 SQLite 中完成。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T09:52:12.430

不幸的是，您不能这样做：SQLite 会自动为特殊`sqlite_sequence`服务表中的每个表创建序列。

即使您以某种方式强制它将单个序列作为所有表的源，它也不会按您期望的方式工作。例如，在 PostgreSQL 或 Oracle 中，如果您将 sequence 设置为 value say`1`但表已经填充了 values `1`, `2`,... 的行，则任何使用该序列作为源插入新行的尝试都会因违反唯一约束而失败。

但是，在 SQLite 中，如果您使用以下方式手动重置序列：

```
UPDATE sqlite_sequence SET seq = 1 WHERE name = 'mytable' 
```

并且您已经有 rows `1`, `2`, `3`,...，新的插入尝试不会失败，但会自动将此序列分配给适当的自动增量列的最大现有值，因此它可以继续上升。

请注意，您可以使用此 hack 为序列分配起始值，但是您不能让它在某个值处停止递增（除非您使用其他方式观看它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-28T14:05:51.367

首先，这是一个坏主意。

数据库查询的性能取决于可预测性，并且通过摆弄索引序列，您将引入偏移量，这将使数据库引擎感到困惑。

但是，要实现这一点，您可以尝试确定高于或等于任何现有序列号的最低序列号：

```
SELECT MAX(seq) FROM sqlite_sequence 
```

这需要在每个 INSERT 查询之后完成，然后更新所有表的所有序列：

```
UPDATE sqlite_sequence SET seq=determined_max 
```

# php - 限制作者仅查看和编辑他们在 PHP 中创建的帖子（我没有使用 WordPress）

> ID：15104936
> 
> 赞同：0
> 
> 时间：2013-02-27T05:36:21.523
> 
> 标签：php, mysql

我试过这个查询：

```
GRANT SELECT,INSERT ON $mydb.*
    TO '$username'@'localhost' IDENTIFIED BY '$username'" 
```

它在 phpMyAdmin 中授予`select`并`insert`在 phpMyAdmin 中完美运行（如我所愿）。

但是当我使用这个用户名登录到我的 PHP 站点时，我可以编辑或删除所有帖子，并且我也想在 PHP 站点中限制这个用户。

我是初学者，所以任何人都可以告诉我如何在 PHP 中实现这一点吗？

我希望特定作者仅创建新帖子、编辑或删除他的帖子。

谢谢，如果我听起来令人困惑或不完整，我很抱歉。

* * *

感谢您的快速回复。

我已经为以下用户创建了一个表：

```
userid | username | pass | role | etc 
```

在这里我可以`role`从表中得到`roles`：

```
roleid | role 
```

现在，我需要帮助：

现在，根据该`role`设置条件，哪个用户可以添加帖子，哪个用户可以删除帖子，以及哪个用户可以编辑帖子？

任何代码示例或示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T05:44:00.150

您应该始终在 php.ini 的用户管理类中拥有用户访问权限。

将您的用户访问权限存储在您的数据库中，始终检查您的用户是否有权执行正确的操作。

对于简单的用户访问类，您可以在您的数据库中将“编辑”用户访问权限设置为“编辑”。每当此用户尝试删除帖子时，请检查他是否具有访问权限。如果不是，例如，您可以重定向他或告诉他他没有访问权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T05:44:39.377

```
GRANT SELECT,INSERT ON $mydb.*
            TO '$username'@'localhost' IDENTIFIED BY '$username'" 
```

您上面的查询所做的只是向某些用户授予访问数据库的权限，`$username`与编辑帖子和删除帖子无关。

为了实现你的愿望，你需要做的是。

创建具有所需表的数据库，其中包含一个管理用户身份验证的角色表。

现在从该角色设置条件，哪个用户可以添加帖子，哪个用户可以删除帖子，哪个用户可以编辑帖子等等..

# jmeter - 聚合报告中的吞吐量值

> ID：15104946
> 
> 赞同：0
> 
> 时间：2013-02-27T05:37:11.657
> 
> 标签：jmeter, load-testing, performance-testing, jmeter-plugins

我对汇总报告中捕获的结果几乎没有疑问。

“总计”行中的值显示什么？
它是如何投影的？
特别是当我们更多地关注 aggregate_report_rate (QPS) 字段时，“Total”行中的 aggregate_report_rate 的值是否计算出准确的 QPS？
这个值是我们需要说的确切 QPS 的全部内容吗？

有人可以澄清一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:32:26.367

聚合报告在聚合报告速率列中显示每秒事务数 (TPS)。对于单个 HTTP 请求名称，它会显示该 HTTP 请求本身的 TPS。总行显示测试计划中包含的所有 HTTP 请求的总体 TPS。

因此，所有行显示整个测试期间的平均 TPS，总行显示测试计划的整体 TPS。

# racket - 球拍正则表达式/字符串替换

> ID：15104949
> 
> 赞同：0
> 
> 时间：2013-02-27T05:37:22.973
> 
> 标签：racket

drracket 中是否有内置函数允许我检查字符串中是否包含特定数据？

例如，我想为其中包含字母“a”的任何字符串返回结果“true”。

“命运”-> 真 “命运”-> 假

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:54:44.993

Racket 包含一个正则表达式包。你可以使用

```
(regexp-match <pattern> <input>) 
```

可能有`substring?`可用的实现，例如在 SRFI-13 中。

# java - 用于测试的 SSH 服务器

> ID：15104956
> 
> 赞同：-1
> 
> 时间：2013-02-27T05:37:44.540
> 
> 标签：java, testing, ssh, jsch

我正在编写一个 Java 代码来使用 JSch 连接到 SSH 服务器。

我已经编写了代码，现在必须对其进行测试。但我不允许在生产服务器中进行测试。

他们的任何 SSH 服务器也是如此，因此我可以连接到它以检查我的代码。我不想在任何网站上为 SSH 帐户创建任何帐户。请建议我任何现成的 SSH 服务器，可以使用用户名、密码、端口等进行测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T05:44:48.937

## 虚拟化

我建议将[vagrant](http://vagrantup.com)设置为开发/测试虚拟机。这将提供一致的测试环境，您可以尝试使用各种配置方案尽可能地镜像生产。

Vagrant 将检测 virtualbox，您可以选择基础镜像（ubuntu、centos 等）。任何 linux VM 都将提供 SSH 服务器。

从 vagrantup.com 一旦 vagrant （和 virtualbox 安装）：

```
vagrant box add lucid32 http://files.vagrantup.com/lucid32.box
vagrant init lucid32
vagrant up 
```

此时，您将在 localhost:2222 运行 ssh 服务器

此命令将使您进入该框：

```
vagrant ssh 
```

从那里您可以添加帐户并进行测试。主机当前目录中的任何文件都将挂载在 /vagrant/ （您的源文件等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T05:42:49.993

您需要有一个实际的服务器才能登录。您需要一个带有用户名、密码/密钥等的 ssh 帐户。您可以在自己的计算机 (localhost) 上进行操作。我怀疑您是否会通过在线提供的任何 SSH 模拟器获得真正的 SSH 体验（这就是我猜你之后的...）。如果您只是询问某人是否有一些随机服务器，您可以在上面练习您的 SSH 技能，那么您可能也找不到。

如果您不想通过 ssh 连接到您自己的计算机并且没有其他机器可以测试，您可以使用 AWS EC2 或机架空间云或几乎任何云计算提供商来创建廉价的虚拟服务器。 .

# c# - 更新面板总是发布整个页面

> ID：15104959
> 
> 赞同：0
> 
> 时间：2013-02-27T05:38:00.063
> 
> 标签：c#, asp.net

问题，我没有获得部分页面发布页面，而是获得整页重新加载，然后在按钮单击时获得表内的下 4 行。知道为什么我没有获得 Ajax 功能。

我在内容页面工作。

```
<div>
          <asp:ScriptManager ID="ScriptManager1" runat="server">
          </asp:ScriptManager>
           <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional" >
          <ContentTemplate>
          <table width="100%" border="0" cellspacing="0" cellpadding="0">
          <tr>
            <th width="35%">Last Degree</th>
            <th width="35%">Institute</th>
            <th width="20%">Year</th>
            <th width="30%">Majors</th>
          </tr>
          <tr id="rowFields">
            <td>
                <asp:TextBox runat="server" ID="txtDegree" type="text" onblur="if(this.value=='' || this.value==null) this.value=''" 
                onfocus="if(this.value==''){this.value='';}" placeholder="Last Degree*" size="35" />
            </td>
            <td>
                <asp:TextBox runat="server" ID="txtInstitue" type="text" onblur="if(this.value=='' || this.value==null) this.value=''" 
                onfocus="if(this.value==''){this.value='';}" placeholder="Institute*" size="35" />
            </td>
            <td>
                <asp:TextBox runat="server" ID="txtYear"  onblur="if(this.value=='' || this.value==null) this.value=''" 
                onfocus="if(this.value==''){this.value='';}" Placeholder="Year*" size="12" />
            </td>
             <td>
                <asp:TextBox runat="server" ID="txtSubjects"  onblur="if(this.value=='' || this.value==null) this.value=''" 
                onfocus="if(this.value==''){this.value='';}" placeholder="Subjects*" size="35" />
            </td>                
          </tr>            
            <tr>          
            <td>
            <asp:PlaceHolder ID="PlaceHolderEdu" runat="server"></asp:PlaceHolder>
            </td>
            <td>
            <asp:PlaceHolder ID="PlaceHolderEdu2" runat="server"></asp:PlaceHolder>
            </td>
            <td>
             <asp:PlaceHolder ID="PlaceHolderEdu3" runat="server"></asp:PlaceHolder>
            </td>
            <td>
                <asp:PlaceHolder ID="PlaceholderEdu4" runat="server"></asp:PlaceHolder>
            </td>         
          </tr>   
          </table>                                    
          </ContentTemplate>

              <Triggers>
                  <asp:AsyncPostBackTrigger ControlID="addmoreEdu" EventName="Click" />
              </Triggers>

          </asp:UpdatePanel>             

             <asp:LinkButton ID="addmoreEdu" runat="server" CssClass="linkbutton" 
                  onclick="addmoreEdu_Click" CausesValidation="False">Add More</asp:LinkButton>  
          </div> 
```

# c# - PerSession 与 PerCall

> ID：15104960
> 
> 赞同：6
> 
> 时间：2013-02-27T05:38:06.140
> 
> 标签：c#, .net, performance, wcf

决定使用 PerSession 还是 PerCall 的一般经验法则是什么？

我有一个稍微重（我认为..）的 WCF 服务，其中包含大约 80 个表的 CRUD 方法。

我已将 WCF 服务分为 1 项服务中的 7 个合同（即 1 项服务中的 7 个端点），以便每个合同都处理自己的域，例如我有一个销售合同，因此所有与销售相关的表及其相应的操作在销售“有界上下文”内

所以我的 WCF 服务结构看起来像这样：

```
public partial class ABCService : ISalesService
{
   //CRUD methods of all tables related to Sales
}

public partial class ABCService : IMarketingService
{
    //CRUD methods of all tables related to Marketing
}

public partial class ABCService : ICustomerService
{
    //CRUD methods of all tables related to Customer
}

public partial class ABCService : IProductService
{
    //CRUD methods of all tables related to Products
} 
```

我对 PerCall 的担忧是，因为我有一个相当大的 DB/WCF 服务，我担心每次调用所消耗的资源量乘以用户数量和他们调用服务的速率，将是太棒了。

我不知道细节，但我读过创建通道代理是昂贵的操作。

哦，我使用手动编码的代理而不是 VS 的添加服务引用来使用我的 WCF 服务。

所以，我的问题是，我应该使用哪个？PerSession 还是 PerCall？

**更新：**

1.  我不需要在通话之间维护状态。
2.  我正在使用 NetTCP 绑定

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-27T06:24:37.203

在我看来，做决定要考虑这两点

1.  用于`InstanceContextMode.PerSession`- 如果您的用户在服务器上的 WCF 服务上存储了一些会话值。
2.  用于`InstanceContextMode.PerCall`- 如果您的用户在服务器上的 WCF 服务的会话中没有存储任何内容，即 WCF 服务需要没有存储在内存中的每个用户设置。需要可扩展性。

*关于When-And-Why的*一些要点，

## InstanceContextMode.PerCall

*   如果您的服务是无状态且可扩展的，即好处类似于 HTTP，因为它也是无状态的。
*   如果服务具有轻量级初始化代码（或根本没有）。
*   如果您的服务是单线程的。
*   **示例场景：**对于给定时间段内的任何 1000 个客户端请求，对于 100 个**活动**调用`PerCall`，将只有 100 个对象实例化。其次，如果服务器崩溃，那么在这种情况下，唯一会发生的错误将是正在进行的 100 个实际请求（假设快速故障转移）。其他 900 个客户端可以在下次调用时被路由到另一台服务器。**`PerCall`**

 **## InstanceContextMode.PerSession

*   如果您的服务必须在来自同一客户端的调用之间保持某种状态。
*   如果您的服务具有轻量级初始化代码（或根本没有）。即使您只为每个客户端代理获取一个新实例，您仍然需要小心在构造函数中包含昂贵的初始化代码。
*   **示例场景：**对于给定时间段内的任何 1000 个客户端请求，`PerSession`您可能在服务器上实例化了 1000 个对象，但在任何时候实际上只有 100 个对象在调用中处于**活动状态。**因此，实例化`PerSession`的对象可能会浪费资源，并且可能会影响在负载下服务请求的能力。其次，如果服务器崩溃，那么在`PerSession`该服务器上有会话的所有 1000 个客户端都将丢失会话并且无法完成他们的工作。

*参考链接：*

1.  [MSDN - WCF 实例化、并发和限制](http://blogs.msdn.com/b/rickrain/archive/2009/06/15/wcf-instancing-concurrency-and-throttling-part-1.aspx)
2.  [SO - 每个呼叫与每个会话](https://stackoverflow.com/a/2542991/468718)
3.  [MSDN - 在 WCF 上下文中使用会话](http://msdn.microsoft.com/en-us/library/ms733040.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T05:55:31.593

您在网上看不到此类问题的很多答案的原因是它取决于。我要做的是尝试一下——然后在您托管服务的服务器上打开 perfmon 并为您的服务添加计数器。如果您不熟悉，只需 google wcf 性能管理器计数器。

好消息是 WCF 使更改设置变得非常容易。

如果您关心在客户端实例化代理的成本，请记住 perCall 是一种服务行为，而不是客户端行为。即使您将服务实例上下文设置为 PerCall，您仍然可以创建代理的一个实例并从该代理进行一堆方法调用。所有 perCall 的意思是，当您进行调用时，会创建一个服务实例，调用您的方法，然后再次拆除该服务实例。如果您没有对服务实例进行任何昂贵的初始化（即，如果它们基本上是静态方法），那么每次调用都可以。**

# python - Install Python Package without Sudo/Root Priveledges but Dependencies use System lib folder

> ID：15104964
> 
> 赞同：1
> 
> 时间：2013-02-27T05:38:16.340
> 
> 标签：python, numpy, installation

My question is similar to [How to install python packages without root privileges?](https://stackoverflow.com/questions/14179941/how-to-install-python-packages-without-root-privileges), but I'm wondering if I need to install *all* the dependencies locally, or when I install a new package can tell the installer to use the globally installed packages when available?

I am working on a remote computer (unix machine) in which i don't have sudo/root priveledges. The remote already has Python and scientific libraries like Numpy and Scipy. But I've been having trouble installing a new python package.

This is a problem when i run

```
python setup.py install 
```

because I don't have access to the lib folder. I know that I can install them locally using the command

```
python setup.py --user 
```

but this creates another problem. It will install the package to /.local in my home directory *but when the package has dependencies that are already globally installed in the root folders (things already installed globally, like in my case, numpy and scipy) it doesn't notice them and proceeds to install a new copy of them in the /.local directly.*

How can I install a new package locally, but tell setup.py to look for dependent libraries and packages in the system root's lib folder?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T05:42:14.953

**virtualenv** is for you

```
virtualenv --system-site-packages 
```

this will allow you using the global python package.

your own project will not need to install numpy or scipy

# sql - 如何只检查日期时间字段上的时间而忽略日期？

> ID：15104968
> 
> 赞同：12
> 
> 时间：2013-02-27T05:38:36.047
> 
> 标签：sql, sql-server-2008, tsql

我有一列以日期时间格式存储数据。我想检查此列的时间部分不等于 00:00:00:000 的所有实例 - 日期无关紧要。

基本上，如果 time() 是一个函数，就像这样：

```
SELECT  *
FROM    progen.DY
WHERE   TIME(DY_DATE) <> '00:00:00:000' 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-27T06:26:01.233

您只需要对已有的内容进行细微调整。

```
SELECT  *
FROM    progen.DY
WHERE   TIME(DY_DATE) <> '00:00:00:000' 
```

使用[CONVERT](http://msdn.microsoft.com/en-us/library/ms187928.aspx)将您的更改`DATETIME`为`TIME`.

```
SELECT  *
FROM    progen.DY
WHERE   CONVERT(TIME, DY_DATE) <> '00:00:00:000' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T05:46:41.030

使用[`DATEDIFF`](http://msdn.microsoft.com/en-US/library/ms189794%28v=SQL.105%29.aspx)and[`DATEADD`](http://msdn.microsoft.com/en-us/library/ms186819%28v=sql.105%29.aspx)来获取日期时间的日期部分。仅将该列与日期进行比较，它将返回那些具有非零时间的行。

它的工作方式是我们首先计算 epoch 和 value 之间的差异（以天为单位）。我们将该数字添加到纪元以创建新的日期时间。由于结果`DATEDIFF`是整数，因此任何时间分量都会被四舍五入。

```
SELECT *
FROM Table
WHERE DateColumn <> DATEADD(d, DATEDIFF(d, 0, DateColumn), 0) 
```

然后可以通过以下方式实现时间函数，而不是我推荐它用于这个特定场景：

```
SELECT DATEDIFF(minute, DATEADD(d, DATEDIFF(d, 0, DateColumn), 0), DateColumn) as MinutesIntoDay,
    -- or, if you require higher precision
    DATEDIFF(second, DATEADD(d, DATEDIFF(d, 0, DateColumn), 0), DateColumn) as MinutesIntoDay
FROM Table 
```

* * *

**编辑：**正如其他答案中提到的，您可以强制转换`DATE`以达到与 相同的效果`DATEADD(d, DATEDIFF(d, 0, DateColumn), 0)`，这可以很好地清理。但是，DATE 仅在 SQL Server 2008 中添加，而公式至少兼容 SQL 2000。因此，如果您需要向后兼容或正在处理 SQL CE，则无法转换为 DATE。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-27T05:52:11.490

另一种方法是将其转换为不同的数据类型，例如

```
SELECT  *
FROM    progen.DY
WHERE   CAST(DY_DATE as float) - CAST(DY_DATE as int) > 0 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/860ca/10)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-27T05:54:43.790

在尝试查看是否应将表的列转换为日期而不是日期时间时，我一直这样做，这确实是答案。

```
select *
from progen.dy
where cast(dy_date as Date) <> dy_date 
```

演员表删除了时间，而日期时间具有更高的优先级，因此在比较时，如果它们不相等，则它具有时间值。同样的事情可以通过时间转换来完成，但语法略有不同。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-27T05:48:53.937

```
SELECT * 
FROM progen.DY 
WHERE CONVERT(TIME, DY_DATE - CONVERT(DATE, DY_DATE)) > '00:00' 
```

# c++ - 为什么 << 运算符用 cout 截断字符？

> ID：15104970
> 
> 赞同：5
> 
> 时间：2013-02-27T05:39:06.333
> 
> 标签：c++, operators, cout

我在 while 循环中使用 std::getline 并使用 cout 打印输出，我发现在打印时我的行的开头被切断了：

按预期工作：

```
std::string line;
while(std::getline(csv, line)) {
 std::cout << line << std::endl
} 
```

没有按预期工作，将前两个字符从我的行中删除

```
std::string line;
while(std::getline(csv, line)) {
 std::cout << line << "  " << std::endl
} 
```

我以前从未注意到这种行为，为什么现在会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T07:11:10.140

这似乎正在发生：字符串
末尾的`line`字符包含`carriage return`字符。如果您的字符串是`Hello World`，则将其与回车一起打印会导致光标返回该`H`字符。这意味着当您在那之后开始打印任何内容时，它将覆盖您的旧字符串。
为避免这种情况，您可能需要先打印`endl`。

# php - 使用 WordPress 选项 API 保存短代码数组，然后在另一个函数中输出

> ID：15104974
> 
> 赞同：1
> 
> 时间：2013-02-27T05:39:26.030
> 
> 标签：php, arrays, wordpress, shortcode

**注意：虽然这可能是一个简单的修复，但我是使用数组的新手并且完全被难住了。**

我正在尝试通过 WordPress 中的选项 API 从简码数组中保存数据，然后调用该数组并使用该数据创建另一个数组以连接到插件的函数中。这是一个响应式滑块插件，我基本上是在尝试附加一个简码，这样我就可以在后端创建滑块并在前端显示它，简码如下所示：`[responsive_slider slider_name="imageslider"]`.

实现文档可以在[这里找到](http://halgatewood.com/flexslider-hg/)，这是我的代码：

```
function responsive_gallery_shortcode($atts, $content=null) {
    extract(shortcode_atts( array('slider_name' => 'product_page') , $atts));
    foreach ($slider_name as $value) {
        update_option('_unique_slider_name', $value );
    }
    if(function_exists('show_flexslider_rotator')) 
        echo show_flexslider_rotator( $slider_name );

    add_image_size( $slider_name , '550', '250', true );
}
add_shortcode('responsive_gallery', 'responsive_gallery_shortcode');        

if (!function_exists('custom_set_flexslider_hg_rotators')) {
    function custom_set_flexslider_hg_rotators() {
        $slider_name = get_option('_unique_slider_name');

        foreach ($slider_name as $value) { 
            $rotators = array();
            $rotators[ $value ] = array( 'size' => $value );    
            return $rotators;
        }   
    }  
} 
add_filter('flexslider_hg_rotators', 'custom_set_flexslider_hg_rotators', 9999); 
```

我在两个函数上都收到*“为 foreach() 提供的参数无效”*错误。`foreach`在我有两个简码的页面上，两个错误都出现了两次。看起来好像`$slider_name`是一个字符串而不是一个数组，但必须有一种方法将它保存在`update_option()`函数中，以便它返回一个数组。我对数组很陌生，我肯定在这里挣扎。我已经花了几个小时在这方面，并且已经在 WordPress 方面获得了一些帮助，但我不太明白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:38:12.330

由于短代码属性将作为字符串到达​​，您需要先将其转换为数组。

同时，由于它必须作为字符串传递，因此您需要使用分隔符来管理它。

对于所有这些，您将需要 PHP 函数[**`explode`**](http://www.php.net/manual/en/function.explode.php)。

```
$string = "one,two";
$array = explode( ',', $string );
var_dump( $array ); 
```

*结果是：*

```
array (size=2)
  0 => string 'one' (length=3)
  1 => string 'two' (length=3) 
```

和

```
$string = "one";
$array = explode( ',', $string );
var_dump( $array ); 
```

结果是：

```
array (size=1)
  0 => string 'one' (length=3) 
```

* * *

*PS：总是值得查阅 PHP 手册以及每个页面中的评论：[http ://www.php.net/manual/en/language.types.array.php](http://www.php.net/manual/en/language.types.array.php)*

* * *

**[更新]**
你的原代码有很多问题，查看这个修改版的评论：

```
function responsive_gallery_shortcode($atts, $content=null) {
    extract(shortcode_atts( array('slider_name' => 'product_page') , $atts));

    // Convert string into array
    // Using comma as separator when writing the shortcode in the post
    $array_slider = explode( ',', $slider_name );

    // YOU DON'T NEED A `foreach` HERE
    //foreach ($array_slider as $value) {
        update_option('_unique_slider_name', $array_slider );
    //}

    // I DON'T KNOW WHAT THIS FUNCTIONS DOES
    // But in any case, being $array_slider an array, maybe it should be inside a `foreach`
    if(function_exists('show_flexslider_rotator')) 
        echo show_flexslider_rotator( $array_slider );

    // THIS DOESN'T MAKE SENSE
    // You're not supposed to be adding images sizes at each Shortcode call
    // And you are dealing with an array
    add_image_size( $slider_name , '550', '250', true );
}
add_shortcode('responsive_gallery', 'responsive_gallery_shortcode');        

if (!function_exists('custom_set_flexslider_hg_rotators')) {
    function custom_set_flexslider_hg_rotators() {
        // The option was already saved as array, so we can work directly with it
        $slider_name = get_option('_unique_slider_name');

        // YOU DON'T WANT TO DECLARE THE VARIABLE AT EACH STEP OF THE LOOP
        $rotators = array();
        foreach ($slider_name as $value) { 
            $rotators[ $value ] = array( 'size' => $value );    
        }   
        // RETURN THE VALUE ONLY AFTER COMPLETING THE LOOP
        return $rotators;
    }  
    // PUT THE FILTER HOOK INSIDE if(!function_exists())
    add_filter('flexslider_hg_rotators', 'custom_set_flexslider_hg_rotators', 9999);
} 
```

# api - 将 jQuery JSONP 与 CloudFlare API 一起使用时出现同源策略错误

> ID：15104981
> 
> 赞同：1
> 
> 时间：2013-02-27T05:39:56.573
> 
> 标签：api, jquery, getjson, same-origin-policy

`(XMLHttpRequest cannot load https:// www.cloudflare.com/api_json.html?tkn=&email=&z=&a=rec_load_all&callback=%3F. Origin http:// domainmanager.tech-bytes.org is not allowed by Access-Control-Allow-Origin.)`尝试通过 jQuery 向 CloudFlare 发送 JSONP 请求时收到错误消息（由于 Stack Overflow 链接限制，URL 中插入了空格）。[CloudFlare API](http://www.cloudflare.com/docs/client-api.html)声明您可以通过附加*参数来**请求 JSONP 回调`&callback=mycallback`*。我不确定是否应该将 mycallback 替换为某些东西，我尝试将其替换为 ? 因为那是其他一些资源所说的，或者如果我必须对[我的代码](http://domainmanager.tech-bytes.org)做一些其他修改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:35:39.650

尝试以这种方式进行跨域请求。

```
 $.ajax({ url: "yourUrl",
    data:{paramName1: JSON.stringify(paramValue1),paramName2: JSON.stringify(paramValue2)},

        contentType: "application/json; charset=utf-8",
       dataType: "jsonp",
      success: function(data) {
          alert(data.d);
       },
       error: function(XMLHttpRequest, textStatus, errorThrown) {
           alert(textStatus);
       }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T09:19:20.040

为此，您可以使用 CORS。

示例代码：

```
jQuery.support.cors = true; 

function CrosDom_ajax(url) {
        if (window.XDomainRequest
        && $.browser.msie
        && $.browser.version < 10) {
        xdr = new XDomainRequest();
        if (xdr) {
            xdr.onload = function () {
               alert(xdr.responseText);

            };
            xdr.open("get", url);
            xdr.send();
        }
        }
        else {
            $.ajax({
                url: url,
                success: function (response) {

                },
                error: function (data) {
                }
            });
         }
    } 
```

您还需要在服务器端编写以下代码，以允许跨域访问

```
Response.AppendHeader("Access-Control-Allow-Origin", "*"); 
```

# c# - 如何使我的 C# DLL 成为自注册 dll

> ID：15104982
> 
> 赞同：1
> 
> 时间：2013-02-27T05:40:06.477
> 
> 标签：c#, com, registry, registration, installshield

我在 C# 中创建了一个 COM 对象，该对象后来被 VBScript 使用。为了使 VBScript 能够实例化对象，它必须被注册。以前，我使用任何 .NET Framework 提供的 RegAsm 工具手动注册对象。

但是，我现在正在创建一个安装程序，这样我就可以在不同的机器上安装这个对象，当我使用 InstallShield 2012 Spring Express 时，它警告我 dll 不是自注册的。

如何让我的 DLL 自注册？我找到了使用 C# 中的 Process 对象来调用 RegAsm 的人的指南和示例，但我的对象不是可执行文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T13:00:45.640

自定义操作和自我注册*不是*最佳实践。

如果您的 InstallShield 版本不支持 COM 互操作，请运行以下命令：

regasm foo.dll /regfile:foo.reg

现在将该 reg 文件导入 InstallShield 并将文件 foo.dll 调整为 [INSTALLDIR]foo.dll。

如果您的 InstallShield 版本不支持导入 reg 文件，请在记事本中编辑并手动将值输入 InstallShield。

这是最干净的方法，因为您不会有任何自定义操作失败，并且由于 MSI 正在处理注册，它知道如何卸载和回滚数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T05:55:12.793

如果您正在使用 InstallShield，您可以要求 InstallShield 注册您的类型库。在**组件**-> 你的 DLL -> **.NET 设置**-> 将**.NET COM 互操作**设置为是。

![InstallShield 设置截图](../Images/b25e54a42300edaf8ca8785faaea5f46.png)

如果您使用的 InstallShield 版本不支持此功能，请编写一个自定义操作，调用 RegAsm.exe 来注册您的 dll。

# c# - 如何列出目录C# WPF中的文件

> ID：15104986
> 
> 赞同：3
> 
> 时间：2013-02-27T05:40:21.513
> 
> 标签：c#, wpf, file, list, listbox

我需要获取没有目录名且没有文件扩展名的文件列表

在

C:\ProgramData\Microsoft\Windows\开始菜单\程序

ex)C:\ProgramData\Microsoft\Windows\Start Menu\Programs\7-Zip\7-Zip File Manager.lnk (X)

7-Zip 文件管理器 (O)

并在列表框中列出这些文件。

如果在列表框中选择了文件名，我还必须检索图标并启动程序。

像这样。

[http://www.c-sharpcorner.com/UploadFile/7e39ca/display-start-menu-in-windows-8/Images/Start-Menu-Windows8.jpg](http://www.c-sharpcorner.com/UploadFile/7e39ca/display-start-menu-in-windows-8/Images/Start-Menu-Windows8.jpg)

有谁能够帮助我？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T05:47:08.670

使用[Path.GetFileNameWithoutExtension](http://msdn.microsoft.com/en-us/library/system.io.path.getfilenamewithoutextension.aspx)检索文件名

```
string fileName = Path.GetFileNameWithoutExtension("C:\ProgramData\Microsoft\Windows\Start Menu\Programs\7-Zip\7-Zip File Manager.lnk); 
```

要在列表框中列出图标，请查看 WPF ListView 类。您需要在 XAML 中定义一个模板来显示图像：

```
<ListView>
    <ListView.Resources>
        <DataTemplate x:Key="IconTemplate">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <Image Grid.Column="0"/>
                <TextBlock Grid.Column="1" Text="{Binding Name}"/>
            </Grid>
        </DataTemplate>
    </ListView.Resources>            
    <ListView.View>     
        <GridView>
            <GridViewColumn CellTemplate="{StaticResource IconTemplate}" Header="Name"/>
            <GridViewColumn DisplayMemberBinding="{Binding FileName}" Header="File Name"/>                   
        </GridView>
    </ListView.View>
</ListView> 
```

要从文件中提取图标，您可以使用命名空间中的 ExtractAssociatedIcon `System.Drawing`：

```
Icon icon = Icon.ExtractAssociatedIcon(filePath); 
```

# javascript - Javascript：ajax 数据的拆分函数错误：“未捕获的类型错误：对象没有方法‘拆分’”

> ID：15104989
> 
> 赞同：1
> 
> 时间：2013-02-27T05:40:27.183
> 
> 标签：javascript, jquery

在我的代码中，我从 jQuery ajax 获取数据并将其分配给数组变量。但是当我在这个数组变量上调用 split 函数时，我得到了错误（如在 google chrome 控制台中看到的）：

```
Uncaught TypeError: Object  has no method 'split' 
```

相关代码为：

```
$(function () {
    var originalData=[]; // Also tried var originalData=new Array(); and var originalData;
    $.ajax({                                      
      url: 'data.php',                    
      data: "",                        
      dataType: 'text',               
      success: function(data)          
      {
        alert(data); // THIS WORKS
      }
    });

    alert("a");  // THIS WORKS
    var dataArray =originalData.split("#");
    alert("abc "+ dataArray); //THIS DOESNT WORK
}); 
```

根本无法破解这个。不知道我在假设 ajax 数据的对象类型或将 orginalData 分配给数据时是否犯了错误。

此外，php 文件的输出是声明为的`echo $array;`位置，此后我不断将字符串附加到.`$array``$array="";``$array`

数据内容也是：＃195：93.0500：94.8500：93.6500：93.6500＃196：94.0000：92.0000：92.2500：92.2500＃197：91.0000：92.1000：87.6500：87.6500＃198：88.0000：89.0000：86.0000：87.0000：86.0000：87.9000＃199：89.0000 :92.3000:88.5000:92.2000#200:93.1000:94.1000:90.7500:91.4000

谢谢

**编辑**

在 Aashray 的回答之后，通过替换我没有得到错误`var originalData=[];`。`var originalData="";`但是拆分的功能不起作用，因为它在拆分后显示一个空白数组。

**编辑**

空白数组的问题似乎与原始问题无关。我认为问题是在 split 函数之后调用了 $.ajax 函数。至少当我输入更多警报时，我发现序列以拆分功能周围的警报开始，而 $.ajax 中的警报在最后发生。所以 split 后的空白数组是空白的，因为很可能它的输入数据在调用 split 时没有被 $.ajax 填充。但那是另一个与问题无关的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T05:47:25.023

`originalData`是一个数组。`split()`函数只能用于字符串。使用索引来引用位置，例如`originalData[0]`.

# c# - Binding后如何临时存储DataTable

> ID：15104995
> 
> 赞同：1
> 
> 时间：2013-02-27T05:41:01.770
> 
> 标签：c#, asp.net, data-binding, gridview, datatable

我有两个 GridView，我在其中从数据库中填充 PageStart 上的数据。当我刷新页面（在回发时）时，我看不到数据表内容。所以我想在每次页面加载时再次对 GridView 进行数据绑定。为了绑定数据，我需要将数据临时存储在某个地方。哪一种是临时存储数据的最佳方法？

在我的第一个网格中大约有 10 行，在第二个 GridView 中我有大约 200 行。而且我没有使用分页

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:53:11.163

再次使用 Cache 对象与 Session 将取决于您是希望每个会话临时存储数据还是要存储相同数据的所有会话。如果您希望仅为应用程序的特定会话维护相同的数据，则可以使用会话。缓存可用于应用程序中的所有用户会话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T07:32:17.663

这是一个完整的使用示例，`ViewState`但您可以将其更改为其他[缓存](http://msdn.microsoft.com/en-us/library/aa478965.aspx)方法。

![在此处输入图像描述](../Images/725274f52baa51ce5c0ecac273896e90.png)

默认.aspx

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="WebApplication1.Default" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
        <asp:GridView runat="server" ID="gvProd" AutoGenerateColumns="false" OnRowDataBound="gvProd_RowDataBound" OnRowCommand="gvProd_RowCommand">
            <Columns>
                <asp:TemplateField HeaderText="Product">
                    <ItemTemplate>
                        <asp:Literal runat="server" ID="litNm"></asp:Literal>
                        <asp:DropDownList runat="server" ID="ddlQty"></asp:DropDownList>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Add To Cart">
                    <ItemTemplate>
                        <asp:LinkButton runat="server" ID="lbnAdd" Text="Add To Cart" CommandName="AddToCart"></asp:LinkButton>
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView>
        <hr />
        <asp:GridView runat="server" ID="gvCart" AutoGenerateColumns="false" OnRowDataBound="gvCart_RowDataBound" OnRowCommand="gvCart_RowCommand">
            <Columns>
                <asp:TemplateField>
                    <ItemTemplate>
                        <asp:Literal runat="server" ID="litNm"></asp:Literal>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField>
                    <ItemTemplate>
                        <asp:TextBox runat="server" ID="txtQty"></asp:TextBox>
                        <asp:Button runat="server" ID="btnUpdate" Text="Update Qty" CommandName="UpdateCart" />
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView>
    </form>
</body>
</html> 
```

默认.aspx.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace WebApplication1
{
    public partial class Default : System.Web.UI.Page
    {
        [Serializable]
        public class Product
        {
            public int PID { get; set; }
            public string Name { get; set; }

            public Product(int i) { this.PID = i; this.Name = "product " + i.ToString(); }
        }

        [Serializable]
        public class CartItem
        {
            public Product Prod { get; set; }
            public int Qty { get; set; }

            public CartItem(Product p, int q) { this.Prod = p; this.Qty = q; }
        }

        public List<CartItem> myCart = new List<CartItem>();
        public List<CartItem> MyCart
        {
            get
            {
                if (ViewState["cart"] == null)
                {
                    ViewState["cart"] = new List<CartItem>();
                }

                return ViewState["cart"] as List<CartItem>;
            }
        }

        protected void Page_Load(object sender, EventArgs e)
        {
            if (!Page.IsPostBack)
                BindProdGrid();
        }

        protected void BindProdGrid()
        {
            gvProd.DataSource = GetProducts();
            gvProd.DataBind();
        }

        protected List<Product> GetProducts()
        {
            var ret = new List<Product>();

            ret.Add(new Product(1));
            ret.Add(new Product(2));

            return ret;
        }

        protected void gvProd_RowCommand(object sender, GridViewCommandEventArgs e)
        {
            if (e.CommandName == "AddToCart")
            {
                var row = (e.CommandSource as LinkButton).NamingContainer as GridViewRow;
                var ddl = row.FindControl("ddlQty") as DropDownList;

                var qty = Convert.ToInt32(ddl.SelectedValue);
                var pid = Convert.ToInt32(e.CommandArgument);

                AddToCart(pid, qty, increase: true);
                BindCartGrid(this.MyCart);
            }
        }

        protected void AddToCart(int pid, int qty, bool increase = false)
        {
            var cartItem = this.MyCart.Find(o => o.Prod.PID == pid);
            if (cartItem == null)
                this.MyCart.Add(new CartItem(new Product(pid), qty));
            else
                if (increase)
                    cartItem.Qty += qty;
                else
                    cartItem.Qty = qty;
        }

        protected void gvProd_RowDataBound(object sender, GridViewRowEventArgs e)
        {
            if (e.Row.RowType == DataControlRowType.DataRow)
            {
                var item = e.Row.DataItem as Product;

                var litNm = e.Row.FindControl("litNm") as Literal;
                litNm.Text = item.Name;

                var ddlQty = e.Row.FindControl("ddlQty") as DropDownList;
                ddlQty.Items.Add(new ListItem("1", "1"));
                ddlQty.Items.Add(new ListItem("10", "10"));

                var lbnAdd = e.Row.FindControl("lbnAdd") as LinkButton;
                lbnAdd.CommandArgument = item.PID.ToString();
            }
        }

        protected void BindCartGrid(List<CartItem> items)
        {
            gvCart.DataSource = items;
            gvCart.DataBind();
        }

        protected void gvCart_RowDataBound(object sender, GridViewRowEventArgs e)
        {
            if (e.Row.RowType == DataControlRowType.DataRow)
            {
                var item = e.Row.DataItem as CartItem;

                var litNm = e.Row.FindControl("litNm") as Literal;
                litNm.Text = item.Prod.Name + " (pid:" + item.Prod.PID.ToString() + ")";

                var txtQty = e.Row.FindControl("txtQty") as TextBox;
                txtQty.Text = item.Qty.ToString();
                txtQty.Attributes["data-pid"] = item.Prod.PID.ToString();
            }
        }

        protected void gvCart_RowCommand(object sender, GridViewCommandEventArgs e)
        {
            if (e.CommandName == "UpdateCart")
            {
                var row = (e.CommandSource as Button).NamingContainer as GridViewRow;
                var txtQty = row.FindControl("txtQty") as TextBox;

                var qty = Convert.ToInt32(txtQty.Text);
                var pid = Convert.ToInt32(txtQty.Attributes["data-pid"]);

                AddToCart(pid, qty, increase: false);
                BindCartGrid(this.MyCart);
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T05:43:31.000

要解决回发之间的数据持久性，您有多种选择。我真的反对 ViewState，除非在非常特殊的情况下你只有很少的数据（这就是微软在 WebForms 中失败的地方——它的默认行为是 DemoWare）。

我建议将您的数据保存在[Cache](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.aspx)对象中，并在回发时从该对象中读取它。但这实际上取决于您的特定用例。有不同的技术。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T06:57:04.473

存储数据的最佳位置是会话。Viewstate 会将所有数据带到客户端，这是不受欢迎的网络/带宽开销。

您的 PageStart 应如下所示：

```
public void PageStart()
{
if(Session["dt"] == null || !(Session["dt"] is datatable)){

datatable dt;
///your dt populating code
Session["dt"] = dt;
}
yourGridView.datasource = (datatable)Session["dt"];
yourGridView.databind();

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T07:31:50.730

> 这就是您需要做的所有事情。
> 放置你的方法或函数，用这样的数据填充gridview。

```
private void FillGrid()
{
    DataTable dt = new DataTable();
    dt = //Fill you datatable
    Gridview1.DataSource = dt;
    Gridview1.DataBind();
} 
```

> 这是您在页面加载事件中必须做的事情。

```
protected void Page_Load(object sender, EventArgs e)  
{  
    if (!IsPostBack)  
    {  
        this.FillGrid();  
    }  
} 
```