# StackOverflow 问答 15275000-15275999

# xcode - Interface Builder 中的自定义 UIView / 跨平台

> ID：15275001
> 
> 赞同：1
> 
> 时间：2013-03-07T15:26:04.973
> 
> 标签：xcode, cocoa-touch, cocoa, interface-builder

我有一个适用于 iOS 和 Mac OS 的控件库。它的实现如下：

```
#if TARGET_OS_IPHONE

#import <UIKit/UIKit.h>

@interface MyCustonControl : UIControl
...
@end

#else

#import <Cocoa/Cocoa.h>

@interface MyCustomControl : NSControl
...
@end

#endif 
```

如果我在视图控制器中构建控件，这可以正常工作。如果我尝试使用 Interface Builder，我永远无法将 UIView 的自定义类设置为 MyCustomControl。它显示在列表中，我可以输入它，但如果我关注其他内容然后再次关注视图，自定义类已恢复为 UIView。

我在两个实现中都实现了 initFromCoder，只是为了确保不是这样。

有什么办法解决这个问题吗？是 IB 很奇怪还是我应该以不同的方式定义我的班级？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:51:59.053

您不能将自定义类设置为您的控件，因为自定义类需要是 UIView/NSView 的子类，而 UIControl/NSControl 是 UIView/NSView 的父类。您应该将定义更改为

```
@interface MyCustomControl : UIView
...
@interface MyCustomControl : NSView 
```

# python - 编码 ASCII 文本

> ID：15275005
> 
> 赞同：2
> 
> 时间：2013-03-07T15:26:14.610
> 
> 标签：python

我试图编码但没有成功。

```
text = "don\\u2019t think"
textencode = text.encode('utf-8').split(" ")
print textencode 
```

结果还是 ['don\u2019t', 'think']

我试图得到 ['don't', 'think']

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T15:32:46.940

看起来你正在使用 Python2。这是你想要的？

```
>>> text = u"don\u2019t think"
>>> textencode = text.encode('utf-8').split(" ")
>>> print textencode[0]
don’t 
```

Python3 更好地处理 unicode 对象

```
>>> text = "don\u2019t think"
>>> textencode = text.split(" ")
>>> textencode
['don’t', 'think'] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-07T15:37:34.257

在 python 2.x 中

```
>>> text = u"don\u2019t think"
>>> textencode = text.encode('utf-8').split(" ")
>>> print textencode
['don\xe2\x80\x99t', 'think']
>>> print textencode[0]
don’t 
```

在双引号前添加前缀 'u'。

# python - 如何擦除烛台之间的空间并在 matplotlib 中使用动态图形大小？

> ID：15275008
> 
> 赞同：2
> 
> 时间：2013-03-07T15:26:21.353
> 
> 标签：python, matplotlib, candlestick-chart

我有很多股票数据，我想从中构建一个类似于此的 OHLC 图表（开盘价、最高价、最低价、收盘价）：

![在此处输入图像描述](../Images/f0bd976e9467c16ab79643fe0933a48b.png)

为此，我使用了[matplotlib.finance](https://github.com/matplotlib/matplotlib/blob/master/lib/matplotlib/finance.py)中的烛台函数。我有分钟数据，所以为了也制作日内图表，我使用[了另一个 stackoverflow 线程](https://stackoverflow.com/questions/9673988/intraday-candlestick-charts-using-matplotlib)，它均匀地间隔所有烛台以避免天之间的差距（因为在下午 5:30 和上午 9:00 之间没有数据）。这适用于少量数据，但不幸的是我有很多数据（每天 510 分钟 * 10 年 ≈ 100 万分钟）。从这些数据中，我想制作一个图表，给出一个概述，但也可以放大，以便我可以看到历史上特定日期的各个分钟。

为了做到这一点，我想简单地制作一个巨大的（非常宽的）图形，保存它，然后我可以简单地用任何图像查看器放大。

我现在有一些我从另一个线程复制的代码并进行了一些调整。在代码中我首先创建了一些随机样本数据（因为删除了另一个线程中的原始样本数据）。然后，我根据这些数据绘制一个具有固定烛台宽度的图形，图形宽度为分钟数乘以单个烛台宽度 (len(data)*candlestickWidth)。代码和生成的图像如下，每天只有 2 天 15 分钟（总共 30 分钟）。

我现在的问题是：我如何定位烛台，以便它们在烛台之间没有空间，并且图像宽度取决于烛台的数量，以便随着我添加更多分钟而变得更宽？

欢迎所有提示！

```
import numpy as np
import matplotlib.pyplot as plt
import datetime
import random

from matplotlib.finance import candlestick
from matplotlib.dates import num2date, date2num

# Create sample data for 5 days. Five columns: time, opening, close, high, low
jaar = 2007
maand = 05
data = np.array([[1.0,1.0,1.0,1.0,1.0]])
quotes = [(5, 6, 7, 4), (6, 9, 9, 6), (9, 8, 10, 8), (8, 6, 9, 5), (8, 11, 13, 7)]

for dag in range(5, 7):
    for uur in range(9, 10):
        for minuut in range(15):
            numdatumtijd = date2num(datetime.datetime(jaar, maand, dag, uur, minuut))
            koersdata = quotes[random.randint(0,4)]
            data = np.append(data, [[numdatumtijd, koersdata[0], koersdata[1], koersdata[2], koersdata[3], ]], axis=0)

data = np.delete(data, 0, 0)
print('Ready with building sample data')

# determine number of days and create a list of those days
ndays = np.unique(np.trunc(data[:,0]), return_index=True)
xdays =  []
for n in np.arange(len(ndays[0])):
    xdays.append(datetime.date.isoformat(num2date(data[ndays[1],0][n])))

# creation of new data by replacing the time array with equally spaced values.
# this will allow to remove the gap between the days, when plotting the data
data2 = np.hstack([np.arange(data[:,0].size)[:, np.newaxis], data[:,1:]])

# plot the data
candlestickWidth = 0.2
figWidth = len(data) * candlestickWidth
fig = plt.figure(figsize=(figWidth, 5))
ax = fig.add_axes([0.05, 0.1, 0.9, 0.9])
# customization of the axis
ax.spines['right'].set_color('none')
ax.spines['top'].set_color('none')
ax.xaxis.set_ticks_position('bottom')
ax.yaxis.set_ticks_position('left')
ax.tick_params(axis='both', direction='out', width=2, length=8, labelsize=12, pad=8)
ax.spines['left'].set_linewidth(2)
ax.spines['bottom'].set_linewidth(2)

# set the ticks of the x axis only when starting a new day
ax.set_xticks(data2[ndays[1],0]) ## (Also write the code to set a tick for every whole hour)
ax.set_xticklabels(xdays, rotation=45, horizontalalignment='right')

ax.set_ylabel('Quotes', size=20)
# Set limits to the high and low of the data set
ax.set_ylim([min(data[:,4]), max(data[:,3])])
# Create the candle sticks
candlestick(ax, data2, width=candlestickWidth, colorup='g', colordown='r')

plt.show() 
```

![在此处输入图像描述](../Images/9ede0ca197a02c8cb01146303db938ee.png)

# javascript - 更改类的 html 不起作用

> ID：15275012
> 
> 赞同：0
> 
> 时间：2013-03-07T15:26:28.440
> 
> 标签：javascript

我有一个函数可以使用此类更改元素的 html（实际上只有 1 个）。

但它什么也没做，控制台中也没有错误......

```
function addRightButton() {
    $('.fc-calendar-right').html = '<p>Hi!</p>';
} 
```

有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T15:27:04.110

您应该调用 jQuery 的`html()`函数来更改元素的 html。像这样：

```
function addRightButton() {
    $('.fc-calendar-right').html('<p>Hi!</p>');
} 
```

# ios - 签署 IPA 的证书/机构的名称 [iOS]

> ID：15275017
> 
> 赞同：5
> 
> 时间：2013-03-07T15:26:42.537
> 
> 标签：ios, certificate, ipa

其他问题显示如何签署已签署的 IPA，如[this](https://stackoverflow.com/questions/5160863/how-to-re-sign-the-ipa-file)或[this](https://stackoverflow.com/questions/6896029/re-sign-ipa-iphone)。特别是这部分是我感兴趣的：

```
/usr/bin/codesign -f -s "iPhone Distribution: Certificate Name" --resource-rules "Payload/Application.app/ResourceRules.plist" "Payload/Application.app" 
```

一旦我重新签署了 ipa，我怎么能看到/知道事实上我目前拥有的 IPA 已经由“iPhone Distribution: Certificate Name”签署？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-07T15:33:51.127

`codesign -d -vvvv /path/to/The.app`

-d 用于显示签名信息，大量 vs 用于大量冗长。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T15:49:38.970

我不知道这是否是最好的方法。通过使用`Terminal`，您可以浏览签名的 ipa 文件的内容。将扩展名更改为 zip 并解压缩。然后尝试浏览到以下路径 >Payload/AppName.app/embedded.mobileprovision。

您可以将 embedded.mobileprovision 复制到其他位置并在文本编辑器中打开以查看详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T12:28:17.897

据我所知，“代码设计”没有任何选项来实际检查应用程序的辞职是否正常。

实际上，由于许多原因（权利、配置、id 不匹配......），它可能会出错。

检查的唯一方法是在设备上安装 IPA（通过 Xcode、iPhone Configurator 或 iTunes，如果没有其他选择）并查看应用程序是否启动。

# asp.net-mvc - IIS 7 在 webforms 应用程序旁边运行 asp.net mvc 3 应用程序

> ID：15275018
> 
> 赞同：0
> 
> 时间：2013-03-07T15:26:47.777
> 
> 标签：asp.net-mvc, iis, iis-7

我有一个现有的 webforms 应用程序运行在：

```
demo.bla.com/dotnettwoapp 
```

使用 iis 7 中的绑定 demo.bla.com。

我想在下面运行一个 asp.net mvc 3 应用程序：

```
demo.bla.com/mvcapp 
```

我的第一次尝试是创建一个新站点：

应用程序

但 IIS 7 抱怨重复绑定。我做了一些谷歌搜索，但找不到任何东西。谁能指出我在我的情况下该怎么做的正确方向？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:07:33.847

如果您想将其添加为现有站点下的应用程序，您不想添加新站点。在 IIS 中，右键单击现有站点并选择“添加应用程序”。

# windows-phone-7 - 隔离存储 Windows 手机中的目录

> ID：15275019
> 
> 赞同：0
> 
> 时间：2013-03-07T15:26:51.177
> 
> 标签：windows-phone-7

我想在我的 isoalted 存储中创建一个目录，并在这个目录中创建一个子目录我使用这种方法

```
private void create_directory(string directoryName)
{
    try
    {
        IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication();
        if (!myIsolatedStorage.DirectoryExists(directoryName))
        {
            myIsolatedStorage.CreateDirectory(directoryName);

            myIsolatedStorage.CreateDirectory(directoryName+"/Books");
            myIsolatedStorage.CreateDirectory(directoryName + "/EpubBooks");

        }
    }
    catch (Exception ex)
    {
        // handle the exception
    }
} 
```

但是当我打开隔离的存储资源管理器时，我只看目录，两个子目录没有创建

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:50:42.487

尝试使用代码迭代隔离存储。您的子目录已创建：

```
 private void TestDir(string directoryName)
    {
        var list = new List<string>();
        try
        {
            var myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication();
            if (myIsolatedStorage.DirectoryExists(directoryName))
            {
                var path = string.Format("{0}\\*", directoryName);
                list = myIsolatedStorage.GetDirectoryNames(path).ToList();
            }
        }
        catch 
        {

        }
    } 
```

看起来[独立存储资源管理器中存在错误](http://wp7explorer.codeplex.com/releases/view/61282)（请参阅第一条评论）。

# c++ - clang：强制循环展开特定循环

> ID：15275023
> 
> 赞同：10
> 
> 时间：2013-03-07T15:27:00.950
> 
> 标签：c++, c, clang

有没有办法告诉clang展开一个特定的循环？

* * *

谷歌搜索答案给了我命令行选项，这将影响整个编译器而不是单个循环。

* * *

GCC 有一个类似的问题 ---[告诉 gcc 专门展开一个循环](https://stackoverflow.com/questions/4071690/tell-gcc-to-specifically-unroll-a-loop)--- 但那里提供的答案不适用于 clang。

那里建议的选项1：

```
#pragma GCC optimize ("unroll-loops") 
```

似乎被默默地忽略了。实际上

```
#pragma GCC akjhdfkjahsdkjfhskdfhd 
```

也被默默无视。

选项 2：

```
__attribute__((optimize("unroll-loops"))) 
```

导致警告：

```
warning: unknown attribute 'optimize' ignored [-Wattributes] 
```

* * *

**更新**

joshuanapoli 提供了一个很好的解决方案，如何在不创建循环的情况下通过模板元编程和 C++11 进行迭代。该构造将在编译时解析，从而导致重复内联的主体。虽然它不完全是问题的答案，但它本质上实现了相同的目标。

这就是我接受答案的原因。但是，如果您碰巧知道如何使用标准 C 循环 ( `for`, `while`) 并强制展开它 - 请与我们分享知识！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T15:54:28.087

对于 C++ 程序，您可以在语言中展开循环。您无需弄清楚特定于编译器的选项。例如，

```
#include <cstddef>
#include <iostream>

template<std::size_t N, typename FunctionType, std::size_t I>
class repeat_t
{
public:
  repeat_t(FunctionType function) : function_(function) {}
  FunctionType operator()()
  {
    function_(I);
    return repeat_t<N,FunctionType,I+1>(function_)();
  }
private:
  FunctionType function_;
};

template<std::size_t N, typename FunctionType>
class repeat_t<N,FunctionType,N>
{
public:
  repeat_t(FunctionType function) : function_(function) {}
  FunctionType operator()() { return function_; }
private:
  FunctionType function_;
};

template<std::size_t N, typename FunctionType>
repeat_t<N,FunctionType,0> repeat(FunctionType function)
{
  return repeat_t<N,FunctionType,0>(function);
}

void loop_function(std::size_t index)
{
  std::cout << index << std::endl;
}

int main(int argc, char** argv)
{
  repeat<10>(loop_function)();
  return 0;
} 
```

**具有复杂循环功能的示例**

```
template<typename T, T V1>
struct sum_t
{
  sum_t(T v2) : v2_(v2) {}
  void operator()(std::size_t) { v2_ += V1; }
  T result() const { return v2_; }
private:
  T v2_;
};

int main(int argc, char* argv[])
{
  typedef sum_t<int,2> add_two;
  std::cout << repeat<4>(add_two(3))().result() << std::endl;
  return 0;
}
// output is 11 (3+2+2+2+2) 
```

**使用闭包而不是显式函数对象**

```
int main(int argc, char* argv[])
{
  int accumulator{3};
  repeat<4>( [&](std::size_t)
  {
    accumulator += 2;
  })();
  std::cout << accumulator << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-13T18:53:27.153

Clang 最近获得了循环展开编译指示（例如`#pragma unroll`），可用于指定完全/部分展开。有关详细信息，请参阅[http://clang.llvm.org/docs/AttributeReference.html#pragma-unroll-pragma-nounroll 。](http://clang.llvm.org/docs/AttributeReference.html#pragma-unroll-pragma-nounroll)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T16:30:03.780

尽管它可能很严重，但您可以将所述 for 循环隔离到它自己的文件中，单独编译它（使用它自己的命令行标志）。

[相关但目前尚未回答的 clang-developers 问题](http://clang-developers.42468.n3.nabble.com/Optimize-a-specific-function-td3117946.html)

# drupal - 如何从某些块中删除 H2 标签

> ID：15275026
> 
> 赞同：1
> 
> 时间：2013-03-07T15:27:05.157
> 
> 标签：drupal, drupal-theming, drupal-zen

我想从搜索和其他一些块中删除 H2 标记（而不是通过 block.tpl.php 从所有块中删除）。我使用 Zen 的子主题。希望有人能帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:38:23.700

这是一个模糊的问题，所以答案同样模糊......

```
function MYTHEME_preprocess_block(&$vars) {
  if ($vars['block']->info == 'foo') {
    $vars['theme_hook_suggestions'][] = 'block__no_title';
  }
} 
```

然后将 block--no-title.tpl.php 文件添加到您的主题，从 block.tpl.php 复制标记，然后删除`<h2>`. 清除 Drupal 的主题注册表缓存，您就完成了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T01:08:01.323

转到块配置页面 -> 编辑块 ->`<none>`作为标题输入。
这是 CMS 方式，您应该这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T20:13:31.417

Clive 已经回答了 IMO 正确的问题——但正如你所说，你对 PHP 不是很有经验，让我建议一些不涉及编码的东西——但请记住：学习 Drupal 和 PHP 既简单又有趣如果您有足够的时间阅读文档和测试。

从“删除 h2”，我假设您的意思是删除带有 class 的 h2 标签`title`。在块的配置页面中，输入块`<none>`的标题 - 您的块将不包含标题（及其`h2`标签）。

这是每个块的设置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-20T06:16:20.267

假设您出于 SEO 原因想要删除 H2 标签，我想建议一个利用“搜索表单”字符串的技巧。从您的语言文件（默认英语）中查找“搜索表单”标签并替换它与“您的 SEO 文本”。

# highcharts - 手动调用重置缩放

> ID：15275027
> 
> 赞同：6
> 
> 时间：2013-03-07T15:27:06.857
> 
> 标签：highcharts, zooming

我有一个允许放大/缩小的图表。每次用户放大/缩小时，都会出现“重置缩放”。

现在我添加了一个新的自定义按钮，我需要在其中显示 X 个最新的列数据。我更改了类别和数据，但还需要重置缩放。

这可以做到吗？当用户尝试放大/缩小时，我仍然想保留“重置缩放”。PS：我尝试过这样做。zoomOut() 但随后出现“重置缩放”:(

问候查南

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-10-03T08:23:38.857

帕维尔的召唤建议

```
chart.xAxis[0].setExtremes(null,null); 
```

确实有效，顺便说一句，如下所示：http: [//jsfiddle.net/tvHg6/](http://jsfiddle.net/tvHg6/)

但是，虽然图表缩小了，但 resetZoom 按钮仍然悬在周围，不知道如何隐藏它。调用 chart.resetZoomButton.hide() 会隐藏它，但它会永久隐藏。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-09T22:25:22.010

正如[这里建议的那样](https://stackoverflow.com/a/29026981/1280252)

```
chart.zoom() 
```

但请记住，调用`chart.zoom()`不会触发`chart.events.selection`事件。如果您手动或以编程方式单击“重置按钮”，则会触发`$('.highcharts-button').click();`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-09T07:45:14.127

如果要重置外部按钮单击的缩放，请执行以下操作：

```
$("#YourOwnZoomBtnID").click(function(){ 

    $('.highcharts-button').click();
}); 
```

如果你想隐藏 highcharts 的内置重置按钮，那么你可以这样做：

```
xAxis: { categories: xAxisCategories
                ,events: {
      afterSetExtremes: function() {
        $('.highcharts-button').hide();
      }
    }} 
```

jsfiddle 示例在这里：[jsfiddle](http://jsfiddle.net/fj6d2/3572/ "jsfiddle")

谢谢卡利安

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-31T22:50:24.433

我刚刚调用了按钮的单击事件，它工作正常。

给定： v_chart 是 Highcharts 图表的变量；

```
if (typeof v_chart.resetZoomButton !== 'undefined') {
    v_chart.resetZoomButton.element.onclick();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-12T09:18:43.953

1.  隐藏原来的重置按钮

> ```
>  chart: {
>             resetZoomButton: {
>                     theme: {
>                         display: 'none'
>                     }
>                 }
>             } 
> ```

2.  照顾事件

> ```
>  buttons: {
>                     resetButton: {
>                         symbol: 'url(redo_icon.svg)',
>                         _titleKey: "resetZoom",
>                         y: 20,
>                         x: -20,
>                         onclick: function () {
>                             this.xAxis[0].setExtremes(null,null);
>                             this.yAxis[0].setExtremes(null,null)
>                         }
>                     }
>                 } 
> ```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-28T16:10:18.930

我们有类似的情况——用户缩放，我们添加了一个“保存这个缩放阶段”按钮，用户点击按钮，我们保存新的最小/最大时间，但现在我们必须让重置缩放按钮消失。

这段代码做到了，如果用户在之后进一步放大，按钮就会返回：

```
chart.resetZoomButton.hide();
chart.resetZoomButton = chart.resetZoomButton.destroy(); 
```

# android - 打开安卓通知面板

> ID：15275028
> 
> 赞同：-1
> 
> 时间：2013-03-07T15:27:07.773
> 
> 标签：android, android-notifications

如何在 java 代码中打开 android 通知面板？我想在我的应用程序中用手势将其拉下...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:33:06.030

没有用于此的官方 API。

但是，您可以尝试通过反射来执行此操作，但这不能保证适用于所有版本的 Android 或运行特定版本的所有设备。

```
Object sbservice = getSystemService("statusbar");
Class<?> statusbarManager = Class.forName("android.app.StatusBarManager");
Method showsb = statusbarManager.getMethod("expand");
showsb.invoke(sbservice); 
```

您还需要以下权限：

```
<uses-permission android:name="android.permission.EXPAND_STATUS_BAR" /> 
```

# php - imagecopyresampled() 期望参数 5 很长

> ID：15275034
> 
> 赞同：-2
> 
> 时间：2013-03-07T15:27:19.780
> 
> 标签：php

我在我的项目中使用 PHP，我的朋友使用以下代码：

```
function imagecopyresampled($out, $in, $dstX, $dstY, $srcX=0, $srcY=0, $dstW, $dstH,        $srcW, $srcH)
{
    if($this->GD_VERSION==2)
        return imagecopyresampled($out, $in, $dstX, $dstY, $srcX, $srcY, $dstW, $dstH, $srcW, $srcH);
    else
        return imagecopyresized($out, $in, $dstX, $dstY, $srcX, $srcY, $dstW, $dstH, $srcW, $srcH);
} 
```

当我想上传图片时，我收到此错误：

> 警告：imagecopyresampled() 期望参数 5 很长，字符串在 /home/mbeuser/public_html/nephrogest/includes/common/image/ImageFilter.class.php5 第 917 行给出

这是第 917 行：

```
return imagecopyresampled($out, $in, $dstX, $dstY, $srcX,
                          $srcY, $dstW, $dstH, $srcW, $srcH); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:29:00.010

删除`=''`出现在函数本身的参数列表中的那些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:29:28.110

错误消息告诉您：函数需要第五个参数是整数（长）值，而不是字符串，就像您的情况一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T15:30:47.897

在您的函数中，第 5 个和第 6 个参数是字符串：

```
function imagecopyresampled($out, $in, $dstX, $dstY, $srcX='', $srcY='', $dstW, $dstH,        $srcW, $srcH)
                                                     ^^^^^^^   ^^^^^^ 
```

According to the [PHP docs](http://php.net/manual/fr/function.imagecopyresampled.php), they should be Integers, so remove the `=''` in those both parameters and it should be fine ! If it still doesn't work, check the parameters where you're calling this function. Make them integers like this : `(int) $var;` or use the `intval` function.

# actionscript-3 - AS3 ServerSocket 无法第二次绑定

> ID：15275035
> 
> 赞同：0
> 
> 时间：2013-03-07T15:27:19.433
> 
> 标签：actionscript-3, serversocket

成功连接到本地端口 IP 然后在 serverSocketinstance (flash.net.ServerSocket) 上调用 close() 方法后，我无法第二次绑定。我收到以下错误消息

```
#2002: Operation attempted on invalid socket. 
```

关闭后我检查了 serverSocketInstance.bound=false;

关闭后我还需要对我的 serverSocketinstance 做些什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:32:09.403

关闭套接字后，您将无法再次使用它。您必须创建新的套接字。检查文档： [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/ServerSocket.html#close()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/ServerSocket.html#close())

# asp.net-mvc - ASP.NET MVC 4 自定义授权属性和排除某些操作

> ID：15275038
> 
> 赞同：1
> 
> 时间：2013-03-07T15:27:28.213
> 
> 标签：asp.net-mvc, authorization

我创建了一个自定义 AuthorizeAttribute 来为我的应用程序添加一定级别的权限安全性。

```
[AuthorizeUser(AccessLevel="Read")] 
```

我可以在我的控制器中装饰某些动作，或者只是在整个类上实现它。我有一些控制器有大量的动作，只有少数不需要这个额外的检查。将其应用于整个班级并排除一些操作对我来说更有意义。

如何从我的自定义 AuthorizeAttribute 中排除操作？似乎每次运行该操作时，它都默认为类属性，而不是我为该特定操作提供的任何属性。

# javascript - 如何让用户在 jQuery 中向下滚动？

> ID：15275042
> 
> 赞同：2
> 
> 时间：2013-03-07T15:27:36.590
> 
> 标签：javascript, jquery

我在网上看到的大多数方法/事件只返回一个用户当前滚动页面的值。如何使客户端*真正滚动？我打算做的是让客户端在某个操作后向下滚动 215px（从它们当前所在的位置）。

**更新**：

我有这个工作可以在我想要的事件上向下滚动 215px：

```
$(".mobile_text_focus_fix").focus(function(){
var top = document.body.scrollTop;
top += 215;
window.scrollTo(0,top)
}); 
```

但是，这似乎不允许客户端从文档底部滚动到 215px 以下。如果客户端在底部的 215px 以内，或者在底部，它会从底部向上移动到 215px。如果客户端距离底部刚刚超过 215px，它只会向下滚动到 215px。我试图让客户端向下滚动 215px，或者如果它们距离文档底部小于 215px，则一直向下滚动。

**更新**：

我当前的代码是计算一次文档的高度，每次都根据它的初始计算滚动，这导致了上面段落中提到的奇怪问题。

但是，我的文档会根据注入到正文的 xml 更改大小，并且我还需要能够将客户端向下滚动 215px，或者如果它们已经在底部的 215px 范围内，则可以滚动到文档底部的底部，每个用户执行特定操作的时间。

此操作可能会在滚动到不同高度时发生多次，或者通过 xml 将不同内容放置在页面上，这将改变文档高度。所以基本上，我怎样才能执行我上面的代码正在执行的相同任务，但每次都重新计算文档高度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:33:27.503

首先，您必须获取文档的当前位置`document.body.scrollTop`并添加`215`到它。然后使用`window.scrollTo`jQuery 或 jQuery`.animate()`从当前位置向下滚动 215px。

不使用 jQuery

```
var top = document.body.scrollTop;
top += 215;
window.scrollTo(0,top) 
```

使用 jQuery 向下滚动动画

```
var top = document.body.scrollTop;
top += 215;
$("html, body").animate({ scrollTop: top  },'100'); 
```

# php - 以数学方式添加两个多维数组的最有效方法？

> ID：15275048
> 
> 赞同：3
> 
> 时间：2013-03-07T15:28:05.590
> 
> 标签：php, arrays, algorithm, math

考虑两个简单的数组：

```
<?php
  $array1 = array(
    'blue' => 5,

    'green' => array(
      'square' => 10,
      'sphere' => 0.5,
      'triangle' => 3
    ),

    'red' => array(
      'circle' => 1000,
    ),

    'black' => 4,

  );

  $array2 = array(
    'blue' => 1,

    'green' => array(
       'square' => 11,
       'circle' => 5,
    ),

    'purple' => 10,

    'yellow' => array(
      'triangle' => 4
    ),

    'black' => array(
      'circle' => 6,
    ),

  ); 
```

我需要以递归的方式将每个和的每个值在*数学*上相加。`$array1``$array2`

*   保留密钥
*   如果键不存在`$array1`但确实存在于 中`$array2`，则最终数组将仅包含 的值`$array2`（反之亦然）
*   如果两者都存在，则将添加数值`+`
*   不会触及非数字值
*   如果 on 上的值`$array1`指向另一个子数组，并且在`$array2`其中指向一个值，则最终值将导致该键包含一个子数组，该子数组包含来自的值`$array1`以及使用父名称及其值的新键/值（请参阅`black`在示例中）
*   应该能够以几乎无限的嵌套工作

澄清一下，例如，如果我们说

```
<?php 
  $final = array_merge_special($array1, $array2);

  // We would end up with, if you var_export()'d final, something like:
  // (Note: Hope I didn't make mistakes in this or it will be confusing,
  // so expect mild human error)

  $final = array(
    'blue' => 6, // 5+1

    'green' => array(
      'square' => 21, // (10+11)
      'sphere' => 0.5, // only in $array1
      'triangle' => 3 // only in $array1
      'circle' => 5, // only in $array2
    ),

    'purple' => 10, // only in $array2

    'yellow' => array( // only in $array2
      'triangle' => 4
    ),

    'red' => array( // only in $array1
      'circle' => 1000,
    ),

    'black' => array(
      'circle' => 6, // untouched, while $black is present in both, the $array1 value does not have a 'circle' key, and is actually only a key/value (see below)
      'black' => 4, // the key/value from $array1 that was not a subarray, even though it was a subarray in $array2
    ),

  ); 
```

这对我来说似乎令人生畏。我知道我可以遍历一个数组并轻松地递归地添加值，并且我有这个工作（有点），但是当我进入特殊规则（例如 for 的规则`black`）时，我什至无法想象代码会如何损坏看。必须有一种方法可以单独循环每个数组并将`unset()`值合并？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:48:26.600

您将使用 array_walk_recursive（请参阅：[请参阅此处的 php 手册](http://www.php.net/manual/en/function.array-walk-recursive.php)）和可能的 array_merge_recursive。我必须进一步考虑才能获得全貌。

好的，决定这行不通！Array_walk_recursive 不会将保存数组的键传递给函数。这个问题一直在我的脑海里萦绕，所以我只需要编写一个函数来完成它！这里是：

```
function dosum($arin) {
  $arout = array();
  foreach ($arin as $key1 => $item1) {
    $total = 0;
    if(is_array($item1)) {
      foreach($item1 as $key2 => $item2) {
        if(is_numeric($key2))
          $total += $item2;
        else
          if(is_array($item2))
            $arout[$key1] = dosum(array($key2 => $item2));
          else
            $arout[$key1][$key2] =$item2;
      }
      if($total)
        if(isset($arout[$key1]))
          $arout[$key1][$key1] = $total;
        else
          $arout[$key1] = $total;
      }
    else
      $arout[$key1] = $item1;    
    }
  return $arout;
  } 
```

对于给定的 2 个数组，您可以像这样使用它：

```
print_r(dosum(array_merge_recursive($array1, $array2))); 
```

# android - 警报+通知：没有任何反应

> ID：15275049
> 
> 赞同：0
> 
> 时间：2013-03-07T15:28:08.063
> 
> 标签：android, notifications, alarm

我正在尝试实现一个警报，该警报将在每天的同一时间显示通知。

这是我在活动中调用的函数：

```
private void restartNotify() {
    AlarmManager am = (AlarmManager) getSystemService(Context.ALARM_SERVICE);

    // Intent for our BroadcastReceiver 
    Intent intent = new Intent(this, AlarmReceiver.class);

    // PendingIntent for AlarmManager
    PendingIntent pendingIntent = PendingIntent.getBroadcast(this, 0, intent, PendingIntent.FLAG_CANCEL_CURRENT );

    // In case we have already set up AlarmManager, we cancel.
    am.cancel(pendingIntent);

    am.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis()+10000, pendingIntent);           
} 
```

这是我的广播接收器类

```
public class AlarmReceiver extends BroadcastReceiver {
@Override
public void onReceive(Context context, Intent intent) {
    NotificationManager nm = (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);   
    Notification notification = new Notification(R.drawable.icon_notif, context.getString(R.string.NotificationLaunchMssg), System.currentTimeMillis());

    // This is intent we want to launch when user clicks on the notification.
    Intent intentTL = new Intent(context, MyClass.class);

    notification.setLatestEventInfo(context, context.getString(R.string.NotificationTitle), context.getString(R.string.NotificationBody),               
    PendingIntent.getActivity(context, 0, intentTL, PendingIntent.FLAG_CANCEL_CURRENT));

    nm.notify(1, notification);

    //Here we set next notification, in day interval
    AlarmManager am = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
    PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, intent, PendingIntent.FLAG_CANCEL_CURRENT);
    am.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis()+10000, pendingIntent); 
}
} 
```

正如您在这段代码中看到的那样，我使用了一个测试值（+10000 毫秒），因为我只是想在我的应用程序启动 10 秒后触发警报。但它不起作用，什么都没有显示。不知道是闹钟有问题，还是通知，什么都没有发生。

你知道为什么吗？

谢谢你的帮助

编辑：在 AlarmReceiver 方法中添加一些测试代码后，结果证明此代码永远不会运行。所以我可能没有正确调用它，有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:25:03.357

不要使用这种方法尝试 setInexactRepeating(...) 或 setRepeating(...) 代替。为什么你要给 BroadcastReceiver 额外的工作，以便在每次收到意图时设置警报。

这是一个小代码：

```
alarmManager.setInexactRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP,
            0, 10000, pendingIntent);
// The pending intent will the same as yours. 10000 is the 
// interval for between consecutive alarms 
```

正如 azertiti 在评论中提到的那样“到注册时，时间已经过去了。” 所以使用 0 或 System.currentTimeMillis()。

# python - 数据验证 - Python 2.7

> ID：15275055
> 
> 赞同：0
> 
> 时间：2013-03-07T15:28:25.333
> 
> 标签：python, python-2.7

这是迄今为止我为即将到来的 AS 计算初步代码编辑的代码。这是家庭作业，我不知道为什么它不起作用。有什么建议么？谢谢

```
def GetKeyForCaesarCipher():  
  while True:
    key = int(raw_input('Enter the amount that shifts the plaintext alphabet to the ciphertext alphabet: '))
    try:
      i = int(key)
      break
    except ValueError:
      print 'please enter an interger'
    return (key) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T15:30:39.670

你应该做`key = raw_input(...)`而不是`key = int(raw_input(...))`

与前者一样，`key`是一个字符串，直到您`try`将其设为整数。对于后者，您尝试立即从中构造一个`int`，而无需使用任何异常处理来保护该尝试。

* * *

还有一些其他的逻辑缺陷。现在，`while`例如，您的无限循环不执行任何操作。（无论如何，您在第一次通过后返回）。将`return`语句移到`break`可能会*使它做你想做的事。此外，您不会对`int`您构造的 ( `i`) 做任何事情，尽管尚不清楚您是否*应该*返回它或`key`.

*我正在假设您的程序应该在这里做什么......

# ios - 防止 UIWebView 无限期地分配内存（NSURLCache 显然不起作用）

> ID：15275056
> 
> 赞同：6
> 
> 时间：2013-03-07T15:28:25.413
> 
> 标签：ios, memory-management, uiwebview, instruments, nsurlcache

我一直试图了解 UIWebView 缓存是如何工作的。因为我的目标是**能够管理 UIWebView 分配的内存**（至少，尽可能多），以避免内存无限增加和应用程序因此而被杀死。

在[阅读了](https://stackoverflow.com/questions/9744644/uiwebview-without-cache) [其他](https://stackoverflow.com/questions/2090286/uiwebview-and-nsurlcache-have-a-troubled-relationship) [stackoverflow](https://stackoverflow.com/q/11350978/1264909) [问题](https://stackoverflow.com/questions/1870004/does-nsurlconnection-take-advantage-of-nsurlcache)并[搜索](http://nshipster.com/nsurlcache/) [了](http://twobitlabs.com/2012/01/ios-ipad-iphone-nsurlcache-uiwebview-memory-utilization) [网络](http://petersteinberger.com/blog/2012/nsurlcache-uses-a-disk-cache-as-of-ios5/)之后，我决定尝试**NSURLCache sharedURLCache**，但我无法弄清楚它是如何工作的。

**我的测试场景是这样的：**

**我已经为iOS 5**实现了一个测试应用程序，其中我有一个带有 UIWebView 的单一视图。这个 UiWebview 将加载一个本地*index.html*文件，如下所示：

```
// Create an NSString from the local HTML file
NSString *fullURL = [[NSBundle mainBundle] pathForResource:@"index" ofType:@"html" inDirectory:@"www"];
NSURL *url = [NSURL fileURLWithPath:fullURL];
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
// Load local HTML file
[self.webView loadRequest:requestObj]; 
```

在这个*index.html*文件中，我有一个 JS 脚本，它从 Flickr 下载 JSON，并将最后一张图片上传到他们的公共提要。每个图像都附加到一个列表中。整个过程每秒重复一次，直到我们从提要中下载 1000 张图像。见代码：

```
var nImg = 0;

function getData()
{
    $.getJSON('http://api.flickr.com/services/feeds/photos_public.gne?format=json&jsoncallback=?', function(data)
    {
        var items = [];
        $.each(data.items, function(i, image) {
            items.push('<li id="' + image.title + '"><img src="' + image.media.m + '"/></li>');
        });
        $('#page > #imagesList').append(items.join''));
        nImg += items.length;
    });
    $('#page > #numImages').html(nImg);

    if(nImg < 1000)
        setTimeout("getData();", 1000); // Get more data in 1s
}

$(document).ready(function()
{
    getData();
}); 
```

[最后，在我的](http://nshipster.com/nsurlcache/)AppDelegate 中，我按照本文所述设置了 sharedURLCache ：

```
// Initialize the Cache, so we can control the amount of memory it utilizes
int cacheSizeMemory = 4*1024*1024; // 4MB
int cacheSizeDisk = 32*1024*1024; // 32MB
NSURLCache *sharedCache = [[NSURLCache alloc] initWithMemoryCapacity:cacheSizeMemory diskCapacity:cacheSizeDisk diskPath:nil];

[NSURLCache setSharedURLCache:sharedCache]; 
```

但是，不管它应该发生什么，当我打开仪器并运行应用程序检查分配时，内存在我们下载图像（高达 20MB）时不断增长，而不是像我所期望的那样扁平化 4-6MB 如果 UIWebView将使用此 sharedURLCache 来缓存下载的图像。

![达到 1000 张图像后的仪器演变](../Images/eb87b91071178277f00d52500bfa0cea.png)

有人知道我在做什么错吗？我误解了什么吗？我加载页面错误吗？UIWebView 是否对 JS 中加载的图像使用另一个缓存？

请让我知道你的想法。我真的需要了解这个 sharedURLCache 是如何工作的，以及 UIWebView 如何使用它来缓存 URLRequest、图像……以防万一它被使用。**我不想有一个使用 UIWebView 的应用程序，它可以不受控制地分配内存。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-17T20:11:22.660

你最后是怎么做到的？我注意到您`*sharedCache initWithMemoryCapacity`的`diskPath`论点是`nil`.

来自苹果 doco：

> 在 iOS 中，path 是应用程序默认缓存目录的子目录的名称，用于存储磁盘缓存（如果子目录不存在，则创建该子目录）。

查看两位实验室关于如何使用缓存的链接：http: [//twobitlabs.com/2012/01/ios-ipad-iphone-nsurlcache-uiwebview-memory-utilization/](http://twobitlabs.com/2012/01/ios-ipad-iphone-nsurlcache-uiwebview-memory-utilization/)

配置共享缓存

首先，让我们在应用程序启动时（在发出任何请求之前）配置缓存，以便我们可以控制它使用的内存量。在您的 UIApplicationDelegate 中：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {   
    int cacheSizeMemory = 4*1024*1024; // 4MB
    int cacheSizeDisk = 32*1024*1024; // 32MB
    NSURLCache *sharedCache = [[[NSURLCache alloc] initWithMemoryCapacity:cacheSizeMemory diskCapacity:cacheSizeDisk diskPath:@"nsurlcache"] autorelease];
    [NSURLCache setSharedURLCache:sharedCache];
... 
```

以上配置了 4MB 内存缓存和 32MB 磁盘缓存。磁盘缓存将驻留在名为“nsurlcache”的子目录中的默认 iOS 缓存目录中。

响应内存警告

我们在使用 Web 视图的应用程序中看到的最常见崩溃原因是在出现内存警告时没有释放足够的内存而被弹出。当您的应用程序收到内存警告时，您应该清除共享缓存以释放内存. 在您的 UIApplicationDelegate 中执行此操作：

```
- (void)applicationDidReceiveMemoryWarning:(UIApplication *)application {
    [[NSURLCache sharedURLCache] removeAllCachedResponses];
} 
```

现在，当您在分析器中运行应用程序时，您应该会看到内存使用率趋于平缓，如果您在模拟器中触发内存警告，您应该会看到内存使用率下降。

# c# - 拆分列表的一部分 进入 2 列表 的和加入那些 2

> ID：15275058
> 
> 赞同：0
> 
> 时间：2013-03-07T15:28:29.133
> 
> 标签：c#, list, iteration

在过去的几个小时里，我一直被这个问题所困扰，希望你能帮助我。

我有一个充满数据的列表（请参阅类：allItems），但我想拆分数据，因此类项目将所有数据与包含子项目的项目内的公共列表一起保存。

此代码段中发生的情况是，在 for 循环期间，将具有相同值的项目添加到天数列表中，这是我在尝试将正确数量的条目添加到天数列表中时遇到的困难，因为同一周有多少次allStats 列表中的数字表示。

任何帮助将不胜感激，谢谢。

```
public class allItems
{
    public DateTime PunchInDate { get; set; }
    public DateTime PunchOutDate { get; set; }
    public DayOfWeek DayOfWeek { get; set; }
    public int WeekNumber { get; set; }
    public int MonthNumber { get; set; }
    public bool PunchedInLate { get; set; }
    public bool PunchedOutLate { get; set; }
}
public class items
{
    public int WeekNumber { get; set; }
    public int MonthNumber { get; set; }
    public List<subItems> Days { get; set; }
}
public class subItems
{
    public bool PunchedInLate { get; set; }
    public bool PunchedOutLate { get; set; }
    public DateTime PunchInDate { get; set; }
    public DateTime PunchOutDate { get; set; }
    public DayOfWeek DayOfWeek { get; set; } 
}
protected int getNumberOfWeeks(List<allItems> list, int numberToFind)
{
    List<allItems> results = list.FindAll(
        delegate(allItems ai)
        {
            return ai.WeekNumber == numberToFind;
        }
        );
    return results.Count;
}
public List<items> getStats(string userId, string type)
{
    List<allItems> allStats = getAllStats(userId, "week");
    List<items> stats = new List<items>();

    foreach (allItems allItem in allStats)
    {
        items item = new items();
        subItems subItem = new subItems();
        List<subItems> Days = new List<subItems>();

        item.MonthNumber = allItem.MonthNumber;
        item.WeekNumber = allItem.WeekNumber;
        item.Days = Days;

        int numberOfWeeks = getNumberOfWeeks(allStats, allItem.WeekNumber);
        for (int i = 0; i < numberOfWeeks; i++)
        {
            subItem.DayOfWeek = allItem.DayOfWeek;
            subItem.PunchedInLate = allItem.PunchedInLate;
            subItem.PunchedOutLate = allItem.PunchedOutLate;
            subItem.punchInDate = allItem.PunchInDate;
            subItem.PunchOutDate = allItem.PunchOutDate;

            Days.Add(subItem);
        }

        items result = stats.Find(week => week.WeekNumber == allItem.WeekNumber);

        if (result == null)
        {
            stats.Add(item);
        }
    }

    return stats;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T15:33:39.523

听起来你可以用 linq 做到这一点：

```
var allItemsList = new List<allItems>() { ... fill in items ... };
var asItems = 
    from item in allItemsList
    group item by new { week = item.weekNumber, month = item.monthNumber } into byWeekMonth
    select new items()
    {
        weekNumber = byWeekMonth.Key.week,
        monthNumber = byWeekMonth.Key.month,
        days = byWeekMonth.Select(si => 
            new subItems()
            {
                punchedInLate = si.punchedInLate,
                punchedOutLate = si.punchedOutLate,
                // etc, other fields
            }).ToList()
    }; 
```

# assembly - x86 cr0 WP 位的用途是什么？

> ID：15275059
> 
> 赞同：13
> 
> 时间：2013-03-07T15:28:35.380
> 
> 标签：assembly, x86, operating-system, intel, cpu-architecture

在 x86 CPU 中，有编号为 0 的控制寄存器。该寄存器的第 16 位表示“写保护”设置。如果该位被清除，CPU 能够覆盖只读数据。（在页表条目中配置）在内存中。如果该位被设置，CPU 不能覆盖内存中的 RO 数据。

我很好奇的是“这个位的初衷是什么？？” “为什么 x86 CPU 需要这个？？”

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-07T17:22:47.550

引用[英特尔® 64 和 IA-32 架构软件开发人员手册第 3A 卷第 页。2-15](http://www.intel.com/content/dam/www/public/us/en/documents/manuals/64-ia-32-architectures-software-developer-vol-3a-part-1-manual.pdf)（强调我的）：

> WP 写保护（CR0 的第 16 位）— 设置时，禁止管理员级程序写入只读页面；当清零时，允许管理员级程序写入只读页面（无论 U/S 位设置如何；参见第 4.1.3 节和第 4.6 节）。**此标志有助于实现创建由操作系统（如 UNIX）使用的新进程（分叉）的写时复制方法。**

更新：查看[关于 fork() 的维基百科](http://en.wikipedia.org/wiki/Fork_%28operating_system%29#Fork_and_page_sharing)：

> 每当进程（父进程或子进程）修改页面时，都会为执行修改的进程（父进程或子进程）单独制作该特定页面的单独副本。

这是写入时复制的核心，但在内核完成修改时会出现问题（例如当写入是由于 syscall - think 发生时`read()`）。

从[4.1.3](http://www.intel.com/content/dam/www/public/us/en/documents/manuals/64-ia-32-architectures-software-developer-vol-3a-part-1-manual.pdf)开始：

> CR0.WP 允许保护页面免受管理员模式写入。如果 CR0.WP = 0，则允许对具有只读访问权限的线性地址进行超级模式写访问；如果 CR0.WP = 1，则不是。（无论 CR0.WP 的值如何，都不允许用户模式写访问具有只读访问权限的线性地址。）

通过设置`CR0.WP = 1`内核将在修改只读用户页面时收到通知（带有页面错误），并且可以在继续页面修改之前执行写时复制操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-24T11:05:46.460

WP=1 是默认值。它在内核写入只读（写保护）用户（U）页面时启用陷阱，因此内核可以检查它是否是 COW 页面（因此它知道需要创建另一个不是 COW 的页面副本） ，否则它将不得不检查它正在访问的每个内存地址，否则它会通过使更改对映射内存的其他进程可见而破坏 COW。

WP 可以设置为 0（但它希望确保在此处理期间禁用/屏蔽中断，以便控制不能被不知道此条件的代码执行带走）。这允许写保护的 cr3 页面被取消写保护（因为当您将其递归 PML4 条目中的写位取消设置为自身时，在您 WP = 0 之前无法对其进行任何操作，否则它将继续导致陷阱）

# c# - XPath 只返回特定的子节点但与父节点 - 可能吗？

> ID：15275062
> 
> 赞同：3
> 
> 时间：2013-03-07T15:28:45.660
> 
> 标签：c#, .net, xml, xpath

假设我有这样的 XML：

```
<Entity>
    <Record name="My Record 1" id="3a41b5c1-2462-e211-8a1c-005056b02dd2" count="1">
        <Data name="ec_name" value="My Name 1" linked="false" />
        <Data name="ec_allteams" value="100000000" linked="false" />
        <Data name="ec_teamtype" value="100000001" linked="false" />
    </Record>
    <Record name="My Record 2" id="3a41b5c1-2462-e211-8a1c-005056b02dd3" count="2">
        <Data name="ec_name" value="My Name 2" linked="false" />
        <Data name="ec_allteams" value="100000002" linked="false" />
        <Data name="ec_teamtype" value="100000003" linked="true" />
    </Record>
    <Record name="My Record 3" id="3a41b5c1-2462-e211-8a1c-005056b02dd4" count="3">
        <Data name="ec_name" value="My Name 3" linked="false" />
        <Data name="ec_allteams" value="100000004" linked="false" />
        <Data name="ec_teamtype" value="100000005" linked="false" />
    </Record>
</Entity> 
```

什么是 XPath 只返回链接 ='true' 的记录 + 数据子节点？例如，我想得到以下结果：

```
 <Record name="My Record 2" id="3a41b5c1-2462-e211-8a1c-005056b02dd3" count="2">
        <Data name="ec_teamtype" value="100000003" linked="true" />
    </Record> 
```

这在 XPath 中可行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T15:34:43.420

不可能完全做到这一点，但您可以获取 Data 节点，然后读取它的父节点：

数据节点：`/Entity/Record/Data[@linked='true']`

包含带有linked=true 的子节点的记录节点：`/Entity/Record[Data/@linked='true']`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:22:25.097

获取链接 = true 的所有数据节点

```
//Data[@linked='true'] 
```

获取链接的父级 = true

```
//Data[@linked='true']/.. 
```

这将返回已链接=true 的父节点和子节点

```
//Data[@linked='true']//parent 
```

# jquery - Update div or another html tag

> ID：15275063
> 
> 赞同：0
> 
> 时间：2013-03-07T15:28:45.607
> 
> 标签：jquery, ajax

I wanna update div tag after ajax:

```
 $.ajax({
            type: 'GET', // or POST, no difference
            url: "<?php echo Yii::app()->createUrl('words/nextWord');?>",
            success: function(data) {
                // There need add code
            }
        })
    } 
```

After ajax i have response whole page with change change and me need change word in this tags or substitute div. I tried use:

```
$('#word').load("<?php echo Yii::app()->createUrl('words/nextWord'); ?> #word"); 
```

Before code above i had

```
<span id="word" class="word">dog</span> 
```

After code above i had

```
<span id="word" class="word">
    <span id="word" class="word"> good</span>
</span> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:02:27.880

此 url **words/nextWord**中的内容可能是

```
"<span id="word" class="word"> good</span>" 
```

但它应该只返回“好”。所以 load 方法将内容插入其中。尝试直接在浏览器中调用该 url 并检查它返回的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:32:50.030

我不完全是你想要做的，但该`.html()`函数将替换元素的内容`#word`。

```
$('#word').html("<?php echo Yii::app()->createUrl('words/nextWord'); ?>"); 
```

# bouncycastle - How to generate a pgp public keyring with bouncycastle without having a private key

> ID：15275065
> 
> 赞同：2
> 
> 时间：2013-03-07T15:28:52.837
> 
> 标签：bouncycastle, pgp

I'm trying to perform pgp encryption/decryption operations via Camel / Bouncy Castle PGP where I store the used keys in a JKS files and generate PGP keyrings on the fly from the public/private keys in the JKS stores (Camel only works with keyrings - it can't use keys direclty).

The problem comes when I need to perform an PGP encrypt operation where I only get a public key with which I should do the encryption and I don't have/need a private key. I checked the Bouncy Castle PGP API at [http://www.bouncycastle.org/docs/pgdocs1.5on/index.html](http://www.bouncycastle.org/docs/pgdocs1.5on/index.html) and found no way to generate a PGP public keyring without having at least one private key.

To be more specific - the only way to create a PGP keyring is to use the org.bouncycastle.openpgp.PGPKeyRingGenerator class but all its constructors need a (non null) PGPKeyPair argument which needs a PGP Public Key.

Is it possible at all to have a PGP public key ring without having a private key?

Thank you

# javascript - javascript - 使用 zip.js 压缩 Blob

> ID：15275068
> 
> 赞同：6
> 
> 时间：2013-03-07T15:28:57.657
> 
> 标签：javascript, file, compression, zip, blob

我需要在 WebSQl 中存储大量文本，所以我决定用[zip.js](http://gildas-lormeau.github.com/zip.js/)压缩文本 并存储压缩后的 Blob

从文档中，您可以按如下方式压缩 blob

```
function zipBlob(filename, blob, callback) {
   // use a zip.BlobWriter object to write zipped data into a Blob object
   zip.createWriter(new zip.BlobWriter("application/zip"), function(zipWriter) {
      // use a BlobReader object to read the data stored into blob variable
      zipWriter.add(filename, new zip.BlobReader(blob), function() {
         // close the writer and calls callback function
         zipWriter.close(callback);
      });
   }, onerror);
} 
```

尽管这可行，但我不明白您为什么需要指定文件名。这真的有必要吗？而且，这个文件在压缩后总是被删除吗？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-19T03:06:56.560

在这里检查这个答案 - 它不需要文件名，我敢打赌它更容易使用。我已经尝试了很多 javascript 压缩/解压缩实现，并且受到诸如原始数据大小限制、整体速度、效率等问题的困扰。在javascript中找到一个好的压缩/解压缩实现是非常困难的，但幸运的是这个还没有让我失望（而且我已经使用了很多次）：

[在javascript中压缩一个blob](https://stackoverflow.com/questions/17130387/compressing-a-blob-in-javascript/17181892#17181892)

您当前的实现需要文件名，因为它试图与 zip 保持一致，以便您可以将其保存到例如桌面并使用您最喜欢的 zip 实用程序打开它。听起来您的挑战与我的非常相似，我需要从浏览器和服务器的本地存储中保存和恢复压缩项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-20T03:02:45.093

根据此实现，文件名是必需的。如果您只是压缩数据，则没有必要，但 zip.js 构建 zip 文件，这些文件存储文件，这些文件必须具有文件名。

在您的原始示例中， zipWriter.add() 有效地将您的 blob 转换为一个新文件并将其添加到一个 zip 中——“filename”参数是您希望该新文件具有的名称。

下面是一个使用 zip.js 将多个 blob 添加到 zip 的示例，然后使用 FileSaver.js 下载它：

```
function zipBlob() {
    zip.createWriter(new zip.BlobWriter("application/zip"), function(writer) {
        files = ["abcd", "123"];
        var f = 0;

        function nextFile(f) {
            fblob = new Blob([files[f]], { type: "text/plain" });
            writer.add("file"+f, new zip.BlobReader(fblob), function() {
                // callback
                f++;
                if (f < files.length) {
                    nextFile(f);
                } else close();
            });
        }

        function close() {
            // close the writer
            writer.close(function(blob) {
                // save with FileSaver.js
                saveAs(blob, "example.zip");
            });
        }

        nextFile(f);

    }, onerror);
} 
```

# java - Joda Time: Finding which days are in a period

> ID：15275075
> 
> 赞同：1
> 
> 时间：2013-03-07T15:29:03.287
> 
> 标签：java, datetime, jodatime

I have two DateTime variables: `DateTime begin, DateTime end`, now I want to "walk trough" the period between these dates and determine date by date if that specific date is a monday, tuesday, etc... (Giving the days a number from 1 to 7).

I can't seen to figure out how to walk through the period date by date...

Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:36:01.290

类似的东西；

```
for (DateTime current = begin; current.isBefore(end); current = current.plusDays(1)) {
    // do stuff
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T15:35:41.840

我猜这应该可行

```
 ArrayList<Integer> days = new Arraylist<Integer>();
    while(begin.isBefore(end)){
        days.add(begin.getDayOfWeek());
        begin.plusDays(1);
    } 
```

# c# - Modifying List in ViewState does not persist

> ID：15275076
> 
> 赞同：1
> 
> 时间：2013-03-07T15:29:03.307
> 
> 标签：c#, linq, list, viewstate

I have a `ViewState` holding a `List<T>`

```
public List<AwesomeInt> MyList
{
  get { return ((List<int>)ViewState["MyIntList"]).Select(i => new AwesomeInt(i)).ToList(); }
  set { ViewState["MyIntList"] = value.GetIntegers(); }
} 
```

Now, when I call `MyList.Add(new AwesomeInt(3))` let's say, the list does not persist the change.

I believe this is because the `.ToList()` in the `get` is creating a new List object and therefore the `set` will never be called, thus never saving in ViewState.

I have worked around this problem before by either

1.  not calling `.Select/.ToList()` by saving/calling directly without a conversion.
2.  not using the `.Add` or `.Remove` functions and instead re-initializing the `List` with an equals.

However sometimes `1.` is impractical if the class is not serializable and I have no control over that, and `2.` is kind of ugly because I have to copy it to a temp first, then add, then re-assign, or play around with `Concat` to add a single item.

Is there a better way of doing this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:12:17.590

好的，下面是一个功能齐全的控制台应用程序，它应该为您提供所需的功能。我利用了泛型，以便您可以构建任何必要类型的周边集合——但还要序列化一些更基本的东西。请记住，我没有要写入的真实视图状态，`set`但您可以修复它。

另外请记住，我在很短的时间内（**例如**20 分钟）编写了此代码，因此可能存在优化（**例如**，属性`set`上的`ViewState`属性通常不是必需的，因为此解决方案修改了底层的基本数据源）。

```
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Collections.Specialized;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApplication1
{
    class Program
    {
        static List<int> _viewState = new List<int>();
        static RawCollection<AwesomeInt, int> ViewState
        {
            get { return new RawCollection<AwesomeInt, int>(_viewState); }
            set { _viewState = value.RawData; }
        }

        static void Main(string[] args)
        {
            ViewState.Add(new AwesomeInt(1));
            ViewState.Add(new AwesomeInt(2));
            WriteViewState();

            ViewState[0].Val = 5;
            WriteViewState();

            ViewState.RemoveAt(0);
            WriteViewState();

            for (int i = 10; i < 15; i++)
            {
                ViewState.Add(new AwesomeInt(i));
            }
            WriteViewState();
        }

        private static void WriteViewState()
        {
            for (int i = 0; i < ViewState.Count; i++)
            {
                Console.WriteLine("The value at index {0} is {1}.", i, ViewState[i].Val);
            }

            Console.WriteLine();
            Console.WriteLine();
        }
    }

    public class RawCollection<T, K> : Collection<T>
    {
        private List<K> _data;

        public RawCollection(List<K> data)
        {
            foreach (var i in data)
            {
                var o = (T)Activator.CreateInstance(typeof(T), i);
                var oI = o as IRawData<K>;
                oI.RawValueChanged += (sender) =>
                {
                    _data[this.IndexOf((T)sender)] = sender.Val;
                };

                this.Add(o);
            }
            _data = data;
        }

        public List<K> RawData
        {
            get
            {
                return new List<K>(
                    this.Items.Select(
                        i => ((IRawData<K>)i).Val));
            }
        }

        protected override void ClearItems()
        {
            base.ClearItems();

            if (_data == null) { return; }
            _data.Clear();
        }

        protected override void InsertItem(int index, T item)
        {
            base.InsertItem(index, item);

            if (_data == null) { return; }
            _data.Insert(index, ((IRawData<K>)item).Val);
        }

        protected override void RemoveItem(int index)
        {
            base.RemoveItem(index);

            if (_data == null) { return; }
            _data.RemoveAt(index);
        }

        protected override void SetItem(int index, T item)
        {
            base.SetItem(index, item);

            if (_data == null) { return; }
            _data[index] = ((IRawData<K>)item).Val;
        }
    }

    public class AwesomeInt : IRawData<int>
    {
        public AwesomeInt(int i)
        {
            _val = i;
        }

        private int _val;
        public int Val
        {
            get { return _val; }
            set
            {
                _val = value;
                OnRawValueChanged();
            }
        }

        public event Action<IRawData<int>> RawValueChanged;

        protected virtual void OnRawValueChanged()
        {
            if (RawValueChanged != null)
            {
                RawValueChanged(this);
            }
        }
    }

    public interface IRawData<T> : INotifyRawValueChanged<T>
    {
        T Val { get; set; }
    }

    public interface INotifyRawValueChanged<T>
    {
        event Action<IRawData<T>> RawValueChanged;
    }
} 
```

# ruby-on-rails - Rspec：为什么你可以通过测试替身给你的应用程序代码？

> ID：15275079
> 
> 赞同：1
> 
> 时间：2013-03-07T15:29:09.950
> 
> 标签：ruby-on-rails, ruby, rspec

我正在阅读[*rspec-mocks*](https://github.com/rspec/rspec-mocks)并对 Message Expectations 感到有些困惑。

> 消息期望是测试替身将在示例结束前的某个时间收到消息的期望。如果收到消息，则期望得到满足。如果不是，则示例失败。
> 
> ```
> validator = double("validator")
> validator.should_receive(:validate).with("02134")
> zipcode = Zipcode.new("02134", validator)
> zipcode.valid? 
> ```

所以我的理解是你创建一个虚拟对象并指定它应该“接收”一条带有参数的消息（这是来自 ActiveModel的[验证](http://api.rubyonrails.org/classes/ActiveModel/EachValidator.html#method-i-validate)`02134`） 。如果它在某个时候这样做，那么这个测试将通过。

我的问题是：

1.  为什么能`validator`传到`Zipcode.new`？您的应用程序代码是否应该接受额外的参数（测试替身）？

2.  “接收消息”对于测试替身究竟意味着什么？这是否意味着它将被消息（在本例中为`validate`方法）调用？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:37:03.167

Ruby 中没有类型，因此您可以将任何对象发送到任何方法。这回答了你的`1`

对于您的`2`：

双打非常棒，因为要测试一个独立的方法，你实际上不需要一个完整的对象。

`should_receive(:foo)`方法：

*   您希望您的替身收到该`foo`方法（`your_double.foo`某处）

*   `foo`不会被调用，但它可以返回您想要（使用`and_return`）的结果以继续您的规范。

# database - Drop database from WiX installer

> ID：15275080
> 
> 赞同：0
> 
> 时间：2013-03-07T15:29:14.760
> 
> 标签：database, wix, wix3.6

The properties `[DATABASE_NAME]` and `[SERVER_NAME]` are defined by the user at installation and it seems like unless they are hard coded then doing this fails:

```
 <Component Id="Component.Sql.Database" Guid="*">
    <sql:SqlDatabase 
      Id="Sql.Database" 
      Database="[DATABASE_NAME]"
      Server="[SERVER_NAME]" 
      CreateOnInstall="yes" 
      DropOnUninstall="yes"
      ContinueOnError="no"
      ConfirmOverwrite="yes" />
</Component> 
```

The bit that is supposed to drop the db is `DropOnUninstall="yes"`

I've found a post on the WiX user group suggesting the following approach to dropping the database on uninstall:

```
 <Component Id="Component.Sql.DropDatabase" Guid="146CD264-1F6D-4E19-BFCC-E544F5BD2D6C">
    <sql:SqlString
      Id="Sql.DropDatabase"
      SqlDb="Sql.Master"
      Sequence="1000"
      ExecuteOnInstall="no"
      ExecuteOnUninstall="yes"
      ExecuteOnReinstall="no"
      ContinueOnError="no"
      SQL="DROP DATABASE [\[][DATABASE_NAME]\[]]"/>
  </Component>

  <Fragment>
    <sql:SqlDatabase Id="Sql.Master" Database="master" Server="[SERVER_NAME]" />
  </Fragment> 
```

The idea being that at uninstall the `DROP DATABASE ...` command is executed on the `master` database on the server. However this SQL statement never gets executed on the server.

The MSIEXEC log doesn't seem to give any information and I get no errors.

Has anyone successfully achieved this (before I write a custom action to do this)?

I've tried copying the database name and server to the registry to cache them, but this hasn't helped.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-15T11:10:35.457

```
 <Wix xmlns="http://schemas.microsoft.com/wix/2006/wi" 
    xmlns:util="http://schemas.microsoft.com/wix/UtilExtension"  <!-- Need to import this -->
    xmlns:sql="http://schemas.microsoft.com/wix/SqlExtension"><!-- Need to import this -->

<sql:SqlDatabase Id="SqlDatabase" 
             Database="TestDatabase" 
             Server="[SQLSERVER]" 
             DropOnUninstall="yes" 
             User="SQLUser"> 
```

这肯定会奏效......

# symfony - twig convert a string to the object that it represent

> ID：15275084
> 
> 赞同：5
> 
> 时间：2013-03-07T15:29:26.720
> 
> 标签：symfony, twig

imaging that i have a object and which can be called in a twig template like this:

```
{{ object1.object2.object3.property3A }} 
```

well, it will show me the content if we use php to write is :

```
$object1->getObject2()->getObject3()->getProperty3A(); 
```

My question is if i have a string ,

```
$refString="object1.object2.object3.property3A"; 
```

and then it is passed to twig, how could i get the property3A? For my experience, we can do this in php like this:

```
$refString="object1->getObject2()->getObject3()->getProperty3A()";
echo $$refString; 
```

But i do not know how to make it work in twig.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T11:06:22.220

我没有对此进行测试，但我认为它应该可以解决问题。

```
{#
    recursively reading attributes from an object
    ! object1 must be available !
    theValue is the value of property3A
#}
{% for key in "object1.object2.object3.property3A"|split('.') %}
  {% if not loop.first %}{# skip the 'object1' part #}
    {% set theValue = attribute(theValue|default(object1), key) %}
  {% endif %}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:42:08.940

我认为在树枝中没有“捷径”可以做到这一点。如果您找不到简单的方法来执行此操作，您可以编写自己的扩展程序，将 STRING_TYPE 转换为 VAR_TYPE。

[Twig internals](http://twig.sensiolabs.org/doc/internals.html)可能会让你走上正确的轨道。[这](https://stackoverflow.com/questions/10945200/twig-variables-in-twig-variable)是树枝扩展可行的示例，可能会启发您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-28T14:00:31.150

我遇到了类似的情况。此答案仅在您需要的对象可用于模板并且您通过字符串知道它的名称时才有效。

在这种情况下，您可以使用 Twig 的全局变量访问对象`_context`：

```
{% set object1 = _context['object1'] %} 
```

然后正常访问对象的方法和变量：

```
{{ object1.object2.object3.property3A }} 
```

# gwt - GWT - 从外部 javascript 调用实例方法

> ID：15275087
> 
> 赞同：8
> 
> 时间：2013-03-07T15:29:28.403
> 
> 标签：gwt, jsni

我们可以在 GWT 中使用这个 $entry 方法来允许外部 javascript 执行 java 方法。您可以在他们的文档中查看解释[https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI?hl=fr#calling](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI?hl=fr#calling)

但是，该示例仅使用静态方法。我正在尝试为非静态方法编写它，当我尝试调用它时，出现异常：

```
java.lang.ClassCastException: Cannot cast com.google.gwt.core.client.JavaScriptObject$ to mypackage.MyModule 
```

这是我的代码：

```
public native void setRefreshModuleCallback() /*-{
    $wnd.refreshModule = $entry(function() {
        this.@mypackage.MyModule::refreshModuleJava();
        alert('test');
    });
}-*/;

public void refreshModuleJava() {
    logger.log(Level.WARNING, "REFRESH");
} 
```

我觉得很有趣的是调用了警报，我在浏览器中看到了结果，但是没有执行之前的调用。

你知道是否真的可以做这样的事情吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-07T15:37:58.663

`$entry`不是关于*调用 java*，而是关于确保 GWT 中的一些事情顺利进行：异常被路由到, 并且*通过*和`GWT.UncaughtExceptionHandler`调度的命令被正确调用。 *`Scheduler#scheduleEntry``Scheduler#scheduleFinally`*

 *你的问题是`this`. 当函数被调用时，`this`不是你的`MyModule`类（它很可能是`$wnd`对象）。这就是为什么您链接到的问题使用`var that = this`. 这是关于*范围界定*的。

您还需要实际*调用*该方法，而不仅仅是引用它：在 JSNI 中，第一对括号用于形式参数（以消除重载的歧义），您需要另一对传递实际参数：`that.@mypackage.MyModule::refreshModuleJava()()`.*

# content-type - The SPListItem being updated was not retrieved with all taxonomy fields

> ID：15275093
> 
> 赞同：2
> 
> 时间：2013-03-07T15:29:41.027
> 
> 标签：content-type, taxonomy, sharepoint-2013

I have added document library template using VS 2012\. and then added custom content types to this library. the content types includes 3 managed metadata fields. After deploying the project when I add terms to taxonomy fields in document library, I got following error:

"The SPListItem being updated was not retrieved with all taxonomy fields"

I could not find any solution. Any body have an idea whats wrong ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-11T10:42:38.600

在内容类型的 ELEMENTS.XML 文件中，您的字段（实际上您需要两个，注意它们是如何链接在一起的）必须类似于：

```
<Field Type="Note"
     ID="{4B53F593-CF60-40DF-AEAF-23155BB9AA3F}"
     DisplayName="_Circular_Tags"
     Name="Circular_Tags_NOTE"
     StaticName="Circular_Tags_NOTE"
     ShowInViewForms="FALSE"
     Required="FALSE"
     Hidden="TRUE"
     CanToggleHidden="TRUE"
     RowOrdinal="0">
  </Field>
  <Field Type="TaxonomyFieldTypeMulti"
     ID="{DF553026-F699-456F-AA24-0C6087DBE885}"
     Name="Circular_Tags"
     StaticName="Circular_Tags"
     DisplayName="Circular_Tags_DisplayName"
     Description="Circular_Tags_Description"
     ShowField="Circular_Tags_Path"
     Required="FALSE"
     Sortable="FALSE"
     AllowDeletion="TRUE"
     EnforceUniqueValues="FALSE"
     ShowInViewForms="TRUE"
     Group="MyContentTypes_Group">
    <Default></Default>
    <Customization>
      <ArrayOfProperty>
        <Property>
          <Name>TextField</Name>
          <Value xmlns:q6="http://www.w3.org/2001/XMLSchema" p4:type="q6:string" xmlns:p4="http://www.w3.org/2001/XMLSchema-instance">{4B53F593-CF60-40DF-AEAF-23155BB9AA3F}</Value>
        </Property>
      </ArrayOfProperty>
    </Customization>
  </Field> 
```

然后您需要（在功能激活代码中）执行以下操作：

```
 SPSite site = properties.Feature.Parent as SPSite;
Guid fieldId = new Guid("{DF553026-F699-456F-AA24-0C6087DBE885}");
if (site.RootWeb.Fields.Contains(fieldId))
{
    TaxonomySession session = new TaxonomySession(site);
    if (session.TermStores.Count != 0)
    {
        var termStore = session.TermStores["ManagedMetadata_Proxy"];
        var group = termStore.Groups["GroupName"];
        var termSet = group.TermSets["TermSetName"];
        TaxonomyField field = site.RootWeb.Fields[fieldId] as TaxonomyField;

        //set the text field to the id of the _Circular_Tags field : 4B53F593-CF60-40DF-AEAF-23155BB9AA3F
        field.TextField = new Guid("{4B53F593-CF60-40DF-AEAF-23155BB9AA3F}");

        // Connect to MMS
        field.SspId = termSet.TermStore.Id;
        field.TermSetId = termSet.Id;
        field.TargetTemplate = string.Empty;
        field.AnchorId = Guid.Empty;
        field.Update();
    }
} 
```

最后，在列表定义中的 SCHEMA.XML 文件中，您应该为该字段提供如下定义：

```
<Field Type="TaxonomyFieldType" ID="{DF553026-F699-456F-AA24-0C6087DBE885}" Name="Circular_Tags" StaticName="Circular_Tags" DisplayName="Circular_Tags_DisplayName" Description="Circular_Tags_Description" ShowField="Circular_Tags_Path" Mult="TRUE" Required="FALSE" Sortable="FALSE" AllowDeletion="TRUE" EnforceUniqueValues="FALSE" ShowInViewForms="TRUE" Group="ContentTypes_Group">
        <Default></Default>
        <Customization>
          <ArrayOfProperty>
            <Property>
              <Name>TextField</Name>
              <Value xmlns:q6="http://www.w3.org/2001/XMLSchema" p4:type="q6:string" xmlns:p4="http://www.w3.org/2001/XMLSchema-instance">{4B53F593-CF60-40DF-AEAF-23155BB9AA3F}</Value>
            </Property>
          </ArrayOfProperty>
        </Customization>
      </Field> 
```

# routes - Apache Camel Context starting but not finding routes

> ID：15275094
> 
> 赞同：0
> 
> 时间：2013-03-07T15:29:40.850
> 
> 标签：routes, apache-camel

I am currently trying to implement apace camel spring based routing into my project and am coming across some issues. I am able to get the CamelContext to automatically start when I run my program but I keep getting the messsage:

Total 0 routes, of which 0 is started. Apache Camel 2.6.0 (CamelContext: camel-1) started in 0.790 seconds

This is showing up in the logging.

I will post the "camel-context" and maybe someone can point to where I am going astray. I am lost at the moment and am really trying to get a handle on this technology because it does sound pretty powerful. I hope this is an easy fix! Let me know if you need anything else.

```
<?xml version="1.0" encoding="UTF-8"?>

<spring:beans xmlns:spring="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://camel.apache.org/schema/spring"
xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
xmlns:alch="http://service.alchemy.kobie.com/"
xsi:schemaLocation="http://www.springframework.org/schema/beans classpath:META-INF/spring/spring-beans.xsd 
    http://camel.apache.org/schema/spring classpath:META-INF/spring/camel-spring.xsd">

<!-- load properties -->
<spring:bean
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <spring:property name="locations" value="file:backend.properties" />
</spring:bean>

<spring:bean id="properties"
    class="org.apache.camel.component.properties.PropertiesComponent">
    <spring:property name="location" value="file:backend.properties" />
</spring:bean>

<spring:bean id="jmsConnectionFactory" 
    class="org.apache.activemq.ActiveMQConnectionFactory">
    <spring:property name="brokerURL" value="tcp://0.0.0.0:61616?useLocalHost=true" />
</spring:bean>

<spring:bean id="pooledConnectionFactory" 
    class="org.apache.activemq.pool.PooledConnectionFactory">
    <spring:property name="maxConnections" value="8" />
    <spring:property name="maximumActive" value="500" />
    <spring:property name="connectionFactory" ref="jmsConnectionFactory" />
</spring:bean>

<spring:bean id="jmsConfig" 
    class="org.apache.camel.component.jms.JmsConfiguration">
    <spring:property name="connectionFactory" ref="pooledConnectionFactory"/>
    <spring:property name="transacted" value="false"/>
    <spring:property name="concurrentConsumers" value="1"/>
</spring:bean>

<spring:bean id="activemq" 
    class="org.apache.activemq.camel.component.ActiveMQComponent">
    <spring:property name="configuration" ref="jmsConfig"/>
</spring:bean>

<!-- Loaded Beans -->

<spring:bean id="ExactTargetBean" class="com.backend.trigger.TargetBean" /> 
<spring:bean id="TriggerEmailRequestBean" class="com.requests.TriggerEmailRequest" />

<!-- Camel configuration -->

<camelContext xmlns="http://camel.apache.org/schema/spring">
    <route id="genericMessageHandler" streamCache="true">
        <from uri = "activemq:topic:Test.topic"/>
        <multicast>  
            <to uri = "TargetIntegration" />
        </multicast>
    </route>
     <route>
        <from uri="TargetIntegration" />
            <setProperty propertyName="apiuser">
                <simple>${properties:et.username}</simple>
            </setProperty>
            <setProperty propertyName="password">
                <simple>${properties:et.password}</simple>
            </setProperty>
            <setProperty propertyName="triggerName">
                <constant>WelcomeEmail</constant>
            </setProperty>
            <setProperty propertyName="email">
                <constant>patrick@test.com</constant>
            </setProperty>
            <setProperty propertyName="firstName">
                <constant>Patrick</constant>
            </setProperty>
            <setProperty propertyName="lastName">
                <constant>Archambeau</constant>
            </setProperty>
        <to uri = "xslt:xslt/target-integration.xsl" />
        <log message="Transformed Message : ${in.body}" />

        <setBody>
            <simple>qf=xml&amp;xml=${in.body}</simple>
        </setBody>
        <setHeader headerName="CamelHttpMethod">
            <constant>POST</constant>
        </setHeader>
        <setHeader headerName="Content-type">
            <constant>application/x-www-form-urlencoded</constant>
        </setHeader>
        <setHeader headerName="Connection">
            <simple>close</simple>
        </setHeader>
        <log message="Transformed Message : ${in.body}" />
        <to uri = "{{et.integration.url}}" />
        <log message="Transformed Message : ${in.body}" />
    </route>
</camelContext> 
```

# c# - 在 .NET 中从 Javascript 调用 AJAX HoverMenuExtender

> ID：15275096
> 
> 赞同：0
> 
> 时间：2013-03-07T15:29:47.157
> 
> 标签：c#, javascript, ajax

在我的 c# 网络应用程序中，

我试图从 Javascript 调用 Ajax HoverMenuExtender，而不是悬停在分配的控件上。

如果我将 HoverMenuExtender 的 TargetControlID 设置为页面上的控件并将鼠标悬停在它上面，则会显示悬停菜单，但是，我无法通过使用 javascript 手动调用它来显示它。

我目前正在尝试的 Javascript：

```
popup = $("body").find('HME1');
popup.show();
//popup._popupBehavior.show(); 
```

我已经逐步完成了代码，所以我确定 popup.show() 正在被调用。但似乎什么都没有发生。看起来 .Show 并不是我们真正想要做的，而是我们需要以某种方式“调用”AjaxExtender。

HoverMenuExtender：

```
<cc1:HoverMenuExtender ID="HME1" runat="server"  BehaviorID="HME1" TargetControlID="dummyLink" PopupPosition="Top" PopupControlID="PopupMenu"></cc1:HoverMenuExtender> 
```

我将控制 ID 分配给的虚拟链接：

```
<a href="#" style="display:none;visibility:hidden;" onclick="return false" ID="dummyLink" runat="server">dummy</a> 
```

我试图显示的面板：

```
<asp:Panel CssClass="popupMenu" ID="PopupMenu" 
    runat="server">
    <asp:LinkButton ID="article" runat="server" 
        CommandName="Edit" Text="Edit" />
    <br />
    <asp:LinkButton ID="LinkButton2" runat="server" 
        CommandName="Delete" Text="Delete" />
</asp:Panel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T09:07:17.943

使用以下代码：

$find("BehaviourID")._popupBehavior.show();

# c++ - 在 C++ 中检查合法的整数输入

> ID：15275097
> 
> 赞同：0
> 
> 时间：2013-03-07T15:29:54.160
> 
> 标签：c++, error-handling, integer, error-checking

所以我看到很多人问这个问题，而网上没有多少可靠的答案。大多数只是检查一个整数是否代替了一个字符串，但是如果输入了一个浮点数，那么它会截断下半部分，或者如果整数和字符被插入，它会截断字符。我需要帮助编写一段代码来检查用户输入并要求用户在他的输入无效或有效/无效的组合时重试。我认为基本想法是制作一个字符串，以便它接受任何内容，然后使用 sstream 进行操作，然后如果输入合法，则返回 int ，但我无法真正检查其他部分。如果有人遇到此问题或可以帮助我，请将我链接到它。当我很好地了解该做什么时，我会发布我的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:45:20.917

假设你不能使用`boost::lexical_cast`，你可以编写自己的版本：

```
#include <sstream>
#include <iostream>
#include <stdexcept>
#include <cstdlib>
template <class T1, class T2>
T1 lexical_cast(const T2& t2)
{
  std::stringstream s;
  s << t2;
  T1 t1;
  if(s >> std::noskipws >> t1 && s.eof()) {
    // it worked, return result
    return t1;
  } else {
    // It failed, do something else:
    // maybe throw an exception:
    throw std::runtime_error("bad conversion");
    // maybe return zero:
    return T1();
    // maybe do something drastic:
    exit(1);
  }
}

int main() {
  std::string smin, smax;
  int imin, imax;

  while(std::cout << "Enter min and max: " && std::cin >> smin >> smax) {
    try {
      imin = lexical_cast<int>(smin);
      imax = lexical_cast<int>(smax);
      break;
    } catch(std::runtime_error&) {
      std::cout << "Try again: ";
      continue;
    }
  }

  if(std::cin) {
    std::cout << "Thanks!\n";
  } else {
    std::cout << "Sorry. Goodbye\n";
    exit(1);
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T15:53:02.890

您可以使用 C++11[字符串转换函数](http://en.cppreference.com/w/cpp/string/basic_string/stol)，如 stol

```
try
{
    std::string value = ...;
    long number = std::stol(value); 
}
catch (std::invalid_argument const& e)
{
    // no conversion could be performed
} 
```

评论后更新：Visual Studio 2012 附带的 Visual C++ 11 实现`std::stol`为`strtol`在`<cstdlib>`. 我认为可以安全地假设大多数 C++11 实现以尽可能最佳的方式定义它，而不是使用`std::stringstream`机器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T15:40:41.513

C 函数`strtol`（和它的兄弟）将能够告诉您输入给它的字符串是否已完全消耗。

```
 std::string str;
 char *endptr;
 std::cin >> str;
 long x = std::strtol(str.c_str(), &endptr, 0); 
 if (*endptr != 0) 
    cout << "That's not a valid number..."; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T16:25:25.390

我不知道标准 C++ 库中是否有任何类可以封装 Java 中的原始类型，但这里简单且非常基本的实现会是什么样子

```
class Integer {
   private:
       int value;
       void parse(string);
   public:
       Integer(string);
       int intValue();
};

Integer::Integer(string sint) { parse(sint); }
int Integer::intValue() { return value; }

void Integer::parse(string sint) {
    string::iterator its = sint.begin();
    while(its != sint.end() && (! (*its < '0' || *its > '9'))) {
        its++;
    }
    if(its != sint.end()) {
        throw sint + ": Input is not a valid integer.";
    }
    value = atoi(sint.c_str());
} 
```

# .htaccess - 如何让 htaccess 捕获所有重写规则？

> ID：15275099
> 
> 赞同：0
> 
> 时间：2013-03-07T15:30:08.660
> 
> 标签：.htaccess, mod-rewrite

我有一系列重写来查看和处理消息中心：

```
RewriteRule ^messages/process/([a-zA-Z_-]+)/([0-9]+)/?$ messages-process.php?do=$1&id=$2 [L]
RewriteRule ^messages/process/ajax/([a-zA-Z_-]+)/?$ messages-process.php?do=$1&ajax=true [L]
RewriteRule ^messages/view/([0-9]+)/?$ messages.php?page=view&id=$1 [L]
RewriteRule ^messages/([a-zA-Z_-]+)/?$ messages.php?page=$1 [L]
RewriteRule ^messages/?$ messages.php [L] 
```

我的问题是，我如何设置一个可以作为包罗万象的规则，所以如果有人浏览到`/messages/process/`他们仍然会在 messages-process.php 上结束，但没有设置所需的参数。

另一种看待它的方式是，我怎样才能使参数可选，重写仍然可以工作，但参数会丢失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:58:32.193

您的请求`/messages/process/`与此规则匹配：

```
RewriteRule ^messages/([a-zA-Z_-]+)/?$ messages.php?page=$1 [L] 
```

...因此您将需要一个更具体的规则，该规则`/messages/process/`更早匹配并将其路由到`messages-process.php`匹配更通用的规则之前。

将它*放在*所有其他规则之前将为该特定模式完成它：

```
RewriteRule ^messages/process/?$ messages-process.php [L] 
```

如果您还有其他`process/`需要类似重写的目录，例如`/messages/thing`to ，请在其他目录*之前*`messages-thing.php`使用此规则。稍后您将需要明确列出不应被更通用规则匹配的那些...

 *```
# Matches /messages/process/ or /messages/otherdirectory/, etc...
RewriteRule ^messages/(process|thing|otherdirectory|somethingelse)/?$ messages-$1.php [L] 
```

总之，这应该可以完成工作：

```
# Matches /messages/process/ or /messages/otherdirectory/, etc...
RewriteRule ^messages/(process|thing|otherdirectory|somethingelse)/?$ messages-$1.php [L]
RewriteRule ^messages/process/([a-zA-Z_-]+)/([0-9]+)/?$ messages-process.php?do=$1&id=$2 [L]
RewriteRule ^messages/process/ajax/([a-zA-Z_-]+)/?$ messages-process.php?do=$1&ajax=true [L]
RewriteRule ^messages/view/([0-9]+)/?$ messages.php?page=view&id=$1 [L]
# Stuff not matched by the specific rule at the top matches this one...
RewriteRule ^messages/([a-zA-Z_-]+)/?$ messages.php?page=$1 [L]
RewriteRule ^messages/?$ messages.php [L] 
```

### 更新：

要允许`/messages/process/trash`一般重写 URL，您需要在此规则之后添加一条规则：

```
RewriteRule ^messages/process/([a-zA-Z_-]+)/([0-9]+)/?$ messages-process.php?do=$1&id=$2 [L]
# Match stuff after /process/whatever which are not followed by digits (which the previous rule matches)
RewriteRule ^messages/process/([a-zA-Z_-]+)(?:/[^0-9]+/?)$ messages-proces.php [L] 
```*

# java - Replace All JFrame Icons Globally

> ID：15275100
> 
> 赞同：0
> 
> 时间：2013-03-07T15:30:09.357
> 
> 标签：java, swing, icons, jframe, global

I can replace any given JFrame icon in Swing with a call to JFrame.setIconImage(). However, I have an existing application that pops up lots of JOptionPanes and other JFrames/dialogs, and rather than track them all down I'm wondering if there is a way to switch these over to my custom icon all in one place? Also, in some instances (ProgressMonitor, for example) I don't have access to the actual JFrame to fiddle with.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:34:03.093

您可以将`JFrames`创建的内容存储在`List`. 然后，您可以使用循环来获取此列表中的每一帧，并应用图标。

# windows-phone-7.1.1 - Windows 7.1 模拟器无法连接在主机/虚拟机上运行的服务器

> ID：15275101
> 
> 赞同：0
> 
> 时间：2013-03-07T15:30:12.677
> 
> 标签：windows-phone-7.1.1, windows-phone-7-emulator

我正在使用 Windows Phone 7.1 模拟器连接到托管在本地计算机或主机上的 VM 系统上的 TCP 服务器。

模拟器无法连接到主机 TCP 服务。

我尝试使用 IPv4、localhost。

谢谢桑迪

# ember.js - bindAttr 反向布尔值

> ID：15275105
> 
> 赞同：6
> 
> 时间：2013-03-07T15:30:22.657
> 
> 标签：ember.js, handlebars.js

在我看来，我有一个按钮，当模型的数据不脏时我想禁用它。

当我输出：`<button {{ action "update" }} {{bindAttr disabled="isDirty"}}>Save</button>`数据不脏时启用，数据脏时禁用。

我想扭转这种情况，所以我尝试了这个： `<button {{ action "update" }} {{bindAttr disabled="!isDirty"}}>Save</button>`但现在根本不检查脏度。如何在 bindAttr 帮助器中反转布尔值？

这是我的代码：

**控制器**

```
App.SiteController = Em.ObjectController.extend({
    isNotDirty: function() {
        return !this.get('isDirty');
    }.property('content')
});
App.SiteEditController = Em.ObjectController.extend({
    needs : [ 'site' ]
}); 
```

**模板**

```
{{#with controllers.site}}
    <div>{{ isDirty }}</div>
    <div>{{ isNotDirty }}</div>
    <div class="control-group">
        <label class="control-label" for="name">Name</label>
        <div class="controls">
            {{view Ember.TextField valueBinding="name"}}
        </div>
    </div>
    <div class="form-actions">
        <button {{bindAttr disabled="isNotDirty"}} class="btn btn-primary">Save</button>
    </div>
{{/with}} 
```

我输出了`isDirty`一个`isNotDirty`属性，所以我可以观察它们的变化。但是`isDirty`当我更改文本字段的值时，只有属性会发生变化，

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-02-14T11:14:27.403

该解决方案可以在Ember的[API 文档中找到。](http://emberjs.com/api/)有一个所有可用速记计算助手的列表。

我用于`Ember.computed.not`这种情况：

```
App.SiteController = Em.ObjectController.extend({
  isNotDirty: Ember.computed.not('isDirty')
}); 
```

# httpresponse - Fiddler 可以下载 Web 服务器日志文件吗？

> ID：15275112
> 
> 赞同：0
> 
> 时间：2013-03-07T15:30:40.613
> 
> 标签：httpresponse, fiddler

我必须使用`https://`目的地使用浏览器手动上传文件。现在我还需要从那个 HTTP 服务器获取日志。

我已经尝试过使用 Fiddler2 并且确实获得了日志，但仅来自我的客户。有没有办法从 HTTP 服务器获取响应日志？（我需要这样做，因为运行服务器的一方必须设置 VPN 隧道来记录我的上传，而他们不想这样做）

# c# - 这是什么类型的标记？

> ID：15275113
> 
> 赞同：3
> 
> 时间：2013-03-07T15:30:40.897
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, pdf-generation

我正在尝试从 MVC 视图中生成一些 PDF，这很顺利。我最终遇到了[这个](http://nyveldt.com/blog/post/Introducing-RazorPDF)并尝试使用它，但它具有如下所示的奇怪标记（它基于 ITextSharp）：

```
<row>
    <cell borderwidth="0.5" left="false" right="false" top="false" bottom="true">User Name</cell>
    <cell borderwidth="0.5" left="false" right="false" top="false" bottom="true">Description</cell>
    <cell borderwidth="0.5" left="false" right="false" top="false" bottom="true" horizontalalign="right">Lucky Number</cell>
    <cell borderwidth="0.5" left="false" right="false" top="false" bottom="true" horizontalalign="right">Doubled</cell>
</row> 
```

[来源](https://github.com/RazorAnt/RazorPDFSample/blob/master/RazorPDFSample/Views/Home/ReportSample.cshtml)

在这一点上，我真正想做的只是设置列的宽度（单元格，因为它在这里被称为）但`cell`不接受我的`style: width`or`width`或任何东西。

我该如何使用这个东西？有没有更好的方法从 MVC 视图呈现 PDF？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:40:12.893

最简单的做法是在 html 中创建您的视图并将其转换为 pdf，然后将其作为您的操作结果发送。

获取剃须刀模板的 html 的简单方法 [http://razorengine.codeplex.com/](http://razorengine.codeplex.com/)

```
string template = "Hello @Model.Name! Welcome to Razor!";
string result = Razor.Parse(template, new { Name = "World" }); 
```

Pdf 转换 [http://www.essentialobjects.com/Products/EOPdf/Default.aspx](http://www.essentialobjects.com/Products/EOPdf/Default.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T15:01:41.657

就像其他人说的那样，这是 iTextSharp xml。这是一篇文章，列出了有效的 XML 元素。 [如何使用 XML 和 iTextSharp 在 PDF 文档中创建表格？](https://stackoverflow.com/questions/7807330/how-to-create-tables-in-a-pdf-document-using-xml-and-itextsharp)

看起来您可能会使用 CDATA 标签来设置宽度。

# php - 如何从另一个页面将数组发送到 Javascript 函数？

> ID：15275116
> 
> 赞同：0
> 
> 时间：2013-03-07T15:30:49.020
> 
> 标签：php, javascript, jquery

我有一个静态站点（我们称之为设置页面），我的 Javascript 函数从 mysql 表中获取 AJAX 数据并在 HTML 文档上绘制表。它就像一个魅力 - 它获取我需要的所有数据并以适当的方式进行操作。这是我的功能：

```
function get_people()
{
   $.post("/controller/get_people", function(data,status,xhr)
   {
       if(status=="success")
       {
           people_data = data;
           draw_table();
       }
   }) 
} 
```

问题是，在另一页上，我有一张桌子，旁边有所有人和复选框。我正在选中此复选框，单击一个按钮，然后我想进入设置页面-我的 get_people 函数将仅从 mysql 中选择有关上一页上检查的人员的数据。

从技术上讲，问题是 - 如何将数组从另一个页面传递给 javascript 函数？我可以将它保存在 DOM 或其他东西上并从 JS 中读取吗？

请给我一些想法：]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:35:11.093

您可以使用`sessionStorage`和`JSON.parse`。

在您的第一页上：

```
var arrayJSON = JSON.stringify(yourArray);
sessionStorage.setItem("tabledata",arrayJSON); 
```

在您的第二页上：

```
var tableData = JSON.parse(sessionStorage.getItem("tabledata")); 
```

这将在当前会话期间将数据保存为浏览器中的字符串。如果您希望它更永久地存储，您可以使用 localStorage 而不是 sessionStorage （相同的语法），即使用户关闭浏览器并稍后返回，它也会被存储。

[MDN 文档](https://developer.mozilla.org/en-US/docs/DOM/Storage)中有关 sessionStorage 和 localStorage 的更多信息

# jpa - JPA 中的 PreparedStatement setBinaryStream

> ID：15275117
> 
> 赞同：1
> 
> 时间：2013-03-07T15:30:53.237
> 
> 标签：jpa, prepared-statement, bytearrayinputstream

在 JDBC 我使用这个：

```
PreparedStatement pupd;

pupd.setBinaryStream(5, new ByteArrayInputStream(buffer, ofs, lgt), lgt); 
```

如何使用 JPA 完成相同的结果？这是一个实时应用程序，因此转换为存储在内存中的某个字节 [] 是不可能的。另外，我正在编写中性代码，这意味着我没有使用任何特定的 JPA 实现。

提前感谢，ML

# c++ - 如何使用 C++ 和 L-Systems 在空间中的任何给定点和方向生成 3d 树？

> ID：15275124
> 
> 赞同：1
> 
> 时间：2013-03-07T15:31:11.043
> 
> 标签：c++, 3d, l-systems

我正在用 C++ 编程一个 3d 场景，其中树木可以在任何点和任何方向“生长”。我发现 L-systems 树/行星看起来非常好，但我无法搜索一些函数或库，这些函数或库可以让我传递点坐标、方向向量和一些其他参数，并返回该“生长”树点集的数组。

我什至无法搜索足够的信息来开始。因此，我可以参考或重复使用并进行一些调整以完成此任务的任何想法或链接。我找到了一些 L-sys 解析器，但它看起来只是在没有控制生长方向的情况下绘制到位，并且也未能给我整个点坐标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T09:01:09.163

这可能是您自己从头开始实施而不是搜索和尝试集成一些 3rd 方库的问题。

实现 L 系统相当容易。您需要实现 2 个部分。

第一部分是字符串重写系统。很简单。您只需要有一个重写规则字典（字符键、字符串值），然后将这些规则应用于初始字符串 i 次（其中 i 是迭代次数）。

伪代码：

```
map<char, string> rewriteRules = {{'L', "L+R+"}, {'R',"-L+R"}};

string rewrite(string str) {
    string result = "";
    for each (char c in str) {
        if (rewriteRules contains key c) {
            result += rewriteRules[c];
        }
        else {
            result += c; // identity
        }
    }
} 
```

第二个更难的部分是结果符号串的解释。在 3D 中解释龟类图形的最简单方法是使用四元数 - 将它们组合起来很简单。

上面的重写规则描述的是龙曲线，符号的语义是：

*   L, R: 向前画线
*   +：左转90度
*   -：右转90度

以下代码片段演示了使用四元数在 3D 中移动和旋转的实现。它来自我用 C# 编写的 L 系统解释器（希望您能原谅我：）。

```
Quaternion rotationQuat = Quaternion.Indentity;
Vector3D position;

Vector3D forwardVector = new Vector3D(1, 0, 0);
Vector3D upVector = new Vector3D(0, 1, 0);
Vector3D rightVector = forwardVector.Cross(upVector);

public void Forward(double distance, bool draw) {
    Vector3D moveVector = rotationQuat.Transform(forwardVector * distance);
    Vector3D oldPosition = position;
    position += moveVector;

    if (draw) {
        // draw cylinder/box from oldPosition to (new) position
    }
}

public void Yaw(double angle) {
    rotationQuat *= new Quaternion(upVector, angle);
}

public void Pitch(double angle) {
    rotationQuat *= new Quaternion(rightVector, angle);
}

public void Roll(double angle) {
    rotationQuat *= new Quaternion(forwardVector, angle);
} 
```

因此，要解释字符串，您只需要遍历字符串并解释每个符号。最简单的方法就是切换：

```
for each (char c in string) {
    switch(c) {
    case 'L':
    case 'R':
        Forward(10, true);
        break;
    case '+':
        Yaw(90);
        break;
    case '-':
        Yaw(-90);
        break;
    default:
        break; // do nothing
    }
} 
```

如果您想尝试 L-systems（即使是 3D），有一个不错的网站[http://malsys.cz](http://malsys.cz)可以在其中进行（那些 C# 片段来自它：）

祝 L 系统好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:40:21.480

我不知道任何提供 3d L 系统算法的开源库，我怀疑你必须自己编写。

从 2d 实现开始，它非常简单，[维基百科](http://en.wikipedia.org/wiki/L-system)页面是查看简单示例的好地方，一旦 2d 实现完成，应该会扩展到第三个。

# ios - xcode 故事板 - ibtoold 取消归档异常

> ID：15275126
> 
> 赞同：6
> 
> 时间：2013-03-07T15:31:19.587
> 
> 标签：ios, xcode, xib, uistoryboard

例外是；

```
CompileStoryboard Catwall/en.lproj/MainStoryboard.storyboard
cd /Users/guvenozyurt/Desktop/git/catwall_ios
setenv IBSC_MINIMUM_COMPATIBILITY_VERSION 5.1
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
setenv XCODE_DEVELOPER_USR_PATH /Applications/Xcode.app/Contents/Developer/usr/bin/..
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/ibtool --errors --warnings --notices --output-format human-readable-text --compile /Users/guvenozyurt/Library/Developer/Xcode/DerivedData/Catwall-ghvlotdrbpzsfveimvmoxitsgpod/Build/Products/Debug-iphonesimulator/Catwall.app/en.lproj/MainStoryboard.storyboardc /Users/guvenozyurt/Desktop/git/catwall_ios/Catwall/en.lproj/MainStoryboard.storyboard --sdk /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.1.sdk

2013-03-07 17:14:26.187 ibtoold[34122:707] Exception raised while unarchiving document objects - *** -[__NSArrayM insertObject:atIndex:]: object cannot be nil/* com.apple.ibtool.errors *//Users/guvenozyurt/Desktop/git/catwall_ios/Catwall/en.lproj/MainStoryboard.storyboard: error: The document "MainStoryboard.storyboard" could not be opened. The operation couldn’t be completed. (com.apple.InterfaceBuilder error -1.)    Recovery Suggestion: Check the console log for additional informat.. 
```

最近，我删除了一个 xib 文件并将整个绘图放在控制器端。然后从 git 合并代码，解决冲突（非常小心，3 次重置并再次这样做..）

我检查了模拟器。构建目标版本，尝试不那么深入地更改“复制捆绑资源”命令。不 ！它仍然失败。.

ibtoold 当然不是开源的，我知道那里发生了什么。.

我被困住了，需要帮助！谢谢..

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-05-08T05:27:48.630

此错误可能有多种原因。使用 git 合并故事板后出现此错误。我的故事板也有自定义字体，我在阅读此线程后安装了它们（为此 +1），即使在那之后我也遇到了同样的错误。然后我搜索了所有发生冲突的地方，最后发现其中一个`segue`现在在`inferredMetricsTieBreakers`故事板的任何地方都没有使用。我删除了它并重新启动了 XCode 并将所有内容恢复原状。

所以底线是彻底访问所有有冲突的地方，你应该能够解决大多数合并问题。

-anoop

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-14T00:39:11.153

尝试在另一台计算机上打开项目时遇到了这个问题 - 在情节提要中设置了自定义字体。

事实证明，需要将自定义字体添加到该计算机的字体册中。

当然，在代码中也可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T12:20:15.030

我刚遇到这个问题，发现这是因为我在 iOS 应用程序中包含的 Storyboard 文件中引用了一种字体。

出于某种原因，一旦我在代码中而不是在情节提要中设置字体，它就可以正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T13:15:23.513

实际上问题是故事板。我在情节提要上还原了 git merge，因此它可以在 xcode 上打开，然后手动删除引用而不是通过 git。然后错误消失了。神奇的IOS世界..

# c# - 列 Oracle 到 MySQL 的值超出范围

> ID：15275127
> 
> 赞同：1
> 
> 时间：2013-03-07T15:31:23.690
> 
> 标签：c#, mysql, sql, oracle, .net-3.5

我正在将一个巨大的数据库从它的 oracle 数据源同步到一个 mysql 数据源以用于其他目的。在 linux/oracle 数据库中使用 PuTTY 读取数据时，值为

```
8888888888 
```

这被存储到一个对象中，然后插入到 MySQL 中，然后最终成为

```
00000000000000000000000000000000000000000000000000000000000000000000008888888888 
```

现在不幸的是，我不是编程英雄，我似乎无法找出问题所在。两个数据库中的数据类型都是 int(10)，C# 应用程序不会篡改任何值。这是实际的错误消息：（省略了语句的不相关部分）

```
Error while executing query 
INSERT INTO tsdsmd(kode8) 
VALUES ('00000000000000000000000000000000000000000000000000000000000000000000008888888888')
Out of range value for column 'kode8' at row 1 
```

会不会是字符集不匹配？

这是构建插入命令的代码

```
public int Insert(string table, string[] fields, object[] values)
{
    if (fields.Length != values.Length)
        throw new DBException("Field lengt is not equal to values length!");

    StringBuilder query = new StringBuilder();
    query.Append("INSERT INTO ");
    query.Append(table);
    query.Append("( ");
    for (int i = 0; i < fields.Length; i++)
    {
        query.Append(fields[i]);

        if (i != fields.Length - 1)
        {
            query.Append(", ");
        }
    }

    query.Append(") VALUES (");

    for (int i = 0; i < fields.Length; i++)
    {
        query.Append("@" + fields[i]);

        if (i != fields.Length - 1)
        {
            query.Append(", ");
        }
    }

    query.Append(")");

    DBCommand command = new DBCommand(query.ToString());

    for (int i = 0; i < fields.Length; i++)
    {
        command.AddParameter("@" + fields[i], values[i]);
    }

    return Insert(command);
} 
```

编辑; 我已经更改了一些代码，现在我正在跳过这些行，同时使用单独的 try catch。看看，这就是我所看到的。该值应该在 int 的范围内，我很困惑。潜在的错误？它给我的错误是int对于int32来说太小或太大。不应该是这样。 ![代码截图](../Images/caea57f49e2d08a157d130a826512bf5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:08:46.733

在我看来，您可能需要在添加参数时显式转换值。您的代码尝试插入的值是错误的数据类型和零填充，但它在技术上是正确的。如果您这样做，它应该可以解决问题：

`command.AddParameter("@" + fields[i], (int)values[i])`

诚然，如果您尝试动态处理多种数据类型，这会有点痛苦，但添加一些测试来确定值的正确数据类型应该不会太难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T11:09:40.733

实际上，oracle 中的列并不像 mysql 中的“int”那样受 int32 的限制。必须将 mysql 列转换为 int64/long。

# matlab - 使用 MATLAB 我正在尝试绘制 man epsilon 的 van der pol 方程？

> ID：15275136
> 
> 赞同：0
> 
> 时间：2013-03-07T15:31:39.773
> 
> 标签：matlab, plot

我想为许多 epsilon 绘制 van der Pol 方程的解，我的代码是：

```
tspan = [0, 10];
y0 = [0.5; 0];  % Initial location

for ep = 0.1:0.2:2.5  % Loop through a few epsilons
    ode = @(t,y) vanderpol(t,y,ep);   % Call vanderpol.m for the points (t,y)
    [t,y] = ode45(ode, tspan, y0);    % solve Van der Pol equation

    % Plot of the solution

    plot(t,y(:,1)); drawnow;
    %xlabel('Time');
    %ylabel('Van der Pol Solution');
    %title('Solutions to van der Pol equation for many \epsilon');
end 
```

我想要每个图上每个 epsilon 的 van der Pol 方程图。不太确定如何做到这一点，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:37:56.487

用于`figure`创建不同的图：

```
tspan = [0, 10];
y0 = [0.5; 0];  % Initial location

for ep = 0.1:0.2:2.5  % Loop through a few epsilons
    ode = @(t,y) vanderpol(t,y,ep);   % Call vanderpol.m for the points (t,y)
    [t,y] = ode45(ode, tspan, y0);    % solve Van der Pol equation

    % Plot of the solution

    figure,  

    plot(t,y(:,1)); drawnow;
    %xlabel('Time');
    %ylabel('Van der Pol Solution');
    %title('Solutions to van der Pol equation for many \epsilon');
end 
```

用于单个地块`hold on`

```
tspan = [0, 10];
y0 = [0.5; 0];  % Initial location

for ep = 0.1:0.2:2.5  % Loop through a few epsilons
    ode = @(t,y) vanderpol(t,y,ep);   % Call vanderpol.m for the points (t,y)
    [t,y] = ode45(ode, tspan, y0);    % solve Van der Pol equation

    % Plot of the solution

    plot(t,y(:,1)); drawnow;
    %xlabel('Time');
    %ylabel('Van der Pol Solution');
    %title('Solutions to van der Pol equation for many \epsilon');
    hold on
end 
```

# ios - UITabBar中的远程控制事件来控制播放

> ID：15275138
> 
> 赞同：0
> 
> 时间：2013-03-07T15:31:48.517
> 
> 标签：ios, objective-c, cocoa-touch

这是一个与此类似的[问题](https://stackoverflow.com/questions/10940201/receiving-remotecontrolevents-to-first-tab-when-interacting-in-second-tab-in-a-t)。但我仍然不知道该怎么做。

所以，我有一个功能类似于 ipod 的标签栏应用程序。一个视图控制器是“NOW PLAYING”视图控制器，它是索引 1 处的视图控制器。所以，在那个 VC 中我有：

```
- (void)viewDidAppear:(BOOL)animated
{
    // Turn on remote control event delivery
    [[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
    [[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:nil];
    // Set itself as the first responder
    [self becomeFirstResponder];
}

- (BOOL)canBecomeFirstResponder
{
    return YES;
}

- (void)remoteControlReceivedWithEvent:(UIEvent *)event
{
    NSLog(@"Where is my event?");
    if(event.type == UIEventTypeRemoteControl)
    {
        switch (event.subtype) {
            case UIEventSubtypeRemoteControlTogglePlayPause:
                NSLog(@"Pause");
                break;
            case UIEventSubtypeRemoteControlNextTrack:
                NSLog(@"Next");
                break;
            case UIEventSubtypeRemoteControlPreviousTrack:
                NSLog(@"Prev");
                break;
            default:
                NSLog(@"SOMETHING WAS CLICKED");
            break;

        }
    }
} 
```

在耳机或双主页按钮单击快捷方式上，我没有收到任何远程单击事件。我在实际的 iPhone 上运行，而不是在模拟器中。我正在使用 AVQueuePlayer（正在播放）来管理我的媒体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T18:17:18.347

我只是把所有东西都塞进 AppDelegate 并告诉 AppDelegate 调用 ViewController 告诉它该做什么，它工作正常。把它放在 AppDelegate 中是不好的做法吗？

# c# - 选择性地忽略 C# 代码中抛出的异常

> ID：15275139
> 
> 赞同：6
> 
> 时间：2013-03-07T15:31:50.613
> 
> 标签：c#, debugging

我在 C# 代码中有一个函数，其中定期抛出 NullReferenceException（预期行为），但被捕获。有没有办法告诉 Visual Studio 调试器不要为我的代码的这个特定部分中断这个异常？

*编辑*我需要在我的代码的其他地方打破这个异常，但不是在同一个函数中。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-07T15:34:00.463

如果我理解正确并且您尝试做的是调试一些 NullReferenceException(s) 但想在调试时暂时忽略其他异常，您可以通过使用[DebuggerNonUserCode](http://msdn.microsoft.com/en-us/library/system.diagnostics.debuggernonusercodeattribute.aspx)属性标记您希望调试器忽略的函数来做到这一点。

```
[DebuggerNonUserCode]
private void MyMethod()
{
    // NullReferenceException exceptions caught in this method will
    //  not cause the Debugger to stop here..
} 
```

**请注意**，这仅在所述方法中捕获异常时才有效。`NullReferenceException`只是如果您将调试器设置为始终中断异常，它们不会导致调试器中断。并且这仅适用于方法，而不适用于方法内的任意代码部分..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T16:01:57.663

假设异常不会冒泡到调用者，这可以通过[DebuggerHiddenAttribute](http://msdn.microsoft.com/en-us/library/system.diagnostics.debuggerhiddenattribute.aspx)来实现。

从备注

> Visual Studio 2005 调试器不会在标有此属性的方法中停止，并且不允许在该方法中设置断点。

```
 [DebuggerHidden]
    private static void M()
    {
        try
        {
            throw new NullReferenceException();
        }
        catch (Exception)
        {
            //log or do something useful so as not to swallow.
        }            
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T15:34:12.127

您可以这样做，但它确实会影响解决方案中的所有异常。

`Debug -> Exceptions -> Find... "Null Ref"`, 取消勾选 Throw。

# dll - MS Office 在 DLL 更新后运行配置？

> ID：15275140
> 
> 赞同：0
> 
> 时间：2013-03-07T15:31:51.723
> 
> 标签：dll, batch-file, ms-office

我目前支持具有许多外部依赖项的 Microsoft Access 2000 业务线应用程序，包括用于邮件合并的 Microsoft Word 2007。该应用程序使用批处理脚本通过复制和注册（如果需要）用户计算机上的每个 DLL 来使外部引用保持最新，类似于以下脚本：

```
COPY "\\fileshare\references\fileX.dll" "C:\WINDOWS\system32\fileX.dll"
regsvr32 "C:\WINDOWS\system32\fileX.dll" 
```

以下是受影响的 DLL：

*   comdlg32.ocx（已注册）
*   mscomctl.ocx（已注册）
*   stdole2.tlb
*   MS09.dll
*   MSACC9.OLB
*   msoutl.olb
*   MSWORD.OLB
*   VBE6.DLL（已注册）
*   dao360.dll（已注册）
*   msado21.tlb

批处理脚本通常只是简单地将用户的 DLL 替换为同一个 DLL 的相同版本。但是，由于某种原因，在执行此批处理脚本并且用户尝试在 Office 2007 中打开文档后，会弹出一个配置向导并从文档中窃取焦点，只需要重新启动才能完成。

虽然这并不是一个真正的关键工作停止问题，但它肯定是一个烦恼。显而易见的猜测是它是 Office 2007 DLL 之一，但我无法确定哪个 DLL 是罪魁祸首。

非常感谢任何输入！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:04:57.040

据我了解，您不应该分发 OLB 文件。它们包含在 Office 的安装中，并且已经存在于任何安装了 Office 的工作站上。

You also should not be installing any ADO, DAO, or any other MDAC/WDAC components manually. For older OS's, you should run an installer (`MDAC_TYP.EXE`) that installs the entire set of Data Access Components; google for `MDAC installer` for more info. On newer OS's, WDAC is installed as part of Windows.

Of your list, these are the only files that I would consider safe to distribute:

```
comdlg32.ocx
mscomctl.ocx
stdole2.tlb  (although, this REALLY shouldn't be necessary) 
```

All of the other files are either part of Office, and should already be on the box, or are part of WDAC/MDAC.

If absolutely necessary, you can always install the Access 2000 Runtime. This would allow users that do not have Access 2000 installed to still be able to start your application.

# java - 在哪里可以找到 Eclipse Zest API JavaDoc？

> ID：15275143
> 
> 赞同：1
> 
> 时间：2013-03-07T15:31:55.233
> 
> 标签：java, javadoc, zest

在 Zest 官方主页上，没有 API JacaDoc。我想知道，在哪里可以找到它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T15:58:24.440

对于[GEF 版本。4](http://wiki.eclipse.org/GEF/GEF4)，他们说：

> 有关 GEF4 的文档可以在此[wiki的相应](http://wiki.eclipse.org/GEF/GEF4)[GEF4 组件](http://wiki.eclipse.org/GEF/GEF4#Components)页面下找到：

[Zest 组件](http://wiki.eclipse.org/GEF/GEF4/Zest)的文档说：

> TODO：在此处创建 GEF4 Zest 组件的独立文档。到目前为止，已经可以在[Zest下找到一些文档](http://wiki.eclipse.org/Zest)

作为这个 ( [http://wiki.eclipse.org/Zest](http://wiki.eclipse.org/Zest) ) 您现在可以找到的最佳参考。

顺便说一句，如果您想深入了解，您也有一个[源代码链接](http://wiki.eclipse.org/GEF/GEF4#Source_Code)

# parsing - 在 shell 中解析平面文件

> ID：15275145
> 
> 赞同：1
> 
> 时间：2013-03-07T15:31:59.317
> 
> 标签：parsing, shell, unix, awk, fixed

我有一个固定长度的格式文件：

```
Name       Age        Party              Role 
---------- ---------- ------------------ --------------
Shubham    27         XYZ                User
Drek       28         ABC                Admin
Raj        23         USR                User 
```

现在我想编写一个 shell 脚本/命令来输出一个包含所有年龄 <25 的缔约方的文件。在这种情况下，它应该打印如下内容：

```
Party
-----------------
USR 
```

我是 awk 和 shell 的新手。我尝试使用 awk 和 substr，但它太贵了，因为我的文件很大（> 200000 行，多列）。有没有一种巧妙的方法来做到这一点？

**更新**

任何字段中都可以有空格。真正的想法是该文件是一个固定长度的文件。所以每条记录的长度是固定的（姓名：10，年龄：10，部分：20，角色：10）。但是，记录中可以包含任何内容，包括空格和空格。例如：

```
Name       Age        Party              Role 
---------- ---------- ------------------ --------------
Shub A     27         XYZ & A            User
Drek GH    28         ABC & C            Admin
Raj        23         USR                User 
```

等等。现在我想使用 Name 进行选择，这样我的脚本就会打印出 Name = "Shub A" 的 Party 记录。所以这里的输出应该是：

```
Party
-------------------
XYZ & A 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:23:42.200

尝试：

```
gawk 'BEGIN{ FIELDWIDTHS = "11 11 19 14" } NR<3 || $1~/^Shub A +$/{print $3}' file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T15:38:31.670

```
$ awk '($2+0) < 25{print $3}' input
Party
------------------
USR 
```

**更新**

各种for循环来确定哪个字段包含数字（n），然后名称在`$1..n`其中，party-field在`$n+1..NF-1`

```
/Shub A/ {
    # determine which field that contains a number
    for (i=1;i<NF;i++) {
        if ($i ~ /[0-9]+$/) {
            break
        }
    }
    for (j=1;j<i;j++) {
        printf "%s ", $j
    }
    for (k=(i+1);k<NF;k++) {
        printf "%s ", $k
    }

} 
```

输出：

```
Shub A XYZ & A 
```

...或者您可以尝试拆分“2 个或更多空格”，即

```
$ awk -F"  +" '/^Shub/{print $3}' input
XYZ & A 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T16:28:36.267

如果你知道你的年龄没有一个能填满 10 位数字，你可以这样做：

```
< input-file cut -b 11-30 | awk '$1 < 25' | cut -b 11- 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T15:35:23.207

像这样的东西应该工作。它打印前两行（标题），然后比较第二个字段是否低于 25。

```
awk 'FNR < 3 || $2 < 25 { print $3 }' infile 
```

它产生：

```
Party
------------------
USR 
```

* * *

**编辑：这是在更新之前发布的，不适用于它。看看其他答案**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T15:35:57.997

试试这个，如果它对你有用：

```
 awk 'NR<3||($2+0)<25{a[++i]=$3}END{for(x in a)print a[x]}' file 
```

# java - expectJ - 从 spawn.send() 读取 InputStream

> ID：15275146
> 
> 赞同：0
> 
> 时间：2013-03-07T15:32:01.453
> 
> 标签：java, inputstream, expectj

使用以下代码，我想从`spawn.send("ls | grep *.dat\n");`. 我的 calss 实现`Spawnable`了它的方法`getStdout()`，但不知道如何使用它。ExpectJ 文档说：`getStdout()`- 获取一个流，从中可以读取 Spawn 的标准输出。但这并没有让我更进一步。

```
 private void expectC() throws IOException, TimeoutException, ExpectJException, InterruptedException {   
        ExpectJ expectJ = new ExpectJ();
        Spawn spawn = expectJ.spawn("192.168.1.60", 22, "login", "pass");
        spawn.send("ls | grep *.dat\n");
        spawn.expectClose();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:59:30.057

```
 ExpectJ ex = new ExpectJ(5);
    Spawn spawn = ex.spawn(new SshSpawn("192.168.56.101", 22, "alice", "password"));
    String command = "ls | grep dat \n";
    spawn.send(command);
    try{
        spawn.expectClose();
    }catch(Exception e){}
    String lsResults = spawn.getCurrentStandardOutContents().split("grep dat")[2];
    String[] lsRows = lsResults.split("\r\n"); //remove the 1st and the last 
```

# jquery - jQuery：按日期排序同位素

> ID：15275147
> 
> 赞同：0
> 
> 时间：2013-03-07T15:32:09.530
> 
> 标签：jquery, html, sorting, jquery-isotope

我正在按日期对 div 网格进行排序，但遇到了问题。div 是按日期排序的，但是当您引入另一个月份时，它不会考虑到这一点，而只是按天值排序。

HTML：

```
<div class="grid-filter">
    <a href="#">
    <div class="grid-block" style="background-color: #46747c" data-category="1952013">
        <div class="block-text date-title">19/05</div>
    </div>
    </a>
</div>
<div class="grid-filter">
    <a href="#">
    <div class="grid-block" style="background-color: #ebd133" data-category="2552013">
        <div class="block-text date-title">25/05</div>
    </div>
    </a>
</div>
<div class="grid-filter">
    <a href="#">
    <div class="grid-block" style="background-color: #cc7788" data-category="3052013">
        <div class="block-text date-title">30/05</div>
    </div>
    </a>
</div>
<div class="grid-filter">
    <a href="#">
    <div class="grid-block" style="background-color: #46747c" data-category="0562013">
        <div class="block-text date-title">05/06</div>
    </div>
    </a>
</div> 
```

jQuery

```
 jQuery(document).ready(function(){

var jQuerycontainer = jQuery('#main-grid');

if(location.hash!=""){
    var hashfilter = "." + location.hash.substr(1);
    }
    else{
    var hashfilter = "*";
    }

jQuerycontainer.imagesLoaded( function(){
jQuerycontainer.isotope({
    filter: hashfilter,
    itemSelector: '.grid-block',
    getSortData : {
    date : function( jQueryelem ) {
    return jQueryelem.attr('data-category');
    }
    },
    sortBy : 'date',
    animationEngine: 'css',
    masonry: {
    columnWidth: 4
    }

});
});

jQuery('.filter-menu a').click(function(){
    var selector = jQuery(this).attr('data-filter');
    var prettyselector = selector.substr(1);
    location.hash = prettyselector;
    jQuery('html, body').animate({scrollTop:0}, 'slow');
    return false;
    });

jQuery('.grid-filter a').click(function(){
    var selector = jQuery(this).attr('data-filter');
    var prettyselector = selector.substr(1);
    location.hash = prettyselector;
    jQuery('html, body').animate({scrollTop:0}, 'slow');
    return false;
    }); 

jQuery(window).hashchange(function(){

                if(location.hash!=""){
                    var hashfilter = "." + location.hash.substr(1);
                }
                else{
                    var hashfilter = "*";
                }

jQuerycontainer.imagesLoaded( function(){
jQuerycontainer.isotope({
    filter: hashfilter,
    itemSelector: '.grid-block',
    getSortData : {
    date : function( jQueryelem ) {
    return jQueryelem.attr('data-category');
    }
    },
    sortBy : 'date',
    animationEngine: 'css',
    masonry: {
    columnWidth: 4
    }
});
});
});
}); 
```

所以正在对块进行排序，但最后一个带有日期的块`0562013`首先出现，因为 05 是我假设的最小数字，无论如何也要考虑月份，所以它会按日期成功对 div 进行排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:14:17.320

```
jQuerycontainer.imagesLoaded( function(){
jQuerycontainer.isotope({
    filter: hashfilter,
    itemSelector: '.grid-block',
    getSortData : {
    date : function( jQueryelem ) {
    return date.substring(4,8)+date.substring(2,4)+date.substring(0,2);
    }
    },
    sortBy : 'date',
    animationEngine: 'css',
    masonry: {
    columnWidth: 4
    }

});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:45:33.510

您需要更改日期格式。现在的方式，你无法区分日和月：`2122013`可能`2.12.2013`和`21.2.2013`.

我建议使用通用`Y-M-D`（年-月-日，例如`2013-03-07`）格式。
**默认情况下它是可排序的。**您无需更改任何其他内容。

# web-services - 如何在 ServiceStack 中使用 NULL RequestDTO 配置 REST 服务方法

> ID：15275151
> 
> 赞同：1
> 
> 时间：2013-03-07T15:32:19.417
> 
> 标签：web-services, c#-4.0, servicestack

我正在尝试使用 ServiceStack 开发一些 Web 服务，但我无法配置以 null 作为输入的方法。

```
public class UserService : IService
{
   public object Get()
   {
       //gets all users 
       //not working
   }
  public object Get(FindUser request)
  {
       //this works
  }
}

public override void Configure(Container container)
{ 
    Routes
   .Add<FindUser>("/user/{id}") //this works
   .Add(null, "/user");//how to configure this route
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:40:16.647

没有`null`输入的概念，客户端必须调用特定的服务，[ServiceStack](http://www.servicestack.net)中的每个服务都需要一个请求 DTO，它定义了服务入口点和它接收到的请求——请求 DTO 可以为空。

# jquery - jquery live 不工作

> ID：15275154
> 
> 赞同：1
> 
> 时间：2013-03-07T15:32:26.840
> 
> 标签：jquery

我正在尝试使用 jquery() 的 live() 函数。但我不知道为什么，但它不工作。请帮我。

```
$("#button_suchen").click(function(){
     $(".search_listing_content").append("< div class="listing dunkel">

< div class="listing_add" style="width:30px;height:30px;"></div>< div class="listing_name">Sepp Forcher</div></div>");
              });

     $(".listing_add").live("click",function(){
            alert("yes");
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:33:43.143

Live 自 jQuery 1.7 起已弃用，并在 1.9.0 中删除，使用 .on() 代替

```
$('.listing_add').on('click',function(){...}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T15:38:10.033

尝试这个。将您的 js 代码也移动到[准备](http://api.jquery.com/ready/)好的文档中。

```
$(function(){

  $(document).on("click",".listing_add",function(){
    alert("yes");
  });

}); 
```

# android - 再次运行 AysncTask，一旦它完成 - onPostExecute()

> ID：15275159
> 
> 赞同：1
> 
> 时间：2013-03-07T15:32:35.890
> 
> 标签：android, multithreading, android-asynctask

我想通过名为 LOAD MORE 的按钮在循环触发器中一次又一次地运行名为 loadMore 的 AsyncTask。

错误：

> 03-07 20:31:38.330: E/AndroidRuntime(504): java.lang.IllegalStateException: 无法执行任务：任务已经执行（一个任务只能执行一次

试过了

*   按钮 LOADMORE 仅在`onPostExecute()`loadMore - AsyncTask 执行时可见。在里面添加 LOADMORE 视图`onPostExecute()`。
*   AsyncTask 的假定行为不会通过 LOADMORE 按钮出现。
*   检查 AysncTask - loadMore RUNNING 与否？LOADMORE 按钮内部`onClickListener`。
*   但作为记录信息，它永远不会到达`onClickListener`LOADMORE 按钮。

LOADMORE 按钮的 onClickListener 代码::

```
 ld. . . . . .loadMore AsyncTask.
 ll. . . . . . LinearLayout (where I'm removing and Adding LOADMORE button).
 loadMore. . . LOADMORE Button.

public void onClick(View v) {
        // TODO Auto-generated method stub
        ll.removeView(loadMore);
        //loadMore.setVisibility(View.INVISIBLE);
        spin2.setVisibility(View.VISIBLE);
        if(ld.getStatus()==Status.PENDING)
        {
            ld.execute();
            Log.i("PENDING", "Not yet RUNNING");
        }
        else if(true)
        {
            while(ld.getStatus()==Status.RUNNING)
            {
                Log.i("loadMore Async", "LoadMore RUNNING");
                if(ld.getStatus()==Status.FINISHED)
                    return;
            }
            ld.execute();
        }

    } 
```

* * *

loadMore AsyncTask 的 onPostExecute()::

```
protected void onPostExecute(Void result) {
adapter = new PhotosAdapter(MainActivity.this, arrPhotos);
        gridOfPhotos.setAdapter(adapter);

        spin2.setVisibility(View.GONE);

        ll.addView(loadMore);
        Log.i("loadMore-Async", "Adding LoadMore button again");
        Log.i("loadMore-Async", "LoadMore AsyncTask onPost() finished");
        loadMore.setOnClickListener(n);
        Log.i("loadMore-Async", "Adding Listener to LoadMore");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:43:35.110

您不能两次执行 AsyncTask。引用文档“任务只能执行一次（如果尝试第二次执行将引发异常。）”，链接[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

除了创建一个新任务并执行它之外，没有其他选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T17:36:35.613

通过实现

*   创建一个将动态实例化的新 AsyncTask。
*   循环创建新的 AysncTask 是通过创建我的 loadMore AsyncTask 的数组来解决的。

代码：：

```
loadMorePhotos[] lmd=new loadMorePhotos[1000]; 
```

LOADMORE 按钮的 onClickListener::

```
 View.OnClickListener n=new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        ll.removeView(loadMore);
        //loadMore.setVisibility(View.INVISIBLE);
        spin2.setVisibility(View.VISIBLE);
        if(ld.getStatus()==Status.PENDING)
        {
            ld.execute();
            Log.i("loadMoreAsync", "new AsyncTask : 0");
            Log.i("PENDING", "Not yet RUNNING");
        }
        else if(true)
        {
             Log.i("loadMoreAsync", "Creating new AsyncTask");
             lmd[j]=new loadMorePhotos();
             lmd[j].execute();
             Log.i("loadMoreAsync", "Creating LoadMore AsyncTask :"+j);
             j++;

        }

    }
}; 
```

# javascript - 从 AngularJS 访问全局变量

> ID：15275160
> 
> 赞同：8
> 
> 时间：2013-03-07T15:32:36.603
> 
> 标签：javascript, json, angularjs

我想用嵌入在 HTML 页面中的 JSON 对象初始化 Angular 模型。例子：

```
<html>
  <body>
    <script type="text/javascript" charset="utf-8">
      var tags = [{"name": "some json"}];
    </script>
    <ul>
      <li ng-repeat="tag in tags">{{tag.name}}</li>
    </ul>
  </body>
</html> 
```

该`tags`字段无法解析，因为它在`$scope`. 我试图`tags`像这样访问控制器中的字段：

```
function TagList($scope, $rootScope) {
  $scope.tags = $rootScope.tags;
} 
```

但它不起作用。

仅当我将其`TagList`直接包含到 HTML 页面中并将 JSON 直接呈现到此函数中时，它才有效。

如何访问`tags`Angular 控制器中单独 js 文件中的字段？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-07T15:46:51.263

至少有两种方式：

1.  在独立脚本标签中声明您的`tags`数组，在这种情况下，您的`tags`变量将绑定到窗口对象。将 $window 注入您的控制器以访问您的窗口绑定变量。
2.  在指令中声明你的`tags`数组。`ng-init`

显示两种解决方案：

HTML：

```
<body>

  <script type="text/javascript" charset="utf-8">
    var tags = [{"name": "some json"}];
  </script>

  <div ng-controller="AppController">
    tags: {{tags | json}}
    <ul>
      <li ng-repeat="tag in tags">{{tag.name}}</li>
    </ul>
  </div>  

  <div>
    <ul ng-init="tags = [{name: 'some json'}]">
      <li ng-repeat="tag in tags">{{tag.name}}</li>
    </ul>
  </div>

</body> 
```

JS：

```
app.controller('AppController',
  [
    '$scope',
    '$window',
    function($scope, $window) {
      $scope.tags = $window.tags;
    }
  ]
); 
```

[PLNKR](http://plnkr.co/edit/6055Y4TApbC8DgdYR4QS?p=preview)

我强烈建议不要污染窗口对象。

# crm - How to get log server accessing to Microsoft CRM Webservices 3.0

> ID：15275161
> 
> 赞同：0
> 
> 时间：2013-03-07T15:32:36.453
> 
> 标签：crm, microsoft-dynamics

I'm tring to call Microsoft CRM Webservices 3.0 with a Php Soap Client (Zend_Soap) and I got this exception :

> Server was unable to process request (0xc00ce556).

So, I Want to access log files. Anyone known where I could find it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:02:10.283

try see this [article](http://support.microsoft.com/kb/907490/en-us) that works also with CRM 3.0, you have activate the trace to have access to logs.

# highcharts - highcharts v3.0Beta 气泡图未呈现。可能的错误？

> ID：15275162
> 
> 赞同：0
> 
> 时间：2013-03-07T15:32:37.057
> 
> 标签：highcharts

我在使用气泡图并在 x 轴上指定最小值和最大值时遇到了问题。在此示例中，未绘制任何点：

```
 $('#container').highcharts({
    chart: {
        type: 'bubble'
    },
    title: {
        text: 'Highcharts bubbles problem'
    },               
    xAxis: {
        min:20,
        max:80
    },
    yAxis: {       
        min:-80,
        max:80
    },
    series: [{ 
        data: [ {"x":23,"y":22,"z":200}, {"x":43,"y":12,"z":100} ]
    }]
}); 
```

正如您在 jsfiddle [http://jsfiddle.net/6Qhh3/](http://jsfiddle.net/6Qhh3/)中看到的那样，该图表没有绘制任何气泡。

如果从 x 轴上删除 min 参数，它会起作用 如果将其更改为散点图，它也起作用。如果它是气泡图并且您在 xAxis 上指定了最小值，它似乎只会失败。

我是否遗漏了什么，或者这是 v3.0Beta 中的错误？

更新：我收到控制台错误：highcharts-more.js 的第 1905 行上的“半径未定义”

更新：我已经通过电子邮件将此发送给 highcharts 支持。

更新：由 highcharts 支持确认为错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:19:53.727

确实它看起来像一个错误，所以我已经向我们的开发人员报告了它[https://github.com/highslide-software/highcharts.com/issues/1578](https://github.com/highslide-software/highcharts.com/issues/1578)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:59:08.343

highcharts 支持确认为 v3.0Beta 中的错误。

# c# - iTextSharp table.SpacingBefore 不工作

> ID：15275165
> 
> 赞同：5
> 
> 时间：2013-03-07T15:32:39.333
> 
> 标签：c#, pdf, itextsharp, itext

我有一个表格，我试图从 pdf 文档的上边距缩小大约 20/30 浮点 (f)。我想留出一点空间的原因是因为我的 pdf 文档的边缘有一个矩形边框。

```
PdfPTable table = new PdfPTable(1);
table.SpacingBefore = 20f;
table.SpacingAfter = 20f;
table.TotalWidth = 700f;
table.LockedWidth = true; 
```

`table.SpacingAfter`工作得很好但`table.SpacingBefore`不会，我的桌子只是坐在顶部边缘，根本不会空间/填充。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-07T19:22:57.327

在此处查看[答案](http://itext-general.2136553.n4.nabble.com/PdfPTable-setSpacingBefore-not-honoured-if-pdfptable-added-as-first-element-to-document-tp2162942p2162943.html)，如果将表格作为文档中的第一项插入，则将`SpacingBefore`被忽略，这是设计使然。根据帖子，解决方案是添加一个前导为零的空段落。

# c# - 我可以覆盖 UserControl 中的 CSS 类吗？

> ID：15275166
> 
> 赞同：4
> 
> 时间：2013-03-07T15:32:44.610
> 
> 标签：c#, asp.net, user-controls

我有这样的背景：

```
<asp:Panel ID="DescrizionePagina" CssClass="pagina-testo-box-large" runat="server">Text</asp:Panel> 
```

我想用以下内容覆盖课程`pagina-testo-box-small`：

```
Panel myPanel = (Panel)this.Parent.FindControl("DescrizionePagina");
myPanel.Attributes.Add("class", "pagina-testo-box-small"); 
```

但它不起作用......`pagina-testo-box-large`仍然......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:34:28.313

因此，如果您已经知道该[属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.webcontrol.cssclass.aspx)，为什么不使用它呢？

```
Panel myPanel = (Panel)this.Parent.FindControl("DescrizionePagina");
myPanel.CssClass = "pagina-testo-box-small"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:34:12.170

只需使用该`CssClass`属性——与您在 ASPX 代码中设置的相同：

```
myPanel.CssClass = "pagina-testo-box-small"; 
```

在幕后，.NET 属性`CssClass`将被转换为 HTML`class`属性，但 ASP.NET 会自动处理这些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T15:34:49.240

使用以下代码：

```
myPanel.CssClass = "pagina-testo-box-small"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T15:49:32.717

如果这不能按照上述答案中的建议工作

```
Panel myPanel = (Panel)this.Parent.FindControl("DescrizionePagina");
myPanel.CssClass = "pagina-testo-box-small"; 
```

然后你可以像这样使用单个属性使用`!important`

```
 Panel myPanel = (Panel)this.Parent.FindControl("DescrizionePagina");
 myPanel.Style.Add("float", "left!important"); 
```

# jquery - 通过 jquery 创建按钮时，JQuery 事件不起作用

> ID：15275169
> 
> 赞同：0
> 
> 时间：2013-03-07T15:32:51.410
> 
> 标签：jquery, events, binding

有没有一种方法可以通过 jquery 绑定来自新创建元素的事件。

这是一个例子。

HTML：

```
 <div id="meta_inner" class="gallery">
    <div id="medias">
        <label for="test_meta_boxes1" ><input id="test_meta_boxes1" type="text" size="100" name="ad_image" value="http://" /><input id="test_meta_boxes_button" class="button" type="button" value="Upload Image" data-int="test_meta_boxes1"/></label>
    </div>
    <input class="button tagadd add" type="button" value="Add Image Field">
</div> 
```

jQuery

```
 jQuery(document).ready(function($){
    var count = $("#medias").children('label').length;
    $(".tagadd").on('click', function() {
        count = count + 1;

        $('#medias').append('<label for="test_meta_boxes'+count+'" ><input id="test_meta_boxes'+count+'" type="text" size="100" name="ad_image" value="http://" /><input id="test_meta_boxes_button" class="button" type="button" value="Upload Image" data-int="test_meta_boxes'+count+'"/></label>' );

        return false;
    });

    $('label').find('#test_meta_boxes_button').on('click', function(e) {

        metabox = $(this).data('int');

        console.log(metabox);

    });
}); 
```

当你运行这个。单击“上传图像”按钮时，第一个标签将在控制台窗口上工作并打印。

但是当我通过单击“添加图像字段”按钮添加另一个标签时。“上传图片”按钮将不起作用。

我错过了什么吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:46:53.807

如果不只是附加 HTML，而是附加一些 HTML，然后将按钮作为新的 jQuery 对象插入，它似乎可以工作。

```
$(".tagadd").click(function () {
    count++;
    $('#medias').append('<label for="test_meta_boxes' + count + '" ><input id="test_meta_boxes' + count + '" type="text" size="100" name="ad_image" value="http://" /></label>');
    $('#test_meta_boxes' + count).after(
        $("<input />")
            .attr('id', "test_meta_boxes_button" + count)
            .attr('type', 'button')
            .attr('value', 'Upload Image')
            .attr('data-int', 'test_meta_boxes' + count)
            .addClass('button')
            .click(function (e) {
                metabox = $(this).data('int');
                console.log(metabox);
            })
    );
    return false;
}); 
```

[这](http://jsfiddle.net/PeteUh/R5UAk/8/)是一个工作小提琴。

这是因为您的`.on()`方法当前以 id 为目标，如果您要按照文档（见下文）绑定方法，它应该可以按预期工作。

```
var count = $("#medias").children('label').length;
$(".tagadd").click(function () {
    count++;
    $('#medias').append('<label for="test_meta_boxes' + count + '" ><input id="test_meta_boxes' + count + '" type="text" size="100" name="ad_image" value="http://" /></label>');
    $('#test_meta_boxes' + count).after(
        $("<input />")
            .attr({
                type: 'button',
                value: 'Upload Image',
                'data-int': 'test_meta_boxes' + count 
            })
            .addClass('button test_meta_boxes_button')
    );
    return false;
});

$(document).on('click', 'label .test_meta_boxes_button', function(e) {
    metabox = $(this).data('int');
    console.log(metabox);
}); 
```

另请注意，您当前正在为创建的每个按钮分配相同的 id，这是不好的做法，因此您应该在按钮的 id 中包含您的计数变量，以及一个用于定位所有按钮的类。

删除了重复的 id 问题并在上面放置了一个类，并且使用修改后的方法一切正常，请参见[此处](http://jsfiddle.net/PeteUh/R5UAk/7/)`.on()`的小提琴

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T15:37:07.023

您只是将单击事件绑定到`label #test_meta_boxes_button`document.ready 发生时存在的元素。

[编辑]

代替

```
$('label').find('#test_meta_boxes_button').on('click', function(e) {
    metabox = $(this).data('int');
    console.log(metabox);
}); 
```

尝试做

```
$(document).on('click', 'label .test_meta_boxes_button', function(e) {
    metabox = $(this).data('int');
    console.log(metabox);
}); 
```

`.on`在[http://api.jquery.com/on/](http://api.jquery.com/on/)查看 jQuery 文档

请注意`.test_meta_boxes_button`。您不应该在具有相同 ID 的页面上有多个元素。

更改`<input id="test_meta_boxes_button" class="button" type="button" ...`为`<input class="button test_meta_boxes_button" type="button"...`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T15:39:09.330

您没有将`on click`事件添加到新创建的元素。创建新元素后，您需要重新应用该`on click`事件，因此它也在该新元素上处于活动状态。

所以基本上：

```
function ReapplyOnClickEvents()
{
      //Your on click events go here
      $(selector).on('click', function(){ /*do whatever*/});
}

... //JS that makes a new button (pseudocode):
$(whatever).AddButton(function(){
  //This is callback after add button is run:
  ReapplyOnClickEvents();
} 
```

# hadoop - 如何在 Hadoop map-reduce 程序的每个映射器中全局访问一个巨大的字典？

> ID：15275170
> 
> 赞同：1
> 
> 时间：2013-03-07T15:32:52.457
> 
> 标签：hadoop, data-mining

我正在对巨大的网络日志进行共现分析。我已经计算了每个项目的发生时间，以及每对`<item1, item2>`使用 hadoop 的同时发生时间。

现在，我想为一对计算一些相关性度量`<item1,item2>`，例如`n_12/(n_1*n_2)`，其中`n`表示项目或项目对的出现或同时出现时间。我将数据安排为：

```
key: item1
value: [(item1, n_1) (item2, n_12) ... (itemk, n_1k)] 
```

我想知道`n_2, ..., n_k`在处理 key-value 时我怎么知道`item1`？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:44:20.870

你的意思是你需要在每个映射器中访问一个特定的字典？您可以使用 hadoop 的“分布式缓存”功能。这适用于较小的字典。字典能有多大？如果它以 GB 为单位，您可能不得不求助于减少侧连接。

# c++ - 在 Windows 8 Metro 上构建默认 cocos2d-x 项目

> ID：15275175
> 
> 赞同：-2
> 
> 时间：2013-03-07T15:33:03.207
> 
> 标签：c++, visual-studio-2012, microsoft-metro, cocos2d-x

我正在尝试运行包含在 cocos2d-x for win8 metro 中的默认应用程序。它编译得很好，但是一旦它开始运行它就会因为这个异常而中断：

```
Unhandled exception at 0x0100A2CA in HelloWorld.exe: 0xC0000005: Access violation reading location 0x00000000. 
```

我似乎无法找到这个错误的来源以及如何解决它。我正在使用 Visual Studio 2012。感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T09:31:30.127

我在使用[http://cocos2d-x.googlecode.com/files/cocos2d-x0.11.0-win8-0.9.1.zip的源代码时遇到了同样的问题](http://cocos2d-x.googlecode.com/files/cocos2d-x0.11.0-win8-0.9.1.zip)

为我解决的问题是在[https://github.com/cocos2d-x/cocos2dx-win8从 github 获取源代码](https://github.com/cocos2d-x/cocos2dx-win8)

# java - If 语句代码问题

> ID：15275176
> 
> 赞同：1
> 
> 时间：2013-03-07T15:33:04.203
> 
> 标签：java, if-statement

我的教授给了我以下代码。

```
public static void main(String[] args) {

    Customer customer;
    Transaction transaction;
    double withdrawalAmount = 0;

    boolean finished = false;

    while (finished == false)
    {
        // Menu Display and Get user input
        int inputInt = 0;
        while (inputInt == 0)
        {
            inputInt = displayMenuAndGetInput();

                    // if the input is out of range
                    if ((inputInt < 1) || (inputInt > 8))
                    {
                            System.out.println("\nThe input is out of range!");
                            System.out.println();
                            inputInt = 0;
                    }
            } //end while

            // switch to correspondence function
            switch (inputInt)

            {
                case 1:
                    customer = createPersonalCustomer();
                    System.out.println("\nThe Personal customer has been created: \n" + newPC.toString());
                    customers.add(customer);
                    break;
                case 2:
                    customer = createCommercialCustomer();
                    System.out.println("\nThe Commercial customer has been created: \n" + newCC.toString());
                    customers.add(customer);
                    break;
                case 3:
                    transaction = recordTransaction();
                    if(transaction != null)
                        System.out.println("\nThe Transaction has been created: \n" + trans.toString());
                    else
                        System.out.println("\nThe ID could not be found.");
                    break;
                case 4:
                    withdrawalAmount = makeWithdrawal();
                    if(withdrawalAmount > 0)
                        System.out.println("\nAmount withdrawn from this account: " + moneyFormat.format(acct.getMakeWithdrawal()) + "\n");
                    else
                        System.out.println("\nThe ID could not be found.");
                    break;
                case 5:
                    displayCustomer();
                    break;
                case 6:
                    displayCustomerSummary();
                    break;
                case 7:
                    displayGrandSummary();
                    break;
                case 8:
                    // exit
                    finished = true;
                    break;
                default:
                    System.out.println("Invalid Input!");

                    break;
            } // end switch
    } // end while

} 
```

我应该采用以下代码

```
// Create a new Transaction
public static Transaction recordTransaction(){} 
```

并制作一个适用于以下场景的循环：

输入客户id，如果数组中没有匹配到客户id，则产生case 3中读出的错误，并显示主菜单。如果客户 ID 有效，则用户在下面输入输入信息。

下面是我的代码

```
public static Transaction recordTransaction(){

System.out.println("Enter the customer ID to create the transaction > ");
    long customerID = scan.nextLong();

    for (Customer c : customers) {
        if (c.getCustomerID() == customerID) {
            if (trans != null) {

            System.out.println("\nEnter the weight of gold > ");
                Transaction.goldWt = scan.nextDouble();

                System.out.println("\nEnter the weight of platinum > ");
                Transaction.platinumWt = scan.nextDouble();

                System.out.println("\nEnter the weight of silver > ");
                Transaction.silverWt = scan.nextDouble();
                }
        }
            return null; 
} 
```

任何人，我已经以多种方式运行此程序，并且我的代码将接受无效和有效的客户 ID，或者它不会接受无效或有效的客户 ID。我知道我可能忽略了一些东西，这就是为什么我拼命请求论坛的帮助。在编程方面，我有强迫症倾向，这是我的第一个 Java 入门课程，所以我不太精通这门语言。在过去的两天里，我一直被困在这个问题上。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:43:44.123

您需要`new Transaction()`在方法中实例化 a`recordTransaction()`并在适当时返回它。

```
public static Transaction recordTransaction(){

    System.out.println("Enter the customer ID to create the transaction > "); long customerID = scan.nextLong();

    for (Customer c : customers) {
        if (c.getCustomerID() == customerID) {
            Transaction trans = new Transaction();

            System.out.println("\nEnter the weight of gold > ");
            trans.goldWt = scan.nextDouble();

            System.out.println("\nEnter the weight of platinum > ");
            trans.platinumWt = scan.nextDouble();

            System.out.println("\nEnter the weight of silver > ");
            trans.silverWt = scan.nextDouble();

            return trans;
        }
    }
    return null; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:44:08.887

关于您的代码的一些说明：

```
if (trans != null) { 
```

什么是“反式”？我想它必须引用一个 Transaction 实例。

```
Transaction.goldWt = ... 
```

那不应该是“trans.goldWt”吗？（当然，植物和银也是如此）。如果确实`Transaction.goldWt`如此，那么您总是在更改该单个值。

```
return null; 
```

你永远不会返回任何东西，所以调用代码总是“无 ID”。你不应该“ `return trans`”吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T03:28:58.250

该问题是由正在创建的每个帐户的随机 customerID 的 getter 和 setter 方法生成的。

谢谢谢谢！

# javascript - 如果太长，请在 div 内换行

> ID：15275178
> 
> 赞同：1
> 
> 时间：2013-03-07T15:33:18.590
> 
> 标签：javascript, jquery, html, css

我有一个固定宽度为 300 像素的 DIV。我的 DIV 充满了动态文本，有时可能会变得太长，因此部分文本被剪切（因为我的 div 只有 300px 宽）。当文本的长度超过 300px 时，有没有一种方法可以让我的 div 中的文本换行（我想让它换行，因为我的 div 没有固定的高度）。

这可以只用 css 完成还是我需要一些 JS

谢谢

**注意**：我不想只是增加我的 DIV 的长度

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T15:35:08.990

尝试使用`word-wrap: break-word;`并确保包含的 div 上没有`overflow`设置。

# ruby-on-rails-3 - Rails 日志按请求排序

> ID：15275179
> 
> 赞同：1
> 
> 时间：2013-03-07T15:33:20.037
> 
> 标签：ruby-on-rails-3, logging

在任何中/高并发 Rails 生产环境中，您通常会看到请求之间的日志混乱。这意味着任何数量的连续日志行都不是对应于同一个请求，而是对应于几个请求。

任何技巧、gem、unix 工具可以获取 Rails.log 文件并将其排序，以便所有**相同的请求日志行将按连续顺序显示？**

我不是在寻找要实时排序的 Rails.log 文件，我想对已经关闭的 Rails.log 文件进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-17T17:30:50.803

您可以为此使用[log_runes](https://github.com/wlipa/log_runes) gem。它使用 Rails 标记的记录器将会话 ID 和请求 ID 的紧凑签名放在每个日志行上，以便使用 grep 轻松提取会话或请求的日志输出。

# julia - 如何在 Julia Studio 中使用包

> ID：15275181
> 
> 赞同：6
> 
> 时间：2013-03-07T15:33:22.377
> 
> 标签：julia, julia-studio

我无法让包系统在 Julia Studio 中工作。例如，如果我想绘制一个简单的图表，我尝试双击似乎是从 Git 存储库安装的 Winston 包，然后：

```
using Winston
plot([1 2 3],[3 2 6]) 
```

但我得到了错误：

```
could not open file /Applications/JuliaStudio.app/Contents/Resources/juliaengine/Winston.jl 
```

看起来 Julia 正在寻找错误的目录。我应该如何设置 Julia Studio 以正确使用这些软件包？

对亚当的回应：谢谢，不幸的是，似乎有一些问题。当我尝试删除/添加 Winston 包时，我收到如下消息：

```
julia> Pkg.rm("Winston")
ERROR: Unknown dependency for ODBC: julia
in dependencies at pkg/metadata.jl:156
in ReqsStruct at pkg/resolve.jl:65
in resolve at pkg/resolve.jl:1162
in _resolve at pkg.jl:230
in anonymous at no file:163
in cd at file.jl:26
in cd_pkgdir at pkg.jl:34
in rm at pkg.jl:141
in rm at pkg.jl:165 
```

我会花更多的时间在这上面，试着弄清楚发生了什么。如果我得到任何地方，我会发布更新以确保完整性。

**更新** 我现在升级到 Julia Studio 版本 0.4.4 并且在更新包之后原始示例可以工作。不幸的是，我无法确定原始问题，但它看起来像是一个复杂的依赖关系或版本问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T23:47:18.613

我认为这与这个问题有关： [https ://github.com/forio/julia-studio/issues/83](https://github.com/forio/julia-studio/issues/83)

Winston 安装需要外部依赖项，并提示您输入有关如何安装它们的信息。Julia Studio 不允许您响应此输入。

这是解决方法：

在您的控制台中，输入：

```
/Applications/JuliaStudio.app/julia/bin/julia-release-readline 
```

然后

```
Pkg.rm("Winston")
Pkg.add("Winston") 
```

按照提示操作，完成后关闭进程并返回 Julia Studio。

温斯顿现在应该可以工作了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-27T11:58:44.533

这就是我所做的：

1.  删除`$HOME/.julia`文件夹（这也将删除所有以前安装的包）
2.  从终端/控制台运行

    ```
    Last login: Sat Jul 27 02:58:06 on ttys001
    ~  ᐅ /Applications/JuliaStudio.app/julia/bin/julia-release-readline
               _
       _       _ _(_)_     |  A fresh approach to technical computing
      (_)     | (_) (_)    |  Documentation: http://docs.julialang.org
       _ _   _| |_  __ _   |  Type "help()" to list help topics
      | | | | | | |/ _` |  |
      | | |_| | | | (_| |  |  Version 0.1.2+111981303.ra703.dirty
     _/ |\__'_|_|_|\__'_|  |  Commit a703335d02 (2013-03-10 22:34:09)*
    |__/                   |

    julia> 
    ```

3.  安装包

    ```
    julia> Pkg.add("Winston")
    MESSAGE: Auto-initializing default package repository /Users/elyase/.julia.
               ... 
    ```

有用！

# javascript - 如何在 d3js 中实现过渡？

> ID：15275182
> 
> 赞同：1
> 
> 时间：2013-03-07T15:33:22.273
> 
> 标签：javascript, d3.js

有没有什么办法让一朵玫瑰只有那种生气勃勃`transition()`？到目前为止，此代码在 ax,y 空间上重复玫瑰，我希望有一朵玫瑰每 n 秒改变一次形状

```
 var rose = vis.selectAll("g")
    .data(d3.range(d * n).map(function(i) { return [1 + i % n, 1 + ~~(i / n)]; }))
    .enter().append("g")
    .attr("transform", function(d, i) {
      return "translate(" + [d[0] * dx, d[1] * dx] + ")";
    });

  rose.append("path")
    .attr("d", function(d) {
      var i = gcd.apply(null, d),
      p = Math.round(d[0] / i),
      q = Math.round(d[1] / i),
      k = p / q,
      period = (p & q & 1 ? 1 : 2) * Math.PI * q;
      return line(d3.range(0, period + Math.PI / 50, Math.PI / 50).map(function(theta) {
        var r = (dx - 5) * Math.cos(k * theta) / 2;
        return [r * Math.cos(theta), r * Math.sin(theta)];
      }));
    }); 
```

# operating-system - SJF 抢占式调度

> ID：15275185
> 
> 赞同：1
> 
> 时间：2013-03-07T15:33:28.303
> 
> 标签：operating-system, scheduling, jobs, job-scheduling, shortest

我得到这张表是为了先发制人的 Shortest Job First

```
JOB     ARRIVAL Burst
        TIME    Time
A       15      5
B       27      8
C       19      7
D       4       6
E       10      8   
F       52      4
G       33      10
H       38      2 
```

在 G 之前，它执行前还有 2 秒，我需要包括它吗？

我的回答中使用甘特图给出的表格是

```
 D  E  E  A  A  C  C  B  B  H  G     F 
4 10 15 18 19 23 27 30 33 38 40 50 52 
```

我的问题是，是否可以包括 F 到达之前的等待时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-16T08:26:21.570

鉴于您的问题，首先我想提一下，您没有提到是否基于时间量子评估流程，但由于您的教科书中给出的答案违反了时间量子概念也是如此。

我怀疑为什么答案包含两个独立的 A 进程，如果给定的调度算法是**`Shortest Job First (SJF)`**.

但是，我想写下这个答案。此过程列表的甘特图将是：-

```
|----|   D   |    E    |  A   |    C   |    B    | H |     G    |----|  F  | 
```

* * *

```
0    4      10        18     23       30        38  40          50  52    56 
```

所以，你的问题的答案是

> ***“是的，我们必须考虑 2 个单位的 TIME_GAP（从 50 到 52），因为此时准备队列中不会有任何进程可以安排，因为所有其他进程都将在给定的情况下完全执行时间。”***

# ios - 如何在ios上获取所有收到的通知

> ID：15275186
> 
> 赞同：0
> 
> 时间：2013-03-07T15:33:28.933
> 
> 标签：ios, notifications, push-notification, apple-push-notifications

如果推送通知已发送到设备，是否可以知道何时启动 iOS 应用程序？（我想访问有效负载以从通知中检索信息）

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:07:44.927

[UIApplicationDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html)有一些方法，您可以从中查看是否收到通知

`didFinishLaunchingWithOptions`如果用户启动了带有通知的应用程序，您可以在 AppDelegate 方法中看到，例如

```
UILocalNotification *notif =
    [launchOptions objectForKey:UIApplicationLaunchOptionsLocalNotificationKey];
    if (localNotif) {
        irLog(@"Recieved Notification");
    } 
```

对于您发布的本地通知，您可以查看此方法

```
- (void)application:(UIApplication *)app didReceiveLocalNotification:(UILocalNotification *)notif 
```

对于远程通知，您可以查看此方法

```
-(void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T16:36:16.047

你应该在你的代码中添加这样的东西：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary
*)launchOptions {

    NSDictionary *remoteNotif = [launchOptions objectForKey: UIApplicationLaunchOptionsRemoteNotificationKey];

    //Accept push notification when app is not open
    if (remoteNotif) {      
        [self handleRemoteNotification:application userInfo:remoteNotif];
        return YES;
    }

    return YES;
} 
```

请注意，只有通过点击通知启动应用程序时，您才会收到推送通知有效负载。如果它是通过点击应用程序图标启动的，您将不会获得有效负载。

# jquery - jQuery - 透明和可拖动的文本

> ID：15275190
> 
> 赞同：2
> 
> 时间：2013-03-07T15:33:37.733
> 
> 标签：jquery, jquery-ui, text, draggable, transparent

我有一个想法，有一个带有背景图像的透明文本，这样你就可以通过文本看到图像。在互联网上长时间搜索后，我找到了这个 css 解决方案：http: [//jsfiddle.net/7WP6f/](http://jsfiddle.net/7WP6f/)

编码：

```
<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
<div id="logo">
            <span>t</span>
            <span>e</span>
            <span>x</span>
            <span>t</span>
</div>

CSS:
#logo
{
    color: black;
 -webkit-text-fill-color: transparent;
 background: url('http://d24w6bsrhbeh9d.cloudfront.net/photo/6730501_700b_v1.jpg') repeat 0 0;
 -webkit-background-clip: text;
 background-size: 0;
 -webkit-background-size: auto;
 -o-background-size: 0;
}

#logo span
{
    font-family: 'Trebuchet MS';
    font-size: 300px;
    cursor: pointer;
} 
```

现在的问题是，我想让这些字母可拖动，这样字母的背景就会“移动”，但简单地添加 jQuery UI 可拖动是行不通的（您可以在上面的示例中看到它，只需取消注释 jQuery 命令）。

有什么办法可以达到这个效果吗？我能做到的唯一解决方案是在白色画布上（在 Photoshop 中）用透明字母主体制作字母的 PNG，为每个字母添加背景图像，并在拖动对象时使用 jquery.backgroundpos.js 移动背景。虽然这可行，但透明字母的白色周围存在问题（当您将字母移到另一个字母上时可以看到它们）。

感谢您的任何建议

# java - 打破Java中的for循环

> ID：15275195
> 
> 赞同：77
> 
> 时间：2013-03-07T15:33:41.377
> 
> 标签：java, loops, for-loop, break

在我的代码中，我有一个 for 循环，它遍历代码方法，直到满足 for 条件。

有没有办法打破这个 for 循环？

因此，如果我们看下面的代码，如果我们想在到达“15”时跳出这个 for 循环怎么办？

```
public class Test {

   public static void main(String args[]) {

      for(int x = 10; x < 20; x = x+1) {
         System.out.print("value of x : " + x );
         System.out.print("\n");
      }
   }
}

Outputs:

value of x : 10
value of x : 11
value of x : 12
value of x : 13
value of x : 14
value of x : 15
value of x : 16
value of x : 17
value of x : 18
value of x : 19 
```

我尝试了以下方法无济于事：

```
public class Test {

   public static void main(String args[]) {
      boolean breakLoop = false;
      while (!breakLoop) {
          for(int x = 10; x < 20; x = x+1) {
             System.out.print("value of x : " + x );
             System.out.print("\n");
          if (x = 15) {
              breakLoop = true;
          }
          }
      }
   }
} 
```

我试过一个循环：

```
public class Test {

   public static void main(String args[]) {
      breakLoop:
          for(int x = 10; x < 20; x = x+1) {
             System.out.print("value of x : " + x );
             System.out.print("\n");
             if (x = 15) {
                 break breakLoop;
             }
      }
   }
} 
```

我可以实现我想要的唯一方法是打破一个 for 循环，我不能用一段时间替换它，做，如果等语句。

编辑：

这仅作为示例提供，这不是我要实现的代码。我现在通过在每个循环初始化的地方放置多个 IF 语句来解决这个问题。在它由于缺少中断而只能跳出循环的一部分之前；

* * *

## 回答 #1

> 赞同：178
> 
> 时间：2013-03-07T15:34:45.897

`break;`是你需要打破任何循环语句，如`for`,`while`或`do-while`.

在你的情况下，它会是这样的： -

```
for(int x = 10; x < 20; x++) {
         // The below condition can be present before or after your sysouts, depending on your needs.
         if(x == 15){
             break; // A unlabeled break is enough. You don't need a labeled break here.
         }
         System.out.print("value of x : " + x );
         System.out.print("\n");
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-07T16:11:23.343

如果由于某种原因您不想使用 break 指令（例如，如果您认为它会在您下次阅读程序时打乱您的阅读流程），您可以尝试以下操作：

```
boolean test = true;
for (int i = 0; i < 1220 && test; i++) {
    System.out.println(i);
    if (i == 20) {
        test = false;
    }
 } 
```

for 循环的第二个参数是布尔测试。如果测试结果为真，则循环将停止。如果您愿意，您可以使用的不仅仅是简单的数学测试。否则，正如其他人所说，一个简单的休息也可以解决问题：

```
for (int i = 0; i < 1220 ; i++) {
    System.out.println(i);
    if (i == 20) {
        break;
    }
 } 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-03-07T15:35:08.867

您可以使用：

```
for (int x = 0; x < 10; x++) {
  if (x == 5) { // If x is 5, then break it.
    break;
  }
} 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-03-07T15:36:13.480

怎么样

```
for (int k = 0; k < 10; k = k + 2) {
    if (k == 2) {
        break;
    }

    System.out.println(k);
} 
```

另一种方式是**标记**循环

```
myloop:  for (int i=0; i < 5; i++) {

              for (int j=0; j < 5; j++) {

                if (i * j > 6) {
                  System.out.println("Breaking");
                  break myloop;
                }

                System.out.println(i + " " + j);
              }
          } 
```

如需更好的解释，您可以[在此处查看](https://stackoverflow.com/questions/886955/breaking-out-of-nested-loops-in-java)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-07T15:36:29.377

```
public class Test {

public static void main(String args[]) {

  for(int x = 10; x < 20; x = x+1) {
     if(x==15)
         break;
     System.out.print("value of x : " + x );
     System.out.print("\n");
  }
}
} 
```

# java - 使用 ScheduledThreadPoolExecutor 为 AndEngine 重复调度任务

> ID：15275197
> 
> 赞同：0
> 
> 时间：2013-03-07T15:33:43.063
> 
> 标签：java, android, andengine

这是我第一次真正涉足 Android 编程，但我觉得我遇到了更多的 Java 问题——对 ScheduledThreadPoolExecutor 的工作方式存在某种重大误解（尽管我愿意接受它是 AnimatedSprites 的 AndEngine 问题的想法， 也）。本质上，我希望精灵在 onFling 发生之前是静止的。精灵动画，一秒钟后，再次停止。用户必须保持 Fling-ing 才能使精灵在水中“游动”。我遇到的问题是动画。如果在 1 秒的时间跨度内有多个 Fling，动画在停止前只显示一两帧，感觉就像“停止动画”任务在叠加。一世' 在我完成所有这些工作后，我会检查并确保 Flings 足够长并且方向正确。当我第一次实例化 ScheduledThreadPoolExecutor 时，我为它提供了 1 的池大小，据我了解，这意味着它一次不能有多个任务在队列中。最重要的是，在调用 .schedule() 之前，我 .remove() 任务，以确保其中没有任何内容。我确信这很简单，只是我对如何正确使用它有一些误解。我将在此处粘贴代码的相关部分：只是为了确保那里没有任何东西。我确信这很简单，只是我对如何正确使用它有一些误解。我将在此处粘贴代码的相关部分：只是为了确保那里没有任何东西。我确信这很简单，只是我对如何正确使用它有一些误解。我将在此处粘贴代码的相关部分：

```
...

private ScheduledThreadPoolExecutor shed = new ScheduledThreadPoolExecutor(1);
private Runnable slowDown = new Runnable(){
    public void run(){
        if (eelSprite.isAnimationRunning())
            eelSprite.stopAnimation(0);
    };
};

...

public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
        float velocityY) {

    shed.remove(slowDown);
    shed.schedule(slowDown, 1000, TimeUnit.MILLISECONDS);

    if (!(eelSprite.isAnimationRunning()))
        eelSprite.animate(frame_duration, 0, 12, true);

return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:17:41.233

这个问题涉及一个棘手的主题。作为第一条评论，我想强调的是，在处理 . 时`ExecutorService`，您可能应该坚持对接口而不是实现进行编码。这应该避免您尝试做的事情的一些复杂性。

举个例子，您提到了 remove() 方法的使用，该方法是公共的，但`(Scheduled)ExecutorService`接口中不存在。这意味着使用它可能需要您可能无法完全控制的一些特定于实现的行为。

从 remove 方法的 Javadoc 中`ThreadPoolExecutor`：

```
/**
 * Removes this task from the executor's internal queue if it is
 * present, thus causing it not to be run if it has not already
 * started.
 *
 * <p> This method may be useful as one part of a cancellation
 * scheme.  It may fail to remove tasks that have been converted
 * into other forms before being placed on the internal queue. For
 * example, a task entered using {@code submit} might be
 * converted into a form that maintains {@code Future} status.
 * However, in such cases, method {@link #purge} may be used to
 * remove those Futures that have been cancelled.
 *
 * @param task the task to remove
 * @return true if the task was removed
 */ 
```

请注意，关于实现的部分可能`Runnable`会将您传递的内容转换为另一种形式，从而使 remove() 方法在您传递`Runnable`用于提交工作的同一实例时无法工作。此外，请注意，不能保证您的删除会起作用，这完全取决于任务是否已经开始，在这种情况下，您必须检查竞争条件。所以我建议你不要使用这种特殊的方法。

关于您对 的实例化`ScheduledThreadPoolExecutor`，您也可能误读了 javadoc。首先，我也会尽可能坚持使用`Executors`类提供的工厂方法来创建池。状态的javadoc `Executors.newScheduledThreadPool(int)`：

```
/**
 * Creates a thread pool that can schedule commands to run after a
 * given delay, or to execute periodically.
 * @param corePoolSize the number of threads to keep in the pool,
 * even if they are idle.
 * @return a newly created scheduled thread pool
 * @throws IllegalArgumentException if {@code corePoolSize < 0}
 */ 
```

这意味着 int 参数是“核心池大小”。核心是这里的关键字。如果您深入了解实现，它实际上使用您在代码段中调用的相同方法，因此这里实际上没有更改。我在这里为您节省了一些阅读时间，但是“核心”池大小是将在池中保持活动状态的最小线程数（一旦启动，池通常不会抢先创建线程，但是据我所知，这是实施，而不是合同）。这与最大线程数无关。实际上，如果您进一步深入研究，您会看到您使用的构造函数最终将构建一个无限池，它可以根据需要生成尽可能多的线程。

因此，您提交到池中的作业可能会同时执行。如果你想要一个单线程池，你可能想要使用`Executors.newSingleThreadedScheduledExecutor`工厂方法。

最后，还有你的工作取消需求。那么如何取消已提交的工作呢？好吧，当您提交作业时，`ExecutorService`实例通常会返回一个`Future`对象。该`Future`对象嵌入了取消逻辑。它允许您在提交的作业上设置一个取消标志（如果它尚未启动，它将阻止它实际运行），如果它已经启动，也可以引发线程中断。

希望这已经澄清了一些语义。

# html - IE10 表格布局：修复了使用 colspan 时损坏的问题

> ID：15275199
> 
> 赞同：9
> 
> 时间：2013-03-07T15:33:45.817
> 
> 标签：html, html-table, internet-explorer-10

以下 HTML 在包括 IE7-9 在内的所有常见浏览器中完美呈现，但在 IE10 中失败。即使在兼容模式下运行 IE10，它也会失败。

```
<html>
    <body>
        <table style="table-layout:fixed;width:500px">
        <colgroup>
            <col style="width:100px" ></col>
            <col ></col>
            <col style="width:100px" ></col>
            <col ></col>
        </colgroup>
        <tbody>
            <tr>
                <td colspan="2">
                    <div style="background:red;"> red </div>
                </td>
                <td colspan="2">
                    <div style="background:green;"> green </div>
                </td>
            </tr>
        </tbody>
        </table>
    </body>
</html> 
```

虽然在所有其他浏览器中，2 个单元格的大小相同，但在 IE10（至少在 Windows7 上运行时），第一个单元格比第二个单元格宽。

IE 9/Windows 7 中的这个 HTML：

![在 IE 9 中](../Images/dea0ff9f790d9853ff36744f53ce5aca.png)

IE 10/Windows 7 中的相同 HTML：

![在 IE 10 中](../Images/06cae0f895aaa00ef1593b0d154eeee0.png)

测试页：[http ://www.dinkypage.com/167605](http://www.dinkypage.com/167605)

报告的错误：[https ://connect.microsoft.com/IE/feedback/details/781009/ie-10-fails-to-render-tables-width-fixed-layout-correctly](https://connect.microsoft.com/IE/feedback/details/781009/ie-10-fails-to-render-tables-width-fixed-layout-correctly)

有谁知道这个问题的解决方案/解决方法？

更新：我要求微软重新打开我报告的错误，因为它违反了 w3c 标准。答案是：

> “您报告的问题是设计使然。Internet Explorer 仅使用第一组 TD 标记来设置列的宽度。”。

w3c 标准（[http://www.w3.org/TR/CSS21/tables.html#fixed-table-layout](http://www.w3.org/TR/CSS21/tables.html#fixed-table-layout)）说：

> 在固定表格布局算法中，每列的宽度确定如下：
> 
> 1.  'width' 属性的值不是 'auto' 的列元素设置该列的宽度。
> 2.  否则，第一行中 'width' 属性的值不是 'auto' 的单元格将确定该列的宽度。如果单元格跨越多列，则宽度将按列划分。
> 3.  任何剩余的列均分剩余的水平表空间（减去边框或单元格间距）。

这意味着，这个功能在 IE 10 中被设计破坏了。我建议使用不同的浏览器或继续使用 IE 9...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T08:07:52.010

我目前的解决方法是以下样式：

```
@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {
  table colgroup { display: table-row; }
  table colgroup col { display: table-cell; }
} 
```

这使得浏览器像 tr/td 一样处理 colgroup/col 并且类似于 Teemu 的建议（但没有丑陋的 html hacks）。媒体选择器使 css 仅对 IE10+ 可见

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T09:26:50.983

我遇到了这个，实际上是在 IE9 中。事实上，我发现的唯一解决方案是在表中放入一个隐藏的虚拟第一行：

```
<tr style="visibility: hidden"><td></td><td></td><td></td><td></td></tr> 
```

然后，为了消除由此产生的差距，我将负边距顶部应用于整个表格。不优雅，但它似乎完成了工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-29T08:07:16.087

我通常这样做

```
<colgroup width="100%"> // for table a whole
    <col width="50%">   // for each column
    <col width="50%">
</colgroup> 
```

2 列 50%，3 列 33%，以此类推。

这适用于 IE10。

# vim - 如何将自定义消息添加到 Vim 快速列表？

> ID：15275200
> 
> 赞同：1
> 
> 时间：2013-03-07T15:33:48.257
> 
> 标签：vim, vim-plugin

我有一个文件，其中包含按文件和行号的代码审查注释。

我正在编写一个 Vim 插件，当我打开文件并导航到行号时，它使用 Vim 快速列表来显示评论评论。

我发现我可以使用`:cex`命令将条目添加[到此文档中的快速列表](http://vimdoc.sourceforge.net/htmldoc/quickfix.html)

如何`[file]:[line] [issue category][issue description]`以允许我跳转到该位置的格式添加错误消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:42:01.547

的帮助`:cexpr`也提供了提示：

> ```
>  If {expr} is a String, then each new-line terminated
>       line in the String is processed using the global value
>       of 'errorformat' and the result is added to the
>       quickfix list. 
> ```

```
:caddexpr printf('%s:%d:%s', expand('%'), line('.'), "entry") 
```

由于 的值`'errorformat'`很难并且可能无法完全由您控制（ftplugins 可能会更改它），因此另一种方法是通过`setqflist()`Vimscript 函数直接设置/附加项目：

```
:call setqflist([{'bufnr': bufnr(''), 'lnum': 42, 'text': 'entry'}], 'a') 
```

# java - Netbeans 构建期间的 Apache ANT 版本问题

> ID：15275207
> 
> 赞同：0
> 
> 时间：2013-03-07T15:34:03.120
> 
> 标签：java, apache, netbeans, ant

我正在尝试使用 netbeans ide 构建一个 java 项目，但我不断得到

```
Please build using Ant 1.8.0 or higher 
```

错误，我认为这是由于 netbeans IDE 中的一些版本差异，

我该如何解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:11:08.993

在 NetBeans 选项中，您可以设置 Ant 主页。将此指向其他安装。

我的是：/usr/local/netbeans-7.2.1/java/ant

默认随 netbeans 一起安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-18T14:22:53.667

它对我不起作用......我有 ant 版本 1.9.10 和 java openjdk 11.0.6（在 linux LEAP 15.1 上）

我想在不启动 Netbeans 10 的情况下进行构建，以便自动化存储在远程服务器上的应用程序的复制/构建过程（锁定样式 ^^）。

每次我使用该命令时都会`ant -buildfile build.xml`收到此错误消息：{

在寻找和观察之后，我发现 netbeans 使用它的“自己的”ant 版本，但是命令输出到 Outout 选项卡，

```
ant -f /netbeans/java/MagicArena -Dnb.internal.action.name=rebuild clean jar 
```

诺尔

```
/usr/local/netbeans/extide/ant/bin/ant -f /netbeans/java/MagicArena -Dnb.internal.action.name=rebuild clean 
```

...正在给予（大）满意：{

我在命令行收到了同样的信息：

```
/netbeans/java/MagicArena/nbproject/build-impl.xml:111: Java 9 support requires Ant 1.10.0 or higher 
```

:{

# jquery - mvc 选择标签上的错误验证

> ID：15275214
> 
> 赞同：0
> 
> 时间：2013-03-07T15:34:31.220
> 
> 标签：jquery, jsp, jquery-validate

我目前有一个关于 2 个 .jsp 页面和一些 jQuery 验证的验证问题。

简而言之，问题是：我的页面上有一组选择元素。没有一个字段是空的。但是，当我想提交表单时，这些字段被标记为无效。jQuery 代码在文件 searchbox.jsp 中，实际表单在文件 searchform.jsp 中。搜索表单正在包含在搜索框文件中。

这是验证代码片段：

```
jQuery("#car-search").validate({
//      onkeyup: false,
        onfocusout: false,
    focusInvalid: false,
    focusCleanup: true,
    rules : {
        "pickupLocationName" : {
            required : true,
            fullLocation : true,
            minlength : 3
        },
        "pickupDate" : {
            required : true,
            minlength : 1
        },
        "pickupTimeHours": {
            required: true
        },
        "returnLocationName": {
            required: true,
            fullLocation : true,
            minlength: 3
        },
        "returnDate" : {
            required : true,
            minlength : 1
        },
        "returnTimeHours": {
            required: true
        },
        "driverFirstname": {
            required: true,
            minlength: 2
        },
        "driverLastname": {
            required: true,
            minlength: 2
        },
        "driverBirthdate": {
            required: true,
            minlength: 10,
            maxlength: 10,
            realDate: true
        }
    },
    messages : {
        "pickupLocationName" : "<spring:message code="car_search.pickup_location.required" />",
        "returnLocationName" : "<spring:message code="car_search.return_location.required" />",
        "pickupDate" : "<spring:message code="car_search.pickup_date.required" />",
        "returnDate" : "<spring:message code="car_search.return_date.required" />",
        "pickupTimeHours": "<spring:message code="car_search.pickup_time.required" />",
        "returnTimeHours": "<spring:message code="car_search.return_time.required" />",
        "driverFirstname": "<spring:message code="car_search.driver_firstname.required"/>",
        "driverLastname": "<spring:message code="car_search.driver_lastname.required"/>",
        "driverBirthdate": "<spring:message code="car_search.driver_birthdate.required"/>"
    },
    showErrors : function(errorMap, errorList) {
        if (!validationMessageIsShown) {
            jQuery(".invalidFormMessage #invalidFormItems").text("");
            this.defaultShowErrors();
            if(this.numberOfInvalids()>0){
                jQuery(".invalidFormMessage").jqmShow();
            }
            validationMessageIsShown = true;
        }
    },
    invalidHandler : function (form, validator) {
        validationMessageIsShown = false;
    },
    submitHandler: function(form) {
        showLoading();
        form.submit();
    },
    errorPlacement : function(error, element) {
        error.appendTo("#invalidFormItems");
    }
}); 
```

这个片段是形式：

```
<form:form commandName="carSearchForm" method="post" action="${actionUrl}" id="car-search" cssClass="searchForm">
<fieldset>
    ...
        <div class="blueDottedBorder"></div>
        </div>
        <div class="usaStep step3">
        <h4><spring:message code="car_search.driver_section"/> <span class="normal"><spring:message code="car_search.driver_section_info"/></span></h4>
        <div class="clr">
            <form:label path="driverFirstname" cssClass="big"><spring:message code="car_search.driver_firstname"/></form:label>
            <c:choose>
                <c:when test="${empty adultFirstNames}">
                   <form:input path="driverFirstname" id="driverFirstname"/>
                </c:when>
                <c:otherwise>
                    <form:select path="driverFirstname" id="driverFirstname" >
                        <form:options items="${adultFirstNames}" />
                    </form:select>
                </c:otherwise>
            </c:choose>
        </div>
        <div class="clr">
            <form:label path="driverLastname" cssClass="big"><spring:message code="car_search.driver_lastname"/></form:label>
            <c:choose>
                <c:when test="${empty adultLastNames}">
                    <form:input path="driverLastname" id="driverLastname" />
                </c:when>
                <c:otherwise>
                    <form:select path="driverLastname" id="driverLastname" >
                        <form:options items="${adultLastNames}" />
                    </form:select>
                </c:otherwise>
            </c:choose>
        </div>
        <div class="clr">
            <form:label path="driverBirthdate" cssClass="big"><spring:message code="car_search.driver_birthdate"/></form:label>
            <c:choose>
                <c:when test="${empty adultBirthdays}">
                    <form:input path="driverBirthdate" size="10" maxlength="10" cssClass="birthdate" id="driverBirthdate" />
                </c:when>
                <c:otherwise>
                    <form:select path="driverBirthdate" items="${adultBirthdays}" id="driverBirthdate" >
                        <form:options items="${adultBirthdays}" />
                    </form:select>
                </c:otherwise>
            </c:choose>
        </div>
        <div class="info-msg" style="padding-left: 30px; margin-top: 30px;" id="extraPointCost"><spring:message code="car_search.warning_surcharge" /> <a href="<url:car-rental_drop-off-cost />" target="_blank" class="more"><spring:message code="car_search.warning_surcharge.link_label" /></a></div>
        </div>
        <div style="margin-top: 30px;"><a href="<url:car-rental_conditions />" target="_blank" class="more"><spring:message code="car_search.rental_conditions.link_label" /></a></div>

    </div>
    <input type="submit" class="submit" value="<spring:message code="car_search.submit"/> &raquo;"/>
</fieldset>
</form:form> 
```

我已经从表格中删除了不相关的字段。该问题仅适用于 driverFirstname、driverLastname 和 driveBirthdate 字段。

在没有值的情况下（因此，当插入的列表在选项标签中是空的），一切正常。验证在该时刻常规输入字段的字段上正常工作。

当列表不为空时会出现此问题，因此当至少有一个或多个选项可供选择时。正如您在表单片段中看到的那样，当实际有选项时，输入字段变为选择字段。然后表单没有通过验证，即使字段不为空并且值的大小大于 2。

这真的让我很困惑。我一直在用谷歌搜索选定字段的已知问题，我在这个论坛上看到了很多帖子，但是建议的解决方案都不起作用或不会起作用（我必须承认，我没有尝试过所有这些，因为有些似乎真的不适合什么我想要）。

有什么想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T17:33:48.170

**编辑2：**

我突然想到，您可能误解了将`minlength`规则应用于`select`元素时的含义。

**引用操作：**

> ...输入字段成为选择字段。然后表单没有通过验证，即使字段不为空并且值的大小大于 2。

*“大小大于2”* ~你的意思是'*选择两个项目*'还是值包含'*超过两个字符*'？

在`select`列表中，该`minlength: 2`规则意味着用户*必须从列表中选择两个项目*。如果这不是您想要的，那么您不能在`select`列表中使用此特定规则。否则，请阅读该行下方的原始帖子...

* * *

您没有显示您的 HTML，因为它最终在浏览器中呈现，所以我不知道`select`列表是如何构建的，元素`value`上的属性`option`是否有意义，或者它的`name`属性是否符合您的规则。

这是一个工作演示/示例，展示了如何使用属性验证`select`列表。`multiple`注意 the`select`及其子`option`元素的 HTML。注意`value`属性是如何填写的，第一个`option`包含`value=""`.

**工作演示：http: [//jsfiddle.net/seUre/](http://jsfiddle.net/seUre/)**

**HTML**：

```
<form id="myform">
    <select multiple="multiple" name="field1">
        <option value="">please choose</option>
        <option value="1">one</option>
        <option value="2">two</option>
        <option value="3">three</option>
    </select>
    <select multiple="multiple" name="field2">
        <option value="">please choose</option>
        <option value="1">one</option>
        <option value="2">two</option>
        <option value="3">three</option>
        <option value="4">four</option>
        <option value="5">five</option>
    </select>
    <input type="submit" />
</form> 
```

**jQuery** :

```
$(document).ready(function () {

    $('#myform').validate({ // initialize the plugin
        // your other options,
        rules: {
            field1: {
                required: true,
                minlength: 2
            },
            field2: {
                required: true,
                minlength: 3
            }
        },
        messages: {
            field1: {
                minlength: "please choose at least {0} items"
            },
            field2: {
                minlength: "please choose at least {0} items"
            }
        }
    });

}); 
```

**编辑**：

并且设置了您的选项，*在*您第一次单击提交按钮 `onfocusout: false,`之前没有验证消息：http: [//jsfiddle.net/seUre/1/](http://jsfiddle.net/seUre/1/)

# java - “for循环”只循环一次或两次。如果是更好的选择吗？

> ID：15275216
> 
> 赞同：0
> 
> 时间：2013-03-07T15:34:34.170
> 
> 标签：java, if-statement, for-loop

count 变量的值将仅为 0 或 1 或 2

以下是我要实现的目标如果计数为 1，则执行一次，如果其 2 执行两次

这是一个更好的解决方案吗

```
 for(int j=0;j<count;j++){
            System.out.println("PRINTING...");
        } 
```

或这个

```
 if(count==1){
            System.out.println("PRINTING...");
        }else if (count==2){
            System.out.println("PRINTING...");
            System.out.println("PRINTING...");
        } 
```

我想知道哪个更好以及为什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T15:37:31.683

显然是第一个。不要重复自己！这种循环展开似乎是过早优化的严重情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T16:12:35.877

我认为关注的是性能，因为从代码可读性和可维护性的角度来看，for-loop 版本显然以压倒性优势获胜。

如果循环体中的代码与 println 调用一样长，那也没关系。

如果循环体真的又小又快，那么主要成本将是任何错误预测的条件分支或缓存未命中。如果硬件在将条件分支加载到流水线后猜错了下一条指令，则必须在分支到达执行阶段后刷新整个流水线。这真的很费钱。

if 版本可能会导致比 for 循环更不常见的条件分支模式。硬件分支预测可能更适用于在设计时使用的基准测试中经常出现的常见习语。

当处理器将数据传送到执行逻辑时，高速缓存未命中可能会导致停顿。if 版本较长，因为有三份循环体，所以指令缓存未命中的风险较高。它们使用相同的数据，因此它们同样有可能遇到数据缓存未命中。

我的猜测是，如果有任何可测量的差异，for-loop 版本可能会更快。这只是一个猜测。

如果你的程序的性能真的取决于这个循环的编写方式，你应该对它进行基准测试。由于依赖于硬件分支预测的细微之处，我建议在尽可能多的不同处理器上对每个版本的程序进行基准测试。如果这对您的程序性能来说还不够关键，不足以证明这种努力是合理的，请坚持使用 for 循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T15:37:50.487

这取决于实际的要求。

如果每次迭代的“做什么”总是相同的，那么循环显然更好。

如果不是，则取决于差异的性质，差异的数量（例如，是否存在单个特殊情况，多个特殊情况，是否可以计算特殊情况等）

您希望代码具有多大的可扩展性也很重要。

# c# - 将文件名分成 2 组

> ID：15275217
> 
> 赞同：0
> 
> 时间：2013-03-07T15:34:36.263
> 
> 标签：c#, split, project, filenames

我正在制作一个“Filewatches”文件夹的应用程序，当在其中创建文件时，它将自动邮寄给客户。

问题是我还没有找到有关如何拆分文件名的任何信息

例如，我有一个名为：“Q1040500005.xls”的文件

我需要前 5 个字符与后 5 个字符分开，所以基本上将它分成两半（当然没有扩展名）

我的应用程序必须将“Q1040”和“500005”识别为单独的字符串。这将在包含查询编号（Q1040）和客户编号“500005”的数据库中识别客户的电子邮件和查询文件的主题。

我怎样才能做到这一点最简单的方法？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:41:10.693

使用 SubString 方法[http://msdn.microsoft.com/es-es/library/aka44szs(v=vs.80).aspx](http://msdn.microsoft.com/es-es/library/aka44szs(v=vs.80).aspx)

```
int lengthFilename = filename.Length - 4; //substract the string ".xls";
int middleLength = lengthFilename/2;
String filenameA = filename.SubString(0, middleLength);
String filenameB = filename.SubString(middleLength, lengthFilename - middleLength); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T15:40:55.310

利用`String.SubString(int startindex, int length)`

```
String filename = Q1040500005.xls

var queryNumber = filename.Substring(0, 5); //Q1040
var customerNumber = filename.Substring(5, 6); //500005 
```

这假设您的字符串是恒定长度。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T15:37:03.407

`string.Substring`方法是你要找的吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T15:37:44.543

你可以`string.SubString()`在这里使用

```
string a  = fileName.SubString(0, 5); // "Q1040"
string b  = fileName.SubString(5, 5); // "50000" <- Are you sure you didn't mean "last 6"?
string b2 = fileName.SubString(5, 6); // "500005" 
```

仅当两个字符串都具有恒定的固定长度时，这才有效

**编辑：**

另一方面，如果两个字符串都可以具有可变长度，我建议您使用分隔符将它们分开（`"Q1040-500005.xml"`），然后使用`string.Split()`

```
string[] separatedStrings = fileName.Split(new char[] { '-', '.' });
string a         = separated[0]; // "Q1040"
string b         = separated[1]; // "500005"
string extension = separated[2]; // "xls" 
```

# r - 如何通过对 R 中的条目进行分组来创建时间序列？

> ID：15275219
> 
> 赞同：3
> 
> 时间：2013-03-07T15:34:39.067
> 
> 标签：r, count, group-by, time-series

我想在 R 中创建从 2004 年 1 月 1 日到 2010 年 12 月 31 日的每日死亡率数据的时间序列。我现在拥有的原始数据（.csv 文件）具有列日-月-年和每一行是一个死亡案例。因此，如果某一天的死亡率例如等于四，则该日期有四行。如果在特定日期没有报告死亡病例，则该日期在数据集中被省略。

我需要的是一个包含 2557 行的时间序列（从 01/01/2004 到 31/12/2010），其中列出了每天的死亡病例总数。如果某天没有死亡病例，我仍然需要将那一天放在列表中，并为其分配一个“0”。

有谁知道如何做到这一点？

谢谢，戈西亚

原始数据示例：

```
day month   year
1   1   2004
3   1   2004
3   1   2004
3   1   2004
6   1   2004
7   1   2004 
```

我需要的：

```
day month   year    deaths
1   1   2004    1
2   1   2004    0
3   1   2004    3
4   1   2004    0
5   1   2004    0
6   1   2004    1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T16:25:02.747

```
df <- read.table(text="day month   year
1   1   2004
3   1   2004
3   1   2004
3   1   2004
6   1   2004
7   1   2004",header=TRUE)

#transform to dates
dates <- as.Date(with(df,paste(year,month,day,sep="-")))

#contingency table
tab <- as.data.frame(table(dates))
names(tab)[2] <- "deaths"
tab$dates <- as.Date(tab$dates)

#sequence of dates
res <- data.frame(dates=seq(from=min(dates),to=max(dates),by="1 day"))
#merge
res <- merge(res,tab,by="dates",all.x=TRUE)
res[is.na(res$deaths),"deaths"] <- 0
res
#       dates deaths
#1 2004-01-01      1
#2 2004-01-02      0
#3 2004-01-03      3
#4 2004-01-04      0
#5 2004-01-05      0
#6 2004-01-06      1
#7 2004-01-07      1 
```

# ios - 从应用推送通知

> ID：15275227
> 
> 赞同：0
> 
> 时间：2013-03-07T15:34:55.463
> 
> 标签：ios, notifications

我怎么能从应用程序推送通知。我的意思是不需要到达服务器来接收它。我的意思是从应用程序发送一个，就像提醒或日历应用程序一样

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:38:37.357

使用本地通知。

本地通知和推送通知之间的更多区别在[这里查看](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008194-CH1-SW1)。

本地通知教程：http: [//www.icodeblog.com/2010/07/29/iphone-programming-tutorial-local-notifications/](http://www.icodeblog.com/2010/07/29/iphone-programming-tutorial-local-notifications/)

# php - PHP Imagemagick PDF 转 GIF

> ID：15275228
> 
> 赞同：0
> 
> 时间：2013-03-07T15:34:55.817
> 
> 标签：php, linux, imagemagick

我有以下代码应该将 PDF 的第一页转换为缩略图：

```
<?php
$strPDF = "http://www.domain.com/b.pdf";
exec("/usr/bin/convert \"{$strPDF}[0]\" -colorspace RGB -geometry 200 \"output.gif\"");
?> 
```

我的主机服务器是 Siteground，显然 /usr/bin/convert 是 ImageMagick 转换功能所在的位置。这是我第一次使用 ImageMagick，我不确定它是否在做任何事情。我的代码正确吗？如果是，我似乎找不到 output.gif。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:41:45.943

为输出文件提供完整路径。示例：/home/marlboro/www/output.gif

此外，首先将 PDF 下载到本地计算机（使用 curl/wget）。

在使用 PHP 中的 exec 之前，您应该 100% 确定从 shell 手动调用该方法时有效！

# php - PHP注册页面，停止重复提交

> ID：15275229
> 
> 赞同：0
> 
> 时间：2013-03-07T15:34:55.820
> 
> 标签：php, html, login, registration

我正在为我的网站制作一个 PHP 注册页面，我目前正在使用下面的代码来执行注册表单。目前如果刷新页面，提交数据到数据库后会重新提交。我知道如何使用标头重定向，我也会使用它。虽然我想去哪里如果有另一个用户使用相同的用户名，让脚本不提交到数据库中。我将如何使用 IF 函数继续执行此操作？

```
<?php
include 'dbconnect.php';
$birth_year= $_POST['year'];
$birth_month= $_POST['month'];
$birth_day= $_POST['day'];
$birthday=$_POST['year'].'-'.$_POST['month'].'-'.$_POST['day'];
$password=md5($_POST['password']);
$sql = "INSERT INTO users      (first_name,last_name,username,password,email,gender,birthday) VALUES (:first_name,:last_name,:username,:password,:email,:gender,:birthday)";
$q = $conn->prepare($sql);
$q->execute(array(':first_name'=>$_POST['first_name'],
          ':last_name'=>$_POST['last_name'],
          ':username'=>$_POST['username'],
          ':password'=>$password,
          ':email'=>$_POST['email'],
          ':gender'=>$_POST['gender'],
          ':birthday'=>$birthday));
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:39:29.513

获取行数，其中`username=$_POST['username']`：

```
$username = $_POST['username'];
$checkexisting = $conn->prepare("SELECT COUNT(*) FROM users WHERE username=:username");

if($checkexisting->execute(array(':username' => $username))->fetchColumn() == 0) {
  // username does not exist
  // fetch column returns the first column from the select statement, which is COUNT(*)
} 
```

或者将用户名列设为唯一 ID。这将防止该列直接在数据库中出现任何重复值。你必须为你的 SQL 语句准备好然后抛出错误。

此外，为了帮助刷新而不重新提交表单，请查看 John 使用 POST/REDIRECT/GET 的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T15:39:59.110

脚本不会“提交到数据库”。您的脚本将运行查询以尝试向数据库中插入一行。如果用户名是唯一的，则将其设为唯一索引，SQL INSERT 语句将失败并返回一个代码，告诉您该特定条目已经存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T15:37:42.870

通过 POST 加载的页面将导致浏览器要求用户重新提交信息以查看页面，从而导致该页面执行的操作再次发生。

解决此问题的最佳方法是使用[POST/REDIRECT/GET 模式](http://www.andypemberton.com/engineering/the-post-redirect-get-pattern/)。[我在我为 Authorize.Net 编写的](http://community.developer.authorize.net/t5/The-Authorize-Net-Developer-Blog/Handling-Online-Payments-Part-6-Preventing-Duplicate-Submissions/ba-p/11168)关于处理付款的示例中使用了它。希望这会为您指明正确的方向。

# c# - 使用内部连接对 XML 元素内的结果进行分组

> ID：15275230
> 
> 赞同：0
> 
> 时间：2013-03-07T15:34:56.213
> 
> 标签：c#, xml, linq-to-sql, linq-to-xml

我试图了解如何组合 LINQ-to-XML 和 LINQ-to-SQL 查询并执行连接。

具体来说，我有一个包含城市、县和州信息的 SQL 表，我可以使用 LINQ to SQL 对其进行查询，但在同一个查询中，我想加入具有相同州和/或县，并生成一个 XML 作为输出的一部分。

这大概是我的桌子的样子：

```
╔═════╦══════════════╦════════════════╦═══════╗
║ IDX ║     CITY     ║   COUNTY       ║ STATE ║ 
╠═════╬══════════════╬════════════════╬═══════╣
║  1  ║ YAKUTAT      ║ ALEUTIANS EAST ║ AK    ║
║  2  ║ city-1       ║ ALEUTIANS EAST ║ AK    ║
║  3  ║ city-2       ║ ALEUTIANS EAST ║ AK    ║
║  4  ║ city-3       ║ ALEUTIANS WEST ║ AK    ║
║  5  ║ city-4       ║ ALEUTIANS WEST ║ AK    ║
║  6  ║ city-5       ║ ALEUTIANS WEST ║ AK    ║
║  7  ║ xyz          ║ ANCHORAGE      ║ AK    ║
║  8  ║ abc          ║ BETHEL         ║ AK    ║
║  9  ║ lmnop        ║ WYOMING        ║ NY    ║
║  10 ║ pqrst        ║ WARSAW         ║ NY    ║
║  11 ║ defg         ║ WARSAW         ║ NY    ║
╚═════╩══════════════╩════════════════╩═══════╝ 
```

这就是我希望我的 XML 输出的样子。我希望加入将具有相同县的所有城市分组为同一县节点下的节点，然后将一个州的所有县分组为该州节点的子节点。

```
<State>AK</State>
  <County>ALEUTIANS EAST</County>
    <City>YAKUTAT</City>
    <City>city-1</City>
    <City>city-2</City>
  <County>ALEUTIANS WEST</County>
    <City>city-3</City>
    <City>city-4</City>
    <City>city-5</City>   
  <County>ANCHORAGE</County>
    <City>xyz</City>
  <County>BETHEL</County>
    <City>abc</City>
<State>NY</State>
  <County>WYOMING</County>
    <City>lmnop</City>
  <County>WARSAW</County>
    <City>pqrst</City>
    <City>defg</City> 
```

我确实有这部分工作，我能够成功地从我的数据库中选择行，并且我能够将输出编写为 XML，但我无法将城市和县数据嵌套为州的子节点，我错过了加入部分，目前尚不清楚如何做到这一点。

```
XDocument xDoc = new XDocument(new XElement("States",
   (from states in state.Database 
    select new XElement(new XElement("State",states.State),
           new XElelment("County",states.County),
           new XElelment("City",state.City))));

xDoc.Save("C:\\states.xml") 
```

这就是我得到的输出。如您所见，我在我的数据库中获得了所有城市、州和县的完整列表，没有层次结构。

```
<State>AK</State>
<County>ALEUTIANS EAST</County>
<City>YAKUTAT</City>
<State>AK</State>
<County>ALEUTIANS EAST</County>
<City>city-1</City>
<State>AK</State>
<County>ALEUTIANS EAST</County>
<City>city-2</City>
<State>AK</State>
<County>ALEUTIANS WEST</County>
<City>city-3</City>
<State>AK</State>
<County>ALEUTIANS WEST</County>
<City>city-4</City>
....and so on.. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:21:29.257

您确实有几个单独的问题，首先是您无法生成分层 XML 文件（假设我在编辑您的问题之前了解您的初衷）。事实上，您的示例 XML 甚至不是分层的，因为您在将预期的子标签嵌套在它下面之前关闭标签。像你正在做的缩进不是创建任何类型的子节点，只是让它看起来像。

这就是我认为您希望您的 XML 看起来像的样子：

```
<State>AK
  <County>ALEUTIANS EAST
    <City>YAKUTAT</city>
    <City>city-1</city>
  </County>
</State> 
```

但是将字符串等简单类型与同一节点中的其他节点等复杂类型混合起来可能会非常混乱。我可以建议修改结构以使用属性，从而消除一些令人困惑的层次结构。像这样的结构更普遍可以接受：

```
<State name = "AK">
  <County name = "ALEUTIANS EAST">
    <City>YAKUTAT</city>
    <City>city-1</city>
  </County>
</State> 
```

生成嵌套 XML 只需将`XElement`对象彼此排列在一起

```
XElement stateElement = new XElement("State", new XAttribute("name", "AK"), 
                            new XElement("County", new XAttribute("name", "ALEUTIANS EAST"), 
                                new XElement("City", "YAKUTAT"), 
                                new XElement("City", "city-1"))); 
```

将生成一个具有我上面建议的结构的 XML。

您缺少的第二部分是联接。由于所有内容都在同一个表中，因此您实际上是在寻找组查询，因为您想将子元素组合在一个共同的父元素下。

我不是对 LINQ-to-SQL 的期望，而且不同风格之间可能存在字幕差异这一事实，我不能 100% 确定语法是否完全正确，但希望如果它关闭，它会仍然让你指向正确的方向。

*请注意，仅仅因为您正在创建一个 XML 文件，这不是 LINQ-to-XML，LINQ 是关于查询源而不是输出，因为您正在查询数据库，所以这是 LINQ-to-SQL*

```
var query = from states in state.Database 
            group states by new { states.State, states.County } into countyGroup
            group countyGroup by countyGroup.Key.State into stateGroup
            select new XElement("State", new XAttribute("name", stateGroup.Key),
                       stateGroup.Select(st => new XElement("County", new XAttribute("name", st.Key.County),
                       st.Select(city => new XElement("City", city.City)))));

var xdoc = new XDocument(new XDeclaration("1.0", "UTF-8", null),
                         new XElement("States", query.ToArray())); 
```

第一个 group 语句将根据共同的县和州将所有数据库行分组（必须包括州，就好像您将其排除在 Orange, FL 和 Orange, CA 内的城市一样。第二组语句然后将您的数据库行进一步分组到常见的州。您最终得到一个分组（称为`stateGroup`由同一县的城市集合和同一城市中的县组成的集合。

将分组分解为适当的 XML 节点的 select 语句变得非常混乱，但它有效地写出了每个分组，以便到达我认为您想要去的地方。

（当您在问题中创建您的问题时，您也错过了 XML 声明`XDocument`，所以我在此处添加了该声明）。

# r - 最小二乘百分比回归

> ID：15275236
> 
> 赞同：2
> 
> 时间：2013-03-07T15:35:13.767
> 
> 标签：r, regression

是否有实现最小二乘百分比回归的 R 包。在此链接上可以找到关于此的论文：

[https://uhra.herts.ac.uk/dspace/bitstream/2299/965/1/S64.pdf](https://uhra.herts.ac.uk/dspace/bitstream/2299/965/1/S64.pdf)

任何帮助或指导都会有所帮助。

# python - Python 脚本进度电子邮件

> ID：15275244
> 
> 赞同：1
> 
> 时间：2013-03-07T15:35:36.800
> 
> 标签：python, email, progress

我有一个 Python 脚本，它遍历 8 台不同机器的列表并进行复制、执行和测试。我想在每个循环后收到一封电子邮件。**我不知道用谷歌搜索什么。我将不胜感激任何有助于我完成任务的想法。

我知道 smtplib 模块，只是不知道如何使用它执行某个任务。

我确实检查了方便的搜索引擎，并没有发现以前提供答案的问题

**问题：如何在循环中间中断，发送一封电子邮件，然后继续循环？？？？？？**

脚本开始时我有一封电子邮件，脚本结束时我有一封电子邮件。我只想在脚本进行或失败时收到通知。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:38:58.007

您正在寻找 Python 的[smtp 库](http://docs.python.org/2/library/smtplib.html)。

文档中的示例是这样的：

```
import smtplib

def prompt(prompt):
    return raw_input(prompt).strip()

fromaddr = prompt("From: ")
toaddrs  = prompt("To: ").split()
print "Enter message, end with ^D (Unix) or ^Z (Windows):"

# Add the From: and To: headers at the start!
msg = ("From: %s\r\nTo: %s\r\n\r\n"
       % (fromaddr, ", ".join(toaddrs)))
while 1:
    try:
        line = raw_input()
    except EOFError:
        break
    if not line:
        break
    msg = msg + line

print "Message length is " + repr(len(msg))

server = smtplib.SMTP('localhost')
server.set_debuglevel(1)
server.sendmail(fromaddr, toaddrs, msg)
server.quit() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:39:18.393

如果您需要对 MIMEtypes/etc 进行任何非标准操作，请使用内置的[电子邮件包来创建您的消息。](http://docs.python.org/2/library/email-examples.html)使用内置的[smtplib](http://docs.python.org/2/library/smtplib.html#module-smtplib)包发送它（如果您不需要做任何花哨的事情，请创建它）。

# wordpress - htaccess 文件未能为 wordpress 重定向 500 错误

> ID：15275248
> 
> 赞同：0
> 
> 时间：2013-03-07T15:35:50.173
> 
> 标签：wordpress, .htaccess, http-status-code-301

我是创建 htaccess 文件的新手，我用谷歌搜索了一下并创建了带有 301 重定向的 .htaccess 文件，上传后它有多个重定向它给了我一个 500 错误。请指导我，我做错了吗。我的网站使用 WordPress 3.5.1

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress

redirect 301 /wedding-venue-directory/warwickshire-wedding-venues/coventry-weddings/ http://www.dcphotographic.co.uk/wedding-venue-directory/west-midlands-weddings/coventry-weddings/
redirect 301 /wedding-venue-directory/warwickshire-wedding-venues/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-venue-directory/oxfordshire-weddings/banbury-weddings/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-venue-directory/northamptonshire-wedding-venues/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-venue-directory/west-midlands-weddings/birmingham-weddings/ http://www.dcphotographic.co.uk/
redirect 301 /graphistudio-wedding-storybook/ http://www.dcphotographic.co.uk/
redirect 301 /graphistudio/crystal-glance/ http://www.dcphotographic.co.uk/
redirect 301 /graphistudio/silk/ http://www.dcphotographic.co.uk/
redirect 301 /graphistudio/die-cut-leather-201/ http://www.dcphotographic.co.uk/
redirect 301 /graphistudio/price/ http://www.dcphotographic.co.uk/
redirect 301 /graphistudio/metallic/ http://www.dcphotographic.co.uk/
redirect 301 /storybooks-albums/asuka-book/zen-lay-flat/ http://www.dcphotographic.co.uk/
redirect 301 /storybooks-albums/asuka-book/ http://www.dcphotographic.co.uk/
redirect 301 /info-about-your-wedding-photographer/ http://www.dcphotographic.co.uk/
redirect 301 /graphistudio/leather/ http://www.dcphotographic.co.uk/
redirect 301 /storybooks-albums/graphistudio-wedding-storybook/ http://www.dcphotographic.co.uk/
redirect 301 /storybooks-albums/graphistudio-wedding-storybook/graphistudio-hard-cover-dust-jacket-books/ http://www.dcphotographic.co.uk/
redirect 301 /storybooks-albums/asuka-book/neo-classic/ http://www.dcphotographic.co.uk/
redirect 301 /info-about-your-wedding-photographer/faqs-about-your-wedding-photographer/ http://www.dcphotographic.co.uk/
redirect 301 /info-about-your-wedding-photographer/testimonials-about-your-wedding-photographer/ http://www.dcphotographic.co.uk/
redirect 301 /storybooks-albums/graphistudio-wedding-storybook/graphistudio-premium-books/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-photographers-package-prices/gold-wedding-photography-packages/storybook-gold/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-photographers-photo-gallery/reportagephotojournalistic-wedding-photography-portfolio/ http://www.dcphotographic.co.uk/
redirect 301 /storybooks-albums/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-photographers-package-prices/full-day-packages/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-photographers-package-prices/bronze-wedding-photography-packages/graphistudio-bronze/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-photographers-package-prices/silver-wedding-photography-packages/ http://www.dcphotographic.co.uk/
redirect 301 /graphistudio/die-cut-leather/ http://www.dcphotographic.co.uk/
redirect 301 /graphistudio-wedding-storybook/classic-leather-wedding-storybook/ http://www.dcphotographic.co.uk/
redirect 301 /graphistudio-wedding-storybook/die-cut-leather-wedding-storybook/ http://www.dcphotographic.co.uk/
redirect 301 /graphistudio-wedding-storybook/die-cut-leather-201-wedding-storybook/ http://www.dcphotographic.co.uk/
redirect 301 /storybooks-albums/graphistudio-wedding-storybook/soft-silk-wedding-storybook/ http://www.dcphotographic.co.uk/
redirect 301 /contact-2/ http://www.dcphotographic.co.uk/
redirect 301 /storybooks-albums/graphistudio-wedding-storybook/die-cut-leather-201-wedding-storybook/ http://www.dcphotographic.co.uk/
redirect 301 /storybooks-albums/graphistudio-wedding-storybook/metallic-wedding-storybook/ http://www.dcphotographic.co.uk/
redirect 301 /storybooks-albums/graphistudio-wedding-storybook/crystal-glance-wedding-storybook/ http://www.dcphotographic.co.uk/
redirect 301 /storybooks-albums/graphistudio-wedding-storybook/classic-leather-wedding-storybook/ http://www.dcphotographic.co.uk/
redirect 301 /storybooks-albums/graphistudio-wedding-storybook/die-cut-leather-wedding-storybook/ http://www.dcphotographic.co.uk/
redirect 301 /www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/privacy-policy/
redirect 301 /dc-news/test-3/ http://www.dcphotographic.co.uk/
redirect 301 /storybooks-albums/asuka-book/book-bound-exd-ex/ http://www.dcphotographic.co.uk/
redirect 301 /storybooks-albums/asuka-book/zen-lay-flat-ex-hardcover-book/ http://www.dcphotographic.co.uk/
redirect 301 /storybooks-albums/asuka-book/zen-lay-flat-book-impact/ http://www.dcphotographic.co.uk/
redirect 301 /graphistudio-wedding-storybook/graphistudio-premium-books/ http://www.dcphotographic.co.uk/
redirect 301 /contact/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-photographers-package-prices/bronze-wedding-photography-packages/asuka-bronze/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-photographers-package-prices/disc-only-wedding-photography-packages/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-photographers-photo-gallery/romantic-wedding-photography-portfolio/ http://www.dcphotographic.co.uk/
redirect 301 /graphistudio-wedding-storybook/graphistudio-hard-cover-dust-jacket-books/ http://www.dcphotographic.co.uk/
redirect 301 /home/ http://www.dcphotographic.co.uk/
redirect 301 /info-about-your-wedding-photographer/dvd-slideshow/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-photographers-package-prices/silver-wedding-photography-packages/storybook-silver/ http://www.dcphotographic.co.uk/wedding-photographer-package-prices/   
redirect 301 /wedding-photographers-package-prices/disc-only-wedding-photography-package/ http://www.dcphotographic.co.uk/wedding-photographer-package-prices/
redirect 301 /prices/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-venue-directory/northampton-wedding-venues/ http://www.dcphotographic.co.uk/
redirect 301 /graphistudio-wedding-storybook/crystal-glance-wedding-storybook/ http://www.dcphotographic.co.uk/
redirect 301 /about/faq/ http://www.dcphotographic.co.uk/
redirect 301 /cyprus-weddings/prices/no-frills/ http://www.dcphotographic.co.uk/
redirect 301 /contact-your-wedding-photographer/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-photographers-package-prices/bronze-wedding-photography-packages/jorgensen-bronze/ http://www.dcphotographic.co.uk/wedding-photographer-package-prices/
redirect 301 /wedding-photographers-package-prices/wedding-photography-package-4/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-photographers-package-prices/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /faqs-about-your-wedding-photographer/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /two-column-gallery/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-photographers-package-prices/package-3/ http://www.dcphotographic.co.uk/wedding-photographer-package-prices/
redirect 301 /dc-news/category/warwickshire/rugby/brownsover-hall-hotel/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /dc-news/tag/northamptonshire/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-photographers-package-prices/package-4/ http://www.dcphotographic.co.uk/wedding-photographer-package-prices/
redirect 301 /dc-news/tag/hellidon-lakes-hotel/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-venue-directory/worcestershire/worcester-weddings/ http://www.dcphotographic.co.uk/
redirect 301 /dc-news/portfolio_category/natural-wedding-photography/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /dc-news/category/oxfordshire/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /dc-news/frontslider/full-wedding-supplier-directory-to-help-you-make-your-decisions/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-venue-directory/oxfordshire/henley-weddings/ http://www.dcphotographic.co.uk/
redirect 301 /dc-news/tag/daventry/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-venue-directory/northamptonshire/brackley-weddings/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-venue-directory/northamptonshire-wedding-venues/daventry-weddings/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-venue-directory/west-midlands-weddings/coventry-weddings/comment-page-1/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-venue-directory/west-midlands-weddings/coventry-weddings/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /dc-news/wedding-photography-christina-owen/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-venue-directory/gloucestershire/cheltenham-weddings/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-venue-directory/gloucestershire/gloucester-weddings/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-venue-directory/buckinghamshire/aylesbury-weddings/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-venue-directory/buckinghamshire/buckingham-weddings/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-venue-directory/berkshire/reading-weddings/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-photographers-package-prices/bronze-wedding-photography-packages/comment-page-1/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /dc-news/wedding-photography-clare-david/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-photographers-package-prices/platinum-wedding-photography-packages/storybook-platinum/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-venue-directory/oxfordshire/bicester-wedding/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-venue-directory/northamptonshire/corby-weddings/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-photographers-package-prices/package-6/ http://www.dcphotographic.co.uk/wedding-photographer-package-prices/
redirect 301 /wedding-photographers-package-prices/package-1/ http://www.dcphotographic.co.uk/wedding-photographer-package-prices/
redirect 301 /wedding-venue-directory/northamptonshire/wellingborough-weddings/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-venue-directory/northamptonshire-wedding-venues/wellingborough-weddings/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /about-your-wedding-photographer/graphistudio-wedding-storybook/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-venue-directory/northamptonshire-wedding-venues/brackley-weddings/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-venue-directory/worcestershire/droitwich-weddings/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-venue-directory/berkshire/newbury-weddings/ http://www.dcphotographic.co.uk/
redirect 301 /about-your-wedding-photographer/faqs-about-your-wedding-photographer/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /about-your-wedding-photographer/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-photographers-package-prices/extras/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/wedding-photographer-package-prices/
redirect 301 /wedding-photographers-package-prices/wedding-photography-package-7/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-venue-directory/warwickshire-wedding-venues/nuneaton-weddings/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-venue-directory/northamptonshire/kettering-weddings/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-venue-directory/berkshire/hungerford-weddings/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-venue-directory/worcestershire/bromsgrove-wedding/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-venue-directory/worcestershire/redditch-weddings/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-venue-directory/berkshire/slough-weddings/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-venue-directory/oxfordshire/witney-weddings/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-photographers-package-prices/package-7/ http://www.dcphotographic.co.uk/wedding-photographer-package-prices/
redirect 301 /wedding-photographers-package-prices/package-5/ http://www.dcphotographic.co.uk/wedding-photographer-package-prices/
redirect 301 /wedding-photographers-package-prices/wedding-photography-package-1/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-photographers-package-prices/package-2/ http://www.dcphotographic.co.uk/wedding-photographer-package-prices/
redirect 301 /dc-news/page/2/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /dc-news/page/3/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /dc-news/page/4/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-photographers-package-prices/wedding-photography-package-3/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/wedding-photographer-package-prices/
redirect 301 /dc-news/tag/rugby/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /dc-news/category/news/personal/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /dc-news/tag/oxfordshire-weddings/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /dc-news/category/warwickshire/rugby/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /dc-news/tag/warwickshire-wedding-photographer/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /dc-news/portfolio/natural-wedding-photography/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /dc-news/frontslider/your-special-moments-captured/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /dc-news/portfolio/andrea-marius/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /sitemap/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-photographers-package-prices/wedding-photography-package-6/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /about-your-wedding-photographer/help-with-your-web-gallery/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /about-your-wedding-photographer/testimonials/more-testimonials/even-more-testimonials/more-and-more-testimonials/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /dc-news/best-wedding-photographer/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /about-your-wedding-photographer/testimonials/more-testimonials/even-more-testimonials/more-and-more-happy-brides-and-grooms/feed/ http://www.dcphotographic.co.uk/
redirect 301 /about-your-wedding-photographer/testimonials/more-testimonials/even-more-testimonials/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-photographers-package-prices/wedding-photography-package-5/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /natural-wedding-photography/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-venue-directory/warwickshire-wedding-venues/rugby-weddings/comment-page-1/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-venue-directory/warwickshire-wedding-venues/rugby-weddings/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /about-your-wedding-photographer/testimonials/more-testimonials/even-more-testimonials/more-and-more-happy-brides-and-grooms/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /about-your-wedding-photographer/testimonials/more-testimonials/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-venue-directory/oxfordshire-weddings/oxford-weddings/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /about-your-wedding-photographer/testimonials/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-photographers-package-prices/bronze-wedding-photography-packages/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /testimonials-about-your-wedding-photographer/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /privacy-policy/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /dc-news/tag/brownsover-hall-hotel/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /dc-news/frontslider/natural-wedding-photography/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /dc-news/frontslider/stunning-natural-wedding-photography/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /dc-news/frontslider/world-class-wedding-photographer/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /dc-news/frontslider/handcrafted-wedding-storybooks/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /dc-news/category/northamptonshire/daventry/hellidon-lakes-hotel/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /dc-news/tag/worcestershire-wedding-photography/www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /dc-news/test-2/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-venue-directory/west-midlands-weddi http://www.dcphotographic.co.uk/
redirect 301 /http://www.dc-photographic.co.uk/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-venue-directory/oxfordshire-wedding http://www.dcphotographic.co.uk/
redirect 301 /wedding-photographers-package-prices/] http://www.dcphotographic.co.uk/
redirect 301 /Natural http://www.dcphotographic.co.uk/
redirect 301 /gallery-test/ http://www.dcphotographic.co.uk/
redirect 301 /dc-news/test-to-add-tab-content/ http://www.dcphotographic.co.uk/
redirect 301 /a/ http://www.dcphotographic.co.uk/
redirect 301 /dc-news/testing/ http://www.dcphotographic.co.uk/
redirect 301 /Wedding http://www.dcphotographic.co.uk/
redirect 301 /warwick/mi/mi_harb.html http://www.dcphotographic.co.uk/
redirect 301 /wedding-venue-directory/oxfordshire-weddings/oxford-weddings/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-venue-directory/northamptonshire-wedding-venues/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-venue-directory/northamptonshire-wedding-venues/northampton-weddings/ http://www.dcphotographic.co.uk/
redirect 301 /info-about-your-wedding-photographer/testimonials-about-your-wedding-photographer/ http://www.dcphotographic.co.uk/
redirect 301 /graphistudio-wedding-storybook/die-cut-leather-201-wedding-storybook/ http://www.dcphotographic.co.uk/
redirect 301 /graphistudio-wedding-storybook/die-cut-leather-wedding-storybook/ http://www.dcphotographic.co.uk/
redirect 301 /www.dcphotographic.co.uk/privacy-policy/ http://www.dcphotographic.co.uk/
redirect 301 /wedding-photographers-photo-gallery/romantic-wedding-photography-portfolio/ http://www.dcphotographic.co.uk/
redirect 301 /contact/ http://www.dcphotographic.co.uk/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:57:36.793

您的 .htaccess 文件在我的服务器上工作。当我使用它时，它不会给我一个 500 错误。在我的服务器上使用重定向对我来说很好。

如果您有权访问它，请查看服务器的 error_log 文件。该文件将告诉您有关问题实际原因的更多信息。

尝试只设置一条规则，看看是否有效。

然后尝试加入一半的规则。

然后是另一半。

使用此技术，您可以缩小导致问题的线路。

# enums - 将字段解组为枚举 - 可能吗？

> ID：15275249
> 
> 赞同：0
> 
> 时间：2013-03-07T15:35:50.420
> 
> 标签：enums, jaxb, unmarshalling

我有一个包含 Car 对象列表的 xml 文档。在每个 Car 对象中，它都有 Owner 和 Mechanic 元素。Owner 和 Mechanic 具有完全相同的字段（姓名和邮政编码）。我想将 Car 对象解组为 Cars 列表。我不想创建两个名为 Owner 和 Mechanic 的子对象，而是创建一个名为 Person 的子对象。内部人员 我想指出他们是什么类型的人，无论是所有者还是机械师。我创建了一个名为 PersonType 的枚举，其中包含所有者和机械师。在 Car 内部，我放置了一个名为 PersonType 的变量来区分。PersonType 始终为空。

任何人都可以帮助我实现这个目标吗？我真的认为所有者和机械师的 2 个对象是不必要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:14:12.543

我使用了 Eclipse MOXy 的 @XmlPath 属性，效果很好。

# javascript - 列表视图中的文本框

> ID：15275250
> 
> 赞同：0
> 
> 时间：2013-03-07T15:35:50.560
> 
> 标签：javascript, asp.net, html, listview, textbox

我有一个`ListView`包含一个下拉列表、4 个文本框和按钮。我希望仅在下拉列表`value=2`针对`ListView`.

例如，我有 5 条记录显示在`ListView`第 2 条和第 3 条中`value=2`

这是我的`document.ready`它预设并在页面加载时选择下拉列表的每个值。所以我试图显示它`ZipBox`何时执行此操作，因为我觉得这将是最简单的，但我也愿意接受其他建议，因为显示该框似乎不起作用。

```
$('.Existing').each(function() {
    var select = $(this).attr('data');
    $(this).val(select);
    //this part doesn't work below
    if(select=="2")
    {
        $('#zipBox').css({ 'visibility': 'visible' });
}
}); 
```

如果下拉选择发生更改，我还需要显示文本框，见下文尝试过，但它只适用于第一个。例如，如果我更改第 5 条记录的值，它将使`ZipBox`第一行而不是第 5 行可见。

```
$('.Existing').change(function() {
    if ($(this).val() == '2') {
        $('#ZipBox').css({ 'visibility': 'visible' });
    }
}); 
```

这是列表视图：

```
<asp:ListView runat="server" ID="ListView1">
    <LayoutTemplate>
        <table id="tablesorter" style="border: solid 1px black; width: 55%;">
            <thead>
                <tr>
                    <th>
                        <a href="#">Country</a>
                    </th>
                    <th>
                        <a href="#">Info.</a>
                    </th>
                    <th>
                        <a href="#">Action</a>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr id="itemPlaceholder" runat="server" />
            </tbody>
            <tfoot>
            </tfoot>
        </table>
    </LayoutTemplate>
    <ItemTemplate>
        <tr>
            <td>
                &nbsp;&nbsp;<select id="Existing" data="<%# Eval("Type").ToString()%>"
                    class="Existing" style="width: 90px">
                    <option value="0">USA</option>
                    <option value="1">CAN</option>
                    <option value="2">MEX</option>
            </td>
            <td>
                <input size="4" type="text" id="city" value="<%# Eval("City")%>" />
                <input size="4" type="text" id="state" value="<%# Eval("State")%>" />
                <input size="4" type="text" id="Phone" value="<%# Eval("PhoneNbr")%>" />
                <span id="ZipBox" style="visibility: hidden">
                    <input maxlength="5" size="5" type="text" id="zip" value="<%# Eval("ZIP")%>" />
                </span>
            </td>
            <td>
                <2 buttons here>
            </td>
        </tr>
    </ItemTemplate>
</asp:ListView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:13:15.653

可以切换输入（使用`visibility`），因此不需要跨度，但切换跨度或输入需要`class`属性而不是`id`（id 应该是唯一的，因此`#ZipBox`用于多个 zip 字段将不起作用）

[jsfiddle 演示](http://jsfiddle.net/pxfunc/emkhw/)

在您的第一遍（`.each()`）这将设置 zip 可见性，我评论了将下拉值设置为`data`属性的部分，因为这会中断检查`value = 2`

```
$('.Existing').each(function () {
    var $this = $(this), // drop down
        $thisRow = $this.closest('tr'), // the drop down's row
        $thisZip = $thisRow.find('.zip'), // the zip textbox on the same row
        $thisDataType = $this.attr('data'); // data attribute contains the type

    //$(this).val(select); // type is being set to the value

    if ($this.val() == 2) {
        $thisZip.css({'visibility': 'visible'});
    }
}); 
```

对于更改事件，您几乎可以做同样的事情，但是`else {}`如果选中则添加块`MEX`然后更改`zip`将再次隐藏

```
$('.Existing').change(function () {
    var $this = $(this), // the drop down that changed
        $thisRow = $this.closest('tr'), // the drop down's row
        $thisZip = $thisRow.find('.zip'); // the zip textbox on the same row

    if ($this.val() == 2) {
        $thisZip.css({'visibility': 'visible'});
    } else {
        $thisZip.css({'visibility': 'hidden'});
    }
}); 
```

# c# - 如何在C#中按值而不是引用将数组保存在列表中

> ID：15275251
> 
> 赞同：2
> 
> 时间：2013-03-07T15:35:50.163
> 
> 标签：c#, arrays, list

我想保存我当前的数组状态，然后更改该数组，但是当我将数组保存在列表中然后更改我的数组时，列表中的数组也会更改。这是一个示例代码和我的代码的一部分：

```
void main()
{
    List<int[]> lisarr = new List<int[]>();
    int[] a = new int[1];
    a[0] = 1;
    lisarr.Add(a);
    a[0] = 10;
    // at this time lisarr[0] also changes
   ....
} 
```

如果您跟踪此代码，请注意我在列表中的数组也发生了变化，但我不想要这个。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T15:37:38.273

添加数组的副本：

```
List<int[]> lisarr = new List<int[]>();
int[] a = new int[1];
a[0] = 1;
lisarr.Add(a.ToArray());
a[0] = 10; 
```

# jquery - 需要单击按钮时出现错误消息

> ID：15275252
> 
> 赞同：0
> 
> 时间：2013-03-07T15:35:51.737
> 
> 标签：jquery, button, radio-button

我被分配了一个任务，用户必须选择一个大学校园并单击继续按钮。我唯一无法工作的是，当没有选择单选按钮并单击继续按钮时，应该会出现一条错误消息，指出“*您尚未选择大学校园，请再试一次。*'

除了这个错误代码，我还有其他一切工作。我似乎无法得到它。出现一条错误消息，说明“未定义”，它来自按钮的单击功能。有人可以帮忙吗？

```
<html>
<head>
    <style>
        input, label { line-height: 1.5em; }
    </style>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
    <form>
        <div>
            <input type="radio" name="university" value="Ah, we are not on the same site" id="Belfast">
            <label for="Belfast">Belfast</label>
        </div>
        <div>
            <input type="radio" name="university" value="Yeah, we are on the same campus" id="Jordanstown">
            <label for="Jordanstown">Jordanstown</label>
        </div>
        <div>
            <input type="radio" name="university" value="Ah, we are not on the same site" id="Coleraine">
            <label for="Coleraine">Coleraine</label>
        </div>
        <div>
            <input type="radio" name="university" value="Ah, we are not on the same site" id="Magee">
            <label for="Magee">Magee</label>
        </div>
        <div id="log"></div>
    </form>

    <input type="button" value="Continue" id="click">
</body>
</html>

<script>
    $(function () {
        $("#click").click(function () {
            alert($("input[type=radio]:checked").val());
        })
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:43:45.593

而不是`$("input[type=radio]:checked").val()`尝试检查长度，如下所示：

```
$(function () {
    $("#click").click(function(){
        if ($("input[type=radio]:checked").length == 0) {
            alert( 'Your message goes here' );
        }
    })
}); 
```

当您使用`.val()`jQuery 时，会拉取所选单选按钮的值。由于没有选择单选按钮，因此您将获得`undefined`. 如果您使用`.length`jQuery，则返回与您的选择器字符串匹配的元素数。在这种情况下，如果未检查任何内容，您将得到 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:43:05.747

[http://jsfiddle.net/VMLg9/](http://jsfiddle.net/VMLg9/)

```
$("#click").click(function(){
    my_val = $("input[type=radio]:checked").val();

    if( my_val === undefined){
        alert("MY_VALIDATION_ERROR");
    } else {
        alert($("input[type=radio]:checked").val());
    }

}) 
```

# c# - C# Excel左右边框

> ID：15275254
> 
> 赞同：2
> 
> 时间：2013-03-07T15:35:53.617
> 
> 标签：c#, excel, c#-4.0, border

我想在单元格上创建边框，然后创建左右边框。

我试过这段代码，但它不起作用:(

```
objSheet.get_Range("F19").Borders[Excel.XlBordersIndex.xlEdgeLeft].LineStyle = true;
objSheet.get_Range("F19").Borders.Color = Color.Black; 
```

我得到了你在这里看到的第二个。（四周有边界） [http://i.imgur.com/EUgmJNB.png](http://i.imgur.com/EUgmJNB.png)

我怎样才能得到这个工作？还是从 C# 到 Excel 无法在单元格的左侧和右侧设置边框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:42:27.967

尝试这个：

```
var range = objSheet.get_Range("F19");
System.Drawing.Color color = System.Drawing.Color.Black;
range.Borders[XlBordersIndex.xlEdgeRight].Color = color;
range.Borders[XlBordersIndex.xlEdgeLeft].Color = color; 
```

编辑：如果您担心清理您的 Excel 对象并且想要避免使用两个点（[请参阅此处的讨论](https://stackoverflow.com/questions/158706/how-to-properly-clean-up-excel-interop-objects)），您可以保留对您使用的边框的引用，如下所示：

```
var right = range.Borders[XlBordersIndex.xlEdgeRight];
var left = range.Borders[XlBordersIndex.xlEdgeLeft];
right.Color = color;
left.Color = color; 
```

我认为我的原始版本间接使用了两个点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T16:38:09.697

您可以为特定边框设置线条样式和颜色，如下所示：

```
Excel.Range range = objSheet.get_Range("F19");
Excel.Border border = range.Borders[Excel.XlBordersIndex.xlEdgeRight];
border.LineStyle = Excel.XlLineStyle.xlContinuous;
border.Color = Color.Black;

border = range.Borders[Excel.XlBordersIndex.xlEdgeLeft];
border.LineStyle = Excel.XlLineStyle.xlContinuous;
border.Color = Color.Black; 
```

然后清理你的引用：

```
border = null;
range = null; 
```

专门创建对`Excel.Border`对象的引用可确保您可以处理它并且不会让它闲置。请参阅[在使用 Excel 时消除“2 点”的使用...](https://stackoverflow.com/a/13069755/976080)

# php - 显示带有 blob 图像的 MySQL 表

> ID：15275256
> 
> 赞同：0
> 
> 时间：2013-03-07T15:35:56.123
> 
> 标签：php, mysql, image, blob

我只是从 PHP 开始，作为练习的一部分，我想设计一个小型网站，允许您上传图像，然后显示所有上传的图像

我成功上传了图像，并且图像存储在数据库中，但我找不到在表格中显示图像以及其他数据的方法

```
$i=0;
while ($row = mysql_fetch_array($result))
{
echo '<td>'.mysql_result($result,$i,0).'</td>';
echo '<td>'.mysql_result($result,$i,1).'</td>';
echo '<td>'.mysql_result($result,$i,2).'</td>';
echo '<td>'.mysql_result($result,$i,3).'</td>';
echo '<td>'.base64_encode($result,$i,4).'</td>';
echo '<tr>';
$i++; 
```

如何修改代码以显示图像？

这是用于上传图片的代码

```
 if (isset($_FILES['photo']))
    {
        @list(, , $imtype, ) = getimagesize($_FILES['photo']['tmp_name']);
        // Get image type.
        // We use @ to omit errors

        if ($imtype == 3) // cheking image type
            $ext="png";   // to use it later in HTTP headers
        elseif ($imtype == 2)
            $ext="jpeg";
        elseif ($imtype == 1)
            $ext="gif";
        else
            $msg = 'Error: unknown file format';

        if (!isset($msg)) // If there was no error
        {
            $data = file_get_contents($_FILES['photo']['tmp_name']);
            $data = mysql_real_escape_string($data);
            // Preparing data to be used in MySQL query

            mysql_query("INSERT INTO {$table}
                            SET ext='$ext', title='$title',
                                data='$data'"); 
```

这是我测试它的地方[在此处输入链接描述](http://k00138899.atspace.eu/photoalbum/photo.php)

我正在查看 Stack Overflow 示例，但我找不到任何包含循环且数据输出到表中的示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:55:28.320

当您开始使用 PHP 时，您应该从右脚开始 :)

*   不要使用 mysql_* 函数，这些已被弃用。相反，使用 mysqli_* 或 PDO

*   在数据库中存储图像是“一个坏主意”，您最好将文件存储在文件系统（又名 HD）中，并将名称引用到数据库中的字段。

*   而不是 mysql_fetch_array，请尝试使用 mysql_fetch_assoc，以便您可以按名称调用字段。即：$row['db_field_name'];

关于您的问题，您将需要一个额外的脚本来显示存储的图像。像这样的东西：

```
<?php
...
$row = mysql_fetch_assoc($result);
header("Content-type: image/jpeg"); //Set the correct image type.
echo $row['data'];
exit;
?> 
```

在您的显示 html 中：

```
...
<img src="yourscript.php?image=XX" ...>
... 
```

希望这有帮助:)

# c# - WPF ComboBox TextSearch 使用 Contains 而不是 StartsWith

> ID：15275261
> 
> 赞同：6
> 
> 时间：2013-03-07T15:36:10.483
> 
> 标签：c#, wpf, combobox

我有`ComboBox`很多“客户”使用 `MultiBinding`as `Text`（例如“644 Pizza Place”），这从一开始就很好地搜索（CustomerNumber）。但是如何通过输入“Pizza Place”使其匹配和选择？

```
<MultiBinding StringFormat="{}{0} {1}">
    <Binding Path="CustomerNumber" />
    <Binding Path="CustomerName" />
</MultiBinding> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T11:32:59.110

ComboBox 使用[TextSearch 类](http://msdn.microsoft.com/en-us/library/system.windows.controls.textsearch.aspx)进行项目查找。您可以在 ComboBox 上设置 TextSearch.TextPath 依赖属性：

```
 <ComboBox Name="cbCustomers" TextSearch.TextPath="CustomerName">...</ComboBox> 
```

这将允许您按 CustomerName 进行匹配，但您将失去按 CustomerNumber 的匹配。

查找（没有太多细节）通过以下方式完成：在您键入时调用 ComboBox.TextUpdated 方法。此方法调用 TextSearch.FindMatchingPrefix 来查找匹配项。TextSearch.FindMatchingPrefix 是使用 string.StartsWith(..) 调用的方法。

无法替换 string.StartsWith() 调用或 TextSearch.FindMatchingPrefix 调用其他内容。因此，如果您想将 string.StartsWith() 与您的自定义逻辑（如 string.Contains）交换，看起来您必须编写自定义 ComboBox 类

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-07T14:24:18.650

在这里，我在 MVVM 框架中有一个替代方案。

我的 xml 文件：

```
<ComboBox Name="cmbContains" IsEditable="True" IsTextSearchEnabled="false" ItemsSource="{Binding pData}"  DisplayMemberPath="wTitle" Text="{Binding SearchText ,Mode=TwoWay}"  >
  <ComboBox.Triggers>
      <EventTrigger RoutedEvent="TextBoxBase.TextChanged">
          <BeginStoryboard>
              <Storyboard>
                  <BooleanAnimationUsingKeyFrames Storyboard.TargetProperty="IsDropDownOpen">
                      <DiscreteBooleanKeyFrame Value="True" KeyTime="0:0:0"/>
                  </BooleanAnimationUsingKeyFrames>
              </Storyboard>
          </BeginStoryboard>
      </EventTrigger>
  </ComboBox.Triggers>
</ComboBox> 
```

我的cs文件：

```
//ItemsSource - pData
//There is a string attribute - wTitle included in the fooClass (DisplayMemberPath)
private ObservableCollection<fooClass> __pData;
public ObservableCollection<fooClass> pData {
    get { return __pData; }
    set { Set(() => pData, ref __pData, value);
        RaisePropertyChanged("pData");
    }
}

private string _SearchText;
public string SearchText {
    get { return this._SearchText; }
    set {
        this._SearchText = value;
        RaisePropertyChanged("SearchText");

        //Update your ItemsSource here with Linq
        pData = new ObservableCollection<fooClass>{pData.ToList().Where(.....)};
    }
} 
```

您可以看到可编辑的组合框正在绑定到字符串 (SearchText) 一旦出现 TextChanged 事件，就会显示下拉菜单，并且双向绑定会更新值。在进入 set{} 时，cs 文件中的 ItemsSource 发生了变化；句法。

[上面代码的要点](https://gist.github.com/tonywump/82e66abaf71f715c4bd45a82fce14d80)

# java - 如果 Java 代码样式不正确，则在 Git 中拒绝提交

> ID：15275263
> 
> 赞同：4
> 
> 时间：2013-03-07T15:36:17.570
> 
> 标签：java, git, coding-style

如果提交的 Java 代码不符合预定义的编码标准，任何人都可以推荐一种方法让我的 Git 存储库拒绝提交。我受够了混合使用制表符和空格以及包含诸如“将制表符转换为空格”之类的条目的提交日志。

我已将 Eclipse 配置为在保存时自动执行格式化，但我意识到我在两台机器上有不同的设置，所以我决定将它内置到我的版本控制中，以使我不必每次都检查我的 Eclipse 配置。关于格式是否应该在提交时自动应用而不是拒绝提交，我也持开放态度。

还对我是否应该在其中包含编码样式的意见感兴趣，例如拒绝不使用 for-each 语法的循环等。

# c# - 从另一个列表 ID 对列表进行排序

> ID：15275269
> 
> 赞同：194
> 
> 时间：2013-03-07T15:36:35.583
> 
> 标签：c#, linq, sorting, collections

我有一个带有一些标识符的列表，如下所示：

```
List<long> docIds = new List<long>() { 6, 1, 4, 7, 2 }; 
```

Morover，我有另一个`<T>`项目列表，由上述 id 表示。

```
List<T> docs = GetDocsFromDb(...) 
```

我需要在两个集合中保持相同的顺序，以便其中的项目`List<T>`必须与第一个中的项目位于相同的位置（由于搜索引擎评分的原因）。而这个过程不能在`GetDocsFromDb()`函数中完成。

如有必要，可以将第二个列表更改为其他结构（`Dictionary<long, T>`例如），但我不想更改它。

是否有任何简单有效的方法可以使用 LINQ 执行此“根据某些 ID 进行排序”？

* * *

## 回答 #1

> 赞同：411
> 
> 时间：2013-03-07T15:42:22.663

```
docs = docs.OrderBy(d => docsIds.IndexOf(d.Id)).ToList(); 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-03-07T15:53:30.433

由于您没有指定`T`，

```
IEnumerable<T> OrderBySequence<T, TId>(
       this IEnumerable<T> source,
       IEnumerable<TId> order,
       Func<T, TId> idSelector)
{
    var lookup = source.ToDictionary(idSelector, t => t);
    foreach (var id in order)
    {
        yield return lookup[id];
    }
} 
```

是您想要的通用扩展。

你也许可以使用这样的扩展，

```
var orderDocs = docs.OrderBySequence(docIds, doc => doc.Id); 
```

* * *

更安全的版本可能是

```
IEnumerable<T> OrderBySequence<T, TId>(
       this IEnumerable<T> source,
       IEnumerable<TId> order,
       Func<T, TId> idSelector)
{
    var lookup = source.ToLookup(idSelector, t => t);
    foreach (var id in order)
    {
        foreach (var t in lookup[id])
        {
           yield return t;
        }
    }
} 
```

`source`如果不与 .zip 完全压缩，这将起作用`order`。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2019-04-12T11:11:27.937

Jodrell 的答案是最好的，但实际上他重新实现了`System.Linq.Enumerable.Join`. Join 也使用 Lookup 并保持源的排序。

```
 docIds.Join(
      docs,
      i => i,
      d => d.Id,
      (i, d) => d); 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-03-07T15:44:00.897

一种简单的方法是使用排序顺序进行压缩：

```
List<T> docs = GetDocsFromDb(...).Zip(docIds, Tuple.Create)
               .OrderBy(x => x.Item2).Select(x => x.Item1).ToList(); 
```

# jquery - 如何根据某些选择启用文本框

> ID：15275277
> 
> 赞同：0
> 
> 时间：2013-03-07T15:36:56.077
> 
> 标签：jquery, html

仅当雇佣类型为合同或全职时才启用`txtEmployer`，应在全职时停用。

```
<div>
  <select id="SelectEmployment">
    <option value="Select Employment">Employment Type</option>
    <option value="Full-time">Full-time</option>
    <option value="Part-time">Part-time</option>
    <option value="Contract">Contract</option>
    <option value="Fixed term">Fixed term</option>
  </select>
</div>
<div>
  <input type="text" id="txtEmployer" value="Employer" class="txtinline water"/>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:46:10.673

就像是

```
function updateState(val){
    $('#txtEmployer').prop('disabled', !(val == 'Full-time' || val == 'Contract'));
}

$('#SelectEmployment').change(function(){
    var val = $(this).val();
    updateState(val);
});

updateState($('#SelectEmployment').val()); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/ZZGBj/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:45:11.847

试试下面的代码：

```
$("#SelectEmployment").change(function () {
    if ($(":selected", $(this)).text() == "Contract" || $(":selected", $(this)).text() == "Full-time") {
        $("#txtEmployer").removeAttr("disabled");
    } else {
        $("#txtEmployer").attr("disabled", "disabled");
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T15:53:05.883

关于全职的问题是模棱两可的。所以，我假设第一个是兼职。尝试这个 ：

```
$(document).ready(function(){
    $('#SelectEmployment').change(function(){
        if($(this).val() == 'Contract' || $(this).val() == 'Part-time') {
            $('#txtEmployer').removeAttr('disabled');
        }
        if($(this).val() == 'Full-time') {
            $('#txtEmployer').attr('disabled', true);
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T15:39:33.067

那这个呢？

```
$("#SelectEmployment").change(function () {
    if ($(this).val() == "Fixed term") {
        $('#txtEmployer').attr("disabled", "disabled");
    }
    else {
        $('#txtEmployer').removeAttr("disabled");
    }
}); 
```

# d3.js - D3 对数刻度显示错误的数字

> ID：15275281
> 
> 赞同：1
> 
> 时间：2013-03-07T15:37:00.607
> 
> 标签：d3.js, logarithm

我正试图围绕 D3.js 提供的对数刻度盘绕头。应该注意的是，截至昨天，我还不知道对数刻度是什么。

为了练习，我制作了一个柱形图，显示具有四个值的数据集：`[100, 200, 300, 500]`. 我使用对数刻度来确定它们的高度。

```
var y = d3.scale.log()
    .domain([1, 500])
    .range([height, 1]); 
```

此比例不起作用（至少在应用于 y 轴时也不起作用）。代表值 500 的条没有达到应有的 svg 容器顶部。如果我将域更改为`[100, 500]`该条确实到达顶部，但轴刻度与条的正确值不对应。因为 4e+2 是 4*10^2，对吧？

我没有得到什么？这是[一个小提琴](http://jsfiddle.net/VeNYj/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:16:15.323

您的比例已经反转范围以考虑从屏幕顶部开始的 SVG y 坐标 - 即，您有`domain([min, max])`和`range([max, min])`。这意味着您对 y 位置和高度的计算应该颠倒，因为您的比例已经直接计算了 y：

```
bars.append("rect")
    .attr("x", function (d, i) { return i * 20 + 20; })
    .attr("y", function (d) { return y(d); })
    .attr("width", 15)
    .attr("height", function (d) { return height - y(d); }); 
```

这是一个更新的小提琴：http: [//jsfiddle.net/findango/VeNYj/2/](http://jsfiddle.net/findango/VeNYj/2/)

# r - 时间序列数据格式

> ID：15275289
> 
> 赞同：-1
> 
> 时间：2013-03-07T15:31:51.497
> 
> 标签：r, time-series

我是使用 R 的初学者。一般来说，我确实有 csv 文件，我将使用“read.csv”读取这些文件。这些文件有 2 列：

第一个是日期：“2013-01-01 22:20:00”

第二个是值：0

到目前为止，我只是将 var$2nd 用于数据分析——但我需要日期。是否可以读取此日期？并询问两个日期之间的值？或者总是在两次之间排除值？什么是正确的数据格式，如何转换以及如果我只是 read.csv 是标准的

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:13:11.603

假设您的 csv 文件名为“foo.csv”并包含：

```
date, value
"2013-01-01 22:20:00", 3
"2013-01-02 12:20:00", 5 
```

您需要告诉 R 列是什么类型的东西。默认情况下，如果它看到一个字符串，它将把它变成一个因子，这不是你想要的，所以：

```
f <- read.csv ("foo.csv", colClasses=c("POSIXct", "integer")) 
```

应该做的伎俩。

通过执行以下操作了解 read.csv 的工作原理：

```
?read.csv 
```

并仔细阅读。如果你这样做：

```
str (f) 
```

正如您所要求的，您会看到您的日期是 POSIXct。做

```
?POSIXct 
```

学习如何进行比较。

# contiki - 为语义推理扩展 contiki

> ID：15275296
> 
> 赞同：-1
> 
> 时间：2013-03-07T15:37:27.920
> 
> 标签：contiki

我是 Contiki-OS 的新手。虽然我有 java 方面的经验，但在 C/C++ 方面的背景不是很强。我正在研究一个无线传感器网络域，我必须在其中开发一个可以在 Contiki-OS 中运行的应用程序，这个应用程序已经在 java 中开发，但由于 contiki 基于 C/C++，所以我必须将应用程序从 java 移植到C。

*我希望这个编辑能清楚地说明问题*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T18:21:34.297

最好的起点是：

[http://www.contiki-os.org/start.html](http://www.contiki-os.org/start.html)

[https://github.com/contiki-os/contiki/wiki](https://github.com/contiki-os/contiki/wiki)

# settings - KDE 系统设置中缺少后退按钮

> ID：15275298
> 
> 赞同：0
> 
> 时间：2013-03-07T15:37:31.457
> 
> 标签：settings, kde

在kde系统设置中有一个返回按钮，如果你点击一个类别进行编辑，你可以按返回返回到根类别。就在几分钟前，这个按钮消失了。我想把它拿回来。

没有按钮、工具栏或菜单。在根视图中有两个选项卡“常规”和“高级”，然后是带有单词的图标行（每个类别一个）。

那么我怎样才能让我的后退按钮回来呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:32:38.537

这有点笨拙，因为它可能有其他效果，并且需要使用命令行。

```
sed -i.backup -re "/State=.*/ d" ~/.kde/share/config/systemsettingsrc 
```

它删除`State=`从配置文件开始的行

# javascript - 从网站打开服务器位置

> ID：15275311
> 
> 赞同：1
> 
> 时间：2013-03-07T15:37:56.730
> 
> 标签：javascript, ajax, internet-explorer, salesforce, apex-code

目标：

我有一个业务请求，希望我们创建一个链接，以便用户可以从我们网站上的链接打开服务器目录（在文件管理器窗口中）。我们希望他们留在同一个 IE 页面上。FWIW-这是在我们的销售人员环境中

问题：

我有一个恼人的缺陷。也就是说，文件管理器窗口正在向服务器打开，但我也打开了一个空白的 IE 窗口，这是一个糟糕的用户体验。

有人可以帮助我解决这个工件吗？

# jquery - IE8 负边距

> ID：15275315
> 
> 赞同：2
> 
> 时间：2013-03-07T15:38:05.290
> 
> 标签：jquery, css, internet-explorer-8, margin

我有一个产品清单。将鼠标移到产品上，框会放大，您可以看到产品其他图像的缩略图。

我找到了仅使用 css 的解决方案：

HTML：

```
<div class="row">
    <div class="boxProdotto"> ... <span class="thumbs"><img><img></span></div>
    <div class="boxProdotto"> ... <span class="thumbs"><img><img></span></div>
    <div class="boxProdotto"> ... <span class="thumbs"><img><img></span></div>
    <div class="boxProdotto"> ... <span class="thumbs"><img><img></span></div>
</div>
<div class="row">
    ... other row with 4 boxes
</div> 
```

CSS：

```
.row {
    margin-bottom: 13px;
    clear: both;
    position: relative;
    float: left;
}
.boxProdotto{ 
    position: relative;
    width: 175.5px;
    margin-left: 13px;
    float: left;
    background: #FFF;
}
.boxProdotto .thumbs {
    display: none;
}
.boxProdotto:hover{
    border: 2px solid #9d3951;
    border-radius: 3px;
    padding: 11px;
    position: relative;
    left: 0;
    margin: -13px -13px -200px 0;
    z-index: 200;
}
.boxProdotto:hover .thumbs {
    display: block;
} 
```

因为 onmouseover 状态下盒子的高度会根据缩略图的数量而变化，所以我决定用 JQuery 计算下边距应该是多少：

查询：

```
// Set the attribute data-h with the normal height of the box
$(".boxProdotto").each(function(){
    $(this).attr('data-h', $(this).height());
});

// on mouse over set the margin bottom calculated
$(".boxProdotto").mouseover(function(){
    // margin-bottom = boxHeight - boxHeightOnMouseOver - border - paddingBottom
    $(this).css('margin-bottom', ( $(this).attr('data-h') - $(this).height() - 2 - 11));
}).mouseout(function(){
    $(this).css('margin-bottom', 0);
}); 
```

此解决方案适用于所有浏览器（Firefox、Chrome、Safari Mac 和 Win），但在 IE8 和 IE9 中存在谜团！虽然在 IE10 上运行良好...... IE7 我无法测试它，但我认为它不起作用......

使用 IE8 似乎应用的负边距无效。但奇怪的是，将鼠标放在第一个产品的图像上，框会变大，你会看到下一行移动到更低的位置。但是通过将鼠标移动到缩略图上（将鼠标停留在同一个框上）然后神奇地起作用并应用了margin-bottom！

看着我发现了很多与 IE 保证金负数和 Jquery onmouseover / onmouseout 相关的错误/问题，我的情况似乎是两者的混合。

同样使用 IE 也几乎不可能使用 Fantastic Developer Tools 来调试页面！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-26T20:54:54.690

您可以尝试做的是使用条件语句来检测 IE8，然后在 jQuery 中添加一个类到需要边距底部的元素。

```
 <!--[if gte IE 8]>
    <style>
    .marginBottomIE { bottom: -200px; }
    </style>
<![endif]--> 
```

如果您使用的是 Modernizr，您可以使用添加到正文的类 .ie8 来检测浏览器。

**jQuery**

```
 if($('.ie8').length > 0){
        $('.boxProdotto').addClass('marginBottomIE');
    } 
```

然后你可以在计算 margin-bottom 之后添加一个简单的 if 条件，例如：

```
if(marginBottom < 0){ $('.boxProdotto').addClass('marginBottomIE'); } 
```

**CSS**

```
 .marginBottomIE { bottom: -200px; } 
```

希望这可以帮助 ：）

# linq - 循环遍历 2 个列表以获取结果

> ID：15275319
> 
> 赞同：-1
> 
> 时间：2013-03-07T15:38:12.780
> 
> 标签：linq, list

我有两个清单：

```
myObject object1 = new myObject(id = 1, title = "object1"};
myObject object2 = new myObject(id = 2, title = "object2"};
myObject object3 = new myObject(id = 3, title = "object3"};

//List 1
List<myObject> myObjectList = new List<myObject>{object1, object2, object3};

//List 2
List<int> idList = new List<int>{2, 3,5}; 
```

现在我需要得到如下输出：

1.  如果两个列表中都存在 id，我需要打印“A”，
2.  如果一个 id 只存在于`list1`，那么我需要打印“B”，
3.  ...如果 id`list2`仅存在于，我需要打印“C”

我可以使用 linq 来实现这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:53:43.437

我会简单地使用和的内置`Except`功能`Intersect`

1.  List1.Intersect(List2) = "A"
2.  List1.Except(List2) = "B"
3.  List2.Except(List1) = "C"

网上有很多关于如何进行此操作的资源，例如（我没有过多研究），请查看此链接 - [Linq - 除了一个列表中包含另一个项目](https://stackoverflow.com/questions/5625689/linq-except-one-list-with-items-in-another)

希望这能解决问题...

# ios - Github开发，ios应用部署流程

> ID：15275320
> 
> 赞同：0
> 
> 时间：2013-03-07T15:38:17.127
> 
> 标签：ios, git, mobile, github

我们有一个 3 人的团队，我们的品牌/定制应用程序有大约 10 个客户

所有定制的应用程序在 git (master) 中都有一个中央代码库。

我们想使用 git 作为所有应用程序的中央存储库。

我们想要实现的是：我们将建立一个代码库作为master，它有它的虚拟图形和数据。每次我们有一个新的客户端，我们都会创建一个新的分支（client1）。更新图形并自定义应用程序，然后我们部署到生产中。

所以开发人员将在他们的本地机器上工作，创建一个子分支（client1-1，client1-2）等，然后提交回父分支（client1）。

之后，如果我们想从客户端 1-1 一直提交到 master 的更改，这可能吗？

另外，这是 iOS 应用程序的标准开发流程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:17:34.097

我觉得这不是一个好主意，因为当您部署到生产环境或与主服务器合并时，您实际上会花费大量时间处理合并冲突，然后将代码投入生产环境。如果我是你，我将拥有 10 个不同的 git 存储库，如果有新客户来，我将创建一个新客户。由于 git 是免费的，因此创建存储库并不困难。也为您节省大量时间和紧张。存储库准备就绪后，请清除所有产品以使其像新产品一样。然后推送准备好的存储库。希望这可以帮助...

# php - 定义一些存储在变量中的功能

> ID：15275321
> 
> 赞同：0
> 
> 时间：2013-03-07T15:38:18.633
> 
> 标签：php

我正在构建一个这样工作的权限系统：

```
DEFINE ('CAN_POST', 1);
DEFINE ('CAN_READ', 2);

DEFINE ('IS_GUEST', '');
DEFINE ('IS_USER', CAN_READ);
DEFINE ('IS_MODERATOR', CAN_READ | CAN_POST); 
```

然后我有一个具有以下权限的当前用户：

```
DEFINE ('CURRENT', IS_MODERATOR); 
```

我这样检查：

```
if (CURRENT & CAN_POST) print('CAN MAKE POSTS<br />');
if (CURRENT & CAN_READ) print('CAN READ STUFF<br />'); 
```

**问题**从这里开始：

我需要从数据库中获取当前用户权限，它当然是一个字符串。例如，我将在数据库中有类似的内容：`IS_MODERATOR | CAN_REVIEW`这意味着用户拥有`IS_MODERATOR`除此之外`(CAN_READ, CAN_POST)`的所有权限`CAN_REVIEW`。

我如何定义`CURRENT`常量，它不仅具有字符串的**功能，而且不起作用。** `IS_MODERATOR | CAN_REVIEW`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:49:28.610

当然，它不是一个字符串，而是一个数字。
只需将您的权利分配为两个通常的权力，并像每个人一样使用它。

说，如果`CAN_REVIEW = 4`，那么`IS_MODERATOR | CAN_REVIEW`将被存储为 7

您甚至可以在 SQL 查询中检查权限。

或者您可以解析检索到的值：

```
define('RIGHTS_CAN_REVIEW',4); //somewhere in config files
$rights = 7; //from database
define('CAN_REVIEW', (bool)$rights & RIGHTS_CAN_REVIEW); 
```

现在 'CAN_REVIEW' 包含布尔值`TRUE`
，如果`$rights`是 1 或 2 - 会有`FALSE`

# jquery - jQGrid 选择/突出显示新添加的行

> ID：15275323
> 
> 赞同：0
> 
> 时间：2013-03-07T15:38:25.433
> 
> 标签：jquery, jqgrid

使用 jQGrid，我希望在成功插入后突出显示（或选择）新添加的记录（行）。基本上，我只是希望用户在添加新记录后立即在网格中轻松查看新记录。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:05:03.800

您可以将行的 ID 值保存为 Add 函数的一部分，然后在提交并重新加载后，您可以遍历网格以搜索该保存的值，并在找到时将其设置为选定的行。

我看到的问题是基于添加后行在网格中的位置。例如，您有一个包含 5 页的网格，您添加的记录自然会过滤到第 3 页，而您在第一页。

你可以做一些花哨的服务器端逻辑来返回包含你的新记录的页面，以确保如果你想要上述函数也总是能够找到添加的记录。

# javascript - 将函数传递给 CSS 属性

> ID：15275326
> 
> 赞同：4
> 
> 时间：2013-03-07T15:38:40.317
> 
> 标签：javascript, jquery

是否可以将函数作为值传递给所有 css 属性？参考这里的代码：

```
 <script>
  $("div").click(function() {
    $(this).css({
      width: function(index, value) {
        return parseFloat(value) * 1.2;
      },
      height: function(index, value) {
        return parseFloat(value) * 1.2;
      }

    });
  });
</script> 
```

我真的不知道为什么上面的代码可以工作。任何人都可以解释将函数传递给属性的优点和缺点吗？这种传递函数的方法是否适用于所有其他 css 属性和非 css 属性？请帮助详细说明

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:58:45.133

根据jQuery的api文档，传递函数而不是直接将值作为css值是可能的。它是在添加的版本中添加的：1.4。从文件：

> .css(propertyName, function(index, value) )
> **propertyName**
> *类型：字符串*
> CSS 属性名称。
> 
> **function(index, value)**
> *类型：Function()*
> 返回要设置的值的函数。这是当前元素。接收集合中元素的索引位置和旧值作为参数。

基本思想是，当您将函数用作值时。它将以元素索引和当前值作为动态计算的参数调用函数或在某些条件下设置。然后在计算或条件之后，为其返回值以设置目标“propertyName”

例如：您可以认为您的网站中有一个较大的按钮，并且您希望用户在单击该按钮时将当前字体大小加倍。您可以使用 api 来实现这一点。另外，我认为您不能将多个函数作为值传递给 css 方法。

工作示例：http: [//jsfiddle.net/BUyp9/1/](http://jsfiddle.net/BUyp9/1/)

HTML

```
<input type="button" value="larger size" id="enlargeBtn" />
<div id="content">
 Hello world.    
</div> 
```

JavaScript

```
$("#enlargeBtn").on('click', function(){
    $("#content").css('font-size', function(index, value) {
        var size = parseInt(value, 10);
        return size*2;
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:43:30.383

它使您可以根据旧值（`value`参数包含的内容）或基于 jQuery 选择的每个特定元素的详细信息（以及`index`告诉您的内容）设置新值`this`。

因此，例如，如果您想让每个背景颜色`<div>`变暗而不管起始颜色如何，您可以编写代码来获取旧值并降低亮度（不是微不足道但也不是超级困难）。您发布的示例是另一个很好的示例：它使元素变大了 20%（它使宽度和高度变大了 20%；我想这意味着该区域变大了 44%）。

在方法的简单情况下，函数可以用作值`.css()`：

```
$('something').css("background-color", function(index, value) { ... }); 
```

或者，如在您的示例中，函数可以是传递给方法的对象中的属性值：

```
$('something').css({
  "background-color": function(index, value) { ... },
  "width": function(index, value) { ... },
  // ...
}); 
```

您可以混合搭配：

```
$('something').css({
  "height": "100px",
  "z-index": function(index, value) { ... }
}); 
```

# python - 我想将 ics 文件从谷歌日历转换为仅包含日期和描述的文本文件

> ID：15275330
> 
> 赞同：0
> 
> 时间：2013-03-07T15:38:49.637
> 
> 标签：python, text-files, google-calendar-api

我在谷歌有一个日历来保存我的日志。如果我导出它，它看起来像 addendum1。目的是将此文本编译为干净的输出。

我需要的是一个仅包含事件日期和描述的列表。因此我开始使用这段代码来测试它（我是 python 100% 的新手）。

```
*#!/usr/bin/env python
basic=open('/Users/geertesselens/Desktop/Temp/basic.txt','r')
gcal=basic.read()
basic.close()
amount_events = gcal.count('BEGIN:VEVENT')
print
print gcal[gcal.find('DTSTART')+19:gcal.find('DTSTART')+27],
print "   ",
print gcal[gcal.find('DESCRIPTION')+12:gcal.find('LAST-MODIFIED')]* 
```

它做了我想要的，但现在我需要去寻找另外两个事件。而且我不知道如何将 find 选项用于第二个，第三个... find 选项？

如果这可行，那么我可以在一个while循环中覆盖它，最多可以覆盖amount_events。我的最终目标是学习如何使用 python 作为快速文本编译环境来弥补所有类型的文本不匹配。

欢迎任何反馈。我确保将最终结果提供给您。

****** *** ** *** ** *** ******附录 1 - ICS 文件****** ** *** ** *** ** *** ** *** ******

 **```
BEGIN:VCALENDAR
PRODID:-//Google Inc//Google Calendar 70.9054//EN
VERSION:2.0
CALSCALE:GREGORIAN
METHOD:PUBLISH
X-WR-CALNAME:DayLog
X-WR-TIMEZONE:Europe/Brussels
X-WR-CALDESC:
**BEGIN:VEVENT**
**DTSTART**;VALUE=DATE:20130308
DTEND;VALUE=DATE:20130309
DTSTAMP:20130307T143316Z
UID:ab2hdo4i6f6t0gsre81qb4m0o4@google.com
CREATED:20130306T093219Z
**DESCRIPTION**:comment1.
LAST-MODIFIED:20130306T093219Z
LOCATION:
SEQUENCE:0
STATUS:CONFIRMED
SUMMARY:8_3_13
TRANSP:TRANSPARENT
END:VEVENT
**BEGIN:VEVENT**
**DTSTART**;VALUE=DATE:20130307
DTEND;VALUE=DATE:20130308
DTSTAMP:20130307T143316Z
UID:3j01a76v6lvg5870obsrl5t29g@google.com
CREATED:20130306T093100Z
**DESCRIPTION**:comment2
LAST-MODIFIED:20130306T093100Z
LOCATION:
SEQUENCE:0
STATUS:CONFIRMED
SUMMARY:7_3_13
TRANSP:TRANSPARENT
END:VEVENT
BEGIN:VEVENT
DTSTART;VALUE=DATE:20130306
DTEND;VALUE=DATE:20130307
DTSTAMP:20130307T143316Z
UID:bs8tb662lpvt7en3h78t67rluo@google.com
ATTENDEE;CUTYPE=INDIVIDUAL;ROLE=REQ-PARTICIPANT;PARTSTAT=ACCEPTED;CN=DayLog
 ;X-NUM-GUESTS=0:mailto:kpekivj6fliclchr39rccpmtkk@group.calendar.google.com
CREATED:20130306T092953Z
DESCRIPTION:comment3a
 comment3b
 comment3c
LAST-MODIFIED:20130306T093034Z
LOCATION:
SEQUENCE:0
STATUS:CONFIRMED
SUMMARY:6_3_13
TRANSP:TRANSPARENT
END:VEVENT
END:VCALENDAR 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-04-24T18:48:27.347

要将 .ics 文件转换为文本，您需要导入以下 jars

```
 backport-util-concurrent-3.1.jar
    commons-lang-2.6-130003.jar
    commons-logging-1.1.1-1.0.0.jar
    ical4j-1.0.5.jar 
```

将 ical4j.properties 文件放在源文件夹中

```
 keep below properties with same sequence in 
    ical4j.properties file 

    ical4j.unfolding.relaxed=true
    ical4j.parsing.relaxed=true
    ical4j.validation.relaxed=true
    ical4j.compatibility.outlook=true
    ical4j.compatibility.notes=true 
```

使用以下程序：

```
 import java.io.File;
    import java.io.FileInputStream;
    import java.text.SimpleDateFormat;
    import java.util.ArrayList;
    import java.util.HashMap;
    import java.util.Iterator;
    import java.util.List;
    import java.util.Map;
    import net.fortuna.ical4j.data.CalendarBuilder;
    import net.fortuna.ical4j.model.Component;
    import net.fortuna.ical4j.model.Property;
    import net.fortuna.ical4j.model.property.CalScale;
    import net.fortuna.ical4j.model.property.ProdId;
    import net.fortuna.ical4j.model.property.Version;

    public class ParseIcsFileToText {

     public static void main(String args[]) throws Exception {
      ParseIcsFileToText ics = new ParseIcsFileToText();
      File file = new File("C://Users//Desktop//Swati.ics");
      String result = ics.getCalInfoFromIcs(file);
      System.out.println(result);
     }

     public String getCalInfoFromIcs(File file) throws Exception {
         CalendarBuilder builder = new CalendarBuilder();
      net.fortuna.ical4j.model.Calendar calendar = new net.fortuna.ical4j.model.Calendar();

      calendar.getProperties().add(new ProdId("-//Ben Fortuna//iCal4j 1.0//EN"));
      calendar.getProperties().add(Version.VERSION_2_0);
      calendar.getProperties().add(CalScale.GREGORIAN);

      FileInputStream fin = new FileInputStream(file);

      calendar = builder.build(fin);
      List result = new ArrayList<String>();

      for (Iterator i = calendar.getComponents().iterator(); i.hasNext();) {
       Map<String, String> calenderinfo = new HashMap<String, String>();
       Component component = (Component) i.next();

       for (Iterator j = component.getProperties().iterator(); j.hasNext();) {
        try {
         String startdate = null, enddate = null, event = null;
         Property property = (Property) j.next();
         if ("DTSTART".equals(property.getName())) {
          startdate = property.getValue();
          calenderinfo.put("startDate",
            modifyDateLayoutOfIcs(startdate));
         }
         if ("DTEND".equals(property.getName())) {
          enddate = property.getValue();
          calenderinfo.put("endDate",
            modifyDateLayoutOfIcs(enddate));
         }
         if ("SUMMARY".equals(property.getName())) {
          event = property.getValue();
          calenderinfo.put("event", event);
         }

         if (!calenderinfo.isEmpty()) {
          if (calenderinfo.get("event") != null) {
           result.add(calenderinfo);
          }
         }

        } catch (Exception ex) {

        }
       }
      }
      return result.toString();
     }

     private String modifyDateLayoutOfIcs(String inputDate) {
      try {

       SimpleDateFormat inDateFormat = new SimpleDateFormat("yyyyMMdd");
       java.util.Date fromDate = inDateFormat.parse(inputDate);

       SimpleDateFormat outDateForm = new SimpleDateFormat("dd-MMM-yyyy");
       return outDateForm.format(fromDate);
      } catch (Exception e) {
       return inputDate;
      }

     }

    } 
```**

# git - 执行 git clone --mirror 时，实际文件在哪里？

> ID：15275338
> 
> 赞同：9
> 
> 时间：2013-03-07T15:39:13.883
> 
> 标签：git, git-clone, mirror

我在 github 上有一个项目，我想在我的服务器上进行镜像。

我尝试了以下方法：`git clone --mirror git@github.com:user/repo.git`.

然后在`repo.git`目录中，我有以下文件结构（例如，输出`ls`）：

`FETCH_HEAD branches/ description info/ packed-refs HEAD config hooks/ objects/ refs/`

所以我的问题是：**我的文件在哪里！？**看起来有一堆 git 相关的东西，但我就是找不到我写的代码。我错过了一些明显的东西吗？

顺便说一句，`git status`返回`fatal: This operation must be run in a work tree`但`git branch`返回分支。奇怪的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-07T15:53:07.653

当 you 时`git clone --mirror`，它会生成一个裸存储库，因此它不会有工作区。我`--mirror`更经常使用我的工作存储库的只读克隆，以供其他人从中提取。

听起来您可能应该忽略该`--mirror`选项。

从手册[页](https://www.kernel.org/pub/software/scm/git/docs/git-clone.html)[：`git clone`](https://www.kernel.org/pub/software/scm/git/docs/git-clone.html)

> `--mirror`
> 设置源存储库的镜像。这意味着`--bare`。与 相比`--bare`，`--mirror`不仅将源的本地分支映射到目标的本地分支，它还映射所有 refs（包括远程跟踪分支、注释等）并设置 refspec 配置，以便所有这些 refs 都被 git remote 覆盖在目标存储库中更新。

要完全清楚，裸镜像存储库确实包含从中克隆它的存储库的全部内容，但它没有可以查看这些文件的工作区。如果您从镜像克隆 ( `git clone /path/to/local/mirror_repo.git`) 中克隆，您将在那个新的非裸仓库中获得工作树。

# c# - 对 C# 事件、委托、回调等进行分类

> ID：15275341
> 
> 赞同：0
> 
> 时间：2013-03-07T15:39:19.000
> 
> 标签：c#, events, conventions

一个简单的问题，我想：你如何在 C# 中对与事件相关的项目进行分类/命名？

例如，我当前的约定如下所示：

```
public class A
{
    ...
    #region Delegates
    public delegate void CallIncomingEventHandler(string displayName);
    #endregion

    #region Event Handlers
    public event CallIncoming;
    #endregion
    ...
}

public class B
{
    ...
    #region Events
    private void A_CallIncoming(string displayName)
    {
        // do stuff here
    }
    #endregion
} 
```

我的困惑是用“delegate”修饰符定义“SomethingEventHandler”类型并将它们称为“Delegates”，然后用“event”修饰符定义类似字段的事件并将它们称为“事件处理程序”，然后调用反应的方法到事件“事件”。

我的命名正确吗？

我可以创建和使用自定义事件等，但我可以使用一些帮助来理解组件的名称以及其他人如何组织它们。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:09:57.207

您描述了在 .NET 中使用的约定，不是吗？

我个人认为你的方法没有问题。这是众所周知的，每个使用 .NET 的开发人员很可能会期望如果不是相同的约定，那么会接近它。那么，既然存在采用的惯例，为什么还要发明一些新东西呢？

相反，我建议考虑如何在您的类中调用事件，以及将来如何为委托扩展参数？一个好的起点是再次遵循 .NET 约定，使用 .NET 等代表`delegate void SomethingEventHandler(object sender, EventArgs e)`。在[这个问题](https://stackoverflow.com/a/2669704/1314859)上给出了一个很好的想法。

希望这能减少你的疑虑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-22T10:32:55.853

以防万一其他人/C#新手需要更具体的解释/示例：

```
public class ExampleClass
{
    // DelegateNames = NameOfObject + Verb + ("ed" or "ing") + "Handler".
    // NameOfObject  = Data, File, Property, Value, Window, Settings, User,...
    // Verb          = Open, Close, Format, Clear, Delete, Create, Insert, Update, Refresh, Dispose, Sort,...
    public delegate void SomethingHappenedHandler(object pSender, object pWhat);
    public delegate void SomeValueChangedHandler(object pSender, object pWhat, object pOldValue, object pNewValue);
    public delegate void SomethingFinishedHandler(object pSender);
    public delegate void SomethingInvokedHandler();

    // EventNames = DelegateName - "Handler".
    public event SomethingHappenedHandler SomethingHappened;
    public event SomeValueChangedHandler SomeValueChanged;
    public event SomethingFinishedHandler SomethingFinished;
    public event SomethingInvokedHandler SomethingInvoked;

    // EventHandlingMethodNames = "On" + EventName.
    private void OnSomethingHappened(object pSender, object pWhat) { /* Code...*/ }
    private void OnSomeValueChanged(object pSender, object pWhat, object pOldValue, object pNewValue) { /* Code...*/ }
    private void OnSomethingFinished(object pSender) { /* Code...*/ }
    private void OnSomethingInvoked() { /* Code...*/ }

    // EventInvokingMethods = ("Fire" | "Notify" | "Invoke") + EventName.
    private void FireSomethingHappened(object pSender, object pWhat) { /* SomethingHappened?.Invoke(...); */ }
    private void NotifySomeValueChanged(object pSender, object pWhat, object pOldValue, object pNewValue) { /* SomeValueChanged?.Invoke(...); */ }
    private void InvokeSomethingFinished(object pSender) { /* SomethingFinished?.Invoke(...); */ }
    private void NotifySomethingInvoked() { /* SomethingInvoked?.Invoke(...); */ }
} 
```

对于 C# 中的其他程序元素，我使用（您可以）使用以下可选规则：

0.  始终使用您的语言的相同字符大小写（UpperCamelCase 或 lowerCamelCase）！
1.  始终遵循编程语言的命名约定/规则！（请参阅/分析/复制框架中的命名！）
2.  我使用前缀命名，当且仅当名称不违反规则 0 和 1，

*   like: "p" + ParameterName（为了更好地识别局部变量和参数
*   或：“m”+ MemberVariableName（为了更好地识别局部变量和成员变量。
*   或：“I”+ InterfaceName（如：IDeserialize、IXmlConvert、...）
*   或：“A”+AbstracClassName（如：ADeserializer、AXmlConvert、...）
*   或：“E”+ EnumerationName（如：EState、EErrorCode、EMemberType、...）
*   或：“S”+ 静态变量名称
*   和： ALL_UPPER_CASE 用于：
    *   编译时常量“public const double MY_CONST = -1.23;”
    *   运行时常量：“public static readonly MyClass MY_CLASS = new MyClass()...”)

# html - Light up image on hover

> ID：15275344
> 
> 赞同：14
> 
> 时间：2013-03-07T15:39:31.607
> 
> 标签：html, css, opacity

Take a look at [http://www.kickstarter.com](http://www.kickstarter.com).

When you hover over their logo, the image lights up. Is this effect doable without using a different image on hover?

My first idea was to use `::after:hover` and add a white square with high transparency that covers the logo, **but since my logo is placed on a blue background this would not work.** Another idea is to set opacity to 0.9 and on hover set it to 1\. But this makes the image look too dark by default.

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-11-11T21:50:22.290

You may be able to use the css image filters, like this:

```
img:hover {-webkit-filter: brightness(150%); } 
```

This sometimes looks funny and will only work in webkit browsers, but it's the best solution I could think of. It'll allow you to keep your blue background as well.

Here's a jsfiddle showing the Kickstarter logo on a blue background.

[http://jsfiddle.net/62bCB/](http://jsfiddle.net/62bCB/)

Cheers,

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-03-07T15:41:25.507

As far as I am aware you can't do what you require with pure CSS at this point, due to the blue background. I think your best bet is edit the image in photoshop to be its `:hover` brightness, and then use something like:

```
img { 
  opacity: 0.7; 
} 

img:hover { 
  opacity: 1; 
} 
```

~~Changing the opacity on hover will work:~~

 ~~```
img:hover {
   opacity: 0.5;
} 
```~~ 

~~[Fiddle](http://jsfiddle.net/SnP6M/)~~

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T15:43:03.203

The original CSS has:

```
img:hover {
    filter: alpha(opacity=80);
    opacity: .8;
} 
```

### Fiddle: [http://jsfiddle.net/praveenscience/hfUpk/](http://jsfiddle.net/praveenscience/hfUpk/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T15:42:48.060

You have a few choices depending on what browsers you need to support. You could make the logo a background image and then change the image on hover. (or sprite the image so that you don't get a flicker)

Or you could try a combination of CSS opacity and microsoft filters for older versions of IE. [http://www.w3schools.com/cssref/css3_pr_opacity.asp](http://www.w3schools.com/cssref/css3_pr_opacity.asp)

Since you mention you have a dark background you can try some of the new CSS filters (saturation, brightness etc) but you're out of luck for IE. [http://www.html5rocks.com/en/tutorials/filters/understanding-css/](http://www.html5rocks.com/en/tutorials/filters/understanding-css/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-16T12:16:24.633

You could use this CSS code which makes lighting up a smoother transition than just instantly bright. Techpp.com and Techlivewire.com also use this same css or one similar to it on their frontpage featured sections. I could not get CSS to post on here since stackoverflow kept giving me errors so I put it in a pastie. [http://paste2.org/1L9H2XsF](http://paste2.org/1L9H2XsF)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-28T07:05:46.110

you can use opacity value between 0.1 to 1 very light and 1 value is dark (default)

```
img {
    filter: alpha(opacity=100);
    opacity: 1;
}
img:hover {
    filter: alpha(opacity=70);
    opacity: 0.7;
} 
```

# php - If function called internally

> ID：15275348
> 
> 赞同：1
> 
> 时间：2013-03-07T15:39:43.177
> 
> 标签：php, class, function, internal

Is there any way of identifying if a function was called from within the same class in PHP? Besides using something like [debug_backtrace](http://php.net/manual/en/function.debug-backtrace.php) ?

Update:

This is what I'm currently doing:

```
class Alex {
  function __construct()
  {
     $this->internal = false;
  }

  function a()
  {
    $this->internal = true;
    $this->b();
  }

  function b()
  {
    if($this->internal) 
      // ...
    else
      // ...
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:46:22.433

I 'm not sure why you would want to do that; this kind of requirement is suspicious, and usually for good reason.

That said, you can make a `protected` clone of the `public` function with an additional parameter that tells you if the caller was internal or external, and make the `public` version defer to the `protected` implementation.

```
class Before
{
    public foo() { /* code here */ }
}

class After
{
    public foo() { $this->fooCore(false); }
    protected fooCore($calledFromInside = true) { /* code here */ }

    // At this point you should make sure that you never call $this->foo()
    // directly from inside class After
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:47:10.360

Not that I'm aware of. I solved a similar problem by having an extra optional parameter that passed a value when called from inside the class.

HTH :)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-07T15:45:31.010

It is possible to debug PHP for instance in NetBeans like you can see to [debugging in NetBeans](http://netbeans.org/kb/docs/php/debugging.html). Also, you can find useful tools on[sseful PHP tools](http://coding.smashingmagazine.com/2009/01/20/50-extremely-useful-php-tools/), like Webgrind or Xdebug.

# c# - 即使一组为空，获取笛卡尔积的 LINQ 查询是什么？

> ID：15275349
> 
> 赞同：4
> 
> 时间：2013-03-07T15:39:45.353
> 
> 标签：c#, .net, linq, left-join, cartesian-product

想象一下，我有 2 个列表，其中一个是空的：

```
List<string> foo = new List<string>(){ "Ali","wall-e","Ellie" };
List<string> bar = new List<string>(); 
```

我得到了 2 的笛卡尔积：

```
var q = from f in foo
    from b in bar
    select new {f,b}; 
```

由于 bar 为空，LINQ 返回一个空结果集。

**问题**：我怎样才能编写上述查询，以便我可以收到这个结果集：

```
Ali,NULL

Wall-e,NULL

Ellie,NULL 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-07T15:46:06.253

也许这就是你想要的：

```
var q = from f in foo.DefaultIfEmpty()
    from b in bar.DefaultIfEmpty()
    select new {f,b}; 
```

# dom - DOM - 页面链接在一台机器上不可用，在另一台机器上

> ID：15275355
> 
> 赞同：0
> 
> 时间：2013-03-07T15:40:02.687
> 
> 标签：dom, powershell, automation, powershell-2.0

我正在使用 Powershell 从使用 DOM/IE 的网站获取数据。它在我的桌面上运行良好。在我的笔记本电脑上，它失败了。这些是公司配置的机器，具有相同版本的 IE、相同的设置、相同的代理等。我查看了 IE 中的安全设置，它们看起来都一样。

这是即使页面上有链接也没有返回链接的代码：

```
$Links = $doc.Links 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:14:43.263

如果您已确认两台机器上的设置相同，您可以使用网络浏览器（即 IE）进行导航吗？如果是这样，那可能是时间问题？试试下面的代码，它应该等待页面完成加载，然后再获取 DOM 的句柄。

```
$ie = New-Object -com InternetExplorer.Application
$ie.silent = $false
$ie.navigate2("http://google.co.uk")

while($ie.busy) { start-sleep 1 }

$doc = $ie.Document

$doc.links | Select innerText, href

$ie.Quit() 
```

# android - 如何以编程方式关闭android设备？

> ID：15275356
> 
> 赞同：0
> 
> 时间：2013-03-07T15:40:05.530
> 
> 标签：android, shutdown, root-access

我的设备是有根的。

我知道要重启设备，我们使用 shell 命令“su -c reboot”。在其他一些帖子中，我看到人们将关机命令发布为“su -c shutdown”，但这不起作用，并且还有一个名为 ACTION_SHUTDOWN 的权限，但这些权限用于系统应用程序。

有没有关闭设备的命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:47:03.863

```
/**
 * Low-level function turn the device off immediately, without trying
 * to be clean.  Most people should use
 * {@link android.internal.app.ShutdownThread} for a clean shutdown.
 *
 * @deprecated
 * @hide
 */
@Deprecated
public static native void shutdown(); 
```

尝试使用：

```
su reboot -p. 
```

这适用于某些设备，但它不会完全关闭。

# gwt - Google Analytics - 使用历史令牌跟踪页面

> ID：15275357
> 
> 赞同：2
> 
> 时间：2013-03-07T15:40:11.433
> 
> 标签：gwt, google-analytics, gwt-history

我想知道 Google Analytics 是否会自动跟踪使用 ajax 历史令牌（'#'）保留状态的页面，例如使用 GWT 开发的。我的应用程序有一个 html 页面，不同的模块（页面）具有相同的 URL，除了 # 之后的部分（例如 www.mysite.com?test=true#page=Contacts/id=1）。

此外，如果默认情况下没有提到这种行为，有没有办法设置 Google Analyics 以具有此功能？

编辑：

我发现这篇文章解释了如何跟踪#hashtag： [http ://www.searchenginepeople.com/blog/how-to-track-clicks-on-anchors-in-google-analytics.html](http://www.searchenginepeople.com/blog/how-to-track-clicks-on-anchors-in-google-analytics.html)

但是，如果我使用此解决方案，是否会在用户按下带有 href'#hastag' 的锚点时或仅在使用该主题标签直接访问 aa 页面时记录页面访问（在这种情况下，我应该注册一个调用 trackPageview 的函数当历史改变时）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:04:21.487

谷歌跟踪#就好了。你只需要把它实际接收到 # 原样（在我们的例子中 # 被 url 编码为 %23，我们必须使用搜索和替换过滤器来恢复它）。

最优雅的方法可能是在 GA 管理员中查看高级过滤器的说明 - 有一个很好的示例如何将晦涩的 URls 重写为报告中人类可读的内容，这可以轻松适应您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T10:36:11.640

我在初始分析脚本中添加了以下几行：

```
_gaq.push(['_trackPageview', location.pathname + location.search + location.hash]); 
```

和

```
window.onhashchange =  function(){            
                _gaq.push(['_trackPageview',location.pathname + location.search  + location.hash]);             
            } 
```

跟踪历史变化。

# python - Python 2.7 数据验证

> ID：15275360
> 
> 赞同：0
> 
> 时间：2013-03-07T15:40:20.427
> 
> 标签：python, validation

我需要帮助解决 Python 2.7 中的这个数据验证问题，它做了我想做的事情，它不接受字符串，但它也不接受整数，因为它应该做。

```
def GetKeyForCaesarCipher():
  while True:
    key =(raw_input('Enter the amount that shifts the plaintext alphabet to the ciphertext alphabet: '))
    try:
      i=int(key)
      break
    except ValueError:
      print ('Error, please enter an integer')

  return key 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T15:42:13.137

它接受整数就好了，但您返回的是原始字符串值。您应该返回`i`或分配给`key`：

```
key = int(key) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:47:42.480

Martijn 的回答当然是正确的，但是如果您改进了您的*风格*，您可能会发现调试更容易。试试这样：

```
def promptForInteger(prompt):
  while True:
    try:
      return int(raw_input(prompt))
    except ValueError:
      print ('Error, please enter an integer')

def getKeyForCaesarCipher():
   return promptForInteger('Enter the amount that shifts the plaintext alphabet to the ciphertext alphabet: ') 
```

# javascript - 如何在 d3.js 中转换路径

> ID：15275362
> 
> 赞同：0
> 
> 时间：2013-03-07T15:40:22.263
> 
> 标签：javascript, d3.js

我怎样才能过渡（例如，动画创作）一条路径以提供一些视觉效果。它可能是从左到右创建线/路径。我试过类似的东西。

我分叉了迈克的[例子](http://bl.ocks.org/mbostock/3883245)，并添加了[喜欢](http://bl.ocks.org/bsr203/5108692)

```
svg.append("path")
      .datum([])
      .attr("class", "line")
      .attr("d", line);

  var t = svg.transition().duration(700);
  t.select('.line').attr('d', line(data)); 
```

它现在给出了路径错误，但我在更新 gist 和 bl.ocks 时遇到了一些困难。但我记得它正在工作（但没有动画）。

如何获得动画图表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T17:57:19.887

我认为没有人能比 Mike Bostock 自己更好地描述它：[Path Transitions](http://bost.ocks.org/mike/path/)。

您可以使用本教程中示例的变体来制作不同类型的动画。虽然他的示例非常适用于根据添加的新数据转换路径以进行更改，但您可以轻松地使用类似的技术来制作动画以响应现有数据的更改 - 或者只是完全添加一个新系列。

如果您能明确说明您要制作什么样的动画，我也许可以提供更多细节来实现这一目标。

# function - matlab中有两个变量的嵌套函数

> ID：15275363
> 
> 赞同：1
> 
> 时间：2013-03-07T15:40:22.857
> 
> 标签：function, matlab

我有三个函数，我想要两个变量来运行所有函数。我试过这样做：

```
R = rot(mir(sca(P(1,:),P(2,:)))); 
```

但是我收到此错误：

```
Error using mir (line 2)
Not enough input arguments. 
```

有什么建议么？

```
%rot.m
function rot = rot(x,y)
    rot = [ cos(pi/6)*x-sin(pi/6)*y; sin(pi/6)*x+cos(pi/6)*y ];

%mir.m
function mir = mir(x,y)
    mir = [x;(-y)];

%sca.m
function sca = sca(x,y)
    sca = [2*x;2*y]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:02:09.150

你不应该对这个错误感到惊讶。函数`mir`期望两个参数（实际上，您的所有函数都期望那个），但您只提供一个。请注意，矩阵被认为是一个参数。您可以执行以下任一操作来纠正问题：

1.  重新定义`mir`以接受一个参数并将其在函数内部拆分为两个单独的变量

2.  重新定义`sca`返回两个值：

    ```
    function [outx, outy] = sca(x, y)
        outx = 2 * x;
        outy = 2 * y; 
    ```

    然后将它们传递给`mir`这样的：

    ```
    [scax, scay] = sca(x, y);
    mir(scax, scay); 
    ```

显然，同样需要做同样的事情才能发挥作用`rot`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:01:25.463

在 MATLAB 中，如果您有多个输出参数，则必须显式指定输出变量。默认情况下，函数总是返回一个（第一个）参数。

在您的情况下，一种选择可以是更改函数的定义，使其仅接收一个输入参数作为矩阵。例如：

```
%mir.m
function mir = mir(xy)
    mir = [xy(1,:); -xy(2,:)]; 
```

在这种情况下甚至更容易（您也可以简化其他功能）：

```
function xy = mir(xy)
    xy(2,:) = -xy(2,:); 
```

我希望你明白了。

然后你可以运行：

```
R = rot(mir(sca(P(1:2,:)))); 
```

* * *

如果由于某种原因无法更改函数定义，则必须将对三个函数的单行调用拆分为 3 行：

```
S = sca(P(1,:),P(2,:));
M = mir(S(1,:),S(2,:));
R = rot(M(1,:),M(2,:)); 
```

# linux - 如何在 Linux 中的某个其他进程终止时收到通知

> ID：15275366
> 
> 赞同：3
> 
> 时间：2013-03-07T15:40:37.933
> 
> 标签：linux, posix, opensuse

我正在运行一个进程，我想从中获得另一个进程终止的通知。在 Windows 中，我们可以使用 WaitForSingleObject，通过传递我们感兴趣的终止进程的句柄。我是 Linux 世界的新手，请提出一些方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:46:52.620

可能值得检查[supervisord](http://supervisord.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T16:20:02.883

在 Linux（实际上是大多数 *NIXen）上，您只能等待当前进程的子进程，除非您具有 root 权限（或允许一般跟踪的有效功能 - 这可以通过功能系统进行安排，而无需授予完全 root 权限访问，但需要有意识地配置它...），您可以使用`ptrace()`它附加到任意进程以监视它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-06T07:40:47.693

您可以使用多个 Linux API 来执行此操作。这里是其中的一些：

*   Netlink 进程连接器 - 这是一个 API 可以精确地执行您想要的操作，但在跟踪详细信息的短暂进程时存在问题
*   审计 API - 在大多数发行版上默认启用的内核 API，它可以为每个系统调用向用户模式发送事件（如果你走这条路，你需要跟踪类似 exec 和 fork 的系统调用）
*   tracepoints 和 kprobes - 两个内核调试 API，可用于获取有关进程生命周期事件的信息
*   基于 ebpf 的解决方案 - 可以与 tracepoints/kprobes 结合使用以过滤内核中的事件或运行各种逻辑
*   基于 ptrace 的解决方案 - 这些包括简单的 ptrace 调试以及 seccomp API

在单个 StackOverflow 答案中正确比较这些选项确实有太多细节，但我已经[在我的博客上详细写过](https://natanyellin.com/posts/tracking-running-processes-on-linux/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T16:15:57.707

如果您可以在子进程中获取子进程的进程ID，则可以将其保存到子进程中的文件中，然后在父进程中从那里读取。然后在父进程中，您可以`ps ax | cut -b 1-5 | grep fooprocessid`以恒定的时间间隔轮询子进程的存在。当然存在更优雅的方法，但这适用于任何编程语言，其中在子进程中您可以获取进程 ID，在父进程中您可以执行命令。

如果您知道一些可以用`ps`(or `top`) 找出的细节并将子进程与所有其他进程区分开来，那么您甚至不需要子进程的进程 ID`ps ax | grep foo`就足够了。或者`ps`使用其他一些参数，这取决于您对子进程了解的详细信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-18T22:00:47.907

在现代 Linux（从内核版本 5.3 开始）中，有`pidfd_open`内核 API 允许将进程 ID 包装到与 、 和其他进程兼容的句柄`poll`中`epoll`。

[手册页。](https://man7.org/linux/man-pages/man2/pidfd_open.2.html)

# asp.net-mvc - 如何将 HttpRequest 转换为 HttpRequestBase 对象？

> ID：15275370
> 
> 赞同：78
> 
> 时间：2013-03-07T15:40:49.353
> 
> 标签：asp.net-mvc, httprequest

我的问题与此相反： [如何将 HttpRequestBase 转换为 HttpRequest 对象？](https://stackoverflow.com/questions/1452522/how-do-i-convert-an-httprequestbase-into-an-httprequest-object)

在我的 ASP.NET MVC 应用程序中，我有一个由许多控制器使用的方法，这些控制器接收 HttpRequestBase 作为参数。

现在我必须从另一个方法调用该方法，这不是一个动作（它是一个休眠拦截器）。在第二种方法中，我可以访问 HttpContext.Current.Request，这是一个 HttpRequest，但我无法将其转换为 HttpRequestBase（我认为这是可能的，因为命名...）。

有人知道这些课程有什么关系，我该如何解决我的问题？谢谢你。

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2013-03-07T15:45:35.033

您需要将您的包装`HttpRequest`在一个`HttpRequestWrapper`：

```
var wrapper = new HttpRequestWrapper(httpRequest); 
```

`HttpRequestWrapper`继承自`HttpRequestBase`.

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2016-11-10T13:24:38.750

这是另一个不需要创建新实例的解决方案：

```
var httpRequestBase = myHttpRequest.RequestContext.HttpContext.Request; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-02-06T05:00:02.240

在我的应用程序中，我收到了来自需要访问 HttpRequestBase 的几个不同地方的调用。我创建了这组扩展方法来获取几种不同的 Http 类型并将其转换为 HttpRequestBase，然后在需要访问请求时通过应用程序使用 HttpRequestBase 作为接口和类方法的基本类型。

```
public static class RequestExtensions
{
    public static HttpRequestBase GetHttpRequestBase(this HttpContext httpContext)
    {
        if (httpContext == null)
        {
            throw new ArgumentException("Context is null.");
        }

        return httpContext.Request.ToHttpRequestBase();
    }

    public static HttpRequestBase GetHttpRequestBase(this HttpRequestMessage httpRequestMessage)
    {
        if (httpRequestMessage == null)
        {
            throw new ArgumentException("Request message is null.");
        }

        HttpContextWrapper context = null;
        if (httpRequestMessage.Properties.ContainsKey("MS_HttpContext"))
        {
            context = httpRequestMessage.Properties["MS_HttpContext"] as HttpContextWrapper;
        }
        if (context == null)
        {
            throw new ArgumentException("Context is null.");
        }

        return context.Request;
    }

    public static HttpRequestBase GetHttpRequestBase(this HttpApplication httpApplication)
    {
        if (httpApplication == null)
        {
            throw new ArgumentException("Application is null.");
        }

        return httpApplication.Request.ToHttpRequestBase();
    }

    public static HttpRequestBase ToHttpRequestBase(this HttpRequest httpRequest)
    {
        if (httpRequest == null)
        {
            throw new ArgumentException("Request is null.");
        }

        return new HttpRequestWrapper(httpRequest);
    }
} 
```

我遇到了几个帮助我构建这些扩展的答案：

*   [如何将 HttpRequestBase 转换为 HttpRequest 对象？](https://stackoverflow.com/a/15112174/579148)
*   [将 HttpRequestMessage 转换为 HttpRequest](https://stackoverflow.com/a/17426823/579148)
*   [获取远程主机的IP地址](https://stackoverflow.com/a/9571292/579148)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-01T11:44:52.343

我发现以下扩展方法很有用：

```
 public static HttpContextBase AsBase(this HttpContext context)
    {
        return new HttpContextWrapper(context);
    }

    public static HttpRequestBase AsBase(this HttpRequest context)
    {
        return new HttpRequestWrapper(context);
    } 
```

用法：

```
HttpContext.Current.AsBase()
HttpContext.Current.Request.AsBase() 
```

# java - 触发java程序

> ID：15275372
> 
> 赞同：0
> 
> 时间：2013-03-07T15:40:52.233
> 
> 标签：java, triggers, axis2, mule, ofbiz

我有一个基于 Axis2 的远程 Java Web 服务客户端，它在另一台机器上调用 OFBiz 中的 Web 服务。但是，我的主管坚持我使用 Mule esb 来调用 OFBiz Web 服务，因为它是我们正在使用的集成平台或我们手头的项目。OFBiz 使用请求映射，这使得在 Mule 中使用 CFX 或 JAX-WS 调用其 Web 服务变得非常困难。我可以使用 Axis2 调用 Web 服务，但是 Mule 不支持 Axis2，因此不能使用基于 Axis2 的 java 客户端作为 Mule 组件。所以我的计划是在 mule 中有一个 java 组件，当组件开始在流中运行时，可以自动触发基于 Axis2 的客户端运行。我尝试使用 Mule 项目的 Axis 类部分制作项目并导入所有 Axis2 jar 文件。然后通过在 Mule Java 组件中实例化它来调用 Axis2 Java 客户端。但是当我运行 mule 流时，它抱怨它找不到 Axis2 的记录器。我知道 Mule 不支持 Axis2。

所以我的问题是，如何在不创建该类的实例进行调用的情况下，通过不同项目中的另一个 java 类触发基于 Axis2 的 Java 客户端？我想要的是 - 如果我的 Mule 组件运行，它也应该触发基于 Axis2 的 Java 客户端执行。谢谢

# javascript - 从数组中删除特定值

> ID：15275375
> 
> 赞同：0
> 
> 时间：2013-03-07T15:41:06.847
> 
> 标签：javascript

```
if (sorted[i].Document === 'abc' || sorted[i].Document === 'xyz') {
    delete sorted[i].Document;
} 
```

当我尝试删除特定的两个文档时，它会被删除，但下一次它会抛出一个错误，提示 Document 未定义。

```
var sorted = DocumentListData.Documents.sort(function (a, b) {
    var nameA = a.Document.toLowerCase(),
        nameB = b.Document.toLowerCase();

    return nameA.localeCompare(nameB);
}); 
```

我正在对文档进行排序，然后对其进行迭代，然后尝试删除`abc and xyz`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:44:32.650

您正在尝试调用`toLowerCase`不存在的属性，因为您刚刚删除了它们。在尝试对其执行方法之前检查它们是否存在。

```
// i used empty string as the default, you can use whatever you want
var nameA = a.Document ? a.Document.toLowerCase() : '';
var nameB = b.Document ? b.Document.toLowerCase() : ''; 
```

如果您尝试删除数组元素而不仅仅是它们的`Document`属性，您应该使用`splice`而不是`delete`：

```
if (sorted[i].Document === 'abc' || sorted[i].Document === 'xyz') {
    sorted.splice(i, 1);
} 
```

# .net - Oracle Managed ODP.NET 找不到 tnsnames.ora

> ID：15275376
> 
> 赞同：8
> 
> 时间：2013-03-07T15:41:10.080
> 
> 标签：.net, oracle, odp.net, managed

我的托管 ODP.net webapp 在本地工作，但是在将其部署到服务器时，它失败并出现错误：

“TNS：监听器当前不知道连接描述符中请求的服务”

环顾四周，似乎这是因为它无法访问 tnsnames.ora 文件。

我尝试了以下但没有成功：

*   将 tnsnames.ora 文件（与本地工作相同的文件）放入 [oracle home][product]...\network\admin 文件夹。
*   在托管 ODP 的 web.config 部分中设置指向环境变量的 TNS_ADMIN 设置。
*   在托管 ODP 的 web.config 部分中设置 TNS_ADMIN 设置，直接指向 tnsnames.ora 文件。

在服务器上，尝试运行 tnsping 会产生错误 TNS-03502：找不到消息 3502；没有产品=NETWORK、设施=TNS 的消息文件

我错过了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-08T19:46:10.763

尝试使用不依赖于 tnsnames.ora的[连接字符串，例如：](http://www.connectionstrings.com/oracle#oracle-data-provider-for-net-odp-net)

```
Data Source=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=MyHost)(PORT=MyPort)))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=MyOracleSID)));User Id=myUsername;Password=myPassword; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-07-09T15:34:35.360

只需将 tns_admin 路径添加到 web.config 或 app.config 并将其指向您拥有 tnsnames.ora 文件的文件夹即可。

```
<oracle.manageddataaccess.client>
    <version number="*">
      <settings>
        <setting name="tns_admin" value="E:\oracle11\product\11.2.0\client_1\network\admin" />
      </settings>
    </version>
</oracle.manageddataaccess.client> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-13T22:45:21.100

我追求的是同样的事情，我最终在 TNSNAMES 文件上做了一些正则表达式。一旦你在文件上完成了正则表达式，你应该能够将它带入 Powershell 或 C# 中的对象中

```
param($tnsnamesPath = 'c:\tns\tnsnames.ora',$username = 'user',$password = 'gotmehere', $connectionName = 'mustard', $query = 'Select sysdate from dual')
$simplySQLPath = (Get-Module -ListAvailable simplySQL).ModuleBase
if($simplySQLPath -and (test-path $tnsnamesPath -PathType Leaf) -and (![string]::IsNullOrEmpty($node)))
{
    [System.Reflection.Assembly]::LoadFile("$simplySQLPath\DataReaderToPSObject.dll") | OUT-NULL
    Import-Module SimplySql -Force
    $parsedTN = (get-content $tnsnamesPath -raw)  -replace '(.*\=.*|\n.*\=)(.*|\n.*)\(DESCRIPTION*.\=' ,'Data Source = (DESCRIPTION ='  
    $splitTN = $parsedTN -split '(?=.*Data Source = \(DESCRIPTION \=)' 
    $tnsnames = $splitTN |?{$_ -like "*$connectionName*"}
    $connstring = "$tnsnames;User Id=$username;Password=$password"
    try
    {
        Open-OracleConnection -ConnectionString $connstring -ConnectionName $connectionName
        $result = Invoke-SqlQuery -ConnectionName $connectionName -Query "$SQLQuery"
        Close-SqlConnection -ConnectionName $connectionName
    }
    catch
    {
        $_.exception
    }

}
Else
{
    if(!(test-path $tnsnamesPath -PathType Leaf -ErrorAction Ignore))
    {
        Throw "Check TNSnamesPath:  $tnsNamesPath"
    }
    else
    {
        Throw "Exeception SIMPLYSQL not found in module Path $($env:PSModulePath)"
    }
}
$result 
```

我在这里写了关于这段代码的博客：[https ://powershellposse.com/2018/03/13/tnsnames-file-parsing/](https://powershellposse.com/2018/03/13/tnsnames-file-parsing/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-12T08:41:58.240

一个旧帖子，但我一直在寻找类似的解决方案。

我突然想到，看起来 ODP.net 不允许指定 TNS 文件路径，那么如果您知道文件路径，只需以编程方式读取文件并将内容设置为 ConnectionStringBuilder 的 DataSource 字段。不理想，但一个合理的解决方法。

# workflow-foundation - Windows Workflow Foundation：等待工作流的一部分完成？

> ID：15275378
> 
> 赞同：2
> 
> 时间：2013-03-07T15:41:12.917
> 
> 标签：workflow-foundation

我熟悉书签、异步和同步工作流作为一个整体，但我需要做的是恢复书签，然后（同步）等待我的工作流中的另一个步骤（状态）在检索结果之前达到，更少我从上一次运行中获取状态。有什么办法可以做到这一点？

# c++ - 包含非 Copyable 对象的对象的编译警告不可读

> ID：15275380
> 
> 赞同：-2
> 
> 时间：2013-03-07T15:41:14.733
> 
> 标签：c++, compilation, copy-constructor, static-assert

我之前问过一个类似的问题，但现在我想更具体一点。我面临的问题是我有一个包含不可复制对象的对象，当有人想要使用我的接口并且他没有很好地使用它（尝试使用对象的复制构造函数）时，他会得到一个编译错误，它将指向对象而不是他的实际代码。所以有两个问题：1.我可以以某种方式修复它以将其指向他的原始代码行吗？2.如果我不能，我怎么能放一个只有在有人真正尝试使用副本c'tor时才会发生的static_assert（我已经尝试了一些但即使有人不使用它我也会得到它们...... )

我正在添加示例代码和编译错误，以防我不理解...注意最后一个编译错误指向 ObjectHolder h。文件..虽然我希望它指向主要的谢谢！

***是我替换名称时的错误。实际上是导致编译错误的代码。让我们假设我不想实现一个私人复制 c'tor 只是为了转发残疾复制

```
class NonCopyableObject 
{
    public:
        virtual ~NonCopyableObject () {}

        NonCopyableObject(int i) { m_index = i;}
        int m_index;
    private:
        NonCopyableObject(const NonCopyableObject& other) {}
};

class ObjectHolder 
{
    public:
        virtual ~ObjectHolder ();
        ObjectHolder(int i) : obj(i) {}

        NonCopyableObject obj;
};

void main()
{
    ObjectHolder first(1);
    ObjectHolder second(first);
}

1>------ Build started: Project: tester, Configuration: Debug Win32 ------
1>  main.cpp
1>d:\users\someone\documents\visual studio 2012\projects\tester\tester\objectholder.h(13): error C2248: 'NonCopyableObject::NonCopyableObject' : cannot access private member declared in class 'NonCopyableObject'
1>          d:\users\someone\documents\visual studio 2012\projects\tester\tester\noncopyableobject.h(15) : see declaration of 'NonCopyableObject::NonCopyableObject'
1>          d:\users\someone\documents\visual studio 2012\projects\tester\tester\noncopyableobject.h(8) : see declaration of 'NonCopyableObject'
1>          This diagnostic occurred in the compiler generated function 'ObjectHolder::ObjectHolder(const ObjectHolder &)' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:55:16.203

提供的错误消息不反映提供的代码。

除此之外，你有一个错误。考虑代码：

```
class ObjectHolder 
{
    public:
        virtual ~ObjectHolder ();
        ObjectHolder(int i) : obj(i) {}

        ObjectHolder obj;
}; 
```

`ObjectHolder`编译器如何确定递归所需的内存量？

# api - Windows 7 explorer.exe 文件 api

> ID：15275382
> 
> 赞同：0
> 
> 时间：2013-03-07T15:41:28.067
> 
> 标签：api, windows-7, explorer

有谁知道 explorer.exe 使用哪些 windows-API 来查找目录的文件？

在 Windows XP 中，它使用 FindFirstFileW() 和 FindNextFileW()，但在 windows vista 和 7 上，资源管理器不再使用它们...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:49:12.700

较新的 Windows 版本在打开文件夹时会自动对文件夹中的文件进行排序。可以恢复旧的行为。

描述如何做到这一点是[here](http://www.winhelponline.com/blog/disable-full-row-select-explorer-windows-7/)

# android - 谷歌地图 api v2 - 开始活动表单标记

> ID：15275393
> 
> 赞同：1
> 
> 时间：2013-03-07T15:42:15.127
> 
> 标签：android, google-maps-android-api-2

我有这个问题：

当从地图上点击一个标记时，我需要开始一项活动，在片段上可视化；

这是我的 XML 的一部分：

```
<LinearLayout 
    android:id="@+id/mylayout"
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="560"  >              

<fragment
android:id="@+id/mapview"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_margin="5dp"
android:clickable="true"
android:name="com.google.android.gms.maps.MapFragment"
/>

</LinearLayout> 
```

当使用基于 Tabella 数据构建的一个标记时，我的 ACTIVITY1 桅杆调用 ACTIVITY2（此处未写）：

```
@SuppressLint("NewApi")
public  class ACTIVITY1 extends Activity {
. . . . . .

ArrayList<HashMap<String, String>> Tabella ();
. . . . . .
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.mylayout);

mapView = ((MapFragment) getFragmentManager().findFragmentById(R.id.mapview)).getMap(); 
    . . . . 
    showmap(null);
    . . . . 
}

//prepare markers on map fragment
private void showMap(OnMarkerClickListener OnMarkerClickListener) {

    arrM = new ArrayList<String> ();

    mapView.setOnMarkerClickListener ( OnMarkerClickListener );

    try {

         for (int i=0 ; i<Tabella.size(); i++) {

              HashMap<String, String> a = Tabella.get(i);
              final String insegna  = a.get("insegna");
              String lat1  = a.get("latitudine");
              String longi = a.get("longitudine");

              if (lat1.equals(""))  lat1 = "0.0";
              if (longi.equals(""))  longi = "0.0";
              latitude = Double.parseDouble(lat1);
              longitude = Double.parseDouble(longi);

              cameraPosition = new CameraPosition.Builder()
                               .target(new LatLng(latitude,longitude))     
                               .zoom(17)                   // Sets the zoom
                               .build();                   

               marker = mapView.addMarker(new MarkerOptions()
                       .position(new LatLng(latitude, longitude)) 
                       .snippet("" )
                       .icon(BitmapDescriptorFactory.fromResource(R.drawable.iconpoi)) 
                       .title(insegna)); 

               mapView.animateCamera(CameraUpdateFactory.newCameraPosition(cameraPosition));
               marker.showInfoWindow();

               arrM.add(marker.getId());

               //mapView.setOnMarkerClickListener ( OnMarkerClickListener );

            }
     } catch (Exception e) {
        e.printStackTrace();
       }

 }

 //called when marker selected
 public void onMarkerClick(Marker marker) {
     . . .
     Intent myIntent = new Intent(ACTIVITY1 .this,Activity2.class); 
     . .
     myIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
     ACTIVITY1 .this.startActivity(myIntent);
     . . 

 }  

 } 
```

`onMarkerClick(Marker marker)`为什么不调用public void ？

怎么了 ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:36:24.567

> 为什么不调用 public void onMarkerClick(Marker marker) ？

因为您打电话`showmap(null)`，因此从未注册过监听器。

# node.js - 在服务器端生成 socket.io 作为 Rest 请求

> ID：15275395
> 
> 赞同：1
> 
> 时间：2013-03-07T15:42:26.080
> 
> 标签：node.js, websocket, socket.io

有一种方法可以在服务器端管理 socket.io 的创建吗？目前，我找不到任何文档，仅发现与来自客户端**"io.connect(server)"**的请求创建的套接字相关。

当前流程工作正常：

1.  在 SERVER:PORT 设置 Socket.io（在 Node.js 中）
2.  客户端连接到服务器
    *   使用 io.connect(SERVER:PORT)

我想知道这是否可能？试图做：

1.  在 SERVER:PORT 设置 Socket.io（在 Node.js 中）
2.  收到 POST (REST) - 服务器端
    *   在服务器端创建/打开 Socket.io。
    *   在 Post 的响应中发送 id？
3.  客户打开一个socke.io

发送到客户端 socket.id 作为客户端

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T17:36:34.613

到目前为止，深入研究代码和文档，我发现 socket.io 支持命名空间，所以我使用它来管理客户端连接 ID。

在 server.js

```
 var app = express();
    var server = require('http').createServer(app),
    io = require('socket.io').listen(server,{ log: false });
    // Rest New Process
    function generateNameSpaceWs (responce, request) { 
       io.of("/" + id).on('connection', handler);
      response.send(id);
    }
    app.post("/newWS", function (res, req) {
       return generateNameSpaceWs(res, req);
    } 
```

在 Client.js

```
function makeWS(){
    var ws, c = new XMLHttpRequest();
    c.open("GET", url, false);
    c.send();
    if (c.status == 200){
        id = JSON.parse(c.responseText);
         ws = new io.connect("server/" + id)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:33:40.287

到目前为止，您做得对，如果我正确理解您的问题，您正在尝试通过 POST 验证连接，因此如果服务器响应 ID，用户只能通过套接字连接到服务器。这是一个迂回的方式。使用套接字而不是 POST。

Socket服务器必须已经运行，并通过服务器接受连接`io.sockets.on('connection')`，在服务器上您可以选择是接受还是拒绝它，`socket.disconnect('unauthorized')`关闭与服务器的连接。

我建议你这样做：

1.  在 SERVER:PORT 设置 Socket.io（在 Node.js 中）
2.  客户端使用 io.connect(SERVER:PORT) 连接到 SERVER
3.  通过套接字发送您在 POST 中发送的内容。
4.  `io.sockets.on('connection', function(socket)`在服务器上进行身份验证/处理。
5.  如果未授权，请关闭套接字。
6.  将 ID 数据发送回客户端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T18:27:52.513

这似乎不可能——虽然[缺少socket.io 的官方文档，但](https://stackoverflow.com/questions/10363466/socket-io-documentation)[net 模块](http://nodejs.org/api/net.html)的文档表明创建套接字的唯一方法是在服务器端启动它。但是，您仍然可以通过在服务器上为套接字创建一个 id 以与套接字关联来达到预期的效果。那是，

1.  在 SERVER:PORT 设置 Socket.io（在 Node.js 中）
2.  收到 POST (REST) - 服务器端
3.  创建 id（注意：这可以在第 2 步之前完成）
4.  在 Post 的响应中发送 id！
5.  客户端连接到服务器
    *   使用 io.connect(SERVER:PORT)
6.  客户端使用类似的东西将 id 发送到服务器

    ```
    socket.emit("set_id",id) 
    ```

7.  服务器接收到 id 并使用类似的东西将其与套接字相关联

    ```
    socket.on("set_id",function(id){
        socket.set("id",id)
    } 
    ```

8.  现在您可以使用您创建的 id 来引用套接字！

祝你好运！

# jquery - 在 NodeJS 上使用 jQuery 的函数 css()

> ID：15275396
> 
> 赞同：3
> 
> 时间：2013-03-07T15:42:26.610
> 
> 标签：jquery, css, node.js, request, cheerio

我目前正在使用 NodeJS 来废弃具有以下模块的网页： Cheerio 和 Request

是否可以在 NodeJS 中使用 css() jQuery 函数？

```
request({uri: website}, function(error, response, body) {

  var $ = cheerio.load(body);
  myItemColor = $('.myitem').css('color');
  console.log(myItemColor);

}); 
```

我想检索给定 jQuery 对象的 css 属性。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:45:42.843

是的。

但是您需要在 DOM 中运行 jQuery 才能正常工作。查看我[在服务器示例上的 jQuery](https://github.com/goloroden/node-samples/tree/master/jquery/01%20using-jquery-on-the-server)，尤其是[app.js 文件的这一部分，](https://github.com/goloroden/node-samples/blob/master/jquery/01%20using-jquery-on-the-server/app.js#L39-L77)了解如何使用[jsdom](https://github.com/tmpvar/jsdom)为下载 HTML 站点创建服务器端 DOM。

PS：我还没有尝试过，但它也应该与该`css`功能一起使用（我看不出有任何不应该的理由）。

# php - 使用 WAMP 连接 PHP 和 SQL Server

> ID：15275398
> 
> 赞同：0
> 
> 时间：2013-03-07T15:42:28.903
> 
> 标签：php, sql-server, wamp

我正在尝试将我的 PHP 与 SQL Server 连接起来。我必须去现场测试它，所以我正在为笔记本电脑配置必要的设置。在我目前工作的桌面上，连接工作正常。但在笔记本电脑中，它不会连接。这是我正在使用的代码：

```
$serverName = "server"; //serverName\instanceName

$connectionInfo = array( "Database"=>"DB", "UID"=>"user", "PWD"=>"pass");
$conn = sqlsrv_connect($serverName, $connectionInfo);

if( $conn ) {
     echo "Connection established.<br />";
}else{
     echo "Connection could not be established.<br />";
     die( print_r( sqlsrv_errors(), true));
} 
```

我已将 .dlls 放在 ext 文件中，并在 php.ini 中编写了扩展名，但不知何故它仍然无法正常工作。这是我得到的错误：

```
Connection could not be established.
Array ( [0] => Array ( [0] => IMSSP [SQLSTATE] => IMSSP [1] => -49 [code] => -49 [2] => This extension requires the Microsoft SQL Server 2012 Native Client. Access the following URL to download the Microsoft SQL Server 2012 Native Client ODBC driver for x86: http://go.microsoft.com/fwlink/?LinkId=163712 [message] => This extension requires the Microsoft SQL Server 2012 Native Client. Access the following URL to download the Microsoft SQL Server 2012 Native Client ODBC driver for x86: http://go.microsoft.com/fwlink/?LinkId=163712 ) [1] => Array ( [0] => IM002 [SQLSTATE] => IM002 [1] => 0 [code] => 0 [2] => [Microsoft][ODBC Driver Manager] Data source name not found and no default driver specified [message] => [Microsoft][ODBC Driver Manager] Data source name not found and no default driver specified ) ) 
```

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T17:56:58.763

[http://www.microsoft.com/en-us/download/details.aspx?id=29065#SNAC](http://www.microsoft.com/en-us/download/details.aspx?id=29065#SNAC)

这就是答案。我下载了 Microsoft® SQL Server® 2012 Native Client，一切都很顺利。我搜索了这个链接的高低，所以现在我在这里分享它，希望能帮助任何像我一样正在寻找它的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T14:05:11.183

@plasmy，谢谢。我也到处搜索以使其正常工作。页面顶部的下载链接为您提供了一个文本文件，其中包含有关如何下载文件的说明，这真的是 wtf。本机客户端的直接链接在这里：

[http://go.microsoft.com/fwlink/?LinkID=239648&clcid=0x409](http://go.microsoft.com/fwlink/?LinkID=239648&clcid=0x409)

# google-maps - 如何通过单击地图中的某个点以编程方式放置街景小人

> ID：15275401
> 
> 赞同：0
> 
> 时间：2013-03-07T15:42:38.193
> 
> 标签：google-maps, google-maps-api-3, street-address

我如何能够以编程方式将街景小人放在地图上的某个点上。我有一个地图的“点击”事件。我需要将街景小人放在点击它的坐标上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:33:07.497

如果您希望街景小人出现在地图上，您需要启用街景控制器。

如果您愿意，可以再次禁用它。

查看原始帖子的评论以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-26T15:02:05.207

当地图和全景容器分开并且全景与地图相关联时，街景小人可以通过应用程序放置在地图上。

例如。：

HTML

```
    <div id="mapContainer"></div>
    <div id="svpContainer"></div>

```

JavaScript

```
    var mapElement = document.getElementById('mapContainer');
    var svpElement = document.getElementById('svpContainer');

    var map = new google.maps.Map(mapElement, {...});

    var svp = 新的 google.maps.StreetViewPanorama(svpElement, {
       位置：{lat：svpLat，lng：svpLng}，
       可见：真实，
       ...
    });

    map.setStreetView(svp);

```

诀窍是，svpContainer 可以通过 CSS 隐藏为 HTML 元素

```
    #svpContainer {
        显示：无；
        ...
    }

```

或者

JavaScript

```
    document.svpElement.hidden=true

```

或其他任何东西（而不是从自身内部关闭 svp [svp 选项*enableCloseButton 的功能：true* ] 也不以编程方式使用 svp 选项*visible:true/false*）！

Svp 选项“可见”是线索。它必须是“真实的”，才能让街景小人出现在地图上。

结果，街景小人在您选择的地图上：

```
    svp.setPosition({lat: ...,lng: ...});

```

发疯 :D

# java - 调用 java.lang.String 不可变是否正确？

> ID：15275410
> 
> 赞同：16
> 
> 时间：2013-03-07T15:42:57.143
> 
> 标签：java, immutability

[这个 Java 教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/immutable.html) 说不可变对象在创建后无法更改其状态。

`java.lang.String`有一个字段

```
/** Cache the hash code for the string */
private int hash; // Default to 0 
```

它在第一次调用该`hashCode()`方法时被初始化，因此在创建后会发生变化：

```
 String s = new String(new char[] {' '});
    Field hash = s.getClass().getDeclaredField("hash");
    hash.setAccessible(true);
    System.out.println(hash.get(s));
    s.hashCode();
    System.out.println(hash.get(s)); 
```

输出

```
0
32 
```

调用不可变是否正确`String`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-07T15:55:44.593

更好的定义**不是**对象没有*改变*，而是不能*观察*到它已经改变。它的行为永远不会改变：对于该字符串同上 for和所有其他方法`.substring(x,y)`将始终返回相同的内容。`equals`

该变量是在您第一次调用时计算的`.hashcode()`，并被缓存以供进一步调用。这基本上就是他们在函数式编程语言中所谓的“[记忆化”。](http://en.wikipedia.org/wiki/Memoization)

反射并不是真正用于“编程”的工具，而是用于元编程（即用于生成程序的编程程序），因此它并不真正重要。这相当于使用内存调试器更改常量的值。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-08T05:37:21.020

术语“不可变”非常模糊，无法给出精确的定义。

我建议从 Eric Lippert 的博客中阅读[Kinds of Immutability 。](http://blogs.msdn.com/b/ericlippert/archive/2007/11/13/immutability-in-c-part-one-kinds-of-immutability.aspx)虽然它在技术上是一篇 C# 文章，但它与提出的问题非常相关。尤其：

> **观察不变性：**
> 
> 假设您有一个对象，该对象具有每次调用它的方法、查看字段等时都会得到相同结果的属性。从调用者的角度来看，这样的对象是不可变的。然而你可以想象，在幕后，对象正在做延迟初始化，在哈希表中记忆函数调用的结果等。对象的“胆量”可能是完全可变的。
> 
> 有什么关系？真正的不可变对象根本不会改变它们的内部状态，因此本质上是线程安全的。如果对象“同时”在两个线程上调用，则在后台可变的对象可能仍需要具有复杂的线程代码，以保护其内部可变状态免受损坏。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-07T15:53:42.360

一旦创建，`String`实例上的所有方法（使用相同的参数调用）将始终提供相同的结果。你不能改变它的行为（使用任何公共方法），所以它总是代表同一个实体。而且它是`final`并且不能被子类化，因此可以保证所有实例的行为都像这样。

因此**，从公众的角度来看**，该对象被认为是不可变的。在这种情况下，内部状态并不重要。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T15:51:50.290

是的，将它们称为不可变是正确的。

虽然确实可以访问和修改类的`private`... 和`final`... 变量，但对对象执行此操作是不必要且极其不明智的事情`String`。人们普遍*认为*，没有人会疯狂到足以做到这一点。

从安全的角度来看，修改 String 状态所需的反射调用都执行安全检查。除非您错误地实现了您的沙箱，否则对于不受信任的代码的调用将被阻止。因此，您应该担心这是不受信任的代码可能破坏沙盒安全性的一种方式。

还值得注意的是，JLS 声明使用反射来改变`final`，可能会破坏事物（例如在多线程中）或者可能没有任何效果。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-01T20:41:54.487

从使用反射的开发人员的角度来看，调用不可变是**不**正确的`String`。每天都有实际的 Java 开发人员使用反射来编写真正的软件。将反射视为“黑客”是荒谬的。 **但是**，从不使用反射的开发人员的角度来看，调用`String`不可变是正确的。假设它`String`是不可变的是否有效取决于上下文。

不变性是一个抽象概念，因此不能在绝对意义上适用于任何具有物理形式的事物（参见[忒修斯之船](http://en.wikipedia.org/wiki/Ship_of_Theseus)）。诸如对象、变量和方法之类的编程语言构造在存储介质中以比特的形式物理存在。数据退化是发生在所有存储介质上的物理过程，因此不能说数据是真正不可变的。此外，在实践中几乎总是有可能颠覆旨在防止特定数据发生突变的编程语言功能。相反，数字 3 是 3，一直是 3，并且永远是 3。

应用于程序数据时，不变性应被视为*有用的假设*，而不是*基本属性*。例如，如果假设 a`String`是不可变的，则可以缓存其哈希码以供重用，并避免以后再次重新计算其哈希码的成本。几乎所有重要的软件都依赖于某些数据在特定时间段内不会发生变异的假设。软件开发人员通常假设程序的[代码段](http://en.wikipedia.org/wiki/Code_segment)在执行时不会更改，除非他们正在编写自修改代码。了解哪些假设在特定环境中有效是软件开发的一个重要方面。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-07T15:45:50.717

它不能从外部修改，它是一个最终类，所以它不能被子类化和可变。Theese 是不变性的两个要求。反射被认为是一种 hack，它不是一种正常的开发方式。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-07T15:46:10.403

反射将允许您更改任何私有字段的内容。因此，将 Java 中的任何对象称为不可变对象是否正确？

不变性是指由应用程序发起或可感知的更改。

在字符串的情况下，特定实现选择延迟计算哈希码这一事实对于应用程序来说是无法察觉的。我会更进一步，并说一个由对象递增的内部变量——但从未暴露并且从未以任何其他方式使用——在“不可变”对象中也是可以接受的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-07T15:46:52.523

一个类可以是不可变的，但仍然具有可变字段，只要它不提供对其可变字段的访问。

它在设计上是不可变的。如果您使用反射（获取声明的字段并重置其可访问性），您正在规避它的设计。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-07-10T06:20:54.173

是的，它是正确的。当您像在示例中那样修改 String 时，会创建一个新的 String 但旧的 String 保持其值。

# jquery - slideToggle jQuery 在加载时关闭

> ID：15275419
> 
> 赞同：1
> 
> 时间：2013-03-07T15:43:11.363
> 
> 标签：jquery, slidetoggle

单击链接时，我正在使用 jQuery`.slideToggle`创建扩展区域。目前，以下代码创建了一个页面，其中内容显示为 onload。

如何指定信息文本应在页面加载时隐藏并且仅在单击链接时出现？

```
<script>
    $(".moreInfo").click(function () {
        $(".moreInfoText").slideToggle("slow");
    });
</script>

<span class="moreInfo">Read more</span></p>
<p class="moreInfoText">More info text goes here</p> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T15:44:36.413

通过添加属性直接隐藏`p`元素：`style="display: none;"`

```
<span class="moreInfo">Read more</span></p>
<p class="moreInfoText" style="display: none;">More info text goes here</p> 
```

如果你尝试用 javascript 来做，你会得到一个[FOUC](http://en.wikipedia.org/wiki/Flash_of_unstyled_content)

# c# - json编码的自定义替换未按预期输出双引号

> ID：15275422
> 
> 赞同：3
> 
> 时间：2013-03-07T15:43:11.877
> 
> 标签：c#, json, escaping, encode

在我创建了自己的 json 编码器之后，我意识到它用两个转义的反斜杠代替了双引号，而不是一个。

我现在意识到 C# 有一个内置`Json.Encode()`方法，是的，我已经让它工作了，但是，我对为什么下面的代码（我构建的 json 编码器）没有像我一样替换引号感到困惑预计。

这是我的 json 编码器方法：

```
public static string jsonEncode(string val)
{
    val = val.Replace("\r\n", " ")
             .Replace("\r", " ")
             .Replace("\n", " ")
             .Replace("\"", "\\\"")
             .Replace("\\", "\\\\");

    return val;
} 
```

replace 调用：`Replace("\"", "\\\"")`替换`"`为`\\"`，这当然会产生无效的 json，因为它将两个反斜杠（一个作为转义字符，很像上面的 C#）视为 json 文件中的单个“真实”反斜杠，因此不会转义双引号，如预期的那样。然而，该`Replace("\\", "\\\\")`调用完美地工作（即，它用两个反斜杠替换了一个反斜杠，正如我所期望的那样）。

根据我的论点，我很容易说出 Replace 方法没有执行功能，正如我所期望的那样。我的问题是为什么？我知道我不能使用`Replace("\"", "\\"")`反斜杠，因为它也是 C# 的转义字符，所以它会产生语法错误。使用`Replace("\"", "\"")`也很愚蠢，因为它会用双引号代替双引号。

为了更好地理解 C# 中的 replace 方法，我很想知道为什么 Replace 方法的行为与我预期的不同。如何`Json.Encode`达到这种编码水平？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T15:45:52.853

您正在替换`"`，`\"`然后*用*两个反斜杠替换任何反斜杠......这将包括您已经创建的反斜杠。在纸上一次执行一个操作，您会看到相同的效果。

您需要做的就是反转转义的顺序，以便您先转义反斜杠，*然后再*引用：

```
return val.Replace("\r\n", " ")
          .Replace("\r", " ")
          .Replace("\n", " ")
          .Replace("\\", "\\\\")
          .Replace("\"", "\\\""); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T15:45:59.693

问题在这里：

```
Replace("\"", "\\\""); // convert " to \"
Replace("\\", "\\\\"); // which are then converted to \\" 
```

第一行替换`"`为`\"`。第二行将那些新的替换`\"`为`\\"`.

正如乔恩所说，在引入任何转义字符之前，您需要运行转义字符的替换。

但是，我认为您应该使用真正的编码器。;-)

# linux - mlock()-ed 页面是静态的，还是可以在物理 RAM 中移动？

> ID：15275423
> 
> 赞同：3
> 
> 时间：2013-03-07T15:43:16.897
> 
> 标签：linux, ubuntu, memory-management

根据`mlock()`手册页：

> 调用成功返回时，保证所有包含指定地址范围的一部分的页面都驻留在 RAM 中；这些页面保证保留在 RAM 中，直到以后解锁。

这是否也保证这些页面的物理地址在它们的整个生命周期内是不变的，或者直到解锁？

如果不是（也就是说，如果它可以由内存管理器移动 - 但仍保留在 RAM 中），关于新位置或发生这种变化的事件有什么可以说的吗？

更新：

关于 RAM 中锁定页面的一致性，有什么可以说的吗？如果 CPU 有缓存，那么 mlock-ing 是否保证 RAM 与缓存的一致性（假设回写缓存）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-21T22:10:27.490

不，已经`mlocked`使用内核的*不可撤销 LRU 列表*管理的页面。顾名思义（并`mlock()`保证）这些页面不能从 RAM 中逐出。但是，页面可以从一个物理页框迁移到另一个。[以下是Unevictable LRU Infrastructure](https://www.kernel.org/doc/Documentation/vm/unevictable-lru.txt)的摘录（为清楚起见添加了格式）：

> ## 迁移锁定页面
> 
> 正在迁移的页面已从 LRU 列表中分离出来，并在页面取消映射、更新页面的地址空间条目并复制内容和状态时保持锁定，直到页表条目被替换为引用的条目新页面。 **Linux 支持迁移`mlocked`页面和其他不可撤销的页面。** 这涉及简单地将`PG_mlocked`和`PG_unevictable`状态从旧页面移动到新页面。

# sharepoint - Sharepoint 2013 Excel Services 未在工作簿中呈现 Power View 报表

> ID：15275428
> 
> 赞同：1
> 
> 时间：2013-03-07T15:43:38.580
> 
> 标签：sharepoint, sharepoint-2013, powerpivot, powerview

我们希望能够将包含 Power View 报告的 Excel 2013 工作簿发布到 SharePoint 2013 中，并通过 Excel Services 应用程序查看它们。
目前，我们看到的不是实际报告，而是默认的 Power View 错误页面，没有任何错误消息或日志条目。

以下是一些附加信息：
1\. 正确呈现工作簿的其余部分（常规 excel 和 powerpivot 表）。
2\. 在 SharePoint 文档库中创建的 Power View 报告（RDLX 报告）正确呈现。3\. PowerPivot 和 Power View 根据官方分步指南重新配置和验证。

有没有人对我们可能错过或做错了什么有任何想法？
提前致谢。

**编辑**：我做了很多调试，终于可以找到相关的错误消息。这是一种`NullReferenceException`方法`Microsoft.AnalysisServices.SPAddin.ReportGallery.SnapshotHandler.RegisterGlobalExtensionHandlers()`。此异常仅在应用程序池重置后以及我将 XLSX 工作簿上传到文档库时引发一次。
我检查了 .NET Reflector 中的方法代码，似乎找到了引发异常的部分。

```
CustomCaptureSection customCaptureSection = (CustomCaptureSection)ConfigurationManager.GetSection("ReportGalleryCustomCapture");
SnapshotHandler.MaxSnapshotsCount = customCaptureSection.MaxSnapshotsCount;
SnapshotHandler.SnapshotCaptureTimeoutS = (long)((int)customCaptureSection.SnapshotCaptureTimeoutSeconds);
SnapshotHandler.CreateProcessMethodForSnapshot = customCaptureSection.CreateProcessMethodForSnapshot; 
```

据我了解，运行时无法从配置中获取该部分。我试图在 SharePoint 配置单元中找到部分名称，`inetpub`但没有运气。还有其他地方可以查找配置文件吗？或者有人可以验证这部分是否存在？
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T00:44:21.857

如果工作簿是本地存储，则您的主机配置处于 Office Web Apps Server 视图模式（SharePoint Server 配置为使用 Office Web Apps Server 呈现工作簿），并且您的工作簿在 Excel Web App 中打开电源视图表不可见. 这是你的模式吗？它们在 Skydrive 上也不可见。

# java - REST 列表 返回导致错误

> ID：15275431
> 
> 赞同：1
> 
> 时间：2013-03-07T15:43:43.837
> 
> 标签：java, web-services, list, rest

我已经尝试了两个小时来尝试从生成的 REST Web 服务获取返回值，但是 Netbeans 但无论我尝试什么都会引发错误。从 netbeans 生成的代码是

```
@GET
@Override
@Produces({"application/xml", "application/json"})
public List<Person> findAll() {
    return super.findAll();
} 
```

当我创建一个客户端时，我得到了这个生成的代码

```
public <T> T findAll_XML(Class<T> responseType) throws UniformInterfaceException {
     WebResource resource = webResource;
     return  resource.accept(javax.ws.rs.core.MediaType.APPLICATION_XML).get(responseType);
} 
```

我尝试了多种方法来调用它，经过大量冲浪后决定这应该可以解决问题，但事实并非如此。

```
public static void main(String[] args) {
    PersonRESTClient prc = new PersonRESTClient();
    Person person = prc.find_XML(Person.class, "100");
    System.out.println(person.getFirstname() + " " + person.getSecondname()); //THIS WORKS!!
   GenericType<List<Person>> gType = new GenericType<List<Person>>(){};
   List<Person> persons = (List<Person>) prc.findAll_XML(gType.getClass());
   for (Person p : persons) {
       System.out.println(person.getFirstname() + " " + person.getSecondname());
   }

} 
```

我得到的错误是

> 2013 年 3 月 7 日下午 2:23:31 com.sun.jersey.api.client.ClientResponse getEntity SEVERE：Java 类 restexample2client.RestExample2Client$1、Java 类型类 restexample2client.RestExample2Client$1 和 MIME 媒体类型应用程序的消息正文阅读器/xml 未找到 2013 年 3 月 7 日下午 2:23:31 com.sun.jersey.api.client.ClientResponse getEntity SEVERE：与 MIME 媒体类型兼容的已注册消息正文阅读器为：application/xml ->
> com.sun .jersey.core.impl.provider.entity.XMLJAXBElementProvider$App
> com.sun.jersey.core.impl.provider.entity.DocumentProvider
> com.sun.jersey.core.impl.provider.entity.SourceProvider$StreamSourceReader com.sun.jersey.core.impl.provider.entity.SourceProvider$SAXSourceReader com.sun.jersey.core.impl.provider.entity.SourceProvider$ DOMSourceReader com.sun.jersey.core.impl.provider.entity.XMLRootElementProvider$App
> com.sun.jersey.core.impl.provider.entity.XMLListElementProvider$App
> com.sun.jersey.core.impl.provider.entity.XMLRootObjectProvider $App */* -> com.sun.jersey.core.impl.provider.entity.FormProvider com.sun.jersey.core.impl.provider.entity.StringProvider
> com.sun.jersey.core.impl.provider.entity.ByteArrayProvider
> com.sun.jersey.core.impl.provider.entity.FileProvider
> com.sun.jersey.core.impl.provider.entity.InputStreamProvider
> com.sun.jersey.core.impl.provider.entity.DataSourceProvider
> com.sun.jersey.core.impl.provider.entity.XMLJAXBElementProvider$General com.sun.jersey.core.impl.provider.entity.ReaderProvider
> com.sun .jersey.core.impl.provider.entity.DocumentProvider
> com.sun.jersey.core.impl.provider.entity.SourceProvider$StreamSourceReader com.sun.jersey.core.impl.provider.entity.SourceProvider$SAXSourceReader com.sun。 jersey.core.impl.provider.entity.SourceProvider$DOMSourceReader com.sun.jersey.json.impl.provider.entity.JSONJAXBElementProvider$General com.sun.jersey.json.impl.provider.entity.JSONArrayProvider$General
> com.sun .jersey.json.impl.provider.entity.JSONObjectProvider$General
> com.sun.jersey.core.impl.provider.entity.XMLRootElementProvider$General com.sun.jersey.core.impl.provider.entity.XMLListElementProvider$General com.sun.jersey.core.impl.provider.entity.XMLRootObjectProvider$ com.sun.jersey.core.impl.provider.entity.EntityHolderReader
> com.sun.jersey.json.impl.provider.entity.JSONRootElementProvider$General com.sun.jersey.json.impl.provider.entity.JSONListElementProvider$General com.sun.jersey.json.impl.provider.entity.JacksonProviderProxy
> 
> 线程“main”com.sun.jersey.api.client.ClientHandlerException 中的异常：Java 类 restexample2client.RestExample2Client$1 和 Java 类型类 restexample2client.RestExample2Client$1 和 MIME 媒体类型 application/xml 的消息正文阅读器未在com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:561) 在 com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:517) 在 com.sun.jersey.api。 client.WebResource.handle(WebResource.java:684) at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74) at com.sun.jersey.api.client.WebResource$Builder.get (WebResource.java:507) 在 com.carnabygaming.rest.service.client.EnterpriseRESTClient.findAll_XML(EnterpriseRESTClient.java:47) 在 restexample2client.RestExample2Client。主要（RestExample2Client.java:32）

有人知道我哪里出错了吗？单个对象生成的代码工作得很好。我刚刚注意到，当我进行测试时，该方法不会出现在网页中。请仍然需要帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T15:53:12.767

是的，您需要提供接受超类型标记 ( `GenericType`) 的客户端方法的重载变体。现在，您的第二个客户端调用*实际上是*在尝试将响应数据反序列化为 class `GenericType<List<Person>>`，这不是您想要的。因此，首先，在您的客户端上定义一个接受超类型令牌的重载方法：

```
public <T> T findAll_XML(GenericType<T> superType) throws UniformInterfaceException {
     WebResource resource = webResource;
     return  resource.accept(javax.ws.rs.core.MediaType.APPLICATION_XML).get(superType);
} 
```

并在您的客户端中使用它：

```
GenericType<List<Person>> gType = new GenericType<List<Person>>() {};
List<Person> persons = (List<Person>) prc.findAll_XML(gType);
for (Person p : persons) {
    System.out.println(person.getFirstname() + " "
            + person.getSecondname());
} 
```

# javascript - jQuery文件上传无法调用未定义的方法'_adjustMaxNumberOfFiles'

> ID：15275432
> 
> 赞同：5
> 
> 时间：2013-03-07T15:43:44.857
> 
> 标签：javascript, jquery-file-upload

我正在 Rails 3.2 应用程序中实现[jQuery File Upload](http://blueimp.github.com/jQuery-File-Upload/)插件，我收到以下错误消息：

`Uncaught TypeError: Cannot call method '_adjustMaxNumberOfFiles' of undefined`

下面是调用 _adjustMaxNumberOfFiles 的代码：

```
$(function () {
    // Initialize the jQuery File Upload widget:
    $('#fileupload').fileupload(
      {
        url: '/photos', // post to and retrieve from
        dataType: 'json'
      }
    );

    // Load existing files:
    $.getJSON($('#fileupload').prop('action'), function (files) {
      var fu = $('#fileupload').data('fileupload'), 
          files = jQuery.grep(files, function (a) { return a.gallery_id == <%= params[:id] %>; }), //filter the photos down to this gallery
          template;

      fu._adjustMaxNumberOfFiles(-files.length);
      template = fu._renderDownload(files).appendTo($('#fileupload .files'));

      // Force reflow:
      fu._reflow = fu._transition && template.length && template[0].offsetWidth;
      template.addClass('in');
      $('#loading').remove();
    });

  }); 
```

这完全有效。我已经着手处理应用程序的其余部分，当我部署到临时环境时，我注意到我收到了上面的错误。我回到开发人员那里看看它是否在那里发生，果然是这样。我正在使用 jquery-fileupload-rails gem 将必要的文件加载到资产管道中。我试过不使用 gem 并手动加载所有资产，但这没有帮助。

我尝试在控制台中逐步执行此操作，设置 fu 和 fu._adjustMaxNumberOfFiles，但仍然收到错误消息`Cannot call method '_adjustMaxNumberOfFiles' of undefined`。如果我用 _adjustMaxNumberOfFiles 注释掉该行，我会在下一行得到相同的错误，而是告诉我 _renderDownload 未定义。就好像我无法访问 jquery-file-upload 插件中设置的任何方法，即使脚本都已加载。这是按顺序加载的脚本。我已经排除了不适用于此处的 js 文件。

```
<script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery-fileupload/vendor/jquery.ui.widget.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery-fileupload/vendor/load-image.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery-fileupload/vendor/canvas-to-blob.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery-fileupload/vendor/tmpl.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery-fileupload/jquery.iframe-transport.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery-fileupload/jquery.fileupload.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery-fileupload/jquery.fileupload-fp.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery-fileupload/jquery.fileupload-ui.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery-fileupload/locale.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery-fileupload/index.js?body=1" type="text/javascript"></script> 
```

我很难弄清楚这一点。任何帮助，将不胜感激。如有必要，我可以发布更多代码片段，但我发布的是唯一不属于 jQuery File Upload 插件的 JavaScript。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T23:44:03.493

在 uploads_controller 创建操作：

```
format.json { render json: {files: [@upload.to_jq_upload]}, status: :created, location: @upload } 
```

在你的 js 中：

```
var fu = $('#fileupload').data('blueimpFileupload'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T18:44:57.107

json 返回格式已被 gem 更改，并且没有在任何地方记录。

您可以查看与同一错误相关的此问题：[https ://github.com/tors/jquery-fileupload-rails/issues/30](https://github.com/tors/jquery-fileupload-rails/issues/30)

# c# - 列之间没有间隙的 ListView 模板

> ID：15275435
> 
> 赞同：0
> 
> 时间：2013-03-07T15:43:48.760
> 
> 标签：c#, wpf, listview

我有一个带有 ListView 控件的简单应用程序，它已编辑模板以禁用任何选择。基本上它的行为类似于 Grid 但它可以使用 ItemsSource 属性获取项目并具有列。我已经使用 MSDN 中的 ListView 控件模板并删除了所有选择等，但仍然有一些边距，我不知道如何删除它们。

xml如下：

```
 <Window.Resources>   
<!--Control colors.-->
        <Color x:Key="WindowColor">#FFE8EDF9</Color>
        <Color x:Key="ContentAreaColorLight">#FFC5CBF9</Color>
        <Color x:Key="ContentAreaColorDark">#FF7381F9</Color>

        <Color x:Key="DisabledControlLightColor">#FFE8EDF9</Color>
        <Color x:Key="DisabledControlDarkColor">#FFC5CBF9</Color>
        <Color x:Key="DisabledForegroundColor">#FF888888</Color>

        <Color x:Key="SelectedBackgroundColor">#FFC5CBF9</Color>
        <Color x:Key="SelectedUnfocusedColor">#FFDDDDDD</Color>

        <Color x:Key="ControlLightColor">White</Color>
        <Color x:Key="ControlMediumColor">#FF7381F9</Color>
        <Color x:Key="ControlDarkColor">#FF211AA9</Color>

        <Color x:Key="ControlMouseOverColor">#FF3843C4</Color>
        <Color x:Key="ControlPressedColor">#FF211AA9</Color>

        <Color x:Key="GlyphColor">#FF444444</Color>
        <Color x:Key="GlyphMouseOver">sc#1, 0.004391443, 0.002428215, 0.242281124</Color>

        <!--Border colors-->
        <Color x:Key="BorderLightColor">#FFCCCCCC</Color>
        <Color x:Key="BorderMediumColor">#FF888888</Color>
        <Color x:Key="BorderDarkColor">#FF444444</Color>

        <Color x:Key="PressedBorderLightColor">#FF888888</Color>
        <Color x:Key="PressedBorderDarkColor">#FF444444</Color>

        <Color x:Key="DisabledBorderLightColor">#FFAAAAAA</Color>
        <Color x:Key="DisabledBorderDarkColor">#FF888888</Color>

        <Color x:Key="DefaultBorderBrushDarkColor">Black</Color>

        <!--Control-specific resources.-->
        <Color x:Key="HeaderTopColor">#FFC5CBF9</Color>
        <Color x:Key="DatagridCurrentCellBorderColor">Black</Color>
        <Color x:Key="SliderTrackDarkColor">#FFC5CBF9</Color>

        <Color x:Key="NavButtonFrameColor">#FF3843C4</Color>

        <LinearGradientBrush x:Key="MenuPopupBrush"
                     EndPoint="0.5,1"
                     StartPoint="0.5,0">
            <GradientStop Color="{DynamicResource ControlLightColor}"
                Offset="0" />
            <GradientStop Color="{DynamicResource ControlMediumColor}"
                Offset="0.5" />
            <GradientStop Color="{DynamicResource ControlLightColor}"
                Offset="1" />
        </LinearGradientBrush>

        <LinearGradientBrush x:Key="ProgressBarIndicatorAnimatedFill"
                     StartPoint="0,0"
                     EndPoint="1,0">
            <LinearGradientBrush.GradientStops>
                <GradientStopCollection>
                    <GradientStop Color="#000000FF"
                    Offset="0" />
                    <GradientStop Color="#600000FF"
                    Offset="0.4" />
                    <GradientStop Color="#600000FF"
                    Offset="0.6" />
                    <GradientStop Color="#000000FF"
                    Offset="1" />
                </GradientStopCollection>
            </LinearGradientBrush.GradientStops>
        </LinearGradientBrush>

        <Style x:Key="{x:Static GridView.GridViewScrollViewerStyleKey}"
       TargetType="ScrollViewer">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ScrollViewer">
                        <Grid Background="{TemplateBinding Background}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <DockPanel Margin="{TemplateBinding Padding}">
                                <ScrollViewer DockPanel.Dock="Top"
                          HorizontalScrollBarVisibility="Hidden"
                          VerticalScrollBarVisibility="Hidden"
                          Focusable="false">
                                    <GridViewHeaderRowPresenter Margin="0,0,0,0"
                                          Columns="{Binding Path=TemplatedParent.View.Columns,
                RelativeSource={RelativeSource TemplatedParent}}"
                                          ColumnHeaderContainerStyle="{Binding
                Path=TemplatedParent.View.ColumnHeaderContainerStyle,
                RelativeSource={RelativeSource TemplatedParent}}"
                                          ColumnHeaderTemplate="{Binding
                Path=TemplatedParent.View.ColumnHeaderTemplate,
                RelativeSource={RelativeSource TemplatedParent}}"
                                          ColumnHeaderTemplateSelector="{Binding 
                Path=TemplatedParent.View.ColumnHeaderTemplateSelector,
                RelativeSource={RelativeSource TemplatedParent}}"
                                          AllowsColumnReorder="{Binding
                Path=TemplatedParent.View.AllowsColumnReorder,
                RelativeSource={RelativeSource TemplatedParent}}"
                                          ColumnHeaderContextMenu="{Binding
                Path=TemplatedParent.View.ColumnHeaderContextMenu,
                RelativeSource={RelativeSource TemplatedParent}}"
                                          ColumnHeaderToolTip="{Binding
                Path=TemplatedParent.View.ColumnHeaderToolTip,
                RelativeSource={RelativeSource TemplatedParent}}"
                                          SnapsToDevicePixels="{TemplateBinding
                SnapsToDevicePixels}" />
                                </ScrollViewer>

                                <ScrollContentPresenter Name="PART_ScrollContentPresenter"
                                    KeyboardNavigation.DirectionalNavigation="Local"
                                    CanContentScroll="True"
                                    CanHorizontallyScroll="False"
                                    CanVerticallyScroll="False" />
                            </DockPanel>

                            <ScrollBar Name="PART_HorizontalScrollBar"
                     Orientation="Horizontal"
                     Grid.Row="1"
                     Maximum="{TemplateBinding ScrollableWidth}"
                     ViewportSize="{TemplateBinding ViewportWidth}"
                     Value="{TemplateBinding HorizontalOffset}"
                     Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}" />

                            <ScrollBar Name="PART_VerticalScrollBar"
                     Grid.Column="1"
                     Maximum="{TemplateBinding ScrollableHeight}"
                     ViewportSize="{TemplateBinding ViewportHeight}"
                     Value="{TemplateBinding VerticalOffset}"
                     Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}" />

                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="GridViewColumnHeaderGripper"
       TargetType="Thumb">
            <Setter Property="Width"
          Value="18" />
            <Setter Property="Background">
                <Setter.Value>
                    <LinearGradientBrush StartPoint="0,0"
                           EndPoint="0,1">
                        <LinearGradientBrush.GradientStops>
                            <GradientStopCollection>
                                <GradientStop Color="{DynamicResource BorderLightColor}"
                          Offset="0.0" />
                                <GradientStop Color="{DynamicResource BorderDarkColor}"
                          Offset="1.0" />
                            </GradientStopCollection>
                        </LinearGradientBrush.GradientStops>
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Thumb}">
                        <Border Padding="{TemplateBinding Padding}"
                Background="Transparent">
                            <Rectangle HorizontalAlignment="Center"
                     Width="1"
                     Fill="{TemplateBinding Background}" />
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="BorderBrush">
                <Setter.Value>
                    <LinearGradientBrush EndPoint="0.5,1"
                           StartPoint="0.5,0">
                        <GradientStop Color="Black"
                      Offset="0" />
                        <GradientStop Color="White"
                      Offset="1" />
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="{x:Type GridViewColumnHeader}"
       TargetType="GridViewColumnHeader">
            <Setter Property="HorizontalContentAlignment"
          Value="Center" />
            <Setter Property="VerticalContentAlignment"
          Value="Center" />
            <Setter Property="Foreground"
          Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="GridViewColumnHeader">
                        <Grid>
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="CommonStates">
                                    <VisualState x:Name="Normal" />
                                    <VisualState x:Name="MouseOver">
                                    </VisualState>
                                    <VisualState x:Name="Pressed" />
                                    <VisualState x:Name="Disabled" />
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                            <Border x:Name="HeaderBorder"
                  BorderThickness="0,1,0,1"
                  Padding="0,0,0,0">
                                <Border.BorderBrush>
                                    <LinearGradientBrush StartPoint="0,0"
                                   EndPoint="0,1">
                                        <LinearGradientBrush.GradientStops>
                                            <GradientStopCollection>
                                                <GradientStop Color="{DynamicResource BorderLightColor}"
                                  Offset="0.0" />
                                                <GradientStop Color="{DynamicResource BorderDarkColor}"
                                  Offset="1.0" />
                                            </GradientStopCollection>
                                        </LinearGradientBrush.GradientStops>
                                    </LinearGradientBrush>

                                </Border.BorderBrush>

                                <ContentPresenter x:Name="HeaderContent"
                              Margin="0,0,0,1"
                              RecognizesAccessKey="True"
                              VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                              HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                              SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                            </Border>
                            <!--<Thumb x:Name="PART_HeaderGripper"
                 HorizontalAlignment="Right"
                 Margin="0,0,-9,0"
                 Style="{StaticResource GridViewColumnHeaderGripper}" />-->
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="Role"
             Value="Floating">
                    <Setter Property="Opacity"
              Value="0.7" />
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="GridViewColumnHeader">
                                <Canvas Name="PART_FloatingHeaderCanvas">
                                    <Rectangle Fill="#60000000"
                         Width="{TemplateBinding ActualWidth}"
                         Height="{TemplateBinding ActualHeight}" />
                                </Canvas>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Trigger>
                <Trigger Property="Role"
             Value="Padding">
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="GridViewColumnHeader">
                                <Border Name="HeaderBorder"
                    BorderThickness="0,1,0,1">
                                    <Border.Background>
                                        <SolidColorBrush Color="{DynamicResource ControlLightColor}" />
                                    </Border.Background>
                                    <Border.BorderBrush>
                                        <LinearGradientBrush StartPoint="0,0"
                                     EndPoint="0,1">
                                            <LinearGradientBrush.GradientStops>
                                                <GradientStopCollection>
                                                    <GradientStop Color="{DynamicResource BorderLightColor}"
                                    Offset="0.0" />
                                                    <GradientStop Color="{DynamicResource BorderDarkColor}"
                                    Offset="1.0" />
                                                </GradientStopCollection>
                                            </LinearGradientBrush.GradientStops>
                                        </LinearGradientBrush>
                                    </Border.BorderBrush>
                                </Border>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="{x:Type ListView}"
       TargetType="ListView">
            <Setter Property="SnapsToDevicePixels"
          Value="true" />
            <Setter Property="OverridesDefaultStyle"
          Value="true" />
            <Setter Property="ScrollViewer.HorizontalScrollBarVisibility"
          Value="Auto" />
            <Setter Property="ScrollViewer.VerticalScrollBarVisibility"
          Value="Auto" />
            <Setter Property="ScrollViewer.CanContentScroll"
          Value="true" />
            <Setter Property="VerticalContentAlignment"
          Value="Center" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListView">
                        <Border Name="Border"
                BorderThickness="10">
                            <Border.Background>
                                <SolidColorBrush Color="{StaticResource ControlLightColor}" />
                            </Border.Background>
                            <Border.BorderBrush>
                                <SolidColorBrush Color="{StaticResource BorderMediumColor}" />
                            </Border.BorderBrush>
                            <ScrollViewer Style="{DynamicResource
                        {x:Static GridView.GridViewScrollViewerStyleKey}}">
                                <ItemsPresenter />
                            </ScrollViewer>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsGrouping"
                   Value="true">
                                <Setter Property="ScrollViewer.CanContentScroll"
                    Value="false" />
                            </Trigger>
                            <Trigger Property="IsEnabled"
                   Value="false">
                                <Setter TargetName="Border"
                    Property="Background">
                                    <Setter.Value>
                                        <SolidColorBrush Color="{DynamicResource DisabledBorderLightColor}" />
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="{x:Type ListViewItem}"
       TargetType="ListViewItem">
            <Setter Property="SnapsToDevicePixels"
          Value="true" />
            <Setter Property="OverridesDefaultStyle"
          Value="true" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListBoxItem">
                        <Border x:Name="Border"
                Padding="0"
                SnapsToDevicePixels="true"
                Background="Transparent">
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="CommonStates">
                                    <VisualState x:Name="Normal" />
                                    <VisualState x:Name="MouseOver" />
                                    <VisualState x:Name="Disabled" />
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="SelectionStates">
                                    <VisualState x:Name="Unselected" />
                                    <VisualState x:Name="Selected">
                                        <!--<Storyboard>
                                            <ColorAnimationUsingKeyFrames Storyboard.TargetName="Border"
                                                Storyboard.TargetProperty="(Panel.Background).
                    (SolidColorBrush.Color)">
                                                <EasingColorKeyFrame KeyTime="0"
                                         Value="{StaticResource SelectedBackgroundColor}" />
                                            </ColorAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="SelectedUnfocused">
                                        <Storyboard>
                                            <ColorAnimationUsingKeyFrames Storyboard.TargetName="Border"
                                                Storyboard.TargetProperty="(Panel.Background).
                    (SolidColorBrush.Color)">
                                                <EasingColorKeyFrame KeyTime="0"
                                         Value="{StaticResource SelectedUnfocusedColor}" />
                                            </ColorAnimationUsingKeyFrames>
                                        </Storyboard>-->
                                    </VisualState>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                            <GridViewRowPresenter VerticalAlignment="{TemplateBinding VerticalContentAlignment}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="0">
                            </GridViewRowPresenter>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    <Grid>

        <ListView x:Name="listView">
            <ListView.View>
                <GridView AllowsColumnReorder="False">
                    <GridViewColumn Header="Xs" Width="150" x:Name="col1">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel Margin="0">
                                    <Line X1="0" X2="{Binding Width, ElementName=col1}" Stroke="Black" StrokeThickness="2"/>
                                    <!--<TextBlock Text="{Binding X}" Background="AntiqueWhite"/>-->
                                    <TextBlock Text="XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX" Background="AntiqueWhite"/>
                                </StackPanel>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Header="Ys" Width="150" x:Name="col2">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel>
                                    <Line X1="0" X2="{Binding Width, ElementName=col2}" Stroke="Black" StrokeThickness="2"/>
                                    <!--<TextBlock Text="{Binding Y}"/>-->
                                    <TextBlock Text="YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY"/>
                                </StackPanel>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Header="Xs" Width="150" x:Name="col3">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel>
                                    <Line X1="0" X2="{Binding Width, ElementName=col3}" Stroke="Black" StrokeThickness="2"/>
                                    <TextBlock Text="XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX" Background="AntiqueWhite"/>
                                </StackPanel>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Header="Ys" Width="150" x:Name="col4">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel>
                                    <Line X1="0" X2="{Binding Width, ElementName=col4}" Stroke="Black" StrokeThickness="2"/>
                                    <TextBlock Text="YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY"/>
                                </StackPanel>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Header="Delete">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <Button Content="Delete"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                </GridView>
            </ListView.View>
        </ListView>
    </Grid> 
```

代码隐藏是：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        listView.ItemsSource = new List<dynamic> { 
            new {X=5,Y=5},
        new {X=5,Y=5},
        new {X=5,Y=5},
        new {X=5,Y=5},new {X=5,Y=5},
        new {X=5,Y=5},
        new {X=5,Y=5},
        new {X=5,Y=5}};
    }
} 
```

所以集合很简单，而且 ListView 只为每个项目显示多个 X 和多个 Y 字符串。

这就是应用程序窗口在列之间有间隙的样子。

![在此处输入图像描述](../Images/e54307024398c9d930182de09d0fc6c7.png)

如何消除缝隙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:14:55.903

正如您在此[源代码](http://reflector.webtropy.com/default.aspx/Dotnetfx_Win7_3@5@1/Dotnetfx_Win7_3@5@1/3@5@1/DEVDIV/depot/DevDiv/releases/Orcas/NetFXw7/wpf/src/Framework/System/Windows/Controls/GridViewRowPresenter@cs/1/GridViewRowPresenter@cs)中看到的，这是`GridViewColumn`s 的默认边距。

```
private static readonly Thickness _defalutCellMargin = new Thickness(6, 0, 6, 0); 
```

此值在私有`CreateCell(GridViewColumn column)`方法中使用`GridViewRowPresenter`并且不能被覆盖。您唯一能做的就是在单元格模板中设置反向边距。

```
Margin="-6,0" 
```

也请参阅[此相关问题](https://stackoverflow.com/q/1351605/620360)。

# android - String1.equalsIgnoreCase(String2) 返回 false，即使两者具有相同的值

> ID：15275437
> 
> 赞同：1
> 
> 时间：2013-03-07T15:43:53.113
> 
> 标签：android, string, stream, equals

在我的应用程序中，我正在读取 HTTP 页面并通过以下方法将 Stream 转换为 String。

```
public static String convertStreamToString(java.io.InputStream is)
{
    java.util.Scanner s = new java.util.Scanner(is).useDelimiter("\\A"); 
    return s.hasNext() ? s.next() : "";
} 
```

但是，一旦我有了字符串，我将与另一个具有完全相同组件的字符串（在 eclipse 中手动创建）进行比较（这是从我的服务器上的同一 HTML 文件复制粘贴）。比较使我返回错误。

我正在使用 s1.equalsIgnoreCase(s2)。下面是我的 2 个字符串完全相同的图像。

![相同的字符串](../Images/5e805cc054b5bfe57e24dd114000f31e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:52:10.560

最有可能的是，您的字符串之一有一些空格，导致它们在比较时不相等。

`.trim()`在比较它们之前调用字符串应该可以解决这个问题。

# google-plus - Google+ 登录按钮 - 无法进行经过身份验证的呼叫

> ID：15275443
> 
> 赞同：0
> 
> 时间：2013-03-07T15:44:10.047
> 
> 标签：google-plus, google-oauth

我正在将新的 Google+[登录](https://developers.google.com/+/web/signin/)按钮添加到我的应用程序中，并且在进行经过身份验证的呼叫时遇到了一些问题。我已经包含了文档中描述的 html 和 javascript，并且登录有效。我什至可以看到访问令牌。但是，当我向经过身份验证的端点发出请求时，我会收到“无效凭据”响应。例如我正在尝试：

gapi.client.oauth2.userinfo.get().execute(function(resp){console.log(resp);});

如果我使用常规的 google oauth 方法 (gapi.auth.authorize())，我可以拨打这个电话。这里发生了什么？我究竟做错了什么？

我正在使用 google+ 按钮请求 userinfo.email 和 userinfo.profile 范围。

G+ 登录的 Html：

```
<span id="signinButton">
<span
 class="g-signin"
 data-callback="signinCallback"
 data-apppackagename="com.mypackage" 
 data-clientid="myclientID"
 data-cookiepolicy="single_host_origin"
 data-requestvisibleactions="http://schemas.google.com/AddActivity"
 data-scope="https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/devstorage.read_only https://www.googleapis.com/auth/plus.login"> 
```

包含用于 G+ 登录按钮的 js（就在之前）：

> (function() { var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true; po.src = 'https://apis.google.com/js/ client:plusone.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s); })();

G+ 按钮的回调：

```
function signinCallback(authResult) {
  if (authResult['access_token']) { 
    signin();
  } else if (authResult['error']) {
     console.log('There was an error: ' + authResult['error']);
  }
} 
```

请求用户资料：

```
gapi.client.oauth2.userinfo.get().execute(function(resp) {console.log(resp);}); 
```

该请求包括带有令牌的授权标头（通过 chrome 开发工具查看）。

更新：

我也尝试在即时模式下使用 gapi.auth.authorize() 。这不起作用并返回了空响应。当我在立即模式设置为 false 的情况下运行它时，我看到了授权提示（再次，在使用 g+ 按钮授权之后）。在此之后，我的授权电话起作用了。下面是我的代码：

```
gapi.auth.authorize({client_id: 'myClientID', scope: 'https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/devstorage.read_only',
                immediate: mode, response_type: 'token id_token'}, callback); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T02:31:25.300

我为您的用例构建了一个复制品，并将其记录在[这个要点](https://gist.github.com/silvolu/5113766)中，它对我来说很好用。其他一些注意事项：

*   如果您请求`plus.login`，则不应请求，`userinfo.profile`因为它包含在授权对话框中，`plus.login`并且会在授权对话框中创建重复权限。[您可以在文档的最佳实践](https://developers.google.com/+/best-practices)部分找到更多相关信息。

*   您应该 `data-apppackagename`仅用于为有效的 android 应用程序提供包，否则您可能会在身份验证对话框中触发 500 错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T16:11:31.473

首先要检查的是确保您正在请求 gapi.client.oauth2.userinfo 正在寻找的范围。您可以请求附加范围作为按钮的一部分。

使用 Chrome 之类的网络控制台查看是否有一个 Authorized: 标头与请求一起传递以及它可能是什么。如果未发送或未定义，则可能尚未设置令牌本身，在这种情况下，您可能需要使用 gapi.auth.setToken() 设置身份验证令牌，如[https://code.google.com中所述/p/google-api-javascript-client/wiki/ReferenceDocs](https://code.google.com/p/google-api-javascript-client/wiki/ReferenceDocs)或仅在具有相同范围的即时模式下调用 gapi.auth.authorize ，这应确保它获得令牌。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-10T13:30:04.687

我已经通过在 android xamarin 中使用 OAuth2Authenticator 完成了谷歌身份验证。步骤可能对您有所帮助。

1.在谷歌开发者控制台中注册为webapplication而不是安装的应用程序（android）*提供具有有效url（“ [http://abcd.com/xyz.aspx](http://abcd.com/xyz.aspx) ”）的重定向url，同样应该在应用程序代码中使用。

2.认证完成后会返回access_token

3.通过使用 access_token 发出 REST 请求以获取用户完整信息 ( [https://www.googleapis.com/oauth2/v1/userinfo?access_token=](https://www.googleapis.com/oauth2/v1/userinfo?access_token=) " + accessTokenValue + ".)

4.反序列化json响应以获取对象中的信息。在此处查看更多信息：[Android Xamarin 的 Google 帐户登录集成](https://stackoverflow.com/questions/25520180/google-account-login-integration-for-android-xamarin/25766256#25766256)

# url-shortener - goo.gl URL 的长度

> ID：15275445
> 
> 赞同：0
> 
> 时间：2013-03-07T15:44:14.690
> 
> 标签：url-shortener, goo.gl

我在我的应用程序中使用 goo.gl 链接缩短 API 将 URL 连同链接一起发送到 Twitter。我一直允许用户提交 119 个字符，附加一个空格，然后是 URL，因为我的印象是他们总是 19 个字符。这应该留给我一个备用。

不幸的是，我遇到了一些“tweet is too long”错误，而且我似乎找不到任何关于 goo.gl url 长度可能范围的文档。有谁知道最大值是多少或知道一些可靠的文档在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:46:30.250

Twitter 现在会自动缩短所有链接，使用`t.co`. 不要自己做。

阅读：[https ://dev.twitter.com/docs/tco-link-wrapper/faq#How_do_I_calculate_if_a_Tweet_with_a_link_is_going_to_be_over_140_characters_or_not](https://dev.twitter.com/docs/tco-link-wrapper/faq#How_do_I_calculate_if_a_Tweet_with_a_link_is_going_to_be_over_140_characters_or_not)

> 如果您不使用选择加入功能，则只有长度比 t.co URL 短的链接才会被 t.co 包装。所有 t.co-length 或更长的链接都应视为 t.co 的最大长度。例如，如果帮助/配置报告最大长度为 20 个字符，并且用户发布的链接长度为 125 个字符，则应将其视为 20 个字符长。如果他们发布一个 18 个字符长的链接，它仍然只有 18 个字符长。

目前`short_url_length`是平等的`22`（[https://api.twitter.com/1/help/configuration.json](https://api.twitter.com/1/help/configuration.json)）

# sql - 使用 DISTINCT 关键字会导致此错误：不是 SELECTed 表达式

> ID：15275447
> 
> 赞同：62
> 
> 时间：2013-03-07T15:44:15.657
> 
> 标签：sql, oracle, hibernate, oracle11g

我有一个看起来像这样的查询：

```
SELECT DISTINCT share.rooms
FROM Shares share
  left join share.rooms.buildingAdditions.buildings.buildingInfoses as bi
... //where clause omitted
ORDER BY share.rooms.floors.floorOrder, share.rooms.roomNumber,
         share.rooms.firstEffectiveAt, share.shareNumber, share.sharePercent 
```

这导致以下异常：

```
Caused by: org.hibernate.exception.SQLGrammarException: ORA-01791: not a SELECTed expression 
```

如果我删除 DISTINCT 关键字，则查询运行没有问题。如果我删除 order by 子句，查询将毫无问题地运行。不幸的是，我似乎无法获得没有重复的有序结果集。

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2013-03-07T15:48:19.083

您正在尝试使用未计算的列对结果进行排序。如果您没有`DISTINCT`那里，这不会是一个问题，但由于您的查询基本上只按`share.rooms`列分组，它如何将该结果集与其他可以具有多个值的列进行排序 `share.rooms`？

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-04-04T13:33:57.340

这篇文章有点旧，但我为解决这个错误所做的一件事是包装查询，然后像这样在外面应用订单。

```
SELECT COL
FROM (
   SELECT DISTINCT COL, ORDER_BY_COL
   FROM TABLE
   // ADD JOINS, WHERE CLAUSES, ETC.
) 
ORDER BY ORDER_BY_COL; 
```

希望这可以帮助 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-09T11:15:25.023

`DISTINCT`在具有 的查询中使用时，`ORDER BY`您必须选择您在`ORDER BY`语句中使用的所有列：

```
SELECT DISTINCT share.rooms.floors.floorOrder, share.rooms.roomNumber,
         share.rooms.firstEffectiveAt, share.shareNumber, share.sharePercent
...
ORDER BY share.rooms.floors.floorOrder, share.rooms.roomNumber,
         share.rooms.firstEffectiveAt, share.shareNumber, share.sharePercent 
```

# knockout-mvc - 在 HotTowel 模板中使用 KoGrid

> ID：15275450
> 
> 赞同：0
> 
> 时间：2013-03-07T15:44:26.840
> 
> 标签：knockout-mvc, kogrid, hottowel

我正在尝试在 HotTowel SPA 模板中的 HTML 视图中使用 KoGrid。我创建了一个简单的视图：

```
<section>
    <h2 class="page-title" data-bind="text: title"></h2>

    <div class="gridStyle" data-bind="koGrid: gridOptions"></div>
</section> 
```

并在JS中添加模型数据：

```
define(['services/logger'], function (logger) {
var vm = {
    activate: activate,
    title: 'My Grid'
};

return vm;

//#region Internal Methods
function activate() {
    var self = this;
    this.myData = ko.observableArray([{ name: "Moroni", age: 50 },
                                      { name: "Tiancum", age: 43 },
                                      { name: "Jacob", age: 27 },
                                      { name: "Nephi", age: 29 },
                                      { name: "Enos", age: 34 }]);
    this.gridOptions = { data: self.myData };
    return true;
}
//#endregion 
```

});

网格在页面上，但样式似乎完全错误地呈现宽度和位置，因此列彼此重叠，并且大多数数据明显不正确。KoGrid.css 文件被正确引用。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T12:14:29.983

问题的核心是“当 KOGrid 在 Durandal/HotTowel 中进行绑定时，KOGrid 元素还不是 DOM 的一部分”。您需要确保 KOGrid 在附加视图之前不会进行绑定。这可以通过以下方式实现：

1) 向视图模型添加一个新的可观察对象，以保存视图是否已被 durandal 附加的布尔值：

```
isAttachedToView = ko.observable(false) 
```

并暴露它

```
isAttachedToView: isAttachedToView 
```

2) 在调用 viewAttached 函数回调时更新它为真：

```
function viewAttached() {
    isAttachedToView(true);
    return true;
} 
```

3) 用 ko if 语句包围您的 HTML，以确保在附加视图之前不会评估该位 HTML（即 kogrid 不执行其绑定）：

```
<!-- ko if: isAttachedToView() -->
    <div data-bind="koGrid: { data: ...

<!-- /ko --> 
```

4) 在停用视图时将 isAttachedToView 重置为 false

```
function deactivate() {
    isAttachedToView(false);
} 
```

并揭露这一点：

```
deactivate: deactivate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T06:29:56.860

您可能已经弄清楚了这一点，但今天也面临同样的问题。快速浏览一下 chrome 检查器告诉我 koGrid 维度属性没有正确注册，这告诉我这是一个时间问题。我在[这里找到了与同一问题相关的已回答问题](https://stackoverflow.com/questions/15680588/integrate-the-kogrid-with-the-durandal-hottowel-template)。

我确实尝试了这个解决方案，但仍然需要做一些工作才能让它很好地发挥作用。我决定让 koGrid 错过，因为我真的不想要它的所有功能z :)

# excel - Excel 2010 - 条件格式设置多个单元格

> ID：15275452
> 
> 赞同：0
> 
> 时间：2013-03-07T15:44:28.503
> 
> 标签：excel, formatting, conditional

我在 Windows 7 上使用 Excel 2010

我在 A 列中有一个下拉菜单（要选择的选项是打开和关闭的），当我选择关闭选项时，我只希望该行中的特定单元格“变灰”。

不幸的是，我只知道一个格式化整行的公式，`(=INDIRECT("A"&ROW())="Closed")`但这对我不起作用，因为我只需要将特定单元格变灰而不是整行

请告知我可以应用于整个电子表格的正确公式。

包含打开、关闭下拉选项的单元格：A6 该行中需要格式化的相应单元格：`B6 D6 E6 G6 I6 J6 K6 M6 N6`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:25:11.837

将条件格式应用于第一个单元格，然后在条件格式规则管理器中，在应用于框中输入`=B6,D6,E6,G6,I6,J6,K6,M6,N6`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:04:44.600

`Ctrl`使用鼠标选择要应用条件格式的单元格。然后转到*主页*选项卡->*样式*->*条件格式*->*管理规则*-> 新规则_->*使用公式确定要形成哪些单元格*并应用此公式`=$A1="Closed"`。

这会将格式应用于选择中的所有内容。这`$A1`将确保第 1 行中的所有单元格检查 A 列。

如果您想稍后将格式应用于其他一些单元格，您可以在规则管理器中简单地调整它。

# drupal - 新闻内容 - 部分、小节、小节等

> ID：15275453
> 
> 赞同：0
> 
> 时间：2013-03-07T15:44:30.617
> 
> 标签：drupal, drupal-7

我们系统中的内容类型“新闻”可以有版块。部分可以有子部分。小节可以有小节等。我们的作者需要能够添加一个或多个节以及重新排序节或小节的能力。我是 Drupal 的新手，所以很难弄清楚如何创建内容类型和输入表单。有人可以提供与我的用例类似的指针（要查看的模块、书籍、视频、博客等）吗？

**更新：**

例如：

```
Article Title
 - Section 1
    - subsection 1
    - subsection 2
 - Section 2
    - subsection 1
    - subsection 2 
```

News 内容类型的结构类似于一本书的结构：

```
Article Title --> book title
 - Section 1  --> chapter title
    - subsection 1  --> section title
    - subsection 2  --> another section title
 - Section 2
    - subsection 1
    - subsection 2 
```

*   一本书可以有多个章节 --> 一篇新闻文章可以有很多部分
*   一个章节可以有多个部分 --> 一个新闻部分可以有多个子部分

我们的需求类似于books模块提供的功能，但是“书”、“章”、“页”等术语会让我们的编辑感到困惑；相反，我们需要诸如“文章标题”、“章节”等术语。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:04:16.817

什么是节？

假设它是另一种内容类型，您可以使用[Entity Reference](http://drupal.org/project/entityreference)。

实际上，这意味着您将拥有两种内容类型：

*   消息
*   新闻栏目

新闻部分将有一个节点引用字段，可以引用新闻和新闻部分内容类型。

要创建新闻项目的部分，您只需创建一个新闻部分节点，并将先前创建的新闻项目添加到节点引用字段。

每当您想添加子部分时，您都可以继续执行相同的操作，但在这种情况下，引用将是先前创建的新闻部分。

使用视图，调用新闻项目的各个部分和子部分将非常简单。

# java - 根据主要相似度计算字符串之间的相似度

> ID：15275461
> 
> 赞同：1
> 
> 时间：2013-03-07T15:44:45.640
> 
> 标签：java, string

我有两个这样的字符串：

```
String1: EnableAdvertResult 
String2:AdvertisementDel 
```

然后我像这样拆分它们：

```
 X[0]=Enable X[1]=Advert X[2]=Result

 Y[0]=Advertisement Y[1]=Del 
```

然后计算每对元素之间的相似度，如下所示：

```
sim(x[0],y[0])=a, 
sim(x[0],y[1])=b, 
sim(x[1],y[0])=c, 
sim(x[1],y[1])=d, 
sim(x[2],y[0])=e, 
sim(x[2],y[1])=f 
```

现在我想知道，根据上面的 sim 计算 string1 和 string2 之间相似度的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:47:55.307

它被称为 Levenshtein 距离。可以在 Levenshtein distance c# 找到 C# 代码。我相信你也可以找到java代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:51:08.853

您想要字符串之间的 Levenshtein 距离，这是在[Apache StringUtils](http://commons.apache.org/proper/commons-lang//apidocs/org/apache/commons/lang3/StringUtils.html#getLevenshteinDistance%28java.lang.CharSequence,%20java.lang.CharSequence%29)中实现的。我使用了 Apache 版本的 Levenshtein，效果很好。另请参阅有关字符串比较的[Stackoverflow 文章。](https://stackoverflow.com/questions/6629712/levensteindistance-commons-lang-3-0-api)

# php - 如何阻止IE8及以下？

> ID：15275463
> 
> 赞同：7
> 
> 时间：2013-03-07T15:44:49.420
> 
> 标签：php, javascript, jquery, codeigniter

我们刚刚完成了一个 Web 应用程序的开发，我们想要阻止 Internet Explorer 8 及以下版本。实现这一目标的最佳方法是什么？

我找到了阻止 IE6 的方法，但是教程（[http://css-tricks.com/ie-6-blocker-script/](http://css-tricks.com/ie-6-blocker-script/)）是 2008 年的，我觉得它有点过时了。我们还想阻止 IE 7 和 8...

该站点使用 CodeIgniter 构建，包含大量 Backbone.js。

如果有人有任何想法，他们将不胜感激。

谢谢！

**更新**

抱歉，伙计们，更多信息：是的，我想阻止他们，我想显示一条消息并能够设置页面样式，以显示“抱歉，您使用的 Internet Explorer 不是网络浏览器，请在此处下载 CHROME”。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-07T15:53:44.483

使用 CSS 和条件注释来完成。

```
<head>
    <!--[if IE lte 8]>
    <link rel="stylehseet" type="text/css" href="blockIE.css" />
    <[endif]-->
</head> 
<body>
    <div class="yourcontent">
        ...
    </div>
    <div class="notification">
        <h1>Sorry, we don't support your old browsers</h1>
    </div>
</body> 
```

CSS：

```
body * { display: none }
.notification { display: block; } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-07T15:50:53.193

您也可以使用 CodeIgniter， [https: //www.codeigniter.com/user_guide/libraries/user_agent.html](https://www.codeigniter.com/user_guide/libraries/user_agent.html)

就像是：

```
$this->load->library('user_agent');
if ($this->agent->browser() == 'Internet Explorer' && $this->agent->version() <= 8){
    //Redirect or show error
} 
```

（也在这里回答：[代码点火器 - 检测浏览器的最佳方法](https://stackoverflow.com/questions/10242327/code-igniter-best-way-to-detect-brower)）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T15:55:56.513

这会检查 IE 8 及更低版本的浏览器。它用于<head>

```
<!--[if lte IE 8]>
    <meta http-equiv="refresh" content="0; url=http://www.google.com" />
    <script type="text/javascript">
        window.top.location = 'http://www.google.com';
    </script>
<![endif]--> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T15:48:28.457

你可以使用 jQuery 来做到这一点：

```
//if its internet explorer...
if(jQuery.browser.msie){
     //getting the version
     if($.browser.version < 8){
         //do whatever
     }
} 
```

[更多信息。](http://api.jquery.com/jQuery.browser/)

**更新**

正如评论所指出的，不推荐使用此功能。你应该看看这个： [How to detect IE7 and IE8 using jQuery.support](https://stackoverflow.com/questions/8890460/how-to-detect-ie7-and-ie8-using-jquery-support)

**更新 2**

您也可以使用[此处指出的 PHP 来执行此操作。](http://www.davidwells.tv/how-to-detect-specific-versions-of-internet-explorer-in-php-and-show-different-fallback-content/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T15:53:56.310

```
<!--[if lt IE 9]>
    <!-- Some div saying sorry or calling js function or whatever -->
<![endif]-->
<!--[if lte IE 8]>
    <!-- Some div saying sorry or calling js function or whatever -->
<![endif]--> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-11T08:48:00.057

您可以使用 htaccess 来阻止 MSIE

```
<IfModule mod_rewrite.c> 
RewriteEngine On 
RewriteBase / 

RewriteCond %{HTTP_USER_AGENT} MSIE 
RewriteCond %{REQUEST_FILENAME} !ban_ie.php 
RewriteRule .* /ban_ie.php [L] 

RewriteCond %{HTTP_USER_AGENT} MSIE 
RewriteCond %{REQUEST_FILENAME} !ban_ie.php 
RewriteRule .* /ban_ie.php [L] 
</IfModule> 
```

或者你可以使用 php 脚本

```
<?php
ob_start();
?>
<html>
<head>
<style type="text/css">
* {
margin:0;
padding:0;
height:100%;
}
#mydiv {
position:absolute;
width:400px;
height:90px;
text-align:center;
top:50%;
left:50%;
margin-top:-40px;
margin-left:-200px;
border:solid 2px red;
padding-top:30px;
background:#ffff00;
font-weight:bold;
}
</style>
</head>
<body>
<div id="mydiv">
<?php
$browser = $_SERVER['HTTP_USER_AGENT'];
if(strstr($browser, "MSIE"))
{
   echo"BG: Свалете си Mozilla Firefox за да влезнете в сайта  EN: Download Mozilla Firefox to enter website <br /> <b><a href='http://www.mozilla.com/en-US/firefox/'>Mozilla Firefox</a></b>";
}
elseif (strstr($browser, "Opera"))
{
   echo"Свалете си мозилла <br /> <b><a href='http://www.mozilla.com/en-US/firefox/'>Mozilla Firefox</a></b>";
}
else {
   header("Location: http://muonline-bg.eu/");
}
?>
</div>
</body>
</html> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-02-21T22:26:57.090

我相信避免与页面代码的其他部分发生冲突的最快和最安全的方法是......

```
<html>
<head>
<!--[if IE lte 8]><script>location.href="my_message.html";</script><[endif]-->
<!--your other head code-->    
</head>
<body>
<!--your body code-->
</body>
</html> 
```

# java - GWT 服务器<->客户端消息总线？

> ID：15275464
> 
> 赞同：0
> 
> 时间：2013-03-07T15:44:52.347
> 
> 标签：java, gwt, event-handling, websocket, asyncsocket

例如，Errai 提供了一个。是否有任何其他解决方案提供事件总线实现，允许客户端从服务器接收*实时*事件并与服务器共享客户端事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:13:45.663

找到了一个可以匹配我一直在寻找的 gwt 库：

[http://code.google.com/p/gwt-comet/](http://code.google.com/p/gwt-comet/)

例子：

[GWT 中 gwt-comet 的基本使用](https://stackoverflow.com/questions/6006162/basic-use-of-gwt-comet-for-gwt)

但 gwt-comet 似乎自 2011 年 5 月以来就无人维护。许多开放的错误报告和存储库中没有任何更改。没有 Maven 集成。

类似的讨论：

[如何将 GWT 连接到 CometD/Bayeux 事件？](https://stackoverflow.com/questions/1899925/how-can-i-connect-gwt-to-cometd-bayeux-events)

使用 github.com 上现有的 cometd 实现的替代方法：

[http://code.google.com/p/cometd4gwt/](http://code.google.com/p/cometd4gwt/)

它没有 maven ingration，讨论组仅包含 4 个线程。

似乎[http://code.google.com/p/gwteventservice/](http://code.google.com/p/gwteventservice/)是目前唯一合适的解决方案，因为它有 maven 支持，大多数问题已经解决，最后一次 svn 提交是在 2012 年 12 月。

JIRA 对 cometd GWT 集成的请求：http: [//bugs.cometd.org/browse/COMETD-63](http://bugs.cometd.org/browse/COMETD-63)

# jquery - jQuery 错误。当我在萤火虫中调试时，我收到此错误：

> ID：15275465
> 
> 赞同：0
> 
> 时间：2013-03-07T15:44:54.823
> 
> 标签：jquery, firebug

我的代码：

```
var custID = <?php echo htmlentities( $_GET['custID'] ); ?>; 
```

我在萤火虫中收到错误：

```
SyntaxError: syntax error [Break On This Error]       var custID = <br /> 
```

请注意：我没有传递参数 custID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:46:51.090

如果使用，您需要将其指定为字符串`htmlentities()`：

```
var custID = '<?php echo htmlentities( $_GET['custID'] ); ?>'; 
```

还值得注意的是，您可能需要在字符串中添加斜杠以防止它脱离 JS 中的文字：

```
var custID = '<?php echo addslashes(htmlentities( $_GET['custID'] )); ?>'; 
```

# java - Java中奇怪的类型不匹配问题

> ID：15275467
> 
> 赞同：0
> 
> 时间：2013-03-07T15:44:59.087
> 
> 标签：java, android, inheritance

在Java Android中我有这种情况：

我的活动.java

```
public class SectionPagerAdapter extends FragmentPagerAdapter {
[...]
Fragment fragment = new myFragment();
[...]
} 
```

myFragment 在哪里：

```
public class myFragment extends Fragment {
[...]
} 
```

现在，如果`myFragment`在`MyActivity.java`文件中声明一切正常并且代码编译；如果我`myFragment`在另一个文件中声明（`myFragment.java`）我得到“ `Type mismatch: cannot convert from myFragment to Fragment`”......为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:52:07.103

很可能您已经`android.app.Fragment`在一种情况下和`android.support.v4.app.Fragment`另一种情况下进行了扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:49:53.057

确保您在两个地方都导入了正确的片段。定义 myFragment 的文件以及 MyActvity 中的文件。

# c# - 从 ASP.net 中的用户控件访问页面上的文本框

> ID：15275468
> 
> 赞同：10
> 
> 时间：2013-03-07T15:45:01.437
> 
> 标签：c#, asp.net, user-controls

我有一些页面略有不同，但都有相同的“操作按钮”，为每个页面执行相同的任务。我没有复制代码，而是制作了一个用户控件，其中包含执行操作的按钮 - 但有一个操作我似乎无法执行。

每个页面都有一个文本框（不在用户控件内，因为它位于页面的不同位置）。当我单击“保存评论”按钮（位于用户控件中）时，我似乎无法访问文本框中的文本。

我试过使用这样的东西：

```
TextBox txtComments = (TextBox)this.Parent.FindControl("txtComments");
SaveChanges(txtComments.Text); 
```

...但是 txtComments 返回为空。

所以，我想知道这是否可能，或者是否有更好的方法来做我想做的事情？

**编辑：**文本框位于原始页面的占位符中...

**编辑 2：**发布缩小的解决方案 - 仍然无法解决这个问题。

**编辑 3：**删除了节省空间的解决方案 - 解决了问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T14:54:11.147

我的解决方案最终变得非常简单......

```
TextBox txt = this.Parent.Parent.FindControl("ContentPlaceHolder2").FindControl("TextBox1") as TextBox;
if (txt != null) Label1.Text = txt.Text; 
```

我之前出错的地方是我使用了错误的 ContentPlaceHolder ID。我在页面中使用占位符的 ID，而不是母版页中的 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T15:48:02.170

使用由服务器端控件的公共基础[`Page`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.page.aspx)公开的属性。[`WebControl`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.webcontrol.aspx)

您甚至可以将实例转换为特定页面类型并直接访问控件（如果范围允许），而不是使用`FindControl`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T17:04:03.390

回顾一下这种情况-您需要从子控件对页面上的控件执行 FindControl，但是-

1.  您的项目有一个 MasterPage，在这种情况下`this.Page`似乎不起作用，我们`this.Parent`改用
2.  您的“目标”控件位于 PlaceHolder 内部，而 PlaceHolder 本身位于 ContentPlaceHolder 内部，因此它并不像刚才那样简单`this.Parent.FindControl()`
3.  试图查找“目标”控件的子 ASCX 控件（在本例中为文本框）实际上位于另一个 ContentPlaceHolder 中，因此 this.Parent.Parent 或其他任何内容都不起作用。

由于您在我最初`this.Parent`的回答之后提到控件彼此位于不同的 ContentPlaceHolder 中，并且在另一个子控件中，因此您的查询有点复杂。

基于这些标准，以及您至少知道包含（其中某处）您的目标 TextBox 的 contentPlaceHolder 控件这一事实，下面是我编写的一些代码，适用于新的 ASP.net Web 窗体应用程序：

它递归地检查您传递给它的 ContentPlaceHolder 的控件集合，并找到您的控件。

只需传递 ControlID 和 ContentPlaceHolderID，它就会递归地找到它。

这段代码用相同的项目替换了我下面的原始代码，位于 ChildControl.ascx.cs 文件内：

使用系统；使用 System.Web.UI；使用 System.Web.UI.WebControls；使用 System.Linq；使用 System.Collections.Generic；

```
namespace FindControlTest
{
    public partial class ChildControl : System.Web.UI.UserControl
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            var textBoxTest = FindControlInContentPlaceHolder("TextBoxTest", "FeaturedContent") as TextBox;

            Response.Write(textBoxTest.Text);
            Response.End();
        }

        private Control FindControlInContentPlaceHolder(string controlID, string contentPlaceHolderID)
        {
            if (null == this.Page ||
                null == this.Page.Master)
            {
                return null;
            }

            var contentPlaceHolder = this.Page.Master.FindControl(contentPlaceHolderID);
            var control = getChildControl(controlID, contentPlaceHolder);
            return control;
        }

        private Control getChildControl(string controlID, Control currentControl)
        {
            if (currentControl.HasControls())
            {
                foreach(Control childControl in currentControl.Controls)
                {
                    var foundControl = childControl.FindControl(controlID);
                    if (null != foundControl)
                    {
                        return foundControl;
                    }
                    else
                    {
                        return getChildControl(controlID, childControl);
                    }
                }
            }

            return null;
        }
    }
} 
```

**笔记：**

我在一些事件中尝试了这个，甚至在 Init() 上我也能够获得 TextBox 值如果您看到 null，则可能是由于传递了不正确的 ID 或我尚未遇到的情况。如果您使用附加信息编辑您的问题（因为已经有很多信息）并显示什么变量为空，则可以解决。

请注意，我在 MasterPage 中添加了一些复杂性，例如 Panel 中的 PlaceHolder，然后将 ContentPlaceHolder 放在那里，代码仍然有效。我什至为 .net 4.5、4.0、3.5 和 3.0 进行了编译，我认为 FindControl 与 MasterPages 的工作方式可能不同，但它仍然每次都能工作。如果您仍然得到空值，您可能需要发布一些额外的标记。

**测试项目的其余部分**

页面（基于默认 MasterPage）

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="FindControlTest._Default" %>
<%@ Register TagName="ChildControl" TagPrefix="uc1" Src="~/ChildControl.ascx" %>

<asp:Content runat="server" ContentPlaceHolderID="FeaturedContent">

    <asp:PlaceHolder ID="PlaceHolderTest" runat="server">
        <asp:TextBox ID="TextBoxTest" Text="Hello!" runat="server"/>
    </asp:PlaceHolder>

</asp:Content>
<asp:Content ContentPlaceHolderID="MainContent" runat="server">

    <uc1:ChildControl id="ChildControlTest" runat="server" />

</asp:Content> 
```

我添加了一个名为 ChildControl.ascx 的控件，其中只有这个：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="ChildControl.ascx.cs" Inherits="FindControlTest.ChildControl" %>
Hello child! 
```

结果是“你好！” 在页面上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-08T06:41:43.667

如果您想将代码隐藏中的文本框属性作为智能属性访问，只需将其设置为用户控件中的字符串属性即可。

```
1\. In the user control, create a public string property that returns textbox string value..

public string MyText
{
get
{
return txt1.Text;
}
}

2\. Register the user control on the page

<%@ Register TagPrefix="uc" TagName="MyControl" Src="~/mycontrol.ascx" />

and declare it..

<uc:MyControl ID="control1" runat="server" />

3\. From the codebehind now you can read the property..

Response.Write(control1.MyText);

Hope it helps

Thanks... 
```

# mysql - 使用按列分组的递增值更新表

> ID：15275469
> 
> 赞同：3
> 
> 时间：2013-03-07T15:45:02.310
> 
> 标签：mysql

我在 MySQL 中有一个自引用表

```
Posts
 postId
 FK_PostId
 idx 
```

idx 值当前为 0，但我需要更新它们，以便每个 postId 每个 FK_PostId 都有一个递增的值。简单但非功能性地写成

```
update idx = idx + 1 where FK_PostId is not null order by postId group by FK_PostID 
```

期望的结果

```
postId 15 FK_PostId 4 idx 0
postId 16 FK_PostId 4 idx 1
postId 17 FK_PostId 4 idx 2
postId 18 FK_PostId 4 idx 3
postId 24 FK_PostId 4 idx 4
postId 32 FK_PostId 50 idx 0
postId 35 FK_PostId 50 idx 1 
```

我似乎无法为此进行智能查询。谁能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T16:01:07.290

这似乎可以解决问题

```
UPDATE WallPost p,

(   SELECT  @r:= IF(@u = FK_PostID, @r + 1,0) AS ROWNUM,
                postID,
                FK_PostID,
                @u:= FK_postID
        FROM    WallPost,
                (SELECT @i:= 1) AS r,
                (SELECT @u:= 0) AS u
        WHERE FK_PostID is not null
        ORDER BY FK_PostID, idx, postID
    ) AS s
set p.idx = s.ROWNUM
where p.postId = s.postId; 
```

基于此处的解决方案： [查询以添加基于 GROUP BY 的增量字段](https://stackoverflow.com/questions/10980957/query-to-add-incremental-field-based-on-group-by)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:51:38.307

```
mysql> set @f := null;
mysql> UPDATE Posts 
    SET
      idx = IF(FK_postId = @f, @i := @i+1, @i := 1), 
      FK_postId = (@f := FK_postId) 
    ORDER BY FK_postId, postId; 
```

# android - 使用 android 在移动设备上浮动 iframe

> ID：15275473
> 
> 赞同：1
> 
> 时间：2013-03-07T15:45:08.903
> 
> 标签：android, mobile, iframe, floating

我在使用 android 的移动设备上遇到了 iframe 的一些问题。看来，iframe 正在输入我的 css 文件中的所有内容，甚至直接设置样式。它只是将自己放在所有内容的左上角。没有什么能帮助我把它从那个地方弄出来，而不是边距、绝对位置或其他任何东西。即使我用 div 将该 iframe 包装到该 div 的绝对位置，也没有任何变化。

有谁不知道，这能做什么？

# android - Android - 将具有更新权限的新 APK 上传到已发布的应用程序

> ID：15275474
> 
> 赞同：14
> 
> 时间：2013-03-07T15:45:10.577
> 
> 标签：android, google-play

因此，在启用计费的情况下，我无法将新的 APK 上传到 Play 商店。

目前我有一个已发布的付费应用程序，我想将其更改为订阅应用程序，以便用户获得年度订阅，从而获得应用程序的最新数据。

现在我的问题是开发者控制台不允许我上传启用了计费权限的草稿 APK。我登录开发控制台，转到 APK，从简单模式更改为高级模式，将我的新 APK 保存为草稿，上传后出现以下错误：

```
This configuration cannot be published for the following reason(s):

All devices that might receive version 1 would receive version 2.

Some devices are eligible to run multiple APKs. In such a scenario, the device will receive the APK with the higher version code. 
```

我将版本代码和版本号更新为比当前版本号高一，以及仅增加两个值之一的不同组合，但仍然没有成功。

该应用程序正在使用相同的密钥库进行签名。

谢谢， 曼

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-07T18:34:05.707

现在弄清楚这实际上意味着什么。基本上它只是告诉我，我需要存档当前的 apk 才能真正发布新的 apk。新的 apk 已成功添加为草稿。这条消息的措辞有点尴尬，实际上意味着为了发布第 2 版，第 1 版必须存档，而不是我执行的保存草稿有任何问题。

谢谢，德曼

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-04T15:11:07.990

是的，您所要做的就是禁用旧的应用程序，然后发布按钮将可用于推送左上角区域，以便发布您的新 APK

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T15:57:19.587

您是否禁用了您的第一个版本？默认情况下，在高级模式下上传后，您的第一个和第二个版本都被激活。在我看来，这只是说您有 2 个 APK 处于活动状态，它们将到达相同的设备，因此这 2 个中的一个是无用的。

# .net - 普通的 WSDL 是否具有像 SOAP 地址这样的私有 IP 地址？

> ID：15275476
> 
> 赞同：0
> 
> 时间：2013-03-07T15:45:12.987
> 
> 标签：.net, perl, wsdl, biztalk, nusoap

我想通过 Internet 向 .NET webservice 发送请求，但问题是 WSDL 中的 SOAP 地址有一个私有 IP 地址：

```
<soap:address location="http://10.10.1.1/xxxxx/yyyyyyyyyy.asmx" /> 
```

当我尝试发送一些请求时，例如使用 PHP 和 NuSOAP，我在这个位置收到错误：

> HTTP 错误：无法打开与服务器的套接字连接`http://10.10.1.1/xxxxx/yyyyyyyyyy.asmx`，错误 (110)：连接超时

这是正常的吗？另一方面，它正在使用 BizTalk，我认为他们不知道如何解决它。

我更喜欢类似`SOAP::Lite`or的 Perl 解决方案`SOAP::XML::Client::DotNet`，但我认为像 NuSOAP 这样的解决方案会比 Perl 解决方案更容易。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:51:03.363

WSDL 已通过浏览器内置在本地机器中。如果您输入 url，您可以在 Asp.Net 中访问 WSDL

```
http://10.10.1.1/xxxxx/yyyyyyyyyy.asmx?WSDL 
```

端点可以更改，您应该在调用 Web 服务时，在放置凭据之后或之前放置特定的 url

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:52:23.810

正如 doterob 所建议的那样，BizTalk 需要将 Web 服务公开到 Internet，以便您能够访问 WSDL 并使用它。这样做时，他们会暴露一个面向互联网的地址（例如[http://web-service.biztalk.com/service.asmx?wsdl](http://web-service.biztalk.com/service.asmx?wsdl)）

获得 WSDL 的副本后，创建一条可供 Web 服务使用的消息，并将您的应用程序配置为使用面向 Internet 的地址用于 Web 服务。包含在 WSDL 中的本地网络地址 (10.10.1.1) 假定您将使用来自 LAN 的服务，而不是外部网络（即互联网）。

我不会在这里讨论将 BizTalk Web 服务粘贴在 Internet 上的安全隐患，但这当然不是推荐的最佳做法！但是，我建议至少使用基于证书的身份验证来保护 Web 服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T09:51:38.207

我已经使用[XML::Compile::WSDL11](http://search.cpan.org/~markov/XML-Compile-SOAP-2.35/lib/XML/Compile/WSDL11.pod)将端点从私有地址更改为公共地址。

像这样的东西：

```
my $wsdlfile = XML::LibXML->new->parse_file("http://$publicIP/wsdl");
my $wsdl = XML::Compile::WSDL11->new($wsdlfile);
my $call = $wsdl->compileClient(
    'operation',
    server => $publicIP # This change the server address to a specified address
); 
```

# android - 卡尔曼滤波器 - 指南针和陀螺仪

> ID：15275477
> 
> 赞同：5
> 
> 时间：2013-03-07T15:45:14.570
> 
> 标签：android, kalman-filter

我正在尝试用陀螺仪、加速度计和磁力计构建指南针。

我将 acc 值与 magnometer 值融合以获取方向（使用旋转矩阵），它工作得很好。

但是现在我想添加陀螺仪来帮助补偿磁传感器不准确的情况。所以我想使用卡尔曼滤波器来融合这两个结果并得到一个很好的过滤结果（acc 和 mag 已经使用 lpf 过滤了）。

我的矩阵是：

```
 state(Xk) => {Compass Heading, Rate from the gyro in that axis}.
 transition(Fk) => {{1,dt},{0,1}}
 measurement(Zk) => {Compass Heading, Rate from the gyro in that axis}
 Hk => {{1,0},{0,1}}
 Qk = > {0,0},{0,0}
 Rk => {e^2(compass),0},{0,e^2(gyro)} 
```

这是我的卡尔曼滤波器实现：

```
public class KalmanFilter {

private Matrix x,F,Q,P,H,K,R;
private Matrix y,s;

public KalmanFilter(){
}

public void setInitialState(Matrix _x, Matrix _p){
    this.x = _x;
    this.P = _p;
}

public void update(Matrix z){
    try {
        y = MatrixMath.subtract(z, MatrixMath.multiply(H, x));
        s = MatrixMath.add(MatrixMath.multiply(MatrixMath.multiply(H, P), 
                        MatrixMath.transpose(H)), R);
        K = MatrixMath.multiply(MatrixMath.multiply(P, H), MatrixMath.inverse(s));
        x = MatrixMath.add(x, MatrixMath.multiply(K, y));
        P = MatrixMath.subtract(P, 
                        MatrixMath.multiply(MatrixMath.multiply(K, H), P));
    } catch (IllegalDimensionException e) {
        e.printStackTrace();
    } catch (NoSquareException e) {
        e.printStackTrace();
    }
    predict();
}

private void predict(){
    try {
        x = MatrixMath.multiply(F, x);
        P = MatrixMath.add(Q, MatrixMath.multiply(MatrixMath.multiply(F, P), 
                        MatrixMath.transpose(F)));
    } catch (IllegalDimensionException e) {
        e.printStackTrace();
    }
}

public Matrix getStateMatirx(){
    return x;
}

public Matrix getCovarianceMatrix(){
    return P;
}

public void setMeasurementMatrix(Matrix h){
    this.H = h;
}

public void setProcessNoiseMatrix(Matrix q){
    this.Q = q;
}

public void setMeasurementNoiseMatrix(Matrix r){
    this.R = r;
}

public void setTransformationMatrix(Matrix f){
    this.F = f;
}
} 
```

首先给出这个起始值：

```
 Xk => {0,0}
 Pk => {1000,0},{0,1000} 
```

然后我观察两个结果（卡尔曼一号和罗盘一号）。卡尔曼一号从 0 开始并以某种速度增加，无论测量的一（罗盘）如何，它都不会停止，只是继续增加......

我不明白我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-11-16T21:27:01.417

您看到的问题是，虽然陀螺仪的噪声非常低，但它不是零均值。当您使用您的术语时，您正在实施一个过滤器，您`e^2(gyro)`声称 事实更像是即使偏置也有一些术语（主要是静态开启偏置加上由温度漂移引起的偏置偏移）。结果，您正在整合偏见并不断旋转。`z_gyro = true_gyro + v``v ~ N(0, e^2)``v ~ N(bias, e^2)`

如果您校准该偏差（仅在静止时测量陀螺仪的输出），那么您可以调用`update(imu - bias)`而不是仅调用`update(imu)`. 您可能必须增加`e^2(gyro)`以考虑偏差的变化，但不像您试图考虑所有偏差那样多（未补偿的偏差将变成`R`与磁力计和陀螺仪项成比例的固定航向位移）。

最好的方法是将偏差添加到您的状态向量中。您会得到类似 的信息`Hk = {{1,0,0},{0,1,1}}`，这意味着您预测的陀螺仪测量值是真实速率加上您的偏差项。卡尔曼滤波器的神奇之处在于，即使您说过您的测量只是两项之和，但它们在几个关键方面是不同的：

*   航向与`F`实际转弯率（由）相关，因此每次更新时`dt`，状态协方差都会演变出与航向和转弯率相关的非对角项。`P``P`
*   同样，`H`您已经描述了偏差和陀螺仪速率之间的关系，它表达了“要么我转得更快，要么我有更多偏差”的想法，因此过滤器更新状态以根据噪声协方差平衡这两种可能性。
*   在`Q`中，必须将转弯速率过程噪声设置得相当高，以说明您正在测量的任何意外运动。但是`Q`for 偏差要小得多，因为偏差不会很快演变（实际上，最好的模型可能是一阶高斯-马尔可夫过程，我不会在这里解释，除了扔掉另一个有用的谷歌术语“有限的内存过滤器”）。在极限情况下，您可以`Q`将偏差项想象为 0（将偏差建模为*随机常数*），但这在 EKF 中的数值上不能很好地工作，并且由于偏差漂移而不是严格正确的。
*   同样，系统的初始`P_0`偏差项（其总可能范围记录在数据表中）比完全未知的航向/角速度要小得多。
*   在多轴系统中，偏差总是随轴移动（这是硬件的一个属性，与它的方向无关）但是陀螺仪对像“航向”这样的状态的影响由于捷联而被旋转惯性测量单元。

看着 EKF “学习” 像陀螺仪偏差这样的值对我来说比预测其他状态更神奇。

# python - 如何在 constrOptim() 中设置多个起始值

> ID：15275479
> 
> 赞同：3
> 
> 时间：2013-03-07T15:45:20.563
> 
> 标签：python, r, statistics, mathematical-optimization, stata

我正在尝试使用 R 中的约束最大似然估计几个参数，更具体地说，`constrOptim()` 来自 R 中的 stata 包。我正在使用 Python 编程并通过 RPy2 使用 R。

在我的模型中，我假设数据遵循 Beta 分布，因此我使用预先指定的参数值创建了一个模拟数据集，现在我正在尝试估计这些参数以验证我的估计程序是否正常工作。

我观察到的是，我的估计对初始参数非常敏感。例如，我有 11 个要估计的参数（我们将这些参数称为 pam1..pam11），它们的真实值是：

```
pam1=0.2  pam2=0.3  pam3=0.4  pam4=0.7 pam5=0.55  pam6=0.45  pam7=0.1  pam8=0.01 pam9=0.01 pam10=45 pam11=45 
```

在`constrOptim()`我将启动参数设置为：

start_param=FloatVector((pam1,pam2,pam3,pam4,pam5,pam6,pam7,pam8,pam9,pam10,pam,11))

我在哪里设置起始值。我观察到，当我使用不同的起始值集时，结果会发生变化。例如，当我使用 set

```
start_param=FloatVector((0.2,0.3,0.4,0.6,0.7,0.8,0.3,0.011,0.011,15,15)) 
```

我得到以下估计

```
$par

 [1]  0.20851065  0.30348571  0.43616932  0.73695654  0.58287221 
0.45541506

 [7]  0.11191879  0.02233908  0.01988878 46.57249043 45.48544918

$value

[1] -215.9711

$convergence

[1] 0 
```

但是当我使用另一组时，例如：

```
start_param=FloatVector((0.2,0.3,0.4,0.75,0.55,0.45,0.3,0.05,0.05,59,59)) 
```

结果发生了变化，似乎我正在失去收敛

```
$par

[1]  0.17218738  0.27165359  0.48458978  0.80295773  0.62618983  0.43254786

[7]  0.12426385  0.02991442  0.01853252 57.78269692 59.35376216

$value

[1] -146.9858

$convergence

[1] 1 
```

我的问题如下：我在Stata中看到，有一个选项可以为数值优化算法搜索更好的起始值。我尝试通过设置矩阵来设置多个起始值，但这不起作用。有没有一个选项`constrOptim`可以让我做这样的事情？

提前谢谢了。

有关其他信息，我使用的规范`constrOptim()`是：

```
res=statsr.constrOptim(start_param,Rmaxlikelihood,grad='NULL',ui=ui,ci=ci,method="Nelder-Mead",control=list("maxit=3000,trace=F")) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-09T16:08:42.917

我在 R 中遇到了一个函数，它完全符合我的要求。包“Rsolnp”具有函数“gosolnp”，该函数被描述为执行 solnp 求解器的随机初始化和多次重启。

它非常有效，文档提供了有关如何使用它的示例。

更多：[http ://cran.r-project.org/web/packages/Rsolnp/Rsolnp.pdf](http://cran.r-project.org/web/packages/Rsolnp/Rsolnp.pdf)

# iphone - monotouch iphone以编程方式转到手机主屏幕

> ID：15275481
> 
> 赞同：0
> 
> 时间：2013-03-07T15:45:21.610
> 
> 标签：iphone, xamarin.ios

我进行了很多搜索，但没有找到如何以编程方式将应用程序带到后台，以便显示手机的主屏幕。我不想终止应用程序，而只是以编程方式按下 HOME 按钮。有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:48:50.950

不幸的是，iOS 中没有后台模式，应用程序在失焦时仍然可以运行。Apple 将系统设计为“暂停”应用程序以保留状态，但请注意应用程序可能随时终止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T15:49:04.007

不，很遗憾没有。没有公共 API 允许您将用户发送回主屏幕。

如这些问题所示：

*   [iPhone - 将应用程序发送到后台](https://stackoverflow.com/questions/9754601/iphone-sending-the-app-to-the-background)
*   [将应用程序发送到后台进程](https://stackoverflow.com/questions/9970221/send-app-to-background-process)
*   [在iphone上将应用程序发送到后台](https://stackoverflow.com/questions/3584999/sending-application-to-background-on-iphone)
*   [以编程方式将 iOS 应用程序发送到后台](https://stackoverflow.com/questions/15051131/programmatically-sending-an-ios-app-to-background)

布拉德·拉尔森对这个问题的答案提供了详细的解释：

*   [暂停申请](https://stackoverflow.com/questions/5360846/suspend-the-application)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T20:07:50.883

您可以通过调用私有 API 来执行此操作，但请注意，如上所述，Apple 不允许在 AppStore 应用程序上执行此操作。

```
var x = UIApplication.SharedApplication;
x.PerformSelector (sel: new MonoTouch.ObjCRuntime.Selector ("suspend"), obj: x, delay: 5); 
```

# r - 在 R 推断器中组合/合并变量的因子

> ID：15275494
> 
> 赞同：0
> 
> 时间：2013-03-07T11:52:53.817
> 
> 标签：r, user-interface

只是为了好奇...

我正在使用具有三个因子级别的变量在 R Deducer 中创建一个列联表，例如*是、否、未定，*但我想知道是否有一种组合两个级别的 Gui 方法，所以会有例如已*决定、未定*？我刚刚下载了 Deducer，它看起来不错（我有点迷茫）但我很想知道在不离开程序并避免编程的情况下我可以挖掘多少数据。

（我不介意是否会遵循 R 脚本，尽管没有它我可以通过多种方式解决这个问题）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T17:18:39.583

您可以使用“重新编码”对话框重新编码因子的水平以组合两个类别。见：[http ://www.deducer.org/pmwiki/pmwiki.php?n=Main.RecodeVariables](http://www.deducer.org/pmwiki/pmwiki.php?n=Main.RecodeVariables)

# json - 如何在节点 js 中反序列化代理消息的正文？

> ID：15275496
> 
> 赞同：2
> 
> 时间：2013-03-07T15:45:54.493
> 
> 标签：json, node.js, azure, json.net, azureservicebus

我正在为我的 windows azure 项目在节点 js (socketio.js) 中实现 socket.io 服务器。我的工人角色在 c# 中。并且正在通过服务总线队列从工作角色向 socketio.js 发送中间消息。但是通过代理消息发送的对象没有被序列化为 json 对象。我不知道如何在节点 js 中访问此代理消息的正文。

我可以展示如何在工作角色中发送代理消息以及如何在节点 js 脚本中接收它。

代理消息的响应体（即message.body）

```
@rrayOfTestModelHhttp://schemas.datacontract.org/2004/07/Project.Model     ☺i)http://www.w3.org/2001/XMLSchema-instance☺ 
```

TestModel 是通过代理消息体发送的对象模型的名称。

工人角色：

```
 BrokeredMessage socketioMessage = new BrokeredMessage(messageObject);
            WorkerRoleClient.Send(socketioMessage ); 
```

节点 Js 脚本：

```
serviceBusService.receiveQueueMessage(queue, function (error, receivedMessage) {
    if (!error) {
        console.log(receivedMessage);
        if (receivedMessage != null) {
            var messageBody = receivedMessage.body;
            console.log(messageBody);       

            io.sockets.emit('news', messageBody);
}} 
```

我在这里收到的消息正文是一些普通的不可读的字符串。我正在从工人角色发送适当的对象。如果你们中的任何人对出了什么问题有任何想法，请告诉我

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T05:04:33.077

我终于找到了一种反序列化并获取 json 对象的方法。

C# 中的 Worker 角色

```
var recordsMessage = Newtonsoft.Json.JsonConvert.SerializeObject(data);
BrokeredMessage socketMessage = new BrokeredMessage(recordsMessage); 
```

在 Node js 中接收：

```
if (receivedMessage != null) {
            var messageBody = receivedMessage.body;

            var jsonString = messageBody.substring(messageBody.indexOf('['), messageBody.indexOf("]")+1);                

            var recordsQueue = JSON.parse(jsonString);
} 
```

希望这可以帮助某人

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-15T10:42:12.163

我知道这是一张旧票，但我想它可能会帮助将来的人，因为它今天帮助了我:)。

无需使用 nodejs 应用程序中的子字符串，您可以直接以字符串形式发送消息，而无需自动序列化。

为此，请使用以下代码：

```
using (Stream stream = new MemoryStream())
        using (TextWriter writer = new StreamWriter(stream))
        {
            writer.Write("Start");
            writer.Flush();
            stream.Position = 0;

            queueClient.Send(new BrokeredMessage(stream) { ContentType = "text/plain" });
        } 
```

希望它会有所帮助，

克莱门特

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T22:48:08.523

我也试图找到一个参考来帮助这样做，请检查以下链接： [http ://www.rackspace.com/blog/node-swiz-node-js-library-for-serializing-deserializing-and-validating -objects-in-rest-apis/](http://www.rackspace.com/blog/node-swiz-node-js-library-for-serializing-deserializing-and-validating-objects-in-rest-apis/)

它以任何请求的格式（JSON 或 XML）显示使用 Node JS 的序列化和反序列化

让我知道这是否适合你:)

# android - Android - MyCustomView 扩展 SurfaceView 实现 Runnable、OnTouchListener

> ID：15275497
> 
> 赞同：1
> 
> 时间：2013-03-07T15:45:55.490
> 
> 标签：android, surfaceview, runnable, ontouchlistener

在我的代码中 MyCustomView 扩展了`SurfaceView`绘制一堆`bitmaps`. 我希望它们根据触摸移动，因此 MyCustomView 也实现了`OnTouchListener`. 一切正常，但我想知道`OnTouchListener`直接在视图上而不是在包含它的活动上实现是否正确。触摸监听器是否有可能干扰绘图线程（危及性能和/或产生并发问题）？

非常感谢，

G

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:59:35.560

我建议您覆盖 SurfaceView 的方法`onTouchEvent`，而不是为其提供 OnTouchListener。侦听器是用 Java 制作的，以使类更具可重用性并遵循良好的面向对象实践，但是您想要做的非常狭窄并且不需要侦听器。您的 MyCustomView 是专用的。这就是为什么我更喜欢你覆盖它，因为如果我理解正确，它并不意味着做任何其他事情。

# android - 默认列表视图

> ID：15275498
> 
> 赞同：0
> 
> 时间：2013-03-07T15:45:56.053
> 
> 标签：android, listview

我在`ListView`我正在制作的应用程序中使用 a ，并`ListView`在 Activity 启动时使用字符串填充默认消息：

```
String dMessage = "The list is empty";
final ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, android.R.id.text1);
    listView.setAdapter(adapter);
    adapter.add(dMessage); 
```

有没有一种简单的方法可以使默认字符串不可点击？当用户通过文本输入输入另一个字符串时，该消息将被删除并替换为我确实希望可点击的字符串，因此我不希望整个`ListView`不可点击。我希望我可以`hint`像你一样使用，`EditText`但我认为这是不可能的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:51:32.707

我不确定您要完全完成什么，但是您可以将 Listview 设置为在输入默认文本时不可点击，然后当用户输入文本时恢复它？

前任：

```
adapter.add(dMessage);
listView.setClickable(false);
...
...
//User enters new text
listView.setClickable(true); 
```

**编辑：**

```
//As provided by Sam
public boolean areAllItemsEnabled() {
    return false;
} 
```

**或者**

```
public boolean isEnabled(int position) {
// return false if default message is active : Boolean or some other check
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:52:36.047

我不完全确定你想要什么，但我可以回答这个问题：

> 有没有一种简单的方法可以使默认字符串不可点击？

通过扩展 ArrayAdapter 并覆盖创建自定义适配器[`areAllItemsEnabled()`](https://developer.android.com/reference/android/widget/ListAdapter.html#areAllItemsEnabled%28%29)：

```
public boolean areAllItemsEnabled() {
    return false;
} 
```

如果您只希望某些行也可点击覆盖[`isEnabled()`](https://developer.android.com/reference/android/widget/ListAdapter.html#isEnabled%28int%29)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T18:12:16.857

这会有所帮助

```
Textview texView=new TextView("No Items To Display");

if(items.isEmpty())
    listview.setHeaderView(textView);
else
    listview.removeHeaderView(textView); 
```

# java - 如何使用 Spring TaskExecutor 执行工作流？

> ID：15275499
> 
> 赞同：0
> 
> 时间：2013-03-07T15:45:56.367
> 
> 标签：java, spring

我如何使用 Spring TaskExecutor 来执行工作流，我有一组模块需要按照每个模块的条件执行一个精确的工作流。模块必须作为 jar jar 文件在系统外部生成。一个模块的执行是由一个特定的时间和执行次数来设置的。

任何人都有任何使用 Spring TaskExecutor 的提议或示例。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:12:41.090

这是一个工作示例

```
class Quartz1 {
    @Scheduled(cron="* * * * * ?")
    public void doSomething() {
        System.out.println("!!!!");
    }
}

@Configuration
@EnableScheduling
public class Quartz {

    @Bean
    public Quartz1 quartz1() {
        return new Quartz1();
    }

    public static void main(String[] args) throws Exception {
        new AnnotationConfigApplicationContext(Quartz.class);
    }
} 
```

调度实施在 spring-context-xxx.jar 中。更多信息在这里[http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/scheduling.html](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/scheduling.html)

# javascript - 表单到 JS 对象：更改默认的 serializeArray() 数据结构以制作与地理空间兼容的对象

> ID：15275509
> 
> 赞同：0
> 
> 时间：2013-03-07T15:46:20.733
> 
> 标签：javascript, jquery, serialization

我正在使用以下内容将表单转换为 JS 对象，然后将其插入到 MongoDB 集合中......

```
form={};

$.each($('#myform').serializeArray(), function() {
    form[this.name] = this.value;
}); 
```

这会产生以下内容：

```
{ "name" : "value", "name" : "value", "name" : "value", "name" : "value" } 
```

我想得到类似的东西：

```
{
        "aaa": "111",
        "bbb": "222",
        "ccc": "333",
        "loc": {
            "longitude": "-11.34354656",
            "latitude": "-45.4566546"
        }
} 
```

我应该如何修改 jQuery 来获得它？我看到有用于这项工作的插件，但我想知道解决方案是否比这更简单..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T20:44:29.873

为了实现我想要的，我使用了以下 jQuery 插件：

[https://github.com/marioizquierdo/jquery.serializeJSON](https://github.com/marioizquierdo/jquery.serializeJSON)

# knockout.js - 淘汰赛js动态绑定

> ID：15275511
> 
> 赞同：0
> 
> 时间：2013-03-07T15:46:26.083
> 
> 标签：knockout.js

我的应用程序中有以下 javascript 定义的页面，我正在尝试在其中使用敲除。

```
var dashboard = new DashboardPage();

function DashboardPage() {
    var page = this;

    page.open = function () {
        var bindingString = '{ name: "dashboard-template" }';
        $('#main div').html("").attr("data-bind", bindingString);
        ko.applyBindings(new page.ViewModel(), $("#main")[0]);
    };

    page.ViewModel = function () {
        var self = this;
        self.content = ko.observable("SOME WORDS");
    };
    //Other code removed. 
```

这是模板：

```
<script type="text/html" id="dashboard-template">
    <div id="wrapper-block2" class="wrapper-block">
        <div id="content-block2" class="content-block">
            Hello
        </div>
    </div>
    <div id="wrapper-block3" class="wrapper-block">
        <div id="content-block3" class="content-block">
            World
        </div>
    </div>
</script> 
```

dashboard.open() 肯定会被调用，但我的#main div 没有被填充，也没有错误。

有人可以指出我做错了什么吗？我假设没有错误，ko 甚至没有尝试绑定任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:51:12.250

[绑定](http://knockoutjs.com/documentation/template-binding.html)模板时不应该使用模板这个词吗？

```
var bindingString = 'template: { name: "dashboard-template" }'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:22:35.593

您需要在数据绑定中指定“模板”参数，而且我还认为您的函数的顺序可能有点混乱。我想这就是你要找的：

HTML：

```
<div id="main" data-bind="template: { name: 'dashboard-template' }"></div>

<script type="text/html" id="dashboard-template">
    <div id="wrapper-block2" class="wrapper-block">
        <div id="content-block2" class="content-block" data-bind="text: content">
        </div>
    </div>
</script> 
```

JS：

```
function DashboardViewModel() {
    var self = this;

    self.content = ko.observable("SOME WORDS");
};

$(document).ready(function () {
    ko.applyBindings(new DashboardViewModel(), $("#main")[0]);
}); 
```

# r - 如何将openstreetmap与R中的点结合起来

> ID：15275514
> 
> 赞同：3
> 
> 时间：2013-03-07T15:46:39.850
> 
> 标签：r, graphics, ggplot2, ggmap

我刚刚开始学习 R，我正在尝试创建一张地图，显示康涅狄格州每个城镇的学生人数。我有一个 .csv 的位置和注册信息，如下所示：

```
name       lon      lat resStudent
1   ANDOVER          -72.37472 41.73278        657
2   ANSONIA          -73.07900 41.34621       2999
3   ASHFORD          -72.12162 41.87307        736
4   AVON             -72.83052 41.80962       3563
5   BARKHAMSTED      -72.97222 41.92917        680
6   BEACON FALLS     -73.06176 41.44265       1039
7   BERLIN           -72.78064 41.61460       3165
8   BETHANY          -72.99250 41.42556       1028
9   BETHEL           -73.41396 41.37123       3034
10  BETHLEHEM        -73.20861 41.63917        490
11  BLOOMFIELD       -72.73336 41.83945       2484 
```

我已经能够生成地图，我想使用以下代码覆盖此信息：

```
tempMap <- get_openstreetmap(bbox = c(left = -73.8, bottom = 40.9, right = -71.7, top = 42.1), scale = 829486, color = "bw")
ggmap(tempMap) 
```

我遇到了将两者结合起来的问题。这是我正在使用的代码：

```
enrollData<-read.csv("enrollData.csv")   
enrollMap <- tempMap + geom_point(data = enrollData,aes(x = lon, y = lat, size = resStudent) 
```

运行后，我收到一条错误消息，内容如下：

```
Error in Ops.raster(tempMap, geom_point(data = enrollData, aes(x = lon,  : 
  Operator not meaningful for raster objects 
```

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T16:53:56.497

您需要先调用`ggmap`创建基础层。以下应该有效：

```
ggmap(tempMap) + geom_point(data = enrollData,aes(x = lon, y = lat, size = resStudent) 
```

# excel - 从 2 个不匹配的工作表中匹配列数据，然后自动排列数据，必要时添加空白行

> ID：15275515
> 
> 赞同：0
> 
> 时间：2013-03-07T15:46:42.683
> 
> 标签：excel, match

我有一个建筑行业的估算程序，可以将其报告转换为 Excel。

我想比较**A 列**中原始估算的产品类型，并将其与单独工作表中修订估算的**A 列中的产品类型进行比较。**两个工作表的列不一定具有相同的行数。工作表 1 中的某些产品不会出现在工作表 2 中，反之亦然。

我想比较两者并在必要时添加行，以便我可以使用简单的减法方​​程来确定要添加或减去多少材料。

例如：工作表 1 中的 A 列具有从第 1 行开始的以下 4 个条目（M、M2、MF2 和 MPNL）。工作表 2 中的 A 列具有以下 3 个条目，从第 1 行开始（M、M2、MPNL）。

匹配的条目需要与该行中的所有相关数据对齐。因此，产品 M 和 M2 的数量将对齐，因为它们在两行中都匹配。在工作表 1 中，第三个条目是 MF2。工作表 2 没有 MF2。我想让 excel 在工作表 2 中插入一整行，这样，工作表 2 中 MPNL 行中的所有信息都会下降到第 4 行，在那里它将与工作表 1 中的 MPNL 行匹配。我需要此功能可从工作表 1 和工作表 2 双向工作，因为数据将不一致。

我希望这是有道理的。如果您有任何问题，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-01T20:13:31.807

据我了解，您需要将`revised quantities`与`base quantities`每个产品的 进行比较，然后找到`change in quantity`.
如果以上是正确的，那么您可以执行以下操作（假设您的工作表名称是`revised_sheet`and `base_sheet`）：

1.  在您的工作簿中添加另一个工作表并将其命名为有意义的名称（例如，`product_movements`为了这个答案）
2.  在此新工作表中添加您的所有材料 ID`Column A`和材料描述- 。`Column B``product_movements`
3.  在 C 列`=VLOOKUP(A2,revised_sheet!A:C,3,0)`（假设为第 2 行）中进行 vlookup 以获得修改后的数量
4.  同样，在 D 列中，使用公式`=VLOOKUP(A2,base_sheet!A:C,3,0)`获取基本数量。
5.  在 E 列中，您可以`=C2-D2`获取数量变化
6.  现在您可以添加各种条件格式来突出显示适当的更改。

注意：如果您希望 E 列中的公式起作用，您需要将数量列仅保留为数字。

# python - 搜索文件功能不起作用

> ID：15275518
> 
> 赞同：0
> 
> 时间：2013-03-07T15:46:49.460
> 
> 标签：python, python-2.7

我正在为 reddit 机器人制作程序。该程序的一部分要求我在文件中搜索查询以防止重复发布这是我的代码：

```
def search (filetosearch,query):
    with open(filetosearch, 'r') as inF:
        for line in inF:
            if len(str(line)) == 0 | query not in line:
                return False
                break
            else:
                return True
                break 
```

每当我运行它时，它都会返回 None！为什么要跳过返回语句？我要搜索的文件是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:48:36.613

如果文件是空的，那么你永远不会进入你的`for`循环，因为循环*没有任何东西*可以迭代。

只需`return False`在该边缘情况的函数末尾添加一个。

当一行与查询不匹配时，您也*不想返回，只需循环到下一行：*

```
def search (filetosearch, query):
    with open(filetosearch, 'r') as inF:
        for line in inF:
            if query in line:
                return True

    return False 
```

请注意，您的`break`陈述是多余的；当执行 return 语句时，该函数立即退出，`break`永远不会到达该语句的下一行。

# java - PostgreSQL 事务失败：“没有正在进行的事务”

> ID：15275532
> 
> 赞同：1
> 
> 时间：2013-03-07T15:47:16.507
> 
> 标签：java, postgresql, jdbc, transactions

我有一个很长的事务，我正在尝试使用 JDBC for PostgreSQL 执行。在 JDBC 中我不能使用`COMMIT`and `ROLLBACK`，所以我试图在 Java 代码中实现我想要的行为......

```
try {
    con = DriverManager.getConnection(url, user, password);

    con.setAutoCommit(false);
    Statement st = con.createStatement();
    st.execute(myHugeTransaction);

    con.commit();
} catch (SQLException ex) {
    try {
        con.rollback();
    } catch (SQLException ex1) {
        // log...
    }
    // log...
} 
```

对于小型语句，这工作得很好，但对于在单个事务中有大约 10K 语句的大型语句，这会`con.commit`失败

```
org.postgresql.util.PSQLException: ERROR: kind mismatch among backends. Possible last query was: "COMMIT" kind details are: 0[C] 1[N: there is no transaction in progress] 
```

有趣的是，如果我捕捉到 SQL 警告，`st.getWarnings();`我可以看到数据库实际上正在处理我发送的整个脚本，就在提交时，一切都失败了。

顺便说一句，交易完全没问题。我将它的精确副本写入一个文件，我可以通过将它复制到 pgAdmin 来运行它而不会出错。希望你能在那个问题上帮助我，我已经搜索和测试了几个小时了......

**编辑**

也许我没有得到正确的答案，所以有两个问题：

1.  我可以在一次调用中执行多个语句`Statement.execute()`吗？
2.  如果不是，那么使用 JDBC 运行具有多个语句的脚本的正确方法是什么（无需解析并将其拆分为单个语句）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:00:43.737

老实说，如果这是一个 SQL 脚本，你最好对 psql 进行 shell 转义。这是处理这个问题的最好方法。一般来说，人们试图解析 SQL 代码并针对数据库运行它时，我遇到了太多令人不快的惊喜。如此疯狂的谎言。

您说“较小的脚本”，这使我得出结论，您正在做诸如设置数据库（或升级数据库，但由于没有查询而不太可能）之类的事情。通过 shell 转义使用 psql，不要回头。这确实是最好的方法。

我想如果你必须的话，你可以尝试在你的脚本中添加显式的 BEGIN 和 COMMIT 。

我不确定为什么它似乎隐含地提交了交易。您已正确设置自动提交。您的代码中没有明显的问题。您是否可能有旧的或有故障的 JDBC 驱动程序？如果没有，我建议使用 PostgreSQL JDBC 驱动程序项目提交错误报告。

# javascript - 从二维数组中排序动态列表

> ID：15275538
> 
> 赞同：0
> 
> 时间：2013-03-07T15:47:43.593
> 
> 标签：javascript, jquery, multidimensional-array

我对 Javascript 和 jQuery 有点陌生，但我会尝试解释我的问题。我制作了一个简单的页面，其中包含一个文本字段（电影名称）和一个下拉菜单（将移动评分 1-5）。当用户单击“添加电影”按钮时，这些值将被放入一个数组中，该数组被推送到另一个数组，因此该数组如下所示`[[grade, "moviename"]]`：然后我动态创建：`<li> "moviename" <span> "grade" </span> </li>`并且movienamne 和grade 在页面上显示为列表元素。这工作正常，但现在我想要两个按钮，按最高和最低等级对 li 元素列表进行排序......

```
[
    [
        5,
        ”movie name1”
    ],
    [
        3,
        ”movie name2”
    ],
    [
        1,
        ”movie name3”
    ],
    [
        2,
        ”movie name4”
    ]
] 
```

如果列表如下所示，例如，如果您按最低排序，我希望列表显示为：

```
[
    [
        1,
        ”movie name3”
    ],
    [
        2,
        ”movie name4”
    ],
    [
        3,
        ”movie name2”
    ],
    [
        5,
        ”movie name1”
    ]
] 
```

我试图创建一个函数，对数组进行排序，然后删除当前的 li 元素，然后打印出新列表，但所有值都进入一个列表元素。如何获取数组的单独值，然后将每个值打印为列表元素？或者，如果可以直接对列表进行排序而不删除它？我想要做的是按列表元素内的 span 元素中显示的数字对列表进行排序。有人知道如何做到这一点吗？

```
var button_high = $('#high');
var button_low = $('#low');
var betyg_array = new Array();
button_high.click(function() 
{
    $("#filmerna ul li").remove();
    betyg_array.sort(function(a,b){return b-a});
    var film = betyg_array;
    var grade = betyg_array;
    var element = '<li class="lista">' + film + '<span class="betyg">'+ grade +'</span></li>';
    film_list.append(element); 
```

但这当然会导致整个数组进入一个列表元素，我希望将特定值分配给特定列表元素，并使其按跨度元素中的数字排序...

```
 var button_high = $('#high');
var button_low = $('#low');
var betyg_array = new Array(); 
```

button_high.click(function() {

```
 $list = $("#filmerna ul");
    $("#filmerna ul li").remove();

    betyg_array.sort(function(x,y){return y[1]-x[1]});

$.each(betyg_array, function() {
    $nyFilm = $("<li />");
    $nyFilm.attr("class", "lista")
    $nyFilm.text($(this)[0]);

    $nyBetyg = $("<span />");
    $nyBetyg.attr("class", "betyg");
    $nyBetyg.text($(this)[1]);

    $nyBetyg.appendTo($nyFilm);
    $nyFilm.appendTo($list);
}); 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:11:07.610

好的，根据你原来的 JS，我认为这应该为你做。. .

```
var button_high = $('#high');
var button_low = $('#low');
var betyg_array = new Array();
button_high.click(function() {
    $list = $("#filmerna ul");
    $list.empty();

    betyg_array.sort(function(a,b){return b-a});

    $.each(betyg_array, function() {
        $newMovie = $("<li />");
        $newMovie.attr("class", "lista")
        $newMovie.text($(this)[1]);

        $newGrade = $("<span />");
        $newGrade.attr("class", "betyg");
        $newGrade.text(new Array($(this)[0] + 1).join('*'));

        $newGrade.appendTo($newMovie);
        $newMovie.appendTo($list);
    });
}); 
```

有更紧凑的方法来添加这些`<li>`元素，但我想确保它是清晰的。

# laravel - Laravel 4：Hash::make 没有返回正确的值

> ID：15275540
> 
> 赞同：0
> 
> 时间：2013-03-07T15:47:46.350
> 
> 标签：laravel, laravel-4

我正在尝试`Hash::make()`在我的应用程序中使用，但无法使其正常工作。我一直在尝试使用 Laravel 3 站点上的文档，因为我在 Laravel 4 文档中找不到任何内容。

当我尝试插入`Hash::make($password)`我的数据库时，它会将值保存为 0。我的字段是`varchar`，它的长度为 100，应该足够长。我尝试插入数据库中的不同字段，它始终保存为 0。我尝试设置`$password`为测试字符串，而不是来自表单的内容，它仍然保存为 0。如果我在没有插入`$password`的情况下`Hash::make()`存储我的密码.

我尝试`Hash::make('test`在我的页面上回显 ) 并没有得到任何回显。根本没有输出。我想这就是为什么我在尝试存储值时将 0 插入数据库的原因。

这可能与您`key:generate`通过 Artisan 设置的应用程序密钥有关吗？我发现我没有设置它，当我尝试设置它时，它告诉我它已经设置了？如何重置密钥？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T17:47:23.770

[Laravel 4 的要求](http://four.laravel.com/docs/installation)

*   PHP >= 5.3.7
*   MCrypt PHP 扩展

我怀疑您没有启用 MCrypt PHP 扩展。你可以跑去`phpinfo()`确认。

# flash - 添加两个退出按钮！闪存 as3

> ID：15275548
> 
> 赞同：0
> 
> 时间：2013-03-07T15:48:12.967
> 
> 标签：flash, button, exit

我知道这听起来很简单，但我似乎不知道如何设置两个退出按钮。一个在前面的菜单，一个在最后的菜单。我的前菜单有效，但我似乎无法完成一项工作。

谢谢

代码用于前面的菜单，效果很好。

```
import flash.system.fscommand;

exit.addEventListener(MouseEvent.CLICK, CloseApp);

function CloseApp(e:MouseEvent) {
    fscommand("quit");
} 
```

# python - 在 Python 程序中获取共享库 soname

> ID：15275553
> 
> 赞同：0
> 
> 时间：2013-03-07T15:48:22.323
> 
> 标签：python, version, shared-libraries, elf, objdump

我正在使用 ctypes 为共享 Linux 库编写 Python 包装器。有没有办法以编程方式提取库的 soname（例如，可能通过某个库来访问其 ELF 数据）？（我知道我可以从 objdump 命令的输出中获取这些信息，但我很好奇是否可以在不执行系统命令的情况下完成。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T16:08:06.887

当然，您可以执行`objdump`using`subprocess`然后解析其输出以获取 soname，但这是您要避免的。[但是，这里](http://oopsinc.wordpress.com/2010/02/10/get-soname-from-library/)有一个 shell 示例。

还有[pyelftools](https://pypi.python.org/pypi/pyelftools/)可以查看。据我从文档中看到的，它应该能够检索所有必要的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:57:46.603

弄清楚了; 解决方案（使用 pyelftools）在[此处](https://gist.github.com/lebedov/5111696)发布。

# php - 上传文件后的PHP重定向页面

> ID：15275562
> 
> 赞同：1
> 
> 时间：2013-03-07T15:48:41.497
> 
> 标签：php, redirect, upload

我希望在文件上传后重定向回我的主页，我目前有一个回显语句，表明文件已上传（完成后）。任何帮助将不胜感激！

```
<?php
  $tags[]= $_POST['Sport'];
  $tags[]= $_POST['bcTags1'];
  $tags[]= $_POST['bcTags2'];
  $tags[]= $_POST['bcTags3'];
  $tags[]= $_POST['hiddenTag'];
  $metaData = array(
    'name' => $_POST['bcVideoName'],
    'shortDescription' => $_POST['bcShortDescription'],
    'tags' => $tags
  );
# Rename the video file     
       $file = $_FILES['theVideoFile'];     
       rename($file['tmp_name'], '/tmp/' . $file['name']);     
       $file_location = '/tmp/' . $file['name'];      
       # Send video to Brightcove     
       $id = $bc->createMedia('video', $file_location, $metaData);

echo $id.'Uploaded Successfully!';
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:50:33.577

正常使用[`header()`](http://www.php.net/manual/en/function.header.php)即可：

```
 //echo $id.'Uploaded Successfully!'; <--- output breaks header()
  header('Location: /yourpage.php');
  exit;
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T15:51:10.993

```
header("Location: yourscript.php");
die(); 
```

这将重定向，但必须在回显任何内容之前使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T16:01:06.417

如果上传正常，您可以将变量（例如：$success）设置为 true，然后在页面下方添加以下内容；

```
<?php

if($success == true){
  echo "<script language='javascript'>\n";
  echo "alert('Upload successful!'); window.location.href='http://splash21.com';";
  echo "</script>\n";
}

?> 
```

这将允许您处理成功和失败的上传

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T15:50:18.767

请注意，在写入输出后您无法修改标题（如`echo 'uploaded';`）。此外，您可能并不总是重定向（取决于脚本中的内容），除非您在使用`exit;`.

`header('Location: http://example.com'); exit;`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-07T15:50:41.377

如果尚未输出任何内容，您可以代替 echo 语句：

```
header('Location: http://www.google.com');
die; 
```

# vb.net - 打印可滚动表格

> ID：15275563
> 
> 赞同：2
> 
> 时间：2013-03-07T15:48:43.997
> 
> 标签：vb.net, vb.net-2010, printform

我有一个可滚动的表格，我想完全打印它。

我已经尝试使用此代码打印它：

```
 Private Sub btnPrint_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnPrint.Click
    Me.PrintForm.PrintAction = Printing.PrintAction.PrintToPreview
    Me.PrintForm.Print(Me, PowerPacks.Printing.PrintForm.PrintOption.Scrollable) 
End Sub 
```

结果根本不准确。

为了证明我的问题，这里有一些照片：

这是我想要的结果（当然我希望它还打印所有可滚动的内容）

如您所见，此图像包含图像所需的所有宽度，但由于它是打印屏幕图像，因此它不包含我希望在可打印版本的表单中具有的可滚动区域。 ![好结果](../Images/b3df4932150a12a67584bdfa24fd2da5.png)

这就是我从我的代码中得到的：

正如你在这里看到的，我只得到了大约 60% 的表单宽度和 50% 的高度，而且很明显，我没有得到可滚动的区域。

![结果不好](../Images/d5c6fa96194db2cbb61f3db6454f813e.png)

我并不真正关心质量，我只想让它打印整个表单，包括可滚动区域。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T18:29:12.220

在这一行：

```
PrintForm1.Print(Me, PowerPacks.Printing.PrintForm.PrintOption.Scrollable) 
```

*如果您有一个可滚动的表单*，它看起来`PrintOption.Scrollable`只会起作用。您在表单内有一个可滚动的*控件*（可能是）。在这种情况下，它的区域不会扩展到打印机上。比较：**`Panel`**

 ****可滚动控件：**

![在此处输入图像描述](../Images/cc6e9e4dfaa37f336bc65ed58add7a6f.png)

打印为：

![在此处输入图像描述](../Images/36f75aff5ae10cd2d1d07b4c548159d9.png)

**可滚动形式：**

![在此处输入图像描述](../Images/73f4ac9b91317f71779e3fc5a05a1ad1.png)

打印为：

![在此处输入图像描述](../Images/d28ebf5c03d47b9ff8bcc739aaaca204.png)

根据[Microsoft 的官方回答](http://social.msdn.microsoft.com/Forums/en-US/vbpowerpacks/thread/fe6580a2-ea66-48c5-b9cd-da51bdeb801a)，使用 .c 无法捕获可滚动控件`PrintForm`。如果您使用[PrintDocument 和一些自定义编码](http://social.msdn.microsoft.com/Forums/en-US/vbpowerpacks/thread/2ad34554-e989-4ffa-8e1f-ccea1f00c99d/)，则可以在简单的情况下使用它，例如可滚动的 TextBox。在您的情况下，您可能需要完成更多的自定义编码。处理`PrintDocument1.PrintPage`看起来是最好的起点，如果你能做到的话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T19:03:22.663

根据您所展示的...看起来可滚动区域是一个像面板一样的容器。如果是这种情况，打印表单不是问题，它正在打印可滚动控件。

看看这个项目以从控件创建位图：http: [//www.codeproject.com/Articles/35734/Print-a-WinForms-User-Control](http://www.codeproject.com/Articles/35734/Print-a-WinForms-User-Control)

编辑：再想一想，我认为该链接上的代码也不能解决实际的滚动问题。

我认为您将需要做以下两件事之一：1）临时调整面板的大小，使滚动条消失，然后重新调整大小 2）构建一个没有的控件（可能是“可打印版本”表单）嵌套可滚动元素并优雅地处理分页等内容。

选项 #2 可能听起来需要做很多工作，但我认为您可以很快地执行以下操作：创建一个新面板，克隆您要打印的每个控件并将其添加到面板（根据需要调整大小以避免滚动），打印面板，然后丢弃面板。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T16:16:26.020

我认为您的答案在[文章中](http://www.codeproject.com/Articles/5738/Printing-a-Form-in-a-report-fashion-release-2-2)
您需要的只是参考 FormPrinting 库（或将源导入您的解决方案）。

```
Private Sub btnPrint_Click(object sender, EventArgs e)
        {
            var fp = new FormPrinting.FormPrinting(this);                
            fp.Print();
        } 
```

将完成打印工作。
我已经测试了该库，对可滚动内容（例如图像和...）没有任何问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T03:44:03.740

[在此处](http://msdn.microsoft.com/en-us/library/bb690944.aspx)检查代码的 MSDN 论坛， 代码如下

1.  在工具箱中，单击 Visual Basic PowerPacks 选项卡，然后将 PrintForm 组件拖到窗体上。

2.  PrintForm 组件将被添加到组件托盘中。

3.  在“属性”窗口中，将 PrintAction 属性设置为 PrintToPrinter。

在适当的事件处理程序中添加以下代码（例如，在打印按钮的 Click 事件处理程序中）。

```
PrintForm1.Print(Me, PowerPacks.Printing.PrintForm.PrintOption.Scrollable) 
```

[这里](http://social.msdn.microsoft.com/Forums/en-US/vbpowerpacks/thread/2ad34554-e989-4ffa-8e1f-ccea1f00c99d/)得到了和 你一样的问题，并且得到了答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-18T21:33:32.643

我有一个类似的问题，我可以在没有任何额外的库或扩展的情况下解决。大多数 Forms 控件都可以使用 DrawToBitmap 方法，这很简单。

```
 Dim ctrlColl As ControlCollection
    Dim i As Integer = 0

    ' Get collection of controls
    ctrlColl = Me.Controls

    ' create bitmap array
    Dim Bitmaps(ctrlColl.Count - 1) As Bitmap

    ' remove controls you have hidden before printing
    For Each ctrl As Control In ctrlColl
        If Not ctrl.Visible Then
            ctrlColl.Remove(ctrl)
        End If
    Next

    ' Loop through controls
    For Each ctrl As Control In ctrlColl
        ' create bitmap from control.DrawToBitmap
        Bitmaps(i) = New Bitmap(ctrl.Width, ctrl.Height)
        ctrl.DrawToBitmap(Bitmaps(i), ctrl.ClientRectangle)
        i = i + 1
    Next

    ' Print each bitmap in array
    i = 0
    For Each bmp As Bitmap In Bitmaps
        e.Graphics.DrawImage(bmp, New Point(ctrlColl(i).Location.X, ctrlColl(i).Location.Y))
        i = i + 1
    Next

End Sub 
```**

# sql - 不存在的性能 - t-sql 查询

> ID：15275564
> 
> 赞同：3
> 
> 时间：2013-03-07T15:48:45.300
> 
> 标签：sql, performance, tsql, group-by, not-exists

此（为简单起见而修改）查询是更大查询的一部分，并与其他选择在日期上连接。但是，我已将此部分固定为狗慢。假设我有一个 UserLoginHistory-table 记录用户的每次登录。对于每个用户，我想要他们首次登录的日期。（稍后在查询中，我按 LogDate 分组以获取每天有多少首次登录。）

```
select
    LogDate, --(this value is only date, no time)
    UserId
from
    UserLoginHistory ul
where
    not exists
        (
            select 
                * 
            from 
                UserLoginHistory ulPrevious
            where
                ulPrevious.LogDate < ul.LogDate
                and ul.UserId = ulPrevious.UserId
        )
group by ul.LogDate, ul.UserId 
```

显然 NOT EXISTS 部分是慢的。但我不知道如何用更有效的方法来代替它。

使用较小的 UserLogHistory-count，性能没有问题。当我达到 15 000 左右时，它开始变慢。也许我应该将每天的结果批处理到另一个表中，但我想为这个查询找到一个更好的解决方案，因为应该有一个......

谢谢你的时间！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T15:53:52.360

您可以使用行编号方法：

```
select LogDate,UserId from (
    select
       LogDate, 
       UserId
       row_number() over (partition by UserId order by LogDate) as rown
    from
        UserLoginHistory ul
)
where rown = 1 
```

每个 ID 的行由 LogDate 编号，因此最早的将始终编号为 1。

*注意：我认为`group by`原始查询中的 没有必要——该`not exists`子句应保证您只能获得 UserId 和 LogDate 的唯一组合。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T16:03:11.000

如果这些是您唯一感兴趣的 2 个字段，您可以不使用简单的聚合吗？

```
SELECT  LogDate = MIN(LogDate),
        UserID
FROM    UserLoginHistory
GROUP BY UserID; 
```

# database - 如何从模型、Visual Studio 2012 和 EF5 更新数据库

> ID：15275569
> 
> 赞同：0
> 
> 时间：2013-03-07T15:49:06.540
> 
> 标签：database, entity-framework, model, visual-studio-2012, entity-framework-5

我有创建实体数据模型并准备好所有模型的常用方法。在初始连接或设置数据库时，我们通常执行“从模型生成数据库...”选项，它只生成一个 SQL 脚本。

我的问题很简单：初始创建后，**如果我们对数据模型进行更改，我们如何更新数据库？**

“从模型生成数据库”选项并不是真正可行的方法，因为它会删除现有表并创建新表。

我在搜索 stackoverflow 时找到了这个有前途的工具：http: [//visualstudiogallery.msdn.microsoft.com/df3541c3-d833-4b65-b942-989e7ec74c87/](http://visualstudiogallery.msdn.microsoft.com/df3541c3-d833-4b65-b942-989e7ec74c87/)

但这是针对 Visual Studio 2010 的，看起来创作者没有计划将其部署到 2012 年。

有人找到了一种简单的方法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:02:09.317

我不确定这会有多大帮助，尤其是因为它是一种不同的方法。基本上，我更喜欢 Code-First，而不是使用您的方法。EF 团队已经发布`EF PowerTool`了 VS2010 和 VS2012 的扩展（[http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d)）。通过右键单击一个项目，您可以对您的数据库进行反向工程。这将创建 POCO 类和映射，以及 DbContext 的实现。之后，您可以启用迁移以及对模型和映射所做的任何更改，您可以将其提交回服务器。

# arduino - ser.write 不使用 pyserial 和 USB 将字符串传递给 arduino uno

> ID：15275575
> 
> 赞同：0
> 
> 时间：2013-03-07T15:49:17.170
> 
> 标签：arduino, pyserial

一个程序正在 arduino uno 上运行，它读取传入的字符串，然后根据字符串的内容调用一个函数。

当我使用 arduino 的串行监视器传递字符串时，该程序有效。例如，向前发送调用一个函数，该函数将控制字节传递给电机控制器，使电机向前转动。

但是，当我从 linux 使用 pyserial 时，它不起作用。连接很好 - 我已经通过让 arduino 写入串行然后使用正确读取的 ser.readline() 来检查它。但使用 ser.write("forward") 什么也不做。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T14:25:53.590

你定义的协议是什么？您是否将输入到连续剧中的字符收集到 CR 或 CRLF？

Arduino串行监视器一次发送所有数据，包括发送时的CR；例如其他软件 - 超级终端会在您键入字符的同一时刻发送数据，并且不会自动发送 CR。

尝试通过 pyserial 一次性发送所有数据并在末尾附加一个 \n 。

# java - 在java中的if语句中初始化变量？

> ID：15275576
> 
> 赞同：1
> 
> 时间：2013-03-07T15:49:17.750
> 
> 标签：java, if-statement, joptionpane

我不断收到错误变量 F3 可能尚未在您看到的最后一行代码中初始化。

我究竟做错了什么？

```
{
    Float F1,F2, F3;

    F1 = Float.parseFloat(
      JOptionPane.showInputDialog("Enter a number and press ok."));

    F2 = Float.parseFloat(
      JOptionPane.showInputDialog("Enter a second number and press ok."));

    if(F1 >= F2)
    {

      F3=(F1 * F2) + (F1 * 2);
    }
    if(F2 >= F1)
    {
      F3 =(F1 + F2) + (F2 * 5);
    }

     DecimalFormat dec = new DecimalFormat("##.##");

  JOptionPane.showMessageDialog(null,"Your calculations are:" +(F3),"Caculations", JOptionPane.INFORMATION_MESSAGE); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T15:51:19.777

您可能应该在此处使用 if/else 而不是 if/if，以便编译器知道`F3`它将始终设置为一个值。

以下代码等效于您的 if/if 语句：

```
if(F1 > F2) //The = here will always be overridden by the other if clause in your original statement so it's redundant.
{ 
  F3=(F1 * F2) + (F1 * 2);
}
else
{
  F3 =(F1 + F2) + (F2 * 5);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T15:52:13.873

根据[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-16.html)：

> 当发生对其值的任何访问时，每个局部变量和每个空白最终字段都必须具有明确分配的值。

另外来自[§14.4.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.4.2)：

> 如果声明器没有初始化表达式，那么每次对变量的引用都必须先执行对变量的赋值，否则会发生编译时错误。

有了那里的代码，在使用之前可能没有任何东西被分配`F3`（在代码片段的最后一行）。

使用`F3 = null`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T15:52:38.013

您的代码相当于：

```
if(F1 > F2) {
  F3 = (F1 * F2) + (F1 * 2);
} else {
  F3 = (F1 + F2) + (F2 * 5);
} 
```

这应该使错误消失。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T15:51:42.050

当您声明一个变量时，F3 将 null 分配给它。由于您的 if 条件，可能存在不会为该变量分配任何值的情况

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T15:53:16.097

试试这个

```
Float F1=0,F2=0, F3=0; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-25T08:08:12.757

最好的方法是使用 if-else 语句并且不要将 null 分配给变量。If-else 语句更适合人类和编译器。分配 null 是没有意义的，并且会使编译器无法检查未初始化的问题以供您将来修改，然后如果您不检查它，您可能会得到 NullPointerException。

# visual-studio - TypeScript - jasmine - Chutzpah - AMD - Visual Studio 2012

> ID：15275578
> 
> 赞同：1
> 
> 时间：2013-03-07T15:49:23.757
> 
> 标签：visual-studio, typescript, jasmine, amd, chutzpah

我无法使用 jasmine/Chutzpah 在 VS 中测试 TypeScript 以与 AMD 一起工作。

示例.ts：

```
export class Sample {
    constructor(public name: string) { }
} 
```

简单的.ts：

```
/// <reference path="./require.d.ts" />
/// <reference path="./jasmine.d.ts" />

import SampleModule = module("./Sample");

describe("TypeScript1", function () {
    it("should pass a simple test", function () {
          expect(1).toEqual(1);
    });
});

describe("TypeScript2", function () {
    it("should pass a sample test", function () {
        var sample = new SampleModule.Sample("Wow");
            expect(sample.name).toEqual("Wow");
    });
}); 
```

...这导致：

测试名称：TypeScript1 应该通过一个简单的测试测试结果：通过

测试名称：TypeScript2 应通过示例测试测试结果：失败测试持续时间：0:00:00

结果消息：ReferenceError：找不到变量：文件中的 SampleModule：typescripthtmlapp1/_Chutzpah.28.simple.js（第 9 行）

添加：

```
/// <reference path="./Sample.ts" /> 
```

...导致未检测到测试。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T21:50:50.253

我认为问题在于运行测试时 Chutzpah 不包含 Javascript 模块加载器（require.js），因此模块没有加载 - 因此出现错误。

[请参阅此处](http://chutzpah.codeplex.com/workitem/93)的更改请求- 显然解决方案是在测试文件中添加类似这样的内容：

```
///<chutzpah_reference path="../scripts/require.js" /> 
```

~~但该修复程序尚不可用~~。

**更新**

Chutzpah 版本 2.4 中应该提供该修复程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-10T15:18:46.397

在这里您可以找到使用 TypeScript - jasmine - Chutzpah - AMD - Visual Studio 2012 的工作示例：http: [//chrisseroka.wordpress.com/2014/02/23/javascripttypescript-unit-testing-11-sample-projects-for-resharper -chutzpah-and-karma/](http://chrisseroka.wordpress.com/2014/02/23/javascripttypescript-unit-testing-11-sample-projects-for-resharper-chutzpah-and-karma/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-17T16:58:16.787

Chutzpah 目前不支持生成 AMD 代码的 TypeScript 文件。我在几个版本前尝试过这个，但遇到了 TypeScript 如何生成其输出的问题。

我计划在未来的版本中重新审视这一点，并将[此项目归档以跟踪](https://chutzpah.codeplex.com/workitem/122)这项工作的状态。

您能否访问该项目并附上示例的 zip，以便我可以确定我的修复正确地解决了您的情况。

# performance - 是否可以并行运行 JUnit Theories？

> ID：15275583
> 
> 赞同：4
> 
> 时间：2013-03-07T15:49:36.893
> 
> 标签：performance, junit4

关于如何在 SO 上并行运行 JUnit 测试有很多问题。但是，我不认为有一个专门关于理论的。如果已经是这样，请接受我的道歉并将这个无知的人指出正确的地方。:-)

我发现[这篇非常有用的文章](http://hwellmann.blogspot.be/2009/12/running-parameterized-junit-tests-in.html)关于对 Parameterized 做同样的事情。

然而，对于 Theories 跑步者来说，情况有所不同。对于所有生成的组合，每种理论方法似乎都是单线程运行的。因此，设置多线程调度程序几乎没有什么区别。

不幸的是，在我的情况下，使用 Parameterized 也不是很实用——因为要预先生成太多的排列。老实说，我宁愿让 JUnit 做这些事情。:-)

有人已经解决了这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T20:07:23.197

请参阅此处的[junit-toolbox 的 apidocs](http://junit-toolbox.googlecode.com/git-history/31ca33755e987012dc9e93ef92fb8fb6dab3ff21/javadoc/com/googlecode/junittoolbox/ParallelRunner.html)`ParallelRunner`：

> JUnit Theories 运行器的扩展，它同时执行所有 @Test 方法。此外，所有对具有不同参数分配的@Theory 方法的调用也是同时执行的。

# sass - 语句的 SCSS 插值

> ID：15275584
> 
> 赞同：0
> 
> 时间：2013-03-07T15:49:37.380
> 
> 标签：sass

我希望能够为我的样式表创建 10 个类，而不必创建每个类，以防我决定随着时间的推移需要更多。我显然没有这个正确的，需要一些关于我做错了什么的帮助。

```
@mixin ladders($num) {
 @for $num from 1 to 10 {
  .ladder-#{$num} {
    border: 1px solid #000;
  }
 }
} 
```

我查看了参考资料，但仍然很难掌握将它们放在一起的总体概念。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:25:51.187

首先，您的 mixin 将始终生成 9 个类，因为您已经对 for 循环进行了硬编码`1 to 10`（不包括 10 个）。你需要这样写：

```
@mixin ladders($num) {
    @for $i from 1 through $num {
        .ladder-#{$i} {
            border: 1px solid #000;
        }
    }
} 
```

然后，您只需要在某处调用它，如果您不希望它在选择器内，它不必在选择器内。

```
@include ladders(5); 
```

输出：

```
.ladder-1 {
  border: 1px solid black;
}

.ladder-2 {
  border: 1px solid black;
}

.ladder-3 {
  border: 1px solid black;
}

.ladder-4 {
  border: 1px solid black;
}

.ladder-5 {
  border: 1px solid black;
} 
```

# javascript - 动态写表时对象预期错误

> ID：15275586
> 
> 赞同：0
> 
> 时间：2013-03-07T15:49:41.343
> 
> 标签：javascript

我正在尝试动态编写我的表（供以后使用后端数据库），并且在单击页面上的“加载”按钮后单击任何转到按钮时出现“预期对象”错误。理论上它应该可以工作，因为我已将表格写入 HTML 文档的正文。我看不出我在这里做错了什么：

```
<!DOCTYPE html>

<html>

<head>

<style type="text/css">
#mstrWrapper {
        position: relative;
        height: 200px;
        width: 800px;
        border: 1px solid #808080;

        overflow-y: scroll;
        overflow-x: scroll;
        scrollbar-base-color: #DFDFDF;
        scrollbar-arrow-color: #235A81;

}

#mstrTable {
        width: 800px;
        color: #235A81;
        font-family: Arial;
        font-size: 9pt;
        border: 0px;
}

#mstrTable th, #mstrTable td {
        border-bottom: 1px solid #808080;
        border-right: 1px solid #808080;
        padding: 3px;
}

#mstrTable th {
        filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#ffffff", endColorstr="#cdcdcd");
        width: 110px;
        height: 18px;
        border-bottom: 1px solid #808080;
        border-top: 0px;
}

#mstrTable thead tr {
        position: absolute;
        top: expression(this.offsetParent.scrollTop);
}

#mstrTable tbody tr:first-child td {
        padding: 28px 3px 3px 3px;
}
#mstrTable tr.normal td {
    color: #235A81;
    background-color: white;
}
#mstrTable tr.highlighted td {
    color: #FFFFFF;
    background-color: #235A81;
}

</style>

</head>

<body>
<div id="mstrWrapper"></div>

<script type="text/javascript">

function writeit() {
var strVar=" <table id='mstrTable' cellspacing=\"0\" cellpadding=\"0\">";
strVar += "     <thead>";
strVar += "      <tr> ";
strVar += "        <th>File Number<\/th>";
strVar += "        <th>Date1<\/th>";
strVar += "        <th>Date2<\/th>";
strVar += "        <th>Status<\/th>";
strVar += "        <th>Num.<\/th>";
strVar += "      <\/tr>";
strVar += "    <\/thead>";
strVar += "    <tbody>";
strVar += "      <tr> ";
strVar += "        <td>KABC<\/td>";
strVar += "        <td>09\/12\/2002<\/td>";
strVar += "        <td>09\/12\/2002<\/td>";
strVar += "        <td>Submitted<\/td>";
strVar += "        <td>0<\/td>";
strVar += "";
strVar += "      <\/tr>";
strVar += "      <tr> ";
strVar += "        <td>KCBS<\/td>";
strVar += "        <td>09\/11\/2002<\/td>";
strVar += "        <td>09\/11\/2002<\/td>";
strVar += "        <td>Lockdown<\/td>";
strVar += "        <td>2<\/td>";
strVar += "      <\/tr>";
strVar += "";
strVar += "      <tr> ";
strVar += "        <td>WFLA<\/td>";
strVar += "        <td>09\/11\/2002<\/td>";
strVar += "        <td>09\/11\/2002<\/td>";
strVar += "        <td>Submitted<\/td>";
strVar += "        <td>1<\/td>";
strVar += "      <\/tr>";
strVar += "      <tr> ";
strVar += "        <td>WPPP<\/td>";
strVar += "        <td>03\/19\/2003<\/td>";
strVar += "        <td>03\/19\/2003<\/td>";
strVar += "        <td>In-Progress<\/td>";
strVar += "";
strVar += "        <td>0<\/td>";
strVar += "      <\/tr>";
strVar += "      <tr> ";
strVar += "        <td>WRRR<\/td>";
strVar += "        <td>02\/19\/2002<\/td>";
strVar += "        <td>02\/19\/2002<\/td>";
strVar += "        <td>Submitted<\/td>";
strVar += "        <td>5<\/td>";
strVar += "";
strVar += "      <\/tr>";
strVar += "      <tr> ";
strVar += "        <td>WTTT<\/td>";
strVar += "        <td>02\/19\/2002<\/td>";
strVar += "        <td>02\/19\/2002<\/td>";
strVar += "        <td>In-Progress<\/td>";
strVar += "        <td>0<\/td>";
strVar += "      <\/tr>";
strVar += "";
strVar += "      <tr> ";
strVar += "        <td>WYYD<\/td>";
strVar += "        <td>02\/11\/2002<\/td>";
strVar += "        <td>02\/11\/2002<\/td>";
strVar += "        <td>Submitted<\/td>";
strVar += "        <td>7<\/td>";
strVar += "      <\/tr>";
strVar += "      <tr> ";
strVar += "        <td>WRRR<\/td>";
strVar += "";
strVar += "        <td>02\/19\/2002<\/td>";
strVar += "";
strVar += "        <td>02\/19\/2002<\/td>";
strVar += "        <td>Submitted<\/td>";
strVar += "        <td>5<\/td>";
strVar += "      <\/tr>";
strVar += "    <\/tbody>";
strVar += "";
strVar += "    <\/table>";

document.getElementById('mstrWrapper').innerHTML = strVar

var table = document.getElementById("mstrTable");
var thead = table.getElementsByTagName("thead")[0];
var tbody = table.getElementsByTagName("tbody")[0];
var ishigh;

tbody.onclick = function (e) {
  e = e || window.event;
  var td = e.target || e.srcElement; //assumes there are no other elements inside the td
  var row = td.parentNode;
  if (ishigh&&ishigh!=row){
    ishigh.className='';
  }
  row.className = row.className==="highlighted" ? "" : "highlighted";
  ishigh=row;
}

thead.onclick = function (e) {
  e = e || window.event;
  var th = e.target || e.srcElement;  //assumes there are no other elements in the th
  //alert(th.innerHTML);  ### FOR LATER (DB BACK END USE) ###
}
document.onkeydown = function(e){
    e = e || event;
    var code = e.keyCode, rowslim = table.rows.length - 2, newhigh;
    if(code === 38){ //up arraow
        newhigh = rowindex(ishigh) - 2;
        if(!ishigh || newhigh < 0){return GoTo('mstrTable', rowslim);}
        return GoTo('mstrTable', newhigh);
    } else if (code === 40){ //down arrow
        newhigh = rowindex(ishigh);
        if(!ishigh || newhigh > rowslim){return GoTo('mstrTable', 0);}
        return GoTo('mstrTable', newhigh);
    }
}

function GoTo(id,nu){
  var obj=document.getElementById(id),
      trs=obj.getElementsByTagName('TR');
  nu = nu + 1;
  if (trs[nu]){
    if (ishigh&&ishigh!=trs[nu]){
      ishigh.className='';
    }
    trs[nu].className = trs[nu].className=="highlighted" ? "" : "highlighted";
    ishigh=trs[nu];
   }
}

function rowindex(row){
    var rows = table.rows, i = rows.length;
    while(--i > -1){
        if(rows[i] === row){return i;}
    }
}

}//end of nested function
</script>
<input type="button" name="" value="GoTo 0" onmouseup="GoTo('mstrTable',0);" />
<input type="button" name="" value="GoTo 1" onmouseup="GoTo('mstrTable',1);" />
<input type="button" name="" value="GoTo 2" onmouseup="GoTo('mstrTable',2);" />
<input type="button" name="" value="GoTo 3" onmouseup="GoTo('mstrTable',3);" />
<br>
<input type="button" value="LOAD" onclick="writeit()">

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:03:44.483

您的函数在 中*声明*，`writein()`因此它们也仅在 的范围内可见`writein()`。

一个快速修复将是使用一个*函数表达式*，它可以使`GoTo()`全局：

```
GoTo = function (id,nu) {... 
```

也许解决问题的最佳方法是删除按钮的在线事件监听器，并将它们附加`addEventListener()`到`writein()`. `input`只需将s （不是带有 value 的那个）括`LOAD`在 a 中`<div id="inputs">`，然后您就可以执行以下操作：

```
//end of nested function
var inputs = document.getElementById('inputs').getElementsByTagName('input');
for (var n = 0; n < inputs.length; n++) {
    inputs[n].addEventListener('click', (function (x) {
        return function () {GoTo('mstrTable', x);}
    }(n)), false);      
} 
```

# javascript - DOMContentLoaded 在 $(document).ready 中？

> ID：15275587
> 
> 赞同：1
> 
> 时间：2013-03-07T15:49:43.757
> 
> 标签：javascript, jquery, dom, domready

目前我尝试熟悉一个插件。在插件主页上，有几个关于如何使用它的示例。

在一个示例中，有以下代码：

```
function loaded() {
        iScroll = new iScroll('wrapper');
    }

    document.addEventListener('touchmove', function (e) {
        e.preventDefault();
    }, false);

    //Use this for high compatibility (iDevice + Android)
    document.addEventListener('DOMContentLoaded', function () {
        setTimeout(loaded, 200);
    }, false); 
```

因为我也在使用 jQuery，所以我想在里面使用那个代码`$(document).ready`，我相信这基本上是 jQuery 的做法`DOMContentLoaded`。那么删除&
是否安全，只留下里面？`document.addEventListener('DOMContentLoaded', function () {``}, false);``setTimeout(loaded, 200);``$(document).ready`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:51:42.163

是的，jQuery`DOMContentLoaded`在可用时使用事件，如果您的代码位于`ready`回调中，则可以省略`DOMContentLoaded`.

从源代码：

```
// Standards-based browsers support DOMContentLoaded
} else if ( document.addEventListener ) {
    // Use the handy event callback
    document.addEventListener( "DOMContentLoaded", completed, false );

    // A fallback to window.onload, that will always work
    window.addEventListener( "load", completed, false ); 
```

# c# - 在 SharePoint 2010 的 ascx 页面上将网格导出到 excel

> ID：15275593
> 
> 赞同：1
> 
> 时间：2013-03-07T15:49:59.807
> 
> 标签：c#, sharepoint-2010

我正在尝试将网格导出到 SharePoint Web 部件解决方案中 ascx 页面上的 excel。它引发以下错误

```
Control 'ctl00_ctl24_g_20574c20_e209_4887_ab02_83ee55a79fc5_ctl00_gdReport' of type 'GridView' must be placed inside a form tag with runat=server. 
```

为了避免这个错误，我必须使用以下方法，但是编译器会抛出一个错误，说“没有找到合适的方法来覆盖”

```
public override void VerifyRenderingInServerForm(Control control) { } 
```

完整代码：

```
protected void btnExcelExport_Click(object sender, EventArgs e) 
{ 
   PrepareForExport(gdSharedReport); 
   ExportToExcel(); 
} 

private void ExportToExcel() 
{ 
   Response.Clear(); 
   Response.AddHeader("content-disposition", "attachment;filename=Report.xls"); 
   Response.Charset = String.Empty; 
   Response.ContentType = "application/ms-excel"; 
   StringWriter stringWriter = new StringWriter(); 
   HtmlTextWriter HtmlTextWriter = new HtmlTextWriter(stringWriter); 
   gdSharedReport.RenderControl(HtmlTextWriter); 
   Response.Write(stringWriter.ToString()); 
   Response.End(); 
}

private void PrepareForExport(Control ctrl) 
{ 
   //iterate through all the grid controls 
   foreach (Control childControl in ctrl.Controls) 
   { 
      //if the control type is link button, remove it 
      //from the collection 
      if (childControl.GetType() == typeof(LinkButton)) 
      { 
         ctrl.Controls.Remove(childControl); 
      } 
      //if the child control is not empty, repeat the process 
      // for all its controls 
      else if (childControl.HasControls()) 
      { 
         PrepareForExport(childControl); 
      } 
   }  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T17:19:47.893

你的帖子说：

为了避免这个错误，我必须使用以下方法，但是编译器会抛出一个错误，说“没有找到合适的方法来覆盖”

```
public override void VerifyRenderingInServerForm(Control control) { } 
```

所以，我的猜测是您需要将覆盖添加到此**VerifyRenderingInServerForm**方法。

# linux - 如何从“struct linux_binprm”获取 argv？

> ID：15275594
> 
> 赞同：1
> 
> 时间：2013-03-07T15:50:04.503
> 
> 标签：linux, kernel

我想从现有的结构 linux_binprm 中提取所有 argv。在内核 3.4 上，我在 do_excve_common 中尝试了这段代码：[http](http://www.mail-archive.com/kernelnewbies@nl.linux.org/msg00278.html) : //www.mail-archive.com/kernelnewbies@nl.linux.org/msg00278.html，但它不起作用。它返回（空）。有什么问题，如何获取 char * 字符串中的所有参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T01:24:42.490

. 如果您想在 do_execve_common() 中执行二进制加载程序之前获得完整的命令行，您可以尝试以下操作：函数 do_execve_common() 参数表中有一个参数 *argv，为什么还要从“struct linux_binprm”中获取 argv ? 您可以通过以下代码直接使用 *argv。在 do_execve_common() 中，插入如下代码：

```
argc = count(argv, MAX_ARG_STRINGS);
i = 0;
while (i < argc)
{
    const char __user *str;
    int len;

    ret = -EFAULT;
    str = get_user_arg_ptr(argv, i);
    if (IS_ERR(str))
        goto out;

    len = strnlen_user(str, MAX_ARG_STRLEN);
    if (!len)
        goto out;

    //copy the str to kernel temporary storage
    //NOTE: tmp[] is a string array, 
    //      the memory should have been allocated already for strings storage, 
    //      each string is ended with \0
    memcpy(tmp[i], str, len)
} 
```

执行这些代码后，我认为 argv 字符串将全部保存在 tmp[] 数组中。

. 而如果你想在二进制加载器执行后获取完整的命令行，我认为此时参数页面已经设置正确，那么你可以尝试以下方法来获取完整的命令行：有一个函数 proc_pid_cmdline() in . /fs/proc/base.c 文件，您可以重复使用 proc_pid_cmdline() 函数中的大多数代码来从参数页面获取完整的命令行。

# c++ - 寻找最有效的数据结构来创建索引文件

> ID：15275596
> 
> 赞同：2
> 
> 时间：2013-03-07T15:50:10.437
> 
> 标签：c++, performance, data-structures, big-o, video-capture

我有一个视频文件，它由许多连续的二进制数据帧组成。每帧也有一个唯一的时间戳（不是它在文件中的序号，而是一个值，由相机在录制时提供）。另一方面，我有一个 API 函数，它根据该帧的序号检索该帧。让事情变得更复杂一些 - 我有一个玩家，他提供了时间戳，并且应该获取该帧的二进制数据。

另一个可悲的事情是：时间戳不是连续的。它们可以是连续的，但不能保证，因为围绕最大无符号短大小可能会发生回绕。所以时间戳序列可以是 54567, 54568, ... , 65535, 65536 , ... 或
54567, 54568, ..., 65535, 0, 1, ...

所以它可能如下所示：

```
Frame 0
timestamp 54567
binary data
........
Frame 1
timestamp 54569
binary data
........
Frame 2
timestamp 54579
binary data
.
.
.
Frame n
timestamp m
binary data

0 <= n <= 65536 (MAX_UNSIGNED_SHORT)
0 <= m <= MAX_UNSIGNED_INT 
```

剪辑播放器 API 应该能够通过时间戳获取二进制帧。但是，在内部，我只能通过帧序号来获取帧。因此，如果我被要求输入时间戳`m`，我需要遍历`n`帧，以找到带有时间戳的帧`m`。

为了优化它，我选择创建一个索引文件，它可以让我在时间戳和帧序号之间进行匹配。这是我的问题：

目前我的索引文件由 size 的二进制对组成`2*sizeof(unsigned int)`，其中包含时间戳和帧序号。播放器稍后会从该文件中`stl map`创建`key==timestamp`, `value==frame sequential number`。

有什么方法可以更有效地做到这一点吗？我是否应该将索引文件创建为某些数据结构的转储，以便稍后在打开剪辑时由剪辑播放器将其加载到内存中，这样我就可以 O(1) 访问帧？您还有其他建议吗？

升级版：

我已经更新了名称和要求（时间戳不一定是连续的，并且帧数由 MAX_UNSIGNED_SHORT 值限制）。还要感谢所有已经抽出时间并给出答案的人。插值搜索是一个有趣的想法，尽管我自己从未尝试过。我想问题将是运行时之间`O(1)`和`O(log log N)`运行时的增量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:08:55.430

看起来我们应该能够做出以下假设：a）视频文件本身在创建后不会被修改 b）播放器可能想要找到连续的帧，即当它进行正常播放时 c）播放器可能想要找到随机帧，即当它正在执行 FF、REW 或跳过或跳过章节时

鉴于此，为什么不做一个 HashMap 关联 Frame Id 和 Frame Index 呢？您可以创建一次，玩家可以阅读它，然后可以对请求的帧进行简单且有时间限制的查找。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:03:05.767

这里有一系列的权衡。

您的索引文件已经是一个数据结构的转储：一个数组。如果您不打算经常插入或删除帧，并将此数组保持在排序顺序，则可以轻松地`std::binary_search`对数组进行二进制搜索（使用 ）。插入和删除需要 O(N)，但查找仍然是 O(log N)。该数组将占用更少的内存空间，并且可以更快地从索引文件中读取和写入。

如果您正在执行大量插入和删除帧，那么转换为`std::map`结构将为您提供更好的性能。如果帧的数量很大，或者你想用它们存储更多的元数据，你可能想看看[B-tree structure ，或者只是使用像](http://en.wikipedia.org/wiki/B-tree)[Sqlite](http://www.sqlite.org/)或[BerkeleyDB](http://www.oracle.com/technetwork/products/berkeleydb/overview/index.html)这样的嵌入式数据库。这两个都实现了 B-tree 索引并且是经过良好测试的代码片段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T16:28:46.037

只需将帧数据存储在一个数组中，其中索引表示帧号。然后创建一个从相机索引到帧号的哈希映射。您可以获得属于 O(1) 中的帧号或相机索引的帧，而几乎不使用比当前方法更多的内存。

或者，您可以维护一个按帧号索引的数组，该数组存储（相机索引，数据）对，并在您需要通过相机索引访问它时对其执行 O(log n) 二进制搜索。这利用了相机索引已排序的事实。

在 C++ 的标准库中，哈希映射可用作`std::unordered_map`（如果您的编译器/STL 支持它们，情况可能并非如此，因为它们最近才被添加到 C++ 标准中），尽管基于树的`std::map`（使用 O(log n)查找）可能足以达到此目的。

二进制搜索实现可作为`std::binary_search`.

# javascript - 如何将 HTML 插入 Mongodb？

> ID：15275599
> 
> 赞同：8
> 
> 时间：2013-03-07T15:50:16.737
> 
> 标签：javascript, json, mongodb

当我尝试粘贴 HTML 文本文件时，我不断被踢出外壳。如何才能做到这一点？我首先需要使用一些javascript对其进行编码吗？

例子：

```
db.test.insert({x:"<div id='product-description'><p>Who hasn’t wished for a mini-Roomba to    handle the arduous task of cleaning their iPhone screen? Now your dreams have come true!</p>  <p>See the Takara web page for a <a href='http://www.takaratomy.co.jp/products/automee/'  title='automee s' target='_blank'>demo video.</a></p>
<p><strong>Colors: </strong> White, Red, Orange and Blue<br>
Runs on a single AA battery.</p>
<p>1,575 yen</p><!-- end #product-description --></div>"}) 
```

**编辑**

我在我的 html 中只放了单引号，并将整个内容用双引号括起来，但还是不行。外壳错误：

```
> j = ({z:"<div id='product-description'><p>Who hasn
---
Unicode text could not be correctly displayed.
Please change your console font to a Unicode font (e.g. Lucida Console).
---

â€™
bye 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T08:45:29.933

您需要删除或编码字符串中的控制字符。

例如，将您的文本粘贴到[此处](http://coderstoolbox.net/string/)，并编码为 UTF-8 ECMAScript（这意味着 javascript 字符串）。

ps：这里有一篇关于javascript中字符串的文章。告诉你什么需要转义。[http://docstore.mik.ua/orelly/webprog/jscript/ch03_02.htm](http://docstore.mik.ua/orelly/webprog/jscript/ch03_02.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-16T11:47:17.770

**rompetroll**提供了一些很好的入门参考。我也在网上找到了一个很好的解决方案：

[关联](https://css-tricks.com/snippets/javascript/htmlentities-for-javascript/#comment-83047)

但我认为关于“将 html 从 db 显示回浏览器”仍然存在一些混淆。因此，以下是消除这种混淆的步骤：

**第1步：将html存储在mongodb中**

Mongo 以对象的形式存储所有内容。基本上**将您的 html 转换为 utf-8 或 ASCII 编译字符串**，然后将其存储到 mongo。

```
<div>hi!</div> [from]

&lt;div&gt;hi!&lt;/div&gt; [to UTF-8] 
```

**第 2 步：向浏览器显示 html**

这是使某些人感到困惑的步骤。人们经常忘记在将字符串显示到浏览器之前将其转换回 html。您必须**使用与编码相同的方法来解码您的 html**。

```
&lt;div&gt;hi!&lt;/div&gt; [output from mongo (decode it to html)]

<div>hi!</div> [browser output of above string] 
```

（浏览器会将其读取为字符串并按原样显示，而不是 html（嗨！），因此需要解码）

我提供的[链接对这两个步骤都有参考。](https://css-tricks.com/snippets/javascript/htmlentities-for-javascript/#comment-83047)

希望这会有所帮助

干杯:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-20T20:14:45.153

使用[compass](https://www.mongodb.com/products/compass)，你不需要编码。[Studio3T](https://studio3t.com/)编辑器也可以使用，但您需要许可证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-18T16:22:00.740

要通过 MongoDB 控制台添加 html，您需要对字符串进行转义。使用这个：[https ://www.freeformatter.com/json-escape.html#ad-output](https://www.freeformatter.com/json-escape.html#ad-output)

### 脚步

*   复制 HTML
*   转到上面的链接，粘贴 HTML 点击“Escape”
*   复制转义的 HTML
*   插入 HTML（例如`db.Emails.updateMany({name: 'email/seller'}, {$set: {template: "<!DOCTYPE html\">\r\n<html lang=\"en\"> ..."}}`：）

# jquery - 查找文本并替换其他文本

> ID：15275601
> 
> 赞同：1
> 
> 时间：2013-03-07T15:50:21.290
> 
> 标签：jquery, html, replace

我可以帮忙，我需要 jQuery 中的代码来执行以下操作：

每次在身体的任何部位找到“ **Texto 0 ”时的代码。**“ **Texto 0** ”何时将 style1 替换为 style2（或删除 style1 并添加 style2）

我的代码是这样的。“...”代表介于两者之间的其他代码。

```
<div span="menu> <span> Texto 0 </ span> </ div>
....
....
...
<span class="style1"> Hello </ span> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:00:48.093

```
$('span:contains("Texto 0")').each(function() {
    if($(this).hasClass('style1'))
        $(this).removeClass('style1').addClass('style2');
}); 
```

[JSFiddle 示例](http://jsfiddle.net/Kf7pZ/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:02:28.867

```
 $('span').each(function(index) {
     if($(this).val().indexOf("Text 0") !== -1) {
       $(this).removeClass('style1')
       $(this).addClass('style2')
     }
   }) 
```

# postgresql - 在 postgres 上使用索引进行慢速 sql 选择

> ID：15275606
> 
> 赞同：4
> 
> 时间：2013-03-07T15:50:35.843
> 
> 标签：postgresql

我有一个生产数据库，它使用 londist 复制到另一台主机。桌子看起来像

```
# \d+ usermessage
               Table "public.usermessage"
  Column       |       Type        | Modifiers | Description
-------------------+-------------------+-----------+-------------
 id                | bigint            | not null  |
 subject           | character varying |           |
 message           | character varying |           |
 read              | boolean           |           |
 timestamp         | bigint            |           |
 owner             | bigint            |           |
 sender            | bigint            |           |
 recipient         | bigint            |           |
 dao_created       | bigint            |           |
 dao_updated       | bigint            |           |
 type              | integer           |           |
 replymessageid    | character varying |           |
 originalmessageid | character varying |           |
 replied           | boolean           |           |
 mheader           | boolean           |           |
 mbody             | boolean           |           |
Indexes:
"usermessage_pkey" PRIMARY KEY, btree (id)
"usermessage_owner_key" btree (owner)
"usermessage_recipient_key" btree (recipient)
"usermessage_timestamp_key" btree ("timestamp")
"usermessage_type_key" btree (type)
Has OIDs: no 
```

如果在复制的数据库上执行，则选择速度如预期的那样快，如果在生产主机上执行，则速度非常慢。更奇怪的是，并非所有时间戳都很慢，其中一些在两台主机上都很快。生产主机后面的文件系统和存储都很好，并且没有被大量使用。有任何想法吗？

```
replication# explain analyse SELECT COUNT(id) FROM usermessage WHERE owner = 1234567 AND timestamp > 1362077127010;
                                                                 QUERY PLAN
----------------------------------------------------------------------------------------------------------------------------------------------------
 Aggregate  (cost=263.37..263.38 rows=1 width=8) (actual time=0.059..0.060 rows=1 loops=1)
   ->  Bitmap Heap Scan on usermessage  (cost=259.35..263.36 rows=1 width=8) (actual time=0.055..0.055 rows=0 loops=1)
         Recheck Cond: ((owner = 1234567) AND ("timestamp" > 1362077127010::bigint))
         ->  BitmapAnd  (cost=259.35..259.35 rows=1 width=0) (actual time=0.054..0.054 rows=0 loops=1)
               ->  Bitmap Index Scan on usermessage_owner_key  (cost=0.00..19.27 rows=241 width=0) (actual time=0.032..0.032 rows=33 loops=1)
                     Index Cond: (owner = 1234567)
               ->  Bitmap Index Scan on usermessage_timestamp_key  (cost=0.00..239.82 rows=12048 width=0) (actual time=0.013..0.013 rows=0 loops=1)
                     Index Cond: ("timestamp" > 1362077127010::bigint)
 Total runtime: 0.103 ms
(9 rows)

production#  explain analyse SELECT COUNT(id) FROM usermessage WHERE owner = 1234567 AND timestamp > 1362077127010;
                                                                        QUERY PLAN
------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Aggregate  (cost=267.39..267.40 rows=1 width=8) (actual time=47536.590..47536.590 rows=1 loops=1)
   ->  Bitmap Heap Scan on usermessage  (cost=263.37..267.38 rows=1 width=8) (actual time=47532.520..47536.579 rows=3 loops=1)
         Recheck Cond: ((owner = 1234567) AND ("timestamp" > 1362077127010::bigint))
         ->  BitmapAnd  (cost=263.37..263.37 rows=1 width=0) (actual time=47532.334..47532.334 rows=0 loops=1)
               ->  Bitmap Index Scan on usermessage_owner_key  (cost=0.00..21.90 rows=168 width=0) (actual time=0.123..0.123 rows=46 loops=1)
                     Index Cond: (owner = 1234567)
               ->  Bitmap Index Scan on usermessage_timestamp_key  (cost=0.00..241.22 rows=12209 width=0) (actual time=47530.255..47530.255 rows=5255617 loops=1)
                     Index Cond: ("timestamp" > 1362077127010::bigint)
 Total runtime: 47536.668 ms
(9 rows) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T15:58:37.823

我对 postgresql 的熟悉不如 mysql 但是

（实际时间=0.013..0.013 行=0 循环=1）

和

（实际时间=47530.255..47530.255 行=5255617 循环=1）

向我建议您的生产数据库有更多数据，因为行是截然不同的。

# jquery - HTML jQuery通过缩略图用图像更改段落文本

> ID：15275611
> 
> 赞同：1
> 
> 时间：2013-03-07T15:50:43.763
> 
> 标签：jquery, html, image, replace, paragraph

我刚开始在我的网站中使用 jQuery，它有一个类似画廊的网站，里面有一堆缩略图。当我单击缩略图时，我希望图片在带有相关文本的新 div 框中打开。我已经设法更改了 div 框中的图像，所以它适合它的缩略图，但我似乎无法弄清楚如何用它来更改文本。这是图片下方相对较长的文本，我希望每个缩略图都有不同的文本和图像。

这是我的 HTML：

```
<div id="showcontent">
    <h1 class="content_header">HEADER</h1>
    <img class="content_image" src="img/image_01_large.png" alt="" />
    <p class="text_01">
        texttexttext
    </p>
    <p class="text_02">
        text text text
    </p>
</div>
<div id="thumbnails">
    <p>
<img src="img/image_01_thumb.png" alt=""/>
<img src="img/image_02_thumb.png" alt=""/>
    <img src="img/image_03_thumb.png" alt=""/>
    <img src="img/image_04_thumb.png" alt=""/>
    </p>
</div> 
```

这是我的 jQuery 代码：

```
function viewContent(){
    $(document).ready(function(){
        $('#thumbnails img').click(function(){
            $('.content_image').attr('src',$(this).attr('src').replace('thumb','large'));
            $('#showcontent p').attr('class').replace('.text_01', '.text_02');
        });
    });
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:04:52.020

我不完全确定我是否理解你的问题。

但是我认为您需要在单击图像时更改“text_01”内的文本。

所以你需要有一些与图像相关联的文本，我将使用 alt 属性。

```
 $(document).ready(function(){
    $('#thumbnails img').click(function(){
        $('.content_image').attr('src',$(this).attr('src').replace('thumb','large'));
        $('#showcontent p').html($(this).attr("alt"));
    });
}); 
```

[http://jsfiddle.net/vinaylobo/KFM4w/3/](http://jsfiddle.net/vinaylobo/KFM4w/3/)

# python - Python 缩进，IF 和 ELSE 对齐

> ID：15275628
> 
> 赞同：2
> 
> 时间：2013-03-07T15:51:32.197
> 
> 标签：python, syntax, python-2.7, indentation

我是 python 新手，我仍然在努力了解 sytnax 的工作原理，你需要如何对齐你的 If 和 else 以使其正常工作。我怎么真的知道哪个 if 与哪个 else 相配？特别是在使用嵌套代码块时。

在下面的代码中，else 后跟注释 Prime！据我了解， else 与 if 语句一起使用，`(n % div == 0):`但是为什么它与 FOR 语句对齐呢？

我认为最后一个 else 语句是与之相关的，`if n == 2:`但 else 与它没有对齐，而是在它之后。对于同一个语句`if n == 2:`，为什么在它`n += 1`之前`pime_count +=1`而不是之后对齐。

我知道 Else 和 if 的位置非常重要，因为如果我决定移动它们中的任何一个，代码就会停止工作。我似乎无法理解的是，如果对齐方式似乎不一致，python 是如何知道其他情况的。

```
#!/usr/bin/env python
#
# Problem Set 1a
#
# A program that computes and prints the 1000th prime number.
# Finds primes using trial division (least efficient method)
#------------------------------------------------------------

prime_count = 0
n = 2 

while (prime_count <= 1000):
  #if even, check for 2, the only even prime
  if (n % 2 == 0):
    if n == 2:
      prime_count += 1
    n += 1
  else:
    # number is odd, possible prime
    for div in range(3, n, 2):
      if (n % div == 0):
        # not a prime
        n += 1
        break
    else:
      # prime!
      prime_count += 1
      if prime_count == 1000:
        print "The 1000 prime is", n
      else:
        n += 1 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-07T15:55:17.687

规则非常简单：`else`子句必须与它所引用的语句（最常见的是语句）具有相同的缩进`if`。

现在，这里：

```
for div in range(3, n, 2):
  if (n % div == 0):
    # not a prime
    n += 1
    break
else:
  ... 
```

你没有使用`if`- `else`，你正在使用[`for`-`else`](http://docs.python.org/2/reference/compound_stmts.html#the-for-statement)！

这个结构的意思是“执行`else`块*，除非*循环已经通过`break`”终止。

请参阅[Python 中的 for ... else](http://psung.blogspot.co.uk/2007/12/for-else-in-python.html)进行讨论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:54:06.867

**只要在它们之间的较低缩进处没有其他东西，** An`if`就与an`else`在同一个缩进中。它们必须在同一个“块”中。但是，在您的情况下，后面的 that实际上并没有加入到 a中，而是加入到它之前的循环中！**`else``# prime!``if``for div in range(3, n, 2):`**

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T15:56:00.170

`else`附加到`for`循环意味着“如果循环完成而没有命中语句，*则执行此代码”。*有时它可能很有用，但对于以前没有遇到过它的人来说往往会感到困惑！`for``break`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T16:00:27.940

我认为这可以帮助您了解 python 缩进的工作原理[http://psung.blogspot.com/2007/12/for-else-in-python.html](http://psung.blogspot.com/2007/12/for-else-in-python.html)

在这样的构造中：

```
for i in foo:
  if bar(i):
    break
else:
  baz() 
```

else 套件在 for 之后执行，但前提是 for 正常终止（而不是中断）。

在其他情况下 else 会追随 if

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T16:09:54.300

有2条规则相当简单，

1.  `if`和的缩进`else`必须相同

    ```
    for x in range(15):
        if x > 10:
            print 'x is more than 10'
        else:
            print 'x is less than or equal to 10' 
    ```

2.  没有任何缩进小于或等于的缩进`if`并且`else`应该在它们之间所以，这是无效的/将引发一个`SyntaxError`.

    ```
    for x in range(15):
        if x > 10:
            print 'x is more than 10'
        print x
        else:
            print 'x is less than or equal to 10' 
    ```

此外，如[PEP 8中所述](http://www.python.org/dev/peps/pep-0008/#indentation)

> 每个缩进级别使用 4 个空格。

```
for div in range(3, n, 2):
  if (n % div == 0):
    # not a prime
    n += 1
    break
else: # at same indent as for
  # prime! 
```

此外，您上面的缩进意味着[进行了 for...else](http://docs.python.org/2/reference/compound_stmts.html#for)循环（如果使用 退出 for 循环，则执行 else 子句`break`），而不是[if..else](http://docs.python.org/2/reference/compound_stmts.html#if)。**

# html - Outlook 2013 仅 HTML 电子邮件中的图像间隙

> ID：15275630
> 
> 赞同：2
> 
> 时间：2013-03-07T15:51:34.360
> 
> 标签：html, image, email, outlook-2013

我的 HTML 电子邮件仅在 Outlook 2013 中出现问题，它在以前的版本（包括 2007 和 2010）中看起来很棒。

我添加了 style="display:block; 我的表格和 td 有黑色背景色。我尝试在 td 和 img 上指定宽度和高度以及在之前的帖子中为包含 td 建议的行高样式.

这是代码：

```
<table width="200" cellpadding="0" cellspacing="0" align="right" bgcolor="#000000"><tr><td width="156" height="158" style="background-color:#000000; line-height:13px;"><img src="http://identifix.skmgroupwork.com/email/iden074/images/JerryGTruglia.jpg" width="156" height="158" align="right" alt="Jerry G Truglia" style="padding: 0px 20px 0px 0px; width: 156px; height: 158px;display:block;"></td></tr></table> 
```

包含代码：

```
<table width="510" align="center" cellpadding="0" cellspacing="0" style="" bgcolor="#000000">
            <tbody>
                <tr>
                    <td colspan="2" align="left" valign="top" style="font-family: Arial, Helvetica, sans-serif; color: #ffffff; font-size: 12px; line-height: 20px; padding: 0px 30px 0px 40px; ">
                    <table width="180" cellpadding="0" cellspacing="0" align="right" bgcolor="#000000"><tr><td width="156" height="168" style="background-color:#000000; line-height:13px;"><img src="http://identifix.skmgroupwork.com/email/iden074/images/JerryGTruglia.jpg" width="156" height="158" align="right" alt="Jerry G Truglia" style="padding: 0px 0px 0px 0px; width: 156px; height: 158px;display:block;"></td></tr></table><span style="color:#feae38;font-size:16px;"><b>Don’t Miss Your Chance to Catch<br>Identifix&rsquo;s Live Training, <span class="appleLinksWhite">3/12.</span></b></span><br><br>Seats are filling up quickly, so be sure to RSVP today for &ldquo;Find and Fix Faster – Your Path to More Profits,&rdquo; Identifix&rsquo;s live training event. Held <span class="appleLinksWhite" style="color: #ffffff;">on Tuesday, March 12th,</span> the session will be conducted by nationally recognized automotive industry expert, Jerry &ldquo;G&rdquo; Truglia, president of Automotive Technician Training Services (ATTS).<br><br>
                    <span style="color:#feae38;font-size:14px;"><b>Learn how your shop can:</b></span><br><br>
                    <img style="display:inline;" src="http://identifix.skmgroupwork.com/email/iden074/images/bulletSM.jpg"><span style="font-family: Arial, Helvetica, sans-serif;color:#feae38;font-size:13px;"><b>&nbsp;Diagnose and repair vehicles faster</b></span><br>
                    <img style="display:inline;" src="http://identifix.skmgroupwork.com/email/iden074/images/bulletSM.jpg"><span style="font-family: Arial, Helvetica, sans-serif;color:#feae38;font-size:13px;"><b>&nbsp;Reduce non-billable work time</b></span><br>
                    <img style="display:inline;" src="http://identifix.skmgroupwork.com/email/iden074/images/bulletSM.jpg"><span style="font-family: Arial, Helvetica, sans-serif;color:#feae38;font-size:13px;"><b>&nbsp;Boost customer trust and satisfaction</b></span><br>
                    <img style="display:inline;" src="http://identifix.skmgroupwork.com/email/iden074/images/bulletSM.jpg"><span style="font-family: Arial, Helvetica, sans-serif;color:#feae38;font-size:13px;"><b>&nbsp;Increase tech confidence and productivity</b></span><br>
                    <img style="display:inline;" src="http://identifix.skmgroupwork.com/email/iden074/images/bulletSM.jpg"><span style="font-family: Arial, Helvetica, sans-serif;color:#feae38;font-size:13px;"><b>&nbsp;Stay profitable</b></span><br><br>
                    Join us <span class="appleLinksWhite" style="color: #ffffff;">from 7:30 &ndash; 9:00 p.m.</span> at <a style="color:#feae38;" target="_blank" href="https://plus.google.com/104076111016352099629/about?gl=us&hl=en">ATTS</a>, <span class="appleLinksWhite" style="color: #ffffff;">10 Lupi Plaza, Mahopac, NY 10541</span>. Pizza and soft drink will be provided, followed by a hands-on demonstration of Identifix’s award-winning online tool, Direct-Hit<sup>&reg;</sup>.<br>
                    <br><strong><span style="color:#feae38;font-size:16px;"><b>Reserve your seat before it’s too late!<br>Call <span class="appleLinksWhite" style="color: #ffffff;">1.855.270.5855</span> now to RSVP.<span style="color:#feae38;"><b></strong><br><br></td>
                </tr>
                <tr>
                    <td align="left" valign="top" colspan="2" style="padding: 14px 0px; "><img src="http://identifix.skmgroupwork.com/email/iden045/images/iden045-divider.gif" width="550" height="1" alt="" border="0" style="background-color: #ffffff; width: 570px; height: 1px; display: block; "></td>
                </tr>
                <tr>
                    <td colspan="2" align="left" valign="top" style="font-family: Arial, Helvetica, sans-serif; color: #ffffff; font-size: 11px; line-height: 16px; padding: 14px 0px 24px 40px;">
                    &#169;2013 Identifix | <span class="appleLinksWhite" style="color: #ffffff;">2714 Patton Road | Roseville, MN 55113</span> | <span class="appleLinksWhite" style="color: #ffffff;">1.800.745.9649</span></td>
                </tr>
            </tbody>
        </table> 
```

任何建议表示赞赏。谢谢，

道格拉斯，我试图添加一张图片，但它说我需要至少 10 个声望才能发布它，而我现在只有 1 个。它的链接是这个[http://identifix.skmgroupwork.com/email/iden074/images/snip.JPG](http://identifix.skmgroupwork.com/email/iden074/images/snip.JPG)

在仅在 Outlook 2013 上进行的石蕊测试中，出现了一个奇怪的白色，甚至没有对齐的间隙，出现在不应该存在的图像右侧。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-05T15:28:10.820

以下为我工作：

```
<td style="line-height:0px; mso-line-height-rule:exactly;"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T16:34:47.320

此问题是否特定于 Microsoft 电子邮件客户端？电子邮件在 Web 客户端上的外观如何？

我在 2013 年，有时在 2007 年遇到了各种各样的问题。这些问题通常可以通过使用秘密的 mso 特定 css 规则来解决。

例如; 使用 mso-line-height-rule：完全正确；inline css 将解决 Outlook 2013 推出所有 tds < 15px 的特别严重的问题。

如果不查看代码的其余部分，很难在代码中隔离问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T09:23:30.790

你应该尽量不要使用 colspans 让它在所有客户端中工作，比如 lotus notes 6.5 和 7

# vb.net - visual basic.net 中的多重链接控件数组

> ID：15275633
> 
> 赞同：1
> 
> 时间：2013-03-07T15:51:41.417
> 
> 标签：vb.net

在 vb6 中有带索引的控制数组。

该索引很有用：它可用于处理一组并行控制。在我的示例中，有一排按钮和一排图像，每个按钮分别影响每个图像。

```
but(1)    but(2)    but(3)
img(1)    img(2)    img(3) 
```

因此我可以做类似...

```
but_click(index) 
    img(index).do_something() 
```

除了在设计时创建 2 个数组并编写代码来管理这些数组之外，VB.NET 中还有其他方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T15:56:04.903

> 除了在设计时创建 2 个数组并编写代码来管理这些数组之外，VB.NET 中还有其他方法吗？

不，也不应该有。这是一件好事。许多人在从 VB6 转向 VB.NET 时，会错过控件数组。但实际上情况恰恰相反：VB.NET 没有控件数组，因为它不再需要它们，控件可以放入*普通*数组和集合中（在 VB6 中，控件数组是一种*解决*方法事实上你不能创建正常的控件数组）。

唯一的区别是*表单设计*器不支持这一点。如果您考虑一下，这也不足为奇：控件数组本质上是动态的，在设计时静态创建它们是没有意义的，您*必须*在代码中管理它们。

# jquery - .live() 超时可能吗？

> ID：15275636
> 
> 赞同：0
> 
> 时间：2013-03-07T15:51:43.280
> 
> 标签：jquery, performance

我正在使用 ajax 在后面的代码中调用 C# 方法。

该过程可能需要很长时间才能返回答案。在逐步完成我的 C# 之后，我很肯定该函数正在返回`true`响应。

我的`.live()`click 函数接受 true 或 false 并显示结果。正如我所提到的，我知道 C# 返回 true。

因此，当响应来得相当快时，此功能将按我的意图工作。一般来说，函数是否有可能`.live()`超时而不响应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:55:07.867

我假设您正在使用[$.ajax在](http://api.jquery.com/jQuery.ajax/)[实时](http://api.jquery.com/live/)处理程序中向服务器发送请求，如果是这样

`live`没有超时，但是 ajax 有一个可以设置的超时。

前任：

```
$.ajax({
    ...,
    timeout: 300000 //5 minutes
}); 
```

附带说明一下，
如果您使用的是 jQuery >= 1.7，请使用[$.on](http://api.jquery.com/on/)而不是，`live`因为它在 1.7 中已被弃用并在 jQuery 1.9 中被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:55:20.193

No.`live()`是一个事件监听器。您将 jQuery 对象/元素/集合传递给它，并指定将这些元素绑定到的事件。此外，`.live()`前段时间已弃用，不应与 jQuery 1.8 或 1.9 一起使用，而应使用`.on()`. `live()`只要页面打开，就会继续收听。

# c# - 闭包捕获的变量也会修改原始变量

> ID：15275637
> 
> 赞同：6
> 
> 时间：2013-03-07T15:51:48.983
> 
> 标签：c#, .net, closures

我有以下简单的代码：

```
static void Main(string[] args)
{
    int j = 0;
    Func<int> f = () =>
    {
        for (int i = 0; i < 3; i++)
        {
            j += i;
        }
        return j;
    };

    int myStr = f();
    Console.WriteLine(myStr);
    Console.WriteLine(j);
    Console.Read();
} 
```

根据我在涉及闭包时所读到的内容，编译器创建了一个新类型，因此它可以存储捕获的变量并维护对它的引用。但是，当我运行以下代码时，两个打印行都显示 3。我期待 0 和 3，因为匿名方法在编译器生成的类中有自己的变量。那么为什么它还要修改外部变量呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-07T16:00:40.350

外部变量和闭包中*的变量是同一个变量*。您的程序相当于：

```
private class Closure
{
    public int j;
    public int Method()
    {
        for (int i = 0; i < 3; i++)
        {
            this.j += i;
        }
        return this.j;
    }
}
static void Main(string[] args)
{
    Closure closure = new Closure();
    closure.j = 0;
    Func<int> f = closure.Method;
    int myStr = f();
    Console.WriteLine(myStr);
    Console.WriteLine(closure.j);
    Console.Read();
} 
```

现在很清楚为什么你会得到观察到的结果吗？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-07T15:54:04.850

这就是闭包的工作方式，它们捕获变量，而不是值。所以`j`会有所改变。

如果你不想这样，你可以这样做：

```
static void Main(string[] args)
{
    int j = 0;
    Func<int> f = () =>
    {
        int k = j;
        for (int i = 0; i < 3; i++)
        {
            k += i;
        }
        return k;
    };
    int myStr = f();
    Console.WriteLine(myStr);
    Console.WriteLine(j);
    Console.Read();
} 
```

`j`仍然被闭包捕获，但没有被修改。只有副本`k`被修改。

**编辑：**

您正确地注意到这不适用于引用类型。在这种情况下，`k = j`存储对对象的引用的副本。*仍然有一个被*引用对象的副本，因此对该对象的任何修改都会影响这两个变量。

这是一个示例，说明如何将闭包用于引用类型而不更新原始变量：

```
static void Main(string[] args)
{
    Foo j = new Foo(0);
    Func<Foo> f = () =>
    {
        Foo k = new Foo(j.N); // Can't just say k = j;
        for (int i = 0; i < 3; i++)
        {
            k.N += 1;
        }
        return k;
    };

    Console.WriteLine(f().N);
    Console.WriteLine(j.N);
    Console.Read();
}

public class Foo
{
    public int N { get; set; }

    public Foo(int n) { N = n; }
} 
```

然而，字符串是*不可变*的引用类型，你实际上*可以*说`k = j`，与任意引用类型不同。考虑不变性的一种方法是，每次更新字符串的值时，实际上都是在创建一个新实例。所以`k = k + "1"`就像说`k = new String(k + "1")`。那时，它不再是对与`j`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-07T15:54:30.087

语言规范说：

> 匿名方法类似于 Lisp 编程语言中的 lambda 函数。C# 2.0 支持创建“闭包”，其中匿名方法访问周围的局部变量和参数。

在你的情况下，'j' 是周围的变量。

# ruby - 在 Ruby 中从数组转换为哈希

> ID：15275641
> 
> 赞同：0
> 
> 时间：2013-03-07T15:51:58.327
> 
> 标签：ruby, rspec

所以我正在解决一个 RSPEC 问题，我在这个网站上获得的所有帮助都很棒。不过，我遇到了一些障碍。

这个想法是在 Ruby 中创建一个字典对象，RSPEC 代码看起来像

```
require 'dictionary'

describe Dictionary do
  before do
    @d = Dictionary.new
  end

  it 'is empty when created' do
    @d.entries.should == {}
  end

  it 'can add whole entries with keyword and definition' do
    @d.add('fish' => 'aquatic animal')
    @d.entries.should == {'fish' => 'aquatic animal'}
    @d.keywords.should == ['fish']
  end

  it 'add keywords (without definition)' do
    @d.add('fish')
    @d.entries.should == {'fish' => nil}
    @d.keywords.should == ['fish']
  end

  it 'can check whether a given keyword exists' do
    @d.include?('fish').should be_false
  end

  it "doesn't cheat when checking whether a given keyword exists" do
    @d.include?('fish').should be_false # if the method is empty, this test passes with nil returned
    @d.add('fish')
    @d.include?('fish').should be_true # confirms that it actually checks
    @d.include?('bird').should be_false # confirms not always returning true after add
  end

  it "doesn't include a prefix that wasn't added as a word in and of itself" do
    @d.add('fish')
    @d.include?('fi').should be_false
   end

  it "doesn't find a word in empty dictionary" do
    @d.find('fi').should be_empty # {}
  end

  it 'finds nothing if the prefix matches nothing' do
    @d.add('fiend')
    @d.add('great')
    @d.find('nothing').should be_empty
  end

  it "finds an entry" do
    @d.add('fish' => 'aquatic animal')
    @d.find('fish').should == {'fish' => 'aquatic animal'}
  end

  it 'finds multiple matches from a prefix and returns the entire entry (keyword + definition)' do
    @d.add('fish' => 'aquatic animal')
    @d.add('fiend' => 'wicked person')
    @d.add('great' => 'remarkable')
    @d.find('fi').should == {'fish' => 'aquatic animal', 'fiend' => 'wicked person'}
  end

  it 'lists keywords alphabetically' do
    @d.add('zebra' => 'African land animal with stripes')
    @d.add('fish' => 'aquatic animal')
    @d.add('apple' => 'fruit')
    @d.keywords.should == %w(apple fish zebra)
  end

  it 'can produce printable output like so: [keyword] "definition"' do
    @d.add('zebra' => 'African land animal with stripes')
    @d.add('fish' => 'aquatic animal')
    @d.add('apple' => 'fruit')
    @d.printable.should == %Q{[apple] "fruit"\n[fish] "aquatic animal"\n[zebra] "African land animal with stripes"}
  end
end 
```

我拥有“它找到一个条目”的一切，这就是我遇到麻烦的地方。到目前为止，我的代码看起来像这样。并感谢这个网站上帮助我构建代码的每个人。

```
class Dictionary
  attr_accessor :keywords, :entries

  def initialize 
    @entries = {}
  end

  def add(defs)
    defs.each do |word, definition|
      @entries[word] = definition
    end      
  end

  def keywords
    @entries.keys.sort
  end

  def include?(key)
    @entries.key?(key)
  end 

  def find(query)
    @entries.select { |word, definition| word.scan(query).join == query}  
  end    
end 
```

我在该测试中遇到的错误是：

```
1) Dictionary finds an entry
     Failure/Error: @d.find('fish').should == {'fish' => 'aquatic animal'}
       expected: {"fish"=>"aquatic animal"}
            got: [["fish", "aquatic animal"]] (using ==)
       Diff:
       @@ -1,2 +1,2 @@
       -"fish" => "aquatic animal"
       +[["fish", "aquatic animal"]] 
```

所以看起来 finder 方法的输出是一个数组而不是一个哈希是一个问题。解决这个问题的最佳方法是什么？先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T16:08:43.263

您必须使用相当旧的 Ruby 版本。

在 Ruby 1.8.7 中：

```
{}.select{} # => [] 
```

使用最新的 Ruby：

```
{}.select{} # => {} 
```

你可以：

*   将 Ruby 升级到 1.9.2+
*   改为使用`reject`并反转您的条件
*   或使用我的[`backports`](http://github.com/marcandre/backports)gem 并`require 'backports/force/hash/select'`在 Ruby 1.8.x 中获得相同的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:16:32.967

尝试获取 select 返回的结果并执行以下操作：

```
Hash[result] 
```

或者更原始的，只是做一个哈希！

```
{result.first.first => result.first.last} 
```

# java - Joda：将日期和时间转换为 DateTime

> ID：15275656
> 
> 赞同：4
> 
> 时间：2013-03-07T15:52:34.560
> 
> 标签：java, date, datetime, time, jodatime

有没有办法将时间和日期变量转换为日期时间？

我在两个 DateTime 变量之间有一个周期，对于该周期中的每个日期，我想在该日期中存储一个带有开始 DateTime 和结束 DateTime 的周期，因此一天可以有多个由 DateTime 定义的周期。

似乎无法弄清楚如何将日期和时间组合到日期时间。

提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-07T15:55:35.980

普通的 java`Date`和[Joda-Time](http://www.joda.org/joda-time/) [`DateTime`](http://www.joda.org/joda-time/apidocs/org/joda/time/DateTime.html)应该可以达到目的。

```
Date date = new Date(); // java.util.Date; - This date has both the date and time in it already.
DateTime dateTime = new DateTime(date); 
```

有关Joda-Time 的更多[信息。](http://www.joda.org/joda-time/quickstart.html)

如果您有两个`String`对象，其中 1 包含`Date`和另一个`Time`，您可以组合 2 个字符串并使用[SDF](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)对其进行解析并获取`Date`对象，然后您可以将其转换为`DateTime`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-11T11:34:08.540

使用此修复它：

```
public DateTime dateAndTimeToDateTime(java.sql.Date date, java.sql.Time time) {
    String myDate = date + " " + time;
    SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
    java.util.Date utilDate = new java.util.Date();
    try {
        utilDate = sdf.parse(myDate);
    } catch (ParseException pe){
        pe.printStackTrace();
    }
    DateTime dateTime = new DateTime(utilDate);

    return dateTime;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-26T10:27:53.013

即使这个问题有点老并且已经回答了，我也找不到令人满意的解决方案。解决这个问题最好的方法可能是下面的代码（不需要任何解析和异常处理）：

```
public DateTime dateAndTimeToDateTime(java.sql.Date date, java.sql.Time time) {
    DateTime t = new DateTime(time);
    return new DateTime(date).withTime(t.getHourOfDay(), t.getMinuteOfHour(), t.getSecondOfMinute(), t.getMillisOfSecond());
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-07T16:09:11.953

我很确定您可以找到如何分别构建日期和时间实例。

但是，在 datetime 对象本身上，您可以指定以下内容。

```
dateTimeObject = dateTimeObject.withHourOfDay(12);
dateTimeObject = dateTimeObject.withMinuteofHour(59);
dateTimeObject = dateTimeObject.withSecondOfMinute(59); 
```

希望这可以帮助！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-07-16T19:40:48.963

## java.time

使用现代 Java 日期和时间 API java.time，这非常简单明了：

```
 LocalTime time = LocalTime.of(23, 45);
    LocalDate date = LocalDate.of(2019, Month.NOVEMBER, 23);

    LocalDateTime combined = date.atTime(time);
    System.out.println(combined); 
```

输出是：

> 2019-11-23T23:45

我知道你问过 Joda-Time。然而，Joda-Time 主页说：

> 请注意，Joda-Time 被认为是一个基本上“完成”的项目。没有计划进行重大改进。如果使用 Java SE 8，请迁移到`java.time`(JSR-310)。

## 链接

*   [Oracle 教程：日期时间](https://docs.oracle.com/javase/tutorial/datetime/)解释如何使用 java.time。
*   [Joda-Time 主页](https://www.joda.org/joda-time/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-16T05:10:37.217

```
DateTime dateTime = new DateTime("yyyy-MM-dd");.

System.out.println("============> " + dateTime.toString()); 
```

**输入**：2018-01-04
**输出**：=============> 2018-01-05T00:00:00.000+05:30

# powershell - Powershell 在导入时换行文本

> ID：15275662
> 
> 赞同：2
> 
> 时间：2013-03-07T15:52:51.603
> 
> 标签：powershell

我正在尝试使用 powershell 扫描日志文件并查找特定模式的出现。到目前为止，我使用正则表达式进行搜索的测试都失败了，但我注意到了一些我认为可能是原因的事情。在有问题的日志文件上运行 get-content 会带回文件，但会在 notepad++ 中显示时将单行包装到多行。

无论如何要阻止powershell包装文本，还是硬编码到窗口是powershell中行长的限制这一事实？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T16:03:16.573

`Out-File`可能会切线，默认情况下它会使用主机窗口的宽度写入行，默认为`80`. 也许尝试使用`Set-Content`或给`Out-File`一个`-Width`足够大的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T15:56:06.417

行在控制台中换行的事实仅仅是因为它显示文本的方式。它不会影响正则表达式。

话虽如此，您不需要使用`Get-Content`正则表达式搜索。`Select-String`应该能够自己完成这项工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T16:38:53.267

应用程序和操作系统通常用一个或两个控制字符表示换行符，通常是回车（反引号 r）和换行符（反引号 n）。

尝试通过显式添加`-delimiter`参数后跟这些控制字符之一来拆分您的内容。

```
get-content file.log -delimiter "`n" 
```

# jquery - 在jquery中定位特定的多选列表

> ID：15275663
> 
> 赞同：0
> 
> 时间：2013-03-07T15:52:52.327
> 
> 标签：jquery

我正在尝试创建一个多选列表，我可以通过单击列表中的第一个字段来清除所有选定的项目（这是一个空值，即“”）。

我正在使用这个 jquery：

```
 $("#States").change(function () {
    var sValue = $(this).val();
    if (sValue == "") {
        $(" option:selected").removeAttr("selected");
    }
    return false;       
}); 
```

问题是这也会取消选择我所有其他多选列表框中的项目。如何定位特定列表？（可能是一个非常简单的问题，但这是我第一次涉足 jquery）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T15:54:49.777

您可以使用`$(selector, context)`.

```
$("option:selected", this).prop("selected", false); 
```

**注意**：`val`多个选择元素的方法返回一个数组而不是字符串，因此您将数组与空字符串进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T15:54:50.143

您使用`$(this)`而不是针对所有选定的选项：

```
$("option:selected", this).prop("selected", false); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T15:54:52.227

将上下文添加到选择器。见下文，

```
$("option:selected", this).removeAttr("selected"); 
```

`.prop`如果您使用的是最新版本的 jQuery，请使用。有关更多信息，请参阅其他答案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T15:54:57.940

您需要引用您正在使用的元素：

```
if (sValue == "") {
    $('option:selected', this).removeAttr("selected");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T15:54:20.110

您可以通过扩展 jQuery 选择器来定位它：

```
$("#States option:selected").removeAttr("selected"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-07T15:56:12.193

我认为下面的代码会起作用。

```
$("#States").change(function () {
    var sValue = $(this).val();
    if (sValue == "") {
        $(this).find("option:selected").removeAttr("selected");
    }
    return false;       
}); 
```

# mysql - 是否动态创建表

> ID：15275675
> 
> 赞同：0
> 
> 时间：2013-03-07T15:53:13.373
> 
> 标签：mysql

我已经回顾了一些问答，但我认为针对我的主题的一些特定内容会帮助我摆脱困境。

我有一个应用程序，可以根据几个不同的公式和数百种不同的材料类型计算价格。

> 用户 A 可以使用配方 A 和材料 A、B、C
> 
> 用户 B 使用公式 A 和材料 A、B、C，+ 他们想添加其他人没有使用的材料 材料 unique_A

当用户 A 在应用程序上时，他不想看到用户 B 的独特材料。

我正在考虑为每个用户使用一个唯一的材料表，以便“更快???更有效???获取材料列表，而不是尝试设置某种关闭，仅抓取的功能用户想要从一个全局表中获取的材料。

哪种方式更好？每个用户一个表还是一个唯一表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:58:29.267

你可以有一张所有材料的表格。

```
 materials = (id, name, other attributes...) 
```

和用户表：

```
 myusers = (id, name, etc....) 
```

那么你可以有一个基本上代表这两者之间的多对多关系的表：

```
 user_materials = (user_id, material_id) 
```

然后，您可以通过加入这些表格来选择用户使用的特定材料。应用程序方面，这种安排比尝试为每个用户创建一个表要好。查询将变得困难。这样您也可以回答以下问题：哪些用户正在使用材料 A？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:00:01.473

除非您的用户很少，每个用户都有自己稳定的不可更改的项目，否则我认为这样做没有任何意义。另外，如果您谈论的是用户和材料领域，您很可能不会遇到性能问题。也不是有几百万，对吧？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T16:00:53.827

数据库的一种“最佳实践”是减少信息重复。实际上，几乎所有理论领域都存在这种变化。

但是，这意味着您对每个用户使用唯一表的方法不是一个好主意。它不仅会复制数据，而且随着用户数量的增加，维护这样的数据库将成为一项艰巨的任务。

我希望有一个全局材料表、一个用户表和一个用户想要哪些材料的表。

可以认为“单表方法”更好，因为它降低了数据库和应该访问数据库的代码的复杂性以及信息的重复。

# python - Selenium 无法打开（复杂）url

> ID：15275679
> 
> 赞同：1
> 
> 时间：2013-03-07T15:53:19.040
> 
> 标签：python, selenium, htmlunit

我在 Python 中使用 Selenium 和远程和 HTMLUNIT。执行 driver.get(url) 时，出现以下错误：

```
Traceback (most recent call last):
[...]
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.WebDriverException: Message: u'ReferenceError: "AsyncHttpObject" is not defined. 
```

我的网址格式如下：

[http://www.test.com?date1=01-Mar-2013%2010:00:01&date2=07-Mar-2013%2010:00:01&xx=yy&etc=etc](http://www.test.com?date1=01-Mar-2013%2010:00:01&date2=07-Mar-2013%2010:00:01&xx=yy&etc=etc)

如果我排除 date1 和 date2 字段，它可以工作。如果我包含任何字段，它就不起作用。我尝试将它们格式化为多种编码：

*   date1=01-Mar-2013%2010:00:01
*   date1=01-Mar-2013 2010:00:01
*   日期 1=01-Mar-2013%2010%3A00%3A01
*   日期 1=2013 年 3 月 1 日+2010%3A00%3A01

奇怪的是，如果我使用 Firefox 而不是远程（HTMLUNIT），它就可以工作。

我尝试搜索什么是 AsyncHttpObject，但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-18T15:11:01.613

URL 不能包含任何字符。这就是为什么您需要在任何查询中使用它之前对 url 进行“编码”。

访问[此页面](http://www.w3schools.com/tags/ref_urlencode.asp)以获取所有编码字符。请注意，“:”在编码的 URL 中将是“%3A”。

所以“test.com?date=10:10:10”应该是“test.com?date=10%3A10%3A10”。

python 中有一些工具，比如 urllib 模块中的 urlencode() 可以帮助你做得更好。对于这些，请查看 urllib.urlencode 文档。

# javascript - 在 Javascript 中设置 Cookie 然后 window.location.href 不会发送更新的 cookie

> ID：15275683
> 
> 赞同：4
> 
> 时间：2013-03-07T15:53:30.677
> 
> 标签：javascript, session-cookies

我正在使用 jquery.cookie 设置一个 cookie。在使用 $.cookie("somecookie") 设置它在 javascript 中可用后，我可以验证它。

但是，当我执行 window.location.href = "/somerelativeurl" 时，更新的 cookie 不会发送到服务器。（只发送旧版本。）

由于如果 cookie 未正确更新，我的代码将执行重定向，因此我还可以看到重定向请求，并且它上面的 cookie 已正确更新以及所有内容。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T15:58:55.130

应该是路径问题。

尝试如下设置cookie：

```
$.cookie("somecookie", 1, { path : "/" }); 
```

# php - PHP替换控制台中的最后一个x字符

> ID：15275685
> 
> 赞同：0
> 
> 时间：2013-03-07T15:53:40.303
> 
> 标签：php, linux, bash

我想替换控制台输出中的最后一个 x 字符。我可以使用`\r`. 但是有没有办法从控制台输出中删除最后一个 x 字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:07:43.460

在**PHP**中：

要打印退格字符，请使用`0x08`. 但是，有一个问题。如果您在后面加上换行符`"\n"`（通常会这样），则光标将移回 EOL，并且字符再次暴露。好消息是，如果您`0x08`使用相同数量的空格，它可以正常工作。例如，要删除最后两个字符：

```
<?php
    print "Hello";
    printf("%c%c",0x08,0x08);
    print "  \n";
?> 
```

哪个打印`Hel`。请注意使用`printf()`with`%c`将整数 (0x08) 用作字符。

对于删除 x 个字符的通用方法：

```
<?php
    $x = 4;
    $str = "Those who are about to die salute you";
    $hacky = str_repeat(chr(0x08),$x).str_repeat(" ",$x);
    print "$str$hacky\n";
?> 
```

打印`Those who are about to die salute`。注意`chr(0x08)`这里的使用，它返回字符集中位置 8 的字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:54:47.663

你可以使用`cut`命令。

# c# - C# 正则表达式模式难题

> ID：15275688
> 
> 赞同：5
> 
> 时间：2013-03-07T15:53:48.353
> 
> 标签：c#, regex

我有一个正则表达式，已在 3 个单独的来源中验证成功匹配所需的文本。

1.  [http://regexlib.com/RETester.aspx](http://regexlib.com/RETester.aspx)
2.  [http://derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx](http://derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx)，
3.  [http://sourceforge.net/projects/regextester/](http://sourceforge.net/projects/regextester/)

但是，当我在我的代码中使用正则表达式时。它不会产生匹配。我在这段代码中使用了其他正则表达式，它们产生了所需的匹配。我很茫然...

```
string SampleText = "starttexthere\r\nothertexthereendtexthere";
string RegexPattern = "(?<=starttexthere)(.*?)(?=endtexthere)";
Regex FindRegex = new Regex(@RegexPattern);
Match m = FindRegex.Match(SampleText); 
```

我不知道问题是我的正则表达式还是我的代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T15:55:25.497

问题是您的文本包含 a`\r\n`这意味着它被分成两行。如果要匹配整个字符串，则必须将[选项](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regexoptions.aspx)设置为跨多行匹配，并更改 的行为以在匹配`.`中包含`\n`（换行符）

```
 Regex FindRegex = new Regex(@RegexPattern, RegexOptions.Multiline | RegexOptions.Singleline); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:03:02.127

你不需要`RegexOptions.Multiline`。

您的问题是点匹配除换行符（`\r\`和`\n`）以外的任何字符。

因此，您需要像这样定义正则表达式模式：`(?<=starttexthere)[\w\r\n]+(?=endtexthere)`以便专门匹配换行符的文本。

这是一个在线运行示例：http: [//ideone.com/ZXgKar](http://ideone.com/ZXgKar)

# php - PDO 准备语句的错误检查

> ID：15275689
> 
> 赞同：20
> 
> 时间：2013-03-07T15:53:48.773
> 
> 标签：php, mysql

我正在尝试使用 PDO 准备语句为 MySQL 数据库上的查询创建适当的错误处理。我希望程序在检测到准备好的语句过程中出现错误时退出。利用 PDO 准备语句过程中的每个步骤都会返回`False`失败这一事实，我将这个令人反感的 hack 放在一起：

```
 global $allFields;
 global $db;
 global $app;
 //dynamically append all relevant fields to query using $allFields global
 $selectQuery = 'SELECT ' . implode($allFields, ', ') .
     ' FROM People WHERE ' . $fieldName . ' = :value';
 //prepared statement -- returns boolean false if failure running query; run success check
 $success = $selectQueryResult = $db->prepare($selectQuery);
     checkSuccess($success);
 $success = $selectQueryResult->bindParam(':value', $fieldValue, PDO::PARAM_STR);
     checkSuccess($success);
 $success = $selectQueryResult->execute();
     checkSuccess($success); 
```

执行`checkSuccess()`以下操作：

```
function checkSuccess($success) {
    if ($success == false) {
        //TODO: custom error page. 
        echo "Error connecting to database with this query.";
        die();
    }
} 
```

两件事情。首先，这是非常冗长和愚蠢的。肯定有更好的办法。显然，我可以将布尔值存储在数组或其他东西中以取出一行或两行代码，但仍然如此。

其次，是否有必要检查这些值，或者我应该在执行这行代码后检查结果：

```
$result = $selectQueryResult->fetch(PDO::FETCH_ASSOC); 
```

我已经有执行此操作的代码：

```
if ($result) { //test if query generated results
    // do successful shit
}

else {
    echo "404";
    $app->response()->status(404); //create 404 response header if no results 
```

尽管我试图通过插入奇怪的、不匹配的或冗长的查询来破坏准备好的语句过程，但我的程序总是在`$result`不返回`false`我运行的任何函数的情况下完成分配`checkSuccess()`。所以也许我根本不需要检查上述逻辑？请记住，我在程序的前面检查了成功的数据库连接。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-07T16:00:07.460

我更喜欢将错误模式设置为抛出如下异常：

```
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

在我连接到数据库之后。所以每个问题都会抛出 PDOException 所以你的代码是：

```
$selectQuery = '
                SELECT 
                    ' . implode($allFields, ', ') . ' 
                FROM 
                    People 
                WHERE 
                    ' . $fieldName . ' = :value
';
try
{ 
    $selectQueryResult = $db->prepare($selectQuery);
    selectQueryResult->bindParam(':value', $fieldValue);
    $selectQueryResult->execute();
}
catch(PDOException $e)
{
    handle_sql_errors($selectQuery, $e->getMessage());
} 
```

函数将是：

```
function handle_sql_errors($query, $error_message)
{
    echo '<pre>';
    echo $query;
    echo '</pre>';
    echo $error_message;
    die;
} 
```

事实上，我正在使用一个通用函数，它也有类似的东西

```
$debug = debug_backtrace();
echo 'Found in ' . $debug[0]['file'] . ' on line ' . $debug[0]['line']; 
```

如果我正在运行多个查询，告诉我问题出在哪里

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-07T15:56:57.777

你必须抓住`PDOException`：

```
try {
    //your code/query
} catch (PDOException $e) {
    //Do your error handling here
    $message = $e->getMessage();
} 
```

[PDO异常](http://php.net/manual/en/class.pdoexception.php)

# jquery - ngRepeat 在克隆元素内

> ID：15275696
> 
> 赞同：3
> 
> 时间：2013-03-07T15:54:09.383
> 
> 标签：jquery, angularjs, angularjs-directive

我有一个由带有转发器的模板组成的指令。在链接函数中，我希望能够克隆模板的一部分并让它保持与中继器的绑定。

我的模板：

```
var template = '<div>{{title}}<ul><li ng-repeat="msg in msgs">{{msg.value}}</li></ul></div>'; 
```

我正在使用 $compile 像这样：

```
$clone = $element.children().first().clone();
$element.append($compile($clone)($scope)); 
```

这是小提琴的链接：http: [//jsfiddle.net/gaig/bk4C2/3/](http://jsfiddle.net/gaig/bk4C2/3/)

如您所见，第二个克隆列表没有收到原始列表所做的模型更改。我的意图是这两个列表都与模型相同。

# c - POSIX 线程和信号量

> ID：15275711
> 
> 赞同：1
> 
> 时间：2013-03-07T15:55:04.473
> 
> 标签：c, pthreads, semaphore, producer-consumer

我无法调试以下程序，因为我家里没有 linux。我无法执行该程序，但是当我在实验室会话中编译该程序时，我遇到了两个错误。谁能帮我吗？如果有人在调试后能够执行此程序，请发布输出。

代码如下：

```
#include <pthread.h>
#include <stdio.h>
#include <stdlib.h>
#include <semaphore.h>
#define BUFFER_SIZE 10
sem_t empty;
sem_t full;
pthread_mutex_t mutex;

int buffer[BUFFER_SIZE];

pthread_t ptid,ctid;
pthread_attr_t attr;

void *producer(void *param);
void *consumer(void *param);

int counter;
int main()
{

  init();
  pthread_create(&ptid, &attr, producer, NULL);
  pthread_create(&ctid, &attr, consumer, NULL);
  pthread_join(ptid,NULL);
  pthread_join(ctid,NULL);

  return 0;
}

void init()
{
  pthread_mutex_init(&mutex, NULL);
  pthread_attr_init(&attr);
  sem_init(&full, 0, 0);
  sem_init(&empty, 0, BUFFER_SIZE);
  counter = 0;
  for(int j=0;j<BUFFER_SIZE;j++)
  {  buffer[j] = 0;}
}

void *producer(void *param)
{
int item;
  while(1)
  {
    item=item+1;
    sem_wait(&empty);
    pthread_mutex_lock(&mutex);

    if(insert_item(item))
    {
      perror("Producer error.");
      return 1;
    }
    else
    {
      printf("Producer produced %d\n", item);
    }

    pthread_mutex_unlock(&mutex);
    sem_post(&full);
  }
}

void *consumer(void *param)
{
  int item;
  while(1)
  {
sleep(5);
    sem_wait(&full);
    pthread_mutex_lock(&mutex);
    if(remove_item(item))
    {
      perror( "Consumer error.");
    }
    else
    {
      printf("Consumer consumed %d\n", item);
    }

    pthread_mutex_unlock(&mutex);
    sem_post(&empty);
  }
}
int insert_item(int item)
{
  if(counter < BUFFER_SIZE)
  {
    buffer[counter] = item;
    counter++;
    return 0;
  }
  else
    return -1;

}

int remove_item(int item)
{
  if(counter > 0)
  {
    item = buffer[(counter-1)];
    counter--;
    return ;
  }
  else
    return -1;

} 
```

进行更改和更正后，我现在得到以下输出，这不是所需的.......

```
[root@localhost sree58]# gcc producerconsumer.c -lpthread -lrt
producerconsumer.c: In function ‘producer’:
producerconsumer.c:54: warning: return makes pointer from integer without a cast
[root@localhost sree58]# ./a.out
Producer produced 1804289383
Producer produced 846930886
Producer produced 1681692777
Producer produced 1714636915
Producer produced 1957747793
Producer produced 424238335
Producer produced 719885386
Producer produced 1649760492
Producer produced 596516649
Producer produced 1189641421
Consumer error.: Success
Producer produced 1025202362
Consumer error.: Illegal seek
Producer produced 1350490027
Consumer error.: Illegal seek
Producer produced 783368690
Consumer error.: Illegal seek
Producer produced 1102520059
Consumer error.: Illegal seek
Producer produced 2044897763
Consumer error.: Illegal seek
Producer produced 1967513926
Consumer error.: Illegal seek
Producer produced 1365180540
Consumer error.: Illegal seek
Producer produced 1540383426
Consumer error.: Illegal seek
Producer produced 304089172
Consumer error.: Illegal seek
Producer produced 1303455736
Consumer error.: Illegal seek
Producer produced 35005211
Consumer error.: Illegal seek
Producer produced 521595368
Consumer error.: Illegal seek
Producer produced 294702567
Consumer error.: Illegal seek
Producer produced 1726956429 
```

请有人指导我......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T16:36:06.440

首先，让我们解决这个问题（帮助自己的工具）：`since i don't have linux at home`

访问 Oracle 的站点并下载[VirtualBox](https://www.virtualbox.org/)，然后访问您最喜欢的 Linux 发行版的站点并下载`.iso`它的映像（例如，如果您觉得 Minty，您可以[在这里](http://www.linuxmint.com/edition.php?id=119)获取一个 iso ）

然后您可以按照说明在虚拟机中设置和“安装”iso，瞧！你家里有 Linux。;)

其次，我将解决这个问题：`i got two errors`

真的吗？你是如何编译这个的？运行代码时，我看到大量警告和 1 个错误`gcc -Wall`。一个错误也告诉您如何在消息中修复它：

```
38:3: error: ‘for’ loop initial declarations are only allowed in C99 mode
38:3: note: use option -std=c99 or -std=gnu99 to compile your code 
```

添加该命令`gcc -Wall -std=c99`，现在您会看到由于缺少 pthread 库而导致的未定义引用：

```
undefined reference to `pthread_create' 
```

通过将其链接到以下内容来修复：

```
gcc -Wall -std=c99 <yourfile>.c -lpthread 
```

* * *

现在你所拥有的只是一堆（重要的）警告：

```
In function ‘main’:
22:3: warning: implicit declaration of function ‘init’ [-Wimplicit-function-declaration]
At top level:
31:6: warning: conflicting types for ‘init’ [enabled by default]
22:3: note: previous implicit declaration of ‘init’ was here

In function ‘producer’:
51:5: warning: implicit declaration of function ‘insert_item’ [-Wimplicit-function-declaration]
54:7: warning: return makes pointer from integer without a cast [enabled by default]

In function ‘consumer’:
71:1: warning: implicit declaration of function ‘sleep’ [-Wimplicit-function-declaration]
74:5: warning: implicit declaration of function ‘remove_item’ [-Wimplicit-function-declaration]

In function ‘remove_item’:
106:5: warning: ‘return’ with no value, in function returning non-void [enabled by default]

In function ‘consumer’:
74:19: warning: ‘item’ is used uninitialized in this function [-Wuninitialized] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T16:28:31.507

> 我在实验室会议上编译程序，我有两个错误.....谁能帮帮我？？？？

1) 删除 for 循环初始声明`for(int j=0;j<BUFFER_SIZE;j++);`，或使用选项编译`-std=c99`

2) 与 pthread 库链接。

```
gcc  main.c -lpthread 
```

还有一堆警告，注意修复它们。

- 编辑 -

在您的 remove_item() 中，更改返回；返回 0；

这是输出

```
Producer produced 4001537
Producer produced 4001538
Producer produced 4001539
Producer produced 4001540
Producer produced 4001541
Producer produced 4001542
Producer produced 4001543
Producer produced 4001544
Producer produced 4001545
Producer produced 4001546
Consumer consumed 4001536
Producer produced 4001547
Consumer consumed 4001536
Producer produced 4001548
Consumer consumed 4001536
Producer produced 4001549
Consumer consumed 4001536
Producer produced 4001550
Consumer consumed 4001536
Producer produced 4001551
Consumer consumed 4001536
Producer produced 4001552
Consumer consumed 4001536
Producer produced 4001553
Consumer consumed 4001536
Producer produced 4001554
Consumer consumed 4001536
Producer produced 4001555
Consumer consumed 4001536
;;;;;;;;
;;;;;;;;
;;;;;;;;
;;;;;;;; 
```

# nosql - HBASE 是否有任何替代方案，特别是在关键范围扫描方面？

> ID：15275713
> 
> 赞同：2
> 
> 时间：2013-03-07T15:55:14.360
> 
> 标签：nosql, hbase

我在 HBASE 中欣赏的最相关的功能是键范围扫描，您可以在其中将较高级别的键与较低级别的键组合在一起，这使您可以获取与较高级别的键相关的数据层次结构。

例如：

```
CUSTOMER ID = C100
DEPARTMENT ID = D100
USER ID = U100 
```

上述示例的关键是

```
C100D100U100K01 : "my data for k01"
C100D100U100K02 : "my data for k02"
C100D100U100K03 : "my data for k03"
... 
```

使用上述方法，您可以通过对 C100* 执行范围扫描，或者如果需要更多详细信息，按部门（如 C100D100U100* 等）获取与您的客户 ID 相关的所有数据。

在 NOSQL 解决方案范围内，在这方面是否有 HBASE 的替代品？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T22:26:57.703

任何分层键值存储都可以工作。维基百科上有一个（短）列表：[分层键值存储](https://en.wikipedia.org/wiki/NoSQL#Hierarchical_key.E2.80.93value_store)。

我最了解的是[GT.M](https://en.wikipedia.org/wiki/GT.M)，您的示例数据可能如下所示：

```
customer("C100","D100","U100","K01")="my data for k01"
customer("C100","D100","U100","K02")="my data for k02"
customer("C100","D100","U100","K03")="my data for k03" 
```

因此`customer("C100")`，您可以访问单个客户的所有数据，`customer("C100","D100")`可以访问单个客户的单个部门的所有数据，等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T16:17:58.693

如果您使用视图（索引），Couchbase 具有类似的功能。您可以在所有键上创建一个视图，并对它们进行范围查询。据我所知，您只能在密钥末尾使用通配符，但不能在开头使用通配符，例如：

```
AAABBBCCCDDD* // yes
*BBBCCCDDDEEE // no
AAA*CCCDDDEEE // no 
```

这是因为它对键进行排序，并且当您查询时，您会得到一个子范围。但是，您可以通过创建按不同顺序排序的视图来解决此问题。

更多信息： http: [//www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views.html](http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T21:59:30.957

Riak 有二级索引，允许通过匹配索引或范围扫描来查询数据。二级索引的结果可以用作 Riak 的 MapReduce 的输入。检查此以获取更多详细信息：[riak 二级索引](http://docs.basho.com/riak/latest/tutorials/querying/Secondary-Indexes/)

# vhdl - VHDL 之后的设计视觉错误 OPT-1206

> ID：15275715
> 
> 赞同：0
> 
> 时间：2013-03-07T15:55:15.373
> 
> 标签：vhdl

我在设计愿景中面临一个问题，例如定义是：

“寄存器 THRESHOLD 是常数，将被删除”

因为我声明了一个信号并且我初始化了某个值以使其保持不变。我想要这些常量值用于一些比较目的....下一步该做什么？

```
begin
P :  PROCESS(CLK,RST)
VARIABLE THRESHOLD: signed(10 DOWNTO 0);
BEGIN
IF(RST='1')THEN   -- RESET CONDITION
THRESHOLD:="00011111111";
ELSIF(RISING_EDGE(CLK))THEN

H1<=(SIGNED("000"&P2)+SIGNED("00"&P3(7 DOWNTO 0)&'0')+SIGNED("000"&P6))-(SIGNED("000"&P4)+SIGNED("00"&P7(7 DOWNTO 0)&'0')+SIGNED("000"&P8));
IF(H1>=THRESHOLD) THEN
MAG_DL<="11111111";
ELSE

 IF H1(10)='0' THEN
  MAG_DL<=H1(7)&H1(6)&H1(5)&H1(4)&H1(3)&H1(2)&H1(1)&H1(0);
  ELSE
  H2<=NOT (H1(10)&H1(9)&H1(8)&H1(7)&H1(6)&H1(5)&H1(4)&H1(3)&H1(2)&H1(1)&H1(0));
  H2<=H2+("00000000001");
  IF(H2 >="11111111") THEN
  MAG_DL<="11111111";
  ELSE
  MAG_DL<=H2(7)&H2(6)&H2(5)&H2(4)&H2(3)&H2(2)&H2(1)&H2(0);
  END IF;
  END IF; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T12:10:32.390

变量应该是变化的。你的不会改变，所以编译器会注意到这一点并为你很好地优化它 - 并让你知道。

常量不变——编译器甚至不会让你尝试改变它们。因此，如果您想要一个常量值，请告诉编译器这是您的意图：

```
constant THRESHOLD : signed (10 downto 0) := "some value"; 
```

# c# - 正则表达式通配符

> ID：15275718
> 
> 赞同：16
> 
> 时间：2013-03-07T15:55:19.430
> 
> 标签：c#, regex, string, wildcard

我刚开始使用`Regular Expressions`，这太让人不知所措了，即使在阅读了文档之后，我似乎也无法找到从哪里开始帮助解决我的问题。

我要一串串。

```
 "Project1 - Notepad"
 "Project2 - Notepad"
 "Project3 - Notepad"
 "Untitled - Notepad"
 "HeyHo - Notepad" 
```

我有一个包含通配符的字符串。

```
"* - Notepad" 
```

如果我将这些字符串中的任何一个与包含通配符的字符串进行比较，我将需要它返回 true。（有`Regex.IsMatch()`或类似的东西..）

我通常不会要求这样的答案，但我就是找不到我需要的东西。有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-07T15:59:25.227

通配符`*`等效于正则表达式模式`".*"`(greedy) 或`".*?"`(not-greedy)，因此您需要执行`string.Replace()`：

```
string pattern = Regex.Escape(inputPattern).Replace("\\*", ".*?"); 
```

注意`Regex.Escape(inputPattern)`开头的。由于`inputPattern`可能包含 Regex 使用的特殊字符，因此您需要正确转义这些字符。如果你不这样做，你的模式就会爆炸。

```
Regex.IsMatch(input, ".NET"); // may match ".NET", "aNET", "FNET", "7NET" and many more 
```

结果，通配符`*`被转义为`\\*`，这就是为什么我们替换转义的通配符而不仅仅是通配符本身。

* * *

### 使用模式

您可以执行以下任一操作：

```
Regex.IsMatch(input, pattern); 
```

或者

```
var regex = new Regex(pattern);
regex.IsMatch(input); 
```

* * *

### 贪心和不贪心的区别

不同之处在于模式将尝试匹配多少。

考虑以下字符串：`"hello (x+1)(x-1) world"`. 您想要匹配左括号`(`和右括号`)`以及介于两者之间的任何内容。

贪婪只会匹配而不匹配`"(x+1)(x-1)"`。它基本上匹配它可以找到的最长的子字符串。

不贪婪会匹配`"(x+1)"`，`"(x-1)"`没有别的。换句话说：可能的最短子串。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-07T16:05:04.157

我只是快速写了这个（基于[Validate that a string contains some exact words](https://stackoverflow.com/questions/10400844/validate-that-a-string-contain-some-exact-words)）

```
 static void Main()
    {
        string[] inputs = 
        {
            "Project1 - Notepad", // True
            "Project2 - Notepad", // True
            "HeyHo - Notepad", // True
            "Nope - Won't work" // False
        };

        const string filterParam = "Notepad";
        var pattern = string.Format(@"^(?=.*\b - {0}\b).+$", filterParam);

        foreach (var input in inputs)
        {
            Console.WriteLine(Regex.IsMatch(input, pattern));
        }
        Console.ReadLine();
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-07T16:10:28.837

你应该这样做：

```
string myPattern = "* - Notepad";
foreach(string currentString in myListOfString)
    if(Regex.IsMatch(currentString, myPattern, RegexOptions.Singleline){
        Console.WriteLine("Found : "+currentString);
    }
} 
```

顺便说一句，我看到你来自蒙特利尔，额外的法语文档 + 有用的工具： [http ://www.olivettom.com/?p=84](http://www.olivettom.com/?p=84)

祝你好运！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T16:04:27.973

似乎您想要的模式如下：

```
/^.+-\s*Notepad$/ 
```

如果它以“-记事本”结尾，此模式将匹配整个字符串。

# jquery - 我无法让子菜单的其余部分正确显示

> ID：15275721
> 
> 赞同：0
> 
> 时间：2013-03-07T15:55:22.207
> 
> 标签：jquery, menu, submenu

我有这个带有 ul 子菜单的菜单，而我编写的脚本只能显示第一个子菜单，而另一个不显示。

这是我正在使用的 jquery 脚本

```
$(document).ready(function(){
     $('#top_menu_blockx').hover(
        function(){
            $('#top_menu_blockx').children('ul').stop().fadeIn('slow');
        },
        function(){
            $('#top_menu_blockx').children('ul').stop().fadeOut('slow');
        }
     );
}); 
```

我已经包含了一个链接到他的 jsfiddle。 [http://jsfiddle.net/kakashi807/RrYs4/2/](http://jsfiddle.net/kakashi807/RrYs4/2/)

顺便说一句，为什么鼠标悬停时子菜单的字体颜色不会变成白色？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:00:26.840

试试这个 -[**演示**](http://jsfiddle.net/RrYs4/4/)

```
$(document).ready(function(){
     $('.top_menu_btnx').hover(
        function(){
            $(this).children('ul').stop().fadeIn('slow');
        },
        function(){
            $(this).children('ul').stop().fadeOut('slow');
        }
     );
}); 
```

关于您的 HTML - **ID-s 应该是唯一的！**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:14:48.410

尝试相同的事情`ClassName`。然后它将起作用。

**小提琴示例：http:** [//jsfiddle.net/RrYs4/6/](http://jsfiddle.net/RrYs4/6/)

**查询：**

```
$(document).ready(function(){
     $('.top_menu_btnx').hover(
        function(){
            $(this).children('ul').stop().fadeIn('slow');
        },
        function(){
            $(this).children('ul').stop().fadeOut('slow');
        }
     );
}); 
```

# android - Android MediaCodec AAC 编码器

> ID：15275723
> 
> 赞同：23
> 
> 时间：2013-03-07T15:55:25.513
> 
> 标签：android, android-mediacodec, aac, audiorecord, openmax

我使用`MediaCodec`自 API 级别 16 以来 Android SDK 提供的类和`OMX.SEC.aac.enc`编码器将音频编码为文件。我从`AudioRecord`课堂上得到音频输入。我的类实例`AudioRecord`配置如下：

```
bufferSize = AudioRecord.getMinBufferSize(44100, AudioFormat.CHANNEL_IN_STEREO, AudioFormat.ENCODING_PCM_16BIT);
recorder = new AudioRecord(MediaRecorder.AudioSource.MIC, 44100, AudioFormat.CHANNEL_IN_STEREO, AudioFormat.ENCODING_DEFAULT, bufferSize); 
```

我能够播放`AudioRecord`实例中的原始数据，所以问题不存在。

`AudioRecord`我将实例的输出写入`ByteBuffer`实例，并将其从编码器传递到可用的输入缓冲区。编码器的输出被写入 SD 卡上的文件。

这些是我的`MediaCodec`实例的配置参数：

```
codec = MediaCodec.createEncoderByType("audio/mp4a-latm");
MediaFormat format = new MediaFormat();
format.setString(MediaFormat.KEY_MIME, "audio/mp4a-latm");
format.setInteger(MediaFormat.KEY_BIT_RATE, 64 * 1024);
format.setInteger(MediaFormat.KEY_CHANNEL_COUNT, 2);
format.setInteger(MediaFormat.KEY_SAMPLE_RATE, 44100);
format.setInteger(MediaFormat.KEY_AAC_PROFILE, MediaCodecInfo.CodecProfileLevel.AACObjectHE);
codec.configure(format, null, null, MediaCodec.CONFIGURE_FLAG_ENCODE); 
```

VLC 告诉我我的 aac 文件中没有流。该命令`FFMPEG -i @filename@`给了我以下错误：*Invalid data found when processing input*。我测试的所有媒体播放器都无法播放我的文件。

为什么我无法播放我的文件？我没有收到任何`OpenMAX`错误，`LogCat`并且应用程序在编码时不会崩溃。我写了一个基于相同原理工作的视频编码器，它可以工作。

这是将数据从`AudioRecord`实例读取到缓冲区的代码：

```
 new Thread() {
        public void run() {
            ByteBuffer byteBuffer = ByteBuffer.allocateDirect(bufferSize);
            int read = 0;
            while (isRecording) {
                read = recorder.read(byteBuffer, bufferSize);
                if(AudioRecord.ERROR_INVALID_OPERATION != read){
                    encoder.add(byteBuffer);
                }
            }
            recorder.stop();
        }
    }.start(); 
```

我的编码器中的 add 函数将一个缓冲区的内容复制到另一个缓冲区：

```
public void add(ByteBuffer input) {
    if (!isRunning)
        return; 

    if (tmpInputBuffer == null)
        tmpInputBuffer = ByteBuffer.allocate(input.capacity());

    if (!tmpBufferClear)
        Log.e("audio encoder", "deadline missed"); //TODO lower bit rate

    synchronized (tmpInputBuffer) {
        tmpInputBuffer.clear();
        tmpInputBuffer.put(input);
        tmpInputBuffer.notifyAll();
        Log.d("audio encoder", "pushed data into tmpInputBuffer");
    }
} 
```

以下代码用于占用编码器的输入缓冲区：

```
new Thread() {
    public void run() {
        while (isRunning) {
            if (tmpInputBuffer == null)
                continue;
            synchronized (tmpInputBuffer) {
                if (tmpBufferClear) {
                    try {
                        Log.d("audio encoder", "falling asleep");
                        tmpInputBuffer.wait(); //wait when no input is available
                    } 
                    catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                }

                ByteBuffer[] inputBuffers = codec.getInputBuffers();
                int inputBufferIndex;
                do
                    inputBufferIndex = codec.dequeueInputBuffer(-1);
                while (inputBufferIndex < 0);
                ByteBuffer inputBuffer = inputBuffers[inputBufferIndex];
                inputBuffer.clear();
                Log.d("input buffer size", String.valueOf(inputBuffer.capacity()));
                Log.d("tmp input buffer size", String.valueOf(tmpInputBuffer.capacity()));
                inputBuffer.put(tmpInputBuffer.array());
                tmpInputBuffer.clear();
                codec.queueInputBuffer(inputBufferIndex, 0, tmpInputBuffer.capacity(), 0, 0);
                tmpBufferClear = true;
                Log.d("audio encoder", "added to input buffer");
            }
        }
    }
}.start(); 
```

我将编码器的输出写入本地文件，如下所示：

```
 new Thread() {
        public void run() {
            while (isRunning) {
                ByteBuffer[] outputBuffers = codec.getOutputBuffers();
                MediaCodec.BufferInfo bufferInfo = new MediaCodec.BufferInfo();
                int outputBufferIndex = codec.dequeueOutputBuffer(bufferInfo, -1);
                while (outputBufferIndex >= 0) {
                    ByteBuffer outputBuffer = outputBuffers[outputBufferIndex];
                    byte[] outData = new byte[bufferInfo.size];
                    outputBuffer.get(outData);

                    try {
                        fileWriter.write(outData, 0, outData.length);
                    } 
                    catch (IOException e) {
                        e.printStackTrace();
                    }
                    codec.releaseOutputBuffer(outputBufferIndex, false);
                    outputBufferIndex = codec.dequeueOutputBuffer(bufferInfo, 0);
                    Log.d("audio encoder", "removed from output buffer");
                }
            }
            codec.stop();

            try {
                fileWriter.close();
            } 
            catch (IOException e) {
                e.printStackTrace();
            }
        }
    }.start();
                tmpBufferClear = true;
                Log.d("audio encoder", "added to input buffer");
            }
        }
    }
}.start(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-23T14:34:19.117

我猜你错过了[MediaMuxer](https://developer.android.com/reference/android/media/MediaMuxer.html)课程。例如，如果您想将从 MediaCodec 获得的内容写入文件，则需要它。

# c# - 在 PropertyGrid 中隐藏图像的属性

> ID：15275724
> 
> 赞同：-1
> 
> 时间：2013-03-07T15:55:25.840
> 
> 标签：c#, visual-studio, visual-studio-2005, propertygrid

我有一张我想根据用户做出的特定选择显示的图像。此图像显示为 PropertyGrid 中的一个属性。像这样：

![截屏](../Images/f3876d32d213b47341a9a404350be60c.png)

问题是我得到了所有这些无关的信息，包括图像右侧的标签（System.Drawing.Bitmap）和它下面的图像属性。有没有办法在最终产品中隐藏这些信息？

**更新：**

我认为包含我正在使用的代码是相关的。

```
[TypeConverter(typeof(ImagePropertiesConverter))]
public Image Unsupported
{
    get
    {
        Image image = MyProject.Properties.Resources.Unsupported;
        return image;
    }
} 
```

因此，仅当用户做出他们当前正在处理的内容不支持的选择时，才会显示此属性。如您所见，该属性返回图像。我还希望能够设置图像的标签，目前它在 PropertyGrid 中显示为“System.Drawing.Bitmap”。如果我可以更进一步，我希望能够设置标签的背景颜色。所以“System.Drawing.Bitmap”会出现在红色背景上。我已经设法摆脱了子属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:35:56.170

您可以实现自定义 TypeConverter 并使用 TypeConverter 属性标记 Image 属性。有关示例，请参见[此处。](http://social.msdn.microsoft.com/forums/en-US/winformsdesigner/thread/908fbba7-7a6e-4ce1-9fa2-1492e015cb94/)

要摆脱 System.Drawing.Bitmap，您可以使用类似这样的代码来覆盖 TypeConverter 中的 ConvertTo 方法：

```
public override object ConvertTo(ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value, Type destinationType)
    {
        if (value is Image && destinationType.Equals(typeof(string)))
        {
            return "Text to replace System.Drawing.Bitmap";
        }
        else
        {
            return base.ConvertTo(context, culture, value, destinationType);
        }
    } 
```

# java - “字符数 Java 程序”中有问题

> ID：15275726
> 
> 赞同：4
> 
> 时间：2013-03-07T15:55:26.567
> 
> 标签：java, loops, count, character

该程序应该计算用户输入的字符数。other 是其他字符，例如 !、@、$ 等。它不应该计入 #。以下是我执行此操作的代码：

```
public class countchars {
    public static void main(String args[]) {
        Scanner input = new Scanner(System.in);

        char sym;
        int up = 0;
        int low = 0;
        int digit = 0;
        int other = 0;

        System.out.print("Enter a character # to quit: ");
        sym = input.next().charAt(0);

        while (sym != '#') {
            System.out.print("Enter a character # to quit: ");

            if (sym >= 'a' && sym <= 'z') {
                low++;
            }
            if (sym >= 'A' && sym <= 'Z') {
                up++;
            }
            if (sym >= '0' && sym <= '9') {
                digit++;
            }
            if (sym >= '!' && sym <= '=') {
                other++;
            }

            sym = input.next().charAt(0);

        }

        System.out.printf("Number of lowercase letters: %d\n", low);
        System.out.printf("Number of uppercase letters: %d\n", up);
        System.out.printf("Number of digits: %d\n", digit);
        System.out.printf("Number of other characters: %d\n", other);
    }
} 
```

问题在于“其他”计数器。如果我输入 !、@ 和 $，它只会计算输入的 3 个字符中的 2 个。怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T16:00:03.720

如果你看一下[ascii](https://www.google.co.il/search?q=ascii%20table)表，你会看到：
'！' = 33
'=' = 61
'@' = 64

'@' 字符不在您指定的范围内，因此不计算在内，请将最后一个条件替换为：

```
if (sym >= '!' && sym <= '@') {...} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T15:58:52.643

尝试

```
else {
    other++;
} 
```

代替

```
if (sym >= '!' && sym <= '=') {
    other++;
} 
```

`#`不会被视为`other`因为您已经在`while`条件中对其进行了过滤。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T16:07:29.570

试试这个：

```
 if (sym >= 'a' && sym <= 'z') {
            low++;
        } else if (sym >= 'A' && sym <= 'Z') {
            up++;
        } else if (sym >= '0' && sym <= '9') {
            digit++;
        } else {
            other++;
        } 
```

或者，您可以选择该字符可以是什么的短集：

```
 } else if ("%!$&".contains(sym)){
            other++;
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T15:57:44.890

您应该在条件中使用 OR(||) 而不是 AND(&&)

```
if (sym == '!' || sym == '=' || sym == '@' || ...){
        other++;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T16:01:02.300

确保你抓住“其他一切”；您只需使用一个`else`子句。这样你就不会错过任何事情，就像你现在正在做的那样（因为`'@'`不在你检查的范围内）。你要这个：

```
else {
    other++;
} 
```

你目前有这个：

```
if (sym >= '!' && sym <= '=') {
    other++;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-07T16:01:22.653

您根据 ASCII 值比较 char 。@ASCII 是 64！ASCII 是 33 = ASCII 是 61

所以@不在“！”之间 和“=”并且不会增加您的计数器。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-07T16:03:03.120

看这里，希望答案会呈现出来！

[http://en.wikipedia.org/wiki/UTF-8](http://en.wikipedia.org/wiki/UTF-8)

你确定序列 $,5,$ 会给你正确的答案吗？;)

# arrays - 带有彩色图的 Gnuplot 视频输出

> ID：15275727
> 
> 赞同：1
> 
> 时间：2013-03-07T15:55:27.887
> 
> 标签：arrays, video, time, gnuplot

我正在尝试使用 gnuplot 创建一个包含随时间更新的数据点数组的视频文件。数据文件的格式为：time << x << y << value。

值是 +- 1，因此 +1 应对应于 1 种颜色，而 -1 应对应于另一种颜色。随着每一个时间步长的进行，相应的坐标应该被更新，替换任何可能存在的旧值。

不幸的是，我对 gnuplot 非常不熟悉，并且不知道如何做到这一点。谢谢。

# wordpress - 如何编写wordpress插件的短代码

> ID：15275729
> 
> 赞同：0
> 
> 时间：2013-03-07T15:55:28.580
> 
> 标签：wordpress, plugins, shortcode

这是国家插件中的代码，但我不知道如何以简写形式编写此代码，

```
 function save_details( $post_id ) {
            global $post;

            $post_vars = shortcode_atts( array(
                'country_code'     => '',
                'country_list'     => '',
                'flags'            => '',
                'country_details'  => '',
                'country_currency' => '',
                'currency_symbol'  => '',
                'currency_html'    => '',
                'currency_code'    => '',
                'city_list'        => ''
            ), $_POST ); 
```

谁能告诉我应该写什么短代码才能在一页上显示所有国家/地区的名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:07:08.450

你可以像这样重写你的函数

```
add_shortcode('save_details', function( $atts ) {
        global $post;

        $post_vars = array(
            'country_code'     => '',
            'country_list'     => '',
            'flags'            => '',
            'country_details'  => '',
            'country_currency' => '',
            'currency_symbol'  => '',
            'currency_html'    => '',
            'currency_code'    => '',
            'city_list'        => ''
        );
        extract( shortcode_atts( $post_vars, $atts ) );
        // country_code is now available like so $country_code
        // return data after your done

 }); 
```

并像这样访问它

```
//all of your attributes can be used inside the sq brackets
[save_details] and [save_details country_code = "" country_list = ""] 
```

# typescript - TypeScript 中的 protected 等价物是什么？

> ID：15275730
> 
> 赞同：48
> 
> 时间：2013-03-07T15:55:29.490
> 
> 标签：typescript

**TypeScript**中的**protected**等价物是什么？

 **我需要在**基类**中添加一些成员变量，以便仅在**派生类**中使用。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-07T16:44:16.627

# 更新

2014 年 11 月 12 日。TypeScript 1.3 版可用，包括受保护的关键字。

2014年9月26日，`protected`关键词落地。它目前处于预发布状态。如果您使用的是非常新版本的 TypeScript，您现在可以使用`protected`关键字...下面的答案适用于旧版本的 TypeScript。享受。

[查看受保护关键字的发行说明](https://github.com/Microsoft/TypeScript/pull/688)

```
class A {
    protected x: string = 'a';
}

class B extends A {
    method() {
        return this.x;
    }
} 
```

# 旧答案

TypeScript 只有`private`- 不受保护，这仅意味着在编译时检查期间是私有的。

如果你想访问`super.property`它必须是公开的。

```
class A {
    // Setting this to private will cause class B to have a compile error
    public x: string = 'a';
}

class B extends A {
    method() {
        return super.x;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T20:54:01.637

下面的方法怎么样：

```
interface MyType {
    doit(): number;
}

class A implements MyType {
    public num: number;

    doit() {
        return this.num; 
    }
}

class B extends A {
    constructor(private times: number) {
        super();
    }

    doit() {
        return super.num * this.times; 
    }
} 
```

由于`num`变量被定义为公共的，这将起作用：

```
var b = new B(4);
b.num; 
```

但由于它没有在接口中定义，因此：

```
var b: MyType = new B(4);
b.num; 
```

将导致`The property 'num' does not exist on value of type 'MyType'`.
你可以在这个[操场](http://www.typescriptlang.org/Playground/#src=interface%20MyType%20%7B%0A%09doit%28%29%3a%20number;%0A%7D%0A%0Aclass%20A%20implements%20MyType%20%7B%0A%09public%20num%3a%20number;%0A%09%0A%09doit%28%29%20%7B%0A%09%09return%20this.num;%20%0A%09%7D%0A%7D%0A%0Aclass%20B%20extends%20A%20%7B%0A%09constructor%28private%20times%3a%20number%29%20%7B%0A%09%09super%28%29;%0A%09%7D%0A%09%0A%09doit%28%29%20%7B%0A%09%09return%20super.num%20%2a%20this.times;%20%0A%09%7D%0A%7D%0A%0Avar%20b%3aMyType%20=%20new%20B%284%29;%0Ab.num;%20///%20The%20property%20%27num%27%20does%20not%20exist%20on%20value%20of%20type%20%27MyType%27)上试试。

您也可以将其包装在模块中，同时仅导出接口，然后从其他导出的方法中返回实例（工厂），这样变量的公共范围将“包含”在模块中。

```
module MyModule {
    export interface MyType {
        doit(): number;
    }

    class A implements MyType {
        public num: number;

        doit() {
            return this.num; 
        }
    }

    class B extends A {
        constructor(private times: number) {
            super();
        }

        doit() {
            return super.num * this.times; 
        }
    }

    export function factory(value?: number): MyType {
        return value != null ? new B(value) : new A();
    }
}

var b: MyModule.MyType = MyModule.factory(4);
b.num; /// The property 'num' does not exist on value of type 'MyType' 
```

[这个游乐场](http://www.typescriptlang.org/Playground/#src=module%20MyModule%20%7B%0A%09export%20interface%20MyType%20%7B%0A%09%09doit%28%29%3a%20number;%0A%09%7D%0A%09%0A%09class%20A%20implements%20MyType%20%7B%0A%09%09public%20num%3a%20number;%0A%09%09%0A%09%09doit%28%29%20%7B%0A%09%09%09return%20this.num;%20%0A%09%09%7D%0A%09%7D%0A%09%0A%09class%20B%20extends%20A%20%7B%0A%09%09constructor%28private%20times%3a%20number%29%20%7B%0A%09%09%09super%28%29;%0A%09%09%7D%0A%09%09%0A%09%09doit%28%29%20%7B%0A%09%09%09return%20super.num%20%2a%20this.times;%20%0A%09%09%7D%0A%09%7D%0A%09%0A%09export%20function%20factory%28value?%3a%20number=null%29%3a%20MyType%20%7B%0A%09%09return%20value%20!=%20null%20?%20new%20B%28value%29%20%3a%20new%20A%28%29;%0A%09%7D%0A%7D%0A%0Avar%20b%3aMyModule.MyType%20=%20MyModule.factory%284%29;%0Ab.num;%20///%20The%20property%20%27num%27%20does%20not%20exist%20on%20value%20of%20type%20%27MyType%27)的修改版。

我知道这不完全是你要求的，但它非常接近。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-23T19:54:19.613

至少目前（0.9版）受保护的规格中没有提到

[http://www.typescriptlang.org/Content/TypeScript%20Language%20Specification.pdf](http://www.typescriptlang.org/Content/TypeScript%20Language%20Specification.pdf)**

# sitecore - 为什么 Sitecore 创建具有所有 Extranet 角色的虚拟用户？

> ID：15275732
> 
> 赞同：0
> 
> 时间：2013-03-07T15:55:37.107
> 
> 标签：sitecore, sitecore6

我不确定**Sitecore 6.6 更新 3**`BuildVirtualUser`中的方法行为

 **我有以下代码：

```
bool isAuthenticated = true;
string userName = string.Format("{0}\\{1}", "extranet", user.Login);
SC.Security.Accounts.User virtualUser = SC.Security.Authentication.AuthenticationManager.BuildVirtualUser(userName, isAuthenticated); 
```

但在`BuildVirtualUser`方法调用 virtualUser 变量后包含所有外联网角色。我希望我的以下代码应该将角色附加到用户。

```
foreach(var role in user.Permissions)
{
    string domainRole = string.Format("{0}\\{1}", "extranet", "USER_EDIT");
    if (SC.Security.Accounts.Role.Exists(domainRole))
    {                          
        virtualUser.RuntimeSettings.AddedRoles.Add(domainRole);
    }
} 
```

为什么会这样？我需要做什么来修复它？

## **更新 1**

我发现第一次 BuildVirtualUser 创建具有 0 个角色的用户时，可以成功添加角色，但是在使用相同用户名注销和登录过程之后，第一次添加的角色会自动附加到新用户。在我看来，这种行为并不好，以防有人可以在外部系统中编辑用户角色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:26:19.177

试试这个：

```
user.Roles.Add(Sitecore.Security.Accounts.Role.FromName(domainRole)); 
```

从：

```
http://sdn.sitecore.net/upload/sitecore6/sc61keywords/security_api_cookbook_usletter.pdf 
```

我不确定你的 for each 循环是什么，但你没有对每个“角色”做任何事情有点多余。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T09:59:00.963

```
 SC.Security.Accounts.User virtualUser = SC.Security.Authentication.AuthenticationManager.BuildVirtualUser(userName, true);
            virtualUser.RuntimeSettings.AddedRoles.Clear();
            virtualUser.Roles.RemoveAll(); 
```

此代码有助于动态更新用户角色。但我仍然不明白为什么要为虚拟用户提供站点核心缓存角色。**

# java - MagTek -- uDynamo (DUKPT)

> ID：15275733
> 
> 赞同：1
> 
> 时间：2013-03-07T15:55:40.003
> 
> 标签：java, android, encryption, credit-card

有没有人能够成功地解码来自 Android 上的 MagTek uDynamo 读卡器的信息？我的测试应用程序工作正常，但我需要能够解码卡号。它是 DUKPT 加密。

它适用于带有学生证的内部学校申请，因此安全性不是一个大问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:32:10.720

实际上，它是 DUKPT 密钥管理和 TDES 加密。如果您真的想“自己动手”解密程序，您需要掌握 ANSI X9.24 标准。这将解释你需要知道的一切。

# php - 带有 JQuery 请求的下载页面

> ID：15275735
> 
> 赞同：0
> 
> 时间：2013-03-07T15:55:53.733
> 
> 标签：php, jquery

我有一个下载页面。会员可以自由点击他们购买的歌曲并开始下载。我现在希望同时发生一个 Ajax 请求，它会调整数据库中的下载计数。然后该页面应该重新加载到从数据库中的计数器再次更新。如果计数器为零，则不再下载。显然我的脚本不起作用。下载会发生，但 JQuery-Script 将不起作用。有人有解决方案吗？

这是下载页面的链接：

```
<a href="get-download-files.php?file=xyz.zip"><img class="a_0" src="images/download.png" width="30" height="30" />XYZ-Song/a> 
```

这是同一页面上的 Java 脚本：

```
<script>
$(document).ready(function(){
    $(".a_0").click(function(){
        $.get("zaehler.php?dl_id=1", function(data){
            $("#ausgabe").html(data);
        });
    });

});
</script> 
```

这是请求文件：

```
<?php 
require_once 'includes/db_login.php';
$dl_id = $_REQUEST['dl_id'];

// counter updaten
$sql = 'UPDATE ' . $tbl_prefix . 'downloads 
        SET zaehler   = zaehler - 1                
        WHERE dl_id  = ' .$dl_id;
mysql_query($sql);
$abfrage = 'SELECT zaehler FROM ' . $tbl_prefix . 'downloads WHERE dl_id=' . $dl_id;
$ergebnis = mysql_query($abfrage);
while ($datensatz = mysql_fetch_array($ergebnis, MYSQL_ASSOC))
{
    echo '<h3 style="color:#333;">Dein Download-Stand</h2>';
    echo '<br /><br />Du hast noch ' . $datensatz['zaehler'] . ' Downloads zugut.'; 
}
?> 
```

我谢谢你。最好的问候，亨氏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:03:52.223

你试过这个吗？

```
<script>
$(document).ready(function(){
    $(".a_0").click(function(){
        $("#ausgabe").load("zaehler.php?dl_id=1");
    });

});
</script> 
```

您可以通过在函数中添加 alert() 来检查您的代码是否已执行。如果警报触发，则执行该函数。

```
<script>
$(document).ready(function(){
    $(".a_0").click(function(){
        alert('Function is fired!'); // Debug
        $("#ausgabe").load("zaehler.php?dl_id=1");
    });

});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:00:43.867

为此，您不需要 Ajax。在脚本 get-download-files.php 中，在将文件传送到浏览器之前更新数据库。

# google-drive-api - 每次连接时都必须单击“允许访问”吗？谷歌驱动 SDK API

> ID：15275738
> 
> 赞同：0
> 
> 时间：2013-03-07T15:56:01.813
> 
> 标签：google-drive-api

我编写了在我的数据库中保存刷新和访问令牌的 cals。我也可以通过刷新令牌生成访问令牌。一切正常。我使用 Web 应用程序。现在我还有一个问题：

1）例如，我已经保存了刷新令牌。那么如果另一个人来了，我应该检查那个人在我的数据库中是否有刷新令牌以生成她的访问令牌。但我应该先有她的用户 ID。

2) 要获取用户 ID，我需要她的凭据

例如：

```
Oauth2.Builder builder = new Oauth2.Builder(new NetHttpTransport(), new JacksonFactory(), credentials);
Oauth2 userInfoService = builder.build();      
Userinfo userInfo= userInfoService.userinfo().get().execute(); 
```

3）并获得我需要授权码的凭据：

```
Credential credentials = exchangeCode(authorizationCode); 
```

4) 并获得授权代码用户应该单击“允许访问”以检索该代码？这样对吗？

例如：

HttpTransport httpTransport = new NetHttpTransport(); JacksonFactory jsonFactory = new JacksonFactory();

```
 GoogleClientSecrets clientSecrets = GoogleClientSecrets.load(jsonFactory, GoogleStorage.class.getResourceAsStream(CLIENTSECRETS_LOCATION));

    flow = new GoogleAuthorizationCodeFlow.Builder(httpTransport, jsonFactory, clientSecrets, SCOPES).setAccessType("offline").setApprovalPrompt("force").build(); 
```

并获取将检索自动化代码的 URL：

flow.newAuthorizationUrl().setRedirectUri(REDIRECT_URI).build();

例如网址：

```
https://accounts.google.com/o/oauth2/auth?access_type=offline&approval_prompt=force&client_id=695230079990-bus3d9gp31vvv64qq5n4ma9mk8vtc1ck.apps.googleusercontent.com&redirect_uri=http://localhost/oauth2callback&response_type=code&scope=https://www.googleapis.com/auth/drive.file%20https://www.googleapis.com/auth/userinfo.email%20https://www.googleapis.com/auth/userinfo.profile 
```

每次尝试连接到 Drive API 时必须有人单击该按钮吗？我看到 Web 应用程序，其中一个人只单击该按钮一次。如何在不每次单击“允许访问”的情况下获取 Autorization 代码。我只需要单击一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T17:55:10.247

用户不必在每次运行应用程序时都授予对应用程序的访问权限。您将他们的凭据存储在数据库中，并在需要时重复使用它们。

查看 Java DrEdit 指南以获取完整的示例应用程序，该应用程序展示了如何为每个请求获取一组完整的凭据：

[https://developers.google.com/drive/examples/java](https://developers.google.com/drive/examples/java)

# math - log-sum-exp 技巧为什么不递归

> ID：15275747
> 
> 赞同：9
> 
> 时间：2013-03-07T15:56:18.437
> 
> 标签：math, numerical-methods

我一直在研究 log-sum-exp 问题。我有一个以对数形式存储的数字列表，我想将其求和并以对数形式存储。

天真的算法是

```
def naive(listOfLogs):
    return math.log10(sum(10**x for x in listOfLogs)) 
```

许多网站，包括： [logsumexp 在 C 中的实现？](https://stackoverflow.com/questions/4169981/) 和 [http://machineintelligence.tumblr.com/post/4998477107/](http://machineintelligence.tumblr.com/post/4998477107/) 推荐使用

```
def recommend(listOfLogs):
    maxLog = max(listOfLogs)
    return maxLog + math.log10(sum(10**(x-maxLog) for x in listOfLogs)) 
```

又名

```
def recommend(listOfLogs):
    maxLog = max(listOfLogs)
    return maxLog + naive((x-maxLog) for x in listOfLogs) 
```

我不明白的是，如果推荐的算法更好，为什么我们要递归调用它？这会带来更多好处吗？

```
def recursive(listOfLogs):
    maxLog = max(listOfLogs)
    return maxLog + recursive((x-maxLog) for x in listOfLogs) 
```

虽然我在问还有其他技巧可以使这个计算在数值上更稳定吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-07T18:03:05.830

其他人的一些背景知识：当您直接计算以下类型的表达式时

```
ln( exp(x_1) + exp(x_2) + ... ) 
```

你可能会遇到两种问题：

*   `exp(x_i)`可能溢出（`x_i`太大），导致无法相加的数字
*   `exp(x_i)`可以下溢（`x_i`太小），导致一堆零

如果所有的值都很大，或者都很小，我们可以除以一些`exp(const)`并添加`const`到外部`ln`以获得相同的值。因此，如果我们可以选择正确的`const`，我们可以将值移动到某个范围内以防止上溢/下溢。

OP 的问题是，为什么我们选择`max(x_i)`这个 const 而不是任何其他值？为什么我们不递归地做这个计算，从每个子集中挑选最大值并重复计算对数呢？

答案：**因为没关系**。

原因？比方说`x_1 = 10`大，`x_2 = -10`小。（这些数字甚至不是很大，对吧？）表达式

```
ln( exp(10) + exp(-10) ) 
```

会给你一个非常接近10的值。如果你不相信我，去试试吧。事实上，一般来说，如果某个特定比所有其他的大得多，`ln( exp(x_1) + exp(x_2) + ... )`就会非常接近。（顺便说一句，这个函数形式，渐近地，实际上让你在数学上从一组数字中选择最大值。）`max(x_i)``x_i`

因此，我们选择最大值而不是任何其他值的原因是因为较小的值几乎不会影响结果。如果它们下溢，它们将太小而不会影响总和，因为它将由最大的数字和任何接近它的数字主导。在计算方面，小数的贡献[在](http://en.wikipedia.org/wiki/Ulp)计算`ln`. 因此，如果较小的值无论如何都会在最终结果中丢失，那么没有理由浪费时间递归地计算较小值的表达式。

如果您想对实现这一点非常挑剔，您可以除以`exp(max(x_i) - some_constant)`大约 1 以将结果值“居中”，以避免上溢和下溢，这可能会给您的结果带来一些额外的精度。但是避免溢出对于避免下溢更为重要，因为前者决定了结果，而后者没有，所以这样做要简单得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T16:05:47.820

递归地做这件事并没有更好的办法。问题只是你想确保你的有限精度算术不会淹没答案。通过自己处理最大值，您可以确保任何垃圾在最终答案中保持较小，因为它最重要的组成部分可以保证通过。

为华而不实的解释道歉。自己尝试一些数字（一个合理的列表可能是 [1E-5,1E25,1E-5]），看看会发生什么来感受它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T17:36:52.037

正如您所定义的，您的`recursive`函数将永远不会终止。那是因为`((x-maxlog) for x in listOfLogs)`仍然具有与 相同数量的元素`listOfLogs`。

我认为这也不容易修复，不会显着影响性能或精度（与非递归版本相比）。

# java - 首先写入远程关闭的套接字不会触发异常，可以吗？爪哇

> ID：15275750
> 
> 赞同：5
> 
> 时间：2013-03-07T15:56:28.913
> 
> 标签：java, sockets, exception

我无法在任何地方找到这个问题的令人满意的答案。了解内部原理的人可以解释一下吗？

我写了一个简单的客户端/服务器来演示这个问题。 *服务器读取一行文本然后关闭套接字。客户端写入一行文本，等待 10 秒，然后再写入两行文本。第二次写入（10 秒后）失败，但第一次写入总是成功。*

为什么 BufferedWriter 不能在第一次写入时抛出异常？毕竟套接字在很长一段时间之前都是正常关闭的。该代码还在第一次写入之前对套接字进行读取，返回 -1 以表明输入端已经检测到套接字关闭。为什么输出端也不能知道这个？

```
 public class Server {
    public static void main(String[] args) throws IOException {
        ServerSocket ss = new ServerSocket(9000);
        Socket s = ss.accept();
        BufferedReader in = new BufferedReader(new InputStreamReader(s.getInputStream()));
        System.out.println(in.readLine());
        s.close();
        System.out.println("Socket closed");
    }
  }

  public class Client {
    public static void main(String[] args) throws IOException, InterruptedException {
        Socket s = new Socket("localhost", 9000);
        BufferedWriter out = new BufferedWriter(new OutputStreamWriter(s.getOutputStream()));
        out.write("Hello, World!\n"); out.flush();
        Thread.sleep(10000);
        System.out.println("Read from socket returns: " + s.getInputStream().read());
        out.write("First write\n"); out.flush();
        System.out.println("First write succeeded without detecting socket closed");
        out.write("Second write\n"); out.flush();
        System.out.println("Second write succeeded without detecting socket closed");
    }
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-11T07:06:53.253

远程关闭与远程关闭输出没有区别。在这两种情况下，此端都会收到一个 FIN，这意味着对等方已停止发送。没有迹象表明他已经停止接收，即使事实上他已经关闭输入。因此，发送方可以检测到的唯一方法是在发送时获取 RST，根据定义，这不会在第一次发送时发生，除非发送的数据可能大于套接字发送缓冲区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-13T06:57:51.033

我们在一个项目上看过这个。我认为[Internet 协议](https://en.wikipedia.org/wiki/Internet_Protocol)或多或少保证 TCP/IP 套接字会做到这一点。

IP 协议旨在尽最大可能对数据包进行路由。只有在写入/传递失败后，您才会知道另一端的连接已消失。请记住，互联网被设计为具有弹性并尝试不同的路线等以传递信息。

不同的网络和数据链路传输可能会以不同的方式工作。很久以前，我不得不在 tcp/ip 上做一个会话层，这个问题听起来很奇怪。

看来您可以通过在主发送之前发送几个测试字节来解决它。

# asp.net - 从服务器端从http重定向到https

> ID：15275752
> 
> 赞同：0
> 
> 时间：2013-03-07T15:56:31.550
> 
> 标签：asp.net, vb.net

我有一个使用 https 的网页。如果用户更改 url 例如：[https://www.abc.com/page1.aspx](https://www.abc.com/page1.aspx)到[http://www.abc.com/page1.aspx](http://www.abc.com/page1.aspx)。

我可以通过代码即 Request.IsSecureConnection 知道连接是否安全。我的问题是，如果用户输入了 http url。那么如何通过VB中的服务器端代码将其重定向到https。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:26:16.707

您可以`Replace`通过...尝试如下所示`HTTP`，`HTTPS`它将对您有所帮助..

```
 If (Request.IsSecureConnection = False) Then
        Dim Url As String
        Url = Request.Url.ToString().Replace("http:", "https:")
        Response.Redirect(Url)
    End If 
```

# pdf - html - PDF 对象的初始比例

> ID：15275756
> 
> 赞同：1
> 
> 时间：2013-03-07T15:56:43.423
> 
> 标签：pdf, html-object

如何在加载时缩放内联 PDF，而不是强制用户单击 PDF 底部的两个缩放选项之一？

对象所在的父 div 的宽度是 680px 宽，因此当 PDF 加载时，它具有我想取消的水平滚动。

```
<div class="content">
    <object data="pdf_link.pdf" type="application/pdf" width="680" height="870">
        <p> It looks like you can't view this PDF, but you can download it <a href="pdf_link.pdf">here</a>.
    </object>
</div> 
```

注意：width="100%" 不起作用

# cocoa - Get frame number (like Quicktime Player 7) from QTKit

> ID：15275761
> 
> 赞同：3
> 
> 时间：2013-03-07T15:56:54.730
> 
> 标签：cocoa, video, quicktime, qtkit

This has been driving me nuts for a while now.

I have very little knowledge of QTKit / QTMovie, but have created a little Cocoa app that previews a video and lets you save a 3 second version of it with Handbrake.

The problem is translating the current time on QTKit (QTTime), which is quite vague (seems to be nearest second), to frame number.

If you open a video in Quicktime Player 7, you can choose to see standard time or current frame. If I pass that frame number directly to the Handbrake CLI, the preview comes out super accurate.

So I've been trying to find a way to convert QTTime to absolute frame number, which seems to be based on samples in QTMedia (so confusing).

For instance, with this:

> ```
> NSArray *videoTracks = [movie tracksOfMediaType:QTMediaTypeVideo];
> QTTrack *tcTrack = [videoTracks objectAtIndex:0];
> 
> if (tcTrack != nil)
> {     
>     QTMedia * media = [tcTrack media];
>     if (media != nil)
>     {
>         NSLog(@"sample : %@", [media attributeForKey:QTMediaSampleCountAttribute]);
>     }
> } 
> ```

I get the total number of samples, which is the same as the final frame number on Quicktime Player 7.

What I need, I think, is the value for the sample count, at the specific point in time where I am, not the total.

Any thoughts on how I might be able to get that?

Thanks!

P.S:

Also tried using the following:

> ```
> NSArray *videoTracks = [movie tracksOfMediaType:QTMediaTypeVideo];
> QTTrack *tcTrack = [videoTracks objectAtIndex:0];
> 
> if (tcTrack != nil)
> {     
>     QTMedia * media = [tcTrack media];
>     if (media != nil)
>     {
>         NSLog(@"sample : %@", [media attributeForKey:QTMediaSampleCountAttribute]);
> 
>         Media qtMedia = [media quickTimeMedia];
>         MediaHandler mh = GetMediaHandler(qtMedia);
> 
>         long frameNum;
> 
>         TimeCodeDef tcDef;
>         TimeCodeRecord tcData;
>         UserData srcRefH;
> 
>         TCTimeCodeToFrameNumber(mh, &tcDef, &tcData, &frameNum);
> 
>         NSLog(@"frameNum %ld", frameNum);
>         NSLog(@"tcData %d:%d:%d.%d", tcData.t.hours, tcData.t.minutes, tcData.t.seconds, tcData.t.frames);
>     }
> } 
> ```

But all I get is:

**frameNum -1** / **tcData 0:2:0.0**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:28:20.883

Right, I've found a way of doing it! Thank the binary lord!

Here's my solution:

> ```
> QTTime time = [movie currentTime];
> 
> NSArray *videoTracks = [movie tracksOfMediaType:QTMediaTypeVideo];
> QTTrack *tcTrack = [videoTracks objectAtIndex:0];
> 
> Track track = tcTrack.quickTimeTrack;
> 
> Media media = GetTrackMedia(track);
> 
> SInt64 frameNum;
> 
> MediaDisplayTimeToSampleNum(media,
>                             time.timeValue,
>                             &frameNum,
>                             NULL,
>                             NULL);
> 
> NSLog(@"Save frame number %lli", frameNum); 
> ```

Works like a charm, especially for what I want it too, which is to tell Handbrake CLI to save a 3 second clip from a specific frame (--start-at frame:xxx).

Can I haz my own bounty now?

# c++ - C++ - 如何提高此方法的执行速度

> ID：15275763
> 
> 赞同：0
> 
> 时间：2013-03-07T15:57:11.880
> 
> 标签：c++, arrays

我正在努力提高我即将发布的作业的编程技能，它涉及解决问题，同时使其尽可能高效和快速地运行。我知道这是一段相当克制/小段的代码，但如果有什么能让它运行得更快的话。

该方法采用一个包含事务详细信息的数组，用于维护循环的事务数为 100。所以我得到了平均股数，然后返回它。英语不流利，所以希望它有意义，谢谢

```
double Analyser::averageVolume()
{
    // Your code
    double averageNumShares = 0;
    for(int i = 0; i < nTransactions; i++)
    {
        averageNumShares += tArray[i].numShares;
    }
    averageNumShares = averageNumShares / nTransactions;
    return averageNumShares;
    //return 0
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T15:59:50.887

如果您需要计算 n 个数字的平均值，恐怕您无法将其加速超过示例代码中的线性时间方法。

除非这被用作另一个更复杂的算法的一部分，在这种算法中你可能不必计算平均值或沿着这些线计算，否则取平均值将是一个 O(n) 操作，它基本上涉及对所有数组的元素和一个除以元素的数量。这正是你所拥有的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T16:04:45.090

为什么不为该对象设置另外两个值 - 运行总计和项目数？

然后计算平均值可以利用这些数字。快速简单（可能是一个内联函数！）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T17:16:59.453

这是另一种方法，类似于[Ed Heal](https://stackoverflow.com/a/15275919/1430833)建议的方法，它应该对舍入误差不太敏感。平均值的舍入误差随着累积和的大小而增长。这对您来说可能是也可能不是问题，但需要注意。

[这是一个迭代算法，可以最小化平均舍入误差，这是我在Ross](https://rads.stackoverflow.com/amzn/click/com/0125980574)的旧版本（大约 1998 年）中第一次遇到的：

```
double Analyser::averageVolume()
{
  double averageNumShares = 0.0;

  for (int i = 0; i < nTransactions; i++)
  {
    double delta = (tArray[i].numShares - averageNumShares) / (i+1);
    averageNumShares += delta;
  }

  return averageNumShares;
} 
```

这是通过推导平均值的递归定义来实现的。也就是说，给定 samples `x[1]`, ..., `x[j]`, ..., `x[N]`，您可以计算 sample 的第一个`M+1`样本`x[M+1]`的平均值和第一个样本的平均值`M`：

```
sum(M) = x[1] + x[2] + ... + x[M]
thus avg(M+1) = sum(M+1)/(M+1) and avg(M) = sum(M)/M

avg(M+1) - avg(M) = sum(M+1)/(M+1) - sum(M)/M
    = [ M*sum(M+1) - (M+1)*sum(M) ]/[ M * (M+1) ]
    = [ M*(x[M+1] + sum(M)) - M*sum(M) - sum(M) ] / [ M*(M+1) ]
    = [ M*x[M+1] - sum(M) ] / [ M*(M+1) ]
    = [ x[M+1] - avg(M) ] / (M+1)
thus: avg(M+1) = avg(M) + [ x[M+1] - avg(M) ]/(M+1) 
```

要了解这两种方法的舍入误差，请尝试计算 10^7 个样本的平均值，每个样本等于 1035.41。您最初的方法返回（在我的硬件上），平均为 1035.40999988683。上面的迭代方法返回 1035.41 的精确平均值。

不幸的是，两者在某些时候都是 O(N)。你原来的方案有 N 个加法和一个除法。迭代方案有 N 个加法、减法和除法，因此您为准确性付出了更多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T16:00:52.020

如果您使用 gcc 更改优化级别。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T16:02:07.163

简短的回答：这段代码在速度方面是最好的。你可以调整的是你如何编译它。或者显然，如果可以的话，在汇编中重写它。

“延伸”答案：现在......如果您真的想尝试获得更好的性能，已经尝试使用所有可用的编译器优化标志和优化，并且您准备好牺牲代码可读性以获得更快的速度，您*可以*考虑重写：

```
for(int i = 0; i < nTransactions; i++)
    {
        averageNumShares += tArray[i].numShares;
    } 
```

作为

```
pointerValue = &(tArray[0].numShares);
pointerIncrement = sizeof(tArray[0]);
for(int i = 0; i < nTransactions; i++)
    {
        averageNumShares += *(pointerValue++pointerIncrement);
    } 
```

通过向编译器显示您所做的只是在每次循环迭代时跳过固定偏移量，您可能会获得更好的性能。一个好的编译器应该能够通过您的初始代码看到这一点。新代码可能会让你的表现更差。这实际上取决于您的编译器的具体情况，并且我不推荐这种方法，除非您迫切希望获得比编译器提供的更好的性能，并且不想跳到使用内联汇编或内在函数（如果任何可用的）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-07T16:24:30.593

```
int i= nTransactions;
while(i--){// test for 0 is faster
    averageNumShares += (q++)->numShares;// increment pointer is faster than offset
} 
```

# python - 打印字典 (JSON) 人类可读

> ID：15275766
> 
> 赞同：4
> 
> 时间：2013-03-07T15:57:19.793
> 
> 标签：python, printing, human-readable

假设我有一个像这样的（嵌套）字典（注意列表值）：

```
dic = {'level1':
            {'level2':(1, 2),
             'level3':
                    [
                     {'level4': (1, 2)},
                     {'level5': (1, 2)}
                    ]
             }
       } 
```

我正在寻找一种正确的方法来打印这本字典，我正在`json`这样做：

```
import json
print json.dumps(dic, indent=4) 
```

上面的代码给了我以下输出：

```
{
    "level1": {
        "level2": [
            1, 
            2
        ], 
        "level3": [
            {
                "level4": [
                    1, 
                    2
                ]
            }, 
            {
                "level5": [
                    1, 
                    2
                ]
            }
        ]
    }
} 
```

虽然上面的输出非常好，但仍然很难阅读，特别是如果有很多级别和较长的名称。我也试过`yaml`

```
import yaml
print yaml.dump(dic) 
```

给出以下看起来很奇怪的内容：

```
level1:
  level2: !!python/tuple [1, 2]
  level3:
  - level4: !!python/tuple [1, 2]
  - level5: !!python/tuple [1, 2] 
```

是否有任何其他库可以产生更好的转储，我认为下面的输出更容易阅读：

```
"level1"
    |---"level2":            1, 2
    |---"level3": 
            |---"level4":    1, 2
            |---"level5":    1, 2 
```

我相信上面的内容更容易阅读，并且可能有 python 库可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:44:21.400

这改编自一个活动状态代码示例。不能说它很漂亮，但可能会让你朝着正确的方向前进：

```
myDict = {'level1':
         {'level2':(1, 2),
          'level3':
                [
                 {'level4': (1, 2)},
                 {'level5': (1, 2)},
                ], 
         'level6': [1,2,3], 
         'level7':{'level8': (1,2), 'level9': (1,2)}
         }
    }

def prettyPrint(dictionary, ident = '', braces=1):
    for key, value in dictionary.iteritems():
        if isinstance(value, dict):
            print '%s%s%s%s' % (ident, braces*'[', key, braces*']') 
            prettyPrint(value, ident+'  ', braces+1)
        elif isinstance(value, list):
            ndict=0
            for v in value:
                if isinstance(v, dict):
                    ndict += 1
            if ndict:
                print '%s%s' % (ident, key) 
                for e in value:
                    if isinstance(e, dict):
                        prettyPrint(e, ident+'  ', braces+1)
                    else: 
                         print ident+'%s : %s' %(key, e)
            else:
                print ident+'%s : %s' %(key, value)
        else:
            print ident+'%s : %s' %(key, value)

prettyPrint(myDict)

[level1]
  level2 : (1, 2)
  level3
    level4 : (1, 2)
    level5 : (1, 2)
  level6 : [1, 2, 3]
  [[level7]]
    level8 : (1, 2)
    level9 : (1, 2) 
```

# mobile - localStorage 和替代方案的可靠性。（适用于 iOS、Android、WP7、WP8 和黑莓的 PhoneGap）

> ID：15275783
> 
> 赞同：5
> 
> 时间：2013-03-07T15:58:23.283
> 
> 标签：mobile, cordova, local-storage, reliability

我正在开发 PhoneGap 移动应用程序，并且正在研究数据存储选项。

**我的要求：**
1）小数据需求（永远不会超过或接近 5Mb 的限制）
2）能够将应用程序移植到所有主要平台，只需最少的调整（或者最好，没有）

在我看来，localStorage 是我唯一的选择，因为它受到所有平台的支持。

**问题：**
1) 是否有在所有平台上都可以使用的 localStorage 替代品？
2) localStorage 的可靠性如何或 localStorage 的持久性如何？
3) 如果用户在手机上删除浏览器的现金或类似的东西，我的数据会保留吗？或者，localStorage 数据丢失会发生什么情况？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T21:32:07.703

我的建议是您自己的带有文件系统的最小数据库

[http://docs.phonegap.com/en/2.5.0/cordova_file_file.md.html#FileWriter](http://docs.phonegap.com/en/2.5.0/cordova_file_file.md.html#FileWriter)

# java - 在 Eclipse RCP 中显示进度条和子进度条

> ID：15275785
> 
> 赞同：3
> 
> 时间：2013-03-07T15:58:27.880
> 
> 标签：java, eclipse-plugin, progress-bar, eclipse-rcp, progress

我有一些 Eclipse RCP 代码，允许用户加载多个文件，每个文件需要几分钟。我正在使用 a`ProgressMonitorDialog`来显示加载每个文件的进度（每个文件一个刻度）。工作得很好。

现在，我想通过在加载每个文件时显示每个文件的进度（子进度）来向用户*提供更多反馈。*我加载的每个文件都包含不同数量的“部分”，在我开始阅读文件之前我不知道这些部分。当我加载每个部分时，可以勾选子进度工作。

理想情况下，我会有两个进度条；顶部显示文件总数的进度（并且还说例如“正在加载文件'three.txt'（3 of 15）”，而底部进度条显示当前正在加载的文件的进度（并且还说例如“正在加载第 6 部分，共 10 部分”）。也许有一个“详细信息...”按钮来显示子进度条。是否存在任何对话框可以满足我的要求？我自己是否被困在编码中？

## *只是关于我尝试过的内容的说明：*

我正在考虑在我的上调用 SubMonitor.convert `IProgressMonitor`，这几乎可以满足我的要求：我可以重新拆分并为部件设置进度条 - 唯一的问题是它重用了一个进度条。我只想显示第二个进度条。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-21T18:42:14.450

不存在满足您需要的标准对话框。你只能靠自己。

# javascript - 清除间隔不起作用（尝试了所有其他答案）

> ID：15275788
> 
> 赞同：0
> 
> 时间：2013-03-07T15:58:36.270
> 
> 标签：javascript, jquery

所以我有这个功能来检查对手何时连接。一切正常，除了 clearInterval 的事情......我尝试添加 window.setInterval 和 window.clearInterval 。我尝试添加自我。也...

```
$(document).ready(function() {

    var waitForOpponent = setInterval(checkUserStatus, 2000);

    function checkUserStatus() {
    $('#user').load('checkuser.php?randval='+ Math.random());
        $("#user").ajaxStop(function(){
       if(document.getElementById("user").innerHTML!=""){
                clearInterval(waitForOpponent);
        opponentConnected();
       }
    });
    }

}); 
```

我也试过这样：

```
var waitForOpponent;

function check() { waitForOpponent = setInterval(checkUserStatus, 2000); }

check(); 
```

请帮帮我..我尝试了一切......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:01:04.140

摆脱`ajaxStop`并使用`.load`.

```
$('#user').load('checkuser.php?randval='+ Math.random(),function(){
    if(document.getElementById("user").innerHTML!=""){
        clearInterval(waitForOpponent);
        opponentConnected();
    }
}); 
```

如果请求花费的时间超过 2 秒，则永远不会调用 ajaxstop。

我认为更好的选择是不使用 setInterval：

```
function checkUserStatus() {
    $('#user').load('checkuser.php?randval='+ Math.random(),function(){
        if(document.getElementById("user").innerHTML!=""){
            opponentConnected();
            return; // exit
        }
        setTimeout(checkUserStatus,2000); // continue after 2 seconds
    });
}
checkUserStatus(); // start it up 
```

这可以防止 ajax 请求在慢速连接或超时时堆积。

# mysql - 通过数据比较加入 3 个 MySQL 表

> ID：15275797
> 
> 赞同：0
> 
> 时间：2013-03-07T15:58:53.487
> 
> 标签：mysql, join, inner-join

我的数据库中目前有 3 个 MySQL 表，我试图弄清楚如何将它们连接在一起并比较它们之间的数据。

这些查询构成了“朋友或敌人”系统的一部分，我目前在业余时间作为一个副项目工作，但我终生无法解决它。我已经成功地管理了 2 表连接，但 3 表连接却无处可去。

无论如何，这是表格布局。

表格1

```
Unique ID | Username | Password | Activity
1         | SomeUser | password | Active
2         | NewUsers | password | InActive
3         | GuestUse | password | Active 
```

表 2

```
FileID    | UploadedBy | Type | FileName | Description
1         | SomeUser   | MP3  | Demo.mp3 | Bass Guitar Riff
2         | SomeUser   | MP4  | Demo.mp4 | Some Youtube Video 
```

表3

```
ListOwner | Friends  | Foes
SomeUser  | GuestUse | NULL
GuestUse  | SomeUser | NULL 
```

我想要实现的只是“ListOwner”可以查看他/她的“朋友”列表中的用户上传的文件，自然会有一个页面可以查看所有上传的文件，但这更多是针对看到您更欣赏的人的上传。

本质上，我试图让查询读取；Table1 中的“用户名”、Table2 中的“UploadeBy”和 Table3 中的所有内容

示例：GuestUse 登录，查询获取此信息并将他的用户名与表 3 进行比较，然后仅显示来自他的朋友列表中的人在表 2 中的上传。

对于结构，数据库具有以下设置。

*   唯一 ID 和字段 ID 均为 INT(4)
*   用户名是 VARCHAR(42)
*   密码是 VARCHAR(30)
*   活动是 VARCHAR(8)
*   ListOwner 是 VARCHAR(42) < 与用户名相同
*   朋友和敌人是文本

您可以提供的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:36:21.250

表 2 字段“uploadedby”应该是数字用户 ID。

```
FileID    | UploadedBy | Type | FileName | Description
1         | 1          | MP3  | Demo.mp3 | Bass Guitar Riff
2         | 1          | MP4  | Demo.mp4 | Some Youtube Video 
```

您应该为“朋友”关系创建一张表，为“敌人”关系创建一张。

```
Table 3: friends
ListOwnerId | FriendId
1           | 2
1           | 3
2           | 1

Table 4: foes
ListOwnerId | FoeId
3           | 2 
```

然后进行从内到外的查询。

```
SELECT friendid FROM friends WHERE listowner=$loginid; 
```

这将提取 $loginid 用户的所有朋友。

如果 $someuseris 在 $loginid 好友列表中但 $someuserid 将 $loginid 设置为敌人，$loginid 是否应该查看 $someuserid 文件？想想那个。同时，foes 表是无用的。

现在，选择朋友的所有文件：

```
SELECT * FROM files WHERE uploadedby IN (SELECT friendid FROM friends WHERE listowner=$loginid) 
```

此查询将为您提供所需文件的列表。

这是通过子查询完成的，您也可以通过连接来完成。

```
SELECT files.* FROM files JOIN friends ON files.uploadedby=friends.friendid WHERE friends.listowner=$loginid; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:36:33.840

试一试：

```
select t1.Username,
t3.ListOwner,t3.Friends,t3.Foes,
t2.UploadedBy,t2.Type,t2.FileName,t2.Description
from Table1 t1
inner join Table3 t3 on t1.Username = t3.ListOwner
inner join Table2 t2 on t3.Friends = t2.UploadedBy
where Username = 'GuestUse'; 
```

# python - SQLAlchemy 和多个数据库

> ID：15275799
> 
> 赞同：27
> 
> 时间：2013-03-07T15:58:55.790
> 
> 标签：python, sqlalchemy

我有各种类似（但不相同）的数据库，并且想使用 SQLAlchemy 作为“标准化”访问的一种方式。数据库可能略有不同，例如在列名上具有唯一前缀，或者它们可能差异更大并​​且缺少列（或者对于旧数据库，缺少整个表）。

我正在寻求帮助的不是 SQLAlchemy 问题，而是 Python/组织问题。我怎样才能有多个可以在项目中轻松重用的数据库设置？

我已经阅读了有关 SQLAlchemy 会话的信息，但是如果不在每个项目中实例化它们中的每一个，就看不到使用它们的方法。

我的问题是：如何制作一个模块/包，其中包含许多要在 SQLAlchemy 中使用的数据库模型设置，这些设置可以很容易地在另一个 python 项目中导入/使用？

到目前为止，我还不太担心处理丢失的列/表。我可以稍后解决这个问题，但需要牢记这一点，因为我不能为每个数据库使用完全相同的模型。

任何有关此主题的资源、指针或阅读材料都将不胜感激。在此先感谢，如果这已在其他地方得到回答，我很抱歉，搜索没有显示与此相关的任何内容。

***编辑**：我原封不动地保留了原件，并根据保罗的建议添加了更多内容。*

RE: SA ORM - 是的，我打算使用 SQLAlchemy ORM。由于可能显而易见的原因，我无法提供真实的数据库。但是，假设这三个虚构的数据库，恰当地命名为 DB1、DB2 和 DB3（我们将假设每个数据库中只有一个表，只有几列，现实世界中两者的数量会多得多）。

每个数据库都有一个用户表，每个表中都有几列。以下是表/列的一些 SQL 表示法：

```
DB1.user  --> DB1.user.id,      DB1.user.username,  DB1.user.email
DB2.user  --> DB2.user.id,      DB2.user.user_name, DB2.user.email
DB3._user --> DB3._user.userid, DB3._user.username, DB3.user.email_address 
```

目前，我正在尝试将这些数据库分离为“模块化”，并且可以随时添加其他数据库。

我考虑了几个不同的文件组织方面（假设 __init__.py 在需要的地方存在，但为简洁起见省略），包括：

```
Databases         |    Databases            |    Databases
    DB1.py        |        DB1              |        DB1
    DB2.py        |            models.py    |            models
    DB3.py        |        DB2              |                user.py
                  |            models.py    |                anothertable.py
                  |        DB2              |        ...
                  |            models.py    |        DB3
                  |                         |            models
                  |                         |                user.py
                  |                         |                anothertable.py 
```

我希望能够使用 SA ORM 访问这些，并且在需要在 python 文件中使用这些数据库时尽可能少地导入/声明。需要做类似的事情：

```
from sqlalchemy import create_engine
from sqlalchemy.orm import sessionmaker
from Database import DB1, ..., DB[N]
db1_engine = create_engine('connect_string/db1')
db1_session = sessionmaker(bind=db1_engine)()
...
db3_engine = create_engine('connect_string/db3')
db3_session = sessionmaker(bind=db3_engine)() 
```

将非常麻烦，因为我将处理的不仅仅是三个数据库。我宁愿已经为我处理好了（在 __init__.py 文件中，也许？）

能够访问和使用它类似于：

```
import Databases

Databases.DB1.session.query('blahblah') 
```

会更好。

**EDIT2**：我也知道在设置我的模型时如何绕过数据库/列的命名约定中的变体。这不是问题，但我确实提到了它，以便知道我不能只为多个数据库使用一个模型集。

我希望通过扩展这一点，我不会混淆水域或让这变得太混乱。感谢您花时间阅读它！

**EDIT3**：我已经设法在这上面多花一点时间。我已经通过以下方式设置了项目：

```
Databases
    __init__.py
    databases.py
    settings.py
    DB1
        __init__.py
        models.py
    ...
    DB3
        __init__.py
        models.py 
```

目前，我在 settings.py 文件中“安装”了一组数据库。每个条目都是想要的`INSTALLED_DATABASES = ('DB1', ..., 'DB3')`。随着我完成更多模型，它们被添加到元组列表中。这使我可以随时添加或删除内容。

我在 models.py 文件中设置了引擎和 sessios，并将每个数据库设置的**init.py**文件设置为`from models import *`.

在 databases.py 文件中，我有以下内容

```
class Databases(object):
    def __init__(self):
        for database in INSTALLED_DATABASES:
            setattr(self, database, __import__(database)) 
```

我现在可以通过以下方式使用这些：

```
from databases import Databases

db = Databases()

for qr in db.DB1.query(db.DB1.User):
    print qr.userid, qr.username 
```

SQLAlchemy 允许我在定义模型时手动指定列名，这对我想要的标准化来说是一个巨大的好处。

我还有很多工作要做。我想创建强制模型验证的对象（即，是否存在字段？不存在的字段是否具有默认值？等等）并更好地结合它与我的 IDE 的工作方式（目前还没有）。但我走上了正确的轨道。我想我会为任何可能想知道如何做同样事情的人更新这个。

对不起，这已经变得这么长了！

干杯!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-30T20:30:56.210

*根据对我最初问题的要求，我已经进行了第三次编辑并将其作为我的答案。由于我不确定正确的协议，所以我将第三次编辑留在了上面。如果您已经阅读了 EDIT3，那么您已经阅读了我的答案。*

我已经设法在这上面多花一点时间。我已经通过以下方式设置了项目：

```
Databases
    __init__.py
    databases.py
    settings.py
    DB1
        __init__.py
        models.py
    ...
    DB3
        __init__.py
        models.py 
```

目前，我在 settings.py 文件中有一个“已安装”的数据库元组。每个 DB 条目都在 中指定`INSTALLED_DATABASES = ('DB1', ..., 'DB3')`。随着我完成更多模型，它们被添加到元组列表中。这使我可以随时添加或删除内容。

我在`models.py`文件中设置了引擎和会话，并将`__init.py__`每个数据库的文件设置为`from models import *`.

在 databases.py 文件中，我有以下内容

```
class Databases(object):
    def __init__(self):
        for database in INSTALLED_DATABASES:
            setattr(self, database, __import__(database)) 
```

我现在可以通过以下方式使用这些：

```
from databases import Databases

db = Databases()

for qr in db.DB1.query(db.DB1.User):
    print qr.userid, qr.username 
```

SQLAlchemy 允许我在定义模型时手动指定列名，这对我想要的标准化来说是一个巨大的好处。

我还有很多工作要做。我想创建强制模型验证的对象（即，是否存在字段？不存在的字段是否具有默认值？等等）并更好地结合它与我的 IDE 的工作方式（目前还没有）。但我走上了正确的轨道。我想我会为任何可能想知道如何做同样事情的人更新这个。

对不起，这已经变得这么长了！

干杯!

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-30T18:31:53.020

您的解决方案看起来不错。这就是我所做的。

我有一个名为 connector 的包，其中有一个用于每个 db 的模块以及一个设置文件。

这些连接器模块中的每一个都创建其连接字符串和引擎，以及表的声明性基和类。

然后有一个方法 loadSession 可以返回会话（这是我从教程或这里的另一篇文章中获得的，无法准确回忆），我添加的另一个方法返回引擎，以防我想用它做点什么。

那么在程序的其他一些模块中，我会做这样的事情

```
from connectors import x, y, z

x_ses = x.loadSession()
y_ses = y.loadSession()
z_ses = z.loadSession()

xq = x_ses.query(...)
yq = y_ses.query(...) 
```

# mysql - 将数据拆分为范围并显示计数

> ID：15275800
> 
> 赞同：0
> 
> 时间：2013-03-07T15:59:01.733
> 
> 标签：mysql

我不是 MySql 的专家。我正在尝试将表中的数据拆分为基于`account_no`. 这是我的桌子。

```
mysql> select * from manager;
+----+-------+------------+
| id | name  | account_no |
+----+-------+------------+
|  1 | John  |          5 |
|  2 | Peter |         15 |
|  3 | Tony  |         18 |
|  4 | Mac   |         35 |
|  5 | Max   |         55 |
|  6 | Smith |         58 |
+----+-------+------------+ 
```

如您所见，`account_no`是一个正数。我想根据**account_no**将这些记录分成 10 批并显示该范围内的计数。 **对于0**到**10** 之间

**的示例，** **11**到**20** 之间只有**1**条记录**21**到**30** 之间有**2**条记录**没有**记录* *（所以应该省略。）* * 等等...实际上我希望得到一个输出像这样。

 *******```
+-------------+-----------+-------+
| range_start | range_end | count |
+-------------+-----------+-------+
|           1 | 10        |     1 | -> because there is 1 record between 1 and 10
|          11 | 20        |     2 | -> because there are 2 records between 11 and 20
|          31 | 40        |     1 | -> because there is 1 record between 31 and 40
|          51 | 60        |     2 | -> because there are 2 records between 51 and 60
+-------------+-----------+-------+ 
```

我尝试了几种组合，但所有组合都只给我一行结果。
有谁能够帮助我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T16:35:14.150

我的建议是创建一个包含范围的表 -`startRange`和`endRange`：

```
CREATE TABLE range_values   (`startRange` int, `endRange` int) ;

INSERT INTO range_values(`startRange`, `endRange`)
VALUES (1, 10), (11, 20), (21, 30), (31, 40), (51, 60); 
```

创建表后，您可以轻松地加入表以获取计数。

```
select r.startRange,
  r.endRange,
  count(m.account_no) totalCount
from manager m
inner join range_values r
  on m.account_no >=startrange
  and m.account_no <= endrange
group by r.startRange, r.endRange 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/432c1/1)。

该表的好处是您无需对范围值进行编码，并且无需更改代码即可轻松更新表中的范围。

此查询返回：

```
| STARTRANGE | ENDRANGE | TOTALCOUNT |
--------------------------------------
|          1 |       10 |          1 |
|         11 |       20 |          2 |
|         31 |       40 |          1 |
|         51 |       60 |          2 | 
```

如果您不想创建新表，则可以使用类似于以下内容的内容：

```
select startrange,
  endrange,
  count(m.account_no) TotalCount
from manager m
inner join
(
  select 1 startRange, 10 endrange union all
  select 11 startRange, 20 endrange union all
  select 21 startRange, 30 endrange union all
  select 31 startRange, 40 endrange union all
  select 41 startRange, 50 endrange union all
  select 51 startRange, 60 endrange
) r
  on m.account_no >=startrange
  and m.account_no <= endrange
group by r.startRange, r.endRange 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/96349/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T16:51:23.547

这应该为您提供您想要的输出，并在计数列中包含零范围。

```
SET @rs = 0; SELECT IF(@rs, @rs := @rs + 10, @rs := 1) AS range_start, @rs + 9 AS range_end, (SELECT COUNT(id) FROM manager WHERE account_no >= @rs AND account_no <= @rs + 9) AS `count` FROM manager; 
```

省略计数列中为零的行；

```
SET @rs = 0; SELECT * FROM (SELECT IF(@rs, @rs := @rs + 10, @rs := 1) AS range_start, @rs + 9 AS range_end, (SELECT COUNT(id) FROM manager WHERE account_no >= @rs AND account_no <= @rs + 9) AS `count` FROM manager) AS data WHERE `count` > 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T16:14:29.380

尝试这样的事情：

```
SELECT
    CASE
        WHEN range_start < 10 THEN 'Under 10'
        WHEN range_start BETWEEN 11 and 29 THEN '11 - 29'
        (...more ranges...)
    END as range,
    COUNT(*) AS count
    GROUP BY range
    ORDER BY range 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-09T21:24:26.740

您应该在 MSSQL 中使用类似于 rank 和 dense_rank 的函数，您可以从以下链接开始在 MySQL 中实现它们：

[http://www.folkstalk.com/2013/03/grouped-dense-rank-function-mysql-sql-query.html](http://www.folkstalk.com/2013/03/grouped-dense-rank-function-mysql-sql-query.html)*******

# asp.net-mvc - 我应该如何构建 MVC 4 + WebApi + Linq-to-Sql 解决方案？

> ID：15275801
> 
> 赞同：1
> 
> 时间：2013-03-07T15:59:07.490
> 
> 标签：asp.net-mvc, linq-to-sql, asp.net-web-api

我了解stackoverflow 使用Linq to SQL。我决定，由于 stackoverflow 使用 linq to sql（我认为在高流量站点中运行良好），我将继续在我的 MVC 4 应用程序中使用它。

到目前为止，我的解决方案中有一个 MVC 4 互联网项目、一个 Web api 项目、模型类库，用于覆盖 linq to sql 中的一些映射，然后是我的 linq to sql 库项目。

我注意到当我向解决方案添加一个 web api 项目时，该 api 项目也有视图、控制器等作为常规的 mvc 4 项目。

Web api 项目是否提供与 MVC 4 Web 项目相同的视图等功能？您对项目设置有什么建议...

1.  消除 mvc 4 互联网项目，只使用 web api。
2.  消除 web api 并使用存储库？
3.  同时使用 mvc 4 互联网项目和 web api？或者 ？？？？？为什么？

我正在将一个 asp.net 网络表单应用程序移至 mvc。由于 stackoverflow 使用 linq to sql 我决定重新使用我的 linq to sql 库而不是创建 linq to 实体。

所有数据访问和操作都是使用 linq to sql 完成的，因此我将查询转移到 web api 会容易得多。

我想尽可能多地重用代码，并将使用 Telerik 的 Kendo UI for MVC。

该应用程序需要在线和离线工作，所以我认为 api 会很好。

但是在注意到 api 包含与 mvc internet 项目相同的对象类型之后，我不明白为什么我会同时使用 internet 和 api mvc 项目。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:11:28.207

你可以走两条路。如果您创建一个 Web API 项目，它会附带所有 MVC4 功能。在控制器文件夹项目中，如果您右键单击并说新建，您可以选择创建 Web API 控制器或 MVC 控制器。由于两者的 URL 不同（Web APi 默认会在 url 中包含 /api/），您可以决定是调用 MVC4 控制器还是 Web API 控制器。

# android - Android姜饼DHCP 119 setprop不起作用

> ID：15275807
> 
> 赞同：0
> 
> 时间：2013-03-07T15:59:27.223
> 
> 标签：android, dns, adb, tcpdump, dhcp

我尝试使用 adb 命令设置自定义 DNS 后缀（在我的情况下为 yahoo.com）

> setprop net.dns.search yahoo.com

我使用它验证了它

> getprop net.dns.search

它返回 yahoo.com

但是，当我`music`在浏览器中键入并在 adb 中运行 tcpdump 时，这就是我得到的。

![在此处输入图像描述](../Images/96ef9ae0d7c9aa51b1e3feaee0e76da1.png) ![在此处输入图像描述](../Images/b7df287bc9730d15ead842be68024ec5.png)

所以，查询实际上是“music.yahoo.com”，但不知何故，android默认浏览器说`page not found`

当实际查询是这样时，为什么它不去 music.yahoo.com？

当我将后缀设置为并在浏览器中`google.com`输入时。`finance`它只是打开`google.com`而不是`finance.google.com`

有谁知道可能出了什么问题？任何帮助深表感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:29:36.907

你可能混淆了一些东西。net.dns.search 为搜索的主机名添加后缀。你传递音乐，它会附加 yahoo.com。好的，您在 DNS 中获得了 music.yahoo.com，但程序认为它是音乐。

在 HTTP 中，您指定要连接的主机。并且会有主持人：音乐。不是music.yahoo.com。服务器接收音乐并且不知道它应该是哪个虚拟服务器。因此，它使用默认站点作为后备。

您是否有理由希望它以这种方式运行？它旨在通过设置您的本地域来节省您自己的时间。但它在公共互联网上效果不佳。

# templates - KendoUI：使用外部变量渲染模板

> ID：15275809
> 
> 赞同：1
> 
> 时间：2013-03-07T15:59:33.160
> 
> 标签：templates, variables, kendo-ui

我正在通过 AJAX 加载一些东西，并通过 kendo 渲染它，但想添加一些不在 AJAX 加载的数据中但在 js 中设置为 var 的东西，如下所示：

```
<script id="some-template" type="text/x-kendo-template">
    <div style="background-image: url('#= commonBackground #');">
        <h2>#= title #</h2>
    </div>
</script> 
```

然后调用这个：

```
$('button').on('click', function(e){
    e.preventDefault();

    var commonBackground = '/images/background.png';
    var someData = {
        title: 'Lorem Ipsum'
    };
    var someTemplate = kendo.template($('some-template').html());

    $('#target').append(someTemplate(someData));
}); 
```

现在我知道这是可怕的代码，但我希望我能理解我在这里尝试做的事情。我不确定我应该如何`commonBackground`从我的模板中引用，对此有什么帮助吗？文档并没有让我变得更聪明......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:09:25.440

您的变量`commonBackground`必须是全局的。

要么将其定义为：

```
var commonBackground = '/images/background.png';
$(document).ready(function () {
    ...
}); 
```

或者：

```
var commonBackground = undefined;
$(document).ready(function () {
    ...
    $('button').on('click', function(e){
        ...
        commonBackground = '/images/background.png';
        ...
    });
}); 
```

**重要提示**：为什么没有`commonBackground`在模板数据中按原样定义`title`？我认为这样做更容易/更清洁：

```
$('#button').on('click', function (e) {
    e.preventDefault();
    var someData = {
        title           : 'Lorem Ipsum',
        commonBackground: 'background.png'
    };
    var someTemplate = kendo.template($('#some-template').html());
    $('#target').append(someTemplate(someData));
}); 
```

# java - 暂时禁用按键事件

> ID：15275810
> 
> 赞同：0
> 
> 时间：2013-03-07T15:59:35.310
> 
> 标签：java, gwt, smartgwt

在 GWT 中，是否可以暂时挂起某个按键，直到需要再次允许该按键？就像全球暂停一样。我有一个问题，当我在 SmartGWT 的 RelativeDateItem 上打开日期选择器时，它会导致整个页面滚动到视图之外，直到用户再次点击向上箭头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-06-10T22:52:47.827

这对我来说适用于 JEditorPane：

```
 @Override
    public void keyTyped(KeyEvent evt) {
    if (inTag() > -1) {
        evt.consume();
    } 
```

javadoc显示：

> **无效 java.awt.event.InputEvent.consume()**
> 
> **消耗**
> 
> 公共无效消耗（）
> 
> 使用此事件，以便它不会由发起它的源以默认方式处理。

JEdi​​torPane 位于实现 KeyListener 的 JFrame 中，JEditorPane 执行以下操作：

```
jEditorPaneSource.addKeyListener(this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:15:24.077

```
datepicker.addKeyPressHandler(new com.smartgwt.client.widgets.events.KeyPressHandler() {
public void onKeyPress(
    com.smartgwt.client.widgets.events.KeyPressEvent event) {
        event.preventDefault();
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-07T09:23:35.717

我相信你可以用这个阻止它。

```
 Event.addNativePreviewHandler(new NativePreviewHandler(){
                @Override
                public void onPreviewNativeEvent(NativePreviewEvent event) {
               EventTarget eventTarget = event.getNativeEvent().getEventTarget();
            Element el = Element.as(eventTarget);
                       switch (event.getTypeInt()){
                       case Event.ONKEYPRESS:
                       case Event.ONKEYUP:
                       case Event.ONKEYDOWN:
                         if (el.getNodeName().equalsIgnoreCase("NODE FROM DATEPICKER")) {
                             if (event.getNativeEvent().getKeyCode() == "yourKeyCodeToBlock"
                                    event.cancel();
                             }
                         }
                         break;
                       }                   
                }
         }); 
```

# routing - ember.js 似乎为路由选择了错误的控制器

> ID：15275812
> 
> 赞同：0
> 
> 时间：2013-03-07T15:59:38.750
> 
> 标签：routing, controller, ember.js

我正在尝试使用 rails/ember.js 编写一个小博客应用程序。帖子可以被标记（使用acts-as-taggable-on），并且可以通过访问“/t/:tag_name”查看具有特定标签的所有帖子的列表。我在 post_controller.rb 的索引操作中使用“tagged_with”进行搜索（如果我没记错的话，通过 tagged_route.js 中的“find”调用）以及当我直接访问页面时（例如使用“/t/first ") 一切正常。

但是，当我转到其中一个帖子的页面并单击指向其中一个标签的链接时，ember.js 停留在帖子控制器（.js 之一）中，同时转到正确的地址，我得到一个以下错误消息：

*   TypeError：arrangedContent.addArrayObserver 不是函数
*   TypeError：content.removeArrayObserver 不是函数
*   TypeError: get(...).objectAt 不是函数

我试过添加

```
controllerFor: function() {
  return EmberBlog.TaggedController;
} 
```

到 tagged_route.js，但标签页面上找到的帖子列表仍然为空。soo，有没有人知道我可能做错了什么？

以下是（可能）相关文件：

我的路由器.js：

```
EmberBlog.Router.map(function() {
// default index route to / loading index template
  this.resource("posts", function() { // implicit path and template name (same as route name)
    //this.route('new');
  });
  this.resource('post', { path: '/posts/:post_id' });
  this.resource('tagged', { path: '/t/:tag_name' });
  this.route("about");
});

EmberBlog.reopen({
  location: 'history'
}); 
```

我的 tagged_route.js：

```
EmberBlog.TaggedRoute = Ember.Route.extend({
  model: function(params) {
    Em.Logger.info( params );

    var posts = EmberBlog.Post.find({'tag_name': params.tag_name});
    return posts;
  }//,
  //controllerFor: function() {
  //  return EmberBlog.TaggedController;
  //}
}); 
```

我的 post_controller.rb 中的索引操作：

```
def index
  if params[:tag_name]
    posts = Post.tagged_with(params[:tag_name])
  else
    posts = Post.all
  end
  render json: posts, meta: { total: posts.count }
end 
```

我的 tagged.handlebars：

```
<h2>Tagged Posts</h2>

<div id="posts">
  {{log controller}}
  <ul>
    {{#each post in controller}}
      {{view EmberBlog.PostInListView contentBinding="post"}} //--> <li>{{#linkTo post post}}{{post.title}}{{/linkTo}}</li>
    {{else}}
      Sorry, no posts to display
    {{/each}}
  </ul>
</div> 
```

我的 post.handlebars 的相关部分：

```
...
<div class="taglist">
  <ul class="inline">
    Tags:
    {{#each tag in tagList}}
      <li>{{#linkTo tagged tag}}{{tag}}{{/linkTo}}</li>
    {{else}}
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:54:21.657

我在这个问题的答案的帮助下找到了[这个问题](https://stackoverflow.com/questions/15341429/ember-typeerror-arrangedcontent-addarrayobserver-is-not-a-function)。

问题是 linkTo 没有触发我的 TaggedRoute 中的模型钩子，并且 TaggedController（一个 ArrayController）试图使用 linkTo 传递的字符串。

我通过使 TaggedController 成为具有计算属性 postsWithTag 的 ObjectController 来解决它

```
EmberBlog.TaggedController = Ember.ObjectController.extend({
  content: null,

  postsWithTag: function() {
    var posts = EmberBlog.Post.find({'tag_name': this.get('content')});
    return posts;
  }.property('@content')
}); 
```

并将 TaggedRoute 更改为

```
EmberBlog.TaggedRoute = Ember.Route.extend({
  model: function(params) {
    Em.Logger.info( params );

    var tag = params.tag_name;
    return tag;
  }
}); 
```

和 tagged.handlebars 到

```
<h2>Tagged Posts</h2>

<div id="posts">
  {{log controller}}
  <ul class="unstyled">
    {{#each post in postsWithTag}}
      {{view EmberBlog.PostInListView contentBinding="post"}}
    {{else}}
      Sorry, no posts to display
    {{/each}}
  </ul>
</div> 
```

# sql - 将英国格式日期转换为日期时间

> ID：15275813
> 
> 赞同：2
> 
> 时间：2013-03-07T15:59:40.787
> 
> 标签：sql, sql-server-2008, tsql

我在 SQL 中有一个表示日期的值，但它是 nvarchar 类型的。日期的值采用以下格式：

```
dd/mm/yyyy hh:mm 
```

我需要通过视图以`DATETIME`格式显示此列到 CCure 800 数据库。我希望使用`CAST`/ `CONVERT`; 但是，使用它时，会返回以下错误：

> 消息 242，级别 16，状态 3，第 1 行
> 将 varchar 数据类型转换为 datetime 数据类型导致值超出范围。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-07T16:01:39.113

请停止将日期存储为字符串，*尤其*是 Unicode 字符串。您是否担心我们的某些未来版本的日历将使用变音符号、井号、象形文字或普通话而不是数字？

将日期存储为日期。这就是这些数据类型的用途。除了不必担心无效的解释之外，您还可以获得和之类的所有好处`DATEPART`，`DATEADD`并且您不必担心有人在列中塞进废话（任何`31/02/2012`从`'I don''t want to enter a real date'`...

同时，您只需要使用样式编号`CONVERT`（这不会可靠地与 一起使用`CAST`）：

```
SELECT CONVERT(DATETIME, '13/06/2013 09:32', 103); 
```

为了使它与`CAST`.`LANGUAGE``DATEFORMAT`

```
SET DATEFORMAT DMY;
SELECT CAST('13/06/2013 09:32' AS DATETIME); 
```

或者

```
SET LANGUAGE BRITISH;
SELECT CAST('13/06/2013 09:32' AS DATETIME); 
```

在很大程度上，我更喜欢为您提供的附加控件，并且几乎单方面更改to`CONVERT`的所有实例，即使不需要此控件，以保持一致性（为什么在某些情况下使用，以及何时需要它，当您可以总是使用？）。`CAST``CONVERT``CAST``CONVERT``CONVERT`

**编辑**

要识别由于错误的数据类型选择而潜入表中的垃圾数据，请执行此操作（然后修复数据，或者更好的是修复数据类型，以免再次发生这种情况）：

```
SET DATEFORMAT DMY;
SELECT date_column FROM dbo.table_name WHERE ISDATE(date_column) = 0; 
```

# xcode - 自动推送屏幕

> ID：15275819
> 
> 赞同：0
> 
> 时间：2013-03-07T15:59:57.917
> 
> 标签：xcode

我是 Xcode 的新手，这也是我的第一个问题。这是我的问题： **|** 我有一个 ViewController1，然后我创建了另一个（称为 ViewController2）。当我启动我的应用程序时，它会显示 ViewController |（导致问题）***|*** （现在问题来了）***然后在 5 秒（或 x 秒）后它会自动推送到 ViewController2 Screen***。我真的可以这样做吗？感谢您阅读我的问题。我是越南人，所以我的英语技能会让你很难理解我说的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:07:38.730

您需要保证 UIViewController 的类设置正确。查看 Identity Inspector 并查看选择了哪个类。在此之后，如果您正在使用带有导航控制器的故事板，请验证指向将出现在应用程序启动中的视图的第一个箭头。

![在此处输入图像描述](../Images/76c0e28f77ceac13c43024245d347661.png)

# javascript - element.height 返回可见高度 - 我想要总高度？

> ID：15275824
> 
> 赞同：0
> 
> 时间：2013-03-07T16:00:11.393
> 
> 标签：javascript, jquery, height, image

**所以显然这只会发生在我身上——我不知道为什么，但如果它有效，我很高兴:)**

我有一个全屏幻灯片，我创建了一个函数，可以垂直居中任何太大的图像。

```
 function fixImages(){
    maxheight = $('.index-slide-container').height();
    $('.index-slide-container img').each( function(index, ele){
        if (ele.height > maxheight){
            offset = ( maxheight - ele.height ) / 2;
            $(ele).css('top', offset + 'px');
        }
    });
}
fixImages(); 
```

但是，`ele.height`返回图像可见部分的高度（它的容器的高度，因为它有`overflow:hidden`，即使当我`console.log(ele)`展开元素时，'height' 显然是正确的值。

我也试过`$(ele).height()`,`$(ele).css('height')`和`$(ele).outerHeight()`; `ele.clientHeight`所有这些都返回相同的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:32:37.853

我做了一些测试，$('img').height(); 正在给我正确的图片高度。

如果您希望将图片垂直居中，为什么不使用 css 的绝对定位，例如：

```
.index-slide-container img {
    position:absolute;
    top:50%;
} 
```

而且，您可以使用 jQuery 以编程方式设置负边距：

```
 $('.index-slide-container img').each( function(i, e){
     var height = $(e).height() / 2;
     $(e).css({'margin-top':'-'+height});
 }); 
```

# css - LESS CSS - 根据主体类更改主题颜色的变量值

> ID：15275829
> 
> 赞同：7
> 
> 时间：2013-03-07T16:00:25.000
> 
> 标签：css, colors, themes, less, mixins

在这里掌握LESS，但有一件事仍然有点不清楚。

假设我的网站有多个颜色主题，由 body 标签上的类控制。由此我可以为每个主题中的每个元素重新定义各种颜色。如果我有很多元素要改变……和很多主题，这很容易但相当耗时。每次我添加一个新主题时，我都需要用不同的颜色值再次写出所有选择器。

到目前为止，我的工作基于我发现的另一篇文章： [LESS.css variable based on class](https://stackoverflow.com/questions/11599520/less-css-variable-depending-on-class)

...但是，对于我想做的事情来说，这似乎仍然过于复杂，因为我仍然必须写出所有选择器并包含 mixin，然后再放入具有颜色变量的相同 CSS。

我在这里创建了一个[CODEPEN](http://codepen.io/sambadave/pen/gIcrj)

如果有人有时间看一看并建议我如何以不同的方式处理此问题或如何简化此过程，我将不胜感激。

非常感谢任何提供帮助的人:)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-07T19:25:58.963

假设您仍然希望在一个样式表中对其进行主题化（而不是像注释中提到的 cimmanon 那样的多个表），并且假设您使用的是 LESS 1.3.2+，那么下面的代码可以通过设置来减少重复量循环遍历需要更改主题的类。

请注意，这在 Codepen 上不起作用（它会抛出错误`uncaught throw #`，可能是因为它们正在运行早期版本的 LESS），但您可以通过将代码放入[LESS 的编译器中看到它正确编译](http://less2css.org/)。

**LESS（基于您的 Codepen 代码，并添加了演示主题）**

```
//////////////////////////////////////////////////////
// CONSTANTS

@lightColour: #fff;
@darkColour: #000;
@lightBg: #fff;
@darkBg: #000;
@numberOfThemes: 3; //controls theme loop

//////////////////////////////////////////////////////
// MIXINS

//Theme Definitions by parametric mixin numbers (1), (2), etc.
.themeDefs(1) {
  @lightColour: #f00;
  @darkColour: #fff;
  @lightBg: #f00;
  @darkBg: #fff;
}

.themeDefs(2) {
  //inverse of 1
  @lightColour: #fff;
  @darkColour: #f00;
  @lightBg: #fff;
  @darkBg: #f00;
}

.themeDefs(3) {
  @lightColour: #cfc;
  @darkColour: #363;
  @lightBg: #cfc;
  @darkBg: #363;
}

.curvy {
  -moz-border-radius: 5px;
  -webkit-border-radius: 5px;
  border-radius: 5px;
}

//////////////////////////////////////////////////////
// GENERAL STYLING

* {padding: 0;margin: 0;}
html {text-align: center;}
h2 {padding: 20px 0;}

.box {
  .curvy;
  color: @lightColour;
  background: @darkBg;
  display:inline-block; width:10%; padding:20px 5%; margin:0 1% 20px 1%;
}

//////////////////////////////////////////////////////
// THEME BUILDING

.buildThemes(@index) when (@index < @numberOfThemes + 1) {

  .theme-@{index} {
      .themeDefs(@index); 
      color: @lightColour;
      background: @darkBg; 

      .box {
        color: @darkColour;
        background: @lightBg;
      }
    }
    .buildThemes(@index + 1);
}
//stop loop
.buildThemes(@index) {}
//start theme building loop
.buildThemes(1); 
```

**CSS 输出（为简洁起见，仅显示循环主题 css）**

```
.theme-1 {
  color: #ff0000;
  background: #ffffff;
}
.theme-1 .box {
  color: #ffffff;
  background: #ff0000;
}
.theme-2 {
  color: #ffffff;
  background: #ff0000;
}
.theme-2 .box {
  color: #ff0000;
  background: #ffffff;
}
.theme-3 {
  color: #ccffcc;
  background: #336633;
}
.theme-3 .box {
  color: #336633;
  background: #ccffcc;
} 
```

# mysql - 我无法将 mysql 数据库服务器与 rails 项目连接？（Windows 7的）

> ID：15275831
> 
> 赞同：0
> 
> 时间：2013-03-07T16:00:25.933
> 
> 标签：mysql, ruby-on-rails, ruby, windows

我是 Rails 的新手并使用 Windows 7。在我的 Windows 机器上，我已经正确安装了 ruby​​ 1.93、rails 3.2、Mysql 5.1（也使用此命令“gem install mysql2”安装 MYSQL 驱动程序）。我还将“libmySQL.dll”文件放入 ruby​​/bin 目录。我可以创建 rails 项目并且可以成功运行 webrick 服务器。数据库服务器也可以连接（使用 sqlite）。但是当我使用“rails new app_name -d mysql”这个命令使用mysql时......mysql服务器没有与rails项目连接。在我的 database.yml 中，我有：

```
development:
adapter: mysql2
encoding: utf8
reconnect: false
database: untitled5_development
pool: 5
username: root
password:
host: localhost 
```

对不起，我的英语不好。感谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-06T13:13:06.567

嗨，您必须为root用户设置密码。另请注意，旧版本的 ruby​​ on rails 会希望您注释数据库名称。如果您还没有创建数据库。

# prolog - SWI-Prolog 深度优先搜索？

> ID：15275833
> 
> 赞同：1
> 
> 时间：2013-03-07T16:00:27.803
> 
> 标签：prolog, depth-first-search

我的目标是开发一个简单的程序来运行一个名为“Kayles”的游戏，它类似于Skittles。你有一排瓶子，两名玩家轮流击倒它们，击倒最后一瓶的玩家获胜。您只能将 1 或 2 个瓶子击倒，并且它们必须彼此相邻。

该程序的第一部分是决定如何表示一个瓶子和一个空白空间。我决定使用一个列表，其中 1 代表一个瓶子，0 代表一个空白空间。

该程序的第二部分是将当前状态打印到终端，其中瓶子由星号 * 表示，空白区域由间隙表示。

该程序的第三部分是列出并打印从当前状态可到达的所有可能的下一个状态。例如，如果您有 3 个瓶子 [1,1,1]，则可能的下一个状态是 [0,1,1]，因为第一个瓶子被击倒。所以这个谓词应该打印所有可能的下一个状态的列表，再次用 * 和空格表示。

我已经成功完成了上述工作，这是我到目前为止的代码：

```
printstate([]) :- nl.
printstate([B|L]) :- (B=0 -> write(' '); write('*')), printstate(L).

next([1|S], [0|S]).
next([1,1|S], [0,0|S]).
next([0|S], [0|T]) :- next(S,T).
next([1|S], [1|T]) :- next(S,T).

printnextstates(S,T) :- next(S,T), printstate(T), fail. 
```

下一点是我坚持的一点！因此，目标是将状态的值定义为如果第一个移动的玩家可以强制获胜，则为 1，否则为 0。我要编写一个谓词 value(S,X)，它将通过游戏树的深度优先搜索来计算任何游戏状态 S 的值 X。如果可能的话，我应该使用 assert 来避免搜索多次探索任何位置。

我不知道该怎么做！

到目前为止，这是我能想到的：

```
value(S,X) :- S = 1, ([S,T] = 1); 0. 
```

但我敢肯定这不是那么简单，但我不知道如何开始这个问题！我已经研究过深度优先搜索，但我对它的理解还不够，无法写下这篇文章……有人知道如何开始这个问题吗？

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T17:56:25.067

由于玩家可以在任何位置自由选择元素，因此问题的适当数据表示会产生显着的简化：假设我们保留了可用瓶子的列表。然后你可以只声明逻辑：

```
win(P) :-
    move(P, P1),
    \+ win(P1).
win(P) :- move(P, []).

move([_|R], R).
move([_,_|R], R). 
```

这是一个愚蠢的测试，可以达到任意长度，而没有注意到一个简单的递归公式给出了结果

```
?- setof(N, L^(between(1,20,N),length(L,N),win(L)), Wins).
Wins = [1, 2, 4, 5, 7, 8, 10, 11, 13|...]. 
```

# iphone - APNS Apple 推送通知令牌过时并停止工作

> ID：15275844
> 
> 赞同：0
> 
> 时间：2013-03-07T16:00:53.530
> 
> 标签：iphone, ipad, ios6, push-notification, apple-push-notifications

有谁知道什么会导致 Apple 推送通知令牌过时？一段时间后，推送令牌不再适用于给定设备，而其他令牌则有效。如果我为该设备删除该帐户并为该设备创建一个新帐户并从 Apple 接收新的 Push 令牌，则新的 Push 令牌可以正常工作。

**编辑 1 - 该[帖子](https://stackoverflow.com/questions/6819315/max-number-of-devices-to-send-to-apns-socket-sever)声称推送通知连接在 200 条通知后失败，并且必须重新启动连接。有没有其他人有这种经验？**

Push 令牌是否会因为 Apple 看到该设备的 Push 连接在给定时间段内过于频繁地打开和关闭而过时？如果是这样，是否有某种方法可以以编程方式知道推送令牌何时过时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:27:07.043

您的应用程序应在每次启动时注册推送通知。这样，您每次启动时都会获得当前的设备令牌，如果它发生变化（您可以将旧副本存储在应用程序中以了解这一点），您可以将其发送到您的服务器。

[您可以在此处查看](https://stackoverflow.com/a/15235472/767730)引用 APNS 指南的相关答案。

# php - PHP $_SERVER['REQUEST_URI'] 返回 404 文件

> ID：15275848
> 
> 赞同：0
> 
> 时间：2013-03-07T16:01:00.080
> 
> 标签：php

我在这里遇到了一个奇怪的问题。

我将会话变量设置`$_SERVER['REQUEST_URI']`为我网站每个页面上的值，登录页面除外。这样，我可以将用户重定向回他们在登录之前所在的任何页面。

它在每种情况下都可以正常工作，除了最近我在页脚和图像中破坏了图像`404`。现在，`$_SERVER['REQUEST_URI']`似乎正在抓取无法加载的图像的 URL，而不是用户所在的页面，因此我的登录表单现在正试图将用户重定向到不存在的图像。

显然，加载失败的文件并不理想，但有谁知道为什么这个服务器变量会取最后一个失败请求的值而不是当前页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:07:11.893

您已配置`mod_rewrite`为`.htaccess`通过 php 脚本处理不存在的文件。

由于您的图像已经消失，与此图像匹配的 URI 也由存储`$_SERVER['REQUEST_URI']`到会话的此脚本处理。所以，它存储了请求页面的 URI，然后用请求的和不存在的图像 URI 重写它，因为浏览器最后请求资源。

要解决此问题，您必须在将图像、css、javascript 的 URL 存储到会话之前过滤它们，或者避免出现从结果页面指向不存在资源的情况。

# unix - 如果可能，需要将 2 个 cron 行合并为 1 个

> ID：15275853
> 
> 赞同：0
> 
> 时间：2013-03-07T16:01:05.040
> 
> 标签：unix, crontab, aix

我需要创建一个 cron 条目，它将在周一至周五上午 11:30 和下午 4:00 启动命令。无论如何要在一个条目中执行此操作，还是我需要使用两个？

这对于任何有特定时间来运行他们的工作的人来说都是很棒的，而他们的工作时间不会落在它运行的同一分钟。

目前我只能想象如下两线系统，这是唯一的方法吗？

`# 30 11 * * 1-5 /cmd1`

`# 00 16 * * 1-5 /cmd1`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:25:45.770

不可能仅将其组合在一行上。

你建议做什么：

```
30 11,16 * * 1-5 /cmd1 
```

甚至会在 16.30 执行。

然后，唯一的方法是像你已经拥有的那样分成两部分：

```
30 11 * * 1-5 /cmd1
00 16 * * 1-5 /cmd1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:12:31.177

你可以试试这个：

```
30 11,16 * * 1-5 /cmd1 
```

如果您接受将第二个命令的时间更改为 16:30。

# qt - 使用 CMakes qt_wrap_ui 命令

> ID：15275857
> 
> 赞同：0
> 
> 时间：2013-03-07T16:01:10.957
> 
> 标签：qt, cmake

我目前正在尝试将用于 QT 项目的构建系统从 Visual Studio 更改为 CMake，但我无法弄清楚 qt_wrap_ui 命令的正确用法。目前，我正在这样使用它：

```
macro(addQtForProject argLibraryName argSourceList)

    ...

    qt_wrap_ui(${argLibraryName} ${argSourceList} ${argSourceList} ${varUiList})

endmacro() 
```

当我将源和标头作为单个列表处理时，我当然希望生成的文件最终出现在同一个列表中。varUiList 包含项目使用的四个 .ui 文件。

当使用带有此宏的 CMakes Visual Studio 2005 生成器时，它会在 Visual Studio 项目文件中添加四个 .h 文件，每个 .ui 文件一个，但这些文件本身似乎确实存在，所以我一定做错了什么。不幸的是， CMakes[文档](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3aqt_wrap_ui)在这个主题上相当稀疏。这已经用 CMake 2.8.10 进行了测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:53:07.917

您可能想要使用具有更多文档的更新[`FindQt4`模块。](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#module%3aFindQt4)

具体来说，它提供了`QT4_WRAP_UI`宏：

> `QT4_WRAP_UI(outfiles inputfile ... OPTIONS ...)`
> 从 Qt 设计器 ui 文件列表创建代码。可以为 uic 提供选项，例如在执行“uic -help”时找到的选项

# xcode - 如何将Xcode中的蓝色放置文本变成文本？

> ID：15275859
> 
> 赞同：1
> 
> 时间：2013-03-07T16:01:12.753
> 
> 标签：xcode, xcode4.5

有没有办法将 Xcode 中的蓝色放置文本转换为实际文本？当我遇到障碍时，必须输入它是非常乏味的。![在此处输入图像描述](../Images/a539c93f83a4d2d31057cd869d20a3cf.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T16:03:20.977

从您显示的插入符号位置，不会：

`Tab`然后`Return`

做你想做的事？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T16:03:15.040

选择蓝色替换文本后，按回车键。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T16:03:17.550

按`Tab`键，选中蓝色文字后，按`Enter`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T16:05:46.377

*   **选择**使用`tab`或**鼠标单击**
*   按**`Enter`或`Return`**

这将插入文本

# javascript - Javascript html5 canvas 随机切换语句图片

> ID：15275861
> 
> 赞同：1
> 
> 时间：2013-03-07T16:01:27.963
> 
> 标签：javascript, html, canvas, switch-statement

我正在尝试随机选择其中包含值的语句，该语句从精灵表中的某个点绘制。这是我拥有的当前代码。

```
 this.asteroid = Math.floor(Math.random()*7+1);
    switch(this.asteroid)
    {
    case 0:
        this.srcX = 0;
        this.srcY = 528;
        this.width = 32;
        this.height = 33;
        break;
    case 1:
        this.srcX = 32;
        this.srcY = 528;
        this.width = 32;
        this.height = 33;
        break;  
    case 2:
        this.srcX = 64;
        this.srcY = 528;
        this.width = 32;
        this.height = 33;
        break;
    case 3:
        this.srcX = 63;
        this.srcY = 565;
        this.width = 62;
        this.height = 60;           
        break;
    case 4:
        this.srcX = 125;
        this.srcY = 565;
        this.width = 62;
        this.height = 60;           
        break;
    case 5:
        this.srcX = 187;
        this.srcY = 565;
        this.width = 62;
        this.height = 60;           
        break;
    case 6:
        this.srcX = 0;
        this.srcY = 632;
        this.width = 116;
        this.height = 120;          
        break;  
    } 
```

然后我稍后会绘制它选择的值。

我的问题主要是绘制所有这些，但同时只绘制一个空白图像，我检查了所有 X 和 Y 位置，它们都是正确的并且在精灵表中匹配。

下面是我用来绘制精灵的代码：

```
this.drawX -= this.speed;
ctxEnemy.drawImage(imgSprite,
    this.srcX+this.width,this.srcY,this.width,this.he‌​ight,
    this.drawX,this.drawY,this.width,this.height);
this.checkEscaped(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:03:30.833

`Math.floor(Math.random()*7+1)`可以取 1 到 7 之间的值。删除`+1`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T15:34:49.313

我认为您的绘图代码可能有问题：

```
this.drawX -= this.speed;
ctxEnemy.drawImage(imgSprite,
    this.srcX+this.width,this.srcY,this.width,this.he‌​ight,
    this.drawX,this.drawY,this.width,this.height);
this.checkEscaped(); 
```

在行中：`this.srcX+this.width,this.srcY,this.width,this.he‌​ight,` 您正在将对象宽度添加到源位置。我认为这可能会影响您的精灵图。请参阅下面的参考评论示例：

```
// draw image to screen drawImage(imageObject, 
//     sourceX, sourceY, sourceWidth, sourceHeight,
//     destinationX, destinationY, destinationWidth, destinationHeight)
ctx.drawImage(imageObject, 
    this.srcX, this.srcY, this.width, this.height, 
    this.drawX, this.drawY, this.width, this.height); 
```

# class - AngularJs - 从关联的类和集合中传递数据

> ID：15275862
> 
> 赞同：0
> 
> 时间：2013-03-07T16:01:29.350
> 
> 标签：class, collections, angularjs

**我的膳食课堂（服务器端）**

公共课餐{

```
public Meal()
{
    Fruits = new List<Fruit>();
}

public int Id { get; set; }
public string Name { get; set; }

[ForeignKey("Fk_VendorId")]
public virtual Vendor Vendor { get; set; }
public int Fk_VendorId { get; set; }

//collection
public virtual ICollection<Fruit> Fruits  { get; set; } 
```

}

**表单HTML：**

```
 <div ng-controller="MealCtrl>
 <select ng-model="meal.Id" ng-options="meal.Id as meal.Name for meal in Meals"></select>
 </div>

 <div ng-controller="FruitCtrl>
 <select ng-model="???" ng-options="fruit.Id as fruit.Name for fruit in fruits"></select>
 </div>

 <div ng-controller="VendorCtrl>
 <select ng-model="???" ng-options="vendor.Id as vendor.Name for vendor in vendors"></select>
 </div> 
```

**问题：**

如何在提交时将选定的关联类 [Vendor] 和关联的集合 [Fruits] 传递给 Meal 类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:22:30.987

将关闭的 MealCtrl div 移动到末尾，并将 meal.FK_VendorId 添加为供应商的 ng-model。

```
<div ng-controller="MealCtrl>
 <select ng-model="meal.Id" ng-options="meal.Id as meal.Name for meal in Meals"></select>

<div ng-controller="FruitCtrl>
<select ng-model="???" ng-options="fruit.Id as fruit.Name for fruit in fruits"></select>
</div>

<div ng-controller="VendorCtrl>
<select ng-model="meal.Fk_VendorId" ng-options="vendor.Id as vendor.Name for vendor in vendors"></select>
</div>

</div> 
```

# php - 如何使用 REST API 从 php 中的数组回显特定值，需要从给定数组中回显名称

> ID：15275866
> 
> 赞同：-1
> 
> 时间：2013-03-07T16:01:41.817
> 
> 标签：php, arrays

```
Array
(
    [root] => Array
        (
            [status] => Array
                (
                    [statusCode] => 200
                    [message] => OK
                )

            [response] => Array
                (
                    [success] => 1
                    [result] => Array
                        (
                            [0] => Array
                                (
                                    [id] => 1
                                    [content] => 12
                                    [enabled] => 1
                                    [date_modified] => 2013-03-07 19:28:19
                                    [name] => Home page
                                    [category_id] => 1
                                )

                        )

                    [error_messages] => 
                    [debug] => 
```

请帮助我从给定数组中回显名称。我尝试了很多东西，但找不到正确的，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:04:07.323

试试这个：

```
$arr['response']['result'][0]['name'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:04:30.413

试试这个

```
echo $response["result"][0]["name"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T16:05:07.197

您可能会得到多个名字，所以：

```
foreach($yourArrayRef['root']['response']['result'] as $result) {
   echo $result['name'];
} 
```

# android - 安卓 HttpPost。将数据发送到 PHP 服务器上的表单

> ID：15275871
> 
> 赞同：1
> 
> 时间：2013-03-07T16:02:02.457
> 
> 标签：android, http-post

我正在使用最新的 java Eclipse 软件，当我运行这个 HttpPost 代码时模拟器崩溃了。我在笔记本电脑上安装了 uniserver，所以我将它用作服务器。

此代码应该调用上一个类中的编辑文本数据，并使用 HttpPost 请求将此数据发布到在线表单上各自的字段中。

编辑文本数据是 3 个字段：“From”、“To”和“Message”。而且我在服务器上创建的表单也有这些相同的字段来输入数据。（“ [http://19x.xx.xx.xxx/androidp2p/testform.php](http://19x.xx.xx.xxx/androidp2p/testform.php) ”）其中 19x.xx.xx.xxx 是我的（本地主机）IP 地址。

我从上一个课程中正确提取了该数据，并且我的代码类似于我在网上找到的 HttpPost 示例，但我不确定它为什么会崩溃。

我附上了我试图查看是否可以获得任何帮助的 HttpPost 方法。提前谢谢你。

方法一：

```
String myBreadu, myBreadr, myBreadm;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    Bundle myBasket = getIntent().getExtras();
    myBreadu = myBasket.getString("keyfrom");
    myBreadr = myBasket.getString("keyto");
    myBreadm = myBasket.getString("keymsg");
    // Create a new HttpClient and Post Header
    HttpClient client = new DefaultHttpClient();
    String postURL = ("http://19x.xx.xx.xxx/androidp2p/testform.php");
    HttpPost post = new HttpPost(postURL);
    try {
        // Add the data
        List<NameValuePair> pairs = new ArrayList<NameValuePair>(3);
        pairs.add(new BasicNameValuePair("keysendu", myBreadu));
        pairs.add(new BasicNameValuePair("keysendr", myBreadr));
        pairs.add(new BasicNameValuePair("keysendm", myBreadm));
        UrlEncodedFormEntity uefe = new UrlEncodedFormEntity(pairs);
        post.setEntity(uefe);
        // Execute the HTTP Post Request
        HttpResponse response = client.execute(post);
        // Convert the response into a String
        HttpEntity resEntity = response.getEntity();
        if (resEntity != null) {
            Log.i("RESPONSE", EntityUtils.toString(resEntity));
        }
    } catch (UnsupportedEncodingException uee) {
        uee.printStackTrace();
    } catch (ClientProtocolException cpe) {
        cpe.printStackTrace();
    } catch (IOException ioe) {
        ioe.printStackTrace();
    }

} 
```

方法二：

```
String myBreadu, myBreadr, myBreadm;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    Bundle myBasket = getIntent().getExtras();
    myBreadu = myBasket.getString("keyfrom");
    myBreadr = myBasket.getString("keyto");
    myBreadm = myBasket.getString("keymsg");
    String result = null;
    // Create a new HttpClient and Post Header
    HttpClient client = new DefaultHttpClient();
    String postURL = ("http://186.45.107.129/androidp2p/testform.php");
    HttpPost post = new HttpPost(postURL);
    try {
        // Add the data
        List<NameValuePair> pairs = new ArrayList<NameValuePair>(3);
        pairs.add(new BasicNameValuePair("keysendu", myBreadu));
        pairs.add(new BasicNameValuePair("keysendr", myBreadr));
        pairs.add(new BasicNameValuePair("keysendm", myBreadm));
        UrlEncodedFormEntity uefe = new UrlEncodedFormEntity(pairs);
        post.setEntity(uefe);
        // Execute the HTTP Post Request
        HttpResponse response = client.execute(post);
        // Convert the response into a String
        HttpEntity resEntity = response.getEntity();
        BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
        String l = "";
        StringBuilder sb = new StringBuilder();
        while ((l = rd.readLine()) != null) {
            sb.append(l + "\n");
        }
        rd.close();
        String result = sb.toString(); // this line gives an error "Duplicate local variable result"
    } catch (UnsupportedEncodingException uee) {
        uee.printStackTrace();
    } catch (ClientProtocolException cpe) {
        cpe.printStackTrace();
    } catch (IOException ioe) {
        ioe.printStackTrace();
    }

} 
```

这是testform.PHP

# 测试表

从：
到：
消息：

请问我可以再添加一件事吗？我不确定是否应该将数据直接发送到表单或我拥有的其他 PHP 页面。

顺便说一下，当我尝试 HttpPost 时，我在日志中遇到的错误是：

```
FATAL EXCEPTION: main

03-07 11:36:23.226: E/AndroidRuntime(1490): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.project.keegan/com.project.keegan.SendPostMethod}: android.os.NetworkOnMainThreadException

03-07 11:36:23.226: E/AndroidRuntime(1490):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)

03-07 11:36:23.226: E/AndroidRuntime(1490):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)

03-07 11:36:23.226: E/AndroidRuntime(1490):     at android.app.ActivityThread.access$600(ActivityThread.java:130) 
```

对不起，如果这是太多的信息，伙计们。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:03:40.270

您需要使用[**AsyncTask**](http://developer.android.com/reference/android/os/AsyncTask.html)来执行所有网络操作。

您的网络操作可能需要很长时间，如果在主 UI 线程上完成，UI 会变得无响应。如果您的 UI 长时间冻结，该应用程序可能会被操作系统杀死。

因此，Android 4+ 强制使用后台线程来执行网络操作。

将代码放入内部进行网络活动**`doInBacground()`**，所有 AsyncTask 使用**`execute()`**.

这是您的 AsyncTask 的样子：

```
private class SendData extends AsyncTask<String, Integer, Void> {
     protected void doInBackground() {
// Create a new HttpClient and Post Header
HttpClient client = new DefaultHttpClient();
String postURL = ("http://19x.xx.xx.xxx/androidp2p/testform.php");
HttpPost post = new HttpPost(postURL);
try {
    // Add the data
    List<NameValuePair> pairs = new ArrayList<NameValuePair>(3);
    pairs.add(new BasicNameValuePair("keysendu", myBreadu));
    pairs.add(new BasicNameValuePair("keysendr", myBreadr));
    pairs.add(new BasicNameValuePair("keysendm", myBreadm));
    UrlEncodedFormEntity uefe = new UrlEncodedFormEntity(pairs);
    post.setEntity(uefe);
    // Execute the HTTP Post Request
    HttpResponse response = client.execute(post);
    // Convert the response into a String
    HttpEntity resEntity = response.getEntity();
    if (resEntity != null) {
        Log.i("RESPONSE", EntityUtils.toString(resEntity));
    }
} catch (UnsupportedEncodingException uee) {
    uee.printStackTrace();
} catch (ClientProtocolException cpe) {
    cpe.printStackTrace();
} catch (IOException ioe) {
    ioe.printStackTrace();
}

 }

 protected void onProgressUpdate() {
    //called when the background task makes any progress
 }

  protected void onPreExecute() {
     //called before doInBackground() is started
 }
 protected void onPostExecute() {
     //called after doInBackground() has finished 
 }
  } 
```

你可以在任何地方使用**`new SendData().execute("");`**

# c# - 正确实现两个具有不同类型但语义等价的对象的比较

> ID：15275872
> 
> 赞同：11
> 
> 时间：2013-03-07T16:02:05.670
> 
> 标签：c#, design-patterns, design-principles

我发现了一个类似的问题

[如何比较具有相似属性的两个截然不同的对象](https://stackoverflow.com/questions/1725327/how-to-compare-two-distinctly-different-objects-with-similar-properties)

这可能会含蓄地和/或部分地回答我的问题。

假设我想比较（没有很多嵌套条件）这个对象：

```
class ObjectA {
  public string PropertyX { get; set; }
  public char PropertyY { get; set; }
  public long PropertyZ { get; set; }
} 
```

到一个`System.String`。我只对**平等**或**不平等**感兴趣（而不是关于身份的一系列价值观）。

实施`IEquatable<string>`是 `ObjectA`一个正确的选择吗？我不在乎什么*简单有效*，我想为这种情况确定正确的模式。

作为其他信息，请考虑`ObjectA`通常以`IEnumerable<ObjectA>`.

我不需要知道是否`"string"` `==`或`!=` `objectA`实例；不涉及排序。

**编辑以澄清（和帮助）**

*对不起，写一个好问题有时很困难......*

假设出于比较的目的我不能表示`ObjectA`为字符串（违反封装不是一种选择）。

*   在 context-1 中，我必须将它与`PropertyY`.

*   在上下文 2 中，我必须将其与应用于`PropertyY`/的算法相匹配`PropertyZ`。

问题末尾的@Oliver解决方案再次帮助我（并再次+1）。我可以简单地定义一个自定义接口：

```
interface IContextConverter {
  string ToEquatableStringForContext1();
  string ToEquatableStringForContext2();  
} 
```

由于我也`ObjectB`具有相同的逻辑但不同的属性，因此两者都将实现`IContextConverter`（*或者我可能会找到更好的名称*）避免违反[RAP](http://codemanship.co.uk/parlezuml/blog/?postid=934)。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T16:15:14.793

我强烈建议**不要**实现`IEquatable<string>`，尤其是在使用集合、字典、LINQ 等时。你真的不知道何时会在内部深处调用这些方法之一，这可能会导致细微的错误。

由于您喜欢比较两个不同类型的对象，因此简单`Comparer<T>`也行不通。

因此，要么编写 a[`TypeConverter`](http://msdn.microsoft.com/en-us/library/ayybcxe5.aspx)将您的对象转换为所需的类型（在您的情况下为 a `string`），要么向您的对象添加一个方法，例如`.ToEquatableString()`并使用它们的输出将您的对象与其他字符串进行比较。

这是一个示例，您可以获得与另一个集合中的一个字符串匹配的所有元素：

```
IEnumerable<String> otherElements = new[] {"abc", "def", "ghi" };
IEnumerable<ObjectA> myObjects = GetObjects();

var matchesFound = otherElements.Join( // Take the first collection.
              myObjects, // Take the second collection.
              s => s, // Use the elements in the first collection as key (the string).
              obj => obj.ToEquatableString(),  // Create a string from each object for comparison.
              (s, obj) => obj, // From the matching pairs take simply the objects found.
              StringComparer.OrdinalIgnoreCase); // Use a special string comparer if desired. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T16:40:13.750

有很多可能性。

如果您觉得 an`ObjectA`是一种`System.String`，您可以编写一个用户定义的转换（隐式或显式）从`ObjectA`to`System.String`或 from `System.String`to`ObjectA`或两个方向。

您还可以使用类似的签名重载`==`and运算符。请注意和之间存在差异。`!=``operator ==(ObjectA oa, string s)``oa == s``s == oa`

这两种可能性中的任何一种都可能导致混淆。`Equals(object)`覆盖 virtual或引入重载也会令人困惑`Equals(string)`。因此我不建议实施`IEquatable<string>`.

为什么不简单地编写一个未使用名称的方法，例如`public bool EqualsString(string s)`？然后，您当然必须显式调用此方法，但这会减少混乱。另一个想法是使用签名的构造函数，`public ObjectA(string s)`然后实现 and 的“同质”`ObjectA`相等`ObjectA`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T16:14:51.347

**注意：**对于这种特殊情况，我并不特别推荐这个解决方案，但我经常使用这个框架来实现结构的价值平等。在我们的领域中，困难的权衡很常见，解决这些问题的答案，伴随着适当的警告，似乎是有序的。

我认为您希望以与 .NET 框架为字符串类执行此操作的方式相同的方式在您的类上设计值平等语义。至少，以下是必要的：

```
public override bool Equals(object obj) { 
  return (obj is ObjectA) && this == (ObjectA)obj; 
}
bool IEquatable<ObjectA>.Equals(ObjectA rhs) { 
  return this == rhs; 
}
public static bool operator != (ObjectA lhs, ObjectA rhs) { 
  return ! (lhs == rhs); 
}
public static bool operator == (ObjectA lhs, ObjectA rhs) {
  return (lhs.PropertyX == rhs.PropertyX);
}
public override int GetHashCode() { 
  return PropertyX.GetHashCode() 
} 
```

扩展以允许在 ObjectA 和字符串之间进行值比较：

```
bool IEquatable<ObjectA>.Equals(string rhs) { 
  return this == rhs; 
}
public static bool operator != (ObjectA lhs, string rhs) { 
  return ! (lhs == rhs); 
}
public static bool operator != (string lhs, ObjectA rhs) { 
  return ! (lhs == rhs); 
}
public static bool operator == (ObjectA lhs, string rhs) {
  return (lhs.PropertyX == rhs);
}
public static bool operator == (string lhs, ObjectA rhs) {
  return (lhs == rhs.PropertyX);
} 
```

# python - Sqlite 数据库多线程 SELECT 和 UPDATE 操作混淆

> ID：15275875
> 
> 赞同：0
> 
> 时间：2013-03-07T16:02:08.943
> 
> 标签：python, database, sqlite

我正在创建一个使用 Sqlite 数据库来存储信息的多线程应用程序。

其中一个线程执行 SELECT 操作，它选择特定列为空白的行，如下所示：

```
for i in cursor.execute('SELECT Beeid from SongLink WHERE Dlink=\'\''): 
```

另一个线程也访问数据库并尝试更改列的**Dlink 值**。

上面的代码是否总是给出**Dlink=\'\''**的列来处理另一个线程所做的更新，否则这可能会导致错误的行选择

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:05:18.547

[每个线程](http://www.sqlite.org/threadsafe.html)使用单独的连接，SQLite 将保持数据完整性。

在一个连接中对数据库的更改不会在其他线程中可见，直到您 a) 提交更改并且 b) 在想要查看该新数据的连接中启动新事务。

您确实想将`check_same_thread`连接的参数设置为`True`.

# javascript - 出现次数和数组位置

> ID：15275884
> 
> 赞同：0
> 
> 时间：2013-03-07T16:02:49.863
> 
> 标签：javascript, arrays, indexof

可以说我有这个数组：

```
likes = [4,6,42,72,7,4,42,56,6,24];
time = [1,2,3,4,5,6,7,8,9,10]; 
```

当点击我拥有的一个条形图时，我会根据数组`likes`位置转发到当前时间。

```
this.click(function () {
    var pos = result_likes.indexOf(this.bar.value);
    var pos2 = result_time[pos];

    setCurTime(pos2);
}); 
```

但是，当我有相同的喜欢值时，例如数字 4，它将有两个位置，并且 SetCurTime 只会将我转发到第一次出现“like = 4”时（`timecode[0];`）

我怎样才能解决这个问题并前进到正确的时间位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:39:24.280

您需要在条形元素中嵌入元数据来解决这个问题。例如，您可以使用如下[自定义数据属性](https://developer.mozilla.org/en-US/docs/DOM/element.dataset)：

```
<div class="bar" data-index"5">4</div> 
```

当然，您将动态生成它，以创建具有适当索引和值的每个柱。

然后在您的点击处理程序中将是：

```
this.click(function () {
    var pos = this.bar.dataset.index;
    var pos2 = result_time[pos];

    setCurTime(pos2);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T18:10:38.560

在这里为需要类似解决方案的任何其他人重新发布评论：

```
var pos2 = result_time[this.bar.id]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T17:30:19.427

鉴于您使用 gRaphael 库，也许您可​​以抓取条形元素以查看它在图表中的哪个元素，如下所示：

```
this.click(function(evt) {
    var pos = 0; 
    var child = evt.currentTarget; 
    var type = child.nodeName;
    while( (child = child.previousSibling) != null && type === child.nodeName)
        pos++;

    var pos2 = result_time[pos];

    setCurTime(pos2);
}); 
```

# javascript - 从 responsetext 属性中删除引号

> ID：15275885
> 
> 赞同：8
> 
> 时间：2013-03-07T16:02:55.123
> 
> 标签：javascript, ajax, json

`responseText`我正在尝试从对象的属性中删除引号`XMLHttpRequest`。

我的输出是：

```
"[{"data":[[0,28]],"label":"Atyc-1"},{"data":[[0,13]],"label":"Atyc-10"},{"data":[[0,16]],"label":"Atyc-11"},{"data":[[0,17]],"label":"Atyc-2"},{"data":[[0,5]],"label":"Atyc-3"}]" 
```

我需要的是：

```
[{"data":[[0,28]],"label":"Atyc-1"},{"data":[[0,13]],"label":"Atyc-10"},{"data":[[0,16]],"label":"Atyc-11"},{"data":[[0,17]],"label":"Atyc-2"},{"data":[[0,5]],"label":"Atyc-3"}] 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-08-11T09:59:36.067

尝试这个：

```
JSON.parse(xhr.responseText); 
```

**说明**：

这是一个 JSON 响应，这意味着服务器以 JSON 格式响应。为了在 JavaScript 中正确使用它，您需要使用该`JSON.parse()`函数将字符串解析为 JSON。这会将 JSON 对象转换为您需要的响应。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-07T16:06:37.213

```
responsetext.substring(1, responsetext.length - 1); 
```

这将返回删除了第一个和最后一个字符的字符串。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-07T16:06:12.283

如果您在控制台中看到输出，看起来就是这样，那么这些引号仅表示它是一个字符串。

```
console.log("You see!"); // "You see!"
alert("You see!"); // You see! 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-07T16:06:33.953

尝试这个：

```
// Considering it is stored in strJSON variable...
strJSON.substring(1, strJSON.length - 1) 
```

# .net - 多个随机排序元素的正确架构

> ID：15275889
> 
> 赞同：1
> 
> 时间：2013-03-07T16:03:05.440
> 
> 标签：.net, xml-serialization, xsd

我正在从一个包含多种类型的多个元素的 xml 文档创建一个模式，但是以随机顺序，一旦序列化然后反序列化就需要维护（我在 VB.NET 中编程，但 C# 答案很好，所以我没有指定语言）。

```
<xml version="1.0" encoding="utf-8">
<sample:ABC>
   <sample:DEF></sample:DEF>
   <sample:XYZ></sample:XYZ>
   <sample:DEF></sample:DEF>
   <sample:PNQ></sample:PNQ>
   <sample:DEF></sample:DEF>
   <sample:DEF></sample:DEF>
</sample:ABC> 
```

到目前为止，我有这个由 xsd.exe 生成的模式：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="ABC">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="DEF" minOccurs="0" />
        <xs:element name="XYZ" minOccurs="0" />
        <xs:element name="PNQ" minOccurs="0" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

然而，这与 xml 可能出现的所有可能方式并不匹配，显然我已经大量简化了 xml 和模式，并且只显示了一个示例，以便更容易地演示问题。

我看到了使用该[`all`](http://www.w3schools.com/schema/el_all.asp)元素的建议，但只允许每个孩子一个。我还尝试添加重复的子元素（例如两个 DEF 元素），但这会创建一个“不明确”的模式。我也尝试过使用一系列选择元素，但是从模式生成的代码必须使用对象，因此不是类型安全的。我认为可以使用继承来解决这个问题，但我的模式技能不符合它。

问题是：是否有任何模式元素可用于获得与 xml 的正确匹配？如果不能，我至少可以创建一个可用于检查 xml 有效性的模式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T21:18:47.810

要以任意顺序和任意数量匹配`DEF`、`XYZ`和元素的任意序列，您可以使用：`PNQ`

```
<xs:schema 
  xmlns:xs="http://www.w3.org/2001/XMLSchema" 
  xmlns="test" 
  targetNamespace="test" 
  elementFormDefault="qualified">
  <xs:element name="ABC">
    <xs:complexType>
      <xs:sequence maxOccurs="unbounded">
        <xs:element name="DEF" minOccurs="0" />
        <xs:element name="XYZ" minOccurs="0" />
        <xs:element name="PNQ" minOccurs="0" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

与您的架构的唯一区别是添加了`maxOccurs="unbounded"`for`xs:sequence`

请注意，虽然这样的 XML 不能使用 .NET 类中的标准反序列化来反序列化 - 具有相同名称的元素被反序列化为列表或数组，并且必须是连续的。

您可以使用自定义反序列化处理这种情况 - 请参见[此处](http://msdn.microsoft.com/en-us/library/system.xml.serialization.ixmlserializable.aspx)和[此处](http://www.codeproject.com/Articles/43237/How-to-Implement-IXmlSerializable-Correctly)。

# android - Android 应用程序在启动 Activity 时崩溃并显示消息“FATAL EXCEPTION: Async #3”

> ID：15275901
> 
> 赞同：0
> 
> 时间：2013-03-07T16:03:27.373
> 
> 标签：android, android-listview, android-activity, android-cursorloader

我正在尝试制作一个需要使用从 SQLite 数据库检索的数据生成 ListView 的应用程序。

但是一旦启动了执行上述任务的活动，应用程序就会崩溃。

这是活动代码：

```
@TargetApi(Build.VERSION_CODES.HONEYCOMB)
public class DisplayTasks extends ListActivity implements LoaderManager.LoaderCallbacks<Cursor>{

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            SimpleCursorAdapter adapter;
            String fromColumns[] = {TaskEntryDetails.TASK_SUMMARY};
            int toViews[] = {R.id.textView1};

            adapter = new SimpleCursorAdapter(this, R.layout.list_item, null, fromColumns, toViews, 0);
            setListAdapter(adapter);

            // Prepare the loader.  Either re-connect with an existing one, or start a new one.
            getLoaderManager().initLoader(0, null, this);
        }

    private SQLiteCursorLoader loader;
    private SimpleCursorAdapter adapter;
    private DbHelper dbHelper;
    private SQLiteOpenHelper db=null;

@Override
public Loader<Cursor> onCreateLoader(int id, Bundle args) {

    //New
    TaskEntry taskentry = new TaskEntry(DisplayTasks.this);
    dbHelper=taskentry.DbHelpermethod();

    db = dbHelper;
    String rawQuery = "SELECT " + TaskEntryDetails._ID + " , " + TaskEntryDetails.TASK_SUMMARY + " FROM " + TaskEntryDetails.TABLE_NAME;
    loader = new SQLiteCursorLoader(this, db, rawQuery, null);
    return(loader);
}

@Override
public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {
        adapter.changeCursor(cursor);
}

@Override
public void onLoaderReset(Loader<Cursor> arg0) {
        adapter.changeCursor(null);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_display_tasks, menu);
    return true;
}
} 
```

logcat 报告包含：

```
03-07 19:38:12.311: E/AndroidRuntime(32626): Caused by: java.lang.NullPointerException
03-07 19:38:12.311: E/AndroidRuntime(32626):    at com.commonsware.cwac.loaderex.SQLiteCursorLoader.buildCursor(SQLiteCursorLoader.java:54)
03-07 19:38:12.311: E/AndroidRuntime(32626):    at com.commonsware.cwac.loaderex.AbstractCursorLoader.loadInBackground(AbstractCursorLoader.java:41)
03-07 19:38:12.311: E/AndroidRuntime(32626):    at com.commonsware.cwac.loaderex.AbstractCursorLoader.loadInBackground(AbstractCursorLoader.java:1)
03-07 19:38:12.311: E/AndroidRuntime(32626):    at android.content.AsyncTaskLoader.onLoadInBackground(AsyncTaskLoader.java:301)
03-07 19:38:12.311: E/AndroidRuntime(32626):    at android.content.AsyncTaskLoader$LoadTask.doInBackground(AsyncTaskLoader.java:68)
03-07 19:38:12.311: E/AndroidRuntime(32626):    at android.content.AsyncTaskLoader$LoadTask.doInBackground(AsyncTaskLoader.java:56)
03-07 19:38:12.311: E/AndroidRuntime(32626):    at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-07 19:38:12.311: E/AndroidRuntime(32626):    at java.util.concurrent.FutureTask.run(FutureTask.java:234)
03-07 19:38:12.311: E/AndroidRuntime(32626):    ... 3 more
03-07 19:38:12.321: W/DropBoxManagerService(481): Dropping: data_app_crash (1407 > 0 bytes)
03-07 19:38:12.331: W/ActivityManager(481):   Force finishing activity com.example.theapp/.DisplayTasks
03-07 19:38:12.361: W/ActivityManager(481):   Force finishing activity com.example.theapp/.MainActivity
03-07 19:38:12.481: I/ActivityManager(481): Displayed com.example.theapp/.DisplayTasks: +219ms
03-07 19:38:14.381: I/Process(32626): Sending signal. PID: 32626 SIG: 9
03-07 19:38:14.391: I/ActivityManager(481): Process com.example.theapp (pid 32626) has died.
03-07 19:38:14.411: W/InputMethodManagerService(481): Got RemoteException sending setActive(false) notification to pid 32626 uid 10083 
```

这是 TaskEntry.java 的代码

```
public static final String TAG = "TaskEntry";
private DbHelper dbHelper;

public TaskEntry(Context context){
    dbHelper = new DbHelper(context);
}
public DbHelper DbHelpermethod() {
    return this.dbHelper();
}

// Inserting into Database
public void insertIntoDb(String summary) {
    SQLiteDatabase db = dbHelper.getWritableDatabase();

    // Create a new map of values, where column names are the keys
    ContentValues values = new ContentValues();
    values.put(TaskEntryDetails.TASK_SUMMARY, summary);

    @SuppressWarnings("unused")
    long newRowId;
    newRowId = db.insert(TaskEntryDetails.TABLE_NAME, TaskEntryDetails._ID, values);
} 
```

和 DbHelper.java：

```
public class DbHelper extends SQLiteOpenHelper {

public static final String TAG = "TaskEntry";
private static Context context;

public DbHelper(Context context) {
    super(context, TaskEntryDetails.DB_NAME, null, TaskEntryDetails.DB_VERSION);
    this.context=context;
}

@Override
public void onCreate(SQLiteDatabase db) {
    String sql = String.format("CREATE TABLE %s" + "(%s INT PRIMARY KEY, %s TEXT)", TaskEntryDetails.TABLE_NAME, TaskEntryDetails._ID,TaskEntryDetails.TASK_SUMMARY);

    Log.d(TAG, "Created database by name - " + TaskEntryDetails.DB_NAME);
    db.execSQL(sql);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL("DROP IF EXISTS " + TaskEntryDetails.TABLE_NAME);
    onCreate(db);
} 
```

TaskEntryDetails.java：

```
public class TaskEntryDetails implements BaseColumns {
public static final String DB_NAME = "tasks_list.db";
public static final int DB_VERSION = 1;

public static final String TABLE_NAME = "tasks_list";
public static final String TASK_SUMMARY = "task_details";
} 
```

我目前正在使用开源库“CWAC-LoaderEX”来获取 SQLite 数据库中数据的 CursorLoader。

我已经成功地从同一个数据库中检索数据并将其显示到 ScrollView 中，因此希望问题一定不是数据库。

编辑1：

该代码现在似乎因另一条消息而崩溃..

```
03-08 20:37:10.031: D/libEGL(9969): loaded /system/lib/egl/libEGL_tegra.so
03-08 20:37:10.071: D/libEGL(9969): loaded /system/lib/egl/libGLESv1_CM_tegra.so
03-08 20:37:10.091: D/libEGL(9969): loaded /system/lib/egl/libGLESv2_tegra.so
03-08 20:37:10.141: D/OpenGLRenderer(9969): Enabling debug mode 0
03-08 20:37:12.411: D/AndroidRuntime(9969): Shutting down VM
03-08 20:37:12.411: W/dalvikvm(9969): threadid=1: thread exiting with uncaught exception (group=0x40c28930)
03-08 20:37:12.421: E/AndroidRuntime(9969): FATAL EXCEPTION: main
03-08 20:37:12.421: E/AndroidRuntime(9969): java.lang.NullPointerException
03-08 20:37:12.421: E/AndroidRuntime(9969):     at com.example.theapp.DisplayTasks.onLoadFinished(DisplayTasks.java:83)
03-08 20:37:12.421: E/AndroidRuntime(9969):     at com.example.theapp.DisplayTasks.onLoadFinished(DisplayTasks.java:1)
03-08 20:37:12.421: E/AndroidRuntime(9969):     at android.app.LoaderManagerImpl$LoaderInfo.callOnLoadFinished(LoaderManager.java:483)
03-08 20:37:12.421: E/AndroidRuntime(9969):     at android.app.LoaderManagerImpl$LoaderInfo.onLoadComplete(LoaderManager.java:451)
03-08 20:37:12.421: E/AndroidRuntime(9969):     at android.content.Loader.deliverResult(Loader.java:143)
03-08 20:37:12.421: E/AndroidRuntime(9969):     at com.commonsware.cwac.loaderex.AbstractCursorLoader.deliverResult(AbstractCursorLoader.java:71)
03-08 20:37:12.421: E/AndroidRuntime(9969):     at com.commonsware.cwac.loaderex.AbstractCursorLoader.deliverResult(AbstractCursorLoader.java:1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:34:26.720

```
03-07 19:38:12.311: E/AndroidRuntime(32626): Caused by: java.lang.NullPointerException
03-07 19:38:12.311: E/AndroidRuntime(32626):    at com.commonsware.cwac.loaderex.SQLiteCursorLoader.buildCursor(SQLiteCursorLoader.java:54) 
```

假设您正在使用最新的代码，该行是以下`return`语句：

```
 @Override
  protected Cursor buildCursor() {
    return(db.getReadableDatabase().rawQuery(rawQuery, args));
  } 
```

这意味着要么`db`是`null`（因为你将 a 传递`null` `SQLiteOpenHelper`给了`SQLiteCursorLoader`构造函数）要么因为`db.getReadableDatabase()`是`null`（这不应该发生）。

而且，由于我看不到您在上面的代码中创建`SQLiteOpenHelper`对象的位置，这很可能是您遇到困难的根源。

请记住，在使用开源库时，它们是*开源*的，这意味着您可以阅读与它们相关的代码，以帮助您追踪此类问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:45:15.777

问题最初在于正确初始化数据库。它应该这样做：

TaskEntry 类（在 TaskEntry.java 中）

```
public class TaskEntry {

public static final String TAG = "TaskEntry";
private DbHelper dbHelper;

public TaskEntry(Context context){
    dbHelper = new DbHelper(context);
}
public DbHelper DbHelpermethod() {
    return this.dbHelper;
}
...} 
```

此外，LoaderManager 没有正确实现..

在 onCreateLoader 之后（这很好）.. 一个游标被初始化，它不会被传递到 onLoadFinished 和 onLoaderReset 调用中。他们在此处接收旧适配器，该适配器使用“null”作为光标值进行初始化。参考：

```
adapter = new SimpleCursorAdapter(this, R.layout.list_item, null, fromColumns, toViews, 0); 
```

这可以通过替换来解决：

```
adapter.changeCursor(cursor); 
```

在 onLoadFinished 和

```
adapter.changeCursor(null); 
```

在 DisplayTasks.java 活动中的 onLoaderReset 通过：

```
((SimpleCursorAdapter)this.getListAdapter()).changeCursor(cursor); 
```

和..

```
((SimpleCursorAdapter)this.getListAdapter()).changeCursor(null); 
```

分别..

# c - 如何处理 Win32 应用程序终止

> ID：15275902
> 
> 赞同：2
> 
> 时间：2013-03-07T16:03:28.340
> 
> 标签：c, winapi, signals

我有一个没有用 C 语言编写的窗口的 Win32 应用程序。我的问题是：有什么方法可以处理我的应用程序的终止。前任。从任务管理器或通过控制台关闭它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T16:53:52.320

问题尚不清楚，但如果这是一个控制台模式应用程序，那么您可以调用[SetConsoleCtrlHandler](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686016%28v=vs.85%29.aspx)来安装 Windows 将在终止您的应用程序之前调用的回调。请注意，此回调在单独的线程上运行，您必须快速完成回调函数。

如果它是一个不创建窗口的本机 Windows 程序，那么您确实需要一个窗口来获取这样的通知。这不是问题，它不必是可见的。只是不要调用 ShowWindow()。

请注意，前面提到的 atexit() 不起作用，这些是您所说的粗鲁的中止，不会让程序通过其正常的关闭顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T16:14:15.153

您可能想看看该`atexit()`功能（[http://msdn.microsoft.com/en-us/library/tze57ck3%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/tze57ck3%28v=vs.100%29.aspx)）。

使用此功能，您可以安装程序终止时调用的处理程序。

# excel - 如何从大型机数据集中提取（导入）数据到 Excel 表

> ID：15275911
> 
> 赞同：0
> 
> 时间：2013-03-07T16:04:13.300
> 
> 标签：excel, mainframe, zos

我想构建一个计算批处理流的关键批处理的小应用程序。作为输入，我需要使用大型机数据集。如果可能的话，是动态的，也就是我可以选择当时适用的字段。

我已经在互联网上搜索过，但没有找到适合我想做的事情。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-26T04:32:03.690

> 我在大型机库中有一个数据集，我想将该文件 ftp 到 Excel。

在大型机上将文件转换为 CSV（例如，通过 REXX exec、z/OS UNIX shell 脚本或[Lua4z](http://lua4z.com/)程序），然后通过 FTP 将该 CSV 文件插入 Excel。

*您无需将 CSV 文件传输到 PC 的文件系统，然后作为单独的步骤在 Excel 中打开它。*

相反，您将 CSV 的 FTP（或 HTTP）URL 定义为 Excel 中的数据源。此技术的一个优点是您可以从该 URL 刷新数据，而无需在 Excel 中重新应用格式。

网上有各种各样[的教程](http://www.kimgentes.com/worshiptech-web-tools-page/2010/8/19/web-connecting-csv-files-as-external-data-to-excel-spreadshe.html)可以做到这一点。

简单来说：

1.  创建一个新的空白工作簿（我使用的是 Excel 2010）。
2.  选择空工作表中的第一个单元格（此步骤是不必要的 - 单元格已被选中 - 如果您刚刚创建了工作簿）。
3.  在**数据选项卡**上，单击**从文本**
4.  在“**导入文本文件”对话框的“****文件名**”文本框中，输入 CSV 文件的 FTP URL。例如：

     **[ftp://zos1//u/me/data.csv](ftp://zos1//u/me/data.csv)

    （这假设您的大型机配置为允许使用此路径的 FTP。）

    主机名 (zos1) 后面的两个连续斜杠 (/) 字符指示路径引用 z/OS UNIX 文件 (/u/me/data.csv)。

    CSV 文件*必须*位于 z/OS UNIX 路径中。FTP 客户端不接受诸如 'me.csv(data)' 之类的 MVS 样式 (dsname) 路径（即使是 URL 编码；也就是说，单引号转义为 %27）；相比之下，cURL 接受这样的路径就好了。

    大型机上的 CSV 文件必须是 ASCII 编码，而不是 EBCDIC。（在这里，我使用的术语 ASCII 不准确：您想要的精确字符编码取决于您 PC 的设置。您可能需要 Windows-1252。）这是因为 FTP 客户端将默认传输类型设置为二进制。** 
***   输入您的用户名和密码（您的 z/OS TSO 用户 ID 和密码）。*   等待数据加载。*   格式化单元格。例如，设置包含日期/时间值的任何列的格式。*   在“**数据**”选项卡上，单击“**连接**”，选择连接（在您为文件名指定 URL 时 Excel 创建的连接），并清除复选框“**刷新时提示文件名”**。**

 **要刷新数据，将当前数据替换为新 FTP 请求的结果：在**数据**选项卡上，单击**全部刷新**。数据被替换；单元格格式保持不变。

## 将 EBCDIC 编码的 CSV 文件转换为 ASCII

（严格来说，我的意思是 ISO-8859，而不是 ASCII。）

假设您有生成以 EBCDIC 编码的 CSV 文件的 JCL。您希望通过 FTP 将该 CSV 文件作为 ASCII 编码的 z/OS UNIX (zFS) 文件提供给 Excel。

将输出 CSV 文件的现有 DD 语句替换为以下 DD 语句：

```
//OUTCSV      DD PATH='/u/me/data-ebcdic.csv',       
//            PATHOPTS=(OWRONLY,OCREAT,OTRUNC),
//            PATHDISP=(KEEP,DELETE),          
//            PATHMODE=(SIRUSR,SIWUSR,SIRGRP), 
//            FILEDATA=TEXT 
```

将 ddname 替换为`OUTCSV`您的 ddname，将 zFS 文件路径`/u/me/data-ebcdic.csv`替换为您要使用的路径。

由于该`FILEDATA=TEXT`参数，生成的 CSV 文件将在每行末尾有一个 X'15' 字节。

将以下步骤附加到您的 JCL：

```
//ICONV   EXEC PGM=IKJEFT01
//SYSTSIN DD *
BPXBATCH sh iconv -f IBM-037 -t iso8859-1 +
 /u/me/data-ebcdic.csv +
 > /u/me/data-ascii.csv
/*
//SYSPRINT DD  SYSOUT=*
//SYSTSPRT DD SYSOUT=* 
```

如果您想知道为什么我`iconv`通过 调用 shell 命令`BPXBATCH`，请执行以下操作：

```
//ICONV    EXEC PGM=EDCICONV
//         PARM=('FROMCODE(IBM-037),TOCODE(iso8859-1)') 
```

不太奏效：它保留了 X'15' 字节，而`iconv`作为 shell 命令运行时正确地将它们转换为 X'0A'。（z/OS 2.2。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T12:47:59.750

您在评论中有一些很好的信息，共识似乎是转换为 CSV（或 TSV 以避免在您的数据中嵌入逗号）是最简单的途径。[这是从另一个答案](https://stackoverflow.com/questions/15132071/how-to-pull-data-from-mainframe-to-hadoop/15136121#15136121)复制的更多信息...

> 我强烈建议您将文件转换为文本格式，然后再将它们传输到具有不同代码页的另一个框中。尝试处理混合文本（必须翻译其代码页）和二进制（不得翻译其代码页但可能必须从大端转换为小端）比预先进行转换更难。
> 
> 转换很可能通过大型机上的 SORT 实用程序完成。大型机 SORT 实用程序往往具有广泛的数据操作功能。您可以使用其他机制（其他实用程序、以您选择的语言编写的自定义代码、购买的软件包），但这是我们在这些情况下倾向于做的事情。
> 
> 将平面文件转换为所有数据都是文本后，您可以通过 FTP 或 SFTP 或 FTPS 传输它们。

...感谢您回来并添加更多信息。希望这里的人提供了足够的信息来帮助您解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-13T13:56:57.363

XML 将是另一种可能的面向文本的解决方案。创建会花费更多精力，但您可以在 Excel 中设计电子表格并保存为 XML 文档，然后编写程序以使用大型机数据集中的数据生成 xml 文本。虽然这比简单的 CSV 或 TSV 文件更难实现，但它具有实现 CSV 文件无法实现的电子表格公式和属性的优势。另一个优点是，您可以将 XML 文档附加到 SMTP 电子邮件注释中，然后以“电子表格格式”将文档交付给您的客户。**

# android - 来自 sd 卡的图像未在 webview 中加载

> ID：15275917
> 
> 赞同：1
> 
> 时间：2013-03-07T16:04:31.097
> 
> 标签：android, android-intent, android-webview

我想从一个有布局的地方发送一些`HTML`代码，我想获取 代码并在. 我的代码是：`MainActivity``WebViewActivity``WebView``HTML``webview``HTML`

```
<html><img alt=\"myImagenotshowing\" src=\"file://mnt/sdcard/HappyEnding.jpg\"></html> 
```

我`WebViewActivity`的是：

```
public class WebViewActivity extends Activity {

@SuppressWarnings("unused")
private static String TAG = "WebViewActivity";
private WebView webView;
public static final String MY_EXTRA = "fulltext";   

Bundle extras;
String value;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    value = getIntent().getStringExtra(MY_EXTRA);// Here it gets HTML code that I want to display inwebview
    Log.w(MY_EXTRA, "Data recieved is >> " + value);
    getWindow().requestFeature(Window.FEATURE_PROGRESS);
    setContentView(R.layout.webview);       

    // Makes Progress bar Visible
    getWindow().setFeatureInt(Window.FEATURE_PROGRESS,
            Window.PROGRESS_VISIBILITY_ON);

    webView = (WebView) findViewById(R.id.webView1);

    webView.setWebViewClient(new WebViewClient() {

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {             

            view.loadData(value, "text/html", null);
            return true;
        }
    });

    new GetData().execute(null, null, null);        

}

private class GetData extends AsyncTask<Void, Void, Void> {

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        webView.getSettings().setDomStorageEnabled(true);
    }

    @SuppressLint("SetJavaScriptEnabled")
    @Override
    protected Void doInBackground(Void... params) {

        webView.getSettings().setJavaScriptEnabled(true);
        webView.getSettings().setJavaScriptCanOpenWindowsAutomatically(
                false);
        webView.getSettings().setSupportMultipleWindows(false);
        webView.getSettings().setSupportZoom(false);
        webView.getSettings().setRenderPriority(
                WebSettings.RenderPriority.HIGH);
        webView.getSettings().setSavePassword(false);
        webView.setVerticalScrollBarEnabled(false);
        webView.setHorizontalScrollBarEnabled(false);
        webView.getSettings().setAppCacheEnabled(true);
        webView.getSettings().setCacheMode(WebSettings.LOAD_NO_CACHE);
        webView.getSettings().setAppCacheMaxSize(200);
        webView.getSettings().setDatabaseEnabled(true);
        webView.clearCache(true);
        // webView.clearHistory();
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        super.onPostExecute(result);
        webView.loadData(value, "text/html", null);
    }

}} 
```

上面的代码不显示来自`/mnt/sdcard/HappyEnding.jpg`. 怎么解决。。

`CODE`这是我发送的代码`MainActivity`：

```
String value2 = "<html><img alt=\"myImagenotshowing\" src=\"file://mnt/sdcard/HappyEnding.jpg\"></html>";
intent = new Intent(MainActivity.this,  WebViewActivity.class);
            intent.putExtra(MY_EXTRA, value2);
            startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-30T15:14:03.840

在 webview 中显示图像 从 sd 卡读取 src

```
 <img style="width:100%"  src="file:///mnt/sdcard/ax.png"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T07:16:17.397

用这个：

```
<html><img alt=\"myImagenotshowing\" src=\"file://mnt/sdcard/HappyEnding.jpg\"></html> 
```

或者

```
String name = "/K/test.jpg";
webView = (WebView) findViewById(R.id.webView1);
String imagePath = "file://"+ Environment.getExternalStorageDirectory() + "/" + name;
String html = "<html><head></head><body><center><img src=\"" + imagePath + "\"></center></body></html>";
webv.loadDataWithBaseURL("", html, "text/html", "utf-8", ""); 
```

添加此权限：

```
 <uses-permission android:name="android.permission.INTERNET" /> 
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

已编辑： **这是您答案的完整代码：** 现在可以找到它。

```
package com.example.testbrowser;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.Window;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class MainActivity extends Activity {
    private static String TAG = "WebViewActivity";
    private WebView webView;
    private String value;
    public static final String MY_EXTRA = "fulltext";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setTheme(R.style.Theme_Sherlock_Light);

        // value = getIntent().getStringExtra(MY_EXTRA);
        value = "<html><img alt='myImagenotshowing' src='file://mnt/sdcard/abc.jpg'></html>";
        Log.e(MY_EXTRA, "Data recieved is >> " + value);
        getWindow().requestFeature(Window.FEATURE_PROGRESS);
        setContentView(R.layout.activity_main);

        // Makes Progress bar Visible
        getWindow().setFeatureInt(Window.FEATURE_PROGRESS,
                Window.PROGRESS_VISIBILITY_ON);

        webView = (WebView) findViewById(R.id.webView1);
        // webView.loadDataWithBaseURL("", value, "text/html", "utf-8", "");
        webView.setWebViewClient(new WebViewClient() {

            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {             

                view.loadDataWithBaseURL("", value, "text/html", "utf-8", "");
                return true;
            }
        });

        new GetData().execute(null, null, null);
    }

    private class GetData extends AsyncTask<Void, Void, Void> {

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            webView.getSettings().setDomStorageEnabled(true);
        }

        @SuppressLint("SetJavaScriptEnabled")
        @Override
        protected Void doInBackground(Void... params) {

            webView.getSettings().setJavaScriptEnabled(true);
            webView.getSettings().setJavaScriptCanOpenWindowsAutomatically(
                    false);
            webView.getSettings().setSupportMultipleWindows(false);
            webView.getSettings().setSupportZoom(false);
            webView.getSettings().setRenderPriority(
                    WebSettings.RenderPriority.HIGH);
            webView.getSettings().setSavePassword(false);
            webView.setVerticalScrollBarEnabled(false);
            webView.setHorizontalScrollBarEnabled(false);
            webView.getSettings().setAppCacheEnabled(true);
            webView.getSettings().setCacheMode(WebSettings.LOAD_NO_CACHE);
            webView.getSettings().setAppCacheMaxSize(200);
            webView.getSettings().setDatabaseEnabled(true);
            webView.clearCache(true);
            // webView.clearHistory();
            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            super.onPostExecute(result);
            webView.loadDataWithBaseURL("", value, "text/html", "utf-8", "");
        }

    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-26T11:10:02.473

经过搜索，我发现解决方案比浪费 1 小时搜索更容易。使用 wbView.loadDataWithBaseURL() 而不是 wbView.loadData()

```
webv.loadDataWithBaseURL("", html, "text/html", "utf-8", ""); 
```

# verilog - 块未连接，将被修剪 Verilog

> ID：15275918
> 
> 赞同：1
> 
> 时间：2013-03-07T16:04:37.520
> 
> 标签：verilog, xilinx

在以下代码`BCDtoSevenDecode`中，采用 4 位输入并将其解码以用于七段显示。解码结果存储在`resultx`变量中。然后将所有 resultx 变量传递给 4x1 Mux。我正在使用 xilinx 来编译这个 verilog 代码。代码编译并带有警告：

`WARNING:Xst:647 - Input <clk> is never used. This port will be preserved and left unconnected if it belongs to a top-level block or it belongs to a sub-block and the hierarchy of this sub-block is preserved.`

`WARNING:Xst:647 - Input <reset> is never used. This port will be preserved and left unconnected if it belongs to a top-level block or it belongs to a sub-block and the hierarchy of this sub-block is preserved.`

`WARNING:Xst:1306 - Output <select> is never assigned.`

我无法找出问题所在，所以我在这里咨询专家。

这是代码：

```
 module Counter(input clk, input reset, output[3:0]SsdEnable, output [6:0]DecodedOut, output reg [3:0]temp1, output reg [3:0]temp2 , output reg [3:0]temp3, output reg [3:0]temp4);

wire [6:0] Result1,Result2,Result3,Result4;
reg [3:0] count1,count2,count3,count4;

wire [25:0]loop;
wire [11:0]counter;

reg [1:0]Sel;

SevenDecoder u1(count1,Result1);
SevenDecoder u2(count2,Result2);
 SevenDecoder u3(count3,Result3);
SevenDecoder u4(count4,Result4);

Mux u5(Result1,Result2,Result3,Result4,Sel,DecodedOut );
Decoder_2x4 u6(Sel,SsdEnable);

always @(posedge clk or negedge reset)
begin
 if(!reset)
  begin
count1<=0;
count2<=0;
count3<=0;
count4<=0;

//counter=0;
 end
 else
  begin
if(loop==49999999)
begin
    count1<=count1+1;
    if(count1==10)
    begin
        count1<=0;
        count2<=count2+1;
    end

    if(count2==10)
    begin
        count2<=0;
        count3<=count3+1;
    end

    if(count3==10)
    begin
        count3<=0;
        count4<=count4+1;
    end

    if(count4==10)
    begin
        count1<=0;
        count2<=0;
        count3<=0;
        count4<=0;
    end

    temp1<=count1;
    temp2<=count2;
    temp3<=count3;
    temp4<=count4;
end
  loop=loop+1;
 end

end

always @(posedge clk or negedge reset)
begin

if(!reset)
Sel=0;
else
    begin
    if(counter==1000)
    begin
    Sel=0;
    end

end
 counter=counter+1;
end

endmodule

module SevenDecoder(input [3:0]i , output[6:0] out);

assign out[0]= (i == 0 || i == 2 || i == 3 || i == 5 || i == 6 || i == 7 || i == 8 || i == 9) ? 0 : 1;
assign out[1] = (i == 0 || i == 1 || i == 2 || i == 3 || i == 4 || i == 7 || i == 8 || i == 9) ? 0 : 1;
assign out[2] = (i == 0 || i == 1 || i == 3 || i == 4 || i == 5 || i == 6 || i == 7 || i == 8 || i == 9) ? 0 : 1;
assign out[3]= (i == 0 || i == 2 || i == 3 || i == 5 || i == 6 || i == 8 || i == 9) ? 0 : 1;
assign out[4]= (i == 0 || i == 2 || i == 6 || i == 8) ? 0 : 1;
assign out[5]= (i == 0 || i == 4 || i == 5 || i == 6 || i == 8 || i == 9) ? 0 : 1;
assign out[6]= (i == 2 || i == 3 || i == 4 || i == 5 || i == 6 || i == 8 || i == 9) ? 0 : 1;

endmodule

module Mux(input [6:0]in1,input [6:0]in2,input [6:0]in3,input [6:0]in4, input [1:0]sel, output [6:0]out);

assign out=(sel==0)?in1:
            (sel==1)?in2:
            (sel==2)?in3:
            (sel==3)?in4:0;
endmodule

module Decoder_2x4(input [1:0]sel, output [3:0]selSSD);

 assign selSSD=(sel==0)? 4'b1110 :
                (sel==1)? 4'b1101 :
                (sel==2)? 4'b1011 :
                (sel==3)? 4'b0111 :0;

endmodule 
```

是什么导致了这个问题？

编辑：

我已经在这里发布了整个代码。我一直在尝试调试它，但我未能在此代码中找到错误。

此代码不提供任何输出。它应该显示变化的值，`cnt1,cnt2,cnt3,cnt4`以证明值正在增加，但事实并非如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T17:10:22.060

根据相关代码的当前修订更新答案，一些进一步的信息可能不再适用于问题的最新版本。

问题包含以下代码块：

```
always @(posedge clk or negedge reset)
begin

if(!reset)
Sel=0;
else
    begin
    if(counter==1000)
    begin
    Sel=0;
    end

end
 counter=counter+1;
end 
```

我会将其更新为以下内容：
`counter`未重置，因此将是 x，x+1 是直到 x。

```
always @(posedge clk or negedge reset) begin
  if(!reset) begin
    Sel     <= 0;
    counter <= 0;
  end
  else begin
    counter <= counter+1;
    if(counter==1000) begin
      Sel <= 0;
    end
  end
end
endmodule 
```

我在部分代码中注意到了这一点，你不会得到你想要的行为：

```
 if(iterator==20) begin
    if(out[3:0]==9) begin
      out[3:0] <= 0;
      out[7:4] <= out[7:4]+1;
    end
    ...
    out[3:0]<=out[3:0]+1; 
```

非阻塞分配意味着它不会阻塞模拟器的执行，直到它复制值的时间步结束。所以我看不到它是如何`out[3:0]<=0`执行的，因为它被无条件地覆盖`out[3:0]<=out[3:0]+1;`

顶层模块是 CounterTOP，具有输出 [7:0] 输出，这是由 MUX 的 [6:0] 输出“out”驱动的。因此 out 的 MSB（最高有效位）将是 z，即未驱动。

**以下是一些推荐的改进：**

我会避免混合变量的情况，你 Sel 和称为 Mux 的模块。除了大写的（本地）参数外，我更喜欢将所有内容都保留为小写。Under score delimited 通常用于 CamelCase。即，我会将模块 SevenDecoder 编写为 Seven_decoder。我认为这有助于提高可读性，并且某些模拟器不区分大小写，因此在使用混合大小写时，可能会根据大小写区分变量，从而开始相互干扰。混合变量的大小写使拼写错误的可能性更大。

使用正确对齐的代码更容易看到错误，编辑也可以更快，因为您可以开始使用编辑器的列模式。

如果您使用命名端口，审查代码会容易得多，而且很难发现连接错误。

```
Mux az(
  .sel(        ), 
  .in1( result1),
  .in2( result2),
  .in3( result3),
  .in4( result4),
  .clk( clk    ),
  .rst( reset  ),
  .out( out    )
); 
```

尽管与您看到的当前错误无关，但我建议您以`always @(posedge clk)`块的形式修复您的作业。

您当前正在使用`=`可能导致仿真和硬件之间存在差异的阻塞分配。这变得非常难以调试。在时钟触发块中，您应该使用非阻塞`<=`分配。

嵌套的 if 语句也可以替换为 case 语句：

```
always @(posedge clk or negedge reset) begin
  if(~reset) begin
    iterator <=0;
    i        <=0;
  end 
  else begin
    case(iterator)
    10, 20, 30 : begin
      i <= i+1;   
      iterator <= iterator + 1;
    end
    40 : begin
      i        <= i+1;
      iterator <= 0;
    end
    default : iterator <= iterator+1;
  endcase
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T16:26:09.867

看起来您还没有将任何`select`线路连接到您的多路复用器。

# string - 为什么这个测试用例的 lua string.find 返回 true？

> ID：15275929
> 
> 赞同：7
> 
> 时间：2013-03-07T16:05:06.483
> 
> 标签：string, lua

我只是lua的新手......所以如果我错过了一些基本的东西，我很抱歉。
我正在运行一个简单的测试，看看我是否可以在字符串中找到某些值。

这是代码：

```
print(string.find('fd@testca','.') ) 
```

而不是失败，这是我所期待的，我回来了：

```
mymachinename:/usr/share/std/test# lua test.lua
1       1 
```

你能告诉我哪里出错了吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T16:07:00.853

这是因为在 Lua 中，该`find`方法查找*模式*，并[`.`表示任何字符](http://lua-users.org/wiki/PatternsTutorial)。

您可以使用字符集来解决该问题：

```
print(string.find('fd@testca','[.]') ) 
```

这是[一个小演示的链接](http://ideone.com/CgaFph)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T16:14:26.360

Lua 使用模式（[在此处](http://www.lua.org/pil/20.2.html)描述）进行搜索。您可以使用可选的第四个参数关闭模式：

```
print(string.find('fd@testca','.', 1, true) ) 
```

可选的第三个参数 (1) 是起始位置。

# c# - Task.WhenAny 会取消注册未完成任务的延续吗？

> ID：15275932
> 
> 赞同：4
> 
> 时间：2013-03-07T16:05:09.210
> 
> 标签：c#, asynchronous, mono, task-parallel-library, async-await

考虑一个具有某种生命周期的类。在此生命周期内，一个事件可能会发生任意次数，并且该事件通过任务的完成发出信号（在事件之后更新）。该对象也可能被关闭，结束其生命周期。关闭也通过任务完成发出信号。它也可能永远存在。

现在考虑某种对对象生命周期建模的异步工作流：

```
//will be completed on Shutdown. Is the same object for the entire lifetime.
Task shutdownTask = ... 

while(true)
{
    //will be completed when the event occurs. Is different on each loop.
    Task eventTask = ... 

    if (await Task.WhenAny(shutdownTask, eventTask) == eventTask)
    {
        //Event has occured
        ...
    }
    else
    {
        //Object has been shutdown. React and leave.
        ...
        return;
    }
} 
```

eventTask 的一个示例可以是从异步队列中异步出列对象。

直觉上，我发现以这种方式对对象的生命周期进行建模并没有错。但是，该对象可能永远存在，并且在 shutdownTask 上注册了无限数量的延续。还是他们？延续会被取消注册还是应用程序最终会爆炸？是否有更简洁的模式来模拟这样的控制流？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T16:13:19.927

是的，当任何一个任务触发时，所有给定任务的延续都将被删除。

# jquery - jQuery Mobile - 加载消息

> ID：15275933
> 
> 赞同：2
> 
> 时间：2013-03-07T16:05:16.450
> 
> 标签：jquery, jquery-mobile

我第一次使用 jQuery Mobile 来制作它，这样我就可以滑回上一页，我已经设法开始工作了。

但是，我注意到屏幕底部有一条丑陋的“正在加载”消息。谷歌搜索后，我看到了一个名为的函数`$.mobile.hidePageLoadingMsg();`，我在其中添加了该函数，`$(document).ready(function()`但加载消息仍然存在。

我怎样才能摆脱这个消息？

干杯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-20T14:48:01.537

我通过使用 jquery 选择器并隐藏元素解决了这个问题，如下所示：

```
$(document).ready( function() {
    $(".ui-loader").hide();
}); 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T16:19:01.587

的正确用法`$.mobile.hidePageLoadingMsg();`是通过触发手动显示加载消息`$.mobile.showPageLoadingMsg();`。

资料来源：[JQM](http://jquerymobile.com/demos/1.2.0/docs/api/methods.html)

在您的情况下，如果您想禁用此功能，请在加载 JQM**之前**`<head>`在标签中插入以下代码**`<script src="Jquery.mobile.1.2.0.js">`**

 **编码：

```
<head>
 <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
 <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
 <!-- disable loading msg -->
 <script>
$(document).bind("mobileinit", function(){
 $.mobile.loadingMessage = false;
});
 </script>
<!-- / -->
 <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
</head> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-05T13:41:26.303

# 加载

如果以上是您正在谈论的问题，请确保您已加载样式表

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.min.css">

```**

# jquery - 文本区域位于 ascx 用户控件中，使用 jQuery 获取 ite 的值

> ID：15275940
> 
> 赞同：4
> 
> 时间：2013-03-07T16:05:23.710
> 
> 标签：jquery, asp.net, textbox, ascx

我有一个asp.net 主页，其中加载了一个ascx 控件。

在主页上，我有一个 textarea 元素声明为

```
<asp:TextBox ID="description" runat="server" Rows="8" Columns="35" TextMode="MultiLine" class="smth" title="A Title"></asp:TextBox> 
```

呈现为

```
<textarea name="description" rows="8" cols="35" id="description" class="smth" title="A Title"></textarea> 
```

在 ascx 控件上，我声明了一个类似的文本框

```
<textarea id="descriptionMap" rows="5" cols="25" class="smth" title="A Title"></textarea> 
```

呈现相同的效果。

在主页上，我可以访问第一个文本框（包含在主页上）的内容

```
$('#' + <%=description.ClientID %>).val() 
```

但我无法访问 ascx 控件中包含的文本框的内容

```
$('#descriptionMap').val() 
```

但是，如果我将 ascx 文件中的文本框声明为

```
<textarea id="descriptionMap">some static content</textbox> 
```

我可以访问它，但如果我自己在文本框中写一些东西，什么也不会发生。这让我发疯了。有什么建议么？我使用的是 IE 8，这可能是问题吗？

编辑。一个简化的例子。这是 ascx 控件的呈现方式：

```
<textarea id="descriptionMap" rows="5" cols="25" class="smth" title="A Title"></textarea>
<input type="submit" id="sendMap" value="Send" onclick="sendTest();" />
<script type="text/javascript">
function sendTest() {
    alert(document.getElementById('descriptionMap').value);
}</script> 
```

警报对话框显示为空。问题一定与以某种方式使用 ascx 控件有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:46:18.723

有点不清楚您是使用服务器控件还是直接在 ascx 页面中`<asp:TextBox runat="server"...`创建 html 元素。`<textarea id="descriptionMap"...`

如果您使用第一个选项（在 ascx 中创建服务器端控件），则元素的最终 ID 将基于用户控件本身的 ID。

例如，如果您在主页中添加了用户控件

```
<uc:MyTag runat="server" Id="MyControl01" /> 
```

然后用户控件内的 textarea 的最终 ID 将是**`MyControl01_descriptionMap`**，您将需要使用它来访问它**`$('#MyControl01_descriptionMap')`**（如果您在 .NET framework 4 及更高版本中使用默认的 ClientIDMode）。

但是如果你直接在你的 ascx 文件中创建一个 html 元素，那么你需要确保你的 id 是 unquie 并且你可以使用相同的 id 来访问控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T17:02:47.560

利用

```
$('#' + '<%= description.ClientID %>').val() 
```

或者

```
$('#<%= description.ClientID %>').val() 
```

# ruby - Ruby 奇数逗号与变量序列一起使用

> ID：15275943
> 
> 赞同：3
> 
> 时间：2013-03-07T16:05:38.603
> 
> 标签：ruby, variables, sequence, comma

你好 StackOverflow 工作人员！

我们正在做一些 Ruby，出现了一个我们似乎很难弄清楚的例子：

```
a=5
b=4
a,b=a+b,a

=> [9,5]
=> a=9
=> b=5 
```

怎么会？那里发生了什么？为什么它起作用而“a，b，a”不起作用？为什么“b”变成5而“a”变成9？

如果我们只写

```
a,b=a+b

=> 9
=> a=9
=> b=nil 
```

我们猜测这是某种 Ruby 错误，将在 2.5 版中修复。或者可能有一些基本的法律已经实施，我们只是还没有看到。

你们会帮助我们吗？

示例代码是斯坦福 Ruby 课程的一个测验问题的一部分。他们告诉我们在遇到困难时去问问 StackOverflow 天才。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T16:11:42.333

对我来说，您似乎误解了并行赋值运算符的用法，而不是 Ruby 错误。

前面的例子和后面的例子有很大的不同。让我们把它们放在一起：

```
a,b=a+b,a
a,b=a+b 
```

现在添加一些空格

```
a,b =  a+b, a
a,b =  a+b 
```

第一个表达式是 的 LHS`a, b`和 RHS 的`a+b , a`并行赋值，后者是 的 LHS`a, b`和 RHS 的并行赋值`a+b`。请注意 RHS 的差异。

这两个等于：

(1)

```
a =  a+b
b =  a'   ** 
```

(2)

```
a =  a+b
b =  nil 
```

但是，请注意，这一切都是一次操作。因此，在 (1) 的情况下，它是 A' 而不是 A：使用 'a' 的 OLD VALUE，而不是刚刚分配的 'a+b' 的值 - 因为原始并行分配是一个操作，而不是两个操作就像我为了描述的目的在这里爆炸它一样。

这意味着：

```
a,b = a+b, a 
```

导致`s1=a+b`被计算，`s2=a`被计算，然后`a=s1; b=s2;`只是在“一次操作”中。

因为它是一个操作，并且当它分配给两个值时，所以会返回一个包含两个元素的数组——这与执行单一分配并返回单个值相反。

如果您要执行三重赋值：

```
a,b,c,d,e,f  = 0,1,2,3,4,5 
```

[0,1,2,3,4,5] 的数组将是结果，并且 a/b/c/d/e/f 将分别被分配 0/1/2/3/4/5 值。

有关更多信息，请参阅 Ruby 的并行赋值文档，也可能还有用于数组扩展和参数分组的 * 运算符

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T16:10:21.510

`=`运算符允许使用逗号“并行”分配多个值。

例如：

```
a,b=1,2 
```

将分配`a`给`1`和。`b``2`

同样地，

```
a,b=a+b,a 
```

和`a=5`这`b=4`是：

```
a,b=5+4,5 
```

这是：

```
a,b=9,5 
```

因此，`a`将被分配 9 和`b`5。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T16:12:00.803

替换值可能更有意义。

```
a = 5
b = 4
a, b = a + b, a
a, b = [5 + 4], 5
a, b = [9, 5]

a, b = [a + b]
a, b = [a + b], nil # implicit nil
a, b = [5 + 4], nil 
```

并行赋值相当于将右侧分配给数组，然后将变量按顺序分配给数组中具有该索引的项。

在您的第二个示例中存在隐式 nil 的原因是 ruby​​ 在不存在的数组索引上查找的方式。

```
array = []
array[0] # nil 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-07T16:12:33.957

这是因为在第一个示例中，您将 的值设置`b`为等于`a`

```
a = 5
b = 4
a,b=a+b,a 
```

所以`a=5+4` 和 `b=5`

# python - python展开列表打印

> ID：15275944
> 
> 赞同：3
> 
> 时间：2013-03-07T16:05:39.297
> 
> 标签：python, list, printing, format

如果我有清单

```
lst = ['A', 'B', 'C'] 
```

如何扩展它以便我可以打印类似的东西

```
print '%s %s %s' % (*lst) ? 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T16:07:51.697

这些天来，你会`format`改用：

```
"{} {} {}".format(*lst)  #python 2.7 and newer
"{0} {1} {2}".format(*lst) #python 2.6 and newer 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-07T16:06:46.230

如果要按照概述的方式使用字符串格式，则必须事先将列表转换为元组。

```
>>> l = ['A', 'B', 'C']
>>> print '%s %s %s' % tuple(l)
A B C 
```

但是，在这种情况下，我会推荐类似的东西

```
>>> print " ".join(l)
A B C 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T16:07:12.390

```
>>> print '%s %s %s' % tuple(lst)
A B C 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T16:07:59.740

从它的外观来看，你最好的选择是使用`str.join`：

```
lst = ['A', 'B', 'C']
print ' '.join(lst) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-07T16:10:26.950

你的问题有点不清楚。但如果我理解正确的话；您可以使用 append 将内容添加到列表中，并且可以使用简单的打印功能打印您的列表。例子

```
list = ["A", "B", "C"]
list.append("D") #ADDS "D" TO THE LIST
print list #Will print all strings in list 
```

抱歉，如果这没有帮助。我尽我所能。（：

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-12-15T04:16:07.770

mgilson 答案的缩写形式，用于代码高尔夫

```
>>> l = ['A', 'B', 'C']
>>> print(*l)
A B C 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-07T16:08:03.033

使用[`string.join(list)`](http://docs.python.org/2/library/string.html#string.join)方法：

```
print " ".join(lst) 
```

这样，如果列表具有不同数量的元素，代码就不会中断。

# java - 为什么Java源代码中有些ASCII字符不能以'\uXXXX'形式表示？

> ID：15275945
> 
> 赞同：57
> 
> 时间：2013-03-07T16:05:42.410
> 
> 标签：java

我今天（再次）偶然发现了这个：

```
class Test {
    char ok = '\n';
    char okAsWell = '\u000B';
    char error = '\u000A';
} 
```

它不编译：

> 第 4 行中的字符常量无效。

编译器似乎坚持让我写 '\n' 代替。我看不出这是为什么，但这*很*烦人。

*为什么在 Java 源代码中必须*以这种形式表示具有特殊符号（如`\t`, `\n`, `\r`）的字符是否有逻辑解释？

 ** * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-03-07T16:12:44.280

Unicode 字符被它们的值替换，所以你的行被编译器替换为：

```
char error = '
'; 
```

这不是有效的 Java 语句。

这是由[语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.3)规定的：

> Java 编程语言的编译器（“Java 编译器”）首先识别其输入中的 Unicode 转义，将 ASCII 字符 \u 后跟四个十六进制数字转换为指示的十六进制值的 UTF-16 代码单元（第 3.1 节），并且传递所有其他字符不变。表示补充字符需要两个连续的 Unicode 转义符。此翻译步骤产生一系列 Unicode 输入字符。

这可能会导致令人惊讶的事情，例如，这是一个有效的 Java 程序（它包含隐藏的 unicode 字符）——[由 Peter Lawrey 提供](http://vanillajava.blogspot.co.uk/2012/09/hidden-code.html)：

```
public static void main(String[] args) {
    for (char c⁯‮h = 0; c⁯‮h < Character.MAX_VALUE; c⁯‮h++) {
        if (Character.isJavaIdentifierPart(c⁯‮h) && !Character.isJavaIdentifierStart(c⁯‮h)) {
            System.out.printf("%04x <%s>%n", (int) c⁯‮h, "" + c⁯‮h);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-03-07T16:13:33.423

**`\u000a`**在 Java 编译器对源代码执行任何其他操作之前，**Unicode 转义序列****会被它们所代表的实际字符替换。**因此，您的程序最终会在

```
char ch = '
'; 
```

因此`\u000a`，您的源代码中的 内部将替换为换行符。请注意，这发生在编译器实际读取和解释您的源代码之前。

参考[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.4)：

> **行终止符**（第 3.4 节）出现在开头 ' 之后和关闭 ' 之前是编译时错误。

众所周知，`\n`是一个[行终止符](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.4)，引用：

```
 LineTerminator:
    the ASCII LF character, also known as "newline"
    the ASCII CR character, also known as "return"
    the ASCII CR character followed by the ASCII LF character 
```

其他可能导致问题的符号是`\`，例如。`'``"`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-07T16:14:12.497

我认为原因是`\uXXXX`在解析代码时会扩展序列，请参阅[JLS §3.2。词汇翻译](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.2)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-07T16:23:14.623

它在 3.3 中描述。Unicode 转义[http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html)。Javac 首先在 .java 中找到 \uxxxx 序列并用真实字符替换它们然后编译。的情况下

```
char error = '\u000A'; 
```

\u000A 将替换为`newline`字符代码（10），实际文本将是

```
char error = '
'; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-07T16:13:40.330

因为编译器将它们视为未转义的文本。

这是有效的代码：

```
 class \u00C9 {} 
```*

# java - 在数组中查找重复项并将其添加到计数中

> ID：15275950
> 
> 赞同：0
> 
> 时间：2013-03-07T16:06:00.037
> 
> 标签：java, arrays, duplicates

我下面的代码从一个 txt 文件中获取所有单词，并在它旁边打印出数字 1（计数）。我的程序的目的是像它所做的那样接收所有单词，但如果它是重复的，我不希望它打印我希望它找到匹配的单词并将其添加到计数中。

```
Scanner in = new Scanner(new File(filename));
int i = 0;
int n = 1;
String w = "";
String txt = "";

while ((in.hasNext())) {
    w = in.next() ;
    wrd[i] = w;
    num[i] = n;
    i++;
    txt = wrd[i];

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T16:10:51.193

您想使用 Map ：

```
Map<String, Integer> map = new HashMap<String, Integer>();
...

while (in.hasNext()) {
    String w = in.next();

    if (map.containsKey(w)) {  // Already in the map
        map.put(w, map.get(w) + 1);  // Increment the counter
    } else {  // First time w is found, initialize the counter to 1
        map.put(w, 1);
    }
} 
```

基本上，该映射将一个键（这里是您要计算的单词）与一个值（当前单词的出现次数）相关联。`containsKey`检查某个值是否与给定键关联，`get`检索该值（如果有）并`put`设置一个新值。

# sql-server-2008 - 使用 GETDATE 触发问题

> ID：15275951
> 
> 赞同：2
> 
> 时间：2013-03-07T16:06:10.310
> 
> 标签：sql-server-2008, triggers

我完全被这个难住了。如果记录已插入表中，我有一个触发器应该发送电子邮件，但前提是在过去 20 分钟左右没有插入记录。我已将其范围缩小到它根本不喜欢插入查询中的 GETDATE() 的事实。

如果我更新我的存储过程以插入像“2013-03-07 09:53:54.12”这样的静态日期时间字符串，它将执行触发器并构造电子邮件正文以便可以发送。如果它在存储过程中使用 GETDATE() 或 SYSDATETIME()，则在运行 select 命令后 body 变量将为空。

我错过了什么吗？我无法找到之前发布的任何内容，但我很抱歉，场景已经在这里发布并解决了。

我的 MVC 项目中的插入命令如下所示：

```
SqlConnection conn = new SqlConnection();
        conn.ConnectionString = System.Configuration.ConfigurationManager.ConnectionStrings["RegistrationEntriesConnectionString"].ToString();

        SqlCommand command = new SqlCommand("RegisterCustomerDownload", conn);
        command.CommandType = System.Data.CommandType.StoredProcedure;

        command.Parameters.AddWithValue("@Email", userEmail);
        command.Parameters.AddWithValue("FileDownloaded", "Product Name Here");

        try
        {
            //Open connection and try to execute the command
            conn.Open();
            command.ExecuteNonQuery();

            conn.Close();
        }
        catch (Exception ex)
        {
            //do something
        } 
```

我的存储过程如下所示：

```
SET NOCOUNT ON;

INSERT INTO TrialDownloads(Email, FileDownloaded, DownloadTime) 
VALUES(@Email, @FileDownloaded, GETDATE()); 
```

从那里，如果最后一个匹配记录的插入时间超过 20 分钟，我有一个触发器（用于插入），然后发送电子邮件：

```
SET NOCOUNT ON;

DECLARE @body NVARCHAR(MAX) = N'';

--For debugging purposes
INSERT INTO [DebugLog] (message) VALUES ('Entered SendTrialDownloadEmail');

SELECT @body += 'A trial has been downloaded:' +
        CHAR(13) + CHAR(10)+ 'Email Address: ' + Email +
        CHAR(13) + CHAR(10)+ 'Product Downloaded ' + FileDownloaded +
        CHAR(13) + CHAR(10)+ 'Date Downloaded: ' + CONVERT(NVARCHAR, DownloadTime)
    FROM [inserted] i 
        WHERE NOT EXISTS (SELECT * FROM [dbo].[TrialDownloads] o 
        WHERE 20 > DATEDIFF(minute, o.DownloadTime, GETDATE()) 
            AND i.Email = o.Email 
            AND i.FileDownloaded = o.FileDownloaded);

--For debugging purposes
INSERT INTO [DebugLog] (message) VALUES ('Before IF block');
INSERT INTO [DebugLog] (message) VALUES (@body);
DECLARE @insertCount NVARCHAR(MAX);
SELECT @insertCount = CONVERT(nvarchar, COUNT(*)) FROM inserted
INSERT INTO DebugLog (message) VALUES (@insertCount);

IF NOT @body = N''
    BEGIN
        EXEC msdb.dbo.sp_send_dbmail 
            @profile_name="NoReplyProfile",
            @recipients="email@domain.com",
            @subject="A Trial has been downloaded",
            @body=@body;
        INSERT INTO [DebugLog] (message) VALUES ('Mail sent');
        INSERT INTO [DebugLog] (message) VALUES (@body);
    END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:42:30.970

根据 Jason 注意到的情况，我想说最好的办法是在关键字段或`TrialRegistrations`表上过滤您的 NOT EXIST (...) 子句。如果你这样做，我认为你应该是直的。

...

```
WHERE NOT EXISTS (SELECT * FROM [dbo].[TrialDownloads] o 
        WHERE 20 > DATEDIFF(minute, o.DownloadTime, GETDATE()) 
            AND i.Email = o.Email 
            AND i.FileDownloaded = o.FileDownloaded
            AND NOT i.Id = o.Id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T16:20:36.410

所以看起来主要是你的电子邮件基于主表中的 WHERE NOT EXISTS 行，该行与现在之间的日期差异小于 20 分钟，并且该行共享相同的电子邮件和filedownloaded 值作为插入值。

因此，如果没有一行是真的，你只会收到一封电子邮件，但你已经有一行是真的，你刚刚插入的行。

# java - java - FTPClient，多线程上传不起作用。

> ID：15275954
> 
> 赞同：2
> 
> 时间：2013-03-07T16:06:19.757
> 
> 标签：java, outputstream

我正在制作一个应用程序，让您一次最多将 5 个文件上传到服务器。我正在使用 apache FTPClient 和 Filezilla 服务器。当我一次上传一个文件时它可以工作，但是当我尝试进行 2 个或更多上传时，我得到套接字异常，正在上传的第一个文件停止并且新文件开始。这是我的 UploadThread 类：

```
package uploaduptofive;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.OutputStream;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JFileChooser;
import org.apache.commons.net.ftp.FTPClient;

public class ThreadUpload implements Runnable {

FileInputStream inputStream;
long fileLength;
File selFile;
JFrameClass jFrame;
static String fajl;
FTPClient ftpClient;
String ime;
long progress = 0;
int i;

public ThreadUpload(JFrameClass jFrame, FTPClient ftpClient) {
    this.jFrame = jFrame;
    this.ftpClient = ftpClient;
}

@Override
public synchronized void run() {
    i = jFrame.i;
    JFileChooser fc = new JFileChooser();

    fc.setDialogTitle("Upload file");
    fc.setAcceptAllFileFilterUsed(true);
    if (fc.showOpenDialog(jFrame) == JFileChooser.APPROVE_OPTION) {

        selFile = fc.getSelectedFile();
        System.out.println(selFile.length());
        Path path = Paths.get(selFile.toString());
        fileLength = selFile.length();
        fajl = selFile.toString();
        ime = selFile.getName();
        System.out.println(ime);
        try {
            upload();
        } catch (FileNotFoundException ex) {
            Logger.getLogger(ThreadUpload.class.getName()).log(Level.SEVERE, null, ex);
        } catch (IOException ex) {
            Logger.getLogger(ThreadUpload.class.getName()).log(Level.SEVERE, null, ex);
        }
    } else {
        jFrame.indeksProgress[jFrame.i] = -1;
    }
}

protected void upload() throws FileNotFoundException, IOException {

    File secondLocalFile = new File(fajl);
    String secondRemoteFile = ime;
    inputStream = new FileInputStream(secondLocalFile);
    OutputStream outputStream = ftpClient.storeFileStream(secondRemoteFile);
    byte[] bytesIn = new byte[4096];
    int read = 0;

    jFrame.nizProgress.get(jFrame.indeksProgress[i]).setValue(0);
    while ((read = inputStream.read(bytesIn)) != -1) {
        outputStream.write(bytesIn, 0, read);
        progress = progress + 4096;
        System.out.println("" + ((progress * 100 / fileLength)));
        jFrame.nizProgress.get(jFrame.indeksProgress[i]).setValue((int) ((progress * 100 / fileLength)));
    }

    System.out.println("" + ((((progress) / fileLength) * 100)));
    jFrame.nizProgress.get(jFrame.indeksProgress[i]).setValue(100);
    inputStream.close();
    outputStream.close();

    boolean completed = ftpClient.completePendingCommand();
    if (completed) {
        System.out.println("Uploaded!");
    }
}
} 
```

我从类名 JFrameClass 运行线程：

```
Runnable run = new ThreadUpload(JFrameClass.this, ftpClient);
            new Thread(run).start(); 
```

这是我得到的错误：

```
mar 07, 2013 4:39:01 PM uploaduptofive.ThreadUpload run
SEVERE: null
java.net.SocketException: Software caused connection abort: socket write error
at java.net.SocketOutputStream.socketWrite0(Native Method)
at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:109)
at java.net.SocketOutputStream.write(SocketOutputStream.java:153)
at org.apache.commons.net.io.SocketOutputStream.write(SocketOutputStream.java:71)
at uploaduptofive.ThreadUpload.upload(ThreadUpload.java:79)
at uploaduptofive.ThreadUpload.run(ThreadUpload.java:57)
at java.lang.Thread.run(Thread.java:722) 
```

ThreadUpload.java:57 是 upload(); 是，并且 (ThreadUpload.java:79) 是 outputStream.write(bytesIn, 0, read); 是。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T16:38:06.400

显然，您对两个上传过程使用相同的 FtpClient。

您应该重新实例化一个新的 FtpClient 以打开一个新的套接字并允许同时下载多个文件：

```
 FtpClient ftpClient = new FtpClient() ;
 ...
 //Opens a new socket
 ftpClient.connect("ftp.example.com");
 ...

 Runnable run = new ThreadUpload(JFrameClass.this, ftpClient);
 new Thread(run).start(); 
```

# jquery - jquery取消悬停

> ID：15275956
> 
> 赞同：13
> 
> 时间：2013-03-07T16:06:20.853
> 
> 标签：jquery

我有这个脚本可以在段落中的链接悬停时在段落上产生背景颜色。我不知道该怎么做，一旦我“取消悬停”，它就会返回原始背景颜色。

```
$(function(){
    $(".box a").hover(function(){
    $(this).parent().css('background-color', '#fff200');
    });
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-07T16:09:44.693

下面的函数用作`onmouseover`和`onmouseout`

```
$(function () {
    $(".box a").hover(function () {
        $(this).parent().css('background-color', '#fff200');
    }, function () {
        // change to any color that was previously used.
        $(this).parent().css('background-color', '#fff200');
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T16:09:16.593

**jQuery**

```
$(".box a").hover(function(){
    $(this).parent().css('background-color', '#fff200');
 }, function() {
     $(this).parent().css('background-color', '#ffffff');
 }); 
```

见[小提琴](http://jsfiddle.net/soyuka/fTZfT/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T16:08:41.943

[jQuery 文档](http://api.jquery.com/hover/#hover1)中有一个悬停处理程序。那就是您想要将颜色恢复为原始颜色的地方。如果你所做的只是改变颜色，为什么不使用 CSS 呢？

```
$(function(){
    $(".box a").hover(function(){
        $(this).parent().css('background-color', '#fff200');
    },function(){
        $(this).parent().css('background-color', '#originalhexcolor');
    });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T16:12:36.497

如果您必须为此使用 jQuery，请使用`addClass()`而不是`css()`：

```
$('.box a').hover(function(){
    $(this).closest('.box').addClass('hoveredOver');
}, function(){
    $(this).closest('.box').removeClass('hoveredOver');
}); 
```

使用 CSS：

```
.hoveredOver {
    background-color: #fff;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/BeYGn/4/)。

参考：

*   [`addClass()`](http://api.jquery.com/addClass/).
*   [`removeClass()`](http://api.jquery.com/removeClass/).

# arrays - 如何增加元胞数组的大小？

> ID：15275957
> 
> 赞同：2
> 
> 时间：2013-03-07T16:06:25.427
> 
> 标签：arrays, matlab, matrix, cell, dimensions

我有一个单元格数组，尺寸为：1x11x2

我想通过添加一行''将其增加到 3x11x2

我怎么做？

例如：数组 A：

```
a(:,:,1) = 

    'Value3'    ''    ''    'Value1'    ''    ''    ''    ''    ''    ''    ''

a(:,:,2) = 

    ''    ''    ''    ''    'Error'    ''    ''    ''    ''    ''    '' 
```

我希望它是：

```
a(:,:,1) = 

    'Value3'    ''    ''    'Value1'    ''    ''    ''    ''    ''    ''    ''
    ''    ''    ''    ''    ''    ''    ''    ''    ''    ''    ''

a(:,:,2) = 

    ''    ''    ''    ''    'Error'    ''    ''    ''    ''    ''    ''
    ''    ''    ''    ''    ''    ''    ''    ''    ''    ''    '' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:25:27.237

最通用的代码是：

```
a = [a; reshape(repmat({''},1,size(a,2)*size(a,3)),1,size(a,2),size(a,3))]; 
```

希望这可以帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:37:45.237

只是部分答案，但这应该可以让您轻松获得适量的空字符串：

```
regexprep(a(:,:,1),'.','') 
```

# php - 检查是否在 jQuery 模板中的 PHP 中设置了参数的最佳方法是什么？

> ID：15275958
> 
> 赞同：1
> 
> 时间：2013-03-07T16:06:31.910
> 
> 标签：php, jquery, jquery-templates

检查在 jQuery 模板中的 PHP 中设置的参数的最佳方法是什么？

我有这个代码：

```
var custID = '<?php echo htmlentities( $_GET['custID'] ); ?>'; 
```

我需要检查它是否已设置，如果已设置，则回显该值，如果不产生错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:09:16.107

我会说：

```
<?php
 if(isset($_GET['custID']))echo "var custID = '".$_GET['custID']."';";
 else echo "alert('error');";
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:09:24.907

试试这个

```
var custID = <?php echo htmlentities( isset($_GET['custID']) ? $_GET['custID'] : "" ); ?>; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T16:14:54.590

我会这样做，首先我们需要检查 custID 是否存在：

```
<?php
    $custId = isset($_GET['custID'] && !empty($_GET['custId']) ? htmlentities($_GET['custId']) : false;
    if(!$custId) {
        //cutsId don't exists, show your error
?>
    Error
    <script type="text/javascript">var custId = false;</script>
<?php } else { ?>
    <script type="text/javascript">var custId = '<?php echo $custId; ?>';</script>
<?php } ?> 
```

在那里你确定 javascript var 不会抛出错误。

脚本中还有另一种方式：

```
<script type="text/javascript">
var custId = '<?php echo isset($_GET['custId']) ? htmlentities($_GET['custId']) : false;?>';
</script> 
```

请注意，我保留了引号，否则它们可能是错误的，因为`var custId = ;`它无效但`var custId = '';`确实有效。

如果 custId 不存在，Javascript var 将为空（不是未定义），您可以这样检查：

```
if(custId.length)
    //custId exists 
```

# actionscript-3 - actionscript-3 papervision3d mxmlc 嵌入式 collada 模型未显示

> ID：15275963
> 
> 赞同：1
> 
> 时间：2013-03-07T16:06:47.243
> 
> 标签：actionscript-3, apache-flex, mxmlc, collada, papervision3d

我正在根据以下教程编写一些代码：

[http://active.tutsplus.com/tutorials/3d/quick-tip-displaying-a-3d-model-with-papervision3d/](http://active.tutsplus.com/tutorials/3d/quick-tip-displaying-a-3d-model-with-papervision3d/)

我从示例中复制了代码，并将路径添加到我自己的资产中。

```
[Embed(source="/Models/daeModel/cow.dae", mimeType="application/octet-stream")]    
private var CowModelClass:Class;         
[Embed(source="/Models/daeModel/Cow.png")]    
private var CowTextureClass:Class;  
[Embed(source="/Models/SkyDome/images.jpg")]    
private var SkyTextureClass:Class;
[Embed(source="/Textures/grass-texture.jpg")]    
private var GrassTextureClass:Class; 
```

上面显示的资产用于显示 Collada 奶牛模型站在天穹（球体）下的草地（平面）上，因此我的代码与教程略有不同，我加载的是 Collada 而不是 DAE。

```
import org.papervision3d.objects.parsers.Collada; 
```

我在 Flash CS3 中发布它并且 .swf 完美运行。奶牛模型展示、草地飞机和天穹都出现了。

不幸的是，资产是在运行时加载的，因为 Flash CS3 没有嵌入。

要嵌入资产，我然后使用 mxmlc.exe 编译 .as，使用：

```
-static-link-runtime-shared-libraries=true 
```

我没有编译错误。

但是，当我运行 .swf 文件时，草平面和天穹以嵌入的纹理正常显示，但不显示 collada 模型。

我自己的调试文本将模型的宽度显示为 0，因此看起来模型尚未加载。Collada 类仍然可以正常工作，因为我能够移动模型的 3D 坐标，从而移动一些以模型坐标为中心的 3D 文本。文本显示，但模型不可见。

通过进行简单的更改，我可以通过将模型的纹理“Cow.png”应用到草地平面来检查它，并且它显示得很好。因为纹理与模型在同一个文件夹中，所以我知道导航到模型位置的路径不是问题。

有谁知道 Collada 模型在使用 mxmlc 编译后可能不显示的任何原因？

我是否缺少任何命令行参数或类似的东西？

如果做不到这一点，还有其他方法可以嵌入这个模型吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T23:38:30.913

问题解决了！

编译器 mxmlc 要求我将 cowByteArray 定义为 XML：

```
//load cow model MXMLC
var cowByteArray:ByteArray = new CowModelClass ( ); 
cow = new Collada ( ) ;
cow.load ( new XML(cowByteArray), cowMaterialsList ) ; 
```

使用第二个代码，使用 mxmlc 编译后，模型显示正常！

希望这对某人有帮助！

# php - 样式表作为未定义变量出现错误

> ID：15275965
> 
> 赞同：0
> 
> 时间：2013-03-07T16:06:57.850
> 
> 标签：php, wordpress

我收到这样的通知错误：

注意：wp-content/themes/aquasize/admin/library/engines/typography-engine.php:66 - 未定义变量：样式表

注意：wp-content/themes/aquasize/admin/library/engines/typography-engine.php:70 - 未定义变量：样式表

这是我的完整代码： http: [//pastebin.com/VsrHzjJ6](http://pastebin.com/VsrHzjJ6)

这是第 66 行：

```
 preg_match("/\.css/i", $stylesheet, $matches); 
```

这是第 70 行：

```
 if( $stylesheet ) wp_enqueue_style( $font, $stylesheet, 1, 2 ); 
```

我尝试修复但在最新的 PHP 版本上失败了。非常感谢您的所有帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:15:35.423

尝试添加：

```
/**
 * This will log all errors notices and warnings to a file called debug.log in
 * wp-content (if Apache does not have write permission, you may need to create
 * the file first and set the appropriate permissions (i.e. use 666) )
 */
define('WP_DEBUG', true);
define('WP_DEBUG_LOG', true);
define('WP_DEBUG_DISPLAY', false);
@ini_set('display_errors',0); 
```

在您的开发安装中的 wp-config.php 文件的顶部附近。

**更新**

这些是通知和警告而不是错误。要么定义变量，要么关闭通知的错误报告。

请尝试在全局代码之上定义它。或者在调用函数之外定义。

```
$stylesheet= ""; 
```

# sql - 性能差异：select top 1 order by vs. select min(val)

> ID：15275968
> 
> 赞同：5
> 
> 时间：2013-03-07T16:07:04.273
> 
> 标签：sql, performance, aggregate-functions

问题很简单。哪个查询会更快：

```
SELECT TOP 1 value FROM table ORDER BY value 
```

或者

```
SELECT TOP 1  MIN(value) FROM table 
```

我们可以假设我们有两种情况，情况 1\. 没有索引和情况 2\. 有索引值。
任何见解都值得赞赏。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T16:20:41.330

在不存在索引的情况下：

*   MIN(value) 应该在 O(N) 时间内通过单次扫描实现；
*   TOP 1 ... ORDER BY 将需要 O(N Log N) 时间，因为指定的排序（除非数据库引擎足够聪明，可以读取意图，我不想在生产代码中依赖它）。

当索引确实存在时：

*   两者都应该只需要 O(1) 时间，使用索引。

# javascript - Javascript 滚动处理程序未触发

> ID：15275969
> 
> 赞同：27
> 
> 时间：2013-03-07T16:07:06.420
> 
> 标签：javascript, event-handling, dom-events

我要做的就是在`DIV`滚动 a 时调用一个函数。为简单起见，我没有指定其他任何内容。此外，我只关注 DOM 兼容的浏览器，例如 Chrome、Safari（不是 IE）。

我的问题是滚动处理程序永远不会被调用。如果我替换`scroll`to `click`，它会在我单击时起作用。不知何故，滚动不起作用。

请注意：我不能使用 jQuery :(

这是我的代码：

**HTML：**

```
<div id="test">--long content--</div> 
```

**JS：**

```
 function myFunc() {
        console.log('in myFunc');
    }
    var objTable = document.getElementById("test");

    objTable.addEventListener("scroll", function () {
        myFunc();
    }, false); 
```

**小提琴：**

[http://jsfiddle.net/yymg5/7/](http://jsfiddle.net/yymg5/7/)

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-07T16:13:08.623

这是因为窗口滚动而不是 div。尝试将您的元素侦听器更改为 div 的父级（在本例中为窗口），如下[所示](http://jsfiddle.net/yymg5/3/)。

```
window.addEventListener("scroll", function () {
    myFunc();
}, false); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2018-08-09T06:44:15.083

在我的情况下，我遇到了类似的问题。此代码是正确的，已由[Undefined回答](https://stackoverflow.com/a/15276103/1439321)

```
window.addEventListener("scroll", function () {
    myFunc(); 
}, false); 
```

但它不起作用，因为，

**滚动事件未触发。因为我的身体在滚动而不是 documentElement。**

我刚刚`height: 100%`从我的身体标签中删除，然后滚动事件开始触发。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-11-26T12:44:40.503

就我而言，我的`height: 100%`身体里有一个。因为我只想在一个特殊的 div 中应用滚动事件。

然后，这解决了问题：

```
document.querySelector('#myDiv').addEventListener('scroll', () => {
    console.log('scroll event fired!')
 }); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-03-04T11:06:25.027

我通过删除`height: 100%;`表单`html`和`body`CSS 选择器来修复它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-02-11T06:50:14.897

发生这种情况是因为您的 div 有`height: 100%`or `height: 100vh`。在这种情况下，如果您给出高度，滚动事件将自动禁用：

删除该 div 高度，删除其父项、子项的任何高度。基本上，那个特定的 div 不应该滚动它的父或子。

那么这应该工作。

```
const AppWrapper = document.getElementById('app-content');
AppWrapper.addEventListener('scroll', toggleVisibility);

toggleVisibility = () => {
   console.log('Do your thg');
}; 
```

# sql - 错误：列不存在

> ID：15275971
> 
> 赞同：4
> 
> 时间：2013-03-07T16:07:08.547
> 
> 标签：sql, postgresql, jdbc, quoted-identifier

我已经能够将 PostgreSQL 链接到 java。我已经能够显示表中的所有记录，但是我无法执行删除操作。

这是我的代码：

```
con = DriverManager.getConnection(url, user, password);
String stm = "DELETE FROM hostdetails WHERE MAC = 'kzhdf'";
pst = con.prepareStatement(stm);
pst.executeUpdate(); 
```

请注意，MAC 是一个字符串字段，用大写字母书写。该字段**确实**存在于表中。

我得到的错误：

严重：错误：列“mac”不存在

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-07T16:12:17.133

当涉及到带有大写字母的 Postgresql 和实体名称（表、列等）时，您需要通过将其放在“”中来“转义”该单词。请参阅有关此特定主题[的文档。](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS)所以，你的例子应该是这样写的：

`String stm = "DELETE FROM hostdetails WHERE \"MAC\" = 'kzhdf'";`

附带说明一下，考虑到您使用的是准备好的语句，您不应该直接在 SQL 语句中设置值。

```
con = DriverManager.getConnection(url, user, password);
String stm = "DELETE FROM hostdetails WHERE \"MAC\" = ?";
pst = con.prepareStatement(stm);
pst.setString(1, "kzhdf");
pst.executeUpdate(); 
```

# facebook-graph-api - 如何检索我的 Facebook 应用发布的帖子的分析

> ID：15275973
> 
> 赞同：0
> 
> 时间：2013-03-07T16:07:12.123
> 
> 标签：facebook-graph-api, analytics, facebook-insights

我有一个 Facebook 应用程序，它使用图形 API 将图片发布到用户的提要。我想知道有多少其他 Facebook 用户查看了发布的每张图片。我曾尝试使用见解 API，但它只返回空数据。例如，假设一个帖子的 ID：

```
100003858263437_217258205079453 
```

如果我访问：

```
https://graph.facebook.com/100003858263437_217258205079453/insights?access_token=ACCESS_TOKEN
```

返回的数据为空：

```
{
   "data": [

   ],
   "paging": {
      "previous": "https://graph.facebook.com/100003858263437_217258205079453/insights?access_token=ACCESS_TOKEN&since=-86400&until=0",
      "next": "https://graph.facebook.com/100003858263437_217258205079453/insights?access_token=ACCESS_TOKEN&since=0&until=86400"
   }
} 
```

从 Insights 文档看来，可能无法获得对特定帖子的见解。有人知道如何获得应用程序发布的帖子的见解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:46:10.033

正确，用户帐户没有拉动洞察力。`read_insights`如果您有权限，您只能提取用户拥有的页面、应用程序和域的见解

# ruby-on-rails - 将数组项的特殊最后一个字符串插入单独的数组项

> ID：15275975
> 
> 赞同：-2
> 
> 时间：2013-03-07T16:07:15.030
> 
> 标签：ruby-on-rails, ruby, regex

有一个数组`test_array`，其中包含一个与 . 分开的字符串`.split(' ')`。所以每个项目的最后一个字符可以是`'.'`, `'-'`,`'!'`和任何其他非单词类型。目标是将这个字符作为一个单独的项目插入到数组中，并从它的源中删除。

```
l=0
test_array= @test.source.split(' ') 
test_array. each do |f| 
    if f[-1]== /[^\w]/
        test_array.insert(l+1, f[-1]) 
        f=f.chop 
        l+=1 
    else 
        l+=1 
    end 
end 
```

`/[^\w]/`是任何非单词字符的正则表达式。
由于某种原因，它不起作用。尝试调试一个小时，没有解决方案。

**UPD** 例如，输入是：

**[** “该”“模式”、“是”、“典型”、“a”、“正则表达式`;`”、“如果`:`” **]**

输出应该是：

**[** “该”“模式”、“是”、“典型”、“a”、“正则表达式”、**“** ” `;`、“如果” **、** “ `:`” **]**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:22:55.213

对于 Regexp，您需要使用`=~`运算符或`match`方法，因此您的代码将变为：

（编辑 - 想一想，你会得到一个永无止境的循环，因为你在完成迭代之前在数组末尾插入了非单词字符，所以你将解析你已经刚刚插入，它恰好总是一个非单词字符..所以你会把它切掉并重新插入..等等。要解决这个问题，你应该建立一个新数组，我已经更新了我的下面的答案反映这一点。）

```
test_array= @test.source.split(' ') 
result_array=[]
test_array.each do |f| 
    if f[-1]=~ /[^\w]/
        result_array << f.chop << f[-1]
    else
        result_array << f
    end
end 
```

测试：

```
1.9.3p194 :041 > test_array = ["The" "pattern", "is", "typically", "a", "Regexp;", "if:" ]
 => ["Thepattern", "is", "typically", "a", "Regexp;", "if:"] 
1.9.3p194 :042 > result_array = []
 => [] 
1.9.3p194 :043 > test_array.each{|f| if f[-1]=~ /[^\w]/; result_array << f.chop; result_array << f[-1]; else; result_array << f; end}
 => ["Thepattern", "is", "typically", "a", "Regexp;", "if:"] 
1.9.3p194 :044 > result_array
 => ["Thepattern", "is", "typically", "a", "Regexp", ";", "if", ":"] 
```

*[酱](http://www.ruby-doc.org/core-2.0/Regexp.html)*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T16:51:13.760

你可以[`String#split`](http://ruby-doc.org/core-1.9.3/String.html#method-i-split)在你的正则表达式中使用一个捕获组来做到这一点：

```
pry(main)> "The pattern is typically a Regexp; if:".split(/([^\w\s])?(?:\s+|$)/)
=> ["The", "pattern", "is", "typically", "a", "Regexp", ";", "if", ":"] 
```

当拆分正则表达式包含捕获组时，它们也会在结果中返回。此正则表达式在空格上拆分，在空格之前捕获可选的非单词/非空格字符。

# msbuild - MSBuild 社区任务 - ILMerge 无效的命令行开关路径 1

> ID：15275977
> 
> 赞同：0
> 
> 时间：2013-03-07T16:07:23.833
> 
> 标签：msbuild, ilmerge

我正在尝试在 C# 项目文件中使用 ILMerge 将一些 dll 组合成一个 dll（出于各种原因）。我已经从[https://github.com/loresoft/msbuildtasks](https://github.com/loresoft/msbuildtasks)下载了 MSBuild 社区任务，它的目标是 ILMerge。

尝试使用 ILMerge 目标时，我收到了这个晦涩的错误消息：

```
"C:\svn\AwaitingFeedbackCanceller.csproj" (rebuild target) (1) ->
(Zip target) ->
C:\svn\AwaitingFeedbackCanceller.csproj(150,5): error MSB6001: Invalid command line switch for "ILMerge.exe".
Value cannot be null.\r
C:\svn\AwaitingFeedbackCanceller.csproj(150,5): error MSB6001: Parameter name: path1 
```

这些是我的项目文件中的相关位：

```
 <PropertyGroup>
    <ZipFileName>$(ProjectName)-$([System.String]::Copy('$(projectguid)').Trim('\{\}')).zip</ZipFileName>
    <MergedFile>$(ProjectDir)$(ProjectName).dll</MergedFile>
    <logFile>$(ProjectDir)$(ProjectName).log</logFile>
    <TargetPlatformVersion>v4</TargetPlatformVersion>
    <TargetPlatformDirectory>C:\Windows\Microsoft.NET\Framework64\v4.0.30319</TargetPlatformDirectory>
    </PropertyGroup>
  <ItemGroup>
    <inputAssemblies Include="$(ProjectDir)$(OutDir)$(AssemblyName).dll" />
    <inputAssemblies Include="$(ProjectDir)$(OutDir)AeriandiGeminiPluginBase.dll" />
    <allowDuplicates Include="$(ProjectDir)$(OutDir)ClassAB" />
    </ItemGroup>
    <Target Name="Merge">
    <Message Importance="high" Text="Merging assemblies" />
    <ILMerge InputAssemblies="@(inputAssemblies)" AllowDuplicateTypes="@(allowDuplicates)" OutputFile="$(MergedFile)" LogFile="$(logFile)" DebugInfo="true" XmlDocumentation="true" TargetPlatformVersion="$(TargetPlatformVersion)" TargetPlatformDirectory="$(TargetPlatformDirectory)" />
    </Target> 
```

这真的开始阻碍我，因为我需要自动化多个项目的部署。

谁能指出我做错了什么？

干杯，

阿什利

披露：我也在 Github 上为这个项目添加了这个问题，但没有得到回应 - [https://github.com/loresoft/msbuildtasks/issues/42](https://github.com/loresoft/msbuildtasks/issues/42)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T18:59:57.663

为了让它工作，我必须安装 IlMerge MSI。我试图使用指定了 ToolPath 的 NuGet 版本，但由于某种原因它仍然找不到 IlMerge。

安装msi版本后，它工作正常。

[http://www.microsoft.com/en-us/download/details.aspx?id=17630](http://www.microsoft.com/en-us/download/details.aspx?id=17630)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-09T20:20:45.217

我遇到了与您在上面描述的相同的问题，但是通过将此 ToolPath 添加到 ILMerge 任务的 NuGet 版本，我能够使其工作：

```
<ILMerge ToolPath="packages\ilmerge.2.13.0307" ... 
```

# c - 无法在 Netbeans 中关闭/终止子进程

> ID：15275983
> 
> 赞同：0
> 
> 时间：2013-03-07T16:07:36.867
> 
> 标签：c, netbeans, fork, child-process

上一个问题的答案： [https](https://stackoverflow.com/a/2035683/960086) ://stackoverflow.com/a/2035683/960086 没有检查并安静下来，所以我错过了。已经要求在此处发布

我正在玩一个在子进程上创建套接字连接的应用程序。

现在我的问题是尝试对其进行测试，但是每次运行应用程序时，Netbeans 都会在我通过单击红色方块或右下角的 main(run) X 按钮关闭时创建 main(Build, Run) 和 main(Run)。进程“终止”但它停留在那里，然后在退出 IDE 时显示“退出 IDE 将终止...”main(run)”

这是我第一次使用 fork（和 c），所以我想我在终止主进程时没有终止子进程，但我不应该也可以手动终止吗？或者有没有办法让我有一个不断监听而不阻塞其余代码的套接字连接？

（注意连接不正确，因为它仍然有阻塞）

```
connection()
...
connection() {
    int pid = fork();
if (pid < 0)
    {
        perror("ERROR on fork");
    exit(1);
    }
if (pid == 0)  
    {
    int sockfd, portno, n;
    struct sockaddr_in serv_addr;
    struct hostent *server;

    fd_set fds;
    struct timeval timeout;
    int rc;
    /* Set time limit. */
    timeout.tv_sec = 0;
    timeout.tv_usec = 10;
    char buffer[256];

    portno = 4444;
    sockfd = socket(AF_INET, SOCK_STREAM, 0);

    if (sockfd < 0) 
        error("ERROR opening socket");
    server = gethostbyname("Localhost");
    if (server == NULL) {
        fprintf(stderr,"ERROR, no such host\n");
        exit(0);
    }
    bzero((char *) &serv_addr, sizeof(serv_addr));
    serv_addr.sin_family = AF_INET;
    bcopy((char *)server->h_addr, 
         (char *)&serv_addr.sin_addr.s_addr,
         server->h_length);
    serv_addr.sin_port = htons(portno);
    if (connect(sockfd,(struct sockaddr *)&serv_addr,sizeof(serv_addr)) < 0) 
        error("ERROR connecting");
    while(1)    {
        /* Create a descriptor set containing our two sockets.  */
        FD_ZERO(&fds);
        FD_SET(sockfd, &fds);
        rc = select(sizeof(fds)*8, &fds, NULL, NULL, &timeout);
        if (rc==-1) {
            perror("select failed");
        }
        if (rc > 0) {
            bzero(buffer,256);
            fgets(buffer,255,stdin);
            n = write(sockfd,buffer,strlen(buffer));
            if (n < 0) 
                 error("ERROR writing to socket");
        }
        rc = select(sizeof(fds)*8, &fds, NULL, NULL, &timeout);
        if (rc==-1) {
            perror("select failed");
        }
        if (rc > 0) {
            bzero(buffer,256);
            n = read(sockfd,buffer,255);
            if (n < 0) 
                 error("ERROR reading from socket");
            printf("Client: Server send %s",buffer);
            useEvent(buffer);
        }
    }
} 
```

# c++ - 为什么我的 C++ 程序没有运行？

> ID：15275984
> 
> 赞同：-3
> 
> 时间：2013-03-07T16:07:37.357
> 
> 标签：c++

```
#include <cstdlib>
#include <iostream>

    int GenerateID()
    {
        using namespace std;
        static int nNextID = 0;
        nNextID++;
        if (nNextID <= 20)
        cout << nNextID << endl;
    }

int main()
{
    int GenerateID();
    system("pause");
} 
```

为什么上面的程序没有运行？我希望它使用该程序在 1-20 的控制台编号上生成。

事实上，程序正在运行。但是，该程序没有生成任何输出。我希望输出是由空格分隔的一行的`1`数字`20`。我观察到空白，即没有输出。

程序不会崩溃。没有编译器错误或警告。实际上，这是该程序的演练：

我导入了两个库，分别使用和为输入和输出对象`cstdlib`执行系统命令和。它们位于命名空间中，所以我输入，因为我很懒，不想输入.`system``iostream``cin``cout``std``using namespace std``std::cout`

然后我初始化`nNextID`为`0`，增加它，如果它小于 20 它应该输出`nNextID`。这是函数的结束。

我调用该函数`main`并使用它`pause`来结束程序。`1`那么，当我期望在`20`一行上用空格分隔数字时，为什么会得到空白输出？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T16:08:39.890

你的主要功能应该是这样的：

```
int main()
{
    GenerateID();
    system("pause");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T16:09:10.783

在`main`中，您没有调用该函数。你只是宣布了它。

改为这样做：

```
GenerateID(); 
```

（即没有`int`）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T16:17:19.723

```
int GenerateID(); 
```

不是函数调用。这是一个函数声明，定义了函数的返回类型和参数。这不会调用 GenerateID 函数，它只会允许该定义下的所有内容正确使用该函数（这在此处非常多余，因为您首先已经在 int main 上方声明和定义了该函数。）

要解决此问题，您应该执行以下操作：

```
GenerateID(); 
```

那将是一个适当的函数调用。

* * *

我还想警告您有关系统功能的使用。出于快速和简单的测试目的，使用完全没问题，虽然有问题，但由于此功能非常依赖于操作系统，我建议不要使用它。

system("pause") 的替代方法是：

```
std::cin.get(); 
```

它不会显示文本，但无论哪种方式你都不需要。（谢谢大卫）

我希望这有帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T16:08:41.803

`int GenerateID()`in`main`声明了一个新函数，它不会调用你之前写的函数。

为了调用你的函数，只需使用`GenerateID();`. 顺便说一句，您的函数没有`return`任何作用，因此声明其返回类型几乎没有意义`int`- use `void`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-07T16:22:11.613

*   删除`int`调用 in 前面`GenerateID()`的关键字`main`。

*   用循环包装那个调用：

    ```
    for (int i = 0; i < 20; i++) 
        GenerateID(); 
    ```

可选：

*   [用为此问题](https://stackoverflow.com/questions/1173208/what-is-the-best-practice-for-combating-the-console-closing-issue)提供的解决方案之一替换您的`system`函数调用，

*   将显示 id 的代码与生成它的代码分开：

    ```
    int GenerateID() {
        static int id = 0;
        return id++;
    }

    int main(){
        using namespace std;
        for (int i = 0; i < 20; i++)
            cout << GenerateID() << endl;
        // here the code for console pausing
        return 0;
    } 
    ```

*   让你的`main`函数在退出时返回一个值是一种很好的做法（就像任何返回某些东西的函数一样），如上面的代码所示，

*   删除隐式命名空间使用，并使所有使用显式。就个人而言，只要隐式使用被隔离到代码的非常特定的部分，我不认为这是一个问题，但是如果您的代码变得足够大，您可能需要谨慎使用该功能。在此设置中，显然没有必要。

# three.js - 渲染多个场景，只有 1 个使用 SSAO [Three.js]

> ID：15275986
> 
> 赞同：1
> 
> 时间：2013-03-07T16:07:41.103
> 
> 标签：three.js, ssao

在我对 Three.js 的持续试验中，我碰到了另一面似乎无法翻越的墙。

我正在尝试在具有 SSAO 后期处理效果的前景场景下方渲染背景场景（其中有地板）。背景场景不应应用任何后期处理。

我尝试了多种方法（使用面具等），但我似乎无法破解这一点。我看到的主要问题是 SSAO 场景的背景不透明，因此没有显示背景场景。我仍然不相信即使解决了透明度问题，事情也会按预期进行。

这就是没有`SSAO`后处理的情况：http: [//jsfiddle.net/uJbPe/1/](http://jsfiddle.net/uJbPe/1/)

这就是启用 SSAO 后处理的当前情况：http: [//jsfiddle.net/7hfdC/6/](http://jsfiddle.net/7hfdC/6/)

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:33:23.243

您可以使用掩蔽通道来实现这一点。我相信这是解决问题的正确方法。您的原始代码需要添加一些内容才能实现。

首先，您需要创建一个渲染目标，该目标启用了模板缓冲区，以传递给效果作曲家使用。模板缓冲区中的信息允许进行屏蔽。

```
renderTargetParameters = { minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat, stencilBuffer: true };
renderTarget = new THREE.WebGLRenderTarget( window.innerWidth, window.innerHeight, renderTargetParameters );
composer = new THREE.EffectComposer( renderer, renderTarget ); 
```

接下来，我建议让您的背景和前景通道都在作曲家中。它使渲染堆栈更干净。渲染前景场景时，请确保其 clear 属性设置为 false，以便保留模板缓冲区数据以用于掩蔽通道。

然后是遮罩通道、ssao 通道、清晰的遮罩路径和最终的着色器通道，将其全部渲染到屏幕上。您可以在此处使用简单的通过着色器或 fxaa。可能还有另一种我不知道的渲染到屏幕的方法，但是您不能将 ssao 通道分配给渲染到屏幕，并在清除掩码通道跟随它时让它工作。

这是一个使用这种方法实现的小提琴的链接[http://jsfiddle.net/xqLdz/3/](http://jsfiddle.net/xqLdz/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T03:32:04.033

我正在做一些非常非常相似的事情。在您的 SSAO 中，您是否尝试过“ssaoPass.material.transparent = true;”。好像如果你让你的前景 RGBA 而不是默认的 RGB 它可以解决你的问题。

# ios - 按开始日期过滤 NSMutableArray 对象

> ID：15275988
> 
> 赞同：2
> 
> 时间：2013-03-07T16:07:44.280
> 
> 标签：ios, objective-c, nsmutablearray, timestamp, date-range

我正在开发一个 iOS 应用程序，我有一个 NSMutableArray 对象，对象是具有开始日期和结束日期的事件。开始日期是时间戳格式，结束日期不是。

我想根据用户输入的日期过滤该数组 (datePicker) 。

现在我有这个代码并且它部分工作，因为假设一个事件将从 3 月 30 日开始，到 4 月 2 日结束，如果用户输入 3 月 30 日之前的任何日期，那么该事件将出现在我的列表中（即好的）但是如果用户输入让我们说 3 月 31 日，相同的事件将不会被过滤，这是错误的，因为事件直到发生。

```
if(datePickerInTimeStamp>0)
    {
        //I know I might use while instead of an if 
        for (EventObj *_eventObj in eventsList)
        {

            if(_eventObj.dateDebutTimeStamp>0){

                if ( datePickerInTimeStamp <= _eventObj.dateDebutTimeStamp)

                    [self._filteredListCaleventsList addObject:_eventObj];

            }
        }
    } 
```

我正在考虑将结束日期转换为时间戳并使用某种范围检查。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T16:24:53.593

我不是 100% 清楚您希望过滤器过滤什么，但这里有一些建议：

1.  使用OO设计。教你的事件表明它们是否匹配。
2.  使用 NSDate 比较方法 earlyDate: 和 laterDate:

我会从您的问题中猜测您想要选择在用户选择的日期发生的事件：

```
// in your class EventObj.m

// answer true if date is between the event start and end
- (BOOL)isOccurringOn:(NSDate *)date {
    return [self.start == [self.start earlierDate:date]] &&
           [self.end == [self.end laterDate:date]];
} 
```

如果您想过滤一些其他对事件来说很自然的方式，例如开始之前、之后开始、之前结束等，这里的 BOOL 回答方法就是这样做的方法。

现在您的 EventObj 做了一些有意义且易于阅读的事情，并且您的循环也更漂亮了：

```
// get NSDate *selectedDate from user
// using your var names, though the _underscores are strange ...

for (EventObj *_eventObj in eventsList) {
    if ([_eventObj isOccurringOn:selectedDate]) {
        [self._filteredListCaleventsList addObject:_eventObj];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T18:10:11.913

如果您喜欢单线，这里有一个可以满足您的需求：

```
self.filteredListCaleventsList = [eventsList filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"dateDebutTimeStamp >= %@", datePickerInTimeStamp]]; 
```

请注意，它使用动态定义的谓词，而没有变量来保存它。如果您认为您的代码使用变量更具可读性，您可以只定义一个。

我还借此机会删除了属性名称开头的下划线，以符合标准命名约定。下划线用于表示支持该属性的 ivar（在正常情况下，有一个支持 ivar）。

# ruby-on-rails - rake db:migrate 在没有版本的情况下无法正常工作

> ID：15275990
> 
> 赞同：1
> 
> 时间：2013-03-07T16:07:49.537
> 
> 标签：ruby-on-rails, migration, rake

我有一个没有依赖项的简单 rails 应用程序（rails 新示例）。然后我创建了一个脚手架学生（rails g scaffold Student name:string）。之后，我运行 rake db:create，然后运行 ​​rake db:migrate。

rake db:migrate 什么也不返回。它没有执行我的迁移，屏幕上没有错误。但是，当我执行 rake db:migrate VERSION=123456 时，迁移运行正常。

您知道 rake db:migrate without version 发生了什么吗？（我在 MAC OS X 上）

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T19:10:13.233

我能得出的唯一合乎逻辑的答案是您的环境将变量`VERSION`设置为 0。在命令行中键入`echo $VERSION`

如果你这样做， running`rake db:migrate`应该等同于`rake db:migrate VERSION=0`which 的行为类似于你所描述的。取消设置变量 ( `unset VERSION`) 并重试。

如果你不这样做，这个答案显然是不正确的。

# c# - 如何从 JavaScript 调用 C# 代码

> ID：15275994
> 
> 赞同：0
> 
> 时间：2013-03-07T16:07:56.840
> 
> 标签：c#, javascript, asp.net

只有当 JavaScript 中的验证为真时，我才想在 JavaScript 后面的代码中调用 C# 代码。我面临一些问题，有人可以帮忙。谢谢 这是我的 JavaScript

```
 <script type="text/javascript">
        function Validate_Checkbox() {
            var chks = $("#<%= cblCustomerList.ClientID %> input:checkbox");

            var hasChecked = false;
            for (var i = 0; i < chks.length; i++) {
                if (chks[i].checked) {
                    hasChecked = true;
                 //call C# code
                    break;
                }
            }
            if (hasChecked == false) {
                alert("Please select at least one checkbox..!");

                return false;
            }

            return true;
        }     
    </script> 
```

这是我要调用的 C# 代码

```
 protected void DV_Test_ItemInserting(object sender, DetailsViewInsertEventArgs e)
    {
       do something
    } 
```

这是调用 JavaScript 的按钮

```
<asp:Button ID="Button1" runat="server" CausesValidation="True" 
                            CommandName="Insert" Text="Insert" OnClientClick="javascript:Validate_Checkbox();return true;"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:10:55.717

这是您的问题的答案[如何在没有 jQuery 的情况下进行 AJAX 调用？](https://stackoverflow.com/questions/8567114/how-to-make-an-ajax-call-without-jquery)

然而，您可能会认为，使用 JQuery 会简化编写 javascript 代码的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:33:24.250

您需要使用评估。例子：

```
<script type="text/javascript">
    function Validate_Checkbox() {
        ...
        if (chks[i].checked) {
            hasChecked = true;
            eval("<%= Page.ClientScript.GetPostBackEventReference(lbSubmit, String.Empty) %>");
        }
        ...
    }

<asp:Button ID="Button1" CausesValidation="True"  CommandName="Insert" Text="Insert" OnClientClick="javascript:Validate_Checkbox();return true;" runat="server"/>

<asp:LinkButton ID="lbSubmit" style="display:none" OnClick="slbCheckVin_Click" runat="server"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T16:13:19.507

这是关于这个主题的一个很好的解释

**1：** [http ://www.dotnetcurry.com/ShowArticle.aspx?ID=109&AspxAutoDetectCookieSupport=1](http://www.dotnetcurry.com/ShowArticle.aspx?ID=109&AspxAutoDetectCookieSupport=1)

**2：** [http ://forums.asp.net/t/1111231.aspx](http://forums.asp.net/t/1111231.aspx)

我希望这对你有帮助;-)

或者，如果您有机会使用库 [ **Telerik** ] for ASP。**您可以使用控制器 [ RadAjaxManager** ]轻松调用 C# 代码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T16:14:42.000

我们可以使用具有数据类型的 Ajax 调用

1) json ，在这种情况下，您将在后面的代码上创建 web 方法并将字符串作为返回结果返回给 JavaScript

2) HTML ，在这种情况下，您将调用新的 HTML 页面并返回 HTML

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T16:23:07.937

我认为您应该将服务器端事件（单击）与客户端事件结合使用。在服务器端：

```
<asp:Button ID="Button1" runat="server" OnClick="Button1_Click" Text="Button" /> 
```

在后面的代码中

```
protected void Button1_Click(object sender, EventArgs e)
{
    //do something here
} 
```

`event.preventDefault()`此外，如果不满足某些条件，则应在您的 javascript 代码中使用。有关详细信息，请查看[Mozilla 文档](https://developer.mozilla.org/pl/docs/DOM/event.preventDefault)。您客户端的示例代码可能如下所示（未测试！）：

```
$(document).ready(function(){
  $('#Button1').click(function(e){
    //some logic to check checkbox status and call e.preventDefault();
  });
}); 
```

# hsqldb - 如何使用 HSQLDB 传输工具

> ID：15275995
> 
> 赞同：0
> 
> 时间：2013-03-07T16:07:58.177
> 
> 标签：hsqldb, in-memory-database

我需要使用 HSQL 传输工具，但找不到运行它的正确位置。我读了一些线程说它在数据库管理器的工具菜单中。但它在脑海中被禁用。然后我进一步发现我需要自己构建它。在我构建它并在 lib 文件夹中获取“hsqldbutil.jar”之后，菜单仍然没有启用。知道我现在应该怎么做才能让它在我的机器上运行吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:25:10.367

您需要在用于启动 DatabaseManager 的 Java 命令的类路径中包含该 jar。请参阅实用程序指南的这一章：

[http://hsqldb.org/doc/2.0/util-guide/dbm-chapt.html](http://hsqldb.org/doc/2.0/util-guide/dbm-chapt.html)

该命令如下所示：

```
java -cp /path/to/hsqldb.jar;/path/to/hsqldbutil.jar org.hsqldb.util.DatabaseManager 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-09T23:18:15.907

1.  设置您的 ANT，并在您的 hsqldb 安装文件夹的构建文件夹中运行以下构建
2.  蚂蚁 hsqldbutil
3.  转到 lib 文件夹并运行以下命令，
4.  java -cp hsqldb.jar;hsqldbutil.jar org.hsqldb.util.DatabaseManager

您现在将看到启用的灰色“工具”菜单，然后选择您选择的工具。

# sql - SQLite中文本引用和int引用的区别？

> ID：15275996
> 
> 赞同：0
> 
> 时间：2013-03-07T16:07:59.443
> 
> 标签：sql, database, sqlite, foreign-keys

以下语句有效：

```
SELECT p._id, last_name, first_name_pref, title, photo_big
FROM People p NATURAL JOIN SpecialtyAreas s
WHERE specialty_area_1 = (SELECT s._id FROM SpecialtyAreas s WHERE s.name = 'Customer Service')
ORDER BY last_name, first_name_pref; 
```

然而，这个没有：

```
SELECT p._id, last_name, first_name_pref, title, photo_big
FROM People p NATURAL JOIN Offices o
WHERE office = (SELECT o._id FROM Offices o WHERE o.name = 'Beadle County')
ORDER BY p.last_name, p.first_name_pref; 
```

我可以在两个表之间找到的唯一区别`People.office`是标记为`INTEGER REFERENCES "Offices._id"("")`while`People.specialty_area_1`标记为`TEXT REFERENCES "SpecialtyAreas._id"("").`

数据类型之间的差异会导致这个问题吗？

此外，这两个字符串实际上都在数据库中。

有没有更简单的方法来查询数据库？`specialty_areas`查询完成了我想要的；我只是想找出为什么我不能从`office`查询中得到相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T17:45:26.130

您希望数据类型在外键关系中涉及的父表列和子表列上匹配。

旁观者通常认为简单，但我喜欢内联视图，因为它们有点自我记录：

```
 select * from people p
       join
       (
        select _id from people join offices
        on people.office = offices._id 
        and offices.name = 'Beadle County'

        UNION

        select _id from people join specialtyareas
        on people.specialty_area_1 = specialtyareas._id 
        and specialtyareas.name='Customer Service'

       ) as MatchingPeople
       on MatchingPeople._id = p._id 
```