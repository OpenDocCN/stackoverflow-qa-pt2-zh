# StackOverflow 问答 13145000-13145999

# linq-to-entities - 在 Linq-to-Entities 查询中嵌套 Linq-to-Objects 查询——幕后发生了什么？

> ID：13145001
> 
> 赞同：4
> 
> 时间：2012-10-30T18:00:48.400
> 
> 标签：linq-to-entities, linq-to-objects

```
 var numbers = new int[] { 1, 2, 3, 4, 5 };

        var contacts = from c in context.Contacts
                       where c.ContactID == numbers.Max() | c.ContactID == numbers.FirstOrDefault()
                       select c;

        foreach (var item in contacts) Console.WriteLine(item.ContactID); ; 
```

Linq-to-Entities 查询首先转换为 Linq*表达式树*，然后由对象服务转换为*命令树*。如果 Linq-to-Entities 查询嵌套了 Linq-to-Objects 查询，那么这个嵌套查询也会被翻译成一个*表达式树*。

a) 我假设嵌套的 Linq-to-Objects 查询的所有运算符都没有实际执行，而是特定 DB（或可能是对象服务）的*数据提供者*知道如何将 Linq-to-Objects 运算符的逻辑转换为适当的 SQL陈述？

b)*数据提供者*知道如何仅为某些 Linq-to-Objects 运算符创建等效的 SQL 语句？

c) 同样，*数据提供者*知道如何仅为 Net Framework 类库中的一些非 Linq 方法创建等效的 SQL 语句？

**回复亚当·米尔斯：**

1）我对你的回复有点困惑。在回复**b)**时，您同意如果说*Linq2Entities Data Provider* for SQL Server 支持特定的 Linq-to-Objects 运算符，那么它将尝试将其转换为等效的 SQL 语句，并且在回复**c)**时您还同意，如果这provider 支持特定*的非 Linq 方法*，它会将其转换为等效的 SQL 语句（如果它不支持它，它将抛出异常）。但是对于**a)**您的回答与您对**c)**所说的相反，因此该提供程序不会尝试转换`Max`为等效的 Sql 语句，而是会执行它并在查询中使用返回的值？

2）无论如何，我只知道一些 Sql，所以我不能完全确定，但是阅读为上述代码生成的 Sql 查询似乎数据提供者实际上并没有执行`numbers.Max`方法，而是以某种方式发现`numbers.Max`应该返回最大值然后继续在生成的 Sql 查询中包含对**TSQL 的内置 MAX 函数的调用**。它还将`numbers`数组保存的所有值放入 Sql 查询中。

```
 SELECT CASE
         WHEN (([Project1].[C1] = 1)
               AND ([Project1].[C1] IS NOT NULL)) THEN '0X0X'
         ELSE '0X1X'
       END                      AS [C1],
       [Extent1].[ContactID]    AS [ContactID],
       [Extent1].[FirstName]    AS [FirstName],
       [Extent1].[LastName]     AS [LastName],
       [Extent1].[Title]        AS [Title],
       [Extent1].[AddDate]      AS [AddDate],
       [Extent1].[ModifiedDate] AS [ModifiedDate],
       [Extent1].[RowVersion]   AS [RowVersion],
       CASE
         WHEN (([Project1].[C1] = 1)
               AND ([Project1].[C1] IS NOT NULL)) THEN [Project1].[CustomerTypeID]
       END                      AS [C2],
       CASE
         WHEN (([Project1].[C1] = 1)
               AND ([Project1].[C1] IS NOT NULL)) THEN [Project1].[InitialDate]
       END                      AS [C3],
       CASE
         WHEN (([Project1].[C1] = 1)
               AND ([Project1].[C1] IS NOT NULL)) THEN [Project1].[PrimaryDesintation]
       END                      AS [C4],
       CASE
         WHEN (([Project1].[C1] = 1)
               AND ([Project1].[C1] IS NOT NULL)) THEN [Project1].[SecondaryDestination]
       END                      AS [C5],
       CASE
         WHEN (([Project1].[C1] = 1)
               AND ([Project1].[C1] IS NOT NULL)) THEN [Project1].[PrimaryActivity]
       END                      AS [C6],
       CASE
         WHEN (([Project1].[C1] = 1)
               AND ([Project1].[C1] IS NOT NULL)) THEN [Project1].[SecondaryActivity]
       END                      AS [C7],
       CASE
         WHEN (([Project1].[C1] = 1)
               AND ([Project1].[C1] IS NOT NULL)) THEN [Project1].[Notes]
       END                      AS [C8],
       CASE
         WHEN (([Project1].[C1] = 1)
               AND ([Project1].[C1] IS NOT NULL)) THEN [Project1].[RowVersion]
       END                      AS [C9],
       CASE
         WHEN (([Project1].[C1] = 1)
               AND ([Project1].[C1] IS NOT NULL)) THEN [Project1].[BirthDate]
       END                      AS [C10],
       CASE
         WHEN (([Project1].[C1] = 1)
               AND ([Project1].[C1] IS NOT NULL)) THEN [Project1].[HeightInches]
       END                      AS [C11],
       CASE
         WHEN (([Project1].[C1] = 1)
               AND ([Project1].[C1] IS NOT NULL)) THEN [Project1].[WeightPounds]
       END                      AS [C12],
       CASE
         WHEN (([Project1].[C1] = 1)
               AND ([Project1].[C1] IS NOT NULL)) THEN [Project1].[DietaryRestrictions]
       END                      AS [C13]
FROM   [dbo].[Contact] AS [Extent1]
       LEFT OUTER JOIN (SELECT [Extent2].[ContactID]            AS [ContactID],
                               [Extent2].[BirthDate]            AS [BirthDate],
                               [Extent2].[HeightInches]         AS [HeightInches],
                               [Extent2].[WeightPounds]         AS [WeightPounds],
                               [Extent2].[DietaryRestrictions]  AS [DietaryRestrictions],
                               [Extent3].[CustomerTypeID]       AS [CustomerTypeID],
                               [Extent3].[InitialDate]          AS [InitialDate],
                               [Extent3].[PrimaryDesintation]   AS [PrimaryDesintation],
                               [Extent3].[SecondaryDestination] AS [SecondaryDestination],
                               [Extent3].[PrimaryActivity]      AS [PrimaryActivity],
                               [Extent3].[SecondaryActivity]    AS [SecondaryActivity],
                               [Extent3].[Notes]                AS [Notes],
                               [Extent3].[RowVersion]           AS [RowVersion],
                               cast(1 as bit)                   AS [C1]
                        FROM   [dbo].[ContactPersonalInfo] AS [Extent2]
                               INNER JOIN [dbo].[Customers] AS [Extent3]
                                 ON [Extent2].[ContactID] = [Extent3].[ContactID]) AS [Project1]
         ON [Extent1].[ContactID] = [Project1].[ContactID]
       LEFT OUTER JOIN (SELECT TOP (1) [c].[C1] AS [C1]
                        FROM   (SELECT [UnionAll3].[C1] AS [C1]
                                FROM   (SELECT [UnionAll2].[C1] AS [C1]
                                        FROM   (SELECT [UnionAll1].[C1] AS [C1]
                                                FROM   (SELECT 1 AS [C1]
                                                        FROM   (SELECT 1 AS X) AS [SingleRowTable1]
                                                        UNION ALL

                                                        SELECT 2 AS [C1]
                                                        FROM   (SELECT 1 AS X) AS [SingleRowTable2]) AS [UnionAll1]
                                                UNION ALL

                                                SELECT 3 AS [C1]
                                                FROM   (SELECT 1 AS X) AS [SingleRowTable3]) AS [UnionAll2]
                                        UNION ALL

                                        SELECT 4 AS [C1]
                                        FROM   (SELECT 1 AS X) AS [SingleRowTable4]) AS [UnionAll3]
                                UNION ALL

                                SELECT 5 AS [C1]
                                FROM   (SELECT 1 AS X) AS [SingleRowTable5]) AS [c]) AS [Limit1]
         ON 1 = 1
       LEFT OUTER JOIN (SELECT TOP (1) [c].[C1] AS [C1]
                        FROM   (SELECT [UnionAll7].[C1] AS [C1]
                                FROM   (SELECT [UnionAll6].[C1] AS [C1]
                                        FROM   (SELECT [UnionAll5].[C1] AS [C1]
                                                FROM   (SELECT 1 AS [C1]
                                                        FROM   (SELECT 1 AS X) AS [SingleRowTable6]
                                                        UNION ALL

                                                        SELECT 2 AS [C1]
                                                        FROM   (SELECT 1 AS X) AS [SingleRowTable7]) AS [UnionAll5]
                                                UNION ALL

                                                SELECT 3 AS [C1]
                                                FROM   (SELECT 1 AS X) AS [SingleRowTable8]) AS [UnionAll6]
                                        UNION ALL

                                        SELECT 4 AS [C1]
                                        FROM   (SELECT 1 AS X) AS [SingleRowTable9]) AS [UnionAll7]
                                UNION ALL

                                SELECT 5 AS [C1]
                                FROM   (SELECT 1 AS X) AS [SingleRowTable10]) AS [c]) AS [Limit2]
         ON 1 = 1
       CROSS JOIN (SELECT MAX([UnionAll12].[C1]) AS [A1]
                   FROM   (SELECT [UnionAll11].[C1] AS [C1]
                           FROM   (SELECT [UnionAll10].[C1] AS [C1]
                                   FROM   (SELECT [UnionAll9].[C1] AS [C1]
                                           FROM   (SELECT 1 AS [C1]
                                                   FROM   (SELECT 1 AS X) AS [SingleRowTable11]
                                                   UNION ALL

                                                   SELECT 2 AS [C1]
                                                   FROM   (SELECT 1 AS X) AS [SingleRowTable12]) AS [UnionAll9]
                                           UNION ALL

                                           SELECT 3 AS [C1]
                                           FROM   (SELECT 1 AS X) AS [SingleRowTable13]) AS [UnionAll10]
                                   UNION ALL

                                   SELECT 4 AS [C1]
                                   FROM   (SELECT 1 AS X) AS [SingleRowTable14]) AS [UnionAll11]
                           UNION ALL

                           SELECT 5 AS [C1]
                           FROM   (SELECT 1 AS X) AS [SingleRowTable15]) AS [UnionAll12]) AS [GroupBy1]
WHERE  [Extent1].[ContactID] IN ([GroupBy1].[A1], (CASE
                                                     WHEN ([Limit1].[C1] IS NULL) THEN 0
                                                     ELSE [Limit2].[C1]
                                                   END)) 
```

基于此，Linq2Entities 提供程序是否可能确实不执行非 Linq 和 Linq-to-Object 方法，而是为其中一些方法创建等效的 SQL 语句（而对于其他方法则抛出异常）？

第二次编辑：

好的，我按照你说的做了：

对于**b)**我创建了 Linq-to-Objects 扩展方法：

```
public static class TEST_CLASS
{
    public static int Testing<TSource>(this IEnumerable<TSource> source)
    {
        Console.WriteLine("Testing Called"); // here I've put a breakpoint
        return source.Count();
    }
}

        List<int> list = new List<int>() {1,2,3,4,5,6 };

        var contact = (from c in context.Contacts
                       where c.ContactID == list.Testing()
                       select c).First(); 
```

当我在调试模式下运行代码时，我立即得到以下异常（因此调试器在抛出异常之前不会进入测试方法）：

> System.NotSupportedException：LINQ to Entities 无法识别方法“Int32 TestingInt32”方法，并且该方法无法转换为存储表达式。

对于**c)**我创建了非 Linq 方法：

```
public class Another_TEST_CLASS
{
    public static int Testing_Again()
    {
        Console.WriteLine("Testing_Again called");// here I've put a breakpoint
        return 1000;
    }
}

        var contact = (from c in context.Contacts
                       where c.ContactID == Another_TEST_CLASS.Testing_Again()
                       select c).First(); 
```

当我在调试模式下运行代码时，我立即得到以下异常（因此调试器在抛出异常之前不会进入 Testing_Again 方法）：

> System.NotSupportedException：LINQ to Entities 无法识别方法“Int32 Testing_Again()”方法，并且此方法无法转换为存储表达式。在 System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.Default

先感谢您

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T18:27:23.073

我刚刚在[LinqPad](http://www.linqpad.net/)中尝试过，生成的 SQL 如下所示：

```
-- Region Parameters
DECLARE @p0 Int = 5
DECLARE @p1 Int = 1
-- EndRegion
SELECT [t0].[ContactID], [t0].[Name]
FROM [Contacts] AS [t0]
WHERE ([t0].[ContactID] = @p0) OR ([t0].[ContactID] = @p1) 
```

这是使用 Linq-to-Sql，但我不认为 Linq-to-Entities 会做任何不同的事情；提供者将执行 Linq-to-Objects 查询并将结果插入到表达式树中。

* * *

**编辑**

看起来 Linq-to-Entities 正在生成一个查询来评估服务器上的`numbers.Max()`and `numbers.FirstOrDefault()`。这样做似乎效率极低，感觉就像一个错误。我想不出 L2E 行为优于 L2S 行为的任何场景。

您可以通过在查询之外提取相关值来强制 L2S 行为：

```
var numbers = new int[] { 1, 2, 3, 4, 5 };

int max = numbers.Max();
int first = numbers.FirstOrDefault();

var contacts = from c in context.Contacts
   where c.ContactID == max !| c.ContactID == first
   select c; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T19:45:39.123

**编辑：**我很抱歉，这个答案适用于 Linq-To-SQL，它具有与 Linq-To-Entities 不同的数据提供者和不同的语义。

数据提供者有责任将表达式树转换为底层存储可以理解的格式，在您的情况下是 SQL，并且它将定义自己的规则。

[有关 Linq-To-LDAP 提供程序的简单实现，请参见此处](http://blogs.msdn.com/b/tommer/archive/2007/04/20/building-custom-linq-enabled-data-providers-using-iqueryable-t.aspx)

对于 Linq-Sql 数据提供程序，它知道它需要 where 子句的值。根据表达式，它通过使用 predicates 参数（在您的示例 c 中）知道谓词的哪一部分来自查询的表。等式表达式的另一端必须是作为参数传递的值或 SQL（函数、查询）。

如果值表达式的结果类型是已知的 sql 类型，并且它是从对象引用表达式（或对象引用上的方法调用）派生的，则扩展（执行）表达式并将值作为参数传递给查询。

如果表达式是直接方法引用，它将尝试将其匹配到 SQL 函数或 throw（即 this 会抛出）。

```
 where c.ContactID == Test() 
```

如果表达式结果是 IQueryable，它将继续将其转换为 Sql。

a）在您的情况下，方法 numbers.Max() 被执行并且返回值用于查询，使用自定义扩展方法对其进行测试并在其中放置调试中断。

b）这是正确的，如果您执行以下操作而不是本地声明的数字列表

```
cts = from c in context.Contacts
                   where c.ContactID == context.Numbers.Max()
                   select c; 
```

它会将其转换为 Numbers 表的子查询（因为返回类型是 IQueryable）。如果您在这种情况下使用了提供商不支持的方法，您将得到一个异常。再次测试这个使用自定义扩展方法。

c) 正确，如将字符串 StartsWith 方法转换为 SQL 之类的

# dns - 客户将他们的域指向我们的固定 IP（网络服务器）。如何通过 CNAME 重新路由？

> ID：13145003
> 
> 赞同：0
> 
> 时间：2012-10-30T18:00:54.733
> 
> 标签：dns, cname, a-records

我们有一个可供来自世界各地的客户使用的网络平台。我们还提供白标解决方案，**客户可以使用他们自己的域**来使用我们的服务。

许多人通过以下方式指向自己的域地址：

> a) 将名称服务器设置为我们的 - 然后我们完成其余的工作（将其指向我们的 IP）
> 
> b）设置**A记录直接指向我们的固定IP地址**XXXX（这个IP属于我们的应用程序运行的虚拟apache服务器）。

仅供参考：我们拥有对 DNS 的完全访问权限。

我们很快就会**迁移**到 Amazon Web Services (Elastic Beanstalk)，因此正在准备迁移。在转移过程中，我们当然希望尽可能少的停机时间。要尽快显示到新服务器地址的域。

客户 a) 易于处理。我们只需将 CNAME 设置为指向 Elastic LoadBalancer（ELB，因此没有给出固定 IP，因此 CNAME），它们将被迅速重定向。

**客户 b)**虽然看起来更复杂。**有没有办法重新路由到 CNAME -> ELB？**

**例子：**

> 给定：客户 b) 将他的域 sub.customer.com 直接指向我们的 IP XXXX
> 
> 我们做了什么：在 DNS 中，我们为“customer.com”打开了一个新的托管区域，并为 sub.customer.com 放置了 CNAME -> ELB。

这不起作用。我们可以做些什么来让 sub.customer.com 在不更改 URL 的情况下重定向到 CNAME (ELB)？也许使用 .htaccess 或其他 DNS 修改？

* * *

PS：我们这样做是因为我们可以预见很多客户需要很长时间才能从“A记录->旧IP”更改为“CNAME->新ELB”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:06:52.757

如果客户控制 A 记录，则客户必须更改 A 记录。在这种情况下，客户很可能也控制上游的 NS 记录，因此您在 DNS 服务器上所做的任何事情都不会对客户的实际域产生任何影响。您可以使用 ipf（Debian 系列）或 iptables（Red Hat 系列）等工具在 IP 级别进行重定向，但您必须非常小心如何实现它。

# php - 查找和替换的 SQL 查询不起作用

> ID：13145006
> 
> 赞同：2
> 
> 时间：2012-10-30T18:01:07.750
> 
> 标签：php, mysql, sql, database, phpmyadmin

我想使用 php my admin 在我的 sql 数据库中运行查找和替换查询。问题是我要查找和替换的文本中有一些 " 字符，这在我运行命令时会导致问题...

我想搜索`align="right">`并替换它`align="left">`

我确实运行了这个命令，但它不起作用：

```
UPDATE `ps_product_lang` SET `description` = replace(`description`,"align="right">","align="left">"); 
```

所以我想知道这个查询应该是什么样子，因为有 " 字符？如何搜索更长的文本并使用 sql 查询替换它？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T18:04:01.973

替换字符串应作为字符串文字用单引号引起来：

```
UPDATE `ps_product_lang` SET `description` = replace(`description`, 'align="right">', 'align="left">'); 
```

请注意，仅当您确定`description`列中的所有字符串都完全正确时，此解决方案才有用`align="right">`。例如，如果`align='right'>` 除了上面的双引号属性之外，您还有一些单引号属性，您将需要做额外的工作。

此外，如果这是您正在执行替换的 HTML 标记，则完全有可能在属性`>`之后不会立即关闭。`align`在这种情况下，您确实需要将每一行加载到 HTML 解析器中以更改属性。

# excel - Excel，VBA Vlookup，多行返回

> ID：13145011
> 
> 赞同：0
> 
> 时间：2012-10-30T18:01:18.910
> 
> 标签：excel, vba, vlookup

对VBA非常陌生，所以请原谅我的无知。

您将如何更改下面的代码以将结果返回到行而不是字符串中？

提前致谢....

数据

```
Acct No   CropType
-------   ---------
0001      Grain
0001      OilSeed
0001      Hay
0002      Grain 
```

功能

```
=vlookupall("0001", A:A, 1, " ") 
```

这是代码：

```
Function VLookupAll(ByVal lookup_value As String, _
                   ByVal lookup_column As range, _
                   ByVal return_value_column As Long, _
                   Optional seperator As String = ", ") As String

Application.ScreenUpdating = False
Dim i As Long
Dim result As String

For i = 1 To lookup_column.Rows.count
   If Len(lookup_column(i, 1).text) <> 0 Then
        If lookup_column(i, 1).text = lookup_value Then
            result = result & (lookup_column(i).offset(0, return_value_column).text &     seperator)
       End If
   End If
 Next

If Len(result) <> 0 Then
result = Left(result, Len(result) - Len(seperator))
End If

VLookupAll = result
Application.ScreenUpdating = True

 End FunctionNotes: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T22:58:14.430

试试这个：

```
Option Explicit

Function VLookupAll(ByVal lookup_value As String, _
                    ByVal lookup_column As Range, _
                    ByVal return_value_column As Long) As Variant

    Application.ScreenUpdating = False
    Dim i As Long, _
        j As Long
    Dim result() As Variant

    ReDim result(1 To Application.Caller.Rows.Count, 1 To 1) As Variant
    j = LBound(result)

    For i = 1 To lookup_column.Rows.Count
        If Len(lookup_column(i, 1).Text) <> 0 Then
            If lookup_column(i, 1).Text = lookup_value Then
                If j > UBound(result, 1) Then
                    Debug.Print "More rows required for output!"
                    Exit For
                End If
                result(j, 1) = lookup_column(i).Offset(0, return_value_column).Text
                j = j + 1
            End If
         End If
    Next

    VLookupAll = result
    Application.ScreenUpdating = True

End Function 
```

现在，在工作表上输入公式时，选择三个单元格，一个在另一个之上，然后键入以下内容：

```
=vlookupall("0001",$A:$A, 1, " ") 
```

然后按 ctrl+shift+enter 输入公式。

请注意，如果您选择的输出行太少，您的即时窗口（在 vb 编辑器中按 ctrl+g）将显示消息“输出需要更多行！”。我把它作为一个消息框，但是自动计算它有点疯狂..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-15T06:05:49.703

如何像数组一样使用上面的代码？

=VLookupAll(Main!$B$1,'Tes'!$A1:$A$1500,{1,2})

# python - 将 HTML 表单链接到 Django 字段

> ID：13145013
> 
> 赞同：0
> 
> 时间：2012-10-30T18:01:25.730
> 
> 标签：python, html, django, forms

我是 HTML 新手，我的问题是我无法将表单字段链接到我尝试链接的 form.field。我必须手动编写 HTML 表单，而不是简单地使用 {{form.field}}，因为我使用的是带有 JQuery 的日期选择器。

```
<div class="fieldWrapper">
  {{ form.valida_desde.errors }}
    <label for="id_valida_desde">Válida desde:</label>
    <input  type="text" data-date-format="mm/dd/yy" id="valida_desde"> 
</div> 
```

我可以通过执行以下操作轻松呈现此必填字段：

```
{{ form.valida_desde.errors }}
{{ form.valida_desde }} 
```

但这不适用于日期选择器。那么，我该怎么做才能使第一个表单将数据保存到 form.valida_desde 字段，这是一个 DateField BTW。

底部需要的Jquery，它工作正常

```
<script>
$(function() {
  $( "#valida_desde" ).datepicker();
});
</script> 
```

编辑：

实际上很有趣，因为我在寻找 3 个多小时后才找到答案。

```
 <div class="fieldWrapper">
      {{ form.valida_desde.errors }}
        <label for="id_valida_desde">Válida desde:</label>
        <input  type="text" name="valida_desde" data-date-format="mm/dd/yy" id="valida_desde"> 
    </div> 
```

添加了 name 属性，我做到了，但尝试了 form.valida_desde 甚至 {{ form.valida_desde }}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:09:10.010

实际上很有趣，因为我在寻找 3 个多小时后才找到答案。

```
<div class="fieldWrapper">
  {{ form.valida_desde.errors }}
    <label for="id_valida_desde">Válida desde:</label>
    <input  type="text" name="valida_desde" data-date-format="mm/dd/yy" id="valida_desde"> 
</div> 
```

添加了 name 属性，我做到了，但尝试了 form.valida_desde 甚至 {{ form.valida_desde }}

# hibernate - NoClassDefFoundError: org/hibernate/cfg/Configuration

> ID：13145026
> 
> 赞同：2
> 
> 时间：2012-10-30T18:02:09.737
> 
> 标签：hibernate, gwt, tomcat, jetty

我正在使用 Hibernate 在我的 Google Web Toolkit 项目中实现远程过程调用。当我从 Eclipse 作为谷歌“Web 应用程序”运行它时，在调用服务时（当我按下网页上的按钮时）出现 NoClassDefFoundError 异常：

```
Starting Jetty on port 8888
   [WARN] Exception while dispatching incoming RPC call
com.google.gwt.user.server.rpc.UnexpectedException: Service method 'public abstract java.lang.String edu.mit.ll.irbenchmark.client.MetricDataTableService.getDataString(edu.mit.ll.irbenchmark.EvaluationMetric)' threw an unexpected exception: java.lang.NoClassDefFoundError: org/hibernate/cfg/Configuration
    at com.google.gwt.user.server.rpc.RPC.encodeResponseForFailure(RPC.java:385)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:588)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208) 
```

但是当我“GWT编译”项目并将目录“war”的内容复制到tomcat6时，它完美地工作！

以下 jar 在我的 war/WEB-INF/lib 目录中：

```
antlr-3.4-complete.jar
commons-collections3-3.2.1.jar
dom4j.jar
gwt-servlet.jar
hibernate-commons-annotations-3.2.0.Final.jar
hibernate-core-3.6.9.Final.jar
hibernate-jpa-2.0-api-1.0.1.Final.jar
IRBenchmarker.jar
javassist-3.12.0.GA.jar
jta-1.1.jar
log4j-1.2-1.2.16.jar
mysql-connector-java-5.1.16.jar
slf4j-api-1.6.4.jar
slf4j-log4j12-1.6.4.jar 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:18:11.293

将库放入 WEB-INF/lib 对 Eclipse 来说是不够的。您还需要将它添加到项目的类路径中（右键单击 jar，然后选择构建路径 > 添加到构建路径）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T20:28:46.793

右键单击您的项目并转到属性。然后转到 Google-> Web 应用程序。确保选中“此项目具有 WAR 目录”，并且您的 war 文件夹位于复选框下方。既然你在那里，看看 Google-> Web Tooklit 并确保选中“使用 Google Web Toolkit”并寻址正确的库不会有什么坏处。

# android - Android：对两种算法进行基准测试

> ID：13145027
> 
> 赞同：2
> 
> 时间：2012-10-30T18:02:12.940
> 
> 标签：android, algorithm, benchmarking, microbenchmark

我已经为同一个问题实现了两种算法，并想找出哪种算法是最好的专业方法。

基本思想是：

```
final static int LOOP_COUNT = 500;
long totaTime = 0;

worm-up();
for(int i =0, i<LOOP_COUNT, i++)
{
    long startTime = System.currentTimeMillis();
    myMethod();
    long endTime= System.currentTimeMillis();
    totalTime += endTime - startTime;
 }

 return totalTime / LOOP_COUNT; 
```

并对这两种算法都这样做。

但：

*   我怎样才能实现，android系统不会在后台进行任何系统计算并歪曲数据

*   有没有办法我也可以比较使用的内存，两种方法都需要吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:16:33.923

如果您想要专业的统计和相关结果，并且想要最小化 Android 后台进程的影响，您将需要多次运行您的算法并比较平均值。这样，由于大数定律，您的结果将是正确的。

多少次取决于执行时间的标准偏差以及您想要的确定程度。如果您熟悉一些基本的统计知识，您可以使用一些基本公式确定您的样本量，例如，如果您的样本分布是正态分布的，您可以运行 t 检验来比较两种算法的平均值。这会自动包含您希望最小化后台进程的影响的事实。它们会随机出现，因此经过多次迭代，Android的影响将被抵消。

还要看看垃圾收集器，如果你在算法执行过程中创建了很多对象，它会影响你的结果，但它应该会影响算法的实际使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:19:56.233

您可以尝试分析您的代码并找出时间复杂度。如果你有一个嵌套循环：

```
for(int i = 0; i< max; i++){
  for(int j = 0; j< max; j++){
      c = i + j;
   }
 } 
```

这将具有时间复杂度 O(n^2)。空间复杂度为 O(1)

另一个例子是这样的：

```
for(int i = 0; i< max; i++){
   list[i] = "hello";
}

for(int j = 0; j< max; j++){
   list2[j] = "hello";
} 
```

这将具有与 O(n) 相同的 O(2n) 的时间复杂度和 O(2n) 的 O(n) 的空间复杂度。

后者有更好的运行时间，但使用更多的内存。

# sql - sql 字符串中的 NCHAR(916)

> ID：13145028
> 
> 赞同：0
> 
> 时间：2012-10-30T18:02:14.197
> 
> 标签：sql, tsql

我需要将 nchar 字符 Δ 放在这样的字符串中：

```
SET @ANALISE1 =

 'SELECT 
  * 
  FROM 
  (
    SELECT 
    ''*'' Codigo,
    ''Total'' Descricao,
    SUM(#DADOS_VISTA_PRODUTO.[Mês||Volume]) [Mês||'+@MESATUAL+'Ton],
    SUM(#DADOS_VISTA_PRODUTO.[Mês||Mês Anterior Volume]) [Mês||'+ @MESANTERIOR +' Ton],
    (((SUM(#DADOS_VISTA_PRODUTO.[Mês||Volume])/SUM(#DADOS_VISTA_PRODUTO.[Mês||Mês Anterior Volume])) -1) * 100)
    [Mês||'+ **NCHAR(916)**+'%A]
  '

EXEC (@ANALISE1) 
```

但它显示为一个问号。有谁知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T18:48:41.753

您已声明`@ANALISE1`为[`varchar`](http://msdn.microsoft.com/en-us/library/ms176089.aspx?ppud=4). 将其更改[`nvarchar`](http://msdn.microsoft.com/en-us/library/ms186939.aspx)为处理 unicode 字符。

[SQL小提琴](http://sqlfiddle.com/#!6/d41d8/708/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:07:06.323

您可能正在使用 ascii，而您粘贴的三角形是 unicode

[您可以在此处](http://en.wikipedia.org/wiki/Character_encoding)阅读有关字符编码的更多信息

# unit-testing - 在动态创建的 DLL 上运行单元测试

> ID：13145030
> 
> 赞同：1
> 
> 时间：2012-10-30T18:02:29.203
> 
> 标签：unit-testing, dynamic, reflection, nunit

我正在考虑如何实现这一点，似乎我的知识太贫乏而无法理解实现。

我有一个将源代码编译为 DLL 的代码。

然后我需要以某种方式在这个 Dll 上运行单元测试，并检查里面的 3-4 个方法。

我正在尝试以这种方式运行单元测试。

```
CompilerResults compileResults = codeProvider.CompileAssemblyFromSource(compilerParameters, new string[] { sourceCode });

            Assembly myAssembly = compileResults.CompiledAssembly;

            TestPackage testPackage = new TestPackage(@"TestingProject.dll");
            testPackage.Assemblies.Add(myAssembly);

            RemoteTestRunner remoteTestRunner = new RemoteTestRunner();
            remoteTestRunner.Load(testPackage);
            TestResult testResult = remoteTestRunner.Run(new NullListener(),TestFilter.Empty,false,LoggingThreshold.All); 
```

这例如测试

```
 [Test]
    public void AddTest(IDynamicScript s)
    {            
        Assert.AreEqual(10, s.Add(5,5));
        Assert.AreNotEqual(10,s.Add(4,5));

    } 
```

由于 Assembly 是动态编译的，我无法将它引用到单元测试项目中，并且它不会编译，请就如何实现这一点提出任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T22:29:18.167

经过一些修改后，您的代码可以正常工作。这些是必需的更改：

*   测试代码需要包装在具有适当命名空间导入的类中，您不能使用 C# 编译器编译独立方法
*   您需要通知编译器您正在编译的代码的程序集引用，在这种情况下，我提供了`nunit.framework.dll`程序集的路径，该路径是从主 AppDomain 中加载的副本的位置获取的，但您也可以引用它从文件系统而不加载它。通常您还需要提供包含您正在测试的代码的程序集的路径
*   类的构造函数`TestPackage`在其构造函数中采用绝对路径，在这种情况下，我提供了生成程序集的位置

这是带有更正的代码：

```
var sourceCode = @"
using NUnit.Framework;

public class Fixture
{
    [Test]
    public void AddTest()
    {            
        Assert.AreEqual(10, 5+5);
    }
}";

var provider = new CSharpCodeProvider();

CompilerResults compileResults = provider.CompileAssemblyFromSource(
    new CompilerParameters(new[]{ typeof(TestAttribute).Assembly.Location }), 
    new[]{ sourceCode });

var assembly = compileResults.CompiledAssembly;
var package = new TestPackage(assembly.Location);
var runner = new RemoteTestRunner();

runner.Load(package);

var result = runner.Run(new NullListener(), 
                        TestFilter.Empty, 
                        false, 
                        LoggingThreshold.All); 
```

# asp.net-mvc-4 - 在 SimpleMembership 中编辑用户配置文件数据

> ID：13145037
> 
> 赞同：1
> 
> 时间：2012-10-30T18:02:56.310
> 
> 标签：asp.net-mvc-4, edit, simplemembership

我在 MVC4 Web 应用程序中使用 SimpleMembership。我不知道如何编辑个人资料信息。我想我可以像你做任何其他桌子一样做到这一点。

```
 [HttpPost]
        public ActionResult EditUser(UserProfile user)
        {
            if (ModelState.IsValid)
            {
                udb.Entry(user).State = EntityState.Modified;
                udb.SaveChanges();
                return RedirectToAction("Index");
            } 
```

但是我收到一条错误消息，指出当前上下文中不存在实体状态。我的上下文在控制器顶部定义如下。

```
private UsersContext udb = new UsersContext(); 
```

我可以找到大量有关访问配置文件数据的参考资料，但没有找到用于编辑数据的资料。如何将编辑后的 ​​UserProfile 数据保存回数据库？

编辑：我能够解决 entityState 错误——我必须包括 system.data 和 system.data.entity。但是现在当我运行时，我在编辑时收到一个错误，上面写着意外修改的行数（0）。并指向 udb.SaveChanges() 行。仍然无法弄清楚如何修改 UserProfile 数据元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T00:58:24.537

简单的回答。我需要在我的视图中设置模型的所有字段。我只允许用户更改 6 个中的 4 个，因此没有设置两个。

我认为当您将模型传递给视图时，如果未在视图中设置它们，视图会将相同的字段值传递给操作。例如：如果我在视图中设置 FirstName 而不是 UserName，则发送到视图的原始 UserName 将被传递给模型。情况似乎并非如此。对于模型中的所有项目，我不允许它们在视图中更改，我必须设置隐藏字段来设置字段，以便发送完整的模型。

设置单个字段可能会更好，但我不确定如何做到这一点，这不是问题所在。

# java - 当我尝试在地图叠加层上放置标记时，应用程序强制关闭

> ID：13145039
> 
> 赞同：0
> 
> 时间：2012-10-30T18:03:05.560
> 
> 标签：java, android, google-maps, google-maps-markers

在这个应用程序中，我为用户启用了长按提示的选项。然后，此警报有 2 个可供用户选择的按钮。第一个允许用户在地图上长按的位置放置一个标记，第二个允许用户获得长按位置的地址。地址按钮有效，但标记按钮强制关闭我的应用程序。我不确定我做错了什么。它可能是愚蠢的。

这是我的主要课程中的方法：

```
 @Override
public boolean dispatchTouchEvent(MotionEvent ev) {
    /*
     * We want to capture the place the user long pressed on the map and add
     * a marker (pin) on the map at that lat/long. This solution: 1\. Allows
     * you to set the time threshold for what constitutes a long press 2.
     * Doesn't get fooled by scrolling, multi-touch, or non-multi-touch
     * events
     * 
     * Thank you Roger Kind Kristiansen for the main idea
     */

    // get the action from the MotionEvent: down, move, or up
    int actionType = ev.getAction();

    if (actionType == MotionEvent.ACTION_DOWN) {
        // user pressed the button down so let's initialize the main
        // variables that we care about:
        // later on when the "Action Up" event fires, the "DownTime" should
        // match the "startTimeForLongClick" that we set here
        // the coordinate on the screen should not change much during the
        // long press

        startTimeForLongClick = ev.getEventTime();
        xScreenCoordinateForLongClick = ev.getX();
        yScreenCoordinateForLongClick = ev.getY();

    } else if (actionType == MotionEvent.ACTION_MOVE) {
        // For non-long press actions, the move action can happen a lot
        // between ACTION_DOWN and ACTION_UP
        if (ev.getPointerCount() > 1) {
            // easiest way to detect a multi-touch even is if the pointer
            // count is greater than 1
            // next thing to look at is if the x and y coordinates of the
            // person's finger change.
            startTimeForLongClick = 0; // instead of a timer, just reset
                                        // this class variable and in our
                                        // ACTION_UP event, the DownTime
                                        // value will not match and so we
                                        // can reset.
        } else {
            // I know that I am getting to the same action as above,
            // startTimeForLongClick=0, but I want the processor
            // to quickly skip over this step if it detects the pointer
            // count > 1 above
            float xmove = ev.getX(); // where is their finger now?
            float ymove = ev.getY();
            // these next four values allow you set a tiny box around their
            // finger in case
            // they don't perfectly keep their finger still on a long click.
            xlow = xScreenCoordinateForLongClick - xtolerance;
            xhigh = xScreenCoordinateForLongClick + xtolerance;
            ylow = yScreenCoordinateForLongClick - ytolerance;
            yhigh = yScreenCoordinateForLongClick + ytolerance;
            if ((xmove < xlow || xmove > xhigh)
                    || (ymove < ylow || ymove > yhigh)) {
                // out of the range of an acceptable long press, reset the
                // whole process
                startTimeForLongClick = 0;

            }

        }

    } else if (actionType == MotionEvent.ACTION_UP) {
        // determine if this was a long click:
        long eventTime = ev.getEventTime();
        long downTime = ev.getDownTime(); // this value will match the
                                            // startTimeForLongClick
                                            // variable as long as we didn't
                                            // reset the
                                            // startTimeForLongClick
                                            // variable because we detected
                                            // nonsense that invalidated a
                                            // long press in the ACTION_MOVE
                                            // block

        // make sure the start time for the original "down event" is the
        // same as this event's "downTime"
        if (startTimeForLongClick == downTime) {
            // see if the event time minus the start time is within the
            // threshold
            if ((eventTime - startTimeForLongClick) > minMillisecondThresholdForLongClick) {
                // make sure we are at the same spot where we started the
                // long click
                float xup = ev.getX();
                float yup = ev.getY();
                // I don't want the overhead of a function call:
                xlow = xScreenCoordinateForLongClick - xtolerance;
                xhigh = xScreenCoordinateForLongClick + xtolerance;
                ylow = yScreenCoordinateForLongClick - ytolerance;
                yhigh = yScreenCoordinateForLongClick + ytolerance;
                if ((xup > xlow && xup < xhigh)
                        && (yup > ylow && yup < yhigh)) {

                    // **** safe to process your code for an actual long
                    // press ****
                    // comment out these next rows after you confirm in
                    // logcat that the long press works
                    long totaltime = eventTime - startTimeForLongClick;
                    String strtotaltime = Long.toString(totaltime);
                    Log.d("long press detected: ", strtotaltime);
                    // Below is code from my touchy class

                    x = (int) ev.getX();
                    y = (int) ev.getY();
                    touchPoint = mapView.getProjection().fromPixels(x, y);

                    Builder alert = new AlertDialog.Builder(Map.this);
                    alert.setTitle("Pick an option.");
                    alert.setNeutralButton("Place a marker",
                            new DialogInterface.OnClickListener() {

                                public void onClick(DialogInterface dialog,
                                        int which) {

                                    OverlayItem overlayItem = new OverlayItem(
                                            touchPoint, "What's up", "2nd String");
                                    Mark custom = new Mark(d, Map.this);
                                    custom.dropMarker(overlayItem);
                                    mapoverlays.add(custom);

                                }
                            });
                    alert.setPositiveButton("Get Address",
                            new DialogInterface.OnClickListener() {

                                public void onClick(DialogInterface dialog,
                                        int which) {

                                    Geocoder geocoder = new Geocoder(
                                            getBaseContext(), Locale.getDefault());

                                    try {

                                        List<Address> address = geocoder.getFromLocation(
                                                touchPoint.getLatitudeE6() / 1E6,
                                                touchPoint.getLongitudeE6() / 1E6,
                                                1);
                                        if (address.size() > 0) {
                                            String display = "";
                                            for (int i = 0; i < address.get(0)
                                                    .getMaxAddressLineIndex(); i++) {

                                                display += address.get(0)
                                                        .getAddressLine(i) + "\n";
                                            }

                                            Toast t = Toast.makeText(
                                                    getBaseContext(), display,
                                                    Toast.LENGTH_LONG);
                                            t.show();
                                        }
                                    } catch (IOException e) {
                                        // TODO Auto-generated catch block
                                        e.printStackTrace();
                                    } finally {

                                    }

                                }
                            });

                    alert.show();

                }

            }
        }

    }

    return super.dispatchTouchEvent(ev);
} 
```

这是我的马克课：

```
 package com.almyz125.stamp.overlay;

 import java.util.ArrayList;

 import android.content.Context;
 import android.graphics.drawable.Drawable;

 import com.google.android.maps.ItemizedOverlay;
 import com.google.android.maps.OverlayItem;

  public class Mark extends ItemizedOverlay<OverlayItem>{

private ArrayList<OverlayItem> markers = new ArrayList<OverlayItem>();
private Context c;

public Mark(Drawable defaultMarker) {
    super(boundCenter(defaultMarker));
    // TODO Auto-generated constructor stub
}

public Mark(Drawable m, Context context){
    this(m);
    c = context;

}

@Override
protected OverlayItem createItem(int i) {
    // TODO Auto-generated method stub
    return markers.get(i);
}

@Override
public int size() {
    // TODO Auto-generated method stub
    return markers.size();
}

public void dropMarker(OverlayItem item){
    markers.add(item);
    this.populate();
}

} 
```

当应用程序遇到 FC 时，这是我的 logcat：

```
 10-30 13:51:25.548: W/dalvikvm(17616): threadid=1: thread exiting with uncaught       exception (group=0x40dd11f8)
 10-30 13:51:25.548: E/AndroidRuntime(17616): FATAL EXCEPTION: main
 10-30 13:51:25.548: E/AndroidRuntime(17616): java.lang.NullPointerException
 10-30 13:51:25.548: E/AndroidRuntime(17616):   at com.google.android.maps.ItemizedOverlay.boundCenter(ItemizedOverlay.java:173)
 10-30 13:51:25.548: E/AndroidRuntime(17616):   at com.almyz125.stamp.overlay.Mark. <init>(Mark.java:19)
 10-30 13:51:25.548: E/AndroidRuntime(17616):   at com.almyz125.stamp.overlay.Mark.<init>(Mark.java:24)
 10-30 13:51:25.548: E/AndroidRuntime(17616):   at com.almyz125.stamp.Map$2.onClick(Map.java:255)
 10-30 13:51:25.548: E/AndroidRuntime(17616):   at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:167)
 10-30 13:51:25.548: E/AndroidRuntime(17616):   at android.os.Handler.dispatchMessage(Handler.java:99)
 10-30 13:51:25.548: E/AndroidRuntime(17616):   at android.os.Looper.loop(Looper.java:137)
 10-30 13:51:25.548: E/AndroidRuntime(17616):   at android.app.ActivityThread.main(ActivityThread.java:4499)
 10-30 13:51:25.548: E/AndroidRuntime(17616):   at java.lang.reflect.Method.invokeNative(Native Method)
 10-30 13:51:25.548: E/AndroidRuntime(17616):   at java.lang.reflect.Method.invoke(Method.java:511)
 10-30 13:51:25.548: E/AndroidRuntime(17616):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:794)
 10-30 13:51:25.548: E/AndroidRuntime(17616):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:561)
 10-30 13:51:25.548: E/AndroidRuntime(17616):   at dalvik.system.NativeStart.main(Native Method) 
```

如果我应该发布更多代码，请告诉我，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T19:53:36.660

看起来您传递给 Mark 构造函数的 drawable d 是 null

# hibernate - JPA / Hibernate 删除“子”实体

> ID：13145045
> 
> 赞同：2
> 
> 时间：2012-10-30T18:03:50.387
> 
> 标签：hibernate, jpa

我有两个实体类*A*和*B*，它们分别以双向一对多关系存在。

**A.java：**

```
@OneToMany(cascade = CascadeType.ALL, mappedBy = "aId",
           fetch=FetchType.EAGER, orphanRemoval=true)
private Set<B> bCollection = new LinkedHashSet<B>(); 
```

**B.java**

```
 @JoinColumn(name = "A_ID", referencedColumnName = "ID", nullable=false)
  @ManyToOne(optional = false)   
  private A aId; 
```

在一个简单的控制台应用程序中，我从数据库中获取了一个特定*的 A*行并尝试删除其详细信息*B*行之一（随机），但**JPA/Hibernate**不仅删除了该行 - 它甚至不发出任何**DELETE**语句数据库。*删除B*行的唯一方法是从**A.java的集合 (** **LinkedHashSet** ) 中删除相应的实体。所以，虽然我有一个解决方法，但我想了解为什么下面的代码会失败，并且也会悄悄地失败！

 **```
public static void main(String[] args) {
    EntityManagerFactory entityManagerFactory =  Persistence.createEntityManagerFactory("testjpa");
    EntityManager em = entityManagerFactory.createEntityManager();
    EntityTransaction entityTransaction = em.getTransaction();
    entityTransaction.begin();
    A a = em.find(A.class, 1);
    B b = getARandomChildOfA(a);
    em.remove(em.merge(b));     // simple em.remove(b) doesn't work either
    entityTransaction.commit();
    em.close();
    entityManagerFactory.close();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T21:54:46.593

JPA 不会为您管理关系，因此当您在 b 上调用 remove 时，a 仍然具有对它的引用。由于引用设置了级联持久/合并，它会导致 b 在上下文中复活，撤消删除。

您必须维护引用以使您的模型与数据库中所需的内容保持同步。将要删除的对象的引用清空并设置回指针是一种很好的做法，除非您确定可以处理诸如此类的潜在不一致。**

# ios - iOS 上的 HLS AVPlayer - 回归直播

> ID：13145048
> 
> 赞同：7
> 
> 时间：2012-10-30T18:04:05.820
> 
> 标签：ios, live, avplayer, http-live-streaming

我有一个 AVPlayer 正在流式传输实时 HLS 流。

当用户对应用程序进行多任务处理时，我看到播放速率下降到 0.0（暂停），当用户回来时它返回到 1.0（播放），但从暂停点开始播放。

在不完全重新启动流的情况下强制播放器恢复活动的最佳方法是什么？是否有处理最接近实时时间参数的 seekToTime 方法？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-15T13:43:24.987

我用：

```
 double time = MAXFLOAT;
 [player seekToTime: CMTimeMakeWithSeconds(time, NSEC_PER_SEC)]; 
```

在我的应用程序中运行良好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-19T02:05:38.793

假设 player 是一个 AVPlayer 实例：

```
CMTimeRange seekableRange = [player.currentItem.seekableTimeRanges.lastObject CMTimeRangeValue];
CGFloat seekableStart = CMTimeGetSeconds(seekableRange.start);
CGFloat seekableDuration = CMTimeGetSeconds(seekableRange.duration);
CGFloat livePosition = seekableStart + seekableDuration;

[player seekToTime:CMTimeMake(livePosition, 1)]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-01-09T16:09:15.170

[Igor Kulagin](https://stackoverflow.com/a/13892727/7641654)的 Swift 版本回答：

```
player.seek(to: kCMTimePositiveInfinity)
player.play() 
```

在任何条件下都能完美工作。其他解决方案给了我`NaN`计算`livePosition`值的`{INVALID}`错误，或者直接使用`CMTime`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-23T05:02:23.807

斯威夫特 3.0 版本

```
public func resumeLive() {
    guard let livePosition = player.currentItem?.seekableTimeRanges.last as? CMTimeRange else {
        return
    }
    player.seek(to:CMTimeRangeGetEnd(livePosition))
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-30T20:45:16.207

斯威夫特 4 版本：

```
if let seekableRange = player.currentItem?.seekableTimeRanges.last?.timeRangeValue {
    let seekableStart = seekableRange.start
    let seekableDuration = seekableRange.duration
    let livePosition = seekableStart + seekableDuration

    player.seek(to: livePosition, completionHandler: { [weak self] _ in
        self?.player.play()
    })
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-29T00:36:17.567

快速版本的 Karim Mourra 的回答：

```
let seekableRanges = player.currentItem!.seekableTimeRanges
guard seekableRanges.count > 0 else {
  return
}

let range = seekableRanges.last!.CMTimeRangeValue
let livePosition = range.start + range.duration

let minus = CMTimeMakeWithSeconds(Float64(timeOffset), Int32(NSEC_PER_SEC))
let time = livePosition - minus

player.seekToTime(time) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-30T18:40:52.970

`CMTimeRange`如果您使用 Apple 的操作函数，则无需转换为浮点数：

```
NSValue *value = player.currentItem.seekableTimeRanges.lastObject;
if (value) {
    CMTimeRange seekableRange = [value CMTimeRangeValue];
    CMTime latestTime = CMTimeRangeGetEnd(seekableRange);
    [player seekToTime:latestTime];
} else {
    // there are no seekable time ranges
} 
```

编辑：请在下面支持 Fabian 的评论

# c# - 如何在 Visual Studio 中引用工作区目录

> ID：13145049
> 
> 赞同：0
> 
> 时间：2012-10-30T18:04:12.197
> 
> 标签：c#, visual-studio-2010

我正在使用 Visual Studio 2008，并且在#debug 模式下我有一些我想参考的文件。如何获取工作区的目录，这样我就不必每次在不同的计算机上手动更改它？

例如，当我在工作时，我的工作空间在 c:\work2 中，当我在家时，它在 d:\work 中。

这不是实时产品的问题，但是当我更改计算机或其他用途时加载项目，因为文件位于每个工作区的不同目录中。

谢谢！爱罗克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:13:53.987

将测试文件（XML、电子表格等）添加为“资源”。[如何将资源添加到您的项目](http://msdn.microsoft.com/en-us/library/7k989cfy%28v=vs.80%29.aspx)

然后，在您的测试文件中，您可以使用相对地址来访问这些文件。

```
private const String = "./testFile1.xml"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:15:02.570

您可以使用一些[预构建](http://geekswithblogs.net/dchestnutt/archive/2006/05/30/80113.aspx)命令来更改目录。

# c# - 如何加载模型并将其传递给 ascx 控件？

> ID：13145050
> 
> 赞同：0
> 
> 时间：2012-10-30T18:04:16.113
> 
> 标签：c#, asp.net, winforms, .net-3.5

我有一个nestedGridTemplate，其中包含一个列表对象。

```
 this.Gridparent.MasterTableView.NestedViewTemplate = new Custom14NestedTemplate(this.model.Material.First()); 
```

这叫我的课`public class Custom14Template`。

这个类调用：

```
 public void InstantiateIn(System.Web.UI.Control container)
    {
        var myPage = new Page();
        Control c = myPage.LoadControl("~/Custom14/Templates/View.ascx");
        container.Controls.Add(c);

        var x = new Label();
        x.Text = string.Format("qty : {0}.<br />", this.MyMaterial.Quantity);
        container.Controls.Add(x);
    } 
```

现在，我的 ascx 只包含这个：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="View.ascx.cs" Inherits="*snip*.Templates.View" %>

hello there 
```

一切都正确显示

```
  [网格开始]
  [第 1 项：扩展]
     你好，数量：23。
  [/项目 1]
  [第 2 项 /]
  [第 3 项 /]
  [/网格]

```

我想将我的对象传递给我的 ASCX，从那里使用...... （Asp.Net MVC）的*旧*等价物构建我的 html 显示。`<%= html.EditorFor() %>`而不是创建像我的标签这样的元素并将它们添加到容器中（在 c# 中构建 html 感觉很痛苦）。那可行吗？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:26:23.207

我根据我的需要调整[了这个答案（没有](https://stackoverflow.com/questions/10246082/transfer-value-to-dynamically-loaded-web-user-control)*ICustomControl*）：

调用文件包含以下内容：

```
 public void InstantiateIn(System.Web.UI.Control container)
    {

       Page myPage = new Page();
       Control userControl = myPage.LoadControl("~/Templates/Edit.ascx");

       //this is the important part
       if (userControl is Edit)
       {
           Edit customControl = userControl as Edit;
           customControl.MyObject= this.PersistedObject;
       }

        container.Controls.Add(userControl);
    } 
```

.ascx.cs 也做了一些修改：

```
public partial class Edit : System.Web.UI.UserControl
{

    public Produit MyObject { get; set; }

    protected void Page_Load(object sender, EventArgs e)
    {
        this.product.Text = MyObject.ProductName;
        this.Production.Text = MyObject.Production.ToString();

    }
} 
```

而 ascx 只包含两个纯文本，正则 asp:textbox（ID= 产品和生产）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-21T01:03:57.060

[在http://asp.net-tutorials.com/user-controls/using/](http://asp.net-tutorials.com/user-controls/using/) “动态加载”尝试解决方案。在用户控件中传递变量信息或设置属性的简单解决方案

# sql - t sql union vs join order（效率）

> ID：13145051
> 
> 赞同：-6
> 
> 时间：2012-10-30T18:04:25.363
> 
> 标签：sql, sql-server

我有一个相对简单的问题。

我有数据集 A 和数据集 B，它们的结构都相同。

最终结果将是数据集 A 和数据集 B 的联合，我们将其称为数据集 C。

但在最终版本之前，需要通过加入数据集 X 来过滤最终数据集。

问题是我应该在数据集 X 上加入数据集 A，在数据集 X 上加入数据集 B，然后将所有 A 和 B 合并，还是应该将所有 A 和 B 合并到 C 中，然后在 X 上加入 C。

什么更快，内存效率更高等？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T18:22:00.163

这取决于很多事情，不可能从你的问题中说出来：索引、统计、INNER 或 OUTER JOIN、数据类型。你必须知道更多，即使那样你真的需要比较执行计划。

因为我不喜欢重复自己，所以出于维护原因，我可能会在 UNION 之外进行 JOIN，但如果我必须打赌，我可能会打赌先加入的联接可以胜过它 - 特别是如果联接减少了行数急剧增加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T18:19:59.557

我的直觉是将两者都加入 x 然后合并结果。这样，sql server 优化器就有更好的机会提供最佳查询计划，但这可能是您同时编写两者的情况，检查执行计划和时间以真正看到差异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T18:23:23.320

我真的很想看看两者的执行计划，看看什么需要更少的时间/资源。

[这是一个很棒的入门视频](http://blog.sqlauthority.com/2012/06/13/sql-server-video-beginning-performance-tuning-with-sql-server-execution-plan/)，介绍了如何开始在 SQL Authority 上进行性能调优。一个从来没有得到足够关注的话题。

在优化的演变过程中监控执行计划是一项很棒的技术，因为它确实深入研究了向您展示进一步的索引和其他调整技术是否以及如何在您的执行中获得回报。

# javascript - 使用 Javascript 函数更改 CSS（压缩代码）

> ID：13145052
> 
> 赞同：1
> 
> 时间：2012-10-30T18:04:27.953
> 
> 标签：javascript, css, function, call

我还是 javascript 的新手（更不用说设计师，当然不是开发人员）所以请多多包涵。

我想在我的 CSS 中使用一些随机数，而我能找到符合要求的唯一方法是合并一些 Javascript 来生成随机数，然后修改 CSS。这个想法是让一些幻灯片动画进入视图，在悬停时旋转，并在单击另一个类别时动画消失。

我已经设法让它在我的文档中工作，无论是在加载时还是在点击按钮时调用，但我能让它工作的唯一方法是我为每个实例写出完整的代码。每次都是一样的，所以当我需要改变一些东西时，比如过渡时间，我必须在多个位置一遍又一遍地做。它现在有效，但肯定不理想。

我不会把完整的代码放在这里（因为它太长了），但这里有一个例子。我有这个：

```
$(function() {
  $("#printLink").click(function() {

    $(".print").each(function() {
      $(this).css({
        "left":(Math.floor(Math.random()*10)-5),
        "bottom":(Math.floor(Math.random()*10)-5),
      });
    });

    $(".web, .motion").each(funtion() {
      $(this).css({
        "left":(Math.floor(Math.random()*200)-100) + '%',
        "bottom":(Math.floor(Math.random()*500)+500),
      });
    });

  });
}); 
```

好的，所以有一个按钮 #printLink 和具有 .print、.web 和 .motion 类的单独幻灯片组（在下面的演示链接中，动画部分没有幻灯片）。这个想法是，当我单击#printLink 时，.print 幻灯片将移入视图，而 .web 和 .motion 幻灯片将移出屏幕。就像我说的，我已经完成了所有这些工作，但是我必须一次又一次地指定所有的 CSS。

我想要的是这样的：

```
function moveIn(){
  $(this).css({
    "left":(Math.floor(Math.random()*10)-5),
    "bottom":(Math.floor(Math.random()*10)-5),
  });
}

function moveOut(){
  $(this).css({
    "left":(Math.floor(Math.random()*200)-100) + '%',
    "bottom":(Math.floor(Math.random()*500)+500),
  });
}
$(function() {
  $("#printLink").click(function() {
    $(".print").each(function() {
      moveIn();
    });
    $(".web, .motion").each(function() {
      moveOut();
    });
  });
}); 
```

这样我每次都可以引用相同的 CSS 字符串，并最大限度地减少代码不匹配的机会。

这是一个[参考链接](http://www.ericjconrad.com/test/GalleryPageTest/#)，可让您更好地了解我在说什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T18:10:28.567

另外，有什么问题：

```
$(function() {
  $("#printLink").click(function() {
    $(".print").each(moveIn);
    $(".web, .motion").each(moveOut);
  });
}); 
```

您定义的两个函数应该可以完美运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:43:10.043

如果你想拥抱**CSS3***并且不需要随机数*，你可以在你的 CSS 中使用一些类来处理这个......

```
.print, .web { 
    display: absolute;
    top: 500px; left: -1000px; 
    opacity: 0.0;
    -webkit-transition: all 0.5s ease-in-out; 
}
.printOn, .webOn { 
    top: 0px; left: 0px; 
    opacity: 1.0;
} 
```

然后你的链接可以切换这些类......

```
$(function() {
    var $print = $('.print'), $web = $('.web');
    $("#printLink").click(function(e) {
        $print.addClass('printOn');
        $web.removeClass('webOn');
        e.preventDefault();
    });
    $("#webLink").click(function(e) {
        $web.addClass('webOn');
        $print.removeClass('printOn');
        e.preventDefault();
    });
}); 
```

注意：在撰写本文时，“transition”属性还没有得到很好的支持。但即使在不支持它的浏览器中，链接也应该显示和隐藏——只是没有任何动画。

# ios - armv7s 验证时出现问题

> ID：13145054
> 
> 赞同：1
> 
> 时间：2012-10-30T18:04:29.293
> 
> 标签：ios, xcode, validation, armv7

![在此处输入图像描述](../Images/833b6f890611a8f7f4d0e38c56a881c9.png)

因此，在验证我的应用程序时，我遇到了这个问题。在谷歌上查了很多，我似乎无法找到如何解决它。我已经更新了所有 SDK，以及最新版本的 XCODE。我已经在 IRL iPhone 4 和 iPhone 模拟器上测试了该应用程序。解决此问题需要快速修复/信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T18:32:38.667

Set this to yes. Great success.

![enter image description here](../Images/36e661570ae831629df75c43b8018214.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T19:03:23.377

在有效架构 $VALID_ARCHS 中，请在构建设置中设置 armv7 和 armv7s。这是最新 XCode 的一个问题，默认情况下它不支持 armv7。iPhon4,4s 需要 armv7，因为它们具有 A5 处理器，而 iPhon5 具有 A7 处理器。

要找出这些处理器的差异，请在以下链接中找到详细信息：

[http://www.anandtech.com/show/6292/iphone-5-a6-not-a15-custom-core](http://www.anandtech.com/show/6292/iphone-5-a6-not-a15-custom-core)

# python - 在 Django 中返回我自己的模板标签时自动添加斜杠

> ID：13145057
> 
> 赞同：0
> 
> 时间：2012-10-30T18:04:50.277
> 
> 标签：python, django, django-templates, template-engine

我是一个菜鸟 django 程序员，我想为 Django 模板创建自己的模板标签。我创建了一个模板标签模块，当我使用显示的代码时它似乎可以正常工作；但是，我的函数返回一个带有`"&lt;"`and`"&gt;"`而不是`"<"`and的字符串`">"`（好像函数的结果会被`addslashes()`函数修改）。我的代码有什么问题？

**base_template.html（使用我的模板标签的 django 模板）**

```
<% load templatetags %>
<html>
 <head>
 </head>
 <body>
   {# text contains a string #}
   {{ text | formattedtext }}
 </body>
</html> 
```

**模板标签.py**

```
from django import template

register = template.Library()
@register.filter(name='formattedtext')

def formattedtext(value):
    try:
        scoringTemplate = "<b>" + value + "</b>"
        print scoringTemplate #return string with "<b>text</b>"
        return scoringTemplate #however, this returns string with "&lt;text&gt;" value :(
    except ValueError:
        return value
    except:
        return value 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T20:52:43.337

您需要将输出标记为“安全”： [https ://docs.djangoproject.com/en/dev/ref/utils/#django.utils.safestring.mark_safe](https://docs.djangoproject.com/en/dev/ref/utils/#django.utils.safestring.mark_safe)

所以，你的代码应该变成：

```
from django import template
from django.utils.safestring import mark_safe

register = template.Library()
@register.filter(name='formattedtext')

def formattedtext(value):
    try:
        scoringTemplate = "<b>" + value + "</b>"
        print scoringTemplate #return string with "<b>text</b>"
        return mark_safe(scoringTemplate)   # unescaped, raw html
    except ValueError:
        return value
    except:
        return value 
```

# c# - 使用 C# 将数据集和关系序列化为 XML

> ID：13145059
> 
> 赞同：0
> 
> 时间：2012-10-30T18:04:57.797
> 
> 标签：c#, xml, dataset

我需要一些关于以下问题的意见/方向：

我需要一种将多个表中的行序列化为 XML 的方法，其中值表示为属性，而不是标签。我已经开始深入研究数据集的 WriteXML 方法，但我不确定是否可以按照我需要的方式自定义 XML。它将采用以下格式：

```
<?xml version="1.0" encoding="UTF-8"?>
<Import operatorName="ABC123">
    <customers>
        <customer id="12345" firstName="Abraham" lastName="Lincoln" dob="02/12/1809">
            <addresses>
                <address city="the city" state="the state" zip="12345" street="the street">
                <address city="the city 2" state="the state 2" zip="54321" street="another street">
            </addresses>
            <customerEncounters>
                <customerEncounter id="797979" date="01/01/2013" location="somewhere"> 
                    <customerRepresentative name="The Dude">
                    <mechanic name="Mr. Mechanic"> 
                </customerEncounter>
            </customerEncounters>
            <customerEncounters>
                <customerEncounter id="888888" date="01/15/2013" location="somewhere else"> 
                    <customerRepresentative name="The Dude">
                    <mechanic name="Mr. Mechanic"> 
                </customerEncounter>
            </customerEncounters>
        </customer>
        <customer>
           ....
        </customer>
    </customers>
</Import> 
```

简而言之，表格如下：

**客户** ID Fname Lname DOB

**客户地址** ID 客户 ID 街道 城市 州 邮编

**遇到** ID CustomerID 日期 Location MechanicID CustRepID

**机械** ID 名称

**客户代表** ID 名称

每个客户可以有许多地址和遭遇。

根据数据抓取，我不会获得大量客户（50 或更少）。这甚至可以使用数据集吗？还是有更资源友好的方式来做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T20:20:55.770

如果我正确理解您的问题，也许以下 MSDN 文章会很有用：

[将列映射到 XML 元素、属性和文本](http://msdn.microsoft.com/en-us/library/zx8h06sz.aspx)

它解释了如何定义你的每个`DataColumn`值如何`DataTables`被序列化。

# jquery - jQuery检测空表单如何？

> ID：13145063
> 
> 赞同：0
> 
> 时间：2012-10-30T18:05:07.597
> 
> 标签：jquery, jquery-ui, validation

> **可能重复：**
> [jQuery 中的空字段验证](https://stackoverflow.com/questions/6056705/empty-field-validation-in-jquery)

我需要检测表单是否为空。我已经进行了客户端验证，有必填字段而不是必填字段，当有一个或多个必填字段时，这是（这些是）空的，发布按钮会启动客户端验证错误，这很好。当它们都不是强制性的时，我只需要禁用发布按钮，直到我插入一个值，当我写东西时启用发布按钮。但是如果我删除这些值，我无法检测表单是否为空或不重新禁用按钮！

```
$('#form .my_field').each(function() {
    $(this).data('oldVal', $(this).val());

    $(this).bind("propertychange keyup input paste change blur", function(event) {
        if ($(this).data('oldVal') != $(this).val()) {
            $('#post_button').button({
                disabled: false
            });
        }
    });
}); 
```

有了这个绑定，我可以检测到我何时在一个随意的表单字段中书写，但我不知道如何找到每个字段是否都是干净的。我尝试了很多条路，但它们把我引向了死胡同。也许是一个 10 小时的编程问题 :) 我尝试过某种

```
 if ($(this).val()=='') 
```

，但对于某些字段（例如数据选择器）不起作用（我可以选择过多的多选---->：选项）

我想我必须将相同的事件绑定到一个（如果为空设置一个布尔标志）并检查所有布尔标志以确定它们是否都是真（或假）..任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:24:36.963

为什么不只使用一个`else if`？

演示：http: [//jsfiddle.net/dfAtX/](http://jsfiddle.net/dfAtX/)

jQuery：

```
$('#form .my_field').each(function() {
    $(this).data('oldVal', $(this).val());

    $(this).bind("propertychange keyup input paste change blur", function(event) {

        if ($(this).data('oldVal') != $(this).val()) {
            $('#post_button').button({
                disabled: false
            });
        }
        else if ($(this).val() == $(this).data('oldVal')) { // Don't even bother checking the rest if this doesn't match
            var unchanged = 0;
            $('#form .my_field').each(function() {
                if ($(this).val() == $(this).data('oldVal')) {
                    unchanged++;
                }
            });

            if (unchanged == $('#form .my_field').length) {
                $('#post_button').button({
                    disabled: true
                });
            }
        }
    });
});​ 
```

# c - C strtok 分隔符返回 → ( 在末尾

> ID：13145064
> 
> 赞同：1
> 
> 时间：2012-10-30T18:05:11.087
> 
> 标签：c, strtok

我编写了一个程序，我想输入例如“11:12”，然后返回“11”和“12”。这是我的代码：

```
#include<stdio.h>
#include <string.h>
#include <conio.h>
int main(void)
{
char s[] = "";
char seperator[] = ":";
char *ch;
while (1)
{
scanf("%s", &s); //scanf("%s", &s);
if (s == -1) break;
char *result = NULL;
result = strtok(s, seperator);
while( result != NULL ) {
    printf( "result is \"%s\"\n", result );
    result = strtok( NULL, seperator );
}
fflush(stdout);

}
return 0;
} 
```

但是当我输入“11:12”时，这是我的输出：

```
result is "11"
result is "12→ (" 
```

我怎样才能摆脱最后一个“→（”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T18:10:57.297

您没有为“s”数组分配任何内存。试试这样：

```
char s[128] = ""; 
```

另外，您正在使用参数*&s对**scanf*进行双重间接，这是没有必要的，因为“s”将作为函数的参数衰减为指针。试试这样：

 *```
 scanf("%s", s); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T18:11:23.460

您定义`s`为长度为 0 的字符串

```
char s[] = ""; 
```

因此，当您使用 0 读取长度为 0 的字符串时`scanf()`，将会发生不好的事情。为其分配一些内存：

```
char s[100]; 
```

此外，您`&`的`scanf()`. 只会`scanf("%s", s)`做。

当我们这样做的时候，这是为了什么？

```
if (s == -1) break; 
```

因为那不起作用......如果你想检查是否`"-1"`输入了你需要使用类似strcmp的东西：

```
if (strcmp(s,"-1") == 0) break; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T18:13:10.433

您的代码具有*未定义的行为*。

```
char s[] = ""; 
```

使用这一行，您声明了一个长度为 1 的字符数组，这意味着您实际上只能存储 null。因此，当您读取输入时，您会溢出`s`从而调用 UB。

您也可以`&s`在 scanf 中删除，因为数组名称与其地址相同。

另一个问题是：

```
if (s == -1) break; 
```

`s`是一个数组，因此它的地址不能是-1。这种比较没有意义。*

# cuda - 如何使用没有可执行文件的 Compute Visual Profiler 分析 cuda 项目？

> ID：13145066
> 
> 赞同：2
> 
> 时间：2012-10-30T18:05:16.167
> 
> 标签：cuda, executable, profiler, nsight

所以我用 NSight for VS 安装了 Visual Studio 2010。项目正在编译和工作得很好（但我仍然没有识别智能感知，尽管我花了很多时间并阅读了所有教程）。
现在我想使用需要可执行文件的 Compute Visual Profiler (NSight)。所以当我在运行项目后去调试或发布时，我在那里找不到 exe 文件。如何创建它？无论如何，我可以通过指向 Debug 目录来运行 Compute Visual Profiler 来分析这个项目，但后来我得到了错误：

```
Program run #18 completed.
Error : 
Application : "C:(...)dot_product.exe.intermediate.manifest".
Profiler data file 'C:/(...)temp_compute_profiler_0_0.csv' for application run 0 not found. 
```

所以我的问题是我怎么可能描述我的项目？

# python - SQL Alchemy ResultProxy.rowcount 不应为零

> ID：13145068
> 
> 赞同：14
> 
> 时间：2012-10-30T18:05:30.910
> 
> 标签：python, sqlalchemy, rowcount

有谁知道如何在不遍历结果集的情况下从 SQL Alchemy 查询 ResultProxy 对象中获取行数？ResultProxy.rowcount 属性显示 0，我希望它的值为 2。对于更新，它显示受影响的行数，这是我所期望的。

```
from sqlalchemy import create_engine
from sqlalchemy.orm import sessionmaker

engine = create_engine(
    'oracle+cx_oracle://user:pass@host:port/database'
    )

session = sessionmaker(
    bind = engine
    , autocommit = False
    , autoflush = False
    )()

sql_text = u"""
    SELECT 1 AS Val FROM dual UNION ALL
    SELECT 2 AS Val FROM dual
    """

results = session.execute(sql_text)

print '%s rows returned by query...\n' % results.rowcount
print results.keys()

for i in results:
    print repr(i) 
```

输出：

```
0 rows returned by query...

[u'val']
(1,)
(2,) 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-31T02:53:30.350

resultproxy.rowcount 最终是 DBAPI 属性 cursor.rowcount 的代理。大多数 DBAPI 不通过此属性为 SELECT 查询提供“行数”；其主要目的是提供与 UPDATE 或 DELETE 语句匹配的行数。实际上，关系数据库在完成对所有行的定位之前，并不知道特定语句将返回多少行。许多 DBAPI 实现将在数据库找到行时开始返回行，而不进行缓冲，因此在这些情况下甚至没有这样的计数可用。

要获取 SELECT 查询将返回的行数，您需要预先执行 SELECT COUNT(*)，或者需要将所有行提取到数组中并在数组上执行 len()。

ResultProxy.rowcount 的注释进一步讨论了这一点（http://docs.sqlalchemy.org/en/latest/core/connections.html?highlight=rowcount#sqlalchemy.engine.ResultProxy.rowcount）：

> 关于 ResultProxy.rowcount 的注意事项：
> 
> *   此属性返回匹配的行数，不一定与实际修改的行数相同 - 例如，如果给定的 SET 值与那些已经出现在行中的人。这样的行将被匹配但不会被修改。在具有这两种样式的后端（例如 MySQL）上，默认情况下将 rowcount 配置为在所有情况下返回匹配计数。
>     
>     
> *   ResultProxy.rowcount*仅*与 UPDATE 或 DELETE 语句一起使用。与 Python DBAPI 所说的相反，它不会从 SELECT 语句的结果中返回可用的行数，因为当行未缓冲时，DBAPI 无法支持此功能。
>     
>     
> *   ResultProxy.rowcount 可能不会被所有方言完全实现。特别是，大多数 DBAPI 不支持来自 executemany 调用的聚合行计数结果。如果已知支持每种用法，则 ResultProxy.supports_sane_rowcount() 和 ResultProxy.supports_sane_multi_rowcount() 方法将从方言报告。
>     
>     
> *   使用 RETURNING 的语句可能不会返回正确的行数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-10-11T17:00:37.997

你可以使用这个：

```
rowcount = len(results._saved_cursor._result.rows) 
```

然后你的代码将是

```
print '%s rows returned by query...\n' % rowcount
print results.keys() 
```

**仅经过测试的“查找”查询**

这个对我有用。

# ruby-on-rails - respond_to 导致 [:json, :html]:Array 的未定义方法 `to_sym'

> ID：13145075
> 
> 赞同：3
> 
> 时间：2012-10-30T18:05:48.587
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, respond-to, respond-with

在 Ruby 1.9.3p194 中的 Rails 3.2.8 中，当通过`respond_to`调用 gem 中包含的模块中的方法将数组传递到 ActiveSupport::Concern 的包含块中时，该块会按需包含在类定义中，`acts_as_...`导致：

```
respond_to causes undefined method `to_sym' for [:json, :html]:Array 
```

在下一个请求中，我得到：

```
RuntimeError (In order to use respond_with, first you need to declare the formats your controller responds to in the class level):
  actionpack (3.2.8) lib/action_controller/metal/mime_responds.rb:234:in `respond_with' 
```

在模块代码中，它只是做相当于：

```
formats = [:json, :html]
respond_to formats 
```

格式在其他地方配置，因此它可以应用于所有指定`acts_as_...`.

我知道当我在类定义中这样做时它会起作用：

```
respond_to :json, :html 
```

那么，如何使用格式数组的变量调用 respond_to？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T18:05:48.587

`respond_to`Rails 3.2.8 中方法的相关部分是：

```
def respond_to(*mimes)
  # ...
  mimes.each do |mime|
    mime = mime.to_sym
    # ...
  end
  # ...
end 
```

因为 splat 运算符用于`respond_to`，它将传入的数组包装在一个数组中，所以 mimes 是`[[:json, :html]]`，并且它正在尝试调用`to_sym`该数组。

`respond_to`如果使用包含数组的变量调用，则需要使用 splat (*) 运算符，例如：

```
formats = [:json, :html]
respond_to *formats 
```

这将`respond_to`像您发送两个参数一样调用：

```
respond_to :json, :html 
```

或者：

```
respond_to(:json, :html) 
```

# php - 在 PHP/MySQL 中缓存排序数据的最佳方式

> ID：13145078
> 
> 赞同：0
> 
> 时间：2012-10-30T18:05:58.247
> 
> 标签：php, mysql, sql, caching

假设我们有一个向用户呈现连续数据的应用程序。例如博客——我们提供博客条目列表，这个列表分为页面——所以我们最终得到 /page1、/page2 等。

第一页显然是最常被请求的，但页数越高，请求的频率就越低。

如果我们为我们的应用程序实现缓存，我们有两个选择：

*   每个新条目后更新每个页面的缓存

*   当请求页面时，PHP 正在寻找缓存版本；如果存在，则返回，否则创建缓存，并将到期日期设置为，比如说，一个小时

第一个解决方案对我来说似乎真的很浪费资源。第二个创造了危险场景的可能性：

如果用户请求页面 x 然后 (x+1)，其中页面 x 被缓存而页面 (x+1) 没有被缓存，会发生什么？如果页面 x 的缓存已过时，则在页面 (x+1) 上，用户将看到相同的内容。或者更糟糕的是，如果用户从 x 页转到 (x-1) 页怎么办？他会错过一些条目！

如何实现缓存来避免这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T18:13:15.980

通常最好按需缓存，而不是急切地缓存，除非您可以确保在那里完成的工作不会被浪费。

通常，您使用像 Memcached 这样的后备存储来保存您的瞬态数据。这可以使用“生存时间”（TTL）进行配置，这将自动使过时或未使用的任何内容过期。

通常，您将页面的一大块缓存到一个字符串中，然后使用某种识别键将其保存。在您的情况下，页面 URL 或参数的某些子集可能足够独特。请记住，如果用户会话对本节的内容有影响，那么与此相关的内容，例如也`user_id`必须是缓存键的一部分。

# mysql - 如何搜索以包含 % 和 _ 字符的另一个值开头或结尾的值？

> ID：13145079
> 
> 赞同：1
> 
> 时间：2012-10-30T18:05:57.727
> 
> 标签：mysql, sql-like

考虑下表：

```
 drop table if exists testA;
 drop table if exists testB;
 create table testA ( id int, testX varchar(255) );
 create table testB ( id int, testY varchar(255) );
 insert into testA values ( 1, 'this is a test%' );
 insert into testB values ( 1, 'test%' );
 insert into testA values ( 1, 'a test% this is' ); 
```

这导致：

```
mysql>  select * from testA;
+------+-----------------+
| id   | testX           |
+------+-----------------+
|    1 | this is a test% |
|    1 | a test% this is |
+------+-----------------+
2 rows in set (0.04 sec)

mysql>  select * from testB;
+------+-------+
| id   | testY |
+------+-------+
|    1 | test% |
+------+-------+
1 row in set (0.05 sec) 
```

如何从 testA 表中获取**以 testB 值结尾**的值？

这个查询：

```
SELECT tA.testX
FROM testA tA
JOIN testB tB USING (id)
WHERE tA.testX LIKE CONCAT('%', tB.testY); 
```

返回整个结果：

```
+-----------------+
| testX           |
+-----------------+
| this is a test% |
| a test% this is |
+-----------------+
2 rows in set (0.04 sec) 
```

这听起来当然是合乎逻辑的，因为`CONCAT('%', tB.testY)`会返回 '%test%'。但是在我的应用程序中，我在 LIKE 的右侧有复杂的值，包含函数调用以及列和字符串的混合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:05:57.727

我终于找到了我的解决方案：

```
SELECT tA.testX
FROM testA tA JOIN testB tB USING (id)
WHERE RIGHT(tA.testX, LENGTH(tB.testY)) = tB.testY 
```

给我吗 ：

```
+-----------------+
| testX           |
+-----------------+
| this is a test% |
+-----------------+ 
```

你可以这样做：

*   [LEFT](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_left)如果您需要以值 ( ) 开头的字符串`LIKE 'xxx%'`。
*   [正确](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_right)，如果您需要搜索以值 ( `LIKE '%xxx'`)结尾的字符串
*   [LOCATE](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_locate)如果您需要搜索包含值的字符串 ( `LIKE '%xxx%'`)

我发布它以防有人会发现它有用。

# maven - 在 Maven 中使用传递依赖项和排除项

> ID：13145081
> 
> 赞同：1
> 
> 时间：2012-10-30T18:06:02.300
> 
> 标签：maven

我有这个 Maven 层次结构：

```
sim-java
   ejb
   web
   log4j
   ... 
```

ejb、web 和 log4j 是 sim-java 的模块，每个模块都通过父标签引用 sim-java。

我想创建一个 log4j 模块并将其作为依赖项包含在 sim-java 中，因此 log4j 将作为依赖项出现在 ejb 和 web 模块中。

基本上，我在 sim-java 中的 pom.xml 包含以下内容：

```
<dependencies>
    <dependency>
        <groupId>com.sim</groupId>
        <artifactId>log4j</artifactId>
        <version>${log4j.version}</version>
        <scope>provided</scope>
    </dependency>
</dependencies> 
```

（提供范围是因为我有一个 ear 模块，它将在 ear 文件中包含 com.sim:log4j）。

现在，我的 log4j 模块中的 pom.xml 是这个：

```
<dependencies>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.17</version>
    </dependency>
</dependencies> 
```

我有这个构建错误：

> 30/10/12 18:56:07 CET：log4j 的构建错误；org.apache.maven.lifecycle.LifecycleExecutionException：无法在项目 log4j 上执行目标：无法解析项目 com.sim:log4j:jar:0.0.1-SNAPSHOT 的依赖项：找不到工件 com.sim:log4j:jar： 0.0.1-快照

我认为存在一些依赖问题，因为 sim-java 使用 com.sim.log4j 作为传递依赖，所以我在 log4j pom.xml 中测试了它：

```
 <dependencies>
    <dependency>
        <groupId>com.sim</groupId>
        <artifactId>sim-java</artifactId>
        <version>0.0.1-SNAPSHOT</version>
        <exclusions>
            <exclusion>
                <groupId>com.sim</groupId>
                <artifactId>log4j</artifactId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.17</version>
    </dependency>
</dependencies> 
```

> 30/10/12 18:59:22 CET：[警告] com.sim:log4j:jar:0.0.1-SNAPSHOT 的 POM 丢失，没有可用的依赖信息 2012 年 30 月 10 日 18:59:22 CET：缺少工件 com.sim:log4j:jar:0.0.1-SNAPSHOT:provided 30/10/12 18:59:22 CET: 缺少工件 com.sim:log4j:jar:0.0.1-SNAPSHOT:provided 30/10/ 12 18:59:22 CET：缺少工件 com.sim:log4j:jar:0.0.1-SNAPSHOT:provided

也许在模块（ejb、web 等）中包含 com.sim.log4j 会起作用，但我想通过 sim-java 项目使用传递依赖。

请问这个怎么做？

奥利维尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T18:44:36.853

您不能`com.sim:log4j`在父 pom 中依赖。这种依赖将在孩子身上继承，这意味着`com.sim:log4j`将依赖于自己。

而是在父 pom 中创建 a `<dependencyManagement/>`，然后`com.sim:log4j`在需要它的孩子中声明使用 of ，这里是`web`and `ejb`。

父pom：

```
<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>com.sim</groupId>
            <artifactId>log4j</artifactId>
            <version>${log4j.version}</version>
            <scope>provided</scope>
        </dependency>
    </dependencies>
</dependencyManagement> 
```

Web 和 Ejb pom：

```
<dependencies>
    <dependency>
        <groupId>com.sim</groupId>
        <artifactId>log4j</artifactId>
        <scope>provided</scope>
    </dependency>
</dependencies> 
```

* * *

**编辑**

您仍然可以通过仅依赖 ejb 项目中的 log4j 模块来获得传递依赖。然后，Web 项目将依赖于 ejb 项目，而 log4j 将成为传递依赖项。

# shopify - 使用测试 Shopify 网站进行实时承运人运输

> ID：13145083
> 
> 赞同：0
> 
> 时间：2012-10-30T18:06:04.357
> 
> 标签：shopify

是否可以在 Test Shopify 网站中使用实时承运人运费？

我们为使用 Shopify 的客户提供履行服务，我们希望在客户以实时费率上线之前测试此功能以及我们的导入例程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-21T00:36:44.020

是[的，运营商服务 API](https://help.shopify.com/api/reference/carrierservice)适用于[从合作伙伴帐户创建的开发商店。](https://help.shopify.com/partners/getting-started/development-stores)

# 2d - 使用 Direct3D 9 快速调色的屏幕 blit

> ID：13145084
> 
> 赞同：0
> 
> 时间：2012-10-30T18:06:07.930
> 
> 标签：2d, direct3d, palette

游戏使用软件渲染在内存中绘制全屏调色板（8 位）图像。

使用 Direct3D 将该图像放在屏幕上的最快方法是什么？

目前我在软件中将调色图像转换为 RGB，然后将其放在`D3DUSAGE_DYNAMIC`纹理上（用 锁定`D3DLOCK_DISCARD`）。

有更快的方法吗？例如，使用着色器执行调色？

相关问题：

*   [使用 OpenGL 快速调色屏幕 blit](https://stackoverflow.com/questions/12524813/fast-paletted-screen-blit-with-opengl) - 与 OpenGL 相同的问题
*   [如何提高 Direct3D 流式处理纹理性能？](https://stackoverflow.com/questions/4912404/how-do-i-improve-direct3d-streaming-texture-performance)- SDL作者的类似问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T23:49:48.010

创建`D3DFMT_L8`包含调色板图像的纹理和包含调色板的 256x1`D3DFMT_X8R8G8B8`图像。

HLSL 着色器代码：

```
uniform sampler2D image;
uniform sampler1D palette;

float4 main(in float2 coord:TEXCOORD) : COLOR
{
    return tex1D(palette, tex2D(image, coord).r * (255./256) + (0.5/256));
} 
```

请注意，亮度（调色板索引）通过乘加运算进行调整。这是必要的，因为调色板索引 255 被视为白色（最大亮度），当表示为浮点数时变为 1.0f。在该坐标处读取调色板纹理会导致它环绕（因为仅使用小数部分）并改为读取第一个调色板条目。

编译它：

```
fxc /Tps_2_0 PaletteShader.hlsl /FhPaletteShader.h 
```

像这样使用它：

```
// ... create and populate texture and paletteTexture objects ...
d3dDevice->CreatePixelShader((DWORD*)g_ps20_main, &shader)
// ...
d3dDevice->SetTexture(1, paletteTexture);
d3dDevice->SetPixelShader(shader);
// ... draw texture to screen as textured quad as usual ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T21:30:57.127

您可以编写一个简单的像素着色器来处理调色板。创建 L8 动态纹理并将调色板图像复制到其中并创建调色板查找纹理（或常量内存中的颜色数组）。然后只需渲染一个全屏四边形，将调色图像设置为纹理和一个像素着色器，从查找纹理或常量缓冲区执行调色板查找。

也就是说，在 CPU 上执行调色板转换在现代 CPU 上应该不会很昂贵。你确定这是你的性能瓶颈吗？

# c++ - 将文件的数据从服务器返回到客户端 - reg

> ID：13145085
> 
> 赞同：0
> 
> 时间：2012-10-30T18:06:09.290
> 
> 标签：c++, file-io, webserver

我只是想用 C++ 实现一个简单的 Web 服务器。为此，Web 服务器根据请求从服务器获取数据。为此我正在使用

```
int main()
{
std::ifstream file("/home/chaitanya/cpp/net/hello");
int length;
char *buffer;

if(file.is_open())
{
    std::cout << "File is open\n";

    file.seekg(0, std::ios::end);
    length = file.tellg();      
    file.seekg(0, std::ios::beg);

    buffer = new char[length];

    file.read(buffer, length);
    file.close();   
}   

printf("Data:\n\n%s\n", buffer);
delete[] buffer;

return 0;
} 
```

这适用于小文件。即使我通过套接字发送整个文件数据，无论其大小如何。这是更好的方法吗？

例如，如果文件大小很大？我想一次发送一个特定的数据块会更好。

你们可以建议哪种方法更好（或）网络服务器使用的任何其他更好/更快的方法吗？

提前致谢。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:21:30.597

几乎在每个操作系统中，您都有一个更好的操作系统相关选项来通过套接字发送文件，例如在`linux`您有[sendfile](http://linux.die.net/man/2/sendfile)、在`Windows`您有[TransmitFile](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740565%28v=vs.85%29.aspx)和...中，但如果您想要一个简单的便携式解决方案，我将推导出一个从`std::ostream`那个发送数据到套接字的类，然后使用它：

```
my_socket_stream s;
s << file.rdbuf() << std::flush; 
```

使用这种技术，我可以毫无问题地发送数千兆字节的文件！

# bash - 为bash解析“库”的参数？

> ID：13145090
> 
> 赞同：4
> 
> 时间：2012-10-30T18:06:23.987
> 
> 标签：bash

我知道`getopts`，但我必须每次都进行解析和错误处理。

有谁知道 Bash 是否存在用于解析命令参数的“库”或一组函数？

例如 Perl 有很多这样的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T18:09:49.957

也许[getoptx](http://www.opensource.apple.com/source/bash/bash-29/bash/examples/functions/getoptx.bash)适合你。虽然我发现 getopts 真的很好而且顺便说一句。：如果你使用用户输入，你应该总是做一些错误处理;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-09T15:26:01.613

[bash-modules](https://github.com/vlisivka/bash-modules)，“参数”模块。

例子：

```
#!/bin/bash
. import.sh log arguments

NAME="world"

parse_arguments "-n|--name)NAME;S" -- "$@" || {
  error "Cannot parse command line."
  exit 1
}

info "Hello, $NAME!" 
```

# android - TextView setBackground() 不起作用

> ID：13145095
> 
> 赞同：2
> 
> 时间：2012-10-30T18:06:49.600
> 
> 标签：android, textview

我是 Android 新手，遇到以下问题：

我想将 TextView 的背景设置为#333。我用了：

```
 TextView title = new TextView(this);  
    title.setText(currentContinent); 
    title.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 18);
    title.setBackgroundColor(0x333333);
    title.setGravity(Gravity.CENTER); 
```

即使 Eclipse 没有标记任何错误，TextView 仍然具有透明背景。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T18:18:10.570

我有一个类似的问题，我在不考虑前导 Alpha 通道的情况下创建数字颜色。IE。`mytext.setTextColor(0xFF0000)`（认为​​这将是红色的）。虽然这是一种红色，但它也是 100% 透明的，因为它 = `0x00FF0000`; 正确的 100% 不透明值是`0xFFFF0000`或`mytext.setTextcolor(0xFFFF0000).`

在你的情况下，让它：`mytext.setTextcolor(0x33333333)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T18:29:17.457

尝试这样的事情：

```
title.setBackgroundColor(Color.rgb(51, 51, 51)); 
```

提供十进制的 rgb 分量值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-07T16:57:01.393

您可以使用以下方法设置任何颜色：

```
txt.setBackgroundColor(Color.parseColor("#BCDABA")); // set any custom color as  
//background    color 
```

或者

```
txt.setBackgroundColor(Color.GREEN); // set default GREEN color as background color 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T18:25:59.993

```
TextView title = new TextView(this);  
title.setText(currentContinent); 
title.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 18);
title.setBackgroundColor(0x33333333);
title.setGravity(Gravity.CENTER); 
```

尝试这个..，。

# windows-services - Wix 安装的 Windows 服务

> ID：13145099
> 
> 赞同：2
> 
> 时间：2012-10-30T18:07:05.483
> 
> 标签：windows-services, wix, windows-server-2003

我正在使用 WiX 3.6 为 Windows 服务创建安装程序。我已经构建了解决方案，并且能够在我的开发机器上安装该服务，并且该服务就像我想要的那样启动。

当我将 msi（构建或发布）复制到服务将在其上运行的 Windows Server 2003 R2 机器上时，就会出现问题。
我可以安装该服务，但是当我尝试启动该服务时出现错误

> “服务启动失败。请确认您有足够的权限启动系统服务。”

现在我可以安装和启动我创建的其他服务，所以我现在确实拥有服务器的权限。下面是我的服务安装元素。

我的问题是，我错过了服务在开发机器而不是服务器上启动的内容？

```
 <File Id="CopyService.exe" Name="CopyService.exe" Source="..\CopyService\bin\$(var.CopyService.Configuration)\CopyService.exe" Vital="yes" KeyPath="yes" DiskId="1"/>
    <File Id="App.config" Name="CopyService.exe.config" Source="..\CopyService\bin\$(var.CopyService.Configuration)\CopyService.exe.config" Vital="yes" KeyPath="no" DiskId="1"/>
      <ServiceInstall
               Id="ServiceInstaller"
                Type="ownProcess"
                Vital="yes"
                Name="ACSIAccountingReports"
                DisplayName="ACSI Accounting Reports"
                Description="Service copies accounting reports from NetForum into an ACSI network folder."
                Start="auto" 
                Account="LocalSystem"
                ErrorControl="ignore"          
                Interactive="no">
    </ServiceInstall>
    <ServiceControl Id="StartService" Name="ACSIAccountingReports" Start="install" Wait="yes" />
    <ServiceControl Id="StopService" Name="ACSIAccountingReports" Stop="both" Wait="yes" Remove="uninstall" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T06:59:12.077

您看到的错误消息是来自 Windows Installer 的所有服务安装失败的默认错误消息。这不是很有帮助。**要调试真正的问题，请尝试在**错误对话框启动时再次启动您的服务。您可能会收到更详细的错误消息，说明您的服务未启动的原因。如果您仍然一无所获，请尝试使用像 depends.exe 或 fuslogvw（打开 NETFX 程序集加载失败）之类的工具来查看您的服务可执行文件是否缺少一些依赖项。

请记住，GAC 的文件直到安装结束时才完成。因此，您的服务不能依赖 GAC 的文件并在安装期间启动服务。

# java - 与 IC 读卡器和 SLE5528 智能卡配合使用

> ID：13145103
> 
> 赞同：1
> 
> 时间：2012-10-30T18:07:13.313
> 
> 标签：java, credit-card, smartcard, smartcard-reader, pcsc

我有一个 IC 接触式读卡器和 SLE5528 智能卡。我想知道如何真正开始使用这些项目。

正在读取读卡器，插入智能卡时我看不到任何效果。

[我还从http://www.openscdp.org/](http://openscdp.org/)安装了 opensmart 的智能卡外壳

但我无法用它读取任何读卡器。我想知道它是否存在兼容性问题。

请我知道我可能不恰当地问了这个问题，但我恳请那里的任何人帮助我解决这个问题。

任何让我开始和完成的相关链接或有用信息都会有很大帮助，提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T21:06:11.843

如前所述，5528 是存储卡，不是智能卡。提到的智能卡外壳只能处理真正的智能卡。确保您的（未提及的）阅读器能够读取存储卡以及如何读取。PCSC 和 java 框架作为最好的卡接口都不会在这里为您提供帮助（后者针对 JavaCards）。没有什么值得注意的事情发生，当您将卡插入读卡器时并不罕见 - 预期的最大反应是 LED 短暂闪烁（如果读卡器有），类似于将 USB 记忆棒插入端口。由于没有标准软件知道如何处理卡片，因此不会有进一步的反应。建议：在此处搜索“5528”、“4428”文章或在维基百科中搜索“内存卡”，准备投入一些时间和工作。

# java - 梁 - 正面和反面的游戏

> ID：13145108
> 
> 赞同：1
> 
> 时间：2012-10-30T18:07:39.520
> 
> 标签：java, random

我被 liang Introduction to Java 书中的一个问题困住了——这就是问题所在：

“十六个硬币被放置在一个 4×4 矩阵中，一些面朝上，一些面朝下。您可以使用值为 0（正面）和 1（尾部）的 4×4 矩阵来表示硬币的状态。这里有些例子：

```
0000
0100
0000
0010 
```

每个状态也可以使用二进制数（上述的串联）来表示。编写一个程序，提示用户输入一个介于 0 和 65,536 之间的数字并显示相应的矩阵 - 7 的值将给出 00000111。

我的问题是您将如何验证 7 是否属于这种情况？我什至不确定如何开始对这种方法进行原型设计 - 也许 int x = (int)Math.rand(1) 并分配给每个行/列？

也许有人可以给我一些关于从哪里开始的提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:16:35.100

问题本质上是将*[0, 65536]*范围内的整数转换为其二进制表示。这可以通过[`Integer.toBinaryString`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html#toBinaryString%28int%29). 例如，

```
Integer.toBinaryString(7); 
```

将导致字符串`111`。现在，我们希望字符串的总长度为*16*`0` ，因此我们需要在左侧填充s 以获得`0000000000000111`。我们可以这样做：

```
String.format("%16s", Integer.toBinaryString(7)).replace(' ', '0'); 
```

这导致字符串`0000000000000111`。

一旦你有了这个，你可以简单地将它复制到一个 4x4 int（或布尔）数组中。或者，您可以立即打印数据，

```
String bin = String.format("%16s", Integer.toBinaryString(7)).replace(' ', '0');

for (int i = 0 ; i < 4 ; i++)
    System.out.println(bin.substring(4 * i, 4 * (i + 1))); 
```

输出：

```
0000   
0000  
0000  
0111 
```

当然，您可以用`7`您从用户那里读取的任何整数替换它，但想法是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:18:13.513

由于您应该编写来回答问题的实际程序是：`Write a program that prompts the user to enter a number between 0 and 65,536 and displays the corresponding matrix - a value of 7 would give 00000111.`

这听起来像是一种非常复杂的说法：“将十进制转换为二进制并打印”：

```
import java.lang.*;
import java.io.*;

...
public static void printBinaryRepOfDecimal() throws IOException {
    BufferedReader bf = new BufferedReader(new InputStreamReader(System.in));
    System.out.println("Enter a number between 0 and 65,536:");
    String hex = bf.readLine();
    int i = Integer.parseInt(hex);  
    String by = Integer.toBinaryString(i);
    for (int i = 0; i < (16 - by.length); i++) {
        System.out.print("0");
    }
    System.out.println(by);
} 
```

这将打印您想要的 16 位二进制文​​件。或者，转换示例代码以操作字符串以满足您的需要。

# android - 来自服务的 Android ListView notifyDataSetChanged()

> ID：13145109
> 
> 赞同：3
> 
> 时间：2012-10-30T18:07:43.107
> 
> 标签：android, listview, android-arrayadapter

我有一个后台服务，它从服务器接收消息，并通过这些消息更新显示在 ListView 中的对象的内部属性。

我总是使用 runOnUiThread 方法来运行 listArrayAdapter.notifyOnDataSetChanged() 命令。

由于某种原因，有时 ListView 会刷新，它确实向我显示了属性更新，但有时却没有..

为了进行测试，我在我的 ListView 中添加了一个“刷新”按钮，当它按下时，会执行 listArrayAdapter.notifyOnDataSetChanged()。

每次单击按钮，视图都会完美刷新..

我真的不明白为什么在尝试从服务刷新时它并不总是有效，但我想我可能并不总是在 UIThread 上运行......

我真的很绝望，很高兴得到帮助..

**我的代码**

**ServerConnectionManager.java** - 扩展服务

```
//example of a command executed when a specific message received from the server:
//app is the Application variable
    public void unFriend(int userId)
    {
        serverResponseManager.onUnFriend(app.getApplicationFriend(userId),false);
    } 
```

**ServerResponseManager.java** - 处理所有应用程序对服务器消息的响应的类：

```
 public void onUnFriend(FacebookUser facebookUser, boolean isYouRemovedClient) {                 

         //this is the property which will effect the ListView view when calling the  
         //arrayListAdataper.notifyOnDataSetChanged();
        facebookUser.setApplicationFriend(false);        
        app.getApplicationFriends().remove(facebookUser);
        app.getDatabaseManager().deleteApplicationFriend(facebookUser.getId());         

         //if the application is currently running in the UI (not on the background) it will run a method inside the BaseActivity
        if (app.isApplicationInForeground())
        {           
            app.getCurrentActivity().onUnFriend(facebookUser);
            if (isYouRemovedClient)
                app.showToast(facebookUser.getName() + " has removed from your friends", true);
            else
                app.showToast(facebookUser.getName() + " has removed you from friends", true);
        }
    } 
```

**BaseActivity.java** - 为扩展它的所有活动设置所有默认配置的活动

```
//in this exemple the BaseActivity method does nothing but the ListViewActivity.java method override it
public void onUnFriend(FacebookUser facebookUser)
{                   

} 
```

**ListViewActivity.java** - 扩展 BaseActivity 并在其中有一个 ListView，它应该反映在 ServerResponseManager 中的 public void onUnFriend(FacebookUser facebookUser, boolean isYouRemovedClient) 中所做的 FacebookUser 对象属性的更改。

```
@Override
public void onUnFriend(FacebookUser facebookUser)
{       
    updateView();
}

private void updateView()
{
    runOnUiThread(updateViewRunnable());
}

private Runnable updateViewRunnable()
{
    Runnable run = new Runnable() {

        @Override
        public void run() {             
            listArrayAdapter.notifyDataSetChanged();
        }
    };
    return run;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-04T10:49:18.663

不要混合业务逻辑。它看起来很复杂，很难阅读。

1.  在您的服务中，广播一个带有更新信息的意图。
2.  在`Activity`where is ，为您的更新事件`ListView`创建并注册。`BroadcastReceiver``IntentFilter`
3.  在`onReceive`您`BroadcastReceiver`处理更新事件的方法中，例如更新列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T11:52:18.990

您可以在 ListView 中使用 Cursor 来显示您的数据。该服务写入/更新您的 ContentProvider 中的数据。在您的数据库事务结束时，您可以简单地使用：

```
getContext().getContentResolver().notifyChange(PROVIDER_URI,null); 
```

并且您的 ListView 会自动更新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-21T12:46:31.080

而是使用

notifyDataSetChanged onDestroy 服务。

列表视图将被刷新

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-10T12:31:17.953

服务通常应该独立于 UI 问题。将服务和 UI 相关的东西解耦的一个好方法是事件总线模式。对于 Android，请查看[https://github.com/greenrobot/EventBus](https://github.com/greenrobot/EventBus)。

在 ServerConnectionManager 中，您可以发布一个事件：

```
EventBus.getDefault().post(new UnfriendEvent(userId)); 
```

现在将您的活动注册到事件总线，事件将通过调用 onEvent 方法传递到活动：

```
public void onEventMainThread(UnfriendEvent event) {...} 
```

像这样，您将组件解耦，从而产生整洁干净的软件设计，这对更改非常灵活。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T10:50:52.597

您可以使用本教程来正确构建代码

[开发具有后台服务的应用程序](http://mindtherobot.com/blog/37/android-architecture-tutorial-developing-an-app-with-a-background-service-using-ipc/)

它显示了如何从服务接收通知并更新 UI。

runOnUiThread 主要在 AsyncTask 调用之前使用。我认为您应该改用处理程序（它会更新 UI 并允许线程运行）。尝试使用处理程序，看看会发生什么

# css - 指南针精灵背景相对于元素的定位？

> ID：13145111
> 
> 赞同：3
> 
> 时间：2012-10-30T18:07:51.613
> 
> 标签：css, sass, compass-sass, css-sprites, background-position

我正在努力寻找一个好的解决方案，据我所知，指南针页面上没有任何内容。

问题：滑动门样式的 CSS 背景。

使用垂直样式表，我可以为我的背景精灵获取两侧没有任何内容的图像。

对于我的标题的左侧，我只是简单地包含了精灵：

```
 @include header-plain-blue-left;
// will give me
  background-position: 0 -903px; 
```

然后 compass 生成 CSS，它非常适合。问题出现在右侧，我想要的是与元素右侧对齐的精灵，据我所知，指南针不允许这样做。

所需的输出是：

```
 background-position: right -903px; 
```

我唯一让它工作的是创建一个mixin并专门声明背景文件名和位置：

```
@mixin header-plain-blue-right {
     background: url(../images/sprites-s2ba933e4ea.png) no-repeat right -346px;
     } 
```

这很麻烦而且不是很时髦......

有谁知道如何让指南针做到这一点？我错过了一些明显的东西吗？或者有人知道插件吗？

或者，如果有一种方法可以控制首先将哪个图像添加到地图中（以及因此在 spritemap 中的顺序），那可以使添加内容变得更加容易......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:22:25.253

**更新：误报。这在 Firefox 中不起作用。所以没用。**

所以，过了很久。我已经意识到这样做的超级简单方法。我不敢相信我没有早点得到。

对于其他遇到此问题的人。这真的很*太*简单。

```
@include header-plain-blue-left;
background-position-x: right; 
```

这个简单的 css 规则将覆盖为 x 生成的罗盘定位。而且，作为奖励，如果您需要相对于 spritemap（偏移）定位精灵，罗盘也有一个功能：

```
 @include <folder>-sprite-position(<sprite>, $offset_x, $offset_y) 
```

我希望至少有人觉得这很有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-28T16:17:44.640

以下适用于所有浏览器

```
@include sprite-background-position($sprite, tab, 100%, 0); 
```

100% 值与“正确”定位相同。

# delphi - 在 Windows 中存储密码的安全方法

> ID：13145112
> 
> 赞同：13
> 
> 时间：2012-10-30T18:07:54.300
> 
> 标签：delphi, encryption, delphi-2010, password-protection

我正在尝试保护包含敏感信息的**本地数据库**（类似于[此问题](https://stackoverflow.com/questions/9286398/store-password-in-application)，仅**适用于 delphi 2010**）

我正在使用[DISQLite 组件](http://www.yunqa.de/delphi/doku.php/products/sqlite3/index)，它确实支持 AES 加密，但我仍然需要保护我用来解密和读取数据库的密码。

我最初的想法是生成一个随机密码，使用 DPAPI 之类的东西（`CryptProtectData`以及`CryptUnprotectData`Crypt32.dll 中的函数）存储它，但我找不到 Delphi 的任何示例

我的问题是：如何安全地存储随机生成的密码？或者，假设 DPAPI 道路是安全的，我该如何在 Delphi 中实现这个 DPAPI？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-30T19:14:29.903

最好使用 Windows 的[DPAPI](http://msdn.microsoft.com/en-us/library/ms995355.aspx)。它比使用其他方法更安全：

*   CryptProtectData / CryptProtectMemory
*   CryptUnprotectData / CryptUnprotectMemory

CryptProtectMemory / CryptUnprotectMemory 提供更大的灵活性：

*   CRYPTPROTECTMEMORY_SAME_PROCESS：只有你的进程才能解密你的数据
*   CRYPTPROTECTMEMORY_CROSS_PROCESS：任何进程都可以删除您的数据
*   CRYPTPROTECTMEMORY_SAME_LOGON：只有在同一个用户和同一个会话中运行的进程才能解密数据

优点：

1.  无需钥匙 - [Windows 为您完成](http://en.wikipedia.org/wiki/Data_Protection_API)
2.  粒度控制：每个进程/每个会话/每个登录/每个机器
3.  CryptProtectData 存在于 Windows 2000 和更新版本中
4.  DPAPI Windows 比使用您、我和相信 Random() 返回绝对随机数的人编写的“安全”相关代码更安全 :) 事实上，微软在安全领域拥有数十年的经验，拥有有史以来受攻击最多的操作系统： o)

缺点：

1.  在 CRYPTPROTECTMEMORY_SAME_PROCESS 的情况下，One* 可以在您的进程中注入一个新线程，该线程可以解密您的数据
2.  如果有人重置用户密码（不更改），您将无法解密您的数据
3.  在 CRYPTPROTECTMEMORY_SAME_LOGON 的情况下：如果用户*运行被黑进程，它可以解密您的数据
4.  如果您使用 CRYPTPROTECT_LOCAL_MACHINE - 该机器上的每个用户* 都可以解密数据。[这就是为什么不建议将密码保存在 .RDP 文件中的原因](http://www.delphipraxis.net/602718-post.html)
5.  [已知的问题](http://support.microsoft.com/kb/309408?wa=wsignin1.0#8)

**注意：** “每个用户”是指拥有使用 DPAPI 的工具或技能的用户

无论如何 - 你有一个选择。

请注意，@David-Heffernan 是正确的 - 存储在计算机上的任何内容都可以被解密 - 从内存中读取它，在你的进程中注入线程等。

另一方面......我们为什么不让饼干的生活更艰难呢？:)

经验法则：使用后清除所有包含敏感数据的缓冲区。这不会让事情变得超级安全，但会降低您的内存包含敏感数据的可能性。当然，这并不能解决另一个主要问题：其他 Delphi 组件如何处理您传递给它们的敏感数据 :)

[JEDI 的安全库](http://blog.delphi-jedi.net/security-library/)具有面向对象的 DPAPI 方法。JEDI 项目还包含 DPAPI (JWA IIRC) 的已翻译 Windows 标头

**更新：**这是使用 DPAPI 的示例代码（使用[JEDI API](http://blog.delphi-jedi.net/jedi-api-headers/)）：

```
Uses SysUtils, jwaWinCrypt, jwaWinBase, jwaWinType;

function dpApiProtectData(var fpDataIn: tBytes): tBytes;
var
  dataIn,               // Input buffer (clear-text/data)
  dataOut: DATA_BLOB;   // Output buffer (encrypted)
begin
  // Initializing variables
  dataOut.cbData := 0;
  dataOut.pbData := nil;

  dataIn.cbData := length(fpDataIn); // How much data (in bytes) we want to encrypt
  dataIn.pbData := @fpDataIn[0];     // Pointer to the data itself - the address of the first element of the input byte array

  if not CryptProtectData(@dataIn, nil, nil, nil, nil, 0, @dataOut) then
    RaiseLastOSError; // Bad things happen sometimes

  // Copy the encrypted bytes to RESULT variable
  setLength(result, dataOut.cbData);
  move(dataOut.pbData^, result[0], dataOut.cbData);
  LocalFree(HLOCAL(dataOut.pbData));                  // http://msdn.microsoft.com/en-us/library/windows/desktop/aa380261(v=vs.85).aspx
//  fillChar(fpDataIn[0], length(fpDataIn), #0);  // Eventually erase input buffer i.e. not to leave sensitive data in memory
end;

function dpApiUnprotectData(fpDataIn: tBytes): tBytes;
var
  dataIn,               // Input buffer (clear-text/data)
  dataOut: DATA_BLOB;   // Output buffer (encrypted)
begin
  dataOut.cbData := 0;
  dataOut.pbData := nil;

  dataIn.cbData := length(fpDataIn);
  dataIn.pbData := @fpDataIn[0];

  if not CryptUnprotectData(
    @dataIn,  
    nil, 
    nil, 
    nil, 
    nil, 
    0,         // Possible flags: http://msdn.microsoft.com/en-us/library/windows/desktop/aa380261%28v=vs.85%29.aspx 
               // 0 (zero) means only the user that encrypted the data will be able to decrypt it
    @dataOut
  ) then
    RaiseLastOSError;

  setLength(result, dataOut.cbData);                  // Copy decrypted bytes in the RESULT variable
  move(dataOut.pbData^, result[0], dataOut.cbData);   
  LocalFree(HLOCAL(dataOut.pbData));                  // http://msdn.microsoft.com/en-us/library/windows/desktop/aa380882%28v=vs.85%29.aspx
end;

procedure testDpApi;
var
  bytesClearTextIn,       // Holds input bytes
  bytesClearTextOut,      // Holds output bytes
  bytesEncrypted: tBytes; // Holds the resulting encrypted bytes
  strIn, strOut: string;  // Input / Output strings
begin

  // *** ENCRYPT STRING TO BYTE ARRAY
  strIn := 'Some Secret Data Here';

  // Copy string contents to bytesClearTextIn
  // NB: this works for STRING type only!!! (AnsiString / UnicodeString)
  setLength(bytesClearTextIn, length(strIn) * sizeOf(char));
  move(strIn[1], bytesClearTextIn[0], length(strIn) * sizeOf(char));

  bytesEncrypted := dpApiProtectData(bytesClearTextIn);     // Encrypt data

  // *** DECRYPT BYTE ARRAY TO STRING
  bytesClearTextOut := dpApiUnprotectData(bytesEncrypted);  // Decrypt data

  // Copy decrypted bytes (bytesClearTextOut) to the output string variable
  // NB: this works for STRING type only!!! (AnsiString / UnicodeString)    
  setLength(strOut, length(bytesClearTextOut) div sizeOf(char));
  move(bytesClearTextOut[0], strOut[1], length(bytesClearTextOut));

  assert(strOut = strIn, 'Boom!');  // Boom should never booom :)

end; 
```

笔记：

*   该示例是使用 CryptProtectData / CryptUnprotectData 的轻量级版本；
*   加密是面向字节的，所以更容易使用 tBytes (tBytes = array of byte);
*   如果输入输出字符串是UTF8String，那么去掉"* sizeOf(char)"，因为UTF8String的char只有1个字节
*   [CryptProtectMemory](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380262%28v=vs.85%29.aspx) / [CryptUnProtectMemory](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380890%28v=vs.85%29.aspx)的使用类似

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-10-02T18:24:45.157

如果您的问题只是让用户不必每次都输入密码，那么您应该知道 Windows 已经有密码存储系统。

如果您转到**Control Panel** -> **Credential Manager**。从那里您正在寻找*Windows Credentials* -> *Generic Credentials*。

从那里您可以看到存储**远程桌面**密码等内容的位置相同：

[![在此处输入图像描述](../Images/c297404671263c1e4234691710f17e02.png)](https://i.stack.imgur.com/ARRKi.png)

公开此功能的 API 是[`CredRead`](https://msdn.microsoft.com/en-us/library/windows/desktop/aa374804.aspx)、[`CredWrite`](https://msdn.microsoft.com/en-us/library/windows/desktop/aa375187.aspx)和[`CredDelete`](https://msdn.microsoft.com/en-us/library/windows/desktop/aa374787.aspx)。

我将它们包含在三个函数中：

```
function CredReadGenericCredentials(const Target: UnicodeString; var Username, Password: UnicodeString): Boolean;
function CredWriteGenericCredentials(const Target, Username, Password: UnicodeString): Boolean;
function CredDeleteGenericCredentials(const Target: UnicodeString): Boolean; 
```

*目标*是识别凭证的事物。我通常使用应用程序名称。

```
String target = ExtractFilename(ParamStr(0)); //e.g. 'Contoso.exe' 
```

那么它很简单：

```
CredWriteGenericCredentials(ExtractFilename(ParamStr(0)), username, password); 
```

然后，您可以在凭据管理器中看到它们：

[![在此处输入图像描述](../Images/55dfdd9fc2fb0cc81196b06389ccf43c.png)](https://i.stack.imgur.com/RY0Tz.png)

当您想读回它们时：

```
CredReadGenericCredentials(ExtractFilename(ParamStr(0)), {var}username, {var}password); 
```

有额外的 UI 工作，你必须：

*   检测到没有存储凭据，并提示用户输入凭据
*   检测到保存的用户名/密码无效并提示输入新的/正确的凭据，尝试连接并保存新的正确凭据

读取存储的凭据：

```
function CredReadGenericCredentials(const Target: UnicodeString; var Username, Password: UnicodeString): Boolean;
var
    credential: PCREDENTIALW;
    le: DWORD;
    s: string;
begin
    Result := False;

    credential := nil;
    if not CredReadW(Target, CRED_TYPE_GENERIC, 0, {var}credential) then
    begin
        le := GetLastError;
        s := 'Could not get "'+Target+'" generic credentials: '+SysErrorMessage(le)+' '+IntToStr(le);
        OutputDebugString(PChar(s));
        Exit;
    end;

    try
        username := Credential.UserName;
        password := WideCharToWideString(PWideChar(Credential.CredentialBlob), Credential.CredentialBlobSize div 2); //By convention blobs that contain strings do not have a trailing NULL.
    finally
        CredFree(Credential);
    end;

    Result := True;
end; 
```

写入存储的凭据：

```
function CredWriteGenericCredentials(const Target, Username, Password: UnicodeString): Boolean;
var
    persistType: DWORD;
    Credentials: CREDENTIALW;
    le: DWORD;
    s: string;
begin
    ZeroMemory(@Credentials, SizeOf(Credentials));
    Credentials.TargetName := PWideChar(Target); //cannot be longer than CRED_MAX_GENERIC_TARGET_NAME_LENGTH (32767) characters. Recommended format "Company_Target"
    Credentials.Type_ := CRED_TYPE_GENERIC;
    Credentials.UserName := PWideChar(Username);
    Credentials.Persist := CRED_PERSIST_LOCAL_MACHINE;
    Credentials.CredentialBlob := PByte(Password);
    Credentials.CredentialBlobSize := 2*(Length(Password)); //By convention no trailing null. Cannot be longer than CRED_MAX_CREDENTIAL_BLOB_SIZE (512) bytes
    Credentials.UserName := PWideChar(Username);
    Result := CredWriteW(Credentials, 0);
    end;
end; 
```

然后删除：

```
function CredDeleteGenericCredentials(const Target: UnicodeString): Boolean;
begin
    Result := CredDelete(Target, CRED_TYPE_GENERIC);
end; 
```

## CredRead 是 CryptProtectData 的包装器

需要注意的是 CredWrite/CredRead 内部使用`CryptProtectData`.

*   它也只是选择将凭据存储在您的某个地方
*   它还提供了一个 UI 供用户查看、管理，甚至手动输入和更改保存的凭据

使用`CryptProtectData`你自己的区别在于你只得到一个 blob。您可以将其存储在某个地方，然后再检索它。

这是很好的包装器`CryptProtectData`和`CryptUnprotectData`存储密码时：

```
function EncryptString(const Plaintext: UnicodeString; const AdditionalEntropy: UnicodeString): TBytes;
function DecryptString(const Blob: TBytes; const AdditionalEntropy: UnicodeString): UnicodeString; 
```

这很容易使用：

```
procedure TForm1.TestStringEncryption;
var
    encryptedBlob: TBytes;
    plainText: UnicodeString;
const
    Salt = 'Salt doesn''t have to be secret; just different from the next application';
begin
    encryptedBlob := EncryptString('correct battery horse staple', Salt);

    plainText := DecryptString(encryptedBlob, salt);

    if plainText <> 'correct battery horse staple' then
        raise Exception.Create('String encryption self-test failed');
end; 
```

真正的胆子是：

```
type
    DATA_BLOB = record
            cbData: DWORD;
            pbData: PByte;
    end;
    PDATA_BLOB = ^DATA_BLOB;

const
    CRYPTPROTECT_UI_FORBIDDEN = $1;

function CryptProtectData(const DataIn: DATA_BLOB; szDataDescr: PWideChar; OptionalEntropy: PDATA_BLOB; Reserved: Pointer; PromptStruct: Pointer{PCRYPTPROTECT_PROMPTSTRUCT}; dwFlags: DWORD; var DataOut: DATA_BLOB): BOOL; stdcall; external 'Crypt32.dll' name 'CryptProtectData';
function CryptUnprotectData(const DataIn: DATA_BLOB; szDataDescr: PPWideChar; OptionalEntropy: PDATA_BLOB; Reserved: Pointer; PromptStruct: Pointer{PCRYPTPROTECT_PROMPTSTRUCT}; dwFlags: DWORD; var DataOut: DATA_BLOB): Bool; stdcall; external 'Crypt32.dll' name 'CryptUnprotectData';

function EncryptString(const Plaintext: UnicodeString; const AdditionalEntropy: UnicodeString): TBytes;
var
    blobIn: DATA_BLOB;
    blobOut: DATA_BLOB;
    entropyBlob: DATA_BLOB;
    pEntropy: Pointer;
    bRes: Boolean;
begin
    blobIn.pbData := Pointer(PlainText);
    blobIn.cbData := Length(PlainText)*SizeOf(WideChar);

    if AdditionalEntropy <> '' then
    begin
        entropyBlob.pbData := Pointer(AdditionalEntropy);
        entropyBlob.cbData := Length(AdditionalEntropy)*SizeOf(WideChar);
        pEntropy := @entropyBlob;
    end
    else
        pEntropy := nil;

    bRes := CryptProtectData(
            blobIn,
            nil, //data description (PWideChar)
            pentropy, //optional entropy (PDATA_BLOB)
            nil, //reserved
            nil, //prompt struct
            CRYPTPROTECT_UI_FORBIDDEN, //flags
            {var}blobOut);
    if not bRes then
        RaiseLastOSError;

    //Move output blob into resulting TBytes
    SetLength(Result, blobOut.cbData);
    Move(blobOut.pbData^, Result[0], blobOut.cbData);

    // When you have finished using the DATA_BLOB structure, free its pbData member by calling the LocalFree function
    LocalFree(HLOCAL(blobOut.pbData));
end; 
```

并解密：

```
function DecryptString(const blob: TBytes; const AdditionalEntropy: UnicodeString): UnicodeString;
var
    dataIn: DATA_BLOB;
    entropyBlob: DATA_BLOB;
    pentropy: PDATA_BLOB;
    dataOut: DATA_BLOB;
    bRes: BOOL;
begin
    dataIn.pbData := Pointer(blob);
    dataIn.cbData := Length(blob);

    if AdditionalEntropy <> '' then
    begin
        entropyBlob.pbData := Pointer(AdditionalEntropy);
        entropyBlob.cbData := Length(AdditionalEntropy)*SizeOf(WideChar);
        pentropy := @entropyBlob;
    end
    else
        pentropy := nil;

    bRes := CryptUnprotectData(
            DataIn,
            nil, //data description (PWideChar)
            pentropy, //optional entropy (PDATA_BLOB)
            nil, //reserved
            nil, //prompt struct
            CRYPTPROTECT_UI_FORBIDDEN,
            {var}dataOut);
    if not bRes then
        RaiseLastOSError;

    SetLength(Result, dataOut.cbData div 2);
    Move(dataOut.pbData^, Result[1], dataOut.cbData);
    LocalFree(HLOCAL(DataOut.pbData));
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T18:55:42.580

好的，这是一个使用 TurboPower Lockbox（**版本 2**） 的示例

```
 uses LbCipher, LbString;

  TaAES = class
  private
    Key: TKey256;
    FPassword: string;
  public
    constructor Create;

    function Code(AString: String): String;
    function Decode(AString: String): String;

    property Password: string read FPassword write FPassword;
  end;

function TaAES.Code(AString: String): String;
begin
  try
    RESULT := RDLEncryptStringCBCEx(AString, Key, SizeOf(Key), False);
  except
    RESULT := '';
  end;
end;

constructor TaAES.Create;
begin
  GenerateLMDKey(Key, SizeOf(Key), Password);
end;

function TaAES.Decode(AString: String): String;
begin
  RESULT := RDLEncryptStringCBCEx(AString, Key, SizeOf(Key), True);
end; 
```

您可以将密码保存为应用程序中的变量。没有保存到文件示例，但您可以使用`TFileStream`保存 encrypted( `code`) 密码，然后`decode`读取它:-)

# java - Java中String中的奇怪输出

> ID：13145113
> 
> 赞同：2
> 
> 时间：2012-10-30T18:07:56.520
> 
> 标签：java, string

> **可能重复：**
> [在 Java 中连接空字符串](https://stackoverflow.com/questions/4260723/concatenating-null-strings-in-java)

请在下面的代码片段中找到

```
String str = null;
str = str + "hi";

System.out.println(str) 
```

上述代码的输出是`nullhi`.

我以为输出会是`hi`，对输出感到有点惊讶，却找不到背后的原因。

有人可以解释一下吗。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T18:08:55.460

这是因为`append`方法。`+`被转换为任一`StringBuilder`或`StringBuffer`附加操作。

```
public AbstractStringBuilder append(String str) {
if (str == null) str = "null";

public static String valueOf(Object obj) {
return (obj == null) ? "null" : obj.toString();
} 
```

下面是为您的程序生成的字节码

```
 0  aconst_null
 1  astore_1 [str]
 2  new java.lang.StringBuilder [16]
 5  dup
 6  aload_1 [str]
 7  invokestatic java.lang.String.valueOf(java.lang.Object) : java.lang.String [18]
10  invokespecial java.lang.StringBuilder(java.lang.String) [24]
13  ldc <String "hi"> [27]
15  invokevirtual java.lang.StringBuilder.append(java.lang.String) : java.lang.StringBuilder [29]
18  invokevirtual java.lang.StringBuilder.toString() : java.lang.String [33]
21  astore_1 [str]
22  getstatic java.lang.System.out : java.io.PrintStream [37]
25  aload_1 [str]
26  invokevirtual java.io.PrintStream.println(java.lang.String) : void [43]
29  return 
```

所以你的代码实际上会被转换成`append(null)`然后`append("hi")`这就是为什么你会得到这样的输出

它也清楚地记录在[`15.18.1\. String Concatenation Operator +`](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.18.1)

> 实现可以选择在一个步骤中执行转换和连接，以避免创建然后丢弃中间 String 对象。为了提高重复字符串连接的性能，Java 编译器可以使用 StringBuffer 类或类似技术来减少通过计算表达式创建的中间 String 对象的数量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T18:11:44.037

来自 JLS。

[http://docs.oracle.com/javase/specs/jls/se7/html/index.html](http://docs.oracle.com/javase/specs/jls/se7/html/index.html)

**§15.18.1。字符串连接运算符 +** ([参考](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.18.1))

> 如果只有一个操作数表达式是字符串类型，则对另一个操作数执行字符串转换（第 5.1.11 节）以在运行时生成字符串。

**§5.1.11。字符串转换**（[参考](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.11)）

> 如果引用为 null，则将其转换为字符串“null”（四个 ASCII 字符 n、u、l、l）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T18:09:12.717

`null`是如果您尝试在 java 中打印空引用时打印的值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T18:09:28.077

当您将不是所有字符串的值连接在一起时，那些不是字符串的值会像 by 一样转换`String.valueOf`。 `String.valueOf(null)`是字符串`"null"`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T18:09:28.000

这是 Java 的创建者很早就做出的决定。任何连接到字符串的空值都将输出为`null`. 如果您想象您正在尝试输出日志消息，那么这种做法是有道理的：

```
String personName = null;
System.out.println("Person name is: " + personName); 
```

结果：

> 人名是：空

这种行为可以在调试时为您提供帮助，因为您知道该变量实际上是 null（而不是空字符串，例如）。

当您尝试这样做时，他们本可以选择简单地抛出异常，但是即使在执行诸如构建日志消息或异常字符串之类的操作时，也会导致很多事情中断。

他们也可以按照您的预期完成，并使空值作为空字符串输出。这就是 .NET 框架所做的。但最终，这不是他们决定做的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-30T18:20:40.097

在您显示的示例中，您将字符串 null 与 hi 连接，因此生成的输出为
**nullhi**

```
String str = null;
str = str + "hi";

System.out.println(str);

as str=str+"hi "//shows one string is concatenating with the other 
```

所以你得到的输出是正确的。

# javascript - 使用 jQuery 进行字符串操作

> ID：13145115
> 
> 赞同：2
> 
> 时间：2012-10-30T18:08:11.923
> 
> 标签：javascript, jquery, string

我想知道如何在单击按钮时从单词中删除元音？

这是我想要做的 - [http://www.marcia.bnmla.com/~marcia/project0.html](http://www.marcia.bnmla.com/~marcia/project0.html)

我需要使用 jQuery 删除第二个框中的元音，以便在单击按钮时仅显示辅音。我有它，它在单击按钮时将“MRC”显示为文本，我需要使用字符串操作重做它，以便我可以将单词更改为我的代码中的任何内容，它会删除该单词中的元音。我显然是新来的。请帮我！

这是我的代码：

```
<div id="marcia_box">
        <p id="marciatext">marcia</p>
        <div id="marcia_boxBtn"><button id="marciaBtn">Marcia</button></div>
</div>

$("#marciaBtn").click(function() {
    $("#marcia_box").css("background-color","#999");
    $("#marciatext").html('mrc');
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T18:12:17.487

你真的需要 jQuery 吗？普通的旧 JavaScript 呢？

```
"abcdef".replace(/[aeiou]/gi, "")  // => "bcdf" 
```

怎么样？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T18:13:02.117

jQuery 允许您将一个函数传递给`.html`，它应该返回一个新的 HTML 字符串。jQuery 将传递旧的 HTML，因此您可以执行以下操作：

```
$("#marciatext").html(function(i, current) {
  return current.replace(/[aeiou]/g, "");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T18:18:40.010

**[演示](http://jsbin.com/utakef/3/edit)**

这将在现在和将来帮助您进行其他转换，特别是
**在两个数组键之间切换**

```
var c=0, text=['marcia', 'mrc'];

$("#marciaBtn").click(function() {
    $("#marciatext").html( text[ ++c%2 ] );
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T18:14:45.343

正如 Jarrett Meyer 所示，删除元音与 jQuery 部分无关。但只是为了向您展示如何将它与 jQuery 放在一起（因为您说您是它的新手），这里有一个示例：

```
$("#marciatext").text($("#marciatext").text().replace(/[aeiou]/gi, "")); 
```

# php - php函数中的意外输出

> ID：13145119
> 
> 赞同：1
> 
> 时间：2012-10-30T18:08:27.360
> 
> 标签：php, function

这是我在 PHP 上制作的一个简单函数。问题是它给出了完全出乎意料的输出。

从我的数据库中，它需要 $takings = 242 和 $cost = 81 所以它应该显示 242-81=161 作为答案。但它显示的是 242。可能是什么问题？

```
function differences($takings,$cost)
{
$difference = $takings - $cost;

if($difference < 0)
{
    $color = red;
    $difference = '$'.$difference.'million';
}

elseif($difference > 0)
{
   $color = green;
   $difference = '$'.$difference.='million';
}   

elseif($difference = 0)
{
   $color = blue;
   $difference = "broken even ";
}

return '<span style="color:'.$color.';">'.$difference.'</span>';
} 
```

伙计们。这是页面的完整代码。在浏览器中打开页面时，它会显示：![在此处输入图像描述](../Images/079c84b2768f88775d90370f3631b2c9.png)

```
<?php

function getdirector($director)
{
global $db;
$query = 'select name from peopledb where peopleid = '.$director;
$result = mysql_query($query) or die(mysql_error($db));
$row = mysql_fetch_assoc($result);
extract($row);
return $name;
}

function getactor($actor)
{
$query = 'select name from peopledb where peopleid = '.$actor;
$result = mysql_query($query) or die(mysql_error($db));
$row = mysql_fetch_assoc($result);
extract($row);
return $name;
}

function getmovietype($type)
{
$query = 'select movietype from movietype where movieid = '.$type;
$result = mysql_query($query) or die(mysql_error($db));
$row = mysql_fetch_assoc($result);
extract($row);
return $movietype;
}

function differences($takings,$cost)
{
$difference = $takings - $cost;

if($difference < 0)
{
    $color = red;
    $difference = '$'.$difference.'million';
}

elseif($difference > 0)
{
   $color = green;
   $difference = '$'.$difference.='million';
}   

elseif($difference = 0)
{
   $color = blue;
   $difference = "broken even ";
}

return '<span style="color:'.$color.';">'.$difference.'</span>';
}

$abc = $_GET['movieid'];

$db = mysql_connect('localhost','root','saw123') or die('Connection error');
mysql_select_db("moviesite",$db) or die(mysyql_error($db));
$query = "select moviename,releaseyear,director,actor,type,movierunningtime,moviecost,movietakings from movie where movieid = ". $abc;

$result = mysql_query($query,$db) or die(mysql_error($db));

$row = mysql_fetch_assoc($result);
$movie_name = $row['moviename'];
$movie_director = getdirector($row['director']);
$movie_releaseyear = $row['releaseyear'];
$movie_actor = getactor($row['actor']);
$movie_type = getmovietype($row['type']);
$movie_runningtime = $row['movierunningtime'].' minutes';
$movie_cost =$row['moviecost'].'million';
$movie_takings = $row['movietakings'].'million';
$movie_health = differences($row['movietakings'],$row['movie_cost']);

echo <<<ENDHTML
<html>
 <head>
   <title> Details and Reviews for the movies for $movie_name </title>
  </head>
<body>
<div style="text-align: center;">
<h2>$movie_name</h2>
<h3> details </h3>
<table cellpadding = "1" cellspacing = "4"
style = "width = 80% ;margin-left: auto;margin-right: auto;";>
<tr>
 <td><strong>Title</strong></strong></td>
 <td>$movie_name</td>
</tr>

<tr>
 <td><strong>release date</strong></strong></td>
 <td>$movie_releaseyear</td>
</tr>
<tr>

<tr>
 <td><strong>movie director</strong></strong></td>
 <td>$movie_director</td>
</tr>
<tr>

<tr>
 <td><strong>Lead Actor</strong></strong></td>
 <td>$movie_actor</td>
</tr>
<tr>

<tr>
 <td><strong>Running time</strong></strong></td>
 <td>$movie_runningtime</td>
</tr>
<tr>

<tr>
 <td><strong>Cost</strong></strong></td>
 <td>$movie_cost</td>
</tr>
<tr>

<tr>
 <td><strong>Takings</strong></strong></td>
 <td>$movie_takings</td>
</tr>
<tr>

<tr>
 <td><strong>Health</strong></strong></td>
 <td>$movie_health</td>
</tr>
<tr>

</table>
</div>

</body>
</html>
ENDHTML;

$table = <<<ENDHTML
<div style="text-align: center;">
<h2>The Ultimate movie database</h2>
<table border='1' cellpadding='1' cellspacing='2'
       style="width: 70%; margin-left: auto; margin-right: auto;">

<tr>
<th>Movie ID </th>
<th>Movie title</th>
<th>year of release </th>
<th>Movie director</th>
<th>Movie Actor</th>
<th>Movie type</th>
</tr>
ENDHTML;

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T18:21:59.947

`$movie_health = differences($row['movietakings'],$row['movie_cost']);`

应该

`$movie_health = differences($row['movietakings'],$row['moviecost']);`

注意最后一个变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:13:34.187

正如@dev-null-dweller 指出的那样，您可能实际上并没有传入`(242, 81)`. 编写一个单元测试，当给定有效输入时，您会发现该函数按预期工作。

```
<?php

function differences($takings,$cost)
{
  $difference = $takings - $cost;

  if($difference < 0) {
    $color = 'red';
    $difference = '$'.$difference.'million';
  } elseif($difference > 0) {
   $color = 'green';
   $difference = '$'.$difference.='million';
  } elseif($difference == 0) {
   $color = 'blue';
   $difference = "broken even ";
  }

  return '<span style="color:'.$color.';">'.$difference.'</span>';
}

class DifferencesTest extends PHPUnit_Framework_TestCase
{
  public function testValidInput() {
    $this->assertEquals('<span style="color:green;">$161million</span>', differences(242,81));
  }

  public function testInvalidInput() {
    $this->assertEquals('<span style="color:green;">$242million</span>', differences(242,NULL));
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T18:18:25.360

```
$movie_cost =$row['moviecost'].'million';
$movie_takings = $row['movietakings'].'million';
$movie_health = differences($row['movietakings'],$row['movie_cost']); 
```

为了澄清我之前的回答：请注意“movie_cost”中存在下划线，而“moviecost”中没有下划线。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-30T18:18:58.387

我认为值没有分配给成本变量。所以检查以在函数中回显成本变量。

# php - 如何使用从 PHP 到 JavaScript 的输入框 ID？

> ID：13145121
> 
> 赞同：0
> 
> 时间：2012-10-30T18:08:40.567
> 
> 标签：php, javascript, html

我的 JavaScript 函数工作正常，但我在从 PHP 输入框中获取不同的 id 时遇到问题。

## JavaScript

```
window.onload = function()
{   
new JsDatePick({
useMode:2,
target:"inputField1", //HERE I WOULD LIKE TO PASS DIFFERENT ID ex. "inputField1"+ "i"
dateFormat:"%Y-%M-%d",
yearsRange:[1978,2120],
limitToToday:false,
cellColorScheme:"beige",
imgPath:"main/img/",
weekStartDay:1
}); 
```

## 我的 PHP 输入框 for loop

```
<div class = "start_date" >
<strong><label for="start_date">Start Date</label></strong>
<br/><br/> 
<?php
for($k=1;$k<=$textboxindex;$k++)
{
echo "<input type=\"text\" class='textboxsize' id= \"inputField1\"   name=\"start_date[]\" value=\"$start_date\" />";
echo "<br/>";
 }
?>
</div> 
```

它工作正常，但我想在 JavaScript 函数中使用不同的 ID 名称。有任何想法吗？

这行不通...

```
echo "<input type=\"text\" class='textboxsize' id= \"inputField+$k\" name=\"start_date[]\" value=\"$start_date\" />"; 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:16:00.620

改变：

```
id= \"inputField+$k\" name=... 
```

至：

```
id=\"inputfield$k\" name=... 
```

搞砸的是“+”号。PHP 使用“.” 连接字符串。 `ECHO`正确退出`$k`，你不应该有任何麻烦

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T18:21:15.150

最有可能与`JsDatePick`小部件有关。它的`target`参数采用元素的单个 ID，因此您必须将 JS 代码包装在一个循环中，并为每个字段 ID 启动一个单独的小部件实例。

假设您的输入字段索引从 1 开始：

```
window.onload = function()
{   
    var i = <?=$totalNumberOfInputs;?>

    for(j=1;j<=i;j++) {  
        new JsDatePick({
            useMode:2,
            target:"inputField" + j, //HERE I WOULD LIKE TO PASS DIFFERENT ID ex. "inputField1" + j
            dateFormat:"%Y-%M-%d",
            yearsRange:[1978,2120],
            limitToToday:false,
            cellColorScheme:"beige",
            imgPath:"main/img/",
            weekStartDay:1
        });
    }
} 
```

您不需要将 + 号用于在双引号内连接字符串（顺便说一下，它是点）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T18:16:53.650

```
 //this is doesn't work 
echo "<input type=\"text\" class='textboxsize' id= \"inputField$k\" name=\"start_date[]\" value=\"$start_date\" />"; 
```

只需删除该`+`标志。

# jquery - 使用 jQuery 通过 ajax 查找（不同）页面上的所有图像以进行预加载

> ID：13145122
> 
> 赞同：1
> 
> 时间：2012-10-30T18:08:43.827
> 
> 标签：jquery, ajax, preload, image-preloader

我正在构建一个应用程序 - 从 flash 转换为 html/js 并使用 jQuery。页面/场景是通过 ajax 拉入的，我有一个“加载”覆盖，直到这些被加载但是此外我想为下一页和上一页预加载图像。

所以我通过 ajax 拉入 page-5.php 然后我需要在后台为第 4/6 页预加载图像以加快用户速度。

我有一个预加载函数，我可以将一组图像插入其中——例如，棘手的一点是使用 ajax 来查找 page-6.php 上所有图像的 src。

所以我需要调用： - 找到 page-6.php 上的所有图像，将它们的 src 抓取到一个数组中。可能的？

我想我可以在每个包含图像的页面上隐藏一个数组并抓住它，但我宁愿让它保持动态。

非常感谢任何想法/帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T18:19:29.260

您应该能够使用常规 jquery 解析 html 响应：

```
$.ajax({
   url:[your url],
   success: function(data) {
       $("img", data).each(function() {
           alert($(this).attr("src");
       });
   }
}); 
```

编辑：

```
 $.ajax({
               url: 'http://localhost:8888/site/scenarios/scenario-1.php',
               success: function(data) {
                   $("img", data).each(function() {
                      alert( $(this).attr("src") );
                   });
               }
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:26:57.183

我建议在同一页面上的两个隐藏 div 中预加载下一个/上一个页面，直到被选中才会显示。这样您就不必从您身边进行任何解析/加载，因为浏览器会很好地处理它。

[这](http://www.designchemical.com/blog/index.php/jquery/simple-tabs-with-ajax-and-jquery/)是一个关于如何使用 ajax 加载选项卡的示例，但在您的情况下，您需要预取左右 div，而不是在单击时加载它。

# python - 在 Amazon EC2 集群上使用 python scikit-learn 库执行网格搜索

> ID：13145124
> 
> 赞同：5
> 
> 时间：2012-10-30T18:08:53.540
> 
> 标签：python, amazon-ec2, scikit-learn

对不起，如果这个问题有点特定于 python [Scikit-learn](http://scikit-learn.org/stable/)库。

我正在尝试执行网格搜索以找到 scikit-learn 的[GradientBoostingRegressor](http://scikit-learn.org/stable/modules/ensemble.html#regression)的最佳参数。问题是，我不知道从哪里开始。过去我使用过 R 和 RStudio 设置，但我现在正试图迁移到 Python 进行数据挖掘，而 Scikit 似乎很有希望。

任何人都可以分享一些他们可能用于在 Amazon EC2 集群上计算的简单设置代码，或者可能指向该库的有用示例参考以用于其他机器学习算法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T18:45:42.067

据我所知，GBRT 是一种非常顺序的算法，因此没有简单的方法可以并行运行它。

随机森林/ExtraTrees 模型是令人尴尬的并行，因此更适合在集群上训练模型。

scikit-learn 对使用 joblib 的单机多处理有一些内置支持（检查接受`n_jobs`参数的模型的文档字符串）。我们计划在某个时候在 joblib 中实现一个任务调度框架。因此，我们可以例如利用 IPython 并行作为后端在集群上运行。但是，目前还没有任何现成可用的东西。

如果您准备花一些时间自己做，我建议您看看 StarCluster 及其 IPython 插件：

*   [http://star.mit.edu/cluster/](http://star.mit.edu/cluster/)

*   [http://star.mit.edu/cluster/docs/latest/plugins/ipython.html](http://star.mit.edu/cluster/docs/latest/plugins/ipython.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-31T19:53:39.613

我完全同意 ogrisel - StarCluster 非常方便，因为它允许您立即设置 IPython 集群并支持点实例，这非常棒，因为它们比普通实例便宜得多。

[您可以在此 gist](https://gist.github.com/3989337)中找到一些代码，向您展示如何在 IPython 集群上对 sklearn 的梯度提升估计器进行分布式网格搜索。

它结合交叉验证进行网格搜索，并将评估的网格点存储在 MongoDB 数据库中。

该代码会根据平均交叉验证分数自动选择最佳数量的树。

快乐调音！

# python - 尝试使用 list.insert 时出现 Python 索引错误

> ID：13145129
> 
> 赞同：1
> 
> 时间：2012-10-30T18:09:07.290
> 
> 标签：python, insert, indexing, range

这是我的代码的一部分（很大一部分）。 [http://pastebin.com/KCZNkYNB](http://pastebin.com/KCZNkYNB)

根据设计，我正在发生的事情是遍历这个序列，直到我计算的距离最小化 1 厘米。在那之前我不想进入下一个时代，这就是为什么我认为我应该使用 .insert 作为我的列表。我需要覆盖它当前所在索引处的数据。

我得到的错误是：

* * *

```
Traceback (most recent call last):
  File "receiver2.py", line 342, in <module>
    main()
  File "receiver2.py", line 244, in main
    N.insert(k, ( dec.sqrt( (dec(satellite_output.x[k]) - dec(x_veh_coords[epoch]))**2 + (dec(satellite_output.y[k]) - d
ec(y_veh_coords[epoch]))**2 + (dec(satellite_output.z[k]) - dec(z_veh_coords[epoch]))**2 ) ) )
IndexError: list index out of range 
```

* * *

此错误对应于 pastebin 文件中的第 54 行。

我不明白的是插入时索引如何超出范围。完整的 pastebin 输出： [http://pastebin.com/qKhRjn2Q](http://pastebin.com/qKhRjn2Q) 您将在该输出的底部看到最后一个“k”索引为 7，然后它达到 epoch 1，并递增到索引 8，但随后被索引淘汰超出范围。我对为什么会发生这种情况感到非常困惑。我向您保证，所有试图插入的数据确实存在，就好像我要推荐 .insert 部分并取消注释 .append 一样，它工作正常。不幸的是，我刚刚意识到 append 正在“隐藏”我需要的数据，以便正确计算我的雅可比。

我希望我已经提供了足够的信息。谢谢你尽你所能的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:17:53.330

您在错误行中有六个索引操作（例如`satellite_output.x[k]`）；其中之一可能是导致故障，而不是插入操作。

错误消息没有它可能有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:49:36.700

我想通了。:D

我需要做的是确保当我的距离最小化到我正在寻找的精度时，我需要设置我的 x,y,z vech 坐标以在下一个时期使用新的近似笛卡尔坐标。

我很感激所有的回复，很抱歉浪费了你一点时间在如此琐碎的事情上。

# java - Spring webflow externalRedirect重新启动相同的流程

> ID：13145132
> 
> 赞同：0
> 
> 时间：2012-10-30T18:09:26.433
> 
> 标签：java, spring-mvc, spring-webflow, cas

我正在使用 CAS，刚刚从 3.4.8 更新到 3.5.1。我认为我已经处理了*大部分*的一千个变化。但是，完成后的 externalRedirect 似乎以某种方式被破坏了。它只是循环回到登录网络流的开始。这怎么可能发生？

这是达到的最终状态：

```
 <!-- The "redirect" end state allows CAS to properly end the workflow while 
    still redirecting the user back to the service required. -->
  <end-state id="redirectView"
    view="externalRedirect:${requestScope.response.url}" /> 
```

我知道它已经到达，因为我在这个方法（的`org.springframework.webflow.action.ExternalRedirectAction`）中设置了一个断点：

```
protected Event doExecute(RequestContext context) throws Exception {
    String resourceUri = (String) this.resourceUri.getValue(context);
    context.getExternalContext().requestExternalRedirect(resourceUri);
    return success();
} 
```

如果我在此方法返回之前检查 resourceUri 的值，我会看到此请求应重定向到的 uri：

```
http://mycompany.com:8080/c/portal/login?redirect=%2Fweb%2Fguest%2Fhome&ticket=ST-4-jVOtEEZcy9bXdb4xiV3l-cas 
```

但是，如果我只是从该断点运行，而不是被重定向到该页面，则相同的登录 Web 流程会重新开始。这里发生了什么？我应该去哪里看？关于调试的任何提示？

**- - - - - - - - 更新 - - - - - - - -**

所以在对代码进行了 0 次修改后，只需添加一些额外的断点，它现在就可以按预期工作了。我不知道这里发生了什么，但我终于找到了实际重定向发生的地方。对于那些感兴趣的人，重定向发生在：

```
org.springframework.webflow.mvc.servlet.FlowHandlerAdapter.handleFlowExecutionResult(
        FlowExecutionResult result, ServletExternalContext context,
        HttpServletRequest request, HttpServletResponse response, FlowHandler handler) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-31T21:01:03.313

看起来这个线程已经休眠了一段时间，但我想为将来可能出现的任何人提供一些信息。下面的解释来源于我对 CAS 4.0.1 的体验。如果这也不适用于旧版本，我会感到震惊......

首先要检查的是您的身份验证过程是否相对缓慢。例如，如果您是通过 VPN 链接或其他方式访问身份验证数据库的开发人员。或者，如果您的身份验证查询（和票证存储）相对较慢......

如果这适用于您，我在 CAS 中发现了一个问题，它以一种奇怪的方式与 Tomcat 交互，表现出上述行为。

CAS 中的问题在于称为 TerminateWebSessionListener 的 Web 流侦听器。这似乎是通过在流程完成后快速过期会话来保持低内存使用率的一种尝试。问题是，它的实现非常天真。它只是抓取会话并在其上设置 2 秒的“最大非活动间隔”（默认情况下 - 您可以使用`timeToDieInSeconds`TerminateWebSessionListener 中的属性更改此设置`cas-servlet.xml`。）

与 Tomcat 的交互是这样的：Tomcat*仅*在请求中第一次访问会话时标记会话的“最后访问”时间。*但是，每次检索会话时*，都会根据当前时间检查上次访问时间，以确定是否已过失效间隔。

所以发生的事情是 TerminateWebSessionListener 期望*在那一刻之后*`HttpSession.setMaxInactiveInterval(2)`导致会话无效 2 秒。它真正告诉 Tomcat 要做的是*在当前请求中第一次访问会话后 2 秒使会话无效。*如果您的身份验证/登录请求发生的时间超过 2 秒，BOOM!--下次有人在同一请求中请求它时，您的会话将无效。不幸的是，这确实发生在 Spring WebFlow 本身中。所以你在这里有一个竞争条件。

 **我将对此进行更多思考，并希望向 CAS 团队提出解决方案。同时，您可以禁用 TerminateWebSessionListener `cas-servlet.xml`，也可以将其`timeToDieInSeconds`提升到您期望的值，该值比完成身份验证请求所需的时间更长。30秒可能吗？这样做似乎是合理的。这似乎不是一种安全措施，只是一种节省内存的措施。

代码参考：

*   CAS 4.0.1
    *   TerminateWebSessionListener.java:33 ( `sessionEnded()`)
        *   CAS 在这里设置会话失效间隔。
*   雄猫 7.0.55：
    *   Request.java:338（`session`实例变量。）
        *   Tomcat 在其持续时间内将会话存储在请求中。
    *   请求.java:2899 ( `doGetSession()`)
        *   `access()`如果已经缓存在请求中，则会话提前返回。
    *   请求.java:2921 ( `doGetSession()`)
        *   在请求中的第一次访问时，会在请求中查找、`access()`调用和缓存会话。

（注意：`StandardSession.access()`简单地用*最后访问*时间标记会话`System.currentTimeMillis()`。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T19:19:01.297

我发现了一些有用的东西。可能适用于您的特定问题，也可能不适用于您的具体问题。但是，如果您将此流程称为子流程，`view`则将忽略结束状态的参数。

但是，如果您只是正常调用此流程，它将执行重定向。解决此问题的方法是使用 a`view-state`而不是 a `end-state`。但这将使您保持流动和父母流动开放。**

# linux - Ruby 进程的 Chroot 命令

> ID：13145136
> 
> 赞同：1
> 
> 时间：2012-10-30T18:09:40.280
> 
> 标签：linux, unix, ubuntu, sinatra, chroot

拥有以下`app.rb`Ruby 应用程序：

```
#!/usr/local/Cellar/rbenv/0.3.0/versions/1.9.3-p194/bin/ruby

require 'rubygems'
require 'sinatra'

get '/pwd' do
  `pwd`
end 
```

我可以使用以下命令将其作为网络服务器启动：

*   `./Users/doug/code/backdore/app.rb`
*   `ruby /Users/doug/code/backdore/app.rb`
*   `/usr/local/Cellar/rbenv/0.3.0/versions/1.9.3-p194/bin/ruby /Users/doug/code/backdore/app.rb`

然后，使用网络客户端，GET on`http://localhost:4567/pwd`可以返回`/Users/doug/code/backdore`，这是我启动命令的当前路径。

如果我停止服务器，并再次执行`Users/doug/code/`文件夹中的命令，那么服务器返回的路径将是：`/Users/doug/code`.

我的问题如下，因为我想对这个网络服务器进行*chroot*，我需要在命令前加上以下内容：

```
sudo chroot /Users/doug/code/backdore /usr/local/Cellar/rbenv/0.3.0/versions/1.9.3-p194/bin/ruby "app.rb" 
```

但是，这不起作用，我收到以下错误消息：

> chroot：/usr/local/Cellar/rbenv/0.3.0/versions/1.9.3-p194/bin/ruby：没有这样的文件或目录

我正在使用 Mac OS X，但我想这在 Ubuntu 上应该是类似的。我怎么能在 ' ' 中 chroot 这个服务器`/Users/doug/code/backdore`，以便`/`从服务器中只看到 ' '？

**编辑**

为了在 chroot 中有一个 Ruby 解释器，我刚刚安装了[mruby](http://geekmonkey.org/articles/36-an-introduction-to-mini-ruby)并用这个脚本做了一些测试......

```
$ cat test/script.rb
loop do
  puts "hello world"
end 
```

我现在的位置是：

```
$ pwd
/Users/doug/code/mruby 
```

所以，只是为了测试脚本，

```
$ bin/mruby test/script.rb
hello world
hello world
hell^C 
```

它工作正常。但是，如果我尝试像这样 chroot：

```
$ chroot /Users/doug/code/mruby bin/mruby test/script.rb
chroot: /Users/doug/code/mruby: Operation not permitted 
```

如果我这样尝试：

```
$ sudo chroot /Users/doug/code/mruby bin/mruby test/script.rb
Password:
~/code/mruby ‹1.9.3-p194›  ‹master*› $ 
```

什么也没有发生（它应该是一个无限循环）。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T18:24:02.393

在 chroot 下运行进程时，该进程使用的**所有**二进制文件、库和其他文件必须在其新根目录下可用。由于在（*例如，* as !）`/usr/local/Cellar`下不存在，因此命令运行失败。`/Users/doug/code/backdore`*`/Users/doug/code/backdore/usr/local/Cellar``exec``chroot`*

 *老实说，尝试在 chroot 下运行 Ruby 应用程序将非常痛苦，因为它最终需要大量的库（Ruby 和其他库）。您最好在启动后让您的进程 chroot 自己，因为这将绕过大多数库问题。*

# html-email - HTML 电子邮件下载链接

> ID：13145139
> 
> 赞同：3
> 
> 时间：2012-10-30T18:09:44.140
> 
> 标签：html-email

我创建了一个 HTML 电子邮件，其中包含一些下载 PDF 的链接，但是每次单击该链接时，它都会打开您的浏览器并弹出下载对话框。有没有办法直接把它下载到你的电脑上，而不必打开你的浏览器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T18:10:47.297

不，网络链接始终在网络浏览器中打开。另一种方法是将 PDF 附加到电子邮件中。

# asp.net-mvc - 用于身份验证和 cookie 管理的优秀 ASP.NET MVC 项目

> ID：13145141
> 
> 赞同：3
> 
> 时间：2012-10-30T18:09:47.897
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我是 ASP.NET MVC 的新手，所以我在 Codeplex/Github/Bitbucket 上寻找开源项目，我可以查看并了解如何实现身份验证、授权和实现记住我、cookie 管理等。

有人可以指导我任何在身份验证和 cookie 管理方面有很好实现的好项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:42:09.440

您可以在 codeplex -> [http://themvcforum.codeplex.com/](http://themvcforum.codeplex.com/)、nerddinner 或[http://www.asp.net/](http://www.asp.net/downloads)上列出的应用程序上找到项目，下载asp.net 中的开源免费应用程序。另一方面，如果您是 asp.net mvc 的新手，我相信您必须阅读[http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and -the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx). 多年来，微软提出了 asp.net 会员系统，但有时使用起来令人沮丧 - 使用 blob 列存储配置文件。用加洛韦的话来说，未来是简单的成员资格，并显示使用您自己的表模式来存储用户信息的可能性，包括 oauth 等等。更重要的是，一些书籍对此有详细说明，例如：Professional ASP.NET MVC 4 (Wrox Professional Guides) [

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T18:47:21.783

有很多开源项目实现身份验证、授权和实现记住我、cookie 管理。它们不同于 Orchard cms 等简单到复杂的门户系统。

*   一开始最好探索微软音乐撕裂教程和解释身份验证和授权的部分[http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-7](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-7)，这是它的来源[http://mvcmusicstore.codeplex.com/](http://mvcmusicstore.codeplex.com/)，

*   除了论坛引擎是一个始终使用授权和身份验证的 Web 应用程序之外，您可以下载一个 mvc 论坛[http://mvcforum.codeplex.com/](http://mvcforum.codeplex.com/)或[http://nearforums.codeplex.com/](http://nearforums.codeplex.com/)

*   任何 cms 都使用管理部分，您可以查看如何在 AtomicCms 上实现授权和身份验证[https://github.com/yaplex/AtomicCms](https://github.com/yaplex/AtomicCms)

*   此外，您还可以挖掘 Orchard [http://orchard.codeplex.com/](http://orchard.codeplex.com/)等大型门户系统的源代码，它也实现了授权功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T18:49:42.347

我之前收藏的博客等上可用的示例是：

[C# MVC3 自定义成员资格提供程序、自定义角色、Razor 实体框架和 LINQ](http://custommemberprovider.codeplex.com/)

[Altairis 网络安全](http://altairiswebsecurity.codeplex.com/)

[如何在我现有的数据库中安装 asp.net 成员模式？](http://tipsaspdotnet.blogspot.com/2011/09/how-can-i-install-aspnet-membership-in.html)

[在 SQL Server (VB) 中创建成员资格架构](http://www.asp.net/web-forms/tutorials/security/membership/creating-the-membership-schema-in-sql-server-vb)

[在 MVC 3 中实现自己的 RoleProvider 和 MembershipProvider](http://brianlegg.com/post/2011/05/09/Implementing-your-own-RoleProvider-and-MembershipProvider-in-MVC-3.aspx)

[SimpleMembership、Membership Providers、Universal Providers 和新的 ASP.NET 4.5 Web 窗体和 ASP.NET MVC 4 模板](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)

[Code First EF 4.1 与 Altairis Membership/Role Provider](http://www.culbertsonexchange.com/wp/?p=120)

[MVC 的自定义角色提供程序](http://kitsula.com/Article/Custom-Role-Provider-for-MVC)

但是请在此处查看我之前的答案[ASP MVC 3 Basic Register / Login / Logout on a different table](https://stackoverflow.com/questions/10066025/asp-mvc-3-basic-register-login-logout-on-a-different-table/10067020#10067020) ，因为将 MembershipProvider 与您自己的数据库一起使用很容易实现并且效果很好。

# windows - 使用 icacls 删除显式强制标签

> ID：13145148
> 
> 赞同：8
> 
> 时间：2012-10-30T18:10:15.247
> 
> 标签：windows, acl, explicit, integrity, levels

我在 Windows 7 上对完整性级别和 icacls 进行了一些实验。我设置了强制完整性级别，以便得到如下所示的内容：

```
C:\Debug>icacls test.exe
test.exe Everyone:(I)(RX)
                BUILTIN\Administrators:(I)(F)
                NT AUTHORITY\SYSTEM:(I)(F)
                Mandatory Label\Low Mandatory Level:(NW)

Successfully processed 1 files; Failed processing 0 files 
```

但是，既然已明确设置强制标签，我似乎无法删除它。最初，输出看起来像这样：

```
C:\Debug>icacls wdbp.exe
wdbp.exe Everyone:(I)(RX)
         BUILTIN\Administrators:(I)(F)
         NT AUTHORITY\SYSTEM:(I)(F)

Successfully processed 1 files; Failed processing 0 files 
```

默认情况下，它只是从没有强制标签的目录继承。我尝试过使用 icacls 的继承选项，并尝试删除与标签对应的 SID，这些都没有显示错误，但实际上并没有删除强制标签。

有人有想法么？

# css - 以行高为宽度单位

> ID：13145152
> 
> 赞同：4
> 
> 时间：2012-10-30T18:10:34.583
> 
> 标签：css

编辑：我强调*不想*依赖固定大小的*任何东西*。

我有一张想要与文本内联显示的图像。我想要图像

a) 是正方形的，并且

b) 与文字一样高。

假设存在一个名为“H”的 CSS 单元，它等于一行的高度，就像“ex”等于“x”的高度一样。我希望能够编写这样的代码：

```
img.myclass {
    width: 1H;
    height: 1H;
} 
```

看来[实际上不存在这样的单位](http://www.w3schools.com/cssref/css_units.asp)。我对吗？

如果没有这样的单位（准确地说，我想要从一行基线到下一行基线的距离）那么我如何在没有 Javascript 的情况下实现填充方形图像的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-04-22T23:29:18.240

显然有一个`lh`单位在工作：[https ://css-tricks.com/lh-and-rlh-units/](https://css-tricks.com/lh-and-rlh-units/)

但是，在那之前……

您可以使用 CSS 自定义属性设置行高。就像是：

```
* {
  line-height: var(--line-height);
}

.mydiv {
  --line-height: 1.37;
  font-size: 24px;
} 
```

然后使用 得到一条线的实际高度（或者`--line-height`用`1em`多少个 em 来获得你想要的线的高度的倍数）`calc`，例如：

```
.mydiv p {
  padding-left: calc(var(--line-height) * 1em);
} 
```

主要的警告是，这仅在您使用无单位值时才有效`--line-height`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:14:03.820

您可以选择一个固定的宽度/高度并将 line-height 和 img 宽度/高度设置为该恒定大小，或者您可以使用 javascript。在设置新的 CSS 属性时，无法引用另一个 CSS 属性，这似乎是您所希望的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T18:22:09.243

我可能看的不对……但你不能给线一个特定的高度，然后设置图像以适应它吗？

```
<span style="display:inline-block;height:20px;">

Hello <img src="testtext.png" style="max-height:100%;" />

</span> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T18:27:29.490

如果您将 设置`line-height`为特定值`x`并将您`font-size`设置为特定值，`y`那么您知道行高将为：`x * y`。然后，对于任何给定数量的文本，您都有一个高度。

示例：`font-size: 10px;` `line-height: 120%;`您的行高将为`120% * 10px`或`12px`。如果您的文本块是 10 行，那么您知道它的高度为 120 像素。有关详细信息，请参阅[W3 行高](http://www.w3.org/TR/REC-CSS1/#line-height)和[W3 字体大小](http://www.w3.org/TR/REC-CSS1/#font-size)。

**注意：**这是一种***非常***不精确的做事方式。从屏幕大小到最终用户浏览器上的自定义字体大小的任何内容都会引发这种情况。正如@Irongaze.com 所说，您在设置新设置时不能参考其他css设置。这最好在 javascript 中完成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T18:29:02.177

CSS 有一个`line-height`属性，所以如果你将它设置为某个值，比如`1.2`or `120%`，那么你就会知道 em 与行高的比率是多少，并且可以将它用作图像的单位。

```
img.myclass {width:1.2em; height:1.2em} 
```

但是请注意，默认情况下，图像与基线垂直对齐，而不是与线的底部对齐。另请参阅我在[此答案](https://stackoverflow.com/questions/13111136/why-is-there-a-pesky-little-space-between-img-and-other-elements/13111172#13111172)中的插图。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-30T18:24:20.377

您可以在 ems 或 exs 中设置文本的字体大小和/或行高，**并且**可以对图像高度/宽度使用相同的度量。虽然如果您想使用变量设置它们，我可能会建议[LESSCSS](http://lesscss.org/)

# javascript - 数组/对象奇怪的行为

> ID：13145154
> 
> 赞同：0
> 
> 时间：2012-10-30T18:10:37.693
> 
> 标签：javascript, ios

遵循 Javascript：

**在职的**

```
 //Going to set on local storage on an iPhone
            window.localStorage.setItem("emailaddress", "test@test.de");
            //Loading local storage
            var storage = window.localStorage.getItem("emailaddress");
            alert(storage); //test@test.de 
            var servicename = "test";
            window.plugins.keychain.getForKey(storage, servicename); 
```

**不工作**

```
 //Going to set on local storage on an iPhone
            window.localStorage.setItem("emailaddress", "test@test.de" + ":1");
            //Loading local storage
            var storage = window.localStorage.getItem("emailaddress");
            var array = new Array();
            var array = storage.split(":");
            var emailaddress = array[0];
            alert(emailaddress); //test@test.de
            var servicename = "test";
            window.plugins.keychain.getForKey(emailaddress, servicename); 
```

为什么？实际上我需要第二个，因为我想存储的不仅仅是电子邮件地址，例如电子邮件地址/状态/时间戳......

# c# - 将查询字符串绑定到 ASP.NET MVC 中的对象？

> ID：13145160
> 
> 赞同：0
> 
> 时间：2012-10-30T18:10:58.187
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, controller, model-binding

我有一个绑定到 IEnumerable 模型的网格控件。如何在我的控制器中保存记录。我使用的网格控件来自 Telerik 'Kendo'。返回的请求是一个字符串，我想获取我的绑定对象“CustomerViewModel”，但是当我传入我的对象时它返回 null。我尝试了不同类型的信息，它似乎只适用于我指定我想传递的属性。请在下面找到代码并提供帮助？

```
[AcceptVerbs(HttpVerbs.Post)]
        public ActionResult Save([DataSourceRequest] DataSourceRequest request, CustomerViewModel customerViewModel)
        {
            if (customerViewModel != null && ModelState.IsValid)
            {
                var customers = Repository.GetItems<Customer>();
                Repository.SaveChanges<Customer, CustomerViewModel, NorthWindDataContext>(customers, customerViewModel);
            }
            return Json(ModelState.ToDataSourceResult());
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T05:38:37.243

如果对象嵌入到查询字符串中，MVC 将始终将其视为字符串。

你需要做这样的事情：

```
 public ActionResult Save(string customerViewString)
    {
        var jsonSerializer = new JavaScriptSerializer();
        var customerViewModel = jsonSerializer.Deserialize<CustomerViewModel>(customerViewString);
        if (customerViewModel != null && ModelState.IsValid)
        {
            var customers = Repository.GetItems<Customer>();
            Repository.SaveChanges<Customer, CustomerViewModel, NorthWindDataContext>(customers, customerViewModel);
        }
        return Json(ModelState.ToDataSourceResult());
    } 
```

我一直在努力解决类似的问题，我无法执行 Ajax Get 或 Post，您可以将内容类型设置为 JSON。在查询字符串中似乎没有办法做到这一点（这确实有意义，因为它只是一个字符串）。

在控制器中对其进行反序列化似乎是唯一的选择。很想听听有人能以更简洁的方式做到这一点。

# jquery - 从列表项和复选框中添加值

> ID：13145161
> 
> 赞同：0
> 
> 时间：2012-10-30T18:10:59.467
> 
> 标签：jquery, html, class, checkbox

尝试从复选框和项目列表中添加价值以制作价格计算器。客户从项目列表或复选框中选择他们想要的服务类型，价格计算器给出价格报价。

```
$(".option").click(function() {
var total = 0;
$(".option:checked").each(function() {
    total += parseInt($(this).val(), 10);
});
alert(total);
});

<table width="98%" cellpadding="0" cellspacing="0" summary="Summary Here">
    <thead>
      <tr>
        <th>Basic</th>
        <th>Requirements</th>
      </tr>
    </thead>
    <tbody>
      <tr class="light">
        <td height="31">Number of Pages</td>
        <td><select class="option">
          <option value="50">1</option>
          <option value="100">2</option>
          <option value="200">3</option>
          <option value="250">4</option>
          <option value="400">5-10</option>
          <option value="800">11-20</option>
          <option value="0" selected="selected">0</option>
        </select></td>            
      </tr>
      <tr class="dark">
        <td>Domain Registration</td>
        <td><input class="option" type="checkbox" value="10" />Yes</td>
        </tr>
      <tr class="light">
        <td>Website Hosting</td>
        <td><input class="option" type="checkbox" value="60" />Yes</td>
       </tr>
       <tr class="dark">
       <th>Options Extras</th>
       <td></td>
       </tr>
      <tr class="light">

        <td>Image Gallery Page</td>
        <td><input class="option" type="checkbox" value="100" />Yes</td>
        </tr>
        <tr class="dark">
       <td>Videos</td>
       <td><input class="option" type="checkbox" value="60" />Yes</td>
       </tr>
       <tr class="light">          
        <td>Membership System</td>
        <td><input class="option" type="checkbox" value="100" />Yes</td>
        </tr>
        <tr class="dark">
       <td>Forum</td>
       <td><input class="option" type="checkbox" value="300" />Yes</td>
       <tr class="light">          
        <td>Image Creation</td>
        <td><select class="option">
          <option value="50">5-10</option>
          <option value="100">11-20</option>
          <option value="200">21-30</option>
          <option value="250">31-40</option>
          <option value="400">41-50</option>
          <option value="800">51-100</option>
          <option value="0" selected="selected">0</option>
        </select></td> </td>
        </tr>
        <tr class="dark">
       <td>Standard Mobile Website</td>
       <td><input class="option" type="checkbox" value="300" />Yes</td>
       </tr>
       <tr class="light">          
        <td>Site or Product Search</td>
        <td><input class="option" type="checkbox" value="60" />Yes</td>
        </tr>
        <tr class="dark">
       <td>File Uploads</td>
       <td><input class="option" type="checkbox" value="90" />Yes</td>
       </tr>
    <thead>
      <tr>
        <th></th>
        <th><div id="total">£0</div></th>
      </tr>
    </thead>

    </tbody>
  </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T18:16:55.623

首先，将指向 jquery 脚本的链接放在标题中，在其他脚本标记上方：

```
<script src="http://code.jquery.com/jquery-1.8.2.min.js" type="text/javascript"></script> 
```

然后在 jquery 中使用 .change() 函数，然后将所有 option:selected 和 input.option:checked 相加。

```
<script type="text/javascript">
  $(document).ready(function() {
    $(".option").change(function() {
      var total = 0;
      $(".option option:selected, input.option:checked").each(function() {
        total += parseInt($(this).val(), 10);
      });
      $("#total").text("£" + total);
    });
  });
</script> 
```

在这里演示：http: [//jsfiddle.net/vZwFx/](http://jsfiddle.net/vZwFx/)

如果您希望更新“总” div 而不是弹出警报，只需将警报调用替换为`$("#total").text("£" + total);`

# python - 百日草启动问题

> ID：13145162
> 
> 赞同：1
> 
> 时间：2012-10-30T18:11:03.220
> 
> 标签：python, django, zinnia

我正在尝试让 Zinnia 在 django 网站上运行，以便对其进行评估。我已经设法安装了它的所有依赖项，一切都很好，并且我使用管理工具创建了一些帖子，但现在我在访问它们时遇到了错误！

错误：

```
KeyError at /weblog/2012/10/12/test-post/

'request'

Request Method:     GET
Request URL:    http://127.0.0.1:8000/weblog/2012/10/12/test-post/
Django Version:     1.4.1
Exception Type:     KeyError
Exception Value:    'request'

Exception Location:     /usr/local/lib/python2.7/site-packages/django/template/context.py in __getitem__, line 54
Python Executable:  /usr/local/bin/python
Python Version:     2.7.3
Python Path:    

['/home/ubuntudev/webtest/twsite',
 '/usr/local/lib/python2.7/site-packages/setuptools-0.6c12dev_r88846-py2.7.egg',
 '/usr/local/lib/python2.7/site-packages/pip-1.2.1-py2.7.egg',
 '/usr/local/lib/python27.zip',
 '/usr/local/lib/python2.7',
 '/usr/local/lib/python2.7/plat-linux2',
 '/usr/local/lib/python2.7/lib-tk',
 '/usr/local/lib/python2.7/lib-old',
 '/usr/local/lib/python2.7/lib-dynload',
 '/usr/local/lib/python2.7/site-packages'] 
```

作为参考，这是我的[settings.py](http://sebsauvage.net/paste/?288ef156757eb838#oWIvTSfHNFEYvam4qkoclJUTidu9nhwZumYM7LjDH9g=)和我的[urls.py](http://sebsauvage.net/paste/?04dd0dce2f78d7bc#C94TRFc1TF5t9lKZWQW8MFIEw/SGgLPSs5fhFR8JYsc=)。后者无疑是一个巨大的混乱，因为我一直在搞砸我能想到的一切。

我刚刚被 Django 和 Zinnia 弄湿了，所以请在你的回答中描述一下！提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T18:43:43.360

Django 有一个将变量传递到模板的系统，称为[*上下文处理器*](https://docs.djangoproject.com/en/dev/ref/settings/#std%3asetting-TEMPLATE_CONTEXT_PROCESSORS)（[这里有一篇关于它们的好博文）](http://www.b-list.org/weblog/2006/jun/14/django-tips-template-context-processors/)。如果您想在每个模板中包含某些信息，这些非常有用。例如，如果您不想将导航菜单的所有链接添加到每个视图/模板，则可以改为编写模板处理器以将这些链接作为列表传递给每个模板。

有一些上下文处理器对大多数应用程序来说都相当重要。其中之一是`django.core.context_processors.request`将当前请求对象传递给每个模板。这允许您访问`{{ request }}`模板中的变量，该变量将为您提供有关用户已发送的标题等信息（[以及更多信息](https://docs.djangoproject.com/en/dev/ref/request-response/)）。

无论如何，长话短说，您已`django.core.context_processors.request`在设置中禁用了上述功能：

```
#TEMPLATE_CONTEXT_PROCESSORS = (
#        "django.contrib.auth.context_processors.auth",
#        'django.core.context_processors.i18n',
#        'django.core.context_processors.request',
#        'django.core.context_processors.media',
#        'django.core.context_processors.static',
#        'zinnia.context_processors.version',
#) 
```

所以取消所有这些，你应该没问题

# postgresql - Squeel 请求和 Heroku、Postgres：使用 GROUP BY 和 ORDER 时出错

> ID：13145168
> 
> 赞同：1
> 
> 时间：2012-10-30T18:11:22.860
> 
> 标签：postgresql, heroku, squeel

我正在使用 mysql 开发我的应用程序，但我使用 Heroku 来部署它并被迫使用 PG。

我对以下语句有疑问：

```
<% current_user_savings = Saving.where{user_id == my{current_user}} %>      

<% @latest_savings =  Saving.where{product_id.not_in(current_user_savings.select{product_id})}.group{product_id} %> 
```

所以它可以在我的电脑上运行，但是在部署到 heroku 时，我遇到了以下问题：

```
ActionView::Template::Error (PGError: ERROR:  column "savings.id" must appear in the GROUP      BY clause or be used in an aggregate function
LINE 1: SELECT "savings".* FROM "savings"  WHERE "savings"."product_...
SELECT "savings".* FROM "savings"  WHERE "savings"."product_id" NOT IN (SELECT "savings"."product_id" FROM "savings"  WHERE "savings"."user_id" = 1) GROUP BY "savings"."product_id"): 
```

我真的不知道如何解决这个问题并让它在heroku上工作。

请求的 Gemfile：来源 'https://rubygems.org'

```
ruby '1.9.3'
gem 'rails', '3.2.7'
gem 'compass_twitter_bootstrap', '2.0.3'
gem 'bcrypt-ruby', '3.0.1'
gem 'faker', '1.0.1'
gem 'will_paginate', '3.0.3'
gem 'bootstrap-will_paginate', '0.0.6'
gem 'omniauth-facebook', '1.4.0'
gem 'railroady'
gem 'devise', '2.1.2'
gem 'devise_invitable'
gem 'simple_form'
gem "mongoid", "~> 3.0.0"
gem 'thin'
gem 'best_in_place'
gem "jquery-fileupload-rails"
gem 'paperclip'
gem "squeel"
gem 'client_side_validations'
gem 'wicked'
gem 'koala'
gem 'aws-sdk'
gem 'bson_ext'

group :development, :test do
    gem 'sqlite3'
end
group :development, :test do
    gem 'annotate', '2.5.0'
end

group :test, :development do
    gem 'rspec-rails'
end

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'compass-rails', '1.0.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'
gem 'jquery-ui-rails'

group :test do
    gem 'capybara'
    gem 'factory_girl_rails'
end

group :production do
    gem 'pg', '0.12.2'
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:35:40.750

我认为其中一些代码属于范围或至少属于您的控制器。但除此之外，您可以发布您的 Gemfile 吗？

在我看来，最好的做法是在开发中使用相同的数据库和 ORM。您是否尝试过在本地运行 PG？

看起来这里可能发生了一些让你很难过的事情，首先让 PG 在你的开发机器上本地运行，然后更新你`databases.yml`的同步。

其次，你也在使用 MongoBD 吗？如果您不再使用它，可能会从捆绑包中删除它。

我稍微清理了您的 Gemfile 以使其更易于阅读，但我建议将 gem 分组为更好地代表 gem 在项目中的角色的部分，我喜欢记录每个 gem，以便清楚它的作用，通常，rails 应用程序倾向于以巨大的 Gemfile 结尾，这使得获取其他人的项目变得非常困难：

```
source 'https://rubygems.org'
ruby '1.9.3'

gem 'rails', '3.2.7'

gem 'compass_twitter_bootstrap', '2.0.3'
gem 'bcrypt-ruby', '3.0.1'
gem 'faker', '1.0.1'
gem 'will_paginate', '3.0.3'
gem 'bootstrap-will_paginate', '0.0.6'
gem 'omniauth-facebook', '1.4.0'
gem 'railroady'
gem 'devise', '2.1.2'
gem 'devise_invitable'
gem 'simple_form'
gem 'best_in_place'
gem "jquery-fileupload-rails"
gem 'paperclip'
gem "squeel"
gem 'client_side_validations'
gem 'wicked'
gem 'koala'
gem 'aws-sdk'

gem 'pg', '0.12.2'

gem 'jquery-rails'
gem 'jquery-ui-rails'

group :development, :test do
    gem 'annotate', '2.5.0'
    gem 'rspec-rails'
end

group :test do
    gem 'capybara'
    gem 'factory_girl_rails'
end

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'compass-rails', '1.0.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end 
```

最后，查看您的`application.rb`，并确保 ActiveRecord 可用，这似乎是必须的，但看看，您可能`require "rails/all"`在顶部附近的某个地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T00:11:01.667

[`GROUP BY`当用户从 MySQL 迁移到 PostgreSQL 时，这是一个已知的痛点](https://stackoverflow.com/q/1769361/398670)。

正如@rs 所指出的，您的 SQL 有点问题。

## 如果您按主键分组

假设这`savings.product_id`是主键，因为这是此查询正确的唯一方法，它依赖于数据库知道按主键分组隐式分组所有字段，因为主键是唯一的。

MySQL 不知道，它只是继续并为每个字段选择它看到的第一个结果。在这种情况下，这是正确的，因为您是按主键分组的，但在其他情况下很容易产生不可预测的结果。

PostgreSQL 9.0 及更低版本*不*承认按主键分组意味着您已经对所有字段进行了分组，尽管 SQL-99 标准要求它这样做。这些版本要求您`SELECT`在`GROUP BY`. 这很笨拙，因此您可以做的最好的事情是[升级到不再受此限制的 PostgreSQL 9.1 或 9.2](http://www.depesz.com/2010/08/08/waiting-for-9-1-recognize-functional-dependency-on-primary-keys/)。

由于您使用的是查询生成器，因此处理这个问题变得更加复杂。您不能只修改您的 SQL。如果你不能升级 PostgreSQL，你需要弄清楚如何让你的查询生成器相信`GROUP BY`表中的所有列。

## 如果您按其他字段分组

如果`savings.product_id`不是主键，那么您的查询就是完全错误的。`SELECT`您必须在列表中列出您想要的每个字段`GROUP BY`以保证唯一且明确的结果，或者仅引用聚合函数中的字段。

MySQL 无论如何都会执行这个查询，但它依赖于你知道结果是明确的。如果一个字段有多个可能的值，它只会选择它首先得到的任何一个。

在这种情况下，很难弄清楚您的查询实际上应该做什么以及您期望从中得到什么结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T10:55:23.167

谢谢大家的帮助，我最终做到了，它正在本地的 PG 上工作！

```
Saving.select("DISTINCT ON (savings.product_id) * ").where{product_id.not_in(current_user_savings.select{product_id})}.group("savings.user_id, savings.updated_at, savings.id, savings.product_id, savings.price,savings.wishlist_id, savings.saved, savings.created_at") 
```

遇到这个问题让我在 dev 中将我的 db 从 mysql 切换到 pg，所以在 heroku 中不再感到惊讶！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T18:16:08.373

您的 SQL 将无法在 PG 中运行，MySQL 将允许您这样做，但任何其他 DBMS 都不允许

这个查询：

```
SELECT "savings".* FROM "savings"  
WHERE "savings"."product_id" 
NOT IN (SELECT "savings"."product_id" FROM "savings"  
         WHERE "savings"."user_id" = 1) 
GROUP BY "savings"."product_id" 
```

应该

```
SELECT "savings"."product_id", count(*) FROM "savings"  
--change this to your AGGR func
WHERE "savings"."product_id" 
NOT IN (SELECT "savings"."product_id" FROM "savings"  
         WHERE "savings"."user_id" = 1) 
GROUP BY "savings"."product_id" 
```

# python - 如何验证是否发生了重启？

> ID：13145175
> 
> 赞同：4
> 
> 时间：2012-10-30T18:11:39.773
> 
> 标签：python, amazon-web-services, boto

我想重新启动一些实例`ec2.reboot_instances([instanceId])`，并且效果很好，但是：

1.  如何验证是否发生了重启？我认为`launch_time`会被更改，但看起来所有参数都保持不变。我更愿意在没有 ssh 或 ping 的情况下进行此检查 - 可能吗？也许有可能以`instance.get_console_output()`某种方式使用？

2.  从文档中不清楚我是否应该在尝试重新启动之前添加一些实例状态检查。如果实例被终止，请求将被忽略，这很清楚 - 但如果是停止或挂起 - 我应该使用其他东西（开始）吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T18:20:08.973

这个 shell 命令会告诉你系统已经启动了多长时间：

```
ssh hostname uptime 
```

要使其自动化，您需要将 ssh 公钥添加到`.ssh/authorized_keys`主机上的文件中。

使用 boto 可能是这样的（尽管我没有使用过 boto）：

```
s = boto.manage.cmdshell.SSHClient(hostname, uname='root')
s.run('uptime') 
```

请参阅[boto manage 模块上的参考资料](http://docs.pythonboto.org/en/latest/ref/manage.html)

# zend-framework - 使用 Zend Framework 1.11 执行内部请求

> ID：13145178
> 
> 赞同：-1
> 
> 时间：2012-10-30T18:11:52.230
> 
> 标签：zend-framework

我需要对我的 zend 框架项目中的其他控制器执行内部请求。

我已经调查了要执行此操作的动作助手，但似乎没有一个有效。

我的项目是一个 API。此 API 有时会复制其输出。

示例： /client.json：返回用户可以访问的客户端列表 /client/tree.json 返回客户端树

要减少模型代码和重新绑定数据 /client/tree.json 的额外查询，最好对 /client.json 进行内部调用以在那里获取已清理的客户端列表。

Zends 文档是这样说的：

```
 $request = clone $this->getRequest();
    $request->setActionName('get')
        ->setControllerName('tree')
        ->setParams(array('bar' => 'baz'));
$this->_helper->actionStack($request); 
```

但是它没有说明如何从该请求中提取数据。如果我

```
print_r($this->_helper->actionStack($request)); 
```

我刚得到一吨 Zend 垃圾

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-03T07:25:24.123

这不是应该在控制器中完成的事情。它应该在模型中处理。模型提供数据，在这种情况下是客户列表或客户树。只有模型应该提供该数据。您要完成的实际上是一种缓存形式。您可以在模型或应用程序内部和外部以多种不同方式缓存该数据。

您可能想从探索如何在模型中实现[身份映射](http://en.wikipedia.org/wiki/Identity_map_pattern)开始。

```
class someBaseMapper
//an identity map can be as simple as a protected class variable with accessors
 protected $map = array();

 /**
     * Set value and name of entity in identity map.
     *
     * @param string $id
     * @param object $entity
     */
 protected function setMap($id, $entity)
    {
        $this->map[$id] = $entity;
    }

    /**
     * Get value of entity id from identity map.
     *
     * @param string $id
     * @return string
     */
    protected function getMap($id)
    {
        if (array_key_exists($id, $this->map)) {
            return $this->map[$id];
        }
    } 
```

然后使用您的地图：

```
//later in the same mapper
public function findById($id)
{
    //check map requested id
    if ($this->getMap($id)) {
        return $this->getMap($id);
    }
    //if no map match
    $select = $this->getGateway()->select();
    $select->where('id = ?', $id);

    $row = $this->getGateway()->fetchRow($select);
    //create entity
    $entity = $this->createEntity($row);
    //add new entity to map
    $this->setMap($row->id, $entity);

    return $entity;
} 
```

您也可以查看[Zend_cache](http://framework.zend.com/manual/1.12/en/zend.cache.introduction.html)以获取数据库或页面缓存。还有一些您可能会感兴趣的可用于 PHP 的外部缓存工具。

# c++ - 如何在参数中传递双指针以保持值

> ID：13145182
> 
> 赞同：0
> 
> 时间：2012-10-30T18:12:00.370
> 
> 标签：c++, pointers, parameters

我创建了一个 void** p2 变量，例如

```
int x = 10;
void* p = &x;
void** p2 = &p; 
```

这是在函数中创建的。我怎样才能使用参数或返回值，以 p2 和 * p2 都保持其精确值的方式传递这个 p2。我没有成功找到任何解决方案。请给我一个简短的例子，任何事情都可以。

也许一些细节会有所帮助：

```
class ShmItem
{
public:
    void* start;
    void** vtable;
}; 
```

这个类是全局的，它是全局向量的一部分。现在在我的职能中。

```
item.vtable = &item.start;
shm->address = item.vtable; 
```

其中 item start 保存 mmap 的返回值。

shm 是一个参数对象，其中地址的类型为 void**。

现在，当我返回调用者时，`item.start`更改的值（在 中`shm->address`）...

对不起，我发现了这个与指针无关的错误。我可以删除这个线程吗？因为这个问题已经没有意义了。（虽然 Carlos 在函数调用之间传递双指针的方式是一个好主意，对我有帮助，所以我将其标记为已回答）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T18:18:13.560

您不能获取局部变量的地址并以任何有意义的方式从函数中返回它，因为在函数返回时局部变量将超出范围。

在以下代码中，`x`和`p`都是函数体的本地代码：

```
void foo()
{
    int x = 10;
    void * p = &x;
} 
```

您可以传递的唯一明智的指针是指向函数返回时仍然存在的对象的指针，即全局对象或动态分配的对象，或者首先已经传递*给*函数的对象（例如通过地址C，或通过 C++ 中的引用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:19:03.357

我假设您使用的是 C 对吗？所以，我认为你需要做两件事。首先，在函数外部声明双指针变量，使其在函数返回后处于作用域内。其次，声明您的函数，使其接收并返回一个 void ** 参数，该参数将保存您想要的值，如下所示：

```
void **myfunc (void **p2) {
    int x = 10;
    void* p = &x;
    p2 = &p;  // notice var declaration is gone
    ...
    return p2;
}
void ** p2;
p2 = myfunc(p2); 
```

您还可以声明 myfunc 以返回 void 并使用 p2 调用 myfunc 而无需赋值构造。

# php - 无法在 symfony 中删除 cookie

> ID：13145189
> 
> 赞同：3
> 
> 时间：2012-10-30T18:12:53.057
> 
> 标签：php, jquery, cookies, symfony

我有一个使用 jquery 的 php 文件。如果在按下提交按钮后选中了一个复选框，我有这个文件存储 cookie，如果未选中该复选框，则删除 cookie（如果它们存在）。

它在我没有 symfony 的开发服务器上运行良好。当我将它传输到我们的实时服务器时，这需要我将代码放在 symfony 中，它会保存 cookie 但不会删除它们。我正在使用来自这里的 jquery.cookies.js[链接](https://github.com/carhartl/jquery-cookie)

我的代码很简单

```
 // else delete the cookies if the checkbox is unchecked
                    else
                    {
                        ?>
                         <script type="text/javascript">
                            $.removeCookie('vtuid');
                            $.removeCookie('vt_usr');
                            $.removeCookie('vt_pd');
                            $.removeCookie('vt_chk');
                        </script>
                        <?php
                    } 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-10-17T13:02:43.903

你也可以做

```
 $response = new Symfony\Component\HttpFoundation\Response();
 $response->headers->clearCookie('nameOfTheCookie');
 $response->send(); 
```

不要忘记按照 cookie 被删除的顺序发回响应

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T18:38:49.540

B 默认 symfony 只设置带有 http 标志的 cookie，这意味着 - 你不能从 js 中删除 cookie。例如：

```
$response->headers->setCookie(new Cookie('blabla', 'true', time() + (3600 * 48), '/', null, false, false)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-28T13:46:09.797

在 Symfony 中设置 cookie 的完整文档在这里： [http ://symfony.com/doc/current/components/http_foundation/introduction.html#setting-cookies](http://symfony.com/doc/current/components/http_foundation/introduction.html#setting-cookies)

API 文档中描述了清除 cookie：http: [//api.symfony.com/2.3/Symfony/Component/HttpFoundation/ResponseHeaderBag.html#method_clearCookie](http://api.symfony.com/2.3/Symfony/Component/HttpFoundation/ResponseHeaderBag.html#method_clearCookie)

# ios6 - 在 iOS 6 中打开共享应用程序

> ID：13145190
> 
> 赞同：3
> 
> 时间：2012-10-30T18:13:01.223
> 
> 标签：ios6, safari, instagram

我尝试从我的应用程序中打开 Instagram 和 Safari，这在 iOS 5 中有效。但现在看来它不再有效了。一切正常，没有错误，但是当我打开应用程序并单击按钮时，它不起作用...

这是我打开 Instagram 的代码：

```
 NSURL *instagramURL = [NSURL URLWithString:@"instagram://location?id=1"]; if ([[UIApplication sharedApplication] canOpenURL:instagramURL]) { [[UIApplication sharedApplication] openURL:instagramURL];} 
```

# silverlight - Silverlight5 - 从 DataGrid 绑定可见性

> ID：13145195
> 
> 赞同：0
> 
> 时间：2012-10-30T18:13:12.100
> 
> 标签：silverlight

Silverlight5

当 DataGrid 中没有数据时，我试图让 TextBlock 可见。

在 DataGrid 中绑定什么？

当我如下绑定到可见性时，即使网格中没有数据，它也始终返回 true。

```
 <TextBlock Grid.Row="4" HorizontalAlignment="Center" Text="No User Accounts found." 
Visibility="{Binding ElementName=AccountGridT32, Path=Visibility, 
Converter={StaticResource NegateVisibilityConverter}}" />

    <Grid Grid.Row="5">
    <sdk:DataGrid x:Name="AccountGridT32" 
ItemsSource="{Binding Data, ElementName=AccountsDataSourceT32}" Grid.Column="0" Grid.Row="1" 
    ScrollViewer.HorizontalScrollBarVisibility="Auto" />
    </Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T18:24:22.413

我所做的是将texblock的可见性绑定到列表框/网格的项目计数......

```
<TextBlock Grid.Row="4" HorizontalAlignment="Center" Text="No User Accounts found." 
Visibility="{Binding ItemsSource.Count, ElementName=AccountGridT32, Converter={StaticResource listCountToVis}, ConverterParameter=true}" /> 
```

我的转换器：

```
public class ListCountToVisibilityConverter : IValueConverter
    {
        #region IValueConverter Members

        public object Convert(object value, System.Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            if (value == null || !(value is int))
                return Visibility.Collapsed;

            bool booInvert = false;
            if (parameter is string) bool.TryParse((string)parameter, out booInvert);

            if (booInvert) return ((int)value) <= 0 ? Visibility.Visible : Visibility.Collapsed;
            else return ((int)value) > 0 ? Visibility.Visible : Visibility.Collapsed;

        }

        public object ConvertBack(object value, System.Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            return null;
        }

        #endregion
    } 
```

# .net - 使用实体框架 4 和 MySql.Web.Security.MySQLRoleProvider

> ID：13145197
> 
> 赞同：2
> 
> 时间：2012-10-30T18:13:15.533
> 
> 标签：.net

我正在使用 c# 在 ASP.NET 4.0 中开发新的 Web 应用程序，我的数据库是带有 6.5.4.0 .NET 连接器的 mySQL 数据库。

**我的网络配置如下**：

```
<?xml version="1.0" ?>
<configuration>
    <connectionStrings>
        <add name="myPhoto_Entities" connectionString="metadata=res://*/App_Code.myPhotoDB.csdl|res://*/App_Code.myPhotoDB.ssdl|res://*/App_Code.myPhotoDB.msl;
                                        provider=MySql.Data.MySqlClient;provider connection string=&quot;server=localhost;User Id=root;database=myPhotoDB&quot;"
        providerName="System.Data.EntityClient" />
    </connectionStrings>
    <system.data>
        <DbProviderFactories>
            <add name="MySQL Data Provider" invariant="MySql.Data.MySqlClient" description=".Net Framework Data Provider for MySQL"
            type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data, Version=6.5.4.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d"
            />
        </DbProviderFactories>
    </system.data>
    <system.web>
        <roleManager enabled="true" defaultProvider="MySqlRoleProvider">
            <providers>
                <clear />
                <remove name="MySQLProfileProvider" />
                <add connectionStringName="myPhoto_Entities" name="MySqlRoleProvider"
                type="MySql.Web.Security.MySQLRoleProvider,
                                    MySql.Web,Version=6.5.4.0,Culture=neutral,PublicKeyToken=c5687fc88969c44d"
                autogenerateschema="true" />
            </providers>
        </roleManager>
        <membership defaultProvider="MySqlMembershipProvider">
            <providers>
                <clear />
                <add name="MySqlMembershipProvider" type="MySql.Web.Security.MySQLMembershipProvider, MySql.Web,Version=6.5.4.0,Culture=neutral,PublicKeyToken=c5687fc88969c44d"
                connectionStringName="myPhoto_Entities" enablePasswordRetrieval="false"
                enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="true"
                passwordFormat="Hashed" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6"
                minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/"
                autogenerateschema="true" />
            </providers>
        </membership>
        <profile>
            <providers>
                <clear />
                <add type="MySql.Web.Security.MySQLProfileProvider, MySql.Web,Version=6.5.4.0,Culture=neutral,PublicKeyToken=c5687fc88969c44d"
                name="MySqlProfileProvider" applicationName="/" connectionStringName="myPhoto_Entities"
                autogenerateschema="true" />
            </providers>
        </profile>
        <compilation debug="false" targetFramework="4.0">
            <assemblies>
                <add assembly="MySql.Data, Version=6.5.4.0, Culture=neutral, PublicKeyToken=C5687FC88969C44D"
                />
                <add assembly="MySql.Data.Entity, Version=6.5.4.0, Culture=neutral, PublicKeyToken=C5687FC88969C44D"
                />
                <add assembly="MySql.Web, Version=6.5.4.0, Culture=neutral, PublicKeyToken=C5687FC88969C44D"
                />
                <add assembly="System.Security, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"
                />
                <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"
                />
                <add assembly="System.Data.Entity.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"
                />
                <add assembly="System.Web.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"
                />
            </assemblies>
            <buildProviders>
                <add extension=".edmx" type="System.Data.Entity.Design.AspNet.EntityDesignerBuildProvider"
                />
            </buildProviders>
        </compilation>
        <authentication mode="Forms">
            <forms loginUrl="~/Account/Login.aspx" timeout="2880" />
        </authentication>
    </system.web>
    <system.webServer>
        <modules runAllManagedModulesForAllRequests="true" />
    </system.webServer>
</configuration> 
```

**我的 web.config 中有问题，我无法解决。如果有人可以给我提示以克服这个问题，我将不胜感激？**

# javascript - 在 Chrome 调试器中将 DOM 元素视为对象

> ID：13145199
> 
> 赞同：11
> 
> 时间：2012-10-30T18:13:27.547
> 
> 标签：javascript, google-chrome, dom

是否可以使用 Chrome 的调试器（或其他调试工具）将 DOM 元素视为对象？

也就是说，如果我在 Chrome 的控制台中创建一个常规对象，我就可以检查它的元素。

```
> o = {}
  - Object
    - __proto__
      - __defineGetter__
      - etc 
```

但是，如果我创建一个新的 DOM 元素，调试器会显示其 HTML 内容。

```
> p = document.createElement('p')
  <p></p> 
```

我想将变量`p`视为一个对象。而不是看到`<p></p>`，我想看看它的属性（就像你在`o`上面看到的那样）

这在调试器中可能吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-30T18:16:28.720

也许`console.dir()`是你所追求的。

```
> p = document.createElement('p')
    <p></p>
> console.dir(p)
    - HTMLDivElement
        align: ""
        ... 
```

下图来自[Google Chrome 控制台工具文档](https://developers.google.com/chrome-developer-tools/docs/console)

![显示控制台.dir](../Images/cef5eafe309447798fbf6b5868d251fa.png)

# liferay - 访问 Liferay 6.1 自定义/继承的组织角色

> ID：13145214
> 
> 赞同：1
> 
> 时间：2012-10-30T18:14:28.010
> 
> 标签：liferay, organization, role

我正在使用 Liferay 6.1 CE、Tomcat、Vaadin 6.8.4
对我来说可能是一种非常不正确的方法，或者我可能错过了一些明显的东西。

我需要为我的用户控制 crud 功能 - 允许访问他们所属的组织以及其下的任何子组织。（我正在使用 Liferay 的`organization_`桌子）

在尝试简化权限管理时，我曾希望将用户分配给层次结构中的组织。然后可以根据分配给该组织和任何父组织的角色来确定默认权限。这对于常规角色似乎工作得相当好 - 但后来我尝试了自定义组织角色，但我无法按预期掌握细节。

*   我可以在用户的​​控制面板定义中看到正确的数据。
    （Liferay 知道如何检索和显示自定义组织角色 :-)*   我可以看到后端表中填充的实际数据值`usergrouprole`。*   我能够检测到默认超级管理员/所有者 (test@liferay) 的此角色
    。. . 但我无法检测到其他用户的角色:(*   我一直在使用`RoleLocalServiceUtil`，`GroupLocalServiceUtil`但没有运气。

    我的直觉告诉我要放弃我的“纯粹”概念，转而使用熟悉的自定义查询，但我想先看看其他人是否有更好的建议。

    我目前不知道如何进入 Liferay 代码以找到相关部分，所以如果你有一些阅读材料，这可能是一个选择:)

    线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T22:55:13.113

这看起来很难看（因为确实如此），但我认为您需要致电：

```
UserGroupRoleLocalServiceUtil.hasUserGroupRole(long userId, long groupId, long roleId); 
```

一般来说，XYZ 表有（如果不总是）一个 XYZLocalServiceUtil 和 XYZServiceUtil。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T22:08:27.990

本着分享的精神，这里有一些显示权限的示例代码。

```
ThemeDisplay themeDisplay = (ThemeDisplay) request.getAttribute(WebKeys.THEME_DISPLAY);
User i_user =  themeDisplay.getUser();
PortletDisplay portDisplay = themeDisplay.getPortletDisplay();
String myRootname = portDisplay.getRootPortletId();
String strOrgGroupRoles = "";

//== 1\. Display permission provided to user by Organisation(Group) Roles
//== 2\. User is assigned to the org.
//== 3\. Org is a member of the OrgRole.
//== 4\. OrgRole has permission defined from current selected portlet permissions (action-key)
List<UserGroupRole> ugRoles = new ArrayList<UserGroupRole>();
ugRoles.addAll(UserGroupRoleLocalServiceUtil.getUserGroupRoles(i_user.getUserId() ) );
for (UserGroupRole ugRole : ugRoles){

    //== For each role this user has allocated, display the Rolename and the Organisation
    strOrgGroupRoles += "'" +ugRole.getRole().getName() + "'  (roleId="+ugRole.getRoleId()+")";
    strOrgGroupRoles += " for organization '"+OrganizationLocalServiceUtil.getOrganization(ugRole.getGroup().getClassPK()).getName();
    strOrgGroupRoles += "' (groupId=" +ugRole.getGroupId()+ ")\n";

    //== Permissions for the role is harder to find - linked to a resource
    //== Data shows the `actionId` equates to relative action number column 'bitwiseValue' in `resourceaction`.
    //== Snag is ResourcePermission needs a tie-breaker of the portlet name, not just the roleId
    //== Get this from ThemeDisplay getRootPortletId()
    //==
    //== I think Liferay 6.1.0 API may be broken here:  ResourceActionLocalServiceUtil.getResourceAction expects String, String . . .
    //==  . . . yet the `bitwiseValue` column is BIGINT(20) so nothing is returned.
    //== This causes us to attack it from a different angle
    List<ResourcePermission> resourcePerms = new ArrayList<ResourcePermission>();
    resourcePerms.addAll( ResourcePermissionLocalServiceUtil.getRoleResourcePermissions(ugRole.getRoleId()) );
    for (ResourcePermission resourcePerm : resourcePerms){

        //== For each of the ResourcePermissions of this role, get the actionId (equals Role Permissions aka action-key)
        //== The link is a relative number, not unique in this table so ensure it is for this portlet only
        if ( resourcePerm.getName().equals(myRootname)){ 
            List<ResourceAction> resourceActions = new ArrayList<ResourceAction>();
            resourceActions.addAll( ResourceActionLocalServiceUtil.getResourceActions(myRootname)  );
            for (ResourceAction resourceAction : resourceActions) {

                //== For each listed action, ensure it is the relative action number we want (actionId) 
                if (resourceAction.getBitwiseValue() == resourcePerm.getActionIds() ) {
                    strOrgGroupRoles += " +-- action= " + resourceAction.getActionId() + "\n";
                }   

            }   //== End of actionIds for this portlet

        }   //== End if this portlet only

    }   //== End ResourcePermissions for this role

}   //== End roles for this user 
```

高温高压

罗宾

# jquery - 从 aa mySql DB 检索数据时，Jquery .ajax() 调用太慢

> ID：13145217
> 
> 赞同：1
> 
> 时间：2012-10-30T18:14:39.573
> 
> 标签：jquery, ajax

我使用 jquery 模态表单制作表单，表单具有用户信息，如姓名、姓氏等。我通过 jquery .ajax 添加新用户并且工作正常，它将用户添加到 de db(mysql) 并自动将其添加到正在显示的用户列表中，这里完全没有问题..

我的用户列表有一个编辑按钮，当我按下该按钮时，会弹出一个模式提交表单，其中包含该用户的信息。这是我的问题弹出的地方，它做得很好，但是当我单击编辑按钮时，模式表单会弹出，并且在 1 或 2 秒后，用户的信息会显示在文本字段上，这真的足够好吗？还是必须立即执行？感觉有点慢。。。。

这是我对编辑用户的 ajax 调用：

```
$('body').on('click', '#listaUsuariosOK a', function (e){
    e.preventDefault();

    var accion = $($('#accion').val('editUser')).val();
    var id = $($('#id_user').val($(this).attr('href'))).val();

    $('#agregarUsuario').dialog('open');

    $.ajax({
        cache:false,
        type: "POST",
        dataType:"json",
        url: CI.base_url + 'admin/agregarUsuario',
        data: "&id=" + id + "&accion=" + accion,
        success: function(response){
                if(response.respuesta == 'error'){
                    //Display Error
                }else{
                    $('#text_nombre').val(response.nombre);
                    $('#text_apellido').val(response.apellidos);
                    $('#text_email').val(response.email);
                    $('#depto').val(response.depto);
                }
        } //Success End
    });//.ajax Ends
});//$('body') call Ends 
```

我发出一个发送用户 ID 进行编辑的帖子调用，然后在我的 php 上查询该 ID 并通过 json_encode() 返回数据

我怎样才能使响应时间更快？提前非常感谢......（我是ajax的新手，顺便说一句呵呵）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T18:18:58.037

AJAX 不太可能是这里的问题。很可能是您的数据库运行缓慢或网络速度慢。AJAX 的速度完全取决于往返服务器需要多长时间，以及服务器处理请求的操作/url 需要多长时间。

因此，请检查您的服务器的负载量，并尝试提高其在 AJAX 发布期间执行的操作的吞吐量。那是寻找 AJAX 速度改进的最佳位置（因为您无法真正加快网络延迟......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:22:30.453

您要查询的数据库有多大？问题可能与服务器端有关，而不是与 javascript 相关....尝试使用[http://php.net/manual/en/function.microtime.php](http://php.net/manual/en/function.microtime.php)调用调试您的 php 代码，这可能有助于确定您的脚本在哪里运行缓慢。我的猜测是数据库连接或查询。

# python - matplotlib中的茎图？

> ID：13145218
> 
> 赞同：17
> 
> 时间：2012-10-30T18:14:41.137
> 
> 标签：python, matplotlib

我想要`plot(x, sin(x))`但不是一条从`(xi,yi)`到的线`(x_i+1,y_i+1)`我想要一条垂直线到每个点`(xi,0)`，`(xi,yi)`因为有时点之间的插值没有意义（例如量化数据）（并且它看起来比没有垂直线好得多）。

很像下面的茎图（来自 matlab 文档），但可以选择关闭圆圈和点之间的“-”。不幸的是，我自己在 matplotlib 文档中找不到合适的绘图功能。

![茎图](../Images/f8f4ec3629dfae90ba96e5e7c56f0812.png)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-30T18:26:17.557

matplotlib 中也有一个[茎图](https://matplotlib.org/api/_as_gen/matplotlib.pyplot.stem.html?highlight=stem#matplotlib.pyplot.stem)（又名棒棒糖图）。

* * *

[您可以在下面找到文档](https://matplotlib.org/gallery/lines_bars_and_markers/stem_plot.html#sphx-glr-gallery-lines-bars-and-markers-stem-plot-py)中的示例。

```
import matplotlib.pyplot as plt
import numpy as np

# returns 10 evenly spaced samples from 0.1 to 2*PI
x = np.linspace(0.1, 2 * np.pi, 10)

markerline, stemlines, baseline = plt.stem(x, np.cos(x), '-.')

# setting property of baseline with color red and linewidth 2
plt.setp(baseline, color='r', linewidth=2)

plt.show() 
```

![茎图](../Images/f913fb9ae32a18a3c65d0e036572ba65.png)

* * *

如果要调整基线的y位置，可以使用`bottom`参数。

（改编）示例：

```
import matplotlib.pyplot as plt
import numpy as np

# returns 10 evenly spaced samples from 0.1 to 2*PI
x = np.linspace(0.1, 2 * np.pi, 10)

plt.stem(x, np.cos(x), '-.', bottom=-2)

plt.show() 
```

![茎图 2](../Images/c8ccc34cb087bd4f69123a9e2c11a122.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:21:16.197

我想你想使用 linestyle='steps--'

```
plot(x, sin(x), linestyle='steps--') 
```

# c# - 一般的正则表达式混淆。尝试验证电话号码

> ID：13145221
> 
> 赞同：0
> 
> 时间：2012-10-30T18:14:48.547
> 
> 标签：c#, regex

因此，似乎我对 Regex 所做的一切都没有达到我的预期。这个声明，我希望扔掉任何字母，并且至少需要 3 位数字，但它不需要 3 位数字。它确实不允许使用字母，但任何数量的数字都是好的。

```
myReg = new Regex(@"(^[a-z])([0-9]{3,3})*"); 
```

我希望 ^[az] 抛出字母，而 [0-9]{3,3} 需要 3 位数字。

还不如加上整个代码块，没想到。

```
userData = phone.Text;

myReg = new Regex(@"(^[a-z])([0-9]{3})+");

        foreach (var validName in myReg.Matches(userData))
        {
            if (myReg.IsMatch(userData))
            {
                phone.Clear();
                badData.Visible = true;
                phone.Focus();
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:17:06.087

那匹配

```
One character that isn't a letter from a to f, stored in a backreference,
followed by zero or more instances of: 
    3 characters that are digits from 0-9
    stored in another backreference. 
```

我认为你需要：`^[0-9]{3}+$`

这匹配包含以下内容的字符串：

```
One or more instances of:
    3 characters that are digits from 0-9 
```

如果您只需要一个包含 3 个以上字符且完全由数字组成的字符串，则可以使用：`^[0-9]+$`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T18:17:11.327

试试这个，只需要三个数字：

```
var regex = new Regex(@"^\d{3}$"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T18:17:25.873

我认为 * 指定您可以放置​​任意数量的字符。尝试删除“*”，看看它是否有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T18:22:55.137

试试这个：

```
"(\+?\d{1,5}(?:[\s_-]{0,1}\d{2,4}[\s_-])+)" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T19:44:57.537

```
^(?=.{3,10})([2-9]\d{2,9}) 
```

*   `^(?=.{3,10})`从一开始必须至少有 3 个项目，但不超过 10 个
*   `[2-9]` 任何美国号码都不能以 1 开头，因此请确保 2-9 的范围是允许的第一个号码的范围。
*   `\d{2,9}` 说明 2 个最多 9 个数字必须在匹配中。

# javascript - jQuery - 如何将 jQuery 对象转换为使用 getElementById 返回的对象类型

> ID：13145229
> 
> 赞同：3
> 
> 时间：2012-10-30T18:15:42.700
> 
> 标签：javascript, jquery, dom

有时我会遇到某些情况，因为`document.getElementById()`我不明白的原因，我必须使用某些代码才能使某些代码正常工作（例如使用 Google Maps API）。是否有 jQuery 方法或一些相对简单的方法可以将 jQuery 对象转换为 w/ 返回的对象类型`document.getElementById()`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T18:17:34.707

像这样的东西：

```
$("#myId").get(0) 
```

或者

```
$("#myId")[0] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T18:17:18.130

您可以执行`$("#someDiv").get(0)`which 将返回`HTMLElement`对象（与调用返回的对象相同`document.getElementById()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T18:18:10.470

是的，您可以使用以下方式获取底层 DOM 节点

```
$(myselector)[0] 
```

或者

```
$(myselector).get(0) 
```

除上述内容外：

`$(myselector).get()`，没有索引，将返回一个 DOM 节点数组。

# c++ - 等效于 int 的 typedef

> ID：13145230
> 
> 赞同：5
> 
> 时间：2012-10-30T18:15:47.127
> 
> 标签：c++, templates, typedef

如果我有一个模板容器，我可以使用 a`typedef`让我在编译时查找类型：

```
template <typename T>
struct MyList {
    typedef T Type;
    T get_front() const;
    // ...
};

MyList<char> char_list;
MyList<char>::Type front = char_list.get_front(); 
```

在这种情况下，您可以`char front = char_list.get_front();`改为声明，但有时这可能很有用（例如，包含其他模板类的模板类）。

在我的例子中，模板没有指定类型名，而是指定了一个 int （实际上是 a `std::size_t`）：

```
template <std::size_t N>
struct MyClass {
    // ...
}; 
```

是否有一个等效的 typedef 可以在类中声明，这将允许我在类之外获取值 N？这是使用静态常量的合适位置吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T18:17:58.723

现代编译器的常用方法是：

```
static const std::size_t value = N; 
```

请注意，如果有人试图获取其地址，这将引发*undefined-behavior 。*这通常意味着 的地址`value`可能会导致不同翻译单元的不同位置，但它的*未定义行为*仍然存在。

另一种通常在较旧的编译器上使用的方法，并且不会打开*未定义行为*的大门，是通过以下方式进行仿真`enums`：

```
enum { value = N }; 
```

*Boost.Config*提供了一个`BOOST_STATIC_CONSTANT`宏，该宏将根据编译器的一致性解析为所描述的方法中的一种或另一种。它的用法是：

```
BOOST_STATIC_CONSTANT( std::size_t, value = N ); 
```

它的参考可以在[http://www.boost.org/doc/libs/1_51_0/libs/config/doc/html/boost_config/boost_macro_reference.html#boost_config.boost_macro_reference.boost_helper_macros](http://www.boost.org/doc/libs/1_51_0/libs/config/doc/html/boost_config/boost_macro_reference.html#boost_config.boost_macro_reference.boost_helper_macros)

# c# - 作为服务运行时事件未触发

> ID：13145232
> 
> 赞同：5
> 
> 时间：2012-10-30T18:15:50.013
> 
> 标签：c#, events, service, delegates

我有一个在测试模式下运行时运行良好的事件，但在我将代码作为服务运行时不会触发。在发布代码之前，让我先介绍一下应用程序的结构，因为我觉得这就是问题的根源。

我有一个用于控制路由器服务的托盘应用程序。启动时，该服务会加载一个 dll 库，所有处理都在该库中进行。当库启动时，它会扫描一个目录以查找插件，并将它们挂接到主程序中。

当构建为 Release 时，服务被激活，我必须安装应用程序。附带说明一下，托盘应用程序以管理员身份运行，因此它可以控制服务。当构建为 Debug 时，托盘直接启动库 dll，跳过启动它的小型服务应用程序。见下图：

![在此处输入图像描述](../Images/9ce17c2b7c9f80401179e787b7cfb9ef.png)

在任何一种情况下，此插件的流程都是 Receiver 接收文件，并通知 Sender 通过 Event 转发它。该文件被发送出去进行远程处理，然后返回到另一个接收器，该接收器通过事件将结果转发给插件。然后插件处理文件，并应在事件中发送回主程序。在调试（无服务）中运行时，这正是发生的情况。当作为服务运行时，除了通知主程序结果已处理的插件外，所有事件处理都可以完美运行。没有抛出异常，我通过记录确认事件已正确连接。

连接事件：

```
//  Connect delegate to plugins that will add data to the database through the Router
if (plugin is INotify)
{
    ((INotify)plugin).NotifyProcessingComplete += new ProcessNotification(this.OnProcessed);
    LogWriter.Log("Associated " + plugin.Name + " with OnProcessed", LogFile);
} 
```

从插件调用事件：

```
if (NotifyProcessingComplete != null)
    NotifyProcessingComplete(ExtractResults(args.ReceivedFile));
else
    LogWriter.Log("NotifyProcessingComplete Delegate was null.", LogFile); 
```

事件处理程序：

```
public void OnProcessed(ProcessArgs args)
{
    LogWriter.Log("On Dicom Process was called...", LogFile);
    lock (threadLock)
    {
        if (Settings != null)
        { ... }
    }
} 
```

根据日志，插件已正确连接到 OnProcessed，并且登录 ExtractResults() 方法表明它正在正确返回。但是，NotifyProcessingComplete 没有调用 OnProcessed 方法。

再一次，这仅在将代码作为服务运行时才会发生。我怀疑这可能与以管理员身份运行的托盘、以本地系统运行的服务以及动态加载的插件有关。

下面我包含了加载插件的代码，以防它可能有帮助：

```
private void loadPlugins()
{
    String pluginPath = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);

    //  Create a domain to text for plugins
    AppDomain domain = AppDomain.CreateDomain("PluginLoader");

    PluginFinder finder = (PluginFinder)domain.CreateInstanceAndUnwrap(
        typeof(PluginFinder).Assembly.FullName, typeof(PluginFinder).FullName);
    finder.LogFile = logFile;

    //  Get valid plugins, and then unload the domain to clear up memory
    List<String> FoundPluginTypes = finder.SearchPath(pluginPath);
    AppDomain.Unload(domain);

    //  Load the plugins
    Plugins = new List<IPlugin>();
    foreach (String plugin in FoundPluginTypes)
    {
        Assembly assembly = Assembly.LoadFrom(plugin);
        Type type = null;

        foreach (Type t in assembly.GetTypes())
            if (t.GetInterface("IPlugin") != null)
                type = t;

        try
        {
            IPlugin loader = (IPlugin)Activator.CreateInstance(type);
            Plugins.Add(loader);
        }
        catch (NullReferenceException e)
        {
            LogWriter.Log("Could not load plugin.", e, LogFile);
        }
    }
} 
```

任何帮助或建议将不胜感激。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T21:31:24.953

你能检查一下 Receiver/Sender 对象是否没有被 GC 处理吗？可能是这种情况，因为您的发布和调试的初始化模式不同

# objective-c - 如何从 Tweetbot 制作像这样的 NSWindow？

> ID：13145239
> 
> 赞同：2
> 
> 时间：2012-10-30T18:16:10.277
> 
> 标签：objective-c, xcode, macos, cocoa, nswindow

我想做一个`NSWindow`这样的。我该怎么做？
抱歉，如果这是一个菜鸟问题，但我正在弄清楚。 ![在此处输入图像描述](../Images/26ee8d0851cc094693e7aa5d54eac4b4.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T18:17:32.663

像这样隐藏标题栏：

```
[myWindow setStyleMask:NSBorderlessWindowMask]; 
```

我不确定 Tweetbot 窗口有什么功能，但如果你想通过拖动白色区域来移动窗口，你可以使用自定义 NSView 并覆盖`mouseDownCanMoveWindow`返回`YES`。

# jquery - 带有文件描述的 REST Api 结果

> ID：13145241
> 
> 赞同：0
> 
> 时间：2012-10-30T18:16:19.813
> 
> 标签：jquery, python, json, api, jira

我需要在 JIRA 上进行搜索，但我的搜索结果不包含*Description*，我在最后添加了 fields=description ，但它不起作用：

[http://myapp.com/rest/api/latest/search?jql=project%3DPROJECT&fields=description](http://myapp.com/rest/api/latest/search?jql=project%3DPROJECT&fields=description)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T17:10:19.487

`&fields=description`意味着在字段中返回的内容将被过滤为仅返回描述属性

所以 - 使用`&expand=fields`- 获取有关字段 Jason 对象的更多数据，其中包括描述和用于`&fields=description`过滤新扩展的字段对象，仅获取描述而不是完整的

# php - 相对于我的 Web 主机，我的本地 XAMPP 安装上的 PHP 页面呈现/错误不同

> ID：13145242
> 
> 赞同：0
> 
> 时间：2012-10-30T18:16:20.647
> 
> 标签：php, xampp

> **可能重复：**
> [PHP 中的“警告：标头已发送”](https://stackoverflow.com/questions/8028957/warning-headers-already-sent-in-php)

我正在使用本地 XAMPP 安装来测试基于 PHP/MySQL 的网站的开发。我的本地 PHP 版本是 5.3.8，[我的虚拟主机](http://hostgator.com/)使用的是 5.2。我收到标题错误：

> 无法发送会话缓存限制器 - 标头已发送

在未显示在本地版本上的托管版本上。这是版本问题、设置问题还是其他问题？我将更改代码以使其适用于两者，但理想情况下，我希望这两个环境的行为几乎相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T18:28:00.897

这与 php 版本无关，不同之处在于您的主机上启用了错误报告，但您的本地未启用。请记住 session_start() 必须在发送任何实际输出之前调用，无论是通过普通 HTML 标记、文件中的空白行还是通过 PHP。使用 include 或 require 函数或其他文件访问函数读取代码并在调用 session_start() 之前输出空格或空行是一个非常常见的错误。使用单个 PHP/HTML 文件时也存在同样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:35:39.450

您是否比较了两台服务器的 html 源代码？可能还有另一个您没有注意到的错误或字符串打印出来。php标签是否位于文件的开头？甚至 php 标记前的空格也会导致此错误。

尝试注释代码块以查找导致错误的行，或者`exit`如果项目太大而无法在某行停止执行脚本并查看在该行之前是否一切正常，请使用函数。

# jsf - /login.xhtml 在 ExternalContext 中找不到作为资源

> ID：13145248
> 
> 赞同：1
> 
> 时间：2012-10-30T18:16:36.007
> 
> 标签：jsf

大家好，我使用 primefaces 创建了一个简单的 Web 应用程序。当我在 JBoss AS7 上部署应用程序并尝试打开网页时，出现以下错误：

只是为了让您知道我将所有 .xhtml 文件放在 webapp 下。

我的堆栈跟踪

```
20:06:22,318 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].          [/EjbProjectManagementApplication].[Faces Servlet]] (http--0.0.0.0-8080-1) Servlet.service() for   servlet Faces Servlet threw exception: com.sun.faces.context.FacesFileNotFoundException: /login.xhtml      Not Found in ExternalContext as a Resource
at com.sun.faces.facelets.impl.DefaultFaceletFactory.resolveURL(DefaultFaceletFactory.java:232) [jsf-  impl-2.1.7-jbossorg-2.jar:]
at com.sun.faces.facelets.impl.DefaultFaceletFactory.resolveURL(DefaultFaceletFactory.java:273) [jsf-impl-2.1.7-jbossorg-2.jar:]
at com.sun.faces.facelets.impl.DefaultFaceletFactory.getMetadataFacelet(DefaultFaceletFactory.java:209) [jsf-impl-2.1.7-jbossorg-2.jar:]
at com.sun.faces.application.view.ViewMetadataImpl.createMetadataView(ViewMetadataImpl.java:114) [jsf-impl-2.1.7-jbossorg-2.jar:]
at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:233) [jsf-impl-2.1.7-jbossorg-2.jar:]
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) [jsf-impl-2.1.7-jbossorg-2.jar:]
at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116) [jsf-impl-2.1.7-jbossorg-2.jar:]
at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118) [jsf-impl-2.1.7-jbossorg-2.jar:]
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
at java.lang.Thread.run(Unknown Source) [rt.jar:1.6.0_32] 
```

我的 faces-config.xml 是：

```
<?xml version="1.0" encoding="UTF-8"?>

<faces-config
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0">
    <managed-bean>
        <managed-bean-name>loginBean</managed-bean-name>
        <managed-bean-class>org.managedBeans.LoginBean</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
    </managed-bean>

    <managed-bean>
        <managed-bean-name>ProjectEntityHandlerBean</managed-bean-name>
        <managed-bean-class>org.managedBeans.ProjectEntityHandlerBean</managed-bean-class>
        <managed-bean-scope>request</managed-bean-scope>
    </managed-bean>
    <managed-bean>
        <managed-bean-name>departmentEntityHandlerBean</managed-bean-name>
        <managed-bean-class>org.managedBeans.DepartmentEntityHandlerBean</managed-bean-class>
        <managed-bean-scope>request</managed-bean-scope>
    </managed-bean>
    <managed-bean>
        <managed-bean-name>employeeEntityHandlerBean</managed-bean-name>
        <managed-bean-class>org.managedBeans.EmployeeEntityHandlerBean</managed-bean-class>
        <managed-bean-scope>request</managed-bean-scope>
    </managed-bean>
    <managed-bean>
        <managed-bean-name>partnerEntityHandlerBean</managed-bean-name>
        <managed-bean-class>org.managedBeans.PartnerEntityHandlerBean</managed-bean-class>
        <managed-bean-scope>request</managed-bean-scope>
    </managed-bean>
    <navigation-rule>
        <display-name>login.xhtml</display-name>
        <from-view-id>/login.xhtml</from-view-id>
        <navigation-case>
            <from-outcome>failure</from-outcome>
            <to-view-id>/failure.xhtml</to-view-id>
        </navigation-case>
    </navigation-rule>
    <navigation-rule>
        <display-name>success.xhtml</display-name>
        <from-view-id>/success.xhtml</from-view-id>
        <navigation-case>
            <from-outcome>project</from-outcome>
            <to-view-id>/project.xhtml</to-view-id>
        </navigation-case>
    </navigation-rule>
    <navigation-rule>
        <display-name>login.xhtml</display-name>
        <from-view-id>/login.xhtml</from-view-id>
        <navigation-case>
            <from-outcome>success</from-outcome>
            <to-view-id>/project.xhtml</to-view-id>
        </navigation-case>
    </navigation-rule>

</faces-config> 
```

我的 web.xml 是：

```
<?xml version="1.0" encoding="UTF-8"?>

<web-app version="3.0"
         xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
         metadata-complete="false"           >
 <display-name>svntoyapplication</display-name>
  <welcome-file-list>
    <welcome-file>login.xhtml</welcome-file>
  </welcome-file-list>
          <servlet>
                  <servlet-name>health</servlet-name>
                  <jsp-file>/health.jsp</jsp-file>
         </servlet>
         <servlet-mapping>
                  <servlet-name>health</servlet-name>
                  <url-pattern>/health</url-pattern>
         </servlet-mapping>

  <servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
 <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>  
  </servlet-mapping> 
    <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
  </servlet-mapping>
  <context-param>
    <description>State saving method: 'client' or 'server' (=default). See JSF Specification 2.5.2</description>
    <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>client</param-value>
  </context-param>
  <context-param>
    <param-name>javax.servlet.jsp.jstl.fmt.localizationContext</param-name>
    <param-value>resources.application</param-value>
  </context-param>
  <context-param>
    <param-name>com.sun.faces.allowTextChildren</param-name>
    <param-value>true</param-value>
</context-param>

  <listener>
    <listener-class>com.sun.faces.config.ConfigureListener</listener-class>
  </listener>  
</web-app> 
```

有人可以帮我识别错误吗？

# javascript - 将 base64 保存为 chrome 扩展中的图像

> ID：13145249
> 
> 赞同：2
> 
> 时间：2012-10-30T18:16:52.333
> 
> 标签：javascript, google-chrome-extension

我有一个使用该`captureVisibleTab`方法的 chrome 扩展，在它的回调中有一个 base64 编码的图像字符串。如何将图像保存到本地文件系统或提示浏览器另存为对话框。

```
chrome.tabs.captureVisibleTab(null, function(img) {
  img.replace('image/png', 'image/octet-stream');
}); 
```

我做到了，base64 编码的字符串作为八位字节流，但 chrome 扩展对其有限制。我还阅读了 NPAPI 插件，但我在那里没有取得太大进展。

# python - Django用不同的字段注释计数

> ID：13145254
> 
> 赞同：85
> 
> 时间：2012-10-30T18:17:04.250
> 
> 标签：python, django

我有两个松散定义的模型，如下所示：

```
class InformationUnit(models.Model):
    username = models.CharField(max_length=255)
    project = models.ForeignKey('Project')
    ...

class Project(models.Model):
    name = models.CharField(max_length=255) 
```

现在，在一个视图中，我想注释`InformationUnit`属于一个项目的所有 s，所以我这样做：

```
p = Project.objects.all().annotate(Count('informationunit') 
```

效果很好。

此外，我想知道，在每个项目中，有多少不同`username`的人参与。也就是说，计算组成一个项目`username`的 s 中有多少不同的 s。`InformationUnit`我尝试了以下方法，但它只是计算 的数量`InformationUnit`，而不管`username`：

```
p = Project.objects.all().annotate(Count('informationunit__username') 
```

请注意，`username`它不是一个对象，它是一个字符串。有没有一种干净的方法可以做到这一点，或者我应该基于循环和意大利面条代码创建一个更复杂的代码：P

非常感谢！

* * *

## 回答 #1

> 赞同：178
> 
> 时间：2012-10-30T18:26:11.363

`Count`可以接受一个`distinct`论点，如下所示：

```
p = Project.objects.all().annotate(Count('informationunit__username', 
                                         distinct=True)) 
```

这似乎没有记录，但您可以在 Count 的源代码中找到它。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2015-09-18T13:56:22.273

如果您只想计算不同的值，可以使用 distinct() 和 count() 函数：

```
count = Project.objects.values('informationunit__username').distinct().count() 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-10-30T18:24:30.413

```
Project.objects.all().annotate(Count('informationunit__username', 
                                     distinct=True)) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-03-18T07:08:15.940

SQL`SELECT field1, COUNT(DISTINCT(pk)) FROM project GROUP BY field1 ORDER BY NULL;`

查询集

```
Project.objects.all().values(field1).annotate(count=Count('pk', distinct=True)).order_by() 
```

# tfs - 如何在 TFS 和 VS2012 中移动和重命名项目

> ID：13145255
> 
> 赞同：18
> 
> 时间：2012-10-30T18:17:05.383
> 
> 标签：tfs, visual-studio-2012

我有一个 VS2012 项目，我想移动到 TFS 和文件系统中的不同位置，然后使用 VS2012 解决方案重命名该项目。重要的是，我需要确保 TFS 与我的更改保持同步。

任何想法如何做到这一点将不胜感激。谢谢...

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-30T19:40:50.430

您需要使用 Source Control Explorer 并找到您的项目。您应该能够右键单击它并选择移动。从那里，选择您希望它在源代码管理中的位置。

您应该能够通过右键单击解决方案文件并选择重命名来重命名 Visual Studio 中的项目。

不过请注意 - 我强烈建议将此操作分为两步。重命名项目，签入您的更改，然后移动它，反之亦然。TFS 在重命名时会表现出一些奇怪的行为，我永远不会将其与移动操作结合起来。

至于更改文件系统中的位置，这完全取决于您（除非我误解了您）。只需将项目映射到文件系统中的不同位置即可。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T14:16:14.960

最简单的方法是分两步进行。1\. 重命名项目并在解决方案资源管理器中更新程序集。构建成功后，签入您的更改。2\. 编辑您的解决方案文件 [项目名称].sln 并更新项目路径。

重新加载您的解决方案并构建。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T19:51:50.653

您可以在解决方案资源管理器中右键单击您的项目，然后选择“移动”以更改它在树中的位置。

但是，这实际上并***没有***移动您的项目。这将在新位置创建项目副本并删除旧项目，您将丢失历史记录。

我不相信有办法解决这个问题。

话虽如此，如果您选择“工具”->“选项”->“源代码管理”->“Visual Studio Team Foundation”并选中“源代码管理资源管理器”中的“显示已删除项目”，您仍然可以访问之前的历史记录。

# java - Java 构建路径错误 - （项目）中的（库）无法读取或不是 Eclipse 中的有效 zip 文件

> ID：13145264
> 
> 赞同：0
> 
> 时间：2012-10-30T18:17:29.813
> 
> 标签：java, android, eclipse, samsung-mobile

tl:dr 出现错误：Java 构建路径问题 - 所需库的存档：*项目*中*的*库无法读取或不是有效的 ZIP 文件。这发生在两个（~.so）我已包含在 Eclipse 中开发的 android 项目的构建路径中。我在构建路径中包含 ~.so 是不是做错了什么？

我正在尝试在我的 android 项目中安装 SPen SDK，但在包含一些本机库文件 (~.so) 时遇到问题。

我正在尝试遵循此处指定的教程：[将 S Pen 库添加到 android 项目](http://developer.samsung.com/s-pen-sdk/technical-docs)。这是本页的第 2-2 点。

我将 libspen22.jar 包含到构建路径中，这似乎很好。但是当我尝试运行应用程序时，我收到一条错误消息，指出 Java 问题，其中包含 323 个项目的列表，说明函数*foo*必须覆盖超类方法。但是我注意到我没有将 ~.so 库包含到构建路径中，因此我之前也将这两个库添加到了构建路径中。这停止了​​ 323 错误，但导致了 2 个新错误 - Java 构建路径问题 - 所需库的存档：*项目*中*的*库无法读取或不是有效的 ZIP 文件。通过在使用 Eclipse 开发的 android 项目的构建路径中包含两个 ~.so 文件，我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:55:14.810

**转到 Project Properties 并将 Java Compiler 设置为 1.6 它应该会有所帮助。**

我认为 S-Pen 不需要任何 *.so

无论如何，您不应该在构建路径中包含 *.so。任何预构建的 *.so 都应在您的 Android.mk 中指定，如下所示：

```
LOCAL_PATH := $(call my-dir)

   include $(CLEAR_VARS)
   LOCAL_MODULE := foo-prebuilt
   LOCAL_SRC_FILES := libfoo.so
   include $(PREBUILT_SHARED_LIBRARY) 
```

请参考 Android NDK`docs/PREBUILTS.html`但我再次认为这是因为 Java 编译器已设置为 1.5

# java - Long.valueOf(java.lang.String) 和 new Long(java.lang.String) 的区别？

> ID：13145267
> 
> 赞同：30
> 
> 时间：2012-10-30T18:17:33.707
> 
> 标签：java, coding-style, long-integer

我正在合并由两个不同的人编写的代码，并注意到将 String 值转换为 Long 有两种不同的方式。

Coder #1 已经做到了这一点：

```
String strId = "12345678";
...
Long lId = new Long(strId); 
```

虽然 coder #2 已经这样做了：

```
String strId = "12345678";
...
Long lId = Long.valueOf(strId); 
```

从功能上讲，代码的运行方式完全相同。每个位周围都有一个 try/catch 块来处理任何`NumberFormatException`抛出的问题。传入的字符串值是一个代表小数的 8 位字符串：`"12345678"`在这两种情况下，它都被正确转换为`Long`.

在构造函数中传递字符串和使用 Long.valueOf() 之间有什么功能区别吗？我在这里检查了构造函数文档：

[长（java.lang.String）](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Long.html#Long%28java.lang.String%29)

和 valueOf() 的文档在这里：

[Long.valueOf(java.lang.String)](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Long.html#valueOf%28java.lang.String%29)

据我所知，它们都调用 parseLong() 所以使用哪个并不重要。我只是想确保我不会为以后的一些奇怪行为做好准备。此外，任何一种风格都比另一种更“正确”（哈哈）吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-30T18:23:23.923

**不同之处在于，**使用`new Long()`你将始终创建一个新对象，而使用 时`Long.valueOf()`，可能会返回缓存值，`long`如果值介于 之间`[-128 to 127]`。

所以，你应该更喜欢`Long.valueOf`方法，因为它可以为你节省一些内存。

如果您看到 的源代码`Long.valueOf(String)`，它会在内部调用`Long.valueOf(long)`，我在下面发布了它的源代码：-

```
public static Long valueOf(String s) throws NumberFormatException
{
    return Long.valueOf(parseLong(s, 10));
}

public static Long valueOf(long l) {
    final int offset = 128;
    if (l >= -128 && l <= 127) { // will cache 
        return LongCache.cache[(int)l + offset];
    }
    return new Long(l);
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-30T18:22:00.133

`Long.valueOf()`应该首选：它为一些常用值返回 Long 的缓存值，而不是像构造函数那样构造一个新实例。

即使某些 Java 版本不使用缓存，使用`valueOf()`也可以在未来的版本中使用，而构造函数将始终创建一个新实例。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-30T18:20:22.693

他们的意思是一样的

```
public static Long valueOf(String s) throws NumberFormatException{
        return new Long(parseLong(s, 10));
}

public Long(String s) throws NumberFormatException {
    this.value = parseLong(s, 10);
} 
```

[源 JDK 6.0](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/Long.java)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-30T18:23:16.243

两者都在`parseLong(String, int)`内部进行（int 是基数，值为 10），但`valueOf`具有如下所述的优势：

`If a new Long instance is not required, this method should generally be used in preference to the constructor Long(long), as this method is likely to yield significantly better space and time performance by caching frequently requested values.`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T18:23:47.637

这是在 Eclipse 上运行的 PMD 插件输出

我检查的代码是

```
Long l = new Long("123456"); 
```

在 JDK 1.5 中，调用 new Long() 会导致内存分配。Long.valueOf() 对内存更友好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-22T10:38:26.450

我正在考虑如何为我们的应用程序更改缓存的范围和大小，并用 Longs 重载；

j2se api 不支持此类更改一种方法是使用 ClassLoader 甚至使用 JVMTI 更改加载的 java 字节码（它允许将此类技巧排除在项目之外，例如外部调整）

或者，可能是创建外部缓存和自己的静态 cachedValueOf() ，这很简单，但是取决于一些非应用程序需求的代码并不好

# sql - where 子句与内部连接语句检查，它们是否相同？

> ID：13145275
> 
> 赞同：2
> 
> 时间：2012-10-30T18:18:06.900
> 
> 标签：sql, sql-server, inner-join

> **可能重复：**
> [JOIN 或 WHERE 中的条件](https://stackoverflow.com/questions/1018952/condition-within-join-or-where)

以下 2 个查询是否相同？

```
SELECT u.*
FROM User u
    INNER JOIN Sales s ON (u.userId = s.userId)
WHERE
u.active = 1 AND
s.amount > 0 AND
s.status = 1 
```

相对：

```
SELECT u.*
FROM User u
    INNER JOIN Sales s ON 
        (u.userId = s.userId AND s.amount > 0 and s.status=1)
WHERE
u.active = 1 
```

这两个查询在结果集方面总是相同的吗？性能考虑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T18:22:10.113

SQL Server 查询优化器足够聪明，可以理解这将做同样的事情，因此他将生成相同的执行计划。这意味着您将获得相同的性能。为了确保您可以查看执行计划并进行比较。

查看[执行计划基础知识](http://www.simple-talk.com/sql/performance/execution-plan-basics/)

# ssh - 通过 Jenkins 通过 Capistrano 部署 - SSH 身份验证失败

> ID：13145278
> 
> 赞同：10
> 
> 时间：2012-10-30T18:18:09.380
> 
> 标签：ssh, jenkins, capistrano, ssh-keys, capifony

我有一个 Jenkins 构建，它运行 Capistrano 部署作为构建后操作。

从控制台以 Jenkins 用户身份运行 Capistrano 任务绝对可以正常工作，并且没有密码提示（我之前在构建和登台服务器上都设置了 SSH 密钥）。但是，当通过 Jenkins 运行相同的脚本时，我突然收到密码提示，随后构建失败（不存在 TTY）。

```
[workspace] $ /bin/sh -xe /tmp/hudson7321493219694918714.sh
Performing Post build task...
Match found for : : True
Logical operation result is TRUE
Running script  : cap _2.13.4_ deploy
[workspace] $ /bin/sh -xe /tmp/hudson1545664641721322948.sh
+ cap _2.13.4_ deploy
  * executing `deploy'
  * executing `deploy:update'
 ** transaction: start
  * executing `deploy:update_code'
    triggering before callbacks for `deploy:update_code'
[32m--> Updating code base with checkout strategy[0m
    executing locally: "git ls-remote git@my.staging-server.com:my_project.git master"
    command finished in 1200ms
  * executing "git clone -q git@my.staging-server.com:my_project.git /var/www/staging/my_project/releases/20121029223619 && cd /var/www/staging/my_project/releases/20121029223619 && git checkout -q -b deploy 1fb11d669a6cb5a714d077162305dfcfaba82f01 && (echo 1fb11d669a6cb5a714d077162305dfcfaba82f01 > /var/www/staging/my_project/releases/20121029223619/REVISION)"
servers: ["my.staging-server.com"]
Password: stty: standard input: Inappropriate ioctl for device
stty: standard input: Inappropriate ioctl for device
stty: standard input: Inappropriate ioctl for device

*** [deploy:update_code] rolling back
  * executing "rm -rf /var/www/staging/my_project/releases/20121029223619; true"
    servers: ["my.staging-server.com"]
 ** [deploy:update_code] exception while rolling back: Capistrano::ConnectionError, connection failed for: my.staging-server.com (Net::SSH::AuthenticationFailed: not-specified)
connection failed for: my.staging-server.com (Net::SSH::AuthenticationFailed: not-specified)
POST BUILD TASK : FAILURE 
```

看起来 Ruby 在通过 Jenkins 运行时可能没有选择我的 SSH 密钥（`Net::SSH::AuthenticationFailed: not-specified`）？

有谁知道这里可能出了什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T21:57:51.333

我们遇到了类似的事情。jenkins 的登录 shell 可能已经有一个自动运行的 ssh 代理，但 jenkins 为您的部署生成的上下文没有。

尝试在您的 jenkins 脚本中手动启动一个：

```
# Start the ssh agent. Evaling the output will set the relevant environment 
# variables
eval `ssh-agent` 

# Add the default keys like id_rsa and id_dsa (or explicitly specify your key,
# if it's not a default)
ssh-add

# Your normal deploy script here

# Save the return value of your script
RETVAL=$?

# Clean up
kill $SSH_AGENT_PID

# Exit the script with the true return value instead of the return value of kill
# which could be successful even when the capistrano portion of the build has
# crashed
exit $RETVAL 
```

希望这对你有用！贝壳很烦人。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-02T17:58:57.383

`deploy.rb`不幸的是，我只是通过在执行之前替换原来的来解决它，然后`cap deploy`用另一个保存在我添加的本地保存`set :password, "sshpassword"`

# python - Django 应用程序生命周期：处理启动和重新加载的标准钩子？

> ID：13145282
> 
> 赞同：0
> 
> 时间：2012-10-30T18:18:29.227
> 
> 标签：python, django

我试图了解是否有标准方法来处理特定的 django 应用程序启动（和重新加载）。目前我想用它来启动一个并行线程，但对我来说这个问题更笼统：这是允许还是不允许出于某种原因。

例如，在 Java Servlet 和 .Net Web 应用程序的情况下，此类处理程序是应用程序接口的一部分。它们是 django 应用程序界面的一部分吗？

**UPD** 在这种情况下，我只是想实现一个保持开放连接的小型代理。我确实知道我想要的接口最初是 WSGI 的一部分，但它不是，我认为 django 可能会提供自己的解决方案，因为在大多数情况下（除了普通 CGI）应用程序提供的服务不止一个请求并且显然确实有一个生命周期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T18:25:33.767

简短的回答：没有。

更长的版本是它实际上取决于您的应用程序的部署方式。例如，在 Java 中，给你一个`onStart`钩子的不是 Spring（在这个类比中相当于 Django），而是 Tomcat 或 Jetty。

部署 Django 的常用接口 WSGI 没有定义这样的钩子。WSGI*进程*通常会从独立的进程管理器或服务脚本启动，或者通过 Apache 等外部服务器启动。在这种情况下，您可能能够挂钩某个生命周期，但这高度依赖于包装您的请求的服务器。

听起来你正在尝试做一些非正统的事情。你到底想要完成什么？

# android - 如何使用新的 Android SDK 发送 FQL 查询

> ID：13145284
> 
> 赞同：9
> 
> 时间：2012-10-30T18:18:36.593
> 
> 标签：android, facebook-fql, facebook-android-sdk

我一直在搜索[developer.facebook](https://developers.facebook.com/android)网站，寻找使用新 SDK 和发送 FQL 查询的方法，但似乎一切都发生了变化，文档正在讨论各种其他请求方式，`me`但`friends`不是特定信息，例如那些朋友是否使用我的应用程序？

所以我写了一个很好的 FQL 查询

```
select uid, name, pic_square, is_app_user from user where uid in (select uid2 from friend where uid1 = me()) 
```

现在，我所要做的就是运行它。

因为返回朋友列表的唯一请求似乎是我认为他们是我的朋友`Request.executeMyFriendsRequestAsync`，`Request.newMyFriendsRequest`但两者都不允许对 FQL 查询进行微调。

如何发送查询并取回朋友列表或至少一个`JSONArray`？

Hackbook - FQL Query 教程使用的是旧版本的 SDK，我不知道该怎么办。

***更新：***

我添加了这些代码行，认为它可以让我创建这个查询：

```
public void onCreate(Bundle savedInstanceState) {
    // SOME CODE
    this.openSession();
}

protected void onSessionStateChange(SessionState state, Exception exception) {
    if (state.isOpened()) {
        Session activeSession = getSession().getActiveSession();
        facebook.setAccessToken(activeSession.getAccessToken());
        facebook.setAccessExpires(activeSession.getExpirationDate().getTime());

        Request req = Request.newMyFriendsRequest(activeSession, new GraphUserListCallback() {

            @Override
            public void onCompleted(List<GraphUser> users, Response response) {
                System.out.println(response.toString());

            }
        });
        Bundle params = new Bundle();
        params.putString("method", "fql.query");
        params.putString("query", "select uid, name, pic_square, is_app_user " + "from user where uid in "
                + "(select uid2 from friend where uid1 = me())");
        req.setParameters(params);
        Request.executeBatchAsync(req);

    }
} 
```

我这样做了，认为它会编辑请求并添加我想要的信息，但我收到了这个错误：

```
10-31 09:36:31.647: E/AndroidRuntime(15986): java.lang.NullPointerException
10-31 09:36:31.647: E/AndroidRuntime(15986):    at com.sample.facebook.to.db.MainActivity$1.onCompleted(MainActivity.java:62)
10-31 09:36:31.647: E/AndroidRuntime(15986):    at com.facebook.Request$2.onCompleted(Request.java:269)
10-31 09:36:31.647: E/AndroidRuntime(15986):    at com.facebook.Request$4.run(Request.java:1197)
10-31 09:36:31.647: E/AndroidRuntime(15986):    at android.os.Handler.handleCallback(Handler.java:587)
10-31 09:36:31.647: E/AndroidRuntime(15986):    at android.os.Handler.dispatchMessage(Handler.java:92)
10-31 09:36:31.647: E/AndroidRuntime(15986):    at android.os.Looper.loop(Looper.java:130)
10-31 09:36:31.647: E/AndroidRuntime(15986):    at android.app.ActivityThread.main(ActivityThread.java:3691)
10-31 09:36:31.647: E/AndroidRuntime(15986):    at java.lang.reflect.Method.invokeNative(Native Method)
10-31 09:36:31.647: E/AndroidRuntime(15986):    at java.lang.reflect.Method.invoke(Method.java:507)
10-31 09:36:31.647: E/AndroidRuntime(15986):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
10-31 09:36:31.647: E/AndroidRuntime(15986):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
10-31 09:36:31.647: E/AndroidRuntime(15986):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-31T17:12:41.837

你会做这样的事情：

```
String fqlQuery = "select uid, name, pic_square, is_app_user from user where uid in (select uid2 from friend where uid1 = me())";
Bundle params = new Bundle();
params.putString("q", fqlQuery);

Session session = Session.getActiveSession();
Request request = new Request(session, 
    "/fql", 
    params, 
    HttpMethod.GET, 
    new Request.Callback(){ 
        public void onCompleted(Response response) {
        Log.i(TAG, "Got results: " + response.toString());
    }
});
Request.executeBatchAsync(request); 
```

您基本上是在向“/fql”端点发出 Graph API 请求，并将查询传递给“q”参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T15:24:38.533

试试这个方法

```
void a(){
         String fqlQuery = "{" +
                 "'friends':'SELECT uid2 FROM friend WHERE uid1 = me() LIMIT 25'," +
                 "'friendinfo':'SELECT uid, name, pic_square FROM user WHERE uid IN " +
                 "(SELECT uid2 FROM #friends)'," +
                 "}";
           Bundle params = new Bundle();
           params.putString("q", fqlQuery);
           Session session = Session.getActiveSession();
           Request request = new Request(session,
               "/fql",                         
               params,                         
               HttpMethod.GET,                 
               new Request.Callback(){         
                   public void onCompleted(Response response) {
                       Log.i(TAG, "Result: " + response.toString());
                   }                  
           }); 
           Request.executeBatchAsync(request);    
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T19:03:43.677

这是讨论此问题的线程的链接：[FQL using facebook android SDK](https://stackoverflow.com/questions/3729290/fql-using-facebook-android-sdk)

您也可以使用以下格式发出 Graph API 调用：graph.facebook.com/fql?q=QUERY

所以在你的情况下，它可能看起来像：graph.facebook.com/fql?q=select uid, name, pic_square, is_app_user from user where uid in (select uid2 from friend where uid1 = me())

编辑：似乎此功能的示例存在于示例应用程序“Hackbook”中 [https://github.com/facebook/facebook-android-sdk/blob/master/examples/Hackbook/src/com/facebook/android/ FQLQuery.java](https://github.com/facebook/facebook-android-sdk/blob/master/examples/Hackbook/src/com/facebook/android/FQLQuery.java)

最值得注意的是，这段代码（第 61 行）：

```
String query = mFQLQuery.getText().toString();
Bundle params = new Bundle();
params.putString("method", "fql.query");
params.putString("query", query);
Utility.mAsyncRunner.request(null, params, new FQLRequestListener()); 
```

# grails - Grails Searchable Plugin 找不到导入的 MySQL 数据

> ID：13145286
> 
> 赞同：0
> 
> 时间：2012-10-30T18:18:40.020
> 
> 标签：grails

我将一个 Web 应用程序转换为 Grails，并使用 Searchable 插件来搜索数据。在我将现有的遗留数据从旧的 MySQL 数据库导入到 Grails 应用程序使用的新数据库之前，我对此没有任何问题。搜索不会在数据库中找到任何导入的数据，但会找到从 Grails 应用程序中添加的任何数据。

我假设我必须以某种方式索引导入的数据，但我不确定从哪里开始查找。任何人都可以伸出援助之手吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T20:10:44.770

一切都在文档中；）

您可以执行以下两项操作之一：

1.  启动时索引：为此，您需要配置插件。
    1.  首先，安装配置：`grails install-searchable-config`
    2.  然后，确保将批量索引设置为 true。在配置文件 conf/Searchable.groovy 中应该有这样的一行：`bulkIndexOnStartup = true`
2.  手动重新索引。您可以在任何控制器上执行此操作：`searchableService.reindex()`

# java - Eclipse R.java 更改未保存

> ID：13145287
> 
> 赞同：0
> 
> 时间：2012-10-30T18:18:48.567
> 
> 标签：java, android, eclipse, r.java-file

当我“快速修复”类似“gcm_unregistered 无法解决或不是字段”之类的错误并单击“在字符串类型中创建常量 gcm_unregistered”时，R.java 中有一个添加 - >

公共静态最终类字符串{

```
 public static final int gcm_unregistered = 0; 
```

保存后，项目重建并创建一个新的标准 R.java 没有添加的行。我在 R.java 中看到了更多行的示例，所以我的项目中出现了问题或者我错过了一个设置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T18:21:48.677

我不确定 gcm_unregistered 应该是什么，但我建议不要编辑 R 类，因为它是生成的。如果您想在 Resources (R) 中添加一些内容，请通过 xml 进行。这里是 Android 用于操作/访问资源的站点[http://developer.android.com/guide/topics/resources/accessing-resources.html](http://developer.android.com/guide/topics/resources/accessing-resources.html)

编辑：所以你想添加一个字符串资源然后转到 res/values/ 下的 strings.xml 并添加 gcm_unregistered 和你想要的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T18:22:46.147

`R.java`是由 Android Build 进程自动生成的文件。再次构建项目时，您对其所做的任何更改都将丢失。

如果你想添加自己的常量，只需让自己成为一个`Constants`类（我通常称之为 mine `C`，以保持简短）

```
public class Constants {

    public static final int gcm_unregistered = 0;

} 
```

现在您可以将其作为`Constants.gcm_unregistered`.

**R.java的更深层次的解释**

Android 将基于 XML 的布局视为资源，因此布局文件存储在 Android 项目内的 res/layout 目录中。字符串、颜色、原始二进制数据（如声音文件等）也被视为资源。本质上，任何`/res`文件夹中合法允许的任何内容都是资源。

当您运行 Android 构建系统时，该`aapt`工具会生成一个新`R.java`文件并覆盖旧文件。此文件将包含指向所有`IDs`、`Strings`、等的指针`Layouts`，切勿手动修改。如果您想要 中的值，则应检查是否可以合法地将其添加到其中一个文件夹中，如果可以，请这样做。但是，AFAIK，您不能为其添加值（请注意，虽然其中的所有内容都是，但它们指向各种其他资源。因此，虽然将是一个值，但它实际上告诉 Android 使用该文件。`Colors``R.java``R.java``/res``int``R.java``int``R.layout.mylayout``int``mylayout.xml`

这里有一篇关于 R.java 和 /res 文件夹不同部分的优秀[文章](http://www.satyakomatineni.com/akc/display?url=displaynoteimpurl&ownerUserId=satya&reportId=2883)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T18:22:47.480

R.java 被构建修改，您不应该修改它，因为您的更改将丢失。

# java - 尝试在 Oracle 中绑定 double.max_value 时溢出

> ID：13145288
> 
> 赞同：1
> 
> 时间：2012-10-30T18:18:56.390
> 
> 标签：java, oracle, hibernate

我正在尝试让我们的 Hibernate 应用程序在 Oracle 11g 上运行，但是在尝试保持 double.max_value 时我们不断收到以下错误：

```
Caused by: java.sql.SQLException: Internal Error: Overflow Exception trying to bind 1.7976931348623157E308
at oracle.jdbc.driver.SQLStateMapping.newSQLException(SQLStateMapping.java:70)
at oracle.jdbc.driver.DatabaseError.newSQLException(DatabaseError.java:133)
at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:199)
at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:263)
at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:271)
at oracle.jdbc.driver.DoubleBinder.bind(OraclePreparedStatement.java:15676)
at oracle.jdbc.driver.OraclePreparedStatement.setupBindBuffers(OraclePreparedStatement.java:2948)
at oracle.jdbc.driver.OraclePreparedStatement.processCompletedBindRow(OraclePreparedStatement.java:2202)
at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3382)
at oracle.jdbc.driver.OraclePreparedStatement.executeUpdate(OraclePreparedStatement.java:3468)
at oracle.jdbc.driver.OraclePreparedStatementWrapper.executeUpdate(OraclePreparedStatementWrapper.java:1350)
at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2437)
... 11 more 
```

**有谁知道为什么我们不能坚持这个价值？**

我们只在 Oracle 中遇到这个问题——Postgres 和 H2 工作正常。

我们尝试将 Oracle 数据类型强制为 Number 和 Binary_Double，但结果相同。我们使用的是 Hibernate 3 和 Oracle 11g，以及 oracle jdbc 驱动程序和 OracleSpatial10g 方言。

（我是一个 Hibernate 和 Oracle 新手，所以任何帮助表示赞赏。）

编辑：到目前为止，一些有用的评论，但我还没有弄清楚我的问题。这里有更多信息：

*   我发现我可以使用 BINARY_DOUBLE 将数字直接插入数据库。我使用 sqlfiddle 并使用 SQLDeveloper 通过我的本地数据库进行了尝试。我也可以在 SQLDeveloper 中检索它。
*   我的问题是我永远无法将数字提交到我的数据库......在任何东西进入数据库*之前抛出异常。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T21:24:17.810

正如@Tomas 的[回答](https://stackoverflow.com/a/13145950/1083652)所述，有一种数据类型`binary_double`，其最大值是您需要的值。

以下是如何将`1.7976931348623157E308`数值作为数值插入表格

```
create table t1 (big_val binary_double);
insert into t1 values( cast('1.7976931348623157E308' as binary_double) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:02:32.817

实际上，您可以将其保存为 Oracle 上的字符串。我已经对其进行了测试，并且可以正常工作。在java上：

```
Double d = Double.MAX_VALUE;
PreparedStatement pstmt;
// ...
// INSERT INTO x VALUES(?)

pstmt.setString(1, d.toString());

// SELECT BIG_DOUBLE_COL from x

    String str = rs.getString(1);
    Double nd = str==null?null:new Double(str); 
```

在数据库上：创建表 x (BIG_DOUBLE_COL BINARY_DOUBLE)；

请注意，其他数据库似乎不接受 Double.MAX_VALUE 的字符串表示作为有效的 Double（即他们无法解析它），因此这不适用于所有数据库。但是这些数据库通常接受使用带有 Double.MAX_VALUE 的 setDouble 方法。例如，Ingres 就是这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T12:08:17.750

@ABCade 是正确的，可以通过将值从字符串转换为 BINARY_DOUBLE 来插入值，或者通过显式执行转换：

```
INSERT INTO TEST_TABLE(TEST_VAL)
  VALUES (CAST ('1.7976931348623157E308' AS BINARY_DOUBLE)) 
```

或隐含地：

```
INSERT INTO TEST_TABLE(TEST_VAL)
  VALUES ('1.7976931348623157E308') 
```

（假设 TEST_TABLE 有一列 TEST_VAL 声明为 BINARY_DOUBLE）。

但是，如果您尝试使用客户端-服务器工具（我使用 Allround Automations - v.8.0.4.1514 FWIW 的 PL/SQL Developer 进行测试）来检索这些值以执行 SELECT，例如

```
SELECT * FROM TEST_TABLE 
```

您收到以下错误：

```
ORA-03115: unsupported network datatype or representation 
```

这需要强制转换为 VARCHAR2 才能解决。

分享和享受。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T19:02:59.077

根据[这个](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements001.htm#i140176)你的价值太大了，即使对于`BINARY_DOUBLE`

# java - Java 类路径通配符在没有引号的情况下不起作用

> ID：13145296
> 
> 赞同：6
> 
> 时间：2012-10-30T18:19:30.567
> 
> 标签：java, classpath

我有一个包含大量 jar 文件和类路径的文件夹：

```
-classpath ./classes:./jogamp-all-platforms/jar/* 
```

但它没有找到包。只是为了确保我有相关资源，我手动找到包含它的 jar 并将类路径更改为：

```
-classpath ./classes:./jogamp-all-platforms/jar/jogl-all.jar 
```

现在它不再抱怨找不到包裹了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-23T13:36:06.677

在 Debian 下，我必须在通配符周围加上引号才能使它起作用：`"*"`

那么编译命令就变成了：

```
javac -cp ~/my\ stuff/Java/"*" test.java 
```

我正在使用JDK，JRE 8。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T18:35:28.580

问题是扩展到您目录中的所有条目，并且类路径语法允许在您的平台上`*`分隔目录和 jar 文件。已扩展，并将包含您目录中的所有 jar，您将以以下内容结束：`:``*`

`-classpath ./classes:./jogamp-all-platforms/jar/jogl-all.jar another.jar etc.jar`

如果在您的`./jogamp-all-platforms/`目录中，您有`jogl-all.jar` `another.jar` `etc.jar`罐子。

您可以使用以下内容逃避`*`shell 的扩展：

`-classpath './classes:./jogamp-all-platforms/jar/*'`

这样，您的编译器将解释`*`扩展。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T18:35:50.870

我认为您需要在如下`;`之后用作路径分隔符`./classes`：

```
 -classpath ./classes;./jogamp-all-platforms/jar/* 
```

**另请注意：**

`Subdirectories are not searched recursively. For example, jogamp-all-platforms/jar/* looks for JAR/Class files only in jogamp-all-platforms/jar, not in jogamp-all-platforms/jar/abcd, jogamp-all-platforms/jar/efc, etc.`

通过这样做`-classpath ./classes:./jogamp-all-platforms/jar/*`，它只查看文件`jogamp-all-platforms/jar`夹中的所有 JAR。

有关更多详细信息，请参阅此处的文档 -[**类路径中的通配符**](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/classpath.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T18:34:25.503

The first form will not work. You cannot load jar files with wildcards. The second form should work, unless you're missing dependent classes.

# crystal-reports - Crystal Reports 中优雅的字符串到日期（范围）转换

> ID：13145297
> 
> 赞同：1
> 
> 时间：2012-10-30T18:19:33.170
> 
> 标签：crystal-reports, refactoring, type-conversion

在我的数据库中，我有一个类型为 varchar(8) 的日期字段，用于以 YYYYMMDD 格式存储日期值。我很难创建一个简单的 CR 公式来显示以下格式的日期范围：

**2012 年 10 月 1 日至 2012 年 10 月 31 日**

这是我当前且非常不吸引人的 CR 公式：

```
stringvar yYear;
stringvar mMonth;
datevar OrigDate;
numbervar StartDay;
stringvar EndDay;

yYear := Mid ({Command.Date}, 1, 4);

select Mid ({Command.Date}, 5, 2)
case "01": mMonth:= "January"
case "02": mMonth:= "Februry"
case "03": mMonth:= "March"
case "04": mMonth:= "April"
case "05": mMonth:= "May"
case "06": mMonth:= "June"
case "07": mMonth:= "July"
case "08": mMonth:= "August"
case "09": mMonth:= "September"
case "10": mMonth:= "October"
case "11": mMonth:= "November"
case "12": mMonth:= "December";

OrigDate := CDate(ToNumber({Command.Date}[1 to 4]), ToNumber({Command.Date}[5 to 6]), ToNumber({Command.Date}[7 to 8]));
StartDay := ToNumber({Command.Date}[7 to 8]);
EndDay := Mid(ToText(DateSerial(Year(OrigDate), Month(OrigDate) +1, 1-1)), 4, 2);

mMonth + " " + ToText(StartDay, "#") + ", " + yYear + " to " + mMonth + " " + EndDay + ", " + yYear 
```

这可行，但本着可维护性和良好/干净的编码实践的精神，如果可能的话，我想简化这个功能。

我对用 Crystal 编写报告比较陌生，所以我希望我没有“重新发明轮子”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T18:40:06.167

尝试这个：

```
local numbervar year := tonumber(left({Command.Date},4));
local numbervar month:= tonumber(mid({Command.Date},5,2));
local numbervar day := tonumber(right({Command.Date},2));
local datevar stDate := date(year,month,day);
local datevar endDate := dateserial(year,month+1,day-1); //get last day of month

totext(stDate,"MMMM d, yyyy") + " to " + totext(endDate,"MMMM d, yyyy") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T21:17:13.580

干燥机解决方案？

创建自定义函数：

```
// YYYYMMDD()
// Convert a value in 'YYYYMMDD' to a Date
Function (Stringvar value)

    Date( ToNumber(value[1 to 4]), ToNumber(value[5 to 6]), ToNumber(value[7 to 8]) ) 
```

为开始日期创建一个公式：

```
//{@Starting Date}
YYYYMMDD( {Command.Date} ) 
```

为结束日期创建一个公式：

```
//{@Ending Date}
// find first day of current month, add a month, subtract a day, truncate time
Date( DateAdd("m", 1, Date( Year({@Starting Date}), Month({@Starting Date}), 1) ) - 1 ) 
```

将两个公式字段嵌入文本字段并根据需要设置每个字段的格式（提高灵活性）。

# asp.net - 在 asp.net 中自定义文字控件

> ID：13145301
> 
> 赞同：0
> 
> 时间：2012-10-30T18:19:44.717
> 
> 标签：asp.net, asp.net-mvc

我们可以更改 asp.net 工具中的文字按钮吗？例如，一个文字出现并问我们一个问题，我们可以通过使用两个按钮来回答它，这两个按钮向我们显示是和否。

```
 Literal1.Text = "<script>alert('You have already sent a request for this reviewer')    </script>"; 
```

如果可能，请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:15:22.320

如果我理解正确，您可能正在寻找确认，而不是警报：

```
<script>confirm('You have already sent a request for this reviewer')</script> 
```

但是确认显示确定/取消而不是是/否。如果您想要更多控制权，可以查看模式对话框。

# php - 将简单的 xml 结果作为基本的 php 变量返回

> ID：13145304
> 
> 赞同：0
> 
> 时间：2012-10-30T18:19:53.520
> 
> 标签：php, xml

我有一段代码调用外部文件并将数据库中的结果作为 xml 输出返回，如下所示：

```
 $file = 'http://computers.mysite.co.uk/vrm.xml?apikey=**********&vid=Check&vrm='.$reg;
  if(!$xml = simplexml_load_file($file))
 exit('Failed to open '.$file);
  print_r($id); 
```

这将返回如下结果：

```
 <computers sid="1234">
      <computer id="253406" name="computer name)" model_group="Microsofth" start_year="2005" end_year="2009">
        <system id="969623" capacity="3.4"/>
         <developer id="64" name="intel"/>
            <machine id="8" name="P" etype="P"/>
           <products>
           <product id="9" name="computer screwdriver" datasheet="" packshot=""/>
         <product id="16" name="Screwdriver Crosshead" datasheet="" packshot=""/>
       </products>
     </computer>
   </computers> 
```

除了显示这样的结果之外，是否可以返回它们或将它们更改为基本的 php 变量，例如：

```
 $compputer_sid
   $computer_id
   $system_id 
```

等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:23:22.393

更新：Doh，您已经在使用 SimpleXML。

您可以使用如下语法访问节点：

```
$xml['sid'];//<computers sid="1234"> 
```

尝试：

```
echo $xml['sid'];
foreach($xml->computer as $computer){
    echo $computer['id'];
    echo $computer->system['id'];
} 
```

# ruby - Ruby 实例变量

> ID：13145307
> 
> 赞同：1
> 
> 时间：2012-10-30T18:19:59.973
> 
> 标签：ruby

```
class Polygon
  attr_accessor :sides
  @sides = 10
end 
```

当我尝试访问

```
puts Polygon.new.sides # => nil 
```

我得到零。如何访问边？这里有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T18:24:52.173

由于 ruby​​ 类定义只是可执行代码，所以当您`@sides = 10`在类定义的上下文中说时，您是在定义它`Polygon`（而不是 Polygon 的实例）：

```
class Polygon
  attr_accessor :sides
  @sides = 10
end

Polygon.instance_variables
# => [:@sides] 
```

您可能希望从初始化程序设置 Polygon*实例的边数：*

```
class Polygon
  attr_accessor :sides

  def initialize(sides)
    @sides = sides
  end
end 

Polygon.new(10).sides
# => 10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T18:24:47.997

你需要：

```
def initialize
  @sides = 10
end 
```

通过`@sides`在类级别赋值，您创建了一个*类实例变量*，而不是您使用创建的对象的*实例变量*`#new`。

在这种情况下，您有一个给定的属性，`Polygon,`但如果它实际上是类的属性（如*作者*或*版权或其他东西），那么**如果*您在使用创建的*类方法*`@whatever`中，则可以通过语法引用它。**`def self.something ... end`**

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T18:25:48.150

attr_accessor，简而言之定义了两种方法。

```
def sides
end

def sides=
end 
```

要获得此处提到的边的值，您需要将它们初始化为

```
def initialize
  @sides = 10
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T18:25:57.443

这个确切的问题（甚至使用您拥有的相同示例代码）在[railstips.org](http://railstips.org/blog/archives/2006/11/18/class-and-instance-variables-in-ruby/)上得到了回答。**

# c# - 为 C# 开发人员理解 Ruby

> ID：13145311
> 
> 赞同：-5
> 
> 时间：2012-10-30T18:20:09.957
> 
> 标签：c#, ruby

Ruby 应用程序架构到底是怎样的？

有哪些不同的文件类型及其内容？解决方案/项目文件的扩展名是什么？哪个文件类似于配置文件？有没有形成 DLLS 之类的文件？如果没有定义 main()，程序的入口点是什么？

我在互联网上查找了所有这些。但我能找到的只是一些命令行小代码片段或一些将 Ruby on Rails 的教程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T18:30:40.007

> 有没有形成 DLLS 之类的文件？

不。Ruby 是一种[解释型语言](http://en.wikipedia.org/wiki/Interpreted_language)，很像 JavaScript、Python 和 PHP。

> 如果没有定义 main()，程序的入口点是什么？

那么，您将什么定义为入口点？如果您的意思是运行特定文件，那么将调用任何未包含在类或方法中的内容。

> 我在互联网上查找了所有这些。但我能找到的只是一些命令行小代码片段或一些将 Ruby on Rails 的教程。

我强烈建议您先更好地了解 Ruby 是什么以及它是如何工作的，然后再开始使用 Rails。[您可以在这里](http://www.ruby-doc.org/docs/ProgrammingRuby/)免费购买一本书或臭名昭著的 Pickaxe 书。

# sql - 使用脚本更新表中的所有列

> ID：13145321
> 
> 赞同：0
> 
> 时间：2012-10-30T18:21:11.423
> 
> 标签：sql, tsql, sql-server-2008-r2, cursor

前几天我问了一个与列标题有关的类似问题。现在我在徘徊

```
update table1
set column1=REPLACE(column1, '"','')

update table2
set column2=REPLACE(column2, '"','')

update table3
set column3=REPLACE(column2, '"','') 
```

可能实现。我敢肯定，这将是一些涉及`sys.objects`或`information_schema.columns`类似的事情（无论 SSMS 中的绿色关键字被称为什么）。

这必须用光标完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:57:12.383

我不完全确定您在追求什么，但以下内容可能会有所帮助或至少为您指明正确的方向。

```
 declare @sqlCmd as varchar(max)
    set @sqlCmd = ''

    select @sqlCmd = 'set ' + column_name  + ' = replace(' + column_name + ',''"'','''')'
    from INFORMATION_SCHEMA.COLUMNS
    where TABLE_NAME = 'table1'

   set @sqlCmd = 'update table1 ' + @sqlCmd
   print @sqlCmd
   exec(@sqlCmd) 
```

# c - 取消引用指针会杀死它的值？

> ID：13145326
> 
> 赞同：1
> 
> 时间：2012-10-30T18:21:21.710
> 
> 标签：c, pointers

我有一个方法应该在数组末尾添加一个“节点”。当我找到一个存储值的地方（有效）时，这奇怪地从旧地址中删除了值。

```
void appendAtEndOfArray(struct node * item,struct node * arrayPointer){
    int i=0;
    while (arrayPointer[i].name!='\0') {
        i++;
    }
    arrayPointer[i]=*item; // after this the original memory at &item is changed to '\0'
} 
```

这可能很容易，但我是 C 和整个指针的新手....

我这样调用方法：

```
void addVertice(char source, char destination,int cost){
    struct node * sourceNode = addNode(source);
    struct node * destinationNode = addNode(destination);
    appendAtEndOfArray(destinationNode,sourceNode->children);
    appendAtEndOfArray(sourceNode,destinationNode->parents);
} 
```

我的节点定义如下：

```
struct node            {
    char name;
    bool visited;
    int distance;
    struct node *children[30];
    struct node *parents[30];
} nodes[30];

struct node * addNode(char name){
    int n=getNodeByName(name); // if exists reuse
    if (n==-1) {
        n=++lastNodeIndex;
    }
    nodes[n].name = name;
    nodes[n].visited=false;
    return &nodes[n];
} 
```

有人可以指出我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T20:28:24.333

您看到这种行为是因为您的定义`appendAtEndOfArray`和传递给它的参数之间存在类型不匹配。NuclearGhost 在评论中指出了这一点。正如他所说，函数声明需要更改为

```
void appendAtEndOfArray(struct node * item, struct node * arrayPointer[]) 
```

您在更改数组参数后看到的“错误访问”错误来自 while 循环。更正函数声明后，`arrayPointer[i]`is 具有 type `struct node *`。由于您现在通过指针访问结构成员，因此`.`（点）运算符必须更改为`->`：

```
while (arrayPointer[i]->name != '\0') { 
```

现在您可以按照 twalberg 的建议`item`直接分配 的值：

```
arrayPointer[i] = item; 
```

还有一个问题需要更正：`arrayPointer[i]`是指针类型，所以它可以有一个空值。在取消引用指针之前需要检查该条件，否则程序可能会因分段错误而崩溃：

```
while (arrayPointer[i] && (arrayPointer[i]->name != '\0')) { 
```

* * *

*编辑：您担心代码“奇怪地从旧地址中删除值”背后的“为什么”的附加解释。*

在您的原始代码中，当您传入 时`sourceNode->children`，`appendAtEndOfArray`编译器会由于类型不匹配而发出警告，但无论如何都会生成代码。它可以这样做是因为您传入的值和函数期望的值都是内存地址——指针的“类型”只是决定编译器如何处理指针所指的内存，因此不必进行实际的数据转换执行。

在我的机器上，一个 32 位 x86 平台，指针是 4 字节，你的`struct node`类型是 252 字节（由于将 char 和 bool 类型填充到每个 4 字节）。当`appendAtEndOfArray`分配`item`给 的第一个元素时`arrayPointer`，如（来自原始代码）：

```
arrayPointer[i]=*item; 
```

系统将结构体中的 252 字节数据复制到用于保存 4 字节指针的内存位置。结果，后面的 248 个字节`arrayPointer[i]`被覆盖。由于节点是在数组中分配的，这意味着数组中下一个节点的一部分`nodes`将被覆盖。

例如，考虑调用

```
appendAtEndOfArray(destinationNode,sourceNode->children); 
```

假设`sourceNode->children`数组为空，因此`destinationNode`将分配给第 0 个元素。由于分配实际上是将整个结构内容写入第 0 个元素的内存位置，这将覆盖（120 个字节）的所有 30 个元素`sourceNode->children`以及`sourceNode->parents`（另外 120 个字节）的所有元素，留下另外 12 个字节的数据溢出到节点数组中的下一个元素，它（在我的机器上）涵盖了`name`和`visited`成员。

# excel - Excel (/ Google 电子表格) 剪切-其他-单元格时不要更改参考

> ID：13145329
> 
> 赞同：0
> 
> 时间：2012-10-30T18:21:43.017
> 
> 标签：excel

我有一个`A1`带有公式的电子表格单元格`=SUM($P$1:$P$6)`。现在，当我剪切单元格`P1:P6`并将它们粘贴到 时`C1:C6`，它会将内部的公式更改`A1`为`=SUM($C$1:$C$6)`.

`A1`切割其他单元格时有什么方法可以保留原始参考？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T18:32:40.357

防止引用更新的唯一方法是不直接引用它。IE`=SUM(INDIRECT("P1:P6"))`

现在，如果出于某种原因您希望能够将其复制到您的列中，您可以这样写：`=SUM(INDIRECT("P" &ROW() &":P" &ROW() + 5))`

现在，如果您还想将其复制到行中，则必须编写如下内容：`=SUM(INDIRECT(ADDRESS(ROW(), COLUMN()+15) & ":" &ADDRESS(ROW()+5,COLUMN()+15)))`

这是[使用 INDIRECT的参考](http://support.microsoft.com/kb/213933)

# visual-studio-2008 - Visual Studio 2008 中的本地化：我的错误是什么？

> ID：13145340
> 
> 赞同：1
> 
> 时间：2012-10-30T18:22:18.210
> 
> 标签：visual-studio-2008, localization

我正在尝试在 Visual Studio 2008 中创建 Windows 窗体的本地化版本。

按照各种演练，我将表单属性 Localizable 设置为 TRUE，并将表单语言设置为法语。

然后我编辑法语版本。Visual Studio 显示 .fr.resx 文件以及工作区中的 .resx。

但是，如果我切换回（默认）版本，默认版本中的所有英文字符串现在都已替换为法语版本。

显然我遗漏了一些非常明显的东西：任何人都可以建议它是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T20:31:03.813

您的意思是在表单设计器本身中，表单仍然以法语出现？如果您直接查看“.resx”文件，那么这些字符串的语言是否正确。如果是这样，那么您是否尝试过关闭并重新加载表单，或者清理项目，或者清除然后重置“Localizable”属性，或者完全重新启动 Visual Studio。我已经多次看到类似这样的奇怪语言问题（我是 Visual Studio 本地化程序的开发人员），但上述解决方案通常可以解决问题。设计师有时会遇到问题（除其他外）。

# windows - 在 Windows 卸载程序中执行程序

> ID：13145344
> 
> 赞同：2
> 
> 时间：2012-10-30T18:22:38.113
> 
> 标签：windows, nsis, uninstallation

我正在使用 NSIS 创建 Windows 安装程序。在我的**卸载**程序中，我需要在退出之前执行一个不同的程序（无需等待该程序在退出之前完成）。

从 Windows 控制面板运行卸载程序后，我遇到以下问题：在我手动刷新列表之前不会刷新列表，即使在此之后我也无法继续卸载其他软件，因为我收到一条消息：“请稍候直到当前程序完成卸载或更改”。

我想问题是 Windows 检测到我从卸载程序执行的新程序并认为卸载过程仍在运行。

有人知道如何克服这个吗？

非常感谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T18:45:36.263

Windows 这样做是为了处理旧的损坏卸载程序，这是设计使然。您可以尝试[逃避这份工作](http://nsis.sourceforge.net/Escape_ARP_Job_With_New_Process)，但我不知道该代码是否适用于每个版本的 Windows...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-15T08:00:59.303

你可以试试这个来修复注册表，

[Mircosoft Fix it](http://support2.microsoft.com/mats/program_install_and_uninstall) [另一个如此有趣的网址](http://raywoodcockslatest.blogspot.sg/2011/04/windows-7-wait-until-current-program-is.html)

# python - 如何将静态值与列表合并？

> ID：13145350
> 
> 赞同：0
> 
> 时间：2012-10-30T18:22:56.637
> 
> 标签：python, file, merge

我需要解析一个文件并提取到单个文件中。FileA 有 A 1 2 3 4 ，我需要创建内容为 A1、A2、A3 的单个文件...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:48:49.540

主文件

> 一个 1 2 3 4

主文件

```
symbols = open('main.txt', 'r').readlines()[0].split()
prefix = symbols[0]
suffixes = symbols[1:]

for suffix in suffixes:
    fileName = prefix + suffix + '.txt'
    f = open(fileName, 'w')
    f.write(prefix + suffix)
    f.close() 
```

*这是未经测试的*

# firefox - Firefox 中“0”转换的单位

> ID：13145352
> 
> 赞同：5
> 
> 时间：2012-10-30T18:23:01.283
> 
> 标签：firefox, css, css-transitions, transitions

为什么在没有单位的情况下，以下转换在 Firefox 中不起作用？添加单位后，它就可以工作了。似乎其他主要浏览器对单位无动于衷。

据我所知，这是“0”过渡时间的唯一示例，没有单位，在 Firefox 中不起作用。

[您可以在 JSFiddle](http://jsfiddle.net/XtMYL/)看到它在工作，并与单位一起工作。

[这是在 JSFiddle 上](http://jsfiddle.net/e8zJw/)没有单位和损坏的完全相同的代码。

如您所见，Firefox 是唯一一个似乎崩溃的浏览器。另外，这里的代码：

HTML：

```
<nav>
  <ul id="nav">
    <li>
      <a href="#" id="nav1">Home</a>
    </li>
    <li>
      <a href="pasta.html" id="nav2">Charters</a>
      <ul>
        <li><a href="#">New Groups</a></li>
        <li><a href="#">Current Groups</a></li>
      </ul>
      </li>
    <li>
      <a href="same.php" id="nav3">Funding</a>
      <ul>
        <li><a href="#">Funding Guide</a></li>
        <li><a href="#">Get Funding</a></li>
        <li><a href="#">Treasurers</a></li>
        <li><a href="#">Calendar</a></li>
      </ul>
    </li>
    <li>
      <a href="#" id="nav4">Accounts</a>
    </li>
    <li>
      <a href="magis2.swf" id="nav5">Services</a>
      <ul>
        <li><a href="#">Shuttle Service</a></li>
        <li><a href="#">Van Reservations</a></li>
        <li><a href="#">Rattech</a></li>
        <li><a href="#">Sound System</a></li>
      </ul>
    </li>
  </ul>
</nav>​ 
```

CSS：

```
/****************************
Functionality
*****************************/

/* Menu header */
#nav > li {
  float: left;
  margin: 0 19px;
  padding: 0 1px 19px 0;
  position: relative;
}
/* Dropdown elements */
#nav > li:hover ul {
  opacity: 1;
  visibility: visible;
  -webkit-transition-delay: 0, 0;
  /*Remove the units here and in the next selector to break it*/
  -moz-transition-delay: 0s, 0s;
  -o-transition-delay: 0, 0;
  transition-delay: 0, 0;
}
#nav ul {
  visibility: hidden;
  z-index: 1000;
  width: 140px;
  padding: 8px 0;
  position: absolute;
  top: 35px;
  left: -35px;
  opacity: 0;
  background-color: #fff;
  border: 1px solid #aaa;
  border-radius: 2px;
  box-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.3);
  -webkit-transition-property: opacity, visibility;
  -moz-transition-property: opacity, visibility;
  -o-transition-property: opacity, visibility;
  transition-property: opacity, visibility;

  -webkit-transition-duration: .2s, 0;
  /*Remove the units here and below to break it*/
  -moz-transition-duration: .2s, 0s;
  -o-transition-duration: .2s, 0;
  transition-duration: .2s, 0;

  -webkit-transition-delay: 0, .2s;
  /*Remove the units here and below to break it*/
  -moz-transition-delay: 0s, .2s;
  -o-transition-delay: 0, .2s;
  transition-delay: 0, .2s;
}

/*********
Style (this should be irrelevant)
*********/

a {
  color: #000;
  display: block;
  font-size: 13px;
  text-decoration: none;
  font-family: 'Georgia', serif;
}
#nav ul a {
  font-size: 12px;
  padding: 10px 18px;
}
#nav ul li:hover {
  background: #e9e9e9;
}
nav {
  width: 470px;
  height: 45px;
  margin-top: 40px;
  margin-left: 10px;
} 
```

对于与手头问题无关的大量“造型”，我深表歉意。但是我正在使用的样式和失败的转换之间可能存在耦合，所以我将完整的代码包括在内。这也是一个更漂亮的菜单与样式:)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-30T18:26:02.107

虽然[CSS 值和单位](http://www.w3.org/TR/css3-values)没有明确说明不允许无单位零时间，但它确实说长度和角度允许*无单位零。*我相信这意味着任何其他维度或数量都不允许使用无单位零，因为规范中的其他任何地方都没有解决无单位零。因此，不允许时间属性使用无单位零。¹

因此，如果为时间属性指定了没有单位的零，则声明无效并且应该完全忽略，这就是 Firefox 正在做的事情。在这种情况下，Firefox 正确地遵循了标准，而所有其他浏览器都是错误的。

* * *

¹ [似乎 CSS 最初打算[在听觉样式表](http://www.w3.org/TR/CSS21/aural.html#times)中允许无单位的零时间值以及其他几个不同的单位。这可以解释为什么其他浏览器选择允许无单位零次。然而，由于听觉样式表现在已经过时，该部分不再是规范性的，因此，那里的规则不再适用。更讽刺的是，主流浏览器都没有实现过听觉样式表（好吧，除了 Opera 可能......）。]

# php - imap_search SINCE 标准从不返回结果

> ID：13145353
> 
> 赞同：2
> 
> 时间：2012-10-30T18:23:01.160
> 
> 标签：php, gmail, imap

我正在尝试访问 Gmail 帐户以在 PHP 应用程序中导入已发送和已接收的邮件。每次导入后，我都会存储当前日期，以免每次都导入所有邮件。

```
// $this->dateLastSynchro is a DateTime object
$searchCriteria = 'NEW UNDELETED SINCE "' . $this->dateLastSynchro->format('r') . '" ';
$return = imap_search($this->mailBoxHandle, $searchCriteria); 
```

第一次导入工作正常（当我使用 时`"ALL UNDELETED"`），但是当我使用 SINCE 时，我从来没有结果（即使我已经发送或接收了新邮件）。

我尝试使用`Y-m-d`日期格式，但是当我这样做时我有一个 PHP 通知（它说类似 Unrecognized 标准）。

感谢帮助。

**编辑**

Max建议的解决方案效果很好，但我不能接受答案，因为它是评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:58:39.460

以下对我来说很好：

```
$imap    = imap_open('{imap.gmail.com:993/imap/ssl/novalidate-cert}INBOX', "me@gmail.com", "qqqqqqqqqqqqqqqqqq");
$search  = imap_search($conn, 'ALL UNDELETED SINCE "28-OCT-12"', SE_UID); 
```

（请注意，PHP 的 imap API 仅使用 c-client 库中的 mail_criteria() 函数，因此由于 c-client 维护者提供的阻力，因此使用 IMAP2 样式的“SEARCH”命令而不是 IMAP4用于将 SEARCH 命令解析为 SEARCHPGM 的通用 API。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:57:52.663

也许您应该存储您获得的最后一个 UID。随着邮件添加到邮箱，UID 肯定会增加。

# python - 如何按其值排序“字符串”数字的python列表

> ID：13145356
> 
> 赞同：0
> 
> 时间：2012-10-30T18:23:18.457
> 
> 标签：python, list

我有这个文件列表：

```
1.jpg, 2.jpg, ..., 10.jpg, ... 
```

如果我执行 python **os.listdir(".")**我列出了所有文件，但按字母顺序排列，如下所示：

```
[1.jpg, 10.jpg, 11.jpg, ..., 2.jpg, 20.jpg....] 
```

但我希望它们按其数值排序

```
[1.jpg, 2.jpg ,...10 ,11 ,12... ] 
```

如何重新排序列表以完成此操作？

发送

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T18:25:19.230

```
In [51]: lis=["1.jpg","10.jpg","11.jpg","2.jpg","20.jpg"]

In [52]: sorted(lis,key=lambda x:int(x.split(".")[0]))
Out[52]: ['1.jpg', '2.jpg', '10.jpg', '11.jpg', '20.jpg'] 
```

# javascript - 如何使用带有 dropkick 选择元素的 jQuery Validate 表单验证（基于 DIV 的选择表单元素）

> ID：13145359
> 
> 赞同：2
> 
> 时间：2012-10-30T18:23:21.483
> 
> 标签：javascript, jquery, validation, jquery-validate, jquery-dropkick

我想在基于 div 的选择表单元素上使用 jQuery 验证库。我正在使用 dropkick 库来美化我的选择，但由于使用 DIVS 重新创建了我的选择元素，我在尝试验证表单时遇到了困难。

```
<select id="permissionGroup" class="dropkick" name="permissionGroup" style="display: none;">
    <option selected="selected" value="">
      Please Select
    </option>
    <option value="1">
      Admin
    </option>
    <option value="2">
      Auditor
    </option>
</select> 
```

上面的选择字段将被转换为下面的 html。

```
 <div id="dk_container_permissionGroup" class="dk_container dk_theme_default" tabindex="" style="display: block;">
    <span class="value"><a class="dk_toggle" style="width: 131px;"><span class=
    "dk_label">Please Select</span></a></span>

    <div class="dk_options" style="top: 29px;">
      <ul class="dk_options_inner">
        <li class="dk_option_current"><a data-dk-dropdown-value="">Please Select</a></li>
        <li class=""><a data-dk-dropdown-value="1">Admin</a></li>
        <li class=""><a data-dk-dropdown-value="2">Auditor</a></li>
      </ul>
    </div> 
```

我为验证器构建了以下自定义方法，但不确定如何将其应用于表单验证过程。

```
$.validator.addMethod(
    "permissionGroupCheck",
    function(value, element){
        var spanValue = $("#dk_container_permissionGroup span.dk_label").text();

        if(spanValue == "Please Select"){
            return false;
        }else{
            return true;
        }
     }
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T17:31:30.477

通过向 bassistance.de jquery 验证插件添加忽略来发现 Gajotres！

```
{ignore:""} 
```

...为我工作。

当我尝试用 css 解决这个问题时，我确实遇到了一个问题。我拥有的 DropKick 版本 [1.0.0] 隐藏了带有内联显示的选择框：无。这不能从样式表中被覆盖，所以我不得不注释掉 dropkick.js 中隐藏选择框的行：

```
//$select.hide(); 
```

@ 我在插件中的第 150 行。

为了完成任务，我将选择框从屏幕上拉下来，手动将它们隐藏在 CSS 中：

```
 position:absolute; 
 left:-9999em; 
```

工作得很好。也许较新的版本隐藏的东西不同？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T00:47:58.960

我知道这是一个姗姗来迟的答案，但我找到了解决方案。验证不适用于 dropkick 库，因为给定了原始选择框***display: none;*** CSS 样式。

修复，强制使用原始选择框 css：

```
display: block !important; 
```

这将使其可见但不可见，因为新的自定义选择框在它上面。

或者将此行添加到验证器配置中：

```
ignore: "" 
```

它将防止插件忽略带有 display: none 的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T00:33:01.327

highlight 和 unhighlight 功能可能会有所帮助:)

```
$('.default').dropkick();
$('.example_form').validate({
    highlight: function (element, errorClass) {         
    $(element).siblings('.dk_container').addClass('error');  
    $('.dk_toggle').css('border', 'none');
    },
    unhighlight: function(element, errorClass) {
    $(element).siblings('.dk_container').removeClass('error');  
    $('.dk_toggle').css('border', '1px solid #ccc');
    }
}); 
```

[http://jsfiddle.net/jackoverflow/82XvN/](http://jsfiddle.net/jackoverflow/82XvN/)

# python - 在 Python 中查找元组列表中的最大值

> ID：13145368
> 
> 赞同：116
> 
> 时间：2012-10-30T18:24:02.097
> 
> 标签：python, list, tuples

> **可能重复：**
> [按嵌套列表中的第二个元素排序或查找最大值。Python](https://stackoverflow.com/questions/4800419/sorting-or-finding-max-value-by-the-second-element-in-a-nested-list-python)

我有一个包含 ~10^6 元组的列表，如下所示：

```
[(101, 153), (255, 827), (361, 961), ...]
  ^     ^
  X     Y 
```

我想在这个列表中找到 Ys 的最大值，但也想知道它所绑定的 X。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：212
> 
> 时间：2012-10-30T18:26:37.103

使用`max()`：

使用`itemgetter()`：

```
In [53]: lis=[(101, 153), (255, 827), (361, 961)]

In [81]: from operator import itemgetter

In [82]: max(lis,key=itemgetter(1))[0]    #faster solution
Out[82]: 361 
```

使用`lambda`：

```
In [54]: max(lis,key=lambda item:item[1])
Out[54]: (361, 961)

In [55]: max(lis,key=lambda item:item[1])[0]
Out[55]: 361 
```

`timeit`比较：

```
In [30]: %timeit max(lis,key=itemgetter(1))
1000 loops, best of 3: 232 us per loop

In [31]: %timeit max(lis,key=lambda item:item[1])
1000 loops, best of 3: 556 us per loop 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-30T18:34:43.103

除了max，还可以排序：

```
>>> lis
[(101, 153), (255, 827), (361, 961)]
>>> sorted(lis,key=lambda x: x[1], reverse=True)[0]
(361, 961) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T18:29:05.857

您可以遍历列表并将元组保存在一个变量中，然后您可以看到来自同一个变量的两个值......

```
num=(0, 0)
for item in tuplelist:
  if item[1]>num[1]:
    num=item #num has the whole tuple with the highest y value and its x value 
```

# azure - 能否将 Azure 云服务迁移到另一个数据中心并维护 VIP？

> ID：13145369
> 
> 赞同：2
> 
> 时间：2012-10-30T18:24:02.317
> 
> 标签：azure, azure-web-roles

我有一个在美国东部数据中心运行的云服务。我可以将云服务迁移到美国西部数据中心，但保持相同的 VIP 吗？你会怎么做呢？

丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:33:07.153

I don't believe so. The VIP is persisted for the lifetime of the deployment. So, you'd creating a new Cloud Service in West US, and that service would have a VIP that is different from what was in your East US deployment.

# c++ - 使用我自己的函数进行 C++ 向量排序

> ID：13145370
> 
> 赞同：0
> 
> 时间：2012-10-30T18:24:07.900
> 
> 标签：c++

```
Info:
Parent Class: Vehicle
Child Class : Car & Lorry 
```

我有一个向量，我试图按升序对其进行排序

排序（myVector.begin（），myVector.end（），compareByArea）；

所以在 Vehicle.h

我做了

```
class VehicleTwoD
{
private:
//some variable
public:
bool compareByArea(const VehicleTwoD,const VehicleTwoD);
} 
```

在 Vehicle.cpp 我做到了

```
bool VehicleTwoD::compareByArea(const VehicleTwoD &a,const VehicleTwoD &b)
{
return a.getArea() < b.getArea();
} 
```

错误是 VehicleTwoD 没有名为 getArea 的成员。

它位于我的孩子 Car & Lorry 和双区也申报在孩子。

但问题是如果我想通过这种方式排序，我可以通过使用 virtual 来实现它，然后我在 child 处创建相同的方法，但重载它并通过这种方式让我的区域排序

有没有更好的方法来做到这一点。

**感谢大家的帮助！**

```
Additional Info: 
```

我在 Car & Lorry 有这个 getArea() 函数，这只是一个简单的

```
double Car::getArea()
{ return area;}

double Lorry::getArea()
{ return area;} 
```

但是现在当我在向量中得到一个对象列表时，它们每个都是不同类的孩子。但是都有getArea函数，我想对这个向量进行排序

```
sortVector.assign(vehicletwod, vehicletwod + arrayCounter);
sort(sortVector.begin(),sortVector.end(),compareArea); 
```

//但是排序不起作用。

我不知道在哪里创建可以 getArea() 的对象 1 与对象 2 并返回 bool 结果的 compareArea；

我尝试使用它在 VehicleTwoD 中创建它

```
bool VehicleTwoD::compareByArea(const VehicleTwoD &a,const VehicleTwoD &b)
{
return a.getArea() < b.getArea();
} 
```

但问题是 VehicleTwoD 没有函数 getArea，它们位于 child。我应该如何得到这个修复。谢谢..

**感谢帮助：**

我尝试了以下

```
template<typename T> bool compareByArea(const T &a, const T &b) {
    return a.getArea() < b.getArea();
} 
```

我也在.h文件中声明它，

```
public:
template<typename T>
bool compareByArea(const T,const T);
virtual double getArea(); 
```

然后在我的 main.cpp 我试过了

```
sortVector.assign(vehicletwod, vehicletwod + arrayCounter);
sort(sortVector.begin(),sortVector.end(),sortVector[0].compareArea); 
```

它给了我一个错误

sortVector.std::vector<_TP, _ALLOC ....... 中的成员 compareByArea 的错误请求是非类类型“VehicleTwoD*”

如果我这样做

```
 sortVector.assign(vehicletwod, vehicletwod + arrayCounter);
  sort(sortVector.begin(),sortVector.end(),sortVector[0].compareArea); 
```

我会得到错误 compareByArea 没有在这个范围内声明。

我该怎么办？我在包含在 main.cpp 中的 VehicleTwoD 声明了 compareByArea

VehicleTwoD 是父类，我也是 virtual double getArea() 所以当它调用 getArea 时，它将使用子 getArea 代替，因为私有变量 - area 在 child 并且函数 getArea() return area 也在 child

**我该怎么办..困惑和卡住。谢谢！**

**最新更新再次：**

我正在尝试通过 compareByArea 对向量进行排序，其中较小的区域将在最高处排序，而较大的 1 将在底部。

问题是 getArea 是 Car & Lorry （子类）的函数，我在 main.cpp 创建了这个 compareByArea

sortVector 是 vehicletwod 的向量副本

我为我的车辆设定价值的方式是这样的..

```
if(vehicleType=="Car")
{
vehicletwod[arrayCount] = new Car();
vehicletwod[arrayCount].setDimension();
//set area
vehicletwod[arrayCount].setArea();
cout << "Done setting the data";
} 
```

我如何实现按区域升序排序。

我在 main.cpp 创建了这个函数

```
template<typename T> bool compareByArea(const T &a, const T &b) {
    return a.getArea() < b.getArea();
} 
```

然后我做了这个

```
sortVector.assign(vehicletwod, vehicletwod + arrayCounter);
sort(sortVector.begin(),sortVector.end(),compareByArea); 
```

编译错误： 编译错误：

```
no matching function for call to 'sort(std::vector<VehicleTwoD*>::iterator, std::vector<VehicleTwoD*>::iterator, <unresolved overloaded function type>)'

note: template<class _RAIter> void std::sort (_RAIter, _RAIter)
note: template<class _RAIter, class _Compare> void std::sort(_RAiter, _RAIter, _Compare) 
```

**谢谢**

我有一个新的编译错误

```
error: passing 'const VehicleTwoD' as 'this' argument of 'virtual double VehicleTwoD::getArea()' discards qualifers.
error: passing 'const VehicleTwoD' as 'this' argument of 'virtual double VehicleTwoD::getArea()' discards qualifers. 
```

关于我的 getArea 是这样的

//在父母是这样的

```
double VehicleTwoD::getArea()
{
double area;
area=0.00;
return area;
} 
```

汽车 - 孩子是

```
 double Car::getArea()
    {
    return area;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T18:33:11.783

如果`VehicleTwoD::getArea`是公共的，那么最简单的方法是创建`compareByArea`一个自由函数而不是一个方法`VehicleTwoD`：

```
bool compareByArea(const VehicleTwoD &a,const VehicleTwoD &b) {
  return a.getArea() < b.getArea();
} 
```

然后你可以很容易地通过使用它进行排序：

```
std::sort(myVector.begin(), myVector.end(), compareByArea); 
```

在 C++11 中，您可以使用 lambda 表达式：

```
std::sort(std::begin(myVector), std::end(MyVector),
          [](const VehicleTwoD &a, const VehicleTwoD &b) {
            return a.getArea() < b.getArea();
          }); 
```

如果`getArea`不是公共的，您仍然可以将`compareByArea`其用作自由函数，但将其声明为类的朋友。

**更新**：一个完整​​的工作示例：

```
#include <algorithm>
#include <iostream>
#include <vector>

class VehicleTwoD {
  public:
    VehicleTwoD(double area) : m_area(area) {}
    double getArea() const { return m_area; }
  private:
    double m_area;
};

bool compareByArea(const VehicleTwoD &a,const VehicleTwoD &b) {
  return a.getArea() < b.getArea();
}

int main() {
  std::vector<VehicleTwoD> vehicles;
  vehicles.push_back(VehicleTwoD(3.0));
  vehicles.push_back(VehicleTwoD(1.0));
  vehicles.push_back(VehicleTwoD(2.0));
  std::sort(vehicles.begin(), vehicles.end(), compareByArea);
  for (auto it = vehicles.begin(); it != vehicles.end(); ++it) {
    std::cout << it->getArea() << std::endl;
  }
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T18:59:21.410

制作模板函数：

```
template<typename T> bool compareByArea(const T *a, const T *b) {
    return a->getArea() < b->getArea();
} 
```

然后你可以将它传递给排序：

```
sort(sortVector.begin(), sortVector.end(), compareByArea<VehicleTwoD>); 
```

**更新：**

车辆.h：

```
class VehicleTwoD {
...
public:
    virtual double getArea() const;
};

template<typename T> bool compareByArea(const T *a, const T *b) {
    return a->getArea() < b->getArea();
} 
```

主.cpp：

```
#include "Vehicle.h"
#include <vector>
...
std::vector<VehicleTwoD*> sortVector;
// fill sortVector
sort(sortVector.begin(), sortVector.end(), compareByArea<VehicleTwoD>);
... 
```

# xcode - 标签栏未显示在模拟器中

> ID：13145371
> 
> 赞同：0
> 
> 时间：2012-10-30T18:24:09.457
> 
> 标签：xcode, mapkit, tabbar

在界面生成器中，我的标签栏出现了，但它不会出现在我的模拟器中。我试过重新定位它并在界面生成器中弄乱一些东西，但它仍然没有出现。为什么是这样？这是编码

#导入 #导入

@interface 地图视图：UIViewController {

```
 MKMapView *mapView; 

}

-(IBAction)setMap:(id)sender;

-(IBAction)pushBack;

-(IBAction)findmyass:(id)sender;

@end

#import "mapview.h"
#import "NewClass.h"

@implementation mapview

-(void)viewDidLoad {
[super viewDidLoad];

mapView = [[MKMapView alloc] initWithFrame:self.view.bounds];  
mapView.delegate=self;  

[self.view addSubview:mapView];  
[NSThread detachNewThreadSelector:@selector(displayMap) toTarget:self withObject:nil];  

[mapView setMapType:MKMapTypeStandard];
[mapView setZoomEnabled:YES];
[mapView setScrollEnabled:YES];

MKCoordinateRegion region = { {0.0, 0.0 }, {0.0, 0.0 } };
region.center.latitude = 39.956907;
region.center.longitude = -75.610229;
region.span.longitudeDelta = 0.01f;
region.span.latitudeDelta = 0.01f;
[mapView setRegion:region animated:YES];

NewClass *ann = [[NewClass alloc] init];
ann.title = @"Vigil Location of Chester County ";
ann.subtitle = @"8 S. Wayne St. West Chester, PA 19382";
ann.coordinate = region.center;
[mapView addAnnotation:ann];

-(void)displayMap {  
MKCoordinateRegion region;  
MKCoordinateSpan span;  
span.latitudeDelta=0.2;  
span.longitudeDelta=0.2;  

CLLocationCoordinate2D location;  
location.latitude = -35;  
location.longitude = 146.2381;  
region.span=span;  
region.center=location;  

[mapView setRegion:region animated:TRUE];  
[mapView regionThatFits:region];  
}  

- (void)dealloc {  
[mapView release];  
[super dealloc];  
}  

/*
// Implement viewDidLoad to do additional setup after loading the view, typically from a        
- (void)viewDidLoad {
[super viewDidLoad];
}
*/

/*
// Override to allow orientations other than the default portrait orientation.
- (BOOL)shouldAutorotateToInterfaceOrientation:    (UIInterfaceOrientation)interfaceOrientation {
// Return YES for supported orientations
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}
*/

- (void)didReceiveMemoryWarning {
// Releases the view if it doesn't have a superview.
[super didReceiveMemoryWarning];

// Release any cached data, images, etc that aren't in use.
 }

 - (void)viewDidUnload {
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
 }

-(IBAction)pushBack {

[self dismissModalViewControllerAnimated:YES];
 }

 -(IBAction)findmyass:(id)sender {

mapView.showsUserLocation = YES;

 } 

 @end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T19:13:01.937

我想知道您的 mapView 是否覆盖了选项卡栏，因为您正在使用与整个视图（self.view.bounds）相同的框架初始化 mapView。

如果这是问题，请尝试

```
CGRect frame = self.view.bounds;
frame.size.height = frame.size.height - 40;
mapView = [[MKMapView alloc] initWithFrame:frame]; 
```

代替

```
mapView = [[MKMapView alloc] initWithFrame:self.view.bounds]; 
```

那应该告诉你这是否是你的问题。如果是这样，您可能应该获得对标签栏的引用并减去它的高度，而不是硬编码的“40”。

# android - android中的json解析

> ID：13145372
> 
> 赞同：-3
> 
> 时间：2012-10-30T18:24:10.427
> 
> 标签：android, json

我从 php 主机收到 json 响应

{"uid":"0"}

我想从中检索 0（即 uid 值）

我尝试检索它..但有异常

这是我的代码..

```
 HttpEntity entity = response.getEntity();

} catch(Exception e) {
    System.out.println("Exception : " + e.getMessage());
}
finally {
    if (conn != null) {
        try {  
            conn.close ();
        }
        catch (Exception e) { e.printStackTrace(); }  
    }
}

//convert response to string
/*
try {
    BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"),8);
    StringBuilder sb = new StringBuilder();
    String line = null;
    while ((line = reader.readLine()) != null) {
        sb.append(line+"\n");
    }
    is.close();
    result = sb.toString();
} catch(Exception e) {
    System.out.println("Exception : " + e.getMessage());
}
try
{
    ??????????????????????????
} catch(Exception e) { e.printStackTrace(); } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T18:26:29.507

只需使用[JSONOBJECT](http://developer.android.com/reference/org/json/JSONObject.html)。

```
JSONObject obj = new JSONObject(src);
if (obj.has("uid")){
   String uid = obj.getString("uid");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:54:23.803

使用[GSON](http://code.google.com/p/google-gson/)让这变得非常简单

# c++ - Mandelbrot 放大但图像移动并缩小

> ID：13145378
> 
> 赞同：1
> 
> 时间：2012-10-30T18:24:27.653
> 
> 标签：c++, algorithm, opengl, mandelbrot

我一直在做 Mandelbrot 设置并尝试缩放，但缩放模式变得非常麻烦。当我缩放时，它会完美缩放，但图像尺寸会缩小到原来的一半。下次我再次缩放时，图片尺寸会增加并尝试跳过查看窗口。代码在 c++/opengl 中。在发布到这里之前，我试图让我的代码有点干净。

```
#include <GL/glut.h>
#include <math.h>
#include <stdio.h>
#include <stdlib.h>

double dividecubesby  = 700;
double left = -2.0;
double right = 2.0;
double bottom = -2.0;
double top = 2.0;
int maxiteration = 128;
int zoomlevel = 3;
double baseSize = 4.0;
double SizeReal;
double SizeImage;
double xco=0.0;
double yco=0.0;

void whatcoordinate(int x,int y)
{
    int xp=x;
    int yp=y;
    double delta1 = (right-left);
    double tempx;   
    double tempy;
    double delta=0.0;   
    double l = dividecubesby/2;

    delta = delta1/dividecubesby;

    if((xp > l) && (yp < l))
    {
        tempx = xp*delta;
        tempy = yp*delta;

        xco = right - tempx;
        yco = top - tempy;

        if(xco <0)xco=xco*-1;
        if(yco <0)yco=yco*-1;
    }
    else if( (x < l) && (y < l))
    {
        tempx = xp*delta;
        tempy = yp*delta;

        xco = right - tempx;
        yco = top - tempy;

        if(xco >0)xco=xco*-1;
        if(yco <0) yco =yco*-1;
    }
    else if((x < l) && (y > l))
    {
        tempx = xp*delta;
        tempy = yp*delta;

        xco = right - tempx;
        yco = top - tempy;

        if(xco >0)xco=xco*-1;
        if(yco >0)yco=yco*-1;
    }
    else if((x > l) && (y > l))
    {
        tempx = xp*delta;
        tempy = yp*delta;

        xco = right - tempx;
        yco = right - tempy;

        if(xco <0)xco=xco*-1;
        if(yco >0)yco=yco*-1;
    }
}

void keyPressed(unsigned char key, int x, int y)
{
    switch(key)
    {
    case 'z':
        printf("z pressed  x= %d, y= %d \n",x,y);

        whatcoordinate(x,y);

        SizeReal = (pow(2.0, (-zoomlevel)))*baseSize;
        SizeImage = (pow(2.0, (-zoomlevel)))*baseSize;

        baseSize = right-left;

        left   =  xco- (SizeReal/2);
        right  =  xco + (SizeReal/2);
        bottom = yco - (SizeReal/2);
        top    = yco + (SizeReal/2);    
        dividecubesby = dividecubesby+500;      
        maxiteration  = maxiteration+500; 
        zoomlevel=zoomlevel+1;

        glutPostRedisplay();

        break;
    }
}

int mandtest(double Cr, double Ci)
{
    double Zr = 0.0;
    double Zi = 0.0;
    int times = 0;
    double temp;
    Zr = Zr+Cr;
    Zi = Zi+Ci;

    while ((((Zr*Zr)+(Zi*Zi))<=4) && (times < maxiteration))
    {
        temp = (Zr*Zr)-(Zi*Zi);
        Zi = 2*Zr*Zi;

        Zr = temp+Cr;
        Zi = Zi+Ci;                

        times = times+1;  

    }

    return times;
}

void display()
{
    glClear(GL_COLOR_BUFFER_BIT);
    glColor3f(1.0f,1.0f,1.0f);
    double deltax = ((right - left)/(dividecubesby-1));//this means length/700 
    double deltay = ((top- bottom)/(dividecubesby-1));// this means length/700

    gluOrtho2D(left,right,bottom,top);
    glBegin(GL_POINTS);

    for(double x= left;x<=right;x += deltax )
    {
        for(double y= bottom; y<=top;y +=  deltay )
        {
            if((mandtest(x,y))==maxiteration)
            {
                glColor3f(1.0f,1.0f,1.0f); 
                glVertex2f(x,y);
            }
            else 
            {
                glColor3f((float)mandtest(x,y)/10,0.0f,(float)mandtest(x,y)/30);
                glVertex2f(x,y);
            }
        }
    }
    glEnd();

    glFlush();
}

void init()
{
    glClearColor(0.0, 0.0, 0.0, 0.0);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
}

int main(int argc, char ** argv)
{   
    glutInit(&argc, argv);

    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB);
    glutInitWindowSize(dividecubesby,dividecubesby);
    glutCreateWindow("A Simple OpenGL Windows Application with GLUT");
    init();
    glutDisplayFunc(display);
    glutKeyboardFunc(keyPressed);
    glutMainLoop();

    return 0;
} 
```

执行时

1)![在此处输入图像描述](../Images/da7e2d431feafabaa734df41d368448c.png)

2)![在此处输入图像描述](../Images/19681fd0dcc31fbeef40bb7a87473191.png)

3)![在此处输入图像描述](../Images/b3971902dc2bec9a1042d195d531e0b8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T20:14:48.570

我认为您不应该在每次重新渲染时使用 gluOrtho2D(left,right,bottom,top) 更改视图转换。只需给他们（初始）固定值。视图将保持不变，就像您在图 1) 中看到的一样。您应该只转换您传递给 Mandelbrot 函数的坐标。

正如@genpfault 提到的：考虑使用纹理。这样更有效率。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T15:45:39.543

问题已通过放置解决

```
 glMatrixMode(GL_PROJECTION);
    glLoadIdentity(); 
```

就在 gluOrtho2D(left,right,bottom,top) 的上方；在显示函数中这是用于初始化的。这在 opengl 超级圣经书的第 2 章中得到了很好的解释。

1)![在此处输入图像描述](../Images/66a0a2af4717b8c159ec9d4138cccdc2.png)

2)![在此处输入图像描述](../Images/ba6beb71e1d2f8654dfb7de35111074b.png)

3)![在此处输入图像描述](../Images/48c798bff698437df6d10ef7c1bba4fb.png)

# java - Java 使用 API 或回调在 Firefox 中加载 URL？

> ID：13145383
> 
> 赞同：0
> 
> 时间：2012-10-30T18:24:40.023
> 
> 标签：java, firefox

我正在尝试用 Java 自动加载网页。我正在尝试使用 Firefox，尽管我猜浏览器不必是 FF ......我的问题是，是否有任何 api 可以让我调用在 Firefox 中加载 url 并获得回调或告诉我的程序页面已加载的东西？

我已经成功地尝试了 Selenium，但是我喜欢它需要的时间太长，所以我现在想直接从 Java 类加载。

```
Runtime runtime = Runtime.getRuntime();
        try {
            String path = "C:\\Program Files (x86)\\Mozilla Firefox\\firefox.exe";
            Process process = runtime.exec(path + " " + "http://www.cnn.com");
        } catch (IOException e) {
            // ...
        } 
```

- 或者 -

```
java.awt.Desktop.getDesktop().browse(java.net.URI.create("http://cnn.com")); 
```

我知道 Java 在这 2 个示例中工作，但同样 - 没有回调告诉我页面已加载。我使用 CentOS 或 Win7，所以如果有更兼容的选项，我将符合操作系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:35:48.993

会`process.waitFor()`成功吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T19:24:25.417

您可能得到的最好结果就是知道浏览器已启动。我建议使用您的示例中所示的桌面 API。

考虑你的方法的失败模式。如果网络不可用怎么办？您是否希望您的代码等到页面超时？如果页面加载*缓慢怎么办？*您要在这里解决的实际问题是什么？

# php - $error=array() 不存储错误并且不显示它。

> ID：13145389
> 
> 赞同：-2
> 
> 时间：2012-10-30T18:25:03.370
> 
> 标签：php, storage

嘿，任何人都可以查看我的代码并解释一下吗？$error = array() 不存储我的错误和 $error[] = '错误的用户名或密码！'; 不工作。我需要在与登录脚本相同的页面上显示我的错误。

```
 <?php

$host="localhost"; // Host name
$username="root"; // Mysql username
$password=""; // Mysql password
$db_name="2"; // Database name

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");
if (isset($_POST['formsubmitted'])) {
    $error = array();//Declare An Array to store any error message 
};  
// username and password sent from form
$myusername=$_POST['myusername'];
$mypassword=$_POST['mypassword'];

// To protect MySQL injection (more detail about MySQL injection)
$myusername = stripslashes($myusername);
$mypassword = stripslashes($mypassword);
$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);

$sql="SELECT * FROM `members` WHERE username='$myusername' and password='$mypassword'";
$result=mysql_query($sql);

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);

// If result matched $myusername and $mypassword, table row must be 1 row

if($count==1){

// Register $myusername, $mypassword and redirect to file "login_success.php"
//store data:
$_SESSION['$myusername'];
$_SESSION['$mypassword']; 
//next page:

header("location:login_success.php");
}
else {
 $error[] = 'Wrong username or password!';
};
?>

ty! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T18:34:55.187

试试这个 ：

```
<?php
if(isset($error) && is_array($error))
{
   echo "<div class='error'>" . implode("<br />", $error) . "</div>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:35:55.037

泰迈克尔！我得到了它！:D 它应该是这样的：

```
 <?php  echo '<div class="errormsgbox"> <ol>';
            foreach ($error as $key => $values) {

                echo '  <li>'.$values.'</li>';

            }

?> 
```

# objective-c - 如何将pickerview选择存储在变量中？

> ID：13145390
> 
> 赞同：1
> 
> 时间：2012-10-30T18:25:08.700
> 
> 标签：objective-c, ios, uipickerview

为什么不将`pickerView`选择存储到我的 mainMatrix 对象的属性中？

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    [mainMatrix setM:[[self.numbers objectAtIndex:[pickerView selectedRowInComponent:0]] intValue]];
    [mainMatrix setN:[[self.numbers objectAtIndex:[pickerView selectedRowInComponent:1]] intValue]];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T18:36:03.023

拆分你的代码，这样你就可以真正看到发生了什么：

```
NSUInteger selectedRow = [pickerView selectedRowInComponent:0];
int num = [self.numbers[selectedRow] intValue];
[mainMatrix setM:num];

selectedRow = [pickerView selectedRowInComponent:1];
int num = [self.numbers[selectedRow] intValue];
[mainMatrix setN:num]; 
```

现在您可以调试代码并查看实际发生的情况。可读、可调试的代码比把它全部塞进一行要好得多。

确保`mainMatrix`在代码中此时它不是零。还要确保`self.numbers`它是非零的。最后（实际上是第一个），确保您已`delegate`在选择器视图上设置了 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:35:13.690

您是否有相同的数组来填充pickerview 中的两个组件？如果是，请尝试此代码。

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    if(component == 0) {
          [mainMatrix setM:[[self.numbers objectAtIndex:row] intValue]];
      }else if(component == 1){
          [mainMatrix setN:[[self.numbers objectAtIndex:row] intValue]];
      }
} 
```

# ruby - 如何将文件复制为 TempFile？

> ID：13145391
> 
> 赞同：4
> 
> 时间：2012-10-30T18:25:17.777
> 
> 标签：ruby

我目前正在开发一个在特定文件夹中查找文件的脚本。我想复制这些文件。然后我想从那些重复文件中删除一些无用的行，用 YAML 解析它们（这是其中内容的格式）。最后对文件进行比较。

我最初想将它们复制到一个`tmp`文件夹中，但我刚刚发现它的存在[`Tempfile`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/tempfile/rdoc/Tempfile.html)似乎正是我所需要的，因为在脚本完成其工作后必须删除临时文件。

我现在拥有的：

```
require 'Tempfile'
require 'YAML'

PWD = File.dirname(__FILE__)
LOCALES_FOLDER_PATH = "#{PWD}/../app/assets/javascripts/ayl/bo/config/locales"
LOCALES = ['en', 'fr']

files_data = {}
locale_file_names = LOCALES.map{|locale| "#{locale}.js.coffee"}
files = locale_file_names.map do |locale_file_name|
  files_data[locale_file_name] = "#{LOCALES_FOLDER_PATH}/#{locale_file_name}"
end

locale_files = []
files.each do |file|

  content = File.open(file).read
  locale_file = Tempfile.open file.gsub("/", "_") do |f|
    f.write content
    f.flush
    puts f.read
  end
  locale_files << locale_file

end 
```

结果是：

```
± ruby diff_locales.rb
/Users/adrien/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/YAML.rb:48: warning: already initialized constant ENGINE
/Users/adrien/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/YAML.rb:69: warning: already initialized constant ENGINE
/Users/adrien/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/YAML.rb:73: warning: already initialized constant ENGINE

± 
```

我的临时文件的内容是空的。

这对我来说似乎很奇怪。但我认为他们是我不知道/不理解的东西。

* * *

**好的！**弄清楚了！在块内，我必须在读取内容之前将光标移回文件的开头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:53:29.247

在块内，我必须在读取内容之前将光标移回文件的开头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:34:06.557

Try `locale_file.close` after `write` in your block. I don't believe the content is necessarily flushed to disk until then.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T18:47:56.320

默认情况下，所有 ruby​​ IO 都被缓冲。您可以在 IO 上调用 #flush 将所有内容写入磁盘，然后调用 #read 即可。关闭临时文件将删除它（这就是重点）。

此外，您应该更喜欢 Tempfile.open 的块版本，因为它保证临时文件在块退出时关闭并删除（而不是在程序运行时保持打开）

# css - 添加了 Sass、IE 过滤器和额外的空格

> ID：13145393
> 
> 赞同：0
> 
> 时间：2012-10-30T18:25:19.243
> 
> 标签：css, internet-explorer, sass

我为我的 Visual Studio（Web 工作台）添加了 Sass 插件。这很好，因为一旦我保存了 .scss 文件，就会立即生成 css 文件。无论如何，我设置了一个 IE 'filter:' 并且 Sass 编译器正在添加额外的空间。

**我的变量：**

```
$blueColor: 5993D3; 
$lightColor: FFFFFF; 
```

**我的mixin：（** 浅色是白色，在所有调用中都是相同的，这就是为什么它没有作为变量传递）

```
@mixin filterIE($startColor) {
    filter:progid:DXImageTransform.Microsoft.Gradient(GradientType=1,StartColorStr='#FF#{$startColor}', EndColorStr='#00#{$lightColor}');
} 
```

**我的包括：**

```
@include filterIE($blueColor); 
```

问题是输出。它在其中放置了一个额外的空间（注意 StartColorStr 中的 3。无论我尝试什么，它都会添加一个空间。我在页面上还有其他一些，它们工作正常。

```
filter: progid:DXImageTransform.Microsoft.Gradient(GradientType=1, StartColorStr='#FF5993D 3', EndColorStr='#00FFFFFF'); 
```

您可以看到 lightColor 工作正常。没有空间。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T19:52:53.907

我认为问题在于 SASS 无法正确理解`$blueColor`变量的数据类型（它不是十六进制颜色，因为它不以 # 开头，如果您用字母更改第一个字符，则不会出现空格） .

通过向变量添加引号来修复它

```
$blueColor: "5993D3"; 
```

它不会出现在输出中，因为您已经在 mixin 中使用了插值 #{}。

# asp.net - 组播 IP 地址的正则表达式

> ID：13145397
> 
> 赞同：3
> 
> 时间：2012-10-30T18:25:43.020
> 
> 标签：asp.net, regex, ip-address, multicast

我在stackoverflow上浏览了这篇精彩的帖子

[验证 IP 地址不是 0.0.0.0 或多播地址](https://stackoverflow.com/questions/1503893/validate-ip-address-is-not-0-0-0-0-or-multicast-address)

但这是一个自定义 javascript 函数，我必须在我的 aspx 页面中编写它，而不是有任何正则表达式等价物，它可能有助于验证多播 IP 地址

例如 224.0.0.1 和 239.255.255.255 之间的多播 IP 地址

提前感谢您的努力。:)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-30T18:36:57.233

我个人会使用数学，但如果你真的想要一个正则表达式，

```
^2(?:2[4-9]|3\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d?|0)){3}$
 <---|------|-->        <-----> <------> <---> <------> |  |
     |      |           |       |        |     |        |  three more octets
     |      |           |       |        |     |        |
     |      |           |       |        |     |        0
     |      |           |       |        |     |
     |      |           |       |        |     1 - 99
     |      |           |       |        |
     |      |           |       |        100 - 199
     |      |           |       |
     |      |           |       200 - 249
     |      |           |
     |      |           250 - 255
     |      |
     |      230 - 239
     |
     224 - 229 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T18:32:10.763

最好的解决方案是从这里移植 javascript 代码：[Validate IP address is not 0.0.0.0 or multicast address](https://stackoverflow.com/questions/1503893/validate-ip-address-is-not-0-0-0-0-or-multicast-address) to c#。正则表达式不适合检查数字范围。您可以编写涵盖所有可能的数字组合的正则表达式，但结果将是巨大的且无效的。

# javascript - 排名数字数组值

> ID：13145398
> 
> 赞同：0
> 
> 时间：2012-10-30T18:25:43.330
> 
> 标签：javascript, jquery, arrays

我有一个数字数组，我想按降序显示它们，但作为排名（第 1、第 2、第 3 等）而不是它们的数值，同时考虑到平局（相等的数值）。

我的排序如下：

```
function mySorting(a, b) {
        a = a;
        b = b;
        return a == b ? 0 : (b < a ? -1 : 1)
    } 
```

这与通话效果很好：

```
var myArray=[28,92,12,12,2];
myArray.sort(mySorting); 
```

谁能指出我正确的方向，然后我将如何将 myArray 的值与第 1、第 2、第 3 等进行排名，并考虑到关系？

提前非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T19:14:01.320

如果您使用的是 jQuery，您可以利用 2 个数组方法`$.inArray()`和`$.grep`

创建用于排名的唯一值数组：

```
var ranks = $.grep(myArray, function(item, idx) {
    return item != myArray[idx - 1];
}).reverse();/* your sort function is descending I added reverse to the ranks , remove if needed*/ 
```

用途：

```
$.each(myArray, function(idx, item) {
    var rank= $.inArray( item, ranks)+1;/* index position and add one for 1st,second etc*/
    $('body').append('Rank of '+item+ ' is '+ rank+'<br>')

}) 
```

演示：http: [//jsfiddle.net/XWs5j/1/](http://jsfiddle.net/XWs5j/1/)

API 参考：

[http://api.jquery.com/jQuery.grep/](http://api.jquery.com/jQuery.grep/)

[http://api.jquery.com/jQuery.inArray/](http://api.jquery.com/jQuery.inArray/)

**编辑：**创建“关系”数组并修改输出值的附加演示

[http://jsfiddle.net/XWs5j/2/](http://jsfiddle.net/XWs5j/2/)

# css - div内图像的最大宽度

> ID：13145412
> 
> 赞同：0
> 
> 时间：2012-10-30T18:26:18.523
> 
> 标签：css

[这里的这个页面](http://www.inside-guides.co.uk/brentwood/events/2012/November/exclusive-wedding-fashion-show.html)有一个 134 x 200px 的图像（婚纱）包含在 250px 的最大宽度 div 中，但不确定如何最好地保持原始图像尺寸而不是最大宽度 div。任何想法都会很棒，因为我被卡住了..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T19:32:59.887

原来是一个 wordpress 插件正在调整该图像 的大小，`width=300`从图像的 url 中删除就可以了

# java - 访问从 ActionPerformed 单击的 JButton？

> ID：13145413
> 
> 赞同：1
> 
> 时间：2012-10-30T18:26:21.753
> 
> 标签：java, swing, jbutton, actionlistener

我从大学得到了这个任务，我必须在界面中有 5 个按钮，当单击按钮时，我必须对该按钮执行操作。但是当我在 actionPerformed() 中使用“this”时，它并不是指“被点击的按钮”，我无法锻炼它实际指的是什么。

所以：

1.  ActionPerformed() 动作处理程序中的“this”指的是什么？
2.  通过使用“e.getActionCommand()”，在不使用一堆 if 语句的情况下，使用“被点击”按钮做某事的任何好方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T18:28:51.290

您可以使用[EventObject#getSource()](http://docs.oracle.com/javase/7/docs/api/java/util/EventObject.html#getSource%28%29)，它由 ActionEvent 继承。

```
@Override
public void actionPerformed(ActionEvent e) { 
    JButton source = (JButton) e.getSource();
    ...
} 
```

在 ActionListener 中，`this`指的是 ActionListener 对象本身，而不是源对象。

# wordpress - 我可以自动将内容从静态网站传输到 wordpress 吗？

> ID：13145414
> 
> 赞同：0
> 
> 时间：2012-10-30T18:26:22.067
> 
> 标签：wordpress, import

我有一个带有食谱的静态网站。我想将我的食谱复制到 WordPress，而无需手动操作（Ctrl + V，Ctrl + C）。

当我将食谱（帖子）放入 Wordpress 时，看起来像图片。

![帖子](../Images/6269aab7f0de6a26353081a563c93d65.png)

我想将信息放入静态页面中红色突出显示的字段中。问题是将我的静态页面中的不同信息放入不同的帖子形式中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:30:17.717

添加 1 或 2 个食谱

然后去工具导出，导出wordpress文件，

在编辑器中打开文件，复制并粘贴 1/2 个帖子，对于每个食谱，输入所有帖子的所有信息...

然后重新导入您的文件，这应该会为您创建所有帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:39:17.823

您需要编写脚本或小型应用程序来解析源中的内容并将其插入 WordPress 数据库（或自动填充字段）。对于这种特殊情况，不太可能有人写过。

# php - 一个文件中的多个 PHP 函数

> ID：13145421
> 
> 赞同：0
> 
> 时间：2012-10-30T18:26:47.013
> 
> 标签：php, isset

所以我试图让一个 PHP 文件来执行 2-3 个不同的功能。

基本上，当页面加载（test.php）时，它将在页面上加载通用 html 元素。它将加载一个 jquery tab ui 以及一个从 sql 数据库填充的组合框。

上述两个 html 元素我都可以正常工作，那里没有问题，但是 jquery ui 选项卡的生成和 sql/组合框的生成在单独的 PHP 文件中。我想将这两个步骤合并到一个文件中。

在初始页面加载时，它会从上述步骤加载两个元素，但是如果组合框有 onChange 事件或 onClick 事件，我需要让页面发布到自身（test.php）。我一直在阅读有关使用 isset() 或 empty() 的信息，但我不确定如何以正确的方式进行此操作。

有什么建议或例子吗？我很确定这已经被问过很多次了，但到目前为止我还没有找到解决方案。

下拉列表.php

```
<?php
//Create the DB populated dropdown list

$con = mysql_connect("localhost", "_user", "_pass");

$tables = mysql_query("SHOW TABLES FROM _dropdown");
mysql_select_db("items", $con);

echo '<select id="Type" onChange="dropChange();">';
echo '<option value="" style="display:none;"></option>';
while ($row = mysql_fetch_row($tables)) {
    foreach($row as $value){
        $i = mysql_query("SELECT * FROM $value ORDER BY name ASC", $con);
        echo '<optgroup label="'.ucfirst($value).'"></optgroup>';
        while($row2 = mysql_fetch_row($i)){
            echo '<option id="'.$value.'" value="'.$row2[0].'">'.$row2[0].'</option>';
        }
    }   
}
echo '</select>';

mysql_close($con);
?> 
```

选项卡.php

```
<?php

$con = mysql_connect("localhost", "_user", "_pass");
mysql_select_db("_database", $con) or die (mysql_error());
$result = mysql_query("SELECT * FROM _table") or die (mysql_error());
$num_rows = mysql_num_rows($result);
mysql_close($con);

echo '
    <script language="javascript" type="text/javascript">
        $( "#tabs" ).tabs({
            beforeLoad: function( event, ui ) {
                ui.jqXHR.error(function() {
                    ui.panel.html(
                        "Couldn\'t load this tab. We\'ll try to fix this as soon as possible. " +
                        "If this wouldn\'t be a demo." );
                });
            }
        });
    </script>

    <ul>
        <li id="S1"><a href="#S1">S1</a></li>
        <li id="S2"><a href="#S2" style="color:red; text-decoration:line-through">S 2</a></li>
        <li id="S3"><a href="#S3" style="color:red; text-decoration:line-through">S 3</a></li>
    </ul>
    <div id="breadcrumbs"></div>
    <div id="s1">

    </div>
    <div id="s2">

    </div>
    <div id="s3">

    </div>  
    ';

?> 
```

所以我试图让“test.php”将这两个脚本组合成一个页面（test.php）并执行这两个功能。而不是***onChange="dropChange();"*** 在 dropdown.php 页面中不会是这样的：

```
onChange='<? php $_POST["PHP_SELF"] ?>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T19:38:14.727

由于您已经在使用 jquery，您可以在页面顶部添加一个事件监视器，以使页面认为表单已提交，就好像单击了提交按钮一样 -

```
$(document).ready(function() {
    $("#id_of_your_drop_down").onChange(function(event){
       event.preventDefault(); //prevents the usual redraw behavior
       $("#id_of_your_submit_button").click() //triggers form submission for that submit
       }
    });
}); 
```

你可以把 $("#id_of_your_submit_button").click() 代替 dropChange(); 但上述方法是更好的做法。

# c++ - 为不同的返回值重载运算符 new

> ID：13145427
> 
> 赞同：2
> 
> 时间：2012-10-30T18:27:12.957
> 
> 标签：c++, pointers, operator-overloading, new-operator

是否可以重载运算符 new() 以具有与 void* 不同的返回值？

我有两个结构：

一个结构（A）只保存数据，什么不保存。

第二个结构 (B) 的作用类似于指向第一个结构的指针：

```
struct A;

struct B
{

private:

    A* ptr;

public:

    A& operator*() { return (*ptr); };
    A& operator->() { return (*ptr); };

};

struct A
{
    int data;

    B operator&() { B ret;  ret.ptr = this; return ret; };
}; 
```

这个想法就这么简单。我不希望任何外部类处理指向 A 的指针，而不是直接处理。

但是，我确实希望他们能够创建 A 的实例。有没有办法覆盖 A 的 new 运算符以返回 B 的实例？现在不要介意安全问题和处理删除，这只是一个简单的简化示例来解释我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T18:55:22.437

不。

3.7.4.1 分配功能：

> ...返回类型应为`void*`. ...

正如 BigBoss 所说，这是因为`new`操作员调用`operator new`并期望它具有某种返回类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T18:39:38.883

运算符`new`只负责为类分配内存，然后 C++ 内部调用构造函数来初始化该内存，所以如果你想覆盖某些东西以`new A`导致 a `B`，那么你应该覆盖 C++！

相反，您可能有：

```
struct A {
private
    friend struct B;
    A() {}
};
struct B {
    static B new_A() {return B(new A());}
} 
```

# python - 如何从 Python 制作 .app 包含图像文件

> ID：13145428
> 
> 赞同：1
> 
> 时间：2012-10-30T18:27:16.663
> 
> 标签：python, wxpython, py2app

我想从我的 Python 源代码中创建一个 .app 文件。我的 Python 源是 wxPython，有 11 个图像文件（.png，大小为 32x32）

制作 .app 是成功的，但它不包括我的图像文件，它只是显示错误消息

`no bitmap handler for types 50 defined.`

细节...

`Can't load image from file...`

即使在同一目录中，它仍然显示此错误消息。

我在 MacOSX 10.6.7 上使用`py2app`、`python 2.7`和`wxPython`

如何使用我的图像文件制作 .app？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-30T19:21:05.707

包含资源的最简单方法是将它们指定`data_files`为`setup.py`

```
from setuptools import setup

APP = ['app.py']
DATA_FILES = [('', ['images'])]
OPTIONS = {'argv_emulation': True}

setup(
    app=APP,
    data_files=DATA_FILES,
    options={'py2app': OPTIONS},
    setup_requires=['py2app'],
) 
```

`<app.app>/Contents/Resources`将是所有数据的当前目录和资源根目录。这会将`images/`您的项目目录放在资源根目录中。

如果您只想包含`images/`目录中的特定文件，您可以告诉它如何映射：

```
DATA_FILES = [
    ('images', ['images/picture.jpg', 'images/picture2.png']),
    ('images/icons', ['images/icons/ico1.ico'])
] 
```

或者你可以更花哨地说“只包括我的图像目录中的所有 jpeg”：

```
from glob import glob
...
DATA_FILES = [
    ('images', glob('images/*.jpg')),
] 
```

# javascript - 单个菜单项始终保持“.selected”类，即使未选中

> ID：13145429
> 
> 赞同：1
> 
> 时间：2012-10-30T18:27:23.003
> 
> 标签：javascript

好的，所以我从以前的开发人员那里继承了一个网站来进行一些升级。让我烦恼的一件事（尽管不是客户端）是单个选项卡始终是“.selected”选项卡，即使它实际上没有被选中。从技术上讲，我认为它是“选定的默认值”。

网站是[rooferanchorage.com](http://rooferanchorage.com)。

我尝试从 .js 的最后一部分中删除默认值，但没有效果。正如您可能知道的那样，我完全是一个 javascript 文盲。我相信这是相关代码 - 关于如何使所选课程正常工作的任何建议？

```
isSelected:function(menuurl){
    var menuurl=menuurl.replace("http://"+menuurl.hostname, "").replace(/^\//, "")
    return (tabdropdown.currentpageurl==menuurl)
},

    init:function(menuid, dselected){
        this.standardbody=(document.compatMode=="CSS1Compat")? document.documentElement : document.body //create reference to common "body" across doctypes
        var menuitems=document.getElementById(menuid).getElementsByTagName("a")
        for (var i=0; i<menuitems.length; i++){
            if (menuitems[i].getAttribute("rel")){
                var relvalue=menuitems[i].getAttribute("rel")
                document.getElementById(relvalue).firstlink=document.getElementById(relvalue).getElementsByTagName("a")[0]
                menuitems[i].onmouseover=function(e){
                    var event=typeof e!="undefined"? e : window.event
                    tabdropdown.dropit(this, event, this.getAttribute("rel"))
                }
            }
            if (dselected=="auto" && typeof setalready=="undefined" && this.isSelected(menuitems[i].href)){
                menuitems[i].parentNode.className+=" selected default"
                var setalready=true
            }
            else if (parseInt(dselected)==i)
                menuitems[i].parentNode.className+=" selected default"
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:39:52.460

源代码的第 72-73 行如下：

```
//SYNTAX: tabdropdown.init("menu_id", [integer OR "auto"])
tabdropdown.init("colortab", 3) 
```

参考您问题中的代码，您可以在`init`读取的方法中看到条件，`if (dselected=="auto" ...`并且显然会`href`根据 URL 检查菜单项内的锚点，以查看它是否是应该选择的选项卡。

目前您的代码正在传递`3`，这意味着它将始终是第 4 个选项卡 - 从零开始的索引`0,1,2,3`可以解释为什么始终选择“商业”。

回答，尝试将其更改`3`为`"auto"`，或者，如果您使用的是静态 html 文件（例如，如果住宅.html 是一个实际的 html 文件），请尝试更改整数以表示应该为每个选项卡选择的选项卡。例如，住宅将是`2`。

# java - 将任意大括号作为语句放置 - 它们是什么意思？

> ID：13145430
> 
> 赞同：2
> 
> 时间：2012-10-30T18:27:24.697
> 
> 标签：java

以下是一个有效的 Java 程序：

```
public class _ {

    public static void main(String[] args) {
        {
            {
                {
                    {

                    }
                }
            }
        }
    }

} 
```

那些花括号会增加额外的语义吗？还是他们像空白一样对待？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T18:28:53.970

花括号只是在你的 main 方法中创建一个本地块作用域。在块内声明的变量在块外将不可见。

这种编码方式用于最小化局部变量的范围。

```
public void someMethod() {
    {
        int x = 10;
        System.out.println(x); // Ok
    }
    System.out.println(x); // Error, x not visible here
} 
```

最小化您创建的局部变量的范围是一个很好的做法，特别是当您知道它们不会在程序中的其他任何地方使用时。所以，让它在更大的范围内直到它结束是没有意义的。只需创建一个本地块作用域，这样它就可以`Garbage Collection`在块结束后立即使用。

另请参阅[`@Bohemian's`](https://stackoverflow.com/a/13145551/1679863)下面的答案，该答案还引用了另一个好处。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T18:36:39.117

它们是一个代码块。在复制粘贴包含局部变量声明的代码时，它们会很方便：

```
{
    int x = foo * bar;
    someMethod(x);
}
{
    int x = foo * y; // won't get "already defined variable" compile error
    someMethod(x);
} 
```

我还看到它们用于代码生成，因此您可以安全地向方法中添加一些代码并定义一个变量，而不必担心它是否已在方法的前面定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T18:32:34.490

The only purpose of the extra braces is to provide scope-limit. The variable a

```
void ad()
    {
    int a;
    } 
```

will only exist within those braces, and will have no scope outside of them.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T18:31:15.553

花括号旨在定义和限制范围。由于它们不包含任何语句或声明，它们将被编译器消除。

# php - 通过 PHP 表单提交文件给出“function.fopen 文件名不能为空”警告

> ID：13145437
> 
> 赞同：1
> 
> 时间：2012-10-30T18:27:53.790
> 
> 标签：php, forms, filenames, fopen

所以，我在客户的网站上放了一个表格，他要求我修改它，以便人们可以附上一两张照片。所以我正在运行一些测试，每当我提交表单时，我都会收到这个错误：

> 警告：fopen() [function.fopen]：第 32 行 /homepages/20/d153810528/htdocs/fabFormHandlerTEST.php 中的文件名不能为空
> 
> 警告：fread()：提供的参数不是第 33 行 /homepages/20/d153810528/htdocs/fabFormHandlerTEST.php 中的有效流资源
> 
> 警告：fclose()：提供的参数不是第 100 行 /homepages/20/d153810528/htdocs/fabFormHandlerTEST.php 中的有效流资源

现在，我猜测无论出于何种原因，文件名都没有从表单中传递。我不是在发送空白，我实际上是在单击“浏览”按钮并直接获取 jpg。

首先，这是来自 HTML 的文件输入代码：

```
<td class="form">Picture #1 (optional)</td>
<td><input type="file" name="picture1" id="picture1" /></td> 
```

当我单击“提交”时，名称应该作为“picture1”发送到表单处理程序，不是吗？

这是我处理“picture1”的 PHP 代码：

```
$file1name=$_FILES['picture1']['name'];
$file1type=$_FILES['picture1']['type'];
$file1size=$_FILES['picture1']['size'];
$file1temp=$_FILES['picture1']['tmp_name']; 
```

这是第 32 行和第 33 行，问题开始了：

```
$fp1=fopen($file1name,"rb");
$file1=fread($fp1,$file1size); 
```

我尝试用 $file1temp 替换 fopen() 函数中的 $file1name，但这并没有什么不同。

我已经确认服务器设置为允许 fopen()。

## 我错过了什么？？？

## 编辑

这是完整的表格：

```
<form enctype="multipart/form-data" name="contactRich" id="contactRich" method="post" action="fabFormHandlerTEST.php" onsubmit="return fabFormValidate()">
<table cellpadding="6">
    <tr>
        <td colspan="2"><h3>Contact</h3></td>
    </tr>
    <tr>
        <td class="form">Your name:</td>
        <td><input type="text" id="cName" name="cName" size="31"></td>
    </tr>
    <tr>
        <td class="form">Neighborhood or closest major intersection:</td>
        <td><input type="text" name="cNeighborhood" size="31"></td>
    </tr>
    <tr>
        <td class="form">Your phone number:<br><span class="footer">(Include area code)</span></td>
        <td>(<input type="text" size="3" maxlength="3" name="cAreaCode"/>) <input type="text" id="cNumber" name="cNumber" size="23" maxlength="8" onkeyup="addHyphen()"></td>
    </tr>
    <tr>
        <td class="form">Your e-mail address:</td>
        <td><input type="text" name="cEmail" size="31"></td>
    </tr>
    <tr>
        <td class="form">What can we help you with?</td>
        <td><select name="cTopic">
                <option value="null">(Please choose:)</option>
                <option value="an estimate">Estimate</option>
                <option value="bifold doors">Bifold doors</option>
                <option value="broken window ropes">Broken window ropes</option>
                <option value="door that won't stay shut">My door won't stay shut!</option>
                <option value="noisy doors">My door is noisy!</option>
                <option value="sticking doors">My door is sticking!</option>
                <option value="drywall repairs">Drywall repairs</option>
                <option value="garbage disposals">Garbage disposals</option>
                <option value="grab bars">Grab bars</option>
                <option value="your various services">(other)</option>
            </select></td>
    </tr>
    <tr>
        <td class="form">Any additional details?</td>
        <td><textarea name="cAdditional" cols="27" rows="4" wrap="soft"></textarea></td>
    </tr>
    <tr>
        <td class="form">Picture #1 (optional)</td>
        <td><input type="file" name="picture1" id="picture1" /></td>
    </tr>
    <tr>
        <td class="form">Picture #2 (optional)</td>
        <td><input type="file" name="picture1" id="picture1" /></td>
    </tr>
    <tr>
        <td class="form">Picture #3 (optional)</td>
        <td><input type="file" name="picture1" id="picture1" /></td>
    </tr>
    <tr>
        <td></td>
        <td><input type="submit" value="Submit" /></td>
    </tr>
    <tr>
        <td colspan="2"><hr /></td>
    </tr>
</table>
<input type="hidden" id="isValid" name="isValid" value="no" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:30:40.427

显然，其中的值`$file1name`是空的或 NULL。通过临时添加回溯问题的原因`print_r($_FILES);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:31:28.197

PHP 告诉您 $file1name 不包含任何内容；检查您[是否在 HTML 表单上设置了正确的 enctype](http://php.net/upload)并通过“常见陷阱”部分。

# jakarta-ee - 在 Tomcat、WebLogic、Glassfish 等中使用哪个 MBeanServer？

> ID：13145440
> 
> 赞同：7
> 
> 时间：2012-10-30T18:28:21.210
> 
> 标签：jakarta-ee, tomcat, glassfish, weblogic, jmx

我目前正在研究[http://truevfs.java.net](http://truevfs.java.net)，这是一个 Java 虚拟文件系统。TrueVFS 是模块化的，使用插件架构在运行时加载功能，无需进行任何配置。一些可选插件使用平台 MBeanServer 来注册具有已定义 ObjectName 的 MBean，以进行监视和管理。

现在我的一些用户正在他们的 WAR 中捆绑 TrueVFS JAR 以部署到 Tomcat 等。除非它们包含启用 JMX 的插件之一并在不同的上下文中部署多个 WAR 实例，否则这工作正常。

这不起作用，因为每个 Web 应用程序都有自己的启用 JMX 插件的类加载器定义，但是它们都将共享相同的平台 MBeanServer 并使用相同的 ObjectNames 来注册它们的 MBean，因此会发生冲突。

现在我该如何解决这个问题？我已经抽象了 MBeanServer 查找，以便可以将其提取到另一个插件中，但是我无法确定一个普遍适用的策略，我应该使用哪个 MBeanServer 来注册我的 MBean。

我搜索了这个主题并找到了一些[WebLogic 的文档，](http://docs.oracle.com/cd/E24329_01/web.1211/e24416/instmbeans.htm#i1111253)这表明我应该使用 JNDI 查找 MBeanServer。但是，这似乎特定于 WebLogic。

没有通用的一刀切方法吗？

* * *

**更新：**

这是使用附加属性来识别 Web 应用程序定义的类加载器的快速概念验证：

```
import java.lang.management.ManagementFactory;
import javax.management.JMX;
import javax.management.MBeanServer;
import javax.management.ObjectName;

public class Messenger implements MessengerMXBean {

    private static MBeanServer mbs = ManagementFactory.getPlatformMBeanServer();

    public static void main(String[] args ) throws Exception {
        register("one");
        register("two");
        find();
        System.out.println("Waiting for interrupt...");
        Thread.sleep(Long.MAX_VALUE);
    }

    private static void register(String context) throws Exception {
        mbs.registerMBean(new Messenger(),
                new ObjectName(":type=Messenger,context=" + context));
    }

    private static void find() throws Exception {
        for (ObjectName name : mbs.queryNames(new ObjectName(":type=Messenger,*"), null))
            System.out.println(JMX.newMXBeanProxy(mbs, name, MessengerMXBean.class).getMessage());
    }

    public String getMessage() { return "Hello world!"; }
}

public interface MessengerMXBean { String getMessage(); } 
```

正如预期的那样，该程序注册了两个 Messenger MBean，找到它们并打印它们的“Hello world！”。信息。

但是，这种解决方案也有缺点：

*   我必须模拟一个附加属性作为标识符。理想情况下，这将是类加载器的标识符，这样我就可以保持通用性，即不必仅为 Web 应用程序做特殊考虑。
*   现在查找 MBean 需要考虑多个类加载器的特殊情况，即 MBean 的多个实例，它们的区别仅在于它们的附加限定符，即使应用程序独立运行。

这些都是严重的限制，但我似乎没有更好的选择，所以我可能会走这条路。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T09:36:43.863

您可以为每个 war 模块重新创建一个新的 MBeanServer。但是，当从 JSR-160 客户端外部查询它们时，您还需要指定 MBeanServer。

当您使用[Jolokia](http://www.jolokia.org)时，您可以透明地合并 JVM 的所有 MBeanServer。但是，当您拥有具有相同名称的 MBean 并且只有一个可以访问时，这在这里也无济于事。

对于这种情况，我的解决方案是使用相同的 MBeanServer，但使用不同名称的 MBean。除了其他属性之外，您可以为这些 MBean 使用完全正交的域，或者在名称中添加额外的“限定符”键值对之类的东西。当我期望典型情况下只有一个 MBean 时，我首先尝试添加具有固定名称的 MBean。如果失败，我`",qualifier=..."`会使用自动生成的值向名称添加另一部分，该值可以由某个值（如 WAR 名称）唯一标识，甚至是可配置的值。

事实上，从客户端的角度来看，处理多个 MBeanServer 确实很痛苦，因此使用 JMX 作为具有唯一性（可能是部分生成的 MBean 名称）的全局命名空间是一个简单的选择。

# r - 为什么 import.wig 功能（生物导体的 rtracklayer 包）不能在 R v. 2.14.2 上工作，但在 R v. 2.15.2 上工作？

> ID：13145441
> 
> 赞同：1
> 
> 时间：2012-10-30T18:28:21.810
> 
> 标签：r, import

当我在 R v.2.14.2 上使用 import.wig 函数时：

```
library("rtracklayer")
wig_object <- import.wig(filename, genome = "g19", asRangedData = FALSE) 
```

我得到一个没有错误的空“wig_object”（“文件名”的文件大小约为 7Mb）。

但是，当我在 R v.2.15.2 上执行相同的命令时，我的文件被导入，我的“wig_object”现在包含我的“文件名”中的所有数据。

这只是版本问题还是我做错了什么？

# css - TYPO3 禁用用户组的图标

> ID：13145443
> 
> 赞同：0
> 
> 时间：2012-10-30T18:28:32.893
> 
> 标签：css, permissions, typo3

我的问题很简单......当用户是组的一部分时，我想隐藏一些typo3 后端图标。更准确地说，我想隐藏内容元素的编辑铅笔。我怎样才能做到这一点？类似于 option.disableDelete.[table] 但用于编辑

如果没有任何打字稿配置，是否有一种简单的方法可以将 css 注入后端？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:39:25.157

`TYPO3 CMS 6.0``page module`如果用户无法编辑元素， 将隐藏编辑图标。[http://git.typo3.org/TYPO3v4/Core.git?a=commitdiff;h=f239ca8530cef1746f14ec24e2e8c136d2371923](http://git.typo3.org/TYPO3v4/Core.git?a=commitdiff;h=f239ca8530cef1746f14ec24e2e8c136d2371923)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T08:01:58.047

你不应该通过 CSS 隐藏东西。只是不要给他们编辑内容元素的权利。公平的[入门](http://typo3.org/documentation/document-library/tutorials/doc_tut_quickstart/1.0.0/view/1/9/)手册有一些关于用户权限的信息。它被[翻译成多种语言](https://typo3.org/documentation/document-library/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-08T17:56:22.977

使用此扩展程序，您将无法从安全角度禁用编辑，但您可以在列表界面中隐藏编辑铅笔：http: [//typo3.org/extensions/repository/view/kb_modlist_actions](http://typo3.org/extensions/repository/view/kb_modlist_actions)

# jquery - 范围滑块，左值总是小于右值

> ID：13145456
> 
> 赞同：2
> 
> 时间：2012-10-30T18:29:30.973
> 
> 标签：jquery, jquery-ui, jquery-slider

我有范围滑块。我需要左值总是小于右值。例如，如果我的值 = [3, 4]，则滑块必须禁用移动到状态 [3, 3] 或 [4,4]

```
<div id="slider-range" style="width: 200px; margin: 20px auto;"></div>

$(function() {
    $( "#slider-range" ).slider({
        range: true,
        min: 1,
        max: 10,
        values: [ 3, 5],
    });
}); 
```

[http://jsfiddle.net/bmsWJ/](http://jsfiddle.net/bmsWJ/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T18:34:12.920

动态比较您的当前值并在以下情况下返回 false：

**[jsFiddle](http://jsfiddle.net/bmsWJ/4/)**

```
$(function() {
    $( "#slider-range" ).slider({
        range: true,
        min: 1,
        max: 10,
        values: [ 3, 5 ],
        slide: function(event, ui) {
            if (ui.values[0] >= ui.values[1] ) {
                return false;
            }
        }
    });
}); 
```

# php - 使用 OO-PHP 简单登录

> ID：13145457
> 
> 赞同：1
> 
> 时间：2012-10-30T18:29:45.467
> 
> 标签：php, syntax-error

我只是想验证，在提交`username`and`password`不为空的表单时。

**表格**：

```
<form action="usercheck.php" method="post">
    User: <input type="text" name="username" maxlength="10" />
    Pass: <input type="password" name="password" maxlength="10" />      
    <input type="submit" value="Submit" />
</form> 
```

**用户检查.php**

```
<?php

class Vuln{

    public $username = $_POST['username'];
    public $password = $_POST['password'];

    public function ShowErrors(){
        if($this->username == '' || $this->password == ''){
            return 'username or password field blank';  
        }
        else{
            echo stripslashes('we\'re good');
        }   
    }

    $entered = new Vuln;
    echo $entered->ShowErrors();

}

?> 
```

当我测试时，它说：

> **解析错误：**语法错误，意外`T_VARIABLE`，期待`T_FUNCTION`在线：
> 
> ```
>  $entered = new Vuln; 
> ```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T18:31:41.590

您不能在这样的类定义中包含代码

```
 class Vuln {
       //> Your class definition
    }

    //> Outside of the class

    $entered = new Vuln;
    echo $entered->ShowErrors(); 
```

我强烈建议您阅读[PHP Doc中的所有基础知识](http://www.php.net/manual/en/oop5.intro.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T18:32:16.140

您的部分代码直接放在类中：

```
$entered = new Vuln;
echo $entered->ShowErrors(); 
```

那些应该放在类定义之外。如下所述，更改：

```
public $username = $_POST['username'];
public $password = $_POST['password']; 
```

到

```
public $username;
public $password; 
```

并在构造函数或类外部启动变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T18:33:35.083

就像是

```
$entered = new Vuln;
$entered->username = $_POST['username'];
$entered->password = $_POST['password'];
$entered->ShowErrors(); 
```

您目前正在从您的班级中实例化您的班级。

编辑：添加以进行更多说明 - 这会实例化类并且应该在类之外。删除类中的实例化。

另一个编辑更改了变量名称以匹配示例

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T18:33:43.313

不应在**类定义**中找到执行**对象**的代码。

 **你可能是这个意思：

```
<?php

class Vuln{

    public $username = $_POST['username'];
    public $password = $_POST['password'];

    public function ShowErrors(){
        if($this->username == '' || $this->password == ''){
            return 'username or password field blank';  
        }
        else{
            echo stripslashes('we\'re good');
        }   
    }

}

$entered = new Vuln;
echo $entered->ShowErrors(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T18:37:21.400

是什么阻止你使用

```
<form action="usercheck()" id="form" method="post"> 
```

并使用以下JS

```
var theForm = document.forms["form"];
var user = theForm.elements["user"];
var pass = theForm.elements["pass"];

if(user.value==null || user.value=="")
{
alert("First name(s) must be filled out");
return false;
}

else if(pass.value==null || pass.value=="")
{
    alert("Last name must be filled out");
return false;
}

else
{
return true;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-30T18:37:58.057

您不能从类本身中创建类的对象。您必须在提交表单时调用该类。还将类文件名更改为类似 vuln.php 的名称，并将 usercheck.php 更新为以下代码。

```
 if($_POST){
        include("Vuln.php");
        $entered = new Vuln;
        echo $entered->ShowErrors();
     } 
```

希望它可以帮助你。**

# javascript - 水平滚动元素，宽度未指定

> ID：13145462
> 
> 赞同：2
> 
> 时间：2012-10-30T18:30:03.913
> 
> 标签：javascript, html, css, animation, scroll

我正在尝试水平滚动元素，并将其父级的溢出设置为隐藏。

这是我到目前为止所得到的：

**HTML：**

```
<div class="parent">
    <div class="scroll">This element's text scrolls horizontally.</div>
</div>​ 
```

**CSS：**

```
.parent {
    overflow: hidden;
    height: 36px;
}
.scroll {
    width: 1500px;
} 
```

**JS：**

```
$(function(){
    var $parent = $('.parent'),
        $scroll = $('.scroll'),
        width = $scroll.width(),
        scroll = function (){
            $scroll.animate({
                'margin-left': -width
            }, 12000, function () {
                $scroll.css('margin-left', $parent.width());
                scroll();
            });
        };

    scroll();
});​ 
```

工作演示：http: [//jsfiddle.net/hTnNk/](http://jsfiddle.net/hTnNk/)

* * *

以上工作完美无缺，但内部元素 ( `.scroll`) 具有固定宽度。

有没有办法在不明确设置内部元素的宽度的情况下实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:39:33.740

如果添加：

```
.scroll {
    white-space:nowrap;
} 
```

并替换`width = $scroll.width()`为：

```
width = $scroll.get(0).scrollWidth 
```

如果没有明确的宽度设置，它会正常工作。[**演示**](http://jsfiddle.net/gionaf/v6e5S/)

# windows-phone - 运行 Windows Phone 8 模拟器需要什么？

> ID：13145464
> 
> 赞同：11
> 
> 时间：2012-10-30T18:30:10.163
> 
> 标签：windows-phone, windows-phone-8, windows-phone-8-emulator

随着 Windows Phone 8 的最终发布，我们终于可以访问 SDK。我听说它需要特殊的硬件或模拟器的东西。手机模拟器的系统要求是什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-30T18:39:17.103

您需要 Windows 8 x64 Pro 或 Enterprise、Visual Studio 2012（或 SDK 中的 express 版本）和支持 SLAT 的 CPU 才能运行 Hyper-V - WP8 模拟器作为 Hyper-V 虚拟机运行。
（换句话说，没有 Linux，或者处理器早于 Intel Core i3、i5 或 i7 的 Mac，没有其他版本的 Windows，没有 Visual Studio 2010 或更早版本，没有 x86 版本的 Windows，没有 Core2Duo 和更早的 CPU，等等）
编辑：您可以使用 Mac 为 WP8 进行开发，但前提是您在其上安装了 Windows 8。
[https://dev.windowsphone.com/en-us/downloadsdk](https://dev.windowsphone.com/en-us/downloadsdk)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T08:06:13.660

英特尔将他们的 SLAT 技术称为 EPT（扩展页表）。

这是启用 EPT 的 CPU 列表 [http://ark.intel.com/Products/VirtualizationTechnology](http://ark.intel.com/Products/VirtualizationTechnology)

你也可以使用 Sysinternals Coreinfo 来检查你的 CPU：coreinfo.exe -v

控制台输出应为： EPT * 支持 Intel 扩展页表 (SLAT)

[http://technet.microsoft.com/en-us/sysinternals/cc835722](http://technet.microsoft.com/en-us/sysinternals/cc835722)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-07T04:49:14.610

请务必获得 Windows 8 PRo 64 位操作系统。

我最近买了一台索尼​​ VAIO 笔记本电脑，它预装了 Windows 8 基本操作系统。

从 Windows 8 升级到 Windows 8 pro 的费用约为 75 美元.....

运行 windows phone 模拟器需要 Windows 8 pro，因为模拟器使用 Microsoft 的 Hyper V 虚拟化。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-04T15:17:23.620

诺基亚开发者 wiki 上有两个有趣的解决方案：

*   [http://www.developer.nokia.com/Community/Wiki/Windows_Phone_8_SDK_on_a_Virtual_Machine_with_Working_Emulator](http://www.developer.nokia.com/Community/Wiki/Windows_Phone_8_SDK_on_a_Virtual_Machine_with_Working_Emulator)
*   [http://www.developer.nokia.com/Community/Wiki/Windows_Phone_8_Emulator_in_a_Windows_8_VHD](http://www.developer.nokia.com/Community/Wiki/Windows_Phone_8_Emulator_in_a_Windows_8_VHD)

似乎第一个选项对您来说可能是可行的。

这两种方法还需要支持硬件虚拟化的处理器。

# r - read.table 返回字符矩阵，想要数字

> ID：13145465
> 
> 赞同：1
> 
> 时间：2012-10-30T18:30:15.763
> 
> 标签：r

我有一个 csv 文件，其中的数据如下所示：

```
"Date","Time","Open","High","Low","Close","Up","Down","Sell","Buy","Stop1","Stop2","Stop3","Target1","Target2","Target3"
04/18/2012,1335,1365.25,1366.00,1365.00,1366.00,2855,1153,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00
04/18/2012,1340,1366.00,1366.25,1365.50,1366.00,450,607,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00
04/18/2012,1345,1366.00,1366.00,1365.75,1365.75,300,263,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00 
```

如果我使用此命令读取文件，则会得到一个字符矩阵：

```
RawData = as.matrix(read.table(PathName,sep=",",header=TRUE))

typeof(RawData)
[1] "character" 
```

最好我能说这是由于日期列。

我需要这是一个数字数组。我在上面使用的 read.table 命令有什么好的替代方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T19:37:48.397

```
RawData.df <- read.table(PathName,sep=",",header=TRUE)
RawData <- as.matrix(RawData.df[,-1]) 
```

在您的数据上：

```
> RawData.df <- read.table(sep = ",", header = TRUE, text =
+ '"Date","Time","Open","High","Low","Close","Up","Down","Sell","Buy","Stop1","Stop2","Stop3","Target1","Target2","Target3"
+ 04/18/2012,1335,1365.25,1366.00,1365.00,1366.00,2855,1153,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00
+ 04/18/2012,1340,1366.00,1366.25,1365.50,1366.00,450,607,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00
+ 04/18/2012,1345,1366.00,1366.00,1365.75,1365.75,300,263,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00')
> str(RawData.df)
'data.frame':   3 obs. of  16 variables:
 $ Date   : Factor w/ 1 level "04/18/2012": 1 1 1
 $ Time   : int  1335 1340 1345
 $ Open   : num  1365 1366 1366
 $ High   : num  1366 1366 1366
 $ Low    : num  1365 1366 1366
 $ Close  : num  1366 1366 1366
 $ Up     : int  2855 450 300
 $ Down   : int  1153 607 263
 $ Sell   : num  0 0 0
 $ Buy    : num  0 0 0
 $ Stop1  : num  0 0 0
 $ Stop2  : num  0 0 0
 $ Stop3  : num  0 0 0
 $ Target1: num  0 0 0
 $ Target2: num  0 0 0
 $ Target3: num  0 0 0
> RawData <- as.matrix(RawData.df[,-1])
> str(RawData)
 num [1:3, 1:15] 1335 1340 1345 1365 1366 ...
 - attr(*, "dimnames")=List of 2
  ..$ : NULL
  ..$ : chr [1:15] "Time" "Open" "High" "Low" ... 
```

# jsf - JSF2 在页面加载时将属性传递给支持 bean

> ID：13145467
> 
> 赞同：1
> 
> 时间：2012-10-30T18:30:28.730
> 
> 标签：jsf, jsf-2, pageload, backing-beans, postconstruct

我有两个不同的 JSF2 页面和一个共享的支持 bean。如何将参数从页面传递到支持 bean（在页面加载时 - 使用 @PostConstruct 的方法），以便它知道当前正在使用哪个页面。

我知道可以使用`<f:event>`like `preRenderView`（like [this](https://stackoverflow.com/questions/6341462/initializng-a-backing-bean-with-parameters-on-page-load-with-jsf-2-0)），但它需要一个方法以及支持 bean 中的一个字段。这是否可以使用 f:attribute 或 f:param 之类的东西，而后备 bean 中没有任何额外的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T23:19:57.780

如果 bean 是请求范围的，只需将视图 ID 作为托管属性获取`#{view.viewId}`。

```
@ManagedProperty("#{view.viewId}")
private String viewId; // +setter 
```

如果 bean 是视图范围的，只需通过 . 直接获取视图 ID [`UIViewRoot#viewId()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIViewRoot.html#getViewId%28%29)。

```
private String viewId;

@PostConstruct
public void init() {
    viewId = FacesContext.getCurrentInstance().getViewRoot().getViewId();
    // ...
} 
```

# mongodb - Mongodb 聚合框架 | 双重比赛

> ID：13145468
> 
> 赞同：9
> 
> 时间：2012-10-30T18:30:31.387
> 
> 标签：mongodb, aggregation-framework

这是它的样子 -

```
db.log.aggregate({
  $match:{ v:1, t:"trainingStep" },
  $group:{ _id:{userId:'$u',questionId:'$s'}, counts:{$sum:1} },
  $match:{ 'counts':{$gte:2} }
}) 
```

1.  第一场比赛完美无缺。
2.  该小组工作完美，并推出了我正在寻找的东西。
3.  最后一个 $match 不起作用并显示所有计数而不是我请求的 >=2

我试过'counts'、'$counts'、“$counts”......但没有一个成功！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-30T19:34:51.983

Each of the operators in your `aggregate` pipeline need to be separate objects. Also, while some versions of the shell (and drivers) may allow passing the objects as separate parameters, the correct way is to pass them wrapped in a single array. Try this instead:

```
db.log.aggregate([
  { $match: { v: 1, t: "trainingStep" } },
  { $group: { _id: {userId: '$u', questionId: '$s'}, counts: {$sum: 1} } },
  { $match: { 'counts': {$gte: 2} } }
]) 
```

# html - iPad 显示的内容大于屏幕尺寸/视口

> ID：13145472
> 
> 赞同：-1
> 
> 时间：2012-10-30T18:30:44.693
> 
> 标签：html, css, ipad, responsive-design

我有一个网站（[http://ginkandgasoline.net](http://ginkandgasoline.net)）。我将视口设置为

```
<meta name="viewport" content="width=device-width" /> 
```

但是该站点在纵向模式下显示的尺寸大于屏幕尺寸。子页面似乎工作正常，它只是主页。当我删除视口代码时，该站点适合窗口，但一旦设备转动，它就会保持当前缩放，并且不会重置为旋转前的设置方式。

我尝试了多种选择，但真的不想使用媒体查询来解决问题。我也尝试过解决 Jeremy Keith 所概述的问题，但没有解决。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T20:04:19.843

Try this instead...

```
<meta content='width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;' name='viewport' /> 
```

I used something similar for a web app I was making and this fixed it.

# c++ - 使用向量迭代器合并排序向量

> ID：13145473
> 
> 赞同：0
> 
> 时间：2012-10-30T18:30:51.897
> 
> 标签：c++, sorting, vector, implementation, mergesort

我需要实现 MergeSort 以使用向量迭代器对整数向量进行排序。我实现了它，但我收到了这个错误：Vector iterator not dereferencable。

作为合并排序函数的参数，我使用 (A.begin(),A.end()) 其中 A 是包含 n 个元素的向量。

```
#include <iostream>
#include <vector>

using namespace std;

void swap(vector<int>::iterator first,vector<int>::iterator last)
{
    int temp;
    temp=*first;
    *first=*last;
    *last=temp;
    return;
}

void mergesort(vector<int>::iterator first,vector<int>::iterator last)
{
    if(first==last) return; 
    if(first+1==last)  
    {
        if(*last>*first) swap(first,last);
        return;
    }

    vector<int>::iterator middle;
    middle=first+(last-first)/2;

    mergesort(first,middle);
    mergesort(middle+1,last);

    int a,b,pa,pb;
    vector<int> h;
        //the number of elements in a
    pa=middle-first+1; 
        //the number of elements in b
    pb=last-middle;    
         h.resize(pa+pb);
    a=0; b=0;

    while(a<pa && b<pb)
        if(*(first+a)<*(middle+1+b)) 
          {
              h[a+b]=*(first+a); a++;
          }
        else
          {
              h[a+b]=*(middle+1+b); b++;
          }

    while(a<pa) 
       {
           h[a+b]=*(first+a); a++;
       }
    while(b<pb)
       {
           h[a+b]=*(middle+1+b); b++;
       }

    for(int i=0;i<((a+b)-1);i++)
    *(first+i)=h[i];

    return;
}

int main(){

    vector<int>A;

    for(int i=1000;i>0;i--)
    {
        A.push_back(i);               
           //vector of integer: 1000,999,998 ... 3,2,1
    }

    mergesort(A.begin(),A.end());     
 //sort vector elements from smallest to biggest: 1,2,3...998,999,1000

    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T19:29:23.807

迭代器范围应表示为引用第一个元素的迭代器和引用过去的迭代器。如果它们相等，则这是一个空范围。你没有那样做。

为了解决这个问题，该`if(first+1==last)`子句应该返回。第二个`mergesort(middle+1,last)`电话应该是`mergesort(middle,last)`. `pa`应该只是相等`middle-last`。 `pb`计算正确。而且我认为`-1`应该删除最后一个 for 循环。

有一个由迭代器定义的范围到第一个和迭代器到最后是一个坏主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T18:37:31.327

你应该做

```
mergesort(A.begin(),A.end()-1); 
```

实际上，`end()`迭代器指向向量末尾**之后的一个元素。**它不指向向量的**最后一个**元素。

# regex - VIM - 将普通模式函数转换为命令模式函数

> ID：13145476
> 
> 赞同：2
> 
> 时间：2012-10-30T18:31:21.790
> 
> 标签：regex, vim, grep, vi

再会，

我有一个简单的函数，我已映射到`CTRL`+ `L`，我在正常模式下使用它来搜索项目中单词或变量的所有实例：

```
" Find all occurences in files
map <C-l> :execute " grep -srnw --binary-files=without-match --exclude=*~ --exclude-dir=.svn  . -e " . expand("<cword>") . " " <bar> cwindow<CR> 
```

我正在尝试从中创建命令模式功能，因此我可以执行以下操作：

```
:mySearchFunction wordToFind 
```

这样，我有效地获得了一个简短而简单的“在所有文件中查找”功能，因此我不必一直输入冗长的`grep`功能。我试过修改`. -e " .expand...`函数后的代码，但我不熟悉编写VI/VIM函数。我熟悉 C 和 BASH 脚本，但我无法让这个函数按预期工作。

我可以帮助我从我的这个映射中创建命令模式功能吗？

谢谢你。

* * *

编辑：从@Conner 发布修改后的答案。也不包括 CTAGS`tags`文件。

```
command! -nargs=1 SearchAll execute " grep -srnw --binary-files=without-match --exclude={*~,tags} --exclude-dir=.svn  . -e " . expand("<args>") . " " <bar> cwindow
map <C-l> :SearchAll <cword><CR> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T18:36:33.273

```
command! -nargs=1 MySearchFunction execute " grep -srnw --binary-files=without-match --exclude=*~ --exclude-dir=.svn  . -e " . expand("<args>") . " " <bar> cwindow
map <C-l> :MySearchFunction <cword><CR> 
```

我可以建议研究一下 ack 和 Ack.vim。

# c# - 使用数据列表查询视图

> ID：13145477
> 
> 赞同：0
> 
> 时间：2012-10-30T18:31:24.767
> 
> 标签：c#, asp.net-mvc, linq

如何使用列表中的数据查询视图？

例如：下面，我有变量“数据”，我将所有 id 从视图存储到列表中。我想查询第二个视图“vwStatus”，以便它返回列表中显示状态的所有行（数据）

就像是：

```
public ActionResult Index(string id)
{
    var data = (from p in db.vwdb.Where(p => p.ID == id)
                 group p by p.status into g select g.Key).ToList();

    ViewData.Model = db.vwStatus.Where(p => p.Status == data);           

    return View();
} 
```

希望我说清楚了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:41:41.427

你可以这样做：

```
var data = (from p in db.vwdb.Where(p => p.ID == id)
                 group p by p.status into g select g.Key).ToList();

//Here you'll get the data you want from the database:
ViewData.Model = db.vwStatus.Where(vw => data.Contains(vw.Id));

return View(); 
```

这应该可以正常工作。

问候。

# javascript - jPlayer + Bootstrap 模式 - DOM 问题

> ID：13145480
> 
> 赞同：1
> 
> 时间：2012-10-30T18:31:35.013
> 
> 标签：javascript, jquery, jquery-ui, twitter-bootstrap, jplayer

我试图让一个引导模式通过ajax加载一些创建模式的html。该 html 将包含 jPlayer。

无论我尝试什么，我都绝对无法让按钮为模态中的音频工作。

这是我加载模式的方式：

```
$(document).ready(function() {
    $(".createmodal").click(function(){
        $('<div class="modal hide fade"> ..modal html.. </div>').modal();
    });
}); 
```

​</p>

这是 jsfiddle 中的示例——我跳过了 ajax，只是将 html 直接加载到模态创建中。

我试过使用 jquery 的 .load 方法。

JSFiddle：http: [//jsfiddle.net/R5UDn/](http://jsfiddle.net/R5UDn/)

编辑：我尝试将 jplayer 初始化放在模态代码中......如果我使用自动播放，音频会触发，但控件不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T06:16:23.397

我将您的代码重新编写为 Plunker 中的 AJAX 调用，它似乎对我有用（Chrome，FF）：

## [普朗克](http://plnkr.co/edit/7W90ET?p=preview)

我这样做是为了让页面的主体现在直接包含一个模式，并将一个 html AJAX 响应（**modal-jplayer.html**）加载到`.modal-body`via`data-remote`属性中。激活 jPlayer 的脚本附加到**modal-jplayer.html**中。

### HTML

```
<a class="btn" data-target="#myModal" data-remote="modal-jplayer.html" data-toggle="modal">Launch Modal</a>
<div id="myModal" class="modal hide fade">
  <div class="modal-container step-1">
    <div class="modal-header icon">
      <button type="button"class="close"data-dismiss="modal"aria-hidden="true">&times;</button>
      <h4></h4>
    </div>
    <div class="modal-body">
    </div>
  </div>
</div> 
```

### modal-jplayer.html

```
<div id="jquery_jplayer_1"class="jp-jplayer"></div>
<div id="jp_container_1"class="jp-audio">
   ...
</div>
<script>
  $("#jquery_jplayer_1").jPlayer({
    ready: function(event) {
      $(this).jPlayer("setMedia", {
        mp3: "http://www.jplayer.org/audio/mp3/TSP-01-Cro_magnon_man.mp3",
        oga: "http://www.jplayer.org/audio/ogg/TSP-01-Cro_magnon_man.ogg"
      });
    },
    swfPath: "http://www.jplayer.org/2.1.0/js",
    supplied: "mp3, oga"
  });
</script> 
```

我真的不知道这与您在实际开发代码中的内容相比如何 - 我只是按照我可能会做的方式去做。

否则，可能导致问题的可能是 Modal 插件使用的自动对焦。可以很简单地禁用它：

```
$('body').on('shown','.modal', function() {
  $(document).off('focusin.modal')
}); 
```

但就像我说的，到目前为止，它在 Plunker 演示中对我有用，而无需使用此解决方法。

* * *

[只是对未来帖子的建议：如果您正在使用 AJAX，那么请花时间在 JSFiddle 或 Plunker 或您喜欢的任何内容中准备一个可比较的 AJAX 示例。 [JSFiddle 通过 GitHub Gists 支持 AJAX](http://doc.jsfiddle.net/use/gist_response.html)。对于任何 AJAX，我个人更喜欢 Plunker，因为它直接在应用程序中支持多个文件。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:37:37.310

您需要在显示模式**后**加载 jPlayer 。否则，jPlayer 将无法放置使播放器正常运行所需的所有钩子。

但是，为什么要从 javascript 加载整个模式代码？真的有这个需求吗？

如果没有，我建议您将模式代码放在页面源上 - 而不是使用 javascript 加载它 - 然后只需将点击处理程序添加到它。

# django - 如何在运行时检查 Django 中已安装应用程序的版本？

> ID：13145483
> 
> 赞同：2
> 
> 时间：2012-10-30T18:31:52.183
> 
> 标签：django

我基本上需要知道它安装并添加到的特定应用程序的版本

```
INSTALLED_APPS = (
    ...
    'the_application',
    ...
) 
```

我知道我可以使用 pip freeze 。我知道当前虚拟环境中的应用程序版本。

问题是我想支持两个版本的 the_application。

像 settings.INSTALLED_APP['the_application'].get_version() 这样的东西就是我要找的东西......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T18:39:13.457

模块/应用程序通常会通过模块级`__version__`属性公开其版本。例如：

```
import gunicorn
print gunicorn.__version__ # Prints version

import haystack
print haystack.__version__ 
```

一些警告是有序的：

*   不能保证；查看
*   应用程序公开其版本的“格式”会有所不同。例如，上面的第一个打印打印`'0.15.0'`在我的测试系统上；第二个打印`(2, 0, 0, 'beta')`在同一系统上。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T18:35:20.087

这取决于应用程序如何管理它的版本控制。例如`django-tagging` [，有一个`VERSION`可以检查的元组和一个`get_version()`返回字符串](http://code.google.com/p/django-tagging/source/browse/trunk/tagging/__init__.py)函数。因此，无论您想检查版本（在运行时实时），只需执行以下操作：

```
import tagging
print tagging.get_version() # or print tagging.VERSION for the tuple 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T08:35:21.327

thanks Ngure Nyaga! Your answer helped me a bit further, but it does not tell me where to put the **vesrion**

This answer however does not tell me where to put this `__version__`

So I looked in to an open application, which version does show up in django debugtoolbar. I looked in to the django restframework code, there I found out:

the version is put in the `__init__.py` file

(see [https://github.com/tomchristie/django-rest-framework/blob/master/rest_framework/**init**.py](https://github.com/tomchristie/django-rest-framework/blob/master/rest_framework/__init__.py))

and it is put here as:

```
__version__ = '2.2.7'
VERSION = __version__  # synonym 
```

And after this, in his setup.py, he gets this version from this `__init__.py` : see: [https://github.com/tomchristie/django-rest-framework/blob/master/setup.py](https://github.com/tomchristie/django-rest-framework/blob/master/setup.py)

like this:

```
import re

def get_version(package):
    """
    Return package version as listed in `__version__` in `init.py`.
    """
    init_py = open(os.path.join(package, '__init__.py')).read()
    return re.match("__version__ = ['\"]([^'\"]+)['\"]", init_py).group(1)

version = get_version('rest_framework') 
```

**When using buildout and zestreleaser:**

By the way, IAm using buildout and zest.releaser for building and versioning.

In this case, above is a bit different (but basically the same idea):

see [http://zestreleaser.readthedocs.org/en/latest/versions.html#using-the-version-number-in-setup-py-and-as-version](http://zestreleaser.readthedocs.org/en/latest/versions.html#using-the-version-number-in-setup-py-and-as-version)

The version in setup.py is automatically numbered by setup.py, so in `__init__.py` you do:

```
import pkg_resources

__version__ = pkg_resources.get_distribution("fill in yourpackage name").version
VERSION = __version__  # synonym 
```

# c# - 查询无法使用 LIKE

> ID：13145488
> 
> 赞同：0
> 
> 时间：2012-10-30T18:32:19.047
> 
> 标签：c#, sql, sqlcommand, sql-like

我正在通过`C#`使用`SqlCommand`. 其中一个查询按预期执行，但是当我将其复杂化时，我得到了似乎没有意义的奇怪结果。我希望这个社区中的某个人能比我现在更能理解它。

下面的代码运行良好，找到标题包含所提供文本的任何记录。

```
comm.CommandText = "SELECT * FROM tbl_records WHERE Title LIKE '%' + @title + '%'";
comm.Parameters.AddWithValue("id", Request.QueryString["idortitle"]);
comm.Parameters.AddWithValue("title", Request.QueryString["idortitle"]); 
```

但是，当我添加以下部分时，返回的唯一结果是与 id 匹配的结果。与标题部分匹配的结果将被排除。为什么会这样？

```
comm.CommandText = "SELECT * FROM tbl_records WHERE Title LIKE '%' + @title + '%' OR Id=@id";
comm.Parameters.AddWithValue("id", Request.QueryString["idortitle"]);
comm.Parameters.AddWithValue("title", Request.QueryString["idortitle"]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:40:09.833

尝试将通配符放在参数的值中，而不是在查询中使用它们：

```
comm.CommandText = "SELECT * FROM tbl_records WHERE (Title LIKE @title) OR (Id=@id)";
comm.Parameters.AddWithValue("@id", Request.QueryString["idortitle"]);
comm.Parameters.AddWithValue("@title", "%" + Request.QueryString["idortitle"] + "%"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:39:48.460

试试这段代码：

```
comm.CommandText = "SELECT * FROM tbl_records WHERE Title LIKE '%@title%' OR Id = @id";
comm.Parameters.AddWithValue("@id", Request.QueryString["idortitle"]);
comm.Parameters.AddWithValue("@title", Request.QueryString["idortitle"]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T18:49:05.887

基于的参数是非数字的，并且由于 id 字段是数字，查询出错但没有引发错误。当添加检查以确保仅使用数字响应来检查 ID 字段时，代码有效。见下面的代码：

```
int x;

            comm.CommandText = "SELECT * FROM tbl_requests WHERE Title LIKE '%' + @title + '%'";
            comm.Parameters.AddWithValue("title", Request.QueryString["idortitle"]);
            if(int.TryParse(Request.QueryString["idortitle"],out x)){
                comm.CommandText += " OR RequestId=@id";
                comm.Parameters.AddWithValue("id", x);
            } 
```

# asp.net - 如何更改 IIS 7.0 的 maxAllowedContentLength？

> ID：13145489
> 
> 赞同：5
> 
> 时间：2012-10-30T18:32:32.627
> 
> 标签：asp.net, iis-7

我有一个类似的问题：[How to set the maxAllowedContentLength to 500MB while running on IIS7?](https://stackoverflow.com/questions/4022434/how-to-set-the-maxallowedcontentlength-to-500mb-while-running-on-iis7)

不同之处在于我已经修改了我`web.config`以接受最大 2 Gb 的文件，但是当尝试上传大文件时，我收到以下错误：

> 请求过滤模块，用于拒绝超过内容长度的请求。

我`web.config`的是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <system.web>
        <httpRuntime executionTimeout="999999" maxRequestLength="2097151"/>
        <customErrors mode="Off"/>      
        <compilation debug="true" strict="false" explicit="true" targetFramework="4.0" />
            <membership>
            <providers>
            <clear/>
            </providers>
        </membership>
        <profile>
            <providers>
            <clear/>

            </providers>
        </profile>
        <roleManager enabled="false">
            <providers>
            <clear/>

            </providers>
        </roleManager>
</system.web>
<system.webServer>
    <security>
        <requestFiltering>
            <requestLimits maxAllowedContentLength="2097151" />
        </requestFiltering>
    </security>
</system.webServer> 
```

当我尝试上传一个只有它的文件时，我仍然收到错误消息`131 MB`。

那么，我应该在设置中`maxAllowedContentLength`设置什么以允许人们上传超过 100 MB 的文件？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-30T18:37:03.787

While[`MaxRequestLength`](http://msdn.microsoft.com/en-us/library/system.web.configuration.httpruntimesection.maxrequestlength.aspx)是*千字节*数，[`maxAllowedContentLength`](http://msdn.microsoft.com/en-us/library/ms689462%28v=vs.90%29.aspx)是*字节*数。再乘以 1024，它应该可以正常工作。

> **maxAllowedContentLength**
> 可选的 uint 属性。
> 指定请求中内容的最大长度，以字节为单位。
> 默认值为 30000000。
> [[http://msdn.microsoft.com/en-us/library/ms689462(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms689462%28v=vs.90%29.aspx)]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-25T10:35:52.947

在 Windows 运行 (WinKey + r) 中键入**inetmgr**，单击左侧面板上的服务器名称，然后在**IIS**部分的右侧面板中双击请求过滤。在最右侧的面板上单击**编辑功能设置**...。在**请求限制**部分，您可以更改**maxAllowedContentLength**。

如果您只想在其中一个站点中更改**maxAllowedContentLength**，请在左侧面板中的站点下选择您的**站点**，然后按照与上述相同的方式进行更改。

# perl - How to iterate array elements inside a filehandle loop in perl

> ID：13145491
> 
> 赞同：1
> 
> 时间：2012-10-30T18:32:33.523
> 
> 标签：perl

Here is what I have:

```
open INFILE,    "<",    "$inputfile";
open OUTFILE,   ">",    "$outfile";
@array = qw{ Element1 Element2 };
        if ( ! open INFILE, "<", "$inputfile") {
                die "Cannot open INFILE: $!";
        }
while (<INFILE>) {
         if ($_ =~ m/(str1)|(str2)/sg) {
              chomp;
              $regex = $_;
                   foreach $list (@array) {
                            print OUTFILE "\$list is $list\n";
                            print OUTFILE "String is $regex\n";
                    }
          }
}

close INFILE;
close OUTFILE; 
```

What I am getting is:

```
\$list is ELEMENT 1
String is str1
\$list is ELEMENT 2
String is str1
\$list is ELEMENT 3
String is str1 
```

I want this output:

```
\$list is ELEMENT 1
String is str1
\$list is ELEMENT 2
String is str2
\$list is ELEMENT 3
String is str3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T19:47:15.243

这是每个脚本顶部应该使用的内容：

```
use warnings; use 5.012; # (or whatever version you are using) 
```

如果您`use`的版本大于`5.010`，您将获得各种好东西，例如自动`strict`性和`say`功能。

一个人去很危险。随身携带错误处理：

```
open my $filehandle, "<", $filename or die "Can't open $filename: $!"; 
```

使用`open`without`die`可能会招致 bug。

我会将您的`while`-loop 编码为：

```
while (my $line = <$infile>) {
  chomp $line;
  if ($line =~ /str[12]/) {
    foreach my $element (@array) {
      say $outfile "I am at element $element";
      say $outfile "The string is $line";
    }
  }
} 
```

这个↑有点美化和精简，但和你在帖子里写的差不多。如果你的文件很小，你甚至可以做一个

```
foreach my $line (grep {chomp; /str[12]/} <$infile>) {
  foreach my $element (@array) {...}
} 
```

现在我们有了相当干净的代码，我们可以考虑您的问题：

您提供的代码不会产生您声称的输出：既不`@array`包含`ELEMENT 3`，您的正则表达式也无法匹配`str3`。此外，对于每个匹配的字符串，*您*打印`@array`. `print "\$"`打印`$`而不是`\$`。

我将假设您要匹配`str`后跟一个数字，并且您要从`@array`相应位置的元素中选择该元素。

```
# selecting the lines
my @lines;
while (<$infile>) {
  chomp;
  push @lines, [$_ => $1-1] if /str(\d)/ and $1 > 0; # avoid off-by-one errors
  # push @lines, [$1 => $2-1] if /(str(\d))/ and $2 > 0;
}

# clever initialization
my @array = map {"ELEMENT $_"} 1..9;

# print out the report
foreach my $line (@lines) {
  my ($string, $index) = @$line;
  my $element = $array[$index];
  say $outfile "I have $element";
  say $outfile "String is $string";
}
# folding the loops into one is left as an exercise for the reader 
```

现在如果输入是

```
str1
str2
foo
str3
Here is str8 among other things!
bar
str45
baz 
```

输出将是

```
I have ELEMENT 1
String is str1
I have ELEMENT 2
String is str2
I have ELEMENT 3
String is str3
I have ELEMENT 8
String is Here is str8 among other things!
I have ELEMENT 4
String is str45 
```

# c# - how to unit test service call

> ID：13145493
> 
> 赞同：1
> 
> 时间：2012-10-30T18:32:39.000
> 
> 标签：c#, unit-testing

how to test method that calls a service and passess in an object.

```
long AddFileDownloadEntry(FileDownloadEntry fde); 
```

I understand how to unit test when there is some logic involved, but this service just passes in an object and the data in the object is inserted into the database.

Edit:

Sorry I wasn't clear , I'm trying to test the method in the service.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:35:58.743

我建议[模拟](http://code.google.com/p/moq/wiki/QuickStart)该服务并[验证](http://code.google.com/p/moq/wiki/QuickStart#Verification)：

*   预期方法被调用的预期次数
*   使用预期的参数调用预期的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T18:36:03.900

如果您的方法的职责是*调用服务并传入一个对象*，那么您应该验证是否调用了适当的服务方法，并且传递了适当的对象。

怎么做？首先，您应该依赖抽象（即服务接口）。然后你应该模拟这个依赖并设置期望）：

```
FileDownloadEntry fde = // create entry
Mock<IFooService> serviceMock = new Mock<IFooService>();
serviceMock.Setup(s => s.AddFileDownloadEntry(fde)).Returns(someReturnValue);

SUT sut = new SUT(serviceMock.Object); // inject dependency
sut.YourMethod(); // act

serviceMock.VerifyAll(); 
```

此示例使用[Moq](http://code.google.com/p/moq/wiki/QuickStart)测试库。

*顺便说一句*，默认起订量将通过引用比较传递的参数。如果您希望它们按值进行比较，则应覆盖`Equals`on`FileDownloadEntry`或手动验证参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T18:36:25.070

通常，您不能对这些集成点进行单元测试。您可以使用适配器包装方法调用，并且可以测试适配器的使用情况，但实际调用不会被测试覆盖。这正是在集成点发生的情况——最终您需要调用服务、与数据库通信、使用文件系统等。

# c++ - cv::findHomography gioving error c2665

> ID：13145500
> 
> 赞同：1
> 
> 时间：2012-10-30T18:33:15.970
> 
> 标签：c++, opencv, homography

I looked at this code which gives [http://docs.opencv.org/doc/tutorials/features2d/feature_homography/feature_homography.html](http://docs.opencv.org/doc/tutorials/features2d/feature_homography/feature_homography.html)

```
//-- Localize the object
std::vector<Point2f> obj;
std::vector<Point2f> scene;

for( int i = 0; i < good_matches.size(); i++ )
{
    //-- Get the keypoints from the good matches
    obj.push_back( keypoints_object[ good_matches[i].queryIdx ].pt );
    scene.push_back( keypoints_scene[ good_matches[i].trainIdx ].pt );
}

Mat H = findHomography( obj, scene, CV_RANSAC ); 
```

So naturally I wanted to load data into findHomography the same way. So my code reads

```
std::vector<cv::Point2f> srcPoints();
std::vector<cv::Point2f> dstPoints();

cv::Mat homography = cv::findHomography(srcPoints, dstPoints, CV_RANSAC); 
```

But its giving me

> 1>c:\main.cpp(65): error C2665: 'cv::findHomography' : none of the 2 overloads could convert all the argument types 1> c:\opencv\build\include\opencv2\calib3d\calib3d.hpp(423): could be 'cv::Mat cv::findHomography(cv::InputArray,cv::InputArray,int,double,cv::OutputArray)' 1> c:\opencv\build\include\opencv2\calib3d\calib3d.hpp(428): or 'cv::Mat cv::findHomography(cv::InputArray,cv::InputArray,cv::OutputArray,int,double)' 1> while trying to match the argument list '(overloaded-function, overloaded-function, int)' 1> 1>Build FAILED.

It works if I use CV::Mat instead of Vectors but I don't understand why the same format as in the sample shouldn't want to work.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T22:47:59.420

您的向量声明后不应有括号。您的代码应为：

```
std::vector<cv::Point2f> srcPoints;
std::vector<cv::Point2f> dstPoints;

cv::Mat homography = cv::findHomography(srcPoints, dstPoints, CV_RANSAC); 
```

我假设您没有用点填充向量。否则，请在通过`findHomography`. 您编写的代码将空向量作为参数传递。

# .net - System.ServiceModel, portable class libraries, and code analysis

> ID：13145503
> 
> 赞同：3
> 
> 时间：2012-10-30T18:33:26.923
> 
> 标签：.net, wcf

I've got an interface in a portable class library with code analysis on build enabled. When I mark it with ServceContract and OperationContract for a WCF service, it starts throwing build errors from code analysis.

```
Assembly reference cannot be resolved: System.ServiceModel, Version=2.0.5.0, 
 Culture=neutral, PublicKeyToken=31bf3856ad364e35, Retargetable=Yes 
```

The library is targeting .Net 4.5 and Silverlight 5.

Am I missing something?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:51:20.333

我有同样的问题，它与编译目标有关。我有混合配置（ARM 中的一些库，Any CPU 中的一些库）。对于 PCL，任何 CPU 几乎总是最佳选择。

# sencha-touch-2 - 如何在 Sencha Touch 2 应用程序中获取可见区域的大小

> ID：13145508
> 
> 赞同：2
> 
> 时间：2012-10-30T18:33:45.390
> 
> 标签：sencha-touch-2

我想在面板上显示 DIV 元素，高度等于面板可见区域的一半大小。调整大小没有问题。但是如何获得面板可见区域的大小（没有标题栏和工具栏）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T09:52:56.113

好的，我发现只有一种方法可以做到这一点。`x-scroll-container`您可以在当前视图中找到具有类的元素。该元素的大小将是可见区域的大小。

# java - using java to find a specific element in a web page

> ID：13145509
> 
> 赞同：2
> 
> 时间：2012-10-30T18:33:50.023
> 
> 标签：java, selenium-webdriver

I apologise if this is a stupid question....

I am trying to create a java application to open a url, run a series of actions on it and then print the page I can open the page easily, but i have a problem in that the page has a number of twisty like expand boxes. I would like to be able to access these with the java app and expand all of them before printing the document, as not expanding them causes the document to be printed without the details below the expand box.

```
<P>
<TABLE id=expandTable class=expTable width="100%" count="25">
<TBODY>
<TR class=expTitleMout onmouseover="className='expTitleMin'"      onmouseout="className='expTitleMout'">
<TD class=expTitle onclick=collapse(25,1) vAlign=top width=18><SPAN contentEditable=false width="100%"><IMG id=img_expSection_25 src="images/kms_dt_expand.gif"></SPAN></TD>
<TD class=expTitle onclick=collapse(25,1) width="100%">
<DIV>*****HEADING HERE*****:&nbsp;</DIV></TD></TR>
<TR>
<TD id=expSection_25 class=expDataB colSpan=2>
<UL>
<LI>****** CONTENT HERE *******<BR></LI></UL></A></TD></TR></TBODY></TABLE></P> 
```

I am trying to find out if there is some way to address the script function that expands this text. Looking at it with selenium, selenium gives me a chunk of java code, but i am having major issues installing the selenium plug in for Netbeans.

If anyone has any way for me to create a line of code in Java that will allow me to address these functions and make sure they are expanded I would highly appreciate it. hate to have to ask for help but I have done about 6 hours of research on this by now, and think my Google-Fu is crippled as i can find nothing to help. Please find the script i am using for accessing the url below

```
package openuri;
import java.awt.Desktop;
import java.io.IOException;
import java.net.URI;
import java.net.URISyntaxException;

/**
 *
 * @author gbreytenbach
 */    
    public class OpenURI {

       public static void main(String[] a) {
           String baseURL = "https://someurl.com/";
           String docID = "SOME SUFFIX";
           String docURL = baseURL+docID;
      try {
      URI uri = new URI(docURL);
      Desktop desktop = null;
      if (Desktop.isDesktopSupported()) {
        desktop = Desktop.getDesktop();
      }

      if (desktop != null)
      {
        desktop.browse(uri);
      }
    } catch (IOException | URISyntaxException ioe) {
    }

    }
} 
```

* * *

EDIT: Thanks for the 2 very quick answers. Maybe I should provide more details ;) the function i am trying to run on the page is a print function that looks as follows:

```
<td id="print" nowrap="nowrap">
<span id="tbPrint">
<a onclick="return printPage('Published')" href="#">Print</a>
</span>
</td> 
```

Using .doclick, would it allow me to run the print function programmatically?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T18:39:53.907

看看[Watij](http://watij.com/)。我遇到了与 Selenium 插件相同的问题，以及为每个响应指定 waitTime 的另一个问题。Watij 在这方面做得很好，还提供了简洁的 API。您可能不需要将其插件安装到 IDE。只需在类路径中使用它的 API 即可。

# c++ - Compiling and Linking Leda 6.3

> ID：13145511
> 
> 赞同：0
> 
> 时间：2012-10-30T18:34:04.710
> 
> 标签：c++, opensuse, leda

I am new to LEDA and I am working on LEDA6.3 Free Edition on OpenSuse 12.1. As a start I tried to write a simple code "Hello LEDA world" as in the manual [http://www.leda-tutorial.org/en/official/ch01s02.html](http://www.leda-tutorial.org/en/official/ch01s02.html).

```
#include <LEDA/string.h>
#include <iostream>

using leda::string;
using std::cout;

int main() 
{
    string msg = "Hello LEDA world!";

    cout << msg << "\n";
} 
```

The compilation phase works fine and I generated the .o file. But they mentioned that this file needs to be linked to the LEDA library and the only library available in the Free edition is the libleda.a and libleda.so

I am trying to link using the following command:

```
g++ -o welcome welcome.o -L$LEDAROOT -llibleda 
```

What I get is:

```
/usr/lib64/gcc/x86_64-suse-linux/4.6/../../../../x86_64-suse-linux/bin/ld: cannot find -llibleda 
```

I was wondering if someone could help me with how to link my file with the leda library ? so I can get it to run.

Thanks all.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T19:56:37.927

不太可能调用库文件`liblibleda.a`或`liblibleda.so`：当链接器看到表单的选项时，`-l<name>`它将搜索名为`lib<name>.so`（对于共享库）或`lib<name>.a`（对于静态库）的库文件。您可能只想使用该选项`-lleda`（除非 LEDA 开发人员做了一些聪明的事情并将库称为类似`libeda.a`这样的库`-leda`）。

这是否有效还取决于安装和构建之间的编译器选项是否一致。

# matlab - How to compare a matrix row by row with specified condition

> ID：13145515
> 
> 赞同：3
> 
> 时间：2012-10-30T18:34:07.540
> 
> 标签：matlab, matrix, indexing, compare, row

I have a data matrix like this:

```
A=[ 5   0   10  15  0.021;
    5   0   15  20  0.011;
    10  15  5   0   0.022;
    15  20  5   0   0.009] 
```

I need to compare each row with all of the other rows. The criteria is: If the 1st and 2nd column of this row is the same as the 3rd and 4th columns of the second row, and if the 3rd and 4th columns of the this row is the same as the 1st and 2nd column of the other row, I need the indices of these two rows.

For example:

```
A = [5  0 10 15  *;
     *  *  *  *  *;
     10 15 5  0  *;
     *  *  *  *  *]; 
```

As you can see:

*   1st and 2nd element on row 1 are equal to 3rd and 4th of row 3
*   3rd and 4rd element on row 1 are equal to 1st and 2nd of row 3

I do not want change the order of my matrix.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:47:22.153

[ismember](http://www.mathworks.nl/help/matlab/ref/ismember.html)可以这样做：

```
[~,b]=ismember(A(:,1:4),A(:,[3 4 1 2]),'rows');
ind = find(b);
ind(:,2) = b(ind(:,1)); 
```

`ind`将包含冗余条目（例如`[1 2]`和`[2 1]`），因为您的标准是对称的，您可以使用以下方法过滤它们：

```
ind = unique(sort(ind,2),'rows') 
```

# javascript - How can i reinstall my node?

> ID：13145516
> 
> 赞同：-3
> 
> 时间：2012-10-30T18:34:09.950
> 
> 标签：javascript, node.js

Yesterday, i try to uninstall node.js from my ubuntu. But i can uninstall only npm from my computer, surely. Now i want to uninstall node.js from my ubuntu(12.04) and install again. Firstly, please let me know about uninstalling node.js after I'll install it again.

I'm waiting..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T18:39:11.253

[这](https://stackoverflow.com/questions/5650169/uninstall-node-js-using-linux-command-line)可能会有所帮助。它不是专门针对 ubuntu 的，但它显示了如何在 linux 上卸载节点。

# php - Array of objects top 5 unique values

> ID：13145518
> 
> 赞同：1
> 
> 时间：2012-10-30T18:34:12.580
> 
> 标签：php, arrays

I have an array of arrays with two specific key/value pairs. What I am trying to do is to get the top 5 unique `cause` values decided by `qty`. Meaning that it would group the `cause` keys together by unique values, then total up the `qty` keys for each cause, and return the top 5 causes and the total qty for each cause.

Here is what the print_r(array_values($array)) prints out.

```
Array ( 
[0] => Array ( [cause] => Other (please comment) [qty] => 0.417 ) 
[1] => Array ( [cause] => Chem Out FC-DryStrAddTow [qty] => 0.430 ) 
[2] => Array ( [cause] => Chem Out FC-DryStrAddTow [qty] => 0.430 ) 
[3] => Array ( [cause] => Chem Out FC-DryStrAddTow [qty] => 0.513 ) 
[4] => Array ( [cause] => Chem Out FC-DryStrAddTow [qty] => 0.513 ) 
[5] => Array ( [cause] => Chem Out FC-DryStrAddTow [qty] => 0.750 ) 
[6] => Array ( [cause] => Chem Out FC-DryStrAddTow [qty] => 0.750 ) 
[7] => Array ( [cause] => Slitter Cut/Saw-Poor Cut [qty] => 0.816 ) 
[8] => Array ( [cause] => Slitter Cut/Saw-Poor Cut [qty] => 0.816 ) 
[9] => Array ( [cause] => Slitter Cut/Saw-Poor Cut [qty] => 0.828 ) 
[10] => Array ( [cause] => Slitter Cut/Saw-Poor Cut [qty] => 0.828 ) 
[11] => Array ( [cause] => Slitter Cut/Saw-Poor Cut [qty] => 0.681 ) 
[12] => Array ( [cause] => Slitter Cut/Saw-Poor Cut [qty] => 0.681 ) 
[13] => Array ( [cause] => No Cause Selected [qty] => 0.918 ) 
[14] => Array ( [cause] => No Cause Selected [qty] => 0.918 ) 
[15] => Array ( [cause] => No Cause Selected [qty] => 0.926 ) 
[16] => Array ( [cause] => No Cause Selected [qty] => 0.937 ) 
[17] => Array ( [cause] => No Cause Selected [qty] => 0.809 ) 
[18] => Array ( [cause] => No Cause Selected [qty] => 0.809 ) 
[19] => Array ( [cause] => Slitter Cut/Saw-Poor Cut [qty] => 0.891 ) 
[20] => Array ( [cause] => Slitter Cut/Saw-Poor Cut [qty] => 0.891 ) 
[21] => Array ( [cause] => Slitter Cut/Saw-Poor Cut [qty] => 0.884 ) 
[22] => Array ( [cause] => Slitter Cut/Saw-Poor Cut [qty] => 0.884 ) ) 
```

Thank you in advance for your help.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T18:42:44.120

```
<?php

// Total up the quantities
$totals = array();
$tally  = array();
foreach ($datapoints as $entry) {
    if (!isset($totals[$entry['cause']]) {
        $totals[$entry['cause']] = 0;
        $tally[$entry['cause']]  = 0;
    }
    $totals[$entry['cause']] += $entry['qty'];
    $tally[$entry['cause']]++;
}

// Sort them, 'descending' or 'reverse', so the larger entries are first
arsort($totals, SORT_NUMERIC);

// Take the first 5 entries from the sorted list
$top = array_slice($totals, 0, 5);

// Do something with it.
foreach ($top as $cause => $totalQty) {
    echo $cause . ': ' . $totalQty . ' with ' . $tally[$cause] . ' events' . PHP_EOL;
} 
```

但是，如果此数据来自数据库，则最好使用数据库和 SQL，例如：

```
SELECT cause, SUM(qty) as totalQty, COUNT(qty) as tally
FROM data
GROUP BY cause
ORDER BY totalQty DESC
LIMIT 5; 
```

而是在 php.ini 中加载所有数据和处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T18:45:05.093

如果使用 php 5.3+，您可以在代码中使用闭包并排序（按数量降序）

```
usort($arary,function($a,$b){
    return $b['qty'] - $a['qty']
} 
```

在此之后，您可以遍历数组并获取前 5 个唯一值。

# jakarta-ee - Unable to send IM to user on different domain using Java SMACK

> ID：13145522
> 
> 赞同：1
> 
> 时间：2012-10-30T18:34:25.683
> 
> 标签：jakarta-ee, smack, jira-plugin

The following snippet is picked out of a JIRA plugin I'm writing to (hopefully) notify people (co-workers) via an IM (gchat in my case) when they've been @mentioned on a JIRA ticket.

```
 import org.jivesoftware.smack.Chat;
   import org.jivesoftware.smack.ChatManager;
   import org.jivesoftware.smack.ConnectionConfiguration;
   import org.jivesoftware.smack.MessageListener;
   import org.jivesoftware.smack.XMPPConnection;
   import org.jivesoftware.smack.XMPPException;
   import org.jivesoftware.smack.packet.Message;

   ConnectionConfiguration config = new ConnectionConfiguration(<server>, <port>, <domain>);
   XMPPConnection connection = New XMPPConnection(config);

   connection.connect();
   connection.login(someone@domain_a.com, <password>);

   ChatManager chatManager = connection.getChatManager();

   Chat chat = chatManager.createChat(someone@domain_b, new MessageListener() {
      public void processMessage(Chat chat, Message msg) {
          System.out.println("Received message "+ msg);
      }
   });

   chat.sendMessage(<msg>); 
```

My issue is that I'm able to send the IM notifications to users that share the domain of the user who was authenticated at the line:

```
connection.login(someone@domain_a.com, <password>); 
```

But not others - eg: I can send from somone@**domain_a.com** to someon_else@**domain_a.com** but NOT able to send it to someone_else@**domain_b.com**...

Any help is appreciated. Cheers,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:57:58.457

我将继续回答我的菜鸟错误：

问题是经过身份验证的用户在他们的聊天列表中没有他们试图将消息发送到（来自不同域）的用户......

一旦他们成为“朋友”，它就没有问题#facepalm

# c# - .net 远程调用后属性值没有改变

> ID：13145527
> 
> 赞同：0
> 
> 时间：2012-10-30T18:34:50.973
> 
> 标签：c#, .net, remoting

> **可能重复：**
> [In 和 Out 属性在 .NET 中如何工作？](https://stackoverflow.com/questions/9072075/how-do-the-in-and-out-attributes-work-in-net)

我正在使用 .Net Remoting（是的，我知道......这很旧）来实现一些托管在 Windows 服务中的服务类。

我在服务上调用一个方法`DoOperation(Person[] people)`来更改`Person`类中的某些属性，就像下面的代码一样：

```
Person p = new Person();
p.SomeProperty = "This value should be changed by the service";

RemoveSvc svc = (RemoveSvc)Activator.GetObject(
    typeof(RemoveSvc),
    "tcp://localhost:6100/RemoteService.rem");

svc.DoOperation(new Person[]{ p });

// This writes the old value not the one changed by the service.
Console.WriteLine(p.SomeProperty); 
```

`DoOperation`方法代码如下所示：

```
public void DoOperation(Person[] people) {
    foreach(var o in people)
        p.SomeProperty = "New Value";
} 
```

这里的问题是，当方法返回时`Person.SomeProperty`，客户端代码中的值没有更新。

我已经仔细检查了`Person`该类是可序列化的；

`svc`变量的类型为`TranparentProxy`;

类`RemoteSvc`继承`MarshalByRefObject`；

我正在使用 .net Framework 4（不，我不能迁移到 WCF）

我究竟做错了什么？这是.net Remoting 的预期行为吗？如果是，有办法改变吗？

Tks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T18:40:36.053

服务不是这样工作的。服务不是内存中的操作。当您使用在本地计算机上编写的类执行您所展示的操作时，您自然会看到`Person`对象的更改，因为您正在调用者和方法之间传递内存引用。当然，它是**完全相同的 person 对象**。

但是，当您使用服务或远程处理时，它不再是同一个人。实际上，您在问题中说明了这一点。您对人进行序列化，然后通过网络将其发送出去。在同一个共享内存寄存器中不是同一个人。因此，`Person`服务器上的更改将不会在客户端中看到。

为了得到你想要的，这是你的函数签名。

```
public Person[] DoOperation(Person[] people); 
```

您可以更改签名以保留参考。然后对象将在客户端的服务器之间保持同步。[有关更多信息，请参阅本文](http://www.devx.com/codemag/Article/11514/0/page/2)。

```
public void DoOperation(ref Person[] people); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T20:13:58.297

Jarrett 是正确的，但这可能只是解决方案的一部分。问题是即使您传递了对数组的引用，您仍然复制了`Person`数组中的 s。因此远程更改其中之一不会影响本地副本。您可能需要*通过数组*而不是使用本地引用来引用它们。

我会尝试类似的东西：

```
var temp = new Person[]{ p }
svc.DoOperation(temp);

// This writes the old value not the one changed by the service.
Console.WriteLine(temp[0].SomeProperty); 
```

这可能使用远程调用创建的代理`Person`从远程位置获取，而不是使用本地引用。

# jquery - twitter 引导模式对话框

> ID：13145534
> 
> 赞同：3
> 
> 时间：2012-10-30T18:35:33.583
> 
> 标签：jquery, twitter-bootstrap, modal-dialog

我对 Twitter Bootstrap 模式对话框有疑问。
HTML 代码：

```
<div class="container">
    <div class="delete_dosar">delete</div>
</div>

<!-- Boostrap modal dialog -->
<div id="delete_confirmation" class="modal hide fade" style="display: none; ">
    <div class="modal-header">
        <a href="#" class="close" data-dismiss="modal">x</a>
        <h3>Are you sure?</h3>
    </div>
    <div class="modal-body">
        <div class="paddingT15 paddingB15" id="modal_text">    
        Are you sure with this?
        </div>
    </div>
    <div class="modal-footer">
        <a href="#" class="btn confirm_delete_the_item no_return">yes</a>
        <a href="#" class="btn btn-secondary " data-dismiss="modal">no</a>
    </div>
</div>​ 
```

JS代码：

```
$(function() {
$(".delete_dosar").live('click',function(){

    $('#delete_confirmation').modal("show");
    $('.confirm_delete_the_item').live('click',function(e){
        $('#delete_confirmation').modal("hide");
        //e.preventDefault();
        alert('x');
    });

    return false;
});
});​ 
```

代码在这里运行：http: [//jsfiddle.net/darkwish02/u7hEv/](http://jsfiddle.net/darkwish02/u7hEv/)

如果我单击“删除”和“是”，第一次我只有一个警报，但如果我第二次单击“删除”（不刷新），我将有 2 个警报。

“点击”事件似乎连续运行 2 次。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T18:53:33.920

您正在做的方式是，每次单击删除按钮时都会附加一个新的单击处理程序。

您应该将内部单击处理程序插入移出第一个。然后，“是”按钮总是只有一个处理程序。

这个小提琴显示它工作：http: [//jsfiddle.net/KSxJs/](http://jsfiddle.net/KSxJs/)

```
$(function() {

    $('.confirm_delete_the_item').live('click', function(e) {
        $('#delete_confirmation').modal("hide");
        //e.preventDefault();
        alert('x');

    });

    /** SETERGERE DE DOSAR DIN PARTEA STANGA **/
    $(".delete_dosar").live('click', function() {

        $('#delete_confirmation').modal("show");

        return false;

    });
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-05T09:59:21.637

我建议您使用 bootbox 或 bootstrap-dialog 来执行此操作。

看：

[http://bootboxjs.com/](http://bootboxjs.com/)

[http://github.com/nakupanda/bootstrap3-dialog](http://github.com/nakupanda/bootstrap3-dialog)

# video - 色彩校正 MP4/Webm 视频

> ID：13145535
> 
> 赞同：9
> 
> 时间：2012-10-30T18:35:36.537
> 
> 标签：video, ffmpeg, mp4

我有一个大型视频，其中包含一些对于其他嵌入方法（gif、png 序列等）来说太复杂/太长的动画，并且我们遇到了视频中颜色的问题。本质上，我们将网页背景作为视频的一部分包含在内，以防止视频播放时出现任何边缘。我们正在尝试使视频上的渐变背景与网页上的渐变背景相匹配，但颜色却相差甚远。

关于如何对 MP4 视频进行色彩校正有什么建议吗？或者任何使用 alpha 通道制作视频的 html5 安全方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T03:13:32.217

不幸的是，每种流行的浏览器都以不同的方式处理 HTML 5 视频中的颜色，这使得很难获得一致的颜色。

H.264 (MP4) 比特流可以选择编码您正在使用的一组原色、传输特性和矩阵系数；这些可以用例如设置`ffmpeg -x264opts colorprim=bt709:transfer=bt709:colormatrix=smpte170m`. 至少在 Mac OS X 上，Safari 和 Quicktime 会注意 H.264 视频中的这些位，并将颜色从指定编码转换为显示器的颜色配置文件，从而产生漂亮且一致的颜色。然而，Chrome 似乎只是忽略了这些位，并假设 H.264 和 VP8 视频都使用 BT.709 原色（即使对于 VP8 规范说应该是 BT.601 的 VP8 SD 视频），尽管它会将其转换为显示器的颜色配置文件。另一方面，Firefox 似乎跳过了 VP8 视频元素的输出转换，只是假设您的显示器是 sRGB，因此具有不同颜色配置文件的显示器之间的颜色不一致，并且在广色域显示器上可能会出现偏差。（我只在 Mac 上测试过；浏览器在其他操作系统上的工作方式可能不同。）

对不起，我没有任何好的解决方案。可以通过[使用 canvas 处理 Javascript 中的视频](https://developer.mozilla.org/en-US/docs/Manipulating_video_using_canvas)来解决这个问题，尽管这样的东西可能性能很差。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-21T22:28:33.557

对于任何感兴趣的人：当面对同样的情况时，我想到了一些技巧，例如：创建一个超小视频，使用原始视频的背景颜色（它们在任何浏览器中总是显示为相同的颜色）。例如，将其用作背景并将其大小调整为 100%。

# android - 锁屏+密码锁安卓

> ID：13145544
> 
> 赞同：2
> 
> 时间：2012-10-30T18:36:06.487
> 
> 标签：android, android-intent

我正在开发一个安全增强的 android 应用程序。需要锁定安卓手机，因此使用设备管理员，它工作正常。

但是，在设置密码时，我需要使用 Intents 或导航到内置 UI 屏幕来输入密码。

`Intent intent = new Intent(DevicePolicyManager.ACTION_SET_NEW_PASSWORD); startActivity(intent);`

有没有办法在不使用默认屏幕/不使用 UI 的情况下设置密码？

请帮助我..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T17:45:27.033

```
DevicePolicyManager DPM = (DevicePolicyManager) getSystemService(Context.DEVICE_POLICY_SERVICE);
String pw = "abcd123";
DPM.resetPassword(pw, DevicePolicyManager.RESET_PASSWORD_REQUIRE_ENTRY); 
```

不确定这是您需要的，但这是我为用户设置密码的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T18:45:09.197

不 - 这样做的原因是从 Google 的角度来看（您的要求可能会有所不同，但您是少数）用户应该始终有机会知道他们设备的密码。允许应用程序（即使作为设备策略管理器）在没有用户输入的情况下更改密码可能会将用户锁定在他们可能需要运行的设备之外，而他们却不了解原因，这是一个非常糟糕的用户体验设计。您可以重置用户的密码，或者，正如您已经指出的，启动屏幕以帮助他们更改密码，但这是您在没有自定义操作系统构建的情况下能够管理的最好的方法。

# android - 如何知道列表视图中的列表项何时在 Android 中聚焦（突出显示）？

> ID：13145545
> 
> 赞同：0
> 
> 时间：2012-10-30T18:36:09.583
> 
> 标签：android, android-layout, android-widget

我搜索了很多，但我找不到直接的方法。我所需要的只是当我单击一个菜单项时，我可以意识到列表中的哪个项目是焦点？例如，在打击图片中，我如何知道突出显示了哪个项目（当我单击一个按钮时，例如在后退按钮上）？

![在此处输入图像描述](../Images/fa1a45a7065f2d186bc97c3ded02f54f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-12T14:02:49.270

这应该这样做：

[http://developer.android.com/reference/android/widget/AdapterView.html#getSelectedItemPosition()](http://developer.android.com/reference/android/widget/AdapterView.html#getSelectedItemPosition())

或保留当前选择的参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:51:30.520

您必须实现 OnItemClickListener

```
myList.setOnItemClickListener(new OnItemClickListener() {

@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
       YourClass yourObject = (YourClass) arg0.getItemAtPosition(arg2);
    }
} 
```

# javascript - 如何根据javascript中的用户输入动态生成输入字段

> ID：13145554
> 
> 赞同：0
> 
> 时间：2012-10-30T18:37:07.450
> 
> 标签：javascript, jquery, html

我正在创建一个课程注册表单，要求用户输入将要从他或她的公司参加课程的任何所需数量的候选人。

示例：如果用户在名为“No of Candidates”的字段中输入 3，则脚本应为每个候选人的信息生成 3 行，其中包含“姓名”、“电子邮件”、“电话”、“性别”和“职位”等字段。

请在 html 下方查找“候选人编号”字段和要生成的字段，供用户输入每个候选人的信息。

请注意：要生成的字段是基于用户的输入。即它可以是 3、5、10 等

```
<p>
<label><strong>No of Candidates</strong></label>
<label><input name="cand_no" type="text" placeholder="Type Your Number of Candidates" onchange='this.form.submit()' /></label>
  <div class="clear"></div>
</p>

    <div class="cand_fields">
    <table width="630" border="0">
      <tr>
        <td>Name</td>
        <td width="20">Sex</td>
        <td>Email</td>
        <td>Phone</td>
        <td width="40">Position</td>
      </tr>
      <tr>
        <td><input name="cand_name" type="text" placeholder="Name" required="required" /></td>
        <td>
        <select name="cand_sex" required="required">
        <option value=" "> </option>
        <option value="Male">Male</option>    
        <option value="Female">Female</option>
        </select>
        </td>
        <td><input name="cand_email" type="text" placeholder="Email" required="required" /></td>
        <td><input name="cand_phone" type="text" placeholder="Phone" required="required" /></td>
        <td><input name="cand_pos" type="text" placeholder="Position" required="required" /></td>
      </tr>
    </table></div> 
```

我已经用 php 尝试过，但从服务器端这样做并不愉快。所以，我真的需要使用 javascript 从客户端完成它。

如果这可以用javascript实现，我将不胜感激......

太感谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:16:29.083

Try this .. Using the `.change()` event..

I have created a **template class** that holds the template row .. Then using `.clone()` to insert the rows into table..

```
$('[name="cand_no"]').on('change', function() {
    // Not checking for Invalid input
    if (this.value != '') {
        var val = parseInt(this.value, 10);

        for (var i = 0; i < val; i++) {
            // Clone the Template
            var $cloned = $('.template tbody').clone();
            // For each Candidate append the template row
            $('#studentTable tbody').append($cloned.html());
        }
    }
});​ 
```

**[Working Fiddle](http://jsfiddle.net/sushanth009/H3z5P/)**

**EDIT**

**1.)** I have just named the table which holds the student information with an ID so that it will be easy to target..

**2.)** Clone just create's a copy of the element in question i.e, template . So for the number of entries entered in the input , we write a for loop and append the template row to the student table.

**3.)** I am just storing the template row into a separate div with display: none so that it is not visible on the screen .. this is just to copy the HTML from it and append to the new table.

```
<div class="template" style="display: none">
    <table>
    <tr >
         <td><input name="cand_name" type="text" placeholder="Name" required="required" /></td>
         <td>
            <select name="cand_sex" required="required">
               <option value=" "> </option>
               <option value="Male">Male</option>
               <option value="Female">Female</option>
            </select>
         </td>
         <td><input name="cand_email" type="text" placeholder="Email" required="required" /></td>
         <td><input name="cand_phone" type="text" placeholder="Phone" required="required" /></td>
         <td><input name="cand_pos" type="text" placeholder="Position" required="required" /></td>
      </tr>
  </table>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:43:05.873

我可能会建议您从更改`cand_no`为下拉列表开始，否则您将必须验证输入是数字而不是文本。

然后我会添加 50 个版本的表格（确认，使用 div？），渐进式 ID 为 1-50。默认情况下对它们全部应用`display:hidden`，然后有一个 javascript 循环从`1`更改`cand_no`显示到阻止。

# xml - Eclipse 在处理 xml（往返于它们）时挂起。此时 CPU + Disk 秒杀

> ID：13145556
> 
> 赞同：6
> 
> 时间：2012-10-30T18:37:10.497
> 
> 标签：xml, eclipse

我必须每天处理许多 XML。这极大地打断了我的工作流程；我已经尝试降级到 Indigo，但我的所有附加组件都被删除了。

打开xml时出现问题；切换到 xml；切换出一个 xml（甚至切换到另一个 xml）。发生了什么让 XML 如此烦人？我可以禁用或更改什么以获得更好的性能？

重新启动 Eclipse 往往会有所帮助，但不会持续很长时间（一个小时左右）。

在这些时间里，我的 CPU 从几个 % 飙升到 70-80%，所以无论它在做什么都是非常耗费资源的。

我相信这些时间与磁盘使用量之间也存在相关性。

编辑：澄清一下，这不仅仅是从一个xml切换到另一个xml时，它也是当我将焦点从主xml更改到另一个框架时，即项目资源管理器、问题、控制台。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-21T10:53:22.023

我解决了！！！（我有 Eclipse 靛蓝）

1.  打开***你的WorkspaceFolder\.metadata\.plugins\org.eclipse.core.resources***文件夹
2.  删除“ **.snap** ”和“ **.markers.snap** ”文件（我建议之前备份它们）
3.  重启 Eclipse

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T19:27:21.293

听起来您遇到了Juno 和 Juno SR1的[已知性能问题。](https://bugs.eclipse.org/bugs/show_bug.cgi?id=385272)平台团队目前正在处理 SR2 的一些性能错误，其中一些已经修复。我认为降级到 Indigo 或 Eclipse 3.8 是您唯一的选择。与 XML 编辑器相关的一些特定错误：

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=391127](https://bugs.eclipse.org/bugs/show_bug.cgi?id=391127)

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=391868](https://bugs.eclipse.org/bugs/show_bug.cgi?id=391868)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-30T21:36:37.187

我找到了解决方法。取出 xml 编辑器，用 Rinzo XML 替换它（但我相信任何其他的都可以，这是我看到的第一个免费的），一切都几乎和正常一样快。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-30T18:43:07.243

您是否尝试禁用所有 XML 验证？

`Windows -> Preferences`

![在 Eclipse 中禁用验证](../Images/b60730cab63f1d63eb0d1447a83c2d91.png)

# android - 如何仅绘制地图上可见的标记？

> ID：13145564
> 
> 赞同：3
> 
> 时间：2012-10-30T18:37:45.040
> 
> 标签：android, android-mapview, itemizedoverlay, overlayitem

我想学习只绘制地图上可见的覆盖项，因为我正在展示一张带有数千个标记的地图。我知道我必须检查覆盖项是否可见，如下所示：

```
private boolean isLocationVisible(location)
    {
        Rect currentMapBoundsRect = new Rect();
        Point currentDevicePosition = new Point();
        GeoPoint deviceLocation = new GeoPoint((int) (location.getLatitude() * 1000000.0), (int) (location.getLongitude() * 1000000.0));

        mapView.getProjection().toPixels(deviceLocation, currentDevicePosition);
        mapView.getDrawingRect(currentMapBoundsRect);

        return currentMapBoundsRect.contains(currentDevicePosition.x, currentDevicePosition.y);

    } 
```

然后如果这个方法返回 true 我必须绘制覆盖项，如果不是，我不能绘制它。

问题是我无法覆盖 OverlayItem 中的 onDraw，所以我不知道如何满足我的需求。

我应该在我的代码中进行哪些更改以仅绘制地图上可见的标记？

这是我的 ItemizedOverlayClass：

```
 public class mItemizedOverlay extends ItemizedOverlay<OverlayItem> {
    private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();
    boolean onTapActivated=false; 
    private Drawable marker = null;
    private BusMap map = null;
    boolean comingFromFavoriteNameEdit=false; 

    public BmItemizedOverlay(Drawable defaultMarker, BusMap map) {
        super(boundCenterBottom(defaultMarker));
        this.map=map;
        this.marker=defaultMarker;
    }
    public mItemizedOverlay(Drawable defaultMarker, BusMap map, boolean onTapActivated) { 
          super(boundCenterBottom(defaultMarker));
          this.map=map;
          this.onTapActivated=onTapActivated;    
          this.marker=defaultMarker;
    }

    protected OverlayItem createItem(int i){return mOverlays.get(i);}

    public int size() {return mOverlays.size();}    

    public void clear(){mOverlays.clear();} 

    public void addOverlay(OverlayItem overlay) {
        mOverlays.add(overlay);
    }
    public void setOverlays(ArrayList <OverlayItem> overlays) {
        mOverlays=overlays;
        populate();
    }   

    public void draw(Canvas canvas, MapView mapView, boolean shadow){
        if (mapView.getZoomLevel() > 17){
            boundCenterBottom(this.marker);
            super.draw(canvas, mapView, false);         
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:52:58.200

你不应该自己处理这个。它的工作是`ItemizedOverlay`仅调度和绘制当前存在于可见地图边界内的标记。是什么让你相信这还没有发生？

如果您认为当前的`Overlay`实现不令人满意，您可能会更幸运地使用您的检查方法来确定何时从 中添加或删除项目`Overlay`，而不是尝试覆盖绘图调用。

# php - Javascript 函数仅从 PHP for 循环输出第一个复选框的值

> ID：13145567
> 
> 赞同：1
> 
> 时间：2012-10-30T18:38:03.703
> 
> 标签：php, javascript, for-loop

我有一个 for 循环，它根据从 mySQL 数据库接收到的信息形成一个复选框列表。下面是形成复选框的 for 循环（删除了不必要的代码）。

```
for ($i = 1; $i <= count($descriptionIDsArray); $i++) {
    $statuses = mysql_fetch_assoc(mysql_query(sprintf("SELECT status, description FROM status_descriptions WHERE description_id='$i'")));
    $status = $statuses["status"]; ?>
    <input type="checkbox" value="<?php echo $status ?>" <?php if ($check == 1) {echo "checked='checked'";} ?> onchange="checkBox()" /><?php echo $description ?><br />
<?php } ?> 
```

选中或取消选中一个框会调用以下函数：

```
<script type="text/javascript">
    function checkBox() {
        var status = $("input:checkbox").val();
        document.getElementById("test").innerHTML = status;
    }
</script> 
```

我可以出现在“测试”中的唯一值是第一个复选框的值。如果我在整个初始 for 循环中回显 $status ，所有值都会正确显示，因此当 Javascript 代码检索相应值时似乎会出现问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:42:14.047

当你这样做

```
$('input:checkbox').val(); 
```

它返回表单上第一个复选框类型的输入，不一定是单击的那个。

要返回实际单击的那个，您需要执行以下操作：

```
$(document).ready(function() {
    $('input:checkbox').bind('click', function() {
        clickBox($(this));
    });
});

function clickBox(field) {
    $('#test').html(field.val());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T18:54:52.243

如果您仍想保留内联事件处理程序，请将其更改为：

```
onclick="checkBox(this);" 
```

并将函数更改为：

```
function checkBox(chk) {
    var status = chk.value;
    document.getElementById("test").innerHTML = status;
} 
```

请注意，`onclick`复选框和单选按钮比 is 更好地支持`onchange`。此外，我提供此更改的原因是因为传递`this`给`checkBox`函数引用了`click`应用的元素。这样，您知道在 内部`checkBox`，参数`chk`将是刚刚更改的特定复选框。然后只需获取值，`.value`因为它是一个简单的 DOM 节点。

无论如何，我建议使用 jQuery 来绑定`click`事件。就像是：

```
$(document).ready(function () {
    $("input:checkbox").on("click", function () {
        var status = this.value;
        document.getElementById("test").innerHTML = status;
    });
}); 
```

但是您显然可以使用`$(this).val()`而不是`this.value`，但是为什么要麻烦呢？如果您使用 jQuery 绑定事件，只需确保在 HTML 中取出`onchange`/`onclick`内联事件处理程序。

您可以在这里查看为什么要使用`input:checkbox`而不仅仅是`:checkbox`作为 jQuery 选择器：http: [//api.jquery.com/checkbox-selector/](http://api.jquery.com/checkbox-selector/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T18:55:55.433

如果您使用 jquery，为什么还要使用内联事件？

你可以这样写：

```
$(':checkbox').change( function(){

      $('#test').html( $(this).val() );
      //`this` is the checkbox was changed 

     //for check if item is checked try:

       $(this).is(':checked') // boolean
}); 
```

如果您在放置复选框之前传递该代码，请确保在加载文档时调用该代码；

```
$( function(){ 
   //code from above here
}); 
```

`jQuery`有大量的样本有据可查。我想你会喜欢它[docs.jquery.com](http://docs.jquery.com/)

# iphone - ios6中的facebook集成错误？

> ID：13145571
> 
> 赞同：0
> 
> 时间：2012-10-30T18:38:11.773
> 
> 标签：iphone, objective-c, ios, xcode, ios6

我在 ios6 中进行 facebook 集成。我添加了社交、帐户框架并导入如下

```
#import "social /Social.h"
#import "accounts /Accounts.h" 
```

但我收到“未找到社交/Social.h”错误。任何想法。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T18:46:08.087

试试这个

```
#import <Social/Social.h> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:46:21.037

导入 iOS 框架时将大写字母作为首字母。

像这样。

```
#import "Social/Social.h"
#import "Accounts/Accounts.h" 
```

# google-apps-script - 如何在不同域的用户之间制作文件副本？

> ID：13145573
> 
> 赞同：1
> 
> 时间：2012-10-30T18:38:16.653
> 
> 标签：google-apps-script

我想在不同域的用户之间制作一份 Google 电子表格文件的副本。源文件的*共享设置*为**任何知道链接的人都可以编辑**。我创建了一个调用安装函数的 Web 应用程序（执行权限设置为*用户访问 Web 应用程序）：*

我希望代码能够读取对所有人开放的源文件，并将本地副本复制到运行 Web 应用程序的用户的 Google Drive（当然假设用户接受运行脚本）。当我运行它时，该行为有效（因为我是源的所有者），但如果用户来自另一个域，则该行为无效。

关于如何实现这一目标的任何建议？

```
function doInstall() {
// The source file is readable by everybody with the link;
  var file = DocsList.getFileById('0AlVPTKz1xoevdHc1ZTQ2OGFMXXXXXXXYYYYZZZZ');
  file.makeCopy('Test Copy Spreadsheet');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T03:44:12.747

我有一个不同但相似的用例和问题。与您一样，任何知道链接的人都可以访问我的源文件，并且我的域设置允许用户在我的域之外共享内容。它对我有用，但对他们无效。

这可能对你有用，它对我有用（到目前为止）：

假设你有你的原始脚本......

1.  为“脚本作为 Web 应用程序”创建一个单独的脚本。
2.  使用ScriptDb 编写一个函数（例如loadFileIds()）来存储必要的fileIds。运行 loadFileIds() 函数。
3.  在同一个项目中编写另一个函数（例如 getFileId()），在调用时从 ScriptDb.getMyDb 返回所需的文件 ID。避免在此函数中使用 DocsList。我最初认为因为 getFileId() 会“像我一样运行”所以没问题，但是当其他用户触发脚本时，总是 DocsList 行导致失败。
4.  在文件 > 管理版本中：保存项目的版本。
5.  在发布下：将该版本的项目部署为 Web 应用程序。选择以“ **me(me@mydomain.com)** ”执行应用程序并将谁有权访问网络应用程序设置为“**任何人**”。
6.  在您的原始项目中，转到管理资源并输入 Web 应用程序的项目密钥，选择一个版本并复制标识符。
7.  编写一个函数，调用 yourIdentifier.getFileId() 并 - 希望 - 返回 fileId。

以我迄今为止的经验，外部用户已经能够访问当 DocsList 方法返回 null 时他们无法访问的文件。但是还有一件事要添加......您可能会发现您必须与您的用户共享您的网络应用程序脚本。我还没有完全确定这是必要的，但是当我不这样做时我遇到了错误。我取消了通过电子邮件将链接发送给他们的选项。

[我从文档中的示例](https://developers.google.com/apps-script/scriptdb)、[此视频](http://www.youtube.com/watch?v=8lJewIWVI5s&feature=plcp)以及 StackOverflow中学习了如何做到这一点。

正如您所看到的，我仍在自己解决这个问题，到目前为止，系统的测试只是我模拟其他用户。所以没有承诺。祝你好运！我会给你的问题加星标。

# java - 在 Windows 7 64 位上运行 Jive Dev Enrivonment

> ID：13145575
> 
> 赞同：1
> 
> 时间：2012-10-30T18:38:24.627
> 
> 标签：java, maven, windows-7-x64, jive

我已按照以下说明在 Windows 7 64 位机器上启动并运行 Jive。

爪哇

1.  安装最新版本的 Java
2.  下载 Java SE 6 Update 37 JDK（包括 JRE）但尚未安装
3.  打开一个新的命令提示符并运行 java --version 以验证它是否已正确安装。
4.  如果您收到一条错误消息，提示您需要 1.5 版，但找到了 1.7 版，请确保所有软件版本都适用于正确的操作系统（64 位或 32 位），这可能需要您卸载当前版本（系统将使用安装的最新版本，即使您在安装较新版本后尝试安装较旧版本）

蚀

1.  下载并安装适用于 Java EE 开发人员的 Eclipse IDE
2.  安装后，创建您的默认工作区并访问帮助 - Eclipse Marketplace
3.  在市场上搜索 SubClipse 并安装
4.  在市场上搜索 Maven Integration for Eclipse WTP 并安装

PostGres

1.  安装 postgreSQL
2.  安装 postgres 后，从 C:\oracle\Ora11gR2\product\11.2.0\client_1 目录卸载 java 并在那里安装 Java 版本 7。
3.  打开pgAdmin，点击“plug”创建一个新的连接
4.  将名称和主机设置为 localhost 并包括您的网络用户名、端口号和安装 postgres 时使用的密码
5.  展开数据库树，右键添加新登录角色-通过选择角色权限下的所有选项，将新登录角色配置为超级用户，在定义选项卡下设置PW，然后点击确定
6.  退出或断开连接并以您的用户身份重新登录
7.  创建所需的数据库

马文

1.  安装maven的二进制镜像下载
2.  将分发包解压缩，即 apache-maven-3.0.4-bin.zip 到您希望安装 Maven 3.0.4 的目录。这些说明假设您选择了 C:\Program Files\Apache Software Foundation。将从存档中创建子目录 apache-maven-3.0.4。
3.  将分发包解压缩，即 apache-maven-3.0.4-bin.zip 到您希望安装 Maven 3.0.4 的目录。这些说明假设您选择了 C:\Program Files\Apache Software Foundation。将从存档中创建子目录 apache-maven-3.0.4。
4.  转到控制面板\系统和安全\系统中的环境变量（如何）对话框并访问高级系统设置。在“系统属性”对话框中，转到“高级”选项卡并单击“环境变量”</li>
5.  在系统变量中添加 M2_HOME 变量，值为 C:\Program Files\Apache Software Foundation\apache-maven-3.0.4
6.  在系统变量中添加 M2 环境变量，值为 %M2_HOME%\bin
7.  在用户变量中添加 MAVEN_OPTS 环境变量以指定 JVM 属性，例如值 -Xms256m -Xmx512m
8.  在系统变量中更新/创建 Path 环境变量并附加值 %M2% 以添加命令行中可用的 Maven。（将 ;%M2% 添加到路径值的末尾）
9.  在系统变量中添加/更新 JAVA_HOME 并将值设置为 JDK 的位置，例如 C:\Program Files\Java\jdk1.5.0_02
10.  确保 %JAVA_HOME%\bin 在您的 Path 环境变量中。如果没有，追加到现有的 Path 系统变量（记得用分号分隔）
11.  打开一个新的命令提示符并运行 mvn --version 以验证它是否已正确安装。
12.  如果失败，请调查本文中讨论的问题。

在用户的目录（即\USERNAME.m2）中，会有一个用于Maven 存储库的.m2 目录。使用存储库设置在该目录中创建一个 settings.xml 文件

Jive 构建

1.  从 SVN 存储库中检查 Jive
2.  编辑项目根目录中的 pom.xml 文件。确保正确设置大约第 20 行的 jive 短版本：5.0.2.1
3.  打开一个终端窗口。切换到顶层项目目录
4.  运行这个： mvn clean install -Djive.setup=false -P external

这就是我卡住的地方 - 当我运行 mvn clean install -Djive.setup=false -X external 以获取调试日志时出现 cmd 提示错误，它说它仍然缺少存储库。

我看过一些文档说要让这一切在 Windows 7 机器上运行，你应该使用 VM，但我也看到它是可能的，只是不支持。

有人在 Windows 7 上成功安装、构建和运行 jive 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-08T14:01:27.420

按照[https://community.jivesoftware.com/docs/DOC-3547](https://community.jivesoftware.com/docs/DOC-3547)设置 maven 说：

注意：此 Maven 配置通过 maven-secure.jivesoftware.com 服务器提供对 Jive 二进制文件和源的访问；它需要登录权限。请参阅文档底部的登录信息放置位置。

请通过创建支持案例来请求 Maven 访问权限。如果您没有公司组，您可以通过电子邮件将您的 maven 请求发送至 accountsupport@jivesoftware.com

您可能没有所需的访问权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-11T15:08:51.897

棘手的部分是让 eae 引擎在 Windows 7 中启动并运行。它从 Jive 6 开始工作。我记得在 Jive 5 中，在 linux vm 中运行 eae 引擎并连接到它。设置后，除非您进行需要 eae 引擎的开发，否则您可以将其关闭...

# c# - 如何创建集合（1：n）关系

> ID：13145578
> 
> 赞同：9
> 
> 时间：2012-10-30T18:38:30.780
> 
> 标签：c#, sqlite, microsoft-metro, windows-runtime, windows-store-apps

我正在我的 Windows 应用商店应用程序 (WinRT) 中实现 SQLite 数据库。我想在两个表之间建立关系 (1:n) 书 (1) - 第 (n) 章

```
class Book
{
    [SQLite.AutoIncrement, SQLite.PrimaryKey]
    public int Id { get; set; }
    public String Title { get; set; }
    public String Description { get; set; }
    public String Author { get; set; }
    public List<Chapter> Chapters { get; set; }

    public Book() 
    {
        this.Chapeters = new List<Chapter>();
    }
} 
```

我明白了

```
-       $exception  {"Don't know about     System.Collections.Generic.List`1[Audioteka.Models.Chapter]"}    System.Exception {System.NotSupportedException}

+       [System.NotSupportedException]  {"Don't know about System.Collections.Generic.List`1[Audioteka.Models.Chapter]"}    System.NotSupportedException

+       Data    {System.Collections.ListDictionaryInternal} System.Collections.IDictionary {System.Collections.ListDictionaryInternal}
    HelpLink    null    string
    HResult -2146233067 int
+       InnerException  null    System.Exception
    Message "Don't know about System.Collections.Generic.List`1[Audioteka.Models.Chapter]"  string 
```

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-31T00:18:44.910

只是通过更多研究来跟进我的评论 - SQLite-net 不支持任何无法**直接**映射到数据库的内容。请参阅[此处](https://github.com/praeclarum/sqlite-net/wiki/Features)了解原因：

> ORM 能够采用 .NET 类定义并将其转换为 SQL 表定义。（大多数 ORM 都朝另一个方向发展。）它通过检查类的所有公共属性来做到这一点，并由可用于指定列详细信息的属性辅助。

您可以考虑使用不同的 ORM 来实际访问您的数据（我使用[Vici Coolstorage](http://viciproject.com/wiki/projects/coolstorage/home)），如果这是您想要做的，或者只是`List<Chapters>`从您的类中删除并在类中添加一个`BookID`字段`Chapters`。这就是数据库将如何表示它。

为了使用它，您可以将其中之一添加到您的课程中：

```
List<Chapters> Chapters { 
  get { 
     return db.Query<Chapters> ("select * from Chapters where BookId = ?", this.Id); 
  } 
} 
```

或者

```
List<Chapters> Chapters { 
  get { 
     return db.Query<Chapters>.Where(b => b.BookId == this.Id); 
  } 
} 
```

这至少可以让您轻松地拉出列表，尽管它会很慢，因为每次访问它都会访问数据库。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-04-21T13:18:11.340

看看[SQLite-Net 扩展](https://bitbucket.org/twincoders/sqlite-net-extensions)。它通过使用反射在 SQLite-Net 之上提供复杂的关系。

从网站中提取的示例：

```
public class Stock
{
    [PrimaryKey, AutoIncrement]
    public int Id { get; set; }
    [MaxLength(8)]
    public string Symbol { get; set; }

    [OneToMany]      // One to many relationship with Valuation
    public List<Valuation> Valuations { get; set; }
}

public class Valuation
{
    [PrimaryKey, AutoIncrement]
    public int Id { get; set; }

    [ForeignKey(typeof(Stock))]     // Specify the foreign key
    public int StockId { get; set; }
    public DateTime Time { get; set; }
    public decimal Price { get; set; }

    [ManyToOne]      // Many to one relationship with Stock
    public Stock Stock { get; set; }
} 
```

# css - 图像“显示：阻止”的缺点？

> ID：13145580
> 
> 赞同：20
> 
> 时间：2012-10-30T18:38:55.110
> 
> 标签：css, image, css-float, positioning, responsive-design

`img`将inline-block 元素转换为具有`display: block`CSS 属性的块对象有什么缺点吗？

大多数时候，我希望它们成为`block`元素。`inline`我失去了任何有用的方面吗？（也许我没有看到[一些](https://stackoverflow.com/questions/13111136/why-is-there-a-pesky-little-space-between-img-and-other-elements)有用的东西？）

默认情况下是否应该将所有图像转换为`block`元素？为什么它们根据规范是内联块元素？

*PS我问这个问题是考虑通过定位和浮动以及周围元素进行布局。*

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-31T05:34:31.200

考虑到一个块会在换行后强制任何东西，只有一种情况会不好：

如果您打算在它旁边有另一个内联元素（文本、另一个图像、跨度等）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-03-17T15:23:28.250

有一个缺点：如果您计划将“text-align:center”应用于父元素的图像水平居中，则无法将图像显示为块或内联块。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-12T18:25:25.253

放入`img { display: block; }`您的 CSS 并忘记它。在极少数情况下，您需要一些不同的东西，写一个异常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-05T10:16:00.793

为块显示找到了一个 hack：“块”。

我有这张图片和想要作为内联的[wavesurfer](https://wavesurfer-js.org/)音频波。但是，显示：“块”；在 wavesurfer 的 js 中是不允许的。

我所做的是，将此[cdn](https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/1.4.0/wavesurfer.min.js)文件保存在本地，并将**显示更改为内联**并将**位置更改为绝对**，这解决了我的问题。应该在创建波浪元素的地方进行更改。

希望这可以帮助某人。感谢 wavesurfer 的创作者提供了如此出色的 js。

# ios - iOS 提取证书身份：EXC_BAD_ACCESS

> ID：13145582
> 
> 赞同：0
> 
> 时间：2012-10-30T18:39:05.343
> 
> 标签：ios, xcode, ssl

我正在开发一个 iOS 应用程序并努力从 .p12 证书中提取身份。我对objective-c还是新手，所以我确定缺少一些重要的东西。这是代码：

```
@implementation P12Extractor

-(SecIdentityRef)getIdentity{
NSString *path = [[NSBundle mainBundle] pathForResource:@"ServerCert" ofType:@"p12"];
NSData *p12data = [NSData dataWithContentsOfFile:path];
CFDataRef inP12Data = (__bridge CFDataRef)p12data;
SecIdentityRef myIdentity;

OSStatus status = extractIdentity(inP12Data, &myIdentity);

if (status != 0) {
    NSLog(@"%@",status);
}
return myIdentity;

}

OSStatus extractIdentity(CFDataRef inP12Data, SecIdentityRef *identity){
OSStatus securityError = errSecSuccess;

CFStringRef password = CFSTR("password");
const void *keys[] = { kSecImportExportPassphrase };
const void *values[] = { password };

CFDictionaryRef options = CFDictionaryCreate(NULL, keys, values, 1, NULL, NULL);

CFArrayRef items = CFArrayCreate(NULL, 0, 0, NULL);
securityError = SecPKCS12Import(inP12Data, options, &items);

if (securityError == 0) {
    CFDictionaryRef ident = CFArrayGetValueAtIndex(items,0); // <<<at this point i get an EXC_BAD_ACCESS(code=2,adress=0x0) error
    const void *tempIdentity = NULL;
    tempIdentity = CFDictionaryGetValue(ident, kSecImportItemIdentity);
    *identity = (SecIdentityRef)tempIdentity;
}

if (options) {
    CFRelease(options);
}

return securityError;
}

@end 
```

我已经用评论标记了错误点，我真的不知道为什么我一直得到这个。此代码应该是 Apple 开发网站批准的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T18:40:38.207

当您尝试获取其第一个元素时，您的数组仍然是空的......

```
 CFArrayRef items = CFArrayCreate(NULL, 0, 0, NULL);
 securityError = SecPKCS12Import(inP12Data, options, &items);

 if (securityError == 0) {
   CFDictionaryRef ident = CFArrayGetValueAtIndex(items,0); // <<<at this point i get an   EXC_BAD_ACCESS(code=2,adress=0x0) error 
```

我认为问题可能出在证书或您传入的选项上。

# c# - 检查 S_OK 的 HRESULT 方法的返回值

> ID：13145585
> 
> 赞同：3
> 
> 时间：2012-10-30T18:39:14.847
> 
> 标签：c#, hresult

如何比较从方法返回的值与`HRESULT`？我试过这个，但它不工作：

```
FPropStg.DeleteMultiple(1, psProp) == VSConstants.S_OK 
```

[DeleteMultiple()](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379971%28v=vs.85%29.aspx)的类型定义是：

```
HRESULT IPropertyStorage.DeleteMultiple(Ulong, Propspec) 
```

我已经写了`VSConstants.S_OK`。有没有办法`S_OK`直接写？我尝试这样做，但收到一个错误，表明`S_OK`当前上下文中不存在该错误。

我还检查`HRESULT`了[Windows 通用系统范围的代码](http://msdn.microsoft.com/en-us/library/windows/desktop/ff485842%28v=vs.85%29.aspx)。但我收到的价值`HRESULT`不在该列表中。请注意，我已经包含了命名空间`System.Exception`和`System.Security.Cryptography.StrongNameSignatureInformation`.

说了这么多，我基本上有两个问题：

1.  有没有办法写`S_OK`而不是`VSConstants.S_OK`？
2.  如何比较方法的返回值与`S_OK`？

```
HRESULT hr = FPropStg.DeleteMultiple(1, psProp);

if (hr == S_OK) // S_OK does not exist in the current context...
{
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T19:33:38.863

如果将**PreserveSig**设置为**false**会怎样？像这样的东西：

您声明类似于此的功能（我编造的，我不知道确切的签名......但你知道）

```
[DllImport("ole32.dll", EntryPoint = "DeleteMultiple", ExactSpelling = true, PreserveSig = false)]
public static extern void DeleteMultiple(ulong cpspec, PropSpec[] rgpspec); 
```

并这样称呼它

```
try
{
    FPropStg.DeleteMultiple(1, psProp);
}
catch (Exception exp)
{
    MessageBox.Show(exp.Message, "Error on DeleteMutiple");
} 
```

**Explanation:** when **PreserveSig** is **false** you can omit the returned *HRESULT* value, but internally this value is actually checked, so if *HRESULT* is different from *S_OK* an exception is thrown.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T18:50:20.387

您可以使用此枚举来定义 OK，它来自[pinvoke](http://www.pinvoke.net/default.aspx/Enums/HRESULT.html)：

```
enum HRESULT : long
{
S_FALSE = 0x0001,
S_OK = 0x0000,
E_INVALIDARG = 0x80070057,
E_OUTOFMEMORY = 0x8007000E
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-30T18:50:05.780

[`HRESULT`只是一个无符号的 32 位整数值](http://msdn.microsoft.com/en-us/library/cc231198.aspx)。您可以构建自己的常量类来帮助您进行这些比较：

```
public static class HResults
{
    public static readonly int S_OK = 0;
    public static readonly int STG_E_ACCESSDENIED =  unchecked((int)0x80030005);
} 
```

像这样使用：

```
if (HResults.S_OK == FPropStg.DeleteMultiple(1, psProp))
{
    // ...
} 
```

# java - 用于 SQL 更新语句的 Java 单工作线程

> ID：13145588
> 
> 赞同：2
> 
> 时间：2012-10-30T18:39:18.020
> 
> 标签：java, multithreading, jdbc, queue, connection-pooling

我正在一个基于 Java 的服务器上工作，其中我将有多个线程（每个连接的用户一个线程 + 一些额外的线程）。将涉及一些数据库连接，所以我在想每次服务器对数据库进行*SELECT*查询时，它都会为此启动一个新线程，以防止当前线程阻塞。我打算为此使用连接池，我想我知道该怎么做。（我已经研究过[C3P0](http://www.mchange.com/projects/c3p0/index.html)）但是，也会涉及很多*UPDATE*语句，但是直接运行这些语句并不重要，这里有延迟也没关系。而且由于可能有很多*UPDATE*语句，我正在考虑为所有*UPDATE设置一个工作线程*陈述。正如我所看到的，这将具有能够重用`PreparedStatement`-objects的优势

**问题：** 我怎样才能从其他线程告诉*UPDATE* -worker 线程运行一些语句？我知道多线程以及如何使用同步块使线程相互“对话”，但是涉及到数据库时，它突然感觉更复杂了。我读过准备好的语句和连接不应该在线程之间共享。

**我现在关于如何解决它的想法：（**感觉不是一个好的解决方案）

使用`LinkedBlockingQueue`自定义类的（或另一种队列），其中包含有关调用哪种 UPDATE 语句以及发送它的参数的信息。然后工作线程将在收到通知时从该队列中读取（当将某些内容添加到队列时）并在那里运行适当的方法，该方法将使用适当的准备好的语句，设置参数并调用它。

**编辑：**我认为自己使用这种方法的一个不好的想法是参数可能是整数、字符串、双精度或其他。如何将它们存储在自定义类中？将它们全部存储为字符串感觉不好。

我在正确的轨道上还是有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T19:20:47.440

不需要显式阻塞队列。您可以拥有一个工作线程和一个由[`ExecutorService`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html). 至于值，您可以使用泛型：

```
class ThreadTask<T> implements Runnable {
    private T value;

    public ThreadTask(T value) {
        this.value = value;
    }

    public void run() {
        // update based on value
    }
}

...

ExecutorService exec = Executors.newSingleThreadExecutor();
exec.submit(new ThreadTask<String>("asdf"));
exec.submit(new ThreadTask<Integer>(1)); 
```

单线程执行器只是一个在队列中等待并按顺序执行提交的任务的工作线程。无需其他显式管理。

# php - 如何为 Android 的日历事件格式化描述文本

> ID：13145597
> 
> 赞同：0
> 
> 时间：2012-10-30T18:39:45.010
> 
> 标签：php, android, mobile, icalendar, vcalendar

我最近在一个生成日历事件的移动网站上工作，下载后可以将其添加到设备的本机日历中。开箱即用的 ics 格式在 Outlook 和 iOS 上运行良好。但是，Android 有点棘手。按照这个[线程](https://stackoverflow.com/questions/11825221/add-calendar-event-to-android-from-web-vcs-download)的建议，我将 vCalendar (vcs) 格式提供给 Android 设备。

这似乎工作得很好，除了一件事 - 描述。*DESCRIPTION*元素的文本跨越多行，但换行符似乎没有正确转义（就像它们在 iOS 中所做的那样）。相反，当我提供转义换行符时，我将它们作为文字放在 Android 设备上的*说明*文本中，这看起来很讨厌。

为了澄清，这是它在 iOS 上的外观：

```
This is the first sentence.
This is the second sentence. 
```

在安卓上：

```
This is the first sentence.\nThis is the second sentence. 
```

不转义换行符当然意味着描述一旦遇到第一个换行符就结束。关于整个主题的信息非常稀缺，但是有没有人有过如何处理 Android 上的换行符的经验？

**更新** 我在运行 Gingerbread 的三星 Galaxy S (GT-I9000) 上遇到了这个问题（尽管在 Eclair 上也是一样）。这是将 \n 转义为 \\n 后的屏幕截图：

[![](../Images/ff6e0bdd0127ac4be41dc3cbff4a7037.png)](http://tinypic.com?ref=jb20jb)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T18:56:03.960

看起来 android 不符合 rfc5545，它指定 summary 属性具有文本值（§3.8.1.12） [https://www.rfc-editor.org/rfc/rfc5545#section-3.8.1.12](https://www.rfc-editor.org/rfc/rfc5545#section-3.8.1.12) 和定义的文本值by (§3.3.11) 必须将新行转义为 \n 或 \N [https://www.rfc-editor.org/rfc/rfc5545#section-3.3.11](https://www.rfc-editor.org/rfc/rfc5545#section-3.3.11)

# java - 实现类中的 ClassCastException

> ID：13145603
> 
> 赞同：0
> 
> 时间：2012-10-30T18:40:10.207
> 
> 标签：java, spring, hibernate, classcastexception

为什么我会收到 ClassCastException：

包装异常：

```
java.lang.ClassCastException: com.avt.model.CasePmt
    at com.avt.dao.impl.CasePmtDaoImpl.findAllCasePmt(CasePmtDaoImpl.java:68)
    at com.avt.ViewCasePmtAction.view(ViewCasePmtAction.java:127)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:585)
    at org.apache.struts.actions.DispatchAction.dispatchMethod(DispatchAction.java:280)
    at gov.pbgc.spectrum.util.SpectrumLookupDispatchAction.execute(SpectrumLookupDispatchAction.java:113)
    at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:484)
    at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:274)
    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1482)
    at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:525)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:763)    
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:856) 
```

我的实现类是

```
public List<CasePmt> findAllCasePmt() {
            List list;
            list = getHibernateTemplate().executeFind(new HibernateCallback() {
                    public Object doInHibernate(Session session)
                                    throws HibernateException, SQLException {

                            Query q = session
                                            .getNamedQuery("findAll");
                            return q.list();
                    }
            });
            Iterator it = list.iterator();
            List<CasePmt> l = new ArrayList<CasePmt>();

            CasePmt voObj;
            while (it.hasNext()) {
                    voObj = new CasePmt();

                    Object[] objs = (Object[]) it.next();
                    // System.out.print("\n" + objs[0].toString());

                    if (objs[2] != null) {
                            voObj.setCaseTxNum(objs[1].toString());
                    }

    .......................
                        }
                    l.add(voObj);
            }
            return l;
    } 
```

我的行动呼吁是：

```
List<CasePmt> CsList =       
             CasePmtBo.getCaseDao().findAllCasePmt(); 
```

我在第 68 行遇到错误，即“Object[] objs = (Object[]) it.next();” 线。为什么我会遇到这个问题？

任何输入..我今天重新审视这个并面临这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T18:45:51.787

我假设，您`findAll`查询的是检索所有`CasePmt`对象。在这种情况下，我认为您在以下行有问题：

```
 Object[] objs = (Object[]) it.next(); 
```

**因为您的迭代器将返回`CasePmt`对象。**

尝试将其投射到`CasePmt`对象上作为打击：

```
 CasePmt casePmt = (CasePmt)it.next(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T19:41:06.430

一般来说，只要您有一个您不理解的 ClassCastException，而不是

```
Object[] objs = (Object[]) it.next();
[...] 
```

尝试

```
Object o = it.next();
if (o instanceof Object[])
{
    Object[] objs = (Object[]) o;
    [...]
}
else if (o != null)
{
    System.out.println("Retrieved object of class " + o.getClass());
    // ... or however you want to inspect the class of the object you retrieved
}
else
    // process null value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T18:52:52.237

将您的列表延迟为

```
 List<Object[]> list; 
```

如果您正在获取对象数组并使用 it.next() 而不是

```
 (Object[]) it.next(); 
```

# ruby-on-rails - Rails/Ruby NoMethodError：未定义的方法“订单”#

> ID：13145611
> 
> 赞同：0
> 
> 时间：2012-10-30T18:40:34.573
> 
> 标签：ruby-on-rails, ruby, undefined, runtime-error

我想执行以下操作：

情况1：

```
x = Group.all[0].people
x.class
=> Array
x.order 
```

美好的。:)

案例2：

```
y = Person.all
y.class
=> Array
y.order
=> NoMethodError: undefined method `order' for #<Array:0x718c278> 
```

:(

x 和 y 都包含相同类型的项目 - 一堆 Person 模型。为什么ruby不能订购数组？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T18:58:10.817

因为在 Rails 3 中，方法[all](http://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-all) ( [GitHub](https://github.com/rails/rails/blob/c9f27e3a479e17cd94248c007e4f528026bc18f6/activerecord/lib/active_record/relation/finder_methods.rb#L158) ) 返回一个数组。不能用 order 方法订购。

尽管您可以使用[sort](http://corelib.rubyonrails.org/classes/Array.html#M000423)方法来进行排序。

`people`返回一个`ActiveRecord::Relation`可以进一步限定范围的对象。

幸运的是，`ActiveRecord::Relation`该`to_a`方法将返回您可以排序的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T18:58:26.027

好的，所以 Group.all.first.person 不返回数组。看起来确实如此，但实际上它是 ActiveRecord AREL 的一部分，它允许您将关系和范围链接在一起。

当您调用`#order`时，`Group.all.first.person`您实际上是在调用“订单”范围，告诉查询对任何人都没有订单。

如果你打电话，你会得到同样的错误

```
Group.all.first.person.all.order
  NoMethodError: undefined method `order' for #<Array:0x007fe7dd03ff08> 
```

重要的是“#all”。

在 ruby​​ 中，没有“order”方法。有一个 sort 和 sort_by

# delphi - Youtube内嵌delphi自动播放&循环刷新

> ID：13145614
> 
> 赞同：0
> 
> 时间：2012-10-30T18:40:47.637
> 
> 标签：delphi, youtube, autoplay

我刚刚使用`TWebBrowser`组件内的嵌入式链接在 SDI 中制作了简单的 YouTube 播放器，并设法创建了自动播放和循环（循环一个并循环所有）按钮以及质量更改单选按钮，但它们都基于超链接更改，因此在播放视频时不会执行更改，但必须再次发送“Go”命令。我已经用上面提到的按钮实现了它，但是在进行更改时重新启动视频很烦人，特别是如果我只想在歌曲中间的某个地方设置循环。

是否有任何方法可以读取当前时间并设置然后设置与该时间开始的链接，或任何其他解决此问题的方法，所以当按下按钮时，该动作将被接受而不刷新，或者不会从开始？

用于更改播放器本身质量的默认按钮正是这样做的，但找不到命令。

此外，在 YouTube 上，播放列表中有一个按钮可以循环播放和随机播放，但也找不到它们。

# c# - “受保护”和“虚拟/覆盖”之间的区别

> ID：13145615
> 
> 赞同：11
> 
> 时间：2012-10-30T18:40:58.027
> 
> 标签：c#, oop

当我有“虚拟/覆盖”时，我无法理解“受保护”的需要或目的，如果它们几乎相同，有人可以解释我需要什么这两件事。

编辑：

感谢所有帮助者，我现在明白“受保护”仅用于可见性目的，而虚拟/覆盖用于类行为。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-30T18:43:57.593

它们当然*不*几乎相同。

[`protected`](http://msdn.microsoft.com/en-us/library/bcd5672a%28v=vs.110%29.aspx)修饰符设置字段或方法的可见*性* ：此类成员只能从定义它的类或派生类访问。

[`virtual`](http://msdn.microsoft.com/en-us/library/9fkccyh4%28v=vs.110%29.aspx)修饰符指定它所应用的方法可以[在`overridden`](http://www.akadia.com/services/dotnet_polymorphism.html)派生类中。

这些修饰符可以组合使用：方法可以是受保护的和虚拟的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-30T18:42:50.770

*   [protected](http://msdn.microsoft.com/en-us/library/bcd5672a%28v=vs.71%29.aspx)表示当前类和派生类的私有
*   [virtual](http://msdn.microsoft.com/en-us/library/9fkccyh4%28v=vs.71%29.aspx)意味着它可以按原样使用，但也可以在派生类中被覆盖

也许使用一些代码而不是你可能已经阅读过的东西会更好，这里有一个你可以玩的小示例。尝试删除注释（//），您可以看到编译器告诉您无法访问属性

```
[TestFixture]
public class NewTest
{
    [Test]
    public void WhatGetsPrinted()
    {
        A a= new B();
        a.Print();  //This uses B's Print method since it overrides A's
        // a.ProtectedProperty is not accesible here
    }
}

public class A
{
    protected string ProtectedProperty { get; set; }

    private string PrivateProperty { get; set; }

    public virtual void Print()
    {
        Console.WriteLine("A");
    }
}

public class B : A
{
    public override void  Print() // Since Print is marked virtual in the base class we can override it here
    {
        //base.PrivateProperty can not be accessed hhere since it is private
        base.ProtectedProperty = "ProtectedProperty can be accessed here since it is protected and B:A";
        Console.WriteLine("B");
    }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-30T19:07:57.553

我可以说，***最重要***的区别`virtual`在于，这会导致编译器在多态调用方法成员时，将编译后的代码绑定到***哪个***实现。当您从客户端代码调用类的成员时，其中对象的实际类型是派生类`foo`，但它被调用的变量实际上是作为某个基类类型（声明）的，比如`bar`声明为的成员`virtual`将绑定到实际对象类型中的实现，（或到具有实现的对象类型的最派生基类）。*未*声明为虚拟的成员将绑定到声明该*变量*的类型的实现。

A. **虚拟**。那么，如果该成员被声明为虚拟，即使该变量被声明为基类型，派生类中的实现也会被执行。

```
 public class Animal
  { public virtual Move() { debug.Print("Animal.Move()"); }
  public class Bird: Animal
  { public virtual override Move() { debug.Print("Bird.Move()");  }
  Animal x = new Bird();  
  x.Move();   // Will print "Bird.Move" 
```

B.**不是虚拟**的。当成员*未*声明为`virtual`时，将根据执行该方法的变量的声明类型来选择实现。因此，如果您有一个 Bird 对象，在变量 x 中声明为“Animal”，并且您调用了在两个类中都实现的方法，编译器将绑定到 Animal 类中的实现，而不是 Bird，即使该对象是真的是一只鸟。

```
 public class Animal
  { public Move() { debug.Print("Animal.Move()"); }
  public class Bird: Animal
  { public Move() { debug.Print("Bird.Move()");  }
  Animal x = new Bird();  
  x.Move();   // Will print "Animal.Move" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-30T18:45:39.617

我认为您需要正确理解以上两件事，因为两者都有不同的目的。

**protected**是类型或成员只能由同一类或结构中的代码或派生类中的代码访问。

**virtual**关键字用于修改方法、属性并允许它在派生类中被覆盖。

# java - 我在我的 Towers 程序中不断收到错误的输出或空指针异常

> ID：13145617
> 
> 赞同：-1
> 
> 时间：2012-10-30T18:41:13.343
> 
> 标签：java, exception, recursion, towers-of-hanoi

我正在通过使用堆栈和链表来解决塔游戏，并通过使用递归将块从一个塔移动到另一个塔。

我在我的问题中遇到了一个导致 java.lang.NullPointerException 的问题。我猜为什么会发生这种情况是我尝试从堆栈中弹出值，即使没有条目。在我设置绑定控制后，我仍然收到该错误。

错误指向 deleteFirst() 方法的行，但即使在我检查列表是否为空之后，我也不明白为什么会发生这种情况。

我在这里的任务只是传递塔或 LinkedStack 对象，然后以塔游戏的方式移动它们的内容。

错误：

```
Exception in thread "main" java.lang.NullPointerException
    at LinkList.deleteFirst(towers.java:47) // code with: **first = first.next;**
    at LinkedStack.pop(towers.java:82) // code with: return theList.deleteFirst();
    at LinkListApp.doTowers(towers.java:146) // code with: A.pop();
    at LinkListApp.doTowers(towers.java:140) // doTowers(a-1, A, C, B);
    at LinkListApp.main(towers.java:121) // doTowers(nDisks, linkA, linkB, linkC); 
```

我在这里做错了什么？我无法完成这项工作。正如它应该。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T18:46:47.277

您的 doTowers 调用调用了 A.pop() 和 C.pop()，它们都不受保护。您的 LinkedStack 直接调用 theList.deleteFirst() 而不进行空检查，并且您的 deleteFirst 方法调用`first = first.next`而不检查 first 是否为空。在这种情况下，让您的 LinkedList 足够智能以使 deleteFirst 不会抛出 NPE 会很好，这样您就不需要在上层的所有地方进行特殊检查。为此，将 deleteFirst 更改为类似

```
public long deleteFirst()
{
    if ( first != null ) {
        Link temp = first;
        first = first.next;
        return temp.dData;
    }
    else {
        return whateverIndicatesTheListIsAlreadyEmptyWhichMayBeHardWithReturnTypelong;
    }
} 
```

# c# - 在设计视图中将控件添加到窗体时会运行什么？

> ID：13145620
> 
> 赞同：0
> 
> 时间：2012-10-30T18:41:25.877
> 
> 标签：c#, winforms, design-view

我显示有关 onload 事件的错误。仅当我将控件添加到窗体并尝试在设计视图中查看窗体时才会显示该错误。在设计视图中查看控件本身很好。错误是

`Object reference not set to an instance of an object.`

堆栈跟踪

```
at BHCS.ECC.PhysDoc.UI.UserControls.TemplateBaseControl.SetControlVisibility() in C:\TFS10\ECC\Dev\BHCS\ECC\BHCS.ECC\BHCS.ECC\PhysDoc\UI\TemplateBaseControl.cs:line 98
at BHCS.ECC.PhysDoc.UI.UserControls.TemplateBaseControl.ucTemplateBase_Load(Object sender, EventArgs e) in C:\TFS10\ECC\Dev\BHCS\ECC\BHCS.ECC\BHCS.ECC\PhysDoc\UI\TemplateBaseControl.cs:line 476
at System.EventHandler.Invoke(Object sender, EventArgs e)
at System.Windows.Forms.UserControl.OnLoad(EventArgs e)
at DevExpress.XtraEditors.XtraUserControl.OnLoad(EventArgs e)
at BHCS.ECC.PhysDoc.UI.UserControls.TemplateBaseControl.OnLoad(EventArgs e) in C:\TFS10\ECC\Dev\BHCS\ECC\BHCS.ECC\BHCS.ECC\PhysDoc\UI\TemplateBaseControl.cs:line 1029
at System.Windows.Forms.UserControl.OnCreateControl()
at System.Windows.Forms.Control.CreateControl(Boolean fIgnoreVisible)
at System.Windows.Forms.Control.CreateControl(Boolean fIgnoreVisible)
at System.Windows.Forms.Control.CreateControl()
at System.Windows.Forms.Control.ControlCollection.Add(Control value)
at System.Windows.Forms.Form.ControlCollection.Add(Control value)
at System.Windows.Forms.Design.ControlDesigner.DesignerControlCollection.Add(Control c) 
```

在设计时拥有对象没有任何意义。为什么我的表单中运行着代码？导致表单设计视图出现错误的控件中不允许有什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:44:52.093

错误在这里抛出：

```
BHCS.ECC.PhysDoc.UI.UserControls.TemplateBaseControl.SetControlVisibility() in C:\TFS10\ECC\Dev\BHCS\ECC\BHCS.ECC\BHCS.ECC\PhysDoc\UI\TemplateBaseControl.cs:line 98 
```

您需要查看该行以确定您获得`Object reference not set to an instance of an object.`.

当您尝试查看表单设计器时，您在设计时收到此错误的原因是 VS 需要执行您的自定义控件来显示它。如果自定义控件的代码中有错误，VS 将无法显示任何内容，因此会报告错误。

# javascript - js 表单：混合文本区域和输入类型导致错误的点击焦点

> ID：13145621
> 
> 赞同：3
> 
> 时间：2012-10-30T18:41:29.117
> 
> 标签：javascript

我有一个内部表单，当用户输入字段数据时会生成一些 html 代码。

问题是我有一个'textarea'对象与20个左右的其他'input type'对象混合在一起，当点击它下面的任何表单对象时，焦点总是发送到文本区域。

我尝试过使用和不使用 tabindex 值。但是，实际上标签顺序不是问题（标签顺序工作正常）。问题是当用户手动单击表单上的任何字段时，光标会被带到“textarea”字段。

因此，要复制问题，请加载下面的表格。尝试单击文本区域下方的任何表单元素。单击元素时，焦点将放在 textarea 字段上。

这是完整的表格：

[http://devtest.host.org/testing/test-form.html](http://devtest.host.org/testing/test-form.html)

谢谢。

# ruby-on-rails-3 - 设置 Devise omniauth_path_prefix 不起作用

> ID：13145622
> 
> 赞同：1
> 
> 时间：2012-10-30T18:41:36.560
> 
> 标签：ruby-on-rails-3, devise, routes, omniauth

我正在开发基于 Rails 的 API。我最近开始尝试对其进行版本控制。（我正在使用[Versionist](https://github.com/bploetz/versionist) gem，以防万一）一个版本（'v2'）使用 Devise 和 Omniauth 通过 Facebook/Twitter 对用户进行身份验证。

我希望与此版本关联的所有路由都具有适当的版本前缀（因此`users/:username/foo`变为`v2/users/:username/foo`等），但我已经发现放入块`devise_for`内会`api_version`阻止 Devise 助手（`current_user`,`user_signed_in?`等）工作，所以它继续住在街区外：

路线.rb：

```
devise_for :user, :path => '', :controllers => {:omniauth_callbacks => 'users/omniauth_callbacks'}, :skip => [:registrations, :confirmations, :sessions, :passwords]

api_version(:module => "V2", :path=>"v2") do

  resources :authentications, :only => [:update, :destroy]

  devise_scope :user do
    post 'login' => 'sessions#create', :as => 'user_session'
    get 'logout' => 'sessions#destroy'
    post 'password' => 'devise/passwords#create'
    put 'password' => 'devise/passwords#update'
  end

end 
```

一切看起来都很棒......除了设计生成的omniauth路线：

耙路线输出：

```
 user_omniauth_authorize      /auth/:provider(.:format)
 user_omniauth_callback       /auth/:action/callback(.:format) 
```

现在，一些 google-fu 透露有一个设计配置设置，所以我将以下内容添加到我们的设计初始化程序 ( `config/initializers/devise.rb`) 中：

```
Devise.setup do |config|
  config.omniauth_path_prefix = 'v2/auth'
end 
```

现在，rake routes 会生成看起来合理的路径：

```
user_omniauth_authorize     /v2/auth/:provider(.:format)          v2/users/omniauth_callbacks#passthru {:provider=>/(?!)/}
user_omniauth_callback      /v2/auth/:action/callback(.:format)          v2/users/omniauth_callbacks#(?-mix:(?!)) 
```

但是，当我尝试通过调用来访问此路由时`api.localhost/v2/auth/facebook`，出现路由错误：

```
ActionController::RoutingError (No route matches [GET] "/v2/auth/facebook") 
```

知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-21T12:35:52.557

您在路由中缺少提供者名称，因此它们`facebook`与`/v2/auth/facebook`. 正确的路线目的地应该类似于`v2/users/omniauth_callbacks#(?-mix:facebook)`.

您是否在用户模型中指定了提供者？

```
devise_for ..., :omniauthable, :omniauth_providers => [:facebook] 
```

作为记录，我正在使用 Rails 3.2 和 Devise 3.0 并且更改后的路线似乎有效（我还没有进一步查看是否会出现其他问题）。

# matlab - Matlab，不用simulink研究非线性系统

> ID：13145626
> 
> 赞同：0
> 
> 时间：2012-10-30T18:41:41.553
> 
> 标签：matlab, linearization

如何使用 matlab（不使用 Symulink）研究非线性动态系统？

例如，如何围绕一个点线性化系统，或者如何确定平衡点的性质？

谢谢

* * *

例如，我怎样才能解决[这个](http://control.lth.se/media/Education/EngineeringProgram/FRTN05/2012/exercises/compendium.pdf)练习 1 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T18:52:23.780

您可以尝试其中一个僵硬的求解器，例如`ode23s`或 `ode23tb 这是另一个可能有帮助的[链接......](http://jitkomut.lecturer.eng.chula.ac.th/matlab/dynamics.html)

# delphi - LogonUser + CreateProcessAsUser at Service = 错误 1314

> ID：13145632
> 
> 赞同：1
> 
> 时间：2012-10-30T18:42:10.910
> 
> 标签：delphi

我有一个使用 Delphi 7 创建的 Windows 服务，StartType = stSystem。

现在我需要启动一个应用程序来为我做一些事情。此应用程序具有 MainForm 和其他 GDI 资源。传递给应用程序的参数为某些控件（如编辑和备忘录）分配值，然后单击按钮......

我正在尝试这个：

```
var
  token: cardinal;
  si: TStartupInfo;
  pi: TProcessInformation;
begin
  if not LogonUser('admintest', '', 'secret123', LOGON32_LOGON_INTERACTIVE, LOGON32_PROVIDER_DEFAULT, token) then
    RaiseLastOSError;

  try
    if not ImpersonateLoggedOnUser(token) then
      RaiseLastOSError;

    fillchar(si, sizeof(si), 0);
    si.cb := sizeof(si);
    si.lpDesktop := PChar('winsta0\default');
    if not CreateProcessAsUser(token, nil, '"c:\...\myapp.exe" -doCrazyThings', nil, nil, false, NORMAL_PRIORITY_CLASS or CREATE_NEW_CONSOLE, nil, nil, si, pi) then
      RaiseLastOSError;

    CloseHandle(pi.hThread);
    waitForSingleObject(pi.hProcess, INFINITE);
    CloseHandle(pi.hProcess);
  finally
    CLoseHandle(token);
  end;
end; 
```

**当我将我的服务可执行文件作为普通应用程序 (-noservice) 运行时，它作为 Forms.Application 启动并创建一个带有“开始”按钮的 MainForm。** **该按钮运行的代码与服务运行的代码相同，但它不起作用，并且在 createprocessasuser 处引发错误代码 1314。**

**为什么？SYSTEM服务与管理员启动的普通应用程序有什么区别？**

我的环境是 Windows 7 Pro x64

我究竟做错了什么？我该如何解决这个问题？有人可以发布一个例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T18:56:38.163

错误 1314 是`ERROR_PRIVILEGE_NOT_HELD`，这意味着您的调用线程缺少运行所需的权限`CreateProcessAsUser()`。您不需要也不应该冒充用户令牌来在用户桌面上启动新进程。在调用`CreateProcessAsUser()`. 它将确保新进程在您的用户帐户和桌面内运行，因此摆脱对的调用`ImpersonateLoggedOnUser()`并查看是否`CreateProcessAsUser()`开始工作。

**更新**：[阅读文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682429.aspx)：

> 通常，调用 CreateProcessAsUser 函数的进程必须具有 SE_INCREASE_QUOTA_NAME 权限，并且如果令牌不可分配，则可能需要 SE_ASSIGNPRIMARYTOKEN_NAME 权限。如果此函数因 ERROR_PRIVILEGE_NOT_HELD (1314) 而失败，请改用 CreateProcessWithLogonW 函数。CreateProcessWithLogonW 不需要特殊权限，但必须允许指定的用户帐户以交互方式登录。通常，最好使用 CreateProcessWithLogonW 创建具有备用凭据的进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T18:46:23.983

在 Vista 和更高版本上，Windows 服务在会话 0 中运行。交互式用户存在于会话 1 和更高版本中。这意味着 Windows 服务无法显示用户界面，并且确实无法在交互式会话中轻松启动进程。

现在，有一些方法可以[从服务启动交互式进程](http://blogs.msdn.com/b/winsdk/archive/2009/07/14/launching-an-interactive-process-from-windows-service-in-windows-vista-and-later.aspx)。如果您对从您的服务启动交互式流程一无所知，那么该文章会告诉您所有您需要知道的信息。但是这样的技术非常棘手，绝对不推荐。建议您找到一种不同的方式在您的服务和交互式桌面之间进行通信。

正常的方法是运行一个标准的桌面应用程序，可能是使用`HKLM\Software\Microsoft\Windows\CurrentVersion\Run`. 并使用某种形式的 IPC 在桌面应用程序和服务之间进行通信。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T20:00:38.827

您应该创建服务来完成后台工作，并且 GUI 应用程序应该只调用该服务。IE 你总是有一个服务在运行。

考虑在后端使用 DataSnap 的东西。MVC 方法在 Delphi 中并不像在其他一些语言中那样纯粹。控制器去任何方便的地方。数据集主要是一种折衷方案，唯一真正快速的数据处理方法是使用 DBexpress 和客户端上的一些组件来保持一切顺利。但它有效，值得学习。

服务不能有 gui 控件。不允许 TForm 后代。仅限 TService。Delphi Projects / Service Application 下的新项目。您将获得一个具有与数据模块几乎相同的单元/表单的项目。即，不允许视觉控制。原因很明显。您需要学习记录、对象设计等才能使用服务。Datasnap 是您最好的选择。它为您完成了大部分艰苦的工作。

Bob 博士有一本关于 XE2/3 的很好的书。如果您是面向对象设计的新手，您需要先彻底了解这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T14:13:47.450

这是我用来做这种事情的代码

```
procedure CreateNewProcess;
var
  CmdLine: AnsiString;
  ErrorCode: Cardinal;
  ConnSessID: Cardinal;
  Token: Cardinal;
  App: AnsiString;
  FProcessInfo: _PROCESS_INFORMATION;
  FStartupInfo: _STARTUPINFOA;
begin
  ZeroMemory(@FStartupInfo, SizeOf(FStartupInfo));
  FStartupInfo.cb := SizeOf(FStartupInfo);
  FStartupInfo.lpDesktop := nil;

  ConnSessID := WTSGetActiveConsoleSessionId;

  if WTSQueryUserToken(ConnSessID, Token) then
  begin
    if CreateProcessAsUser(Token, PAnsiChar(App), PAnsiChar(CmdLine),
      nil, nil, false, 0, nil, nil, FStartupInfo, FProcessInfo) = False
    then
    begin
      ErrorCode := GetLastError;
      try
        RaiseLastOSError(ErrorCode);
      except on E: Exception do
        EventLog.LogError(e.ClassName +': '+ e.Message);
      end;
    end;
  end;
end; 
```

希望这可以帮助

如果您希望服务在继续添加之前等待新进程终止

```
 if CreateProcessAsUser(Token, PAnsiChar(App), PAnsiChar(CmdLine),
      nil, nil, false, 0, nil, nil, FStartupInfo, FProcessInfo) = False
    then
    begin
      ErrorCode := GetLastError;
      try
        RaiseLastOSError(ErrorCode);
      except on E: Exception do
        EventLog.LogError(e.ClassName +': '+ e.Message);
      end;
    end
    else
      WaitForSingleObject(FProcessInfo.hProcess, INFINITE); 
```

尽管无限等待可能是不可取的。

# performance - 一个数的除数不小于另一个数

> ID：13145636
> 
> 赞同：2
> 
> 时间：2012-10-30T18:42:18.820
> 
> 标签：performance, algorithm, math, prime-factoring

是否有任何有效的方法来找到一个数字（比如 n）的除数不小于另一个数字（比如 m）。n 可以达到 10^12。我考虑了筛算法然后找到除数的数量。我的方法检查从 m 到 n 平方根的所有数字。但我认为还有另一种方法（有效）可以做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T19:31:33.683

如果你知道质因数，就很容易找到一个数的除数；只取所有因素的多重性的所有可能组合。

对于小到 10^12 的*n*，试除法应该是一种足够快的因式分解方法，因为您只需检查高达 10^6 的潜在因子。

编辑：添加关于“所有可能的组合”的讨论以及按试验部门分解。

考虑数字 24505 = 5 * 13 * 13 * 29。要枚举它的除数，请取所有因子的多重性的所有可能组合：

```
5^0 * 13^0 * 29^0 = 1
5^0 * 13^0 * 29^1 = 29
5^0 * 13^1 * 29^0 = 13
5^0 * 13^1 * 29^1 = 377
5^0 * 13^2 * 29^0 = 169
5^0 * 13^2 * 29^1 = 4901
5^1 * 13^0 * 29^0 = 5
5^1 * 13^0 * 29^1 = 145
5^1 * 13^1 * 29^0 = 65
5^1 * 13^1 * 29^1 = 1885
5^1 * 13^2 * 29^0 = 845
5^1 * 13^2 * 29^1 = 24505 
```

通过试用部门计算一个数字也不难。这是算法，您可以将其翻译成您喜欢的语言；对于高达 10^12 的数字，它足够快：

```
function factors(n)
    f = 2
    while f * f <= n
        if n % f == 0
            output f
            n = n / f
        else
            f = f + 1
    output n 
```

让我们看一下 24505 的因式分解。最初*f*是 2，但是 24505 % 2 = 1，所以*f*递增到 3。然后*f* = 3 和*f* = 4 也无法除*n*，但是 24505 % 5 = 0，所以 5是 24505 的因数，*n*减少到 24505 / 5 = 4901。现在*f* = 5 不变，但它不能除*n*，同样是 6、7、8、9、10、11 和 12，但最后是 4901 % 13 = 0，所以 13 是 4901 的因数（也是 24505），*n*减少到 4901 / 13 = 377。此时*f* = 13 不变，13 又是一个除数，这次减少的*n* = 377，所以另一个因子 13 是输出和*n*减为 29。此时 13 * 13 = 169 大于 29，所以`while`循环退出，输出最终的因子 29；这是因为如果*n=pq*，那么*p*或*q之一必须小于**n*的平方根（除了*p*和*q*相等且*n*是完美平方的情况），并且因为我们已经完成了试除法由所有*p*和*q*小于 29 的平方根，它必须是素数，因此是最终因子。所以我们看到 24505 = 5 * 13 * 13 * 29。

[我在我的文章](http://programmingpraxis.com/essays) *Programming with Prime Numbers*中讨论了这些算法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T23:32:10.203

下面是一个示例程序，它计算 n 的大于 m 的除数的数量。如果有 c 个除数，则 largeDivs() 代码在 O(c) 时间内运行。largeDivs() 也以 n 表示为因式数，其中 nset 是形式对 (p_i, k_i) 的列表，使得 n = Product{p_i**k_i for i in 1..h}。一些示例输出显示在程序之后。check() 例程用于证明 largeDivs() 产生正确的结果。对于较小的 m 值， check() 需要很长时间。

```
def largeDivs(n, nset, m):
    p, k = nset[-1]
    dd = 0
    if len(nset) > 1:
        nn, mm = n / p**k, m
        for i in range(k+1):
            dd += largeDivs(nn, nset[:-1], mm)
            mm = (mm + p-1)/p
    else:
        c, v = k+1, 1
        while v<m and c>0:
            c, v = c-1, v*p
        return c
    return dd

def check (n,m,s):
    if m<1:
        return s
    c = 0
    for i in range(m,n+1):
        if (n%i)==0:
            c += 1
    return c

tset = [(2,3),(3,2),(11,1),(17,1),(23,2)]
n = s = 1
for i in tset:
    s *= 1+i[1]
    n *= i[0]**i[1]
print 'n=',n, '  s=',s
m=0
for i in range(8):
    print 'm:', m, '\t', largeDivs(n, tset, m), '  Check:',check(n,m,s)
    m = 10*m + 5 
```

示例输出：

```
n= 7122456   s= 144
m: 0    144   Check: 144
m: 5    140   Check: 140
m: 55   124   Check: 124
m: 555  95   Check: 95
m: 5555     61   Check: 61
m: 55555    28   Check: 28
m: 555555   9   Check: 9
m: 5555555  1   Check: 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T19:54:24.383

这取决于应用程序，但如果性能是这样一个问题，我会使用预先生成的哈希表。显然，将 10^12 个条目存储在内存中可能是不切实际的（或至少是不可取的），所以我会进行第 k 个素数的除法测试，*只*^(为不能被前)*k*个素数整除的数字生成哈希表条目。

例如，虽然写得很粗糙且未经测试，但这应该给你一个想法：

```
int   number   = 23456789;
int   primes[] = {2, 3, 5, 7, 11, 13, 17, 19, 0};
int   pfactors = 0;
int*  prime = primes;
float temp;

// check until we reach the end of the array (0)
while (prime)
{
    // divide by prime and check if result is integer
    temp = (float)number/*prime;
    if (temp == floor(temp))
    {
        // if so, increment count of prime factors and loop (same prime again!)
        pfactors++;
        number = (int)temp;
    }
    else
    {
        // else try the next prime
        prime++;
    }
}

// finally, rely on hash table magic
pfactors += pregenerated_hash[number]; 
```

# java - Mahout：将一个大文本文件转换为 SequenceFile 格式

> ID：13145638
> 
> 赞同：1
> 
> 时间：2012-10-30T18:42:33.723
> 
> 标签：java, mahout, sequencefile

我在网上为此做了很多搜索，但我什么也没找到，尽管我觉得它必须有点普遍。我过去曾使用 Mahout 的 seqdirectory 命令来转换包含文本文件的文件夹（每个文件都是一个单独的文档）。但是在这种情况下，文档太多（100,000 多个），以至于我有一个非常大的文本文件，其中每一行都是一个文档。如何将这个大文件转换为 SequenceFile 格式，以便 Mahout 理解每一行都应该被视为一个单独的文档？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:20:01.437

是的，如何做到这一点并不是很明显或很直观，尽管（你很幸运：P）我已经在堆栈中多次回答了这个确切的问题，例如[***这里***](https://stackoverflow.com/questions/11994930/converting-csv-to-sequencefile/12001297#12001297)。看一看 ;）

# javascript - 如何使用 For 循环创建不同的 ID 名称。？

> ID：13145639
> 
> 赞同：-1
> 
> 时间：2012-10-30T18:42:36.713
> 
> 标签：javascript

```
window.onload = function()
{   
new JsDatePick({
useMode:2,
target:"inputField1", //HERE I WOULD LIKE TO PASS DIFFERENT ID ex. "inputField1"+ "i"
dateFormat:"%Y-%M-%d",
yearsRange:[1978,2120],
limitToToday:false,
cellColorScheme:"beige",
imgPath:"main/img/",
weekStartDay:1
});
}; 
```

在 inputField1 的目标替换中，我想要 inputField1、inputField2、inputField3 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:51:35.373

```
for(i=0;i<5;i++) {
    temp = "inputField"+i;
    window.onload = function() {   
        new JsDatePick({
            useMode: 2,
            target: temp,
            dateFormat: "%Y-%M-%d",
            yearsRange: [1978,2120],
            limitToToday: false,
            cellColorScheme: "beige",
            imgPath: "main/img/",
            weekStartDay: 1
        });
    };
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T20:39:23.390

```
window.onload = function()
{   
var i = <?=$totalNumberOfInputs;?>

for(j=1;j<=i;j++) {  
    new JsDatePick({
        useMode:2,
        target:"inputField" + j, //HERE I WOULD LIKE TO PASS DIFFERENT ID ex. "inputField1" + j
        dateFormat:"%Y-%M-%d",
        yearsRange:[1978,2120],
        limitToToday:false,
        cellColorScheme:"beige",
        imgPath:"main/img/",
        weekStartDay:1
    });
} 
```

}

这是我另一个问题的答案 谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T18:54:32.423

为输入字段使用一个类，如 class="inputfield" 并使用循环创建 html 然后在 javascript 中。

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script src="jquery_urdu_editor/jquery.js" type="application/javascript"></script>
<link rel="stylesheet" type="text/css" media="all" href="jsdatepick-calendar/jsDatePick_ltr.min.css" />
<script type="text/javascript" src="jsdatepick-calendar/jsDatePick.min.1.3.js"></script>
<script type="application/javascript">
 window.onload = function()
    {   
      $('.inputfield').each(function() {
         var thisId = $(this).attr('id');
            //document.write(thisId.'<br />');
         new JsDatePick({
             useMode:2,
             target:thisId,    // putting the id of this element.                    
             dateFormat:"%Y-%M-%d",
             yearsRange:[1978,2120],
             limitToToday:false,
             cellColorScheme:"beige",
             imgPath:"main/img/",
             weekStartDay:1
        });
    });
   };
</script>
</head>

<body>
<?php
    for($i=1;$i<=6;$i++){
        echo '<input type="text" name="textfield'.$i.'" class="inputfield" id="textfield'.$i.'" value="" ><br />';

    }
?>
</body>
</html> 
```

在 javascript 代码中，我们获取元素的 ID 及其类，然后将该 ID 放入日历代码中。因此它适用于具有该类的任意数量的输入字段。希望它可以帮助你。

# python - 转换为列表理解

> ID：13145648
> 
> 赞同：0
> 
> 时间：2012-10-30T18:43:06.853
> 
> 标签：python

这是我的python代码

```
mylist = ['a', 'f', 'z']
old_d = {'a': 'aaa', 'b': 'bbb', 'c': 'ccc', 'f': 'fff', 'g':'ggg', 'z':'zzz'} 
new_d = {}
for key in mylist:
    new_d[key] = old_d[key] 
```

我们可以使用列表推导或类似的东西来编写上面的代码吗

```
new_d[key] = old_d[key] for key in mylist 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T18:45:38.243

在 Python 2.7 及更高版本中，您可以使用 dict 理解：

```
new_d = {key: old_d[key] for key in myList} 
```

在 Python 2.6 及更低版本中，您没有 dict 理解必须`dict`与生成器或列表理解一起使用：

```
new_d = dict((key, old_d[key]) for key in myList) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T18:46:42.203

```
new_d = {key: old_d[key] for key in mylist} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T18:45:06.887

您可以在 Python 2.7 和更高版本上使用 dict 理解：

```
new_d = {k: old_d[k] for k in mylist} 
```

# jquery - 一键显示/隐藏div元素

> ID：13145653
> 
> 赞同：7
> 
> 时间：2012-10-30T18:43:22.470
> 
> 标签：jquery, html

我最近一直在研究 jquery，并且喜欢在触发事件时如何显示/隐藏元素。我尝试向我的测试网站添加一个简单的功能，当单击登录按钮时将显示登录表单，然后如果再次单击该按钮则隐藏表单；我正在使用的 jquery 函数只工作一次（当我单击按钮并显示表单时）但在显示表单后，如果我再次尝试单击按钮，则没有任何反应。

jQuery代码：

```
function displayLoginBox(){

if ($("#login_Box_Div:hidden")){

        $("#login_Box_Div").show();
        $("#buttonLogin").css('color', '#FF0');

}
else if($("#login_Box_Div:visible")){

        $("#login_Box_Div").hide(); 
        $("#buttonLogin").css('color','white');
}
} 
```

HTML按钮代码：

```
<h3> <a href= "#">Pictio  </a> <button id = "buttonLogin" onclick = "displayLoginBox()">LogIn</button></h3> 
```

HTML div 代码：

```
<div id = "login_Box_Div"> 
        <form name = "myform" > 
            <input type = "text" name = "username" placeholder = "Username"  />
            <input type = "password" name = "password" placeholder= "Password" />
            <input type = "submit" id = "submitLogin" />
        </form>

</div> 
```

我有一种感觉 jquery 脚本只运行一次然后就完成了，但我可能是错的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-30T18:46:40.380

尝试使用`.toggle()`

```
$('#buttonLogin').on('click', function(e){
    $("#login_Box_Div").toggle();
    $(this).toggleClass('class1')
});​

.class1
{
     color: orange;
}​ 
```

您可以使用`toggleClass()`来切换按钮的类

**[检查小提琴](http://jsfiddle.net/sushanth009/utaxK/1/)**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-30T18:47:33.310

无需使用内联 javascript。

`**[LIVE DEMO](http://jsbin.com/utakef/5/edit)**`

```
$('#buttonLogin').click(function(){
   $('#login_Box_Div').toggle();
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T18:56:05.253

你可以试试这个

```
$('#buttonLogin').on('click', function(e){
    $("#login_Box_Div").toggle();
    var color=$("#login_Box_Div").is(':hidden') ? '#FF0' : 'white';
    $("#buttonLogin").css('color', color);
}); 
```

[**例子**](http://jsfiddle.net/heera/VqwCU/1/)。

## 更新：

或者使用`togglrClass`你可以试试这个

```
$('#buttonLogin').on('click', function(e){
    $("#login_Box_Div").toggle();
    $("#buttonLogin").toggleClass('whiteColor yelolowCollor');
}); 
```

[**例子**](http://jsfiddle.net/heera/VqwCU/2/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-24T06:31:32.453

如果您愿意，可以使用此代码，它帮助我实现了同样的目标。

```
$("button").click(function(){
$("div").toggle(function(e) {
        if ($(this).is(":visible")) {
            $("div").show();
            $("button").css('color', 'red');
        }
        else {
            $("div").hide(); 
            $("button").css('color','white');
        };
    });
}); 
```

我只使用一个 div 和一个没有 id 的按钮。希望它对您的事业有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T19:00:27.570

使用`$('login_Box_Div').is(':hidden')`和`$('login_Box_Div').is(':visible')`

您也不应该使用内联 javascript。这是它的一个 jsfiddle [http://jsfiddle.net/MrsW8/](http://jsfiddle.net/MrsW8/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-30T18:46:30.973

试试 jQuery 的[切换](http://api.jquery.com/toggle/)功能来完成这个

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-30T18:50:28.670

JS

```
function displayLoginBox(elem){

 $("#login_Box_Div").toggle();
 $(elem).toggleClass('login_clicked');

} 
```

CSS

```
#buttonLogin{color: #fff;}
.login_clicked{color: #FF0 !important;} 
```

HTML

```
<h3> <a href= "#">Pictio  </a> <button id = "buttonLogin" onclick = "displayLoginBox(this)">LogIn</button></h3> 
```

这种方法也改变了登录按钮的颜色。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-30T18:52:43.513

[尝试这个：](http://api.jquery.com/toggle/)

```
function displayLoginBox(){
    $("#login_Box_Div").toggle(function(e) {
        if ($(this).is(":visible")) {
            $("#login_Box_Div").show();
            $("#buttonLogin").css('color', '#FF0');
        }
        else {
            $("#login_Box_Div").hide(); 
            $("#buttonLogin").css('color','white');
        };
    });
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-30T18:54:21.570

`:hidden`和选择器是过滤器，而`:visible`不是布尔方法。

这意味着：当你在测试时

```
if ($("#login_Box_Div:hidden")){ 
```

...你得到的`$("#login_Box_Div:hidden")`是一个 jQuery 对象——它总是存在，并且总是返回 true，即使里面什么都没有。

你需要做的是测试[`.length`](http://api.jquery.com/length)那个 jQuery 对象。如果为零，则 jQuery 对象为空：

```
if ($("#login_Box_Div:hidden").length){ // zero is false, greater than zero is true 
```

[http://jsfiddle.net/mblase75/ThwFs/](http://jsfiddle.net/mblase75/ThwFs/)

或者，使用该[`.is(selector)`](http://api.jquery.com/is)方法，它确实返回一个布尔（真/假）值：

```
if ($("#login_Box_Div").is(":hidden")){ 
```

[http://jsfiddle.net/mblase75/ThwFs/2/](http://jsfiddle.net/mblase75/ThwFs/2/)

虽然有很多方法可以简化您的代码，但这是您遇到的实际问题的答案。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-01-12T12:00:24.550

我正在使用 VueJs，它可以在一个按钮中隐藏/显示。当我点击按钮时，它会切换。
**例如：-**
如果显示为假，那么它将分配为真。
如果显示为真，那么它将分配为假。

```
<template>
    <div>
        <h1 v-if="show">Show</h1>
        <h1 v-else>Hide</h1>
        <button @click="show =! show">Toggle Heading</button>
    </div>
</template>

<script>
export default {
    name: 'Home',
    data() {
        return {
            show: true 
        }
    }
}
</script> 
```

# android - 如果微调器 android 中的下拉列表为空，我想输入文本

> ID：13145655
> 
> 赞同：-1
> 
> 时间：2012-10-30T18:43:27.867
> 
> 标签：android

我必须让一个 id 从微调器的下拉列表中选择。如果列表为空，我希望能够手动输入 id。这在android中怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T19:18:51.110

我不认为 Spinner 允许这样做，而且这也不是一个好的解决方案，因为手机屏幕很小。

您可以创建一个 ListView 列出所有现有项目，并在最顶部使用“创建新”项目。

或者，您可以在操作栏中使用加号图标或在菜单中使用菜单选项。

您可能想研究联系人应用程序 UI 以了解他们如何添加新联系人

# ruby-on-rails - 如何销毁一个表的所有记录，包括：其他表中的依赖记录

> ID：13145656
> 
> 赞同：8
> 
> 时间：2012-10-30T18:43:29.210
> 
> 标签：ruby-on-rails, heroku, console

在 Heroku 上执行此操作的最佳方法是什么？通过控制台？我确实为所有从属表设置了'dependent::destroy'。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-30T18:46:05.810

```
heroku run rails console

> Model.destroy_all 
```

Model 是要销毁的模型的名称

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-30T18:46:19.863

您可以使用：

```
Object.delete_all 
```

您还可以将 :dependent 选项设置为 :delete_all。:delete_all 将发出一条 SQL 语句来删除所有子记录。因此，使用 :delete_all 可能会给您带来更好的性能。

```
has_many :childs, :dependent => :delete_all 
```

# asp.net-mvc - 在 MVC3 应用程序中使用 OpenID/OpenAuth 并重写身份验证方法

> ID：13145666
> 
> 赞同：3
> 
> 时间：2012-10-30T18:44:05.717
> 
> 标签：asp.net-mvc, asp.net-mvc-3, oauth, openid, dotnetopenauth

我们通过使用用户的凭据调用 web 服务并返回包含用户 ID 的 WCF 结构，即“LogonTicket”来覆盖 MVC3 应用程序中的基本身份验证。此 LogonTicket 用于“为对 Web 服务的每次调用验证用户。

现在，我们通过替换 Web.config 中的 defaultProvider 来覆盖。我们在这个被覆盖的提供者中所做的就是覆盖 ValidateUser() 函数。这就是我们使用他们的凭据调用 Web 服务并返回“LogonTicket”的地方。

这是 AccountController 中的 LogOn() 函数，本质上是模板中的基本代码：

```
public ActionResult LogOn(LogOnModel model)
{
    string ReturnUrl = "";
    if (HttpContext.Request.UrlReferrer.Query.Length > 11)
    {
        ReturnUrl = Uri.UnescapeDataString(HttpContext.Request.UrlReferrer.Query.Substring(11));
    }
    if (ModelState.IsValid)
    {
        if (Membership.ValidateUser(model.UserName, model.Password))
        {
            FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
            if (Url.IsLocalUrl(ReturnUrl) && ReturnUrl.Length > 1 && ReturnUrl.StartsWith("/")
                && !ReturnUrl.StartsWith("//") && !ReturnUrl.StartsWith("/\\"))
            {
                return Redirect(ReturnUrl);
            }
            else
            {
                return RedirectToAction("Index", "Home");
            }
        }
        else
        {
            ModelState.AddModelError("", "The user name or password provided is incorrect.");
        }
    }

    // If we got this far, something failed, redisplay form
    ViewBag.MainWebsite = MainWebsite;
    return View(model);
} 
```

这是我们新的默认提供程序中重写的 ValidateUser() 函数：

```
public override bool ValidateUser(string username, string password)
{
    MyServiceClient mps = new MyServiceClient();
    string sha1password = HashCode(password);
    LogonInfo logonInfo = mps.GetLogonTicket(username, sha1password);
    if (logonInfo.LogonTicket != "" && logonInfo.LogonTicket != "0") 
    {
    // Authenticated so set session variables
        HttpContext.Current.Session["LogonTicket"] = logonInfo.LogonTicket;
        HttpContext.Current.Session["ParticipantID"] = logonInfo.ParticipantID;
        return true;
    }
    else
    {
        return false;
    }
} 
```

我不确定如何结合使用两者，所以我的问题是：

1.  如何实现 OpenID 和 Facebook 登录并保留当前的身份验证方法？
2.  我们如何将 OpenID 用户与我们当前的用户 DB 值“映射”？我们必须知道这样我们才能检索他们的信息。我知道我们可以检索他们的电子邮件地址，但如果他们的 OpenID 电子邮件与他们在我们网站上用于记录的电子邮件不同怎么办？
3.  是否有任何示例说明如何在任何地方执行此操作？

谢谢你看我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T13:53:10.583

我完成了一个需要多种登录可能性的项目（自定义帐户、Google 和 Facebook）

最后，您使用 ASP.NET 的身份验证完全取决于您的配置。（在您的情况下，它是 FormsAuthentication）这意味着`FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);`基本上确定了与您的用户有关的所有内容，并且您设置它的位置不受限制。

您现在与我们开始时的实现基本相同，使用 MembershipProvider 来处理您自己的自定义帐户。您现在只需要扩展以方便 openIds。您必须`Controller`为每种登录类型扩展各种操作（现在您`ActionResult LogOn()`可以添加到其中，例如：）`ActionResult LogOnOpenId()`。在该方法中，您基本上调用相同的代码，而不是`Membership.ValidateUser(model.UserName, model.Password)`调用 OpenId 服务。

我在下面提供了一个使用 dotnetopenauth 的 google 实现示例。服务方法使用`formsService.SignIn(userId.Value.ToString(), false);`基本调用的方法`FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);`（我们只对 SecurityPrincipal 进行一些自定义行为，但这不会影响您的身份验证过程）。您还可以看到我们在收到新用户时创建了一个新帐户。为了解决您的问题第 2 部分，我们实施了一个配置文件，如果您可以提供另一个登录名，该配置文件可以合并。这允许我们的用户保持他们的帐户合并并使用他们喜欢的任何登录方法。

关于多点登录的示例，我将参考 Tomas 的回答，他将 StackExchange 作为一个很好的示例。另外，我建议您安装 MVC4 和 VS2012，然后执行 File > New Project。MVC 的最新默认模板包括 openid 实现以及自定义登录！

**谷歌 openid 实现示例：**

控制器方法：

```
 public virtual ActionResult LoginGoogle(string returnUrl, string runAction)
    {
        using (var openId = new OpenIdRelyingParty())
        {
            IAuthenticationResponse response = openId.GetResponse();

            // If we have no response, start 
            if (response == null)
            {
                // Create a request and redirect the user 
                IAuthenticationRequest req = openId.CreateRequest(WellKnownProviders.Google);
                var fetch = new FetchRequest();
                fetch.Attributes.AddRequired(WellKnownAttributes.Name.First);
                fetch.Attributes.AddRequired(WellKnownAttributes.Name.Last);
                fetch.Attributes.AddRequired(WellKnownAttributes.Contact.Email);
                fetch.Attributes.AddRequired(WellKnownAttributes.Preferences.Language);
                req.AddExtension(fetch);

                req.RedirectToProvider();

                return null;
            }

            _service.ConnectViaGoogle(response, TempData);
    } 
```

服务方式：

```
 public void ConnectViaGoogle(IAuthenticationResponse response, TempDataDictionary tempData)
    {
        // We got a response - check it's valid and that it's me 
        if (response.Status == AuthenticationStatus.Authenticated)
        {
            var claim = response.GetExtension<FetchResponse>();
            Identifier googleUserId = response.ClaimedIdentifier;
            string email = string.Empty;
            string firstName = string.Empty;
            string lastName = string.Empty;
            string language = string.Empty;

            if (claim != null)
            {
                email = claim.GetAttributeValue(WellKnownAttributes.Contact.Email);
                firstName = claim.GetAttributeValue(WellKnownAttributes.Name.First);
                lastName = claim.GetAttributeValue(WellKnownAttributes.Name.Last);
                language = claim.GetAttributeValue(WellKnownAttributes.Preferences.Language);
            }

            //Search User with google UserId
            int? userId = _userBL.GetUserIdByGoogleSingleSignOnId(googleUserId);

            //if not exists -> Create
            if (!userId.HasValue)
            {
                _userBL.CreateGoogleUser(
                    googleUserId,
                    firstName,
                    lastName,
                    email,
                    language,
                    DBConstants.UserStatus.DefaultStatusId,
                    out userId);
            }

            if (userId.HasValue)
            {
                _userBL.UpdateLastLogon(userId.Value);
                var formsService = new FormsAuthenticationService();
                formsService.SignIn(userId.Value.ToString(), false);
                AfterLoginActions(tempData);
            }
        }
    } 
```

有任何问题或意见吗？我很乐意听到他们的声音。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T09:56:43.617

1.  完全有可能拥有多种身份验证方法。所有 IIS / ASP.net 关心的是 FormsAuthentication cookie。因此，您将为标准用户名/密码身份验证设置一组操作，并为 OpenId 设置另一组操作。这至少是我在一个项目中所做的。
2.  你甚至不能相信 openId 提供商会给你一个电子邮件地址！这个问题的一个常见解决方案是允许用户在登录后将多个 OpenId 标识符 (URI) 附加到他的帐户。这就是 StackOverflow 的工作方式。如果这是用户第一次访问系统，那么您可以自动创建一个新帐户，或强制用户完成注册过程。
    当我在提到的系统中添加 OpenId 支持时，它有一个用于存储用户名和密码的现有表（用户表）。我添加了一个与 users 表具有多对一关系的新表，并使用它来存储 URI。
3.  正如上面提到的 StackOverflow 本身是一个很好的起点，在[http://www.dotnetopenauth.net/](http://www.dotnetopenauth.net/)项目中也有很多很好的例子。据我所知，SO 的来源不是公开的，他们正在使用 dotnetopenauth 项目。
    这可能是抽象的，但这个库是开源果园 CMS 的 openId（除其他外）：http: [//orchardopenauth.codeplex.com/](http://orchardopenauth.codeplex.com/)

我希望这会有所帮助，但如果您有任何问题，请详细说明您的问题。

# drupal - 使用节点参考模块时，我如何填充用户字段？

> ID：13145668
> 
> 赞同：2
> 
> 时间：2012-10-30T18:44:14.513
> 
> 标签：drupal, drupal-nodes

我有一个引用节点类型 B（服务票证）的节点类型 A（设备）。创建新服务票证时，我有一个 CCK 字段，我可以从中选择此服务票证所属的用户（客户）。

然后，我单击反向链接创建一个新节点 A（设备），该节点具有 CCK 字段来记录服务票证所需的设备信息（品牌、型号、序列号等）。

我想做的是将 CCK 用户参考字段添加到节点类型 Equipment，该字段由节点类型 Service Ticket 中的用户参考字段自动填充。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T21:28:40.273

您应该能够使用模块[字段引用](http://drupal.org/project/field_reference)来完成此操作。

# gwt - GWT 复选框可选树

> ID：13145672
> 
> 赞同：2
> 
> 时间：2012-10-30T18:44:31.100
> 
> 标签：gwt

我正在使用 GWT 2.5 并且正在寻找一个 Tree 小部件，它允许我拥有一个由每个 TreeNode 相邻的复选框控制的多选模型。类似于[此处](http://www.jqwidgets.com/jquery-tree-with-checkboxes/)描述的 JQuery 插件，结果如下：

![在此处输入图像描述](../Images/e5cd81b713e78f651de9ec1cf05c4b19.png)

如您所料，我希望选中一个框会选择选中节点的所有子节点，如果未选中任何子节点，您将获得“半选中”图标（由“解决方案”节点显示） - - 所以我需要一个三态复选框。

这个小部件是否已经存在于 GWT 中，还是我需要自己编写代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T21:15:00.637

GWT 2.5 中没有支持此功能的默认小部件。您的选择：

1.  使用第三方库
2.  实现你自己的小部件

我曾经基于[CellTree](http://gwt.google.com/samples/Showcase/Showcase.html#!CwCellTree)实现我自己的，尽管它是可行的 - 它需要大量工作（自定义树模型、带有渲染器的单元小部件和值更新器-s）。如果您灵活地选择库 - 请查看 Smart GWT 的[复选框树](http://www.smartclient.com/smartgwt/showcase/#tree_checkbox)。

# python - python 中的 Cron 解析器和验证

> ID：13145675
> 
> 赞同：10
> 
> 时间：2012-10-30T18:44:43.063
> 
> 标签：python, django, cron

我目前正在 python 中运行一个 django web 应用程序，我将用户输入的 cron 条目存储到数据库中。我想知道是否有任何 python 库/包可以在我将这些条目存储到数据库之前对其进行验证。通过验证我的意思是正确的语法以及正确的范围（例如：月份不能是 15）。有没有人有什么建议？谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-30T19:48:59.117

Croniter软件包似乎可以满足您的需求[。](http://pypi.python.org/pypi/croniter/)文档中的示例：

```
>>> from croniter import croniter
>>> from datetime import datetime
>>> base = datetime(2010, 1, 25, 4, 46)
>>> iter = croniter('*/5 * * * *', base)  # every 5 minites
>>> print iter.get_next(datetime)   # 2010-01-25 04:50:00
>>> print iter.get_next(datetime)   # 2010-01-25 04:55:00
>>> print iter.get_next(datetime)   # 2010-01-25 05:00:00
>>>
>>> iter = croniter('2 4 * * mon,fri', base)  # 04:02 on every Monday and Friday
>>> print iter.get_next(datetime)   # 2010-01-26 04:02:00
>>> print iter.get_next(datetime)   # 2010-01-30 04:02:00
>>> print iter.get_next(datetime)   # 2010-02-02 04:02:00 
```

根据[代码](https://github.com/taichino/croniter/blob/master/croniter/croniter.py)，它似乎也对输入的格式进行验证。您可能已经遇到过这个问题，但以防万一:)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2020-05-28T20:22:17.643

由于接受的答案很老，所以同一个库`croniter.is_valid()`现在有一个方法。来自[文档](https://pypi.org/project/croniter/#usage)：

```
>>> croniter.is_valid('0 0 1 * *')  # True
>>> croniter.is_valid('0 wrong_value 1 * *')  # False 
```

# r - 函数内的子集

> ID：13145678
> 
> 赞同：2
> 
> 时间：2012-10-30T18:44:56.293
> 
> 标签：r

我正在尝试使用固定变量和在函数中创建的一些变量的混合来对函数中的数据框进行子集化（我只知道变量名称，但不能事先对它们进行矢量化）。这是一个简化的示例：

```
a<-c(1,2,3,4)
b<-c(2,2,3,5)
c<-c(1,1,2,2)
D<-data.frame(a,b,c)

subbing<-function(Data,GroupVar,condition){
  g=Data$c+3
  h=Data$c+1
  NewD<-data.frame(a,b,g,h)
  subset(NewD,select=c(a,b,GroupVar),GroupVar%in%condition)
} 
```

请记住，在我的应用程序中，我无法在函数之外计算 g 和 h。有时我想根据 h 的值（如上）进行选择，有时我想使用 g。也有可能我想同时使用两者，但即使只是能够使用 1 进行子集化也会很棒。

```
subbing(D,GroupVar=h,condition=5) 
```

这将返回一个错误，指出找不到对象 h。我尝试使用 as.formula 和各种方法修改子集，但每次都失败了。

除了函数的易用性之外，还有一个我想使用子集的原因。

在我实际工作的函数中，我使用了两次子集。第一次是简单的子集函数。下面刚刚指出，另一个博客探讨了如何最好地使用好的旧数据[colnames()=="g",]。谢谢你的建议，我去试试。

然而还有另一个问题。我还在函数中使用了子集（或更确切地说是变体），因为我正在处理几个复杂的设计调查（请参阅包调查），因此子集.survey.design 允许您获得子组的正确方差估计。如果我使用 [] 选择我的组，我的参数会出现错误的 se，所以我想这是一个非常重要的问题。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T19:01:22.637

当函数一开始就试图定义它时，它就发生`GroupVar`了。R 正在自己寻找对象`h`（不在数据框中）。

最好的办法是引用`subset`函数中引号中的列名。但是，当然，那么您必须回避条件部分：

```
subbing <- function(Data, GroupVar, condition) {
   ....
   DF <- subset(Data, select=c("a","b", GroupVar))
   DF <- DF[DF[,3] %in% condition,]
} 
```

这样就可以解决问题，尽管将一个数据框索引在另一个数据框内可能会很烦人。

# eclipse - //$FALL-THROUGH$ 在 Eclipse 中做了什么？

> ID：13145679
> 
> 赞同：4
> 
> 时间：2012-10-30T18:44:57.790
> 
> 标签：eclipse

`//$FALL-THROUGH$`Eclipse 中的注释是什么 意思？我做了谷歌，但找不到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T18:46:52.207

它抑制了一个警告，告诉你没有`break;`来自 that `case`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T05:56:40.520

查看[Eclipse 3.5 发布新闻](http://archive.eclipse.org/eclipse/downloads/drops/R-3.5-200906111540/eclipse-news-part2.html)。它在那里显示（您搜索“fall”）。它适用于您无法使用`@SuppressWarnings("fallthrough")`.

# c++ - 如何在 Sublime Text 2、Windows 8 中构建和运行 c++ 程序？

> ID：13145684
> 
> 赞同：11
> 
> 时间：2012-10-30T18:45:05.000
> 
> 标签：c++, compiler-construction, build-process, sublimetext2

我使用 mingw 安装了 Codeblocks，选择了默认编译器，并且可以构建和运行一个简单的 hello 程序而不会出错。

我安装了 Sublime Text 2，复制粘贴了相同的 hello world 程序：

```
// my first program in C++
#include <iostream>

using namespace std;

int main ()
{
    cout << "Hello World!";
    return 0;
} 
```

构建后，我收到错误消息：

```
[Error 2] The system cannot find the file specified
[cmd:  [u'bash', u'-c', u"g++ '' -o '/' && '/'"]]
[dir:  C:\Windows\system32]
[path: C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\]
[Finished] 
```

为了使用 Sublime Text 2 构建和运行一个简单的程序，我需要做什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T02:13:06.370

首先，确保在构建和运行之前，将正在处理**的文件保存在驱动器上的任何位置。**

Sublime Text 2 需要 g++、bash 等才能编译。这些软件包需要按照此页面上的说明安装在您的计算机上：

[http://mjiang.com/mec/cs244/files/Installing%20c++_g++_on_Windows.pdf](http://mjiang.com/mec/cs244/files/Installing%20c++_g++_on_Windows.pdf)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T01:54:15.567

You could use my working C++.sublime-build file for Windows: [https://gist.github.com/trietptm/4950038](https://gist.github.com/trietptm/4950038)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-21T18:24:05.213

**对于 WINDOWS：**

如果你有 Dev C++ (Bloodshed) 那么，

打开**SUBLIME TEXT 2**并创建一个新文件来编写您的代码（通过将构建系统更改为 c++，`Tools> Build System> C++`因为**SublimeText2**不附带`build-system for c`）

之后，将该文件保存到文件`bin`夹中包含的`Dev-Cpp`文件夹中，然后按`ctrl+b`

如果您的代码是正确的（没有错误），那么您将`.exe`在同一目录中找到相应的文件（格式），该文件将显示给您

> 你好世界！

***记住：SUBLIME TEXT 2 是编辑器，而不是编译器***

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-04T03:31:42.730

只需创建新的构建系统（工具->构建系统->新构建系统）

```
{
"windows":
{
"cmd": ["g++", "$file_name","-o", "${file_base_name}.exe", "-lm", "-Wall", "&","start", "${file_base_name}.exe"]
},
"selector": "source.c++",
"shell": true,
"working_dir": "${file_path}"
} 
```

并将其保存为 (name_you_can_provide).sublime-build 并使用该构建系统。:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-14T17:41:29.833

（我假设你已经在你的电脑上安装了 MingW。）

你需要去 **Preferences->Browse Packages->C++ folder->C++.sublime-build;** 将此**C++.sublime 构建**文件带入 sublime 文本编辑器，现在粘贴此代码：

```
{ "cmd": ["g++", "$file", "-o", "$file_base_name"], "selector": "source.c++", "working_dir": "$file_path", "variants": [ { "name": "Run", "cmd": ["g++", "$file", "-o", "$file_base_name", "&&", "$file_path/$file_base_name"], "shell": true } ]
} 
```

希望这对您有所帮助。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-14T10:30:30.673

您必须安装 MinGW，然后将 MinGW 的路径添加到 PATH 变量。

# android - 将 Android 网络摄像头视频实时发送到服务器

> ID：13145688
> 
> 赞同：1
> 
> 时间：2012-10-30T18:45:17.700
> 
> 标签：android, upload, stream, webcam, live

我正在尝试编写一个能够打开网络摄像头并将录制内容实时上传到另一台服务器的 Android 应用程序。

现在我只找到了 Android 在其端口上提供流而不是发送它的解决方案。所以为了澄清，我想将数据发送到服务器（上传）。

我不想使用封闭源程序，而是自己编程。我有一些中等的 android 编程知识，但是缺少关于如何实现这一点的理论知识。

谁能指出我正确的方向。这甚至可能吗？

问候

**编辑：** 也许某种 RTP/RTSP 设置是可能的。我不关心 android 版本的兼容性。所以这个方向的一切都是受欢迎的。

**Edit2：** 很抱歉一开始就不清楚。我必须自己实现它，但我可以使用现有代码。我不能做的是使用已经闭源的实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:52:40.083

使用`MediaRecorder`，您可以将视频捕获到文件中。这是一个关于它的帖子，

[Android：有人知道如何捕捉视频吗？](https://stackoverflow.com/questions/1032912/android-does-anyone-know-how-to-capture-video)

要将其“流式传输”到服务器，您可以录制一系列（永无止境的）短视频，例如每个 10 秒，然后将这些块上传到服务器。如果您想变得花哨，可以让服务器将它们缝合在一起。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-30T21:06:47.890

安装 Bambuser。询问他们有什么意图可以启动它。完毕。

如果您真的需要将视频存储在自己的服务器上，也许您可​​以与 Bambuser 进行某种安排。

# .htaccess - mod_rewrite url 中的特殊字符

> ID：13145689
> 
> 赞同：1
> 
> 时间：2012-10-30T18:45:18.057
> 
> 标签：.htaccess, url-rewriting

我想要这个网址：

```
http://www.mydomainblabla.com/s/can+you+drill+shrinky+dinks?.html 
```

改写成这个：

```
http://www.mydomainblabla.com/search.php?q=can+you+drill+shrinky+dinks? 
```

我在我的 .htaccess 中使用这个 mod_rewrite 规则来完成这个

```
RewriteRule ^s/(.+).html$ search.php?q=$1 [L,QSA] 
```

但是，结果不是我想要的，当我转到第一个 url 时，我收到一条找不到页面的消息。

当我访问此网址时，也会出现同样的问题：

```
http://www.mydomainblabla.com/s/http://www.zakgeldnodig.nl/.html 
```

应该改写成这个：

```
http://www.mydomainblabla.com/search.php?q=http://www.zakgeldnodig.nl/ 
```

我应该对我的 .htaccess 进行哪些修改才能使其正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:14:04.587

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+s/(.+?)\.html [NC]
RewriteRule ^ search.php?q=%1 [L,NE] 
```

# java - Solr 如何在重启之间保持索引数据

> ID：13145690
> 
> 赞同：2
> 
> 时间：2012-10-30T18:45:19.837
> 
> 标签：java, solr, lucene

我是 Solr 新手，几乎没有关于 SOlr/lucene 的问题

1) solr 如何在重启和重启之间保留索引数据

2）如何在集群环境中共享数据

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T04:08:34.660

Solr 将[索引数据保存在文件](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_0/fileformats.html)中，这些文件存储在配置文件中提到的[数据目录中。](http://wiki.apache.org/solr/SolrConfigXml#dataDir_parameter)
每当您在 solr 上执行 Commit 时，数据都会保留。
当 Solr 重新启动时，它会重新加载文件以取回索引。

对于复制数据，您需要 Solr 复制以在多个服务器上拥有相同的数据副本。
您还可以检查[SolrCloud](http://wiki.apache.org/solr/SolrCloud)以了解 Solr 的分布式功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:49:48.210

为了回答您的部分问题，Solr 索引存储在您的本地目录中 Solr 配置中指定的路径中，如下所示：

```
 <dataDir>/var/data/solr</dataDir> 
```

从该位置重新开始加载索引信息。

参考

[http://wiki.apache.org/solr/SolrConfigXml](http://wiki.apache.org/solr/SolrConfigXml)

# ruby-on-rails - Ruby on Rails：添加新路线

> ID：13145696
> 
> 赞同：6
> 
> 时间：2012-10-30T18:45:44.110
> 
> 标签：ruby-on-rails, ruby

我是 RoR 的新手，所以这是一个新手问题：
如果我有一个控制器`users_controller.rb`并且我添加了一个方法`foo`，它不应该创建这条路线吗？

> [http://www.localhost:3000/users/foo](http://www.localhost:3000/users/foo)

因为当我这样做时，我得到了这个错误：

> 找不到 id=foo 的用户

我当然添加了一个视图`foo.html.erb`

**编辑：**
我添加到`routes.rb`这段代码，但我得到了同样的错误：

```
resources :users do
    get "signup"
  end 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-30T18:47:53.373

这在 rails 3 中不会自动工作。您需要添加

```
resource :users do
    get "foo"
end 
```

到你的 routes.rb

你肯定想看看[http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)，它很好地解释了路由。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-30T18:49:04.797

Rails 将您引导至显示控制器，并认为您将 foo 作为 :id 参数提供给显示操作。

您需要在 users#show 中设置一个将在匹配为 /users/:id 之前调度的路由

您可以`config/routes.rb`通过添加以下内容来替换现有资源描述来完成此操作`:users`

```
resource :users do
    get "foo"
end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-30T19:07:45.767

只是为了添加其他答案，在早期版本的 Rails 中曾经有一个默认路由

```
match ':controller(/:action(/:id))(.:format)' 
```

它给出了您描述的行为，表单*控制器/动作*的请求将在给定控制器上调用给定方法。此行仍然存在，`routes.rb`但默认情况下已注释掉。您可以取消注释以启用此行为，但上面的注释解释了为什么不建议这样做：

```
# This is a legacy wild controller route that's not recommended for RESTful applications.
# Note: This route will make all actions in every controller accessible via GET requests. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-19T13:40:57.200

在架构`':controller/:action(.:format)'`中，您还可以轻松地执行以下操作

```
resources :users do
   get "foo", on: :collection
end 
```

或者

```
resources :users do
  collection do
    get 'foo'
  end
end 
```

[http://guides.rubyonrails.org/routing.html#adding-collection-routes](http://guides.rubyonrails.org/routing.html#adding-collection-routes)

# java - 如何将 GUI 组件放入 OpenGL 屏幕

> ID：13145697
> 
> 赞同：0
> 
> 时间：2012-10-30T18:45:44.967
> 
> 标签：java, user-interface, opengl, jframe, jtextarea

我有一个 opengl 程序，我想在其中放置一个文本框/区域，但我不确定是否有办法在我拥有的 opengl 窗口中执行此操作。有什么办法可以做到这一点或将其嵌入或将opengl窗口嵌入到JFrame中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T18:50:23.517

当然有一种方法——你可以编写自己的 GUI 元素来渲染到 OpenGL。至于是否可以将其嵌入 JFrame - 这取决于您使用的库，在 LWJGL 中您可能可以使用 Display.setParent 执行此操作 - 它需要 awt.Canvas，我不知道您是否可以使用 Swing 组件获得一个。

我认为可以这样做：

```
import java.awt.Canvas;

import javax.swing.JFrame;
import javax.swing.JTextField;

import org.lwjgl.LWJGLException;
import org.lwjgl.opengl.Display;
import org.lwjgl.opengl.GL11;

public class CanvasTest {
    public static void main(String[] args) throws LWJGLException, InterruptedException {
        // note that this is a very bare bones
        // proof-of-concept thing. You'd want to 
        // install your own close handlers etc here.
        Canvas openglSurface = new Canvas();
        JFrame frame = new JFrame();
        frame.setSize(800, 800);
        frame.add(openglSurface);
        frame.setVisible(true);
        frame.add(new JTextField("Hello World!"));
        openglSurface.setSize(500, 500);
        Display.setParent(openglSurface);
        Display.create();
        GL11.glClearColor(1.0f, 0.0f, 0.0f, 1.0f);
        GL11.glClear(GL11.GL_COLOR_BUFFER_BIT);
        Display.update();
        Thread.sleep(2000);
        Display.destroy();
    }
} 
```

我实际上并没有尝试这个，因为我自己从来不需要这个，但它应该可以工作。

注意：我现在确实尝试过。它确实有效，但显然需要一些额外的工作才能使其与 LayoutManagers 等一起使用。

# javascript - 在骨干集合中看不到我的模型

> ID：13145700
> 
> 赞同：0
> 
> 时间：2012-10-30T18:45:52.737
> 
> 标签：javascript, collections, backbone.js, model

我正在尝试将项目添加到集合中，但首先我想删除现有的项目。只有一个项目将永远存在。我可以创建一个新的，但不能删除一个。也许我在倒退。

这是我的收藏，changetheme 是被调用的函数，它可以解决，但无法弄清楚如何删除现有的。this.model.destroy() 只是抛出一个错误。也许我脱离了上下文。

```
bb.model.Settings = Backbone.Collection.extend(_.extend({
    model:  bb.model.Setting,
    localStorage: new Store("rrr"),

    initialize: function() {
        var self = this
        this.model.bind('add', this.added, this);
    },
    changetheme: function(value) {
        var self = this
        this.destroy();
        this.create({theme:value});
    },
})); 
```

如果重要的话，这就是我的模型

```
bb.model.Setting = Backbone.Model.extend(_.extend({
    defaults: {
        theme: 'e'
    },
    initialize: function() {
        var self = this;
    },
    added: function(item) {
        var self = this;
        this.destroy(); 
    },
})); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:37:32.827

要从您可以调用的集合中删除第一项，您`collection.shift()`也可以通过调用来清除集合`collection.reset()`。所以在你的情况下，你可以写：

```
changetheme: function(value) {
    this.shift();
    this.create({theme:value});
} 
```

**UPD** 好的，让我解释一下-在您的示例中，localStorage 的播放方式与任何其他服务器端一样。因此，当您调用“**创建**”时，根据[文档](http://backbonejs.org/#Collection-create)主干实例化具有属性哈希的模型，将其保存到服务器（localStorage），并在成功创建后添加到集合中。这就是为什么您的收藏品数量在每次页面刷新时都会增加。但是，当您调用**shift/remove** [docs](http://backbonejs.org/#Collection-shift)时，只有您的客户端集合受到影响，而不是服务器（localStorage）。现在，从服务器和客户端删除模型的最佳选择是调用模型的销毁方法，如下所示：

```
changetheme: function(value) {
    var modelToDelete = this.at(0) //take first model
    modelToDelete.destroy();
    this.create({theme:value});
} 
```

# c# - 可以通过在 WPF 中平滑更改字体粗细来脉冲文本吗？

> ID：13145702
> 
> 赞同：2
> 
> 时间：2012-10-30T18:45:59.787
> 
> 标签：c#, wpf, animation, text

我想为某些文本（又名 WPF Run 对象）添加淡入/淡出效果。我不希望它一次切换粗体/非粗体。我希望它在粗体和正常之间进行动画处理。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T19:02:18.763

我认为您不能在 Fontweights 之间设置动画，因为它们就像没有“中间”状态的固定值。我认为最好的选择是拥有 2 个文本块（一个普通文本块和一个具有相同文本的粗体），然后对两者的不透明度进行动画处理，使正常的一个淡出，而粗体的一个淡入。这样看起来就像字体以动画方式从正常“过渡”到粗体。

```
<Control>
            <Control.Template>
                <ControlTemplate>
                    <DockPanel>
                        <ToggleButton x:Name="btn" Content="IsBold"/>
                        <Grid Width="200">
                            <TextBlock Text="Transition" x:Name="normal" TextAlignment="Center"/>
                            <TextBlock Text="Transition" FontWeight="Bold" Opacity="0" x:Name="bold" TextAlignment="Center"/>
                        </Grid>
                    </DockPanel>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsChecked" SourceName="btn" Value="True">
                            <Trigger.EnterActions>
                                <BeginStoryboard>
                                    <Storyboard Duration="00:00:01">
                                        <DoubleAnimation Storyboard.TargetName="normal" Storyboard.TargetProperty="Opacity" To="0"/>
                                        <DoubleAnimation Storyboard.TargetName="bold" Storyboard.TargetProperty="Opacity" To="1"/>
                                    </Storyboard>
                                </BeginStoryboard>
                            </Trigger.EnterActions>
                            <Trigger.ExitActions>
                                <BeginStoryboard>
                                    <Storyboard Duration="00:00:01">
                                        <DoubleAnimation Storyboard.TargetName="normal" Storyboard.TargetProperty="Opacity" To="1"/>
                                        <DoubleAnimation Storyboard.TargetName="bold" Storyboard.TargetProperty="Opacity" To="0"/>
                                    </Storyboard>
                                </BeginStoryboard>
                            </Trigger.ExitActions>
                        </Trigger>
                    </ControlTemplate.Triggers>

                </ControlTemplate>
            </Control.Template>
        </Control> 
```

# javascript - 刷新时更改边框底部和边框顶部颜色

> ID：13145721
> 
> 赞同：0
> 
> 时间：2012-10-30T18:47:21.517
> 
> 标签：javascript, css, colors

我想更改我正在处理的页面的边框底部和边框顶部。

这是我的 CSS：

```
.section-title {
    overflow: hidden;
    margin: 0 0 30px 0;
    padding: 20px 0;
    border-bottom: 1px solid #000;
border-top:1px solid #000;
} 
```

这是我的脚本：

```
 $(document).ready(function () {
  $('section-title').each(function() {
     var col = 'rgb('+ (Math.floor(Math.random()*256)) +',' + (Math.floor(Math.random()*256)) + ','+(Math.floor(Math.random()*256))+')';
     $(this).css('color', col);
    }); }); 
```

我做错了什么，或者我应该怎么做才能完成这项工作？得到一个想法；[http://www.mirlaklijn.nl/wp-new](http://www.mirlaklijn.nl/wp-new)这是网站。标题上方和下方的两个 1 像素边框是我想像链接一样随机更改的内容。

非常感谢一直在思考和尝试几个小时！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:51:48.117

您必须设置`border-color`：

```
$(this).css('border-color', col); 
```

* * *

**PS**无需运行自己的`each`循环。让 jQuery 为你做这件事，通过提供回调`css`：

```
$(document).ready(function () {
    $('.section-title').css('border-color', function() {
        return 'rgb(' +
            Math.floor(Math.random() * 256) + ',' + 
            Math.floor(Math.random() * 256) + ',' + 
            Math.floor(Math.random() * 256) + ',' +
        ')';
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:51:51.580

`"color"`改变边框颜色的不是属性。是`"border-color"`。`"color"`属性的目的只是改变文本颜色（前景色）。

```
$(this).css('border-color', col); 
```

干杯

# iphone - iOS 打印不允许 UIPrintInteractionController 出现

> ID：13145724
> 
> 赞同：7
> 
> 时间：2012-10-30T18:47:32.907
> 
> 标签：iphone, ios, ipad, printing, airprint

我正在为客户研究一个潜在的应用程序，但我遇到了一个无法找到答案的问题。我想做的是自动打印，而不`UIPrintInteractionController`显示 get 。我应该指出的重要一点是，这**将不是**一个生产应用程序。我知道，否则这可能会侵犯用户的隐私，在未经用户同意的情况下进行打印，但这不会是 App Store 上的公共应用程序。我发现一个似乎能够做到这一点的应用程序是`Printer Pro`. 系统会提示用户打印测试页，并且该页面打印时没有`UIPrintInteractionController`出现 - 这个应用程序在商店中，所以我假设有一种合法的方法可以做到这一点。有谁知道这是怎么做到的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-10-08T17:56:33.477

据我所知，如果不调用`UIPrintInteractionController`并显示系统打印对话框，就无法在 iOS7 中打印。

但是，iOS8 现在提供了一种直接打印到打印而不显示对话框的规定。基本思想是您获得一个`UIPrinter`对象并将`- printToPrinter:completionHandler:`其与打印的新方法结合使用，`UIPrintInteractionController`而不显示对话框。

为您的打印机获取`UIPrinter`对象可以通过多种方式完成。

最直接的就是使用新的`UIPrinterPickerController`. 但这会显示一个对话框，因此不能满足您的需求。

`UIPrinter`另一种方法是使用方法 通过其 URL 创建打印机`+ printerWithURL:`。我不完全清楚如何获取此 URL，但它可能包含在打印机的 HTML 管理页面中。而且我相信您可以使用 Bonjour API 以编程方式获取它。更多信息在这里：

[https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/NetServices/Introduction.html#//apple_ref/doc/uid/10000119i](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/NetServices/Introduction.html#//apple_ref/doc/uid/10000119i)

Bonjour 是一个服务发现 API，其中包括 IPP 打印机的发现，这是 AirPrint 使用的协议。

至于打印机 Pro 应用程序如何能够在 iOS7 中不使用对话框进行打印，我猜他们是在非常低的级别与打印机交互（例如原始 HTTP 帖子等）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-15T12:55:53.880

请按照以下步骤在不提示的情况下打印文档..

首先使用以下代码搜索设备...

```
if (NSFoundationVersionNumber > NSFoundationVersionNumber_iOS_7_1) {
    UIPrinterPickerController *printPicker = [UIPrinterPickerController printerPickerControllerWithInitiallySelectedPrinter:nil];

    [printPicker presentAnimated:YES completionHandler:
        ^(UIPrinterPickerController *printerPicker, BOOL userDidSelect, NSError *error) {

            if (userDidSelect) {
                //User selected the item in the UIPrinterPickerController and got the printer details.

                [UIPrinterPickerController printerPickerControllerWithInitiallySelectedPrinter:printerPicker.selectedPrinter];

                // Here you will get the printer and printer details.ie,
                // printerPicker.selectedPrinter, printerPicker.selectedPrinter.displayName, printerPicker.selectedPrinter.URL etc. So you can display the printer name in your label text or button title.

                NSURL *printerURL = printerPicker.selectedPrinter.URL;

                NSLog(@"printerURL--->%@",printerURL.absoluteString);

                NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
                [defaults setObject:[printerURL absoluteString] forKey:@"printURL"];
                [defaults synchronize];
            }
    }];
} 
```

并使用以下代码在不提示的情况下打印文档...

```
if (NSFoundationVersionNumber > NSFoundationVersionNumber_iOS_7_1) {
   NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

   UIPrinter *currentPrinterObj = [UIPrinter printerWithURL:[NSURL URLWithString:[defaults stringForKey:[defaults stringForKey:@"printURL"]]]];

   UIPrintInteractionController *controller = [UIPrintInteractionController sharedPrintController];

   if(currentPrinterObj) {
        [controller printToPrinter:currentPrinterObj completionHandler:^(UIPrintInteractionController *printController, BOOL completed, NSError *error) {
            if(completed) {

            } else {
                NSLog(@"FAILED! due to error in domain %@ with error code %u", error.domain, error.code);
            }
        }];
    }
} 
```

# jquery - 在单击元素之前不断触发 JQuery onclick

> ID：13145725
> 
> 赞同：2
> 
> 时间：2012-10-30T18:47:42.937
> 
> 标签：jquery, twitter-bootstrap

我已经查看了十几个关于使用`onclick`、`click`、`bind("click", ...)`、`on("click", ...)`等的问题，但还没有找到我遇到的问题。

基本上它是一个可扩展的 div，在不展开时会隐藏一些内容。我正在使用`collapse`带有数据切换按钮的 Twitter Bootstrap 类来展开/折叠内容本身，但我还需要修改容器 div 的 CSS 以增加高度，以便在视觉上，内容所在的框会拉伸包含它。

这是我的脚本代码：

```
$(document).ready(function() {
    $("#expand-button").bind('click', expandClick($));
    document.getElementById("#expand-button").bind("click", expandClick($));
});

function expandClick($) {
    $("#outer-container").animate({ "height": "350" }, 500);
    $("#expand-button").html("^");
    $("#expand-button").bind("click", collapseClick($));
};

function collapseClick($) {
    $("#outer-container").animate({ "height": "50" }, 500);
    $("#expand-button").html("V");
    $("#expand-button").bind("click", expandClick($));
} 
```

这个想法很简单，处理程序根据按钮的状态旋转进出。实际发生的情况是，一旦我加载页面，expandClick 函数就会立即执行，这会引发我的容器上下弹跳的无限循环，尽管没有单击任何内容。

有任何想法吗？

另外，我认为它不应该是相关的，但 HTML 看起来像：

```
 <div id="outer-container" class="container-fluid subsession-collapsed">
        <div class="row-fluid" style="height: 50px">
            <!-- OTHER STUFF... -->
            <div class="span1" id="4">
                <button id="expand-button" class="btn-success" data-toggle="collapse" data-target="#expandable">V</button>
            </div>
        </div>
        <br /><br />
        <div id="expandable" class="row-fluid collapse">
            <div class="span12" style="padding: 0 20px">
                <!-- CONTENT -->
            </div>
        </div>
    </div> 
```

* * *

编辑：

我用来尝试寻找解决方案的一个 SO 主题是[这个](https://stackoverflow.com/questions/249074/how-to-change-onclick-handler-dynamically)，但是所有的响应都给出了相同的结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T18:51:31.003

该语句将结果分配`expandClick`为处理程序，即

```
$("#expand-button").bind('click', expandClick($)); 
```

应该

```
$("#expand-button").bind('click', function() { expandClick($) }); 
```

另一个问题是您正在添加更多点击处理程序`expandClick`，`collapseClick`但从未删除它们

这就是我将重写您的代码的方式，我不知道您为什么要`$`四处走动

```
$(document).ready(function() {
    // Cache your variables instead of looking them up every time
    var expandButton =  $("#expand-button"),
        outerContainer =  $("#outer-container");

    function expandClick() {
        outerContainer.animate({ "height": "350" }, 500);
        expandButton.html("^");
        // Remove the previous handler
        expandButton.off('click', expandClick );
        // Bind the new handler
        expandButton.bind("click", collapseClick);
    };

    function collapseClick() {
       outerContainer.animate({ "height": "50" }, 500);
       expandButton.html("V");
        // Remove the previous handler
       expandButton.off('click', collapseClick);
        // Bind the new handler
       expandButton.bind("click", expandClick);
    }

    expandButton.bind('click', expandClick);
    // What is this????
    //document.getElementById("#expand-button").bind("click", expandClick($));
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-30T18:52:19.707

不使用：

```
$(document).ready(function() {
    $("#expand-button").bind('click', expandClick($));
    document.getElementById("#expand-button").bind("click", expandClick());
}); 
```

尝试

```
<button id="expand-button" class="btn-success"
data-toggle="collapse" data-target="#expandable" 
onclick="expandClick($)">V</button> 
```

还

```
function expandClick($) {
    $("#outer-container").animate({ "height": "350" }, 500);
    $("#expand-button").html("^");
    $("#expand-button").unbind("click", expandClick());
    $("#expand-button").bind("click", collapseClick());
};

function collapseClick($) {
    $("#outer-container").animate({ "height": "50" }, 500);
    $("#expand-button").html("V");
    $("#expand-button").unbind("click", collapseClick());
    $("#expand-button").bind("click", expandClick());
} 
```

# c++ - 如何在 GDAL 输出文件中设置分类颜色

> ID：13145730
> 
> 赞同：0
> 
> 时间：2012-10-30T18:48:09.267
> 
> 标签：c++, gdal

我正在使用 GDAL C++ 库重新分类栅格地图图像，然后创建新数据的输出图像。但是，当我创建新图像并打开它时，分类值似乎没有定义颜色，所以我只得到一个黑色图像。我可以通过进入图像属性并为我正在使用的 10 个分类值中的每一个设置颜色来解决此问题，但这对于我正在做的大量地图和试验来说非常耗时。

我的问题是，有没有办法通过 GDAL API 设置元数据信息来为每个分类值定义颜色？只是正确函数的名称会很棒，我可以从那里弄清楚。

我已经使用 ArcGIS 和 QuantumGIS 进行了尝试，并且都遇到了同样的问题。我使用的文件类型也是 Erdas Imagine（在 GDAL 中称为“HFA”）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T02:00:10.757

您可以在栅格波段上使用[SetColorTable()方法。](http://www.gdal.org/classGDALRasterBand.html#a8198cc415555b2942a4a35fe6ed19ef3)[最简单的方法是使用GetColorTable()](http://www.gdal.org/classGDALRasterBand.html#a2c5cad0f0fc1b6e261d1e965a5b49969)获取一个预先存在的栅格，并将其传递给您的新栅格。

# iphone - 选择日历

> ID：13145731
> 
> 赞同：0
> 
> 时间：2012-10-30T18:48:37.060
> 
> 标签：iphone, ios, nscalendar

这是一个简单的问题，github.com上有几个IOS日历框架，问题是我找不到一个可以让我通过代码加载特定日期的，一个例子：

我有这些日期：

2003 年 12 月 11 日

13-11-2003

14-11-2003

我想通过代码加载它们并将它们显示在日历上。

有人可以用这个选项为我指出一个好的日历框架，以便我可以将他添加到我当前的项目中。

对不起我的英语不好，提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T18:56:45.323

[这](https://github.com/klazuka/Kal)是我见过的一个很好的日历.. 它为用户提供了良好的用户体验，因为它看起来像 iphone 附带的默认日历。

# jsp - 用 Java 编辑 HTML

> ID：13145732
> 
> 赞同：0
> 
> 时间：2012-10-30T18:48:38.303
> 
> 标签：jsp

我想知道如何使我在 jsp 中动态生成的表可编辑，并进行更改并将编辑后的数据也保存在数据库中。

```
<table style="background-color: green" border="2">  
    <tr>  
        <td><div class="tab"><font color="white">Policy No.</font></div></td>  
        <td><div class="tab"><font color="white">Policy Name</font></div></td>  
        <td><div class="tab"><font color="white">Creation Date</font></div></td>  
        <td><div class="tab"><font color="white">Description</font></div></td>  
    </tr>  
<table> 
```

# zend-framework - 为什么 Zend 自动加载器需要注册命名空间，似乎可以避免

> ID：13145736
> 
> 赞同：1
> 
> 时间：2012-10-30T18:49:00.753
> 
> 标签：zend-framework, autoload

我想知道为什么 Zend 自动加载器需要注册命名空间。起初似乎可以避免，所以我想知道我错过了什么：

如果我想使用外部类，我必须放入 libraryFolder 并且当我使用它时，我必须引用它的全名：

例如，如果我想使用/libraryFolder/myNamespace/package_name/Class/Name.php 中的类，我必须调用\myNamespace\package_name\Class_Name。

那么为什么我必须注册 myNamespace 呢？由于给出了全名 \myNamespace\package_name\Class_Name，Zend 应该无需注册即可找到该类。

我知道我错过了一些东西，但不确定是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:23:57.113

似乎是在努力限制自动加载器查找类的距离，但是如果您希望自动加载器加载任何简单的设置：`$autoloader->setFallbackAutoloader(true);`

[http://framework.zend.com/manual/1.12/en/zend.loader.autoloader.html](http://framework.zend.com/manual/1.12/en/zend.loader.autoloader.html)

# java - Java - 如何从值数组中创建一个随机数

> ID：13145737
> 
> 赞同：4
> 
> 时间：2012-10-30T18:49:00.240
> 
> 标签：java, random

在第一次迭代中-我想从 0..10 创建一个随机数

这就是我实现它的方式-

```
 int generator= (int)(Math.random() * (10)); 
```

在第一次迭代中，我想创建另一个随机数，但没有其中一个值。例如我想要没有数字 4 的随机数。只有 1,2,3,5,6,7,8,9,0

生成随机数时，如何从数字 0..10 中删除其中一个值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T18:54:30.723

## 第一种方式： -

您还可以维护一个`List`所有的数字。然后使用`Collections.shuffle`打乱列表并获取第一个元素。并删除它。

```
 List<Integer> list = new ArrayList<Integer>();

    list.add(1); 
    list.add(4);
    list.add(2);
    list.add(3);
    System.out.println("Original List: " + list);

    Collections.shuffle(list);

    System.out.println("Shuffled List: " + list);
    int number1 = list.remove(0);  // Remove the first value
    System.out.println("Number removed: " + number1);

    Collections.shuffle(list);

    System.out.println("Shuffled List: " + list);
    number1 = list.remove(0);
    System.out.println("Number removed: " + number1); 
```

**输出**： -

```
Original List: [1, 4, 2, 3]
Shuffled List: [4, 3, 1, 2]
Number removed: 4
Shuffled List: [1, 3, 2]
Number removed: 1 
```

* * *

## 第二种方式： -

更好的方法是从列表`0`的 到生成一个随机数`size`，并获取 的值`that index`并将其删除。

```
int size = list.size();
Random random = new Random();

for (int i = 0; i < size; i++) {    
    int index = random.nextInt(list.size());
    int number1 = list.remove(index);
    System.out.println(number1);
} 
```

* * *

**注意： -** 如果您想排除一组固定数字的生成，那么您可以将这些数字放在一个列表中。然后从您的`list of numbers`. 然后使用上述任何一种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T18:53:44.653

`Random.nextInt(10)==number`再次生成

```
public int generateExcept(int number) {
    Random random = new Random();

    int generated = 0;
    while ((generated = random.nextInt(11)) == number) {
    }
    return generated;
} 
```

正如OP所引用的

*在第一次迭代中，我想创建另一个随机数，但没有其中一个值*

如果我理解正确这是单个操作而不是重复操作。

**没有再生**

```
public static int generateExcept(int number, int max) {
    Random random = new Random();
    int generated = 0;
    if ((generated = random.nextInt(max - 1)) == number) {
        generated++;
    }
    return generated;
} 
```

总是生成随机数，`max-1`因为我们想加一

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T18:53:59.853

```
int generator= (int)(Math.random() * (10));
if (generator >= 4) generator++; 
```

这将包括数字 10 作为可能的结果，如果您不想这样做，请乘以 9 而不是 10。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T18:54:10.290

您可以将值存储在列表中，并生成一个随机索引以从该列表中获取。

```
private Random random = new Random();
private ArrayList<Integer> values = new ArrayList<Integer>();

public static int nextInt() {
    if (values.size() > 0) {
        return values.remove(random.nextInt(values.size()));
    } else {
        throw new RuntimeException("no values possible");
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-30T19:01:32.350

有两种基本的有效方法：

1 - 生成一个有效值数组（0 到 10，4 除外），并使用随机发生器在该数组上**选择一个索引。**一个例子如下：

```
Random random = new Random();
int[] unwanted = {4};
int[] values = new int[10-unwanted.length];
for(int i=0; i<10-unwanted.length; i++){
  for(int curr : unwanted){
    if(i == curr) continue;
  }
  values[i] = i;
}
int result = values[random.nextInt(10-unwanted.length)]; 
```

2 - 遵循[西蒙安德烈的方法](https://stackoverflow.com/a/13145813/1253136)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-30T18:51:38.853

```
int excluded[] = { 1,4,3};
Random r = new Random();
int generator;
do {
    generator= r.nextInt(10);
} while (! Arrays.asList(excluded).contains(generator) ) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-30T18:52:04.777

您可以做的（也许有一种更简洁的处理方式）是检查第二个生成的数字是否与第一个匹配，如果匹配，则让它运行随机数。再次生成器。一个简单的 if...else 循环应该可以解决它。

# ios - 此崩溃报告中是否有任何有用的信息？

> ID：13145740
> 
> 赞同：1
> 
> 时间：2012-10-30T18:49:07.290
> 
> 标签：ios, xcode, symbolicatecrash, symbolicate

我正在尝试确定崩溃的原因（iOS 应用程序），但符号化的崩溃报告仅指向我的主要方法。

```
8   WxT                               0x00002730 main (main.m:14)
9   WxT                               0x000026e8 start + 32 
```

这里有什么可以帮助我找到问题的吗，或者这对我来说是无用的？“开始+ 32”告诉我什么？

注意我的应用是 WxT，它在报告中只引用了几次。我用双星号 (**) 突出显示了每个出现。

```
Incident Identifier: 3A6D2AD3-0E9C-41B6-9EA6-4F05EF72B4E0
CrashReporter Key:   2b1b03e6298d7d5bebcb681de363022e7b319df1
Hardware Model:      iPad3,2
**Process:         WxT [3214]**
**Path:            /var/mobile/Applications/613A46E1-5CDC-4A1F-85C5-8D29ACDA289C/WxT.app/WxT**
**Identifier:      WxT**
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-05-23 15:21:02.300 -0500
OS Version:      iPhone OS 5.1.1 (9B206)
Report Version:  104

Exception Type:  00000020
Exception Codes: 0x8badf00d
Highlighted Thread:  3

Application Specific Information:
**WxT[3214] has active assertions beyond permitted time:** 
{(
    **<SBProcessAssertion: 0x14005c20> identifier: Suspending process: WxT[3214] permittedBackgroundDuration: 10.000000 reason: suspend owner pid:23 preventSuspend  preventThrottleDownCPU  preventThrottleDownUI** 
)}

Elapsed total CPU time (seconds): -4288.787 (user -4288.787, system 0.000), 100% CPU 
Elapsed application CPU time (seconds): 0.061, 0% CPU

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0:
0   libsystem_kernel.dylib          0x35f83004 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x35f831fa mach_msg + 50
2   CoreFoundation                  0x30b843ec __CFRunLoopServiceMachPort + 120
3   CoreFoundation                  0x30b830ea __CFRunLoopRun + 818
4   CoreFoundation                  0x30b0649e CFRunLoopRunSpecific + 294
5   CoreFoundation                  0x30b06366 CFRunLoopRunInMode + 98
6   GraphicsServices                0x36eca432 GSEventRunModal + 130
7   UIKit                           0x327e6cce UIApplicationMain + 1074
**8   WxT                               0x00002730 main (main.m:14)**
**9   WxT                               0x000026e8 start + 32**

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib          0x35f833a8 kevent + 24
1   libdispatch.dylib               0x355f5f04 _dispatch_mgr_invoke + 708
2   libdispatch.dylib               0x355f5c22 _dispatch_mgr_thread + 30

Thread 2 name:  WebThread
Thread 2:
0   libsystem_kernel.dylib          0x35f83004 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x35f831fa mach_msg + 50
2   CoreFoundation                  0x30b843ec __CFRunLoopServiceMachPort + 120
3   CoreFoundation                  0x30b83124 __CFRunLoopRun + 876
4   CoreFoundation                  0x30b0649e CFRunLoopRunSpecific + 294
5   CoreFoundation                  0x30b06366 CFRunLoopRunInMode + 98
6   WebCore                         0x36523c9c _ZL12RunWebThreadPv + 396
7   libsystem_c.dylib               0x33bf472e _pthread_start + 314
8   libsystem_c.dylib               0x33bf45e8 thread_start + 0

Thread 3 name:  com.apple.NSURLConnectionLoader
Thread 3:
0   libsystem_kernel.dylib          0x35f83004 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x35f831fa mach_msg + 50
2   CoreFoundation                  0x30b843ec __CFRunLoopServiceMachPort + 120
3   CoreFoundation                  0x30b83124 __CFRunLoopRun + 876
4   CoreFoundation                  0x30b0649e CFRunLoopRunSpecific + 294
5   CoreFoundation                  0x30b06366 CFRunLoopRunInMode + 98
6   Foundation                      0x35a3dbb2 +[NSURLConnection(Loader) _resourceLoadLoop:] + 302
7   Foundation                      0x35a3da7a -[NSThread main] + 66
8   Foundation                      0x35ad158a __NSThread__main__ + 1042
9   libsystem_c.dylib               0x33bf472e _pthread_start + 314
10  libsystem_c.dylib               0x33bf45e8 thread_start + 0

Thread 4 name:  com.apple.CFSocket.private
Thread 4:
0   libsystem_kernel.dylib          0x35f93570 __select + 20
1   CoreFoundation                  0x30b8863a __CFSocketManager + 726
2   libsystem_c.dylib               0x33bf472e _pthread_start + 314
3   libsystem_c.dylib               0x33bf45e8 thread_start + 0

Thread 5 name:  WebCore: CFNetwork Loader
Thread 5:
0   libsystem_kernel.dylib          0x35f83004 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x35f831fa mach_msg + 50
2   CoreFoundation                  0x30b843ec __CFRunLoopServiceMachPort + 120
3   CoreFoundation                  0x30b83124 __CFRunLoopRun + 876
4   CoreFoundation                  0x30b0649e CFRunLoopRunSpecific + 294
5   CoreFoundation                  0x30b06366 CFRunLoopRunInMode + 98
6   WebCore                         0x3654d0d2 _ZN7WebCoreL15runLoaderThreadEPv + 122
7   libsystem_c.dylib               0x33bf472e _pthread_start + 314
8   libsystem_c.dylib               0x33bf45e8 thread_start + 0

Unknown thread crashed with unknown flavor: 5, state_count: 1

Binary Images:
    **0x1000 -    0x2afff +WxT armv7  <d34067e47ac73d7390a27c79ab5582b3> /var/mobile/Applications/613A46E1-5CDC-4A1F-85C5-8D29ACDA289C/WxT.app/WxT**
0x2fee1000 - 0x2ff02fff  dyld armv7  <77eddfd654df393ba9c95ff01715fd08> /usr/lib/dyld 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T18:52:25.190

看起来像：

```
Application Specific Information:
**WxT[3214] has active assertions beyond permitted time:** 
{(
    **<SBProcessAssertion: 0x14005c20> identifier: Suspending process: WxT[3214] permittedBackgroundDuration: 10.000000 reason: suspend owner pid:23 preventSuspend  preventThrottleDownCPU  preventThrottleDownUI** 
)} 
```

系统正在尝试将您的应用程序移至后台，而您的 URL 连接 (thread.3) 正在阻止这种情况发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:52:21.320

错误消息指出您尝试在后台运行超过 10 分钟。默认情况下，iOS 应用程序必须在被置于后台后 10 分钟内停止所有处理。

# javascript - 我应该使用方法还是子类？如果这有意义

> ID：13145749
> 
> 赞同：4
> 
> 时间：2012-10-30T18:49:52.050
> 
> 标签：javascript, jquery, forms, oop, sinemacula

## 一点背景...

我有一个名为的对象`SineMacula`，其中包含许多用于创建表单元素并使这些表单元素在页面上执行操作的方法。

首先，当页面加载时，`setFields()`会调用一个方法，该方法会遍历页面上的所有字段并适当地设置它们***，即自动完成、复选框等...***

的代码`setFields()`如下所示：

```
/**
 * Set Fields
 * This function will set all fields
 *
 * The options:
 * - fields: the fields selector to loop through
 *
 * @param object options The field options
 */
SineMacula.prototype.setFields = function (options){
    // Set the defaults for the fields
    var options = $.extend({
        fields: '.field', // Define the default field selector
    },options);
    // Loop through the fields and set the events
    $(options.fields).each(function(){
        // Set the field events
        SineMacula.setBlur($(this));        
        SineMacula.setFocus($(this));
        SineMacula.setToggleLabel($(this));
        // If the field is a checkbox then set it
        if($(this).parent().hasClass('checkbox')){
            SineMacula.setCheckbox($(this).parent());
        }
        // If the field is an autocomplete then set it
        if($(this).parent().hasClass('autocomplete')){
            SineMacula.setDropdown($(this).parent(),{source:$(this).attr('data-source')});
        }
        // etc...
    });
}; 
```

***上面的大部分代码都可以忽略，但我已经插入了所有代码，这样你就可以准确地看到我在做什么。***

## 我的问题

我有很多`SineMacula`对象的方法，例如`setCheckbox()`，`setDropdown()`...

我想知道的是，我是否应该将这些方法本身视为对象？

所以我的代码应该是这样的：

```
if($(this).parent().hasClass('autocomplete')){
     new SineMacula.dropdown($(this).parent(),{source:$(this).attr('data-source')});
} 
```

***在调用方法之前注意`new`关键字。`dropdown()`***

这是一种更好的工作方法吗？会使用更少的内存等吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T19:00:10.857

没有理由仅仅为了调用构造函数然后将对象丢弃而创建对象的实例。通过在构造函数中完成工作，您只是将其用作常规函数，但会产生创建未使用对象的开销。

（事实上​​，除了作为方法的命名空间之外，您似乎也没有将 SineMacula 实例用于任何用途。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T19:24:38.427

作为一般经验法则，当您需要将一些责任委派给它时，会出现一个新对象。因此，如果您以后做类似的事情，`sineMaculaInstance.setCheckboxValue(checkbox, true)`那肯定看起来应该是复选框的责任。另一种看待它的方法是通过[Single Responsibility Principle](http://en.wikipedia.org/wiki/Single_responsibility_principle)分析 SineMacula 对象。简而言之，如果您可以用一两行来描述您的对象的作用，那么您通常就可以了。如果您必须写一个完整的段落来说明 SineMacula 所做的事情，那么看起来您应该将该对象重构为将具体职责拆分为其他对象。

高温高压

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T19:11:58.807

在我看来，由于您将所有方法都包含在此`SineMacula`名称空间/模块中，因此重新实例化另一个全新的 SineMacula 对象是没有意义的。

除非您要添加**不**希望附加到原始对象的不同/特定原型/方法，并且特定于页面上的某个部分或表单元素。

```
var newThing = new SineMacula('doDifferentStuff');
newThing.dropdown = '''do something different'''; 
```

实例化类的全部原因也是将 new 设置`this`为您*从中调用它的*任何内容。看起来你所拥有的一切都已经捆绑在一起了，并且只是使用`SineMacula.setBlahblah`of 调用自身。

希望这听起来不会太乱！

# iphone - 如何用闪光灯模式打开相机

> ID：13145753
> 
> 赞同：7
> 
> 时间：2012-10-30T18:50:06.153
> 
> 标签：iphone, objective-c, ios, ios5

我正在开发一个简单的应用程序，我需要让我的相机闪光灯模式持续开启，而不仅仅是在捕获图像时。并且操作模式应该是相机而不是视频录制。可能吗 ？如果是这样比如何。请帮我一些代码

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T19:36:53.543

您可以使用以下方法打开和关闭相机闪光灯。

```
- (void)toggleFlashlight
{
  AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];

  if (device.torchMode == AVCaptureTorchModeOff)
  {
    // Create an AV session
    AVCaptureSession *session = [[AVCaptureSession alloc] init];

    // Create device input and add to current session
    AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:device error: nil];
    [session addInput:input];

    // Create video output and add to current session
    AVCaptureVideoDataOutput *output = [[AVCaptureVideoDataOutput alloc] init];
    [session addOutput:output];

    // Start session configuration
    [session beginConfiguration];
    [device lockForConfiguration:nil];

    // Set torch to on
    [device setTorchMode:AVCaptureTorchModeOn];

    [device unlockForConfiguration];
    [session commitConfiguration];

    // Start the session
    [session startRunning];

    // Keep the session around
    [self setAVSession:session];

    [output release];
  }
  else
  {
    [AVSession stopRunning];
    [AVSession release], 
    AVSession = nil;
  }
} 
```

您还可以使用以下方法以及相机的显示，

```
- (void) toggleFlashlight {

// check if flashlight available
Class captureDeviceClass = NSClassFromString(@"AVCaptureDevice");
if (captureDeviceClass != nil) {
    AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
    if ([device hasTorch] && [device hasFlash]){

        [device lockForConfiguration:nil];
        if (device.torchMode == AVCaptureTorchModeOff) 
        {
            [device setTorchMode:AVCaptureTorchModeOn];
            [device setFlashMode:AVCaptureFlashModeOn];

        }
        else 
        {
            [device setTorchMode:AVCaptureTorchModeOff];
            [device setFlashMode:AVCaptureFlashModeOff];

        }
        [device unlockForConfiguration];
    }
} 
} 
```

[资源](http://mobiledevelopertips.com/camera/flashlight-application-using-the-iphone-led.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-30T11:45:40.303

**将此用于 Swift 4**

```
func toggleFlash() {
    guard let device = AVCaptureDevice.default(for: AVMediaType.video)
        else {return}

    if device.hasTorch {
        do {
            try device.lockForConfiguration()
            if device.torchMode == AVCaptureDevice.TorchMode.on {
                device.torchMode = AVCaptureDevice.TorchMode.off
                    //AVCaptureDevice.TorchModeAVCaptureDevice.TorchMode.off
            } else {
                do {
                    try device.setTorchModeOn(level: 1.0)
                } catch {
                    print(error)
                }
            }
            device.unlockForConfiguration()
        } catch {
            print(error)
        }
    }
} 
```

# html - 使用 sed 或 grep 从具有特定 id 的 html 标记之间提取文本

> ID：13145762
> 
> 赞同：0
> 
> 时间：2012-10-30T18:50:43.017
> 
> 标签：html, linux, sed, grep

我应该使用什么命令从以下 html 代码中提取文本，该代码位于“test.html”文件中，其中包含：“ `<span id="imAnID">extractme</span>`”？

该文件会更大，所以我需要将 grep 或 sed 指向一个 id，然后告诉它只从具有此 ID 的标签中提取文本。假设我从文件所在的目录运行终端，我这样做：

```
cat test.html | sed -n 's/.*<span id="imAnID">\(.*\)<\/span>.*/\1/p' 
```

我究竟做错了什么？我得到一个空输出......如果它更容易，不反对使用 grep 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T21:46:41.667

为此使用 awk、sed 或 grep 很尴尬，因为这些工具是基于行的（一次一行）。是否保证您尝试提取的跨度都在同一行？是否有可能在跨度内使用其他标签（例如`em`标签）？如果不是，那么这听起来像是[perl](http://www.perl.org/)的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T22:35:49.037

awk、sed 和 grep 是面向行的工具。XML 和 HTML 基于标签。两者结合得并不好，尽管在使用面向行的工具之前，您可以通过在 XML 或 HTML 上使用漂亮的格式化程序在 XML 和 HTML 上使用 awk、sed 和 grep。

有一个名为 xmlgawk 的程序应该非常类似于 gawk，同时仍在处理 XML。

我个人更喜欢在 Python 中使用 lxml 模块来做这种事情，这样可以完全理解 XML/HTML，而不会太罗嗦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T19:09:19.133

您可以尝试这样做`awk`：

```
 #!/bin/bash

  start_tag="span id=\"imAnID\""
  end_tag="/span"

  awk -F'[<>]' -v taga="$start_tag" -v tagb="$end_tag" '{ i=1; while (i<=NF) { if ($(i)==taga && $(i+2)==tagb) { print $(i+1) }; i++} }' 
```

通过以下方式使用它：

```
$ ./script < infile > outfile 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T21:43:26.837

使用`grep -o`

```
echo "<span id="imAnID" hello>extractme</span> <span id='imAnID'>extractmetoo</span>" | grep -oE 'id=.?imAnID[^<>]*>[^<>]+' | cut -d'>' -f2 
```

会发现：

```
#=>extractme
#=>extractmetoo 
```

`span`如果带有所需`id`属性的元素紧接在`extractme`东西之前，它将起作用。

# applescript - Applescript - 使用“从列表中选择”时变量命令不起作用

> ID：13145764
> 
> 赞同：1
> 
> 时间：2012-10-30T18:51:04.050
> 
> 标签：applescript

我正在尝试为 iTunes 创建一个简单的国际商店。

```
set country to (choose from list {"US", "CA", "UK"} with prompt "What country?")

   if country = "US" then
     tell application "iTunes"
     activate   
     open location "itmss://itunes.apple.com/WebObjects/MZStore.woa/wa/switchToStoreFront?storeFrontId=143441"
end tell
end if 
```

当我单击美国时，它对 iTunes 没有任何作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T21:02:52.023

问题是该`choose from list`命令正在返回从列表中选择的项目的列表。您可以执行以下操作：

```
set country to (choose from list {"US", "CA", "UK"} with prompt "What country?")

if country = {"US"} then
    tell application "iTunes"
        activate
        open location "itmss://itunes.apple.com/WebObjects/MZStore.woa/wa/switchToStoreFront?storeFrontId=143441"
    end tell
end if 
```

或者，您可以说`if item 1 of country = "US"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:53:31.627

尝试

```
if country as text = "US" then 
```

# c - 访问指向结构指针的指针中的成员

> ID：13145766
> 
> 赞同：1
> 
> 时间：2012-10-30T18:51:18.210
> 
> 标签：c, pointers, struct

代码如下：

```
/* set.h */
struct setElement{
  char *element;
  setElement *next;
};

typedef struct setElement *Set;  //Set is now the equivalent of setElement*

Set a;    

setInit(&a);

/* setInit function declaration @ setInit.c */

int setInit(Set *a){
  (*a)->element = "asdf";  //results in a seg fault
} 
```

尝试 malloc 'a' 有效，但如果我尝试访问集合 'a' 中的任何成员都不起作用。我知道我正在将 main() 函数中的集合的引用传递给 setInit，所以我相信 setInit 中包含的指针正在寻址 main() 函数中的“Set a”分配的内存，所以 malloc 不会不需要...

恩诺。帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T18:59:53.090

问题是你没有分配`setElement`你试图分配的。在代码的主要部分中，您正在创建一个`Set`，它只是一个指向 a 的指针`setElement`。这个指针永远不会被设置为指向任何有意义的东西。即你需要类似的东西

```
Set a = malloc(sizeof(setElement)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T18:59:31.447

las，尚不清楚您的变量的确切定义位置。我想你`main.c`是这样的

```
#include "set.h"

Set a;    

int main()
{
    setInit(&a);
} 
```

如果是这样，你的 a 本身就是一个指针，应该指向某个地方。

如果您的框架`malloc()`需要 ed 数据，您应该这样做

```
int main()
{
    a = malloc(sizeof(*a)); // *a is a struct setElement now, with 2 pointer-sized members.
    setInit(&a); // Now seInit should be able to operate on the struct as wanted.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T21:23:22.333

正如@amaurea 所提到的，您需要将 malloc() 用于您的 setElement 结构。除此之外，您需要对 setElement 结构的`element`成员执行相同的操作。A`char*`只是一个指向 char 或 char 数组的指针，不会隐式分配任何内容。

```
int setInit(Set *a){
  (*a)->element = "asdf";  //results in a seg fault
} 
```

可以重写

```
int setInit(Set *a){
  (*a)->element = malloc(sizeof("asdf"));
  strcpy((*a)->element,"asdf");
} 
```

上面可以重写以获取实际`element`内容的第二个参数。

# xamarin.ios - Monotouch - 从另一个类更改 ViewController 中的标签文本？

> ID：13145772
> 
> 赞同：0
> 
> 时间：2012-10-30T18:51:39.743
> 
> 标签：xamarin.ios, label, tcpclient

我有一个用作异步 TCP 客户端的类。在那个类中，我有一个回调函数，例如 Client_Connected。这会在我的 TCP 客户端已连接时触发。在我的主视图控制器类中，我有一个 TCPClient 实例和一个我想显示 tcpclient 状态的标签。

我的问题是，在 tcpclient 类的回调函数中，如何在 mainviewcontroller 的类中引用和设置标签的文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T20:18:12.527

当您创建 TCPClient 类时，传入对父类的引用（或只是对要更新的标签的引用） - 然后您的“子”类将有权访问“父”上需要的元素更新。

可能还有其他方法，但这是相当普遍的。

# nosql - Couchbase 中的原子计数器

> ID：13145773
> 
> 赞同：2
> 
> 时间：2012-10-30T18:51:45.933
> 
> 标签：nosql, couchbase

我想知道 Couchbase 是否支持一致的增量计数器。从我在[这个文档](http://www.couchbase.com/docs/couchbase-sdk-ruby-1.0/couchbase-sdk-ruby-update-incr.html)中读到的，它没有，它只是封装了一个读/写操作，所以你不需要自己做。当然，这对我不起作用，因为自从您从数据库中读取数据以来，数据可能会发生变化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T01:46:42.150

Couchbase 绝对可以，就像 memcached 和 Membase Server 一样，它支持集群内原子的 incr/decr 操作。

```
cb.set("mykey", 1)
x = cb.incr("mykey") 
puts x #=> 2 
```

incr 正在写入和返回结果值。

**“更新操作发生在服务器上，并在协议级别提供。”** 意味着它在集群上是原子的，并由服务器执行。

**“这简化了两阶段获取和设置操作。”** 意味着***不是***两阶段操作，而是单操作！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-30T22:45:41.403

如果您使用的是 Java API，自 2.0 版发布以来，incr 方法已被 counter 方法取代。

您需要使用存储桶的计数器方法。此方法允许您定义计数器文档的名称（包含长类型）和增量。如果文档不存在，它会创建它。许多其他参数在官方文档中定义。

```
//Obtain the id from counter document and increment it
com.couchbase.client.java.Bucket bucket;
JsonLongDocument joCounter = bucket.counter("counter", 1);

//get the counter long value (might be useful to generate doc id)
long newCounter = joCounter.content(); 
```

此操作是原子操作，因此请放心使用计数器。 [http://docs.couchbase.com/developer/java-2.0/documents-atomic.html](http://docs.couchbase.com/developer/java-2.0/documents-atomic.html)

# c - C char* 到 int 的转换

> ID：13145777
> 
> 赞同：51
> 
> 时间：2012-10-30T18:51:56.997
> 
> 标签：c, char, int

我将如何将两位数（类型`char*`）转换为`int`？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-10-30T18:54:14.437

[atoi](http://www.cplusplus.com/reference/clibrary/cstdlib/atoi/)可以为您做到这一点

例子：

```
char string[] = "1234";
int sum = atoi( string );
printf("Sum = %d\n", sum ); // Outputs: Sum = 1234 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-30T18:54:57.773

使用 atoi() 从`<stdlib.h>`

[http://linux.die.net/man/3/atoi](http://linux.die.net/man/3/atoi)

或者，编写您自己的`atoi()`函数，该函数将转换`char*`为`int`

```
int a2i(const char *s)
{
  int sign=1;
  if(*s == '-'){
    sign = -1;
    s++;
  }
  int num=0;
  while(*s){
    num=((*s)-'0')+num*10;
    s++;   
  }
  return num*sign;
} 
```

# php - PHP 字符串验证 - Firstname_Lastname

> ID：13145782
> 
> 赞同：-2
> 
> 时间：2012-10-30T18:52:14.653
> 
> 标签：php

我想获得一些关于 PHP 的帮助。假设我有一个字符串 ($fullname)。我想验证它是“Firstname_Lastname”的形式。例如，确保它是“Nathan_Phillips”而不是“Nathan Phillips”或“Nathan122”等。你们能帮我解决这个问题吗？

提前致谢！:-)

------------ 编辑 ------------- 谢谢你们！设法做到了。还添加了数字过滤器。这是功能：

```
function isValidName($name)
{
    if (strcspn($name, '0123456789') != strlen($name))
        return FALSE;
    $name = str_replace(" ", "", $name);
    $result = explode("_", $name);
    if(count($result) == 2)
        return TRUE;
    else
        return FALSE;
} 
```

使用示例：

```
if(isValidName("Test_Test") == TRUE)
    echo "Valid name.";
else
    echo "Invalid name."; 
```

再次感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T19:08:32.313

也许尝试这样的事情：

```
function checkInput($input) {
    $pattern = '/^[A-Za-z]{2,50}_[A-Za-z]{2,50}/';
    return preg_match($pattern, substr($input,3), $matches, PREG_OFFSET_CAPTURE);
} 
```

这将接受包含 2-50 个字母字符、后跟下划线和 2-50 个字母字符的字符串。

我不是最擅长正则表达式的人，所以如果有人看到缺陷，我会邀请更正。

如果您有特殊字符（*è*、*í*等），我给出的正则表达式可能不会接受它。此外，它不接受*O'Reilly*之类的名称或带连字符的名称。看到这个：

[名称的正则表达式](https://stackoverflow.com/questions/275160/regex-for-names)

我将让您追踪名称正则表达式的所有例外情况，但我绝对认为正则表达式是要走的路。

# c# - 参数化字符串以及 LIKE 和通配符运算符

> ID：13145785
> 
> 赞同：4
> 
> 时间：2012-10-30T18:52:20.473
> 
> 标签：c#, sql, wildcard, sql-like, code-injection

我在搜索中看到在 SQL 查询中使用参数化字符串，如下所示：

```
SqlCommand comm = new SqlCommand();
comm.CommandText="SELECT * FROM table WHERE field LIKE '%'+@var+'%'";
comm.Parameters.AddWithValue("var","variabletext");
SqlDataReader reader = comm.ExecuteReader(); 
```

然而，在这个论坛中，有人提到尽管它被用于参数化字符串，但它仍会受到 sql 注入的影响。我只能假设连接的字符串绕过所有参数化的安全性，直接将值作为字符串插入。如果是这种情况，如何在参数化查询中使用通配符运算符同时避免 sql 代码注入？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T18:59:59.687

这**不**容易受到 SQL 注入的影响。

谁告诉你那是错的。`'%'+@var+'%'`被视为数据而不是可执行代码。它被评估为一个字符串，然后用作 . 右侧的模式`LIKE`。

`EXEC`只有当您遇到这种串联的结果时，您才会遇到问题。简单地在查询本身中执行字符串连接不是问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T18:58:02.593

您应该使用`"SqlParameter"`将值发送到存储过程进行搜索。的目的`"SqlParameter"`是拒绝值中的所有注入事物。此外，如果您必须执行包含 sql 代码或连接参数的文本，您应该再次`"CommandType"`将命令的属性设置为`"Text"`并使用 a`"SqlParameter"`将您的值发送到该文本。

在此处查看有关此内容的 Microsoft 文档：

[http://msdn.microsoft.com/en-us/library/ff648339.aspx](http://msdn.microsoft.com/en-us/library/ff648339.aspx)

还有关于stackoverflow的另一个问题：

[SQLParameter 如何防止 SQL 注入？](https://stackoverflow.com/questions/4892166/how-does-sqlparameter-prevent-sql-injection)

另请查看此处以查看一些具体示例：

[即使在 .NET 中使用 SQLParameter 的 SQL 注入示例？](https://stackoverflow.com/questions/1429866/examples-of-sql-injection-even-when-using-sqlparameter-in-net)

# 更新：

由于您已经更新了问题，并且现在确切指定了执行方式，因此您提到的代码中不再存在 sql 注入问题。

干杯

# android - 布局 - MATCH_PARENT 隐藏元素

> ID：13145788
> 
> 赞同：1
> 
> 时间：2012-10-30T18:52:23.077
> 
> 标签：android, layout, textview

我正在为类别中显示的国家列表准备布局。我在格式化布局时遇到问题。我希望类别标题（较大的）为“100% 宽度”，到目前为止它们是 WRAP_CONTENT 格式的（蓝色用于测试目的）：

![调试视图](../Images/b73ff1b0ee470232c572fdfd36dfde9b.png)

我使用了以下代码：

```
TableLayout table = new TableLayout(this);
table.setPadding(24, 14, 24, 24);
table.setStretchAllColumns(true);  
table.setShrinkAllColumns(true);

// ...

TableRow titleRow = new TableRow(this);
titleRow.setGravity(Gravity.CENTER_HORIZONTAL);
titleRow.setPadding(0, 18, 0, 8);
titleRow.setBackgroundColor(Color.BLUE);

TextView title = new TextView(this);
title.setText("TEST TITLE");  //title.setText(currentContinent); 
title.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 18);
title.setGravity(Gravity.CENTER);
title.setBackgroundColor(Color.DKGRAY);
title.setPadding(0, 6, 0, 8);

titleRow.addView(title);
table.addView(titleRow, new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT)); 
```

我更改了代码的最后一部分以使 TextView 填充父级（TableRow）：

```
titleRow.addView(title, new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));
table.addView(titleRow, new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT)); 
```

但后来我的 TextView 消失了！

[调试视图 http://www.wysyper.pl/u/4417tahfcvnb.jpeg](http://www.wysyper.pl/u/4417tahfcvnb.jpeg)

什么会导致问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T19:43:27.790

我相信您有充分的理由不为此使用 XML 布局，这应该会让您的生活少很多代码填充并消除一些潜在的错误。

您是否尝试过`LayoutParams`为父视图使用正确子类的实例？添加到 a 的每个视图都`TableLayout`应该使用`TableLayout.LayoutParams`. 同样`TableRow`期望`TableRow.LayoutParams`.

如果这不能解决问题，我建议使用 XML 而不是代码来构建布局。

# c# - Plinq 在 Plinq 中？

> ID：13145795
> 
> 赞同：3
> 
> 时间：2012-10-30T18:52:42.483
> 
> 标签：c#, .net-4.0, parallel-processing, plinq

假设我有一个`DataTable`.

```
var dt = getDataTable(); 
```

然后我做

```
Parallel.For (0, dt.Rows.Count, i => Foo (dt.Rows[i])); 
```

`Foo`是一个对 a 进行一些计算的函数`row`。

Foo**也**应该使用`Plinq`吗？还是不应该？

*（已经划分之后再划分核心是没有意义的。）*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T18:54:44.697

> Foo 也应该使用 Plinq 吗？还是不应该？

通常，您通常只想在可能的“最高级别”上进行并行化。通过制作更大的工作项，您可以最大限度地提高总吞吐量，因为您减少了安排工作所需的开销。

如果您在循环内使用 PLINQ `Parallel.For`，则会增加开销（以安排工作项），但无法利用更多内核，因此您可能会降低整体性能。因此，我不建议`Foo`在这种情况下使用 PLINQ（前提是`DataTable`有足够的行可以很好地并行化）。

# hadoop - Pig，如何在加入和分组后引用字段

> ID：13145797
> 
> 赞同：9
> 
> 时间：2012-10-30T18:52:48.757
> 
> 标签：hadoop, apache-pig

我在 Pig 中有这段代码（win、request 和 response 只是直接从文件系统加载的表）：

```
win_request = JOIN win BY bid_id, request BY bid_id;
win_request_response = JOIN win_request BY win.bid_id, response BY bid_id;

win_group = GROUP win_request_response BY (win.campaign_id);

win_count = FOREACH win_group GENERATE group, SUM(win.bid_price); 
```

基本上我想在加入和分组后对 bid_price 求和，但出现错误：

```
Could not infer the matching function for org.apache.pig.builtin.SUM as multiple or none of them fit. Please use an explicit cast. 
```

我的猜测是我没有正确引用`win.bid_price`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T16:44:04.983

在执行多个连接时，我建议为您的字段使用唯一标识符（例如，对于 bid_id）。或者，您也可以使用[消歧运算符](http://pig.apache.org/docs/r0.9.1/basic.html#disambiguate)'::'，但这可能会变得很脏。

```
wins = LOAD '/user/hadoop/rtb/wins' USING PigStorage(',') AS (f1_w:int, f2_w:int,  f3_w:chararray);
reqs = LOAD '/user/hadoop/rtb/reqs' USING PigStorage(',') AS (f1_r:int, f2_r:int, f3_r:chararray);
resps = LOAD '/user/hadoop/rtb/resps' USING PigStorage(',') AS (f1_rp:int, f2_rp:int, f3_rp:chararray);

wins_reqs = JOIN wins BY f1_w, reqs BY f1_r;
wins_reqs_reps = JOIN wins_reqs BY f1_r, resps BY f1_rp;

win_group = GROUP wins_reqs_reps BY (f3_w);

win_sum = FOREACH win_group GENERATE group, SUM(wins_reqs_reps.f2_w); 
```

# java - 在面板中单击鼠标时，存储 ImageIcons 的 JLabels 将返回到原始位置

> ID：13145798
> 
> 赞同：0
> 
> 时间：2012-10-30T18:52:50.223
> 
> 标签：java, swing, jlabel, imageicon, drag-and-drop

我已将此侦听器添加到 JLabel 中，并且可以完美地拖动图像，但是，只要单击面板（在不存在 JLabel 的区域中），标签就会返回到其原始位置. 我无法弄清楚为什么会发生这种情况。请帮帮我，我已经花了几个小时来解决这个问题。谢谢！

```
public class CardLabelListener extends MouseAdapter {

    private MouseEvent initiateEvent = null;

    @Override
    public void mouseReleased(MouseEvent me) {
        System.err.println("mouse release");
        int dx = me.getX() - initiateEvent.getX();
        int dy = me.getY() - initiateEvent.getY();
        if (Math.abs(dx) > 5 || Math.abs(dy) > 5) {
            Rectangle oldBound = me.getComponent().getBounds();
            int newX = oldBound.x + dx;
            int newY = oldBound.y + dy;
            me.getComponent().setBounds(newX, newY, oldBound.width, oldBound.height);
        }
        initiateEvent = null;
    }

    public void mousePressed(MouseEvent me) {
        GreetingCard.setBackground.findComponentAt(me.getX(), me.getY());
        System.err.println("mouse pressed");
        initiateEvent = me;
        me.consume();
    }

    public void mouseDragged(MouseEvent me) {
        System.err.println(me.getSource());
        if (initiateEvent == null) return;

        me.consume();
        JComponent jc = (JComponent) me.getSource();
        TransferHandler handler = jc.getTransferHandler();
        handler.exportAsDrag(jc, me, TransferHandler.MOVE);

        initiateEvent = null;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T19:07:05.110

首先，您不是在拖动图标，而是在拖动组件本身。

其次，您正在与包含标签组件的布局管理器作斗争。当面板失效时，标签将返回到其原始布局位置。

尝试使用[JLayeredPane 之](http://docs.oracle.com/javase/tutorial/uiswing/components/layeredpane.html)类的东西来放置标签

**根据反馈更新示例**

```
public class MoveMe {

    public static void main(String[] args) {
        new MoveMe();
    }

    public MoveMe() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new MoveMePane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class MoveMePane extends JLayeredPane {

        public MoveMePane() {
            int width = 400;
            int height = 400;
            for (int index = 0; index < 10; index++) {
                String text = "Label " + index;
                JLabel label = new JLabel(text);
                label.setSize(label.getPreferredSize());

                int x = (int) Math.round(Math.random() * width);
                int y = (int) Math.round(Math.random() * height);
                if (x + label.getWidth() > width) {
                    x = width - label.getWidth();
                }
                if (y + label.getHeight() > width) {
                    y = width - label.getHeight();
                }
                label.setLocation(x, y);
                add(label);
            }

            MoveMeMouseHandler handler = new MoveMeMouseHandler();
            addMouseListener(handler);
            addMouseMotionListener(handler);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(400, 400);
        }
    }

    public class MoveMeMouseHandler extends MouseAdapter {

        private int xOffset;
        private int yOffset;
        private JLabel draggy;
        private String oldText;

        @Override
        public void mouseReleased(MouseEvent me) {
            if (draggy != null) {
                draggy.setText(oldText);
                draggy.setSize(draggy.getPreferredSize());
                draggy = null;
            }
        }

        public void mousePressed(MouseEvent me) {
            JComponent comp = (JComponent) me.getComponent();
            Component child = comp.findComponentAt(me.getPoint());
            if (child instanceof JLabel) {
                xOffset = me.getX() - child.getX();
                yOffset = me.getY() - child.getY();

                draggy = (JLabel) child;
                oldText = draggy.getText();
                draggy.setText("What a drag");
                draggy.setSize(draggy.getPreferredSize());
            }
        }

        public void mouseDragged(MouseEvent me) {
            if (draggy != null) {
                draggy.setLocation(me.getX() - xOffset, me.getY() - yOffset);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T19:05:31.237

为此，您需要`null`在 所在的容器上使用布局`JLabel`，否则该位置将重置为当前布局管理器放置标签的位置。

更好的方法是使用[DragLayout](http://tips4java.wordpress.com/2011/10/23/drag-layout/)

> DragLayout 旨在替换空布局。它将尊重组件的位置。默认情况下，它将使用组件的首选大小来确定其大小。最后，它会自动计算 Container 的首选大小。

# exception - 这些 MS DTC 异常是什么意思？

> ID：13145802
> 
> 赞同：3
> 
> 时间：2012-10-30T18:53:00.647
> 
> 标签：exception, transactionscope, msdtc

我编写了一个程序来演示多线程 DTC 超时的行为。我有几个例外，似乎是随机的。是所有这些简单的超时，还是其中一些表示更深层次的问题（连接池交互等）？

> Microsoft 分布式事务协调器 (MS DTC) 已取消分布式事务。
> 
> 分布式事务完成。在新事务或 NULL 事务中登记此会话。
> 
> 与当前连接关联的事务已完成但尚未处置。必须先处理事务，然后才能使用连接执行 SQL 语句。
> 
> 该操作对事务的状态无效。
> 
> ExecuteReader 需要一个打开且可用的连接。连接的当前状态为关闭。

这是代码的数据部分：

```
using (DemoDataDataContext dc1 = new DemoDataDataContext(Conn1))
using (DemoDataDataContext dc2 = new DemoDataDataContext(Conn2))
{
  WriteMany(dc1, 100);  //generate 100 records for insert
  WriteMany(dc2, 100000);  //generate 100,000 records for insert

  Console.WriteLine("{0} : {1}", Name, " generated records for insert.");
  using (TransactionScope ts = new TransactionScope())
  {
    dc1.SubmitChanges();
    dc2.SubmitChanges();
    ts.Complete();
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T16:58:56.190

所有这些异常都告诉我你有内存泄漏。对我来说，这些异常不仅仅是一些简单的超时，我认为你应该寻找更深层次的问题。

`ts.Complete()`不保证事务的提交。这只是将您的状态告知交易经理的一种方式。[http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.complete.aspx](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.complete.aspx)

您通知事务管理器您的事务已完成而实际上并未完成，这是否是一个问题？

# java - 使用 System.load 与库集作为代理

> ID：13145807
> 
> 赞同：1
> 
> 时间：2012-10-30T18:53:34.020
> 
> 标签：java, jvm, jvmti

我制作了一个简单的库来测量给定对象的大小。该库是通过 Java 类中的 JNI 访问的。它是专门为 Hotspot 设计的，因此它使用 JVMTI 并调用`GetObjectSize`.

我的问题是，更好的解决方案是什么？

1.  `System.load("library")`使用或 加载库

2.  将库设置为代理并通过发出带有代理选项的 java 命令显式加载它。

到目前为止，我看到的所有类似示例都使用了代理功能：

*   [从 JNI jclass 确定 Java 类大小](https://stackoverflow.com/questions/4978566/determine-java-class-size-from-jni-jclass)
*   [如何计算对象的大小](http://grokbase.com/t/struts/user/0478sdvqzw/ot-how-to-calculate-the-size-of-an-object)

以什么方式比仅仅加载库更有效？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:13:37.920

命令行注入的优点是代理与虚拟机一起加载。您可以在不修改程序的情况下将代理注入到每个 Java 程序中。`System.load`这样就在调用点完成了。您可以对更大的回调集做出反应，例如有一个[VM Initialization Event](http://docs.oracle.com/javase/1.5.0/docs/guide/jvmti/jvmti.html#VMInit)。如果你用`System.load`那个事件就过去了。

因此，我不认为使用命令行注入在某些方面会更有效，但对于某些用例来说更有效。

# php - 基于没有 eval 的字符串引用多维数组的元素

> ID：13145809
> 
> 赞同：0
> 
> 时间：2012-10-30T18:53:42.763
> 
> 标签：php, multidimensional-array, eval, variable-variables

好吧，我正在使用一个大型多维数组，其中包含的信息比我需要的多，我想循环遍历它以过滤我感兴趣的数据。遗憾的是，这个多维数组是动态生成的，并不总是包含我想要的数据，所以我必须使用如下逻辑：

```
if(isset($ar['b']['ba']['baa'])){
echo '<h3>'.$ar['b']['ba']['baa'].'</h3>';
}
if(isset($ar['b']['ba']['baba'])){
echo '<h3>'.$ar['b']['ba']['baba'].'</h3>';
}
if(isset($ar['b']['ba']['babb'])){
echo '<h3>'.$ar['b']['ba']['babb'].'</h3>';
} 
```

上面的效果很好，但看起来有点凌乱，所以我将上面的内容转换为：

```
$refAr=array();
$refAr[]='b->ba->baa';//3
$refAr[]='b->ba->bab->baba';//4
$refAr[]='b->ba->bab->babb';//5 
```

上面看起来更加漂亮和整洁，并且是我想要控制脚本的方式，以防我将来需要引用不同的键。我遇到的问题是尝试使用上述格式来实际引用数组。我认为变量变量会起作用，但显然它失败了。我使用 eval 的第二次尝试有效，但我对我的解决方案不太满意。这就是我需要你们进来的地方，有没有更好的方法来做到这一点？下面是我的尝试：

```
<?php

$ar=array(
    'a'=>array('aa'=>1,'ab'=>2),
    'b'=>array(
        'ba'=>array('baa'=>3,'bab'=>array('baba'=>4,'babb'=>5),'bac'=>array('baca'=>6,'bacb'=>7)),
    )
);

$refAr=array();
$refAr[]='b->ba->baa';//3
$refAr[]='b->ba->bab->baba';//4
$refAr[]='b->ba->bab->babb';//5
foreach($refAr as $ref)
{
    $r=explode('->',$ref);
    $r="\$ar['".implode("']['",$r)."']";
    echo '<h1>'.$r.'</h1>';
    echo '<h3>'.$$r.'</h3>';//undefined
    eval('$t='.$r.';');
    echo "<h3>$t</h3>";//works but uses eval, is there a better way?

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:08:02.297

你可以试试

```
$ar = array();
$ar['b']['ba']['baa'] = 3;
$ar['b']['ba']['bab']['baba'] = 4;
$ar['b']['ba']['bab']['babb'] = 5;

$refAr = array();
$refAr[] = 'b->ba->baa'; // 3
$refAr[] = 'b->ba->bab->baba'; // 4
$refAr[] = 'b->ba->bab->babb'; // 5

foreach ( $refAr as $ref ) {
    $t = $ar;
    foreach ( explode("->", $ref) as $v ) {
        if (!isset($t[$v]))
            break;
        $t = $t[$v];
    }
    is_array($t) and $t = null;
    echo "<h3>$t</h3>";
} 
```

输出

### 3

### 4

### 5

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T09:49:53.027

我决定回答我自己的问题。这就是我最终使用的：

```
<?php

//Sample PHP representation of dynamically-pulled JSON data from an untrusted source
$ar=array(
    'a'=>array('aa'=>1,'ab'=>2),
    'b'=>array(
        'ba'=>array('baa'=>3,'bab'=>array('baba'=>4,'babb'=>5),'bac'=>array('baca'=>6,'bacb'=>7)),
    )
);

//Reusable function
function resolveReference($ar,&$ref)
{
    $t = $ar;
    foreach ( explode('->',$ref) as $v )
    {
        if (!array_key_exists($v,$t)){$ref=null;return false;}
        $t = $t[$v];
    }
    $ref=$t;
    return true;
}

//The references I'm interested in but don't know if my dynamic data will contain these keys every time
$refAr=array();
$refAr[]='b->ba->baa';
$refAr[]='b->ba->bab->baba';
$refAr[]='b->ba->bab->babb';
$refAr[]='b->doesnt->exist';

foreach($refAr as $ref)
{
    echo '<h1>'.$ref.'</h1>';
    if(resolveReference($ar,$ref))
    {
        echo '<h3><span style="color:blue;">'.$ref.'</span></h3>';
    }else{
        echo '<h3><span style="color:red;">Alternative text for non-existent expected reference</span></h3>';
    }
} 
```

# java - 试图理解这行java代码

> ID：13145811
> 
> 赞同：-3
> 
> 时间：2012-10-30T18:53:47.453
> 
> 标签：java, android

```
mCallback = (OnHeadlineSelectedListener) activity; 
```

这是 android 应用教程的一些 java 代码。我不明白这到底在做什么。我知道它正在为 mCallback 赋值，但是什么？为什么 OnHeadlineSelectedListener 在括号中，然后活动对象就在它后面，到底是什么？

```
/*
 * Copyright (C) 2012 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package com.vizoplex.my.first.app;

import android.app.Activity;
import android.os.Build;
import android.os.Bundle;
import android.support.v4.app.ListFragment;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class HeadlinesFragment extends ListFragment {
    OnHeadlineSelectedListener mCallback;

    // The container Activity must implement this interface so the frag can deliver messages
    public interface OnHeadlineSelectedListener {
        /** Called by HeadlinesFragment when a list item is selected */
        public void onArticleSelected(int position);
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // We need to use a different list item layout for devices older than Honeycomb
        int layout = Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB ?
                android.R.layout.simple_list_item_activated_1 : android.R.layout.simple_list_item_1;

        // Create an array adapter for the list view, using the Ipsum headlines array
        setListAdapter(new ArrayAdapter<String>(getActivity(), layout, Ipsum.Headlines));
    }

    @Override
    public void onStart() {
        super.onStart();

        // When in two-pane layout, set the listview to highlight the selected list item
        // (We do this during onStart because at the point the listview is available.)
        if (getFragmentManager().findFragmentById(R.id.article_fragment) != null) {
            getListView().setChoiceMode(ListView.CHOICE_MODE_SINGLE);
        }
    }

    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);

        // This makes sure that the container activity has implemented
        // the callback interface. If not, it throws an exception.
        try {
            mCallback = (OnHeadlineSelectedListener) activity;
        } catch (ClassCastException e) {
            throw new ClassCastException(activity.toString()
                    + " must implement OnHeadlineSelectedListener");
        }
    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        // Notify the parent activity of selected item
        mCallback.onArticleSelected(position);

        // Set the item as checked to be highlighted when in two-pane layout
        getListView().setItemChecked(position, true);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T20:10:46.320

那就是类型转换。例如：你有两个方法的 Animal 接口，运行和吃。

```
public interface Animal {
    public String run();
    public String eat(String food);
} 
```

你有实现它的类，比如 Cat 类。Cat 类有一些额外的方法，scratch 和 mew。

```
public class Cat implements Animal{
   public String run(){
     return "Run as a cat";
   }
   public String eat(){
     return "Eat fish";
   }
   public String mew(){
     return "MEW!!!!";
   }
   public String scratch(){
     return "scratch-scratch-scratch";
   }
} 
```

另外，你有 Dog 类，它有 bark 方法。

```
public class Dog implements Animal{
   public String run(){
     return "Run as a dog";
   }
   public String eat(){
     return "Eat meat";
   }
   public String bark(){
     return "BARK!!!!";
   }
} 
```

所以，很多时候你需要和你的动物一起工作，就像和一些确切的动物（狗或猫）一起工作。但是没有你的帮助，编译器 cat 不会进行这种转换。所以，你必须告诉它你到底想要什么：

```
public void Show{
  Cat cat = new Cat(); //you have a cat
  Dog dog = new Dog(); //and a dog
  Animal animal = null; //and animal
  dog = (Dog)animal; //and here is where compiler can't convert animal to dog without your help.
  Animal animal2 = cat; //But this casting it can make without your help, as it exactly knows what to do.
} 
```

[这本书](https://rads.stackoverflow.com/amzn/click/com/0071591060)对学习Java非常有用。如果你真的有兴趣了解这些东西，你应该阅读它。在这本书中也可以找到关于铸造如何工作的完整解释。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T18:56:55.680

它试图将该活动转换为`OnHeadlineSelectedListener`，可能是因为该实际活动扩展了该`Listener`。这样，mCallback 充当了正确定义回调的侦听器。

**编辑**：

你有：

```
try {
    mCallback = (OnHeadlineSelectedListener) activity;
} catch (ClassCastException e) {
    throw new ClassCastException(activity.toString()
            + " must implement OnHeadlineSelectedListener");
} 
```

它正在尝试转换`activity`为`OnHeadlineSelectedListener`. 如果`activity`未实现此侦听器，则会引发异常。该消息非常简单：

```
activity.toString()+ " must implement OnHeadlineSelectedListener" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T18:58:01.803

我认为 mCallback 对象是活动对象类的子类。所以这个语句将活动对象转换为更具体的 mCallback 对象。

有关铸造的更多信息，请[单击此处](http://www.javabeginner.com/learn-java/java-object-typecasting)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T18:56:04.000

`activity`正在被[强制](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html)转换为一个正在分配的`OnHeadlineSelectedListener`对象。`mCallback`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T18:56:34.723

它将活动转换为 OnHeadlineSelectedListener。假设活动实现了 OnHeadlineSelectedListener。这样做是为了让您可以直接调用接口 OnHeadlineSelectedListener 中的方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-30T18:57:25.263

我最近从 Java 中过渡出来，但在我看来，那条线好像正在*转换* `activity`为 type `OnHeadlineSelectedListener`。强制转换将一种类型转换为另一种类型，如果类型不兼容，则抛出异常（一种或另一种形式）。

语法是这样的：

```
variable = (Type) variableOfType2; 
```

# asp.net-mvc-3 - 没有提交按钮的 ASP MVC3 复选框操作

> ID：13145812
> 
> 赞同：0
> 
> 时间：2012-10-30T18:53:58.333
> 
> 标签：asp.net-mvc-3, button, controller, submit, checkbox

我正在将 ASP.net 用于具有多个复选框和一个提交按钮的程序，该按钮根据选定的复选框启动操作。

但是，我的其中一个复选框应该与此提交按钮一样，即，在选择/取消选择此复选框时，必须触发与按钮相同的操作。有人可以帮我做这件事吗（或者指导我看一个教程）

我有一个控制器类和模型。

谢谢

编辑程序看起来像：

```
@using(Html.BeginForm("controllername", FormMethod.Get)) {
     @html.CheckBox("check1");
     @HTMl.Checkbos("check2");
     <input type="submit" value="Submit" />
} 
```

其他一切都在控制器中处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T18:58:44.367

您可以使用 javascript 来监听复选框的 check 事件，然后调用表单提交。

假设您的视图标记是这样的

```
<form id="yourFormId" action="user/post">
  <input type="checkbox" class="optionChk" value="1" /> One
  <input type="checkbox" class="optionChk" value="2" /> Two
  <input type="checkbox" class="optionChk" value="3" /> Three
</form>
<script type="text/javascript">
  $(function(){
    $(".optionChk").click(function(){
      var item=$(this);
      if(item.val()=="2")   //check your condition here
      {
         item.closest("form").submit();
      }
    });
  });
</script> 
```

**编辑**：*根据问题编辑。*

更改 CheckBox Helper 方法的用法，如下所示，将 CSS 类添加到复选框，以便我们可以将其用于 jQuery 选择。

```
 @Html.CheckBox("check1",new { @class="optionChk"}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T19:02:02.860

想象你有这样的东西：

```
@using(Html.BeginForm()) {

  <label class="checkbox">
    <input type="checkbox" name="chb_a" id="chb_a"> Option A
  </label>
  <label class="checkbox">
    <input type="checkbox" name="chb_b" id="chb_b"> Option B
  </label>
  <label class="checkbox">
    <input type="checkbox" name="chb_c" id="chb_c"> Option C
  </label>
  <label class="checkbox">
    <input type="checkbox" name="chb_d" id="chb_d"> Option D
  </label>

  <button type="submit" class="btn">Submit</button>

} 
```

你可以写一个简单的jQuery来补充：

```
$(".submit").click(function() {
  // find the <form> the element belongs and submit it
  $(this).closest('form').submit();
}); 
```

`submit`有了这个，如果你想让它们提交，你只需要添加一个名为任何复选框或更多按钮的类

例如：

```
 <label class="checkbox">
    <input type="checkbox" name="chb_e" id="chb_e" class="submit"> Option E
  </label> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T18:58:57.767

您可以在复选框上绑定点击事件。

```
$( '.myCheckboxes' ).click(function () {
  var clickedBox = $( this );
  // now do something based on the clicked box...
}); 
```

如果您需要知道选中了哪些复选框，那只是另一个选择器。

```
$( '.myCheckboxes:checked' ).each(function () {
  // Now you have access to each checked box.
  // Maybe you want to grab their values.
}); 
```

只需将复选框绑定到单击事件即可。假设您有一种唯一标识提交表单的复选框的方法。

```
$( '#formSubmitCheckbox' ).click(function() {
  $( '#myForm' ).submit();
}); 
```

# .net - 构建期间的 T4 代码生成，自定义程序集参考

> ID：13145821
> 
> 赞同：9
> 
> 时间：2012-10-30T18:54:24.963
> 
> 标签：.net, msbuild, t4

我有一个 T4 模板，可以处理我项目中的多个 .tt 文件。我还定义了一些自定义类来帮助代码转换过程。

```
<#@ template language="C#"  hostspecific="True" debug="True" #>
<#@ output extension="cs" #>
<#@ assembly name="System.Core.dll" #>
<#@ assembly name="$(TargetDir)\MyDependency.dll" #> 
```

这适用于 Visual Studio，我有一个正确定义 $(TargetDir) 的 VS 宏。

现在，我想在构建过程中执行代码生成过程。我补充说：

```
<TransformOnBuild>true</TransformOnBuild>
<OverwriteReadOnlyOutputFiles>true</OverwriteReadOnlyOutputFiles>
<IncludeDslT4Settings>true</IncludeDslT4Settings> <ItemGroup>
<T4ReferencePath Include="$(OutputPath)" />
</ItemGroup>
<Import Project="$(MSBuildExtensionsPath)\Microsoft\VisualStudio\TextTemplating\v10.0\Microsoft.TextTemplating.targets" /> 
```

我的构建运行，但我得到：

> C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\TextTemplating\v10.0\Microsoft.TextTemplating.targets (407)：主机在尝试解析程序集引用'$(TargetDir)\MyDependency 时抛出异常。 dll'。转换将不会运行。引发了以下异常：System.IO.FileLoadException：给定的程序集名称或代码库无效。（来自 HRESULT 的异常：0x80131047）在 System.Reflection.AssemblyName.nInit（RuntimeAssembly& 程序集，Boolean forIntrospection，Boolean raiseResolveEvent）在 System.Reflection.AssemblyName.nInit() 在 Microsoft.VisualStudio.TextTemplating.GlobalAssemblyCacheHelper.GetLocation(String strongName) 在Microsoft.VisualStudio.TextTemplating.Sdk.Host.GenericTextTemplatingHost。Microsoft.VisualStudio.TextTemplating.Engine.ResolveAssemblyReferences（ITextTemplatingEngineHost 主机，TemplateProcessingSession 会话）上的 ResolveAssemblyReference（字符串 assemblyReference）。行=-1，列=-1

显然它不会`$(TargetDir)`在团队构建上下文中解决。

我尝试将 TargetDir 添加到我的构建配置的属性组中，但无济于事。此值不会传递到 T4 代码生成器的上下文。

我不想使用环境变量。

如何`$(TargetDir)`在 Team Build 上下文中正确设置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-12T17:07:25.993

我看不到 Visual Studio 在哪里定义 $(OutputPath) 。您是否在项目中尝试 $(TargetDir) ？然后，您可以从 T4 文件中的程序集声明中删除 $(TargetDir)\。

我刚刚通过一系列可能的工作来获得与工作类似的东西，今天或明天将发表一篇博文。

所以：

```
<ItemGroup>
    <T4ReferencePath Include="$(TargetDir)" />
</ItemGroup> 
```

在你的 csproj 中，和

```
<#@ assembly name="MyDependency.dll" #> 
```

在您的 T4 文件中

# regex - 如何将url中的一个数字与正则表达式匹配

> ID：13145823
> 
> 赞同：0
> 
> 时间：2012-10-30T18:54:27.817
> 
> 标签：regex

我有这个 URL，我只想匹配 4，它可以是 0-99 之间的任何数字。

```
/img/4.png?t=1351606887 
```

匹配数字 4 和任何其他数字的正则表达式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:58:23.470

这实际上取决于您的 URL 的灵活性。根据您的正则表达式风格，您可以使用环视：

```
(?<=/img/)\d+(?=\.png) 
```

或捕获组：

```
/img/(\d+)\.png 
```

在后一种情况下，您将匹配`/img/4.png`，但第一个捕获的组将仅包含`4`.

您可以使用哪种变体，以及如何检索捕获内容实际上取决于您的语言/工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:59:19.893

```
/\/[0-9]+/ 
```

你觉得这样就够了吗？

# javascript - 函数内变量的Javascript继承（OpenERP）

> ID：13145825
> 
> 赞同：11
> 
> 时间：2012-10-30T18:54:30.063
> 
> 标签：javascript, openerp

基本上我试图通过扩展一个函数来覆盖它。我有以下基本（简化）代码：

```
openerp.point_of_sale = function(db) {

    var Order = Backbone.Model.extend({

        exportAsJSON: function() {
            return {'bigobject'}
        }
    })
} 
```

然后，我正在编写自己的 .js，我想在其中继承和覆盖*exportAsJSON*函数，但我不知道如何*.extend*它。这是我的错误方法：

```
openerp.my_module = function(db) {

    db.point_of_sale.Order = db.point_of_sale.Order.extend({

        exportAsJSON: function() {

            var order_data = this._super();
            //... add more stuff on object
            return order_data;
        }
    })
} 
```

正确的做法是什么？

我希望我为答案提供了足够的信息（顺便说一下，我正在研究 OpenERP）。任何帮助将不胜感激。

**编辑**：更具体地说，错误似乎在扩展本身：

```
db.point_of_sale.Order = db.point_of_sale.Order.extend({ 
```

...即使我放了一个简单的*return 0;* 在我的*exportAsJSON*函数中，页面未加载，并且我在浏览器控制台中收到以下错误：

```
"Cannot call method 'extend' of undefined" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T18:59:23.333

我想你想要这样的东西`SuperClass.prototype.method.call(this)`：

```
openerp.my_module = function(db) {

    db.point_of_sale.Order = db.point_of_sale.Order.extend({

        exportAsJSON: function() {

            var order_data = db.point_of_sale.Order.prototype.exportAsJSON.call(this);
            //... add more stuff on object
            return order_data;
        }
    })
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T02:54:42.510

这基本上是你的问题所在：

```
openerp.point_of_sale = function(db) {
    var Order = Backbone.Model.extend({
     ^
     |
  this is a private variable
  not a property! 
```

因此，您根本无法访问它。如果是这样定义的：

```
openerp.point_of_sale = function(db) {
    openerp.point_of_sale.Order = Backbone.Model.extend({
                           ^
                           |
                     this is now a property of point_of_sale
                     (basically public variable) 
```

那么您可以按照您尝试的方式访问它：

```
db.point_of_sale.Order = db.point_of_sale.Order.extend({ 
```

所以，答案是你不能这样做。您需要扩展或修改`db.point_of_sale`而不是`Order`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T19:00:26.360

这就是您通常在 JavaScript 中执行此操作的方式：

```
var eaj = db.point_of_sale.Order.prototype.exportAsJSON;

db.point_of_sale.Order = db.point_of_sale.Order.extend({
    exportAsJSON: function() {

        var order_data = eaj.apply( this, arguments );
        //... add more stuff on object
        return order_data;
    }
}) 
```

# html - 页面布局无表设计

> ID：13145829
> 
> 赞同：1
> 
> 时间：2012-10-30T18:54:40.593
> 
> 标签：html, css, tablelayout

我正在尝试学习无桌子设计，并且在一些应该很容易的事情上遇到了困难

我正在尝试在设计器的屏幕右下角创建一个保存或取消按钮，它看起来不错，但在浏览器（IE 和 Chrome）中，按钮移动到表单的右侧

![顶部是设计模式底部是浏览器](../Images/1e72cd40bfef5fdcab70cd837d23dbcf.png)

我已经尝试过高度自动并将其全部排除在外。如果我修复了主 div 的高度，那么它可以工作，但我并不总是知道那个高度。无论如何让按钮在主 div 的底部“流动”？

谢谢你

编码

```
 <%@ Page Title="" Language="C#" AutoEventWireup="true" MasterPageFile="~/Site.Master" CodeBehind="NewAccount.aspx.cs" Inherits="BudgetApplicationCSharp.NewAccount" %>
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">
  <style type="text/css" media="screen">
      #container
      {
          width:500px;
          margin: 5px;           
      }
      #main 
      {
          width:500px;
          height:auto;
          margin:1px;  
      }
      #left 
      {
          float:left;
          width:50%;
          padding-left:0px;
          margin:0px;

      }
      #right
      {
          float:right;
          width:50%
      }
      ol 
      {
          list-style:none;
      }
      input[type=button]
      {
          float:right;
          clear:right;
      }
       input[type=Text]
      {
           font:15px "MS Sans Serif";
      }
      label 
      {
          font:15px "MS Sans Serif";

      }
      fieldset 
      {
          padding:0px;
          margin:0px;
          border:0px none;
      }
      ol 
      {
          padding:0px;
          margin:0px;
          border:0px none;
      }
  </style>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
<div id="container">
    <div id="main">
        <div id="left">
            <fieldset>
                <ol>
                    <li>
                        <label for="AccountName">
                            Account Name</label>
                        <input id="AccountName" runat="server" />
                    </li>
                    <li>
                        <label for="Description">
                            Description</label>
                        <input id="Description" runat="server" />
                    </li>
                    <li>
                        <label for="InstituteName">
                            Institute Name</label>
                        <input id="InstituteName" runat="server" />
                    </li>
                    <li>
                        <label for="AccountType">
                            Institute Name</label>
                        <select id="cboAccountType" runat="server">
                        </select>
                    </li>
                </ol>
            </fieldset>
        </div>
        <div id="right">
            <fieldset>
                <ol>
                    <li>
                        <label for="AccountNumber">
                            Account Number</label>
                        <input id="AccountNumber" runat="server" />
                    </li>
                    <li>
                        <label for="RoutingNumber">
                            Routing Number</label>
                        <input id="RoutingNumber" runat="server" />
                    </li>                       
                </ol>
            </fieldset>
        </div>
    </div>
    <div id="buttons">
    <input id="btnSave" type="button" value="Save" runat="server" />
    <input id="btnCancel" type="button" value="Cancel" runat="server" />
    </div>
</div>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T18:59:11.173

这是一个浮动问题。你需要某种“clearfix”。在你的情况下，我会添加一个`overflow:hidden;`到#main ...这将创建一个新的盒子模型上下文，这将解决你的问题。在这里你有一个 jsfiddle 来演示这种行为（只需删除溢出：隐藏在那里查看差异）-> [http://jsfiddle.net/3k3yd/](http://jsfiddle.net/3k3yd/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T18:59:51.150

添加样式规则`#buttons { clear: both; }`应该导致按钮 div 低于浮动 div。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T19:07:10.520

添加

```
overflow: auto 
```

到`#main`定义。

这解决了其他人所说的，而不需要额外的标记（即添加一个空的 div）

这是[一个](http://jsfiddle.net/jcurran/K6AXK/)结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T19:05:03.577

当您在容器中浮动两个 div 时，您遇到了跨浏览器常见的问题。问题是容器的高度没有扩展到其中浮动 div 的高度。此问题的修复通常称为 clearfix。

在此示例中，我已将 clearfix 应用于您的标记：http: [//jsfiddle.net/3D7hz/](http://jsfiddle.net/3D7hz/)

它将这种样式添加到您的样式表中：

```
/* float clearing for IE6 */
* html .clearfix{
  height: 1%;
  overflow: visible;
}

/* float clearing for IE7 */
*+html .clearfix{
  min-height: 1%;
}

/* float clearing for everyone else */
.clearfix:after{
  clear: both;
  content: ".";
  display: block;
  height: 0;
  visibility: hidden;
  font-size: 0;
} 
```

并将 clearfix 类添加到标记中的主要元素：

```
 <div id="main" class="clearfix"> 
```

此链接详细描述了 clearfix 问题： [http ://www.positioniseverything.net/easyclearing.html](http://www.positioniseverything.net/easyclearing.html)

# ruby - Errno::ETIMEDOUT 未被 SystemCallError 捕获

> ID：13145834
> 
> 赞同：0
> 
> 时间：2012-10-30T18:55:01.227
> 
> 标签：ruby, exception-handling

我在 Ruby 1.8.7 中有一段代码

```
 rescue SystemCallError 
```

但程序偶尔会以`Errno::ETIMEDOUT`. SytemCallError 不应该捕获所有 Errno 错误吗？

编辑：代码是

```
 rescue SystemCallError, StandardError 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:57:32.533

它当然应该是！您确定这`rescue`是在抛出错误的路径中吗？

```
>> Errno::ETIMEDOUT.superclass
SystemCallError
>> Errno::ETIMEDOUT.new.is_a? SystemCallError
true 
```

还：

```
>> begin
?>   raise Errno::ETIMEDOUT, "Fail, please"
>> rescue SystemCallError, StandardError
>>   puts "Caught #{$!.inspect}"
>> end
Caught #<Errno::ETIMEDOUT: Operation timed out - Fail, please> 
```

# ios - UIWebView 不会加载

> ID：13145836
> 
> 赞同：1
> 
> 时间：2012-10-30T18:55:02.820
> 
> 标签：ios, uiwebview

我有一个应用程序，您可以在其中点击一个按钮以将您带到一个表格视图，该视图列出了 RSS 提要中的文章。然后，当您在该表视图中选择一行时，它应该转到所选行的 Web 视图。一切似乎都被调用了，但网络视图没有出现。

这是该项目的链接： [https ://www.dropbox.com/s/7ncfpwm2vor38av/KFBNewsroom%203.zip](https://www.dropbox.com/s/7ncfpwm2vor38av/KFBNewsroom%203.zip)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:15:39.933

我建议在您的 中添加一个委托`UIWebView`，以便您可以定义[`– webView:didFailLoadWithError:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIWebViewDelegate/webView%3adidFailLoadWithError%3a)并查看实际发生的情况。委托可以是管理 Web 视图的同一个 WebViewController 类实例。也很有用`– webViewDidFinishLoad:`，因此您知道 Web 视图何时完成。

```
- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error
{   
  NSLog([NSString stringWithFormat: @"%d", [error code]]);

      UIAlertView *alert = [[UIAlertView alloc] 
                          initWithTitle:@"Connection Error!" 
                                message:error.localizedErrrorDescription
                               delegate:nil 
                      cancelButtonTitle:@"OK" 
                      otherButtonTitles: nil];
      [alert show];
      [alert release];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T19:25:48.190

您正在尝试通过 null navigationcontroller 实例推送 WebViewController 类。因此，您需要更改 ListViewController 类中的几行代码。使用`[self presentModalViewController:webViewController animated:YES]; in place of` [[self navigationController] pushViewController:webViewController animated:YES]; 在 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 方法`

# sql-server-2008 - 在我不应该的时候得到 0 个结果

> ID：13145837
> 
> 赞同：0
> 
> 时间：2012-10-30T18:55:03.890
> 
> 标签：sql-server-2008

我正在运行此查询

```
select * 
from PortalUser 
where ID not in (select distinct PortalUserID from LoginHistory where LoginDateTime > '10/1/2012') 
```

并获得 0 个结果。

如果我跑

```
select distinct PortalUserID 
from LoginHistory 
where LoginDateTime > '10/1/2012' 
```

我得到了预期的结果集。让我们说 50 个结果

如果我跑

```
select * 
from portalUser 
```

我得到 200 个结果。

为什么是这样？

只是要清楚。LoginHistory 表有一个 PortalUserID，它不必是唯一的，但是 PortalUser..ID 是一个唯一的字段。

运行此查询

```
select count(ID) 
from PortalUser 
GO
select count(Distinct PortalUserID) 
from LoginHistory where LoginDateTime > '10/1/2012'' 
```

返回 119 和 47 行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T18:59:39.787

您的查询仅在子查询返回的列表中选择`ID` **NOT 。**`PortalUserID`PortalUser 中是否有没有从您的子查询返回的 ID 的记录。

# ruby-on-rails-3 - Ruby on Rails 默认选项值

> ID：13145840
> 
> 赞同：0
> 
> 时间：2012-10-30T18:55:21.700
> 
> 标签：ruby-on-rails-3, forms

我正在使用一个数组来存储我的表单中 f.select 下拉列表的值

```
 <%= f.label :country_of_origin %>
   <%= f.select :country_of_origin, [['Wales'],['Scotland'],['England']] %> 
```

而不是威尔士的默认值，我希望它说“请选择”（显然不希望能够发布值“请选择”）。有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T19:02:55.027

```
<%= f.select("model_name", "model_id", [['Wales'],['Scotland'],['England']], {:include_blank => 'Please Select..'}) %> 
```

# maven - 将 Maven 与外部构建脚本一起使用

> ID：13145851
> 
> 赞同：1
> 
> 时间：2012-10-30T18:56:04.730
> 
> 标签：maven, maven-install-plugin

我的应用程序依赖于第三方耳朵（它解构它，添加/修改其中的一些项目，并将其重构为新耳朵）。第三方耳朵必须使用第三方构建脚本来构建。

我正在尝试学习设置它的“maven-y”方式。我希望我需要将第三方 ear 安装到我的存储库中。

我想为第三方耳朵创建一个 pom.xml，它将构建第三方耳朵并安装/部署它。我创建了一个 pom.xml，它成功调用了第三方构建脚本（通过 maven-antrun-plugin），并在默认的 maven ear 项目所在的位置创建了 ear。

我的问题是 maven 的安装插件失败，因为它找不到存档（它希望打包的任何插件都在工件对象上设置了一个属性，而 maven-antrun-plugin 没有这样做）。

`mvn package`工作正常并生成耳朵。

运行时的确切错误消息`mvn install`如下所示：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-install-plugin:2.3.1:install (default-install) on project third_party_ear: The
packaging for this project did not assign a file to the build artifact -> [Help 1] 
```

有没有更好的方法来解决这个问题？

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.thirdparty</groupId>
    <artifactId>third_party_ear</artifactId>
    <version>9.0</version>
    <packaging>ear</packaging>

    <name>third_party_ear</name>

    <build>
        <plugins>
            <plugin>
                <artifactId>maven-ear-plugin</artifactId>
                <version>2.6</version>
                <executions>
                    <execution>
                        <id>default-ear</id>
                        <phase>none</phase>
                    </execution>
                    <execution>
                        <id>default-generate-application-xml</id>
                        <phase>none</phase>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-antrun-plugin</artifactId>
                <version>1.7</version>
                <executions>
                    <execution>
                        <phase>package</phase>
                        <configuration>
                            <target>
                                <subant target="build-ear" antfile="build.xml" buildpath="${project.basedir}"/>
                            </target>
                        </configuration>
                        <goals>
                            <goal>run</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T19:13:37.643

When you specify `<packaging>ear</packaging>` you are telling Maven to invoke the full lifecycle specified for that packaging.

In your case what you want to do is write a wrapper `pom.xml` that just shells out to your 3rd party build script without invoking the EAR lifecycle and attach the produced artifact to Maven's reactor...

Something like this should work

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.thirdparty</groupId>
    <artifactId>third_party_ear</artifactId>
    <version>9.0</version>
    <packaging>pom</packaging>

    <name>third_party_ear</name>

    <build>
        <plugins>
            <plugin>
                <artifactId>maven-antrun-plugin</artifactId>
                <version>1.7</version>
                <executions>
                    <execution>
                        <phase>package</phase>
                        <configuration>
                            <target>
                                <subant target="build-ear" antfile="build.xml" buildpath="${project.basedir}"/>
                                <attachartifact file="${project.build.directory}/${project.build.finalName}.ear" type="ear"/>
                            </target>
                        </configuration>
                        <goals>
                            <goal>run</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

There may be some slight glitches because the pom's packaging differs... but as this is not a classpath relevant artifact they shouldn't affect you.

Note the `attachartifact` ANT task can attach an artifact from anywhere, so you need not have battled ANT to get the file in the "right" place... though it is nicer to follow that convention. You may want to not use the `project.build.finalName` and hardcode the filename.

# c++ - 我如何获得屏幕的大小？

> ID：13145861
> 
> 赞同：2
> 
> 时间：2012-10-30T18:56:39.380
> 
> 标签：c++, xaml, windows-8, windows-runtime, c++-cx

我想知道屏幕的宽度以在 Win8 应用程序中设置弹出窗口的宽度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T19:06:11.047

假设您指的是屏幕的高度和宽度（或者更准确地说是应用程序窗口的高度和宽度），您可以从[Window.Bounds](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.window.bounds.aspx#Y0)

例如，下面是一个按钮后面的代码，它将在该窗口的文本框中显示当前窗口的宽度：

```
void App68::MainPage::Button_Click_1(Platform::Object^ sender, Windows::UI::Xaml::RoutedEventArgs^ e)
{
    txtWidth->Text = Window::Current->Bounds.Width.ToString();
} 
```

# python - 从 Ruby 调用 Python - PyPy 兼容性

> ID：13145871
> 
> 赞同：3
> 
> 时间：2012-10-30T18:57:44.497
> 
> 标签：python, ruby, pypy

我正在寻找从 Ruby 调用 Python 代码。有一些现有的工具可以做到这一点，并且这个网站上的一些问题推荐[http://rubypython.rubyforge.org/](http://rubypython.rubyforge.org/)，它通过在 Ruby 中嵌入 Python 解释器来工作。我正在开发一个应用程序，它使用 Python 独有的库（即图形工具，我有理由过度使用它，比如 RGL），但最终项目在 Rails 中，因此让 Ruby 代码完成控制工作将是理想的。我希望它很快，所以我正在使用 PyPy。有没有办法让 PyPy 解释器嵌入到 Ruby 代码中，或者让 Python 解释器`rubypython`运行 PyPy？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T19:18:08.690

不。好吧，不是没有很多工作。

首先，RubyPython 并不真正包含嵌入式 Python 解释器。它只是在运行时包装解释器。如[文档](http://rubypython.rubyforge.org/)中所示，您可以使用任何您想要的 Python 运行它，例如：

```
>> RubyPython.start(:python_exe => "python2.6") 
```

那么，当你尝试时会发生什么？

```
>> RubyPython.start(:python_exe => "/usr/local/bin/pypy")
RubyPython::InvalidInterpreter: An invalid interpreter was specified.
    from /Library/Ruby/Gems/1.8/gems/rubypython-0.6.3/lib/rubypython.rb:67:in `start'
    from /Library/Ruby/Gems/1.8/gems/rubypython-0.6.3/lib/rubypython/python.rb:10:in `synchronize'
    from /Library/Ruby/Gems/1.8/gems/rubypython-0.6.3/lib/rubypython/python.rb:10:in `synchronize'
    from /Library/Ruby/Gems/1.8/gems/rubypython-0.6.3/lib/rubypython.rb:54:in `start'
    from (irb):4 
```

不幸的是，它需要 CPython 2.4-2.7。它不适用于 CPython 3.x、PyPy、Jython 等。同样，来自文档：

> RubyPython 已经使用基于 C 的 Python 解释器 (cpython) 版本 2.4 到 2.7 进行了测试。计划工作以启用 Python 3 支持，但尚未开始。如果您有兴趣帮助我们启用 Python 3 支持，请告诉我们。

不看代码，我猜 ruby​​python 正在使用 ruby​​ffi 来： * 包装 CPython 嵌入 API，或者 * 通过其 dll/so/dylib 导出直接调用 CPython VM 内部。

如果是前者，该项目可能是可行的，但仍有很多工作要做。PyPy 不支持 CPython 的嵌入 API。如果它有自己的嵌入式 API，您可能会重写 ruby​​python 的较低级别来包装它们，而无需理会较高级别的代码。但是完全嵌入 PyPy 仍然是一项正在进行的工作，（请参阅[http://mail.python.org/pipermail/pypy-dev/2012-March/009661.html](http://mail.python.org/pipermail/pypy-dev/2012-March/009661.html)了解 6 个月前的情况。）所以，你'首先需要帮助 PyPy 嵌入准备好黄金时间和稳定，然后移植较低级别的 ruby​​python 以使用不同的 API。

如果是后者，那么您几乎就是 SOL。PyPy 永远不会支持 CPython 内部，而且 CPython 内部的大部分内容实际上是用 RPython 或 Python 编写的，然后为 PyPy 编译，所以原则上它甚至是不可能的。您必须彻底重写所有 ruby​​python 才能找到使其工作的方法，而不仅仅是移植较低级别。

一种替代方法是将 Ruby 移植到 RPython 并使用 PyPy 构建一个 Ruby 解释器和一个可以在更高级别上相互对话的 Python 解释器；那么，为 PyRuby 和 PyPy 编写类似 ruby​​python 的东西就很简单了。但是，第一步是笨拙的。

# android - android：使用 adb push 递归复制

> ID：13145872
> 
> 赞同：65
> 
> 时间：2012-10-30T18:57:47.467
> 
> 标签：android, adb

我认为 adb 的推送是基于文件的。我希望能够推送整个文件夹。没有脚本有没有简单的方法？

谢谢！

编辑：我需要使用子文件夹。

编辑：似乎 adb pull 是递归的，但 push 不是。所以我相应地更改了标题和描述。

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2013-05-02T10:59:49.933

`adb push mySourceFolder/. myDestAndroidFolder`试试这个（使用子文件夹）：.

空文件夹不会复制到 android 设备。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-01-13T18:21:53.327

我将进一步挖掘这个以给出一个完整的解决方案（仅适用于 linux），因为谷歌重定向到这个，我有这个完全相同的问题。

使用简单的 adb 推送，问题是在进行推送之前必须存在所有子目录，这可能会非常痛苦。

请注意，一个简单的解决方案是压缩文件夹，推动 zip 然后在设备上解压缩。但是假设您的设备上没有解压缩（非常不可能，真的）。

您想将包含大量子目录的完整树推送到设备的空目录 myDirectory 中。有两个步骤：

首先在源设备中创建所有子目录：

```
cd <folder-containing-myDirectory>
find myDirectory/ -type d -exec adb shell mkdir <path-to-folder-containing-myDirectory-in-device>/{} \; 
```

此命令查找 myDirectory 的所有子目录（包括 .，因此如果 myDirectory 已经存在，您将收到一条可以放心忽略的错误消息），并为每个子目录在设备上创建匹配的目录。

然后推动一切

```
adb push myDirectory/. <path-to-folder>/myDirectory 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-10-30T19:05:42.467

adb pull，拉取指定目录下的所有文件：

```
$ adb pull /mnt/sdcard/
pull: building file list...
pull: /mnt/sdcard/t3.txt -> ./t3.txt
pull: /mnt/sdcard/t2.txt -> ./t2.txt
pull: /mnt/sdcard/t1.txt -> ./t1.txt
3 files pulled. 0 files skipped. 
```

或者

```
$ adb push . /mnt/sdcard/
push: ./t2.txt -> /mnt/sdcard/t2.txt
push: ./t3.txt -> /mnt/sdcard/t3.txt
push: ./t1.txt -> /mnt/sdcard/t1.txt
3 files pushed. 0 files skipped. 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-08-05T21:59:55.880

也遇到了这个问题，发现这篇文章很有用，但可能找到了更完整的解决方案。从包含您要推送的文件/文件夹的文件夹中运行以下命令：

`adb push . /myDestinationFolder`

显然，关键是目标文件夹之前的前缀“/”。这适用于我的 Windows 命令提示符，但是当我从 git bash（在 Windows 上）运行它时，由于 bash shell 中路径中“/”的含义，我会遇到一些错误。所以这可能不适用于 linux/bash，但它肯定为我复制了所有子文件夹。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-17T06:18:54.450

我意识到这个问题有点老了，当问题排除它时，我将提到脚本，但无论如何我都会回答这个问题。主要是因为我希望我能在这里找到这个答案，然后再自己解决。

如果所有子文件夹都已经存在， adb push 将递归工作。它们可以是空的，似乎 adb push 不能创建文件夹。我发现这是一个有用的区别，因为可以运行如下一系列命令：

```
$ adb shell mkdir /folder
$ adb shell mkdir /folder/sub1
$ adb shell mkdir /folder/sub2
$ adb push folder 
```

所以，是的，可以制作一个小包装脚本来自动执行此操作。但是，我认为更重要的一点是它只需要文件夹在那里。这意味着如果这是您要在同一个文件夹中多次更新的内容。例如，将图片添加到现有的子文件夹结构将使用单个 adb push 命令一遍又一遍地工作。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-03-10T20:46:54.490

`autra`为了稍微 扩展' 的天才答案，我制作了一个快速脚本来自动执行此操作（仅适用于 Linux/Mac）。

我在我的主目录中创建了一个名为`adb-push`. 然后我用文本编辑器（如 gedit、nano、vim 等）编辑了该文件，并将以下内容放入其中：

```
#!/bin/bash

# Usage:
# adb-push <directory-on-computer-to-send> <directory-on-device-to-receive-it>
# Example:
# adb-push ~/backups/DCIM /sdcard

src="${1}";
trgt="$(basename ${1})";
dst="$(echo "${2}" | grep '/$')";
# If ${dst} ends with '/', remove the trailing '/'.
if [ -n "${dst}" ]; then
    dst="${dst%/*}";
fi;

# If ${src} is a directory, make directories on device before pushing them.
if [ -d "${src}" ]; then
    cd "${src}";
    cd ..;
    trgt="${trgt}/";
    find "${trgt}" -type d -exec adb shell mkdir "${dst}/{}" \;
fi;

adb push "${src}" "${dst}/${trgt}"; 
```

然后我让它可执行：

```
chmod +x ~/adb-push; 
```

这就是我运行它的方式：

```
~/adb-push <directory-on-computer-to-send> <directory-on-device-to-receive-it> 
```

例如，如果我想将“ *~/backups/DCIM* ”发送到我设备的 sdcard 文件夹，我会这样做：

```
~/adb-push ~/backups/DCIM /sdcard 
```

（但请记住，对于每个 Android 设备，sdcard 的位置并不是“ */sdcard* ”。例如，它可能是“ */mnt/sdcard* ”。）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-04-08T19:52:16.473

几年过去了，问题可能会或可能不会改变，但它仍然是 PITA。在 linux 上对我有用的是创建一个临时文件夹，创建一个指向我要复制的文件夹的符号链接，然后我 adb push。它忽略主目录，但复制子目录。目前，我不需要创建任何子目录，它们会为我创建和复制。这可能是特定于平台的，我不确定。但是我正在复制的主目录，它复制其中的文件而不是目录。因此临时目录被忽略，然后复制符号链接文件夹。示例： `mkdir tmp cd tmp ln -s ../Foo . ln -s ../Bar . cd .. adb push tmp /sdcard/` 它会将 Foo/file1 推送到 /sdcard/Foo/file1 只需 adb push Foo/。/sdcard/ 然后我得到 /sdcard/file1 这并不让我高兴。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-06-24T20:14:59.130

怎么样：存档->推送->提取

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-07-14T02:08:13.550

```
export FOLDER="Books"
TMPIFS="$IFS"
IFS=$'\n'
for i in `find "$FOLDER"/ -type d | sed 's,//\+,/,g'`; do
  adb shell mkdir -p /mnt/sdcard/"$i"
done && \
adb push "$FOLDER"/ /mnt/sdcard/"$FOLDER"
unset FOLDER
IFS="$TMPIFS" 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-01-17T16:27:18.857

我找不到解决方案，所以我做了一个：

```
from ppadb.client import Client as AdbClient
adb = AdbClient(host='127.0.0.1', port=5037)
devices = adb.devices()    #List of all connected devices
import os
import glob

def send_over_adb(device,hostpath,devpath="/storage/emulated/0/"):      # Recursively send folder and files over adb
    if os.path.isfile(hostpath):
        devpath = os.path.join(devpath,hostpath).replace('\\','/') # optimization for windows
        device.push(hostpath, devpath)
    elif os.path.isdir(hostpath):
        for i in glob.glob(hostpath+'\*'):
            print(i)
            send_over_adb(device,i,devpath)
    device.shell('am broadcast -a android.intent.action.MEDIA_MOUNTED -d file:///mnt/sdcard')
    device.shell('am force-stop com.android.gallery3d') #force create thumbnails 
```

此函数递归地发送文件夹和文件，同时保持文件夹结构并忽略空目录。

限制：文件名不应包含正斜杠或反斜杠（如果有任何操作系统允许，则为 idk）

# c - 与 Linux 中的特定接口连接

> ID：13145880
> 
> 赞同：-5
> 
> 时间：2012-10-30T18:58:29.850
> 
> 标签：c, linux, network-programming

我在 CPU 中连接了两个以太网卡。然后我将一张卡连接到互联网，另一张卡连接到调制解调器。它工作正常。从调制解调器我已连接到另一台 linux pc。当我从我的机器上 ping 另一台 pc ip 地址时，它没有 ping。如何配置它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T19:10:11.220

如果您有两个接口，则您有两个 IP 地址。

将您的套接字绑定到您要使用的 IP 地址/端口。

您可以阅读[此套接字教程](http://www.linuxhowtos.org/C_C++/socket.htm)以逐步​​在 Linux 上进行操作。

# ios - iOS 代码在一个应用程序中泄漏，但在另一个应用程序中没有

> ID：13145883
> 
> 赞同：0
> 
> 时间：2012-10-30T18:58:47.760
> 
> 标签：ios, memory-leaks, alassetslibrary

嗨，我一直试图在我的应用程序中追踪一个非常难以捉摸的内存泄漏。

为了找出原因，我削减了泄漏代码，甚至将其移至应用程序委托以进行测试，以尝试消除尽可能多的因素。

以下代码是从使用选项完成启动时调用的。

```
- (void)loadDataAsTest {

        NSLog(@"%s ", __PRETTY_FUNCTION__);

        _library = [[ALAssetsLibrary alloc] init];

        [_library enumerateGroupsWithTypes:ALAssetsGroupPhotoStream usingBlock:^(ALAssetsGroup *alAssetsGroup, BOOL *stop) {

            @autoreleasepool {

                if (alAssetsGroup) {

                    [alAssetsGroup enumerateAssetsUsingBlock:^(ALAsset *alAsset, NSUInteger index, BOOL *st) {
                        @autoreleasepool {

                            if (alAsset) {

                                NSLog(@"index = %u", index);
                                UIImage *image = [UIImage imageWithCGImage:[alAsset thumbnail]];

                            }
                            else {

                            }
                        }
                    }];
                }
            }

        }                     failureBlock:^(NSError *error) {

        }];

} 
```

在我的应用程序中，这段代码泄漏了大约 2000 个 CGImage，枚举了照片流中的 1000 张照片。创建的所有 2000 个 UIImage 都可以正常发布。

如果我出于测试目的创建一个新的空项目并将相同的代码放在应用程序委托中并以完全相同的方式调用它，它不会泄漏。所有的 CGimage 都被释放，所有的 UIImage 又被释放了大约 2000 个实例。

这两个项目都在使用 ARC。

为什么以完全相同的方式调用的相同代码在两个项目之间表现不同？

# posix - 名称和未命名信号量

> ID：13145885
> 
> 赞同：15
> 
> 时间：2012-10-30T18:58:54.157
> 
> 标签：posix, semaphore

我试图了解命名信号量和未命名信号量之间的异同，所以我的谷歌搜索得到了[这个](http://docs.oracle.com/cd/E19253-01/816-5137/sync-39/index.html)。我对页面上的措辞有疑问，它说：

*   未命名的信号量可能被多个进程**使用**
*   命名信号量可由多个进程**共享**

这两个词是否在这两种类型的信号量之间产生了任何重要的区别，或者它们是不相关的？

到目前为止，这就是我所拥有的：

```
Similarities
    -Several processes can do something with the semaphore

Difference
    -Named are referenced with pathname and unnamed are referenced by pshared value 
```

这就是我能从这个定义中收集到的全部信息。这就是一切，它们是否正确？还是我错过了一些重要的概念？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-30T22:06:01.717

考虑*谁*可以访问信号量。

未命名的信号量（缺少任何名称或句柄来定位它们）必须存在于某个预先存在的、商定的内存位置中。在子进程的情况下，通常是（1）共享内存（由`fork`子进程继承）；或 (2) 共享内存、全局变量或堆（如果它们在单个进程的线程之间共享）。这里最重要的是父、子或线程中的代码已经知道信号量的地址。

命名信号量对于不相关的进程是必需的。例如，生产者和消费者可能由两个不同的开发人员编写，并作为完全不相关的进程运行。但是它们必须共享一些需要受信号量保护的资源。命名信号量为它们提供了通往信号量的路径。

实际上，您可以在所有场景中使用命名信号量，但它们会带来一些额外的负担，因为您必须处理路径和权限，如果程序相关并且已经知道如何访问未命名信号量，则这些都是不必要的。例如，使用命名信号量在线程之间共享资源有点愚蠢。线程已经可以访问未命名信号量可能驻留的相同内存。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-11-17T01:50:53.170

接受的答案是错误的（以及@electron 给出的另一个答案）。*不相关的进程可以*使用未命名的 POSIX 信号量。您只需将数据结构存储在相关进程可访问的共享内存中，并在将可共享标志设置为 1 的情况下对其进行初始化，如此处所示（无耻地复制自[http://blog.superpat.com/2010/07/14/信号量-on-linux-sem_init-vs-sem_open/](http://blog.superpat.com/2010/07/14/semaphores-on-linux-sem_init-vs-sem_open/)）：

```
int shm;
sem_t * mutex;

if ((shm = shm_open("myshm", O_RDWR | O_CREAT, S_IRWXU))   0) {
    perror("shm_open");
    exit(1);
}

if (ftruncate(shm, sizeof(sem_t)) < 0 ) {
    perror("ftruncate");
    exit(1);
}

if ((mutex = mmap(NULL, sizeof(sem_t), PROT_READ | PROT_WRITE, MAP_SHARED, shm, 0)) == MAP_FAILED) {
    perror("mmap");
    exit(1);
}

if (sem_init(mutex, 1, 1) < 0) {
    perror("semaphore initialization");
    exit(1);
} 
```

共享内存到其地址空间的另一个进程映射可以访问相同的信号量并与原始进程同步。另请参阅[sem_init()](http://pubs.opengroup.org/onlinepubs/9699919799/functions/sem_init.html)的 POSIX 规范及其[linux 手册页](http://man7.org/linux/man-pages/man3/sem_init.3.html)。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-07-28T12:52:36.910

**命名信号量**`actual name`中有一个`file system`并且可以`shared`由多个***不相关的进程***组成。

**未命名的信号量**只能在`threads`属于***同一进程***的情况下使用。

**信号量**是使用函数*创建的*

```
 sem init(ptr_semaphore, flag, initial_value); 
```

在哪里

**ptr_semaphore**：指向信号量的指针

**flag** : 表示共享级别的标志

**initial_value**：信号量的初始值

如果传递`flag=0`给`sem_init()`然后**信号量**只能**由属于**创建信号量的进程的线程共享。因此它将创建**未命名的信号量**。

```
 sem_init(ptr_semaphore,0,initial_value)   //unamed semaphore 
```

传递一个**非零值**也会让`allow` **其他进程访问信号量**。因此，它将导致**命名信号量**。

```
 sem_init(ptr_semaphore,1,initial_value)   //named semaphore 
```

# java - 内部类必须引用封闭类吗？

> ID：13145887
> 
> 赞同：0
> 
> 时间：2012-10-30T18:58:58.957
> 
> 标签：java, inner-classes

我有一个内部类（非静态），它在其初始化中使用对封闭类的引用。现在内部类会保留对封闭类的引用吗？

```
class Enclosing {
  class Inner {
    private final ABC innerField = outerField.computeSomething();
  }

  private final XYZ outerField = something();
} 
```

**更新**

我非常清楚*可以*使用`Enclosing.this`.

但是，如果类不使用引用，编译后引用是否必须存在*？*即使引用仅在初始化中使用，是否有必要？

它在哪里说内部类*总是*持有对外部类的引用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T19:00:59.973

非静态嵌套类*始终*持有对封闭类的引用。`Inner`在您的示例中，您可以从as引用封闭类`Enclosing.this`。

[JLS 8.1.3“内部类和封闭实例”](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.1.3)：

> “类 O 的直接内部类 C 的实例 i 与 O 的实例相关联，称为 i 的直接封闭实例。对象的直接封闭实例（如果有）在创建对象时确定（ §15.9.2)。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T21:44:33.863

是的。内部类（或非静态嵌套类）就像外部类的任何其他实例成员一样，因此总是需要封闭类的引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T21:06:22.993

> 它在哪里说内部类总是持有对外部类的引用？

在[同一个地方它定义了 Outer.this 语法](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.8.4)。这种语法的存在就是引用的存在。没有任何迹象表明如果不使用它会被抑制。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-30T19:03:30.800

嵌套类有两种情况：

静态嵌套类。嵌套类不保留对外部类的引用。

**非静态嵌套类。嵌套类确实保留了对外部类的引用。**

扩展外部类的静态嵌套类的情况不如扩展外部类的非静态嵌套类有趣。

要记住的重要一点是，非静态嵌套类简称为内部类。

# ruby-on-rails - 使用 REXML 获取 XML ID

> ID：13145888
> 
> 赞同：2
> 
> 时间：2012-10-30T18:59:05.710
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rexml

我有一个 XML 响应，如下所示。我怎样才能获得元素？

在rails中我有：

```
xml = REXML::Document.new(contacts_as_xml)
Rails.logger.info xml[1].attributes["id"] 
```

哪个不返回'user@company.com'

谢谢

```
<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom" xmlns:openSearch="http://a9.com/-/spec/opensearch/1.1/" xmlns:gContact="http://schemas.google.com/contact/2008" xmlns:batch="http://schemas.google.com/gdata/batch" xmlns:gd="http://schemas.google.com/g/2005" gd:etag="W/&quot;Ck8BQ38yfyt7I2A9WhNSFk8.&quot;">
    <id>user@company.com</id>
    <updated>2012-10-30T18:14:12.197Z</updated>
    <category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/contact/2008#contact" />
    <title>Users's Contacts</title>
    <link rel="alternate" type="text/html" href="http://www.google.com/" />
    <link rel="http://schemas.google.com/g/2005#feed" type="application/atom+xml" href="https://www.google.com/m8/feeds/contacts/myuser%40mysite.com/full" />
    <link rel="http://schemas.google.com/g/2005#post" type="application/atom+xml" href="https://www.google.com/m8/feeds/contacts/myuser%40mysite.com/full" />
    <link rel="http://schemas.google.com/g/2005#batch" type="application/atom+xml" href="https://www.google.com/m8/feeds/contacts/myuser%40mysite.com/full/batch" />
    <link rel="self" type="application/atom+xml" href="https://www.google.com/m8/feeds/contacts/myuser%40mysite.com/full?max-results=10000" />
    <author>
        <name>User Howdy</name>
        <email>user@company.com</email>
    </author>
    <generator version="1.0" uri="http://www.google.com/m8/feeds">Contacts</generator>
    <openSearch:totalResults>2</openSearch:totalResults>
    <openSearch:startIndex>1</openSearch:startIndex>
    <openSearch:itemsPerPage>10000</openSearch:itemsPerPage>
    <entry gd:etag="&quot;QXc5eDVSLit7I2A9WhdSFk8PTgU.&quot;">
        <id>http://www.google.com/m8/feeds/contacts/myuser%40mysite.com/base/970a99881a51f3</id>
        <updated>2011-07-25T20:31:50.920Z</updated>
        <app:edited xmlns:app="http://www.w3.org/2007/app">2011-07-25T20:31:50.920Z</app:edited>
        <category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/contact/2008#contact" />
        <title>Jon Paris</title>
        <link rel="http://schemas.google.com/contacts/2008/rel#photo" type="image/*" href="https://www.google.com/m8/feeds/photos/media/myuser%40mysite.com/970a99881a51f3" />
        <link rel="self" type="application/atom+xml" href="https://www.google.com/m8/feeds/contacts/myuser%40mysite.com/full/970a99881a51f3" />
        <link rel="edit" type="application/atom+xml" href="https://www.google.com/m8/feeds/contacts/myuser%40mysite.com/full/970a99881a51f3" />
        <gd:name>
            <gd:fullName>Jon Adams</gd:fullName>
            <gd:givenName>Jon</gd:givenName>
            <gd:familyName>Adams</gd:familyName>
        </gd:name>
        <gd:email rel="http://schemas.google.com/g/2005#other" address="jon@adams.com" primary="true" />
        <gd:email rel="http://schemas.google.com/g/2005#home" address="jon@adams.com" />
    </entry>
    <entry gd:etag="&quot;R3YzcTFbKit7I2A9WhJbE00ORQY.&quot;">
        <id>http://www.google.com/m8/feeds/contacts/myuser%40mysite.com/base/1229b5e8eeef3e3</id>
        <updated>2012-09-22T08:57:06.889Z</updated>
        <app:edited xmlns:app="http://www.w3.org/2007/app">2012-09-22T08:57:06.889Z</app:edited>
        <category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/contact/2008#contact" />
        <title></title>
        <link rel="http://schemas.google.com/contacts/2008/rel#photo" type="image/*" href="https://www.google.com/m8/feeds/photos/media/myuser%40mysite.com/1229b5e8eeef3e3" gd:etag="&quot;UQZOJlcjWit7I2BmGBdVTzBfL2E2GGI5Myk.&quot;" />
        <link rel="self" type="application/atom+xml" href="https://www.google.com/m8/feeds/contacts/myuser%40mysite.com/full/1229b5e8eeef3e3" />
        <link rel="edit" type="application/atom+xml" href="https://www.google.com/m8/feeds/contacts/myuser%40mysite.com/full/1229b5e8eeef3e3" />
        <gd:email rel="http://schemas.google.com/g/2005#other" address="person@site.com" primary="true" />
        <gd:email rel="http://schemas.google.com/g/2005#home" address="person@gmail.com" />
    </entry>
</feed> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T19:16:17.917

**Problem**

When you do:

```
xml[1].attributes["id"] 
```

You are getting the text node of `<?xml version='1.0' encoding='UTF-8'?>` and then trying to get its id attribute. Since it does not exist, you got blank.

**Solution**

You want:

```
xml.root.elements['id'].text
#=> user@company.com 
```

Note that "user@company.com" is a text node of the id element. It is not an attribute.

# microdata - schema.org 产品标签不完整

> ID：13145898
> 
> 赞同：4
> 
> 时间：2012-10-30T18:59:32.523
> 
> 标签：microdata, schema.org

我收到“警告：schema.org 的微数据不完整”。使用 Google 结构化数据测试工具验证我的页面时。

我定义了这些属性：

[http://www.google.com/webmasters/tools/richsnippets?url=http%3A%2F%2Fmobi.victoriassecret.com%2Fbras%2Ffull-coverage&html=](http://www.google.com/webmasters/tools/richsnippets?url=http%3A%2F%2Fmobi.victoriassecret.com%2Fbras%2Ffull-coverage&html=)

有什么我想念的想法吗？我看了看，没有看到我遗漏的任何东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T23:52:04.333

问题是我对品牌的使用，在使用品牌时，您还必须将其标记为组织的项目类型：

```
<div itemprop="brand" itemscope itemtype="http://schema.org/Organization"> 
```

# vb.net - 使用 VB.NET 在 JET (Access) 中更新记录

> ID：13145904
> 
> 赞同：1
> 
> 时间：2012-10-30T18:59:41.390
> 
> 标签：vb.net, ms-access, jet

我正在尝试通过 VB.NET 更新 Access 中的记录。到目前为止，这是我的代码。目标是搜索条形码，它返回与之相关的数据，用户可以更改数据并保存更新的数据。除了更新部分，我什么都有。这是我的带有更新代码的保存按钮。我希望我说清楚了。

编辑：对不起。我忘了告诉你我所有的问题。它返回 0 行受影响，没有错误消息。

```
 Private Sub btnEditProductSave_Click(sender As System.Object, e As System.EventArgs) Handles btnEditProductSave.Click
    'Creates Transaction and Connection Objects
    Dim Transaction As OleDb.OleDbTransaction = Nothing
    Dim connection As OleDb.OleDbConnection = Nothing

    Try

        'Assign the Connection 
        connection = New OleDb.OleDbConnection(My.Settings.POS_NEWConnectionString)
        'Opens the Connection and begins the Transaction
        connection.Open()
        Transaction = connection.BeginTransaction

        Dim barcode As String = txtEditProductBarcode.Text
        Dim name As String = txtEditProductName.Text
        Dim supplier As String = cbEditProductSupplier.SelectedValue
        Dim sell As Decimal = Val(txtEditProductSellPrice.Text)
        Dim quantity As Integer = numQuantity.Value
        Dim discount As Decimal = Val(txtEditProductDiscount.Text)
        Dim department As Integer = Val(txtEditProductDepartment.Text)

        Dim SQL As String = "UPDATE PRODUCT SET ProductName = @productName, SupplierId = @supplier, SellPrice = @sellPrice, Quantity = @quantity, DiscountPrice = @discount, DepartmentNumber = @dept WHERE ProductBarcode = @barcode"

        'Creates the Command for the Transaction
        Dim CT1 As New OleDb.OleDbCommand

        'Assigns a connection and transaction to a new command object
        CT1.Connection = connection
        CT1.Transaction = Transaction

        CT1.Parameters.AddWithValue("@barcode", barcode)
        CT1.Parameters.AddWithValue("@productName", name)
        CT1.Parameters.AddWithValue("@supplier", supplier)
        CT1.Parameters.AddWithValue("@sellPrice", sell)
        CT1.Parameters.AddWithValue("@quantity", quantity)
        CT1.Parameters.AddWithValue("@discount", discount)
        CT1.Parameters.AddWithValue("@dept", department)

        CT1.CommandText = SQL

        Dim number As Integer = CT1.ExecuteNonQuery

        MsgBox(number & " of row were affected")

        CT1.Dispose()

    Catch ex As System.Exception
        System.Windows.Forms.MessageBox.Show(ex.Message)
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:19:39.487

OleDb 中的参数按索引顺序排列，而不是名称。

试试这种方式（条形码参数最后）：

```
 CT1.Parameters.AddWithValue("@productName", name)
    CT1.Parameters.AddWithValue("@supplier", supplier)
    CT1.Parameters.AddWithValue("@sellPrice", sell)
    CT1.Parameters.AddWithValue("@quantity", quantity)
    CT1.Parameters.AddWithValue("@discount", discount)
    CT1.Parameters.AddWithValue("@dept", department)
    CT1.Parameters.AddWithValue("@barcode", barcode) 
```

你也有一个`BeginTransaction`但没有提交。

它应该看起来像这样：

```
Dim tx As OleDb.OleDbTransaction = connection.BeginTransaction

// blah - blah - blah

tx.Commit() 
```

# c# - 铸造和反序列化

> ID：13145907
> 
> 赞同：0
> 
> 时间：2012-10-30T18:59:51.047
> 
> 标签：c#, xml

我在反序列化方面遇到问题。想象一下，我们正在创建一个允许绘制线条的绘图应用程序。我们有一个类负责绘制线条的方法，所以我们称之为*clsLine*。

现在，每条线的起点和终点都可以与其他线有 N 个连接。到目前为止一切正常。现在，我需要将绘图存储在 xml 文件中，以便我们进行序列化。问题是当我打开 xml 文件以将绘图反序列化回它曾经是的对象时，我们遇到了异常错误。

事实是我们为每条线使用一个列表来在其末端添加每条连接的线或线段。

更新：

```
public class clsLine : ShapeBase
{
    //has all the properties and methods that should be applied to a line
    //e.g. length, angle, and etc.
    Connections endConnections = new Connections();
    Connections startConnections = new Connections();

}

public class Connection
{
    clsLine segment;
    int handle;

    public clsLine Segment
    {
        get { return segment; }
        set { segment = value; }
    }

    public int Handle
    {
        get { return handle; }
        set { handle = value; }
    }
}

public class Connections : List<Connection>
{
   public bool Contains(ShapeBase instance)
   {
        foreach (Connection con in this)
        {
            if (instance.Equals(con.Segment))
               return true;
        }
        return false;
   }
} 
```

现在，在反序列化期间，我们得到一个异常：

*'向'OurProjectNameSpace.Connections'类型的集合添加值引发了异常。'*

我的同事解释说，这是由于从“连接”转换为“连接”，这是有道理的。请记住，Connections 是 Connection 类型的数组或列表。

我们可以在这里提个醒吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:34:04.847

您可能希望为这些类型创建自己的序列化和反序列化例程。尤其是在使用集合类型及其派生类时，您可能希望控制（反）序列化过程。

可以在此处找到有关如何进行自定义序列化的信息：http: [//msdn.microsoft.com/en-us/library/ty01x675 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ty01x675(v=vs.80).aspx)

使用 XML 序列化时，您可能还想实现`IXmlSerializable`： http: [//msdn.microsoft.com/en-us/library/system.xml.serialization.ixmlserializable (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/system.xml.serialization.ixmlserializable(v=vs.80).aspx)

# php - PHP - 使按钮单击将文本区域内容发送到表格

> ID：13145910
> 
> 赞同：-3
> 
> 时间：2012-10-30T18:59:53.707
> 
> 标签：php, string, button, onclick, submit

> **可能重复：**
> [将文本从 textarea 插入 MySQL 数据库而不丢失格式](https://stackoverflow.com/questions/5863320/inserting-text-from-textarea-into-mysql-database-without-losing-formatting)

谁能告诉我如何让提交按钮将文本区域的内容提交到表格？我知道这是一个非常简单的问题，但不幸的是我几天来一直找不到任何解决方案。

**这是代码：**

```
 <div class="textareawrapper">
<textarea name="reddilemma" Class="redtext" rows="4" cols="30" onclick="this.value = firstToUpper(this.value)" value="$reddata"></textarea>
<textarea name="bluedilemma" Class="bluetext" rows="4" cols="30" onclick="this.value = firstToUpper(this.value)"></textarea>

      </div>
    <input type="submit" Class="submit" />

<?PHP

$user_name = "blabla";
$password = "blablabla";
$database = "blabla_database";
$server = "localhost";
$db_handle = mysql_connect($server, $user_name, $password);
$db_found = mysql_select_db($database, $db_handle);
$reddata = $_post['reddilemma'];
$bluedata = $_post['bluedilemma'];

if ($db_found) {

$SQL = "INSERT INTO dilemma_id (reddilemma, bluedilemma) VALUES ('$reddata', '$bluedata')";
$result = mysql_query($SQL);

mysql_close($db_handle);

print "";
}
else {
print "Database NOT Found ";
mysql_close($db_handle);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T19:02:16.070

PHP 变量名是[区分大小写](http://php.net/manual/en/language.variables.basics.php)`$_POST`的，你不想访问`$_post`，所以试试这个：

```
$reddata = $_POST['reddilemma'];
$bluedata = $_POST['bluedilemma']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T19:03:38.827

您需要用`<form>`标签包装您的元素以提交数据。

# javascript - Ext JS 4：覆盖发送到服务器的数据格式

> ID：13145912
> 
> 赞同：4
> 
> 时间：2012-10-30T19:00:08.320
> 
> 标签：javascript, extjs, extjs4, checkbox

我正在使用 Ext JS 4 创建一个简单的管理员 UI。我从 Sencha 网站上的[这个示例开始。](http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/writer/writer.html)我在表单中添加了一个复选框组（有四个选项），并且我根据表单下方网格中的选定记录动态检查了这些框。一切正常，但是当我将数据发送到服务器时，复选框组中的数据格式因单击的按钮而异。

例如，当我编辑一条记录并单击保存按钮时，Ext JS 发送一个数组，其中包含对应于复选框选中状态的真/假值：

```
{"available": [true, true, false, false]} 
```

当我创建一个全新的记录并单击添加按钮时，Ext JS 会发送一个数组，其中包含已选中的复选框的名称：

```
{"available": ["Selection_1", "Selection_2", "Selection_3"]} 
```

最后，如果我创建一条新记录并单击添加按钮但只选中一个复选框，Ext JS 会发送一个字符串值（与第二个示例中发送的数组相反）：

```
{available": "Selection_1"} 
```

为什么 Ext JS 会这样做？这使得处理服务器端的数据变得困难。此外，有没有一种方法可以覆盖保存按钮将数据发送到服务器的方式，以便它以与添加按钮发送的相同格式发送数据？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T21:41:25.917

您可以使用 allowSingle:false 确保所有写入操作都发送记录数组，而不管记录数如何。这是 API 文档：[http ://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.writer.Json-cfg-allowSingle](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.writer.Json-cfg-allowSingle)

至于正在发送的值。我不清楚这里到底发生了什么，但你可能想看看这个函数：[http ://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.CheckboxGroup-method-获取提交数据](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.CheckboxGroup-method-getSubmitData)

编辑：另一个注释 - 复选框使用[**inputValue**](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.field.Checkbox-cfg-inputValue)来确定表单提交时要发送的内容。检查此属性的配置。

# jquery - ko.applyBinding 使用 Knockout 刷新搜索结果？

> ID：13145921
> 
> 赞同：2
> 
> 时间：2012-10-30T19:00:41.253
> 
> 标签：jquery, .net, asp.net-mvc-3, knockout.js

我想用搜索到的数据更新我的数据绑定 Ul-Li 列表的内容。我正在使用以下 ViewModel

```
function PatientsModel(data)
{
    var self = this;

    self.Patients = ko.observableArray([]);

    self.Patients(data.Patients);

    self.addPatient = function (model, event)
    {
        alert("Patients to Add: " + model.LastName + ',' + model.FirstName);
        //Replace with AJAX Calls : self.people.push({ name: "New at " + new Date() });
    };

    self.removePatient = function (model, event)
    {
        alert("Patients to Delete:" + model.LastName + ',' + model.FirstName);
        //Replace with AJAX calls : self.people.remove(this);
    }

    self.RefreshData = function (data)
    {
        self.Patients = ko.observableArray([]);
        self.Patients(data.Patients);
    }
} 
```

刷新我创建的 RefreshData 的内容，该方法将使用 Ul更新数据绑定 **“foreach：患者”****的患者**

 **我正在做以下绑定：

```
AllPatientList.PatientsModel = null;
                            AllPatientList.PatientsModel = new PatientsModel(data);
                            ko.applyBindings(AllPatientList.PatientsModel, $('#AllPatientDiv>div>ul')[0]); 
```

并遵循更新视图模型的内容：

```
if (AllPatientList.PatientsModel != null && AllPatientList.PatientsModel != undefined)
                            {
                                AllPatientList.PatientsModel.RefreshData(data);
                            }
                            else
                            {
                                AllPatientList.PatientsModel = new PatientsModel(data);
                                ko.applyBindings(AllPatientList.PatientsModel, $('#AllPatientDiv>div>ul')[0]);
                        } 
```

但它不起作用，UL 的内容**没有改变**。

此外，我尝试执行以下操作：

```
ko.cleanNode($('#AllPatientDiv>div>ul')[0]);
AllPatientList.PatientsModel = new PatientsModel(data);
                                ko.applyBindings(AllPatientList.PatientsModel, $('#AllPatientDiv>div>ul')[0]); 
```

它正在生成带有重复/重复数据条目的列表。它显示 9 个列表项而不是 3 个。（每个重复 3 次）。

我无法弄清楚我在这里做错了什么。ko.cleanNode() 也不会从列表中删除内容。请帮助，我如何用更新的内容重新绑定 UL - LI 列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T19:06:13.847

它们没有改变，因为您的 RefreshData 函数正在破坏绑定。当您第一次调用时，会创建对数组`applyBindings()`的订阅。`Patients`当你打电话时，`RefreshData`你正在用一个新的数组**覆盖数组。**这个新数组没有绑定订阅。

如果要清除旧数组，请`removeAll`在添加新数据之前使用。这将保持绑定订阅完好无损。

编辑：

这是一个[非常简单的小提琴](http://jsfiddle.net/9n4fj/)演示这个**

# javascript - 将逗号和哈希分隔的字符串转换为数组

> ID：13145923
> 
> 赞同：1
> 
> 时间：2012-10-30T19:00:44.310
> 
> 标签：javascript, string, arraylist, local-storage, jquery-ui-sortable

我正在使用 jquery sortable() 创建可拖动和可排序的框。

JQuery 代码如下所示：

```
 $('.column').sortable({
    connectWith:                '.column',
    handle:                     '.header',
    cursor:                     'move',
    placeholder:                'placeholder',
    forcePlaceholderSize: true,
    opacity: 0.8,
    stop: function(event, ui)
        {
            $(ui.item).find('h2').click();
            var sortorder='';

            $('.column').each(function(){
                var itemorder=$(this).sortable('toArray');
                var columnId=$(this).attr('id');
                sortorder+=columnId+'='+itemorder.toString()+'&';
            });
            sortorder = sortorder.substring(0, sortorder.length - 1)
            console.log('SortOrder: '+sortorder);
            //localStorage.setItem(JSON.stringify(sortorder).sortable);
            localStorage.setItem("sortables", sortorder);
            //localStorage.getItem("sortables");
        }
    }).disableSelection(); 
```

它在排序后生成的字符串是这样的，然后保存到本地存储中：

"col1=box3,box2,box1&col2=box4"

我很难将它转换回数组，我也想知道一旦它被转换回数组，我该如何获取这个数组并将其应用回盒子的排序顺序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:06:41.487

尝试像下面这样的简单迭代来创建一个`object`带有键`col1`和值的数组`[box3, box2, box1]`

**演示：http:** [//jsfiddle.net/2yt5y/2](http://jsfiddle.net/2yt5y/2)

```
var str = 'col1=box3,box2,box1&col2=box4';

var cols = str.split('&');
var result = {};
for (var i = 0; i < cols.length; i++) {
   var col = cols[i].split('=');
   var vals = col[1].split(',');

   result[col[0]] = vals;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:54:53.863

从 localStorage 存储和检索排序顺序后，您希望遍历每个列，将 portlet 以与它们之前在列中相同的顺序“附加”到它们。因此，最后一个 portlet 将最后附加，第一个 portlet 首先附加。

这是代码：

```
 var str = localStorage.getItem("sortables." + window.location.pathname);
    if (str) {
        var cols = str.split('&');
        for (var i = 0; i < cols.length; i++) {
            var col = cols[i].split('=');
            if (col[1].length > 0) {
                var vals = col[1].split(',');
                for (var j = 0; j < vals.length; ++j) {
                    console.log('appending ' + vals[j] + ' to ' + col[0]);
                    $('#'+col[0]).append($('#'+vals[j]));
                }
            }
        }
    } 
```

这是小提琴：http: [//jsfiddle.net/bWXZU/10/](http://jsfiddle.net/bWXZU/10/)

请注意，您要正确处理几种情况：（上面的代码确实如此）

1.  当本地存储中没有任何内容时
2.  当一列没有项目时

希望这可以帮助你！

约翰...

# c# - 如何从文件中删除 \n 字符？

> ID：13145924
> 
> 赞同：4
> 
> 时间：2012-10-30T19:00:47.820
> 
> 标签：c#, .net, sed, newline

我有一个问题应该让大多数人去“WTF？”，但我仍然有它。

我从供应商那里得到了一堆数据文件。它采用自称是 CSV 的自定义平面文件格式，但它不是逗号分隔的，并且值没有被引用。所以，根本不是真正的 CSV。

```
foo,bar,baz
alice,bob,chris 
```

等等，除了更长更不有趣。问题是，一些记录嵌入了换行符（！！！）：

```
foo,bar
rab,baz
alice,bob,chris 
```

这应该是两个记录，每个记录三个字段。通常，我只会说“不，这很愚蠢。”，但我不经意地仔细观察，发现它实际上是一种与实际行结束顺序不同的行尾：

```
foo,bar\n
rab,baz\r\n
alice,bob,chris\r\n 
```

注意第一行的 \n。我已经确定这适用于我发现的所有嵌入换行符的情况。所以，我基本上需要做`s/\n$//`（我试过这个特定的命令，它没有做任何事情）。

注意：我实际上并不关心字段的*内容*，所以用空替换换行符就可以了。我只需要文件中的每一行都有相同数量的记录（理想情况下，在同一个地方）。

我编写的用于处理文件的工具中有一个现有的解决方案：

```
Guid g = Guid.NewGuid();

string data = File.ReadAllText(file, Encoding.GetEncoding("Latin1"));
data = data.Replace("\r\n", g.ToString()); //just so I have a unique placeholder
data = data.Replace("\n", "");
data = data.Replace(g.ToString(), "\r\n"); 
```

但是，这在大于 1 GB 左右的文件上会失败。（此外，我还没有对其进行分析，但我怀疑它也很慢）。

我可以使用的工具是：

*   cygwin 工具（sed、grep 等）
*   。网

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T19:03:30.380

与其将整个内容作为一个大（可能是巨大的）字符串读入内存，不如考虑一种基于流的方法。

打开输入流并一次读取一行，根据需要进行替换。打开一个输出流并将修改后的行写入其中。就像是：

```
static void Main( string[] args )
{
    using( var inFs = File.OpenRead( @"C:\input.txt" ) )
    using( var reader = new StreamReader( inFs ) )
    using( var outFs = File.Create( @"C:\output.txt" ) )
    using( var writer = new StreamWriter( outFs ) )
    {
        int cur;
        char last = '0';
        while( ( cur = reader.Read() ) != -1 )
        {
            char next = (char)reader.Peek();
            char c = (char)cur;
            if( c != '\n' || last == '\r' )
                writer.Write( c );

            last = c;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T03:42:24.777

做这么简单的事情需要大量的代码。

试试这个。

```
tr -d '\n' <dirtyfile >cleanfile 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T19:54:12.803

这是一`StreamReader`门似乎做我想做的事。请注意，这可能是令人难以置信的特定领域，因此它可能有用也可能没有用：

```
class BadEOLStreamReader : StreamReader {
    private int pushback = -1;

    public BadEOLStreamReader(string file, Encoding encoding) : base(file, encoding) {

    }

    public override int Peek() {
        if (pushback != -1) {
            var r = pushback;
            pushback = -1;
            return r;
        }

        return base.Peek();
    }

    public override int Read() {
        if (pushback != -1) {
            var r = pushback;
            pushback = -1;
            return r;
        }

        skip:
        var ret = base.Read();
        if (ret == 13) {
            var ret2 = base.Read();
            if (ret2 == 10) {
                //it's good, push back the 10
                pushback = ret2;
                return ret;
            }
            pushback = ret2;
            //skip it
            goto skip;
        } else if (ret == 10) {
            //skip it
            goto skip;
        } else {

            return ret;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T22:11:47.410

**编辑**：经过一些测试，awk 解决方案在速度方面给出了更好的结果。

UNIX/Linux/Cygwin 中的标准文件/输入过滤器很难处理二进制文件。要使用过滤器做到这一点，您需要将文件转换为十六进制，使用`sed`（或`awk`，参见下面的第二个解决方案）对其进行编辑，然后将其转换回其原始数据。这应该这样做：

```
xxd -c1 -p file.txt | 
  sed -n -e '1{h}' -e '${x;G;p;d}' \
      -e '2,${x;G;/^0d\n0a$/{P;b};/\n0a$/{P;s/.*//;x;b};P}' |
  xxd -r -p 
```

好了，这个不好理解，先从简单的部分说起：

*   `xxd -c1 -p file.txt`从二进制转换`file.txt`为十六进制，每行一个字节。
*   `xxd -r -p`恢复转换。
*   将前面没有(0d in HEX)`sed`的 (0a in HEX) 替换为空。`\n``\r`

该`sed`部分的思想是将前一个字节存储在保持空间中，并同时处理前一个字节和当前字节：

*   在第一行，将行（字节）存储在保持空间中。
*   在最后一行，以正确的顺序打印两个字节 ( `x;G;p`) 并停止脚本 ( `d`)。
*   对于中间的行，在保持空间中有当前字节和模式空间 ( `x;G`) 中有 2 个字节（前一个和当前）之后，有 3 种可能的情况：
    1.  如果是 a `\r\n`，则打印`\r`保留`\n`在下一个循环的保留空间中并停止此循环（`b`命令）。
    2.  否则，如果它以`\n`（意味着它不是从 开始`\r`）在保持空间中存储一个空字符串并停止此循环（`b`命令）
    3.  否则打印第一个字符。

可能更容易理解`awk`：

```
xxd -c1 -p file.txt |
  awk 'NR > 1 && $0 == "0a" && p != "0d" {$0 = ""}
       NR > 1 {print p}
       {p = $0}
       END{print p}' |
  xxd -r -p 
```

它可以通过以下方式进行测试：

```
printf "foo,bar\nrab,baz\r\nalice,bob,chris\r\n" |
  xxd -c1 -p | 
  sed -n -e '1{h}' -e '${x;G;p;d}' \
      -e '2,${x;G;/^0d\n0a$/{P;b};/\n0a$/{P;s/.*//;x;b};P}' |
  xxd -r -p 
```

或者

```
printf "foo,bar\nrab,baz\r\nalice,bob,chris\r\n" |
  xxd -c1 -p |
  awk 'NR > 1 && $0 == "0a" && p != "0d" {$0 = ""}
       NR > 1 {print p}
       {p = $0}
       END{print p}' |
  xxd -r -p 
```

# mysql - 任何人都可以在sql语法中找到错误错误

> ID：13145925
> 
> 赞同：-1
> 
> 时间：2012-10-30T19:00:49.257
> 
> 标签：mysql, ddl

有人能告诉我这段代码有什么问题吗

表的表结构`epay_area_list`

```
CREATE TABLE epay_area_list(
   id tinyint( 3 ) unsigned NOT NULL AUTO_INCREMENT ,
   titlechar( 30 ) NOT NULL default '',
   parent tinyint( 4 ) NOT NULL default '0',
   akey bigint( 20 ) NOT NULL default '0',
   PRIMARY KEY ( id )
) TYPE = 'MyISAM'; 
```

MySQL 说：

> 文档 #1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 23 行的 'TYPE='MyISAM'' 附近使用正确的语法

我将不胜感激任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T19:05:10.830

您在`title`其 datatype之间缺少空格`char( 30 )`：

```
CREATE TABLE IF NOT EXISTS epay_area_list (
   id tinyint( 3 ) unsigned NOT NULL AUTO_INCREMENT ,
   title char( 30 ) NOT NULL default '', -- ADDED SPACE HERE
   parent tinyint( 4 ) NOT NULL default '0',
   akey bigint( 20 ) NOT NULL default '0',
   PRIMARY KEY ( id )
) TYPE = 'MyISAM'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T19:28:53.173

```
CREATE TABLE epay_area_list(
   id tinyint( 3 ) unsigned NOT NULL AUTO_INCREMENT ,
   title char( 30 ) NOT NULL default '',
   parent tinyint( 4 ) NOT NULL default '0',
   akey bigint( 20 ) NOT NULL default '0',
   PRIMARY KEY ( id )
) ENGINE = 'MyISAM'; 
```

1.  你错过了和之间的`title`空间`char`
2.  你最后需要使用`ENGINE`not`TYPE`

# java - Action Listener 下的单选按钮

> ID：13145928
> 
> 赞同：0
> 
> 时间：2012-10-30T19:01:00.917
> 
> 标签：java, swing, jdbc, actionlistener, jradiobutton

我希望当我选择一个单选按钮并单击执行按钮时，我希望我的搜索结果返回作者标题和年份的结果。例如，如果我单击作者并输入存储在数据库中的作者姓名，我想获取作者、标题和年份。问题在于将单选按钮连接到执行框。提前致谢。

```
 package data

         import java.awt.*;
         import java.awt.event.*;
         import javax.swing.*;
         import java.sql.*;
         import java.util.ArrayList;
         public class data extends JFrame implements ActionListener{

/**
 * @param args the command line arguments
 */
//Database Globals
Connection conn;
Statement stmt;
ResultSet result;

//Instance Variables
private Container contentPane;
private JLabel labelSearch;
private JTextField  tfSearch;
private JButton execButton;
private JRadioButton rbAuthorName, rbTitle, rbYear;  
private ButtonGroup searchChoices;
ArrayList<JRadioButton> radioButtonList = new ArrayList<JRadioButton>();

//Constructor
public data(){
    super("Database Search");
    connect();        
}    
//Creating the GUI 
public void buildGui(){

contentPane= getContentPane();
contentPane.setLayout(new FlowLayout());

    //set pane size
    setVisible(true);
    setSize(200,150);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    //Initializing objects
    labelSearch = new JLabel("Look Up");
    tfSearch = new JTextField(30);
    rbAuthorName = new JRadioButton("Author");
    rbTitle = new JRadioButton("Title");
    rbYear = new JRadioButton("Year");
    searchChoices = new ButtonGroup();
    execButton = new JButton("Execute");

    //Adding objects to the component pane
    contentPane.add(rbAuthorName);
    contentPane.add(rbTitle);
    contentPane.add(rbYear);
    contentPane.add(execButton);
    contentPane.add(labelSearch);
    contentPane.add(tfSearch);              
    radioButtonList.add(rbAuthorName);
    radioButtonList.add(rbTitle);
    radioButtonList.add(rbYear);
    execButton.addActionListener(this);
}

public void connect(){
     try
    {
       System.out.println("Connection to Driver..."); 
       Class.forName("com.mysql.jdbc.Driver");
       System.out.println("Connection successful");
       System.out.println("Connection to Database...");
       conn = DriverManager.getConnection("jdbc:mysql://localhost/tbl_books","root","");
       System.out.println("Connection successful");   

    }catch(ClassNotFoundException cfe)
    {
        System.out.println ("Connection error: "+cfe.getMessage());                    
    }        
    catch(SQLException sqle)
    {
        System.out.println ("Connection error: "+sqle.getMessage());                    
    }           
} 
```

@Override public void actionPerformed(ActionEvent e){

```
 //Object src = e.getSource();
        if(e.getSource()==execButton){
            String buttonName ="";

        for(JRadioButton button: radioButtonList){
         if(button.isSelected()){
           buttonName = button.getName();
        }
            searchData(buttonName);

        }   

    }
}
public void searchData(String strData){
     strData= tfSearch.getText();   

    try
    {

        stmt = conn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE,ResultSet.CONCUR_UPDATABLE);
        String sqlString = "SELECT tbl_authors.author, tbl_books.title, tbl_books.year " + "from tbl_authors, tbl_books " + "where tbl_authors.isbn = tbl_books.isbn";

        if(rbAuthorName.isSelected()){
            sqlString = sqlString + "author LIKE '%" + strData + "%'";
        }

        else if(rbTitle.isSelected()){
            sqlString = sqlString + "title LIKE '%" + strData + "%'";
        }

        else if(rbYear.isSelected()){
            sqlString = sqlString + "date LIKE '%" + strData + "%'";
        }

        result =stmt.executeQuery(sqlString);

        int test = 0;
        String store = "";
        String response = "";

        while(result.next()){
            test ++;
            store = store + "\n"+ test + "." +
            result.getString(1)+ "" +
            result.getString(2)+ "" +
            result.getString(3);
        }
        if(test !=0){
            result.absolute(test);
            //displayData();
            response = "Number of Records" + test + store;
            JOptionPane.showMessageDialog(null, response);
        }
        else{
            JOptionPane.showMessageDialog(null,"Could not find data");
        }

    }catch(Exception e){
        e.getMessage();           
       }
}
//public void displayData(){

//}

public static void main(String[] args) {
    // TODO code application logic here
     CS6153Assignment2 data1 = new CS6153Assignment2();
     data1.connect();
     data1.buildGui();

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:02:55.023

我认为您想要做的是当您单击执行按钮时，它会查找当前选定的`RadioButton`. 最简单的方法是将所有按钮保存到集合中（`ArrayList`例如）：

```
ArrayList<JRadioButton> radioButtonList = new ArrayList<JRadioButton>();
radioButtonList.add(rbAuthorName);
radioButtonList.add(rbTitle);
radioButtonList.add(rbtYear); 
```

而不是在执行按钮的 ActionListener 中迭代该列表并查找选定的列表：

```
@Override
public void actionPerformed(ActionEvent e){
        if(e.getSource()==execButton){

          String buttonName="";

          for(JRadioButton button: radioButtonList){
             if(button.isSelected()){
               buttonName = button.getName;
          }

          searchData(buttonName);
        }
    } 
```

之后，您只需`searchData`稍微修改方法`strData`即可获取参数的值。

# javascript - OAuth 完整的 Javascript 访问，安全问题？

> ID：13145929
> 
> 赞同：2
> 
> 时间：2012-10-30T19:01:15.683
> 
> 标签：javascript, api, oauth

我正在为我的 API 实现服务器端 OAuth。我在[这里](https://developers.google.com/accounts/docs/OAuth2UserAgent)看到 Google 允许完整的 javascript 编写的应用程序使用它的 API。

在这种情况下，因为我们在“查看源”环境中，我们没有使用客户端密码，因此我们无法确定应用程序的身份。

示例：如果我看到 Google 的完整 JavaScript 应用程序，我只需要查看源代码，获取客户端密钥，然后在我自己的网站上放置代码的编辑版本。如果用户在第一个网站上接受了应用程序，我将能够使用他的数据（由于应用程序被接受，用户将完全看不到接受部分）。

即使用户必须重新接受该应用程序，如果他接受它，我将拥有第一个应用程序身份的访问权限。

我对这种方法有点害怕，我很惊讶谷歌没有在文档中暴露不同的风险，也没有在授权阶段暴露出不同的风险。我一定错过了什么……你能帮帮我吗？

我不太确定我是否让我可以理解，但如果您有任何问题，请提出。

（对不起我的英语）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T08:27:40.973

你说的对。在您的应用程序中可见的数据是`client id`和`client secret`。当用户对您的应用程序进行身份验证时，您将获得一个`access token`您必须用于以下 API 请求的文件。访问令牌通常存储在本地数据库中，并且对于每个用户都是唯一的（甚至可能过期）。

**后果**：有权访问的邪恶用户必须`client id`重新`client secret`接受应用程序才能访问它。他无法直接访问它，因为他没有`access token`. 但接受后，他可以访问所有数据。

解决此问题的一种方法是在服务器端执行授权。您的服务器执行初始授权并存储`access token`. 当您想从客户端访问 API 时，您可以`access token`从服务器（**通过安全连接**）获取 API，并且您应该能够正常使用 API，并且您的`client id`和`client secret`被隐藏。实现这一点的一个简单方法是[Yahoo Query Language](http://derek.io/blog/2010/how-to-secure-oauth-in-javascript/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-08T15:33:50.453

我也很担心它，我读了很多书来适应它。实际上，有很多网络服务器允许纯 JavaScript 访问（例如 facebook、google、mercadolibre）。

这些公司要求您提供有效的域服务器名称，即您的客户端 ID 和客户端密码仅在您的 Web 应用程序请求时才可用。也就是说，我（太）舒服了一点。伪造您的应用程序并非易事，您 11 岁的侄子将很难尝试。

无论如何，我知道您可以对浏览器使用某种网络钓鱼攻击，让他们相信您在“your-app-domain.com”中。我不确定上述这些公司如何过滤这种攻击。

**思考**：我有一个想法，您可以将您的凭据存储在 cookie 中。在您的应用程序开始时使用 REST URI 并将您的凭据存储在那里。只要我知道几乎没有黑客访问cookie是可能的，但这将是一个额外的障碍。

**思考 2**：我不是移动开发人员，所以我一直在问：如何在移动应用中解决这个问题。即使知道反编译应用程序并不容易，但还是可以做到的。

我不知道如何解决/适应客户端凭证存储，但我希望为这次讨论做出贡献。

# c - 未定义对“registerrpc”的引用

> ID：13145930
> 
> 赞同：2
> 
> 时间：2012-10-30T19:01:21.173
> 
> 标签：c, linux, rpc

我有这个简单的服务器，它必须注册一个过程才能通过 RPC 使用它。这是我的server.c：

```
#include <rpc/rpc.h>
int * p_double(int n){
    static int d;
    d = 2 * n;
    return &d;
}
int main(){
    registerrpc(0x22222222, 1, 1, p_double, xdr_int, xdr_int );
    svc_run();
    return 0;
} 
```

当我尝试编译它时，我得到了这些错误：

```
> gcc -o s server.c
/tmp/ccd0Roxs.o: In function `main':
server.c:(.text+0x47): undefined reference to `registerrpc'
collect2: ld returned 1 exit status 
```

我从中得到的是它无法找到`registerrpc`任何地方或至少在`rpc/rpc.h`

我正在使用 Ubuntu 12.04，我班上的另一个学生通过安装让它工作`portmap`所以我尝试做同样的事情。不幸的是，这对任何事情都没有帮助。

（我不确定这是否属于这里，抱歉）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T19:03:42.203

您需要链接 RPC 库，`librpc`：

```
$ gcc -Wall -lrpc server.c -o server 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T19:47:06.633

您使用的 rpc 标头未定义`registerrpc`函数。我相信您可能正在遵循基于另一个操作系统（或可能是旧版本）的指南。我认为最好的解决方案是找到一个指南，用你的`rpc/rpc.h`.

但是，在 Ubuntu 上，您似乎可以使用 安装替代 RPC 库`apt-get install libtirpc-dev`，然后使用以下选项进行编译：

```
gcc -o server -I /usr/include/tirpc server.c -l tirpc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T19:03:16.463

您似乎没有引用包含 registerrpc 的库

# android - android google map web app上发生的意外事件

> ID：13145932
> 
> 赞同：2
> 
> 时间：2012-10-30T19:01:22.753
> 
> 标签：android, web-applications, mobile, google-maps-api-3

如果你看下面，我有一个为移动设备设计的网络应用程序的部分截图。在 android 上，我得到一个奇怪的绿色形状，看起来像是一堆堆在一起的字符。我升级到冰淇淋三明治，但同样的事情正在发生。它只在我有我的地图的页面上。

有没有人见过这样的事情或知道可能是什么原因造成的？

它毗邻深绿色森林中的注销链接。

![在此处输入图像描述](../Images/64a8d06372cf89f80efe15cf3dc83d9b.png)

# 更新：

我将其范围缩小到 Google Maps API v3。当我调用构造函数时会发生这种情况，但我仍然不知道如何修复它或摆脱它。

```
var map = new google.maps.Map(document.getElementById('map'), {
    'zoom': 16,
    'center': new google.maps.LatLng(39.205316, -96.305485),
    'mapTypeId': google.maps.MapTypeId.HYBRID,
    zoomControlOptions: {
        position: google.maps.ControlPosition.LEFT_BOTTOM
    },
    mapTypeControlOptions: {
        position: google.maps.ControlPosition.RIGHT_BOTTOM,
        style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
    }, 
    streetViewControlOptions: {
        position: google.maps.ControlPosition.LEFT_BOTTOM
    },             
    panControlOptions: {
        position: google.maps.ControlPosition.LEFT_BOTTOM
    }                      
}); 
```

# 更新#2：

尝试使用 Chrome Mobile 对其进行调试，但未显示。仅显示在 Android ICS 浏览器中。

* * *

# 解决方案：

看起来 Android ICS 浏览器不能很好地使用 CSS`text-indent: -9999em;`

对于我的徽标元素，我有以下 html：

```
<hgroup>
    <h1><a href="Default.aspx#main">Company Name</a></h1>
</hgroup> 
```

```
/* Logo */
header hgroup {
    background: url("../imgs/logo_143x60.png") no-repeat scroll 0 0 transparent;
    display: block;
    height: 60px;
    left: 0;
    position: absolute;
    top: 6px;
    width: 312px;
}
header hgroup h1 a {
    text-indent: -9999em;
    display: block;
    height: 60px;
    width: auto;
}
header hgroup h3  {
    text-indent: -9999em;
    height: 0;
} 
```

我只是删除了文本`Company Name`，问题解决了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T21:06:57.420

没有链接，我在这里工作有点盲目，但如果它不是由您的代码直接引起的 - 我会大胆猜测并说这可能是您设备上的应用程序的结果？例如，我知道一些卫星导航应用程序将地址转换为超链接（打开卫星导航应用程序）。因为它在有地图的页面上，所以这个理论听起来很有道理。

评估 Firebug/Web Inspector 中的违规元素以获得更多线索。

**更新** 在发现它只发生在 Android 浏览器中之后，我会尝试一些步骤来帮助缩小根本原因。

让你的朋友/同事/模拟器复制这个问题。如果它是间歇性的，或者仅适用于您自己的设备 - 这听起来像是流氓应用程序将文本解析为链接或类似内容的行为。了解它是哪个违规应用程序将有助于找出问题所在。

另一种选择是在样式表中查找具有深绿色*颜色*样式的元素。*将颜色*更改为粉红色，并不断缩小 CSS 选择器的范围，直到只有一个元素是粉红色的——这将告诉你这个元素来自哪里以及它是什么（我希望如此）。虽然这是一个相当费力的过程。

在 Android 浏览器中调试类似的东西可能有更好的方法，但不幸的是我不知道它们。祝你好运！

# python - 在 .ui 文件中调用自定义类失败

> ID：13145934
> 
> 赞同：3
> 
> 时间：2012-10-30T19:01:32.000
> 
> 标签：python, qt, pyside, qt-designer

当我尝试从`.ui`文件中引用我的自定义类时出现此错误。我做的有什么问题？

```
"QFormBuilder was unable to create a custom widget of the class 'TimelinePane'; defaulting to base class 'QWidget'." 
```

`QWidget`弹出我在`.ui`文件中指定的布局。问题只是自定义类。

为了添加自定义类的描述，我`.ui`手动修改了文件（添加了整个`<customwidgets>`部分），这就是为什么我必须打开一个新问题，因为我还没有找到相同的 Q。我怀疑`.ui`文件中类的路径，但我尝试的所有选项（请参阅我注释掉的部分）都不起作用。我也猜想在这里使用`python`不应该是问题，但我并不完全确定。还没试过`C++`。

```
from PySide import QtGui  
from PySide import QtCore
from PySide import QtUiTools

class MyWidget(QtGui.QMainWindow):
    def __init__(self, *args):  
       apply(QtGui.QMainWindow.__init__, (self,) + args)

       loader = QtUiTools.QUiLoader()
       file = QtCore.QFile('./src/prove_qt_ui_file/prove_main_widget.ui') 
       file.open(QtCore.QFile.ReadOnly)
       self.myWidget = loader.load(file, self)
       file.close()
       self.setCentralWidget(self.myWidget)

if __name__ == '__main__':  
   import sys  
   import os
   print("Running in " + os.getcwd() + " .\n")
   app = QtGui.QApplication(sys.argv)  
   win  = MyWidget()  
   win.show()
   app.exec_() 
```

证明main_widget.ui

```
<?xml version="1.0" encoding="UTF-8" ?>
<ui version="4.0">
 <class>MyWidget</class>
 <widget class="QWidget" name="MyWidget">
  <property name="geometry">
   <rect>
    <x>0</x>
    <y>0</y>
    <width>687</width>
    <height>698</height>
   </rect>
  </property>
  <property name="windowTitle">
   <string>Runtime Monitor</string>
  </property>
  <layout class="QVBoxLayout">
   <property name="spacing">
    <number>0</number>
   </property>
   <property name="margin">
    <number>0</number>
   </property>
   <item>
    <widget class="QSplitter" name="splitter">
     <property name="orientation">
      <enum>Qt::Vertical</enum>
     </property>
     <property name="handleWidth">
      <number>9</number>
     </property>
     <widget class="QTreeWidget" name="warn_tree">
      <attribute name="headerVisible">
       <bool>false</bool>
      </attribute>
      <column>
       <property name="text">
        <string notr="true">1</string>
       </property>
      </column>
     </widget>
     <widget class="QTreeWidget" name="tree_all_devices">
      <attribute name="headerVisible">
       <bool>false</bool>
      </attribute>
      <column>
       <property name="text">
        <string notr="true">1</string>
       </property>
      </column>
     </widget>
     <widget class="TimelinePane" name="timeline_pane" native="true">
      <property name="minimumSize">
       <size>
        <width>0</width>
        <height>80</height>
       </size>
      </property>
      <property name="whatsThis">
       <string extracomment="Timeline"/>
      </property>
     </widget>
    </widget>
   </item>
  </layout>
 </widget>
 <customwidgets>
  <customwidget>
   <class>TimelinePane</class>
   <extends>QWidget</extends>
<!--   <header>timeline_pane</header> --> <!-- NG -->
<!--   <header>prove_qt_ui_file.timeline_pane</header> --> <!-- NG -->
   <header>src.prove_qt_ui_file.timeline_pane</header>  <!-- NG -->
  </customwidget>
 </customwidgets>
 <resources/>
 <connections/>
</ui> 
```

时间线窗格.py

```
from PySide.QtGui import QWidget, QGraphicsScene, QGraphicsView, QColor, QHBoxLayout, QPushButton
class TimelinePane(QWidget):
    def __init__(self, parent):
        super(TimelinePane, self).__init__()
        print '\tTimelinePane init 1' # This doesn't print. 
```

（环境）Ubuntu 12.04，python 2.7.3

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T14:57:53.927

理论上，要让您的自定义小部件工作，您只需调用：

```
loader.registerCustomWidget(TimelinePane) 
```

在调用 loader.load() 之前。您需要在您的情况下添加相关的导入语句：

```
from timeline_pane import TimelinePane 
```

但是，我刚刚在 Ubuntu 12.04 x86_64 上使用 PySide 1.1.2 对此进行了测试，结果导致了段错误。YMMV，所以请测试。

我最终实施了这个解决方法：http: [//www.mail-archive.com/pyside@qt-project.org/msg00306.html](http://www.mail-archive.com/pyside@qt-project.org/msg00306.html)

总之，重写QUiLoader的creteWidget()方法，如果widget的class_name不在self.availableWidgets()中，根据你添加的customWidgets实例变量自己实例化。

顺便说一句，您还可以使用 Qt 设计器中的右键单击“提升到”功能，而不是直接编辑 ui 文件。

# android - 如何在 Listview 中简单地添加标题？

> ID：13145936
> 
> 赞同：0
> 
> 时间：2012-10-30T19:02:00.980
> 
> 标签：android, listview

我做了一个listView，现在有一种简单的方法可以在其中添加听众吗？例如，做这样的事情

```
List.add("a")
list.addheader("Number")
list.add("1")
.
.
Widget_List_Adapter adapter = new Widget_List_Adapter(this, list);
.
.
.
setListAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T19:05:05.947

尝试使用[`ListView#addHeaderView()`](http://developer.android.com/reference/android/widget/ListView.html#addHeaderView%28android.view.View%29).

作为警告，您必须在调用or*之前*调用此方法，就像您的伪代码示例一样。`setAdapter()``setListAdapter()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T19:25:38.223

您可以定义一个带有标题布局的布局，后跟列表视图。在标题布局中，您可以定义一个可以在代码中更改的文本视图

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T19:17:23.653

The `addHeaderView()` option only works to add a static header at the top of your list. If you want to add section headers, you'll have to do a considerable amount of extra work. [This question](https://stackoverflow.com/questions/2394514/how-to-generate-a-listview-with-headers-above-some-sections) should lead you down the proper path to make that happen.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T19:31:00.423

Android 中没有部分 List(Table) View，你可以只添加一个顶部标题，但如果你想制作像 IOS 那样的部分表视图，这里有一些更好的资源。

[android-section-list](http://code.google.com/p/android-section-list/) 只需使用这个库，它就很棒。

[android-amazing-listview](http://code.google.com/p/android-amazing-listview/) 这个也是非常用户的，它甚至可以让你加载更多的功能，比如FB。

您也可以制作自己的自定义列表，这是完整的[博客。](http://w2davids.wordpress.com/android-sectioned-headers-in-listviews/)

# matlab - Matlab：使用 fzero 求解隐式方程时出错

> ID：13145938
> 
> 赞同：0
> 
> 时间：2012-10-30T19:02:07.180
> 
> 标签：matlab, optimization, implicit, equation

方程是：

![在此处输入图像描述](../Images/d8ad78d7c35f5b4028d3c910d3bf4d6d.png)

其中`a`和`b`是常数并且都等于`0.0130`

这是我正在使用的代码：

```
% Solving the equation for zero.
f = @(theta) ((a+b).*theta)./((theta.^2)-(a.*b)) - tan(theta);  % Notice the dots (.)

% Now plot it to get an idea of where the zeros are.
theta = 0:1:100;
for i=1:length(theta)
    hold on
    plot(theta(i),f(theta(i)),'-o')  % Look for the zeros
end

% Now find the roots.
cnt = 1;
for ii = [0,2,50]  % This vector has the guesses.
    rt(cnt) = fzero(f,ii); % Pass each guess to FZERO.
    cnt = cnt + 1;
end 
```

这是我得到的错误：

```
??? Operands to the || and && operators must be convertible to
logical scalar values.

Error in ==> fzero at 323
    elseif ~isfinite(fx) || ~isreal(fx)

Error in ==> HW4 at 52
    rt(cnt) = fzero(f,ii); % Pass each guess to FZERO. 
```

我想得到 \theta 的第一个解决方案。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T22:54:06.430

这段代码对我有用，没有错误（我写了值 0.0130 而不是 a 和 b）。检查您没有在代码中使用其他变量名，或者没有清除某些变量......

# java - 从 Java 创建快捷方式文件

> ID：13145942
> 
> 赞同：9
> 
> 时间：2012-10-30T19:02:22.327
> 
> 标签：java, windows

几个星期以来一直困扰我的一个问题是如何从 Java 创建一个快捷方式文件。现在，在我说别的之前，我已经浏览了整个 Google（以及在这个站点上；包括这个：[从 Java 创建快捷链接（.lnk）](https://stackoverflow.com/questions/3426314/creating-shortcut-links-lnk-from-java)）试图找到一些有用的东西。我需要的不是创建快捷方式的安装程序包，而是从代码创建快捷方式。我所说的快捷方式是指通常在桌面上找到的 .lnk 文件。

我发现的一个有用的东西是这个程序：

Java 代码：

```
import java.io.*;       
public class WindowsUtils {     
     private WindowsUtils() { }
     private static final String WINDOWS_DESKTOP = "Desktop";
     public static String getWindowsCurrentUserDesktopPath() { //return the current user desktop path
         return System.getenv("userprofile") + "/" + WINDOWS_DESKTOP ;
     }
     public static void createInternetShortcutOnDesktop(String name, String target) throws IOException {
         String path = getWindowsCurrentUserDesktopPath() + "/"+ name + ".URL";
         createInternetShortcut(name, path, target, "");
     }
     public static void createInternetShortcutOnDesktop(String name, String target, String icon) throws IOException {
         String path = getWindowsCurrentUserDesktopPath() + "/"+ name + ".URL";
         createInternetShortcut(name, path, target, icon);
     }
     public static void createInternetShortcut(String name, String where, String target, String icon) throws IOException {
         FileWriter fw = new FileWriter(where);
         fw.write("[InternetShortcut]\n");
         fw.write("URL=" + target + "\n");
         if (!icon.equals("")) {
             fw.write("IconFile=" + icon + "\n");*
         }
         fw.flush();
         fw.close();
     }
     public static void main(String[] args) throws IOException {
         WindowsUtils.createInternetShortcutOnDesktop("GOOGLE", "http://www.google.com/");
     }
} 
```

我玩弄了它，并设法在我的桌面上创建了一个 .lnk 快捷方式。但是，我发现了两个问题：

尽管路径将其链接到正确的图标，但我无法更改图标。我创建了一条通往 C:/Users/USER/Documents 的路径，但是，每当我单击快捷方式时，它就会将我带到 C:/。当我删除快捷方式时，对话框确实显示路径是 file:////C:/Users/USER/Documents。

我知道上面的这段代码最初是为了创建 Internet 快捷方式，所以我相信我可能采取了错误的方法。我将不胜感激您能给我的任何帮助/链接。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-08-15T09:52:32.493

我可以在 GitHub 上推荐这个存储库：

[https://github.com/BlackOverlord666/mslinks](https://github.com/BlackOverlord666/mslinks)

在那里，我找到了一个**创建**快捷方式的简单解决方案：

`ShellLink.createLink("path/to/existing/file.txt", "path/to/the/future/shortcut.lnk");`

如果您想**阅读**快捷方式：

```
File shortcut = ...;
String pathToExistingFile = new ShellLink(shortcut).resolveTarget(); 
```

如果要**更改**快捷方式的图标，请使用：

```
ShellLink sl = ...;
sl.setIconLocation("/path/to/icon/file"); 
```

希望这可以帮助你:)

亲切的问候

约书亚·弗兰克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-08-26T11:21:51.257

我知道我参加聚会有点晚了，我真的很喜欢上面显示的 JShellLink 实现，但是如果您需要一些更简单的东西，那么我写的是：
[https ://github.com/JacksonBrienen/VBS-Shortcut/ blob/main/src/vbs_sc/ShortcutFactory.java](https://github.com/JacksonBrienen/VBS-Shortcut/blob/main/src/vbs_sc/ShortcutFactory.java)
应该可以解决问题。总而言之，它是一个简单的快捷方式创建器，使用通过 CMD 运行的 VBS。
使用它后，创建桌面快捷方式将非常简单：

```
ShortcutFactory.createDesktopShortcut("C:/Program Files/Internet Explorer/iexplore.exe", "Shortcut.lnk"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-26T16:56:38.313

[http://www.mindfiresolutions.com/Creating-shortcut-from-a-Java-Application-1712.php](http://www.mindfiresolutions.com/Creating-shortcut-from-a-Java-Application-1712.php)

一个使用名为 jShellLink 的库的 jni 的简单教程

# ruby-on-rails - 调试 rake 任务

> ID：13145943
> 
> 赞同：3
> 
> 时间：2012-10-30T19:02:25.743
> 
> 标签：ruby-on-rails, rake, ruby-debug

我在我的任务中添加`debugger`并`require 'ruby-debug'`调试它。

当我从控制台运行我的任务时，它确实命中了`debugger`，但不允许我检查任何变量。例如，如果我的任务中有一行：

```
my_var = 1 + 2 
```

我输入`my_var`or `my_var.inspect`，在调试时，它说：

```
*** Unknown command: "my_var".  Try "help". 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T19:44:05.767

尝试运行

```
e my_var 
```

如果默认情况下未设置 autoeval，则必须在任何评估表达式前加上 e。

顺便说一句，要设置自动评估，请将以下行放入`~/.rdebugrc`：

```
set autoeval 
```

完成此操作后，调试器无法识别的任何命令都将被视为尝试评估 en 表达式，因此您只需键入变量名称即可获取其值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T20:53:10.053

赶紧跑

```
p my_var 
```

有关更多选项，请键入帮助

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T18:48:00.923

如果您想获取变量的值，请尝试使用
=> display < variable-name>
此行将在每一步显示该变量....如果您想取消显示它，请使用此命令。
=> undisplay < 输出中变量名之前显示的数字 >

还可以尝试输入“帮助”，这将列出您在调试时可以使用的所有命令。试试看。
我们可以使用'p'、'pp'、'eval'、'list'等。

# jquery - 调整幻灯片上的 div 大小

> ID：13145946
> 
> 赞同：2
> 
> 时间：2012-10-30T19:02:32.990
> 
> 标签：jquery, html, css

我希望 .left div (width:20%;) 滑入 .right div (initial width:100%;) 并让 .right div 将动画的大小调整为 width:80%;

基本上，滑入一个 div 并让另一个调整大小。

[http://jsfiddle.net/LTUTR/](http://jsfiddle.net/LTUTR/)

HTML

```
<div class="container">

<div class="left">
    <p>left</p>
</div>
<div class="right">
    <p>right content</p>
    <p class="showLeft">[Show left div]</p>
</div> 
```

​</p>

CSS

```
html, body {
    width:100%;
    height: 100%;
    margin: 0;
}

.container {
    width: 100%;
    height: 100%;
    position: relative;
    overflow: hidden;
}

.left, .right {
    float: left;
    height: 100%;
}

.left {
    background: green;
    width: 20%;
    display: none;
}

.right {
    background: red;
    width: 100%;
}

.showLeft {
    cursor: pointer;
}
​ 
```

JS

```
$('.showLeft').click(function(){
    $('.right').animate({width: '80%'},350);    
    $('.left').animate({width:'toggle'},350);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T19:07:31.693

~~不幸的是，`width:'toggle'`不存在~~……实际上，它存在！它[在规格中](http://api.jquery.com/animate/)：

> 除了数值之外，每个属性都可以采用字符串“show”、“hide”和“toggle”。这些快捷方式允许自定义隐藏和显示考虑到元素显示类型的动画。

我真的不知道为什么它在这里不起作用。而且`show`看起来有问题（[小华丽的演示](http://jsfiddle.net/gionaf/vUka6/1/)）。

无论如何，您可以将初始宽度设置为 0：

```
.left {
    background: green;
    width:0;
    display: none;
} 
```

并使用此编辑功能：

```
$('.showLeft').click(function(){
        $('.right').animate({width: '80%'},350);
        $('.left').css('display','block').animate({width:'20%'},350);
}); 
```

[**演示**](http://jsfiddle.net/gionaf/vUka6/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-22T14:29:28.283

这是平滑来回动画的代码。我们只是在查看左侧 div 的宽度来决定如何进行 `code`[http://jsfiddle.net/marktoth/W7UwU/7/](http://jsfiddle.net/marktoth/W7UwU/7/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T19:10:30.490

尝试：

```
$('.showLeft').toggle(function(){
    $('.right').animate({width: '80%'},350);    
    $('.left').animate({width:'toggle'},350);
},
function(){
    $('.right').animate({width: '100%'},350);    
    $('.left').animate({width:'toggle'},350);
}); 
```

# matlab - 如何判断一个矩阵是否是奇异的？

> ID：13145948
> 
> 赞同：29
> 
> 时间：2012-10-30T19:02:41.160
> 
> 标签：matlab, math, matrix

我们如何才能知道 4x4 矩阵是否为奇异矩阵？

我们可以在不使用单位矩阵扩充给定矩阵然后进行行操作的情况下知道这一点吗？

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-10-30T20:02:21.240

那么如何确定一个矩阵是否真的是奇异的呢？（在 MATLAB 中，不使用纸笔或符号计算，或手写行操作？）教科书有时会告诉学生使用行列式，所以我将从那里开始。

理论上，可以简单地测试矩阵的行列式是否为零。因此

```
M = magic(4)
M =
    16     2     3    13
     5    11    10     8
     9     7     6    12
     4    14    15     1

det(M)
ans =
  -1.4495e-12 
```

事实证明，这个矩阵确实是奇异的，所以有一种方法可以将 M 的一行写成其他行的线性组合（对于列也是如此。）但是我们从 det 得到的值不完全为零. 真的是零吗，MATLAB 刚刚搞糊涂了？这是为什么？符号行列式确实为零。

```
det(sym(M))
ans =
0 
```

事实证明，行列式的计算对于较大的数组来说是一件非常低效的事情。因此，一个不错的选择是使用我们的方阵的特定矩阵分解的对角元素的乘积。事实上，这就是 MATLAB 在 det 内部对非符号输入所做的事情。

```
[L,U,P] = lu(M)
L =
            1            0            0            0
         0.25            1            0            0
       0.3125      0.76852            1            0
       0.5625      0.43519            1            1
U =
           16            2            3           13
            0         13.5        14.25        -2.25
            0            0      -1.8889       5.6667
            0            0            0   3.5527e-15
P =
     1     0     0     0
     0     0     0     1
     0     1     0     0
     0     0     1     0 
```

看到 L 的对角元素是 1，但 U 有非零对角元素。矩阵乘积的行列式以及上三角矩阵或下三角矩阵的行列式也有很好的性质。

```
prod(diag(U))
ans =
  -1.4495e-12 
```

看到我们得到了相同的答案。由于 LU 分解即使对于大型数组也相当快，因此它是计算行列式的好方法。问题是，它使用浮点运算。所以 U 的那些对角元素是实数，浮点数。当我们取产品时，我们得到的结果并不完全为零。最后一个元素只是略微非零。

det还有其他问题。例如，我们知道矩阵 eye(100) 的条件非常好。毕竟它是一个单位矩阵。

```
det(eye(100))
ans =
     1 
```

现在，如果我们将矩阵乘以一个常数，这不会改变矩阵作为奇异矩阵的状态。但是行列式会发生什么？

```
det(.1*eye(100))
ans =
   1e-100 
```

那么这个矩阵是奇异的吗？毕竟，如果 det(magic(4)) 给我们 1e-12，那么 1e-100 必须对应一个奇异矩阵！但事实并非如此。更糟，

```
det(.0001*eye(100))
ans =
     0 
```

事实上，行列式按 0.0001^100 缩放，在 matlab 中为 1e-400。至少如果 matlab 可以使用双精度表示一个那么小的数字，那将是正确的。它不能这样做。这个数字将下溢。或者同样容易，我们可以让它溢出。

```
det(10000*eye(100))
ans =
   Inf 
```

显然，所有这些缩放的单位矩阵都是同样非奇异的，但是可以使 det 给我们任何我们想看到的答案！因此，我们必须得出结论，计算行列式对矩阵来说是一件可怕的事情。我不在乎你的教科书很久以前告诉你什么，或者你的老板或老师告诉你什么。如果有人告诉您为此目的使用计算机计算行列式，那是一个糟糕的建议。时期。行列式只是有太多的问题。

我们可以做其他事情来测试奇点。最好的工具是使用排名。因此，如果 NxM 矩阵的秩小于 min(N,M)，则该矩阵是奇异的。这里有几个测试：

```
rank(M)
ans =
     3

rank(.0001*eye(100))
ans =
   100 
```

所以 rank 能够告诉我们 4x4 幻方是奇异的，但我们的缩放单位矩阵不是奇异的。（一件好事是秩可以测试非方阵的奇异性。）

我们还可以使用 cond 来测试数值奇异性。最小可能的条件数是 1.0，它对应于一个表现非常好的矩阵。大的条件数是不好的。在双精度中，这意味着当条件数大于大约 1e15 时，您的矩阵非常有问题。

```
cond(M)
ans =
    8.148e+16

cond(.0001*eye(100))
ans =
     1 
```

事实上，cond 认为缩放的单位矩阵毕竟条件良好。大的条件数是不好的。对于双精度矩阵，接近 1e15 左右的条件数表示可能是数值奇异的矩阵。所以我们看到 M 显然是奇异的。同样， cond 能够处理非方阵。

或者，我们可以使用 rcond，一个估计条件数倒数的工具。对于非常大的数组，这是一个很好的工具。当 rcond 给出的数字接近 eps 时，请注意！

```
rcond(M)
ans =
   1.3061e-17

rcond(.0001*eye(100))
ans =
     1 
```

最后，对于数学齿轮头（像我一样），我们可能会退出 svd。毕竟，svd 是 cond 和 rank 所依据的工具。当矩阵的一个或多个奇异值与最大奇异值相比很小时，我们再次具有奇异性。

```
svd(M)
ans =
           34
       17.889
       4.4721
   4.1728e-16 
```

在这里，我们看一下与矩阵的最大奇异值相比，奇异值何时较小。一件好事是 svd 可以告诉我们矩阵与奇异点的接近程度，如果有多个小的奇异值，则可以告诉我们有关矩阵秩的信息。

好消息是我展示的所有工具都不需要用户进行基本的行操作或任何花哨的操作。

但请不要使用 DET！是的，它出现在教科书中。是的，也许你的导师或你的老板告诉你使用它。他们是错的，因为像这样的工具在使用浮点运算的计算机上应用时会失败。而且您根本不想计算符号行列式，这将非常低效。

很抱歉，如果这是一个长篇阅读。我现在要离开我的肥皂盒。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-30T19:05:48.377

计算排名并与维度进行比较。如果秩低于维度，则矩阵是奇异的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-30T20:07:27.010

最可靠的方法是对矩阵进行奇异值分解。最大奇异值与最小奇异值之比应在一些合理的公差范围内。这个比率是矩阵的条件数。对于双精度值，当条件数超过一百万或更多时，双精度值会变得非常危险，这是一个相当高的限制。请注意，一旦你有了 SVD，它对很多其他事情都很有用，而不仅仅是计算条件数。

奇异值分解是数值分析的瑞士军用电锯；如果您知道矩阵不是奇异/病态的，那么它可能会有点笨拙。但如果你不知道，这是一个很好的了解工具。Matlab 尤其如此，因为它是一个内置工具。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-30T20:02:26.877

我会用`cond`. 这为您提供了一个矩阵与奇异矩阵的接近程度的数值估计（其中 Inf 是奇异矩阵）。

例如：

```
m = randn(4);
cond(m)   %Well conditioned, usually in the 10's

m = diag([1e-6 1 2 1e6]);
cond(m)   %Less well conditioned, 1e12

m = diag([0 1 2 3]);
cond(m)   %Singular:  Inf 
```

# c# - 如何在另一个视图的列表中显示用户点击的产品？

> ID：13145951
> 
> 赞同：1
> 
> 时间：2012-10-30T19:03:06.730
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, mvvm

我在我的 webbapplication 上使用带有实体框架的 MVC3 Viewmodel 模式。

我的索引视图是带有图像、价格和描述等的产品列表。

带有我上面提到的信息的产品位于带有“购买”按钮的 div 框中。

![盒子](../Images/1fe5e3c3da8c620bf603552997ee693a.png)

我将使用 2 个视图，一个是显示所有产品的索引视图，另一个是显示购买按钮单击的产品的视图。

我想要实现的是，当用户单击购买按钮时，产品应该存储在另一个视图中，即购物车视图并显示出来。

我对如何开始该部分的编码有疑问。

产品的索引视图已经完成，现在它的购买按钮功能还剩下要做，但我不知道如何开始。

这是我的索引控制器：

```
private readonly HomeRepository repository = new HomeRepository();

public ActionResult Index()
{
    var Productlist = repository.GetAllProducts();

    var model = new HomeIndexViewModel()
    {
        Productlist = new List<ProductsViewModel>()
    };

    foreach (var Product in Productlist)
    {
        FillProductToModel(model, Product);
    }

    return View(model);

}

private void FillProductToModel(HomeIndexViewModel model, ProductImages productimage)
{
    var productViewModel = new ProductsViewModel
    {

        Description = productimage.Products.Description,
        ProductId = productimage.Products.Id,
        price = productimage.Products.Price,
        Name = productimage.Products.Name,
        Image = productimage.ImageUrl,
    };
    model.Productlist.Add(productViewModel);
} 
```

在我的 ActionResult 索引中，我使用我的存储库来获取产品，然后我将产品中的数据绑定到我的 ViewModel，以便我可以在我的视图中使用 ViewModel。这就是我在视图中显示所有产品的方式。

这是我的索引视图：

```
 @model Avan.ViewModels.HomeIndexViewModel

         @foreach (var item in Model.Productlist)
                    {
                     <div id="productholder@(item.ProductId)" class="productholder">  
                     <img src="@Html.DisplayFor(modelItem => item.Image)" alt="" />
                     <div class="productinfo">
                     <h2>@Html.DisplayFor(modelItem => item.Name)</h2> 
                     <p>@Html.DisplayFor(modelItem => item.Description)</p>    
                     @Html.Hidden("ProductId", item.ProductId, new { @id = "ProductId" }) 
</div>
                     <div class="productprice">     
                     <h2>@Html.DisplayFor(modelItem => item.price)</h2>
                     <input type="button" value="Läs mer" class="button" id="button@(item.ProductId)">  
                     @Html.ActionLink("x", "Cart", new { id = item.ProductId })  // <- temp its going to be a button                   
                    </div>                                   
                    </div>

             } 
```

由于我可以获取每个产品的产品 ID，因此我可以使用控制器中的 ID 从数据库中获取数据。但是我仍然不知道该怎么做，所以当有人点击购买按钮时，我将 ID 存储在哪里？以及如何使用它才能实现我想做的事情？

现在我一直在尝试在我的 IndexController 中做以下事情：

```
public ActionResult cart(int id)
        {
            var SelectedProducts = repository.GetProductByID(id);

            return View();
        } 
```

我在这里所做的是通过 id 获取产品。因此，当有人按下 temp "x" Actionlink 时，我会收到产品。我所知道的是，需要类似的东西来实现我想要做的事情，但在那之后我不知道该做什么以及我应该以什么样的结构去做。

非常感谢任何形式的帮助！

**短场景：**

查看索引我看到 5 种产品，我选择购买 3 种产品，所以我点击了三个“购买”按钮。现在我单击导航菜单上的“购物车”。新视图弹出，我看到了我点击购买的三个产品。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T21:19:20.487

我会使用 ajax 在单独的操作中将其添加到购物车，如下所示：

动作看起来像这样：

```
 public ActionResult AddToCart(int productID)
    {
        List<int> cart = (List<int>)Session["cart"];
        if (cart == null){
           cart = new List<int>();
        }
        cart.Add(productID);

        return new JsonResult() { Data = new { Status = "Success" } };
    } 
```

你的 Javascript 看起来像这样：

```
$(function(){ // after page load

    $(".button").live("click", function(){ // add a listener to the buttons
        var $this = $(this), // record which button has been pressed
            productID= $this.data('productID'); // Get the product ID from the button

        $.ajax({ // initiate a ajax request
                url: '/controller/AddToCart', // to this address
                type: "post", // of type post
                cache: false, // don't cache any results
                data: {id: productID}, // post the product id
                success: function (data) { // on success
                   data = eval(data); // get the data if you want it
                   $this.addClass('productSelected'); // add a class that shows that the button was updated
                },
                error: function (result) { // on error
                    $(".validation-summary-errors").append("<li>Error connecting to server.</li>"); // this tells the world that there was an error in the ajax request
                }
            });
    }
}); 
```

您需要添加到视图中的一点是：

```
<input type="button" value="Läs mer" class="button" id="button@(item.ProductId)" data-productID='@item.ProductId' /> 
```

如果您不熟悉 JQuery，我建议您花几秒钟时间检查一下，因为它会极大地提升您的 MVC 体验。如果您有任何其他问题，请告诉我。

# javascript - 在 Raphael.js 中使用 `text` 方法时如何添加双“新行”字符？

> ID：13145961
> 
> 赞同：2
> 
> 时间：2012-10-30T19:03:57.453
> 
> 标签：javascript, svg, raphael

我的应用程序依赖于使用***Raphael.js***将一些 HTML 文本元素转换为 SVG 元素。

这些 HTML 对象中的文本由用户通过 textarea 输入给出。因此，他们也可以输入新行。在创建 SVG 时需要考虑这些新行。为此，我使用以下代码：

```
function replaceNL(text) {      
    return text.replace(/[\n\r]/g, "\n");
} 
```

在将 SVG 添加到页面时：

```
var obj = paper.text(x,y,replaceNL(this.text)); 
```

我遇到的问题是双（或更多）换行字符串（例如“\n\n”）在`.text()`方法中只有一个的效果。我该如何克服呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T19:07:45.870

这个问题确实会定期出现......（http://stackoverflow.com/questions/12155954/nbsp-in-raphael-js）

如果您修改纸张元素以保留空格，则其中的所有文本元素都将以您想要的方式运行。像这样做：

```
paper.canvas.setAttributeNS("http://www.w3.org/XML/1998/namespace", "xml:space","preserve"); 
```

这是警告：Raphael 将传递给的字符串拆分为`text`换行符，并将每个段插入到它自己的 tspan 中。当 SVG 渲染评估 tspan 时，它会根据其前身的边界框对每个 tspan 进行排序。因为一个空的 tspan 有一个 0x0 边界框，所以换行符——尽管发出了——在功能上是不可见的。

粗略的解决方法是发出“\n \n”——空格字符会产生一个边界框，因此会导致渲染额外的换行符。[在这里](http://voidblossom.com/testTextSpacing.php)进行理智测试。

要控制 tspan 之间的换行高度，需要修改它们的 dy 属性。Raphael 不支持这个开箱即用，但很容易编写一个 javascript 函数来手动设置这些。这是 jquery 方法，给定一个 Raphael 文本元素`textElement`和所需的间距（以像素为单位），如下所示`spacing`：

```
$(textElement.node).find( 'tspan' ).attr( 'dy', spacing ); 
```

# mysql - 在 VBA mysql 查询中使用循环更改变量？

> ID：13145962
> 
> 赞同：2
> 
> 时间：2012-10-30T19:03:59.287
> 
> 标签：mysql, vba, excel

我在 VBA 中创建了一个循环，它应该更改代码的 strSql 部分中的变量 (j)。我在 excel 表上的输出列都是相同的。这意味着在 strsql 字符串中不考虑变化的变量 j。有谁知道在这种情况下如何使用适当的变化变量？提前致谢

设置 rs = 新 ADODB.Recordset

```
 For j = 1 To 6

    strSql = "SELECT COUNT(*) FROM( " & _
     "SELECT COUNT(*) as nbp FROM `order`   " & _
     "JOIN user ON user.id = order.destination_id   " & _
     "AND DATEDIFF(date_added , register_date) <= j" & _
     "GROUP BY destination_id)  c  " & _
     "GROUP BY nbp " & _
     "ORDER BY c.nbp ASC ; "

    rs.Open strSql, oConn, adOpenDynamic, adLockPessimistic

    res = rs.GetRows

    rs.Close

    For i = 1 To 2
    Cells(i, j) = res(0, i - 1)
    Next i
    Next j 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T19:06:52.170

您需要将 j 从字符串中移出

注册日期) <= j" &

到

注册日期) <= " & j &

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T19:07:22.740

相当讨厌，但在 ado 的 vba 中，我想这是最快的 hack ......你不需要将 j 转换为字符串，但我宁愿明确......

```
strSql = "SELECT COUNT(*) FROM( " & _
     "SELECT COUNT(*) as nbp FROM `order`   " & _
     "JOIN user ON user.id = order.destination_id   " & _
     "AND DATEDIFF(date_added , register_date) <= " & _ 
     CStr(j) & " " & _
     "GROUP BY destination_id)  c  " & _
     "GROUP BY nbp " & _
     "ORDER BY c.nbp ASC ; " 
```

# ios - 如何查看 iOS 应用程序的源代码

> ID：13145965
> 
> 赞同：0
> 
> 时间：2012-10-30T19:04:04.940
> 
> 标签：ios

> **可能重复：**
> [是否可以对我的 iPhone 应用程序进行逆向工程？](https://stackoverflow.com/questions/5058203/is-it-possible-to-reverse-engineer-my-iphone-application)

我正在寻找一种应用程序，或者一种从游戏和 App Store 中查看其他应用程序的源代码的方法。

应用程序已编译？如果是，还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:08:23.250

> 我正在寻找一种应用程序，或者一种从游戏和 App Store 中查看其他应用程序的源代码的方法。

只有一种方法：向作者索取源代码的副本，然后双手合十。

> 应用程序已编译？如果是，还有其他方法吗？

是的，iOS 应用程序已编译，因此不包括源代码。您可以[尝试反编译](http://code.google.com/p/i386codedump/)该应用程序，但您得到的与作者编写的源代码不同。

# sql-server-2008 - 多个相同的 AJAX 调用

> ID：13145967
> 
> 赞同：0
> 
> 时间：2012-10-30T19:04:14.387
> 
> 标签：sql-server-2008, jquery, asp-classic

抱歉，如果标题不准确，但我无法在 1 行中解释问题。

场景是这样的：我们有一个网站，显示通过我们的 SQL Server 数据库中不断更新的值计算的实时统计数据。该网站通过 AJAX 每 15 秒更新一次统计信息，每次都会重新计算一次。现在，问题是，当超过 200 人实时统计数据时，它每分钟每 800 次重新计算一次，这几乎是不必要的。

是否可以每 15 秒进行 1 次计算，并在每个用户请求时向他们显示这 1 次计算？

请记住，一些用户可以选择以一种方式显示数据，而其他用户选择以另一种方式显示数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:13:51.660

经过大量阅读和研究后，我得出结论，我需要 XML。

首先，我想要一个更新 XML 表的时间戳。并且只有从那以后发生了 15 秒，才允许更新文档。在检查之后（如果允许则更新），XML 将被循环读取所有数据并创建用户请求的输出。

这意味着，如果实时统计数据的计算每 15 秒发生一次，那么无论当前有多少用户提取数据。但如果没有人拉它，它只会是空闲的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T20:39:54.767

如果您需要在 SQL Server 端执行此操作，您可以编写一个存储过程，将计算结果存储在一个新表中。然后它可以每 X 秒刷新一次表中的数据，否则只从表中读取。确保为存储上次刷新时间的位置正确处理锁定，这样您就不会每 15 秒并行刷新表 100 次。我将创建一个表只是为了存储最后一次刷新数据并使用 X-Lock 访问记录。在刷新期间保持锁定，但在读取实际数据之前释放它。

* * *

如果您不固定在 SQL Server 端处理这个问题，那么您最好按照@Blazemonger 的建议在应用服务器上缓存数据。

# wcf - WCF：如何从 wcf 服务触发客户端的事件

> ID：13145971
> 
> 赞同：1
> 
> 时间：2012-10-30T19:04:52.803
> 
> 标签：wcf

假设我有一个具有双工连接的小型 wcf 服务，并且我希望在我的客户端不会回调任何方法，而是应该触发一个事件。那么如何重组我的代码。我的代码如下。

## 服务器端

```
namespace CommonParts
{
[ServiceContract(Namespace = "rf.services", 
    CallbackContract = typeof(IDataOutputCallback), 
    SessionMode = SessionMode.Required)]
public interface IServerWithCallback
{
    [OperationContract(IsOneWay=true)]
    void StartDataOutput(string msg);
}

public interface IDataOutputCallback {
    [OperationContract(IsOneWay = true)]
    void SendDataPacket(string data);
}
}

namespace RF.WCF.Callback.Server
{
class ServerWCallbackImpl : IServerWithCallback
{
    #region IServerWithCallback Members

    public void StartDataOutput(string msg)
    {
        //OperationContext.Current.
        IDataOutputCallback callback = OperationContext.Current.GetCallbackChannel<IDataOutputCallback>();
        for (int i = 0; i < 10; i++)
        {
            Random r = new Random();
            int interval = r.Next(500,3000);
            System.Threading.Thread.Sleep(interval);
            //callback.SendDataPacket("Packet " + i.ToString());
            callback.SendDataPacket("Hello " + msg);
        }
        callback.SendDataPacket("Last packet is this one :)");
    }
    #endregion
}
}

class Program
{
    static void Main(string[] args)
    {
        var myBinding = new NetTcpBinding(SecurityMode.None);
        ServiceHost duplex = new ServiceHost(typeof(ServerWCallbackImpl));
        duplex.AddServiceEndpoint(typeof(IServerWithCallback),
            myBinding,
            "net.tcp://192.168.1.2:9080/DataService");
        duplex.Open();
        Console.WriteLine("Host is running, press <ENTER> to exit.");
        Console.ReadLine();
        duplex.Close();
    }
} 
```

## 客户端

```
class CallbackImpl : IDataOutputCallback 
```

{ #region IDataOutputCallback 成员

```
public void SendDataPacket(string data)
{
  Console.WriteLine("Server sent: {0}", data);
}

#endregion 
```

}

```
static void Main(string[] args)
{
    var myBinding = new NetTcpBinding(SecurityMode.None);
  DuplexChannelFactory<IServerWithCallback> cf =
          new DuplexChannelFactory<IServerWithCallback>(
              new CallbackImpl(),
              myBinding,
              new EndpointAddress("net.tcp://192.168.1.2:9080/DataService")); 
  IServerWithCallback srv = cf.CreateChannel();
  Console.Write("Enter Value... ");
  srv.StartDataOutput(Console.ReadLine());
  Console.WriteLine("Start");
  Console.ReadLine();
} 
```

当下面这行将从客户端执行时调用**srv.StartDataOutput(Console.ReadLine());**

然后将调用 StartDataOutput() 函数，并从该函数调用一个回调函数，称为**callback.SendDataPacket("Hello " + msg);** 然后将在客户端调用**SendDataPacket()函数。**

所以我的问题是如何在客户端触发事件而不是回调函数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T19:10:07.183

Code Project 上有一个很好的事件驱动 WCF 异步服务教程[。](http://www.codeproject.com/Articles/29925/Responsive-UIs-for-WPF-Applications-Using-Asynchro) 它应该让您对需要完成的工作有一个良好的开端。此示例中的关键语句之一是该过程与进行回调调用没有太大区别。:)

# ios - 从 iOS 上的两个不同应用程序访问相同的文件

> ID：13145978
> 
> 赞同：5
> 
> 时间：2012-10-30T19:05:09.613
> 
> 标签：ios, ios6

我目前正在开发两个应用程序`App1`，将文件从 Dropbox 下载到 iPad，以及`App2`. Dropbox 集成有点麻烦，我不想在这两个应用程序上都这样做。那么是否可以从可能访问它们的`App1`地方保存这些文件？`App2`我听说应用程序的沙盒化在 iOS6 中变得有点松散，但不确定*有多*松散。

我在这里看到了一些类似的问题，但它们似乎可以通过使用 URL 方案或将数据发送到其他应用程序来解决，这并不是我真正想要的。

解决此问题的任何其他想法将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T10:56:08.747

这是可能的，但本地方法并不适合大文件。

您可以使用 Keychain 来存储少量数据，类似于 NSUserDefaults。优点是这可以在应用程序之间共享。参考[http://shaune.com.au/ios-keychain-sharing-data-between-apps/](http://shaune.com.au/ios-keychain-sharing-data-between-apps/)

至于您的情况，您想在哪里共享文件，您*可以将*它们编码为字符串并存储在钥匙串中（我认为这是一个**非常糟糕的主意**），或者使用网络服务（如果您的目标是 iOS 5 及更高版本，只要两个应用程序的团队 ID 相同，iCloud 就可以解决问题）。请参阅[http://developer.apple.com/library/ios/#documentation/Miscellaneous/Reference/EntitlementKeyReference/Chapters/AboutEntitlements.html](http://developer.apple.com/library/ios/#documentation/Miscellaneous/Reference/EntitlementKeyReference/Chapters/AboutEntitlements.html)

我更喜欢网络服务，iCloud 应该会让你更轻松。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T06:43:05.310

还有另一种方法可以做到这一点，尽管这是一种非常丑陋的方法，因为它使您的信息对用户可见（无论如何，在时尚之后）。

可以在同一设备上的同一位置存储、读取和写入的唯一介质之一是图像。事实上，您可以将您的信息（文件、数组、Web 服务缓存等任何您想要的）写为图像的像素信息。然后，您可以将其存储在本地而不压缩到自定义相册中，并且其他应用程序可以访问相册中的“图像”并将它们解释为原始文件。您必须为您的图像滚动您自己的标题信息以指示文件格式等，并且用户将能够看到图像，尽管它看起来几乎完全是胡说八道。这是一种速记形式。

无论如何，我不希望你接受这个作为答案，但我想我会提出它作为一个示范，通过一些创造性的编码你可以绕过大多数障碍:)

# jquery - Coldfusion cftextarea 和 datefield 不适用于 jquery .load()

> ID：13145981
> 
> 赞同：1
> 
> 时间：2012-10-30T19:05:15.713
> 
> 标签：jquery, coldfusion

我正在尝试使用 jquery 的加载功能从不是冷融合应用程序的页面加载冷融合页面，如下所示。

```
 $("#eventboxol").load('/cfapps/homepage_updates/deleteevent.cfm?eventid='+id); 
```

页面加载正常并且也可以工作，但是日期字段和富文本区域不起作用。当我单击日期字段并且富文本区域显示为普通文本区域时，没有任何反应。我猜这可能是因为调用页面不是冷融合页面。有没有办法强制加载处理 CFM 页面？

编辑：这些是未正确呈现的字段：

```
<cftextarea html="no" width="220" height="60" richtext="yes" toolbar="BasicLink" toolbarOnFocus="true" name="description" required="true"></cftextarea>
<cfinput type="datefield" name="enddate" maxlength="30"> 
```

当我直接访问页面而不是通过加载功能时，它们按预期工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T19:15:39.947

在我看来，这听起来像是您正在尝试在 dom 中实际可用必要的标记（来自 cfml 页面）之前初始化您的 javascript 控件（即，可能是 $("#datepicker").datepicker()) 方法。

换句话说，确保首先加载 cfml 页面，并且只有在加载完成后才运行 javascript 来初始化日期选择器和富文本编辑器（即这应该在加载方法的成功回调时发生）

伪代码

```
$('#content').load('ajax/cfml_page.cfm', function() {
  // setup js controls
}); 
```

希望有帮助

编辑：哎呀，现在我看到您正在尝试使用内置的 cfml 表单控件，我的回答并不相关。为了更精简的 javascript 和更大的灵活性，可能值得考虑放弃内置的 cfml 表单控件并使用 jqueryui 或其他库来完成此任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T19:18:48.300

尝试将 ID="controlName" 添加到您的两个冷融合属性。你只给它一个名字而不是一个ID。

---对不起，无法弄清楚如何删除我的答案。误读了您的问题，以为您无法访问您的字段。

# ruby-on-rails - UUID 作为 PostgreSQL 中的主键会导致索引性能不佳吗？

> ID：13145988
> 
> 赞同：69
> 
> 时间：2012-10-30T19:05:49.817
> 
> 标签：ruby-on-rails, ruby, postgresql, heroku

我使用 PostgreSQL 数据库在 Heroku 上的 Rails 中创建了一个应用程序。

它有几个表，旨在能够与可以在不同位置创建数据的移动设备同步。因此，我有一个 uuid 字段，它是一个字符串，除了一个自动增量主键外，还存储一个 GUID。uuid 是服务器和客户端之间通信的一个。

我在服务器端实现同步引擎后意识到，当需要一直在 uuid<->id 之间进行映射时，这会导致性能问题（在写入对象时，我需要在保存之前查询 uuid 以获取 id 和发回数据时相反）。

我现在正在考虑切换到仅使用 UUID 作为主键，从而使写作和阅读变得更加简单和快捷。

我读过 UUID 作为主键有时会在使用聚集主键索引时给出糟糕的索引性能（索引碎片）。PostgreSQL 是否会遇到这个问题，还是可以使用 UUID 作为主键？

我今天已经有一个 UUID 列，所以存储方面会更好，因为我删除了常规的 id 列。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-10-30T19:54:28.323

（我在 Heroku Postgres 工作）

我们在一些系统上使用 UUID 作为主键，效果很好。

我建议你使用`uuid-ossp`扩展，甚至让 postgres 为你生成 UUID：

```
heroku pg:psql
psql (9.1.4, server 9.1.6)
SSL connection (cipher: DHE-RSA-AES256-SHA, bits: 256)
Type "help" for help.

dcvgo3fvfmbl44=> CREATE EXTENSION "uuid-ossp"; 
CREATE EXTENSION  
dcvgo3fvfmbl44=> CREATE TABLE test (id uuid primary key default uuid_generate_v4(), name text);  
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "test_pkey" for table "test"
CREATE TABLE  
dcvgo3fvfmbl44=> \d test
                 Table "public.test"  
Column | Type |              Modifiers              
--------+------+-------------------------------------  
id     | uuid | not null default uuid_generate_v4()  name   | text |  
Indexes:
    "test_pkey" PRIMARY KEY, btree (id)

dcvgo3fvfmbl44=> insert into test (name) values ('hgmnz'); 
INSERT 0 1 
dcvgo3fvfmbl44=> select * from test;
                  id                  | name  
--------------------------------------+-------   
 e535d271-91be-4291-832f-f7883a2d374f | hgmnz  
(1 row) 
```

编辑性能影响

这将*始终*取决于您的工作量。

整数主键具有局部性优势，其中相似数据更靠近。这可能有助于例如：范围类型查询，例如`WHERE id between 1 and 10000`虽然锁争用更糟。

如果您的读取工作负载是完全随机的，因为您总是进行主键查找，那么不应该有任何可测量的性能下降：您只需为更大的数据类型付费。

你在这张桌子上写了很多，这张桌子很大吗？尽管我没有对此进行测量，但有可能维持该指数会产生影响。不过，对于很多数据集，UUID 就可以了，并且使用 UUID 作为标识符具有一些不错的属性。

最后，我可能不是最有资格对此进行讨论或提出建议的人，因为我从来没有运行过一个足够大的表，它的 UUID PK 已经成为问题。YMMV。（话虽如此，我很想听听有人遇到这种方法的问题！）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-23T15:33:16.340

正如接受的答案所述，在这种情况下，范围查询可能会很慢，但不仅限于`id`.

自动增量自然按日期排序，因此当使用自动增量时，数据按时间顺序存储在磁盘上（请参阅 B-Tree），从而加快读取速度（无需寻找 HDD）。例如，如果列出所有用户，自然顺序将是按创建日期创建的，这与自动增量相同，因此范围查询在 HDD 上执行得更快，而在 SSD 上，我猜，差异将不存在，因为 SSD 设计上总是随机的访问（不寻头，不涉及机械部件，纯电）

# arduino - Arduino 期望什么目录（文件夹），它们是如何创建的？

> ID：13145989
> 
> 赞同：1
> 
> 时间：2012-10-30T19:05:54.573
> 
> 标签：arduino, directory

我正在运行 Linux Fedora 12（我知道......）Arduino 的教程谈到了一组令人眼花缭乱且经常相互冲突的文件夹（“文件夹”？Windows 术语？），例如“目标”、“速写本”和“库” . Arduino 目录的推荐结构是什么，哪些应该自动生成，哪些应该创建为空目录？在尝试了一些实验之后，这是我的 ~/arduino/ 目录的抱歉状态。

```
 ... ~]$ ls -l arduino/
total 31816
-rw-rw-r--.  1 Harry Harry   284277 2012-08-18 16:07 191789-an-01-en-   ARDUINO_UNO_PLATINE.pdf
-rw-rw-r--.  1 Harry Harry  1413564 2012-10-29 15:11 2-2-tft-display.pdf
drwxr-xr-x. 10  1000  1000     4096 2012-08-28 15:51 arduino-1.0.1
-rw-rw-r--.  1 Harry Harry 15715667 2012-08-13 15:17 arduino-1.0.1-linux.tgz
-rw-rw-r--.  1 Harry Harry    70114 2012-10-08 16:16 ArduinoI2CSlave.pdf
-rw-rw-r--.  1 Harry Harry    36395 2012-09-01 16:15 Arduino playground - TimedAction  Library.html
-rw-rw-r--.  1 Harry Harry   450230 2012-09-01 13:56 ArduinoUno_R3_Pinouts.png
-rw-rw-r--.  1 Harry Harry    83339 2012-09-02 11:52 Arduino_Uno_Rev3-schematic.pdf
-rw-rw-r--.  1 Harry Harry 13133105 2012-08-19 11:18 doc8161.pdf
-rw-rw-r--.  1 Harry Harry    19641 2012-09-01 13:55 Electronics   Microprocessors       Arduino Uno Rev3 pinouts photo.html
-rw-rw-r--.  1 Harry Harry    24305 2012-09-07 14:47 Hardware   Neil's Log Book.html
-rw-r--r--.  1 root  root     75220 2012-10-08 17:56 I2CSlave.bklt
drwxrwxr-x.  3 Harry Harry     4096 2012-08-18 17:13 LCDtutorial
drwxrwxr-x.  3 Harry Harry     4096 2011-10-15 03:04 __MACOSX
-rw-rw-r--.  1 Harry Harry  1134034 2012-08-19 16:23    nRF24L01P_Product_Specification_1_0.pdf
-rw-rw-r--.  1 Harry Harry     4422 2012-08-29 15:12 NRF24Library.html
drwxr-xr-x. 40 Harry Harry     4096 2011-12-09 12:01 Programming Arduino
-rw-rw-r--.  1 Harry Harry    24302 2012-08-18 14:37 ProgrammingArduino1.0.zip
drwxr-xr-x.  2 root  root      4096 2012-09-01 15:55 sketchaug28a
drwxr-xr-x.  2 root  root      4096 2012-09-01 19:53 sketchaug28b
-rw-rw-r--.  1 Harry Harry    41684 2012-10-08 11:39 SlaveI2C.txt
drwxr-xr-x.  3 Harry Harry     4096 2006-05-12 10:09 Test
-rw-rw-r--.  1 Harry Harry     3109 2012-10-30 18:38 Test.zip 
```

对于如何以 Arduino 规范形式进行整理的任何建议，我将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:35:11.747

文件夹里面`arduino-1.0.1`应该是一个文件夹`library`。速写本默认位于`/home/{username}`文件夹中。我也不知道一个名为`target`.

# css - 响应式 css - 当屏幕较大时停止图像重叠

> ID：13145995
> 
> 赞同：0
> 
> 时间：2012-10-30T19:06:35.990
> 
> 标签：css, html, responsive-design

我正在创建一个响应式 html5 播放器，目前正在设计 css。我遇到的问题是，在`.container`大屏幕上查看时图像会重叠，而在小屏幕上查看时不会填充容器。图像必须始终在所有屏幕尺寸上显示相同的尺寸，并且必须始终填充（高度）容器。

这是一个[jsfiddle](http://jsfiddle.net/NPdtT/)。我把它全部放在一个 div 中来模拟不同的屏幕尺寸，只需改变它的宽度来看看会发生什么！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T19:12:56.493

# php - Satis - 如何在生成的 packagegist packages.json 中设置名称

> ID：13145998
> 
> 赞同：0
> 
> 时间：2012-10-30T19:06:44.980
> 
> 标签：php, composer-php, satis, packagist

以下是文档：

*   [http://getcomposer.org/doc/articles/handling-private-packages-with-satis.md](http://getcomposer.org/doc/articles/handling-private-packages-with-satis.md)

这是我的 config.json 文件

```
{
    "autoload": {
        "psr-0": { "": "src/" }
    },
    "name": "Local Packagist",
    "homepage": "http://blah/packagist",
    "repositories": [
        { "type": "vcs", "url": "http://blahsvn/myProject/my-bundle" }
    ],
    "require-all": true
} 
```

运行 satis build 命令后，我在 composer.json 文件中得到了这个（见这里）：

```
{
    "require": {
        "myProject/my-bundle": "2.1.*"
    },
    "repositories": [
        {
            "type": "package",
            "package": {
                "name": "myProject/my-bundle", <-- HERE
                "version": "2.1.1",
                ...
            }
        }
    ]
} 
```

当我生成 packages.json 文件时，我看到了这个（见这里）：

```
{
    "packages": {
        "myProject/not-my-bundle-name": {
            "2.1.1": {
                "name": "myProject/not-my-bundle-name", <-- HERE
                "version": "2.1.1",
                ... 
```

如何让两者匹配，以便我可以使用作曲家？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:08:14.320

当您运行 satis build 时，您会得到一个 packages.json，其中包含它在您配置的存储库中找到的所有信息。因此，如果`http://blahsvn/myProject/my-bundle`在 trunk/ 中有 composer.json 文件，它将定义捆绑包的名称。如果名称与您想要的不匹配，请确保在中继中更改它。

然后，您在项目的 composer.json 中添加的是“composer”类型的存储库，并且 url 指向您的满意存储库。不要*重新*定义包，否则你会失去全部的满足感。它应该如下所示：

```
{
    "require": {
        "myProject/my-bundle": "2.1.*"
    },
    "repositories": [
        {
            "type": "composer",
            "url": "http://blah/packagist"
        }
    ]
} 
```

那是假设`http://blah/packagist/packages.json`是satis倾倒的东西。

注意：您不必在 satis config.json 中定义任何自动加载。